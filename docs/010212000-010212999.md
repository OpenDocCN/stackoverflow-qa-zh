# StackOverflow 问答 10212000-10212999

# c# - C# Xml 序列化：将类属性序列化为父类的属性

> ID：10212001
> 
> 赞同：2
> 
> 时间：2012-04-18T14:50:20.047
> 
> 标签：c#, xml, xml-serialization

```
[Serializable]
public class XX
{
    [XmlAttribute("name")]
    public string name{get;set;}
}

[Serializable]
[XmlRoot("tree")]
public class XY
{
    public XX Name{get;set;}

    [XmlAttribute("surname")]
    public Surname{get;set;}
} 
```

嗨，我正在尝试将类似于上面这些类的内容序列化为 XML。我的问题是XX类的属性应该序列化为XY类序列化的属性，而不是XmlElement。有谁知道可以吗？？为了澄清这里是应该产生的 xml 文件的示例：

```
<tree name="Jack" surname="Thompson">
</tree> 
```

我不想要这个：

```
<tree surname="Thompson">
    <name>Jack</name>
</tree> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:57:24.247

我不认为你能做到这一点。XML 的结构告诉序列化程序如何工作。如果您将一个属性标记为`name`在父对象中命名的属性，那么序列化程序将不知道`name`要使用哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:58:00.377

您可能应该调整您的类结构以反映您想要的 xml。如果“name”只是元素“tree”的一个属性，那么理想情况下，字符串“name”应该是“XY”类的属性，而“XX”类根本不存在。

但是，如果您确实需要像现在这样存在这些类，那么我建议创建第三个类作为代理，它的结构与您的 xml 匹配，并在类 XY 中创建一个方法，该方法将自行翻译进入你的新班级。然后序列化新类而不是 XY 和 XX。

# bash - 如何从 bash 中的文件中加载列表？

> ID：10212010
> 
> 赞同：1
> 
> 时间：2012-04-18T14:50:55.717
> 
> 标签：bash

我是 bash 的新手，我只想从一个文件中加载一个列表，其中提到所有以`#`or开头的行都`;`应该被忽略（以及空行）。

正如预期的那样，每个有效行都应该成为列表中的一个字符串。

我需要对此列表的每个（有效）元素执行一些操作。

注意：我有一个 for 循环，例如`for host in host1 host2 host3`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T15:02:56.427

您可以使用 bash 内置命令`mapfile`将文件读取到数组：

```
# read file(hosts.txt) to array(hosts)
mapfile -t hosts < <(grep '^[^#;]' hosts.txt)

# loop through array(hosts)
for host in "${hosts[@]}"
do
    echo "$host"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:09:26.643

```
$ cat file.txt 
this is line 1

this is line 2

this is line 3

#this is a comment

#!/bin/bash

while read line
do
    if ! [[ "$line" =~ ^# ]]
    then
        if [ -n "$line" ]
        then
            a=( "${a[@]}" "$line" )
        fi
    fi
done < file.txt

for i in "${a[@]}"
do
    echo $i
done 
```

输出：

```
this is line 1
this is line 2
this is line 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:37:44.817

如果您不担心输入中的空格，您可以简单地使用

```
for host in $( grep '^[^#;]' hosts.txt ); do
    # Do something with $host
done 
```

但`${array[@]}`通常使用数组和其他答案更安全。

# exception - MongoDB InsertBatch 异常

> ID：10212011
> 
> 赞同：0
> 
> 时间：2012-04-18T14:51:02.227
> 
> 标签：exception, mongodb, insert

例如，我有新的文档序列要使用 _ids 编写：[1, 2, 3, 4, 5, 6, 7]

并且已经存储了带有_ids的文档集合：[3,4,7]。

我想用命令 InsertBatch 存储我的新序列，并且不想检查每个 _id 是否存在。当然，Mongo 会因为碰撞而抛出异常，并且集合将只有一部分新序列：[3,4,7,1,2]

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:37:55.210

如果您使用的是 MongoDB 2.0，则可以设置`continueOnError`标志`false`来实现此行为。有关详细信息，请参阅[http://www.mongodb.org/display/DOCS/Inserting#Inserting-Bulkinserts](http://www.mongodb.org/display/DOCS/Inserting#Inserting-Bulkinserts)，并查阅驱动程序的 API 文档以了解如何在应用程序中使用它。

# ios - [viewController.view removeFromSuperView] 之间的差异；和 [viewController removeFromParentViewController];？

> ID：10212012
> 
> 赞同：1
> 
> 时间：2012-04-18T14:51:06.570
> 
> 标签：ios, xcode, view, uiview

有什么区别

```
[viewController.view removeFromSuperView]; 
```

和

```
[viewController removeFromParentViewController]; ? 
```

我只是想从UIScrollView中移除一个子视图，当然代码应该是这样的`[viewController.view removeFromSuperView];`

但是当我尝试时`[viewController removeFromParentViewController];`，它似乎也很实用。诡异的！

# compiler-construction - 如何自定义 Visual c 2010 项目的构建以使用不同的编译器和链接器？

> ID：10212014
> 
> 赞同：1
> 
> 时间：2012-04-18T14:51:10.617
> 
> 标签：compiler-construction, msbuild

我们有一个包含一堆 C 源文件的 Visual Studio 2010 项目。

这些文件需要编译，然后使用嵌入式设备的特殊工具链链接。

目前，我们正在使用默认的 C++ 构建在 Visual Studio 中编译它，然后，在构建后事件中，我们正在为嵌入式设备调用工具链。

我想知道是否有某种方法可以使用我们的工具链而不是微软的工具链来编译和链接 Visual Studio。

我试图覆盖 Build 目标，并在这方面取得了一些进展，但是当开发人员更改项目属性时，项目的 vcxproj 文件将被覆盖。

覆盖构建目标的正确方法是什么？

问候，阿德里安。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:18:23.430

在 Visual Studio 2010 中使用自定义工具链的正确方法是设置自定义平台工具集：

```
<PlatformToolset>Intel C++ Compiler XE 12.1</PlatformToolset> 
```

在这里，我使用的是英特尔 C++ 编译器。构建项目时，MSBuild 在目录中查找平台工具集：

```
c:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\$(Architecture)\PlatformToolsets\ 
```

在哪里`$(Architecture)`，`x64`等等`Win32`。

但是，要使用您的自定义工具链，您必须编写 MSBuild 配置文件。在我的例子中，英特尔 C++ 编译器带有这样的文件。所以，我需要做的就是设置适当的平台工具集（这可以从 Visual Studio 2010 的项目属性窗口中完成）。

这里是 Visual C++ 团队博客中文章的链接，您可以在其中找到更多详细信息： [C++ Native Multi-Targeting](http://blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx)

# tridion - 使用 XSLT 组件模板时访问类别的子关键字

> ID：10212021
> 
> 赞同：10
> 
> 时间：2012-04-18T14:51:30.957
> 
> 标签：tridion

在最近从 Tridion 2009 升级到 2011 期间，XSLT 组件模板的一部分停止工作。

组件模板从当前发布 XML 的 categoryXSD 部分读取子关键字。然后使用 webdav 加载每个关键字。

似乎该出版物 XML 的这一部分已在 2011 年被删除。

有谁知道使用 XSLT 模板时从 Category Tcm Id 获取子关键字的另一种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:34:50.983

我正在查看 Publication XML，我认为您不走运。提到`<tcm:CategoriesXSD>`，您可以从中获取类别 TcmUri，但如果您导航到类别 XML，则其中没有提及其子关键字。

因此，要么按照 Chris 的建议使用 XSLT Mediator，要么将此 XSLT 重写为 C# 模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T16:43:57.253

If I need lists of items when using the older style XSLT Component Templates I normally make a "Helper" Service or ASPX page which returns an XML document containing the relevant items. You can then call that helper using the Document() function in XSLT. Typically this takes the form of a ASPX stored on the CMS Service at something like `http://tridion.local.url/web/helpers/GetListXml.aspx?uri=SomeOrgItemURI`

You can use the TOM API in GetListXml.aspx to query the item using the GetListItem and write the response to the output.

Then in your XSLT you can use something like `<xsl:variable name="KEYWORDS" select="document('http://tridion.local.url/web/helpers/GetListXml.aspx?uri=$CAT_URI')"/>`. You can then iterate through the Keyword node in the new variable.

However none of that in necessary if you use Modular Templates and the [XSLT Mediator](http://www.sdltridionworld.com/community/extension_overview/xsltmediator.aspx) available on SDL Tridion World as there are many helpers are built in. I strongly recommend considering the newer template techniques, they have a lot to offer.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:09:05.800

您没有提及您是否将 XSLT 中介器用于模块化模板，或者您是否使用普通的旧 XSLT 组件模板。你能澄清一下吗？

我使用 XSLT 中介器，并添加一个用 C# 编写的帮助程序模板，该模板在执行 XSLT 之前将类别中的关键字添加到包中。然后可以使用参数将该列表作为 XML 文档进行访问。如果这对您有用，请告诉我，我将尝试挖掘我的代码示例。

# jquery - Tumblr 创建了我不想要的段落

> ID：10212023
> 
> 赞同：1
> 
> 时间：2012-04-18T14:51:34.187
> 
> 标签：jquery, tumblr, paragraph

我在我的文本中使用了 Jquery 脚本和 Div 的组合。Tumblr 会自动将段落放在孤立的文本周围，从而在我的链接后面创建一个空间。即使我在 html 模式下手动删除它们也会发生这种情况。

怎么能解决这个问题？非常感谢任何答案。

**我希望它看起来像这样：**
Lorem Ipsum 只是印刷和排版行业的虚拟*文本*。
*链接 1* ,*链接 2*

**但它最终看起来像这样：**
Lorem Ipsum 只是印刷和排版行业的虚拟*文本*。*链接 1* ,*链接 2*

参见示例：[http:](http://roingbaer.com)

//roingbaer.com tumblr 搞砸后的 HTML：

```
<p>Lorem Ipsum is simply dummy</p>
<div class="hover"><a href="http://example.com">text</a>
<div class="front"><img src="http://images.roingbaer.com/ludvig.png" /></div>
</div>
<p>, of the printing and typesetting industry.</p>
<div class="hover">Link 1
<div class="front"><img src="http://24.media.tumblr.com/tumblr_lyz7fjMdnN1rp3eymo1_r2_500.jpg" /></div>
<div class="back"><img src="http://24.media.tumblr.com/tumblr_lyz7fjMdnN1rp3eymo1_r2_500.jpg" /></div>
</div>
<p>,</p>
<div class="hover">Link 2
<div class="front"><iframe frameborder="0" height="233" src="http://www.youtube.com/embed/VMeXGE_a8Gg" width="400"></iframe></div>
<div class="back"><iframe frameborder="0" height="480" src="http://www.youtube.com/embed/VMeXGE_a8Gg" width="853"></iframe></div>
</div> 
```

Javascript：

```
$(".front").each(function() {
 var right = Math.floor(Math.random()*800);
 var top = Math.floor(Math.random()*500);

 $(this).css({'margin-right': right});
 $(this).css({'margin-top': top});
});

hoverdiv = $("div.hover")

hoverdiv.on("hover", function() {
$(this).children(".front").show()
});
hoverdiv.on("mouseleave", function() {
$(this).children(".front").hide()
})
hoverdiv.on("click", function() {
$(this).children(".back").toggle()
$(this).children(".front").hide()
}); 
```

CSS

```
.back { 
display:none;
width:100%;
height:100%;
position:fixed;
top:0;
text-align:right;
}

.front
{ 
display:none;
max-height:200px;
max-width:auto;
position:fixed;
z-index:-50;
top:0;
right:100px;
}

.hover { 
cursor:pointer;
margin:0;
padding:0;
font-style:italic;
display:inline;
} 
```

相关Tumblr代码：

```
<div id="content">
<!-- Loops for each post-type -->
{block:Posts}
  <div class="post {TagsAsClasses}">
    <div class="post-header">
{block:Text}
      <p class="post-metadata">
      </p>
    </div> <!-- end post-header -->

              <div class="text">
                        <h3>{Title}</h3>

      {Body}
    </div>
    {/block:Text} 
```

# java - 行为和忙碌指示器

> ID：10212025
> 
> 赞同：1
> 
> 时间：2012-04-18T14:51:36.277
> 
> 标签：java, wicket

我的 Java 代码中有这样的东西：

```
//...omitted some not revelant code
AjaxIndicatorAppender indicator = new AjaxIndicatorAppender();
final RequiredTextField<String> nickField = new RequiredTextField<String>( "nick", new PropertyModel<String>( this, "nickValue" ) );
formContainer.add( nickField );
indicator.bind(nickField);
nickField.add( new MyValidatingBehaviour( (Form) formContainer, "onkeyup", Duration.ONE_SECOND, indicator ) );

//...

private class MyValidatingBehaviour extends AjaxFormValidatingBehavior implements IAjaxIndicatorAware
{
    AjaxIndicatorAppender indicator;

    private MyValidatingBehaviour( Form<?> form, String event, final Duration throttleDelay, AjaxIndicatorAppender indicator )
    {
        super( form, event );
        this.setThrottleDelay( throttleDelay );
        this.indicator = indicator;
    }

    @Override
    public String getAjaxIndicatorMarkupId()
    {
        return indicator.getMarkupId();
    }
} 
```

但是什么也没有发生，没有任何指标，我做错了什么吗？找不到我的案例的任何例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:22:21.197

代替

```
indicator.bind(nickField); 
```

它应该是

```
nickField.add(indicator); 
```

它有效:)

# java - 我可以在无状态会话 bean 中使用实例变量吗？

> ID：10212031
> 
> 赞同：3
> 
> 时间：2012-04-18T14:51:56.917
> 
> 标签：java, jakarta-ee, javabeans, stateless

我知道无状态 bean 不保持会话状态，但我需要的只是一个记录器。我应该在每个被调用的方法中获取记录器吗？如果没有，那么我应该在哪里初始化它？

这是肯定的，如果我编写这样的代码，我不会在使用记录器的某些方法中得到 NullPointerException 吗？

```
 @PostConstruct
 public void init() {
   logger = Logger.getLogger();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:05:16.003

我猜你不希望有一个特定于请求/会话的记录器，对吧？在这种情况下，您甚至可以使用静态类成员来添加记录器并让所有 bean 实例使用相同的记录器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:11:03.597

创建一个具有以下属性的单例类：

1.  具有类本身类型的静态字段
2.  私有构造函数，以确保仅启动此记录器类的一个实例
3.  `getInstance()`方法将给出该类的唯一实例
4.  `getLogger()`获取记录器的方法

在该类的构造函数中初始化记录器，
每次需要使用时都可以从getLogger()方法中获取记录器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:21:35.640

尝试：

```
private static final Logger log = Logger.getLogger(); 
```

如果您需要线程特定的值，请注意 Logger 的输出处理程序在每一行中写入线程名称，您应该没问题。

# sqlite - 在 SQLite 中，如何防止 REPLACE 更新现有记录的 id？

> ID：10212035
> 
> 赞同：0
> 
> 时间：2012-04-18T14:52:09.667
> 
> 标签：sqlite, insert, replace

这是一个基本的例子。sqlite 文件存储单个项目文件的 kvps：

```
CREATE TABLE settings (id INTEGER PRIMARY KEY ASC,rel,key,val) 
```

`rel`通常与现有`id`记录上的 s 相关联，但没有任何特定限制。

此设置表保存诸如`key=name, value=Josh`和等设置`key=url, value=www.site.com`。我正在使用的 sqlite 实现忽略了执行中的多个查询，并且循环很慢，所以我只能做这样的事情：

```
REPLACE INTO settings(key, val) 
    SELECT 'name', 'Vosh' UNION SELECT 'url', 'www.site.com' UNION ... 
```

这通常会将`Josh`的名称更新为，`Vosh`但它也会设置一个新的 id，从而破坏该特定记录的 id 之间的任何关系，由`rel`另一行引用。

我应该如何处理这个？

# iphone - iOS 客户端/服务器 - 我应该使用 GameCenter 吗？

> ID：10212036
> 
> 赞同：1
> 
> 时间：2012-04-18T14:52:10.853
> 
> 标签：iphone, ios, client-server, game-center

第一次开发客户端/服务器游戏，想知道是否有人可以给我一些指示。我应该只使用GameCenter吗？我应该自己写吗？（类似于 DrawSomething 的创作者所做的）

我有一个 GameCenter 实现的基本演示，但我不知道使用它的起起落落 - 有吗？我是否应该开发自己的完全自定义但在周末的空闲时间丢失？

任何见解表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:53:08.077

GameCenter 和类似的服务非常普遍，大多数 iOS 用户都有一个帐户。从用户的角度来看，当开发人员使用 GameCenter 时，我更喜欢它。（保存用户创建另一个帐户，让他们无需搜索即可查看所有朋友的统计信息等等。）

实现自己的“GameCenter”的一个优点是（如 DrawSomething）它可以是跨平台的。

总的来说，没有人可以为您做出这个决定。我个人的意见是你应该只使用 GameCenter，因为我相信你不会得到一个像原来的 GameCenter 一样好的解决方案。

# excel - 用于替换 Excel 2003 中的 SOAP 工具包以升级到 Excel 2010 以访问 Web 服务的选项

> ID：10212038
> 
> 赞同：0
> 
> 时间：2012-04-18T14:52:14.170
> 
> 标签：excel, service, web

我们目前使用 SOAP Toolkit 在 Excel 2003 中访问一些 Web 服务，它工作正常。

然而，我们正逐渐转向 Excel 2010，我被要求研究在 Excel 2010 中访问 Web 服务的选项。

我显然可以使用 Visual Studio 和 Excel 工作簿加载项，我目前正在研究它似乎是明显的候选者，但我想知道还有哪些其他选项可供我研究？

干杯，乔治。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:16:53.627

我使用了工作正常的 VSTO。

# android - Android：使用 jcifs 访问 Windows 共享的工作简单示例

> ID：10212041
> 
> 赞同：2
> 
> 时间：2012-04-18T14:52:23.857
> 
> 标签：android, jcifs

有没有人有一个简单的（最好）确认的工作示例，在 Android 中使用 jcifs 连接到 Windows 共享？我意识到这是一个非常基本的问题，但我一直在尝试我能在网上找到的所有东西（不是很多），但没有真正到达任何地方。这些示例都适用于“普通”Java，这会使我的 Android 应用程序崩溃，并显示诸如“找不到在 jcifs jar 中明确导入的类”之类的消息。或者它们是巨大的、复杂的并且具有许多额外的功能——当我尝试在我的项目中使用它们时它们不起作用。

我只想： - 实现 jcifs（当然，我知道如何导入它，但我不相信它确实有效） - 创建到 Windows 共享的连接（最好只使用 IP 地址、用户名和密码） -读取共享上的文件或目录 - 下载文件 - 上传文件

一次做一件事，这样我就可以浏览每个功能并了解它是如何工作的。任何人？当然，一个可以导入的“巨大”项目也是可能的——然后我可以尝试将它分开。但我还没有找到任何我能够开始工作的东西。

# iphone - 如何指定 CoreAudio 框架中 AudioBuffer 中的 mData 应该代表什么？

> ID：10212043
> 
> 赞同：0
> 
> 时间：2012-04-18T14:52:24.907
> 
> 标签：iphone, ios5, core-audio

如何初始化 CoreAudio 框架，以便我知道 mData 中的值代表什么？根据我之前得到的回复，这些值似乎可以表示 4 字节浮点数、4 字节有符号整数等。但是我将使用什么 API 来指定我希望这些值究竟代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:40:32.980

使用 kAudioUnitProperty_StreamFormat AudioUnitPropertyID 在您的音频单元上调用 AudioUnitSetProperty()，并使用适当的 AudioStreamBasicDescription 结构字段（包括 mFormatID、mFormatFlags、mBitsPerChannel 等）填写您所需的数据类型（int/float、signed、bits、endianness，等）在启动音频单元之前执行此操作。

检查结果代码和/或回读属性以查看您所需的设置是否成功。

有关详细信息，请参阅 Apple 的音频单元属性参考和音频单元组件服务参考文档。

# wpf - WPF 应用程序启动最大化，但屏幕分辨率与显示不匹配

> ID：10212049
> 
> 赞同：3
> 
> 时间：2012-04-18T14:52:33.453
> 
> 标签：wpf, xaml, resolution

我有一个 WPF 应用程序，并将 XAML 中的窗口定义为最大化，并且 1080x1920（1080p 垂直格式）：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"           
    x:Class="PLBCarousel.MainWindow"
    x:Name="Window"
    Width="1080" Height="1920" WindowStartupLocation="CenterScreen" WindowState="Maximized" KeyDown="Window_KeyDown"> 
```

当我在 1080w x 1920h 显示器上运行应用程序时，隐藏任务栏，它开始最大化，但所有元素都未对齐，并且监视窗口提供以下值：

```
 System.Windows.SystemParameters.PrimaryScreenHeight 1536.0  double
    System.Windows.SystemParameters.PrimaryScreenWidth  864.0   double 
```

此应用程序过去曾在同一显示器上正确显示，但该屏幕被用作辅助显示器，而不是主显示器。

任何想法为什么会发生这种情况？我认为上述两个值应分别解析为 1920 和 1080。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:14:39.637

原来我需要在重新安装我的操作系统后更改我的系统 DPI。在 Win 7 上执行此操作的说明可在此处找到：[Win 7 DPI change](http://www.sevenforums.com/tutorials/443-dpi-display-size-settings-change.html)。

感谢 Kristopher Johnson 上面的链接帮助。

# asp.net-mvc-3 - Telerik mvc 网格验证

> ID：10212050
> 
> 赞同：0
> 
> 时间：2012-04-18T14:52:35.687
> 
> 标签：asp.net-mvc-3, telerik, telerik-grid

这可以使用 Telerik MVC 网格来实现吗？

```
Table in SQL
ItemID  Name    ItemQuantity
1       Apple   100
2       Banana  50
3       Orange  10
4       Grapes  40

GRID
Item Name   Quantity        Command
Apple       95              Save
Banana      51 <---INVALID  Save
Orange      0               Save
Grapes      100             Save 
```

1.  将表项中的所有项加载到网格中

2.  允许用户输入所需数量（数量是唯一启用的字段），但将能够在保存之前根据表中的数量进行验证。或者创建一个数值文本框或下拉列表，其最大值将等于表中的数量。我正在考虑在 MVC 模型中使用远程验证，但不确定这是否是最佳解决方案。

3.  保存网格中每行或每批次数量大于 1 的所有项目。

请帮助我，并给我一个简单的例子或任何与此相关的链接，这只是我非常大问题的简化版本，我已经花了 4 天多的时间来尝试找到解决方案要求。我希望你们中的任何人都可以帮助我。

任何帮助将不胜感激

谢谢

萨曼莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:51:45.117

将如下隐藏列添加到您的网格中，并在保存按钮单击时验证 Jquery 中输入的值

```
<%= Html.Telerik().Grid(Model)
    .Name("Items")
    .Columns(columns =>
    {
        columns.Bound(o => o.ItemQuantity).Hidden(true);  
    })
%> 
```

# objective-c - 在特定页面中的现有 PDF 文档上绘制内容

> ID：10212058
> 
> 赞同：5
> 
> 时间：2012-04-18T14:53:02.737
> 
> 标签：objective-c, ios, cocoa-touch, ipad, pdf

所以我正在为 iPad 实现一种特定类型的 PDF 编辑器，供个人使用。我已经实现了 PDF 查看器，现在我陷入了编辑部分。这是交易：我在 UIView 中显示文档的每一页，然后创建另一个视图，其中的页面大小完全相同。然后我让用户在视图上绘制

现在，假设我想在它绘制的 PDF 文件的确切页面中打印 UIVIiew。我知道有一种方法可以做到这一点，但是对于更大的文档来说需要很长时间。我是这样做的（简化代码以便更好地理解）：

```
UIGraphicsBeginPDFContextToFile(file, pageSize, nil);

for (size_t currentPage = 1; currentPage <= pageCount; currentPage++) {

    UIGraphicsBeginPDFPageWithInfo(pageSize, nil);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    //translates context, copies doc page to the new pdf, translates back
    CGContextTranslateCTM(ctx, 0, pageSize.size.height);
    CGContextScaleCTM(ctx, 1.0, -1.0); 
    CGPDFPageRef page = CGPDFDocumentGetPage (document, currentPage);
    CGContextDrawPDFPage (ctx, page);
    CGContextScaleCTM(ctx, 1.0, -1.0);
    CGContextTranslateCTM(ctx, 0, -pageSize.size.height);
    //custom drawing goes here
    if(currentPage == desiredPage) [imageFromView drawInRect:pageSize];
}
UIGraphicsEndPDFContext(); 
```

这里的问题是此过程重新创建了整个 PDF，对于较大的文档，这可能需要几分钟才能完成。

我需要一个在 PDF 文档的页面中打印 UIView（用户绘制的）的解决方案，而无需重新创建整个文档。

非常感谢任何链接、提示和其他有用信息。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:37:50.247

在 iOS 上只有 CGPDF 并且它不支持可变性，因为 Mac 的 PDFDocument 部分支持。

您必须编写自己的解决方案来获取未修改页面的 PDF 流，并将它们与您正在创建的新页面结合起来。我开始了一个 DTPDFDocument 包装器的开源项目，该包装器以 Mac 上的包装器为模型，但到目前为止我在移动或修改页面方面没有做任何工作：[https ://github.com/Cocoanetics/DTPDF](https://github.com/Cocoanetics/DTPDF)

或者，您可以使用众多可用的 PDF 框架之一。PSPDFKit 是第一个想到的。

# sql - 基于2键sql server更新列

> ID：10212060
> 
> 赞同：0
> 
> 时间：2012-04-18T14:53:05.423
> 
> 标签：sql, sql-server-2008

我有以下数据库表

*   主表 - 包含数据范围的 PK Id 列
*   参考表 – 具有相关代码的数据范围的临时表
*   目标表 – 要根据主表和参考表插入或更新 Id 列的表

* * *

```
 Reference Table
          Code      From        To
          Abc45     200        400
          Cde78     0          128
          Fcde1     600        898

    Master Table
          Id        From        To
           1        1          100
           2        200        400
           3        0          128
           4        600        898

    Target Table
         Name      id      City      Country      Code
         West               B          CC         Fcde1
         East               V          GG         Cde78 
         North              T          TT         Abc45
         South              Z          YY         Abc45 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:02:30.407

试试这个：

```
UPDATE  t
SET     t.id = other.id
FROM    Traget t
JOIN    (SELECT r.code, m.id
      FROM Master m
      INNER JOIN Reference r ON m.From = r.From AND m.To = r.To
      ) other
ON      t.Code = other.Code 
```

我使用了这个问题[Update with inner join?](https://stackoverflow.com/questions/2849534/update-with-inner-join) 作为参考。

# osx-lion - OS X LION：无法启动我的应用程序 UI

> ID：10212061
> 
> 赞同：0
> 
> 时间：2012-04-18T14:53:06.200
> 
> 标签：osx-lion

我正在开发一个 Mac 应用程序，它作为“代理”启用，始终在后台作为服务运行，即使在重新启动后也是如此。我确实有一个登录用户界面。但是，登录 UI 中有默认选项“关闭”(⤬)、最小化 (⎯) 和恢复 (♰)。因此，用户可以关闭应用程序 UI。现在的问题是，如果用户通过单击“关闭”（⤬）选项关闭应用程序 UI（但应用程序仍在后台运行），那么我如何再次启动 UI？我尝试双击 .app 文件，但它没有启动 UI。我认为，因为该应用程序已经在后台运行。我一直在尝试解决好几个小时，但找不到。有人可以帮我解决这个问题吗？如果我关闭了应用程序 UI（尽管应用程序仍在后台运行），

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:03:09.683

为什么不向您的应用程序添加托盘图标，这将允许用户通过单击您的托盘图标返回您的 GUI。[或单击托盘图标中的菜单]

# jsf-2 - 如何在没有 Bean Validaiton 的情况下验证 JSF 2.0 中的两个字段

> ID：10212065
> 
> 赞同：1
> 
> 时间：2012-04-18T14:53:18.990
> 
> 标签：jsf-2

我想验证页面上的两个字段是否匹配（例如，相同的确切电子邮件地址）。我无权访问 bean 验证/验证组。我应该如何验证两个地址是否匹配？

当前的想法是在第二个字段上放置一个验证器，并让它检查它是否与第一个字段的提交值匹配。这是最好的方法还是有办法通过配置或其他方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T18:36:20.607

以下是迄今为止所有解决方案的汇总：

看

1) [JSF 不支持跨字段验证，有解决方法吗？](https://stackoverflow.com/questions/6282466/jsf2-0-doesnt-support-cross-field-validation-is-there-a-workaround)

Ajaxified 解决方案：2）[如何通过ajax 验证两个密码字段？](https://stackoverflow.com/questions/7489893/how-validate-two-password-fields-by-ajax/7493527#7493527)

PostValidate 解决方案：3）[我如何验证两个组件的值是否相同？JSF](https://stackoverflow.com/questions/2456272/how-do-i-validate-two-components-value-are-same-or-not-jsf)

# c - 用 ncurses 处理转义序列？printf 是否处理转义序列？

> ID：10212070
> 
> 赞同：3
> 
> 时间：2012-04-18T14:53:38.963
> 
> 标签：c, printf, ncurses, ansi-escape

我的程序从网络读取一些文本数据，例如： `Hello \033[1;34mworld\033[0m and bla bla bla!!!\n"`. 当程序使用 prinf 输出这个字符串时，单词“world”是蓝色的。但是当我将 ncurses 接口与 wprintw 或 addch 一起使用时，我会看到带有转义序列的原始字符串。这是否意味着 printf 处理转义序列？使用 ncurses 处理转义序列的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T15:02:55.227

不，您的终端处理转义序列。您看到的现象来自这样一个事实，即 ncurses 的全部目的是跟踪预期的终端内容并能够重新绘制它，并且作为这样做的一部分，它会去除任何转义序列。它可能会提供一个替代功能来*解释*它们并将它们应用到终端应该包含的自己的图像中，但否则你必须自己做这项工作......

# javascript - Access-Control-Allow-Origin 不允许 jQuery Ajax POST 到 Rails 3.2.2

> ID：10212071
> 
> 赞同：1
> 
> 时间：2012-04-18T14:53:39.307
> 
> 标签：javascript, ruby-on-rails, ajax

我在 Heroku 上运行的 rails 脚手架项目上有一个简单的 .ajax 帖子：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js">    </script>
</head>
<body>
    <script>
    $(document).ready(function(){
        $.ajax({
            type: 'POST', url: "http://herokuserver/images.json",
            data: { image: { name: "johngalt1" } }
        });
    });
    </script>
</body> 
```

事实证明，在 Chrome 中使用 javascript 控制台我得到：

```
 XMLHttpRequest cannot load http://herokuServer/images.json. Origin http://localhost:3000 is not allowed by Access-Control-Allow-Origin. 
```

但是，当我进入 heroku 上的 rails 应用程序时，已经创建了一个名为 =>“johngalt1”的新记录。从我读过的所有内容中，我认为 javascript 的跨域问题会阻止创建记录并要求我使用 json-p 或 CORS？还是 javascript 跨域问题仅阻止通过 javascript 从服务器接收数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:19:15.127

它只会阻止浏览器接收数据。所以如果你不需要这篇文章的回复，你应该没问题。

编辑 - 当我在本地开发时，我为我的 mac 上的 Apache2 服务器创建了一个重写规则来解决这个限制。它创建了一个反向代理，诱使浏览器允许跨域请求。

# java - 使用 @Singletone 注释 ejb3.1 创建 EJB

> ID：10212082
> 
> 赞同：1
> 
> 时间：2012-04-18T14:54:04.277
> 
> 标签：java, jakarta-ee, ejb

我有以下结构：

```
@Stateless
public class BasicCMIRP {
    @EJB 
    private MyDummyBean basicMXBeanz;
} 
```

下一堂课

```
@Singleton
public class MyDummyBean {
} 
```

这很好用，但是如果我改变它并像这样`MyDummyBean`实现`DynamicMBean` ：

```
@Singleton
public class MyDummyBean implements DynamicMBean { 
    // ... implementation methods go here
} 
```

我在日志中收到`Can not create Bean BasicCMIRP`异常，这是为什么？

过去我必须通过将构造函数标记为私有并创建一个静态方法`MyDummyBean`来实现`DynamicMBean`并制作这个类单例`getInstance()`，但是在新的 Java EE 6 中，我想使用新的注解让我的生活更轻松，但有些东西不起作用，因为我期待它的工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:42:01.410

我找到了解决方案：如果 bean 实现了多个接口，则必须用 @LocalBean 标记。

# playframework-2.0 - 表单验证和表单助手

> ID：10212085
> 
> 赞同：18
> 
> 时间：2012-04-18T14:54:18.400
> 
> 标签：playframework-2.0

我仍在为 Play 2.0 中的表单验证和表单助手而苦恼。我有这个与 Twitter Bootstrap 一起使用的登录屏幕。所以我的登录表单如下所示：

```
 @helper.form(routes.Application.authenticate, 'class -> "form-horizontal") {
    <fieldset>
    <legend>@Messages("login")</legend>

            @if(loginForm.hasGlobalErrors) { 
                <div class="alert alert-error">
                <a class="close" data-dismiss="alert">×</a>
                    @loginForm.globalError.message
                </div>
            }
            @if(flash.contains("success")) {
                <div class="alert alert-success">
                <a class="close" data-dismiss="alert">×</a>
                    @flash.get("success")
                </div>
            }

            @inputText(loginForm("email"), '_label -> "Email")
            @inputText(loginForm("password"), '_label -> Messages("login.password"))

            <div class="form-actions">
                <button type="submit" class="btn btn-success">@Messages("button.doLogin")</button>
                @Messages("or")
                <a class="btn btn-warning" href="routes.LandingPage.index">@Messages("button.doCancel")</a>
            </div>              
    </fieldset>
    } 
```

我的 twitter 引导字段如下所示：

```
@(elements: helper.FieldElements)

@**************************************************
* Generate input according twitter bootsrap rules *
**************************************************@
<div class="control-group @if(elements.hasErrors) {error}">
    <label class="control-label" for="@elements.id">@elements.label</label>
    <div class="controls">
        @elements.input
        <span class="help-inline">@elements.infos.mkString(", ")</span> 
    </div>
</div> 
```

这是输出：

![登录画面](../Images/e3355620d19cb8144c4ab63f2f278a63.png)

我不明白的是：

**1、为什么帮助文本一直可见（在输入框右侧）**

*帮助文本来自`@elements.infos.mkString(", ")`*. 所以删除这一行将删除帮助文本。或者您可以传递一个空字符串来禁止显示帮助文本：`'_help -> ""`

**2、如果出现错误，如何只显示帮助文本？**

*使用此代码时可以添加帮助文本：`@elements.errors(elements.lang).mkString(", ")`*

**3，可以传递给输入文本字段的参数是什么？我也想传递类名，但我不知道如何......**

我可以定义要传递的自定义参数（即类或占位符）：`class="@elements.args.get('_class)`然后我可以像这样传递它：`'_class -> "classname"`

**4、我可以定义多于一`implicitFieldConstructors`的模板部分吗？因为对于复选框，与输入框和文本区域相比，我想要另一个 fieldConstructor，但是该怎么做呢？**

示例：在计算机数据库示例中，定义了 Twitter 引导字段，但随后按如下方式使用：

```
@inputText(loginForm("email"), '_label -> "Email") 
```

为什么这里的名字是 inputText 而不仅仅是 input？因为还有一个input.scala.html？

那么，如果我想为复选框制作一个字段处理程序，如何使用它？以下格式给了我错误：

```
@checkBoxHandler = @{ FieldConstructor(s2ftheme.constructors.checkbox.render) }
@checkbox(loginForm("remember"), '_label -> Messages("login.remeberme"))(handler = implicitFieldConstructor) 
```

我收到错误消息：

```
not enough arguments for method apply: (implicit handler: views.html.helper.FieldConstructor, implicit lang: play.api.i18n.Lang)play.api.templates.Html in object checkbox. Unspecified value parameter lang. 
```

我想我在这里错过了这个概念......谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T15:03:53.587

信息文本来自`@elements.infos.mkString(", ")`. 要显示错误，您应该`@elements.errors(elements.lang).mkString(", ")`改用。

更改信息内容的正确参数会有所*帮助*（这有点不一致，您必须阅读源代码才能实现这一点）因此，如果您想使用内置引导字段但抑制信息，您将通过`'_help -> ""`.

**编辑**#4：

以下是您应该如何调用您的特定复选框：

`@checkbox(loginForm("remember"), '_label -> Messages("login.remeberme"))(handler = implicitFieldConstructor, implicitly[Lang])`

是`@input`的，意味着有一个名为`input.scala.html`. 它是所有输入助手的基本模板。

要了解它为什么以及如何工作，您应该更深入地研究 Play 2.0 和 Scala（尤其是隐式参数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:08:12.367

1.  因为这条线`<span class="help-inline">@elements.infos.mkString(", ")</span>`。您正在那里显示有关该字段的信息。删除它以不显示信息。
2.  添加此代码：

    ```
    @if(elements.hasErrors) {
        <span class="help-inline">@elements.infos.mkString(", ")</span> 
    } 
    ```

3.  要设置类名：将其添加到您的 Twitter Bootstrap 字段：`class="@elements.args.get('_class)`. 并在您的登录表单中添加类参数，如下所示：`@inputText(loginForm("email"), '_label -> "Email", '_class -> "classname")`

要理解这个概念，请查看源代码：[https ://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/defaultFieldConstructor.scala.html](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/defaultFieldConstructor.scala.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T20:30:59.603

我在同一场战斗中显示错误:)现在我正在使用：

```
<span class="errors badge badge-important">@elements.errors.mkString(", ")</span> 
```

如果没有错误，那将被隐藏，看看这个：http: [//twitter.github.com/bootstrap/components.html#labels-badges](http://twitter.github.com/bootstrap/components.html#labels-badges)

但仍在寻找将“必需”翻译成葡萄牙语的方法。

# javascript - 理解晦涩的 JavaScript 代码

> ID：10212087
> 
> 赞同：3
> 
> 时间：2012-04-18T14:54:20.027
> 
> 标签：javascript

我在 HTML 页面的部分找到了这段代码`<head>`（一位同事做了这个，但他不再在这里工作了）：

```
(function(window, PhotoSwipe){ 
    document.addEventListener('DOMContentLoaded', function(){
        var options = {},
            instance = PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options );
    }, false);
}(window, window.Code.PhotoSwipe)); 
```

虽然我可以理解中心部分（来自 document.addEventListener），但我无法理解第一行和最后一行。他们在这里做什么？该代码来自一个名为 PhotoSwipe 的开源图片库。任何指针表示赞赏。

[编辑]

此代码是否与以下代码相同：

```
document.addEventListener('DOMContentLoaded', function(){
        var options = {},
            instance = window.Code.PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options );
    }, false); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:06:15.740

这是一段自我执行的受保护代码。让我们分解一下：

```
(function(window, PhotoSwipe){
  ...
}(window, window.Code.PhotoSwipe)); 
```

括号导致我们的代码自行执行，没有其他任何东西调用它。

这会创建对外部代码无法篡改的`window`引用。`window.Code.PhotoSwipe`所以在我们的括号内，`PhotoSwipe`是一个受保护的`window.Code.PhotoSwipe`. 并且`window`，虽然名称没有区别，但也是对外部全局`window`对象的受保护引用。

`addEventListener`可以重写下一行，以将其匿名函数作为命名函数：

```
function myFunc() {
  var options = {},
      instance = PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options );
}
document.addEventListener('DOMContentLoaded', myFunc, false); 
```

请注意，这在功能上与您在原始代码中的功能相同，只是我们从`addEventListener`调用中提取了该函数并为其命名。

`addEventListener`附加一个回调函数来处理某些事件。在这种情况下，我们正在处理事件`DOMContentLoaded`。正在`document`对象上侦听此事件。*任何时候听到*这个事件，我们都会打电话回应`myFunc`。

最后一个参数`false`处理捕获和冒泡。这是事件在整个 DOM 中传播的两种方法。捕获时，事件从 DOM 顶部向内移动。冒泡时，它们从 DOM 内部向外移动。使用`false`您想在其`bubbling`短语中处理此问题的状态。

在事件发生时`myFunct`调用的内部，我们有一行代码首先声明了一个名为 的新对象。这个对象是空的，没有成员。`DOMContentLoaded``document``options`

其次，您将两个参数传递给对象的`attach`方法`PhotoSwipe`。第一种方法是选择器。它在 DOM 中搜索匹配的元素是什么`#Gallery a`，这意味着在 ID 为“Gallery”的元素中的任何锚元素。这将意味着以下所有内容：

```
<div id="Gallery"><a href="#">Foo</a></div> 
```

或者

```
<div id="Gallery">
  <div class="picture">
    <a href="#">Open</a>
  </div>
  <div class="picture">
    <a href="#">Open</a>
  </div>
</div> 
```

这与我们创建的空对象相关联。在这一点上，内部做什么`PhotoSwipe`是未知的，因为这里没有提供该代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:56:31.610

它将这些变量移动到本地范围内以加快查找速度。它还`window.Code.PhotoSwipe`可以作为`PhotoSwipe`.

但是，通常不会将`window`其用作第一个参数，但`this`因为在全局范围内执行时，它保证是浏览器中的全局对象（即`window`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T15:01:40.987

那是一个自动执行的匿名函数。通常它用于为 Javascript 中的变量提供范围，以保持父命名空间不那么混乱（在这种情况下，父命名空间是全局命名空间。）

[http://markdalgleish.com/2011/03/self-executing-anonymous-functions/](http://markdalgleish.com/2011/03/self-executing-anonymous-functions/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:57:52.263

第一行是函数声明。最后一个是使用参数自动调用此函数。这样，函数就被声明、调用和运行在一个步骤中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T14:58:54.160

重新格式化：

```
(function(window, PhotoSwipe){
    document.addEventListener('DOMContentLoaded', function(){
        var options = {},
            instance = PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'),
                                      options );
        }, false);
}(window, window.Code.PhotoSwipe)); 
```

这将创建一个带有两个参数（window 和 PhotoSwipe）的函数，它添加一个事件侦听器 - 第二个（内部）函数 - 然后立即使用值 window 和 window.Code.PhotoSwipe 作为参数调用外部函数。

为什么要这样做？除非您将代码放在函数中，否则 Javascript 不擅长分离范围。所以在示例的主函数内部，PhotoSwipe 只能引用传入的第二个参数。

# android - listview 向下滚动以加载更多视图

> ID：10212089
> 
> 赞同：0
> 
> 时间：2012-04-18T14:54:27.997
> 
> 标签：android, json, web-services, listview

我是android的菜鸟，我已经阅读了很多示例，但到目前为止没有成功，所以基本上我希望我的listview使用baseadapter在我向下滚动时添加更多行，并且添加更多行的机制是再次查询动态 url，现在在实现滚动功能时进行查询，但是适配器生成一个新列表 n 丢弃旧列表，这里是代码

```
public class Second extends Activity {

static final String Li_nk = "LinkName:";
static final String Image_name = "ImageName:";
// ListView list;
public final static String AUTH = "authentication";
static final String KEY_THUMB_URL = "thumb_image";
// JSONObject j2;
String wrd;
int counter = 01;

// ArrayList<HashMap<String,String>> mylist;
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent i2 = getIntent();
    wrd = i2.getStringExtra("entrd");
    Log.v("keyis", wrd);

    final Handler handler = new Handler();
    Runnable runable = new Runnable() {

        @Override
        public void run() {

            // call the function
            LoadData();
            // also call the same runnable
            handler.postDelayed(this, 40000);
        }
    };
    handler.postDelayed(runable, 10);

}

public void LoadData() {

    JSONObject j2 = JSONfunctions
            .getJSONfromURL("/webservice_search.php?keyword=" + wrd
                    + "&format=json&pagenum=" + counter);
    final ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    try {
        JSONArray jray = j2.getJSONArray("listings");
        for (int i = 0; i < jray.length(); i++) {
            Log.v("state", "json data being read");
            JSONObject j3 = jray.getJSONObject(i);
            String first = j3.getString("listing");
            Log.v("sublist", first);
            JSONObject j4 = j3.getJSONObject("listing");
            String sec = j4.getString("links");

            int maxLength = (sec.length() < 30) ? sec.length() : 27;
            sec.substring(0, maxLength);
            String cutsec = sec.substring(0, maxLength);
            Log.v("links are", cutsec);
            String img = j4.getString("image_name");
            Log.v("image name is ", img);
            // Uri
            // dimg=Uri.parse("http://zeesms.info/android_app_images/Koala.jpg");
            HashMap<String, String> map = new HashMap<String, String>();

            map.put("Id", String.valueOf(i));
            map.put(Li_nk, cutsec);
            map.put(Image_name, j4.getString("image_name"));

            map.put(KEY_THUMB_URL, "http://zeesms.info/android_app_images/"
                    + img);

            mylist.add(map);

        }

    } catch (JSONException e) {

        Log.e("loG_tag", "Error parsing" + e.toString());
    }
    final LazyAdapter adapter = new LazyAdapter(this, mylist);
    adapter.notifyDataSetChanged();

    View footerView = ((LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(
            R.layout.footer, null, false);

    ListView list = (ListView) findViewById(R.id.lv1);
    list.setEmptyView(findViewById(R.id.empty));
    list.addFooterView(footerView);
    list.setAdapter(adapter);

    list.setItemsCanFocus(false);

    list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // Toast.makeText(getApplicationContext(),"Click ListItem Number "
            // + position, Toast.LENGTH_LONG).show();
            Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri
                    .parse("http://www.google.com/"));
            startActivity(myIntent);
        }

    });
    list.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub
            // what is the bottom iten that is visible

            int lastInScreen = firstVisibleItem + visibleItemCount;
            if (lastInScreen == totalItemCount) {

                counter++;

                LoadData();
                adapter.notifyDataSetChanged();
            }
        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
        }

    });
} 
```

我的适配器类的代码是

```
public class LazyAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 
//int count=5;

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    Collections.reverse(d);
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    /*position=1;
    position=2;
    position=3;
    position=4;
    position=5;*/
    View vi=convertView;
    if(convertView==null)

        vi = inflater.inflate(R.layout.custom_row_view1, null);

    TextView title = (TextView)vi.findViewById(R.id.linkname); // merchnts name
    TextView artist = (TextView)vi.findViewById(R.id.imagename); // address
    //TextView duration = (TextView)vi.findViewById(R.id); // distance
   ImageView thumb_image=(ImageView)vi.findViewById(R.id.mClogo); // logo

    HashMap<String, String> jsn = new HashMap<String, String>();
    jsn = data.get(position);

    // Setting all values in listview
   title.setText(jsn.get(Second.Li_nk));
   artist.setText(jsn.get(Second.Image_name));
    //duration.setText(song.get(CustomizedListView.KEY_DURATION));
    imageLoader.DisplayImage(jsn.get(Second.KEY_THUMB_URL), thumb_image);
    return vi;
} 
```

现在新列表附加旧列表的最简单方法是什么，或者有没有其他方法可以在滚动后添加更多视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:57:51.297

您可以为列表视图添加 onscrollchange 侦听器，当最后一个位置可见时，将元素添加到其中并相应地增加列表视图的大小。

在lazyadapter中添加一种方法说

```
setData(HashMap<string,string> newdata){
this.data = newdata;
} 
```

每次您点击 web 服务并获取响应附加数据到 newConcretehashmap 并调用上述方法。这样，您将仅在 hashmap 中获得更新的 newData。然后只需调用 notifydatasetchanged(); 并且列表将得到更新。

# ruby-on-rails-3 - Rails 查询中的 PostgreSQL 不起作用

> ID：10212092
> 
> 赞同：1
> 
> 时间：2012-04-18T14:54:35.470
> 
> 标签：ruby-on-rails-3, postgresql, datetime, activerecord

PostgreSQL 新手（一般只有 6 个月的编程经验），遇到以下查询问题：

```
TutoringSession.where("extract (DOW from begin_time)
                     = extract DOW from (?)", Time.now) 
```

给我以下错误消息：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  syntax error at or near "DOW"
LINE 1: ..."  WHERE (extract (DOW from begin_time) = extract DOW from (...
                                                             ^
: SELECT "tutoring_sessions".* FROM "tutoring_sessions"  WHERE (extract (DOW from   begin_time) = extract DOW from ('2012-04-18 14:39:58.202249')) 
```

我浏览了 PostgreSQL 文档。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:58:21.410

^(评论后更新。)
你放错括号了。并添加显式类型转换。

```
TutoringSession.where("extract (DOW from begin_time)
                     = 提取（从时间戳中提取DOW ？）”，Time.now）

```

如果您只想插入当前时间，您可以让 PostgreSQL 为您执行此操作 - 前提是数据库服务器上的时间适合您。[考虑时区。](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)

```
TutoringSession.where("extract (DOW from begin_time)
                     = extract (DOW from now())") 
```

[关于`extract()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT).

# c++ - 统一 const T& 和 T&& 重载

> ID：10212094
> 
> 赞同：6
> 
> 时间：2012-04-18T14:54:54.073
> 
> 标签：c++, templates, rvalue-reference, move-semantics, perfect-forwarding

我有以下两个函数模板重载：

```
template<typename T>
optional<T> some(const T& x)
{
    return optional<T>(x);
}

template<typename T>
typename std::enable_if<std::is_rvalue_reference<T&&>::value, optional<T> >::type
some(T&& x)
{
    return optional<T>(std::move(x));
} 
```

我第一次尝试通过完美转发统一重载失败：

```
template<typename T>
optional<T> some(T&& x)
{
    return optional<T>(std::forward<T>(x));
}

error: forming pointer to reference type 'const std::basic_string<char>&' 
```

就像我的第二次尝试一样：

```
template<typename T>
optional<typename std::remove_reference<T>::type> some(T&& x)
{
    return optional<typename std::remove_reference<T>::type>(std::forward<T>(x));
}

error: no matching function for call to
'std::basic_string<char>::basic_string(gpa::optional<const std::basic_string<char> >)' 
```

有没有一种干净的方法来统一重载，还是我应该忍受它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:11:41.053

我不熟悉你的`optional`，但也许你需要添加：

```
typename remove_const< ... >::type 
```

在你周围的`remove_reference`两个地方。（因为你的 2-overload 解决方案的第一次重载 - 我假设它通过了你的所有测试 -`remove_const`在声明时有效地做了 a `optional<T>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:36:16.713

一般来说，最好的方法是按值获取对象，让*调用者*决定是复制还是移动它：

```
template<typename T>
optional<T> some(T x)
{
    return optional<T>(std::move(x));
} 
```

如果调用者使用临时值调用它或使用`std::move`它们的值，那么它会被移动。否则会被复制。

是的，这确实意味着您将进行一次额外的移动（如果移动与复制相同，则意味着进行两次复制）。如果这对您来说是一个重大的性能问题，那么您将不得不使用两个重载实现。

# ruby-on-rails - 使用批处理脚本在 Windows 上启动多个瘦服务器实例

> ID：10212097
> 
> 赞同：0
> 
> 时间：2012-04-18T14:55:00.627
> 
> 标签：ruby-on-rails, ruby, batch-file, capistrano, thin

我正在编写一个脚本来在 Windows 中自动部署一个 ruby​​ on rails 应用程序。除了瘦集群启动之外，我所有的东西都是自动化的；事实证明，Windows 不支持守护进程，因此在调用 Thin 时我无法使用 -servers 命令。

我之前发布的一个问题：[在 Windows 上启动精简集群](https://stackoverflow.com/questions/10094239/starting-a-thin-cluster-on-windows)

我现在正在寻找一种以编程方式获取三个实例的替代方法。有谁知道我如何能够做到这一点？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:35:32.530

`start`是你的朋友

阅读`help start`并尝试这个

```
start /b thin start 
```

并再次阅读`help start`并使用其他选项

# sql - 为什么我在表#preweighting_data_dma 中得到重复记录？

> ID：10212099
> 
> 赞同：0
> 
> 时间：2012-04-18T14:55:03.920
> 
> 标签：sql, duplicates

```
SELECT respid, cq4_1, dma
INTO #preweighting_data_dma
FROM #preweighting_data a
LEFT OUTER JOIN #us_zip b
ON trim(a.cq4_1) = trim(b.zip_code); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:58:41.617

您得到重复，因为不止一行符合您的条件。

为了防止重复使用 DISTINCT 关键字：

```
SELECT DISTINCT respid, cq4_1, dma
etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:44:44.930

如果您之前没有重复，`preweighting_data`那么唯一的另一个机会是该列`us_zip.zip_code`包含一些重复。

您可以使用以下查询进行检查：

```
select trim(zip_code), count(*) 
from us_zip 
group by trim(zip_code) 
having count(*) > 1 
```

如果您以这种方式检测到重复项，则“LEFT JOIN”会“传播”到您的新表中。

# javascript - jQuery Conditional 基于元素的内部 HTML 内容

> ID：10212102
> 
> 赞同：1
> 
> 时间：2012-04-18T14:55:17.117
> 
> 标签：javascript, jquery, conditional

如果元素的内部 HTML 为 0，我想使用 javascript/jQuery 更改元素的类

我尝试了下面的代码，但似乎没有用。

```
var myElement = jQuery('.thisclass');
for(var i=0; i<myElement.length; i++){
    if(myElement[i].innerHTML == ' 0 '){
         jQuery('.thisclass').toggleClass('.newclass');
    }
} 
```

有人可以指导我吗？我在这里做错了什么？有没有更简单的方法（全部使用 jQuery）

jsfiddle - [http://jsfiddle.net/rm5Sp/](http://jsfiddle.net/rm5Sp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:00:55.273

这应该可以解决问题：

```
$(".thisclass").each(function() {
    if($(this).html() == "0") {
        $(this).removeClass("thisclass");
        $(this).addClass("thatclass");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:58:28.620

也许删除零周围的空格会有所帮助？

```
myElement[i].innerHTML == '0' 
```

另外，请尝试使用此代码，看看警报框是否是您所期望的：

```
var myElement = jQuery('.thisclass');
for(var i=0; i<myElement.length; i++){
    alert( myElement[i].innerHTML );
    if(myElement[i].innerHTML == ' 0 '){
         alert( "Toggling" );
         jQuery('.thisclass').toggleClass('.newclass');
         alert( "Toggled" );
    }
} 
```

第一个框将向您展示 innerHTML 是什么。第二个会告诉你条件是有效的。第三个会告诉你 jQuery 是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:13:11.120

我认为您必须修剪内部 html 内容以删除空的和不需要的尾随空格。

尝试这个：

```
$(".thisclass").each(function() {
    var thisHtml = $(this).html();
    if (thisHtml.trim() == "0") {
        $(".thisclass").toggleClass("newclass");
    }        
}); 
```

[通过示例链接到 jsFiddle](http://jsfiddle.net/nAspp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:12:36.263

最有可能的问题是你的`toggleClass`论点中有一个额外的点。它应该只是`toggleClass("newclass")`。

另一个可能的错误（尽管它不会阻止您的代码执行*某些*操作）是您正在切换*所有*元素上的类，`.thisclass`即使*其中一个*元素具有内容`0`；我不确定这是不是故意的，所以提出来。

最后，您可以用更短的形式编写相同的代码，如下所示：

```
// If you want to toggle class on an element-by-element basis
jQuery('.thisclass').filter(function() { return this.innerHTML == " 0 "; })
                    .toggleClass('.newclass');

// Or if you want to toggle on *all* elements if one matches:
var count = jQuery('.thisclass')
                .filter(function() { return this.innerHTML == " 0 "; })
                .length;
if(count) {
    jQuery('.thisclass').toggleClass('.newclass');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T14:59:20.110

这条线有问题：

```
jQuery('.thisclass').toggleClass('.newclass'); 
```

您需要在此处使用当前元素。此外，当您执行 addClass/removeClass/toggleClass 时，您不需要在类名中使用点（“.”）。会是这样的。

```
myElement[i].toggleClass('newclass'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-18T14:58:45.357

尝试这个：

```
$(".thisClass").each(function(){
    if ($(this).html() == " 0 ") {
        $(this).toggleClass("newClass");
    }
}); 
```

# linux - 分段错误程序集 i386:x86_64

> ID：10212105
> 
> 赞同：0
> 
> 时间：2012-04-18T14:55:31.570
> 
> 标签：linux, assembly, x86-64

我正在研究 i386:x86_64 并且正在编写一个简单的程序来启动一个 shell。贝娄是我的集会。

```
.section .data
.section .text
.globl _start

_start:
    xor %rax, %rax
    mov $70, %al
    xor %rbx, %rbx
    xor %rcx, %rcx
    int $0x80

    jmp ender

starter:
    pop %rbx
    xor %rax, %rax
    mov %al, 0x07(%rbx)
    mov %rbx, 0x08(%rbx)
    mov %rax, 0x0c(%rbx)
    mov $11, %al
    lea 0x08(%rbx), %rcx
    lea 0x0c(%rbx), %rdx
    int $0x80

ender:
    call starter
    .string "/bin/sh" 
```

问题是我不断遇到分段错误。当我使用 objdump -D my_prog 时，输出是这个......

部分.text的反汇编：

```
0000000000400078 <_start>:
  400078:   48 31 c0                xor    %rax,%rax
  40007b:   b0 46                   mov    $0x46,%al
  40007d:   48 31 db                xor    %rbx,%rbx
  400080:   48 31 c9                xor    %rcx,%rcx
  400083:   cd 80                   int    $0x80
  400085:   eb 1b                   jmp    4000a2 <ender>

0000000000400087 <starter>:
  400087:   5b                      pop    %rbx
  400088:   48 31 c0                xor    %rax,%rax
  40008b:   88 43 07                mov    %al,0x7(%rbx)
  40008e:   48 89 5b 08             mov    %rbx,0x8(%rbx)
  400092:   48 89 43 0c             mov    %rax,0xc(%rbx)
  400096:   b0 0b                   mov    $0xb,%al
  400098:   48 8d 4b 08             lea    0x8(%rbx),%rcx
  40009c:   48 8d 53 0c             lea    0xc(%rbx),%rdx
  4000a0:   cd 80                   int    $0x80

00000000004000a2 <ender>:
  4000a2:   e8 e0 ff ff ff          callq  400087 <starter>
  4000a7:   2f                      (bad)  
  4000a8:   62                      (bad)  
  4000a9:   69                      .byte 0x69
  4000aa:   6e                      outsb  %ds:(%rsi),(%dx)
  4000ab:   2f                      (bad)  
  4000ac:   73 68                   jae    400116 <ender+0x74> 
```

我会猜测并说是标记（坏）的地址导致了段错误。我知道这种情况正在发生，因为它希望 mem 访问未分配给它的 mem。我不确定我应该做什么。我正在运行 Linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:45:09.173

这是段错误，因为您试图将数据写入内存的代码（.text）区域。可执行代码区域几乎总是被标记为只读的。

这是您的代码以及一些附加注释。

```
.section .data
.section .text
.globl _start

_start:
    xor %rax, %rax
    mov $70, %al
    xor %rbx, %rbx
    xor %rcx, %rcx
    ; call sys_setreuid(0,0)
    int $0x80

    jmp ender

starter:
    ; take the return address off the stack
    ; rbx will point to the /bin/sh string after the call instruction
    pop %rbx
    ; zero rax
    xor %rax, %rax
    ; save a zero byte to the end of the /bin/sh string (it's 7 characters long)...
    ; (it will segfault here because you're writing to a read-only area)
    mov %al, 0x07(%rbx)
    ; ...followed by a pointer to the string... 
    mov %rbx, 0x08(%rbx)
    ; ...followed by another zero value 
    mov %rax, 0x0c(%rbx)
    ; setup the parameters for a sys_execve call
    mov $11, %al
    lea 0x08(%rbx), %rcx
    lea 0x0c(%rbx), %rdx
    int $0x80

    ; what happens when int 0x80 returns? 
    ; you should do something here or starter will be called again

ender:
    call starter
    .string "/bin/sh" 
```

代码还有其他问题。考虑：

```
mov %rbx, 0x08(%rbx)
mov %rax, 0x0c(%rbx) 
```

%rbx 是一个 8 字节的值，但代码只给它 4 字节的空间（0x0c-0x08 = 4）。如果你想让它工作，你需要将字符串移动到一个 .data 区域（后面有一些额外的空间）并更改代码以使其对 64 位友好。

# r - 在 R 中创建多列数据的分组条形图

> ID：10212106
> 
> 赞同：14
> 
> 时间：2012-04-18T14:55:33.503
> 
> 标签：r, ggplot2

我有以下数据

```
 Input Rtime Rcost Rsolutions  Btime Bcost 
1   12 proc.     1    36     614425     40    36 
2   15 proc.     1    51     534037     50    51 
3    18-proc     5    62    1843820     66    66 
4    20-proc     4    68    1645581 104400    73 
5 20-proc(l)     4    64    1658509  14400    65 
6    21-proc    10    78    3923623 453600    82 
```

我想根据这些数据创建一个分组条形图，其中 x 轴包含`Input`字段（作为组），y 轴表示 Rtime 和 Btime 字段（两个条形）的对数刻度。

我在网上查看的所有解决方案/示例都将类似的数据放入三列布局中。我不知道如何使用我必须生成分组条形图的数据。或者，如果有办法将此数据（手动转换不是一种选择，因为它是一个包含很多行的巨大文件）转换为**R**和**ggplot**兼容的数据格式。

**编辑 ：**

使用 gncs 解决方案生成的图形

![在此处输入图像描述](../Images/000bea4bcb43a6bd7ff6aa88db4f6699.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-18T16:42:04.083

根据要求，一个也使用**reshape2的****ggplot2**解决方案：

 **```
library(reshape2)

df <- read.table(text = "       Input Rtime Rcost Rsolutions  Btime Bcost 
1   12-proc.     1    36     614425     40    36 
2   15-proc.     1    51     534037     50    51 
3    18-proc     5    62    1843820     66    66 
4    20-proc     4    68    1645581 104400    73 
5 20-proc(l)     4    64    1658509  14400    65 
6    21-proc    10    78    3923623 453600    82",header = TRUE,sep = "")

dfm <- melt(df[,c('Input','Rtime','Btime')],id.vars = 1)

ggplot(dfm,aes(x = Input,y = value)) + 
    geom_bar(aes(fill = variable),stat = "identity",position = "dodge") + 
    scale_y_log10() 
```

![在此处输入图像描述](../Images/48818367b14249f0e5f9bc2b7ff94ab8.png)

`log(1) = 0`请注意此处的样式差异，因为**ggplot2**将其视为零高度的条形图并且不绘制任何内容，而`barplot`绘制了一个小存根（我认为这有点误导）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T15:37:06.440

我想我理解这个问题，这就是我的建议（短期 - 选项）：

```
data <- read.table("data.txt", header=TRUE)
subset <- t(data.frame(data$Rtime, data$Btime))
barplot(subset, legend = c("Rtime", "Btime"), names.arg=data$Input, log="y", beside=TRUE) 
```

那是你要的吗？它有点脏，但它可以完成工作。

*更新：代码更正。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-01-27T16:35:25.007

根据要求，`ggplot2`解决方案还使用`pivot_longer()` [https://tidyr.tidyverse.org/reference/pivot_longer.html](https://tidyr.tidyverse.org/reference/pivot_longer.html)将数据转换为`geom_bar()`可以轻松绘制的格式。

```
library(dplyr)
library(ggplot2)

df <- read.table(text = "       Input Rtime Rcost Rsolutions  Btime Bcost 
1   12-proc.     1    36     614425     40    36 
2   15-proc.     1    51     534037     50    51 
3    18-proc     5    62    1843820     66    66 
4    20-proc     4    68    1645581 104400    73 
5 20-proc(l)     4    64    1658509  14400    65 
6    21-proc    10    78    3923623 453600    82", 
header = TRUE,sep = "")

dfm <- pivot_longer(df, -Input, names_to="variable", values_to="value")
## pivot_longer takes the input data frame, excludes the Input field from the transformation, turns the remaining column names into the variable "variable" (often called the "key"), and assigns the values to the variable "value". 

ggplot(dfm,aes(x = Input,y = value)) + 
    geom_bar(aes(fill = variable),stat = "identity",position = "dodge") + 
    scale_y_log10() 
```

[![在此处输入图像描述](../Images/90527560e07662bf1db5aab2a0b810be.png)](https://i.stack.imgur.com/UaRxh.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-14T18:32:09.213

joran 的回答对我帮助很大，但我不得不在 ggplot 语句中使用*stat="identity"*，如下所示：

```
ggplot(dfm, aes(x = Input,y = value)) + 
geom_bar(aes(fill = variable), position = "dodge", stat="identity") + 
scale_y_log10() 
```

我的 R 版本是 3.2.2 和 ggplot2 版本 1.0.1

谢谢。**

# wpf - RadGridView 删除事件 WPF

> ID：10212108
> 
> 赞同：2
> 
> 时间：2012-04-18T14:55:47.030
> 
> 标签：wpf, telerik

是否有一些属性可以修改 RadGridView 中触发删除和删除事件的键的行为。

这可能是一个错误，但我的网格突然停止触发此事件。几天前我开发它时它曾经工作过。现在，我在它停止工作的屏幕上添加了更多事件和功能。我的一位同事对他的一个屏幕也有同样的问题。

是我一个人，还是这个组件几乎充满了错误。他们也会因我所做的每次更新而中断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:38:07.410

如果您在网格上将**CanUserDeleteRows**设置为 false，用户将无法再删除行。

网格上还有**删除**事件，您可以在其中取消挂起的删除请求。

此外，如果您使用**PreviewKeyDown**事件并为删除键网格设置 e.Handled = true 将不会删除行。

# android - xml 和 extras 中使用的 AdMob 属性列表

> ID：10212111
> 
> 赞同：0
> 
> 时间：2012-04-18T14:55:59.737
> 
> 标签：android, admob, adview

**通过网络搜索并没有给我提供在 xml 中设置AdMob**时可能使用的属性的引用，也没有给我`AdView`作为`AdRequest.extras`.

[关于AdView in XML](https://developers.google.com/mobile-ads-sdk/docs/android/banner_xml)的官方文档仅给出了以下示例：

```
<com.google.ads.AdView android:id="@+id/adView"
                       android:layout_width="wrap_content"
                       android:layout_height="wrap_content"

                       ads:adUnitId="MY_AD_UNIT_ID"
                       ads:adSize="BANNER"
                       ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
                       ads:loadAdOnCreate="true"/> 
```

虽然[附加指南](https://developers.google.com/mobile-ads-sdk/docs/bestpractices#adcolors)仅指定以下值：

```
color_bg        Background color
color_bg_top    Gradient background color at top
color_border    Border color
color_link      Link text color
color_text      Text color
color_url       URL color 
```

那么，这些值是定制（不考虑`Targeting`）`AdView`的唯一可能方法`AdRequest`吗？或者是否有任何未提及的值/属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:05:59.563

AdView 也有一个`ads:keywords`属性，它接受以逗号分隔的关键字列表。AdMob 根本不使用这些关键字 - 如果您启用了它，它只会将它们传递给 AdSense 回填。

我不知道 AdMob 本身使用的任何其他附加功能。对于将 DFP 广告管理系统与 AdMob 结合使用的用户，您可以使用附加功能来自定义广告资源定位。

# objective-c - objc_getProtocol() 为“NSApplicationDelegate”返回 NULL？

> ID：10212119
> 
> 赞同：5
> 
> 时间：2012-04-18T14:56:26.383
> 
> 标签：objective-c, cocoa, protocols, objective-c-runtime, nsapplication

我正在尝试使用该`objc_getProtocol()`函数来获取对表示`NSApplicationDelegate`协议的结构的引用：

```
Protocol *protocol = objc_getProtocol("NSApplicationDelegate"); 
```

但是，由于某种原因，这总是返回`NULL`。

其他协议，如`NSObject`、`NSCoding`、`NSTableViewDelegate`和`NSTableViewDataSource`工作正常。

有什么特别之处`NSApplicationDelegate`，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:03:33.207

在 Apple 文档中找到了答案：

[http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15)

编译器为它遇到的每个协议声明创建一个协议对象，但前提是协议也是：

*   被一个班级收养，
*   或在源代码中的某处引用（使用@protocol()）

# crud - 如何在代理上使用 api 属性

> ID：10212122
> 
> 赞同：0
> 
> 时间：2012-04-18T14:56:39.147
> 
> 标签：crud, sencha-touch-2

我想知道如何在ST2中使用代理的api属性

现在，我的代理配置中有这个：

```
api: {
    create  : App.urls.create_object,
    read    : App.urls.load_object,
    update  : App.urls.update_object,
    destroy : App.urls.destroy_object
} 
```

但是，我不知道如何使用它。例如，当我想创建一个新对象时，我使用以下参数创建了一个 Ext.Ajax.request：

```
url: App.urls.create_object,
params: {
    'object': object
}, 
```

但是现在，我怎么能对 api 属性做同样的事情呢？

你能帮忙吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:45:37.827

假设您有这样的模型：

```
Ext.define('User', {
    fields: ['name', 'email'],
    proxy: {
        type: 'ajax',
        api: {
            create: 'my_create_url',
            read: 'my_read_url',
            update: 'my_update_url',
            destroy: 'my_destroy_url'
        }
    }
}); 
```

**创造**

```
var user = Ext.create('User', {name: 'Ed Spencer', email: 'ed@sencha.com'});

user.save(); // will POST to the create url 
```

**更新**

```
var user = Ext.create('User', {name: 'Ed Spencer', email: 'ed@sencha.com'});
user.save({
    success: function(user) {
        user.set('name', 'Robert Dougan');

        user.save(); // will PUT update URL
    }
}); 
```

**读**

使用商店：

```
var store = Ext.create('Ext.data.Store', {
    model: 'User'
});

store.load(); // will GET to read URL 
```

使用模型：

```
// will GET the read URL with the specified ID.
User.load(12, {
    success: function(user) {
        console.log(user);
    }
}); 
```

**破坏**

```
var user = Ext.create('User', {name: 'Ed Spencer', email: 'ed@sencha.com'});
user.save({
    success: function(user) {
        user.destroy(); // will DELETE destroy URL
    }
}); 
```

Sencha Docs 中有关 Rest 代理的更多信息：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Rest](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Rest)

**同步**

您还可以使用存储同步方法批量创建/更新/销毁存储中的所有记录。

```
var store = Ext.create('Ext.data.Store', {
    model: 'User'
});

store.add({ name: 'Robert Dougan', email: 'rob@sencha.com' });

store.sync(); // will batch update all the needed records 
```

# actionscript-3 - 确定音频何时可以播放

> ID：10212125
> 
> 赞同：0
> 
> 时间：2012-04-18T14:57:04.247
> 
> 标签：actionscript-3, flash, actionscript

我目前正在逐步播放音频文件，如下所示：

```
import flash.media.Sound;
import flash.media.SoundLoaderContext;
import flash.net.URLRequest;

var s:Sound = new Sound();
var context:SoundLoaderContext = new SoundLoaderContext(5000, false);

s.load(new URLRequest('AUDIO URL'), context);
s.play(); 
```

这很好用，但我想知道它什么时候有足够的数据（基于缓冲时间）并开始播放文件。澄清一下，我不是要确定文件何时完全下载，我知道已经完成`Event.COMPLETE`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:27:37.133

使用[ProgressEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/ProgressEvent.html)怎么样？

```
s.addEventListener(ProgressEvent.PROGRESS, progressHandler);

function progressHandler(event:ProgressEvent):void {

    trace( event.bytesLoaded );
} 
```

因此，当加载的字节数等于缓冲区数量时，您就知道了。

* * *

编辑：

也许您可以检查[isBuffering](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#isBuffering)属性以查看缓冲区是否已填充。

# javascript - 如何检查我的 asp.net 网站的实时访问者数量？

> ID：10212130
> 
> 赞同：-2
> 
> 时间：2012-04-18T14:57:21.163
> 
> 标签：javascript, asp.net, ajax, statistics

如何检查我的 asp.net 网站的当前访问者数量？我已经熟悉以下技术，但它并不接近准确的结果。

*   创建应用程序变量 Application["UserCount"]
*   在会话开始时增加它
*   在会话结束时减少它

此技术不会检查请求是否来自网络爬虫、机器人或任何其他垃圾邮件服务器，这些服务器可能会在新会话中请求多个页面，从而使数量膨胀。

我想确保一个人打开了浏览器（移动或桌面）来查看我的网站，即使他正在同一窗口或不同窗口中查看其他网站，但至少我的网站至少在一个或一个选项卡中打开窗户。

像 ajax 隐藏请求生成器这样的东西会加载我的每个页面并告诉服务器我的站点是打开的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:50:36.403

您可以查看请求中的用户代理。您可以使用它`Request.Browser.Crawler`来检查请求是否来自搜索引擎爬虫。如果浏览器是爬虫，它将返回 true。

您还可以使用对页面的 javascript 调用来更新访问者数量。这可以与上述技术相结合，以确保仅当请求是真实用户时才更新访问者计数。当您减少用户数量时，您还应该检查请求不是爬虫。例如

```
 //increase the user count
        if (Request.Browser.Crawler == false)
        {
            Application["user_count"] = +1;
        }

        //decrease the user count
        if (Request.Browser.Crawler == false)
        {
            Application["user_count"] = -1;
        } 
```

您还可以使用应用程序的 global.asax 文件中的 Session_End 和 Session_Start 事件来执行相同的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:28:49.910

您可以使用应用程序来存储数据。对于网站或 Web 应用程序的早期阶段来说，这完全没问题。但是，您可能需要在加载站点时查看应用程序状态的多重访问问题。

# c# - 将 JavaScript 值分配给 C# 变量

> ID：10212131
> 
> 赞同：2
> 
> 时间：2012-04-18T14:57:22.300
> 
> 标签：c#, asp.net

我有一个下拉变量的Javascript函数，如下所示：

```
 function OnClientCloseSecure(oWnd, args) {
       var arg = args.get_argument();

       if (arg) {
           var ResultCode = arg.ResultCode;
           var PONumber = arg.PONumber;
       }
   } 
```

我需要将 ResultCode 和 PONumber 分配给 C# 中的变量，或者如果这不可能在 c# 中使用标签。

这些选项中的任何一个都可能吗？如果是这样，我将如何去做？我已经尝试了几件事，但没有运气。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:59:22.543

一种方法是创建隐藏值并将 runat 属性设置为 server。你可以获得价值。

```
 <script type="text/javascript">
   function abc() 
    { 
      var str="value"; 
      document.getElementById("Hidden1").value=str; 
    } 

    </script> 

<input id="Hidden1" type="hidden" runat="server" /> 
```

代码背后：

```
 string value = Hidden1.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:12:53.060

## JavaScript

```
<script type="text/javascript">
    function OnClientCloseSecure(oWnd, args) {
        var arg = args.get_argument();
        if (arg) {
            var ResultCode = arg.ResultCode;
            var PONumber = arg.PONumber;
            document.getElementById('<%=lbl.ClientID %>').innerHTML = ResultCode;
        }
    }

</script> 
```

## 标记

```
<asp:Label ID="lbl" runat="server" ></asp:Label> 
```

# android - 如何用多个标签打开安卓浏览器？

> ID：10212135
> 
> 赞同：0
> 
> 时间：2012-04-18T14:57:30.413
> 
> 标签：android, browser, android-activity, android-intent

我试图在默认的 android 浏览器的不同选项卡中打开多个链接。

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url1));
startActivity(browserIntent);

browserIntent.setData(Uri.parse(url2));
startActivity(browserIntent); 
```

上面的代码使用一个选项卡打开浏览器，并在调用每个选项卡后重新加载它`startActivity(browserIntent)`。是否有可能为每个网址打开新标签以及如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:03:13.740

> 是否有可能为每个网址打开新标签以及如何实现？

不。

对于初学者来说，用户的默认浏览器甚至可能没有*标签*。即使设备碰巧预装了选项卡式浏览器，也欢迎用户下载碰巧没有选项卡的第三方浏览器应用程序，并将其设为默认浏览器。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-30T23:20:06.123

安卓浏览器确实有标签。当您的手机正在加载网页时，按下链接旁边的按钮，您的加载或一直向上滚动到您已经打开的页面并按下它。它将打开另一个选项卡窗口。

# c# - MVC3 验证问题

> ID：10212136
> 
> 赞同：1
> 
> 时间：2012-04-18T14:57:36.560
> 
> 标签：c#, asp.net-mvc-3, validation

我有以下视图，无法验证 Title 和 NewsContent。标题验证有效，但 NewsContent 无效。我该如何解决。

```
@model Foo.NewsViewModel
@{
    ViewBag.Title = "Create";
}

@using (Html.BeginForm("Create", "News", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        <fieldset>
            <legend>Category Information</legend>
            <div class="editor-label">
                @Html.LabelFor(m => m.News.Title)
            </div>

            <div class="editor-field">
                @Html.TextBoxFor(m => m.News.Title)
                @Html.ValidationMessageFor(m => m.News.Title)
            </div>
               <div class="editor-label">
                @Html.LabelFor(m => m.News.NewsContent)
            </div>

            <div class="editor-field" id="container">
                @Html.TextAreaFor(m => m.News.NewsContent)
                @Html.ValidationMessageFor(m => m.News.NewsContent)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.News.Thumbnail)
            </div>

            <div class="editor-field">
                <input type="file" name="files" id="thumbnail" />
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.News.Image)
            </div>

            <div class="editor-field">
                <input type="file" name="files" id="original" />
            </div>

            <div class="editor-label">
                @Html.Label("SelectedCategoryId")
            </div>

            <div class="editor-field">
                @Html.DropDownListFor(m => m.SelectedCategoryId, Model.Categories)
            </div>

            <div class="editor-label">
                Publish
            </div>

            <div class="editor-field">
                @Html.CheckBoxFor(m => m.News.Published, new { @checked = "checked" })
            </div>

            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset>
    </div>
} 
```

这是模型|：

```
 public class News : IStorable
    {
        [Required]
        [Display(Name = "Title")]
        public virtual string Title { get; set; }

        [Required]
        [Display(Name = "Content")]
        public virtual string NewsContent { set; get; }
...... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:35:44.560

问题：标题验证有效，但 NewsContent 无效。

验证不起作用，因为使用 Html.TextAreaFor() 助手来呈现“NewsContent”属性，

这是使其工作的代码：

将您的模型更改为：

使用 [DataType] 属性装饰“NewsContent”属性并将数据类型设置为“MultilineText”。这将表明该属性的编辑器应该是多行文本输入。

```
public class News : IStorable
{
    [Required]
    [Display(Name = "Title")]
    public virtual string Title { get; set; }

    [Required()]
    [Display(Name = "Content")]
    [DataType(DataType.MultilineText)]
    public virtual string NewsContent { set; get; }
    //....
} 
```

在视图中，使用 Html.EditorFor() 助手而不是 Html.TextAreaFor() 作为“News.NewsContent”属性。

```
//....
<div class="editor-label">
    @Html.LabelFor(m => m.News.NewsContent)
</div>

<div class="editor-field" id="container">

    @*@Html.TextAreaFor(m => m.News.NewsContent)*@

    @Html.EditorFor(m => m.News.NewsContent)
    @Html.ValidationMessageFor(m => m.News.NewsContent)
</div>
//.... 
```

# ruby-on-rails - Rails 路由，创建新会话时重定向到错误的 url

> ID：10212140
> 
> 赞同：0
> 
> 时间：2012-04-18T14:57:47.833
> 
> 标签：ruby-on-rails, session

我正在尝试创建一个简单的登录表单，用户应该可以在其中登录。我希望它重定向到用户显示操作，但它重定向到`.../sessions`，我希望它重定向到`.../users/1\. 我有一个看起来像这样的会话控制器（我一直在关注 Rails 教程）

```
def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
      sign_in user
      redirect_to user
    else 
      render 'new'
    end
  end 
```

我试图改变`redirect_to user`，`redirect_to users_path(user)`但它不起作用。

我的路线如下所示：

```
 root :to => 'pages#home'

  resources :users
  resources :sessions, only: [:new, :create, :destroy]

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete 
```

session/sessions.new.html.erb 看起来像这样：

```
<%= form_tag sessions_path do %>
  <%= text_field_tag :email, params[:email], :placeholder => "E-post" %>
  <%= password_field_tag :password, nil, :placeholder => "Lösenord" %>
  <%= submit_tag "Logga in" %>
<% end %> 
```

我的rails技能有点生疏，所以它可能是基本的东西。

**更新**

我设法通过在我的会话控制器中创建一个索引操作来“解决”它，该操作在被调用时重定向到正确的路径。我不知道（或认为）这是最好的方法。最初的问题是，当用户登录时，由于某种原因它被重定向到`/sessions`，而不是我想要的根路径。当用户更新浏览器时，应用程序崩溃（因为我的会话控制器中没有索引操作）。我不知道为什么它没有重定向到正确的路径，我也尝试了 redirect_to user_path(user)，但结果相同。有关如何以“正确”方式解决它的任何提示，都会很棒！当用户注册时我也遇到了同样的问题，它重定向到`/users`而不是`/`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:04:20.810

检查哪些 rake 路由返回给您，您应该在那里找到用户页面的路由。你应该使用类似的东西

```
redirect_to user_path(user) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:07:58.533

听起来您的操作正在落入 else 条件，因此执行渲染 :action=>"new" 而不是您正在寻找的重定向。在渲染操作的情况下，url 将显示类似于您描述的“.../sessions”的内容，因为表单可能（并且正确地）对该 url 执行 POST 但失败并且正在重新渲染而不重定向.

换句话说，我认为您的 user.authenticate(...) 可能失败或由于某种原因返回 nil 或 false。

**更新：**

由于您使用的是 jquerymobile，因此您重定向到的页面正在 AJAX 中。[文档](http://jquerymobile.com/test/docs/pages/page-links.html)（请参阅重定向和链接到目录部分）说您可以在具有 data-role 的 div 上使用 data-url 属性页面来控制 url。因此，对于您的示例，将 app/pages/home 中的内容包装在“页面角色”div 标签中，并为您想要的任何内容设置 data-url ...例如：

```
<div data-role="page" data-url="/home">
<% if signed_in? %>
  <%= render "signed_in"%>
<% else %>
  <%= render "home_page" %>
<% end %>
</div> 
```

# .net - .NET 方法未找到错误

> ID：10212141
> 
> 赞同：1
> 
> 时间：2012-04-18T14:57:48.380
> 
> 标签：.net, vb.net, dll, assemblies, methodnotfound

当我启动我的应用程序时，我收到以下错误：

```
method not found microsoft.visualbasic.msgboxresult 
```

有谁知道这是什么原因？我已尝试修复我的 .NET 安装。

注意：此错误仅发生在一台机器上。在每台其他机器上，它都运行良好，这让我认为 .NET 程序集的某些内容已损坏。几天前，它在损坏的机器上运行良好。

错误消息证明：

![错误信息](../Images/2737da771dd0e6fb9e815f0f5bf67d41.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:24:44.470

您的 .NET 安装中很可能存在损坏的程序集。我以前也解决过类似的问题，我希望我能分享一些见解来帮助你相对快速地解决这个问题，因为它非常烦人。

1.  在此处使用[此工具](http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx)来验证您的 .NET 2.0 安装。请注意，这可用于验证*任何*版本的 .NET Framework。

2.  无论是否发现错误，我都会尝试修复 .NET 2.0。如果你的问题消失了，很好。但是，如果这不起作用，我会尝试卸载它然后重新安装它。

    *   现在，如果您使用的是 Vista 或更高版本，您实际上可能无法通过控制面板 -> 程序和设置将其删除。如果是这种情况，以下步骤可能也不起作用。您*可能*需要修复您的操作系统安装。
3.  如果您已完成上述步骤，但*仍然*无法正常工作，或者第 2 步失败（安装损坏时可能发生），那么您需要尝试使用[.NET Framework Cleanup Tool](http://blogs.msdn.com/b/astebner/archive/2008/08/28/8904493.aspx)。

    *   **仔细阅读博客并确保您了解与此工具相关的风险/注意事项**
    *   如果您删除 .NET 2.0，您可能必须重新安装其他版本的 .NET 框架。这就是我最后列出这一步的原因。

上次我处理这种问题时，唯一对我有用的是第 3 步。希望你比我有更好的运气。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T16:07:12.257

看起来 .NET 安装已损坏。尝试重新安装 .NET Framework。使用 Microsoft 网站上的 .NET。众所周知，某些版本的 AutoCAD 已随 .NET 的修改版本一起发布。

# actionscript - 在 Box2D 中 body.GetPosition,body.GetWorldCenter 代表什么？

> ID：10212146
> 
> 赞同：2
> 
> 时间：2012-04-18T14:58:03.550
> 
> 标签：actionscript, box2d

最近我有一个使用 Box2D 作为物理引擎的新项目。而且我在身体的位置上遇到了一些麻烦。

我想在精灵上绘制图像，所以我只是`body.GetPosition`用作图像的位置。但我发现`body.GetPosition`返回的值与 相同`body.GetWorldCenter`，我只是想知道我做错了什么。

我`box2d flash 2.1a`在我的项目中使用。我目前用半宽和半高减去这个位置来走动。另外，您能否告诉我是否有某种方法可以解决我的问题或在 Box2D 中的正确位置绘制图像。

谢谢你。

# 更新

很抱歉在阅读手册之前发布。
在 RTM 之后，我得到那个身体有两个点，第一个是**原点**，第二个是**质心**，所以一个规则形状的世界中心总是和它的原点相同。抱歉发帖是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:31:47.017

您是否在正文的用户数据中设置了图像？您获得了身体的位置，但您需要有一个运行每个世界刻度的函数，该函数可以将图像位置设置为新位置。Box2d 只是定义模拟的数字。这些数字会不断更新，因此每次出现游戏滴答时都需要设置图像位置。希望这可以帮助

# event-handling - JavaFX 2 XYChart.Series 和 setOnMouseEntered

> ID：10212147
> 
> 赞同：3
> 
> 时间：2012-04-18T14:58:03.557
> 
> 标签：event-handling, javafx

是否可以设置 XYChart.Series 的实例以作用于 setOnMouseEntered？在我看来，使其工作的一个先决条件是实现 EventTarget 接口。至于JavaFX XYChart.Series，当光标触及黄线（XYChart.Series 的实例）时，我想突出显示以下数据系列：http:
[//docs.oracle.com/javafx/2.0/charts/img/line-series .png](http://docs.oracle.com/javafx/2.0/charts/img/line-series.png)
更准确地说，我想执行以下操作，但例如 XYChart.Series 而不是 Button：

```
public class Temp {
    /*code removed*/
    Button btn = new Button("Button to touch");
    btn.setOnMouseEntered(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent e) {
            System.out.println("Cursor just touched the button!");
        }
    });
    /*code removed*/
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T20:35:10.930

[查找](http://docs.oracle.com/javafx/2.0/api/javafx/scene/Node.html#lookup%28java.lang.String%29)适当的节点并将所需的事件处理程序添加到它们。

这是一个例子。

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.*;
import javafx.scene.chart.*;
import javafx.scene.effect.Glow;
import javafx.scene.input.MouseEvent;
import javafx.scene.shape.Path;
import javafx.stage.Stage;

public class LineChartSample extends Application {
  @Override public void start(Stage stage) {
    //create the chart
    final NumberAxis xAxis = new NumberAxis();
    final NumberAxis yAxis = new NumberAxis();
    xAxis.setLabel("Number of Month");
    final LineChart<Number, Number> lineChart = new LineChart<>(xAxis, yAxis);
    lineChart.setTitle("Stock Monitoring, 2010");
    XYChart.Series series = new XYChart.Series();
    series.setName("My portfolio");
    series.getData().addAll(new XYChart.Data(1, 23),new XYChart.Data(2, 14),new XYChart.Data(3, 15),new XYChart.Data(4, 24),new XYChart.Data(5, 34),new XYChart.Data(6, 36),new XYChart.Data(7, 22),new XYChart.Data(8, 45),new XYChart.Data(9, 43),new XYChart.Data(10, 17),new XYChart.Data(11, 29),new XYChart.Data(12, 25));
    lineChart.getData().add(series);

    // show the scene.
    Scene scene = new Scene(lineChart, 800, 600);
    stage.setScene(scene);
    stage.show();

    // make the first series in the chart glow when you mouse over it.
    Node n = lineChart.lookup(".chart-series-line.series0");
    if (n != null && n instanceof Path) {
      final Path path = (Path) n;
      final Glow glow = new Glow(.8);
      path.setEffect(null);
      path.setOnMouseEntered(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent e) {
          path.setEffect(glow);
        }
      });
      path.setOnMouseExited(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent e) {
          path.setEffect(null);
        }
      });
    }
  }
  public static void main(String[] args) { launch(args); }
} 
```

# html - 100% 网页的空白空间

> ID：10212149
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:58:06.037
> 
> 标签：html, css, width

今天有人注意到我的网页在较小的屏幕上右侧有一个空白区域。我正在努力寻找问题，但我还没有找到它。

![在此处输入图像描述](../Images/ba1b00b864e4f713dfde2f760a8becea.png)

如您所见，我的网站旁边有一个灰色的空白区域。宽度设置为 100%，最小宽度设置为 1020px。

在更大的屏幕上，问题会自行解决，并且网站的正确宽度为 100%。

有人记得这个问题，或者知道如何解决吗？

**[可在http://tinyurl.com/c2ohcpu](http://tinyurl.com/c2ohcpu)上查看的网站**

**CSS 代码**

```
html,body {
    margin:0px;
    width: 100%;
    min-width:1020px;
    background-color: #eaeeef;
    padding: 0px;
    font-family: Arial;
    font-size: 12px;
    color: #7f8386;
}
img {
    border: 0;
}
#f-container {
    width: 100%;
    height: auto;
}
#h-container {
    width: 100%;
}
#container {
    width: 1020px;
    height: auto;
    margin: 0 auto;
    padding-top: 10px;
    margin-top: -1px;
    background-image: url('../images/container_bg.png');
    background-repeat: repeat-y;
    border: 1px solid #d4d6d7;
    margin-bottom: 10px;

}
#header {
    width: 100%;
    height: 59px;
    background-image: url('../images/header-repeat.png');
    background-repeat: repeat-x;
    min-width: 1020px;
    z-index: 10000;
    float: left;
}
#header #h-container {
    width: 1020px;
    height: 59px;
    margin: 0 auto;
}
#header #logo-container {
    width: 414px;
    height: 40px;
    margin-left: 10px;
    border: 0;
    float: left;
}
#header h1 {
    margin:0;
    padding:0;
}
#header #logo-container #logo {
    width: 414px;
    height: 40px;
}
#header #topMenu {
    width: 580px;
    height: 50px;
    margin-right: 10px;
    float: right;
}
#header #topMenu ul.menu {
    height: 50px;
    margin: 0;
    padding: 0;
    float: right;
}
#header #topMenu ul.menu li {
    list-style-type: none;
    float: left;
    padding-left: 10px;
    padding-right: 10px;
    height: 50px;
}
#header #topMenu ul.menu li:hover, #header #topMenu ul.menu li.current {
    background-image: url('../images/menu_active.png');
    background-repeat: no-repeat;
    background-position: center;
}
#header #topMenu ul.menu li a {
    text-decoration: none;
    display: block;
    height: 50px;

}
/* Home */
#header #topMenu ul.menu .item-102 a {
    background-image: url('../images/menu/home.png');
    width: 58px;
}
/* Nieuws */
#header #topMenu ul.menu .item-103 a {
    background-image: url('../images/menu/nieuws.png');
    width: 71px;
}
/* Diensten */
#header #topMenu ul.menu .item-104 a {
    background-image: url('../images/menu/diensten.png');
    width: 80px;
}
/* Portfolio */
#header #topMenu ul.menu .item-105 a {
    background-image: url('../images/menu/portfolio.png');
    width: 81px;
}
/* Contact */
#header #topMenu ul.menu .item-106 a {
    background-image: url('../images/menu/contact.png');
    width: 75px;
}
/* Hosting */
#header #topMenu ul.menu .item-115 a {
    background-image: url('../images/menu/hosting.png');
    width: 72px;
}

#content-left {
    width: 750px;
    height: auto;
    float: left;
    padding: 10px;
}
 p {
    padding: 0px;
    margin: 0px;
}
#content-left h2.title {
   color: #33393e;
    font-size: 13pt;
    width: 100%;
}
#content-left h2 a {
    display: block;
    color: #33393e;
    text-decoration: none;
    font-size: 13pt;
}
#content-left ul.actions{
    display: none;
}
#content-left .item-block {
    width: 100%;
    height: auto;
    border-bottom: 1px dashed #d4d6d7;
    padding-bottom: 20px;
}

#content-left .item-block .published {
    width: 745px;
    background: #CCEBF5;
    color: black;
    padding-top: 3px;
    padding-left: 5px;
    height: 17px;
    margin-bottom: 5px;
}

#content-right {
    width: 230px;
    height: auto;
    float: right;
    padding: 10px;
}
#content-right h2.title {
    color: #33393e;
        font-size: 13pt;
        width: 100%;
    }
    #content-right h2 a {
        display: block;
        color: #33393e;
        text-decoration: none;
        font-size: 13pt;
}
h2 a:hover {
    font-weight: bold;
    cursor: pointer;
}
#footer {
    width: 100%;
    text-align: center;
    margin-top: 5px;
    height: auto;
}
#content-right .item-block {
    width: 100%;
    height: auto;
    border-bottom: 1px dashed #d4d6d7;
    padding-bottom: 20px;
}

a {
    color: #0099cc;
    text-decoration: none;
    font-weight: bold;
}
a:hover {
    font-weight: normal;
}   

.portfolio-image {
    margin: 0 auto;
    width: 700px;
    height: auto;
    display: block;
} 
```

**代码**

```
<?xml version="1.0" encoding="utf-8?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="nl-nl" lang="nl-nl" dir="ltr" >
    <head>
        <link rel="stylesheet" href="/templates/hiddenhidden/css/template.css" />
        <link href="/templates/hiddenhidden/css/uni-form.css" rel="stylesheet" type="text/css" />
        <link href="/templates/hiddenhidden/css/default.uni-form.css" rel="stylesheet" type="text/css" />
        <link href="/templates/hiddenhidden/jqueryui/css/pepper-grinder/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css" />
        <link href="/templates/hiddenhidden/css/screen.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" type="text/css" href="/templates/hiddenhidden/css/jquery.lightbox-0.5.css" media="screen" />
        <link rel="shortcut icon" href="/templates/hiddenhidden/images/favicon.ico" />
        <script type="text/javascript" src="/templates/hiddenhidden/js/jquery.js"></script>
        <script type="text/javascript" src="/templates/hiddenhidden/js/uni-form.jquery.min.js"></script>
        <script type="text/javascript" src="/templates/hiddenhidden/js/uni-form-validation.jquery.min.js"></script>
        <script type="text/javascript" src="/templates/hiddenhidden/js/jquery.lightbox-0.5.min.js"></script>
        <script type="text/javascript" src="/templates/hiddenhidden/jqueryui/js/jquery-ui-1.8.16.custom.min.js"></script>
        <script type="text/javascript" src="/templates/hiddenhidden/js/easySlider1.7.js"></script>
        <script type="text/javascript">
            $(function () {
                $('a.lightbox').lightBox({
                    imageLoading:'/templates/hiddenhidden/images/lightbox-ico-loading.gif',
                    imageBtnPrev:'/templates/hiddenhidden/images/lightbox-btn-prev.gif',
                    imageBtnNext:'/templates/hiddenhidden/images/lightbox-btn-next.gif',
                    imageBtnClose:'/templates/hiddenhidden/images/lightbox-btn-close.gif',
                    imageBlank:'/templates/hiddenhidden/images/lightbox-blank.gif'
                });

            });
        </script>
          <base href="http://hiddenhidden.nl/" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="generator" content="Joomla! - Open Source Content Management" />
  <title>hidden hidden</title>
  <link href="/?format=feed&amp;type=rss" rel="alternate" type="application/rss+xml" title="RSS 2.0" />
  <link href="/?format=feed&amp;type=atom" rel="alternate" type="application/atom+xml" title="Atom 1.0" />
  <link rel="stylesheet" href="/modules/mod_portfolio/portfolio.css" type="text/css" />
  <script src="/media/system/js/mootools-core.js" type="text/javascript"></script>
  <script src="/media/system/js/core.js" type="text/javascript"></script>
  <script src="/media/system/js/caption.js" type="text/javascript"></script>
  <script type="text/javascript">
window.addEvent('load', function() {
                new JCaption('img.caption');
            });
  </script>

<script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', '']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>

    </head>
    <body>
    <div id="fb-root"></div>
    <script type="text/javascript">(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <div id="f-container">
        <div id="header">
            <div id="h-container">
            <h1>
            <a href="/" id="logo-container" title="hidden hidden">
                <img src="/templates/hiddenhidden/images/logo_with_slogan.png" id="logo" alt="hidden hidden" />
            </a>
            </h1>

            <div id="topMenu">

<ul class="menu">
<li class="item-102 current active"><a href="/" ></a></li><li class="item-103"><a href="/nieuws" ></a></li><li class="item-104"><a href="/diensten" ></a></li><li class="item-115"><a href="/hosting" ></a></li><li class="item-105"><a href="/portfolio" ></a></li><li class="item-106"><a href="/contact" ></a></li></ul>
            </div>
            </div>
            <div style="clear:both;"></div>
        </div>
        <div id="container">

            <div id="content-left">

<div id="system-message-container">
</div>
                <div class="blog-featured">

<div class="items-leading">
            <div class="leading-0">

    <h2 class="title">
                    <a href="/7-home/1-welkom-op-hidden-hidden">
            Welkom op hidden hidden!</a>
            </h2>

<!-- BEGIN -->

<div class="item-block">

<div class="item-text">

<div class="item-separator"></div>

</div></div>
<div class="item-bottom"></div>     </div>
            </div>

</div>

                                <h2 class="title">Onze Portfolio</h2>
                <div class="item-block">
                    <div class="item-text">

    <div id="portfolio-slider" >

                    </div>      <div style="clear:both;"></div>
            <ul class="ui-tabs-nav">
                      </ul>
</div>
<script type="text/javascript"> jQuery(function() { jQuery("#portfolio-slider").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);   });</script>
<div style="clear:both;"></div>                 </div>
                </div>
                <div class="item-bottom"></div>

                <div id="footer">
                    Copyright&copy;
                     2010 - 2012                    hidden hidden. Alle rechten voorbehouden. | <a href="/component/xmap/?view=html&amp;id=2">Sitemap</a>
                </div>
            </div>

            <div id="content-right">                <h2 class="title">Contact</h2>
                <div class="item-block">
                    <div class="item-text">

<div class="custom"  >
</div>
                    </div>
                </div>
                <div class="item-bottom"></div>

                        <h2 class="title">Offerte aanvragen</h2>
                <div class="item-block">
                    <div class="item-text">

<div class="custom"  >
    <p>Offerte aanvragen? Dat kan via ons <a href="/contact/?view=form">contactformulier</a>.</p></div>
                    </div>
                </div>
                <div class="item-bottom"></div>

                        <h2 class="title">Sociaal</h2>
                <div class="item-block">
                    <div class="item-text">
                        <div id="facebook-container"></div><br />
<a href="http://facebook.com/hiddenhidden/" title="hidden hidden op Facebook">
    <img src="/modules/mod_social/networks/facebook.png" style="border: 0;" alt="hidden hidden op Facebook" />
</a>
<a href="http://twitter.com/hiddenwebsolution" title="hidden hidden op Twitter">
    <img src="/modules/mod_social/networks/twitter.png" style="border: 0;" alt="hidden hidden op Twitter" />
</a>
<a href="http://linkedin.com/company/hidden-hidden" title="hidden hidden op Linkedin">
    <img src="/modules/mod_social/networks/linkedin.png" style="border: 0;" alt="hidden hidden op Linkedin" />
</a>
<script type="text/javascript" src="/modules/mod_social/mod_social.js"></script>                    </div>
                </div>
                <div class="item-bottom"></div>

    </div>
            <div style="clear:both;"></div>
        </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:34:07.457

在您提到 Facebook Like 按钮后，我检查了代码，它在侧边栏内有一个宽度为 400 像素的跨度，该跨度超出了侧边栏的区域（与其父 div 一样）。

```
<div class="fb-like fb_edge_widget_with_comment fb_iframe_widget" data-href="http://facebook.com/keimwebsolutions" data-send="true" data-layout="button_count" data-width="400" data-show-faces="false" data-font="arial"><span style="height: 20px; width: 400px;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:13:43.550

我无法使用您提供的代码重现该问题，但我可以在您的网站上重现该问题。奇怪的问题。快速修复将是删除 min-width，将 body 和 html 元素上的宽度从 auto 更改为 1020px，并添加 overflow: hidden 到 body。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:32:35.960

**我自己的问题**

我找到了！它是 Facebook 的点赞按钮。我已将宽度设置为 400 像素（我不知道为什么）。所以它被挤出了布局。我用 data-width="200" 替换了 data-width="400" 并且知道一切都恢复正常了。Tnx大家！

# jboss - 在 Jboss 4.2.3 GA 中调用 Web 服务时的类转换异常

> ID：10212154
> 
> 赞同：1
> 
> 时间：2012-04-18T14:58:26.497
> 
> 标签：jboss, jax-ws, jdk1.6, jboss-4.2.x, jbossws

我们在 Netbeans 7.1 中创建了一个 Web 服务，该服务在 glassfish 3.1.1 上运行良好。现在我必须将我的服务应用程序移动到 Jboss 4.2.3 GA-JDK6。在 Jboss 上部署 web 服务时没有发现问题，但是调用 web 服务会导致异常：-“ **setProperty 必须被 SOAPMessage 类的所有子类覆盖**”。为了克服这个问题，我在JBOSS_HOME /lib/endorsed 中添加了**jboss-native-saaj.jar 。**这解决了问题并且服务被调用但未能返回响应，但它导致了一个新的异常： -

```
Caused by: java.lang.ClassCastException: com.sun.xml.messaging.saaj.soap.ver1_1.Envelope1_1Impl cannot be cast to org.jboss.ws.core.soap.SOAPElementImpl
at org.jboss.ws.core.soap.SOAPEnvelopeImpl.<init>(SOAPEnvelopeImpl.java:60)
at org.jboss.ws.core.soap.EnvelopeBuilderDOM.build(EnvelopeBuilderDOM.java:124)
at org.jboss.ws.core.soap.EnvelopeBuilderDOM.build(EnvelopeBuilderDOM.java:96)
at org.jboss.ws.core.soap.MessageFactoryImpl.createMessage(MessageFactoryImpl.java:280)
at org.jboss.ws.core.soap.SOAPMessageUnMarshallerHTTP.read(SOAPMessageUnMarshallerHTTP.java:84)
at org.jboss.remoting.transport.http.HTTPClientInvoker.readResponse(HTTPClientInvoker.java:518)
at org.jboss.remoting.transport.http.HTTPClientInvoker.useHttpURLConnection(HTTPClientInvoker.java:307)
... 54 more 
```

此外，我想告诉您，我实际上是从 Web 服务中调用 Web 服务。请为此提供帮助，因为没有可用的文档或解决方案。

提前致谢

添加先前发生的错误的完整堆栈跟踪：-

```
javax.xml.ws.WebServiceException: java.lang.UnsupportedOperationException: setProperty must be overridden by all subclasses of SOAPMessage
at org.jboss.ws.core.jaxws.client.ClientImpl.handleRemoteException(ClientImpl.java:404)
at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:314)
at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:172)
at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:152)
at $Proxy183.authenticateUser(Unknown Source)
at com.liaison.soi.sts.usermgmt.service.impl.UserManagementServiceImpl.authenticateUser(UserManagementServiceImpl.java:46)
at com.liaison.soi.sts.usermgmt.service.impl.UserManagementServiceImpl.authenticateUser(UserManagementServiceImpl.java:25)
at com.liaison.soi.sts.auth.AuthenticationHandler.validate(AuthenticationHandler.java:24)
at com.sun.xml.wss.impl.callback.PasswordValidationCallback.getResult(PasswordValidationCallback.java:80)
at com.sun.xml.wss.impl.misc.DefaultSecurityEnvironmentImpl.authenticateUser(DefaultSecurityEnvironmentImpl.java:1166)
at com.sun.xml.ws.security.opt.impl.incoming.UsernameTokenHeader.validate(UsernameTokenHeader.java:160)
at com.sun.xml.ws.security.opt.impl.incoming.SecurityRecipient.handleSecurityHeader(SecurityRecipient.java:341)
at com.sun.xml.ws.security.opt.impl.incoming.SecurityRecipient.cacheHeaders(SecurityRecipient.java:275)
at com.sun.xml.ws.security.opt.impl.incoming.SecurityRecipient.validateMessage(SecurityRecipient.java:225)
at com.sun.xml.wss.jaxws.impl.SecurityTubeBase.verifyInboundMessage(SecurityTubeBase.java:450)
at com.sun.xml.wss.jaxws.impl.SecurityServerTube.processRequest(SecurityServerTube.java:295)
at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:641)
at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:600)
at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:585)
at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:482)
at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:314)
at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:608)
at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:259)
at com.sun.xml.ws.transport.http.servlet.ServletAdapter.invokeAsync(ServletAdapter.java:213)
at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:159)
at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:194)
at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:80)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:524)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.UnsupportedOperationException: setProperty must be overridden by all subclasses of SOAPMessage
at javax.xml.soap.SOAPMessage.setProperty(SOAPMessage.java:454)
at org.jboss.ws.core.soap.SOAPMessageImpl.<init>(SOAPMessageImpl.java:83)
at org.jboss.ws.core.soap.MessageFactoryImpl.createMessage(MessageFactoryImpl.java:171)
at org.jboss.ws.core.CommonSOAP11Binding.createMessage(CommonSOAP11Binding.java:59)
at org.jboss.ws.core.CommonSOAPBinding.bindRequestMessage(CommonSOAPBinding.java:158)
at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:291)
at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:302) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:24:42.303

这可以很容易地用谷歌搜索。

请参阅[https://issues.jboss.org/browse/JBWS-1439](https://issues.jboss.org/browse/JBWS-1439)和[https://community.jboss.org/message/618306](https://community.jboss.org/message/618306)。

这是 Java 6 下由捆绑的过时 jax-ws jar 引起的一个众所周知的问题。

如上述问题中所述，您必须尝试将一些罐子移动到认可的目录。

另一种解决方案是[升级](https://community.jboss.org/wiki/JBossWS-Installation)到[JBossWS](http://www.jboss.org/jbossws/downloads) -3.1.1（最后一个支持 JBoss AS 4.2.3.GA）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:48:25.460

我认为你的问题在于以下。

该实现仅在 JBoss 3.2.2.GA 之前打包（请查看`SOAPMessageImpl`此处[）](https://repository.jboss.org/nexus/content/repositories/releases/org/jboss/ws/native/jbossws-native-saaj/)。最新的 JBoss 在. 因此，当您放入（或与您的应用程序一起打包）时，您会产生类冲突。所以**解决方案**是：只需删除，因为（我相信）已经存在。`jboss-native-saaj.jar``jbossws-native-core.jar``jboss-native-saaj.jar``server/libs`**`jboss-native-saaj.jar``jbossws-native-core.jar`**

 **确保检查`META-INF`：`jboss-native-saaj.jar`它是为 JBoss 4.2.3 打包的吗？包装日期是什么时候？这将带您做出正确的决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-25T11:53:07.933

JBoss 5.1.2 中的相同问题通过添加解决

```
jboss-as/lib/endorsed/jbossws-native-factories-3.1.2.SP11.jar 
```**

# image - 使背景图像可点击而不使内容可点击

> ID：10212160
> 
> 赞同：1
> 
> 时间：2012-04-18T14:58:46.163
> 
> 标签：image, background, clickable

我迫切需要使网站的背景图片可点击，但我不希望所有内容（即网站的内容）都可点击。我该如何做到这一点，以便只有背景图片点击到一个网站，同时让内容也点击到那个网站。

# php - Javascript 和 PHP - 选中和取消选中所有复选框

> ID：10212161
> 
> 赞同：1
> 
> 时间：2012-04-18T14:58:50.713
> 
> 标签：php, javascript, jquery, checkbox

我在这里研究了所有答案（[https://stackoverflow.com/a/2191026](https://stackoverflow.com/a/2191026)），但即使@davydepauw 和@emeraldjava 建议的最清晰的代码也不起作用......下面的代码不会选择/取消选择PHP 代码中存在的框。

```
echo "<form action=$fileName method='post'>";
...
<script language='JavaScript'>
  $('#select-all').click(function(event) {   
    if(this.checked) {
      // Iterate each checkbox
      $(':checkbox').each(function() {
        this.checked = true;                        
      });
    }
    else {
      // Iterate each checkbox
      $(':checkbox').each(function() {
        this.checked = false;
      });
    }
  });
</script>";
...
// This should select/deselect all checkboxes below:
echo "<input type='checkbox' name='select-all' id='select-all' />";
...
// The below is in the WHILE loop fetching data from MySQL:
echo "<input type='checkbox' name='IndustryID' value='" . $row['IndustryID'] . "'>";
...
</form> 
```

对于@DavidThomas 请求，以下是呈现的代码：

```
<body>
<script language='JavaScript'>
  $('#select-all').click(function(event) {   
    if(this.checked) {
      // Iterate each checkbox
      $(':checkbox').each(function() {
        this.checked = true;                        
      });
    }
    else {
      // Iterate each checkbox
      $(':checkbox').each(function() {
        this.checked = false;
      });
    }
  });
</script>
...
<form action=XXX.php method='post'>
...
<input type='checkbox' name='select-all' id='select-all' />
...
<input type='checkbox' name='IndustryID' value='3'>
...
<input type='checkbox' name='IndustryID' value='5'>
...
<input type='checkbox' name='IndustryID' value='148'>
...
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:01:39.730

您必须将所有内容放在这样的 document.ready 事件中，否则当元素不存在并且没有要附加的元素并使用正确的脚本标签时运行代码

```
<script type="text/javascript">
    $(function(){

     $('#select-all').click(function(event) {   
        if(this.checked) {
          // Iterate each checkbox
          $(':checkbox').each(function() {
            this.checked = true;                        
          });
        }
        else {
          // Iterate each checkbox
          $(':checkbox').each(function() {
            this.checked = false;
          });
        }
      });
    })
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:03:27.863

那是因为您在 jquery 代码之后添加了复选框。

将您的 javascript 代码更改为此

```
 <script language='JavaScript'>
$(document).ready(function(){
      $('#select-all').click(function(event) {   
        if(this.checked) {
          // Iterate each checkbox
          $(':checkbox').each(function() {
            this.checked = true;                        
          });
        }
        else {
          // Iterate each checkbox
          $(':checkbox').each(function() {
            this.checked = false;
          });
        }
      });
});
    </script>"; 
```

或在显示复选框后添加您的 javascript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:09:23.850

```
<script type="text/javascript">
    $(function(){

     $('#select-all').click(function(event) {   
          $(':checkbox').each(function() {
             $(this).attr('checked', !checkbox.attr('checked'));                 
          });
      });

    })
</script> 
```

根本没有测试...只是想到了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:17:38.610

```
var selectAll = false;

    if(selectAll) {
        $('input:checkbox').removeAttr('checked');
        selectAll = false;
    }

    else {
        $('input:checkbox').attr('checked', 'checked');
        selectAll = true;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-10T06:16:09.680

这个不能用。。

```
$(function(){

// add multiple select / deselect functionality
$("#selectall").click(function () {
      $('.case').attr('checked', this.checked);
});

// if all checkbox are selected, check the selectall checkbox
// and viceversa
$(".case").click(function(){

    if(!$(".case:not(:checked)").length)
    {
        $("#selectall").attr("checked", "checked");
    } else {
        $("#selectall").removeAttr("checked");
    }

});
    }); 
```

* * *

然后这就是我构建我的PHP的方式..

```
<input type='checkbox' id='selectall'/>
$select = mysql_query ("SELECT * FROM tblname") OR DIE (mysql_error());
while ($row3=mysql_fetch_array($select_orders2)){
  $idd = $row3['id'];
<input type='checkbox' class='case' name='checkbox[]' value='".$idd."'>
} 
```

* * *

在这段代码中。sql 检索到的所有数据都将与类案例一起迭代。希望这会有所帮助。

# javascript - IE7/IE8 需要一些时间才能返回正确的滚动位置

> ID：10212164
> 
> 赞同：4
> 
> 时间：2012-04-18T14:59:10.470
> 
> 标签：javascript, internet-explorer, scroll, restore, scrolltop

为了显示对话框，我需要知道窗口的当前滚动位置。这是在`$(document).ready`jQuery 块中完成的。

但是，Internet Explorer 在必须记住滚动位置时会中断。

您可以通过在 IE 中打开以下 HTML 代码来尝试此操作，向下滚动一点并点击重新加载（对不起，我没有创建小提琴 - 因为滚动它在那里不起作用）。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"     
type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
    alert(document.body.scrollTop);
    alert(document.body.scrollTop);
  });
</script>

<div style="height:4000px;">
</div> 
```

第一个`alert`显示`0`，第二个显示正确的数字。`setTimeout`如果我使用并等待（在我的情况下）20 毫秒，它也可以在没有第一次警报的情况下工作——当然，在其他情况下这可能需要另外的时间，因此不是解决方案。

我认为问题在于 IE 首先滚动到顶部，做一些事情，然后，过了一会儿，恢复之前的滚动位置（可能它必须先渲染东西才能确保这个滚动位置仍然存在）。

有什么合适的方法可以立即让浏览器滚动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:23:19.777

有几个属性可以获取页面滚动，并且在每个浏览器中都不同。这是我为接收正确滚动而编写的函数：

```
函数getScroll（类型）
{
    类型 = 类型 || '最佳';

    变量结果 = 0;
    变量滚动 = 0;
    如果（类型==='顶部'）
    {
        if (ISQ.Http.browser.app !== 'ie' || ISQ.Http.browser.isIE9)
            滚动 = window.pageYOffset;
        if (ISQ.Http.browser.app !== 'ie')
            scroll = returnMaxScroll(scroll, window.scrollY);
        scroll = returnMaxScroll(scroll, document.body.scrollTop);
        scroll = returnMaxScroll(scroll, document.documentElement.scrollTop);
        scroll = returnMaxScroll(scroll, document.body.parentNode.scrollTop);
    }
    else if (type === 'left')
    {
        if (ISQ.Http.browser.app !== 'ie' || ISQ.Http.browser.isIE9)
            滚动 = window.pageXOffset;
        if (ISQ.Http.browser.app !== 'ie')
            scroll = returnMaxScroll(scroll, window.scrollX);
        scroll = returnMaxScroll(scroll, document.body.scrollLeft);
        scroll = returnMaxScroll(scroll, document.documentElement.scrollLeft);
        scroll = returnMaxScroll(scroll, document.body.parentNode.scrollLeft);
    }
    else if (type === '身高')
    {
        开关（ISQ.Http.browser.app）
        {
            案例“铬”：
            案例“ff”：
            案例“歌剧”：
            案例“野生动物园”：
                // iframe
                如果（window.top === 窗口）
                    滚动 = document.documentElement.scrollHeight;
                // 顶部窗户
                别的
                    滚动 = document.body.scrollHeight;
                休息;
            默认：
                scroll = returnMaxScroll(scroll, document.body.scrollHeight);
                scroll = returnMaxScroll(scroll, document.documentElement.scrollHeight);
                scroll = returnMaxScroll(scroll, document.body.parentNode.scrollHeight);
                休息;

        }
    }
    否则如果（类型==='宽度'）
    {
        scroll = returnMaxScroll(scroll, document.body.scrollWidth);
        scroll = returnMaxScroll(scroll, document.documentElement.scrollWidth);
        scroll = returnMaxScroll(scroll, document.body.parentNode.scrollWidth);
    }

    返回滚动；
}
函数 returnMaxScroll(value1, value2)
{
    if (value1 > value2) 返回值1；
    返回值2；
}

```

```
仅供参考：您可能需要实现这些布尔值：
- ISQ.Http.browser.app !== 'ie'
- ISQ.Http.browser.isIE9

```

我希望它会帮助你:)

# sencha-touch - 如何保持 Sencha Touch 2 数据视图可滚动但关闭滚动行为？

> ID：10212168
> 
> 赞同：1
> 
> 时间：2012-04-18T14:59:26.933
> 
> 标签：sencha-touch, sencha-touch-2

我想保持数据视图可滚动，以便我可以使用 scrollBy 和 scrollTo 功能，但我不希望用户能够滑动以滚动数据视图。但我仍然需要响应滑动手势。

我在想也许调整momentEasing 值可以做到这一点。但是我无法让滚动条使用我的更改。在我的数据视图配置中，我有以下代码，但它没有改变滚动条的行为：

```
scrollable: {
      momentumEasing: {
        momentum: {
          acceleration: 0,
          friction: 999999
        },
        bounce: {
          acceleration: 0,
          springTension: 0
        }
      }
    } 
```

任何想法为什么这不起作用？或者，还有其他更清洁的方法来实现我所追求的吗？我还需要从出现中删除 scollbar，但我认为可以使用 CSS 来完成？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T22:39:23.277

您只需要覆盖`onDragStart`滚动条中的方法，它就什么也不做。

```
container.getScrollable().getScroller().onDragStart = null; 
```

# assembly - 从子程序返回在 PIC18 上不起作用

> ID：10212170
> 
> 赞同：1
> 
> 时间：2012-04-18T14:59:32.747
> 
> 标签：assembly, microcontroller, pic, mplab

我正在编写一个子程序来计算 wreg 中设置的位数，但是在到达子程序末尾的 return 语句时，它只是无休止地重复 return 语句。我是 PIC 和组装的新手，所以我确信我刚刚做了一些愚蠢的事情，但我还没有能够解决它。任何帮助将不胜感激。

这是我的代码：

```
COUNT       equ 0x00

NUMBER      equ 0x01

BITS        equ 0x02

;bitcounter subprogram counts the number of set bits in a byte

BITCOUNTER:

Loop1   rlcf NUMBER,f   ;rotates one bit of number into carry flag, store rotated number

    btfsc STATUS, C     ;skips next line if carry is clear

    incf COUNT, f   ;add one to count, store in count

    bcf STATUS, C   ;clear carry flag

    decfsz BITS

    goto Loop1

    movf COUNT, 0   ; put bit count into W register
return 

START

        movlw   0x0008

        movwf   BITS

        movlw   0xF2

        movwf NUMBER    ;stores input as "number"

        call BITCOUNTER

    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:40:20.553

我是 PIC 编程的新手，到目前为止还没有将任何代码上传到 PIC（仍在等待程序员交付），但我认为最后的“goto start”解决了这个问题，因为 PIC 需要做一些事情。“goto start”指令将 PIC 置于一个循环中，因此它不必尝试“停止”。在没有它的情况下，我认为 PIC 正试图通过简单地无限期地重复最后一条指令来处理“无法停止”。

如果是这样，您也可以添加类似的内容（假设我已经正确设置）：

```
loop2 nop
      goto loop2 
```

在您的代码末尾。PIC 将继续运行无操作，直到您将其重置（或者您可以根据需要设置中断、WDT 或其他一些功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:37:41.127

试试这个...

```
include "p18f452.inc"  ;from dir X:\Program Files (x86)\Microchip\MPASM Suite

COUNT       equ 0x00
NUMBER      equ 0x01
BITS        equ 0x02

;bitcounter subprogram counts the number of set bits in a byte
            org 0

START
            movlw   0x0008
            movwf   BITS
            movlw   0xF2
            movwf   NUMBER    ;stores input as "number"
            call    BITCOUNTER
            goto    START

BITCOUNTER:
Loop1       rlcf   NUMBER,f   ;rotates one bit of number into carry flag, store rotated number
            btfsc  STATUS, C     ;skips next line if carry is clear
            incf   COUNT, f   ;add one to count, store in count
            bcf    STATUS, C   ;clear carry flag
            decfsz BITS
            goto   Loop1
            movf   COUNT, 0   ; put bit count into W register
            return

            end 
```

请记住，没有 MCPU 配置设置，如振荡器、看门狗……只是测试代码！

# ruby-on-rails-3 - 使资产管道像开发中的生产一样

> ID：10212171
> 
> 赞同：5
> 
> 时间：2012-04-18T14:59:34.063
> 
> 标签：ruby-on-rails-3, asset-pipeline

我在*生产*中遇到了一些资产问题：缺少资产，编译到错误文件中的东西（“/admin”的javascript被编译到前端代码等等）。大多数资产来自引擎。我想调试和优化这个。

为此，我需要在我的*开发环境*中进行预编译、服务和失败，就像在*生产*环境中一样。

我在我的`config/development.rb`:

```
 config.serve_static_assets = true
  config.assets.precompile += %w( store/all.js store/all.css admin/all.js admin/all.css ) # @TODO: clean up, and optimize.
  config.assets.compile = false 
```

运行这个`rake RAILS_GROUPS=assets RAILS_ENV=development assets:precompile`给我所有的资产和`manifest.yml`in `public/`.

但随后服务器失败：

```
Sprockets::Helpers::RailsHelper::AssetPaths::AssetNotPrecompiledError in Spree/home#index

Showing /xxxx/app/views/spree/shared/_head.html.erb where line #13 raised:

favicon.ico isn't precompiled 
```

**favicon.ico 没有预编译**。但它是！它在那里，在公共目录中`manifest.yml`，我可以使用浏览器（或 wget）获取它：[http://localhost:3000/assets/favicon.ico](http://localhost:3000/assets/favicon.ico)。

**注意**Favicon 只是调用的第一个资产。如果我去掉 favicon，问题只会出现在下一个资产上，即“all.js”，或者，当它被删除时，“all.css”等等。我可以剥离它直到“footer_bg.png”，然后它会在那里失败。再说一遍：问题不在于网站图标，而在于*开发*环境根本看不到预编译的资产。

还需要什么才能获得类似于*生产的**开发*资产管道？

 *编辑：更明确的解释是网站图标不是问题，只是一种症状。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:16:41.187

我最终在 localhost 上安装了一个 apache，乘客进行故障排除。

由于静态资产服务，Apache（可能是任何可载客的服务器）。此外，在 localhost 上，我可以将 apache 在其日志中的详细程度提高到非常高，从而为我提供足够的调试信息。

乘客在生产中尽可能地模拟 ruby​​ 版本和 gem-loading。

在 webrick 上运行实在是太不一样了，即使在尽可能接近的情况下，它也被证明与生产堆栈太不同了；这就是为什么我无法重现那里的生产问题，

像在生产环境中一样启动整个堆栈让我能够进行故障排除。这使我得出结论，有几个问题导致了资产问题：宝石资产没有被提取；权限问题（www-data 无法读取已编译的资产）和一些未正确编译的资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:03:05.587

我想你可能想`favicon.ico`离开`public`...

```
alzabo0:~ $ rails --version
Rails 3.2.3
alzabo0:~ $ rails new ojoijoijo
[...]
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/favicon.ico
      create  public/index.html
      create  public/robots.txt
[...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T22:28:47.210

只是一个猜测，但尝试添加到您的预编译列表：

```
config.assets.precompile += %w( store/all.js store/all.css admin/all.js admin/all.css favicon.ico) 
```*

# drupal-7 - 无法向内容类型添加新字段，小部件下拉菜单不起作用

> ID：10212173
> 
> 赞同：5
> 
> 时间：2012-04-18T14:59:40.537
> 
> 标签：drupal-7

这是我使用drupal 的第一步。

我为我的文章创建了一个分类层次结构，现在我正在尝试向内容类型“文章”和“媒体”添加一个新字段，以便内容管理员可以为他的新内容分配一个“类别”。

所以我去过结构>内容类型>文章>管理字段然后“添加新字段”：

```
1- Label = Category
2- Name = "field_category
3- Field = "Term reference"
**4- Automatically changes to "Select list" but I am unable to see the drop down list options. Clicking the list doesn't do anything, I couldn't select Autocomplete or any other value I've seen on forums & tutorials. Using firebug I could see the options are there, but the list doesn't show up.** 
```

所有类型的字段都会发生这种情况，即使是最基本的文本字段也是如此。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T08:01:00.823

正如 glumbo 提到的，这里的问题是由**jQuery 1.7 update**引起的。从 jQuery 1.6 开始，应该使用[.prop()](http://api.jquery.com/prop/)函数访问 DOM 属性。一些**修补程序解决方案**存在一个[未](http://drupal.org/node/1448494)解决的问题：

 **您需要在以下几行中用 .prop() 替换.attr **(** **)** jQuery 函数调用：**`/modules/field_ui/field_ui.js`**

 **```
100:      $(this).html(html).attr('disabled', disabled ? 'disabled' : '');
253:      $(ajaxElements).attr('disabled', true); 
```

请注意，此修复修改了 Drupal 核心模块，您可能需要使用补丁（无论如何，Dries 都会杀死小猫：）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T22:48:32.710

问题在于 jquery 更新。如果您使用的是 jquery 1.7，您将遇到此问题****

# php - 读取带有样式的文本文件（粗体、斜体...）

> ID：10212177
> 
> 赞同：-2
> 
> 时间：2012-04-18T14:59:58.100
> 
> 标签：php, text, formatting

是否可以使用带有样式的 PHP 读取文本文件？

我的客户不想编写任何代码（甚至 [b][/b]），他必须将这些文本文件发送给一些翻译人员以将它们翻译成 4 种语言。

然后我必须将它们发布在网站上。它们是非常大的文本，我想知道如何处理这个以保持格式，而不必直接使用 BBcode 或 HTML 代码读取和格式化所有文本（因为它们经常更新并进行一些更改）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:05:42.663

我看到 2 个可能的答案：

*   剥离所有标签，将文本发送给翻译人员并重新添加样式格式标签（请参阅`strip_tags()`）

*   编写一个脚本，将文本转换为可编辑的文件格式，如 .docx 或 .odt，并在文本返回时反转该过程。（有一些 PHP 库可以做到这一点）

# java - 使用 Java 查找简单的 Active Directory 信息

> ID：10212179
> 
> 赞同：8
> 
> 时间：2012-04-18T15:00:12.440
> 
> 标签：java, user-interface, powershell, active-directory

这是我的第一篇文章，所以请温柔。

我最近开始在工作中使用 Powershell 来更改 AD 组、查找 AD 信息等，但我缺少我非常喜欢 Java 的 GUI。

是否有一种简单的方法（或代码示例），我输入目标主机名并返回我要求的详细信息。AD memberhsip 组、帐户信息等？

我的 Java 知识不如我的 Powershell 好，所以尽可能多的帮助会非常感激。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T08:36:46.547

如果你正在寻找一个完整的 java GUI 来查询 Active-Directory，你可以看看[Apache Directory Studio](http://directory.apache.org/studio/)。

如果您只想使用 java 查询 AD，这里是一个示例代码：

```
class TestAD 
{ 
  static DirContext ldapContext; 
  public static void main (String[] args) throws NamingException 
  { 
    try 
    { 
      System.out.println("Début du test Active Directory"); 

      Hashtable<String, String> ldapEnv = new Hashtable<String, String>(11); 
      ldapEnv.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory"); 
      //ldapEnv.put(Context.PROVIDER_URL,  "ldap://societe.fr:389"); 
      ldapEnv.put(Context.PROVIDER_URL,  "ldap://dom.fr:389"); 
      ldapEnv.put(Context.SECURITY_AUTHENTICATION, "simple"); 
      //ldapEnv.put(Context.SECURITY_PRINCIPAL, "cn=administrateur,cn=users,dc=societe,dc=fr"); 
      ldapEnv.put(Context.SECURITY_PRINCIPAL, "cn=jean paul blanc,ou=MonOu,dc=dom,dc=fr"); 
      ldapEnv.put(Context.SECURITY_CREDENTIALS, "pwd"); 
      //ldapEnv.put(Context.SECURITY_PROTOCOL, "ssl"); 
      //ldapEnv.put(Context.SECURITY_PROTOCOL, "simple"); 
      ldapContext = new InitialDirContext(ldapEnv); 

      // Create the search controls          
      SearchControls searchCtls = new SearchControls(); 

      //Specify the attributes to return 
      String returnedAtts[]={"sn","givenName", "samAccountName"}; 
      searchCtls.setReturningAttributes(returnedAtts); 

      //Specify the search scope 
      searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE); 

      //specify the LDAP search filter 
      String searchFilter = "(&(objectClass=user))"; 

      //Specify the Base for the search 
      String searchBase = "dc=dom,dc=fr"; 
      //initialize counter to total the results 
      int totalResults = 0; 

      // Search for objects using the filter 
      NamingEnumeration<SearchResult> answer = ldapContext.search(searchBase, searchFilter, searchCtls); 

      //Loop through the search results 
      while (answer.hasMoreElements()) 
      { 
        SearchResult sr = (SearchResult)answer.next(); 

        totalResults++; 

        System.out.println(">>>" + sr.getName()); 
        Attributes attrs = sr.getAttributes(); 
        System.out.println(">>>>>>" + attrs.get("samAccountName")); 
      } 

      System.out.println("Total results: " + totalResults); 
      ldapContext.close(); 
    } 
    catch (Exception e) 
    { 
      System.out.println(" Search error: " + e); 
      e.printStackTrace(); 
      System.exit(-1); 
    } 
  } 
} 
```

# clearcase - 确保开发人员运行私有构建并在交付之前编译的规则 - RTC 源代码控制

> ID：10212180
> 
> 赞同：1
> 
> 时间：2012-04-18T15:00:17.697
> 
> 标签：clearcase, rtc

在开发人员将任何代码交付到变更集之前，可以确保开发人员运行私有构建，如果构建失败，开发人员将无法将变更集交付到流。类似于如果存在编译错误无法交付代码更改的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:12:38.247

在 ClearCase 中，您可以使用 pre-op 钩子在[交付开始时强制执行某些策略](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.tutorial.doc/a_deliver_start.htm)

可以在该**`Team Configuration / Operation Behavior / Source Control / Deliver (client)`**部分中添加挂钩。
但我不会推荐这种方法。

我宁愿使用“[多流开发](https://jazz.net/library/article/40/)”文章中描述的**自动构建。** 这将是[构建定义的“构建后交付”步骤](https://jazz.net/library/article/649#Example_postBuildDeliver)。

您甚至可以将任何已从“构建”流成功构建的变更集自动交付到另一个流。

文章“[如何在 Rational Team Concert 3.0.1 中保持您的流顺畅流动](https://jazz.net/library/article/649)”有更多关于这种方法的内容。

# eclipse - Eclipse 和 MySQL Workbench 出现“无法完成保存”错误

> ID：10212183
> 
> 赞同：0
> 
> 时间：2012-04-18T15:00:45.923
> 
> 标签：eclipse, save, mysql-workbench

我在保存 Eclipse 和 MySQL Workbench 时遇到了一个奇怪的问题。我正在使用 Eclipse Java EE Indigo Service Release 1 和 Workbench CE 5.2.24。我的 Java 版本是 1.7.0_01。我在 Windows 7-64 机器上运行。

我在网络驱动器上有一些文件。如果我在 Eclipse 中编辑一个并尝试保存它，我会得到“无法完成保存”，原因是“系统找不到指定的路径”。Eclipse 可以成功地编辑同一驱动器上的其他文件。此外，另一台机器上的另一个版本的 Eclipse（32 位 Java EE Indigo）可以编辑和保存与我笔记本电脑上的 Eclipse 无法保存的完全相同的文件。

如果我在网络驱动器上使用 Workbench 编辑模型，我可以很好地修改模型。但是，如果我尝试导出脚本，则会收到错误“无法保存文件”。无法创建文件 .KWLQCW”。没有这样的文件或目录。我正在尝试在导出时覆盖现有脚本。同样，使用另一台机器上的 Workbench（相同版本）可以修改我的笔记本电脑上的 Workbench 失败至。

我可以使用其他编辑器毫无问题地编辑或更改这两个文件。实际上，当我更改确实更改它们时，Eclipse 要求我刷新它们，但编辑它们后无法保存。

如果文件在我的 C 驱动器上，Eclipse 和 Workbench 都可以正常工作。所有这一切都在上周工作，我想不出我对我的机器所做的配置更改。对于调试此问题的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:26:16.463

我建议您尝试使用最新的 MySQL Workbench 版本（5.2.39）。您使用的 5.2.24 版本相当旧。您可以[在此处下载 Workbench](http://dev.mysql.com/downloads/workbench/5.2.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:33:05.830

好吧，我似乎已经通过删除父目录、重新创建并重新填充它来解决这个问题。我只能想象文件系统以某种方式损坏了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T09:59:56.157

通过更改文件和目录的权限，问题得到解决

# java - 如何将所有 .json URL 映射到特定控制器

> ID：10212184
> 
> 赞同：0
> 
> 时间：2012-04-18T15:00:46.007
> 
> 标签：java, spring

目前我的 web.xml 显示以下...

```
<!-- Spring Web MVC dispatcher servlet -->
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.html</url-pattern>
    <url-pattern>*.json</url-pattern>
</servlet-mapping> 
```

我想做的是将所有`.json`URL 限制为特定控制器。老实说，我不完全确定 Spring 中的 DispatcherServlet 是如何工作的，所以我不确定这是否在正确的轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:15:00.167

DispatcherServlet 遵循对正确 Spring 控制器的请求。因此，根据您的 web.xml，您可以在 web.xml 中执行此操作：

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

并创建一个带有注释的 Spring 控制器，例如：

```
@Controller
@RequestMapping(value = "/*.json")
public class TheController {

} 
```

一些有用的资源： http: [//blog.netapsys.fr/index.php/post/2008/04/13/Introduction-A-Spring-MVC](http://blog.netapsys.fr/index.php/post/2008/04/13/Introduction-A-Spring-MVC) http://static.springsource.org/docs/Spring-MVC-step -一步一步/

# c# - C# - 从基类获取页面的 BaseType.Name 和命名空间

> ID：10212185
> 
> 赞同：2
> 
> 时间：2012-04-18T15:00:54.230
> 
> 标签：c#, class, base

我的所有页面都有一个基类：

```
//BASE CLASS
public class WebBasePage : Page
{
    protected override void OnLoad(EventArgs e)
    {
          base.OnLoad(e);
          string pageBaseTypeName = ????
          string pageBaseTypeNameMespace = ????
    }
}
//PAGE
public partial class T350112A : WebBasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //Some code.
    }
} 
```

我希望这个基类的 OnLoad 事件能够动态获取调用基类的 Page 的 BaseType.Name 和 Namespace。

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:04:47.333

我假设您想要获取*派生*类名称和命名空间，而不是基页名称和命名空间（因为这永远不会改变）。您只需拨打电话即可`GetType`获取此信息：

```
 public override void OnLoad(EventArgs e)
  {
       Type derivedType = GetType();
       string typeName = derivedType.Name;
       string namespace = derivedType.Namespace;
  } 
```

该`GetType`调用将获取*运行*类型的信息。

# grep - 如何“grep”文件名而不是文件的内容？

> ID：10212192
> 
> 赞同：170
> 
> 时间：2012-04-18T15:01:12.303
> 
> 标签：grep

[grep](https://en.wikipedia.org/wiki/Grep)用于在文件中搜索以查看是否有任何行与给定的正则表达式匹配。但是，我有这种情况 - 我想编写一个匹配文件名本身（而不是文件内容）的正则表达式。我将从系统的根目录运行它，以查找所有与正则表达式匹配的文件。

例如，如果我想查找所有以“f”开头并以 .frm 结尾的[Visual Basic](https://en.wikipedia.org/wiki/Visual_Basic)表单文件，我将使用正则表达式 -

```
 "f[[:alnum:]]*\.frm" 
```

grep 可以这样做吗？如果没有，是否有一个实用程序可以让我这样做？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-04-18T15:02:15.953

在这种情况下，您需要使用`find`而不是。`grep`

您还可以`find`与`grep`or结合使用`egrep`：

```
$ find | grep "f[[:alnum:]]\.frm" 
```

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2016-11-15T14:47:26.760

**Example**

```
find <path> -name '*FileName*' 
```

**From manual:**

*find -name pattern*

Base of file name (the path with the leading directories removed) matches shell pattern pattern. Because the leading directories are removed, the file names considered for a match with -name will never include a slash, so "-name a/b" will never match anything (you probably need to use -path instead). The metacharacters ("*", "?", and "[]") match a "." at the start of the base name (this is a change in find‐ utils-4.2.2; see section STANDARDS CONFORMANCE below). To ignore a directory and the files under it, use -prune; see an example in the description of -path. Braces are not recognised as being special, despite the fact that some shells including Bash imbue braces with a special meaning in shell patterns. The filename matching is performed with the use of the fnmatch(3) library function. Don't forget to enclose the pattern in quotes in order to protect it from expansion by the shell.

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2014-08-11T21:10:27.173

正如巴勃罗所说，您需要使用`find`而不是`grep`，但无需通过管道`find`传输到`grep`. `find`具有内置的功能：

```
find . -regex 'f[[:alnum:]]\.frm' 
```

`find`是一个非常强大的按名称搜索文件的程序，支持按文件类型搜索，深度限制，将不同的搜索词与布尔运算组合，以及对找到的文件执行任意命令。有关更多信息，请参见[查找手册页](http://linux.die.net/man/1/find)。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2016-10-26T02:48:18.020

You can find the relative path of a file using tree. Just pipe the output to grep to filter down:

```
tree -f | grep filename 
```

Here is a function you can put into your `.bash_profile`, `.bashrc`, `.zshrc` or other...

```
findfile(){ tree -f | grep $1; } # $1 = filename, -f is full path 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2020-06-02T04:24:28.903

The easiest way is

```
find . | grep test 
```

Here *find* will list all the files in the (.), i.e., the current directory, recursively.

And then it is just a simple grep. All the files which name has "test" will appear.

You can play with *grep* as per your requirement. Note: As the grep is a generic string classification. It can result in giving you not only file names. But if a path has a directory ('/xyz_test_123/other.txt') it would also be part of the result set.

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-11-23T16:50:05.687

```
find -iname "file_name"

Syntax:
find -type type_descriptor file_name_here 
```

*type_descriptor*类型：

f：常规文件

d: 目录

l：符号链接

c：字符设备

b：块设备

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-09-12T12:58:27.080

你也可以这样做：

```
tree | grep filename 
```

这会将 tree 命令的输出通过管道传输到 grep 以进行搜索。这只会告诉你文件是否存在。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-01-28T08:07:18.217

```
find . | grep KeywordToSearch 
```

Here `.` means the current directory which is the value for the *path* parameter for the [find](https://en.wikipedia.org/wiki/Find_(Unix)) command. It is piped to grep to search the keyword which should return all matching results.

Note: This is case sensitive. So for example `fileName` and `FileName` are not same.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-02-14T15:28:33.507

Also for multiple files.

```
tree /path/to/directory/ | grep -i "file1 \| file2 \| file3" 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2018-02-06T00:21:36.067

No, grep works just fine for this:

```
 grep -rl "filename" [starting point]

 grep -rL "not in filename" 
```

# c - 如何确定我的 GNU C 库是否是线程安全的？

> ID：10212193
> 
> 赞同：2
> 
> 时间：2012-04-18T15:01:22.637
> 
> 标签：c, matlab, thread-safety, mex

[在并行运行 MATLAB MEX 文件时，](http://www.mathworks.com/matlabcentral/answers/35754-segmentation-faults-when-running-mex-files-in-parallel)我目前收到奇怪的分段违规。

经过大量调试后，我 99% 确信分段违规与 MEX 文件本身无关，而是与我并行运行它的事实有关。

建议的分段违规的一个可能原因是 C 库函数“malloc”和“free”可能不是线程安全的。这真的有可能吗？有什么方法可以确定吗？

我使用“GNU C 2.14.90 development”C 库编译了 MEX 文件 - 所以我想我正在寻找一个分发它的网站/回答这些类型的问题。

# bash - 在bash中将数字转换为位域字符串

> ID：10212194
> 
> 赞同：1
> 
> 时间：2012-04-18T15:01:31.277
> 
> 标签：bash, shell, math, bits

`bash`将数字转换为位域字符串（如 1101 ）的最简洁方法可能是什么？

实际上，我正在尝试做相反的事情

```
echo $[2#1101] 
```

为什么：我需要向一个程序发送一个参数，该程序采用完整字符串形式的位域，例如“0011010110”，但通常只需要启用一个或几个位，如下所示：

```
SUPPRESSbits=$[1<<16] runscript.sh  # OR
SUPPRESSbits=$[1<<3 + 1<<9] runscript.sh  # much more readable when I know what bits 3 and 9 toggle in the program 
```

然后 runscript.sh 然后在其环境中看到 a`SUPPRESSbits=65536`而不是`SUPPRESSbits="1000000000000000"`并以解析错误结束。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:21:38.930

简单的方法：

```
$ dc <<<2o123p
1111011

$ bc <<<'obase=2; 123'
1111011 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:19:16.037

我怀疑 bash 但你总是可以使用 perl：

```
a=123; b=$(perl -e 'printf "%b", "'$a'"'); echo $b
1111011 
```

# mysql - mysql count一个值显示多列

> ID：10212199
> 
> 赞同：0
> 
> 时间：2012-04-18T15:01:48.283
> 
> 标签：mysql

我找不到这个，我敢肯定它很简单。

表（196 行）

```
tech, name, area, manager
------------------------------
Joe,mary,pa,sally
Kim,brad,ga,tim
kelly,Joe,pa,sally
Joe,jose,pa,sally 
```

一个技术被分配给多个名称/区域/经理。我想做一个报告，显示表格的所有行，其中有一列显示技术分配的数量。

我想要的结果

```
tech, name, area, manager, (count of number of tech assignments)
Joe,mary,pa,sally,2
Kim,brad,ga,tim,1
kelly,Joe,pa,sally,1
Joe,jose,pa,sally,2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:04:29.123

我猜你想要一个`SELECT`子句的子查询：

```
SELECT 
   name, 
   area, 
   manager, 
   (SELECT COUNT(*) FROM tablename WHERE tech = x.tech) AS assignments
FROM tablename x 
```

**这是一种可能更有效的方法来做同样的事情：**

```
SELECT 
   t.name, 
   t.area, 
   t.manager,
    sub.assignments 
FROM tablename t
INNER JOIN (
    SELECT tech, COUNT(*) AS assignments 
    FROM tablename 
    GROUP BY tech
 ) sub
ON sub.tech = t.tech 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:11:20.073

```
select 
    a.tech, a.name, a.area, a.manager,
    b.cnt
from table a, (
    select count(*) cnt, tech
    from table
    group by tech) b
where a.tech=b.tech; 
```

这是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:12:21.070

```
SELECT tech, count(name) AS total_records FROM db_table GROUP BY tech 
```

不确定这是您要查找的内容。哦，是的，看起来你真的需要使用子查询。感谢您的示例，这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:21:01.793

```
SELECT tech, name, area, manager, assignments  
FROM table
  INNER JOIN ( 
    SELECT tech, COUNT(*) AS assignments  
    FROM table  
    GROUP BY tech 
  ) t 
USING (tech) 
```

* * *

***解释：***

从表中选择所有列，并将它们与包含技术列的表和具有特定技术的表中的行数连接起来。关键字 USING 表示这两个表如何合并。

# com - 最佳实践 - 当真正目的是公开 TLB 文件时，托管程序集的放置位置

> ID：10212201
> 
> 赞同：1
> 
> 时间：2012-04-18T15:01:53.777
> 
> 标签：com, vb6, assemblies, com-interop, managed

我有一个环境，其中为特定套件运行托管和非托管可执行文件的组合。

我有一个场景，我有一个托管程序集（在这种情况下）的唯一原因是因为在 C# 中编写代码比在 VB6 中编写代码更容易。

我用 VB6 编写的“主”应用程序需要调用此程序集。所以我创建了 TLB 文件，所以它的 COM 可调用。

现在进行部署，将托管程序集与 tlb 一起放置在 Windows 系统目录中是否更好？让他们都在同一个地方？在我看来，以这种方式管理起来更容易一些。

或者托管程序集（未签名，因为它不会在差异应用程序之间共享）应该只是转到应用程序目录的 BIN，并且 TLB 移动到 windows\system32 并在那里注册。

总体而言，将它们放在一起似乎更直接，但这似乎不是正确的做事方式。

感谢任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:48:37.077

以上都不是。*编译*VB6 程序时只需要类型库。它不需要也不应该部署在用户的机器上。有一个小角落案例，类型库可以帮助编组跨单元或进程的接口。在 VB6 应用程序中不会出现这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:15:50.870

就个人而言，我会将它们都放在应用程序的安装文件夹或`Common Files`结构下。理想情况下，这些`System32`文件夹仅用于系统文件。（暂时忽略历史：）

# c++ - 字符串类型是标量吗？如果是，为什么？

> ID：10212202
> 
> 赞同：4
> 
> 时间：2012-04-18T15:01:55.207
> 
> 标签：c++, c, string, scalar

一些网站声称字符串类型是标量。据我了解，标量是单值类型，而不是数组类型。但是字符串本质上不是一个字符数组吗？那么为什么它会是一个标量呢？

编辑：如果答案/解释从 C 到 C++ 不同，我希望解释包括两种语言。我正在向这个问题添加 C++ 标记。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T15:05:20.730

`char*`and`const char*`是标量类型，而`char[n]`and`const char[n]`不是。

> 算术类型、枚举类型、指针类型、指向成员类型的指针`std::nullptr_t`以及这些类型的 cv 限定版本统称为*标量类型*。（3.9 类型 [basic.types] §9）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T15:27:19.160

标量和聚合类型之间的区别是模糊的。32 位整数也是 32 位的容器。尽管字符串在技术上是字符的集合，但我们经常像操作标量一样操作它们。我们将它们视为不可变的，比较它们，将它们作为参数传递等。在 C 中，字符串的聚合性质更加明显，但包括 C++ 在内的许多其他语言使它们感觉像标量。

模糊性的其他示例是复数和 3D 矢量。它们实际上由几个 组成`doubles`，但数值程序仍然在堆栈上分配它们，按值传递它们，在它们上重载标量运算符等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:13:11.043

在 C 中，字符串是一种数据格式，而不是一种类型。AC 字符串是数组类型`N+1`， `char`其中`N`是字符串的长度。数组类型不是标量类型的一部分，而是聚合类型的一部分。

C++ 还有一种`string`类型，它属于类类型，但不属于标量类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:12:46.500

通常，所有基本的原始数据类型都被视为标量。

但是，因为 C++ 有一个 STL，它是语言的一部分，所以您可以将字符串（不是 char 数组）视为标量类型。

在 C 中，没有这样的字符串原语（因为 C 中字符串的定义本质上是一个标量 char 类型的数组），所以这完全取决于您如何看待它。

# security - 战内配置的Tomcat认证

> ID：10212207
> 
> 赞同：1
> 
> 时间：2012-04-18T15:02:10.193
> 
> 标签：security, authentication, tomcat, war

我必须向 tomcat 部署战争，但我无法修改战争本身之外的任何内容。现在我需要向应用程序添加身份验证和授权。

基本身份验证就足够了，但我不能编辑 tomcat-user.xml 文件，也不能像这里建议的那样依赖绝对路径：[如何在不更改 tomcat-users.xml 的情况下为静态 tomcat webapps 提供基本 http 身份验证？](https://stackoverflow.com/questions/7726014/how-do-i-provide-basic-http-authentication-for-static-tomcat-webapps-without-cha)

我只需要使用一个可以在战争中的文件中配置的用户/密码（这是一个生命周期短且安全要求非常低的简单应用程序）。最简单的方法是什么？

谢谢安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:57:09.773

我似乎一个解决方案是使用带有基本身份验证的弹簧安全性。

请参阅：[Spring Security HTTP 基本身份验证](https://stackoverflow.com/questions/2691160/spring-security-http-basic-authentication)

在我原来的情况下，我不想包括弹簧安全，但我仍然不知道任何其他方式来获得这个结果。

# django - 在 JavaScript 中使用 django 模板标签

> ID：10212211
> 
> 赞同：0
> 
> 时间：2012-04-18T15:02:18.647
> 
> 标签：django, django-templates

如何在 JavaScript 中使用 Django 的模板标签？这是我的代码：

```
{% block scripts %}
<script>
    $(document).ready(function() {
        var classEditor = {
            dcg: $("div.control-group"),

            set: function(i, errors) {
                $dcg = $(classEditor.dcg[i]);
                $dcg.addClass("error");
                $dcg.children('div').children('div').children('p').text(errors);
            }
        };

        {% if form.email.errors %}
            {% for err in form.email.errors %}
                {{ e|add:err }}
            {% endfor %}
            classEditor.set(1, {{ e }});
        {% endif %}
    })
</script>
{% endblock %} 
```

我想将所有错误发送到一个函数并用它做一些事情。我尝试使用`striptags`and `stringformat`，但它总是会引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:30:14.277

我认为您的问题与 Javascript 没有任何关系。问题在这里：

```
{{ e|add:err }} 
```

这根本没有意义。似乎您正在尝试建立一个列表，`e`其中包含 中的所有项目`form.email.errors`。但是你不能在模板中做那种事情——设计上不允许数据操作。过滤器只是执行显示的`add`数字计算，它不修改对象。

您可能希望在视图中将错误序列化为 JSON，并将该 JSON 对象传递给`classEditor.set`.

# tcl - 整数到小数点后 2 位

> ID：10212213
> 
> 赞同：10
> 
> 时间：2012-04-18T15:02:23.090
> 
> 标签：tcl, rounding

我需要将一个数字四舍五入到小数点后两位。现在，我猜以下四舍五入到最接近的整数

```
puts [expr {round($total_rate)}] 
```

如果我做类似下面的事情它不起作用。还有其他方法吗？

```
puts [expr {round($total_rate,2)}] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-19T09:37:22.577

四舍五入到特定小数位数的最简单方法是`format`：

```
puts [format "%.2f" $total_rate] 
```

请注意，如果您使用舍入值进行进一步计算而不是显示给用户，则使用舍入到*X*位小数位打印的大多数值将不会在二进制算术中具有精确表示（Tcl 在内部使用，如大量其他编程语言）。最好将四舍五入保留到特定数量的 DP，直到您向人们展示价值。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-18T15:23:51.250

```
expr {double(round(100*$total_rate))/100} 
```

例子

```
% set total_rate 1.5678
1.5678
% expr {double(round(100*$total_rate))/100}
1.57
% set total_rate 1.4321
1.4321
% expr {double(round(100*$total_rate))/100}
1.43 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-08T06:55:26.973

```
puts [format "%.2f" $total_rate] 
```

通过使用格式，我们可以在输出中看到结果，但是如何在程序中使用相同的值，即，我们可以在输出中看到 1.448 和 1.45，但我们可以在程序中使用 1.45。

# asp.net-mvc - MVC2 Ajax 表单提交导致“无法创建接口实例”错误

> ID：10212214
> 
> 赞同：1
> 
> 时间：2012-04-18T15:02:30.307
> 
> 标签：asp.net-mvc

我在通过 AJAX 向我的控制器提交表单时遇到问题。其他有类似错误消息的人似乎在他们的控制器方法存根上使用接口作为类型时遇到问题，我没有这个问题。我已经包含了我的部分视图和控制器代码，如果我错过了任何信息，请告诉我。我怀疑这与我更改下拉列表中的值后创建模型有关，但错误消息不是最有帮助的，所以我有点卡住了！

我的部分观点：

```
<% using (Ajax.BeginForm("RequestDetails", "Home", new { RequestId = Model.Request.RequestId, RequestStatus = Model.Request.Status }, new AjaxOptions
        {
            HttpMethod = "POST",
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "Details"
        },
        new { @class = "jqtransform" }))
        {%>

        <%= Html.LabelFor(m => Model.Request.Name) %>
        <p><%= Html.Encode(Model.Request.Name)%>&nbsp;</p>
        <%= Html.LabelFor(m => Model.Request.Status) %>
        <% if (Html.IsAdmin(this.Page))
        {%>
            <div class="rowElem">
            <%=Html.DropDownListFor(m => Model.Request.Status, (IEnumerable<SelectListItem>)ViewData["requestStatus"], null, new { onchange = "this.form.submit();" })%>
            </div>
    <%  }
        else
        { %>
            <p><%= Html.Encode(Model.Request.Status.GetStringValue())%>&nbsp;</p>
        <% } }%> 
```

我的控制器：

```
[HttpPost]
    public PartialViewResult RequestDetails(RequestDetailModel model, Guid RequestId, string RequestStatus)
    {
        if (ModelState.IsValid)
        {
            RequestMethods requestMethods = new RequestMethods();

            IRequest request = _requestRepo.GetRequestById(CurrentUser, RequestId, CompanyId);

            requestMethods.UpdateRequestStatus(request, CurrentUser, model.NewComment, model.Request.Status);

        }

        model.Request = _requestRepo.GetRequestById(CurrentUser, RequestId, CompanyId);

        return PartialView(model);
    } 
```

抛出的确切错误是：

无法创建接口的实例。

在 System.RuntimeTypeHandle.CreateInstance（RuntimeType 类型，Boolean publicOnly，Boolean noCheck，Boolean& canBeCached，RuntimeMethodHandle& ctor，Boolean& bNeedSecurityCheck）在 System.RuntimeType.CreateInstanceSlow（Boolean publicOnly，Boolean fillCache）在 System.RuntimeType.CreateInstanceImpl（Boolean publicOnly，Boolean skipVisibilityChecks , Boolean fillCache) 在 System.Activator.CreateInstance(Type type, Boolean nonPublic) 在 System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) 在 System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext , ModelBindingContext bindingContext) 在 System.Web.Mvc.DefaultModelBinder.GetPropertyValue(ControllerContext controllerContext, ModelBindingContext bindingContext,PropertyDescriptor propertyDescriptor, IModelBinder propertyBinder) 在 System.Web.Mvc.DefaultModelBinder.BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor) 在 System.Web.Mvc.DefaultModelBinder.BindProperties(ControllerContext controllerContext, ModelBindingContext bindingContext) 在 System.Web.Mvc。在 System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) 在 System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) 在 System.Web.Mvc.DefaultModelBinder.BindComplexElementalModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Object model)。 Web.Mvc.ControllerActionInvoker。在 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 上的 GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:14:48.960

您尚未显示您的`RequestDetailModel`对象，但如果存在接口类型的属性，则默认模型绑定器无法填充它们。例如，如果您有以下情况：

```
public class RequestDetailModel 
{
    public IRequest Request { get; set; }
} 
```

接口或抽象类在哪里`IRequest`不起作用。如果要在模型中使用接口，则需要编写自定义模型绑定器。这是这种自定义模型绑定器的[一个示例](https://stackoverflow.com/a/6485552/29407)，它与抽象类一起使用，但接口是相同的。

# ios - 在IOS编程中，“视图控制器”实际上是控制器吗？

> ID：10212216
> 
> 赞同：1
> 
> 时间：2012-04-18T15:02:33.437
> 
> 标签：ios, model-view-controller, viewcontroller

iOS 编程中的“视图控制器”名称有点令人困惑，因为它在 MVC 模型中包含“视图”和“控制器”这两个词。“视图控制器”实际上只是控制器的另一个名称（因为视图实际上主要由界面生成器完成）。为什么叫“视图控制器”？是不是因为这个控制器也完成了所有视图属性的更新和事件处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:16:47.760

是的，a`UIViewController`存在于 MVC 的“控制器”层中。但它是控制和更新视图的特殊控制器。视图控制器也可以处理事件，因为它们派生自`UIResponder`.

您还可以通过子类化来创建通用控制器`NSObject`。例如管理帐户等的帐户控制器。您实际上可以在 iOS SDK 中找到其他控制器类，例如`UIDocumentInteractionController`.

从*iOS 视图控制器编程指南*：

> 对于 iOS 应用程序，视图控制器在应用程序的数据和它的视觉外观之间提供了一个重要的链接。了解何时以及如何使用视图控制器对于 iOS 应用程序的设计至关重要。视图控制器是模型-视图-控制器设计范例中的传统控制器对象，但它们还可以做更多的事情。在 iOS 应用程序中，视图控制器提供了管理基本应用程序行为所需的大部分逻辑。例如，视图控制器管理屏幕内容的呈现和删除，并管理视图的重新定向以响应设备方向的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:13:48.153

“控制器”跟随控制器。如果我正在为椅子编写控制器，我会称它为 ChairController。由于正在控制 UIView，因此将其称为 UIViewController 是否有意义？视图本身只负责显示，但显示什么的逻辑取决于它的控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:17:48.827

来自 Apple 文档 - [http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

> UIViewController 类为所有 iOS 应用程序提供了基本的视图管理模型。

基本上，它是您的视图的容器，并且处理的逻辑不仅仅是您的视图所做的视觉显示。

> 必要时，视图控制器：
> 
> *   调整大小并展示其观点
> *   调整视图的内容
> *   当用户与视图交互时代表视图执行操作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T15:18:11.200

您应该将“*视图控制器*”视为“*控制视图的类*”。

这是一个经典的[模型视图控制器模式（MVC）](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

A`UIViewController`具有类型视图，`UIView`您可以`UIView`根据每个特定控制器的业务对象（模型）对其进行更新。

此外，您的 , 上发生的事件`UIView`将发送回您`UIViewController`以正确处理它们。

# c# - 如何为多个进程共享 SQL Server CE 数据库文件 (.sdf)？

> ID：10212217
> 
> 赞同：2
> 
> 时间：2012-04-18T15:02:37.000
> 
> 标签：c#, .net, exception, sql-server-ce

我在 SQL Server CE 中有一个数据库。将不同计算机的多个应用程序连接到数据库时会引发异常。

这是一个例外：

> 存在文件共享冲突。不同的进程可能正在使用该文件。异常类型是“SqlCeException”。

这是我的连接字符串：

```
Data Source=\\server\ProductionDB\ProductionControl.sdf;File Mode=Read Write; Max Database Size = 4000 
```

SQL Server CE 的版本是 3.5 SP2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T15:28:10.413

我最初误读了您的问题，但我不相信 SQL Server CE 支持来自不同计算机的多个连接。

来自 MS[指南](http://download.microsoft.com/download/A/4/7/A47B7B0E-976D-4F49-B15D-F02ADE638EBE/Compact_Express_Comparison.doc)：

> 当您需要数据服务功能（例如支持多个远程用户的能力）时，您应该从 SQL Server Express Edition 开始并构建数据服务家族树。

您可以从同一台机器拥有多个连接（最多 256 个），但来自多台机器的连接需要 SQL Express Edition。它是免费提供且易于部署的。

这是链接： http: [//www.microsoft.com/sqlserver/en/us/editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/express.aspx)

# cocoa - 基于视图的 NSTableView 中额外标签的文本颜色

> ID：10212218
> 
> 赞同：2
> 
> 时间：2012-04-18T15:02:39.303
> 
> 标签：cocoa, nstableview

在基于视图的 中`NSTableView`，您的自定义行和单元格视图（和的子类`NSTableRowView`）设置`NSTableCellView`了它们的`backgroundStyle`属性，因此您知道背景是浅色还是主要深色（对于选定的突出显示的行）。

这甚至会传递给直接子视图。

现在，表格单元格视图的默认文本标签对此做出了正确反应，因此在深色背景上，文本以合适的浅色绘制。

但是，`NSTextField`添加以提供额外文本（在 Interface Builder 中设置自定义文本颜色）不会自动遵守此约定。

API中是否有一种简单的方法可以让文本字段发挥得很好，还是我必须对其进行子类化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:30:01.150

除了覆盖 drawRect，您还可以这样做：

```
- (void)setBackgroundStyle:(NSBackgroundStyle)backgroundStyle {
    NSColor *textColor = (backgroundStyle == NSBackgroundStyleDark) ? [NSColor windowBackgroundColor] : [NSColor controlShadowColor];
    self.detailTextField.textColor = textColor;
    [super setBackgroundStyle:backgroundStyle];
} 
```

另请参阅：http: [//gentlebytes.com/blog/2011/08/30/view-based-table-views-in-lion-part-1-of-2/](http://gentlebytes.com/blog/2011/08/30/view-based-table-views-in-lion-part-1-of-2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T19:52:47.730

只需子类 NSTableCellView 然后实现 drawRect：

```
- (void)drawRect:(NSRect)dirtyRect
{
    // Drawing code here.
    if (self.backgroundStyle == NSBackgroundStyleDark) {
        [yourTextFieldIVar setTextColor:[NSColor whiteColor]];
    } else if(self.backgroundStyle == NSBackgroundStyleLight) {
        [yourTextFieldIVar setTextColor:[NSColor blackColor]];
    }
} 
```

# php - Magento 客户注册 'Honey Pot' 验证码

> ID：10212222
> 
> 赞同：3
> 
> 时间：2012-04-18T15:02:42.803
> 
> 标签：php, magento

我以为我已经整理好了，但我遇到了障碍。我想在客户注册表单中添加一个“Honey Pot”，对于那些不熟悉这种技术的人来说，这种技术涉及使用 CSS 隐藏文本输入，并假设普通机器人想要填写它。然而，人类不会看到这个字段，所以它需要验证为空。

在 Magento 中，我创建了一个新模块，将以下内容添加到 config.xml：

```
<global>
    <fieldsets>
        <customer_account>
            <honeytrap><create>1</create><update>1</update></honeytrap>
        </customer_account>
    </fieldsets>
    <models>
        <customer>
            <rewrite>
                <customer>MyStore_Honeytrap_Model_Customer</customer>
            </rewrite>
        </customer>
    </models>
</global> 
```

然后，我在 validate 函数中添加了一些额外的内容来检查该字段是否为空。据我所知，这一切都是正确的，但大约`line 278`在从请求中的发布数据`AccountController.php`中`extractData()`丢弃输入字段。我对 Magento 还是很陌生，所以也希望在这里学到一些东西，但是我如何防止该领域被剥夺职位`extractData()`？

我想我只是想知道我错过了什么，我已经在互联网上阅读了一些关于添加自定义字段的帖子，据我所知这应该可以工作，但也许我错过了一些东西，因为我没有包括实体设置，因为我不需要将此字段保存在数据库中，它纯粹是为了验证注册是否来自人（尽可能）。

感谢您的帮助，我确定这可能是我错过的一些荒谬的事情。

**编辑：**感谢@gordon-knoppe 关于使用事件的指针：

```
public function check_trap(Varien_Event_Observer $observer)
{
    $event = $observer->getEvent();
    $post = $event->getControllerAction()->getRequest()->getPost();

    // Check Honeytrap is empty
    if (Zend_Validate::is( trim($post['fname']) , 'NotEmpty')) 
    {
        $customerHelper = Mage::helper('customer');
        $error = $customerHelper->__('A problem has occured with your registration.');
        Mage::getModel('customer/session')->addError($error);

        Mage::app()->getResponse()
            ->setRedirect(Mage::getUrl('customer/account', array('_secure' => true)))
            ->sendResponse();
        exit;
    }
} 
```

有了这个`config.xml`：

```
 <events>
        <controller_action_predispatch_customer_account_createpost>
            <observers>
                <mystore_honeytrap_observer>
                    <type>singleton</type>
                    <class>Mystore_Honeytrap_Model_Observer</class>
                    <method>check_trap</method>
                </mystore_honeytrap_observer>
            </observers>
        </controller_action_predispatch_customer_account_createpost>
    </events> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T22:13:19.323

一种更独立的处理方式可能是在相关控制器操作 () 之前注册一个观察者，`controller_action_predispatch_*`以检测您的表单字段是否已被填充，如果是，则将它们重定向出去以防止本机操作处理请求。

# c - 将命令行参数读入c中的新数组？

> ID：10212223
> 
> 赞同：0
> 
> 时间：2012-04-18T15:02:44.040
> 
> 标签：c, arrays, string, char, command-line-arguments

没有办法知道有多少参数。用户可以提供一个不确定长度的列表。

我对 C 语言非常不好。如何将参数从命令行数组中读取到新的字符串数组中？

坦率地说，我什至不知道如何制作一组单独的字符串，如果我要诚实的话。一个例子会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:09:32.587

就在这里。

如果您查看主函数的完整原型：

```
int main(int argc, char **argv, char **env) 
```

**argc**：这是参数计数器，它包含用户给出的参数数量（假设命令为`cd`，输入`cd home`将给出 argc = 2，因为命令名称始终为参数 0）

**argv ：这是参数值，它是一个大小为***argc*的数组，`char*`指向参数本身。

**env**：这是一个表（作为 argv），其中包含调用程序时的环境（例如，通过 shell，它由`env`命令给出）。

至于**制作一系列*事物*的示例：**两种方法是可能的：

首先，一个固定长度的数组：

```
char tab[4]; // declares a variable "tab" which is an array of 4 chars
tab[0] = 'a'; // Sets the first char of tab to be the letter 'a' 
```

二、变长数组：

```
//You cannot do:
//int x = 4;
//char tab[x];
//Because the compiler cannot create arrays with variable sizes this way
//(If you want more info on this, look for heap and stack memory allocations
//You have to do:
int x = 4; //4 for example
char *tab;
tab = malloc(sizeof(*tab) * x); //or malloc(sizeof(char) * x); but I prefer *tab for
//many reasons, mainly because if you ever change the declaration from "char *tab"
//to "anything *tab", you won't have to peer through your code to change every malloc,
//secondly because you always write something = malloc(sizeof(*something) ...); so you
//have a good habit. 
```

**使用数组：**

无论您选择声明它的任何方式（固定大小或可变大小），您始终以相同的方式使用数组：

```
//Either you refer a specific piece:
tab[x] = y; //with x a number (or a variable containing a value inside your array boundaries; and y a value that can fit inside the type of tab[x] (or a variable of that type)
//Example:
int x = 42;
int tab[4]; // An array of 4 ints
tab[0] = 21; //direct value
tab[1] = x; //from a variable
tab[2] = tab[0]; //read from the array
tab[3] = tab[1] * tab[2]; //calculus...
//OR you can use the fact that array decays to pointers (and if you use a variable-size array, it's already a pointer anyway)
int y = 21;
int *varTab;
varTab = malloc(sizeof(*varTab) * 3); // An array of 3 ints
*varTab = y; //*varTab is equivalent to varTab[0]
varTab[1] = x; //Same as with int tab[4];
*(varTab + 2) = 3; //Equivalent to varTab[2];
//In fact the compiler interprets xxx[yyy] as *(xxx + yyy). 
```

给变量加星号称为取消引用。如果您不知道这是如何工作的，我强烈建议您看一下。

我希望这解释得很好。如果您仍有疑问，请发表评论，我将编辑此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:09:24.427

```
int main ( int argc, char *argv[] ) {

} 
```

这就是您声明主入口函数的方式。 `argc`是用户输入的参数数量，包括程序名称，它是`argv`( `argv[0]`= 程序名称) 中的第一个字符串。

由于 argv 已经是一个字符串数组，我建议你使用它，因为这就是它的用途。（只是不要忘记跳过索引 0）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:09:40.637

```
 int main(int argc, char *argv[]) 
```

这就是你的程序中 main 的样子。 `argc`是传递给程序的参数数量。`argv`是一个字符串列表，它们是传递给程序的参数，argv[0] 是程序名称。

# javascript - JavaScript 中的静态/共享属性和方法

> ID：10212224
> 
> 赞同：0
> 
> 时间：2012-04-18T15:02:46.553
> 
> 标签：javascript, class, static-methods

我试图在 JS 中有一个“类”，它可以跟踪自身实例化了多少个实例。我正试图这样做......

```
var myNamespace = {};

myNamespace.myClass = function () {
    //fails here as .getNetInstanceNo() not recognised...
    var instanceNumber = myNamespace.myClass.getNextInstanceNo();

    return {
        instanceNo : function() { return instanceNumber; }        
    }        
};

myNamespace.myClass.InstanceNo = 0; //static property?

//should the class itself have this method added to it...
myNamespace.myClass.prototype.getNextInstanceNo = function () { //static method?
  return myNamespace.myClass.InstanceNo++;  
};

var class1 = new myNamespace.myClass();

alert('class 1 has instance of ' + class1.instanceNo() ); 
```

但是，由于无法识别该`getNextInstanceNo`功能，因此失败。即使我认为我是通过`myClass.prototype`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:05:34.360

`prototype`是一个对象，其他对象从中继承属性，例如当您创建对象的实例并且该对象没有属性/方法时，调用时，将搜索该对象所属的类的原型属性/方法，这是一个简单的例子：

```
function Animal(){};
Animal.prototype.Breathe = true;

var kitty= new Animal();
kitty.Breathe; // true (the prototype of kitty breathes)

var deadCat = new Animal();
deadCat.Breathe = false;
deadCat.Breathe; // false (the deadCat itself doesn't breath, even though the prototype does have breath 
```

正如您自己所说，您不需要在原型上定义 getNextInstanceNo ，因为这不是在 JavaScript 上定义静态方法的方式，请将其留在类本身上，而不是您可以`instanceNo`在原型上定义方法，方法如下：

```
var myNamespace = {};

myNamespace.myClass = function () {
    this.instanceNumber = myNamespace.myClass.getNextInstanceNo();
};

myNamespace.myClass.prototype.instanceNo = function () {
    return this.instanceNumber;
};

myNamespace.myClass.InstanceNo = 0; 

myNamespace.myClass.getNextInstanceNo = function () { 
    return myNamespace.myClass.InstanceNo++;
};

var class1 = new myNamespace.myClass();

alert('class 1 has instance of ' + class1.instanceNo()); 
```

# php - 如何获得真正的推荐人？

> ID：10212226
> 
> 赞同：0
> 
> 时间：2012-04-18T15:02:54.617
> 
> 标签：php, user-agent, referer

假设我想限制发布请求以仅处理来自我自己域的请求，除了使用 $_SERVER['HTTP_REFERER'] 之外，我如何检查引用者，我读过（[$_SERVER 文档](http://php.net/manual/en/reserved.variables.server.php)）可以不被信任？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:04:36.273

不幸的是，这是不可能的，检查引用者的唯一方法是浏览器是否提供了此信息，显然，可以更改这些信息以使读者受益。

但是，您可以创建一个用户会话或 cookie 来保存变量以显示用户访问过该站点。然后，如果定义了该会话变量，则您只能允许用户查看帖子。

另一种选择是根据用户 IP 地址生成链接，并且只有在他们单击了专门生成的链接时才授予他们访问权限。您可以首先在数据库中保存用户 IP 地址和唯一键，然后您的所有内部链接都可以使用具有唯一 ID 的 GET 变量。如果页面在没有真实 ID 的情况下打开，则您可能会显示错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:06:03.920

如果它来自您自己的域，您可以设置 cookie 或使用会话变量将用户标记为在您的网站上。然后，如果发送了提交并且用户缺少该验证值，您知道您可以拒绝它（或者如果它存在则接受它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:13:59.213

除了[Cameron 的回答](https://stackoverflow.com/a/10212257/4833)：
您还可以使用相同的机制来防止[跨站点请求伪造](https://en.wikipedia.org/wiki/Cross-site_request_forgery)。即不仅设置一个会话变量来指示用户访问过您的站点，而且还向表单添加一个键，该键必须与会话数据中的值匹配。一些框架为此提供支持，例如[Zend_Form_Element_Hash](http://framework.zend.com/manual/en/zend.form.standardElements.html#zend.form.standardElements.hash)

# forms - 从 sfGuardUserAdminForm 取消设置“password_again”

> ID：10212234
> 
> 赞同：0
> 
> 时间：2012-04-18T15:03:18.543
> 
> 标签：forms, symfony-1.4, backend

我试图从后端应用程序的 sfGuardUserAdminForm 中取消设置小部件“password_again”。但没有任何效果。

我尝试不显示在 generator.yml 文件中

```
form:
    class: sfGuardUserAdminForm
    display:
      "User":                   [first_name, last_name, email_address, username]
      "Permissions and groups": [is_active, is_super_admin, groups_list, permissions_list] 
```

但该字段仍然出现在表单中。我尝试在表单上取消设置 configure unset($this['password_again']);

但出现错误 Widget "password_again" 不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:08:22.423

在**/plugins/sfDoctrineGuardPlugin/lib/form/doctrine/base/BasesfGuardUserAdminForm.class.php** 注释下一行

```
//  $this->widgetSchema['password_again'] = new sfWidgetFormInputPassword();
//    $this->validatorSchema['password_again'] = clone $this->validatorSchema['password'];
//
//    $this->widgetSchema->moveField('password_again', 'after', 'password');
//
//    $this->mergePostValidator(new sfValidatorSchemaCompare('password', sfValidatorSchemaCompare::EQUAL, 'password_again', array(), array('invalid' => 'The two passwords must be the same.'))); 
```

在**sfGuardUserAdminForm.class.php**

```
unset($this['password_again']); 
```

并从 generator.yml 中删除它

# javascript - 最初设置要排序的 HTML Column

> ID：10212235
> 
> 赞同：1
> 
> 时间：2012-04-18T15:03:22.447
> 
> 标签：javascript, html, sorting, knockout.js

更新：我还希望升序/降序箭头键适当地出现在单击以显示当前排序顺序的标题旁边。我已经用油漆制作了图像，并确保它们像 12 x 10 像素。

我做了很多搜索，似乎没有下载文件就无法完成。我想使用我目前必须以某种方式最初让我的 HTML 表按从私有服务器动态填充的某个列的值排序的代码。

我正在使用 Knockoutjs 进行所有数据绑定。

当我单击列的标题时，排序工作正常。它目前每隔一次单击将其按升序/降序排列（单击一次：降序，再次单击：升序，再次单击：降序......）。我想用已经使用我已经拥有的代码（如果可能的话）按降序排序的 TimeObserved 信息来填充表格。任何帮助表示赞赏。

请注意：我对这一切都很陌生，我从个人经验中知道，有人可能会要求将其放入 jsfiddle。我不习惯 jsfiddle 并且忙于工作。请理解，我现在没有时间将其转换为那种格式，并且提供的代码应该不仅仅是信息丰富且有条理的阅读和理解。谢谢你。

这是此操作所需的代码片段：

HTML 文件：

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ////////////////////

```
<table border="6" id="widget"><thead>
    <tr>
        <th><a href=#" data-bind="click: SortByTimeObserved">TimeObserved</a></th>
    </tr></thead>

    <tbody data-bind="foreach: rows">
        <td><input data-bind="value: TimeObserved" /></td>
    </tbody>
</table>

<script src="TableViewModel.js" type="text/javascript"></script> 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// /////////////////////

继承人的 javascript 视图模型文件：

==================================================== =================================

```
function Event(TimeObserved){
    var self = this;
    self.TimeObserved = TimeObserved;
}

function TableViewModel(){
    var self = this;
    self.sortColumn = "TimeObserved";
    self.sortAscending = true;

    self.SortByTimeObserved(){
        if(self.sortColumn == "TimeObserved")
            self.sortAscending = !self.sortAscending;
        else{
            self.sortColumn = "TimeObservable";
            self.sortAscending = true;
        }
        self.rows.sort(function(a,b){
            if(self.sortAscending == true)
                for(self.TimeObserved in self.rows)
                    return a.TimeObserved > b.TimeObserved ? -1 : 1;
             else
                 return a.TimeObserved < b.TimeObserved ? -1 : 1;
        });
    }
}

this.Model = new TableViewModel;
ko.applyBindings(this.Model); 
```

==================================================== =================================

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:12:17.630

看看 Ko Grid。我敢打赌它会给你你所需要的：

[https://github.com/ericmbarnard/KoGrid](https://github.com/ericmbarnard/KoGrid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:17:51.723

你不能用一些脚本来初始化它......

```
this.Model = new TableViewModel;
this.Model.sortAscending = false;
this.Model.SortByTimeObserved();
ko.applyBindings(this.Model); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:28:17.727

我解决了。当我使用：

```
function getEvents(){
    $.getJSON("http://.....",
        function (data){
            $.each(data.d, function (i, item){
                handleEvent(item)
            });
        Model.SortByTimeObserved(); // <----This is what solved the problem
        }
    );
 } 
```

`the Model.SortByTimeObservable();`在我用来自服务器的项目填充handleEvent 之后添加，然后`TimeObserved`以正确的顺序订购。不需要文件`this.Model.SortByTimeObserved();`末尾的 ，因为它只会以相反的顺序放置所有内容。`ViewModel.js`

# php - PHP - 如何干燥重复的数据库查询和 html 块？

> ID：10212241
> 
> 赞同：1
> 
> 时间：2012-04-18T15:03:34.363
> 
> 标签：php, dry

我在应用程序的不同位置重复相同的数据库查询和相同的相关 HTML 的情况。

那么干燥这个的通常/最佳实践方法是什么？

包含非常适合这种情况，但是如果我采用它作为 DRYing 的方法，我最终会不会因为包含太多而减慢应用程序的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:07:25.473

我通常使用静态方法制作实用程序类来处理重复块的回显。例如看看我的课程[`social plugins`](https://github.com/nicoladj77/SocialPlugins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:07:32.367

您可以尝试拥有一个用于数据库查询的中央文件，并且只在您需要的地方包含它。同样对于 html 片段。

您可能会发现 MVC 模式在这种情况下很有用（请参阅[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:26:57.523

如果你真的想自己动手——至少是部分地，而不是使用一个完整的框架，你可以混合一些成熟的库并将逻辑与模板分离。

例如，我所做的是使用 Smarty - 一个完善的模板引擎 - 并扩展它的基类来执行廉价查询。

通常你会以这种方式使用 Smarty，将你的逻辑与模板分开：

```
$Smarty = new Smarty();
$Smarty->assign( 'myvariable', array( ... ) ); // usually a database query return
$Smarty->display( 'template.tpl' ); 
```

所以我已经扩展它来做查询：

```
class QSmarty extends Smarty {
    function query( $sql ) {
        $args = func_get_args();
        $sql = array_shift( $args );
        foreach( $args as $k => $v ) $args[$k] = mysql_escape_string( $v );
        $safe_sql = vsprintf( $sql, $args );

        // assuming this will be manageable (paginated or reasonably sized)
        $ret = array();
        $t = mysql_query( $safe_sql );
        while( $r = mysql_fetch_assoc( $t ) ) {
            $ret[] = $r;
        }
        return( $ret );
    }
} 
```

因此，您可以一遍又一遍地懒惰地使用它：

```
$Smarty = new QSmarty();
$Smarty->assign( 'users', $Smarty->query(
    "select * from users where group=%s",
    $_GET['group'] // gets sanitized automatically
));

$Smarty->display( 'users.tpl' ); 
```

模板文件 users.tpl 可能如下所示：

```
<ul>
{foreach $users as $user}
    <li class="{cycle values='odd,even'} {if $user@last}last_user{/if}">
        {$users.id}: {$users.username|lower}
    </li>
{/foreach}
</ul> 
```

由于 Smarty 支持模板继承、自定义模板函数和一系列其他功能，因此您可以将可重用的 HTML 分段到它们自己的单独文件中，并在其他模板中使用诸如 {include users.tpl} 之类的模板标记，如您所见分配和重新分配变量合身。非常干燥。

说实话，是的，这几乎是 Smarty 的推销，展示或强调了它的一些功能。除了查询之外，Smarty 在这里完成了所有繁重的工作。试一试，或者其他模板引擎。

# wpf - WPF-MVVM 将 ViewModel-Property 绑定到嵌套的 UserControl

> ID：10212244
> 
> 赞同：3
> 
> 时间：2012-04-18T15:03:38.833
> 
> 标签：wpf, mvvm, binding, user-controls, dependency-properties

正如标题所说，我想将 ViewModel 中的属性绑定到相应视图中的嵌套 UserControl。我不能让它按我需要的方式工作。

嵌套的 UserControl 只不过是几个小时的 a`DatePicker`和 a `DropDown`。如何告诉`DatePicker`选择 ViewModel 传播的日期作为其选定日期？

我几乎尝试了一切，现在我离跳窗不远了。如您所见，感谢您提供任何帮助；）

现在到到目前为止的代码：DateTimePicker.xaml.cs (CodeBehind)

```
public partial class DateTimePicker
{
    public static DependencyProperty SelectedDateValueProperty = DependencyProperty.Register("SelectedDateValue", typeof (DateTime), typeof (DateTimePicker), new FrameworkPropertyMetadata(default(DateTime), FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, OnPropertyChangedCallback));

    private static void OnPropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs args)
    {
        Debug.WriteLine("Wohoo. I'm here and still debugging...");
    }

    public DateTimePicker()
    {
        InitializeComponent();

        DataContext = this;

        var times = GetTimes();

        Times.ItemsSource = times;
        Times.SelectedItem = times.First();
    }

    public DateTime SelectedDateValue
    {
        get { return (DateTime) GetValue(SelectedDateValueProperty); }
        set { SetValue(SelectedDateValueProperty, value); }
    }
} 
```

嵌套的 UserControl (DateTimePicker.xaml)：

```
<UserControl x:Class="Framework.Controls.DateTimePicker"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         mc:Ignorable="d" 
         d:DesignHeight="30" d:DesignWidth="200"
         DataContext="{Binding RelativeSource={RelativeSource Self}}">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="3*" />
        <ColumnDefinition Width="2*" />
    </Grid.ColumnDefinitions>
    <DatePicker HorizontalAlignment="Left" Name="DatePickerCalendar" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Center" SelectedDate="{Binding SelectedDateValue}" />
    <ComboBox Grid.Column="1" VerticalAlignment="Center" Name="Times" DisplayMemberPath="Name" />
</Grid> 
```

最后但并非最不重要的一点是：具有嵌套 UserControl (View.xaml) 的视图

`<CustomControls:DateTimePicker SelectedDateValue="{Binding LocalRegistrationStartDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />`

希望问题很清楚，任何人都可以帮助我或了解我在这里做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:07:50.310

使用：

```
"{Binding SelectedDateValue}" 
```

告诉 WPF“嘿，检查我`DataContext`的一个名为`SelectedDateValue`”的属性。

你想要的是，`Property`从你的用户控制中获取。

最简单的方法是给您的用户控件起一个名称，例如：

```
<UserControl x:Name="myControl"/> 
```

然后将您的绑定修改为：

```
"{Binding ElementName=myControl, Path=SelectedDateValue}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:20:25.623

实现 WPF 控件的常用方法是使用模板，而不是将控件定义为直接内容，就像您在此处所做的那样。通过使用`Template`，您可以访问[TemplateBinding](http://msdn.microsoft.com/en-us/library/ms742882.aspx)，从而可以轻松绑定控件属性。请参阅[控件自定义](http://msdn.microsoft.com/en-us/library/ms752043.aspx)MSDN 页面。

```
<ControlTemplate TargetType="{x:Type local:DateTimePicker>
  ...
  <DatePicker SelectedDate="{TemplateBinding SelectedDateValue}" />
  ...
</ControlTemplate> 
```

# r - 在运行时更改 R 函数的默认参数

> ID：10212245
> 
> 赞同：13
> 
> 时间：2012-04-18T15:03:40.277
> 
> 标签：r, reflection

是否可以在运行时更改 R 函数中形式参数的默认值？

假设，我们有函数

```
f <- function(x=1) { 
    ...
} 
```

我可以以某种方式将 x 的默认值从 1 更改为 2 吗？

在此先感谢，
斯文

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T15:09:13.623

更新：2020-12-13

> 此方法不再可用

是的，[默认](http://cran.r-project.org/web/packages/Defaults)包允许您这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-10T18:23:28.927

另一种方法（显示在不同的[SO 帖子](https://stackoverflow.com/questions/9895811/can-i-tell-the-r-plyr-package-to-work-in-parallel-by-default/)中）是使用该`formals`功能，例如：

`formals(f) <- 2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-22T14:57:24.873

由于CRAN 不再提供[Defaults包，因此您可以使用](https://cran.r-project.org/web/packages/Defaults/)[default](https://cran.r-project.org/web/packages/default/)。

举个例子：

```
x <- list(a = 1, b = 2, c = 3)
default::default(unlist) <- list(use.names = FALSE)
unlist(x)
#> [1] 1 2 3

unlist <- default::reset_default(unlist)
unlist(x)
#> a b c 
#> 1 2 3 
```

由[reprex 包](http://reprex.tidyverse.org)（v0.2.0.9000）于 2019 年 3 月 22 日创建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-13T18:00:47.863

我尝试为`packagefinder`具有`fp()`指向别名的库执行相同的参数包装`findPackage()`。我尝试了各种方法，包括 using *`formals()`*，但最后，唯一对我有用的是以下 3 个变体：

```
#--------------------------------------
# packagefinder
#--------------------------------------
# fp = findPackage
# Set default to use: 
#   fp(... , display = "console", return.df = TRUE)
#--------------------------------------
fp <- function(...) {
  packagefinder::fp(..., display="console", return.df=TRUE)
}

fp <- function(...) invisible(findPackage(..., display="console", return.df=TRUE))
fp <- function(..., display="console", return.df=TRUE) packagefinder::fp(...,display=display, return.df=return.df) 
```

**我无法**使用的*formals()*方法。

 **```
# Fail-1
formals(fp) <- alist(... = , display="console", return.df=TRUE)

# Fail-2
MY_ARGS <- list(display="console", return.df=TRUE)
formals(fp)[names(MY_ARGS)] <- MY_ARGS 
```

* * *

其他相关帖子：

*   [R：传递函数参数以覆盖内部函数的默认值](https://stackoverflow.com/questions/18602407/r-passing-function-arguments-to-override-defaults-of-inner-functions)
*   [根据项目特定设置函数默认值 R](https://stackoverflow.com/questions/9073912/setting-function-defaults-r-on-a-project-specific-basis)
*   [为范围内的所有调用更改函数的默认参数](https://stackoverflow.com/questions/30416909/change-a-functions-default-argument-for-all-calls-within-a-scope)
*   [https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/formals](https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/formals)**

# php - 将 PHP 生成的 JSON 保存到文本文件

> ID：10212246
> 
> 赞同：2
> 
> 时间：2012-04-18T15:03:40.880
> 
> 标签：php, jquery, mysql, json, text

（这个问题是继我之前修复的问题之后的[（这里）](https://stackoverflow.com/questions/10200782/populating-a-search-input-box-using-php-with-values-from-a-mysql-table/10200967#10200967)

[我发现了与此（此处）](https://stackoverflow.com/questions/8402935/convert-html-output-into-a-plain-text-using-php)类似的问题，但解决方案并不是我想要的。

我目前在我的网站上有一个 JQuery 样式的自动完成搜索引擎，称为[(fcbkcomplete)](http://www.emposha.com/javascript/fcbkcomplete.html)。脚本的原始操作从一个 .txt 文件运行，查找手动输入的值并在自动完成结果中输出它们。但是，我希望脚本从 MYSQL 数据库中获取值，而不是手动输入到 .txt 文件中，因为我最终希望用户可以选择添加自己的值。

因此，我将 Javascript 调用为 .php 文件而不是 .txt，其中包含以下脚本：

```
//connection details

$getData = mysql_query("SELECT Name FROM tblIngredient"); 

 while($info = mysql_fetch_array($getData)) 
 {
     echo "{\"key: value:\";
     echo $info['Name'];
     echo "key: value:\"";
     echo $info['Name'];
     echo "}, ";
 } 
```

此脚本工作并以正确的格式输出数据：

```
{"key": "vodka","value": "vodka"}, {"key": "tequila","value": "tequila"}, 
```

**所以我需要知道如何将这个 JSON 输出转换为 data.txt（这样随着数据库表的增长，脚本运行时 .txt 文件会自动更新）**

这是在我的网站上搜索的最后一步，因此非常感谢任何帮助。

-马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:13:36.297

我真的不能告诉你要保存到这个 txt 文件中的哪一点数据，但我会假设它是这样的：

```
{"key": "vodka","value": "vodka"}, {"key": "tequila","value": "tequila"}, 
```

如果不是，您可以将其替换为您想要的。

我认为您正在寻找的功能是`fopen()`专门使用 'a' 作为第二个参数。

从手册：

> **'a'**只供书写；将文件指针放在文件末尾。如果该文件不存在，请尝试创建它。

这是一个如何使用它的例子（一个非常简短的例子）。

```
$string = '{"key": "vodka","value": "vodka"}, {"key": "tequila","value": "tequila"}';
$fp = fopen('somefile.txt', 'a');
fwrite($fp, $string);
fclose($fp); 
```

这里要考虑的一件事（除其他外）是文件需要适当的写访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:17:44.337

您可以使用[ob_start](http://php.net/manual/en/function.ob-start.php)和[ob_get_contents](http://www.php.net/manual/en/function.ob-get-contents.php)的组合，然后放入带有[file_put_contents的文本文件](http://php.net/manual/en/function.file-put-contents.php)

```
<?php
$getData = mysql_query("SELECT Name FROM tblIngredient");
ob_start();
while($info = mysql_fetch_array($getData))
{
    echo "{\"key: value:\"";
    echo $info['Name'];
    echo "key: value:\"";
    echo $info['Name'];
    echo "}, ";
}
$return = ob_get_contents();
ob_end_clean();

file_put_contents('./data.txt',$return);
?> 
```

或者，如果您实际上想要将其有效的 json 保存到文件中，那么您可以在数组上使用[json_encode](http://php.net/manual/en/function.json-encode.php)

```
<?php
$getData = mysql_query("SELECT Name FROM tblIngredient");

while($info = mysql_fetch_array($getData)){
    $result[]=$info['Name'];
}
file_put_contents('./data.txt',json_encode($result));
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:12:29.463

与其将自动完成功能指向 data.txt，不如将其指向您的 PHP 页面？

```
$("element").fcbkcomplete({
    ...
    json_url: "fetched.php",
    ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:12:26.147

如果我很好理解您基本上想将此输出写入 txt 文件，对吗？在这种情况下，您不应该使用 echo 功能，而是使用 fopen 和 fwrite。看看这个[教程](http://www.tizag.com/phpT/filewrite.php)

# c++ - 从“arma::umat”到“arma::mat”的转换

> ID：10212247
> 
> 赞同：6
> 
> 时间：2012-04-18T15:03:46.740
> 
> 标签：c++, matrix, rcpp, armadillo

```
code <- '
arma::mat M=Rcpp::as<arma::mat>(m);
arma::umat a=trans(M)>M;
arma::mat N=a;
    return Rcpp::wrap(N);
'
coxFunc <- cxxfunction(signature(m="matrix"),
                       code,
                       plugin="RcppArmadillo") 
```

如何在犰狳上从 umat 转换为 mat？

```
file53a97e398eed.cpp:33: error: conversion from ‘arma::umat’ to non-scalar type ‘arma::mat’ requested
make: *** [file53a97e398eed.o] Error 1 
```

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T23:23:29.647

另外两个答案已经暗示不存在直接转换。[在Arma 网站](http://arma.sf.net)上花费一分钟，在此处建议`conv_to<T>::from(var)`您想要的功能：

```
R> code <- '
+   arma::mat  M = Rcpp::as<arma::mat>(m);
+   arma::umat a = trans(M) > M;
+   arma::mat  N = arma::conv_to<arma::mat>::from(a);
+   return Rcpp::wrap(N);
+ '
R> coxFunc <- cxxfunction(signature(m="matrix"),
+                        code,
+                        plugin="RcppArmadillo")
R> coxFunc( matrix(1:9, 3, 3) )
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    1    0    0
[3,]    1    1    0
R> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:39:03.760

Armadillo 不支持从`Mat<uword>`( `umat`) 到`Mat<double>`( `mat`) 的转换，既不使用构造函数也不使用`operator=`

也许您必须编写自己的转换函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:40:28.393

根据这个页面

[http://arma.sourceforge.net/docs.html#Mat](http://arma.sourceforge.net/docs.html#Mat)

a`mat`是 的矩阵，`double`而`umat`是 的矩阵`unsigned int`。似乎它们不能相互转换。

# asp.net-mvc-3 - EditorTemplates 的 MVC3 模型绑定问题

> ID：10212249
> 
> 赞同：2
> 
> 时间：2012-04-18T15:03:51.563
> 
> 标签：asp.net-mvc-3, post, model-binding

尝试将模型绑定到我的视图模型时遇到一些问题。

因此，基本的视图模型是：

```
public class RegistrationVM
{
    public TravelHistoryVM TravelHistory {get;set;}
    public UserDetailVM UserDetails {get;set;}
    public ICollection<HandsetDevicesVM> ExistingDevices {get;set;}
} 
```

3 个其他视图模型的包装器，每个视图模型都包含通常的字符串、整数和布尔值带。暂时忽略 HandsetDevicesVM 的集合。

我有以下视图（为清晰起见示例）

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(false)

    @Html.LabelFor(model => model.TravelHistory.DoNotTravel)
    @Html.CheckBoxFor(model => model.TravelHistory.DoNotTravel)

    @Html.EditorFor(model => model.UserDetails, "UserDetailsHidden")
} 
```

'TravelHistory' 对象绑定良好，没有问题。回发数据时，“UserDetails”对象始终为空。

模板肯定是渲染的，我可以从 HTML 中看出。模板本身如下所示：

```
@model Foo.Bar.UserDetailVM
@Html.HiddenFor(model => model.EmailAddress)
@Html.HiddenFor(model => model.FirstName)
@Html.HiddenFor(model => model.Surname)
@* etc etc *@ 
```

生成的 HTML 是

```
<input data-val="true" data-val-required="The Email Address field is required." id="UserDetails_EmailAddress" name="UserDetails.EmailAddress" type="hidden" value="stack@overflow.com" />
<input data-val="true" data-val-required="The First Name field is required." id="UserDetails_FirstName" name="UserDetails.FirstName" type="hidden" value="Stack" />
<input data-val="true" data-val-required="The Surname field is required." id="UserDetails_Surname" name="UserDetails.Surname" type="hidden" value="Overflow" /> 
```

我在另一个没有问题的视图上使用此 EditorTemplate（它绑定到该视图模型没有问题）。

最后，使用 Fiddler 我可以确定正在发布的信息.. 我认为

```
UserDetails.EmailAddress=stack%40overflow.com.test&UserDetails.FirstName=stack&UserDetails.Surname=overflow 
```

有任何想法吗？我应该将调试工作集中在哪里？

Edit1：刚刚从 ModelState 对象中注意到了这一点

```
AttemptedValue: 'Foo.Bar.UserDetailVM' 
```

所以它似乎试图将字符串值 'Foo.Bar.UserDetailVM' 绑定到对象并且（显然）失败。

编辑2：

```
[HttpPost]
public ActionResult Travel(RegistrationVM model) 
```

根据要求，我要发布的操作

编辑3：

啊。。好吧，回到一个阶段，这是提供视图的操作方法

```
[HttpGet]
public ActionResult Travel(PreRegistrationVM model)
{
    if (TempData["PreRegistrationVM"] != null)
    {
        model = (PreRegistrationVM)TempData["PreRegistrationVM"];
    }
    var newModel = new RegistrationVM(model);
    return View(newModel);
} 
```

这就是我一直在使用的（因此是不起作用的过程的一部分）。本质上，来自先前步骤的信息保存在 TempData 中并在此方法中获取。然后它被用来实例化上面的虚拟机。此时（如果我在此处插入断点），模型将按照我的预期填充数据。

如果我将其修改为以下内容：

```
[HttpGet]
public ActionResult Travel(PreRegistrationVM model)
{
    var newModel = new RegistrationVM 
    {
        FirstName = "Stack",
        Surname = "Overflow"
    };
    return View(newModel);
} 
```

它按预期绑定。TempData 是这里的罪魁祸首吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:24:19.793

快速背景检查：这是在创建“向导”逐步注册过程时遇到的问题。我想避免在注册完成之前将信息保存到数据库中。因此，这个想法是使用 TempData 集合来存储动作之间的信息，并使用 RedirectToAction 一步一步地移动。

对于它的价值，我修改了使用 TempData 这样的方法

```
[HttpGet]
public ActionResult Travel(PreRegistrationVM model)
{
    if (TempData["PreRegistrationVM"] != null)
    {
        model = (PreRegistrationVM)TempData["PreRegistrationVM"];
    }
    var newModel = new RegistrationVM(model);
    return View(newModel);
} 
```

在注册过程的每个步骤中从数据库中检索一次信息。

```
[HttpGet]
public ActionResult Travel(int id)
{
    var model = FooRepository.GetById(id);
    return View(model);
} 
```

我不完全确定为什么 TempData 方法会导致这种情况，对比我提供的理由更博学的人感兴趣。

感谢所有回答的人，帮助我追踪它。

# c++ - 使用分配器类的向量实现

> ID：10212251
> 
> 赞同：0
> 
> 时间：2012-04-18T15:03:58.363
> 
> 标签：c++, vector, implementation, allocator

```
#ifndef VECTOR
#define VECTOR

template<typename T>
struct vector
{
private:
    T *buffer;
    unsigned long sz;
    unsigned long cap;
public:
    typedef T value_type;
    typedef value_type& reference;
    typedef const reference const_reference;
    typedef value_type* pointer;
    typedef const pointer const_pointer;
    typedef T* iterator;
    typedef const T* const_iterator;
    typedef unsigned long size_type;
    typedef ptrdiff_t difference_type;

    vector() : buffer(new int[10]), sz(0), cap(10) {}
    vector(size_t s) : buffer(new int[sz]), sz(s), cap(s){}
    vector(size_t s, const T& initial) : buffer(new int[sz]), sz(s), cap(s) { for(size_t i = 0; i < sz; i++) buffer[i] = initial; }
    template<typename container, typename It>
    vector(typename container::It beg, typename container::It end)
    {
        It iter(beg);
        sz = ptrdiff_t(beg-end);
        cap = sz;

        for(int i = 0; i < sz; i++)
        {
            buffer[i] = iter++;
        }
    }
    ~vector() {delete [] buffer;}

    iterator begin() {return buffer;}
    const_iterator begin() const {return buffer;}

    iterator end()   {return buffer+sz;}
    const_iterator end() const {return buffer+sz;}

    void reserve(size_t newCap)
    {
        if(newCap <= cap) return;
        T *oldBuffer = buffer;

        buffer = new T[newCap];

        for(int i = 0; i < cap; i++)
        {
            buffer[i] = oldBuffer[i];
        }

        cap = newCap;
        delete [] oldBuffer;
    }
    void resize(size_t newSz, const T& initial = T())
    {
        if(newSz > cap)
            reserve((newSz*2+1)%(max_size()+1));
        if(newSz > sz)
        {
            for(int i = sz; i < newSz; i++)
                buffer[i] = initial;
        }
        sz = newSz;
    }
    size_t size() const {return sz;}
    size_t capacity() const {return cap;}
    bool empty() const {return sz == 0;}
    size_t max_size() const {return 1073741823;}
    void push_back(T toP)
    {
        if(sz >= cap)
            reserve((cap*2+1)%(max_size()+1));
        buffer[sz++] = toP;
    }
    T pop_back()
    {
        T ret = buffer[sz-1];
        buffer[sz-1] = T();
        sz--;
        return ret;
    }
    reference front() { return buffer[0]; }
    const_reference front() const { return buffer[0]; }

    reference back() { return buffer[sz-1]; }
    const_reference back() const { return buffer[sz-1]; }

    T& operator[](size_t index) {if(index >= sz) throw std::out_of_range("out_of_rane"); return buffer[index]; }
    const T& operator[] (size_t index) const {if(index >= sz) throw std::out_of_range("out_of_rane"); return buffer[index];}

    T& at(size_t index) { return (*this)[index]; }
    const T& at(size_t index) const { return (*this)[index]; }  
};

#endif 
```

这是向量类的一个实现。它使用类型为 T 的动态数组，该数组随着函数 reserve() 而变大。如果我使用分配器类来实现它会怎么样？（整个向量类，而不仅仅是保留函数）

```
 template<class T, class Allocator = allocator<T> > 
```

这是文件 stl_vector.h 上的样子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:08:32.127

STL 的默认分配器有效地调用新操作符来完成它的工作。所以我认为这不会有太大变化。但是，通过查看代码永远无法充分回答性能问题。相反，您应该实现这两个版本并使用一些典型的测试数据进行测量。

# iphone - 使用带有 AVRURLAsset 的相机胶卷中保存的视频 - initWithURL - iPhone

> ID：10212252
> 
> 赞同：0
> 
> 时间：2012-04-18T15:04:02.267
> 
> 标签：iphone, objective-c, xcode, video

我有以下代码保存从相机胶卷中选择的 UIImage 或视频。

```
NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

[self dismissModalViewControllerAnimated:YES];

if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
    introImage = [info objectForKey:UIImagePickerControllerOriginalImage];

    //Unhide our UIImage Preview and insert our chosen Video or Intro.
    selectIntroButton.hidden = YES;
    selectedIntro.hidden = NO;
    cancelIntroChoiceButton.hidden = NO;
    selectedIntro.image = introImage;
}
else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
{

    //Create variable for video.

    AVURLAsset *asset=[[AVURLAsset alloc] initWithURL:??? options:nil];
    AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
    generator.appliesPreferredTrackTransform=TRUE;
    [asset release];
    CMTime thumbTime = CMTimeMakeWithSeconds(0,30); 
```

我的问题是如何将所选视频输入 AVURLAssset initWithURL ？[info objectForKey:UIImagePickerControllerOriginalImage] 返回什么类型的对象？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:23:12.377

`UIImagePickerControllerReferenceURL`您可以使用密钥获取资产的 URL 。

`[[AVURLAsset alloc] initWithURL:[info objectForKey:UIImagePickerControllerReferenceURL]]`

# actionscript-3 - 禁用切换时，按钮栏选择问题？

> ID：10212253
> 
> 赞同：0
> 
> 时间：2012-04-18T15:04:20.593
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5, buttonbar

我已禁用按钮栏中的切换。这很好用。但是，之前选择的按钮栏仍然处于选中状态。

这是代码：

```
if(event.newIndex == -1) {

ButtonBarButton(event.target.dataGroup.getElementAt(event.oldIndex)).selected = true;
} 
```

这是重现问题的步骤

1) 单击按钮栏中的任意按钮

2）点击的按钮变得突出

3）再次点击相同的按钮，它会变得突出

4）现在，您单击其他按钮，上一个按钮和新选择的按钮都将突出显示

请指教，

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:56:35.380

您到底想做什么以及如何禁用按钮栏中的切换？我冒昧地猜测，您为禁用切换（没有看到本地属性）所做的一切都会让您陷入困境。尝试这个：

```
for(var i:int = 0; i < event.target.parent.numElements; i++)
{
    event.target.parent.getElementAt(i).selected == false
}
event.target.enabled == true; 
```

这应该会单击按钮的父级（按钮栏）并确保未启用其所有子级（按钮）。然后返回并启用用户首先单击的目标。

# android - 用于 Android 远程调试的 Google Chrome -“localhost:9222”不可用

> ID：10212256
> 
> 赞同：30
> 
> 时间：2012-04-18T15:04:35.307
> 
> 标签：android, google-chrome, remote-debugging, google-chrome-devtools

我正在按照启用远程调试的步骤（[https://developers.google.com/chrome/mobile/docs/debugging](https://developers.google.com/chrome/mobile/docs/debugging)）。当我到达第 4 步时，桌面版 Chrome 会返回“此网页不可用”。

“启用 USB Web 调试”在 Chrome for Android 中被选中。

我的设备（根 Nexus S、CM9）上启用了“USB 调试”。

“adb devices”命令返回“*设备号*设备”。

“adb forward...”命令返回： * daemon not running。现在在端口 5037 上启动它 * * 守护进程已成功启动 *

我在 Windows 7 上运行最新的 ADB，以管理员身份运行 cmd。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-27T03:50:49.790

我发现我必须在 Chrome 和我的设备上启用 USB 调试。

1.  Chrome for Mobile - 设置 > 开发者工具 > [x] 启用 USB Web 调试
2.  设备 - 设置 > 开发者选项 > [x] USB 调试
3.  将设备连接到计算机
4.  在计算机上启用端口转发

    C:\adb forward tcp:9222 localabstract:chrome_devtools_remote

5.  转到`http://localhost:9222`计算机版 Chrome

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T14:11:10.313

您能否提供您正在使用的 Android 上的 Chrome 版本？打开“about:version”网址，请提供“Google Chrome”和“应用程序”字段的值。

您能否检查以下内容 - 打开 USB Web 调试（文档的第 2 步）后，此命令序列输出给您的内容：

```
adb root
adb shell cat /proc/net/unix | grep chrome_devtools_remote 
```

（思路是检查，打开USB Web调试后，设备上是否打开了远程调试插口）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T12:03:57.767

你有没有改变你的本地主机？如果是这样，请尝试**127.0.0.1:9222**而不是**localhost:9222**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T19:13:01.637

我有两个非常愚蠢的问题阻止我正确地做到这一点，也许我的经验会有所帮助。

1：YouTube 频道上投票最多的评论中的“adb forward...”解释了如何做到这一点，其中包含一些奇怪的字符（[https://www.youtube.com/watch?feature=player_embedded&v=s4zpL4VBbuU](https://www.youtube.com/watch?feature=player_embedded&v=s4zpL4VBbuU)） . 如果像我一样，直接粘贴到cmd中，没有仔细检查，服务器启动时不会报错，但服务无法正常工作。确保您将此行与您的 adb 路径一起使用

```
adb forward tcp:9222 localabstract:chrome_devtools_remote 
```

2：ESET NOD32 Antivirus 有个叫 HIPS（Host-Based Intrusion Prevention System）的东西，它不喜欢你乱搞`localhost:####`

[http://kb.eset.com/esetkb/index?page=content&id=SOLN2950](http://kb.eset.com/esetkb/index?page=content&id=SOLN2950)

也许您的防病毒软件有类似的东西可以停用？

希望这可以帮助某人^_^

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-18T15:03:59.493

You no longer need to fuss with adb, downloads or command lines. With Chrome v41 (canary), I just plugged in the phone, pointed the browser to chrome://inspect, then hit the "inspect" link below my device, and the debug window opened and worked. (Enable USB debugging in the developer options on the phone)

I add that this worked first time, whereas my efforts with Chrome v39 plus the platform tools sdk, adb and the rest, had still not given fruit after 6 hours or so.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T19:11:25.610

远程调试功能需要进行小检查。USB 调试功能应该被关闭，并且`USB Debugging`应该只检查下 chrome (android) 设置的选项。

此外，运行 adb forward 命令两次（带有特定参数的完整命令）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-26T07:05:55.810

尝试在您的手机中下载适用于 Android 的 Chrome 浏览器。然后在您的桌面中再次导航到 localhost:9222 Android 远程调试仅适用于移动 Chrome 浏览器。一些用户认为原生 Android 浏览器是 Chrome，但事实并非如此。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-05T09:51:11.927

C:\adb forward tcp:9222 localabstract:chrome_devtools_remote

helped me to find the cause on my system. It was having multiple devices connected. After removing all the devices, and connected only one required device resolved the issue.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-07T09:59:57.287

I found a solution to this problem. I've been looking for one last day same command in the tutorial

[https://developer.chrome.com/devtools/docs/contributing-legacy](https://developer.chrome.com/devtools/docs/contributing-legacy)

"C:\Users\%username%\AppData\Local\Google\Chrome SxS\Application\chrome.exe" --remote-debugging-port=9222 --no-first-run --user-data-dir=C :\Users\%username%\chrome-dev-profile [http://localhost:11002#http://localhost:8000/front_end/inspector.html](http://localhost:11002#http://localhost:8000/front_end/inspector.html)

然后我可以在浏览器上使用 localhost:9222 。

现在我想评论帮助某人的答案。

# c# - 如何使用 app.config 文件中的 NetTcpRelaySecurity 元素？

> ID：10212261
> 
> 赞同：0
> 
> 时间：2012-04-18T15:04:45.330
> 
> 标签：c#, wcf, azure, servicebus

我正在尝试使用 Azure 服务总线中继向公司网络之外的用户公开 WCF 服务。

我在某种程度上成功了，但为了证明通信正常，我不得不删除在 WCF 服务上实现的所有自定义用户名和密码身份验证。

我一直在谷歌搜索和阅读该主题一段时间，并相信 NetTcpRelaySecurity 模式是我需要进行更改的地方 - 从传输到 TransportWithMessageCredential（因为这是客户端和服务在网络中使用的）

那么，如何在配置文件中更改此设置？到目前为止我找不到任何例子。

另外，我是否以正确的方式进行此操作？我可以通过服务总线将用户名和密码客户端凭据从外部客户端应用程序传递到 WCF 服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:14:15.683

你是对的，那里没有很多示例配置。您可以尝试以下配置。

[NetTcpRelayBindingConstructor](http://msdn.microsoft.com/en-us/library/windowsazure/dd628077.aspx) NetTcpRelayBinding 构造函数（EndToEndSecurityMode，RelayClientAuthenticationType）

[EndToEndSecurityMode](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.endtoendsecuritymode.aspx) 具有以下枚举。

```
 Member name    Description
 None       Security is disabled.
 Transport  Security is provided using a transport security, typically SSL.
 Message        Security is provided using SOAP message security.
 TransportWithMessageCredential     A secure transport (for example, HTTPS) provides integrity, confidentiality, and authentication while SOAP message security provides client authentication. 
```

[RelayClientAuthentication](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.relayclientauthenticationtype.aspx)具有以下枚举。

```
 Member name         Description
    RelayAccessToken    If specified by a listener, the client is required to provide a security token. 
    None                If specified by a listener, the client will not be required to provide a security token. This represents an opt-out mechanism with which listeners can waive the Access Control protection on the endpoint. 
```

我见过的最接近的配置示例是 -
[http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.nettcprelaybinding.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.nettcprelaybinding.aspx)

```
<bindings>
    <!-- Application Binding -->
    <netTcpRelayBinding>
      <binding name="customBinding">
        <!-- Turn off client authentication -->
        <security relayClientAuthenticationType="None" />
    </netTcpRelayBinding>
  </bindings> 
```

这是您可以使用的示例：

```
<bindings>
    <!-- Application Binding -->
    <netTcpRelayBinding>
      <binding name="customBinding">
        <!-- Turn off client authentication -->
        <security endToEndSecurityMode=”TransportWithMessageCredential”  relayClientAuthenticationType="None" />
    </netTcpRelayBinding>
  </bindings> 
```

但是，您必须确保在 machine.config 或应用程序配置文件中添加了服务总线绑定扩展元素才能使用它。如果没有，在任何情况下，Visual Studio 都会为您抛出错误。

从客户端到服务的端到端安全性不是特定于服务总线的，而只是标准 WCF。SB 唯一需要的是下面的 relayClientAuthenticationType。

```
<security mode=""  relayClientAuthenticationType="RelayAccessToken"> 
```

nettcprelaybinding 的安全设置应该类似于 nettcpbinding。您可以使用 nettcpbinding 示例作为起点。

# javascript - 原生 JavaScript 中的 MVC

> ID：10212265
> 
> 赞同：7
> 
> 时间：2012-04-18T15:05:05.683
> 
> 标签：javascript, model-view-controller

我现在正处于我真的想以一种使其更具可扩展性和可管理性的方式组织我的代码的地步。我想在不使用框架的情况下更好地理解 javascript 中的 MVC 架构。

所以这是我迄今为止所理解的（如果我错了，请纠正我）：

**模型**：网站/网络应用程序内容（图片、副本、可下载内容等）的有组织结构，还具有操作内容所需的逻辑。因此在 javascript 中，模型可以是 JSON 对象或对检索/更新数据库的 php 文件的调用，并且模型的逻辑可以是负责解析、正则表达式和组织内容的函数，然后可以将其交给去看风景？

**视图**：用户界面和模型数据/内容的可视化表示。它唯一的工作是显示内容并接受用户输入（如果适用）？

**控制器**：那么控制器唯一的工作就是充当模型和视图之间的中介吗？例如，如果视图需要数据，它会询问控制器，然后控制器会去模型获取数据，然后将其发送回视图吗？如果有任何用户输入，视图会将其发送到控制器，然后控制器将其发送到模型，然后模型会更新，此时控制器会通知视图模型已更新？

MVC 对我来说一直是并且仍然是一个困惑点，再加上它已经声明 MVC 在 javascript 中不是一个自然而然的东西（至少不像 php、java、actionscript 等......）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T15:14:48.790

第一个事实是 View 和 Controller - 在大多数情况下 - 非常接近。有时甚至是一样的。这不一定是坏事。如果你有一个表，选择一行，然后单击一个按钮，该按钮将更改所选行中的数据，该按钮显然将成为 View（您看到数据）**和**Controller（您更改数据）的一部分。有更好的例子，我敢肯定......

第二个事实是，您会发现几乎与人一样多的关于 MVC 的意见；）

但就个人而言，我建议您不要盲目地遵循某些设计模式。MVC 是设计代码的良好起点，但最终，您的代码需要快速、稳定和可维护。而且，您（和您的团队）必须对代码感到满意。如果您最终得到遵循 MVC 模式的代码，那很好。如果没有，也可以。至少这是我对此的看法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T15:11:21.810

看代码一直是我学习的最佳方式，所以我想我会分享这些。

**[TODO mvc 比较许多不同的 JS MV* 框架](http://todomvc.com/)**

上面的链接比较了所有 JS mv* 框架。这个演示应该让你特别感兴趣，

**[Vanilla JS Todo mv* 实现](http://todomvc.com/vanilla-examples/vanillajs/)**

**[来源](https://github.com/tastejs/todomvc/tree/gh-pages/vanilla-examples/vanillajs)**

从它的声音你了解 MVC 是什么，只是对如何在 JS 中实现它感到困惑，只需查看许多不同的框架（[ember.js](http://emberjs.com/)、[backbone.js](http://documentcloud.github.com/backbone/)等）及其来源即可在上面。待办事项列表是一个很好的起点。

# codeigniter - 如何在codeiginter框架的php中包含页脚

> ID：10212266
> 
> 赞同：0
> 
> 时间：2012-04-18T15:05:08.560
> 
> 标签：codeigniter, include

我认为这是一项简单的任务，但是由于我所做的事情而出现了一些错误。**我在视图**中写了两个简单的页面；1- 页眉 + 正文 2- 页脚。然后我简单地将以下代码添加到控制器的主文件中：

```
$this->load->view('footer.php');
$this->load->view('main.php'); 
```

在 main.php (header+body) 中，我添加了一个 php 行来包含如下页脚：

```
<?php include("footer.php"); ?> 
```

但是错误仍然出现......

错误信息是这样的：

```
A PHP Error was encountered

Severity: Warning

Message: include(footer.php) [function.include]: failed to open stream: No such file or directory 
```

知道如何解决这个问题吗？

感谢所有评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:09:49.357

该错误可能是因为您的视图中的包含应该指向您的视图文件夹中的footer.php，例如/applications/views/footer.php。

但是，包含这样的视图并不是正确的方法。在您的控制器中，您可以按顺序输出多个视图，所以这应该是您所需要的：

```
$this->load->view('main');
$this->load->view('footer'); 
```

注意缺少扩展名，您只需要传递文件名。这将一个接一个地加载和渲染视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:10:45.313

你必须阅读文档...

将所有 HTML 页面放入 /application/views/ 目录，然后通过以下方式包含它们：

```
$this->load->view('footer'); 
```

请注意，我们没有指定 .php 文件扩展名。

# node.js - 如何在 express/node 中访问路由处理程序之外的 req/res

> ID：10212268
> 
> 赞同：0
> 
> 时间：2012-04-18T15:05:12.897
> 
> 标签：node.js, coffeescript, routes

非常简单，我将我的 express/node 应用程序中的路由映射到另一个模块中的方法。完成后，将分派一个事件。一切都很好，但是我如何在我的“on_products”事件处理程序中获得资源？

这是一般的想法：

```
Routes = (app) ->

  eventbus.on 'on_products', -> res.send 'some products' #how do i get at res here?

  app.get '/products', (req,res) ->  getProducts() 

module.exports = Routes 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:37:36.573

您可以在触发事件时传递参数：

```
eventbus.emit 'on_products', res 
```

并在事件处理程序中使用它：

```
eventbus.on 'on_products', (res) ->
  res.send 'some products' 
```

# winforms - 如何从选定的主记录中读取详细信息表？

> ID：10212269
> 
> 赞同：1
> 
> 时间：2012-04-18T15:05:14.520
> 
> 标签：winforms, data-binding, master-detail

我在具有两个表的数据集上有一个绑定源，一个包含大量记录的主数据和一个仅包含所选主记录的详细信息的详细信息。

更改主表中当前记录的位置应触发将明细表中的数据替换为新明细的请求。

但是，我不确定如何继续执行此计划。

我应该监控主表中记录的选择，获取相应主记录的明细数据并替换明细表中的所有数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:14:41.187

将主表上的 SelectionMode 设置为 RowSelect，然后处理 SelectionChanged 事件。在该事件中，只需清除绑定到明细表的明细对象的 BindingList，并根据选择的主条目使用新的明细条目重新填充明细列表。

# python - 删除重复的 python 安装后，Python 要求 Mac 上的旧路径

> ID：10212270
> 
> 赞同：11
> 
> 时间：2012-04-18T15:05:14.700
> 
> 标签：python, macos, python-2.7, virtualenv

通过 brew install python 全新安装 python 后，我遇到以下错误。该链接属于我手动删除的以前的 python 安装。

```
$ virtualenv ENV
python: posix_spawn: /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python: No such file or directory 
```

我使用的是 MacOS 10.7.3，并通过 pip 安装了 virtualenv：

```
$ sudo /usr/local/share/python/pip install virtualenv
 Downloading/unpacking virtualenv
 Downloading virtualenv-1.7.1.2.tar.gz (2.1Mb): 2.1Mb downloaded
 Running setup.py egg_info for package virtualenv

 warning: no previously-included files matching '*.*' found under directory 'docs/_templates'
 Installing collected packages: virtualenv
 Running setup.py install for virtualenv

 warning: no previously-included files matching '*.*' found under directory 'docs/_templates'
 Installing virtualenv script to /usr/local/share/python
 Successfully installed virtualenv
 Cleaning up...
$ virtualenv ENV
 python: posix_spawn: /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python: No such file or directory 
```

我怎样才能解决这个问题？

编辑：我重新安装了 MacOSx，现在又回到了我之前的状态，这让我删除了预安装的 python。

```
$ which python 
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
$ which pip /usr/local/bin/pip $ sudo pip install virtualenv
Downloading/unpacking virtualenv 
Downloading virtualenv-1.7.1.2.tar.gz (2.1Mb): 2.1Mb downloaded
Running setup.py egg_info for package virtualenv

warning: no previously-included files matching '*.*' found under directory 'docs/_templates'
Installing collected packages: virtualenv
Running setup.py install for virtualenv

warning: no previously-included files matching '*.*' found under directory 'docs/_templates'
Installing virtualenv script to /usr/local/bin
Successfully installed virtualenv
Cleaning up...

$ python virtualenv.py ENV
/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/‌​MacOS/Python: can't open file 'virtualenv.py': [Errno 2] No such file or directory 
```

virtualenv.py 位于 /Library/Python/2.7/site-packages/virtualenv.py 和 /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/py2app/recipes/virtualenv.py但不知何故，python 错过了所有。

为什么会有这么多混乱？我应该如何着手解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-07T09:10:14.453

`/System/Library/Frameworks/Python.framework/` 在完成了删除整个导致错误的愚蠢事情后，我遇到了同样的情况：

`python: posix_spawn: /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python: No such file or directory`

我设法恢复了它，因为我有整个磁盘的早期副本，并且只需将整个 Python.framework 目录复制粘贴回来。

我不知道它在多大程度上依赖于系统，但如果有人想尝试以同样的方式而不是重新安装整个 OS X，那么从我那里压缩的整个 Python.framework 就在这里：[http ://andilabs.com/ Python.framework.zip](http://andilabs.com/Python.framework.zip)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T16:24:09.697

看起来您已经删除了作为 OS X 10.7 一部分的 Apple 提供的 Python 2.7。这是一件坏事。您可能无意中损坏了依赖它的 OS X 部分。一般来说，永远不要删除`/usr`（除了`/usr/local`）或中的任何内容`/System/Library`。如果你安装了更新版本的东西，通过 $PATH 来管理它，而不是通过删除。最好的长期做法是重新安装已删除的内容；最安全的方法是重新安装 OS X。临时的解决方法*可能*是移开`/usr/bin/python`并用链接替换它，`/usr/local/bin/python2.7`但您确实应该撤消对系统的损坏。

更新：现在您已经恢复了系统 Python（很好！），我们可以解决您的原始问题。如果没有更多信息，我只能推测，但很可能您正在安装 `virtualenv`到错误的 Python 实例。请记住，您需要安装提供命令的副本`Distribute`（或其前身`setuptools`），并在您要使用的每个 Python 实例中安装`easy_install`一个单独的副本。`pip`如果您使用`easy_install`Apple 随附的 OS X，您将安装到 Apple 系统 Python。`brew`您在评论中提到使用。如果是这样，您应该按照[说明和食谱进行操作](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python)；这就是为什么你有一个包管理器。但这是从头开始安装所有内容的方法：

```
$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python
$ curl -O http://python-distribute.org/distribute_setup.py
$ python distribute_setup.py
[...]
creating /Library/Frameworks/Python.framework/Versions/2.7.3_release_10.6/lib/python2.7/site-packages/distribute-0.6.26-py2.7.egg
Extracting distribute-0.6.26-py2.7.egg to /Library/Frameworks/Python.framework/Versions/2.7.3_release_10.6/lib/python2.7/site-packages
Adding distribute 0.6.26 to easy-install.pth file
Installing easy_install script to /Library/Frameworks/Python.framework/Versions/2.7/bin
Installing easy_install-2.7 script to /Library/Frameworks/Python.framework/Versions/2.7/bin

Installed /Library/Frameworks/Python.framework/Versions/2.7.3_release_10.6/lib/python2.7/site-packages/distribute-0.6.26-py2.7.egg
Processing dependencies for distribute==0.6.26
Finished processing dependencies for distribute==0.6.26
After install bootstrap.
Creating /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info
Creating /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools.pth
$ curl -O https://raw.github.com/pypa/pip/master/contrib/get-pip.py
$ python get-pip.py
$ which pip
/Library/Frameworks/Python.framework/Versions/2.7/bin/pip
$ pip install virtualenv
[...]
    Installing virtualenv script to /Library/Frameworks/Python.framework/Versions/2.7/bin
Successfully installed virtualenv
Cleaning up...
$ which virtualenv
/Library/Frameworks/Python.framework/Versions/2.7/bin/virtualenv
$ virtualenv ENV
New python executable in ENV/bin/python
Installing setuptools............done.
Installing pip...............done.
$ source ENV/bin/activate
(ENV)$ which python
/Users/nad/ENV/bin/python
(ENV)$ 
```

# spring - 使用 Atomikos 的两阶段提交 (2PC) 配置

> ID：10212274
> 
> 赞同：3
> 
> 时间：2012-04-18T15:05:23.477
> 
> 标签：spring, jta, atomikos, 2phase-commit

我正在创建一个示例应用程序来测试两阶段提交 (2PC)。我从互联网上获取了这里使用的代码位。我使用 Spring、Hibernate 和 Atomikos 以及 MySQL 作为后端。我正在使用两个数据库并故意对第二个数据库的调用无法检查第一个数据库调用是否回滚。可悲的是，它似乎不起作用。有人可以指出一些带有一些示例代码的链接吗？

以下是我的配置：
Hibernate 会话工厂：

```
<bean id="sessionFactory1" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource">
        <ref bean="dataSource1"/>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.connection.isolation">3</prop>    
            <prop key="hibernate.current_session_context_class">jta</prop>    
            <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</prop>    
            <prop key="hibernate.transaction.manager_lookup_class">com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup</prop> 
            <prop key="hibernate.connection.release_mode">on_close</prop>
        </props>
    </property>

    <property name="mappingResources">
        <list>
            <value>/hibernate/Stock.hbm.xml</value>
        </list>
    </property>
</bean>

<bean id="sessionFactory2" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource">
        <ref bean="dataSource2"/>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.connection.isolation">3</prop>    
            <prop key="hibernate.current_session_context_class">jta</prop>    
            <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</prop>    
            <prop key="hibernate.transaction.manager_lookup_class">com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup</prop> 
            <prop key="hibernate.connection.release_mode">on_close</prop>
        </props>
    </property>

    <property name="mappingResources">
        <list>
            <value>/hibernate/Stock1.hbm.xml</value>
        </list>
    </property>
</bean> 
```

数据源配置：

```
<bean id="dataSource1" class="com.atomikos.jdbc.AtomikosDataSourceBean" init-method="init" destroy-method="close">        
    <!-- set an arbitrary but unique name for the datasource -->       
    <property name="uniqueResourceName"><value>XADBMS1</value></property>        
    <!-- set the underlying driver class to use, in this example case we use MySql  -->       
    <property name="xaDataSourceClassName">          
        <value>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</value>       
    </property>       
    <property name="xaProperties">           
    <!--   set the driver-specific XADataSource properties  (check your driver docs for more info)           -->                 
        <props>                         
            <prop key="user">${jdbc.username}</prop>                         
            <prop key="password">${jdbc.password}</prop>                         
            <prop key="URL" >${jdbc.url1}</prop>                 
        </props>      
    </property>           
    <!-- how many connections in the pool? -->       
    <property name="poolSize" value="3"/>    
</bean>

<bean id="dataSource2" class="com.atomikos.jdbc.AtomikosDataSourceBean" init-method="init" destroy-method="close">        
    <!-- set an arbitrary but unique name for the datasource -->       
    <property name="uniqueResourceName"><value>XADBMS2</value></property>        
    <!-- set the underlying driver class to use, in this example case we use MySql  -->       
    <property name="xaDataSourceClassName">          
        <value>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</value>       
    </property>       
    <property name="xaProperties">           
    <!--   set the driver-specific XADataSource properties  (check your driver docs for more info)           -->                 
        <props>                         
            <prop key="user">${jdbc.username}</prop>                         
            <prop key="password">${jdbc.password}</prop>                         
            <prop key="URL" >${jdbc.url2}</prop>                 
        </props>      
    </property>           
    <!-- how many connections in the pool? -->       
    <property name="poolSize" value="3"/>    
</bean> 
```

Spring JTA 配置：

```
 <bean id="AtomikosTransactionManager" class="com.atomikos.icatch.jta.UserTransactionManager" init-method="init" destroy-method="close">     
<!-- when close is called, should we force transactions to terminate or not?     -->   
   <property name="forceShutdown" value="false" /> 
</bean>  
<!--Also use Atomikos UserTransactionImp, needed to configure Spring   --> 
<bean id="AtomikosUserTransaction" class="com.atomikos.icatch.jta.UserTransactionImp">     
    <property name="transactionTimeout" value="300" /> 
</bean>

<!--Configure the Spring framework to use JTA transactions from Atomikos  --> 
<bean id="JtaTransactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">    
    <property name="transactionManager" ref="AtomikosTransactionManager" />    
    <property name="userTransaction" ref="AtomikosUserTransaction" /> 
</bean> 
```

我有两个 DAOImpl，我将上面定义的两个 sessionFactories 注入其中。以下是来自 Java 代码的调用：

```
public static void main( String[] args )
{
    ApplicationContext appContext = 
            new ClassPathXmlApplicationContext("spring/config/appContext.xml");

    StockBo stockBo = (StockBo)appContext.getBean("stockBo1");
    StockBo stockBo2 = (StockBo)appContext.getBean("stockBo2");

    /** insert **/
    Stock stock = new Stock();
    stock.setStockCode("7668");
    stock.setStockName("HAIO");
    stockBo.save(stock);

    Stock stock1 = new Stock();
    //stock1.setStockCode("1668"); **Commented to fail the second db insert**
    stock1.setStockName("AAIO");
    stockBo2.save(stock1);
} 
```

任何指针都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:40:12.513

要获得您期望的行为，您需要在同一事务中执行 DAO 调用，例如，如下所示：

```
final StockBo stockBo = (StockBo)appContext.getBean("stockBo1");
final StockBo stockBo2 = (StockBo)appContext.getBean("stockBo2");
TransactionTemplate tx = new TransactionTemplate(appContext.getBean(PlatformTransactionManager.class);

tx.execute(new TransactionCallback<Void>() {
    public Void doInTransaction(TransactionStatus ts) {
        /** insert **/
        Stock stock = new Stock();
        stock.setStockCode("7668");
        stock.setStockName("HAIO");
        stockBo.save(stock);

        Stock stock1 = new Stock();
        //stock1.setStockCode("1668"); **Commented to fail the second db insert**
        stock1.setStockName("AAIO");
        stockBo2.save(stock1);

       return null;
    }
}); 
```

另外，我认为您不需要以下几行，因为您使用 Spring 配置了 Hibernate：

```
<prop key="hibernate.current_session_context_class">jta</prop>
<prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</prop> 
<prop key="hibernate.transaction.manager_lookup_class">com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup</prop>
<prop key="hibernate.connection.release_mode">on_close</prop> 
```

**也可以看看：**

*   [10\. 交易管理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)

# r - 在 R 中优化复杂的 data.table 聚合

> ID：10212275
> 
> 赞同：3
> 
> 时间：2012-04-18T15:05:28.843
> 
> 标签：r, optimization, data.table

继[如何优化大型 R 数据框中每一行的过滤和计数](https://stackoverflow.com/questions/10196822/how-to-optimise-filtering-and-counting-for-every-row-in-a-large-r-data-frame/)

我有一个`data.table`如下：

```
 name day wages hour colour
1  Ann   1   100    6  Green
2  Ann   1   150   18   Blue
3  Ann   2   200   10   Blue
4  Ann   3   150   10  Green
5  Bob   1   100   11    Red
6  Bob   1   200   17    Red
7  Bob   1   150   20  Green
8  Bob   2   100   11    Red 
```

我想知道，对于每个唯一的名称/日期对，对于四个时间段之一，一些*事实*。我关心的时间段是：

```
t1 (hour < 9) 
t2 (hour < 17) 
t3 (hour > 9) 
t4 (hour > 17) 
```

一些事实示例可能是：

```
wages > 175
colour = "Green" 
```

我可以使用以下`data.table`过滤器完成此操作

```
setkey(dt,name,day)
result <- dt[,list(wages.t1=sum(wages>175&hour<9),
     wages.t2=sum(wages>175&hour<17),
     wages.t3=sum(wages>175&hour>9),
     wages.t4=sum(wages>175&hour>17),
     green.t1=sum(colour=="Green"&hour<9),
     green.t2=sum(colour=="Green"&hour<17),
     green.t3=sum(colour=="Green"&hour>9),
     green.t4=sum(colour=="Green"&hour>17)), 
```

列表（姓名，日期）]

给我

```
 name day wages.t1 wages.t2 wages.t3 wages.t4 green.t1 green.t2 green.t3 green.t4
[1,]  Ann   1        0        0        0        0        1        1        0        0
[2,]  Ann   2        0        1        1        0        0        0        0        0
[3,]  Ann   3        0        0        0        0        0        1        1        0
[4,]  Bob   1        0        0        1        0        0        0        1        1
[5,]  Bob   2        0        0        0        0        0        0        0        0 
```

但这 a) 读写起来很糟糕，b) 似乎效率低下。

关于如何做得更好的任何提示？请注意，在我的真实场景中，我有数十万行、四个时间段和每个时间段 30-35 个事实。

-- 创建代码`dt`

```
dt = data.table(
  name = factor(c("Ann", "Ann", "Ann", "Ann", 
                  "Bob", "Bob", "Bob", "Bob")), 
  day = c(1, 1, 2, 3, 1, 1, 1, 2), 
  wages = c(100, 150, 200, 150, 100, 200, 150, 100), 
  hour = c(6, 18, 10, 10, 11, 17, 20, 11), 
  colour = c("Green", "Blue", "Blue", "Green", "Red",
             "Red", "Green", "Red")
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:45:20.737

怎么样：

```
f = list(quote(wages>175),quote(colour=="Green"))
t = list(quote(hour<9),quote(hour<17),quote(hour>9),quote(hour>17))
dt = as.data.table(df)
dt[,as.list(mapply("%*%",
            lapply(t,eval,.SD),
            rep(lapply(f,eval,.SD),each=length(t))
           )), by=list(name,day)]
     name day V1 V2 V3 V4 V5 V6 V7 V8
[1,]  Ann   1  0  0  0  0  1  1  0  0
[2,]  Ann   2  0  1  1  0  0  0  0  0
[3,]  Ann   3  0  0  0  0  0  1  1  0
[4,]  Bob   1  0  0  1  0  0  0  1  1
[5,]  Bob   2  0  0  0  0  0  0  0  0 
```

显然，列名没有被处理，但如果这种方法没问题，可以添加。

这应该更有效，因为每个`t`组`f`只对每个组进行一次评估，然后组合这些结果的组合。

# ant - 可以在 ant XML 构建文件中包含 XML 文件吗？

> ID：10212277
> 
> 赞同：1
> 
> 时间：2012-04-18T15:05:42.117
> 
> 标签：ant

当我使用 Makefiles 时，我可以包含 common.mk 文件，我在其中定义了一些常见的定义，例如类路径等。

我想对我的 build.xml 文件做同样的事情。我想在树的每个文件夹中创建一个 build.xml，这样我就可以构建树的任何部分，而不必每次都编辑一个顶部的 build.xml 来告诉它要包含什么。

这就是我使用 makefile 的方式，非常好，因为我可以从树中的任何文件夹中键入“make”，并使用递归 make，它将在我所在的位置下方构建树部分。

build.xml 的问题在于，我发现我在每个 build.xml 中都重复了相同的定义（例如类路径、编译器标志和你有什么）。

如果我可以包含一个 xml 文件，那么我可以将所有常见的东西放在 common.xml 文件中，在树的根目录中，并将其包含在每个 build.xml 中。（这就是我对 Makefile 所做的，我将所有内容放在 common.mk 中）。

我不喜欢使用环境。变量来定义事物，并且更喜欢使用一个文件，一个公共文件，我用于整个树。

我是使用 ant 的新手，所以我可能忽略了这个功能。如果有人也有一个如何做到这一点的例子，这将很有用。

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T15:30:09.630

查看包含 XML 文件和外部 Ant 文件的文档：http: [//ant.apache.org/faq.html#xml-entity-include](http://ant.apache.org/faq.html#xml-entity-include)

要在当前 Ant 文件中包含完整的 Ant 构建文件，您需要执行以下操作：

```
<?xml version="1.0"?>
<project name="test" default="test" basedir=".">

  <target name="setup">
    ...
  </target>

  <import file="./common.xml"/>

  ...

</project> 
```

您将需要 Ant 1.6 或更高版本。

# php - 如何调试看似空的 DOM 对象？

> ID：10212283
> 
> 赞同：1
> 
> 时间：2012-04-18T15:06:06.520
> 
> 标签：php, xml, dom, xml-parsing, symfony-1.4

我正在编写一个导入 XML 的任务。调试是一件痛苦的事情，并且为 DOM 对象（如和列表）返回看似空的对象`var_dump`，看起来是这样的：`print_r``DOMElement``DOMNodeList`

```
object(DOMElement)#330 (0) {}
object(DOMNodeList)#335 (0) {} 
```

但它们不是空的，因为我可以读取这些值。

我有哪些调试选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:26:00.360

对于使用 xml 输出的`DomDocument`I。`var_dump`

```
var_dump($dom->saveXML()); 
```

对于 a `DOMElement`，我使用（[如此处所示](http://thisoldspoon.blogspot.fr/2009/08/dumping-domelement-in-php.html)）：

```
var_dump($domElement->ownerDocument->saveXML($domElement)); 
```

但是`DOMNodeList`，我不知道。也许您必须将它附加/附加到 DomDocument，然后 var_dump 它。

顺便说一句，报告没有显示 DomDocument 的内部结构[（这里：反射）](https://bugs.php.net/bug.php?id=48527)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:17:01.817

解决方案：我写了自己的监控函数'dom_test'

```
 function dom_test($DOM) {
      echo '<h1>'.get_class($DOM).'</h1>';
      // easiest way to traverse:
      echo 'LENGTH: '. @$DOM->length ."\n"; // if NodeList
      echo 'TAG: '. @$DOM->tagName ."\n"; // if Element
      echo 'CHILDS: '. @$DOM->childNodes->length ."\n"; // etc.
    } 
```

希望这可以帮助你！

# html - Textarea失去鼠标点击的焦点？

> ID：10212287
> 
> 赞同：20
> 
> 时间：2012-04-18T15:06:24.510
> 
> 标签：html, focus, click, textarea

我在 Google Chrome 中的 textarea 遇到了一些奇怪的问题。

问题是，每当我点击谷歌浏览器中的文本区域时，它会立即失去焦点，并返回到上一个输入框。如果我按键盘上的 tab 键，问题就不会发生。

这是一个 .gif 显示我的问题：

![在此处输入图像描述](../Images/ad8c563d1ae0ef6bbfa24f42c232b92c.png)

我使用的代码是有效的 html：

```
 <div class="inputborder rounded">
                    <label>Celebrity 1<label>
                    <div class="newline"></div>
                    <input type="text"/>
                    <div class="newline"></div>
                    <label>Tweet 1<label>
                    <div class="newline"></div>
                    <textarea>Y U NO WORK?!</textarea>
                    <div class="newline"></div>
                </div> 
```

除了 jQuery 库之外，我还没有在页面上使用任何 javascript。

我对为什么会发生这种情况感到非常震惊，因为通常是 Internet Explorer 给我带来了这样的问题。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T15:20:57.443

尝试关闭您的标签标签。

```
<div class="inputborder rounded">
        <label>Celebrity 1</label>
        <div class="newline"></div>
        <input type="text"/>
        <div class="newline"></div>
        <label>Tweet 1</label>
        <div class="newline"></div>
        <textarea>Y U NO WORK?!</textarea>
        <div class="newline"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T15:21:22.830

您没有正确关闭标签标签。你有`<label>`什么时候应该`</label>`

# matlab - 这是与 sub2ind / ind2sub 相关的错误吗？

> ID：10212291
> 
> 赞同：2
> 
> 时间：2012-04-18T15:06:34.363
> 
> 标签：matlab

我试图对遇到以下奇怪行为的单精度变量执行 sub2ind 。例如，当我尝试：

```
[a b] = ind2sub([50000 50000], sub2ind([50000 50000], single(1000), single(1000))) 
```

我得到：

```
a = 1001
b = 1000 
```

这是一个错误还是我错过了什么？我知道这可能是由于 matlab 代码中某处的溢出，但它不应该发生，对吧？

我从 64 位 (glnxa64) R2012a、R2011a、R2010b、R2010a 得到相同的错误行为，但从 32 位 (glnx86) R2010b 得到正确的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:35:09.593

发生这种情况的原因如下。

在 ind2sub.m 的第 35 行是

```
vi = rem(ndx-1, k(i)) + 1; 
```

其中 ndx 是传入的索引。因此，通过 sub2ind 的调用，ndx 是 49951000。现在，当您传入一个单精度值时，它会强制 matlab 以单精度计算所有数学。因此，比较 l.35 上发生的情况的差异。

```
K>> 49951000-1
ans =
        49950999

K>> single(49951000)-1
ans =
        49951000 
```

从大数中减去小数是问题所在。所以不，这不是错误，它是对单精度浮点精度的限制。[这可能会有所帮助。](http://www.cprogramming.com/tutorial/floating_point/understanding_floating_point_representation.html)

编辑：正如拉斯曼所指出的，一个很好的展示方式是使用[eps](http://www.mathworks.com/help/techdoc/ref/eps.html)

```
eps(single(49951000))=4 
```

因此，由于单精度的准确性，从 (-4,4) 范围内的 single(49951000) 中添加或减去的任何值都将导致返回 495100。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:22:00.370

一直在思考更多，尤其是看着一个新手的评论引发了一切。

所以事情是这样的：single 是一个 32 位有符号浮点数。因此，获取数据的精确度是有限制的

`eps(single(49951000)) = 4`， 尽管`eps(single(50000^2)) = 256`

因此你的范围是关闭的，你会得到量化，特别是当你增加索引的值时：

```
for i = 1000:1010
    sub2ind([50000 50000], single(i), single(1000))
end 
```

如果你真的想要一个 32 位数字，我建议你使用 uint32，因为你将能够表示所有数据点（50000 阶的方阵有 2.5e+09 个数据点 > 2^32 (=4.3e9)）。

```
for i = 1000:1010
    sub2ind([50000 50000], uint32(i), uint32(1000))
end 
```

# python - 如何确定请求的状态码

> ID：10212293
> 
> 赞同：0
> 
> 时间：2012-04-18T15:06:45.830
> 
> 标签：python, google-app-engine, http-status-codes

如何查看请求的状态码？我想检查用于访问页面的重定向类型。

对于响应对象，我会使用 *response.status_code*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:25:31.813

没有请求的状态码之类的东西。您可以改用 HTTP 引用 [1] 或让链接包含标识源的 HTTP 参数（例如，?src=example.com）

[1] [http://en.wikipedia.org/wiki/HTTP_referer](http://en.wikipedia.org/wiki/HTTP_referer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:11:00.717

我可能错了，但是没有传入请求状态代码之类的东西，应用程序在重定向的情况下执行请求从初始请求检查位置获取 302 并执行另一个请求。HTTP 中不存在类似“traceroute”之类的传入请求的历史记录。

# css - 使用css3选择类的所有其他元素

> ID：10212295
> 
> 赞同：7
> 
> 时间：2012-04-18T15:06:51.540
> 
> 标签：css

给定一个`ul`这样的结构：

```
<ul>
    <li class="product">...</li>
    <li class="product">...</li>
    <li class="product">...</li>
    <li class="product">...</li>
    <li class="spot">...</li>
    <li class="product">...</li>
    <li class="product">...</li>
</ul> 
```

有什么方法可以使用 CSS3 来针对每个其他出现的 a`li`类产品。

我尝试在各种配置中同时使用 nth-of-child 和 nth-of-type 都没有运气，无论类是否具有，两者似乎都针对所有其他 li 元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T15:23:49.070

基本上，你不能使用纯 CSS3。nth-child 选择器作用于元素选择器，而不是类。因此，`li:nth-child(even)`有效，但`.product:nth-child(even)`无效。

[您将需要 jQuery](http://api.jquery.com/even-selector/)来实现这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T01:25:52.547

您的问题可以通过覆盖点并选择其他所有 li （就像其他人提到的那样）来解决吗？此外，您可以按类名选择 ul。

这怎么样：

```
.ul_class li:nth-child(even) {
    background: #CCC;
}

.spot {
    background: green;
} 
```

唯一可能看起来很奇怪的故障是当 2 个点 li 彼此相邻时。我认为在其他所有情况下，斑点都应该看起来不错。

我还发现这在 chrome 中运行良好：

```
li.product:nth-child(even) {
    background: #ccc;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T15:09:04.020

这不能用纯 CSS（以我还知道的任何方式）来完成，但是纯 JavaScript 解决方案非常简单：

```
var​ lis = document.querySelectorAll('li.product');

for (var i=0,len=lis.length;i<len;i++){
    if (i%2 == 0){
        lis[i].className = 'oddProduct';
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Ktkt3/1/)。

可以使用 jQuery 代替（大概可以使用任何*其他*JavaScript 库），但它肯定不是*必需*的。

# c# - 使用 System.Xml.Serialization 序列化对象？

> ID：10212301
> 
> 赞同：0
> 
> 时间：2012-04-18T15:07:10.090
> 
> 标签：c#, xml, serialization

我有一个序列化为 XML 的类。这个类有一个`Object`成员变量。我怎样才能正确地序列化这个项目？显然，它应该写成一个字符串，但是当它读取时，它应该变成任何类型。

```
public class MyClass
{
    public MyClass()
        : this("", null)
    {
    }

    public MyClass(String name, Object value)
    {
        Name = name;
        Value = value;
    }

    [XmlAttribute("name")]
    public String Name;

    [XmlAttribute("value")] // Won't work!
    public Object Value;
} 
```

**编辑：**有趣的`[XmlElement()]`是，能够序列化`Object`类型。因此，一种解决方法是使用值而不是属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:29:58.530

您不能将 xmlattribute 序列化为对象。`[XmlIgnore]`您必须通过使用或将其加载为字符串来忽略它，`[XmlAttribute("value", typeof(string)]`并将其转换为 post 对象构造中的任何类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:22:59.377

您不能将 Object 序列化为属性 - 这意味着您必须将（可能）复杂的对象序列化为字符串。

正如[XmlAttributeAttribute 文档所述](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeattribute.aspx)：

> 您只能将 XmlAttributeAttribute 分配给返回值（或值数组）的公共字段或公共属性，该值可以映射到 XML 架构定义语言 (XSD) 简单类型之一（包括从 XSD 派生的所有内置数据类型） anySimpleType 类型）。可能的类型包括任何可以映射到 XSD 简单类型的类型，包括 Guid、Char 和枚举。有关 XSD 类型的列表以及它们如何映射到 .NET 数据类型，请参阅 DataType 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:27:28.643

您可以这样做（但由于对象类型，反序列化显然不会起作用）：

```
private object m_object = null;

[XmlAttribute("value")]
public string ObjectValue
{
get { return m_object.ToString();}
set { m_object = value;}
}

[XmlIgnore]
public object Value
{
get { return m_object; }
set { m_object = value; }
} 
```

# c# - JSON 序列化的条件 ScriptIgnore

> ID：10212302
> 
> 赞同：3
> 
> 时间：2012-04-18T15:07:11.887
> 
> 标签：c#, json, jsonserializer

有没有办法有条件地从 JSON 序列化中排除项目？我在带有 WebAPI 的 .NET4 应用程序中使用 C#。我已经`[DataMember]`并且`[ScriptIgnore]`已经在上课了，一切正常。我想要做的不是在运行时根据属性的值包含某些属性

例如，我可能只想序列化`List<Foo> myFoo`时

`myFoo != null && myFoo.Count > 0`

JSON 被转换回客户端上我自己的 JS 对象，它的所有属性都已实例化，例如`myFoo: []`. 只是没有必要以 JSON 格式将这些发送到客户端，因为它基本上不会对对象产生影响，只会发送更多数据并在客户端上使用更多处理。这是一个非常重 JS 的 HTML5 移动网站，我正在尝试尽可能多地减少数据和处理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T16:32:36.390

感谢 OP 回答你的问题，但是当我遇到同样的情况时，更多的信息会很棒。这很累，但我终于找到了方法。关于它的内容并不多，但[根据 Json.net 档案中的一个低级页面，](http://james.newtonking.com/archive/2010/04/16/json-net-3-5-release-7-bson-binary-json-part-deux.aspx)它是这样工作的：

```
public class Tricorn
{
   public string RocketFuel { get; set; }

   public bool ShouldSerializeRocketFuel()
   {
      return !string.IsNullOrEmpty(this.RocketFuel.Length);
   }
} 
```

关键是为您的属性名称创建一个带有谓词“ShouldSerialze”的方法。返回值指示它是否应该被序列化并由 Json.net 处理其余部分。希望这对任何人都有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:45:34.037

我找到[了 Json.net](http://json.codeplex.com/)，它允许我在运行时进行条件序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:06:57.497

在这里使用吸气剂可能是你最好的选择：

```
[ScriptIgnore]
private List<Foo> myFoo;

public List<Foo> MyFoo
{
   get
   {
      if (this.myFoo != null && this.myFoo.Count > 0)
      {
         return this.myFoo;
      }
      else
      {
         return null;
      }
   }
} 
```

# json - 谷歌应用引擎、ndb 和 Json

> ID：10212316
> 
> 赞同：4
> 
> 时间：2012-04-18T15:08:00.137
> 
> 标签：json, google-app-engine, app-engine-ndb

我有一个属性存储为 JSON 对象，如下所示：

```
content  = ndb.JsonProperty() 
```

当我这样做时，我得到这个错误：

```
 line 1614, in _to_base_type
    return json.dumps(value, 2)
AttributeError: 'module' object has no attribute 'dumps' 
```

在 ndb 模型类中。

作为一个`ndb.TextProperty`它工作正常。也许我发送的 JSON 错误，这是我发送的 JSON 对象：

```
{posttext: "What is your earliest memory of WWII?", linkdata: ""} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T04:58:45.217

您的应用程序中是否有一个名为“json.py”的模块或一个名为“json”的包？这将覆盖 ndb 尝试导入的 json 模块。解决方案是为该模块或包选择不同的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:00:31.543

当我尝试时，您所描述的效果很好：

```
from google.appengine.ext import ndb
class TestModel(ndb.Model):
  foo = ndb.JsonProperty()
t = TestModel(foo={"posttext": "What is your earliest memory of WWII?", "linkdata": ""})
t.put()
Key('TestModel', 7001) 
```

你能更详细地了解你是如何做到这一点的吗？它与上面的片段有何不同？

# c# - 仅允许输入数字而不是 C# 中的 NumericUpDown 的文本框

> ID：10212324
> 
> 赞同：2
> 
> 时间：2012-04-18T15:08:52.090
> 
> 标签：c#, string, decimal

对于我的程序，输入员工信息 - 例如 ID、姓名、姓氏和年薪。我将 ID 和薪水框设为 numericupdown，但我想将薪水框设为仅包含数字的文本框。

但是，当我尝试从 numericupdown 更改为文本框时，会出现错误，提示“无法将“字符串”隐式转换为“十进制”。我还有另一个按钮可以找到最低工资等，但问题是什么？我想创建异常使文本框只接受数字，但它不会让我：/

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T15:10:24.707

**如何在 C# 中创建数字文本框**
[http://msdn.microsoft.com/en-us/library/ms229644(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms229644(v=vs.90).aspx)

最简单的形式：

```
protected override void OnKeyPress(KeyPressEventArgs e)
{
    if (!Char.IsDigit(e.KeyChar))
    {
        e.Handled = true;
    }
} 
```

这段代码只会吞下任何不是数字的击键。MSDN 链接解释了如何处理小数点等内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T15:12:01.823

> 但是，当我尝试从 numericupdown 更改为文本框时，会出现错误，提示“无法将“字符串”隐式转换为“十进制”。

在我看来，这就像一个铸造错误。

```
 employee.EmployeeId = (int)idNumericUpDown.Value; 
```

试试这个：

```
 employee.EmployeeId = decimal.Parse(idNumericUpDown.Value); 
```

并查看`TryParse`更清洁的 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:14:02.693

这就是我一直为我的文本框做的事情。

功能（允许所有数值和退格键）：

```
private bool NumericOnly(char e)
        {
            return (e > (char)47 & e < (char)58) | e == (char)8;
        } 
```

和文本框的 onkeypress 事件：

```
if (!NumericOnly(e.KeyChar)) e.Handled = true; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T15:22:18.503

这是我发现的一个*hack 。*您可以这样隐藏 NumericUpDown 控件的箭头：

```
private void RemoveArrows(NumericUpDown numericUpDown)
{
    Control updown = numericUpDown.Controls[0];
    updown.Left += updown.Width;
    updown.Visible = false;
} 
```

只需为您的 NumericUpDown 控件调用此方法（例如在 Form_Load 事件处理程序上）：

```
private void Form2_Load(object sender, EventArgs e)
{
    RemoveArrows(idNumericUpDown);
    RemoveArrows(salaryNumericUpDown);
} 
```

其他方式 -[创建数字文本框](http://msdn.microsoft.com/en-us/library/ms229644%28v=vs.90%29.aspx)，或使用解析和验证：

1.  将`ErrorProvider`组件从 ToolBox 拖到表单中。
2.  为文本框设置`CausesValidation`属性`true`（默认为真）。
3.  创建 NumericTextBox_Validating 事件处理程序并将其订阅到所有应该包含十进制值的文本框。

如果无法从文本框中的文本解析十进制值，则会在文本框附近显示错误符号，并显示消息“仅允许数值”。

```
private void NumericTextBox_Validating(object sender, CancelEventArgs e)
{
    TextBox textBox = sender as TextBox;
    decimal value;
    if (Decimal.TryParse(textBox.Text, out value))
    {
        errorProvider1.SetError(textBox, "");
        return;
    }

    e.Cancel = true;
    errorProvider1.SetError(textBox, "Only numeric values allowed");
} 
```

**建议**- 使用 NumericUpDown 控件输入数字，因为它告诉用户**“看到这个箭头了吗？我在这里只输入数字！”** . 并且文本框没有说明它接受的文本格式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T15:51:36.000

您可以创建一个“掩码”文本框，该文本框仅允许添加到现有文本时与正则表达式匹配的字符。

它的短处：

首先，开发一个作为您的“编辑掩码”的正则表达式。对于数字，它可以像`^\d*$`（任意长度的整数）一样简单，也可以像`^(\d{1,3}(,?\d\d\d)*(.\d{1,})?)?$`（带有可选逗号和可选小数部分的数字）一样复杂。将此分配给派生自 TextBox 的新控件的公共属性。

然后，在派生的文本框中覆盖 OnKeyPress，使其看起来像这样：

```
protected override void OnKeyPress(KeyPressEventArgs e)
{
    if (!Regex.Match(new StringBuilder(Text).Append(e.KeyChar).ToString(), MaskPattern))
    {
        e.Handled = true;
    }
    else
        base.OnKeyPress(e);
} 
```

就像罗伯特哈维的回答一样，这种方法将“吞下”任何按键，当附加到文本框的当前文本值时，与正则表达式不匹配。您不仅可以将此 MaskedTextBox 用于数字条目，还可以用于需要纯字母值、纯字母数字（无符号或空格）、有效本地或网络路径、IP 地址等的文本框。

# javascript - python django：如何根据传递给模板的参数确定 div 是否应该显示或隐藏

> ID：10212326
> 
> 赞同：0
> 
> 时间：2012-04-18T15:08:55.457
> 
> 标签：javascript, jquery, django

我需要根据从 django views.py 传入的参数设置一个 div 以显示或隐藏，但我无法让它工作。我的代码如下：

在身体里：

```
{% if report_type == "detail" %}
    visibility("detail");
{% endif %} 
```

在 JavaScript 中：

```
<script type="text/javascript">
    function visibility(reportType) {
        console.log(reportType);
        if(reportType == "detail") {
            $('#executive_summary').style.display = 'none';
        }
    }
</script> 
```

但是上面的代码不起作用。有人可以给我一些建议吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T18:56:13.883

通过纯 CSS：

```
 {% if report_type != "detail" %}
            <div style="display: none;">
        {% else %}
            <div style="display: block;">
        {% endif %}
        ...
        </div> 
```

或者通过使用 JavaScript (jQuery)：

```
 {% if report_type != "detail" %}
    <script type="text/javascript">
        $('#executive_summary').hide();
    </script>
    {% endif %} 
```

通过 JavaScript 函数：

```
 <script type="text/javascript">
        /* If wanted to run when page is loaded. */
        $(function() {
            // Handler for .ready() called. 
            visibility("detail");
        });

        function visibility(reportType) {
            if(reportType == "detail") {
                $('#executive_summary').show();
            }
            else {
                $('#executive_summary').hide();
            }
        }
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:15:51.990

问题是您正在使用选择器`style`返回的 jQuery 对象的不存在属性`'#executive_summary'`。jQuery 对象没有与 DOM 节点相同的属性和方法。试试这个：

```
<script type="text/javascript">
    function visibility(reportType) {
        console.log(reportType);
        if(reportType == "detail") {
            $('#executive_summary').hide();
        }
    }
</script> 
```

这将满足您的要求，但如果您绝对必须直接设置 display 属性，您可以将这一行替换为：

```
$('#executive_summary').css('display', 'none'); 
```

但这并不像使用那样干净`.hide()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:11:52.447

您需要将函数调用放在 javascript 标记中。试试这个：

```
<script type="text/javascript">
{% if report_type == "detail" %}
    $('#executive_summary').toggle();
{% endif %}
</script> 
```

# sql - 由多个分区聚合并补偿重复

> ID：10212344
> 
> 赞同：0
> 
> 时间：2012-04-18T15:09:27.673
> 
> 标签：sql, tsql

假设这是表格的一部分

```
[Level1] [Level2] [Level3] [Record #] [Measure]
cat1_1    cat2_1    cat3_1   rec_1       5
cat1_2    cat2_1    cat3_2   rec_2      10
cat1_1    cat2_1    cat3_3   rec_2      10 
```

我想找到一种像这样聚合的方法

```
[Level 1] [Level 2] [Level 3] [Average 1] [Average 2] [Average 3]
cat1_1     cat2_1    cat3_1      7.5        7.5         10
cat1_1     cat2_1    cat3_3      7.5        7.5         10
cat1_2     cat2_1    cat3_2      10         7.5         5 
```

我发现用其他方式描述有点困难，但简而言之，我希望聚合重叠而不计算任何记录两次（即 [level 2]=cat2_1 的平均值不是 12.5）。似乎`OVER()`无法做到这一点，因为你不能嵌套它。我是否需要将每个不同的级别组合加入到三个聚合表中`GROUP BY`？

我很喜欢`AVG(DISTINCT [Record #]'s [Measure]) OVER(PARTITION BY [Level X])`。

# ruby-on-rails - Ruby on Rails - 导致我最终出现 nullPointerExceptions 的语法问题

> ID：10212347
> 
> 赞同：1
> 
> 时间：2012-04-18T15:09:31.400
> 
> 标签：ruby-on-rails, ruby

我收到此错误：

```
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.[] 
```

从这一行：

```
user = User.any_of({:user_name => login},{:email => login}).first   #.and(:encrypted_password => nil).first 
```

我是 Ruby 新手，所以我仍在尝试掌握语法。是否有一些特别不正确或容易出错的东西会导致我出现对象 nil[] 错误？

即使我在没有 .downcase 的情况下尝试，以下行也会产生相同的错误

```
login = (params[:user][:login]).downcase 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:15:38.277

我不是 Ruby 开发人员.. 但我认为它试图告诉你 .first 需要一个数组，而 any_of 返回其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:46:31.367

在 login = (params[:user][:login]).downcase 如果你将传递错误的参数又名 {:not_user => {}} 他将尝试从空哈希获取 :login 值，因为没有 :user 哈希.

因此，首先要检查表单中的参数。我打赌这是他们的问题，检查

```
log/development.log 
```

您将看到发送到控制器的内容，或者只是简单地放在操作的顶部

```
raise params.inspect 
```

这是找到参数发生情况的最快方法。

正确的参数应该是这样的

```
{:user => {:login => "user login ble ble", :password => "ple ple"}} 
```

# c++ - C++ 中可变的动机

> ID：10212350
> 
> 赞同：2
> 
> 时间：2012-04-18T15:09:44.707
> 
> 标签：c++, mutable

> **可能重复：**
> [C++ 'mutable' 关键字](https://stackoverflow.com/questions/105014/c-mutable-keyword)
> [您何时使用过 C++ 'mutable' 关键字？](https://stackoverflow.com/questions/4554031/when-have-you-used-c-mutable-keyword)

我了解`mutable`它的含义和使用方式，我想知道的是它存在的真正动机是什么。我不认为唯一的动机是绕过成员函数的不变性，`this`我`const`宁愿认为它还有更多的东西。
我不认为这只是绕过设计不良系统中问题的一种手段吗？或者是吗？

原始问题的一个明显分支，`mutable`即使在一个好的设计中，什么时候使用才有意义？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T15:15:18.090

动机**实际上**是绕过`this`in`const`方法的不变性（语法级别）。这`const`是由编译器在语法上验证的语义检查。任何语义上不修改对象*状态*的操作都应该是`const`，但在某些情况下，实现需要更改子对象，并且`mutable`是告诉编译器该特定成员不是对象*状态*的一部分的语法工具，因此可以在方法内部进行修改`const`。

例如，如果没有`mutable`，您将无法将存储为成员变量的互斥锁锁定在语义上不会修改对象状态的访问器中，因为编译器中的语法检查会抱怨您正在修改互斥锁。还有其他激励示例，例如 memoization，其中实现细节（优化、线程安全）意味着在不修改对象*可见状态*的方法中更改成员变量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T15:54:37.103

`mutable`是将按位 const 与逻辑 const 分开的一部分。基本上，编译器实现的称为按位 const：如果您尝试在 const 函数中修改实际对象的位，它会报错，否则不会报错。当您编写一个类时，您希望实现逻辑 const：一个 const 函数不会修改对象的可观察值（类的作者定义什么是可观察值）。大多数情况下，这是一个不修改事物的问题，即使你可以（例如，通过指针访问的部分值），但每隔一段时间，实际对象（如编译器所见）中都有“位” t 部分可观察值：惰性计算的缓存值是经典示例，但可以想象其他示例：侵入式链表中的元素，例如，

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T15:14:32.120

一种常见的需求是实现[memoization](http://en.wikipedia.org/wiki/Memoization)。对于外部世界，函数调用不会修改对象状态，但在内部必须更新记忆缓存。将缓存标识为`mutable`允许这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:21:51.097

动机是绕过`this`. 关键是对象的某些部分可能必须进行变异，但不会影响对象的可见状态。有时修改只是一个实现细节，不应该在界面中真正可见（并且可能会发生变化。

一个例子是`mutices`锁定数据结构。即使是方法，您也可能需要锁定结构，`const`以确保在您阅读结构时没有其他线程正在修改结构。如果该方法没有更改对象，它在逻辑上应该是`const`（公开通过锁定和解锁对象所做的更改似乎很愚蠢），所以你需要制作 mutex `mutable`。

# ruby-on-rails - 如何在 rails 3 中为 DATETIME 列保存当前日期/时间？

> ID：10212354
> 
> 赞同：16
> 
> 时间：2012-04-18T15:10:16.517
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一个名为 last_profile_update 的 DATETIME 列。我需要用当前时间更新它。我有以下代码：

```
user = User.new
user.last_profile_update = Date.today
user.save 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-18T15:44:44.093

也许是简化该代码的一种方法：

```
user = User.create(:last_profile_update => Time.now) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-08T10:45:40.000

它可以用

```
user.touch(:last_profile_update) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:13:59.667

以为是`Time.now`

```
user = User.new
user.last_profile_update = Time.now
user.save 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T16:38:55.570

它可以通过以下方式完成：

```
user.last_profile_update = Date.today.to_datetime 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T17:29:42.630

```
User.create({:last_profile_update=>Time.now}) 
```

# objective-c - 如何像这样创建 iOS 表格视图？

> ID：10212356
> 
> 赞同：4
> 
> 时间：2012-04-18T15:10:20.293
> 
> 标签：objective-c, ios, xcode, cocoa-touch

如何创建这样的 iOS 表格视图？

当它滚动时，表格视图的背景是静态的，所以我认为表格是透明的，但是如何创建那些水平分隔符？

![截屏](../Images/c6803914ba8e023fd06ba09a24d4500c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:14:28.323

您可以将水平分隔符添加到单元格背景图像中。你可以有一个小图像 1 像素的高度和单元格的宽度，或者甚至尝试水平重复它。

您还可以在单​​元格的背景视图中添加一条线，而不是图像。例如，请参阅此线程以了解如何向 UIVIew 添加线条：[在 UIView 中绘制线条](https://stackoverflow.com/questions/3128752/draw-line-in-uiview)。

重要的一点是，您可以通过更改单元格本身的背景来实现这一点。

# objective-c - 无法使用 ffmpeg 对图像进行编码

> ID：10212358
> 
> 赞同：1
> 
> 时间：2012-04-18T15:10:27.560
> 
> 标签：objective-c, encoding, ffmpeg

我正在尝试在 ffmpeg 库的帮助下对一张图像进行编码。实际上我想对实时视频进行编码，但现在我开始对图像进行编码。这是我的代码。

```
 av_register_all();
    avcodec_init();
    avcodec_register_all();
    avformat_alloc_context();

    AVCodec *codec;
    AVCodecContext *ctx= NULL;
    int out_size, size, outbuf_size;
    AVFrame *picture;
    uint8_t *outbuf;
    unsigned char *flvdata = malloc(sizeof(unsigned char) * 30);

    outbuf_size = 100000;
    outbuf = malloc(outbuf_size);

    printf("Video encoding\n");

    codec = avcodec_find_encoder(CODEC_ID_FLV1);
    if (!codec) {
            fprintf(stderr, "codec not found\n");
            exit(1);
    }

    ctx= avcodec_alloc_context();
    picture= avcodec_alloc_frame();

    ctx->width = 320;
    ctx->height = 240;
    ctx -> sample_rate = 11025;
    ctx -> time_base.den = 1000;
    ctx -> time_base.num = 23976;
    ctx -> codec_id = CODEC_ID_FLV1;
    ctx -> codec_type = CODEC_TYPE_VIDEO;
    ctx->pix_fmt = PIX_FMT_YUV420P;

    if (avcodec_open(ctx, codec) < 0) {
            fprintf(stderr, "could not open codec\n");
            exit(1);
    }

    outbuf_size = 100000;
    outbuf = malloc(outbuf_size);
    size = ctx->width * ctx->height;

    AVFrame* outpic = avcodec_alloc_frame();
    int nbytes = avpicture_get_size(PIX_FMT_YUV420P, ctx->width, ctx->height);

    uint8_t* outbuffer = (uint8_t*)av_malloc(nbytes);

    fflush(stdout);

    int numBytes = avpicture_get_size(PIX_FMT_YUV420P, ctx->width, ctx->height);

    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"0.jpg"]];
    CGImageRef newCgImage = [image CGImage];

    CGDataProviderRef dataProvider = CGImageGetDataProvider(newCgImage);
    CFDataRef bitmapData = CGDataProviderCopyData(dataProvider);
    long dataLength = CFDataGetLength(bitmapData);

    uint8_t *buffer = (uint8_t *)av_malloc(dataLength);
    buffer = (uint8_t *)CFDataGetBytePtr(bitmapData);

    for(int i = 0; i < dataLength; i++)
    {
            if((i + 1) % 16 == 1 && i != 1)
                    printf("\n");
            printf("%X\t",buffer[i]); // getting something different than the     actual hex value of the image
    }

    outpic -> pts = 0;        

    avpicture_fill((AVPicture*)picture, buffer, PIX_FMT_RGB8, ctx->width, ctx->height);

    avpicture_fill((AVPicture*)outpic, outbuffer, PIX_FMT_YUV420P, ctx->width, ctx->height);

    struct SwsContext* fooContext = sws_getContext(ctx->width, ctx->height, 
                                                           PIX_FMT_RGB8, 
                                                           ctx->width, ctx->height, 
                                                           PIX_FMT_YUV420P, 
                                                           SWS_FAST_BILINEAR, NULL, NULL, NULL);

    sws_scale(fooContext, picture->data, picture->linesize, 0, ctx->height, outpic->data, outpic->linesize);

    printf("abcdefghijklmnop");
    out_size = avcodec_encode_video(ctx, outbuf, outbuf_size, outpic);
    printf("\n\n out_size %d   outbuf_size %d",out_size,outbuf_size); 
```

所以图像的大小是 29 kb 并且 avcodec_encode_video 返回 20143 .. 那么它是否正确？我的意思是我正在编码，所以它的大小也应该减小......而且我已经以十六进制模式打开了该图像，并且我得到的数据与缓冲区中的数据不同（如代码所示）。所以我认为缓冲区没有得到正确的数据。对？任何人都可以帮我处理我的代码吗？先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:46:21.463

回答我自己的问题...

现在将 outbuf_size 增加到 200000 后，我可以对图像进行编码。问题是需要更大大小的缓冲区来对图像进行编码。这解决了我的编码问题。

但是现在我遇到了另一个问题，因为编码的图像是黑白的。我想要彩色图像。请告诉我应该如何设置像素格式以获得彩色图像。请帮助......剩下的时间非常少。

提前致谢..

# java - 方法区域上的 JVM 类型表示

> ID：10212359
> 
> 赞同：4
> 
> 时间：2012-04-18T15:10:37.957
> 
> 标签：java, jvm

有没有我可以检查 Java 开发人员如何决定表示特定对象的类型信息的参考资料？我知道`Class`特定类型的实例链接到该数据结构并充当它的接口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:15:39.587

如果问题是关于如何在类文件中编码此信息，请在[此处](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html)进行描述。

如果你想知道这一切在内存中是如何表示的，最好的选择是 VM 实现的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:22:44.217

如果您正在编写程序，则可以使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)来访问类的字段（或方法）。

```
public void dumpFields(Class clz) {
    for (Field f : clz.getDeclaredFields()) {
        System.out.println(f.toString());
    }
} 
```

如果您正在处理 .class 文件，则可以使用[JAD](http://www.varaneckas.com/jad)对其进行反编译。

# javascript - Json - 检查子节点空值

> ID：10212362
> 
> 赞同：1
> 
> 时间：2012-04-18T15:10:54.837
> 
> 标签：javascript, json

如何检查 json 对象的子属性是否为空？虽然 firefox 可以识别它，但 Chrome 和 IE 8 却不能。

我有一个像这样的 json 对象：

```
centralData.phone.id;
centralData.address.id;
centralData.product.id;
//and many others 
```

我想检查它的某些属性是否可能为空。我正在这样做并且它有效：

```
if(centralData.phone != null){
   //Do things
} 
```

但这不会，因为我并不总是有 StockGroup

```
if(centralData.product.StockGroup != null){
 //Error
} 
```

**那么，我如何检查是否`centralData.product.StockGroup` 为空？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:20:18.243

我想你会检查一个属性是`undefined`不是

```
if(typeof (centralData.product || {}).StockGroup) !== "undefined") {
   /* do something */
} 
```

这种检查[在 ajaxian](http://ajaxian.com/archives/a-safety-fence-for-your-property-lookups)网站上有描述，整体代码要短得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:20:54.100

你不想检查它是否是`null`，你想检查属性是否存在（`undefined`在这种情况下）。您的检查有效，因为您使用`==`而不是`===`，它在类型（`undefined == null`，但`undefined !== null`）之间转换。

当您要检查嵌套属性时，您需要检查每个级别。我建议使用`in`运算符，因为它会检查属性是否存在并忽略它的值。

这会做你想做的事情：

```
if("product" in centralData && "StockGroup" in centralData.product){
    …
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:16:17.060

尝试将您的对象与未定义的对象进行比较，而不是使用 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:18:24.950

由于 JavaScript 采用[惰性求值](http://en.wikipedia.org/wiki/Lazy_evaluation)，因此您可以执行这样的检查而不会影响性能：

```
if(centralData.product != null && centralData.product.StockGroup != null){

} 
```

# php - phpquery getJson 和 Zend Json 问题

> ID：10212364
> 
> 赞同：0
> 
> 时间：2012-04-18T15:11:03.310
> 
> 标签：php, jquery, json, getjson, phpquery

出于架构原因，我被迫使用 phpquery::getJson，并且因为 Curl php 扩展给我带来了一些问题（可能我无法正确设置它）。

我希望直接使用 getJson （我知道我也可以使用 phpQuery::ajax 函数并在手动解析结果后）所以如果有人比我不专业，也可以使用这个解决方案。

你好我正在尝试使用这个：

```
phpQuery::getjson($url) 
```

或其他版本：

```
 phpQuery::ajax(array(
  'type' => 'GET',
  'url' => $url,
  'data' => array('prova'=>'ciao'),
  'success' => getJsCallback($doc),
  'dataType' => 'json',
  )); 
```

但它说：

```
Warning: require_once(Zend/Json.php): failed to open stream: 
No such file or directory in /home/giuseppe/homeProj/phpQuery/phpQuery/phpQuery/Zend/Json/Decoder.php 
```

所以我从 ZendFramework 手动添加： Zend/Json.php Zend/Json/Expr.php

它给了我：

```
 Fatal error: Uncaught exception 'Zend_Json_Exception' with message 'Illegal Token' 
```

如果有人有解决方案并愿意分享，欢迎他谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:59:18.170

感谢 bluelover 从 github 回复，您应该将 zendframework 添加到您的包含路径。

因此，下载 1.1 版本的 zend 框架，将其放在 apach 可访问的文件夹中（ fe /var/www/Zf1_1/ ），然后以这种方式在包含路径中设置 ZF 框架：

```
//replace /var/www/Zf1_1/library with your actualy ZF library path
set_include_path(get_include_path() . PATH_SEPARATOR . '/home/giuseppe/homeProj/ZendFramework1/ZendFramework-1.11.11/library/'); 
```

如果它给您带来权限被拒绝的问题，请不要忘记在 unix 终端使用它时放置

```
$ chown www-data -R /var/www/Zf1_1/library 
```

# javafx - JavaFX 2.0：关闭阶段（窗口）

> ID：10212366
> 
> 赞同：35
> 
> 时间：2012-04-18T15:11:04.007
> 
> 标签：javafx, stage

我正在 JavaFX 2.0 中制作应用程序。从我的主窗口中，我开始一个带有一些设置的新窗口。调整完设置后，我想按下“保存更改”之类的按钮。

我想要这个按钮来保存更改并关闭窗口。通过关闭我的意思是杀死它，而不是将它放在背景中或设置可见性。我读过一个方法 Stage.close()

> [http://docs.oracle.com/javafx/2.0/api/javafx/stage/Stage.html](http://docs.oracle.com/javafx/2.0/api/javafx/stage/Stage.html)

如您所见，它类似于 Hide() 方法，它只隐藏窗口，而不是关闭它。

问：有人知道任何方法或有一些代码可以帮助我关闭窗口吗？

所有帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-18T20:06:59.790

您链接的文档指出`stage.close()`：

> 关闭此阶段。此调用等效于 hide()。

as`hide()`相当于关闭stage `close()`，`close()`则`hide()`也关闭stage。

当应用程序中的所有阶段都被隐藏（或关闭，因为它是同一件事）时，应用程序退出。我知道这很令人困惑，但这正是 JavaFX 团队决定命名和实施这些操作的方式。

如果需要，可以使用[Platform.setImplicitExit(boolean)](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#setImplicitExit%28boolean%29)方法来关闭在最后一个窗口关闭或隐藏时退出应用程序的默认行为。

> 那么问题来了，我们如何隐藏舞台而不完全关闭它？

我认为`hide()`或等效`close()`方法不会像释放与窗口相关的所有资源那样“完全”关闭舞台（只要您在某处保留对舞台的引用）。我认为它只是使舞台不可见。您可能会在调用`show()`后调用`close()`，并且窗口可能会再次可见（我没有尝试过）。但是，如果您要这样做，那么调用`hide()`而不是`close()`.

我的猜测是，如果您不再在应用程序中保留对某个阶段的任何引用并且该阶段已关闭或隐藏，那么每当其算法决定垃圾收集这些资源时，JVM 可能会释放与该阶段相关的所有资源（同样我没有'不要测试这个，它可能不会那样工作）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-21T15:38:14.183

这对我来说非常有效（导入 for `Node`）：

```
((Node)(event.getSource())).getScene().getWindow().hide(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-08T12:33:00.190

对于也有兴趣收听关闭窗口事件的用户，在窗口中添加一个事件过滤器：（当用户按下应用程序的操作系统关闭按钮时也会触发此事件）

```
 yourWindow.addEventFilter(WindowEvent.WINDOW_CLOSE_REQUEST, event -> {
        // add your code here to handle the close event
        // use event.consume(); to prevent the application from closing
    }); 
```

如果您需要使用自定义关闭按钮关闭应用程序，请在按钮的`onAction`方法中触发事件：

```
 yourWindow.fireEvent(new WindowEvent(window, WindowEvent.WINDOW_CLOSE_REQUEST)); 
```

# python - 两个相同形状的复杂多维数组中的条件检查

> ID：10212367
> 
> 赞同：1
> 
> 时间：2012-04-18T15:11:04.650
> 
> 标签：python, numpy

我有两个 10x2x2 complex64 数组。我想找出哪些 2x2 数组中的一个或两个不是全为零：

```
import numpy
a = numpy.zeros((10,2,2), "complex64")
b = numpy.ones((10,2,2), "complex64")

empty_one_or_both = (a.reshape(10,4) != 0).all(axis=1) * (b.reshape(10,4) != 0).all(axis=1) # EDIT 
```

目标是仅对非空对执行其他操作，例如：

```
numpy.sqrt(a[empty_one_or_both]) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:12:41.650

从 numpy 1.7 开始，您可以执行以下操作：

```
a.all(axis=(1, 2)) & b.all(axis=(1, 2)) 
```

有关更多信息，请参阅[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.all.html#numpy.all)，但如果您使用的是旧版本，我认为您必须重塑或执行 all(1).all(1)。

# windows - 在第三方应用程序窗口中捕获文本的方法

> ID：10212370
> 
> 赞同：0
> 
> 时间：2012-04-18T15:11:16.583
> 
> 标签：windows, linux, text, window, capture

此问题针对 Windows 或 Linux 平台。这是一个普遍的问题，可能会被认为是有恶意的人，但事实并非如此。

我想知道是否有编程方法来读取另一个应用程序窗口中显示的文本？语言和 GUI 库是灵活的，即任何人都可以。

例如，Chrome 或 Firefox 浏览器窗口或独立的第三方应用程序中将有一个页面，该页面将在其内部窗口之一中显示一些统计信息。我想创建一个可以读取其中一些统计数据的应用程序。

对于这个问题的含糊之处，我深表歉意，但我正在为一个潜在的项目寻找可行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:50:15.693

在标准控件的窗口下，例如，如果使用 WM_SETTEXT 设置控件的文本，那么您可以通过枚举应用程序的窗口层次结构来找到该控件，并调用 WM_GETTEXT 来获取该文本。

如果文本是使用像 DrawText() 这样的 WinAPI 函数绘制的，那么它会更难。您可以使用 Windows 辅助功能 API，我从未使用过它，但它看起来很有希望。在这里，您会找到一些相关信息：

[http://blogs.msdn.com/b/oldnewthing/archive/2004/04/23/118893.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/04/23/118893.aspx)

也许您应该寻找可以实现您想要的 Chrome 或 Firefox API？

# c - 两个双打怎么可能是冲突的类型？

> ID：10212378
> 
> 赞同：0
> 
> 时间：2012-04-18T15:11:43.263
> 
> 标签：c

```
#include<stdio.h>
#include<math.h>

int main(void){
  double a=0,r=0,n=0;
  printf("Enter Constant a:");
  scanf("%lf",&a);
  printf("Enter Constant r:");
  scanf("%lf",&r);
  printf("Enter Variable n:");
  scanf("%lf",&n);

  double an;
  an = geom_rec(a,r,n);    // Line 15

  return 0;
}

double geom_rec(double a,double r,double n){    // Line 20
  double ans=a;
  return a;
} 
```

错误：

```
Line 20: error: conflicting types for 'geom_rec'
Line 15: error: previous implicit declaration of 'geom_rec' was here 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T15:13:22.413

您忘记为函数创建原型。

将以下内容放在您的`main`函数之前（您也可以将整个函数移到上面`main`）：

```
double geom_rec(double a,double r,double n); 
```

如果您调用之前未定义或原型化的函数，编译器会假定它返回`int`- 这与您的实际返回类型相冲突。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T15:14:05.770

您可以将函数的原型放在之前`main()`，也可以将函数本身放在之前`main()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:26:31.297

当编译器到达第 15 行时，它之前没有见过函数`geom_rec`，所以它假设函数返回`int`。

稍后，在第 20 行，您将函数定义为返回 a`double`并接受 3 个`double`参数，这与编译器“知道”该函数不同。所以它抱怨，让你有机会在使用它**之前为函数定义一个适当的原型。**

# php - 如何擦除具有背景颜色的图像的一部分？

> ID：10212379
> 
> 赞同：0
> 
> 时间：2012-04-18T15:11:43.850
> 
> 标签：php, gd

我有一个包含两种颜色的图像，背景颜色和其他颜色的文本，我想删除它的一部分文本。我该怎么做？

# java - 如何从 SQLiteOpenHelper 访问 StartActivityForResult()？

> ID：10212395
> 
> 赞同：0
> 
> 时间：2012-04-18T15:12:38.997
> 
> 标签：java, android, oop, android-activity

我想创建一个类来处理与我的应用程序的图像有关的所有事情。

为此扩展 SQLiteOpenHelper 是有意义的，因为它的大部分工作都是在数据库中完成的。

我的一种方法返回一个 ViewGroup 对象，我可以将其合并到几个更高级别的布局中。这个 ViewGroup 包含一组图片和一个添加新图片的按钮。

当我想使用**startActivityForResult()**操作处理按钮单击时，我的问题就出现了——它是 Activity 类的一部分，**在 SQLiteOpenHelper 类中不可用**。

**我接近这个错误吗？** 或者有没有办法从我的班级中访问 startActivityForResult() （和 onActivityResult()）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:22:56.090

> 扩展 SQLiteOpenHelper 来做到这一点

该类将只*打开*您的数据库文件（并创建您需要的表），仅此而已。您应该编写另一个数据库处理类，该类使用 open[ing]Helper 类打开数据库，并在数据库中执行所有插入/更新。

> 我接近这个错误吗？

海事组织 是的。用户事件逻辑是 Activity 的责任，所以它应该在那里或在你委托所有这些的类中。

应该从那里使用数据库功能 - 最好是异步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:28:16.243

这似乎可以通过将**Activity**作为参数传递给类，然后使用：

我的Activity.startActivityForResult(...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T03:27:55.567

正如布伦特所说，并`getParent()`作为参数传递给您的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T06:30:13.657

最好将您正在做的事情分开扩展活动而不是 SQLiteOpenHelper，并让另一个类说 MyDatabase 扩展 SQLiteOpenHelper 在此类中拥有所有数据库内容，并在您的活动中为任何数据库通信创建一个对象，这将更好地处理并做出改变。

# android - 从特定的floder加载带有webview的图像

> ID：10212396
> 
> 赞同：0
> 
> 时间：2012-04-18T15:12:41.757
> 
> 标签：android, image, webview

嗨，我制作了一个程序来加载文件夹中的图像。（路径是 sdcard/scheduler/pic.jpg）。我要加载这张图片并显示它。我的图片应该可以放大。所以我使用网络视图来显示图像。代码如下

```
mWebView = (WebView) findViewById(R.id.webview);

         mWebView.getSettings().setAllowFileAccess(true);
         mWebView.getSettings().setJavaScriptEnabled(true);
         mWebView.getSettings().setBuiltInZoomControls(true);

  String imagePath = "file:/sdcard/Schedular/233322.jpg";
          String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
          mWebView.loadData(html, "text/html","utf-8"); 
```

此代码不加载图像的问题。它只给出白屏。我认为这是路径的问题。请给个解决办法。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:16:00.013

您提供了错误的图像路径。`Environment.getExternalStorageDirectory()`会给你SD卡路径。从这个起点开始，您应该构建图像的路径。

# ios - 自定义手势识别器不适用于 UIImageView

> ID：10212397
> 
> 赞同：0
> 
> 时间：2012-04-18T15:12:41.897
> 
> 标签：ios, uiimageview, uigesturerecognizer

我正在使用[dysternis实现自定义的单指旋转手势»单指旋转手势识别](http://blog.mellenthin.de/archives/2012/02/13/an-one-finger-rotation-gesture-recognizer/)器，并且图像可以正常旋转，但是我有另一个按钮，点击时有一些事件，但现在我必须触摸按钮上的拖动来触发事件。

然后我尝试将相同的手势识别器仅添加到图像视图中，但它似乎并不好。它没有正确旋转图像。有什么需要改变的，或者我遗漏了什么。

这是我的代码的编辑版本。请注意，我已启用用户与 UIImageView 的交互。

在 OneFingerRotationGestureRecognizer.h 文件中：

```
#import <Foundation/Foundation.h>
#import <UIKit/UIGestureRecognizerSubclass.h>

@protocol OneFingerRotationGestureRecognizerDelegate <NSObject>
@optional
- (void) rotation: (CGFloat) angle;
- (void) finalAngle: (CGFloat) angle;
@end

@interface OneFingerRotationGestureRecognizer : UIGestureRecognizer
{
CGPoint midPoint;
CGFloat innerRadius;
CGFloat outerRadius;
CGFloat cumulatedAngle;
id <OneFingerRotationGestureRecognizerDelegate> target;
}

- (id) initWithMidPoint: (CGPoint) midPoint
            innerRadius: (CGFloat) innerRadius
            outerRadius: (CGFloat) outerRadius
                 target: (id) target;
- (void)reset;
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event;

@end 
```

在 OneFingerRotationGestureRecognizer.m 文件中

```
#include <math.h>

#import "OneFingerRotationGestureRecognizer.h"

@implementation OneFingerRotationGestureRecognizer

// private helper functions
CGFloat distanceBetweenPoints(CGPoint point1, CGPoint point2);
CGFloat angleBetweenLinesInDegrees(CGPoint beginLineA,
                                   CGPoint endLineA,
                                   CGPoint beginLineB,
                                   CGPoint endLineB);

- (id) initWithMidPoint: (CGPoint) _midPoint
            innerRadius: (CGFloat) _innerRadius
            outerRadius: (CGFloat) _outerRadius
                 target: (id <OneFingerRotationGestureRecognizerDelegate>) _target
{
    if ((self = [super initWithTarget: _target action: nil]))
    {
        midPoint    = _midPoint;
        innerRadius = _innerRadius;
        outerRadius = _outerRadius;
        target      = _target;
    }
    return self;
}

/** Calculates the distance between point1 and point 2\. */
CGFloat distanceBetweenPoints(CGPoint point1, CGPoint point2)
{
    CGFloat dx = point1.x - point2.x;
    CGFloat dy = point1.y - point2.y;
    return sqrt(dx*dx + dy*dy);
}

CGFloat angleBetweenLinesInDegrees(CGPoint beginLineA,
                                   CGPoint endLineA,
                                   CGPoint beginLineB,
                                   CGPoint endLineB)
{
    CGFloat a = endLineA.x - beginLineA.x;
    CGFloat b = endLineA.y - beginLineA.y;
    CGFloat c = endLineB.x - beginLineB.x;
    CGFloat d = endLineB.y - beginLineB.y;

    CGFloat atanA = atan2(a, b);
    CGFloat atanB = atan2(c, d);

    // convert radiants to degrees
    return (atanA - atanB) * 180 / M_PI;
 }

 #pragma mark - UIGestureRecognizer implementation

 - (void)reset
 {
    [super reset];
    cumulatedAngle = 0;
 }

 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
 {
    [super touchesBegan:touches withEvent:event];

    if ([touches count] != 1)
    {
        self.state = UIGestureRecognizerStateFailed;

        return;
    }
 }

 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
 {
    [super touchesMoved:touches withEvent:event];

    if (self.state == UIGestureRecognizerStateFailed) return;

    CGPoint nowPoint  = [[touches anyObject] locationInView: self.view];
    CGPoint prevPoint = [[touches anyObject] previousLocationInView: self.view];

    // make sure the new point is within the area
    CGFloat distance = distanceBetweenPoints(midPoint, nowPoint);
    if (   innerRadius <= distance
        && distance    <= outerRadius)
    {
        // calculate rotation angle between two points
        CGFloat angle = angleBetweenLinesInDegrees(midPoint, prevPoint, midPoint, nowPoint);

        // fix value, if the 12 o'clock position is between prevPoint and nowPoint
        if (angle > 180)
        {
           angle -= 360;
        }
        else if (angle < -180)
        {
           angle += 360;
        }

        // sum up single steps
        cumulatedAngle += angle;

        // call delegate
        if ([target respondsToSelector: @selector(rotation:)])
        {
           [target rotation:angle];
        }
     }  
     else
     {
        // finger moved outside the area
        self.state = UIGestureRecognizerStateFailed;
     }
  }

  - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
  {
     [super touchesEnded:touches withEvent:event];

     if (self.state == UIGestureRecognizerStatePossible)
     {
        self.state = UIGestureRecognizerStateRecognized;

        if ([target respondsToSelector: @selector(finalAngle:)])
        {
            [target finalAngle:cumulatedAngle];
        }
     }
     else
     {
        self.state = UIGestureRecognizerStateFailed;
     }

     cumulatedAngle = 0;
  }

  - (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
  {
     [super touchesCancelled:touches withEvent:event];

     self.state = UIGestureRecognizerStateFailed;
     cumulatedAngle = 0;
  }

  @end 
```

在查看 Contoller.m 文件中：

```
@interface deviceDetailViewController ()
{
  @private CGFloat imageAngle;
  @private OneFingerRotationGestureRecognizer *gestureRecognizer;
}

- (void) updateTextDisplay;
- (void) setupGestureRecognizer;
@end

@implementation deviceDetailViewController
- (void)viewDidLoad
{
    [self setupGestureRecognizer];

    [super viewDidLoad];
}
#pragma mark - CircularGestureRecognizerDelegate protocol

- (void) rotation: (CGFloat) angle
{
    // calculate rotation angle
    imageAngle += angle;
    if (imageAngle > 360)
        imageAngle -= 360;
    else if (imageAngle < -360)
        imageAngle += 360;

    // rotate image and update text field
    deviceRotator.transform = CGAffineTransformMakeRotation(imageAngle *  M_PI / 180);

    [self updateTextDisplay];
 }

 - (void) finalAngle: (CGFloat) angle
 {
    // circular gesture ended, update text field
    [self updateTextDisplay];
 }

 #pragma mark - Helper methods

// Updates the text field with the current rotation angle.
- (void) updateTextDisplay
{
    textDisplay.text = [NSString stringWithFormat: @"\u03b1 = %.2f", imageAngle];
}

// Addes gesture recognizer to the view (or any other parent view of image. Calculates        midPoint
// and radius, based on the image position and dimension.
- (void) setupGestureRecognizer
{
    // calculate center and radius of the control
    CGPoint midPoint = CGPointMake(deviceRotator.frame.origin.x + deviceRotator.frame.size.width / 2,deviceRotator.frame.origin.y +   deviceRotator.frame.size.height / 2);
    CGFloat outRadius = deviceRotator.frame.size.width / 2;

    // outRadius / 3 is arbitrary, just choose something >> 0 to avoid strange 
    // effects when touching the control near of it's center
    gestureRecognizer = [[OneFingerRotationGestureRecognizer alloc] initWithMidPoint: midPoint
                                                                         innerRadius: outRadius / 3 
                                                                         outerRadius: outRadius
                                                                              target: self];
    //    [self.deviceRotator addGestureRecognizer:gestureRecognizer];
   [self.view addGestureRecognizer: gestureRecognizer];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:04:49.883

我已将此自定义手势添加到整个视图中，但`UITapGestureRecognizer`在按钮本身上实现了另一个手势，现在它工作得很好。

# facebook - 在没有浏览器的情况下获取访问令牌

> ID：10212404
> 
> 赞同：-1
> 
> 时间：2012-04-18T15:12:59.843
> 
> 标签：facebook, oauth, facebook-access-token

为了给你一些背景信息，我目前正在开发一个应用程序的后端，该应用程序在一个非常小的 32 字符 LCD 屏幕上记录 Facebook 通知的数量，连接到[Arduino](http://arduino.cc)。为此，我打开了一个 Facebook 应用程序，并在我的服务器上有一个页面，用于重定向用户以获得授权和权限，然后继续获取访问令牌。在我的浏览器中，所有重定向都运行良好，我最终得到了通知的 JSON 表示。但是，我希望它能够自主工作 - 当我尝试使用 Ruby 获取页面、解析结果并将它们写入串行端口时，结果是用于将用户重定向到 Facebook 对话框的 javascript，而不是通知。返回 IE 客户端代码，而不是执行（不足为奇）。

我的问题是是否无论如何都可以获得授权，并在不重定向到另一个页面或在客户端运行代码的情况下请求访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:15:23.743

您如何“使用 Ruby”获取此页面，因为如果您将获得重定向，您可以检查请求状态代码以及它是否是 302 读取位置并执行重定向读取位置 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:23:44.390

看看这个：[https ://developers.facebook.com/docs/authentication/devices/](https://developers.facebook.com/docs/authentication/devices/)

另一种方法是“预生成”一个 AccessToken 并简单地使用硬编码或作为输入表单或您喜欢的任何内容。这样您就不必往返于您的服务器。

# c++ - boost::asio::deadline_timer renew 仍然调用处理函数

> ID：10212408
> 
> 赞同：1
> 
> 时间：2012-04-18T15:13:12.957
> 
> 标签：c++, boost, timer, boost-asio

在下面的官方提升链接中：http: [//www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/reference/deadline_timer.html](http://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/reference/deadline_timer.html)。

您可以看到我们可以在异步截止时间计时器到期之前对其进行更新。没关系，代码有效：当计时器更新时，旧的 async_wait 被取消，这很好，但令人烦恼的是当它被取消时，它仍然调用处理程序：

```
void handler(const boost::system::error_code& error)
{
  if (!error)
  {
    // Timer expired.
  }
}

...

// Construct a timer with an absolute expiry time.
boost::asio::deadline_timer timer(io_service,
    boost::posix_time::time_from_string("2005-12-07 23:59:59.000"));

// Start an asynchronous wait.
timer.async_wait(handler); 
```

更改活动的deadline_timer 的到期时间

在有挂起的异步等待时更改计时器的到期时间会导致这些等待操作被取消。要确保与计时器关联的操作只执行一次，请使用以下内容： used：

```
void on_some_event()
{
  if (my_timer.expires_from_now(seconds(5)) > 0)
  {
    // We managed to cancel the timer. Start new asynchronous wait.
    my_timer.async_wait(on_timeout);
  }
  else
  {
    // Too late, timer has already expired!
  }
}

void on_timeout(const boost::system::error_code& e)
{
  if (e != boost::asio::error::operation_aborted)
  {
    // Timer was not cancelled, take necessary action.
  }
} 
```

**我想知道有没有办法在不让旧计时器调用处理程序的情况下更新和取消旧计时器，在这种情况下是 on_timeout() 函数**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:19:30.893

可以通过在执行实际操作之前添加一行检查（查看它是否是中止/取消事件）来修复它：

```
void handler1(const boost::system::error_code &e)
{
    if (e != boost::asio::error::operation_aborted) // here is the important part
        {
            //do actual stuff here if it's not a cancel/abort event
        }
} 
```

# jquery-mobile - jquery mobile 1.1.0 在页面上呈现垃圾字符

> ID：10212409
> 
> 赞同：1
> 
> 时间：2012-04-18T15:13:17.503
> 
> 标签：jquery-mobile

我有一个 jquery 移动网站，里面有几个简单的页面，我可以在它们之间导航。问题是 jquery mobile 在我的最后一页之后向 DOM 呈现了一些垃圾字符“â€‹”。垃圾总是相同的，位于页面的左上角，并且在页面转换之间可见。也许值得注意的是我使用的是固定页脚。

有没有人有同样的经历？

绒球

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:43:58.387

我建议您通过 html[验证器](http://validator.w3.org)运行您的代码。我最近遇到了同样的问题。在我的情况下，这是由未关闭的 div 引起的。

# php - CakePHP 使用 Digest Authenticate：注销后无需密码即可登录成功

> ID：10212414
> 
> 赞同：2
> 
> 时间：2012-04-18T15:13:36.380
> 
> 标签：php, cakephp, cakephp-2.0, digest-authentication

我正在使用 CakePHP 创建一个简单的应用程序，我决定使用 Digest Authenticate，因为我无法获得 SSL 证书并且不希望通过表单以纯文本形式发布密码。

所以一切都很好，登录，注销，一切都根据登录状态进行。但是，当我再次登录时注销后，它会自动登录而无需输入密码或用户名。这使得在我退出一段时间（一天左右？）之前无法更改帐户，并且它再次要求输入用户名和密码。如果我使用公共计算机并且不希望下一个人在没有密码提示的情况下随意登录我的帐户，这也是一个安全风险。

我的问题是，Cake 中是否有我遗漏的设置，或者这是我的浏览器会记住我的凭据并在应用程序要求时提供它们。我觉得注销应该清除凭据。我在 Chrome 和 Firefox 中都试过，结果相同，我也没有检查任何“记住我的密码”框。

我的身份验证组件启动：

```
public $components = array('Session', 'RequestHandler', 'Auth' => array(
            'authenticate' => array('Digest'),
            'loginRedirect' => array('controller' => 'posts', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'posts', 'action' => 'index'),
        )); 
```

登录功能：

```
public function login() {
//No longer Auth Magic
 if ($this->Auth->login()) {
   return $this->redirect(array('controller' => 'posts', 'action' => 'index'));
 } else {
   $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
 }
   $this->autoRender = false;
} 
```

注销功能：

```
public function logout() {
   $this->Auth->logout();
   return $this->redirect($this->Auth->logout());

} 
```

那么有什么想法吗？我应该提到的唯一另一件事是我必须手动包含 DigestAuthenticate.php 才能使用 DigestAuthenticate::password 函数，Cake 抛出一些错误，说 DigestAuthenticate 类不存在。在此处查看问题：http: [//ask.cakephp.org/questions/view/digestauthenticate](http://ask.cakephp.org/questions/view/digestauthenticate)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:19:49.360

根据 CakePHP Book [[这里]](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#logging-users-out)：

> 对于所有客户端来说，注销使用 Digest 或 Basic auth 登录的用户是很困难的。大多数浏览器将在它们仍然打开的时间内保留凭据。某些客户端可以通过发送 401 状态码来强制注销。更改身份验证领域是另一种适用于某些客户端的解决方案。

这可能不是你想听到的，但是...

# jquery - Jquery 用于悬停缩略图，点击完整图片。不工作

> ID：10212416
> 
> 赞同：0
> 
> 时间：2012-04-18T15:13:42.490
> 
> 标签：jquery, video, click, hover, thumbnails

使用随机位置 jquery 和悬停/单击功能的组合，在悬停时显示随机位置的缩略图，并在单击时在右上角显示全尺寸。

我有两个问题：

1.  它不适用于视频，当 div 返回 display:none 时，视频会继续播放。此外，视频缩略图不遵循 z-index:-50 in chrome 并将其置于其他所有内容之上。

2.  这似乎是一种非常复杂的方法。

示例：[http ://roingbaer.com](http://roingbaer.com)

非常感谢任何帮助。

HTML：

```
<div class="text">
    <p>Lorem Ipsum is simply dummy</p>
    <div class="hover">
        <a href="http://example.com">text</a>
        <div class="front">
            <img src="http://images.roingbaer.com/ludvig.png"/>
        </div>
    </div>
    <p>, of the printing and typesetting industry.</p>
    <div class="hover">Link 1
        <div class="front">
            <img src="http://24.media.tumblr.com/tumblr_lyz7fjMdnN1rp3eymo1_r2_500.jpg"/>
        </div>
        <div class="back">
            <img src="http://24.media.tumblr.com/tumblr_lyz7fjMdnN1rp3eymo1_r2_500.jpg"/>
        </div>
    </div>
    <p>,</p>
    <div class="hover">Link 2
        <div class="front">
            <iframe frameborder="0" height="233" src="http://www.youtube.com/embed/VMeXGE_a8Gg" width="400"></iframe>
        </div>
        d<div class="back">
            <iframe frameborder="0" height="480" src="http://www.youtube.com/embed/VMeXGE_a8Gg" width="853"></iframe>
        </div>
    </div>
</div> 
```

CSS：

```
.back { 
    display:none;
    width:100%;
    height:100%;
    position:fixed;
    top:0;
    text-align:right; 
}

.front { 
    display:none;
    max-height:200px;
    max-width:auto;
    position:fixed;
    z-index:-50;
    top:0;
    right:100px; 
}

.hover { 
    cursor:pointer;
    margin:0;
    padding:0;
    font-style:italic;
    display:inline; 
} 
```

jQuery：

```
$(".front").each(function() {
    var right = Math.floor(Math.random()*800);
    var top = Math.floor(Math.random()*500); 
    $(this).css({'margin-right': right});
    $(this).css({'margin-top': top});
});

hoverdiv = $("div.hover")
hoverdiv.on("hover", function() {
    $(this).children(".front").show()
});

hoverdiv.on("mouseleave", function() {
    $(this).children(".front").hide()
})

hoverdiv.on("click", function() {
    $(this).children(".back").toggle()
    $(this).children(".front").hide()
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:00:14.830

你可能想看看这个： [http ://www.trustweb.it/it/blog/download/jquery-html5-video-tooltip.html](http://www.trustweb.it/it/blog/download/jquery-html5-video-tooltip.html)

# java - 外部活动上的 startactivityforresult()？

> ID：10212419
> 
> 赞同：0
> 
> 时间：2012-04-18T15:13:46.950
> 
> 标签：java, android, android-activity, android-intent

我有两个应用程序，A 和 B，这两个应用程序都是由我制作的，但它们位于不同的包中。我想从我的活动 B 中提取一些数据到我的活动 A。

为此，我使用`ActivityA.startactivityforresult(ActivityB)`.

这工作正常，直到我需要从 ActivityB 检索我的数据，然后我开始为我的 getExtra() 调用获取 NullpointerExceptions。

**活动A：**

```
protected void someMethod()
{
    Intent intent = getPackageManager().getLaunchIntentForPackage("some.package.app");
    intent.putExtra("action", "retrieveData");
    startActivityForResult(intent, 7854);
}

protected void onActivityResult (int requestCode, int resultCode, Intent intent)
{
    Log.d(TAG, "test: " + intent.getExtras().getString("test"));
} 
```

**活动B：**

```
protected void onResume ()
{
    if (getIntent().getExtras() != null && getIntent().getExtras().getString("action").equals("retrieveData"))
    {
        Intent intent = getIntent();
        intent.putExtra("test", "This is a test response");

        setResult(7854, intent);
        finish();
    }
} 
```

* * *

`OUTPUT: test: null`

我做错了什么，还是根本不允许这样做？

**更新**

```
04-18 18:28:34.908: E/AndroidRuntime(15711): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=7854, result=0, data=null} to activity {dk.rasive.testA/dk.rasive.testA.TestActivity}: java.lang.NullPointerException
04-18 18:32:48.892: E/AndroidRuntime(15801):    at dk.rasive.testA.TestActivity.onActivityResult(TestActivity.java:245) 
```

第 245 行包含此代码

```
Log.d(TAG, "test: " + intent.getExtras().getString("test")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:31:02.280

我没有尝试在不同的应用程序中使用活动，但活动 A 需要覆盖

```
onActivityResult(int requestCode, int resultCode, Intent data) 
```

还

```
setResult 
```

采用 ResultCode 而不是 RequestCode 尽管这不会对您发布的代码段产生影响。

编辑：

androidmanifest.xml

```
 <activity
        android:name="ActivityB"
        <intent-filter>
            <action android:name='retrieveData'/>
        </intent-filter>
    </activity> 
```

# mysql - 一个 mySQL 数据库非常慢，而其他数据库很好

> ID：10212429
> 
> 赞同：0
> 
> 时间：2012-04-18T15:14:23.893
> 
> 标签：mysql

我有一个当前运行速度非常慢的 mysql 数据库。服务器上有许多数据库，所有其他数据库都运行良好，但是这个数据库非常慢，通常需要 2-10 秒进行非常简单的更新（更新小表中的 1 行）或选择查询（从小表中选择 1 行）。

我的问题是问是否有人能想到这个数据库运行如此缓慢的原因。流量很小（它是开发站点的数据库）。我已经排除了我的脚本，因为 phpMyAdmin 也很慢并且经常与这个数据库超时。我还检查了正在运行的进程以检查是否有任何异常，并且可能没有正在进行的进程，但数据库仍然会运行得很慢。

所以请任何人都可以阐明这里可能发生的事情。如果您需要，我很乐意提供额外的信息。

编辑：

除了评论，这里是一个运行缓慢的查询示例：

```
UPDATE `Users` SET `last active` = 1334763602 WHERE `ID` = 1 
```

这个简单的更新查询需要 2 到 10 秒才能完成。ID 是一个主键，这个表有大约 30 条记录。

除了我最初的问题之外，SELECT 似乎还没有那么糟糕，尽管我看到 SELECT 的时间很慢，许多 SELECT 语句当前运行得很快，而 UPDATE 仍然很慢。

编辑2：

经过更多调查，它似乎可能与 InnoDB 表类型相关联。我已将一个表更改为 MyISAM，而在 InnoDB 中花费 1.5 秒的查询在 MyISAM 中只花费了 0.0006 秒。我想我的问题变成了如何最好地调整 InnoDB 表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:52:41.537

看起来问题与数据库设置和 InnoDB 表有关。当数据库使用 MyISAM 时，它运行良好，所以我们对此进行了调查，结果发现默认缓冲池大小太小，导致内存问题。提高了默认缓冲池大小的值后，数据库的执行速度要快得多（如果不是更多的话，可能快 1000 倍左右）。

# mysql - MySQL 双重排序

> ID：10212430
> 
> 赞同：6
> 
> 时间：2012-04-18T15:14:25.110
> 
> 标签：mysql, sql-order-by

我想对我的用户列表进行双重排序。这可能在一个 MySQL 查询中实现吗？

1.  排序方式`activity`
2.  排序方式`ID`

例如：

```
1  Jack   Active 
2  Jill   Active 
5  Jens   Active  
3  Harry  Inactive 
4  Larry  Inactive 
6  Luke   Inactive 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T15:16:36.037

您可以使用该`ORDER BY`子句根据需要对任意数量的列进行排序。

```
SELECT id, name, activity
FROM userList
ORDER BY Activity, ID 
```

我建议阅读 MySQL`ORDER BY`文档。您可以按`ASC`或`DESC`按顺序对数据进行排序：[MySQL：ORDER BY Optimization](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T15:16:30.060

```
SELECT id, name, activity
FROM your_table
ORDER BY activity ASC, id ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:16:48.307

```
Select * from table order by activity, ID; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T15:16:59.413

```
SELECT *
FROM table_name
ORDER BY activity, ID; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T15:18:27.420

是的，

```
SELECT (user.name|| ' ' || user.status) AS sorted_list
FROM STUDENTS
ORDER BY user.status, user.name 
```

# ruby-on-rails - 防止 ruby on rails 3 解析 JSON 帖子

> ID：10212434
> 
> 赞同：18
> 
> 时间：2012-04-18T15:14:37.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, http, post

我在 Ruby on Rails 3 中有一个控制器方法，它接受 application/JSON 作为内容类型。这一切都按预期工作，但我实际上不希望 rails 自动解析 POST 请求正文中的 JSON。这种方法充当网关，只是将信息传送到队列中，并且可能非常大。我不想浪费时间将数据处理到@_params，因为它是不必要的。

我相信我可以通过将请求标头中的内容类型设置为其他内容来解决这个问题，但我希望对 HTTP 请求在语义上是正确的。

如何禁用此功能？

编辑：更具体地说，我如何才能为这条路线编辑此功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T15:40:27.867

参数解析在 actionpack 的`lib/action_dispatch/middleware/params_parser.rb`.

我想说你最好的办法就是用 Rack 拦截请求，就像这样。

在`lib/raw_json.rb`

```
module Rack
  class RawJSON
    def initialize(app)
      @app = app
    end

    def call(env)
      request = Request.new(env)
      if request.content_type =~ /application\/json/i
        # test request.path here to limit your processing to particular actions
        raw_json = env['rack.input'].read
        env['CONTENT_TYPE'] = 'application/x-www-form-urlencoded'
        env['rack.input'] = StringIO.new("raw_json=#{raw_json}")
      end
      return @app.call(env)
    end
  end
end 
```

在`config.ru`，在调用之前插入这个`run <your app name>::Application`

```
require 'raw_json'
use Rack::RawJSON 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:52:07.003

它可能会被烘烤，但看看代码：

```
 module ActionDispatch
  class ParamsParser
    DEFAULT_PARSERS = {
      Mime::XML => :xml_simple,
      Mime::JSON => :json
    }

    def initialize(app, parsers = {})
      @app, @parsers = app, DEFAULT_PARSERS.merge(parsers)
    end

     [ ... ]

        strategy = @parsers[mime_type] 
```

因此，如果您可以安排向此初始化程序发送哈希，则可以添加或覆盖默认值。不确定是否允许删除，但可以使用空的解析器方法。

解析器在这里回答：[如何在 Rails 3.1 中初始化 ActionDispatch::ParamsParser？](https://stackoverflow.com/questions/7556150/how-do-i-initialize-actiondispatchparamsparser-in-rails-3-1)

代码来自 actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:27:15.800

从单个请求中解析 JSON 的开销相对较低。您是否有特定的理由相信处理 JSON 会导致整体处理速度变慢？

如果没有，那么我建议您保持原样，直到可以将其确定为问题为止。

将 rails 配置为不解析 JSON（通过某种机架配置或其他方法）将在您的应用程序中创建至少一个未在标准*Rails Way*中处理的路由。

最终，您可能会发现自己必须对这些数据进行某种处理。或者，您可能需要在它前面设置某种安全措施。或者您可能想要记录它并将其与发送它的用户相关联。当那一天到来时，您（或您团队中的其他人）将需要进入并更改此非标准实施。

在 Rails 实现中以非标准方式做事会增加维护软件的复杂性和时间。这也是常见的缺陷来源，因为人们对非标准加工不太熟悉。

因此，除非这是一个真正的问题，否则我建议让 rails 处理 JSON，然后简单地通过普通的*Rails Way*传递它。

# macos - 沙盒限制 freopen Mac OS X

> ID：10212438
> 
> 赞同：1
> 
> 时间：2012-04-18T15:14:46.950
> 
> 标签：macos, redirect, operating-system, sandbox

所以我有一个运行良好的应用程序，但是当沙盒发布时，我想我不妨开始遵守。在我的应用程序中，用户可以调用 python，而我一直在做的是 stdout 和 stderr 的简单重定向

```
freopen("error.log","w",stderr); 
```

然后通过 a 调用 Python

```
status = PyRun_SimpleString(utfString); 
```

从那里我可以简单地回读结果/错误并继续生活。但是对于沙箱，这是不允许的，因为 /dev/stdout 和 /dev/stderr 在我的应用程序之外。我尝试在权利中放入临时文件例外：

```
com.apple.security.temporary-exception.files.absolute-path.read-write => Array
{
    Item 0 => /dev/stdout
    Item 1 => /dev/stderr
} 
```

但这也无济于事......

有谁知道如何解决这个问题？这段代码运行良好，我理解沙盒，但我想保持 python 界面简单，快速重定向似乎对我来说是可以接受的；毕竟，每个人都可以对 stdout/stderr 进行读写操作......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:25:04.027

答案是路径不正确，使用沙箱，重定向很好，但你需要对 NSDocumentsDirectory 中的文件执行此操作......所以，如果你开始认为 iOS 一样，你很好，没有魔法，回想一下需要在您的应用程序的文档目录中进行写入，并且 stdout/stderr 的重定向是写入...

# ios - 在 iOS 项目中为常用宏和调试功能添加 .h 文件的合适位置在哪里？

> ID：10212441
> 
> 赞同：0
> 
> 时间：2012-04-18T15:14:54.900
> 
> 标签：ios

比如说，如果我有一个或两个调试函数或宏，那么将它们放在 iOS 项目中以便所有其他文件都可以使用该函数的好地方是哪里？它会是`.h`某个地方的文件，并且所有使用它的文件都需要一个`#import "filename.h"`? 有没有普遍的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:16:15.203

如果您需要它们可用于整个项目并且它不占用太多空间，我通常只是将其插入到项目的`.pch`文件中。如果很长，我把它放在一个`.h`文件中，`#import`文件中的`.pch`文件。

# python - 删除python中的重复代码

> ID：10212442
> 
> 赞同：20
> 
> 时间：2012-04-18T15:14:56.753
> 
> 标签：python

python中是否有用于重复代码检查器的库？我使用 python IDE，但在重构代码时遇到了麻烦。是否有任何可用的 python 库建议程序/项目中的重复代码？

更新：我找到了克隆挖掘机，根据它的网站，

我们已经在几个开源项目的源代码上测试了 Clone Digger。当前报告格式存在以下缺点：

> 使用差异算法突出显示差异。这种突出显示的方式与基于抽象语法树的比较语句序列的相似性算法没有共同之处。
> 
> 在计算相似度时会考虑类和函数注释，但它们不会出现在输出中。因此，一些克隆对可能看起来相等但标记为收敛。

还有比这更好的工具吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-18T15:53:57.937

Pylint 检查相似/重复代码：[https ://pylint.readthedocs.io/en/latest/technical_reference/features.html#similarities-checker](https://pylint.readthedocs.io/en/latest/technical_reference/features.html#similarities-checker)

用法：

```
pylint --disable=all --enable=similarities src/yourcode/ 
```

* * *

## 回答 #2

> 赞同：-15
> 
> 时间：2012-04-18T15:25:05.913

不，没有重复代码检查器，因为无法轻松区分它是否重复，因为根据程序的不同，可能存在对“重复”代码的依赖关系，并且可能会覆盖事物等。. 总而言之，不，我所知道的 python 没有重复的代码检查器。但是，在这种情况下，使用更好的 IDE 来跟踪变量使用情况可能会有所帮助。:)

# python - 将列表项映射到带参数的函数

> ID：10212445
> 
> 赞同：59
> 
> 时间：2012-04-18T15:15:02.897
> 
> 标签：python

有没有办法将列表项与参数一起映射到函数？

我有一个清单：

```
pages = [p1, p2, p3, p4, p5...] 
```

我必须调用`myFunc`与每个列表元素对应的函数以及其他参数，以便可以计算以下内容

```
myFunc(p1, additionalArgument)
myFunc(p2, additionalArgument) 
```

等等...

有什么优雅的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2015-08-13T18:17:30.443

您还可以使用 lambda 函数：

```
map(lambda p: myFunc(p, additionalArgument), pages) 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-04-18T15:16:19.577

使用列表推导：

```
result = [myFunc(p, additionalArgument) for p in pages] 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2012-04-18T15:16:34.413

您可以使用列表理解

```
[myFunc(p, additionalArgument) for p in pages] 
```

或者`functools.partial()`

```
map(functools.partial(myFunc, some_arg=additionalArgument), pages) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-12-02T14:29:36.223

请注意，如果您打算`map`用于**分布式计算**（即使用[multiprocessing](https://docs.python.org/3/library/multiprocessing.html)），它不会像预期的那样解包参数。假设您想将调用分配给`myFunc`（接受两个参数：`page`和`additionalArgument`）：

```
pages = [p1, p2, p3, p4, p5...] 
```

如果您指定`args`（元组）列表，即

```
args = [(page, additionalArgument) for page in pages] 
```

`map` **不会**解包`args`元组，只会将一个参数（元组）传递给`myFunc`：

```
pool.map(myFunc, args)  # map does not unpack the tuple 
```

您**将**需要改用[multiprocessing.starmap](https://docs.python.org/3/library/multiprocessing.html#multiprocessing.pool.Pool.starmap)

> `starmap`就像`map()`，除了 iterable 的元素应该是作为参数解包的 iterables。

IE

```
pool.starmap(myFunc, args)  # tuples are unpacked and two arguments are passed to myFunc 
```

# php - SQL 编程范式 - 客户端与服务器

> ID：10212449
> 
> 赞同：0
> 
> 时间：2012-04-18T15:15:09.527
> 
> 标签：php, sql, sql-server, tsql, paradigms

我正在研究一个 MS SQL 数据库。我们处于早期开发阶段，我正在使用 PHP，而我的一个同事正在使用 ASP.NET。最后，我们可能会结合我们的努力并坚持其中一个。出于这个原因，我认为在数据库上的存储过程中尽可能多地进行编程是明智的。

因此，我目前正在处理用户上传文本文件、重新排列数据并插入服务器上的表中的这一点。现在我基本上面临三个选择：

1.  在 PHP 中进行所有重新排列并构建查询字符串并执行它。
2.  将数据按原样插入到不同的表中，并调用存储过程以重新排列数据并将其插入到更大的目标表中。
3.  只需将数据作为参数传递到一个存储过程中，该过程同时执行所有操作和连接。

从我目前阅读的内容来看，我知道选项 1 可能不太好。真的我的问题是，选项3在另一个方向上是否太远了？我觉得这会更困难，但它会是最便携的，而且我不会有那个额外的表，服务器上还有尚未处理的数据。或者选项 2 是可行的方法，因为它可能对任何在我之后试图分析我的代码在做什么的人来说最有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:24:11.503

我不喜欢让我的存储过程执行某种逻辑来处理读取文件和清理。我会将过程分成不同的逻辑层来处理这个问题。我想在我的业务逻辑级别进行文件操作并将干净的数据提供给存储过程（我的数据访问层），以便它可以将数据保存到相关表中。这样，如果您想从应用程序的不同部分/尝试保存已清理数据的不同应用程序保存数据，则可以使用相同的数据访问方法。我认为这是更具可扩展性的解决方案。

所以我建议你在 PHP 文件中进行文件清理操作，然后将数据传递给存储的 proc。确保您没有传递要保存在查询字符串中的数据，而是直接从那里读取。因为那样你将成为[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)的受害者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:23:18.213

I'd suggest adding some middle layer between two web parts (probably SOAP service so both PHP and ASP.NET can easily work with it) that would do all the processing and data manipulation.

# jsf-2 - 如何在关闭时从 p:dialog 中清除 p:message？

> ID：10212450
> 
> 赞同：7
> 
> 时间：2012-04-18T15:15:11.727
> 
> 标签：jsf-2, primefaces

我有一个使用 Primefaces p:dialog 组件的 JSF 2.0 页面。用户可以在对话框中输入信息并单击保存/取消。如果他们有验证错误，它会显示在对话框中。当他们关闭或取消对话框时，我希望任何 p:message 组件都被“清除”，即如果用户再次打开对话框，他们将不会看到旧的验证消息。

用例是：用户打开对话框，未填写所有必填字段，单击保存，对话框中显示必填字段错误消息。用户单击取消关闭对话框。然后用户单击按钮再次打开对话框。我不希望他们看到以前的验证消息（目前他们可以）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T15:23:45.197

在打开对话框组件之前进行 Ajax 更新。

例如

```
<p:commandButton ... update=":dialog" oncomplete="dialog.open()" /> 
```

它不仅会清除消息，还会输入字段值（或至少将它们保留为正确的默认值）。

# java - 从浏览器使用 Outlook 打开 .ics 文件

> ID：10212451
> 
> 赞同：3
> 
> 时间：2012-04-18T15:15:16.973
> 
> 标签：java, jsp, outlook, icalendar, ical4j

我正在开发一个导出日历的应用程序。我遇到的问题是日历是下载的，而不是用 Outlook 打开的。这是我的代码：

1) 主页面有图片链接导出日历：

```
<img src="/calendar.png" width="32" Style="width: 32px; height:32px;" title="Calendar" onClick="javascript:document.getElementById('exportCal').submit();">

<form id="exportCal" action="Calendar.jsp" target="_blank" method="post">
    <INPUT TYPE="hidden" ID="calendarData" NAME="calendarData" VALUE=""/>
</form> 
```

2）在链接重定向到的jsp中，我生成.ics（使用iCal4j库）文件并将其附加到响应中：

```
response.setHeader ("Content-Disposition", "inline;filename=\"mycalendar.ics\"");
response.setContentType("text/calendar");

Calendar calendar = new Calendar();
calendar.getProperties().add(new ProdId("-//Ben Fortuna//iCal4j 1.0//EN"));
calendar.getProperties().add(Version.VERSION_2_0);
calendar.getProperties().add(CalScale.GREGORIAN);

java.util.Calendar cal = java.util.Calendar.getInstance();
cal.set(java.util.Calendar.MONTH, java.util.Calendar.DECEMBER);
cal.set(java.util.Calendar.DAY_OF_MONTH, 25);

// initialise as an all-day event..
VEvent christmas = new VEvent(new Date(cal.getTime()), "Christmas Day");

// Generate a UID for the event..
UidGenerator ug = new UidGenerator("1");
christmas.getProperties().add(ug.generateUid());

calendar.getComponents().add(christmas);
System.out.println(calendar);

ServletOutputStream fout = response.getOutputStream();

CalendarOutputter outputter = new CalendarOutputter();
outputter.output(calendar, fout);

fout.flush(); 
```

然后，.ics 被下载。但我真正想做的是用 Outlook 打开它。有没有办法做到这一点？

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:02:55.610

这似乎是特定于浏览器的行为。避免自动下载（*在 chrome 中*）的唯一方法是使用[此 SO 帖子中建议的](https://stackoverflow.com/a/7532838/175679)**webcal**协议。Webcal 通常仅用于动态日历订阅 - 而不是静态日历项目。如果您在下载后打开 ICS - 它应该在 Outlook 中打开。

```
<p>A <a href="webcal://mycalendar.ics">webcal ics link</a></p> 
```

# neo4j - neo4j：根据问卷相似的答案找到相似的用户

> ID：10212459
> 
> 赞同：1
> 
> 时间：2012-04-18T15:15:45.533
> 
> 标签：neo4j

我尝试根据问卷中的答案找到相似的用户。问卷包含诸如“工作”->回答“园丁”->重要性“3”之类的问题。特殊的是，有一个字段“重要性”，所以有可能用户都回答了gardener，但重要性值不同。

最后，我试图找到彼此最相似的用户。

谢谢

# python - 基本缩进 - Python

> ID：10212460
> 
> 赞同：1
> 
> 时间：2012-04-18T15:15:49.907
> 
> 标签：python

```
#RockPS
import random

Choices=['R','P','S']
UserScore=0
CpuScore=0
Games=0

while Games<6:
    UserChoice=input('Rock, paper or scissors? (Type R, P or S respectively)')
    if UserChoice in Choices:
        Games+=1
CpuChoice = random.choice(Choices)   

if UserChoice == 'S' and CpuChoice == 'P':
    UserScore+=1
if UserChoice == 'P' and CpuChoice == 'R':
    UserScore+=1
if UserChoice == 'R' and CpuChoice == 'S':
    UserScore+=1
if UserChoice == 'S' and CpuChoice == 'R':
    CpuScore+=1
if UserChoice == 'P' and CpuChoice == 'S':
    CpuScore+=1
if UserChoice == 'R' and CpuChoice == 'P':
    CpuScore+=1

print(UserScore, CpuScore)
if UserScore>CpuScore:
    print('Well done, you won!')
if UserScore==CpuScore:
    print('You tied!')
if UserScore<CpuScore:
    ('Unlucky, you lost.') 
```

我是 Python 新手，所以很可能我错过了一些明显的东西。程序运行良好。这是一个摇滚，纸或剪刀游戏。进行 5 场比赛，比赛结束时列出分数。目前，无论哪种方式，它都只说 1 0、0 0 或 0 1，只计算 1 场比赛。我不确定这是为什么。我认为这与我的缩进有关，因为我没有看到我的循环有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:20:51.363

这是发生了什么：这部分代码

```
while Games<6:
    UserChoice=input('Rock, paper or scissors? (Type R, P or S respectively)')
    if UserChoice in Choices:
        Games+=1 
```

执行 6 次，但从这里开始的所有剩余行：

```
CpuChoice = random.choice(Choices)   

if UserChoice == 'S' and CpuChoice == 'P':
    UserScore+=1
if UserChoice == 'P' and CpuChoice == 'R':
    UserScore+=1 
```

仅在循环迭代完成后执行一次。所有的`if UserChoice ==`行都应该缩进，以便它们成为循环体的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:19:17.393

是的，您的缩进似乎确实是问题所在。你应该识别这条线

```
CpuChoice = random.choice(Choices) 
```

然后行

```
if UserChoice == ... 
```

到与线相同的水平

```
if UserChoice in Choices: 
```

当`while`identatation 返回与`while`. 因此，目前，您的所有`if UserChoice == ...`条件仅在`while`循环完成后检查一次（这就是您看到`1 0`、`0 0`或的原因`0 1`）。如果您确定我建议的行，那么它们将成为`while`循环体的一部分。

# c# - C# 是否需要检查某物是否有值以及某物是否大于 0？

> ID：10212469
> 
> 赞同：23
> 
> 时间：2012-04-18T15:16:25.517
> 
> 标签：c#, if-statement

在一个项目上工作，编码员在他的检查中做了很多。首先，他检查可空 int 是否有值，然后检查它是否大于 0。为什么？如果一次检查（如果大于 0）就足够了，为什么还要进行两次检查？因为空值不大于 0 所以……那是多余的吗？

不确定这是否是我在这里问的问题，但我不知道如何在谷歌搜索中说出它，所以也许我不知道这个程序员做了什么。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-18T15:20:16.397

代码可能是多余的。

如果我是`int?`那么：

```
if (i.HasValue && i.Value > 0) 
```

相当于：

```
if (i > 0) 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx)：

> 当您对可空类型执行比较时，如果其中一个可空类型的值为 null 而另一个不是，则所有比较的结果都为 false，但 !=（不等于）除外。重要的是不要假设因为特定的比较返回 false，相反的情况返回 true。在以下示例中，10 不大于、小于或等于 null。只有 num1 != num2 的计算结果为真。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T15:20:00.927

在这种情况下，变量的值可能具有不同的含义。

```
int? someNumber = null; //might mean "there is no value"
int? someOtherNumber = 0; //might mean "the user has selected: 0" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T15:28:26.750

以下：

```
class Program {
    static void Main(string[] args) {
        int? i = null;
        if (i > 0) { Console.WriteLine(">0");
        } else {     Console.WriteLine("not >0");
        }
        if (i < 0) { Console.WriteLine("<0");
        } else {     Console.WriteLine("not <0");
        }
        if (i == 0) {Console.WriteLine("==0");
        } else {     Console.WriteLine("not ==0");
        }
        Console.ReadKey();
    }
} 
```

将输出

```
not >0
not <0
not ==0 
```

不抛出异常。所以这种情况下的 null/HasValue 检查是多余的。有一个小区别。以下：

```
(i.HasValue && (i.Value == 0)) 
```

大约是两倍的速度

```
(i == 0) 
```

当 i 为空时，尽管两者都非常快，但这并不是重要的区别。当 i 有一个值时，这两个比较需要大约相同的时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T15:27:14.230

您可能会发现程序员习惯于在取消引用之前对引用类型进行以下类型的检查。鉴于 Nullable`HasValue`在概念上与 null 检查相似，我猜该模式“卡住”了，即使它与可空类型是多余的。

```
if ((myObject != null)  && (myObject.SomeValue > 0)) 
```

...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-24T21:12:51.373

由于默认情况下 an`int`不能是`null`并且它的值将被设置为， and`0`的运算符希望与而不是与 一起工作，所以这就是为什么你必须首先检查它是否是，因为如果它为空会导致错误。`>``<``values``nulls``null`

您可以使用始终返回 的逻辑`int`，即使它`null`“不”返回`null`，但它会返回`0`默认值，通过使用它，您可以立即检查`null`+ `>`。

以下是一些方法：

```
int? nullableNum = null;
int number;
number = nullableNum.GetValueOrDefault(); // will return 0 if null
number = nullableNum ?? 0;                // will return 0, or whatever you insert 
```

If you don't know if the `nullableNum` will be a `nullable type` or not (usually not relevant in C#), then in case it turns out not to be `nullable`, the `null` operator won't work and nor the `GetValueOrDefault()` method, so in that case you can [cast](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/casting-and-type-conversions) its `type` to a `nullable int` and then check:

```
number = ((int?)nullableNum) ?? 0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T15:20:20.880

空值检查通常用于防止异常或设置默认值（在 .NET 4 之前）。根据具体情况，检查零将更像是一种业务逻辑选择。

# jquery - 同一页面上有 2 个版本的 jQuery UI？

> ID：10212473
> 
> 赞同：0
> 
> 时间：2012-04-18T15:16:31.637
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, uidatepicker

好，

我有这个页面，您需要在其中选择日期范围以及需要在其中移动一些项目（嵌套列表）。

对于日期范围，我选择了旧的 jquery 日期选择器，它非常棒，因为它可以智能且轻松地选择范围。（新的不再具有此功能）并且对于我正在使用 jquery 可排序嵌套列表的项目的移动（重新排序）。

问题是旧的 jquery datepicker 与旧的 jquery ui 一起使用，而可排序的嵌套列表与新的 jquery ui 一起使用，当我同时包含它们时，Firefox 崩溃了。

我试过这样的事情：

```
<script type="text/javascript">
    var j$132 = $.noConflict(true);
</script> 
```

但仍然没有运气。任何人都可以告诉我一个 jquery 日期范围选择器（一个较新的）或一个 jquery 可排序嵌套列表（适用于旧的可排序），或者简单地说我如何在同一页面上包含 2 个版本的 jquery UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:22:03.367

我不建议包括多个版本的 jquery ui。我过去错误地包含了多个版本的 jquery 本身，它非常非常不可预测。所以我猜你在使用 jquery-ui 时也会遇到类似的问题。

我遇到了一个灯丝组的控件，它用范围功能包装了 jquery-ui 日期选择器，它可能会有所帮助：

[http://www.filamentgroup.com/lab/date_range_picker_using_jquery_ui_16_and_jquery_ui_css_framework/](http://www.filamentgroup.com/lab/date_range_picker_using_jquery_ui_16_and_jquery_ui_css_framework/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:52:28.603

[我实际上使用http://www.eyecon.ro/datepicker](http://www.eyecon.ro/datepicker)解决了这个问题

# .net - 自然排序 CheckedListbox

> ID：10212474
> 
> 赞同：2
> 
> 时间：2012-04-18T15:16:33.660
> 
> 标签：.net, vb.net, winforms, checkedlistbox

我编写了以下类来创建使用自然排序算法的 CheckedListbox。`Sort()`然而，被覆盖的方法并没有被解雇。

（该方法中的代码来自 MSDN 示例，关于如何在常规列表框上实现您自己的排序算法。）

```
Public Class NaturalSortedCheckedListbox
   Inherits CheckedListBox

   Private _naturalComparer As New NaturalSortComparer

   Public Sub New()
      MyBase.new()
   End Sub

   Protected Overrides Sub Sort()
      '** A breakpoint on the following line will not get hit.
      If Items.Count > 1 Then
         Dim swapped As Boolean
         Do
            Dim counter As Integer = Items.Count - 1
            swapped = False

            While counter > 0
               If _naturalComparer.Compare(Items(counter).ToString(), Items(counter - 1).ToString()) = -1 Then
                  Dim temp As Object = Items(counter)
                  Items(counter) = Items(counter - 1)
                  Items(counter - 1) = temp
                  swapped = True
               End If

               counter -= 1
            End While
         Loop While swapped
      End If
   End Sub
End Class 
```

CheckedListbox 派生自 Listbox，所以我认为`Sort()`覆盖会起作用，但我不知道为什么它不起作用。

我正在设置实例的`.Sorted = True`，但它只是使用默认算法对项目进行排序，而不是自然排序算法（已经过测试并显示在其他地方按预期工作）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T20:55:09.677

是的，这是一个“怪癖”，有人称其为错误，但在原生 Windows 控件上使用螺栓连接 .NET 包装器是非常典型的损失。问题是本机 Windows 列表框控件已经实现了排序。当您将 Sorted 设置为 True 时，包装器会告诉控件开始对添加的任何项目进行排序。Sort() 方法被固定以允许自定义排序顺序，这显然很有用。

麻烦的是，该方法仅在您将 Sorted 设置为 true 时运行。每次添加新项目时，它都不会调用 Sort()。如果在添加项目时 Sorted 已经为真，那么它是排序的本机控件。自定义订单时明显失败的鲸鱼。

您需要做的是强制 Sort() 方法再次运行。这需要像这样的愚蠢代码：

```
 MyCheckedListBox1.Items.Add("sortdammit")
    MyCheckedListBox1.Sorted = False
    MyCheckedListBox1.Sorted = True 
```

请注意，这很昂贵，因此如果您添加多个项目，请等待切换已排序，直到您将它们全部添加。引起怪癖的是费用。

# ssas - SSAS 使用层次结构而不将其放入选择中

> ID：10212482
> 
> 赞同：1
> 
> 时间：2012-04-18T15:16:55.890
> 
> 标签：ssas, olap

我们在时间维度中有一个层次结构，我们尝试使用维度的层次结构获取一些数据，但我们不想将层次结构放在 where 子句中。这是代码：

```
with

member Measures.last_month as   
        sum(
        ParallelPeriod(
                [TIME].[Periods].[Level 06],1
        ), 
        [Ims Units])
select 

    {[Ims Units],last_month} on columns,
     [TIME].[Periods].[Level 06].members on rows
from [Analyzer cube] 
```

它返回所有月份，特别是：

2011 年 2 月：[ims 单位] 为 47271，last_month 为 51103

2011 年 3 月：[ims 单位] 为 55293，last_month 为 47271

但是，如果我添加 were 子句并删除 select 子句中的层次结构：

```
with

member Measures.last_month as   
        sum(
        ParallelPeriod(
                [TIME].[Periods].[Level 06],1
        ), 
        [Ims Units])
select 
    {[Ims Units],last_month} on columns
from [Analyzer cube]
where [TIME].[MONTH NAME].&[201103 March] 
```

表明：

2011 年 3 月：[ims 单位] 为 55293，last_month 为空

我们在 last_month 上有空值，因为它已经被过滤了时间维度。有没有办法在不将层次结构放在 select 子句和 where 子句上并且仍然使用 parallelperiod 函数的情况下获得上个月？（ParallelPeriod 的使用只是一个例子）

谢谢，弗朗西斯科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:56:28.290

如果要在计算成员中引用时间维度，它需要上下文 - 这将来自行、列、WHERE 子句或您在计算表达式中明确指定的任何内容。没有其他方法可以让表达式知道它的起点是什么，以便计算并行周期，或任何确定相对于另一个时间点的时间点（出现在行、列或 WHERE 子句上）的函数。

# jquery - 在 JQuery Mobile 中读取 JSON 返回“未定义”

> ID：10212486
> 
> 赞同：0
> 
> 时间：2012-04-18T15:17:00.723
> 
> 标签：jquery, json, jquery-mobile

我正在使用 jQuery 读取包含简单数字数组的 JSON 文件，如下所示：

```
({
"values": [
        {
        "12",
        "32",
        "21",
        "23",
        "34"
        "43",
        "52",
        "86",
        "25"
        }
]}) 
```

我的 JS（如下）不断返回“未定义”。有人可以帮忙吗？

```
$('#dataviewer').live('pageshow', function () {
        $.getJSON("test.json", "chartData");

        $(function chartData(data) {

        var chartString = "";

        $.each(data, function(index){ 
            chartString += index.values;

        });
        alert('chartString' + chartString);

        });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:21:13.877

它应该是

```
{
    "values": [
        "12",
        "32",
        "21",
        "23",
        "34",
        "43",
        "52",
        "86",
        "25"
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:20:09.510

我认为应该是：

```
 { "values": [
         "12",
         "32",
         "21",
         "23",
         "34"
         "43",
         "52",
         "86",
         "25" ]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:20:30.343

尝试删除“{”和“}”

```
({"values": [ "12",  "32", "21", "23", "34", "43", "52", "86", "25"]}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:23:56.427

你的javascript有很多问题，应该更像这样：

```
$('#dataviewer').live('pageshow', function () {
    $.getJSON("test.json", chartData);
    function chartData(data) {
        var chartString = "";
        $.each(data.values, function(index,val){ 
            chartString += val;
        });
        // or simply...
        // var chartString = data.values.join(",");
        alert('chartString' + chartString);
    }
}); 
```

此外，正如许多其他答案所述，json 显然是无效的。

# delphi - 带有自动显示/隐藏滚动条的 TMemo

> ID：10212488
> 
> 赞同：13
> 
> 时间：2012-04-18T15:17:08.230
> 
> 标签：delphi, delphi-7

我需要简单的 TMemo，它在不需要时不显示滚动条（即文本不足），但在需要时显示。类似 ScrollBars =`ssAuto`或类似 TRichEdit 的东西`HideScrollBars`。

我试图继承一个 TMemo 并`ES_DISABLENOSCROLL`像在 CreateParams 中一样使用它，`TRichEdit`但它不起作用。

编辑：这应该在启用或不`WordWrap`启用的情况下工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T16:04:49.767

如果您的备忘录放在表单上，`EN_UPDATE`​​当文本已更改并且内容将重新绘制时，将通知表单。您可以在这里决定是否会有任何滚动条。我假设我们正在使用垂直滚动条并且没有水平滚动条：

```
type
  TForm1 = class(TForm)
    Memo1: TMemo;
    procedure FormCreate(Sender: TObject);
  protected
    procedure WMCommand(var Msg: TWMCommand); message WM_COMMAND;
  public

...

procedure SetMargins(Memo: HWND);
var
  Rect: TRect;
begin
  SendMessage(Memo, EM_GETRECT, 0, Longint(@Rect));
  Rect.Right := Rect.Right - GetSystemMetrics(SM_CXHSCROLL);
  SendMessage(Memo, EM_SETRECT, 0, Longint(@Rect));
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  Memo1.ScrollBars := ssVertical;
  Memo1.Lines.Text := '';
  SetMargins(Memo1.Handle);
  Memo1.Lines.Text := 'The EM_GETRECT message retrieves the formatting ' +
  'rectangle of an edit control. The formatting rectangle is the limiting ' +
  'rectangle into which the control draws the text.';
end;

procedure TForm1.WMCommand(var Msg: TWMCommand);
begin
  if (Msg.Ctl = Memo1.Handle) and (Msg.NotifyCode = EN_UPDATE) then begin
    if Memo1.Lines.Count > 6 then   // maximum 6 lines
      Memo1.ScrollBars := ssVertical
    else begin
      if Memo1.ScrollBars <> ssNone then begin
        Memo1.ScrollBars := ssNone;
        SetMargins(Memo1.Handle);
      end;
    end;
  end;
  inherited;
end; 
```

设置右边距的事情是，如果必须重新调整文本以适应，删除/放置垂直滚动条看起来非常难看。

请注意，上面的示例假定最多 6 行。要知道您的备忘录中可以容纳多少行，请参阅以下问题： [如何以编程方式确定 TMemo 中文本行的高度？](https://stackoverflow.com/questions/6804929/how-do-i-determine-the-height-of-a-line-of-text-in-a-tmemo-programmatically).

# android - Android：AsyncTask 中的 JSON 问题

> ID：10212489
> 
> 赞同：0
> 
> 时间：2012-04-18T15:17:10.290
> 
> 标签：android, json, android-asynctask

我的服务器上有一个 JSON 文件（towns.json），在我的应用程序中，我希望从那里读取数据。所以我想我应该使用 AsyncTask 来不阻塞 UI 线程。我这样做如下：

```
 private class GetTowns extends AsyncTask<String, String, Void> {
    protected void onPreExecute() {}

    @Override
    protected Void doInBackground(String... params) {
        String readTown = readFeed(ScreenStart.this, "http://server.com/towns.json");
        try {
            JSONArray jsonArray = new JSONArray(readTown);
            town = new ObjectTown[jsonArray.length()];
            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject jsonObject = jsonArray.getJSONObject(i);
                town[i] = new ObjectTown();
                town[i].setId(Integer.parseInt(jsonObject.getString("id")));
                town[i].setName(jsonObject.getString("name"));
                town[i].setLat(Double.parseDouble(jsonObject.getString("latitude")));
                town[i].setLon(Double.parseDouble(jsonObject.getString("longitude")));
            }
        } catch (Exception e) {
            Log.i("Catch the exception", e + "");
        }
        return null;
    }

    protected void onPostExecute(Void v) {}
} 
```

这里的 readFeed() 函数：

```
public static String readFeed(Context context, String str) {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(str);

    try {
        HttpResponse response = client.execute(httpGet);

        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content, "ISO-8859-1"));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        } 
    } catch (Exception e) {
        e.printStackTrace();
    }
    return builder.toString();
} 
```

它**有时会**起作用......但有时， doInBackground() 会抛出此异常：

org.json.JSONException: 在字符 0 处输入结束...

我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:34:59.397

看起来服务器没有返回数据，你检查过你的字符串是非空的吗？要将 HttpEntity 转换为字符串，您可以使用：

```
String jsonStr = EntityUtils.toString(httpEntity); 
```

我想您还应该在使用实体之前检查实体是否与 null 不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T07:00:05.387

使用 AsyncTasks 发送 REST 请求不是一个好主意。AsyncTasks 不应该用于网络等长时间运行的操作。事实上 AsyncTask 有两个相关的主要问题：

*   它们与活动生命周期的联系很差
*   创建内存泄漏很容易。

在[RoboSpice](https://github.com/octo-online/robospice) Motivations 应用程序（[可在 Google Play 上获得](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations)）中，我们深入了解了 AsyncTasks、Loaders、它们在网络方面的功能和缺点，并向您介绍了另一种解决方案：RoboSpice。

我们甚至提供[了一个信息图表](https://github.com/octo-online/robospice/wiki/Understand-the-basics-of-RoboSpice-in-30-seconds)来解释这个问题。简而言之

*   AsyncTasks 是有缺陷的，因为它们与活动生命周期的联系很差并且会造成内存泄漏
*   加载器非常适合它们的设计用途：访问 Sqlite 数据库的游标，但不提供任何网络支持。他们是错误的工具。
*   RoboSpice 在服务中执行网络请求，您的下载在 Android 服务中执行，内存管理良好，甚至还支持编写 REST 请求。

* * *

我鼓励您下载[RoboSpice Motivations 应用程序](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations)，它确实深入地解释了这一点，并提供了执行某些后台操作的不同方法的示例和演示。

# php - 网格交换行并将新订单保存到 mysql - 使用 php 和 jquery

> ID：10212491
> 
> 赞同：0
> 
> 时间：2012-04-18T15:17:26.713
> 
> 标签：php, jquery, mysql

我目前正在使用一个名为 tableFilter 的 javascript 表脚本，该脚本用于我最初需要的目的，即简单地显示具有过滤和排序能力的数据。现在我需要另外一个功能，即能够交换行并将新订单保存到 mysql 表中。例如，如果表是书籍，并且书籍列表显示为列排名并且网格按排名排序，如果用户交换 2 行，我希望交换行的新排名保存到 mysql 表中。我查看了一个 jqGrid，我喜欢网格的外观和功能，但我看不出它们将如何更改网格中的排名，然后将其保存到数据库中。有人可以指导我朝着正确的方向发展剧本或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:29:18.253

您将需要寻找允许在某些用户操作后使用回调函数的 JS 插件。通常，它被称为“onSuccess”或“afterSort”，并在您将使用的网格插件文档中指定。

例如，在您对表格中的数据进行排序后，插件将执行*您的*功能。在这个函数中，您需要设置一个 AJAX 请求脚本，它将一些数据插入到您的数据库中。

不幸的是，我不能向你推荐一些插件，因为我并没有真正使用过这样的东西。

# python - Facebook Connect 与 django-facebook 测试错误？

> ID：10212493
> 
> 赞同：-1
> 
> 时间：2012-04-18T15:17:38.097
> 
> 标签：python, django, facebook

我已经按照[此处](http://django-facebook.readthedocs.org/en/latest/index.html)文档中的所有步骤进行操作，但我还没有更新我的模型并尝试在本地主机上测试登录，当我尝试使用 facebook 使用定义的 facebook/login 的 url 连接以测试弹出窗口时出现此错误的 facebook 窗口“发生错误。请稍后再试”这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:47:07.777

在网上搜索了很多之后，我想出了一个解决方案并写了一个关于[这里的教程](http://fadykamal.com/2012/05/09/how-to-test-facebook-login-on-localhost-with-django/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:27:11.567

很可能您必须在 Facebook 应用程序设置中设置应用程序域和网站 URL。它们是空的或不正确的。

# javascript - 用于检测旧 Internet Explorer 并提供下载较新浏览器的 Javascript

> ID：10212503
> 
> 赞同：1
> 
> 时间：2012-04-18T15:18:09.750
> 
> 标签：javascript, internet-explorer, cross-browser

我正在寻找一些好看的东西，我可以粘贴在页面上并完成它。

该脚本应该检测 IE 版本早于 9 并显示一个不错的弹出窗口，其中包含指向不同浏览器或类似内容的链接。我可以自己做，但我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T15:20:57.340

当我第一次发布这个答案时，[modern.IE](http://www.modern.ie)项目正在推动[IE6 倒计时](http://www.ie6countdown.com/)计划，其中一部分是提供 IE 检测片段和托管图像，用于警告用户他们正在使用旧浏览器。

我最初链接到[http://www.ie6countdown.com/](http://www.ie6countdown.com/)，它现在重定向到modern.IE 上不再提供片段和图像的区域。因此，为了繁荣和参考，这里是他们共享的代码和 imgur 上托管的原始横幅图像：

```
<!--[if lt IE 7]>
<div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;'> 
  <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx?ocid=ie6_countdown_bannercode">
    <img src="http://i.imgur.com/hNingci.jpg" border="0" height="42" width="820" alt="" />
  </a>
</div>
<![endif]--> 
```

如果你想改变它来检测小于 9 的 IE 版本，只需将代码的第一位更改为：

```
<!--[if lt IE 9]> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T15:21:50.630

我可能会使用带有`IE`条件评论的评论技巧来进行版本检测。

```
<!--[if lt IE 8 ]>
    <script type='text/javascript'>
        alert( 'Your IE is Old' );

        // or set a flag or something

        var oldIE = true;
    </script>
<![endif]--> 
```

从技术上讲，它不使用 javascript 进行检测，而是使用 IE 固有的功能，但它应该比复杂的 javascript 函数更一致地工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-27T21:34:17.417

这一款提供可定制的浏览器版本，不仅适用于 IE，还适用于 Firefox、Opera、Safari。[http://browser-update.org/](http://browser-update.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T13:56:46.580

最近，我开发了一个免费的 jQuery 插件，它向试图使用旧版本 Internet Explorer 浏览器查看您的网站的访问者显示一个精心设计的警告消息。
网站： http: [//nmsdvid.com/iealert/](http://nmsdvid.com/iealert/)

# c - 我可以在什么网站上编译和测试 C 代码，比如 codepad。要求：必须能够正确使用'scanf'

> ID：10212505
> 
> 赞同：2
> 
> 时间：2012-04-18T15:18:15.943
> 
> 标签：c

我是一名学生，想在任何计算机上在线测试我的 Amerature C 代码。我使用了一个很棒的网站 www.codepad.org。我唯一的问题是它不允许我使用 scanf 输入内容，也不允许我使用 -lm。有没有允许这些东西的网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:21:03.060

您可以在[ideone.com](http://ideone.com/F4xtI)上使用 scanf ，但我不确定`-lm`.

也就是说，我不能推荐它用于严肃的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:21:09.820

**[Ideone.com](http://ideone.com/)**允许您提供意见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:23:15.730

许多在线编译器都有一个或另一个限制，调试的机会很渺茫。所以我建议你去买一个完整的 linux 机器，**在线**！

在云上试试[ubuntu](https://try.cloud.ubuntu.com/)。您所有的 gcc、gdb 等都在您的处置中，就像您的普通桌面一样。

**PS**：每个帐户有 1 小时的限制，您需要在没有 GUI 的情况下进行 SSH。但仍然值得，因为它提供了标准 linux 发行版在线提供的所有功能！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T15:37:16.770

那你为什么不得到一个[免费的shell帐户](http://freeshell.org/)呢？只要您活跃，并且不违反规则，它就在那里。

如果您的提供商上下波动，谷歌还有很多其他选择。使用[git](http://git-scm.com/)在所有不同的 shell 帐户之间保持代码的本地副本同步并提供备份。你甚至可以推送到[github](https://github.com)。

这也将使您有机会使用和了解一堆有用且重要的工具：

*   ssh/mosh
*   vim/emacs
*   bash (don't forget process control!)
*   gdb or cgdb
*   tmux/screen
*   python/perl/shell scripts
*   make

I wish that my college classes had gone over at least some of these before I finished my degree...

# .net - 在远程桌面连接上运行应用程序时出现 .NET 应用程序错误

> ID：10212506
> 
> 赞同：2
> 
> 时间：2012-04-18T15:18:20.590
> 
> 标签：.net, ajax, remote-desktop

我正在开发一个 .NET 应用程序，当在我的本地计算机上的浏览器中运行时，它似乎运行正常。我们需要能够在远程桌面连接到另一台机器时在浏览器中运行应用程序。当我们尝试这样做时，某些按钮不起作用。

该按钮正在尝试使用以下方法：

```
<asp:ModalPopupExtender ID="mpe" runat="server" TargetControlID="btnid"
PopupControlID="pnl" CancelControlID="btnClose"
BackgroundCssClass="modalBackground" PopupDragHandleControlID="pnlStep1Title"
BehaviorID="mpeStep1Behavior" /> 
```

我在 chrome 中运行应用程序并在控制台中看到错误（在本地运行时我没有看到相同的错误）

```
GET http://(website)/ScriptResource.axd?d=fAJd3QoJckE-KfCRKu0rXTnbHtCiSPC9wy5gn0SGQ4m9EASToqhX-yfTbp0-    JXKc0&t=11e6618b 500 (( Not implemented  ))

correctingentries.aspx:9GET http://(website)/ScriptResource.axd?d=fAJd3QoJckE-  KfCRKu0rXTnbHtCiSPC9wy5gn0SGQ4mfxWYuCx0uHvZeydfnE2L70&t=11e6618b 500 (( Not implemented  ))

correctingentries.aspx:3Uncaught ReferenceError: Sys is not defined
(anonymous function)correctingentries.aspx:3
correctingentries.aspx:315Uncaught ReferenceError: Sys is not defined
(anonymous function)correctingentries.aspx:315
correctingentries.aspx:1030Uncaught ReferenceError: Sys is not defined
Page_ValidationActivecorrectingentries.aspx:1030
(anonymous function) 
```

我确定我错过了一些必须在远程桌面机器上进行但无法找到的设置或安装。我希望其他人已经看到了这个问题。

谢谢！约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:37:55.980

[这可能会帮助你](http://encosia.com/updated-your-webconfig-but-sys-is-still-undefined/)

看看这个网址是否对你有帮助。此错误的最常见原因是 JavaScript 过早地引用了 Sys 命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:23:21.030

检查您的 .NET Framework 是否正确安装在 IIS 中，并且安装的版本是否与您的应用程序匹配。

Sys 是由 ASP.NET 框架创建的客户端脚本中的一个对象。

# azure - azure 配置文件的加载行为 - serviceconfiguration.csdef、serviceconfiguration.cloud.cscfg

> ID：10212507
> 
> 赞同：0
> 
> 时间：2012-04-18T15:18:23.487
> 
> 标签：azure, azure-web-roles

在加载和读取 serviceconfiguration.csdef 方面，serviceconfiguration.cloud.cscfg 的行为方式与 web.config 相同吗？

根据 MSDN，web.config 中的设置“计算一次，然后在后续请求中缓存。当该文件层次结构中的任何配置文件发生更改时，ASP.NET 会自动监视文件更改并重新计算缓存。” csdef 和 cscfg 文件的这种行为是否也相似？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:22:10.203

它是相似的，但在更高的水平。如果您从门户更改 ServiceConfiguration.cscfg 文件，实例将重新启动以具有更新的设置。看看这个以获取更多信息：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh472157.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh472157.aspx)

# c# - 如何在 WinForms 中制作可手动排列的列表视图？

> ID：10212512
> 
> 赞同：1
> 
> 时间：2012-04-18T15:18:38.060
> 
> 标签：c#, .net, winforms, listview, drag-and-drop

在我的应用程序的主窗口中，我希望有一个与 Windows 桌面非常相似的界面。会有一堆带有文本的图标，您可以随意拖动它们并随意放置它们。标准的 ListView 几乎可以做到，只是它不支持这种自定义重新排列。除了从头开始编写一个全新的用户控件之外，关于如何实现这种效果的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:01:33.553

为此，您必须将最大数量的项目添加到列表视图中。据我所知，列表视图将允许我们仅将项目拖到已占用的区域中。您可以使用填充额外的空间`listview.Items.Add("")`

一旦你必须添加一些新项目，你可以用新项目替换第一个空白项目。我试过这个东西，它正在工作。你必须处理的一件事是排序。在排序时，您必须省略空白项。

# python - PyCrypto：使用 RSA 和 PKCS#1 对字符串进行两次加密

> ID：10212515
> 
> 赞同：0
> 
> 时间：2012-04-18T15:18:48.543
> 
> 标签：python, encryption, rsa, aes, pycrypto

大家好。

我想知道是否可以使用 PyCrypto进行双重*RSA/PKCS#1加密。*

我有一个服务器，它有自己的 RSA 密钥（`openssl`在安装所述服务器时使用命令生成）和一个可以请求服务器密钥的公共部分的客户端。此外，该客户端可以要求服务器为其生成另一个 RSA 密钥（或密钥对）。在这种情况下，服务器还保留私有（或“整个”RSA 密钥）并将其密钥的公共部分发送给客户端。

我一直在玩 RSA/PKCS 和 AES 加密。我创建了一个测试 Python 文件，它只使用一个 RSA 密钥就可以很好地加密。它所做的是使用对称 AES 系统（使用“即时”生成的随机密钥）加密数据，使用 RSA/PKCS#1 系统对用于 AES 的密码进行加密，并将其放入结果中发送：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
# Interesting links: 
# 1> http://stackoverflow.com/a/9039039/289011
# 2> http://eli.thegreenplace.net/2010/06/25/aes-encryption-of-files-in-python-with-pycrypto/

from Crypto.PublicKey import RSA
import base64
import os
from Crypto.Cipher import AES
import Crypto.Util.number
import random
import struct
import cStringIO
from Crypto.Cipher import PKCS1_OAEP

def encrypt(string):
    #Begin RSA Part to get a cypher that uses the server's public key
    externKeyFilename="/home/borrajax/rsaKeys/server-key.pub"
    externKeyFile = open(externKeyFilename, "r")
    rsaKey= RSA.importKey(externKeyFile, passphrase="F00bAr")
    pkcs1Encryptor=PKCS1_OAEP.new(rsaKey)
    #End RSA Part

    #Begin AES Part
    iv = ''.join(chr(random.randint(0, 0xFF)) for i in range(16))
    thisMessagePassword = os.urandom(16)
    aesEncryptor = AES.new(thisMessagePassword, AES.MODE_CBC, iv)
    chunksize=64*1024
    #End AES Part

    #Begin RSA Encription of the AES Key
    rsaEncryptedPassword = pkcs1Encryptor.encrypt(thisMessagePassword)

    retvalTmp = cStringIO.StringIO()
    retvalTmp.write(struct.pack('<Q', len(string)))
    retvalTmp.write(struct.pack('<Q', len(rsaEncryptedPassword)))
    retvalTmp.write(rsaEncryptedPassword)
    retvalTmp.write(iv)
    while len(string) > 0:
        chunk = string[0:chunksize]
        string = string[chunksize:]
        if len(chunk) % 16 != 0:
            chunk += ' ' * (16 - len(chunk) % 16)
        retvalTmp.write(aesEncryptor.encrypt(chunk))
    return retvalTmp.getvalue()

def decrypt(string):
    stringAsBuffer = cStringIO.StringIO(string)
    retval = str()
    chunksize=64*1024

    externKeyFilename="/home/borrajax/rsaKeys/server-key.pem"
    externKey = open(externKeyFilename, "r")
    rsaKey = RSA.importKey(externKey, passphrase="F00bAr")
    pkcs1Decryptor=PKCS1_OAEP.new(rsaKey)

    origsize = struct.unpack('<Q', stringAsBuffer.read(struct.calcsize('Q')))[0]
    rsaEncryptedPasswordLength = long(struct.unpack('<Q', stringAsBuffer.read(struct.calcsize('Q')))[0])
    rsaEncryptedPassword = stringAsBuffer.read(rsaEncryptedPasswordLength)
    thisMessagePassword = pkcs1Decryptor.decrypt(rsaEncryptedPassword)
    iv = stringAsBuffer.read(16)
    decryptor = AES.new(thisMessagePassword, AES.MODE_CBC, iv)
    while True:
        chunk = stringAsBuffer.read(chunksize)
        if len(chunk) == 0:
            break
        retval += decryptor.decrypt(chunk)
    return retval

if __name__ == "__main__":
    encryptedThingy=encrypt(base64.b64encode("Toñóooooañjfl凯兰;kañañfjaafafs凱蘭pingüiñoo你好to金玉Toñóooooañjfl凯兰;kañañfjaafafs凱蘭pingüiñoo你好to金玉Toñóooooañjfl凯兰;kañañfjaafafs凱蘭pingüiñoo你好to金玉Toñóooooañjfl凯兰;kañañfjaafafs凱蘭pingüiñoo你好to金玉Toñóooooañjfl凯兰;kañañfjaafafs凱蘭pingüiñoo你好to金玉"))
    print "Decrypted thingy: %s" % base64.b64decode(decrypt(encryptedThingy)) 
```

如您所见，AES 密码是使用服务器的 RSA 密钥加密的。现在，我想更加偏执，并使用客户端的公钥加密已经加密的密码，因此“加密”方法将类似于：

```
def encrypt(string):
    #Begin RSA Part to get a cypher that uses the server's public key
    externServerKeyFilename="/home/borrajax/rsaKeys/server-key.pub"
    externServerKeyFile = open(externServerKeyFilename, "r")
    rsaServerKey= RSA.importKey(externServerKeyFile, passphrase="F00bAr")
    pkcs1ServerEncryptor=PKCS1_OAEP.new(rsaServerKey)
    #End RSA Part

    #Begin RSA Part to get a cypher that uses the client's public key
    externClientKeyFilename="/home/borrajax/rsaKeys/client-key.pub"
    externClientKeyFile = open(externClientKeyFilename, "r")
    rsaClientKey= RSA.importKey(externClientKeyFile, passphrase="F00bAr")
    pkcs1ClientEncryptor=PKCS1_OAEP.new(rsaClientKey)
    #End RSA Part

    #Begin AES Part
    iv = ''.join(chr(random.randint(0, 0xFF)) for i in range(16))
    thisMessagePassword = os.urandom(16)
    aesEncryptor = AES.new(thisMessagePassword, AES.MODE_CBC, iv)
    chunksize=64*1024
    #End AES Part

    #Begin RSA Encription of the AES Key
    rsaEncryptedPasswordWithServer = pkcs1ServerEncryptor.encrypt(thisMessagePassword)
    rsaEncryptedPasswordWithServerAndClient = pkcs1ClientEncryptor.encrypt(rsaEncryptedPasswordWithServer) #Katacrasssshh here!! 

    retvalTmp = cStringIO.StringIO()
    retvalTmp.write(struct.pack('<Q', len(string)))
    retvalTmp.write(struct.pack('<Q', len(rsaEncryptedPasswordWithServerAndClient)))
    #...Probably some yadda yadda here with key lengths and stuff so it would help re-build the keys in the server's side...
    retvalTmp.write(rsaEncryptedPasswordWithServerAndClient)
    retvalTmp.write(iv)
    while len(string) > 0:
        chunk = string[0:chunksize]
        string = string[chunksize:]
        if len(chunk) % 16 != 0:
            chunk += ' ' * (16 - len(chunk) % 16)
        retvalTmp.write(aesEncryptor.encrypt(chunk))
    return retvalTmp.getvalue() 
```

但是当我尝试重新加密密钥时，我得到了一个`ValueError("Plaintext too large")`例外。这是有道理的（至少对于对加密一无所知的人来说是有道理的），因为 PKCS 添加了一个填充，所以当我`thisMessagePassword`用服务器的公钥加密“”时，我得到一个 256 字节的字符串，这对于第二个 PKCS 来说太长了加密器（我一直在做一些“手动测试”，限制似乎是 214 字节......我的意思是......这是最后一个不抛出异常的值）。

我知道这可能是一个奇怪的结构，使用服务器的公钥进行加密和使用客户端的密钥进行签名可能更有意义，但我只是想尝试一下加密的东西并尝试了解它们是如何进行的工作以及为什么。这就是为什么任何提示都会受到赞赏的原因。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T22:47:26.597

的文档`PKCS1OAEP.encrypt`对它的输入进行了以下说明：

> message (string) - 要加密的消息，也称为明文。它可以是可变长度，但不能长于 RSA 模数（以字节为单位）减去 2，减去哈希输出大小的两倍。

SHA-1（默认散列函数）有一个 160 位的摘要，即 20 个字节。您看到的限制听起来很正确：256 = 214 + 2 + 2*20。

除此之外，您计划添加的额外步骤不会增加太多价值。如果您希望客户端向服务器证明它确实是他，而不是其他人，您应该向客户端提供私钥并让服务器保留公共的一半。在加密步骤之后，客户端可以使用 PKCS#1 PSS 对整个包（封装的 AES 密钥 + 加密数据）进行签名并发送签名**。**服务器将使用客户端的公钥验证来源，然后使用自己的私钥解密密钥，最后使用 AES 解密数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T22:12:00.087

所以，你所做的似乎没有什么意义。您想安全地将消息从服​​务器发送到客户端吗？

您尝试在服务器公钥下加密消息的代码，然后在客户端的公钥下。客户端将无法读取此内容，因为他永远不应该拥有服务器的私钥（读取在服务器公钥下加密的消息需要它）。或者换一种说法，如果服务器和客户端都有相同的私钥，那么你应该只使用 AES。你为什么做这个 ？

确实，您可能应该只使用 ssl/tls/https 向客户端发送消息，因为编写加密代码是有问题的，并且您在代码中至少犯了两个错误以及您想要修复的错误。

1.  您的 IV 必须是安全随机的。python 随机调用不是，这就是为什么您使用 os.random(16) 作为密钥。您也应该为 IV 这样做

2.  您需要使用 hmac 对加密数据进行身份验证，并使用单独的随机密钥对 hmac 进行加密。然后在另一端使用相同的密钥，在相同的输入上重新生成 hmac，并比较两者。如果您不这样做，有人可能会篡改您的数据并使用加密库中的错误来读取它。

3.  您发布的问题：请注意，正如我上面所说，您根本不应该这样做，因为这很荒谬。您需要在新密钥下使用 AES 加密 rsaEncryptedPasswordWithServer（并按照上述 2 使用 HMAC），然后使用客户端公钥加密新密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T03:30:39.973

我不建议你这样做，或者建议它有任何意义，但如果你只是想玩它，这里就是你可以做的。

1.  确保您应用的第一个 RSA 密钥的模数**小于**您应用的第二个 RSA 密钥的模数。
2.  使用较小的模数和适当的 PKCS#1 填充执行第一次 RSA 加密
3.  使用较大的模数和无填充执行第二次 RSA 加密。

在解密时，您当然必须颠倒这些操作的顺序。

# php - 使用 PHP 判断外部文件是否存在于其他服务器上

> ID：10212516
> 
> 赞同：1
> 
> 时间：2012-04-18T15:18:49.710
> 
> 标签：php

我从 html 表单请求 url，然后将其发布到 php 中并运行 if 文件存在，然后使用 jquery 我返回如果找到文件，它会覆盖报告消息。

看看我下面的代码.. 唯一的问题是我实际上无法获得找到页面的响应，所以我认为 PHP file_exsists 命令有问题。

```
<?php

    header('Access-Control-Allow-Origin: *');  

    $filename = $_POST["find-one"];
    $filename2 = $_POST["find-two"];

?>
<html>
    <header>
        <title>404 Tool</title>
        <script type="text/javascript" src=".../1.7.1/jquery.min.js"></script>
        <?php
            if (file_exists($filename)) {
              echo "<script>
                      $(document).ready(function() { 
                        $('.report-one').text('File $filename is found.');
                      });
                    </script>";
            } else {
              echo "<script>
                      $(document).ready(function() { 
                        $('.report-one').text('File $filename doesn't exsist.');
                      });
                    </script>";
            }

            if (file_exists($filename)) {
              echo "<script>
                      $(document).ready(function() { 
                        $('.report-two').text('File $filename2 is found.');
                      });
                    </script>";
            } else {
              echo "<script>
                      $(document).ready(function() { 
                        $('.report-two').text('File $filename2 doesn't exsist.');
                      });
                    </script>";
            }
        ?>
    </header>
    <form method="post" action="<?php echo $PHP_SELF;?>"> 
      <input type="text" name="find-one" class="find-one"/>
      <p class="report-one">Waiting</p>
      <input type="text" name="find-two" class="find-one"/> 
      <p class="report-two">Waiting</p>
      <input type="submit" value="Search for 404's">
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:20:59.453

您只能使用[file_exists](http://php.net/manual/en/function.file-exists.php)来检查服务器或网络共享中的文件，而不是其他服务器上的文件。

如果你想检查其他服务器上的文件，你应该使用 cUrl

# c# - 在 C#4.0 中创建并关闭 Excel 文件后，Excel 仍在任务管理器中运行

> ID：10212522
> 
> 赞同：4
> 
> 时间：2012-04-18T15:19:04.907
> 
> 标签：c#, excel

创建 Excel 文件后，从任务管理器释放 Excel 时出现问题，从 C# 保存并关闭它。

我使用以下代码创建 Excel 实例：

```
 Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();

Microsoft.Office.Interop.Excel.Workbook workbook = xlApp.Workbooks.Add(Microsoft.Office.Interop.Excel.XlWBATemplate.xlWBATWorksheet);
Microsoft.Office.Interop.Excel.Worksheet worksheet = (Microsoft.Office.Interop.Excel.Worksheet)workbook.Worksheets[1]; 
```

然后我填充我的工作表：

```
worksheet.Cells[1, 1] = "Test";
worksheet.Cells[1, 2] = "Test";
worksheet.Cells[1, 3] = "Test";
worksheet.Cells[1, 4] = "Test"; 
```

之后我保存工作簿：

```
workbook.SaveAs(filePath); 
```

然后关闭它：

```
workbook.Close(false, false); 
```

然后退出 Excel：

```
xlApp.Quit(); 
```

但是在我这样做之后，Excel 仍然出现在任务管理器中！！！？！？

知道为什么在我调用 xlApp.Quit() 后它没有关闭吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:23:15.370

也许您可以尝试删除 Interop 并使用[EPPlus](http://epplus.codeplex.com/)创建/修改 Excel 文件。这非常简单，并且不依赖于在计算机上安装 Office。

但是，如果您真的想使用 Interop，那么这可能会有所帮助（我一直在我的代码中使用它来确保一切都得到正确处理，因为我必须在几分钟内创建 800 多个 excel 文件）：

```
 workBook.Close(true, filePathTarget, Missing.Value);
        app.DisplayAlerts = true;
        app.Quit();
        Release(workSheet2);
        Release(workSheet1);
        Release(workBook);
        Release(workBooks);
        Release(app);
        workSheet2 = null;
        workSheet1 = null;
        workBook = null;
        workBooks = null;
        app = null;
        GC.Collect();
        GC.WaitForPendingFinalizers(); 
```

在哪里：

```
 private static void Release(object obj) {
        // Errors are ignored per Microsoft's suggestion for this type of function:
        // http://support.microsoft.com/default.aspx/kb/317109
        try {
            System.Runtime.InteropServices.Marshal.FinalReleaseComObject(obj);
        } catch {
        }
    } 
```

但如果您只处理 XLSX 文件，我真的强烈建议您尝试使用 EPPlus。它运行良好，快速高效，并且不依赖于正在安装的 Microsoft Office。使用它一小时后，我在 5 分钟后放弃了 Interop……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:25:05.993

您需要将 xlApp 变量设置为 null 以释放 COM 引用。可能是 COM 使实例保持打开状态，因为引用计数不为零。

```
xlApp = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-05T16:42:41.860

我使用了一个看起来不干净但效果很好的 process.kill 方法。

```
dim xlHWND= Xlapp.Hwnd
Dim proc = Process.GetProcessesByName("excel")
For i As Integer = 0 To proc.Count - 1
     If proc(i).MainWindowHandle = xlHWND Then
          proc(i).Kill()
     End If
Next 
```

# .htaccess - 如何重写和重定向这个 url？

> ID：10212529
> 
> 赞同：0
> 
> 时间：2012-04-18T15:19:17.457
> 
> 标签：.htaccess, url-rewriting

我怎样才能重写这个网址：

[http://www.mydomain.com/myoldpage.php?proc=my](http://www.mydomain.com/myoldpage.php?proc=my)查询字符串（中间有空格）

至

[http://www.mydomain.com/mynewpage.php](http://www.mydomain.com/mynewpage.php)

如果用户打开旧网址，它应该重定向到新网址并显示旧网址的内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:28:01.350

只需简单地把它放在你的 .htaccess 文件中

```
RewriteEngine On
RewriteBase /
RewriteRule ^myoldpage.php?proc=my+query+string$ mynewpage.php [PT] 
```

如果它不起作用，请告诉我，我会尽力帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:24:48.537

在 myoldpage.php 的顶部添加 php 代码：

```
<?php header("Location: http://www.mydomain.com/mynewpage.php"); ?>

or if you are going off a certain variable

<?php

if ($_GET['proc'] == "my"){
 header("Location: http://www.mydomain.com/mynewpage.php");
}

?> 
```

# linux - 在 linux 机器上通过 jenkins 运行 selenium 脚本时，firefox 没有启动

> ID：10212530
> 
> 赞同：0
> 
> 时间：2012-04-18T15:19:19.733
> 
> 标签：linux, selenium, jenkins

我正在 linux 环境中设置 jenkins (hudson) 来运行我的 selenium 脚本。

因此，我在 jenkins 中配置了一个作业，我从中从 svn 获取代码，然后我启动 selenium 服务器，然后调用 ant 来运行我的脚本。但是当我运行这项工作时，我的 selenium 服务器开始内联但 Firefox 没有启动。所以我检查了他们说要使用 Xvfb 的谷歌。我已经在 Linux 机器上安装了 Xvfb 并在 jenkins 中下载了一个 xvfb 插件并在 Jenkins 上设置了它的配置，但我的 firefox 仍然没有启动。

你能帮我看看我们如何在jenkins中配置Xvfb以及如何解决这个firefox启动问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T23:15:33.900

您没有指定语言，但对于 python，您需要导入包**pyvirtualdisplay**。

```
from pyvirtualdisplay import Display

display = Display(visible=0, size=(800, 600))
display.start() 
```

然后运行你的 webdriver 代码：

```
browser = webdriver.Firefox()
browser.get('http://www.foo.com')
<< etc. >> 
```

在这里写得非常简洁：http: [//coreygoldberg.blogspot.co.uk/2011/06/python-headless-selenium-webdriver.html](http://coreygoldberg.blogspot.co.uk/2011/06/python-headless-selenium-webdriver.html)

# extjs4 - 我如何为 extjs 面板创建上下文菜单

> ID：10212534
> 
> 赞同：3
> 
> 时间：2012-04-18T15:19:37.337
> 
> 标签：extjs4

我有上下文菜单

```
var ctxMenu = Ext.create('Ext.menu.Menu', {
    items: [{ text: 'Edit', action: 'edit'}]
}); 
```

我如何将它添加到 extjs 面板？我在面板中没有看到任何合适的事件，比如`itemcontextmenu`在树形面板中？

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:33:20.750

中有`itemcontextmenu`和`containercontextmenu`事件`Ext.tree.Panel`。

更新：Ext.grid.Panel 存在相同的事件。您可能想同时订阅它们并执行以下操作：

```
showContextMenu: function(e) {
    var me = this;

    if (me.contextMenu === undefined)
        return;

    e.stopEvent();
    me.contextMenu.showAt(e.getXY());
},

// Show context menu from the grid
gridContextMenu: function(view, rec, node, index, e) {
    this.showContextMenu(e);
},

// Show context menu from the empty area below grid records
containerContextMenu: function(view, e) {
    this.showContextMenu(e);
}, 
```

# java - 在 Java 中同时调用函数

> ID：10212535
> 
> 赞同：2
> 
> 时间：2012-04-18T15:19:38.343
> 
> 标签：java

在我的应用程序中，我以以下方式加载缓存。

1.  加载用户缓存 loadUserCache();
2.  加载账户缓存 loadAccountCache();
3.  加载客户缓存 loadCustomerCache();

上述每个调用都涉及一个数据库调用。同样明智的是，有 6-7 个电话。

当我的应用程序正在加载时，我必须等到缓存被加载。

这些都是一个接一个的顺序调用。

如果我能找到一种方法来并行进行这些调用，那么应用程序加载期间的等待时间将大大减少。

有人可以帮我进行这样的并行调用或任何其他替代方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T15:21:27.350

您正在寻找多线程。[查看并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)的官方教程。

创建一个[`Thread`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html), 并覆盖 runnable。

当您[`start()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#start%28%29)在线程上调用时，每个线程将彼此并行调用。

另一种方法是使用[高级并发 API](http://docs.oracle.com/javase/tutorial/essential/concurrency/highlevel.html)，尤其是[Executors](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)。

但是，您必须确保并行程序中没有[数据竞争](http://en.wikipedia.org/wiki/Race_condition)和/或[死锁！](http://en.wikipedia.org/wiki/Deadlock)[如果任务之间存在一些依赖关系，这可能不是微不足道的]。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T15:34:01.683

您可以使用执行器框架：

```
public static void main(String args[]) throws InterruptedException {
    ExecutorService executor = Executors.newFixedThreadPool(3);
    Runnable user = new Runnable() {
        @Override
        public void run() {
            loadUserChache();
        }
    };
    Runnable account = new Runnable() {
        @Override
        public void run() {
            loadAccountCache();
        }
    };
    Runnable customer = new Runnable() {
        @Override
        public void run() {
            loadCustomerCache();
        }
    };

    executor.submit(user);
    executor.submit(account);
    executor.submit(customer);

    executor.shutdown();
    executor.awaitTermination(10, TimeUnit.SECONDS); //handle timeout here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:27:40.633

为要并行运行的每个代码块启动一个新线程。

```
 new Thread(new Runnable(){
       loadUserCache();
    }).start();

    new Thread(new Runnable(){
       loadAccountCache();
    }).start();

    new Thread(new Runnable(){
       loadCustomerCache();
    }).start(); 
```

或者

```
 new Thread(new Runnable(){
       loadUserCache();
       loadAccountCache();
       loadCustomerCache();
    }).start(); 
```

是的，这个一般性的话题可以很快打开各种各样的问题。多线程代码可能非常复杂，但在您的情况下，上述可能就可以了。

# c++ - 为什么这段代码有内存泄漏？

> ID：10212537
> 
> 赞同：1
> 
> 时间：2012-04-18T15:19:47.347
> 
> 标签：c++, pointers, dynamic, memory-leaks

我检查了每一行，但找不到我忘记删除的地方。我在这个网站上找到`AllocateDynamicArray`并`FreeDynamicArray`编码并假设它是正确的。我会尽快提供 valgrind 输出。任何帮助将不胜感激。

```
template <typename T>
T **AllocateDynamicArray(int nRows, int nCols) {
    T **dynamicArray;

    dynamicArray = new T*[nRows];
    for (int i = 0; i < nRows; i++) {
        dynamicArray[i] = new T [nCols];
        for (int j = 0; j < nCols; j++) {
            dynamicArray[i][j] = 0;
        }
    }
    return dynamicArray;
}

template <typename T>
void FreeDynamicArray(T** dArray, int nRows) {
    for (int i = 0; i < nRows; i++) {
        delete[] dArray[i];
    }
    delete[] dArray;
}

int main(int argc, char* argv[]) {

    int numOfComps = 1;
    int** input = AllocateDynamicArray<int>(rowNo, 4);
    while (calculateAvgTime(false) > maxAvgTime) {
        numOfComps++;
    }
    FreeDynamicArray(input, rowNo);
    return EXIT_SUCCESS;
}

double calculateAvgTime(bool print) {
    double waitingTime = 0;
    int* computers = new int[numOfComps];
    for (int i = 0; i < numOfComps; i++) {
        computers[i] = 0;
    }
    int** infoList = AllocateDynamicArray<int>(numOfComps, 2);

    //some code related to computers and infoList

    double waitingTime /= (double) (rowNo);
    FreeDynamicArray(infoList, numOfComps);
    delete[] computers;
    return waitingTime;
} 
```

以下是 valgrind 的输出。

```
==21109== 
==21109== HEAP SUMMARY:
==21109==     in use at exit: 1,344 bytes in 4 blocks
==21109==   total heap usage: 72 allocs, 68 frees, 11,752 bytes allocated
==21109== 
==21109== 336 bytes in 1 blocks are definitely lost in loss record 1 of 2
==21109==    at 0x4C28D27: operator new[](unsigned long) (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==21109==    by 0x402159: Heap::Heap(int) (in /home/cs/c_turhan/bin/HW3/simulator/simulator)
==21109==    by 0x401977: calculateAvgTime(bool) (in /home/cs/c_turhan/bin/HW3/simulator/simulator)
==21109==    by 0x401792: main (in /home/cs/c_turhan/bin/HW3/simulator/simulator)
==21109== 
==21109== 1,008 bytes in 3 blocks are definitely lost in loss record 2 of 2
==21109==    at 0x4C28D27: operator new[](unsigned long) (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==21109==    by 0x402159: Heap::Heap(int) (in /home/cs/c_turhan/bin/HW3/simulator/simulator)
==21109==    by 0x401977: calculateAvgTime(bool) (in /home/cs/c_turhan/bin/HW3/simulator/simulator)
==21109==    by 0x401724: main (in /home/cs/c_turhan/bin/HW3/simulator/simulator)
==21109== 
==21109== LEAK SUMMARY:
==21109==    definitely lost: 1,344 bytes in 4 blocks
==21109==    indirectly lost: 0 bytes in 0 blocks
==21109==      possibly lost: 0 bytes in 0 blocks
==21109==    still reachable: 0 bytes in 0 blocks
==21109==         suppressed: 0 bytes in 0 blocks
==21109== 
==21109== For counts of detected and suppressed errors, rerun with: -v
==21109== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 6 from 6) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T15:22:50.873

在`calculateAvgTime`中，您在 中分配了一个数组`computers`，但您只释放了一个项目。使用`delete[]`时使用`new[]`。

更好的是，只需使用 a`vector`并观察该程序的内存管理问题消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:22:14.767

我没有看到“rowNo”的定义位置，因此“FreeDynamicArray()”可能存在问题，没有删除所有内存，如果您使用 VS，请尝试获取视觉泄漏检测器（[此处](http://www.codeproject.com/Articles/9815/Visual-Leak-Detector-Enhanced-Memory-Leak-Detectio)），它会帮助您追踪泄漏的内存并帮助您查明错误。

# oauth - Jenkins 与 Github 和 OAuth 在登录时陷入重定向循环

> ID：10212543
> 
> 赞同：3
> 
> 时间：2012-04-18T15:20:03.170
> 
> 标签：oauth, github, hudson, jenkins, github-api

我已成功设置 Jenkins 以从我的私人 github 存储库中提取并构建我的项目、运行测试等。我现在想要做的是在我推送到 master 时自动构建。

我已经安装了 Github OAuth 插件并通过 Github 进行了设置，但是当我登录时，Jenkins 卡在了重定向循环中。

我在 Github 中注册了一个新应用程序并设置了以下值；

> ```
> Name: Jenkins
> URL: http://myServer:8080
> Callback URL: http://myServer:8080 
> ```

我在任何文档中都找不到“回调 URL”的正确值应该是什么。这就是它重定向的原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T16:07:02.023

终于找到了：

> 使回调 url 看起来像： [http ://myserver.com:8080/securityRealm/finishLogin](http://myserver.com:8080/securityRealm/finishLogin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T18:34:16.683

就我而言，这是由错误配置的 clientSecret （Jenkins 端配置）引起的

# objective-c - Parsekit 还是我自己解析？

> ID：10212545
> 
> 赞同：4
> 
> 时间：2012-04-18T15:20:06.153
> 
> 标签：objective-c, cocoa, grammar, parsekit

我正在编写一个需要解析葡萄酒菜单的应用程序。从我目前看到的情况来看，它们都遵循某种结构，诀窍将是定义所有这些结构。我现在正在探索使用 Parsekit 并创建语法，但学习曲线非常陡峭。我想我会问，而不是花接下来的几周弄清楚它然后意识到这不是正确的方法。

人们想在解析这类事情时分享任何见解/资源？谢谢，奥利维尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T16:58:42.650

[ParseKit](http://parsekit.com/)的开发者在这里。

（我的回答要记住一件事：虽然我是 ParseKit 的开发人员，但我并没有真正设计框架或其 API。它主要基于 Steven Metsker 的书[Building Parsers With Java](https://rads.stackoverflow.com/amzn/click/com/0201719622)中的特定设计。我只是移植它们到 ObjC/Cocoa。）

* * *

ParseKit 由三部分组成：

1.  一个高度灵活、高性能的**Objective-C Tokenizer** ( `PKTokenizer`, `PKToken`classes)
2.  一个完全动态**的 Objective-C 解析器工具包**，用于构建具有无限前瞻（`PKParser`类和子类）的回溯、递归体面的解析器。由于它的动态性，这个解析器工具包的性能对于大量输入来说很差。
3.  Objective-C Parser Generation via **Grammars** - 使用 BNF 样式的语法语法（类似于 yacc 或 ANTLR）为您的自定义语言生成 Objective-C 解析器。在解析时，解析器将为您的 Objective-C 代码提供回调。由于#2 的活力，编写语法相对容易，并且对您在语法中可以做什么的限制相对较少。

上面的每个组件都建立在先前的组件之上。所以 #3 - 语法工具包 - 使用 #1 标记器和 #2 解析器工具包。

如果您正在执行任何严肃的解析任务，我**总是**建议您查看 #1 - 标记器 - `PKTokenizer`。它非常灵活和强大，性能非常好。如果您使用*标记*而不是*输入字符串*更容易（通常是这样），您可能需要检查一下。

至于#2（ObjC Parser 工具包），您通常只想跳过它并转到#3，因为通过语法构建解析器比通过 ObjC 代码构建解析器要好得多。

对于#3（通过 BNF 语法的 ObjC 解析器工具包），最重要的考虑因素是性能。ParseKit 的解析器工具包适用于解析比较小的输入字符串。一些例子可能是：

1.  XPath 风格的查询语言
2.  SQL
3.  相对简洁的 DSL 或命令语言
4.  常用表达
5.  菜单（或可以分解成相对较小句子的扁平数组的东西）

由于性能问题， ParseKit 的解析器工具包通常**不**适合解析较大的输入字符串。一些例子可能是：

1.  XML 文档
2.  JSON 文件

ParseKit 确实可以（并且确实）解析这些类型的输入，但是由于 ParseKit 的动态性（回溯、无限前瞻），与专用 XML 或 JSON 解析器相比，性能仍然很差。

* * *

对于**“葡萄酒菜单”**，我会说，是的 - ParseKit 可能是一个很好的（可能很棒）解决方案。特别是如果您可以将输入的各个行分解为字符串数组并逐个解析它们。性能应该相当好，一旦你克服了学习曲线，ParseKit 对于这些类型的工作来说非常强大/方便。

事实上，Metsker 的原著 IIRC 甚至使用这样的东西作为一个很好地使用他的工具包的例子。

希望这可以帮助。

# visual-studio-2008 - MC上的应用实例

> ID：10212546
> 
> 赞同：0
> 
> 时间：2012-04-18T15:20:07.833
> 
> 标签：visual-studio-2008, windows-ce, instance, multiple-instances, motorola

在 MC 65 / 55 上，无论多次单击 A.exe 文件，系统都会指向同一个正在运行的 A.exe。（但有一次，在 MC 65 上，任务管理器中显示了 3 个 A.exe。）

但在 MC 3000 上，系统打开 A.exe，取决于点击。

请分享我为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:02:34.853

Windows Mobile 的 Compact Framework 版本有一个“功能”，它试图阻止同一应用程序的多次执行。我说“尝试”是因为[EE 用来强制执行它的机制](http://www.danielmoth.com/Blog/netcfagl.aspx)存在缺陷，如果您快速连续启动应用程序几次，无论如何您都可以获得多个实例。

在 Windows CE（即 MC3000）下，根本不使用该功能 - 由您来实现它。IMO，无论如何，这是一条更好的路线，因为您可以在您的应用程序中按照您想要的方式实现它 - 包括可能传递命令行参数，而且您有可能[使用 mutex 实际做到这一点](http://www.nesser.org/blog/archives/56)。

# wpf - 滚动查看器粘在停靠面板的右侧？

> ID：10212549
> 
> 赞同：0
> 
> 时间：2012-04-18T15:20:11.000
> 
> 标签：wpf, xaml, docking

我的滚动查看器有拉伸问题，我在停靠面板内有一个文本框和按钮以及我的滚动查看器，我想要这些项目下方的滚动查看器，但拉伸到停靠面板的宽度和从底部拉伸的高度将面板停靠到按钮和文本框。

所以我尝试了这个：

```
<UserControl x:Class="WpfApplication4.AppPages.FindStudent"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" Loaded="UserControl_Loaded">
    <DockPanel Height="299" Width="289">
        <TextBox Height="23" Name="textBox1" Width="188" VerticalAlignment="Top"/>
        <Button Content="Button" Height="23" Name="button1" Width="100" Click="button1_Click" VerticalAlignment="Top" />
        <ScrollViewer VerticalScrollBarVisibility="Hidden" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Width="88"> 
```

然而，滚动查看器不知何故粘在右侧，如下所示：

![在此处输入图像描述](../Images/a0c418e98037019c6e78cf2fc0371623.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:28:33.030

您需要使用附加属性告诉项目如何停靠`DockPanel.Dock`。

像这样的东西：

```
<DockPanel>
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
        <TextBox />
        <Button />
    <StackPanel>
    <ScrollViewer DockPanel.Dock="Top" />
</DockPanel> 
```

请注意，默认情况下，最后一个孩子`DockPanel`将填充剩余的可用空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:38:25.447

我会回应 Jay 所说的，您需要通过设置来指定您希望控件如何停靠在 DockPanel 内部`DockPanel.Dock`。一些附加说明：

*   LastChildFill 将控制最后一个元素是否拉伸以填充剩余空间
*   默认停靠在左侧
*   控件列出的顺序将影响它们的停靠方式。

请参阅此处的[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.dockpanel.)和此处的[简单教程](http://blogs.objectsharp.com/blogs/dave/archive/2009/03/13/using-the-wpf-dockpanel.aspx)。

# python - 描述符的命名约定

> ID：10212556
> 
> 赞同：11
> 
> 时间：2012-04-18T15:20:21.953
> 
> 标签：python, coding-style, naming-conventions

我有一个描述符

```
class ReferredItem(): 
    def __init__(self, method):
        self.method = method

    def __get__(self, obj, objtype):
        ... 
```

我用它作为装饰器：

```
class MyClass():

    @ReferredItem
    some_method(self):
        ... 
```

我见过装饰器是小写的。但是类应该以驼峰命名。

我应该像这样命名课程`referred_item`吗？还是保持现在的样子？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T15:32:53.347

[PEP8](http://www.python.org/dev/peps/pep-0008/)指出

> 几乎无一例外，类名都使用 CapWords 约定。

没有解释异常是什么，但在标准库中，最常用作函数的类通常遵循函数命名约定。eg`itertools.groupby`实际上是一个类，但在普通用法中你不会注意到；这是一个实现细节，`groupby`可以重写为实际功能。

您可以通过对用作装饰器的类使用全小写的装饰器命名约定来采用类似的样式：`referred_item`， not `ReferredItem`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T15:42:19.967

尽管任何可调用对象都可以用作装饰器，但它们通常被认为是函数，并且类函数对象应遵循“lowercase_with_underscores”约定。

你应该隐藏你的装饰器是一个类的事实，因为这是一个*实现细节*。因此，装饰器应该遵循“lowercase_with_underscores”风格。这样，如果有一天您决定将装饰器实现为函数，您就不必更改用户代码。

就个人而言，我仍然会使用 CapWords 作为（内部）装饰器类名，并提供一个应该用于装饰器的别名变量：

```
class _ReferredItem:
    def __init__(self, method):
        self.method = method

    def __get__(self, obj, objtype):
        # ...

referred_item = _ReferredItem 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:34:48.477

PEP8 在这一点上并不是特别清楚......但非正式地，我发现一个很好的规则是：如果一个类将像函数一样使用（例如，作为装饰器，也像上下文管理器之类的东西），它应该有一个小写名称，如函数。这似乎是标准库遵循的约定。

所以我宁愿看到而`referred_item`不是`ReferredItem`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T16:42:53.567

我通常使用 CamelCase 作为类，然后添加我用作装饰器的别名。

```
referred_item = ReferredItem 
```

# android - 这是什么错误？+ LibGDX + 超级跳线

> ID：10212557
> 
> 赞同：1
> 
> 时间：2012-04-18T15:20:22.737
> 
> 标签：android, eclipse, libgdx

我只是和 superJumper 一起玩，然后我改变了一些东西。更新到 SDK 17 后，我遇到了一些问题。但我解决了它们。现在我可以运行我的 android 项目了。但是当我触摸我的任何设置（如开始游戏或设置或开/关声音）时，我得到错误。这是我的 LogCat。我不明白这个错误是为了什么。如果有人知道，请帮助我。谢谢。

```
04-18 19:26:36.884: D/dalvikvm(9455): GC_CONCURRENT freed 359K, 49% free 3008K/5895K, external                      90K/513K, paused 2ms+6ms
04-18 19:26:44.791: I/dalvikvm(9455): Total arena pages for JIT: 11
04-18 19:26:44.791: I/dalvikvm(9455): Total arena pages for JIT: 12
04-18 19:26:46.693: I/dalvikvm(9455): Total arena pages for JIT: 13
04-18 19:26:50.077: W/dalvikvm(9455): threadid=9: thread exiting with uncaught exception (group=0x401f6560)
04-18 19:26:50.087: E/AndroidRuntime(9455): FATAL EXCEPTION: GLThread 10
04-18 19:26:50.087: E/AndroidRuntime(9455): java.lang.NoSuchMethodError: com.badlogic.gdx.audio.Sound.play
04-18 19:26:50.087: E/AndroidRuntime(9455):     at com.Jumper.Assets.playSound(Assets.java:115)
04-18 19:26:50.087: E/AndroidRuntime(9455):     at com.Jumper.MainMenuScreen.update(MainMenuScreen.java:39)
04-18 19:26:50.087: E/AndroidRuntime(9455):     at com.Jumper.Game.render(Game.java:34)
04-18 19:26:50.087: E/AndroidRuntime(9455):     at com.badlogic.gdx.backends.android.AndroidGraphics.onDrawFrame(AndroidGraphics.java:423)
04-18 19:26:50.087: E/AndroidRuntime(9455):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1364)
04-18 19:26:50.087: E/AndroidRuntime(9455):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1119)
04-18 19:27:58.353: I/Process(9455): Sending signal. PID: 9455 SIG: 9 
```

[日志猫](http://alkaos.com/images/271LogCat2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:46:43.747

此错误`java.lang.NoSuchMethodError: com.badlogic.gdx.audio.Sound.play`意味着您正在尝试运行该方法，`play()`但它不是您使用的真正方法。在这种情况下，这是因为[`com.badlogic.gdx.audio.Sound`](https://code.google.com/p/libgdx/source/browse/trunk/gdx/src/com/badlogic/gdx/audio/Sound.java)它是一个接口，而不是一个完整的类。

该源文件中的注释说用于`Audio.newSound(FileHandle)`创建实际`Sound`对象。这可能意味着调用这样的东西：

```
FileHandle handle = new FileHandle("path/to/sound.mp3");
Sound mySound = Gdx.audio.newSound(handle); 
```

我只是基于源代码，所以我可能会遗漏一些东西，但我认为应该这样做。本[教程视频](https://www.youtube.com/watch?v=ra3H5UHLRGU)也可能有所帮助。

# c++ - 打印地图中的所有对

> ID：10212563
> 
> 赞同：0
> 
> 时间：2012-04-18T15:20:43.203
> 
> 标签：c++, map

```
PhonebookEntry pb1("olaNormann");
pb1.add("Home","11234567");
pb1.add("Work","11065432");
cout << pb1.getNumbers()["Home"] << endl;
cout << pb1.getNumbers()["Work"] << endl;

map<string,string>::iterator it;
for(it = pb1.getNumbers().begin(); it != pb1.getNumbers().end(); ++it){
    cout << (*it).first << ": " << (*it).second << endl;
} 
```

我已经使用了前两个 cout 来确保正确添加了两对。该代码将打印出带有 Home 和 Work 标签的前两个数字，但无法在 for 循环中打印这两个数字。for 循环只打印出“Home: 11234567”。谁能明白为什么？下面是我实现了相关方法的头文件。

```
class PhonebookEntry{
private:
    std::string name;
    std::map<std::string, std::string> numbers;
public:
    PhonebookEntry(std::string name) : name(name){}
    std::map<std::string, std::string> getNumbers() const {return numbers;}

    void add(const std::string label,const std::string number){numbers[label] = number;}
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:35:20.933

`getNumbers()`正在返回地图的副本，而不是对其的引用。该副本在包含函数调用的表达式的末尾被销毁，因此在循环期间迭代器无效，并且对其进行任何操作都会产生未定义的行为。

它应该看起来像：

```
map<string,string> & getNumbers();
                   ^ 
```

其中`&`表示参考。提供`const`重载也是有礼貌的：

```
map<string,string> const & getNumbers() const;
                   ^^^^^^^              ^^^^^ 
```

通过该更改，您的代码应该可以按预期工作；[见示范](http://ideone.com/19i9k)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:36:37.690

如果这是您的方法：

```
std::map<std::string, std::string> getNumbers() const {return numbers;} 
```

然后它返回`numbers`地图的副本。所以在你的循环中，迭代器都搞砸了：

```
for(it = pb1.getNumbers().begin(); it != pb1.getNumbers().end(); ++it) { ... } 
```

首先，它使用地图的一份副本进行初始化。*然后，它与另一个副本*的结束迭代器进行比较。您需要通过引用返回地图：

```
const std::map<std::string, std::string>& getNumbers() const {return numbers;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:49:32.037

这里有两个不同的问题：

1.  将值插入临时值并打印
2.  在销毁后使用临时的迭代器

## 第一期

```
cout << pb1.getNumbers()["Home"] << endl; 
```

您会看到输出，因为`std::map<T,U>::operator[]`返回，它在被调用`U&`时仍然有效。`operator<<(std::cout, U&)`但是，临时在表达式的 处被破坏。

## 第 2 期

```
for(it = pb1.getNumbers().begin(); it != pb1.getNumbers().end(); ++it) { ... } 
```

`getNumbers()`正如 Mike 在他的回答中很好地解释的那样，循环体中返回的临时值是无效的。

# git - 从 gerrit 提交到 Git

> ID：10212564
> 
> 赞同：1
> 
> 时间：2012-04-18T15:20:45.287
> 
> 标签：git, gerrit

我正在运行 gerrit 服务器和连接到该服务器的 git 存储库。我可以从此 gerrit 服务器签出并获取位于 git 存储库中的源。但是当我尝试提交一些更改并将它们提交到 Git 存储库时，这些更改似乎没有被推送到 git 存储库。我`replication.config`像这样编辑了我的文件：

```
 [remote "Main"]
        url = https://portal-ua.tms.com/git/${name}.git/ 
        push = +refs/heads/*:refs/heads/*
        push = +refs/tags/*:refs/tags/* 
```

可能是什么问题？在日志中我收到以下错误：

```
org.eclipse.jgit.errors.NotSupportedException: remote does not support smart HTTP push
        at org.eclipse.jgit.transport.TransportHttp.openPush(TransportHttp.java:378)
        at org.eclipse.jgit.transport.PushProcess.execute(PushProcess.java:130)
        at org.eclipse.jgit.transport.Transport.push(Transport.java:1120)
        at com.google.gerrit.server.git.PushOp.pushVia(PushOp.java:281)
        at com.google.gerrit.server.git.PushOp.runImpl(PushOp.java:226)
        at com.google.gerrit.server.git.PushOp.runPushOperation(PushOp.java:179)
        at com.google.gerrit.server.git.PushOp.run(PushOp.java:161)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
        at com.google.gerrit.server.git.WorkQueue$Task.run(WorkQueue.java:333)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

是否可以通过http从gerrit推送到git repo？提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-29T15:27:48.517

我没有通过 http 成功，但通过 ssh 它适用于当前命令：

ssh -p 29418 gerrit 审查 --project $GERRIT_PROJECT --submit $GERRIT_CHANGE_NUMBER,$GERRIT_PATCHSET_NUMBER

# c++ - C++ std::string 到 Ruby VALUE

> ID：10212566
> 
> 赞同：1
> 
> 时间：2012-04-18T15:20:49.973
> 
> 标签：c++, ruby, ruby-1.9.3, ruby-c-extension

如何将 C++`std::string`对象转换为 Ruby`VALUE`对象？

我试过`rb_str_new2(c_string)`了，但没有用。

我有一个功能

```
VALUE foo(){return rb_str_new2(c_string);}; 
```

并给出一条错误消息：

```
cannot convert ‘std::string {aka std::basic_string<char>}’ to ‘const char*’ for argument ‘1’ to ‘size_t strlen(const char*)’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:36:07.977

您正在传递[`std::string`](http://www.cplusplus.com/reference/string/string/)给该函数，但它需要一个 null-terminated `const char *`。

成员函数可[`std::string::c_str()`](http://www.cplusplus.com/reference/string/string/c_str/)用于获取：

```
rb_str_new_cstr(string.c_str()); 
```

# c# - MFC 类到 C#

> ID：10212573
> 
> 赞同：1
> 
> 时间：2012-04-18T15:20:58.287
> 
> 标签：c#, class, mfc, wrapper

我在 C++/MFC 中实现了一个名为 GDAL 的库，该项目还实现了 gdiplus 用于绘制位图。

简而言之：我将所有内容封装在一个类中，该类接受一些 int、string 和其他非常常见的类型，并返回其中一些类型以及一些 gdiplus::Bitmap。所有这些都很好地打包在 .dll 和 .lib 中。

所以现在我想在 C# 项目中使用这个库来使用表单的所有功能。

我在整个互联网上搜索了答案，但在教程和其他有用的文档中找不到任何非常具体的内容。

但是有一个解决方案引起了我的注意，但描述得不是很好，它是 c++/clr 包装器。我创建了一个 C# finnely 接受作为参考的对象，但它不允许我实例化该类，也不能通过智能查看名称空间或任何相关的内容。

如果有人可以帮助我走这条路，或者给我一个类似的好东西，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:55:41.753

您不能在 C# 项目中使用 C++ 类。

你有两个选择。

第一种方法是在 VC++ 中创建一个托管包装器，该包装器将创建一个托管类，该类访问非托管类并聚合对类上各种属性/方法的调用。

请参阅[本文](http://ondotnet.com/pub/a/dotnet/2004/03/29/mcpp_part3.html)了解如何执行此操作

一旦你有了包装器，你就可以设置一个引用，然后从 C# 中使用你的类。

第二种方法是将 MFC 对象包装在 COM 对象中。你必须定义你的接口，然后创建类工厂，然后实例化对象......它更“面向对象”，但工作量很大，请参阅[教程](http://www.codeguru.com/cpp/com-tech/complus/general/article.php/c16639/How-to-Write-a-COM-Component.htm)

# asp.net-mvc - 如何在 mvc3 中更改 codition 上的提交按钮文本？

> ID：10212574
> 
> 赞同：1
> 
> 时间：2012-04-18T15:20:59.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我有 mvc 应用程序，因为我有一个表单正在接受输入，当我点击提交时，它会将值更新到数据库中。

```
View code: 
@model Mapping.Models.SecurityIdentifierMappingViewModel
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Mapping</legend>
        <div class="editor-label">
            @Html.Label("Pricing SecurityID")
        </div>
        <div class="editor-field">
            @Html.HiddenFor(model => model.MappingControls.Id)
            @Html.DropDownListFor(model => model.MappingControls.PricingSecurityID,
         new SelectList(Model.PricingSecurities, "Value", "Text"),
         "Select SecurityID"
            )
            @Html.ValidationMessageFor(model => model.MappingControls.PricingSecurityID)
        </div>
        <div class="editor-label">
            @Html.Label("CUSIP ID")
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.MappingControls.CUSIP,
         new SelectList(Model.CUSIPs, "Value", "Text"),
            "Select CUSIP"
            )
            @Html.ValidationMessageFor(model => model.MappingControls.CUSIP)
        </div>

        <div class="editor-label">
            @Html.Label("Calculation")
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.MappingControls.Calculation)
            @Html.ValidationMessageFor(model => model.MappingControls.Calculation)
        </div>
        <p>
            <input type="submit" value="Insert" />
        </p>
    </fieldset>
} 
```

`Update`在同一页面上，我有一个 webgrid，当我单击 webgrid 的编辑按钮时，我需要将提交按钮的文本更改为。我是新手。

```
Webgrid code
    @model IEnumerable<Mapping.Models.SecurityIdentifierMapping>
    @{
        ViewBag.Title = "Mapping";
        WebGrid grid = null;
        if (Model.Count() > 0)
        {
            grid = new WebGrid(source: Model,
                                    defaultSort: "Id",
                                    canPage: true,
                                    canSort: true,
                                    rowsPerPage: 10);
        }
    }
    <h3>
        Mapping Web Grid</h3>
    @if (grid != null)
    {
        @grid.GetHtml(
                    tableStyle: "grid",
                    headerStyle: "head",
                    alternatingRowStyle: "alt",
                    columns: grid.Columns(
                                                grid.Column("", header: null, format: @<text>@Html.ActionLink("Edit", "Index", new { uid = (int)item.id, userAction = "Edit" })
        @Html.ActionLink("Delete", "Index", new { uid = (int)item.id, userAction="Delete" }, new { @class = "Delete" })</text>),
                                                grid.Column("PricingSecurityID"),
                                                grid.Column("CUSIP"),
                                                grid.Column("Calculation")
                                              )

                    )
    }
    <script type="text/javascript">
        $(function () {
            $(".Delete").click(function () {
                if (confirm("Do you want to delete?")) {
                    var href = $(".Delete").attr('href');
                    href = href + "?userAction=Delete";
                    window.location.href = href;
                    return true;
                }
                return false;
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:24:37.447

你可以给你的提交按钮一个 id：

```
<input id="btn-submit" type="submit" value="Insert" /> 
```

还应用你的编辑锚一个类：

```
grid.Column(
    "", 
    header: null, 
    format: 
        @<text>
            @Html.ActionLink(
                "Edit", 
                "Index", 
                new { uid = (int)item.id, userAction = "Edit" }, 
                new { @class = "edit" }
            )
            @Html.ActionLink(
                "Delete", 
                "Index", 
                new { uid = (int)item.id, userAction="Delete" }, 
                new { @class = "Delete" }
            )
        </text>
    ) 
```

然后订阅编辑链接的点击事件：

```
$(function() {
    ...
    $('.edit').click(function() {
        $('#btn-submit').val('Update');
        ...
    });
}); 
```

现在，由于您的编辑锚似乎正在服务器上调用不同的操作，并且除非您使用 AJAX，否则整个页面可能会重新加载，因此使用 javascript 设置提交按钮文本可能不是一个好主意。在这种情况下，处理它的正确方法是让 Edit 控制器操作在您的视图模型上设置一些属性，这将表明我们处于编辑模式并允许在提交按钮文本上设置条件。

像这样的东西：

```
<input type="submit" value="@(Model.IsEditing ? "Update" : "Insert")" /> 
```

由您在 Edit 操作中将视图模型上的 IsEditing 属性设置为 true。

# dom - 从 DOM 请求此元素的正确方法是什么？

> ID：10212583
> 
> 赞同：0
> 
> 时间：2012-04-18T15:21:26.150
> 
> 标签：dom, gpx

我正在从 gpx 文件中检索所有坐标，这是该文件中的示例行

```
 <gpxx:rpt lon="11.0739613" lat="47.5691700"/> 
```

在 IE 和 FireFox 中，以下代码正确执行：

```
var routePoints = data.documentElement.getElementsByTagName("gpxx:rpt");

for (var i = 0; i < routePoints.length; i++) 
 {
     routePoints[i].getAttribute("lat");
     routePoints[i].getAttribute("lon");
 } 
```

虽然奇怪的是，在 Chrome 上这段代码不起作用，它似乎没有从 DOM 中检索任何信息。

在寻找解决方案的旅途中，我看到了“getElementsByTagNameNS(ns,name)”，但是查看[http://www.w3schools.com/dom/met_element_getelementsbytagnamens.asp](http://www.w3schools.com/dom/met_element_getelementsbytagnamens.asp)上的示例，我无法确定它是否在对我有任何帮助的事实。

任何提示表示赞赏

非常感谢

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:58:53.773

是的，您的文件正在使用命名空间，因此您应该使用此方法的**命名空间感知**版本。

*   如果您知道**gpxx:**前缀的命名空间，请使用：

    `getElementsByTagNameNS(your_namespace, "rpt")`

*   如果您的文件不使用任何其他带有**rpt**元素的命名空间，那么这就足够了：

    `getElementsByTagNameNS("*", "rpt")`

# math - freeglut - 使用鼠标平滑的相机旋转

> ID：10212586
> 
> 赞同：1
> 
> 时间：2012-04-18T15:21:30.240
> 
> 标签：math, opengl, 3d, freeglut

当我使用鼠标旋转我的 fps 相机时，动画不流畅。当我使用键盘时，一切都很好。对于键盘，我使用 bool 类型的数组来缓冲键。使用鼠标时如何使动画流畅？

```
void MousePassiveMotion(int x, int y)
{
     int centerX = glutGet(GLUT_WINDOW_WIDTH) / 2;
     int centerY = glutGet(GLUT_WINDOW_HEIGHT) / 2;

     int deltaX =  x - centerX;
     int deltaY =  y - centerY;

     if(deltaX != 0 || deltaY != 0) 
     {
          heading = deltaX * 0.2f;
          pitch = deltaY  * 0.2f;
          glutWarpPointer(centerX, centerY);
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:12:47.013

有时当鼠标轮询率和屏幕刷新率不是很好的比例时，根据鼠标位置更新显示会导致抖动效果。

你有垂直同步，对吗？而如果你转动它的鼠标移动是不是以撕裂为代价更流畅？

一种选择是使用平滑函数，它“滞后”您用于鼠标位置的值，仅比实际鼠标位置稍晚一点

它的要点是这样的：

```
float use_x,use_y;      // position to use for displaying
float springiness = 50; // tweak to taste.

void smooth_mouse(float time_d,float realx,float realy) {
    double d = 1-exp(log(0.5)*springiness*time_d);

    use_x += (realx-use_x)*d;
    use_y += (realy-use_y)*d;
} 
```

这是一个[指数衰减](http://en.wikipedia.org/wiki/Exponential_decay)函数。您在每一帧都调用它来确定鼠标位置的用途。诀窍是为`springiness`. 迂腐的`springiness`是，实际鼠标位置和使用位置之间的距离减半的次数。对于平滑鼠标移动，一个好的值`springiness`可能是 50-100。

`time_d`是自上次鼠标轮询以来的间隔。如果可以的话，将实时增量（以小数秒为单位）传递给它，但你只需传递它就可以逃脱`1.0/fps`。

如果你有一个支持 WebGL 的浏览器，你可以[在这里](http://knobbits.org/webgl/widgets.html)看到一个实时版本- 寻找一个名为`GLDraggable`in的类`viewer.js`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T22:43:35.553

您应该使用类似的方法，而不是使用鼠标的最后位置而不是屏幕的中心点来计算摄像机角度。

```
void mouseMove( int x, int y )
{
   theta += (lastx-x) / 100.0;
   phi += (lasty-y) / 50.0;
   lastx = x;
   lasty = y;

   if ( phi >= M_PI )
      phi = M_PI - 0.001;
   else if ( phi <= 0 )
      phi = 0.001;
} 
```

这里 100.0 和 50.0 是影响运动速度（灵敏度）的因素，if / else 语句将运动限制在某些角度。

# php - LAMP / jquery 高级搜索

> ID：10212587
> 
> 赞同：0
> 
> 时间：2012-04-18T15:21:32.330
> 
> 标签：php, search, lamp

我正在重新设计一个包含超过 30K 条目的网站，供用户浏览。我模拟了几个不同的想法，但每次都对结果不满意。

我想尝试类似于 newegg/ebay 的搜索，左侧搜索类别，顶部的面包屑等。不幸的是，我什至不知道该怎么称呼它。我试过搜索，但无济于事。

因为我在模拟想法，所以我不想花太多时间来实现它，所以我希望有一个可以使用的现有框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:56:41.347

我认为这个问题有点宽泛，但是如果您愿意切换到全新的 CMS，[Drupal](http://drupal.org/ "Drupal.org")默认会勾选所有框，如果菜单块放置非常灵活。如果[Ubercart](http://www.ubercart.org/ "优步车")插件是电子商务网站，那么它值得研究。

# drupal - entity_load() 不工作

> ID：10212589
> 
> 赞同：-1
> 
> 时间：2012-04-18T15:21:35.763
> 
> 标签：drupal, drupal-7

他们以下有什么问题吗？$entity 变量没有返回任何东西。

我正在尝试使用`entity_load()`如下方式获取实体对象：

```
$entity = entity_load('ENTITY_NAME', IDS, $conditions = array(), $reset = FALSE); 
```

*ENTITY_NAME 和 IDS 显然不是上面的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:38:20.763

IDS 是您的 ENTITY_NAME 的有效 ID 数组吗？

你能跑一下看看这是否有效：

```
$entity = entity_load('ENTITY_NAME', IDS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:22:13.943

“IDS”上有视图生成的跨度标签，显然没有将它们解析为整数。

# php - DOMPDF 安装选项

> ID：10212600
> 
> 赞同：2
> 
> 时间：2012-04-18T15:22:01.393
> 
> 标签：php, pdf, dompdf

我正在安装 dompdf [http://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)

进展顺利，但安装说明告诉我“编辑 dompdf_config.custom.inc.php（0.6 版）或 dompdf_config.inc.php（0.5 版）以适合您的安装。” 我不确定我应该取消注释哪些行。我在带有通用灯堆栈的 Ubuntu Server (10.04) 上使用它，打算用 PHP 编写代码。

有没有人使用它至少可以解释（至少部分）不同的选项是什么。

```
<?php 
//define("DOMPDF_TEMP_DIR", "/tmp");
//define("DOMPDF_CHROOT", DOMPDF_DIR);
//define("DOMPDF_UNICODE_ENABLED", false);
//define("DOMPDF_PDF_BACKEND", "PDFLib");
//define("DOMPDF_DEFAULT_MEDIA_TYPE", "print");
//define("DOMPDF_DEFAULT_PAPER_SIZE", "letter");
//define("DOMPDF_DEFAULT_FONT", "serif");
//define("DOMPDF_DPI", 72);
//define("DOMPDF_ENABLE_PHP", true);
//define("DOMPDF_ENABLE_REMOTE", true);
//define("DOMPDF_ENABLE_CSS_FLOAT", true);
//define("DOMPDF_ENABLE_JAVASCRIPT", false);
//define("DEBUGPNG", true);
//define("DEBUGKEEPTEMP", true);
//define("DEBUGCSS", true);
//define("DEBUG_LAYOUT", true);
//define("DEBUG_LAYOUT_LINES", false);
//define("DEBUG_LAYOUT_BLOCKS", false);
//define("DEBUG_LAYOUT_INLINE", false);
//define("DOMPDF_FONT_HEIGHT_RATIO", 1.0);
//define("DEBUG_LAYOUT_PADDINGBOX", false);
//define("DOMPDF_LOG_OUTPUT_FILE", DOMPDF_FONT_DIR."log.htm");
//define("DOMPDF_ENABLE_HTML5PARSER", true);
//define("DOMPDF_ENABLE_FONTSUBSETTING", true);

// DOMPDF authentication
//define("DOMPDF_ADMIN_USERNAME", "user");
//define("DOMPDF_ADMIN_PASSWORD", "password"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T02:10:48.710

您*无需*编辑任何设置即可开始使用 dompdf。所有设置都有默认值，并且 dompdf 可以开箱即用。所有设置都在[dompdf_config.inc.php](http://code.google.com/p/dompdf/source/browse/trunk/dompdf/dompdf_config.inc.php)中进行了解释，这也是设置默认值的地方。但这里有一个最需要注意的设置的快速列表：

*   DOMPDF_TEMP_DIR ：dompdf 使用此目录进行图像处理和远程内容的临时存储。运行 dompdf 的进程应该具有读/写访问权限。默认 =`sys_get_temp_dir()`
*   DOMPDF_CHROOT ：如果您使用`$dompdf->load_html_file()`从本地文件系统加载文件，它需要位于此设置中指定的目录下。默认 = dompdf 安装目录
*   DOMPDF_UNICODE_ENABLED ：您的文档是否使用英语以外的语言？如果是这样，这应该是正确的，您应该阅读[Unicode How-to](http://code.google.com/p/dompdf/wiki/CPDFUnicode)。默认 = 真。
*   DOMPDF_ENABLE_PHP：使用内联脚本？如果不是，或者您不知道这意味着什么，请将其设置为 false。默认 = 假。
*   DOMPDF_ENABLE_REMOTE ：您是否使用带域的完整 URL 加载文档？您是否使用带域的完整 URL 引用图像/样式表？将此设置为真。默认 = 假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-12T16:43:58.703

和配置：（dompdf_config.custom.inc）

```
//define("DOMPDF_TEMP_DIR", "/tmp");
//define("DOMPDF_CHROOT", DOMPDF_DIR);
define("DOMPDF_UNICODE_ENABLED", true);
//define("DOMPDF_PDF_BACKEND", "PDFLib");
define("DOMPDF_DEFAULT_MEDIA_TYPE", "print");
define("DOMPDF_DEFAULT_PAPER_SIZE", "A4");
//define("DOMPDF_DEFAULT_FONT", "serif");
define("DOMPDF_DPI", 300);
define("DOMPDF_ENABLE_PHP", true);
define("DOMPDF_ENABLE_REMOTE", true);
define("DOMPDF_ENABLE_CSS_FLOAT", true);
//define("DOMPDF_ENABLE_JAVASCRIPT", false);
//define("DEBUGPNG", true);
//define("DEBUGKEEPTEMP", true);
//define("DEBUGCSS", true);
//define("DEBUG_LAYOUT", true);
//define("DEBUG_LAYOUT_LINES", false);
//define("DEBUG_LAYOUT_BLOCKS", false);
//define("DEBUG_LAYOUT_INLINE", false);
//define("DOMPDF_FONT_HEIGHT_RATIO", 1.0);
//define("DEBUG_LAYOUT_PADDINGBOX", false);
//define("DOMPDF_LOG_OUTPUT_FILE", DOMPDF_FONT_DIR."log.htm");
define("DOMPDF_ENABLE_HTML5PARSER", true);
define("DOMPDF_ENABLE_FONTSUBSETTING", true);

// DOMPDF authentication
define("DOMPDF_ADMIN_USERNAME", "admin");
define("DOMPDF_ADMIN_PASSWORD", "anypassword"); 
```

# mysql - MySQL 删除查询

> ID：10212604
> 
> 赞同：1
> 
> 时间：2012-04-18T15:22:11.270
> 
> 标签：mysql, sql

我在使用 MySQL 查询时遇到了一些问题。我在一个名为“ID”的表中有一个字段，我想要一个删除该表中所有行的查询，除非它们具有某个 ID，我希望更多能够在查询中定义多个 ID。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:23:23.053

```
DELETE FROM your_table
WHERE id NOT IN (1,2,3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:24:13.317

```
DELETE
FROM yourTable
WHERE yourID NOT IN (1,2,3,4) -- place your list here 
```

或者您不想列出您的 ID，您可以使用包含您要保留的 ID 列表的子查询：

```
DELETE
FROM yourTable
WHERE yourID NOT IN (SELECT * FROM yourTable WHERE ...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:23:26.773

```
delete from your_table where id not in (1, 2, 4) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T15:24:10.140

你应该试试这个查询：

```
DELETE FROM tablename WHERE ID NOT IN ('1','2','3'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T15:25:33.963

这应该做的工作

```
delete from TABLE_NAME where id not in (1,2,3,4,5,6) 
```

of (1,2,3,4,5...) 是您要保存的 id 列表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T15:32:03.247

你也可以在一些额外的条件下使用它：

```
 delete from your_table_name where id not in (select id from your_table_name where necessary=false) 
```

# regex - 提取unix中特定出现的引号之间的字符串

> ID：10212611
> 
> 赞同：4
> 
> 时间：2012-04-18T15:22:36.963
> 
> 标签：regex, unix, sed, awk, grep

输入文件

```
..
set name "old name"; # comment "should be updated"
.. 
```

输出文件

```
..
set name "new name" ; #comment "should be updated"
.. 
```

当我试图用 `grep -i 'name' inputfile | grep -P \".+{\"}` 它在第一个“和最后一个”之间的grep内容来grep引号之间的内容时

IE `old name"; # comment "should be updated`

使用`grep`,`sed`或`awk`!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T16:19:40.033

目前还不清楚你到底想做什么。一方面，您的`grep`命令包含大括号，而输入不包含。此外，您似乎希望根据输入和输出的比较进行替换。

但是，从字面上理解您的问题，这`grep`是引号之间的字符串的方法。您可以使用非贪婪匹配：

```
grep -Po '".*?"' 
```

例子：

```
$ echo 'set name "username"; # comment "should be updated"' | grep -Po '".*?"'
"username"
"should be updated" 
```

**编辑：**

为了替换一个值，您可以使用`sed`. 你不会使用`grep`.

```
sed 's/"[^"]*"/"new name"/' 
```

例子：

```
$ echo 'set name "old name"; # comment "should be updated"' | sed 's/"[^"]*"/"new name"/'
set name "new name"; # comment "should be updated" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T15:27:02.810

赛德：

```
sed 's/[^"]*"\([^"]*\)".*/\1/' 
```

呸：

```
awk -F'"' '{ print $2 }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:38:52.603

我认为后面的词`should be`应该是新的用户名

```
sed 's/^\([^"]\+"\)[^"]\+\(.*should be \)\([^"]\+\)/\1\3\2\3/' 
```

使用 GNU sed 更整洁

```
sed -r 's/^([^"]+")[^"]+(.*should be )([^"]+)/\1\3\2\3/' 
```

**编辑**- 丹尼斯有一个很好的答案。如果新名称保存在 shell 变量中，您可以使用引用技巧：

```
new_name="Fred"
sed 's/"[^"]*/"'"$new_name"'"/' 
```

# data-warehouse - 尝试设计涉及“租赁类型”的星型模式

> ID：10212613
> 
> 赞同：1
> 
> 时间：2012-04-18T15:22:39.777
> 
> 标签：data-warehouse, star-schema

我正在设计一个电影租赁数据仓库

我希望事实表包含电影租赁/退货，但我很困惑。

电影可以在任何商店退还，所以我需要证明这一点。

我有这些维度：时间、客户信息、电影信息和商店

如果它们是单独的记录，我看不到我会在哪里显示它是出租还是退货？

我有什么选择来设计星型模式来显示这些信息我不知道把它放在哪里，我的头快要爆炸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:59:39.040

从事务级别开始，然后从那里构建......

```
FactMovieTransaction
    CustomerKey
    TransactionTypeKey
    StoreKey
    MovieKey
    DateKey
    TimeKey
    <fact 1>
    <fact 2>

DimCustomer
    CustomerKey
    CustomerID (ex. 0000123478)
    CustomerName (ex. Peter Anderson)

DimTransactionType
    TransactionTypeKey 
    TransactionType (ex. Return, Rental)

DimStore
    StoreKey
    StoreID (ex. 234, 212)
    StoreName (ex. BlockBuster#243, BlockBuster#212)

DimMovie
    MovieKey
    MovieName (ex. StarWars)
    MovieDescription
    Genere

DimDate
    DateKey
    Date (ex. 1/1/900 - 1/1/2999)

DimTime
    TimeKey
    Time (ex. 00:00 - 23:59) 
```

# javascript - 从父 javascript 更改框架中的元素

> ID：10212614
> 
> 赞同：0
> 
> 时间：2012-04-18T15:22:39.800
> 
> 标签：javascript, html, frame

这不会像我做的那么难，但我最难得到这个问题的简单答案。我可以找到很多主题和教程，用于使用 Javascript 从另一个框架调用框架或选择 iframe。但是，从父窗口的 javascript 调用子框架似乎很少见。

我有一个父网页，其中有一个指向子页面的框架。子页面中包含表单元素。我想在父窗口中使用 Javascript 来更改子窗口中的表单元素。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title></title>
<script type="text/javascript">
<!--
// I am having trouble getting THIS line to locate the frame
document.childFrame.document.getElementById('Website').value = 'domain.com';
-->
</script>

<frameset rows="100%">
    <frame name="childFrame" src="child.html" />
</frameset><noframes></noframes>

</html> 
```

# ruby-on-rails - 在具有非表模型的控制器方法之间保留数据？

> ID：10212616
> 
> 赞同：1
> 
> 时间：2012-04-18T15:22:45.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, persistence

我有一个应用程序可以根据输入的文本制作图表。

我正在使它成为伪 REST，因为我有一个用于输入文本的表单，`#new`我想运行它的所有计算`#create`，然后显示输出，`#show`但我没有使用任何存储，所以计算的数据`#create`应该以某种方式传递给#show' 并且将其放入`session`. 是否有任何选项可以保留数据仅用于重定向到其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:55:11.550

在您`def create`的功能中，而不是重定向以显示为什么不这样做：

```
render "show" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:50:13.990

Eric Sites 给出了一个很好的答案，但我想展示关于 REST 理念的另一种观点。

正如我在问题中所说：我没有保存和创建资源的数据。所以我建议将数据从表单直接发送`#show`到`GET`.

这样，`#new`action 将为您提供新资源的表单，并且`#show`action 将向您显示由 URI 指定并动态构建*的资源*

# javascript - 一个菜鸟的 javascript oo 编程语法帮助

> ID：10212617
> 
> 赞同：0
> 
> 时间：2012-04-18T15:22:46.993
> 
> 标签：javascript, oop

我正在尝试编写一些 oo 风格的 js。当我的页面加载时，它会执行我的 login() 函数两次，而我想要触发 login() 的事件侦听器根本不起作用。任何帮助将不胜感激。这是我的代码：

```
(function( window, undefined ) {
var document = window.document,
    navigator = window.navigator,
    location = window.location;
//build the login button
var DA = {
    width : '70px',
    height : '20px',

    createLoginButton : function(){
        var a = document.createElement('a');
        a.style.width = this.width;
        a.style.height = this.height;
        a.style.cursor = 'pointer';
        var div = document.createElement('div');
        div.id = 'da_login_button';
        div.onclick = DA.login();
        div.innerHTML = "client login";
        div.style.width = this.width;
        div.style.height = this.height;
        div.style.backgroundColor = '#59724A';
        div.style.color = 'white';
        div.style.border = '4px solid #6B5D49';
        div.style.padding = '3px';
        div.style.textAlign = 'center';
        a.appendChild(div);
        return a;
    },

    //write the button to the dom
    writeLoginButton : function(){
        var dest = document.getElementById('digital_arborist_login');
        dest.style.width = this.width;
        dest.style.height = this.height;
        var theButton = DA.createLoginButton();
        dest.appendChild( theButton );
        theButton.addEventListener("click", DA.login(), false);
    },

    //detect ssl
    isSecure : function(){
        if (location.protocol === 'https:') {
            return true;
        } else {
            return false;
        }
    },

    // the login function
    login : function(){ 
        alert('href: '+location.href+'<br />protocol: '+location.protocol);
    },

};  
window.DA = DA; 
})( window )

// start the magic
DA.writeLoginButton(); 
```

[这是我正在测试我的代码的网页。](https://www.austintreeexperts.com/services/service_area.cfm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:25:44.740

```
theButton.addEventListener("click", DA.login(), false); 
```

在这一行更改`DA.login()`为 just `DA.login`。当您这样做时`DA.login()`，您将函数的结果*（*`login()`即`undefined`）传递给单击处理程序，而不是函数本身。

它应该是：

```
theButton.addEventListener("click", DA.login, false); 
```

编辑：`div.onclick = DA.login();`应该`div.onclick = DA.login;`也是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:26:53.030

改变这个：

```
theButton.addEventListener("click", DA.login(), false); 
```

至：

```
theButton.addEventListener("click", DA.login, false); 
```

和这个：

```
div.onclick = DA.login(); 
```

至：

```
div.onclick = DA.login; 
```

在每种情况下，您都希望将函数本身分配为回调。您实际上正在执行该函数并将函数调用的结果分配为回调......这就是为什么您的“登录”方法在启动时运行两次以及为什么您的点击事件无法正常运行的原因。

您还应该`undefined`从第一行删除参数。 `undefined`是 javascript 中的一个关键字，我真的很惊讶你没有从中得到语法错误。它应该看起来像：

```
(function(window) { 
```

# jboss - JBoss AS 7 禁用热部署

> ID：10212618
> 
> 赞同：7
> 
> 时间：2012-04-18T15:22:48.633
> 
> 标签：jboss

在以前的版本中，您只需禁用 conf/jboss-service.xml 中的 ScanEnabled 属性。

我想知道你如何在 JBoss 7 上禁用它

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T15:05:27.153

我今天为此苦苦挣扎。虽然您可以将 auto-deploy-zip 和 auto-deploy-exploded 都设置为 false，但这实际上并没有禁用热部署，它只是让您必须通过触摸 .dodeploy 文件来触发热部署来启动它。此外，这要求您为每个要在容器启动后启动的工件触摸一​​个 .dodeploy 文件。

阅读：[https](https://community.jboss.org/wiki/TurnDeploymentScannerDown) ://community.jboss.org/wiki/TurnDeploymentScannerDown 和这个：[https](https://docs.jboss.org/author/display/AS7/Deployment+Scanner+configuration) ://docs.jboss.org/author/display/AS7/Deployment+Scanner+configuration我意识到禁用热部署的正确方法是将扫描间隔设置为负数，这会导致部署扫描程序仅在启动时运行。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-18T19:51:25.913

您可以只删除部署扫描程序子系统。

删除`<extension module="org.jboss.as.deployment-scanner"/>`然后删除：

```
 <subsystem xmlns="urn:jboss:domain:deployment-scanner:1.1">
        <deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" auto-deploy-zipped="false" auto-deploy-exploded="false"/>
    </subsystem> 
```

如果您不想删除子系统，请添加`auto-deploy-zipped="false" auto-deploy-exploded="false"`到您的`<deployment-scanner/>`标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:38:05.700

假设您在独立模式下运行 AS 7，您必须添加部署扫描器子系统配置，如下所示

```
<subsystem xmlns="urn:jboss:domain:deployment-scanner:1.0">
    <deployment-scanner scan-interval="5000" relative-to="jboss.server.base.dir" path="deployments" />
    <deployment-scanner name="my-external-deployment-scanner" path="/home/jpai/as7/deployments" scan-interval="5000" />
</subsystem> 
```

# 参考

```
https://community.jboss.org/wiki/DeployingAnApplicationFromAnExternalDeploymentLocation
https://docs.jboss.org/author/display/AS7/Application+deployment 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T09:26:56.027

虽然从 JBoss 4 迁移应用程序我们有相同的要求。我们将扫描间隔设置为 0，因此仅在服务器启动时扫描部署目录。

```
<subsystem xmlns="urn:jboss:domain:deployment-scanner:1.1">
  <deployment-scanner name="your-jboss6-deploymentscanner" path="${your.scan.dir}" scan-interval="0"/>
 </subsystem> 
```

上面 your.scan.dir 是在我们启动服务器时在命令行中设置的。

# php - Symfony2/Doctrine2：生成包外的实体

> ID：10212622
> 
> 赞同：11
> 
> 时间：2012-04-18T15:22:57.203
> 
> 标签：php, symfony, doctrine-orm, entities

我正在尝试为我的 Symfony 2 应用程序生成实体。这些实体将由多个包（可能还有几个应用程序）共享，因此我不希望它们属于一个包。我希望它们位于 src/MyApp/Entity 文件夹中。

我的实体已经有了 YML，存储在 src/MyApp/Entity/config/doctrine (class1.orm.yml, ...)

我正在尝试使用教义生成相应的 PHP 类：generate:entities 任务

这是我的 app/config/config.yml 中的内容

```
orm:
    auto_generate_proxy_classes: %kernel.debug%
    auto_mapping: false
    mappings: 
      AppRest: 
        type: yml 
        prefix: AppRest\Entity 
        dir: %kernel.root_dir%/../src/AppRest/Entity/config/doctrine 
```

这是我用来生成实体的命令

```
php app/console doctrine:generate:entities AppRest/Entity 
```

这是我得到的例外

```
[InvalidArgumentException]
Bundle "AppRest" does not exist or it is not enabled. 
```

我想让学说明白我不是想生成捆绑在一起的实体。我还尝试指定 --path 选项（--path=src/AppRest/Entity），但它没有改变任何东西。

任何人都可以帮忙吗？

**编辑**：

我删除了目录中的额外空间，从而解决了问题。**必须**指定路径选项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T07:31:26.513

实际上，我只是在上面的 dir 选项中缺少一个空格。这现在有效，但我仍然想知道这是否是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T14:16:14.997

采用：

```
is_bundle: false 
```

更多信息在这里：http: [//zalas.eu/how-to-store-doctrine-entities-outside-of-a-symfony-bundle/](http://zalas.eu/how-to-store-doctrine-entities-outside-of-a-symfony-bundle/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-21T06:48:10.083

当您遇到此类错误时，请检查您是否指定了包的快捷方式名称，而不是包目录的名称。例如，如果您有 Acme\DemoBundle，则它的短名称是 AcmeDemoBundle。在这种情况下

```
orm:
    mappings: 
      DemoBundle: 
          .... 
```

是不正确的。

正确的是：

```
orm:
    mappings: 
      AcmeDemoBundle: 
          .... 
```

# wordpress - Wordpress-在父页面中显示子模板

> ID：10212625
> 
> 赞同：1
> 
> 时间：2012-04-18T15:23:06.773
> 
> 标签：wordpress

我目前正在使用 wordpress 创建一个网站。在一个页面中，我创建了一个子菜单，在 php 中使用来自我的 phpmyadmin 的数据，并使用子页面的 ID，我正在显示不同的内容。但是，在我的一个子页面中，我有一些 php 代码，所以我创建了一个模板，但它根本不起作用......

有人有想法吗？

非常感谢！

# android - Android：如何获取 android 中任何文件的图标？

> ID：10212627
> 
> 赞同：1
> 
> 时间：2012-04-18T15:23:07.477
> 
> 标签：android, file, icons

有没有办法在Android中获取任何文件的图标？我正在构建一个文件浏览器应用程序。我试过这个......但 ApplicationInfo 对象设置为空。

PackageInfo pkgInfo = getPackageManager().getPackageArchiveInfo(currentPath+pathName, 0); 应用程序信息 appinfo = pkgInfo.applicationInfo;

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:35:42.073

您只能为应用程序文件（.apk）获取图标，对于文件的其余部分，您可以检索文件的扩展名并为每个文件设置图标。

# ruby-on-rails - Ruby If 语句重构

> ID：10212630
> 
> 赞同：2
> 
> 时间：2012-04-18T15:23:12.623
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, if-statement

我有一个非常简单的 Ruby 问题。有没有办法重构这个：

```
<%= some_array.length if some_array.length > 1 %> 
```

变成类似的东西

```
<%= some_array.length if self > 1 %> 
```

'self'（例如）在哪里引用最初计算的值 - 即 some_array.length？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T15:24:56.807

不，你不能这样做。该语句不会以您假设的方式从左到右进行评估。该`if`语句首先被评估，因此没有“自我”要测试。正如您所说的，“初始计算值”*首先*由`if`语句计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:30:47.570

如果你不想计算 2 次，你可以这样做

```
<% len = some_array.length %>
<%= len if len > 1 %> 
```

否则你可以创建辅助方法。最初的问题有点误导，因为 if 的左侧不会在右侧之前计算，所以即使您可以将“您的自我”作为计算值传递（您的伪代码）：

```
people.destroy_all if self > 100 
```

这将始终计算破坏以产生“你的自我”：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:57:07.077

我喜欢保持主模板简单，并将逻辑拉入助手中。erb 可以包含：

```
<%= display_length(some_array) %> 
```

助手包含：

```
def display_length(array)
  array.length if array.length > 1
end 
```

当然，调整名称以最好地代表您的业务逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:37:06.440

A. 你可以这样做

```
<%= l = some_array.length if l > 1 %> 
```

B. 你可以使用[Presenter 模式](http://railscasts.com/episodes/287-presenters-from-scratch)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T15:52:34.050

也许：

```
length if (length = some_array.length) > 1 
```

有点深奥，但更短...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T16:57:56.920

你能做的最好的事情或多或少是这样的：

```
t = some_array.length; t if t > 1 
```

另外，请注意，有条件的插值 ERB 表达式（不带`else`）将在一种情况和`nil`另一种情况下返回值。ERB 实施将评估`result.to_s`并产生“” `#to_s`。`nil`因此，它是一种可行的设计模式，但可能不容易被以后出现的所有代码阅读器所理解。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-18T16:16:24.337

```
class Object
  def block_scope
    yield self
    [] # Required for HAML and probably ERB as well
  end
end 
```

再培训局：

```
<% array.length.block_scope do |l| %>
  <%= l if l > 1 %>
<% end %> 
```

哈姆勒：

```
- array.length.block_scope do |l|
  = l if l > 1 
```

视觉上比简单的分配好一点

**更新**

同意添加`block_scope`到`Object`命名空间对于视图来说绝对是矫枉过正，更好的解决方案是创建一个助手：

```
def block_scope(*args)
  yield *args
  [] #?
end

- block_scope(array.length) do |l|
  = l if l > 1 
```

# plone - 在 portlet 中显示修改日期

> ID：10212636
> 
> 赞同：0
> 
> 时间：2012-04-18T15:23:36.320
> 
> 标签：plone

我们的portlet 显示标题和创建日期。项目按修改日期排序。当有人修改旧新闻的内容时，它将以旧的创建日期而不是当前的修改日期放在列表的顶部。这令人困惑。有没有办法在 portlet 中显示修改日期？在 Zope 管理界面或其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T21:56:26.993

Plone 的默认 portlet 模板都可以在 ZMI > portal_view_customizations 中找到。不幸的是，它们并没有被非常清楚地识别出来......

*   新闻 Portlet = news.pt
*   集合 Portlet = collection.pt
*   事件 Portlet = events.pt
*   最近的项目 portlet = 最近的.pt
*   审查 Portlet = review.pt
*   静态文本 Portlet = static.pt（但这当然不使用日期）

# c++ - 简化设计/删除方法调用中的间接级别的想法

> ID：10212638
> 
> 赞同：0
> 
> 时间：2012-04-18T15:23:38.383
> 
> 标签：c++, methods, multiple-indirection

在下面的以下代码（完整版的[ideone](http://ideone.com/325jy)）中，指向方法的指针`Container::void updateFoo`和`Container::void updateBar`注册在 map 中`m_updateMethod`。这些方法简单地分别调用`Foo::update`和`Bar::update`。

`Foo::update`有没有办法通过存储和来避免这种额外的间接级别`Bar::update`？

```
class Foo
{
public:
    void update( )
    {
        std::cout << "Updating Foo ..." << std::endl;
    }
};

class Bar
{
public:
    void update( )
    {
        std::cout << "Updating Bar ..." << std::endl;
    }
};

class Container
{
public:
    typedef void (Container::*updateMethod)();
    typedef std::map<std::string , updateMethod> UpdateMethodMap;

    static const UpdateMethodMap    m_updateMethod;
    static UpdateMethodMap          initializeUpdateMethodMap();
    static updateMethod             getUpdateMethod( const std::string attributeName );

    void update( const std::string name )
    {
        updateMethod updater = getUpdateMethod( name );
        if( updater )
        {
            (this->*updater)();
        }
    }

    void updateFoo()
    {
        m_foo.update();
    }

    void updateBar()
    {
        m_bar.update();
    }

private:    
    Foo m_foo;
    Bar m_bar;
}; 
```

# java - 如何限制记录频率？

> ID：10212644
> 
> 赞同：3
> 
> 时间：2012-04-18T15:24:05.993
> 
> 标签：java, logging, delay

是否有任何日志库包含任何限制日志消息频率的方法？

我的意思是假设我有一个等待循环，它会记录“什么都没做”。如何使下一个“没有完成”消息仅在说 1 秒后记录？

我知道我可以自己编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-06T21:07:30.563

大多数日志库都支持过滤器来限制日志频率。

1.  [请参阅SLF4J 或 Log4J](https://stackoverflow.com/questions/41465002/can-i-make-log4j-suppress-logging-specific-messages-for-a-time)上的此答案。
2.  看到这个答案[`java.util.logging`](https://stackoverflow.com/questions/986548/how-to-regulate-the-amount-of-printouts-generated-by-a-logging-instruction-produ)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:31:55.163

您必须在代码中管理它，或者您需要编写自定义附加程序（这取决于您使用的日志库）

# android - Android：Android 3+ 中的选项菜单异常 / Resources$NotFoundException：资源 ID #0x1090044

> ID：10212650
> 
> 赞同：4
> 
> 时间：2012-04-18T15:24:15.303
> 
> 标签：android, android-menu

我的应用程序有一些活动，都有一个选项菜单，这是一样的。它工作正常，仅在一个活动（ListView 子类）上，单击菜单按钮时崩溃。

这只发生在 4.x 中（也许 3.x - 无法检查），而不是 2.3 或更早版本。在模拟器和不同设备上进行了测试。

有趣的事实：当我在活动渲染后旋转设备并按下菜单按钮时，它工作正常。

此外，当列表适配器仍在加载且列表为空时，菜单仍然有效。一旦列表被填满，就会出现问题（仅如上所述的 2.3 版以上）

菜单本身可以是一个没有资源的简单单行，它仍然会发生。

选项菜单代码：

```
/**
 * Prepare the options menu
 * @param menu The menu
 * @return You must return true for the menu to be displayed; if you return false it will not be shown.
 */
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    menu.clear();

    title = getString(R.string.optionsmenu_search);
    MenuItem item1 = menu.add(Menu.NONE, MENU_SEARCH, Menu.NONE, title);        
    item1.setIcon(R.drawable.ic_menu_search);

    return super.onPrepareOptionsMenu(menu);
}

 * Handle options menu click
 * @param item menu item
 * @return
 */
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        // ...
    }
    return OptionsMenu.itemSelected(this, item) || super.onOptionsItemSelected(item);
} 
```

异常不会发生在应用程序代码中，似乎也没有引用应用程序的资源（它们存在，R 被多次删除/重建，项目清除等）

堆栈跟踪：（它似乎引用了一些 xml 资源，但菜单不是基于 xml）

```
04-13 23:45:39.081: E/AndroidRuntime(2933): FATAL EXCEPTION: main
04-13 23:45:39.081: E/AndroidRuntime(2933): android.content.res.Resources$NotFoundException: Resource ID #0x1090044
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.content.res.Resources.getValue(Resources.java:1019)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:2107)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.content.res.Resources.getLayout(Resources.java:858)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.view.menu.BaseMenuPresenter.getMenuView(BaseMenuPresenter.java:70)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.policy.impl.PhoneWindow$PanelFeatureState.getIconMenuView(PhoneWindow.java:3298)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.policy.impl.PhoneWindow.initializePanelContent(PhoneWindow.java:1096)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.policy.impl.PhoneWindow.openPanel(PhoneWindow.java:559)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.policy.impl.PhoneWindow.onKeyUpPanel(PhoneWindow.java:817)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.policy.impl.PhoneWindow.onKeyUp(PhoneWindow.java:1486)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1813)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3300)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3273)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2436)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.os.Looper.loop(Looper.java:137)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at android.app.ActivityThread.main(ActivityThread.java:4340)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at java.lang.reflect.Method.invoke(Method.java:511)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-13 23:45:39.081: E/AndroidRuntime(2933):     at dalvik.system.NativeStart.main(Native Method) 
```

任何的想法？非常感谢您的帮助，这是一个预发布阻止程序..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:07:30.920

终于解决了问题。它在这行代码中非常隐藏（出现在完全不同的位置）：

```
mResources = new Resources(mgr, mMetrics, null); 
```

最后一个参数应该包含配置，但包含 null。似乎一直有效到 Android 3.x

这是包含问题行的旧代码：

```
private static void prepareResources(Context context) {
    if (mMetrics != null)
        return;
    mMetrics = new DisplayMetrics();
    Activity act = (Activity)context;
    act.getWindowManager().getDefaultDisplay().getMetrics(mMetrics);
    AssetManager mgr = context.getAssets();
    mResources = new Resources(mgr, mMetrics, null);
} 
```

这解决了这个问题（注意最后一行）：

```
private static void prepareResources(Context context) {
    if (mMetrics != null)
        return;
    mMetrics = new DisplayMetrics();
    Activity act = (Activity)context;
    act.getWindowManager().getDefaultDisplay().getMetrics(mMetrics);
    AssetManager mgr = context.getAssets();
    mResources = new Resources(mgr, mMetrics, act.getResources().getConfiguration());
} 
```

（代码在我们在项目中使用的UrlImageViewHelper（[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)）类中）

另请参阅[打开选项菜单时崩溃](https://stackoverflow.com/questions/8576484/crash-when-opening-option-menu)

# spring-mvc - 如何使用具有@Autowired 的新对象获取对象？

> ID：10212651
> 
> 赞同：1
> 
> 时间：2012-04-18T15:24:18.330
> 
> 标签：spring-mvc, inversion-of-control

我正在使用 Spring mvc 3.1 框架，并且我有工厂类给出“new Object()”

以及作为@Autowired 的对象，其中返回null。

所有的 bean 都在 servlet-context.xml

O如何执行新的并且仍然使用对象中的@Autowired？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:30:03.257

如果您想将 A 类型的 bean @Autowire 转换为 B 类型的 bean，Spring 必须管理这两个 bean 的生命周期。如果您使用“new()”手动创建 bean A，Spring 现在可以管理该 bean 实例，因此无法自动连接它。

如果 bean A 的实例化比较复杂，可以使用 Spring 工厂 bean 来管理。这里对工厂bean有一个很好的解释：http: [//blog.springsource.org/2011/08/09/whats-a-factorybean/](http://blog.springsource.org/2011/08/09/whats-a-factorybean/)

# objective-c - Objective-C 如何将数组放入数组中

> ID：10212652
> 
> 赞同：0
> 
> 时间：2012-04-18T15:24:23.753
> 
> 标签：objective-c, ios, arrays

我正在制作的 iOS 应用程序中有多个模拟数据库。我需要其中一个能够在已经可变的数组中拥有一个可变数组。基本上，我有所谓的 BlockParties，在这些 BlockParty 对象中，我需要一个卡车列表作为 BlockParty 的属性之一。

我的代码目前看起来像这样用于初始化模拟数据库：

```
 //Initialize the mock database of block parties.
listParty = [[NSArray alloc] initWithObjects:
             [BlockParty blockpartyWithName:@"Westside Food Truck Central" listOfTrucks: nil latitude: [NSNumber numberWithDouble:200.1] longitude: [NSNumber numberWithDouble: 146.5] schedule:@"7/15/12" ],
             [BlockParty blockpartyWithName:@"Venice Food Truck Paradise" listOfTrucks:nil latitude:nil longitude:nil schedule:nil], 
            nil];
selectedBlockParty = nil; 
```

我需要 listOfTrucks 属性作为我可以为每个 BlockParty 拥有多辆卡车的可变数组的地方。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:44:53.847

```
 NSMutableArray *lot = [[ NSMutableArray alloc ] initWithObjects: @"18-Wheeler", @"Dodge-Ram", @"GraveDigger" ];
   NSMutableArray *lot2 = [[ NSMutableArray alloc ] initWithObjects: @"ShagginWagon", @"1984 F250", @"Beer Truck" ];

   listParty = [[NSArray alloc] initWithObjects:
         [BlockParty blockpartyWithName:@"Westside Food Truck Central" listOfTrucks: lot  latitude: [NSNumber numberWithDouble:200.1] longitude: [NSNumber numberWithDouble: 146.5] schedule:@"7/15/12" ],
         [BlockParty blockpartyWithName:@"Venice Food Truck Paradise" listOfTrucks:lot2 latitude:nil longitude:nil schedule:nil], 
        nil]; 
```

# iphone - 如何附加 NSMutableDictionary 的值

> ID：10212654
> 
> 赞同：0
> 
> 时间：2012-04-18T15:24:30.410
> 
> 标签：iphone, objective-c, xcode, ios5, nsmutabledictionary

我有包含多个字典的 NSMUtableDictionary。我正在对这些数据进行 XML 解析。现在何时返回字典数据，它给了我最后一个字典值。这是我的代码：

```
 for(CXMLNode* child in [element children]) {
        id v = [Soap deserialize:child];
        if(v == nil) { 
            v = [NSNull null]; 
        }

        [d setObject:v forKey:[child name]];
    }
    NSLog(@"dData=%@",d);
    return d; 
```

当我返回 d 的值时，它给了我最后一个字典值。请建议我解决这个问题的方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:38:46.120

根据您的描述，[child name] 可能不是唯一的。为什么不 NSLog(@"child name = %@", [child name]); 在设置对象并确保名称是唯一的之前？

此外，您可以在任何地方设置断点和类型：

豆荚

在调试器中列出 d 的内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-18T18:06:06.377

您不能将`NSNull`对象`NSMutableDictionary`作为字典插入。每当您的第一个`NSNull`对象附加到字典 (d) 中时，这将指示您的字典结束。检查进来的孩子是否`CXMLNode`在所有情况下都存在。否则，这是您问题的根本原因。

考虑到数据`CXMLNode`来自互联网，然后首先检查该服务是否正在发送正确的数据。

# c - C：为一个函数参数发送不同的结构

> ID：10212655
> 
> 赞同：4
> 
> 时间：2012-04-18T15:24:34.353
> 
> 标签：c, function, structure, abstract, arguments

我有一个使用 OpenGL 绘制圆的函数，我想向它传递一个包含 x 和 y 坐标以及半径的结构。问题是同一个函数必须与 3 个不同的结构一起使用，它们都包含坐标、半径和绘图函数不使用的其他一些东西。

有没有办法让 3 个不同的结构只有一个参数（一次只发送一个）。

我希望我已经足够精确了。

PS：功能必须是“抽象的”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T15:32:47.600

是的，您可以使用这样的原型：

```
void foo(char type, void *data); 
```

使用类型告诉函数将数据用作哪个结构，你很好。

```
struct c *prepareStructC(void);
//...
struct c *toto = prepareStructC();
foo('c', toto);
//...
void foo(char type, void *data)
{
  int x, y;
  switch (type)
  {
    case 'c':
      x = ((struct c*)data)->x;
      y = ((struct c*)data)->y;
      break;
    //...
  }
  //...
} 
```

第二种选择，如果你想避免一个 switch/case，并且能够在之后添加更多的结构类型，而不用演变 foo，你可以确保你的所有结构都以必要的数据**开头**，总是以相同的顺序，具有相同的类型. 通过这种方式，您可以从 C++ 制作类似“接口”的东西，并使用该类型的抽象版本：

```
struct abstract
{
  int x;
  int y;
  int radius;
}

struct a
{
  struct abstract abs;
  //... other data ...
}
struct b
{
  struct abstract abs;
  //... other data ...
}
struct c
{
  struct abstract abs;
  //... other data ...
}

//Two choices : either you have:
void foo(void *data)
{
  int x,y,r;
  x = ((struct abstract*)data)->x;
  y = ((struct abstract*)data)->y;
  r = ((struct abstract*)data)->radius;
  //...
}

//OR Smarter way:
void foo2(struct abstract *data)
{
  int x,y,r;
  x = data->x;
  y = data->y;
  r = data->radius;
}
//Calling foo2 with:
struct a *sa = prepareStructA();
struct b *sb = prepareStructB();
struct c *sc = prepareStructC();
foo2(sa->abs);
foo2(sb->abs);
foo2(sc->abs); 
```

第二种方法的第二部分让你更灵活，分解子类型中的特定信息，使你可以将`abs`部分放在结构 a/b/c 内的任何位置，并且在结构单一用途的原则上更好（在结构中包含坐标、半径**和**其他东西并不总是最好的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:36:18.057

仅当函数接受 a`void*`作为参数，然后`void*`在取消引用它以访问其中的数据之前将其转换为函数中正确的指针类型。

```
typedef enum
{
    type1, type2, type3
} datatype;

void foo(void* data, datatype type)
{
    switch(type)
    {
        case type1:
        // do something with data by casting it to the proper type
        break;

        // ... other cases here
    }
} 
```

但是，通过这样做，您将 a) 需要传递另一个参数，该参数指示在`void*`传递之前要转换为的原始类型，并且 b) 您正在放弃类型系统，这几乎不是一个好主意，应该始终避免。

如果您采用这种方法，**强烈**建议在内部调用函数（采用 ）之前创建三个采用正确类型的“包装器”函数`void*`。**严格**约定永远不要直接调用函数`void*`；只调用包装器。以这种方式，您仍然可以使用类型系统来帮助解决编译错误。

```
void bar1(someStruct* data)
{
    foo((void*) data, type1);
}
void bar2(someOtherStruct* data)
{
    foo((void*) data, type2);
}
void bar3(yetAnotherStruct* data)
{
    foo((void*) data, type3);
} 
```

# haskell - Curry-Howard 同构

> ID：10212660
> 
> 赞同：60
> 
> 时间：2012-04-18T15:24:49.283
> 
> 标签：haskell, types, logic, curry-howard

我在互联网上搜索过，我找不到任何关于 CHI 的解释，这些解释不会迅速退化为逻辑理论的讲座，这让我大吃一惊。（这些人说的好像“直觉命题演算”是一个对正常人来说实际上*意味着什么的短语！）*

粗略地说，CHI 说类型是定理，程序是这些定理的证明。但这到底是什么*意思*？

到目前为止，我已经弄清楚了：

*   考虑`id :: x -> x`。它的类型是“假设 X 为真，我们可以得出结论 X 为真”。对我来说似乎是一个合理的定理。

*   现在考虑`foo :: x -> y`。正如任何 Haskell 程序员都会告诉你的那样，这是不可能的。你不能写这个函数。（好吧，无论如何不要作弊。）作为一个定理阅读，它说“鉴于任何 X 为真，我们可以得出任何 Y 为真的结论”。这显然是无稽之谈。而且，果然，你不能写这个函数。

*   更一般地，函数的参数可以被认为是“假设为真的这个”，而结果类型可以被认为是“假设所有其他事情都是真的”。如果有一个函数参数，比如说`x -> y`，我们可以将其视为 X 为真意味着 Y 必须为真的假设。

*   例如，`(.) :: (y -> z) -> (x -> y) -> x -> z`可以理解为“假设 Y 蕴涵 Z，X 蕴涵 Y，并且 X 为真，我们可以得出 Z 为真的结论”。这在我看来在逻辑上是明智的。

现在，到底是什么`Int -> Int`意思？o_O

我能想出的唯一明智的答案是：如果你有一个函数 X -> Y -> Z，那么类型签名会说“假设可以构造一个 X 类型的值和另一个 Y 类型的值，那么可以构造一个 Z 类型的值”。函数体准确地描述了你将如何做到这一点。

这似乎有道理，但不是很*有趣*。很明显，它肯定比这更多……

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-18T15:33:28.973

Curry-Howard 同构只是说明类型对应于命题，值对应于证明。

`Int -> Int`作为一个合乎逻辑的命题，这并不意味着很有趣。将某事物解释为逻辑命题时，您只关心该类型是否存在*（*具有任何值）。所以，`Int -> Int`只是意味着“给定一个`Int`，我可以给你一个`Int`”，当然，这是真的。它有许多不同的证明（对应于该类型的各种不同函数），但是当把它作为一个逻辑命题时，你并不在乎。

这并不意味着有趣的命题不能涉及这些功能；只是那个特定的类型很无聊，作为一个命题。

对于不完全多态且具有逻辑意义的函数类型的实例，请考虑`p -> Void`（对于某些*p*），`Void`无人居住的类型在哪里：没有值的类型（除了 ⊥，在 Haskell 中，但我会去后来）。获得类型值的唯一方法`Void`是，如果您可以证明矛盾（当然，这是不可能的），并且由于`Void`意味着您已经证明了矛盾，您可以从中获得任何值（即存在一个函数`absurd :: Void -> a`） . 因此，`p -> Void`对应于 ¬ *p*：它的意思是“ *p*意味着虚假”。

[直觉逻辑](http://en.wikipedia.org/wiki/Intuitionistic_logic)只是普通函数式语言所对应的某种逻辑。重要的是，它是*建设性*的：基本上，证明`a -> b`给你一个*算法*来计算`b`，`a`这在常规经典逻辑中是不正确的（因为[排中律](http://en.wikipedia.org/wiki/Law_of_excluded_middle)，它会告诉你某事是真或假，但不是*为什么*）。

尽管 like 函数不像`Int -> Int`命题那样有意义，但我们可以用其他命题来陈述它们。例如，我们可以声明两种类型的相等类型（使用[GADT](http://en.wikibooks.org/wiki/Haskell/GADT)）：

```
data Equal a b where
    Refl :: Equal a a 
```

如果我们有一个类型的值`Equal a b`，那么`a`就是相同的类型`b`：`Equal a b`对应于命题*a* = *b*。问题是我们只能这样谈论*类型*的相等性。但是如果我们有[依赖类型](http://en.wikipedia.org/wiki/Dependent_type)，我们可以很容易地将这个定义推广到*任何*值上，因此`Equal a b`将对应于*值* *a*和*b*相同的命题。因此，例如，我们可以这样写：

```
type IsBijection (f :: a -> b) (g :: b -> a) =
    forall x. Equal (f (g x)) (g (f x)) 
```

这里，*f*和*g*是常规函数，所以*f*可以很容易地具有 type `Int -> Int`。同样，Haskell 不能这样做。你需要依赖类型来做这样的事情。

典型的函数式语言并不是很适合编写证明，不仅因为它们缺少依赖类型，还因为 ⊥ 具有`a`所有类型`a`，可以作为任何命题的证明。但是像[Coq](http://en.wikipedia.org/wiki/Coq)和[Agda这样的](http://en.wikipedia.org/wiki/Agda_(programming_language))[全部](http://en.wikipedia.org/wiki/Total_functional_programming)语言都利用对应关系来充当*证明系统*以及依赖类型的编程语言。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:47:29.793

> 我能想出的唯一明智的答案是：如果你有一个函数 X -> Y -> Z，那么类型签名会说“假设可以构造一个 X 类型的值和另一个 Y 类型的值，那么可以构造一个 Z 类型的值”。函数体准确地描述了你将如何做到这一点。这似乎是有道理的，但它不是很有趣。很明显，它肯定比这更多……

嗯，是的，还有很多，因为它有很多含义并提出了很多问题。

首先，您对 CHI 的讨论完全是根据隐含/功能类型 ( `->`)。您没有谈论这个，但您可能已经看到合取和析取分别对应于乘积和求和类型。但是其他逻辑运算符，如否定、全称量化和存在量化呢？我们如何将涉及这些的逻辑证明转化为程序？原来大致是这样的：

*   否定对应于*一流的延续*。不要让我解释这个。
*   对命题（而非个体）变量的普遍量化对应于*参数多态性*。因此，例如，多态函数`id`确实具有类型`forall a. a -> a`
*   命题变量的存在量化对应于一些与数据或实现隐藏有关的事情：*抽象数据类型*、*模块系统* 和*动态调度*。GHC 的存在类型与此有关。
*   对单个变量的普遍和存在量化导致*依赖类型系统*。

除此之外，这还意味着各种关于逻辑的证明会立即转化为关于编程语言的证明。例如，直觉命题逻辑的可判定性意味着在简单类型的 lambda 演算中终止所有程序。

> 现在，Int -> Int 到底是什么意思？o_O

它是一种类型，或者是一个命题。在`f :: Int -> Int`中，`(+1)`将“程序”命名为“程序”（在特定意义上，将函数和常量都称为“程序”，或者作为证明。语言的语义必须提供`f`作为推理的原始规则，或者证明证明`f`如何可以从这样的规则和前提构建。

这些规则通常根据定义类型的基本成员的等式公理和允许您证明其他程序包含该类型的规则来指定。例如，从`Int`to `Nat`（从 0 向前的自然数）切换，我们可以有以下规则：

*   公理：（`0 :: Nat`是`0`的原始证明`Nat`）
*   规则：`x :: Nat ==> Succ x :: Nat`
*   规则：`x :: Nat, y :: Nat ==> x + y :: Nat`
*   规则：`x + Zero :: Nat ==> x :: Nat`
*   规则：`Succ x + y ==> Succ (x + y)`

这些规则足以证明许多关于自然数加法的定理。这些证明也将是程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:08:51.090

也许理解其含义的最好方法*是*开始（或尝试）*使用*类型作为命题和程序作为证明。最好学习一种具有依赖类型的语言，例如[Agda](http://wiki.portal.chalmers.se/agda/pmwiki.php)（它是用 Haskell 编写的，类似于 Haskell）。有各种关于该语言的[文章和课程。](http://wiki.portal.chalmers.se/agda/pmwiki.php?n=Main.Documentation)[Learn you an Agda](https://github.com/liamoc/learn-you-an-agda/blob/master/pages/proofs.md)是不完整的，但它试图简化事情，就像 LYAHFGG 书一样。

下面是一个简单证明的例子：

```
{-# OPTIONS --without-K #-} -- we are consistent

module Equality where

-- Peano arithmetic.
-- 
--   ℕ-formation:     ℕ is set.
-- 
--   ℕ-introduction:  o ∈ ℕ,
--                    a ∈ ℕ | (1 + a) ∈ ℕ.
-- 
data ℕ : Set where
  o : ℕ
  1+ : ℕ → ℕ

-- Axiom for _+_.
-- 
--   Form of ℕ-elimination.
-- 
infixl 6 _+_
_+_ : ℕ → ℕ → ℕ
o + m = m
1+ n + m = 1+ (n + m)

-- The identity type for ℕ.
-- 
infix 4 _≡_
data _≡_ (m : ℕ) : ℕ → Set where
  refl : m ≡ m

-- Usefull property.
-- 
cong : {m n : ℕ} → m ≡ n → 1+ m ≡ 1+ n
cong refl = refl

-- Proof _of_ mathematical induction:
-- 
--   P 0, ∀ x. P x → P (1 + x) | ∀ x. P x.
-- 
ind : (P : ℕ → Set) → P o → (∀ n → P n → P (1+ n)) → ∀ n → P n
ind P P₀ _ o = P₀
ind P P₀ next (1+ n) = next n (ind P P₀ next n)

-- Associativity of addition using mathematical induction.
-- 
+-associative : (m n p : ℕ) → (m + n) + p ≡ m + (n + p)
+-associative m n p = ind P P₀ is m
  where
    P : ℕ → Set
    P i = (i + n) + p ≡ i + (n + p)
    P₀ : P o
    P₀ = refl
    is : ∀ i → P i → P (1+ i)
    is i Pi = cong Pi

-- Associativity of addition using (dependent) pattern matching.
-- 
+-associative′ : (m n p : ℕ) → (m + n) + p ≡ m + (n + p)
+-associative′ o _ _ = refl
+-associative′ (1+ m) n p = cong (+-associative′ m n p) 
```

在那里，您可以将`(m + n) + p ≡ m + (n + p)`命题视为类型，将其证明视为功能。此类证明有更先进的技术（例如，[前序推理](http://www.iis.sinica.edu.tw/~scm/pub/aopa.pdf)，Agda 中的组合器就像 Coq 中的策略）。

还有什么可以证明的：

*   `head ∘ init ≡ head`对于向量，[在这里](https://stackoverflow.com/questions/3451028/showing-head-init-head-in-agda)。

*   您的编译器生成一个程序，该程序的执行给出的值与解释相同（主机）程序（[此处](http://adam.chlipala.net/cpdt/)为 Coq）中获得的值相同。[这本书](http://www.cis.upenn.edu/~bcpierce/sf/)也是关于语言建模和程序验证主题的好读物。

*   任何其他可以在建设性数学中证明的东西，因为 Martin-Löf 的类型论在其表达能力上等同于 ZFC。事实上，Curry-Howard 同构可以扩展到[物理和拓扑](http://golem.ph.utexas.edu/category/2008/03/physics_topology_logic_and_com.html)以及[代数拓扑](http://homotopytypetheory.org/)。*

# java - 需要帮助 apache poi 使 用 XSSF 读取 xls

> ID：10212661
> 
> 赞同：5
> 
> 时间：2012-04-18T15:24:50.783
> 
> 标签：java, apache-poi

我需要帮助使用 apache XSSF 读取 xls 文件。

XSSF 的实现对于“xlsx”运行良好。不适用于“xls”文件。

这是代码：

```
 XSSFWorkbook workBook = new XSSFWorkbook("fileName");
    XSSFSheet sheet = workBook.getSheetAt(0);
    XSSFRow row = sheet.getRow(0); 
```

任何解决方法表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T08:42:55.373

与其直接使用 XSSF 类，不如使用 HSSF (.xls) 和 XSSF (.xlsx) 之间通用的接口。您问题中的代码片段将变为：

```
 Workbook wb = WorkbookFactory.create(file); // Or InputStream
 Sheet sheet = workBook.getSheetAt(0);
 Row row = sheet.getRow(0);
 Cell cell = row.getCell(0);
 System.out.println("Cell A1 is of type " + cell.getCellType()); 
```

有关更多信息和示例，请参阅[Apache POI 快速指南](http://poi.apache.org/spreadsheet/how-to.html#user_api)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T16:09:45.490

尝试这个...

```
FileInputStream is = new FileInputStream(filePath))
XSSFWorkbook workbook = new XSSFWorkbook(is);
is.close(); 
```

下面的这个链接似乎可以解决这个问题......祝你好运。

[http://apache-poi.1045710.n5.nabble.com/InvalidOperationException-Can-t-open-specified-file-td5524067.html](http://apache-poi.1045710.n5.nabble.com/InvalidOperationException-Can-t-open-specified-file-td5524067.html)

# c# - TextRange GetPositionAtOffset 未按预期运行

> ID：10212662
> 
> 赞同：3
> 
> 时间：2012-04-18T15:24:51.217
> 
> 标签：c#, wpf, richtextbox

我正在尝试使用 WPF RichTextEditor 实现基本语法高亮。为此，我想以不同的颜色显示 {} gropus。

这是应该将 RichTextBox 的内容分成不同组的代码：

```
 List<Tag> SplitIntoParts(TextRange textRange, int level)
    {
        if (textRange==null||textRange.IsEmpty)
        {
            return new List<Tag>();
        }
        string text = textRange.Text;
        if (text.Length==0)
        {
            return new List<Tag>();
        }
        int startPos=-1, counter = 0;
        List<Tag> result=new List<Tag>();
        for (int i = 0; i < text.Length; i++)
        {
            if (text[i]=='{')
            {
                if (counter==0)
                {
                    startPos = i;
                }
                counter++;
            }
            if (text[i]=='}')
            {
                if (counter==1)
                {
                    Tag t = new Tag()
                                {
                                    StartPosition = textRange.Start.GetPositionAtOffset(startPos), 
                                    EndPosition = textRange.Start.GetPositionAtOffset(i+1), 
                                    Level = level,
                                    Word = text.Substring(startPos,i+1-startPos)
                                };
                    result.Add(t);
                    var tr=new TextRange(textRange.Start.GetPositionAtOffset(startPos + 1), textRange.Start.GetPositionAtOffset(i));
                    result.AddRange(SplitIntoParts(tr, level + 1));
                }
                counter--;
            }
        }
        if (counter>0)//some open branches still left
        {
            var i = text.Length;
            Tag t = new Tag()
            {
                StartPosition = textRange.Start.GetPositionAtOffset(startPos),
                EndPosition = textRange.End,
                Level = level,
                Word = text.Substring(startPos, i - startPos)
            };
            result.Add(t);
            result.AddRange(SplitIntoParts(new TextRange(textRange.Start.GetPositionAtOffset(startPos + 1), textRange.Start.GetPositionAtOffset(i - 1)), level + 1));
        }

        return result;
    } 
```

在这段代码中，我发现 textRange.Start.GetPositionAtOffset(startPos + 1) 的行为很奇怪：

假设，代码找到了以下组：

```
{test|try} 
```

并使用以下代码选择它：

```
var t=new Tag()
                                {
                                    StartPosition = textRange.Start.GetPositionAtOffset(startPos), 
                                    EndPosition = textRange.Start.GetPositionAtOffset(i+1), 
                                    Level = level,
                                    Word = text.Substring(startPos,i+1-startPos)
                                }; 
```

(egtWord=='{test|try}')

当我尝试通过传递递归地做同样的事情时

```
var tr=new TextRange(textRange.Start.GetPositionAtOffset(startPos + 1), textRange.Start.GetPositionAtOffset(i));
result.AddRange(SplitIntoParts(tr, level + 1)); 
```

而不是“test|try”，tr.Text =="{test"

为什么我会出现这种行为，我应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-20T22:26:18.513

`GetPositionAtOffset`不只计算（可见）字符。幸运的是，我最近遇到了同样的问题，所以我做了一个方法来获取`TextPointer`指定偏移量（仅计算可见字符的偏移量）。首先，它可能看起来有点复杂，但实际上并非如此:-)。

作为参数，它需要内联（从富文本框中，例如`RichTextBox.Document.Blocks.FirstBlock.Inlines`，这分别仅获取 rtb 中第一段的内联，如果有的话......）；第二个参数是偏移量本身。

建议给出第三个参数，`TextPointer`表示内容的开始。如果指定了 inlines，则从第一个 inline 开始确定开始位置，但如果没有 inline，则会引发异常，为避免这种情况，请将 content start 参数设置为`RichTextBox.Document.ContentStart`。方法如下：

```
 /// <summary>
    /// Returns the position of the specified offset in the text specified by the inlines.
    /// </summary>
    /// <param name="inlines">The inlines which specifies the text.</param>
    /// <param name="offset">The offset within the text to get the position of.</param>
    /// <param name="contentStartPosition">The position where the content starts. If null, the position before the start of the first inline will be used. If null and there are no inlines, an exception is thrown.</param>
    /// <returns>A <see cref="TextPointer"/> indicating the position of the specified offset.</returns>
    public static TextPointer GetPositionAtOffset(this InlineCollection inlines, int offset, TextPointer contentStartPosition = null)
    {
        if (inlines == null)
            throw new ArgumentNullException(nameof(inlines));
        if (!inlines.Any() && contentStartPosition == null)//if no inlines, can't determine start of content
            throw new ArgumentException("A content start position has to be specified if the inlines collection is empty.", nameof(contentStartPosition));

        if (contentStartPosition == null)
            contentStartPosition = inlines.First().ContentStart.DocumentStart;//if no content start specified, gets it
        int offsetWithInlineBorders = 0;//collects the value of offset (with inline borders)
        foreach (var inline in inlines)
        {
            int inlineLength = (inline as Run)?.Text.Length ?? (inline is LineBreak ? 1 : 0);//gets the length of the inline (length of a Run is the lengts of its text, length of a LineBreak is 1, other types are ignored)

            if (inlineLength < offset)//if position specified by the offset is beyond this inline...
                offsetWithInlineBorders += inlineLength + 2;//...then the whole length is added with the two borders
            else if (inlineLength == offset)//if position specified by the offset is at the end of this inline...
                offsetWithInlineBorders += inlineLength + 1;//...then the whole length is added with only the opening border
            else //inlineLength > value, if the position specified by the offset is within this inline
            {
                offsetWithInlineBorders += offset + 1;//...then adds the remaining length (the offset itself), plus the opening border
                break;//the inlines beyond are not needed
            }
            offset -= inlineLength;//substracts the added inline length
        }

        return contentStartPosition.GetPositionAtOffset(
            Math.Min(Math.Max(offsetWithInlineBorders, 0), contentStartPosition.GetOffsetToPosition(contentStartPosition.DocumentEnd)));//if the value is not within the boundaries of the text, returns the start or the end of the text
    } 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:12:52.877

`GetPositionAtOffset`计数符号，可能超过文本插入位置。见[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.documents.textpointer.getpositionatoffset.aspx)：

> 将一个 TextPointer 返回到由当前 TextPointer 开头的指定偏移量（以符号表示）的位置。

# xml - 一个 XSLT / 两个 XML 作为源

> ID：10212663
> 
> 赞同：-1
> 
> 时间：2012-04-18T15:24:52.937
> 
> 标签：xml, xslt

第一个 XML

```
<?xml version="1.0"?>
<response>
<status>
<code>0</code>
</status>
<newsList>
<news>

<id>1</id>
<title>some</title>
<date>30.11.2011T00:00.00</date>
<shortText>some short text</shortText>
<important>LOW</important>

</news> 
```

第二个 XML

```
<?xml version="1.0"?>
<response>
<status>
<code>0</code>
</status>
<newsList>
<news>

<id>1</id>
<text>
Some text here
</text>
</news> 
```

我正在浏览器中转换 XSLT。

结果应该是第一个 XML 中的标题日期和短文本以及第二个 XML 中的文本不正确。

任何线索我如何在 XSLT 中做到这一点。我正在考虑使用该文档。

到目前为止，我在 XSLT 之下。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
<h2>News list</h2>
<table border="1">

<xsl:for-each select="newsList/news">
<tr>
  <td><xsl:value-of select="title" /></td>
  <td><xsl:value-of select="shortText" /></td>
   <td><xsl:value-of select="date" /></td>
</tr>
</xsl:for-each>
</table>
</xsl:template>

</xsl:stylesheet> 
```

最后是我用来在浏览器中以 HTML 格式加载转换 XSLT 的脚本。

```
 <script>
    // the loadXMLDoc function loads the XML and XSL files.
    //It checks what kind of browser the user has and loads the file.

    function loadXMLDoc(dname)
    {
    if (window.XMLHttpRequest)
      {
      xhttp=new XMLHttpRequest();
      }
    else
      {
      xhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xhttp.open("GET",dname,false);
    xhttp.send(null);
    xhttp.open
    return xhttp.responseXML;
    }

    //The displayResult() function is used to display the XML file styled by the XSL file.

    function displayNewsOverview(xm_l,xs_l)
    {
    // Load XML and XSL file
    xml=loadXMLDoc(xm_l +".xml");
    xsl=loadXMLDoc(xs_l +".xsl");
    //Test what kind of browser the user has
    // If the user has a browser supporting the ActiveX object (IE)
    if (window.ActiveXObject)
      {
    // Use the transformNode() method to apply the XSL style sheet to the xml document
    // Set the body of the current document (id="news-overview") to contain the styled  xml document

      ex=xml.transformNode(xsl);
      document.getElementById("news-overview").innerHTML=ex;
      }
    // If the user has a browser that does not support the ActiveX object
    else if (document.implementation && document.implementation.createDocument)
      {
    // Create a new XSLTProcessor object and import the XSL file to it
      xsltProcessor=new XSLTProcessor();
      xsltProcessor.importStylesheet(xsl);

    // Use the transformToFragment() method to apply the XSL style sheet to the xml document
      resultDocument = xsltProcessor.transformToFragment(xml,document);

    // Set the body of the current document (id="example") to contain the styled xml document
        document.getElementById("news-overview").appendChild(resultDocument);
      }
    }

    function displayNewsDetails(xm_l,xs_l)
    {
    document.getElementById("news-overview").innerHTML="";

    // Load XML and XSL file
    xml=loadXMLDoc(xm_l +".xml");
    xsl=loadXMLDoc(xs_l +".xsl");

    //Test what kind of browser the user has
    // If the user has a browser supporting the ActiveX object (IE)
    if (window.ActiveXObject)
      {
    // Use the transformNode() method to apply the XSL style sheet to the xml document
    // Set the body of the current document (id="news-overview") to contain the styled xml document

      ex=xml.transformNode(xsl);
      document.getElementById("news-overview").innerHTML=ex;
      }
    // If the user has a browser that does not support the ActiveX object
    else if (document.implementation && document.implementation.createDocument)
      {
    // Create a new XSLTProcessor object and import the XSL file to it
      xsltProcessor=new XSLTProcessor();
      xsltProcessor.importStylesheet(xsl);

    // Use the transformToFragment() method to apply the XSL style sheet to the xml document
      resultDocument = xsltProcessor.transformToFragment(xml,document);

    // Set the body of the current document (id="example") to contain the styled xml document
        document.getElementById("news-overview").appendChild(resultDocument);
      }
    }
    </script>
    </head>

 onLoad="displayNewsOverview('news-overview', 'news-overview')"> 
```

任何帮助都会非常感激。是为了一份工作。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:44:55.303

您可以在 xslt 中使用 document() 函数 - [http://www.w3schools.com/xsl/func_document.asp](http://www.w3schools.com/xsl/func_document.asp)。您可以尝试添加`< ?xml-stylesheet href="nameofxslt" type= "text/xsl" >`到您的其中一个 xml 并使用文档功能访问其他的 xml 内容。通过添加 xml 指令 ( `<?xml-stylesheet`)，您将不需要在 javascript 中应用转换。

# c# - 在标签中显示用户名

> ID：10212665
> 
> 赞同：-2
> 
> 时间：2012-04-18T15:24:57.170
> 
> 标签：c#, asp.net, sql-server-2008-r2

我正在使用 asp.net、c# 构建一个小型网站，并连接到数据库并尝试在标签中显示用户名。我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:27:34.607

这将为您获取当前经过身份验证的用户的用户名。我认为你应该弄清楚如何在标签中获得它......

```
System.Web.HttpContext.Current.User.Identity.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:28:34.767

这将取决于您的用户如何进行身份验证，但从 System.Web.HttpContext.Current.User 开始。

# php - Soap 请求每 X 次失败一次

> ID：10212672
> 
> 赞同：0
> 
> 时间：2012-04-18T15:25:09.483
> 
> 标签：php, soap

我用肥皂与联邦快递交谈。但是，在我的日志中，有时我会得到它不会引发错误的地方。但是废话，然后有时我会看到以下内容。有任何想法吗？

SoapClient::__doRequest(): php_network_getaddresses: getaddrinfo 失败：名称或服务未知

更新：

原来是我的解析器在服务器上很糟糕。我把它们改成了。

/etc/resolv.conf

```
nameserver 8.8.8.8
nameserver 8.8.4.4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:41:57.237

听起来像是网络连接的事情。

您的服务器无法连接到 FedEx

# c++ - 输出开头的额外行

> ID：10212674
> 
> 赞同：2
> 
> 时间：2012-04-18T15:25:13.590
> 
> 标签：c++, io, deque

我应该编写一个类似于 Unix`tail`函数的小程序，我`std::deque`用来存储`std::getline`从提供的文件中读取的行。向前推，从后面弹出。

我的问题是，当我尝试打印比文件中更多的行时，它会在输出开头输出 1 个额外的空白行。这是源代码，其中存储了请求`TParams`的行数，以及其他一些目前不重要的东西......`struct``int lncount`

```
using namespace std;

deque<string> dq;
int counter = 0;

for(string line; ! (*infile).eof(); getline(*infile, line)){
    dq.push_front(line);

    // not needed lines dropped immediately
    if(counter++ >= TParams.lncount)
        dq.pop_back();
}

int iter = (TParams.lncount > dq.size()) ?
           (dq.size() - 1) : (TParams.lncount - 1);

assert(iter < dq.size());

for(iter; iter >= 0; iter--)
    cout << dq[iter] << endl; 
```

还有一些关于`-n +num`参数的代码，但它是内部条件，不影响这种情况。

我发现，实际上存储了零长度的字符串，`dq.back()`但我完全不知道它来自哪里，因为它应该是从文件开头读取的字符串，但是有正常的文本行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T15:32:10.470

您的读取循环是错误的。首先，该值`(*infile).eof()`并未真正指定；如果你有一个空文件，它仍然可以返回 `false`. 其次，在进入循环开始之前，您没有阅读一行。编写这样的循环的经典方法是：

```
std::string line;
while ( std::getline( *infile, line ) ) {
    //  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:30:25.807

在从流中读取*之前*检查`eof`（这可能是错误的检查） 。因此，final 将读取一个空白，然后在流中设置 EOF，但是为时已晚，因为您已经在.*`deque`*

# c# - 使用 LINQ 在运行时从数据库中获取数据

> ID：10212675
> 
> 赞同：2
> 
> 时间：2012-04-18T15:25:23.863
> 
> 标签：c#, linq

我希望能够编写和更新我的数据库，将对象发送到我的服务，然后让服务动态决定将哪种对象写入或更新到数据库。

这就是我在静态执行时所做的（更新示例）

```
switch ((string)property.GetValue(oLinq, null))
                {
                    case "news":
                        t_news oNews = (t_news)oLinq;                            
                        List<t_news> newsList = (from n in oDB.t_news where n.ID.Equals(oNews.ID) select n).ToList();
                        t_news oNe = newsList[0];
                        i = 0;
                        foreach (System.Reflection.PropertyInfo p in oNews.GetType().GetProperties().ToList())
                        {
                            if (p.GetValue(oNews, null) != null)
                            {
                                typeof(t_news).GetProperties().ToList()[i].SetValue(oNe, p.GetValue(oNews, null), null);
                            }
                            i++;
                        }
                        oNe.dLastUpdate = DateTime.Now;
                        oDB.SubmitChanges();
                        oLinq = (object)oNews;
                        break;
return oLinq; 
```

oDB 是我的数据上下文。oLinq 只是一个包含我要更新的数据的对象。它包含一个字段，我在其中指定需要更新哪种表。我使用 switch case 来确定指定该表。我现在有 4 种不同的情况，我的做法几乎相同。

但我希望能够动态地执行此操作，因此我不必重写所有这些代码 4 次，并且能够在将来添加新表。

这就是我正在尝试的：

```
List<string> alsTableNames = (from tables in oDB.Mapping.GetTables() select tables.TableName).ToList();
                foreach (string sTableName in alsTableNames)
                {
                    if (String.Compare(sTableName.Substring(6), (string)property.GetValue(oLinq, null)) == 0)
                    {
                        string sBasicType = sTableName.Replace("dbo.", "");
                        string sType = "RegisterService." + sBasicType;
                        Type tType = Type.GetType(sType);
                        oLinq = Convert.ChangeType(oLinq, tType); 
```

这可以将 oLinq 对象转换为我想要的类型。但是行不通的是将数据从数据库中取出以用新数据替换它。我基本上需要一种以动态方式执行此操作的方法：

```
List<t_news> newsList = (from n in oDB.t_news where n.ID.Equals(oNews.ID) select n).ToList();
                        t_news oNe = newsList[0]; 
```

就像是：

```
List<//type of the table I want> list = (from t in //table where t.//firstproperty.Equals(oLinq.getType().getProperties().toList()[0]) select t.ToList();
                        object oNewObj = list[0]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:18:08.323

您是否考虑过使用[Dynamic LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)？

使用它你可以做类似这样的事情：

```
// Use reflection to figure out what type of entity you need to update
var tYourEntityType = /* your code to get the type of the object you will be working with */;

// Get the entity you need to update querying based on a dynamic where clause
string propetyNameToSeach = "firstproperty"; // set this dynamically to the name of the property
string propertyValueToCompare = "5"; // set this dynamically to the value you want to compare to
var entityToUpdate = youDataContext.GetTable<tYourEntityType>().Where(propetyNameToSeach + " = " + propertyValueToCompare).FirstOrDefault(); 
```

# ios - 在 iOS 5.1 应用程序中；为什么我看不到异常？

> ID：10212677
> 
> 赞同：0
> 
> 时间：2012-04-18T15:25:30.347
> 
> 标签：ios, xcode4

我正在尝试将控制权从一个 TableViewController 传递给另一个 TableViewController，将其称为“A”，将其称为“B”。即使我启用了“所有异常”，我仍然在第 20 行中捕获： retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate NB 在第 20 行的最右边是“线程 1：断点1.3" 物有所值。

谁能指出我的方向，以帮助我了解导致程序停止的原因？

```
//
//  main.m
//  some function
//
//  Created by JJW on 3/23/12.
//  Copyright (c) 2012 JJW, LLC. All rights reserved.
//

#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        //return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
        int retVal = -1;
        @try 
        {
            retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
        }
        @catch (NSException* exception) 
        {
            NSLog(@"Uncaught exception: %@", exception.description);
            NSLog(@"Stack trace: %@", [exception callStackSymbols]);
        }
        return retVal;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:29:54.003

从项目导航器中选择断点选项卡。然后按底部的“+”添加断点。选择添加异常断点。确保检查异常断点，所有异常，抛出中断。

现在，当您运行您的应用程序时，一旦抛出异常，它将停止在原地。这将让你看到你正在打破的那条线。

**更新** 您可以尝试摆脱 try/catch 语句。我从来没有见过像这样在应用程序主中使用过的。

```
int main(int argc, char *argv[]) {

    @autoreleasepool {
        int retVal = UIApplicationMain(argc, argv, nil, nil);
        return retVal;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:31:09.853

我花了一天时间重新创建整个项目。新的白蚁例外，带有解释性消息。所以我猜这个旧应用程序完全搞砸了。

# javascript - 使用 CSS 变换缩放的 jQuery 拖动/调整大小

> ID：10212683
> 
> 赞同：50
> 
> 时间：2012-04-18T15:25:45.370
> 
> 标签：javascript, jquery, css, jquery-ui, css-transforms

我正在应用 CSS 转换（以及特定于浏览器的 -webkit、-o 等）：

变换：矩阵（0.5，0，0，0.5，0，0）；

到一个 div，然后在所述 div 的子级上使用 jQuery 的 draggable() 和 resizable() 插件。

我遇到的问题是，当拖动或调整子元素的大小时，jQuery 所做的更改与鼠标“同步”的因子等于所应用的比例。

我在 stackoverflow 上找到了一个解决方案（尽管我愚蠢地没有为它添加书签，现在找不到它......）建议修补插件，并且效果很好。它遵循以下路线：

```
function monkeyPatch_mouseStart() {
  // don't really need this, but in case I did, I could store it and chain
  // var oldFn = $.ui.draggable.prototype._mouseStart ;
  $.ui.draggable.prototype._mouseStart = function(event) {

    var o = this.options;

    //Create and append the visible helper
    this.helper = this._createHelper(event);

    //Cache the helper size
    this._cacheHelperProportions();

    //If ddmanager is used for droppables, set the global draggable
    if($.ui.ddmanager)
      $.ui.ddmanager.current = this;

    /*
     * - Position generation -
     * This block generates everything position related - it's the core of draggables.
     */

    //Cache the margins of the original element
    this._cacheMargins();

    //Store the helper's css position
    this.cssPosition = this.helper.css("position");
    this.scrollParent = this.helper.scrollParent();

    //The element's absolute position on the page minus margins

    //PATCH CODE
    this.offset = this.positionAbs = getViewOffset(this.element[0]);
    //END

    this.offset = {
      top: this.offset.top - this.margins.top,
      left: this.offset.left - this.margins.left
    };

    $.extend(this.offset, {
      click: { //Where the click happened, relative to the element
        left: event.pageX - this.offset.left,
        top: event.pageY - this.offset.top
      },
      parent: this._getParentOffset(),
      relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
    });

    //Generate the original position
    this.originalPosition = this.position = this._generatePosition(event);
    this.originalPageX = event.pageX;
    this.originalPageY = event.pageY;

    //Adjust the mouse offset relative to the helper if 'cursorAt' is supplied
    if(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt)){
    }

    //Set a containment if given in the options
    if(o.containment)
      this._setContainment();

    //Trigger event + callbacks
    if(this._trigger("start", event) === false) {
      this._clear();
      return false;
    }

    //Recache the helper size
    this._cacheHelperProportions();

    //Prepare the droppable offsets
    if ($.ui.ddmanager && !o.dropBehaviour)
      $.ui.ddmanager.prepareOffsets(this, event);

    this.helper.addClass("ui-draggable-dragging");
    this._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position

    //If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)
    if ( $.ui.ddmanager && $.ui.ddmanager.dragStart) $.ui.ddmanager.dragStart(this, event);

    return true;
  }
 }

function getViewOffset(node) {
  var x = 0, y = 0, win = node.ownerDocument.defaultView || window;
  if (node) addOffset(node);
  return { left: x, top: y };

  function getStyle(node) {
    return node.currentStyle || // IE
           win.getComputedStyle(node, '');
  }

  function addOffset(node) {
    var p = node.offsetParent, style, X, Y;
    x += parseInt(node.offsetLeft, 10) || 0;
    y += parseInt(node.offsetTop, 10) || 0;

    if (p) {
      x -= parseInt(p.scrollLeft, 10) || 0;
      y -= parseInt(p.scrollTop, 10) || 0;

      if (p.nodeType == 1) {
        var parentStyle = getStyle(p)
          , localName   = p.localName
          , parent      = node.parentNode;
        if (parentStyle.position != 'static') {
          x += parseInt(parentStyle.borderLeftWidth, 10) || 0;
          y += parseInt(parentStyle.borderTopWidth, 10) || 0;

          if (localName == 'TABLE') {
            x += parseInt(parentStyle.paddingLeft, 10) || 0;
            y += parseInt(parentStyle.paddingTop, 10) || 0;
          }
          else if (localName == 'BODY') {
            style = getStyle(node);
            x += parseInt(style.marginLeft, 10) || 0;
            y += parseInt(style.marginTop, 10) || 0;
          }
        }
        else if (localName == 'BODY') {
          x += parseInt(parentStyle.borderLeftWidth, 10) || 0;
          y += parseInt(parentStyle.borderTopWidth, 10) || 0;
        }

        while (p != parent) {
          x -= parseInt(parent.scrollLeft, 10) || 0;
          y -= parseInt(parent.scrollTop, 10) || 0;
          parent = parent.parentNode;
        }
        addOffset(p);
      }
    }
    else {
      if (node.localName == 'BODY') {
        style = getStyle(node);
        x += parseInt(style.borderLeftWidth, 10) || 0;
        y += parseInt(style.borderTopWidth, 10) || 0;

        var htmlStyle = getStyle(node.parentNode);
        x -= parseInt(htmlStyle.paddingLeft, 10) || 0;
        y -= parseInt(htmlStyle.paddingTop, 10) || 0;
      }

      if ((X = node.scrollLeft)) x += parseInt(X, 10) || 0;
      if ((Y = node.scrollTop))  y += parseInt(Y, 10) || 0;
    }
  }
}
var isNumber = function(value) {
  return !isNaN(parseInt(value, 10));
}; 
```

我进行了自己的更改，例如（您可以在 6-7 行上看到运动乘以“比例因子”）：

```
 $.ui.draggable.prototype._generatePosition = function(event) {
    var o = this.options, scroll = this.cssPosition == 'absolute' && !(this.scrollParent[0] != document && $.ui.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);
    var pageX = event.pageX;
    var pageY = event.pageY;
    //PATCH CODE
    if($(this.element[0]).hasClass('item')){
        pageY = this.originalPageY + ((pageY - this.originalPageY)*(1/$.viewbox.foreground.scale));
        pageX = this.originalPageX + ((pageX - this.originalPageX)*(1/$.viewbox.foreground.scale));
    }
    //END
    /*
     * - Position constraining -
     * Constrain the position to a mix of grid, containment.
     */

    if(this.originalPosition) { //If we are not dragging yet, we won't check for options

      if(this.containment) {
        if(event.pageX - this.offset.click.left < this.containment[0]) pageX = this.containment[0] + this.offset.click.left;
        if(event.pageY - this.offset.click.top < this.containment[1]) pageY = this.containment[1] + this.offset.click.top;
        if(event.pageX - this.offset.click.left > this.containment[2]) pageX = this.containment[2] + this.offset.click.left;
        if(event.pageY - this.offset.click.top > this.containment[3]) pageY = this.containment[3] + this.offset.click.top;
      }

      if(o.grid) {
        var top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
        pageY = this.containment ? (!(top - this.offset.click.top < this.containment[1] || top - this.offset.click.top > this.containment[3]) ? top : (!(top - this.offset.click.top < this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

        var left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
        pageX = this.containment ? (!(left - this.offset.click.left < this.containment[0] || left - this.offset.click.left > this.containment[2]) ? left : (!(left - this.offset.click.left < this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
      }
    }
    return {
      top: (
        pageY                               // The absolute mouse position
        - this.offset.click.top                         // Click offset (relative to the element)
        - this.offset.relative.top                        // Only for relative positioned nodes: Relative offset from element to offset parent
        - this.offset.parent.top                        // The offsetParent's offset without borders (offset + border)
        + ($.browser.safari && $.browser.version < 526 && this.cssPosition == 'fixed' ? 0 : ( this.cssPosition == 'fixed' ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
      ),
      left: (
        pageX                               // The absolute mouse position
        - this.offset.click.left                        // Click offset (relative to the element)
        - this.offset.relative.left                       // Only for relative positioned nodes: Relative offset from element to offset parent
        - this.offset.parent.left                       // The offsetParent's offset without borders (offset + border)
        + ($.browser.safari && $.browser.version < 526 && this.cssPosition == 'fixed' ? 0 : ( this.cssPosition == 'fixed' ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
      )
    };

  } 
```

非常感谢提出这个建议的人。

所以，我的问题！有没有人遇到过一种在不需要修补 jQuery 的缩放元素中拥有可拖动/可调整大小事件的好方法？我用谷歌搜索过，这是我能找到的最好的解决方案。有谁知道可能在这些条件下使用 CSS 转换的 jquery 替代方案？

非常感谢您的任何回复。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-15T08:23:35.913

自从问这个问题以来已经有一段时间了。我找到了（实际上创建了）一个答案。它所需要的只是设置回调处理程序。无需编辑 jquery-ui！

注意：本例中的 zoomScale 是一个全局变量，使用 animate 设置转换（由[jquery.transform.js](http://louisremi.github.com/jquery.transform.js/index.html)辅助），如下所示：

```
target.animate({
    transform: 'scale(' + zoomScale + ')'
}); 
```

看看这个：

**transform scale() 修复可调整大小：**

```
$(this).resizable({
    minWidth: -(contentElem.width()) * 10,  // these need to be large and negative
    minHeight: -(contentElem.height()) * 10, // so we can shrink our resizable while scaled
    resize: function(event, ui) {

        var changeWidth = ui.size.width - ui.originalSize.width; // find change in width
        var newWidth = ui.originalSize.width + changeWidth / zoomScale; // adjust new width by our zoomScale

        var changeHeight = ui.size.height - ui.originalSize.height; // find change in height
        var newHeight = ui.originalSize.height + changeHeight / zoomScale; // adjust new height by our zoomScale

        ui.size.width = newWidth;
        ui.size.height = newHeight;

    }
}); 
```

**可拖动的变换比例（）修复：**

```
$(this).draggable({
    handle: '.drag-handle',
    start: function(event, ui) {
        ui.position.left = 0;
        ui.position.top = 0;
    },
    drag: function(event, ui) {

        var changeLeft = ui.position.left - ui.originalPosition.left; // find change in left
        var newLeft = ui.originalPosition.left + changeLeft / (( zoomScale)); // adjust new left by our zoomScale

        var changeTop = ui.position.top - ui.originalPosition.top; // find change in top
        var newTop = ui.originalPosition.top + changeTop / zoomScale; // adjust new top by our zoomScale

        ui.position.left = newLeft;
        ui.position.top = newTop;

    }
}); 
```

如果您发现任何问题或对此有进一步的改进，请告诉我。:)

参考：[jQuery-UI 可调整大小/可拖动与变换：scale() 集](http://gungfoo.wordpress.com/2013/02/15/jquery-ui-resizabledraggable-with-transform-scale-set/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-03T17:44:19.707

我正在尝试对gungfoo 在显示为其实际大小的 10% 的元素上发布的**可调整大小进行转换 scale() 修复，但该方法不起作用。**在调整大小期间，光标仍然远离元素。

我更改了 resizeFix 方法的最后两行以直接更新元素的宽度和高度，这解决了我的问题。

```
function resizeFix(event, ui) {

    var changeWidth = ui.size.width - ui.originalSize.width; // find change in width
    var newWidth = ui.originalSize.width + changeWidth / zoomScale; // adjust new width by our zoomScale

    var changeHeight = ui.size.height - ui.originalSize.height; // find change in height
    var newHeight = ui.originalSize.height + changeHeight / zoomScale; // adjust new height by our zoomScale

    ui.originalElement.width(newWidth);
    ui.originalElement.height(newHeight);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T18:20:45.483

我在转换时遇到了类似的问题，最终用 css 解决了它：

```
transform-origin 
```

[http://www.w3schools.com/cssref/css3_pr_transform-origin.asp](http://www.w3schools.com/cssref/css3_pr_transform-origin.asp)

你试过吗？也许会有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-16T08:35:32.740

在这种情况下，我自己的“答案”是使 jQuery UI 可拖动以进行单独的交互，称为“可拖动”。

[https://github.com/paullth/JS-libs](https://github.com/paullth/JS-libs)

[http://jsfiddle.net/paul_herve/ws27C/4/](http://jsfiddle.net/paul_herve/ws27C/4/)

仍然想听听任何替代方案...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-17T11:49:11.260

另一种方法是添加一个补偿转换的插件（记得在插件初始化中添加“transform：true”。

ui.draggable 需要通过转换的逆矩阵传递，以便将元素定位在浏览器稍后在显示上转换的未转换空间中。

对于“可拖动”，以下内容对我有用（jqueryui 1.10）（我从 jquery.panzoom 获取的矩阵计算）：

```
var Matrix = function(a, b, c, d, e, f, g, h, i) {
    if ($.type(a) === 'array') {
        this.elements = [
            +a[0], +a[2], +a[4],
            +a[1], +a[3], +a[5],
                0,     0,     1
        ];
    } else {
        this.elements = [
            a, b, c,
            d, e, f,
            g || 0, h || 0, i || 1
        ];
    }
};

Matrix.prototype = {
    /**
     * Multiply a 3x3 matrix by a similar matrix or a vector
     * @param {Matrix|Vector} matrix
     * @return {Matrix|Vector} Returns a vector if multiplying by a vector
     */
    x: function(matrix) {
        var isVector = matrix instanceof Vector;

        var a = this.elements,
            b = matrix.elements;

        if (isVector && b.length === 3) {
            // b is actually a vector
            return new Vector(
                a[0] * b[0] + a[1] * b[1] + a[2] * b[2],
                a[3] * b[0] + a[4] * b[1] + a[5] * b[2],
                a[6] * b[0] + a[7] * b[1] + a[8] * b[2]
            );
        } else if (b.length === a.length) {
            // b is a 3x3 matrix
            return new Matrix(
                a[0] * b[0] + a[1] * b[3] + a[2] * b[6],
                a[0] * b[1] + a[1] * b[4] + a[2] * b[7],
                a[0] * b[2] + a[1] * b[5] + a[2] * b[8],

                a[3] * b[0] + a[4] * b[3] + a[5] * b[6],
                a[3] * b[1] + a[4] * b[4] + a[5] * b[7],
                a[3] * b[2] + a[4] * b[5] + a[5] * b[8],

                a[6] * b[0] + a[7] * b[3] + a[8] * b[6],
                a[6] * b[1] + a[7] * b[4] + a[8] * b[7],
                a[6] * b[2] + a[7] * b[5] + a[8] * b[8]
            );
        }
        return false; // fail
    },
    /**
     * Generates an inverse of the current matrix
     * @returns {Matrix}
     */
    inverse: function() {
        var d = 1 / this.determinant(),
            a = this.elements;
        return new Matrix(
            d * ( a[8] * a[4] - a[7] * a[5]),
            d * (-(a[8] * a[1] - a[7] * a[2])),
            d * ( a[5] * a[1] - a[4] * a[2]),

            d * (-(a[8] * a[3] - a[6] * a[5])),
            d * ( a[8] * a[0] - a[6] * a[2]),
            d * (-(a[5] * a[0] - a[3] * a[2])),

            d * ( a[7] * a[3] - a[6] * a[4]),
            d * (-(a[7] * a[0] - a[6] * a[1])),
            d * ( a[4] * a[0] - a[3] * a[1])
        );
    },
    /**
     * Calculates the determinant of the current matrix
     * @returns {Number}
     */
    determinant: function() {
        var a = this.elements;
        return a[0] * (a[8] * a[4] - a[7] * a[5]) - a[3] * (a[8] * a[1] - a[7] * a[2]) + a[6] * (a[5] * a[1] - a[4] * a[2]);
    }
};

var Vector = function (x, y, z) {
    this.elements = [ x, y, z ];
};

/**
 * Get the element at zero-indexed index i
 * @param {Number} i
 */
Vector.prototype.e = Matrix.prototype.e = function(i) {

    if( this.elements[ i ] != undefined ){
        return this.elements[ i ];    
    }

    return this.elements;
};    

$.ui.plugin.add("draggable", "transform", {

    start: function( event, ui ) {

        if(!$(this).data('ui-draggable')){
            return false;
        }            

        var inst = $(this).data("ui-draggable");

        inst.matrix = new Matrix(function(matrix){

            var rmatrix = new RegExp(
                    '^matrix\\(' +
                    '(\\-?[\\d\\.e]+)' + '\\,?\\s*' +
                    '(\\-?[\\d\\.e]+)' + '\\,?\\s*' +
                    '(\\-?[\\d\\.e]+)' + '\\,?\\s*' +
                    '(\\-?[\\d\\.e]+)' + '\\,?\\s*' +
                    '(\\-?[\\d\\.e]+)' + '\\,?\\s*' +
                    '(\\-?[\\d\\.e]+)' + '\\)$'
            );                

            var matrix = rmatrix.exec( matrix );
            if (matrix) {
                matrix.shift();
            }
            return matrix || [ 1, 0, 0, 1, 0, 0 ];

        }([$(this).parents('[style*="transform"]').css('transform')]));            
    },
    drag: function( event, ui ) {

        if(!$(this).data('ui-draggable')){
            return false;
        }            

        var inst = $(this).data("ui-draggable");

        var t_pos = inst.matrix.inverse().x(new Vector(ui.position.left, ui.position.top, 0));

        ui.position.left = t_pos.e(0);
        ui.position.top = t_pos.e(1);                   

        if(inst.options.grid) {
            ui.position.left = ui.position.left - ui.position.left % inst.options.grid[0];
            ui.position.top  = ui.position.top - ui.position.top % inst.options.grid[1];                
        }

        if( inst.containment ){

            if( ui.position.left < inst.containment[0] ){
                ui.position.left = inst.containment[0];
            }

            if( ui.position.left > inst.containment[2] ){
                ui.position.left = inst.containment[2];
            }                

            if( ui.position.top < inst.containment[1] ){
                ui.position.top = inst.containment[1];
            }  

            if( ui.position.top > inst.containment[3] ){
                ui.position.top = inst.containment[3];
            }
        }
    },     
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-14T08:27:41.803

最佳答案对我有用，直到我发现**可拖动的故障**:(

当容器本身也被缩放时：

*   如果缩放 < 1，则不能在其包含框中完全拖动
*   如果缩放> 1，则可以将其拖到包含框之外

幸运的是，我在[这里找到了解决方案](https://stackoverflow.com/questions/31346820/jquery-draggable-containment-array-values-for-scaled-container)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-18T21:16:24.893

我发现我可以用另一个 div 包装缩放的元素并在其上设置可拖动的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-18T08:45:34.190

很长一段时间以来，我想知道为什么`@GungFoo`解决方案不适用于 Jquery Resizable 但有些人告诉我它有效。最后我发现使用 jQuery Draggable 和 Resizable 与 CSS Transform Scale 有 4 点：

1.  **使用@GungFoo 解决方案！**
2.  **使用单独的 div 进行可拖动和调整大小！**
3.  **为 div 使用正确的 CSS 变换原点！**
4.  **为 div 使用正确的 CSS 方向！**

检查其中一些问题：

```
function resizeDiv(event, ui) {
        debugger;
        var changeWidth = ui.size.width - ui.originalSize.width; 
        var newWidth = ui.originalSize.width + changeWidth / 4; 

        var changeHeight = ui.size.height - ui.originalSize.height;
        var newHeight = ui.originalSize.height + changeHeight / 4; 

        ui.size.width = newWidth;
        ui.size.height = newHeight;

};
$('#box').resizable({
    minWidth: -($(this).width()) * 10,
    minHeight: -($(this).height()) * 10, 
    resize: resizeDiv
});

$('#box2').resizable({
    minWidth: -($(this).width()) * 10,
    minHeight: -($(this).height()) * 10, 
    resize: resizeDiv
});

$('#box3').resizable({
    minWidth: -($(this).width()) * 10,
    minHeight: -($(this).height()) * 10, 
    resize: resizeDiv
});

$('#box4').resizable({
    minWidth: -($(this).width()) * 10,
    minHeight: -($(this).height()) * 10, 
    resize: resizeDiv
});
```

```
.box{
  position:absolute;
  width:30px;
  height:30px;
  border:1px solid black;
  font-size:3pt;
  overflow:hidden;
  -webkit-transform:scale(4);
  direction:ltr;
}
#box{
  transform-origin: top left;
  top: 0;
  left:0;
}
#box2{
  transform-origin: bottom left;
  top: 250px;
  left:0;
}
#box3{
  direction:rtl;
  left: 250px;
  top: -10px;
}
```

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>

<div id= 'box' class="box"> 
True styles
</div>

<div id= 'box2' class="box"> 
Bad transform-orgin
</div>

<div id= 'box3' class="box"> 
Bad direction
</div>
```

感谢@Guy ;)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-09T10:24:42.833

这是我的解决方案。上面发布的一些代码对我不起作用。

我有一个可拖动的图像，我在该图像上应用 CSS 变换旋转和缩放。一旦我缩放/旋转它，位置就会在拖动开始时关闭。为了解决这个问题，我计算了从停止到开始的设定点差异，并在拖动时应用一个新的设定点，并将差异考虑在内。

```
var $img = $("#my-image-id");

$img.posLeft  = 0;
$img.posTop  = 0;
$img.diffLeft  = 0;
$img.diffTop  = 0;

$img.draggable({
  start: function( event, ui ) {
    //check the difference from start to stop setpoints
    $img.diffLeft  = $img.posLeft-ui.position.left;
    $img.diffTop  = $img.posTop-ui.position.top;
    //console.log('start x: '+Math.floor(ui.position.left)+' y: '+Math.floor(ui.position.top));
    //console.log('diff x: '+Math.floor($img.posLeft-ui.position.left)+' y: '+Math.floor($img.posTop-ui.position.top));
  },
  drag: function( event, ui ) {
    //fix the offset bug that is applied after CSS transform, to do that just add the value difference
    ui.position.left = ui.position.left+$img.diffLeft;
    ui.position.top = ui.position.top+$img.diffTop;
    //console.log('drag x: '+ui.position.left+' y: '+ui.position.top);
  },
  stop: function( event, ui ) {
    //save the last applied setpoints
    $img.posLeft = ui.position.left;
    $img.posTop = ui.position.top;
    //console.log('stop x: '+Math.floor(ui.position.left)+' y: '+Math.floor(ui.position.top));
  }
}); 
```

CSS transform-origin 技巧只修复了缩放错误。旋转应该围绕中心，所以你要保持默认的 50% 50%。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-26T06:47:48.347

我会将此作为评论添加到 Gung Foo 接受的答案中，但我没有代表发表评论。

我发现 Gung 的回答对我来说非常有效，但是可调整大小的修复仅在从右下角拖动时才有效。我在其他三个角上也有手柄，发现元素会移动，所以我必须将修复从可拖动添加到可调整大小的函数。

也许有更好的方法，或者我错过了一些东西，但我发现下面修改后的调整大小适用于所有句柄：

```
$(this).resizable({
    minWidth: -(contentElem.width()) * 10,  // these need to be large and negative
    minHeight: -(contentElem.height()) * 10, // so we can shrink our resizable while scaled

    // adjust the initial position to accomodate for the scale
    start: function(event, ui){
        ui.position.left = Math.round(ui.position.left/zoomScale);
        ui.position.top = Math.round(ui.position.top/zoomScale);
        ui.originalPosition.left = ui.position.left;
        ui.originalPosition.top = ui.position.top;
    },

    resize: function(event, ui) {

        var changeWidth = ui.size.width - ui.originalSize.width; // find change in width
        var newWidth = ui.originalSize.width + changeWidth / zoomScale; // adjust new width by our zoomScale

        var changeHeight = ui.size.height - ui.originalSize.height; // find change in height
        var newHeight = ui.originalSize.height + changeHeight / zoomScale; // adjust new height by our zoomScale

        ui.size.width = newWidth;
        ui.size.height = newHeight;

        // if the position is changed by a NW,NE,SW handle resize adjust for the scale
        var changeWidth = ui.size.width - ui.originalSize.width; // find change in width
        var newWidth = ui.originalSize.width + changeWidth / zoomScale; // adjust new width by our zoomScale

        var changeHeight = ui.size.height - ui.originalSize.height; // find change in height
        var newHeight = ui.originalSize.height + changeHeight / zoomScale; // adjust new height by our zoomScale

        ui.size.width = newWidth;
        ui.size.height = newHeight;

    }
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-07T11:20:03.923

我有同样的问题，对我来说最简单的方法是不要使用 jquery-ui 的可拖动功能，因为它不支持 CSS3 转换属性。

对我来说真正有用的是实现自己的可拖动功能：[http ://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/](http://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/)

我知道它不能 100% 解决您的问题，因为您仍然想使用 jquery-ui 可拖动功能，但它可以帮助其他人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-22T12:09:21.820

这些解决方案都不适合我，至于一个，我无法转换可拖动对象的父级 - 只有可拖动对象本身被转换。

这就是我解决此问题的方法：

```
$('.draggable').draggable(
{
    cancel: '.restrict-drag',
    scroll: false,
    containment: '#contain',

    start: function(event, ui) 
    {
        ui.position.left = 0;
        ui.position.top = 0;
    },

    drag: function(event, ui) 
    {
        ui.position.left = ui.position.left - ($(event.target).width() * Zoom);
        ui.position.top = ui.position.top - ($(event.target).height() * Zoom);
    }
}); 
```

缩放默认为 0。

为了缩放可拖动对象，我做了以下操作：

```
function changeZoom(zoom)
{
    $('.draggable').each(function() { $(this).css('transform-origin', '50% 50%'); $(this).css('transform', 'scale(' + zoom + ')'); });
    Zoom = zoom; // Global Zoom-variable
} 
```

一切似乎都正常。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-31T03:02:04.317

对于不同的调整角

```
$('.rect-item').resizable({
        handles: 'n,e,s,w,ne,se,sw,nw',
        resize: (e, ui) => {
          const zoomScale = Your scale;
          const changeWidth = ui.size.width - ui.originalSize.width; // find change in width
          const newWidth = ui.originalSize.width + changeWidth / zoomScale; // adjust new width by our zoomScale

          const changeHeight = ui.size.height - ui.originalSize.height; // find change in height
          const newHeight = ui.originalSize.height + changeHeight / zoomScale; // adjust new height by our zoomScale

          ui.size.width = newWidth;
          ui.size.height = newHeight;

          // here
          const posOrigin = ui.originalPosition;
          if (posOrigin.left !== ui.position.left) {
            ui.position.left = posOrigin.left - changeWidth / zoomScale;
          }
          if (posOrigin.top !== ui.position.top) {
            ui.position.top = posOrigin.top - changeHeight / zoomScale;
          }

        }
      }); 
```

# c# - 如何检查偏移量处的某些字节并相应地设置复选框

> ID：10212684
> 
> 赞同：2
> 
> 时间：2012-04-18T15:25:52.360
> 
> 标签：c#

我需要知道如何检查偏移量的字节。我正在使用十六进制字符串，即`string hexcode1 = "0000A0E1";`偏移量是`int offset1 = 30030;`我如何检查偏移量1是否有hexcode1。请注意，我确实知道文件流和二进制写入器/读取器，但不知道如何将它们与字符串一起使用。这部分是我需要帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:01:30.937

这应该可以解决问题。使用二进制阅读器，偏移文件，然后读取字节并转换为字符串，以与当前字符串进行比较。

```
 file = File.Open(myFileLocation); 
        BinaryReader br = new BinaryReader(file);

        string hexcode1 = "0000A0E1";
        int offset1 = 20334;

        file.Seek(offset1, SeekOrigin.Begin);

        String byteRead = br.ReadByte().ToString();

        mycheckbox.Checked = (hexcode1.Equals(byteRead)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:40:03.227

为了获取流中某个位置的字节，您可以简单地使用 的[`Position`](http://msdn.microsoft.com/en-us/library/system.io.filestream.position.aspx)属性`Stream`并开始尽可能多地读取。

如果流支持查找，则可以使用该[`Seek`](http://msdn.microsoft.com/en-us/library/system.io.filestream.seek.aspx)方法。

您可以使用 将字符串解析为整数[`int.Parse`](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)并将结果值传递给`Position`或`Seek`。

# php - 社交图标不适用于 Wordpress 上的无限滚动

> ID：10212686
> 
> 赞同：14
> 
> 时间：2012-04-18T15:25:58.850
> 
> 标签：php, javascript, facebook, wordpress, google-plus

我们正在为工作中的客户制作一个网站，可以在这里找到：[http](http://ethercreative.net/studio_social/) ://ethercreative.net/studio_social/ 这是一个非常简单的 wordpress 主题，但由于无限滚动插件和社交之间的冲突而产生了复杂性图标。

每个帖子都旨在在末尾显示一个块，其中包含 G+、FB 和 Twitter 社交图标。它意味着在开始时显示大约 4 个帖子，然后当你滚动它时，它意味着加载下一组。

这些东西中的每一个都有效，但不能一起使用。

当无限滚动加载下一个帖子块时，它只显示一个类似 facebook 的按钮，而其他两个社交图标都没有。

奇怪的是，它留下了代码块：

```
<span class="icons">
                    <g:plusone size="medium" href="http://ethercreative.net/studio_social/?p=1"></g:plusone>                <iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fethercreative.net%2Fstudio_social%2F%3Fp%3D1&amp;locale=&amp;layout=button_count&amp;action=like&amp;width=92&amp;height=20&amp;colorscheme=light" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:92px; height:20px;" allowtransparency="true"></iframe>&nbsp;&nbsp;&nbsp;
                    <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://ethercreative.net/studio_social/?p=1" data-count="horizontal" data-text="Hello world!" data-via="twitter_username"></a></span>
</div> 
```

我知道问题是什么以及为什么会发生，但我对 javascript 真的不是很好，也不知道使用什么调用来修复它。

我正在使用 Wordpress 3.3.1，带有无限滚动插件（http://wordpress.org/extend/plugins/infinite-scroll/）和社交图标的 digg digg（http://wordpress.org/extend/plugins /挖掘挖掘/）

无限滚动插件确实能够添加 onLoad 事件以在它抓取新的帖子集后运行。那么我应该在这里添加什么？

感谢您提前提供的所有帮助！祝你今天过得愉快。

* * *

更新：经过更多研究，我也修复了推特。现在只剩下 Google Plus 需要修复了。推特所需的代码是：

```
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs"); 
```

再次更新：也找到了 Google Plus 代码：

(function() { var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = 'https://apis.google.com/js/ plusone.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s); })();

我学到了什么？在 Stack Overflow 上提问之前做更多的谷歌搜索。至少这是未来有这个问题的人的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T02:03:57.617

您提出的解决方案基本上是重新加载脚本，这是非常低效的，因为您可能会在第一组社交按钮的页面加载时加载它们。所有 3 项服务都有一种方法来解析文档的一部分或整个文档以呈现任何新的社交小部件。你想要的代码是这样的：

```
var el = document.body; 

//Google Plus   
if (typeof gapi !== "undefined") { gapi.plusone.go(el); }

//Facebook
if (typeof FB !== "undefined") { FB.XFBML.parse(el); }

//Twitter
if (typeof twttr !== "undefined") { twttr.widgets.load(); } 
```

在上述情况下，el 应该是包含小部件的容器，或者可能只是 document.body（将重新渲染所有小部件。）不确定您目前是否可以缩小 Twitter 的上下文，但我相信他们计划添加那。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T12:17:48.647

在JS文件中添加代码...

```
addthis.toolbox('.addthis_toolbox');
addthis.counter('.addthis_counter'); 
```

它完美地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:42:40.253

Like LocalPCGuy suggests, you're doing a lot more work than necessary to achieve this. Ideally you'd have part of the asynchronous load callback do the work to embed these buttons in just the elements that require them. Or, even better, add them on the server side (if that's possible) so that the client has to do no work to make the page ready. At least with your solution, the script files will be cached which should make the load time better. The problem is that you're still making the page work harder than it needs to. As the page infinite scrolls and gets bigger and bigger, this extra work will be more and more significant.

The ideal flow would be something like:

1.  Load the initial page
2.  Execute the required JS. In this step, make sure you have a function that will embed the social widgets in a given DOM node.
3.  让页面无限滚动、触发和异步请求
4.  在异步加载时，让异步加载回调解析响应，然后遍历它创建的 DOM，将每个条目传递给您的小部件制作函数。

这样，您只需做最少的工作即可获得所需的效果。

# java - Java 最佳方法（线程、DBus 和 HttpRequest）

> ID：10212690
> 
> 赞同：0
> 
> 时间：2012-04-18T15:26:30.987
> 
> 标签：java, multithreading, httprequest, dbus

我在Java中有这种情况：

在称为 I 的内部模块上。一个大模块 Z 通过 DBus 从 I 接收消息。这个大模块 Z 与外部服务器 E 通信（对于 Dbus 接收到的每条消息）。

通过 DBus 架构，每完成一个请求，在 Z 模块中都会创建一个新的线程来处理它。

与 E 沟通的最佳方法是什么？

```
a) Make a class with a method SendToExternalServer(). this method will be called every time that have a new DBus message. 
  i) The method has only one HttpUrlConnection.
  ii) The method create a differente HttpUrlConnection instance every time is called.

b) Same situation on a) but now the method SendToExternalServer() is static
  i) (same situations)
  ii) (same situations)

c) Same situation on a) but the class extends the interface Runnable
  i) (same situation)
  ii) (same situation)

d) OTHER ? 
```

提前感谢若昂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:09:24.413

我对 dbus 一无所知，所以对此持保留态度。

我*不会*选择选项 B，仅仅是因为单元测试。使用选项 A（或 C），您可以切换到“MockSendToExternalServer”，它只是记录或记录正在“发送”的消息，并且单元测试将查看这些消息。

我强烈倾向于选项 C，因为这样您就可以使用 java.util.concurrent ConcurrencyUtilities，例如 ExecutorService。对于您的第一遍实现，请使用简单的单线程队列，（例如`Executors.newSingleThreadedExecutor`）但是，如果/当您需要更多线程时，您可以添加它们，例如`Executors.newFixedThreadPool()`。

# drupal - Drupal 7：以编程方式获取标签列表（分类）

> ID：10212693
> 
> 赞同：5
> 
> 时间：2012-04-18T15:26:34.933
> 
> 标签：drupal, tags, drupal-7, taxonomy

我需要以编程方式创建 Drupal 7 网站中使用的标签列表。我正在浏览 api/functions，但找不到类似“get_list_of_terms()”的东西:-)

我应该如何进行？谢谢！J。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T17:13:03.743

确切地。一个稍微完整的例子是（你可以用你自己的词汇 vid 代替）：

```
if ($terms = taxonomy_get_tree($vocabulary->vid)) {
  foreach ($terms as $term) {
      // Do something with $term->tid or $term->name
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T15:32:20.790

要获取特定词汇表的分类术语列表，您可以使用[`taxonomy_get_tree`](http://api.drupal.org/api/drupal/modules!taxonomy!taxonomy.module/function/taxonomy_get_tree/7)

# mysql - MySQL 日期计算

> ID：10212695
> 
> 赞同：1
> 
> 时间：2012-04-18T15:26:41.080
> 
> 标签：mysql, datetime

我已经用尽了我的搜索来寻找这个 MySQL 日期计算的解决方案。我的客户想知道过去一周、一个月和一年完成了多少笔交易。

这是一个基于 SQL 的脚本（但使用 MySQL 语言）我很忙，所以不要打扰 Select、From 等。 datetime_created 字段（在脚本中）已经在 UnixTime 中，而时间戳（现在）被使用计算当前日期减去 7 天。由于公式结果也可能为负，我只需要 0.01 到 7 之间的结果。

下面列出了我过去一周的公式。有任何想法吗？

```
(registrations.datetime_created -unix_timestamp(now())-604800)/86400 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:30:08.443

在两者之间使用 UNIX_TIMESTAMP / ADDDATE() / 怎么样？

**编辑**轻微扩展以澄清

```
SELECT
    COUNT(*)
FROM registrations
WHERE registrations.datetime_created
    -- will go back to now() - a month INCLUDING time.  -1 WEEK/MONTH/YEAR etc all works here
    BETWEEN UNIX_TIMESTAMP(ADDDATE(NOW(),INTERVAL -1 WEEK)) 
    AND UNIX_TIMESTAMP(NOW())                                   
    -- will start at now() including time 
```

通过在 WHERE 条件中指定开始和结束时间戳，MySQL 能够使用`datetime_created`字段上的索引（如果存在）非常有效地执行此操作。相反，如果您在 WHERE 中有 WHERE `registrations.datetime_created*1235/12515`（对字段的操作），那么您会看到它返回的速度较慢，因为 MySQL 需要扫描整个表以确定要返回的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:41:25.707

这未经测试，但我认为它会做你想要的：

```
SELECT
    q1.dealsInLastWeek,
    q2.dealsInLastMonth,
    q3.dealsInLastYear
FROM
    (SELECT COUNT(*) AS dealsInLastWeek FROM registrations WHERE FROM_UNIXTIME(datetime_created) > DATE_ADD(NOW(), INTERVAL -1 WEEK)) q1,
    (SELECT COUNT(*) AS dealsInLastMonth FROM registrations WHERE FROM_UNIXTIME(datetime_created) > DATE_ADD(NOW(), INTERVAL -1 MONTH)) q2,
    (SELECT COUNT(*) AS dealsInLastYear FROM registrations WHERE FROM_UNIXTIME(datetime_created) > DATE_ADD(NOW(), INTERVAL -1 YEAR)) q3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:53:14.767

使用 INTERVAL 进行测试

```
SELECT (unix_timestamp(now()-INTERVAL '7' DAY)),(unix_timestamp(now()-INTERVAL '1' MONTH)),(unix_timestamp(now()-INTERVAL '1' YEAR));

WHERE registrations.datetime_created>(unix_timestamp(now()-INTERVAL '7' DAY)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T08:04:12.380

Where 子句根本不被接受，我不得不改变一些逻辑。谢谢大家，但最终的脚本是大家的混合物，如下：

```
registrations.datetime_created > UNIX_TIMESTAMP(ADDDATE(NOW(),INTERVAL -1 WEEK)) 
```

# ant - 有没有办法从 Ant 脚本中动态构建 Ant 元素？

> ID：10212699
> 
> 赞同：3
> 
> 时间：2012-04-18T15:26:54.777
> 
> 标签：ant

这个问题可能不是很清楚，所以让我用一个例子来说明我的意思。假设我要复制几个文件夹：

```
<copy todir="..." overwrite="true">
    <fileset dir="dir1" />
    <fileset dir="dir2" />
    <fileset dir="dir3" />
    ...
</copy> 
```

但我不需要在脚本中硬编码这些文件夹，而是需要从如下所示的文本文件中加载它们：

```
Directories to copy:
  dir1
  dir2
  dir3
  ... 
```

所以我**需要以某种方式加载文本文件，解析它，找出应该复制哪些目录以及其中的构造元素**（`<copy>`并且`<fileset>`只是示例）。

*是否可以在 Ant*中实现这一点，而无需对我的 build.xml 文件执行一些转换（例如 XSLT）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:59:50.513

由于您无法修改输入文本文件的格式，因此我能想到的最佳方法是：

1.创建一个 [shell|Perl|etc] 脚本，从您的原始文件生成 XML。这可以是 XML 片段或完整的 Ant 文件。

2.在调用 Ant 之前运行该脚本。

3.将生成的 XML 导入您的 Ant 文件中（请参阅[http://ant.apache.org/faq.html#xml-entity-include](http://ant.apache.org/faq.html#xml-entity-include)上的相关 Ant 文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:50:46.500

我能想到的完成你想用 ant 做的最好的方法是使用[ant contrib](http://ant-contrib.sourceforge.net/) foreach 任务来读取文件并在每一行上执行操作。蚂蚁目标看起来像这样：

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties" />
<path id="dirlists">
    <fileset dir="${basedir}/dirlists">
        <include name="**/*.txt" />
    </fileset>
</path>

<target name="runCopy">
    <foreach target="_copyDir" param="dirPath">
        <path refid="dirlists"/>
    </foreach>
</target>   

<target name="_copyDir">
    <copy todir="..." overwrite="true">
        <fileset dir="${dirPath}"/>
    </copy>
</target> 
```

这将读取名为 dirlists 的文件夹中的任何 .txt 文件，并为每个文件中的每一行从该行指定的目录复制到目标目录...

# c# - 更新面板内的文本框丢失数据

> ID：10212700
> 
> 赞同：0
> 
> 时间：2012-04-18T15:26:55.260
> 
> 标签：c#, asp.net, textbox, drop-down-menu, updatepanel

我有一个**updatePanel**，它有一个**文本框**作为*内容*，一个**下拉列表**作为*触发器*。每当我更改**下拉列表的***selectedIndex*时，它都会查询数据库，它会给我一个**文本框**的*值*。

 *****现在我输入了一些新*值*，然后单击*更新* **按钮**，它将保存在数据库中。

这里的问题，它一直让我得到旧*值*（**下拉列表**带来的值）。

我怎么能解决这个问题？

编辑

```
 <asp:UpdatePanel ID="uplKmAllowed" runat="server">
            <ContentTemplate>
                <dx:ASPxTextBox ID="txtKmAllowed" runat="server" Width="215px" OnTextChanged="txtKmAllowed_TextChanged">
                </dx:ASPxTextBox>
            </ContentTemplate>
        </asp:UpdatePanel> 
```

后面的代码：这是以编程方式添加触发器，因为 cboAsset 在用户控件中

```
 asset = fltrAsset.FindControl("cboAsset") as ASPxComboBox;
asset.AutoPostBack = true;

asset.SelectedIndexChanged += new EventHandler(Asset_SelectIndexChanged); 
        AsyncPostBackTrigger trigger = new AsyncPostBackTrigger();
        trigger.ControlID = asset.UniqueID;
        trigger.EventName = "SelectedIndexChanged";

        uplKmAllowed.Triggers.Add(trigger); 
```

功能

```
 protected void Asset_SelectIndexChanged(object sender, EventArgs e)
    {
        string tudID = asset.SelectedItem.Value.ToString();
        RentalTracking rtk = new RentalTracking();
        string assetID = rtk.getAssetIDDepartmentIDbyTudID(tudID)[1];
        RentalAssetInfo rai = new RentalAssetInfo();
        rai.GetRentalAssetInfo(Int32.Parse(assetID));
        if (rai.KMAllowed == 0 || rai.KMAllowed == -1 || rai.KMAllowed == null)
        {
            kmallowedSaved = false;
            txtKmAllowed.Text = "";
        }
        else
        {
            txtKmAllowed.Text = rai.KMAllowed.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-21T04:36:56.293

```
use asp:AsyncPostBackTrigger in update panel
  <asp:UpdatePanel ID="uplKmAllowed" runat="server">
            <ContentTemplate>
                <dx:ASPxTextBox ID="txtKmAllowed" runat="server" Width="215px" OnTextChanged="txtKmAllowed_TextChanged">
                </dx:ASPxTextBox>
            </ContentTemplate>
 <Triggers>
            <asp:AsyncPostBackTrigger ControlID="LnkEditBuyingLead" EventName="EventName"/>
        </Triggers>
        </asp:UpdatePanel> 
```*****

# android - Android在调用创建新联系人活动时避免保存联系人

> ID：10212703
> 
> 赞同：2
> 
> 时间：2012-04-18T15:26:57.893
> 
> 标签：android, android-intent, android-contacts

有人可以帮我解决以下问题吗？

我有一个处理电话号码并为用户提供保存新联系人功能的应用程序。为了保存新联系人，我编写了以下代码：

```
Intent addContactIntent = null;
addContactIntent = new Intent(Intent.ACTION_INSERT);
addContactIntent.setType(ContactsContract.Contacts.CONTENT_TYPE);
addContactIntent.putExtra(ContactsContract.Intents.Insert.PHONE, phoneNumber); 
```

这允许我打开创建联系人活动，但在到达此活动之前，Android 会显示一个对话框，我必须在其中选择要将联系人保存到的位置。在我的场景中，对话框包含以下选项：电话 Google Microsoft Exchange

由于我需要始终将联系人保存在电话中，因此我想进入电话的 crate 联系人活动。

我的问题是：有没有办法避免“将联系人保存到”对话框？我认为可以通过 Intent 明确地说出来，但我没能找到。

提前非常感谢。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-12T06:43:13.613

[`ContactsContract.Intents.Insert`](https://developer.android.com/reference/android/provider/ContactsContract.Intents.Insert.html)是一个便利类，具有用于插入联系人的所有受支持的意图功能。

```
Intent intent = new Intent(Intent.ACTION_INSERT, Contacts.CONTENT_URI);
intent.putExtra(ContactsContract.Intents.Insert.PHONE, phoneNumber);
intent.putExtra(ContactsContract.Intents.Insert.EXTRA_ACCOUNT, new Account(name, type)); 
```

# android - 如何禁用 Android 键盘上的自动更正栏？

> ID：10212704
> 
> 赞同：4
> 
> 时间：2012-04-18T15:26:58.287
> 
> 标签：android, listview, keyboard

问题是 Android 软键盘上的自动更正栏覆盖了我的 ListView（仅在一部手机上！）。我希望通过简单地删除自动更正栏来解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T15:31:04.337

添加这个 inputType : InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS，你可以用“|”添加它 如果您的视图中已经有 inputType，则在 xml 和 java 中。

# postgresql - 如何在 PostgreSQL 中执行 ALTER DATABASE $current_database

> ID：10212707
> 
> 赞同：4
> 
> 时间：2012-04-18T15:27:07.070
> 
> 标签：postgresql

我正在尝试在我输入的 SQL 脚本中执行此操作`psql`：

```
ALTER DATABASE dbname SET SEARCH_PATH TO myschema,public 
```

但我需要`dbname`动态设置为当前数据库而不是硬编码。

这在 PostgreSQL 中可能吗？我试过这个但它不起作用：

```
ALTER DATABASE (select current_database()) SET SEARCH_PATH TO myschema,public; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:51:09.167

您不能在无法对标识符进行参数化的普通 SQL 中执行这样的语句。
您可以编写一个[plpgsql 函数来执行动态 SQL](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)。

使用 PostgreSQL **9.0**或更高版本，您还可以使用[`DO`语句](http://www.postgresql.org/docs/current/interactive/sql-do.html)：

```
DO $$
BEGIN
EXECUTE '
ALTER DATABASE ' || current_database() || ' SET SEARCH_PATH TO myschema,public';
END; $$; 
```

# java - OAuthProblem，缺少参数 access_token

> ID：10212708
> 
> 赞同：2
> 
> 时间：2012-04-18T15:27:07.397
> 
> 标签：java, facebook, oauth, authorization

我在尝试为用户获取访问令牌时遇到此错误。这与 facebook 应用程序的授权过程有关。产生该异常的代码如下：

```
OAuthClientRequest oAuthRequest = OAuthClientRequest
    .tokenLocation("https://graph.facebook.com/oauth/access_token")
    .setGrantType(GrantType.AUTHORIZATION_CODE)
    .setClientId("myAppId")
    .setClientSecret("myAppSecret")
    .setRedirectURI("myAppURL").setCode(code)
    .buildBodyMessage(); 
```

抛出的异常如下：

```
12:14:22,468 ERROR [STDERR] OAuthProblemException{description='Missing parameters:   
access_token', error='invalid_request', uri='null', state='null', scope='null'}
12:14:22,468 ERROR [STDERR]     
at org.apache.amber.oauth2.common.exception.OAuthProblemException.error(OAuthProblemException.java:57)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.common.utils.OAuthUtils.handleOAuthProblemException(OAuthUtils.java:165)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.common.utils.OAuthUtils.handleMissingParameters(OAuthUtils.java:183)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.validator.OAuthClientValidator.validateRequiredParameters(OAuthClientValidator.java:90)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.validator.OAuthClientValidator.validateParameters(OAuthClientValidator.java:53)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.validator.OAuthClientValidator.validate(OAuthClientValidator.java:49)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.response.OAuthClientResponse.validate(OAuthClientResponse.java:61)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.response.OAuthClientResponse.init(OAuthClientResponse.java:56)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.response.OAuthAccessTokenResponse.init(OAuthAccessTokenResponse.java:52)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.response.OAuthClientResponseFactory.createCustomResponse(OAuthClientResponseFactory.java:60)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.URLConnectionClient.execute(URLConnectionClient.java:105)
12:14:22,468 ERROR [STDERR] at org.apache.amber.oauth2.client.OAuthClient.accessToken(OAuthClient.java:58)
12:14:22,469 ERROR [STDERR] at tpc.facebook.autenticacion.ServletOAuth2.obtenerCodeYAccessToken(ServletOAuth2.java:315)
12:14:22,469 ERROR [STDERR] at tpc.facebook.autenticacion.ServletOAuth2.doGet(ServletOAuth2.java:217)
12:14:22,469 ERROR [STDERR] at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
12:14:22,469 ERROR [STDERR] at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
12:14:22,469 ERROR [STDERR] at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
12:14:22,469 ERROR [STDERR] at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)1
12:14:22,469 ERROR [STDERR] at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
12:14:22,469 ERROR [STDERR] at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
12:14:22,469 ERROR [STDERR] at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
12:14:22,469 ERROR [STDERR] at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
12:14:22,469 ERROR [STDERR] at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
12:14:22,469 ERROR [STDERR] at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
12:14:22,469 ERROR [STDERR] at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T16:45:51.583

我在实现客户端和服务器时遇到了同样的问题，问题是关于 Apache Amber (Oltu) 项目中客户端示例中的一个错误：

首先，您有 Auth 代码请求（有效）：

```
OAuthClientRequest request = OAuthClientRequest
 .authorizationLocation(AUTHORIZE_URL)
 .setClientId(CLIENT_ID)
 .setRedirectURI(REDIR_URL)
 .setResponseType(CODE_RESPONSE)
 .**buildQueryMessage**(); 
```

其次是关于访问令牌的请求（不起作用）：

```
OAuthClientRequest request = OAuthClientRequest
  .tokenLocation(ACCESS_TOKEN_URL)
  .setGrantType(GrantType.AUTHORIZATION_CODE)
  .setClientId(CLIENT_ID)
  .setClientSecret(CLIENT_SECRET)
  .setRedirectURI(REDIR_URL)
  .setCode(code)
  .**buildBodyMessage**(); 
```

错误是关于第二个请求中的 buildBodyMessage() 。通过 buildQueryMessage() 更改它。

享受 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:33:33.913

我认为您可以使用正常的 OAuthJSONAccessTokenResponse：

```
OAuthAccessTokenResponse oAuthResponse = oAuthClient.accessToken(request); 
```

我的问题是，Facebook 回应

```
OAuthProblemException{description='null', error='{"message":"Error validating verification code.","type":"OAuthException","code":100}', uri='null', state='null', scope='null'} 
```

有任何想法吗？

# php - PHP int 到字符串

> ID：10212710
> 
> 赞同：1
> 
> 时间：2012-04-18T15:27:14.853
> 
> 标签：php, string, int, typing

我知道在 PHP 中你可以声明一个变量 A，然后如果你在循环中递增它，它将变为 A,B,C,....X,Y,Z,AA,AB,AC

是否有任何php函数可以将整数转换为该格式的相应字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:33:23.607

最接近该格式的是[base_convert](http://php.net/manual/en/function.base-convert.php)，但它使用 0-9A-Z 字符集。

您可以使用 base 26，然后移动字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:37:22.203

使用 chr 函数，将 int 转换为 ascii 代码（大写字母从 65-90），所以 65+i，要使用 i >= 26，你必须一次做一个字母

所以，像这样的东西......

```
function noToString($i) {
  if($i < 26) return chr(65+$i);
  else return noToString($i-26).chr(65+$i%26);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:12:44.803

我从 Tor P 的回答开始，我认为这可以按预期工作：

```
function numToString($i) {
    if($i < 26) {
        return chr(65 + $i);
    } else {
        $i -= 26;
        $r = $i % 26;
        return numToString($i - $r).chr(65 + $r);
    }
} 
```

# sql - 根据数据引用两个不同的表？

> ID：10212711
> 
> 赞同：1
> 
> 时间：2012-04-18T15:27:14.993
> 
> 标签：sql, sql-server, entity-framework, code-first

解决此问题的最佳方法是什么。

我有一张包含私人详细信息的表格和一张包含公司详细信息的表格。现在我需要创建一个名为 sales 的表。该表将引用persons 表或company 表，具体取决于它是私人还是购买某物的公司。最好的方法是什么？将公司/个人的数据复制到销售表中？

我正在使用 EF CF 和 MS-SQL Server 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:32:43.033

您可以创建两个多对多表`company_sales`，`person_sales`或者您可以将两列添加到销售表并使用`case when companyId is null then person.name`

```
person
======
personId
name
address

company
=======
companyId
name
address

sales
=====
salesId
productId
amount

person_sales
============
personId
salesId

company_sales
=============
companyId
salesId 
```

# php - strtotime怎么写一个full time？

> ID：10212715
> 
> 赞同：2
> 
> 时间：2012-04-18T15:27:31.277
> 
> 标签：php, datetime, timestamp, strtotime

我正在尝试获取时间戳：“小时：分钟上午/下午月/日/年”，但它似乎无法正常工作。它需要按什么顺序排列？

我当前订单的示例：2012 年 4 月 19 日上午 11:59

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:55:15.747

这是您将询问的格式化日期/时间字符串转换为时间戳的方式：

```
$date_string = '11:59 am, 04/19/2012';
$dateTime = DateTime::createFromFormat("H:i a, m/d/Y", $date_string);
$timestamp = $dateTime->getTimestamp();
echo $timestamp; 
```

输出：

```
1334833140 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:32:13.987

将日期放在时间之前：

```
echo strtotime('04/19/2012 11:59 am'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T15:32:21.747

我相信它会类似于这个

```
echo strtotime(date("Y-m-d H:i:s")); 
```

所以顺序是

年月日时：分：秒

我还假设 strtotime 足够聪明，可以知道不同的日期格式，因此您应该对日期格式没问题，只需将其作为第一部分和之后的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T15:32:38.807

尝试删除 am: 之后的以下字符**，**

例如使用这个：

```
strtotime("11:59 am 04/19/2012") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T15:31:59.353

如果我正确理解了您的问题，则需要解析以`date()`从时间戳中获取所需格式的字符串是：

```
date("H:i a, m/d/Y", $timestamp); 
```

更多格式字符可以在文档中找到，[这里](http://php.net/manual/en/function.date.php)。

* * *

`strtotime()`不会将您提供的日期格式转换为时间戳，但是更强大和通用的[`DateTime`](http://php.net/manual/en/book.datetime.php)类可能能够。

# correlation - 根据 tf-idf 值计算相关性？

> ID：10212722
> 
> 赞同：2
> 
> 时间：2012-04-18T15:27:49.520
> 
> 标签：correlation, tf-idf, pearson

根据 tf-idf 矩阵计算 pearson 相关系数以查看哪些项与其他项结合出现是否有意义？它在数学上正确吗？

我的输出是一个相关矩阵，每个单元格中每个术语都有相关系数。

*   --------term1 term2 term3
*   学期2
*   学期2
*   学期2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T16:45:49.153

It depends on your definition of 'occurs in combination with other terms'. To clarify this some more points:

idf is irrelevant when doing a Pearson mean correlation. All tf values for the same term will be multiplied by the same idf value yielding the final tf-idf. The PMC is invariant with respect to scaling of the input, so the idf is canceled out here. Hence all that matters in your proposed idea is the tf. You might save some calculations if you do not even calculate the idf, but it wont hurt much if you do.

Now about the usage of the tf. Let's make an example to figure out what you might need:

Lets say `TermA` appears in `Document1` very often and a little in `Document2`. `TermB` on the other hand appears in `Document1` a little and very often in `Document2`. Would you say that these two terms appear together or not? They occur in the same document, but at different frequency. If you use PMC of tf-idf then the result will be, that they do not co-occur (because of the differences in frequency).

At this point you should also note that the PMC goes from -1 to 1 in values. I.e. you could have words which co-occur (PMC=1) which are independent (PMC=0) and such words which are opposite (PMC=-1). Does this fit the domain you are modelling? If not, just add 1 to the PMC.

Another alternative would be to use cosine-similarity, which is very similar to PMC but has some different characteristics. Also in some other cases you might only be interested in actual co-occuring and do not care about the frequency.

All these methods are 'correct' so to say. The more important question is, which of these methods fits best to the problem you are modelling. In many cases this can not be determined theoretically, but only by trying out different alternatives and test which one fits best to your problem domain.

**EDIT (some remarks about the comments below)**:

Cosine similarity does actually help, but you have to think differently in that case. You can of course produce term-frequency vectors for the terms in the document and then calculate the cosine similarity for these document term-frequency vectors. You pointed out correctly, that this would give you the similarity of posts to each other. But this is not what I meant. If you have your complete term-frequency matrix, you can also produce vectors, which describe for a single term how often this term appeared in each document. You can also calculate the cosine similarity of these vectors. This would give you the similarity of terms based on document co-occurence.

Think about it this way (but first we will need some notation):

let `f_{i,j}` denote the number of times the term `i` appeared in document `j` (note that I am ignoring idf here, since it will just cancel out, when handling terms instead of documents). Also let `F=(f_{i,j})_{i=1...N,j=1...M}` denote the whole document-term matrix (Terms go in columns and documents in rows). Then finally we will call `|F|_c` the matrix `F` where each colum is normalized according to the `l^2` norm and `|F|_r` the matrix `F` where each row is normalized according to the `l^2` norm. And of course as usual `A^T` denotes the transpose of `A`. In that case you have the normal cosine distance between all documents based on terms as

```
(|F|_r)*(|F|_r)^T 
```

This would give you a `MxM` matrix which describes the similarity of the documents.

If you want to calculate term similarity instead, you would simply calculate

```
(|F|_c)^T*(|F|_c) 
```

which gives you an `NxN` matrix describing the term similarity based on co-occurences in documents.

Note that the calculation of the PMC would basicly be the same and just differ in the type of normalisation which is applied to rows and columns in each of the matrix multiplications.

Now to your other post, you say that you would like to find out how likely it is that if `termA` appears in a document, that `termB` also appears in the same document. Or formaly speaking `p(termB | termA)` where `p(termX)` denotes the probability of `termX` appearing in a document. That is a different beast altogether, but again very simple to calculate:

```
1\. Count the number of documents in which `termA` appears (call it num_termA)
2\. Count the number of documents in which both `termA` and `termB` appear (call it num_termA_termB)

then p(termB | termA)=num_termA_termB/num_termA 
```

This is an actuall statistical measure of the likelihood of co-occurenct. Howeve be aware, most likely the relationship `p(termB | termA ) == p(termA | termB)` will not hold, so this measure of co-occurence is not usable at all for clustering via MDS and this is most likely (no pun intendet).

My suggestion is to try both PMC and cosine-similarity (as you can see above they only differ in normalisation so they should be fast to implement both) and then check which one looks better after clustering.

There are some more advanced techniques for clustering topics based on a set of documents. A Principal component analysis (PCA) or Non-negative matrix factorisation of the term document matrix is also frequently used (see latent semantic analysis or LSA for more info). However this might be overkill for your use case and these techniques are much harder to do. PMC and cosine-similarity have the absolute benefit of being dead simple to implement (cosine-similarity being a bit simpler, because the normalisation is easier) and thus are hard to get wrong.

# mvc-mini-profiler - MiniProfiler 找不到 jquery

> ID：10212725
> 
> 赞同：24
> 
> 时间：2012-04-18T15:28:10.070
> 
> 标签：mvc-mini-profiler

我一直在使用 MiniProfiler 来测量站点性能。当我从 1.9 版升级到 2.0 版时，它停止了工作。我将命名空间从 MvcMiniProfiler 更改为 StackExchange.Profiling。但是当我加载页面时，提琴手显示以下请求出现 404 错误：

GET /local/mini-profiler-resources/jquery.1.7.1.js?v=tNlJPuyuHLy/d5LQjyDuRbWKa0weCpmO3xkO6MH4TtA= HTTP/1.1

这可以防止结果在页面中呈现。

为了让 1.9 版的 MiniProfiler 工作，我必须在 Web.Config 文件中有以下条目（如[本文](https://stackoverflow.com/questions/7771911/mini-profiler-does-not-render-scripts)所述）：

```
 <system.webServer>
    <handlers>
      <add name="UrlRoutingModule1" path="mini-profiler*.js" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="UrlRoutingModule2" path="mini-profiler*.css" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="UrlRoutingModule3" path="mini-profiler*.tmpl" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
    </handlers>
  </system.webServer> 
```

我试图让 MiniProfiler 2.0 与配置文件中包含的那些一起运行，并且将它们排除在外，但这两种方法都不起作用。

这是在我的 IIS Express 开发机器上运行的。

我的应用程序是使用表单安全性的 WebForms 应用程序。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-15T04:06:48.823

It looks like this is a common problem, just add this to the web.config and it should be fine

[Running MiniProfiler with runAllManagedModulesForAllRequests set to false](https://stackoverflow.com/questions/10304611/running-miniprofiler-with-runallmanagedmodulesforallrequests-set-to-false)

```
<system.webServer>
...
  <handlers>
    <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
  </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T02:30:22.350

我最终要做的是在我的服务器上创建一个名为 mini-profiler-resources 的文件夹，然后将 StackExchange.Profiling/UI 中的所有文件复制到其中。不知道为什么这有效。我猜我缺少一些服务器设置，因为我只需要在生产系统上执行此操作。开箱即用，一切正常，可用于开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-14T04:59:31.083

for me its start working when I write following code

```
 protected void Application_EndRequest()
        {
            MiniProfiler.Stop();
        } 
```

instead of

```
 protected void Application_End(object sender, EventArgs e)
        {
            //  Code that runs on application shutdown
        MiniProfiler.Stop();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T09:12:31.760

`aspnet_regiis -i`尝试通过从 Windows\Microsoft.NET 目录下的相应 .NET Framework 文件夹运行来重新注册 ASP.NET 。我有类似的问题，通过重新注册 ASP.NET 处理程序得到了解决。

我想我在安装 .NET Framework 后在 IIS 中安装静态文件服务功能后遇到了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T09:59:01.693

To Fix this i had to change the DefaultAppPool from Classic to Integrated.

This fixed the issue.

Also since i am using MVC4, i had to download the sources of MiniProfiler and compile them with the MVC4 libraries.

# animation - translate3d 在 chrome 中正常工作，但在其他浏览器中不能正常工作

> ID：10212728
> 
> 赞同：1
> 
> 时间：2012-04-18T15:28:16.463
> 
> 标签：animation, css, 3d

**这是我的演示：http:** [//jsfiddle.net/Gf9Bn/5/](http://jsfiddle.net/Gf9Bn/5/)

从我的演示中，它在 chrome 中运行良好，但在 Firefox 和其他浏览器中，它的显示就像普通视图一样。各位大侠，如果你知道这个地方，请把它拍出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T22:18:14.517

您在 Firefox 中的透视值错误：透视（200）应该是透视（200px）。

即使 W3C CSS 3D 转换模块级别 3 未指定 | 作为值， px 在 Firefox 中是必需的，但计算为数字。

检查这个版本：http: [//jsfiddle.net/Gf9Bn/20/](http://jsfiddle.net/Gf9Bn/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:45:43.383

阅读兼容性表以获得对 CSS3 的支持。

[http://caniuse.com/#feat=transforms3d](http://caniuse.com/#feat=transforms3d)

# ios - 如何在 iOS 设备上获取未经授权的 M4P 文件？

> ID：10212733
> 
> 赞同：2
> 
> 时间：2012-04-18T15:28:41.063
> 
> 标签：ios, itunes, drm

我们正在尝试重现一个错误，该错误会导致我们的应用程序在访问 M4P 文件（MPEG-4 保护文件，旧 iTunes 时代的 DRM 保护文件。嗯，是的。）时崩溃。

我们的一位野外测试人员向我们发送了这样一个罪魁祸首文件，现在我们正试图将其放到测试设备上以进行调试，但问题是：iTunes*坚持*使用授权文件购买它的 AppleID，否则它不会将其同步到设备。我们没有用户的 AppleID 详细信息，我认为向他索取这些信息也不合适。

有没有其他方法可以将该文件放到设备上？我宁愿不越狱设备，但愿意考虑该选项。

# perl - 在 HTTP 请求中使用证书时如何提供私有密码？

> ID：10212734
> 
> 赞同：0
> 
> 时间：2012-04-18T15:28:43.093
> 
> 标签：perl

我有一个私有证书，用于向外部网络服务器进行身份验证。我想自动下载网页，但每当它发出请求时，它都需要我的私钥密码。有没有办法通过脚本以某种方式提供这个密钥（在环境变量中或以其他方式）？一个小警告：这需要在 Windows 机器上运行，所以我不能使用 Expect 模块。

这是我到目前为止的代码：

```
use strict;
use warnings;
use LWP::UserAgent;

my $output_doc = $ARGV[0];
my $url = $ARGV[1];
$ENV{HTTPS_PROXY} = 'http://1.2.3.4:3128';
$ENV{PERL_NET_HTTPS_SSL_SOCKET_CLASS} = "Net::SSL";
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0; 
$ENV{HTTPS_DEBUG} = 1;
$ENV{HTTPS_CERT_FILE} = 'test_cert/cert.pem';
$ENV{HTTPS_KEY_FILE} = 'test_cert/private.key';

my $ua = LWP::UserAgent->new;
my $req = HTTP::Request->new(GET => "$url");
my $response = $ua->request($req);

open OUT, ">$output_doc";
print OUT $response->as_string;
close OUT; 
```

到目前为止，它工作正常。它会拉下我在第二个参数中提供的网页，但是对于每个页面，我都必须输入我的 PEM 密码。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:12:35.363

[从密钥中删除密码。](http://www.openssl.org/docs/apps/rsa.html)

```
openssl rsa -in private.key -out private-nopass.key 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:44:00.073

I am afraid you cannot supply passphrase for LWP::UserAgent, just **remove** it **from** certificate **key**.

You may try the following:

```
...
my $ua = LWP::UserAgent->new; 
my $req = HTTP::Request->new(GET => "$url"); 

$IO::Socket::SSL::GLOBAL_CONTEXT_ARGS->{SSL_passwd_cb} = sub { 
  # get passphrase
  return $passphrase 
};

my $response = $ua->request($req);
... 
```

* * *

Optionally you may consider to use:

```
# Client PKCS12 cert support 
$ENV{HTTPS_PKCS12_FILE}     = 'certs/pkcs12.pkcs12'; 
$ENV{HTTPS_PKCS12_PASSWORD} = 'PKCS12_PASSWORD'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T19:29:53.943

我最终创建了 PKCS12 格式的密钥。

```
# Client PKCS12 cert support
$ENV{HTTPS_PKCS12_FILE}     = 'certs/pkcs12.pkcs12';
$ENV{HTTPS_PKCS12_PASSWORD} = 'PKCS12_PASSWORD'; 
```

这没有问题。

# cocos2d-iphone - 更改纹理后如何更改 CCSprite 的尺寸？

> ID：10212735
> 
> 赞同：3
> 
> 时间：2012-04-18T15:28:44.337
> 
> 标签：cocos2d-iphone

我的 iOS 项目中有一段代码通过 setTexture 交换 CCSprite 的纹理，如下所示：

```
[sprite setTexture:[[CCTextureCache sharedTextureCache] addImage:@"Circle.png"]]; 
```

但是，CCSprite 的纹理在交换前后的尺寸不同，因此 Circle.png 纹理被裁剪；停留在原始纹理的大小（因为圆圈更大）。

交换纹理后如何调整大小？

（[相关，但无助于解决此问题](https://stackoverflow.com/questions/8252330/ios-and-cocos2d-changing-ccsprites-image-and-new-dimensions-fail)）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T15:28:08.987

试试这个：

```
CCTexture2D* texture = [[CCTextureCache sharedTextureCache] addImage:@"Circle.png"];

    if (texture)
    {
                // Get the size of the new texture:
        CGSize size = [texture contentSize];

        [sprite setTexture:texture];
                // use the size of the new texture:
        [sprite setTextureRect:CGRectMake(0.0f, 0.0f, size.width,size.height)];
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:55:01.723

您可以使用 spriteWithFile 构造函数重新创建精灵。尺寸将自动设置

# iphone - iphone 内的 Youtube 页面未正确显示

> ID：10212739
> 
> 赞同：0
> 
> 时间：2012-04-18T15:29:14.747
> 
> 标签：iphone, youtube

我有以下问题。在视图控制器中进行此调用时：

[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@" [http://www.youtube.com/user/mc1975mc1/videos?sort=dd&view=0&page=1](http://www.youtube.com/user/mc1975mc1/videos?sort=dd&view=0&page=1) "]]];

我在模拟器中得到了正确的结果。请参阅以下屏幕截图：

![内部模拟器](../Images/c2800cce753fcb83072c580245438aa9.png)

但是当在设备上运行时，我开始分离叠加层。请看以下图片：

第一个是左侧部分，第二个是开始滚动时，最后一个是第二个部分。

![在此处输入图像描述](../Images/948004634f12254f0158e62664114562.png) ![在此处输入图像描述](../Images/31903c5349cce76679c3da050ec7566d.png) ![在此处输入图像描述](../Images/b1112966207e4edbbcf962cfd76a5b30.png)

它是一个错误吗？还是有办法解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:35:06.670

好的。

这绝对是 Apple 的错误。

我用旧的 3gs 手机测试了代码，它工作得很好（上面模拟器的图片）。

我会向苹果报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:31:18.183

我下载了新的 iOS 6，问题解决了。

没有人和我说话，苹果也没有任何帮助。但最后它已经解决了。

# coldfusion - ColdFusion 和流式 API...（即 Twitter）

> ID：10212741
> 
> 赞同：4
> 
> 时间：2012-04-18T15:29:26.337
> 
> 标签：coldfusion, http-streaming, cfhttp

有没有人幸运地使用 ColdFusion 作为通过流 API 收集数据的一种方式？

即 - [https://dev.twitter.com/docs/streaming-api](https://dev.twitter.com/docs/streaming-api)

我知道最好的选择是使用一个应用程序，该应用程序实际上位于监视这些门户的服务器上。只是好奇是否有人使用 CF 做过任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:49:56.543

Aaron Longnion 使用 CF9 构建了 refynr.com。这是一项根据提供的标准收集用户的 Twitter 流的服务。我想他会像你描述的那样情绪低落。

但是，我会研究 ColdFusion 10 中内置的新 Web 套接字功能，看看这是否使使用流 API 变得更容易。

[http://labs.adobe.com/technologies/coldfusion10/](http://labs.adobe.com/technologies/coldfusion10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:15:10.847

[如果您了解一点 Java，使用Twitter4J](http://twitter4j.org/en/code-examples.html#streaming)并为您的 CF 应用程序构建一个事件网关以使用流可能不会太难。

如果你想走 web socket 路线，请参阅：[Twitter + HTML5 webSocket API](https://stackoverflow.com/questions/5313736/twitter-html5-websocket-api)

# ios - iOS应用程序中的代码签名错误

> ID：10212743
> 
> 赞同：0
> 
> 时间：2012-04-18T15:29:28.490
> 
> 标签：ios, xcode, code-signing, code-signing-certificate

我有一个 ios 应用程序，当我尝试在设备上构建它时，XCode 向我显示此错误：

```
Code Sign error: The identity 'iPhone Developer' doesn't match any valid, non-expired certificate/private key pair in the default keychain 
```

有任何想法吗？是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:33:03.703

除了配置文件，您还需要从配置文件创建者的钥匙串导出的私钥/证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:43:12.863

I just delete all profiles from Key-chain. And the create new profiles in developer.apple.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:35:39.280

看[这里](https://developer.apple.com/ios/manage/distribution/index.action)

您必须购买开发证书才能在您的设备上运行您的开发。

当然，您可以免费使用模拟器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:36:44.497

要获得有效证书 - 您需要为此应用程序颁发开发证书的用户从他的 Mac 物理导出证书文件。这意味着打开钥匙串访问，右键单击证书并选择“导出...”。然后，当您获得此证书时，只需打开它，它就会添加到您的链中。

# android - 将事件从 ScrollView 传播到其在 Android 中的容器

> ID：10212746
> 
> 赞同：1
> 
> 时间：2012-04-18T15:29:51.187
> 
> 标签：android, scrollview, touch-event

我正面临一个让我头疼的问题。基本上我有一个 FrameLayout 可以识别双击并包含一个垂直的 ScrollView。问题是当我双击 ScrollView 时，事件不会传播到 FrameLayout。如果 FrameLayout 为空，则可以正确识别双击。

我已经尝试将 ScrollView 子类化并从 onTouchEvent 方法返回 false：双击事件被 FrameLayout 识别，但 ScrollView 不再滚动。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:40:30.443

通过覆盖`ViewGroup.onInterceptTouchEvent(MotionEvent ev)`来拦截触摸，`FrameLayout`如果事件被处理则返回 true，这样它就不会被传递，如果你想要`ScrollView`处理事件，则返回 false。

# c# - 基于文件名的Datalist显示项目

> ID：10212750
> 
> 赞同：0
> 
> 时间：2012-04-18T15:29:59.127
> 
> 标签：c#, asp.net, datalist

`Data list`这个问题与我几天前发布的类似问题有关。我有一个显示类别的数据列表，然后是类别中的文档。需要发生的是每个类别下的文档根据文件名中的一些数字按顺序显示。文档的格式类似于“001-filename.pdf”、“002-filename.pdf”...“00x-filename.pdf”。我可以将第一个破折号用作某种“拆分”功能，然后抓取“001”等数字以使排序正常工作。我认为这可以在任`itemdatabound`一或 sql 语法中完成。我在这里发布相关代码。关于如何使它起作用的任何想法？可能有多个文档具有共享编号前缀：“001-filename.pdf”、“001-filenameversion2.pdf”等。

## ASPX：

```
<asp:DataList ID="DataList1" runat="server" RepeatDirection="Vertical" DataKeyField="docid"
    EnableViewState="True" OnItemDataBound="DataList1_ItemDataBound">
    <ItemTemplate>
        <table cellpadding="0" cellspacing="0" id="tbl_data">
            <tr runat="server" id="tr_category">
                <td>
                    <asp:Label ID="lblHeader" runat="server" Font-Bold="True" Text='<%# Eval("categoryname") %>'
                        Font-Underline="True"></asp:Label>
                    <asp:Label runat="server" ID="lbl_cb_all">Select All
                        <asp:CheckBox runat="server" OnCheckedChanged="CheckAllChanged" AutoPostBack="true"
                            ID="cb_selectall" />
                    </asp:Label>
                    <asp:HiddenField ID="HiddenCatID" runat="server" Value='<%# Eval("CatID") %>' />
                    <asp:HiddenField ID="HiddenDocID" runat="server" Value='<%# Eval("docid") %>' />
                </td>
            </tr>
            <tr runat="server" id="tr_data">
                <td>
                    <asp:CheckBox runat="server" ID="cb_docid" Value='<%# Eval("docid") %>' OnCheckedChanged="displayselectedinit"
                        AutoPostBack="true" />
                    <asp:HyperLink ID="hpl_docfileencr" Text='<%# Eval("docfileencr") %>' NavigateUrl='<%# "~/PDFEncr/" + DataBinder.Eval(Container.DataItem, "docfileencr") %>'
                        Target="_blank" runat="server" />
                    <br />
                </td>
            </tr>
        </table>
    </ItemTemplate>
</asp:DataList> 
```

## C#代码隐藏：

```
sqlsyntax = @"SELECT  dbo.projectsdocuments.docfileencr,dbo.categories.catid, dbo.categories.categoryname, dbo.projectsdocuments.docid
              FROM dbo.Projects INNER JOIN dbo.projectsdocuments ON (dbo.Projects.projectid = dbo.projectsdocuments.projectid)
              INNER JOIN dbo.categories ON (dbo.projectsdocuments.categoryid = dbo.categories.catid)
              WHERE  Projects.projectid = " + projectid + " ORDER BY dbo.categories.sortorder ASC";

protected void DataList1_ItemDataBound(Object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        var row = (DataRowView)e.Item.DataItem;
        var view = row.DataView;
        var lastRow = e.Item.ItemIndex == 0 ? null : view[e.Item.ItemIndex - 1];
        var tr_category = (System.Web.UI.HtmlControls.HtmlTableRow)e.Item.FindControl("tr_category");
        var sameCategory = lastRow != null && (int)row["catid"] == (int)lastRow["catid"];
        tr_category.Visible = !sameCategory;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:08:42.357

更改您的 ORDER BY 以包括这两列。

```
SELECT  
    dbo.projectsdocuments.docfileencr,
    dbo.categories.catid, 
    dbo.categories.categoryname, 
    dbo.projectsdocuments.docid
FROM dbo.Projects 
INNER JOIN dbo.projectsdocuments 
    ON (dbo.Projects.projectid = dbo.projectsdocuments.projectid)
INNER JOIN dbo.categories 
    ON (dbo.projectsdocuments.categoryid = dbo.categories.catid)
WHERE  Projects.projectid = " + projectid + "
ORDER BY dbo.categories.sortorder, dbo.projectsdocuments.docfileencr 
```

优先顺序从左到右，默认为“ASCENDING”，但您可以通过直接在其后添加“ASC 或 DESC”来更改特定列的排序。

** 重要的提示 **

您的代码容易受到**SQL 注入**的影响，因为您正在执行字符串连接。如果您对此感到担忧，请将 SQL 语句更改为使用您通过命令参数分配的命名参数（参见下面的示例）。

**第 1 步：** 将内联字符串参数更改为命名参数“@projectid”。

```
SELECT  
    dbo.projectsdocuments.docfileencr,
    dbo.categories.catid, 
    dbo.categories.categoryname, 
    dbo.projectsdocuments.docid
FROM dbo.Projects 
INNER JOIN dbo.projectsdocuments 
    ON (dbo.Projects.projectid = dbo.projectsdocuments.projectid)
INNER JOIN dbo.categories 
    ON (dbo.projectsdocuments.categoryid = dbo.categories.catid)
 WHERE  Projects.projectid = @projectid
 ORDER BY dbo.categories.sortorder, dbo.projectsdocuments.docfileencr 
```

**第 2 步：** 内联分配参数（示例代码）

```
using(SqlConnection conn = new SqlConnection(connString))
{
    conn.Open();

    SqlCommand command = new SqlCommand(sql, conn);
    command.CommandType = CommandType.Text;

    // Assign the value projectid to the parameter @projectid
    command.Parameters.Add(new SqlParameter("@projectid", projectid));

    // Execute The Command (fill dataset, create datareader, etc...)
    SqlDataReader reader = command.ExecuteReader();
} 
```

# php - How can I use PHP's various XML libraries to get DOM-like functionality and avoid DoS vulnerabilities, like Billion Laughs or Quadratic Blowup?

> ID：10212752
> 
> 赞同：12
> 
> 时间：2012-04-18T15:30:02.147
> 
> 标签：php, security, xml-parsing, doctype, denial-of-service

I'm writing a web application that has an XML API in PHP, and I'm worried about three specific vulnerabilities, all related to inline DOCTYPE definitions: local file inclusion, quadratic entity blowup, and exponential entity blowup. I'd love to use PHP's (5.3) built in libraries, but I want to make sure I'm not susceptible to these.

I found I can eliminate LFI with libxml_disable_entity_loader, but this doesn't help with inline ENTITY declarations, including entities that refer to other entities.

The SimpleXML library (SimpleXMLElement, simplexml_load_string, etc) is great because it's a DOM parser and all my inputs are fairly small; it allows me to use xpath and manipulate the DOM pretty easily. I can't figure how to stop ENTITY declarations. (I would be happy to disable all inline DOCTYPE definitions, if possible.)

The XML Parser library (xml_parser_create, xml_set_element_handler, etc) allows me to set the default handler, which includes entities, with xml_set_default_handler. I can hack it so for unrecognized entities it simply returns the original string (ie, "&ent;"). This library is frustrating though: because it is a SAX parser I have to write a bunch of handlers (as many as 9..).

So is it possible to use the built in libraries, get DOM-like objects out, and protect myself from these various DoS vulnerabilities? thanks

This page describes the three vulnerabilities, and provides a solution...if only I were using .NET: [http://msdn.microsoft.com/en-us/magazine/ee335713.aspx](http://msdn.microsoft.com/en-us/magazine/ee335713.aspx)

UPDATE:

```
<?php
$s = <<<EOF
<?xml version="1.0?>
<!DOCTYPE data [
<!ENTITY en "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa....">
]>
<data>&en;&en;&en;&en;&en;&en;&en;&en;&en;&en;&en;&en;.....</data>
EOF;
$doc = new DOMDocument();
$doc->loadXML($s);
var_dump($d->lastChild->nodeValue);
?> 
```

I tried `loadXML($s, LIBXML_NOENT);` as well. In both cases I end up dumping 300+ MB. Is there something I'm still missing?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T21:46:00.710

> *Note:* If you create test-cases with files that contain the XML chunks in the following, expect that editors might be prone to these attacks as well and might freeze/crash.

## Billion laugh

```
<?xml version="1.0"?>
<!DOCTYPE lolz [
  <!ENTITY lol "lol">
  <!ENTITY lol1 "&lol;&lol;&lol;&lol;&lol;&lol;&lol;&lol;&lol;&lol;">
  <!ENTITY lol2 "&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;">
  <!ENTITY lol3 "&lol2;&lol2;&lol2;&lol2;&lol2;&lol2;&lol2;&lol2;&lol2;&lol2;">
  <!ENTITY lol4 "&lol3;&lol3;&lol3;&lol3;&lol3;&lol3;&lol3;&lol3;&lol3;&lol3;">
  <!ENTITY lol5 "&lol4;&lol4;&lol4;&lol4;&lol4;&lol4;&lol4;&lol4;&lol4;&lol4;">
  <!ENTITY lol6 "&lol5;&lol5;&lol5;&lol5;&lol5;&lol5;&lol5;&lol5;&lol5;&lol5;">
  <!ENTITY lol7 "&lol6;&lol6;&lol6;&lol6;&lol6;&lol6;&lol6;&lol6;&lol6;&lol6;">
  <!ENTITY lol8 "&lol7;&lol7;&lol7;&lol7;&lol7;&lol7;&lol7;&lol7;&lol7;&lol7;">
  <!ENTITY lol9 "&lol8;&lol8;&lol8;&lol8;&lol8;&lol8;&lol8;&lol8;&lol8;&lol8;">
]>
<lolz>&lol9;</lolz> 
```

When loading:

> FATAL: #89: Detected an entity reference loop 1:7
> ... (plus six times the same = seven times total with above)
> FATAL: #89: Detected an entity reference loop 14:13

Result:

```
<?xml version="1.0"?> 
```

Memory usage is light, the peak not touched by `DOMDocument`. As this example shows 7 fatal errors, one can conclude and indeed it is so that this loads w/o errors:

```
<?xml version="1.0"?>
<!DOCTYPE lolz [
  <!ENTITY lol "lol">
  <!ENTITY lol1 "&lol;&lol;&lol;&lol;&lol;&lol;&lol;&lol;&lol;&lol;">
  <!ENTITY lol2 "&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;&lol1;">
]>
<lolz>&lol2;</lolz> 
```

As entity substitution is not in effect and this work, let's try with

## Quadratic Blowup

That is this one here, shortened for your viewing pleasure (my variants are about 27/11kb):

```
<?xml version="1.0"?>
<!DOCTYPE kaboom [
  <!ENTITY a "aaaaaaaaaaaaaaaaaa...">
]>
<kaboom>&a;&a;&a;&a;&a;&a;&a;&a;&a;...</kaboom> 
```

If you use `$doc->loadXML($src, LIBXML_NOENT);` this does work as an attack, while I write this, the script is still loading ... . So this actually takes some time to load and consumes memory. Something you can play with your own. W/o `LIBXML_NOENT` it works flawlessly and fast.

But there is a caveat, if you obtain the `nodeValue` of a tag for example, you will get the entities expanded even if you don't use that loading flag.

**A workaround for this issue is to remove the DocumentType node from the document.** Note the following code:

```
$doc = new DOMDocument();
$doc->loadXML($s); // where $s is a Quadratic attack xml string above.
// now remove the doctype node
foreach ($doc->childNodes as $child) {
    if ($child->nodeType===XML_DOCUMENT_TYPE_NODE) {
        $doc->removeChild($child);
        break;
    }
}
// Now the following is true:
assert($doc->doctype===NULL);
assert($doc->lastChild->nodeValue==='...');
// Note that entities remain unexpanded in the output XML
// This is not so good since this makes the XML invalid.
// Better is a manual walk through all nodes looking for XML_ENTITY_NODE
assert($doc->saveXML()==="<?xml version="1.0"?>\n<kaboom>&a;&a;&a;&a;&a;&a;&a;&a;&a;...</kaboom>\n");
// however, canonicalization will produce warnings because it must resolve entities
assert($doc->C14N()===False);
// Warning will be like:
//    PHP Warning:  DOMNode::C14N(): Node XML_ENTITY_REF_NODE is invalid here 
```

So while this workaround will prevent an XML document from consuming resources in a DoS, it makes it easy to generate invalid XML.

Some figures (I reduced the file-size otherwise it takes too long) ([code](https://gist.github.com/2416846)):

```
LIBXML_NOENT disabled                                          LIBXML_NOENT enabled

Mem: 356 184 (Peak: 435 464)                                   Mem: 356 280 (Peak: 435 464)                             
Loaded file quadratic-blowup-2.xml into string.                Loaded file quadratic-blowup-2.xml into string.          
Mem: 368 400 (Peak: 435 464)                                   Mem: 368 496 (Peak: 435 464)                             
DOMDocument loaded XML 11 881 bytes in 0.001368 secs.          DOMDocument loaded XML 11 881 bytes in 15.993627 secs.   
Mem: 369 088 (Peak: 435 464)                                   Mem: 369 184 (Peak: 435 464)                             
Removed load string.                                           Removed load string.                                     
Mem: 357 112 (Peak: 435 464)                                   Mem: 357 208 (Peak: 435 464)                             
Got XML (saveXML()), length: 11 880                            Got XML (saveXML()), length: 11 165 132                  
Got Text (nodeValue), length: 11 160 314; 11.060893 secs.      Got Text (nodeValue), length: 11 160 314; 0.025360 secs. 
Mem: 11 517 776 (Peak: 11 532 016)                             Mem: 11 517 872 (Peak: 22 685 360) 
```

I have not made up my mind so far about protection strategies but now know that loading the billion laugh into [PHPStorm will freeze it for example](http://youtrack.jetbrains.com/issue/WI-10858) and I stopped testing the later as I didn't wanted to freeze it while writing this.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T15:55:16.297

You should actually test your application with sample documents and see if it is vulnerable.

The underlying library for php's xml libraries is libxml2\. It's behavior is controlled from php mostly through [optional constants](http://www.php.net/manual/en/libxml.constants.php) which most libraries will accept as an argument when loading the xml.

You can determine your php's libxml2 version with `echo LIBXML_DOTTED_VERSION;`

In later versions (after 2.6), libxml2 contains entity substitution limits designed to prevent both exponential and quadratic attacks. These can be overridden with the `LIBXML_PARSEHUGE` option.

By default libxml2 does not load a dtd, add default attributes, or perform entity substitution. So the default behavior is to ignore dtds.

You can turn parts of this on like so:

*   `LIBXML_DTDLOAD` will load dtds.
*   `LIBXML_NONET` will disable network-loading of dtds. You should always have this on and use libxml's dtd catalog to load dtds.
*   `LIBXML_DTDVALID` will perform dtd validation while parsing.
*   `LIBXML_NOENT` will perform entity substitution.
*   `LIBXML_DTDATTR` will add default attributes.

So using the default settings PHP/libxml2 are *probably* not vulnerable to any of these issues, but the only way to know for sure is to test.

# java - 填充 WS-TX 服务的 Glassfish server.log 不可用

> ID：10212753
> 
> 赞同：1
> 
> 时间：2012-04-18T15:30:08.560
> 
> 标签：java, glassfish

我的 glassfish server.log 不断被填满

```
[#|2012-04-18T16:17:15.732+0100|WARNING|glassfish3.0.1|com.sun.xml.ws.wstx.wscoord|_ThreadID=20;_ThreadName=Thread-1;|WSTX-CLIENT-1001: WS-TX service is not available. Unable to flow a WS-Atomic Transaction Context for web service invocation of operation '{http://localhost/}checkSession' from current container|#] 
```

我的应用程序都没有使用它，而且在日志文件中过滤它非常烦人。

有谁知道如何以任何方式禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:07:56.387

我知道这个线程较旧，但这是响应。

将以下行添加到您的**domain/config/logging.properties**文件中：

```
com.sun.xml.ws.wstx.wscoord.level=SEVERE 
```

您可以使用任何类日志执行此操作，只需获取名称类（`com.sun.xml.ws.wstx.wscoord`在本例中）并添加`.level=LOG_LEVEL`您想要的。

# git - 无法弄清楚 git 子模块的行为

> ID：10212755
> 
> 赞同：0
> 
> 时间：2012-04-18T15:30:09.240
> 
> 标签：git, github, git-submodules

我使用了一个名为 python-magic 的库来查找我的 django 项目中的文件类型。然而，我构建代码的方式我更喜欢进行相对导入。然而，图书馆似乎没有`__init__.py`允许相对导入的文件，所以我做了一个 fork 并添加了一个。但是，当我在我的服务器上提取代码时，即使 .gitmodules 将我的 fork 的 url url = git://github.com/dusual/python-magic.git 作为条目，它也只会拾取代码直到索引 d5fba 而不是 6a5581a 提交ID ？请向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:05:20.380

添加 git 子模块时，您添加的是对子模块项目的特定提交的引用。我怀疑发生的事情是您`git submodule add`在更改分叉回购之前所做的。在您进行任何更改之前，您的子模块链接仍然指向提交。

要更新此内容，请导航到您的`python-magic`目录并执行

```
 git pull origin master 
```

（或者如果不同的话，用 origin 和 master 代替你的情况。）

如果您然后返回主项目的根目录并执行

```
git status 
```

你应该看到类似的东西

```
-Subproject commit cb25e84cce2845cf18146223e551f47f33a6ee1b
+Subproject commit 75ef943c355e0f53fb6ee48f1117ba8dfdfe3f58 
```

对于您的子模块，它让您知道它现在指向较新的提交。

# c# - 如何从使用 C# 代码渲染到网页的 JVM 中检索数据？

> ID：10212757
> 
> 赞同：0
> 
> 时间：2012-04-18T15:30:14.150
> 
> 标签：c#, bots

**语境：**

我正在尝试编写一个“机器人”来[对该站点](http://www.brasiltelecom.com.br/portal/ConsultarAssinantes102OnlinePFPB.do?acao=onVisualizar)进行查询。问题之一是，结果显示在一个没有出现在 HTML 中的“框架”中，在我看来它就像一个“Java 虚拟机”或其他什么。

**问题：**

主要问题（将验证码识别放在一边，因为我们之前已经做过）是我找不到在网站上“检索/提取”查询结果数据的方法。

我已经手动爬取了 HTML，试图至少找到那里发生的事情的线索，但似乎我没有足够的专业知识来弄清楚结果是如何显示的。

Fiddler 表明，对虚拟机的请求返回一种“加密”信息，我不知道如何“解密”。

```
 Fiddler Request (jar) : GET http://www.brasiltelecom.com.br/portal/pf/102online/Applet102PConv.jar 

 Fiddler Request with encripted Return : GET http://www.brasiltelecom.com.br/portal/Consultar102OnlineServlet?nome=9E10EB3AEF707099&endr=B48A41A90FCA933A&bair=B48A41A90FCA933A&locl=4A8DEF5F7E4C714B&tipo=1&secure=334265 
```

翻译的第二个请求的参数：

```
nome = name
endr = Address
bair = neighborhood
locl = location
Tipo = always 1
secure = captcha 
```

只是为了更好地理解上下文。

**工具：**

目前，我正在使用 Visual Studio 2010 (IDE)、Fiddler (Web 调试器) 和内部库 (dll) 来简化流程。

**问题：**

如何使用 C# 应用程序以编程方式提取屏幕上显示的信息？

有什么方法可以“解密”网络请求返回的信息，或者至少找到服务使用的“密钥”或“方法”作为开始解密的第一步？

在此先感谢，我希望我已经说清楚了，如果我能做些什么来改善这个问题，请告诉我。

和平 ！

# java - 单元测试和日志记录

> ID：10212761
> 
> 赞同：0
> 
> 时间：2012-04-18T15:30:22.140
> 
> 标签：java, junit, mocking

我有几个类：*StateProcessor*和*State*。我想为*StateProcessor.process(State)*方法编写一个测试。此方法的逻辑非常简单，但它包含大量日志消息。

```
logger.info(state.getSourse().toString());
if (state.getTarget() == Target.A) {
 logger.info(state.getCreationTime());
 service.doSmth(state);
} else {
 logger.info(state.getTagret().getName());
 service.doOtherStff(state);
} 
```

我不想将真实的*State*实例传递给*process*方法，因为这个类真的很复杂，而且构建它需要很多行代码。所以，我想传递用 Mockito 创建的模拟对象。根据主要逻辑，我只需要模拟 getTarget() 方法。但是在*state.getTagret().getName()*和 *state.getSourse().toString()*处的 NPE 执行将失败。但我不喜欢嘲笑所有这些方法的想法！它们仅用于记录。此外，我不想每次添加一些日志消息时都修复我的测试。

日志记录在那里非常有用，所以我根本不想删除它。但是嘲笑只用于记录的方法看起来很奇怪。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:03:41.593

考虑模拟[DEEP](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#RETURNS_DEEP_STUBS)。这将导致每个方法调用返回一个模拟而不是`null`并阻止 NPE。

```
 Foo mock = mock(Foo.class, RETURNS_DEEP_STUBS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:17:27.317

你所拥有的是一个经典[的 Demeter 违反定律](http://en.wikipedia.org/wiki/Law_of_Demeter)，这是一个用于模拟问题的教科书案例。

作为替代方案，考虑将整个`State`对象记录在一个地方——例如在“if”块之前——并覆盖 toString() 方法以输出您需要查看的所有内容。然后，您将不需要取消引用每个字段并模拟每个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:52:33.240

您可以将所有日志记录调用包含在一个`if (!test) {}`块中并注入 test 属性。

或者您可以将它们封装在一个`if (logger.isInfoEnabled()) {}`块中并配置禁用信息的日志记录，或者注入一个返回 false 的模拟记录器`isInfoEnabled()`。

但是日志记录是代码的关键部分。因此，如果您真的想测试它不会在生产中爆炸，您应该在生产代码中测试空值，或者证明这些属性可能永远不会返回空值，并注入一个也不返回空值的模拟。

PS：你真的打算在你的代码`tagret`中保留命名属性吗？`sourse`

# ruby - 与 Rails / Cucumber / Capybara 失去会话

> ID：10212765
> 
> 赞同：2
> 
> 时间：2012-04-18T15:30:32.420
> 
> 标签：ruby, ruby-on-rails-3, cucumber, capybara

我有一个带有以下步骤的 Cucumber 场景：

```
Given /^I have logged in$/ do
  visit root_url
  fill_in 'username', with: 'testuser'
  fill_in 'password', with: 'testpass'
  click_button 'Log In'
end 
```

如果我运行我的场景并跟踪我的 Rails 日志，我可以确认 1) 登录页面加载，2) 提交登录详细信息时，它们被接受并且所需的用户信息正确存储在 Rails 的`session`对象中，然后 3 ）会话数据在 302 重定向到登录后页面后丢失（因此为 403）：

```
Started GET "/" for 127.0.0.1 at 2012-04-18 16:09:41 +0100
  Processing by HomeController#index as HTML
Rendered home/index.html.erb within layouts/application (4.6ms)
Completed 200 OK in 9ms (Views: 8.3ms)

Started POST "/" for 127.0.0.1 at 2012-04-18 16:09:41 +0100
  Processing by HomeController#index as HTML
  Parameters: {"utf8"=>"✓", "is_submitted"=>"true", "username"=>"testuser", "password"=>"[FILTERED]", "commit"=>"Log In"}
DEBUG - login success
DEBUG - session: {"UserId"=>"19fd75c8-0e80-4832-94af-6a93ee74bf46", "Username"=>"testuser", "Password"=>"d68579bfdac2321d05f19042d8dbc49b9dd611c8", "Name"=>"Active User", "Active"=>true}
Redirected to http://www.example.com/app
Completed 302 Found in 3ms

Started GET "/app" for 127.0.0.1 at 2012-04-18 16:09:41 +0100
  Processing by HomeController#app as HTML
DEBUG - session: {}
Redirected to http://www.example.com/
Completed 403 Forbidden in 1ms 
```

正如您在第三个请求中看到的那样，会话对象是空的（即使我们知道它在最后一个操作中已正确设置）。似乎会话数据不会在重定向后的请求中保留，但我不知道为什么（我已经花了几个小时！）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:08:34.987

所以这是一个糟糕的......如果我的应用程序控制器中的身份验证逻辑这样做（nb`user`是一个哈希），它就*不起作用*......：

```
session.merge! user 
```

但这*确实*有效：

```
session['UserId'] = user['UserId']
session.merge! user 
```

事实上，这也有效：

```
session[:make_sessions_work_in_capybara_ffs] = true
session.merge! user 
```

因此，似乎在会话上设置一个键（任何键）以某种方式使 Capybara 识别/保留会话 cookie。由于某些原因。

# php - PHP：get_call_class() 返回意外值

> ID：10212768
> 
> 赞同：1
> 
> 时间：2012-04-18T15:30:36.367
> 
> 标签：php, static, self

使用 PHP 5.3+ 并具有等于以下内容的内容，我得到了“C”而不是“B”的输出：

```
class A
{
    public static function doSomething()
    {
        echo get_called_class();
    }
}

class B extends A
{
    public static function doMore()
    {
        self::doSomething();
    }
}

class C extends B {}

C::doMore(); 
```

如果我使用了 static::doSomething() 那将是预期的结果，但是当使用 self::doSomething() 我希望这个方法在 B 的范围内被调用，因为它是定义“self”而不是后期静态绑定。

这是如何解释的，如何在 doSomething() 方法中获得“B”？

提前致谢， JS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:07:19.347

这里的问题是[后期静态绑定](http://php.net/manual/en/language.oop5.late-static-bindings.php)。该`get_called_class()`函数将使用后期静态绑定来返回类名，`__CLASS__`如果使用调用，将使用后期静态绑定`static::`，但与`$this->`or一起使用时不使用`self::`。我不知道有一种方法可以让它返回`B`没有回声`B`而不是`A`. 如果您使用的是 PHP 5.4，这听起来像是对特征的理想使用。

例子：

```
class A
{   
    public static function doSomething()
    {   
        echo __CLASS__;
    }
}

class B extends A
{   
    public static function doMore()
    {   
        self::doSomething();
    }
}

class C extends B {}

C::doMore(); 
```

这将返回`A`而不是`C`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:32:43.093

覆盖方法doSomething，得到`B`

```
class C extends B
{
    public static function doMore()
    {
        B::doMore();
    }
} 
```

**`Tested`**

# android - Android 图库全屏模式

> ID：10212772
> 
> 赞同：-6
> 
> 时间：2012-04-18T15:31:02.907
> 
> 标签：android

Android Gallery 是否有全屏模式（我的意思是单击厨房的图像后，我将获得全屏画廊）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:53:27.773

Android 开源项目是您的朋友。您可以自己构建库存的 Android Gallery 应用程序并自己实现此功能。

玩得开心。

[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)

# ios - UIViewController，UITableView 子类化 - 我的解决方案感觉很脏

> ID：10212775
> 
> 赞同：0
> 
> 时间：2012-04-18T15:31:09.533
> 
> 标签：ios, uitableview

我的项目中有许多 UIViewControllers 实现了 UITableViewDataSource 和 UITableViewDelegate 协议。在 Interface Builder 中，我删除了 UIView 并将其替换为子类 UITableView。在我的子类 UITableView 中，我设置了一个自定义背景视图。

```
 @interface FFTableView : UITableView
    @end

    @implementation FFTableView

    - (id)initWithCoder:(NSCoder *)aDecoder {
        self = [super initWithCoder:aDecoder]; // Required. setFrame will be called during this method.

        self.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];;

        return self;
    }

    @end 
```

这一切都很好。我有六个左右的 UIViewControllers，它们都有 UITableViews 的子类，它们都绘制了我的背景图像。我的背景图像很暗，所以我需要绘制我的部分标题，以便它们可见。谷歌搜索我发现[如何更改分组类型 UITableView 中标题的字体颜色？](https://stackoverflow.com/questions/7105747/how-to-change-font-color-of-the-title-in-grouped-type-uitableview)我在我的子类中实现了 viewForHeaderInSection。

```
 -(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
    {
        ... 
```

我的 viewForHeaderInSection 没有被调用。当然，当我想了一会儿，这是有道理的。我的 UIViewControllers 是实现 UITableViewDataSource 和 UITableViewDelegate 的对象，当我将 viewForHeaderInSection 放入我的 UIViewControllers 之一时，它工作得很好。

但是，我有六个这样的 UIViewController，它们都属于不同的类，实现了不同的功能。所以我决定在我的子类 UIViewControllers 和 UIViewController 之间放置一个类。这样，设置节标题外观的通用代码将在一个位置，而不是在六个位置。

所以我写：

```
 @interface FFViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
    @end 
```

在这里我实现了viewForHeaderInSection：

```
 -(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
    {

        NSString *sectionTitle = [self tableView:tableView titleForHeaderInSection:section];
        if (sectionTitle == nil) {
            return nil;
        }
        ... 
```

并将我的其他子类控制器更改为从 FFViewController 下降，这是一个：

```
 @interface FooDetailsViewController : FFViewController 
```

看起来有点奇怪，在 2 个地方有外观代码，但总比把相同代码的副本分散在各处要好。在 FooDetailsViewController 中，我实现了一些 Table Protocol 方法，但没有实现 viewForHeaderInSection。我还在 FFViewController 上收到警告，因为它没有实现所有协议（这是故意的，本示例中的子类 FooDetailsViewController 填写了协议。）

那么问题是什么？

并非所有其他子类 UIViewController 都响应 titleForHeaderInSection，所以当我运行时，我当然会在这些视图控制器上崩溃。所以我尝试看看是否实现了titleForHeaderInSection：

```
 -(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
    {
        if (![self respondsToSelector:@selector(titleForHeaderInSection)]) {
            return nil;
        }

        NSString *sectionTitle = [self tableView:tableView titleForHeaderInSection:section];
        if (sectionTitle == nil) {
            return nil;
        } 
```

并且 respondsToSelector 总是返回 false。所以我可以杀死那个部分并强制我所有的子类实现 titleForHeaderInSection 但这似乎是错误的。

什么是摆脱这种情况的好方法？我已经不喜欢这个解决方案了，因为：

1.  代码有警告。（但我总是可以做[如何避免部分基类中的“不完整实现”警告](https://stackoverflow.com/questions/2854522/how-to-avoid-incomplete-implementation-warning-in-partial-base-class)来阻止它们）
2.  我的外观代码在 2 个单独的类中
3.  我需要在不需要的代码中实现 titleForHeaderInSection，因为它没有节标题

*（感谢您阅读本文！）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:41:36.183

在您的`respondsToSelector`代码中，您为要测试的选择器提供了错误的名称。它应该是：

```
if (![self respondsToSelector:@selector(tableView:titleForHeaderInSection:)]) {
    return nil;
} 
```

如果您进行了更改，您的测试应该可以工作，然后您的子类可以选择实现`tableView:titleForHeaderInSection:`或不实现。

# r - 如何将不等 lm 对象长度的列表组合到数据框中？

> ID：10212777
> 
> 赞同：4
> 
> 时间：2012-04-18T15:31:17.210
> 
> 标签：r, dataframe, regression, plyr, linear-regression

我喜欢提取每个 lm 对象的系数和标准误差，并将它们组合成一个 data.frame 并用 NA 填充缺失的预测变量。

```
 set.seed(12345)
    x<-matrix(rnorm(1000),nrow=100,ncol=10)
    colnames(x)<-paste("x",1:10,sep="")
    df<-data.frame(y=rnorm(100),x)
    m1<-vector('list', 10)
    for ( i in 2:11){
    eqn <- as.formula(paste("y ~", paste(colnames(df)[2:i], collapse='+')))
    m1[[i-1]] <- lm(eqn, df)
    } 
```

我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T15:43:32.177

这应该可以解决问题：

```
cList <- lapply(m1, coef)
nms  <- names(cList[[11]])

cMat <- do.call(rbind, lapply(cList, function(X) X[nms]))
cDF  <- as.data.frame(cMat); names(cDF) <- nms   # Pretty up the results

cDF[1:5, 1:6]
#   (Intercept)        x1          x2         x3         x4       x5
# 1  -0.2345084 0.2027485          NA         NA         NA       NA
# 2  -0.2334043 0.2074812 -0.05006297         NA         NA       NA
# 3  -0.2299977 0.2099620 -0.03892985 0.09777829         NA       NA
# 4  -0.2095798 0.2221179 -0.02710201 0.06403695 -0.1184191       NA
# 5  -0.2060406 0.2180674 -0.01062671 0.06632922 -0.1045128 0.130937 
```

**编辑**：

要将标准错误收集到类似的结构中，只需执行以下操作：

```
seList <- lapply(m1, function(X)  coef(summary(X))[,2])
seMat <- do.call(rbind, lapply(cList, function(X) X[nms]))
seDF  <- as.data.frame(cMat); names(seDF) <- nms 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:23:04.960

这是一种使用`merge`and的方法`Reduce`：

```
m2 <- lapply(m1[-1], function(x) as.data.frame(coef(summary(x))) )

tmpfun <- function(x,y) {
    n <- as.character(nrow(y)-1)
    xn <- if( 'Row.names' %in% colnames(x) ) 1 else 0
    merge(x,y,by.x=xn, by.y=0, suffixes=c('',n), all=TRUE)
}

out <- Reduce(tmpfun, m2) 
```

您可能想要重新排序列，或删除 m2 中的某些列，或转置结果。

# apache - .htaccess DirectoryIndex 不起作用

> ID：10212778
> 
> 赞同：10
> 
> 时间：2012-04-18T15:31:23.687
> 
> 标签：apache, .htaccess

我的 public_html 文件夹 (Apache) 中有两个索引文件 index.html 和 index.php

默认情况下，Apache 似乎将流量定向到 index.php，所以我想将其更改为 index.html。我在同一目录中添加了一个 .htaccess 文件，其中包含：

> 目录索引 index.html

但是当访问者访问网站（www.example.com/）时，他们仍然被引导到 index.php

为什么是这样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-02T19:33:15.313

对于那些仍在寻找答案的人 - 就像 OP 建议的那样，将以下行添加到您的 .htaccess 文件中：

```
DirectoryIndex index.php 
```

确保您的主机允许在 httpd.conf 中覆盖 htaccess

```
AllowOverride All 
```

如果未启用，您必须联系您的托管服务提供商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:19:01.120

愚蠢的问题，但是您是否证明您的 htaccess 文件正在被使用？

请参阅：[http ://httpd.apache.org/docs/current/mod/core.html#allowoverride](http://httpd.apache.org/docs/current/mod/core.html#allowoverride)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:35:44.547

尝试这个：

```
DirectoryIndex index.html index.htm index.php index.php3 
```

优先级是从左到右，所以如果你碰巧有两个 html 将是首选

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T14:26:18.417

您必须检查父目录上是否有任何与此规则冲突的 htaccess 规则，我的问题是，在根目录和“/folder/”目录索引上有一个**RewriteEngine**将不起作用。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-18T15:43:50.260

打开您的 .htaccess 文件并添加

```
DirectoryIndex index.php 
```

# silverlight - Silverlight - 使用组合框选择数据网格项

> ID：10212779
> 
> 赞同：1
> 
> 时间：2012-04-18T15:31:25.323
> 
> 标签：silverlight, silverlight-4.0

我对 WPF 和 .NET 有点陌生，所以这可能是一项简单的任务：

我有文本块，它们从数据网格的选定项中获取它们的值。我正在尝试将组合框绑定到该数据网格中的一列，以便用户看到该数据网格列中的所有值。在组合框中选择一个项目时，它应该使该行也成为数据网格中的选定项目。

这是我的数据网格：

```
<sdk:DataGrid AutoGenerateColumns="True" Name="l1dGrid" IsReadOnly="True" ItemsSource="{Binding}" DataContext="{Binding Path=DataContext}" /> 
```

这是 Datagrid 加载数据的地方：

```
_PCContext.Load(_PCContext.GetLine1_DownstairsQuery());
l1dGrid.ItemsSource = _PCContext.Line1_Downstairs; 
```

现在我只需要一个组合框就可以更改 DataGrid 中的选定项目。
提前感谢您的帮助！！！

[编辑 - 已解决]
好的，所以我最终只是根据组合框的选定项查询数据网格，并将数据网格选定项设置为与该查询匹配的项。

这是我用来执行此操作的代码：

```
 private void stockPick_comboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        string selection = stockPick_comboBox.SelectedValue.ToString().Replace("Line1_Downstairs : ", "");
        selectGridItem(selection);
    }

    private void selectGridItem(string selection)
    {
        var stock = (from i in _PCContext.Line1_Downstairs
                     where i.Stock == selection
                     select i).FirstOrDefault();
        l1dGrid.SelectedItem = stock;
    } 
```

# java - 解析包含 xi:includes 和 jaxb 的 xml 时面临问题

> ID：10212781
> 
> 赞同：6
> 
> 时间：2012-04-18T15:31:36.383
> 
> 标签：java, xml, jaxb

我正在使用 JAXB 来解析 xml。我有一个如下架构，以及在此架构上定义的两个 xml 文件 a.xml 和 b.xml。a.xml 通过 xi:include xml 标记依赖于 b.xml。请归档以下示例以获得更清晰的数据

```
 I have followng schema definition:
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"  attributeFormDefault="unqualified">
    <xs:element name="Task">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="Details" minOccurs="1" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="Details">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="NAme" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
</xs:schema> 
```

这是两个xml文件：

一个.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Task xmlns:xi="http://www.w3.org/2001/XInclude">
<Details>
    <xi:include href="b.xml"/>
</Details>
</Task> 
```

b.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <Detail>
  <Name>Name1</Name>
 </Detail>
<Detail>
   <Name>Name2</Name>
 </Detail> 
```

现在我使用 JAXB SAXFactory 将其解析为：

```
 JAXBContext jaxbcon = JAXBContext.newInstance("schema-definition-jaxb-files");
 unmar = jaxbcon.createUnmarshaller();

 SAXParserFactory spf = SAXParserFactory.newInstance();
 spf.setXIncludeAware(true);
 XMLReader xr = spf.newSAXParser().getXMLReader();
 SAXSource source = new SAXSource(xr, new InputSource(new    FileInputStream(xmlfilename)));
 Object obj = unmar.unmarshal(source); 
```

解析成功，但*Details* JAXB 标记对象为空。无论如何，a.xml 文件中的 xi:include 标记没有被展平。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T00:26:49.660

试试这个，它肯定有效：

```
public class Test {
    public String include;

    public static void main(String[] args) throws Exception {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        spf.setXIncludeAware(true);
        spf.setNamespaceAware(true);
        XMLReader xr = spf.newSAXParser().getXMLReader();
        SAXSource src = new SAXSource(xr, new InputSource("test.xml"));
        Test t = JAXB.unmarshal(src, Test.class);
        System.out.println(t.include);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T00:23:35.160

你应该添加

```
 spf.setNamespaceAware(true); 
```

# php - 使用 PHP 显示浏览器窗口宽度

> ID：10212784
> 
> 赞同：2
> 
> 时间：2012-04-18T15:31:52.203
> 
> 标签：php, javascript, jquery, ajax

我希望我的 PHP 脚本能够访问浏览器窗口的宽度。我一直在阅读此内容，PHP 本身无法访问此信息，但 Javascript/jQuery 可以，然后可以使用 AJAX 将其传递给服务器，因此 PHP 可以获取它。

按照网上的一些解决方案，我编写了以下测试文件，并将其命名为“test.php”

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>  
</head>

<?php
if (!isset($_POST["window_width"])) {
?>

<script type="text/javascript">
    var window_width = $(window).width();
    $.ajax({
        type: "POST",
        data: "window_width="+window_width,
    });
</script>   

<?php
}

if(!isset($_POST["window_width"])) {
    echo "not set";
}

?>
</html> 
```

加载 test.php 显示“未设置”，这表明 PHP 没有拾取 window_width 变量。这对我来说似乎很奇怪，因为 Firebug 显示变量在那里（在我的计算机上设置为 1366，因为这是我的浏览器的宽度）。

如何确保设置了 $_POST["window_width"] 以便我可以使用 PHP 访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:34:07.457

### 描述

我不明白你的目标是什么，但看起来你忘了等到 DOM 准备好。

### 样本

```
$(function() {
   var window_width = $(window).width();
   $.ajax({
       type: "POST",
       data: "window_width="+window_width,
   });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T15:36:07.830

您的服务器端代码不会暂停处理以等待 JavaScript 运行。您在这里处理两个单独的 HTTP 请求。

1.  浏览器请求 HTML 文档
2.  由于`$_POST['window_width']`没有为该请求设置。PHP 返回一个包含该脚本的 HTML 文档。由于*仍未*为该请求设置，因此它也回显`$_POST['window_width']`未*设置*。
***   浏览器接收 HTTP 响应并对其进行解析。作为此过程的一部分，它运行 JavaScript。*   JavaScript 向...发出 POST 请求，因为您没有包含 URI（一个非常快速的测试表明是当前 URI），所以默认情况下 jQuery 将请求发送到的任何地方。*   为此请求`$_POST["window_width"]`设置并包含在返回给 JavaScript 的文档中。*   由于 JavaScript 没有`success`处理程序（或在 HTTP 请求返回时运行的任何其他代码），因此浏览器不会对该文档执行任何操作。**

 **Ajax 是“使用 JavaScript 与网络服务器对话”的一种简写方式。它不会阻止 HTTP 成为无状态的请求-响应协议。

您还没有说明获取窗口宽度的用例（在页面加载后可以更改），因此很难为您遇到的任何问题提出一个好的解决方案。（您似乎问了一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)）。

想要知道窗口宽度的两个常见原因是：

*   统计——在这种情况下，您可以只在 PHP 中处理数据，而不必担心将其呈现给客户端
*   更改布局——通常使用 CSS 媒体查询更好地实现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T15:38:47.160

我认为在这种情况下您不需要使用 ajax，“外部”（？）页面需要接收数据，而不是“内部”ajax 请求。

```
<?php session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>  
</head>

<?php
if (!isset($_POST["window_width"]) && !isset($_SESSION['window_width'])) {
?>
<body>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" id="window_width_form" style="display:none;">
<input name="window_width" id="window_width" value="" />
</form>
<script type="text/javascript">
    $(function(){
        $('#window_width').val($(window).width());
        $('#window_width_form').submit();
    });
</script>   
</body>
<?php
}
elseif (isset($_POST['window_width']) && !isset($_SESSION['window_width']))
{
    $_SESSION['window_width'] = $_POST['window_width'];
    exit(header("Location: {$_SERVER['PHP_SELF']}\r\n"));
}

if(!isset($_POST["window_width"]) && !isset($_SESSION['window_width'])) {
    echo "not set";
}

?>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T15:34:35.960

尝试

```
$.ajax({
        url : "your url goes here"
        type: "POST",
        data: {"window_width":window_width}
    }); 
```**

# sockets - 结构和线程 DWORD WINAPI

> ID：10212785
> 
> 赞同：0
> 
> 时间：2012-04-18T15:31:54.573
> 
> 标签：sockets, visual-c++, struct, dword

小伙伴们怎么了，希望你们没事！好吧，问题是我正在做一个聊天客户端/服务器应用程序，但是对服务器进行了一些测试，我发现我在发送消息时遇到了问题。我正在使用结构、套接字和 DWORD WINAPI 线程......所以结构中的代码是：

```
DWORD WINAPI threadSendMessages(LPVOID vpParam); //THREAD
typedef struct messagesServerChat{ //STRUCT

 const char *messageServEnv;

}MESSAGE, *SMESSAGES; 
```

然后在 main 方法中，我调用结构来使用 const char messageServEnv，一个 HeapAlloc 为要发送消息的线程提供一些内存，以及一个用于存储消息的 char 变量

```
char mServer[1024] = ""; //variable to pre-store the message
SMESSAGES messages; //call the struct
messages  = (SMESSAGES) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, sizeof(MESSAGE)); 
```

在 main 方法中，我要求用户插入他想要发送的消息，然后我使用结构来存储消息并将其作为参数发送到线程：

```
cout<<"Dear user, please insert your message: ";

setbuf(stdin, NULL);
fgets(mServer, 1024, stdin);
messages->messageServEnv = mServer;
DWORD hSend; //send the parameters to the thread function
HANDLE sendThread = CreateThread(0, 0, threadSendMessages, mServer, 0, &hSend); 
```

最后是线程代码函数

```
DWORD WINAPI threadSendMessages(LPVOID lpParam){

SMESSAGES messages;
messages = (SMESSAGES)lpParam; 
int mesa;
mesa = send(sConnect, (char *)messages->messageServEnv, sizeof messages->messageServEnv, 0);
//sConnect is the socket
//messages = to use the struct, and messageServEnv is the struct data that should contain the message   
return 0;
} 
```

--Edit-- 我使用 Remy 的解决方案解决了很多问题，但也许我遗漏了一些东西……在 Thread threadSendMessages(SMESSAGES lpMessage)

```
char *ptr = messages->messageServEnv;
int len = strlen(messages->messageServEnv); 
```

我得到一个错误，说消息是未定义的，然后，我改为：

```
SMESSAGES messages;
char *ptr = messages->messageServEnv;
int len = strlen(messages->messageServEnv); 
```

现在我可以使用*消息*和结构值*messageServEnv*但是如果我开始调试 Visual Studio 并尝试发送消息，我会收到一个错误，提示*消息*在未初始化的情况下被使用，然后我将该部分更改为

```
SMESSAGES messages = new MESSAGE; 
```

现在我可以向客户端发送消息，但只能发送字符和垃圾代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:54:13.750

您需要为每个消息的字符串数据动态分配内存，然后在完成发送后让线程释放内存。

您还将错误的指针传递给 of 的`lpParameter`参数`CreateThread()`，您传递的是`char[]`缓冲区而不是分配的`MESSAGE`结构。

`sizeof()`您在调用时也在使用`send()`. 由于您`messageServEnv`是一个`char*`指针，`sizeof()`因此将返回 4（32 位）或 8（64 位）而不是所指向的字符串的实际大小。

我建议将`char[]`缓冲区直接移动到结构中，而不是使用指向外部缓冲区的指针，例如：

```
typedef struct messagesServerChat
{
    char messageServEnv[1024]; 
}
MESSAGE, *SMESSAGES; 

DWORD WINAPI threadSendMessages(SMESSAGES lpMessage); 
```

.

```
cout << "Dear user, please insert your message: "; 
setbuf(stdin, NULL); 

SMESSAGES message = new MESSAGE;
fgets(message->messageServEnv, sizeof(message->messageServEnv), stdin); 

DWORD hSend;
HANDLE sendThread = CreateThread(0, 0, (LPTHREAD_START_ROUTINE)&threadSendMessages, message, 0, &hSend); 
if (!sendThread)
    delete message; 
```

.

```
DWORD WINAPI threadSendMessages(SMESSAGES lpMessage)
{ 
    // send() is not guaranteed to send the entire message
    // in one go, so call it in a loop...

    char *ptr = lpMessage->messageServEnv;
    int len = strlen(lpMessage->messageServEnv); // or sizeof() if you really want to send all 1024 bytes instead

    while (len > 0)
    {
        int mesa = send(sConnect, ptr, len, 0); 
        if (mesa > 0)
        {
            ptr += mesa;
            len -= mesa;
            continue;
        }

        // this is only needed if you are using a non-blocking socket...
        if ((mesa == SOCKET_ERROR) && (WSAGetLastError() == WSAEWOULDBLOCK))
        {
            fd_set fd;
            FD_ZERO(&fd);
            FD_SET(sConnect, &fd);

            timeval tv;
            tv.tv_sec = 5;
            tv.tv_usec = 0;

            if (select(0, NULL, &fd, NULL, &tv) > 0)
                continue;
        }

        ... error handling ...
        break;
    }

    delete message;
    return 0; 
} 
```

如果你想传递一个动态长度的字符串，你最好使用 a`std::string`而不是 a `char[]`：

```
typedef struct messagesServerChat
{
    std::string messageServEnv; 
}
MESSAGE, *SMESSAGES; 

DWORD WINAPI threadSendMessages(SMESSAGES lpMessage); 
```

.

```
cout << "Dear user, please insert your message: "; 
setbuf(stdin, NULL); 

SMESSAGES message = new MESSAGE;
getline(stdin, message->messageServEnv); 

DWORD hSend;
HANDLE sendThread = CreateThread(0, 0, (LPTHREAD_START_ROUTINE)&threadSendMessages, message, 0, &hSend); 
if (!sendThread)
    delete message; 
```

.

```
DWORD WINAPI threadSendMessages(SMESSAGES lpMessage)
{ 
    // send() is not guaranteed to send the entire message
    // in one go, so call it in a loop...

    char *ptr = lpMessage->messageServEnv.c_str();
    int len = lpMessage->messageServEnv.length(); // or sizeof() if you really want to send all 1024 bytes instead

    while (len > 0)
    {
        int mesa = send(sConnect, ptr, len, 0); 
        if (mesa > 0)
        {
            ptr += mesa;
            len -= mesa;
            continue;
        }

        // this is only needed if you are using a non-blocking socket...
        if ((mesa == SOCKET_ERROR) && (WSAGetLastError() == WSAEWOULDBLOCK))
        {
            fd_set fd;
            FD_ZERO(&fd);
            FD_SET(sConnect, &fd);

            timeval tv;
            tv.tv_sec = 5;
            tv.tv_usec = 0;

            if (select(0, NULL, &fd, NULL, &tv) > 0)
                continue;
        }

        ... error handling ...
        break;
    }

    delete message;
    return 0; 
} 
```

# mysql - 在查询中将多条记录作为一个字符串返回

> ID：10212788
> 
> 赞同：3
> 
> 时间：2012-04-18T15:31:55.790
> 
> 标签：mysql

```
students: id, last_name

1 Robinson
2 Norris
3 Smith

sports: id, title

1 Basketball 
2 Baseball
3 Football

students_sports: student_id, sport_id

1 3
1 2
2 1
2 3
3 3
3 1 
```

这个查询

```
select 
 last_name, sports.title as sport
from 
 students s
left join
 students_sports ss
on
 s.id = ss.student_id
left join
 sports
on
 ss.sport_id = sports.id 
```

它会返回如下内容：

```
last_name       sport
Robinson        basketball
Robinson        baseball
Smith           football
Smith           baseball
Norris          baseball
Norris          basketball 
```

我想修改查询以返回如下结果：

```
last_name       sport
Robinson        basketball, baseball
Smith           football, baseball
Norris          baseball, basketball 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T15:34:37.480

正如@brad 所建议的：

```
select 
 last_name, group_concat(sports.title) as sport
from 
 students s
left join
 students_sports ss
on
 s.id = ss.student_id
left join
 sports
on
 ss.sport_id = sports.id
group by s.id 
```

编辑：更新组...

# python - django-social-auth 个人资料生成器

> ID：10212791
> 
> 赞同：0
> 
> 时间：2012-04-18T15:32:10.317
> 
> 标签：python, django, facebook, celery, django-signals

我最近开始玩 django-social-auth，并正在寻求社区的帮助，以找出推进想法的最佳方式。

一旦用户注册，您就可以访问他的 oauth 令牌，这允许您提取某些数据。

就我而言，我想根据用户头像、位置以及其他一些信息（如果可用）来构建一个不错的小配置文件。

**最好的方法是：**

*   为 celery 构建自定义任务并提取信息并构建配置文件？
*   或者，利用信号来构建配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:18:28.207

这实际上归结为同步与异步。Django 信号是同步的，即它们会阻塞响应直到它们完成。Celery 任务是异步的。

哪个更好取决于异步处理配置文件构建的好处是否超过维护芹菜所需的额外基础设施的负面影响。

如果没有关于您的具体情况的更多具体信息，基本上不可能回答这个问题。

# c# - 在 C# 中更改数据表中的列名

> ID：10212793
> 
> 赞同：1
> 
> 时间：2012-04-18T15:32:10.343
> 
> 标签：c#, datatable

我试图更改 DataTable 的列名，但是我丢失了一些数据。

```
foreach (DataRow dr in item)
    Ds.Tables[0].ImportRow(dr);                           

Table.Columns[0].ColumnName = "Barcode";
Table.Columns[1].ColumnName = "Description";
Table.Columns[2].ColumnName = "Price";
Table.Columns[3].ColumnName = "Cost";
Table.Columns[4].ColumnName = "Stock";
Table.Columns[5].ColumnName = "Dept #";

updateDgv.DataSource = Table; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:45:30.133

首先，正确的代码是：

```
DataTable table = new DataTable();
table.Columns.Add("ItemNo", typeof(string));
table.Columns[0].ColumnName = "Item #"; 
```

代码运行后，您将拥有一个 DataTable，其中有一列名为`Item #`.

没有行或数据，因为您没有添加任何数据。所以你没有失去任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T15:47:53.720

我已经测试了你的代码，它似乎工作正常：

```
DataTable table = new DataTable();
table.Columns.Add("ItemNo", typeof(string));
table.Columns.Add("ItemName", typeof(string));
DataRow dr = table.NewRow();
dr[0] = "1";
dr[1] = "Name1";
table.Rows.Add(dr);
dr = table.NewRow();
dr[0] = "1";
dr[1] = "Name1";
table.Rows.Add(dr);
table.Columns[0].ColumnName = "Item #"; 
```

可能您稍后在代码中尝试通过列名访问数据，这就是失败的地方。仅重命名列名不会丢失数据。（在表列名中使用特殊字符也是一个不好的做法）在列重命名之前
查看数据可视化器的以下屏幕截图
**：**
![在此处输入图像描述](../Images/9d8d0e6f2eab749522b2e2844a018678.png)

**列重命名后：**
![在此处输入图像描述](../Images/f8c30911fe1164d970946abcb5f31c7b.png)

# tridion - 哪些编程实践导致 Tridion 报告会话在另一个线程上使用？

> ID：10212794
> 
> 赞同：8
> 
> 时间：2012-04-18T15:32:11.200
> 
> 标签：tridion

检查我的 Tridion 内容管理服务器上的事件日志时，（我使用的是 2009 版本）我看到警告说：

```
Session is used on another thread... than it was created on ... 
Session objects are not thread safe. 
```

哪些编程/模板实践可能会导致这种情况？

编辑：到目前为止，我们有一些很好的建议：

1.  不要将会话对象存储在静态变量中 (Chris)
2.  不要将引擎或包存储在静态变量中 (Miguel)

事实上，这两者都是纯金，你应该检查你自己的代码是否有这些反模式。（引擎有一个会话的引用，所以这是有道理的。）不过，我已经搜索了导致问题的代码库，但我没有找到任何这些。那么 - 有没有人有更多的想法？我也欢迎有关如何调试此类事情或缩小有问题的代码范围的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T21:08:33.963

该问题不仅出现在存储会话时，而且出现在存储任何 TOM.NET 对象（`Component`、`Page`等）时。每个这样的对象都有一个对 Session 的内部引用，它是从对对象的任何访问中创建的，可能必须返回到 Session 以从 Tridion 检索请求的信息。

尽管大多数对项目类型“本机”的属性似乎都被检索并保存在实例上，但类似的调用`LoadApplicationData`可能（必须）返回到 Session 以访问请求的数据。如果此调用随后发生在不同的线程上，您将收到您提到的警告消息。

我已经开始查看我怀疑的每个 TOM.NET 对象，并在我第一次从其 Session 加载对象时预加载我以后可能需要的大量数据。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T18:27:11.057

我还想根据以前的经验添加评论。以下场景：

*   会话和/或引擎和/或包存储在静态变量中
*   会话和/或引擎和/或包作为参数发送到静态方法

除了前面描述的问题外，还可能导致几个问题，包括发布期间的内存泄漏。

Publisher 将开始消耗内存，直到最终处于无响应模式（您不能停止，也不能重新启动或禁用）并且您需要重新启动服务器。

在进行大规模出版时，这些问题可能会变得更糟

所以建议任何使用会话、引擎、包的东西都应该转换为非静态的

例如，从以下用于初始化跨所有模板使用的实用程序的代码开始

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Text.RegularExpressions;
using System.Xml;
using Tridion;
using Tridion.ContentManager;
using Tridion.ContentManager.CommunicationManagement;
using Tridion.ContentManager.ContentManagement;
using Tridion.ContentManager.ContentManagement.Fields;
using Tridion.ContentManager.Templating;
using Tridion.ContentManager.Publishing;

namespace sample.sample1
{
    public class Utilities
    {
        private static Engine  _engine;
        private static Package _package;

        public void InitializeUtilities(Engine e, Package p)
        {
            _engine = e;
            _package = p;
        }
    }
} 
```

进入

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Text.RegularExpressions;
using System.Xml;
using Tridion;
using Tridion.ContentManager;
using Tridion.ContentManager.CommunicationManagement;
using Tridion.ContentManager.ContentManagement;
using Tridion.ContentManager.ContentManagement.Fields;
using Tridion.ContentManager.Templating;
using Tridion.ContentManager.Publishing;

namespace sample.sample1
{
    public class Utilities
    {
        private Engine _engine;
        private Package _package;

        public void InitializeUtilities(Engine e, Package p)
        {
            _engine = e;
            _package = p;
        }
    }
} 
```

可以省去很多问题

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-18T16:46:18.330

I have found that if you ever store the session object in a static variable in a template this error occurs. It works fine in debug mode, but as soon as I run a multi-threaded Publisher (i.e. more than one rendering thread) this issue raises it's ugly head.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T03:21:47.317

另一种情况是，如果您的事件系统或模板或工作流代码启动子线程并将会话或引擎对象传递给它们而没有适当的锁定。

基本上任何不属于单线程公寓模型的东西，引擎和会话对象都基于： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms680112(v=vs.85) .aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680112%28v=vs.85%29.aspx)

# python - Python 代码在读取输入时出现错误退出

> ID：10212795
> 
> 赞同：0
> 
> 时间：2012-04-18T15:32:11.810
> 
> 标签：python, algorithm, input

我正在尝试[这个编码竞赛](http://www.spoj.pl/problems/TECHELN4/)，我简单的蛮力 python 代码因“非零退出代码”而失败。我认为问题可能在于阅读空行。有人可以给我小费吗？

```
import sys
n = int(raw_input())
sys.stdin.readline()
a=map(int,raw_input().split())
sys.stdin.readline()
t = int(raw_input())
sys.stdin.readline()
for i in range(1, t+1):
k = int(raw_input())
if k*k in a:
    print "YES"
else:
    print "NO" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:02:47.020

*第一行由 N 组成，即随机数的计数。*

你有这个很好。

*接下来的 N 行由这 N 个数字组成。*

这似乎意味着每行一个数字，我会做这样的事情：

```
numbers = []
for i in range(n):
    numbers += int(sys.stdin.readline()) 
```

T看起来还行。

# postgresql - node-postgres：设置最大连接池大小

> ID：10212796
> 
> 赞同：10
> 
> 时间：2012-04-18T15:32:12.997
> 
> 标签：postgresql, node.js, connection-pooling

我找不到有关设置最大连接池大小的 node-postgres 驱动器的任何文档，甚至找不到它是不可配置的。有谁知道我如何设置最大连接数，或者默认情况下是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T20:09:23.513

默认值在 node-postgres/lib/defaults [https://github.com/brianc/node-postgres/blob/master/lib/defaults.js中定义](https://github.com/brianc/node-postgres/blob/master/lib/defaults.js)

poolSize 默认设置为 10，0 将禁用任何池化。

```
var pg = require('pg');
pg.defaults.poolSize = 20; 
```

请注意，池仅在使用 connect 方法时使用，而不是在直接启动 Client 实例时使用。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-04-18T15:37:33.453

node.js 是单线程的，为什么要每个进程有超过 1 个与 db 的连接？即使您将集群 node.js 进程，您也应该每个进程最多有 1 个连接。否则你做错了什么。

# android - 使用 logcat 进行调试

> ID：10212805
> 
> 赞同：0
> 
> 时间：2012-04-18T15:32:37.087
> 
> 标签：android, logcat

一旦习惯了 logcat（在 MAC 上），就可以了。

但是有两个问题我想知道是否有办法改进它们。

a) logcat 中存储了多少行？有没有办法增加这个？有时我想记录几千行，但行会被某种我还需要理解的逻辑删除。

b) 搜索是 logcat 可以在搜索行中键入搜索文本，但它更像是一个过滤器而不是搜索。如果我现在想开始查看后续行，假设从第一次出现找到的文本开始，一个不能，因为一旦删除过滤器，光标或行就会丢失。

现在真正进入该行的唯一方法是查看时间戳并重新访问完整的日志内容，手动搜索过滤器之前显示的行 - 不要忘记按下“暂停”按钮，以便向后滚动不会被一些系统消息打断

我希望我能很好地解释这一点以便理解:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:23:36.017

据我了解，您谈论的是 Eclipse 中的 logcat 窗口。

1.  您可以通过修改值来增加此窗口中的行数`Window->Preferences->Android->LogCat->Maximum number of logcat messages to buffer`。
2.  您可以打开终端窗口并在文件中重定向 logcat：

    adb logcat > $HOME/logcat.xt

比你可以在另一个终端窗口中查看这个文件，用你最喜欢的文本编辑器搜索这个文件，用 grep 等过滤它。

# design-patterns - 在 CQRS/ES 系统中存储命令有哪些优势？

> ID：10212814
> 
> 赞同：7
> 
> 时间：2012-04-18T15:32:53.203
> 
> 标签：design-patterns, cqrs, event-sourcing

我正在开发 CQRS/事件存储系统。目前，我使用的模式是命令同步。也就是说，在命令完成之前，用户界面不会将操作显示为已完成，并且会向用户显示成功/失败。在命令执行期间，所有生成的事件（例如，在聚合根 Y 上发生的动作 X）都存储在持久存储中。

我读过的所有关于 CQRS 的描述都实现了命令存储。我想知道在我的情况下是否需要这样做。

另一个注意事项 - 有很多长时间运行的命令类型操作，因此我将操作分解为一个生成事件的命令，然后这些事件依次发出更多命令。这些命令是幂等的，基于聚合根的状态。我不知道这会如何影响答案，但值得指出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T06:44:10.827

1.  回归测试在每次开发迭代之后，您可以从生产环境中获取命令日志，重新执行它并将生成的事件流与生产环境中的事件流进行比较。如果它们不同-您的逻辑中有回归。

2.  消息流可视化和分析。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T21:16:15.157

我见过的没有事件溯源的 Cqrs 示例是存储系统状态的常用关系数据库，而不是显示数据状态如何产生的事件。“命令采购”对我来说是一个新概念，并且似乎不正确，因为命令处理程序会随着时间而改变。对命令处理程序逻辑的任何更改都可能导致命令在重放时失败。重播事件没有这个问题，因为您的对象属性是直接设置的。

# php - 使用 PHP 执行 Oracle 过程 - 可能吗？

> ID：10212818
> 
> 赞同：1
> 
> 时间：2012-04-18T15:32:56.613
> 
> 标签：php, sql, oracle, stored-procedures, procedure

我正在尝试使用以下语句从 PHP 运行一个非常简单的 Oracle 过程：

```
$sql = 'exec procedureName(param1, param2)';
$sql = oci_parse($connection, $sql); oci_execute($sql); 
```

在 Oracle SQL 开发人员中运行此命令会返回成功*的“匿名块已完成”*消息，但通过 PHP 运行此命令会返回*“ORA-00900：无效 SQL 语句”*错误。

有没有办法从 PHP 运行这个程序？非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:42:52.680

再深入一点，我认为您需要将过程调用放在 PL/SQL BEGIN-END 对中，如下所示：

```
$sql = 'BEGIN procedureName(:param1, :param2); END;';
$stmt_id = oci_parse($connection, $sql);
oci_bind_by_name($stmt_id, ':param1', $value1);
oci_bind_by_name($stmt_id, ':param2', $value2);
oci_execute($stmt_id); 
```

您需要编辑以上内容以在调用`oci_bind_by_name`.

另请注意，SQL 字符串中分号的存在很重要。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T07:12:32.853

```
$sql = 'BEGIN procedureName(:param1, :param2); END;';
$stmt_id = oci_parse($connection, $sql);
oci_execute($stmt_id); 
```

# android - Proguard：保持动态声明的方法

> ID：10212821
> 
> 赞同：3
> 
> 时间：2012-04-18T15:33:09.720
> 
> 标签：android, proguard

我正在使用反射来调用我的 Android 应用程序的目标 API 级别之外的方法：

```
try {
    Method m = Class.forName("android.content.Context")
            .getDeclaredMethod("getExternalCacheDir");
    Object result = m.invoke(this);
    if (result instanceof File) {
        Log.v("MyApp", "external cache: "
                + ((File) result).getAbsolutePath());
        cacheDirectory = (File) result;
    } else {
        Log.v("MyApp", "non-file cache: " + result);
    }
} catch (Exception e) {
    // ...
} 
```

我可以通过 Proguard 毫无问题地优化它，但它警告我：

```
Note: com.example.MyApp accesses a declared method 'getExternalCacheDir()' dynamically
      Maybe this is library method 'android.content.Context { java.io.File getExternalCacheDir(); }'
      Maybe this is library method 'android.content.ContextWrapper { java.io.File getExternalCacheDir(); }'
      Maybe this is library method 'android.test.mock.MockContext { java.io.File getExternalCacheDir(); }'
Note: there were 1 accesses to class members by means of introspection.
      You should consider explicitly keeping the mentioned class members
      (using '-keep' or '-keepclassmembers'). 
```

这是一个实际问题，还是 Proguard 只是通知我一个*潜在*问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-06T19:56:18.210

这类似于 Paul Lammertsma 发布的答案。另请查看 ProGuard Eric Lafortune 的作者在以下位置的回答：[如何抑制来自 ProGuard 的“也许这是程序方法”警告](https://stackoverflow.com/questions/6068902/how-to-suppress-maybe-this-is-program-method-warnings-from-proguard)

> 您可以通过在配置中明确提及该方法来避免它：
> 
> `-keep class com.foo.OtherClass { com.foo.OtherClass getInstance(); }`
> 
> 或者，您可以隐藏类的注释：
> 
> `-dontnote com.foo.MyClass`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T15:39:50.247

问题出在我正在使用的一个库项目中，并且`proguard.cfg`Proguard 没有检查该项目中的项目。

通过将以下几行添加到我自己的项目`proguard.cfg`中，我能够使通知消失：

```
-keep class android.content.Context {
    public java.io.File getExternalCacheDir();
} 
```

# mysql - mysql一次更新2个blob不起作用

> ID：10212822
> 
> 赞同：0
> 
> 时间：2012-04-18T15:33:14.510
> 
> 标签：mysql, image, upload, blob

我在尝试使用 mysql 和 php 命令连续更新两个 BLOB 字段时遇到问题。

将 BLOB 插入行似乎没有问题，这就是我所做的。

```
$logotemp = $_FILES['eventlogo']['tmp_name'];
$thumbnailtemp = $_FILES['eventthumbnail']['tmp_name'];
$openlogo      = fopen($logotemp, 'r');
$openthumbnail      = fopen($thumbnailtemp, 'r');
$logo = fread($openlogo, filesize($logotemp));
$logo = addslashes($logo);
$thumbnail = fread($openthumbnail, filesize($thumbnailtemp));
$thumbnail = addslashes($thumbnail);
fclose($openlogo);
fclose($openthumbnail); 
```

所以我有两个表单文件输入，这些文件被读取，然后设置为变量 $log 和 $thumbnail。然后我使用以下命令将其输入数据库：

```
$qry = "INSERT INTO $table (`Event Logo`, `Venue Logo`) VALUES ('$logo', '$thumbnail')";
$result = mysql_query($qry);
if(!$result) {
die(mysql_error());
} 
```

以上工作正常，尽管我已经修剪了其他也被填充的字段。查询有效，我可以将图像返回到页面，然后将它们与该行中的所有其他信息一起显示。

然后我想编辑该行，因此创建了一个名为 edit.php 的新 php 文件，它是上面使用的名为 new.php 的 php 文件的副本。

这意味着表单是相同的，当页面显示时，每个输入的值都预先填充了数据库中的信息，徽标和缩略图显示在上传字段旁边。

如果我然后运行查询来更新行，使用与上面几乎相同的代码，它总是在两个 blob 中输入一个空值，基本上删除了上传的图像。这是发生的事情：

```
 $id = $_POST['eventid'];        
    $logotemp = $_FILES['eventlogo']['tmp_name'];
    $openlogo      = fopen($logotemp, 'r');
    $logo = fread($openlogo, filesize($logotemp));
    $thumbnailtemp = $_FILES['eventthumbnail']['tmp_name'];
    $openthumbnail      = fopen($thumbnailtemp, 'r');
    $thumbnail = fread($openthumbnail, filesize($thumbnailtemp));
    fclose($openlogo);
    fclose($openthumbnail); 
```

所以再一次，表单字段仍然称为 eventlogo 和 eventthumbnail，变量仍然是 $logo 和 $thumbnail。然后我使用以下查询来更新该行：

```
$qry = "UPDATE $table SET `Event Name` = '$name', `Date` = '$date', `Time` = '$time', `Venue` = '$venue', `Price` = '$price', `Open To` = '$opento', `Rep Name` = '$repname', `Rep Email` = '$repemail', `Address` = '$address', `Website` = '$website', `Phone` = '$phone', `Description` = '$description', `Event Logo` = '$logo', `Venue Logo` = '$thumbnail' WHERE `Event ID` = '$id'"; 
```

我已经保留了这次更新的其他变量。

```
$result = mysql_query($qry);
if(!$result) {
die(mysql_error());
} 
```

当查询运行时，它将更新我想要的任何其他字段，除了最后的两个图像 BLOB 字段。考虑到我复制并粘贴了上传字段的代码，读取该字段内容的代码，然后手动输入查询以更新这些字段，我看不出出了什么问题。

我错过了一些明显的东西吗？任何帮助是极大的赞赏。

谢谢，编

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:59:01.677

找不到我对此进行排序的代码，但我想我最终一次只更新一个。

# iphone - 我的属性是否泄漏内存？

> ID：10212825
> 
> 赞同：0
> 
> 时间：2012-04-18T15:33:24.730
> 
> 标签：iphone, objective-c

```
- (void)viewDidLoad //In this scenario it only gets called once, but in other bits of code with same property initialisation it might be called more than once
{
deleteButton = [[UIBarButtonItem alloc] initWithTitle:@"" style:UIBarButtonItemStylePlain target:self action:@selector(deleteModelTapped:)]; //Is this leaking?
    self.deleteButton.image = [UIImage imageNamed:[Configuration getDeleteIconName]];
}

@property (nonatomic, retain) IBOutlet UIBarButtonItem *deleteButton;

- (void)dealloc 
{    
    [deleteButton release];
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:40:41.843

不，但这样写可能更好

```
- (void)viewDidLoad
{
    self.deleteButton = [[[UIBarButtonItem alloc] initWithTitle:@"" style:UIBarButtonItemStylePlain target:self action:@selector(deleteModelTapped:)] autorelease]; 
    self.deleteButton.image = [UIImage imageNamed:[Configuration getDeleteIconName]];
} 
```

setProperty 扩展可能像这样

```
- (void)setProperty:(XXX*)p
{
    if ( property != p )
    {
        [property release];
        property = [p retain];
    }
} 
```

“泄漏”可能使用“[UIImage imageNamed:]”；:)

# pdf - 使用 ImageMagick 将多页 PDF 拆分为 JPG（或 PNG...）文件

> ID：10212829
> 
> 赞同：0
> 
> 时间：2012-04-18T15:33:33.503
> 
> 标签：pdf, imagemagick, split

我在使用 Image Magick 时遇到了一个小问题，到目前为止我发现了一个很棒的工具，但是在这里它并没有达到我的预期（注意：我在 Windows 7 中工作）我读到它，拆分了 3 页（对于例如）pdf文件，你只需要做：

```
img2img My3pageFile.pdf SplittedImage.jpg 
```

然后，ImageMAgick 会自动创建 SplittedImage-1.jpg、SplittedImage-2.jpg 和 SplittedImage-3.jpg。

好吧，而不是这样，我收到一条这样的错误消息：（如果我说我毫无疑问在 D: 上确实存在文件“benef.pdf”，请让我希望你会相信我）。

```
D:\>img2img benef.pdf benef.jpg
img2img: `%s': %s "gswin32c.exe" -q -dQUIET -dSAFER -dPARANOIDSAFE -dBATCH 
-dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dEPSCrop -dAlignToPixels=0 -dGridFitTT=0
"-sDEVICE=pnmraw" -dTextAlphaBits=4 -dGraphicsAlphaBits=4 "-g595x842" "-r72x72"
"-sOutputFile=C:/Users/ADM-A2~1/AppData/Local/Temp/magick-o3McMMZQ" "-fC:/Users
/ADM-A2~1/AppData/Local/Temp/magick-EOLT_ZO2" "-fC:/Users/ADM-A2~1/AppData/Local
/Temp/magick-mUWMMcc0".
img2img: Postscript delegate failed `benef.pdf'.
img2img: missing an image filename `benef.jpg'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:43:10.317

答案很简单，按照我一开始给出的说明，在下面的地址安装和下载GhostScript，效果很好。所以这里是链接：

```
http://downloads.ghostscript.com/public/ 
```

# c# - Nunit Base Text Fixtures 及其运行顺序

> ID：10212830
> 
> 赞同：1
> 
> 时间：2012-04-18T15:33:51.780
> 
> 标签：c#, unit-testing, nunit

如果我有：

```
[TestFixture]
public class BaseTestFixture
{
  [TestFixtureSetup]
  public void SetUpStuff()
  {

  }
}

[TestFixture]
public class DeriveTestFixture : BaseTextFixture
{
   [TestFixtureSetup]
   public void SetupOtherStuff()
   {
   } 
} 
```

BaseTextFixture TestFixtureSetup 方法是在 DerivedTestFixture TestFixtureSetUp 方法之前还是之后调用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:36:43.070

为什么不通过测试向自己证明呢？

```
 [TestFixture]
    public class BaseTestFixture
    {
      [TestFixtureSetup]
      public void SetUpStuff()
      {
         Console.Writeline("Base");
      }
    }

    [TestFixture]
    public class DeriveTestFixture : BaseTextFixture
    {
       [TestFixtureSetup]
       public void SetupOtherStuff()
       {
         Console.Writeline("Derived");
       } 
    } 
```

也就是说，您可能会考虑仅在基础上具有属性并具有其他两个要覆盖的函数，例如 OnAfterTestFixtureSetup() ，因此它更加明确。那是，

```
[TestFixture]
    public class BaseTextFixture
    {
      [TestFixtureSetup]
      public void SetUpStuff()
      {
         Console.Writeline("Base");
        OnAfterTextFixtureSetup();
      }

      public virtual OnAfterTextFixtureSetup()
      {

      }
} 
```

# google-docs-api - 通过ID同时获取多个资源

> ID：10212831
> 
> 赞同：2
> 
> 时间：2012-04-18T15:33:52.130
> 
> 标签：google-docs-api

存在一个 DocsClient.get_resource_by_id 函数来获取单个 ID 的文档条目。在给定多个文档 ID 的情况下，是否有类似的方法来获取（在单个调用中）多个文档条目？

我的应用程序需要有效地从我拥有 ID 的多个文件中下载内容。我需要获取文档条目以访问适当的下载 URL（我可以手动构建 URL，但在 API 文档中不鼓励这样做）。具有文档类型也是有利的，并且在电子表格的情况下，需要文档条目才能访问各个工作表。

总的来说，我正在尝试减少 I/O 等待，所以如果有一种方法可以捆绑文档 ID 查找，它将为我节省一些 I/O 费用。

[编辑] 将 AddQuery 反向移植到 gdata v2.0（来自 Alain 的解决方案）：

```
client = DocsClient() 
# ...
request_feed = gdata.data.BatchFeed()
request_entry = gdata.data.BatchEntry()
request_entry.batch_id = gdata.data.BatchId(text=resource_id)
request_entry.batch_operation = gdata.data.BATCH_QUERY
request_feed.add_batch_entry(entry=request_entry, batch_id_string=resource_id, operation_string=gdata.data.BATCH_QUERY)
batch_url = gdata.docs.client.RESOURCE_FEED_URI + '/batch'
rsp = client.batch(request_feed, batch_url) 
```

`rsp.entry`是 BatchEntry 对象的集合，它们似乎引用了正确的资源，但与我通常通过`client.get_resource_by_id()`.

我的解决方法是将`gdata.data.BatchEntry`对象转换为类似的`gdata.docs.data.Resource`对象：

```
entry = atom.core.parse(entry.to_string(), gdata.docs.data.Resource) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:56:27.563

您可以使用[批处理请求](https://developers.google.com/google-apps/documents-list/#batching_resource_operations_into_a_single_request)通过单个 HTTP 请求向 API 发送多个“GET”请求。使用 Python 客户端库，您可以使用此代码片段来完成此操作：

```
def retrieve_resources(gd_client, ids):
  """Retrieve Documents List API Resources using a batch request.

  Args:
    gd_client: authorized gdata.docs.client.DocsClient instance.
    ids: Collection of resource id to retrieve.

  Returns:
    ResourceFeed containing the retrieved resources.
  """
  # Feed that holds the batch request entries.
  request_feed = gdata.docs.data.ResourceFeed()

  for resource_id in ids:
    # Entry that holds the batch request.
    request_entry = gdata.docs.data.Resource()
    self_link = gdata.docs.client.RESOURCE_SELF_LINK_TEMPLATE % resource_id
    request_entry.id = atom.data.Id(text=self_link)
    # Add the request entry to the batch feed.
    request_feed.AddQuery(entry=request_entry, batch_id_string=resource_id)

  # Submit the batch request to the server.
  batch_url = gdata.docs.client.RESOURCE_FEED_URI + '/batch'
  response_feed = gd_client.Post(request_feed, batch_url)

  # Check the batch request's status.
  for entry in response_feed.entry:
    print '%s: %s (%s)' % (entry.batch_id.text,
                           entry.batch_status.code,
                           entry.batch_status.reason)
  return response_feed 
```

确保同步到最新版本的[项目存储库](http://code.google.com/p/gdata-python-client/source/checkout)。

# vb6 - VB 6 内存限制

> ID：10212832
> 
> 赞同：3
> 
> 时间：2012-04-18T15:33:54.837
> 
> 标签：vb6

一个潜在客户有一个非常大的 VB6 程序。他们声称他们遇到了内存限制。他们不能添加更多的代码行。

你知道上限是多少，有办法解决吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T15:38:46.457

在 MSDN 上有一些关于 VB 限制的文档：

[代码限制](http://msdn.microsoft.com/en-us/library/aa240819%28v=vs.60%29.aspx)：

> 可以加载到表单、类或标准模块中的代码量限制为 65,534 行...... [等]

[项目限制](http://msdn.microsoft.com/en-us/library/aa716295%28VS.60%29.aspx)：

> 单个项目最多可以包含 32,000 个“标识符”（任何非保留关键字），其中包括但不限于表单、控件、模块、变量、常量、过程、函数和对象。请注意，标识符的实际数量受限于可用内存。

[数据限制](http://msdn.microsoft.com/en-us/library/aa716182%28v=vs.60%29.aspx)：

> Visual Basic 中任何窗体或模块的 VBA 模块的数据段（即声明部分中定义的数据）最大可达 64K。

# android - 不存在这样的表

> ID：10212833
> 
> 赞同：0
> 
> 时间：2012-04-18T15:33:55.337
> 
> 标签：android, sqlite

我正在尝试在数据库中创建多个表，但第一个表仅创建成功，另外两个给我错误我想知道如何确保创建表

```
04-18 17:20:45.343: E/AndroidRuntime(956): android.database.sqlite.SQLiteException: no such table: squares: , while compiling: SELECT _squareid, squarename, squarelatitude, squarelongitude FROM squares 
```

这是我的代码

```
public class Dbinfo {

    public static final String KEY_RAWID = "_id";
    public static final String KEY_RAWNAME = "name";
    public static final String KEY_PASSWORD = "password";
    public static final String KEY_EMAIL = "email";
    public static final String KEY_SQUAREID = "_squareid";
    public static final String KEY_SQUARENAME = "squarename";
    public static final String KEY_SQUARELATITUDE = "squarelatitude";
    public static final String KEY_SQUARELONGITUDE = "squarelongitude";
    private static final String KEY_STREETID = "streetid";
    private static final String KEY_STREETNAME = "streetname";
    private static final String KEY_STREETLATITUDE="streetlatitude";
    private static final String KEY_STREETLONGTIUDE="streetlongtiude";
    private static final String KEY_STREETCAPACITY = "streetcapacity";
    private static final String KEY_STREETFOREIGN = "streetforegin";

    private static final String DATABASE_NAME = "users_DB";
    private static final String DATABASE_TABLE = "users";
    private static final String DATABASE_TABLESQUARES = "squares";
    private static final String DATABASE_TABLE_STREETS = "streets";
    private static final int DATABASE_VERSION = 1;

    private dbusers ourhelper;
    private final Context ourcontext;
    private static SQLiteDatabase ourDatabase;

    private static class dbusers extends SQLiteOpenHelper {

        public dbusers(Context context) {
            super(context, DATABASE_TABLE, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub

            db.execSQL("CREATE TABLE " + DATABASE_TABLE + "(" + KEY_RAWID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_RAWNAME
                    + " TEXT NOT NULL, " + KEY_PASSWORD + " TEXT NOT NULL, "
                    + KEY_EMAIL + " TEXT NOT NULL);");

            db.execSQL("CREATE TABLE " + DATABASE_TABLESQUARES + "("
                    + KEY_SQUAREID + "INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_SQUARENAME + "TEXT NOT NULL, " + KEY_SQUARELATITUDE
                    + "TEXT NOT NULL, " + KEY_SQUARELONGITUDE
                    + "TEXT NOT NULL);");

            final String STREET = "CREATE TABLE " + DATABASE_TABLE_STREETS
                    + " (" + KEY_STREETID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_STREETNAME+
                    " TEXT NOT NULL"+KEY_STREETLATITUDE+"TEXT NOT NULL"+KEY_SQUARELONGITUDE
                    + " TEXT NOT NULL, " + KEY_STREETCAPACITY
                    + " text not null, FOREIGN KEY (" + KEY_STREETFOREIGN
                    + ") REFERENCES " + DATABASE_TABLESQUARES + " ("
                    + KEY_SQUAREID + "));";
            db.execSQL(STREET); 
```

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:52:43.280

首先使用 SQLite 浏览器检查您的数据库。
如果没有找到表，那么您在创建表时遇到问题。请检查以下代码以创建
表。

```
private static final String DATABASE_CREATE3 = "create table IF NOT EXISTS "
        + TABLE_EXAM + "( " + COLUMN_EXAM_ID
        + " integer primary key autoincrement, " 
        + COLUMN_SUBCHAWISE + " text not null, "
        + COLUMN_EXAM_TYPE + " text not null, "
        + COLUMN_EXAM_DETAILS + " text not null, "
        + COLUMN_MARKS + " number not null);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:39:44.340

在您的`sql`创建中的列名之后放置一些空格`String`（对于 table `DATABASE_TABLESQUARES`）：

```
db.execSQL("CREATE TABLE " + DATABASE_TABLESQUARES + "("
                    + KEY_SQUAREID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_SQUARENAME + " TEXT NOT NULL, " + KEY_SQUARELATITUDE
                    + " TEXT NOT NULL, " + KEY_SQUARELONGITUDE
                    + " TEXT NOT NULL);"); 
```

进行上述修改后，您必须卸载应用程序并重新运行它，以便再次调用 的`onCreate`方法`SQLiteOpenHelper`以根据新的 sql 初始化数据库`String`。`String`此外，正如 Sam 的评论，还要修改表的 sql 创建`DATABASE_TABLE_STREETS`并在列声明之间添加一些逗号（就像您之前对其他两个表所做的那样），否则当您尝试访问该表时会再次遇到麻烦。

# c++ - 当构造函数抛出异常时会运行哪些析构函数？

> ID：10212842
> 
> 赞同：85
> 
> 时间：2012-04-18T15:34:16.090
> 
> 标签：c++, constructor, exception-handling, destructor

在 C++ 中，如果构造函数抛出异常，会运行哪些析构函数？

特别是，如果异常发生在初始化列表或正文期间，会有什么不同吗？

另外，继承和成员呢？大概所有已完成的建筑都会被摧毁。如果只构造了一些成员，那么只有那些成员会被破坏吗？如果存在多重继承，是否所有已完成的构造函数都会被破坏？虚拟继承会改变什么吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-18T15:35:15.087

**如果构造函数抛出异常，会运行哪些析构函数？**

在该范围内完全创建的所有对象的析构函数。

**如果异常发生在初始化列表或正文期间，有什么区别吗？**

所有已完成的对象都将被销毁。
如果构造函数从未被完全调用过，则对象从未被构造，因此不能被破坏。

**继承和成员呢？大概所有已完成的建筑都会被摧毁。如果只构造了一些成员，那么只有那些成员会被破坏吗？如果存在多重继承，是否所有已完成的构造函数都会被破坏？虚拟继承会改变什么吗？**

所有已完成的建筑都会遭到破坏。是的，只有完全创建的对象才会被破坏。

好读：

**[Herb Sutter 的构造函数失败](http://www.gotw.ca/gotw/066.htm)**

特别是，喜欢他解释的部分：

> 用生物学术语来说，受孕发生了——构造函数开始了——但是尽管尽了最大的努力，还是流产了——构造函数从未跑到term(ination)。
> 
> 顺便说一句，这就是为什么如果构造函数没有成功就永远不会调用析构函数的原因——没有什么可以销毁的。*“它不会死，因为它从未活过。”* 请注意，这使得短语*“构造函数引发异常的对象”*实际上是矛盾的。这样的东西甚至比以前的对象还要少……它从未存在过，从未存在过，从未呼吸过它的第一次呼吸。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-18T16:48:27.073

> 在 C++ 中，如果构造函数抛出异常，会运行哪些析构函数？

所有具有构造函数的对象都运行完成。

> 特别是，如果异常发生在初始化列表或正文期间，会有什么不同吗？

不会。在异常之前完全构造的所有成员都将运行其析构函数。在构造过程中抛出的成员和所有其他非构造成员将**不会**运行其析构函数。成员构造的顺序是明确定义的，因此如果您知道异常抛出的点，您就可以确切地知道会发生什么。

> 另外，继承和成员呢？

同样的规则适用。

> 大概所有已完成的建筑都会被摧毁。

是的

> 如果只构造了一些成员，那么只有那些成员会被破坏吗？

是的

> 如果存在多重继承，是否所有已完成的构造函数都会被破坏？

是的

> 虚拟继承会改变什么吗？

不
，但请注意：虚拟继承确实会影响调用构造函数的顺序。如果您不熟悉订单是如何定义的，那么在您查找确切的规则之前，这可能是不直观的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-18T15:43:29.497

由于构造函数而在本地范围内创建的任何对象都将被破坏。运行时处理返回堆栈，调用析构函数，直到找到处理程序。

如果从构造函数中抛出异常，则将调用所有完全构造的子对象的析构函数。此外，如果构造函数是`new`表达式的一部分，则将调用适当的放置删除运算符（如果存在）。

# node.js - CALL_NON_FUNCTION_AS_CONSTRUCTOR（本机）

> ID：10212843
> 
> 赞同：2
> 
> 时间：2012-04-18T15:34:17.837
> 
> 标签：node.js, mongodb, express, mongoose

我正在尝试在我的数据库中使用新架构，但在尝试实例化它时出错。我还有另外两个模式（在文件夹“models”中的两个不同模型文件中），它们完美无缺，并且它们的形状相同。错误消息是什么意思，我可以做些什么来防止它发生？

我认为控制器中的其他代码没有任何问题，因为我尝试使用相同的语法在同一位置实例化另一个数据库模型，并且效果很好。

**我得到的错误：** 500 TypeError: object is not a function at Schema.CALL_NON_FUNCTION_AS_CONSTRUCTOR (native)

对不起下面的所有代码。我不知道在这种情况下我可以排除什么。无论如何，提前谢谢！

控制器文件：

```
module.exports = function(app, service) {
    var imageModel = service.useModel('image');

    app.post('/file-upload', function(req, res, next) {

           // other code...

        var imageAdd = new imageModel.ImgSchema();

    }
} 
```

mongodb 模型（models/image.js）：

```
module.exports = function (mongoose) {

    var modelObject = {};

    var Schema = mongoose.Schema,
        ObjectId = Schema.ObjectId;

    var ImgSchema = new Schema({
        name : String,
        size : Number,
        type : String
    });

    modelObject.ImgSchema = ImgSchema;
    modelObject.Images = mongoose.model('Images', ImgSchema);

    return modelObject;
}; 
```

对于 mongodb，我使用的是服务文件（service.js）：

```
var environment;
var mongoose = require('mongoose');

module.exports.init = function(env, mongoose) {
    environment = env;
    mongoose = mongoose;
};

module.exports.useModel = function (modelName) {
    var checkConnectionExists = (mongoose.connection.readyState === 1 || mongoose.connection.readyState === 2);
    if(!checkConnectionExists)
        mongoose.connect(environment.db.URL);
    return require("./models/" + modelName)(mongoose);
};

module.exports.useModule = function (moduleName) {
    return require("./modules/" + moduleName);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:27:41.240

modelObject.ImgSchema 不是构造函数，但是 modelObject.Images 是。

```
var imageAdd = new imageModel.Images(); 
```

*我可能会将图像重命名为图像*

# c# - 类别匹配 - 正则表达式与全文搜索

> ID：10212846
> 
> 赞同：0
> 
> 时间：2012-04-18T15:34:24.370
> 
> 标签：c#, sql, sql-server-2008

我有一个相当大的类别表，其中包含 1500 个类别（一些单词其他包含多个），我正在寻找通过标题将新产品与这些类别匹配的最佳方法。

我一直在研究使用正则表达式并在产品描述中循环搜索关键词，但这在尝试一次添加一千多个产品时效率不高，我也一直在研究全文搜索（FREETEXT 和包含）但 FreeText 搜索似乎带回了很多结果，因为它匹配产品描述中的任何和所有单词。

有没有人做过类似的事情，试图通过描述来自动化产品属于哪个类别，并且可以提供一些建议或指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:41:25.497

所以我理解的问题是，给出一个描述告诉我这个描述适用于哪个类别？

做这种工作的一个常用方法是建立一个[朴素贝叶斯分类](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)过程，并把你所有的描述都放在这个过程中。

像这样的分类通常分两个阶段进行。

阶段 1：已知的描述/类别对用于“训练”分类器。

阶段 2：一旦分类器被训练，你可以给它未知数据，然后它会返回描述匹配给定类别的概率。

这种方法中的分类器通常非常准确，但考虑到我们正在处理统计数据，错误通常会潜入

# java - 我可以使用 JNI 在 Java 代码中引用 C++ 对象吗？

> ID：10212851
> 
> 赞同：12
> 
> 时间：2012-04-18T15:34:38.923
> 
> 标签：java, c++, java-native-interface

我在任何地方都没有看到这个（或者我只是简单地没有看到它）但是有没有办法使用 JNI 返回 c/c++ 对象并在 java 中使用该对象？

例如（很简单）：

```
class simpleClass{
...
private:
int intVar;
public:
int getIntVar();
void setIntVar(int someNum);
...
} 
```

在我的 java 代码中，我将如何做类似的事情：

```
...
simpleClass sc = new simpleClass();
sc.setIntVar(9);
System.out.println(sc.getIntVar());
... 
```

我意识到这是一个非常简单的例子，但我只是在寻找概念——我想到的 C++ 类非常大，我希望避免创建大量的包装方法......

如果不可能，那很好，只是希望节省几天的编码时间，哈哈

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T15:58:35.237

您的 Java 版本的 SimpleClass 应该做两件事。一，保留一个私有的 long 值，该值将 C++ 指针的值存储到后备本机对象（您可能必须使用 BigInteger，具体取决于本机指针的大小 - unsigned long long？）。第二，使公共方法（例如`setIntVal`）本地化。

```
public class SimpleClass {
    private long nativePtr;

    public SimpleClass() {
        nativePtr = initNativeSimpleClass();
    }

    public void destroy() {
        destroyNativeSimpleClass();
        nativePtr = 0L;
    }

    protected void finalize() throws Throwable {
        destroyNativeSimpleClass();
        nativePtr = 0L;
    }

    public native int getIntVal();
    public native void setIntVal(int val);

    private native long initNativeSimpleClass();
    private native void destroyNativeSimpleClass();
} 
```

然后在您的 JNI 代码中实现这些本地方法。该`initNativeSimpleClass()`方法将*新建*一个支持 C++ 的`SimpleClass`. 然后该`destroyNativeSimpleClass()`方法将*删除*该实例。访问器方法将使用 的值`nativePtr`，将其转换为真正的指针，并在本机支持实例上执行适当的操作。

这个习惯用法带来了内存泄漏的真正风险，因为该类的用户在使用完实例后必须调用destroy。如果他们不这样做，则支持的本机实例可能不会被正确销毁。正如我在示例中所示，您可以覆盖`finalize`以调用本机销毁器函数，但所有关于如何不能依赖 finalize 的警告仍然适用。通过`nativePtr`在销毁时将值设置为 0，您可以避免在多次调用销毁时出现段错误（在 C++ 中删除 NULL 是安全的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T15:38:43.780

不，你不能。C++ 和 Java ABI 完全不同——一方面，c++ 没有定义一个。真的，c++ 有很多特性根本无法映射到 Java，这根本行不通。你认为 Java 会如何处理 c++ 模板？指向原语的指针？*不是*指针的对象？

现在您可以做的是使用 SWIG 为您生成正确的包装器方法 - 这实际上会起作用，并且不会比您计划的更多工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:44:45.380

JNI 仅为原始（或相当原始）类型定义其接口，以及内存缓冲区传递/管理功能。无法映射复杂的对象类型。但是，您可以通过编写自己的（单个）序列化/反序列化函数来实现此效果，如[通过 JNI 将 C++ 类返回给 Java](https://stackoverflow.com/questions/1711490/returning-a-c-class-to-java-via-jni)。

# migration - 即使使用 UTF-8，Unicode 字体也会显示为垃圾

> ID：10212852
> 
> 赞同：0
> 
> 时间：2012-04-18T15:28:28.810
> 
> 标签：migration, encoding, linux

我有几个包含 unicode 内容的博客，只是将它们迁移到新服务器 CentOS - Apache。现在，unicode 字体显示为垃圾，我不确定出了什么问题。

我的 wp-config 和 Apache AddDefaultCharset 设置为 UTF-8。尽管如此，我还是看到了垃圾。

顺便说一句，同一台服务器在非 WP 页面中很好地提供 Unicode 内容。但是，三个 WP 网站都有这个问题。

示例内容：à®…à®´à®•à®¿à®¯ à®¨à®¿à®±à®®à¯à®Ÿà¯ˆà®¯ à®ªà®šà¯à®šà¯¯à ®•à¯à®•à®¿à®³à®¿à®¯à¯‡,

```
My DB details:mysql> show variables like 'char%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | latin1                     | 
| character_set_connection | latin1                     | 
| character_set_database   | latin1                     | 
| character_set_filesystem | binary                     | 
| character_set_results    | latin1                     | 
| character_set_server     | latin1                     | 
| character_set_system     | utf8                       | 
| character_sets_dir       | /usr/share/mysql/charsets/ | 
+--------------------------+----------------------------+
8 rows in set (0.00 sec) 
```

请让我知道如何更改它，以便现有数据库内容的编码也被更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:38:11.587

您的数据已被错误编码。UTF-8 数据被解释为 CP1252。

```
>>> print u'à®…à®´à®•à®¿à®¯ à®¨à®¿à®±à®®'.encode('cp1252').decode('utf-8')
அழகிய நிறம 
```

# c - AVR 蝴蝶 UART - 无法接收数据

> ID：10212853
> 
> 赞同：1
> 
> 时间：2012-04-18T15:34:45.147
> 
> 标签：c, interrupt, avr, uart

我正在使用 Atmega169/AVR Butterfly 的 UART 传输到另一块板，波特率 56700，无奇偶校验，1 个停止位，无流量控制。振荡器运行在 7,3768Mhz（选中）。我可以成功传输数据（用另一块板和 PC/超级终端检查），但没有收到任何数据 - 运行调试器时，配置位都设置正确，但 RXC 一直为假 - 我还检查了是否可以发送数据到我自己（将 TXD 连接到 RXD 并接地），但没有成功。（尝试使用 ISR 和轮询）下面是代码的相关部分，希望你能处理它 - PORTB 用作示波器测试的输出（我知道我可以只使用一个引脚，但什么都没有其他现在在 PORTB 上）：

```
int main(void){
OSCCAL_Calibrate();       // calibrate the internal oscillator
int UBRR_VAL  = ((F_CPU)/(BAUD*16)-1);
UART_Init(UBRR_VAL);
DDRB |= 0xFF;
PORTB = 0;
testCharSend();

while(1);
return 0;
}

void testCharSend()
{
char i = 'x';
while(1){       
    Uart_Tx(i);
}
}

void UART_Init(unsigned int baudrate)
{
    // Set baud rate
    UBRRH = (unsigned char)(baudrate>>8);
    UBRRL = (unsigned char)baudrate;

    UCSRA = 0;

    // Enable receiver and transmitter
    UCSRB = (1<<RXEN)|(1<<TXEN);

    // Async. mode, 8bit, No parity, 1 stop bit (like CC2540)
    UCSRC = (0<<UMSEL)|(0<<UPM0)|(0<<USBS)|(3<<UCSZ0)|(0<<UCPOL);

// enable receive interrupt
UCSRB |= (1<<RXCIE);

// flush UART
UART_Flush();
}

void UART_Flush( void )
{
unsigned char  dummy;
while ( UCSRA & (1<<RXC) ) dummy = UDR;
}

void Uart_Tx(char data)
{
    while (!(UCSRA & (1<<UDRE)));
    UDR = data;
}

ISR (USART0_RX_vect)
{
    PORTB ^= 0xFF;
char c = UDR;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:59:50.570

好的，我用示波器测试了连接，板子上的RXD线坏了，切换板子现在可以工作了，所以上面的代码是有效的！

# c# - 正则表达式从 SQL 查询中提取列定义

> ID：10212855
> 
> 赞同：2
> 
> 时间：2012-04-18T15:34:50.890
> 
> 标签：c#, regex

考虑以下查询：

```
select
    foo,
    bar,
    yourmom
from
    theTable

select top 10 *
from
    theTable

select distinct foo, bar + 1, yourmom from theTable 
```

我想要一个可以提取的正则表达式查询：

```
foo,
bar,
yourmom

*

foo, bar + 1, yourmom 
```

分别。

我试过`^\sselect\s(distinct\s)?(top\s\d*)?(?'columns'.*\s)from[\s.]*$`了，我认为这会奏效，但没有。我已经玩了一段时间了，但我仍然无法让它在所有三个测试用例中工作。有人可以帮我解决他们的正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:48:20.733

编辑：首先，您需要使 .-match 每个字符，包括换行符。在 java 中您可以设置 DOTALL 标志，但在 C# 中我相信您应该使用该`RegexOptions.SingleLine`选项。

那么这个表达式应该可以工作：

```
^\s*select\s+(?:distinct\s+)?(?:top\s+\d*\s+)?(?'columns'.*?)from.*$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:53:56.780

我认为为 SQL 查询编写一个“适当的”解析器实际上比使用正则表达式更容易（检查[Irony](http://irony.codeplex.com/)：它很棒并且带有一个 SQL 示例）。

# silverlight - 数据绑定到 Silverlight 模板化按钮控件中的命令

> ID：10212857
> 
> 赞同：0
> 
> 时间：2012-04-18T15:34:58.300
> 
> 标签：silverlight, data-binding, controltemplate

我正在尝试为可见性、工具提示和命令创建一个带有数据绑定的模板化按钮控件。可见性绑定有效，工具提示也有效，但命令无效。另一个进程负责注入视图模型并将其与视图相关联，并且其他数据绑定正在工作，所以我非常有信心它可以正常工作。

在资源字典中：

```
<Converters:BoolToVisibilityConverter x:Key="boolVisibilityConverter" />

<Style TargetType="local:ImageButton">
    <Setter Property="Visibility" Value="{Binding FallbackValue=Visible, Path=ToolIsAvailable, Converter={StaticResource boolVisibilityConverter} }"/>
    <Setter Property="Command" Value="{Binding ButtonCommand}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:ImageButton">
                <Grid>
                <Image Source="{TemplateBinding Image}" 
                       ToolTipService.ToolTip="{Binding ToolName}"  />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

模板化控件

```
public class MyButton: ImageButton
{
    public MyButton(MyCommandViewModel viewmodel)
    {
        this.DefaultStyleKey = typeof(ImageButton);
        this.Image = new BitmapImage(new Uri("/MyProject;component/Themes/myimage.png", UriKind.Relative));
                this.DataContext = viewmodel;
    }

} 
```

并在视图模型中

```
public MyCommandViewModel()
        : base("My Tool", true)
    {
    }

    public class CommandViewModel
    {
    public CommandViewModel(string toolName, bool isAvailable)
    {
                    ToolIsAvailable = isAvailable;
                    ToolName = toolName;
        _buttoncommand = new DelegateCommand(() =>
        {
            ExecuteCommand();
        },
        () => { return CanExecute; });
    }

    private bool _canExecute = true;
    public bool CanExecute
    {
        get { return _canExecute; }
        set 
        { 
            _canExecute = value; 
            OnPropertyChanged("CanExecute");  
            if (_command != null) _command.RaiseCanExecuteChanged();  
        }
    }

    private DelegateCommand _buttoncommand;
    public ICommand ButtonCommand
    {
        get { return _buttoncommand; }
    }
    protected virtual void ExecuteCommand()
    {
    }
    public bool ToolIsAvailable
    {
        get { return _toolIsReady; }
        set { _toolIsReady = value; OnPropertyChanged("ToolIsAvailable"); }
    }
    public string ToolName
    {
        get { return _toolName; }
        set { _toolName = value; OnPropertyChanged("ToolName"); }
    }
         } 
```

为什么其他数据绑定正常运行但命令数据绑定不正常。我发现这个类似的帖子 [在 WPF 中覆盖模板化按钮的命令](https://stackoverflow.com/questions/2088876/overriding-a-templated-buttons-command-in-wpf) 我是否需要模板化网格控件并使用 RoutedCommands？我不确定我是否理解为什么 Silverlight 将 Command 绑定与其他绑定不同，所以我怀疑我只是在代码中有一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:38:33.763

专门寻找数据上下文是否有效？

```
Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.ButtonCommand}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T02:26:52.433

这是我的解决方案。使用与上面相同的 commandviewmodel 和相同的 MyCommandViewModel

```
<Style TargetType="local:ImageButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:ImageButton">
                <Grid>
                <Image Source="{TemplateBinding Image}" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

数据绑定现在在用户控件中完成

```
<UserControl x:Class="SilverlightApplication11.Test"
...
   >
    <UserControl.Resources>
        <Converters:BoolToVisibilityConverter x:Key="boolVisibilityConverter" />
    </UserControl.Resources>
    <Grid>
      <local:ImageButton Image="/SilverlightApplication11;component/Themes/hand.png" Command="{Binding ButtonCommand}" Visibility="{Binding FallbackValue=Visible, Path=ToolIsAvailable, Converter={StaticResource boolVisibilityConverter} }"/>
    </Grid>
</UserControl> 
```

和背后的代码

```
 public Test(TestCommandViewModel vm)
    {
        InitializeComponent();

        this.Loaded += (o, e) => this.DataContext = vm;
    } 
```

# javascript - 是否有用于执行方法签名的 Javascript 库？

> ID：10212859
> 
> 赞同：2
> 
> 时间：2012-04-18T15:35:03.167
> 
> 标签：javascript, architecture, backbone.js, unobtrusive-javascript, signature

我想有一种方法来为某些 Javascript 方法指定哪些属性是必需的，它们应该匹配什么模式，以及如果它们不匹配如何响应。

这是因为它会导致大量重复代码来检查方法级别的必需参数和可选参数。

举这个例子。在这里，我想建立一个灯箱。如果他们给我发送一个字符串，我将显示一个仅包含内容的灯箱。如果他们向我发送选项对象，我会查找“标题”和“内容”。能够以某种标准化的方式指定这一点不是很好吗？

```
// Static method for generating a lightbox
// callerOptions = '' //if sent a string, the lightbox displays it with no title
// callerOptions = {
//      content: '' // required popup contents. can be HTML or text.
//  ,   title: '' // required title for the lightbox
//  ,   subtitle: '' // optional subtitle for lightbox
//  }
lightbox = function (callerOptions) {
    if (!callerOptions) {
        log.warn(_myName + ': calling me without a message to display or any options won\'t do anything');
        return;
    }

    // If they send us a string, assume it's the popup contents
    if (typeof(callerOptions) === 'string') {
        this.options = {};
        this.options.content = callerOptions;

    // Otherwise assume they sent us a good options object
    } else {
        this.options = callerOptions;
    }

    _build();
    _contentLoaded();
}; 
```

我希望能够使用一些我从未听说过的库来做这样的事情：

```
// Maybe this is what it looks like with a method signature enforcement library
lightbox = function (callerOptions) {
    TheEnforcer(
    ,   {   valid: [
                'string' // assumes that it is testing type against arguments by convention
            ,   'typeof([0].title) === "string" && typeof([0].content) === "string"'
            ]
        }
    });

    // If they send us a string, assume it's the popup contents
    if (typeof(callerOptions) === 'string') {
        this.options = { 'content': callerOptions };

    // Otherwise we know they sent us a good options object
    } else {
        this.options = callerOptions;
    }

    _build();
    _contentLoaded();
}; 
```

有没有人见过这样的 Javascript 库？也许内置于 1000 个 JS MV* 框架之一？

**编辑**：似乎这*通常*由 MV* 框架处理。Backbone.js 的模型属性同时具有验证值和默认值。我认为这些可以用来满足或几乎满足我在这里介绍的用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:14:09.443

*（这本来是一个评论，但它比预期的要长。）*

我知道这样的功能有时会很有用，但我认为应该尽可能避免使用。我认为 ECMA 标准永远不应该包括这一点。

举个例子：灯箱标题和内容是必需的。为什么？为什么不显示一个没有标题或内容的空灯箱？在我看来，这是一个不错的后备方案。如果你正在构建一个 API，任何使用它的人都可以检查空标题和内容，如果需要，就不要调用灯箱函数。另外，我不喜欢尝试在 JS 中强制执行类型的想法。

我认为这与 jQuery 完全不同。他们只是提供了一个可链接的包装对象（里面有一堆有用的方法），并且支持某种编码/语法风格，这就是 jQuery 的大部分内容。它使语言看起来更简单，不像类型和方法签名强制 - 绝对不是“尽可能简单”（对此感到抱歉）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:54:16.763

我想这有两个部分，哲学/架构和实现。

在哲学方面，我认为没有什么比描述每种方法需要和不需要的明确期望和错误消息更简单的了（对于我的 API 用户，而不是我，API 开发人员）。

在实施方面，这就是问题的最初含义，我想我必须自己回答。Backbone.js 的模型，尤其是 .validate 部分，似乎很好地满足了这一需求。我还没有使用它们，但这是迄今为止我发现的唯一类似的东西。

[http://documentcloud.github.com/backbone/#Model-validate](http://documentcloud.github.com/backbone/#Model-validate)

编辑：另一个解决方案可能是编译时间。Google Closure Compiler 似乎可以很好地处理这个问题：[https ://developers.google.com/closure/compiler/docs/js-for-compiler](https://developers.google.com/closure/compiler/docs/js-for-compiler)

# asp.net - 在静态 ASP:Menu 中显示当前节点的子项

> ID：10212862
> 
> 赞同：0
> 
> 时间：2012-04-18T15:35:12.203
> 
> 标签：asp.net, menu, parent-child, menuitem, aspmenu

我正在尝试从 SiteMap 文件构建一个垂直的静态 ASP 菜单，其中节点的子项仅在当前选择它们或其父节点时才显示。例如，假设我的 SiteMap 是：

Item1
Item2
- Child2.1
- Child2.2
Item3
- Child3.1
- Child3.2

在主页 (Item1) 上，我希望我的静态菜单显示为：

项目
1 项目 2
项目 3

如果我在 Item2 或 Child2.1 页面上，我希望我的静态菜单显示为：

Item1
Item2
- Child2.1
- Child2.2
Item3

我试图在 Menu_DataBound 期间在 MasterPage 中以编程方式执行此操作，但到目前为止都失败了。由于我网站的主导航已经使用了动态菜单，我不希望在这个二级导航中使用它们。

代替使用 asp:Menu，我尝试在标签中构建代码：

```
Protected Sub LeftNavMenu_DataBound(sender As Object, e As System.EventArgs) Handles     
LeftNavMenu.DataBound
        If LeftNavMenu.Items.Count > 0 Then
            Dim item As MenuItem
        For Each item In LeftNavMenu.Items
            DisplayChildMenuText(item)
        Next
    Else
        lblNav.Text = "The Menu control does not have any items."
    End If
End Sub

Sub DisplayChildMenuText(ByVal item As MenuItem)
    If item.Selected Then
        lblNav.Text &= "<li><span class=""active""></span><a href=""" & item.NavigateUrl & """>" & item.Text & "</a></li>"
        If item.ChildItems.Count > 0 Then
            Dim childItem As MenuItem
            lblNav.Text &= "<ul>"
            For Each childItem In item.ChildItems
                lblNav.Text &= "<li><a href=""" & childItem.NavigateUrl & """>" & childItem.Text & "</a></li>"
            Next
            lblNav.Text &= "</ul>"
        End If
    Else
        lblNav.Text &= "<li><a href=""" & item.NavigateUrl & """>" & item.Text & "</a></li>"
    End If
End Sub 
```

如果我在顶级链接（Item2、Item3）上，这将显示正确的导航，但如果我选择子页面，则会失败。

如果这已在其他地方得到回答，我真诚地道歉。这似乎是一个相当基本的请求，应该内置到 ASP 菜单中，但是我已经尝试了数周来寻找解决方案。当然，我可能只是在搜索错误的关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T00:41:34.610

弄清楚了。为了更大的利益而分享。这会在 MenuItemDataBound 事件期间评估菜单中的每个项目，检查项目是否是子项目，检查它是否在活动节点中，如果不是，则将其删除。

```
<script runat="server">
Protected Sub Menu1_MenuItemDataBound(sender As Object, e As System.Web.UI.WebControls.MenuEventArgs) Handles Menu1.MenuItemDataBound
    If e.Item.Parent IsNot Nothing Then
        If e.Item.Parent.Text <> SiteMap.CurrentNode.Title And e.Item.Parent.Text <> SiteMap.CurrentNode.ParentNode.Title Then
            e.Item.Parent.ChildItems.Remove(e.Item)
        End If
    End If
End Sub
</script> 
```

确保您的菜单设置为显示两个 StaticDisplayLevel，例如：

```
<asp:Menu ID="Menu1" runat="server" DataSourceID="SiteMapDataSource1" IncludeStyleBlock="False"
    MaximumDynamicDisplayLevels="0" SkipLinkText="" StaticDisplayLevels="2"> 
```

# session-cookies - 即使会话关闭也存储 cookie

> ID：10212863
> 
> 赞同：6
> 
> 时间：2012-04-18T15:35:12.720
> 
> 标签：session-cookies, playframework-2.0

什么是 Play 的最佳方法！应用程序记住用户？我认为唯一可能的解决方案是使用客户端cookie，对吗？但是一旦浏览器关闭，这个会话就被破坏了，对下一个请求无效？你是如何/如何解决（d）这个问题的？

至于现在，我`userid`在会话（每个会话）中加密，如下所示：

```
session("userid", user.id); 
```

然后我使用拦截器来避免在每次需要时传递参数，就像这里描述的那样：[如何避免在 play2 中到处传递参数？](https://stackoverflow.com/questions/9629250/how-to-avoid-passing-parameters-everywhere-in-play2)

**但是如何记住用户，甚至更好，在下一个请求时自动登录用户**？

**编辑：2016-03-11** 请注意，某些浏览器可能会将会话 cookie 存储更长的时间。例如，您可以在 Chrome 中设置以记住下次访问时打开的标签。这意味着 Play Session cookie 将在您下次打开浏览器时恢复。

从 Play 2.4 开始，会话 cookie maxAge（您需要在 中设置`application.conf`）重命名为：`play.http.session.maxAge`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T22:51:58.170

要在用户关闭浏览器时使会话不超时，您可以使用`session.maxAge`application.conf 中的参数。

例如：

```
# Set session maximum age in seconds (4w)
session.maxAge=2419200 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:13:59.847

引用[Play 2.0 会话文档](http://www.playframework.org/documentation/2.0/ScalaSessionFlash)：

> 会话没有技术超时。它在用户关闭 Web 浏览器时过期。如果您需要特定应用程序的功能超时，只需将时间戳存储到用户会话中并根据您的应用程序需要使用它（例如，最长会话持续时间、最长不活动持续时间等）。

出于安全原因，现代浏览器将在退出时使 cookie 无效，这不是您可以更改的，因为它会允许黑客使用他们不正当拥有的凭据来做坏事。

我会重新评估您是否*真的*希望用户保持登录状态，因为这样做通常会带来安全风险。但是，如果您决定仍然希望用户保持登录状态，您将不得不尝试一些不基于 cookie 的方法，而目前，我不确定那会是什么样子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:02:26.910

我试过这个，它对我有用。它基本上是一个组合动作。

```
def RememberAction(f: Request[AnyContent] => Result): Action[AnyContent] = {
  行动{请求=>
    if(!request.session.get("email").isDefined && request.cookies.get("remember-email").isDefined) {
      f(request).asInstanceOf[PlainResult].withSession("email" -> request.cookies.get("remember-email").get.value)
    } 别的 {
      f（请求）
    }
  }
}

```

然后你可以像这样在你的控制器中使用这个动作：

```
    def index = RememberAction { 隐式请求 =>
      好的（“你好世界！”）
    }

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:28:07.033

如果您不强制 a`newSession`或用户不删除 cookie，则用户仍应处于登录状态。

可能是您的浏览器设置为在关闭时删除 cookie，或者您正遭受外部副作用的困扰。但我可以确认关闭浏览器后 cookie 在我的开发环境（Chrome 和 Firefox 中）中仍然存在。

# android-ndk - 调用内部 Android.mk 文件来构建预建库不起作用

> ID：10212869
> 
> 赞同：1
> 
> 时间：2012-04-18T15:35:22.963
> 
> 标签：android-ndk

我有一个项目组织如下：

```
project/jni/Android.mk
project/jni/libA/Android.mk
project/jni/libB/Android.mk
project/lib/armeabi/libA.so
project/lib/armeabi/libB.so 
```

我的 libA 和 libB 在我的主 Android.mk 上设置为预构建库，因为我不希望每次构建主 Android.mk 时都构建它们。这是我所拥有的：

```
LOCAL_PATH := $(call my-dir)

###########################################    
# Declare the prebuilt A library    
###########################################
include $(CLEAR_VARS)
LOCAL_MODULE := A-prebuilt
LOCAL_SRC_FILES := ../lib/$(TARGET_ARCH_ABI)/libA.so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/libA
include $(PREBUILT_SHARED_LIBRARY)

###########################################    
# Declare the prebuilt B library    
###########################################    
include $(CLEAR_VARS)     
LOCAL_MODULE := B-prebuilt    
LOCAL_SRC_FILES := ../lib/$(TARGET_ARCH_ABI)/libB.so    
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/libB/include    
include $(PREBUILT_SHARED_LIBRARY)        

###########################################    
# Declare our main module    
###########################################    
include $(CLEAR_VARS)
LOCAL_MODULE := libjnimain    
LOCAL_SRC_FILES := \    
    main.c

# for logging
LOCAL_LDLIBS    += -llog

# include the prebuilt libraries    
LOCAL_SHARED_LIBRARIES := \
A-prebuilt \    
B-prebuilt

#This will include all Android.mk files in sub-directories 
#of the current build file's path.
include $(call all-subdir-makefiles)    
include $(BUILD_SHARED_LIBRARY) 
```

我遇到的主要问题是构建预构建库。我似乎无法通过调用他们的 Android.mk 来构建 libA 或 libB，因为当我调用主 Android.mk 时。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T09:31:27.903

顾名思义，预建库永远不会被构建（它们已经被构建）。如果您需要再次构建预构建的库，您将需要包含它们的源代码并更改您的 Android.mk 以使用这些源代码再次构建这些模块，使用 BUILD_SHARED_LIBRARY。但是，您可以将整个库源代码树包含到一个`libs`文件夹中，并将它的 Android.mk 包含到您的文件夹中。

**请注意，您添加的库仅在其源更改且不受其他模块更改的影响时才会构建。**

一个基本的例子如下：

首先是项目的布局。有3个模块：

*   ver：这是一个库： libver.so 。包括来源。作为 ndk-build 的一部分构建
*   魔术：这是一个预建库：libmagic.so
*   getver：正在构建的可执行文件

文件布局：

```
sdk@AndroidDev:~/ndk/sources/getver$ find jni/
jni/
jni/getver.c
jni/libs
jni/libs/libver
jni/libs/libver/compiled_ver.c
jni/libs/libver/Android.mk
jni/libs/libver/ver.h
jni/libs/libmagic.so
jni/libs/Android.mk
jni/Android.mk 
```

接下来，顶层 Android.mk（它在 jni/ 中）：

```
sdk@AndroidDev:~/ndk/sources/getver$ cat jni/Android.mk
LOCAL_PATH := $(call my-dir)
my_LOCAL_PATH := $(LOCAL_PATH)

# Include all libs (built and prebuilt)
include $(LOCAL_PATH)/libs/Android.mk

# Build my executable
LOCAL_PATH := $(my_LOCAL_PATH)
include $(CLEAR_VARS)
LOCAL_MODULE    := getver
LOCAL_SRC_FILES := getver.c
LOCAL_SHARED_LIBRARIES= ver magic
include $(BUILD_EXECUTABLE) 
```

jni/libs/Android.mk，用于包含所有库：

```
sdk@AndroidDev:~/ndk/sources/getver$ cat jni/libs/Android.mk
LOCAL_PATH := $(call my-dir)

# Prebuilt Lib
include $(CLEAR_VARS)
LOCAL_MODULE := magic
LOCAL_SRC_FILES := libmagic.so
include $(PREBUILT_SHARED_LIBRARY)

# Lib to be built as part of building process.
include $(CLEAR_VARS)
include $(LOCAL_PATH)/libver/Android.mk 
```

最后是libver.so的Android.mk（jni/libs/libver/Android.mk）：

```
sdk@AndroidDev:~/ndk/sources/getver$ cat jni/libs/libver/Android.mk
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := ver
LOCAL_HDR_FILES := ver.h
LOCAL_SRC_FILES := compiled_ver.c
include $(BUILD_SHARED_LIBRARY) 
```

在上面的示例中，永远不会构建 libmagic.so，因为它是一个预构建的库。但是，每次 libver 源更改时都会构建 libver.so。**如果 getver 源发生变化，它不会被重建**。下面的图解示例（我使用*touch*命令来模拟 getver.c 源代码的变化）：

第一次构建：

```
sdk@AndroidDev:~/ndk/sources/getver$ ../../ndk-build
Gdbserver      : [arm-linux-androideabi-4.4.3] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
Compile thumb  : getver <= getver.c
Compile thumb  : ver <= compiled_ver.c
SharedLibrary  : libver.so
Executable     : getver
Install        : getver => libs/armeabi/getver
Prebuilt       : libmagic.so <= jni/libs/
Install        : libmagic.so => libs/armeabi/libmagic.so
Install        : libver.so => libs/armeabi/libver.so 
```

模拟 getver 模块源的编辑：

```
sdk@AndroidDev:~/ndk/sources/getver$ touch jni/getver.c 
```

重建（注意 libver.so**没有**重建）：

```
sdk@AndroidDev:~/ndk/sources/getver$ ../../ndk-build
Gdbserver      : [arm-linux-androideabi-4.4.3] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
Compile thumb  : getver <= getver.c
Executable     : getver
Install        : getver => libs/armeabi/getver
Install        : libmagic.so => libs/armeabi/libmagic.so
Install        : libver.so => libs/armeabi/libver.so 
```

模拟 libver.so 源的编辑

```
sdk@AndroidDev:~/ndk/sources/getver$ touch jni/libs/libver/compiled_ver.c 
```

重建（注意 getver 被重建，因为它依赖于 libver.so：

```
sdk@AndroidDev:~/ndk/sources/getver$ ../../ndk-build
Gdbserver      : [arm-linux-androideabi-4.4.3] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
Compile thumb  : ver <= compiled_ver.c
SharedLibrary  : libver.so
Executable     : getver
Install        : getver => libs/armeabi/getver
Install        : libmagic.so => libs/armeabi/libmagic.so
Install        : libver.so => libs/armeabi/libver.so 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T14:19:13.097

您可以在更高级别的 Android.mk 文件中使用以下内容以递归方式遍历目录。您将它放在 project/jni/Android.mk 中，它会进入 libA 和 libB 并处理其中的 Android.mk 文件。

```
include $(call all-subdir-makefiles) 
```

# javascript - Chrome 扩展 - 发送请求慢

> ID：10212874
> 
> 赞同：0
> 
> 时间：2012-04-18T15:35:40.327
> 
> 标签：javascript, google-chrome-extension, request

我无法从后台脚本获取内容脚本请求值。

```
content_script.js
=================
var elements = undefined
var properties = undefined
var targets = undefined
chrome.extension.sendRequest({greeting: "elements"}, function(response) {
    elements = response.input;
});
if (elements == undefined){
    var elements = ["a","img"];
}else{
    elements = elements.split(',');
}
chrome.extension.sendRequest({greeting: "properties"}, function(response) {
    properties = response.input;
});
if (properties == undefined){
    var properties = ["alt","id","class"];
}else{
    properties = properties.split(',');
}
chrome.extension.sendRequest({greeting: "targets"}, function(response) {
    targets = response.input;
});
if (targets == undefined){
    var targets = ["onclick","href"];
}else{
    targets = targets.split(',');
}...
...More code and references to elements following... 
```

上面的代码仅在代码中断（即等待）之前才有效，然后再执行与上面设置的值相关的任何操作，我想我可以做一些事情来做到这一点，但如果可能的话，我更愿意使用更有效的解决方案。

（以供参考：）

```
background.js
=============
chrome.extension.onRequest.addListener(
function(request, sender, sendResponse) {
    switch (request.greeting){
        case "elements":
                var elements = localStorage["elements"];
                sendResponse({input: elements});
                break;
        case "properties":
                var properties = localStorage["properties"];
                sendResponse({input: properties});
                break;
        case "targets":
                var targets = localStorage["targets"];
                sendResponse({input: targets});
                break;
        }
  }); 
```

我已经在这里呆了 3 个小时（仍在学习我在用 JS 做什么）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:38:27.697

嗯，你不能这样做：

```
chrome.extension.sendRequest({greeting: "properties"}, function(response) {
    properties = response.input;
});
if (properties == undefined){ // always undefined
    var properties = ["alt","id","class"];
}else{
    properties = properties.split(',');
} 
```

`sendRequest`是异步的。

检查未定义的正确方法是：

```
if (typeof properties == "undefined") 
```

如果您需要所有这些东西，只需发出 1 个请求并在回调中执行所有操作：

```
chrome.extension.sendRequest({greeting: "all"}, function(response) {
    if (response.elements === null) {
        var elements = ["a","img"];
    } else {
        var elements = response.elements.split(',');
    }

    if (response.properties === null) {
        var properties = ["alt","id","class"];
    } else {
        var properties = response.properties.split(',');
    }

    if (response.targets === null) {
        var targets = ["onclick","href"];
    } else {
        var targets = response.targets.split(',');
    }
}); 
```

在后台：

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    switch (request.greeting){
        case "all":
            sendResponse({
                elements: localStorage.getItem("targets"),
                properties: localStorage.getItem("properties"),
                targets: localStorage.getItem("targets")
            });
            break;
    }
}); 
```

# javascript - Javascript - document.createTextNode()

> ID：10212875
> 
> 赞同：2
> 
> 时间：2012-04-18T15:35:40.907
> 
> 标签：javascript, html

使用它会剥离我的 newLine 字符

是否有替代方案可以呈现 html？

```
 function viewCommentToggle( comment )
{
    theRow = document.getElementById("id"+comment.id);

    idx = 2;

        // Comment field
        cell = theRow.cells[idx];
        while( cell.childNodes.length > 0 ) cell.removeChild(cell.childNodes[0]);

            element = document.createTextNode(comment.comment);

        cell.appendChild(element);

         } 
```

这就是我所关心的：

```
element = document.createTextNode(comment.comment); 
```

仅供参考....这就是我所做的并且有效：

```
 function viewCommentToggle( comment )
{
    theRow = document.getElementById("id"+comment.id);

    idx = 2;

        // Comment field
        //cell = theRow.cells[idx];
        // while( cell.childNodes.length > 0 ) cell.removeChild(cell.childNodes[0]);

        cell = $("#id"+comment.id+" > td:eq("+idx+")");
        $(cell).empty();

        $(cell).html( comment.comment == null ? "" : comment.comment.replace(/\n/g,"<br/>").replace(/\r/g,"") ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T15:37:21.393

换行符仅在`<pre>`块内有意义（AFAIK）。

除此之外，要强制换行，您必须将字符串拆分为单独的行，然后创建一个文本节点，然后`<br/>`为每个节点创建一个，例如：

```
var lines = text.split('\n');
var parent = document.body; // the node you want to insert the string into
for (var i = 0; i < lines.length; ++i) {
    parent.appendChild(document.createTextNode(lines[i]));
    parent.appendChild(document.createElement('br'));
} 
```

见[http://jsfiddle.net/alnitak/WFTD6/](http://jsfiddle.net/alnitak/WFTD6/)

# css - 如何使用 CSS 替换或更改文本？

> ID：10212879
> 
> 赞同：17
> 
> 时间：2012-04-18T15:35:45.523
> 
> 标签：css

如何使用 CSS 将“书签”替换为“链接”？

```
<div class="lfr-panel-title"> 
  <span> Bookmarks </span> 
</div> 
```

我知道 CSS 不是为此而设计的，但是有跨浏览器的方式吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-18T15:40:48.787

你可以做一些像这样疯狂的事情。

**[现场演示](http://jsfiddle.net/loktar/zFFRE/)**

```
.lfr-panel-title span{
   display:none;
}

.lfr-panel-title:after{
   content: "links";   
}​ 
```

但就像每个人都指出的那样……不推荐。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T15:38:40.623

CSS 不会*更改*或*替换* **确切的文本**。

您需要使用某种客户端语言（JavaScript、jQuery 等）或服务器端语言（php、ASP.NET 等）来实现这一点。

* * *

正如[@Loktar 所说](https://stackoverflow.com/a/10212980/682480)，您可以通过and伪选择器***模仿***该功能。`:before``:after`

虽然，不推荐用于该用途，并且考虑到 IE，它不完全跨浏览器兼容。[通过QuirksMode](http://www.quirksmode.org/css/contents.html#t15)查看跨浏览器兼容性图表：

![:before :after 跨浏览器图表](../Images/bea09fe9a9e4d2d651d65786f52fc1f7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:39:21.417

简短的回答：没有。

长答案：CSS 不打算或非常有能力操纵内容。您可以使用背景图像替换文本，但这不是很容易访问。各种 :after 或 :before 技术也不能很好地跨浏览器兼容。

您将需要 javascript 以这种方式操作内容。

# sql - sql查询组

> ID：10212880
> 
> 赞同：1
> 
> 时间：2012-04-18T15:35:49.610
> 
> 标签：sql, group-by

SQL查询问题

我有一个像这样的查询

```
select proposal_id, service_id,account_type 
from table1 
```

结果是这样的：

```
proposal_id  service_id  account_type
   1          1001        INTERVAL
   1          1002        INTERVAL
   2          1003        NON INTERVAL
   2          1004        NON INTERVAL
   3          1005        NON INTERVAL
   3          1006        INTERVAL 
```

我想写一个查询：对于每个proposal_id，如果所有服务都有INTERVAL，那么得到'INTERVAL'，如果所有NON-INTERVAL 得到'NON-INTERVAL'，如果两者都有，得到'Both'

对于上面的示例，它应该返回

```
proposal_id   account_type
   1           INTERVAL
   2           NON-INTERVAL
   3           BOTH 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:52:11.727

数据：

```
declare @table table (id int, sid int, acc nvarchar(20))
insert @table VALUES (1,1001,'INTERVAL'),(1,1002,'INTERVAL'),(2,1003,'NON INTERVAL'),(2,1004,'NON INTERVAL'),
(3,1005,'NON INTERVAL'),(3,1006,'INTERVAL') 
```

询问：

```
select x.Id
    ,   CASE counter
            WHEN 1 THEN x.Account_Type
            ELSE 'BOTH'
        END AS Account_Type
from (
    select  Id, Count(DISTINCT(acc)) AS counter, MAX(acc) As Account_Type
    from @table
    GROUP BY Id
) x 
```

结果

```
Id          Account_Type
----------- --------------------
1           INTERVAL
2           NON INTERVAL
3           BOTH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:45:10.680

```
SELECT
      b.proposal_id
     ,CASE
        WHEN s1.proposal_id IS NOT NULL AND s2.proposal_id IS NOT NULL THEN 'BOTH'
        WHEN s1.proposal_id IS NOT NULL THEN 'INTERVAL'
        WHEN s2.proposal_id IS NOT NULL THEN 'NON-INTERVAL'
        ELSE 'UNKNOWN'
     END [account_type] 
FROM table1 b
  LEFT JOIN(
    SELECT proposal_id,account_type FROM table1 WHERE account_type = 'INTERVAL'
    ) s1
      ON b.proposal_id = s1.proposal_id
  LEFT JOIN (
    SELECT proposal_id,account_type FROM table1 WHERE account_type = 'NON-INTERVAL'
    )s2
      ON b.proposal_id = s2.proposal_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:47:05.923

您可以使用`count distinct`来确定是否两者都`CASE`用于确定要显示的内容

```
SELECT DISTINCT proposal.proposal_id, 
       CASE cou 
            WHEN 1 THEN type ELSE 'Both' END as TYPE
FROM proposal
INNER JOIN (SELECT proposal_id, count(distinct type) cou 
            FROM proposal GROUP BY proposal_id) inn 
       ON proposal.id = inn.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:57:51.587

```
select proposal_id,
case when count(distinct account_type) > 1 then 'BOTH'
    else max(account_type)
    end
from table1
group by proposal_id 
```

你[这里有提琴手](http://sqlfiddle.com/#!3/a3058/21)。

# c++ - 多图迭代器不起作用

> ID：10212881
> 
> 赞同：2
> 
> 时间：2012-04-18T15:35:49.687
> 
> 标签：c++, iterator, multimap

我有一个`Playlist`类，它有一个向量，`Tracks`每个`Track`都有一个`multimap<long, Note>`as 数据成员。

```
class Track {
private:
    multimap<long, Note> noteList;
} 
```

使用迭代器访问轨道是没有问题的，所以这里的这部分工作正常：

```
vector<Track>::iterator trackIT;
    try{
        for(noteIT = trackIT->getNoteList().begin(); noteIT != trackIT->getNoteList().end(); noteIT++){
            cout << "---" << noteIT->second.getName() << endl;
        }
    }catch (int e){
        cout << "exception #" << e << endl;
    } 
```

我接下来要做的是迭代`Notes`each `Track`。但是从这部分开始，所有的输出都停止了。所以我只能看到第一首曲目的名称。之后的任何 cout 都没有显示，编译器也没有给我任何错误。甚至 try catch 块内的 cout 也不起作用..

```
vector<Track>::iterator trackIT;
multimap<long, Note>::iterator noteIT;
for(trackIT = this->playlist.getTracklist().begin(); trackIT < this->playlist.getTracklist().end(); trackIT++){
    cout << trackIT->getTrackName() << endl;

    for(noteIT = trackIT->getNoteList().begin(); noteIT != trackIT->getNoteList().end(); noteIT++){
        cout << "---" << noteIT->second.getName() << endl;
    }
}
cout << "random cout that is NOT shown" << endl; // this part doesn't show up in console either 
```

此外，我用来添加 Note 对象的 Track 类中的方法如下所示：

```
void Track::addNote(Note &note) {
    long key = 1000009;
    this->noteList.insert(make_pair(key, note));
}

// I'm adding the notes to the track like this:
Note note1(440, 100, 8, 1, 1);
note1.setName("note1");
synthTrack.addNote(note1); 
```

任何想法为什么迭代器不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:02:11.853

改变

```
noteIT < trackIT->getNoteList().end() 
```

到

```
noteIT != trackIT->getNoteList().end() 
```

并非所有迭代器都支持小于/大于比较。

如果你有 c++11，你可以使用基于范围的 for 循环：

```
for (Note& note : trackIT->getNoteList()) 
```

或者你可以使用 BOOST_FOREACH

```
BOOST_FOREACH (Note& note, trackIT->getNoteList()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T21:14:07.380

如果您真的对轨道键进行硬编码，那么地图中只会有一个轨道，因为 std::map 存储唯一键......

```
long key = 1000009; //If yo are really doing this, this key is already inserted so it will fail to insert more. 
```

此外，如果您想要更优雅的方法，您可以使用函数对象。

```
struct print_track
{
    void operator()(const Track& track)
    {
        cout << track.getTrackName() << endl;
        std::for_each(track.getNoteList().begin(), track.getNoteList().end(), print_track_name());
    }
};

struct print_note_name
{
    void operator()(const std::pair<long,Note>& note_pair)
    {
       cout << "---" << note_pair.second.getName() << endl;
    }
};

//In use...
std::for_each(playlist.getTracklist().begin(), playlist.getTracklist.end(), print_track()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T21:39:41.733

您没有显示`getTrackList`or的定义`getNoteList`，但人们常犯一个错误 - 如果您返回容器的副本而不是对其的引用，则迭代器将指向不同的容器，从而无法进行比较。不仅如此，由于容器是临时的，任何使用迭代器都会导致未定义的行为。

# asp.net-mvc - 我如何获得这些 RouteData？

> ID：10212882
> 
> 赞同：0
> 
> 时间：2012-04-18T15:35:57.363
> 
> 标签：asp.net-mvc

真的很难获得这些路由数据值......当我输入时，我似乎只能在调试器中进入它！我怎样才能找到他们？

![在此处输入图像描述](../Images/95c79465f60f8355e669dfcec212e94d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:40:42.727

我可能会遗漏一些东西，但这会返回什么？

```
RouteData.Route.Defaults["key"]; //Obviously replace "key" with the value you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:44:54.427

在您的情况下，`RouteData.Route`它作为一个`RouteBase`对象显示给您，因此您无法访问默认值。您需要将其转换`Route`为实际实现：

```
((System.Web.Routing.Route)RouteData.Route).Defaults 
```

# java - Java 中有 ResolvedFuture 类吗？

> ID：10212883
> 
> 赞同：4
> 
> 时间：2012-04-18T15:36:01.923
> 
> 标签：java, concurrency, future

[https://gist.github.com/2414323](https://gist.github.com/2414323)

有时，您已经知道计算的结果，但您的界面要求您返回一个`Future`. 与其实现一个长的匿名类，或者扩展本身很复杂的 AbstractFuture 或 FutureTask ，我发现只创建一个实现`Future`.

我的问题是 - 与我在下面写的类似的类是否已经存在于一个标准库中？

**用法：**

```
Future<Boolean> iHaveToReturnAFutureButIAlreadyKnowTheAnswer() {
    return new ResolvedFuture(true);
} 
```

**代码：**

```
/**
 * Used when you need to return a Future, but you already have the answer.
 */
public class ResolvedFuture<T> implements Future<T>{
    private final T item;

    public ResolvedFuture(T item) {
        this.item = item;
    }

    @Override
    public boolean cancel(boolean mayInterruptIfRunning) {
        return false;
    }

    @Override
    public boolean isCancelled() {
        return false;
    }

    @Override
    public boolean isDone() {
        return true;
    }

    @Override
    public T get() throws InterruptedException, ExecutionException {
        return item;
    }

    @Override
    public T get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {
        return item;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:44:20.797

标准库不支持，但一些第三方库可能包含这样的实现。例如，[`Futures.immediateFuture()`](http://guava-libraries.googlecode.com/svn/tags/release08/javadoc/com/google/common/util/concurrent/Futures.html#immediateFuture%28V%29)来自 Google Guava。

# actionscript-3 - Flash AS3 Radio Player 播放 BBC 电台

> ID：10212889
> 
> 赞同：2
> 
> 时间：2012-04-18T15:36:14.280
> 
> 标签：actionscript-3, flash, stream

我正在用 Flash 构建一个广播播放器，我需要让所有 BBC 广播电台在播放器中工作。

我正在尝试使用他们的 AAC 流，我有一些用于阅读 AAC 流的 ActionScript 3 代码，但这似乎不适用于 BBC 广播流。我得到的错误信息是： `NetStream.Play.StreamNotFound`但是同样的流在 WinAmp 中运行良好。

这是我正在尝试播放的示例 AAC 流（BBC Radio 3）：

`http://bbcmedia.ic.llnwd.net/stream/bbcmedia_lc1_radio3_q?s=1334749463&e=1334763863&h=3bc870c82d1e1f360d8cfc1d296d97c2`

这是我用来播放流的 AS3 类：

```
package play {

import flash.net.NetConnection;
import flash.net.NetStream;
import flash.events.NetStatusEvent;
import flash.events.AsyncErrorEvent;

public class aacplay {

    private var netConn:NetConnection=new NetConnection();
    private var netStrm:NetStream;
    private var urlStr:String;

    public function aacplay(radiourl) {
        urlStr=radiourl;
        connect();
    }

    private function connect():void{
        netConn.close();
        netConn=new NetConnection();
        netConn.addEventListener(NetStatusEvent.NET_STATUS,netStatusHdlr);
        netConn.addEventListener(AsyncErrorEvent.ASYNC_ERROR,asyncErrorHdlr);
            netConn.connect(null);
        }

        private function netStatusHdlr(e:NetStatusEvent):void{
            trace('netStatusHdlr:'+e.info.code);
            switch(e.info.code){
                case 'NetConnection.Connect.Success':
                    requestAudio();
                    break;
            }
        }

        private function requestAudio():void{
            if(netStrm!==null){
                netStrm.close();
            }
            netStrm=new NetStream(netConn);
            netStrm.addEventListener(NetStatusEvent.NET_STATUS,netStatusHdlr);
            netStrm.addEventListener(AsyncErrorEvent.ASYNC_ERROR,asyncErrorHdlr);
            netStrm.checkPolicyFile=false;
            netStrm.play(urlStr);
        }

        private function asyncErrorHdlr(e:AsyncErrorEvent):void{
            trace('asyncErrorHdlr:'+e);
        }
    }
} 
```

我正在调用这个类：

```
var aac:aacplay=new aacplay('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_lc1_radio3_q?s=1334749463&e=1334763863&h=3bc870c82d1e1f360d8cfc1d296d97c2'); 
```

谁能告诉我为什么我无法播放 BBC 流 - 这是一个安全问题吗？如果是这样，我该如何解决这个安全问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T09:28:44.293

using`netConn.connect(null)`表示您将播放本地 mp4 或 flv 文件，或手动将数据推送到缓冲区`NetStream.appendBytes()`

在这种情况下，您需要：

*   打开`URLSocket`你的网址
*   接收数据
*   即时解析它
*   使用上一步中`FLVTag`的数据创建`AAC`
*   将此数据推送到`NetStream.appendBytes()`

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#appendBytes()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#appendBytes())

# .net - 实体框架自定义属性数据绑定错误

> ID：10212891
> 
> 赞同：1
> 
> 时间：2012-04-18T15:36:20.927
> 
> 标签：.net, vb.net, entity-framework

我有一个从具有整数属性*hide*的表生成的实体。我在部分类*HideBoolean*中创建了一个自定义属性，以将整数属性转换为布尔值。

```
 Public Property HideBoolean As Boolean
        Get
            Return If(hide = 1, True, False)
        End Get
        Set(ByVal value As Boolean)
            Me.hide = If(value, 1, 0)
        End Set
    End Property 
```

我正在使用连接到实体的实体数据源来数据绑定到表单视图，布尔属性是数据绑定到复选框。在更新 formview 上的记录时，我收到以下错误消息

> 在插入、更新或 >delete 操作期间，在实体上找不到名为“HideBoolean”的属性。检查以确保指定为绑定表达式的属性 > 可用于数据源。

我已经在 setter 上进行了一些日志记录，并且更新没有受到影响。

为了测试实体，我尝试更改代码中记录的布尔属性的值并保存记录，这很有效。

```
 Dim a As New Data.PortalEntities
        Dim r As Data.Reports_Reports = a.Reports_Reports.Where(Function(b) b.reportID = reportID).FirstOrDefault
        r.HideBoolean = Not r.HideBoolean
        a.SaveChanges() 
```

表中的值已成功更改。

编辑：这是我的 aspx 中的代码

```
<asp:EntityDataSource ID="EntityDataSource1" runat="server" ConnectionString="name=PortalEntities" DefaultContainerName="PortalEntities" 
    EnableFlattening="False" EnableUpdate="True" EntitySetName="Reports_Reports" AutoGenerateWhereClause="true">
    <WhereParameters>
        <asp:Parameter DefaultValue="311" Name="reportID" Type="Int32" />
    </WhereParameters>
</asp:EntityDataSource>
<asp:FormView ID="FormView1" runat="server" DataKeyNames="reportID" DataSourceID="EntityDataSource1" DefaultMode="Edit">
    <EditItemTemplate>
        HideBoolean:
        <asp:CheckBox ID="HideBooleanCheckBox" runat="server" Checked='<%# Bind("HideBoolean") %>' />
        <asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" CommandName="Update" Text="Update" />
        <asp:LinkButton ID="UpdateCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
    </EditItemTemplate>
</asp:FormView> 
```

# c - 给定浮点数时如何避免FPU？

> ID：10212892
> 
> 赞同：4
> 
> 时间：2012-04-18T15:36:27.393
> 
> 标签：c, linux-kernel, floating-point, fpu, rtai

好吧，这根本不是一个优化问题。

我正在编写一个（目前）简单的 Linux 内核模块，我需要在其中找到一些位置的平均值。这些位置存储为浮点（即`float`）变量。（我是整件事的作者，所以我可以改变这一点，但我宁愿保持浮动的精确性，如果可以避免的话，不要参与其中）。

现在，这些位置值存储（或至少习惯于）在内核中只是为了存储。一个用户应用程序写入这些数据（通过共享内存（我使用的是 RTAI，所以是的，我在内核空间和用户空间之间有共享内存）），而其他应用程序则从中读取数据。我假设从浮点变量读取和写入不会使用 FPU，所以这是安全的。

安全，我的意思是[避免在内核中使用 FPU，](https://stackoverflow.com/questions/6397430/overhead-of-supporting-floating-point-arithmetic-inside-the-linux-kernel)更不用说某些系统甚至可能没有 FPU。我不会使用[kernel_fpu_begin/end](http://www.linuxsmiths.com/blog/?p=253)，因为这可能会破坏我的任务的实时性。

现在在我的内核模块中，我真的不需要太多的精度（因为无论如何位置都是平均的），但我需要它达到 0.001。**我的问题是，如何在不使用 FPU 的情况下将浮点数转换为整数（原始数字的 1000 倍）？**

我考虑过手动从浮点数的位模式中提取数字，但我不确定这是否是个好主意，因为我不确定字节序如何影响它，或者即使所有架构中的浮点都是标准的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T16:07:32.563

SoftFloat软件包具有完全符合您要求的功能[（](http://www.jhauser.us/arithmetic/SoftFloat.html)`float32_to_int32`它在软件中实现了 IEEE 754）。

最后，无论如何在内核中提供某种浮点支持（无论是硬件还是软件）都会很有用，因此在您的项目中包含它很可能是一个明智的决定。它也不是太大。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T16:02:44.850

如果您想告诉 gcc 使用软件浮点库，显然有一个开关，尽管在标准环境中可能不是交钥匙：

[在 x86 linux 上使用软件浮点](https://stackoverflow.com/questions/1018638/using-software-floating-point-on-x86-linux)

事实上，这篇文章表明 linux 内核及其模块已经编译为`-msoft-float`：

[http://www.linuxsmiths.com/blog/?p=253](http://www.linuxsmiths.com/blog/?p=253)

也就是说，@PaulR 的建议似乎是最明智的。而且，如果您提供的 API 可以进行您喜欢的任何转换，那么我不明白为什么它比其他任何东西都丑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:17:23.310

真的，如果可能的话，我认为您应该更改模块的 API 以使用已经采用整数格式的数据。当您不允许在内核空间中使用浮点时，在内核用户界面中使用浮点类型只是一个坏主意。

话虽如此，如果您使用单精度浮点数，它基本上总是 IEEE 754 单精度，并且字节序应该与整数字节序匹配。据我所知，Linux 支持的所有拱门都是如此。考虑到这一点，只需将它们视为无符号 32 位整数并提取这些位以缩放它们。如果可能的话，我会缩放 1024 而不是 1000；这样做真的很容易。只需从尾数位（位 0-22）开始，位 23 上的“或”，然后如果指数（减去 127 的偏差后）小于 23 则右移，如果大于 23 则左移。你会需要处理右移量大于 32 的情况（C 不允许；

如果您碰巧知道您的值不会超过特定范围，当然，您可以消除其中一些检查。事实上，如果你的值永远不会超过 1 并且你可以选择缩放，你可以选择它为 2^23，然后你可以直接使用`((float_bits & 0x7fffff)|0x800000)`指数为零时的值，否则右移。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T16:07:59.760

您可以使用有理数而不是浮点数。操作（乘法，加法）也可以在不损失准确性的情况下实现。

如果您真的只需要 1/1000 精度，则可以将 x*1000 存储为长整数。

# ios - iOS设计，轮播快速解决方案

> ID：10212895
> 
> 赞同：0
> 
> 时间：2012-04-18T15:36:38.383
> 
> 标签：ios, user-interface, rotation

我认为有一个非常简单的解决方案，可能有人可以提供一些简单的建议。我在视图控制器中有两个元素，并希望根据旋转来更改位置：

纵向：元素 A 在底部，元素 B 在顶部

横向：左侧元素 A，右侧元素 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:53:56.963

您需要覆盖 UIViewController 类 willAnimateRotationToInterfaceOrientation:duration: 方法来重新定位元素 A 和 B。您不能使用自动调整大小掩码来执行此操作（如果您正在考虑该方法）。

# java - 比较可能以不同内部顺序出现的字符串

> ID：10212896
> 
> 赞同：1
> 
> 时间：2012-04-18T15:36:40.240
> 
> 标签：java, string, junit, compare, assert

我正在编写一个 JUnit 测试来检查一个统一字符串中的消息（每行一条消息）。格式如下：

> [* 给爱丽丝的消息 *]
> 
> 嘿，第一条消息
> 
> 第二条消息
> 
> [* 给吉姆的消息 *]
> 
> 抱怨
> 
> 你在吗？
> 
> [* 一般信息 *]
> 
> 欢迎大家！
> 
> 这是另一个信息。

问题是我收到的实际字符串的顺序可能会改变（除了总是出​​现在字符串末尾的一般消息）。例如：有一次我可以先得到 Jim 的消息，所以当我尝试使用 assertEquals() 时测试失败。不幸的是，我无权访问生成消息的代码，因此无法进行任何修改。

比较这些字符串并验证它们是否相同的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:42:29.987

您应该重新组织测试以解决任意重新排序问题，例如，如下所示：

*   将字符串拆分为单独的消息
*   将一般消息和所有其他消息分开
*   以相同的顺序排列预期和实际消息（例如按字母顺序）
*   比较预期和实际消息的有序列表。现在它们的顺序相同，它们应该逐项相等
*   检查一般消息是否在实际消息流中的所有其他消息之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:39:12.623

你最好比较`Set`消息，因为你所追求的模糊字符串比较太棘手了......

# search - 在 MacVIm 中打开 Ack

> ID：10212908
> 
> 赞同：6
> 
> 时间：2012-04-18T15:37:14.337
> 
> 标签：search, vim, macvim, ack

我是 MacVim 的新手并且已经安装了 Janus。我不知道如何使用 Ack.vim 搜索我的项目。

对于 janus，它说“自定义：Janus 重新绑定 command-shift-f () 以调出 :Ack。” 但是当我执行 command-shift-f 时，我会收到以下消息：

```
The plugin ack is disabled for the following reason: The ack program is not installed 
```

如何使用 ack？如果我必须安装它，我该怎么做？（猜测它与 .vimrc 或 .vimrc.after 有关，但不确定）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:53:01.940

您必须先安装`ack`- 它是一个外部程序：

Mac OS 的说明可以在[ack-website](http://betterthangrep.com/install/)上找到，并且需要 MacPorts 或 homebrew。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T15:52:09.087

Ack 是一个外部程序，Ack.vim 只是 Ack 的一个接口。如果您已经使用了 Ack，则希望该接口连接到 Ack：如果您的机器上还没有它，您可能不需要它。

如果你真的需要/想要使用 Ack，只需[安装](http://betterthangrep.com/install/)它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:34:54.407

实际上在这里使用 MacVim 和 Janus 得到同样的东西。

如果你通过命令行 'mvim ' 打开 macvim。然后 ack 可用。如果您通过“在此处打开新的 macvim 缓冲区”打开，则 ack 不可用。

猜测路径问题。

# c# - 如果该行中的第一列为空，则实体框架为该行返回空

> ID：10212913
> 
> 赞同：6
> 
> 时间：2012-04-18T15:37:22.563
> 
> 标签：c#, entity-framework, null, left-join

我在我的实体框架模型中看到了一个奇怪的行为。我有一个看起来像这样的查询：

```
var rows = ( from alarm in context.Alarms
             join temp  in context.ListDetails on alarm.ListDetailId equals  temp.ListDetailId into entries from entry in entries.DefaultIfEmpty()
             join read  in context.Reads       on alarm.ReadId       equals  read.ReadId
             join plate in context.Images      on alarm.ReadId       equals plate.ReadId
             where alarm.IActive == 1 && ! alarm.TransmittedAlarm 
             where  read.IActive == 1 
             where plate.IActive == 1 && plate.ImageTypeId == 2
             select new { alarm, entry, read, plate } ).ToArray(); 
```

查询按列名按字母顺序返回所有列。事实证明，对于结果集中的几行，该列为 NULL。当我在调试器中展开 rows 变量时，我看到整行都是空的！

编辑：一些澄清。

“第一列”是指第一行的第一列，即在“SELECT A, B, C FROM ...”中，我的意思是 A。碰巧实体框架构建的查询返回了所有连接结果集中的列按字母顺序排列，按字母顺序排列的第一个可以为空，并且对于某些行为空。

有问题的列不是主键；如果它是主键，则不能为空。

当 Entity Framework 将返回数据的行处理成对象时，它会查看每一行中第一列的值。如果该列为空，则返回该行的空值，而不是具有与该列对应的属性设置为空的对象。

我不相信这与左外连接有任何关系。碰巧我的查询使用了一个。但是，我还没有进行任何测试来验证这一点，所以这只是一个假设。

有人见过这个吗？有没有人可以解决这个问题？

托尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T18:19:07.747

我可以确认我遇到了完全相同的问题：当 EF 形成的 SQL 查询`null`在结果的第一列中时，它返回 null 而不是实体。这意味着完全遵循：

```
using (var dc = new MyDbContext())
{
    var q = dc.Lands; //Lands is DbSet<Land>
    q = q.Where(criteria); //this leads to SQL query returning null in first column, confirmed by profiler
    var t = q.Single(); //t is now null
} 
```

如果我们采用另一个标准，它不会导致`null`第一列，`t`是正常的非`null`实体。

在我看来，这是 EF 中某种晦涩的行为/错误。

**更新**

经过几个小时的探索，我发现了以下行为。EF 确实会返回`null`具有`NULL`结果第一列的实体（这会破坏预期的行为），但它有几个关于将哪一列放在选择列表中的概念。因此，在使我的模型与我的数据库状态完全一致之后（这意味着表示所有`NULLABLE`数据库列并用 替换`required`导航属性`optional`） - 我使用的是 Code First，所以有很多地方需要明确说明**数据库**- 我已经让它工作。

这意味着您应该针对您的数据库检查模型的商店级别定义（取决于您使用的范式，基于设计器还是基于代码，这将是不同的地方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:19:18.737

你`DefaultIfEmpty`在你的加入中使用。它的意思是

> 如果没有`entries`与连接条件 ( ) 匹配的项目，我希望您将类型( )`alarm.ListDetailId equals temp.ListDetailId`的单个默认值放入.`ListDetail``null``entries`

在这种情况下，EF 生成一个`LEFT JOIN`. 事实上，这段代码是`LEFT JOIN`用 Linq2Sql 或 EF 生成的众所周知的方法。

如果表中没有行与条件匹配，则该`LEFT JOIN`语句选择`NULL`表中所有列的值`JOIN`。实际上，唯一重要的列是实体的 PK 列。EF 检查 PK 值是否为`NULL`，确定不存在实体并`null`放入`entries`。然后您将其`null`作为`entry`结果的属性值。

# c++ - _IO_wide_data_2：这是什么？

> ID：10212918
> 
> 赞同：4
> 
> 时间：2012-04-18T15:37:49.443
> 
> 标签：c++, c, debugging, gdb

我正在使用嵌入式平台（架构为[SH4](http://en.wikipedia.org/wiki/SuperH#SH-4)），几分钟前我的程序因 SIGABRT 而崩溃。

幸运的是，我在 gdbserver 下运行，被这个信号中断的线程有这个堆栈转储：

```
#0  0x2a7f1678 in raise () from /home/[user]/target/lib/libc.so.6
#1  0x2a7f2a4c in abort () from /home/[user]/target/lib/libc.so.6
#2  0x2a81ade0 in __libc_message () from /home/[user]/target/lib/libc.so.6
#3  0x2a81f3a8 in malloc_printerr () from /home/[user]/target/lib/libc.so.6
#4  0x2a8c3700 in _IO_wide_data_2 () from /home/[user]/target/lib/libc.so.6 
```

你知道这里发生了什么吗？一个糟糕的免费（）？坏删除？坏的malloc？“_IO_wide_data_2”应该做什么？我看到了我也不理解的 malloc_printerr() 调用。

谷歌在这方面给了我[234 个结果](https://www.google.com/search?q=_IO_wide_data_2)，但所有这些都只是因为这些人在他们的回溯中有那个“功能”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T10:54:13.067

它是一个`stderr`支持广泛字符的流。

您可以将其分解为多个部分：

*   `_IO`： 输入输出。
*   `wide_data`: 宽数据
*   `2`: 标准错误

你也有；

`_IO_wide_data_0`：标准输入 `_IO_wide_data_1`：标准输出

它们被链接为 2->1->0。

`malloc_printerr()`用于在动态内存管理中发生/捕获不良事件时打印各种错误消息。但是你的踪迹看起来是有上限的（你有没有删除任何东西？）。

这可能是对 stderr 的写入，您尝试在内存中、损坏的内存中、在……中写入一些东西。

或者它可能是较低的堆栈点导致写入 stderr。

或者……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:42:33.430

> 一个糟糕的免费（）？坏删除？坏的malloc？

是的，我认为这是其中之一。

如果错误很容易重现，请在 malloc.c 中放置一个断点，malloc_printerr。当调试器停在那里时，您可能会获得完整的调用堆栈并在您的代码中找到错误的地方。我仍然不知道为什么会这样，进入 __libc_message 后，调用堆栈被破坏。

* * *

这就是我发现这种奇怪行为的方式。删除相同缓冲区两次的简单应用程序：

```
void main()
{
    char * buf = new char[4*1024];
    delete[] buf;
    delete[] buf;
} 
```

在 malloc_printerr 中，调用堆栈如下所示：

```
#0  malloc_printerr (action=3, str=0x297d0b5c "double free or corruption (top)", ptr=<value optimized out>) at malloc.c:5887
#1  0x29750be8 in __libc_free (mem=0x411008) at malloc.c:3622
#2  0x29612c70 in operator delete (ptr=<value optimized out>) at ../../../../libstdc++-v3/libsupc++/del_op.cc:49
#3  0x29612cc2 in operator delete[] (ptr=<value optimized out>) at ../../../../libstdc++-v3/libsupc++/del_opv.cc:37
#4  0x0040068a in main (argc=1, argv=0x7bb26814) at double_free.cpp:47 
```

输入 __libc_message 后：

```
#0  __libc_message (do_abort=2, fmt=0x297d09c8 "*** glibc detected *** %s: %s: 0x%s *** ") at ../sysdeps/unix/sysv/linux/libc_fatal.c:50
#1  0x2974f3a8 in malloc_printerr (action=3, str=0x297d0b5c "double free or corruption (top)", ptr=<value optimized out>) at malloc.c:5887
#2  0x297f3700 in _IO_wide_data_2 () from /cygdrive/c/STM/SH4-Linux-gcc/opt/STM/STLinux2.3/devkit/sh4/target/lib/libc.so.6
Backtrace stopped: frame did not save the PC 
```

也许它与**属性**（（noreturn））和编译器优化有关？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T23:29:49.387

你能在 GDB 下运行时重现这个错误吗？您可以使用此处找到的各种“堆栈”命令获得更多堆栈跟踪信息：

[GDB 备忘单](http://www.yolinux.com/TUTORIALS/GDB-Commands.html)

您可能需要向上或向下移动几个堆栈帧以确定发生了什么。

# jquery - 如何使用jquery增加或减少div的高度

> ID：10212923
> 
> 赞同：5
> 
> 时间：2012-04-18T15:37:57.897
> 
> 标签：jquery

这是我尝试减少 28：

```
var addItemForm = $('.add-item-form');
var h = addItemForm.height()-28;
var h = toString(h);
addItemForm.height(h); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T15:41:17.813

如果你的高度以像素为单位，你可以写：

```
​$(".add-item-form").height("-=28");​​​​​​​​​​​​​​​​​ 
```

...与增量类似：

```
$(".add-item-form").height("+=28"); 
```

查看文档以[`height`](http://api.jquery.com/height)获取更多信息。

**示例：http:** [//jsfiddle.net/VDcLs/](http://jsfiddle.net/VDcLs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:41:36.563

很可能你有一个重复声明的脚本错误`var h`。试试下面，

```
var addItemForm = $('.add-item-form');
var h = addItemForm.height()-28;
var h1 = toString(h); //<-- This returns a valid integer as a number/string.
addItemForm.height(h1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:41:52.047

```
var h = addItemForm.height("-=28"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:43:07.083

```
var addItemForm = $('.add-item-form');
var h = addItemForm.height()-28;
addItemForm.height(h); 
```

# ios - 将字符串附加到 NSMutableDictionary 中的 NSMutableArray

> ID：10212924
> 
> 赞同：0
> 
> 时间：2012-04-18T15:38:00.483
> 
> 标签：ios, nsmutablearray, nsmutabledictionary

每次一个单词与另一个单词的模式匹配时，我都需要将字符串附加到字典中保存的数组中。下面的第二行 (setObject) 覆盖而不是附加。
最终结果应该是字典中的数组，其中键（模式）标识了许多符合该模式的字符串。

```
 NSMutableDictionary *eqClasses = [[NSMutableDictionary alloc] init];
    [eqClasses setObject:tempWordStr forKey:wordPattern]; 
```

有没有简单的追加方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:50:01.460

试试这个：

```
NSMutableArray* array = [eqClasses objectForKey:wordPattern];
if(!array) {
  // create new array and add to dictionary if wordPattern not found
  array = [NSMutableArray array];
  [eqClasses setObject:array forKey:wordPattern];
}
[array addObject:tempWordStr]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:50:48.323

您指出字典中的值应该是数组，但在我看来 eqClasses 包含 NSStrings (tempWordStr)。您不需要创建一个 NSArray 来保存与关键字关联的 NSStrings，然后使数组成为字典中与关键字对应的值吗？如果字典已经包含键，则需要检索与键关联的数组，将新字符串添加到数组中，然后使用带有键的数组调用 setObject。

# function - Clojure 中的自动 TCO

> ID：10212928
> 
> 赞同：2
> 
> 时间：2012-04-18T15:38:17.307
> 
> 标签：function, clojure, automation, tail-recursion, tail-call-optimization

有没有办法在 Clojure 中定义一个自动进行尾调用优化的函数？

例如

```
(defrecur fact [x]
    (if (= x 1)
        1
        (* x (fact (dec x))))) 
```

将在内部翻译为：

```
(defn fact [x]
    (loop [n x f 1]
        (if (= n 1)
            f
            (recur (dec n) (* f n))))) 
```

你能告诉我这样的东西是否已经存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:43:26.110

最简洁的答案是不”。

稍长一点的答案是，Clojure 被故意设计为需要明确指示需要尾调用优化的位置，因为 JVM 本身并不支持它。

顺便说一句，您可以`recur`不使用`loop`，因此不再需要输入，例如：

```
(defn func [x]
  (if (= x 1000000)
    x
    (recur (inc x)))) 
```

**更新**，4 月 29 日：

Chris Frisz 一直在与 Dan Friedman 一起开展[**Clojure TCO**](https://github.com/cjfrisz/clojure-tco)研究项目，虽然目前没有人声称它是“答案”，但该项目既有趣又充满希望。Chris 最近就这个项目进行了一次非正式的讨论，并将[其发布在他的博客上](http://www.chrisfrisz.com/blog/?p=220)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:32:41.633

这个决定背后的指导原则之一是**让特殊部分看起来很特别**。这样一来，尾部调用在哪里使用和在哪里不使用就很明显了。这是一个经过深思熟虑的设计决定，有些人对此有强烈的看法，尽管在实践中**我很少看到 recur 在惯用的 Clojure 中使用，**所以在实践中这不是一个常见的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:45:18.903

据我所知，在 Clojure 中没有自动生成尾递归的方法。

有一些使用递归而不使用循环的函数的示例.. recur 可以在不溢出堆栈的情况下工作。那是因为这些函数已经被仔细编写为使用惰性序列。

这是一个用手写函数替换 flatten 的示例。这个例子来自[http://yyhh.org/blog/2011/05/my-solutions-first-50-problems-4clojure-com](http://yyhh.org/blog/2011/05/my-solutions-first-50-problems-4clojure-com)

```
(fn flt [coll]
  (let [l (first coll) r (next coll)]
    (concat 
      (if (sequential? l)
        (flt l)
        [l])
      (when (sequential? r)
        (flt r))))) 
```

# python - django models.py 上的导入错误

> ID：10212929
> 
> 赞同：11
> 
> 时间：2012-04-18T15:38:19.343
> 
> 标签：python, django

我在应用程序目录上的 utils.py 上编写了这个函数：

```
from bm.bmApp.models import Client

def get_client(user):
    try:
        client = Client.objects.get(username=user.username)
    except Client.DoesNotExist:
        print "User Does not Exist"
        return None
    else:       
        return client

def to_safe_uppercase(string):
    if string is None:
        return ''
    return string.upper() 
```

然后，当我在我的 models.py 文件上使用函数 to_safe_uppercase 时，通过以下方式导入它：

```
from bm.bmApp.utils import to_safe_uppercase 
```

我得到了python错误：

```
 from bm.bmApp.utils import to_safe_uppercase
ImportError: cannot import name to_safe_uppercase 
```

当我将导入语句更改为：

```
from bm.bmApp.utils import * 
```

但我不明白为什么会这样，为什么当我导入特定功能时出现错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T15:54:53.897

您正在执行所谓的循环导入。

模型.py：

```
from bm.bmApp.utils import to_safe_uppercase 
```

实用程序.py：

```
from bm.bmApp.models import Client 
```

现在，当您执行以下操作时`import bm.bmApp.models`，解释器会执行以下操作：

1.  `models.py - Line 1`: 尝试导入`bm.bmApp.utils`
2.  `utils.py - Line 1`: 尝试导入`bm.bmApp.models`
3.  `models.py - Line 1`: 尝试导入`bm.bmApp.utils`
4.  `utils.py - Line 1`: 尝试导入`bm.bmApp.models`
5.  ...

最简单的解决方案是将导入移动到函数内部：

实用程序.py：

```
def get_client(user):
    from bm.bmApp.models import Client
    try:
        client = Client.objects.get(username=user.username)
    except Client.DoesNotExist:
        print "User Does not Exist"
        return None
    else:       
        return client

def to_safe_uppercase(string):
    if string is None:
        return ''
    return string.upper() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T15:46:30.000

您正在创建循环导入。

```
utils.py
from bm.bmApp.models import Client
# Rest of the file...

models.py
from bm.bmApp.utils import to_safe_uppercase
# Rest of the file... 
```

我建议你重构你的代码，这样你就没有循环依赖（即 utils 不需要导入 models.py，反之亦然）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:44:33.263

我不确定我能否解释 Import 错误，但我有三个想法。首先，您的功能需要调整。您已使用保留字“字符串”作为参数。考虑重命名。

其次，如果您调用 ./manage.py shell 并手动进行导入，会发生什么情况。它给你带来什么不同吗？

第三，尝试删除你的 pyc 文件以强制 django 重新编译 python 代码（这是一个很长的镜头......但值得消除）

# java - Java：线程“main”中的异常 java.lang.NoClassDefFoundError (2)

> ID：10212937
> 
> 赞同：0
> 
> 时间：2012-04-18T15:38:31.377
> 
> 标签：java

我是 Java 新手并创建了一个学生管理程序，我 ***在线程“main”java.lang.NoClassDefFoundError 中出现以下错误异常***

但问题是我也尝试编译和运行简单的 Helloworld.java 程序，它显示了同样的错误

我在堆栈溢出中提到了许多属于这个问题的解决方案，但是 javac -cp.HelloWorld.java 或 java -classpath.HelloWorld.java

也不行。。

请帮助我并指导我为什么会这样..我认为在代码中我没有犯任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:42:56.757

类路径是 Java 类文件的路径，而不是 Java 源文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:46:44.970

看起来问题可能是您试图在 java 文件本身上运行 java 可执行文件。

当您运行`javac`它时，它会发出您的 java 类的字节码编译版本，以便 java 可执行文件运行。**HelloWorld.java**类的字节码版本应该类似于**HelloWorld.class**。找到这个文件，然后在上面运行 java，即`java HelloWorld.class`

Oracle 提供了一个很好的示例，说明如何从[这里](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html)开始，您可能想查看它。

# robots.txt - 禁止 robots.txt 中的动态页面

> ID：10212952
> 
> 赞同：0
> 
> 时间：2012-04-18T15:39:07.347
> 
> 标签：robots.txt

如何禁止我的 robots.txt 中的所有动态页面？

例如

```
page.php?hello=there
page.php?hello=everyone
page.php?thank=you 
```

我希望 page.php 和所有可能的动态版本都被禁止。

目前我有

```
User-Agent: *
Disallow: /page.php 
```

但这仍然允许例如 page.php?hello=there

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:53:38.523

您已经拥有的应该阻止所有尊重 robots.txt 的搜索引擎对 /page.php 的所有访问（无论是否提供了任何查询字符串参数）

不要忘记 robots.txt 仅适用于机器人 :-) 如果您试图阻止用户访问该页面，您需要使用 .htaccess 或类似的

# php - 编辑 php recordSet 输出的显示

> ID：10212953
> 
> 赞同：0
> 
> 时间：2012-04-18T15:39:09.173
> 
> 标签：php, recordset

以下代码将每个结果生成为文本。我想为每个结果添加一些 html，将其从常规文本更改为 href 标记：

```
while (!$recordSet->EOF()) {
        if ($pclass_name_list == '') {
            $pclass_name_list .= $recordSet->fields['class_name'];
        } else {
            $pclass_name_list .= ',' . $recordSet->fields['class_name'];
        }
        $recordSet->MoveNext();
    } 
```

以上产生结果 1，结果 2。我想将这些更改为

```
<a href="">Result 1</a>
<a href="">Result 2</a> 
```

ETC..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:52:20.257

也许：

```
if ($pclass_name_list == '') {
        $pclass_name_list .= '<a href="">' . $recordSet->fields['class_name'] . '</a>';
} else {
        $pclass_name_list .= ', <a href="">' . $recordSet->fields['class_name'] . '</a>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:14:14.740

如果您正在将内容简单地添加到字符串中，您可以将变量包装在花括号中并将其包含在带有双引号的字符串中（如下所示），或者您可以使用[sprintf](http://php.net/manual/en/function.sprintf.php "冲刺")函数将内容合并到模板中.

```
$pclass_name_list = array();
while (!$recordSet->EOF()) {
   $current_class_name = $recordSet->fields['class_name'];
   $pclass_name_list[] = "<a href=\"#\">{$current_class_name}</a>";
   $recordSet->MoveNext();
}
$pclass_name_list = implode(", ", $pclass_name_list); 
```

# c# - 从C#中的对象列表进行数据绑定时如何显示子对象属性

> ID：10212955
> 
> 赞同：3
> 
> 时间：2012-04-18T15:39:14.397
> 
> 标签：c#, gridview

好的，假设我有一个这样的对象：

```
public class User {
    public int ID { get; set; }
    public String Name { get; set; }
    public String Surname { get; set; }
    public String Description { get; set; }
    public Location Location { get; set; }
} 
```

请注意，最后一个属性是*Location*类型对象。让我们看看 Location 对象：

```
public class Location {
    public String ID { get; set; }
    public String Address { get; set; }
    public String PostCode { get; set; }
} 
```

现在**我想在 gridview 中显示一个用户列表，**但我不想使用 datareader 或任何数据对象来提供它，而是想使用 List of Users Collection，所以我调用了一个方法，它给了我一个 List 集合和数据绑定 gridview像这样：

```
gvUsers.DataSource = getUsers(); // This returns a List<User> collection.
gvUsers.DataBind(); 
```

现在，我使用了一些 BoundFields 和 Templatefields 来显示数据，并且它可以正常工作，如下所示：

```
<asp:GridView ID="gvUsers" runat="server" AutoGenerateColumns="False" >
    <Columns>
        <asp:BoundField DataField="Name" HeaderText="Name" />
        <asp:BoundField DataField="Description" HeaderText="Description" />
        <asp:TemplateField HeaderText="Surname">
            <ItemTemplate>
                <asp:Label ID="lbSurname" runat="server" Text='<%# Eval("Surname") %>'></asp:Label>
                <asp:HiddenField ID="hdnUserId" runat="server" Value='<%# DataBinder.Eval(Container.DataItem, "ID") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

如果我尝试访问 Location 对象属性，就会出现问题，在模板字段中想象一下：

```
<asp:HiddenField ID="hdnLocationName" runat="server" Value='<%# DataBinder.Eval(Container.DataItem, "Location.PostCode") %>' /> 
```

**那是行不通的。**

我不知道是否有办法使用模板字段来显示它。我还想知道是否有一种方法可以使用 BoundField。

如果仅使用 FrontEnd 无法完成，是否可以在 gridView 数据绑定的 Backend 中以某种方式完成？我应该使用 LINQ 并将其设置在 select 上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:42:05.260

德姆特[法则](http://en.wikipedia.org/wiki/Law_of_Demeter)适用。简而言之，如果你想像这样绑定到它，你必须使 Postcode 成为用户的属性。

[这个页面](http://juristr.com/blog/2009/09/law-of-demeter-nice-metaphor/)给出了得墨忒耳法则的一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:51:48.480

您可以做的最好的 AFAIK 是添加一个仅将值拉出的属性`Location`。像这样的东西：

```
public class User {
    public int ID { get; set; }
    public String Name { get; set; }
    public String Surname { get; set; }
    public String Description { get; set; }
    public Location Location { get; set; }
    public String LocationPost {get{return Location.Post;}}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T08:18:25.967

更清洁的解决方案是在位置覆盖 ToString 方法来表示描述。

# r - 子集 SpatialPolygonsDataFrame

> ID：10212956
> 
> 赞同：5
> 
> 时间：2012-04-18T15:39:18.937
> 
> 标签：r, mapping

我有一个通过在包`SpatialPolygonsDataFrame`中使用的 shapefile 读取创建的。我正在尝试使用它来生成一个采样网格，该网格在包中使用，用于从该地区收集的调查数据中进行插值。但是，SpatialPointsDataFrame 包含的区域比调查大得多，因此，插值预测的值远离进行任何调查的地方。调查数据和 shapefile 都使用相同的 proj4string 进行投影。`readOGR``rgdal``spsample``sp`

我想使用测量站设置的坐标对 SpatialPolygonsDataFrame 进行子集化，但我不确定相关值在对象中的存储位置。

恐怕我无法提供相关数据，因为 shapefile 不是在线托管的。但是，我将从 Paul Hiemstra对荷兰的这篇[文章的回复中借用一些代码：](https://stackoverflow.com/questions/8563334/average-values-of-a-point-dataset-to-a-grid-dataset)

```
library(ggplot2)
library(sp)
library(automap)
library(rgdal)

#get the spatial data for the Netherlands
con <- url("http://gadm.org/data/rda/NLD_adm0.RData")
print(load(con))
close(con)

class(gadm)
bbox(gadm)
>         min      max
>r1  3.360782  7.29271
>r2 50.755165 53.55458 
```

假设调查是在这个领域进行的：

```
bbox(surveys)
    >         min      max
    >r1     4.000    7.000
    >r2    51.000   53.000 
```

如何裁剪 SpatialPolygonsDataFrame 的那个区域？

* * *

编辑：这个[问题](https://stackoverflow.com/questions/9825221/r-gis-how-to-subset-a-shapefile-by-a-lat-long-bounding-box)似乎回答了我的问题。为没有足够努力地搜索而道歉（尽管评论确实让我对使用 rgeos 转向何处有所了解）。但是，`gIntersection` 导致R崩溃......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T22:09:01.037

根据多边形的大小，您可以执行以下操作

```
range = cbind(c(4,7), c(51,53))
centroids <- coordinates(spdf)

spdf.subset <- spdf[centroids[,1] > range[1,1] &
                    centroids[,1] < range[2,1] &
                    centroids[,2] > range[1,2] &
                    centroids[,2] < range[2,2],] 
```

# jquery - 如何在悬停时隐藏不是父级的元素？

> ID：10212963
> 
> 赞同：1
> 
> 时间：2012-04-18T15:39:48.940
> 
> 标签：jquery, animation, hover

因此，对于导航，当某个“nav1”LI 悬停时，我会显示一个“辅助”div。当焦点不再位于#nav1 LI 或辅助 div 上时，我希望隐藏 div。 [jsFiddle 演示](http://jsfiddle.net/eT9G4/1/ "演示")

通常我只会将“辅助”div 放在#nav1 li 中。但由于某些后勤原因，我不能这样做。所以我基本上只是在鼠标不在#secondary或#nav1之上时才试图隐藏二级div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:45:46.250

你有没有试过这个：

```
$("#secondary").mouseleave(function() {
    $(this).slideUp(500);
}​);​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/eT9G4/5/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:53:47.983

这对你有帮助吗：http: [//jsfiddle.net/EefAD/3/](http://jsfiddle.net/EefAD/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:45:46.483

也许`setTimeout(function, delay)`在第一个元素的悬停回调上设置超时，并在第二个元素的悬停时设置一个标志`true`，并将其设置回`false`悬停时。超时完成后，检查标志是否为`true`，然后用户将鼠标悬停在第二个元素上。

# java - 相对布局和滚动视图

> ID：10212968
> 
> 赞同：0
> 
> 时间：2012-04-18T15:40:07.183
> 
> 标签：java, android

我有一个关于 RelativeLayout 的问题，我不知道如何添加滚动视图，我想将我的所有对象保持在相对布局中，并且我不想添加另一个线性布局，还请注意我在 RelativeLayout 中设置了背景，谢谢你，我在相对布局中为我的图像视图使用 .gone 函数时也遇到问题，当视图更新时图像重新出现，我在使用线性布局时没有这个 pb 这是我的代码：

```
 <?xml version="1.0" encoding="utf-8"?>

       <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.80"
    android:background="@drawable/questionggreen"
    android:orientation="vertical"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="14dp"
        android:clipToPadding="true"
        android:orientation="vertical" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=" 24 Juin 1944"
            android:textColor="#ff00ff"
            android:textSize="19dp"
            android:textStyle="bold" />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=" 9 Decembre 1988"
            android:textColor="#ff00ff"
            android:textSize="19dp"
            android:textStyle="bold" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="14 octobre 1978"
            android:textColor="#ff00ff"
            android:textSize="19dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/Chrono"
            android:layout_width="wrap_content"
            android:layout_height="20dp"
            android:layout_gravity="center"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="#000000"
            android:textStyle="bold" android:layout_marginTop="2dp"/>

    </RadioGroup>

    <TextView
        android:id="@+id/Lareponseetait"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" />

    <TextView
        android:id="@+id/QuestionNumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_weight="1.26"
        android:text="Question 1"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#00ff00"
        android:textStyle="normal|bold" />

    <TextView
        android:id="@+id/Question"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/QuestionNumber"
        android:layout_marginTop="30dp"
        android:text="Quelle est la date de naissance de Usher ?"
        android:textColor="#FFFACD"
        android:textSize="16dp"
        android:textStyle="normal|bold"
        android:typeface="sans" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="158dp"
        android:layout_height="154dp"
        android:layout_below="@id/Question"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="32dp"
        android:src="@drawable/mzl"
        android:visibility="gone" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_weight="1.26"
        android:text="CELB"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/Goodanswercount"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/Goodanswercount"
        android:layout_alignLeft="@+id/radioGroup1"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/radioGroup1"
        android:layout_marginTop="3dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#00ff00"
        android:textStyle="bold" android:layout_toRightOf="@id/textView1"/>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/Goodanswercount"
        android:text="Correct :"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#00ff00" android:layout_marginTop="3dp"/>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Goodanswercount"
        android:text="Wrong :"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff0000" android:layout_toLeftOf="@+id/Goodanswercount"/>

    <TextView
        android:id="@+id/Wronganswercount"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/textView2"
        android:layout_toRightOf="@+id/textView2"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#ff0000"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/Lareponseetait"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/QuestionNumber"
        android:text="La reponse etait :"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff0000" android:layout_marginTop="5dp"/>

    <TextView
        android:id="@+id/Lareponsecorrectetait"
        android:layout_width="215dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/Lareponseetait"
        android:layout_alignBottom="@+id/Lareponseetait"
        android:layout_alignParentRight="true"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff0000" />

    <TextView
        android:id="@+id/Scores1"
        android:layout_width="29dp"
        android:layout_height="wrap_content"
        android:layout_above="@+id/Question"
        android:layout_alignParentRight="true"
        android:text="000"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff00ff"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/Scores"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/Question"
        android:layout_toLeftOf="@+id/Scores1"
        android:text="Scores : 00"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff00ff"
        android:textStyle="bold" />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView2"
        android:layout_centerHorizontal="true"
        android:src="@drawable/buttonok" android:layout_marginTop="10dp"/>

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/imageButton1"
        android:text="Sounds Off" android:layout_marginTop="3dp"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/checkBox1"
        android:layout_alignBottom="@+id/checkBox1"
        android:layout_alignParentLeft="true"
        android:text="Quit" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:43:41.227

试试这个 ：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
 <RelativeLayout 
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.80"
    android:background="@drawable/questionggreen"
    android:orientation="vertical"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="14dp"
        android:clipToPadding="true"
        android:orientation="vertical" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=" 24 Juin 1944"
            android:textColor="#ff00ff"
            android:textSize="19dp"
            android:textStyle="bold" />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=" 9 Decembre 1988"
            android:textColor="#ff00ff"
            android:textSize="19dp"
            android:textStyle="bold" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="14 octobre 1978"
            android:textColor="#ff00ff"
            android:textSize="19dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/Chrono"
            android:layout_width="wrap_content"
            android:layout_height="20dp"
            android:layout_gravity="center"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="#000000"
            android:textStyle="bold" android:layout_marginTop="2dp"/>

    </RadioGroup>

    <TextView
        android:id="@+id/Lareponseetait"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" />

    <TextView
        android:id="@+id/QuestionNumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_weight="1.26"
        android:text="Question 1"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#00ff00"
        android:textStyle="normal|bold" />

    <TextView
        android:id="@+id/Question"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/QuestionNumber"
        android:layout_marginTop="30dp"
        android:text="Quelle est la date de naissance de Usher ?"
        android:textColor="#FFFACD"
        android:textSize="16dp"
        android:textStyle="normal|bold"
        android:typeface="sans" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="158dp"
        android:layout_height="154dp"
        android:layout_below="@id/Question"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="32dp"
        android:src="@drawable/mzl"
        android:visibility="gone" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_weight="1.26"
        android:text="CELB"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/Goodanswercount"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/Goodanswercount"
        android:layout_alignLeft="@+id/radioGroup1"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/radioGroup1"
        android:layout_marginTop="3dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#00ff00"
        android:textStyle="bold" android:layout_toRightOf="@id/textView1"/>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/Goodanswercount"
        android:text="Correct :"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#00ff00" android:layout_marginTop="3dp"/>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Goodanswercount"
        android:text="Wrong :"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff0000" android:layout_toLeftOf="@+id/Goodanswercount"/>

    <TextView
        android:id="@+id/Wronganswercount"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/textView2"
        android:layout_toRightOf="@+id/textView2"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#ff0000"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/Lareponseetait"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/QuestionNumber"
        android:text="La reponse etait :"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff0000" android:layout_marginTop="5dp"/>

    <TextView
        android:id="@+id/Lareponsecorrectetait"
        android:layout_width="215dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/Lareponseetait"
        android:layout_alignBottom="@+id/Lareponseetait"
        android:layout_alignParentRight="true"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff0000" />

    <TextView
        android:id="@+id/Scores1"
        android:layout_width="29dp"
        android:layout_height="wrap_content"
        android:layout_above="@+id/Question"
        android:layout_alignParentRight="true"
        android:text="000"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff00ff"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/Scores"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/Question"
        android:layout_toLeftOf="@+id/Scores1"
        android:text="Scores : 00"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ff00ff"
        android:textStyle="bold" />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView2"
        android:layout_centerHorizontal="true"
        android:src="@drawable/buttonok" android:layout_marginTop="10dp"/>

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/imageButton1"
        android:text="Sounds Off" android:layout_marginTop="3dp"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/checkBox1"
        android:layout_alignBottom="@+id/checkBox1"
        android:layout_alignParentLeft="true"
        android:text="Quit" />

 </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:53:14.717

试试这个。它对你有帮助...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="match_parent"
 android:layout_height="match_parent" android:weightSum="1"
 android:background="@drawable/background">
<ScrollView android:layout_height="wrap_content" android:layout_width="match_parent" android:id="@+id/scrollView1" android:layout_weight="0.97">
    <RelativeLayout android:id="@+id/relativeLayout1"   android:layout_width="match_parent" android:layout_height="444dp">
        <TextView android:id="@+id/textView1" android:textColor="@color/myGreenColor" android:text="Enter Roll Number and Exam hear" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignParentTop="true" android:layout_alignParentLeft="true" android:layout_alignParentRight="true"></TextView>
        <ImageView android:src="@drawable/result" android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/imageView1" android:layout_below="@+id/textView1" android:layout_alignParentLeft="true" android:layout_marginTop="22dp" android:layout_alignParentRight="true"></ImageView>
        <Spinner android:layout_height="wrap_content" android:layout_below="@+id/imageView1" android:layout_alignParentRight="true" android:layout_marginTop="32dp" android:layout_width="150dp" android:id="@+id/searchRsult_spinner"></Spinner>
        <EditText android:layout_height="wrap_content" android:inputType="text|textPersonName" android:layout_width="wrap_content" android:layout_below="@+id/searchRsult_spinner" android:layout_alignParentLeft="true" android:layout_marginTop="16dp" android:layout_alignParentRight="true" android:id="@+id/searchResult_txtRollNumber">
            <requestFocus></requestFocus>
        </EditText>
        <Button android:layout_height="wrap_content" android:text="Show result"    android:id="@+id/button1" android:layout_below="@+id/searchResult_txtRollNumber" android:layout_alignParentLeft="true" android:layout_marginTop="33dp" android:layout_width="200dp" android:textColor="@color/myColorBlue"></Button>
        <Button android:layout_height="wrap_content" android:layout_width="wrap_content" android:text="Cancel" android:id="@+id/button2" android:layout_alignBaseline="@+id/button1" android:layout_alignBottom="@+id/button1" android:layout_toRightOf="@+id/button1" android:layout_alignParentRight="true" android:textColor="@color/myColorBlue"></Button>
    </RelativeLayout>
</ScrollView> 
```

# linux - 从 Linux 设备驱动程序读取时“cat”命令被杀死

> ID：10212970
> 
> 赞同：0
> 
> 时间：2012-04-18T15:40:26.433
> 
> 标签：linux, device-driver

我在我的操作系统课程中有一项任务是制作一个简单的伪堆栈 Linux 设备驱动程序。举个例子，如果我要向设备驱动程序写入“Hello”，当我读取它时它会返回“olleH”。我们必须用 C 语言构建一个测试程序来调用设备驱动程序的读/写函数来证明它以 FILO 方式运行。我已经完成了所有这些，我认为我的测试程序证明了任务的目的；但是，出于好奇，在 BASH 中，我执行了以下命令：

**回声“测试”> /dev/driver**

**猫/开发/驱动程序**

其中 /dev/driver 是我使用“mknod”创建的特殊文件。但是，当我这样做时，我会得到一个充满错误的黑屏。在我使用 CNTRL+ALT+F7 切换回 GUI 视图后，我看到 BASH 已返回“Killed”。

有谁知道可能导致这种情况发生的原因？我很困惑，因为我的测试程序调用了 open()、read() 和 write()，并且一切正常。

如果我需要显示一些代码，请问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:44:42.147

设备驱动程序中写入您提供的缓冲区的函数很可能导致此问题。

要调试，您可以执行以下操作：

*   首先，确保读取部分没问题。`printk`从输入中读取后，您可以使用内部缓冲区来确保这一点。

*   其次，在您的写入功能中，`printk`一些信息而不是实际写入任何内容并确保一切正常。

另外，请确保作者清楚地表明写入已经结束。我对设备驱动程序不是特别确定，但是您要么需要返回 0 作为第二次调用时写入的字节数，要么设置一个 eof 变量（如果这是您的函数的参数之一）

# jquery - 在旅途中添加页面后如何重新初始化 Jquery 小册子插件？

> ID：10212973
> 
> 赞同：0
> 
> 时间：2012-04-18T15:40:30.767
> 
> 标签：jquery, jquery-plugins

我正在使用以下插件来创建一本有几页的书：http: [//builtbywill.com/code/booklet/](http://builtbywill.com/code/booklet/)

这是初始化：

```
$("#photo-booklet").booklet({
    width:    800,
    height:   450,
    speed:    500,
    keyboard: false,
    next: '#next',                       
    prev: '#previous',
    manual:   false,
    overlays: false,
    hovers:   false,
    after: function(){
        doThisAfterPageTurn();
    },
    closed: true,
    covers: true
}); 
```

这确实很好，但是.... 在小册子加载了其初始页面后，用户应该能够通过单击“添加新页面”链接向其中添加更多页面。这些页面应该在旅途中显示在小册子中，并且应该像其他页面一样可翻转。

我查看了插件的代码，看看是否可以重置它并再次找到所有页面，但无法解决。有什么办法可以让小册子更新。我需要卸载小册子插件并重新初始化它吗？如果是这样，我如何卸载小册子？

提前非常感谢！

# ios - 使用 iOS 的 OAuthConsumer 将图像上传到 tumblr

> ID：10212975
> 
> 赞同：3
> 
> 时间：2012-04-18T15:40:32.940
> 
> 标签：ios, http, oauth, tumblr

我在使用[Tumblr API](http://www.tumblr.com/docs/en/api/v2#posting)的 iOS 应用程序中使用[OAuthConsumer](http://code.google.com/p/oauthconsumer/)。一般来说，进行 API 调用可以正常工作。但是，我很难上传任何媒体。当我的请求的所有参数都是整数或字符串时，我就像这样添加它们：

```
 [request setParameters:[NSArray arrayWithObjects:
                        [OARequestParameter requestParameterWithName:@"x_auth_username" value:username],
                        [OARequestParameter requestParameterWithName:@"x_auth_password" value:password],
                        nil]]; 
```

这显然不适用于例如图像。我发现我可能不得不发送这些数据`multipart/form-data`而不是，`application/x-www-form-urlencoded`因此，它不会对 oAuth 签名产生任何影响。但是，据我所知，OAuthConsumer 仅支持`x-www-form-urlencoded`（相关代码位于 中`NSMutableURLRequest+Parameters.m`）。但是，我不确定这是否正确，如果是，我真的不知道如何`Consumer`正确修改。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T20:14:46.857

好吧，我自己想通了。这有几个部分，因为我看到其他人有类似的问题，我将详细介绍：

首先，我使用的是过时的 OAuthConsumer 版本。您应该使用[来自 github](https://github.com/jdg/oauthconsumer)的更新版本，而不是使用[链接到 Google Code](http://code.google.com/p/oauthconsumer/)的版本，因为它包括发送包含多个字符串的多部分表单的方法。

现在，如果我没有完全错，理论上你现在应该做的是：

```
//Setup the request...
[request setParameters:params];    
[request attachFileWithName:@"data" filename:@"photo.jpg" contentType:@"image/jpeg" data:dataProp.data];
//Setup the fetcher and send the request... 
```

这将生成一个仅包含 -variables 的 oAuth 签名`oauth_...`，将所有其他变量放入多部分表单中。这是应该的，根据文档，你应该没问题。不幸的是，你不是，tumblr 将返回 401 错误，很可能是由于签名无效。

这是您真正需要做的：

```
//Setup the request...
[request setParameters:params];
[request prepare]; //Whaaaat?
[request attachFileWithName:@"data" filename:@"photo.jpg" contentType:@"image/jpeg" data:dataProp.data];
//Setup the fetcher, make sure "prepare" isn't called again, send the request... 
```

这会奏效......同样，我很确定这不是 oAuth 应该如何处理的，但至少它是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:38:19.537

我会说 Tumblr 的 OAuth 实现很奇怪。我找到了为什么可以进行身份​​验证和博客请求（[请参见此处](http://github.com/nquinlan/Tumblr-OAuth/issues/2)）。据我所知，Tumblr 与新的 OAuth 库（[这个](https://github.com/jdg/oauthconsumer)）配合得更好。我自己无用地花了一些时间试图使所有旧 OAuth 工作以与 ShareKit 兼容。我找到的解决方案建议使用[ASIFormDataRequest](https://github.com/pokeb/asi-http-request)并使用 OAuth 身份验证信息对其进行签名（[最初在此处找到](http://hytgbn.net/2012/02/tip-of-uploading-images-to-tumblr-using-oauth-on-ios/)）。是的，它看起来像是试图将刺猬与草蛇杂交，但不知何故它适用于单个图像。但是，修改此代码后，我无法上传多张图片。另一个解决方案是["TumblrUploadr"](http://github.com/vvanhee/TumblrUploadr)，但它看起来有点太原始了。

# java - 任何人都知道如何克服 IntelliJ 中的“编译器内部错误。进程以退出代码 138 终止”？

> ID：10212977
> 
> 赞同：0
> 
> 时间：2012-04-18T15:40:41.880
> 
> 标签：java, tomcat, maven, intellij-idea, javac

这是一个我们使用 Java 1.5.0 的 Java 项目，但我在任何地方都找不到 javac 错误代码列表。我试过使缓存无效并重新启动。我试过重建项目。这是一个 maven 项目，所以我可以从 IntelliJ 中的 Maven 面板编译，但我需要将它作为 Tomcat 配置运行，我不知道如何在 IntelliJ 之外执行。

编辑：在 IntelliJ 中，您可以通过他们的运行/调试配置运行您的项目。您可以为应用程序、junit、tomcat 等设置配置...这就是我运行项目以获取错误的方式

第二次编辑：看来我的 Java 1.5 已损坏。当我从 intelliJ 中删除它然后尝试将其添加回来时，IntelliJ 告诉我它已损坏。我也在命令行遇到总线错误......

```
$ ~/Java\ 1.5.0/Home/bin/javac -version
bus error
$ ~/Java\ 1.5.0/Home/bin/java -version
bus error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:48:15.050

一种选择是调用`mvn package`创建war 文件并将其手动部署到已安装的tomcat。

另一种选择是使用[tomcat maven 插件](http://mojo.codehaus.org/tomcat-maven-plugin/run-mojo.html)并调用`mvn tomcat:run`这将在 tomcat 中运行您的应用程序。

# c# - 捕获 webBrowser 控件响应

> ID：10212982
> 
> 赞同：0
> 
> 时间：2012-04-18T15:40:50.233
> 
> 标签：c#, webbrowser-control, desktop-application

我正在使用 C# 中的 webbrowser 控件为我们的桌面应用程序通过网关运行信用卡。

简单地说，我正在加载表单加载页面：

```
public Form1()
{
  InitializeComponent();

  webBrowser1.Url = new Uri("https://paymentgateway.com/hosted.aspx?" +
                            "Username=dddd" +
                            "&Password=dddd" +
                            "&MerchantKey=5159" +
                            "&BillingAddress1=123 some street" +
                            "&BillingCity=Somewhere" +
                            "&BillingState=SC" +
                            "&BillingZip=39399" +
                            "&CustomerName=me" +
                            "&Amount=392.00" +
                            "&InvNum=123567" +
                            "&AccountNumber=0133333" +
                            "&CustomerId=0199999");

} 
```

（出于安全原因，所有参考资料均已更改）

该页面如下所示：

![门户网站](../Images/3896f2445614f8c73a25650399c184a5.png)

我的问题是，**单击“处理”按钮后如何获取响应**然后关闭表单？我需要知道它是否被批准以及从那时起的其余信息。

我无法控制按钮，所以我不确定如何捕获响应。

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:55:19.537

您似乎需要订阅[DocumentCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)事件并通过 Document、DocumentText 或 DocumentStream 处理那里的响应。

然后，您将根据输出的内容做出适当的反应。例如：

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
  HtmlDocument document =  webBrowser1.Document;
  //now use any of the methods exposed by HtmlDocument to parse the output
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:50:40.633

在您的表单中，您可以创建一个公共方法来获取您可以从调用表单的位置访问的信息。您可以在 dialogResult == DialogResult.OK 上调用此方法，如下所示：

```
 object your_info;

        Form1 form1 = new Form1();
        if (form1.DialogResult == DialogResult.OK)
        {
            your_info = form1.getInfo();
        } 
```

# asp.net - 如何在 RADGrid 上启用部分渲染？

> ID：10212985
> 
> 赞同：2
> 
> 时间：2012-04-18T15:41:02.477
> 
> 标签：asp.net, ajax, telerik, dotnetnuke, radgrid

# 原帖

### 2 附加编辑如下

我的页面上有一个 RADGrid，但是当用户单击网格中的任何控件时，页面前进/后退、页码、PageSize、刷新、复选框行选择器等......整个页面都会刷新。我想让网格本身刷新。我在网上看了，但我似乎无法找到让它全部点击的信息。

我正在使用 DNN 6，并尝试在页面上以编程方式注册 RADAJAXManager（如果丢失，通常是这样）。我看到网上有人提到 EnableAJAX 设置，但后来发现它在较新的 Telerik 控件中已被贬值，因此该选项被排除在外。因此，我尝试使用 AddAjaxSetting() 方法以编程方式添加 AJAX 设置。我已经尝试了参数的几种变体，但没有任何反应。显然我做错了什么......我完全看错了地方？

我尝试用 AJAXPanel 包围我的 RADGrid，但后来我遇到的问题是，RADGrid 不是在刷新时整个页面“闪烁”，而是完全消失，然后重新出现。我查看了 Telerik 网站上的几个 Demo，但我不知道他们是如何让他们的 RADGrid 将旋转圆圈刷新方法用于 RADGrid。

我尝试将页面的“支持部分渲染”设置为 true，但随后发生的情况是整个页面的灰色与旋转的圆圈一起出现。我只想模仿[Telerik Demo 上](http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx)显示的相同行为。

帮助！！！：：沮丧的：：

有什么线索或建议吗？

## **编辑 4/18/2012 @ 7:48 PM EST**

我正在使用以下代码在放置自定义用户控件的页面上创建 RADAjaxManager（如果缺少）。

```
Private Sub RegisterRADAjaxManager(ByVal p_objPage As Page)
    '***************************************
    ' Register RAD AJAX Manager (If Missing)
    '***************************************
    Dim objRADAJAXManager As Telerik.Web.UI.RadAjaxManager = Telerik.Web.UI.RadAjaxManager.GetCurrent(p_objPage)

    '***************************************
    ' If RADAJAXManager Is Missing, Add It
    '***************************************
    If (objRADAJAXManager Is Nothing) Then
        objRADAJAXManager = New Telerik.Web.UI.RadAjaxManager
        objRADAJAXManager.ID = "RADAJAXManager"
        p_objPage.Form.Controls.Add(objRADAJAXManager)
    End If 
End Sub 
```

我使用以下代码添加 Ajax 设置：

```
'***************************************
' Register RADGrid w/ RADAJAXManager
'***************************************
With TekkGrid.GetCurrentRADAJAXManager(Me.Page)
    .AjaxSettings.AddAjaxSetting(Me.gridMain, Me.gridMain)
    .AjaxSettings.AddAjaxSetting(Me.gridMain, Me.RADLoadingPanel)
End With 
```

在我的 ASCX 文件中，我有：

```
<Telerik:RadGrid ID="gridMain" runat="server" />
<telerik:RadAjaxLoadingPanel ID="RADLoadingPanel" runat="server">
</telerik:RadAjaxLoadingPanel> 
```

我错过了什么吗？

## **编辑 2012 年 4 月 19 日 @ 美国东部标准时间上午 8:56**

尤里卡！我想到了。我的问题是如此愚蠢。我的 Page_Load() 事件上有一个 IF 语句，用于检查 IsPostBack。如果 IsPostPack = False，我只在 RADAjaxManager 上注册 AjaxSettings。我没有意识到 RADAjaxManager 在每个 PostBack 上都被重新创建，因此我丢失了所有 AjaxSettings，所以我将进行 AjaxSettings 注册的方法移到了 IF 语句之外，因此它总是在每个页面加载时运行，瞧！有效！

1）我测试了“分组”功能，它有效，但是......当我拖动列时，您不会“看到”被拖动的列。当您拖动列时，您所看到的只是一个“十字准线”光标。在演示中，当您开始拖动带有列名的框时，它会出现，因此您可以直观地体验“拖放”功能。我如何获得相同的功能？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:52:54.663

如果您将模块控件标记为“支持部分渲染”，DNN 会将您的模块包装在`RadAjaxPanel`. 这绝对是最简单的方法，并且最符合框架提供/期望的内容。

如果您不希望页面在回发期间灰显，您只需调整样式（可能在门户/皮肤级别，以确保整个站点的一致性）。所以，如果你的皮肤用一个 ID 包裹整个站点`MySkin`，你可以使用这个 CSS 来改变更新进度显示的样式：

```
#MySkin .RadAjax .raTransp {display:none;} 
```

## 更新

要让更新进度指示器仅显示在网格上，请尝试使用 和 的组合，`RadAjaxManager`就像`RadAjaxLoadingPanel`演示[一样](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/sorting/defaultcs.aspx)；就像是：

```
<telerik:RadAjaxManager runat="server">
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="RadGrid1">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="RadGrid1" LoadingPanelID="RadAjaxLoadingPanel1" />
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager>
<telerik:RadAjaxLoadingPanel ID="RadAjaxLoadingPanel1" runat="server" /> 
```

# java - 显示幂（2、3、4 等的幂）？

> ID：10212989
> 
> 赞同：0
> 
> 时间：2012-04-18T15:41:15.113
> 
> 标签：java, android

是否可以像处理数学方程时一样显示 2、3 等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:44:27.033

像这样

```
 Html.fromHtml("2"+"<sup>-2</sup>");
 //shows 2 raised to -2 
```

同样使用

```
 <sub> x</sub> 
```

下标标记

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:49:21.927

吻。使用[unicode 上标](http://en.wikipedia.org/wiki/Wikipedia%3aUnicode_subscripts_and_superscripts)...除非您的字体当然不包含它们。

# iphone - iOS 上带有 OpenGL ES 的 Skybox - 没有 GLKit + iOS 5.0

> ID：10212991
> 
> 赞同：1
> 
> 时间：2012-04-18T15:41:20.090
> 
> 标签：iphone, ios, opengl-es

请给我一些提示/资源以在 OpenGL ES 中构建天空盒（如街景）......一周后我只发现了一个帖子：[Skybox OpenGL ES iPhone and iPad](https://stackoverflow.com/questions/4110893/skybox-opengl-es-iphone-and-ipad)但汤米共享的链接已损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:34:24.070

[GLKit 包含一个 SkyBox 效果](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKSkyboxEffect_ClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010921)。示例用法[在这里](https://github.com/jlamarche/iOS-OpenGLES-Stuff/tree/88ed7c7b2278a508084e40d135ff860107254d67/GLKit%20Stuff/GLKReflectionMapEffect%20&%20GLKSkybox%20Examples)。

注意我不喜欢 iOS 开发；刚刚看了一个 WWDC 会议。