# StackOverflow 问答 11530000-11530999

# eclipse - XDebug 不适用于 Ubuntu 12.04 上的 Eclipse PHP

> ID：11530004
> 
> 赞同：0
> 
> 时间：2012-07-17T20:01:49.420
> 
> 标签：eclipse, ubuntu, xdebug

我在 Eclipse PHP (Helios) 上进行 (x) 调试时遇到问题。在我从 Ubuntu 10 升级到 12 之前它运行良好，但现在不行。

我将此添加到 php.ini：

```
zend_extension=/usr/local/ioncube/ioncube_loader_lin_5_3.so
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_connect_back=1
xdebug.remote_host=laptopname
xdebug.remote_port=9000
xdebug.remote_log=/var/log/xdebug.log
xdebug.idekey="ECLIPSE_DBGP"
extension=imap.so 
```

Eclipse（XDebug）的设置是：

```
Debug Port : 9000
Show super globals in variable view : ticked
Max array depth : 7
Max children : 100
Use Multisession : ticked
Accept remote session (JIT) : any
Output Capture Settings : both copy
DBGp Proxy Support : not ticked 
```

我很感谢任何提示或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:43:47.013

看起来您没有加载**xdebug.so**

```
zend_extension=/usr/local/ioncube/ioncube_loader_lin_5_3.so 
```

以下行是多余的

```
xdebug.remote_host=laptopname 
```

因为，你正在使用

```
xdebug.remote_connect_back=1 
```

# image-processing - 玩！图像调整大小会导致服务器上存储旧文件

> ID：11530007
> 
> 赞同：0
> 
> 时间：2012-07-17T20:02:05.247
> 
> 标签：image-processing, playframework

我想将上传的图像调整为小版本和缩略图版本。因此我使用了很棒的模块 S3。这工作正常，所有图像都上传到 s3。但是经过几次上传后，我意识到调整大小的图像也存储在磁盘上并且没有被删除。

我的代码：

```
public static Picture save(File file, Recipe recipe){

    File picture = new File(UUID.randomUUID().toString());
    //Resize main picture
    Images.resize(file, picture, 600, 600, true);

    File thumbNail = new File(UUID.randomUUID().toString());
    //Resize thumbnail
    Images.resize(file, thumbNail, 260, 190, true);

    Picture pic = new Picture();
    pic.pictureFileName = file.getName();
    pic.picture = new S3Blob();

    pic.thumbPictureFileName = file.getName();
    pic.thumbPicture = new S3Blob();

    pic.recipe = recipe;
    try{
        pic.picture.set(new FileInputStream(picture), MimeTypes.getContentType(file.getName()));
        pic.thumbPicture.set(new FileInputStream(thumbNail), MimeTypes.getContentType(file.getName()));
        pic.save();

    }catch(FileNotFoundException e){
        Logger.error(e, "FileNotFound");
    }

    return pic;
} 
```

上传后如何删除文件？Normaly 我会在流完成时等待它，但我不知道它什么时候完成，所以我不能删除文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:58:08.300

正如塞缪尔评论的那样，我期待一个不正确的异步行为。

调整大小并上传图片后，只需使用 file.delete() 将其删除即可！

# r - 如何模拟双峰分布？

> ID：11530010
> 
> 赞同：22
> 
> 时间：2012-07-17T20:02:10.480
> 
> 标签：r, statistics, probability, distribution

我有以下代码来生成双峰分布，但是当我绘制直方图时。我没有看到这两种模式。我想知道我的代码是否有问题。

```
mu1 <- log(1)   
mu2 <- log(10)
sig1 <- log(3)
sig2 <- log(3)
cpct <- 0.4   

bimodalDistFunc <- function (n,cpct, mu1, mu2, sig1, sig2) {
  y0 <- rlnorm(n,mean=mu1, sd = sig1)
  y1 <- rlnorm(n,mean=mu2, sd = sig2)

  flag <- rbinom(n,size=1,prob=cpct)
  y <- y0*(1 - flag) + y1*flag 
}

bimodalData <- bimodalDistFunc(n=100,cpct,mu1,mu2, sig1,sig2)
hist(log(bimodalData)) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T20:17:55.967

这个问题似乎只是太小`n`和太小之间的差异`mu1`和`mu2`，采取`mu1=log(1)`，`mu2=log(50)`并`n=10000`给出了这个：

![在此处输入图像描述](../Images/d43b1d596db6681550f422cd9420ba56.png)

# sql - 删除触发器未执行

> ID：11530013
> 
> 赞同：1
> 
> 时间：2012-07-17T20:02:16.363
> 
> 标签：sql, sql-server, triggers, sql-delete

我有一张`Absence`带 PK的桌子`AbscenceId`（是的拼写错误）。我有另一个 table `Note`，带有一个 FK into`Absence`调用`AbsenceId`（这次拼写正确）。FK 约束为：

```
ALTER TABLE [dbo].[Note]  WITH CHECK ADD  CONSTRAINT [FK_Note_Absence] FOREIGN KEY([AbsenceId])
REFERENCES [dbo].[Absence] ([AbscenceId])
GO 
```

当 an`Absence`被删除时，我希望所有人都`Notes`可以使用它。我不能这样做`CASCADES`，因为 a`Note`也可以属于其他东西。

所以我创建了一个触发器来在删除缺席时删除笔记：

```
ALTER TRIGGER [dbo].[TR_OnAbsenceDelete] ON [dbo].[Absence]
    FOR DELETE AS

    DELETE FROM [Note]
        WHERE AbsenceId IN ( SELECT AbscenceId FROM Deleted ) 
```

但是当我删除`Absence`一个`Note`附加的，我得到：

```
Msg 547, Level 16, State 0, Line 1
The DELETE statement conflicted with the REFERENCE constraint "FK_Note_Absence". The conflict occurred in database "ReturnToWork", table "dbo.Note", column 'AbsenceId'.
The statement has been terminated.� 
```

这几乎就像触发器没有被执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:22:22.273

您的触发器需要编写为 INSTEAD OF 触发器，首先从 Note 中删除，然后从 Absence 中删除。

```
CREATE TRIGGER [dbo].[TR_OnAbsenceDelete] ON [dbo].[Absence]
    INSTEAD OF DELETE AS
BEGIN

    DELETE FROM n
        FROM deleted d
            INNER JOIN Note n
                ON d.AbscenceId = n.AbsenceId

    DELETE FROM a
        FROM deleted d
            INNER JOIN Absence a
                ON d.AbscenceId = a.AbscenceId
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:12:42.103

问题是当您尝试从缺席中删除记录时，由于引用约束而失败。如果删除成功，则将调用您的删除触发器。

此外，正如此链接中所建议的那样，您可以尝试[在 T-SQL 2005 中删除之前如何触发触发器而不是如何触发触发器？](https://stackoverflow.com/questions/516119/how-can-i-fire-a-trigger-before-a-delete-in-t-sql-2005)

# java - Java：强制接口的实现者具有不可变的名称字段？

> ID：11530024
> 
> 赞同：0
> 
> 时间：2012-07-17T20:02:50.263
> 
> 标签：java

要求：我希望接口的所有实现都具有明确定义的名称。

一开始，我想：

```
interface Fruit {
    public String getName();
} 
```

但这允许用户拥有在运行时修改的字段。我想要一个在编译/构建时间之前定义的不可变名称。

我一直在玩弄其他几种方法来做到这一点，但每种方法都有局限性。

1) 给名称一个类型，它比自由格式的字符串有更多的控制权：

```
interface Fruit {
    public FruitName getName();
}

abstract class FruitName  {
    public final String NAME;
    public FruitName(name) {
        this.NAME = name;
    }
} 
```

此类的用户将如下所示：

```
class AppleFruitName extends FruitName {
    public AppleFruitName() {
        super("apple");
    }
}

class Apple implements Fruit {
    public FruitName getName() {
        return new AppleFruitName();
    }
} 
```

2）强制实现者`Fruit`用一些东西注释名称：

```
class Apple implements Fruit {
    @FruitName
    public static final NAME = "apple";
    ...    
} 
```

显然这个实现比（1）干净得多，但我不确定这在 Java 中是否可行？如果@FruitName 不存在，您如何使编译/构建失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:11:13.827

有几个选项可以强制执行此操作。

*   在构建时，您可以为寻找满足您要求的字段的每个类编写测试**。**`Fruit`
*   在构建时，您可以编写一个**测试**来遍历整个类路径并验证每个`Fruit`类是否满足您的要求。像[Reflections](https://code.google.com/p/reflections/)这样的库可以帮助您实现这一目标。
*   在编译时，您可以[**处理 Annotation**](http://www.javalobby.org/java/forums/t17876.html)。我不确定您将如何确保您的每个类都有一个注释（相反，每个包含注释的类都是您集中的类之一。）
*   在实现时，作为您请求的细微变化，您可以**使用抽象类**而不是接口，并要求所有实现者在构造函数中向您提供固定数据。这样，您就可以绝对控制行为。
*   在运行时，**当应用程序启动**时，您可以检查所有实现类是否满足您的要求，就像集成测试一样。在第三方为您的 API 做出贡献的情况下，如果您绝对必须检查它，这可能是最后一站的选择。

我认为最好为此使用测试。通过更好的反馈和更少的努力，您将获得所需的所有确定性。如果测试不是一个选项，因为您无法控制实施者，我会选择在启动期间强制执行的抽象类作为最后的手段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T06:26:29.663

一种简单的方法——无需 aop、编译时编织、运行时注释、运行时扫描……等就是将此行为封装在一个抽象类中：

```
interface Fruit {
  public String getName();
}

abstract class FruitImpl  {
  private final String name;
  public FruitImpl(name) {
    this.name = name;
  }

  public final String getFruitName(){
    return name;
  } 
```

}

因此，在构建时，每个实现都将被迫传递其名称，并且无法更改它（除非用户是故意恶意的）。这符合问题的措辞所暗示的内容。

但是有区别，因为一些建议似乎假设接口的所有实现都将具有**相同**的名称 - 尽管问题没有说明这一点。这些实现将是单例的想法吗？

或者，您可以使用装饰器模式来包装实现并检索一次字段值，然后始终返回该值，如下所示：

```
class FruitWrapper implements Fruit{
  private final String name;
  public FruitWrapper(Fruit fruit) {
    this.name = fruit.getFruitName();
  }

  public final String getFruitName(){
    return name;
  } 
```

}

因此，您可以在任何使用水果的地方使用它，并且它保证始终获得相同的价值。

通过这种方式，您可以将不变性转移到您控制的类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T20:07:14.213

你不是很困惑`static`吗`final`？

```
abstract class FruitName  {
    private final String name;
    public FruitName(String name) {
        this.name = name;
    }
} 
```

就接口/类而言，这是您可以获得的最好的。您也可以使用自定义注释，但方式略有不同：

```
@FruitName("apple")
class Apple implements Fruit 
```

并考虑使用简单的类名：

```
Fruit fruit = new Apple();
fruit.getClass().getSimpleName();  //"Apple" 
```

但是如果你在某个地方依赖类名，简单的重构就会毁掉代码的其他部分。所以我会认为注释更稳定。

* * *

奖励：您的问题很容易在[scala](/questions/tagged/scala "显示标记为“scala”的问题")中解决：

```
trait Fruit {
  val name: String  //abstract AND final
}

class Apple extends Fruit {
  val name = "apple"  //you MUST implement this
} 
```

如果你不“实现” `val name`（实际上它是一个不可变的字段），编译器会坚持标记`Apple`抽象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T20:26:05.063

你应该可以用 aspectj 和编译时间来做

# linux - 使用 OpenGL / Mesa3D 编译的便携式 Linux 可执行文件

> ID：11530026
> 
> 赞同：1
> 
> 时间：2012-07-17T20:03:06.103
> 
> 标签：linux, opengl, executable, mesa

我一直在阅读使用 OpenGL 进行游戏的跨平台开发。我们正在考虑开发一款可供 Linux 用户使用的游戏。然而，我遇到了一些我不太了解的事情。

如何创建可移植的 linux 可执行文件？具体来说，如何让各种不同版本的 OpenGL / Mesa3D 在一个（或多个）可执行文件中工作（我们不想分发源代码）。

关于 Linux 问题[http://www.linuxquestions.org/questions/linux-software-2/hardware-acceleration-using-opengl-and-x11-876634/](http://www.linuxquestions.org/questions/linux-software-2/hardware-acceleration-using-opengl-and-x11-876634/)有人详细介绍了 Mesa3D / OpenGL 的工作原理，但我我很难看到我将如何在我编译的可执行文件中使用每个发行版的 Mesa3D 版本（甚至不确定是否可能）。

据我所知，我需要在每台用户机器上将应用程序的各个部分动态链接在一起，可能是通过使用安装程序？如果是这种情况，我们可以在运行时为 Mesa3D / OpenGL 部分编译程序和链接，就像 OpenGL 的 dll 在 Windows 上可以做的那样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:39:17.997

只需动态链接您的可执行文件`libGL.so`并完成它。它的二进制接口在 OpenGL 的所有实现中是通用的。

> 据我所知，我需要在每台用户机器上将应用程序的各个部分动态链接在一起，可能是通过使用安装程序？

不是您进行链接，安装程序也不是。加载可执行文件时，动态链接会自动发生。动态链接是如何在 Windows 中加载 DLL 以及在 *nix 上加载 *nix 对应的共享对象 ( `.so`)。

在构建程序时，将选项添加`-lGL`到链接器命令行，它将`libGL.so`向可执行文件添加动态链接条目。然后您可以重新分配。当程序在目标系统上启动时，动态链接器将定位 libGL.so 并加载它。

# php - 无法将视图保存为要在模板中使用的变量

> ID：11530029
> 
> 赞同：1
> 
> 时间：2012-07-17T20:03:12.717
> 
> 标签：php, codeigniter

我正在尝试从我的控制器调用模型，该模型又从视图生成数据，将其保存为内容并将其返回给控制器，然后控制器将其添加到我拥有的模板中。

发生的事情`$content = $this->load->view('left/profile', $c_data);`是打印数据而不是将其保存在变量中`$content`

这是我的代码：

控制器：

```
function index($page = '1-Welcome to')
{
        if (!$this->tank_auth->is_logged_in()) {
            //display non-login page
            redirect('/auth/login/');
        } else { 
    //user information
        $user['user_id'] = $this->tank_auth->get_user_id();
        $user['username'] = $this->tank_auth->get_username();
    //general page data
        $main['title'] = $this->page_model->make_title(ucfirst($page));
    //template data
        $template['head'] = $this->load->view('templates/head', $main, TRUE); 
    //get left content
        $c_data['make_profile'] = $this->left_model->make_profile($user);

    //combine into one variable
        $data['template'] = $template;
        $data['page'] = $page;
        $data['user'] = $user;
        $data['left'] = $c_data;
        print_r($data);
        $this->load->view('main_template', $data);
        }
} 
```

专注于`$c_data['make_profile'] = $this->left_model->make_profile($user);`

这是`make_profile`

```
public function make_profile($user)
{
    $user_id = $user['user_id'];
    $query = $this->db->query(" SELECT location FROM user_profiles AS up 
                                INNER JOIN avatars AS a
                                ON up.avatar_id = a.id
                                WHERE user_id='$user_id'");
    $c_data['avatar_loc'] = $query->row_array();
    $content = $this->load->view('left/profile', $c_data);
    $content .= "hello";
    return $content;
} 
```

这是我的个人资料视图：

```
<div id="profile">
    <div id='avatar'><img src="<?php echo $avatar_loc['location'] ?>" alt="avatar_user"/></div>
    <div id="profile_pop"></div>
</div> 
```

知道为什么它不起作用吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T20:05:30.080

将视图中的数据作为字符串返回：

```
$this->load->view('left/profile', $c_data, TRUE); 
```

[在此处](http://codeigniter.com/user_guide/general/views.html)阅读（页面底部）。

# cognos - 我想编辑我的十进制数。我如何给它模式？

> ID：11530033
> 
> 赞同：2
> 
> 时间：2012-07-17T20:03:24.537
> 
> 标签：cognos, cognos-8, cognos-bi, cognos-tm1

我想在 cognos 中给出一个模式。像这样

我的号码：12.20

我想要的号码：12.2 我想删除 0 我如何给出模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:21:36.427

如果未提及数据格式，则默认格式将处理尾随零。

但是，如果您使用某种数据格式（数字、货币），则将添加尾随零，直到您的格式中提到的小数位。

要在值为 0 时抑制数字，您可以使用数据格式属性中的模式属性。

在您的示例中，要抑制第二个小数位为零，您可以将模式提及为

.0#

使用此模式，即使值为零，也会显示第一个小数位。而即使值为零，也不会显示第二个小数位。

有关该模式的十进制格式符号，请参阅 IBM Cognos 信息中心。[http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp)

# c# - 如何将 Visio 绘图存储在 SharePoint 列中

> ID：11530040
> 
> 赞同：2
> 
> 时间：2012-07-17T20:04:00.597
> 
> 标签：c#, sharepoint, vsto

有没有办法在 SharePoint (2010) 网站栏中存储 Visio 绘图？

我正在研究一种使用 SharePoint 列表数据自动化文档（MS Word）程序集的解决方案。一种这样的数据类型是 Visio。有没有办法将 Visio 存储在列表中，而不将其存储在 Word 文档中，然后需要对其进行检索和解析以提取 Visio？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:35:05.003

虽然您不能将其存储在本身的列中，但您确实有一些选择：

最简单的方法是创建一个文档库并让每个绘图成为一个文档，然后将任何需要的列添加到您的库的列表定义或内容类型中。

如果这不起作用，通常是因为您需要有一个父级（如您提到的 word 文档） - 许多列表都有附件字段，您可以使用它来附加任意数量的图纸（或其他文件）。

您还可以使用多个库来建立父子关系，这些库可能被证明是所有解决方案中最灵活和最健壮的。您可以在子列表中定义一个列，该列是对父列表的回溯（如果全部自动化，ID 列可能是一个不错的选择）。

# java - 如何实现类似于 Android 的消息处理程序，但在普通 Java 中

> ID：11530042
> 
> 赞同：0
> 
> 时间：2012-07-17T20:04:20.637
> 
> 标签：java, android, bluetooth, messaging, nxt

问题：我必须通过蓝牙将 Lego NXT 机器人连接到 Android 设备。NXT 正在运行 leJos，因此我可以在其上使用普通的 Java 代码。这些设备将相互发送和接收消息。现在，Android 部分对我来说很清楚，我过去使用 Android API 的 Message 和 Handler 类做过类似的事情。

标准Java中是否有类似的API以及如何使用它？我找到[了这个](https://stackoverflow.com/q/10702622/1509025)相关的线程，但无法弄清楚它应该如何工作。然后我从 Java EE 中找到了[Java 消息服务 API (JMS)。](http://java.sun.com/developer/technicalArticles/Ecommerce/jms/)这有用吗？我只是不确定 Java EE 的东西是否会在 NXT 砖上运行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:17:29.450

如果您在 Android 源代码中找到所需的内容`Handler.java`并根据您的需要进行调整，该怎么办？虽然不确定许可政策。`Looper.java``Message.java`

# oracle - ORA-01775: 同义词循环链

> ID：11530043
> 
> 赞同：1
> 
> 时间：2012-07-17T20:04:25.863
> 
> 标签：oracle

我正在创建一个表（下面是代码） - 这是通过 unix 上的一些脚本执行的。该脚本还创建了一些同义词（不确定是什么/如何）：

```
drop table BNS_SAA_MESSAGES;
CREATE TABLE BNS_SAA_MESSAGES
(
HostNumber varchar(50) NOT NULL,
SAAMessage varchar(2048) NOT NULL,
PRIMARY KEY (HostNumber)
); 
```

我收到以下错误：

```
Processing bns_saa_messages
cat: cannot open bns_saa_messages.sql

Commit complete.

GRANT SELECT ON bns_saa_messages TO RL_ORDFX_RPT

GRANT SELECT ON bns_saa_messages TO RL_ORDFX_RPT
                *
ERROR at line 1:
ORA-01775: looping chain of synonyms

GRANT INSERT ON bns_saa_messages TO RL_ORDFX_RPT

GRANT INSERT ON bns_saa_messages TO RL_ORDFX_RPT
                *
ERROR at line 1:
ORA-01775: looping chain of synonyms

GRANT UPDATE ON bns_saa_messages TO RL_ORDFX_RPT

GRANT UPDATE ON bns_saa_messages TO RL_ORDFX_RPT
                *
ERROR at line 1:
ORA-01775: looping chain of synonyms

GRANT DELETE ON bns_saa_messages TO RL_ORDFX_RPT

GRANT DELETE ON bns_saa_messages TO RL_ORDFX_RPT
                *
ERROR at line 1:
ORA-01775: looping chain of synonyms

create public synonym bns_saa_messages for ORDMSO.bns_saa_messages

create public synonym bns_saa_messages for ORDMSO.bns_saa_messages
                      *
ERROR at line 1:
ORA-00955: name is already used by an existing object

Commit complete. 
```

我用谷歌搜索`ORA-01775: looping chain of synonyms`，这似乎意味着一个东西被删除了，但有一个指向它的指针。我猜它发生在`select`不再存在的“事物”期间。不确定这些东西是桌子还是其他东西。这是我从研究中收集到的。

知道如何创建我的表格吗？我尝试多次执行 SQL 代码，但无济于事 - 我每次都收到相同的错误。

也没有创建表：

```
SQL> select * from bns_saa_messages;
select * from bns_saa_messages
              *
ERROR at line 1:
ORA-01775: looping chain of synonyms 
```

我已经查看了以下问题，但似乎没有帮助。也许您可以看到我看不到的东西：
[当我使用 sqlldr 时出现 ORA-01775：循环同义词链错误](https://stackoverflow.com/questions/11369347/i-get-an-ora-01775-looping-chain-of-synonyms-error-when-i-use-sqlldr)
[如何调试 ORA-01775：循环同义词链？](https://stackoverflow.com/questions/247090/how-to-debug-ora-01775-looping-chain-of-synonyms)
[ORA-01775: 循环同义词链但没有同义词](https://stackoverflow.com/questions/253881/ora-01775-looping-chain-of-synonyms-but-there-are-no-synonyms)

谢谢

**：更新：**

执行后：`select * from all_synonyms where synonym_name = 'BNS_SAA_MESSAGES';`根据克雷格的建议，我得到：

```
OWNER                          SYNONYM_NAME
------------------------------ ------------------------------
TABLE_OWNER                    TABLE_NAME
------------------------------ ------------------------------
DB_LINK
--------------------------------------------------------------------------------
PUBLIC                         BNS_SAA_MESSAGES
ORDMSO                         BNS_SAA_MESSAGES 
```

**：更新：2**
运行：`select * from all_tables where table_name = 'BNS_SAA_MESSAGES';`

```
SQL> select * from all_tables where table_name = 'BNS_SAA_MESSAGES';

no rows selected 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:20:50.987

我会运行它来查看同义词实际指向的位置：

```
select *
from all_synonyms
where synonym_name = 'BNS_SAA_MESSAGES' 
```

我猜同义词指向错误的 TABLE_OWNER。

**更新**

那么桌子实际上在哪里呢？您可以使用以下方法找到它：

```
select *
from all_tables
where table_name = 'BNS_SAA_MESSAGES' 
```

如果 table_owner 不是“ORDMSO”，那么您需要更新同义词以指向正确的位置，或者以 ORDMSO 身份运行 Create table... 脚本。

**更新2**

您可以将 Create table... 脚本作为 ORDMSO 运行吗？如果没有，您将需要让具有更高权限的人运行：

```
select *
from dba_tables
where table_name = 'BNS_SAA_MESSAGES' 
```

找出表格的真正位置，然后相应地更新同义词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:55:30.607

看起来输出来自第二次运行，您暗示了这一点；节目中的 ORA-00955`create public synonym`在某处之前已经完成（就像`all_synonyms`您运行的查询一样），并且它显然存在于其他错误中。第一次运行时不会出现这些错误，但在随后的每次运行中都会出现。

如果您希望它可重新运行，则第一个代码片段至少应在删除表之前删除公共同义词。

但是第一个片段似乎根本没有运行。没有来自 Oracle 的成功或失败消息。唯一真正的线索是：

```
Processing bns_saa_messages
cat: cannot open bns_saa_messages.sql 
```

这是一个 shell 脚本问题，而不是真正的 Oracle 问题。如果没有看到 shell 脚本，就很难判断出了什么问题，但我怀疑该脚本正在`.sql`从各种来源构建一个临时文件，然后通过 SQL*Plus 运行它；但重要的`bns_saa_messages.sql`文件丢失了。大概这就是第一个片段应该在的地方；并且由于这似乎存在，这可能很简单，因为文件和脚本所期望的名称不匹配，或者脚本正在执行`cd`并且文件位于错误的目录中，或者同样微不足道的事情。但也许不是……没有足够的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-23T00:34:46.920

您是否正在生成导出？

我使用 BD oracle 11g 的解决方案是：

查看 SYS_EXPORT 对象，使用 Oracle SQL Developer，连接到数据库并执行以下命令：

从 dba_objects 中选择 owner、object_name、object_type、status where object_name like '%SYS_EXPORT%'

[对象 SYS_EXPORT](https://i.stack.imgur.com/gYoY7.png)

然后与用户： sqlplus / as sysdba 删除创建的对象。

[删除对象 SYS_EXPORT](https://i.stack.imgur.com/Y90wF.png)

SQL>删除公共同义词 sys_export_full_01；

SQL>drop 公共同义词 sys_export_full_02;

SQL>删除公共同义词 sys_export_full_03；

SQL>删除公共同义词 sys_export_full_04；

在此之后，您可以生成导出。

# asp.net-mvc - 继承的 Razor 视图 - 如何运行初始化方法？

> ID：11530044
> 
> 赞同：0
> 
> 时间：2012-07-17T20:04:33.770
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我创建了一个继承自 WebPageView 的抽象类

```
public abstract class TemplateEngine<TModel> : WebViewPage<TModel> {
} 
```

当我的视图呈现时，我执行一些初始化代码 - 例如

```
@{
    Init();
} 
```

理想情况下，我希望避免这种情况并以某种方式在类中执行它，这是 Razor 在即将呈现视图时调用的方法，因此所有继承的视图页面都不需要我编写这一行。

我尝试覆盖 Execute() 并且它永远不会被调用。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:15:57.090

您可以覆盖该`InitializePage`方法。

```
public abstract class TemplateEngine<TModel> : WebViewPage<TModel> 
{
    protected override void InitializePage()
    {
    }
} 
```

# ruby - 使用 vim 生成基于整数的随机数表？

> ID：11530049
> 
> 赞同：2
> 
> 时间：2012-07-17T20:04:48.613
> 
> 标签：ruby, vim

有时我想生成随机数（以可用空格分隔的格式），但我希望能够指定行数和列数。

我从这里看到一些动机来生成随机数的单个实例（源自使用 ruby​​）： http: [//mo.morsi.org/blog/node/299](http://mo.morsi.org/blog/node/299)

" 在当前行的末尾生成随机数

```
function! s:Rand(max)
y a         
redir @b    
ruby << EOF
  rmax = VIM::evaluate("a:max")
  rmax = nil if rmax == ""
  printf rand(rmax).to_s
EOF
redir END 
let @a = strpart(@a, 0, strlen(@a) - 1)
let @b = strpart(@b, 1, strlen(@b) - 1)
let @c = @a . @b
.s/.*/\=@c/g
endfunction 
```

我们怎么能把这个简单地扩展到我可以打字的方式

:兰德(6,6)

并生成一个从我的光标位置开始的表格？

对于不知道的用户，vim 需要 +ruby 支持：[Installing vim with ruby​​ support (+ruby)](https://stackoverflow.com/questions/3794895/installing-vim-with-ruby-support-ruby)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:23:37.977

我通常很懒惰，只是做一些类似的事情

```
od -iAn -w 12 /dev/urandom | head -n 30 
```

这将生成具有 3 列随机整数的行。当然，您可以像以往一样对它发出命令：

```
fun! RTable(r,c)
    exec 'r!od -iAn -w' . (4*a:c) . ' /dev/urandom | head -n ' . a:r
endf
command! -nargs=+ RTable call RTable(<f-args>) 
```

现在你可以，悠闲地

```
RTable 5 5
RTable 1 500 
```

等等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T22:04:42.223

循环通过 x 和 y 坐标并提供最大随机数。

```
function! Rand(max)
   redir @b
ruby << EOF
  rmax = VIM::evaluate("a:max")
  rmax = nil if rmax == ""
  printf rand(rmax).to_s
EOF
   redir END
   let @a = strpart(@a, 0, strlen(@a) - 1)
   let @b = strpart(@b, 1, strlen(@b) - 1)
   let @c = @a . @b
   return @c
endfunction

fun! RandTable(...)
   for y in range(a:2)
      for x in range(a:1)
         if a:0 > 2
            let rand = Rand(a:3)
         else
            let rand = Rand(10)
         end
         exe "norm i" . rand . "  "
      endfor
      exe "norm Xi\<cr>"
   endfor
endfun

command! -nargs=* Rand call RandTable(<f-args>) 
```

现在您可以使用`:Rand 6 6`or`:Rand 6 6 6`其中第三个参数指定随机数的最大值。

# ios - 使用 dispatch_async 或 performSelectorOnMainThread 在主线程上执行 UI 更改？

> ID：11530050
> 
> 赞同：14
> 
> 时间：2012-07-17T20:04:49.520
> 
> 标签：ios, objective-c, asynchronous, grand-central-dispatch, nsthread

> **可能重复：**
> [Grand Central Dispatch (GCD) 与 performSelector - 需要更好的解释](https://stackoverflow.com/questions/5225130/grand-central-dispatch-gcd-vs-performselector-need-a-better-explanation)

要在主线程上执行“东西”，我应该使用`dispatch_async`or`performSelectorOnMainThread`吗？是否有首选方法、正确/错误和/或最佳实践？

示例：我正在方法块中执行一些逻辑`NSURLConnection sendAsynchronousRequest:urlRequest`。因为我正在对主视图做一些事情，例如呈现一个`UIAlertView`我需要`UIAlertView`在主线程上显示的东西。为此，我使用以下代码。

```
[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    // code snipped out to keep this question short

    if(![NSThread isMainThread]) 
    {
        dispatch_async(dispatch_get_main_queue(), ^{
                    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Oops!" message:@"Some Message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [alertView show];
        });
    }
}]; 
```

在同一个`if(![NSThread isMainThread])`语句中，我还调用了一些自定义方法。问题是，我应该`dispatch_async`使用上面使用的方法还是改用更好`performSelectorOnMainThread`？例如，下面的完整代码：

```
[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    // code snipped out to keep this question short

    if(![NSThread isMainThread]) 
    {
        dispatch_async(dispatch_get_main_queue(), ^{
                    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Oops!" message:@"Some Message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [alertView show];

            // call custom methods in dispatch_async?
            [self hideLoginSpinner];
        });

        // or call them here using performSelectorOnMainThread???
        [self performSelectorOnMainThread:@selector(hideLoginSpinner) withObject:nil waitUntilDone:NO];
    }
}]; 
```

仅供参考 - 如果我不在他的主线程上执行这些操作，我会在呈现时看到几秒钟的延迟，`UIAlertView`并且我在调试器中收到以下消息`wait_fences: failed to receive reply: 10004003`。我了解到这是因为您需要在主线程上对 UI 进行更改...如果有人想知道我为什么要做我正在做的事情...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T23:02:17.743

正如 Josh Caswell 提供的链接中所述，两者几乎是等价的。最显着的区别是它`performSelectorOnMainThread`只会在默认的运行循环模式下执行，如果运行循环在跟踪或其他模式下运行，它将等待。但是，在编写和维护代码方面存在一些显着差异。

1.  `dispatch_async`最大的优势是编译器会进行所有常规测试。如果您`performSelectorOnMainThread`在运行时错误地键入方法，而不是编译时失败。
2.  `dispatch_async`使用`__block`限定符从主线程返回数据变得更加容易。
3.  `dispatch_async` makes it much easier to handle primitive arguments since you don't have to wrap them in an object. However, this comes with a potential pitfall. If you have a pointer to some data remember that block capture does not deep copy the data. On the other hand wrapping the data in an object as you would be forced to do for `performSelectorOnMainThread` does deep copy (unless you set special options). Without a deep copy you can run into intermittent bugs that are frustrating to debug. So this means you should wrap things like `char *` in `NSString` before you call `dispatch_async`.

# android - Android中Phonegap的任何工作admob教程

> ID：11530055
> 
> 赞同：10
> 
> 时间：2012-07-17T20:05:22.110
> 
> 标签：android, cordova, admob

我试图在我的 Phonegap 应用程序中找到一些实现 Admob 的教程（Admob 不再支持移动网站）。我尝试了这些教程：
-[将 admob 广告添加到您的 phonegap 应用程序](http://wiki.phonegap.com/w/page/51172827/HOW%20TO%3a%20Add%20admob%20ads%20to%20your%20phonegap%20application)
- [Google AdMob Ads Android Fundamentals](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)

这些在 Phonegap V1.8 中不起作用。
有没有可行的解决方案或替代方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T07:30:59.973

编辑：08-01-2015：现在有很多插件可以更容易地在 android 项目上使用 admob，在其中一些你甚至可以显示插页式广告，并从 javascrip 控制所有内容。[您可以在http://plugins.cordova.io/#/search?search=admob](http://plugins.cordova.io/#/search?search=admob)上查看所有可用的插件

原始信息：

[这是一个 github 项目](http://goo.gl/eGdcM)，自述文件解释了如何包含 admob。

哇，该链接的访问量超过 500 次。我将在此处粘贴步骤以防项目消失：

将 AdMob 的原生 Android SDK 与您的 Android PhoneGap 应用程序版本集成使用/确认工作

```
PhoneGap 2.0.0
AdMob Native Android SDK: 6.1.0 
```

**背景**

传统上，通过广告通过 PhoneGap 应用获利的最流行方法之一是使用 AdMob 的智能手机网络广告。这些基于 JavaScript 的广告非常适合 PhoneGap 的一次构建，随处部署的范例。然而，今年早些时候，谷歌禁用了智能手机网络广告类型，转而支持 AdSense。需要注意的是，为了集成 AdSense 并遵守 AdSense 的条款和条件，广告必须嵌入在网络上可自由访问的位置，以利用 AdSense 的自动上下文化，并且要求该位置可被抓取。不要期望能够将 AdSense 的广告代码复制并粘贴到您的 PhoneGap 应用程序中，就像您在普通的移动网站上所做的那样，您的 AdSense 帐户很可能会因为违反条款和条件而被迅速关闭。解决方案

使用 AdMob 的 Native Android SDK 将广告集成到您的 PhoneGap 应用程序中很容易。这将显示 AdMob 和 AdSense 广告（在符合条款和条件的庄园中），以帮助尽可能有效地通过您的 PhoneGap 应用获利。如果您不是 AdSense 用户，或者希望只包含 AdMob 广告，则可以在 AdMob 控制面板下选择不启用 AdSense。

**步骤 1) 安装 AdMob 的原生 Android SDK**

```
Download the Android AdMob SDK
Copy GoogleAdMobAdsSdk-*.*.*.jar to your PhoneGap's libs directory.
In Eclipse, Right or secondary click on your project, choose 'Build Path' then the last menu item 'Configure Build Path'.
Select the 'Libraries' tab
Click 'Add Jars'
Select yourProject/libs/GoogleAdMobAdsSdk-*.*.*.jar 
```

**步骤 2) 包括新安装的库**

```
Open yourProject/src/com.*.*/MainActivity.java
Expand the collapsed inclusions (The + next to import android.os.Bundle; by default)
Add import com.google.ads.*; 
```

**步骤 3) 配置您的 AdMob 广告单元 ID**

在您的 MainActivity 中，使用以下代码为您的广告 ID 创建一个字符串：

```
private static final String AdMob_Ad_Unit = "Unit_ID_Here"; 
```

请务必包含您自己的广告单元 ID，否则将不会显示任何广告

**第 4 步）创建您的广告视图**

在您的单位 ID 字符串下方，添加一个新视图：

```
private AdView adView; 
```

在 PhoneGap`super.loadUrl`调用之后，您将配置和初始化您的新广告视图，如下所示：

```
adView = new AdView(this, AdSize.BANNER, AdMob_Ad_Unit); 
LinearLayout layout = super.root;
layout.addView(adView); 
AdRequest request = new AdRequest();
request.setTesting(true);
adView.loadAd(request); 
```

查看此文件的完整示例

**步骤 5) 在 AndroidManifest.xml 中定义活动**

在 MainActivity 之后，创建定义广告活动：

```
<activity android:name="com.google.ads.AdActivity"
  android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

查看此文件的完整示例

**步骤 6) 禁用测试模式**

请务必在部署到 Google Play 之前禁用测试模式，方法是将值更改为`false`、注释掉或从您的`MainActivity.java`

```
request.setTesting(true); 
```

# c# - 将数据从局部视图传递到控制器操作

> ID：11530060
> 
> 赞同：1
> 
> 时间：2012-07-17T20:05:36.907
> 
> 标签：c#, asp.net-mvc, partial-views, html-helper

我有一个强类型的局部视图，它以列表格式显示输出。我想从数据库的部分视图中插入数据。我正在努力遍历部分视图中的行并将它们发送到控制器操作以插入数据库。这是我到目前为止所拥有的

部分的：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<Student.Models.vwStudent>>" %>

<table>
        <tr>
            <th>
                Student ID
            </th>           
            <th>
                Past Due Amount
            </th>
            <th>
                Past Due Days
            </th>            
        </tr>

        <% if (Model != null)
           foreach (var item in Model) { %>

        <tr>
            <td>
                <%=Html.TextBox("StudentID",item.StudentID) %>
            </td>

            <td>
                <%=Html.TextBox("PastDueAmount",item.PastDueAmount) %>
            </td>
            <td>
                <%=Html.TextBox("PastDueDays",item.PastDueDays) %>
            </td>            
        </tr>

    <% } %>

    </table> 
```

这是我在master中访问以上部分的方式：

```
<div>
<% using(Html.BeginForm("SaveStudentInvoice", "StudentInvoice")) %>
<% { %>
<div>
<% Html.RenderPartial("DisplayStudentInvoiceList"); %>
</div>
<% } %>
<br/>
<input type="button" id="Submit" name="Submit" value="Submit" />
</div> 
```

控制器：

```
[HttpPost()]
public ActionResult SaveStudentInvoice(IEnumerable<Student.Models.vwStudent> students)
{
    DataContext db = new DataContext();

foreach(Student.Models.vwStudent student in students){

        Invoice Inv = new Invoice();
        {
            Inv.StudentID= student.StudentID;
            Inv.PastDueAmount= student.PastDueAmount;   
            Inv.PastDueDays= student.PastDueDays;                 
        };

        db.Invoices.InsertOnSubmit(Inv);
}
        db.SubmitChanges();

        return View();

} 
```

在部分视图中，列出了不止一名学生（2,3,4.. 行）。当我点击“保存”按钮时，我只能保存部分（第一行）中列出的第一个学生，如何循环访问部分列出的剩余学生以保存他们？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:21:56.930

你的绑定错误，你可以从这个示例绑定开始，如果有任何错别字，对不起，我是在编辑器本身输入的。

**更新：**

您的部分：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<SaveStudentInvoice.Models.vwStudent>>" %>

<table>
        <tr>
            <th>
                Student ID
            </th>           
            <th>
                Past Due Amount
            </th>
            <th>
                Past Due Days
            </th>            
        </tr>

        <% if (Model != null)
  for (int i = 0; i < Model.Count(); i++) { %>
        <tr>
            <td>
                <%=Html.TextBoxFor(m=>m.ToList()[i].StudentID) %>
            </td>

            <td>
                <%=Html.TextBoxFor(m=>m.ToList().ToList()[i].PastDueAmount) %>
            </td>
            <td>
                <%=Html.TextBoxFor(m=>m.ToList()[i].PastDueDays) %>
            </td>            
        </tr>

    <% } %>

    </table> 
```

您的主视图：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
   <div>
<% using(Html.BeginForm("Index","Home")) %>
<% { %>
<div>
<% Html.RenderPartial("Partial",Model); %>
</div>
<br/>
<input type="submit" id="Submit" name="Submit" value="Submit" />
<% } %>

</div>
</asp:Content> 
```

你的控制器：

```
public ActionResult Index()
        {
            List<vwStudent> students = new List<vwStudent>();
            students.Add(new vwStudent() { PastDueAmount = 100, PastDueDays = "None", StudentID = "ooooo" });
            students.Add(new vwStudent() { PastDueAmount = 102, PastDueDays = "No", StudentID = "Sollina" });
            return View(students);

        }
        [HttpPost]
        public ActionResult Index(List<vwStudent> studentModel)
        {

            return View(studentModel);

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:23:19.167

尝试为 MVC 绑定将识别为对象集合的输入名称命名：

```
 int index = 0;
       foreach (var item in Model) { %>
        <td>
            <%=Html.TextBox(string.Format("Entry[{0}].StudentID", index),
                            item.StudentID) %>
        </td>
        ...
    <% 
           i++;
       } %> 
```

然后您可以使用 an`IEnumerable<Student.Models.vwStudent>`作为您的模型类型，如 tsegay 所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:25:04.073

您需要将模型绑定到集合。目前它只是绑定到单个值。

查看：[http ://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# java - Java：修改改变哈希码的id

> ID：11530061
> 
> 赞同：6
> 
> 时间：2012-07-17T20:05:41.743
> 
> 标签：java, hashmap, hashcode, hashset

我使用 HashSet 并且需要修改对象的 ID，但它会更改 hashcode 并破坏 HashSet 和 hashCode() 方法的规则。

什么是最好的解决方案：从 Set 中删除对象并添加具有新 ID 的对象，或者在 Set 中的每个对象中保留哈希码（例如在构造函数中生成），或者有其他方法可以解决这个问题吗？

感谢帮助。

更新：我犯了错误：在对象中保留哈希码是很糟糕的，因为在这种情况下，相同的对象可以有不同的哈希码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T20:55:20.067

作为容器的 HashSet 通过您放入其中的项目的哈希码访问其项目（包含、删除）。哈希码通常由其实例成员的状态构建。所以哈希码随着对象状态的操作而改变。

[Object](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)的文档说：“维护 hashCode() 方法的通用合同，其中规定相等的对象必须具有相等的哈希码”

如您所见，如果您更改保存在 HashSet 中的对象的状态，则该对象将无法再通过 remove 方法访问或通过 HashMap 的 contains 方法找到。

您提供的选项是：

1.  删除对象，更改它并再次添加它 - 如果 HashSet 是强制性的，那么效果很好，最简单的方法

2.  将哈希码的值保持在“某处” - 意味着您对不相等的对象具有相同的哈希码。或者，如果您遵守文档，您可能会遇到两个相等且具有相同哈希码的对象，但它们的成员变量不同！这可能导致不可预知的错误。

# ruby-on-rails - Heroku 错误：heroku pg:reset SHARED_DATABASE --confirm quiet-sunset-3760

> ID：11530062
> 
> 赞同：0
> 
> 时间：2012-07-17T20:05:42.470
> 
> 标签：ruby-on-rails, heroku

当我通过 heroku gem 运行大多数命令时，我收到以下错误：

```
/Users/me/.heroku/client/lib/heroku/cli.rb:30:in `start': undefined method `error_with_failure' for Heroku::Helpers:Module (NoMethodError)
from /usr/bin/heroku:28 
```

以下工作：

`heroku logs`

`heroku restart`

以下不起作用并返回上述错误：

`heroku run console`

`heroku run rake db:migrate`

`heroku pg:reset SHARED_DATABASE --confirm spiteful-beaver-2000`

日志显示我的数据库存在问题（未迁移到当前数据库）。当我尝试迁移数据库以解决这个简单的问题时（实际上，我首先尝试使用上面的最后一个命令重新启动数据库），我第一次遇到了错误。我已经升级宝石无济于事。

我怎样才能解决这个问题？我宁愿不重新启动那个应用程序（即将它转移到heroku 上的另一个应用程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:33:39.863

重新安装工具带修复它。

一种卸载方式：

```
rm -rf /usr/local/heroku
sudo rm -rf /usr/bin/heroku 
```

# css - LESS - 两个入门问题（使用 CSS 编译选项和组合）

> ID：11530068
> 
> 赞同：1
> 
> 时间：2012-07-17T20:06:03.207
> 
> 标签：css, node.js, less

我想开始使用 LESS 而不是常规的 CSS。我一直在阅读它的最后几个小时，它看起来很棒，但我仍然不确定我应该如何运行/使用它。这就是为什么我有一些问题：

1.  我读过使用 less.js 在客户端编译是不好的。这似乎是合理的。我还读到您可以使用 node.js 在服务器端进行编译。Node.js 需要 Python，但由于我只有一个托管帐户（而不是自己的服务器），因此 Python 不可用。`.less`因此，我查看了将文件编译为`.css`. 使用 less-files 进行开发，然后将其编译为 `.css 并将其上传到在线服务器（当然还链接到该文件）有什么不好的吗？使用这种方法，less-files 不需要在线，对吧？

2.  我使用 Wordpress 裸模板作为起点。此模板是在没有 LESS 的情况下创建的。这意味着我有一个`.css`文件，例如包含 CSS 重置。我应该将这些“普通 CSS”行复制到`.less`文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:20:49.597

1.  我在我的网站上使用 LESS，作为 CSS 的替代品。我使用 LESS 编译器 SIMPLESS。使用 simpless，您只需将要编译成 CSS 的 LESS 文件拖到 simpless 中。从这里开始，simpless 将 LESS 文件编译成一个全新的 CSS 文件，该文件具有相同的名称和相同的文件夹位置。从那里，我只是将编译后的 css 文件链接到我的 html 文档的 head 标记中。这样做，您将在您的机器上本地编译 LESS 文件。

2.  我将使用“.less”文件名构建您的 css 文件结构。然后将所有less文件导入一个主要的less样式表并编译该样式表。然后你可以在你的 html 文档的 head 标签中链接编译好的 CSS 文件。

以为我会分享我如何使用LESS。到目前为止我喜欢它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:19:19.077

1.  在本地编译并上传对于小型站点来说很好。如果你是一个巨大的网站，你可能会有一个构建步骤，但你没有。你可以手动编译它。一段时间后这会变得很烦人，但是您可以使用程序来监视更改并自动编译它，从而使您的生活变得不难。
2.  是的，只需将文件重命名为 .less*就可以了*

* * *

1.  [http://www.ravelrumba.com/blog/watch-compile-less-command-line/](http://www.ravelrumba.com/blog/watch-compile-less-command-line/)

# c - 指向常量值的指针初始化 - 分段错误

> ID：11530070
> 
> 赞同：-2
> 
> 时间：2012-07-17T20:06:24.187
> 
> 标签：c, pointers

我有一个问题，我对我得到的输出有点困惑。有人可以帮我解决这个问题。

`

```
#include <stdio.h>

int main()
{
  int *i = 5;
  char *c = i[1];
  printf("%c", *c);
} 
```

`

它会正确编译而没有错误。如果它编译，它会在运行时给出分段错误。如果是，是因为哪一行。据我说， main() 的前两行是可以的。printf 语句给出了分段错误，但我无法证明它的合理性。这里 int *i 被初始化为一个常数。所以我可以将'i'指向其他位置但不能更改*i。我将 'i' 的第二个字节分配给 char *c，但这里我没有更改 *i。那么为什么打印 *c 会出现分段错误。这是我的看法。寻找更好的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:10:43.593

通过这样做`int *i = 5;`，您会得到一个指向无效内存地址的指针。只要您不对它进行指针运算并且不取消引用它就可以了。

通过这样做`char *c = i[1];`，您确实对该指针（指向的对象不是数组）执行指针算术，甚至取消引用它。两者都意味着您正在调用未定义的行为。同时，您声明了一个初始化另一个指向无效内存地址的指针。

通过这样做`printf("%c", *c);`，您再次取消引用无效的指针地址，这再次调用未定义的行为。也就是说，任何事情都可能发生，包括分段错误。

请注意，您只观察到分段错误，因为您正在运行的操作系统知道这种形式的恶意代码并拒绝其进一步执行。未定义的行为不保证会失败。问题是，编译器不需要通知您有关代码的此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:07:58.467

`int *i = 5;`创建一个指向**地址**5 的指针，而不是**数字**5 的地址。你应该这样做：

```
int a = 5;
int *i = &a; 
```

此外，由于`i`是指向 a 的指针`int`，因此以下行为未定义：

```
char *c = i[1];
//        ^ returns an int, not a char pointer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:25:14.900

您的代码有几个问题。

```
int *i = 5; 
```

您正在`i`使用*地址*5 初始化指针。这至少有几个问题。首先，大多数现代体系结构（例如 x86）坚持多字节类型（例如，`int`对齐），以便它们从偶数地址开始。其次，5 是一个非常低的地址值，并且取决于平台，您的程序可能无法使用（使其成为*无效*地址）。

```
char *c = i[1]; 
```

现在，您要声明一个指向`char`并使用存储在下一个整数地址之后的整数值*（*`i` 7 或 9 或其他地址，这已经存在问题，如上所述；这本身可能导致分段错误）。除了打字问题（表达式的类型`i[1]`是`int`，不是`char *`）之外，几乎可以保证 的内容`i[1]`是不对应于有效内存地址的随机位字符串。

这就是为什么您在`printf`语句中得到分段错误的原因；`*c`正在尝试取消引用无效指针。

所以不，前两行`main`绝对*不行*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T20:12:22.677

您不能**从**静态值初始化指针。您的代码初始化`i`为指向内存地址`5`，这肯定不是您的应用程序内存。做你想做的事，你需要这个：

```
int x = 5;
int* i = &x; 
```

是运算符的`&`地址，它获取 int 的地址`x`，它保存值`5`。至于你的第二行，那是完全无效的。指向`int`like 的指针不支持该`[]`运算符，即使它是一个数组。你要么想要：

*   的价值`i`：`*i`
*   的第一个字节`i`：除非你有充分的理由，否则不要尝试

然后，将该值分配给一个指针，这也是无效的。您需要`&`再次使用。

# iphone - gridview 控制器的内容与 toolBar 重叠

> ID：11530072
> 
> 赞同：0
> 
> 时间：2012-07-17T20:06:28.200
> 
> 标签：iphone, gmgridview

我正在使用[GMGridView](https://github.com/gmoledina/GMGridView/)显示内容。

下面是 xib 和名为 gridViewHolder 的灰色内部视图，它将保存名为**gmGridView的****gridView** ![在此处输入图像描述](../Images/70d821b7c7e7a658add3db921b86203c.png)

要初始化gridView，我正在做

```
- (void) loadView {
    [super loadView];
    gmGridView                  =   [[GMGridView alloc] initWithFrame:self.gridViewHolder.bounds];
    gmGridView.autoresizingMask =   UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    gmGridView.backgroundColor  =   [UIColor clearColor];
    gmGridView.itemSpacing      =   SPACING;
    gmGridView.dataSource       =   self;
    gmGridView.actionDelegate   =   self;
    [self.gridViewHolder addSubview:gmGridView];

} 
```

但是，当我运行应用程序时，底部的工具栏显示在 gridView 后面（如下图所示）

![在此处输入图像描述](../Images/8e1137e1cd8bf7b7395f0d74f2954fdf.png)

有没有人对这个问题有任何线索。欢迎所有评论在这里

# asp.net - AJAX.BeginForm 向 MVC 控制器发送空的 FormCollection 列表

> ID：11530075
> 
> 赞同：2
> 
> 时间：2012-07-17T20:06:46.247
> 
> 标签：asp.net, ajax, asp.net-mvc-3, ajax.beginform, formcollection

我有一个非常简单的代码：

```
@using (Ajax.BeginForm("SearchAccount", "Account", new AjaxOptions { UpdateTargetId = "SearchResults", HttpMethod = "Get", InsertionMode = InsertionMode.Replace })) 
    {
        <fieldset>
            <input id="txtSearchBox" name="SearchString" type="text"  />
        </fieldset>
        <input type="submit" value="Search"  />
    } 
```

在控制器方面我有以下代码

```
public PartialViewResult SearchAccount(FormCollection formCollection)
    {
        try
        {
            string SearchString = formCollection["SearchString"];
            List<Moovers.DAL.Account> Accounts = Moovers.BL.Account.SearchAccount(SearchString);

            return PartialView("_AccountSearchResult", Accounts);        
        }
        catch (Exception ex)
        {
            throw;
        }

    } 
```

问题是“FormCollection”，它是空的。可能的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:11:49.047

这是因为您正在使用`"GET"`作为您的方法。

见[https://stackoverflow.com/a/2265210/120955](https://stackoverflow.com/a/2265210/120955)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:56:34.563

为什么要使用`FormCollection`？您可以直接将`SearchString`as 作为操作参数吗？

```
public PartialViewResult SearchAccount(string SearchString)
{
  try
  {
     var Accounts = Moovers.BL.Account.SearchAccount(SearchString);
     return PartialView("_AccountSearchResult", Accounts);        
  }
  catch (Exception ex)
  {
     throw;
  }
} 
```

如果您从 Form 传递多个值，那么您可以创建一个视图模型并简化您的生活。

前任。

```
public class SearchModel
{
   public string SearchString { get; set; }
   .. others
}

public PartialViewResult SearchAccount(SearchModel searchModel)
{
  ...
} 
```

**请注意，重要的是表单字段的名称应与参数/属性名称匹配。**

# c++ - C++ ODBC SQL Server 2008 连接

> ID：11530080
> 
> 赞同：3
> 
> 时间：2012-07-17T20:07:10.413
> 
> 标签：c++, visual-c++

我正在尝试从新创建的 C++ 应用程序连接到本地 SQL Server 2008 实例。我还在学习 C++，所以我可能会遗漏一些明显的东西。

我正在使用 Microsoft Visual Studio 2010，将 Win32 控制台应用程序创建为空白项目并自己添加 main.cpp。

SQL Server 实例已启动并正在运行，我可以使用 SQL 或集成身份验证从其他机器连接到它，我什至可以让我的 C# 应用程序使用 .net 对象进行连接。

但是在 C++ 中，我无法建立连接，它总是报告失败。

到目前为止，我的代码如下

```
#include <iostream>
#include <windows.h>
#include <sqltypes.h>
#include <sql.h>
#include <sqlext.h>

int main() {

    SQLHENV env;
    SQLHDBC dbc;
    SQLHSTMT stmt;
    SQLRETURN ret;
    SQLSMALLINT columns; 
    int row = 0;

    /* Allocate an environment handle */
    SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &env);
    /* We want ODBC 3 support */
    SQLSetEnvAttr(env, SQL_ATTR_ODBC_VERSION, (void *) SQL_OV_ODBC3, 0);
    /* Allocate a connection handle */
    SQLAllocHandle(SQL_HANDLE_DBC, env, &dbc);

    /* Connect to the DSN */
    SQLDriverConnectW(dbc, NULL, L"DRIVER={SQL Server};SERVER=(local)\DB1;DATABASE=master;UID=sa;PWD=password;", SQL_NTS, NULL, 0, NULL, SQL_DRIVER_COMPLETE);

    /* Check for success */
    if(SQL_SUCCESS!=SQLAllocHandle(SQL_HANDLE_STMT, dbc, &stmt))
    {
        std::cout << "Failed to connect";
    }

    std::cin.get();
    return 0;
} 
```

我基于看到一些在线示例，例如[http://www.easysoft.com/developer/languages/c/odbc_tutorial.html](http://www.easysoft.com/developer/languages/c/odbc_tutorial.html)

始终，即使使用有效凭据，我的代码也会进入无法连接块。并尝试使用上面链接文章中的 extract_error ，根本不会产生任何错误消息。

请问我在这里做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T20:30:17.143

^(从评论重新发布，以便可以关闭问题：)

*   `(SQLWCHAR*)`是一个明显的错误。而是尝试`L`使您的字符串文字成为*宽*字符串文字。

*   默认连接超时为 60 秒，因此您可能会遇到这种情况。检查您的 SQL 协议设置，如果它配置为在本地使用 TCP，请同时检查您的防火墙设置。

# xml - 缓冲区中是否会生成任何树 我怎么能想象得到呢？

> ID：11530082
> 
> 赞同：1
> 
> 时间：2012-07-17T20:07:18.337
> 
> 标签：xml, xslt, xml-parsing, xslt-1.0, xalan

我的 input.xml 如下：

```
 <root>
      <Property>
        <info>
          <Name>A</Name>
          <Value>1000</Value>
        </info>
        <info>
          <Name>B</Name>
          <Value>2000</Value>
        </info>  
        <info>
          <Name>C</Name>
          <Value>3000</Value>
        </info>  
      </Property>
    </root> 
```

所以在这里当我说 - `<xsl:apply-templates select="//Property/info">`树会怎么样？我可以认为它如下所示？

```
 <Property>
        <info>
          <Name>A</Name>
          <Value>1000</Value>
        </info>
        <info>
          <Name>B</Name>
          <Value>2000</Value>
        </info>  
        <info>
          <Name>C</Name>
          <Value>3000</Value>
        </info>  
      </Property> 
```

当匹配模板时，我可以将 Property 元素作为树中的根元素吗？（我认为是的，因为我执行它并认为单独的树将在内存中的某个地方创建 - 这是真的吗？（请解释）

```
<xsl:template match="Property/info"/> 
```

这里我的实际问题是-模板是应用于缓冲区中的树（将其作为主树）还是应用于原始源树？

a）如果事情是在缓冲树上计算/应用的，当我说的时候，我们应该不能正确检索根元素

```
<xsl:copy-of select="../../*"/> 
```

因为缓冲树没有根元素并且处理器不知道根元素。[但实际情况如何？]

b) 如果模板应用于原始源代码树，那么

```
<xsl:template match="Property/info"/> 
```

应该不行吧？（因为我们应该以这种方式给予：

```
<xsl:template match="root/Property/info"/> 
```

或者

```
<xsl:template match="//Property/info"/> 
```

但没有提到它的工作原理。这怎么可能？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:09:44.713

这里有两个单独的问题：

1) 模板匹配模式如何与源文档树的部分匹配？和

2) 应用特定模板时的上下文节点是什么？

模板匹配模式与 XPath 表达式不同，尽管它们看起来很相似。特别是它们不假定任何当前上下文节点。“属性/信息”匹配`info`树中任何其父元素为元素的`Property`元素。尽管这种匹配模式看起来与 中的 XPath 表达式相同`select="Property/info"`，但它们完全不同；后者将仅选择*作为上下文节点*`info`子元素的子`Property`元素的元素*. 匹配模式没有后一个限制，也不可能，因为上下文节点的概念没有进入匹配匹配模式的规范中。（我想更准确地说，对于匹配模式，初始上下文节点是未指定的；它可以是 [显式或隐式] 被选择的任何节点`<xsl:apply-templates>`。）*

 *一旦选择（通过匹配）特定模板以应用于特定节点，该节点将成为上下文节点，因为所选模板的内容被评估。（XSLT 处理器不会（从概念上）将树的一部分复制到缓冲区中；上下文节点是原始源文档中的一个节点。）所以是的，您可以选择“../../*”，因为您是从 的上下文节点开始`/root/Property/info`。*

# php - Symfony2 包与 PSR-0 兼容的 3rd 方库有什么区别？

> ID：11530084
> 
> 赞同：4
> 
> 时间：2012-07-17T20:07:36.183
> 
> 标签：php, symfony, bundle, psr-0

我了解捆绑包应包含[最佳实践文档](http://symfony.com/doc/current/cookbook/bundles/best_practices.html)中概述的目录结构和其他约定。

我仍然不明白为什么我应该选择将库作为捆绑包安装，还是在 Symfony2 安装中“按原样”安装 PSR-0 兼容库。

例如，我想安装 Guzzle Http Client 库。目前我有两个版本可供选择：

*   图书馆[本身](https://github.com/guzzle/guzzle)
*   或[Guzzle 'bundle'](https://github.com/guzzle/GuzzleBundle)。

我可以看到该捆绑包使用了该库，但由于我是 Symfony2 的新手，所以我还不能掌握“大局”。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:38:27.587

使用包而不是库将允许您从 ServiceContainer 访问库。

这将允许您轻松调用库；例如在控制器中：

```
<?php
public function someAction(){
    // ...
    $guzzle = $this->get('guzzle.service_builder');
    // ...
} 
```

查看[http://symfony.com/doc/current/book/service_container.html](http://symfony.com/doc/current/book/service_container.html)

# .net - 为对称数据加密派生多用途密钥

> ID：11530088
> 
> 赞同：1
> 
> 时间：2012-07-17T20:07:55.500
> 
> 标签：.net, encryption, cryptography, key, aes

我需要为 .net 中的 AES 对称加密生成一个 256 位密钥。我还没有找到任何关于如何“从头开始”这样做的描述。我的意思是，我不打算将此密钥作为用户密码的基础。我只是想生成一个加密安全的密钥来使用。

据我所知，最好的选择就是使用 .net 类[RNGCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)

这是生成加密安全密钥的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:26:12.110

“最佳方法”取决于您的确切要求。

如果您只需要 32 个随机字节，那么 RNGCryptoServiceProvider 就可以了。您必须做出安排以确保密钥在您的目的地可用，通常使用 RSA 或其他一些非对称加密方法。如果您需要它用于存档目的，那么您将需要一种安全存储它的方法。您还需要确保在不再需要后将其安全删除。

或者，您可以使用[密钥派生函数](http://en.wikipedia.org/wiki/Key_derivation_function)，将传输、存储和删除的相同考虑应用于 KDF 参数。

# linux - 在 ZSH 的 PATH 变量中添加新条目

> ID：11530090
> 
> 赞同：338
> 
> 时间：2012-07-17T20:07:59.223
> 
> 标签：linux, ubuntu, zsh

我正在使用 zsh，我正在尝试向变量添加一个新条目 ( `/home/david/pear/bin`)，`PATH`但我不知道如何。

最让我困惑的是，我的文件中没有一个`PATH`变量引用`~/.zshrc`，而是`echo $PATH`返回：

```
/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

所以在`PATH`某处设置了一个变量。

* * *

## 回答 #1

> 赞同：416
> 
> 时间：2013-08-06T10:41:27.553

实际上，使用 ZSH 允许您使用环境变量的特殊映射。所以你可以简单地做：

```
# append
path+=('/home/david/pear/bin')
# or prepend
path=('/home/david/pear/bin' $path)
# export to sub-processes (make it inherited by child processes)
export PATH 
```

对我来说，这是一个非常简洁的功能，可以传播到其他变量。例子：

```
typeset -T LD_LIBRARY_PATH ld_library_path : 
```

* * *

## 回答 #2

> 赞同：331
> 
> 时间：2012-07-17T20:15:05.857

在这里，将此行添加到`.zshrc`：

```
export PATH=/home/david/pear/bin:$PATH 
```

**编辑**：这确实有效，但下面[的答案](https://stackoverflow.com/a/18077919/1008938)更好，因为它利用了 ZSH 为变量提供的结构化接口，如`$PATH`. 这种方法是标准的`bash`，但据我所知，当 ZSH 提供更好的替代方案时，没有理由使用它。

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2015-06-11T22:11:39.757

您可以以最小的方式*附加*到您的。`PATH`除非您附加多个元素，否则不需要括号。它通常也不需要引号。所以**简单，简短的追加方法**是：

```
path+=/some/new/bin/dir 
```

这种小写语法`path`用作**数组**，但也会影响其大写伙伴等效项`PATH`（通过“绑定”到它`typeset`）。

*（请注意，不需要/想要**no`:`作为分隔符**。）*

## 常见的交互用法

然后测试新脚本/可执行文件的常见模式变为：

```
path+=$PWD/.
# or
path+=$PWD/bin 
```

## 常见配置用法

您可以在您的周围添加路径设置`.zshrc`（如上），它自然会导致**前面列出的设置优先**（尽管您可能偶尔仍想使用“前置”表单`path=(/some/new/bin/dir $path)`）。

## 相关花絮

以这种方式处理`path`（作为数组）还意味着：**无需执行 a `rehash`**即可找到新路径的命令。

还可以将其视为编辑 （和其他内容）**`vared path`的动态方式。`path`**

您可能只`path`对这个问题感兴趣，但由于我们谈论的是导出和数组，请注意 **[通常无法导出数组。](http://www.zsh.org/mla/workers/1997/msg00515.html)**

您甚至可以**防止`PATH`重复条目** （请参阅 [this](http://zsh.sourceforge.net/Guide/zshguide02.html#l24) 和[this](http://www.zsh.org/mla/users/1998/msg00490.html)）：

```
typeset -U path 
```

## PATH 预填充

您的路径中已经有一些条目的原因是由于您的系统外壳文件为您设置了路径。这在其他几篇文章中有介绍：

*   [为什么以及在哪里设置 $PATH 环境变量？](https://unix.stackexchange.com/questions/246751/how-to-know-why-and-where-the-path-env-variable-is-set)
*   [$PATH 的来源在哪里？我在 .zshrc 中找不到它](https://superuser.com/questions/1464727/in-zsh-on-mac-os-where-is-the-source-of-path-i-cannot-find-it-in-zshrc)

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2017-12-13T14:26:38.913

一个班轮，无需打开`~/.zshrc`文件

```
echo -n 'export PATH=~/bin:$PATH' >> ~/.zshrc 
```

或者

```
echo -n 'export PATH=$HOME/bin:$PATH' >> ~/.zshrc 
```

要查看效果，请`source ~/.zshrc`在同一选项卡中执行或打开一个新选项卡

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2019-07-10T03:43:44.993

1.  添加了 ~/.zshrc 的路径

    `sudo vi ~/.zshrc`

    添加新路径

    ```
    export PATH="$PATH:[NEW_DIRECTORY]/bin" 
    ```

2.  更新 ~/.zshrc

    保存 ~/.zshrc

    `source ~/.zshrc`

3.  检查路径

    `echo $PATH`

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2018-05-08T12:12:08.650

**选项 1：**将此行添加到 ~/.zshrc：

```
export "PATH=$HOME/pear/bin:$PATH" 
```

之后，您需要运行`source ~/.zshrc`以使您的更改生效或关闭此窗口并打开一个新窗口

**选项 2：**在终端控制台内执行它以仅将此路径添加到当前终端窗口会话。当您关闭窗口/会话时，它将丢失。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-30T13:26:12.547

对我来说，`PATH=$PATH:/path/to/file/bin` 然后`export PATH`工作。检查`echo $PATH`。其他解决方案正在临时添加路径。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-29T10:06:45.443

要验证您的新目录是否已正确添加，您可以使用

`print -l $path`

由于它的类型已知是一个数组

# c++ - 获取日周开始

> ID：11530093
> 
> 赞同：0
> 
> 时间：2012-07-17T20:08:12.480
> 
> 标签：c++, date

> **可能重复：**
> [确定一周中的哪一天开始于](https://stackoverflow.com/questions/11351196/determine-what-day-of-week-the-week-starts-with)
> [如何确定哪一天是 C 中当前语言环境中一周中的第一天](https://stackoverflow.com/questions/11409902/how-to-determine-which-day-is-the-first-in-week-in-current-locale-in-c)

如何使用用户位置日期时间设置获取可以显示从星期几开始的参数？例如美国：一周从星期日开始，对于俄罗斯来说是星期一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:23:26.717

您可以使用以下库之一获取它：

1.  [boost.locale](http://www.boost.org/doc/libs/1_50_0/libs/locale/doc/html/classboost_1_1locale_1_1calendar.html#a8144b98a316798476040348483fe2a6e) ,
2.  [重症监护室](http://userguide.icu-project.org/datetime/calendar)，
3.  最后，[glibc 也有它的功能](https://stackoverflow.com/questions/11409902/how-to-determine-which-day-is-the-first-in-week-in-current-locale-in-c/11410437#11410437)（但它是纯 C，不是 C++，也不是真正可移植的）。

# database - 如何在 Django 中将类型硬编码到我的模型中

> ID：11530094
> 
> 赞同：0
> 
> 时间：2012-07-17T20:08:12.490
> 
> 标签：database, django, django-models, relational-database, foreign-key-relationship

以下是模型的逻辑：

1.  类别。有几个类别；每个类别可以包含多个产品。
2.  产品。有几种产品；每个产品只能有一个类别。

是否可以在模型文件本身中指定每个产品的类别？例如：我可以将模型设置为 a`shirt`只能是`clothing`而不能是别的吗？

这是我到目前为止所拥有的（它没有验证）：

```
class Category(models.Model):
   CATEGORY_CHOICES = (
        ('CLOTHING', 'Clothing'),
        ('FURNITURE', 'Furniture'),
   )
   category = models.CharField(choices=CATEGORY_CHOICES)

class Shirt(Product):
    category = models.ForeignKey(Category, default=CATEGORY_CHOICES.CLOTHING)

    class Table(Product):
       category = models.ForeignKey(Category, default=CATEGORY_CHOICES.FURNITURE) 
```

我是新来的。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:54:08.933

我建议您花一些时间来采用最近添加的[模型验证](https://docs.djangoproject.com/en/1.4/ref/models/instances/#validating-objects)，虽然它不像表单验证那样自动（您必须`clean*`自己调用方法，可能在内部`save`），但您将获得可用于模型和表单级别的 DRY 验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:14:47.190

您可以使用任意规则在保存时验证您的模型。因此，编写一个验证规则来检查所有衬衫是否都保存在服装类别中。

对于用户输入，创建一个只提供与产品对应的选项的表单。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:45:09.367

您可以使用可调用对象将实例作为默认值

像这样的东西（未经测试的代码）：

```
class Shirt(Product):

  def getClothingInstance():
    return Category.objects.get(category=Category.CATEGORY_CHOISES['CLOTHING'])

  category = models.ForeignKey(Category, default=getClothingInstance) 
```

# android - 由于 APK 文件无效，安装失败！- 安卓

> ID：11530097
> 
> 赞同：3
> 
> 时间：2012-07-17T20:08:30.257
> 
> 标签：android, eclipse, apk

所以有几个关于这个主题的帖子，但看起来我的日志猫完全不同。不知道发生了什么。当我尝试在我的设备上运行时，我得到控制台日志：

```
[2012-07-17 14:50:56 - zrox] Uploading zrox.apk onto device '3134F748F94100EC'
[2012-07-17 14:50:56 - zrox] Installing zrox.apk...
[2012-07-17 14:50:57 - zrox] Installation failed due to invalid APK file!
[2012-07-17 14:50:57 - zrox] Please check logcat output for more details.
[2012-07-17 14:50:57 - zrox] Launch canceled! 
```

和 Logcat：

```
07-17 19:50:56.043: W/zipro(4533): Unable to open zip '/data/local/tmp/zrox.apk': Permission denied
07-17 19:50:56.043: D/asset(4533): failed to open Zip archive '/data/local/tmp/zrox.apk'
07-17 19:50:56.047: D/dalvikvm(252): WAIT_FOR_CONCURRENT_GC blocked 0ms
07-17 19:50:56.047: W/PackageParser(4533): Unable to read AndroidManifest.xml of /data/local/tmp/zrox.apk
07-17 19:50:56.047: W/PackageParser(4533): java.io.FileNotFoundException: AndroidManifest.xml
07-17 19:50:56.047: W/PackageParser(4533):  at android.content.res.AssetManager.openXmlAssetNative(Native Method)
07-17 19:50:56.047: W/PackageParser(4533):  at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:487)
07-17 19:50:56.047: W/PackageParser(4533):  at android.content.res.AssetManager.openXmlResourceParser(AssetManager.java:455)
07-17 19:50:56.047: W/PackageParser(4533):  at android.content.pm.PackageParser.parsePackageLite(PackageParser.java:722)
07-17 19:50:56.047: W/PackageParser(4533):  at com.android.defcontainer.DefaultContainerService$1.getMinimalPackageInfo(DefaultContainerService.java:169)
07-17 19:50:56.047: W/PackageParser(4533):  at com.android.internal.app.IMediaContainerService$Stub.onTransact(IMediaContainerService.java:110)
07-17 19:50:56.047: W/PackageParser(4533):  at android.os.Binder.execTransact(Binder.java:367)
07-17 19:50:56.047: W/PackageParser(4533):  at dalvik.system.NativeStart.run(Native Method)
07-17 19:50:56.047: W/DefContainer(4533): Failed to parse package
07-17 19:50:56.047: W/ActivityManager(252): No content provider found for permission revoke: file:///data/local/tmp/zrox.apk
07-17 19:50:56.117: D/dalvikvm(252): GC_EXPLICIT freed 380K, 18% free 14176K/17159K, paused 4ms+6ms, total 70ms 
```

我刚刚在我的 Nexus S 上为 android 4.1 安装了一个 rom。昨天我有 4.0.3 时它起作用了。我确实在 Eclipse 中安装了 4.1 SDK，并`android:targetSdkVersion`设置为 16。我还对项目进行了清理。没有什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:58:10.650

如果你使用 JB 运行最新的 Siyah Kernel，你可以安装 Extweaks-> Go to Misc Set ADB Binary Mode to DEVELOPMENT ADB ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:45:02.760

我相信这是您正在运行的 rom，我正在使用从 Indirect 移植到 NS4G 的 rom。这是他在 XDA 上的帖子[http://forum.xda-developers.com/search.php?searchid=51245494](http://forum.xda-developers.com/search.php?searchid=51245494)

我也有同样的问题。：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:07:30.957

查看相关行：

```
07-17 19:50:56.047: W/PackageParser(4533): Unable to read AndroidManifest.xml of /data/local/tmp/zrox.apk
07-17 19:50:56.047: W/PackageParser(4533): java.io.FileNotFoundException: AndroidManifest.xml 
```

听起来 Eclipse 在某处搞砸了，尝试增加 Eclipse.ini 文件的内存占用或清理项目并重新构建它。

我知道您可能已经尝试过，但值得一试！

检查 Eclipse 本身的更新，即使是 Eclipse 的 Android Development 插件软件，截至目前，也可以作为版本 20 使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T10:58:44.813

这是一个 ROM/内核安全问题。使用 ADBD Insecure，您可以解决此问题。

[eu.chainfire.adbd - adbd 不安全](https://play.google.com/store/apps/details?id=eu.chainfire.adbd)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T01:55:02.663

删除您的 AVD 并创建另一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T06:28:56.863

该问题似乎与权限有关。它无法打开存档，因此问题不在清单文件中。

因此，使用 adb push location 将其推送到设备，转到设备中的位置，将权限更改为可执行，`chmod 666 name.apk`

然后安装，pm install name.apk。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-12T12:45:35.440

由于您没有使用模拟器，请使用 adb 将所有内容推送到您的设备。这与通过 USB、蓝牙复制或存储到云端并使用您的设备下载相同。尝试以这种方式安装它。如果它有效，请检查您的 adb 工具。如果它不起作用，则使用*apksigner*或*jarsigner*验证您的 apk 。例如;

```
apksigner verify <path to apk> 
```

它应该让你知道发生了什么。或者使用 _apkanalyzer 将失败的 apk 与工作版本进行比较。无论哪种方式，您都将开始了解它失败的原因！

尽我所能。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-18T14:22:47.603

我有同样的问题。似乎eclipse没有改变apk的权限。作为一种解决方法，您可以执行以下操作：使用 adb push 将您的 apk 放在设备上，然后登录到 shell 并 chmod 755 apk。

# php - 如何在 CakePHP 2.2.0 中将带有扩展名的请求路由到特定控制器的操作

> ID：11530103
> 
> 赞同：1
> 
> 时间：2012-07-17T20:09:05.373
> 
> 标签：php, cakephp, routing

我正在使用 CakePHP 2.2.0，我需要创建一个获取这种页面的路由：

```
http://www.example.com/users/mypage.php 
```

在 cakephp 文档之后，我找到了这个页面：[http ://book.cakephp.org/2.0/en/development/routing.html#file-extensions](http://book.cakephp.org/2.0/en/development/routing.html#file-extensions)

我读到我必须使用的地方：

```
Router::parseExtensions('php'); 
```

我在我的 routes.php 文件中添加了这一行（在路由上方），然后我添加了这条路由：

```
Router::connect('/users/mypage.php', array('controller' => 'users', 'action' => 'mypage')); 
```

所以，在 UsersController 中我添加了这个动作。

不幸的是，只有发送的请求才能 `www.example.com/users/mypage`正常工作（调用 mypage 操作），如果我尝试`www.example.com/users/mypage.php`我会收到**404 not found 错误**。

我真的不明白原因，正如文档所说：

> 这将告诉路由器删除任何匹配的文件扩展名，然后解析剩下的内容。

因此，这正是我所需要的，我必须解释（**仅针对此操作**）当用户输入 /users/mypage.php（带有扩展名）时调用**mypage操作。**

我没有添加任何其他内容。AppController 是默认设置，而我的 UsersController 只有 mypage() 方法。

不知道是不是NGINX的问题，我把域的配置写在下面：

```
server {
        listen 80;
        server_name www.example.com;
        root /home/users/example.com/www/app/webroot/;

        access_log /home/users/example.com/log/access.log;
        error_log /home/users/example.com/log/error.log;

        location / {
                index index.php index.html;
                try_files $uri $uri/ /index.php?$uri&$args;
        }

        location ~* \.php$ {
                fastcgi_pass    127.0.0.1:9000;
                fastcgi_index   index.php;
                include         /etc/nginx/fastcgi_params;
                fastcgi_param   SCRIPT_FILENAME    $document_root$fastcgi_script_name;
        }
} 
```

我认为问题很清楚，如果请求具有扩展名，如何将请求路由到特定控制器的操作？

我需要：

```
www.example.com/users/mypage.php ==> to UsersController mypage() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:36:55.583

首先，您可以使用 parseExtensions() 或使用 connect() 将“.php”添加到 url 模板。您不能同时使用两者。无论您选择什么，我都建议您进行实验。尝试使用任何其他扩展，例如“php5”，看看它是否正常工作。所以很明显你的问题是你的nginx配置：

```
location ~* \.php$ {
    ...
} 
```

这些行告诉 nginx 将 url 中以 .php 结尾的任何内容解析为文件系统中的硬文件。这不是很容易克服。您可以在该指令中使用 try_files 回退到另一个脚本，这很棘手，或者您可以简单地为您的 url 使用另一个扩展名:)

我希望这能给你一个很好的提示，你必须做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:53:10.587

这是我的 cakephp 2.2.1 的 nginx.conf：

```
server {
    listen       80;
    server_name  localhost;
    error_log /var/log/nginx/errordebug.log debug;

    location / {
        index index.php;
        try_files $uri $uri/  @cakephp;
        expires max;
        access_log off;
    }
    location @cakephp {
       fastcgi_param SCRIPT_NAME /index.php;
       include /etc/nginx/fastcgi.conf;
       fastcgi_pass 127.0.0.1:9000;
       fastcgi_param QUERY_STRING url=$request_uri;   #&$args;
       fastcgi_param SCRIPT_FILENAME $document_root/index.php;
    }

    location ~* \favicon.ico$ {
       access_log off;
       expires 1d;
       add_header Cache-Control public;
    } 
```

# sql - 尝试使用 select 和 join 将记录插入表中

> ID：11530108
> 
> 赞同：0
> 
> 时间：2012-07-17T18:19:19.717
> 
> 标签：sql, oracle

我目前正在写一个插入语句，它给了我“ORA-00923：未在预期的地方找到来自关键字。有什么办法可以做到这一点吗？谢谢。这是语句：

```
Insert into seda_owner.seda_lookup(table_name,description,sequence,value)
Select 'DEFAULT_CATE_CHG_ITEMS_DOCS','Software Requirements Specification', '1', 
  (select **value** from seda_owner.seda_document a 
   join seda_owner.seda_lookup b 
    on b.value = a.guid and description = 'Software Requirements Specification'); 
```

我尝试做的是将 3 个字符串 table_name、description 和 sequence 以及一个变量值传递给 table seda_lookup。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:28:21.613

在 Oracle 中，选择语句总是需要`from tableName`. 您查询的外部选择没有这样的 from 子句。

```
Insert into seda_owner.seda_lookup(table_name,description,sequence,value)
Select 'DEFAULT_CATE_CHG_ITEMS_DOCS','Software Requirements Specification', '1', 
  (select **value** from seda_owner.seda_document a 
   inner join seda_owner.seda_lookup b 
    on b.value = a.guid and description = 'Software Requirements Specification')
from dual; 
```

更好的是：

```
Insert into seda_owner.seda_lookup(table_name,description,sequence,value)
Select 'DEFAULT_CATE_CHG_ITEMS_DOCS','Software Requirements Specification', 
    '1', **value** 
from seda_owner.seda_document a 
inner join seda_owner.seda_lookup b 
    on b.value = a.guid and description = 'Software Requirements Specification' 
```

第一个解决方案要求子查询返回一个且只有一个行。

第二种解决方案将插入内连接定义的尽可能多的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:42:31.737

1.  **值**周围的星号是代码的一部分吗？或者你只是想**加粗**这个词？
2.  也许您的嵌套选择返回不止一行
3.  **值**仅在 b 中吗？您没有在您的**select**中限定它，但您在连接条件中限定它（b.value）

# java - 让用户知道函数的非法输入

> ID：11530110
> 
> 赞同：1
> 
> 时间：2012-07-17T20:09:16.450
> 
> 标签：java, c++, error-handling

这是一个广泛的问题，但我还是想问。希望我不会得到很多反对票:)

今天我参加了一次面试，（和往常一样）他们让我写一个计算一个数的阶乘的函数。之后，我们讨论了一些可能导致程序崩溃的原因，并讨论了如何让用户知道何时将负值传递给函数。

我个人说过使用断言或者返回一个特殊的数字让用户知道，但我不确定他是否对这些答案非常满意。

在您看来，什么是让用户知道传递给函数的非法值的好方法，或者在这种情况下最好的做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T20:10:50.490

## 我听说你有例外？

C++ 的方式是抛出一个异常，如果出现问题，这将强制代码的用户显式执行某些操作 - 否则他/她的应用程序将终止。

这也是关于错误处理的广泛建议^(1 ，随着计算机能力的提高和编译器变得更聪明，关于使用)*异常*对性能影响的争论已经开始淡出。

一些人声称使用异常会破坏代码的可读性，它会使其难以遵循和维护，这可能有些道理。

在更高级的情况下，抛出异常和清理远非一件容易的事，尽管在一个负责计算像一个数字的阶乘这样*“简单”的东西的函数中——使用异常是一项相当容易的任务。*

* * *

C++ 异常的最大问题（从我的角度来看）是缺少 -`finally`子句，如果可以使用一个子句，那么在捕获异常后编写负责清理的代码将更简单任务。

* * *

推荐阅读：

*   **[http://www.parashift.com/c++-faq - [17] 异常和错误处理](http://www.parashift.com/c++-faq/exceptions.html)**

* * *

^(**脚注：**)
^(^(1.)当然是主观意见。)

* * *

### 整个项目的一致性..

如果您找到一种让代码调用者知道出现问题的好方法（可能是通过*返回值、通过引用或**异常*设置的错误标志，或者几乎......任何东西），请确保您使用在整个项目中使用相同*的错误通知系统。*

没有什么比在错误处理方面使用不稳定的库更烦人的了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:16:27.360

我的第一选择是例外，因为它强制函数的用户处理该错误。如果您返回一个特殊值，用户可以忽略它并继续使用特殊的错误值，这将导致错误的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T20:17:40.257

验证您的输入总是一个好主意，这只是一个很好的编码实践。

让您的用户知道是一个有趣的问题，并且在很大程度上取决于您的实现。如果您正在构建一个基于 GUI 的程序，您总是可以在将输入插入到您的例程之前验证输入。如果输入无效，则您始终可以在屏幕上显示指示器。

如果您只是提供一个 API，那么我认为抛出异常可能是最好的方法。我已经看到函数 LIKE factorial 的实现，其中答案作为返回值提供，并且提供了一个单独的输入参数，例如用户提供的 unsigned int * 以便可以提供第二个返回值作为状态，其中返回的整数表示各种错误代码。

当我编写大部分自己的整个程序时，我非常喜欢在放置真正处理输入的例程之前预先验证来自接口的输入，并在输入无效时在 GUI 上提供输出！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T20:17:59.180

我会抛出一个异常 - 更可能是一个检查异常（在 Java 中）。

请参阅：[异常的](http://docs.oracle.com/javase/tutorial/essential/exceptions/advantages.html)优势 - 优势#2：在调用堆栈上传播错误与“如何让用户知道”的问题一致 - 用户开始调用，所以最终异常返回向上。

更具体地说，您需要使用 Checked Exception: A quick search for some info: [Checked vs Unchecked Exception](http://www.javapractices.com/topic/TopicAction.do?Id=129)

> 已检查异常：表示程序无法立即控制的区域中的无效条件（***无效的用户输入***、数据库问题、网络中断、缺少文件）

与通常表示代码逻辑/实现失败的未检查异常相反

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T20:13:39.977

这取决于功能是什么，以及它是如何使用的。你可以有一个特殊的返回值，抛出一个异常，或者根据你的需要设置一个错误标志。我认为重要的是对此有一个合理的项目范围的哲学，并始终如一地使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-17T20:14:56.480

如果您想通知最终用户他对您的应用程序进行了不正确的输入，那么您应该显示一个对话框来说明这种情况。

但是，如果您正在谈论其他人实现您的代码，那么[refp 的答案](https://stackoverflow.com/a/11530126/1489700)是最好的。

# xml - 是否可以替换/替换传入的 XSL 数据？

> ID：11530111
> 
> 赞同：1
> 
> 时间：2012-07-17T20:09:18.740
> 
> 标签：xml, xslt, substitution

我试图在谷歌上寻找答案，但我得到的结果是如何替换字符串或替换子字符串等。但我的问题略有不同。

假设我有一个现有的 XSL 模板，比如“ *hello-world* ”，它处理“data/records/record”，但我**无法**修改*hello-world*，所以我正在考虑创建一个包装模板来按摩/修改数据在将每条记录传递给*hello-world*之前在每条记录中......有没有办法做到这一点？

到目前为止，我已经设法创建了一个可以过滤掉重复记录的函数，并且我正在考虑用新记录替换“data/records/*”中的所有记录......

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
        <xsl:call-template name="get-unique-record">
            <xsl:with-param name="records" select="/data/records/record"/>
        </xsl:call-template>
    </xsl:template>

    <!-- This function will filter out the given records and return a unique set of records -->
    <xsl:key name="kField_ID" match="field[@name='ID']" use="."/>
    <xsl:template name="get-unique-record">
        <xsl:param name="records"/>
        <xsl:for-each select="$records">
            <xsl:variable name="record" select="."/>
            <xsl:if test="$record//field[generate-id() = generate-id(key('kField_ID', .))]">
            <xsl:copy-of select="$record"/>         
            </xsl:if>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

现在...是否可以执行以下操作：

```
<xsl:variable name="/data/records/record">
    <xsl:call-template name="get-unique-record">
        <xsl:with-param name="records" select="/data/records/record"/>
    </xsl:call-template>
</xsl:variable> 
```

编辑：@LasrH，感谢您的快速回复。有没有办法复制现有的“/”，然后用过滤的 /data/records/record 替换所有的 /data/records/record？

EDIT2：@LasrH，我创建了几个模板来修改和重建“数据”节点。是否可以使用节点集将现有输入“替换”为我的新数据作为输入？

```
<xsl:variable name="data">
    <xsl:call-template name="rebuild-data-with-record">
        <xsl:with-param name="records">
                    <xsl:copy-of select="$unique-records"></xsl:copy-of>
                    </xsl:with-param>
    </xsl:call-template>
</xsl:variable> 
```

然后再往下，我尝试像这样使用节点集：

```
<xsl:apply-templates select="exslt:node-set($data)/data"/> 
```

但它看起来不像正在这样做......也没有抛出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:33:07.233

实际上，经过大量研究和试验，您可以在 XSL 级别“替换/替换”数据！！！您只需要自己重建根节点，并将您的“修改后的根”（RTF 将其转换回节点集）传递给您的模板，并让您的模板从您自己的数据中读取它！！！

我在这里问了另一个问题，这是我实验的一部分，以使其工作： [无法从 XRTreeFrag 转换为 XNodeSet](https://stackoverflow.com/questions/11549947/unable-to-cast-from-xrtreefrag-into-xnodeset)

这个想法是这样的，你有一个模板函数来读取/处理传入的数据，我们几乎总是从根 /blah/blah/blah 读取输入......而不是从根读取它，你可以做这在您的每个/任何模板中：

```
<xsl:template name="helloworld">
    <xsl:param name="inputRoot" select="/"/>
    <xsl:variable name="root" select="$inputRoot"/>
    rest of your code goes here... 
```

现在，用 $root/blah/blah/blah 替换您的所有 root 访问权限，它将接收您修改后的 XSL 数据！

很酷的一点是，如果你不传递任何输入数据，它只会假设输入是根！;)

这是经过测试并且可以完美运行的。然而，我只有一个担心，如果 XSL 输入很大，重建整个根可能会导致性能问题。但我的输入只有两打记录，我的案例对性能的影响为零。

因此，您可能需要仔细检查您的输入数据是否很大。

**此解决方案/方法对 XSL 1.0 友好。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:00:53.893

不，在 XSL 中，您不能就地修改源文档。

但是，您可以在上游处理源文档（使用单独的 XSL 样式表），并将处理后的文档传递给调用“hello-world”模板的 XSL 样式表，而不是让它处理原始源文档。

如果您能够修改该样式表，您甚至可以在包含“hello-world”的同一个样式表中执行此操作。（但我猜你不能修改那个样式表，或者你可以修改“hello-world”。）

# php - 如何删除所有子文件夹中的所有文件，除了那些在 PHP 中文件名为“whatever.jpg”的文件？

> ID：11530112
> 
> 赞同：1
> 
> 时间：2012-07-17T20:09:29.150
> 
> 标签：php, file, directory, filesystems, delete-file

**删除所有**子文件夹中**所有**文件的**最快**方法是什么，**除了**那些在 PHP 中文件名为“whatever.jpg”的文件？

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:41:36.087

为什么不使用迭代器？这是经过测试的：

```
function run($baseDir, $notThis)
{
    foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator($baseDir), RecursiveIteratorIterator::LEAVES_ONLY) as $file) {
        if ($file->isFile() && $file->getFilename() != $notThis) {
            @unlink($file->getPathname());
        }
    }
}

run('/my/path/base', 'do_not_cancel_this_file.jpg'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:19:05.483

这应该是您正在寻找的，`$but`是一个包含异常的数组。不确定它是否*是最快的*，但它是最常见的目录迭代方式。

```
function rm_rf_but ($what, $but)
{
    if (!is_dir($what) && !in_array($what,$but))
        @unlink($what);
    else
    {
        if ($dh = opendir($what))
        {
            while(($item = readdir($dh)) !== false)
            {
                if (in_array($item, array_merge(array('.', '..'),$but)))
                    continue;
                rm_rf_but($what.'/'.$item, $but);
            }
        }

        @rmdir($what); // remove this if you dont want to delete the directory
    }
} 
```

示例使用：

```
rm_rf_but('.', array('notme.jpg','imstayin.png')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:15:16.760

未经测试：

```
function run($baseDir) {
    $files = scandir("{$baseDir}/");
    foreach($files as $file) {
        $path = "{$badeDir}/{$file}";
        if($file != '.' && $file != '..') {
            if(is_dir($path)) {
                run($path);
            } elseif(is_file($path)) {
                if(/* here goes you filtermagic */) {
                    unlink($path);
                }
            }
        }
    }
}
run('.'); 
```******

# asp.net - RegisterforEventValidation 后.net ListView eventValidation 错误

> ID：11530114
> 
> 赞同：0
> 
> 时间：2012-07-17T20:09:40.553
> 
> 标签：asp.net, listview, eventvalidation

我定义了以下列表视图

```
<asp:ListView 
        ID="reportData" 
        EnableSortingAndPagingCallback="True"
        AllowPaging="True"
        AllowSorting="True"
        PageSize="20" 
        OnLayoutCreated="LoadReport"
        onsorting="reportData_Cause_Sorting" 
        OnPagePropertiesChanging="reportData_PagePropertiesChanging"
        runat="server"> 
```

我还定义了一个 DataPager

```
<asp:DataPager ID="reportPager" PagedControlID="reportData" PageSize="20" runat="server" >
    <Fields>
        <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" ShowLastPageButton="True" />
    </Fields>
</asp:DataPager> 
```

然后，由于我将 enableEventValidation 设置为 true，因此我也注册了该项目

```
 Protected Overrides Sub Render(ByVal writer As System.Web.UI.HtmlTextWriter)
        Page.ClientScript.RegisterForEventValidation(reportData.UniqueID)
        Page.ClientScript.RegisterForEventValidation(reportPager.UniqueID)
        MyBase.Render(writer)
    End Sub 
```

我的初始页面加载运行良好，但是当我单击页面导航时，我被发送到代码隐藏并在收到错误之前通过 page_load

> 无效的回发或回调参数。使用配置或页面中的 <%@ Page EnableEventValidation="true" %> 启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

我只是不明白为什么在我注册了这两个项目以进行事件验证后，我仍然会收到错误消息。我什至从未参加过 RaiseCallbackEvent！

我完全是这些控件的新手，也绝不是 .net 专家。任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:38:30.447

我找到了答案。我正在调用我的函数来加载报告数据并将其绑定到 OnLoad 和 Render 中的 ListView。当我从 OnLoad 中删除额外的调用时，我不再收到该消息。但是，分页仍然无法正常工作，但问题已转移到代码中的不同位置:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:46:25.997

试试这个简单的例子。
url传递分页的值

```
protected void DepartmentsListView_SelectedIndexChanged(object sender, ListViewCommandEventArgs e)
{
    MessageLabel.Text = "The key value is " +
      CountriesListView.SelectedValue.ToString() + ".";
} 
```

```
<asp:ListView ID="CountriesListView" DataSourceID="ContactsDataSource" runat="server"
    DataKeyNames="FirstName" OnItemCommand="DepartmentsListView_SelectedIndexChanged">
    <LayoutTemplate>
        <table cellpadding="4" width="500" runat="server" id="tblCountries">
            <tr id="Tr1" runat="server">
                <th id="Th0" runat="server">
                    ID
                </th>
                <th id="Th1" runat="server">
                    Code
                </th>
                <th id="Th2" runat="server">
                    Name
                </th>
            </tr>
            <tr runat="server" id="itemPlaceholder" />
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:LinkButton runat="server" ID="SelectButton" Text="Select" CommandName="Select" />
            </td>
            <td>
                <asp:Label ID="CountryCodeLabel" runat="server" Text='<%# Eval("EmployeeID")%>' />
            </td>
            <td>
                <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("FirstName")%>' />
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView>

 <asp:DataPager runat="server" ID="DataPager2" PageSize="3" PagedControlID="CountriesListView"
    QueryStringField="pageNumber">
    <Fields>
        <asp:NumericPagerField />
    </Fields>
</asp:DataPager> 
```

```
 <asp:SqlDataSource ID="ContactsDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:conecec %>"
    SelectCommand="SELECT [EmployeeID], [FirstName], [LastName] FROM Employees">
</asp:SqlDataSource> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T06:51:35.160

我认为您不需要更改`EventValidation`或使用`RegisterForEventValidation`
将此代码放入`Page_Load`事件中

```
if (!IsPostBack)
  {
     BindData();
  } 
```

并且不要忘记修改以下`PagePropertiesChanged`事件`ListViews`：

```
protected void lstProducts_PagePropertiesChanged(object sender, EventArgs e)
    {
        BindData();
    } 
```

# sql - 为每个不同的用户获取表中的第一个最低值及其出现的日期

> ID：11530120
> 
> 赞同：5
> 
> 时间：2012-07-17T20:10:15.720
> 
> 标签：sql, postgresql

我正在尝试为表中的每个 DISTINCT 用户查找表中的第一个最小值以及它发生的日期。

这是表模式和一些示例数据：

```
CREATE TABLE diet_watch (
  entry_date date NOT NULL,
  user_id    int default 1,
  weight     double precision NOT NULL
);

INSERT INTO diet_watch VALUES ('2001-01-01', 1, 128.2);
INSERT INTO diet_watch VALUES ('2001-01-02', 1, 121.0);
INSERT INTO diet_watch VALUES ('2001-01-03', 1, 122.3);
INSERT INTO diet_watch VALUES ('2001-01-04', 1, 303.7);
INSERT INTO diet_watch VALUES ('2001-01-05', 1, 121.0);
INSERT INTO diet_watch VALUES ('2001-01-01', 2, 121.0);
INSERT INTO diet_watch VALUES ('2001-01-06', 2, 128.0); 
```

我想出的 SQL 在[这个片段中](http://sqlfiddle.com/#!1/7aa4e/13)

从那以后我被告知这是不正确的，也许有人可以解释我的 SQL 的问题是什么？

注意：如果可能，我更喜欢 ANSI SQL，但我使用的是 PostgreSQL，所以如果我必须使用特定风格的 SQL，它必须在 PG 上工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T20:16:21.250

~~*注意：不确定 Window 函数是否为 ANSI SQL*~~

WINDOW 函数是 SQL:2003 规范的一部分： [http](http://en.wikipedia.org/wiki/Window_function_%28SQL%29#Window_function) ://en.wikipedia.org/wiki/Window_function_%28SQL%29#Window_function (Thx @a_horse_with_no_name)

尝试这个：

[http://sqlfiddle.com/#!1/7aa4e/22](http://sqlfiddle.com/#!1/7aa4e/22)

```
SELECT *
  FROM 
    (
     SELECT a.*, 
            ROW_NUMBER() OVER(PARTITION BY user_id ORDER BY weight) AS Position
       FROM diet_watch a

    ) a
    WHERE a.Position = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:34:45.677

如果您正在寻找每个用户第一次达到他们的最小体重，我认为这是可行的。我在测试数据中看到，用户 1 两次达到 121 的最小值，你想要第一次约会吗？据我所知，这应该适用于每个 SQL 引擎。

```
SELECT min(dw.entry_date), dw.user_id, dw.weight FROM diet_watch dw,
    (SELECT min(weight) AS "weight", user_id FROM diet_watch GROUP BY user_id) mins
WHERE dw.user_id = mins.user_id AND dw.weight = mins.weight
GROUP BY dw.user_id, dw.weight 
```

内部选择找到每个用户的最小权重。该日期还需要一个分钟，因为否则您不会专门选择该用户第一次达到最小体重的时间。

[http://sqlfiddle.com/#!1/7aa4e/51/0](http://sqlfiddle.com/#!1/7aa4e/51/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T20:23:40.417

首先，您的查询是不必要的复杂。您可以将 group by 放在子查询中并消除外部查询。

@Chandu 提到的 windows 功能是一个非常好的解决方案。它是 ANSI SQL，postgres 支持它。但是，并非所有数据库都这样做。另一种选择是：

```
select dw.*
from diet_watch dw join
     (select user_id, min(entry_date) as mindate
      from diet_watch dw
      group by user_id
     ) dwmin
     on dw.user_id = dwmin.user_id and dw.entry_date = dwmin.mindate 
```

您的原始查询不起作用的原因是因为最小 entry_date 可能没有最小权重。您的查询独立检索每个字段的最小值。此版本找到最小日期，然后将其连接回原始表以获取当天的体重（和其他信息）。

# tumblr - 更改 tumblr 上的默认照片集大小

> ID：11530132
> 
> 赞同：1
> 
> 时间：2012-07-17T20:11:35.367
> 
> 标签：tumblr

我知道 tumblr 有默认的照片集大小 {photoset-500}、{photoset-400}、{photoset-250}，但我想更改宽度，以便宽度可以是 420 或 350。我到处都看过并且找不到帮助我执行此操作的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-19T13:06:32.687

您可以使用 {Photoset} 来调整照片集的大小以适应容器（最大尺寸 700 像素）。

[https://www.tumblr.com/docs/en/custom_themes](https://www.tumblr.com/docs/en/custom_themes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:09:47.113

在结束正文标记之前添加此脚本。这将增加或减少照片集的大小

```
<script type="text/javascript">
    //This will change the source address and display the correct size.
                $(".photoset").each(function() { 
            var newSrc = $(this).attr("src").replace('700','860');
            $(this).attr("src", newSrc);       
        });
    //This will get the new size of the iframe and resize the iframe holder accordingly.
        $(function(){
        var iFrames = $('.photoset');
        function iResize() {
            for (var i = 0, j = iFrames.length; i < j; i++) {
                iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';}
            }

            if ($.browser.safari || $.browser.opera) { 
                iFrames.load(function(){
                    setTimeout(iResize, 0); 
                });

                for (var i = 0, j = iFrames.length; i < j; i++) {
                    var iSource = iFrames[i].src;
                    iFrames[i].src = '';
                    iFrames[i].src = iSource;
                }
            } else {
                iFrames.load(function() {
                    this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
                });
            }
        });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T03:30:10.937

您无法使用 Tumblr 标记更改图像的默认大小，但您可以使用**CSS**直观地更改大小。

**Tumblr 标记：**

```
{block:Photoset}
    {block:Photos}
        <img src="{PhotoURL-500}" class="photoset-img" />
    {/block:Photos}
{/block:Photoset} 
```

**CSS：**

```
.photoset-img { width: 420px; /* can be any value you want */ } 
```

# objective-c - 为什么向 Nil 对象发送任何选择器什么都不做，但向任何 NSObject 发送“无效”选择器会引发异常？

> ID：11530133
> 
> 赞同：13
> 
> 时间：2012-07-17T20:11:44.250
> 
> 标签：objective-c

有谁知道为什么 NextStep/Apple 决定在向 Nil 对象传递消息时采取什么都不做的“便捷方法”，而在将实例化对象传递给无效选择器时采用引发异常的“Java 方法”？

例如，

```
// This does "nothing"
NSObject *object = Nil;
[object thisDoesNothing];

object = [[NSObject alloc] init];
// This causes an NSInvalidArgumentException to be raised
[object thisThrowsAnException]; 
```

所以一方面，我们可以方便地不必检查 Nil（假设我们不太关心方法调用的结果）——但另一方面，我们必须检查我们的对象是否有异常不响应方法？

如果我不确定对象是否会响应，我要么必须：

```
@try {
    [object thisThrowsAnException];
} @catch (NSException *e){
    // do something different with object, since we can't call thisThrowsAnException
} 
```

或者，

```
if([object respondsToSelector:@selector(thisThrowsAnException)]) {
    [object thisThrowsAnException];
}
else {
    // do something different with object, since we can't call thisThrowsAnException
} 
```

（后者可能是更好的方法，因为如果 object 为 Nil，则选择器不会引发异常，因此您的代码可能不会按照您希望的方式运行）。

我的问题是：为什么 Apple 决定以这种方式实施它？
为什么不让对实例化对象的无法识别的选择器调用不引发异常？
或者，如果您尝试对其调用方法，为什么不让 Nil 对象引发异常呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T21:06:28.133

我不能完全回答你的问题，但我可以回答一部分。Objective-C 允许您向其发送消息，`nil`因为它使代码更加优雅。 [您可以在此处阅读有关此设计决策的信息](http://wiki.squeak.org/squeak/5962)，我将窃取其示例：

假设您想获取某人在她的办公电话上拨打的最后一个电话号码。如果您无法向 发送消息`nil`，则必须这样编写：

```
Office *office = [somePerson office];
// Person might not have an office, so check it...
if (office) {
    Telephone *phone = [office telephone];
    // The office might not have a telephone, so check it...
    if (phone) {
        NSString *lastNumberDialed = [phone lastNumberDialed];
        // The phone might be brand new, so there might be no last-dialed-number...
        if (lastNumberDialed) {
            // Use the number, for example...
            [myTextField setText:lastNumberDialed];
        }
    }
} 
```

现在假设您可以将消息发送到`nil`（并且总是`nil`返回）：

```
NSString *lastNumberDialed = [[[somePerson office] telephone] lastNumberDialed];
if (lastNumberDialed) {
    [myTextField setText:lastNumberDialed];
} 
```

至于为什么向对象发送无法识别的选择器会引发异常：我不确定。我怀疑这是一个错误比无害更常见。在我的代码中，我只希望在需要发送可选协议消息（例如，向委托人发送可选消息）时默默忽略无法识别的选择器。所以我希望系统将其视为错误，并在我不希望它成为错误的相对罕见的情况下让我明确表示。

请注意，您可以（在某种程度上）以几种不同的方式修补您自己的类中无法识别的选择器的处理。看一下`forwardingTargetForSelector:`, `forwardInvocation:`,`doesNotRecognizeSelector:`和`resolveInstanceMethod:`的方法[`NSObject`](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T21:18:04.350

从好的 ol' 文档中：

> 在 Objective-C 中，向 nil 发送消息是有效的——它在运行时根本不起作用。

至于无法识别的选择器行为的另一个问题，一个旧的 NSObject 实现文件（[来自 MySTEP 库](http://www.quantum-step.com/download/sources/mySTEP/Foundation/Sources/NSObject.m)）显示罪魁祸首是 NSObject 方法`-doesNotRecognizeSelector:`，看起来有点如下：

```
- (void) doesNotRecognizeSelector:(SEL)aSelector
{
    [NSException raise:NSInvalidArgumentException
                format:@"NSObject %@[%@ %@]: selector not recognized", 
                        object_is_instance(self)?@"-":@"+",
                        NSStringFromClass([self class]), 
                        NSStringFromSelector(aSelector)];
} 
```

这意味着可以修改 ObjC 方法，这样它们实际上就不必引发错误。这意味着该决定完全是任意的，就像将“吃方法”消息切换为 nil 的决定一样。可以通过调配 NSObject 的方法来完成的壮举（非常危险，因为它会在 mac 上引发 EXC_BAD_ACCESS 或 EXC_I386_BPT，但至少它不会引发异常）

```
void Swizzle(Class c, SEL orig, SEL new)
{
    Method origMethod = class_getInstanceMethod(c, orig);
    Method newMethod = class_getInstanceMethod(c, new);
    if(class_addMethod(c, orig, method_getImplementation(newMethod), method_getTypeEncoding(newMethod)))
        class_replaceMethod(c, new, method_getImplementation(origMethod), method_getTypeEncoding(origMethod));
    else
        method_exchangeImplementations(origMethod, newMethod);
}

-(void)example:(id)sender {
    Swizzle([NSObject class], @selector(doesNotRecognizeSelector:), @selector(description));
    [self performSelector:@selector(unrecog)];
} 
```

类别：

```
@implementation NSObject (NoExceptionMessaging)

-(void)doesNotRecognizeSelector:(SEL)aSelector {
    NSLog(@"I've got them good ol' no exception blues.");
}
@end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T22:12:44.567

为了大家的乐趣，由于我和 CodaFi 的讨论，这里有一个快速破解的方法来吃通常没有回复的消息并让它们返回`nil`：

```
@interface EaterOfBadMessages : NSObject 
@end

@implementation EaterOfBadMessages

- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector 
{
    NSMethodSignature * sig = [super methodSignatureForSelector:aSelector];
    if( !sig ){
        sig = [NSMethodSignature signatureWithObjCTypes:"@@:"];
    }
    return sig;
}

- (void)forwardInvocation:(NSInvocation *)anInvocation 
{
    id nilPtr = nil;
    [anInvocation setReturnValue:&nilPtr];
}

@end

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        EaterOfBadMessages * e = [[EaterOfBadMessages alloc] init];
        // Of course, pre-ARC you could write [e chewOnThis]
        NSLog(@"-[EaterOfBadMessages chewOnThis]: %@", [e performSelector:@selector(chewOnThis)]);

    }
    return 0;
} 
```

请不要在现实生活中使用它。

# javascript - 删除“if”语句中的警报

> ID：11530140
> 
> 赞同：0
> 
> 时间：2012-07-17T20:12:15.077
> 
> 标签：javascript, if-statement, alert

我有一个 if 语句，当单击页面上的下一个按钮时，当前会弹出一个警报。我不确定我必须删除什么才能让警报消失。我仍然需要这个按钮来带你到下一页。无论我如何调整，最终结果都是按钮不再起作用。这是代码：

```
$('.dab_button').click(function(){
if($('[name=select_value1]').val()=='' ||
    $('[name=select_value2]').val()=='' ||
    $('[name=select_value3]').val()==''){
        alert('Please select your gift choices for each or the three levels.');             
    } else{
        <? if($members_info['individual']=='no'):?>
            window.location.href = "/dab/profile";
        <? else:?>
            window.location.href = "/hq/edit_page";
        <? endif;?>         
    }     
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:41:01.460

Just comment it out?

```
$('.dab_button').click(function(){
    if($('[name=select_value1]').val()==""||$('[name=select_value2]').val()==""||$('[name=select_value3]').val()==""){
        ; // do nothing
        // alert('Please select your gift choices for each or the three levels.');             
    } else{
<? if($members_info['individual']=='no'):?>
        window.location.href = "/dab/profile";
<? else:?>
        window.location.href = "/hq/edit_page";
<? endif;?>         
    }     
}); 
```

But I stronly recommend to give some feedback to the user when the button does nothing (does not navigate away), because they have not filled out all inputs. If you wanted to navigate in any case, just remove that if-statement (note that you also have serverside processing code, which has nothing to do with the javascript):

```
$('.dab_button').click(function(){
<? if($members_info['individual']=='no'):?>
    window.location.href = "/dab/profile";
<? else:?>
    window.location.href = "/hq/edit_page";
<? endif;?>
}); 
```

# java - 在 EAR 中捆绑不同版本的嵌入式 JPA 提供程序

> ID：11530141
> 
> 赞同：3
> 
> 时间：2012-07-17T20:12:15.287
> 
> 标签：java, jpa, glassfish, eclipselink

我正在开发一个部署到 GlassFish 3.1 实例的 Web 应用程序。

Eclipselink 2.4 最近发布了，它有一些不错的附加功能，正如这篇[博](http://java-persistence-performance.blogspot.com/2012/05/jpql-vs-sql-have-both-with-eclipselink.html)文中强调的那样，我真的很想在我的应用程序中利用这些功能。

我已将 EclipseLink 2.4 库捆绑到我的应用程序中（它位于`/lib`文件夹中），但 Glassfish 继续使用嵌入式 Eclipselink 2.3 库。

如何让 GlassFish 使用我捆绑的 EclipseLink 提供程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:40:32.707

您需要更改 GlassFish 类加载器顺序（[在此处输入链接描述](http://creativemohan.com/?p=196)）或更新 GlassFish EclipseLink 库（[在此处输入链接描述](https://blogs.oracle.com/GlassFishPersistence/entry/updating_eclipselink_bundles_in_glassfish)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:53:00.783

[在现有 GlassFish V3 安装中将 EclipseLink 更新到较新版本](https://blogs.oracle.com/GlassFishPersistence/entry/updating_eclipselink_bundles_in_glassfish)

# asp.net-mvc - 为什么在编译 MVC 时在错误的控制器上启动？

> ID：11530145
> 
> 赞同：1
> 
> 时间：2012-07-17T20:12:38.040
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010

我有一个名为 HomeController 的控制器、一个名为 Home 的文件夹和一个名为 Index 的视图。我还有另一个名为 TestEditController 的控制器、一个名为 TestEdit 的文件夹和一个名为 Index 的视图。出于某种原因，当我编译它时，URL:`http://localhost:4097/`并不指向 Home/Index，而是指向 TestEdit/Index。我去了属性>开始操作>特定页面...并将文本框留空。注意：放一个`/`不起作用。我已经清理、构建、重建项目/解决方案。但仍然遇到同样的问题。这是我的 Global.asax 文件：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "SectionsData", // Route name
            "{controller}/{action}/{id}/{prodno}/{instid}/{section}", // URL with parameters
            new { controller = "TestEdit", action = "Sections", id = UrlParameter.Optional, prodno = UrlParameter.Optional, instid = UrlParameter.Optional, section = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Sections", // Route name
            "{controller}/{action}/{id}/{prodno}/{instid}", // URL with parameters
            new { controller = "TestEdit", action = "Index", id = UrlParameter.Optional, prodno = UrlParameter.Optional, instid = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "MainProducts", // Route name
            "{controller}/{action}/{id}/{prodno}", // URL with parameters
            new { controller = "Home", action = "Main", id = UrlParameter.Optional, prodno = UrlParameter.Optional  } // Parameter defaults
        );

        routes.MapRoute(
            "Catalogs", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Products", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:27:56.590

你的匹配太笼统了。试试这个：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "SectionsData", // Route name
        "TestEdit/Sections/{id}/{prodno}/{instid}/{section}", // URL with parameters
        new { controller = "TestEdit", action = "Sections", id = UrlParameter.Optional, prodno = UrlParameter.Optional, instid = UrlParameter.Optional, section = UrlParameter.Optional } // Parameter defaults
    );

    routes.MapRoute(
        "Sections", // Route name
        "TestEdit/Index/{id}/{prodno}/{instid}", // URL with parameters
        new { controller = "TestEdit", action = "Index", id = UrlParameter.Optional, prodno = UrlParameter.Optional, instid = UrlParameter.Optional } // Parameter defaults
    );

    routes.MapRoute(
        "MainProducts", // Route name
        "Home/Main/{id}/{prodno}", // URL with parameters
        new { controller = "Home", action = "Main", id = UrlParameter.Optional, prodno = UrlParameter.Optional  } // Parameter defaults
    );

    routes.MapRoute(
        "Catalogs", // Route name
        "Home/Products/{id}", // URL with parameters
        new { controller = "Home", action = "Products", id = UrlParameter.Optional } // Parameter defaults
    );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );

} 
```

...但实际上，您不需要很多这些路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:15:25.890

因为 SectionsData 和 Sections Route 的所有其他参数都是可选的，所以它们将在默认路由之前匹配。

# java - 使用二进制字节转换代码将 C 转换为 Java

> ID：11530147
> 
> 赞同：0
> 
> 时间：2012-07-17T20:12:45.770
> 
> 标签：java, c, binary, byte

我需要一些我刚刚收到帮助的代码的帮助。基本上，这段代码是用 Java 编写的，但我也需要它能够在 C 中工作。我已经测试过代码并且工作正常。它本质上讲一个二进制字符串并将其放入一个字节数组中，每个位置包含 8 个字符（1 和 0）。我确实知道一些永远不会改变的变量，并在下面列出了它们：

Byte.SIZE 始终为 8

sLen 始终为 64

len 始终为 8

我已经包含了 java 代码和我进行转换的尝试。但是，我的代码始终存在运行时错误和其他语法问题。我想知道是否有人能找到我的问题：

**Java 代码**

```
static byte[] fromBinary(String s) {
    int sLen = s.length(), len = sLen / Byte.SIZE;
    if (sLen % Byte.SIZE != 0) {
        len++;
    }
    byte[] toReturn = new byte[len];
    for (int i = 0; i < sLen; i++) {
        if (s.charAt(i) == '1') {
            toReturn[i / Byte.SIZE] = (byte) (toReturn[i / Byte.SIZE] | (0x80 >>> (i % Byte.SIZE)));
        }
    }

    return toReturn;
} 
```

**C代码**

```
char fromBinary [] (String s) {
    int sLen =64;
    int len=8;
    int i=0;
    char toReturn [8];
    char str [64]=s;

    for (i = 0; i < sLen; i++) {
        if (str[i] == '1') {
            toReturn[i/8] = (char)(toReturn[i/8] | (0x80 >>> (i%8)));
        }
    }

    return toReturn;
} 
```

好的，抱歉，首先我对 C 比较陌生。我用 Java 编程已经有几年了，所以我不太习惯 C 的错误和语法。我使用 Dynamic C 作为编程环境，所以可能会出现错误消息与众不同。我使用以下 main 来运行我的程序：

```
void main()  {
char bytes [8];
string s ="1010110011011110010010000010001101000101011001111010101111001101";
bytes=fromBinary(s);
 for (j=0;j<8;j++){
    printf("%d",toReturn[j]);
    printf(", ");
    }
} 
```

由于以下错误，我无法运行我的程序：

第 1 行：ERROR UNTITLED2.C：只能索引 cofunctions。
第 1 行：错误 UNTITLED2.C：旧式函数声明缺少参数声明列表。第 1 行：ERROR UNTITLED2.C：',' 缺失/预期。
第 6 行：错误 UNTITLED2.C：需要常量表达式。
第 10 行：错误 UNTITLED2.C：无效的表达式。
第 10 行：错误 UNTITLED2.C：缺少字符 ';'。
第 10 行：错误 UNTITLED2.C：缺少字符 ';'。
第 10 行：错误 UNTITLED2.C：缺少字符 ')'。
第 10 行：错误 UNTITLED2.C：缺少字符 ')'。
第 10 行：错误 UNTITLED2.C：无效的表达式。
第 10 行：警告 UNTITLED2.C：转换为不兼容的指针类型第 19 行：警告 UNTITLED2.C：类型不匹配：在表达式中使用不兼容的类型 char[] 和 unsigned int。达到 10 个错误；进一步的错误被抑制。

我不确定我做错了什么。任何见解都值得赞赏。对所有的混乱感到抱歉。

**最新更新**

```
unsigned char *fromBinary(const char * const s) {
static unsigned char toReturn[8]={0};
size_t i,j;
const size_t len=8;
 for(i=0;i<len;i++)        {
    for(j=0;j<8;j++)
       toReturn[i]|=(s[i*8+j]=='1' ? 1<<(7-j) : 0);
    }
return toReturn;
 }

 void main()  {
 unsigned char bytes [8];
 string s ="1010110011011110010010000010001101000101011001111010101111001101";
 fromBinary(s)
 for (j=0;j<8;j++){
    printf("%d",toReturn[j]);
     printf(", ");
    }
} 
```

给了我以下错误：

第 1 行：ERROR UNTITLED3.C：关键字“const”只能用于全局变量和静态局部变量。第 4 行：错误 UNTITLED3.C：不允许分配给只读变量。第 4 行：ERROR UNTITLED3.C：关键字“const”只能用于全局变量和静态局部变量。第 7 行：警告 UNTITLED3.C：转换为不兼容的指针类型第 7 行：警告 UNTITLED3.C：转换为不兼容的指针类型第 7 行：警告 UNTITLED3.C：转换为不兼容的指针类型第 15 行：警告 UNTITLED3.C：类型不匹配：表达式中使用的不兼容类型 char[] 和 unsigned int。第 15 行：错误 UNTITLED3.C：无效的表达式 - 需要左值。
第 15 行：错误 UNTITLED3.C：s 超出范围/未声明。
第 15 行：错误 UNTITLED3.C：缺少字符 ';
第 15 行：错误 UNTITLED3.C：字符串超出范围/未声明。第 16 行：警告 UNTITLED3.C：转换为不兼容的指针类型第 16 行：警告 UNTITLED3.C：参数 1 的类型错误。
第 16 行：错误 UNTITLED3.C：s 超出范围/未声明。
第 16 行：错误 UNTITLED3.C：DynamicC 不支持数组分配。第 16 行：错误 UNTITLED3.C：无效的表达式 - 需要左值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:44:17.673

仅从它的外观来看，您的 C 代码将可怕地爆炸（即使它在语法上是有效的，但事实并非如此）。您正在返回`toReturn`在堆栈上分配的内容，因此在函数返回时它超出范围。这几乎肯定会导致分段违规等。与其尝试翻译 Java，不如从头开始用 C 语言编写它。

```
unsigned char *fromBinary(const char * const s)
{
   static unsigned char toReturn[8]={0};
   size_t i,j;
   const size_t len=8;

   for(i=0;i<len;i++)
       {
       toReturn[i]=0;
       for(j=0;j<8;j++)
          toReturn[i]|=(s[i*8+j]=='1' ? 1<<(7-j) : 0);
       }
   return toReturn;
} 
```

请注意，返回的数组是 a) 无符号（以避免符号扩展）和 b) 分配为静态的，因此它不会在函数之外消失。

更新：这是上述功能的完整测试工具：

```
#include <stdio.h>

unsigned char *fromBinary(const char * const s);

int main(void)
{
   const char *const s="0010100100110101001101101101111010110010000001011101001001001001";
   unsigned char *b;
   b=fromBinary(s);
   printf("%02X %02X %02X %02X %02X %02X %02X %02X\n",b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);
   return 0;
}

unsigned char *fromBinary(const char * const s)
{
(as above)
} 
```

使用 gcc 编译时不会出现错误或警告。它返回`29 35 36 DE B2 05 D2 49`。在您的代码中，您 a) 没有声明任何头文件 b) 没有原型c) 没有在您的函数中`fromBinary()`声明或分配。你也不应该用返回类型声明。如果您在上面的代码中遇到错误，那么要么您没有使用真正的 C 编译器，要么它已损坏。我建议阅读或重新阅读有关 C 编程语言的基础书籍。Kelley 和 Pohl 的“A Book on C”是一个好的开始。`toReturn``main()``main()``void`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:38:49.610

我修好了，试试这个：

```
#include <stdio.h>

typedef char* string;

unsigned char* fromBinary(const char * const s) {
    static unsigned char toReturn[8]={0};
    size_t i,j;
    const size_t len=8;
    for(i=0;i<len;i++){
        for(j=0;j<8;j++)
            toReturn[i]|=(s[i*8+j]=='1' ? 1<<(7-j) : 0);
    }
    return toReturn;
 }

int main()  {
    unsigned char (*bytes)[8];
    string s ="1010110011011110010010000010001101000101011001111010101111001101";
    int j;

    bytes=(unsigned char (*)[8])fromBinary(s);
    for (j=0;j<8;j++){
        //printf("%02X",(*bytes)[j]);
        printf("%d",(*bytes)[j]);
        printf(", ");
    }
} 
```

# c++ - C++：运算符和模板

> ID：11530151
> 
> 赞同：2
> 
> 时间：2012-07-17T20:13:05.373
> 
> 标签：c++, class, templates, operators, operator-overloading

以下是我从另一个问题中获取的示例，我理解为什么这不起作用：

```
struct Foo {
    Foo() {}
    Foo(int) {}
    Foo operator+(Foo const & R) { return Foo(); }
};

struct Bar {
    Bar() {}
    Bar(int) {}
};

Bar operator+(Bar const & L, Bar const & R) {
    return Bar();
}

int main() {
    Foo f;
    f+1;  // Will work - the int converts to Foo
    1+f;  // Won't work - no matching operator
    Bar b;
    b+1;  // Will work - the int converts to Bar
    1+b;  // Will work, the int converts to a Bar for use in operator+

} 
```

但是，如果我将其更改为以这种方式使用模板：

```
template <class T>
struct Foo {
    Foo() {}
    Foo(T) {}
    Foo operator+(Foo const & R) { return Foo(); }
};

template <class T>
struct Bar {
    Bar() {}
    Bar(T) {}
};

template <class T>
Bar operator+(Bar const & L, Bar const & R) {
    return Bar();
}

int main() {
    Foo<int> f;
    f+1;  // Will work - the int converts to Foo
    1+f;  // Won't work - no matching operator
    Bar<int> b;
    b+1;  // DOES NOT WORK
    1+b;  // DOES NOT WORK 
```

}

这没用。任何人都可以对此有所了解吗？模板快把我逼疯了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:28:55.320

有两个问题。

1.  您需要将模板类型添加到运算符定义中的参数中。这是必要的，因为它需要使用它们来知道要使用哪个 Bar 实例化。
2.  如果您想在模板函数中使用混合运算符（对两种不同类型进行操作），则需要为所有混合情况提供定义。否则，模板扣除系统将无法按您希望的方式运行。

.

```
template <class T>
Bar<T> operator+(Bar<T> const & L, Bar<T> const & R) { // Fixed
    return Bar<T>();
}

template <class T>
Bar<T> operator+(Bar<T> const & L, const T & R) { // Added
    return L + Bar<T>(R);
}

template <class T>
Bar<T> operator+(const T& L, Bar<T> const & R) { // Added
    return Bar<T>(L) + R;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:27:11.163

`int`和之间没有隐式转换`Bar`，只有`int`和之间`Bar<int>`。实际上，您还没有定义类型`Bar`；相反，`Bar<T>`对于`T`. 可能您会看到与 的定义相关的编译器错误`operator+`，尽管它可能隐藏在一大堆其他模板类型错误的后面。

我面前没有 c++ 编译器，但我相信它的`template<class T> Bar<T> operator+(Bar<T> const & L, Bar<T> const & R)`行为会如您所愿。

# java - GenericServlet、HttpServlet 和 Servlet 有什么区别？

> ID：11530152
> 
> 赞同：23
> 
> 时间：2012-07-17T20:13:15.327
> 
> 标签：java, servlets

我正在寻找 之间的确切区别`javax.servlet.http.HttpServlet` ，`javax.servlet.GenericServlet`但`javax.Servlet`无法找到它。

“完全不同”是指

1.  用法
2.  `javax.servlet.GenericServlet`存在背后的原因

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-17T20:17:54.703

“完全不同”是什么意思？API 列出了*确切的*差异。

[`Servlet`是一个定义 servlet 必须实现什么的接口。](http://docs.oracle.com/javaee/7/api/javax/servlet/Servlet.html)

[`GenericServlet`就是这样，一个通用的、独立于协议的 servlet。](http://docs.oracle.com/javaee/7/api/javax/servlet/GenericServlet.html)

[`HttpServlet`是一个专门绑定到 HTTP 协议的 servlet。](http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html)

你是在问你什么时候会*用*这些吗？

通常，您会扩展`HttpServlet`以实现应用程序的 Web 层。

`Servlet`如果您正在编写自己的容器或自己处理所有内容，则可以实施。您可能会扩展`GenericServlet`以处理不同的协议，但您可能不会。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-17T20:19:00.913

**javax.servlet**

Servlet 是一种服务器端 Web 技术。顾名思义，它服务于客户端请求并接收来自服务器的响应。您必须实现 javax.Servlet（接口）来处理 servlet 工作。

**javax.servlet.GenericServlet**

*签名：*

```
public abstract class GenericServlet extends java.lang.Object implements Servlet, ServletConfig, java.io.Serializable 
```

1.  GenericServlet 定义了一个通用的、独立于协议的 servlet。
2.  GenericServlet 提供了一个蓝图，使编写 servlet 更容易。
3.  GenericServlet 提供生命周期方法 init 和 destroy 以及 ServletConfig 接口中的方法的简单版本。
4.  GenericServlet 实现了在 ServletContext 接口中声明的 log 方法。
5.  要编写通用 servlet，重写抽象 service() 方法就足够了。

**javax.servlet.http.HttpServlet**

*签名：*

```
public abstract class HttpServlet extends GenericServlet implements java.io.Serializable 
```

1.  HttpServlet 定义了一个 HTTP 协议特定的 servlet。
2.  HttpServlet 为 Http servlet 提供了一个蓝图，并使编写它们变得更容易。
3.  HttpServlet 扩展了 GenericServlet，因此继承了 GenericServlet 的属性。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-17T20:20:25.780

[javax.servlet.Servlet](http://docs.oracle.com/javaee/6/api/javax/servlet/Servlet.html)是接口，它定义了所有实现的方法——这就是接口通常做的事情。

[javax.servlet.GenericServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html)是独立于协议的。它是抽象的，所以不能直接实例化。如果有一天你必须为 HTTP 以外的协议编写 servlet，它是一个可用的类来扩展。

[javax.servlet.http.HttpServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)是要通过 HTTP 协议进行通信的抽象类。很可能你只需要关心这个。

您可以在链接后面找到更准确的信息。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-22T06:31:29.970

-> 一个共同的特点是，这两个类都是抽象类。

-> GenericServlet 是 HttpServlet 类的超类。

-> 主要区别在于，HttpServlet 是依赖于协议的，而 GenericServlet 是独立于协议的。所以 GenericServlet 可以处理所有类型的协议，但 HttpServlet 只处理 HTTP 特定的协议。

-> GenericServlet 属于 javax.servlet 包。HttpServlet 属于 javax.servlet.http 包

-> GenericServlet 是一个抽象类，它扩展了 Object 并实现了 Servlet、ServletConfig 和 java.io.Serializable 接口。HttpServlet 是一个抽象类，它扩展了 GenericServlet 并实现了 java.io.Serializable 接口。

-> GenericServlet 仅支持 service() 方法，不包含 doGet() 和 doPost() 方法。HttpServlet 还支持 doGet()、doPost()、doHead() 方法 (HTTP 1.0) 以及 doPut()、doOptions()、doDelete()、doTrace() 方法 (HTTP 1.1)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-14T06:57:21.030

小服务程序：-

1.  Servlet 在 Web 容器中作为线程运行，而不是在单独的 OS 进程中运行。
2.  第一次请求时只创建一个对象，其他请求共享同一个对象。
3.  Servlet 是平台无关的。
4.  Servlet 很快。

GenericServlet：-

1.  通用所有协议。
2.  实现 Servlet 接口。
3.  使用服务方法。

HttpServlet：-

1.  仅适用于 HTTP 协议。
2.  继承 GenericServlet 类。
3.  使用 doPost、doGet 方法代替 service 方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-17T20:23:13.840

`HttpServlet`特定于 HTTP 协议，因此它为 HTTP 动词提供方法：`doGet`、`doPost`等，以及`service`采用 HTTP 特定请求和响应对象的通用方法的一个版本。它是一种特殊类型，`Servlet`实际上是一个非常小的接口。

`GenericServlet`是`Servlet`接口的基本的、协议中立的实现。通常，您会在 API 中找到类似的接口基本实现。在这种情况下，为API`GenericServlet`添加了一些功能： 、和 servlet init 参数的传递方法。通过扩展.`Servlet``getServletName``getServletInfo``HttpServlet``GenericServlet`

通常，每个针对此 API 进行编码的人都`HttpServlet`用于实现 HTTP Web 服务，但也可以`GenericServlet`使用自定义协议或其他现有协议（例如 FTP）扩展或用于实现服务器/服务功能。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-09-14T12:06:31.110

Servlet 是一个包含五个抽象方法的接口，为了使用 servlet，我们必须为所有这五个方法提供一个实现，这是一个令人头疼的问题。为了避免这种复杂性，我们将 GenericServlet 和 HttpServlet 用于下一级。

GenericServlet 是独立于协议的，这意味着它可以接受任何协议请求。GenericServlet 可以转发和包含请求，但我们不能重定向请求。在 GenericServlet 中无法使用 cookie 和 HttpSession 进行会话管理。在 GenericServlet 中，无法为获取和发布请求定义单独的逻辑。

HttpServlet 依赖于协议。这意味着，它只接受 HTTP 协议请求。HttpServlet 可以转发、包含和重定向请求。在 HttpServlet 中可以使用 cookie 和 HttpSession 进行会话管理。在 HttpServlet 中，可以为 get 和 post 请求定义单独的逻辑。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-29T05:47:29.573

1.  **Servlet 接口它是****GenericServlet**和**HttpServlet**
    的超级接口。它包含 5 个抽象方法，全部由 GenericServlet 和 HttpServlet 继承。 *****   **问题**
        如果你想通过实现 Servlet 接口来创建 servlet，那么接口 Servlet 的所有 5 个抽象方法都应该被覆盖，即使程序员不感兴趣
    *   **用法**
        如果您想开发自己的容器，请仅实现 Servlet 接口。**** 
*****   **GenericServlet**
    它是 Servlet 接口的直接子类和 HttpServlet 的超类。在这个类中，存在一个抽象方法：service()。其他4个抽象方法在这个类中实现。
    *   **问题**
        除 service() 方法外，所有方法都是具体的，因此您必须将其实现为回调方法。
    *   **用法**
        它是独立于协议的，因此可以与任何协议一起使用，如 FTP、SMTP、HTTP 等。*   **HttpServlet**
    它是 GenericServlet 和 Servlet 接口的子类。HttpServlet 的直接超类是 GenericServlet。HttpServlet 不包含任何抽象方法。尽管 HttpServlet 不包含任何抽象方法，但设计者将其声明为抽象类，不允许任何人直接创建对象，因为 Servlet 对象是由 Servlet 容器创建的。
    *   **问题**
        HttpServlet 依赖于协议，并且仅用于特定于 HTTP 协议。
    *   **使用**
        service() 方法不需要被覆盖。它可以被具有相同参数的 doGet() 或 doPost() 方法替换。它最常用的方法是创建 servlet。

        [层次结构](https://i.stack.imgur.com/qD0qh.png)
        参考：[way2java.com](https://way2java.com/)****

 ***** * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-26T13:51:36.530

-->`GenericServlet`可以处理来自单个表单的多个客户端请求。然而，`HttpServlet`可以处理来自多个`HTML`表单的多个客户端请求。

-->`GenericServlet`是无状态的并且`HttpServlet`是有状态的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-24T17:58:29.730

包中的所有类、接口和方法`javax.servlet`都是*独立*于协议的（对所有协议都是通用的）。

相反，`javax.servlet.http`包中存在的所有类、接口和方法都*依赖*于协议（特定于 HTTP 协议）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-30T07:21:57.897

1.  http servlet 是一个特定的类，只允许 http 协议，不允许其他协议，如 ftp smtp
2.  generic servlet 允许所有类型的协议只有一种抽象方法是服务方法，其他四种方法是具体方法
3.  generic servlet 是 http servlet 的超类****

# javascript - 这个 ejs 代码的等效玉代码是什么？

> ID：11530153
> 
> 赞同：0
> 
> 时间：2012-07-17T20:13:17.983
> 
> 标签：javascript, html, node.js, syntax, pug

在 ejs 你可以做这样的事情。

```
<ul id="photos" class="photos">
  <% req.photos.forEach(function(photo) { %>
    <li style="background-image: url(<%= photo.picture %>>);" class="<%= photo.link %>">
      <a href="<%= photo.link %>>" target="_top"></a>
    </li>
  <% }); %>
</ul> 
```

我正在尝试做类似这样的事情，但我无法让它发挥作用。特别令人困惑的是如何使循环工作以及要逃避什么以及如何逃避它。

这个代码在 Jade 中会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:19:10.053

应该：

```
ul(id='photos',class='photos')
  - req.photos.forEach(function(photo){
    li(style='background-image: url('+photo.picture+');', class=photo.link)
      a(href=photo.link, target='_top')
  - }) 
```

基本上你只需要在属性中使用它们时才需要转义字符串

有关更多信息，请参阅[https://github.com/visionmedia/jade/#code](https://github.com/visionmedia/jade/#code)和[https://github.com/visionmedia/jade/#attributes](https://github.com/visionmedia/jade/#attributes)。

# c# - 使用 C# 动态读取 XML 和执行函数

> ID：11530155
> 
> 赞同：1
> 
> 时间：2012-07-17T20:13:21.560
> 
> 标签：c#, xml

我有一个如下的xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<TestCase Name="1.7 Bus01">
 <Action Word="Login" Text="Login" TestCaseId="MPD_QS_06">
    <Parameter Name="userName" Value="user1"/>
    <Parameter Name="userPwd" Value="user1"/>
    <Parameter Name="Tenant" Value="tnt1"/>
    <Parameter Name="expectedResult" Value="Login success"/>
 </Action>
 <Action Word="AddOrganisation" Text="AddOrganisation">
    <Parameter Name="name" Value="MAHNEWX"/>
    <Parameter Name="senderId" Value=""/>
    <Parameter Name="address" Value="77 Westferry Circus"/>
    <Parameter Name="postCode" Value="E77 4 HB"/>
    <Parameter Name="city" Value="London"/>
    <Parameter Name="country" Value="United Kingdom"/>
    <Parameter Name="state" Value=""/>
    <Parameter Name="email" Value=""/>
    <Parameter Name="telCountryCode" Value=""/>
    <Parameter Name="telNumber" Value=""/>
    <Parameter Name="telExtension" Value=""/>
    <Parameter Name="faxCountryCode" Value=""/>
    <Parameter Name="faxNumber" Value=""/>
    <Parameter Name="faxExtension" Value=""/>
    <Parameter Name="roleList" Value="MAH"/>
    <Parameter Name="expectedResult" Value="Organisation is added"/>
  </Action>
  <Action Word="NewValidationRegistration" Text="NewValidationRegistration">
    <Parameter Name="registrationname" Value="FusionUnion"/>
    <Parameter Name="AS2Identifier" Value="MPTVC"/>
    <Parameter Name="expectedResult" Value="Registration is validated"/>
  </Action>
  <Action Word="NewSubmissionRegistration" Text="NewSubmissionRegistration">
     <Parameter Name="registrationname" Value="FusionUnion"/>
     <Parameter Name="AS2Identifier" Value="MPTVC"/>
     <Parameter Name="expectedResult" Value="Registration is submitted"/>
  </Action>
  <Action Word="Logout" Text="Logout">
     <Parameter Name="expectedResult" Value="Logout success"/>
  </Action>
</TestCase> 
```

对于每个*动作词*，我都有一个方法。如何读取此 xml 并使用参数动态执行方法。*Parameter Name*是我的方法中的实际变量。参数的数量每次都不同。准确地说，我想读取 xml 并获取操作词列表，然后使用这些值执行它们。提前感谢您的帮助。

-萨西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:50:03.553

```
object obj = this; //your object containing methods
XDocument xDoc = XDocument.Parse(xml);
Type type = obj.GetType(); 

foreach (var action in xDoc.Descendants("Action"))
{
    MethodInfo mi = type.GetMethod(action.Attribute("Word").Value);

    var dict =  action.Descendants().ToDictionary(
                                         d=>d.Attribute("Name").Value,
                                         d=>d.Attribute("Value").Value);

    object[] parameters = mi.GetParameters()
        .Select(p => Convert.ChangeType(dict[p.Name],p.ParameterType))
        .ToArray();

    var expectedResult = mi.Invoke(obj, parameters);

    Debug.Assert(expectedResult.Equals(dict["expectedResult"]));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:50:50.847

我为我正在从事的项目做了一些大体相似的事情。从高层次的角度来看，如果你可以假设 Action Word 正是某个程序集中的一个方法的名称，那么你可以使用反射得到一个与实际函数对应的 MethodInfo。然后，您可以调用该函数，将适当的参数传递给该方法。

这里的一个问题是如何指定参数。由于参数的数量是可变的，因此您需要使用能够处理变量列表的数据结构。我建议使用字典来传递参数。

好的，假设您可以识别并加载适当的程序集，请继续执行以下操作：

foreach 动作：

*   将 Word 属性的值检索到 actionWordString
*   创建一个新的 Dictionary 实例
*   foreach 参数作用：
*   检索 Name 和 Value 属性值
*   在您的字典中添加一个新条目：即 dict[nameString] = valueString
*   使用反射查找与 actionWordString 同名的 MethodInfo，它也将 Dictionary 作为参数
*   调用方法，传入您之前创建和填充的字典。

描述的散文和实现的代码一样多。至少在我看来，最困难的事情之一是加载或访问包含方法的程序集的类型。此外，最好将方法实现为静态方法，这样您就不必担心创建处理程序类的实例。

# http - 在 NodeJS 中通过 SOCKS5 代理执行 http 请求

> ID：11530159
> 
> 赞同：30
> 
> 时间：2012-07-17T20:13:57.080
> 
> 标签：http, node.js, proxy, tor

我打算通过 Tor 在 NodeJS 中执行一系列 HTTP 请求。
Tor 使用 SOCKS5，所以我出去寻找一种在 NodeJS 中代理 HTTP 请求的方法。
我打算使用默认的 http.request() 函数来完成这项工作。
但是，我似乎找不到使用代理的方法。
有人建议我可以这样做：

```
var http = require("http");
var options = {
  host: "localhost",
  port: 9050,
  path: "http://check.torproject.org",
  method: 'GET',
  headers: {
    Host: "http://check.torproject.org",
  }
};
var req = http.request(options, function(res) {
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
}); 
```

但它没有用。
那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-05T01:33:44.493

我刚刚发布了两个可以帮助您做到这一点的模块：[socks5- **http** -client](https://github.com/mattcg/socks5-http-client)和[socks5- **https** -client](https://github.com/mattcg/socks5-https-client)。

只需使用那些而不是默认`http`模块。API 是一样的。例如：

```
require('socks5-http-client').request(options, function(res) {
    console.log('STATUS: ' + res.statusCode);
    console.log('HEADERS: ' + JSON.stringify(res.headers));
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
        console.log('BODY: ' + chunk);
    });
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-02-17T12:35:29.417

我知道我在回答一个老问题，但是对于这个问题有一个更好的解决方案，关于如何在 Node.js 中使用 sock4 和 sock5 代理。为了简单起见，我将使用 request-promise 模块，但是您也可以使用裸 request 模块。

要求：[socks-proxy-agent](https://www.npmjs.com/package/socks-proxy-agent) , [request-promise](https://www.npmjs.com/package/request-promise)

例子：

```
async function main() {

var proxy = "socks4://1.2.3.4:35618"

var agent = new SocksProxyAgent(proxy);

var options = {
    uri: 'http://targetUrl',
    agent: agent,
    headers: {
        'User-Agent': 'Request-Promise'
    }
}

try {
    var responce = await rp(options)
} catch(err) {
    console.log(err)
}

console.log(responce)  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T20:32:26.237

不是一个完整的答案，但您可能希望密切关注这两个模块。

[https://github.com/Ayms/node-Tor](https://github.com/Ayms/node-Tor)

支持被添加到：[https://github.com/Ayms/node-bot](https://github.com/Ayms/node-bot)。

我给他发了一封电子邮件，询问他预计何时完成，将很快用该信息更新这篇文章。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-14T09:25:09.980

我有同样的问题并使用[polipo](https://www.irif.univ-paris-diderot.fr/~jch/software/polipo/)作为节点和 TOR 之间的代理

```
node (request) - polilp httproxy:8123 -  polipo - tor (socks5:9050). 
```

对于 mac（带有[brew](http://brew.sh/)的 osx ），它的工作方式如下：

```
brew install polipo tor
tor # start top
polipo socksParentProxy=localhost:9050 # start polipo 
```

[带有请求](https://github.com/request/request)的工作示例

```
var request = require('request');
var options = {'url':'https://check.torproject.org/', 'proxy':'http://localhost:8123'}

request(options,
            function (error, response, body) {
            if (error){
                console.log(error);
                return;
            }

            var usingTor = (body.indexOf('Congratulations. This browser is configured to use Tor.')  !== -1);
            expect(usingTor).to.equal(true);   

        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-17T07:40:10.127

如果你在 *nix 机器上，你可以使用 tsocks。它将“socksify”整个过程，因此您甚至可以将它用于根本不支持代理的任何东西。这篇[文章](https://www.redpill-linpro.com/sysadvent/2015/12/13/socks-proxy-as-poor-mans-vpn.html)有一些很好的例子

基本上它就像做一样容易`tsocks node myscript.js`。我不确定它是否适用，`tsocks npm start`但您可以尝试一下（npm 将您的代码作为子进程启动）

`server = 127.0.0.1`您只需要先进行一些设置（放入`etc/tsocks.conf`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-22T05:35:25.340

哟应该试试 polipo，这对我有用； [http://ccm.net/faq/805-installing-an-easy-http-proxy-cache-polipo](http://ccm.net/faq/805-installing-an-easy-http-proxy-cache-polipo)

# pyqt - 如何在 PySide 中设置 QMYSQL 驱动程序？

> ID：11530162
> 
> 赞同：0
> 
> 时间：2012-07-17T20:14:01.457
> 
> 标签：pyqt, pyside

我正在尝试在 PySide 中设置 QMYSQL 驱动程序。我试过查看 Qt 文档，但没有奏效。有没有特定的方法来设置驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:58:22.647

如果您使用linux，则可以安装驱动程序。对于 ubuntu：

```
sudo apt-get install python-qt4-sql 
```

显然，对于 Windows，如果您收到以下消息：

```
 QSqlDatabase: QMYSQL driver not loaded
 QSqlDatabase: available drivers: QSQLITE QODBC3 QODBC QPSQL7 QPSQL 
```

[您必须按照此处](http://doc.qt.nokia.com/4.7/sql-driver.html#qmysql)的说明自行构建 QMYSQL 驱动程序。

# database - 在 AWS 或 Azure 云架构中，我为什么要选择消息队列而不是轮询数据库？

> ID：11530163
> 
> 赞同：0
> 
> 时间：2012-07-17T20:14:07.480
> 
> 标签：database, message-queue, n-tier-architecture

过去，我使用消息队列来处理需求高峰。这个系统工作正常，除了记录目的。我将成功处理的消息写入数据库以进行报告和记录。这让我想知道为什么我不从一开始就将消息写入数据库，而是让我的“工作角色”轮询数据库，而不是消息队列。

我猜这不是最好的设计，因为随着数据库的增长，轮询一个巨大的数据库只是为了寻找一个“未经检查”的记录来处理会变得非常慢，而如果我立即请求，消息队列只会给我一个.

我错过了什么吗？还有其他理由选择消息队列而不是轮询数据库吗？我很乐意为用户提供查看尚未处理的内容（浮动在队列中）的能力，但是该操作比在数据库上运行查询花费的时间要长得多，因此这似乎是一种权衡。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:59:06.137

另一个想到的原因是阻塞/锁定。通常，如果您只是轮询数据库以寻找工作，只要您只有一个工作人员来消化消息，它就会工作得相当好。但是，如果您想横向扩展并让更多的工作人员解决问题，那么当您将基于数据库的“队列”中的工作消息从“需要运行”更改为“运行”时，通常最终会导致锁定升级成功”或其他。

使用消息队列可以为您解决这个棘手的问题，因为所有线程安全和锁定/阻塞都没有影响。

# synchronization - 用于在不同数据中心之间同步数据的开源工具

> ID：11530166
> 
> 赞同：1
> 
> 时间：2012-07-17T20:14:23.700
> 
> 标签：synchronization, regions

有人知道在不同地区的不同数据中心之间同步数据的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:40:52.867

That's a terribly vague question. But going on one possible interpretation, `rsync`, `rdist`, and `unison` come to mind, but I'm sure there's plenty more. It depends on whether you need real-time synchronization, one- or two-way synchronization, what your network bandwidth is and many other things.

# java - 补色 - 图像分析

> ID：11530167
> 
> 赞同：1
> 
> 时间：2012-07-17T20:14:29.397
> 
> 标签：java, image-processing, computer-vision

我只是在处理图像，查看颜色和对比度等内容。我的问题是如何分析图像中的补色并尝试有效地做到这一点。

首先，我得到了像素 rgb。然后我转换为 HSV 并增加色调并返回 rgb，从而获得补色。然后我正在查看它的壁橱邻居，看看这些是否是互补色。鉴于这些是像素，很少有人会发现中心像素是互补的 - 因此我觉得这不是很有效。

或者另一种想法......根据颜色区域分割图像，如果存在具有互补色的区域，则计算出一个区域到另一个区域的距离。

关于如何有效编码的任何想法和想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:55:20.853

所以我最终粗略地想出了如何做到这一点，或者通过非常慢的方式或稍微快一点的方式：

1.  将图像分割成颜色区域
2.  通过将 0.5 添加到颜色的色调来计算颜色区域的互补性
3.  还要查看最近的互补色，因为我们可能没有确切的互补色
4.  计算从线段到互补线段的欧几里德距离（如果存在）并计算 1/ED - 如果接近则为 1，如果远离则接近于零，因此就像一个权重。
5.  相应地计算段中的比例与互补色的重量配对。

除此以外

1.  与段相反，对每个像素对每个其他像素执行此操作

# regex - 正则表达式空间验证

> ID：11530168
> 
> 赞同：-4
> 
> 时间：2012-07-17T20:14:31.290
> 
> 标签：regex

我想制作一个javascript函数，提示用户在每26个字符后放置空格。意味着用户有必要在总长度为58的文本框中放置26个字符后的空格。如果用户在26个字母之前放置空格，那么它应该在空格后计算字母

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:19:18.850

不完全确定你打算做什么，但如果你想阻止人们连续输入超过 26 个非空格字符，那么正则表达式

```
/\S{27}/ 
```

会检查的。如果匹配，则字符串包含 27 个或更多非空格字符。

# iphone - 使用Objective-C从Xcode中的智能卡读取证书

> ID：11530171
> 
> 赞同：0
> 
> 时间：2012-07-17T20:14:49.950
> 
> 标签：iphone, objective-c, smartcard

我是 Objective-C 编码和智能卡编程的新手。我正在为 iPhone 开发应用程序。我发现使用 iSmartSDK 从智能卡读取文件有困难，它返回 NULL，尽管 Applet 的选择是成功的。有没有人遇到过这样的问题或知道这个？谢谢

```
t0Command.classByte = 0;
t0Command.instructionByte = 0xCB;
t0Command.parameter1Byte = 0x3F;
t0Command.parameter2Byte = 0xFF;
t0Command.dataBytes = nil;
t0Command.lengthByte = t0Command.dataBytes.length;
t0Command.expectedResponseLengthByte = 0x7F;

t0Command.dataBytes = [self hexStringToBytes:@"5C035FC105"];

t0Command.commandId = READ_WRITE_CPU_CARD_COMMAND_ID;
resultCommand = [iSmartInstance sendCommandToCPUCard:t0Command];
if (resultCommand == nil) {
    [self displayMessage:@"Read Binary Failed"];
}
else{
    [self displayMessage:[NSString stringWithFormat:@"Read Status: %02x%02x", ((T0Command*)resultCommand).status1Byte, ((T0Command*)resultCommand).status2Byte]];
    [self displayMessage:[NSString stringWithFormat:@"Response Length: %d", ((T0Command*)resultCommand).dataBytes.length]];
    NSString *readBytes = [[[NSString alloc] initWithBytes:((T0Command*)resultCommand).dataBytes.bytes 
                                                    length:((T0Command*)resultCommand).dataBytes.length 
                                                  encoding:NSASCIIStringEncoding] autorelease];

    [self displayMessage:[NSString stringWithFormat:@"Read Value: %@ \n Bytes: %@", readBytes, ((T0Command*)resultCommand).dataBytes.bytes]];
} 
```

# php - Yii - 从 URL 中删除“索引”

> ID：11530174
> 
> 赞同：0
> 
> 时间：2012-07-17T20:15:01.827
> 
> 标签：php, url, seo, yii

如何`index`从`http://localhost/dashboard/index/create`

我有这样的`urlManager`设置：

```
'urlManager' => array(
     'urlFormat' => 'path',
     'showScriptName' => false,
     'rules' => array(
         '<controller:\w+>/<id:\d+>' => '<controller>/view',
         '<controller:\w+>/<action:\w+>/<id:\d+>' => '<controller>/<action>',
         '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
     ),
 ), 
```

这给了我这样的干净 URL `http://localhost/dashboard`，其中`dashboard`一个模块的默认控制器名为`indexController`.

现在，我遇到的问题是我无法访问模块控制器的其他操作，`index`如果我想在`actionCreate`里面调用`indexController`，我总是不得不说`http://localhost/dashboard/index/create`。

有什么办法可以摆脱`index`并像这样称呼它：`http://localhost/dashboard/create`？

这是我的模块的配置方式`main.php`：

```
'modules' => array(
    ...
    'dashboard' => array(
        'defaultController' => 'index'
    ),
    ...
), 
```

先感谢您 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:34:02.680

尝试像这样安排您的数组（将在您的 urlManager 组件下以仪表板开头的行）：

```
array(
  ...
  'components' => array(
    ...
    'urlManager' => array(
      ...
        'rules' => array(
          'dashboard/<action:\w+>' => 'dashboard/index/<action>'
      ),
    ),
  ),
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T10:13:13.127

您可以`.htaccess file`为此创建：

```
RewriteEngine on
RewriteBase /project_folder_NAME
# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

# jquery - 如何使用jquery在div容器退出时触发事件

> ID：11530177
> 
> 赞同：0
> 
> 时间：2012-07-17T20:15:09.680
> 
> 标签：jquery

所以，我在这里有一个工作版本：http: [//jsfiddle.net/yEmvm/19/](http://jsfiddle.net/yEmvm/19/)

当您单击第一个地址块的公司，然后单击名称时，它会触发事件并显示无效地址。*在我为第二个地址块或第一个地址块之外*的任何地方找到公司之前，我不想触发该事件。我想不出另一个事件来触发它。

这只是一个例子。此页面将包含未知数量的地址块，从 3 到 99。此外，它将包含更多字段用于完整地址。用户可以通过按钮继续添加更多内容。但是，class 和 id 的名称结构是一致的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:23:14.720

您应该在超时时运行您的代码，并在焦点上取消计时器：

```
$('.address').each(function()
{
    var timer;

    $(this).find('input').blur(function()
    {
        timer = setTimeout(function()
        {
            var verified = false; // run your verification here

            if ( ! verified )
            {                
                // run code here to display error
            }
        }, 0);
    })
    .focus(function()
    {
        timer && clearTimeout(timer);
    });
});​ 
```

这是一个非常基本的示例：http: [//jsfiddle.net/U6TRj/3/](http://jsfiddle.net/U6TRj/3/)

* * *

**解释：**

基本上，如果您在`input`关注另一个元素的同时单击一个元素`input`，浏览器将首先触发`blur`旧元素上的`focus`事件，然后触发新元素上的事件。

我们在这里所做的`timeout`（不需要延迟）是将代码的执行推入堆栈，以便它在`focus`事件处理程序之后执行。这样，我们可以从`focus`回调中取消它的执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:34:58.703

这是 .focusout() [http://api.jquery.com/focusout/#dsq-comment-108827731的 jQuery API 文档中记录的行为](http://api.jquery.com/focusout/#dsq-comment-108827731)

也许那里建议的插件可以帮助您解决问题：http: [//archive.plugins.jquery.com/project/focus](http://archive.plugins.jquery.com/project/focus)

# r - 将数据帧中的值与另一个数据帧中的值匹配，并将前者替换为来自另一个数据帧的相应模式

> ID：11530184
> 
> 赞同：24
> 
> 时间：2012-07-17T20:15:26.467
> 
> 标签：r, replace, pattern-matching, dataframe

复杂的标题，但这是我想要实现的一个简单示例：

```
d <- data.frame(v1 = c(1,2,3,4,5,6,7,8), 
                v2 = c("A","E","C","B","B","C","A","E"))

m <- data.frame(v3 = c("D","E","A","C","D","B"), 
                v4 = c("d","e","a","c","d","b")) 
```

通过匹配in 中的值，`d$v2`应将 in 中的值替换为 in 中的值`m$v4``d$v2``m$v3`

生成的数据框`d`应如下所示：

```
v1    v4
1      a
2      e
3      c
4      b
5      b
6      c
7      a
8      e 
```

我尝试了不同的东西，最接近的是：`d$v2 <- m$v4[which(m$v3 %in% d$v2)]`

我尝试再次避免任何 for 循环！必须是可能的:-) 不知何故... ;)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-17T20:20:54.240

你可以试试：

```
merge(d,m, by.x="v2", by.y="v3")
  v2 v1 v4
1  A  1  a
2  A  7  a
3  B  4  b
4  B  5  b
5  C  3  c
6  C  6  c
7  E  2  e
8  E  8  e 
```

## 编辑

这是另一种保留顺序的方法：

```
data.frame(v1=d$v1, v4=m[match(d$v2, m$v3), 2])
  v1 v4
1  1  a
2  2  e
3  3  c
4  4  b
5  5  b
6  6  c
7  7  a
8  8  e 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-17T15:10:24.050

您可以使用标准的左连接。

加载数据：

```
d <- data.frame(v1 = c(1,2,3,4,5,6,7,8), v2 = c("A","E","C","B","B","C","A","E"), stringsAsFactors=F)
m <- data.frame(v3 = c("D","E","A","C","D","B"), v4 = c("d","e","a","c","d","b"), stringsAsFactors=F) 
```

更改列名，以便我可以按列“v2”加入

```
colnames(m) <- c("v2", "v4") 
```

左加入并保持data.frame d的顺序

```
library(dplyr)
left_join(d, m) 
```

输出：

```
 v1 v2 v4
1  1  A  a
2  2  E  e
3  3  C  c
4  4  B  b
5  5  B  b
6  6  C  c
7  7  A  a
8  8  E  e 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-02-26T21:11:37.987

这将为您提供所需的输出：

```
d$v2 <- m$v4[match(d$v2, m$v3)] 
```

match 函数返回 m 矩阵的 v3 列中`d$v2`被匹配值的位置。一旦获得索引（使用`match()`），`m$v4`使用这些索引访问元素以替换 d 矩阵，列 v2 中的元素。

# f# - “逃离 Zurg”谜题的 F# 解决方案

> ID：11530190
> 
> 赞同：1
> 
> 时间：2012-07-17T20:16:17.683
> 
> 标签：f#

我编写了一个 F# 程序来解决“[逃离 Zurg](http://web.engr.oregonstate.edu/~erwig/papers/Zurg_JFP04.pdf) ”难题

我的代码如下。但不知何故，当谜题被解决时，我返回布尔值的方式出了点问题。

在线上

```
retVal = Move (cost + (MoveCost toy1 toy2)) Right remainingElements 
```

我收到警告

表达式的类型应该是“unit”，但类型应该是“bool”。如果分配属性，请使用语法 'obj.Prop <- expr'

我看到即使解决难题时函数返回true。当它返回时， retVal 保持为假。

下面是我的代码。

```
open System

type Direction = 
    | Left
    | Right

type Toy = {Name: string; Cost: int}

let toys = [
                {Name="Buzz"; Cost=5}; 
                {Name="Woody"; Cost=10}; 
                {Name="Rex"; Cost=20}; 
                {Name="Hamm"; Cost=25};
           ]

let MoveCost toy1 toy2 =
    if (toy1.Cost > toy2.Cost) then
        toy1.Cost
    else
        toy2.Cost

let rec Move cost direction group = 
    match group with
    | [] -> if (cost > 60) then
                false
            else 
                Console.WriteLine("Solution Found!")
                true
    | _ ->
        match direction with
        | Left ->
            let retVal = false
            let combinations = Set.ofSeq (seq {for i in group do for j in group do if i <> j then if i < j then yield i, j else yield j, i})
            for pair in combinations do
                let (toy1, toy2) = pair                
                let remainingElements = List.filter (fun t-> t.Name <> toy1.Name && t.Name <> toy2.Name) group                
                retVal = Move (cost + (MoveCost toy1 toy2)) Right remainingElements
                if (retVal) then
                    Console.WriteLine ("Move " + toy1.Name + " and " + toy2.Name + " with the total cost of " + cost.ToString())
            retVal
        | Right ->
            let retVal = false
            let toysOnRightBank = List.filter (fun t-> not(List.exists (fun g-> g = t) group)) toys
            for toy in toysOnRightBank do
                let cost = cost + toy.Cost
                let retVal = Move cost Left (toy :: group)
                if (retVal) then
                    Console.WriteLine("Move " + toy.Name + " back with the cost of " + toy.Cost.ToString())
            retVal

[<EntryPoint>]
let main args =
    let x = Move 0 Left toys
    0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:19:07.527

您不能重新分配`let`绑定。它应该是：

```
let mutable retVal = false 
```

...

```
retVal <- Move (cost + (MoveCost toy1 toy2)) Right remainingElements 
```

但是，您可以轻松地重写它，这样`mutable`就不需要了：

```
let res =
  [
    for i in group do 
      for j in group do 
        if i < j then yield i, j elif i > j then yield j, i
  ]
  |> List.filter (fun (toy1, toy2) ->
    let remainingElements = List.filter (fun t-> t.Name <> toy1.Name && t.Name <> toy2.Name) group                
    Move (cost + (MoveCost toy1 toy2)) Right remainingElements)

match res with
| [] -> false
| _ ->
  res |> List.iter (fun (toy1, toy2) ->
    Console.WriteLine ("Move " + toy1.Name + " and " + toy2.Name + " with the total cost of " + cost.ToString()))
  true 
```

编辑：如果您需要参考实现，我[在 gist 上发布了一个完整的解决方案。](https://gist.github.com/3132740)

# python - Flask SQLAlchemy 查询，指定列名

> ID：11530196
> 
> 赞同：177
> 
> 时间：2012-07-17T20:16:38.040
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

如何使用模型在查询中指定我想要的列（默认选择所有列）？我知道如何使用 sqlalchmey session: 来做到这一点`session.query(self.col1)`，但是如何使用模型来做到这一点？我做不到`SomeModel.query()`。有办法吗？

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2012-08-21T12:29:42.310

您可以使用该`with_entities()`方法来限制要在结果中返回的列。（[文档](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.with_entities)）

```
result = SomeModel.query.with_entities(SomeModel.col1, SomeModel.col2) 
```

根据您的要求，您可能还会发现[延迟](http://docs.sqlalchemy.org/en/latest/orm/loading_columns.html#deferred "SQLAlchemy 延迟列加载")有用。它们允许您返回完整的对象，但限制通过网络传输的列。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-07-18T07:07:28.913

```
session.query().with_entities(SomeModel.col1) 
```

是相同的

```
session.query(SomeModel.col1) 
```

对于别名，我们可以使用 .label()

```
session.query(SomeModel.col1.label('some alias name')) 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2017-08-27T13:55:04.110

您可以使用[load_only](https://docs.sqlalchemy.org/en/latest/orm/loading_columns.html#load-only-and-wildcard-options)功能：

```
from sqlalchemy.orm import load_only

fields = ['name', 'addr', 'phone', 'url']
companies = session.query(SomeModel).options(load_only(*fields)).all() 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-19T08:54:29.113

您可以使用`Model.query`, 因为`Model`（或通常是它的基类，尤其是在使用声明性扩展的情况下）已分配[`Sesssion.query_property`](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#sqlalchemy.orm.scoping.ScopedSession.query_property)。在这种情况下`Model.query`相当于`Session.query(Model)`。

我不知道修改查询返回的列的方法（除了添加更多 using [`add_columns()`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.add_columns)）。
所以你最好的办法是使用`Session.query(Model.col1, Model.col2, ...)`（如 Salil 所示）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-10-15T07:47:10.540

您可以使用 Query.values、[Query.values](https://docs.sqlalchemy.org/en/13/orm/query.html?highlight=values#sqlalchemy.orm.query.Query.values)

`session.query(SomeModel).values('id', 'user')`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-29T10:34:56.777

我通常使用这个片段：

```
fields = ["col1", "col2", ...]\
session.query(map(lambda x: getattr(SomeModel.c, x), fields)) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-06-21T08:03:56.257

`result = ModalName.query.add_columns(ModelName.colname, ModelName.colname)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-06T18:05:44.293

如果您想将结果转换为普通**数组**`session.query(SomeModel.col1)`，则返回这样的元组数组，您可以使用以下语句之一来实现：`[('value_1',),('value_2',)]`

 **```
values = [value[0] for value in session.query(SomeModel.col1)]
values = [model.col1 for model in session.query(SomeModel).options(load_only('col1'))] 
```

结果：

```
 ['value_1', 'value_2'] 
```

* * *

## 回答 #9

> 赞同：-15
> 
> 时间：2012-07-18T09:43:09.450

这里有一个例子：

```
movies = Movie.query.filter(Movie.rating != 0).order_by(desc(Movie.rating)).all() 
```

我在数据库中查询评分 <> 0 的电影，然后我首先通过评分最高的评分对它们进行排序。

看这里：[在 Flask-SQLAlchemy 中选择、插入、删除](http://packages.python.org/Flask-SQLAlchemy/queries.html)**

# java - Java中的格式化字符串

> ID：11530197
> 
> 赞同：0
> 
> 时间：2012-07-17T20:16:41.453
> 
> 标签：java, android

嗨，我是 java 新手，所以这看起来有点驯服。无论如何，在 objC 中，当我想将变量插入字符串时，我会这样做：

```
NSString *string = [NSString stringWithFormat:@"test%i", variable]; 
```

我如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T20:18:16.807

方法有很多，但`java.lang.String.format()`方法很简单：

```
String message = String.format("There are %d ways to leave your lover", 50); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:19:08.523

使用[`String.format()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)方法。查看[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)以了解所有可用的不同格式选项。

# xtk - 从屏幕坐标中查找世界坐标

> ID：11530198
> 
> 赞同：3
> 
> 时间：2012-07-17T20:16:45.327
> 
> 标签：xtk

这个问题有很多答案，但我不确定它们是否都适用于 XTK，例如在 Three.JS 中看到多个答案，但当然 XTK 和 Three.JS 显然没有相同的 API。使用射线并且`Matrix`似乎与其他框架的许多其他解决方案非常相似，但我仍然没有在这里掌握可能的解决方案。现在只需找到坐标 X、Y 和 Z 并将它们记录下来`Console.Log`就可以了，后来我希望创建一个标题/工具提示来显示信息，但还有其他方法可以显示它。但是至少有人可以告诉我这是否可以使用射线与物体碰撞？我不确定在 XTK 中如何与网格或任何其他文件发生碰撞。现在的任何提示都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T10:23:24.420

这是我在 xtk 中取消投影的功能。如果您发现错误，请告诉我。现在有了结果点和相机位置，我应该能够找到我的交叉点。为了使后续步骤的计算更快，我将在选择事件中调用它，因此我只需要尝试与给定对象的交集。如果我有时间，我也会尝试测试边界框。

注意事项：最后几行不是必需的，我可以在射线而不是点上工作。

```
X.camera3D.prototype.unproject = function (x,y) {

  // get the 4x4 model-view matrix
  var mvMatrix = this._view;

  // create the 4x4 projection matrix from the flatten gl version
  var pMatrix = new X.matrix(4,4);
  for (var i=0 ; i<16 ; i++) {
    pMatrix.setValueAt(i - 4*Math.floor(i/4), Math.floor(i/4), this._perspective[i]);
  }
  // compute the product and inverse it
  var mvpMatrxix = pMatrix.multiply(mwMatrix); /** Edit : wrong product corrected **/
  var inverse_mvpMatrix = mvpMatrxix.getInverse();
  if (!goog.isDefAndNotNull(inverse_mvpMatrix)) throw new Error("Could not inverse the transformation matrix.");

  // check if x & y are map in [-1,1] interval (required for the computations)
  if (x<-1 || x>1 || y<-1 || y>1) throw new Error("Invalid x or y coordinate, it must be between -1 and 1");

  // fill the 4x1 normalized (in [-1,1]⁴) vector of the point of the screen in word camera world's basis
  var point4f = new X.matrix(4,1);
  point4f.setValueAt(0, 0, x);
  point4f.setValueAt(1, 0, y);
  point4f.setValueAt(2, 0, -1.0); // 2*?-1, with ?=0 for near plan and ?=1 for far plan
  point4f.setValueAt(3, 0, 1.0); // homogeneous coordinate arbitrary set at 1

  // compute the picked ray in the world's basis in homogeneous coordinates
  var ray4f = inverse_mvpMatrix.multiply(point4f);
  if (ray4f.getValueAt(3,0)==0) throw new Error("Ray is not valid.");
  // return in not-homogeneous coordinates to compute the 3D direction vector
  var point3f = new X.matrix(3,1);
  point3f.setValueAt(0, 0, ray4f.getValueAt(0, 0) / ray4f.getValueAt(3, 0) );
  point3f.setValueAt(1, 0, ray4f.getValueAt(1, 0) / ray4f.getValueAt(3, 0) );
  point3f.setValueAt(2, 0, ray4f.getValueAt(2, 0) / ray4f.getValueAt(3, 0) );
  return point3f;
}; 
```

# 编辑

[在这里](https://github.com/Ricola3D/X/tree/3dpicking)，在我的 repo 中，您可以在 camera3D.js 和 renderer3D.js 中找到用于在 xtk 中进行高效 3D 拾取的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:21:56.133

现在这不容易。我想你可以抓住相机的视图矩阵来计算位置。如果您这样做，最好将其作为内置功能带回 XTK！

目前，只能像这样选择对象（r 是 X.renderer3D）：

```
/**
* Picks an object at a position defined by display coordinates. If
* X.renderer3D.config['PICKING_ENABLED'] is FALSE, this function always returns
* -1.
*
* @param {!number} x The X-value of the display coordinates.
* @param {!number} y The Y-value of the display coordinates.
* @return {number} The ID of the found X.object or -1 if no X.object was found.
*/
var pick = r.pick($X, $Y); 
```

# facebook - Facebook 应用程序：如何获取兴趣列表帖子/提要？

> ID：11530201
> 
> 赞同：3
> 
> 时间：2012-07-17T20:16:50.323
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我是 Facebook 应用程序编程的新手，所以请原谅我的无知和我使用非正式术语。

Facebook 上有一个选项可以创建朋友、喜欢页面和订阅的混合列表，这样您就可以看到仅包含来自列表成员的帖子的“自定义提要”。

如果用户订阅了这样的列表，我的应用可以访问“自定义提要”吗？或者至少是这个列表的成员数组？（然后我可以遍历并获取这些成员发布的帖子）

我已经阅读了 Graph API 的 FriendList 对象，但是当我使用[This Link](https://graph.facebook.com/me/friendlists?access_token=AAAAAAITEghMBAHZClApws0N4W9c3pFCtZChLMTz1ECwcbOORkCJCtF6I1bAoYllcTFRejBcZBQvTvVRZBfcX6qUBmhQR0y4DfmHXRZA9chQZDZD)（来源：[Graph API](https://developers.facebook.com/docs/reference/api/)、[FriendList](https://developers.facebook.com/docs/reference/api/FriendList/)）对自己进行测试时，它并没有显示我创建的所有列表，而只显示了那些严格定义的列表作为“朋友列表” - 即仅包含朋友的列表（而不是喜欢的页面或订阅）。但我注意到了三件事——

1.  在我的主页上，“朋友列表”（确实出现在上述链接中的那些）与“混合列表”（带有“rss-wave”图标的蓝色方块）具有不同的图标（一个蓝色的小人）
2.  我所有的“朋友列表”都是我几年前创建的旧列表。较新的列表是“混合列表”。我可以通过图标和新列表没有出现在上面的链接中这一事实来区分它们。
3.  当我将一个喜欢的页面添加到我的“朋友列表”之一时，它并没有改变它的类型（相同的图标并且仍然出现在上面的链接中）。

这让我想到了这些问题——

*   这些类型的列表有什么区别？
*   就此而言，有多少种类型的列表？他们的管理方式不同吗？
*   我的应用程序如何访问这些“混合列表”？我想要用户订阅的所有列表的列表，并且我希望我的应用能够阅读这些列表上发布的帖子。

我希望这已经足够清楚了。

谢谢！

**编辑：**

我注意到这些类型的列表之间的另一个很大区别：“朋友列表”显示在左侧菜单的“朋友”标题下（当您按“更多”时，您可以看到所有这些）。我所说的“混合列表”显示在“兴趣”标题下。所以这一定是有区别的。我认为就可以添加到列表中的成员类型而言，它们几乎相同。不同之处在于“朋友列表”仅适用于创建它们的用户，而“兴趣列表”（又名“混合列表”）可以由其他人发布和订阅。

我将尝试查找有关“兴趣列表”的文档。如果有人已经知道答案，请分享:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:27:26.470

我刚刚对其进行了测试——创建了一个列表，添加了我的一个朋友和我喜欢的页面之一。

它显示在 Graph API 资源管理器中，`"list_type": "user_created"`但 /listid/members 只显示我放在该列表中的朋友，而不是页面。

这与文档在成员连接上[所说的](https://developers.facebook.com/docs/reference/api/FriendList/)一致，

> members：属于此列表成员的所有*用户。*

因此，目前似乎无法获取有关此类列表中页面的信息。（任何人都知道一些不同的事情，他们可能会纠正我。）

# bash - 什么更便携？echo -e 还是使用 printf？

> ID：11530203
> 
> 赞同：15
> 
> 时间：2012-07-17T20:16:54.703
> 
> 标签：bash, compatibility

我目前正在编写一个 bash 测试框架，它需要尽可能便携。

所以，在某一时刻，我不得不打印一个前导换行符，然后是一些包含几个扩展变量的文本。这是我使用的解决方案。

```
echo -e "\n$number_of_specs ${units}, $number_of_specs_failed failed" 
```

这似乎没问题，但我不确定与使用 eg 打印行相比有多便携`printf`？

有什么想法或提示可以找到一些参考吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-17T20:22:14.737

`printf`更便携。它应该总是优先于`echo -e`. 如果专门针对 bash/zsh/ksh，`echo $'...'`也可以。如果专门针对 zsh 或 ksh，`print`则可以。

*   [http://cfajohnson.com/shell/cus-faq.html#Q0b](http://cfajohnson.com/shell/cus-faq.html#Q0b)
*   [http://www.in-ulm.de/~mascheck/various/echo+printf/](http://www.in-ulm.de/~mascheck/various/echo+printf/)
*   [http://pubs.opengroup.org/onlinepubs/9699919799/utilities/echo.html#tag_20_37_16](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/echo.html#tag_20_37_16)

POSIX（最后一个链接）也讨论了`echo -n`问题，这些问题也应该避免。基本上，永远不要使用选项`echo`，为了可移植性，请使用 printf。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:02:57.633

用于领先换行符的最便携（就可移植到没有 printf 的古老系统而言）的解决方案显然是

```
echo
echo "$number_of_specs ${units}, $number_of_specs_failed failed" 
```

# node.js - 节点未启动

> ID：11530206
> 
> 赞同：0
> 
> 时间：2012-07-17T20:16:59.490
> 
> 标签：node.js, ubuntu, installation, ubuntu-12.04

我正在拼命尝试让 node.js 在 Ubuntu 12.04 LTS 上再次运行。

我在 2-3 周前安装了它，一切都很顺利，在那段时间里我每天都在使用它。

但是今天，突然它就不再起作用了。它的错误方式真的很奇怪：

*   `node -v`工作并返回 v0.8.2
*   该`node`命令也有效，我可以访问控制台并执行`console.log`
*   但是当我将 node 与这样的文件一起使用时`node server.js`，Ubuntu 只是换了一个新行：

> kollektiv@kollektiv-PC:~/node-projects$ node server.js
> 
> kollektiv@kollektiv-PC:~/node-projects$

今天晚上我已经重新安装了 Ubuntu，但我得到了相同的结果。

我还做了多个`apt-get upgrade`，`apt-get update`以防某些 node.js 依赖项会过时。

我安装 node.js 的方式是按照本教程编译源代码： --> [Compiling Node.js from source on Ubuntu 10.24 - shapeshed](http://shapeshed.com/compiling-nodejs-from-source-on-ubuntu-10-04/)

为了确定，我什`chmod 777 server.js`至在服务器文件上做了一个，但这也没有改变任何东西。

非常感谢您的帮助！

编辑： server.js 的内容

```
var net = require('net'),
    server = net.createServer();
var crypto = require('crypto'),
    shasum = crypto.createHash('sha256');

var alpha = [],
    i = 0,
    cle = '';
while(i < 256) {
    alpha.push(String.fromCharCode(i));
    i++;
}

// CRYPTAGE -- START --

function cryptProcess(cle, txt) {
    var k = txt.length,
        j = k / cle.length,
        cledeBase = cle,
        txtc = '',
        i = 1;
    while(i < j) {
        cle = cle + cledeBase;
        i++;
    }
    function crypt(cleu, letr) {
        //if(alpha.indexOf(letr) == -1) return "§";
        var biIndex = alpha.indexOf(letr) + alpha.indexOf(cleu), x;
            sumIndex = biIndex - alpha.length;
        x = sumIndex >= 0 ? alpha[sumIndex] : alpha[biIndex];
        return x;
    }
    while(k--) {
        txtc = crypt(cle[k], txt[k]) + txtc;
    }
    return txtc;
}

function decryptProcess(cle, txtc) {
    var k = txtc.length,
        j = k / cle.length,
        cledeBase = cle,
        txt = '',
        i = 1;
    while(i < j) {
        cle = cle + cledeBase;
        i++;
    }
    txt = '';
    function decrypt(cleu, letc) {
        //if(alpha.indexOf(letc) == -1) return "§";
        var biIndex = letc - alpha.indexOf(cleu), x;
        x = biIndex >= 0 ? alpha[biIndex] : alpha[biIndex + alphabet.length];
        return x;
    }
    while(k--) {
        txt = decrypt(cle[k], txtc[k]) + txt;
    }
    return txt;
}

// CRYPTAGE -- END --

server.on('connection', function(client) {

    var connecOne = 0;

    function talk(data) {
        var msg = data.toString('utf8');
        var msgEnc = cryptProcess(cle, msg);

        client.write(msgEnc);
        console.log(msg + '\nsend as\n' + msgEnc);
    }

    client.once('data', function(data) {

        function triHandShake() {

        }

    });

    client.on('data', function(data) {

        var msg = data.toString('utf8');
        if(connecOne === 0) {
            connectionOne(msg);
            connecOne++;
        }
        else if(connecOne === 1) {
            // Check for paragraph symbol
            //authentification with cookie as cle
        }

        var msgDec = decryptProcess(cle, msg);
        console.log(msgDec + '\nreiceved as\n' + msgDec);

    });

    client.on('end', function() {
        connecOne = 0;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:37:14.140

您需要调用[server.listen](http://nodejs.org/api/net.html#net_net_createserver_options_connectionlistener)来监听连接并按预期启动进程。

```
server.listen(8124, function() { //'listening' listener
  console.log('server bound');
}); 
```

# javascript - 无法中断 jquery.validate 回调

> ID：11530208
> 
> 赞同：1
> 
> 时间：2012-07-17T20:17:17.010
> 
> 标签：javascript, jquery, debugging, jquery-validate, firebug

我正在使用 Firefox/Firebug，试图通过一些 jquery.validate() 回调。

为什么`// Breakpoint`单击提交按钮后不会触发以下行上的断点？

```
<!DOCTYPE html>
<head>
    <script type="text/javascript" src="/library/scripts/lib/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.validate.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.validate.unobtrusive.js"></script>
</head>
<body>
    <form action="/" method="post">
    <input data-val="true" data-val-required="This is required" id="BirthDate" 
           name="BirthDate" type="text" value="" />
    <span class="field-validation-valid" data-valmsg-for="BirthDate" 
          data-valmsg-replace="true"></span>
    <p>
        <input type="submit" /></p>
    </form>
    <script type="text/javascript">
        $(document).ready(function () {
            $('form').validate({
                debug: true,
                submitHandler: function () {
                    alert("Submitted!") // Breakpoint
                },
                invalidHandler: function (form, validator) {
                    alert("Invalid!") // Breakpoint
                }
            })
        });
    </script>
</body>
</html> 
```

**更新**

实际上，似乎没有任何 validate() 选项生效。例如，我已经添加`debug: true`到上面的示例中，并且根据文档，它应该阻止提交表单，并且它仍在提交表单。也没有任何警报被触发。

但是，我已经确认 validate() 函数被调用了，因为我可以逐步完成它——只是回调函数不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:18:40.867

[不幸的是， jquery.validate() 选项在与不显眼的验证结合使用时](https://stackoverflow.com/a/8036546/213902)似乎不起作用。从我的文件中删除该引用可以解决问题，但当然会破坏我不显眼的验证。

所以我最终使用[了另一种解决方案](https://stackoverflow.com/a/7716147/213902)来挂钩验证事件。

# r - 在 R 中，从列表中提取对象的一部分

> ID：11530217
> 
> 赞同：17
> 
> 时间：2012-07-17T20:17:44.063
> 
> 标签：r

我只是在学习 R 并且很难思考如何从列表中的对象中提取元素。我已经将一个 json 文件解析为 R 给我列表对象。但我不知道如何从那里提取列表中的各种 json 元素。这是解析 json 后我的数据如何显示的截断视图：

```
 > #Parse data into R objects#
 > list.Json= fromJSON(,final.name, method = "C")
 > head(listJson,6)
[[1]]
[[1]]$contributors
NULL

[[1]]$favorited
[1] FALSE

...[truncating]...
[[5]]
[[5]]$contributors
NULL

[[5]]$favorited
[1] FALSE 
```

我可以弄清楚如何为列表中的一个对象提取收藏夹数据

```
> first.object=listJson[1]
> ff=first.object[[1]]$favorited
> ff
[1] FALSE 
```

但是我很困惑如何为列表中的所有对象提取收藏夹。我仔细研究了一下，这是正确的方法吗？我是否需要将上述代码放入 for...next 循环中？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-17T20:23:04.077

`sapply`将对列表中的每个元素应用一些功能。在您的情况下，您希望访问（嵌套）列表中的每个元素。`sapply`肯定有这个能力。例如，如果您想访问列表中每个元素的第一个子元素：

```
sapply(listJson, "[[", 1) 
```

或者，如果您想访问名为“收藏”的项目，您可以使用：

```
sapply(listJson, "[[", "favorited") 
```

请注意，`[`运算符将获取您正在使用的列表的子集。因此，当您访问 时`myList[1]`，您仍然有一个列表，它的长度仅为 1。但是，如果您引用`myList[[1]]`，您将获得列表中第一个空格的*内容*（可能是也可能不是另一个列表）。因此，您将`[[`在 sapply 中使用运算符，因为您想深入了解列表的内容。

# wpf - Avalon Dock v2 布局问题

> ID：11530219
> 
> 赞同：0
> 
> 时间：2012-07-17T20:17:46.187
> 
> 标签：wpf, avalondock

我目前正在使用 avalon dock v2，在我的文档源模板中，我还放入了一个对接管理器。

是的，对于我的每个文档，我都想要其中的可锚定窗格。但是当我尝试这样做时，它不起作用，它只显示每个文档的停靠管理器的 toString，有没有办法解决这个问题。

另外，我如何默认停靠我的可锚定对象？

谢谢和问候， Kev84

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:17:49.127

在为 AvalonDock 的 LayoutDocument（通过 LayoutDocumentControl）创建模板时，我也遇到了类似的问题。解决方案是将 ContentPresenter 的 ContentSource 设置为指向我的控件的 Model 属性。下面的代码说明了这一点：

```
<!--The LayoutDocument is templated via the LayoutDocumentControl-->
        <Style TargetType="{x:Type ad:LayoutDocumentControl}">
            <Style.Setters>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ad:LayoutDocumentControl}">
                            <ScrollViewer
                                        Background="AliceBlue"
                                        HorizontalScrollBarVisibility="Auto"  VerticalScrollBarVisibility="Auto" SnapsToDevicePixels="True">
                                <!--Make sure that the ContentSource points the Model Property of the Control-->
                                <ContentPresenter
                                        Content="{Binding Path=Content, UpdateSourceTrigger=PropertyChanged}"
                                        ContentSource="{Binding Path=Model, UpdateSourceTrigger=PropertyChanged}"
                                        />
                            </ScrollViewer>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style.Setters>
        </Style> 
```

类似的方法应该适用于您的情况。这只是一个诱人的答案（因为我也是 AvalonDock 2.0 的新手），但它可能值得一试。

健康长寿·繁荣昌盛！

# python - Python 2.4.4 不断的类型错误

> ID：11530223
> 
> 赞同：0
> 
> 时间：2012-07-17T20:17:55.263
> 
> 标签：python, typeerror

我使用python 2.4.4，由于某种原因，当我尝试打开日志文件进行写入时，它不断抛出类型错误......这是有问题的函数......

```
import os
def write(inlog, outlog):
  # parse the logs and save them to our own...
  parsed = NTttcpParse(inlog)
  debug("PARSED")
  debug(parsed)
  if os.path.exists(outlog):
    fh = os.open(outlog, os.O_WRONLY | os.O_APPEND)
    debug("Opened '%s' for writing (%d)" % (outlog, fh))
  else:
    fh = os.open(outlog, os.O_WRONLY | os.O_CREAT)
    debug("Created '%s' for writing (%d)" % (outlog, fh))
  debug("type(fh) = %s" % type(fh))
  os.write(fh, LOGFORMAT % parsed)
  os.close(fh) 
```

这是令人抓狂的错误......

```
TypeError: int argument required 
```

请帮助...并提前感谢：P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T20:23:35.837

您正在以一种奇怪的方式进行文件 I/O。这是执行此操作的方法：

```
f = open(outlog, "w")
f.write("some data written to file\n")
f.close() 
```

如果要追加，请`open(outlog, "a")`改用。如果您想阅读，请使用`open(outlog, "r")`. 另请阅读[Python 教程](http://docs.python.org/tutorial/)，其中解释了类似的基本文件 I/O 操作。

请注意，在 Python 2.5 及更高版本中，您可以使用以下`with`语句：

```
with open(outlog, "w") as f:
    f.write("some data written to file\n") 
```

（在我注意到您说您使用的是 2.4 之前，我最初将此作为主要答案发布。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:33:43.360

哎呀，我犯了一个简单的错误——我没有在解析的元组中输入足够的项目^_^不过感谢您的回答！

# shell - 通过拆分行来运行 awk

> ID：11530230
> 
> 赞同：5
> 
> 时间：2012-07-17T20:18:19.697
> 
> 标签：shell, awk

这是 awk 中的一个基本问题。但我在这方面面临问题，我不知道为什么。问题是当我在一行中运行 awk 命令时，例如

```
awk 'BEGIN {} {print $0;}' FILE 
```

然后代码完美运行

但是，如果我在行之间拆分代码，例如

```
 awk '
 BEGIN
 {
 }
 {
      print $0;
 }' FILE 
```

它给了我一个错误，指出**BEGIN 应该有一个动作部分**。我想知道，因为它与我正在格式化的代码相同，为什么会出现此错误。解决这个问题对我来说真的很重要，因为我会在 awk 中编写大行代码，我很难每次都格式化并把它放在一行中。你能帮我解决这个问题吗？谢谢你。笔记。我在 shell 环境中运行这个 awk

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T20:19:31.083

添加`'{' right after the`BEGIN`，您将*不会*收到错误消息。

的开头括号`{`需要作为. 所以改变你所拥有的`BEGIN``same``BEGIN`

```
awk '
 BEGIN
 { 
```

到

```
awk '
 BEGIN { 
```

并且您不会收到错误消息。

该[手册](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_52.html)确实声明“BEGIN 和 END 规则必须有操作；”，所以这可能是另一个问题。这

```
awk 'BEGIN {} ... 
```

对我来说似乎有点奇怪（如果什么都没发生，真的*没有*理由这样做）

@Birei 下面的有用评论解释说，这些语句“解析的方式在两种情况下都会有所不同。`'{'`下一行中的 open 被解析为没有模式的操作（与 BEGIN 无关），而在同一行中表示开始规则。”

# html - 如何将 HTML 表格宽度限制为屏幕宽度的 95%？

> ID：11530233
> 
> 赞同：6
> 
> 时间：2012-07-17T20:18:23.010
> 
> 标签：html, css, width, css-tables

如何将 HTML 表格宽度限制为屏幕宽度的 95%？

我正在使用

```
<style type="text/css">
table {
  max-width:95%;
  border-collapse:collapse;
  ...
}
... 
```

但生成的 HTML 页面的表格比屏幕宽度（1440x900 屏幕）更宽，并且页面底部出现滚动条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T20:26:33.497

使用样式

```
width: 95%; 
```

反而。另外，根据您的意图，考虑风格

```
width: 100%;
margin-left: 10px;
margin-right: 10px; 
```

为了更好的布局。我只是在这里猜测，但将桌子和窗边之间的距离设为固定距离似乎是个好主意。否则，当您调整大小时，边距将动态更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T20:21:53.967

max-width 不能应用于表格标签。改用宽度。

```
<table>
<tr>
    <td>test</td>
</tr>
</table>​

table {
  width:95%;
  border-collapse:collapse;
}

td {background:red;} 
```

[http://jsfiddle.net/2wH8S/](http://jsfiddle.net/2wH8S/)

有一些解决方法可以应用最大宽度效果，在“css table max-width”上做一个谷歌。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T20:58:32.543

添加到 Konrad Viltersten，我会将宽度设置为 95%，但不是使用 10 像素左右的边距，而是使用：

```
margin-left: 2.5%;
margin-right: 2.5%; 
```

这应该可以消除调整浏览器窗口大小时的任何定位问题。

# tsql - 带有“IN”子句的变量的 T-SQL 用法

> ID：11530235
> 
> 赞同：0
> 
> 时间：2012-07-17T20:18:33.217
> 
> 标签：tsql

在我们公司，大多数SP都使用以下逻辑。我无法理解变量如何与 IN 子句一起使用，如下面的查询。谁能解释一下？

```
WHERE ( ( @EMP_ID ) in ( select distinct(EMP_ID) 
from Table2(nolock) 
where SID = T1.SID and status='A' and client_id=T1.Client_Id ) ) 
order by EMP_ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:41:50.563

变量在查询中被简单地替换。如果有帮助，请分解查询并考虑是否为变量输入一个数字（例如，45）和一个列表来代替内部查询：

```
SELECT *
FROM Table
WHERE 45 IN (42, 46, 47, 90, 45) 
```

这将返回包含员工 ID 为 45 的行。

这有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:42:15.293

回答你的问题：是的，有人可以解释一下。可能不是我。

从 中获取值`SELECT`的集合。然后第一个子句检查变量的值是否**在**所选值的集合中。如果是这样，则该子句会导致其父语句处理该行。`EMP_ID``Table2``WHERE``@EMP_ID`**`WHERE`**

 **这`SELECT`是一个相关的子查询。它使用表中的几个值`SID`和`Client_Id`（别名为）`T1`。（所述表不包含在您的代码片段中。）对从`T1`相关子查询处理的每一行进行评估。**

# javascript - window.outerWidth VS $(window).outerWidth()

> ID：11530237
> 
> 赞同：3
> 
> 时间：2012-07-17T20:18:34.877
> 
> 标签：javascript, jquery

我只是好奇和之间有什么区别`window.outerWidth`，`$(window).outerWidth()`如果有的话。

我在谷歌上找不到太多关于这个的信息，所以我想我会吸引大众。这只是一个普遍的问题，而不是一个具体的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T20:23:39.053

[Jquery的outerWidth](http://jqapi.com/#p=outerWidth)：

> 返回元素的宽度，以及左右填充、边框和可选的边距，以像素为单位。
> 
> 如果 includeMargin 被省略或为 false，则填充和边框都包含在计算中；如果为真，则还包括边距。
> 
> **此方法不适用于窗口**和文档对象；对于这些，请改用 .width() 。

[window.outerWidth](https://developer.mozilla.org/en/DOM/window.outerWidth)：

> window.outerWidth 获取浏览器窗口外部的宽度。它表示整个浏览器窗口的宽度，包括侧边栏（如果展开）、窗口镶边和窗口大小调整边框/句柄。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:25:29.587

来自 jQuery 文档（http://api.jquery.com/outerWidth/）：

> 此方法不适用于窗口和文档对象；对于这些，请改用 .width() 。

所以，你应该使用**$(window).width()**，它返回：

> “浏览器视口的宽度”（因此没有窗口边框和其他东西）

**window.outerWidth**返回整个窗口宽度（带有边框和其他内容）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:24:01.547

正如您在[jQuery 文档](http://api.jquery.com/outerWidth/)中所读到的：

> 此方法不适用于窗口和文档对象；对于这些，请[`.width()`](http://api.jquery.com/width)改用。

在[`window.outerWidth`](https://developer.mozilla.org/en/DOM/window.outerWidth)获取浏览器窗口外部的宽度时，jQuery 的方法在-selecting jQuery 实例[`.width()`](http://api.jquery.com/width)上调用时确实返回浏览器视口的宽度。`window`为此，它调用了一组子函数和钩子（参见[源代码](https://github.com/jquery/jquery/blob/master/src/dimensions.js)）以实现跨浏览器兼容（但速度要慢得多）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T20:26:52.313

至于细节`outerWidth`： [jQuery 的实现](http://api.jquery.com/outerWidth/)允许您选择是否要在测量中包含边距。 [Javascript](http://help.dottoro.com/ljjrmtvx.php)只是获取数字。我不知道它是否包括保证金。

jQuery is just a bunch of fancy JavaScript. In fact, you can implement anything jQuery does yourself using only JavaScript (and I'd encourage you to do so)! I'd encourage you to read questions like [this one](https://stackoverflow.com/questions/2340412/jquery-vs-javascript).

# casting - 从 aq 对象转换为字符串

> ID：11530239
> 
> 赞同：2
> 
> 时间：2012-07-17T20:18:46.110
> 
> 标签：casting, tostring, kdb

我在将 aq 查询返回的对象转换为字符串时遇到了一些问题。我正在使用 c.java 有人有任何示例代码可以做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:51:29.567

c.java 中没有提供任何内容。您需要编写递归对象打印机或类似的东西。Studio for KDB+ 有一些这样的功能。

好的开始点将是[https://github.com/CharlesSkelton/studio/blob/master/src/studio/kdb/K.java](https://github.com/CharlesSkelton/studio/blob/master/src/studio/kdb/K.java)

# android - ActionbarSherlock 选项卡导航

> ID：11530240
> 
> 赞同：0
> 
> 时间：2012-07-17T20:18:47.887
> 
> 标签：android, actionbarsherlock

您好，我在我的项目中使用 actionbarsherlock，我希望使用操作栏中的选项卡式导航将两个地图视图分隔为选项卡。有没有不使用片段的解决方法？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:43:45.070

也许这可以帮助？

```
 ActionBar.Tab tab = getSupportActionBar().newTab();
 getSupportActionBar().addTab(tab); 
```

来自 Jake Wharton 的演示之一：[TabNavigation](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/TabNavigation.java)。[（您可以在此处](https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples/demos/src/com/actionbarsherlock/sample/demos)查看所有演示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:39:37.627

如果您愿意，本教程将帮助您创建两个具有两个不同`MapView`s 的选项卡：

[http://blog.xavirigau.com/?p=39](http://blog.xavirigau.com/?p=39)

# r - 使用列向量索引多维表

> ID：11530241
> 
> 赞同：6
> 
> 时间：2012-07-17T20:18:58.213
> 
> 标签：r

我有不同大小的列联表。我想使用数据集中的一组值对它们进行索引。但是， `myTable[c(5,5,5,5)]`显然没有做我想要的。我如何`c(5,5,5,5)`阅读为`myTable[5,5,5,5]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:12:53.383

跟进@ttmaccer 的回答：之所以有效，是因为其中的（稍微）晦涩的段落`?"["`如下：

```
When indexing arrays by ‘[’ a single argument ‘i’ can be a
matrix with as many columns as there are dimensions of ‘x’;
the result is then a vector with elements corresponding to
the sets of indices in each row of ‘i’. 
```

使用`t(ii)`中的效果

```
ii <- c(5,5,5,5)
a[t(ii)] 
```

是转换`ii`为一个 1x4 矩阵，`[`解释为如上所述的矩阵；`a[matrix(ii,nrow=1)]`会更明确但不那么紧凑。

这种方法的好处（除了避免看起来很神奇的方面`do.call`）是它可以并行工作于一组以上的索引，如

```
jj <- matrix(c(5,5,5,5,
               6,6,6,6),byrow=TRUE,nrow=2)
a[jj]
## [1] 4445 5556 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:44:21.720

如果我正确理解了您的问题，那么使用 的这个构造`do.call()`应该可以满足您的要求：

```
## Create an example array and a variable containing the desired index
a <- array(1:1e4, dim = c(10, 10, 10, 10))
ii <- c(5, 5, 5, 5)

## Use do.call to extract the desired element.
do.call("[", c(list(a), ii))
# [1] 4445 
```

上面的调用有效，因为以下都是等价的：

```
a[5, 5, 5, 5]
`[`(a, 5, 5, 5, 5)
do.call("[", list(a, 5, 5, 5, 5))
do.call("[", c(list(a), ii)) 
```

# python - 在 MySQL 中查询海量数据

> ID：11530243
> 
> 赞同：0
> 
> 时间：2012-07-17T20:19:00.993
> 
> 标签：python, mysql

我正在从我的服务器检索所有传入的用户 IP 地址，我已经检索了这些地址并将它们写入一个文件。我还从文件中过滤了 IP 地址并将它们检索到变量 ip。但是，当我无法将 ip 地址上传到 mysql 数据库时。

到目前为止，我有这个，但它不起作用。

```
with open("netstat.txt", 'rb') as f:
    for row in f.readlines()[1:]:
        columns = row.split()
        if len(columns) > 2:
            ip = row.split()[1]
            user = row.split()[2]
            ip = ip.strip('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ')
            con = mdb.connect('server', 'user', 'pass', 'db');

            with con:
                cur = con.cursor()
                cur.executemany("INSERT INTO Juliet_Data(ip,user) VALUES,(%s,%s)" % ip,user) 
```

我将表格设置为以下内容：

```
user = longtext
ip = blob 
```

给出的错误：

```
 Traceback (most recent call last):
   File "C:\Documents and Settings\finance\Desktop\Server 
Monitoring\System Load Tracker\User Tracking\netstat.py", line 32, in 
<module>
     cur.execute("INSERT INTO Juliet_Data(ip) VALUES,(%s)" % ip)
   File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 174, in 
execute
     self.errorhandler(self, exc, value)
   File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 36, 
in defaulterrorhandler
     raise errorclass, errorvalue
_mysql_exceptions.ProgrammingError: (1064, "You have an error in your 
SQL syntax; check the manual that corresponds to your MySQL server 
version for the right syntax to use near '()' at line 1") 
```

示例 IP 地址仅查看 IP 和用户：

```
 0.0.0.0:22             newjulietleft:0        LISTENING
   TCP    0.0.0.0:135            newjulietleft:0        LISTENING
   TCP    0.0.0.0:445            newjulietleft:0        LISTENING
   TCP    0.0.0.0:1311           newjulietleft:0        LISTENING
   TCP    0.0.0.0:3306           newjulietleft:0        LISTENING
   TCP    0.0.0.0:3389           newjulietleft:0        LISTENING
   TCP    0.0.0.0:5800           newjulietleft:0        LISTENING
   TCP    0.0.0.0:5900           newjulietleft:0        LISTENING
   TCP    0.0.0.0:47001          newjulietleft:0        LISTENING
   TCP    0.0.0.0:49152          newjulietleft:0        LISTENING
   TCP    0.0.0.0:49153          newjulietleft:0        LISTENING
   TCP    0.0.0.0:49154          newjulietleft:0        LISTENING
   TCP    0.0.0.0:49158          newjulietleft:0        LISTENING
   TCP    0.0.0.0:49170          newjulietleft:0        LISTENING
   TCP    10.22.22.22:139        newjulietleft:0        LISTENING
   TCP    10.22.22.22:3389       gregk:17415            ESTABLISHED
   TCP    10.22.22.22:49156      superman:microsoft-ds  ESTABLISHED
   TCP    10.22.22.22:49160      juliet:microsoft-ds    ESTABLISHED
   TCP    10.22.22.22:49164      pong:microsoft-ds      ESTABLISHED
   TCP    10.22.22.22:49165      ftpserve:microsoft-ds  ESTABLISHED
   TCP    10.22.22.22:50376      dbmlog:3306            ESTABLISHED
   TCP    10.22.22.22:50377      hulk:microsoft-ds      ESTABLISHED
   TCP    10.22.22.22:50383      julietz:netbios-ssn    TIME_WAIT
   TCP    10.22.22.22:50384 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:24:29.137

`,`之后的`VALUES,`无效

当您收到语法错误时，您只需要查看错误指向的位置。此错误可能会令人困惑，因为它不会在脚本中为您提供该行，而是在您执行的第一个 statmeent 中的 mysql 中，这是您的插入语句。

对于您评论中的第二个问题：

您应该使用参数化，例如：

`VALUES (?, ?), (ip, user)`

应该管用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T02:04:45.770

```
cur.executemany("INSERT INTO Julient_Data (ip,user) VALUES (%s,%s)", ((ip, user),)) 

cur.executemany("INSERT INTO Julient_Data (ip,user) VALUES (%s,%s)", ((ip, user),('192.168.1.1', 'test1'))) 
```

# css - 标题的 CSS 对齐问题

> ID：11530253
> 
> 赞同：0
> 
> 时间：2012-07-17T20:19:23.643
> 
> 标签：css

我是 CSS 的新手，并为我的测试创建了这个 html 文件......但结果不是我所期望的......

以下是我的问题，

1.  我的 IE 窗口的正确宽度是多少。
2.  我的窗口的完美高度是多少……当我指定一个值时，没有任何变化。
3.  我已经创建了 3 个部门——页眉、页脚和内容。当我查看它时……每个部分之间都有很大的空间……为什么会出现？

代码如下：

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            body
            {
                background-color:#d0e4fe;
                width:1400px;
                height:1000px;
            }

            h1
            {
                color:orange;
                text-align:center;
            }

            #div-1
            {
                background-color:red;
            }
            #div-2
            {
                background-color:Green;
            }
            #div-3
            {
                background-color:Blue;
            }

        </style>

    </head>

    <body>

        <div id="div-1">
            <h1>Header<h1>
        </div>

        <div id="div-2">
            <h1>Content<h1>
        </div>

        <div id="div-3">
            <h1>Footer<h1>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:27:10.423

1.  身体标签上的宽度应设置为“宽度：100%；” 这将导致 body 标签占据窗口的整个宽度，并且您的彩色 div 部分也将拉伸整个宽度。
2.  您可以将 body 标签上的高度设置为“height: 100%;” 或“高度：自动；”。取决于你在做什么。
3.  该空间来自您在每个 div 中的 h1 标签。他们设置了浏览器默认的边距。如果将 css 属性设置为“margin: 0px”，则应该消除所有多余的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:26:18.653

首先，您没有在 CSS 中定义窗口的宽度或高度。它只是不会发生。您可以指定页面上特定元素的宽度，但这是一个稍微不同的问题。删除您的`height`和`width`属性。

`h1`其次，由于标签上设置的默认边距，您的部门之间有空格。如果要删除它们，`margin: 0`请`h1`在 CSS 中设置。

[第三，您可能想在 HTMLDog](http://www.htmldog.com/guides/cssbeginner/)上查看这个 CSS 教程

# php - 选择从用户 2 中阻止用户 1（反之亦然）

> ID：11530256
> 
> 赞同：3
> 
> 时间：2012-07-17T20:19:33.177
> 
> 标签：php, mysql, sql, profile, blocking

我偶然发现了我的用户对用户阻止功能的问题。

我不知道如何写我`SELECT`的以获得正确的结果。当 User1 阻止 user2 时，两个用户都看不到彼此的个人资料，但是当我登录时，我可以看到自己的帐户。我正在使用开关来执行此操作。

我的`BLOCK`表由`ID`、`USER1_ID`和`USER2_ID`组成`STATUS`。`0`被“可见”和`1`“被阻止”。

函数.user

```
public function check_block($user1_id,$user2_id){ 
    $check_sql= "SELECT ......"; 
    $check_query = mysql_query($check_sql)or die(mysql_error()); 
    $check_num = mysql_num_rows($check_query); 
    if($check_num>0){ 
        $block = mysql_fetch_array($check_query); 
        return $block['status']; 
    }else{ 
        return $check_num; 
    } 
} 
```

转变

```
<? 
    $user1_id=$_SESSION['id'];
    $user2_id=$data['id'];
    $userblock = function_user_core::check_block($user1_id,$user2_id);
    switch($userblock){
        case 1:
            echo'You Are Blocked From Viewing This Users Profile';
            break;
    }
?> 
```

用户配置文件中的字段被阻止

```
<? if($userblock==1) { ?> 
    THIS USER HAS BLOCKED YOU FROM THEIR ACCOUNT
<? } ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T20:38:30.763

看起来您正在询问示例查询。

看起来您需要一个查询来测试`block`表中是否存在`status`针对给定用户对设置为“阻塞”(1) 的行。从您问题的措辞看来， user_id 值的顺序似乎无关紧要。'foo' 阻止 'bar' 或 'bar' 阻止 'foo' 或两者都没有关系（对于此查询）。看起来您的代码在所有这些情况下都将执行相同的确切路径。（如果我正确理解了您的问题。）

这个查询应该得到：

```
SELECT b.status
  FROM block b
 WHERE ( b.status = 1 AND b.user1_id = 'foo' AND b.user2_id = 'bar' )
    OR ( b.status = 1 AND b.user1_id = 'bar' AND b.user2_id = 'foo' )
 LIMIT 1 
```

注意：此查询不考虑用户阻止自己的极端情况。有关也处理该条件的查询，请参见下文。

我在示例查询中使用了文字 'foo' 和 'bar'，您当然可以在其中替换 SQL 文本中的（正确转义的）变量。

对于此检查查询，它只需要在找到指定给定用户对被“阻止”的行时返回一行。否则，查询不需要返回任何行。使用此查询，您的代码实际上可以更简单一些。使用此查询，您可以简单地从 mysql_num_rows 返回值。

也就是说，您可以替换此块：

```
$check_num = mysql_num_rows($check_query); 
if($check_num>0){ 
    $block = mysql_fetch_array($check_query); 
    return $block['status']; 
}else{ 
    return $check_num; 
} 
```

有了这个：

```
$check_num = mysql_num_rows($check_query); 
return $check_num; 
```

* * *

上面的查询没有考虑（不寻常的？）极端情况，即用户屏蔽了自己。

如果表包含这样的行：

```
('foo','foo',1) 
```

并且您将 'foo' 和 'foo' 的值作为 user_1 和 user_2 传递，上面的查询将返回一行。但是您指定用户应该始终能够查看他们自己的个人资料。

因此，如果您想忽略任何指定用户从他自己的个人资料中“阻止”自己的条件的行，您可以在查询中添加另一个谓词，以简单地忽略 user_id 值匹配的任何行：

```
SELECT 1 AS `status`
  FROM block b
 WHERE b.user1_id <> b.user2_id
   AND b.status = 1
   AND (  ( b.user1_id = 'foo' AND b.user2_id = 'bar' )
       OR ( b.user2_id = 'foo' AND b.user1_id = 'bar' )
       )
 LIMIT 1 
```

另请注意，如果表中存在冲突行，即一个原始数据表示用户对被“阻止”，而另一行表示该对未被阻止，则“阻止”状态将优先。

请注意，我们甚至不需要返回`status`列，我们可以返回一个文字值（使用适当的别名来提供您的代码所期望的结果集元数据。）

看起来您的代码没有任何问题，尽管我可能会对其进行一些不同的编码。重要的是它是可以理解的，并且有效。

* * *

**更新：**

对不起，它不适合你。这是我提供的查询的 SQL Fiddle 演示。
[http://sqlfiddle.com/#!2/21120/2](http://sqlfiddle.com/#!2/21120/2)

我很可能误解了您试图通过查询完成的任务。我的查询实现的是，如果

*   'foo' 阻止 'bar' 或
*   'bar' 阻止 'foo' 或
*   都互相阻挡

然后当传入`('foo','bar')`or的参数时`('bar','foo')`（以任意顺序），查询返回状态 = 1 的行。

否则，即如果两个用户都没有“阻止”另一个用户，则查询不返回任何行。

It's important in the query that each of the two supplied "user_id" parameters be supplied twice, in the correct positions. (It's possible to rewrite the query so that each of the arguments only need to be supplied once, but that query isn't as easy (for me) to understand.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T20:28:59.277

我相信这就是你要找的

```
SELECT `STATUS` FROM `BLOCK` WHERE `USER1_ID`=X AND `USER2_ID`=Y; 
```

功能将是

```
public function check_block($user1_id,$user2_id){ 
    $check_sql= "SELECT `STATUS` FROM `BLOCK` WHERE `USER1_ID`=$user1_id AND `USER2_ID`=$user2_id;"; 
    $check_query = mysql_query($check_sql)or die(mysql_error()); 
    $check_num = mysql_num_rows($check_query); 
    if($check_num>0){ 
        $block = mysql_fetch_assoc($check_query); 
        return (int)$block['status']; 
    }else{ 
        return $check_num; 
    } 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T20:35:10.927

与其他答案类似

```
public function check_block($user1_id,$user2_id){ 
    $check_sql= "SELECT * FROM BLOCK WHERE USER1_ID = '$user1_id' AND USER2_ID = '$user2_id'  AND STATUS = 1"; 
    $check_query = mysql_query($check_sql)or die(mysql_error()); 
    $check_num = mysql_num_rows($check_query); 
    return $check_num;
} 
```

但我认为您的问题不在于您如何构建查询。它位于`Switch`; 由于您希望 user1 检查 user2 是否阻止了 user1，因此您需要反转传递给函数的变量的顺序。

```
<?php 
    $user1_id=$_SESSION['id'];
    $user2_id=$data['id'];
    $userblock = function_user_core::check_block($user2_id, $user1_id);
    switch($userblock){
        case 1:
            echo'You Are Blocked From Viewing This Users Profile';
            break;
    }
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T20:26:05.360

尝试：

```
public function check_block($user1_id,$user2_id) { 
    $check_sql= "SELECT STATUS FROM BLOCK WHERE USER1_ID = '" . mysql_real_escape_string($user1_id) . "' AND USER2_ID = '" . mysql_real_escape_string($user2_id) . "'"; 
    $check_query = mysql_query($check_sql)or die(mysql_error()); 
    $check_num = mysql_num_rows($check_query); 
    if ($check_num>0) { 
        $block = mysql_fetch_array($check_query); 
        return $block['STATUS']; 
    } else { 
        return $check_num; 
    } 
} 
```

享受和好运！

# java - 如何检测文本块

> ID：11530257
> 
> 赞同：3
> 
> 时间：2012-07-17T20:19:40.193
> 
> 标签：java, block, lolcode

是否可以在两个标记之间获取文本块？我正在尝试编写我的 LOLCODE 版本并且我想做 if 语句 - 然后我遇到了这个问题。

基本的事情是，我想这样做：

```
IS #DIR = 5
    YUP
 -if statement suceeded, execute code here-
    NOPE
 -if statement returned false, execute code here
BYE 
```

说明：此代码应检查变量#DIR 是否等于 5，如果是，则在 YUP 块中执行代码，如果不是 - 在 NOPE 块中执行代码。

我的问题是：如何从文本文件中读取并使用 java 执行正确的代码块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:24:28.420

试试这样的正则表达式：

```
searchText.matches("^\\s*IS\\s+(#\\w+)\\s*=\\s*(\\w+)\\s*") 
```

此表达式仅计算第一行“IS #DIR = 5”，但您可以完成它只是这样做的想法；）

编辑：如果内部代码块是Java，也许这个链接可以帮助你：[动态代码执行](https://stackoverflow.com/questions/4166135/dynamic-code-execution)

# c# - 对象数组与对象属性数组 - 哪个更有效？

> ID：11530261
> 
> 赞同：1
> 
> 时间：2012-07-17T20:19:56.270
> 
> 标签：c#, arrays, class, object

哪个更快并且消耗更少的内存 - 具有一组属性的对象数组或对象的所有属性作为数组？

我正在制作一个 2d 瓦片游戏，世界由瓦片组成，所以我`Tile`为每个瓦片创建一个单独的类实例，有人说如果我使用瓦片的属性数组会更快。我想亲眼看看有什么不同，但此时游戏太复杂了，无法重写代码。

**更新：**我找到了一些时间来测试这两个选项，并且由于内存和 cpu 差异微不足道，对象数组更容易使用（代码可读性 + 调试简单性）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:25:01.843

这可能取决于您的数组创建和访问模式；但是，根据经验，我不认为这两种方法会有显着的性能差异。如果你真的认为这可能是一个性能问题，唯一可以确定的方法是实现两者，分析程序并比较结果。

拥有一个数组`Tile`可能会更简单，直接的代码，所以继续吧。如果您有实际的性能问题，请分析以查找代码中昂贵的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:24:15.467

从内存使用的角度来看，一组属性将消耗更少的内存。但从实际的角度来看，使用对象数组添加了一个抽象层，允许更轻松地调试和轻松修改代码以添加新属性的能力。

# cucumber - 如何在黄瓜的那部分添加动作？

> ID：11530262
> 
> 赞同：1
> 
> 时间：2012-07-17T20:19:56.420
> 
> 标签：cucumber

我是黄瓜的新手，我想知道如何测试以下场景：

*   未登录的用户点击我网站上的“购买”链接
*   带有登录名/密码的弹出窗口显示
*   用户填写登录名和密码字段，然后单击“登录”
*   页面重新加载
*   用户再次单击“购买”链接并查看包含订单详细信息的弹出窗口

我在定义“然后”部分时遇到问题，因为对我来说它应该是：

```
Then
  When I click "buy"
  I should see "order details" 
```

这可以用黄瓜吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:43:25.080

场景应该有一个单一的测试目标。对于您当前的场景，您有 2 个目标，因此最好编写 2 个场景：

1.  点击购买后登录的可能性
2.  单击购买后能够查看订单详细信息。

我不明白您为什么要使用 1 个场景来执行此操作。

* * *

也就是说，Cucumber 在步骤定义层不区分 Given、When 和 Then，所以你可以这样写：

```
Given ...
When ...
Then ...
When ...
Then ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:28:28.167

功能文件看起来像这样（简化）：

```
Feature: View Order Details
  As a user I can process an order

  Scenario: Process Online Order
    Given I am logged in
    When I click "buy"
    Then I should see the order details 
```

# ruby - 在 Ruby 中重命名脚本

> ID：11530263
> 
> 赞同：0
> 
> 时间：2012-07-17T20:20:00.317
> 
> 标签：ruby

我正在尝试编写我的第一个 Ruby 脚本，它将重命名特定文件夹中的文件。我的脚本基于此响应：[如何在 Ruby 中重命名文件？](https://stackoverflow.com/questions/5530479/how-to-rename-a-file-in-ruby). 但是，我需要帮助来详细说明一些事情。这是我目前写出的上述链接中的代码。

```
puts "Renaming files..."

folder_path = "/Desktop/untitled/"

Dir.glob( folder_path + "*" ).sort.each do |f|
  filename = File.basename(f, File.extname(f))
  File.rename( f, folder_path + filename.capitalize + File.extname(f))
end

puts "Renaming complete." 
```

通过这个示例，我了解到该脚本只是将原始文件的名称大写。但是，如果我想在文件名中插入一个段，我该怎么办。比如说我有：“这是我的名字。”

写出来。如果我只想专注于“我的名字”部分，我会怎么做，并将其更改为以下内容：

```
"This is my (first) name." 
```

另外，如果我想删除一个空格怎么办：

```
"This is myfirstname." 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:30:39.013

如果你想用其他东西替换文件名的一部分，你应该使用类的`sub`or`gsub`函数`String`：

`filename = File.basename(f, File.extname(f))`

现在在文件名中，您已经存储了一个`String`代表当前文件名的名称。如果你好奇，你可以使用类`instance_of?`的函数来检查它：`Object`

```
filename.instance_of?(String)
# -> true 
```

你应该做的是使用`gsub`方法来替换给定字符串的所有出现，或者`sub`只替换它的第一个。[在这里](http://ruby-doc.org/core-1.9.3/String.html)您可以找到使用这些功能的详细信息。

我想在你的情况下，这应该可以解决问题：

```
filename.gsub('my name', 'my (first) name')
# 2nd question:
filename.gsub("my first name", "myfirstname") 
```

`sub`此外，在和`gsub`方法中允许使用正则表达式。如果您想编写更复杂的模式，您应该尝试一下，例如从文件中删除所有数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:35:02.000

在 Ruby 中创建带有变量的字符串的一个好方法是：

```
first = "Eugene"
filename = "This is my #{first} name" 
```

文件名等于“这是我的尤金名字”

因此，对于您询问的文件部分：

```
"This is my #{folder_path}#{filename.gsub!(' ', '').capitalize}#{File.extname(f)}" 
```

可以使用 gsub 删除空格（查看字符串类文档[http://www.ruby-doc.org/core-1.9.3/String.html](http://www.ruby-doc.org/core-1.9.3/String.html)）：

```
filename.gsub(' ', '') 
```

您还可以使用 File classes join 方法将字符串连接到路径中，并避免使用斜线（'/' vs '\'）的跨平台问题。有关更多信息，请参见[http://www.ruby-doc.org/core-1.9。 3/File.html#method-c-join](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-join)

# c# - 将数据从 UserControl 传递到另一个

> ID：11530264
> 
> 赞同：1
> 
> 时间：2012-07-17T20:20:01.537
> 
> 标签：c#, winforms

我有一个表格和两个`UserControl`我自己制作的习惯。一个控件有一些按钮，每个按钮的`Tag`属性都设置为`PointF`. 我有另一个 UserControl，它有一个`ObservableCollection<PointF[]>`我设置它的事件处理程序来绘制线条，如果数据被添加到它。这很好用如果我把数据点放在它自己的类上……只要确保它有效。

不，我的问题是，将这两个控件放在一个表单中，如何设置第一个控件中按钮的单击事件，以将数据点添加到第二个控件？

在我的独奏中，这两个控件都在两个不同的项目中。并且这些控件显示的形式，也在不同的项目中（它是solution的启动项目）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:27:45.810

您可以在接收 PointF 数组的第二个用户控件上添加一个公共方法，然后在此方法中您可以将 PointF 添加到您的集合中。

编辑：处理第一个用户控件内的点击事件

在第一个用户控件中添加所需的事件和委托

```
public delegate void OnClickPointDataEvent(object sender, PointF[] data);
public event OnClickPointDataEvent ClickPointData; 
```

然后 form_load 事件订阅 usercontrol1 事件

```
uc1.ClickPointData += new UserControl1.OnClickPointDataEvent(form_subscribe_event);

private void form_subscribe_event(object sender, PointF[] data)
{
    uc2.SomePublicMethod(data);
} 
```

最后，在第一个用户控件按钮内单击调用处理表单内事件的代码

```
....
if(ClickPointData != null)
    ClickPointData(pointf_array);
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:41:27.720

将事件添加到第一个控件。

```
public event EventHandler<EventArgs> Control1ButtonClicked;
private void OnClicked()
{
    var handler = Control1ButtonClicked;
    if (handler != null)
    {
        handler(this, new EventArgs());
    }
}

private void Button1_Click(object sender, EventArgs e)
{
    OnClicked();     
} 
```

向第二个控件添加属性

```
public ObservableCollection<PointF[]> MyPoints{ get; set;}; 
```

然后在您的主应用程序中添加一个侦听器

```
userControl1.Control1ButtonClicked += new EventHandler<EventArgs>(userControl1_Control1ButtonClicked);

void userControl1_Control1ButtonClicked()
{
    //Do Something to control 2
    userControl2.MyPoints.Add() = //Whatever
} 
```

# javascript - 在父 div 元素鼠标悬停时更改图像源

> ID：11530265
> 
> 赞同：1
> 
> 时间：2012-07-17T20:20:02.640
> 
> 标签：javascript, jquery, css, mouseevent, mouseover

我有一个图像和翻转图像。使用 jQuery 或 CSS，我想在父 div（包含图像）上发生 onmousemove/onmouseout 事件时显示/隐藏翻转图像。

我该怎么做？

编辑：应要求在下面发布的 HTML。与问题无关，但作为仅供参考的 HTML 是建立在 30 列流体网格上的。

在顶部 div (row-fluid) 悬停时，图像 (image.png) 应更改为不同的源图像 (imagehover.png)。

```
<div class="row-fluid" style="padding-top:1em">
            <div class="span4">
              //Random content
            </div>
            <div class="span8 offset1">
              //Random content
            </div>
            <div class="span9 offset3">
              <ul>
                <li>//Random content</li>
                <li>//Random content</li>
                <li>//Random content</li>
             </ul>
            </div>
            <img src='../../images/image.png>
<div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T20:34:28.613

你想做这样的事情：`full_path_to_css parent:hover child`

```
full_path_to_css parent:hover child {
  styles for your item
} 
```

例如：

html（div.img 可以是任何东西）：

```
<div class="parent">
  <div class="img">
  </div>
</div>​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
div.​parent​ {
  width:200px;
  height:200px;
  background-color:red;
}
div.img {
  width:100px;
  height:100px;
  background-color:blue;
}

div.parent:hover div.img {
  background-color:green;
}​ 
```

如果你想在这里测试检查：http: [//jsfiddle.net/NicosKaralis/kd6wy/](http://jsfiddle.net/NicosKaralis/kd6wy/)

请记住，`div`with`img`类可以是任何元素，不需要是`div`，您可以根据需要更改 css 样式，您唯一需要注意的是`parent:hover child`

**编辑**

只是为了澄清一件事：带有的项目`:hover`是您想要检测悬停动作的女巫上的父项，并且`child`是您想要更改css规则的女巫上的项目

**再次编辑**

```
<div id="parent" class="row-fluid" style="padding-top:1em">
        <div class="span4">
          //Random content
        </div>
        <div class="span8 offset1">
          //Random content
        </div>
        <div class="span9 offset3">
          <ul>
            <li>//Random content</li>
            <li>//Random content</li>
            <li>//Random content</li>
         </ul>
        </div>
        <img class="child" src='../../images/image.png>
<div> 
```

在您的代码上，您将需要：

```
div#parent.row-fluid img.child {
  display:none;
}
div#parent.row-fluid:hover img.child {
  display:block;
} 
```

这将使您的图像仅在鼠标悬停在您的 div 上时显示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:39:14.733

应该就像将 mouseover 和 mouseout 事件处理程序附加到父 div 然后操作包含的 img 元素一样简单。

```
var rolloverImage = ...
var origImage = ...
$("#parentDivId")
       .mouseover(function() {
          $("#parentDivId img").attr("src", rolloverImage)
       })
       .mouseout(function() {
          $("#parentDivId img").attr("src", origImage)
       }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T20:34:43.350

没有任何要测试的 html，这只是我脑海中想到的。不确定它是否会起作用，但我不明白为什么它不会。

```
$('div').mouseenter(function() {
    var image = $('img', this);

    $(image.attr('src', 'new-image-src.jpg');
}).mouseleave(function () {
    var image = $('img', this);

    $(image).attr('src', 'old-image-src.jpg');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T20:34:50.800

尝试：

```
$('div.row-fluid').hover(function() {
    $(this).find('img').attr('src', 'http://dummyimage.com/100x100/000/fff');
}, function() {
    $(this).find('img').attr('src', 'http://www.placekitten.com/100/100');
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/mpmqm/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T20:36:59.577

您可以使用此代码“显示/隐藏翻转图像”

```
#parentDiv > img {
  display: none;
}
#parentDiv:hover > img {
  display: block;
} 
```

`>`允许您选择`img`直接后代的标签（`#parentDiv`我给了外部 div 那个 ID）。然后我们只是在常规和悬停状态下为其设置不同的样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T23:34:51.533

回答我自己的问题，因为我使用其他人的评论和答案的元素来创建一个混合：一个精灵，完全 CSS 解决方案。我觉得这是最优的。

每@gilly3“图像交换最好使用精灵完成，这样图像之间的切换就不会出现任何延迟。将图像的两个版本并排放在一个文件中。将该图像设置为div的背景，并调整背景位置以显示一个或另一个图像。” 对于这个例子，我将使用 96px（高）×27px（宽）的精灵，使用我的 em 值。

在 HTML 中将 img 行替换为：

```
<div class="sprite-image"></div> 
```

CSS：

```
.sprite-image {
{
background-image: url(../../images/image.png);
height: 3.7em;
width: 27px;
}

.row-fluid:hover .sprite-image
{
background-position: 0px -3.7em;
} 
```

# xml - 带有可选元素的 XML 可以与 LINQ 和匿名类型一起使用吗？

> ID：11530266
> 
> 赞同：1
> 
> 时间：2012-07-17T20:20:02.693
> 
> 标签：xml, vb.net, linq

以下 XML 中的“CIPCode”元素是可选的：

```
<?xml version="1.0" encoding="utf-8"?>
<StateCodesList SchoolYear="2012-2013" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="CourseCodesList.xsd">
    <Year>2013</Year>
    <Course>
        <StateCode>990001</StateCode>
        <Description>Reading</Description>
        <ShortName>Reading</ShortName>
        <LongName>Reading</LongName>
        <CIPCode>1.01</CIPCode>
        <Type>99</Type>
    </Course>
    <Course>
        <StateCode>9902</StateCode>
        <Description>Math</Description>
        <ShortName>Short</ShortName>
        <LongName>Long</LongName>
        <Type>70</Type>
    </Course>
</StateCodesList> 
```

我有以下代码将元素置于匿名类型中：

```
Using aStreamReader As New StreamReader(New MemoryStream(criteria.File)) 'File is the XML in Byte() form
    Dim xDoc As System.Xml.Linq.XDocument
    xDoc = System.Xml.Linq.XDocument.Load(aStreamReader)

    '....do some non-relevant stuff here

    Dim courses = From myCourse In xDoc.Descendants("Course")
                    Select New With
                        {
                            .StateCode = myCourse.Element("StateCode").Value, _
                            .Description = myCourse.Element("Description").Value, _
                            .ShortName = myCourse.Element("ShortName").Value, _
                            .LongName = myCourse.Element("LongName").Value, _
                            .Type = myCourse.Element("Type").Value, _
                            .CipCode = myCourse.Element("CIPCode").Value _
                        }
    '....do some non-relevant stuff here
End Using 
```

当 CIPCode 被忽略时，代码会引发异常（*未将对象引用设置为对象的实例。 ）。*有没有办法配置代码，以便在适用时存储 CIPCode 并且不会引发异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:28:20.623

> 有没有办法配置代码，以便在适用时存储 CIPCode 并且不会引发异常？

当然。这真的很简单 - 只需使用[显式转换为字符串](http://msdn.microsoft.com/en-us/library/bb155263.aspx)：

```
.CipCode = CType(myCourse.Element("CIPCode"), String) 
```

`Nothing`当没有这样的元素时，这会给你。

（请注意，文档的 VB 版本已损坏，因为它使用`Value`属性代替...）

# html - 通过链接标签配置 Octopress 以支持 Google Authorship

> ID：11530268
> 
> 赞同：6
> 
> 时间：2012-07-17T20:20:11.477
> 
> 标签：html, google-plus, octopress

我想将我的 Octopress 博客配置为在所有页面的 head 元素中添加作者链接，以便我的 Google+ 图片将显示在我的博客帖子的搜索结果旁边。目前，我相信我可以包括一个

<link rel="author" href="url/to/google/plus/profile">

在每个帖子中，但这变得乏味。由于我博客上的每篇文章都是我写的，我希望上面的链接只显示在我博客的每个 Octopress 页面的标题中。然后在 Google+ 上，我可以将我的博客列为我贡献的网站，而不是列出我对每篇文章的贡献。

我是 Google Authorship 的新手，所以也许我想做的不是最好的方法。我的总体目标只是让我的 Google+ 照片出现在我在 Google 搜索结果和 Google+ 中的所有 Octopress 博客文章旁边，仅将我的博客列为我贡献的网站（而不是每篇文章）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-02T01:06:30.550

I learned that the Octopress built-in Google+ 3rd party plugin [http://octopress.org/docs/configuring/#third_party](http://octopress.org/docs/configuring/#third_party) supports establishing authorship and is probably the intended way for Octopress bloggers to add the desired functionality.

To use it you can change the Google+ section around line 80 in the `_config.yml` file:

```
# Google Plus Profile
# Hidden: No visible button, just add author information to search results
googleplus_user: 111234567439674839635
googleplus_hidden: false 
```

replacing the user number with your own, which you can find by going to your Google+ profile and copying the number in the address bar. Then, as long as you have added the URL of your Octopress blog to your "Contributor To" section on your Google+ profile page, your profile image should show up next to search results for your blog articles.

*   For reference on how Google Authorship works: [http://searchengineland.com/the-definitive-guide-to-google-authorship-markup-123218](http://searchengineland.com/the-definitive-guide-to-google-authorship-markup-123218)

*   To see how your blog will show up in Google search results, you can use this testing richsnippet: [http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

I had erroniously set my googleplus_user url to be the full URL of my Google plus account without realizing it, so authorship was not working. Thus, I sought to manually add the `<link>` tag in my original question.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:05:16.610

您需要使用您的作者身份标记更新 head.html 模板（在 octopress 主题中提供）文件。

[https://github.com/imathis/octopress/blob/master/.themes/classic/source/_includes/head.html#L20](https://github.com/imathis/octopress/blob/master/.themes/classic/source/_includes/head.html#L20)

# oauth-2.0 - DotNetOpenAuth OAuth2.0 状态参数

> ID：11530269
> 
> 赞同：6
> 
> 时间：2012-07-17T20:20:13.013
> 
> 标签：oauth-2.0, dotnetopenauth

我正在使用 DotNetOpenAuth 通过 OAuth2 连接到 Facebook 和 Google。OAuth 规范要求在 request_uri 中不提供其他参数，Google 实际上通过在您使用它们定义 Google 应用程序时强制指定确切的回调 uri 来强制执行此操作。

我想要完成的是能够在用户通过 Facebook 或 Google 的身份验证后将其返回到特定的 URL。流程是这样的，用户点击一个受保护的链接，他们通过 returnUrl 参数被转发到我的登录页面，然后我根据他们选择的 OAuth2 授权服务器启动授权过程。

由于 request_uri 中不能有任何参数（尽管 Facebook 让你侥幸逃脱），我无法将 returnUrl 参数发送到授权服务器并将其取回，这样当用户返回我的网站时，我将他们转发到他们试图访问的受保护页面。我能做的最好的就是将它们转发到主页或会员欢迎页面。

解决此问题的方法是使用授权服务器将发送回 request_uri 的“状态”参数，但我找不到使用 DotNetOpenAuth 指定它的方法。

默认情况下，代码使用 SessionID 作为状态参数来验证从授权服务器返回的请求。在 WebServerClient 类上指定 IClientAuthorizationTracker 可让我在响应从授权服务器返回时插入我的逻辑，但在准备授权请求时不会调用它，因此我无法插入我的附加状态。

这是来自 WebServerClient.cs 的 PrepareRequestUserAuthorization 的代码：

```
 // Mitigate XSRF attacks by including a state value that would be unpredictable between users, but
        // verifiable for the same user/session.
        // If the host is implementing the authorization tracker though, they're handling this protection themselves.
        if (this.AuthorizationTracker == null) {
            var context = this.Channel.GetHttpContext();
            if (context.Session != null) {
                request.ClientState = context.Session.SessionID;
            } else {
                Logger.OAuth.WarnFormat("No request context discovered, so no client state parameter could be set to mitigate XSRF attacks.");
            }
        } 
```

这里没有其他块，这是我期望能够播放并插入我自己的数据的。

关于我所缺少的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:10:36.243

状态参数必然专注于缓解 XSRF 攻击。由于您已经有一个用户会话，您可以将其存储`returnUrl`在会话字典中吗？

或者，您可以向 DotNetOpenAuth 提出[问题](https://github.com/dotnetopenauth/dotnetopenauth/issues)，要求允许您将自己的数据捆绑到状态参数中（以及 DNOA 自己的 XSRF 缓解代码）。

# html - 表 td 图片高度继承或定义

> ID：11530270
> 
> 赞同：0
> 
> 时间：2012-07-17T20:20:24.617
> 
> 标签：html, image, row, css-tables

我有一个 1 行 3 列的表。它看起来像：

```
______________________
| |                | |
| |                | |
| |                | |
| |                | |
| |                | |
| |                | |
| |                | |
---------------------- 
```

该表格的宽度为 940 像素，高度为 600 像素。第一个 td 和最后一个 td 应该是“容器”边。网页设计师为侧面画了一个凹面 - ) ( - PNG图像。我必须用 插入它`<img src""/>`，因为如果我将图像作为背景，图像不会拉伸。问题在于图像的高度。因为每个页面是动态的，我无法定义表格高度或图像高度。每个页面都应该有自动高度，但问题在于侧面。如果我插入高度='100%'的图像，页面会变长到页面底部，因为它有 2000px 高度。我尝试使用 height:inherit，但没有结果。我该如何声明图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:25:20.960

您可以使用背景图像并添加`background-size: contain`或`background-size: auto 100%`。

# linux - 从 Crontab 调用 GIT SVN FETCH

> ID：11530271
> 
> 赞同：1
> 
> 时间：2012-07-17T20:20:25.043
> 
> 标签：linux, git, svn, git-svn, crontab

我正在尝试使用来自 linux 机器的 crontab 运行计划的 cron 作业，我会在其中定期运行命令 git svn fetch 。

这是我的 crontab 的样子：

```
 1 #!/bin/bash
  2 PATH="/usr/local:/usr/local/bin:/bin"
  3 HOME="/home/person1/src"
  4
  5 * * * * * /home/person1/src/autofetch.sh
  6 0 9,13,17 * * 1-5 /home/person1/src/autofetch.sh 
```

我的 autofetch.sh 只是有命令：“git svn fetch”

我想我已经接近了，因为它找到了 git 命令以及它能够在可以使用 git 的环境中运行的事实。我最初遇到的问题是：

```
Already at toplevel, but .git not found 
```

但是现在我收到一个奇怪的身份验证错误发送到我的 linux 邮箱：

```
X-Cron-Env: <PATH=/usr/local:/usr/local/bin:/bin>
X-Cron-Env: <HOME=/home/person1/src>
X-Cron-Env: <SHELL=/bin/sh>
X-Cron-Env: <LOGNAME=person1>
X-Cron-Env: <USER=person1>

Authentication realm: <http://subversion.server1.com:80> Subversion repository
Password for 'person1':
Authentication realm: <http://subversion.server1.com:80> Subversion repository
Username: Use of uninitialized value in chomp at /usr/local/libexec/git-core/git-svn   line 4322.
error: git-svn died of signal 11 
```

有谁知道该怎么做？或者之前使用 crontab 运行预定的 git 命令？

笔记：

*   我有一个从颠覆服务器运行的 git 客户端，这就是 git-svn 发挥作用的地方。
*   我的 git 存储库位于 /home/person1/src
*   只要我在 /home/person1/src 目录中，我就可以从终端运行“git svn fetch”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:32:36.660

您可能不想将 HOME 设置为 /home/person1/src。svn 使用 $HOME 来查找其缓存的密码，除非您将 HOME 设置为 /home/person1，否则它不会。如果你想让你的 cron 在 src 目录中运行，只需在脚本顶部放一个“cd $HOME/src”命令。

# node.js - 学习 NodeJS

> ID：11530273
> 
> 赞同：0
> 
> 时间：2012-07-17T20:20:27.197
> 
> 标签：node.js

真的需要一本精通node.js的书推荐。

从这个列表中......或？

[http://www.chapters.indigo.ca/home/search/?keywords=nodejs&pageSize=12](http://www.chapters.indigo.ca/home/search/?keywords=nodejs&pageSize=12)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:36:55.793

我个人喜欢[http://www.nodebeginner.org/](http://www.nodebeginner.org/)作为基础。

PeepCode 全栈 Node.js 截屏[https://peepcode.com/products/full-stack-nodejs-i](https://peepcode.com/products/full-stack-nodejs-i)有助于了解实际使用的各个方面。

Google 还用于将 Node.js 应用程序部署到生产环境，因为它不像 Web 上更传统​​的服务器端技术那样简单，而且它会影响您的应用程序策略。

# jquery - 跨浏览器 xml 元素选择器？

> ID：11530275
> 
> 赞同：1
> 
> 时间：2012-07-17T20:20:35.947
> 
> 标签：jquery, xml, cross-browser

给定一个包含 xml 元素的 HTML 文档，如下所示：

```
<xml><Test><Thing></Thing></Test></xml>​ 
```

有没有好的跨浏览器解决方案来选择元素？

我原以为一些简单的 jQuery 会起作用，如下所示：

```
$("xml Test Thing") 
```

它在 Chrome 上运行良好，但在 IE 9 中找不到任何东西。

jsFiddle：http: [//jsfiddle.net/hnztj/](http://jsfiddle.net/hnztj/)

一些背景：我有一个只在 IE 中工作的旧页面。它将一些 XML 烘焙到文档服务器端，然后使用 ActiveX 控件从 XML 中提取信息。我正在尝试让它在 Chrome 中工作。调整事物以使用 jQuery 在 Chrome 上效果很好，但现在 IE 不起作用。嘘。

# java - 如何在 java 中为操作实现简单的撤消/重做？

> ID：11530276
> 
> 赞同：16
> 
> 时间：2012-07-17T20:20:44.917
> 
> 标签：java, user-interface, undo, command-pattern

我创建了一个 XML 编辑器，但我被困在最后一个阶段：添加撤消/重做功能。

当用户向 JTree 添加元素、属性或文本时，我只需要添加撤消/重做。

我对此还是很陌生，但是今天在学校里，我尝试（未成功）创建两个堆栈对象 []，称为撤消和重做，并将执行的操作添加到其中。

例如，我有：

```
Action AddElement() {

// some code
public void actionPerformed(ActionEvent e) {

                    performElementAction();
                }
} 
```

performElementAction 实际上只是向 JTree 添加了一个元素。

我想添加一种方法来将此执行的操作添加到我的撤消堆栈中。有没有一种简单的方法来撤消.push（执行的整个操作）或其他什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-04-02T16:40:32.937

*[TL;DR：您可以通过实现命令和备忘录模式（设计模式 - Gama 等](https://www.amazon.ca/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612/ref=tmm_hrd_swatch_0?_encoding=UTF8&qid=&sr=)*）来支持撤消和重做操作。

**备忘录模式**

这个简单的模式允许您保存对象的状态。只需将对象包装在一个新类中，只要它的状态发生变化，就更新它。

```
public class Memento
{
    MyObject myObject;

    public MyObject getState()
    {
        return myObject;
    }

    public void setState(MyObject myObject)
    {
        this.myObject = myObject;
    }
} 
```

**命令模式**

命令模式存储原始对象（我们希望支持撤消/重做）和备忘录对象，我们在撤消时需要这些对象。此外，还定义了 2 种方法：

1.  *执行*：执行命令
2.  *unExecute*：删除命令

代码：

```
public abstract class Command
{
    MyObject myObject;
    Memento memento;

    public abstract void execute();

    public abstract void unExecute();
} 
```

定义扩展命令的逻辑“动作”（例如插入）：

```
public class InsertCharacterCommand extends Command
{
    //members..

    public InsertCharacterCommand()
    {
        //instantiate 
    }

    @Override public void execute()
    {
        //create Memento before executing
        //set new state
    }

    @Override public void unExecute()
    {
        this.myObject = memento.getState()l
    }
} 
```

**应用模式：**

最后一步定义了撤消/重做行为。他们的核心思想是存储一堆命令，作为命令的历史列表。为了支持重做，您可以在应用撤消命令时保留辅助指针。请注意，每当插入新对象时，其当前位置之后的所有命令都会被删除；这是通过`deleteElementsAfterPointer`下面定义的方法实现的：

```
private int undoRedoPointer = -1;
private Stack<Command> commandStack = new Stack<>();

private void insertCommand()
{
    deleteElementsAfterPointer(undoRedoPointer);
    Command command =
            new InsertCharacterCommand();
    command.execute();
    commandStack.push(command);
    undoRedoPointer++;
}

private void deleteElementsAfterPointer(int undoRedoPointer)
{
    if(commandStack.size()<1)return;
    for(int i = commandStack.size()-1; i > undoRedoPointer; i--)
    {
        commandStack.remove(i);
    }
}

 private void undo()
{
    Command command = commandStack.get(undoRedoPointer);
    command.unExecute();
    undoRedoPointer--;
}

private void redo()
{
    if(undoRedoPointer == commandStack.size() - 1)
        return;
    undoRedoPointer++;
    Command command = commandStack.get(undoRedoPointer);
    command.execute();
} 
```

**结论：**

这种设计的强大之处在于您可以添加任意数量的命令（通过扩展`Command`类），例如，`RemoveCommand`等等`UpdateCommand`。此外，相同的模式适用于任何类型的对象，使设计可在不同的用例中*重用*和*修改。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-14T17:29:16.410

`You have to define undo(), redo() operations along with execute() in Command interface itself`.

例子：

```
interface Command {

    void execute() ;

    void undo() ;

    void redo() ;
} 
```

在您的 ConcreteCommand 类中定义一个状态。根据 execute() 方法之后的当前状态，您必须决定是否应将命令添加到 Undo Stack 或 Redo Stack 并做出相应的决定。

请查看此[撤消重做](http://sourcephile.blogspot.in/2011/04/how-to-do-undo-and-redo.html)命令文章以更好地理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:25:59.537

我会尝试创建一个Action 类，AddElementAction 类继承Action。AddElementAction 可以有一个 Do() 和 Undo() 方法，可以相应地添加/删除元素。然后，您可以保留两个操作堆栈用于撤消/重做，并在弹出它之前在顶部元素上调用 Do()/Undo()。

# asp.net-mvc - 需要帮助在我的 mvc3 项目中对我的服务层进行单元测试

> ID：11530279
> 
> 赞同：3
> 
> 时间：2012-07-17T20:20:53.680
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, nunit

我的 mvc3 项目有服务和存储库层。

我的服务层：

```
public class UserService : IUserService
{
    private readonly IUserRepository _userRepository;

    public UserService(IUserRepository userRepository)
    {
        _userRepository = userRepository;
    }

    public ActionConfirmation<User> AddUser(User user)
    {
        User existUser = _userRepository.GetUserByEmail(user.Email, AccountType.Smoothie);
        ActionConfirmation<User> confirmation;

        if (existUser != null)
        {
            confirmation = new ActionConfirmation<User>()
                               {
                                    WasSuccessful = false,
                                    Message = "This Email already exists",
                                    Value = null
                               };

        }
        else
        {
            int userId = _userRepository.Save(user);
            user.Id = userId;

            confirmation = new ActionConfirmation<User>()
                               {
                                   WasSuccessful = true,
                                   Message = "",
                                   Value = user
                               };
        }

        return confirmation;

    }

} 
```

这是我的单元测试，不知道如何执行和断言。请帮帮我，如果您需要其他层的代码，请告诉我。我会把它们放在这里。我认为这应该足够了。

```
[TestFixture]
public class UserServiceTests
{
    private UserService _userService;
    private List<User> _users;
    private Mock<IUserRepository> _mockUserRepository;

    [SetUp]
    public void SetUp()
    {
        _mockUserRepository = new Mock<IUserRepository>();
        _users = new List<User>
                     {
                        new User { Id = 1, Email = "test@hotmail.com", Password = "" },
                        new User { Id = 1, Email = "test2@hotmail.com", Password = "123456".Hash() },
                        new User { Id = 2, Email = "9422722@twitter.com", Password = "" },
                        new User { Id = 3, Email = "john.test@test.com", Password = "12345".Hash() }
                     };
    }

    [Test]
    public void AddUser_adding_a_nonexist_user_should_return_success_confirmation()
    {
        // Arrange
        _mockUserRepository.Setup(s => s.Save(It.IsAny<User>())).Callback((User user) => _users.Add(user));
        var newUser = new User { Id = 4, Email = "newuser@test.com", Password = "1234567".Hash() };

        _userService = new UserService(_mockUserRepository.Object);

        // Act

        // Assert

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:21:07.097

顺便说一句，最好在编写代码*之前*编写测试。这将允许您设计更方便的 API，并且在编写测试时您将不受实现细节的限制。

回到你的情况。您正在使用模拟存储库，因此您不需要调用`Save`来填充存储库与某些用户。实际上，您根本不需要填充模拟。您应该只返回测试场景所需的值。

```
[Test]
public void ShouldSuccesfulltyAddNonExistingUser()
{
   // Arrrange
   int userId = 5;
   var user = new User { Email = "newuser@test.com", Password = "1234567".Hash() };
   _mockUserRepository.Setup(r => r.GetUserByEmail(user.Email, AccountType.Smoothie)).Returns(null);
   _mockUserRepository.Setup(r => r.Save(user)).Returns(userId);
   _userService = new UserService(_mockUserRepository.Object);

   // Act
   ActionConfirmation<User> confirmation = _userService.AddUser(user);

   // Assert       
   Assert.True(confirmation.WasSuccessful);
   Assert.That(confirmation.Message, Is.EqualTo(""));
   Assert.That(confirmation.Value, Is.EqualTo(user));
   Assert.That(confirmation.Value.Id, Is.EqualTo(userId));
} 
```

请记住，当您创建新用户时，您不应该提供用户 ID。应在用户保存到存储库后分配 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:25:18.783

我将首先根据用户是否已经存在来测试返回的确认对象。您要验证的另一件事`_userRepository.Save`是当用户不存在时调用 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:27:27.840

```
// Act
var result = _userService.AddUser(newUser);
// Assert
Assert.IsTrue( /* Insert some condition about the result */ );
Assert.IsTrue( /* Rinse, wash, repeat */ ); 
```

# c# - 通过 EnvDTE 在 C# 中以编程方式添加项目引用（而不是程序集引用）

> ID：11530281
> 
> 赞同：2
> 
> 时间：2012-07-17T20:20:55.890
> 
> 标签：c#, visual-studio-2010, envdte, project-reference

在 Visual Studio 中，当您在 .csproj 文件中的解决方案中添加对现有项目的引用时，结果如下：

```
<ProjectReference Include="..\TestProject2\TestProject2.csproj">
  <Project>{15EC8369-B0C5-4F71-A366-19042F450A2D}</Project>
  <Name>TestProject2</Name>
</ProjectReference> 
```

如果我通过 EnvDTE 添加对程序集 DLL 的引用：

```
var p = _project as VsProject;
p.References.Add(<path to assembly DLL>); 
```

它像这样结束：

```
<Reference Include="TestProject2.csproj">
  <HintPath>..\TestProject2\bin\Debug\TestProject2.csproj.dll</HintPath>
</Reference> 
```

这不是很好，因为如果我切换到发布版本，它仍然会引用调试程序集。另一个问题是我必须先构建引用的程序集，然后才能将其添加为引用。使用 Visual Studio UI，我可以添加对未构建项目的引用。

是否可以通过 EnvDTE API 添加项目参考？

我知道我可以将 .csproj 文件作为 XML 文档进行操作并做任何我想做的事情，但由于我从 EnvDTE 的路径开始，我更愿意坚持下去。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T20:27:29.347

看起来[References](http://msdn.microsoft.com/en-us/library/vslangproj.references.aspx)接口有一个[AddProject](http://msdn.microsoft.com/en-us/library/vslangproj.references.addproject.aspx)方法来处理项目到项目的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:33:18.163

对我有用的是以这种方式制定参考：

```
<Reference
  Include="MyDll"
  Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
  <HintPath>..\..\somePath\Debug\myDll.dll</HintPath>
</Reference>
<Reference
  Include="MyDll"
  Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
  <HintPath>..\..\somePath\Release\myDll.dll</HintPath>
</Reference> 
```

这样，发布构建引用发布依赖，而调试构建引用Debug。当然，如果需要也可以处理x86/x64。这是针对 32 位应用程序的。

# sqlalchemy - sqlalchemy：如何在 sqlalchemy 中执行这个简单的子查询？

> ID：11530282
> 
> 赞同：2
> 
> 时间：2012-07-17T20:20:58.617
> 
> 标签：sqlalchemy

两种型号：

```
class this(DeclarativeBase):

    __tablename__ = 'this'

    'Columns'
    id = Column(Integer, primary_key=True)

    'Relations'
    that = relation('that', foreign_keys=id, backref='this')

class that(DeclarativeBase):

    __tablename__ = 'that'

    'Columns'
    id = Column(Integer, primary_key=True)
    this_id = Column(Integer, ForeignKey('this.id')) 
```

我想运行这个简单的 SQL 查询：

```
SELECT id, (SELECT COUNT(*) FROM that WHERE this_id = this1.id) AS thatcount FROM this AS this1 
```

我可以通过执行以下操作在 sqlalchemy 中获得相同的结果：

```
results = session.query(model.this.id, 
                        func.count(model.that.id).label('thatcount')) \
                 .join(model.that) \
                 .group_by(model.this.id) 
```

但是，生成的 SQL 不是我想要的：

```
SELECT
this.id AS this_id,
count(that.id) AS thatcount 
FROM this
INNER JOIN that ON this.id = that.this_id
GROUP BY this.id 
```

我错过了 sqlalchemy 中的一些基本思想......

1）如何在 FROM 子句中“标记”表？2) 如何创建引用父查询结果的子查询？

希望这是我不理解的简单事情，因为我对 sqlalchemy 比较陌生......当然我可以运行原始 SQL，但我对 sqlalchemy 印象深刻，我相信这是可能的。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:16:08.533

```
qry = select([
        this.id,
        select([func.count().label('xx')], this.id == that.this_id).as_scalar().label('thatcount'),
        ]) 
```

产生：

```
SELECT this.id, (SELECT count(*) AS xx
FROM that
WHERE this.id = that.this_id) AS thatcount
FROM this 
```

直接回答您的问题：

1.  利用`label()`
2.  你不需要那个，你只需使用 的`whereclause`来`select`指示主查询和子查询之间的连接条件。

*请注意，我更喜欢`func.count(that.id)`这样做`func.count()`，因为它更明确。*

# c# - C#“使用”SerialPort 传输数据丢失

> ID：11530283
> 
> 赞同：0
> 
> 时间：2012-07-17T20:20:59.100
> 
> 标签：c#, serial-port, using, data-loss

我是这个论坛的新手，有一个问题困扰了我一段时间。我的设置是使用 USB/uart 转换器连接到我的电脑的串行字符显示器。我正在以 C++ 样式在单独的写入缓冲区线程中通过 serialPort 类将字节传输到显示器：

```
private void transmitThread(){
    while(threadAlive){
        if(q.Count > 0){ // Queue not empty
            byte[] b = q.Dequeue();
            s.Write(b,0,b.Length);
            System.Threading.Thread.Sleep(100);
        }
        else{ // Queue empty
            System.Threading.Thread.Sleep(10);
        }
    }
} 
```

假设串行端口已经打开，这可以完美运行并将所有数据传输到显示器。尽管此代码段中根本没有异常处理。因此，我正在研究实现一个典型的 C# 功能，即“使用”语句，并且只在需要时打开端口，如下所示：

```
private void transmitThread(){
    while(threadAlive){
        if(q.Count > 0){ // Queue not empty
            byte[] b = q.Dequeue();
            using(s){ //using the serialPort
                s.Open();
                s.Write(b,0,b.Length);
                s.Close();
            }
            System.Threading.Thread.Sleep(100);
        }
        else{ // Queue empty
            System.Threading.Thread.Sleep(10);
        }
    }
} 
```

这个函数的问题是，它只传输随机数量的数据，通常约为 80 字节字节数组的三分之一。我尝试了线程的不同优先级设置，但没有任何变化。

我是否遗漏了一些重要的东西，或者我只是在发送请求后关闭端口太快？

我希望你能帮助我。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:33:01.577

不，那是一个非常糟糕的主意。出错的地方，大致按照您遇到的顺序：

*   当您关闭端口时，串行端口驱动程序会丢弃发送缓冲区中尚未发送的任何字节。这就是你现在看到的。

*   SerialPort.Close() 的 MSDN 文章警告您必须“等待一段时间”才能再次打开端口。有一个内部工作线程需要关闭。您必须等待的时间量未指定，并且是可变的，具体取决于机器负载。

*   关闭一个端口允许另一个程序获取该端口并打开它。串口不能共享，再次打开程序会失败。

串行端口根本不是为了即时打开和关闭而设计的。只在程序开始时打开它，结束时关闭它。完全不调用 Close() 是完全可以接受的，并且可以避免死锁情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:26:17.177

我认为您错过了 using 块的要点。典型的 using 块如下所示：

```
using (var resource = new SomeResource())
{
    resource.DoSomething();
} 
```

开场发生在最开始。通常作为构造函数的一部分。但有时在 using 块的第一行。

但我看到的大红旗是关闭自动发生。你不需要`.Close()`来电。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:31:47.780

如果串行设备的成功操作依赖于对的调用，`Thread.Sleep`那么线程可能在某个时候被中断，足以使数据传输与设备不同步。很可能有办法解决这个问题，但我要做的第一件事是尝试改用 .NET [SerialPort](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)类。[Write](http://msdn.microsoft.com/en-us/library/ms143551.aspx)方法与您要执行的操作非常相似，并且那些文章中有 C++ 代码示例。

# iphone - 为 UITableView 存储来自网络的图像

> ID：11530284
> 
> 赞同：0
> 
> 时间：2012-07-17T20:21:08.170
> 
> 标签：iphone, ios, image, uitableview, web

我有一个带有自定义单元格的 UITableView，其中显示了文本和图像。（右侧的图像）。起初，一切正常，但后来我注意到滚动时，整个 tableview 都滞后了。这是因为当重新使用它们时，该应用程序可能会在单元格进入屏幕时下载单元格图像。我添加了一个 NSCache 来存储下载的图像，并告诉 cellForRowAtIndexPath 加载 imageName（如果存在），否则，再次从 Internet 下载。然而，缓存是如此的短期存储，如果我用主页按钮退出我的应用程序，然后重新进入，那么只剩下一些图像，并且必须再次下载图像。

我试图找出比缓存更长期存储图像的最佳方法。我已经阅读了一些关于 NSDirectory 和存储在应用程序库中的信息，但还没有弄清楚..

我相信，最合乎逻辑的解决方案是做这样的事情：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     /*stuff*/

    NSString *imageName = [dictionary objectForKey:@"Image"];
    UIImage *image = [--Cache-directory-- objectForKey:imageName]; //Try to get it from cache

    if(image) //If image was received from cache:
    {
        cell.imageView.Image = image;
    }
    else //If not in cache:
    {
        image = [--local-directory-- objectForKey:imageName]; //Check some local directory

        if(image) //If image received from directory:
        {
            cell.imageView.Image = image;
            // + Also save it to the cache?
        }
        else //If image was in neither cache or local directory, get it from the website with given URL
        {
            image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:imageURL]];
            //Then save to cache and to file?
        }
    }

} 
```

图像很少更改或切换，但我愿意事先在应用程序中实现它们，因此我必须在每次添加图像时发布更新。

这在我看来是合乎逻辑的。我在正确的轨道上吗？以及如何“调用”本地目录？就像，如果我将图像添加到 NSDirectory 对象或其他东西，这不是每次都会重置吗？如何访问本地文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:33:48.860

你从错误的方向攻击这个问题......
问题是 tableView 是滞后的。
原因是您在主线程中下载图像。
即使您从光盘中读取图像，您仍然无法获得最佳滚动性能。

所以不能阻塞你的主线程。为此，您可以异步下载图片，或使用 GCD 在另一个线程中下载。

像这样：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     /*stuff*/  

     // this will block your main thread, bad idea..
     //image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:imageURL]];

     // instead call it in a separate thread  
     dispatch_queue_t imgDownloaderQueue = dispatch_queue_create("imageDownloader", NULL);
         dispatch_async(imgDownloaderQueue, ^{
         // download the image in separate thread
         UIImage *image = [[[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:imageURL]] autorelease];
         dispatch_queue_t main_queue = dispatch_get_main_queue();
         dispatch_sync(main_queue, ^{                        
            // this is called in the main thread after the download has finished, here u update the cell's imageView with the new image
            UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
            cell.imageView.image = image;
        });
    });
    dispatch_release(imgDownloaderQueue);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:47:01.377

无需保存所有这些图像。

如果您从 url 获取图像，则只需使用[AsyncImageLoader](https://github.com/nicklockwood/AsyncImageView/tree/master/AsyncImageView)

使用该链接并获取 ASyncImageView 的 h 和 m 文件并将它们保存在您的项目中。

在您执行此操作的地方导入 h 文件

```
#import 'AsyncImageView.h' 
```

然后使用下面的代码

```
[[AsyncImageLoader sharedLoader] cancelLoadingURL:image.imageURL];

image.imageURL=[NSURL URLWithString:@"imageURL"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T20:35:39.583

似乎最好的解决方案可能是使用核心数据。但与@Anachid 建议的不同，您可以像以前一样从互联网加载它们并将它们放入核心数据目录。我建议您上网而不是将它们放入您的解决方案中，因为您必须更新才能获取新图片。然后从那里您可以根据需要使用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T20:31:10.213

我最近在 UITableView 上工作，我遇到了类似的问题。我使用的一个解决方法是因为图像很小（我假设你的也是）并且具有唯一的名称，我将它们存储在应用程序的本地文档文件夹中，并使用核心数据来保存对图像位置的引用。我从那个位置加载图像。如果图像改变，我改变那些图像。不过，这可能不是最优雅的方法。只是一个建议。

至于访问本地应用程序目录，我用这个

```
// INSTANCE METHOD - get the path and file name for the saved plist
- (NSString *)getFileLocation:(NSString *)location {
    // Get all available file system paths for the user
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    // Get the "Documents" directory path - it's the one and only on iPhone OS
    NSString *documentsPath = [paths objectAtIndex:0];

    // Specify the file name, appending it to documentsPath above
    NSString *savedFileName = [documentsPath stringByAppendingPathComponent:location];
    NSLog(@"File Location %@", location);
    // We're done
    return savedFileName;
} 
```

# sql - 使用 Excel 连接查询链接服务器

> ID：11530291
> 
> 赞同：0
> 
> 时间：2012-07-17T20:21:45.010
> 
> 标签：sql, excel

过去，我一直在 Excel 中使用 Data->From Other Sources->From SQL Server 查询各种不同的数据库（我们称它们为 DB1、DB2 和 DB3）。但是，我希望能够只执行一个查询（例如 DBMaster）并使用它来填充我的数据。

我的想法：使用链接服务器。我创建了带有链接服务器到 DB1、DB2 和 DB3 的 DBMaster。但是，我不知道如何从 Excel 访问这些单独的数据库。当我连接到 DBMaster 时，我只获取该数据库上的表，而不是链接服务器上的表。有谁知道我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-28T01:28:02.120

您只需要连接您的主数据库并从那里执行您的查询。

请记住在 FROM 子句中的 sql 中将服务器名称放在数据库名称之前，例如：

[服务器].[数据库].DBO.[表名]

# java - 在 GWT 环境中从 Java 中的 XML 文件中读取 UTF-8 字符串

> ID：11530293
> 
> 赞同：0
> 
> 时间：2012-07-17T20:21:53.550
> 
> 标签：java, gwt, utf-8, java.util.scanner

我正在使用 Scanner scanner = new Scanner(inputStream, "UTF-8"); 读取 XML 文件 然后使用scanner.nextLine()逐行进行。

我在阅读的 XML 文件中有一些 UTF-8 类型的文本，当我通过 Eclipse Helios IDE 中的 Jetty 服务器在本地运行我的应用程序时，它可以完美运行。

但是，当应用程序在我们用作开发服务器的 tomcat 服务器上构建和部署时，UTF-8 字符显示为“？” 到处。当我将一些日志放在适当的位置时，尽管我在初始化扫描仪时提到了 UTF-8，但我发现字符是以这种方式读取的。

我无法理解为什么它会在本地为我工作，但当我将它部署在 tomcat 上时却不行。

我相信很多人以前可能遇到过这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:13:12.617

您确定您已将tomcat 配置为显示utf-8 吗？

您是否配置了显示它的页面？这里有一个很好的方法[How to get UTF-8 working in Java webapps？](https://stackoverflow.com/questions/138948/how-to-get-utf-8-working-in-java-webapps)

另外，您是否在 catalina.sh 中将默认文件编码设置为 utf-8？

```
-Dfile.encoding=UTF-8" 
```

[http://www.redleopard.com/2008/12/utf-8-on-tomcat/](http://www.redleopard.com/2008/12/utf-8-on-tomcat/)

我不希望它在不配置的情况下正确记录 utf-8。

# java - 你如何使用内置的 Java tts？

> ID：11530296
> 
> 赞同：1
> 
> 时间：2012-07-17T20:22:10.667
> 
> 标签：java, accessibility, speech-synthesis

我正在尝试使用 java 内置语音但是每当我尝试使用它时，当我调用 synth.allocate 时，它​​会给我一个空指针异常。我在网上查看了示例，但我仍然遇到同样的错误，我看不出我做错了什么

```
JButton button = new JButton();
    button.addActionListener(new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent arg0) {
            // TODO Auto-generated method stub
            try {
                Synthesizer synth = Central.createSynthesizer(
                    new SynthesizerModeDesc(Locale.ENGLISH));

                synth.allocate();
                synth.resume();

                synth.speakPlainText("Hello, world!", null);

                synth.waitEngineState(Synthesizer.QUEUE_EMPTY);

                synth.deallocate();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:54:07.677

您的系统可能没有安装 Locale.ENGLISH 合成器。这反过来会导致 Central.createSynthesizer() 返回 null，这将导致 synth.allocate() 处出现空指针异常。

在调用 Central.createSynthesizer() 之前，您可能需要调用 Central.availableSynthesizers() 来查找系统上安装了哪些合成器。

此外，作为一个快速测试，您可以尝试使用 Locale.US 而不是 Locale.ENGLISH 并查看它是否有效……这只是一个猜测。

我看到 FreeTTS (http://freetts.sourceforge.net/docs/index.php) 被描述为 Java Speech 接口的实现。安装它可能会有所帮助。

# python - 在窗口内查找控件的句柄

> ID：11530302
> 
> 赞同：2
> 
> 时间：2012-07-17T20:22:31.473
> 
> 标签：python, winapi

给定父窗口的句柄，如何获取该窗口内按钮的句柄？

我`win32api.sendMessage( )`用来将值传递给窗口。我想用来`BM_CLICK`点击有问题的按钮。

```
import win32api
import win32gui
import win32con

#get handle of the window I want

hwnd=win32gui.FindWindow(0,"SOME TITLE")

#btnHnd= (NEED CODE HERE TO GET THE HANDLE OF THE BUTTON INSIDE hwnd)

win32api.SendMessage(btnHnd, win32con.BM_CLICK, 0, 0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:39:15.807

```
btnHnd= win32api.FindWindowEx(hwnd, 0 , "Button", "#Title") 
```

是查找子窗口句柄的方法，前提是按钮是父级的直接子级，而不仅仅是后代

# vba - 当特定单元格更改时，如何运行我的 Excel 宏？【新转折】

> ID：11530305
> 
> 赞同：2
> 
> 时间：2012-07-17T20:22:45.593
> 
> 标签：vba, excel

我四处搜索，并编写了以下代码，我只想在特定单元格 D4 更改时运行这些代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim KeyCells As Range
    Static EmailSent As Boolean
    Dim Threshold As Integer
    Dim Cell As String, Email As String, Msg As String

    Cell = "D4"
    Threshold = 100
    Email = Range("E7").Value

    Set KeyCells = Range(Cell)

    If Not Application.Intersect(Range(Cell), Range(Target.Address)) Is Nothing Then
        Dim x As Integer
        x = Range(Cell).Value

        If x >= Threshold Then
            EmailSent = False
        ElseIf x < Threshold And Not EmailSent Then
            EmailSent = True
            Msg = "You only have " & x & " widgets remaining."
            MsgBox Msg
            SendMail Email, Msg
        End If
    End If
End Sub 
```

这行得通，我知道这里有很多类似的问题。**但这就是我遇到麻烦的地方：**这仅在我将 D4 设置为显式值时才有效，例如`"48"`. 即使 D4 是一个公式，我也**希望**`"=SUM(A4:C4)"`它能够工作：所以如果 D4 是，那么如果总和低于 100，则应该发送一封电子邮件。在这种情况下，此代码不会发送电子邮件:-(

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:31:37.533

```
Private Sub Worksheet_Calculate()
    CheckForMail
End Sub

Private Sub Worksheet_Change(ByVal Target As Range)
    CheckForMail Target
End Sub

Sub CheckForMail(Optional rng As Range = Nothing)

    Static EmailSent As Boolean
    Dim KeyCells As Range
    Dim Threshold As Integer
    Dim Cell As String, Email As String, Msg As String
    Dim x As Integer

    Cell = "D4"
    Set KeyCells = Me.Range(Cell)

    'if called from worksheet_change, check the range
    If Not rng Is Nothing Then
        If Application.Intersect(KeyCells, rng) Is Nothing Then
            Exit Sub
        End If
    End If

    Threshold = 100
    Email = Me.Range("E7").Value
    x = KeyCells.Value

    If x >= Threshold Then
        EmailSent = False
    ElseIf x < Threshold And Not EmailSent Then
        EmailSent = True
        Msg = "You only have " & x & " widgets remaining."
        MsgBox Msg
        SendMail Email, Msg
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:32:06.530

那么，当任何贡献单元格发生变化时，您需要检查您的单元格。如果它们在同一张纸上，这将起作用：

试试这个：

```
Private Sub Worksheet_Change(ByVal Target As Range)Static varD4_old As Variant ' 静态变量在调用之间保持其值

将 varD4 调暗为变体

varD4 = Range("D4").Value

如果 varD4 <> varD4_old 那么
    Debug.Print "D4 从 " & varD4_old & " 改为 " & varD4
    varD4_old = varD4
  ' 现在运行我的更改代码
万一

结束子

```

# ember.js - 如何使用视图替代 tr 标签

> ID：11530321
> 
> 赞同：2
> 
> 时间：2012-07-17T20:23:40.257
> 
> 标签：ember.js

关于我阅读的不同帖子，我预计以下代码应该可以工作：

```
<tbody>
    {{#each NewApp.router.gridController.tableContent}}
        {{#view NewApp.TableRow rowBinding="this"}}
            <td style="width: 100px">{{row.item_no}}</td>
            <td align="right" style="width: 100px">{{row.price}}</td>
            <td>{{row.name}}</td>
        {{/view}}
    {{/each}}
</tbody> 
```

但我只得到空表行。如果我使用 tr 一切都按预期工作。

TableRow 定义为：

```
NewApp.TableRow = Ember.View.extend({
  tagName: "tr",

  row: null,

  willInsertElement: function() {
    console.dir(this.get("row"));
  }

}); 
```

顺便说一句：console.dir 显示正确的数据。

问候罗杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:41:14.543

您可以查看[http://docs.emberjs.com/#doc=Ember.CollectionView&src=false](http://docs.emberjs.com/#doc=Ember.CollectionView&src=false)，它可以简化您的代码。

对于您的示例，在模板中使用 {{view.row.XXX}} ，它应该可以完成这项工作

# c# - 将两个列表与 LINQ 扩展相关联

> ID：11530323
> 
> 赞同：1
> 
> 时间：2012-07-17T20:23:50.750
> 
> 标签：c#, asp.net-mvc, linq, lambda

我有两个不同对象的列表，一个来自第三方 API，另一个来自我的数据库 - 我试图将两者作为关系链接。`Customer.Orders`理想情况下，与 DBML 如何为具有外键 ( )的表创建关系具有类似的效果。

来自第三方：

```
class ApiObject {
    public string ID { get; set; }
    public string Title { get; set; }
    public DateTime CreatedDate { get; set; }
    ... 30 other properties ...
} 
```

从我的数据库：

```
class DbmlObject {
    public int ID { get; set; }
    public string ApiID { get; set; }
    public string OtherString { get; set; }
} 
```

它们通过以下方式相关`ApiObject.ID == DbmlObject.ApiID`

我不想合并这些，也不想将它们加入一些匿名对象（并明确列出 30 多个属性） - 而是`DbmlObject`制作`ApiObject`. 即：可寻址为： `apiObject.DbmlObjects.First().OtherString`或理想情况下`apiObject.DbmlObject.OtherString`，因为它是一对一的关系。

在控制器中：

```
List<ApiObject> apiObjects = _thirdParty.GetObjects();

DbmlDataContext model = new DbmlDataContext();
List<DbmlObject> dbmlObjects = model.GetAllDbmlObjects();

// relate them here

foreach (var apiObject in apiObjects)
    Console.Write(apiObject.DbmlObject.OtherString)
// NOTE: ideally this foreach loop should not make a DBML query on each iteration, just the single GetAllDbmlObjects query above. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:28:00.793

这听起来像`join`：

```
var combined = from api in apiObjects
               join dbml in dbmlObjects on api.ID equals dbml.ApiID
               select new { api, dbml } 
```

为了在 ApiObject 中获取 DbmlObject，您将需要继承 ApiObject 并构造该类的新类，其中包括 Dbml 属性，*或者*创建一个全新的类以返回。如果你需要静态类型，这是你能做的最好的——当然你可以（误用）`dynamic`来得到你想要的。

在这种情况下，您提到（在评论中） ApiObject 类来自您无法更改的第三方库 - 在这种情况下，我可能会选择创建一个新类型，该类型在构造函数中采用两个对象的实例并公开您需要的属性 - 装饰器。是的，它看起来像很多代码，但它并不复杂，好的工具会为您自动生成它 - 您会获得代码简洁所需的类。

如果您想进一步返回一个`IEnumerable<dynamic>`，您可以基于它构建一个“组合动态”对象`DynamicObject`，然后响应 ApiObject 和 DbmlObject 的所有属性 - 或者只是将 DbmlObject 添加为属性。我并不是说这是正确的方法，这取决于您需要它的用途-记住您正在失去类型安全性。这是一个简单的例子：

```
void Main()
{
    dynamic dyn = new CombiningDynamic(new Foo { X = 3 }, new Bar { Y = 42 });
    Console.WriteLine(dyn.X);
    Console.WriteLine(dyn.Y);
}

public class Foo
{
    public int X {get;set;}
}

public class Bar 
{
    public int Y { get;set;}
}

public class CombiningDynamic : DynamicObject
{
    private object [] innerObjects;

    public CombiningDynamic(params object [] innerObjects) 
    {
        this.innerObjects = innerObjects;

    }
    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        foreach(var instance in innerObjects) 
        {
            Type t = instance.GetType();
            PropertyInfo prop = t.GetProperty(binder.Name);
            if (prop != null && prop.CanRead) 
            {
                result = prop.GetValue(instance, null);
                return true;
            }
        }
        result = null;
        return false;
    }
} 
```

请记住，这是示例代码。如果你真的这样做，你可能想要覆盖更多的方法（TrySetMember，...），并且你最明确地想要缓存反射结果，这样你就不需要每次都遍历类型 -反射（比较）慢。

# linux - 如何使用 Bash 中的 iconv 递归重命名文件和文件夹

> ID：11530324
> 
> 赞同：4
> 
> 时间：2012-07-17T20:23:50.213
> 
> 标签：linux, file, bash, iconv, tr

我一直在尝试使用 iconv 递归重命名文件和文件夹，但没有成功，文件已正确重命名，但文件夹没有。

我用于文件的是（完美）：

```
find . -name * -depth \ -exec bash -c 'mv "$1" "${1%/*}/$(iconv -f UTF8 -t ASCII//TRANSLIT <<< ${1##*/})"' -- {} \; 
```

我对文件和文件夹的尝试（失败：仅重命名文件夹）：

```
find . -exec bash -c 'mv "$1" "$(iconv -f UTF8 -t ASCII//TRANSLIT <<< $1)"' -- {} \; 
```

原始问题：我只想批量重命名很多文件以使它们“对网络友好”，比如删除空格、奇怪的字符等，目前我有

```
find . -name '*' -depth \
| while read f ; 
do 
mv -i "$f" "$(dirname "$f")/$(basename "$f"|tr -s ' ' _|tr -d "'"|tr -d ","|tr - _|tr "&" "y"|tr "@" "a")" ;
done 
```

有什么办法可以一次性完成上面的 tr 和 iconv 操作吗？因为我正在谈论大约 300,000 个要重命名的文件，所以如果可能的话，我想避免第二次搜索。

如果需要，我正在使用 Bash 4.2.24

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:00:12.840

我认为以下内容可以一次性完成您想要的一切。

```
# Update: if this doesn't work, use read -d '' instead
find . -print0 | while IFS= read -d '$\000' f ;
do 
  orig_f="$f"
  # Below is pure bash. You can replace with tr if you like
  # f="$( echo $f | tr -d ,\' | tr "$'&'@- " "ya__" )"
  f="${f// /_}"  # Replace spaces with _
  f="${f//\'}"   # Remove single quote
  f="${f//-/_}"  # Replace - with _
  f="${f//,}"    # Remove commas
  f="${f//&/y}"  # Replace ampersand with y
  f="${f//@/a}"  # Replace at sign with a
  f=$( iconv -f UTF8 -t ASCII//TRANSLIT <<< "$f" )
  new_dir="$(dirname $f)"
  new_f="$(basename $f)"
  mkdir -p "$new_dir"
  mv -i "$orig_f" "$new_dir/$new_f"
done 
```

该`find`命令（不需要实际选项，除了`-print0`处理带空格的文件名）会将空分隔的文件名发送到`while`循环（毫无疑问，有人会在那里纠正我的错误）。使用参数扩展的一长串赋值删除/替换各种字符；我包括我认为使用的等效管道`tr`作为评论。然后我们运行文件名`iconv`来处理字符集问题。最后，我们将名称拆分为其路径和文件名组件，因为我们可能必须在执行`mv`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T08:38:45.660

这是我在[chepner 回答](https://stackoverflow.com/a/11530797/3719101)后提供的更新，以避免嵌套错误。反转 with 的输出`find`以在文件夹本身*之前*`tac`对文件夹内容进行操作。这样，就不再需要：*`mkdir`*

 *```
echo "renaming:"
find . -print0 | tac -s '' | while IFS= read -d '' f ;
do
    Odir=$(dirname "$f")   # original location
    Ofile=$(basename "$f") # original filename
    newFile=$Ofile
    # remove unwanted characters
    newFile=$(echo $newFile | tr -d ",'\"?()[]{}\\!")
    newFile="${newFile// /_}"  # Replace spaces with _
    newFile="${newFile//&/n}"  # Replace ampersand with n
    newFile="${newFile//@/a}"  # Replace at sign with a
    newFile=$( iconv -f UTF8 -t ASCII//TRANSLIT <<< "$newFile" )
    if [[ "$Ofile" != "$newFile" ]]; then # act if something has changed
      echo "$Odir/$Ofile to"
      echo "$Odir/$newFile"
      mv -i "$Odir/$Ofile" "$Odir/$newFile"
      echo ""
    fi
done
echo "done." 
```

享受 ;）*

# gwt - 谷歌地图的第二次调用没有以正确的大小显示地图

> ID：11530334
> 
> 赞同：3
> 
> 时间：2012-07-17T20:24:24.900
> 
> 标签：gwt, google-maps-api-3

使用 gwt-maps-3.8.0 我在 gwt 弹出窗口中显示路线。调用一次时有效，但第二次调用时无效。

我应该怎么做......刷新mapWidget的一些建议？ ![缺陷图](../Images/40c4c171405a2656fa676ac3adb8b9ec.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T23:23:40.300

当您显示地图时，触发其`resize`事件。

从文档中：

> 当 div 改变大小时，开发者应该在地图上触发这个事件：`google.maps.event.trigger(map, 'resize')`

在 GWT 中执行此操作的方法[似乎](https://stackoverflow.com/questions/5454535/fire-resizeevent-in-gwt-google-web-toolkit)是

```
Event.trigger(mapWidget.getMap(), "resize"); 
```

目前，就 API 而言，地图的大小为零，因此它只是在 (0,0) 处显示单个像素周围的瓦片缓冲区。触发`resize`事件会导致 API 从浏览器获取正确的大小，以便获取正确的图块进行显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-21T12:18:48.940

我有同样的问题（地图显示在弹出窗口中；重新加载弹出窗口，地图不再居中）。
最后，我设法使用 GoogleMap 类中的 triggerResize 方法解决了我的问题。但是，它仅在我从 Idle 事件触发此方法后才起作用。
triggerResize 将通知地图显示正确的图块。
setCenter 将确保地图再次居中。

```
gMap.addIdleListenerOnce(new IdleHandler() {
    @Override
    public void handle() {
        gMap.triggerResize();
        gMap.setCenter(myLatLng);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:48:28.400

使用[GWT-V3-Maps-API](https://github.com/branflake2267/GWT-Maps-V3-Api)对于 div 或窗口调整大小的情况如下：

```
 /*
     * Example of how to dynamically resize the map to fit the window - add
     * your events
     */
    Window.addResizeHandler(new ResizeHandler() {
        @Override
        public void onResize(ResizeEvent event) {
            MapHandlerRegistration.trigger(mapWidget, MapEventType.RESIZE);
            GWT.log("Window has been resized!");
        }
    });

    mapWidget.addResizeHandler(new ResizeMapHandler() {
        @Override
        public void onEvent(ResizeMapEvent event) {
            GWT.log("Map has been resized!");
        }
    }); 
```

# postgresql - Postgres 中的外键

> ID：11530337
> 
> 赞同：0
> 
> 时间：2012-07-17T20:24:30.440
> 
> 标签：postgresql, foreign-keys

我的外键有问题，这是一个奇怪的问题。

第一张表：

```
CREATE TABLE adjunto
(
  id serial NOT NULL,
  codigo text,
  descripcion text,
  usuario integer,
  file integer,
  nombre text,
  propiedades hstore,

  CONSTRAINT adjunto_pkey PRIMARY KEY (id ),
  CONSTRAINT adjunto_file_fkey FOREIGN KEY (file)
      REFERENCES file (file_id) MATCH SIMPLE 
      ON UPDATE NO ACTION ON DELETE CASCADE
) WITH (
  OIDS=FALSE
); 
```

第二张表：

```
CREATE TABLE adjunto_coleccion_privada
(
  id serial NOT NULL,
  adjunto integer,
  coleccion integer,
  CONSTRAINT adjunto_coleccion_privada_pkey PRIMARY KEY (id ),
  CONSTRAINT adjunto_coleccion_privada_adjunto_fkey FOREIGN KEY (adjunto)
  REFERENCES adjunto (id) MATCH SIMPLE
  ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT adjunto_coleccion_privada_coleccion_fkey FOREIGN KEY (coleccion)
  REFERENCES coleccion (id) MATCH SIMPLE
  ON UPDATE NO ACTION ON DELETE CASCADE
)
WITH (
  OIDS=FALSE
); 
```

命令：

```
INSERT INTO adjunto_coleccion_privada (adjunto, coleccion) 
VALUES (600, 2) RETURNING id 
```

值 600 和 2 存在于 adjunto 和 colecion 两个表中。

详细错误：

```
Mensaje: ERROR: insert or update on table "adjunto_coleccion_privada" 
                violates foreign key   
                constraint "adjunto_coleccion_privada_adjunto_fkey"
Detail: Key (adjunto)=(600) is not present in table "adjunto". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:53:26.860

我测试了您的代码（我删除了`adjunto_coleccion_privada_coleccion_fkey`约束，因为您粘贴的代码中不存在引用的表）。

我看完全没有问题。

您确定表中有`id`= 600的记录`adjunto`吗？

# mysql - 在我的本地网络上为 Drupal 开发站点使用 WAMP 作为网络服务器

> ID：11530340
> 
> 赞同：0
> 
> 时间：2012-07-17T20:24:41.130
> 
> 标签：mysql, apache, drupal, drupal-6, wamp

我正在尝试将我的 PC 设置为网络服务器，以便同一网络上的用户可以访问我在本地安装的 Drupal 6 开发站点。我已经设置了一个静态 IP 供他们访问，并设置了虚拟主机以将他们使用的主机发送到我的 www 文件夹中的站点子文件夹，但是他们收到带有消息的 Drupal 错误页面：

“mysql 错误是：php_network_getaddresses: getaddrinfo failed: No such host is known。”

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:36:11.417

已修复：这是由 Drupal 的 settings.php 中不正确的 mysql 用户/密码引起的

# javascript - 标题从页面中删除

> ID：11530345
> 
> 赞同：-1
> 
> 时间：2012-07-17T20:25:03.893
> 
> 标签：javascript, title

我想从这个网站删除标题（需要删除“| Wix.com”），当我点击不同的页面时，这个文本会自动添加。

请建议我任何想法来完成这项工作。它是一个免费网站。我希望必须有一种方法可以删除它。

链接：[http ://www.scs-qa.com/panamera-old](http://www.scs-qa.com/panamera-old)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:27:28.043

你有没有试过这个：

```
<script type="text/javascript">
  document.title = "The new title goes here.";
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:52:06.563

反对 ToS。需要升级高级包。

# javascript - Javascript 子字符串和 indexOf 在 IE9 中不起作用

> ID：11530354
> 
> 赞同：0
> 
> 时间：2012-07-17T20:25:35.190
> 
> 标签：javascript, internet-explorer-9, substring, indexof

我在这里有这个 Javascript：

```
function getTxt(obj) {
var first = obj.innerHTML.substring(0, obj.innerHTML.indexOf('<span class=\"item2\">'));
var second = obj.innerHTML.substring(obj.innerHTML.indexOf('<span class=\"item2\">'));
var f = first.replace(/(<([^>]+)>)/ig,'');
var s = second.replace(/(<([^>]+)>)/ig,'');
alert(first + "\n" + second + "\n" + f + "\n" + s);
} 
```

和 HTML：

```
<span class="item" onclick="getTxt(this)"><span class="item1">MyName</span><span class="item2">555-555-5555</span></span> 
```

在大多数浏览器（FireFox、Chrome、Safari、Opera）中，它会发出警告：

```
<span class="item1">MyName</span>
<span class="item2">555-555-5555</span>
MyName
555-555-5555 
```

正如预期的那样。但是，在 IE9 中它会发出警告：

```
<span class="item1">MyName</span><span class="item2">555-555-5555</span>

MyName555-555-5555 
```

所以它将变量“first”和“second”一起放入var“first”中，并将“f”和“s”一起放入var“f”中。

我想知道是否有任何方法可以纠正这个问题，以便 IE9（可能还有其他版本的 IE）能够像在其他浏览器中一样工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:30:18.670

模式匹配`innerHTML`在 IE 中尤其是一个问题，通常是个坏主意。IE 通常不会向您返回页面中最初的相同 HTML。它经常重新引用或删除引号，更改属性的顺序，更改大小写等... IE 显然是在重构 HTML，而不是返回页面中的原始内容。因此，您无法在 IE 中可靠地模式匹配 innerHTML。您可能可以匹配一些特定的东西（标签的开头），但您不能期望属性位于特定位置或具有特定格式。

如果您`console.log(obj.innerHTML)`在 IE 中，您可能会看到我在说什么。它看起来会有所不同。

更健壮的解决方案是使用 DOM 函数导航特定元素或 CSS 选择器以查找特定对象，然后更改单个特定元素的属性或 innerHTML。让 DOM 导航为您找到正确的元素，而不是自己解析 HTML。

如果您提供所需的前后 HTML 样本并描述您要完成的工作，这里的人可能会帮助您完成 DOM 操作而不是 HTML 解析的工作。

我不知道您可以使用哪些选择器库或您的目标浏览器，但在 jQuery 中，您可以这样做：

```
function getText(obj) {
    return $(obj).find(".item1").text();
} 
```

在纯 javascript、IE8 及更高版本以及所有其他现代浏览器中，您可以使用以下命令：

```
function getText(obj) {
    return obj.querySelectorAll(".item1").innerHTML;
} 
```

如果您必须支持回到 IE6 或 IE7，我建议您获取 Sizzle 库并将其用于您的查询：

```
function getText(obj) {
    return Sizzle(".item1", obj)[0].innerHTML;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:36:49.333

这是因为 Internet Explorer 中的“古怪模式”。这是一个巨大的痛苦，但你可以在 IE DevTools 中禁用它，或者将这个元标记添加到你的页面：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

# python - Sentry 不显示 sweetpie 错误消息

> ID：11530364
> 
> 赞同：3
> 
> 时间：2012-07-17T20:26:11.380
> 
> 标签：python, django, tastypie, sentry

我将 Django 与美味派一起使用，并使用 Sentry 进行错误跟踪。

问题是为美味派引发的错误没有记录错误消息。

他们记录了以下消息：

```
core.api.api_user.hydrate
Internal Server Error: /api/v1/test/123/ 
```

并且应该记录下一条消息：

```
core.api.api_user.hydrate
int() argument must be a string or a number, not 'dict' 
```

以及 Stacktrace 的其余部分。

这是我的项目日志配置：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'root': {
        'level': 'WARNING',
        'handlers': ['sentry'],
    },
    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
        },
    },
    'handlers': {
        'sentry': {
            'level': 'ERROR',
            'class': 'raven.contrib.django.handlers.SentryHandler',
        },
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose'
        }
    },
    'loggers': {
        'django.request.tastypie': {
            "handlers": ["sentry"],
            "level": "ERROR",
            "propagate": False
        },
        'django.db.backends': {
            'level': 'ERROR',
            'handlers': ['console'],
            'propagate': False,
        },
        'raven': {
            'level': 'DEBUG',
            'handlers': ['console'],
            'propagate': False,
        },
        'sentry.errors': {
            'level': 'DEBUG',
            'handlers': ['console'],
            'propagate': False,
        },
    },
} 
```

一些想法我怎样才能更好地记录我的错误？

django 1.4 Tastypie 0.9.11 sentry 3.5.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:50:37.237

我的设置和你几乎一模一样，而且效果很好。我有什么不同：

1.  Sentry 4.7.9，可能是那个
2.  我在设置中没有明确的美味记录器，因为美味派已经记录到由哨兵处理程序处理的错误。
3.  我将我的服务器保持在 DEBUG=False 上。使用 DEBUG=True，tastepie 将不会记录任何内容，只是吐出错误消息作为响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:33:26.293

即使通过在 DEBUG 上记录所有内容，我也看不到带有这 500 个错误的 Sentry 日志。

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
        },
    },
    'handlers': {
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose'
        }
    },
    'loggers': {
        '': {
            'level': 'DEBUG',
            'handlers': ['console'],
        },
    }
} 
```

所以，在`settings.py` `MIDDLEWARE_CLASSES`我用以下实现替换`raven.contrib.django.raven_compat.middleware.Sentry404CatchMiddleware`了`myproduct.middleware.SentryCatchMiddleware`：

```
from raven.contrib.django.models import client
from raven.contrib.django.middleware import Sentry404CatchMiddleware
import logging

class SentryCatchMiddleware(Sentry404CatchMiddleware):
    def process_response(self, request, response):
        if response.status_code >= 500:
            data = client.get_data_from_request(request)
            data.update({
                'level': logging.ERROR,
                'logger': 'http500',
            })
            result = client.captureMessage(message='Internal Server Error: %s' % request.build_absolute_uri(), data=data)
            request.sentry = {
                'project_id': data.get('project', client.project),
                'id': client.get_ident(result),
            }
            return response
        return super(SentryCatchMiddleware, self).process_response(request, response) 
```

不过，我希望看到更好的解决方案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T22:41:49.740

使用 Tastypie 设置**[TASTYPIE_FULL_DEBUG](http://django-tastypie.readthedocs.io/en/latest/settings.html#tastypie-full-debug)**。使用 Sentry/Raven 如果您将**TASTYPIE_FULL_DEBUG**设置为**True**，它将记录异常并且核心**DEBUG**设置将控制输出是什么。

# c# - XMLTextWriter C#，没有找到标准 xml 的数据

> ID：11530374
> 
> 赞同：0
> 
> 时间：2012-07-17T20:27:07.123
> 
> 标签：c#, exception, error-handling, xmltextwriter

所以我在这里处理一些硬核遗留代码。我们正在谈论 .NET 2.0。我的问题是我的程序在运行时吐出一个异常信息，说没有为标准 XML 找到数据。我正在使用 XMLTextWriter 类。由于这是为了工作，我无法粘贴很多代码，但下面是其中的一部分。我想知道世界上是什么导致了这个错误。任何帮助将非常感激。

```
string sStdFile=folder + sNewDtTm + "_s.xml";

                // Create a new XmlTextWriter instance
                if(dt.Rows.Count>0) 
                {
                    XmlTextWriter writer = new XmlTextWriter(sStdFile, Encoding.UTF8);

                    // start writing!
                    writer.WriteStartDocument();
                    writer.WriteStartElement("secret");

                    foreach(DataRow dr in dt.Rows)
                    {

                        writer.WriteStartElement("secret");

                        writer.WriteElementString(sFieldNames[0], dr[sFieldNames[0]].ToString());
                        writer.WriteElementString(sFieldNames[1], dr[sFieldNames[1]].ToString());
                        writer.WriteElementString(sFieldNames[2], dr[sFieldNames[2]].ToString());
                        writer.WriteElementString(sFieldNames[3], dr[sFieldNames[3]].ToString());
                        writer.WriteElementString(sFieldNames[4], dr[sFieldNames[4]].ToString());
                        writer.WriteElementString(sFieldNames[5], dr[sFieldNames[5]].ToString());
                        writer.WriteElementString(sFieldNames[6], dr[sFieldNames[6]].ToString());
                        writer.WriteElementString(sFieldNames[7], dr[sFieldNames[7]].ToString());
                        writer.WriteElementString(sFieldNames[8], dr[sFieldNames[8]].ToString());
                        writer.WriteElementString(sFieldNames[9], dr[sFieldNames[9]].ToString());
                        writer.WriteElementString(sFieldNames[10], dr[sFieldNames[10]].ToString());
                        writer.WriteElementString(sFieldNames[11], dr[sFieldNames[11]].ToString());
                        writer.WriteElementString(sFieldNames[12], dr[sFieldNames[12]].ToString());

                        writer.WriteRaw("<" + sFieldNames[13] + ">");
                        writer.WriteCData(dr[sFieldNames[13]].ToString());
                        writer.WriteRaw("</" + sFieldNames[13] + ">"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:34:11.277

我看不到开始元素“秘密”的结束标签，而且 foreach 循环中的子标签是“秘密”，没有结束标签

所以请使用 WriteEndElement() 方法关闭标签

此外，代码不会显示 Close 方法是否被称为 XmlTextWriter

# php - 在 php 中创建菜单 - 子目录中的页面

> ID：11530385
> 
> 赞同：1
> 
> 时间：2012-07-17T20:27:51.047
> 
> 标签：php, navigation, subdirectory

我正在学习 PHP。我想创建一个菜单，可以从站点目录中的任何文件夹打开页面。以下是目录和文件的结构：

```
ROOT DIRECTORY
 dirINCLUDES
    header.php
    footer.php
    navigation.php

 dirPROJECT
    index.php
    project1.php
    project2.php

 index.php 
```

以下是我的navigation.php：

```
<ul class="accordion"  id="accordion">
<li><a href="index.php">home</a></li>
<li><a href="project/index.php">project</a></li>
</ul> 
```

现在，当我单击“项目”链接时，它会将我带到 project/index.php，但是当我在该页面上并单击“主页”链接时，它不会将我带到主页。我已将 dir INCLUDES 中的所有 php 文件包含到 index.php 和 project/index.php 文件中。

任何帮助都感激不尽。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:33:16.487

尝试这个...

```
<ul class="accordion"  id="accordion"> <li><a href="../index.php">home</a></li> <li><a href="index.php">project</a></li> </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:33:30.843

尝试完整路径，如 /index.php、/project/index.php 等

```
<li><a href="/mysite/index.php">home</a></li>
<li><a href="/mysite/project/index.php">project</a></li> 
```

编辑的链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:35:45.053

```
href="<?echo dirname(dirname(__FILE__)).'directory/file.php';?>" 
```

或者

```
href="/directory/file.php" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T20:38:39.800

```
function menu($dir){
$files = glob($dir.'/*');
$html = '<ul>';
foreach($files as $file){
    if(is_dir($file)){
        $html .= menu($file);
    }else{
        $html .= '<li><a href="'. $file .'">'. basename($file,'.php') .'</a></li>';
    }
}
$html .= '</ul>';
return $html; 
```

}

`echo menu("./*");`

# javascript - jQuery显示/隐藏不起作用

> ID：11530388
> 
> 赞同：2
> 
> 时间：2012-07-17T20:28:04.283
> 
> 标签：javascript, jquery, html, show-hide

试图查看所有其他关于为什么这不起作用的问题，没有运气。我在我的标题中加载这个：

`<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>`

这是我的脚本：

```
$(document).ready(function() {
    $("#knee-tab").hide();
    $("#shoulder-tab").hide();
});
$(function () {
    $("#patient-portal-link").click (function (event) {
        $("#patient-portal-tab").show();
        $("#knee-tab").hide();
        $("#shoulder-tab").hide();
    });
}); 
$(function () {
    $("#knee-link").click (function (event) {
        $("#patient-portal-tab").hide();
        $("#knee-tab").show();
        $("#shoulder-tab").hide();
        }); 
}); 
$(function () {
    $("#shoulder-link").click (function (event) {
        $("#patient-portal-tab").hide();
        $("#knee-tab").hide();
        $("#shoulder-tab").show();
    }); 
}); 
```

以下是用于调用脚本的链接：

```
<ul>
<li><a id="#patient-portal-link">Patient Portal</a></li>
<li><a id="#knee-link">Knee</a></li>
<li><a id="#shoulder-link">Shoulder</a></li>
</ul> 
```

然后我有三个 div，它们的名称如下：

```
<div id="patient-portal-tab">Patient portal content</div>
<div id="knee-tab">Knee content</div>
<div id="shoulder-tab">Shoulder content</div> 
```

和div 在页面加载时正确隐藏`knee`，`shoulder`但链接什么也不做。我正在使用谷歌浏览器，在检查元素时，我没有收到关于 javascript 的错误报告。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T20:29:10.037

`#`从您的 ID 值中删除字符。jQuery 中的`#`字符表示元素的 ID，因此您需要两个`#`' ( `##knee-tab`) 才能工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:29:49.303

您确定在 ID 前面有 # 符号吗？像这样重写它，它会工作

```
<li><a id="patient-portal-link">Patient Portal</a></li>
<li><a id="knee-link">Knee</a></li>
<li><a id="shoulder-link">Shoulder</a></li> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T20:32:43.453

您的问题出在您的 HTML 代码中。HTML 中的 id 不需要哈希“#”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T20:33:16.767

`$(function() ... )``$(document).ready(function() ...)`如果我没记错的话，这只是简写。所以你使用了太多的就绪调用。试试这个：

```
$(document).ready(function() {
    $("#knee-tab").hide();
    $("#shoulder-tab").hide();

    $("#patient-portal-link").click (function (event) {
        $("#patient-portal-tab").show();
        $("#knee-tab").hide();
        $("#shoulder-tab").hide();
    });{

    $("#knee-link").click (function (event) {
        $("#patient-portal-tab").hide();
        $("#knee-tab").show();
        $("#shoulder-tab").hide();
        }); 

    $("#shoulder-link").click (function (event) {
        $("#patient-portal-tab").hide();
        $("#knee-tab").hide();
        $("#shoulder-tab").show();
    }); 

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-26T10:53:05.050

点击[这里](http://fiddle.jshell.net/2hkjd225/)

检查此代码中的此小提琴您已在 id 中输入了额外的 # 将您以前的 html 覆盖为小提琴中给出的 html 代码

# google-apps-script - 如何动态更改 Google 网站页面的电子表格？

> ID：11530391
> 
> 赞同：0
> 
> 时间：2012-07-17T20:28:06.903
> 
> 标签：google-apps-script, google-sites

我已经检查了[这个问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=572)，现在我知道（使用 getHtmlContent 和 setHtmlContent）如何创建一个 webapp：

a) 考虑到活动用户 ID

b) 相应地选择要显示的正确电子表格

c) 使用所选电子表格调整 Google 网站页面

但我的问题是我想在用户单击链接时动态调整页面（从导航区域）。如何触发我的 webapp？

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:21:07.070

我认为不可能从导航区域中的链接调用脚本。但是绝对可以在 Google 协作平台页面的内容区域中的链接上调用 Apps 脚本。

您可以考虑从这样的链接调用您的脚本

# c++ - 基于汉明距离的快速 NN 相似性搜索的 LSH？

> ID：11530403
> 
> 赞同：4
> 
> 时间：2012-07-17T20:28:55.530
> 
> 标签：c++, opencv, sift, knn, orb

我正在研究对多维向量的快速 NN 搜索。（就像在提取和计算了特征向量之后搜索相似的图像）

我目前正在使用**ORB**，它用一些字符串来描述它的关键点。
要比较 2 个描述符 ORB 需要汉明距离。

我已经阅读过 LSH 根据欧几里德距离 (L2) 或 Manathann 距离 (L1) 计算其哈希表。这是否意味着 LSH`isn't`是需要汉明距离的向量比较的选项？

## 编辑

LSH 可以处理汉明距离，因为它根据初始位字符串上的子字符串制作哈希表，这就是它起作用的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:39:41.403

汉明距离相当于限制为布尔向量的 L1（曼哈顿）距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T10:25:40.700

不，LSH 不限于 L1 或 L2（欧式距离）。它只是超平面分区或索引的一种高级方法，不管你怎么称呼它。

LSH 将帮助您找到查询向量的最可能的 KNN 向量。之后，您可以使用 l1/l2/cosine/damming 代码进行详细的相似度或距离计算。

# php - 通过 PHP 脚本从其他网站获取 div

> ID：11530406
> 
> 赞同：1
> 
> 时间：2012-07-17T20:29:08.383
> 
> 标签：php, iframe, render

我对我的一个项目有一个令人头疼的问题。我想将另一个网站的规范 div 渲染到地雷中（我已获得许可）。

它涉及以下网站：[http ://www.gsmarena.com/htc_one_x-4320.php](http://www.gsmarena.com/htc_one_x-4320.php)

分区：`<div id="specs-list"></div>`

现在我有以下代码：

```
 <?php
function get_content_part($part=null, $website = null) 
{
$website = file_get_contents($website);
$data = str_replace("\n", '', $website);
echo preg_match("/\<div class\=\"'.$specs-list.'\"\>(.*)<\/div\>/",$data,$match);
return $match;
}
?> 
```

但是因为每个产品的链接都不同，所以我在 wordpress 中创建了一个自定义字段。URL 使用以下代码呈现：

```
<?php echo(types_render_field("gsmlink", array("alt"=>"gsmlink","proportional"=>"true"))); ?> 
```

这呈现了一个完全干净的源代码，只有文本。

现在我真的不知道我必须把这些数据放在哪里，所以脚本知道哪个 URL 和哪个 div。有人可以帮我弄这个吗？

# php - 在 Doctrine 中，使用 DQL 而不是 SQL 有什么好处？

> ID：11530409
> 
> 赞同：7
> 
> 时间：2012-07-17T20:29:29.640
> 
> 标签：php, sql, orm, doctrine, dql

在使用 Doctrine Classes 时需要自定义查询时，有人可以为我提供几个使用/学习 DQL 与 SQL 的明确（事实支持）理由吗？

我发现如果我不能使用 ORM 的内置关系功能来实现某些事情，我通常会在扩展的 Doctrine 或 DoctrineTable 类中编写自定义方法。在这种方法中，用直接 SQL 编写所需的内容（使用 PDO 和适当的准备好的语句/注入保护等......）。DQL 似乎是一种额外的学习/调试/维护语言，但在最常见的情况下并没有提供足够令人信服的理由。DQL 似乎并不比 SQL 复杂得多，因此值得使用——事实上，我怀疑您是否可以在没有扎实的 SQL 理解的情况下有效地使用 DQL。大多数核心 SQL 语法移植在您将与 PHP 一起使用的最常见的数据库中都相当不错。

我错过/忽略了什么？我确信这是有原因的，但我想听听那些有意大量使用它的人，以及尝试使用纯 ole SQL 的好处。

我不是在寻找支持 ORM 的论据，而是在传统的 LAMP 设置（使用 mysql、postgres 等）中需要做一些超出核心“按关系获取”类型需求之外的事情时的 DQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:30:59.943

老实说，我是使用 Doctrine1.2 学习 SQL 的 :) 我什至不知道外键、级联操作、像 group_concat 这样的复杂函数以及许多其他东西。索引搜索也是非常好的和方便的东西，开箱即用。

DQL 更易于编写和理解代码。例如，这个查询：

```
$query = ..... // some query for Categories
   ->leftJoin("c.Products p") 
```

它将在类别和产品之间进行左连接，您不必在 p.category_id=c.id 上写入。

而且，如果将来您将关系从一对多更改为多对多，则相同的查询将完全没有任何更改即可工作。教义会照顾到这一点。如果您使用 SQL 执行此操作，则必须更改所有查询以包含该中间多 2 多表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:55:03.147

我发现 DQL 更具可读性和方便性。如果配置正确，连接对象会更容易，查询也会更容易编写。

您的代码将很容易迁移到任何 RDBMS。

最重要的是，DQL 是您的对象模型的对象查询语言，而不是您的关系模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:30:28.697

使用 DQL 可以帮助您处理对象。如果插入数据库，您将插入一个对象

```
$test = new Test();
$test->attr = 'test';
$test->save(); 
```

如果从数据库中选择，您将选择一个数组，然后您可以将其填充到您的对象中

```
public function getTestParam($testParam)
     {
        $q=Doctrine_Query::create()
                ->select('t.test_id , t.attr')
                ->from('Test t ')
            $p = $q->execute();
            return $p;
     } 
```

您可以查看 Doctrine 文档以获取更多详细信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-20T15:56:56.483

Zeljko 的回答非常准确。

使用 DQL 而不是原始 SQL 的最重要原因（在我的书中）：Doctrine 将实体与其在数据库中持久化的方式分开，这意味着实体不应该随着底层存储的变化而变化。反过来，这意味着如果您希望对底层存储进行更改（即重命名列、更改关系），您不必触及 DQL，因为在 DQL 中您使用实体属性（这只会发生在根据您当前的映射，在幕后翻译以纠正 SQL）。

# haskell - 常量的单子？

> ID：11530412
> 
> 赞同：12
> 
> 时间：2012-07-17T20:29:52.593
> 
> 标签：haskell, monads

为什么没有 monad 实例`Control.Applicative.Const`？以下定义是正确的，还是违反了单子定律？

```
instance Monoid a => Monad (Const a) where
  return _ = Const mempty
  (Const x) >>= _ = Const x 
```

你能想到任何有用的应用程序吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-17T20:35:30.903

它违反了[左身份法则](http://www.haskell.org/haskellwiki/Monad_laws)：`return x >>= f`必须相同`f x`，但要考虑`f x = Const (x + 1)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-25T23:34:39.640

ehird 的回答解释了问题中的实例有什么问题。这里有一个更深入的解释，说明为什么没有其他实例可以工作，即使您要选择除 之外的约束`Monoid`，除非该类型只有一个居民（例如，`()`）。任何给定类型要么有零个居民，要么有一个居民，要么至少有两个居民。

###### 案例1：零居民

你可以写这个总函数，一个明显的矛盾：

```
{-# LANGUAGE EmptyCase #-}
oops :: void
oops = case getConst (return () :: Const TheEmptyType ()) of {} 
```

###### 案例2：一名居民

这种特殊情况实际上是可能的：它与`Proxy`. 为了完整起见，这里是：

```
instance Monad (Const ()) where
    return _ = Const ()
    Const () >>= _ = Const () 
```

###### 案例 3：至少有两个居民

让`x`并`y`成为您选择的类型的两个不同的居民。编写这个辅助函数：

```
f False = Const x
f True = Const y 
```

现在考虑左恒等律的这两个实例：

```
return False >>= f = f False
return True >>= f = f True 
```

通过参数化，没有办法实现`return`and`return False`是`return True`不同的，所以你最终得到相同的值必须等于`Const x`and `Const y`，这是一个矛盾，因为我们之前说过`x`and`y`是不同的。

# python - Bottle and SQLAlchemy multiple databases

> ID：11530413
> 
> 赞同：0
> 
> 时间：2012-07-17T20:29:59.630
> 
> 标签：python, sqlalchemy, wsgi, bottle

In the following code, if I hit /testDbOne I get no errors, if I hit /testDbTWo I get the following error:

```
TypeError('testDbTwo() takes exactly 1 argument (0 given)',) 
```

If I swap the position of engine1 and engine2, then testDbOne breaks and testDbTwo works. What am I doing wrong that I can't have SQLAlchemy create both sessions and install them into bottle as plugins?

```
Base = declarative_base()

#engine1
engine_s = create_engine('mysql://user:pass@localhost/dbone', echo=True)
create_session_s = sessionmaker(bind=engine_s)
bottle.install(SQLAlchemyPlugin(engine_s, Base.metadata, keyword="dbone"))

#engine2
engine = create_engine('mysql://user:pass@localhost/dbtwo', echo=True)
create_session = sessionmaker(bind=engine)
bottle.install(SQLAlchemyPlugin(engine, Base.metadata, keyword="dbtwo"))

#create the actual database sessions
dboneSession = create_session_s()
dbTwoSession = create_session()

@route("/testDbOne")
def testUserOne(dbone):
    return "no error here"

@route("/testDbTwo")
def testDbTwo(dbtwo):
    return "no error here" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:31:29.223

If you add sqlalchemy information to your route, then it starts to work ok. For example:

```
@route("/testDbOne", sqlalchemy=dict(keyword='dbone'))
def testUserOne(dbone):
    return "no error here"

@route("/testDbTwo", sqlalchemy=dict(keyword='dbtwo'))
def testDbTwo(dbtwo):
    return "no error here" 
```

Seems to work for me.

# gradle - 如何在 gradle 中重命名项目而不是使用文件夹名称？

> ID：11530420
> 
> 赞同：14
> 
> 时间：2012-07-17T20:30:30.980
> 
> 标签：gradle

我们希望将所有子项目都称为 sdi-xxx 和 sdi-yyy，因此当我们运行 gradle eclipse 时，它​​会在 .project 中正确生成 eclipse 项目名称，并且当我们构建它时会创建一个名为 sdi-xxxx.jar 和 sid 的 jar 文件-yyyy.jar。我在某个地方看到过这个，但是对于我的一生，我在文档中找不到它（那个文档很大，我知道我在某个地方看到过）。

谢谢，院长

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T00:59:17.270

设置.gradle：

```
prefixProjectName(rootProject, "sdi-")

def prefixProjectName(project, prefix) {
  project.name = prefix + project.name
  project.children.each { prefixProjectName(it, prefix) }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-11T00:05:15.020

根据 Peter N 的建议，我目前在我的父母 settings.gradle 中有以下内容

```
include 'xxx', 'yyy'
rootProject.children.each { it.name = "sdi-" + it.name } 
```

如果您希望将根父级的名称用作前缀，您可以这样做

```
include 'xxx', 'yyy'
rootProject.children.each { it.name = rootProject.name + it.name } 
```

# pdf - 使用开源软件可填写、可保存表单的 PDF

> ID：11530421
> 
> 赞同：8
> 
> 时间：2012-07-17T20:30:31.957
> 
> 标签：pdf, open-source, field, save

我的问题是[这个](https://stackoverflow.com/questions/640063/how-do-i-enable-saving-of-filled-in-fields-on-a-pdf-form)问题的延伸。

有没有办法使用开源软件创建包含可填写、可保存表单的 PDF？为此目的的任何开发工作或库都会获得积分。Acrobat 以外的任何软件也都可以得分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:38:37.553

**2013 年 2 月更新**

根据[这个答案](https://stackoverflow.com/a/15144302/501196)， Adobe Reader XI 允许保存任何类型的 PDF 表单。我自己测试了它并且它有效。

* * *

*我的旧答案：*

如果您想生成**可以使用 Adob​​e Acrobat Reader 填写和保存的 PDF 表单**，那么您就不走运了。此类 PDF 文件包含只有 Adob​​e Acrobat 可以生成的加密数字证书。Adobe Acrobat Reader 在启用保存修改之前验证 PDF 表单上是否存在此证书。

然后，您的选择是使用 Adob​​e Acrobat 生成表单，或者使用其他方法来获取包含填充数据的 PDF 文件。一种常见的方法是在您的 PDF 文件中包含一个提交按钮，该按钮将您的字段值发布到 Web 服务器，然后您可以使用您选择的库在那里填写您的 PDF 文件。

这是一个将这种方法与商业图书馆[Amyuni PDF Creator](http://www.amyuni.com/en/developer/pdfcreator/features.html)一起使用的示例。

[在 Silverlight 应用程序中编辑 PDF 表单 (AcroForms)](http://www.codeproject.com/Articles/374210/Editing-PDF-Forms-AcroForms-within-a-Silverlight-A)（*通常适用免责声明*）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T22:19:19.343

您可以使用 OpenOffice 创建文档并导出为可填充或不可填充的 PDF。我已经做到了，这很容易。不太容易的部分是设置填写数据的提交。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-06T11:48:10.107

自 3.2 版起的 OpenOffice 和 LibreOffice 能够创建可填写的 PDF 表单。我唯一无法在其中正常工作的是计算。但是对于其他一切，这些免费的开源办公套件都很棒，包括带有选择的组合框！

您甚至可以非常简单地设置提交到电子邮件按钮，无需编码！哇。OpenOffice 和 LibreOffice 非常适合创建有效的可填写 PDF 表单！

试一试。你没有什么可失去的，它不会花费你一分钱。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-25T09:33:04.597

我认为这应该有效。试试 PDF Form Designer——它是一个开源应用程序。[看这里](http://pdfformsdesigne.sourceforge.net/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T20:35:10.060

我的“goto”开源 .NET PDF 库是[ITextSharp](http://sourceforge.net/projects/itextsharp/)。不确定它是否支持可填写的表格，我从来不需要这样做。总之值得一看。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-28T19:46:01.533

用最新版的Adobe Reader，Adobe Reader XI，好像可以保存表格了。

从他们的网页：[直接在 PDF 表单上输入您的回复，或单击并填写表单字段。然后保存提交](http://www.adobe.com/uk/products/reader/features.html)

# java - 在java中使用SAX解析器从xml文件中提取xml节点（不是文本，而是完整的xml）和其他测试节点

> ID：11530440
> 
> 赞同：0
> 
> 时间：2012-07-17T20:32:18.793
> 
> 标签：java, xml, sax, stax

我必须从每个范围约 500MB 的大型 xml 文件中读取。批处理通常在每次运行中处理 500 个此类文件。我必须从中提取文本节点，**同时从中提取 xml 节点**。我在 java 中使用了 xpath DOM 以便于使用，但是由于内存问题，由于我的资源有限，这不起作用。

我现在打算在 java 中使用 SAX 或 stax - 可以轻松提取文本节点，但我不知道如何使用 sax 从 xml 中提取 xml 节点。

一个样品：

```
<?xml version="1.0"?>
<Library>
  <Book name = "ABC">
    <Author>John</Author>
    <PrintingCompanyDT><Printer>Sam</Printer><Printmachine>Laser</Printmachine>    
    <AssocPrint>Oreilly</AssocPrint> </PrintingCompanyDT>
  </Book>
  <Book name = "123">
    <Author>Mason</Author>
    <PrintingCompanyDTv<Printervkelly</Printer><Printmachine>DOTPrint</Printmachine>
    <AssocPrint>Oxford</AssocPrint> </PrintingCompanyDT>
  </Book>
</Library> 
```

预期结果：1）书籍：ABC：
作者：John
PrintCompany 详细 XML：

```
<PrintingCompanyDT>
  <Printer>Sam</Printer>
  <Printmachine>Laser</Printmachine>
  <AssocPrint>Oreilly</AssocPrint> 
</PrintingCompanyDT> 
```

2) 书籍：123
作者：Mason
PrintCompany 详细 XML：

```
<PrintingCompanyDT>
  <Printer>kelly</Printer>
  <Printmachine>DOTPrint</Printmachine>
  <AssocPrint>Oxford</AssocPrint>
</PrintingCompanyDT> 
```

如果我尝试以常规方式在 public void characters(char ch[], int start, int length) 方法中附加字符，我会得到以下
1)Book: ABC:
Author:John
PrintCompany Detail XML:

```
Sam 
  Laser
      Oreilly 
```

正是内容和空间。

有人可以建议如何通过 Java 中的 SAX 或 StaX 解析器从 xml 文件中提取 xml 节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:53:32.487

我很想将[XOM](http://xom.nu)用于此类任务，而不是直接使用 SAX 或 StAX。XOM 是一种类似于 DOM 或 JDOM 的基于树的表示，但它支持以一种半流式方式处理 XML“树枝”，非常适合您有许多可以独立处理的类似元素的情况其他。每个`Node`人都有一个`toXML`将节点打印为 XML 的方法。

```
import nu.xom.*;

public class LibraryProcessor extends NodeFactory {
  private Nodes empty = new Nodes();
  private bookNum = 0;

  /** Called for each closing tag in the XML */
  public Nodes finishMakingElement(Element element) {
    if("Book".equals(element.getLocalName())) {
      bookNum++;
      // process the complete Book element ...
      processBook(element);
      // ... and throw it away
      return empty;
    } else {
      // process other elements (except Book) in the normal way
      return super.finishMakingElement(element);
    }
  }

  private void processBook(Element book) {
    System.out.println(bookNum + ": " +
        book.getAttributeValue("name"));
    System.out.println("Author: " +
        book.getFirstChildElement("Author").getValue());
    System.out.println("PrintCompany Detail XML: " +
        book.getFirstChildElement("PrintingCompanyDT").toXML());
  }

  public static void main(String[] args) throws Exception {
    Builder builder = new Builder(new LibraryProcessor());
    builder.build(new File(args[0]));
  }
} 
```

这将通过 XML 文档进行，依次`processBook`为每个元素调用一次。`Book`在其中`processBook`，您可以将整个`Book`XML 树作为 XOM 节点访问，但不必一次性将整个文件加载到内存中 - 两全其美。[XOM 教程](http://xom.nu/tutorial.xhtml)的“工厂、过滤器、子类化和流式处理”部分提供了有关此技术的更多详细信息。

此示例仅显示 XOM API 的最基本部分，但如果您需要进行更复杂的处理，它还提供了强大的 XPath 支持。例如，您可以直接访问using中的`PrintMachine`元素`processBook`

```
Element machine = (Element)book.query("PrintingCompanyDT/PrintMachine").get(0); 
```

或者如果结构不是那么规则，例如，如果`PrintingCompanyDT`有时是直接孩子，`Book`有时是更深的（例如孙子），那么您可以使用类似的查询

```
Element printingCompanyDT = (Element)book.query(".//PrintingCompanyDT").get(0); 
```

（`//`作为在任何级别查找后代的 XPath 表示法，而不是`/`仅查找直接子代的 XPath 表示法）。

# linux - 所有系统调用都是非实时安全的吗？

> ID：11530446
> 
> 赞同：5
> 
> 时间：2012-07-17T20:32:51.987
> 
> 标签：linux, real-time, system-calls

我听说在 Linux（RT_PREEMPT 内核）中执行系统调用从来都不是实时安全的。

这似乎过于严格——你的进程如何在没有系统调用的情况下做任何事情（除非它必须完全通过 DMA 完成）？

这是真的，还是某些系统调用（如clock_gettime）是实时安全的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-07T02:46:42.140

如果您所说的“实时安全”是指保证在有限时间内执行，那么与大多数通用操作系统一样，linux 也不是实时安全的。

各种[实时操作系统](https://en.wikipedia.org/wiki/Real-time_operating_system)（RTOS）提供了这种保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-06T14:25:41.407

您可以查看存储库中`functions`的文件。`jack_interposer`这些*不是*实时安全的。这是一个比询问哪些*是*实时安全的更容易的问题。应该避免的一个好的经验法则是：

*   任何阻塞同步功能
*   任何内存分配函数
*   任何 I/O 功能
*   复杂度大于 O(n) 的算法（在用户空间内），其中 n 是输入缓冲区中的元素数。

# json - 如何序列化 AutoBean (GWT) 中的列表？

> ID：11530451
> 
> 赞同：7
> 
> 时间：2012-07-17T20:33:27.537
> 
> 标签：json, gwt, serialization, autobean

我试图弄清楚如何在 GWT 中使用 AutoBean 序列化列表，但我不断收到空指针异常。

这是我所拥有的：

```
 GuideCreatorFactory beanFactory = AutoBeanFactorySource.create(GuideCreatorFactory.class);

    List<Guide> guides = new LinkedList<Guide>();
    Guide guide = new Guide();
    guide.setText("this is the text");
    guide.setTitle("this is the title");
    guides.add(guide);

    GuideCreatorList<Guide> impl = new GuideCreatorListImpl();
    impl.setGuides(guides);

    System.out.println("Serializing the given parameter to JSON");

    // Fails on the below lines w/ NPE
    AutoBean<GuideCreatorList> bean = beanFactory.create(GuideCreatorList.class, impl);
    String json = AutoBeanCodex.encode(bean).getPayload();
    System.out.println("guides as json: " + json); 
```

谁能帮我指出正确的方向？非常感谢你。

这是支持的类和接口：

```
public interface GuideCreatorFactory extends AutoBeanFactory {
  AutoBean<GuideCreator> createGuide();

  AutoBean<GuideCreatorList> createGuideList();
}

public interface GuideCreator {

  public String getText();

  public void setText(String text);

  public String getTitle();

  public void setTitle(String title);

}

public interface GuideCreatorList<T extends GuideCreator> {
  public List<T> getGuides();

  public void setGuides(List<T> guides);
}

class GuideCreatorListImpl implements GuideCreatorList<Guide> {
    private List<Guide> guides;

    public GuideCreatorListImpl() {

    }

    @Override
    public List<Guide> getGuides() {
      return guides;
    }

    @Override
    public void setGuides(List<Guide> guides) {
      this.guides = guides;
    }
    }; 
```

这是NPE：

```
java.lang.NullPointerException
    at com.google.web.bindery.autobean.shared.impl.AutoBeanCodexImpl.doEncode(AutoBeanCodexImpl.java:558)
    at com.google.web.bindery.autobean.shared.impl.AutoBeanCodexImpl$ObjectCoder.encode(AutoBeanCodexImpl.java:321)
    at com.google.web.bindery.autobean.shared.impl.AutoBeanCodexImpl$CollectionCoder.encode(AutoBeanCodexImpl.java:163)
    at com.google.web.bindery.autobean.shared.impl.AutoBeanCodexImpl$PropertyGetter.encodeProperty(AutoBeanCodexImpl.java:413)
    at com.google.web.bindery.autobean.shared.impl.AutoBeanCodexImpl$PropertyGetter.visitReferenceProperty(AutoBeanCodexImpl.java:389)
    at com.google.web.bindery.autobean.shared.AutoBeanVisitor.visitCollectionProperty(AutoBeanVisitor.java:229)
    at com.google.web.bindery.autobean.vm.impl.ProxyAutoBean.traverseProperties(ProxyAutoBean.java:300)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.traverse(AbstractAutoBean.java:166)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.accept(AbstractAutoBean.java:101)
    at com.google.web.bindery.autobean.shared.impl.AutoBeanCodexImpl.doEncode(AutoBeanCodexImpl.java:558)
    at com.google.web.bindery.autobean.shared.AutoBeanCodex.encode(AutoBeanCodex.java:83)
    at com.districthp.core.ui.client.review.JsonSerializationText.testMyObject(JsonSerializationText.java:82)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T23:29:17.767

不幸的是，这是一个已知问题：[https ://github.com/gwtproject/gwt/issues/6903](https://github.com/gwtproject/gwt/issues/6903)

问题是列表中的项目没有包装到`AutoBean`s中，因此`AutoBeanUtils#getAutoBean`在`AutoBeanCodexImpl.ObjectCoder#encode`返回`null`中，因此 NPE 在中`AutoBeanCodexImpl#doEncode`。

`AutoBean`解决方法涉及用包装实际值的 s替换列表项。

# xcode - 我如何才能真正卸载 Xcode？

> ID：11530454
> 
> 赞同：22
> 
> 时间：2012-07-17T20:33:31.900
> 
> 标签：xcode, homebrew

我在使用 Xcode 并尝试安装 Homebrew 时遇到问题，所以我决定卸载 Xcode 并重新开始。但是，我在网上任何地方都没有找到任何卸载方法，可以工作。

对于初学者，我是通过 App Store 安装的，不管它值多少钱。这似乎意味着有些事情与那些没有的人不同。

接下来，我没有`/Developer`目录，所以任何想要我运行以`/Developer`路径开头的东西的东西都行不通。

没有`/Library/Developer/Shared/uninstall-devtools`这样的执行总是会失败。

从我的 Applications 文件夹中删除 Xcode.app 并清空垃圾箱，除了删除实际应用程序本身之外似乎没有做任何事情，App Store 仍然认为它已安装。我仍然无法安装 Homebrew。

我到底怎么能成功卸载这个东西？

编辑：没有人知道如何卸载 Xcode 的 App Store 版本以便我可以重新安装它吗？=(

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T20:38:10.167

将 Xcode.app 拖入垃圾箱。就是这样。也将你的目录放入 bin `/Developer`（如果你有一个来自旧 Xcode 安装的目录。）

该`/Developer`目录现在位于`/Applications/Xcode.app/Contents/Developer`. 应用程序包现在包含所有内容。

...一切，也就是说，除了您可能需要的命令行工具。这些可以从 Xcode 中安装（Preferences->Downloads->Components 选项卡）。仪器（和其他开发人员工具）现在通过 Xcode 主菜单（打开开发人员工具）启动，而不是直接从 Finder 加载。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-25T00:41:10.103

终于找到了重新安装XCode的解决方案。尽管我已将其从主应用程序文件夹中删除，但我在外部驱动器上安装了辅助系统，并且 XCode 存在于那里。从那个驱动器上的 Applications 文件夹中删除它——即使我没有从它启动——允许我从应用商店重新安装 XCode。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-20T13:37:58.187

这个解决方案对我有用：

查找 Xcode 的快捷方式（桌面、Dock 等）

转到：“选项”，然后转到“在 Finder 中显示”

您现在正在查找的文件应命名为：“Xcode.app”。这是您需要删除的文件。

现在将此文件（拖放）移动到垃圾箱*。*如果您尝试运行 Xcode，它会告诉您它无法运行，因为它在垃圾箱中。

清空垃圾*。*这个过程花了我一些时间，因为 Xcode 的大小约为 1.8 Gb

重新启动您的 Mac。

去App store（快捷方式在Dock--Launchpad打开AS，在“Developer Tools”下会找到Xcode。AS让我只安装它。它通过自动下载和安装来安装Xcode。

重新安装后，所有错误和问题（我有）都消失了。该解决方案适用于：Mac mini 上的 Xcode 5.0.1，Mac OS X 10.9.1。考虑 sudo 命令的其他解决方案对我不起作用。我不知道 Xcode 5 是如何安装的。Xcode 位于 Applications 文件夹中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T20:40:34.013

您需要安装命令行工具（通过 Xcode Preferences）才能安装 Homebrew。

Xcode 不再创建`/Developer`文件夹，无论您是否通过 App Store 安装它。这不应该（也不会）导致 Homebrew 出现问题。

# c# - 如何用 C# 正确解析这个 XML？

> ID：11530465
> 
> 赞同：1
> 
> 时间：2012-07-17T20:34:34.220
> 
> 标签：c#, xml

我有以下 XML 代码：

```
<Presets>
  <Preset ID="0" Name="aaaa">
    <IncludedChampions>
      <ID>5</ID>
      <ID>6</ID>
      <ID>7</ID>
    </IncludedChampions>
  </Preset>
  <Preset ID="1" Name="some">
    <IncludedChampions>
      <ID>4</ID>
      <ID>5</ID>
      <ID>6</ID>
    </IncludedChampions>
   </Preset>
</Presets> 
```

我试图用这个来解析它：

```
XmlReader reader = XmlReader.Create("./config.xml");
while (reader.Read())
{
   while (reader.ReadToFollowing("Preset"))
   {
       presetList.Add(new Preset());
       presetList[presetList.Count - 1].name = reader.GetAttribute(1);
       Console.WriteLine("Preset list ID " + Convert.ToString(presetList.Count - 1));

      while (reader.ReadToFollowing("ID"))
      {
         Console.WriteLine("Champion ID " + reader.ReadElementContentAsString());
      }
   }
} 
```

但在输出中，我只看到“预设列表 ID 0”，然后是所有 ID。另一个预设 ID 去哪儿了？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:37:24.610

[`XmlReader.ReadToFollowing`](http://msdn.microsoft.com/en-us/library/ms162536.aspx)记录如下：

> 读取直到找到具有指定限定名称的元素。

现在，从第一个 Preset 中的 ID 7 开始，名称为“ID”的“下一个后续元素”是什么？它是 ID 4，当然……它不仅搜索*兄弟姐妹*。

正如尼克建议的那样，使用 LINQ to XML 会使这变得更简单......甚至只是`XmlDocument`模型，如果你真的被困在 .NET 2 上。

这是相关的 LINQ to XML 代码：

```
XDocument doc = XDocument.Load("config.xml");
foreach (var element in doc.Descendants("Preset"))
{
    var preset = new Preset { name = element.Attribute("Name").Value };
    presetList.Add(preset);
    Console.WriteLine("Preset list ID " + preset);
    foreach (var id in element.Descendants("ID"))
    {
        Console.WriteLine(id.Value);
    }
} 
```

# php - 当我搜索名称中包含任何空格的项目时，PHP MYSQL 查询没有找到任何结果

> ID：11530467
> 
> 赞同：-1
> 
> 时间：2012-07-17T20:34:38.393
> 
> 标签：php, mysql, search, spaces

我正在建立一个工作库存系统，我已经有一个搜索系统来搜索数据库。但是当我搜索名称中包含任何空格的项目时，它没有找到任何结果。这是我的脚本，任何帮助将不胜感激。

```
 <?php
    // we connect to our Database
    mysql_connect("localhost", "root", "") or die(mysql_error());
    mysql_select_db("inventory") or die(mysql_error());

    $find = $_POST['find'];

    echo "<h2>Search Results:</h2><p>";
    //If they did not enter a search term we give them an error
    if ($find == "")
    {
    echo "<p>You forgot to enter a search term!";
    exit;
    }

    // We perform a bit of filtering
    $find = strtoupper($find);
    $find = strip_tags($find);
    $find = trim ($find);

    //Now we search for our search term, in the field the user specified
    $data = mysql_query("SELECT * FROM parts WHERE vendor LIKE'%$find%' OR category
    LIKE'%$find%' OR prtid LIKE'%$find%' OR description LIKE '%$find%'");
    if (!$data) { // add this check.
    die('Invalid query: ' . mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:37:08.250

`%`只会在整个搜索文本的外部插入通配符。如果要处理多字搜索字符串，则需要编写更复杂的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:40:38.280

```
$searchTerms = explode(' ', $find);
$searchTermBits = array();
foreach ($searchTerms as $term) {
    $term = trim($term);
    if (!empty($term)) {
        $searchTermBits[] = "vendor LIKE '%$term%'";
    }
} 
```

then in query just implode the $searchTermBits instead of $term

# rally - Rally 中的查询结果不一致

> ID：11530471
> 
> 赞同：0
> 
> 时间：2012-07-17T20:34:53.553
> 
> 标签：rally

我尝试了今天最后一次更新的查询任务

```
queries.push({
  type:"task",
  key:"tasks",
  fetch:"WorkProduct,Name,FormattedID,ToDo,Owner,LastUpdateDate,RevisionHistory,Revisions",
  query: "(LastUpdateDate > 2012-07-17)",
  order: "LastUpdateDate desc"
}); 
```

然后使用自定义网格应用程序进行类似的查询

```
(LastUpdateDate > "2012-07-17") 
```

我注意到第一种方法的结果是第二种方法的子集。即某些任务在 2012-07-17 之后更新（我检查了修订版）并且在第一种方法的结果中丢失了。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:09:57.743

我之前在弄乱 API 时发现结果集有 200 个限制。

因此，任何可能返回超过 200 个的查询都需要分页。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T00:19:25.347

通过我与 Rally 的支持团队提出的 UI 运行报告时，我遇到了一个问题，当尝试使用范围功能和 > 和 < 的组合时，页面会发出错误。他们未能成功解决这个问题，我认为他们仍然认为这是他们管理中的一个缺陷。但是，我能够通过同时使用 >= 和 <= 运算符作为单独的过滤器来生成一个范围，从而获得解决方法。

我的观点是，您可能想尝试不同的运算符。

# javascript - 在全局代码中使用带标签的语句有什么问题？

> ID：11530485
> 
> 赞同：8
> 
> 时间：2012-07-17T20:35:55.293
> 
> 标签：javascript, jslint

我只是在浏览[JSLint 的源代码](https://github.com/douglascrockford/JSLint/blob/master/jslint.js)并注意到这段代码：

```
// Is this a labeled statement?
//...
if (next_token.labeled !== true || funct === global_funct) {
    stop('unexpected_label_a', label);
} //... 
```

有趣的部分是`funct === global_funct`比较。通过 JSLint 运行以下代码段会引发“意外标签”错误，因为带标签的语句位于全局执行上下文中（我知道，这是一个愚蠢的例子。[这是一个小提琴](http://jsfiddle.net/jamesallardice/PnMsf/)。）：

```
loop:
for (var i = 0; i < 10; i++) {
    if (i === 5) {
        break loop;
    }
} 
```

如果将相同的代码段放在函数中，JSLint 会非常满意，并且在遇到标签时不会抛出错误。[这是一个](http://jsfiddle.net/jamesallardice/PnMsf/2/)将通过 JSLint 的代码。代码可以粘贴到[JSLint 的在线版本中，](http://www.jslint.com/)如果你想尝试的话。

所以我的问题是：在全局代码中使用带标签的语句有什么问题，还是只是 Crockford 的另一个个人选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:14:44.610

在对标记语句的行为进行了一些调查之后，我认为这实际上只是 Crockford 的一个选择，实际上并没有真正的依据。据我所知，没有任何情况会导致与全局范围内的标签发生命名冲突（这似乎是人们想到 JSLint 不允许它的主要原因 - 请参阅有关问题的评论）。

ES5 规范[在标记语句的部分中声明](http://es5.github.com/#x12.12)了以下内容：

> 产生式*Identifier : Statement*通过将 *Identifier添加到**Statement*的标签集然后评估*Statement*来评估。
> 
> ...
> 
> 在评估*LabelledStatement*之前，包含的*Statement*被认为拥有一个空标签集，除非它是*IterationStatement*或*SwitchStatement*，在这种情况下，它被认为拥有由单个元素组成的标签集`empty`。

我认为这意味着每个语句都有一个标签集。标签标识符独立于变量和函数标识符，因此在语法上可以接受与同一范围内的变量具有相同标识符的标签。换句话说，这是有效的：

```
var label = "My Label";
label:
for (var x = 1; x < 10; x++) {
    break label;
} 
```

由于每个语句都有自己的标签集，因此这也是有效的：

```
label:
for (var x = 1; x < 10; x++) {
    //Looks for 'label' in label set of `break` statement, then `for` statement
    break label;
}
label:
for (var y = 5; y < 15; y++) {
    //Same again. Will never look for label outside the enclosing `for` statement
    break label;
} 
```

由于您可以标记任何语句（这毫无意义，但这是可能的），您可以标记一个带标签的语句：

```
another:
label:
for (var y = 5; y < 15; y++) {
    break label;
} 
```

在这种情况下，规范声明如下：

> 如果*LabelledStatement*本身有一个非空标签集，这些标签也会在评估之前添加到 Statement 的标签集。

在上面的代码片段中，`for`语句的标签集包含两个标签（`another`和`label`）。可以从语句中拆分为这些标签中的*任何一个。*`for`

最后，规范还指出（强调）：

> 带标签的语句仅与带标签的`break` 和`continue`语句一起使用。**ECMAScript 没有`goto`声明**。

因此，基于所有这些，我想不出全局代码中的任何标签干扰其他全局代码的可能方式。当然，您不太可能想要一个包含多个具有相同标识符的标签的程序，而 JSLint 已经通过抛出“标签已定义”错误来防止这种情况发生。但我认为它在全局执行上下文中处理标记语句的方式应该没有任何区别。

# perl - perl 表达式中是否有任何副作用 $a = $a++;

> ID：11530490
> 
> 赞同：3
> 
> 时间：2012-07-17T20:36:34.060
> 
> 标签：perl, auto-increment

有人请解释下一个：

在“Programming Perl”一书中描述了后缀自动增量运算符，如

> 放在后面时，它们 ( `$a--`, `$a++`) 在返回值后递增或递减变量。

所以，据我所知，`$a++`永远不会在无效的上下文中使用，因为有人说过

> 他们增加或减少**变量**

但在下一个示例中，变量的值永远不会改变：

```
my $a = 3;
$a = $a++;
say $a; #always outputs 3 
```

所以我的假设是，当值被分配给同一个变量时，没有理由使用后自动增量，但是“编程 Perl”中的定义应该被认为是错误的，因为运算符不影响变量，但变量中的值（至少在那个例子中）。是对的吗？

提前欣赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T20:44:08.083

为什么，后缀 autoincrement 和 autodecrement 运算符实际上都经常在 void 上下文中使用，因为它们影响*变量*- 而不是*value*。

您的示例按其工作方式工作，因为变量在其旧值被分配给它*之前被后递增。*换句话说，顺序

```
my $a = 3; $a = $a++; 
```

...是...

```
1) $old_value = $a;
2) $a = $a + 1;
3) $a = $old_value; 
```

如果您在示例中替换`$a = $a++`为`$b = $a++`，然后打印 $b 和 $a 的值，您将清楚地看到差异：虽然`$a`增加（因此等于 4），但被分配了(3)`$b`的旧值。`$a`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-17T20:52:13.593

> 所以我的假设是，当值被分配给同一个变量时，没有理由使用后自动增量，但是“编程 Perl”中的定义应该被认为是错误的，因为运算符不影响变量，而是变量中的值。是对的吗？

我认为这真的是关于术语的。

有`$a++`和`++$a`。它们都影响变量`$a`。

```
my $a = 3;
$a++;
say $a; 
```

给你`4`，但也给你

```
my $a = 3;
++$a;
say $a; 
```

不同之处在于它们返回的内容。

`$a++`首先返回**旧**值，然后递增它。`++$a`首先进行增量，然后返回**新**值。

```
my $a = 3;
say $a++;
say $a; 
```

给你：

```
3
4 
```

尽管：

```
my $a = 3;
say ++$a;
say $a; 
```

印刷：

```
4
4 
```

但是你很难将返回值赋给`$a++`一个变量。您更有可能在另一个操作中使用它，您首先希望使用旧值，然后增加变量。

以下是一些非常蹩脚的例子：

```
my $a = 3;
say $a while $a--; 
```

印刷：

```
2
1
0 
```

和：

```
my $a = 3;
say $a while --$a; 
```

印刷：

```
2
1 
```

有时在某些情况下，您想要某物的 0 或第 0 个索引。有时你不想要它。两者都是有用的恕我直言。

# sql - 加入这样的子选择以避免重复的绑定变量是不好的形式吗？

> ID：11530491
> 
> 赞同：-2
> 
> 时间：2012-07-17T20:36:36.313
> 
> 标签：sql, join, subquery, bind-variables

这是一个简化的示例查询，以“传统”方式完成（在 PostgreSQL 8.3 中测试的示例查询）：

```
PREPARE a AS SELECT *
FROM users
WHERE uid=$1
    OR parent=$2;
EXECUTE a(0,0); 
```

问题是，两次传递相同的绑定变量很麻烦（更复杂的查询需要六次或更多次）。

当然，SQL 允许在同一个查询中多次使用同一个绑定变量：

```
PREPARE b AS SELECT *
FROM users
WHERE uid=$1
    OR parent=$1;
EXECUTE b(0); 
```

但是许多 DB API 层不支持（或者不容易），因此使用这种方法变得*更加麻烦。*

我可以通过针对子选择添加一个 JOIN 来解决这个问题：

```
PREPARE c AS SELECT uids.*
FROM users
JOIN (SELECT $1::INT AS uid) AS x ON true
WHERE uids.uid=x.uid 
    OR uids.parent=x.uid;
EXECUTE c(0); 
```

Explain 表明，正如人们所期望的那样，后一个选项具有最复杂的执行计划，但是，至少在这个示例中，它始终比 a 执行得快，并且几乎不比 b 慢（尽管准备查询比任何一个都花费更长的时间）其他两个选项）。

所以我的问题是：

**对于更复杂的查询，这种 JOIN/子选择结构是好是坏，作为避免重复绑定变量的一种方式？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:49:40.090

不是您问题的直接答案，但在这种特殊情况下，您应该能够像这样重写您的查询：

```
PREPARE b AS SELECT *
FROM users
WHERE $1 IN (uid, parent);

EXECUTE b(0); 
```

# java - 在下面的代码中，让当前节点可用于垃圾收集是个好主意吗？

> ID：11530494
> 
> 赞同：2
> 
> 时间：2012-07-17T20:36:48.767
> 
> 标签：java, linked-list

我在 Java 中使用下面的代码从链表中删除重复数据，我的问题是明确设置 current.next = null 对我来说是否是个好主意，即当前将是重复数据，所以我设置了前一个节点的在当前的下一个但要在java中删除的当前旁边意味着使其可用于gc。那么，我真的需要明确设置它吗？

```
public void removeDuplicates()
{
    HashSet<Integer> nodeSet = new HashSet<Integer>();
    Node previous = this;
    Node current = previous;
    while(current!=null)
    {
         if(!nodeSet.contains(current.data))
         {
             nodeSet.add(current.data);
             previous = current;
             current = current.next;
         }
        else
         {
             previous.next = current.next;
             current.next = null;
             current = previous.next;

         }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:41:17.977

As soon as `current` becomes unreachable, it will make zero difference what objects are reachable from it. So no, this is not necessary.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:39:36.900

如果您的节点无法访问，那么它的`next`节点也将无法访问（假设它只有 1 个父节点）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T20:41:19.953

Nope! You hit the nail on the head. The set to null of current is overwritten anyway when you set its value on the next run through. Since you only care about 'current' when it has a value hen you don't need to worry about setting it to null when you aren't using it. The GC will do its job when the method (and its variables) go out of scope.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T20:40:46.930

That shouldn't have a negative effect, no.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T21:47:58.177

有时由标准库代码本身执行此操作的原因是，“如果一个对象没有被任何其他对象指向，它将在下一个 GC 步骤中被收集”的基本假设在现代 JVM 上是错误的.

一旦`current`节点在老年代，它的下一个指针将被认为是年轻 GC 运行的根集的一部分，这反过来意味着这可能会导致几个同样从列表中删除的年轻节点也不会被收集，这意味着他们也进入了老一代。最后，这可能会导致更大的老年代、更多的根指针和更少的对象在年轻 GC 中被收集——所有这些都是坏事。

好吧，这就是最终的理论，一些非常聪明的人将其归结为，效果是否真的很明显是另一回事 - 没有对此进行任何测试。

# python - 如何在 gevent 的 Socket io 模块中的套接字之间拥有共享对象

> ID：11530495
> 
> 赞同：3
> 
> 时间：2012-07-17T20:36:52.657
> 
> 标签：python, socket.io, gevent

我正在尝试使用`socket.io`Python 的客户端库和服务器实现[gevent-socketio](http://gevent-socketio.readthedocs.org/)来实现套接字。我让服务器运行并且套接字工作。但是，我正在尝试实现一些简单的浏览器内游戏（不是我编写的！），并且游戏完全发生在游戏类的一个实例中。它的工作原理是这样的：

```
game = Game([player1,player2])
game.turn(player1, action_one)
game.turn(player2, action_two)
...
print game.winner() 
```

因为我想在回合中使用套接字，所以我需要一些方法来`game`在不同的套接字（玩家）之间共享服务器端的对象。我怎么能这样做？我真的不想将游戏的每个状态都存储在磁盘或某个数据库中。还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:57:16.833

看起来[Pyro](http://packages.python.org/Pyro4/intro.html)正是我所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:38:47.807

目前尚不清楚您的问题是什么。如果您在同一进程中处理不同的套接字 io（可能在不同的 greenletes 中），那么在不同的套接字处理程序之间共享任何数据都不是问题。你能更详细地描述你的问题吗？

# android - 查询内容提供者时为列命名？

> ID：11530503
> 
> 赞同：4
> 
> 时间：2012-07-17T20:37:14.140
> 
> 标签：android, android-contentprovider, android-contentresolver

当用户搜索联系人时，我试图在搜索对话框中显示自定义建议。自定义建议要求内容提供程序返回一个列，其中一个列名为`SearchManager.SUGGEST_COLUMN_TEXT_1`.

我正在查询声明投影的联系人提供程序，如下所示：

```
String[] projection = new String[]{Contacts._ID,Contacts.DISPLAY_NAME + " AS " + SearchManager.SUGGEST_COLUMN_TEXT_1}; 
```

但这是抛出异常：

```
java.lang.IllegalArgumentException: Invalid column display_name AS suggest_text_1 
```

我一直在研究，这是由于联系人提供程序`strictProjectionMap`在他们的 中设置了标志`SQLiteQueryBuilder`，所以我想知道是否有人有解决方法来指定别名。我找到了几个解决方案，但这些解决方案需要修改内容提供程序，在这种情况下这是不可能的，因为它是一个 Android 提供程序。

如果不可能，这种情况的最佳做法是什么？我当前的解决方案是使用正确的列名创建一个`MatrixCursor`，并将查询返回的游标中的所有值复制到联系人提供程序，但在效率方面感觉非常错误，所以我认为可能有更好的方法。

感谢您的建议。胡安

# azure - 如何为一个 Azure 网站保留实例配置多个主机标头

> ID：11530507
> 
> 赞同：2
> 
> 时间：2012-07-17T20:37:36.673
> 
> 标签：azure, azure-web-app-service

我知道您可以基于此问题在 Azure 网站保留实例上支持多个主机标头 -[是否可以让多个 azure 网站在单个保留实例上运行](https://stackoverflow.com/questions/11006428/is-it-possible-to-have-multiple-azure-web-sites-running-off-a-single-reserved-in)

我的问题是如何配置保留服务器以响应 Azure 网站中的不同主机标头？使用常规 WebRole，我知道您编辑 ServiceDefinition 文件，但我的理解是 Azure 网站不存在该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:48:16.347

要为 Windows Azure Reserve 网站添加多个主机标头，您需要直接从配置部分中的门户添加，如下所示：

![在此处输入图像描述](../Images/1d1906495cd248ce7019737be5bf21e0.png)

在您的代码中，您将处理基于主机头的路由到特定内容部分。

# javascript - 解析关系查询

> ID：11530508
> 
> 赞同：0
> 
> 时间：2012-07-17T20:37:40.113
> 
> 标签：javascript, backbone.js, parse-platform

使用成功将对象添加到 Parse.Relation 后

```
1 this.topic.relation("friend").add(email);
2 this.topic.save(); 
```

我在`Parse.Object._getSubclass requires a string argument`下面的第 1 行

```
1 renderAllFriends: function(collection, filter) {
2   this.topic.relation("friend").query().find({
3     success:function(emails) {
4       this.$("#friends-list").html("");
5       emails.each(this.renderOneFriend);
6     }
7   });
8 } 
```

一切似乎都正确记录在 Mongo 中。需要注意的一点是，Email 对象是一个具有非强制性用户列的自定义类。

感谢您提供有关在哪里寻找答案的任何提示！Parse repo 在这方面没有太大帮助，因为 _getSubclass 对 Parse.Relation 也不例外（这很好）。

贡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:49:50.977

parse js sdk 的早期版本中存在一些错误，其中查询构造不正确。如果您获取最新版本的 SDK 1.0.10，它应该可以工作。

# php - 同时调用两个服务器端脚本？

> ID：11530510
> 
> 赞同：1
> 
> 时间：2012-07-17T20:37:54.263
> 
> 标签：php, javascript, jquery, applet

我正在使用将文件发送到 php 中的服务器端脚本的上传程序小程序。我想确保，如果用户在文件完成上传之前关闭页面，文件将从服务器中删除，因为它们无法正确处理。

问题来自这样一个事实，即我有一个站点试图同时调用两个服务器端脚本。

如果我要关闭页面而不运行上传程序小程序，则会调用文件删除脚本

```
$(window).bind('beforeunload', function(){
    $.post("cancel.php");
}); 
```

但是，如果我运行上传程序小程序，则不会触发该事件并且文件只是位于服务器上。有没有办法停止上传脚本以允许取消脚本运行？*如果没有，有没有办法在运行取消脚本和*关闭窗口之前等待上传脚本停止？

**编辑：**啊，谷歌搜索你的问题的答案只是为了看到你关于堆栈溢出的问题是谷歌的热门话题......

**编辑 2：**因此，在我的 beforeunload 事件中重新安排我的调用顺序之后，我已经成功地能够在我想要的时候调用我想要的脚本。`cancel()`在尝试调用其他脚本之前，我必须确保调用了小程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:43:05.087

Rather than running a script to dynamically delete the file, why not transfer a checksum (perhaps an MD5 checksum) over to the server and check for incomplete file transfers?

**Reference**: [http://php.net/manual/en/function.md5-file.php](http://php.net/manual/en/function.md5-file.php)

This way, you don't need to rely on an entire script (and the HTTP requests) required for deleting the scripts - and use a database to index the unchecked files appropriately.

Enjoy and good luck!

# javascript - 验证失败后表单仍然提交 JS

> ID：11530511
> 
> 赞同：2
> 
> 时间：2012-07-17T20:37:56.680
> 
> 标签：javascript, jquery, html

我有一个表单，我试图验证具有相同类的字段。必需的

```
<form id="HotelBooking" method="post" action="#">
<input type="text" class="required"  name="vardas" />
<input type="text" class="required"  name="pav" />
<input type="text" class="required"  name="tel" />
<input type="submit"  name="sb"  value="Tvirtinti" onclick="tikrinti();"/>
</form> 
```

JS 代码适用于第一个字段，它显示错误，但表单仍然提交并重置字段。

```
$(document).ready(function() { 
  $('#HotelBooking').submit(function () {
  $(".required").each(function(){
            if($(this).val().length == 0)
            {
               alert('Please Enter your value');
               $(this).focus(); 
               return false;
            }
        });
 });   
}); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:39:59.943

你应该把`return false`外面`each()`：

```
$('#HotelBooking').submit(function () {
    var errors = 0
    $(".required").each(function(){
        if( $.trim($(this).val()).length == 0) { // make sure that there is no extra whitespace
           errors++ 
        }
    });
    if (errors > 0) {
       alert('please Enter your value for ' +errors+ 'remaining fields')
       return false;
    } 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:42:25.197

问题是您是`false`从`each()`-function 返回的，而不是`submit()`-function。

这是一个修复：

```
$(document).ready(function () {
    $('#HotelBooking').submit(function () {
        var valid = true;

        $('.required').each(function () {
            if ($(this).val().length == 0) {
                alert('Please Enter your value');
                $(this).focus();

                valid = false;
            }
        });

        return valid;
    });   
}); 
```

编辑：哎呀，太晚了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T09:08:08.970

```
 <script type="text/javascript">
         $('#submitRegister').click( function(){
         var validation =  $('#connect').vValidator('validate');
         Window.alert("hii");
         });
      </script> 
```

# javascript - 使用 knockout.js 更新 jquery UI 对话框的内容

> ID：11530515
> 
> 赞同：1
> 
> 时间：2012-07-17T20:38:17.763
> 
> 标签：javascript, jquery, jquery-ui, knockout.js

我正在使用最新版本的 knockout.js 和 jquery。我正在尝试创建一个 jquery 对话框，只要特定的 ko.observable 具有值，该对话框就会打开和关闭。我的实现基于此 jsfiddle 中的代码 [http://jsfiddle.net/rniemeyer/WpnTU/](http://jsfiddle.net/rniemeyer/WpnTU/)，我在此 Knockout.js 论坛[https://groups.google.com/d/msg/knockoutjs/中找到了该代码XIaQMNHjy7Q/BpfDU5inKVQJ](https://groups.google.com/d/msg/knockoutjs/XIaQMNHjy7Q/BpfDU5inKVQJ)。

但是，这种方法仅在我包含现已弃用的 jquery-tmpl.js 插件（版本 1.0.0pre）时才有效。我将我的问题提炼为两个 jsfiddle，一个工作版本（[http://jsfiddle.net/LhEnV/29/](http://jsfiddle.net/LhEnV/29/)）和一个损坏的版本（[http://jsfiddle.net/gygh3/1/](http://jsfiddle.net/gygh3/1/)）。唯一的区别是 jquery-tmpl.js 不包含在第二个版本中。

问题的根源是对话框及其内容所依赖的可观察对象在我第一次加载页面时没有设置。因此，模板绑定的属性不可用，从而导致错误。在淘汰赛之前包括 jquery-tmpl 可以解决问题，所以我假设淘汰赛模板引擎会在 jquery-tmpl 可用时改变它的行为。但是，我不想依赖已弃用的插件。

是否有更好的方法将 jquery UI 对话框及其内容绑定到 ViewModel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:12:31.723

只需更改此：

```
<script id="newDialogTmpl" type="text/html">
    Add <span data-bind="text: displayName"></span>?
</script>
​ 
```

对此：

```
<script id="newDialogTmpl" type="text/html">
    <!-- ko if: $data -->
    Add <span data-bind="text: displayName"></span>?
    <!-- /ko -->
</script> 
```

第一次你的`newThing`道具等于`null`所以它触发了引用错误。您应该检查是否`$data`不为空，如果为空则渲染模板 - 什么也不做

# ms-word - 单元格阴影仅在打印时可见？微软字 2010

> ID：11530516
> 
> 赞同：0
> 
> 时间：2012-07-17T20:38:20.447
> 
> 标签：ms-word, formatting, cell, shading

我有一堆带有表格的 Word 文档。我在创建它们时使用的是 Windows XP 和 Office 2007。在文档中，我经常使用单元格阴影（倾斜的小桶）对某些单元格进行阴影处理，以使它们脱颖而出。我升级到 Office 2010 并且所有文档都很好。

我们最近升级到装有 Office 2010 的 Windows 7。我到处都在阅读，Office 没有附带任何版本的 Windows 7，但这是我的工作，他们用来将所有计算机升级到 Windows 7 的任何图像都已经安装了 Office 2010，所以我不知道。

无论如何，自从升级以来，我的文档的原始单元格阴影不再对我可见。起初，我以为它已经完全消失了，因为它看起来好像什么都没有，但是当我打印文档时，它们会打印出阴影，好像什么都没有。

如果我应用新的单元格阴影，我可以在屏幕上看到它，但原来的阴影是“隐藏的”或其他东西。有谁知道可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:31:43.713

谢谢！我发现它与 Office 的安装方式有关，导致颜色发生变化。降低显示器的对比度和亮度恢复了细胞阴影的外观，在当前的安装中，阴影从原来的阴影消失到不可见的程度。

# plone - 无法通过 Plone 中的 filezilla 上传 html 页面

> ID：11530519
> 
> 赞同：1
> 
> 时间：2012-07-17T20:38:31.200
> 
> 标签：plone

我已经通过在 Linux 操作系统 opensuse 上使用 filezilla 连接到我的 Plone 站点。我现在可以将文件夹和文件传输到我的站点。由于某种原因，htm 或 html 文件存在问题。所有文件、文件夹和 pdf 文件都使用目录结构进行传输。htm 或 html 文件没有被传输。我们应该在克隆站点的服务器上启用什么吗？请在时间允许时告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:34:04.043

固定的。您只需在内容类型注册表的站点设置中添加 ZMI 接口上的扩展。

# sql - 将 DSL 转换为 SQL 的正确工具？

> ID：11530524
> 
> 赞同：5
> 
> 时间：2012-07-17T20:39:05.450
> 
> 标签：sql, parsing, code-generation, dsl, lexer

我有一种可以翻译成 SQL 的领域特定语言。我必须编写自己的词法分析器、解析器和代码生成器，还是有可以帮助我的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:55:22.517

您可能想阅读这本书： Terence Parr 的[语言实现模式](http://pragprog.com/book/tpdsl/language-implementation-patterns "语言实现模式")，来自 The Pragmatic Programmers 系列。它是对解析、翻译和编译的全面介绍。它在很大程度上依赖于[Terence Parr](http://www.antlr.org/ "ANTLR 解析器生成器")的 ANTLR 示例，但其通用性足以让您使用其他语言和系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:32:53.337

如果您的 DSL 是为 DSL 编码器的可读性而设计的，那么是的，您需要一个词法分析器、一个解析器和一个代码生成器。

（其他答案表明，如果您“以'元语言'的语法”编写 DSL，则不需要这些机制；虽然这可能是真的，但它优化了 DSL 在元语言中的可嵌入性，而不是它的最终用户的可读性，我认为这是一个糟糕的权衡）。

不，您不必从头开始编写它们。

有很多解析器生成器（YACC、Bison、ANTLR、JavaCC）可以帮助您专注于为您的 DSL 编写语法规则；它们提供了许多低级解析机制来处理/执行您的语法规则作为解析引擎。尽管如此，您仍然必须努力将您的概念语法弯曲到特定解析器生成器的限制（LALR（1），LL（k），...）ANTLR/Bison/Yacc 将帮助您构建树；你必须做明确的工作才能做到这一点。之后，您就可以自己使用传统的解析器了。大多数人到达那里后最终都会感到惊讶（如果他们走到这一步；真实语言的解析器往往比他们预期的要多。

那是因为[解析后有很多生命](http://www.semanticdesigns.com/Products/DMS/LifeAfterParsing.html)：符号表、代码分析、代码生成。我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)旨在帮助您构建语法引擎约束最小的解析规则；自动构建树（看，妈，没有手！）并以多种方式为代码转换提供大量支持。此外，DMS 提供了一个视角和工具来支持 DSL（“你的语言”）片段和目标之间的转换，使用源/目标模式对来指定映射。对于 OP 的特定目的，可以使用 SQL2011 语法获得 DMS，为编写目标模式提供了一个很好的基线。

要阅读有关使用工具进行自动转换的更多信息，请参阅我[关于语言之间翻译的 SO 讨论](https://stackoverflow.com/a/3460977/120163)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T21:02:34.480

这在很大程度上取决于您将使用的语言，但 Groovy、Ruby、Scala、F# 和 Haskell 是执行此操作的好语言。

您使用哪种语言将影响您还应该使用哪些工具。

例如，您可以在 C 中执行此操作，但工作量会更大，并且对用户来说可能看起来不太好。

有些语言你需要使用工具来帮助解析器，有些语言没有工具会更好。

您可能想通读这本书，以了解更多关于 DSLs、*DSLs in Action*的主题。

[http://manning.com/ghosh/](http://manning.com/ghosh/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T07:02:29.110

我有一个和你类似的项目。我认为你应该看看 Xtext 和 Xtend，因为它们可以直接在 Eclipse 中使用，你可以轻松获得智能感知、语法、词法分析器。我尝试生成 SQL 代码，到目前为止它一直是一个成功的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T10:03:21.020

如果您使用适当的元语言（例如，Lisp），则不需要词法分析器、解析器和代码生成器。一切都已包含在内——您可以在 S 表达式之上构建您的 DSL，您可以在 Lisp 本身中生成代码的宿主部分。

即使您想要为您的 DSL 提供一种特殊的语法，也很容易将解析器嵌入到元语言中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T20:56:28.257

听起来您正在寻找像 Eli 这样的东西，它旨在接受规范并从中生成翻译器：

[http://eli-project.sourceforge.net/](http://eli-project.sourceforge.net/)

另一方面，您可能会很高兴使用像 ANTLR 这样的生成工具来编写解析器，并自己编写 AST 和代码生成器。

假设您的 DSL 的翻译很简单，那么编写 SQL 等高级语言的代码生成可能并不难实现。

如果是我，我会使用 ocamllex 和 ocamlyacc 在 OCaml 中编写内容，但为此您首先需要了解 OCaml。

# redis - 优化性能缓慢的 redis 数据库

> ID：11530525
> 
> 赞同：2
> 
> 时间：2012-07-17T20:39:12.213
> 
> 标签：redis

我有一个 2.7GB 的 redis 数据库（这是转储文件的大小）——我在一个具有巨大内存（64GB）的服务器上运行，那里没有太多其他东西。redis 性能不是很好（有时需要大约 5 秒才能通过盒子上的 redis-cli 工具检索哈希）。任何人都可以帮助： -

1.  我怎么知道数据库正在内存中处理，而不是交换/读取磁盘？

2.  有什么优化技巧可以提高性能吗？

我应该补充一点，这本质上是一个只读数据库。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T14:52:06.740

*   2.7GB 的 RDB 文件大小不能很好地指示数据集的大小 -`INFO`你的`used_memory`?
*   5s 是从 Redis 检索任何东西的时间很长 - 检查您`SLOWLOG`的操作以查看哪些操作会降低您的性能（对于 > 2.8.13 延迟医生也是如此）
*   回覆。交换 - 通过设置`vm.swappiness=0`和完全禁用交换`vm.overcommit_memory=1`

此外，通过在`INFO ALL`此处添加好心人的输出，可能会就可能的优化提供更多帮助。

# javascript - 如何使用 HTML5 视频标签防止 CPU 使用率过高？

> ID：11530527
> 
> 赞同：5
> 
> 时间：2012-07-17T20:39:16.197
> 
> 标签：javascript, html, video

我正在尝试使用 HTML5 视频标签同时预加载 20 个视频

```
<video id="video-detail-<%=id%>" class="video-js vjs-default-skin" 
    loop 
    autoplay="none"
    width="640" height="360">
    <source src="movie.mp4" type="video/mp4" />
</video> 
```

这些视频作为模板在 Bootstrap 的弹出框内。为了让这些视频自动播放，我使用了监听 mouseover 事件的 videoJS

我的 CPU 使用率很高，尤其是在 Chrome 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:01:18.643

尝试删除`autoplay="none"`. 您不需要为该属性设置任何值。当前`video`标签读取`autoplay`并复制视频。基本上它忽略了价值。

[http://videojs.com/docs/options/](http://videojs.com/docs/options/)

# android - 如何在 Android 中使用 C++ API？

> ID：11530529
> 
> 赞同：0
> 
> 时间：2012-07-17T20:39:23.800
> 
> 标签：android

我最近正在寻找某种方法来在我的 Android 应用程序中嵌入 Adob​​e PDF 文件阅读器，因此有人建议使用 Adob​​e Reader Mobile 9 SDK。

在他们的常见问题解答中，他们说他们的 SDK 由一组 C++ API 组成。如何在 Android 应用程序中访问用 C++ 编写的 API？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:55:39.183

检查是否有人将库转换为可在您的 Android 环境中访问的库。也许有人已经转换为您可以从 Android 使用的版本，但通常情况并非如此。

如果不行，则需要查看是否可以运行源码（需要源码），通过 NDK 交叉编译器获取可以在 Android 应用中加载的库版本。

因此，请按照此处的步骤操作，如果遇到问题，请发布：http: [//developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

# c++ - 在 Visual Studio 2010 中安装 cvblobslib

> ID：11530533
> 
> 赞同：1
> 
> 时间：2012-07-17T20:39:39.707
> 
> 标签：c++, visual-studio-2010, visual-c++, opencv, computer-vision

我已经坐了两天，试图用 cvblobs 设置 Visual Studio 2010，我已经安装了 opencv 并且它工作得很好，但是当我尝试将 cvblobs 添加到项目中时，由于某种原因它失败了。我下载了 cvblobs 并使用 Cmake 生成了它，但是当我构建它时，我有这些链接错误

错误 LNK1104: 无法打开文件 '..\lib\Debug\cvblob.lib' C:\cvblob\msvc\test\LINK test_random 错误 LNK1104: 无法打开文件 '..\lib\Debug\cvblob.lib' C:\ cvblob\msvc\test\LINK 测试错误 LNK1104: 无法打开文件 '..\lib\Debug\cvblob.lib' C:\cvblob\msvc\test\LINK test_tracking

我正在使用 Windows 7 64 位...

希望有人可以提供帮助:)

# java - 在 Mahout 中使用预编译的项目相似性列表创建 itemSimilarity

> ID：11530535
> 
> 赞同：0
> 
> 时间：2012-07-17T20:39:42.147
> 
> 标签：java, mahout, collaborative-filtering

我已经从 ItemSimilarity 工作中列出了项目及其相似之处。我现在想用它来获得针对特定用户的推荐。我现在拥有的 Java 代码不起作用，因为我找不到将 .txt 文件传递​​到 itemSimilarity 的正确方法。这是我到目前为止的代码：

类 RecommenderIntro {

公共静态 void main(String[] args) 抛出异常 {

```
DataModel model = new FileDataModel(new File("dataset/input/input.txt"));
DataModel itemSimilaritiesModel = new FileDataModel(new File("dataset/output/part-r-00000"));
ItemSimilarity itemSimilarity = new GenericItemSimilarity(itemSimilaritiesModel);
Recommender recommender = new GenericItemBasedRecommender(model, itemSimilarity);
Recommender cachingRecommender = new CachingRecommender(recommender);
List<RecommendedItem> recommendations = cachingRecommender.recommend(137413350, 10);
system.out.print(recommendations);

} 
```

}

只需要知道如何使用项目相似度的预编译 .txt 文件向用户推荐特定项目

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:36:08.303

第 2 行对您没有任何帮助。这会创建一个`FileDataModel`; 你不能喂它不是用户项目偏好的东西，而我认为这是项目项目相似性的一些文本表示。它可能不会失败，因为两者都是 CSV，但结果根本不是项目相似性。

你想要的是`FileItemSimilarity`.

# java - 使 JTextPane 的某些部分不可编辑

> ID：11530537
> 
> 赞同：0
> 
> 时间：2012-07-17T20:39:47.270
> 
> 标签：java, swing, jtextpane

好的，所以我想这样做：[使 JTextArea 的一部分不可编辑（不是整个 JTextArea！）](https://stackoverflow.com/questions/10030477/make-parts-of-a-jtextarea-non-editable-not-the-whole-jtextarea)

但是在 JTextPane 而不是 JTextArea 上，使用 DocumentFilter (?) 似乎是不可能的。

我在 JTextArea 上尝试了上述解决方案，效果非常好。但我只是找不到任何关于如何在 JTextPane 上执行此操作的信息（如果可能的话）。

好吧，我确实找到了这篇文章：[向 JTextPane 添加文本而不让用户可以编辑它？](https://stackoverflow.com/questions/3974242/adding-text-to-a-jtextpane-without-having-it-editable-by-the-user)

但这并不是我想要的——我需要我的 JTextPane 表现得像一个*命令提示符*，就像第一个链接中的 JTextArea 一样。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:53:14.650

如果您需要某种 J*Pane - 使用 JEditorPane。然后，您可以使用 DocumentBuilder 并控制其索引，以便它的功能与您的 JTextArea 示例大致相同。

# mysql - mysql union 没有按预期工作

> ID：11530541
> 
> 赞同：1
> 
> 时间：2012-07-17T20:40:04.117
> 
> 标签：mysql, union

我有一个mysql查询：

```
Select count(*) as cnt from  page06 where dl = 1 and TYPE = 'mempage' union 
Select count(*) as cnt from  page06 where err = 1 and TYPE = 'mempage' union  
Select count(*) as cnt from  page06 where dl = 1 and err=1 and TYPE = 'mempage' 
```

在大多数情况下`dl`，`err`列是 0，所以最后两个 select 将返回`0`。我发现这个查询只返回一个不是我预期的。我找到了这个解决方案：

```
Select count(*) as cnt,'s' as p from  page06 where dl = 1 and TYPE = 'mempage' union 
Select count(*),'d' as p  from  page06 where err = 1 and TYPE = 'mempage' union  
Select count(*),'f' as p   from  page06 where dl = 1 and err=1 and TYPE = 'mempage' 
```

此查询完美运行，但我已经编写了第一种格式的代码。我想知道为什么会发生这种情况，是否有任何解决方案（**除了我所说**的）来解决这个问题？
我不想使用我的解决方案的原因是我有很多我不想（甚至不能）更改它们的书面查询！我正在寻找的是一些设置连接的选项之王（比如 `set names 'latin1';`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:42:25.987

使用`UNION ALL`代替`UNION`

查看此帖子以获取有关差异的详细说明： [UNION 和 UNION ALL 有什么区别？](https://stackoverflow.com/questions/49925/what-is-the-difference-between-union-and-union-all)

```
SELECT count(*) AS cnt FROM  page06 WHERE dl = 1 AND TYPE = 'mempage' UNION ALL
SELECT count(*) AS cnt FROM  page06 WHERE err = 1 AND TYPE = 'mempage' UNION ALL
SELECT count(*) AS cnt FROM  page06 WHERE dl = 1 AND err=1 AND TYPE = 'mempage' 
```

# python - Python 太慢 - 我可以在较低级别和 cp 脚本中重写引擎吗？

> ID：11530542
> 
> 赞同：0
> 
> 时间：2012-07-17T20:40:10.520
> 
> 标签：python, process, mud

所以，首先。这是我的服务器引擎。[吉尔穆德.py](http://code.google.com/p/gilmud/source/browse/gilmud.py)！

好的，这是我以前的小说大小帖子的缩短版本。

上面的链接是我们的 MUD 的 Python 服务器引擎。注意第 73-75 行和第 359 行

```
self.tickThread = threading.Thread(None, self.runTicks, None, ())
self.tickThread.start() 
```

...

```
def runTicks(self):
    while self.running:
        time.sleep(.1)
        for thing in Thing.List.values():
            if thing:
                if "person" in thing.attrs:
                    if "spawner" in thing.attrs:
                        thing.tick() 
```

您可能会看到为我们提供大约 100 名玩家和 2000 个怪物/NPC“生命”所需的可怕方法。tick() 检查他们是否会移动或捡起物品，或者他们是否在战斗中或成为目标等。当然，玩家也一样，减去一些自动化的东西。

有什么方法可以用 C++ 重写这个模块的一部分或全部，以获得更好的性能？目前，我们需要的 0.1 秒滴答声在我们现在使用的方法中使用 python 大约为 3 秒。

（此外，我们尝试了几种不同的线程类型和无堆栈。没有任何效果）。

在此先感谢您的帮助！欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:01:10.670

你的代码有很多效率低下的地方。

只看`Person.tick`方法：

代替

```
for spell in self.spellTimers:
            self.spellTimers[spell]['tick'] += 1 
```

和

```
for spell_timer in self.spellTimers.itervalues():
            spell_timer['tick'] += 1 
```

同样的事情，每个值至少减少两次 dict 查找

代替

```
for thing in Thing.List.values():
            if thing:
                if "person" in thing.attrs:
                    if "spawner" in thing.attrs:
                        thing.tick() 
```

和

```
for thing in Thing.List.itervalues():
            if thing and "person" in thing.attrs 
                     and "spawner" in thing.attrs:
                    thing.tick() 
```

（好吧，一个可能不会快得多，但我更喜欢它）

得到：

```
from spells import cast,spellmaker 
```

跳出 tick() 方法并进入文件顶部

代替：

```
#spell cooldown timer
self.timers['cooldown'] -= 1
if self.timers['cooldown'] < 0:
    self.timers['cooldown'] = 0 
```

和：

```
#spell cooldown timer
self.timers['cooldown'] = max(0, self.timers['cooldown']-1) 
```

你经常这样做。你有很多代码，比如

```
 #Check if self is doing ranged attack, and then increase timer (ready their weapon)
    self.timers['ranged'] += 1
    if self.timers['ranged'] >= int((self.stats['dex']*-1.1)+60+2):
        self.timers['ranged'] = int((self.stats['dex']*-1.1)+60+1)
    if self.timers['ranged'] == int((self.stats['dex']*-1.1)+60):
        self.timers['ranged'] = int((self.stats['dex']*-1.1)+60+1) 
```

第二个`if`应该是`elif` 如果第一个条件为真，则第二个条件永远不会为真。

请记住，每次访问时，`self.somedict['name']`您都在进行两次 dict 查找（开销可能会更多，但将其用作经验法则​​）。如果你一行一行地有一个dictlookup，你可以通过将它分配给一个“temp”本地变量来加速你的代码。

如果您继续检查您的代码，您将像上述之一一样投入一周时间，这将使事情内联。抱歉，我不能全部看完。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:44:49.687

由于您尚未发布少量相关的 Python 代码行，因此您应该了解有关 Python 的一件事是，它可以让您以 C 风格编写代码，而等效的 Python 风格也可以。很多时候——而且我没有看到你的相关代码——一种较旧的处理数据的方式而不是，例如，编写一个列表理解，会比使用更 Pythonic 的方式花费更多的时间。

您可以通过发布一个或多个小示例并询问是否有更好的方法来加快速度，从而获得 Pythonic 风格的帮助——顺便说一句，我需要很多帮助。您还需要检测您的代码以捕获时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T22:18:15.957

可以用 C++ 或类似代码重写其中的一部分，但如果你的循环需要 3 秒来处理 2000 个左右的项目，那么我认为你的编码方式更有可能遇到一些严重的问题。而不是 python 本身的固有问题。

因此，首先，我想支持其他答案/评论中提出的分析建议-这确实是*准确*判断循环中所有时间消失的最佳方法。这里有一些关于 python[提供](http://docs.python.org/library/profile.html)的分析器的文档。

其次，如果您使用的是标准的 python 发行版，那么我会考虑尽可能远离线程。python 的默认实现有一个[全局解释器锁](http://wiki.python.org/moin/GlobalInterpreterLock)，可以防止任何解释的 python 代码真正并行运行，从而消除了首先打扰线程的许多优点（并且在某些情况下实际上使事情变慢）

第三，我可以就您发布的代码提供一些小建议。您仍然最好使用分析器来确认我的怀疑（并找到我没有注意到的问题区域 - 看起来您那里有很多代码）但我会说这可能会有所帮助至少：

在你的 for 循环中`for thing in Thing.List.values():`，你可能会更好地调用`Thing.List.itervalues()`. 这将返回值的迭代器，而不是分配值的完整列表。分配列表是不必要的，除非您计划在迭代字典时添加或删除字典，并且如果您暗示的字典中有 2000 个左右的项目，可能不会太快。此建议也适用于您在代码中迭代字典的其他时间，假设您不打算在迭代时添加/删除条目（使用`.iteritems()`代替`.items()`，`.iterkeys()`代替`.keys()`）。

您可能还想研究一种不同于调用`time.sleep`每次迭代的计时方法。我可以看到两个问题 - 主要是`time.sleep(.1)`实际上并不能保证睡眠会持续 0.1 秒，还因为它没有考虑处理所需的时间长度。例如，假设您的处理时间为 0.05 秒，然后您睡了 0.1 秒，那么滴答声之间实际上有 0.15 秒的时间 - 这种差距只会随着处理变得更加激烈而增长。我没有任何具体建议，但您可能至少希望在将数字传递到时考虑到处理时间`time.sleep`

最后，您可能需要考虑在某个时候使用[代码审查堆栈交换。](https://codereview.stackexchange.com/)我认为没有人会想要审查您的整个游戏引擎，但似乎它可能是放置您可能需要反馈或您认为可以改进的代码块的好地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T02:44:54.367

你已经得到了很多很棒的具体反馈，所以我只会从一个混蛋的角度添加一个观察。有几个大型泥项目使用 Python 而没有速度问题（例如 Evennia），所以我有信心说你最好重构你的代码而不是降到 C。

# javascript - jQuery 对居中对齐的块元素的“反弹”效果在 Firefox 和 IE8 中将它们左对齐

> ID：11530543
> 
> 赞同：4
> 
> 时间：2012-07-17T20:40:21.163
> 
> 标签：javascript, jquery, html, css, jquery-ui

我的目标是在一个 div 中水平居中显示几张图像，该 div 在包装器中也水平居中。我可以这样做，但是当我在图像上调用 jQuery 的“反弹”效果时，它们会左对齐。

我已经摆弄了很长时间，无法让它们在弹跳时保持居中。

[在http://jsfiddle.net/vX3gz/2](http://jsfiddle.net/vX3gz/2)上查看

我在 Win7 上使用最新的 Firefox。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:26:18.350

图像向左“跳跃”的原因是因为反弹添加了几个`div`具有内联样式的元素，设置为`margin: 0`.

因此，一个相当简单的解决方法是在您自己的 CSS 中覆盖它：

```
#thin > div {
    margin: 0 auto !important;   
} 
```

**注意**我通常反对使用`!important`，但由于您使用它来覆盖内联样式，我认为它是可以接受的。

**工作示例：http: [//jsfiddle.net/vX3gz/33/](http://jsfiddle.net/vX3gz/33/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:56:36.920

我想我已经解决了。不是我喜欢的方式（使用 CSS），也许有点矫枉过正，但它仍然有效。问题确实是左边距，在处理要居中的可变内容时，您真的不想设置它。另外：我注意到 Safari（适用于 Windows）也有同样的问题。

看到它在这里工作：http: [//jsfiddle.net/c_kick/tuu4Q/](http://jsfiddle.net/c_kick/tuu4Q/)

所以我所做的是编写一个自定义的 BounceMe() 函数，将要反弹的元素传递给该函数。它能做什么：

1.  检查我们是否在 Firefox 或 Safari 中，如果不是：定期退回（跳过以下步骤）
2.  获取元素的当前（实际）左偏移
3.  将该偏移量作为左边距应用到元素
4.  反弹它
5.  将左边距重置为自动

此外，它在元素上设置了一个“弹跳”标志，以防止函数弹跳已经弹跳的东西。

**重要的**是所有元素都应该得到

```
position: relative; 
```

否则偏移计算将关闭。

jQuery：

```
var userAgent = navigator.userAgent.toLowerCase();
$.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase());//to prevent Chrome from being detected as safari  

function BounceMe($this) {
    if($.browser.mozilla || $.browser.safari && !$.browser.chrome){
        if (!$this.data('bouncing')) {
            $this.each(function(){ //run on each img
                $pos = $(this).position(); // get position of image
                $(this).css({marginLeft: $pos.left}); //'hard' set the margin left
            });

            $this.data('bouncing', true).effect("bounce", function(){
                $this.css({marginLeft: 'auto'}) //reset the margin left after animation
                    .data('bouncing', false);
            });
        } else {
            //images are still animating, do nothing
        }
    } else {
        //no Firefox or Safari? No problem, do a regular bounce.
        $this.stop().effect("bounce");
    }
}

$(document).ready(function() {

    BounceMe($("img")); //bounce on pageload

    $("#bounce").click(function() {
        BounceMe($("img")); //bounce on click on link
    });
}); 
```

您可以将函数重写为 .extend()，这样它就可以像常规的 Bounce() 一样被链接。

# jquery - 将工具提示应用于每个单元格

> ID：11530551
> 
> 赞同：1
> 
> 时间：2012-07-17T20:40:54.747
> 
> 标签：jquery, css, jquery-plugins, tooltip

我有一个有 50 多行和 3 列的表。我想对每个单元格应用一个工具提示。这意味着每个单元格都有不同的工具提示文本。所以表格有 50*3 =150 个工具提示。

我们能做到吗？你能修改我的测试[示例吗？](http://jsfiddle.net/zhshqzyc/LUUkB/2/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:42:58.270

如果您使用的是 jQuery，我建议您使用实际的插件而不是您自己的插件，因为它会更完整且更易于使用（并且错误更少！）。我个人使用[qTip](http://craigsworks.com/projects/qtip/)插件取得了巨大成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:45:53.340

在 mousemove 上更改 DIV 中的文本怎么样？[这](http://jsfiddle.net/ybbjQ/3/)是我更新的小提琴。这基本上是我添加的所有内容：

```
$("#ToolTipDIv").text('Specific Tip for ' + $(this).text()); 
```

# c# - Retrieving data from SharePoint Site

> ID：11530554
> 
> 赞同：1
> 
> 时间：2012-07-17T20:41:15.517
> 
> 标签：c#, .net, sharepoint, datasource

This may not sound like a coherient question, but I need to find some way to connect to a hosted SharePoint website and pull data from it to a C# application. I suppose it could be from any database or list program, but since we already have our data stored on our SharePoint 2007 site, it would probably just be easiest to incorporate it somehow.

My question is this: where is the best resource regarding how to get started with this? I've started going through [this link](http://msdn.microsoft.com/en-us/library/ee857094%28office.14%29.aspx) to try to get some understanding, but it's still somewhat foreign to me. (I've never used SharePoint before (obviously), so I'm still trying to acquire some knowledge about how it interacts with standalone .NET applications.)

Essentially, I'll have a standalone application deployed on an environment that doesn't host the SharePoint server, which means (I think) I need to call the Windows Sharepoint Services. However, that's the extent of my "knowledge". Any more guidance would be greatly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:44:46.303

您应该查看用于从 SP 访问数据的 SharePoint Web 服务。例如，要访问列表，您将使用 SharePoint 列表 Web 服务。查看此参考以获取可用服务的列表：

[http://msdn.microsoft.com/en-us/library/bb862916(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb862916%28v=office.12%29.aspx)

# c# - 在我的场景中抽象和受保护之间有什么区别 - C#

> ID：11530561
> 
> 赞同：12
> 
> 时间：2012-07-17T20:41:45.790
> 
> 标签：c#, .net

具有公共构造函数的公共抽象类与具有受保护构造函数的公共类之间有什么区别。我们的抽象类中没有任何抽象函数，但我们希望程序员只能创建扩展该类的对象。

两种场景都可以编译和工作，但是我不明白在什么场景中使用哪个会更好。我从小就明白，虽然你不能直接实例化抽象类（只能通过非抽象子类），但抽象类通常应该包含该类的子类需要实现的抽象函数。

在公共类中没有受保护的构造函数是否意味着无法实例化此类（这是我们拥有的唯一构造函数）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T20:45:38.987

[MSDN 声明](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.71%29.aspx)关于使用`abstract`关键字来表示类：*在类声明中使用 abstract 修饰符来指示一个类仅作为其他类的基类。*也就是说，抽象类不需要包含任何抽象成员。修饰符只是一种明确的`abstract`方式，表示不应实例化该类，而不是存在技术障碍，例如使构造函数公开不可见。

请注意，您描述的技术障碍甚至有一个警告：它仍然可以称为：

*   它可以从派生类中调用。
*   可以使用反射来调用它。

两者都意味着其他只是（ab-？）使用您的类的开发人员可以做一些您不打算发生的事情，即实例化您的类，并且在使类抽象时两者都不可能。

**因此，答案是您应该将您的课程标记为`abstract`.**

请注意，建议您仍然保护抽象类的构造函数（强调该类不能被实例化）。如果抽象类具有公共构造函数，则 FxCop 等工具将输出警告。

这符合使每个成员与其真正需要的一样可见的一般规则。在抽象类中，永远不会从公共范围调用构造函数，因此`public`不需要可见性。它们只会被派生类的构造函数调用，因此`protected`抽象类中任何构造函数的合理可见性也是如此。

**因此，还要创建抽象类的任何构造函数（最多）`protected`。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T20:43:59.913

我会用受保护的构造函数做一个公共抽象类。

Using`abstract`清楚地表明它确实是一个抽象类。只是一个`protected`构造函数并不那么清楚。

除了子类之外，没有任何东西可以调用`abstract`构造函数；离开它有点毫无意义`public`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T20:45:50.983

声明类中的静态方法仍然可以调用私有或受保护的构造函数。抽象类必须具有要实例化的派生类。例如，单例模式利用通过公共静态方法/属性调用的私有构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T20:46:26.163

A public abstract class with a protected or internal constructor conveys how you want calling code to use it. Using a non-accessible constructor can be actually confusing.

# iis - Are there folder size limitations on virtual directory in IIS 7.5?

> ID：11530565
> 
> 赞同：0
> 
> 时间：2012-07-17T20:42:02.310
> 
> 标签：iis, asp-classic, filesystemobject, iis-manager

I have a couple virtual directories in IIS 7.5 that point to network resources. Specifically, these folders hold PDF files. I've granted a user permission to these folders, and their contents are accessible via web requests as I would expect. For example, `http://mysite/dir1/test.pdf` works perfectly for both virtual directories. However, when I try to expand one of the virtual directories (the other works fine) to see sub folders, IIS Manager becomes unresponsive almost immediately.

I'm attempting to list the file names of all PDFs in virtual directory on a classic ASP page.

```
Set objFSO = Server.CreateObject("Scripting.FileSystemObject")
filepath = Server.MapPath("/resources/myfolder")
Set folder = objFSO.GetFolder(filepath)
For Each file in folder.Files
    If file.Type = "PDF File" Then
        Response.Write("<p>" & file.Name & "</p>")
    End If
End If

Set folder = Nothing
Set objFSO = Nothing 
```

On a separate page, I using identical code to list the contents of another virtual directory. However, this other directory (as with IIS Manager) causes problems by not responding. It causes the entire site to become unresponsive and I have to recycle to app pool to get it to come back.

The effective permissions for the user account used to access these resources are identical. All files are accessible, and I've confirmed they exist via hardcoding `fso.FileExists(filepath & filename)`. I've also confirmed that the folder object exists and it's properties are being set. Even the `folder.Files.Count` is set properly in both cases. The issue is that the call to iterate through `folder.Files` causes the unresponsive behavior. Are there file size and/or folder size limitations? The only difference I see between the two directories is the number of files and consequently the size of the folder. The one that doesn't work is just over 1GB.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:46:24.493

我不知道存在大小限制。我会假设限制是我的机器存储的大小。至于显示文件夹内所有文件的列表，当列表变长时，您可能会遇到一些速度问题。获取文件路径等会导致文件 I/O 操作占用更多资源。我会设计我的应用程序，每次用户发布新的 PDF 时，我都会将文件详细信息（名称、位置）存储在数据库中，然后将图像放入文件夹中。这样，当用户想要检索文件时，我会进行文件抓取（这是文件 I/O 并占用更多资源），如果我只想显示文件列表，我会从数据库表中读取它超过 4 列宽，数据库可以轻松处理数百万行读取。

# unix - output text in bold font using SED editor In unix script

> ID：11530567
> 
> 赞同：0
> 
> 时间：2012-07-17T20:42:07.903
> 
> 标签：unix, sed

hi I want to write a unix script, while using the SED editor, to output the text, in this case a variable, to the result file but highlighted it in bold, is it possible to do that? can you tell me how?

eg. in `text.txt`

Code:

```
sed '$ a\
'$variable'
     ' <text.txt >text2.txt 
```

so it will add the variable after the last line in the `text.txt` file, but preferably in bold

Thanks Robert

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T12:33:05.530

纯文本文件没有粗体。粗体是一种*显示*文本的方式。根据您用于显示文本的工具，您可能能够以告诉工具以粗体显示的方式标记单词。有不同的方法可以做到这一点，不同的工具可以识别：

```
HTML tag, recognized by many browsers and editors:
"foo" => "<b>foo</b>"

Enriched text tag, recognized by emacs in enriched-mode and some email tools
"foo" => "<bold>foo</bold>" 
```

在尝试自动执行之前，您应该手动尝试。

假设您决定使用 HTML。现在使用 sed 将该行添加到文件的末尾：

```
sed '$a\
<b>$variable</b>
' text.txt > text2.txt 
```

# objective-c - RESTKit deleting object when the response is empty

> ID：11530570
> 
> 赞同：4
> 
> 时间：2012-07-17T20:42:21.773
> 
> 标签：objective-c, ios, core-data, restkit

I have been using RESTKit for a while now and its been easier to load json save them in database. But, I have been googling for sometimes and could not find solution for this problem.

I have a managed object model set up such that three different entities has a straight one to one relationship with each other. The layout for my model is as ;

![enter image description here](../Images/907e4ad0cadaa1346dce72b0da45bbe1.png)

If I load the object on Friend class it also maps to the rest two models on the basis of the mapping relationship in Friend model.

Say the user connects his facebook account and linked in account, then it is obvious that the json response would contain the mapping for the linkedin and friend model. The json response in such case would be;

```
[
   {
      "name":"foo bar",
      "id":307,
      "facebook":{
         "name":"foo bar",
         "username":"foo.bar.5074",
         "id":"1000013421379389",
         "picture":"https://fbcdn-profile-a.akamaihd.net/foo-bar.jpg"
      },
     "linkedin":{
         "name":"foo bar",
         "headline":"some headline",
         "id":"1000013",
         "link":"http://www.linkedin.com/foo.bar",
         "image":"https://linkedin.com/foo-bar.jpg"
      },
      "picture":"https://fbcdn-profile-a.akamaihd.net/foo-bar.jpg"
   },
   {
     ... 
    }
  ] 
```

But, once the user has linked Facebook and Linkedin, he may also unlink it through website. So, if the user unlinks it, the json response would not have the same mapping as it would generally and may not contain the facebook object or linkedin object in json response such that the response would look like,

```
[
       {
          "name":"foo bar",
          "id":307,
          "facebook":{
             "name":"foo bar",
             "username":"foo.bar.5074",
             "id":"1000013421379389",
             "picture":"https://fbcdn-profile-a.akamaihd.net/foo-bar.jpg"
          },
          "picture":"https://fbcdn-profile-a.akamaihd.net/foo-bar.jpg"
       },
       {
         ... 
        }
      ] 
```

If such response comes, I would like to delete the existing linked in record for the user. Or may be if the response doesnot have facebook or both I would like to delete local record and the association for the model whichever is empty in the response.

I would want the RESTKit to delete the associated objects automatically. I suppose it is possible through Restkit by specifying the fetch request in object loader but I am not particularly sure about it. I am using the loader pattern as this to load the object so where would I specify the fetch request,

**EDITED**

```
RKObjectMappingProvider *provider = [RKObjectMappingProvider mappingProvider];
[provider setObjectMapping:[self objectMappingForFriend] forKeyPath:@""];

[provider setObjectMapping:[self objectMappingForFriend] forResourcePathPattern:resourcePath withFetchRequestBlock:^NSFetchRequest *(NSString *resourcePath) {

    return [Friend fetchRequest];

}];

    [[[RKObjectManager sharedManager] loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader){
        loader.mappingProvider = provider;
        loader.delegate = self;
        loader.method = RKRequestMethodGET;
    }]; 
```

> **_I think I have redundant code here. _**

With this I hoped to delete all the objects in the local store when the response is empty. But, it does not work for me. I dont know how I should get around with this problem.

**Updates: 2:23 PM July 8, 2012 Local time**

```
self.objectManager = [RKObjectManager objectManagerWithBaseURL:[NSURL URLWithString: @"https://mywebsite"]];
        self.objectManager.client.disableCertificateValidation = YES;
        self.objectManager.client.cachePolicy = RKRequestCachePolicyLoadIfOffline | RKRequestCachePolicyLoadOnError | RKRequestCachePolicyTimeout | RKRequestCachePolicyEtag;
        self.objectManager.requestCache.storagePolicy = RKRequestCacheStoragePolicyPermanently;
        self.objectManager.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;
        self.objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"test.sqlite" ];
        self.objectManager.objectStore.cacheStrategy = [RKInMemoryManagedObjectCache new]; 
```

Now, setting the mapping ad loading data,

```
RKObjectMappingProvider *provider = [RKObjectMappingProvider mappingProvider];
[provider setObjectMapping:[self objectMappingForFriend] forKeyPath:@""];

[provider setObjectMapping:[self objectMappingForFriend] forResourcePathPattern:resourcePath withFetchRequestBlock:^NSFetchRequest *(NSString *resourcePath) {

    return [Friend fetchRequest];

}];

    [[[RKObjectManager sharedManager] loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader){
        loader.mappingProvider = provider;
        loader.delegate = self;
        loader.method = RKRequestMethodGET;
    }]; 
```

**Updates: 4:11 PM July 8, 2012 Local time**

It seems like it is deleting some nullifying some local objects but only some many of the object have the references and the main model Friend still exist even if there is empty json response.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T06:42:02.230

您需要在此处配置两个设置。首先，在您的 RKObjectMapping 中，您将 setNilForMissingRelationships 设置为 YES。然后您还需要确保核心数据关系具有正确的删除规则（在编辑关系时在实用程序面板中）。有关每个删除规则的作用的描述，请参阅[此内容。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T09:45:04.273

我必须假设您使用的是最新版本的 RestKit。所以，试试这一行：

```
[RKObjectManager sharedManager].objectStore.managedObjectCache = [RKFetchRequestManagedObjectCache new]; 
```

对于成功的 GET 请求，它最终会调用 [RKManagedObjectLoader deleteCachedObjectsMissingFromResult:] 这将取消缓存您的本地数据。在我之前对您上一个问题的回答中链接到的文章中更好地解释了该原理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T22:13:09.210

这是您设置缓存策略的方法

```
[RKObjectManager sharedManager].objectStore.cacheStrategy = [RKFetchRequestManagedObjectCache new]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-13T23:10:59.417

使用新的 RestKit，这可以使用 fetchRequest 块来完成：

```
 [[RKObjectManager sharedManager] addFetchRequestBlock:[self fetchRequestBlock]];

-(RKFetchRequestBlock)fetchRequestBlock{
  RKFetchRequestBlock fetchRequestBlock = ^NSFetchRequest*(NSURL *url){
    if( [url.relativePath isEqualToString:@"api/app/v1/network_contacts"] ){
      return [NSFetchRequest fetchRequestWithEntityName:@"Person"] ;
    }
    return nil ;
  };
  return fetchRequestBlock;
} 
```

此方法查询本地数据库并比较远程对象，如果不匹配，则从本地存储中删除对象。

# mysql - 用于在帖子、评论和个人资料页面上上传文件的数据库设计

> ID：11530573
> 
> 赞同：2
> 
> 时间：2012-07-17T20:42:26.177
> 
> 标签：mysql, database-design

我是网络开发的新手，正在尝试实现一个网站，用户可以在该网站上在个人资料页面、帖子和评论上上传照片和其他文件（即 .doc、.xls、.ppt、.txt、.pdf 等...） . 我正在使用 s3 存储桶进行文件存储，并将使用 mysql 数据库来存储文件 url 和其他关联数据。我感到困惑的是：

其中哪一个是最好的主意？

a) 为以下各项创建文件表：profiles、posts、comments，然后获取与指定对象（post、comment 或 profile）的 id(A FK) 关联的所有文件。

b) 创建一个文件表，其中有一个名为“type”的字段，可以是“profile”、“post”、“comment”，还有一个名为“id”的字段，它是在“类型”字段。

c) 使用任何人都认为更有利的完全不同的模式

编辑：我希望每个文件都与上传者（user_id）相关联，但也附加到它上传的实体（即个人资料、帖子、评论）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:49:07.580

我会创建一张`Files`像

```
Files
|id|file_path|...(other information about the file) 
```

如果 a `Post`, `Comment`and`Profile`只能包含一个文件，您可以`file_id`直接在表格中添加

```
Posts
|id|data|...|file_id| 
```

如果他们可以拥有多个文件，您将需要一个映射表，例如：

```
Posts
|id|data|...

Posts_Files_Mapping
|post_id|file_id| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:57:04.183

文件是否总是属于同一个“事物”，在您的情况下可能是用户、用户配置文件或人员？

在这种情况下，我将定义一组适用于所有文件类型的通用字段，并包含一个“类型”字段来区分文件类型。

像这样的东西可以工作

```
- User/Person/UserProfile/Account
userId (PK)
firstname
lastname

- File
fileId (PK)
title
description
fileType
userId (FK)
size 
```

现在，这是一个模型，如果您希望将文件直接链接到用户，但您可能希望将它们链接到它们放置的帖子，例如在 Facebook 中。在这种情况下，我会将文件的链接作为帖子内容的一部分嵌入，并将帖子链接到用户。

这取决于您的需求是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:59:22.733

正如您所说，您是 Web 开发的新手。

也许您应该考虑跳过像 mysql 这样的关系类型数据库，并使用像[mongodb](http://en.wikipedia.org/wiki/MongoDB)这样的“NOSQL”数据库。

[mongodb](http://en.wikipedia.org/wiki/MongoDB)有很多好处，但主要好处之一是“无方案”数据库的概念，它允许您在同一个集合/表中存储不同类型的数据。

但是不要认为这是一个简单的出路，您仍然必须对建模数据的最佳方法有一个很好的理解。

# clojure - Clojure For Comprehension example

> ID：11530574
> 
> 赞同：5
> 
> 时间：2012-07-17T20:42:43.613
> 
> 标签：clojure, sequence, for-comprehension

I am using [docjure](https://github.com/ative/docjure/blob/master/src/dk/ative/docjure/spreadsheet.clj) and it needs a column map for its select-columns function. I would like to grab all my columns without having to specify it manually. How do I generate the following as a lazy infinite vector sequence [:A :B :C :D :E ... :AA :AB :AC .... :ZZ ... :XFD]?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T00:01:38.603

您的问题归结为：“*如何将数字转换为带有字母 AZ 的 base-26 字符串？* ”。

这是一种方法 - 可能不是最简洁的方法，但让它更优雅留给读者作为练习:)。

假设数字 0-25 映射到“A”-“Z”，26 映射到“AA”等等。首先，我们定义一个`to-col`将整数转换为列关键字的函数。您可以使用该函数生成无限序列。

```
(defn to-col [num]
  (loop [n num s ()]
    (if (> n 25)
      (let [r (mod n 26)]
        (recur (dec (/ (- n r) 26)) (cons (char (+ 65 r)) s)))
      (keyword (apply str (cons (char (+ 65 n)) s)))))) 
```

这为您提供了一种生成无限列关键字序列的方法：

```
(take 100 (map to-col (range)))
;; => (:A :B :C :D :E :F :G :H :I :J :K :L :M :N :O :P :Q :R :S :T :U :V :W
;; :X :Y :Z :AA :AB :AC :AD :AE :AF :AG :AH :AI :AJ :AK :AL :AM :AN :AO :AP
;; :AQ :AR :AS :AT :AU :AV :AW :AX :AY :AZ :BA :BB :BC :BD :BE :BF :BG :BH
;; :BI :BJ :BK :BL :BM :BN :BO :BP :BQ :BR :BS :BT :BU :BV :BW :BX :BY :BZ
;; :CA :CB :CC :CD :CE :CF :CG :CH :CI :CJ :CK :CL :CM :CN :CO :CP :CQ :CR
;; :CS :CT :CU :CV) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T21:02:20.497

corecursion 的基本 clojure 函数（和“打结”是关于它的，不是吗？）是迭代的​​：

```
(def abc (map (comp str char) (range 65 91)))
(defn cols [seed]
  (let [next #(for [x %] (for [y seed] (str x y)))]
    (->> (iterate #(apply concat (next %)) seed)
         (mapcat identity))))

(time (first (drop 475254 (cols abc))))
"Elapsed time: 356.879148 msecs"
"AAAAA"

(doc iterate)
-------------------------
clojure.core/iterate
([f x])
  Returns a lazy sequence of x, (f x), (f (f x)) etc. f must be free of side-effects 
```

编辑：泛化函数以返回集合的“有序”子集

```
(defn ordered-combinations [seed]
  (->> (map list seed)
       (iterate #(for [x % y seed] (concat x [y])))
       (mapcat identity)))

(def cols
  (let [abc (map char (range 65 91))]
    (map #(apply str %) (ordered-combinations abc))))

user> (take 30  (map #(apply str %) cols))
("A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V" "W" "X" "Y" "Z" "AA" "AB" "AC" "AD")
user> (take 28 (ordered-combinations [0 1]))
((0) (1) (0 0) (0 1) (1 0) (1 1) (0 0 0) (0 0 1) (0 1 0) (0 1 1) (1 0 0) (1 0 1) (1 1 0) (1 1 1) (0 0 0 0) (0 0 0 1) (0 0 1 0) (0 0 1 1) (0 1 0 0) (0 1 0 1) (0 1 1 0) (0 1 1 1) (1 0 0 0) (1 0 0 1) (1 0 1 0) (1 0 1 1) (1 1 0 0) (1 1 0 1)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-27T13:59:04.437

正如 jneira iterate 所提到的那样，它是正确的方法。

这是对他的功能的改进，应该更清楚地理解，因为它涉及较少的中间类型。与其他一些基于循环/递归的解决方案不同，它是完全惰性的：

```
(defn column-names-seq [alphabet]
  (->> (map str alphabet)
     (iterate (fn [chars]
                (for [x chars
                      y alphabet]
                  (str x y))))
     (apply concat))) 
```

要使用它，只需为其提供一个字母字符串，例如：

```
(take 30 (column-names-seq "ABCDEFGHIJKLMNOPQRSTUVWXYZ"))  ;; => ("A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V" "W" "X" "Y" "Z" "AA" "AB" "AC" "AD") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T00:10:19.983

这个答案是错误的；希望以教育的方式。

从数学上讲，您要的是字母表无限序列**的所有子集的惰性序列。**

```
(take 40 (map #(keyword (apply str %)) 
           (rest (combinatorics/subsets  "ABCDEFGHIJKLMNOPQRSTUVWXYZ"))))
(:A :B :C :D :E :F :G :H :I :J :K :L :M :N
 :O :P :Q :R :S :T :U :V :W :X :Y :Z :AB :AC 
 :AD :AE :AF :AG :AH :AI :AJ :AK :AL :AM :AN :AO)

foo.core> (nth (map #(keyword (apply str %)) 
                 (rest (combinatorics/subsets  "ABCDEFGHIJKLMNOPQRSTUVWXYZ"))) 
               40000)
:BLOUZ 
```

项目.clj：

```
(defproject foo "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [ org.clojure/math.combinatorics "0.0.3"]]
  :dev-dependencies [[swank-clojure/swank-clojure "1.4.0"]]) ; swank) 
```

使用 math.combanatorics：

```
(ns foo.core
  (:require [clojure.math.combinatorics :as combinatorics])) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T02:34:04.133

我认为这可能是您正在寻找的那种东西（如果不是，那么至少我认为“正确”的答案应该是 ;o）。

```
(defn stream [seed]
  (defn helper [slow]
    (concat (map #(str (first slow) %) seed) (lazy-seq (helper (rest slow)))))
  (declare delayed)
  (let [slow (cons "" (lazy-seq delayed))]
    (def delayed (helper slow))
    delayed))

(take 25 (stream ["a" "b" "c"]))
("a" "b" "c" "aa" "ab" "ac" "ba" "bb" "bc" "ca" "cb" "cc" "aaa" "aab" "aac" "aba" "abb" "abc" "aca" "acb" "acc" "baa" "bab" "bac" "bba") 
```

[git 中的代码](https://github.com/andrewcooke/clojure-lab/blob/master/src/org/acooke/lab/perms.clj)。我怀疑我在滥用职权`def`，但它确实有效。

这个想法很简单：我从序列中获取输出并将其反馈给自身。对于输出中的每个值（也是输入），我通过在种子序列中附加每个字母来生成一个新的输出。由于这是循环的，因此它会继续进行（输入中有一个初始的“”，但输出中没有，这有助于避免从无到有创建某些东西）。

在 Haskell 的一篇相当著名的论文中，将输出馈入输入的过程称为“打结”。但是在 Clojure 中更难做到，因为它是一种急切的语言（甚至懒惰的序列也不够“懒惰”）——我能找到的唯一解决方案就是搞砸了（我怀疑有人可能会用and`def`做得更好，但我没有运气）。`delay``force`

也许它甚至可以写成地图？

[2012-07-19 更新，代码更紧凑]

相关问题与更好的代码在[Clojure 中打结的答案中：没有（显式，丑陋）突变的循环引用？](https://stackoverflow.com/questions/11567625/tying-the-knot-in-clojure-circular-references-without-explicit-ugly-mutation)（这与 jneira 的答案相同）。

为了完整起见，这是使用的最终版本`iterate`：

```
(defn stream [seed]
  (defn helper [slow] (mapcat (fn [c] (map #(str c %) seed)) slow))
  (apply concat (iterate helper seed))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T22:49:48.793

Probably there is a way to remove the "for" duplication, but here is something that works for me:

```
(def all-letters (map char (range 65 90)))
(defn kw [& args] (keyword (apply str args)))
(concat
  (for [l all-letters] (kw l))
  (for [l all-letters l2 all-letters] (kw l l2))
  (for [l all-letters l2 all-letters l3 all-letters] (kw l l2 l3))) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-28T06:00:16.603

```
#include<stdio.h>
int main()
{
int n=703;

char arr[26]={'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};

while(n){
printf("%c ",arr[(n)%26]);
n=(n)/26;

}
return 0;
} 
```

伙计们是这样简单还是我错过了什么......当然，上面的程序会反向打印所需的atring，我们可以通过使用递归或将其存储在字符串中来反转它来避免这种情况......

# ssl-certificate - Facebook App "This Connection is Untrusted"

> ID：11530576
> 
> 赞同：0
> 
> 时间：2012-07-17T20:42:58.730
> 
> 标签：ssl-certificate, facebook-apps, facebook-iframe, facebook-app-requests

I have developed a Facebook app (iframe) for site1.com. site1.com has a valid wildcard SSL certificate (*.site1.com), I have confirmed it here: [http://www.digicert.com/help/](http://www.digicert.com/help/)

On Windows using Firefox (v13) and Chrome (v20.0.1) I can add the app to my Facebook user, authorize it, and it works.

When I try to authorize the app from a Mac using Firefox (v11), I get "This connection is untrusted. site1.com uses an invalid security certificate. The certificate is only valid for the following names: **site2.com**"

When I try to authorize the app from a Linux Fedora box using Firefox (v12) and Chrome (v20.0.1), I get "This connection is untrusted. site1.com uses an invalid security certificate. The certificate is only valid for the following names: **site3.com**"

I do own site1.com, site2.com and site3.com. This app is hosted on site1.com, and the Facebook app is configured only to point to site1.com. site2.com is hosted on the same server as site1.com. site3.com is hosted on a completely different server.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:45:43.943

弄清楚了。

Mac 在其 hosts 文件中有一个条目，指向我们的开发服务器。fedora 盒子也通过 SSH 连接到我们的开发服务器。开发服务器没有 SSL 证书。

# python - Python - 如何将一个对象引用到另一个对象

> ID：11530580
> 
> 赞同：5
> 
> 时间：2012-07-17T20:43:11.137
> 
> 标签：python, class

我正在努力解决的更多基本问题......

给出下面的基本代码......人员对象如何将地址“附加”到它。

```
class Person(object):
    def __init__(self, fn, ln):
        self.uid    = Id_Class.new_id("Person")
        self.f_name = fn
        self.l_name = ln

class Address(object):
    def __init__(self, st, sub):
        self.uid    = Id_Class.new_id("Address")
        self.street = st
        self.suburb = sub

s = Person('John', 'Doe')

hm = Address('Queen St.', 'Sydney') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T20:44:55.490

尝试：

```
class Person(object):
    def __init__(self, fn, ln, address):
        self.uid    = Id_Class.new_id("Person")
        self.f_name = fn
        self.l_name = ln
        self.address = address

class Address(object):
    def __init__(self, st, sub):
        self.uid    = Id_Class.new_id("Address")
        self.street = st
        self.suburb = sub

hm = Address('Queen St.', 'Sydney')

s = Person('John', 'Doe', hm) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:49:10.627

你总是可以通过分配它来附加它（这实际上会更新你的实例的内部**字典**）

```
s.address = hm
print s.address
>>> <object Address ...> 
```

或者更好的是，从您的构造函数中执行它，即

```
class Person : 
    def __init__(self,fn,ln,my_address) : 
        [... snip]
        self.address = my_address 
```

这是完全一样的，但你会确定你有一个地址属性，并且总是可以有没有值的默认参数，例如

```
def __init__(self,fn,ln,my_address=None) : ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T20:45:07.113

随你怎么便。也许最简单的方法是：

```
s.address = hm 
```

但是您并没有说出“附加”的含义。如果您想要更详细的内容（例如，如果您希望在创建 Person 对象时创建地址），那么您需要解释更多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T20:57:06.417

正如 BrenBam 所问，附加是什么意思。你应该问问自己你在谈论多少数据，你需要它有多可靠。我看到您将地址类与人员类分开。这意味着这些不同的对象将以不同的方式使用。

您应该了解常见的数据库设计实践，以及为什么要将地址与人员分开，或者相反，为什么不这样做。

例如：

```
addresses = {}
persons = {}
records = {}

address = Address(...)
person1 = Person(...)
person2 = Person(...)

addresses[address.uid] = address
persons[person1.uid] = person1
persons[person2.uid] = person2

records[address.uid] = [person1.uid, person2.uid] 
```

对于有很多人的地址，或者经常四处走动的人，或者对于不关心谁在某个地址生活或工作的应用程序，这是一个更好的解决方案，只是其中有很多人都值得一些非常重要的垃圾邮件需要为您的产品激发他们的灵感。随着事物和人员四处移动，军队邮件应用程序将受益。

# android - 在 Nexus 7 上为我的付费应用显示“您的设备与此版本不兼容”

> ID：11530584
> 
> 赞同：4
> 
> 时间：2012-07-17T20:43:32.443
> 
> 标签：android, google-play

我有两个完全一样的应用程序（免费和付费），除了广告显示和不显示。
我购买了 Nexus 7 并尝试在 Google Play 上下载我的应用程序，它允许免费版本，但付费版本显示：“您的设备与此版本不兼容”。

两者的清单文件完全相同：

```
<uses-sdk android:minSdkVersion="11" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T17:58:46.203

检查您的权限。如果你使用的是相机之类的东西，你需要说它不是必需的，然后确保你的代码检查它。我必须将以下“uses-feature”行添加到我的清单中才能使我的应用程序正常工作。

```
<uses-feature android:name="android.hardware.camera" android:required="false" /> 
```

然后我使用以下代码设置了一个标志，这样我就不会在应用程序中调用任何试图使用相机的东西。

```
PackageManager pm = this.getContext().getPackageManager();
Boolean hasFlashSupport = pm.hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T21:03:13.840

我的应用程序遇到了类似的问题。跟随变化有所帮助。

```
<compatible-screens>
....
    <!-- Special case for Nexus 7 -->
    <screen android:screenSize="large" android:screenDensity="213" />
</compatible-screens> 
```

查看答案[https://stackoverflow.com/a/11745425/348154](https://stackoverflow.com/a/11745425/348154)和[http://code.google.com/p/android/issues/detail?id=34076](http://code.google.com/p/android/issues/detail?id=34076)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T01:59:56.680

将“复制保护”设置为“关闭”会改变什么吗？Jelly Bean 有一个新的复制保护（前向锁定）方案，该方案与旧方案不兼容，并自动为付费应用启用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:18:28.577

不，一两天后，它又出现在市场上。我不必做任何事情。
（诡异的）

# iphone - GDB：将 EXC_BAD_ACCESS 信号传递给程序

> ID：11530586
> 
> 赞同：3
> 
> 时间：2012-07-17T20:43:49.627
> 
> 标签：iphone, debugging, gdb, signals, exc-bad-access

注意：这个问题源于我问过的关于 iPhone 启动的另一个问题：[Launch installed app on tethered iPhone](https://stackoverflow.com/questions/11404410/launch-installed-app-on-tethered-iphone)

我有一种情况需要捕获所有信号，特别是 EXC_BAD_ACCESS 以在崩溃处理程序中使用。当 GDB 连接到进程时，它会处理信号并中断，而不是让程序处理它。

GDB 具有`handle all noprint pass nostop`应该将所有信号传递给程序而不是中断的命令。这适用于我尝试过的所有信号，除了 EXC_BAD_ACCESS，即使它列在其信号列表中。

现在i386 Darwin 6.3.5版本的GDB也有这个命令了`dont-handle-bad-access 1`。如果我打开它并触发信号，GDB 会成功传递在程序中变成 SIGBUS 的信号。

现在是我问题的症结所在。我正在连接的 iPhone 上进行远程调试。使用的 GDB 版本是 ARMV7 6.3.5 版本，遗憾的是没有该`dont-handle-bad-access`命令。如果我打开`handle all noprint pass nostop`命令并触发崩溃，则调试器会挂起，如果我将其保留为默认值，则调试器会捕获信号并且永远不会进入我的信号处理程序。

有没有办法让这个版本的 GDB 正确传递 EXC_BAD_ACCESS 信号，或者有没有办法在任何类型的崩溃或中断时触发操作（在这种情况下，我可以发出 SIGBUS 信号或至少退出程序） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:34:13.583

这是一个解决方法，使用设置句柄所有打印通过 nostop 并监视错误流，如果您看到类似的行`Program received signal ...`，请终止进程 gdb-arm-apple-darwin

# apache - ssi文件上面的引用

> ID：11530587
> 
> 赞同：0
> 
> 时间：2012-07-17T20:43:49.630
> 
> 标签：apache, include, ssi

我已经在 Windows 上安装了 Apache 2.2。我打开了 Includes 并且我的 shtml 文件包含了它们各自的 html 文件。

我遇到的问题是每个包含文件上方都有两个引号“”。

```
<body>
<!--#include virtual="/includes/Header.html" -->
</body> 
```

渲染

```
<body>
" " 
html header from include
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:00:20.380

可能的解决方案：

1）删除`/`之前包含在`<!--#include virtual="/includes/Header.html" -->`

2）假设包含包含指令的文件也有`.html` 扩展名，并调用您的工作文件夹`C:/workingfolder`，您是否将`httpd.conf`文件设置如下？

```
<Directory "C:/workingfolder">
    Options Indexes FollowSymLinks Includes
    ...
</Directory>

AddType text/html .shtml .html
AddOutputFilter INCLUDES .shtml .html 
```

# asp.net-mvc-3 - 有没有办法在 MVC3 中创建一个单例而不使用 Ioc/ninject

> ID：11530588
> 
> 赞同：1
> 
> 时间：2012-07-17T20:43:50.113
> 
> 标签：asp.net-mvc-3, c#-4.0

在使用 HIGH AVAILABITY SESSION MODE (sessionState mode="StateServer") 时，会话中的所有数据都必须是 SERIALIZABLE。我不知道如何在没有会话的情况下创建单例..

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:50:02.223

您应该为您的单身人士提供您的终身要求，让我们知道哪种解决方案对您来说是可行的。

话虽如此，您的应用程序将在应用程序域中运行。[当您在 msdn 上以此处](http://msdn.microsoft.com/en-us/library/ff650316.aspx)描述的方式定义单例时，或者像 Oded 链接一样，该单例将处于活动状态并在您的应用程序域的生命周期之后返回相同的实例，这再次遵循您的托管机制的生命周期。我将假设托管机制是 IIS，在这种情况下，您的单例实例将一直存在，直到您的应用程序池被回收。

简而言之，即使您的应用程序是每次调用（无状态）Web 服务，您也可以使用普通的单例。所有这些无状态意味着您的服务类将是无状态的并且每次调用都会实例化。您的应用程序域仍将存在更长时间。

# ios - iOS 上带有 POST 参数的 HTTPRequest

> ID：11530589
> 
> 赞同：0
> 
> 时间：2012-07-17T20:43:54.133
> 
> 标签：ios, ios5, httprequest

我尝试按照这篇[iOS 帖子中的说明进行操作：如何执行 HTTP POST 请求？](https://stackoverflow.com/questions/5537297/ios-how-to-perform-a-http-post-request)但不幸的是，服务器回答但没有给我任何数据。

被`connection didReceiveResponse`调用以及`connectionDidFinishLoading`没有错误。

难道我做错了什么？我用[Hurl.it](http://hurl.it/)测试了该服务，它运行得恰到好处。

`requestUrlString`=一个普通的网址，

`postString`= 类似“appId=1&last_update=0”

```
responseData = [[NSMutableData alloc] initWithLength:0];

NSURL *baseURL = [NSURL URLWithString:[requestUrlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:baseURL];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%d",[postString length]] forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
[connection start];

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [responseData setLength:0];
    NSLog(@"Connection didReceiveResponse");
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [responseData appendData:data];
    NSLog(@"Connection didReceiveData");
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"Connection Error: %@", [error description]);

    [[[UIAlertView alloc] initWithTitle:@"Error"
                                 message:[error description]
                                delegate:nil
                       cancelButtonTitle:@"OK"
                       otherButtonTitles:nil] show];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Connection didFinishLoading");
    NSLog(@"data %@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
} 
```

请不要参考 ASIHTTP 我在这里得到了同样的结果。

***//编辑：我修复了很抱歉打扰你我的问题。问题是编码类型。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:51:34.090

Web 服务是否生成响应正文？或者它只是生成响应头？如果没有响应正文，则没有响应显示在 iOS 上。

另外，我相信您需要一个“接受”标题。

# embedded - ARM Cortex M4（或M3）上的周期计数器？

> ID：11530593
> 
> 赞同：16
> 
> 时间：2012-07-17T20:44:02.427
> 
> 标签：embedded, arm, cortex-m3

我正在尝试在 Cortex M4 上分析 C 函数（从中断调用，但我可以将其提取并在其他地方分析）。

计算此函数中通常使用的周期数的可能性是什么？函数应在大约 4000 个周期内运行，因此我猜 RTC 不是一个选项，并且手动计算反汇编周期可能会很痛苦 - 并且只有在平均时才有用，因为我想用典型的闪存/内存在典型的流上进行分析使用模式。

我听说过循环计数器寄存器和 MRC 指令，但它们似乎可用于 A8/11。我还没有在 cortex-Mx micros 中看到这样的说明。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-17T21:02:42.483

看看[这里](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0439c/BABJFFGJ.html)定义的 DWT_CYCCNT 寄存器。请注意，此寄存器取决于实现。谁是芯片供应商？我知道 STM32 实现提供了这组寄存器。

[这篇文章](http://community.arm.com/message/5153#5153)提供了使用 DWT 周期计数器寄存器进行计时的说明。（请参阅 2009 年 12 月 11 日 - 下午 6:29 的邮寄表格）

[这个堆栈溢出帖子](https://stackoverflow.com/q/32610019/223969)也是如何使用 DWT_CYCCNT 的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T05:02:30.573

如果您的部件包含[CoreSight 嵌入式跟踪宏单元](http://www.arm.com/products/system-ip/debug-trace/trace-macrocells-etm/index.php)并且您有适当的支持跟踪的调试器硬件和软件，那么您可以直接分析代码。具有跟踪功能的调试硬件当然更昂贵，并且您的电路板需要设计为在调试头上提供跟踪端口引脚。由于这些引脚通常与其他功能复用，这可能并不总是可行或实用的。

否则，如果您的工具链包含一个周期精确的模拟器（例如[Keil uVision](http://www.keil.com/uvision/db_sim_instructions.asp)中可用的模拟器），您可以使用它来分析代码时序。模拟器提供的调试、跟踪和分析功能通常比芯片上可用的功能更强大、更灵活，因此即使您确实有跟踪硬件，模拟器可能仍然是更简单的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-21T04:44:29.403

`main`在（类似于我的[其他帖子](https://stackoverflow.com/a/19124472/786356)）中使用 DWT_CYCCNT 示例（STM32）扩展先前的答案。

注意：我也添加了延迟方法。您可以`stopwatch_delay`通过调用`STOPWATCH_START`、运行`stopwatch_delay(ticks)`、然后调用`STOPWATCH_STOP`和验证来进行验证`CalcNanosecondsFromStopwatch(m_nStart, m_nStop)`。`ticks`根据需要进行调整。

```
uint32_t m_nStart;               //DEBUG Stopwatch start cycle counter value
uint32_t m_nStop;                //DEBUG Stopwatch stop cycle counter value

#define DEMCR_TRCENA    0x01000000

/* Core Debug registers */
#define DEMCR           (*((volatile uint32_t *)0xE000EDFC))
#define DWT_CTRL        (*(volatile uint32_t *)0xe0001000)
#define CYCCNTENA       (1<<0)
#define DWT_CYCCNT      ((volatile uint32_t *)0xE0001004)
#define CPU_CYCLES      *DWT_CYCCNT
#define CLK_SPEED         168000000 // EXAMPLE for CortexM4, EDIT as needed

#define STOPWATCH_START { m_nStart = *((volatile unsigned int *)0xE0001004);}
#define STOPWATCH_STOP  { m_nStop = *((volatile unsigned int *)0xE0001004);}

static inline void stopwatch_reset(void)
{
    /* Enable DWT */
    DEMCR |= DEMCR_TRCENA; 
    *DWT_CYCCNT = 0;             
    /* Enable CPU cycle counter */
    DWT_CTRL |= CYCCNTENA;
}

static inline uint32_t stopwatch_getticks()
{
    return CPU_CYCLES;
}

static inline void stopwatch_delay(uint32_t ticks)
{
    uint32_t end_ticks = ticks + stopwatch_getticks();
    while(1)
    {
            if (stopwatch_getticks() >= end_ticks)
                    break;
    }
}

uint32_t CalcNanosecondsFromStopwatch(uint32_t nStart, uint32_t nStop)
{
    uint32_t nDiffTicks;
    uint32_t nSystemCoreTicksPerMicrosec;

    // Convert (clk speed per sec) to (clk speed per microsec)
    nSystemCoreTicksPerMicrosec = CLK_SPEED / 1000000;

    // Elapsed ticks
    nDiffTicks = nStop - nStart;

    // Elapsed nanosec = 1000 * (ticks-elapsed / clock-ticks in a microsec)
    return 1000 * nDiffTicks / nSystemCoreTicksPerMicrosec;
} 

void main(void)
{
    int timeDiff = 0;
    stopwatch_reset();

    // =============================================
    // Example: use a delay, and measure how long it took
    STOPWATCH_START;
    stopwatch_delay(168000); // 168k ticks is 1ms for 168MHz core
    STOPWATCH_STOP;

    timeDiff = CalcNanosecondsFromStopwatch(m_nStart, m_nStop);
    printf("My delay measured to be %d nanoseconds\n", timeDiff);

    // =============================================
    // Example: measure function duration in nanosec
    STOPWATCH_START;
    // run_my_function() => do something here
    STOPWATCH_STOP;

    timeDiff = CalcNanosecondsFromStopwatch(m_nStart, m_nStop);
    printf("My function took %d nanoseconds\n", timeDiff);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-29T17:49:04.560

这更容易：

[代码]

```
#define start_timer()    *((volatile uint32_t*)0xE0001000) = 0x40000001  // Enable CYCCNT register
#define stop_timer()   *((volatile uint32_t*)0xE0001000) = 0x40000000  // Disable CYCCNT register
#define get_timer()   *((volatile uint32_t*)0xE0001004)               // Get value from CYCCNT register

/***********
* How to use:
*       uint32_t it1, it2;      // start and stop flag                                             

        start_timer();          // start the timer.
        it1 = get_timer();      // store current cycle-count in a local

        // do something

        it2 = get_timer() - it1;    // Derive the cycle-count difference
        stop_timer();               // If timer is not needed any more, stop

print_int(it2);                 // Display the difference
****/ 
```

[/代码]

适用于 Cortex M4：CJMCU 板上的 STM32F407VGT，只计算所需的周期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-14T10:07:23.133

这取决于您的 ARM 实现。

我`SysTick->VAL` 在 stm32F4 内核上使用了寄存器。这是周期准确的。

在解释结果时，请注意：

*   考虑到包装。
*   它倒计时，而不是倒计时。

限制：这仅适用于小于单个 systick 的间隔。

# android - Android模拟器启动失败

> ID：11530594
> 
> 赞同：0
> 
> 时间：2012-07-17T20:44:06.007
> 
> 标签：android, android-emulator

我有这个问题，Andorid 中的许多人在编码过程中似乎都遇到过这个问题。当我尝试在模拟器上启动我的 android 应用程序时，我收到以下消息。

[2012-07-18 02:09:06 - 大实验] 无法在设备 'emulator-5554 上安装大实验.apk！

[2012-07-18 02:09:06 - 大实验] (null)

[2012-07-18 02:09:06 - 大实验] 发射取消！

直到昨天它都像魅力一样工作。我想也许我在我的 java 文件中犯了一些错误，但似乎也不是这样。我在这个文件中添加了最低限度。我遵循了一些人的建议，例如将 ADB 连接超时增加到 10000 毫秒（它是 5000）、清理构建项目、重新创建 AVD。现在我不知道该怎么办。在这里卡了这么多小时。请帮助解决此问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:47:59.377

建议：

1.  在您的项目上运行“干净”。

2.  退出 Eclipse。重新启动你的电脑:)

3.  看看它是否从“干净的石板”中恢复过来。

还：

> [http://developer.android.com/guide/practices/optimizing-for-3.0.html](http://developer.android.com/guide/practices/optimizing-for-3.0.html)
> 
> 提示：要缩短模拟器的启动时间，请在使用 SDK 和 AVD 管理器创建 AVD 时为它启用快照（在 AVD 创建器中有一个用于启用快照的复选框）。然后，从 AVD 管理器启动 AVD 并检查从快照启动和保存到快照。这样，当您关闭模拟器时，会保存 AVD 状态的快照，并用于下次快速重新启动 AVD。但是，当您选择保存快照时，模拟器的关闭速度会很慢，因此您可能希望在获取初始快照后（第一次关闭 AVD 后）禁用保存到快照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:46:31.347

尝试将新设备添加到模拟器

# django - 使用 mod_wsgi 提供 Django 静态文件

> ID：11530597
> 
> 赞同：-1
> 
> 时间：2012-07-17T20:44:18.133
> 
> 标签：django, mod-wsgi, django-staticfiles

我听说 Django 静态文件应该直接从 Web 服务器部署，而不是通过 Django 本身。我正在使用 mod_wsgi——有人知道我将如何配置它来为我的 django 静态文件提供服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:37:40.247

看：

[https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#serving-the-admin-files](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#serving-the-admin-files) [http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)

# wordpress - 五列动态wordpress

> ID：11530606
> 
> 赞同：0
> 
> 时间：2012-07-17T20:45:04.190
> 
> 标签：wordpress, dynamic

我正在尝试创建一个动态的 wordpress 首页模板，其中包含五列部分。我正在使用 Reverie 框架（基于 ZURB 的 Foundation (http://foundation.zurb.com/docs/)）构建我的主题。在下图中，您可以看到带有图标的五列、一个 h 标签和一个段落。我可以静态地构建它，但希望有人能指出我如何在 wordpress 中动态地执行此操作的正确方向，以便图标可以与 h 标签和段落文本一起更改。任何方向或指导都会很棒。

[http://crothersenvironmental.com/images/crothers.jpg](http://crothersenvironmental.com/images/crothers.jpg)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:34:36.380

这很有趣，我建议为此使用自定义帖子类型。其他人会争辩使用小部件，其他人会说保持简单并在帖子中使用类别，而其他人仍然会说只添加管理面板选项来更改它。

使用我个人的选择，您将安装一个名为 Custom Press 的插件。配置一个新的帖子类型（称之为服务或其他东西，并确保在“支持”下选中标题、编辑器和缩略图。

现在在您的主页中，您将查询自定义帖子（限制为 5 个），图像将是帖子的特色图像，描述将是帖子的内容，帖子的标题将是服务的名称。

在新创建的部分中创建五个帖子（应显示在管理面板中的评论下方）。

要查询主页上的帖子，请尝试以下操作：

```
<?php
$query = new WP_Query(array('post_type'=>'services','posts_per_page'=>'5'));
while ($query->have_posts()) : $query->the_post();
?>
<!-- Post Start -->
<?php the_post_thumbnail(array(150,150), array("class"=>"service-image")); ?>
<h2><?php the_title(); ?></h2>
<p><?php the_content(); ?></p>

<?php endwhile; wp_reset_query(); ?> 
```

这样做是查询帖子类型“服务”中的五个最新帖子（即您在自定义印刷机中设置的内容）并循环遍历每个帖子，首先打印出图像，然后是标题，然后是内容。您需要对其进行样式设置并更改其结构以匹配您的结构。

我希望这能为您指明正确的方向，请随时要求任何澄清。
最大限度

# c - 获取 C/C++ 中指令的地址

> ID：11530613
> 
> 赞同：7
> 
> 时间：2012-07-17T20:45:23.963
> 
> 标签：c, base-address

有什么方法可以获取指令的地址？我曾尝试用来标记指令并获取标签的地址，但似乎它仅适用于带有 && 运算符的 GCC 编译器。（参考：[这篇文章](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html)）如果其他编译器呢？

对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:56:01.780

我不确定 C 或 C++ 语言标准是否涉及指令。您可以想象运行一个编译为由一大群人类奴隶执行的 C 程序（但这将是不道德的，即使符合标准）。你可以用铅笔和纸自己运行一个简单的小程序，你可以使用 C 解释器，等等......等等......

优化的 C 或 C++ 编译器还将一些 C 语句转换为位于不同位置的多个机器指令（特别是，编译器执行内联或克隆函数甚至基本块，即使`inline`源代码中没有任何关键字）。

在大多数系统上，您可以编写代码（例如在汇编中）一个例程，该例程以指针值的形式返回其返回地址（即调用者的地址）。

使用 GCC（和兼容的编译器，可能是 Clang/LLVM），您可以使用[__builtin_return_address](http://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)和相关的内置函数。

Linux 上的 Gnu Libc 为您提供[回溯](http://linux.die.net/man/3/backtrace)（但当我尝试时，我被它失望了）。

请注意，这些技巧在编译时可能不起作用`-fno-frame-pointer`

您还可以考虑使用插件或[MELT](http://gcc-melt.org/)扩展来定制 GCC（MELT 是一种特定于领域的语言，作为 GCC 的 GPLv3 插件实现，比使用 C 编码的插件更容易扩展 GCC）。您定制的 GCC 可能会在适当的位置插入对检测函数的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:09:56.727

注意：这里开箱即用..

您可以让链接器生成一个映射文件，其中包含应用程序对象（函数和数据）的地址（相对或其他）吗？然后，您的应用程序可以简单地解析链接器映射文件......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:06:50.153

唯一接近指令地址的标准 C 或 C++ 构造是函数指针，我想这不是您的意思。但是，您可以使用指向包含必要代码块的函数的指针来完成大多数可能对 gcc 标签值执行的操作。

C/C++ 中没有其他选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T21:29:28.427

函数的返回地址是从当前函数返回时要执行的下一条指令的位置。GCC 通过[__builtin_return_address](https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)公开这一点；而 Visual C++ 通过[_ReturnAddress](https://docs.microsoft.com/en-us/cpp/intrinsics/returnaddress)提供它。

# android - 在调试模式下连接时找不到 SD 卡 Android

> ID：11530614
> 
> 赞同：1
> 
> 时间：2012-07-17T20:45:25.130
> 
> 标签：android, android-camera

我正在尝试用我的 android 应用程序拍照，我有一个 Droid 版本`4.0.4`，它连接到 USB 并打开调试模式。我想测试我的应用程序，但连接时显示“ `SD card not found. please insert SD card to take a photograph`”。断开连接后，我可以拍照。我不懂为什么。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:52:50.440

提交我的评论作为答案（感谢实习生！）：

确保在与 USB 连接时，您的模式未设置为 USB 大容量存储。它将 SD 卡作为驱动器安装在您的 PC 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:50:54.763

@keatonGreve 的评论有效。我以 USB 大容量存储模式连接。

# ruby-on-rails-3 - 如何在工厂女孩序列中创建belongs_to关系

> ID：11530616
> 
> 赞同：0
> 
> 时间：2012-07-17T20:45:36.617
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

我有一个属于_to 一个 Icon 的 Quiz 模型，一个 Icon has_many Quizzes。

在工厂女孩创建测验时，我有一个序列。

```
factory :quiz do
  sequence(:title) { |n| "Quiz #{n} Title" }
  sequence(:description) { Faker::Lorem.paragraph(sentence_count = 3) }
end 
```

由于添加了 Icon 关系，我的所有测试都失败了，因为工厂中没有生成 quiz_id。

我也有一个图标序列

```
 factory :icon do
    sequence(:title) { |n| "Icon #{n}" }
    sequence(:image) { fixture_file_upload(Rails.root + 'spec/fixtures/images/love.png', 'image/png') }
  end 
```

如何正确地将 icon_id 添加到我的测验工厂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:58:37.917

```
factory :quiz do
  icon # or association(:icon) will also work
  sequence(:title) { |n| "Quiz #{n} Title" }
  sequence(:description) { Faker::Lorem.paragraph(sentence_count = 3) }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:58:50.627

我解决了...如果有人有同样的问题。将以下内容添加到测验工厂就可以了。最后很明显！

```
sequence(:icon) { FactoryGirl.create(:icon) } 
```

# python - Python中的循环构造

> ID：11530619
> 
> 赞同：0
> 
> 时间：2012-07-17T20:45:49.687
> 
> 标签：python

我是一个 python 菜鸟，并且在设置一个循环来检查 int z 是否可以被一组数字整除，例如被 1 - 10 整除时遇到问题。我编写了以下代码片段，但它们都返回 X =[所有数字of z]... 即他们未能应用 if 条件，以便在给定范围/集合中检查所有 n 的 mod。

```
X = []
z = 1
while z in range(1,1000):
    if all(z % n == 0 for n in range(1,21)):
        X.append(z) 
    z += 1 
```

也试过：

```
X = []
if all(i % n == 0 for n in range(1,21)):
    X.append(i) 
```

和

```
X = []
for z in range(1,1000000):
    if all(z % n == 0 for n in range(1,21)):
        X.append(z) 
```

知道在这些案例中的每一个（或至少 1 个）中出了什么问题吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:51:06.290

编辑：错了，固定答案。

你在用 numpy 吗？numpy 发生了一些有趣的事情，它是所有的版本。

```
import numpy as np
all( z % n for n in range(1,5)) # NameError
np.all( z % n for n in range(1,5)) # True
z = 5
all( z % n for n in range(1,5)) # False
np.all( z % n for n in range(1,5)) # True
np.all([z % n for n in range(1,5)) # False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:50:37.030

问题不在于 Python，而在于你的数学。 `x % n == x`如果 x 小于 n。特别是，任何小于 21 的整数都不能为零，直到 21 的每个数字 `3 % 18`都是 3。所以你需要重新考虑你在问什么。如果你真的试图找到一个能被从 1 到 21 的每个数字整除的数字，那么你将得到的唯一数字将是巨大的数字（例如，21！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:58:35.533

```
print [z for z in range(10000) if all(z%k==0 for k in range(1,10))]
>>> [0, 2520, 5040, 7560] 
```

似乎工作。第二个例子，我似乎没有被初始化。第三似乎有效。

PS：请注意 fact(21) 相当大，肯定大于 1000000 - 这不是一个完美的结果，但它可能比第一个答案低一两个因素（素数分解 yadda yadda）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T21:04:34.453

在您的第一个示例中，您正在执行一些奇怪的 while 和 for 循环组合，我对它的运行感到有点惊讶！

在第二个示例中，您没有初始化或更新`i`.

第三个例子有效。但是，第一个能被 1 到 20 之间的所有数字整除的数字是 232792560，这超出了您的范围。

作为替代方案，您也可以在一行中完成

```
X = [z for z in range(1, 1000000) if all(z % n == 0 for n in range(1, 21))] 
```

但同样，您不会得到低于 232792560 的任何结果！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T21:21:03.603

首先，所有数字都可以被 1 整除，甚至可以被 0 整除。因此，您的 range(1,21) 可能应该通过 range(2,21) 排除 1

```
x % 1 == 0 
```

如果 x > 0 并且是整数，则始终为真。

然后澄清：如果你有：

```
rangeOne = range(1,1000000)
rangeTwo = range(2,21) 
```

其次，您是否仅在 rangeOne 中寻找可被 rangeTwo 中的所有数字整除的数字？

或者您是否正在寻找 rangeOne 中可能素数的子集，以便您想要获得一个不能被 rangeTwo 中的任何数字整除的数字列表（结果是整数与分数）？

或者与之相反，rangeOne 中的所有数字都可以被 rangeTwo 中的任何一个或多个数字整除，这意味着排除素数。

这样的案例还有很多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T00:05:54.583

首先，实际上需要检查任何 int 可除性的集合`z`小于`N`范围`1-N`。原因如下：任何`x`能被 6 整除的数，也能被它的因数整除，即`1,2,3,6`.

所以本质上，你的算法是：

```
for number in rangeArray:
     removeSubList(getAllFactors(number),rangeArray) 
```

* * *

翻译成python代码：

```
#Note: this can be sped up even faster by appending both the multiples 
#at the same time instead of iterating over the range 1,number
#Note: get_all_factors(6) will return [1,2,3] but not [1,2,3,6]
def get_all_smaller_factors(number):
   factors = [number,1] 
   for x in range(1,number):
       if (number % x == 0 and number not in factors):
           factors.append(x)
   return factors

#Note: again, I'm too tired to find proper names, please improve later.
def min_factor_list(max):
    factors = range(1,max)
    for factor in factors:
        #remove the sublist you get from get_all_factors
        factors = [x for x in factor if x not in get_all_smaller_factors(x)] 
    return factors

#Note: again, I'm too tired to find proper names, please improve later.
def accept(input_var, range):
    factors = min_factor_list(range)
    for factor in factor:
         if(input_var % factor is not 0):
            return false

    return true 
```

* * *

现在您已经摆脱了无聊的东西，这里有一个简单的 oneliner 可以完成您的工作：

```
 print "Is %d divisible by range(1,%d)? %r"%(z,max,accept(z,max)) 
```

免责声明：我实际上并没有尝试过代码，但这应该可以工作。

编辑：另一种（不是完全不相关但肯定更好）的方法是使用范围（1..range_max）并找到最小公倍数（即[LCM](http://en.wikipedia.org/wiki/Least_common_multiple)）。从那里，您可以简单地检查是否`LCM`是一个因素`Z`。

该`min_factor_list`方法应该对此有所帮助。您可以简单地将该列表中的每个元素相乘并获得`LCM`（列表中的任何元素都没有另一个元素作为其因子，或者简单地说，所有元素都是相对质数）

为什么这行得通？因为`Z`必须*至少*和`LCM`. 现在下一次你得到一个可以被所有数字整除的数字是什么时候？这与`LCM*2`. 那之后的下一次呢？`LCM*3`

# javascript - 如何在使用 Ajax 调用加载外部页面后附加事件处理程序？

> ID：11530623
> 
> 赞同：0
> 
> 时间：2012-07-17T20:46:16.373
> 
> 标签：javascript, jquery, ajax

我正在开发一项服务，允许用户创建团队和挑战，以及个人帐户。每个团队和挑战都有一个唯一的“ownerID”，每个用户都有一个“userID”。主用户启动页面由三个手风琴组成：团队、挑战和设置，在选择时会显示一系列按钮。单击按钮后，将使用来自单独页面的数据填充一个空的 div。然后我遇到了上述问题。加载挑战的外部页面数据后，其中包含一个下拉列表和一个用户加入或团队加入按钮，具体取决于选择。问题是，我希望能够单击任一按钮，然后调用一个函数，但是，我不能说：

```
$('#userJoin').on("click", function() {
                var challengeID = $('#challengeSelect').val();
                var userID = $('#userID').val();
                if (challengeID != 0 && userID != 0) {
                    joinUserToChallenge(challengeID, userID);
                }
            }); 
```

我假设这是因为该函数当前位于 document.ready 部分中，但我对如何将其集成到 JS 文件中持空白。一如既往，我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:00:58.103

我不确定我是否理解正确，但这是一个解决方案 - 如何将事件附加到加载内容的特定元素：

```
$(ElementWhichContainsLoadedContent).on('click', 'ButtonSelector', function()
{
    // Your code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:04:17.367

这个函数应该可以工作，如果你把它放在用你的按钮加载内容的ajax代码的回调中。 `.on()`只会在页面加载时识别 DOM 中的元素，并且不会捕获插入的元素，除非您将其标记为页面加载时存在的父元素。

但是，创建函数并与 ajax 回调绑定应该可以解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T21:14:44.010

`delegate`正如我正确理解您的问题，这正是应该使用 jQuery 方法的确切情况： [jQuery 委托方法](http://api.jquery.com/delegate/)。文档中的描述：

> 根据一组特定的根元素，将处理程序附加到与选择器匹配的所有元素的一个或多个事件，**现在或将来。**

在 jQuery 1.7 之前有一个名为 的方法`live`，但现在它已被弃用，所以你应该使用`delegate`

# javascript - Jquery：帮助从数据属性中获取值

> ID：11530629
> 
> 赞同：0
> 
> 时间：2012-07-17T20:46:39.350
> 
> 标签：javascript, jquery

我有以下标记

```
<a href='#' id="remove_user_from_group" data-user-id="a9a4ae36-c6cd-11e1-9565-910084adb773" data-group-id="e4d66f80-d046-11e1-89b6-16f96811a1bd">x</a> 
```

我想从`user-id`和获取数据`group-id`。

目前，我已经尝试过：

```
$this = $(this);
$("#remove_user_from_group").live('click', function() {
    var userid = $this.data('user-id');
    var groupid = $this.data('group-id');
    alert(userid);
    alert(groupid);
}); 
```

`undefined`这会弹出我 2 个带有值的警报。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:52:05.400

放入`$this = $(this);`您的点击功能。或者，将函数更改为：

```
$("#remove_user_from_group").live('click', function() {
    var userid = $(this).data('user-id');
    var groupid = $(this).data('group-id');
    alert(userid);
    alert(groupid);
}); 
```

**[jsFiddle 示例 1](http://jsfiddle.net/j08691/stqRj/)**和**[jsFiddle 示例 2](http://jsfiddle.net/j08691/jR2ju/)**

另外顺便说一句，[`live()`](http://api.jquery.com/live/)已弃用[`on()`](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:49:30.767

`$(this)`您需要通过更改而不是`$this`在第 3 行和第 4 行将函数中的对象转换为 Jquery 对象

# jquery - jQuery - 如何检测有多少项目然后为它们分配一个类

> ID：11530630
> 
> 赞同：2
> 
> 时间：2012-07-17T20:46:47.057
> 
> 标签：jquery

我有以下基本 HTML：

```
<div class="row-wrapper">
  <div class="box">...</div>
  <div class="box">...</div>
</div> 
```

...并且我需要为`.foo`已经拥有该类的内部 DIV分配一个附加类`.box`（当然保留`.box`该类）。

我需要一种方法来检测内部何时有 2 个 DIV`.row-wrapper`

知道我怎么能做到这一点吗？

我尝试阅读`.length`方法的 jQuery API 文档，但对于我的 jQuery 知识来说它有点太复杂了。

我也读过一个[类似的论坛](https://stackoverflow.com/questions/6243554/jquery-how-do-i-detect-how-many-divs-of-a-given-class-exist-within-a-given-div)，但他们没有解释如何定义项目的数量。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T20:48:02.620

```
// If there are 2 or more children 
if($('.row-wrapper').children('.box').length >= 2){
    // add a class
    $('.row-wrapper .box').addClass("foo");
} 
```

像上面这样的东西应该可以工作。

编辑：由于wirey建议可能不止一个`.row-wrapper`- 这是一个有效的观点，我们可以做这样的事情：

```
// Loop through each .row-wrapper
$(".row-wrapper").each(function(){
    // If there are 2 or more children
    if($(this).children('.box').length >= 2){
        // Find .box elements within $(this), and add a class.
        $(this).find('.box').addClass('foo');
    }
}); 
```

Jared 提供的 JSFiddle：http: [//jsfiddle.net/zqyKn/](http://jsfiddle.net/zqyKn/)

# c# - 需要 Linq 左连接语法更正

> ID：11530631
> 
> 赞同：5
> 
> 时间：2012-07-17T20:46:52.317
> 
> 标签：c#, linq

我在确定`Linq`多个连接中左外连接的语法时遇到问题。我想对`RunLogEntry`表进行左连接，以便从该表以及所有服务条目中获取匹配的记录。

有人可以纠正我的语法吗？

```
 var list = (from se in db.ServiceEntry
    join u in db.User on se.TechnicianID equals u.ID
    join s in db.System1 on se.SystemID equals s.ID
    join r in db.RunLogEntry on se.RunLogEntryID equals r.ID
    where se.ClosedDate.HasValue == false
    where se.ClosedDate.HasValue == false
        && se.Reconciled == false
    orderby se.ID descending
    select new ServiceSearchEntry()
    {
        ID = se.ID,
        ServiceDateTime = se.ServiceDateTime,
        Technician = u.FullName,
        System = s.SystemFullName,
        ReasonForFailure = se.ReasonForFailure,
        RunDate = r.RunDate
    })
    .Skip((page - 1) * PageSize); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T21:13:30.530

使用`.DefaultIfEmpty`on 方法`r`执行左连接：

```
var list = (from se in db.ServiceEntry
    join r in db.RunLogEntry on se.RunLogEntryID equals r.ID into joinRunLogEntry
    from r2 in joinRunLogEntry.DefaultIfEmpty()
    join u in db.User on se.TechnicianID equals u.ID
    join s in db.System1 on se.SystemID equals s.ID
    where se.ClosedDate.HasValue == false
    where se.ClosedDate.HasValue == false
        && se.Reconciled == false
    orderby se.ID descending
    select new ServiceSearchEntry()
    {
        ID = se.ID,
        ServiceDateTime = se.ServiceDateTime,
        Technician = u.FullName,
        System = s.SystemFullName,
        ReasonForFailure = se.ReasonForFailure,
        RunDate = (r2 == null ? (DateTime?)null : r2.RunDate)
    })
    .Skip((page - 1) * PageSize); 
```

# javascript - Highcharts - 导出到 base64

> ID：11530634
> 
> 赞同：11
> 
> 时间：2012-07-17T20:47:04.350
> 
> 标签：javascript, highcharts

有没有办法获取一个 highcharts 图表，并获得它的 base64 表示？

换句话说，相当于首先将其导出为 PNG 或 JPG（我不在乎），然后获取该图像的 base64 字符串。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T12:50:41.743

这是我解决它的方法：

*   使用[google canvg](http://code.google.com/p/canvg/) 获取 SVG 文件的 URL 或 SVG 文件的文本，用 JavaScript 解析它，然后在 Canvas 元素上呈现结果。

*   使用将您的图表 svg 渲染到画布

    ```
     canvg(document.getElementById('canvas'),getSVG()); 
    ```

*   将画布中的内容转换为图像

    ```
     var canvas = document.getElementById("canvas") ; 
      var img = canvas.toDataURL("image/png"); //img is data:image/png;base64
       img = img.replace('data:image/png;base64,', ''); 
    ```

*   将您的图像渲染到隐藏字段

    ```
     $("hidden field").val(img) ; 
    ```

*   将此字符串转换为字节数组

    ```
     Dim imageFile() As Byte = Convert.FromBase64String(YOUR HIDDEN FIELD .Value) 
    ```

**更新**

获取 highcharts SVG

*   使用`chart.getSVG()`方法

[Highcharts API](http://www.highcharts.com/ref/#chart-object)

[jsFiddle 示例](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/members/chart-getsvg/)

*   或简单地使用`$(your svg).html()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T20:50:20.013

首先，请参阅`highcharts`有关导出文件的文档。这将为您提供所需图像 URL 的字符串。

**出口**：[http ://www.highcharts.com/ref/#exporting](http://www.highcharts.com/ref/#exporting)

使用 HTTP 请求（例如使用 AJAX）获取文件二进制内容（jpg/png）并将其传输到 base64 编码库，如下所示：

**Base64**：[http ://www.webtoolkit.info/javascript-base64.html](http://www.webtoolkit.info/javascript-base64.html)

享受和好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T13:10:14.927

您可以通过在请求中传递所需参数直接从[http://export.highcharts.com](http://export.highcharts.com)获取 base64 。

```
let chartData = {
        infile: CHART_DATA,
        b64: true // Bool, set to true to get base64 back instead of binary.
        width: 600,
        constr : "Chart"
    } 
```

**您可以使用以下代码段获取 base64**

```
fetch("https://export.highcharts.com/", {
  "headers": {
    "content-type": "application/json",
  },
  "body": "{\"infile\":\"{\\n    \\\"xAxis\\\": {\\n        \\\"categories\\\": [\\n            \\\"Jan\\\",\\n            \\\"Feb\\\",\\n            \\\"Mar\\\",\\n            \\\"Apr\\\",\\n            \\\"May\\\",\\n            \\\"Jun\\\",\\n            \\\"Jul\\\",\\n            \\\"Aug\\\",\\n            \\\"Sep\\\",\\n            \\\"Oct\\\",\\n            \\\"Nov\\\",\\n            \\\"Dec\\\"\\n        ]\\n    },\\n    \\\"series\\\": [\\n        {\\n            \\\"data\\\": [1,3,2,4],\\n            \\\"type\\\": \\\"line\\\"\\n        },\\n        {\\n            \\\"data\\\": [5,3,4,2],\\n            \\\"type\\\":\\\"line\\\"\\n        }\\n    ]\\n}\\n\",\"width\":600,\"constr\":\"Chart\",\"b64\":true}",
  "method": "POST",
  "mode": "cors"
}).then(function(response) {
    // The response is a Response instance.
    return response.text();
  }).then(function(data) {
    console.log(data);  //  base64 data
  }).catch(function(err) { console.log(err);})
```

# vb.net - 从 VB.net 程序中的 SQL Server 2008 存储过程中获取 varchar

> ID：11530642
> 
> 赞同：0
> 
> 时间：2012-07-17T20:48:26.787
> 
> 标签：vb.net, sql-server-2008, stored-procedures, output-parameter

我试图从我的 VB.net 程序中的存储过程中获取一个字符串 (nvarchar)。当我在 SQL Studio 中运行 SP 时，它很好，但是当我尝试在程序中运行它时，我得到了错误：

```
Error converting data type nvarchar to int. 
```

这是我的SP：

```
ALTER PROCEDURE cusVerifyAssignment
@assignment_number int,
@compass_or_anodes char(1),
@return nvarchar(1000) OUTPUT
    AS
    BEGIN
SET NOCOUNT ON;

-- Insert statements for procedure here
IF @compass_or_anodes = 'C'
BEGIN
    SET @return = 
    (SELECT CONVERT(nvarchar(1000), p.display_name + '|' + ISNULL(xro.release_type, '') + '|' + a.comments + '|' + a.assignment_id) as blah
        FROM Workplace_base.dbo.people p
        INNER JOIN Workplace_base.dbo.assignments a ON p.people_id = a.people_id
        LEFT OUTER JOIN Workplace_base.dbo.xro_assignment_release_types xro ON a.release_type_id = xro.release_type_id
    WHERE assignment_num = @assignment_number)
END
ELSE
BEGIN
    SET @return = 
    (SELECT CONVERT(nvarchar(1000), p.display_name + '|' + ISNULL(xro.release_type, '') + '|' + a.comments + '|' + a.assignment_id) as blah
        FROM Anodes_Compass.dbo.people p
        INNER JOIN Anodes_Compass.dbo.assignments a ON p.people_id = a.people_id
        LEFT OUTER JOIN Anodes_Compass.dbo.xro_assignment_release_types xro ON a.release_type_id = xro.release_type_id
    WHERE assignment_num = @assignment_number)
END
END
GO 
```

这是我的vb代码：

```
 Dim paramNumber As New OleDbParameter("@assignment_number", SqlDbType.Int)
    Dim paramDB As New OleDbParameter("@compass_or_anodes", SqlDbType.Char)
    Dim paramReturn As New OleDbParameter("@return", SqlDbType.NVarChar)

    Dim reader As OleDbDataReader

    paramNumber.Value = assignmentNumber
    paramDB.Value = "C"
    paramReturn.Direction = ParameterDirection.Output

    cmd = New OleDbCommand("cusVerifyAssignment", con)
    cmd.CommandType = CommandType.StoredProcedure

    cmd.Parameters.Add(paramNumber)
    cmd.Parameters.Add(paramDB)
    cmd.Parameters.Add(paramReturn)

    con.Open()
    reader = cmd.ExecuteReader()
    con.Close()

    Return reader.GetString(0) 
```

我也尝试过使用 executeNonQuery，但这让我得到了同样的结果。任何人都可以提供任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:15:35.553

执行标量？应该允许返回单个值。

# c# - 树视图搜索

> ID：11530643
> 
> 赞同：8
> 
> 时间：2012-07-17T20:48:30.317
> 
> 标签：c#, winforms, search, treeview, treenode

此函数仅查找树视图中的**第一个**节点，其中包含`SearchText`.

```
private TreeNode SearchNode(string SearchText,TreeNode StartNode)
{
    TreeNode node=null;
    while (StartNode!= null)
    {
        if (StartNode.Text.ToLower().Contains(SearchText.ToLower()))
        {
            node = StartNode; 
            break;
        };
        if (StartNode.Nodes.Count != 0) 
        {
            node=SearchNode(SearchText, StartNode.Nodes[0]);//Recursive Search
            if (node != null)
            {
                break;
            };
        };
        StartNode = StartNode.NextNode;
    };
    return node;
} 

private void button1_Click(object sender, EventArgs e)
{
    string SearchText = this.textBox1.Text;
    if (SearchText == "")
    {
        return;
    };
    TreeNode SelectedNode = SearchNode(SearchText, treeView1.Nodes[0]);
    if (SelectedNode != null)
    {
        this.treeView1.SelectedNode = SelectedNode;
        this.treeView1.SelectedNode.Expand();
        this.treeView1.Select();
    };
} 
```

我应该如何更改它，以便该功能不仅可以找到第一个节点，而且可以找到所有节点，每次单击时`button1`，它都会找到下一个节点直到最后，然后从头开始？所以我不应该从 搜索`TreeView1.Nodes[0]`，而是从`TreeView1.SelectedNode`...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T21:35:37.363

像下面这样的东西应该可以添加到您的表单代码中。

```
 private List<TreeNode> CurrentNodeMatches = new List<TreeNode>();

    private int LastNodeIndex = 0;

    private string LastSearchText;

    private void button1_Click(object sender, EventArgs e)
    {

        string searchText = this.textBox1.Text;
        if (String.IsNullOrEmpty(searchText))
        {
            return;
        };

        if (LastSearchText != searchText)
        {
            //It's a new Search
            CurrentNodeMatches.Clear();
            LastSearchText = searchText;
            LastNodeIndex = 0;
            SearchNodes(searchText, treeView1.Nodes[0]);
        }

        if (LastNodeIndex >= 0 && CurrentNodeMatches.Count > 0 && LastNodeIndex < CurrentNodeMatches.Count)
        {
            TreeNode selectedNode = CurrentNodeMatches[LastNodeIndex];
            LastNodeIndex++;
            this.treeView1.SelectedNode = selectedNode;
            this.treeView1.SelectedNode.Expand();
            this.treeView1.Select();

        }
    } 

    private void SearchNodes(string SearchText, TreeNode StartNode)
    {
        TreeNode node = null;
        while (StartNode != null)
        {
            if (StartNode.Text.ToLower().Contains(SearchText.ToLower()))
            {
                CurrentNodeMatches.Add(StartNode);
            };
            if (StartNode.Nodes.Count != 0)
            {
                SearchNodes(SearchText, StartNode.Nodes[0]);//Recursive Search 
            };
            StartNode = StartNode.NextNode;
        };

    } 
```

这有两个部分；

1.  将所有节点收集到一个`List<TreeNode>`

2.  `List<TreeNode>`如果搜索没有改变，则翻页。如果搜索已更改，请清除列表并重置索引。

我已经使用在 .Net 4 下运行的 Windows 窗体对此进行了测试——它逐个遍历包含搜索文本的 TreeView 中的每个节点，直到到达最后一个节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:54:54.807

您需要创建一个节点集合（如列表）并将每个找到的节点添加到该列表并返回它而不是单个节点。此外，您必须删除所有的 break 语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T01:48:57.137

**我使用此解决方案进行搜索包含树节点上的文本**

```
int currentSearch = 0;
int loop = 0;
int found = 0;

private bool FilterTreeNode(TreeNodeCollection nodes, string keyword)
{
    bool result = false;
    for (int i = 0; i < nodes.Count; i++)
    {
        if(result)
            break;
        loop++;
        if (currentSearch < loop)
        {
            currentSearch++;
            if (nodes[i].Text.Contains(keyword))
            {
                found++;
                _treeView.SelectedNode = nodes[i];
                _treeView.SelectedNode.Expand();
                _treeView.SelectedNode.EnsureVisible();
                OnFindResult(string.Format("Current result: {0} on total {1} nodes. FilePath: {2}",
                                    found, _treeView.GetNodeCount(true), nodes[i].Name));
                return true;
            }
        }
        result = FilterTreeNode(nodes[i].Nodes, keyword);
    }

    return result;
} 
```

# php - PHP 变量与 cURL 混合

> ID：11530644
> 
> 赞同：1
> 
> 时间：2012-07-17T20:48:30.610
> 
> 标签：php, curl

我在个人项目中迷失了方向并寻求帮助。我找到了一个 cURL 代码，它可以获取特定 URL 的 Google+ 计数，并且在对您尝试获取的 url 进行硬编码时效果很好。我正在尝试使用 GET 基于表单数据运行此脚本。请参阅下面的工作和非工作示例。我还将我正在更改的代码行加粗。

**作品**

```
*$url = "http://mashable.com";

 $ch = curl_init();  
 curl_setopt($ch, CURLOPT_URL, "https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ");
 curl_setopt($ch, CURLOPT_POST, 1);
 curl_setopt($ch, CURLOPT_POSTFIELDS, '[{"method":"pos.plusones.get","id":"p","params":{"nolog":true,"id":"' . $url . '","source":"widget","userId":"@viewer","groupId":"@self"},"jsonrpc":"2.0","key":"p","apiVersion":"v1"}]');
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: application/json'));

 $curl_results = curl_exec ($ch);
 curl_close ($ch);

 $parsed_results = json_decode($curl_results, true);

 echo $parsed_results[0]['result']['metadata']['globalCounts']['count']; 
```

**不工作**

```
$url = $_GET['url'];

 $ch = curl_init();  
 curl_setopt($ch, CURLOPT_URL, "https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ");
 curl_setopt($ch, CURLOPT_POST, 1);
 curl_setopt($ch, CURLOPT_POSTFIELDS, '[{"method":"pos.plusones.get","id":"p","params":{"nolog":true,"id":"' . $url . '","source":"widget","userId":"@viewer","groupId":"@self"},"jsonrpc":"2.0","key":"p","apiVersion":"v1"}]');
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: application/json'));

 $curl_results = curl_exec ($ch);
 curl_close ($ch);

 $parsed_results = json_decode($curl_results, true);

 echo $parsed_results[0]['result']['metadata']['globalCounts']['count']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:32:03.577

在我最近使用 cURL 的一个项目中，我遇到了类似的问题。

事实证明，在尝试使用 cURL 加载 URL 时，我必须包含 URL 的`http://`和/或`www.`部分。没有它们，cURL 将无法打开 URL。我最终编写了一个脚本来尝试这些不同的组合，因为并非所有站点都响应一个特定的组合。

我从您的上一条评论中看到，您的 URL`var_dump`不包含这些。如果您添加它们，那么希望这将解决您的问题。

# c++ - 需要使用 C/C++ 或 Python 进行 HTTP/HTML 网络编程的库

> ID：11530648
> 
> 赞同：-4
> 
> 时间：2012-07-17T20:48:47.277
> 
> 标签：c++, python, html, c, networking

我对网络编程了解不多，但我在编程（C/C++、Assembly、Lisp 等）方面经验丰富，并且知道一些基本的 HTML 和 Javascript。我需要一个可以用来制作程序的好的库

*   扫描（并解析）一个 HTML 文件。
*   填写表格并选择单选按钮
*   按照链接打开其他页面
*   提交填写好的表格
*   绕过验证码（开个玩笑；D）

如果它是跨平台的会更好，但如果不是，那仍然可以（只要它在 Linux 上运行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:53:36.553

我认为最简单的解决方案是使用 urllib2 Python 标准库：

[http://docs.python.org/library/urllib2.html](http://docs.python.org/library/urllib2.html)

它提供了一种简单的方法来发出各种 HTTP 请求并解析它的响应。在 C++ 中，许多大型库（例如 Qt）都有 HTTP 库。

您还应该将它与 curl 结合使用这些工具来操作和发送表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:30:50.157

您可能还想尝试一下请求：http: [//docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)

有些人认为它是 urllib2 的更好替代方案。主要是语法更人性化。参考： http: [//pydanny.blogspot.com/2011/05/python-http-requests-for-humans.html](http://pydanny.blogspot.com/2011/05/python-http-requests-for-humans.html)

# javascript - 无法使用 jQuery 更改隐藏输入文本框的值

> ID：11530650
> 
> 赞同：1
> 
> 时间：2012-07-17T20:49:08.083
> 
> 标签：javascript, jquery, html, forms

我正在尝试为一些隐藏的输入框更新一些值，但我不是很成功。我对可见输入 [type=text] 执行此操作没有问题。

这是一个小例子：http: [//jsfiddle.net/saHCU/](http://jsfiddle.net/saHCU/)

*用于`Firebug`查看隐藏字段。*

您可以看到添加到 的文本框中的值`item_id3`。但是当您查看源代码时，没有一个文本框有更新的值。

为什么这个不更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:51:54.010

因为它改变的不是属性，而是底层的属性。

HTML`value`属性可以被认为更像是一个“起点”，真正重要的是属性本身（`element.value = 1`在 Javascript 中）。如果您尝试提交表单，或使用 Javascript 查询值，您会看到实际发生了变化，**因此您的代码运行良好**。

*   StackOverflow 上的[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

另外，据我所知，没有`input type="textbox"`，只有`input type="text"`。

# jsf - 当我在页面之间切换时，如何使 Primefaces 咆哮消息可见？

> ID：11530651
> 
> 赞同：0
> 
> 时间：2012-07-17T20:49:08.233
> 
> 标签：jsf, jsf-2, primefaces

我有一个带有 Primefaces 咆哮的 JSF 页面。我想在页面之间切换时发出可见的消息。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:12:26.583

在第二个页面的bean的@PostConstruct方法（或构造函数）中，添加一个FacesMessage，例如：

```
context.addMessage(null, new FacesMessage("Growl Message", "Growl Message Text")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T04:42:03.827

这是我的解决方案。它将在重定向之前在当前页面中显示味精。

HTML：

```
<h:form prependId="false">
    <p:growl />
    <p:button outcome="gotoABC" id="rdr-btn" style="display: none;" />
    <p:commandButton action="#{bean.process()}" update="@form" />
</form> 
```

豆：

```
public void process(){
    addInfoMsg(summary, msgDetail); //Add msg func
    RequestContext.getCurrentInstance().execute("setTimeout(function(){ $('#rdr-btn').click(); }, 3000);"); // 3 seconds delay. I put the script in Constants to config later.
} 
```

# rest - QueryParam 与球衣中的枚举绑定

> ID：11530653
> 
> 赞同：31
> 
> 时间：2012-07-17T20:49:11.440
> 
> 标签：rest, jersey

我有一个像这样的休息 URL [http://www.localhost.com/service/resource?status=ACTIVE,PASSIVE](http://www.localhost.com/service/resource?status=ACTIVE,PASSIVE)我有这样的方法

```
@GET
public Resource resource(@QueryParam("status") Collection<STATUS> statusList){
} 
```

哪里 STATUS 是一个枚举？

```
public enum STATUS{
    ACTIVE,PASSIVE,DISABLED
} 
```

我的问题是有一种方法可以将查询参数状态自动转换为球衣中的枚举类型 STATUS 列表，还是我必须为此编写自己的提供程序？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-18T06:43:11.987

在[Javadoc](https://docs.oracle.com/javaee/7/api/javax/ws/rs/QueryParam.html)中，带`@QueryParam`注释的类型必须：

1.  成为原始类型
2.  有一个接受单个`String`参数的构造函数
3.  有一个名为`valueOf`或`fromString`接受单个`String`参数的静态方法（例如，参见`Integer.valueOf(String)`）
4.  是`List<T>`,`Set<T>`或`SortedSet<T>`,`T`满足上述 2 或 3 的情况。生成的集合是只读的。

对于您的情况，我将通过将枚举包装在一个简单的类中来选择第二个选项：

```
public class StatusList {
  private List<STATUS> statusList;

  public StatusList(String toParse) {
    //code to split the parameter into a list of statuses 
  }

  public List<STATUS> getStatusList() {
    return this.statusList;
  }
} 
```

然后将您的方法更改为：

```
@GET
public Resource resource(@QueryParam("status") StatusList statusList){
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-25T08:39:30.807

将此方法添加到您的枚举中：

```
public static YourEnum fromString(final String s) {
    return YourEnum.valueOf(s);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-25T22:19:22.877

试试这个：

```
http://www.localhost.com/service/resource?status=ACTIVE&status=PASSIVE 
```

```
@QueryParam("status") List<STATUS> statusList 
```

# python - 如何在 XBMC 列表中设置默认视图类型？

> ID：11530658
> 
> 赞同：0
> 
> 时间：2012-07-17T20:49:30.183
> 
> 标签：python, xbmc

我目前正在为 XBMC 使用 python 编程，我发现最终用户可以通过使用左箭头并切换不同的可用选项来更改列表的视图类型。有没有一种方法可以在源代码中指定默认的列表视图类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T18:03:55.717

您可以使用以下代码切换视图类型：

```
import xbmc
xbmc.executebuiltin('Container.SetViewMode(%d)' % view_mode_id) 
```

其中 view_mode_id 需要是所需视图类型的整数 ID。对于大多数皮肤中的缩略图视图，您需要使用 500。

您应该在添加 ListItems 之后和调用 endOfDirectory() 之前执行此命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:33:55.333

我假设您谈论的是 GUI 中显示的列表，用户可以在其中选择各种列表项。通过在 UI xml 定义的特定部分定义默认值来设置默认值。

一个例子：

```
 <setting label="31100"
             id="ui_monitor"
             type="labelenum"
             lvalues="31110|31120"
             default="31110" /> 
```

在这种情况下，列表包含两个条目，31110 和 31120，而 31110 是该特定列表的默认值和预选值。

# java - 使用 Java 字典...使用哈希表？

> ID：11530661
> 
> 赞同：7
> 
> 时间：2012-07-17T20:49:45.597
> 
> 标签：java, swing, jslider

我有点惊讶没有人问过这个具体案例，因为它在 java 标准库中是一种奇怪的不一致：

我正在使用带有自定义标签的swing JSlider；唯一可用于分配标签的库调用是：`setLabelTable(Dictionary labels)`

但是 Dictionary 是一个抽象类，它在标准库中唯一已知的子类是 Hashtable，api 和各种 IDE 抱怨它是“过时的”。

显而易见的事情就是使用哈希表，但我想知道两件事：

1.  有没有更好的方法来解决这个问题？
2.  如果 Hashtable 是这个（在我看来）相当重要的库调用的唯一可用类，那么它在什么基础上“过时”？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:54:21.923

它已过时，因为它已被 java.util.HashMap 取代。主要区别在于 HashTable 上的方法是同步的，而 HashMap 允许使用空指针作为键。

现代版本的 java 在无争议的同步操作的性能方面取得了长足的进步，因此不再像过去那样担心性能问题。（如果您在主要平台上运行最新的 JDK。）如果 API 需要 HashTable，请继续使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:53:05.260

Hashtable 过时的原因是[它已被 Hashmap 取代](https://stackoverflow.com/questions/40471/differences-between-hashmap-and-hashtable)。

但是，为了给 setLabelTable 分配标签，Hashtable 的“缺陷”不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:04:50.020

`Dictionary`被“替换”`Map`为. A很慢，因为它是同步的，所以标准选择也是如此。 我不确定你为什么担心你使用“遗留”数据结构，因为如果你*必须*使用 a你必须使用. 也许您应该想知道要使用哪些小部件？只是一个想法...`HashTable``HashMap`
`HashTable``HashMap`
*`JSlider``HashMap`*

# asp.net - 使用 Linq 加入对象的列表及其 ID

> ID：11530669
> 
> 赞同：0
> 
> 时间：2012-07-17T20:50:25.357
> 
> 标签：asp.net, vb.net, linq

抱歉，我对 linq 有点陌生，但我认为这就是我需要帮助的...

我有一个对象列表 - 任务的员工 - 它具有专业领域作为员工对象中的整数列表。我需要能够仅针对具有某些专业领域的人员筛选员工列表。但是，我还希望能够根据员工匹配的专业领域的数量对员工进行排名。

我的想法是创建一个包含 (EmployeeID, Tag) 的列表，其中每个员工标签都有一个条目，然后将其加入我的搜索列表，然后按员工 ID 聚合，计数标签，然后按计数降序排序。

但是，我不知道如何创建该列表。如何获取（EmployeeID，Tag）列表？

我基本上有：

员工

*   EmployeeID 为整数
*   AreasOfExpertise 作为列表（整数）

我想要一份员工 ID 和 AreaOfExpertiseID 列表，每个员工的专业领域都有一个条目。

有人知道我会怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:04:28.040

这是你正在寻找的东西吗？这将创建一个具有 2 个属性的匿名类型，但这很容易成为您想要的任何类型。

```
 var employees = new List<int>() { 1,2,3,4,5};
        var skills = new List<KeyValuePair<int, string>>() 
        { 
            new KeyValuePair<int, String>(1, "test"), 
            new KeyValuePair<int, string>(3, "test3"), 
            new KeyValuePair<int, string>(3, "test4") 
        };

        var list = 
        (
            from employee in employees 
            join skill in skills 
                on employee equals skill.Key 
            select new { employee, skill.Value }
        ).ToList(); 
```

编辑：没有更多关于你的代码当前是什么的信息，我只是猜测了一些类型，它们将显示如何访问属性和进行连接。如果您更新，我很高兴根据您的需求使其更具体。

[这](http://www.dotnetperls.com/join)是另一个可能对您有帮助的连接语法的好例子

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:16:33.730

这是你想要的？

```
var emplist = new List<Employee>
            {
                new Employee { EmployeeId = 1, AreaOfExpertieseId = new List<int>() { 1, 2, 3, 4 } },
                new Employee { EmployeeId = 2, AreaOfExpertieseId = new List<int>() { 1, 2 } },
                new Employee { EmployeeId = 3, AreaOfExpertieseId = new List<int>() },
                new Employee { EmployeeId = 4, AreaOfExpertieseId = new List<int>() { 1,4 } },
            };
        var expertiseId = new[] {2,3}; //ExpertiseIds you want to search;
        var emps = emplist.Where(e => e.AreaOfExpertieseId.Exists(id => expertiseId.Contains(id)))
            .Select(e => new {e.EmployeeId, Rank = e.AreaOfExpertieseId.Count }).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:44:32.337

我最终做了一些与这里的答案相关的事情，但略有不同。对不起，这是我的错，我对此有点陌生，没有提供有用的信息。我有这个：

```
Class Employee
    Public EmployeeID as Integer
    Public Skills as list(of Integer)
End Class

'Should turn a list of EmployeeID, MatchingSkillCount
Function FindEmployeesWithMatchingSkills(Employees as List(of Employee), SearchSkills as List(of Integer)) as IEnumerable(of KeyValuePair(of Integer, Integer))

End Function 
```

但是，我想不通。在一些帮助下，我想出了这个，这似乎有效：

```
Function FindEmployeesWithMatchingSkills(Employees as List(of Employee), SearchSkills as List(of Integer)) as IEnumerable(of KeyValuePair(of Integer, Integer))
    Return (From e in Employees Select New KeyValuePair(Of Integer, Integer)(e.EmployeeID, e.Skills.Where(Function(s) SearchSkills.Contains(s)).Count)).OrderByDescending(Function(kvp) kvp.Value).Where(Function(kvp) kvp.Value > 0)
End Function 
```

谢谢你们每一个人的帮助！

# asp.net - DropDownList 只能在 IE 中访问

> ID：11530672
> 
> 赞同：-4
> 
> 时间：2012-07-17T20:50:37.093
> 
> 标签：asp.net, drop-down-menu

[此页面](http://bullynet.com/selectastud.aspx?id=61388)适用于 IE。但是，在 Chrome 和 Firefox 中，无法访问顶部的下拉菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:56:47.740

我浏览过使用开发人员工具栏。

id="menuWrapper" 的 div。它的高度等于 85px 并覆盖下拉列表。删除此样式并进行适当的更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:15:22.627

`#topWrapper`div 元素的 a为`z-index`10，宽度为`990px`; 这使得它与下拉列表重叠，无法单击它。

你需要想出一个更好的方法来布置你的屏幕。

# c++ - 将所有数组复制到没有向量的新数组 C++

> ID：11530678
> 
> 赞同：2
> 
> 时间：2012-07-17T20:51:08.347
> 
> 标签：c++, avr, avr-gcc

```
int led_p1[8] = {0x01, 0x02, 0x04, 0x08, 
                 0x10, 0x20, 0x40, 0x80};
int led_p2[8] = {0x81, 0x42, 0x24, 0x18,
                 0x18, 0x24, 0x42, 0x81};
int led_p3[8] = {0xFF, 0x00, 0xFF, 0x00,
                 0xFF, 0x00, 0xFF, 0x00};

int led_pattern[8] = {};
int pattern_idx = 0;

// select pattern for now
switch(pattern_idx)
{
    case 0: 
        led_pattern = led_p1;
        pattern_idx++;
        break;
    case 1: 
        led_pattern = led_p2;
        pattern_idx++;
        break;
    case 2: 
        led_pattern = led_p3;
        pattern_idx = 0;
        break;
} 
```

我尝试执行上述操作，我将循环 idx，将一个新序列复制到 led_pa​​ttern 中，然后循环那个，回来，得到下一个。

我在这里找到了一种使用向量传递整个数组的方法； [C++：复制数组](https://stackoverflow.com/questions/3598859/c-copy-array)

但是向量（我相信）不适用于我正在使用的编译器（avr-gcc/c++）

如何在 C++ 中实现这一点？我知道在python中下面会起作用，我可以将一个数组分配给另一个变量，然后它“克隆”它。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:00:28.980

你真的需要复制进去`led_pattern`吗？你要改内容吗？如果它本质上是 const，为什么不声明`led_pattern`为指向 int 的指针？这会更有效率，因为您只需指向三个现有数组之一，而不是复制它们。

如果没有，请使用`memcpy`从您的三个数组之一复制到`led_pattern`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T20:53:42.760

替换不符合您要求的这一行：

```
led_pattern = led_p1; 
```

使用其中任何一种，按优先顺序降序排列。

```
std::copy(led_p1, led_p1 + 8, led_pattern);

memcpy(led_pattern, led_p1, sizeof led_p1);

for(int i = 0; i < 8; i++) led_pattern[i] = led_p1[i]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T21:01:19.880

如果我正确阅读了 OP，您不需要深拷贝，而是想要切换 LED 使用的阵列。因此，您将创建一个可以在数组之间切换的指针，如下所示：

```
int led_p1[8] = {0x01, 0x02, 0x04, 0x08, 
                 0x10, 0x20, 0x40, 0x80};
int led_p2[8] = {0x81, 0x42, 0x24, 0x18,
                 0x18, 0x24, 0x42, 0x81};
int led_p3[8] = {0xFF, 0x00, 0xFF, 0x00,
                 0xFF, 0x00, 0xFF, 0x00};

int *led_pattern = led_p1; //Starting point
int pattern_idx = 0;

// select pattern for now
switch(pattern_idx)
{
    case 0: 
        led_pattern = led_p1;
        pattern_idx++;
        break;
    case 1: 
        led_pattern = led_p2;
        pattern_idx++;
        break;
    case 2: 
        led_pattern = led_p3;
        pattern_idx = 0;
        break;
} 
```

所以现在您可以切换`led_pattern`到指向`led_p*`您当前使用的任何数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T20:57:58.600

通常的方法是使用 std::copy()。std::copy 接受两个迭代器，表示要复制的序列的开始和结束，以及第三个参数，作为目标：

```
std::copy( &led_p1[ 0 ], &led_p1[ sizeof(led_p1) / sizeof(led_p1[ 0 ]) ], &led_pattern[ 0 ]) 
```

表达式 sizeof(led_p1) / sizeof(led_p1[ 0 ]) 的计算结果为 8，即数组中的元素数。您可以使用具有 3 个阵列的阵列并迭代这 3 个阵列，而不是使用带有 LED 图案的 3 个不同的阵列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T20:54:28.397

要进行深层复制，您必须将第一个数组中的每个值都复制到新数组中。不只是将旧指针分配给新指针，而是对数组中的元素数量执行 for 循环并将每个元素分配给新副本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-17T20:58:26.063

要在内存级别制作硬拷贝，您可能需要使用旧的 C 函数：`memcpy`

```
memcpy (led_pattern,led_p1, 8 * sizeof(int)); 
```

`8`如果不同，则应替换为数组大小。

功能说明：www.cplusplus.com/reference/clibrary/cstring/memcpy/

`#include <string.h>`也应该使用。（按Prætorian所说的编辑）

# javascript - 使用 [jsdom + qs] 抓取 html

> ID：11530681
> 
> 赞同：0
> 
> 时间：2012-07-17T20:51:40.550
> 
> 标签：javascript, node.js, web-scraping, jsdom

我是使用 jsdom 和 querystring 的新手。`track_id`我正在尝试为所有iframe html 标签中的所有soundcloud 抓取一个页面。下面的代码记录`undefined`了因为第一个 iframe 不是 soundcloud 播放器。

我如何能...

1.  修改代码以检索所有 iframe 实例
2.  使用 jsdom/qs检查是否存在`http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F`或仅存在。`soundcloud`（我可以使用 if 字符串包含字符串类型的 js 测试，但我认为使用 jsdom/qs 有更好的方法）。

    ```
    jsdom.env({
     html: 'A_URL',
     scripts: [
       'http://code.jquery.com/jquery-1.5.min.js'
     ],
     done: function(errors, window) {
      var $ = window.$;
      var src = $('iframe').attr('src');
      var aRes = qs.parse(decodeURIComponent(url.parse(src).query)).url.split('/');
      var track_id = aRes[aRes.length-1];

     console.log("track_id =", track_id);
     }
    }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:58:36.837

```
$('iframe').each(function(index, element) {
  if (element.attr['src'].match(/soundcloud/)) {
    // do your stuff
    return false; // if there's only one relevant iframe
  }
} 
```

# ssh - 是否可以撤消 sftp/ssh 上已删除的文件？

> ID：11530688
> 
> 赞同：7
> 
> 时间：2012-07-17T20:52:30.363
> 
> 标签：ssh, sftp

是否可以撤消 sftp/ssh 上已删除的文件？请说是这样！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:11:26.530

`rm`通过 SFTP/SSH 删除文件与在 *NIX 机器或`SHIFT+DELETE`Windows 上运行没有什么不同。没有用于 SFTP/SSH 的回收站之类的东西（据我所知）。如果您*删除*了已删除的文件，那么无论出于何种目的和目的，它都会消失 - 恢复文件很可能需要特殊的文件恢复软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:10:57.170

不幸的是，没有用于命令行删除的垃圾箱。但在某些情况下，您可以尝试从 cgsecurity.org 运行恢复软件，例如 PhotoRec，但这仅适用于“已知”文件类型......（PhotoRec 识别这些文件：[http](http://www.cgsecurity.org/wiki/File_Formats_Recovered_By_PhotoRec) ://www.cgsecurity.org/wiki/File_Formats_Recovered_By_PhotoRec ）

# sql-server-2008 - 命名实例的 ODBC DSN

> ID：11530691
> 
> 赞同：0
> 
> 时间：2012-07-17T20:53:05.743
> 
> 标签：sql-server-2008, odbc

根据我之前的问题，我正在尝试从 C++ 应用程序连接到 SQL Server 2008 R2：[C++ ODBC SQL Server 2008 Connection](https://stackoverflow.com/questions/11530080/c-odbc-sql-server-2008-connection)

我在 C++ 中的 DSN 是

```
SQLDriverConnectW(dbc, NULL, L"DRIVER={SQL Server};SERVER=(local)\DB1;DATABASE=master;UID=sa;PWD=password;", SQL_NTS, NULL, 0, NULL, SQL_DRIVER_COMPLETE); 
```

所以我的DSN实际上是

```
DRIVER={SQL Server};SERVER=(local)\DB1;DATABASE=master;UID=sa;PWD=password; 
```

这只是行不通。我可以连接到没有使用命名实例的服务器，但是在我的家用机器上，我需要连接到单独的实例。

使用它连接到我本地计算机上的 SQL Sever 2008 R2 命名实例的正确 DSN 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:37:14.773

命名管道的 ODBC DSN 需要像这样

```
DRIVER={SQL Server};SERVER=np:(local)\DB1;DATABASE=master;UID=sa;PWD=password; 
```

加上`np:`具体的，这是一个命名管道而不是一个`tcp:`连接。

# android - 无法追踪的根错误android eclipse - 文件上没有显示错误

> ID：11530692
> 
> 赞同：0
> 
> 时间：2012-07-17T20:53:06.773
> 
> 标签：android, eclipse, trace

eclipse中的一个android项目在根级别有错误，但无法跟踪...它只显示错误图标，但代码中没有错误。我有其他项目在同一版本的 Eclipse 中运行没有错误。只是不知道如何跟踪这个项目的错误。任何 src、xml、布局（等）文件上都没有显示错误。我该如何解决？运行 Eclipse Juno 和 Android SDK 20。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:48:02.243

选择*窗口 -> 显示视图 -> 问题*以查看错误消息（并将其添加到问题中）。

显示感叹号图标的错误是*Build path errors*。它们与您的代码无关，而是与您的项目设置有关。打开该项目的上下文菜单，选择*Build Path -> Configure Build Path...*打开一个对话框，显示所有相关设置（源和输出目录、引用的项目、引用的库等）。对话框中的这些选项之一也应该显示一个错误图标。

还有一个侧面标记​​：如果您使用像[EmPubLite](https://github.com/commonsguy/cw-omnibus/tree/27b8bd939313bf702664faadb43953c610c145ca/EmPubLite)这样的公开项目，请在问题中指出，因为这些信息可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:06:19.763

右键单击
`Project >> Properties >> Java Compiler >> Enable project Specific Settings >> compiler compliance level >> Change to 1.5 or 1.6 or 1.7`

如果仍然出现该错误，如果您使用外部库，则可能会出现问题（如果jar 文件在本地磁盘中 ，`Right Click on the Project >> Properties >> Java Build Path >> Libraries >> Add Jars`则如果您的 jar 文件在工作区中。请发布 Logcat 错误以轻松解决您的问题。`>> use external jars`

# java - 当 findViewById(R.id) 时，Android ScrollView 导致应用程序崩溃

> ID：11530697
> 
> 赞同：0
> 
> 时间：2012-07-17T20:53:22.110
> 
> 标签：java, android, crash, scrollview

我无法在 main.xml 中设置 Horizo​​ntal ScrollView 的位置，因为我无法使用下面的代码定位它。在定位 TextViews 或 Buttons 时，这种方法一直对我有用，所以我不确定为什么 ScrollView 应该被区别对待。

`ScrollView scrollview1 = (ScrollView)findViewById(R.id.scrollview1);`

到目前为止，我一直无法找到一个可以在我的代码中成功实现以将我的栏滚动到需要的位置的类似操作的工作示例。

这是应用程序崩溃期间我的错误日志显示的内容

`dalvikvm threadid=1: thread exiting with uncaught exception (group=0x409c01f8)`

`AndroidRuntime FATAL EXCEPTION: main`

`AndroidRuntime java.land.ClassCastException: android.widget.HorizontalScrollView cannot be cast to android.widget.ScrollView`

`AndroidRuntime at com.testButtons.TestButtonsActivity.onKeyDown(TestButtonsActivity.java)`

这是保存有问题的代码的代码块。

我正在使用 android 返回键退出菜单并返回到 main.xml，水平滚动视图 1 从左侧设置 40dp。

```
 public boolean onKeyDown(int keyCode, KeyEvent event)  {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
            if(pageNum < 4){

                setContentView(R.layout.main);

                ScrollView scrollview1 = (ScrollView)findViewById(R.id.scrollview1);
                //scrollview1.scrollTo(40,0);

            }else if(pageNum >= 4 && pageNum < 20){

                setContentView(R.layout.main2);
                pageNum=0;
            }

            return true;
        }

        return super.onKeyDown(keyCode, event);
    } 
```

我对 android 应用程序开发和这种形式也很陌生；因为这是我第一个关于我的第一个应用商店值得应用的帖子。

感谢您花时间阅读我的问题，并且我知道其他 android noobies 可能会遇到相同/类似的问题并发现这很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:00:07.180

您将其转换为 ScrollView，而实际上它是 Horizo​​ntalScrollView。ScollView 不是 Horizo​​ntalScrollView 的父类，因此会引发您的错误。改变

```
ScrollView scrollview1 = (ScrollView)findViewById(R.id.scrollview1); 
```

到

```
HorizontalScrollView scrollview1 = (HorizontalScrollView)findViewById(R.id.scrollview1); 
```

# qt - 在 TextEdit 中显示不可打印的字符

> ID：11530699
> 
> 赞同：3
> 
> 时间：2012-07-17T20:53:24.370
> 
> 标签：qt, qml

有没有办法重新定义 QML TextEdit 组件中某些字符的打印方式？
基本上我想要的只是用一些“箭头”图像替换所有选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:00:55.870

不，那是不可能的。但是您可以用“箭头”字符替换文本中的所有选项卡以显示。

```
TextEdit {
   text: sourceText.replace("\t", "\u21E5") // ⇥
} 
```

哈克，但可能仍然是最好的选择。

# linux - 这个 Cron 的时间表是什么？

> ID：11530703
> 
> 赞同：0
> 
> 时间：2012-07-17T20:53:40.377
> 
> 标签：linux, cron

我有一个具有以下表达式的 cron 工作：

```
*/30 */2 * * * 
```

这会每半小时和每 2 小时运行一次，还是每 2.5 小时运行一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:59:03.873

对于每个偶数小时，它将在一周中的每一天：00 和 :30 运行。

例如，0:00、0:30、2:00、2:30...12:00、12:30、14:00、14:30...22:00、22:30

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:58:43.303

两者都不。

来自`crontab(5)`：

```
Commands are executed by cron(8) when the minute, hour, and month of year fields match
the current time, and when at least one of the two day fields (day of month, or day of
week) match the current time 
```

因此，您的条目将在分钟为 0 或 30 且小时为偶数时运行 - 在 0:00、0:30、2:00、2:30...。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:56:28.253

一小时 - 没有跑步

下一小时 - 每 30 分钟运行一次

# c - BIO_free_all () 中的错误

> ID：11530705
> 
> 赞同：1
> 
> 时间：2012-07-17T20:53:47.833
> 
> 标签：c, memory-management, error-handling

我正在使用一个用于 base 64 编码的函数，但在 BIO_free_all() 中得到了一个 SIGABRT。

功能 ：

```
char *base64(const unsigned char *input, int length)
{
   BIO *bmem, *b64;
   BUF_MEM *bptr;
   char *buff;
   b64 = BIO_new(BIO_f_base64());
   bmem = BIO_new(BIO_s_mem());
   b64 = BIO_push(b64, bmem);
   BIO_write(b64, input, length);
   BIO_flush(b64);
   BIO_get_mem_ptr(b64, &bptr);
   buff = (char *)malloc(bptr->length);
   memcpy(buff, bptr->data, bptr->length-1);
   buff[bptr->length-1] = 0;

   BIO_free_all(b64);

   return buff;
   }; 
```

主循环中的函数调用：

```
unsigned char hash [20];
SHA1(key,strlen(key),hash);
h_part2= base64(hash, sizeof(hash)); 
```

在 gdb 中回溯时显示错误：

```
 0  0xb7fdd424 in __kernel_vsyscall ()
  1  0xb7ca11ef in raise () from /lib/i386-linux-gnu/libc.so.6
  2  0xb7ca4835 in abort () from /lib/i386-linux-gnu/libc.so.6
  3  0xb7cdc2fa in ?? () from /lib/i386-linux-gnu/libc.so.6
  4  0xb7ce6e42 in ?? () from /lib/i386-linux-gnu/libc.so.6
  5  0xb7e518da in CRYPTO_free () from /lib/i386-linux-gnu/libcrypto.so.1.0.0
  6  0xb7ec1a0f in BUF_MEM_free () from /lib/i386-linux-gnu/libcrypto.so.1.0.0
  7  0xb7ec370c in ?? () from /lib/i386-linux-gnu/libcrypto.so.1.0.0
  8  0xb7ec22b8 in BIO_free () from /lib/i386-linux-gnu/libcrypto.so.1.0.0
  9  0xb7ec2e44 in BIO_free_all () from /lib/i386-linux-gnu/libcrypto.so.1.0.0
  10 0x08058024 in base64 (input=0xbffff0f8 "\312", <incomplete sequence \375\265>, length=20)
at socket.c:121 
```

# reporting-services - SSRS RDL 文件 - 我可以嵌入一个不会被设计器删除的字符串吗

> ID：11530707
> 
> 赞同：2
> 
> 时间：2012-07-17T20:53:50.053
> 
> 标签：reporting-services, rdl

我需要在报告 rdl 文件中放置一个隐藏的校验和（加密字符串），但我尝试的所有内容都会被设计器删除。

我想知道是否有办法阻止设计人员这样做，比如 XML 注释或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:23:38.067

在报告上创建一个隐藏的文本框并将值表达式设置为校验和怎么样？

# delphi - 从列表框中选择一个代理 (IDHTTP)

> ID：11530716
> 
> 赞同：1
> 
> 时间：2012-07-17T20:54:28.080
> 
> 标签：delphi, proxy, listbox, idhttp

我正在准备申请。IDHTTP：使用 Get 方法。但也有一些问题。我想创建一个代理列表并单击添加了 IDHTTP 的列表框项（代理地址）。对不起，我不懂英语。

我的代码；

```
procedure TForm1.CheckBox1Click(Sender: TObject);
begin
if CheckBox1.Checked then
begin
LabeledEdit1.Enabled:= true;
LabeledEdit2.Enabled:= true;
IdHTTP1.ProxyParams.ProxyServer:=LabeledEdit1.Text;
IdHTTP1.ProxyParams.ProxyPort:=StrToInt(LabeledEdit2.Text);

CheckBox1.Caption:='Kendi IP adresimi kullan.';

 end
 else
begin

LabeledEdit1.Enabled:= false;
LabeledEdit2.Enabled:= false;
IdHTTP1.ProxyParams.ProxyServer:='';
IdHTTP1.ProxyParams.ProxyPort:=StrToInt('0');

CheckBox1.Caption:='Proxy kullan.';

end;
end;

procedure TForm1.BitBtn2Click(Sender: TObject);
begin
IdHTTP1.Get(Edit1.Text);
MessageDlg('Mission complated.', mtinformation,[mbOK],0);
end; 
```

我想;

我添加 Listbox1 代理..稍后..单击 Listbox1 项。后来.. BitBtn2 点击。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:10:29.927

```
Listbox1.Items.Add('1.1.x.2.1:80');
Listbox1.Items.Add('1.2.x.x.5:60');
... 
```

.

```
procedure TForm1.Listbox1Click(Sender: TObject); 
var
  I: Integer;
  S: String;
begin 
  I := Listbox1.ItemIndex;
  if I <> -1 then
  begin 
    S := Listbox1.Items[I];
    IdHTTP1.ProxyParams.ProxyServer := Fetch(S, ':'); 
    IdHTTP1.ProxyParams.ProxyPort := StrToInt(S); 
  end 
  else 
  begin 
    IdHTTP1.ProxyParams.ProxyServer := ''; 
    IdHTTP1.ProxyParams.ProxyPort := 0; 
  end; 
end; 
```

.

```
procedure TForm1.BitBtn2Click(Sender: TObject);        
begin        
  IdHTTP1.Get(Edit1.Text);        
  MessageDlg('Mission complated.', mtinformation,[mbOK],0);        
end; 
```

# c# - 在不调整时区的情况下转换 DateTime

> ID：11530718
> 
> 赞同：1
> 
> 时间：2012-07-17T20:54:41.177
> 
> 标签：c#, .net

我正在使用 jQuery FullCalendar 控件并使用 JSON 字符串中的日历事件填充隐藏字段。

为此，我必须转换日期/时间。
我在下面找到的示例函数以可用的格式传递它们。
但是，它正在根据客户端时区调整事件。

如何修改下面的函数以转换 SQL 日期时间而不调整客户端时区？

我尝试按照另一篇文章的建议删除 ToUniversalTime() ，但它会浪费时间。

```
private long ConvertToTimestamp(DateTime value)
{
   long epoch = (value.ToUniversalTime().Ticks - 621355968000000000) / 10000000;
   return epoch;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:36:14.817

尝试以下将日期格式化为较长数据时间的方法，这应该可以避免与客户和不同文化设置的混淆。

```
.ToString("yyyy-MM-dd HH:mm:ss:fff") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:09:33.543

我会尝试`STRING newstring = String.Format("{0:yyyy-MM-dd HH:mm:ss}", yourdatevar);`，并确保格式是 SQL 日期时间所需的格式（我相信就是这样）。

# php - Yii控制器方法SQL查询

> ID：11530720
> 
> 赞同：2
> 
> 时间：2012-07-17T20:54:49.487
> 
> 标签：php, jquery, mysql, yii

我正在尝试从表单执行 AJAX 调用，并在我的模型中编写控制器方法以将结果传递回表单。我不熟悉 Yii SQL 语句或在 Yii 上下文中检索/传递数据。任何人都可以指导/纠正我试图写这个的逻辑。

这是原始的mysql查询

```
"SELECT AVG(rate_syr_mh)FROM packaging_metrics WHERE country LIKE '" . mysql_real_escape_string($country)."'". "AND std_rate != 0 
```

" 到目前为止，这是我的控制器操作。我不确定我是否在正确的轨道上。参数 $country 应该是从特定更改的表单提交的表单输入。

```
 public function countryRate($country)
{

$country_std_rate = Yii::app()->db->createCommand() 
    ->select('AVG(std_rate)') 
    ->from('packaging_metrics') 
    ->where(array('like', 'country', '%$country%'))
    ->queryRow();

    return $country_std_rate;

} 
```

如何添加原始查询的部分以避免零条目？

以这种方式返回查询是否还允许 AJAX 检索以接收要放入另一个表单字段的数字结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:57:02.007

> 如何添加原始查询的部分以避免零条目？

**回答**

查看应该如何为[CDbCommand's`where()`](http://www.yiiframework.com/doc/api/1.1/CDbCommand#where%28%29-detail "http://www.yiiframework.com/doc/api/1.1/CDbCommand#where()-detail")指定查询，具有最低[mysql 优先级](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html "http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html")的运算符（但当然根据您的 sql）应该在列表中首先指定：

> 数组（运算符，操作数 1，操作数 2，...），

换句话说，where 条件的求值是**预先**发生的，因此您可以在一种**前缀表示法**中指定运算符。

例如，如果您有：

```
Where (somecolumn like %somevalue%) AND (somecolumn!=somevalue) 
```

你把它写成：

```
AND (somecolumn!=somevalue) (like (somecolumn %somevalue%)) 
```

所以这转化为：

```
->where(array('and','std_rate!=0', array('like', 'country', '%'.$country.'%'))) 
```

这实际上可以通过查看 CDBCommand 的源代码，特别是[`processConditions`function](https://github.com/yiisoft/yii/blob/master/framework/db/CDbCommand.php#L1409 "https://github.com/yiisoft/yii/blob/master/framework/db/CDbCommand.php#L1409")来更好地理解。

* * *

> 以这种方式返回查询是否还允许 AJAX 检索以接收要放入另一个表单字段的数字结果？

**回答：**没有。

要返回 ajax 数据，您应该回显您的输出。此外，您可以使用[`CJSON::encode()`](http://www.yiiframework.com/doc/api/1.1/CJSON#encode-detail "http://www.yiiframework.com/doc/api/1.1/CJSON#encode-detail")json 编码您的返回值：

```
echo CJSON::encode($country_std_rate); // instead of return $country_std_rate
Yii::app->end(); // this is also useful in most situations, almost forgot to add! 
```

* * *

**笔记：**

1.  `'%$country%'`不会工作，但`'%'.$country.'%'`会。

2.  preorder 和 prefix notation 是我对评估的理解，不确定 yii 团队是否打算这样做！

# oracle - 将 ORACLE TIMESTAMP(9) 字段映射到 java.util.Date

> ID：11530722
> 
> 赞同：1
> 
> 时间：2012-07-17T20:55:06.733
> 
> 标签：oracle, hibernate, jdbc

在 Java 版本中将 ORACLE TIMESTAMP(9) 字段映射到 java.sql.Timestamp 或 java.util.Date 时出现问题：- ojdbc 11.2.0.1.0 hibernate-annotations 3.3.1.GA ejb3-persistence 1.0.1.GA

试图映射

```
UPDATE_TIMESTAMP_9 TIMESTAMP(9) NULL
TO
@Column(name = "UPDATE_TIMESTAMP_9")
private Date updateTimestamp_9; 
```

获取异常

```
org.hibernate.HibernateException: Wrong column type in EMPLOYEE.EMPLOYEE for column UPDATE_TIMESTAMP_9\. Found: timestamp, expected: date 
```

在进一步调查中，我发现代码在 Table.java 的以下行返回“false”

```
final boolean typesMatch = col.getSqlType( dialect, mapping ).toLowerCase()
                  .startsWith( columnInfo.getTypeName().toLowerCase() )
                  || columnInfo.getTypeCode() == col.getSqlTypeCode( mapping ); 
```

1.  日期或时间戳字段的 col.getSqlType( dialect, mapping ) 是日期。columnInfo.getTypeName() 是时间戳，因此 if 查询的第一部分将不匹配

2.  col.getSqlTypeCode(mapping) 返回 93（这是 Types.TIMESTAMP 的代码）。但是，columnInfo.getTypeCode() 返回 1111。所以即使查询的第二部分也不匹配。

问题是，在为字段 UPDATE_TIMESTAMP_9 填充 ColumnMetadata rs.getInt("DATA_TYPE") 时会返回一个 1111，它是 Types.OTHER 的代码。请注意，如果我使用 oracle columnInfo.getTypeCode() 中的 TIMESTAMP(6) 字段正确返回 93 并且代码成功插入记录。问题仅在于 TIMESTAMP(9)。

交叉张贴[在](https://forum.hibernate.org/viewtopic.php?f=25&t=1017159)休眠论坛上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:31:48.867

尝试使用@Temporal 注释。这可能解释了hibernate该怎么做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:18:37.270

我禁用了模式验证，它工作正常。

> 禁用架构验证？——史蒂夫·埃伯索尔

# c++ - C ++，如果文件在读取时移动会发生什么？

> ID：11530723
> 
> 赞同：3
> 
> 时间：2012-07-17T20:55:13.793
> 
> 标签：c++, thread-safety, race-condition, file-access

如果 C++ 正在读取一个文件（比如一个 20,000 行的 csv 文件）并且在读取的中途，另一个进程删除了该文件（假设它是一个 ifstream），它的行为如何。

我是否遇到了段错误，或者我存储行的向量是否只有 10,000 行并且没有错误表明出现问题？

同样，如果我正在通过 ofstream 写入并且它被删除中断，会发生什么？在这种情况下，如果中断进行到一半，我的输出文件是否只包含最后 10,000 行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:59:13.263

这取决于操作系统。

如果您使用的是 Unix-y 操作系统，您将继续读取/写入数据，因为删除只是对包含目录和/或 inode 的更新，因此您不会影响文件的数据。

但是，如果文件数据所在的磁盘块可以在您读取时被较新的文件重新使用（再次取决于操作系统），那么一旦您完成缓冲区中的数据，您基本上会读取错误的文件数据。

如果您在 Windows 上，正如 Seth Carnegie 在评论中正确指出的那样，如果打开文件以供阅读，文件会自动被锁定（因此无法删除）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T20:58:37.880

我猜它高度依赖系统。因为 Linux 可能会继续工作，而 Windows 让您有些头疼。

# javascript - Javascript如何将多个文本框复制到一个文本框中

> ID：11530724
> 
> 赞同：0
> 
> 时间：2012-07-17T20:55:16.717
> 
> 标签：javascript, jquery, textbox

我有三个单独的文本框，并且想要一个按钮，可以将框中的所有内容复制到第 4 个框中。我怎么能用javascript做到这一点？

```
<form>
<textarea cols="60" rows="5" id="box1">PAST: </textarea>
<br /><br />
<textarea cols="60" rows="5" id="box2">PRESENT: </textarea>
<br /><br />
<textarea cols="60" rows="5" id="box3">FUTURE: </textarea>

<br /><br />
<input name="" type="button" />
<br /><br />
<textarea cols="60" rows="5" id="box4">All Past Present Future</textarea>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:58:30.987

您只需提取 textarea 值 - 并将它们的串联作为此“聚合”textarea 的值。使用 jQuery 很容易做到，就像这样：

```
$('#button_id').click(function() {
  $('#box4').val(
    $('#box1').val() + $('#box2').val() + $('#box3').val()
  );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:59:40.110

尝试这个：

```
$('button').click(function(){
    var text = "";
    $('textarea:not(:eq(3))').each(function(){
       text += this.value
    })
    $('textarea:eq(3)').val(text)    
}) 
```

[演示](http://jsfiddle.net/q9wKU/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:01:01.110

jsFiddle：http: [//jsfiddle.net/wCPbY/3/](http://jsfiddle.net/wCPbY/3/)

```
// Runs on document ready
$(document).ready(function()
{
    // Grabs each text in the textareas based on the id, added spaces in between.
    var text = $("#box1").text() + " " + $("#box2").text() + " " + $("#box3").text();

    // Appends the text to box4.
    $("#box4").text( text );
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T21:36:11.753

您不需要像 jQuery 那样加载整个 JavaScript 库。试试这个简单的 JavaScript（为可扩展性而构建！）

```
var textboxes = document.getElementsByTagName('textarea'),
    box4 = document.getElementById('box4'),
    i;

for (i = 0; i < textboxes.length - 1; i++) {
    box4.value += textboxes[i].value;
} 
```

这是你的[jsFiddle](http://jsfiddle.net/gwGBu/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T21:01:15.640

使用 jQuery，您可以创建一个选择器来捕获所有必需的元素。您可能希望更改您的 HTML 以提供匹配类属性的元素，以便选择器能够将它们组合在一起。

```
<textarea cols="60" rows="5" class="textGroup" id="box1">PAST: </textarea>
<textarea cols="60" rows="5" class="textGroup" id="box2">PRESENT: </textarea>
<textarea cols="60" rows="5" class="textGroup" id="box3">FUTURE: </textarea>
<textarea cols="60" rows="5" id="box4">All Past Present Future</textarea> 
```

获取所有文本区域的选择器将是 - `$(".textGroup")`。
现在我们要做的就是遍历所有这些，收集它们的内容并将其附加到主`All Past Present Future`文本区域。

```
var wholeString = '';
$(".textGroup").each(function(index,elem){
  wholeString += $(elem).text();
});

$("#box4").text(wholeSrting); 
```

# mfmailcomposer - Apple 的 MailComposer 不发送电子邮件

> ID：11530727
> 
> 赞同：0
> 
> 时间：2012-07-17T20:55:20.970
> 
> 标签：mfmailcomposer

我运行了 Apple 的 MailComposer 代码，没有做任何更改。我以收件人的身份输入了我的电子邮件，但没有收到电子邮件。为什么这不起作用？有没有其他人经历过这个？

这是代码的链接：

[https://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008865](https://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008865)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:29:59.637

你在 Iphone Simulator 上运行过吗？那里的应用程序只是模拟发送。

# android - 如何让用户使用分数而不是双倍的百分比？

> ID：11530732
> 
> 赞同：0
> 
> 时间：2012-07-17T20:55:52.390
> 
> 标签：android, double, fractions

我正在创建一个使用百分比的应用程序。用户创建多个项目以使它们加起来达到 100%。例如：如果您有 3 个项目，每个项目占 33.3%，这意味着您缺少 0.1%。分数更清晰，因为它们是确切的数字。我想知道是否可以让用户选择输入双精度或分数。任何人都可以帮助我解决这个问题吗？我看过 inputTypes 和类似的东西，但我在分数上找不到任何东西。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:38:51.380

正如@Bartek 正确指出的那样，Android 没有本机工具来操作分数。这是有道理的，因为要表示一个分数，你需要一个新的“对象”来存储 2 个值：分子和分母。操作这些对象将变得越来越困难，因为每次添加都需要寻找最小的公分母。而且我们不能真正解决分数。我们如何准确地表示三的平方根？然后是下一个问题，我们如何计算三的平方根和十八又四分之三的立方根的和？

所以我建议在计算中到处使用双精度数，但在屏幕上打印时将它们四舍五入到逗号后的第二个数字。即当用户键入 100/3 时，保留`33.3333333`在内存中，但在屏幕上打印 33.33。如果将其中三个相加，则得到 99.9999999，当四舍五入到第二位时将显示 100.00。我确实意识到这种方法可能会引入某些错误，但对于实际的现实应用程序，这个错误可能可以忽略不计。

# css - 清除在父 div 中表现奇怪的浮动 div

> ID：11530733
> 
> 赞同：0
> 
> 时间：2012-07-17T20:55:59.977
> 
> 标签：css, css-float

*   父 div = 红色虚线边框
*   child-3 el = 绿色实心边框

[代码在这里](http://jsfiddle.net/Chris22/se3yE/4/)

父 div ( `#main-container`) 包含一个标题、两个浮动 div 和底部的文本链接。底部的文本链接应该是独立的，但它似乎影响了两个浮动 div ( `.child-1`, `.child-2`) 而不是父 div。有人可以向我解释为什么`.child-3`这个布局中的最后一个子元素 () 会影响其两个浮动兄弟 div 的内容吗？缺少什么以及为什么需要它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:01:13.837

在没有真正研究问题并知道您想要什么的情况下，放置`clear:both`似乎`.child-3`可行。

**为什么？** [http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

# c# - 2D 碰撞检测系统在斜向拐角移动时没有反应

> ID：11530735
> 
> 赞同：1
> 
> 时间：2012-07-17T20:56:03.393
> 
> 标签：c#, xna, collision-detection

因此，我的碰撞检测系统设置为检查角色的每个像素，标记碰撞检测，将违规角色模型的像素放入碰撞检测 X 和碰撞检测 Y。它使用这些数据来确定有效的可移动区域在哪里，并将单元推回其中。解决这个问题的唯一方法是同时运行 X 和 Y 的碰撞类，还是我可以修改这个类以同时正确地完成这两项工作？谢谢你的时间，我一直在发疯，试图找出我做错了什么。我为草率的代码道歉。我把它清理了一下（真的是一团糟），但我意识到它不值得最终产品。

```
class Collision
{        
    public Color[,] DataMiner(Texture2D background)
    {
        Color[,] collision2D;
        Color[] collision1D;
        collision1D = new Color[background.Width * background.Height];
        background.GetData(collision1D);
        collision2D = new Color[background.Width, background.Height];
        for (int x = 0; x < background.Width; x++)
            for (int y = 0; y < background.Height; y++)
                collision2D[x, y] = collision1D[x + y * background.Width];
        return collision2D;
    }
    public void CollisionChecker(Color[,] background, ref Vector2 position)
    {
        Rectangle character;
        character.Width = 32;
        character.Height = 32;
        character.X = Convert.ToInt16(position.X);
        character.Y = Convert.ToInt16(position.Y);
        int n = 0;
        int n2 = 0;
        bool collisionDetected = false;
        int collisionDetectedX = 0;
        int collisionDetectedY = 0;
        while (n2 < character.Width)
        {
            n = 0;
            while (n < character.Height)
            {
                if (background[character.X + n2, character.Y + n] == Color.Black)
                {
                    collisionDetected = true;
                    collisionDetectedX = n2;
                    collisionDetectedY = n;
                }
                n++;
            }
            n2++;
        }
        if (collisionDetected == true)
        {
            collisionDetectedX += Convert.ToInt16(position.X);
            collisionDetectedY += Convert.ToInt16(position.Y);
            if (background[collisionDetectedX, collisionDetectedY + 2] == Color.Red)
                position.Y += 1;
            else if (background[collisionDetectedX, collisionDetectedY - 2] == Color.Red)
                position.Y -= 1;
            else if (background[collisionDetectedX + 2, collisionDetectedY] == Color.Red)
                position.X += 1;
            else if (background[collisionDetectedX - 2, collisionDetectedY] == Color.Red)
                position.X -= 1;
            else if (background[collisionDetectedX - 2, collisionDetectedY - 2] == Color.Red)
            {
                position.X -= 1;
                position.Y -= 1;
            }
            else if (background[collisionDetectedX - 2, collisionDetectedY + 2] == Color.Red)
            {
                position.X -= 1;
                position.Y += 1;
            }
            else if (background[collisionDetectedX + 2, collisionDetectedY - 2] == Color.Red)
            {
                position.X += 1;
                position.Y -= 1;
            }
            else if (background[collisionDetectedX + 2, collisionDetectedY + 2] == Color.Red)
            {
                position.X += 1;
                position.Y += 1;
            }
            collisionDetected = false;
        }

    }
    public void Update(Texture2D background, ref Vector2 position)
    {
        CollisionChecker(DataMiner(background), ref position);
    }

} 
```

嗯，我还没有 10 个代表，所以我无法回答我自己的问题，但我想通了：

我稍微改变了 if 语句的条件。我不得不删除 else，因为当它找到需要更改的 if 时，它只会删除其余的嵌套 if。由于它是一次完成所有这些，因此在解决此问题后，如果靠近角落，它在靠着平坦的墙壁时会向右或向左“滑动”。我添加了条件来检查碰撞检测是否仍然为真，并使每次更改都将其恢复为假。

祝你有美好的一天，希望有人能从我的错误中吸取教训！

```
 if (collisionDetected == true)
        {
            collisionDetectedX += Convert.ToInt16(position.X);
            collisionDetectedY += Convert.ToInt16(position.Y);
            if (background[collisionDetectedX, collisionDetectedY + 2] == Color.Red && collisionDetected)
            {
                position.Y += 1;
                collisionDetected = false;
            }
            if (background[collisionDetectedX, collisionDetectedY - 2] == Color.Red && collisionDetected)
            {
                position.Y -= 1;
                collisionDetected = false;
            }
            if (background[collisionDetectedX + 2, collisionDetectedY] == Color.Red && collisionDetected)
            {
                position.X += 1;
                collisionDetected = false;
            }
            if (background[collisionDetectedX - 2, collisionDetectedY] == Color.Red && collisionDetected)
            {
                position.X -= 1;
                collisionDetected = false;
            } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:53:30.727

用原文回答了我的问题。

# objective-c - CCNode：帮助解释复合 iVar 分配中的目标 C

> ID：11530738
> 
> 赞同：1
> 
> 时间：2012-07-17T20:56:19.180
> 
> 标签：objective-c, cocos2d-iphone

在 CCNode（cocos 版本 1.0.1）中，我在各种设置器中看到以下行。

```
isTransformDirty_ = isInverseDirty_ = YES; 
```

我的 IDE 抱怨我们“在条件中使用 '='”这一事实。我将这两个 iVar 都设置为 YES。我的解释是否正确（因此我忠实的 IDE 表现得像个戏剧女王）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:02:59.797

是的，您的解释是正确的，这是`YES`对两个变量的赋值。您可以尝试用括号将其静音（这可能有效也可能无效）

```
isTransformDirty_ = (isInverseDirty_ = YES); 
```

或添加一个`#pragma`忽略该问题（这高度依赖于编译器/IDE）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:04:00.740

为什么不只是： `isTransformDirty_ = YES;` 和`isInverseDirty_ = YES;`？

# email - Ant 任务无法在另一台计算机上发送电子邮件它是成功的

> ID：11530742
> 
> 赞同：1
> 
> 时间：2012-07-17T20:56:35.907
> 
> 标签：email, ant

我已经在我的机器上完成了这个 ant 任务（发送电子邮件）：

```
<project name="send_mail_test" default="send_mail_test">
<property name="report" value="${report}" />
<property name="build" value="${build}" />
<property name="env" value="${env}" />
<property name="resultFile" value="${resultFile}" />

<target name="send_mail_test">
    <mail encoding="mime" mailhost="mailserver.intranet.lan" subject="[REPORT] ${build} on ${env} environment - Test report" tolist="test@intranet.lan">
<!-- FROM and REPLY TO email addresses -->
      <from address="mailman@intranet.lan"/>
      <replyto address="noreply@intranet.lan"/>

      <message>Some body message

      </message>

      <attachments>
        <fileset dir="${report}" includes="${resultFile}.html"/>
      </attachments>
    </mail>
</target>
</project> 
```

这就是我开始运行上述脚本的方式（send_mail.xml）：

```
ant -f send_mail.xml -Dreport=C:\TESTING\results -Denv=DEV -Dbuild=1.0.1 -DresultFile=result-2012-07-17-11-03-25.html 
```

它在我的电脑（windows 7）上是成功的，但在另一个 windows xp 上却不是。这是我得到的错误：

```
Buildfile: C:\TESTING\setup\send_mail.xml

send_mail_test:
     [mail] Sending email: [REPORT] C:\TESTING\results on DEV environment - Test report
     [mail] Failed to send email: Could not connect to SMTP host: mailserver.intranet.lan, port: 25

BUILD FAILED
C:\TESTING\setup\send_mail.xml:8: Problem while sending mime mail:

Total time: 0 seconds 
```

我意识到我无法连接到邮件服务器，但我该怎么办？无法连接的可能原因是什么？

解决方案：我在这个盒子上安装了 linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:11:46.633

*   检查网络连接
*   检查其他服务的可达性
*   检查防火墙设置（尤其是运行 ant 的 java 可执行文件）
*   检查问题是否是暂时的
*   检查是否仍然可以从另一台机器执行此操作，可能是邮件服务器已关闭
*   与负责网络的人交谈 - 如果不是你

# ruby-on-rails - Rails：仅在数据存在时使用正则表达式

> ID：11530746
> 
> 赞同：1
> 
> 时间：2012-07-17T20:56:59.830
> 
> 标签：ruby-on-rails, regex, validation

现在，我有一个正则表达式来验证用户的 facebook 链接，例如：

```
facebook_regex = /(http:\/\/)?(https:\/\/)?(www.)?facebook.com\/[a-zA-Z0-9\.]*/i
validates :facebook, :format => { :with => facebook_regex } 
```

正则表达式本身工作得很好，但是如果用户不想发布他们的链接，我会尝试将 FB 链接包含在内。但是，如果 Facebook 字段留空，我的验证会引发错误。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:01:53.933

尝试添加`allow_blank: true`到验证：

```
validates :facebook, :format => { :with => facebook_regex }, :allow_blank => true 
```

您还可以添加一个除非：

```
validates :facebook, :format => { :with => facebook_regex }, :unless => :blank? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:02:17.223

`allow_blank`是您正在寻找的选项：

`validates :facebook, format: { with: facebook_regex , allow_blank: true}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:02:24.553

实际上，我在这里找到了答案：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

事实证明，您可以传递一个名为 :allow_blank 的选项，这正是我所希望的！

# c# - 如何检测 WinForms 中第 3 方控件的点击事件？

> ID：11530747
> 
> 赞同：0
> 
> 时间：2012-07-17T20:57:00.347
> 
> 标签：c#, winforms, events, click

我在 WinForms UserControl 中放置了一个第 3 方视频控件。我想处理视频控件上的点击事件。问题是第 3 方控件不公开 Click 事件。最初，我打算在 3rd 方控件的顶部放置一个透明标签，并改为处理其 Click 事件。它有效，但问题是 WinForm 标签在放置在视频顶部时不支持透明度。

任何解决方法的想法？

以下是 3rd 方视频控件公开的事件列表：

```
MouseCaptureChanged
Enter
Leave
Validated
Validating
PreviewKeyDown 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:12:32.193

你需要使用钩子，

这是一个很好的起点

[http://support.microsoft.com/kb/318804](http://support.microsoft.com/kb/318804)

# javascript - D3 气泡示例：bubble.nodes() 有什么作用？

> ID：11530748
> 
> 赞同：7
> 
> 时间：2012-07-17T20:57:02.037
> 
> 标签：javascript, json, svg, d3.js, circle-pack

示例： http: [//mbostock.github.com/d3/ex/bubble.html](http://mbostock.github.com/d3/ex/bubble.html)

![在此处输入图像描述](../Images/5e885675f4a92aaa8e2c7b5a9e2a7fa5.png)

我很难理解第 16 行发生了什么：

```
.data(bubble.nodes(classes(json)) 
```

以及为什么或在 classes() 函数中，变量 classes[] 获取为其每个对象定义的 x,y,r 值。另外，bubble.nodes() 似乎不是一个实际的功能？

如果我添加一个

```
console.log(classes) 
```

在第 44 行和第 45 行之间 - 里面的每个对象似乎都已经填充了 x,y,r - 但不清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-10T17:43:37.020

调用`bubble.nodes()`归结为调用[`d3.layout.pack().nodes()`](https://github.com/mbostock/d3/wiki/Pack-Layout#nodes)since `bubble=d3.layout.pack()`。诀窍是`pack.nodes()`硬编码以使用`value`输入的键`children`（在本例中为所有包）来调整节点的大小（add `r`）并确定位置（add`x`和`y`）。

在本质上，

```
 var root = {"children": [
              {"packageName":"cluster","className":"AgglomerativeCluster","value":3938},
              {"packageName":"cluster","className":"CommunityStructure","value":3812},
              {"packageName":"cluster","className":"HierarchicalCluster","value":6714},
              {"packageName":"cluster","className":"MergeEdge","value":743}
         ]}; // This is an excerpt of the real data.

 var bubble = d3.layout.pack(); 

 // pack.nodes() assigns each element of "children" a r, x, and y based on value
 bubble.nodes(root); 
```

起初这也让我感到困惑，您可以看到它`classes()`没有添加`r`, `x`，并且`y`因为`classes(root)`没有这些属性。krasnaya 的回答触及了大部分内容，但我觉得它需要更多解释（至少对我来说是这样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:04:26.540

classes() 函数不添加属性.. 它只是展平树。属性被添加到bubble.nodes() 中（即d3.layout.pack().nodes()）

```
JSON.stringify(classes[0])
"{"packageName":"cluster","className":"AgglomerativeCluster","value":3938}" 
```

# qt - QWidget onMinimize() onMaximize() 信号

> ID：11530753
> 
> 赞同：4
> 
> 时间：2012-07-17T20:57:38.770
> 
> 标签：qt, window, qwidget, windowstate, qevent

我试图找到一个信号来知道 qwidget 何时可见或不可见，我的意思是，当 QWidget 位于桌面顶部或隐藏在某个窗口下时。

我还想知道 QWidget 窗口何时最小化以及何时恢复（未最小化）。我尝试了下一个代码，但是当我最小化我的窗口时，窗口关闭并且不在应用程序栏中。

```
void KGLWidget::changeEvent(QEvent *event) {
        if (event->type() == QEvent::WindowStateChange) {
            if (isMinimized() || !isVisible()) {
                emit onHide();
                event->ignore();
                qDebug() << "NO SE VE";
                return;
            }
            if(isVisible()) {
                emit onShow();
                event->ignore();
                qDebug() << "SI SE VE";
                return;
            }

        }

    QWidget::changeEvent(event);
    } 
```

我也尝试了 event->accept()，也没有 event->ignore() 并且没有返回；但 qwidget 窗口总是关闭。

非常感谢您，我非常感谢您的时间和帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:43:26.567

你说窗口关闭意味着程序退出吗？您显示的代码不会导致程序退出。也许你做了一些事情使程序退出连接到信号 onHide() 和 onShow() 的槽中。

如果你只是想在小部件显示和隐藏时做一些事情，你可以尝试重新实现这两个事件处理程序

```
void QWidget::showEvent ( QShowEvent * event )   [virtual protected]
void QWidget::hideEvent ( QHideEvent * event )   [virtual protected] 
```

# gcc - Boost.Spirit 的内部编译器错误

> ID：11530754
> 
> 赞同：1
> 
> 时间：2012-07-17T20:57:45.623
> 
> 标签：gcc, boost-spirit, boost-spirit-qi, gcc3, boost-spirit-lex

我正在尝试使用 GCC 3.4.6 和 Boost 1.43 编译以下看似简单的代码，它会产生内部编译器错误：

```
#include <string>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/spirit/include/qi.hpp>

namespace lex    = boost::spirit::lex;
namespace qi     = boost::spirit::qi;

typedef lex::lexertl::token<std::string::iterator> TokenT;
typedef lex::lexertl::actor_lexer<TokenT> LexerT;

template <typename LexerT>
struct Tokens: public lex::lexer<LexerT>
{};

int main()
{
   typedef Tokens<LexerT>::iterator_type IteratorT;
   qi::rule<IteratorT, int> expression;

   expression = (qi::int_ >> qi::int_) [ qi::_val = qi::_1 ];
} 
```

生成的错误：

```
.../boost/mpl/aux_/preprocessed/gcc/template_arity.hpp:83: internal compiler error: in lookup_member, at cp/search.c:1300 
```

最后一行`main()`是产生这个错误。通过让`expression`规则在 a`std::string::iterator`而不是`IteratorT`.

非常感谢在仍然使用词法分析器的同时修复错误的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:39:10.687

你错过了括号：

```
qi::rule<IteratorT, int()> expression; 
```

这可能会修复编译错误（尽管我无法检查，因为 gcc、clang 和 msvc 都愉快地编译了它）

* * *

您可能希望减少编译器压力：

*   增加可用内存
*   减少限制（见下文）
*   禁用调试信息 (-g0)
*   和优化（-O0；或者，优化大小 -Os）

在那个地区可能更多。

### 限制

我做了一个简单的

```
grep -EoRh '\<\w+_LIMIT\>' ~/custom/boost_1_50_0/boost/spirit/home/ -h | sort -u 
```

获取可能定义的列表，并基于它进行以下更改：

```
#ifdef LEAN
#define PHOENIX_ACTOR_LIMIT      3 // boost 1_50 default: 10
#define PHOENIX_ARG_LIMIT        5 // boost 1_50 default: 10
#define PHOENIX_CATCH_LIMIT      1 // boost 1_50 default:  9
#define PHOENIX_COMPOSITE_LIMIT  5 // boost 1_50 default: 10
#define PHOENIX_DYNAMIC_LIMIT    1 // boost 1_50 default: 10
#define PHOENIX_LIMIT            5 // boost 1_50 default: 10
#define PHOENIX_LOCAL_LIMIT      3 // boost 1_50 default: 10
#define PHOENIX_MEMBER_LIMIT     3 // boost 1_50 default:  8
#define SPIRIT_ARGUMENTS_LIMIT   5 // boost 1_50 default: 10
#define SPIRIT_ATTRIBUTES_LIMIT  5 // boost 1_50 default: 10
#endif

#include <string>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_function.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace lex    = boost::spirit::lex;
namespace qi     = boost::spirit::qi;
namespace phx    = boost::phoenix;

struct funcImpl
{
   template <typename T>
   struct result { typedef int type; };

   template <typename T>
   int operator()(T& x) const {
      return 0;
   }
};

typedef lex::lexertl::token<std::string::iterator> TokenT;
typedef lex::lexertl::actor_lexer<TokenT> LexerT;

template <typename LexerT>
struct Tokens: public lex::lexer<LexerT>
{};

int main()
{
   //typedef Tokens<LexerT>::iterator_type IteratorT;
   typedef char* IteratorT;
   qi::rule<IteratorT, int()> expression;

   phx::function<funcImpl> func = funcImpl();
   expression = (qi::int_ >> qi::int_) [ qi::_val = func(qi::_1) ];

   std::cout   << "#define PHOENIX_ACTOR_LIMIT "                       << PHOENIX_ACTOR_LIMIT                       << '\n';
   std::cout   << "#define PHOENIX_ARG_LIMIT "                         << PHOENIX_ARG_LIMIT                         << '\n';
   std::cout   << "#define PHOENIX_CATCH_LIMIT "                       << PHOENIX_CATCH_LIMIT                       << '\n';
   std::cout   << "#define PHOENIX_COMPOSITE_LIMIT "                   << PHOENIX_COMPOSITE_LIMIT                   << '\n';
   std::cout   << "#define PHOENIX_DYNAMIC_LIMIT "                     << PHOENIX_DYNAMIC_LIMIT                     << '\n';
   std::cout   << "#define PHOENIX_LIMIT "                             << PHOENIX_LIMIT                             << '\n';
   std::cout   << "#define PHOENIX_LOCAL_LIMIT "                       << PHOENIX_LOCAL_LIMIT                       << '\n';
   std::cout   << "#define PHOENIX_MEMBER_LIMIT "                      << PHOENIX_MEMBER_LIMIT                      << '\n';
   std::cout   << "#define SPIRIT_ARGUMENTS_LIMIT "                    << SPIRIT_ARGUMENTS_LIMIT                    << '\n';
   std::cout   << "#define SPIRIT_ATTRIBUTES_LIMIT "                   << SPIRIT_ATTRIBUTES_LIMIT                   << '\n';
   //std::cout << "#define BOOST_PHOENIX_LIMIT "                       << BOOST_PHOENIX_LIMIT                       << '\n';
   //std::cout << "#define BOOST_SPIRIT_CLOSURE_LIMIT "                << BOOST_SPIRIT_CLOSURE_LIMIT                << '\n';
   //std::cout << "#define BOOST_SPIRIT_GRAMMAR_STARTRULE_TYPE_LIMIT " << BOOST_SPIRIT_GRAMMAR_STARTRULE_TYPE_LIMIT << '\n';
   //std::cout << "#define BOOST_SPIRIT_RULE_SCANNERTYPE_LIMIT "       << BOOST_SPIRIT_RULE_SCANNERTYPE_LIMIT       << '\n';
   //std::cout << "#define BOOST_SPIRIT_SELECT_LIMIT "                 << BOOST_SPIRIT_SELECT_LIMIT                 << '\n';
   //std::cout << "#define BOOST_SPIRIT_SWITCH_CASE_LIMIT "            << BOOST_SPIRIT_SWITCH_CASE_LIMIT            << '\n';
   //std::cout << "#define PHOENIX_CONSTRUCT_LIMIT "                   << PHOENIX_CONSTRUCT_LIMIT                   << '\n';
   //std::cout << "#define SPIRIT_CLOSURE_LIMIT "                      << SPIRIT_CLOSURE_LIMIT                      << '\n';
} 
```

现在，发生以下大小变化（在 LoC 预处理中）：

```
sehe@mint12:/tmp$ g++ -g0 -O0 -I /home/sehe/custom/boost_1_50_0/ test.cpp -E | wc -l
193011
sehe@mint12:/tmp$ g++ -g0 -O0 -I ./boost_1_43_0/ test.cpp -DLEAN -E | wc -l
168862 
```

基本上，代码行减少了 10% 以上。它可能会有所帮助。

# c++ - 如何在 OpenFrameworks 中绘制 CvConnectedComp

> ID：11530755
> 
> 赞同：0
> 
> 时间：2012-07-17T20:57:50.330
> 
> 标签：c++, opencv, openframeworks

OpenCv 的 cvCamShift 输出一个包含轮廓属性的 CvConnectedComp 对象。我假设这是代表我跟踪对象的轮廓的轮廓。

如何在 OpenFrameworks 的屏幕上绘制此轮廓？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T13:16:45.353

我建议您使用方便且不错的附加组件[ofxCv](https://github.com/kylemcdonald/ofxCv)。这个附加组件很容易让您获得将 opencv 数据结构转换为开放框架的所有功能，反之亦然。

有各种示例展示了如何处理轮廓，通过这个附加组件，您可以使用 opencv C++ API，这是处理 OpenCV 的新标准。

如果您有任何问题，请不要害怕在评论中再次询问。

# javascript - 在配对元素上实现 Jquery 的 .each() 函数时遇到问题

> ID：11530757
> 
> 赞同：1
> 
> 时间：2012-07-17T20:57:57.290
> 
> 标签：javascript, jquery, html, each

我以为我已经正确地实现了这个 .each 函数，但是随着我的脚本变得更加复杂，我注意到了一些奇怪的结果。

我的目标是将成对的项目组合在一起，并根据它们的父类组织它们。

以下是我所拥有的简化版本

脚本：

```
$(."pair").each(function(){
    alert($("div").val());
} 
```

HTML：

```
<div class ="FirstGroup" id="A">
<div class="paired">Header Text</div>
<div class="paired">Body Text</div>
</div>
<div class ="FirstGroup" id="B">
<div class="paired">Header Text</div>
<div class="paired">Body Text</div>
</div>
<div class ="SecondGroup" id="C">
<div class="paired">Header Text</div>
<div class="paired">Body Text</div>
</div>
<div class ="SecondGroup" id="D">
<div class="paired">Header Text</div>
<div class="paired">Body Text</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:00:08.557

```
$(".paired").each(function(){
    alert($(this).html());
}) 
```

5个问题

*   `.`引号外的语法错误
*   您正在重新选择所有 div 而不是使用当前`pair`元素
*   a`div`没有`value`财产
*   错过闭幕式`)`
*   你的元素没有`paired`类`pair`

我无法从您的问题中真正看出您打算使用此代码做什么，但这些是一些起点。

如果你想选择父母，那么你会做......

```
$(".paired").parent().each(... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:59:47.130

您可能想尝试：

```
$(".paired:first-child").each(function(){
    alert($(this).parent().html());
}); 
```

## [演示](http://jsfiddle.net/jMRFt/)

# assembly - 从汇编代码到机器代码的旅程

> ID：11530759
> 
> 赞同：0
> 
> 时间：2012-07-17T20:57:59.910
> 
> 标签：assembly, compiler-construction, signals, byte, machine-code

我无法完全理解的是，我们在计算机中键入并从屏幕上读取的内容如何变成计算机可以使用和执行的内容。即使在汇编等最低级语言中，我也读到“汇编是高级语言与实际机器代码本身之间的桥梁”。但这真的是如何工作的。如果计算机只能根据高低信号进行操作，我们如何编写一个可以根据字母数字和符号进行操作的编译器。这些代码串实际上如何成为通过晶体管栅极发射的高低信号？当您键入一个键时，实际上是存储在计算机某处的寄存器中的一系列信号' s 电路？这是否也会将该字符的信号发送到屏幕上，或者当您按下一个键时，这是一个完全独立的过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:19:32.753

你实际上在那里问了很多（尽管相关的）问题..

我建议钻研组装。处理器在称为“机器代码”的东西上运行，它实际上只是数字，其中“0x1234 0x001A 0x0002”可能意味着“将 2 到寄存器 X 的内容”。大多数汇编指令直接翻译成对应的机器代码，因此您将了解处理器如何一一执行指令。在那之后，您可以更进一步阅读处理器架构（如 TheZ 建议的那样），在那里您将了解这些机器代码指令如何实际转换为不同的晶体管被​​切换和位被存储。

CPU 也有一些称为“中断”的东西，它是（非常简单地说）在其上例如键盘输出高电压的线路，并且 CPU 被触发以执行某个子程序以处理例如按键操作。从这个中断到出现在屏幕上的一封信，虽然这仍然是一段旅程。

不要只是一头雾水，因为它只会让你感到困惑，一步一步地学习。

# r - 在 R 中提取分组数据

> ID：11530761
> 
> 赞同：0
> 
> 时间：2012-07-17T20:58:25.370
> 
> 标签：r, sample-data

这可能是一个基本问题，但我想计算 65-74 岁老年人的平均债券财富，并且只针对那些有债券 (>0) 的人，并消除没有回复（由 9999 表示...）。

```
mean(Bonds[Age>64 & Age<75 & Bonds>0 & Bonds<999999999999]) 
```

我收到一条错误消息：较长的对象长度不是较短对象长度的倍数

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:14:56.733

从问题中不清楚数据是如何形成的；我假设`Bonds`是一个`data.frame`有两列`Bonds`和`Age`。然后

```
idx <- Bonds$Age>64 & Bonds$Age<75 & Bonds$Bonds>0 & Bonds$Bonds<999999999999 
```

指示哪些行满足条件和

```
mean(Bonds[idx, "Bonds"]) 
```

返回列的平均值`Bonds`。

# websphere - org.omg.CORBA.TRANSIENT：初始和转发的 IOR 不可访问

> ID：11530775
> 
> 赞同：3
> 
> 时间：2012-07-17T20:58:42.997
> 
> 标签：websphere, rmi, lotus-notes, corba, iiop

我正在使用 Lotus Notes API (NCSOW.jar) 从我的 java 类连接到远程 Domino 服务器，然后写入 Lotus Notes 数据库。但是我收到一个特定的错误，表明它可能无法连接到它。

这是导致该错误的行。URL 是 Domino 服务器名称，用户名、密码是 domino 服务器凭证。会话会话 = NotesFactory.createSession(props.getProperty("LotusNotes.URL"), props.getProperty("LotusNotes.UID"), props.getProperty("LotusNotes.PWD"));

我可以从我的本地机器上用一个独立的 java 程序连接它。但是在我们的 QA 机器上的特定 websphere 服务器（v6.1）上，出现了这个错误。我们试图检查端口、防火墙，这方面一切都很好。我们能够从该服务器机器正确连接到远程 Domino 服务器机器。

以下是错误的堆栈跟踪。

org.omg.CORBA.TRANSIENT：初始和转发 IOR 不可访问：转发 IOR 失败：ORB_CONNECT_ERROR (5) - 无法获取服务器分包：org.omg.CORBA.INTERNAL：CREATE_LISTENER_FAILED_4 vmcid：0x49421000 次要代码：56 已完成：否初始 IOR 失败：ORB_CONNECT_ERROR (5) - 无法获取服务器分包：org.omg.CORBA.INTERNAL：CREATE_LISTENER_FAILED_4 vmcid：0x49421000 次要代码：56 已完成：否 vmcid：IBM 次要代码：E07 已完成：否

```
at com.ibm.rmi.corba.ClientDelegate.createRequest(ClientDelegate.java:1177)
at com.ibm.rmi.corba.ClientDelegate.createRequest(ClientDelegate.java:1260)
at com.ibm.CORBA.iiop.ClientDelegate.createRequest(ClientDelegate.java:1349)
at com.ibm.rmi.corba.ClientDelegate.createRequest(ClientDelegate.java:1128)
at com.ibm.CORBA.iiop.ClientDelegate.createRequest(ClientDelegate.java:1315)
at com.ibm.rmi.corba.ClientDelegate.request(ClientDelegate.java:1861)
at com.ibm.CORBA.iiop.ClientDelegate.request(ClientDelegate.java:1271)
at org.omg.CORBA.portable.ObjectImpl._request(ObjectImpl.java:460)
at lotus.domino.corba._IObjectServerStub.createSession(_IObjectServerStub.java)
at lotus.domino.cso.Session.OREFtoSession(Session.java:829)
at lotus.domino.cso.Session.<init>(Session.java:72)
at lotus.domino.cso.Session.createSession(Session.java:40)
at lotus.domino.NotesFactory.createSession(NotesFactory.java:67)
at com.my.apps.useraccessreview.EmpInfoMapper.buildMap(EmpInfoMapper.java:89)
at com.my.apps.useraccessreview.EmpInfoMapper.getInstance(EmpInfoMapper.java:40)
at com.my.apps.useraccessreview.InitializeEmpInfoMapper.run(InitializeEmpInfoMapper.java:36)
at java.lang.Thread.run(Thread.java:571) 
```

有没有人对此有任何建议。

谢谢 Mrutyunjay

# database - JPA 命名查询“o”？

> ID：11530782
> 
> 赞同：1
> 
> 时间：2012-07-17T20:59:24.887
> 
> 标签：database, jpa, jpql

我只是好奇`o`当我尝试查询时代表什么。

默认情况下，我的查询是
`@NamedQuery (name="newName" query=SELECT o FROM tableView o)`

我只是好奇`o`代表什么。我见过几个使用这封信的`x`例子`c`。只是想知道有什么区别，如果有的话。另外，为什么我不能只使用 a`*`来选择整行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:01:30.137

在 JQPL 术语中称为标识变量。在 SELECT 语句中使用时，标识变量在 FROM 子句中声明。如果某些（实体的）持久属性、实体本身或从持久属性推导出的某些值是作为查询的结果设计的，则必须在 SELECT 语句中使用它。

```
SELECT a.someAttribute FROM EntityA a 
SELECT a FROM EntityA a 
SELECT SUM(a.someAttribute) FROM EntityA a 
```

不使用`a.`的相同查询不是有效的 JQPL 查询。它们确实在 Hibernate 中工作，因为 HQL 作为一种查询语言确实有很多扩展。

当查询包含多个具有相同属性名称的实体时，识别变量的需求就很明显了：

```
SELECT a.someAttribute, b.someAttribute 
FROM EntityA a, EntityB 
WHERE a.id = b.id 
```

从上面的查询中可以看出，标识变量也用于 WHERE 子句。以下来自 JPA 2.0 规范的引用也非常严格地总结了它们的其他用途和声明：

> SELECT 或 DELETE 语句的 SELECT、WHERE、ORDER BY、GROUP BY 或 HAVING 子句中使用的所有标识变量都必须在 FROM 子句中声明。UPDATE 语句的 WHERE 子句中使用的标识变量必须在 UPDATE 子句中声明。
> 
> 识别变量在这些条款中被量化。这意味着标识变量表示集合的成员或实体抽象模式类型的实例。标识变量从不完整地指定一个集合。
> 
> 标识变量的范围仅限于定义它的查询（或子查询），并且对于该查询范围内未定义同名标识变量的任何子查询也是可见的。

标识变量的命名是完全自由的，但它不应该是任何保留的标识符或实体的名称。

您不能使用“SELECT *”，因为 JPQL 没有这样的结构。在 SQL 中，不明确指定要选择的值列表也经常被认为是一种反模式。例如，当将连接添加到查询时，需要重新定义选择的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:55:21.260

它只是一个别名——你可以使用任何你喜欢的东西。在您的示例中这并不是必需的，但是对于连接多个表的更复杂的示例，它可以让您引用特定表的属性。例如：

```
SELECT A from tableA A, tableB B where B.someId=A.id; 
```

# android - 如何使用 Flex 应用程序在 android 上读取本地 pdf 文件

> ID：11530785
> 
> 赞同：0
> 
> 时间：2012-07-17T20:59:36.650
> 
> 标签：android, flash, apache-flex, pdf, flexbuilder

我有一个在 iOS 和 Android 设备上运行的 Flex 应用程序。在 iOS 设备上，可以使用 stagewebview 阅读 pdf。

在 Android 设备（带有 Android ICS 的 Galaxy Tab2 上，我有一个空白屏幕。

我已经阅读了很多关于这个问题的东西。但我不知道该错误是否仍然存在，或者我是否必须为此问题实施 ANE。

如果有人解决了这个问题，如果他能给出任何答案，我会非常王道。

提前致谢。

# iphone - 构造CGRect时抛出异常

> ID：11530788
> 
> 赞同：1
> 
> 时间：2012-07-17T20:59:44.583
> 
> 标签：iphone, cocos2d-iphone, sprite, cgrect, bounding-box

我正在制作一个游戏，其中玩家上到出口并被传送到下一个级别。当我编译项目时，我收到消息：`EXC_BAD_ACCESS (code = 2, address = 0x791)`

我使用此代码来设置出口：

```
_exit = [CCSprite spriteWithSpriteFrameName:@"exit.png"];
    CGPoint exitTileCoord = ccp(908, 980);
    CGPoint exitTilePos = [self positionForTileCoord:exitTileCoord];
    _exit.position = exitTilePos;
    [_batchNode addChild:_exit]; 
```

我检查玩家是否已经使用以下代码退出：

```
CGRect tankBoundingBox = CGRectMake(_tank.position.x - _tank.contentSize.width/2, _tank.position.y + _tank.contentSize.height, _tank.contentSize.width, _tank.contentSize.height);
CGRect exitBoundingBox = CGRectMake(_exit.position.x - _exit.contentSize.width/2, _exit.position.y + _exit.contentSize.height, _exit.contentSize.width, _exit.contentSize.height);
for (Tank *enemy in _enemyTanks) {
                if (CGRectIntersectsRect(sprite.boundingBox, enemy.boundingBox)) {

                    [childrenToRemove addObject:sprite];
                    enemy.hp--;
                    if (enemy.hp <= 0) {
                        [_enemyTanks removeObject:enemy];
                        [childrenToRemove addObject:enemy];
                    } else {
                    }
                }
            } 
```

我在设置 exitBoundingBox 的行出现错误，但不是 tankBoundingBox。有人可以告诉我我做错了什么吗？

如果有任何帮助，我正在使用[Ray Wenderlich 的教程](http://www.raywenderlich.com/6888/how-to-make-a-multi-directional-scrolling-shooter-part-2)来执行此操作，并且我完全按照他在他的网站上的方式复制了代码（尽管我在 BoundingBoxes 中添加了代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:45:35.050

您的代码中的问题是您正在使用某些对象的位置构建 CGRect 。好吧，实际上问题是您获得位置的那些对象之一被释放了。您应该使用 NSZombie 来检测哪一个并修复问题。 [这是](https://stackoverflow.com/a/5387006/624091)一个说明如何做到这一点的参考。

编辑：我怀疑坦克对象是问题，但我必须看到更多的代码。EDIT2:`ccp`定义为`CGRectMake`. 所以没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:39:47.990

根据对 OP 的评论：

不确定 ccp 是如何工作的，但看起来您用来构造 cgrect 的值之一是脏的。

# date - 无论区域设置如何，都将日期强制为美国格式

> ID：11530790
> 
> 赞同：2
> 
> 时间：2012-07-17T20:59:50.740
> 
> 标签：date, vb6, localization, formatting, cultureinfo

我有一个带有这一行的 VB6 程序：

```
strDate = Format(Date, "ddmmmyyyy") 
```

根据英语（美国）Windows 的文化设置，我需要它始终以这种格式出现：

`17Jul2012`

不幸的是，当文化设置为其他东西时，例如法语，我得到了这个：

`17juil2012`

有什么方法可以使日期格式始终使用英美格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:39:23.803

与其纠结于尝试强制执行特定于文化的格式，不如将月份名称硬编码为一个简单的函数，如下所示：

```
Private Function GetEnglishDate(ByVal d As Date) As String
    Dim monthNames
    monthNames = Array("", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
    GetEnglishDate = Day(d) & monthNames(Month(d)) & Year(d)
End Function 
```

用法：

```
strDate = GetEnglishDate(myDate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:13:13.513

使用内置的 Windows 日期格式化功能：

```
Option Explicit

Private Type SYSTEMTIME
    wYear           As Integer
    wMonth          As Integer
    wDayOfWeek      As Integer
    wDay            As Integer
    wHour           As Integer
    wMinute         As Integer
    wSecond         As Integer
    wMilliseconds   As Integer
End Type

Private Declare Function GetDateFormat Lib "Kernel32" Alias "GetDateFormatW" ( _
    ByVal Locale As Long, _
    ByVal dwFlags As Long, _
    ByRef lpDate As SYSTEMTIME, _
    ByVal lpFormat As Long, _
    ByVal lpDateStr As Long, _
    ByVal cchDate As Long _
) As Long

Private Declare Function VariantTimeToSystemTime Lib "OleAut32.dll" ( _
    ByVal vtime As Date, _
    ByRef lpSystemTime As SYSTEMTIME _
) As Long

Private Sub Command_Click()

    ' Use French Canadian date - should display "mer., juil. 18 12" for today!
    Label.Caption = FormatDateWithLocale("ddd',' MMM dd yy", Now, 3084)

    ' Use United States date - should display "Wed, July 18 12" for today!
    Labe2.Caption = FormatDateWithLocale("ddd',' MMM dd yy", Now, 1033)

End Sub

Private Function FormatDateWithLocale(ByRef the_sFormat As String, ByVal the_datDate As Date, ByVal the_nLocale As Long) As String

    Dim uSystemTime                 As SYSTEMTIME
    Dim nBufferSize                 As Long

    ' Convert to standard Windows time format.
    If VariantTimeToSystemTime(the_datDate, uSystemTime) = 1 Then

        ' Run "GetDateFormat" just to get the size of the output buffer.
        nBufferSize = GetDateFormat(the_nLocale, 0&, uSystemTime, StrPtr(the_sFormat), 0&, 0&)

        If nBufferSize > 0 Then

            ' The buffer size includes the terminating null char, but all VB strings always include this, therefore allocate a buffer with one less character.
            ' Then rerun the GetDateFormat.
            FormatDateWithLocale = Space$(nBufferSize - 1)
            GetDateFormat the_nLocale, 0&, uSystemTime, StrPtr(the_sFormat), StrPtr(FormatDateWithLocale), nBufferSize

        End If

    End If

End Function 
```

只需使用不同的语言环境编号（请参阅[http://www.dotnetindex.com/articles/990-List-of-Locale-ID--LCID--Values-as-Assigned-by-Microsoft.asp](http://www.dotnetindex.com/articles/990-List-of-Locale-ID--LCID--Values-as-Assigned-by-Microsoft.asp)）

日期格式与 VB 稍有不同（M 是月份）：

[http://msdn.microsoft.com/en-us/library/dd317787.aspx](http://msdn.microsoft.com/en-us/library/dd317787.aspx)

# python - emacs中多行python语句的错误缩进

> ID：11530792
> 
> 赞同：0
> 
> 时间：2012-07-17T21:00:05.320
> 
> 标签：python, emacs, tabs, indentation, multiline

使用 Tab，我只能以如下样式缩进代码：

```
for ave, sd, dG, seq_pair in zip(open(predictedAve), open(predictedSD),
open(dG), open(dynLis)): 
```

而不是这个：

```
for ave, sd, dG, seq_pair in zip(open(predictedAve), open(predictedSD),
                                 open(dG), open(dynLis)): 
```

前一种风格很丑。更糟糕的是，它会使`for`循环内的语句缩进变得不可能。如何在 emacs 中通过 Tabs 实现后一种缩进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:43:43.877

你可以检查你是否`python-mode`启用了？

# asp.net - 如何限制asp.net中每个IP的搜索次数

> ID：11530794
> 
> 赞同：-2
> 
> 时间：2012-07-17T21:00:05.900
> 
> 标签：asp.net

我想限制在我的 asp.net 网站上可以进行的搜索次数。此外，当超过最大数量时，必须有办法重置此计数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:05:47.790

这个问题有 1001 种方法。一种方法是使用至少包含 2 个字段的数据库表来跟踪查询：日期和 ip（我会将实际查询添加为第三个字段，并可能添加用户的（登录）用户 ID做查询）。然后，您可以在执行搜索查询之前轻松获取每个 IP 甚至可能是用户（确保创建正确的索引！）的计数（每天/每周/每月/每年/whatnot），然后通知用户他们已经完成了配额。作为奖励，您可以获得搜索历史记录（按日期和 IP，甚至可能是用户），您可以使用它来进一步分析（搜索最多的关键字、最活跃的用户/IP 等）。

您还可以诉诸其他方法，例如将 IP 的 + 计数器保存在内存中（例如 a `Dictionary<ip, int>`），甚至可能存储在 memcached 之类的东西中或仅存储在应用程序范围内等。这些方法不计其数，需要适合您的要求（您根本没有指定）。

重置计数可以像将计数器设置为 0（当然通过用户界面）一样简单，例如`MyQueryDictionary[userip] = 0`，也可以像“提高数据库表中特定 IP 的阈值”以及介于两者之间的所有内容一样“复杂”。

# java - 在java中创建文本文件并以unix格式保存

> ID：11530796
> 
> 赞同：6
> 
> 时间：2012-07-17T21:00:10.003
> 
> 标签：java, unix

我需要编写 java 代码才能在 Unix 环境中进行文件操作。由于我需要处理文件，如何在 Java 中创建和保存 Unix 格式的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:20:14.010

“Unix 格式”只是一个文本文件，它表示[行结尾](https://en.wikipedia.org/wiki/Newline)用`\n`而不是`\n\r`(Windows) 或`\r`(Mac before OSX)。

这是基本思想；写下每一行，后跟一个显式的`\n`（而不是[`.newLine()`](https://docs.oracle.com/javase/8/docs/api/java/io/BufferedWriter.html#newLine--)依赖于平台的）：

```
public static void writeText(String[] text){
  Path file = Paths.get("/tmp/filename");
  try (BufferedWriter bw = Files.newBufferedWriter(file, StandardCharsets.UTF_8)) {
    for(String s : text){
      bw.write(s);
      bw.write("\n");
    }
  } catch (IOException e) {
    System.err.println("Failed to write to "+file);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:02:50.703

Oracle 对此有很好的文档：

[http://docs.oracle.com/javase/tutorial/essential/io/file.html](http://docs.oracle.com/javase/tutorial/essential/io/file.html)

# python - Python查找列表中最大值的索引

> ID：11530799
> 
> 赞同：18
> 
> 时间：2012-07-17T21:00:23.800
> 
> 标签：python, list, indexing, max

```
def main():
    a = [2,1,5,234,3,44,7,6,4,5,9,11,12,14,13]
    max = 0
    for number in a:
        if number > max:
            max = number
    print max

if __name__ == '__main__':
    main() 
```

我能够获得数组中的最大值（当然**不使用 max()** ......）。如何获得该值的索引（位置）？请尽量保持简单，不要使用新的 Python 关键字或内置函数。谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-17T21:15:49.850

在我的代码中，我会使用这个：

```
>>> max(enumerate(a),key=lambda x: x[1])[0]
3 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-17T21:02:59.813

一个简单的一行：

```
max( (v, i) for i, v in enumerate(a) )[1] 
```

这避免`.index()`了之后的列表。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-17T21:01:51.390

更新：

```
max_idx = -1
max_val = a[0]
for i in xrange(1, len(a)):
    if a[i] > max_val:
        max_val = a[i]
        max_idx = i 
```

这不会影响内置函数`max()`，并且还会为仅包含负值的列表提供正确答案。

* * *

*以前的解决方案*

```
a.index(max(a)) 
```

会成功的。

内置函数`max(a)`会在你的列表中找到最大值`a`，列表函数 `index(v)`会在你的列表中找到值的索引`v`。通过组合它们，您将获得所需的内容，在本例中为索引值`3`。

请注意，`.index()`它将找到列表中*第一个*匹配项的索引，因此如果您有多个相同的“最大值”值，则返回的索引将是第一个的索引。

了解更多信息：

*   [最大限度（）](http://docs.python.org/library/functions.html#max)
*   [指数（）](http://docs.python.org/tutorial/datastructures.html)

本着“简单胜于复杂”的精神。（Python之禅）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-17T21:04:01.157

如果您不允许使用内置的 index() 函数，只需使用索引进行迭代，而不是使用 foreach 循环。

```
for i in range(len(a)):
    if a[i] > max:
        max = a[i]
        maxIndex = i 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-01T14:05:22.083

使用 numpy.array 对象的 argmax 方法。

```
import numpy as np
np.array(a).argmax() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-17T21:04:33.873

您还可以`enumerate`在遍历列表时使用 to 为您提供索引：

```
>>> a = [2, 1, 5, 234, 3, 44, 7, 6, 4, 5, 9, 11, 12, 14, 13]
>>> maxIndex, maxNumber = 0, 0
>>> for index, number in enumerate(a):
        if number > maxNumber:
            maxIndex = index
            maxNumber = number

>>> maxIndex, maxNumber
(3, 234) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T21:03:04.123

使用 index(x) 函数。请参阅此处的文档[http://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)

```
def main():
    a = [2,1,5,234,3,44,7,6,4,5,9,11,12,14,13]
    max = 0
    for number in a:
        if number > max:
            max = number
    max_index = a.index(max)
    print max 
```

但是，这不如其他建议的答案（例如使用枚举）快。不过很简单。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-05-16T13:59:15.827

这更简单

```
x.index(max(x)) #where x is your list 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-04-01T04:33:00.067

如果你喜欢强大的代码，你会喜欢这个 :) 如果你只有整数，你可以用 int 代替 float。

> 最大值=最大值（地图（浮点数，[2,1,5,234,3,44,7,6,4,5,9,11,12,14,13]））

如果您在文本文件中有输入，请执行以下操作：

文件.txt

2 1 5 234 3 44 7 6 4 5 9 11 12 14 13

> 最大值= max(map(float,(open('file.txt', 'r').readline()).split()))

# r - 从 RProfile.site 文件安装包

> ID：11530800
> 
> 赞同：3
> 
> 时间：2012-07-17T21:00:23.797
> 
> 标签：r, rprofile

我之前问过这个问题，但仍然无法让它工作。我正在尝试在启动 R 时安装自定义包。我们现在编写的许多代码可供用户编辑。为了尝试保护代码，我正在打包生产级代码并让用户在启动期间将其安装在他们的机器上。

但是，当我尝试在 RProfile.site 文件中安装包时，程序进入一个循环，并且不断地反复启动 R。我注意到包的锁定文件与 R 中库文件夹中的包一起创建。

这是我添加到站点文件的代码：

```
if(length(grep("customPackage", installed.packages()[,1]))==0) { 
        install.packages("customPackage", repos=NULL, type="source") 
} 
```

当我在启动 R 之后尝试运行此代码（不更改站点文件）时，它会完美地安装包并继续前进。但是，当我尝试通过 RProfile 文件执行此操作时，就会产生问题。

上次我尝试解决这个问题（[https://stackoverflow.com/questions/10610067/installing-packages-upon-starting-r-session](https://stackoverflow.com/questions/10610067/...)）时，我认为贾斯汀建议使用 if 语句检查包可以解决问题。但这似乎只解决了我从 CRAN 安装的包的问题，​​而不是自定义包。

对此事的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:23:17.503

我不明白你为什么要这样做。只要让他们指向`.libPaths`同一个地方。即，而不是`install.packages(...)`，只需在 Rprofile.site 中添加一行，上面写着

```
.libPaths('/path/to/common/libraries')
require("commonPackage") 
```

您可能可以做的另一件事是`system`拨打电话。我对在 Windows 下安装软件包知之甚少，但在 Unix-alike 上，`install.packages`你可以做这样的事情，而不是使用：

```
system("R --vanilla CMD INSTALL customPackage") 
```

除其他外，该`--vanilla`标志会导致 R 在不使用 Rprofile.site 文件的情况下启动（您的问题是 Rprofile.site 文件在 R 启动时正在被读取，但 Rprofile.site 文件告诉 R 安装需要启动的包R，它依次读取您的 Rprofile.site 文件...等）。据推测，`R --no-site-file INSTALL customPackage`也将起作用。

**编辑**

在咨询[了这个 SO answer](https://stackoverflow.com/a/2971434/967840)之后，看起来你可以在 Windows 上做这样的事情（假设你已经安装了[Rtools](http://cran.us.r-project.org/bin/windows/Rtools/)），虽然我没有测试过。

```
system("Rcmd --vanilla INSTALL customPackage") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-05T16:14:47.503

正如 GSee 所说，问题在于`install.packages`运行`R CMD INSTALL`，它启动了一个新的 R 进程，该进程读取 Rprofile.site 文件，从而导致循环。打破邪恶循环的两种方法：

1.  检查 R 是否以交互方式运行：

    ```
    if (interactive() && 
        length(grep("customPackage", installed.packages()[,1]))==0) { 
      install.packages("customPackage", repos=NULL, type="source") 
    } 
    ```

    `interactive()`运行时为 FALSE `R CMD`，因此这会中断循环。

2.  将`R_PROFILE`环境变量设置为空值或无效值，因此 R 会话`R CMD`不会运行您的会话。[R 会话开始时的初始化](https://stat.ethz.ch/R-manual/R-devel/library/base/html/Startup.html)说：

    > 如果您希望 '~/.Renviron' 或 '~/.Rprofile' 被子 R 进程（例如由 R CMD check 和 R CMD build 运行的那些）忽略，请将适当的环境变量 R_ENVIRON_USER 或 R_PROFILE_USER 设置为（如果可能，它不在 Windows 上）“”或不存在的文件的名称。

    为 Rprofile.site 调整它，您可以`R_PROFILE`在调用之前将其设置为空文件或不存在的文件`install.packages`。例如：

    ```
    if (length(grep("customPackage", installed.packages()[,1]))==0) { 
      Sys.setenv(R_PROFILE = "/dev/null")
      install.packages("customPackage", repos=NULL, type="source") 
      Sys.unsetenv("R_PROFILE")
    } 
    ```

    然后，当 R 重新启动以安装软件包时，它会读取一个空的 Rprofile.site 文件，因此您再次打破循环。

    如果调用`install.packages`是在.Rprofile中，你可以`R_PROFILE_USER`用同样的方式设置。

第一种方法更简单，并且不需要您担心可能会覆盖`R_PROFILE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T18:28:18.090

您可以使用以下功能安装软件包而无需重新加载`.Rprofile`：

```
surround <- function(x, with) {
  paste0(with, x, with)
}

peq <- function(x, y) paste(x, y, sep = " = ")

install.packages.vanilla <- function(pkgs, ...){

  arguments <- as.list(match.call())[-1]

  if(!"repos" %in% names(arguments)){
    arguments$repos <- getOption("repos")
  }
  names_args <- names(arguments)

  installArgs <- purrr::map_chr(seq_along(arguments),
                                function(i){
                                  value <- arguments[[i]]
                                  peq(names_args[i], ifelse(length(value)<2, deparse(value), as.character(list(value))))
                                })
  installArgs <- stringr::str_replace_all(installArgs, "\"", "'")
  installCmd <- paste0("utils::install.packages(",
                       paste(installArgs, collapse = ", "),
                       ")")
  fullCmd <- paste(
    surround(file.path(R.home("bin"), "R"), with = "\""),
    "--vanilla",
    "--slave",
    "-e",
    surround(installCmd, with = "\"")
  )

  system(fullCmd)
  return(invisible())
} 
```

# azure - 从 Azure 网站使用 Windows Azure 服务总线？

> ID：11530803
> 
> 赞同：1
> 
> 时间：2012-07-17T21:00:46.367
> 
> 标签：azure, servicebus, azure-web-app-service, azureservicebus

[这个使用服务总线](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/)的指南说第一步是创建一个服务命​​名空间。我在 Azure 网站的门户中看不到如何执行此操作。UI 与给出的说明不符。我想知道这些说明是否是为 Web 角色编写的，并且不适用于网站。有没有其他方法可以从网站做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:00:55.347

查看新的 Windows Azure 门户时，将鼠标移到最顶部导航栏中的“预览”一词上。

![门户导航栏中的预览图标](../Images/d6d01251ac2923c2dd72903fb028858e.png)

应出现一个对话框。完成后，单击该链接将您带回到之前的 Silverlight 门户。

![浏览器中可见的门户更改链接](../Images/b5e6b10dd371ac6c202cb2390f973c1a.png)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:27:48.207

您需要使用[Silverlight Azure 管理门户](https://windows.azure.com)，而不是[Azure 预览门户](https://manage.windowsazure.com/)。我假设[Azure 预览门户](http://www.techrepublic.com/blog/datacenter/getting-started-with-azure-iaas-and-the-new-windows-azure-portal/5620)最终会在即将发布时适应此更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T22:16:29.567

如果您仍然遇到此问题，请尝试退出。当我登录到 windows.azure.com 时，在我登录后，我可以选择我想要的门户（预览版或“旧门户”）。如果这不起作用，您可以在重新登录之前尝试清除 cookie。

# oracle - 使用 FOR UPDATE SKIP LOCKED 打开 OUT SYS_REFCURSOR 时出错

> ID：11530807
> 
> 赞同：3
> 
> 时间：2012-07-17T21:01:02.100
> 
> 标签：oracle, oracle11g, odp.net, sys-refcursor, ora-03113

我正在调用一个过程（从 C# 通过 ODP.Net 和 Oracle.DataAccess.dll 4.112.3.0 到带有一些补丁的 OracleDB 11.2.0.1），它有一个`OUT SYS_REFCURSOR`（我们称之为`pCursorOut`）。在这个过程中，我这样做：

```
OPEN pCursorOut FOR SELECT ... FOR UPDATE SKIP LOCKED; 
```

我的 C# 代码：

```
var oracleDataReader = oracleCommand.ExecuteDataReader();
dataTable.Load(oracleDataReader); 
```

调用`Load()`结果为`OracleException`：

> ORA-03113: 通信通道上的文件结尾

如果我删除`FOR UPDATE SKIP LOCKED`，它可以正常工作（除了*不*锁定我需要的记录）。

这可能是版本冲突吗？

如何解决？

**更新：**我怀疑这可能是因为我试图在表加载时一次锁定多个记录。我现在正在对此进行一些额外的测试......不。不是这个。在第一次调用时执行 a `yield return`on a`while (oracleDataReader.Read())`会引发同样的事情。`.Read()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:37:04.113

原来是版本冲突。我升级到 OracleDB 11.2.0.3，它开始按预期工作。

# java - 您如何将 Eclipse 和 Eclipse 项目指向 Eclipse 中的新 JRE 版本？（不使用 JAVA_HOME）

> ID：11530811
> 
> 赞同：4
> 
> 时间：2012-07-17T21:01:21.190
> 
> 标签：java, eclipse

设置场景：我的系统上有两个版本的 Java。一个 32 位版本和一个 64 位版本。我拥有的另一个版本是 64 位版本的 Eclipse (Java EE)。MyEclipse（32 位版本）指向 JDK 的 32 位版本。我现在试图将 Eclipse（32 位版本）指向新安装的 JDK 1.6.0_32。JAVA_HOME 变量已经被 64 位版本占用，因此我不能使用它。

以前此环境和此环境中的项目使用的是 Java 1.6.0_30。我更改 JRE 版本的地方是 Preferences->Java->Installed JREs。在这里，我添加了新的 JRE 并删除了旧的。我可能需要在哪些其他地方进行更改？当我启动我的 Apache Tomcat 服务器时，我仍然收到关于 1.6.0_30 的错误。具体来说，我收到错误“类路径引用的存档：Files/Java/jdk1.6.0_30/lib/tools.jar 不存在。”

查看我的项目的类路径，我看到了正确的 1.6.0_33 版本。我还需要在哪里更改类路径？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T21:06:11.697

转到 Window/Preferences/Server/Runtime Environment，选择您的服务器（Apache Tomcat），单击 Edit。有使用您的服务器的 JRE，您可以根据需要更改它。

![在此处输入图像描述](../Images/b238eacadeb1be809793df76e62e9d64.png)

![在此处输入图像描述](../Images/d261a1c5736ad4984f172a3463dcc8b9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:06:19.970

纠正此错误的一种方法是：

在 jre/lib 文件夹中找到 tools.jar 并将其复制到所需的文件夹 /Java/jdk1.6.0_30/lib/ 中。

# ios - iCloud 应用上的 CoreData Stack 与 UIManagedDocument

> ID：11530815
> 
> 赞同：4
> 
> 时间：2012-07-17T21:01:43.337
> 
> 标签：ios, core-data, singleton, icloud, uimanageddocument

我正在尝试为我的 CoreData 应用程序选择支持 iCloud 的最佳方法。

我认为一个好的策略应该是创建一个 SingleTon 类来处理所有 CoreData 和 iCloud 的东西，并将一个 ManagedObjectContext 传递给应用程序。

此类应处理用户更改其 iCloud 帐户或 iCloud 被禁用的情况。为此，我需要使用多个 NSPesistentStore，一个用于 iCloud，一个用于 iCloud 不可用的情况，并在需要时迁移数据。正确的？

我的主要问题是，使用 UIManagedDocument 类或传统的 CoreData 堆栈来创建一个处理应用程序的 CoreData/iCloud 基本逻辑的单例类的优缺点是什么？

来自 WWDC 2012 的代码示例也可以与 CoreData 普通堆栈的 UIManagedDocument 一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:21:11.830

使用更适合您的应用程序的那个......这几乎取决于您。不过，一般来说，`UIManagedDocument`对于以文档为中心的应用程序（如 Apple 的 iWork 应用程序）效果更好，而直接使用 Core Data 堆栈对于不以文档为中心的应用程序效果更好。

WWDC 2012 session 227 中的示例代码更适合您的单例想法——我不确定如果您正在使用它会有所帮助`UIManagedDocument`，因为该类管理自己的核心数据堆栈。

# video - 如何以可变帧速率同步两个视频？

> ID：11530818
> 
> 赞同：3
> 
> 时间：2012-07-17T21:02:01.880
> 
> 标签：video, opencv, video-processing, pyglet

我有许多视频文件对，是在一个房间里用两台网络摄像机拍摄的。由于带宽利用率，视频文件具有可变帧速率。据我了解，如果我们在时间轴上标记帧，它是这样的：

![可变帧率](../Images/2c59275c65d43a31886611e8da4e8ea4.png)

我想同步这两个视频。通过同步我的意思是，填补空白，以便对于视频中的给定帧，在另一个视频中存在相应的帧。最后我想要两个有两个这样的视频：

![在此处输入图像描述](../Images/487bafe544c341fffbc9d3ac2434058e.png)

我曾考虑使用转换器工具将两个视频都转换为 25 fps，尽管我将有冗余帧对，它们将被同步。但是，我有与所有视频的每一帧关联的信息，转换后我将无法知道关联。

我认为我需要以编程方式执行此操作，以便我可以相应地保持与每个帧相关联的信息。

到目前为止，我已经尝试过 OpenCV，`VideoCapture`属性`CV_CAP_PROP_POS_MSEC`给了我帧号，而不是帧的毫秒数。即使它给了我正确的值，`VideoWriter`也不支持可变帧速率。MATLAB 拒绝读取我的视频文件，因为它不支持编解码器，即 MJPEG (motion jpeg)。我已经能够在 Python 中使用[pyglet读取帧 # 和相应的毫秒数。](http://www.pyglet.org/)但它只是解码器，我仍然没有任何内容可写入视频文件，例如“这是第 12 帧，这应该正好是视频的 1.76 秒”。

我正在寻找最简单的方法来实现这一点，语言，工具都没有关系。赞赏基于 Windows 的解决方案。非常感谢您的回答。

**PS。**我不介意输出格式，但我更喜欢无损格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:27:58.693

最简单的方法是将两者都转换为相同的 fps（比如说 25），然后匹配它们。ffmpeg 是一个很好的工具。查看此博客文章以获取更多详细信息[http://www.hdslr-cinema.com/news/workflow/convert-between-framerates/](http://www.hdslr-cinema.com/news/workflow/convert-between-framerates/)

但可能它会复制帧以覆盖空槽。如果这不能满足您的要求，您应该研究时间插值 - 在帧之间插入像素。但这是很多工作。ffmpeg 解决方案是一个 5 分钟的任务，插值可能意味着阅读和实施一些学术论文。

请注意，可能有一些专门的插值工具，但我不知道它们。值得研究。

# php - 我无法让准备好的语句 UPDATE 在循环中迭代

> ID：11530820
> 
> 赞同：0
> 
> 时间：2012-07-17T21:02:13.817
> 
> 标签：php, mysqli, prepared-statement

我把它放在一个循环中的原因是因为我想为指定月份的每一天添加特定数据，因此循环运行“n”次，其中 n 是一个月中的天数。这是我的代码： $i = 0;

```
 while ($i < $loop_count) {

        $day_prefix = $i + 1;
        if (strlen($day_prefix) == 1) {
            $day_prefix = "0" . $day_prefix; //this gives 2012-01-01 through to 2012-01-31
        }

        if ($stmt = $sql_con->prepare("UPDATE DailyBudget SET amount = ? 
                                            WHERE date=?, code=?")) {
            $stmt->bind_param('isi', $budget_daily, $date_iterator . $day_prefix, $code);
            $stmt->execute();
            $stmt->close();

        }else
            echo "fail! </br>";

        $i++;
    }
$sql_con->close();        
} 
```

我花了比我想弄清楚的时间更多的时间，所以非常感谢一些帮助！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:20:13.057

似乎您应该使用`bind_value`而不是`bind_param`动态创建值并为每个插入准备语句。因为`bind_param`你应该尝试类似

```
$i = 0;
$stmt = $sql_con->prepare("UPDATE DailyBudget SET amount = ? WHERE date=?, code=?");
$stmt->bind_param('isi', $budget_daily, $date_iterator_prefix, $code);
while ($i < $loop_count) {
    $day_prefix = $i + 1;
    if (strlen($day_prefix) == 1) {
        $day_prefix = "0" . $day_prefix; //this gives 2012-01-01 through to 2012-01-31
    }
    $date_iterator_prefix = $date_iterator . $day_prefix;
    $stmt->execute();

    $i++;
}
$stmt->close();               
$sql_con->close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:06:21.030

我认为您的主要问题是[where 条件](http://dev.mysql.com/doc/refman/5.0/en/update.html)。[where 条件](http://dev.mysql.com/doc/refman/5.0/en/update.html)是一个表达式，对于要更新的​​每一行计算结果为真。作为[表达式](http://dev.mysql.com/doc/refman/5.0/en/expressions.html)，组件/子条件必须通过逻辑运算符组合在 where 条件中。换句话说，在 where 子句/条件中使用`AND`而不是逗号 ( )`,`

考虑改变你的代码看起来更像这样：

```
if ($stmt = $sql_con->prepare('UPDATE DailyBudget SET amount = ? WHERE date=? AND code=?')) {
    $year = 2012;
    $month = 1;
    $days_in_month = (int) date('d',(mktime(0,0,0,$month+1,1,$year)-86400));
    $day = 1;
    while ($day <= $days_in_month) {

        $budget_daily = 15.75 - .25 * $day;
        $code = 1;

        $date = $year.'-'.str_pad($month,2,0,STR_PAD_LEFT).'-'.str_pad($day,2,0,STR_PAD_LEFT);
        $stmt->bind_param('dsi', $budget_daily, $date, $code); 
        $stmt->execute();

        $day++; 
    }   
    $stmt->close();
}
else echo 'WARNING: There was an error with the prepare: '.$sql_con->error."\n";
$sql_con->close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:19:31.597

实际上prepared statement的好处是它准备一次并执行多次。

所以，你必须**把准备放在循环之前。**

```
$sth = $dbh->prepare('UPDATE DailyBudget SET amount = ? WHERE date=?, code=?"');
while($i < $loop_count) {
    $sth->execute(array($budget_daily, $date_iterator.$day_prefix, $code));
} 
```

# php - 使用 PHP 应用程序将 Phusion Passenger 安装到现有 VPS 上

> ID：11530821
> 
> 赞同：3
> 
> 时间：2012-07-17T21:02:15.033
> 
> 标签：php, ruby-on-rails-3, passenger, vps

将 phusion 乘客 (apache) 安装到现有服务器上会破坏使用 PHP 的现有站点实现吗？

我在 Rails 中工作，我想从同一个机架空间 VPS 运行 PHP 和 Rails 应用程序。但是，我害怕安装乘客，因为担心它会关闭我们的现场。

我为 Rails 构建了一个虚拟主机，并进行了所有设置，但这让我望而却步。

任何建议表示赞赏。

谢谢！

乔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:07:50.600

如果可能的故障阻碍了您，请在尝试之前尝试进行完整备份。在我用 ruby​​ 安装乘客进行 redmine 安装之前，我在安装 apache+php 方面有类似的经验，工作没有任何错误。[在继续安装http://www.modrails.com/install.html](http://www.modrails.com/install.html)之前考虑阅读一点。

# uuid - 在java中保证16字节长度的唯一ID

> ID：11530824
> 
> 赞同：0
> 
> 时间：2012-07-17T21:02:26.210
> 
> 标签：uuid

java.util.UUID 类中的 getLeastSignificantBits() 和 getMostSignificantBits() 返回的 8 个字节的组合是否保证唯一的 16 个字节 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:06:39.030

如果您使用的 UUID 是唯一的，那么可以。

# awk - 我可以 grep/awk 文件并使用评估的环境变量打印其内容吗？

> ID：11530825
> 
> 赞同：1
> 
> 时间：2012-07-17T21:02:31.593
> 
> 标签：awk, environment-variables, tcsh

我有一个文件，其中包含文本和对环境变量的引用。例子：

```
#PRINTME It is always fun to start your week on a sunny ${DAY_OF_WEEK}
#PRINTME My name is ${USERNAME}, you killed my father - prepare to die!
Unrelated gibberish - not to be printed
... 
```

将其视为元数据。

我想定义一个命令来greps这个文件并打印标记的所有内容`#PRINTME`并评估环境变量。

我这样做了：`grep #HELP myfile | sed "s/#PRINTME //g" | awk '{print $1}'`但我的输出是

```
It is always fun to start your week on a sunny ${DAY_OF_WEEK}
My name is ${USERNAME}, you killed my father - prepare to die! 
```

代替

```
It is always fun to start your week on a sunny Monday
My name is Inigo Montoya, you killed my father - prepare to die! 
```

有没有一种 SHELL 方式来做我想做的事？我正在使用`TCSH`- 无法更改。`grep`替换,`sed`和没有问题`awk`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:14:07.743

我会使用 Perl，但它可以用任何脚本语言编写——Python、Ruby、Tcl/Tk、...

这只是一个单行：

```
perl -n -e 'next unless m/^#PRINTME /;s/#PRINTME //;s/\$\{(\w+\)\}/$ENV{$1}/eg;print;' 
```

这`-n`意味着读取行但不自动打印它们（想想`sed -n`）。`next`跳过不打印的行。第一个替换删除打印标记。烟火在第二个替代品中：

*   查找`${WORD}`，然后将其替换为`$ENV{WORD}`，使用`e`选项将替换评估为表达式（可能是不规则的，因为此时它不是正则表达式；它只是一个普通表达式），并在全局范围内这样做`g`。

然后打印剩下的。

*（代码现已测试。）*

```
$ cat xx.sh
DAY_OF_WEEK=Tuesday USERNAME="Inigo Montoya" \
perl -n -e 'next unless m/^#PRINTME /; s/#PRINTME //; s/\$\{(\w+)\}/$ENV{$1}/eg; print;' <<EOF

#PRINTME It is always fun to start your week on a sunny ${DAY_OF_WEEK}
#PRINTME My name is ${USERNAME}, you killed my father - prepare to die!
Unrelated gibberish - not to be printed
...

EOF
$ sh xx.sh
It is always fun to start your week on a sunny Tuesday
My name is Inigo Montoya, you killed my father - prepare to die!
$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:57:14.653

你可以用 Gawk 做到这一点：

```
gawk '

  /^#PRINTME/ {

    # Remove prefix
    sub( /^#PRINTME /, "" )

    # Loop while the line contains variables
    while( /\$\{[^}]+\}/ ) {

      # Extract the first variable name
      VAR = gensub( /^[^$]*\$\{([^}]+)\}.*$/, "\\1", 1 )

      # Replace it with its value
      gsub( "\\$\\{" VAR "\\}", ENVIRON[ VAR ] )
    }

    print

 }
' 
```

该脚本一一查找变量并用它们的值替换它们。

如果您希望操作系统为您评估变量，则更容易（并且在标准 Awk 中可行）：

```
awk '/^#PRINTME/ { sub( /^#PRINTME /, "" ) ; system( "echo " $0 ) }' 
```

这一次，我们构建了一个 echo 命令并将其传递给 shell。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T21:10:57.917

您可以`ENVIRON`在`awk`. 试试这个，例如：

```
awk 'BEGIN {print ENVIRON["HOME"]}' </dev/null 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T11:24:19.340

你想处理像这样的表达式`${foo:-bar}`吗？您在评论中提到要评估该行是否包含命令，因此您可能只想使用`eval`. 请注意，如果您有不受控制的输入，则会涉及大量安全风险。在`sh`中，您可以执行以下操作：

```
sh$ < myfile sed -e '/#HELP/!d' -e 's/#PRINTME //g' |
 while read line; do eval echo "\"$line\""; done 
```

如果您真的被迫使用 tcsh，请尝试：

```
tcsh$ sh -c '< myfile sed -e "/#HELP/!d" -e "s/#PRINTME //g" |\
            while read line; do eval echo "\"$line\""; done' 
```

（您的代码过滤掉了 #HELP 行，尽管您没有提及它，并且您发布的输出表明您`awk '{print $1}'`是真的`awk '{print $0}'`。我已将所有这些组合到单个 sed 调用中。您也可以这样做`sed -n '/#HELP/s/#PRINTME //gp'`，而且您应该几乎当然考虑用`^`)锚定模式

# html - HTML 内容宽度

> ID：11530826
> 
> 赞同：-8
> 
> 时间：2012-07-17T21:02:33.420
> 
> 标签：html, css

我需要帮助更改此[html 内容](http://cydia.death2020.net/depiction/aicon.php)的大小吗？我需要它的宽度为 300 宽度，以便移动使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:04:21.207

您可以将 body 的宽度设置为 300px；

```
<body style="width: 300px;"></body> 
```

# android - 使用 PendingIntent 的编译错误

> ID：11530830
> 
> 赞同：0
> 
> 时间：2012-07-17T21:02:45.537
> 
> 标签：android, compiler-errors, android-pendingintent

所以我正在编写一段代码，它可以让我在顶部的状态栏中运行一个应用程序，我是进入它的好方法，几乎​​完成了。我只需要对为什么我的“PendingIntent.getActivity(this,that,next,thing);”有第二意见 它没有编译。这是代码

```
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;

public class NotifyMe extends Activity {
NotificationManager nm;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    Intent MainActivity = new Intent(this, MainActivity.class);
    PendingIntent pi = new PendingIntent.getActivity(this, 0, intent, 0);
    String body = "Simple message";
    String title = "Hello World";
    Notification n = new Notification(R.drawable.note, body, System.currentTimeMillis());
    n.setLatestEventInfo(this, title, body, pi);

}
} 
```

所以我可能做错了，在这件事上的任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:14:42.277

```
 PendingIntent pi = new PendingIntent.getActivity(this, 0, intent, 0); 
```

不需要新的。

更重要的是，您需要专注于设置 eclipse 环境，以便至少可以查看错误消息。它们应该出现在称为问题的区域中，当您在 StackOverflow 上报告错误时，您可以包含错误消息的内容。如果您对您的环境有任何疑问，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T12:51:00.177

```
PendingIntent pi = PendingIntent.getActivity(FancyDiamondResultActivity.this, 0, intent, 0); 
```

# android - 如何在 android TextView 中使用 Telugu 字体

> ID：11530837
> 
> 赞同：2
> 
> 时间：2012-07-17T21:03:02.403
> 
> 标签：android

我正在尝试显示一些泰卢固字体中的值。当我在测试时，我发现了一些错误的发音。我只是按照下面的代码行来显示泰卢固字体。

```
 Typeface tf = Typeface.createFromAsset(getAssets(),"fonts/DroidSansRegionalAAD.ttf");
    tv = (TextView) findViewById(R.id.myFont);
    tv.setTypeface(tf); 
```

谁能帮我

# git - 在 git 中保护一些文件不被开发

> ID：11530842
> 
> 赞同：4
> 
> 时间：2012-07-17T21:03:35.130
> 
> 标签：git

我想用 SugarCRM 设置 git 服务器。有一些文件和文件夹需要保护，我只想允许一些文件和文件夹能够开发等等。 git 怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:42:12.903

将受保护的文件放在只读子模块中。

或者，使用预接收挂钩对选定文件强制执行只读。

或者，让其他人在不同的分支上开发并且不合并任何受保护的文件。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:44:27.247

您可以编写一个[预接收挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks)并使用它来确保所有文件都位于允许您的开发人员编写的目录中。您可以在服务器上使用该挂钩。它仍然允许用户提交文件（在他们的本地分支上），但它们不能再被推送到服务器并且整个推送将失败。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-17T21:38:04.117

如果“受保护”的意思是“从版本控制中排除”，那么您可以通过将它们添加到[.gitignore](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)文件来做到这一点。

# python - 将缩进代码向左移动，删除前导标签

> ID：11530843
> 
> 赞同：3
> 
> 时间：2012-07-17T21:03:39.127
> 
> 标签：python, regex, sublimetext2

假设我有一段代码从一个文件复制到一个新的空白文件。原始文件中的代码按原样缩进，但是我想在放置新的空白文件时取消缩进代码。但是，我只想取消缩进到基本缩进，这意味着我不想删除所有缩进。有道理？

例如，将代码块粘贴到新创建的文件中时，它可能如下所示：

```
 <h1>Title</h1>
        <div>
            <p>This is a nested paragraph</p>
            <ul>
                <li>Even deeper!</li>
            </lu>
        </div> 
```

我想用正则表达式和/或python创建一个函数，它将把上面的文本变成这样：

```
<h1>Title</h1>
<div>
    <p>This is a nested paragraph</p>
    <ul>
        <li>Even deeper!</li>
    </lu>
</div> 
```

唯一的区别是前导缩进。

任何想法或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T21:06:58.657

查看模块中的`dedent`函数：http: [//docs.python.org/library/textwrap.html#textwrap.dedent](http://docs.python.org/library/textwrap.html#textwrap.dedent)`textwrap`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:05:36.007

如果输入始终采用您提供的格式，您可以查看第一行有多少个制表符，并从该行和任何后续行中删除那么多制表符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-14T08:22:55.217

选择要缩进的文本并按

1) **ctrl + [**从每一行的开头删除一个制表符空间

2) **ctrl + ]**在每一行的开头添加一个选项卡。

未针对所有版本进行测试，但适用于 sublime text 2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T21:09:56.237

如果您使用**emacs**，您可以使用“盒子模式”命令删除缩进。您将标记和光标设置在定义框的文件区域上，然后键入 ctrl-x rk 以删除该框。奇迹般有效。

# optimization - 使用 Apache Commons Math 优化函数

> ID：11530850
> 
> 赞同：0
> 
> 时间：2012-07-17T21:04:04.757
> 
> 标签：optimization

我尝试使用算术优化库解决以下问题，但没有成功。

优化问题是：

找到最大的积分 h 使得以下约束成立：

```
(h-2) * ArithmeticUtils.binomialCoefficient(b+h-2, h-1) -
        ArithmeticUtils.binomialCoefficient(b+h-3, h-3) +
        ArithmeticUtils.binomialCoefficientDouble(b+h-3,h-2)
        - 2*epsilon*N 
```

其中b，epsilon，N是给定的，它们分别是int，double，int。

你能告诉我应该使用哪个优化器以及什么优化功能吗？

到目前为止的代码如下所示：

```
 public void optimize(){
            //create the univariate function to be optimized
    UnivariateRealFunction functionToOptimize = new UnivariateRealFunction() {

        @Override
        public double evaluate(double h) {
            return -h;
        }
    };
    UnivariateRealFunction hConstraint = new UnivariateRealFunction() {

        public double evaluate(double h) {
                          (h-2) * ArithmeticUtils.binomialCoefficient(b+h-2, h-1) -
                                  ArithmeticUtils.binomialCoefficient(b+h-3, h-3) +
                                  ArithmeticUtils.binomialCoefficientDouble(b+h-3,h-2)
                                  - 2*epsilon*N
        }
    };

    List<RealScalarFunction> constraints = new ArrayList<RealScalarFunction>();
    constraints.add(hConstraint);

    ConstrainedOptimProblem problem = new ConstrainedOptimProblem(
            functionToOptimize, 
            null, 
            new GeneralLessThanConstraints(constraints));

    BFGS bfgs = new BFGS();

    PenaltyMethodMinimizer optim = new PenaltyMethodMinimizer(
            PenaltyMethodMinimizer.DEFAULT_PENALTY_FUNCTION_FACTORY, 
            1e30,
            bfgs);

    optim.solve(problem,1e-3,200);

    Vector xmin = optim.search(new DenseVector(new int[]{8}));
    double fxmin = functionToOptimize.evaluate(xmin.get(1));    
    System.out.println("fxmin: "+fxmin);
    System.out.println(String.format("f(%s) = %f",
            DoubleUtils.doubleArray2StringArray(xmin.toArray()), fxmin));

    } 
```

我查看了 Apache commons 数学库，但我不知道如何使用它来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:28:54.640

我放弃了使用 Apache commons 的想法，主要是因为它对于非线性约束的优化问题不是很有用。我使用了蛮力最小化器，它完成了工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:17:55.340

如果您使用 SuanShu，您可以尝试[brute force](https://nm.dev/html/javadoc/nmdev/dev/nm/solver/multivariate/constrained/integer/bruteforce/BruteForceIPMinimizer.html) minimumr或[DeOptim](https://nm.dev/html/javadoc/nmdev/dev/nm/solver/multivariate/geneticalgorithm/minimizer/deoptim/DEOptim.html)。对于 DeOptim，您需要编写积分约束单元工厂，例如：IntegralCellFactory.java

# jquery - 将 JQuery-file-upload 合并到应用程序

> ID：11530851
> 
> 赞同：2
> 
> 时间：2012-07-17T21:04:06.107
> 
> 标签：jquery, model-view-controller, backbone.js, twitter-bootstrap

我已经基于这个[示例应用](http://coenraets.org/backbone-cellar/bootstrap/)程序启动了一个 jquery/backbone.js 应用程序，并对其进行了相当大的修改以做我自己的事情，但 MVC 概念仍然存在。到目前为止，一切正常，我基本上只是添加我的内容/模型/等。当我也需要的时候。

我需要实现一个基本的文件上传器，发现这个[JQuery-file-upload](http://blueimp.github.com/jQuery-File-Upload/)很棒（我不想重新发明轮子......因为，我很“匆忙”）。以前有人做过吗？**到目前为止，我已经下载了 zip 文件并在 WampServer (PHP) 上运行它，它工作得很好**（我阅读了安装手册）。在应用程序中合并/附加它怎么样（使用小部件）？你是怎么做的（我对插件没有太多经验）

代码部分：

tpl/ResourcesView.html（所以如果我们只从演示中提取有趣的部分）：

```
<div class="content fixed-fixed">              
<!-- The file upload form used as target for the file upload widget -->
    <form id="fileupload" action="plugin/jquery-fileupload/server/php/" method="POST" enctype="multipart/form-data">
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
            <div class="span7">
                <!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button">
                    <i class="icon-plus icon-white"></i>
                    <span>Add files...</span>
                    <input type="file" name="files[]" multiple>
                </span>
                <button type="submit" class="btn btn-primary start">
                    <i class="icon-upload icon-white"></i>
                    <span>Start upload</span>
                </button>
                <button type="reset" class="btn btn-warning cancel">
                    <i class="icon-ban-circle icon-white"></i>
                    <span>Cancel upload</span>
                </button>
                <button type="button" class="btn btn-danger delete">
                    <i class="icon-trash icon-white"></i>
                    <span>Delete</span>
                </button>
                <input type="checkbox" class="toggle">
            </div>
            <!-- The global progress information -->
            <div class="span5 fileupload-progress fade">
                <!-- The global progress bar -->
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                    <div class="bar" style="width:0%;"></div>
                </div>
                <!-- The extended global progress information -->
                <div class="progress-extended">&nbsp;</div>
            </div>
        </div>
        <!-- The loading indicator is shown during file processing -->
        <div class="fileupload-loading"></div>
        <br>
        <!-- The table listing the files available for upload/download -->
        <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
    </form>
</div>

<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
                <button class="btn btn-primary">
                    <i class="icon-upload icon-white"></i>
                    <span>{%=locale.fileupload.start%}</span>
                </button>
            {% } %}</td>
        {% } else { %}
            <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>{%=locale.fileupload.cancel%}</span>
            </button>
        {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script> 
```

然后是骨干部分

js/views/resources.js（渲染模板）：

```
window.ResourcesView = Backbone.View.extend({

    initialize:function () {
        this.render();
        $('#fileupload').fileupload();
           $('#fileUpload', this.el).fileupload('option', {
           url: '/resources'
        });
    },

    render:function () {
        $(this.el).html(this.template());
        return this;
    }

}); 
```

主.js：

```
var AppRouter = Backbone.Router.extend({

    routes: {
        "resources"         : "resources"},
    resources: function(){
        if (!this.resourcesView) {
            this.resourcesView = new ResourcesView();
        }
        $('#content').html(this.resourcesView.el);

        this.leftMenuView.selectMenuItem('resource-link');

    }
});

utils.loadTemplate(['ResourcesView' ], function() {
    app = new AppRouter();
    Backbone.history.start();
}); 
```

最后，我的 index.html：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>MPact App</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <style>
        body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
    </style>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/docs.css" rel="stylesheet">

    <!-- Generic page styles -->
    <link rel="stylesheet" href="plugin/jquery-fileupload/css/style.css">

    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="plugin/jquery-fileupload/css/jquery.fileupload-ui.css">
</head>

<body data-spy="scroll" data-target=".subnav" data-offset="50">

<div class="header"></div>

<div class="container-fluid">
    <div id="left-menu" class="sidebar left"></div>
    <div class="content fixed-fixed">
        <div id="content" class="span12>"></div>
    </div>

</div>  

<script src="lib/jquery-1.7.2.min.js"></script>
<script src="lib/underscore-min.js"></script>
<script src="lib/backbone-min.js"></script>
<script src="lib/bootstrap.js"></script>

<script src="lib/backbone-min.js"></script>

<script src="js/utils.js"></script>
<script src="js/views/resources.js"></script>
<script src="js/main.js"></script>

<!-- Plugin instance-->
<script src="plugin/jquery-fileupload/js/vendor/jquery.ui.widget.js"></script>
<!-- The Templates plugin is included to render the upload/download listings -->
<script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
<!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo -->
<script src="http://blueimp.github.com/cdn/js/bootstrap.min.js"></script>
<script src="http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="plugin/jquery-fileupload/js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="plugin/jquery-fileupload/js/jquery.fileupload.js"></script>
<!-- The File Upload file processing plugin -->
<script src="plugin/jquery-fileupload/js/jquery.fileupload-fp.js"></script>
<!-- The File Upload user interface plugin -->
<script src="plugin/jquery-fileupload/js/jquery.fileupload-ui.js"></script>
<!-- The localization script -->
<script src="plugin/jquery-fileupload/js/locale.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T06:28:23.523

1）主干应用程序，具有文件输入的视图：

```
<div class="fileUploadView">
  <input id="fileUpload" name="file" type="file"/>
</div> 
```

2) 要添加插件，您的服务器上有 blueimp fileupload 插件 javascript 文件并从您的页面`<head>`或`<body>`页面引用？我通常有一个文件夹，例如 vendor/NAME 用于插件和小部件。这些包括以下所有内容：

```
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="/vendor/fileUpload/js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="/vendor/fileUpload/js/jquery.fileupload.js"></script>
<!-- The File Upload file processing plugin -->
<script src="/vendor/fileUpload/js/jquery.fileupload-fp.js"></script>
<!-- The File Upload user interface plugin -->
<script src="/vendor/fileUpload/js/jquery.fileupload-ui.js"></script> 
```

3) 为了使它看起来像您在页面中提供并引用了 jquery.fileupload-ui.css 的演示：

```
<link rel="stylesheet" href="/vendor/fileUpload/css/jquery.fileupload-ui.css"> 
```

4) 在视图中调用 render() 后，假设所有必要的文件都在窗口中并且视图已被渲染，您可以这样做：

```
$('#fileUpload', this.el).fileupload(); 
```

如果您拥有所有资产，则应该显示小部件。最后，您需要将其指向您的 url 以接收文件上传：

```
$('#fileUpload', this.el).fileupload('option', {
  url: '/uploadreceiver'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:13:27.977

实际渲染发生在 main.js 中，因此我将文件上传初始化放在了错误的位置（我想我错过了阅读或文档上的内容）。

资源.js：

```
window.ResourcesView = Backbone.View.extend({

    initialize:function () {
        this.render();
    },

    render:function () {
        $(this.el).html(this.template());
        return this;
    }

}); 
```

主.js：

```
resources: function(){
    if (!this.resourcesView) {
        this.resourcesView = new ResourcesView();
    }
    $('#content').html(this.resourcesView.el);
    $('#fileupload').fileupload();
       $('#fileUpload', this.el).fileupload('option', {
       url: '/resources'
    });

    this.leftMenuView.selectMenuItem('resource-link');

}, 
```

# android - android布局设置十个固定边距的正方形

> ID：11530854
> 
> 赞同：0
> 
> 时间：2012-07-17T21:04:18.617
> 
> 标签：android, android-layout

我需要创建一个包含 10 个正方形的布局，它以固定的边距填充屏幕的宽度。你可以看到附上的草图。

任何想法如何实现这一目标？

![示例草图](../Images/ba0ce7483e5820181884216af60ccd59.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:06:23.857

TableLayout 应该可以正常工作。通常用于计算器板，它本质上是一排排正方形。试试看，让我们知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:11:26.843

您可以将每个正方形包裹在 a`LinearLayout`或`RelativeLayout`中，将 设置`layout_width`为 0dp 并将设置`layout_weight`为 1（或者任何值，实际上，只要每个正方形具有相同的值），然后使用水平线`LinearLayout`将其全部包裹起来。

编辑：实际上，只要您使用 ImageView 的 src 字段而不是背景，就不需要内部的 LinearLayout/RelativeLayouts。

# io - 即时将 Atmel IO 引脚从输入更改为三态

> ID：11530857
> 
> 赞同：1
> 
> 时间：2012-07-17T21:04:22.603
> 
> 标签：io, atmel

我被谷歌淘汰了。因此，StackOverflow 的亲爱的朋友们，是否可以将 Atmel 系列微处理器（例如 Atmel 165）上的 IO 引脚从输入更改为输出，或从输出更改为三态，或从输出更改为三态再到输入以及任何或所有这些相反？

并行问题：是否有 Atmel 程序员/语言支持或不支持切换 IO 引脚的“工具”？如果我要在 Google 上搜索相关信息，这个主题（更改引脚方向）的名称是否比“将输入引脚更改为输出引脚”+Atmel 更易于搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:16:10.940

通过改变 3 个控制寄存器中各个位的值来配置引脚的 I/O 方向。这方面的文档在本文档的第 12.2 节（从第 61 页开始）[中](http://www.atmel.com/Images/doc8019.pdf)。

例如，要将 PA1 设置为三态输入，则需要清除 DDRA 和 PORTA 中的相应位。在 C 中：

```
PORTA &= !(1<<PA1)
DDRA &= !(1<<DDA1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:15:14.343

是的，您可以随时更改引脚配置。我从未听说过不允许您切换引脚配置的语言。

只需按照芯片文档中概述的程序来更改引脚配置即可。您基本上只需将一个值写入该端口的相应数据方向寄存器。[请参阅数据表](http://www.atmel.com/Images/doc8019.pdf)的第 12.4 节。在 C 语言中，通常`DDRC = 0;`只需将所有端口 C 引脚设置为输入即可。

数据表在第 12.4.2 到 12.4.22 节中介绍了每个端口的功能以及如何获得它们。

# java - 正则表达式：?: notation（问号和冒号）

> ID：11530862
> 
> 赞同：106
> 
> 时间：2012-07-17T21:04:32.313
> 
> 标签：java, regex

我有以下 Java 正则表达式，它不是我写的，我正在尝试修改：

```
^class-map(?:(\\s+match-all)|(\\s+match-any))?(\\s+[\\x21-\\x7e]{1,40})$
           ^                                 ^ 
```

它与[此](https://stackoverflow.com/questions/11529071/please-explain-this-java-regex)类似。

注意第一个问号。这是否意味着该组是可选的？对应的后面已经有一个问号了`)`。冒号在正则表达式中有特殊含义吗？

正则表达式编译得很好，并且已经有 JUnit 测试显示它是如何工作的。只是我有点困惑为什么第一个问号和冒号在那里。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-07-17T21:06:22.370

`(?:`启动一个非捕获组。`(`除非您在使用后从正则表达式中检索组，否则这没有什么不同。请参阅[什么是非捕获组？问号后跟冒号 (?:) 是什么意思？](https://stackoverflow.com/q/3512471/1143427).

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-04-29T02:51:48.677

这个线程有点晚了 - 只是为了建立 ryanp 的答案。

假设你有字符串`aaabbbccc`

## 正则表达式

```
(a)+(b)+(c)+ 
```

这将为您提供以下 3 个匹配的组：

```
['a', 'b', 'c'] 
```

## 带有非捕获括号的正则表达式

`?:`在第一组中使用

```
(?:a)+(b)+(c)+ 
```

你会得到以下匹配的组：

```
['b', 'c'] 
```

因此为什么它被称为“**非捕获**括号”

## 示例用例：

有时您将括号用于其他事情。例如设置`|`or 运算符的边界：

```
"New (York|Jersey)" 
```

在这种情况下，您只使用括号来表示 or`|`开关，并且您并不想捕获这些数据。使用非捕获括号表示：

```
"New (?:York|Jersey)" 
```

# actionscript - 为什么切换 Movieclip 的可见性会导致其子输入 TextField 在 Actionscript 3 中无法正常工作？

> ID：11530866
> 
> 赞同：0
> 
> 时间：2012-07-17T21:04:45.193
> 
> 标签：actionscript, textfield, visible

在 Actionscript 3 中，我具有在舞台上显示或隐藏对象的功能。但是，其中一些调用这些函数的对象将 TextField 设置为输入，当我尝试选择文本输入时，在我调用函数使其父不可见后它不会让我（嗯，它确实有点，但我必须在一个字符被揭示之前将键盘捣碎很多次，这并不可靠）。这些对象的代码对此进行了扩展：

公共类 MenuNavigation 扩展 MovieClip {

```
 public function MenuNavigation()  
    {
        // constructor code
    }
    public function RevealMenu():void
    {
        this.visible = true;
    }
    public function HideMenu():void
    {
        this.visible = false;
    }

} 
```

我确定这是由于将 .visible 属性切换为 false 造成的，但我不知道如何重新激活它们或任何可以使用的替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:02:44.200

没关系，我可以通过这样做来实现我的目标：

```
 public function RevealMenu():void
    {
        this.alpha = 100;
        this.mouseChildren = true;
        this.enabled = true;
        this.mouseEnabled = true;
        //Makes things visible for MenuMain
    }
    public function HideMenu():void
    {
        this.alpha = 0;
        this.mouseChildren = false;
        this.enabled = false;
        this.mouseEnabled = false;
        //Hides the MenuMain
    } 
```

# awk - 匹配带有 0 或 1 个空格的字符串

> ID：11530868
> 
> 赞同：0
> 
> 时间：2012-07-17T21:04:56.900
> 
> 标签：awk

我试图浏览一堆可能包含加拿大邮政编码（格式`A0A 0A0`）的数据，并想要打印那些行。中间可能有也可能没有空格。我尝试了以下正则表达式：

```
awk '{if($5~/[a-zA-Z][0-9][a-zA-Z] +[0-9][a-zA-Z][0-9]/){print $5}} 
```

这将返回确实有空格的行。我认为'+'会使它返回有无的两条线。我也试过：

```
awk '{if($5~/[a-zA-Z][0-9][a-zA-Z][ ]+[0-9][a-zA-Z][0-9]/){print $5}} 
```

但这给出了相同的结果。有人能发现我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:10:40.090

Plus 指定重复一次或多次的内容，这可能不是您想要的。您需要一个问号，这将使前面的项目成为可选项目。

```
awk '{if($5~/[a-zA-Z][0-9][a-zA-Z] ?[0-9][a-zA-Z][0-9]/){print $5}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:11:30.413

用一个`?`

```
awk '$5~/[a-zA-Z][0-9][a-zA-Z] ?[0-9][a-zA-Z][0-9]/ {print $5}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:10:42.840

似乎它`A0A 0A0`分为`awk`两个字段（默认为空格），因此您应该更改`FS`（字段分隔符）变量或`$5`与第一部分和`$6`第二部分进行比较。

# c++ - FBIOPUT_VSCREENINFO 和模式行

> ID：11530874
> 
> 赞同：1
> 
> 时间：2012-07-17T21:05:49.350
> 
> 标签：c++, linux, framebuffer, ioctl, modeline

我正在尝试使用 FBIOPUT_VSCREENINFO 更改屏幕配置，但我不知道如何计算：

```
__u32 pixclock;                 /* pixel clock in ps (pico seconds) */
__u32 left_margin;              /* time from sync to picture    */
__u32 right_margin;             /* time from picture to sync    */
__u32 upper_margin;             /* time from sync to picture    */
__u32 lower_margin;
__u32 hsync_len;                /* length of horizontal sync    */
__u32 vsync_len; 
```

（参见： http: [//lxr.free-electrons.com/source/include/linux/fb.h#L245](http://lxr.free-electrons.com/source/include/linux/fb.h#L245)）来自给定模式行的 fb_var_screeninfo 结构。我尝试了以下各种替代方案：

[http://www.arachnoid.com/modelines/index.html](http://www.arachnoid.com/modelines/index.html)

但我从来没有得到的价值观

[http://lkml.indiana.edu/hypermail/linux/kernel/9902.0/1388.html](http://lkml.indiana.edu/hypermail/linux/kernel/9902.0/1388.html)

我猜 pixclock 可以用 KHZ2PICOS 计算，其余的我似乎不太对。用我的猜测尝试 ioctl 失败了。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:42:29.480

这两个链接有助于确定数字：

[http://www.scribd.com/doc/78015736/Creat-LINUX-Games-Programming-Tutorial-1#page=333](http://www.scribd.com/doc/78015736/Creat-LINUX-Games-Programming-Tutorial-1#page=333)

[http://casper.berkeley.edu/svn/trunk/roach/sw/linux/Documentation/fb/cyblafb/fb.modes](http://casper.berkeley.edu/svn/trunk/roach/sw/linux/Documentation/fb/cyblafb/fb.modes)

但似乎帧缓冲设备不允许我设置视频模式。

# sql - 需要 SQL 智能舍入帮助

> ID：11530876
> 
> 赞同：0
> 
> 时间：2012-07-17T21:05:50.137
> 
> 标签：sql, tsql, rounding

我的任务是使用具有以下规则的 sql 游标来转换（四舍五入）小数（带有 2 个小数位）

如果第二个十进制数字是：

a)0,1,2 然后我必须把它变成 0。

b)3,4,5,6,7 然后我必须把它变成 5。

c)8,9 然后我必须将其变为 0（并在第一个十进制数字中添加 1）。

该操作包含许多需要使用这些规则转换的记录和值。我正在使用 Microsoft SQL Server 数据库。

你能建议我一个可以实现这些规则的智能 sql 吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:14:04.610

```
SELECT ROUND(<column>*2, 1)/2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:17:09.607

您的问题有点复杂，但您不想使用光标。

```
update t
    set val = (case when floor(num*100)%10 in (0, 1, 2)
                    then (floor(num*100) - floor(num*100)%10)/100.0
                    when floor(num*100)%10 in (3, 4, 5, 6, 7)
                    then (floor(num*100) - floor(num*100)%10)/100.0 + 0.05
                    when floor(num*100)%10 in (8, 9)
                    then (floor(num*100) - floor(num*100)%10)/100.0 + 0.1 
               end) 
```

您可以通过将 case 放在 select 语句中来查看值。

# php - 如何使用 Facebook PHP 图形 API 获取用户图片？

> ID：11530880
> 
> 赞同：0
> 
> 时间：2012-07-17T21:06:19.223
> 
> 标签：php, facebook, facebook-graph-api

当我打电话`$facebook->api('/me?fields=picture');`

我得到的只是一个数组。如何获取实际的图像数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:09:32.280

你试过/我/图片吗？

`http://graph.facebook.com/USER_ID/picture`应该管用。这将返回引用 50x50px jpg 的 URL。您还可以像这样表示类型：

`http://graph.facebook.com/USER_ID/picture?type=large`

`http://graph.facebook.com/USER_ID/picture?type=small`

这是一个现场演示（[检查来源以获取证据](https://stackoverflow.com/revisions/4d8da509-71dd-43f3-9e61-49cc0d72ec02/view-source)） -

![](../Images/5edf2780df5f802f78381e53717bfb80.png)
享受！

# javascript - 表单提交的自定义帖子字符串

> ID：11530891
> 
> 赞同：0
> 
> 时间：2012-07-17T21:07:11.783
> 
> 标签：javascript, jquery, forms, post, submit

我有一个表单，其中包含名字和姓氏等输入部分

```
input type="text" class="int-input-medium" name="First" value="" 
```

如果有人输入名字“John”

如何创建帖子字符串？

```
 http://XXXXXXXXX.com/api/test.ashx?First=John 
```

我是否创建了一个 javascript，如果可以，我可以获得一个示例或我应该使用的任何其他代码类型。我需要它使用提交按钮吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:12:23.830

首先 POST 值是隐藏的，我认为你想要一个 GET 表单。如果您在表单标题中告诉您的表单执行此操作，它将为您提供您想要的内容。

```
<form action="someDumbAction" method="GET" name="someDumbName"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:20:14.377

**或者**你想要这条线上的东西吗？即制作你的网址`:)`

**工作演示** [http://jsfiddle.net/ppQBK/](http://jsfiddle.net/ppQBK/)

希望对你有帮助`:)`

**代码**

```
$(document).ready(function() {
     $('.button').click(function() {

         var goUrl = 'http://mysite.com/'+ $('#foo').val();
         alert(goUrl);
          window.location = goUrl;
          return false;  // Prevent the default button behaviour
         // or use e.preventDefualt(); API
     });

}); 
```

# c++ - 哪种类型的继承更可取？

> ID：11530892
> 
> 赞同：7
> 
> 时间：2012-07-17T21:07:33.890
> 
> 标签：c++, design-patterns, inheritance

实现第二种情况的唯一要点是如果我想从 Collidable 派生而不是 Object？如果是这种情况，那么第一种情况何时是有利的，因为第二种情况提供了更大的灵活性。

两个可碰撞对象都只有一个纯虚函数，而 Object 是可以在屏幕上绘制的对象的基类（在我的例子中）。

^假设我正确理解了以下代码（我不太确定 TBH）

```
class Object
class CollidableObject : Object
class Actor : public CollidableObject

class Object
class Collidable
class Actor : public Object, public Collidable 
```

编辑：

基于马特/赛斯

```
class Object
class Collidable
class Clickable
class Trackable
class BlowUppable
class Actor : public Object, public Collidable, public Clickable, public Trackable,
              public BlowUppable

class SomeObjectThatIsTakenForGrantedThatEverythingElseIsInherited : public Actor 
```

第一个例子是第二种情况，第二个例子是第一种情况。我想这是我在第一种情况下看到的唯一用途。

@Luchian
这将是一个与原始问题不同的问题，因为您的回答都不是。

在这种情况下，将对象从 is-a 更改为 has-a 关系是否有区别？在每种情况下，为了检查碰撞，一个对象必须有一个标志来知道是否应该检查碰撞。在您的情况下，可以检查成员是否为空，但在派生情况下，对象本身会告诉它是否可以碰撞。在数组/树中，我可以将派生对象作为参数传递，也可以使用 get() 方法将 hitbox 作为参数传递。

为了更深入，我还有另一门课——使用第二种情况

```
class Hitbox : public Object, public Collidable 
```

并且 Actor 类将其作为成员

```
class Actor : public Object
{
     Hitbox *box;
}; 
```

有碰撞的物体会有一个碰撞箱，我认为这准确地代表了你的帖子。但是仍然让我感到困惑的是，当我再次查看您的示例时，这是否意味着 Hitbox 应该有一个 Collidable 成员？

```
class Hitbox
{
     Collidable *collision;
}; 
```

我所拥有的：
Actor 拥有一个处理碰撞的 Hitbox

Hitbox 应该做什么：
继承 Collidable 或
将 Collidable 作为成员

演员已经在遵循你的约定。Hitbox 也应该这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:10:18.903

我会做第二种情况，就像`Object`横切`Collidable`关注点一样。如果你走这`CollidableObject`条路，你最终可能会遇到类的组合爆炸。很快你就会看到一个`CollidableTrackableClickableBlowuppableObject`。

由于`Collidable`是纯虚拟的，在这种情况下它被用作接口，因此没有很多反对多重继承的批评。您只是在声明一个 Actor 实现了`Collidable`接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:42:22.397

这是[**策略模式**](http://en.wikipedia.org/wiki/Strategy_pattern)的完美场景。这就是英语在我们脑海中戏弄的地方，让我们认为这`CollidableObject`是这个层次结构中的一个有效对象。我说碰撞更像是一种行为而不是物体，所以我不会选择两者。

首选组合：

```
class Object
{
   CollidableBehavior* collisionBehavior;
}
class Actor : Object
{
   // collisionBehavior = new ActorCollision()
}

class AClassThatDoesntCollide
{
   // collisionBehavior = NULL
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:05:24.713

> 实现第二种情况的唯一要点是如果我想从 Collidable 派生而不是 Object？

是的，第二种情况为您提供了更大的灵活性，因为它允许分离接口。例如，稍后您可能想要一个可碰撞但不可绘制的对象。

> 自从第 2 种情况提供更大的灵活性以来，第一种情况何时是有利的。

第二种情况提供了更大的灵活性，但设计起来也更复杂。最后，您将需要虚拟继承，这更难处理。但是，如果您的基类是纯抽象的，那应该不是问题。

你可能会看到[这个](http://www.gotw.ca/gotw/037.htm)。

# iphone - 通过 Safari 读取 iPhone UDID

> ID：11530895
> 
> 赞同：0
> 
> 时间：2012-07-17T21:07:51.090
> 
> 标签：iphone

我正在尝试通过 Safari 浏览器阅读 iPhone UDID，下面的地址是如何使它变得更清晰的手册。

[https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/profile-service/profile-service.html#//apple_ref/doc/uid/TP40009505-CH2-SW26](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/profile-service/profile-service.html#//apple_ref/doc/uid/TP40009505-CH2-SW26)

我想我应该使用某种 PHP，但是他们描述的语言不是 PHP。

这是代码之一。

```
world.mount_proc("/enroll") { |req, res|
HTTPAuth.basic_auth(req, res, "realm") {|user, password|
    user == 'apple' && password == 'apple'
}

res['Content-Type'] = "application/x-apple-aspen-config"
configuration = profile_service_payload(req, "signed-auth-token")
signed_profile = OpenSSL::PKCS7.sign(@@ssl_cert, @@ssl_key, 
        configuration, [], OpenSSL::PKCS7::BINARY)
res.body = signed_profile.to_der

} 
```

这是什么语言？

# ruby-on-rails - 使用默认值和新对象的 Rails 序列化

> ID：11530900
> 
> 赞同：4
> 
> 时间：2012-07-17T21:08:20.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, serialization

又一个 Rails[序列化](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)问题。我已经阅读了很多这些并且找不到我的问题的答案，所以这里是：

我有典型的：

```
class User < ActiveRecord::Base
  serialize :prefs, Hash 
```

在我的迁移中（感谢[这个](https://stackoverflow.com/questions/4943435/default-for-serialized-column-in-activerecord-migration#answer-4943878)问题+答案）：

```
add_column :user, :prefs, :text, default: { foo: 'bar' }.to_yaml 
```

现在，当我加载现有用户时：prefs 被反序列化：

```
User.first.prefs[:foo] # returns 'bar'
User.first.prefs.class # returns Hash
User.first.prefs       # returns {:foo => "bar"} 
```

所以它工作完美！但是当我创建一个新的时：

```
User.new.prefs[:foor]  # TypeError: can't convert Symbol into Integer
User.new.prefs.class   # returns String
User.new.prefs         # returns "---\n:foo: bar\n" 
```

如果没有这些，是否有可能让它工作？

*   `after_initialize :method`
*   像[default_value_for这样的宝石](http://rubygems.org/gems/default_value_for)
*   压倒一切`initialize`

我真的想让它只使用数据库默认值。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:39:53.810

当我在 Rails 控制台（Rails 3.2.6，Ruby 1.9.3-p194）中执行以下操作时：

```
u=User.new(:prefs=>{:foo2=>"bar2"}) 
```

我回来了：

```
=> #<User id: nil, name: nil, prefs: {:foo2=>"bar2"}, created_at: nil, updated_at: nil> 
```

所以我认为这是你想要的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:14:33.793

从未发现导致此行为失败的原因，但一切都适用于 Rails 3.2.13。使用`serialize :prefs, Hash`：

```
[1] pry(main)> User.new
=> #<User id: nil, prefs: {:foo=>"bar"}, created_at: nil, updated_at: nil>
[2] pry(main)> User.new.prefs
=> {:foo=>"bar"} 
```

并使用`store :prefs, accessors: [:foo]`：

```
[1] pry(main)> User.new
=> #<User id: nil, prefs: {:foo=>"bar"}, created_at: nil, updated_at: nil>
[2] pry(main)> User.new.foo
=> "bar" 
```

我的迁移是：

```
add_column :user, :prefs, :text, default: { foo: 'bar' }.to_yaml 
```

# java - ImageIO 无法将缓冲图像写入文件

> ID：11530901
> 
> 赞同：5
> 
> 时间：2012-07-17T21:08:23.530
> 
> 标签：java, file, jpeg, javax.imageio

我在将缓冲图像写入`jpg`文件时遇到了一些问题。在我的方法中，我得到了一个`bufferedimage`as 参数，我需要将其写入文件 -

这就是我正在做的事情：

```
public boolean writeToFile(BufferedImage buff,String savePath) {

        try {

            System.out.println(buff.toString());
            ImageIO.write(buff, ".jpg", new File(savePath));
            return true;
        } catch (Exception e) {
            e.printStackTrace();
        } 
   } 
```

这是打印的内容`buff.toString()`：

```
BufferedImage@8046f4: type = 1 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=0 IntegerInterleavedRaster: width = 1024 height = 172 #Bands = 3 xOff = 0 yOff = 0 dataOffset[0] 0 
```

程序运行正常，没有任何异常，但生成的 jpg 文件大小为`0 bytes`

我尝试在不使用 ImageIO 的情况下编写图像：

```
public boolean writeToFile(BufferedImage buff,String savePath) {

        try {

            System.out.println("got image : " + buff.toString());
            Iterator iter = ImageIO.getImageWritersByFormatName("jpeg");
            ImageWriter writer = (ImageWriter)iter.next();
            ImageWriteParam iwp = writer.getDefaultWriteParam();

            iwp.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
            iwp.setCompressionQuality(.5f); 

            File file = new File(savePath);
            FileImageOutputStream output = new FileImageOutputStream(file);
            writer.setOutput(output);
            IIOImage image = new IIOImage(buff, null, null);
            writer.write(null, image, iwp);
            writer.dispose();

            return true;
        } catch (Exception e) {
             e.printStackTrace();
        }

        return false;
    } 
```

这绝对没问题。

为什么它不适用于 ImageIO ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T21:11:07.037

`.`从您的格式名称中删除。

```
ImageIO.write(buff, "jpg", new File(savePath)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T21:12:47.740

信不信由你，就是这个`".jpg"`，把它改成“jpg”就可以了。

我有同样的问题，但我查看了[ImageIO](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File%29)，发现了这个[链接](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)。

# log4net - 为什么 log4net 不记录我的堆栈跟踪？

> ID：11530905
> 
> 赞同：3
> 
> 时间：2012-07-17T21:08:45.123
> 
> 标签：log4net

使用首选形式

```
_log.Error("Message", exception) 
```

不记录我的堆栈跟踪。为了解决这个问题，我必须确保 .ToString() 通过执行以下操作来调用异常。

```
_log.Error("Message" + exception); 
```

但我知道那是错误的，只是我无法使正确的版本工作。我需要在我的 log4net.xml 文件中添加一个特殊的行来完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:33:04.103

I wanted to provide my eventual answer, just for reference. I had implemented an asynchronous appender scheme for log4net using my answer to the SO question [How do I create an asynchronous wrapper for log4net?](https://stackoverflow.com/questions/7044497/how-do-i-create-an-asyncronous-wrapper-for-log4net)

I noted in my response that you need to be careful about the FixFlags, because anything not in the FixFlags will get dropped from the original logging event. Unfortunately, I did not add FixFlags.Exception to my original solution, so any exceptions generated get dropped during the forwarding process.

Changing my FixFlags from

```
loggingEvent.Fix = FixFlags.ThreadName; 
```

To

```
loggingEvent.Fix = FixFlags.ThreadName | FixFlags.Exception; 
```

Fixed the issue.

# html - 在表格中对齐的问题

> ID：11530910
> 
> 赞同：0
> 
> 时间：2012-07-17T21:09:12.257
> 
> 标签：html, css, html-table

我有一张 8 的桌子`<td>`。所有项目都从 PHP 数组中填充。示例行如下所示：

```
(row number) (Two Chinese characters) (1-5 characters) (input box 1) (1-5 characters) (input box 2) (1-5 characters) (submit button) 
```

目前所有八个`<td>`垂直对齐，但我想让 td 项目 6（输入框 2）和 7（1-4 个字符）在输入框 1 旁边对齐，因此之间没有空格

为了更清楚地说明这一点，请考虑这两行的显示方式。

```
1\.  喘氣  a ____ bc    ____ de  SUBMIT
2\.  留學 ab ____ cdefa ____ gh  SUBMIT 
```

注意到第 6 项和后面的输入框之间的巨大差距了吗？

我需要我的看起来像这样：

```
1\.  喘氣  a ____ bc ____ de     SUBMIT
2\.  留學 ab ____ cdefa ____ gh  SUBMIT 
```

关于我如何做到这一点的任何想法？我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:21:14.833

除非您开始使用一些非常复杂`colspan`的属性，否则您将无法仅使用`<td>`元素来做到这一点。

相反，您需要将所有想要的项目放在一个`<td>`元素中，而将所有其他项目放在自己的`<td>`元素中。

要使用您的示例...

```
<tr>
  <td>(row number)</td>
  <td>(Two Chinese characters)</td>
  <td>(1-5 characters)</td>
  <td>(input box 1)</td>
  <td>(1-5 characters) (input box 2) (1-5 characters)</td>
  <td>(submit button)</td>
</tr> 
```

# c++ - 将 COM 接口指针传递给函数

> ID：11530919
> 
> 赞同：0
> 
> 时间：2012-07-17T21:09:42.827
> 
> 标签：c++, pointers

我希望有人可以帮助解决这个问题。我也希望这个问题有一个简单的答案。我觉得我遗漏了一些非常明显的东西，但我是 C++ 新手，无法解决这个问题。

我想将 IUpdateCollection 传递给函数，将 IUpdates 放入集合中，然后能够在函数之外访问集合。在下面的代码中，一切都编译/运行，但是在 Searcher 函数内部时 IUpdateCollection 中的项目计数为 5，但是当我稍后尝试从函数外部计算 IUpdateCollection 中的项目时，计数为 0。

我在这里想念什么？

谢谢！

```
class W
{
public:
    // constructor
    W()
    {       
        //create the COM object to return the IUpdateSession interface pointer
        hr = CoCreateInstance( )
    }

    int Searcher(IUpdateCollection* pUpdateCollection)
    {                           

        //put the updates into our pUpdateCollection
        hr = pSearchResult->get_Updates(&pUpdateCollection);
        if(FAILED(hr) || pUpdateCollection == NULL)
        { cout << "Failed to put updates in the collection"; return -103; };

        long lUpdatesCount = NULL;
        hr = pUpdateCollection->get_Count(&lUpdatesCount);
        if(FAILED(hr) || pSearchResult == NULL)
        { cout << "Failed to get count of udpates in collection"; return -104; };

        cout << lUpdatesCount << endl;  //console outputs the actual count here, which at the moment is 5

        pUpdateSearcher->Release();     
        return 0;
    }
private:
    HRESULT hr;
    IUpdateSession* pUpdateSession; 
};

int main(int argc, char* argv[])
{
    CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);

    HRESULT hr;

    W myW;
    //pass the pUpdateCollection to the W.Searcher function
    myW.Searcher(pUpdateCollection);

    //get count of updates in collection
    long lUpdatesCount = NULL;
    pUpdateCollection->get_Count(&lUpdatesCount);

    cout << lUpdatesCount << endl;  //console outputs 0 here instead of the same count that it outputted in W.Searcher().  WHY?
    CoUninit();

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:23:35.443

使用 和 之类的智能[`_com_ptr_t`](http://msdn.microsoft.com/en-us/library/417w8b3b%28v=vs.80%29.aspx)指针[`_bstr_t`](http://msdn.microsoft.com/en-us/library/zthfhkd6%28v=vs.80%29)。使用原始指针并直接操作 BSTR 无非是痛苦。

[`#import`](http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=vs.100%29.aspx)- 使用 COM DLL 将为您创建类型化的智能指针，包括易于使用的 CreateInstance 方法。智能指针还消除了在每次调用后显式检查 HR 的需要，它们会引发异常。

至于您的问题：这取决于您的 COM 对象的实现/规范/文档。也许发布`IUpdateSearcher`清除计数，但这只是我的猜测。相关代码将是 COM 服务器，而不是客户端。

*没有注意到这是 WUA，记录了行为*

[`ISearchResult::Updates`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386081%28v=vs.85%29.aspx) *分配*IUpdateCollection。因此，您传入指针的值，在函数范围内更改它，然后期望更改应用于范围之外。你正在做同样的事情，但使用 int：

```
void f(int a)
{
  a=5;
}

void main()
{
  int a = 7;
  f(a);
  printf("%d", a); -- of course is 7, not 5
} 
```

`int`您可以通过传递 ref 或指针来解决“问题” 。这同样适用于您的 COM 指针。并且使用 _com_ptr_t 会清楚地表明问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:41:05.693

Updates 属性[返回一个 IUpdateCollection 指针](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386081%28v=vs.85%29.aspx)，它将 pUpdateCollection 参数的内容覆盖到您的 Searcher() 方法中。您在 Searcher 中检查的计数是该集合的计数。

但是您按值传递了 pUpdateCollection，因此当您退出 Searcher 时，由 get_Updates() 检索到的 IUpdateCollection 将被丢弃。

要查看这一点，请在您的 get_Updates() 调用上放置一个断点，并在您跨过 get_Updates 调用时观察 pUpdateCollection 的值的变化。然后退出 Searcher 并注意 main 的 pUpdateCollection 中的值没有改变。

# javascript - 谷歌浏览器中没有 www 子域的页面显示不同

> ID：11530920
> 
> 赞同：0
> 
> 时间：2012-07-17T21:09:42.967
> 
> 标签：javascript, html, css, google-chrome, web

我不确定它是什么，但是没有 www 子域的页面呈现非常不同，我认为这与我隐藏的 div jQuery 布局有关。有任何想法吗？

在 ie / firefox / android webkit 浏览器中工作正常。只是不能在 Chrome 中工作？？

试试没有 www。首先然后添加www。你会看到（如果你反过来，它会正确呈现，只需关闭标签并打开新标签）。

[http://josefscountryinn.com/](http://josefscountryinn.com/)

谢谢你！

*编辑*不再是 www 问题，它有时会在刷新时正确呈现 chrome 如何呈现页面

这是 chrome left firefox right 的屏幕截图（无法发布屏幕截图，因为我是新的）

[http://www.josefscountryinn.com/sc1.jpg](http://www.josefscountryinn.com/sc1.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:14:15.490

在我看来是一样的。您始终可以强制它具有 www 或不具有它。如果您希望它强制没有 www，则将以下代码添加到 .htaccess。

```
RewriteEngine on
RewriteCond %{http_host} ^www.josefscountryinn.com [nc]
RewriteRule ^(.*)$ http://josefscountryinn.com/$1 [r=301,nc] 
```

# php - 从函数内部检测前缀/运算符

> ID：11530926
> 
> 赞同：0
> 
> 时间：2012-07-17T21:10:02.797
> 
> 标签：php, function, operators, prefix

例子：

```
function foo($whatever){
  // ... do stuff here
}

// call the function
+foo(1234); 
```

`+`如果使用(or `-`, `!`etc)调用它，我可以从我的函数中找出它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:12:35.673

未使用 调用该函数`+`。调用该函数，然后将结果用作 的操作数`+`。

所以不行。

# c - 如何从ac程序准确复制linux上的文件

> ID：11530930
> 
> 赞同：1
> 
> 时间：2012-07-17T21:10:11.167
> 
> 标签：c, linux, file, copy

确切地说，我的意思是保留稀疏文件中的漏洞和所有扩展属性，以捕捉目标文件系统不支持或不完全支持它们的情况（例如不同的 EA 长度）？在挂载的 NTFS 文件系统上，它也应该与备用流一起使用。尽可能多地保留文件属性。

进度 GUI 也需要回调。这似乎很难维护，所以我想已经有一些东西可以使用，比如 Windows 上的 SHFileOperation。

我查看了 GLIB，他们以最简单的方式使用打开/读取/写入/关闭顺序进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-09T12:31:07.173

*sendfile*根本不处理稀疏文件，至少在 Linux 4.4 和更早版本上是这样。从 Linux 4.5 开始，有一个新的系统调用[copy_file_range](http://man7.org/linux/man-pages/man2/copy_file_range.2.html)为您隐藏了所有细节。

对于早期版本，这是[我通过](https://github.com/SkyLandTW/JXTN/blob/master/jxtn-core-unix/src-jni/files2.c)*lseek*和*SEEK_HOLE*复制带有孔的文件内容的工作示例。它与*cp*中的实现不同，后者从源读取所有内容并跳过全零块，因此在目标中创建孔但仍然浪费时间从源读取孔。但是，即使某些文件系统已经支持稀疏文件，它们也很可能不支持*SEEK_HOLE*，在这种情况下，我的代码最终会创建非稀疏文件。

至于扩展属性，你真的必须调用*listxattr*，然后自己通过*getxattr* / *setxattr*复制每个扩展属性。

Nano 时间戳可以通过*utimensat* /futimens*设置

# android - 如何获得位图的水平和垂直分辨率？

> ID：11530935
> 
> 赞同：0
> 
> 时间：2012-07-17T21:10:39.057
> 
> 标签：android

我正在尝试查找位图水平和垂直分辨率 (dpi)。我需要这些信息来正确剪辑我的位图。我已经有了位图的宽度和高度，这是唯一缺少的信息。我得到的（错误）输出是剪裁已关闭。这是我的例子。它在我需要位图垂直和水平分辨率的代码中用“（缺失）”标记。

```
final Bitmap clippedBmp;
final Rect<Double> clipRectInInches = imageScaleInPixelAndInches.getClipRect();
final Rect<Integer> clipRectInPixel = new Rect<Integer>();

clipRectInPixel.setX     ((int)(clipRectInInches.getX()      * (Missing)));
clipRectInPixel.setY     ((int)(clipRectInInches.getY()      * (Missing)));
clipRectInPixel.setWidth ((int)(clipRectInInches.getWidth()  * (Missing)));
clipRectInPixel.setHeight((int)(clipRectInInches.getHeight() * (Missing)));

ClipRectUtil.normalizeClipRect(clipRectInPixel, orgBmp.getWidth(), orgBmp.getHeight());
clippedBmp = Bitmap.createBitmap(orgBmp,
                                         clipRectInPixel.getX(),
                                         clipRectInPixel.getY(),
                                         clipRectInPixel.getWidth(),
                                         clipRectInPixel.getHeight()); 
```

这是 normalizeClipRect 函数

```
public static void normalizeClipRect(Rect<Integer> clipRectInPixel, int imgWidth, int imgHeight)
{
    int clipX      = clipRectInPixel.getX();
    int clipY      = clipRectInPixel.getY();
    int clipWidth  = clipRectInPixel.getWidth();
    int clipHeight = clipRectInPixel.getHeight();

    if ( clipX < 0 )
        clipX = 0;
    if ( clipY < 0 )
        clipY = 0;

    if ( clipX > imgWidth )
        clipX = imgWidth;
    if ( clipY > imgHeight )
        clipY = imgHeight;

    if ( clipX + clipWidth > imgWidth )
        clipWidth = imgWidth - clipX;
    if ( clipY + clipHeight > imgHeight )
        clipHeight = imgHeight - clipY;

    // update in-place
    clipRectInPixel.setX     (clipX);
    clipRectInPixel.setY     (clipY);
    clipRectInPixel.setWidth (clipWidth);
    clipRectInPixel.setHeight(clipHeight);
} 
```

我提前谢谢你。如果需要更多信息，请告诉我。

再次感谢，

马克

# cakephp - cakephp 2.0 致命错误：在非对象上调用成员函数 sort()

> ID：11530940
> 
> 赞同：0
> 
> 时间：2012-07-17T21:10:59.317
> 
> 标签：cakephp

尝试尽可能具体，因为我上次发布内容时被猛烈抨击！

用户进行身份验证，然后在 AppController 中我将它们路由到一个名为 Owners 的控制器，操作是下面的索引代码

```
 public $components = array(                                                                         
  'Session',                                                                                    
  'Auth' => array(                                                                              
    'loginRedirect' => array('controller' => 'Owners', 'action' => 'index')                     
) 
```

我是 Cake 的新手，但我的猜测是当所有者控制器触发索引函数中的代码时，它什么也不返回，这就是我在视图中收到致命错误消息的原因。（我正在阅读 Cakephp 2.0 食谱），是的，所有者表中有几个所有者，所以它不是空的。

mysql> 从所有者中选择 *；
+----+------------+--------------+----------+------- -------------+---------+---------+--------+------- ------+---------+------------+-------------+
| 编号 | 名字 | 中间名 | 姓氏 | 街道地址 | 城市| 邮政编码 | 状态 | 电话号码 | 用户 ID | 车辆编号 | 引用ID |
+----+------------+--------------+----------+------- -------------+---------+---------+--------+------- ------+---------+------------+-------------+
| 1 | 马克 | 沃尔特 | 辛普森 | 第1234章 安东 | 12345 | 葛 | 916123 456 | 1 | 空 | 空 |
| 2 | 弗兰克 | 多思米勒 | 弗兰克 | 2878 邦莱街 | 弗雷斯诺 | 95758 | 钙 | 916551 0234 | 3 | 空 | 空 |
| 3 | 托伦 | W | 瓦隆 | 8252盲栎路| 贝尔福尔 | 3889 | 加州 | 917838 8 | 1 | 空 | 空 |
| 4 | 托伦 | W | 瓦隆 | 8252盲栎路| 贝尔福尔 | 3889 | 加州 | 917838 8 | 1 | 空 | 空 |
+----+------------+--------------+----------+------- -------------+---------+---------+--------+------- ------+---------+------------+-------------+
4 行在集合中 (0.00秒）

在 Owners 控制器中，我将以下代码放入 index 函数中，

```
 public function index() {                                                                   

          $this->set('owners', $this->Owner->find('all'));                                      
    } 
```

当我以用户身份登录时，我得到了这个，所有者

注意（8）：未定义属性：View::$Paginator [CORE/Cake/View/View.php, line 804]

致命错误：在第 5 行的 /srv/www/www.cross-town-traffic-software.com/public_html/freecite/app/View/Owners/index.ctp 中的非对象上调用成员函数 sort()

这是所有者目录中 index.ctp 文件的第五行

```
<th><?php echo $this->Paginator->sort('id');?></th> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:28:18.560

您正在尝试在视图中使用 PaginatorHelper，但尚未包含它。

添加

```
public $helpers = array('Paginator'); 
```

到您的控制器。有关 Helpers 的背景知识以及如何在视图中使用它们，[请参阅 Cookbook 。](http://book.cakephp.org/2.0/en/views/helpers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T23:06:47.327

在控制器中，您必须添加

```
public $components = array('Paginator'); 
```

代替

```
public $helpers = array('Paginator'); 
```

# c# - ServiceStack OrmLite Sql 查询日志

> ID：11530943
> 
> 赞同：10
> 
> 时间：2012-07-17T21:11:07.210
> 
> 标签：c#, servicestack, ormlite-servicestack

根据[服务堆栈 Ormlite 文档](https://github.com/ServiceStack/ServiceStack.OrmLite)。我应该在调试模式下生成 sql 查询。但是，我看不到这些查询。简单的代码

```
 private static readonly string DataDirLoc =
        Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) +
        "\\TargetIntegration\\Test\\Debug\\";

    private readonly string dbFileName = DataDirLoc +
                                              "Test.db3";

    [Test]
    public void Can_Generate_log() {
        //var writer = new TextWriterTraceListener(System.Console.Out);
        //Debug.Listeners.Add(writer);
        Debug.Write("this is a try");
        var dbFact = new OrmLiteConnectionFactory("Data Source={0};Version=3;".FormatParams(dbFileName), true,
                                                  SqliteOrmLiteDialectProvider.Instance);
          IDbConnection dbConnection = dbFact.OpenDbConnection();
       var dbCommand = dbConnection.CreateCommand();
        dbCommand.CreateTable<Contact>();
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T21:41:05.163

您需要 OrmLite 的调试版本才能查看 SQL 输出。您可以通过其他几种方式查看最后一条 sql：

```
Console.WriteLine(dbCmd.GetLastSql()); 
```

您还可以通过设置连接过滤器来分析数据库连接，您可以这样做：

```
var dbFact = new OrmLiteConnectionFactory(
   "Data Source={0};Version=3;".Fmt(dbFileName), true, 
   SqliteOrmLiteDialectProvider.Instance) {
   ConnectionFilter = x => new ProfiledDbConnection(x, Profiler.Current)
}; 
```

如果您在[ServiceStack](http://www.servicestack.net)中运行它，您将看到所有 SQL 语句的分析时序输出。此处提供了一个示例：

[https://gist.github.com/1787443](https://gist.github.com/1787443)

# javascript - 在 javascript 中填充对象数组

> ID：11530944
> 
> 赞同：5
> 
> 时间：2012-07-17T21:11:10.517
> 
> 标签：javascript

假设我有一个对象 Airport ，其成员有 airportCode 和 airportCity ，如下所示：

```
function Airport(airportCode, airportCity) {
        this.airportCode = airportCode;
        this.airportCity = airportCity;
    }; 
```

如何创建可以添加的对象数组 Airport。在 Java 中，这将像这样工作：

```
while(st.hasMoreTokens()) {
    Airport a = new Airport();
    a.airportCode = st.nextToken();
    a.airportCity = st.nextToken();
    airports.add(a);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T11:43:56.337

一个非常简短的答案：

```
airports.push(new Airport("code","city")); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T21:13:44.913

试试这个：

```
function Airport(airportCode, airportCity) {
        this.airportCode = airportCode;
        this.airportCity = airportCity;
};

var dataArray = [];

for(var i=0; i< 10; i++){
    dataArray[i] = new Airport("Code-" + i, "City" + i);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T21:24:21.800

并没有那么不同

```
var airports = [];
while (st.hasMoreTokens()) {
    var a = new Airport();
    a.airportCode = st.nextToken();
    a.airportCity = st.nextToken();
    airports.push(a);
} 
```

# string - 模式匹配和字符串操作

> ID：11530947
> 
> 赞同：0
> 
> 时间：2012-07-17T21:11:13.440
> 
> 标签：string, batch-file, file-read

我正在为下载字幕的文件夹制作文件监视器。到目前为止，它是这样工作的：

在文件夹中寻找新的 .rar 文件。

如果找到，提取字幕并删除 .rar 文件

如果提取了单个 .srt 文件，请将文件名保存到变量中。

* * *

现在，我对如何实现脚本的下一个（也是最后一个）部分一无所知：

我想根据字幕的命名方式找到一种模式。

假设，字幕文件可以是这样的：

SomeShow.1x03.stuff.srt

some_show s01e03-stuff.srt

有些显示 1-03 stuff.srt

等等

我想得到类似的东西： SomeShow 1 3 并在此基础上，以与该模式匹配的名称开始视频，我想这将是一个颠倒用于获取节目、季节和剧集的过程的问题.srt 文件的名称。

这可能吗？在大多数语言中这将是非常简单的东西，但我真的需要它成为一个 .bat 并且我对如何解决这个问题一无所知......到目前为止，我所做的只是从多变的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:34:40.327

批处理文件是图灵完备的——你可以在其中做任何事情，但走极端通常是不明智的。您可能可以将一个`sed`或`grep`您自己的二进制文件与您的`.bat`文件一起打包，以便在批处理和功能之间取得良好的折衷。如果您可以假设一个合适的操作系统，您将安装 Powershell 并走这条路。

您应该认识到该任务并未完全定义，并且“解决方案”可能需要一些调整并且永远不够健壮。

出于这个原因，你可以选择的语言越丰富，你就会走得越远。

# php - 这可以工作吗？（列中有多个 ul）

> ID：11530952
> 
> 赞同：-1
> 
> 时间：2012-07-17T21:11:25.563
> 
> 标签：php, mysql, css, internet-explorer

可以为 safari 和 firefox 使用 css3 的东西，但不会有它的一部分。我正在输出一个购物类别和子类别的列表，每个列表都有一个单独的列表。

这就是我所拥有的（到目前为止还没有工作）。任何帮助都会受到欢迎。

```
<div style="float:left; width: 232px;">
<?
$rowcount = 1;                          
$strSql = "SELECT * FROM Category ORDER BY CategoryName ASC";
$r = $db->select($strSql);
while ($row=$db->get_row($r, 'MYSQL_ASSOC')) {  
    $CategoryID = $row['CategoryID'];
    $CategoryName = $row['CategoryName'];
    ?>
     <div style="width: 232px; background-color:#f2f2f2; padding: 5px; margin-top: 5px; -webkit-border-radius: 4px; border-radius: 4px; overflow:hidden; padding-left: 5px;">
          <h1><a href="/<?=$colour?>/<?=$CategoryURL?>/" ><?=$CategoryName?></a></h1>
            <ul>
                  <?                        
                  $strSql2 = "SELECT 
                  SubCategory.SubCategoryID,
                  SubCategory.SubCategoryName,
                  SubCategory.SubCategoryURL,
                  SubCategory.CategoryID
                FROM
                  SubCategory
                WHERE
                  CategoryID = $CategoryID
                ORDER BY
                  SubCategoryName";
                  // echo "<pre>$strSql</pre>";
                  $r2 = $db->select($strSql2);
                  while ($row2=$db->get_row($r2, 'MYSQL_ASSOC')) {
                      $SubCategoryID = $row2['SubCategoryID'];
                      $SubCategoryName = $row2['SubCategoryName'];
                      $SubCategoryURL = $row2['SubCategoryURL'];
                  ?>    
                  <li><a href="/<?=$colour?>/<?=$CategoryURL?>/<?=$SubCategoryURL?>/"><?=$SubCategoryName?> (<?=$rowcount?>)</a></li>
                  <?
                  $rowcount++;
                  if ($rowcount == 35) { echo"</ul></div><div style=\"float:left; width: 232px;\"><ul>"; $rowcount = 0;} 
                  } // end get SubCategory
                  ?>
               <? if ($rowcount == 0) { echo""; } else {echo"</ul>";} ?>
               </div>       
         <? } // end get category list
?>     
        </ul> <!-- END CATEGORY UL -->
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:31:53.493

另一种选择是使用基于表格的布局，在这种情况下，我认为这不会那么糟糕。表格用于表格数据，目录类别非常适合。**编辑：**但是您仍然必须弄清楚您的 PHP 逻辑才能使其正常工作。就我而言，Derp。

或者，有一个[Columnizer jQuery 插件](http://welcome.totheinter.net/columnizer-jquery-plugin/)可以自动完成这个技巧，但我不喜欢不得不依赖 javascript 驱动的布局元素解决方案。尽管您只能通过 Modernizr 为不支持您的 CSS3 方法的浏览器触发它。仍然不是这个的忠实粉丝。

您可以发布在其他浏览器中使用的 CSS3 吗？也许有一种可用的解决方法可以解决问题。对于您的最终结果，我仍然有点模糊。我专注于您问题的 CSS 方面，而不是 PHP。找到一个有效的 CSS 驱动的解决方案显然比试图找出将类别划分为相应列的逻辑要容易得多。

# xml - 关于 Jenkins JUnit XML 格式

> ID：11530955
> 
> 赞同：7
> 
> 时间：2012-07-17T21:12:12.613
> 
> 标签：xml, junit, jenkins

我正在编写一个脚本，该脚本以 Jenkins 接受的 JUnit XML 格式生成测试结果。

我阅读了 StackOverFlow 中有关此主题的一些答案：[Hudson 支持的 JUnit XML 格式规范](https://stackoverflow.com/questions/4922867/junit-xml-format-specification-that-hudson-supports) 和[规范。对于 JUnit XML 输出](https://stackoverflow.com/questions/442556/spec-for-junit-xml-output)，但这些都没有讨论“测试套件”属性或选项的细节。

我想显示“测试套件”下所有“测试套件”中“测试用例”的总数、失败的“测试用例”总数和跳过的“测试用例”总数。

IE`<testsuites *something to add here to include the info demanded*>...</testsuites>`

有没有办法做到这一点？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:45:03.883

我认为这些信息将由 Jenkins 自动计算。如果没有 - 不要费心添加它，无论如何它都不会显示。

这里有一个关于如何调试这类事情的有用提示：在 shell/batch 构建步骤中创建一个“接触”文件（我们称之为*jUnit.xml ）的作业（让我们将其命名为**jUnitReport ）；*添加“发布 JUnit 测试结果报告”并在“测试报告 XMLs”编辑框中指定*jUnit.xml 。*运行一次作业 - 这将创建其工作区。现在将要测试的有效*jUnit.xml放置在工作区中。*再次运行作业并检查测试结果的外观。

 ***重要的是不要删除“触摸”步骤 - 否则 Jenkins 会认为测试结果过时并导致构建失败。

您现在可以在不运行实际测试的情况下使用*jUnit.xml*，并检查它如何影响 Jenkins 显示的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:34:44.817

不确定你是否找到了你要找的东西。但是以下示例对我有用。

```
<testsuites tests="38" failures="2" disabled="0" errors="0" time="10.898" name="AllTests">
    <!-- Add test suite and other stuff here-->
</testsuites> 
```

这是 Jenkins 支持的。不确定哈德森是否也一样。 [https://svn.jenkins-ci.org/trunk/hudson/dtkit/dtkit-format/dtkit-junit-model/src/main/resources/com/thalesgroup/dtkit/junit/model/xsd/junit-4。 xsd](https://svn.jenkins-ci.org/trunk/hudson/dtkit/dtkit-format/dtkit-junit-model/src/main/resources/com/thalesgroup/dtkit/junit/model/xsd/junit-4.xsd)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T21:28:14.307

我已经在 python 中完成了这个。所以我可以用python告诉你。导入一个名为 xmlrunner 的包

```
import xmlrunner

class ABC(unittest.TestCase)
asserts/tests..
...

if __name__ == "__main__":
   suite = unittest.TestLoader().loadTestsFromTestCase(ABC)
   xmlrunner.XMLTestRunner().run(suite) 
```

现在在您的 jenkins 机器中转到 Post-build Actions 单击 Publish JUnit 测试结果报告旁边的复选框并提供 xml 文件的路径名。(**/test.xml)

您应该保存构建并检查您的详细结果。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T06:40:54.510

我正在寻找类似的东西，而且大多数情况下无法使用默认的 junit 插件，它不会解析这些信息

您可以查看此插件的源代码[https://github.com/jenkinsci/jenkins/blob/master/core/src/main/java/hudson/tasks/junit/SuiteResult.java#L125](https://github.com/jenkinsci/jenkins/blob/master/core/src/main/java/hudson/tasks/junit/SuiteResult.java#L125)。

您可以分叉 junit 插件并扩展它。***

# powershell - 使用 Powershell 将 ProcessParameters 运行时 (MSBuildArguments) 传递给 tfs 2010 构建定义

> ID：11530957
> 
> 赞同：1
> 
> 时间：2012-07-17T21:12:16.047
> 
> 标签：powershell, powershell-2.0

我正在使用 powershell 脚本执行构建。我需要根据传递给脚本的命令行参数传递进程参数运行时间。我正在使用 TFS 2010。

```
[void][System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.Client") 
[void][System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.Build.Client") 

$projectName = "test"
$buildName = "test.Build"   
$tfsServer="xxx" 
$tfsInstance = [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer($tfsServer) 
$buildService = $tfs.GetService([Microsoft.TeamFoundation.Build.Client.IBuildServer]) 
$buildDefinations = $buildService.QueryBuildDefinitions($projName) 
```

# 遍历所有构建以找到我们正在寻找的构建

```
foreach ($build in $buildDefinations) 
{ 
```

# 获取此构建实例的名称

```
 $bNameInstance = $build.Name

    $ClientName = "test1" #default set in the builddefination is "/p:xxx=test"

    #Get the process parameters. I need to update the default value. How can we process the dictionary and update the value
    $bMSBuildArguments = $build.ProcessParameters

    #Once setting is done."/p:xxx=test1"
    $build.ProcessParameters = $bMSBuildArguments

    [Void]$buildService.QueueBuild($build)      

} 
```

我在使用 powershell 代码更新过程参数方面需要帮助。我遇到了 C#（[http://blogs.msdn.com/b/jpricket/archive/2010/03/25/tfs2010-queuing-a-build-from-code-with-custom-process-parameter-values。 aspx) 解决方案](http://blogs.msdn.com/b/jpricket/archive/2010/03/25/tfs2010-queuing-a-build-from-code-with-custom-process-parameter-values.aspx)solution)，但无法将其转换为 Powershell

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:27:43.727

答案在提供的博客文章中。尝试这样的事情：

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.Build.Workflow")
$request = $build.CreateBuildRequest()
$process = [Microsoft.TeamFoundation.Build.Workflow.WorkflowHelpers]::DeserializeProcessParameters($build.ProcessParameters)

#make changes to your process parameters in $process
$process.Item("asdf") = "new value"

$request.ProcessParameters = [Microsoft.TeamFoundation.Build.Workflow.WorkflowHelpers]::SerializeProcessParameters($process)

$buildService.QueueBuild($request) 
```

# php - 使用 PHP 从标签中提取内容

> ID：11530959
> 
> 赞同：-2
> 
> 时间：2012-07-17T21:12:28.393
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

给定一个 HTML 文件，如何使用 PHP 从`<font>`文档中的每个标签中提取字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:14:42.137

在这种情况下，有许多 PHP 库可以帮助您。

**SimpleXML**：[https ://php.net/manual/en/book.simplexml.php](https://php.net/manual/en/book.simplexml.php)

**PHP 的 XML 解析器**： http: [//php.net/manual/en/book.xml.php](http://php.net/manual/en/book.xml.php)

只需使用这些库并表示标签（在您的示例中`font`），您就可以相应地提取字符串内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:48:59.780

例如，您可以使用 PHP 的[`DOMDocument`](http://php.net/DOMDocument)类来提取内容，如下所示：

```
$html = '<font>Hello</font> <font>, World!</font>';

$doc = new DOMDocument();
$doc->loadHTML( $html);

foreach( $doc->getElementsByTagName( 'font') as $node) {
    echo $node->nodeValue;
} 
```

这将打印标签的内部值`<font>`，因此它将[输出](http://viper-7.com/vwSd4P)：

```
Hello, World! 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T21:14:41.960

使用dom解析器..

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)就是一个例子。

# apache - 使用 http 和 https 通过 htaccess 授权访问

> ID：11530963
> 
> 赞同：0
> 
> 时间：2012-07-17T21:12:37.700
> 
> 标签：apache, .htaccess, https, lamp

我已经寻找解决方案但没有找到明确的答案 - 这有点超出我的领域，但我需要在紧要关头找到答案。

我使用 .htaccess 来验证并允许从外部链接访问某些网页。这是我使用的示例：

```
AuthUserFile /dev/null
AuthGroupFile /dev/null

RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://www.website_abc.com/
RewriteCond %{HTTP_REFERER} !^http://www.website_xyz.com/

RewriteRule /* http://www.mysite.com/denied_message.php [R,L] 
```

这可以按我的意愿工作 - 我列出了我想要访问的站点并将 .htaccess 停在根目录中。

我的问题是，当有人从 HTTPS 链接时，即使他们在列表中，它也会阻止他们（我也尝试将 https 放入列表中）。我找到了各种答案，但没有一个是我完全理解的或能解决问题的。

一个正在使用：

```
RewriteCond %{HTTPS} on 
```

但这允许任何人从任何位置进入。

有人可以为我拼出这个吗？

阿帕奇/灯

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:53:47.563

```
RewriteCond %{HTTPS} on 
```

This adds a condition that the actual request for your site is through HTTPS. You only want to match the referer. I'm not sure what you've tried as far as adding `https://` versions of what you have in your referer checks, but this works when I put them in a blank htaccess file:

```
RewriteEngine On

RewriteCond %{HTTP_REFERER} !^http://www.website_abc.com/
RewriteCond %{HTTP_REFERER} !^http://www.website_xyz.com/
RewriteCond %{HTTP_REFERER} !^https://www.website_abc.com/
RewriteCond %{HTTP_REFERER} !^https://www.website_xyz.com/

RewriteRule /* http://www.mysite.com/denied_message.php [R,L] 
```

# javascript - 用 javascript 隐藏一个谷歌可视化列

> ID：11530964
> 
> 赞同：0
> 
> 时间：2012-07-17T21:12:42.163
> 
> 标签：javascript, html

我正在使用 Google Visualization API 编写一个 JavaScript 网络工具。我想要的功能之一是点击列的选项，并有一个**是**-**否**选项。**选择“是**”时，该特定列将被隐藏。我添加了这个监听器，以及这个隐藏列的函数：

```
 /* Define a table */
    var table = new google.visualization.ChartWrapper({
      'chartType': 'Table',
      'containerId': 'chart2',
      'options': {
        'sortColumn': '-1',
        'allowHtml' : 'true',
      },
      'style' : {
            'white-space' : 'nowrap'
      }
    });

    google.visualization.events.addListener(table, 'select',
            function (){
                var tablewrapper = table.getChart();
                //var columnId = tablewrapper.getColumnDescriptions();
                //console.log(tablewrapper);
                /*var columnIndex = tablewrapper.getViewColumnIndex(); */
                var selection = tablewrapper.getSelection();
                for(var i = 0; i < selection.length; i++){
                    var item = selection[i];
                    console.log('{row:' + item.row + ',column:' + item.column + '}');
                }

            }
    );

function hideColumn(columnIndex){
        $('#chart2 td:nth-child(' + (columnIndex+1) + ')').hide(); 
        return;
      } 
```

但是，`ev`没有一个名为 的属性`column`，它可以引用列索引。有人知道我该怎么做，如果我遗漏了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:40:36.943

~~也许您需要[Dataview](https://developers.google.com/chart/interactive/docs/reference#DataView)？您可以使用[hideColums()](https://developers.google.com/chart/interactive/docs/reference#DataView_hideColumns)方法隐藏指定的列。~~

> 基础 DataTable 的只读视图。DataView 只允许选择列和/或行的子集。它还允许重新排序列/行，以及复制列/行。
> 
> ~~视图是底层 DataTable 上的实时窗口...~~

**我猜编辑** [getSelection()](https://developers.google.com/chart/interactive/docs/reference#visgetselection)会更适合您的问题。

# mysql - 在mysql中转换数据类型

> ID：11530970
> 
> 赞同：0
> 
> 时间：2012-07-17T21:13:24.860
> 
> 标签：mysql

这可能是一个非常普遍的问题，但我对此表示怀疑。作为一个初学者，我试图通过从表 A 中选择将行插入表 B 是不成功的。

表 A 中的字段具有 DECIMAL 数据类型，表 B 中其对应的字段具有 BIGINT 数据类型。DECIMAL 数据类型的值可以插入到 BIGINT 数据类型的字段中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:17:02.593

据我所知......不...... Big int 与 INT 几乎相同，只是范围更高。它采用整数值 0 到 18446744073709551615。

[更多信息在这里](http://dev.mysql.com/doc/refman/5.5/en/data-type-overview.html)

# c# - 布尔值和变量如何在类/表单之间发送？

> ID：11530975
> 
> 赞同：1
> 
> 时间：2012-07-17T21:13:49.150
> 
> 标签：c#

我无法让一种方法发挥作用，我不确定我是否以正确的方式进行操作。我想要做的是通过 button_click 将表单中的字符串发送到类中并在那里处理错误（tryparse 方法），然后将 boolvalue 发送回然后向用户报告和错误或打印输入列表框。

这是我应该将字符串发送到类中的表单代码。

```
private void btnOK_Click(object sender, EventArgs e)
{
     Errorcheck.GetDouble(numChoice);
} 
```

然后是错误检查类：

```
public static bool GetDouble(string numChoice, out double value, double minLimit, double maxLimit)
{
     while (!double.TryParse(numChoice, out value))
     {
          if ((value >= minLimit) && (value <= maxLimit))
          {
              return true;
          }
      }
      return false;
} 
```

如何从`Errorcheck`类中检索布尔值？是否可以。我做对了还是有更快的方法去做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:15:42.520

```
private void btnOK_Click(object sender, EventArgs e)
{
   double foo;
   var myresult = Errorcheck.GetDouble(numChoice, out foo, 1, 2);

   //When myresult == true, foo contains the parsed value
} 
```

`myresult`将包含 GetDouble 返回的结果`true`（值可以被解析并且在限制内）或`false`（值可以被解析但超出限制或首先无法解析）。此外，如果解析失败，`foo` [则将包含 0](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)，否则解析的值（**可能会或可能不会！**）在限制范围内。

但是，我确实对您的代码有一些问题。第一的; 为什么你的类被命名`Errorcheck`，而事实上，它不做错误检查（那是什么？）而是解析一个值。

其次，为什么要使用 while() 构造？

```
public static bool GetDouble(string numChoice, out double value, double minLimit, double maxLimit)
{
    return double.TryParse(numChoice, out value)
             && ((value >= minLimit) && (value <= maxLimit));
} 
```

第三; GetDouble() 实际上并没有“获得”“双倍”。它检查一个值是否可解析为双精度值，如果是，则在范围内。为了皮特，它返回一个布尔值。 **编辑**从头开始；我错过了`out`方法签名。它返回一个布尔值和值。

...然后还有更多，但我可能会吹毛求疵：P

而且，最后但并非最不重要的一点是，我看不出这与“如何在类/表单之间发送布尔值和变量”有什么关系？

接受我的善意建议，并获得一本好的 C# 或通用编程书籍，并稍微提高你的基本技能。你只会受益，很快你就会明白为什么你的代码在很多方面都是“坏的”，没有任何意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:23:41.793

我会这样做：

```
private void btnOK_Click(object sender, EventArgs e)
{
    double parsedValue;
    if (Errorcheck.IsDoubleBetween(numChoice, out parsedValue, maxValue, minValue))
    {
        //Your code here
    }
} 
```

错误检查代码：

```
public static bool IsDoubleBetween(string numChoice, out double value, double minLimit, double maxLimit)
{
    bool result = double.TryParse(numChoice, out value) && (value >= minLimit) && (value <= maxLimit);

    return result;
} 
```

如您所见，有一些变化：

1.  该名称`IsDoubleBetween`解释了方法逻辑。
2.  `IsDoubleBetween`使用正确的参数调用。
3.  有一个使用`IsDoubleBetween`返回值。
4.  `IsDoubleBetween`代码更具可读性。

在这种情况下，我会尝试将两个操作分开`IsDoubleBetween`为两个方法，这样每个方法都有一个单一的责任 - 解析和检查值

# ios - 可以安全删除 XCode 的 project.pbxproj 文件中的重复文件引用吗？

> ID：11530977
> 
> 赞同：8
> 
> 时间：2012-07-17T21:13:53.580
> 
> 标签：ios, xcode, pbxproj

我公司的 iPhone/ipad 产品已经迁移了几代 iOS 和 Xcode（现在是 5.1 和 4.3），并且有很多目标。也许是因为这些因素，PBXBuildFile 部分中的每个源文件都有许多相同的行，例如：

```
14EE4CD315A5E69000DCA763 /* 资源中的电影@2x.png */ = {isa = PBXBuildFile; fileRef = 14EE4CB615A5E68500DCA763 /* 电影@2x.png */; };
14EE4CD415A5E69000DCA763 /* 资源中的电影@2x.png */ = {isa = PBXBuildFile; fileRef = 14EE4CB615A5E68500DCA763 /* 电影@2x.png */; };
14EE4CD515A5E69000DCA763 /* 资源中的电影@2x.png */ = {isa = PBXBuildFile; fileRef = 14EE4CB615A5E68500DCA763 /* 电影@2x.png */; };
14EE4CD615A5E69000DCA763 /* 资源中的电影@2x.png */ = {isa = PBXBuildFile; fileRef = 14EE4CB615A5E68500DCA763 /* 电影@2x.png */; };
14EE4CD715A5E69000DCA763 /* 资源中的电影@2x.png */ = {isa = PBXBuildFile; fileRef = 14EE4CB615A5E68500DCA763 /* 电影@2x.png */; };

```

请注意，给定源文件的行都是绝对相同的（我错了，它们并不完全...），重复行的数量从无到六打或更多不等。由于这种重复，project.pbxproj 的 PBXBuildFile 部分几乎有 5000 行长，尽管我们实际上只有大约 1200 个唯一文件。

在我拼凑出一个脚本来去除所有这些重复的行，并要求对所有构建和目标进行完全回归测试之前，我想确保 Xcode 出于某种神秘的原因不需要这些重复的行。

我相当肯定这不是由版本控制错误引起的。重复的行只出现在 PBXBuildFile 部分，虽然我不喜欢 P4，但我们在合并 project.pbxproj 文件更改时遇到了一点麻烦，虽然有近 20,000 行，但有点笨拙。我认为 Xcode 的某些版本做到了这一点，也许是在添加新目标时，但我没有发现其他人抱怨这个问题。

次要问题：这是怎么发生的？有没有其他人发现这种重复的行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:47:02.353

如您所见，文件 ref 是重复的，但每个目标内的文件 id 有一点点差异 14EE4CD* **3** *15A5E69000DCA763 ，第 8 位相当不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-20T22:51:19.463

为后代张贴，以防其他人也遇到这种情况。

当开发人员在单独的分支上工作时，例如将文件移动到不同的文件夹，在与另一个开发人员在单独的分支上进行更改的另一个组相同的子文件夹中添加新组等，然后需要将他们的项目更改合并回一个公共基础分支。合并 Xcode 项目文件本身就是一种特殊的地狱，没有好的方法可以确定这些引用中的哪一个是您要保留的引用；正如[@Maistor Kokir](https://stackoverflow.com/users/1829514/maistor-kokir)指出的那样，每个引用的 id 都是唯一的，选择正确的 ID 至关重要，因为组通过 ID 引用文件，更重要的是，构建规则和目标也引用 id。

我发现可靠解决此问题的唯一方法是删除对相关文件的所有引用（在构建目标的“构建阶段”|“编译源”中），然后重新添加。

而且，为了真正从源头上修复它，我建议开发人员在公共分支（例如 git“master”分支）上进行任何项目*更改*，然后将该更改合并到他们的开发分支。项目*添加*通常不需要相同的处理；仅在“合理范围内”进行更改，包括（但**不限**于）将文件移动到不同的组，甚至移动到同一组中的不同位置、重命名或删除组、删除或修改子模块引用等. 经验将是你真正的向导。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T06:17:56.420

通常 Xcode 会为多个目标中引用的文件生成唯一的引用（ID）。我想您有多个构建目标和 LoginViewController 都引用了这两个目标，最终得到不同的 fileRef ID。虽然它看起来相同，但假设它可能是无害的而删除它们可能会导致崩溃。

[您可以从http://www.monobjc.net/xcode-project-file-format.html](http://www.monobjc.net/xcode-project-file-format.html)阅读有关 pbxproj 文件的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T18:26:14.887

我终于编写并运行了删除许多重复文件引用的脚本。这样做似乎完全无害，我的本地构建都继续正常工作。我从来没有检查过这些修复，因为我大约在那时换了雇主，而且在离开之前扔一颗有可能破坏十几个团队的构建的炸弹似乎很粗鲁。

# vba - Excel 按钮增长

> ID：11530978
> 
> 赞同：7
> 
> 时间：2012-07-17T21:13:57.560
> 
> 标签：vba, excel

我正在处理其他人创建的 Excel 2010 工作簿（我不知道他们使用的是哪个版本），其中有一个调用宏的按钮。定义了很多宏，所以我右键单击它以找出它调用的是哪个宏，但是没有出现上下文菜单。相反，当我单击关闭时，按钮会变大。我可以随心所欲地连续多次发生这种情况。同一个工作表的另一个按钮具有相同的上下文菜单问题，但文本每次都缩小而不是增长。当我这样做时，还有另一个按钮可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T00:58:24.973

Excel 中的增长按钮是一个相当普遍的问题，有几种关于为什么会发生这种情况的理论，包括使用多个监视器或使用比例字体。我还没有看到关于这个的明确答案，但是有几种解决方法可能对你有用。

1.  删除并重新创建按钮。
2.  打开工作簿和单击按钮时，以编程方式设置按钮的高度和宽度。
3.  在工作表上选择带有另一个或两个对象的按钮并将它们分组。
4.  根本不要使用它们。

我个人的选择是#4。作为按钮的替代方案，我要么使用超链接，要么使用分配有宏的形状。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T21:19:05.770

我想你想在工作簿中进入“设计模式”： ![在此处输入图像描述](../Images/3b972e21f42f78717b6e2c168e4e8d12.png)

您应该能够右键单击该按钮以查看其之后的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T21:26:54.640

我有同样的问题。我有两个 Excel 工作簿，每个工作簿上都有类似的按钮。这只发生在其中一个上，但每次打开该文件时都会发生。

我找到了一种解决方法。我打开一个空白 Excel 文档，然后打开受影响的文档，按钮不再改变大小。当我打开第二个时，我必须将它拖到已经打开文件的窗口中。如果我双击它，它会在一个新窗口中打开，问题仍然存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-11T20:16:09.640

我有时也有同样的问题。就我而言，我可以在一个文件上 100% 复制它，但在几乎相同的文件上却不一致。我还发现大小错误不是永久性的——我可以保存并重新打开文件以恢复按钮的外观。我还可以创建一个新窗口，然后丢弃损坏的窗口。

对我来说，当我访问工作表的**HPageBreaks**集合时，按钮会调整大小。我可以通过临时更改窗口视图来避免这个问题，如下所示：

```
ActiveWindow.View = xlPageBreakPreview
  ' do pagination stuff using HPageBreaks
ActiveWindow.View = xlNormalView 
```

# .net - 哪些 .NET 语言对扩展方法有语法支持？

> ID：11530984
> 
> 赞同：0
> 
> 时间：2012-07-17T21:14:28.913
> 
> 标签：.net, extension-methods

我最近问了一个[关于设计主要基于接口和扩展方法的 API](https://stackoverflow.com/q/11441905/240733)的问题。

这让我想知道，是否存在不直接支持扩展方法的 .NET 语言，即使用这样的 API 会变得很痛苦的语言？

我知道扩展方法只是静态方法，可能总是这样调用，但是“对扩展方法的支持”是指更紧密地集成到语言语法中以调用对象上的方法；在 C# 中可以像使用常规方法一样使用扩展方法的方式。

除了 C# 和 VB.NET 之外，哪些更流行的 .NET 语言实际上支持扩展方法，哪些不支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:14:28.913

**F#**在最近的版本（例如 VS2010 附带的版本）中支持扩展方法。另请参阅[此问题](https://stackoverflow.com/a/777254/240733)的答案“使用 F# 代码中的 C# 定义的扩展方法”。

* * *

**PowerShell** [可以](http://bartdesmet.net/blogs/bart/archive/2007/09/06/extension-methods-in-windows-powershell.aspx)通过扩展类型系统来支持扩展方法。

* * *

**IronPython**似乎支持扩展方法...

*   [通过版本 2.7](http://blogs.msdn.com/b/saveenr/archive/2008/11/14/consuming-extension-methods-in-ironpython.aspx) (?) 之前的一些奇怪的自定义属性，以及
*   [通过`clr.importExtensions()`从 2.7 版本开始](http://ironpython.codeplex.com/releases/view/54498/)。

* * *

**IronRuby**[根据对](https://stackoverflow.com/a/5572802/240733)问题“IronRuby 调用 C# 扩展方法 - 错误 - .NET 3.5 中的兼容性”的回答，支持从 1.4 版（需要 .NET 4）开始的扩展方法`using_clr_extensions`。

* * *

**IronScheme**：[确实有扩展方法](http://ironscheme.codeplex.com/wikipage?title=ExtensionMethods)，但我不完全确定它们是否与 C# 3 中的扩展方法相同。

* * *

**Boo**，根据对“我如何在 boo 中使用扩展方法”问题的[回答，支持从 0.9.0 版开始的扩展方法。](https://stackoverflow.com/a/4634022/240733)

* * *

**Nemerle**似乎也支持扩展方法（根据[其网站上的页面](http://nemerle.org/wiki/index.php?title=Extension_methods)）。

* * *

**托管 C++**：（*扩展 stakx 的答案）托管 C++ 支持扩展方法，如您在*[此答案](https://stackoverflow.com/questions/6012578/how-can-i-create-net-extension-methods-by-c-cli)中所见。

* * *

> *（请随时扩展和改进此答案！）*

# javascript - 单击外部链接后重定向，仅打开一个选项卡/窗口

> ID：11530992
> 
> 赞同：1
> 
> 时间：2012-07-17T21:15:07.840
> 
> 标签：javascript, jsp, cross-browser, window

我为我的应用程序的外部客户端创建了一个 jsp，用于链接到 Web 客户端。他们可以在 URL 中指定他们所在的客户端，以便当链接打开一个窗口时，它被命名，并且来自该客户端的任何其他链接都将在同一窗口中打开。这是一个示例网址：

> mysite.com/redirect.jsp?fromClient=mine&page=awesome

问题是当您单击此链接时，例如从电子邮件摘要中，它会打开`redirect.jsp`用于`window.open()`打开所需页面的页面。从上面的链接，将打开的页面是：

> mysite.com/index.jsp?page=awesome

所以我打开了两页，实际上我只想要一个。而且由于我没有使用 javascript 打开第一页（它是一个链接），我不能用`window.close()`它来关闭它。我尝试过使用`window.open('','_parent','')`，`window.open('','_self','')`但都不起作用。

我知道必须有比从我的 jsp 页面打开第二个窗口更好的重定向方法，但我不知道更好的方法是什么。想法？

**编辑**
主要目标是让外部客户端的用户能够单击该客户端中的链接，并让所有链接将它们带到浏览器中的同一窗口/选项卡。我现在正在使用`window.open`，因为我可以解析链接并获取客户端名称，然后在`window.open`函数中提供它。

**编辑 2**
我总是在这些问题上过于含糊。好的，这是设置：

电子邮件摘要包含一个看起来像的链接

> mysite.com/redirect.jsp?fromClient=emailDigest&pageNum=4

目前，当点击该链接时，它会打开一个浏览器（duh），然后`redirect.jsp`页面解析该链接以获取客户端名称，在本例中*为 emailDigest*。然后它调用`window.open('mysite.com/index.jsp?pageNum=4','emailDigest')`. 这将创建一个具有该名称的新窗口，`emailDigest`除非具有该名称的窗口/选项卡已经存在，在这种情况下，它只会使用新窗口更新该窗口中的 URL。

我希望要么能够关闭原始窗口（带有`redirect.jsp`地址的窗口），要么根本不必打开那个初始窗口。

**注意**
由于有许多不同的客户端希望能够做到这一点，我不能保证他们将使用 HTML 创建链接，因此`target`属性不是答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T22:06:26.270

正确答案是“不，不能这样做”。如果您不使用 Javascript 打开窗口，则无法使用 Javascript 关闭它。我总是必须创建至少 2 个窗口，这不是我们想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:23:21.557

我认为您正在寻找`window.location`而不是`window.open`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:25:46.863

正如上面 haynar 所说，你为什么要打开一个窗口而不是：

```
<!-- content contains the refresh delay in seconds and the target url -->
<meta http-equiv="Refresh" content="1; URL="http://mysite.com/index.jsp?page=awesome"> 
```

或使用 javascript 来做同样的事情：

```
window.location.href = "http://mysite.com/index.jsp?page=awesome"; 
```

两者都可以正常工作，并且会让您打开一个窗口。

要获取命名窗口，请使用目标链接：

```
<a href="mysite.com/redirect.jsp?fromClient=mine&page=awesome" target="mine">Mysite.com</a> 
```

这将自动设置打开窗口的名称属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T21:32:09.123

请使用 window.location.replace("http://mysite.com/index.jsp?page=awesome");

> **原因 ：**
> 
> replace(url)：用提供的 URL 替换当前文档。与 assign() 方法的不同之处在于，在使用 replace() 之后，当前页面将不会保存在会话历史记录中，这意味着用户将无法使用后退按钮导航到该页面。

# java - 将变量初始化为对现有对象的引用

> ID：11530998
> 
> 赞同：2
> 
> 时间：2012-07-17T21:15:49.223
> 
> 标签：java, swing

这似乎是一个非常初学者的问题，但我不知道答案。

假设您在 Java 中创建了一个新的 JFrame。新框架带有默认内容窗格。如果我声明一个变量并将其初始化为该框架的内容窗格，那么我初始化的变量是对框架的内容窗格的引用还是它自己的东西？例子：

```
JFrame frame = new JFrame();
Container panel = frame.getContentPane(); 
```

例如，如果我想更改内容窗格的布局，调整`panel`会产生与更改相同的效果`frame.getContentPane()`吗？

为了准确显示我的意思：

```
frame.getContentPane().setLayout(new GridLayout()); 
```

这会产生与以下相同的结果：

```
panel.setLayout(new GridLayout()); 
```

然后我所做的任何事情都会在我最后不必说的情况下`panel`得到反映吗？`frame``frame.setContentPane(panel);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:19:18.637

是的。内存中的一个对象可以有多个引用，对其中任何一个的任何更改都会反映在所有引用上（因为它们都指向同一个对象）。有关更多详细信息，请参阅[此示例](https://stackoverflow.com/a/9404727/597657)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:23:17.457

绝对地。它们指向内存中的同一个对象。

想象一下将两根绳子系在一个气球上。你拿着一个（我们叫你`panel`），你把另一个字符串给一个朋友（我们叫他`frame.getContentPane()`）。

现在，如果您的朋友跟随他的绳子，找到气球，并在上面戴上帽子（即`frame.getContentPane().setLayout(new GridLayout());`），那么当您跟随绳子时，您会发现一个带帽子的气球！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:17:31.400

是的，它们指的是同一个`Container`对象。

换句话说，`getContentPane()`返回对基础的引用`Container`。因此，每当您使用引用时，都会使用/影响底层对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T06:05:22.657

你的代码

```
JFrame frame = new JFrame();
Container panel = frame.getContentPane(); 
```

确实让变量`panel`指向框架的内容窗格。所以打电话

```
panel.setLayout( new GridLayout() ); 
```

将影响内容窗格的布局，正如`panel`它所指的那样。

但是，一个常见的错误是假设如果您执行类似的操作

```
JFrame frame = new JFrame();
Container panel = frame.getContentPane();
//... some more code

JPanel someOtherFancyPanel = ...;
panel = someOtherFancyPanel; 
```

的内容窗格`JFrame`将变为`someOtherFancyPanel`. 当然不是这样。最后一条语句只是让`panel`变量指向`someOtherFancyPanel`并且不再指向框架的内容窗格，并使内容窗格保持不变。