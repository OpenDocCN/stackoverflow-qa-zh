# StackOverflow 问答 000601000-000601999

# formal-methods - 正式的方法和企业

> ID：601003
> 
> 赞同：11
> 
> 时间：2009-03-02T01:35:44.033
> 
> 标签：formal-methods

所以...

我在软件工程中教授形式化方法。我还教授“敏捷方法”。大多数人似乎认为这是矛盾的。我认为这很有意义......我也在一家公司工作，我们需要真正完成工作:) 虽然我可以将我获得的技能点应用于日常的“规范”，但我的同事们通常会避开“正式”这个词。

我曾经认为这是由于我们学习编程的内在方式：我们通常被驱使寻找可行的解决方案，而不是理解问题。然后我认为这是因为正式社区中的大多数人不是工程师，而是数学家或计算机科学家。如今，我想知道是否只是因为形式方法社区隐藏在某种“混淆”法律的背后，才使用所有可用的 UNICODE 符号，积极开发粗鲁、不美观的工具，并在标准面前大笑。

是的，我一直在从“责备他们”转变为“责备我们”的观点；-)

所以，我的问题是：您在公司中使用任何形式的方法吗？你有没有介绍过它们，或者它们是先决条件？你使用什么技术来消除人们恐惧中的数学迷雾并鼓励他们使用形式化方法？您认为当前的工具缺少哪些更通用的用途？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-05T17:36:42.653

让人们接受*任何*方法或方法的关键是向他们展示它如何解决他们遇到的问题。如果他们能看到这将使他们的生活变得更好，那么您就有很大的机会让他们采用这些技术。

如果你*不能*向他们展示这一点，也许你想采用基于哲学而不是实用性的方法。除非其他人分享您的理念，否则您将一事无成。也许你不应该。

几十年来，出现了许多方法论。新的总是解决旧的缺点，但项目仍然会遇到麻烦和失败。为什么？因为提出新方法论的摇滚明星都是摇滚明星，他们之所以提出新方法论，正是因为他们了解根本问题以及如何应用它们。那些追求的人往往会盲目地遵循食谱，而且效果并不好。

所以我认为最好的方法是教授潜在的问题，然后展示各种方法如何尝试处理这些问题。公司、项目和团队之间的差异如此之大，以至于没有一种方法可以成功地应用于所有组合。学会选择合适的工具并很好地应用它是至关重要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-06T17:35:41.527

感谢您的所有贡献。他们非常有见地。请允许我发火（不过，不要把它当作私人的：-）

大多数人似乎认为形式化方法只是关于程序验证。或关键系统。如果我们追求终极的陈词滥调，这可能是正确的：证明我们正在做正确的程序（与验证相比，正如贡献者所说，它询问我们是否正在做正确的程序）。

但请考虑模型查找/检查工具，例如 Alloy。对于习惯于 UML 和 OO 的人来说，学习使用这样的工具所花费的时间可以忽略不计。不过，它可以让您立即了解您的模型。通常不超过 10 分钟就可以在一个足够小的模型子集上找到一个反例（包括首先在 Alloy 中描述模型）。

以需求工程为例。一个人通常会画很多 UML。然而，很少有人使用 OCL，而且许多业务规则都是用自然语言非正式地注释的。为什么？时间限制？

现在考虑这样一个事实，即大多数人只是用她/他的直觉来证明一个模型是可以满足的。再说一遍，为什么？我可以花同样多的时间（可能甚至更少，因为我不需要关心绘画美学）用合金写那个模型，然后只检查可满足性？我现在需要什么样的数学？“谓词”？IF 和布尔值的花哨名称 ;-) 量词？ForEachs() 的花哨名称...

大信息系统呢？它们不需要很严格......只需尝试在您的脑海中分析一个包含 600 多个类的概念（而不是实现！）图表。我看到很多人因为容易犯的模型错误而一头雾水，因为他们错过了一些约束，或者模型允许愚蠢的事情发生。

事实是，不需要从头到尾使用正式的方法。当然，我可以在 Coq 中证明整个应用程序，并证明它 100% 符合某些规范。这可能是计算机科学家/数学家的方法。

尽管如此，基于 GTD 理念，为什么我不能将一些任务委派给计算机并让它帮助改进我的开发？真的是“时间”的问题，还是单纯的缺乏技术能力和学习/创新的意愿？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T17:51:02.760

在企业中进行业务线 IT 开发意味着必须将有关业务的知识从实际业务人员转移到开发人员的负责人中。虽然我自己发现抽象数学是最大的消遣之一，但它是一种糟糕的交流工具。沟通就是一切。虽然我可以想象在说服 IT 人员接受更抽象的符号方面取得了一些成功，但我基本上没有机会与业务人员打交道。

虽然在某些领域我可以看到形式化方法在企业中的作用（数学和逻辑重的专业软件，对可证明属性的重大需求，如在安全关键软件中），但它们对获得正确的要求几乎没有帮助，例如如何通过向一组可能的外部或内部供应商发出一个或多个供应订单来完成客户订单。

我认为陪审团仍然在基于模型的方法和特定领域的语言上。我认为他们的成功或失败取决于他们是否能更快地从 IT 部门向业务方面的愿望和需求提供反馈，以及他们是否认为业务人员必须进行任何重要的研究。

技术很简单。沟通很困难。正式的方法可能会帮助我们做正确的事情，但我所见过的那些方法并不能帮助我们做正确的事情。（是的，这些都是陈词滥调，但那是因为它们是不可避免且令人痛苦的真实。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T01:56:51.127

我正在上一门关于“规范和验证”的课程。作为课程结构的一部分，我们正在做以下工作- 1\. PVS（原型验证系统）[http://pvs.csl.sri.com/](http://pvs.csl.sri.com/)和 SMV（软件建模和验证）[http://www.cs等学习工具.cmu.edu/~modelcheck/smv.html](http://www.cs.cmu.edu/~modelcheck/smv.html) 2\. 除此之外，我们还会剖析由于软件故障而发生的事故。例如 - 阿丽亚娜五世的失败

我觉得形式化的方法更适用于失败成本大于设计成本的场景。而且似乎很容易将它们用于关键系统中使用的软件。我猜它被用于航空电子、芯片设计等领域，目前的汽车行业也在将其付诸实践。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-04T10:00:27.843

我曾几次尝试让人们接受正式的规范方法（Z 和 Alloy），并获得了与您相同的经验：大多数人虽然觉得它们有用，但在实际工作中使用它们却非常不舒服。

有趣的是，同样的人非常乐意制作大量完全无用的 UML 图。

我认为这主要有两个原因：

a.) 许多开发人员对正式方法所需的抽象级别感到不舒服。大多数入门级数学教育都是微积分和非离散数学这一事实可能与此有关。

b.) 形式化方法需要一种非常自下而上的设计方法，您从头开始设计核心模型并使其密闭，然后通过在其顶部提供接口将其连接到实际用户需求。由于我们倾向于让需求驱动开发工作，因此自上而下的方法感觉更自然，尽管它通常会导致模型不一致。这就像在你的房子已经建成之后在你的房子下面改造一个地下室。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T19:39:07.353

形式化方法在失败成本低的系统中毫无意义。

在生产 Web 应用程序中，您有多个前端盒、多个后端盒、多个数据库盒 - 如果其中任何一个上的程序失败，这不是事件。硬件非常便宜，以至于您可以以远远低于正式指定所有软件的成本来构建这些系统。

# c - 在 C 中以毫秒为单位设置警报

> ID：601012
> 
> 赞同：7
> 
> 时间：2009-03-02T01:38:30.923
> 
> 标签：c, signals

我目前有一些使用 sigaction 将处理程序与 SIGALRM 信号相关联的 C 代码。然后我做警报（TIME_OUT_IN_SECONDS）。问题是，我需要毫秒，而不是秒，并且警报需要一个整数。如何设置信号以毫秒为单位触发？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-02T01:43:24.063

怎么用[`setitimer()`](http://www.manpagez.com/man/2/setitimer/)？

# ruby-on-rails - rails 中非模型字段的错误

> ID：601030
> 
> 赞同：10
> 
> 时间：2009-03-02T01:50:11.037
> 
> 标签：ruby-on-rails, validation

在 Rails 中报告与特定模型无关的表单字段错误的最佳方法是什么？例如，我有一个用于批量创建具有随机用户/密码的用户帐户的表单。它将要创建的用户数量、有关所有用户应具有的属性的信息以及存储在与创建的用户关联的 user_batches 模型中的批次信息作为输入。

理想情况下，将有一些`errors_on`类似的方法来列出来自数量字段的错误，该字段与没有模型相关联，用户信息字段，与创建的用户记录相关联，以及使用最少代码的 user_batches 模型。

这也适用于不通过 AR 验证运行的搜索表单等。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T04:40:16.383

您可以像这样将自己的错误手动添加到模型对象中。

```
@user_batch.errors.add_to_base("Foo") 
```

# json - Google JSON/Ajax API - 如何获得下一页结果？

> ID：601033
> 
> 赞同：1
> 
> 时间：2009-03-02T01:51:19.473
> 
> 标签：json, rest

根据：[http ://code.google.com/apis/ajaxsearch/documentation/#fonje](http://code.google.com/apis/ajaxsearch/documentation/#fonje)

我得到了一个游标结果，但愚蠢的是，moreResultsUrl 不是返回到 JSON 服务而是返回到主站点的 URL - 如何将下一页结果获取到 JSON 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T02:08:22.660

好吧，那是因为*moreResultsUrl*指向[http://www.google.com/search](http://www.google.com/search)而不是[http://ajax.googleapis.com/ajax/services/search/web](http://ajax.googleapis.com/ajax/services/search/web)。

您需要的只是*moreResultUrl*的参数，您可以将其传递给[http://ajax.googleapis.com/ajax/services/search/web](http://ajax.googleapis.com/ajax/services/search/web)以获得 JSON 结果。

例如：

[http://www.google.com/search](http://www.google.com/search) ? **v=1.0&q=卢卡**

用 JSON 翻译成

[http://ajax.googleapis.com/ajax/services/search/web](http://ajax.googleapis.com/ajax/services/search/web)？**v=1.0&q=卢卡**

Google 只是向您展示他们的 RESTful api，您可以使用*页面*JSON 值与您想要的任何接口。

# php - 类中接口的用途

> ID：601034
> 
> 赞同：20
> 
> 时间：2009-03-02T01:51:42.200
> 
> 标签：php

编写类时接口的目的是什么？

这是我在网上看到的一个例子。

```
<?php
interface Chargeable {
    public function getPrice();
}

class Employee implements Chargeable {
    protected $price;

    public function getPrice() {
        return $this->price;
    }
}

$product = new Employee();

?> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-03-02T02:14:13.550

这是我了解和理解接口的方法之一。

想象一下这个场景：

```
abstract class Plane {
    public function openDoors();
}

interface Fliers {
    public function fly();
} 
```

现在让我们使用它们：

```
class Boeing747 extends Plane implements Fliers {
    public function fly() {
        // some stuff
    }

    public function openDoors() {
        // do something
    }
} 
```

和：

```
class Tweety implements Fliers{
    public function fly() {
        // some stuff
    }
} 
```

波音747是会飞的*飞机，翠蒂是会飞**的鸟*，但翠蒂“开门”是没有意义的。

关键是接口可以由不同类型的对象实现，但类不能。如您所见，波音747 和翠蒂除了都可以飞行之外没有任何共同之处。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-02T01:54:26.063

接口是面向对象编程中的一个概念，它支持多态性。基本上，接口就像一个合同，实现它的类同意提供某些功能，以便可以像使用该接口的其他类一样使用它们

您的示例显示了保证它们具有可用的 getPrice 方法的类。然后，您可以编写代码来利用具有此方法的对象，而不必担心它是哪种类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T01:55:30.837

接口允许您将接口与实现分开。当您想在代码中具有正交性时，这很方便。

基本上，您将能够创建接受 a 的函数，`Chargeable`并能够在其中传递任何对象，只要它实现`Chargeable`. 如果您需要更改`Employee`课程，这使您可以灵活应对。它还允许您的方法接受任何“可收费”的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T09:13:25.977

在具有多重继承而不是接口的语言中，您有抽象类。在 PHP 中没有多重继承，所以你有接口。一个类可以实现各种接口。唯一的一点是要保证你的类有一定的方法集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-10T21:47:38.137

我现在正在努力理解这一点（我想我正在阅读与 OP 相同的书......）。

在我看来，接口只是对实现接口的类强制执行“合同”义务，以实现接口中出现的功能/属性。然而，由于未定义实现，实现接口的类/对象是否可以以独特的方式这样做？

没有实际的继承涉及吗？

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-11-19T13:26:19.077

首先，接口结构为实现与外部世界通信的类提供接口。简单的例子是电视。电视是一个类，它上面的按钮是接口。

使用接口的建议：

1-Java不支持多重继承。如果我们想从不同的类中添加两个不同的方法，我们不能（扩展 ClassA，ClassB）是不可能实现 A，B 没问题的。

2-另一个adv是安全性和灵活性如果我们希望类的某些方法无法访问，可以举一个更具体的例子，我们该怎么做？多态性 + 接口我们可以这样做，如果我们不希望 walk 和 bark 方法不可达

```
abstract class Animal {
    String name;
    int age;

    public Animal(String name, int age) {
        super();
        this.name = name;
        this.age = age;
    }

}

class Dog extends Animal implements Run {

    public Dog(String name, int age) {
        super(name, age);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub

    }

    public void bark() {

    }

}

class Cat extends Animal implements Climb {

    public Cat(String name, int age) {
        super(name, age);

    }

    @Override
    public void climb() {
        // TODO Auto-generated method stub

    }

    public void walk() {

    }

}

public class Main {

    public static void main(String[] args) {

        // if we want that some of methods of the class are not reachable how
        // can we do that?
        // polymorphism + interface we can do that
        // for example if we do not want walk and bark methods should be
        // unreachable

        Climb cat = new Cat("boncuk", 5);
        Run dog = new Dog("karabas", 7);

        // see we cannot reach the method walk() or bark()
        dog.walk(); // will give an error. since there is no such a method in the interface.

    }

}}

    enter code here 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2010-08-05T19:10:27.427

让我举个例子来了解这类类的暗淡

```
public interface transport{
public double getSpeed(){return(0/*the speed*/);}
public void setSpeed(){return(0/*the speed*/);}

}   
class car extend transport{
//implementation of transport interface
public double getSpeed(){return(speed/*the speed*/);}
public void setSpeed(){speed=250;}
}
class train extend transport{
//implementation of transport interface 
....

}

class plane extend transport{
//implementation of transport interface 
....
} 
```

所以接口类是通用的概念。

# java - 忽略日期范围的日期年份的最佳做法

> ID：601036
> 
> 赞同：5
> 
> 时间：2009-03-02T01:51:57.117
> 
> 标签：java, groovy, date, jodatime

我需要对一些关于季节的信息进行建模，并且需要以与年份无关的方式根据开始/结束日期来跟踪它们。即，我需要允许用户将夏季定义为介于 5 月 15 日和 9 月 10 日之间，并且在所有年份都这样做。

我需要对 isThisDateInSeason 类型进行大量检查）。所有日期操作函数（即日期、日历）似乎只适用于有效日期，即包括年份信息。

有没有关于如何做到这一点的最佳实践？我可以想到一堆hacky方法（即存储月份和日期或存储日期并将它们带到基线年份，以便我可以比较），但似乎可能有更好的方法.

我正在用 Java 或 Groovy 编写这个。

[Joda-Time](http://www.joda.org/joda-time/)图书馆会在这里提供帮助吗？我没有这方面的经验，但它看起来有更大的灵活性。

我发现[this question](https://stackoverflow.com/questions/189468/identifying-the-season-from-the-date-using-java) about how to identify a season from date,但它侧重于月份，我需要更多的灵活性来包括日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T02:36:20.113

如果每个用户都拥有自己的数据（即他们指定他们的季节，然后输入他们自己的信息），那么您可以将数据与季节一起作为其中的一部分存储，但是我感觉您所追求的场景是共享数据跨越众多定义不同季节的用户。

您必须非常小心地“规范化”日期，因为闰年​​可能会导致意外问题，即尝试将 2 月 29 日设置为非闰年会导致问题/异常。

我将以下内容放在一起，不幸的是它的 c# 但概念是相同的。我没有实际测试过代码，但作为伪代码它可能会有所帮助。

```
public class SeasonChecker
{
    public enum Season {Summer, Autumn, Winter, Spring};
    private List<SeasonRange> _seasons = new List<SeasonRange>();

    public void DefineSeason(Season season, DateTime starting, DateTime ending)
    {
        starting = starting.Date;
        ending = ending.Date;

        if(ending.Month < starting.Month)
        {
            // split into 2
            DateTime tmp_ending = new DateTime(ending.Year, 12, 31);
            DateTime tmp_starting = new DateTime(starting.Year, 1, 1);

            SeasonRange r1 = new SeasonRange() { Season = season, Starting= tmp_starting, Ending = ending };
            SeasonRange r2 = new SeasonRange() { Season = season, Starting= starting, Ending = tmp_ending };

            this._seasons.Add(r1);
            this._seasons.Add(r2);
        }
        else
        {
            SeasonRange r1 = new SeasonRange() { Season = season, Starting= starting, Ending = ending };
            this._seasons.Add(r1);
        }
    }

    public Season GetSeason(DateTime check)
    {
        foreach(SeasonRange range in _seasons)
        {
            if(range.InRange(check))
                return range.Season;
        }

        throw new ArgumentOutOfRangeException("Does not fall into any season");
    }

    private class SeasonRange
    {
        public DateTime Starting;
        public DateTime Ending;
        public Season Season;

        public bool InRange(DateTime test)
        {
            if(test.Month == Starting.Month)
            {
                if(test.Day >= Starting.Day)
                {
                    return true;
                }
            }
            else if(test.Month == Ending.Month)
            {
                if(test.Day <= Ending.Day)
                {
                    return true;
                }
            }
            else if(test.Month > Starting.Month && test.Month < Ending.Month)
            {
                return true;
            }

            return false;
        }

    }
} 
```

请注意，上面的代码假设赛季不会在同一个月开始和结束 - 我认为这是一个相当安全的赛季！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T02:27:24.127

我认为您必须推出自己的 DateRange 类，尽管这是一个常见的问题，您希望已经有一个聪明的工具可以做到这一点。作为处理季节的一般要点，您还必须考虑地理因素，这将使生活变得非常艰难。在奥兹国，我们与美国相反，所以夏季从 11 月持续到 2 月。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T03:07:31.833

数据在哪里？如果它在数据库中，我会考虑为日期制作一个表（如 OLAP 中的时间维度）。然后，您可以在某些时间维度示例中为您的季节计算一个列，就像它们用于财务季度一样。（这是假设您的季节没有变化但有固定日期）。

所有“if date in season”类型检查都将预先构建，将计算季节的成本推入您的设置时间而不是运行时间。

**编辑：**刚刚看到您对用户可配置季节日期的评论。这仍然可以工作，因为您可以在包括时间维度的数据库中进行连接，这可能比在 Java 中更容易处理数据集。

# python - 在 Vim 中同时保存和运行

> ID：601039
> 
> 赞同：52
> 
> 时间：2009-03-02T01:54:29.073
> 
> 标签：python, vim

我做了很多 Python 快速模拟的东西，我不断地保存 (:w) 然后运行 ​​(:!!)。有没有办法结合这些动作？

也许是“保存并运行”命令。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2009-03-06T16:10:53.990

好的，您正在寻找的最简单的形式是管道命令。它允许您在同一行上运行多个 cmdline 命令。在您的情况下，这两个命令是 write `w` 并执行当前文件 `! %:p`。如果您为当前文件运行了特定命令，则第二个命令变为，例如 `!python %:p`。因此，对您的问题的最简单答案变为：

```
:w | ! %:p
 ^ ^ ^
 | | |--Execute current file
 | |--Chain two commands
 |--Save current file 
```

最后要注意的一件事是，并非所有命令都可以链接。根据[Vim docs](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#cmdline-lines)，某些命令接受管道作为参数，从而破坏链......

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-03-02T02:27:33.287

**选项1：**

编写一个类似的函数并将其放在您的启动设置中：

```
function myex()
   execute ':w'
   execute ':!!'
endfunction 
```

您甚至可以将组合键映射到它——查看文档。

* * *

**选项2（更好）：**

查看重新映射击键的文档 - 您可以通过简单的键重新映射来完成它。以下工作，但有“filename.py”硬编码。也许您可以深入研究并弄清楚如何用当前文件替换它？

```
:map <F2> <Esc>:w<CR>:!filename.py<CR> 
```

映射之后，您可以`F2`在命令模式下按。

imap、vmap等……是不同模式的映射。以上仅适用于命令模式。以下内容也应该在插入模式下工作：

```
:imap <F2> <Esc>:w<CR>:!filename.py<CR>a 
```

Vim 手册的第 40.1 节非常有帮助。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-03-02T13:15:39.560

使用[自动写入](http://vimdoc.sourceforge.net/htmldoc/options.html#'autowrite')选项：

```
:set autowrite 
```

> **在每个 :next, :rewind, :last, :first, :previous, :stop, :suspend, :tag, :!**上写入文件的内容（如果已修改）, :make, CTRL-] 和 CTRL-^ 命令 [...]

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-02T02:41:40.273

干得好：

```
:nmap <F1> :w<cr>:!%<cr> 
```

保存并运行（您必须处于*n*模式 - 只需添加*esc*和 a *for i*模式）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-02T02:00:30.760

命令组合似乎通过`|`字符起作用，因此可能类似于别名`:w|!your-command-here`为不同的组合键。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2011-06-29T08:33:05.840

另一种可能：

```
au BufWriteCmd *.py write | !! 
```

尽管`run`每次您保存时都会这样做，但这可能不是您想要的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-10-12T15:18:16.340

在 Vim 中，您可以简单地将当前缓冲区的任何范围重定向到外部命令（无论是 Bash、Python 解释器还是您自己的 Python 脚本）。

```
# Redirect whole buffer to 'python'
:%w !python 
```

假设您当前的缓冲区包含如下两行，

```
import numpy as np
print np.arange(12).reshape(3, 4) 
```

然后`:%w !python`将运行它，无论是否保存。并在您的终端上打印如下内容，

```
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]] 
```

当然，您可以使某些东西持久化，例如，一些键盘映射。

```
nnoremap <F8> :.w !python<CR>
vnoremap <F8> :w !python<CR> 
```

第一个，运行当前行。第二个，通过 Python 解释器运行视觉选择。

```
#!! Be careful, in Vim ':w!python' and ':.w !python' are very different. The
first write (create or overwrite) a file named 'python' with contents of
current buffer, and the second redirects the selected cmdline range (here dot .,
which mean current line) to external command (here 'python'). 
```

有关 cmdline 范围，请参阅

```
:h cmdline-ranges 
```

不是下面的，是关于普通命令的，不是命令行的。

```
:h command-range 
```

这是受到*[Vim 的 Execute current line in Bash 的](https://stackoverflow.com/questions/19883917/execute-current-line-in-bash-from-vim/19883963#19883963)*启发。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-31T05:58:50.963

这就是我放入`.vimrc`文件中的内容，就像一个魅力：

```
nnoremap <leader>r :w<CR>:!!<CR> 
```

当然你需要在这之前运行你的shell命令一次，所以它知道要执行什么命令。

例子：

```
:!node ./test.js 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-02T11:58:19.200

我从 Vim 技巧 wiki 得到以下信息：

```
command! -complete=file -nargs=+ shell call s:runshellcommand(<q-args>)
function! s:runshellcommand(cmdline)
  botright vnew
  setlocal buftype=nofile bufhidden=wipe nobuflisted noswapfile nowrap
  call setline(1,a:cmdline)
  call setline(2,substitute(a:cmdline,'.','=','g'))
  execute 'silent $read !'.escape(a:cmdline,'%#')
  setlocal nomodifiable
  1
endfunction 
```

但是我在第三行将 new 更改为 vnew，然后对于 Python，我有以下内容：

```
map <F9> :w:Shell python %<cr><c-w> 
```

点击`F9`保存、运行并将输出转储到一个新的垂直分割的暂存缓冲区中，以便于拉动、保存等。它也点击 cw，所以我只需按 h/c 关闭它并返回我的代码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-01T02:05:15.333

尝试在 Bash 中制作它。

对于名为 的 C 文件`t.c`，这非常方便：

```
vi t.c &&  cc t.c -o t && ./t 
```

和符号 ( `&&`) 确保一条错误消息会破坏命令链。

对于 Python，这可能更容易：

```
vi t.py && python t.py 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-15T01:46:58.070

这也适用于**插入模式**：

```
" F5 => Save & Run python3 "
nnoremap <F5> :w <CR> :!sh -c 'python3 %' <CR>
inoremap <F5> <Esc> :w <CR> :!sh -c 'python3 %' <CR> 
```

我一直用它来测试那些太长而无法在解释器中重新输入的东西。

* * *

## 回答 #12

> 赞同：-13
> 
> 时间：2009-03-02T11:08:13.160

1.  考虑切换到[IDLE](https://en.wikipedia.org/wiki/IDLE)。`F5`什么都做。

2.  考虑切换到[Komodo IDE](https://en.wikipedia.org/wiki/Komodo_IDE)。您可以定义一个命令，以便`F5`执行所有操作。

# winapi - 用 WideCharToMultiByte 转换 LPCWSTR。需要帮忙

> ID：601044
> 
> 赞同：0
> 
> 时间：2009-03-02T01:56:44.030
> 
> 标签：winapi, unicode, string

我有这样的功能：

```
BOOL WINAPI MyFunction(HDC hdc, LPCWSTR text, UINT cbCount){

char AnsiBuffer[255];
int written = WideCharToMultiByte(CP_ACP, 0, text, cbCount, AnsiBuffer , 0, NULL, NULL);
if(written > -1) AnsiBuffer[written] = '\0';

if(written>0){

    ofstream myfile;
    myfile.open ("C:\\example.txt", ios::app);
    myfile.write(AnsiBuffer, sizeof(AnsiBuffer));
    myfile.write("\n", 1);
    myfile.close();

}

.... 
```

当我使用 MessageBoxW() 显示输入 LPCWSTR 文本时，文本显示正常。当我尝试将其转换为多字节时，返回值看起来很正常（例如：22、45 等），但结果是乱码字符串（例如 ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ）。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T02:08:17.077

我看到两个问题；

1）您将“0”传递给 WideCharToMultiByte 以获得多字节缓冲区的大小。如果您阅读文档，这将导致函数返回所需的字节数，但不执行实际转换。（这是为了让您随后分配正确大小的缓冲区并调用函数）。

2) 在 file.write sizeof(AnsiBuffer) 中将导致写入 255 个字节，无论缓冲区中有什么。sizeof 是一种编译时计算，它返回变量的大小。您应该将其替换为表示字符串长度的“书面”变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T02:09:52.297

您需要将缓冲区的长度传递给 API，而不是传递`0`. 当您传递`0`时，该函数返回所需的缓冲区长度，但不写入。您将看到未初始化数组的结果。

这是正确的电话，**255**在正确的位置：

```
int written = WideCharToMultiByte(CP_ACP, 0, text, cbCount, AnsiBuffer , 255, NULL, NULL); 
```

# javascript - 浏览器版本或错误检测

> ID：601050
> 
> 赞同：1
> 
> 时间：2009-03-02T01:59:28.250
> 
> 标签：javascript

我最近看到了一些关于避免对特定浏览器进行编码而不是使用功能/错误检测的信息。jQuery 的创建者 John Resig 似乎是功能/错误检测的忠实拥护者（他有一个精彩的演讲，其中包括在[YUI Theater](http://video.yahoo.com/watch/4403981/11812238)上对此的讨论）。我很好奇人们是否发现这种方法在实践中有意义？如果当前版本的浏览器中不再存在该错误（这是一个 IE6 问题，但不是 7 或 8）怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-02T02:05:02.030

对象检测的最大优势在于您只使用客户端浏览器可用的对象和功能。换句话说，给出以下代码：

```
if (document.getFoo) {
    // always put getFoo in here
} else {
    // browsers who don't support getFoo go here
} 
```

允许您在不命名名称的情况下干净地分离浏览器。这很酷的原因是，只要浏览器支持`getFoo`，您就不必担心它是哪一个。这意味着您实际上可能支持您从未听说过的浏览器。如果您以用户代理字符串为目标找到浏览器，那么您只能支持您知道的浏览器。

此外，如果以前不支持的浏览器`getFoo`获得了该程序并发布了支持的新版本，则您根本不必更改代码以允许新浏览器利用更好的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T02:13:48.247

> 如果当前版本的浏览器中不再存在该错误（这是一个 IE6 问题，但不是 7 或 8）怎么办？

这就是功能/错误检测的重点。如果浏览器更新其功能或修复错误，则功能/错误检测代码已经是最新的。另一方面，如果您正在进行浏览器嗅探，则每次浏览器的功能发生变化时，您都必须更改代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T02:11:31.390

版本和用户代理解析让我想起了刻板印象或种族分析。在我看来，对象检测是要走的路。jQuery in Action 一书很好地指出了原因的细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T02:08:37.183

好吧，如果它是 IE 6 中的问题，而不是 IE 7 或 IE 8 中的问题，那么功能/错误检测机制会将其标记为没有问题并使用适当的功能。

在实践中是有道理的，浏览器嗅探会导致很多问题，如果您没有及时更新您的签名以适应一些新发布的浏览器怎么办？您现在将潜在客户和访问者拒之门外，因为您认为他们的浏览器无法支持它确实可以支持的功能。

所以是的，这是有道理的，你的第二个问题是没有实际意义的，因为它首先进行检测，如果它不再是一个错误，那么一切都会按预期工作，如果没有解决这个问题的话在那里！

# ruby-on-rails - 机车缓慢爬行

> ID：601051
> 
> 赞同：1
> 
> 时间：2009-03-02T01:59:33.150
> 
> 标签：ruby-on-rails, ruby, rubygems

我最近一直在使用 Locomotive 2.0.8 构建非常小而简单的应用程序。到目前为止，它一直是理想的解决方案，但最近该应用程序已经放缓到绝对爬行。从字面上看，启动需要 10 分钟，添加现有或新项目需要 5 分钟 - 而且这些创作通常甚至无法正常工作。我无法想象我做了什么。我曾尝试卸载 Locomotive，并清除我的目录。这可能是什么原因造成的？与RubyGems有关吗？除了机车还有其他解决方案吗？或者我怎样才能完全卸载 Loco、gems 和我的所有项目并从根本上格式化我的开发环境以重新开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T04:35:29.077

机车不再是必需品了。在 os x 上运行一个像样的 ruby​​ 环境曾经很痛苦，但现在很容易。谷歌“编译 ruby​​ mac os x”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:38:46.317

另一个让你的 Rails 应用程序运行的解决方案是使用[Pow](http://pow.cx/)来服务它，然后使用[Anvil](http://anvilformac.com/)来控制 Pow。

砰！

# linq - 实现 OrderBy / ThenBy 的聪明方法是什么？

> ID：601072
> 
> 赞同：5
> 
> 时间：2009-03-02T02:14:25.783
> 
> 标签：linq, algorithm, language-agnostic

我在 Lua 中实现了一个 LINQ 克隆，但这在这里不太相关，而且我已经完成了大部分功能（可枚举/可查询，还不是预编译器），但想不出一个聪明的方法来实现 OrderBy 的 ThenBy。

目前我排序一次，然后放入新列表，然后对这些子列表进行排序，最后再次合并结果，但这似乎非常浪费和不优雅，我相信有人已经找到了一种聪明的方法（更好的算法），但我不知道它是什么。关于如何以有效方式实施 OrderBy / Thenby 的任何线索？

**注意：**希望语言和语言结构在这里不相关，我正在寻找通用算法，就像二进制排序可以用任何语言完成一样。

**编辑：**目前我正在研究 LINQ to Object，所以特别是如何完成的任何想法都会很棒。我猜 OrberBy/ThenBy 是 2 个函数调用，不是一个，但我可能错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T02:34:01.257

通常，您会使用合适的比较方法来实现多键排序。例如，要按姓氏和名字对名称列表进行排序，您可以使用如下比较函数：

```
int compareNames(Name n1, Name n2)
{
    if (n1.LastName < n2.LastName) {
        return -1;
    } else if (n1.LastName > n2.LastName) {
        return 1;
    } else if (n1.FirstName < n2.FirstName) {
        return -1;
    } else if (n1.FirstName > n2.FirstName) {
        return 1;
    } else {
        return 0;
    }
} 
```

这里的关键点是我们不看`FirstName`成员，除非我们已经知道两个`LastName`成员是相等的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T07:47:55.433

我认为这也有效：

```
function(lh,rh)
    if lh.first < rh.first then
        return true
    elseif lh.second < rh.second then
        return true
    end
    return false
end 
```

如果为真，则意味着这应该有效：

```
tests={}
tests[1]=function(lh,rh) 
    return lh.first < rh.first
end
tests[2]=function(lh,rh)
    return lh.second < rh.second
end

function(lh,rh)
    local res=true
    local k,v
    for k,v in ipairs(tests) do
        res = v(lh,rh)
        if res then break end
    end
    return res
end 
```

# .net - Linq2XSD 死了吗？

> ID：601073
> 
> 赞同：11
> 
> 时间：2009-03-02T02:15:52.707
> 
> 标签：.net, xml, linq, xsd, linq-to-xsd

[自alpha 0.2](http://www.microsoft.com/DownLoads/details.aspx?familyid=A45F58CD-FCFC-439E-B735-8182775560AF&displaylang=en)以来，有人对此有任何更新吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-05T15:19:02.937

[Microsoft 现在已将 LINQ to XSD 作为开源发布，](http://www.westsoft.eu/blog/archive/2009/06/05/linq-to-xsd-is-now-open-source.aspx)以便社区可能会关心它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T22:15:40.840

实际上，Scott Hanselman 有一篇关于这个确切项目的旧博客文章，以及它一度在外界看来已死的事实。当然那是一年前的事了，所以有些事情永远不会改变:)

[http://www.hanselman.com/blog/LINQToEverythingLINQToXSDAddsMoreLINQiness.aspx](http://www.hanselman.com/blog/LINQToEverythingLINQToXSDAddsMoreLINQiness.aspx)

更新：

找到这个论坛帖子，这似乎表明该项目不再活跃：

[http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/2504e84a-1fe0-4eb3-a994-fdbc32121db0/](http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/2504e84a-1fe0-4eb3-a994-fdbc32121db0/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T10:37:53.243

在这里您可以找到 [LINQ to XSD 的状态](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=384913)

您可以在此处找到更多信息 [linq-to-xsd](http://www.westsoft.eu/blog/archive/2009/05/07/linq-to-xsd.aspx)

我仍然希望这个项目将被用于 .net 4.0 和 VS2010

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T16:43:38.390

有趣的想法，实际上在我研究之前我认为 LINQ to XML 会是这样。

这是来自 Microsoft XML 团队的半官方博客：http: [//blogs.msdn.com/xmlteam/archive/2006/11/27/typed-xml-programmer-welcome-to-linq.aspx](http://blogs.msdn.com/xmlteam/archive/2006/11/27/typed-xml-programmer-welcome-to-linq.aspx)

该系列帖子不久前干涸：http: [//blogs.msdn.com/ralflammel/archive/2006/11/13/table-of-contents-for-typed-xml-programmer-series.aspx](http://blogs.msdn.com/ralflammel/archive/2006/11/13/table-of-contents-for-typed-xml-programmer-series.aspx)

也许它现在被搁置了。

# iphone - Objective-C“发送到已释放实例 0x5633b0 的消息”

> ID：601074
> 
> 赞同：25
> 
> 时间：2009-03-02T02:16:07.993
> 
> 标签：iphone, objective-c

我似乎在我的 obj-C 应用程序中进行了一些过分热心的发布 - 收到错误消息

> “-[myobj release]：消息发送到已释放实例 0x5633b0”

. 我知道导致问题的对象实例的类，但是这个类被用来创建许多实例。

我的想法是我可以在类的 init 方法中添加一些日志记录，以记录任何“0x5633b0”对应的内容，这应该有助于我追踪创建实例的位置。

“0x5633b0”到底是什么，有什么方法可以访问代码中的那个值来记录它？

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2010-03-04T09:11:15.413

当我最近遇到类似问题时，最适合我的是以下几点：

1.  在*Project->Edit Active Executable -> Arguments tab -> Environment* variables 部分下，我添加并设置`YES`了以下变量`NSAutoreleaseFreedObjectCheckEnabled`：`NSZombieEnabled`和`NSDebugEnabled`.

2.  在 Run 菜单下，我选择了*Enable Guard Malloc*。

通过这些设置，调试器提供了更多关于我的代码有什么问题的提示。

[（我在这里](http://loufranco.com/blog/files/debugging-memory-iphone.html)找到了这些提示）

祝你好运，奥利

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-03-02T02:22:39.070

`0x5633b0`很可能是相关对象的地址（的值`self`）。您可以使用`NSLog`或`printf`with`%p`来打印它。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-07T11:55:01.273

`0x5633b0`很可能是被释放对象的地址（的值`myobj`）。您可以使用`NSLog`或`printf`with`%p`来打印它。

您还可以使用仪器分析器来查找已释放的对象。

**1\. 启动分析器：**

![在此处输入图像描述](https://i.stack.imgur.com/IBpeG.png)

**2\. 选择“僵尸”并启动分析器。**

![在此处输入图像描述](https://i.stack.imgur.com/AhniJ.png)

**3.点击模拟器，直到你点击“deallocated error case”**

![在此处输入图像描述](https://i.stack.imgur.com/bqM7W.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-07-06T21:38:18.153

在调试器中，键入`info symbol 0x5633b0`，您将获得一些关于它是什么对象的指示。另一件可能有用的事情是`backtrace`它会给你一个堆栈跟踪。总而言之，[这篇博文](http://cocoawithlove.com/2008/10/debugging-tips-for-objective-c.html)有一些**很棒的**提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-11-18T18:29:29.660

您还可以将这些添加到环境变量中：
`MallocStackLoggingNoCompact 1`

并在 gdb 控制台中写入：
`info malloc-history <paste-address-here>`

参考：[这里](http://coderslike.us/2009/05/05/finding-freeddeallocated-instances-of-objects/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-24T08:49:52.277

考虑[使用 NSZombieEnabled 标志](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)。

然后，您将知道您正在发送消息的这个已释放对象是什么。

* * *

## 回答 #7

> 赞同：-12
> 
> 时间：2009-03-02T02:24:40.437

你没有正确管理你的记忆——你在某个对象上调用`release`/`autorelease`的次数比你调用的次数多`retain`。确保您遵循[Cocoa 内存管理编程指南中](http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html)列出的所有规则。

0x5633b0 只是存储对象的内存位置的地址。您可以尝试做的一件事是向该`init`方法添加一些代码：

```
- (void) init
{
    if(self == (MyClass*)0x5633b0)
        NSLog(@"Allocated object at address 0x5633b0");  // put a breakpoint on this line
    // do rest of init...
} 
```

如果您有任何其他`init`方法（例如`initWithCoder:`，为从 XIB 实例化的对象调用的方法），请确保将此代码段也放入这些方法中。在行上放一个断点`NSLog`，然后看看它什么时候被击中。请注意，如果一个对象在该地址分配、释放，然后另一个对象恰好在同一地址重新分配，它可能会被多次命中。崩溃前的最后一击是您想要的。

# .net - .NET 单元测试框架之间有什么区别？

> ID：601075
> 
> 赞同：4
> 
> 时间：2009-03-02T02:18:59.640
> 
> 标签：.net, unit-testing

关于是什么让一个人比另一个人更好，我听到了许多不同的意见。但是任何人都可以提供关于为什么我应该选择一个单元测试框架而不是另一个的技术解释。例如，我使用 Visual Studio Team System。为什么我会选择开源测试框架（NUnit、xUnit、MbUnit 等）而不是 Visual Studio 的内置单元测试功能？有关系吗？

编辑：要清楚，我不是在寻找关于“哪个单元测试框架最好”的意见......我正在寻找关于它们如何不同的技术细节。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-02T02:30:06.400

在[http://www.codeplex.com/xunit/Wiki/View.aspx?title=Comparisons上比较了 NUnit、MbUnit、MSTest 和 xUnit.net 之间的属性和断言差异](http://www.codeplex.com/xunit/Wiki/View.aspx?title=Comparisons)

至于 MSTest vs OpenSource 解决方案，众所周知，开源包，特别是 MBUnit 和 xUnit.net 是围绕单元测试进行创新的地方。

也就是说，既然[Peli de Halleux](http://blog.dotnetwiki.org/)正在为 MS 工作，并且像[Pex](http://research.microsoft.com/en-us/projects/Pex/)一样进行创新，事情可能会发生变化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-02T03:34:17.463

我只使用过 NUnit 和 Microsoft 的相同版本。在我看来，它们的相似之处多于不同之处。但是，根据您的项目设置，可能存在许多相关的财务考虑。

Microsoft 的测试框架在其较便宜/免费的 SKU 中不可用，但是一旦您支付了整个软件包的费用（我知道这并不便宜），您就可以在单个软件包中获得单元测试、测试运行程序和代码覆盖率，这很方便。

如果你切换到 NUnit，你要么必须放弃 VS 集成，要么在 TestDriven.NET 或 Resharper 上获得一个测试运行器。当我查看这些时，它们都需要用于商业用途的许可证。即增加了每个开发人员的成本。此外，这些工具没有代码覆盖率，因此您必须获得类似 NCover 的东西。同样，当我检查时，这带有商业用途的许可证。

诚然，我已经有一段时间没有研究这个问题了，因此许可可能已经改变，但是每个开发人员的额外成本是我们选择使用 Microsoft 解决方案的部分原因。可能是 VS Express 加上其他工具比 VS Team Foundation 便宜，但因为无论如何我们都必须使用 VS TF，这对我们没有什么好处。

如果您正在做开源/非商业项目，我相信您可能可以获得免费版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T02:54:21.753

我已经使用了一些 .NET 的单元测试框架，并且没有发现它们中的任何一个与我的目的有很大不同。

最初反对使用包含在 Visual Studio Team System 中的单元测试的一个论点是，使用较低版本的 Visual Studio 的人无法运行您的测试。现在这不是问题，因为我相信 VS Pro 现在包括单元测试。我喜欢 Visual Studio 可以自动为您生成大量测试工具。

只要您实际编写单元测试，我认为您选择哪种工具并不重要。

# linq-to-sql - 通过 BLL 问题更新 Linq to SQL - 最佳实践

> ID：601080
> 
> 赞同：0
> 
> 时间：2009-03-02T02:23:22.873
> 
> 标签：linq-to-sql, bll

**设置：**

我有一个包含许多字段的大型表单，这些字段被收集以更新 Product 对象。因此，在 ASPX 页面中，用户更改需要更新的字段并点击提交。在后面的代码中，我做了这样的事情；

```
Dim p as New MyCompany.Product()
p = p.GetProductById(ProductID) 
```

我将 Linq 的 Product 部分类扩展为 SQL 以将此方法（GetProductById）添加到对象

```
p.Name = txtName.Text
p.SKU = txtSKU.Text
p.Price = txtPrice.Text
...    
p.Update() 
```

这是扩展产品部分类中的更新方法。我更新数据库、发送电子邮件和更新历史表，所以我希望这种方法能够完成所有这些事情。

该项目还有 50 个字段，因此显然拥有一个收集所有 50 个字段的方法是荒谬的（而且我不想走那条路，因为调试 IMO 更难）

**问题：**

如果我使用 DataContext 通过 Linq to SQL 获取产品，那么我将永远无法再次更新它，因为它会出错，因为它无法附加和已经附加到另一个 DataContext 的实体。

**问题：**

因此，如果我通过 BLL 中的方法获取对象，在 ASPX 页面中更新它，然后尝试再次通过 BLL 发送更新以更新数据库，我应该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T02:42:24.967

不管 LINQ-to-SQL 与否，这就是我所做的。提交后，我搜索项目（如果是使用PK的单个项目应该很快），我的DAL返回一个数据对象，我使用反射将页面中的每个元素映射到数据对象中的相应属性。我的 DAL 仅更新更改的项目。

我认为你必须做的是相同的，收集所有值并提交它们。如果 LinqToSql 不够聪明，无法确定发生了什么变化，那么它可能不是最佳选择。

# java - 签名的 Jar 可以作为可执行文件运行吗？

> ID：601088
> 
> 赞同：0
> 
> 时间：2009-03-02T02:33:12.180
> 
> 标签：java, jar, java-web-start

我问是因为我有一个运行的未签名 jar 和一个没有运行的签名版本。查看清单，我看不到签名的主要类的东西。

我必须从 web start 运行一个签名的 jar 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T02:36:25.667

不一定，但如果您没有 Main-class: 在清单中，则无法将其作为可执行文件运行。如果您知道主类，则可以使用 java 可执行文件运行它，例如

```
$ java -classpath ./myjar.jar MyClass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-12T19:49:22.623

听起来您的构建过程已更新 manifast.mf

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-20T17:56:26.223

您需要签署您的 jar 以在 web 启动沙箱之外运行......

[谷歌在这里](http://www.google.com/search?hl=en&q=jnlp+all-permissions&btnG=Search)

# windows - 检测当前 Windows 版本是 32 位还是 64 位

> ID：601089
> 
> 赞同：64
> 
> 时间：2009-03-02T02:33:34.597
> 
> 标签：windows, batch-file, 64-bit

信不信由你，我的安装程序太旧了，它没有检测 64 位版本 Windows 的选项。

是否有 Windows DLL 调用或（甚至更好）环境变量可以为 Windows XP 和 Windows Vista 提供该信息？

**一种可能的解决方案**

我看到 Wikipedia 指出 64 位版本的 Windows XP 和 Windows Vista 有一个独特的环境变量：`%ProgramW6432%`，所以我猜在 32 位 Windows 上它是空的。

该变量指向`Program Files`目录，该目录存放了Windows等所有已安装的程序。英语语言系统的默认值为`C:\Program Files`. 在 64 位版本的 Windows（XP、2003、Vista）中，还有`%ProgramFiles(x86)%`哪些默认为. 本身取决于请求环境变量的进程本身是 32 位还是 64 位（这是由 Windows-on-Windows 64 位重定向引起的）。`C:\Program Files (x86)``%ProgramW6432%``C:\Program Files``%ProgramFiles%`

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-12-02T13:53:59.943

要在命令框中检查 64 位版本的 Windows，我使用以下模板：

测试.bat：

```
@echo off
if defined ProgramFiles(x86) (
    @echo yes
    @echo Some 64-bit work
) else (
    @echo no
    @echo Some 32-bit work
) 
```

`ProgramFiles(x86)`是仅在 Windows 64 位机器上由 cmd.exe（32 位和 64 位版本）自动定义的环境变量。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-10-27T22:25:39.520

下面是一些 Delphi 代码，用于检查您的程序是否在 64 位操作系统上运行：

```
function Is64BitOS: Boolean;
{$IFNDEF WIN64}
type
  TIsWow64Process = function(Handle:THandle; var IsWow64 : BOOL) : BOOL; stdcall;
var
  hKernel32 : Integer;
  IsWow64Process : TIsWow64Process;
  IsWow64 : BOOL;
{$ENDIF}
begin
  {$IFDEF WIN64}
     //We're a 64-bit application; obviously we're running on 64-bit Windows.
     Result := True;
  {$ELSE}
  // We can check if the operating system is 64-bit by checking whether
  // we are running under Wow64 (we are 32-bit code). We must check if this
  // function is implemented before we call it, because some older 32-bit 
  // versions of kernel32.dll (eg. Windows 2000) don't know about it.
  // See "IsWow64Process", http://msdn.microsoft.com/en-us/library/ms684139.aspx
  Result := False;
  hKernel32 := LoadLibrary('kernel32.dll');
  if hKernel32 = 0 then RaiseLastOSError;
  try
    @IsWow64Process := GetProcAddress(hkernel32, 'IsWow64Process');
    if Assigned(IsWow64Process) then begin
      if (IsWow64Process(GetCurrentProcess, IsWow64)) then begin
        Result := IsWow64;
      end
      else RaiseLastOSError;
    end;
  finally
    FreeLibrary(hKernel32);
  end;  
  {$ENDIf}
end; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2011-11-27T16:20:34.633

从批处理脚本：

```
IF PROCESSOR_ARCHITECTURE == x86 AND
   PROCESSOR_ARCHITEW6432 NOT DEFINED THEN
   // OS is 32bit
ELSE
   // OS is 64bit
END IF 
```

使用 Windows [API](http://en.wikipedia.org/wiki/Application_programming_interface)：

```
if (GetSystemWow64Directory(Directory, MaxDirectory) > 0) 
   // OS is 64bit
else
   // OS is 32bit 
```

资料来源：

1.  *[HOWTO：检测进程位数](http://blogs.msdn.com/b/david.wang/archive/2006/03/26/howto-detect-process-bitness.aspx)*
2.  *[GetSystemWow64Directory 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724405%28v=vs.85%29.aspx)*

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-03-17T19:05:28.953

我测试了我在问题中建议的解决方案：

测试 Windows 环境变量：ProgramW6432

如果它不是空的，那么它是 64 位 Windows.W

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2011-11-27T16:09:11.987

*[请参阅如何检查计算机是否正在运行 32 位或 64 位操作系统](http://support.microsoft.com/kb/556009/en-us)*中列出的批处理脚本。它还包括从注册表中检查此内容的说明：

您可以使用以下注册表位置检查计算机是否运行 32 位或 64 位 Windows 操作系统：

```
HKLM\HARDWARE\DESCRIPTION\System\CentralProcessor\0 
```

您将在右窗格中看到以下注册表项：

```
Identifier     REG_SZ             x86 Family 6 Model 14 Stepping 12
Platform ID    REG_DWORD          0x00000020(32) 
```

上面的“x86”和“0x00000020(32)”表示操作系统版本为32位。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-03-02T02:40:30.243

如果您可以进行 API 调用，请尝试使用[GetProcAddress](http://msdn2.microsoft.com/en-us/library/ms683212.aspx) / [GetModuleHandle](http://msdn2.microsoft.com/en-us/library/ms683199.aspx)检查是否存在[IsWow64Process](http://msdn2.microsoft.com/en-us/library/ms684139.aspx)，它仅存在于具有 64 位版本的 Windows 操作系统中。

您也可以尝试在 Vista/2008 中使用**ProgramFiles(x86)**环境变量以实现向后兼容性，但我不能 100% 确定 XP-64 或 2003-64。

祝你好运！

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2010-03-04T23:29:40.033

我在登录脚本中使用它来检测 64 位 Windows

```
if "%ProgramW6432%" == "%ProgramFiles%" goto is64flag 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-03-02T02:40:57.823

我不知道您使用的是什么语言，但如果操作系统是 64 位， [.NET](http://en.wikipedia.org/wiki/.NET_Framework)具有环境变量。`PROCESSOR_ARCHITEW6432`

如果您只想知道您的应用程序是运行 32 位还是 64 位，您可以检查`IntPtr.Size`. 如果在 32 位模式下运行，则为 4，如果在 64 位模式下运行，则为 8。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-12-14T14:39:27.250

对于检索操作系统或硬件的实际位数（32 或 64）的 VBScript/WMI 单行程序，请查看[http://csi-windows.com/toolkit/csi-getosbits](http://csi-windows.com/toolkit/csi-getosbits)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-07-08T14:37:14.890

我想在此处添加我在 shell 脚本中使用的内容（但可以轻松地以任何语言使用）。原因是，这里的一些解决方案不适用于 WoW64，有些使用了并非真正适用的东西（检查是否有 *(x86) 文件夹）或者在 cmd 脚本中不起作用。我觉得，这是“正确”的做法，即使在未来的 Windows 版本中也应该是安全的。

```
 @echo off
 if /i %processor_architecture%==AMD64 GOTO AMD64
 if /i %PROCESSOR_ARCHITEW6432%==AMD64 GOTO AMD64
    rem only defined in WoW64 processes
 if /i %processor_architecture%==x86 GOTO x86
 GOTO ERR
 :AMD64
    rem do amd64 stuff
 GOTO EXEC
 :x86
    rem do x86 stuff
 GOTO EXEC
 :EXEC
    rem do arch independent stuff
 GOTO END
 :ERR
    rem I feel there should always be a proper error-path!
    @echo Unsupported architecture!
    pause
 :END 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-03-24T04:42:49.113

很多答案都提到了调用`IsWoW64Process()`或相关功能。这不是*正确*的方法。您应该使用`GetNativeSystemInfo()`为此目的而设计的。这是一个例子：

```
SYSTEM_INFO info;
GetNativeSystemInfo(&info);

if (info.wProcessorArchitecture == PROCESSOR_ARCHITECTURE_AMD64) {
  // It's a 64-bit OS
} 
```

另请参阅： [https ://msdn.microsoft.com/en-us/library/windows/desktop/ms724340%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms724340%28v=vs.85%29.aspx)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-02-02T14:31:09.640

我不知道它存在于哪个 Windows 版本，但在 Windows Vista 及更高版本上运行：

```
Function Is64Bit As Boolean
    Dim x64 As Boolean = System.Environment.Is64BitOperatingSystem
    If x64 Then
       Return true
    Else
       Return false
    End If
End Function 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-02T03:00:42.457

在 C# 中：

```
public bool Is64bit() {
    return Marshal.SizeOf(typeof(IntPtr)) == 8;
} 
```

在[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)中：

```
Public Function Is64bit() As Boolean
   If Marshal.SizeOf(GetType(IntPtr)) = 8 Then Return True
   Return False
End Function 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-01-09T13:03:38.483

我用这个：

```
@echo off
if "%PROCESSOR_ARCHITECTURE%"=="AMD64" (
 echo 64 BIT
) else (
 echo 32 BIT
) 
```

它适用于 Windows XP，在 64 位和 32 位的 Windows XP Professional 上对其进行了测试。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-01-02T13:16:36.607

我在 Windows 7 x64/x86 和 Windows XP x86 上测试了以下批处理文件，它很好，但我还没有尝试过 Windows XP x64，但这可能会起作用：

```
If Defined ProgramW6432 (Do x64 stuff or end if you are aiming for x86) else (Do x86 stuff or end if you are aiming for x64) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-01-19T21:43:33.193

我知道这是古老的，但这是我用来检测 Win764 的

```
On Error Resume Next

Set objWSHShell = CreateObject("WScript.Shell")

strWinVer = objWSHShell.RegRead("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\BuildLabEx")

If len(strWinVer) > 0 Then
    arrWinVer = Split(strWinVer,".")
    strWinVer = arrWinVer(2)
End If

Select Case strWinVer
Case "x86fre"
strWinVer = "Win7"
Case "amd64fre"
    strWinVer = "Win7 64-bit"
Case Else
    objWSHShell.Popup("OS Not Recognized")
    WScript.Quit
End Select 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-01-21T22:15:07.137

使用 Windows Powershell，如果以下表达式返回 true，则它是 64 位操作系统：

`(([Array](Get-WmiObject -Class Win32_Processor | Select-Object AddressWidth))[0].AddressWidth -eq 64)`

这是从：[http](http://depsharee.blogspot.com/2011/06/how-do-detect-operating-system.html) ://depsharee.blogspot.com/2011/06/how-do-detect-operating-system.html （方法＃3）获取和修改的。我已经在 Win7 64 位（在 32 位和 64 位 PowerShell 会话中）和 XP 32 位上对此进行了测试。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-04-25T07:42:47.207

最好的方法肯定是检查是否有两个程序文件目录，“程序文件”和“程序文件（x86）”这种方法的优点是你可以在操作系统没有运行时执行它，例如，如果机器无法启动，您希望重新安装操作系统

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-07-09T03:17:28.473

有趣的是，如果我使用

```
get-wmiobject -class Win32_Environment -filter "Name='PROCESSOR_ARCHITECTURE'" 
```

我在 32 位和 64 位 ISE 中都获得了 AMD64（在 Win7 64 位上）。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-08-20T09:20:58.903

[eGerman 创建的](http://www.dostips.com/forum/viewtopic.php?f=3&t=5826)另一种方法 ，使用 PE 编号的已编译可执行文件（不依赖于注册表记录或环境变量）：

```
@echo off &setlocal

call :getPETarget "%SystemRoot%\explorer.exe"

if "%=ExitCode%" EQU "00008664" (
    echo x64
) else (
    if "%=ExitCode%" EQU "0000014C" (
        echo x32
    ) else (
        echo undefined
    )
)

goto :eof

:getPETarget FilePath
:: ~~~~~~~~~~~~~~~~~~~~~~
:: Errorlevel
::   0 Success
::   1 File Not Found
::   2 Wrong Magic Number
::   3 Out Of Scope
::   4 No PE File
:: ~~~~~~~~~~~~~~~~~~~~~~
:: =ExitCode
::   CPU identifier

setlocal DisableDelayedExpansion
set "File=%~1"
set Cmp="%temp%\%random%.%random%.1KB"
set Dmp="%temp%\%random%.%random%.dmp"

REM write 1024 times 'A' into a temporary file
if exist "%File%" (
  >%Cmp% (
    for /l %%i in (1 1 32) do <nul set /p "=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
  )
  setlocal EnableDelayedExpansion
) else (endlocal &cmd /c exit 0 &exit /b 1)

REM generate a HEX dump of the executable file (first 1024 Bytes)
set "X=1"
>!Dmp! (
  for /f "skip=1 tokens=1,2 delims=: " %%i in ('fc /b "!File!" !Cmp!^|findstr /vbi "FC:"') do (
    set /a "Y=0x%%i"
    for /l %%k in (!X! 1 !Y!) do echo 41
    set /a "X=Y+2"
    echo %%j
  )
)
del !Cmp!

REM read certain values out of the HEX dump
set "err="
<!Dmp! (
  set /p "A="
  set /p "B="
  REM magic number has to be "MZ"
  if "!A!!B!" neq "4D5A" (set "err=2") else (
    REM skip next 58 bytes
    for /l %%i in (3 1 60) do set /p "="
    REM bytes 61-64 contain the offset to the PE header in little endian order
    set /p "C="
    set /p "D="
    set /p "E="
    set /p "F="
    REM check if the beginning of the PE header is part of the HEX dump
    if 0x!F!!E!!D!!C! lss 1 (set "err=3") else (
      if 0x!F!!E!!D!!C! gtr 1018 (set "err=3") else (
        REM skip the offset to the PE header
        for /l %%i in (65 1 0x!F!!E!!D!!C!) do set /p "="
        REM next 4 bytes have to contain the signature of the PE header
        set /p "G="
        set /p "H="
        set /p "I="
        set /p "J="
        REM next 2 bytes contain the CPU identifier in little endian order
        set /p "K="
        set /p "L="
      )
    )
  )
)
del !Dmp!
if defined err (endlocal &endlocal &cmd /c exit 0 &exit /b %err%)

REM was the signature ("PE\0\0") of the PE header found
if "%G%%H%%I%%J%"=="50450000" (
  REM calculate the decimal value of the CPU identifier
  set /a "CPUID=0x%L%%K%"
) else (endlocal &endlocal &cmd /c exit 0 &exit /b 4)
endlocal &endlocal &cmd /c exit %CPUID% &exit /b 0 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-11-20T13:58:20.037

这是批处理脚本的更简单方法

```
 @echo off

    goto %PROCESSOR_ARCHITECTURE%

    :AMD64
    echo AMD64
    goto :EOF

    :x86 
    echo x86
    goto :EOF 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-12-23T00:16:25.437

**回答较新版本的 Windows**

今天，我在另一个问题上发布了一些代码，并解释了如何使用 IsWow64Process2 为 Windows 10 版本 1511 或更高版本和 Windows Server 2016 执行此操作。此外，代码确定进程是 32 位还是 64 位以及进程是否正在运行在WOW64模拟器下。

我发布答案的主要原因之一是因为虽然有几个使用 IsWow64Process2 的建议，但我看到的代码没有显示如何使用。

请在此处查看答案：[https ://stackoverflow.com/a/59377888/1691559](https://stackoverflow.com/a/59377888/1691559)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-09-12T09:04:08.897

您可以使用来自 npm 的名为 @wider/utils_where-am-i 的模块。这可以在 Windows 机器和其他地方（如 linux）上的任何 javascript 环境中运行。在 Windows 机器上，它提供一个具有 { os: 'win32' } 或 { os : 'win64' } 的对象。它可以在 wshell、经典 ASP 或 nodeJS 中作为传统的纯 javascript 运行

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2013-04-04T15:36:05.463

检查注册表是否存在 HKLM\SOFTWARE\Wow6432Node - 如果存在，则系统为 64 位 - 32 位，否则。

# sql-server - 使用 SSMA 将 Access 2007 数据库应用程序迁移到 SQL Server 2005 - 问题

> ID：601094
> 
> 赞同：2
> 
> 时间：2009-03-02T02:36:57.663
> 
> 标签：sql-server, ms-access, ms-access-2007, sql-server-migration-assi

我已经设法在我的计算机上启动并运行 SQL Server 2005 Express，以便在“真实世界”中尝试之前进行一些测试。

我有一个相当大的 MS Access 2007 数据库应用程序，我需要迁移到保留“前端”作为用户界面的 SQL Server。（该应用程序已经是一个具有前端和后端的“拆分”数据库......）

我已经对使用 SSMA 将我的 Access 数据库迁移到 SQL Server Express 进行了一些初步测试。

显然我不明白一些事情，我想我会看看是否有人有任何想法。

从概念上讲，我认为需要将驻留在服务器上的数据库后端迁移到 SQL 服务器，然后前端重新链接到后端中的（现在链接到 SQL）表。

当我使用 SSMA 执行此操作时，我最终会在后端访问文件中重命名表，这些表看起来像“SSMA$myTableNameHere$local”。我还得到下面显示为 ODBC 链接表的原始表名。

到目前为止，一切都很好。

但是....当我从前端（用户界面）重新建立链接表时，我只能看到“SSMA$myTableNameHere$local”名称而不是原始表名。（现在通过 ODBC 链接）我可以链接到“SSMA,,,”表，但这意味着在每个查询、每个表单以及前端的所有代码中更改每个表的名称！不是我真正想做的事情。

所以....

我想我会尝试迁移 FRONT END 看看会发生什么。

我最终得到的是一种情况，基本上它可以工作（有一些我什至还没有看过的严重错误和问题......比如丢失数据等！！！！）我仍然得到“SSMA $myTableNameHere$local" 表和具有原始名称的 ODBC 链接表。

我试图理解......这是否意味着我们将在前端进行迁移，然后将相同的文件复制到每个用户的计算机上？

我有点困惑的另一个主题是我无法通过 ODBC 链接到本地​​机器（即我的计算机）上的 SQL Server Express，因此我无法测试迁移后端然后通过前端链接到表就像我过去在更多的客户端/服务器情况下一样结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T23:34:47.420

假设 SSMA 将后端的表替换为 SQL Server 的链接，那么您需要做的就是删除*前端的原始表链接并**从*后端导入新创建的表链接。然后您可以丢弃后端，因为它不再用于任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-19T19:39:01.697

选择导出，从下拉列表中选择 ODBC，从数据源窗口中选择您的数据源，您已创建，单击确定 将 SQL Server 与 SQL Management Studio Express 一起使用。所有日期都必须有输入掩码；所有文本和备注必须有允许零长度=是毕竟断开所有与Access后端的链接，并建立从SQL.RENAME所有新链接的表到旧名称的链接。使用前端用户界面，直到做一些新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T22:32:55.370

请原谅我对 Acronym Soup 的了解不足，但我假设 SSMA 是 SQL Server 2005“导入数据向导”或 Access 中用于将数据发送到 SQL Server 的向导。您似乎从 Access 将数据发送到 SQL Server - 这是您不想做的事情。您想使用 SQL Server 中的 DTS（现在称为 SSIS 什么的？）将数据导入 SQL Server。然后，您将在 SQL Server 中拥有您的表。然后，只需为 SQL Server 创建您的 DSN 条目并重新链接您的表。一切都应该很好。

总的来说，一般规则是使用 SQL Server 导入 Access 表，而不是使用 Access 将数据发送到 SQL Server。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-10T18:01:15.143

我会咬紧牙关，将 SQLServer 端的表重命名为原始数据库中的友好名称。你可能会遇到更少的问题。特别是如果您在 MS Access 端有任何嵌入式代码。

至于你现在将如何部署 MS Access 端，它应该几乎是在用户的工作站上创建 ODBC 链接，并将 MS Access 文件复制到他们的桌面（尽管你可能想要制作一个 MDE（或 2007 等效) 以防止他们意外破坏它）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-10T18:10:18.820

坦率地说，现在您已经迁移了，您需要查看表的设计。根据我的经验，Access 迁移向导在选择正确的数据类型方面做得很差。例如，如果您有一个备注字段，您可能很容易改用 varchar 字段，但我使用的最后一个向导（早期版本）总是将它们转换为文本字段。现在也是考虑一些修复的时候了，例如，如果您过去曾犯过该错误，则将日期文件设为日期时间而不是基于字符。

我永远不会考虑再次使用向导来进行数据迁移，因为我经历过他们做得非常糟糕。

您还会发现，仅仅将数据转换为 SQL Server 通常不足以真正获得任何性能优势。您将需要测试所有查询并考虑是否可以将它们转换为存储过程，而不是如果它们很慢。消除从 Jet SQL 到 T-sql 的转换可以提高性能。另外，t-sql 的许多功能可以提高没有 Access 等效项的性能。Access 在性能调整方面并不重要，但要获得使用 SQL Server 后端进行性能调整的好处，您需要编写特定于 SQL Server 的查询。如果 Access 表没有正确索引，则需要考虑索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-28T10:34:29.107

使用 odbc 时使用 SSMA 有所不同。如果您的应用程序使用完全访问（后端和前端）。您可以轻松地操作对象绑定表单，使用 DAO 等。没有问题，然后当您需要将数据库迁移到 sql server 时，您可以直接使用 odbc（通过将自己的表链接到 sql server），ssma，...主要问题如何在客户端保留有界表单、查询和代码。如果您直接使用 odbc，您必须自己重新链接所有对象并更改代码，但如果您使用 ssma，您无需执行任何操作，您将继续像以前一样工作。SSMA 的问题是，如果您使用另一个 sql server 在其他地方开发客户端，如何将前端部署到客户端？

# css - 使用 CSS 分发内联元素

> ID：601096
> 
> 赞同：5
> 
> 时间：2009-03-02T02:37:58.907
> 
> 标签：css

有没有一种简单的方法可以使用 CSS 在父块容器中分配内联元素？将边距设置为自动不起作用，因为内联元素之间的边距设置为 0，并且我不想乱用百分比，因为内容是动态的。

特别是，我在一个段落 (p) 中有几个锚元素 (a)，跨越了其容器的 80%，我正在寻找一种简单的方法将它们均匀地分布在段落中。

编辑（@cletus）：段落不会换行，锚是段落中唯一的东西。通过均匀分布，我的意思是左（右）边缘和第一个（最后一个）元素与元素本身之间的空间是等距的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T05:11:00.920

不幸的是，这在 CSS 中是不可能的。然而，在元素宽度相等的特殊情况下，[这个 CSS hack](http://css-tricks.com/equidistant-objects-with-css/)让它变得相当容易。

对于可变宽度元素之间的等距间距，即使以百分比为每个元素的容器指定宽度也是不够的。这仍然会在元素之间创建可变宽度。

这可能与大多数现代浏览器上的 JavaScript 相关。 [这是一个示例页面，](http://seas.ucla.edu/~trey/equid.html)展示了一个执行不佳的 JavaScript hack，并证明尝试使用文本对齐来解决此问题将无法可靠地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T05:27:22.080

如果 CSS3 是可接受的（即，如果它在 IE6 中的外观不是最重要的），您可以使用“table”和“table-cell”的显示属性值来使用任何类型的元素的表格显示模型；“inline-block”也是需要考虑的事情，它就像一个块而不换行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T08:06:08.807

嗯，听起来像你在创建一个菜单？您可能希望使用列表来保存锚点并相应地设置列表样式。这是普遍接受的最佳实践。

至于元素的均匀分布，我昨天正在寻找类似的东西，我希望它会出现在 CSS3 规范中，但它不是（至少我找不到它），如果你问的话，这似乎是一个主要的 f*ckup我。反正...

这留下了两个选择。CSS 和 Javascript。

使用 CSS，为每个元素使用 margin-right 属性。最好创建一个 .last 类，将 margin-right 设置为零，以防止最后一个元素破坏布局。

有一堆 javascripts 可以为你做这件事。我更喜欢只在绝对必要时使用 JS，所以我无法评论哪个是最好的。

...你可以尝试最后一件事，但是...你没听我说，好吗？

你可以用一张桌子。这是获得您想要的东西的最快（也是最肮脏）的方式。

恕我直言，你可能不想听到这个，但设计可能有缺陷。众所周知，使用 CSS 在布局中均匀分布项目是一种痛苦，因此设计师应该避免使用它。

更新：你也可以试试

```
.link_container { text-align: center; }
.link_container a { margin-right: 10x; }
.last { margin-right: 0; } 
```

然后使用这样的东西

```
<div class='link-container'>
    <a href='...'>Some line</a>
    <a href='...'>Some line</a>
    <a href='...'>Some line</a>
    <a class='last' href='...'>Some line</a>
</div> 
```

这可能会让你接近。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-05-10T16:53:20.110

我发现的最佳解决方案是将包含的 div 居中对齐，然后为每个链接提供一个固定且合理的左右填充，以适应长链接和短链接。虽然这不会使您的链接在顶部栏中一直保持均匀，但它会提供视觉上令人愉悦的效果。

```
<div style='text-align:center'>
    <a style='padding-left:10px;padding-right:10px'>Link 1</a>
    <a style='padding-left:10px;padding-right:10px'>Link 2</a>
    <a style='padding-left:10px;padding-right:10px'>Link 3</a>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T02:50:42.183

有点不清楚“均匀分布”是什么意思；难道是你想证明段落的内容？

```
p { text-align: justify; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T04:22:35.850

你的锚有特定的宽度设置吗？我认为这可能是任何保证金汽车工作所必需的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-09-13T14:13:35.000

在容器上使用 display: table 并在其中的项目上使用 display: table-cell 似乎对我有用。它甚至适用于 IE8

```
<!DOCTYPE html>
<html>
<head>
<!-- insert reset CSS here -->
    <style type="text/css">
    #header {
        width: 940px;
        margin: 0 auto;
        background-color: #E6EFE6;
    }

    #main_nav {
        width: 100%;
        display: table;
    }

    #main_nav .nav-item {
        display: table-cell;
        text-align:center;
    }
    </style>
</head>
<body>
<div id="header">
    <ul class="" id="main_nav">
        <li class="nav-item first">
            <a href="#">Item 1</a>
        </li>
        <li class="nav-item">
            <a href="#">Item 2</a>
        </li>
        <li class="nav-item">
            <a href="#">Item 2</a>
        </li>
        <li class="nav-item">
            <a href="#">Item 2</a>
        </li>
        <li class="nav-item">
            <a href="#">Item 2</a>
        </li>
        <li class="nav-item">
            <a href="#">Item 2</a>
        </li>
        <li class="nav-item last">
            <a href="#">Item 3</a>
        </li>
    </ul>
</div>
<body>
</html> 
```

# javascript - 使用 Javascript 将 xml 加载到类中

> ID：601102
> 
> 赞同：1
> 
> 时间：2009-03-02T02:40:50.680
> 
> 标签：javascript, xml

如何使用 Javascript 将 XML 文件加载到类中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-02T02:50:48.423

不幸的是，每个浏览器都有自己的方式来解析包含 XML 的字符串。以下是我所知道的三大浏览器中的每一个的方式。请注意，我没有机会尝试这些，因为它们是从各种博客和我自己的记忆中拼凑而成的。

Firefox 有一个名为的对象`DOMParser`，可用于解析字符串中的 XML。API 非常简单——实例化`DOMParser`并调用它的`parseFromString`方法。这是一个例子：

```
var xmlString = '<?xml version="1.0"?>...';
var parser = new DOMParser();
var dom = parser.parseFromString(theString, "text/xml");
// use dom 
```

IE 使用 Microsoft ActiveX XMLDOM 控件，因此您必须实例化 DOM 控件并使用它的方法，这里再举一个例子：

```
var xmlString = '<?xml version="1.0"?>...';
dom=new ActiveXObject("Microsoft.XMLDOM");
dom.async="false";
dom.loadXML(xmlString);
// use dom 
```

最后，怪异的 Safari 版本。Safari 没有内置解析器，而且它不在 Windows 上运行，因此不支持 ActiveX 控件。但是，Safari 确实支持`data:`url。在 Safari 中，文档的 URL 是通过 XMLHTTPRequest 创建和调用的。与所有 XMLHttpRequest 一样，您使用 XMLHttpRequest 的标准`responseXml`属性来访问 DOM。

```
var xmlString = '<?xml version="1.0"?>...';
var url = "data:text/xml;charset=utf-8," + encodeURIComponent(xmlString);

var xhr = new XMLHttpRequest();
xhr.open("GET", url, false);
xhr.send(null);

var dom = xhr.responseXML;
// Use dom here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T02:42:30.940

我不知道 JavaScript 中有内置的 XML 序列化器/反序列化器。你认为是 JavaScript 原生的东西，比如 JSON 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T02:45:23.163

这是一个[XML 到 JSON Javascript 转换器](http://www.thomasfrank.se/xml_to_json.html)，它可能会引导您朝着正确的方向前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T12:55:56.160

此代码适用于所有类型的浏览器

```
var url="file.xml"
var xmlDoc="";
if(window.XMLHttpRequest&&!window.ActiveXObject)
{
    var Gz=new XMLHttpRequest();Gz.open('GET',url,false);Gz.send(null);xmlDoc=Gz.responseXML;
}
else
{
    xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.load(url);
} 
```

使用后，您可以解析标签并检索数据。

# dataset - 数据集字段 DBNull -> int?

> ID：601114
> 
> 赞同：2
> 
> 时间：2009-03-02T02:45:53.833
> 
> 标签：dataset, nullable, dbnull

SQLServer int 字段。值有时为空。DataAdapter 填充数据集 OK 并可以在 DatagridView 中显示数据 OK。

尝试以编程方式从数据集中检索数据时，Dataset 字段检索代码会引发 StronglyTypedException 错误。

```
 [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    public int curr_reading {
        get {
            try {
                return ((int)(this[this.tableHistory.curr_readingColumn]));
            }
            catch (global::System.InvalidCastException e) {
                throw new global::System.Data.StrongTypingException("The value for column \'curr_reading\' in table \'History\' is DBNull.", e);
            } 
```

通过在 get 访问器中检查 DBNull 并返回 null 解决了这个问题，但是......当数据集结构被修改（仍在开发中）时，我的更改（不出所料）消失了。

处理这种情况的最佳方法是什么？看来我被困在数据集级别处理它。是否有某种属性可以告诉自动代码生成器保留更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-03T07:47:41.637

在类型化的数据集设计器中有`nullvalue`属性。默认情况下，它的值是`throw exception`（因此您生成的代码）您可以将其设置为所需的`default value`.. 即。0\. 然后它将返回 0 而不是异常。（生成其他代码）

VS2008：这直接在数据集设计器中工作。

VS2005：它仅适用于设计器中的字符串，但您可以直接编辑 XSD 并设置属性 msprop:nullValue="0"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T02:53:52.910

1.  不理会自动生成的代码。没有办法“拦截”它的生成，因此您所做的任何更改都保证迟早会被吹走。

2.  .NET（至少是 .NET 2.0 system.data 位）不会从 DBNull 转换为其他任何东西。这很糟糕，但你无能为力。

3.  编写一个名为 ToNullable() 或类似的扩展方法：它可以这样做：

.

```
public static Nullable<T> ToNullable(this object x){
    if(x == DBNull.Value)
       return default(T); // return null thing
    else
       return (T)x;
} 
```

那么你可以做

```
int? thing = DataRow["column"].ToNullable<int>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T02:52:28.653

数据集将有一个布尔属性来指示空值。

```
int curr_reading = ( Iscurr_readingColumnNull) ? 
                   <default_value> : row.curr_readingColumn; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T02:49:44.310

如果有记忆，您需要将该行标记为正在编辑 - 使用 .BeginEdit() 或类似的 - 然后进行编辑并保存该行，可能使用 .EndEdit() 或类似的。您可能想稍微了解一下这些方法（它们可能在 DataSet、DataTable 或 DataRow 上）——我的记忆有点模糊。

希望这至少有一点帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-07T06:33:25.493

```
if(row["curr_reading"] is DBNull){

}else{
    row.curr_reading;
} 
```

# javascript - 检测浏览器对 display:inline-block 的支持

> ID：601118
> 
> 赞同：8
> 
> 时间：2009-03-02T02:48:53.733
> 
> 标签：javascript, css, cross-browser, browser-detection

如何检测浏览器是否支持 CSS 属性 display:inline-block？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-02T04:38:56.620

好吧，如果您只想通过检查浏览器的浏览器 w/javascript 而不是用户代理嗅探来做到这一点，那么您可以这样做：

设置测试场景和控制场景。比如说，下面的结构：

*   div
    *   带有内容“测试”的 div
    *   带有内容“test2”的 div

将一个副本插入到文档中，两个内部 div 设置为 inline-block，另一个副本插入到文档中，两个内部 div 设置为块。如果浏览器支持 inline-block，那么包含的 div 将具有不同的高度。

~~替代答案：~~

~~您还可以使用 getComputedStyle 来查看浏览器如何处理给定元素的 css。因此，理论上，您可以使用“display: inline-block”添加一个元素，然后检查 computedStyle 以查看它是否存在。唯一的问题：IE 不支持 getComputedStyle。相反，它具有 currentStyle。我不知道 currentStyle 的功能是否相同（大概它的功能类似于我们想要的行为：忽略“无效”值）。~~

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-02T03:01:48.740

根据[QuirksMode 图表](http://www.quirksmode.org/css/display.html#t03)，唯一不支持的主流浏览器`inline-block`是 IE6 和 7。（嗯，他们支持它，但仅适用于具有本机`display`类型的元素`inline`。）我只是假设它受支持，然后应用解决方法IE6/7 通过[条件注释](http://www.quirksmode.org/css/condcom.html)。

（注意：我忽略了 Firefox 2 缺乏对 Firefox 2 的支持，`inline-block`并假设绝大多数用户已经升级到 FF3，但简短的谷歌搜索并没有发现任何支持这一点的数字。YMMV。）

但是，如果确定 JavaScript 的支持是您唯一的选择，那么您将不得不回退到用户代理嗅探。[YUI 库](http://developer.yahoo.com/yui/)中的[YAHOO.env.ua](http://developer.yahoo.com/yui/docs/YAHOO.env.ua.html)类是一个方便的代码块，您可以复制和使用它。（它是 BSD 许可的，不依赖于 YUI 库的其他部分，并且只有大约 25-30 行没有注释）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-02-04T10:54:28.530

顺便说一句：在 IE6+、FF2+、Opera 和 WebKit 中使用 CSS 实现跨浏览器内联块是[一种很好的方法。](http://blog.mozilla.com/webdev/2009/02/20/cross-browser-inline-block/)（无效的 CSS，但仍然只有 CSS。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-02-19T08:21:59.863

[克里斯托弗斯瓦西](https://stackoverflow.com/questions/601118/detect-browser-support-for-displayinline-block/601288#601288)是完全正确的。

[我在http://ajh.us/test-inline-block](http://ajh.us/test-inline-block)上设置了他的技术的 jsFiddle 演示。

代码本质上是：

```
var div = document.createElement('div');
div.style.cssText = 'display:inline-block';

// need to do this or else document.defaultView doesn't know about it
$('body').append(div); 
// that was jQuery. It’s possible to do without, naturally

var results = false;

if (div.currentStyle) {
    results = (div.currentStyle['display'] === 'inline-block');
} else if (window.getComputedStyle) {
  results = document.defaultView.getComputedStyle(div,null).getPropertyValue('display')=== 'inline-block';  
}

//clean up
$(div).remove();

alert('display: inline-block support: '+results); 
```

请注意，这种完全相同的技术也适用于检测`display: run-in`支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T02:53:47.043

使用 Javascript 无法检测到这一点，因为它是一个纯 CSS 属性，与 Javascript 中的任何对象或函数无关。我可以告诉你的最好的事情是在[这里](http://www.quirksmode.org/css/display.html#inlineblock)查看一个非常好的兼容性列表并使用 CSS 来创建一个解决方法。

# service - 试图掌握 Web 服务？

> ID：601133
> 
> 赞同：0
> 
> 时间：2009-03-02T02:54:56.840
> 
> 标签：service

我正在尝试处理 Web 服务，并且想知道是否可以从 SO 社区获得一些帮助。特别是，我正试图掌握 WSDL、UDDI、SOAP 和 JAX-P，因为我最熟悉 Java。

* * *

### 编辑：

请告诉我我对这些定义是对还是错：

*   WSDL：这是一种模式，用于描述可以向 WS 传递和从 WS 传递什么样的 XML 文档。

*   UDDI：这对我来说是最令我困惑的 ATM，而且确实没有很好的定义。

*   SOAP：使用的基本协议。

*   JAX-p：用于解析 XML 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T03:00:02.177

作为 SOAP 路径的替代方案，您可能还需要考虑研究基于 REST（或 RESTful）的 Web 服务，尤其是 Java，特别是[JAX-RS: The Java API for RESTful Web Services](http://jcp.org/en/jsr/detail?id=311)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T03:01:49.850

这是一个非常广泛的问题。在高层次上，SOAP 指的是来回传输的消息的 XML 协议。WSDL 是另一种定义 SOAP 消息格式的 XML 协议（对于为您转换 SOAP 请求和响应的工具非常有用）。通常，SOAP 服务端点也将有一种方法来访问有关该服务的静态 WSDL 文档（例如，如果服务托管在[http://myservice.com/services/MyService](http://myservice.com/services/MyService)，则通常从[http://提供 WSDL myservice.com/services/MyService?WSDL](http://myservice.com/services/MyService?WSDL)在大多数实现中）。UDDI 是另一种 XML 协议，它描述了对注册中心的查询，询问有关存储在那里的 SOAP 服务的信息。

首先学习 SOAP 和 WSDL。UDDI 并没有被广泛使用（尽管变得越来越慢）。JAXR 是围绕 UDDI 的 Java API，这意味着您可能永远不需要自己编写原始 UDDI 查询。

JAXP 只是一个 Java XML 解析器 API。它可以用于很多事情，而不仅仅是 SOAP 和 WSDL。 [Apache Axis](http://ws.apache.org/axis2)是一个很好的 Java SOAP 客户端工具，而[wsdl4j](http://sourceforge.net/projects/wsdl4j)是一个很好的 WSDL 解析工具，尽管 Axis 也会通过解析 WSDL 为您自动生成来自 Java 对象的 SOAP 请求和响应。最理想的情况是，您永远不需要自己解析 WSDL 文档，但在实践中，当工具不能完全满足您的要求时，您经常不得不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T05:34:35.253

如果你想要一个实用的介绍，做 Spring Web Services 教程：[http ://static.springframework.org/spring-ws/sites/1.5/reference/html/tutorial.html](http://static.springframework.org/spring-ws/sites/1.5/reference/html/tutorial.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-24T21:21:33.503

Web 服务消息是根据 WSDL 模式定义的。有些部分将定义消息应该去哪里，有些部分将定义消息内容。

[好的 Thomas Erl 介绍 WSDL 中的内容](http://www.ws-standards.com/wsdl.asp)

它们可以嵌入到 SOAP 消息中进行传输。

UDDI 就像一个查找目录，用于查找您可能使用/消费的 Web 服务。如果您试图将两个特定系统联系在一起，而不是广播提供某些服务，那么它可能与您无关。

在 Java 中，您可以使用像 Apache Axis 这样的 Web 服务容器来组成您的 Web 服务。JaxP 可用于解析 XML 文档以进行传输等。

您应该阅读网络上的一些概述，然后发布一些更具体的问题 :-) 也许如果您描述了您想要实现的目标，一些读者会有类似要求的经验。

# c# - 查找尚未一起查看的两个元素的组合（LINQ、SQL 或 C#）

> ID：601134
> 
> 赞同：4
> 
> 时间：2009-03-02T02:57:32.060
> 
> 标签：c#, sql, linq, linq-to-sql, combinations

我有一个显示两个对象的页面，然后用户选择其中一个。我将偏好和组合记录在 MSSQL 数据库中，并最终存储如下数据：

```
UserId=1, BetterObjectId=1, WorseObjectId=2 
```

现在我想避免再次显示对象（1,2 / 2,1）的组合。

***那么如何生成随机组合以向用户显示不包括先前查看的组合？***

这似乎应该是一个非常直截了当的问题，但像大多数程序员一样，我缺乏睡眠和咖啡，因此非常感谢您的帮助 :-)

**非常**天真的方法是这样的（并且对这个函数的所有调用都必须包含在一个检查中，以查看用户是否已经对 nCr 进行了多次评分，其中 n 是项目数，r 是 2）：

```
public List<Item> GetTwoRandomItems(int userId)
{
    Item i = null, i2 = null;
    List<Item> r = null;

    while (i == null || i2 == null)
    {
        r = GetTwoRandomItemsRaw();
        i = r[0];
        i2 = r[1];
        if (GetRating(i.Id, i2.Id, userId) != null) /* Checks if viewed */
        {
            i = null;
            i2 = null;
        }
    }
    return r;
}

private List<Item> GetTwoRandomItemsRaw()
{
    return Items.ToList().OrderBy(i => Guid.NewGuid()).Take(2).ToList();
} 
```

**编辑**

使用一些 SQL，我可以生成所有不完整项目的列表（即，有一个涉及用户未见过的项目的组合），但我认为这不是特别有用。

我还可以想象在选择 2 个随机项目之前生成所有可能的组合并消除已经查看过的组合，但这是另一个糟糕的解决方案。

一种可能性（大 n 的内存密集型）是生成所有可能的组合并将组合 ID 存储在评级中。然后我可以对所有组合进行 SELECT WHERE combinationId IS NOT IN (SELECT combinationId FROM rating WHERE userId=x) 并进行一些更改以反映组合的对称关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T05:32:01.003

一种解决方案是：

```
SELECT TOP 1 i.id item1, i2.id item2 from item i, item i2 
WHERE i.id <> i2.id 
AND (SELECT COUNT(*) FROM Rating WHERE userId=@userId AND FK_ItemBetter=i.id AND FK_ItemWorse=i2.id) = 0
AND (SELECT COUNT(*) FROM Rating WHERE userId=@userId AND FK_ItemBetter=i2.id AND FK_ItemWorse=i.id) = 0
ORDER BY NEWID() 
```

我之前不知道仅列出多个 FROM 表的[*交叉连接*](http://www.stat.auckland.ac.nz/~paul/ItDT/HTML/node57.html#SECTION001222000000000000000)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-03T00:15:05.513

```
Table Item: ItemId
Table Rating: UserId, ItemId1, ItemId2, WinnerId 
```

如果您要求 Rating 表中的 ItemId1 < ItemId2，则只需检查 Rating 表一次。

```
var pair = db.Items.Join(db.Items,
  i1 => i1.ItemId,
  i2 => i2.ItemId,
  (i1, i2) => new {i1, i2}
)  //produce all pairs
.Where(x => x.i1.ItemId < x.i2.ItemId) //filter diagonal to unique pairs
.Where(x => 
  !db.Ratings
  .Where(r => r.UserId == userId
    && r.ItemId1 == x.i1.ItemId
    && r.ItemId2 == x.i2.ItemId)
  .Any() //not any ratings for this user and pair
)
.OrderBy(x => db.GetNewId()) //in-database random ordering
.First();  // just give me the first one

return new List<Item>() {pair.i1, pair.i2 }; 
```

这是一个关于将“随机”翻译成数据库的[博客。](http://weblogs.asp.net/fmarguerie/archive/2008/01/10/randomizing-linq-to-sql-queries.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T05:05:15.043

假设可用项目列表在数据库中，我将完全在数据库中处理这个问题。无论如何，您已经在访问数据库，那么为什么不在那里完成呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T05:16:24.597

将所有对象放入队列或堆栈中，然后将 2 和 2 弹出直到它们为空怎么办？

# c# - 比较 i4o 与 PLINQ 以获取更大的集合

> ID：601136
> 
> 赞同：3
> 
> 时间：2009-03-02T02:58:53.147
> 
> 标签：c#, linq, linq-to-objects, plinq

我有一个问题想问任何有 i4o 或 PLINQ 经验的人。我有一个需要查询的大对象集合（大约 400K）。逻辑非常简单明了。例如，有一个 Person 对象的集合，我需要找到与相同 firstName、lastName、datebirth 或 FirstName/lastname 的首字母等匹配的人员。使用 LINQ to Object 只是一个耗时的过程。

我想知道如果 i4o [(http://www.codeplex.com/i4o](http://www.codeplex.com/i4o) )

或 PLINQ 可以帮助提高查询性能。哪一个更好？如果有任何方法。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T03:33:54.937

对于 400k 个对象，我想知道数据库（进程内或进程外）是否不是更合适的答案。这然后抽象索引创建过程。特别是，任何数据库都将支持不同列上的多个不同索引，从而使引用的查询都非常可支持，而无需专门为每个查询编写代码（只需让查询优化器担心）。

在内存中使用它可能是有效的，但您可能（使用 vanilla .NET）必须做更多的手动索引管理。听上去，i4o 肯定值得研究，但我没有任何现有的比较数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-12-03T10:52:04.493

i4o ：旨在通过使用像旧的关系数据库天这样的索引来加速使用 linq 的查询。

PLinq：旨在使用额外的 cpu 核心来并行处理查询。

如果性能是您的目标，这取决于您的硬件，我说使用 i4o 将会有很大的改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T03:09:19.923

我没有用过 i4o，但我用过 PLINQ。

如果不知道您正在尝试改进的查询的具体细节，很难说哪个（如果有的话）会有所帮助。

PLINQ 允许在适用的情况下对查询进行多处理。然而，有时并行处理无济于事。

i4o 看起来有助于索引，这将加快一些调用，但不是其他调用。

底线是，它取决于正在运行的查询。

# c# - 广播是否比特定端口的随机 SYN/ACK 扫描更快？

> ID：601139
> 
> 赞同：1
> 
> 时间：2009-03-02T03:00:35.810
> 
> 标签：c#, .net, networking, sockets

我正在从事的项目使用 P2P 在对等方之间传输数据，这与 Bittorrent 不同。该组件对每个接口进行随机扫描，以查看网络上有哪些设备。到目前为止，它已经实现为一个 Socket 连接，它通过尝试连接到程序的侦听端口来检查它是否成功连接。我想知道将其撕掉并在每个界面上进行广播是否会更快。这会更快/更可靠吗？

当前的连接代码如下：

```
Socket testSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
testSock.BeginConnect(iep, new AsyncCallback(ConnectedAsync), testSock);
for (int i = 0; i <= iterations && Thread.CurrentThread.IsAlive; i++)
{
     if (testSock.Connected)
         break;
     Thread.Sleep(25); 
}
testSock.Close(0); 
```

“随机”组件很简单

```
Random r = new Random(); 
```

对于每个接口的子网。

根据我在广播（Wireshark、DHCP 等）方面的经验，我的印象是广播将更快地加载并使用更少的资源。我问的原因是写它的人是个聪明人，我想知道他为什么不使用广播。

那么值得付出努力吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-19T08:51:30.387

广播容易被某些设备过滤掉。过去一个网段将是不可靠的 - 如果您正在做的事情仅限于 LAN（或单个网段），那么广播确实应该更快。

话虽如此，随机搜索永远不会是有效的或最优的。您可能会错过节点，遇到扫描时间比预期更长的问题等。由于您可以访问子网掩码，因此您应该能够很容易地计算出该段上潜在有效节点的列表，但是再次 - 如果您被限制在单个网段（或它们的集合）内，那么广播是要走的路。

如果您正在搜索有效 WAN 节点的列表（即不仅仅是一个网段），那么您可能会发送大量不需要的流量。我的建议是让每个节点能够相互发送其他节点的缓存，然后需要一个节点的地址作为用户输入来引导到网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T05:01:52.370

我怀疑你是对的，但怀疑是你应该开始研究，而不是你应该停止的地方。既然你不是在谈论大量的努力来测试这个理论，你为什么不试试看呢？

——马库斯

# php - 具有不同颜色配置文件的图像是否有不同的内容类型？

> ID：601141
> 
> 赞同：0
> 
> 时间：2009-03-02T03:00:50.257
> 
> 标签：php, image, content-type

我有一个脚本可以输出 jpg、gif 或 png 图像。它根据文件的扩展名使用适当的内容类型（在这种情况下总是正确的）。

问题是，我有少量文件，当我尝试以这种方式访问​​它们时会导致 500 内部服务器错误。但是，如果我尝试通过直接链接访问它们，它们就会起作用。

这些文件有一个区别：它们的颜色配置文件不是 sRGB 内置的，而是“sRGB IEC61966-2.1”或“未校准”。

为什么我会收到错误消息？

我的脚本： http: [//pastie.org/pastes/404257](http://pastie.org/pastes/404257)

编辑：我从 include 更改为 readfile 并且它有效。但我不知道为什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T03:32:16.203

不，MIME 类型不指定颜色配置文件。解释颜色配置文件所需的一切都嵌入在图像数据中；无需在基​​本传输级别提供额外信息即可支持颜色配置文件。

问题可能是由于其他原因。例如，如果您将它们包含在 PHP 的 include() 中，则会出现字节序列 '<?' 可能导致 PHP 解析器启动，产生错误。

像您所做的那样更改为 readfile() 看起来是正确的解决方案。

注意：您链接的脚本由于缺少输入验证而存在一些严重的安全问题。您可能已经知道这一点并且只是将其用作简化示例，在这种情况下 - 希望没有人复制代码。

# php - PHP和MYSQL最大可变长度？

> ID：601142
> 
> 赞同：0
> 
> 时间：2009-03-02T03:01:28.290
> 
> 标签：php, mysql, database, string, insert

我正在尝试对 mysql 数据库进行 INSERT 操作，但当任何值超过 898 个字符时它会失败。有什么地方可以获取或者更好地设置这个最大值吗？如果必须，我会将字符串分成块并将它们存储在单独的行中，但我希望一次能够插入多达 2k 个。

我猜这是 php 问题，因为使用 LONGTEXT 或 BLOB 字段在数据库中应该有足够的空间。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T03:30:50.030

**边注：**

当您开始使用大型 blob 和文本列时，您需要注意 MySQL**`max_allowed_packet`**变量。我相信它默认至少为 1M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T03:03:17.583

我假设这是您要插入的 varchar 列？如果是这样，我假设最大长度已设置为 898 或 900 或类似的值。

在 MySQL 5 中，总行大小可以达到 65,536 字节，因此可以将 varchar 定义为保持总行大小低于该大小的任何大小。

如果您需要更大的使用文本（65,536）或长文本（40 亿？）。

# java - JAXB XML 输出格式问题

> ID：601143
> 
> 赞同：12
> 
> 时间：2009-03-02T03:01:39.380
> 
> 标签：java, xml, jaxb

我有具有以下结构的 Java 类（类名没有任何含义，我只是在编造它们）。

```
package test;

import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlValue;

@XmlRootElement
public class Test
{
    @XmlAccessorType(XmlAccessType.FIELD)
    static class Machine
    {
        @XmlElementWrapper(name="servers")
        @XmlElement(name="server")
        List<Server> servers = new ArrayList<Server>();
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    static class Server
    {
        Threshold t = new Threshold();
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    static class Threshold
    {
        RateThreshold load = new RateThreshold();
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    static class RateThreshold
    {
        @XmlAccessorType(XmlAccessType.FIELD)
        static class Rate
        {
            int count;
            Period period = new Period();
        }

        @XmlAccessorType(XmlAccessType.FIELD)
        private static class Period
        {
            @XmlAttribute
            private String type = "second";

            @XmlValue
            private float period;
        }

        Rate min = new Rate();
        Rate max = new Rate();
    }

    @XmlElementWrapper(name="machines")
    @XmlElement(name="machine")
    List<Machine> machines = new ArrayList<Machine>();

    public static void main(String[] args)
    {
        Machine m = new Machine();
        Server s = new Server();
        s.t.load.max.count = 10;
        s.t.load.min.count = 1;
        m.servers.add(s);

        Test t = new Test();
        t.machines.add(m);

        JAXBContext jaxbContext;
        Marshaller marshaller;
        try
        {
            jaxbContext = JAXBContext.newInstance(Test.class);
            marshaller = jaxbContext.createMarshaller();
            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
            marshaller.marshal(t, System.out);
        }
        catch (JAXBException e)
        {
            e.printStackTrace();
        }
    }
} 
```

我遇到的问题是在编组测试实例时 JAXB 生成的 XML 输出。XML 输出将始终如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<test>
    <machines>
        <machine>
            <servers>
                <server>
                    <t>
                        <load>
                            <min>
<count>1</count>
<period type="second">0.0</period>
                            </min>
                            <max>
<count>10</count>
<period type="second">0.0</period>
                            </max>
                        </load>
                    </t>
                </server>
            </servers>
        </machine>
    </machines>
</test> 
```

如您所见，某些元素没有正确缩进（即最深的元素、计数和周期）。这是为什么？我创建 JAXB 上下文的方式有问题吗？或者 JAXB 可以递归缩进的元素数量是否有最大限制？我该如何解决这个问题？请注意，我还将 JAXB_FORMATTED_OUTPUT 设置为 true，但仍然得到不正确的缩进。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-07-19T10:10:15.063

缩进以 8 为模，在

```
com.sun.xml.bind.v2.runtime.output.IndentingUTF8XmlOutput 
```

你发现

```
int i = depth%8; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-12T10:52:16.483

编组器方法的重载之一`marshal()`接受 XMLStreamWriter，因此您可以通过编写自己的格式化 XML 流编写器来绕过 JAXB 参考实现的脑残格式化机制。你最终会做这样的事情：

```
public static void SaveContainer( Container container, OutputStream stream ) throws ...
{
    XMLOutputFactory factory = XMLOutputFactory.newInstance();
    XMLStreamWriter writer = factory.createXMLStreamWriter( stream, "UTF-8" );
    writer = new MyAwesomeCoolFormattingXMLStreamWriter( writer );
    marshaller.marshal( container, writer );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-09T16:25:15.363

我不认为有限制。我见过非常深的嵌套，没有任何困难。你有任何空白控制吗？此外，您还没有提供 RateThreshold 类的定义，它是创建意外输出的类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-20T11:21:38.527

您需要设置线宽 - 默认为 72。

OutputFormat of = new OutputFormat();

of.setLineWidth(1000);

# sql - 数据访问层是否应该包含业务逻辑？

> ID：601151
> 
> 赞同：20
> 
> 时间：2009-03-02T03:08:16.650
> 
> 标签：sql, sql-server, design-patterns, architecture

我已经看到将业务逻辑从数据访问层（存储过程、LINQ 等）移到业务逻辑组件层（如 C# 对象）的趋势。

这被认为是当今做事的“正确”方式吗？如果是这样，这是否意味着一些数据库开发人员职位可能会被淘汰，取而代之的是更多的中间层编码职位？（即更多的 c# 代码而不是更长的存储过程。）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-03-02T03:12:47.327

如果应用程序很小且生命周期很短，那么不值得花时间在分层中抽象关注点。在较大的、长期存在的应用程序中，您的逻辑/业务规则不应与数据访问耦合。随着应用程序的增长，它会造成维护的噩梦。

将关注点转移到公共层或也称为 [关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)，已经存在了一段时间：

*维基百科*

> Edsger W. Dijkstra 在他 1974 年的论文“关于科学思想的作用” [1](http://en.wikipedia.org/wiki/Separation_of_concerns)中可能创造了关注点分离这个术语。

对于应用程序架构来说，一本很棒的书是[领域驱动设计](https://rads.stackoverflow.com/amzn/click/com/0321125215)。Eric Evans 详细分解了应用程序的不同层。他还讨论了数据库阻抗和他所谓的“有界上下文”

**限界上下文**

博客是一个系统，显示从最新到最旧的帖子，以便人们可以发表评论。有些人会将其视为一个系统，或一个“限界上下文”。如果你订阅了 DDD，有人会说博客中有两个系统或两个“限界上下文”：一个评论系统和一个发布系统。DDD 认为每个系统都是独立的（当然两者之间会有交互）并且应该这样建模。DDD 为如何将关注点分离到适当的层提供了具体指导。

*您可能感兴趣的其他资源：*

*   [领域驱动设计快速](http://www.infoq.com/minibooks/domain-driven-design-quickly)
*   [应用领域驱动设计和模式](https://rads.stackoverflow.com/amzn/click/com/0321268202)
*   [清洁代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)
*   [有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)
*   [重构](https://rads.stackoverflow.com/amzn/click/com/0201485672)

在我有机会体验[The Big Ball of Mud](http://www.laputan.org/mud/)或[Spaghetti Code](http://en.wikipedia.org/wiki/Spagetti_code)之前，我很难理解为什么应用程序架构如此重要......

做事的正确方法总是取决于应用程序的大小、可用性要求和生命周期。使用存储过程或不使用存储过程... nHibrnate 和 Linq to SQL 等工具非常适合中小型项目。为了清楚起见，我从未在大型应用程序上使用过 nHibranate 或 Linq To Sql，但我的直觉是应用程序将达到需要通过视图、存储过程等在数据库服务器上进行优化的大小以保持应用程序的性能。要完成这项工作，需要具备开发和数据库技能的开发人员。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-03-02T03:10:24.540

数据访问逻辑属于数据访问层，业务逻辑属于业务层。从设计的角度来看，我不明白如何将两者混合在一起被认为是一个好主意。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-02T11:37:01.310

层分离**并不**自动意味着不使用存储过程进行业务逻辑。这种分离同样可能：

表示层：.Net、PHP 等

业务层：存储过程

数据层：存储过程或 DML

这与 Oracle 配合得很好，例如，业务层可以在与数据层不同的模式中的包中实现（以强制执行适当的关注点分离）。

重要的是关注点的分离，而不是每个级别使用的语言/技术。

（我希望会因为这个异端而受到严厉的抨击！）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-27T21:35:37.993

完美的世界并不存在。这是关于优雅与效果更好的对比。在数据访问层内执行复杂的 SQL 查询比让服务多次询问数据然后合并和转换它们的性能要高得多。当您进行复杂查询时，您将业务逻辑放入这些查询中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T03:16:48.410

这真的取决于要求。无论哪种方式，只要它*不是*“在按钮后面”就可以了。我认为存储过程更适合具有不断变化的需求的“经典”客户端服务器应用程序。严格的中间“业务逻辑”层更适合需要非常可扩展、在多个数据库平台上运行等的应用程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-04T12:56:00.810

如果您正在构建分层架构，并且该架构包含专用的业务层，那么您当然应该将业务逻辑放在那里。但是，您可以询问任何五位设计师/架构师/开发人员实际上是什么“业务逻辑”，并得到[六个](http://www.simongbrown.com/blog/2003/04/22/how_do_you_define_business_logic.html) [不同的](https://stackoverflow.com/questions/52965/is-business-logic-subjective) [答案](http://thedailywtf.com/Comments/The-Mythical-Business-Layer.aspx)。（嘿，我自己也是一名建筑师，所以我知道“一方面，另一方面”！）。导航对象图是数据层还是业务层的一部分？取决于您使用的是哪种[EAA 模式](http://martinfowler.com/eaaCatalog/)，以及您的域对象到底有多复杂/聪明。或者它甚至可能是你演讲的一部分？

但更具体而言：数据库开发工具往往落后于 Eclipse/Visual Studio/Netbeans/；和存储过程对于大规模开发来说从来都不是很舒服。是的，当然您**可以**用 TSQL、PL/SQL 和 c 编写所有代码，但要付出一定的代价。此外，在一个解决方案中涉及多种语言和平台的代价会增加维护成本和延迟。另一方面，将数据访问移到 DBA 无法访问的地方可能会引起其他问题，尤其是在具有任何可用性要求的共享基础架构环境中。但总的来说，是的，现代工具和语言目前正在将逻辑从数据（基础）层转移到应用程序层。我们必须看看它的效果和规模。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T03:13:02.023

我看到这种趋势的原因是 LINQ 和 LINQ to SQL ORM 为您提供了一个很好的类型安全的存储过程替代方案。

什么是“正确的”是你是否从个人这样做中受益。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-02T03:14:29.147

是的，业务逻辑应该在业务逻辑层。对我来说，这是对所有内容都使用存储过程并因此将一些业务规则移动到数据库的最大缺点，我更喜欢在 BLL 中使用该逻辑，让 DLL 只与数据库进行通信

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-02T03:32:40.710

分离图层总是一个好主意。我无法告诉你有多少次我看到存储过程因大量业务逻辑写入存储过程而变得非常粗糙。此外，如果您出于某种原因修改了复杂的存储过程，您就有可能破坏使用它的一切。

我们公司的开发人员正在使用 EF 迁移到 LINQ，并取消存储过程，除非我们绝对需要它。LINQ 和 EF 使我们的层分离变得更加容易……当 EF 并不困难时。但这是另一个咆哮。:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-02T18:25:13.157

数据层中可能总是存在某种级别的业务逻辑。数据本身就是其中一些逻辑的表示。例如，主键通常是根据业务逻辑规则创建的。

例如，如果您的系统不允许订单拥有多个客户，这是业务逻辑的一部分，但它也存在（或应该存在）在数据层中。

此外，出于效率原因，最好在数据库本身上完成某些类型的业务规则。这些通常是存储过程，因此存在于数据层中。例如，如果客户在一年内花费超过 X 美元，或者收货方与收货方不同，则触发器可能会触发。

其中许多规则也可能在业务层中处理，但它们也需要数据层组件。这取决于您的错误处理位置。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-02T19:27:30.883

数据层中的业务逻辑在客户端/服务器应用程序中很常见，因为实际上*并*没有业务逻辑层本身（除非您真的可以严重阻止任何人在应用程序之外连接到数据库）。现在 Web 应用程序更加普遍，您会看到更多的 3 层和 4 层应用程序（客户端+Web 服务器+应用程序服务器+数据库服务器），并且越来越多的公司正在遵循最佳实践并将业务逻辑整合到自己的层中。我认为数据库开发人员的工作不会减少，他们可能会成为编写业务逻辑层的人（并让 ORM 工具编写大部分数据库层）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-22T20:36:31.397

在规划在何处编写业务规则时，还需要考虑技术原因/限制。

在大多数 LOB 应用程序中，集中化和性能促使开发人员将其自身的数据库用作主要业务层，因此从某种意义上说，DAL 和 BL 是混合或统一的。

一个典型的例子是计算租赁项目当前位置的字段，一条信息应该可用于一个或多个列出的项目，使具有用户定义函数的 SQL 视图成为保存规则的最强大的候选者.

如果首选特定的数据库设计和流程实现，上述示例当然是有效的，但我只想指出，在现实世界中，我们根据技术限制和其他原则进行选择，而不是组织代码。

# c# - 没有catch块的finally块是java反模式吗？

> ID：601152
> 
> 赞同：47
> 
> 时间：2009-03-02T03:08:28.477
> 
> 标签：c#, java, c++, exception, try-catch-finally

在对一些看起来像这样的代码进行故障排除时，我遇到了非常痛苦的故障排除经验：

```
try {
   doSomeStuff()
   doMore()
} finally {
   doSomeOtherStuff()
} 
```

这个问题很难解决，因为 doSomeStuff() 引发了异常，这反过来又导致 doSomeOtherStuff() 也引发了异常。第二个异常（由 finally 块抛出）被抛出到我的代码中，但它没有处理第一个异常（从 doSomeStuff() 抛出），这是问题的真正根本原因。

如果代码是这样说的，问题就会很明显：

```
try {
    doSomeStuff()
    doMore()
} catch (Exception e) {
    log.error(e);
} finally {
   doSomeOtherStuff()
} 
```

所以，我的问题是：

在没有任何 catch 块的情况下使用 finally 块是众所周知的 java 反模式吗？（它当然似乎是众所周知的反模式“不要吞噬异常！”的一个不太明显的子类）

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2009-03-02T03:14:56.650

一般来说，不，这不是反模式。finally 块的目的是确保无论是否引发异常，都可以清理内容。异常处理的全部意义在于，如果您不能处理它，您可以通过提供的相对干净的带外信号异常处理提供的相对干净的带外信令，让它冒泡给可以处理的人。如果您需要确保在引发异常时清理内容，但无法正确处理当前范围内的异常，那么这正是正确的做法。您可能只想更加小心，以确保您的 finally 块不会抛出。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-03-02T03:19:51.100

我认为这里真正的“反模式”是在一个`finally`可以抛出的块中做一些事情，而不是没有捕获。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-03-02T04:15:15.883

一点也不。

问题出在 finally 里面的代码。

请记住，finally 总是会被执行，并且将可能引发异常的东西放在那里是有风险的（正如您刚刚见证的那样）。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-03-02T03:15:03.187

尝试使用 finally 并且没有捕获绝对没有错。考虑以下：

```
InputStream in = null;
try {
    in = new FileInputStream("file.txt");
    // Do something that causes an IOException to be thrown
} finally {
    if (in != null) {
         try {
             in.close();
         } catch (IOException e) {
             // Nothing we can do.
         }
    }
} 
```

如果抛出异常并且这段代码不知道如何处理它，那么异常应该在调用堆栈中冒泡到调用者。在这种情况下，我们仍然想清理流，所以我认为有一个没有 catch 的 try 块是非常有意义的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-02T05:23:03.193

我认为它远不是一种反模式，而且当释放方法执行期间获得的资源至关重要时，我经常这样做。

我在处理文件句柄（用于写入）时做的一件事是在使用 IOUtils.closeQuietly 方法关闭流之前刷新流，该方法不会引发异常：

```
 OutputStream os = null;
OutputStreamWriter wos = null;
try { 
   os = new FileOutputStream(...);
   wos = new OutputStreamWriter(os);
   // Lots of code

   wos.flush();
   os.flush();
finally {
   IOUtils.closeQuietly(wos);
   IOUtils.closeQuietly(os);
} 

```

我喜欢这样做，原因如下：

*   关闭文件时忽略异常并不是完全安全的——如果还有字节还没有写入文件，那么文件可能不是调用者期望的状态；
*   因此，如果在 flush() 方法期间引发异常，它将传播给调用者，但我仍然会确保所有文件都已关闭。IOUtils.closeQuietly(...) 方法比相应的 try ... catch ... ignore me 块更简洁；
*   如果使用多个输出流，则 flush() 方法的顺序很重要。应首先刷新通过将其他流作为构造函数传递而创建的流。同样的事情对 close() 方法也是有效的，但在我看来，flush() 更清楚。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-02T03:14:10.333

我会说没有 catch 块的 try 块是一种反模式。说“没有捕获就不要最终”是“没有捕获就不要尝试”的子集。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-02T03:40:19.367

我以下列形式使用 try/finally：

```
try{
   Connection connection = ConnectionManager.openConnection();
   try{
       //work with the connection;
   }finally{
       if(connection != null){
          connection.close();           
       }
   }
}catch(ConnectionException connectionException){
   //handle connection exception;
} 
```

与 try/catch/finally 相比，我更喜欢这个（+ finally 中的嵌套 try/catch）。我认为它更简洁，我不会重复 catch(Exception)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-02T03:40:36.573

```
try {
    doSomeStuff()
    doMore()
} catch (Exception e) {
    log.error(e);
} finally {
   doSomeOtherStuff()
} 
```

也不要那样做......你只是隐藏了更多的错误（当然没有完全隐藏它们......但是更难处理它们。当你捕捉到异常时，你也会捕捉到任何类型的 RuntimeException（如 NullPointer 和 ArrayIndexOutOfBounds） .

一般来说，捕获你必须捕获的异常（检查异常）并在测试时处理其他异常。RuntimeExceptions 旨在用于程序员错误 - 程序员错误是在正确调试的程序中不应该发生的事情。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-02T12:49:12.307

在我看来，更多的情况`finally`是`catch`表明某种问题。资源成语很简单：

```
acquire
try {
    use
} finally {
    release
} 
```

在 Java 中，您几乎可以在任何地方遇到异常。获取通常会抛出一个已检查的异常，处理该异常的明智方法是围绕多少进行捕获。不要尝试一些可怕的空值检查。

如果你真的是肛门，你应该注意例外中有隐含的优先级。例如 ThreadDeath 应该破坏所有，无论它来自获取/使用/释放。正确处理这些优先事项是不雅观的。

因此，使用 Execute Around 习惯用法抽象您的资源处理。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-10-12T04:44:13.780

Try/Finally 是一种正确释放资源的方法。finally 块中的代码不应该抛出，因为它应该只作用于在进入 try 块之前获得的资源或状态。

顺便说一句，我认为 log4J*几乎*是一种反模式。

如果您想检查正在运行的程序，请使用适当的检查工具（即调试器、IDE，或者极端意义上的字节码编织器，但不要在每几行中都放置日志语句！）。

在你提出的两个例子中，第一个看起来是正确的。第二个包括记录器代码并引入了一个错误。在第二个示例中，如果前两个语句抛出一个异常（即捕获并记录它但不重新抛出），则抑制异常。这是我发现在 log4j 使用中非常常见的事情，并且是应用程序设计的一个真正问题。基本上通过您的更改，您使程序以一种系统难以处理的方式失败，因为您基本上继续前进，就好像您从未遇到过异常一样（类似于 VB basic on error resume next 构造）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-15T10:39:33.673

`try-finally``return`如果方法有多个语句，可以帮助您减少复制粘贴代码。考虑以下示例（Android Java）：

```
boolean doSomethingIfTableNotEmpty(SQLiteDatabase db) {
    Cursor cursor = db.rawQuery("SELECT * FROM table", null);
    if (cursor != null) { 
        try {
            if (cursor.getCount() == 0) { 
                return false;
            }
        } finally {
            // this will get executed even if return was executed above
            cursor.close();
        }
    }
    // database had rows, so do something...
    return true;
} 
```

如果没有`finally`子句，您可能必须写两次：就在周围的子句`cursor.close()`之前和之后。`return false``if`

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-03-02T03:51:24.957

我认为没有捕获的尝试是反模式。使用 try/catch 处理**异常**情况（文件 IO 错误、套接字超时等）不是反模式。

如果您使用 try/finally 进行清理，请考虑使用 using 块。

# c# - 在 C# 中缺少“with”关键字

> ID：601153
> 
> 赞同：28
> 
> 时间：2009-03-02T03:08:32.827
> 
> 标签：c#, .net, syntax, keyword

我今天在看 Infragistics 控件库的在线帮助，看到一些使用**With**关键字在选项卡控件上设置多个属性的 VB 代码。自从我进行任何 VB 编程以来，已经快 10 年了，我几乎忘记了这个关键字甚至存在。由于我对 C# 还比较陌生，所以我很快就去看看它是否有类似的构造。可悲的是，我什么也没找到。

C# 是否有关键字或类似结构来模仿VB中的**With关键字提供的功能？**如果没有，是否有 C# 没有这个的技术原因？

**编辑：** 在问我的问题之前，我搜索了一个现有的条目，但没有找到 Ray 提到的那个（[这里](https://stackoverflow.com/questions/481725/with-block-equivalent-in-c/481746#481746)）。那么，为了细化这个问题，C# 没有这个有技术原因吗？Gulzar 做到了——不，C# 没有**With**关键字没有技术原因。这是语言设计者的设计决定。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-02T03:12:50.307

这就是 C# 程序经理不得不说的： [为什么 C# 没有'with'语句？](http://msdn.microsoft.com/en-us/vcsharp/aa336816.aspx)

> *   **小的或不存在的可读性好处。**我们认为可读性的好处很小或根本不存在。我不会说 with 语句会降低代码的可读性，但有些人可能会。
>     
>     
> *   **语言复杂度增加。**添加 with 语句会使语言更加复杂。例如，VB 必须添加新的语言语法来解决局部变量 (Text) 和“with”目标 (.Text) 上的属性之间的潜在歧义。解决这个问题的其他方法也引入了语言复杂性。另一种方法是推送一个作用域并使属性隐藏局部变量，但是如果不添加一些转义语法就无法引用局部变量。
>     
>     
> *   **C++ 遗产。**C++ 从来没有 with 语句，而且 C++ 开发人员通常不认为缺少这样的语句是一个问题。此外，我们并不认为其他变化——人们正在编写的代码类型的变化、平台的变化、语言的其他变化等——使语句变得更加必要。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-02T03:17:31.997

在 C# 3.0 中，您可以在创建对象时使用对象初始化器来实现类似的效果。

```
var control = new MyControl
{
    Title = "title",
    SomeEvent += handler,
    SomeProperty = foo,
    Another = bar
}; 
```

而不是：

```
var control = new MyControl();
control.Title = "title";
control.SomeEvent += handler;
control.SomeProperty = foo;
control.Another = bar; 
```

请注意，虽然这种语法是在 C# 3.0 中引入的，但您仍然可以在 2.0 框架中使用它，它只是编译器引入的语法糖。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-02T04:04:10.120

这不是惯用的 c#，但如果你真的想要一个`with`等价的，你可以这样做：

```
Person MyPersonWithALongName = new Person();
MyUtils.With(MyPersonWithALongName, p => {

    p.Name = "George";
    p.Address = "123 Main St";
    ...

});

class MyUtils {

    public static void With<T>(T x, Action<T> do) {
        do(x);
    }
} 
```

**更新：**
在我看来，您可以通过将其转换为扩展方法来简单地使其更简洁，也许将其重命名为“Alias”或“As”以实现可重复性：

```
MyPersonWithALongName.Alias(p => {
    p.Name = "George";
    p.Address = "123 Main St";
    ...
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-03-02T03:21:57.773

不，“with”关键字被故意排除在语言之外。

如果您有一个冗长的引用名称，您可以使用变量轻松地对其进行较短的引用，甚至给它一个有限的范围：

```
{
   SomeClass r = Some.Lengthy.Path.To.Get.To.A.Referece;
   r.Some = 42;
   r.Properites = "none";
   r.To = 1;
   r.Set = null;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-29T18:01:46.210

对于这些解决方案：

```
// ....
// (class Common)

public static void With<T>(T property, Action<T> action) {
    action(property);
}

// ...
// usage somewhere ...    
Person person = GetPerson();
Common.With(person, p => { p.Name = "test", p.Age = "123" }); 
```

似乎我们用“p”为变量起别名。随着解决方案的发展，我发现保持变量名称简短很容易，这种带有“With”泛型的解决方案不会带来任何优雅。

理想情况下，我们都希望看到对语法进行一些修改，以便其用法类似于今天的多个属性的初始化工作方式：

```
Person person = new Person() { Name = "test", Age = "123" }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T03:11:59.153

不，这是 C# 开发团队有意识的决定。人们对 'with' 关键字有复杂的感觉，因为如果被滥用（嵌套 with's）会降低代码的可读性。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-03-02T03:12:21.820

我不认为它不存在有技术原因。不过，我要说的是，它不存在的原因是它是一种编程构造，其存在的目的仅仅是为了减少打字。有了智能感知和复制粘贴之类的东西，世界对此类功能的需求就不再太多了。我使用 VB.Net，不记得它是否仍然受支持。从来没有真正觉得需要使用它。

# python - BeautifulSoup 解析的问题

> ID：601166
> 
> 赞同：5
> 
> 时间：2009-03-02T03:13:21.350
> 
> 标签：python, beautifulsoup

我正在尝试使用 BeautifulSoup 解析 html 页面，但似乎 BeautifulSoup 根本不喜欢 html 或该页面。当我运行下面的代码时，prettify() 方法只返回页面的脚本块（见下文）。有人知道为什么会发生吗？

```
import urllib2
from BeautifulSoup import BeautifulSoup

url = "http://www.futureshop.ca/catalog/subclass.asp?catid=10607&mfr=&logon=&langid=FR&sort=0&page=1"
html = "".join(urllib2.urlopen(url).readlines())
print "-- HTML ------------------------------------------"
print html
print "-- BeautifulSoup ---------------------------------"
print BeautifulSoup(html).prettify() 
```

这是 BeautifulSoup 产生的输出。

```
-- BeautifulSoup ---------------------------------
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script language="JavaScript">
 <!--
     function highlight(img) {
       document[img].src = "/marketing/sony/images/en/" + img + "_on.gif";
     }

     function unhighlight(img) {
       document[img].src = "/marketing/sony/images/en/" + img + "_off.gif";
     }
//-->
</script> 
```

谢谢！

更新：我正在使用以下版本，这似乎是最新的。

```
__author__ = "Leonard Richardson (leonardr@segfault.org)"
__version__ = "3.1.0.1"
__copyright__ = "Copyright (c) 2004-2009 Leonard Richardson"
__license__ = "New-style BSD" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-02T09:16:27.327

[按照Łukasz](https://stackoverflow.com/questions/601166/issues-with-beautifulsoup-parsing/601636#601636)的建议尝试使用 3.0.7a 版本。BeautifulSoup 3.1 被设计为与 Python 3.0 兼容，因此他们不得不将解析器从 SGMLParser 更改为 HTMLParser，这似乎更容易受到不良 HTML 的影响。

从[BeautifulSoup 3.1 的更新日志中](http://www.crummy.com/software/BeautifulSoup/CHANGELOG.html)：

“Beautiful Soup 现在基于 HTMLParser 而不是 SGMLParser，后者在 Python 3 中已消失。SGMLParser 处理了一些糟糕的 HTML，但 HTMLParser 没有”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-08-03T15:39:32.367

试试[lxml](http://codespeak.net/lxml/)。尽管它的名字，它也用于解析和抓取 HTML。它比 BeautifulSoup 快得多，它甚至比 BeautifulSoup 更好地处理“损坏”的 HTML，所以它可能更适合你。如果您不想学习 lxml API，它也有适用于 BeautifulSoup 的兼容性 API。

[Ian Blicking 同意](http://blog.ianbicking.org/2008/12/10/lxml-an-underappreciated-web-scraping-library/)。

没有理由再使用 BeautifulSoup，除非您使用的是 Google App Engine 或其他任何不纯 Python 的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T04:09:28.237

BeautifulSoup 并不神奇：如果传入的 HTML 太糟糕，那么它就无法工作。

在这种情况下，传入的 HTML 就是这样：BeautifulSoup 无法弄清楚该怎么做。例如，它包含如下标记：

脚本类型=""javascript""

（注意双引号。）

BeautifulSoup 文档包含一个部分，如果 BeautifulSoup 无法解析您的标记，您可以做什么。您需要调查这些替代方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-07-13T20:00:35.593

Samj：如果我得到这样的东西， `HTMLParser.HTMLParseError: bad end tag: u"</scr' + 'ipt>"` 我只是在将它提供给 BeautifulSoup 之前从标记中删除罪魁祸首，一切都是花花公子：

```
html = urllib2.urlopen(url).read()
html = html.replace("</scr' + 'ipt>","")
soup = BeautifulSoup(html) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-20T11:39:53.187

我在解析以下代码时也遇到了问题：

```
<script>
        function show_ads() {
          document.write("<div><sc"+"ript type='text/javascript'src='http://pagead2.googlesyndication.com/pagead/show_ads.js'></scr"+"ipt></div>");
        }
</script> 
```

HTMLParseError：错误的结束标记：u''，第 26 行，第 127 列

山姆

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T08:31:44.003

我在 BeautifulSoup 版本 '3.0.7a' 上测试了这个脚本，它返回了似乎是正确的输出。我不知道“3.0.7a”和“3.1.0.1”之间发生了什么变化，但试试看。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T07:31:58.903

```
import urllib
from BeautifulSoup import BeautifulSoup

>>> page = urllib.urlopen('http://www.futureshop.ca/catalog/subclass.asp?catid=10607&mfr=&logon=&langid=FR&sort=0&page=1')
>>> soup = BeautifulSoup(page)
>>> soup.prettify() 
```

在我的例子中，通过执行上述语句，它会返回整个 HTML 页面。

# java - “找不到符号方法 drawImage(java.awt.image.BufferedImage, ,int,int)"

> ID：601172
> 
> 赞同：1
> 
> 时间：2009-03-02T03:15:50.627
> 
> 标签：java, image, swing

好的，现在我在 java 中使用 drawImage 已经有一段时间了，以前从未发生过这种情况。`"drawImage(java.awt.image.BufferedImage,<nulltype>,int,int)"`为什么在我的代码中找不到？

```
导入 java.awt.*；
导入 javax.swing.*；
导入 javax.swing.JPanel；
导入 java.awt.event.*；
导入java.awt.image.*；     
导入java.io.*；
导入 java.util.Arrays；
导入 javax.imageio.ImageIO；

公共类 imgtest 扩展 JFrame{
    缓冲图像 img;
    图形g2d；
    /**
     * 创建一个新的实例imgtest。
     */
    公共 imgtest() {
        文件 file = new File("test.png");
        img = ImageIO.read(文件);
    }

    /**
     * @param args 命令行参数
     */
    公共无效油漆（图形g）
    {
        g2d = (Graphics2D)g;
        g2d.drawImage(img, null, 0, 0);
    }

    公共静态无效主要（字符串[]参数）{
        imgtest i = 新的 imgtest();
        i.setSize(640,480);
        i.setVisible(true);
        i.repaint();
        // 这里的TODO代码应用逻辑
    }
}

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T03:25:15.033

您已声明`g2d`为`Graphics`对象，`Graphics`但没有该`drawImage(BufferedImage, BufferedImageOp, int, int)`方法。修复：替换行

```
Graphics g2d; 
```

和

```
Graphics2D g2d; 
```

当 Java 查找存储在这样的变量中的对象的属性时，它总是使用变量的声明类型，即`Graphics`. `g`除非您将其实际存储在 type 的变量中，否则您转换为 a的事实`Graphics2D`并没有什么不同`Graphics2D`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T03:48:21.967

与其他人所说的需要贴花一样，它是一个 Graphics2D，将其从实例变量中取出并使其成为局部变量。让一个实例变量只在一个方法中使用并且每次调用该方法时总是具有覆盖的值是没有意义的。实例变量用于在方法调用之间保持状态......你在这里没有这样做。

```
public void paint(Graphics g)
{
    final Graphics2D g2d;

    g2d = (Graphics2D)g;
    g2d.drawImage(img, null, 0, 0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T03:30:07.050

您已声明`g2d`为`Graphics`而不是`Grahphcs2d`对象

考虑将方法调用从

```
 g2d.drawImage(img, null, 0, 0); 
```

到

```
 (Graphics2d) g2d.drawImage(img, null, 0, 0); 
```

或更改您对图形的定义，如大卫的帖子

# .net - .Net 中的独立数据表

> ID：601173
> 
> 赞同：1
> 
> 时间：2009-03-02T03:16:16.290
> 
> 标签：.net, datatable

我可以`DataTable`像这样使用这个类吗：

```
DataTable client = new DataTable("client");

int primay_key = 1;

DataRow row = null;

row = client.findBy(primary_key); 
```

之后`findBy`，行对象是否会包含数据库中的一行？

我在互联网上找不到这样的例子，看起来内置的 .net`DataTable`类不是我想象的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T03:46:50.863

您需要先填写一个 DataTable，然后才能“查询”它：

假设您已经设置了 SqlCommand 对象：

```
public static DataTable GetDataTable(SqlCommand cmd)
{
    DataTable dt;

    using (SqlDataAdapter da = new SqlDataAdapter())
    {
        da.SelectCommand = cmd;
        dt = new DataTable();
        da.Fill(dt);
    }
    return dt;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T03:40:41.627

DataTable 是在内存中对数据库表进行建模的对象。就其本身而言，DataTable 不进行任何类型的数据库交互。您首先必须创建一个适合您的数据库系统的数据适配器对象，然后使用它来填充您的内存数据表。

例子：

```
SqlConnection conn = new SqlConnection(connectionString); 
SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Clients", conn); 
DataTable dt = new DataTable(); 
da.Fill(dt, "Clients"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T03:38:19.137

是的，你可以使用这样的 DataTable——你可以试试 DataTable.Rows.Find

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T03:40:02.253

A `DataSet`/`DataTable`本身不是一个合适的数据库。但当然可以用于内存对象模型 - 但没有您通常与 RDBMS 相关联的大多数功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T03:53:22.363

我只是不想使用 DataAdapter 来填充 dataTable，因为对于 DB 中的每个不同的表，我必须一次又一次地编写相同的代码。

如果 dot net dataTable 类与 DB 中的实际表没有关联，那么市场上有产品吗？一个组件，一个开源项目？

# c++ - 当 cout 显示正确大小时，为什么 printf 显示向量大小为 0？

> ID：601180
> 
> 赞同：1
> 
> 时间：2009-03-02T03:20:31.317
> 
> 标签：c++, vector, printf

当我使用 printf 和 %d 来获取向量的大小时，我不明白为什么会得到 0：

```
vector<long long> sieve;
int size;
...
//add stuff to vector
...
size = sieve.size();
printf("printf sieve size: %d \n", size); //prints "printf sieve size: 0"
std::cout << "cout sieve size: ";
std::cout << size;
std::cout << " \n ";
//prints "cout sieve size: 5 (or whatever the correct sieve size is)" 
```

如果我通过向量遍历

```
if(i=0;i<sieve.size();i++) 
```

我得到了正确的迭代次数。

我做错了什么或printf怎么了？size() 返回一个 int 对吗？

* * *

这是我的整个小脚本：

```
#include <iostream>
#include <vector>
#include <stack>
#include <math.h>

int main (int argc, char * const argv[]) {
    unsigned long long answer = 0;
    unsigned long long cur = 2;
    std::vector<long long> sieve;
    unsigned long long limit;
    unsigned long long value;
    unsigned int i;
    int size;
    bool isPrime;
    std::cout << "Provide a value to find its largest prime factor: ";
    std::cin >> value;
    limit = ceil(sqrt(value));
    sieve.push_back(2);
    while(cur++ < limit){
      isPrime = true;
      sieve.begin();
      for(i=0; i<sieve.size();i++){
        if(!(cur % sieve[i])){
          isPrime = false;
          break;
        }
      }
      if(isPrime){  
        if(!(value % cur)){
          std::printf("Is prime factor: %d\n", cur);
          sieve.push_back(cur);
          answer = sieve[sieve.size() - 1];
          size = sieve.size();
          std::printf("current last: %d sieve size: %ld\n", answer, size);
          for(i=0; i<sieve.size();i++){
            std::printf("sieve iter: %d sieve val: %d\n", i, sieve[i]);
            std::cout << size;
            std::cout << " wtf\n";
          }
        }
      }
    }
    answer = sieve[sieve.size() - 1];
    size = sieve.size();
    std::printf("Limit: %d Answer: %d sieve size: %ld\n", limit, answer, size);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-02T03:40:06.887

现在，有了完整的源代码，就很清楚了。

你声明：

```
int size; 
```

然后你使用了：

```
std::printf("current last: %d sieve size: %ld\n", answer, size);
std::printf("Limit: %d Answer: %d sieve size: %ld\n", limit, answer, size); 
```

如果 size 是 int，你应该使用 "%d"，而不是 "%ld"。一个好的编译器会警告你这一点。GCC 为您的原始版本提供以下警告：

```
test.cpp: In function ‘int main(int, char* const*)’:
test.cpp:17: warning: converting to ‘long long unsigned int’ from ‘double’
test.cpp:30: warning: format ‘%d’ expects type ‘int’, but argument 2 has type ‘long long unsigned int’
test.cpp:34: warning: format ‘%d’ expects type ‘int’, but argument 2 has type ‘long long unsigned int’
test.cpp:34: warning: format ‘%ld’ expects type ‘long int’, but argument 3 has type ‘int’
test.cpp:36: warning: format ‘%d’ expects type ‘int’, but argument 3 has type ‘long long int’
test.cpp:45: warning: format ‘%d’ expects type ‘int’, but argument 2 has type ‘long long unsigned int’
test.cpp:45: warning: format ‘%d’ expects type ‘int’, but argument 3 has type ‘long long unsigned int’
test.cpp:45: warning: format ‘%ld’ expects type ‘long int’, but argument 4 has type ‘int’ 
```

这说明了很多。

您应该将大小声明为：

```
std::vector<long long>::size_type size; 
```

然后你应该把它用作：

```
std::printf("current last: %llu sieve size: %llu\n", (unsigned long long) answer, (unsigned long long) size);
std::printf("Limit: %llu Answer: %llu sieve size: %llu\n", (unsigned long long) limit, (unsigned long long) answer, (unsigned long long) size); 
```

当然，使用 iostream 可以避免这些问题，特别是在 printf() 中将大小转换为 printf 已知类型的丑陋转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-02T04:02:33.603

这搞砸了，因为你有：

```
unsigned long long answer = 0;
int size; 
```

你打电话`printf`给：

```
std::printf("current last: %d sieve size: %ld\n", answer, size); 
```

您的两个格式字符串都是错误的：

1.  您正在传递`answer`并`printf`格式化它`%d`，但它应该是`%lld`，因为它已声明`unsigned long long`。

2.  您使用`%d`而不是传递大小`%ld`。既然`size`是和`int`，它应该是`%d`。

当这些 args 被传递给 printf 时，`answer`它`%d`会`answer`为`%ld`. 这**不是**你想要的。

如果你用`-Wall`你的编译器编译应该警告你这种事情。请密切注意警告！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T03:30:33.617

看起来很疯狂。因为 size 被声明为“int size”，所以 printf("...%d") 绝对正确。它不可能是 size_t 与“int”的大小不同，因为您明确地将“size”声明为 int，并且 cout << ... size ... 可以正常工作。

您是否检查过您是否已包含 ? 可能是在您的系统上没有正确声明 printf 工作“错误”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T03:40:02.020

你的问题是它`answer`被定义为 a`long long`并且你只用 a 打印它`%d`。

printf 是一个可变参数函数，在 C 中这意味着编译器**不知道**您传递给函数的参数是什么。它不能进行正常的类型转换，它必须*信任*它的用户才能正确获取格式参数，否则参数将无法正确地从调用堆栈中拉出。

你没看对。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T03:24:18.907

矢量大小是`size_t`，我相信这通常是`long`...

不过，不能说为什么`printf`不起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-02T03:25:58.777

你运行的硬件是什么？奇怪的是，这`size`与您想象的类型不同。打印`sizeof(size)`并检查，或尝试`%ld`. 如果你有一台像 PPC 这样的大端机器，大小是 a `long`，并且你打印 a `%d`，你会得到 long 的全零结尾。

### 更新

好的，这就是我使用 Intel Mac mini 10.5 得到的结果：

```
$ cat trySize.C 
#include <iostream>
#include <vector>

int main(){
    std::cout << "sizeof(size_t): " 
        << sizeof(size_t) 
        << std::endl ;
    std::vector<long long> sieve ;
    std::cout << "sizeof(sieve.size()): " 
        << sizeof(sieve.size()) 
        << std::endl;
    printf("sizeof(sieve.size()) (printf): %d\n", sizeof(sieve.size()));
    return 0;
}
$ g++ trySize.C
$ ./a.out
sizeof(size_t): 4
sizeof(sieve.size()): 4
sizeof(sieve.size()) (printf): 4
$ 
```

您可能应该开始将代码分解成更小的部分并尝试它们；这里有一些奇怪的东西。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-02T03:29:50.610

该`size()`方法返回`size_t`，这取决于您的 c++ 实现。当您尝试 时`printf("%d")`，您是在告诉图书馆期待一个`int`，但不一定如此；然后它`int`从调用堆栈中获取一个，它只获取`size_t`.

您需要做的是通过强制转换将返回值强制`size()`为已知数据类型： `printf("%d", (int) size)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-02T04:19:42.737

这将起作用：

```
std::printf("current last: %**lld** sieve size: %ld\n", answer, size); 
```

问题是答案是一个 long long （一个 64 位整数）并且 %d 需要一个 32 位整数。所以尺寸不会被打印出来。您将需要使用 %lld。

有关 printf 格式字符串的更多信息，请查看： [http ://en.wikipedia.org/wiki/Printf](http://en.wikipedia.org/wiki/Printf)

# c# - .NET 页面上的两个“表单”及其验证器

> ID：601189
> 
> 赞同：0
> 
> 时间：2009-03-02T03:26:15.733
> 
> 标签：c#, .net, asp.net, validation, forms

我有一个包含 2 个“表单”的页面（我的意思是这里的表单是一个面板，包括：文本框、验证器和一个按钮）。

（我在这里得到了 2 个，因为其中一个实际上在 MasterPage 上，一直显示）

问题是当您尝试提交其中一个表单时，它会验证另一个表单，该表单当然是空白且无效的。

你怎么解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T03:29:05.463

您的问题可以通过 asp.net ValidationGroups 解决。

[http://weblogs.asp.net/scottgu/archive/2004/10/24/246945.aspx](http://weblogs.asp.net/scottgu/archive/2004/10/24/246945.aspx)

基本上，您使用唯一命名的验证组对要验证的控件进行分组。像这样：

```
<asp:Textbox ID="txt" runat="server" />
<asp:RequiredFieldValidator id="rfv" runat="server" ControlToValidate="txt" ValidationGroup="masterGroup">* Required!</asp:RequiredFieldValidator>
<br />
<asp:Button id="btnSubmitMaster" runat="server" Text="Submit!" ValidationGroup="masterGroup" /> 
```

如果您像这样对输入进行分组，然后将验证组分配给提交表单的控件，则其他验证组中的输入将不会被验证。

# sql - SQL：如何仅显示 30 天的记录

> ID：601193
> 
> 赞同：3
> 
> 时间：2009-03-02T03:28:50.737
> 
> 标签：sql, ms-access, jet

我试着用

```
SELECT * from Results
WHERE DATEDIFF(d,Date,getdate())<30 
```

但这似乎有错误。

对于提交的每条记录，只会显示 30 天。我可以知道我的语法是否正确吗？

非常感谢，斯坦

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-02T03:35:58.253

语法看起来不错，但您可能需要 'quote' `Date`：

```
SELECT * from Results WHERE DATEDIFF(d, [Date], getdate()) < 30 
```

您在结果中有一个名为日期的列吗？

顺便说一句，这将无法使用索引，而这将：

```
SELECT * from Results WHERE [Date] >= DATEADD(d, -30, getdate()) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-02T23:29:38.727

首先，您（以及该线程中的大多数回复）正在混淆 SQL 变体。您在关于 SQL Server 的问题中什么也没说，但是，您得到了有关使用 SQL Server 语法（即 GetDate()）的建议。

JohnFx 的答案为您提供了正确的 Jet SQL 语法：

```
SELECT *  
FROM results 
WHERE ([Date] between DateAdd("d", -30, Date()) and Date()) 
```

但他也认为在 Access/Jet 中将字段命名为“日期”确实很糟糕。WHERE 子句可以通过以下方式改进：

```
WHERE (results.Date between DateAdd("d", -30, Date()) and Date()) 
```

但我不能肯定地说——我永远不会将字段命名为“日期”，所以永远不会遇到这种问题。

但是可能有一个更简单的版本，因为 Jet 以整数部分表示日期，小数部分表示时间的格式存储其日期。因此，在处理日期（而不是几周、几个月或季度）时，您可以直接对它们执行日期数学运算：

```
WHERE results.Date BETWEEN results.Date-30 AND Date() 
```

这将为您提供与 JohnFx 的 DateDiff() 版本完全相同的结果，但不需要为每一行调用 DateAdd 函数。

关键是使用 Jet 数据库的正确语法，这意味着 DateAdd() 的第一个参数是字符串值 ("d")，并且您不能使用 SQL Server 函数 (GetDate())，但必须改为使用 Jet 的函数来实现相同的目的 (Date())。但是当你不需要时避免在你的 SQL 中使用 Jet/Access 函数也是一个好主意，这就是为什么我相信“results.Date-30”版本会比 DateAdd() 版本更好.

旁白：我真的希望那些发布涉及 SQL 的答案的人会密切关注提问者使用什么数据库引擎来执行 SQL。在这个帖子中发现了很多错误的答案，正是因为那些发布者没有仔细阅读问题（从关键字中很清楚涉及到什么数据库引擎）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-02T17:12:37.667

尝试这个：

```
SELECT *  
FROM results 
WHERE ([Date] between DateAdd("d", -30, Date()) and Date()) 
```

另一个单挑。在 Access 中将字段命名为“日期”通常不是一个好主意。这是一个保留字，您必须在所有查询中使用方括号 []。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T04:06:49.537

如果您使用的是 Microsoft Access 数据库，则获取当前日期的函数是**Date()**而不是`getdate()`（用于 SQL Server）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T23:25:55.803

您没有将 SQL Server 指定为您的数据库。在 Access 中，DateAdd 的语法为：DateAdd("d", 1, "31-Jan-95")。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T03:35:27.723

您的查询看起来不错。您遇到的错误是什么？

# sql-server-2005 - 有人如何破解 SQL Server 2005 加密堆栈？

> ID：601209
> 
> 赞同：3
> 
> 时间：2009-03-02T03:39:39.540
> 
> 标签：sql-server-2005, encryption

这是为所有安全专家准备的。

我有一个带有数据库主密钥的 SQL Server 2005 数据库，该数据库使用服务器密钥使用非常强的密码进行加密，而服务器密钥又使用 Windows 数据保护层中的服务帐户凭据进行加密。

我有一个使用数据库主密钥加密的证书。

我有一个使用 AES256 的对称密钥，它使用证书加密，我正在使用对称密钥加密和解密数据库中的机密字段。

有人需要什么来破解数据库中的加密字段？我唯一的假设是，由于对称加密算法的强度，无法使用暴力破解，并且对称密钥本身受到 4 个附加加密层的保护：

Windows DPAPI -> 服务器 -> 数据库 -> 证书 -> 对称密钥

这对我来说似乎很紧。

让我们不包括“通过吸毒和与他睡觉来获取系统管理员的用户名和密码”的明显答案，这绝对是相关的，但不是我所追求的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T06:09:54.267

这是一个潜在的攻击。它假定您已经有办法将任意代码作为服务帐户运行。例如，您可能会执行一个远程代码执行错误来获取。这样做之后，使用 DPAPI 来获取服务器密钥就相对简单了。完成后，您可以获得主数据库密钥，尽管您需要一些蛮力方法来破解密码。

听起来很难做到，这取决于密码的强度可能是不可能的。服务帐户是低权限还是高权限？如果它是管理员帐户，您可以使用它（假设它已损坏）来安装键盘记录器以获取密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T16:05:28.203

K. Brian Kelley 专门研究 SQL Server 安全性，他写了几篇关于如何在 SQL Server 环境中绕过加密的好文章，如下所示：

*   [http://www.sqlservercentral.com/blogs/brian_kelley/archive/2009/02/20/you-must-trust-someone.aspx](http://www.sqlservercentral.com/blogs/brian_kelley/archive/2009/02/20/you-must-trust-someone.aspx)
*   [http://www.sqlservercentral.com/blogs/brian_kelley/archive/2009/02/27/a-security-control-inconsistently-applied-is-not-a-control.aspx](http://www.sqlservercentral.com/blogs/brian_kelley/archive/2009/02/27/a-security-control-inconsistently-applied-is-not-a-control.aspx)
*   [http://www.sqlservercentral.com/blogs/brian_kelley/archive/2009/02/20/you-must-trust-your-dbas.aspx](http://www.sqlservercentral.com/blogs/brian_kelley/archive/2009/02/20/you-must-trust-your-dbas.aspx)

如果您真的很喜欢安全，我强烈建议您订阅他的博客。他也可以在 Twitter 上找到，网址为[http://twitter.com/kbriankelley](http://twitter.com/kbriankelley)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T04:30:27.890

这个未加密的密钥存储在内存中的某个位置以便能够对其进行加密，攻击者是否有办法获得对系统级别的访问权限，然后能够基本上扫描内存，或者将额外的线程附加到 MSSQL。

此外，这些加密字段，它们是否用于任何前端应用程序？他们在你时可见`SELECT * FROM table`吗？例如，您可以根据需要在数据库和字段上设置尽可能多的安全性，但是如果有人能够使用 SQL 注入来编写自己的 SQL 查询并因此查看字段的值，那么您仍然会回到原点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T05:03:33.723

假设没有人为工程攻击是可能的，我会尝试将调试器附加到读取它的程序，获取它的内存快照并尝试暴力攻击中的每一组字节。

即使我无法获得内存映像，我也会对源文件尝试相同的操作，以防密钥在那里。

实际上，您必须确保密钥在任何地方都不会完好无损才能击败此类攻击。

# c++ - 重载运算符 << - C++

> ID：601219
> 
> 赞同：5
> 
> 时间：2009-03-02T03:44:37.640
> 
> 标签：c++, vector, operator-overloading, params-keyword

**背景**

我有一个在内部使用 vector<std::string> 的容器类。我为这个包装类提供了一个方法*AddChar(std::string)* ，它对内部向量执行*push_back() 。*在我的代码中，有时我必须向容器中添加多个项目。为此我必须使用

```
container.AddChar("First");
container.AddChar("Second"); 
```

这使得代码更大。所以为了让它更容易，我打算重载操作符<<。这样我就可以写了

```
container << "First" << "Second" 
```

两个项目将被添加到基础向量中。

这是我用来做的代码

```
class ExtendedVector
{
private:
    vector<string> container;

public:
    friend ExtendedVector& operator<<(ExtendedVector& cont,const std::string str){
        cont.AddChar(str);
        return cont;
    }

    void AddChar(const std::string str)
    {
        container.push_back(str);
    }

    string ToString()
    {
        string output;
        vector<string>::iterator it = container.begin();
        while(it != container.end())
        {
            output += *it;
            ++it;
        }
        return output;
    }
}; 
```

它按预期工作。

**问题**

1.  运算符重载是否正确编写？
2.  在这种情况下重载运算符是一种好习惯吗？
3.  这段代码会有任何性能问题或任何其他问题吗？

有什么想法吗？

**编辑**

在听到优秀的评论后，我决定不超载 << 因为它在这里没有意义。我删除了运算符重载代码，这是最终代码。

```
class ExtendedVector
{
private:
    vector<string> container;

public:

    ExtendedVector& AddChar(const std::string str)
    {
        container.push_back(str);
        return *this;
    }

         .. other methods
} 
```

这允许我添加

```
container.AddChar("First").AddChar("Second") 
```

在 C# 中，我可以通过使用 params 关键字更轻松地做到这一点。代码会像

```
void AddChar(params string[] str)
{
    foreach(string s in str)
       // add to the underlying collection
} 
```

我知道在 C++ 中，我们可以使用*...*来指定参数的可变长度。但是 AFAIK，它不是类型安全的。那么这样做是推荐的做法吗？这样我就可以写了

```
container.AddChar("First","Second") 
```

感谢您的回复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-02T04:35:14.243

> 运算符重载是否正确编写？

是的，但可以做得更好。就像其他人提到的那样，您的函数可以完全由现有的公共函数定义。为什么不让它只使用那些？现在，它是一个朋友，这意味着它属于实现细节。如果您将 operator<< 作为成员放入您的班级，情况也是如此。但是，让您的 operator<< 成为*非会员*、*非朋友的*功能。

```
class ExtendedVector {
    ...
};

// note, now it is *entirely decoupled* from any private members!
ExtendedVector& operator<<(ExtendedVector& cont, const std::string& str){
    cont.AddChar(str);
    return cont;
} 
```

如果您更改课程，您将无法确定您的 operator<< 是否仍然有效。但是，如果您的 operator<< 完全仅依赖于公共函数，那么您可以确定它仅在对您的类的实现细节进行更改后才会起作用。耶！

> 在这种情况下重载运算符是一种好习惯吗？

正如另一个人再次所说，这是有争议的。在许多情况下，运算符重载乍一看看起来很“整洁”，但明年看起来就像地狱一样，因为当你给一些符号特别的爱时，你已经不知道你在想什么了。在运算符<<的情况下，我认为这是一个不错的用途。它用作流的插入运算符是众所周知的。我知道 Qt 和 KDE 应用程序在以下情况下广泛使用它

```
QStringList items; 
items << "item1" << "item2"; 
```

类似的情况是`boost.format`，它也重`operator%`用于在其字符串中为占位符传递参数：

```
format("hello %1%, i'm %2% y'old") % "benny" % 21 
```

当然，在那里使用它也是有争议的。但是它对 printf 格式指定的使用是众所周知的，因此它的使用在那里也可以，恕我直言。但与往常一样，风格也是主观的，所以要持保留态度:)

> 如何以类型安全的方式接受可变长度参数？

好吧，如果您正在寻找同质参数，则有一种接受向量的方法：

```
void AddChars(std::vector<std::string> const& v) {
    std::vector<std::string>::const_iterator cit =
        v.begin();
    for(;cit != v.begin(); ++cit) {
        AddChar(*cit);
    }
} 
```

但是通过它并不是很舒服。你必须手动构建你的向量然后通过......我看到你已经对可变参数样式函数有了正确的感觉。不应将它们用于此类代码，并且仅在与 C 代码或调试函数交互时才可使用。处理这种情况的另一种方法是应用预处理程序编程。这是一个高级主题，非常hacky。这个想法是自动生成达到某个上限的重载，大致如下：

```
#define GEN_OVERLOAD(X) \
void AddChars(GEN_ARGS(X, std::string arg)) { \
    /* now access arg0 ... arg(X-1) */ \
    /* AddChar(arg0); ... AddChar(arg(N-1)); */ \
    GEN_PRINT_ARG1(X, AddChar, arg) \
}

/* call macro with 0, 1, ..., 9 as argument
GEN_PRINT(10, GEN_OVERLOAD) 
```

那是伪代码。您可以在[此处](http://www.boost.org/doc/libs/1_38_0/libs/preprocessor/doc/index.html)查看 boost 预处理器库。

下一个 C++ 版本将提供更好的可能性。可以使用初始化列表：

```
void AddChars(initializer_list<std::string> ilist) {
    // range based for loop
    for(std::string const& s : ilist) {
        AddChar(s);
    }
}

...
AddChars({"hello", "you", "this is fun"}); 
```

在下一个 C++ 中也可以使用[可变参数模板](http://www.osl.iu.edu/~dgregor/cpp/variadic-templates.html)支持任意多个（混合类型）参数。GCC4.4 将支持它们。GCC 4.3 已经部分支持它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T03:55:40.233

> 在这种情况下重载运算符是一种好习惯吗？

我不这么认为。对于不知道您已使运算符超载的人来说，这简直令人困惑。只需坚持描述性的方法名称，忘记您输入的额外字符，这不值得。您的维护者（或 6 个月后您自己）会感谢您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-02T03:56:04.587

1）是的，除非因为 AddChar 是公开的，所以没有理由它需要是`friend`.

2）这是有争议的。`<<`有点像是操作员，其“奇怪”事物的重载至少被勉强接受。

3）没有什么明显的。与往常一样，分析是您的朋友。您可能需要考虑将字符串参数传递给const reference ( )`AddChar`并`operator<<`通过 const reference ( `const std::string&`) 来避免不必要的复制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T04:07:08.787

我不希望以这种方式重载它，因为向量通常没有重载的左移运算符 - 这不是真的成语;-)

我可能会从 AddChar 返回一个引用，而不是像这样：

```
ExtendedVector& AddChar(const std::string& str) {
    container.push_back(str);
    return *this;
} 
```

所以你可以这样做

```
container.AddChar("First").AddChar("Second"); 
```

这并不比位移运算符大多少。

（另请参阅 Logan 关于通过引用而不是按值传递字符串的评论）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T04:13:22.830

在这种情况下，运算符重载不是好的做法，因为它会降低代码的可读性。出于充分的理由，该标准`std::vector`也没有用于推动元素。

如果你担心调用者代码太长，你可以考虑这个而不是重载运算符：

```
container.AddChar("First").AddChar("Second"); 
```

`AddChar()`如果您有return ，这将是可能的`*this`。

你有这个`toString()`功能很有趣。在**这种**情况下，`operator<<`输出到流将是标准的东西！因此，如果您想使用运算符，请将`toString()`函数设为`operator<<`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-02T04:08:11.547

运算符在这里没有正确重载。没有理由让操作员成为朋友，因为它可以是类的成员。Friend 用于不是类的实际成员的函数（例如，当为 ostream 重载 << 以便可以将对象输出到 cout 或 ofstreams 时）。

您实际希望操作员是什么：

```
ExtendedVector& operator<<(const std::string str){
    AddChar(str);
    return *this;
} 
```

通常认为以一种让它们做一些比正常情况下的操作的方式重载操作符是不好的做法。<< 通常是位移，因此以这种方式重载它可能会令人困惑。显然 STL 重载 << 用于“流插入”，因此以类似的方式重载它以供您使用*可能*是有意义的。但这似乎不像你在做什么，所以你可能想避免它。

没有性能问题，因为运算符重载与常规函数调用相同，只是调用被隐藏了，因为它是由编译器自动完成的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T04:23:23.100

这会让事情变得相当混乱，我会使用与 std::cin 相同的语法到变量中：

`std::cin >> someint;`

`"First" >> container;`

这样，它至少是一个插入运算符。对我来说，当任何东西都有一个 << 重载运算符时，我希望它会输出一些东西。就像 std::cout 一样。

# c# - 如何“全局”捕获对象实例中抛出的异常

> ID：601224
> 
> 赞同：3
> 
> 时间：2009-03-02T03:50:04.710
> 
> 标签：c#, exception-handling, global, enterprise-library

我目前正在编写一个 winforms 应用程序（C#）。

我正在使用企业库异常处理块，按照我所看到的相当标准的方法。IE：在 Program.cs 的 Main 方法中，我已将事件处理程序连接到 Application.ThreadException 事件等。

这种方法效果很好，可以处理应用程序的异常情况。

在我的一个业务对象中，我在对象属性之一的 Set 访问器中抛出了各种异常

```
set {

   if (value > MaximumTrim)
    throw new CustomExceptions.InvalidTrimValue("The value of the minimum trim...");

   if (!availableSubMasterWidthSatisfiesAllPatterns(value))
        throw new CustomExceptions.InvalidTrimValue("Another message...");

   _minimumTrim = value;
} 
```

我对这种方法的逻辑（没有把它变成“何时抛出异常”的讨论）只是业务对象负责检查业务规则约束并抛出一个可以根据需要冒泡并被捕获的异常。应该注意的是，在我的应用程序的 UI 中，我确实明确检查了公共属性设置为的值（并在那里采取行动，显示友好的对话框等）但是抛出异常我也涵盖了我的业务对象的情况UI 可能不会使用该属性，例如：该属性正在由另一个业务对象设置。无论如何，我想你们都明白了。

我的问题是这些异常没有被连接到 Application.ThreadException 的处理程序捕获，我不明白为什么。

从其他阅读中，我完成了 Application.ThreadException 事件，它处理程序“......捕获主 GUI 线程上发生的任何异常”。我的业务对象中引发的异常不在此线程中吗？我还没有创建任何新线程。

如果我按如下方式更新代码，显式调用连接到 Application.ThreadException 的事件处理程序，我可以获得该方法。这是企业库示例中概述的方法。**然而，这种方法需要我包装在 try catch 中抛出的任何异常，这是我试图通过使用“全局”处理程序来避免的。**

```
try
{
    if (value > MaximumTrim)
        throw new CustomExceptions.InvalidTrimValue("The value of the minimum...");

    if (!availableSubMasterWidthSatisfiesAllPatterns(value))
        throw new CustomExceptions.InvalidTrimValue("Another message");

    _minimumTrim = value;
}
catch (Exception ex)
{
    Program.ThreadExceptionHandler.ProcessUnhandledException(ex);
} 
```

我还研究了使用将处理程序连接到 AppDomain.UnhandledException 事件，但这也没有捕获异常。

如果有人可以向我解释为什么我的异常没有被第一个代码示例中的全局异常处理程序捕获，我会很好。是否有我遗漏的另一种方法，或者我是否根据需要在 try catch 中使用包装代码，如上所示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T03:53:26.263

作为一个想法，尝试添加（相当早 - 即在开始时`Main`）：

```
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException); 
```

就是说-无论有没有……它对我来说似乎都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T03:55:17.630

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx#)，`Application.ThreadException`只有在未处理异常时才会触发。也许`catch`调用堆栈上的某个地方正在处理异常？

另一种选择是尝试使用[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx#)代替。它与 相同`Application.ThreadException`，只是它适用于相同的所有异常`AppDomain`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-25T09:34:49.877

如果您尝试使用 Application.ThreadException 或 AppDomain.CurrentDomain.UnhandledException**调试器**将**捕获**异常！

要测试这些方法，您必须在没有调试器的情况下启动应用程序。

# jquery - 使用 jQuery 为水平滚动窗格蒙皮的最佳方法是什么？

> ID：601226
> 
> 赞同：0
> 
> 时间：2009-03-02T03:51:33.817
> 
> 标签：jquery

我目前正在使用[jScrollHorizo​​ntalPane在](http://plugins.jquery.com/project/jscrollhorizontalpane)[此处](http://v2.revelinnewyork.com/people/kev-okane)滚动缩略图。这是一个很棒的插件，但不幸的是，必须调整浏览器的大小才能显示滚动条。我想这是一个错误，但缺乏支持。

我的问题是我应该继续尝试让它正常工作，还是有一个更简单或更有效的基于 jQuery 的滚动方法？

请记住，我不是在创建滚动幻灯片，而只是对默认滚动条进行蒙皮。想法？想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T04:41:05.163

好的，我刚刚想通了。内部元素的宽度必须在 jScrollHorizo​​ntalPane 脚本启动**之前设置。**我有另一个脚本通过 DOM 设置宽度，但此时为时已晚，因为 jScrollHorizo​​ntalPane 已经计算了它自己的宽度。

现在使用 PHP 来设置内部元素服务器端的宽度。

# firefox - 在不保存会话的情况下意外关闭窗口后恢复 Firefox 选项卡

> ID：601233
> 
> 赞同：2
> 
> 时间：2009-03-02T03:58:16.173
> 
> 标签：firefox, extract, bookmarks

我逐渐开始完全依赖 Firefox 在任何类型的崩溃后恢复我的标签的能力。这种信念并非完全没有根据，但我没有应急计划是不小心关闭了 Firefox 窗口并说不要保存会话。那是在我父亲借我的笔记本电脑查看他的电子邮件时发生的。哦。

当然，完整的浏览器历史记录在那里，但我打开的几十个标签页都消失在茫茫大海中了。我运行“正常运行时间”来查看我上次重新启动的时间，并查找了在那个时候打开的一组 URL，但要么我错过了它，要么“上次访问”时间不起作用。无论如何，我认为其他人可能知道恢复标签的更好方法，或者已经破解了一些东西以将它们从 Firefox 的历史或其他东西中捞出来。

（当然，未来的教训是将所有内容保存到美味（或任何地方）而不依赖于您的浏览器状态！我也很想听听其他人使用什么系统来预防性地处理这个问题。）

补充：我知道从表面上看，这似乎无法解决（毕竟，我或我父亲明确告诉 Firefox 不要保存标签），但作为可以做的事情的一个例子（也许这使这个问题成为与编程相关的问题毕竟)...

如果 Firefox 在 URL 打开和关闭时都存储了，那么您可以通过擦除最近的历史记录然后获取打开但从未关闭的 URL 从历史记录中提取标签。所以...

### 真正的问题

是否存在可以根据以下输入推断打开选项卡列表的算法：

*   浏览器历史记录中的 URL 和相关字段列表
*   Firefox 会话的命运性解散的时间。

如果有人能证明这是可能的，我会将其编码并在此处作为答案提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T04:06:09.803

在 Firefox 中有几个处理“会话”的附加组件。但是，如果你关闭它并说不保存会话，那么这正是它要做的。

我真的看不出这里还能做什么。

# python - 在 Mac 上进行 Python 开发的建议？

> ID：601236
> 
> 赞同：8
> 
> 时间：2009-03-02T04:04:06.330
> 
> 标签：python, macos

大约一个月前，我买了一台低端 MacBook，终于开始为 Python 配置它。到目前为止，我已经在 Windows 中完成了大部分 Python 工作，并且发现 OS X 的选择有点令人生畏。看起来至少有五个选项可用于 Python 开发：

*   “股票”苹果蟒蛇
*   MacPython
*   芬克
*   MacPorts
*   从源头滚动你自己的

我仍然主要为 2.5 开发，所以从功能的角度来看，股票 Python 很好。我想知道的是：我为什么要选择一个而不是另一个？

**更新：** 为了澄清，我正在寻找各种选项的讨论，而不是文档的链接。我已将此标记为社区 Wiki 问题，因为我觉得没有“正确”的答案。感谢所有已经发表评论的人的见解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-02T04:15:18.783

我在使用 Mac OS X 中包含的“普通”Python 时看到的一个优势是，它使部署到其他 Mac 变得轻而易举。我不知道您的部署方案是什么，但对我来说这很重要。我的代码必须在工作中的任意数量的 Mac 上运行，我尽量减少在所有这些系统上运行我的代码所需的工作量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-02T11:38:41.760

我强烈建议使用带有[Porticus的](http://porticus.alittledrop.com/)[MacPorts](http://www.macports.org/)来管理您的 Python 安装。构建所有东西都需要一些时间，但优点是无论您自己构建什么都将针对相同的库构建，因此如果您希望 Python 的东西正常工作，您就不必担心静态链接的共享对象等。与 Apache、PostgreSQL 等

如果您选择这种方式，请记住安装`python_select`端口并使用它来使您的系统使用从 MacPorts 安装的 Python。

作为一个额外的好处，MacPorts 为大多数主流 Python 鸡蛋提供了包，所以如果你应该能够让 MacPorts 让你了解所有这些东西的最新版本:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-06T08:39:57.397

Enthought 的 EPD 怎么样？是的，它很大，但它是一个框架构建，包括内置的 wxPython、vtk、numpy、scipy 和 ipython 之类的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-02T04:07:28.193

这里有一些有用的信息可以帮助您入门。[http://www.python.org/download/mac/](http://www.python.org/download/mac/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-02T10:10:18.367

取决于您使用 python 的目的。如果您使用 MacOS 功能和 PyObjC 之类的东西，您可能最好使用 MacPython 或 Apple 提供的 python。

我在我的 Mac 上使用 Python 主要用于开发服务器端应用程序，这些应用程序稍后将在 FreeBSD 和 Linux 机器上运行。为此，我已经使用 fink python 几年了，从 MacPorts python 开始。使用 mac 端口，添加所需的 c 模块（如数据库驱动程序等）很简单。保留两个 python 版本（在我的例子中是 2.5 和 2.6）也很容易。

我使用“编译你自己的”python 来测试 3.0 之前的 python，但通常我发现如果手动完成对 c 模块的依赖管理会很痛苦。

多亏了 easy_install，对于上述所有选项，安装纯 python 模块变得快速而简单。

我从来不是一个非常喜欢 IDE 的人。对于开发，我使用 MacPorts 安装的命令行颠覆，[Textmate](http://macromates.com/)和偶尔[的 Expandrive](http://www.expandrive.com/mac)直接访问服务器上的文件。我个人非常依赖[Bicyclerepairman for Textmade](http://blogs.23.nu/c0re/2007/08/antville-15779/)来处理我的重构需求。

[其他人似乎对Eclipse 和 Pydev](http://pydev.sourceforge.net/)很满意。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-05T05:37:09.590

根据人们在 Leopard python 中遇到的错误和遗漏的数量（*就在这里*！），我不能推荐那个版本。例如，参见：

*   [为什么我在 Python 中得到错误的结果 hmac 而不是 Perl？](https://stackoverflow.com/questions/613111/different-results-for-hmac-in-python-and-perl)
*   [Python 2.5 上选择模块的问题](https://stackoverflow.com/questions/584575/problems-on-select-module-on-python-2-5)

我会选择**MacPorts**。

它不会消除您现有的由 Apple 提供的 python，因为它默认安装在`/opt/local/bin`（与它配合得很好），而且它很容易下载和安装额外的 python 模块（甚至是您需要编译的二进制模块！）。我使用[Porticus](http://porticus.alittledrop.com/) GUI 来维护我的 MacPorts 安装包列表，包括 python。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-02T04:14:25.120

我建议使用 Python 虚拟环境，特别是如果您使用 Timecapsule，因为 Timecapsule 会备份所有内容，除了您添加到 Python 的模块！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-02T11:44:02.917

在我的 Windows 环境中，我使用 Eclipse 和 PyDev，它们可以很好地协同工作，即使它有点稀疏。显然，Mac 也可以使用完全相同的环境，所以我建议下载[Eclipse](http://www.eclipse.org)并使用内部更新软件功能通过 URL [http://pydev.sourceforge.net/updates/](http://pydev.sourceforge.net/updates/)更新 PyDev 。要进一步了解 PyDev，请看[这里](http://pydev.sourceforge.net)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-02T22:32:54.993

Apple 提供的 python 已经很老了——我的 Tiger 安装的是 2.3.5。这对你来说可能不是问题，但你会错过很多。此外，Apple 可能会对其进行更新。我不确定从 2.3.5 迁移到（比如说）2.4 是否会导致代码中断，但我想这是可能的。最近发生在 perl 人身上：http: [//developers.slashdot.org/article.pl ?sid=09/02/18/1435227](http://developers.slashdot.org/article.pl?sid=09/02/18/1435227&from=rss)

Macpython 是一个框架构建（我相信苹果的也是如此）。老实说，我不确定这到底是什么意思，但它是某些模块的先决条件，尤其是 wxPython。如果你从 macports 或 fink 获取 python，你将无法运行 wxPython（除非你通过 X11 运行它）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-04-04T16:45:14.573

猜猜这里的每个答案都忘记了什么...... [**ActivePython**](http://code.activestate.com/pypm/psyco/)。

不需要编译，即使是第三方模块，例如[numpy](http://code.activestate.com/pypm/numpy/)、[lxml](http://code.activestate.com/pypm/lxml/)、[pyqt](http://code.activestate.com/pypm/pyqt4/)和[成千上万的其他](http://code.activestate.com/pypm/)模块。

![ActivePython 社区版徽标](https://i.stack.imgur.com/r9rF8.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-02T04:37:03.410

我推荐python（任何python？）加上ipython shell。我最近使用 MacPython 的经验是 MacPython 2.5，我发现 IDLE 用作编辑器令人沮丧。它不是很有特色，而且滚动大量输出非常慢。

# linux - 如何递归地将目录复制到另一个目录并仅替换未更改的文件？

> ID：601247
> 
> 赞同：20
> 
> 时间：2009-03-02T04:13:14.717
> 
> 标签：linux, filesystems, copy, directory, administration

我希望在 Fedora 中做一个特定的副本。

我有两个文件夹：

*   'webroot'：保存所有网络文件/图像等

*   'export'：包含从我的 SVN 存储库导出的数千个 PHP、CSS、JS 文档的文件夹。

导出目录包含许多与根目录相同的文件/文件夹，但根目录包含导出中找不到的其他文件/文件夹。

我想使用以下选项将导出的所有内容与我的 webroot 合并：

1.  如果导出版本包含的代码与 webroot 版本中的代码不同，则覆盖 webroot 中的文件（实时）
2.  如果文件被覆盖，请保留文件的权限/用户/组（导出版本替换实时版本）*注意我希望维护 webroots 权限/所有权，但导出的内容
3.  不提示/停止任何形式的副本（即不冗长）
4.  递归复制 - 显然我想复制导出中找到的所有*文件文件夹和子文件夹

我对 cp 进行了一些研究-这可以完成工作吗？：

```
cp -pruf ./export /path/to/webroot 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-02T04:19:15.637

可能，但任何时候相应的文件`export`具有`webroot`相同的内容但修改时间不同，您最终会执行不必​​要的复制操作。您可能会从以下方面获得更聪明的行为`rsync`：

```
rsync -pr ./export /path/to/webroot 
```

此外，`rsync`如果您需要，可以通过 SSH 连接将文件从一台主机复制到另一台主机。另外，它有无数的选项，你可以指定它来调整它的行为——查看手册页了解详细信息。

*编辑*：关于您通过保留权限来澄清您的意思：您可能希望放弃该`-p`选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-02T04:17:57.247

1.  -u 如果目标比源旧，则覆盖现有文件夹
2.  -p 保留权限和日期
3.  -f 关闭冗长
4.  -r 使复制递归

所以看起来你得到了所有正确的参数 cp

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-02T04:18:31.927

听起来像是一份工作`cpio`（因此，GNU tar 可能也可以做到）：

```
cd export
find . -print | cpio -pvdm /path/to/webroot 
```

当然，如果您需要保留所有者，则必须以 root 身份进行操作。选项是“通过模式”，意思是位置之间的`-p`复制；`-v`是冗长的（但不是交互式的；有区别）；`-d`表示根据需要创建目录；`-m`表示保留修改时间。默认情况下，如果没有该`-u`选项，`cpio`将不会覆盖目标区域中比源区域中的文件更新的文件。

# c# - 防止文本框中的光标闪烁

> ID：601255
> 
> 赞同：6
> 
> 时间：2009-03-02T04:16:22.167
> 
> 标签：c#, winforms, textbox

在文本框中，如何防止单击时显示闪烁的光标？

我确实在一些论坛上读到过调用了一个特定的 api，但是当我在我的代码中尝试它时，显示了一个错误。如果可能，请为此目的提供完整的代码，并让我知道是否存在应该执行代码的特定事件。

此文本框是为模拟局域网信使而创建的表单窗口的一部分。我正在使用 C#。该表单有两个文本框，以类似于 google talk。最好防止在上部文本框上显示闪烁的光标。

我试过了：

```
[DllImport("user32")] 
private static extern bool HideCaret(IntPtr hWnd); 
public void HideCaret() { HideCaret(TextBox1.Handle); } 
```

我收到错误消息：“找不到 DllImport。”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-02T04:48:35.723

如果要禁止对文本框进行编辑，请将其 ReadOnly 属性设置为 true。

如果您想允许编辑但仍隐藏插入符号，请完全[按照指定](http://pinvoke.net/default.aspx/user32/HideCaret.html)调用 Win32 API ：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
static extern bool HideCaret(IntPtr hWnd);

...

HideCaret(myTextBox.Handle); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T04:22:56.347

**嗨，试试这个代码**

```
public class CustomTextBox:System.Windows.Forms.TextBox
{
    [System.Runtime.InteropServices.DllImport("user32")]
    private static extern bool HideCaret(IntPtr hWnd);

    public CustomTextBox()
    {
        TabStop = false;

        MouseDown += new System.Windows.Forms.MouseEventHandler(CustomTextBox_MouseDown);
    }

    void CustomTextBox_MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        HideCaret(this.Handle);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:03:41.713

将 hideCaret 函数放在 TextChanged 事件中将解决问题：

```
[DllImport("user32.dll")]
static extern bool HideCaret(IntPtr hWnd);

private void textBox1_TextChanged(object sender, EventArgs e)
{
    HideCaret(textBox1.Handle);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T22:26:37.747

[我可以在 here 和this answer](https://stackoverflow.com/questions/97459/automatically-select-all-text-on-focus-in-winforms-textbox/6857301#6857301)`TextBox`的使用代码上（部分）模拟 Chrome 的网址栏。

在第一次单击时，它会选择所有文本而不显示闪烁的插入符号，诀窍是当您第二次单击所选文本时使插入符号显示出来，这就是 Chrome 的网址栏的行为方式。

这是代码：

```
[DllImport("user32.dll")]
static extern bool HideCaret(IntPtr hWnd);

private void textBox2_Enter(object sender, EventArgs e)
{
    // Kick off SelectAll asyncronously so that it occurs after Click
    BeginInvoke((Action)delegate
    {
        HideCaret(textBox2.Handle); 
        textBox2.SelectAll();              
    });          
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-27T15:14:57.343

其他人表示将“ReadOnly”设置为“True”将在您单击文本框时避免插入符号。他们在那里错了。我正在使用 VB.Net，但也许我下面的示例代码可能会提供一个更简单的答案。

它涉及创建一个新类（MyTextBox），并添加了默认为“False”的“NoCaret”属性（即默认显示插入符号）。将以下代码添加到新类模块中的项目中，重建项目，然后将新文本框（然后在工具箱顶部找到）拖到表单上。要停止插入符号显示在属性面板中为您添加到表单的每个 MyTextbox 控件打勾“NoCaret”。

因此，您首先要创建一个新的类模块，如下所示（不需要在设计器中绘制文本框。实际上最好不要绘制它，因为这会创建不必要的“InitializeComponent”代码，只会弄得一团糟。行“子“New()”中的 MyBase.New()” 负责一切）

```
Imports System.Runtime.InteropServices

Public Class MyTextBox
    Inherits TextBox
    Private Declare Function HideCaret Lib "user32.dll" (ByVal hwnd As Int32) As Int32
    Private Declare Function ShowCaret Lib "user32.dll" (ByVal hwnd As Int32) As Int32

    Private _HideCaret As Boolean

    Public Sub New()
        MyBase.New()
    End Sub

    Public Property NoCaret As Boolean
        Get
            Return _HideCaret
        End Get
        Set(ByVal value As Boolean)
            _HideCaret = value
        End Set
    End Property

    Private Sub TextBox_MouseMove(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Me.MouseMove
        If Me.NoCaret = True Then
            HideCaret(Handle.ToInt32)
        Else
            ShowCaret(Handle.ToInt32)
        End If
    End Sub
End Class 
```

但是，请确保对表单上任何现有文本框进行“TypeOf”测试的任何现有代码，例如：

```
For each tb as control in MyForm.Controls
   if TypeOf tb Is TextBox then
   .....{do something}
   endif
Next 
```

改为：

```
For each tb as control in MyForm.Controls
   if TypeOf tb.Parent Is TextBox then
   .....{do something}
   endif
Next 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-21T09:11:15.940

我遇到了一个问题，无法在文本框中隐藏插入符号。诀窍是将其隐藏在 Designer 中无法访问的 GotFocus 事件中，因此必须手动订阅它。完整代码如下：

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace WindowsFormsApp
{
    public partial class Form1 : Form
    {
        [DllImport("user32")]
        private static extern bool HideCaret(IntPtr hWnd);

        public Form1()
        {
            InitializeComponent();
            textBox1.GotFocus += textBox1_GotFocus;
        }

        private void textBox1_GotFocus(object sender, EventArgs e)
        {
            HideCaret(textBox1.Handle);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-25T05:23:22.860

VB.NET 代码

```
Imports System.Runtime.InteropServices

Public Class xxxxxxxxxxxxxxxxxxxxxx

<DllImport("user32.dll")>
    Private Shared Function HideCaret(ByVal hwnd As IntPtr) As Boolean
    End Function

...............

Private Sub txtNotePreview_MouseMove(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtNotePreview.MouseMove, txtNotePreview.KeyPress
        HideCaret(txtNotePreview.Handle)
    End Sub 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-03-02T04:44:01.587

将`ReadOnly`属性设置`TextBox`为`true`。

此问题的更多答案：[C# 中的只读文本框](https://stackoverflow.com/questions/589273/read-only-textbox)

# iphone - iPhone Dev：Xcode 调试器不会在断点处停止

> ID：601265
> 
> 赞同：20
> 
> 时间：2009-03-02T04:23:14.413
> 
> 标签：iphone, xcode, cocoa-touch, debugging, xcode3.1

我在 OS X 10.5.5 上安装了 Xcode 3.1.2。我有一个构建良好的 iPhone 项目，但调试器不会命中我设置的任何断点。我已经尝试了我在网上找到的所有标准修复：

1.  我在 Xcode 首选项中关闭了“懒加载符号”
2.  我的活动配置是调试
3.  构建设置中的优化级别为 0
4.  我已经清理了所有目标并重建了
5.  我使用构建和调试（而不是构建和运行）

我以为我可能无意中调整了项目的设置。所以我创建了一个新项目，那个项目也有同样的问题。

我希望我在这里遗漏了一些简单的东西。我的调试器几天前还在工作，但突然停止了。

* * *

### 更新：

事情变得越来越陌生。以下是一些回复的答案

1.  我在任何地方都找不到“GCC 4.0 - 代码生成”选项。在 Target 和 Executable Info 页面中，我看起来既好又低。我看到的唯一选项是选择编译器版本，并选择了 GCC 4.0，但这是一个没有附加选项的单行部分。
2.  关于在哪里放置断点：我现在唯一的断点在 main() 中，并且没有被命中
3.  我正在使用 Run -> Debug (/% Y) 命令启动调试器。仍然没有运气

* * *

### 更新 2：

1.  将目标设置中的 Base SDK 更改为 Sim 2.2.1。将 Active SDK 更改为 Sim 2.2.1。
2.  现在我可以看到 GCC 4.0 代码生成选项 - 已检查调试符号
3.  仍然没有达到断点

这是控制台日志（在 main.m 的第一行设置断点）：

```
[Session started at 2009-03-06 21:29:19 -0600.]
Loading program into debugger…
GNU gdb 6.3.50-20050815 (Apple version gdb-962) (Sat Jul 26 08:14:40 UTC 2008)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-apple-darwin".warning: Unable to read symbols for "/System/Library/Frameworks/UIKit.framework/UIKit" (file not found).
warning: Unable to read symbols from "UIKit" (not yet mapped into memory).
warning: Unable to read symbols for "/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics" (file not found).
warning: Unable to read symbols from "CoreGraphics" (not yet mapped into memory).
Program loaded.
sharedlibrary apply-load-rules all
Attaching to program: `/private/var/root/Library/Application Support/iPhone Simulator/User/Applications/753D12B3-777C-473B-B098-3E0AF6282545/TestApp.app/TestApp', process 577.
Re-enabling shared library breakpoint 1 
```

**这里也是gdb日志：**

```
t=0.000852 Tepoch=1236463545.631514
<- (gdb) 
-> 135-gdb-version
#  PBXGDB_MIGDBVersionCommand t=4.308986 Tepoch=1236463549.939648
-> 136-gdb-set auto-raise-load-levels 1
#  PBXGDB_MISetAutoRaiseSymbols t=4.309420 Tepoch=1236463549.940082
-> 139-gdb-set env __CF_USER_TEXT_ENCODING 0x0:0:0
#  PBXGDB_MISetEnvCommand t=4.309702 Tepoch=1236463549.940364
-> 140-gdb-set env USERBREAK 1
#  PBXGDB_MISetEnvCommand t=4.309935 Tepoch=1236463549.940598
-> 141-gdb-set env DYLD_FRAMEWORK_PATH /Projects/TestApp/build/Debug-iphonesimulator
#  PBXGDB_MISetEnvCommand t=4.310175 Tepoch=1236463549.940837
-> 142-gdb-set env Apple_PubSub_Socket_Render /tmp/launch-GqkpX5/Render
#  PBXGDB_MISetEnvCommand t=4.310568 Tepoch=1236463549.941231
-> 143-gdb-set env SECURITYSESSIONID 715cd0
#  PBXGDB_MISetEnvCommand t=4.310803 Tepoch=1236463549.941465
-> 144-gdb-set env DYLD_LIBRARY_PATH /Projects/TestApp/build/Debug-iphonesimulator
#  PBXGDB_MISetEnvCommand t=4.311040 Tepoch=1236463549.941702
-> 145-gdb-set env SSH_AUTH_SOCK /tmp/launch-hRgLzb/Listeners
#  PBXGDB_MISetEnvCommand t=4.311299 Tepoch=1236463549.941961
-> 146-gdb-set env HOME /var/root
#  PBXGDB_MISetEnvCommand t=4.311587 Tepoch=1236463549.942250
-> 147-gdb-set env SHELL /bin/sh
#  PBXGDB_MISetEnvCommand t=4.311818 Tepoch=1236463549.942480
-> 148-gdb-set env DYLD_NO_FIX_PREBINDING YES
#  PBXGDB_MISetEnvCommand t=4.312048 Tepoch=1236463549.942710
-> 149-gdb-set env COMMAND_MODE unix2003
#  PBXGDB_MISetEnvCommand t=4.312281 Tepoch=1236463549.942943
-> 150-gdb-set env DYLD_NEW_LOCAL_SHARED_REGIONS YES
#  PBXGDB_MISetEnvCommand t=4.312546 Tepoch=1236463549.943209
-> 151-gdb-set env SSH_ASKPASS /Developer/Library/PrivateFrameworks/DevToolsInterface.framework/Resources/Xcode SSHPassKey
#  PBXGDB_MISetEnvCommand t=4.312780 Tepoch=1236463549.943443
-> 152-gdb-set env PATH /Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin
#  PBXGDB_MISetEnvCommand t=4.313612 Tepoch=1236463549.944275
-> 153-gdb-set env DISPLAY /tmp/launch-yrv3vV/:0
#  PBXGDB_MISetEnvCommand t=4.313849 Tepoch=1236463549.944512
-> 154-gdb-set env USER root
#  PBXGDB_MISetEnvCommand t=4.314141 Tepoch=1236463549.944803
-> 155-gdb-set env NSUnbufferedIO YES
#  PBXGDB_MISetEnvCommand t=4.314377 Tepoch=1236463549.945039
#  Enqueue seq in Command Q: <PBXGDB_SetupSharedLibrarySequence: 0x9049db0> t=4.314625 Tepoch=1236463549.945288
#  Executing Sequence: <PBXGDB_SetupSharedLibrarySequence: 0x9049db0> t=4.314718 Tepoch=1236463549.945380
-> 157-gdb-set inferior-auto-start-cfm off
#  PBXGDB_MISetLoadCFMInfoCommand t=4.314895 Tepoch=1236463549.945557
-> 156-gdb-set sharedLibrary load-rules dyld ".*Foundation.*" all dyld ".*libobjc.*" all dyld ".*libauto.*" all dyld ".*/usr/lib/dyld.*" all dyld ".*CFDataFormatters.*" all dyld ".*PBGDBIntrospectionSupport.*" all dyld ".*AppKit.*" all dyld ".*libSystem.*" all dyld ".*CarbonDataFormatters.*" all dyld ".*CoreFoundation.*" extern dyld "/System/Library/Frameworks\\\\|/System/Library/PrivateFrameworks\\\\|/usr/lib" extern dyld ".*" extern exec ".*" extern 
#  PBXGDB_MISetSharedLibraryLoadSymbolsCommand t=4.315975 Tepoch=1236463549.946637
-> 137-file-exec-and-symbols "/private/var/root/Library/Application Support/iPhone Simulator/User/Applications/09734C45-F595-4CB9-8707-744E92D66245/TestApp.app/TestApp"
#  PBXGDB_MILoadExecutableCommand t=4.320612 Tepoch=1236463549.951275
#  Enqueue seq in Command Q: <PBXGDB_FixAndContinueIsSupportedSequence: 0x9bdc260> t=4.321476 Tepoch=1236463549.952138
#  Enqueue seq in Command Q: <PBXGDB_NewBreakpointSequence: 0xa516f90> t=4.321941 Tepoch=1236463549.952603
#  Enqueue seq in Command Q: <PBXGDB_AttachControlSequence: 0xa4fceb0> t=4.322157 Tepoch=1236463549.952820
<- ~"GNU gdb 6.3.50-20050815 (Apple version gdb-962) (Sat Jul 26 08:14:40 UTC 2008)\n"
<- ~"Copyright 2004 Free Software Foundation, Inc.\n"
<- ~"GDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\n"
<- ~"This GDB was configured as \"i386-apple-darwin\"."
<- 135^done,version="6.3.50-20050815 (Apple version gdb-962)",rc_version="962",target="i386-apple-darwin",build-date="Sat Jul 26 08:14:40 UTC 2008",time={wallclock="0.03311",user="0.00081",system="0.00014",start="1236463549.989179",end="1236463550.022291"}
#  processing result t=4.392345 Tepoch=1236463550.023007
<- (gdb) 
<- 136^done,time={wallclock="0.00005",user="0.00005",system="0.00001",start="1236463550.024272",end="1236463550.024325"}
#  processing result t=4.394163 Tepoch=1236463550.024826
<- (gdb) 
<- 139^done,time={wallclock="0.00007",user="0.00005",system="0.00002",start="1236463550.025511",end="1236463550.025581"}
#  processing result t=4.395347 Tepoch=1236463550.026010
<- (gdb) 
<- 140^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.026564",end="1236463550.026597"}
#  processing result t=4.396328 Tepoch=1236463550.026991
<- (gdb) 
<- 141^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.027857",end="1236463550.027890"}
#  processing result t=4.397653 Tepoch=1236463550.028315
<- (gdb) 
<- 142^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.029080",end="1236463550.029113"}
#  processing result t=4.398865 Tepoch=1236463550.029528
<- (gdb) 
<- 143^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.030126",end="1236463550.030159"}
#  processing result t=4.399923 Tepoch=1236463550.030585
<- (gdb) 
<- 144^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.031449",end="1236463550.031482"}
#  processing result t=4.401855 Tepoch=1236463550.032518
<- (gdb) 
<- 145^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.033257",end="1236463550.033291"}
#  processing result t=4.403022 Tepoch=1236463550.033685
<- (gdb) 
<- 146^done,time={wallclock="0.00006",user="0.00003",system="0.00002",start="1236463550.034226",end="1236463550.034287"}
#  processing result t=4.404018 Tepoch=1236463550.034680
<- (gdb) 
<- 147^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.035215",end="1236463550.035247"}
#  processing result t=4.405007 Tepoch=1236463550.035670
<- (gdb) 
<- 148^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.036306",end="1236463550.036340"}
#  processing result t=4.406068 Tepoch=1236463550.036731
<- (gdb) 
<- 149^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.037344",end="1236463550.037377"}
#  processing result t=4.407107 Tepoch=1236463550.037770
<- (gdb) 
<- 150^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.038448",end="1236463550.038483"}
#  processing result t=4.408214 Tepoch=1236463550.038876
<- (gdb) 
<- 151^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.040541",end="1236463550.040576"}
#  processing result t=4.410438 Tepoch=1236463550.041101
<- (gdb) 
<- 152^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.041901",end="1236463550.041933"}
#  processing result t=4.411665 Tepoch=1236463550.042327
<- (gdb) 
<- 153^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.042984",end="1236463550.043016"}
#  processing result t=4.412784 Tepoch=1236463550.043446
<- (gdb) 
<- 154^done,time={wallclock="0.00003",user="0.00002",system="0.00001",start="1236463550.043956",end="1236463550.043988"}
#  processing result t=4.413717 Tepoch=1236463550.044379
<- (gdb) 
<- 155^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.044974",end="1236463550.045007"}
#  processing result t=4.414737 Tepoch=1236463550.045400
<- (gdb) 
<- 157^done,time={wallclock="0.00003",user="0.00003",system="0.00001",start="1236463550.046108",end="1236463550.046141"}
#  processing result t=4.415931 Tepoch=1236463550.046594
<- (gdb) 
<- 156^done,time={wallclock="0.00005",user="0.00005",system="0.00001",start="1236463550.050271",end="1236463550.050324"}
#  processing result t=4.420235 Tepoch=1236463550.050897
-> 158sharedlibrary apply-load-rules all
#  PBXGDB_MISharedLibraryApplyLoadRulesCommand t=4.420386 Tepoch=1236463550.051049
<- (gdb) 
<- &"warning: Unable to read symbols for \"/System/Library/Frameworks/UIKit.framework/UIKit\" (file not found).\n"
<- &"warning: Unable to read symbols from \"UIKit\" (not yet mapped into memory).\n"
<- &"warning: Unable to read symbols for \"/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics\" (file not found).\n"
<- &"warning: Unable to read symbols from \"CoreGraphics\" (not yet mapped into memory).\n"
<- 137^done,time={wallclock="0.34917",user="0.17115",system="0.11409",start="1236463550.052577",end="1236463550.401747"}
#  processing result t=4.771918 Tepoch=1236463550.402580
<- (gdb) 
<- &"sharedlibrary apply-load-rules all\n"
<- 158^done
#  processing result t=4.820019 Tepoch=1236463550.450681
#  didFinish Sequence: <PBXGDB_SetupSharedLibrarySequence: 0x9049db0> t=4.820135 Tepoch=1236463550.450797
#  Executing Sequence: <PBXGDB_FixAndContinueIsSupportedSequence: 0x9bdc260> t=4.820259 Tepoch=1236463550.450921
-> 159-mi-verify-command file-fix-file-is-grooved
#  PBXGDB_MIVerifyCommandCommand t=4.820398 Tepoch=1236463550.451060
<- (gdb) 
<- 159^done,name="file-fix-file-is-grooved",defined="true",implemented="true",time={wallclock="0.00011",user="0.00007",system="0.00001",start="1236463550.451848",end="1236463550.451955"}
#  processing result t=4.821746 Tepoch=1236463550.452409
-> 160-file-fix-file-is-grooved
#  PBXGDB_MIFixAndContinueSupportedCommand t=4.821894 Tepoch=1236463550.452556
<- (gdb) 
<- 160^done,supported="1",details="Yes grooved!",time={wallclock="0.00006",user="0.00005",system="0.00002",start="1236463550.453356",end="1236463550.453417"}
#  processing result t=4.823203 Tepoch=1236463550.453865
#  didFinish Sequence: <PBXGDB_FixAndContinueIsSupportedSequence: 0x9bdc260> t=4.823344 Tepoch=1236463550.454006
#  Executing Sequence: <PBXGDB_NewBreakpointSequence: 0xa516f90> t=4.823433 Tepoch=1236463550.454095
#  Passed verification of state before break create command t=4.823569 Tepoch=1236463550.454231
-> 161-break-insert -l -1 -f  -s "TestApp" "\"main.m:13\""
#  PBXGDB_MICreateFileBreakpointCommand t=4.823679 Tepoch=1236463550.454342
<- (gdb) 
<- =shlib-state-modified,shlib-info=[num="1",name="TestApp",kind="-",dyld-addr="-",reason="exec",requested-state="Y",state="Y",path="/private/var/root/Library/Application Support/iPhone Simulator/User/Applications/09734C45-F595-4CB9-8707-744E92D66245/TestApp.app/TestApp",description="/private/var/root/Library/Application Support/iPhone Simulator/User/Applications/09734C45-F595-4CB9-8707-744E92D66245/TestApp.app/TestApp",loaded_addr="",slide="0x0",prefix="",dsym-objpath="/Projects/TestApp/build/Debug-iphonesimulator/TestApp.app.dSYM/Contents/Resources/DWARF/TestApp"]
<- 161^done,bkpt={number="1",type="breakpoint",disp="keep",enabled="y",addr="0x000028cf",func="main",file="/Projects/TestApp/main.m",line="13",shlib="/private/var/root/Library/Application Support/iPhone Simulator/User/Applications/09734C45-F595-4CB9-8707-744E92D66245/TestApp.app/TestApp",times="0"},time={wallclock="0.15835",user="0.00321",system="0.00184",start="1236463550.455187",end="1236463550.613542"}
#  processing result t=4.996437 Tepoch=1236463550.627100
#  didFinish Sequence: <PBXGDB_NewBreakpointSequence: 0xa516f90> t=4.996599 Tepoch=1236463550.627262
#  Executing Sequence: <PBXGDB_AttachControlSequence: 0xa4fceb0> t=4.996690 Tepoch=1236463550.627352
-> 162-mi-verify-command target-attach
#  PBXGDB_MIVerifyCommandCommand t=4.996824 Tepoch=1236463550.627486
<- (gdb) 
<- 162^done,name="target-attach",defined="true",implemented="true",time={wallclock="0.00007",user="0.00006",system="0.00001",start="1236463550.627975",end="1236463550.628046"}
#  processing result t=4.998137 Tepoch=1236463550.628799
-> 163-target-attach 288
#  PBXGDB_MIAttachCommand t=4.998293 Tepoch=1236463550.628955
<- (gdb) 
<- ~"Attaching to program: `/private/var/root/Library/Application Support/iPhone Simulator/User/Applications/09734C45-F595-4CB9-8707-744E92D66245/TestApp.app/TestApp', process 288.\n"
<- ~"Re-enabling shared library breakpoint 1\n"
<- =shlibs-updated
<- 163^done,thread-id="1",time={wallclock="0.00362",user="0.00151",system="0.00203",start="1236463550.629436",end="1236463550.633055"}
#  processing result t=5.010455 Tepoch=1236463550.641117
#  Enqueue seq in Command Q: <PBXGDB_ThreadListSequence: 0xa4e0520> t=5.011284 Tepoch=1236463550.641946
-> 164-exec-continue
#  PBXGDB_MIContinueExecutableCommand t=5.011420 Tepoch=1236463550.642082
<- (gdb) 
<- 164^running
#  processing result t=5.070065 Tepoch=1236463550.700727
#  didFinish Sequence: <PBXGDB_AttachControlSequence: 0xa4fceb0> t=5.071843 Tepoch=1236463550.702505
<- (gdb) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-04T07:00:05.330

> 我在任何地方都找不到“GCC 4.0 - 代码生成”选项。在 Target 和 Executable Info 页面中，我看起来既好又低。我看到的唯一选项是选择编译器版本，并选择了 GCC 4.0，但这是一个没有附加选项的单行部分。

如果 Active SDK 与目标的 Base SDK 不同步，这就是 3.1.1 和 3.1.2 中的 Xcode 错误。将 Target 的 Base SDK 设置为 Simulator，确保您的 Active SDK 是 Simulator，然后重试。

如果您真的想回答这个问题，您将不得不发布有关您的项目的更多信息：构建设置的屏幕截图，或来自调试器控制台的文本。

更新：还要注意 Xcode > Preferences > Debugging： [alt text http://idisk.mac.com/cdespinosa/Public/GDB%20Log.png](http://idisk.mac.com/cdespinosa/Public/GDB%20Log.png)

选中该框，在路径字段中输入一个合理的路径，尝试您的调试方案，然后在[http://bugreporter.apple.com](http://bugreporter.apple.com)上提交一个错误并附上日志和您的方案描述，或者询问好人在xcode-users@lists.apple.com。gdb 日志包含有关调试器如何与您的应用程序交互的所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T23:27:39.030

在 Xcode 首选项中进入调试部分并关闭“延迟加载符号”。

几个月前，当我第一次遇到这个问题时，它为我解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-04T19:35:21.537

另一个简单
的建议：断点浅蓝色是深蓝色吗？

Xcode 允许您停用断点，这些断点用浅蓝色箭头指示（就像它已变暗一样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-04T19:54:47.090

*GCC 4.0 - Code Generation*部分仅在您将 Active SDK 设置为*Device - iPhone OS 2.x*时显示。去搞清楚。当 Active SDK 是模拟器时，它们会消失。

您应该将 Active SDK 更改为 Device，更改设置，然后再更改回 Simulator。在设备下进行的设置也应该适用于模拟器。这也适用于例如。为预处理设置 -DDEBUG 标志。

（更新：我只猜对了一半。请参阅 Chris Espinosa 接受的答案：此 SDK 错误。当 Active SDK 设置为“设备”时，并不是 GCC 4.0 部分出现，而是您的 Base SDK 和 Active SDK 必须匹配访问这些设置）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-10T02:59:49.380

这是一种“是否已插入”的答案，但是嘿，有时这就是问题所在：是否启用了断点？有时在调试时，我忘记单击调试工具栏中启用和禁用断点的按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T04:28:28.940

尝试通过点击 Command-Option-Y 来运行项目（这会强制 Xcode 使用调试器启动程序）。

Xcode 菜单栏上的按钮可能会有些误导。如果按钮显示“运行”，则它不会在调试器中运行程序。如果它说“Go”，它会运行程序，但它是最后构建的（即发布或调试）。Command-Option-Y 专门在调试器中启动程序。

此外，请确保您的断点已启用。您可以右键单击它们进行检查。此外，在调试器窗口中，工具栏上应该有一个用于激活或停用断点的选项。确保它们已激活。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T05:42:14.533

在您的构建设置列表中，您没有涵盖最关键的设置：

[替代文字 http://idisk.mac.com/cdespinosa/Public/Generate%20Debug%20Symbols.png](http://idisk.mac.com/cdespinosa/Public/Generate%20Debug%20Symbols.png)

确保为调试配置选中生成调试符号，并确保在构建和调试时调试配置处于活动状态。

另外两件事要尝试：

1）取消选中修复并继续。您详细的 gdb 日志表明它可能已打开。确认时，请确保您查看的是目标设置而不是项目设置。

2）尝试*不要*以root身份运行。目前尚不清楚您为什么需要这样做。以 root 身份运行的 Xcode 可能与模拟器有交互；坦率地说，我们很少使用这种配置，所以我不知道。

日志显示一切运行正常。你有一个正在模拟器中启动的构建二进制文件；它是正确的架构且格式良好；你有调试符号；您有一个断点，并且正在设置断点。我们相信您的话（因为我们没有看到您的源代码），断点实际上位于正在执行的代码行上。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-04T18:47:08.500

这可能是一个非常明显的答案，但它可以工作。您是否尝试过在 main() 以外的代码中添加断点？例如，在 App Delegate 的 applicationDidFinishLaunching 方法中？我知道它应该首先通过 main，但由于 main 中的代码通常不会针对 iPhone 应用程序进行修改，因此它可能有点不稳定。无论如何，值得一试。

此外，要找到 GCC 4.0 - Code Generation 选项，请单击三角形打开 Targets 组，然后单击 Targets 下面的应用程序名称。单击 Xcode 窗口顶部的 Info 按钮，您将获得应用程序的设置。转到构建。确保 Show: 下拉菜单设置为 All Settings。如果您从那里向下滚动，它应该是您可以编辑的列表之一（在版本控制之后和 GCC 4.0 - 语言之前）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-07T20:47:52.087

当程序运行时，您可以在控制台窗口中执行 CTRL-C（当光标在那里时）。如果您*中断*`info br`应该给出*活动*断点列表的程序类型，那么问题是，它们是您设置的吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-07T21:04:14.307

有两个 gdb 配置文件值得一看。

*   /etc/gdb.conf

> 我的有 MD5 (/etc/gdb.conf) = 31b58e1ecf038554faadf777d63e9085

*   ~/.gdbinit

> 我没有，你有吗？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-07T22:19:26.937

您是否已验证您的构建配置正在使用您的开发证书进行代码签名？

如果您使用的是 Ad Hoc 证书，它仍然可以正常构建和运行，但在启动应用程序后不久，Xcode 将与设备分离，因此不会遇到断点。如果在单击 Build & Go 后查看 Xcode 主窗口的左下方，您可以快速判断它是否已分离 - 如果您没有使用实际的开发设备证书，您将看到一条消息：说“从设备接收到无效的十六进制代码”。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-07T22:21:46.853

我看起来你正在运行程序`root`，这似乎不对......

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-07-25T21:57:51.783

> 如果您使用的是 Ad Hoc 证书，它仍然可以正常构建和运行，但在启动应用程序后不久，Xcode 将与设备分离，因此不会遇到断点。

这对我有帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-10-22T18:29:34.877

我不得不问，因为我有同样的问题，这是一个“真正的”mac吗？voodoo hacintosh 内核确实存在这个问题。如果您使用的是 voodoo 内核，请使用 std_dyld=1 启动，一切都会好起来的

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-10-26T10:41:14.457

这确实适用于 voodoo 内核，使用 std_dyld=1 启动会使 Xcode 在断点处停止。惊人的提示，真的。非常感谢你，约翰你的一种救命稻草！我使用 OSX86Tools 自动添加了这个引导标志。马球

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-07-12T16:08:52.077

我只是有同样的问题。我还没有真正的解决方案，但我发现，在我的情况下，它取决于设备。该错误仅发生在我的 iPod Touch 4G 上。当我切换到我的 iPhone 3G 时，一切正常，断点再次起作用。

我不知道这是否与问题有关，但可能是由于安装了 iOS 5 beta 2 导致 iPod4 出现问题。通常当我遇到 iOS 5 中的错误时，只需重新启动设备即可。但是...重新启动 iPod4 对我没有帮助...

# 解决方案：

这个问题困扰了我几个星期，但我终于找到了适合我的情况的解决方案：

1.  确保您 Mac 上的 SDK 与您设备上的 iOS 版本相同（或更新）。
2.  在通过 USB 连接并且 Xcode 正在运行时重新启动设备。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2011-10-18T16:53:25.010

我在这个线程中尝试了几乎所有东西并重新启动设备解决了我的问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-10-17T04:49:41.333

我有类似的情况..经过6个小时的调试和项目文件比较，它终于奏效了。情况是我有一个 2 年前的项目，最初是在 Xcode 3.1 天制作的。我试图在带有断点的 Xcode 4.5.1 中运行它，但它从来没有工作过。

这是我所做的修复它..

1）在项目>构建设置..搜索调试。2) 仅构建活动架构 > 将调试更改为是 3) 生成调试符号 > 是 4) 预处理器宏 > 调试 = 1

现在运行良好。

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2010-09-23T09:01:47.500

Apple 应该真正改善整体 Xcode 体验。我理解它是免费的（嘿，你得到你所支付的），但是，其中的错误几乎是对开发人员的侮辱。

# c++ - visual c++：#include 来自同一解决方案中其他项目的文件

> ID：601268
> 
> 赞同：118
> 
> 时间：2009-03-02T04:24:31.600
> 
> 标签：c++, visual-studio, projects-and-solutions

我正在使用 Visual C++ 开发游戏。我在单独的项目中有一些组件，并设置了项目依赖项。如何#include 来自不同项目的头文件？我不知道如何在另一个项目中使用一个项目中的类。

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2009-03-02T04:36:51.697

## 编译器设置

在要#include 来自*另一个*项目的头文件的项目中，您需要将头文件的路径添加到项目配置中的**Additional Include Directories**部分。

要访问项目配置：

1.  右键单击项目，然后选择属性。
2.  选择配置属性->C/C++->常规。
3.  在 Additional Include Directories 下设置路径。

## 如何包含

要**包含头文件**，只需在代码中编写以下内容：

```
#include "filename.h" 
```

请注意，您不需要在此处指定路径，因为您已经在 Additional Include Directories 中包含了该目录，因此 Visual Studio 将知道在哪里查找它。

如果您不想在项目设置中添加每个头文件位置，则可以只包含一个目录，然后 #include 相对于该点：

```
// In project settings
Additional Include Directories    ..\..\libroot

// In code
#include "lib1/lib1.h"    // path is relative to libroot
#include "lib2/lib2.h"    // path is relative to libroot 
```

## 链接器设置

如果使用静态库（即 .lib 文件），您还需要将库添加到链接器输入，以便在链接时可以链接符号（否则您将获得未解析的符号）：

1.  右键单击项目，然后选择属性。
2.  选择配置属性->链接器->输入
3.  在 Additional Dependencies 下输入库。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-07-18T01:02:14.160

由于两个项目都在同一个解决方案下，因此包含文件和链接器有一种更简单的方法，如[https://docs.microsoft.com/en-us/cpp/build/adding-references-in-visual-cpp-中所述项目？view=vs-2019](https://docs.microsoft.com/en-us/cpp/build/adding-references-in-visual-cpp-projects?view=vs-2019)：

1.  包含可以写在相对路径（例如`#include "../libProject/libHeader.h"`）中。
2.  对于链接器，右键单击“References”，单击“Add Reference”，然后选择其他项目。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-04-22T17:39:39.270

扩展@Benav 的答案，我首选的方法是：

1.  将解决方案目录添加到包含路径：
    *   在解决方案资源管理器中右键单击您的项目
    *   选择属性
    *   从下拉列表中选择所有配置和所有平台
    *   选择 C/C++ > 常规
    *   添加`$(SolutionDir)`到附加包含目录
2.  添加对您要使用的每个项目的引用：
    *   在解决方案资源管理器中右键单击项目的引用
    *   选择添加参考...
    *   选择您要参考的项目

现在您可以像这样包含引用项目中的标头：

```
#include "OtherProject/Header.h" 
```

笔记：

*   这假定您的解决方案文件存储在每个项目的上一个文件夹中，这是使用 Visual Studio 创建项目时的默认组织。
*   您现在可以包含相对于解决方案文件夹的路径中的*任何*文件，这可能是不可取的，但为了方法的简单性，我可以接受。
*   第 2 步对于 s 不是必需`#include`的，但它设置了您可能想要的正确构建依赖项。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-02T04:36:52.163

`#include`与项目无关——它只是告诉预处理器“把头文件的内容放在这里”。如果你给它一个指向正确位置的路径（可以是一个相对路径，比如../your_file.h），它将被正确包含。

但是，您必须了解库（静态/动态库）才能使此类项目正确链接 - 但这是另一个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T04:33:26.167

您需要在项目属性中设置头文件的路径，以便编译器在尝试查找头文件时查看那里。我不记得确切的位置，但是查看项目属性，您应该会看到它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-02T04:49:32.133

尽量避免 #include 指令中的完整路径引用，无论它们是绝对的还是相对的。相反，在您的项目设置中添加其他项目的包含文件夹的位置。必要时仅使用路径引用中的子文件夹。这样，无需更新代码就可以更轻松地移动内容。

# java - 如何在 java 中正确加载 BufferedImage？

> ID：601274
> 
> 赞同：41
> 
> 时间：2009-03-02T04:29:34.240
> 
> 标签：java, image, loading, bufferedimage

好的，所以我一直在尝试使用以下代码加载 BufferedImage：

```
URL url = this.getClass().getResource("test.png");
BufferedImage img = (BufferedImage) Toolkit.getDefaultToolkit().getImage(url); 
```

但是，当我运行它时，这会给我一个类型转换错误，那么我该如何正确加载 BufferedImage？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2009-03-02T04:35:08.220

改用[`ImageIO.read()`](http://java.sun.com/javase/6/docs/api/javax/imageio/ImageIO.html#read(java.net.URL))：

```
BufferedImage img = ImageIO.read(url); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-02T04:41:08.040

```
BufferedImage img = null;
try {
    img = ImageIO.read(new File("D:\\work\\files\\logo.jpg"));
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# macos - 在 Mac OS 10.4 中查找 USB 驱动器路径

> ID：601293
> 
> 赞同：8
> 
> 时间：2009-03-02T04:41:48.937
> 
> 标签：macos, usb-drive, system-profiler

Mac OS 10.5 中的`system_profiler`命令显示关联 USB 驱动器的已安装卷路径。但是，在 10.4 中，它们没有显示出来。关于如何在 10.4 中获取 USB 驱动器的安装位置的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-03T20:25:56.133

磁盘工具可以显示：

```
diskutil list # to get the device/sector numbers
diskutil info /dev/diskXsY 
```

这些最终可能会安装在 /Volumes/ 中。

# java - Android主屏幕快捷方式权限错误

> ID：601294
> 
> 赞同：10
> 
> 时间：2009-03-02T04:43:02.057
> 
> 标签：java, android, shortcut, permissions, homescreen

在我的程序中，它在屏幕上添加了一个快捷方式。我在屏幕上的图标很好，但是当我点击它时，我得到：

```
03-01 20:00:29.410: ERROR/AndroidRuntime(796): java.lang.SecurityException: Permission Denial: starting Intent { data=http://www.example.com/ flags=0x14000000 comp={com.isaacwaller.example/com.isaacwaller.example.ExampleCut} } from ProcessRecord{435c7398 796:android.process.acore/10005} (pid=796, uid=10005) requires null 
```

你知道问题吗？谢谢，
艾萨克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2010-07-21T03:25:58.517

当我不小心在清单中复制了我的一项活动的活动标签时，我遇到了类似的情况。我的应用程序部分有类似的东西。

```
<activity android:name=".ConventionHome" android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<activity android:name="ConventionHome"></activity> 
```

当我删除第二个活动标签时，事情开始正常工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-19T04:30:19.097

想通了，在`<activity>`活动标签下添加了这个：

```
<intent-filter>
<action android:name="android.intent.action.MAIN"></action>
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-10T00:46:23.113

像这样的东西应该工作：

```
<intent-filter>
    <action android:name="com.example.Project.Action"/>
    <category android:name="android.intent.category.DEFAULT"/>
</intent-filter> 
```

在清单中的 Activity 声明中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-01-27T16:00:50.113

我也遇到了这个问题，原来是因为 Activity 没有暴露给其他进程。我必须将 android:exported="true" 属性添加到清单中的活动标记中。

有关更多信息，请参阅[http://developer.android.com/guide/topics/manifest/activity-element.html#exported](http://developer.android.com/guide/topics/manifest/activity-element.html#exported)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T05:10:55.747

我个人没有遇到过这个问题，但我确实做了一些研究并发现了以下内容。

显然，无论尝试调用您的应用程序，还是您的应用程序调用创建意图并启动某个意图的活动，UID 都不相同。

在ActivityManagerServer.java里面有下面的判断。

```
int checkComponentPermission(String permission, int pid, int uid, int reqUid)
// If the target requires a specific UID, always fail for others.
   if (reqUid >= 0 && uid != reqUid) {
       return PackageManager.PERMISSION_DENIED;
   } 
```

我将对此进行一些测试，看看我是否可以在测试应用程序中重现它并提供任何额外的反馈。

确保您仅尝试通过任何意图调用公开暴露的活动。

# sql - 什么是 SQL 注入？

> ID：601300
> 
> 赞同：102
> 
> 时间：2009-03-02T04:50:50.070
> 
> 标签：sql, sql-injection, security

有人可以解释 SQL 注入吗？它是如何导致漏洞的？SQL 的注入点到底在哪里？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2009-03-02T07:31:08.453

**有人可以解释 SQL 注入吗？**

当您将一些内容插入到 SQL 查询字符串中时，就会发生 SQL 注入，结果会以您不希望的方式修改查询的语法。

它不一定是恶意的，它可能是一个意外。但是意外的 SQL 注入更可能导致错误而不是漏洞。

有害内容不一定来自用户，它可以是您的应用程序从任何来源获取的内容，甚至可以在代码中自行生成。

**它是如何导致漏洞的？**

它可能导致漏洞，因为攻击者可以将值发送到他们知道将被插入 SQL 字符串的应用程序。通过非常聪明，他们可以操纵查询结果、读取数据甚至更改他们不应该做的数据。

PHP 中的示例：

```
$password = $_POST['password'];
$id = $_POST['id'];
$sql = "UPDATE Accounts SET PASSWORD = '$password' WHERE account_id = $id"; 
```

现在假设攻击者将 POST 请求参数设置为 " `password=xyzzy`" 和 " `id=account_id`" 导致以下 SQL：

```
UPDATE Accounts SET PASSWORD = 'xyzzy' WHERE account_id = account_id 
```

虽然我希望`$id`是一个整数，但攻击者选择了一个字符串作为列的名称。当然，现在*每一*行的条件都为真，所以攻击者刚刚为*每个*帐户设置了密码。现在攻击者可以登录到任何人的账户——包括特权用户。

**SQL 的注入点到底在哪里？**

注入的不是 SQL，而是插入（“注入”）到 SQL 字符串中的内容，导致查询类型与我的预期不同。我信任动态内容而不对其进行验证，并盲目地执行生成的 SQL 查询。这就是麻烦开始的地方。

SQL 注入是应用程序代码中的错误，通常不在数据库或数据库访问库或框架中。

使用查询参数可以避免大多数 SQL 注入情况。请参阅[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php)举些例子。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-03-02T06:43:35.230

当应用程序的用户能够影响数据库查询的含义时，就会发生 SQL 注入。当连接来自用户输入的任意字符串以创建馈送到数据库的 SQL 时，通常会发生这种情况。例如，假设我们有以下代码（在 PHP 中，但对于任何语言都适用），它可能用于处理用户登录。

```
$sql = "SELECT  FROM users WHERE username='".$_GET['username']."' AND password='".$_GET['password']."'"; 
```

当用户输入类似的内容时，就会造成伤害

```
administrator'; -- 
```

...对于用户名。如果没有适当的编码，查询将变为：

```
SELECT * FROM users WHERE username='administrator'; -- AND password='' 
```

这里的问题是用户名中的 ' 关闭了用户名字段，然后 -- 启动 SQL 注释，导致数据库服务器忽略字符串的其余部分。最终结果是用户现在无需知道密码即可以管理员身份登录。SQL Inection 也可用于执行 UPDATE、DELETE 或 DROP 查询并真正损坏数据库。

可以通过使用参数化查询或应用您的语言/工具包的转义函数（例如 PHP 中的 mysql_real_escape_string()）来防止 SQL 注入。

一旦你了解了 SQL 注入，你就会明白[这幅漫画](http://xkcd.com/327/)背后的笑话。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2010-05-01T00:16:40.527

SQL 注入是指本应是数据的事物被不情愿地视为 SQL 代码。

例如，如果你要做

```
mysql_query("SELECT * FROM posts WHERE postid=$postid"); 
```

通常它会给你一个给定 id 的帖子，但假设它`$postid`被设置为 string `10; DROP TABLE posts --`；突然之间，您发送的实际查询是

```
mysql_query("SELECT * FROM posts WHERE postid=10; DROP TABLE posts --"); 
```

这是一个相当大的问题，因为您会因为恶意用户而丢失整个帖子表 - 天哪。

防止这种情况的最简单方法是使用准备好的语句，例如通过[PDO](http://dk2.php.net/manual/en/pdo.prepare.php)或[MySQLi](http://dk2.php.net/manual/en/mysqli.prepare.php)。

PDO 中的等效示例将是

```
$statement = $db->prepare('SELECT * FROM posts WHERE postid = :postid');
$statement->bindValue(':postid', $postid);
$statement->execute(); 
```

这样做可以确保数据库系统知道 $postid 将被视为数据而不是代码，因此将得到适当的处理。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2010-05-01T00:13:26.300

这个问题在 StackOverflow 上已经回答过很多次了，但它是每个人都知道的重要话题，所以我不会投票结束这个问题。

以下是我过去关于该主题的一些答案的链接：

*   [什么是 SQL 注入？](https://stackoverflow.com/questions/601300/what-is-sql-injection/601524#601524)
*   [如何保护此函数免受 SQL 注入？](https://stackoverflow.com/questions/1862036/how-do-i-protect-this-function-from-sql-injection/1862178#1862178)
*   [参数真的足以防止 Sql 注入吗？](https://stackoverflow.com/questions/306668/are-parameters-really-enough-to-prevent-sql-injections/306818#306818)
*   [SQL 注入今天有风险吗？](https://stackoverflow.com/questions/1683843/is-sql-injection-a-risk-today/1684292#1684292)

我也在这个月的 MySQL Conference 上做了一个演讲，我的幻灯片在网上：

*   [SQL 注入神话和谬误](http://www.slideshare.net/billkarwin/sql-injection-myths-and-fallacies)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-04-30T23:58:57.090

SQL 注入是恶意用户将 SQL 放入输入字段以尝试在您的服务器上运行 SQL 的地方。

我坚持的 #1 建议是使用参数化存储过程，而不是在代码中构建原始 SQL。

存储过程参数不会被执行，因此在大多数情况下它们是安全的。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-03-02T04:57:20.977

我发现这篇论文是一本关于 SQL 注入技术的非常好的读物（链接是 PDF）：[SQL Server 应用程序中的高级 SQL 注入](http://www.cgisecurity.com/lib/advanced_sql_injection.pdf)。

尽管标题写着“高级”，但即使您对 SQL 注入了解不多，它也很容易阅读。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-02T04:58:55.513

要获得一些一般背景信息，请查看[关于 SQL 注入的 Wikipedia 文章](http://en.wikipedia.org/wiki/SQL_Injection)。

简而言之，SQL 注入攻击会使您容易受到所有数据库数据盗窃和破坏的威胁。可以对系统执行的操作的确切细节取决于系统本身的细节。

每当您将用户的输入传递到数据库时，您就有一个潜在的注入点。Web 应用程序在这方面经常缺乏，因为新程序员通常不了解处理用户输入的风险，并且 Web 应用程序会受到非常聪明的人的攻击，你从未想过会找到你的程序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-05-01T00:02:45.890

您会喜欢代码项目中的[这篇](http://www.codeproject.com/KB/database/SqlInjectionAttacks.aspx)文章；)

> **概括**
> 
> *   加密敏感数据。
> *   使用具有最低必要权限的帐户访问数据库。
> *   使用具有最低必要权限的帐户安装数据库。
> *   确保数据有效。
> *   进行代码审查以检查二阶攻击的可能性。
> *   **使用参数化查询。**
> *   **使用存储过程。**
> *   重新验证存储过程中的数据。
> *   **确保错误消息不会泄露应用程序或数据库的内部架构。**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-02T05:49:35.280

注入 SQL 的点是您的应用程序接受用户输入的任何点。

这是否会成为您的 Web 应用程序的危险漏洞取决于此输入是否稍后用作 SQL 查询的一部分，而没有正确检查其类型并在必要时对其进行转义。

如果没有适当的转义，用户“注入”的某些 SQL 代码可能会被 SQL 引擎作为 SQL 代码执行，而不是简单的字符串或值。

# php - 跨多个 .php 页面的 PHP 静态变量

> ID：601307
> 
> 赞同：1
> 
> 时间：2009-03-02T04:57:37.077
> 
> 标签：php, static-variables

我正在用 PHP 构建一个 POP3 邮箱。我有以下**文件**：

*   server_access.php（从 POP3 服务器获取邮件）
*   data_access.php（获取/写入邮件到本地数据库）
*   mime_parser.php（解析 MIME 内容）
*   core.php（使用上述文件并将解析的邮件存储为名为 $inbox 的 assoc 数组）

现在，我有**页面**mailbox.php 来显示收件箱和showmail.php 来显示每封邮件。用户的凭据存储在 .ini 文件中并在必要时使用。问题是，我在mailbox.php 和showmail.php 中都做了一个require_once('core.php')

我能够显示收件箱（即 $inbox 有值），但是，如果我选择阅读邮件（showmail.php 的弹出窗口），$inbox 是一个空数组。

$inbox 在 core.php 中被定义为一个静态数组

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-02T05:01:43.743

静态数据仅在类的上下文中是静态的，这意味着类中的静态数据成员由该类的所有实例共享。

您似乎在谈论的是跨多个 HTTP 请求持续存在的数据。静态数据不会为您做到这一点。这就是 $_SESSION 数据的用途。

换句话说：一旦脚本完成了当前请求的服务，它就会完全死掉。所有数据已被完全清理。新的请求重新开始。

会话数据一直存在，直到 PHP 决定清理它或您手动销毁它。通常，使用会话数据所需要做的所有事情都放在脚本中：

**脚本 1：mailbox.php**

```
session_start();
$_SESSION['mailbox'] = array( /* messages */ ); 
```

**脚本 2：showmail.php**

```
session_start();
$mailbox = $_SESSION['mailbox']; 
```

需要注意的一点：如果您的脚本长时间运行，请尝试尽快放入 session_commit()，因为会话访问会在 PHP 中阻塞，这意味着如果另一个脚本尝试为同一用户执行 session_start()，它将一直阻塞到第一个脚本完成执行或释放会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T07:21:41.083

php Sessions 需要一个地方来存储请求之间的会话数据。在您的情况下，它是您主目录中的 temp\php\session\ 文件夹。创建该文件夹或更改 php.ini 中的 session.save_path 以指向有效目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T05:05:01.207

如果您的`core`文件为mailbox.php 提供了正确的数据，但没有向showmail.php 提供正确的数据，则它与您在showmail.php 中正在（或未）执行的操作有关。

# java - 使用java运行后退出批处理文件

> ID：601315
> 
> 赞同：2
> 
> 时间：2009-03-02T05:01:54.117
> 
> 标签：java, batch-file, cmd

我知道如何使用 java 代码启动批处理文件。当我运行批处理文件时，命令提示符被打开。要关闭命令提示符，我使用的是 taskill /im cmd.exe。但问题是用于启动 jboss 的命令提示符也关闭了。我想用特定的进程 ID 杀死 cmd。我如何获取特定 cmd promt 的进程 ID 并使用 java 杀死它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T05:08:17.017

运行批处理文件`cmd.exe /c job.bat`。`/c`交换机执行命令，然后终止命令解释器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T05:08:38.343

你不能添加`exit`到你的批处理文件以退出它自己的命令提示符。仅关闭一个命令提示符，Uisng taskill 似乎有点过头了，你不觉得吗？

PS：我从来没有在命令提示符下处理过批处理文件，所以我假设它接受相同的命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-02-16T09:55:12.090

这是有效的解决方案：要在执行批处理（.bat）文件中的命令后关闭命令窗口，您需要在批处理文件的新行中添加“exit”（不带引号）。如果您想延迟执行，这是可行的方法：

```
public class TestSleep 
{
    public static void main ( String [ ] args ) 
    {
         System.out.println("Do this stuff");
         try 
         { 
            Thread.currentThread().sleep(3000); 
         }
         catch ( Exception e ) { }
         System.out.println("Now do everything after this");
     } 
} 
```

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T06:55:24.373

如果使用 Runtime.exec() 启动批处理文件，它会返回一个 Process 对象。调用 destroy() 方法将终止该进程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-02T20:01:57.357

Although this seems to be an old question and probably resolved.. I struggled with the same thing for a long time.. Finally this works

```
String command = "cmd.exe /c build.bat";
Runtime rt = Runtime().getRuntime();
Process pr = rt.exec(command); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-28T08:38:47.907

我也有同样的问题。我第一次用作

```
Runtime.getRuntime().exec("cmd.exe start /c test.bat"); 
```

然后我尝试如下。它工作正常。

```
Runtime.getRuntime().exec("cmd.exe /c start test.bat"); 
```

尝试这个。

# c# - WinForms 数据绑定 - 绑定到列表中的对象

> ID：601320
> 
> 赞同：7
> 
> 时间：2009-03-02T05:05:31.347
> 
> 标签：c#, .net, winforms, data-binding

我需要一些有关 WinForms 数据绑定的帮助/指导，我似乎无法让 Google 帮助我解决这个问题。

这是我的场景。考虑以下类似于我需要的类：

```
public class Car
{
    public string Name { get; set; }
    public List<Tire> Tires { get; set; }
}

public class Tire
{
    public double Pressure { get; set; }
} 
```

我的实例将是 Car 类的一个对象，其中包含一个带有四个轮胎对象的 List。请注意，我将始终在此处的列表中拥有已知数量的对象。

现在我想将它数据绑定到一个包含五个文本框的表单。一个带有汽车名称的文本框和一个带有每个轮胎压力的文本框。

关于如何使这项工作的任何想法？VS 中的设计器似乎不允许我通过分配给轮胎 [0].Pressure 之类的列表索引来设置它。

我目前的解决方案是绑定到一个“BindableCar”，就像：

```
public class BindableCar
{
    private Car _car;

    public BindableCar(Car car)
    {
        _car = car;
    }

    public string Name
    {
        get { return _car.Name; }
        set { _car.Name = value; }
    }

    public double Tire1Pressure
    {
        get { return _car.Tires[0].Pressure; }
        set { _car.Tires[0].Pressure = value; }
    }

    public double Tire2Pressure
    {
        get { return _car.Tires[1].Pressure; }
        set { _car.Tires[1].Pressure = value; }
    }

    public double Tire3Pressure
    {
        get { return _car.Tires[2].Pressure; }
        set { _car.Tires[2].Pressure = value; }
    }

    public double Tire4Pressure
    {
        get { return _car.Tires[3].Pressure; }
        set { _car.Tires[3].Pressure = value; }
    }
} 
```

但是当我的列表包含 20 个而不是 4 个对象时，这变得非常难看，并且对于每个对象，我想绑定 6 个属性。这就是一个巨大的“BindableObject”！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-02T07:20:04.767

您应该注意，您可以将控件绑定到实现接口的*任何*对象类型`IList`，`ICollection`或`IEnumerable`从实现这些接口的类继承。泛型集合也有资格进行这种绑定。

这些在内部转换为`IBindingList`实例。

查看以下链接以获取更多信息：

1.  [Windowsforms 数据绑定](https://web.archive.org/web/20090224013732/http://support.microsoft.com/kb/313482)的路线图 - 非常全面地了解实现和可能性，并提供到其他知识库文章的各种链接。
2.  [Winforms Object binding](https://web.archive.org/web/20090323180255/http://www.15seconds.com/issue/040614.htm) - Rockford Lhotka 关于该主题的文章。提供一种面向 Windows 窗体设计器的实现数据绑定的方式。
3.  [Databinding with Windows forms 2.0](http://www.informit.com/store/product.aspx?isbn=032126892X) - Brian Noyes 的这本书探讨了复杂和简单场景中数据绑定的各个方面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-02T05:26:46.630

虽然 WinForms 设计器可能不允许您这样做，但您是否尝试过在代码中设置绑定？我想将文本框绑定到 someCar.Tires[1].Pressure 没有问题。

# java - 有没有可以监控网站状态的免费java开源应用程序？

> ID：601328
> 
> 赞同：3
> 
> 时间：2009-03-02T05:10:16.797
> 
> 标签：java

有人知道吗？我需要发送一个 http 请求并确保我得到的 http 响应不是 http 500

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T05:41:51.773

我相信[Hyperic HQ](http://sourceforge.net/projects/hyperic-hq/)符合您的所有标准。它是开源的，我相信它至少部分是用 Java 编写的，它旨在进行各种服务器监控。

它不仅应该能够处理您请求的监视类型，而且还应该能够处理其他必要的监视，例如内存、CPU 使用率和服务器上的磁盘空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T05:32:40.500

您可以使用[httpunit](http://httpunit.sourceforge.net/) - 以网络为中心的单元测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T06:43:06.433

[http单元](http://httpunit.sourceforge.net/)

> 用 Java 编写的 HttpUnit 模拟浏览器行为的相关部分，包括表单提交、JavaScript、基本 http 身份验证、cookie 和自动页面重定向，并允许 Java 测试代码检查返回的页面作为文本、XML DOM 或表单容器、表格和链接。当与 JUnit 之类的框架结合使用时，编写能够快速验证网站功能的测试是相当容易的。

或[html 单元](http://htmlunit.sourceforge.net/)

> HtmlUnit 是“Java 程序的无 GUI 浏览器”。它对 HTML 文档进行建模并提供一个 API，允许您调用页面、填写表单、单击链接等……就像您在“普通”浏览器中所做的一样。
> 
> 它具有相当好的 JavaScript 支持（不断改进），甚至能够使用非常复杂的 AJAX 库，根据您要使用的配置模拟 Firefox 或 Internet Explorer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-08T16:52:53.637

如果您想自己执行此操作，可以选择[Apache HttpClient](http://hc.apache.org/httpclient-3.x/)：

```
GetMethod get = new GetMethod("http://www.stackoverflow.com");
try
{
    int resultCode = client.executeMethod(get);
    if (resultCode == 500)
    {
        //do something meaningful here

    } // if
} // try
catch (Exception e)
{
    e.printStackTrace();
}
finally
{
    get.releaseConnection();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-08T17:28:49.337

当你找到它时，你可以使用它：

```
import java.net.HttpURLConnection;
import java.net.URL;
import java.io.IOException;

public class SimplisticMonitor { 

    public static void main( String [] args ) throws IOException { 

        HttpURLConnection c = ( HttpURLConnection ) 
                      new URL( "http://stackoverflow.com" ).openConnection();

        System.out.println( c.getResponseCode() );
    }
} 
```

# php - 我错过了面向对象编程的要点吗？

> ID：601329
> 
> 赞同：3
> 
> 时间：2009-03-02T05:10:28.340
> 
> 标签：php, oop

最近，我开始尝试学习面向对象编程。自我开始以来已经大约 3 个月了，但我想我可能*错过了重点*，因为我似乎更喜欢静态方法（这对我来说似乎“更容易”）。

例子

这是我的代码中典型的数据库查询的样子。

```
$bindings = array(':name'=>$articleName);

Db::query('SELECT id, name, title, image, content FROM ' . CONFIG_MYSQL_TABLE_PREFIX . 'articles WHERE name = :name LIMIT 1', $bindings); 
```

这是我调整/裁剪/缓存图像的方式

```
$image = Img::thumbnail($imagePath, 200);

$imgHtml = '<img alt="' . $this->getTitle() . '" src="' . '' . $image['src'] . '" width="' . $image['width'] . '" height="' . $image['height'] . '" />'; 
```

这两种静态方法都使用单例模式。第一个创建一个 PDO 对象，第二个创建一个我在 Google 代码上找到的 ImageResize 类。

如果我真的想称之为面向对象编程，这些应该是 2 个对象吗？IE

```
$db = new Db();

$image = new Image($src, $width, $height); 
```

每次我使用它们？我读过单例也是一个坏主意，除非它们被用于记录到文件。但是对于在需要时打开一个数据库连接并仅在使用并完成后关闭一个数据库连接来说，单例不是很好吗？

我的问题是，我是否仍然停留在程序性思维模式中，如果是这样，我正在做的事情是否被认为是不好的做法？如何让自己沉浸在正确的 OO 思维模式中？

## 更新

感谢您的回答。我确实发现我正在做的原始方法*更容易*，因为我必须输入更少的代码并让静态方法担心很少的实现事情。

我将研究另一种语言以深入了解 OO，但哪种语言本身就是另一个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-02T05:26:00.377

好吧，恕我直言 PHP 是一个不好的例子，因为[PHP 不是面向对象的](http://michaelkimsal.com/blog/php-is-not-object-oriented/)。是的，它有对象。是的，它们支持继承和所有这些 OO 原则。它支持对象。有区别。

我这样说是因为 PHP 默认情况下不存在于请求之间的状态中。每个单独的 HTTP 请求都会从头开始完全重新创建一个 PHP 环境（这相当便宜），这意味着请求之间没有静态数据。您可能会说“会话数据呢？” （并且可能附加一个“a ha！”），但这也不是 PHP 意义上的持久数据。它（通常）存储在文件系统中，并由客户端发送的 cookie 键入。

为什么我要提到这两件事？

因为“全局”范围不像 C、Java、C++ 或这些其他语言中的全局范围，因为它们倾向于在请求之间持续存在。PHP 更像是 90 年代的 CGI 编程模型（这并非巧合，因为它起源于那里）。

因此，您的对象并不是真正的全局对象：它们对服务于当前请求的代码的所有部分都是可见的。

对我来说，这远没有那么糟糕。事实上，我经常觉得它是可以接受的。有时这是必要的（例如，如果您想将信息发送回调用者或​​将状态传递给回调而不进行 eval()/create_function() hack，则在 preg_replace_callback 的回调中）。

PHP 不是*面向*对象的一点是因为即使在 PHP 5 中，OO 特性仍然有些“附加”，这意味着您可以很高兴地编写代码并在 PHP 中很好地编写代码，而无需使用它们。这与 Java 不同，您必须创建一个类，即使您所做的只是在其中编写一堆静态方法。

因此，如果您想学习 OO，老实说，我不会在 PHP 中学习。PHP 对很多事情都有好处，但它被设计为具有 HTTP 请求生命周期（是的，我知道你可以从命令行运行它，但这不是绝大多数用户所做的），并且它非常擅长它的设计工作.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-02T05:16:05.407

掌握面向对象编程的最佳方法是考虑对象相互传递消息，而不是对象调用函数。当我学习 Smalltalk 时，我有这个“尤里卡”的时刻。

有些原则适用于 OOP，例如“告诉不问”原则等。使用您最喜欢的搜索引擎来寻找这些原则。

在我看来，大量的静态方法是陷入程序思维方式的标志。确定在某些情况下它们确实有意义，但是如果您的代码具有比实例方法更多的静态方法，我会说您没有以 OO 方式做事。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-02T05:20:07.927

您可能会发现在支持 OOP 作为主要范例的语言中更容易更牢固地掌握这些想法……并不是说您不能在 php 或 perl 或其他任何东西中做到这一点，这并不容易，因为几乎没有护栏和鼓励

除了语言之外，您现在正在做的事情也可能并不真正需要 OOP；如果是这样，别担心，在其他事情上玩 OOP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T06:11:18.317

OO 帮助的是在命令式环境中管理状态。

以你给出的两个例子为例，首先是 Db::query，我猜这背后是一些数据库连接，它是一个静态方法，这意味着你正在开发的软件中的任何地方都是：

*   竞争锁
*   存在多线程问题
*   为每个事务重新连接到数据库

然后您可能要考虑 - 如果我想连接到两个不同的数据库怎么办？

通过将 Db 作为对象，您可以更好地控制系统的演变方式。

与缩略图生成类似，如果您希望系统通过对象处理缩略图等来缓存缩略图等，它可以让您更好地控制它们的生命周期以及它们的共享方式。

通过使用这样的对象，您可以分离软件的关注点，并最终得到可以在不同上下文中重复使用的部分。

与任何事情一样，实际上只有你工作的环境决定了这种事情的价值，因为你是 OO 新手当经验告诉您在您的环境中遵循这些原则几乎没有用时，那么可能停止遵循它们，只是当您的环境发生变化时要小心。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T06:14:24.207

我很难想象比 PHP 中的关系数据库更糟糕的学习 OO 的方法。其他一些人提到了 PHP 的问题。我将向您指出我们受人尊敬的创始人的一篇文章，讨论为什么对象和关系不混合：

[对象关系映射是计算机科学的越南](http://www.codinghorror.com/blog/archives/000621.html)

您最好尝试在 Python 中进行 GUI 编程之类的东西。我推荐 Python，因为它对 OO 有很好的支持，但不强制要求，所以你不太可能看到在不合适的情况下使用 OO。我推荐 GUI 编程，因为没有 OO 技术几乎不可能进行 GUI 编程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T05:24:51.613

我不会为了使用它而使用 OO。如果我必须编写一个小程序，我更喜欢程序化方法。在较小的事情上使用 OO 只会使问题复杂化，或者即使不是这样，它也不会算作比程序方法有优势。

但是，如果我们正在研究一个涉及许多实体的更大问题，那么肯定会制作一个好的类图和设计来实现和使用 OO 的真正力量。必要时使用 OO；只是不要为了它而将OO应用于较小的问题。

# php - 让 PHP 在没有大量变量的情况下获得可用的日子

> ID：601332
> 
> 赞同：2
> 
> 时间：2009-03-02T05:13:17.770
> 
> 标签：php, html, arrays

这是我的情况：我正在建立一个小型网站，在其中注册时，您可以选择哪些日子可以做某事。

周一上午 周一下午 周二上午 周二下午 等等...

一直到周日下午。

我正在用 PHP 对这个课程进行表单检查，我需要声明 14 个变量并检查每个变量以确定是否单击了复选框。

现在我想知道，没有更简单的方法吗？现在，这些是复选框，不像在上传文件时只需将 [] 添加到 HTML 中的名称属性中，它们就会作为数组上传。

但这会很方便。有人知道我怎么能得到这样的东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-02T05:17:30.053

实际上，您可以只添加`[]`到名称的末尾，只需确保您以不同的方式设置它们的所有值。

```
<input type="checkbox" name="available[]" value="Mon AM" />
<input type="checkbox" name="available[]" value="Mon PM" /> 
```

然后在表单处理代码中循环遍历`$_POST['available']`数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T05:30:44.640

基于 Chad 的回答，以下是您将用于遍历变量的代码：

```
foreach($_POST['available'] as $a)
{
    //Do stuff with $a
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T05:52:33.947

如果您担心安全性或性能，您应该这样做，也许您也应该这样做。

```
If (count($_POST['available']) > 14) {

    softErrorToClient('The data you entered could not be analysed. Please try again.');
    // log this error... someone's being naughty

} 
```

# c++ - 在 Windows 中更改提升线程优先级

> ID：601337
> 
> 赞同：24
> 
> 时间：2009-03-02T05:17:29.210
> 
> 标签：c++, windows, multithreading, winapi, boost

我试图在 boost 中更改线程优先级，但我没有运气。我从 GetLastError 函数中收到错误的句柄错误（类型 6）。我虽然 native_handle() 返回了线程的句柄？

有人知道怎么做吗？

```
void baseThread::applyPriority(uint8 priority)
{

#ifdef WIN32
    if (!m_pThread)
        return;

    BOOL res;
    HANDLE th = m_pThread->native_handle();

    switch (priority)
    {
    case REALTIME   : res = SetPriorityClass(th, REALTIME_PRIORITY_CLASS);      break;
    case HIGH       : res = SetPriorityClass(th, HIGH_PRIORITY_CLASS);          break;
    case ABOVE_NORMAL   : res = SetPriorityClass(th, ABOVE_NORMAL_PRIORITY_CLASS);  break;
    case NORMAL     : res = SetPriorityClass(th, NORMAL_PRIORITY_CLASS);            break;
    case BELOW_NORMAL   : res = SetPriorityClass(th, BELOW_NORMAL_PRIORITY_CLASS);  break;
    case IDLE       : res = SetPriorityClass(th, IDLE_PRIORITY_CLASS);          break;
    }

    if (res == FALSE)
    {
        int err = GetLastError();
    }

#endif
} 
```

编辑：最终代码：

```
void baseThread::applyPriority(uint8 priority)
{

#ifdef WIN32
    if (!m_pThread)
        return;

    BOOL res;
    HANDLE th = m_pThread->native_handle();

    switch (priority)
    {
    case REALTIME       : res = SetThreadPriority(th, THREAD_PRIORITY_TIME_CRITICAL);   break;
    case HIGH           : res = SetThreadPriority(th, THREAD_PRIORITY_HIGHEST);         break;
    case ABOVE_NORMAL   : res = SetThreadPriority(th, THREAD_PRIORITY_ABOVE_NORMAL);    break;
    case NORMAL         : res = SetThreadPriority(th, THREAD_PRIORITY_NORMAL);          break;
    case BELOW_NORMAL   : res = SetThreadPriority(th, THREAD_PRIORITY_BELOW_NORMAL);    break;
    case IDLE           : res = SetThreadPriority(th, THREAD_PRIORITY_LOWEST);          break;
    }

#endif
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-02T05:46:44.837

使用 SetThreadPriority 函数设置线程优先级。SetPriorityClass 用于设置进程的优先级。您还必须更改优先级值，有关详细信息，请参阅[SetThreadPriority](http://msdn.microsoft.com/en-us/library/ms686277(VS.85).aspx)的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T05:47:33.257

该`SetPriorityClass`函数的第一个参数是 HANDLE，您正在传递一个指向 HANDLE 的指针。将其更改为：

```
res = SetPriorityClass(*th, REALTIME_PRIORITY_CLASS); 
```

或等效的东西。内核可以判断您传入的指针值实际上不是有效的线程句柄，因为我猜它维护了当前分配的线程句柄的内部列表。指针显然不在该列表中。编译器不能真正强制执行更好的类型安全，因为 HANDLE 是一种不透明的类型 - 你只需要非常小心你传入的内容。

哦对了，其他评论者Dani说的没错，`SetPriorityClass`不是用来设置线程优先级的，`SetThreadPriority`反正你想用。但是我的建议仍然有效，你需要传入一个 HANDLE，而不是指向此类的指针。

# bazaar - 集市+巡航控制

> ID：601343
> 
> 赞同：1
> 
> 时间：2009-03-02T05:23:57.963
> 
> 标签：bazaar, cruisecontrol

我合作的团队使用 Bazaar 作为其 VCS，我想将 CruiseControl (CC) 和 PHPUnderControl (PUC) 引入组合，但似乎找不到任何适用于 bazaar 和 CC 的文档或插件。cc.net 有一个插件，但它必须在 linux 上运行是的，我知道单声道，但似乎 PUC 需要 CC 而不是 cc.net。bazaar 有什么办法可以与 CC 整合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-06-28T17:05:40.573

这是其他人建议的引导程序作为可能的解决方案：

[https://answers.launchpad.net/bzr/+question/62809](https://answers.launchpad.net/bzr/+question/62809)

我没有测试过，还有YMMV，但值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-29T16:07:06.613

现在有一个可用于 CruiseControl 的 Bazaar 插件：

[http://blog.fusonic.net/2010/10/bazaar-plugin-for-cruisecontrol/](http://blog.fusonic.net/2010/10/bazaar-plugin-for-cruisecontrol/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T05:54:58.730

包含`bzr pull`或`bzr checkout`手动的自定义 MSBuild 或 NAnt 脚本？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T15:44:56.457

如果您有一个正常工作的 .NET 插件（带有单元测试？），那么移植到 CC Java 可能会很简单。

如果您对 Java 不满意，您可能会在 CC[开发人员邮件列表](http://cruisecontrol.sourceforge.net/developers.html)中询问是否有他们——比如我 ;)——会为你做移植。我总是很乐意帮助编写插件的人，我希望移植 SourceControl 插件会快速而简单。

# javascript - 在 javascript 中读取萤火虫控制台

> ID：601363
> 
> 赞同：4
> 
> 时间：2009-03-02T05:34:36.347
> 
> 标签：javascript, selenium, firebug

我正在寻找一种方法来读取记录到 firebug 控制台的最新命令。

例如，我可以做一些事情

```
console.debug('The most current request URI is /sweatsocks'); 
```

然后另一段（伪）代码可以

```
if (mostRecentConsoleEntry().endsWith('/sweatsocks')) {
  // do some stuff
} 
```

调试语句的上下文将在被测代码中，控制台检查将在 selenium 脚本中完成。这将让我观察深埋在 js 函数中的信息以及在运行时构建的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T06:11:25.057

您可以覆盖该`console.log`功能以添加您需要的任何额外功能。

```
var oldLog = console.log;
var lastLog;
console.log = function () {
    // do whatever you need to do here: store the logs into a different variable, etc
    // eg:
    lastLog = arguments;

    // then call the regular log command
    oldLog.apply(console, arguments);
}; 
```

这不会是最防弹的解决方案，因为`console`允许 printf 样式语法：

```
console.log("%d + %d = %s", 1, 3, "four"); 
```

...但这对你来说可能是一个开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-08-07T05:47:25.233

不要尝试覆盖console.debug，实现console.debug 加上你需要的功能。

```
var debugCalls = [ ];
function myDebug(errorMessage){
  console.debug(errorMessage); //maintain original functionality
  debugCalls[debugCalls.length]  = errorMessage;
  //the previous argument to myDebug is debugCalls[debugCalls.length]

  //you may also want to call an ajax function to report this error
  mailError(errorMessage);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T05:46:11.420

您可以重写`console.log()`, 并将所有日志附加到数组吗？然后启动原始`console.log()`文件并重复它正在执行的操作以在控制台上获取调试输出？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:29:56.257

这是我整理的更详细的版本：

```
/**
 * Console log with memory
 *
 * Example:
 *
 *     console.log(1);
 *     console.history[0]; // [1]
 *
 *     console.log(123, 456);
 *     console.history.slice(-1)[0]; // [123, 456]
 *
 *     console.log('third');
 *     // Setting the limit immediately trims the array,
 *     // just like .length (but removes from start instead of end).
 *     console.history.limit = 2;
 *     console.history[0]; // [123, 456], the [1] has been removed
 *
 * @author Timo Tijhof, 2012
 */
console.log = (function () {
    var log  = console.log,
        limit = 10,
        history = [],
        slice = history.slice;

    function update() {
        if (history.length > limit) {
            // Trim the array leaving only the last N entries
            console.history.splice(0, console.history.length - limit);
        }
    }

    if (console.history !== undefined) {
        return log;
    }

    Object.defineProperty(history, 'limit', {
        get: function () { return limit; },
        set: function (val) {
            limit = val;
            update();
        }
    });

    console.history = history;

    return function () {
        history.push(slice.call(arguments));
        update();
        return log.apply(console, arguments);
    };

}()); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-22T10:25:37.070

你可能想实现一个队列。扩展德文的答案：（类似这样）

```
var window.log = [];

logger function(msg) {
  var log_length = 10;
  console.log(msg);
  window.log.push(msg);
  if(window.log.length > log_length) {
    window.log.shift()
  }
} 
```

请参阅：
[如何在 JavaScript 中实现堆栈和队列？](https://stackoverflow.com/questions/1590247/how-do-you-implement-a-stack-and-a-queue-in-javascript)
[http://aymanh.com/9-javascript-tips-you-may-not-know#string-concatenation-vs-arrayjoin](http://aymanh.com/9-javascript-tips-you-may-not-know#string-concatenation-vs-arrayjoin)

# .net - Winforms 生成事件并删除处理程序

> ID：601369
> 
> 赞同：0
> 
> 时间：2009-03-02T05:38:32.407
> 
> 标签：.net, winforms, events

创建窗体窗口时，经常会出现添加特定事件并编译程序的情况。但是后来你意识到该事件并不是真正需要的，因此删除了该事件。现在，当您再次编译代码时，会显示错误。例如，在我编写的代码中：WindowsAplication1.LanMessenger 不包含“textBox1_click”的定义。

很明显，我在之前编译过一次之后删除了事件 textBox1_click。有什么办法可以避免这种情况，因为当您知道实际上没有问题时，它确实会让人感到恼火。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T05:42:03.020

您需要查看 MyFormName.Designer.cs 并查找设置特定控件属性的区域。您应该注意到一行：

```
this.textBox1.Click += new EventHandler(textBox1_click); 
```

您需要删除此行并保存文件。

请注意，这些被认为是设计器生成的事件，您可以做的是在您的构造函数中（在调用 之后`InitializeComponent`）或`Form_Load`您也可以在构造函数中设置的事件中为您的控件连接您自己的事件。这种方法很好，因为您可以清楚地控制并准确查看设置了哪些处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T05:46:00.657

避免错误的最简单方法是执行以下操作

1.  导航到设计器中的事件并清除处理程序
2.  删除实际的事件代码。

在 VS 2005/VS 2008 中没有一步删除事件和事件连接的方法。我个人执行以下操作，因为我发现它更快

1.  删除事件处理程序
2.  CTRL-B 构建（这将在事件连接位置生成构建错误
3.  ALT-F7 切换到错误列表
4.  下到第一个错误
5.  Enter 导航到事件连接
6.  删除该行。

如果您使用 ViEmu，这是一个非常快速的进展 :)

# c# - c# 中哪种数据类型更适合货币计算？

> ID：601370
> 
> 赞同：2
> 
> 时间：2009-03-02T05:39:52.170
> 
> 标签：c#, sql-server

也是用于映射的 sql server 中更好的对应部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-02T05:40:33.273

十进制和十进制:)

*   .Net：http: [//msdn.microsoft.com/en-us/library/system.decimal.aspx](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)
*   SQL; [http://msdn.microsoft.com/en-us/library/ms187746.aspx](http://msdn.microsoft.com/en-us/library/ms187746.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T05:45:26.507

System.Decimal 或“十进制”是 128 位数据类型。与浮点类型相比，十进制类型的精度更高，范围更小，适用于金融和货币计算。

如果您希望将数字实数文字视为十进制，请使用后缀 m 或 M：

```
decimal amount = 300.5m;
var dec = 300.5M; // same as above 
```

十进制在 CLR 中实现，无论硬件如何，都保证返回相同的结果。

JaredPar 是对的！

# asp.net - ASP.Net AJAX TabControl

> ID：601374
> 
> 赞同：0
> 
> 时间：2009-03-02T05:41:47.327
> 
> 标签：asp.net, ajax, gridview, tabcontrol

我在我的页面上放置了一个 AJAX Tabcontrol。

在 TabControl 内，我还放置了一个网格视图。

```
<cc1:TabContainer id="tabconLandTransPlan" runat="server" Height="300px" ActiveTabIndex="0" AutoPostBack="True">
<cc1:TabPanel runat="server" ID="tabMasterPlan" HeaderText="Master Plan" >
    <HeaderTemplate>
        <span style="font-size: 8pt; font-family: Arial">Master Plan</span>
    </HeaderTemplate>
    <ContentTemplate>
        <asp:GridView id="gvBuffer" runat="server" Width="100%" AutoGenerateColumns="False">
            <Columns>
                <asp:TemplateField HeaderText="Type of Services">
                    <HeaderStyle Width="26%"></HeaderStyle>
                    <ItemTemplate>
                        <asp:Label id="Label1" runat="server" Text='<%# EVAL("code_desc") %>'></asp:Label> 
                    </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Tariff Code">
                    <HeaderStyle Width="4%" HorizontalAlign="Center"></HeaderStyle>
                    <ItemStyle HorizontalAlign="Center"></ItemStyle>
                    <ItemTemplate>
                        <asp:Label ID="Label2" runat="server" Text='<%# EVAL("res_code") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
    </ContentTemplate>
</cc1:TabPanel> 
```

当我检索 gridview 时，gridview 边界超出了选项卡控件边界。如何确保 gridview 将在选项卡控件的边界内？Gridview 的高度超出了选项卡控件。宽度刚刚好。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T06:46:53.147

我可能已经找到了这个小问题的答案。

显然，ajax 选项卡控件遵循其内部控件的大小（高度）。

所以我所做的就是将 tabcontrol 的高度设置为 Nothing (VB.Net)。

将其设置为零或任何其他百分比（转换）值会引发错误。

感谢观看的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T06:07:24.753

增加选项卡控件的高度！

# java - 我如何获得特定年份的所有周日日期？

> ID：601380
> 
> 赞同：0
> 
> 时间：2009-03-02T05:44:37.790
> 
> 标签：java

**完全重复：** [如何在 Java 中获取特定年份的所有星期日日期](https://stackoverflow.com/questions/590385/how-to-get-all-dates-of-sundays-in-a-particular-year-in-java)

* * *

```
int year = 2009;
Calendar cal = new GregorianCalendar(year, Calendar.JANUARY, 1);
for (int i = 0, inc = 1; i < 366 && cal.get(Calendar.YEAR) == year; i+=inc) {
    if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
        // this is a sunday
        cal.add(Calendar.DAY_OF_MONTH, 7); 
        inc = 7;
    } else {
        cal.add(Calendar.DAY_OF_MONTH, 1);
    }
} 
```

在[Miles D 给定的代码](https://stackoverflow.com/questions/590385/how-to-get-all-dates-of-sundays-in-a-particular-year-in-java/590447#590447)中，我正在获取从第一个月的第二个星期日到明年的第一个星期日的所有星期天的日期。其实我只是在寻找一个特定的年份，它的所有星期天日期，请你能再次看到它吗.....

例如，我只需要 2009 年从 2009 年 1 月到 2009 年 12 月的所有星期日日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T06:40:50.820

编程新手？好，我们一起来看看代码吧！

我看到的第一件事是循环内的条件：

```
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) 
```

这将检查存储在日历中的当前日期`cal`是否具有`DAY_OF_WEEK`which is `SUNDAY`。如果是，它做一件事，如果不是，它做另一件事。

现在我们知道循环的“大脑”在寻找什么，让我们看一下循环的声明：

```
for (int i = 0, inc = 1; i < 366 && cal.get(Calendar.YEAR) == year; i+=inc) 
```

`for`循环分为三个部分：初始化、条件和“增量” 。在循环开始运行之前，初始化只运行一次：

```
int i = 0, inc = 1 
```

我*相信*您知道，这会创建两个变量：`i`和`inc`. 它设置`i`为 0 和`inc`1。

在运行循环的每次迭代之前，都会检查循环的条件。这是：

```
i < 366 && cal.get(Calendar.YEAR) == year 
```

它检查是否`i`仍小于 366 以及存储的日期`cal`是否`YEAR`为`year`. 这实际上确保了我们仍然在我们开始的同一年。

for的最后一部分是这样的：

```
i+=inc 
```

它将 的值添加`inc`到 的值中`i`并将其存储在`i`.

那么到目前为止，我们在循环中有什么？

1.  循环以`i`0 和`inc`1开始
2.  循环一直持续下去
    *   `i`小于公历年的长度（闰年为 366），
    *   (AND) 中的日期`cal`仍与 中的年份相同`year`。
3.  `i`由`inc`

让我们再看一下循环的主体：

```
if (condition_that_checks_if_it_is_a_sunday) {
    // this is a sunday
    cal.add(Calendar.DAY_OF_MONTH, 7); 
    inc = 7;
} else {
    cal.add(Calendar.DAY_OF_MONTH, 1);
} 
```

如您所见，如果是星期天，会发生两件事：`inc`设置为 7，并且 7`DAY_OF_MONTH`被`add`编辑为`cal`。这意味着在循环的下一次迭代中，表达式`i+=inc`将表示`i+=7`而不是`i+=1`在`inc`1 时执行的操作（就像初始化完成时那样。）

如果不是星期天，则将单曲`DAY_OF_WEEK`添加到`cal`.

那么我们在循环体中有什么？

*   检查是否`cal`是星期天
    *   如果是，提前`cal`7天。不仅如此，还要继续前进`i`7 分！
    *   如果`cal`不是在星期天，则将其提前到一周的第二天，然后`i`继续前进 1。

换句话说，循环将从`cal`' 的初始值开始，`cal`一次向前移动一天，直到找到星期天。一旦这样做，它将一次`cal`前进 7 天，直到超过 366 天，或者直到`cal`又一年！

因此，通过 ( *ahem* ) 简要检查上面的代码，我们得出结论，它实际上并没有“得到”一年中的星期日。它只是对它们进行迭代，并由您来添加实际上对它找到的星期日执行某些操作的代码。

现在我们已经一起检查了代码，我确信这样做很简单！这实际上只是添加几行的问题。每次循环进入它“知道”`cal`是星期天的部分时，您只需添加一行 [在此处插入任何您想要的内容]。

很简单，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T06:32:42.010

这是我可能开始使用的算法（代码留给读者作为练习）：

查找最接近特定日期的星期日。例如，从 1 月 1 日开始，向前走，直到找到星期日。这应该花费不超过 7 次操作。

现在您知道了星期天，您可以根据那个星期天简单地通过将 7 的倍数添加到第一个星期日来计算来自朱利安日期的所有其他星期天。

您还应该从 12 月 31 日开始计算最近的星期日，以便您知道何时停止包括所选年份的星期日。

哦，刚写完，我看到[其他人已经有同样的想法了](https://stackoverflow.com/questions/590385/how-to-get-all-dates-of-sundays-in-a-particular-year-in-java/590427#590427)。

# iphone - 在 UIImagePickerController 中获取相机预览的图像表示

> ID：601381
> 
> 赞同：5
> 
> 时间：2009-03-02T05:45:01.423
> 
> 标签：iphone

当我使用标准`[view.layer renderInContext:UIGraphicsGetCurrentContext()];`方法在 iPhone 相机模式视图上将视图转换为图像时，我得到的只是相机预览所在的黑色控件。

有人对此有解决方案吗？速度不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-25T17:22:31.787

从记录的 api 中不可能，但可能。在相机的子视图中找到“PLCameraView”视图，然后调用

```
CGImageRef img = (CGImageRef)[foundCameraView imageRef]; 
```

这将返回对相机保存的图像的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-08-02T02:49:07.733

您可以使用 iOS 4.0 中的新 AVFoundation 东西来做到这一点。

您应该能够调用 UIGetScreenImage()（返回 UIImage）来获取整个屏幕的当前捕获，包括预览。这就是以前所有条形码应用程序的工作方式。但据说苹果现在不允许这样做，只允许使用 AVFoundation 技术——它只能在 4.0 下工作。

甚至出现问题的全部原因是因为 UIGetScreenImage() 不是记录在案的 API 的一部分，但 Apple 为使用它做了一个特定的例外。这不像他们正在拉动当前的应用程序，但他们不允许使用旧技术的新提交（或更新）。

代表许多人进行了一些游说，以说服 Apple 让应用程序开发人员仅在 iOS 3.x 上使用旧技术，因此，如果您想使用它，请发送电子邮件至开发人员关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T06:01:57.217

不幸的是，这是不可能的。为了性能，iPhone 使用某种形式的直接渲染将相机预览直接绘制到屏幕上，而不是作为 UIView 表面的一部分。因此，当您“捕获”相机视图时，您只会获得 UIView 元素，而不是预览图像。

（FWIW 这类似于在 Windows/Mac 上难以截屏某些电影软件的原因）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-02T02:43:17.330

你可以试试[AVCaptureVideoPreviewLayer](http://developer.apple.com/iphone/library/documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009524)

# c# - 对列表视图（详细视图）上的图标进行排序 c#

> ID：601388
> 
> 赞同：1
> 
> 时间：2009-03-02T05:47:37.923
> 
> 标签：c#, winforms, listview

当您看到详细信息视图并单击 Windows 中的排序图标时，您已经获得了向上和向下箭头。你如何为listview实现这是c#？

另外...您如何对列表视图中的日期字段等复杂时间进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T05:57:13.670

为了自定义排序，您需要提供一个可以与 ListViewItem 实例进行比较的 IComparer 实例。将此类的实例分配给 ListView.ListViewItemSorter 属性以启用自定义排序。

以下是有关如何完成此操作的教程的链接：http: [//msdn.microsoft.com/en-us/library/ms996467.aspx](http://msdn.microsoft.com/en-us/library/ms996467.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T05:51:55.307

好吧，在列表视图中，您可以切换到报告视图/模式以查看顶部栏。我已经完成了排序的自定义实现，即单击排序按钮时再次填充列表视图。

我相信有列标题点击事件。查查他们。

# c# - 如何在 WPF 中添加自定义路由命令？

> ID：601393
> 
> 赞同：48
> 
> 时间：2009-03-02T05:52:45.070
> 
> 标签：c#, wpf

我有一个包含菜单和子菜单的应用程序。我已将应用命令附加到一些子菜单项，例如剪切、复制和粘贴。
我还有其他一些没有应用程序命令的菜单项。
如何将自定义命令绑定添加到这些子菜单项？
我已经阅读了[这篇](http://msdn.microsoft.com/en-us/library/system.windows.input.routedcommand.aspx)文章，但无法将事件附加到我的子菜单项。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-03-02T06:10:09.163

我使用放置在 Window1 类之后的静态类（或任何碰巧命名的窗口类），在其中创建 RoutedUICommand 类的实例：

```
public static class Command {

    public static readonly RoutedUICommand DoSomething = new RoutedUICommand("Do something", "DoSomething", typeof(Window1));
    public static readonly RoutedUICommand SomeOtherAction = new RoutedUICommand("Some other action", "SomeOtherAction", typeof(Window1));
    public static readonly RoutedUICommand MoreDeeds = new RoutedUICommand("More deeds", "MoreDeeeds", typeof(Window1));

} 
```

使用 Window1 类所在的命名空间在窗口标记中添加命名空间：

```
xmlns:w="clr-namespace:NameSpaceOfTheApplication" 
```

现在我可以为命令创建绑定，就像为应用程序命令一样：

```
<Window.CommandBindings>
    <CommandBinding Command="ApplicationCommands.Open" Executed="CommandBinding_Open" />
    <CommandBinding Command="ApplicationCommands.Paste" Executed="CommandBinding_Paste" />
    <CommandBinding Command="w:Command.DoSomething" Executed="CommandBinding_DoSomething" />
    <CommandBinding Command="w:Command.SomeOtherAction" Executed="CommandBinding_SomeOtherAction" />
    <CommandBinding Command="w:Command.MoreDeeds" Executed="CommandBinding_MoreDeeds" />
</Window.CommandBindings> 
```

并使用菜单中的绑定，例如：

```
<MenuItem Name="Menu_DoSomething" Header="Do Something" Command="w:Command.DoSomething" /> 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2010-06-15T15:38:57.617

与其在静态类中定义它们，不如直接在 XAML 中声明命令。示例（改编自 Guffas 的好示例）：

```
<Window.Resources>
    <RoutedUICommand x:Key="DoSomethingCommand" Text="Do Something" />
    <RoutedUICommand x:Key="DoSomethingElseCommand" Text="Do Something Else" />
</Window.Resources>
<Window.CommandBindings>
    <CommandBinding Command="{StaticResource DoSomethingCommand}" Executed="CommandBinding_DoSomething" />
    <CommandBinding Command="{StaticResource DoSomethingElseCommand}" Executed="CommandBinding_DoSomethingElse" />
</Window.CommandBindings>
...
<MenuItem Name="Menu_DoSomething" Header="Do Something" Command="{StaticResource DoSomethingCommand}" /> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2011-08-31T10:04:05.527

**我知道我的回答为时已晚**，但我希望它对***未来***有所帮助。

我喜欢 Guffa 和 Heinzi 的答案，但您只能使用一个命令来实现之前的结果。我通常使用帮助命令

```
 <Window.CommandBindings>
        <CommandBinding Command="{StaticResource Help}" Executed="HelpExecuted" />
  </Window.CommandBindings> 
```

我在每次调用时都使用 CommandParametr，例如

```
<Window.InputBindings>
    <KeyBinding Command="{StaticResource Help}" Key="A" Modifiers="Ctrl" CommandParameter="Case1"/>
    <KeyBinding Command="{StaticResource Help}" Key="B" Modifiers="Ctrl" CommandParameter="Case2"/>
    <KeyBinding Command="{StaticResource Help}" Key="C" Modifiers="Ctrl" CommandParameter="Case3"/>
    <KeyBinding Command="{StaticResource Help}" Key="D" Modifiers="Ctrl" CommandParameter="Case4"/>
    <MouseBinding Command="{StaticResource Help}" MouseAction="LeftDoubleClick" CommandParameter="Case5" />
</Window.InputBindings> 
```

或者

```
<Button Command="Help" CommandParameter="Case6" Content="Button">
    <Button.InputBindings>
        <KeyBinding Command="{StaticResource Help}" Gesture="Ctrl+D" CommandParameter="Case7"/>
    </Button.InputBindings>
</Button> 
```

并在cs文件中

```
private void HelpExecuted(object sender, ExecutedRoutedEventArgs e)
{
    string str = e.Parameter as string;
    switch (str)
    {
        case null://F1 Pressed default Help
               //Code
            break;
        case "Case1":
               //Code
            break;
        case "Case2":
               //Code
            break;
        case "Case3":
               //Code
            break;
        case "Case4":
            break;
        case "Case5":
               //Code
            break;
        case "Case6":
               //Code
            break;
        case "Case7":
               //Code
            break;
    }
    e.Handled = true;
} 
```

如果您使用的是 MVVM 模式

```
private void HelpExecuted(object sender, ExecutedRoutedEventArgs e)
{
    string str = e.Parameter as string;
    Mvvm_Variable.Action(Input: str);
    e.Handled = true;
} 
```

并将开关移至 ViewModule 站点。和 Action 是同一个 ViewModule 类中的一个方法。

# java - getClass() 和静态方法：最佳实践是什么？

> ID：601395
> 
> 赞同：1
> 
> 时间：2009-03-02T05:54:18.513
> 
> 标签：java, reflection, static

我希望通过反射为将使用我的代码的程序员提供一些便利。为了达到我想要的结果，我想为扩展我的代码的类获取类对象。尽管他们不能覆盖我希望从中访问信息的静态方法，但它目前会很有帮助。我最终可能只是简单地重构设计以避免这种情况，但想把这个问题抛给社区。

我知道实现这一点的唯一方法是获取当前线程，导航堆栈跟踪，并提取类名，然后将其转换为类的实际实例。

还有其他建议吗？

旁注：上述方法也是我知道获取调用方法的唯一方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T06:08:31.163

不幸的是，走堆栈不一定安全：

来自 getStackTrace 的 JDK 6 Javadoc：

> 在某些情况下，某些虚拟机可能会从堆栈跟踪中省略一个或多个堆栈帧。在极端情况下，允许没有关于这个 throwable 的堆栈跟踪信息的虚拟机从这个方法返回一个长度为零的数组。一般来说，此方法返回的数组将为 printStackTrace 打印的每一帧包含一个元素。

也许，您可以使用调试器 api 来做到这一点。我相信调试的东西能够全速使用 HotSpot（我可能是错的），所以你不会看到这样做的巨大速度。您可以先查看：http: [//java.sun.com/javase/6/docs/technotes/guides/jpda/trace.html](http://java.sun.com/javase/6/docs/technotes/guides/jpda/trace.html)

此外，建立在未回答的答案...

```
class Base
{
    // instance method helper
    public final int foo()
    {
        return (foo(this.getClass()));
    }

    // the real helper, with access to the class
    private static int foo(final Class clazz)
    {
        return (0);
    }
}

class Child
    extends Base
{
    public void bar()
    {
        final int x;

        x = foo();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T06:04:33.980

在静态方法中，从您的扩展而来的某些（任何）类在堆栈上的保证是什么？

如果您稍微考虑一下，我怀疑您会意识到您正在寻找的东西并不存在。

/EDIT 1/ 我认为你需要的是

```
abstract class B {
    <T extends B> B create(Class<T> clazz) {
    ....
} 
```

嗯。如果`create`是`protected`方法呢？然后你可以很确定调用者是 a `B`，你甚至可以要求它，抛出`UnsupportedOperation`或者`IllegalState`调用者不能分配给`B`。

您可以使用`Thread.currentThread().getStackTrace()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T21:51:59.227

创建 Throwable 非常昂贵，因此如果您的方法被频繁调用（例如每秒一次以上），请不要使用它。稍微好一点的方法是 Thread.currentThread().getStackTrace()。

如果您使用 Sun 的 JVM，另一种方法是 Reflection.getCallerClass(n)。这要快得多，但不能移植到其他 JVM。如果您对此感到担忧，则可以使用另一种方法，如果可用则调用它，如果不可用则使用堆栈跟踪。

所有这些都假设您的静态方法不是公开的。如果一切顺利，因为您的方法可以被任何类调用，而不仅仅是扩展您的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T12:36:25.723

我建议避免陷入反思的泥潭。你似乎在做某种简单的编程。使用简单的实现（没有足够的信息来合理猜测可能是什么）。

# iphone - 如何在横向模式下转换导航栏和导航控制器

> ID：601397
> 
> 赞同：5
> 
> 时间：2009-03-02T05:55:16.187
> 
> 标签：iphone, objective-c, cocoa-touch

我正在开发一个使用横向模式的游戏，我总共有 4 个视图。2 个视图在横向模式下正确出现。但在第三个视图中，我有 UITable 和导航栏。我可以在横向模式下旋转表格，但不能转换导航栏和导航控制器。导航栏和导航控制器上也有按钮。它也没有得到转变。那么任何人都可以对此有解决方案。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-11-30T17:53:52.813

```
#define degreesToRadians(x) (M_PI * x / 180.0)

- (void)viewWillAppear:(BOOL)animated
{

    [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight];

    CGRect newBounds = CGRectMake(0, 0, 480, 320);
    self.navigationController.view.bounds = newBounds;
    self.navigationController.view.center = CGPointMake(newBounds.size.height / 2.0, newBounds.size.width / 2.0);

    self.navigationController.view.transform = CGAffineTransformMakeRotation(degreesToRadians(90));

    [super viewWillAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    self.navigationController.view.transform = CGAffineTransformIdentity;
    self.navigationController.view.transform = CGAffineTransformMakeRotation(degreesToRadians(0));
    self.navigationController.view.bounds = CGRectMake(0.0, 0.0, 320.0, 480.0);

    [super viewWillDisappear:animated];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T07:28:29.270

将导航控制器的导航栏旋转 90 度。此外，您可能需要设置导航栏中心和框架以设置适当的宽度以适应横向模式..它对我有用:) 希望它也能帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T09:53:49.453

在 UIViewController 文档的类中：

**处理轮换**

interfaceOrientation 属性
– shouldAutorotateToInterfaceOrientation: –rotatingFooterView –rotatingHeaderView
– willRotateToInterfaceOrientation:duration: – willAnimateFirstHalfOfRotationToInterfaceOrientation:duration: – willAnimateSecondHalfOfRotationFromInterfaceOrientation:duration: – didRotateFromInterfaceOrientation:

希望这对你也有帮助。

一种。

# visual-studio - 在 SVN 中存储具有多个项目的 Visual Studio 解决方案

> ID：601399
> 
> 赞同：1
> 
> 时间：2009-03-02T05:56:49.210
> 
> 标签：visual-studio, svn, version-control, visualsvn

我很难将具有多个项目的 Visual Studio 解决方案添加到我的存储库中。我正在使用 VisualSVN。这是我的目录结构

```
 c:\-----
    |
    ---Projects
           |
           --MyApp
              |
              ---Project1 (The solution is in this project directory)
              ---Project2
              ---Project3 

```

当我选择“MyApp”作为工作副本根时，没有添加任何内容。如果我选择一个项目文件夹，则只添加 2 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T06:03:35.560

这是我成功使用的结构：

```
dev
 |- Project root folder (solution file here is the key)
    |- Class Project
    |- Class Project
    |- Web Project
    |- References
    |- Resources 
```

我的建议是你应该将你的 .sln 文件移动到顶层然后导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T19:07:26.463

另一种先进的方法。每个项目都有自己的主干，结构如下

```
trunk
  |- .sln
  |- src
    |- ClassProject
    |- Web Project 
```

然后在一个单独的 svn 目录中为您需要的每个解决方案创建子目录。例如，您可以拥有 AllProjects、WebOnly、DALOnly。在特定情况下，使用 svn:externals 会带来您需要的每个项目（ClassProject 等）。

# vim - 如何临时关闭 Vim 中的插件？

> ID：601412
> 
> 赞同：37
> 
> 时间：2009-03-02T06:08:55.530
> 
> 标签：vim, plugins

我在 Vim 中有多个插件，其中一些修改了 Vim 的默认行为。例如，我使用 Vimacs 插件，它使 Vim 仅在插入模式下表现得像 emacs。有时我想关闭 Vimacs 插件而不将 vimacs.vim 移出插件目录。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2011-07-15T12:33:06.650

如果您使用像[Vundle](https://github.com/gmarik/vundle)或[Pathogen](http://github.com/tpope/vim-pathogen)这样的插件管理器，您可以执行此操作，这会将插件保存在目录下自己的`~/.vim/bundle/`目录中。

在这种情况下，只需`runtimepath`使用以下命令找出 vimacs 插件：

```
set runtimepath? 
```

假设它是`~/.vim/bundle/vimacs`.

然后，将此命令放入您的`.vimrc`：

```
set runtimepath-=~/.vim/bundle/vimacs 
```

要加载 vimacs，只需注释掉该行并重新启动 Vim（或获取您的 .vimrc）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-03-02T06:35:37.260

查看启动时检查哪些变量 vimacs。在脚本文件的开头找到类似`if exists('g:vimacs_is_loaded")...`. 然后在你的 .vimrc 中设置这个变量，或者用 .vim 启动 vim `vim --cmd "let g:vimacs_is_loaded = 1"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-08T13:00:37.360

如果您使用病原体，我认为[这篇文章](https://stackoverflow.com/questions/4261785/temporarily-disable-some-plugins-using-pathogen-in-vim#:%7E:text=The%20easiest%20method%20to%20disable,pathogen_disabled%20variable%2C%20before%20starting%20pathogen.&text=Update%3A%20Another%20method%2C%20supported%20by,ends%20in%20a%20tilde%20(%7E).)给出了更好的答案。由于我在使用乳胶时经常需要禁用片段，因此也在我的 ~/.config/ranger/rc.conf 中添加了这个：

```
map bs shell vim --cmd "let g:pathogen_blacklist = [ 'ultisnips', 'vim-snipmate' ]" %f 
```

这样，每当我想打开一个禁用片段的文件时，都很容易。

# visual-studio - 是否有具有骆驼案例选择的 Visual Studio 插件（最好是 Resharper）

> ID：601422
> 
> 赞同：9
> 
> 时间：2009-03-02T06:15:00.710
> 
> 标签：visual-studio, resharper

> **可能重复：**
> [让 Visual Studio 在按下 ctrl 和光标键时理解 CamelCase](https://stackoverflow.com/questions/314095/make-visual-studio-understand-camelcase-when-hitting-ctrl-and-cursor-keys)

**[此线程](https://stackoverflow.com/questions/314095/make-visual-studio-understand-camelcase-when-hitting-ctrl-and-cursor-keys)的完全重复**

我的代码中有一些很长的变量/字段名称，我发现 CTRL+SHIFT+Right-Arrow 和 CTRL+SHIFT+Left-Arrow 的默认行为比使用驼峰式大小写的效率低。这是一个例子。

假设光标在 AndAnotherThing 中的 A 之前。CTRL+SHIFT+右箭头将选择整个变量，而坚持驼峰框只会选择 And。

Visual Studio 是否有任何工具或插件可以做到这一点？

编辑：

我也想要 CTRL+Left-Arrow 和 CTRL+Right-Arrow 的类似行为

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-02T06:27:33.007

Resharper 支持，选择*Use [CamelHumps](http://www.jetbrains.com/resharper/features/navigation_search.html#CamelHumps)* in *ReSharper* | *选项*| *编辑器* ，它将按您的预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T06:21:08.997

我认为[Visual Assist X](http://www.wholetomato.com/)符合您的描述。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-02T06:25:08.503

好吧，这并不是您所要求的，但是 Resharper 有一个非常有用（但很难找到）的功能，它通过允许您只输入名称的大写字母来尊重驼峰式大小写。

例如，如果您有此声明

```
List<int> myList; 
```

那么当你可以输入

```
myList.ARO| 
```

并且 Resharper 智能感知将自动选择 AsReadOnly 作为完成。

也适用于 GotoType 和 GotoMember。

# c++ - 多字节字符常量和位图文件头类型常量

> ID：601430
> 
> 赞同：3
> 
> 时间：2009-03-02T06:29:15.763
> 
> 标签：c++, windows

我有一些现有的代码，用于将图像写入位图文件。其中一行代码如下所示：

```
bfh.bfType='MB'; 
```

我想我可能从某个地方复制了它。其他开发人员之一对我说：“这看起来不对，不应该是'BM'吗？” 无论如何，它似乎工作正常，但在代码审查时，它被重构为：

```
bfh.bfType=*(WORD*)"BM"; 
```

谷歌搜索表明，大多数时候，第一行似乎被使用，而有些时候人们会这样做：

```
bfh.bfType=0x4D42; 
```

那么区别是什么呢？他们怎么能给出正确的结果？多字节字符常量到底是什么意思？他们真的一样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-02T07:38:31.103

这三个（可能）是等效的，但出于不同的原因。

```
bfh.bfType=0x4D42; 
```

这是最容易理解的，它只是在 bfType 中加载一个恰好代表 8-15 位中的 ASCII 'M' 和 0-7 位中的 ASCII 'B' 的数字。如果您将其写入 little-endian 格式的流，则该流将包含“B”、“M”。

```
bfh.bfType='MB'; 
```

这基本上等同于第一条语句——它只是表示整数常量的不同方式。它可能完全取决于编译器对它的作用，但它可能会根据您编译的机器的字节序生成一个值。如果您在具有相同字节序的机器上编译和执行，那么当您将值写入流时，您应该得到“B”、“M”。

```
bfh.bfType=*(WORD*)"BM"; 
```

在这里，“BM”使编译器创建一个看起来像 'B'、'M'、'\0' 的数据块，并获得一个指向它的 char*。然后将其转换为 WORD*，以便在取消引用时将内存作为 WORD 读取。因此，它以机器具有的任何字节顺序将“B”、“M”读入 bfType。使用相同的字节序将其写出来显然会将“B”、“M”放在您的流中。只要您只使用 bfType 写入流，这是最便携的版本。但是，如果您正在使用 bfType 进行任何比较/等，那么最好为它选择一个字节序并在读取或写入值时根据需要进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T06:49:18.197

我没有找到 API，但根据[http://cboard.cprogramming.com/showthread.php?t=24453](http://cboard.cprogramming.com/showthread.php?t=24453)， bfType 是位图标题。BM 的值很可能意味着“位图”。

0x4D42 是一个十六进制值（M 为 0x4D，B 为 0x42）。在[小端](http://en.wikipedia.org/wiki/Endianness)写入方式（最低有效字节优先）中，这与“BM”（而不是“MB”）相同。如果它也适用于“MB”，那么可能会采用一些默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T07:07:13.503

[tehvan](https://stackoverflow.com/users/61848/tehvan)帖子的附录：

[来自维基百科关于BMP](http://en.wikipedia.org/wiki/BMP_file_format)的条目：

> [文件头](http://en.wikipedia.org/wiki/BMP_file_format#BMP_file_header) 请注意，BMP 文件格式的前两个字节（因此是 BMP 头）以大端顺序存储。这是神奇的数字'BM'。所有其他整数值都以 little-endian 格式存储（即最低有效字节在前）。

所以看起来重构的代码根据规范是正确的。

您是否尝试过使用几个不同的照片编辑器以“MB”作为幻数打开文件？

# iphone - 除了选择单个联系人之外，我们可以将 ABPeoplePicker 视图用于其他操作吗？

> ID：601433
> 
> 赞同：2
> 
> 时间：2009-03-02T06:31:25.273
> 
> 标签：iphone

我正在尝试为 iPhone 实现一个“更好”的通讯录，我只想对 Apple 当前的通讯录界面进行补充。我是否必须从头开始重新实现所有内容（联系人按字母标题划分，右侧的所有字母按钮等等）还是有办法可以以某种方式使用和修改 PeoplePicker 视图？

（我对 iPhone SDK 还是很陌生，请随时提出任何有助于阐述我的问题的问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T06:52:10.437

好吧，使用 UITableView，您几乎可以 100% 地完成地址簿中常规的“从列表中选择联系人”部分所做的事情，然后在此基础上进行构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-04T08:29:05.910

来自 Oreilly 的[“iPhone SDK 应用程序开发”一书](http://oreilly.com/catalog/9780596154059/)

这是一个更详细的答案：

> 好吧，使用 UITableView，您几乎可以 100% 地完成地址簿中常规的“从列表中选择联系人”部分所做的事情，然后在此基础上进行构建。

您基本上必须为 UITableView 实现部分和索引栏方法。（基于我的浅读）需要实现以下方法：

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView { 

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection (NSInteger)section

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

- (NSInteger)tableView:(UITableView *)tableView sectionForSection IndexTitle:(NSString *)title atIndex:(NSInteger) index 
```

# linux - XCreateWindow 提供了一个与现有窗口冲突的窗口 ID

> ID：601435
> 
> 赞同：3
> 
> 时间：2009-03-02T06:31:42.200
> 
> 标签：linux, x11, xlib

我创建了一个使用 XCreateWindow 创建窗口的程序。这在我的系统和许多其他系统上完美运行，但在许多系统上，它会导致一些奇怪的问题。例如，我从中获得的 ID 与启动程序的终端的 ID 冲突。在一种这样的情况下，gnome-terminal 的窗口 ID 也为 0x2400001（父级为 root），而我的程序的窗口 ID 也是 0x2400001（其父级也是 root）。有什么建议可能会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-03-22T14:24:19.940

除了其他答案：运行`xwininfo -root -all`（阅读其手册页以获取更多信息）。检查 gnome-terminal 窗口 ID 和您的应用程序的窗口 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-16T13:14:00.783

Xserver 为每个窗口创建一个唯一的不透明 ID。您用于识别窗口 id 的方法可能是错误的。

您的问题是另一个问题的症状。你真正想解决什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T16:44:21.280

窗口 ID 可能仅在与 X 服务器的每个连接中是唯一的（即连接到 X 服务器的不同进程可能获得相同的窗口 ID，并且 X 服务器使用连接和窗口 ID 在内部将它们分开）。

我认为 X 没有对窗口 id 做出任何承诺，例如它们在进程或任何东西中都是唯一的，因此最好不要尝试将它们用于任何其他目的。

看到 X 实现只返回连续数字作为窗口 id 并以每个连接的相同值（例如 1）开头，我不会感到惊讶，这可以解释您的体验，例如每个客户端中的第一个窗口似乎具有相同的窗口 id在那个 X 实现上。

# .net - 开始线程

> ID：601436
> 
> 赞同：0
> 
> 时间：2009-03-02T06:32:09.127
> 
> 标签：.net, c, wpf

大家好，我正在完成一个示例项目（WPF）来向我的老板展示，但我需要一个功能来完成它。我现在有一个登录窗口来在软件中进行身份验证和访问，我希望将此登录窗口作为 STArtThread，这样如果用户可以自动进行身份验证（使用正确的密码和用户名），登录窗口就会消失并可以访问以使用该软件。您知道如何使用此功能吗？感谢您的关注。再见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T07:05:24.287

在 Windows 窗体或 WPF 中进行后台工作的最简单方法是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

有各种将 BackgroundWorker 与 WPF 结合使用的示例和博客文章。与其在这里列出它们，我只想说搜索 WPF 和 BackgroundWorker 会得到很好的结果 :)

或者，您应该查看[`Dispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)WPF 线程模型的核心。关于 WPF 线程的[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms741870.aspx)可能是最好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T07:16:02.500

不确定它在 WPF 应用程序中是否同样有效，但在 WinForms 中，我会先将登录表单显示为对话框，然后……如果登录失败，则不启动主表单。也许 WPF 也可以做类似的事情？

# unit-testing - 何时进行单元测试与手动测试

> ID：601438
> 
> 赞同：38
> 
> 时间：2009-03-02T06:32:40.387
> 
> 标签：unit-testing, testing, tdd

虽然单元测试对于 API 需要具有工业实力的大型项目（例如开发 .Net 框架 API 等）似乎很有效，但在较小的项目上似乎有点矫枉过正。

*什么时候自动化 TDD 方法是最好的方法，什么时候最好只使用手动测试技术、记录错误、分类、修复它们等。*

另一个问题——当我在微软担任测试人员时，有人向我们强调，让开发人员和测试人员成为不同的人是有价值的，这两个群体之间的紧张关系最终有助于创造出伟大的产品。TDD 能否打破这个想法并创造一个开发人员可能不是严格发现自己错误的合适人选的情况？它可能是自动化的，但似乎有很多方法可以编写测试，并且一组给定的测试是否会“证明”质量是可以接受的，这是值得怀疑的。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-03-07T20:59:23.633

TDD 的有效性与项目规模无关。即使在最小的编程练习中，我也会练习[TDD 的三个定律。](http://butunclebob.com/ArticleS.UncleBob.TheThreeRulesOfTdd)测试不需要太多时间来编写，它们节省了大量的调试时间。它们还允许我重构代码而不用担心破坏任何东西。

TDD 是一门类似于会计师实行的复式记账法的学科。它可以防止小错误。会计师将每笔交易输入两次；一次作为贷方，一次作为借方。如果没有犯简单的错误，那么资产负债表的总和将为零。这个零是一个简单的抽查，可以防止高管入狱。

同样，程序员在编写代码之前编写单元测试作为简单的抽查。实际上，他们将每一位代码编写了两次；一次作为测试，一次作为生产代码。如果测试通过，则这两位代码是一致的。这两种做法都不能防止更大和更复杂的错误，但两种做法都很有价值。

TDD 的实践并不是真正的测试技术，它是一种开发实践。TDD 中的“测试”一词或多或少是一个巧合。因此，TDD 不能替代良好的测试实践和良好的 QA 测试人员。事实上，让经验丰富的测试人员独立（并且通常在编写代码（及其单元测试）的程序员之前）编写 QA 测试计划是一个非常好的主意。

我更喜欢（确实是我的热情）这些独立的 QA 测试也可以使用[FitNesse](http://fitnesse.org/)、[Selenium](http://seleniumhq.org/)或[Watir](http://wtr.rubyforge.org/)等工具自动化。测试应该易于业务人员阅读、易于执行且完全明确。您应该能够在接到通知后立即运行它们，通常每天运行多次。

每个系统还需要手动测试。但是，手动测试不应该死记硬背。可以编写脚本的测试应该是自动化的。您只想在需要人为判断时将人置于循环中。因此，人类应该进行[探索性测试](http://www.satisfice.com/articles/what_is_et.shtml)，而不是盲目地遵循测试计划。

因此，对何时进行单元测试与手动测试的问题的简短回答是没有“对比”。*您应该首先*为您编写的绝大多数代码编写自动化单元测试。您应该有测试人员编写的自动化 QA 验收测试。你还应该练习战略探索性手动测试。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-02T06:37:25.540

单元测试并不意味着取代功能/组件测试。单元测试非常专注，因此它们不会影响数据库、外部服务等。集成测试可以做到这一点，但你可以让它们真正专注。最重要的是，在具体问题上，答案是它们不会取代那些手动测试。现在，自动化功能测试+自动化组件测试当然可以替代人工测试。这将在很大程度上取决于项目和方法，具体取决于谁将实际执行这些操作。

**更新 1：**请注意，如果开发人员正在创建自动化功能测试，您仍然希望检查这些测试是否具有适当的覆盖率，并酌情对其进行补充。一些开发人员使用他们的“单元”测试框架创建自动化功能测试，因为无论单元测试如何，他们仍然需要进行冒烟测试，这确实有助于使这些自动化:)

**更新 2：**单元测试对于小型项目来说并不过分，自动化冒烟测试或使用 TDD 也不是。让团队第一次在这个小项目上做任何这样的事情是矫枉过正的。做任何这些都有相关的学习曲线（特别是单元测试或 TDD），而且一开始并不总是会正确完成。您还希望有人参与其中一段时间​​，以帮助避免陷阱并克服一些在开始时并不明显的编码挑战。问题是团队拥有这些技能并不常见。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-02T06:36:44.263

只要可行，TDD 就是最好的方法。TDD 测试是自动的、可通过代码覆盖率量化的以及确保代码质量的可靠方法。

手动测试需要大量时间（与 TDD 相比）并且会出现人为错误。

没有什么说 TDD 意味着只有开发人员测试。开发人员**应该**负责编写一定比例的测试框架。QA 应该负责更大的部分。开发人员以他们想要的方式测试 API。QA 以我从未想过的方式测试 API，并且做的事情虽然看起来很疯狂，但实际上是由客户完成的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-02T06:37:43.543

我会说单元测试是程序员帮助回答这个问题的工具：

> 这段代码做我认为它做的事吗？

这是他们需要经常问自己的一个问题。程序员喜欢尽可能地自动化他们所做的任何事情。

单独的测试团队需要回答一个不同的问题：-

> 该系统是否按照我（和最终用户）的预期执行？还是让我大吃一惊？

有一大类错误与程序员或设计人员有关，他们对单元测试永远不会发现的正确性有不同的想法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-07T23:16:31.900

根据对各种项目的研究 (1)，单元测试发现**了 15..50%**的缺陷（平均为 30%）。这不会使它们成为您武器库中最糟糕的错误发现者，但也不是灵丹妙药。没有灵丹妙药，任何好的 QA 策略都包含多种技术*。*

* * *

自动化的测试运行得更频繁，因此它会更早地发现缺陷并极大地降低这些缺陷的总成本——这就是测试自动化的真正价值。

**明智地投资你的资源**，首先摘下低垂的果实。
我发现自动化测试最容易编写和维护小代码单元——隔离的函数和类。最终用户功能更容易手动测试 - 一个好的测试人员会发现许多超出所需测试的奇怪之处。不要让它们相互对抗，你需要两者。

* * *

**开发人员与测试**人员 众所周知，开发人员不擅长测试自己的代码：原因是心理、技术和最重要的经济因素——测试人员通常比开发人员便宜。但是开发人员可以尽自己的一份力量，让测试变得更容易。TDD 使测试成为程序构建的内在组成部分，而不仅仅是事后的想法，这就是 TDD 的真正价值。

* * *

关于测试的另一个有趣的点是：100% 的覆盖是没有意义的。从统计上看，错误遵循 80:20 规则——大多数错误都存在于一小段代码中。[一些研究](https://www.google.de/search?q=80-20-rules-building-software-smarter)表明，这甚至更加尖锐——测试应该集中在错误出现的地方。

* * *

(1) Programming Productivity Jones 1986 ua，引自 Code Complete, 2nd。编。但正如其他人所说，*单元*测试只是测试的一部分，集成、回归和系统测试也可以——至少部分地——自动化。

我对结果的解释：“许多眼睛”具有最好的缺陷检测，但前提是你有一些正式的过程可以让它们看起来真实。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-02T07:47:06.777

每个应用程序都经过测试。

一些应用程序以我的代码是否编译和代码是否**正常运行**的形式进行测试。

一些应用程序通过**单元测试进行测试**。一些开发人员对单元测试、TDD 和代码覆盖率很感兴趣。像所有事情一样，太多往往不是坏事。

一些应用程序很幸运能够通过**QA**团队进行测试。一些 QA 团队自动化他们的测试，其他人编写测试用例并手动测试。

Michael Feathers，他写道：[有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)，他写道，没有包含在测试中的代码是遗留代码。在您体验过 The [Big Ball of Mud](http://www.laputan.org/mud/)之前，我认为没有任何开发人员真正了解良好的应用程序架构和一套编写良好的单元测试的好处。

让不同的人进行测试是个好主意。可以查看应用程序的人越多，就越有可能涵盖所有场景，包括您不打算发生的场景。

TDD 最近的名声很差。当我想到**TDD**时，我会想到教条式的开发人员在编写实现之前精心编写测试。虽然这是真的，但被忽略的是通过编写测试，（首先或不久之后）开发人员从消费者的角度体验方法/类。设计缺陷和缺点立即显现出来。

我认为**项目的规模**无关紧要。重要**的是项目的生命周期**。一个项目的生命周期越长，除编写它的人之外的开发人员就越有可能在它上面工作。单元测试是应用程序期望的文档——某种手册。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-02T06:40:14.737

单元测试只能到此为止（所有其他类型的测试也可以）。我将测试视为一种“筛选”过程。每种不同类型的测试都像一个筛子，您放置在开发过程的出口下方。出来的东西（希望）主要是您的软件产品的功能，但它也包含错误。这些虫子有许多不同的形状和大小。

有些虫子很容易找到，因为它们很大，或者基本上会被任何类型的筛子夹住。另一方面，有些虫子光滑而有光泽，或者侧面没有很多钩子，所以它们很容易从一种筛子中滑过。不同类型的筛子可能有不同形状或大小的孔，因此它能够捕捉不同类型的虫子。您拥有的筛子越多，您捕获的虫子就越多。

显然，您使用的筛子越多，功能通过的速度就越慢，因此您将要尝试找到一种快乐的媒介，在这种媒介上，您不会花费太多时间进行测试发布任何软件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-02T07:22:53.373

自动化单元测试的最佳点 (IMO) 是，当您更改（改进、重构）现有代码时，很容易测试您没有破坏它。一次又一次地手动测试所有内容会很乏味。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-02T12:46:18.180

> 单元测试对于 API 需要具有工业实力的大型项目似乎很有效，但对于较小的项目来说，这似乎有点矫枉过正。

移动 API 的单元测试确实很脆弱，但单元测试在应用程序等无 API 项目上也很有效。单元测试旨在测试项目所使用的单元。它允许确保每个单元按预期工作。在修改 - 重构 - 代码时，这是一个真正的安全网。

就项目的规模而言，确实为一个小项目编写单元测试可能有点矫枉过正。在这里，我将小项目定义为一个小程序，可以手动测试，但非常容易和快速，不超过几秒钟。一个小项目也可以增长，在这种情况下，手头有单元测试可能是有利的。

> 让开发人员和测试人员成为不同的人是有价值的，这两个群体之间的紧张关系最终有助于创造出伟大的产品。

无论开发过程是什么，单元测试并不是要取代任何其他阶段的测试，而是在开发阶段用测试来补充它们，这样开发人员就可以得到非常早的反馈，而不必等待正式的构建和正式的测试. 通过单元测试，开发团队交付的代码可以在下游工作，而不是无错误的代码，而是可以由测试团队测试的代码。

总而言之，当它真的很容易，或者编写单元测试太复杂时，我会手动测试，并且我的目标不是100％的覆盖率。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-07T21:15:58.070

您的问题似乎更多是关于自动化测试与手动测试。单元测试是自动化测试的一种形式，但却是一种非常具体的形式。

不过，您关于拥有单独的测试人员和开发人员的评论是正确的。但这并不意味着开发人员不应该进行某种形式的验证。

单元测试是开发人员快速获得有关他们正在做什么的反馈的一种方式。他们编写测试以快速运行小单元代码并验证其正确性。从某种意义上说，它并不是真正的测试，就像编译器的语法检查不是测试一样，您似乎使用了测试这个词。单元测试是一种开发技术。使用这种技术编写的代码可能比没有使用这种技术编写的代码质量更高，但仍需要通过质量控制。

关于测试部门的自动化测试与手动测试的问题更容易回答。每当项目变得足够大以证明编写自动化测试的投资是合理的时，您都应该使用自动化测试。当您有很多小的一次性测试时，您应该手动进行。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-13T20:48:23.363

在 QA 和开发这两个方面，我断言应该始终有人手动测试您的代码。即使您使用的是 TDD，作为开发人员，您也可能无法通过单元测试涵盖很多内容，或者可能不会考虑测试。这尤其包括可用性和美学。美学包括正确的拼写、语法和输出格式。

**现实生活中的例子1：**

一位开发人员正在为经理创建我们在 Intranet 上显示的报告。有很多公式，开发人员在代码提交 QA 之前测试了所有公式。我们验证了这些公式确实产生了正确的输出。我们几乎立即要求开发部门纠正一个事实，即数字在紫色背景上以粉红色显示。

**现实生活中的例子2：**

我在业余时间使用 TDD 编写代码。我喜欢认为我对它进行了彻底的测试。有一天，当我打开一个消息对话框时，我的妻子走过，读了它，并立即问：“那条消息到底是什么意思？” 我认为该消息相当清楚，但是当我重新阅读它时，我意识到它是在谈论树控件中的父节点和子节点，并且可能对普通用户没有意义。我改写了这条信息。在这种情况下，这是一个可用性问题，我自己的测试没有发现。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-04-15T20:39:48.650

我相信可以将 QA/测试人员的专业知识（定义测试/验收标准）与使用开发人员拥有的 API（与 GUI 或 HTTP/消息传递接口相反）来驱动被测应用程序的 TDD 概念相结合.

拥有独立的 QA 人员仍然很重要，但我们不再需要庞大的手动测试团队来使用 FitNesse、Selenium 和 Twist 等现代测试工具。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-03-08T10:31:31.077

只是为了澄清许多人似乎错过的东西：

TDD，在 *“编写失败的测试、编写代码以使测试通过、重构、重复”的意义上，在编写***单元**测试 时通常是最有效和最有用的。

您只围绕您正在处理的代码的类/函数/单元编写单元测试，使用模拟或存根来抽象出系统的其余部分。

“自动化”测试通常是指更高级别的集成/验收/功能测试——你*可以*围绕这个级别的测试进行 TDD，它通常是大量 ui 驱动代码的唯一选择，但你应该知道这种测试是更脆弱，更难编写测试优先，并且无法替代单元测试。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-01-19T16:40:26.727

作为开发人员，TDD 让我相信我对代码所做的更改会产生预期的结果，并且只会产生预期的结果，因此将 TDD 比喻为“安全网”是有用的；在没有它的情况下更改系统中的任何代码，您可能不知道您可能还破坏了什么。

开发人员和测试人员之间的工程紧张确实是个坏消息。开发人员培养了一种“好吧，测试人员得到报酬是为了发现错误”的心态（导致懒惰），而测试人员——感觉好像如果他们没有发现任何错误，他们就没有被看到去做他们的工作——抛出尽可能多地解决琐碎的问题。这是对每个人时间的严重浪费。

以我的拙见，最好的软件开发是测试人员也是开发人员，单元测试和代码作为结对编程练习的一部分一起编写。这立即使两个人站在问题的同一边，朝着同一个目标共同努力，而不是让他们彼此对立。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-07-17T12:05:11.687

单元测试与功能测试不同。而就自动化而言，通常应该考虑当测试周期将重复超过 2 或 3 次时......它是回归测试的首选。如果项目很小或者不会经常更改或更新，那么手动测试是一个更好且成本效益更低的选择。在这种情况下，自动化将证明脚本编写和维护成本更高。

# sql - 是否可以取代 mysql 中的 ORDER BY 子句？

> ID：601441
> 
> 赞同：0
> 
> 时间：2009-03-02T06:33:50.930
> 
> 标签：sql, mysql

我的意思是......如果我有一个名为“特殊”的列，并且该列中标记为 1 的行将出现在结果的顶部，即使 ORDER BY 子句会将它们列出在其他地方。例如，我按日期按降序显示项目。标记为 special=1 的项目将出现在结果的顶部，无论其时间戳如何。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T06:37:12.297

您可以在 ORDER BY 子句中放置多个列

```
SELECT * from your_table ORDER BY special DESC, date_col DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T06:36:01.410

ORDER BY 'special' 首先（降序）然后按您的其他标准。

# python - 我应该使用 GeoDjango 来绘制平面图吗？

> ID：601442
> 
> 赞同：7
> 
> 时间：2009-03-02T06:34:21.023
> 
> 标签：python, django, mapping, geodjango

我想创建具有可点击区域的内部空间的平面图。我的第一个想法是研究 GeoDjango，因为它是 Django*的*地图应用程序。但考虑到依赖关系、学习曲线和整体复杂性，我担心我可能会试图用火箭筒打击苍蝇。

我应该为此使用 GeoDjango，还是应该将整数列表存储在数据库字段中？

**编辑：**平面图相当简单；一组墙壁和工作站，能够定义工作站占用多少空间的区域，从而允许定义办公室以及开放式布局。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-04T21:23:00.810

恕我直言，使用 GeoDjango 进行平面图并不是一个坏主意。但是，如果您的数据没有太大变化并且数据量（房间、区域、工作站……）不是很大，那么您可能不需要数据库和完整的 GeoDjango 堆栈。

一个更简单的解决方案是直接使用[OpenLayers](http://www.openlayers.org)和一个（可能是扫描的）平面图的图像作为背景层。OpenLayers 还允许您定义处理“鼠标悬停”或单击事件的区域和点（标记）。

将 OpenLayers 用于平面图的一个示例是[通过 Open Layers 的办公室平面图](http://www.laudontech.com/openlayers/openlayersv1.php5)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-05T08:20:04.957

我会说为此目的使用 GeoDjango 绝对是矫枉过正。

它可以简单地使用图像映射或 Canvas/SVG 或 Flash 来实现额外的漂亮点:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T12:02:39.167

平面图多久更改一次？根据您的描述，带有图像映射的简单图像就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T12:47:46.553

使用 GeoDjango 的一个很好的动机可能是：

```
the access to the geographical cooridinates backend, 
```

并且您不会只生成具有任意比例的美丽图像，而是生成对象，**`geo-oriented`**如果您打算将创建的计划用于**`indoor navigation`**.

我会考虑强烈使用 GeoDjango，以及一些支持 GeoJSON 的 OpenLayers。

# .net - 从数据库中填充大量数据

> ID：601463
> 
> 赞同：0
> 
> 时间：2009-03-02T06:49:01.207
> 
> 标签：.net, sql-server, n-tier-architecture

我开发了一个 3 层应用程序，但我遇到了关于从数据库填充数据的问题。我的应用程序有一个从数据库查询大数据的窗口，这个过程需要很长时间。（我的客户端离服务器很远，它之间的连接是 128 KB/s）。

然后我想到了解决这个问题的解决方案。解决方案是每 y 秒填充 x 条数据记录。（例如：首先填充 10 条记录以显示在 UI 上，然后每 5 秒显示更多 10 行）。

这是解决这个问题的好方法吗？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T07:21:34.997

如果是出于显示目的，您应该使用分页。这有一个变体，当用户尝试使用滚动条访问更多信息时，UI 会抓取下一个“页面”记录。如果您需要聚合数据，请在查询中进行，这样整个数据就不会通过网络传输。如果您真的/绝对必须获取整个数据并对其进行一些处理，请考虑它是否太大而无法一次加载。在这种情况下，抓取数据块，运行相关进程，然后抓取另一个块（依此类推）。无论如何，您需要使用不会阻塞 UI（线程/异步操作）的方法来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T07:28:03.813

Freddy 打败了我，但举个例子，你会注意到很多数据库查看器只填充视野中所需的数据，当你使用滚动条时，它会自动抓取下一页/数据视图。

如果您考虑网站，他们几乎总是会分页数据，以免一次全部加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T06:53:51.290

是否可以选择进行延迟加载（因此您将按需加载数据，而不是一次全部加载）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T06:56:56.023

也许如果应用程序 UI 允许，在多个页面中显示记录。

我还建议使用异步调用来检索数据，这样您就不会在查询时冻结应用程序（如果是桌面应用程序）。

如果是 Web 应用，请考虑使用 AJAX。

# asp.net - 您正在查看的网页正在尝试在 Internet Explorer 中关闭此窗口警告

> ID：601465
> 
> 赞同：2
> 
> 时间：2009-03-02T06:49:33.843
> 
> 标签：asp.net, internet-explorer

我有一个登录页面，如果登录成功，我会打开一个主页作为弹出窗口。在 IE 6.0 中，我没有遇到问题，但 IE.7.0 向我显示警告“您正在查看的网页正在尝试关闭此窗口。做你想关闭窗口吗？”。当我添加代码来阻止它时，现在 IE 7.0 不给我警报但 IE 6.0 给出了同样的问题。我该如何解决这个问题？

```
Dim strScript As String = "<script language= ""javascript"">window.open('" & Class.cls_LU_PARAMETRE.Deger("START_PAGE") & "','" & Now.ToString("ddMMyyyyHHmmss") & "','resizable=1,width=1015,height=700,left=0,top=0,scrollbars=1,status=1');</script>"
Me.RegisterStartupScript("start", strScript) 
```

我添加此代码以阻止 IE 7.0 警告

```
Dim s As String
s = "<script language= ""javascript"">"
s += " {var oMe = window.self;oMe.open('','_self',''); oMe.close();}"
s += " </script>"""
Me.Page.RegisterStartupScript("close", s)

'******************** 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-02T06:52:12.433

这是一项安全功能。毕竟，如果您访问的某个网站决定关闭*您的*浏览器窗口，您会怎么想？

避免这种情况的最正确方法是从 javascript 打开浏览器窗口。当您这样做时，允许父窗口在不询问用户的情况下关闭窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-10-20T15:01:12.493

如果 javascript 代码打开窗口，则 Javascript 可以关闭窗口。

使用javascript打开窗口

```
<script type="text/javascript">
    function openWin(url, target, args){
        if(target && args)window.open(url, target, args);
        else if(target)window.open(url, target);
        else window.open(url);
    }
</script>
<a href="javascript:openWin('close.html');">Open window</a>
<a href="close.html" target="_self">Open window that won't close</a> 
```

使用javascript关闭窗口

```
<a href="javascript:if(window.opener)window.close();">Close window</a> 
```

很简单，可以在IE6、7、8、9、Chrome、FF、Opera、Safari等中运行……我测试过了

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-02-18T13:34:23.317

```
 function openpopup()
 {

     {
         var closeurl = "Default2.aspx";
        var popurl = "FrmUserLoginpage.aspx";
        winpops = window.open(popurl, "HMSAJAX", "toolbar=no,menubar=no, resizable=yes,status=yes,scrollbars=yes");
        window.open('', '_self', '');
        window.close();

    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T06:55:42.987

您可以通过设置 self.opener 属性在 IE 中解决此问题：

```
self.opener = this;
self.close(); 
```

编辑：看起来 MS 可能已经修复了这个错误（它一直是一个错误利用）。除非您最初自己打开窗口，然后从打开它的同一页面将其关闭，否则看起来您很不走运。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-01-17T07:53:54.590

另一种解决方案

```
window.opener = "";
window.close(); 
```

# java - 我从哪里开始编写/使用 3D 物理模拟引擎？

> ID：601468
> 
> 赞同：2
> 
> 时间：2009-03-02T06:53:04.443
> 
> 标签：java, simulation, physics-engine

我需要用 Java 编写一个非常简单的 3D 物理模拟器，立方体和球体相互碰撞，仅此而已。我从来没有做过这样的事情，我应该从哪里开始？关于如何完成的任何文档？我可以重复使用的任何库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-02T07:11:10.950

[Grant Palmer](http://books.google.com/books?id=oVLDoO-V67cC&printsec=frontcover&dq=physics+for+game+programmers#PPP5,M1)（非 Java）的游戏程序员物理学

[Phys2D](http://www.cokeandcode.com/phys2d/)（Java 代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T07:10:19.127

假设您想开始如何做，最好的开始方法是使用笔和纸。开始定义应用程序的焦点（如实体球体、立方体等，重力、碰撞等规则，决定对象的层次结构等......）

如果您知道如何做到这一点，并且想要了解技术方面的入门知识，那么 Swing 是用 Java 制作 UI 的不错选择。

也看看这里：[http ://www.myphysicslab.com/](http://www.myphysicslab.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T18:08:52.150

NeHe 的第 39 课是一个很好的起点，它是用 C++ 编写的，但理论很容易理解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-09T21:18:42.847

一个不错的 java 物理库是 jmephysics ( [http://www.jmonkeyengine.com/jmeforum/index.php?topic=6459](http://www.jmonkeyengine.com/jmeforum/index.php?topic=6459) )；它非常易于使用，位于 ODE ( [http://www.ode.org/](http://www.ode.org/) ) 和 jmonkeyengine ( [http://www.jmonkeyengine.com](http://www.jmonkeyengine.com) ) 之上，为您提供了一个场景图 ( [http://en.wikipedia ) .org/wiki/Scene_graph](http://en.wikipedia.org/wiki/Scene_graph)），这又是一个非常简单的 3d 应用程序之外的任何东西都需要的东西。

不过我已经有一段时间没有使用它了，并且看到它们自 2007 年底以来就没有发布过，所以不确定社区现在有多活跃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T07:19:27.280

首先为物理对象定义一个类怎么样？它具有位置、速度、质量以及可能具有其他特征（如形状、弹性等）的子类。

然后创建一个宇宙（类）来放置这些物理对象。听起来很有趣 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T07:35:22.797

如果您只需要模拟球体/圆和立方体，那么您只需要一点向量数学。

例如，为了模拟一个简单的撞球游戏，每个球（球体）都有一个位置、3d 线速度和 3d 线加速度矢量。您的模拟将涉及许多不断更新每个球的小帧。如果两个或更多球相撞，您只需将向量相加并计算所有球的新速度。例如，如果一个球撞到墙上，所需要的只是翻转球的标志让它反弹回来......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T07:38:41.010

如果您想从头开始执行此操作，即编写自己的物理引擎，则必须了解背后的数学原理才能完成此操作。如果你有相当好的数学背景，你就会有一个先机，否则就会有一个陡峭的学习曲线。

您可以从这个社区论坛开始收集有关如何完成的信息： [gamedev.net](http://www.gamedev.net/community/forums/forum.asp?forum_id=20)

当然，如果您不想编写自己的代码，您可以使用像[Ogre这样的开源引擎。](http://www.ogre3d.org/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-02T17:59:09.397

查看子弹物理学。 [bulletphysics.com](http://www.bulletphysics.com/Bullet/wordpress/)是论坛或[查看 Sourceforge 上的项目](http://sourceforge.net/projects/bullet/)。

# python - 从字典创建 NumPy 数组的最佳方法？

> ID：601477
> 
> 赞同：8
> 
> 时间：2009-03-02T06:57:43.417
> 
> 标签：python, numpy

我刚从 NumPy 开始，所以我可能会遗漏一些核心概念......

从值是列表的字典创建 NumPy 数组的最佳方法是什么？

像这样的东西：

```
d = { 1: [10,20,30] , 2: [50,60], 3: [100,200,300,400,500] } 
```

应该变成这样的东西：

```
data = [
  [10,20,30,?,?],
  [50,60,?,?,?],
  [100,200,300,400,500]
] 
```

我将对每一行做一些基本的统计，例如：

```
deviations = numpy.std(data, axis=1) 
```

问题：

*   从字典创建 numpy.array 的最佳/最有效方法是什么？字典很大；几百万把钥匙，每把钥匙大约有 20 件物品。

*   每个“行”的值的数量是不同的。如果我理解正确 numpy 想要统一大小，那么我应该为缺失的项目填写什么以使 std() 满意？

更新：我忘了提一件事——虽然 Python 技术是合理的（例如，循环数百万个项目很快），但它仅限于单个 CPU。Numpy 操作可以很好地扩展到硬件并使用所有 CPU，因此它们很有吸引力。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-02T08:02:56.287

您无需创建 numpy 数组即可调用 numpy.std()。您可以在字典的所有值上循环调用 numpy.std() 。该列表将即时转换为 numpy 数组以计算标准变化。

这种方法的缺点是主循环将在 python 中而不是在 C 中。但我想这应该足够快：你仍然会以 C 的速度计算 std，并且你会节省大量内存，因为你不会必须在具有可变大小数组的地方存储 0 个值。

*   如果您想进一步优化这一点，您可以将您的值存储到一个 numpy 数组列表中，以便您只执行一次 python 列表 -> numpy 数组转换。
*   如果你发现这仍然太慢，尝试使用 Psycho 来优化 python 循环。
*   如果这仍然太慢，请尝试将[Cython](http://www.cython.org/)与 numpy 模块一起使用。本[教程](http://wiki.cython.org/tutorials/numpy)声称图像处理的速度得到了令人印象深刻的改进。或者简单地在 Cython 中编写整个 std 函数（有关sum 函数的基准和示例，请参见[this ）](http://prabhuramachandran.blogspot.com/2008_09_01_archive.html)
*   Cython 的替代方法是将[SWIG](http://www.swig.org/)与[numpy.i](http://projects.scipy.org/scipy/numpy/browser/trunk/doc/swig/numpy.i)一起使用。
*   如果您只想使用 numpy 并在 C 级别计算所有内容，请尝试将所有相同大小的记录分组到不同的数组中，并在每个数组上调用 numpy.std()。它应该类似于以下示例。

复杂度为 O(N) 的示例：

```
import numpy
list_size_1 = []
list_size_2 = []
for row in data.itervalues():
    if len(row) == 1:
      list_size_1.append(row)
    elif len(row) == 2:
      list_size_2.append(row)
list_size_1 = numpy.array(list_size_1)
list_size_2 = numpy.array(list_size_2)
std_1 = numpy.std(list_size_1, axis = 1)
std_2 = numpy.std(list_size_2, axis = 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T20:36:03.230

虽然这里已经有一些非常合理的想法，但我相信以下值得一提。

用任何默认值填充缺失的数据会破坏统计特征（std 等）。显然这就是为什么 Mapad 提出了将相同大小的记录分组的好技巧。它的问题（假设手头没有任何关于记录长度的先验数据）是它涉及比直接解决方案更多的计算：

1.  至少*O(N*logN)* 'len' 调用和比较以使用有效算法进行排序
2.  *O(N)*检查列表的第二种方式以获得组（它们在“垂直”轴上的开始和结束索引）

使用 Psyco 是个好主意（它非常容易使用，所以一定要试一试）。

似乎最佳方法是采用 Mapad 在项目符号 #1 中描述的策略，但进行了修改 - 不是生成整个列表，而是遍历字典，将每一行转换为 numpy.array 并执行所需的计算。像这样：

```
for row in data.itervalues():
    np_row = numpy.array(row)    
    this_row_std = numpy.std(np_row)
    # compute any other statistic descriptors needed and then save to some list 
```

在任何情况下，python 中的几百万个循环都不会像预期的那样花费很长时间。此外，这看起来不像是例行计算，所以谁在乎它是否需要额外的秒/分钟，如果它偶尔运行一次甚至只是一次。

* * *

Mapad 建议的通用变体：

```
from numpy import array, mean, std

def get_statistical_descriptors(a):
    if ax = len(shape(a))-1
    functions = [mean, std]
    return f(a, axis = ax) for f in functions

def process_long_list_stats(data):
    import numpy

    groups = {}

    for key, row in data.iteritems():
        size = len(row)
        try:
            groups[size].append(key)
        except KeyError:
            groups[size] = ([key])

    results = []

    for gr_keys in groups.itervalues():             
        gr_rows = numpy.array([data[k] for k in gr_keys])       
        stats = get_statistical_descriptors(gr_rows)                
        results.extend( zip(gr_keys, zip(*stats)) )

    return dict(results) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:11:50.730

**numpy 字典**

您可以使用结构化数组来保留通过键（如字典）来寻址 numpy 对象的能力。

```
import numpy as np

dd = {'a':1,'b':2,'c':3}
dtype = eval('[' + ','.join(["('%s', float)" % key for key in dd.keys()]) + ']')
values = [tuple(dd.values())]
numpy_dict = np.array(values, dtype=dtype)

numpy_dict['c'] 
```

现在将输出

```
array([ 3.]) 
```

# css - css float 不会调整大小以适应新内容

> ID：601484
> 
> 赞同：0
> 
> 时间：2009-03-02T07:04:37.130
> 
> 标签：css

我有一个漂浮的表格。当出现错误时，通过 jquery，我将一些内容添加到表单中的 ap 中。但是，表单不会垂直调整大小以适应新内容。当浮动元素中的内容发生变化时，我需要做些什么来调整浮动元素的大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T07:11:02.853

您是否`height`应用了其他 CSS 样式以防止其垂直调整大小？

另外，它发生在什么浏览器中？这可能是浏览器错误。

如果

也是浮动的，那么根据样式（位置：绝对），它的尺寸可能不会被认为是“在”形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T07:11:45.303

内容是否设置了高度？当浮动打开时，默认将高度固定为行高。可能是您在表单上的宽度设置得太低，并且文本在包含您的表单的块元素中逐渐消失 尝试弄乱 line-height 属性，看看会得到什么。此外，绝对位置会惹恼你（正如理查德在下面提到的）

另外，考虑最小高度。这在 IE6 中不起作用，但您可以用 IE6 中的高度代替，它在某些情况下类似于 min-height。

发布您的代码，以便我可以更具体。

# java - 多核场景下编写java程序的技巧

> ID：601491
> 
> 赞同：16
> 
> 时间：2009-03-02T07:10:42.060
> 
> 标签：java, performance, concurrency, multicore

关于多核和java似乎有很多大惊小怪的。虽然有人说对 java 的支持不够[好](http://r-c-r.blogspot.com/2008/03/concurrency-support-in-java7-is-not.html)，但它似乎绝对是一个值得期待的领域。似乎有[许多](http://www.sdtimes.com/link/32943) [技术](http://www.javaworld.com/javaworld/jw-11-2006/jw-1121-thread.html)可以提高并发程序的性能。

任何关于在多核场景中编程的提示/建议都值得赞赏。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-02T07:17:56.817

查看 Java 5 中添加的新 Java 并发工具（在[`java.util.concurrent`package](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/package-summary.html)中）。它提供了比常规 s 更高级的功能，`Thread`这将使编写并发应用程序更容易（并且更不容易出错）。[课程： Java 教程的](http://java.sun.com/docs/books/tutorial/index.html)并发[性](http://java.sun.com/docs/books/tutorial/essential/concurrency/)将是一个很好的起点。

到目前为止，我只使用了[`ExecutorService`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ExecutorService.html)，它允许可以产生[线程池](http://java.sun.com/docs/books/tutorial/essential/concurrency/pools.html)[`Runnable`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Runnable.html)，新任务可以以s或s为单位移交给它[`Callable`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Callable.html)（执行后可以返回值作为[`Future`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Future.html)s），实际的线程代码由处理`ExecutorService`. _

例如，使用 2 个线程的线程池执行一些计算，并获得结果可以很简单：

```
ExecutorService es = Executors.newFixedThreadPool(2);

Future f1 = es.submit(new Callable<Integer>() {
    public Integer call()
    {
        // Do some processing...
        return someInteger;
    }
});

Future f2 = es.submit(new Callable<Integer>() {
    public Integer call()
    {
        // Do some processing...
        return someInteger;
    }
});

Integer firstInteger = f1.get();
Integer secondInteger = f2.get(); 
```

在上面的（未经测试的）代码中，我所要担心的是制作几个`Callable`s 并将[`submit`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#submit(java.util.concurrent.Callable))其添加到 the`ExecutorService`和稍后，使用`Future`s 来检索结果。

关键是，一旦调用了 的[`get`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Future.html#get())方法`Future`，如果处理没有完成，程序将停止，直到`Future`可以检索到的结果。所以，在这个例子中，即使 的结果在`f2`之前是可用`f1`的，程序也会一直等到 的结果`f1`可用。

在阅读材料方面，我即将购买的书籍清单是Brian Goetz 的[Java Concurrency in Practice](http://jcip.net/)，当提到 Java 的并发性时，它经常出现。

Java 5 文档中的[Concurrency Utilities](http://java.sun.com/j2se/1.5.0/docs/guide/concurrency/)页面也提供了更多信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-02T07:48:05.653

最好的提示是：*正确同步！*

这似乎有些明显，但对[Java 内存模型](http://en.wikipedia.org/wiki/Java_Memory_Model)的理解至关重要，特别是**volatile**和**final**字段如何工作，**同步**如何充当互斥锁*和**内存屏障*，以及新的`java.util.concurrent`构造

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-02T07:28:19.927

总是一个很好的提示——如果你的大多数类都是不可变的，那么一切都会变得容易得多，因为不变性消除了担心从多到少关注的地方的锁的需要。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-02T16:31:06.253

查看即将推出的[fork-join 框架](http://www.ibm.com/developerworks/java/library/j-jtp11137.html?ca=drs-)。fork-join 框架使开发人员能够在多核架构上实现细粒度的并行性。

此外，您可能想查看基于 JVM 的语言，如[Clojure](http://clojure.org/)，它们声称使多核并行编程更容易。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-02T16:35:56.337

作为 Java 自己的并发共享内存方法的替代方案，您还可以在 Java 之上[使用 Scala](http://java.dzone.com/articles/scala-threadless-concurrent)研究基于 Actor 的并发，它为并发编程提供了一个更简单的模型。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-02T08:08:15.027

查看来自 Devoxx 2008 的 Brian Goetz 的演讲[From concurrent to Parallel](http://wiki.parleys.com/display/PARLEYS/Home#talk=24576007;title=From%20Concurrent%20to%20Parallel;slide=1)。那里没有太多技巧，但它让您了解 Java 并发的发展方向。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-09-24T01:39:32.547

您可以尝试使用并行模式库，例如[Skandium](http://skandium.niclabs.cl) for Java。只需选择您想要的并行模式并填写缺失的钩子即可。

Skandium 支持的一些模式是：

*   主从：`Farm<P,R>(nested);`
*   管道：`管道（stage1，stage2）；
*   对于迭代：`For<P,R>(nested, i);`
*   条件迭代：`While<P,R>(nested, condition);`
*   条件分支：`If<P,R>(condition, trueCase, falseCase);`
*   地图减少：`Map<P,R>(split, nested, merge);`
*   具有不同代码路径的 Map-reduce：`Fork<P,R>(split, nested, merge);`
*   递归分而治之：`DaC<P,R>(condition, split, nested, merge);`

所有模式都可以嵌套和组合，因此您可以在分而治之的情况下拥有农场等。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-02T10:13:16.910

最好的实用技巧书籍是[Java Concurrency in Practice](http://jcip.net/)。这是所有 Java 程序员的必读之书，即使是那些认为他们不进行任何并发编程的人，因为 Java 在其各种库中具有许多隐藏的线程（想到 Swing，与 servlet 相同）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-12T03:10:09.370

我的提示：了解 Java 内存模型（从 JDK 5 及更高版本开始）。大多数人不知道，同步、volatile 和 final 在正常的多线程范围之外还有一个额外的含义。

Java 适用于多 CPU 和多核。如果你对它进行了正确的编程并投入了一些精力，你就会得到一个高度并发的服务器系统来利用 8 核，包括大量的同步等。我们对此非常满意……JDK6 比 JDK5 好，而且下面的一切都在多 CPU 机器上很烂。

# wpf - 以编程方式打印 FixedDocument

> ID：601496
> 
> 赞同：1
> 
> 时间：2009-03-02T07:12:28.327
> 
> 标签：wpf, printing

我正在使用带有数据绑定的 WPF FixedDocument 来生成简单的发票报告。在软件本身内部查看时效果完美。

但我想一键打印一系列发票。当我选择 XPS 编写器时，以下代码完美运行（快速'n 脏，只是直接在视图模型中一张一张地加载发票，用于测试目的），但打印到真实打印机时无法正确打印。我看不到任何绑定到报告的数据。线条等所有图形元素都在那里，但没有数据。（当我使用相同的按钮打印到 de xps writer 打印机时，所有数据都存在，并且正确......）

有任何想法吗？

```
 private void ExecutePrintCommand(object sender, ExecutedRoutedEventArgs args)
    {
        var invs = args.Parameter as IList<object>;
        using (CompuDataContext db = new CompuDataContext())
        {
            DataLoadOptions dl = new DataLoadOptions();
            dl.LoadWith<Invoice>(f => f.Invoicelines);
            db.LoadOptions = dl;

            ReportViewer viewer = new ReportViewer();
            PrintDialog dlg = new PrintDialog();
            if (dlg.ShowDialog() == true)
            {
                PrintQueue q = dlg.PrintQueue;
                foreach (var o in invs)
                {

                    InvoiceListDisplay inv = o as InvoiceListDisplay;
                    Invoice invoice = db.Invoices.Single(f => f.Id == inv.Id);

                    viewer.DataContext = new InvoicePrintViewModel(invoice);

                    XpsDocumentWriter xpsdw = PrintQueue.CreateXpsDocumentWriter(q);
                    xpsdw.Write(viewer.Document);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T07:26:27.747

mmkay，所以我自己在这里找到了答案:)

[这对我有帮助](https://stackoverflow.com/questions/449036/why-am-i-losing-my-databinding-when-printing-to-an-xpsdocument)（有人知道背后的“原因”是什么吗？错误？）

PS：在流程文档中，我遇到了同样的问题，但无法在那里解决。有任何想法吗？

# java - 我应该如何提供压缩网页？

> ID：601497
> 
> 赞同：0
> 
> 时间：2009-03-02T07:12:59.543
> 
> 标签：java, tomcat, zip, webpage, multipart

**背景：**
我们的软件以常见的可疑格式（HTML、PDF 等）为客户生成报告，每个报告都可以包含该报告独有的图表和其他图形。对于 PDF，一切都保存在一个地方 - PDF 文件本身。HTML 比较棘手，因为报告基本上是超过 1 个文件的总和。这些文件可通过 Tomcat 通过 HTTP 获得。

**问题：**
我真的很想有一个整洁的环境并将 HTML 报告包装到一个文件中。有 MTHML、数据 URI 和几种格式需要考虑。[这个很好的问题](https://stackoverflow.com/questions/260058/whats-the-best-file-format-for-saving-complete-web-pages-images-etc-in-a-sin)表明，由于缺乏对这些格式的跨浏览器支持，ZIP 是一个很好的解决方案。这对我很有吸引力，因为我还可以将 zip 作为“您可以通过电子邮件发送的 HTML 报告”选项提供下载。（过去，用户抱怨在他们开始通过电子邮件发送 HTML 报告时丢失了图形）

解决方案似乎很简单。一个请求进来了，我找到合适的 zip，在网络服务器的某个地方解压它，将请求指向新的 HTML 文件，大约一天后再次整理一切。

但有些事情似乎不太对劲。我有一种直觉，这不是一个好的解决方案，它有一些根本性的问题，或者可能存在我目前看不到的更好的方法。

任何人都可以建议这是好还是坏，并提供替代解决方案？

**编辑以获取更多背景信息！**
报告需要保留在服务器上。我们的客户是站点的用户，单个报告的可见性可能与站点中的每个人一样广泛。创建过程涉及用户选择报告的标准，并将其提交到服务器以进行创建。从数据库中提取数据并构建文档。占位符记录进入数据库，文档本身存储在文件服务器的某个地方。我希望更整洁的是“文件服务器上的文档”部分 - 压缩也意味着使用的磁盘空间更少！。创建报告后，任何可以看到它的人都可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T07:21:00.523

我原以为计划是 zip 文件最终在*客户端*上，而不是留在服务器上。

在不了解您的架构的情况下，我猜想采用这样的方法：

*   用户请求报告
*   服务器将报告显示为 HTML
*   用户可能会调整一些参数，重复请求
*   服务器将报告显示为 HTML（重复直到用户满意）
*   在每个 HTML 报告中，都有一个“以 zip 格式下载”链接
*   用户点击链接
*   服务器重新生成报告，将其存储在 zip 文件中并提供给用户
*   用户将 zip 文件保存在某处，通过电子邮件发送等 - 根本不涉及服务器

当然，这依赖于能够重新运行报告以生成 zip 文件。每次生成一些 HTML 时，您*都可以生成一个 zip 文件，但如果您**不需*要这样做，那就太浪费了，并且需要清理等。

也许我误解了你……如果这听起来不合适，你能更新你的问题吗？

编辑：好的，看到您的问题的更新后，我很想将每个报告的文件存储在单独的目录中（例如，使用 GUID 作为目录名称）。许多文件系统支持文件系统级别的压缩，因此“过早压缩”可能不会节省太多磁盘空间，并且会使提取单个文件变得更加困难。然后，如果用户请求 zip，您只需要在那个时候构建 zip 文件，可能只是在内存中，然后再提供它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T10:10:00.007

> 创建报告后，任何可以看到它的人都可以使用它。

这很能说明问题 - 这意味着报告是可共享的，并且您还希望“缓存”报告以便不必重新生成。

做到这一点的一种方法是找出一种将参数散列在一起的方法，这样不同的参数组合（导致不同的报告）散列到不同的值。然后，您可以使用这些散列作为密钥，以 zip 格式存储在磁盘中的大量报告缓存中（可能文件名是散列？）

这样，每次有人请求报告时，您都会对参数进行哈希处理，并检查该报告是否已经生成，然后以 zip 下载的形式提供，或者您可以将其解压缩并按照正常方式提供 html . 如果报告不存在，生成它并压缩它，确保以后能够识别它是由这些参数生成的（即，记录散列）。

需要注意的一件事是文件系统写入往往是非原子的，所以如果你不小心，你会重新生成报告两次，这很糟糕，但幸运的是，在你的情况下，并没有*太大*的危害。为避免，您可以使用单个线程来执行此操作（较慢），或实施某种锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T07:37:53.617

您不需要在文件系统上物理创建 zip 文件。在内存中创建 zips 并没有错，将其流式传输到浏览器并让 GC 负责释放临时 zip 占用的内存。这当然会引入问题，因为每次发出请求时不断地重新创建 zip 可能效率低下。但是根据您的需要等来判断这些事情。

# android - 如何从我的 Android 应用程序中获取崩溃数据？

> ID：601503
> 
> 赞同：756
> 
> 时间：2009-03-02T07:17:27.253
> 
> 标签：android, crash, stack-trace

如何从我的 Android 应用程序中获取崩溃数据（至少是堆栈跟踪）？至少在通过电缆检索我自己的设备上工作时，但理想情况下是从我在野外运行的应用程序的任何实例中进行，以便我可以改进它并使其更加可靠。

* * *

## 回答 #1

> 赞同：358
> 
> 时间：2010-05-18T08:52:09.280

您可以尝试[ACRA（Android 应用程序崩溃报告）](https://github.com/ACRA/acra)库：

> ACRA 是一个库，使 Android 应用程序能够自动将其崩溃报告发布到 GoogleDoc 表单。它面向 android 应用程序开发人员，以帮助他们在应用程序崩溃或出现错误行为时从应用程序中获取数据。

它很容易安装在您的应用程序中，高度可配置，并且不需要您在任何地方托管服务器脚本......报告被发送到 Google Doc 电子表格！

* * *

## 回答 #2

> 赞同：310
> 
> 时间：2009-04-16T08:00:04.437

对于示例应用程序和调试目的，我使用了一个简单的解决方案，它允许我将堆栈跟踪写入设备的 sd 卡和/或将其上传到服务器。这个解决方案受到了[android-remote-stacktrace](https://code.google.com/archive/p/android-remote-stacktrace/)项目（特别是保存到设备和上传到服务器部分）的启发，我认为它解决了 Soonil 提到的问题。它不是最佳的，但它可以工作，如果你想在生产应用程序中使用它，你可以改进它。如果您决定将堆栈跟踪上传到服务器，您可以使用 php 脚本 ( `index.php`) 来查看它们。如果您有兴趣，您可以在下面找到所有源代码——一个用于您的应用程序的 java 类和两个用于托管已上传堆栈跟踪的服务器的可选 php 脚本。

在上下文（例如主活动）中，调用

```
if(!(Thread.getDefaultUncaughtExceptionHandler() instanceof CustomExceptionHandler)) {
    Thread.setDefaultUncaughtExceptionHandler(new CustomExceptionHandler(
            "/sdcard/<desired_local_path>", "http://<desired_url>/upload.php"));
} 
```

**`CustomExceptionHandler`**

```
public class CustomExceptionHandler implements UncaughtExceptionHandler {

    private UncaughtExceptionHandler defaultUEH;

    private String localPath;

    private String url;

    /* 
     * if any of the parameters is null, the respective functionality 
     * will not be used 
     */
    public CustomExceptionHandler(String localPath, String url) {
        this.localPath = localPath;
        this.url = url;
        this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
    }

    public void uncaughtException(Thread t, Throwable e) {
        String timestamp = TimestampFormatter.getInstance().getTimestamp();
        final Writer result = new StringWriter();
        final PrintWriter printWriter = new PrintWriter(result);
        e.printStackTrace(printWriter);
        String stacktrace = result.toString();
        printWriter.close();
        String filename = timestamp + ".stacktrace";

        if (localPath != null) {
            writeToFile(stacktrace, filename);
        }
        if (url != null) {
            sendToServer(stacktrace, filename);
        }

        defaultUEH.uncaughtException(t, e);
    }

    private void writeToFile(String stacktrace, String filename) {
        try {
            BufferedWriter bos = new BufferedWriter(new FileWriter(
                    localPath + "/" + filename));
            bos.write(stacktrace);
            bos.flush();
            bos.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void sendToServer(String stacktrace, String filename) {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        List<NameValuePair> nvps = new ArrayList<NameValuePair>();
        nvps.add(new BasicNameValuePair("filename", filename));
        nvps.add(new BasicNameValuePair("stacktrace", stacktrace));
        try {
            httpPost.setEntity(
                    new UrlEncodedFormEntity(nvps, HTTP.UTF_8));
            httpClient.execute(httpPost);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

**`upload.php`**

```
<?php
    $filename = isset($_POST['filename']) ? $_POST['filename'] : "";
    $message = isset($_POST['stacktrace']) ? $_POST['stacktrace'] : "";
    if (!ereg('^[-a-zA-Z0-9_. ]+$', $filename) || $message == ""){
        die("This script is used to log debug data. Please send the "
                . "logging message and a filename as POST variables.");
    }
    file_put_contents($filename, $message . "\n", FILE_APPEND);
?> 
```

**`index.php`**

```
<?php
    $myDirectory = opendir(".");
    while($entryName = readdir($myDirectory)) {
        $dirArray[] = $entryName;
    }
    closedir($myDirectory);
    $indexCount = count($dirArray);
    sort($dirArray);
    print("<TABLE border=1 cellpadding=5 cellspacing=0 \n");
    print("<TR><TH>Filename</TH><TH>Filetype</th><th>Filesize</TH></TR>\n");
    for($index=0; $index < $indexCount; $index++) {
        if ((substr("$dirArray[$index]", 0, 1) != ".") 
                && (strrpos("$dirArray[$index]", ".stacktrace") != false)){ 
            print("<TR><TD>");
            print("<a href=\"$dirArray[$index]\">$dirArray[$index]</a>");
            print("</TD><TD>");
            print(filetype($dirArray[$index]));
            print("</TD><TD>");
            print(filesize($dirArray[$index]));
            print("</TD></TR>\n");
        }
    }
    print("</TABLE>\n");
?> 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2011-07-08T10:15:03.007

您也可以尝试~~[BugSense]~~ ^(原因：垃圾邮件重定向到另一个网址)。BugSense 收集并分析所有崩溃报告，并为您提供有意义且直观的报告。它是免费的，只需 1 行代码即可集成。

免责声明：我是联合创始人

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2010-05-28T10:34:27.630

在 Android 2.2 中，现在可以从 Android Market 应用程序中自动获取崩溃报告：

> Android Market 应用程序的新错误报告功能使开发人员能够接收来自用户的崩溃和冻结报告。当他们登录到他们的发布者帐户时，这些报告将可用。

[http://developer.android.com/sdk/android-2.2-highlights.html](http://developer.android.com/sdk/android-2.2-highlights.html)

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2009-03-18T17:24:39.133

可以使用 来处理这些异常`Thread.setDefaultUncaughtExceptionHandler()`，但这似乎与 Android 处理异常的方法相混淆。我试图使用这种性质的处理程序：

```
private class ExceptionHandler implements Thread.UncaughtExceptionHandler {
    @Override
    public void uncaughtException(Thread thread, Throwable ex){
        Log.e(Constants.TAG, "uncaught_exception_handler: uncaught exception in thread " + thread.getName(), ex);

        //hack to rethrow unchecked exceptions
        if(ex instanceof RuntimeException)
            throw (RuntimeException)ex;
        if(ex instanceof Error)
            throw (Error)ex;

        //this should really never happen
        Log.e(Constants.TAG, "uncaught_exception handler: unable to rethrow checked exception");
    }
} 
```

然而，即使重新抛出异常，我也无法获得所需的行为，即记录异常，同时仍然允许 Android 关闭它发生的组件，所以我在一段时间后放弃了它。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2013-06-27T06:07:07.490

我看到这个问题太老了，希望我的回答对其他有同样问题的人有所帮助......

[试试](http://crashlytics.com)Crashlytics 。它将深入了解拥有您的应用程序的所有设备上的所有崩溃，并通过电子邮件向您发送通知。最好的部分是它完全免费使用。

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2009-05-13T21:51:23.327

好的，我查看了 rrainn 和 Soonil 提供的示例，我找到了一个不会弄乱错误处理的解决方案。

我修改了 CustomExceptionHandler，因此它存储了来自我们关联新线程的原始 UncaughtExceptionHandler。在新的“uncaughtException”方法结束时，我只是使用存储的 UncaughtExceptionHandler 调用旧函数。

在 DefaultExceptionHandler 类中，您需要某事。像这样：

```
public class DefaultExceptionHandler implements UncaughtExceptionHandler{
  private UncaughtExceptionHandler mDefaultExceptionHandler;

  //constructor
  public DefaultExceptionHandler(UncaughtExceptionHandler pDefaultExceptionHandler)
  {
       mDefaultExceptionHandler= pDefaultExceptionHandler;
  }
  public void uncaughtException(Thread t, Throwable e) {       
        //do some action like writing to file or upload somewhere         

        //call original handler  
        mStandardEH.uncaughtException(t, e);        

        // cleanup, don't know if really required
        t.getThreadGroup().destroy();
  }
} 
```

[通过对http://code.google.com/p/android-remote-stacktrace](http://code.google.com/p/android-remote-stacktrace)上的代码进行修改， 您就有了一个很好的工作基础，可以将现场登录到您的网络服务器或 sd 卡。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2015-05-07T14:11:04.327

Google Play Developers Console 实际上为您提供了来自那些已崩溃并已发送报告的应用程序的堆栈跟踪，它还有一个非常好的图表可以帮助您查看信息，请参见下面的示例：

![在此处输入图像描述](https://i.stack.imgur.com/AVcko.png)

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2011-10-03T00:13:54.193

我一直在为我的 Android 和 iOS 应用程序使用[Crittercism——](http://www.crittercism.com)在 techcrunch 上听说过它们。到目前为止对他们很满意！

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2009-12-15T00:25:48.267

我在这里制作了自己的版本： [http ://androidblogger.blogspot.com/2009/12/how-to-improve-your-application-crash.html](http://androidblogger.blogspot.com/2009/12/how-to-improve-your-application-crash.html)

基本上是一样的，但是我使用邮件而不是 http 连接来发送报告，更重要的是，我在报告中添加了一些信息，例如应用程序版本、操作系统版本、手机型号或可用内存。 .

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2012-04-30T07:31:45.827

使用它来捕获异常详细信息：

```
String stackTrace = Log.getStackTraceString(exception); 
```

将其存储在数据库中并维护日志。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2011-05-29T18:03:09.273

您还可以为它使用整个（简单）服务，而不仅仅是库。我们公司刚刚为此发布了一项服务：http: [//apphance.com](http://apphance.com)。

它有一个简单的 .jar 库（适用于 Android），您可以在 5 分钟内添加和集成，然后该库不仅会收集崩溃信息，还会收集正在运行的应用程序的日志，它还可以让您的测试人员直接从设备报告问题 - 包括整个上下文（设备旋转，是否连接到 wifi 等等）。您可以使用一个非常漂亮且有用的 Web 面板查看日志，您可以在其中跟踪与您的应用程序的会话、崩溃、日志、统计信息等。该服务目前处于封闭 Beta 测试阶段，但您可以请求访问，我们会很快将其提供给您。

免责声明：我是 Polidea 的 CTO，也是该服务的共同创建者。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2017-04-20T11:01:41.373

现在，Firebase 崩溃报告非常流行且更易于使用。请参阅以下链接了解更多信息： [Firebase 崩溃报告](https://firebase.google.com/docs/crash/)

希望它会帮助你。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2014-11-18T06:40:37.217

感谢`Stackoverflow`帮助我找到这个答案的资源。

**您可以在电子邮件中直接**找到远程 Android 崩溃报告。请记住，您必须**将电子邮件放在 CustomExceptionHandler 类**中。

```
public static String sendErrorLogsTo = "tushar.pandey@virtualxcellence.com" ; 
```

所需步骤：

1st）在您的活动的 onCreate 中使用您的代码的这一部分。

```
 if(!(Thread.getDefaultUncaughtExceptionHandler() instanceof CustomExceptionHandler)) {
        Thread.setDefaultUncaughtExceptionHandler(new CustomExceptionHandler(this));
    } 
```

2nd）根据我的 phpscript 使用（ rrainn ）的 CustomExceptionHandler 类的这个覆盖版本。

```
package com.vxmobilecomm.activity;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.io.StringWriter;
import java.io.Writer;
import java.lang.Thread.UncaughtExceptionHandler;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.BufferedHttpEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.AsyncTask;
import android.util.Log;

public class CustomExceptionHandler implements UncaughtExceptionHandler {

    private UncaughtExceptionHandler defaultUEH;
    public static String sendErrorLogsTo = "tushar.pandey@virtualxcellence.com" ;

    Activity activity;

    public CustomExceptionHandler(Activity activity) {
        this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
        this.activity = activity;
    }

    public void uncaughtException(Thread t, Throwable e) {

        final Writer result = new StringWriter();
        final PrintWriter printWriter = new PrintWriter(result);
        e.printStackTrace(printWriter);
        String stacktrace = result.toString();
        printWriter.close();
        String filename = "error" + System.nanoTime() + ".stacktrace";

        Log.e("Hi", "url != null");
        sendToServer(stacktrace, filename);

        StackTraceElement[] arr = e.getStackTrace();
        String report = e.toString() + "\n\n";
        report += "--------- Stack trace ---------\n\n";
        for (int i = 0; i < arr.length; i++) {
            report += "    " + arr[i].toString() + "\n";
        }
        report += "-------------------------------\n\n";

        report += "--------- Cause ---------\n\n";
        Throwable cause = e.getCause();
        if (cause != null) {
            report += cause.toString() + "\n\n";
            arr = cause.getStackTrace();
            for (int i = 0; i < arr.length; i++) {
                report += "    " + arr[i].toString() + "\n";
            }
        }
        report += "-------------------------------\n\n";

        defaultUEH.uncaughtException(t, e);
    }

    private void sendToServer(String stacktrace, String filename) {
        AsyncTaskClass async = new AsyncTaskClass(stacktrace, filename,
                getAppLable(activity));
        async.execute("");
    }

    public String getAppLable(Context pContext) {
        PackageManager lPackageManager = pContext.getPackageManager();
        ApplicationInfo lApplicationInfo = null;
        try {
            lApplicationInfo = lPackageManager.getApplicationInfo(
                    pContext.getApplicationInfo().packageName, 0);
        } catch (final NameNotFoundException e) {
        }
        return (String) (lApplicationInfo != null ? lPackageManager
                .getApplicationLabel(lApplicationInfo) : "Unknown");
    }

    public class AsyncTaskClass extends AsyncTask<String, String, InputStream> {
        InputStream is = null;
        String stacktrace;
        final String filename;
        String applicationName;

        AsyncTaskClass(final String stacktrace, final String filename,
                String applicationName) {
            this.applicationName = applicationName;
            this.stacktrace = stacktrace;
            this.filename = filename;
        }

        @Override
        protected InputStream doInBackground(String... params) 
        { 
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://suo-yang.com/books/sendErrorLog/sendErrorLogs.php?");

            Log.i("Error", stacktrace);

            try {
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                        6);

                nameValuePairs.add(new BasicNameValuePair("data", stacktrace));
                nameValuePairs.add(new BasicNameValuePair("to",sendErrorLogsTo));
                nameValuePairs.add(new BasicNameValuePair("subject",applicationName));

                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                HttpResponse response = httpclient.execute(httppost);

                HttpEntity entity1 = response.getEntity();

                BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(
                        entity1);

                is = bufHttpEntity.getContent();

            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            return is;
        }

        @Override
        protected void onPostExecute(InputStream result) {
            super.onPostExecute(result);

            Log.e("Stream Data", getStringFromInputStream(is));
        }
    }

    // convert InputStream to String
    private static String getStringFromInputStream(InputStream is) {

        BufferedReader br = null;
        StringBuilder sb = new StringBuilder();

        String line;
        try {

            br = new BufferedReader(new InputStreamReader(is));
            while ((line = br.readLine()) != null) {
                sb.append(line);
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (br != null) {
                try {
                    br.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        return sb.toString();

    }
} 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-08-02T07:47:12.847

[Google Firebase](https://firebase.google.com/docs/crash/)是 Google 最新（2016 年）在您的手机上为您提供崩溃/错误数据的方式。将其包含在您的 build.gradle 文件中：

```
compile 'com.google.firebase:firebase-crash:9.0.0' 
```

致命崩溃会自动记录，无需用户输入，您还可以记录非致命崩溃或其他事件，例如：

```
try
{

}
catch(Exception ex)
{
    FirebaseCrash.report(new Exception(ex.toString()));
} 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2017-05-07T06:46:06.350

有一个名为[**Sherlock**](https://github.com/ajitsing/Sherlock)的 android 库。它为您提供完整的崩溃报告以及设备和应用程序信息。每当发生崩溃时，它会在通知栏中显示一条通知，单击通知时，它会打开崩溃详细信息。您还可以通过电子邮件或其他共享选项与他人共享崩溃详细信息。

**安装**

```
android {
    dataBinding {
      enabled = true
    }
}

compile('com.github.ajitsing:sherlock:1.0.0@aar') {
    transitive = true
} 
```

**演示**

[![在此处输入图像描述](https://i.stack.imgur.com/8L52G.gif)](https://i.stack.imgur.com/8L52G.gif)

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2011-04-14T02:36:06.593

这是非常粗暴的，但是可以在任何地方运行 logcat，所以快速而肮脏的 hack 是添加到任何 catch 块`getRuntime().exec("logcat >> /sdcard/logcat.log");`

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2017-06-26T21:40:37.473

尽管此页面上的许多答案都很有用，但它们很容易过时。AppBrain 网站汇总了统计数据，可让您找到当前最流行的崩溃报告解决方案：

[Android 崩溃报告库](http://www.appbrain.com/stats/libraries/tag/crash-reporting/android-crash-reporting-libraries)

[![app brain website](https://i.stack.imgur.com/uWv7B.png)](https://i.stack.imgur.com/uWv7B.png)

您可以看到，在发布这张图片时，5.24% 的应用程序和 12.38% 的安装程序使用了 Crashlytics。

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2016-02-13T01:58:23.860

有一个名为 fabric 的工具，这是一个崩溃分析工具，它可以让您在应用程序实时部署和开发期间获得崩溃报告。将此工具添加到您的应用程序也很简单。当您的应用程序崩溃时，可以从您的 fabric.io 仪表板查看崩溃报告。thw 报告被自动捕获。它不会请求用户许可。他/她是否要发送错误/崩溃报告。这是完全免费的...... [https://get.fabric.io/](https://get.fabric.io/)

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2013-03-05T10:29:38.853

我们在公司内部使用我们自己开发的系统，它为我们提供了很好的服务。这是一个将崩溃报告发送到服务器和接收报告并进行一些分析的服务器的 android 库。服务器按异常名称、堆栈跟踪、消息对异常进行分组。它有助于识别需要修复的最关键问题。我们的服务现在处于公开测试阶段，因此每个人都可以尝试。[您可以在http://watchcat.co](http://watchcat.co)创建帐户，或者您可以使用演示访问[http://watchcat.co/reports/index.php?demo](http://watchcat.co/reports/index.php?demo)看看它是如何工作的。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2013-03-09T17:34:21.463

If you want answers immediately you can use [logcat](http://developer.android.com/tools/help/logcat.html)

`$adb shell logcat -f /sdcard/logoutput.txt *:E`

If there's too much junk in your log right now, try clearing it first.

`$adb shell logcat -c`

Then try running your app then logcat again.

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2016-02-03T12:18:32.683

我发现了另一个很棒的 Web 应用程序来跟踪错误报告。

[https://mint.splunk.com/](https://mint.splunk.com/)

配置步骤少。

1.  使用上面的链接登录或注册和配置。一旦您完成创建应用程序，他们将提供如下配置行。

> ```
> Mint.initAndStartSession(YourActivity.this, "api_key"); 
> ```

2.  在应用程序的 build.gradl 中添加以下内容。

> ```
> android {
> ...
>     repositories {
>         maven { url "https://mint.splunk.com/gradle/"}
>     }
> ...
> }
> 
> dependencies {
> ...
>     compile "com.splunk.mint:mint:4.4.0"
> ...
> } 
> ```

3.  添加我们在上面复制的代码并将其添加到每个活动中。

    > Mint.initAndStartSession(YourActivity.this, "api_key");

而已。您登录并转到您的应用程序仪表板，您将获得所有错误报告。

希望它可以帮助某人。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2013-11-05T00:50:32.077

对于备用崩溃报告/异常跟踪服务，请查看[Raygun.io](http://raygun.io/features) - 它有很多很好的逻辑来处理 Android 崩溃，包括将其插入应用程序时的良好用户体验（主 Activity 中的两行代码和一些粘贴到 AndroidManifest 中的 XML 行）。

当您的应用程序崩溃时，它会自动获取堆栈跟踪、硬件/软件的环境数据、用户跟踪信息、您指定的任何自定义数据等。它异步将其发布到 API，因此不会阻塞 UI 线程，并缓存它如果没有可用的网络，则写入磁盘。

免责声明：我构建了 Android 提供程序 :)

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-02-12T13:46:17.137

刚开始使用 ACRA [https://github.com/ACRA/acra](https://github.com/ACRA/acra)，使用 Google 表单作为后端，它很容易设置和使用，它是默认设置。

**但是将不推荐向 Google 表单发送报告（然后删除）： https:** [//plus.google.com/118444843928759726538/posts/GTTgsrEQdN6](https://plus.google.com/118444843928759726538/posts/GTTgsrEQdN6) [https://github.com/ACRA/acra/wiki/Notice-on-Google -Form-Spreadsheet-用法](https://github.com/ACRA/acra/wiki/Notice-on-Google-Form-Spreadsheet-usage)

无论如何，可以定义您自己的发件人 [https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Implementing_your_own_sender](https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Implementing_your_own_sender) 例如，您可以尝试向发件人发送电子邮件。

只需最少的努力，就可以将报告发送到 bugsense： [http ://www.bugsense.com/docs/android#acra](http://www.bugsense.com/docs/android#acra)

**NB** bugsense 免费帐户限制为每月 500 份报告

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-04-01T22:17:17.050

派对迟到了，我支持并相信 ACRA 是最好的选择。它易于设置和配置。我创建了一份详细的指南，其中包含来自各地的输入，以使用 ACRA 获取崩溃报告，并使用 MandrillAp 将其邮寄到我的电子邮件地址。

帖子链接：[https ://androidician.wordpress.com/2015/03/29/sending-crash-reports-with-acra-over-email-using-mandrill/](https://androidician.wordpress.com/2015/03/29/sending-crash-reports-with-acra-over-email-using-mandrill/)

链接到 github 上的示例项目：[https ://github.com/ayushhgoyal/AcraSample](https://github.com/ayushhgoyal/AcraSample)

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-03-22T20:57:32.747

我是[Bugsnag](https://bugsnag.com/platforms/android)的创始人之一，我们正是为此目的而设计的。Bugsnag 会自动捕获 Android 应用程序中未处理的异常并将它们发送到我们的仪表板，您可以在其中确定修复的优先级并深入了解诊断信息。

以下是选择或构建崩溃报告系统时需要考虑的一些重要事项，以及一些代码片段：

*   自动检测未处理的异常（[示例代码](https://github.com/bugsnag/bugsnag-android/blob/master/src/main/java/com/bugsnag/android/ExceptionHandler.java)）
*   收集诊断数据，例如内存使用情况、设备信息等（[示例代码](https://github.com/bugsnag/bugsnag-android/blob/master/src/main/java/com/bugsnag/android/DeviceData.java)）
*   有效地按根本原因将崩溃分组在一起
*   允许您跟踪用户在每次崩溃之前采取的操作以帮助重现（[示例代码](https://github.com/bugsnag/bugsnag-android/blob/master/src/main/java/com/bugsnag/android/Breadcrumbs.java)）

如果您想查看有关 Android 上的崩溃处理/报告的一些最佳实践，您可以查看 Bugsnag 的完全开源的[崩溃报告库](https://github.com/bugsnag/bugsnag-android)的完整源代码，随时将其拆开并在您自己的应用程序中使用！

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2017-06-20T09:35:52.153

Google 更改了您实际获得的崩溃报告数量。以前您只能收到手动报告的错误报告。

自上次开发者大会和[Android Vitals](https://developer.android.com/topic/performance/vitals/index.html)推出以来，您还可以从已启用共享诊断数据的用户那里获得崩溃报告。

> 您会看到从用户选择自动共享使用情况和诊断数据的 Android 设备收集的所有崩溃信息。前两个月的数据可用。

[查看崩溃和应用程序无响应 (ANR) 错误](https://support.google.com/googleplay/android-developer/answer/6083203)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2011-02-15T19:03:58.787

[Flurry 分析](http://www.flurry.com)为您提供崩溃信息、硬件型号、Android 版本和实时应用使用统计信息。在新的 SDK 中，它们似乎提供了更详细的崩溃信息[http://www.flurry.com/flurry-crash-analytics.html](http://www.flurry.com/flurry-crash-analytics.html)。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2011-11-03T06:28:32.743

如果您的应用程序正在被其他人下载并在远程设备上崩溃，您可能需要查看 Android 错误报告库（在[此 SO 帖子](https://stackoverflow.com/questions/3378550/android-crash-reporting-library-pre-froyo)中引用）。如果它只是在您自己的本地设备上，您可以使用 LogCat。即使设备在崩溃发生时没有连接到主机，连接设备并发出 adb logcat 命令将下载整个 logcat 历史记录（至少在它被缓冲的范围内，这通常是大量的日志数据，它只是不是无限的）。这些选项中的任何一个都回答了您的问题吗？如果不是，您可以尝试澄清您正在寻找的更多内容吗？

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-05-01T06:05:45.767

您可以直接在 Android Studio 中执行此操作。只需连接您的手机，运行应用程序，让它崩溃，您就可以直接在 Android Studio 中查看堆栈跟踪。

# cygwin - Cygwin 出错：*** 目标模式不包含 `%'

> ID：601516
> 
> 赞同：38
> 
> 时间：2009-03-02T07:25:03.257
> 
> 标签：cygwin, makefile

我在（重新）构建时遇到了这个错误，使用 cygwin make.exe 版本：3.81。

```
Error : *** target pattern contains no `%'. 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-03-02T07:32:11.370

此错误是由于存在`":"`. 因此它不再支持 windows 路径。您需要下载3.80版本并替换目录`make.exe`中的。`\bin`

显然它也需要`cygintl12.dll`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2010-07-16T23:31:11.790

*   回滚到 3.80 ( [Geant4](http://geant4.web.cern.ch/geant4/support/windows_note.shtml) )

    *   `cd /usr/bin`
    *   `mv make.exe make_381.exe`
    *   `wget http://geant4.cern.ch/support/extras/cygwin/make.exe`
    *   `chmod +x make.exe`
*   从 cygwin安装`libintl2`程序安装所需的`cygintl-2.dll`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-05T00:16:13.757

我在尝试在 Linux 或 OSX 上构建项目时遇到了同样的错误，该项目以前是在 Windows 机器上构建的，并且在输出文件夹中挂着一些**.od文件。**

一旦我手动删除了**.od**文件，问题就解决了。显然，我的 IDE（在本例中为 CodeLite）的“清理”命令并没有删除**.od**文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-20T09:01:19.913

很可能是由于驱动器号后面有冒号。例如考虑

```
build : $(NativeHeaders)/* 
```

如果

```
NativeHeaders=../../../cpp/generated 
```

那么一切都很好，但是

```
NativeHeaders=C:/dev/folder/cpp/generated 
```

导致您得到的错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-01T23:21:35.177

我收到此错误是因为我的命令开头没有制表符 (\t) 字符。我的 vim 集中有 expandtab，所以它用 4 个空格替换了一个制表符。当我将其关闭并将空格更改为选项卡时，它已修复

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-17T05:30:28.117

使用 cygwin 构建 Android NDK 时出现`target pattern contains no '%'`错误。

我发现以下链接很有帮助：

> [Make产生的错误](https://www.gnu.org/software/make/manual/html_node/Error-Messages.html)
> 
> *   '缺少目标模式。停止。'
> *   '多个目标模式。停下来。'</li>
> *   '目标模式不包含'%'。停止。'
> *   '混合隐式和静态模式规则。停下来。'</li>
> 
> 这些是为格式错误的静态模式规则生成的。第一个意味着规则的目标部分没有模式；第二种意味着目标部分中有多种模式；第三个表示目标不包含模式字符（％）；第四个意味着静态模式规则的所有三个部分都包含模式字符（%）——只有前两个部分应该。如果您看到这些错误并且您没有尝试创建静态模式规则，***请检查目标和先决条件列表中任何变量的值，以确保它们不包含冒号。***请参阅[静态模式规则的语法](https://www.gnu.org/software/make/manual/html_node/Static-Usage.html#Static-Usage)。

因此，我的解决方案包括将系统变量从 Windows 格式更改为 Unix 格式，如下所示：

*   而不是`C:\Android\android-ndk-r10c`，我用于`/cygdrive/c/Android/android-ndk-r10c`NDK 路径。

同样，我将 NDK 项目路径更改为`/cygdrive/c/Android/project/src/main/jni`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-28T10:25:39.863

就我而言，当我收到此错误时，我正在 Cygwin 下使用 CMake。原来是 Windows 版本的 CMake 被执行了。随后，在 make 文件中使用了 Windows 路径。我通过安装程序安装了 Cygwin 的 CMake 版本并让它工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-22T13:45:18.923

当构建目录包含一个“：”时，我在 Linux 上遇到了这个问题，这是由创建一个名为“server:port”的目录的 mercurial checkout 引起的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-18T12:20:12.757

我必须在我的 make 文件中更改以下内容以与 Make_381 兼容：
之前：
ARDUINO_BASE_DIR = C:\programs/arduino

现在：
ARDUINO_BASE_DIR = \\programs/arduino

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-04T01:30:21.773

如果您在 Windows 下运行 Eclipse C/C++ 并从 Cygwin 引用文件，请尝试此操作，确保 c:/cygwin/bin 或 c:/cygwin64/bin 位于 Windows 路径环境中首选编译器工具之后。

示例：路径 = ;C:\yagarto\bin;C:\yagarto-tools\bin;C:\cygwin64\bin;

修改完成后，退出 Eclipse 并重启生效（直接重启 Eclipse 不退出并不能解决问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-17T20:20:52.883

在我的项目中，obj 文件夹可能已损坏，并且出现此错误。手动删除 obj 文件夹。然后 ndk-build 完成得很好。

# c# - Vista & C# - 拖放问题（与海拔无关）

> ID：601521
> 
> 赞同：6
> 
> 时间：2009-03-02T07:29:56.897
> 
> 标签：c#, winforms, drag-and-drop, inno-setup

有问题的应用程序是 .Net 2.0 Framework WinForms。它应该适用于大型用户群（从 CD 安装）。使用 InnoSetup 完成安装。

在两台机器上，应用程序不接受拖放（应用程序和 D&D 的源都具有相同的海拔高度）。

通过为应用程序快捷方式的 INTERACTIVE SID 添加 Read & Read&Execute 权限，似乎解决了这个问题。

问题：添加这些权限和 D&D 是如何关联的，以及如何在安装过程中检查/设置这些权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-12T20:04:40.343

您在这里有两个问题：

> 1.  添加这些权利和 D&D 是如何相关的，并且...

这我完全不确定。我们在 WinForm 应用程序中使用 D&D 与 shell 和 Outlook 交互，在 Vista 中没有任何问题。我什至不确定您建议的 ACL 更改一定会解决您遇到的任何问题。

> 2.  如何在安装过程中检查/设置这些权限？

最简单的方法是[创建一个 .Net 安装类](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.aspx)并添加以下代码：

```
 public static void ReplacePermissions(string filepath, WellKnownSidType sidType, FileSystemRights allow)
    {
        FileSecurity sec = File.GetAccessControl(filepath);
        SecurityIdentifier sid = new SecurityIdentifier(sidType, null);
        sec.PurgeAccessRules(sid); //remove existing
        sec.AddAccessRule(new FileSystemAccessRule(sid, allow, AccessControlType.Allow));
        File.SetAccessControl(filepath, sec);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-08T01:22:27.580

您应该直接在 Visual Studio 环境之外运行项目的 exe 文件。我正在使用 Windows Vista 平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T08:24:47.450

只是在黑暗中拍摄，但您的应用程序的 Main() 方法中是否存在 [STAThread] 属性？没有它，拖放将根本不起作用。（尽管这无法解释随着 INTERACTIVE SID 权限变化而导致的行为变化）。

# .net - 需要在 .NET 应用程序中嵌入 Excel 工作表

> ID：601523
> 
> 赞同：1
> 
> 时间：2009-03-02T07:30:20.670
> 
> 标签：.net, excel

我需要在 .NET WinForms 应用程序中嵌入 Excel 工作簿/工作表。到目前为止，我只找到了一种方法——将 Web 浏览器控件添加到应用程序并使用此控件导航到 Excel 文件。这是一个非常麻烦的解决方案。有没有更简单的方法呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-03T01:50:13.693

[SpreadsheetGear for .NET](http://www.spreadsheetgear.com/)带有一个与 Excel 兼容的 Windows Forms 电子表格控件，您可以简单地将其拖到您的表单中。它包括一个工作簿设计器，允许您直接在 Visual Studio 中编辑工作簿或从磁盘加载 Excel 工作簿，还包括一个类似于 Excel 的综合 API（除了它对 .NET 友好）。

如果这对您有用，您可以[了解更多信息](http://www.spreadsheetgear.com/support/samples/windowsforms.aspx)并亲自尝试[免费评估](https://www.spreadsheetgear.com/downloads/register.aspx)。

免责声明：我拥有 SpreadsheetGear LLC

# vim - 远程编程

> ID：601532
> 
> 赞同：9
> 
> 时间：2009-03-02T07:36:06.570
> 
> 标签：vim, emacs, cross-platform

我正在我的 Windows 机器上进行开发工作，但我在远程 Linux 机器上进行编译。我目前做的是在 Windows 上启动 X 服务器，通过 ssh 进入 Linux 机器，然后远程进行开发。

我想做的是在 Windows 机器上编辑我的源代码，并在我保存时让它自动将文件复制到 Linux 系统。我还希望我的内置编译命令能够在远程系统上执行构建。

如果有什么不同，源代码都是 C 语言，使用 GCC。按偏好的降序排列，我的桌面上有 Emacs、Vi 和 Netbeans，并且愿意安装另一个 IDE 作为最后的手段。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-03-02T09:01:45.477

这在 vim 中当然是可行的。您可以在 vim 中使用 scp:// 协议来编辑远程文件，并设置一个写入本地副本的命令。您还可以更改 vim 用于 :make 的程序以在您的服务器上执行 ssh make 。

你需要设置你的 ssh-keys 来保持这个无痛（否则你会一直输入你的密码），但这很容易。

另一种选择是作为 make 命令的一部分推送到远程存储库，而不是远程编辑。

* * *

**编辑：**

首先，使用`scp://`vim 中的协议。从`:help netrw-start`（或从页面向下`:help scp`）

> Netrw 支持使用 url 对其他机器上的文件进行“透明”编辑（见 |netrw-transparent|）。例如，假设您在其他机器上有一个帐户；如果您可以使用 scp，请尝试：
> 
> ```
> vim scp://hostname/path/to/file 
> ```
> 
> 想让 ssh/scp 更容易使用吗？查看 |netrw-ssh-hack|！

您还可以`scp://`在命令中使用路径`:edit`，或者在任何可以使用普通路径的地方使用。

并且，从上面提到的`:help netrw-ssh-hack`关于如何设置 ssh 密钥的说明中：

> 改进浏览 *netrw-listhack* *netrw-ssh-hack* {{{2
> 
> 尤其是使用远程目录浏览器，不断地输入密码很繁琐。
> 
> 对于 Linux/Unix 系统，Rob Flickenger（O'Reilly，ISBN 0-596-00461-3）的“Linux Server Hacks - 100 个工业强度提示和工具”一书提供了设置无密码 ssh 和 scp 的提示以及讨论相关的安全问题。[它曾经在http://hacks.oreilly.com/pub/h/66](http://hacks.oreilly.com/pub/h/66)上可用，但显然该地址现在被重定向到一些“hackzine”。我将尝试根据那篇文章和 Ben Schmidt 的来信做一个总结：
> 
> （1）在本地机器（ssh客户端）上生成公钥/私钥对：
> 
> ```
>  ssh-keygen -t rsa 
> ```
> 
> （根据提示将文件保存到~/.ssh/id_rsa）
> 
> (2) 当要求输入密码时（两次），无需密码。如果您确实使用了密码，您还需要使用 ssh-agent，因此您只需在每个会话中输入一次密码。如果您不使用密码，只需登录到您的本地计算机或以任何方式访问密钥文件就足以访问任何具有该密钥授权登录的 ssh 服务器。
> 
> (3) 这将创建两个文件：
> 
> ```
>  ~/.ssh/id\_rsa
>   ~/.ssh/id\_rsa.pub 
> ```
> 
> (4)在目标机器（ssh服务器）上：
> 
> ```
>  cd
>  mkdir -p .ssh
>  chmod 0700 .ssh 
> ```
> 
> (5) 在您的本地机器上（ssh 客户端）：（一行）
> 
> ```
>  ssh {serverhostname} cat '>>' '~/.ssh/authorized\_keys2' < ~/.ssh/id_rsa.pub 
> ```
> 
> 或者，对于 OpenSSH，（一行）
> 
> ```
>  ssh {serverhostname} cat '>>' '~/.ssh/authorized\_keys' < ~/.ssh/id_rsa.pub 
> ```
> 
> 你可以用
> 
> ```
>  ssh {serverhostname} 
> ```
> 
> 并且您应该无需进一步输入任何内容即可登录到服务器计算机。
> 
> 如果您决定使用密码，请执行以下操作：
> 
> ```
>  ssh-agent $SHELL
>  ssh-add
>  ssh {serverhostname} 
> ```
> 
> 使用 ssh-add 时将提示您输入密钥密码，但随后使用 ssh 时不会提示您输入密钥密码。要与 vim 一起使用，您可以使用
> 
> ```
>  ssh-agent vim 
> ```
> 
> 并且，当在 vim 中下一个时，使用
> 
> ```
>  :!ssh-add 
> ```
> 
> 或者，您可以将 ssh-agent 应用于您计划在其中运行 vim 的终端：
> 
> ```
>  ssh-agent xterm & 
> ```
> 
> 并在需要时执行 ssh-add。
> 
> 对于 Windows，vim 邮件列表中的人们提到 Pageant 有助于避免不断需要输入密码。
> 
> Kingston Fung 写了另一种避免经常需要输入密码的方法：
> 
> > 为了避免每次都需要输入 scp 的密码，您在文档中提供了一个 hack 来设置一个非密码 ssh 帐户。我找到了一个更好的方法：我可以使用一个普通的 ssh 帐户，该帐户使用密码来访问材料，而无需每次都输入密码。这对安全性和便利性都有好处。我尝试了 ssh 公钥授权 + ssh-agent，实现了这个，它可以工作！以下是两个带有说明的链接：
> > 
> > *   [http://www.ibm.com/developerworks/library/l-keyc2/](http://www.ibm.com/developerworks/library/l-keyc2/)
> > *   [http://sial.org/howto/openssh/publickey-auth/](http://sial.org/howto/openssh/publickey-auth/)

要在远程系统上进行制作，您需要设置`makeprg`变量以进行 ssh 制作。从`:help makeprg`

> ":make" 命令使用的程序。见|:make_makeprg|。此选项可能包含 '%' 和 '#' 字符，它们被扩展为当前和备用文件名。|:_%| |:_#| 扩展环境变量|:set_env|。见 |选项-反斜杠| 关于包括空格和反斜杠。
> 
> 请注意，“|” 必须转义两次：一次用于 ":set"，一次用于解释命令。当您使用名为“myfilter”的过滤器时，请执行以下操作：
> 
> ```
>  :set makeprg=gmake\ \\\|\ myfilter 
> ```
> 
> 可以给出占位符“$*”（甚至多次）来指定参数将被包含在哪里，例如：
> 
> ```
>  :set makeprg=latex\ \\\\nonstopmode\ \\\\input\\{$*} 
> ```
> 
> 不能从 |modeline| 设置此选项 或在 |sandbox| 中，出于安全原因。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-02T10:32:35.007

一种选择是使用[TRAMP](http://www.gnu.org/software/tramp/)远程编辑包（内置在 Emacs 22 和更新版本中，您可以将其安装到旧版本中）。每次保存文件时，Emacs 都会通过 ssh（默认情况下；当然每个细节都是完全可配置的）将其内容发送到 Linux 机器。类似`M-x compile`和`M-x grep`的命令可识别 TRAMP 并在远程主机上执行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-02T07:44:22.773

我会为您的环境研究持续集成。通过这种方式，您可以将更改提交到源代码管理，并让 linux 机器充当构建服务器。您可以在构建上运行相关的测试和其他相关的有趣内容。

**更新 1：**这也可能对您有用：http: [//metamod-p.sourceforge.net/cross-compiling.on.windows.for.linux.html](http://metamod-p.sourceforge.net/cross-compiling.on.windows.for.linux.html)（也值得尝试在类似工具上进行一些搜索）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-02T09:00:42.607

其他人建议 SAMBA 在您的 Linux 机器上可能不可行。一个不错的选择是在您的 Windows 机器上使用[Dokan SSHFS](http://dokan-dev.net/en/docs/dokan-sshfs-readme/)通过 SSH 挂载远程目录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T07:52:55.017

你可以尝试使用 Samba 或类似的东西在你的 Linux 和 Windows 机器之间共享一个磁盘。然后您可以在本地机器上进行编辑，并且文件将立即在远程机器上可见，因为驱动器对两者都是可见的。

在我工作的地方，我们有 NFS 上的所有文件，可以从所有 Linux 机器和 Windows 机器访问。我不知道设置它有多难，因为我在一家大公司工作，IT 与我分离，但简单的磁盘共享应该非常简单。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-02T08:40:25.353

为什么要在 Windows 上启动 X 服务器？就个人而言，我会使用 VMware 或任何你最喜欢的 VM 技术设置 Linux VM（VMware 是免费的并且运行良好）。然后选择您想要的任何 Linux 发行版。您只需要非常基本的功能，主要是标准的“工具链”。你可以选择 Centos、Ubuntu、Fedora、Debian 等等。我通常使用 Centos 或 Debian。设置它，然后在你的 VM 中使用 PuTTY。从那里，您可以将文件 scp 到您的远程服务器等等。这样您就不必为 cygwin 或 X 服务器或其中的任何东西而烦恼。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-02T07:55:27.617

您可以直接使用 samba 共享将文件保存在远程机器上吗？我经常这样做PHP。

然后只需打开一个腻子窗口即可在远程框上运行命令。

还是我错过了什么？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-02T09:09:05.567

设置源代码控制系统并使用它。然后你可以在你的 IDE 中保存后进行提交，在服务器上你可以在提交时发生一些事情。

这可以触发测试、构建、将任何错误发送给您...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-02T07:42:28.723

一种解决方案可能是使用某种轮询应用程序来检查文件上的时间戳以查看它们是否已更改。如果他们有然后保存它然后编译。这种方式有点骇人听闻，但它是可行的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-03T15:40:29.377

我个人将[XMing](http://www.straightrunning.com/XmingNotes/)与[PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)一​​起使用。我在 XMing 运行时使用 PuTTY SSH。我可以打开任何编辑器（gvim、emacs、gedit 等），它就会出现。

不过，您需要在 PuTTY 上进行一些设置：

1.  展开连接
2.  展开 SSH
3.  点击 X11
4.  勾选“启用 X11 转发”
5.  在显示位置的文本字段中，输入（不带引号）：“localhost:0”
6.  保存会话并连接。

# linq-to-sql - Linq to sql，求和时间跨度？

> ID：601542
> 
> 赞同：1
> 
> 时间：2009-03-02T07:40:12.520
> 
> 标签：linq-to-sql, sql-server-2008, datetime, timespan

我在 mssql 2008 数据库中有一个时间字段，我想做一些事情来达到以下效果：

```
Timespent = x.sum(x => x.AmountOfTime); 
```

其中 AmountOfTime 是一个时间 MSSQL 字段。Sum 似乎只适用于小数，如何添加这些列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T07:54:44.823

如果 SQL 构造不支持这一点，你就不能......为什么不创建一个具有时间数字表示的特殊字段，然后你可以使用 SQL 将它添加到一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T08:03:37.423

您可能希望将周期转换为间隔 - 如有必要，通过从结束时间减去开始时间。请注意，TIME 类型表示瞬间，而不是持续时间。在标准 SQL 中，您需要 INTERVAL HOUR TO SECOND。我不确定微软是否支持——还有其他主要的 DBMS 不支持。如果你被 TIME 卡住了，你应该能够从值中减去 TIME '00:00:00' 并得到一些可行的东西（这将是一个 INTERVAL）。

间隔的一个特殊优势是您确实可以通过 SUM 将它们相加。

有关详细信息，您可以像我一样在 MSDN（或通过 Google）手动 bash。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-13T13:15:20.670

```
public static class Extentions
{
    public static TimeSpan Sum<T>(this IEnumerable<T> items, Func<T, TimeSpan> selector)
    {
        var summ = TimeSpan.Zero;
        foreach(T item in items)
        {
            summ += selector(item);
        }
        return summ;
    }
}

var timespent = foo.Sum(f => f.finishdatetime - f.startdatetime); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-15T23:10:09.470

我使用以下方法解决了这个问题，因为你的桌子上有一个开始和结束的日期时间：

```
public TimeSpan AmountOfTime(IQueryable<Something> iq)
{
    TimeSpan ts = TimeSpan.Zero;
    foreach (Something a in iq.ToList())
        ts += (a.finishdatetime - a.startdatetime);
    return ts
} 
```

然后您可以使用它来获取总小时数：

```
double foo = AmountOfTime(datacontext.Where(conditions)).TotalHours; 
```

# macos - 命令行命令在一定时间后自动终止命令

> ID：601543
> 
> 赞同：56
> 
> 时间：2009-03-02T07:41:07.820
> 
> 标签：macos, unix, command-line, utilities, cpu-usage

我想在一定时间后自动终止命令。我想到了这样的界面：

```
% constrain 300 ./foo args 
```

它将运行带有“args”的“./foo”，但如果它在 5 分钟后仍在运行，则会自动终止它。

将这个想法推广到其他约束可能很有用，例如如果进程使用太多内存则自动终止进程。

是否有任何现有的工具可以做到这一点，或者有人写过这样的东西吗？

补充：乔纳森的解决方案正是我的想法，它在 linux 上就像一个魅力，但我无法让它在 Mac OSX 上工作。我摆脱了 SIGRTMIN 让它编译得很好，但信号只是没有被发送到子进程。有人知道如何在 Mac 上进行这项工作吗？

[添加：请注意，乔纳森提供了适用于 Mac 和其他地方的更新。]

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2011-08-24T02:59:17.653

GNU Coreutils 包含*timeout*命令，默认安装在许多系统上。

[https://www.gnu.org/software/coreutils/manual/html_node/timeout-invocation.html](https://www.gnu.org/software/coreutils/manual/html_node/timeout-invocation.html)

观看`free -m`一分钟，然后通过发送 TERM 信号将其杀死：

```
timeout 1m watch free -m 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-03-12T08:43:18.760

也许我不理解这个问题，但这听起来直接可行，至少在 bash 中：

```
( /path/to/slow command with options ) & sleep 5 ; kill $! 
```

这会在括号内运行第一个命令五秒钟，然后将其终止。整个操作同步运行，即当它忙于等待慢速命令时，您将无法使用您的shell。如果这不是您想要的，应该可以添加另一个 &。

该`$!`变量是一个 Bash 内置函数，其中包含最近启动的子 shell 的进程 ID。重要的是不要在括号内添加 &，这样做会丢失进程 ID。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2010-07-11T14:49:51.117

我参加这个聚会很晚，但我没有在答案中看到我最喜欢的把戏。

在 *NIX 下，an`alarm(2)`是跨 an 继承的`execve(2)`，默认情况下 SIGALRM 是致命的。因此，您通常可以简单地：

```
$ doalarm () { perl -e 'alarm shift; exec @ARGV' "$@"; } # define a helper function

$ doalarm 300 ./foo.sh args 
```

或者安装一个[简单的 C 包装器](http://www.pilcrow.madison.wi.us/)来为你做这件事。

**优点**只涉及一个PID，机制简单。例如，如果`./foo.sh`退出“太快”并且其 PID 被重新使用，您将不会杀死错误的进程。您不需要多个 shell 子进程协同工作，这可以正确完成，但比较容易竞争。

**缺点**时间受限的进程不能操纵它的闹钟（例如，`alarm(2)`，`ualarm(2)`，`setitimer(2)`），因为这可能会清除继承的警报。显然，它也不能阻止或忽略 SIGALRM，尽管对于其他一些方法，SIGINT、SIGTERM 等也可以这样说。

一些（我认为是非常古老的）系统`sleep(2)`以. 但是，根据我的经验，这种技术适用于您想要限制时间的绝大多数流程。`alarm(2)``alarm(2)`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-03-02T07:59:03.487

我有一个名为的程序`timeout`，它是用 C 语言编写的，最初是在 1989 年，但从那时起会定期更新。

* * *

更新：此代码无法在 MacOS X 上编译，因为未定义 SIGRTMIN，并且在 MacOS X 上运行时无法超时，因为那里的 `signal()` 函数在警报超时后恢复 `wait()` - 这不是所需的行为。我有一个新版本的 `timeout.c` 可以解决这两个问题（使用 `sigaction()` 而不是 `signal()`）。和以前一样，请与我联系以获取 10K gzipped tar 文件，其中包含源代码和手册页（请参阅我的个人资料）。

* * *

```
/*
@(#)File:           $RCSfile: timeout.c,v $
@(#)Version:        $Revision: 4.6 $
@(#)Last changed:   $Date: 2007/03/01 22:23:02 $
@(#)Purpose:        Run command with timeout monitor
@(#)Author:         J Leffler
@(#)Copyright:      (C) JLSS 1989,1997,2003,2005-07
*/

#define _POSIX_SOURCE       /* Enable kill() in <unistd.h> on Solaris 7 */
#define _XOPEN_SOURCE 500

#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <errno.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include "stderr.h"

#define CHILD       0
#define FORKFAIL    -1

static const char usestr[] = "[-vV] -t time [-s signal] cmd [arg ...]";

#ifndef lint
/* Prevent over-aggressive optimizers from eliminating ID string */
const char jlss_id_timeout_c[] = "@(#)$Id: timeout.c,v 4.6 2007/03/01 22:23:02 jleffler Exp $";
#endif /* lint */

static void catcher(int signum)
{
    return;
}

int main(int argc, char **argv)
{
    pid_t   pid;
    int     tm_out;
    int     kill_signal;
    pid_t   corpse;
    int     status;
    int     opt;
    int     vflag = 0;

    err_setarg0(argv[0]);

    opterr = 0;
    tm_out = 0;
    kill_signal = SIGTERM;
    while ((opt = getopt(argc, argv, "vVt:s:")) != -1)
    {
        switch(opt)
        {
        case 'V':
            err_version("TIMEOUT", &"@(#)$Revision: 4.6 $ ($Date: 2007/03/01 22:23:02 $)"[4]);
            break;
        case 's':
            kill_signal = atoi(optarg);
            if (kill_signal <= 0 || kill_signal >= SIGRTMIN)
                err_error("signal number must be between 1 and %d\n", SIGRTMIN - 1);
            break;
        case 't':
            tm_out = atoi(optarg);
            if (tm_out <= 0)
                err_error("time must be greater than zero (%s)\n", optarg);
            break;
        case 'v':
            vflag = 1;
            break;
        default:
            err_usage(usestr);
            break;
        }
    }

    if (optind >= argc || tm_out == 0)
        err_usage(usestr);

    if ((pid = fork()) == FORKFAIL)
        err_syserr("failed to fork\n");
    else if (pid == CHILD)
    {
        execvp(argv[optind], &argv[optind]);
        err_syserr("failed to exec command %s\n", argv[optind]);
    }

    /* Must be parent -- wait for child to die */
    if (vflag)
        err_remark("time %d, signal %d, child PID %u\n", tm_out, kill_signal, (unsigned)pid);
    signal(SIGALRM, catcher);
    alarm((unsigned int)tm_out);
    while ((corpse = wait(&status)) != pid && errno != ECHILD)
    {
        if (errno == EINTR)
        {
            /* Timed out -- kill child */
            if (vflag)
                err_remark("timed out - send signal %d to process %d\n", (int)kill_signal, (int)pid);
            if (kill(pid, kill_signal) != 0)
                err_syserr("sending signal %d to PID %d - ", kill_signal, pid);
            corpse = wait(&status);
            break;
        }
    }

    alarm(0);
    if (vflag)
    {
        if (corpse == (pid_t) -1)
            err_syserr("no valid PID from waiting - ");
        else
            err_remark("child PID %u status 0x%04X\n", (unsigned)corpse, (unsigned)status);
    }

    if (corpse != pid)
        status = 2; /* I don't know what happened! */
    else if (WIFEXITED(status))
        status = WEXITSTATUS(status);
    else if (WIFSIGNALED(status))
        status = WTERMSIG(status);
    else
        status = 2; /* I don't know what happened! */

    return(status);
} 
```

如果您想要“stderr.h”和“stderr.c”的“官方”代码，请联系我（请参阅我的个人资料）。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-03-02T10:08:17.563

还有ulimit，可以用来限制子进程可用的执行时间。

```
ulimit -t 10 
```

将进程限制为 10 秒的 CPU 时间。

要实际使用它来限制新进程，而不是当前进程，您可能希望使用包装脚本：

```
#! /usr/bin/env python

import os
os.system("ulimit -t 10; other-command-here") 
```

other-command 可以是任何工具。我正在运行不同排序算法的 Java、Python、C 和 Scheme 版本，并记录它们花费的时间，同时将执行时间限制为 30 秒。一个 Cocoa-Python 应用程序生成了各种命令行——包括参数——并将时间整理到一个 CSV 文件中，但它实际上只是在上面提供的命令之上的绒毛。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-11T20:09:52.907

Perl 一个班轮，只是为了踢球：

```
perl -e '$s = shift; $SIG{ALRM} = sub { print STDERR "Timeout!\n"; kill INT => $p }; exec(@ARGV) unless $p = fork; alarm $s; waitpid $p, 0' 10 yes foo 
```

这会打印 'foo' 十秒钟，然后超时。将“10”替换为任意秒数，将“yes foo”替换为任意命令。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2010-09-22T11:40:02.520

从源代码编译以在 Mac 上工作时来自 Ubuntu/Debian 的超时命令。达尔文

10.4.*

[http://packages.ubuntu.com/lucid/timeout](http://packages.ubuntu.com/lucid/timeout)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-10-06T14:22:07.380

我对 perl one-liner 的变体为您提供了退出状态，而无需使用 fork() 和 wait() 并且没有杀死错误进程的风险：

```
#!/bin/sh
# Usage: timelimit.sh secs cmd [ arg ... ]
exec perl -MPOSIX -e '$SIG{ALRM} = sub { print "timeout: @ARGV\n"; kill(SIGTERM, -$$); }; alarm shift; $exit = system @ARGV; exit(WIFEXITED($exit) ? WEXITSTATUS($exit) : WTERMSIG($exit));' "$@" 
```

基本上 fork() 和 wait() 隐藏在 system() 中。SIGALRM 被传递给父进程，然后父进程通过将 SIGTERM 发送到整个进程组 (-$$) 来杀死它自己和它的子进程。万一子进程退出并且子进程的 pid 在 kill() 发生之前被重用，这不会杀死错误的进程，因为具有旧子进程 pid 的新进程不会在父 perl 进程的同一进程组中.

作为一个额外的好处，脚本也会以*可能*正确的退出状态退出。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-06-15T18:09:40.933

```
#!/bin/sh
( some_slow_task ) & pid=$!
( sleep $TIMEOUT && kill -HUP $pid ) 2>/dev/null & watcher=$!
wait $pid 2>/dev/null && pkill -HUP -P $watcher 
```

观察者在给定超时后杀死慢任务；脚本等待慢任务并终止观察者。

## 例子：

*   慢任务运行超过 2 秒并被终止

> 慢任务中断

```
( sleep 20 ) & pid=$!
( sleep 2 && kill -HUP $pid ) 2>/dev/null & watcher=$!
if wait $pid 2>/dev/null; then
    echo "Slow task finished"
    pkill -HUP -P $watcher
    wait $watcher
else
    echo "Slow task interrupted"
fi 
```

*   这个缓慢的任务在给定的超时之前完成

> 慢任务完成

```
( sleep 2 ) & pid=$!
( sleep 20 && kill -HUP $pid ) 2>/dev/null & watcher=$!
if wait $pid 2>/dev/null; then
    echo "Slow task finished"
    pkill -HUP -P $watcher
    wait $watcher
else
    echo "Slow task interrupted"
fi 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-02-12T15:02:11.123

尝试类似：

```
# This function is called with a timeout (in seconds) and a pid.
# After the timeout expires, if the process still exists, it attempts
# to kill it.
function timeout() {
    sleep $1
    # kill -0 tests whether the process exists
    if kill -0 $2 > /dev/null 2>&1 ; then
        echo "killing process $2"
        kill $2 > /dev/null 2>&1
    else
        echo "process $2 already completed"
    fi
}

<your command> &
cpid=$!
timeout 3 $cpid
wait $cpid > /dev/null 2>&
exit $? 
```

它的缺点是如果您的进程的 pid 在超时内被重用，它可能会杀死错误的进程。这不太可能，但您可能每秒启动 20000 多个进程。这可以修复。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-02-18T16:56:10.087

使用expect工具怎么样？

```
## run a command, aborting if timeout exceeded, e.g. timed-run 20 CMD ARGS ...
timed-run() {
  # timeout in seconds
  local tmout="$1"
  shift
  env CMD_TIMEOUT="$tmout" expect -f - "$@" <<"EOF"
# expect script follows
eval spawn -noecho $argv
set timeout $env(CMD_TIMEOUT)
expect {
   timeout {
      send_error "error: operation timed out\n"
      exit 1
   }
   eof
}
EOF
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-03-16T15:01:19.660

纯bash：

```
 #!/bin/bash

if [[ $# < 2 ]]; then
  echo "Usage: $0 timeout cmd [options]"
  exit 1
fi

TIMEOUT="$1"
shift

BOSSPID=$$

(
  sleep $TIMEOUT
  kill -9 -$BOSSPID
)&
TIMERPID=$!

trap "kill -9 $TIMERPID" EXIT

eval "$@" 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2010-08-15T09:47:08.333

我使用“timelimit”，它是 debian 存储库中提供的一个包。

[http://devel.ringlet.net/sysutils/timelimit/](http://devel.ringlet.net/sysutils/timelimit/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-10-11T17:45:37.160

对 perl 单行稍作修改将获得正确的退出状态。

```
perl -e '$s = shift; $SIG{ALRM} = sub { print STDERR "Timeout!\n"; kill INT => $p; exit 77 }; exec(@ARGV) unless $p = fork; alarm $s; waitpid $p, 0; exit ($? >> 8)' 10 yes foo 
```

基本上，exit ($? >> 8) 会转发子进程的退出状态。我只是在退出状态选择了 77 超时。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-08-31T15:40:44.330

有没有办法用“at”设置一个特定的时间来做到这一点？

```
$ at 05:00 PM kill -9 $pid 
```

看起来简单了很多。

如果您不知道 pid 号是多少，我假设有一种方法可以使用 ps aux 和 grep 编写脚本读取它，但不确定如何实现。

```
$   | grep someprogram
tony     11585  0.0  0.0   3116   720 pts/1    S+   11:39   0:00 grep someprogram
tony     22532  0.0  0.9  27344 14136 ?        S    Aug25   1:23 someprogram 
```

您的脚本必须读取 pid 并为其分配一个变量。我不是太熟练，但假设这是可行的。

# localization - 如何将商业软件翻译成多国语言？

> ID：601544
> 
> 赞同：2
> 
> 时间：2009-03-02T07:41:46.713
> 
> 标签：localization, internationalization

将商业软件翻译成多种不同语言的最佳做法是什么？目前我看到了 3 种可能的解决方案。

1.  您使用专业的翻译。问题是翻译者可能不理解上下文。翻译可以非常具体。如果您需要更新每个版本的翻译，也可能会产生很大的成本。它仅限于少数语言。

2.  您使用客户作为翻译。这对于商业软件是否可以接受？客户已经花钱了。有没有可以处理这个的框架？它需要额外的用户权限和投票系统来防止故意破坏。您将获得客户要求的所有语言的翻译。

3.  我们只支持英文版本。糟糕的翻译不会造成混乱。支持更简单。但是你限制了你的潜在客户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T07:48:50.267

我认为你应该去找专业的翻译人员……如今，在互联网上几乎可以很容易地找到任何语言的翻译人员。有专门的自由职业者网站。

当我需要完成翻译或写作工作时，我就会去那里。

它非常方便，非常适合口袋。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-23T17:31:50.450

国际化涵盖了这类事情，通常缩写为 i18n。已经有很多关于它的问题，还有很多资源。除了翻译之外，还有很多问题。这是一个很大的主题，如果你要从一种文化中分支出来，你需要熟悉它。

客户翻译是否合理取决于软件的类型。它不适用于收缩包装软件，但可能会被同意作为咨询软件安装的一部分。

如果您在内部拥有翻译专业知识，您可能想要使用它。例如，也许您可​​以翻译成您的母语（请不要告诉我您的母语是英语）。除此之外，聘请专业人士是要走的路。要考虑的一个问题是上下文，因为短语可以根据它们的意图进行不同的翻译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T07:49:40.563

有专业的技术翻译人员。所以这应该不是问题。

我们（开发人员）提供英语和荷兰语翻译。其他语言由专业人员提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T08:06:56.153

您可以两者兼得：将软件翻译成多种主要语言。在专业人士的帮助下，在了解背景和语言的普通工人的帮助下继续支持变革。

允许客户翻译频率较低的语言。gettext 等系统允许您创建独立的翻译词典，这些词典可以提供给客户，客户可以根据他们的需要创建全部或部分翻译。此外，软件更新不会完全阻止翻译。

这是开源项目中很常见的做法。当软件以英语开发并由社区提供翻译时。

> 我们只有英文软件

这通常不是一个好主意，让客户可以选择以自己的语言使用软件。很多国家的英语都不太懂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-09T08:00:58.477

可能有帮助的一件事是尽可能将图标用于常见任务。此外，如果您在单独的资源分支/数据文件中列出项目描述，翻译人员无需重新编译即可更轻松地工作和更新......我已经在商业和开源软件包中看到过很多次。#2 是死亡之吻，如果巧妙地使用图标，#3 并不是绝对必要的。只要最常见的东西下有一个带有翻译的图标（文件加载、保存、打开等），并且只要错误消息有意义，就可以解决许多问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-23T17:18:57.160

在您的应用程序中实现“翻译”角色，并为他提供简单的界面来翻译单词和消息。如果可能的话，也给他尝试软件的可能性（一些消息确实需要根据用例的上下文进行调整，即使文本的字面翻译正确

# php - 如何为特定用户隐藏 NTFS 中的文件夹

> ID：601547
> 
> 赞同：0
> 
> 时间：2009-03-02T07:45:15.470
> 
> 标签：php, svn, filesystems, ntfs

我对 PHP 和 SVN 有疑问。[看这里...](https://stackoverflow.com/questions/600997/how-can-i-hide-svn-directories-from-php) 使用[FUSE](http://apps.sourceforge.net/mediawiki/fuse/index.php?title=OperatingSystems)是一种选择，但乍一看，它似乎非常复杂。

是否有任何选项可以防止 NTFS 文件系统 WIN2003Server 对用户帐户完全隐藏目录（我可以设置 apache 在此帐户下运行）。

考虑到以下限制，这并不像看起来那么容易：

*   一定是模式匹配，我事先不知道会创建哪些SVN文件夹
*   我不能拒绝访问整个父文件夹，.SVN 和内容并排放置
*   简单地隐藏不起作用，PHP 不关心隐藏标志

有什么想法（或评论）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T09:40:22.620

恐怕答案是否定的：NTSF 中的权限不允许隐藏文件夹。以下是您可以在 NTFS 中授予/撤销的所有权限的列表：

*   完全控制（包括下面的所有内容）
*   遍历文件夹
*   列出文件夹
*   读取属性
*   读取扩展属性
*   创建文件
*   创建文件夹
*   写入属性
*   编写扩展属性
*   删除
*   读取权限
*   更改权限
*   取得所有权

忽略单个文件/目录是隐藏属性的用途。如果程序（typo3，对吗？）忽略了这个标志，你最好的办法是看看你是否可以*配置*它来处理它。（但这将是一个关于 SO 的新问题）。

# c# - PerlNet 的局限性是什么？

> ID：601550
> 
> 赞同：3
> 
> 时间：2009-03-02T07:47:15.700
> 
> 标签：c#, .net, perl, architecture

我已经将 PerlNet 用于数据提取项目。Perl 是一种强大的语言，用于提取数据和文本操作，具有巨大的 CPAN 模块。但是，我的程序需要某种 UI、线程……我决定使用 .NET C#。使用 Perl 开发工具包，我们可以选择将 Perl 模块包装到 .NET DLL 并直接从 C# 中使用该 DLL。

一切都很好，但我有一个关于 PerlNet 架构的问题。据我所知，PerlNet 是 ActiveState 和 Microsoft 之间的一个研究项目，用于在 .NET 中运行 Perl 代码，但我没有找到任何文档。

PerlNet 的局限性是什么？PerlNet 是如何构建的？

谢谢，明。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-02T09:09:19.717

有一本书“ [Programming Perl in the .NET Environment](https://rads.stackoverflow.com/amzn/click/com/0130652067) ”可以帮助你。

ActiveState 似乎没有任何可公开访问的在线文档提供有关 PerlNET 的任何类型的详细信息。但是如果 Perl Dev Kit 中没有包含一些文档，我会感到非常惊讶，即使听起来他们不再为它提供任何支持。

您可以在 perl.net@listserv.activestate.com 邮件列表或其[档案](http://aspn.activestate.com/ASPN/Mail/Browse/Threaded/perl.net)中找到问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T20:59:52.580

虽然对于 PerlNet 的构建方式，我真的不能说比现成的方式更多，但我会说，根据我的经验，它相当笨重而且不是很可靠。

如果这是一个“真正的”项目，即涉及金钱，我会避免使用 PerlNet。

具体来说，它似乎会破坏 .NET 中的共享内存，并且会导致异常崩溃。

也就是说，我已经有一段时间没有使用 PerlNet，所以它现在可能是一个更好的产品。

# c# - 正则表达式 - 仅当字符串包含任何字母字符时才匹配字符串

> ID：601554
> 
> 赞同：3
> 
> 时间：2009-03-02T07:48:06.633
> 
> 标签：c#, .net, regex, match, alpha

示例字符串

```
785*()&!~`a

##$%$~2343

455frt&*&* 
```

我想捕获第一个和第三个但不是第二个，因为它不包含任何字母字符请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T08:04:30.807

事实上，我认为`[a-zA-Z]`可能足以匹配您的字符串。

要捕获整个事物，请尝试：`^.*[a-zA-Z].*$`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T08:02:02.747

这是一种可能的方法：

```
.*[a-zA-Z]+ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T10:21:28.920

您也许应该澄清一下“catpuring”的含义：您是否想要整个字符串仅包含 ascii 位？

此外，您不会说它是否应该只匹配纯罗马字母（A 到 Z），或者它是否还应该匹配 Unicode 字符以匹配其他语言中的字符串。

如果你只需要测试你的字符串，在 C# 中你会这样做：

```
bool matching = Regex.IsMatch(myString, "[a-zA-Z]"); 
```

您不需要任何其他内容，因为`myString`字符串中的任何地方只有一个字母会匹配（根据您的定义）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T08:06:43.720

这是我最喜欢的 RegEx 测试网站：[Javascript Regexp Tester and Cheat Sheet](http://www.ninjavspenguin.com/regexp.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-13T11:16:18.740

如果要匹配所有字母（包括非 ascii 字母），请`p{L}`使用`[a-zA-Z]`. 请参阅[Unicode 类别](http://msdn.microsoft.com/en-us/library/20bw873z%28v=vs.100%29.aspx#CategoryOrBlock)。

# qt - 位图图像在 Qt Designer 中可见，但在 QDevelop IDE 中编译后我看不到它们

> ID：601555
> 
> 赞同：0
> 
> 时间：2009-03-02T07:48:07.227
> 
> 标签：qt, designer

在 qt-designer 中，我加载了位图图像，在预览中我可以查看图像。但是在 qdevelop IDE 中编译后，我根本看不到图像。

是否有任何程序将位图加载到 qdevelop。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T18:39:56.520

我想你会想要使用 Qt 的资源系统将位图添加到资源文件中，如果你希望能够在 Designer 中使用它们并让它们在你编译的应用程序中正确工作。我没用过，但例子看起来相当简单，而且 QDevelop 似乎在一定程度上支持资源系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T08:01:34.450

您是否已将 Qt 配置为使用所需的图像插件？

> [-no-gif] [-qt-gif] [-no-libtiff] [-system-libtiff] [-no-libpng] [-qt-libpng] [-system-libpng] [-no-libmng] [- qt-libmng] [-system-libmng] [-no-libjpeg] [-qt-libjpeg] [-system-libjpeg]

# html - html中的选框

> ID：601556
> 
> 赞同：0
> 
> 时间：2009-03-02T07:48:15.107
> 
> 标签：html, marquee

我想要一个“连续选取框文本”一遍又一遍......背靠背......我不希望文本在下一个开始之前完全滚动......我希望相同的文本开始滚动并继续...... .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T08:14:10.783

离题，但选框（无论是`marquee`标签还是基于 jQuery 的）[是](http://en.wikipedia.org/wiki/Marquee_tag) [邪恶](http://www.webdesignfromscratch.com/html-tag-reference/html-marquee-tag.php)的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T08:32:46.137

[jScroller2](http://jscroller2.markusbordihn.de/example/)可能在不使用 marquee 标记的情况下满足您的需求。

`marquee`不应使用该标记，因为它不是 HTML 或 XHTML 标准标记，它是为 Internet Explorer 和其他浏览器发明的，只是为了兼容性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T07:50:41.807

好吧，如果你想要一个自定义实现，我想你会想要使用 JQuery 创建一个。选框应该很容易创建。你在网上找过现成的剧本吗？

# enterprise-library - 验证器可以与多个规则集相关联吗？

> ID：601557
> 
> 赞同：2
> 
> 时间：2009-03-02T07:48:26.883
> 
> 标签：enterprise-library, validation-application-bl

使用 (MS) 企业库、验证应用程序块 (VAB)，您可以在代码中包含属性以定义规则集。我已将属性应用于类的属性，并定义了两个规则集（属性分为两个验证组）。不幸的是，这两个规则集之间存在一些重叠（一些属性在两个组中）。

一个验证属性可以属于多个规则集吗？语法是什么样的？如果这不可能，是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T15:58:50.450

解决方法是简单地为每个规则集复制每个验证属性。

# c# - 多线程参考？

> ID：601558
> 
> 赞同：18
> 
> 时间：2009-03-02T07:48:41.267
> 
> 标签：c#, c++, multithreading, reference

我在询问关于使用 C++/C# 的良好示例的概念方面的多线程编程的良好参考？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-02T11:30:27.770

很好的阅读参考：
[CLR 中的线程管理](http://msdn.microsoft.com/en-us/magazine/dd252943.aspx)
[循环访问 ThreadPool](http://msdn.microsoft.com/en-us/magazine/dd347845.aspx)
[使用 C#进行多线程](http://www.c-sharpcorner.com/UploadFile/udeshikah/002202009021606AM/0.aspx)
[为什么线程安全集合这么难？](http://blogs.msdn.com/jaredpar/archive/2009/02/11/why-are-thread-safe-collections-so-hard.aspx)
[C# 中](http://www.albahari.com/threading/)
[的线程 Jeffrey Richter 的强力线程库](http://www.wintellect.com/PowerThreading.aspx)
[使用条件变量实现线程安全队列](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)
[线程 Building Blocks.org！](http://www.threadingbuildingblocks.org/)
[Sutter's Mill - 有效并发：了解并行性能](http://herbsutter.wordpress.com/2008/11/02/effective-concurrency-understanding-parallel-performance/)
[Sutter's Mill - 有效并发：正确使用线程 = 隔离 + 异步消息](http://herbsutter.wordpress.com/2009/03/16/effective-concurrency-use-threads-correctly-isolation-asynchronous-messages/)
[线程同步（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173179(VS.80).aspx)
[如何使用 Visual C# 在多线程环境中同步访问共享资源](http://support.microsoft.com/default.aspx?scid=kb;en-us;816161)
[正确使用线程 =隔离+异步消息](http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=215900465)

[在 .NET 中同时考虑](http://codebetter.com/blogs/matthew.podwysocki/archive/2008/05/12/thinking-in-concurrently-in-net.aspx)[C/C++ 的并行和多核计算](http://www-949.ibm.com/software/rational/cafe/blogs/ccpp-parallel-multicore)
[在 .NET Framework 中编程线程池](http://msdn.microsoft.com/en-us/library/ms973903.aspx)
[Visual Basic .NET：使用 .NET 轻松实现跟踪、日志记录和](http://msdn.microsoft.com/en-us/magazine/cc302019.aspx)
[线程-线程](http://msdn.microsoft.com/en-us/magazine/cc300701.aspx)
[并发危害 - 解决多线程代码中的 11 个可能问题](http://msdn.microsoft.com/en-us/magazine/cc817398.aspx)
[信息：OLE 线程模型的描述和工作原理 - COM STA MTA](http://support.microsoft.com/kb/150777)
[C# 线程](http://tripous-net.com/CSharp_Theading.html)
[线程同步（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173179%28v=VS.80%29.aspx)
[.NET Framework 3.5 中的并发概述 .NET 中的](http://igoro.com/archive/overview-of-concurrency-in-net-framework-35/)
[多线程：介绍和建议](http://www.yoda.arachsys.com/csharp/threads/)
[Oracle - 多线程编程指南](http://download.oracle.com/docs/cd/E19963-01/html/821-1601/mtintro-75924.html)
[Multithreading Tutorial](http://www.computersciencelab.com/MultithreadingTut1.htm)
[64-Bit Programming with Visual C++](http://msdn.microsoft.com/en-us/library/h2k70f3s%28v=vs.80%29.aspx)
[如何：创建和终止线程（C# 编程指南）](http://msdn.microsoft.com/en-us/library/7a2f3ay4%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-02T07:56:45.227

*   [带有 Java 示例的多处理器编程艺术](https://rads.stackoverflow.com/amzn/click/com/0123705916)（许多可以用 C++ 重写，但有些由于垃圾收集而变得棘手）。
*   [并行编程模式](http://www.justsoftwaresolutions.co.uk/reviews/patterns_for_parallel_programming_review.html)
*   [并发和协调运行时](http://www.microsoft.com/ccrdss/)、[并行框架扩展](http://blogs.msdn.com/pfxteam/)、[Microsoft 并发页面](http://msdn.microsoft.com/en-us/concurrency/default.aspx)- Microsoft 的不同 .NET 方法试图用不同的高级并发概念赶上 Java（JSR166、JSR 166y）
*   [Java Concurrency in Practice](http://www.javaconcurrencyinpractice.com/)（不符合 C++/C# 标准）
*   [部分无锁数据结构](http://www.cl.cam.ac.uk/research/srg/netos/lock-free/)
*   [C++ Concurrency in Action](http://www.manning.com/williams/) - 将从现代 C++ 的角度介绍多线程
*   [Herb Sutter 关于并发](http://herbsutter.wordpress.com/)
*   C++0x 提案，例如[N2709](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2709.html)、[N2744](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2744.html)等。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-02T08:09:33.353

我推荐[Joe Duffy](http://www.amazon.co.uk/Concurrent-Programming-Windows-Architecture-Development/dp/032143482X/ref=sr_1_1?ie=UTF8&s=books&qid=1235981298&sr=8-1)的关于 Windows 并发的新书。他涵盖了 Win32 API 和 .NET 框架。优秀的阅读。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-02T07:58:45.003

[http://www.albahari.com/threading/](http://www.albahari.com/threading/)

Joseph Albahari 的免费穿线书。

PS：网站上还有中文、捷克文、波斯文、俄文的翻译。。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T07:59:20.197

我从 amazon购买了这本书[C# Threading Handbook (Paperback)的 vb.net 版本，其中包含我需要的所有参考资料。](http://www.amazon.co.uk/C-Threading-Handbook-Kourosh-Ardestani/dp/1861008295/ref=sr_1_2?ie=UTF8&qid=1235980688&sr=8-2)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-02T08:02:23.823

MSDN 库虽然冗长，但详细介绍了您需要的大部分信息，并提供了指向大量教程的链接 -[文章](http://msdn.microsoft.com/en-us/library/ms173179(vs.80).aspx)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T08:08:38.317

[The Little Book of Semaphores](http://www.greenteapress.com/semaphores/)是一本免费的在线入门教科书。示例代码全部在 Python 中。

# iphone - iPhone RSS 缩略图

> ID：601563
> 
> 赞同：1
> 
> 时间：2009-03-02T07:50:46.817
> 
> 标签：iphone, rss, sdk, parsing, thumbnails

我有一个简单的 RSS 阅读器。故事被下载，放入 UITableView，当你点击它时，每个故事都会加载到 UIWebView 中。它工作得很好。不过现在，我想在左侧添加一张图片（就像您在 YouTube 应用中看到的那样）。但是，由于我的应用程序是从 RSS 提要中提取的，我不能简单地指定图像 X 出现在 X 行中，因为 X 行明天将是 Y 行，事情会出现问题，你知道吗？我目前正在从[YouTube RSS 提要](http://feed://gdata.youtube.com/feeds/base/standardfeeds/most_popular?client=ytapi-youtube-browse&alt=rss&time=today)中提取，并且可以获得视频标题、描述、发布日期，但我不知道如何提取提要中的每个条目之外的小缩略图。

正如您可能知道的那样，我是一个编码新手（这是我的第一个应用程序，而不是 Hello World 应用程序），我对自己缺乏知识感到非常沮丧。

谢谢！

顺便说一句，这里有一些示例代码：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{            
    //NSLog(@"found this element: %@", elementName);
    if (currentElement) {
        [currentElement release];
        currentElement = nil;
    }
    currentElement = [elementName copy];
    if ([elementName isEqualToString:@"item"]) {
        // clear out our story item caches...
        item = [[NSMutableDictionary alloc] init];
        currentTitle = [[NSMutableString alloc] init];
        currentDate = [[NSMutableString alloc] init];
        currentSummary = [[NSMutableString alloc] init];
        currentLink = [[NSMutableString alloc] init];
    }

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{     
    //NSLog(@"ended element: %@", elementName);
    if ([elementName isEqualToString:@"item"]) {
        // save values to an item, then store that item into the array...
        [item setObject:currentTitle forKey:@"title"];
        [item setObject:currentLink forKey:@"link"];
        [item setObject:currentSummary forKey:@"summary"];
        [item setObject:currentDate forKey:@"date"];

        [stories addObject:[item copy]];
        NSLog(@"adding story: %@", currentTitle);
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    //NSLog(@"found characters: %@", string);
    // save the characters for the current item...
    if ([currentElement isEqualToString:@"title"]) {
        [currentTitle appendString:string];
    } else if ([currentElement isEqualToString:@"link"]) {
        [currentLink appendString:string];
    } else if ([currentElement isEqualToString:@"description"]) {
        [currentSummary appendString:string];
    } else if ([currentElement isEqualToString:@"pubDate"]) {
        [currentDate appendString:string];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T12:20:27.043

我建议尝试使用[TouchXML](http://code.google.com/p/touchcode/wiki/TouchXML)进行 xml 解析。我发现它更容易使用。

像获取任何其他文本字段一样获取图像的 url。然后，当您创建对象并将其添加到故事中时，请执行以下操作：

```
currentImage = [UIImage imageWithData:[NSData dataWithContentsOfURL: [NSURL URLWithString: theUrl]]] 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T23:22:48.890

我会使用`NSScanner`从提要项中扫描您的网址并获取 youtube 视频 ID。然后我会使用视频 ID 从 URL 获取缩略图。您可以从这里的答案中选择您想要的缩略图 URL：[https ://stackoverflow.com/a/2068371/1484168](https://stackoverflow.com/a/2068371/1484168)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-11-03T11:36:13.820

有同样的问题，但通过 Youtube API 的引用解决了，

将此视为您的 youtube 提要，

http://gdata.youtube.com/feeds/base/users/[插入用户名]/uploads

您将在其中获得带有 media:thumbnail 标签的 xml，您可以使用它来显示 youtube 的缩略图。

希望对你有帮助！！！

# user-interface - 你见过最不理性的用户行为是什么？

> ID：601570
> 
> 赞同：10
> 
> 时间：2009-03-02T07:55:29.817
> 
> 标签：user-interface, usability, user-feedback

虽然新手软件设计师希望他们的用户行为理性，但事实并非如此；我已经多次看到用户感知与现实完全脱节，或者反馈显然是不合理的。

我认为*我们应该适应*，而不是相反。

我知道只有一种方法可以做到这一点：倾听用户的意见，尤其是关于他们不喜欢他们使用的软件的什么。

如果到目前为止我学到了一件事；他们经常抱怨人们意想不到的事情

你从用户那里学到了什么意想不到的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-02T07:56:22.857

几年前，医院（至少是法国医院）使用旧的 win 3.11 软件运行。每一项任务都很乏味。将某人从一个房间移动到另一个房间对于专家用户来说需要 5 分钟

我的一个朋友正在向这些人销售最新的软件。对于一个初学者来说，同样的简单任务需要 30 秒。

虽然大多数用户对新软件非常满意，但也有少数用户在抱怨，这并不奇怪（总是有少数用户在抱怨）。更出乎他们意料的是他们的原因：软件太慢了。“同样简单的任务是瞬间完成的，现在需要很长时间才能完成。把我的旧软件还给我”，他们会说。

我的朋友决定见他们，并要求他们提供他们抱怨的慢的现场演示。

“看，用户说，用我的旧软件：我输入名字，输入，名字，输入，入场号，输入，旧房间号，[……在这里插入 5 分钟……] 新房间号输入……它已经完成了......看......一切都是瞬间的”</p>

“现在，看看你的软件。正如你教我的那样，我做了一个拖放操作。我等，我等……看，它完成了……我已经等了将近 30 秒……”</p>

这是一个真实世界的例子。它真的发生了。**我很确定，如果软件被修改为要求提供在 30 年代之后会丢弃的无用信息，那么该用户对新软件的感觉会好得多**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-02T08:22:13.323

如果你仔细想想，不存在非理性的用户行为，只是你的期望与他们的期望不匹配。关闭它的唯一方法是通过对话。这并不一定意味着进行可用性研究，通常正确的对话是让他们阅读帮助，以便轻松处理差异。

唯一错误的做法是不听他们在说什么 - 或者听而不是真正听到他们（请参阅此处关于 Mac 上的 IE 的帖子 - 这是傲慢的高度）。当然，您会遇到一些不喜欢更改并且会抱怨任何事情的人，但一般来说，如果用户会花时间指出您的软件中的某些错误，那么您应该倾听。你可以选择忽略它们，但如果你听对了，你可能会很容易地发现真正的宝石。

我不相信您的用户或客户会经常为您创新，但我坚信他们是您的软件可用的关键，而可用性直接导致成功。因此，将它们描述为非理性可能不符合您或他们的最佳目的。最好认真对待它们，并过滤掉您认为不好的反馈。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-02T08:02:55.320

多年前为手持设备开发时，一位用户与我联系，他抱怨他们的设备在通电后立即关闭。原来是一个错误；启动消息以“按任意键继续”行结束。它应该说“按任何键，除了标有电源的大红色键，继续”。

多年来我学到的一件事是，在进行任何接近设计之前与最终用户进行需求分析的时间非常重要，了解用户的文化和教育背景也非常重要。设计外观和工作方式与现有手动系统相似的计算机系统是一个良好的开端，理解工作流程也是如此。我参与的另一个手持货车销售交付系统被指定在交付时寻找屏幕上的客户签名，这是完成交易所必需的。事实证明，大多数交付实际上是在早上有人签收之前发生的，因此感知到的工作流程与现实完全不符。客户 IT 人员实际上并不知道这一点，业务分析师也不知道。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-02T08:26:51.033

在我之前的工作中，我正在为一家大银行设计一个庞大的交易软件。该软件通常需要大约 5 分钟才能启动。

当然，用户对启动时间的抱怨很多，尤其是白天软件崩溃时，这种情况时有发生。

**从我们添加详细进度条的那一天起（进度非常规律，带有剩余项目数量的指标），投诉几乎停止了。**

典型的用户会说“我以前需要很长时间才能加载，但现在，它非常快”

我们的下一步是在加载数据之前而不是之后显示用户界面（从 IT 的角度来看这更有意义）

**这一次，由于在加载期间影响 UI 的成本，*修改导致性能略有下降*（从 500 万到 5"30）。从用户的角度来看，这种方式的软件要快得多！！**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T08:58:44.047

我曾经为图像制作 cms。管理员基本上会浏览用户制作的图像页面，并检查他想要发布的图像。我写了一本关于系统如何工作的很好的手册，但是因为每个人都知道人们不阅读手册，所以我在页面上放了一些指南来告诉你该怎么做（在这种情况下，比如：“选中你想要的每个图像的框发布”）。

没过多久，有人拉住我的袖子：“你的程序有一个错误。它实际上扔掉了我*没有*选择的图像，而*不是*我选择的图像”。

问题是通过让他大声朗读页面上的文字来解决的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T08:35:02.763

> 虽然新手软件设计师希望他们的用户行为理性，但事实并非如此；我已经多次看到用户感知与现实完全脱节，或者反馈显然是不合理的。
> 
> 我认为我们应该适应，而不是相反。

你是说我们应该适应非理性行为吗？软件开发已经够不合理了（动态语言、测试驱动开发……），你还指望我们单方面倒退以适应一些扭曲的期望？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T10:41:43.050

几年前，我设计了一个小应用程序，主要是为了帮助用户在数据库中输入复杂的数据。他们的旧方法是将所有内容输入到 Excel 工作表中（无需任何形式的验证），然后使用 vba 宏。

我的新程序添加了验证，并且能够自动填充他们之前手动输入的几乎一半的数据。

我预计会成功......它根本不是......:)

“简直无法使用”，他们说……我已经测试过了，让我妈妈测试过……我的软件很好……

事实上，这些用户非常习惯于输入重复数据，以至于他们只使用键盘，而不是鼠标。当然，我没有想过正确管理标签顺序，所以每次点击“标签”时，光标都会到处乱跳，因此“无法使用”评论！

# c# - 为什么我的禁用按钮会变色？

> ID：601572
> 
> 赞同：1
> 
> 时间：2009-03-02T07:56:42.060
> 
> 标签：c#, winforms

我的问题是：当我的应用程序打开时，我禁用了所有按钮（在 form_Load 中）并且它们的颜色变为背景颜色。但后来我做了一些动作（比如点击一个按钮），在这个动作中我再次禁用了按钮。

现在这些按钮中的一些变成灰色，而其他按钮变成背景。

为什么是这样？我不想要灰色效果。通常，当我在应用程序开始时禁用按钮时，它会变成我期望的颜色，但是当我再次尝试禁用它们时，出现了这种奇怪的行为。该怎么办？

我的代码是这样的：

```
private void _btnDownload2PC_Click(object sender, EventArgs e)
{
    // do action 
    _btnDownloadToPC.Enabled=false; // its color became gray
    _btnDownloadToPhone.Enabled=false; // its color became like the 
                                       // background color and it can't 
                                       // be pressed 
} 
```

我发现问题出在我使用`button_MouseLeave()`or`button_MouseMove()`函数时。例如：

```
private void _btnOneToCort_MouseLeave(object sender, EventArgs e)
{
    this._btnOneToCart.Image=global::MyProject.Properties.Resources.button3over;
} 
```

但这没有意义。为什么这个功能会改变我的按钮设置（我不知道这些是什么）当我使用这些功能时会出现这种奇怪的行为，但是当我不这样做时，一切正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T02:34:18.710

您可以以编程方式访问按钮的颜色。设置断点并执行此操作以查看它们是否真的发生了变化。

我的猜测：您设置的图像具有与标准禁用颜色不同的灰色背景。您将需要编辑图像并删除背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T08:07:39.833

为什么不禁用设计器中的按钮？如果不可接受，请在表单构造函数中执行此操作，而不是 Form_Load。

另外，如果它被禁用，你怎么能点击按钮？

表单颜色设置是默认的吗？您是否更改了 Windows 主题颜色首选项？

# sqlite - 如何从 sqlite3 中获取所选结果的行数？

> ID：601600
> 
> 赞同：37
> 
> 时间：2009-03-02T08:13:02.130
> 
> 标签：sqlite, count

我想获取所选行数以及所选数据。目前我要使用两条sql语句：

一个是

```
select * from XXX where XXX; 
```

另一个是

```
select count(*) from XXX where XXX; 
```

可以用单个sql字符串实现吗？

我查看了 sqlite3 的源代码，发现了`sqlite3_changes()`. 但该功能仅在数据库更改时（之后`insert, delete or update`）才有用。

谁能帮我解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2011-04-06T09:22:45.397

试试这个方法

```
select (select count() from XXX) as count, * 
from XXX; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-02T10:10:27.790

SQL 不能混合单行（计数）和多行结果（从表中选择数据）。这是返回大量数据的常见问题。以下是一些如何处理此问题的提示：

*   读取前 N 行并告诉用户“有超过 N 行可用”。不是很精确，但通常足够好。如果您保持光标打开，您可以在用户点击视图底部时获取更多数据（谷歌阅读器这样做）

*   与其直接选择数据，不如先将其复制到临时表中。INSERT 语句将返回复制的行数。稍后，您可以使用临时表中的数据来显示数据。您可以在这个临时表中添加一个“行号”以使分页更简单。

*   在后台线程中获取数据。这允许用户在数据网格或表格填充更多数据时使用您的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T02:34:50.983

```
select (select COUNT(0) 
            from xxx t1 
            where t1.b <= t2.b 
            ) as 'Row Number', b from xxx t2 ORDER BY b; 
```

试试[这个](http://old.nabble.com/sequential-row-numbers-from-query-td22746903.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T08:20:11.177

您可以将它们组合成一个语句：

```
select count(*), * from XXX where XXX 
```

或者

```
select count(*) as MYCOUNT, * from XXX where XXX 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T08:18:26.703

一旦你已经有了`select * from XXX`结果，你就可以在你的程序中找到数组长度，对吧？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-26T01:44:23.397

对于那些仍在寻找另一种方法的人，我发现获得总行数的更优雅的方法是使用 CTE。这确保计数只计算一次：

```
WITH cnt(total) as (SELECT COUNT(*) from xxx) select * from xxx,cnt 
```

唯一的缺点是如果需要 WHERE 子句，它应该在主查询和 CTE 查询中应用。

在第一条评论中，Alttag 说运行 2 个查询没有问题。我不同意这一点，除非两者都是独特交易的一部分。如果没有，源表可以通过来自另一个线程/进程的任何 INSERT 或 DELETE 在 2 个查询之间进行更改。在这种情况下，计数值可能是错误的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-27T09:58:17.800

要获取唯一标题的数量，您需要将 DISTINCT 子句传递给 COUNT 函数，如下所示：

```
SELECT
 COUNT(DISTINCT column_name)
FROM
 'table_name'; 
```

来源：[http ://www.sqlitetutorial.net/sqlite-count-function/](http://www.sqlitetutorial.net/sqlite-count-function/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-16T12:52:50.197

```
int rows_count = 0;

while (sqlite3_step(stmt) == SQLITE_ROW)
{
    rows_count++;
}

// The rows_count is available for use

sqlite3_reset(stmt);  // reset the stmt for use it again

while (sqlite3_step(stmt) == SQLITE_ROW)
{

    // your code in the query result

} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-03-02T08:25:47.653

如果您使用[`sqlite3_get_table`](http://www.sqlite.org/c3ref/free_table.html)而不是准备/步骤/完成，您将在一个数组（“结果表”）中一次获得所有结果，包括列的数量和名称以及行数。然后你应该释放结果`sqlite3_free_table`

# ip-address - 区分内网和官方IP地址

> ID：601602
> 
> 赞同：6
> 
> 时间：2009-03-02T08:15:27.210
> 
> 标签：ip-address, intranet

如何确定给定 IP 地址是官方 Internet 地址还是内部 Intranet IP 地址？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-02T08:19:12.987

Intranet IP 通常在私有 IP 范围内：

```
10.0.0.0 through 10.255.255.255
172.16.0.0 through 172.31.255.255
192.168.0.0 through 192.168.255.255 
```

这些不适用于互联网 IP 地址。

另请参阅[http://compnetworking.about.com/od/workingwithipaddresses/f/privateipaddr.htm](http://compnetworking.about.com/od/workingwithipaddresses/f/privateipaddr.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T08:19:48.617

> 10.0.0.0 - 10.255.255.255`（10.0.0.0/8，*前*A 类）
> 
> 172.16.0.0 - 172.31.255.255`（172.16.0.0/12，*前*B 类）
> 
> 192.168.0.0 - 192.168.255.255`（192.168.0.0/24，*前*C 类）

发现给定的IP属于那个，取决于你以什么形式给出IP。使用字节的最佳方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T08:19:27.543

[RFC 1918定义了一些 Internet](https://www.rfc-editor.org/rfc/rfc1918)*上不*存在的IP 地址范围，因此适合 Intranet 使用（即 10/8、172.16/12、192.168/16）。

除此之外，你的意思是什么？您是想找出哪些 IP 与您自己的机器在同一子网中，还是在其他第 3 方网络上？

另见[http://en.wikipedia.org/wiki/Private_network](http://en.wikipedia.org/wiki/Private_network)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T08:20:01.690

互联网号码分配机构 (IANA) 为私有互联网保留了以下三个 IP 地址空间块：

```
 10.0.0.0        -   10.255.255.255  (10/8 prefix)
 172.16.0.0      -   172.31.255.255  (172.16/12 prefix)
 192.168.0.0     -   192.168.255.255 (192.168/16 prefix) 
```

[资源](https://www.rfc-editor.org/rfc/rfc1918)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-19T01:41:34.703

除了那些 A、B、C 内网类之外，还有其他[保留地址](https://en.wikipedia.org/wiki/Reserved_IP_addresses)不用作公共 Internet IP，尤其是：

*   127.xyz（环回）
*   0.xyz（可以保留广播[解释here](https://superuser.com/a/388135/90128)）
*   224-255.xyz（多播和未来使用）

还有许多[浪费的 IP 地址](https://en.wikipedia.org/wiki/List_of_assigned_/8_IPv4_address_blocks)（愚蠢时代遗留下来的）。您不会看到范围内的大多数地址

*   cca 3-40.xyz（即苹果电脑浪费了 17.xyz）

# iphone - 您建议我在创建 iPhone 游戏之前学习哪些技术/概念？

> ID：601604
> 
> 赞同：0
> 
> 时间：2009-03-02T08:16:23.290
> 
> 标签：iphone, objective-c, cocoa

抱歉，如果这是一个广泛的问题，但除了 Objective-C、Cocoa 和 OpenGL ES 之外，您建议我在为 iPhone 编写游戏之前阅读哪些技术或概念？我是一名初级游戏开发者，需要我能得到的所有帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-02T08:23:21.853

数学 - 我会建议这个话题

游戏开发中应用程序感兴趣的一些示例领域

微积分、几何、笛卡尔坐标系、向量、矩阵、变换等...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-02T13:45:49.973

Sorry, my answer is not computing related.

A game tells a story, a great game tells a great story. So I would suggest to learn principles of storytelling.

Not going as scholar as [Aristotle's Poetics](http://en.wikipedia.org/wiki/Poetics_(Aristotle)), I recommend more modern [Story by Robert McKee](https://rads.stackoverflow.com/amzn/click/com/0060391685). It focuses on movie making, but I am pretty sure that many of the concepts he develops can be applied to game making.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-02T08:23:12.837

你应该阅读一些关于[GameDev](http://www.gamedev.net)的文章。显然，学习计算机图形学中的一些基本概念会很有帮助。但实际上，一旦你到达了可以编写 Objective-C 并理解 API 的地方，那就继续开始吧。在这个过程中你会学到很多东西；当然，继续学习和阅读我提到的这些内容，但开始编码。找一些关于游戏编程的书，特别是人工智能等等。继续进行编程吧。当然，一定要彻底学习你的语言。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T14:22:05.113

坦率地说，我发现在我真正动手之前，我永远不知道我需要知道什么。这就是为什么我[在这里](https://stackoverflow.com/questions/581784/what-do-i-have-to-learn-to-get-done-with-a-3d-racing-game-for-the-iphone-what-to/583368#583368)建议想要设计 3-D iPhone 游戏的人从一些更简单、有针对性的项目开始。这些有针对性的项目可以在您将其付诸实践时教给您核心概念。OpenGL 似乎是一个无法理解的黑匣子，直到我让自己用它执行一些简单的任务。几周后，我有了一个基于它的应用程序。

在大学里，我会花数周时间试图理解热力学某个方面背后的理论，但随后我会看到它的一个实际应用，整个事情就会落实到位。从那时起，我一直专注于寻找概念的具体应用，然后再花太多时间研究它们背后的纯理论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T11:01:54.000

深入了解什么是出色的游戏 UI，尤其是在 iPhone 上，这将是关键，尤其是它提供的选项，无论是加速度计还是屏幕触摸输入。

我一定会尝试现有的游戏，看看哪些有效，哪些无效，以及哪些获得了良好的反馈。您可能还想查看基于 Flash 和 DS 的游戏，以了解在其他小屏幕/设备上的效果。

# svn - SVN 工作副本的本地版本控制经验？

> ID：601609
> 
> 赞同：3
> 
> 时间：2009-03-02T08:19:56.277
> 
> 标签：svn, version-control, versioning

在我的工作地点，我们使用 SVN 和 TortoiseSVN (Windows XP) 作为客户端。在此期间，我的通勤时间和离线工作时间较长。
现在，我想在本地进行某种“扩展撤消”；即我想对我的 SVN 工作副本进行本地版本控制，以便敢于重构。
完全切换到例如 git、mercurial 等不是一种选择，因为该公司使用 SVN。

我想知道的是，是否有人有任何版本控制本地 SVN 工作副本的经验，也许是通过运行本地 git 或类似的？
有没有潜在的缺点？（可能会弄乱 .svn 文件夹或类似文件夹）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T08:27:00.287

我使用 Git 作为本地 Subversion 客户端进行工作，效果很好。当您执行`git svn clone`Subversion 存储库时，您得到的检出没有隐藏`.svn`目录，而是一个完整的 Git 存储库。使用本地轻量级分支来组织我自己的开发的能力对我来说是一个杀手级功能。

我一直使用的其他功能是`git stash`、分阶段提交和`git add -p`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T08:28:41.047

您可以使用 svn export 创建工作的快照，然后创建自己的 subversion 存储库，并将工作存储库中的快照用作初始签入。

然后您可以进行更改并使用颠覆（您的本地存储库副本），直到您完成。当然，您可以从主工作存储库进行一些定期合并，以确保您的内容是最新的。最后，当你的 refectoring 完成后，只需对你的本地存储库做一个 svn 导出快照，然后将它合并回你的主工作存储库。

这有点粗略，但这是管理此类工作流程的唯一方法。

如果您有足够的定期工作机会。您可以创建内容的分支并专门从工作存储库处理分支，并在需要扩展撤消功能时使用本地存储库方法。当然，此时使用本地版本控制系统不会限制您进行颠覆，因此请自行选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T09:02:14.477

我通常这样做：

1.  获取 SVN 存储库作为工作副本。
2.  在此工作副本中初始化 Git 存储库。
3.  骇客骇客；
4.  提交到我的 Git 存储库。
5.  来自公司 SVN 的更新。
6.  解决冲突。
7.  向公司 SVN repo 提交完整的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T09:59:03.340

您可能想尝试[SVK](http://svk.bestpractical.com/view/HomePage)，它是一个基于颠覆的去中心化 VCS。它可用于镜像笔记本电脑上的官方存储库，并将您的提交与官方主干同步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T08:28:07.630

上次查看 SVN 的状态时，本地签入支持仍然是一个长期的功能计划。另一方面，使用 git-svn，Git 绝对是一种选择。也就是说，如果您的架构是 Unix，AFAIK，Windows 平台上尚不支持 git-svn。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T08:28:52.730

没有什么能阻止运行本地 SVN 服务器。我就是这样用的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T08:29:07.410

Git 将是一个很好的解决方案（因为您可以非常轻松地创建和合并许多分支）但是：

*   将修改重新导入 svn 时，应首先清理在 git 下创建的许多中间分支；
*   git-svn 不适用于 Git 的 Windows 发行版，因此如果您在 Windows 上工作，您可能需要使用 Linux 虚拟映像
*   如果您可以使 git-svn 运行，请使用 git2svn et svn2git ruby​​ 脚本，如[本问题所述](https://stackoverflow.com/questions/572893/cloning-a-non-standard-svn-repository-with-git-svn/572898#572898)

# hibernate - 如何在 HQL 中模拟 NVL

> ID：601615
> 
> 赞同：34
> 
> 时间：2009-03-02T08:22:13.480
> 
> 标签：hibernate, hql

我试过这个：

```
from Table where (:par1 is null or col1 = :par1) 
```

但它发生了

```
from Table where :par1 is null 
```

始终返回表的所有行，即使 :par1 不为空。

尽管

```
 select * from table where col1 = 'asdf' 
```

不返回任何行。

我不能使用本机语法，因为我的应用程序应该在不同的数据库引擎上运行

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2009-03-02T08:31:42.210

`nvl`HQL 中的命令等价于`coalesce`命令。 如果不为null，则`coalesce(a,b)`返回，否则返回。`a``a``b`

因此，您需要以下内容：

```
from Table where col1 = coalesce(:par1, 'asdf') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-22T16:05:45.673

如果你的底层数据库是 Oracle，那么你可以使用 nvl 函数，我试过了，它对我有用。

```
Query query = session.createQuery(
                    " select ft from FeatureToggle ft left outer join ft.featureToggleCustomerMap "
                    + " ftcm where nvl(ftcm.custId,:custId) = :custId");

query.setParameter("custId", Long.valueOf(custId)); 
```

您的用例可能不同，如果数据库是 nvl，您可以根据您的要求使用 nvl 函数，不确定其他数据库的影响，因为我仅将此代码用于 Oracle。希望能帮助到你。

# .net - 为什么没有 HybridDictionary 的通用版本？

> ID：601618
> 
> 赞同：6
> 
> 时间：2009-03-02T08:23:40.200
> 
> 标签：.net, generics

显然[没有 HybridDictionary 的通用版本](https://stackoverflow.com/questions/386823/is-there-a-generic-version-of-the-hybriddictionary)。

为什么是这样？当您需要将项目存储在字典中但不知道其中将包含多少项目时，我一直认为这是最佳实践。

也许是因为 Dictionary<> 比 HybridDictionary 具有更好的性能和更少的开销，即使其中只有几个元素。

还是有我不知道的新的最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T08:28:11.047

IMO，`HybridDictionary`简直是无用的。除非你正在做一些微优化（即使是这种情况，你最好使用具有 O(1) 查找时间的智能索引数组），在这个类中绝对不需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T08:31:05.330

通用字典取代了 Hybrid。通用变体可能**是**混合变体，因为它们考虑到要存储的数据量，以最有效的方式存储和排序数据。

# objective-c - 使用 NSPredicate 遍历多个 Core Data 对象

> ID：601619
> 
> 赞同：0
> 
> 时间：2009-03-02T08:24:07.110
> 
> 标签：objective-c, cocoa, core-data, predicate

我在 Cocoa 中遇到了核心数据模型的问题。这可能是一个相当基本的问题。我的核心数据模型的一部分如下所示。给定 OutputCell 实体中单元格属性的值，我想返回相关的 HistogramBar。

[![在 Twitter 上与 Twitpic 分享照片](https://twitpic.com/show/thumb/1slwa.jpg)](http://twitpic.com/1slwa "在 Twitter 上与 Twitpic 分享照片")

我正在使用以下谓词，但它只返回一个空数组。我已经设法使用直方图实体让它工作，但我似乎无法从 HistogramBar 通过直方图遍历到 OuputCell。我使用的谓词是：

```
NSEntityDescription *histogramBarEntityDescription = [NSEntityDescription entityForName:@"HistogramBar" 
                                                                inManagedObjectContext:[theDocument managedObjectContext]];
NSFetchRequest *histogramBarRequest = [[[NSFetchRequest alloc] init] autorelease];
[histogramBarRequest setEntity:histogramBarEntityDescription];
NSPredicate *histogramBarPredicate = [NSPredicate predicateWithFormat:@"(histogram.outputCell.cell = %@)", theOutputCell];
[histogramBarRequest setPredicate:histogramBarPredicate];
NSError *histogramBarError = nil;
NSArray *histogramsArray = [[theDocument managedObjectContext] executeFetchRequest:histogramBarRequest 
     error:&histogramBarError]; 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T22:50:13.080

我的问题解决了，代码中的恶意注释阻止了 HistogramBar 实体的创建。在这种情况下，对一些 NSLog 的详细检查有助于发现问题。

# c# - 属性与方法

> ID：601621
> 
> 赞同：167
> 
> 时间：2009-03-02T08:24:47.687
> 
> 标签：c#, properties, methods

快速提问：您何时决定使用属性（在 C# 中）以及何时决定使用方法？

我们正忙于进行这场辩论，并且发现了一些值得商榷的地方，我们应该使用属性还是方法。一个例子是这样的：

```
public void SetLabel(string text)
{
    Label.Text = text;
} 
```

在示例中，`Label`是 ASPX 页面上的一个控件。是否有一个原则可以决定（在这种情况下）是否将其作为方法或属性。

我会接受最普遍和最全面的答案，但这也涉及我给出的示例。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2009-03-02T08:37:44.020

从开发类库的设计指南的[属性和方法之间选择部分：](https://msdn.microsoft.com/en-us/library/ms229054(v=vs.100).aspx)

> 一般来说，方法代表动作，属性代表数据。属性旨在像字段一样使用，这意味着属性不应计算复杂或产生副作用。如果它不违反以下准则，请考虑使用属性而不是方法，因为经验不足的开发人员会发现属性更易于使用。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2009-03-02T08:28:01.233

是的，如果您所做的只是获取和设置，请使用属性。

如果您正在做一些可能会影响多个数据成员的复杂事情，那么一种方法更合适。或者，如果您的 getter 接受参数，或者您的 setter 接受的参数不止一个值参数。

中间是灰色区域，线条可能有点模糊。没有硬性规定，不同的人有时会不同意某物应该是属性还是方法。重要的是要（相对）与**您**的工作方式（或您的团队的工作方式）保持一致。

它们在很大程度上是可互换的，但一个属性向用户表明实现相对“简单”。哦，语法更简洁一些。

一般来说，我的理念是，如果您开始编写以 get 或 set 开头并采用零或一个参数（分别）的方法名称，那么它是属性的主要候选者。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-06-29T14:33:16.240

通过 MSDN 搜索，我找到了关于[属性与方法](http://msdn.microsoft.com/en-us/library/bzwdh01d(VS.71).aspx#cpconpropertyusageguidelinesanchor1)的参考，它为创建方法提供了一些很好的指导：

> *   该操作是一种转换，例如`Object.ToString`.
> *   该操作非常昂贵，以至于您希望与用户交流他们应该考虑缓存结果。
> *   使用 get 访问器获取属性值会产生可观察到的副作用。
> *   连续调用该成员两次会产生不同的结果。
> *   执行顺序很重要。请注意，类型的属性应该能够以任何顺序设置和检索。
> *   该成员是静态的，但返回一个可以更改的值。
> *   该成员返回一个数组。返回数组的属性可能非常具有误导性。通常需要返回内部数组的副本，以便用户无法更改内部状态。再加上用户可以很容易地假设它是索引属性这一事实，导致代码效率低下。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-03-02T08:51:19.477

属性是一种从对象注入或检索数据的方法。它们在类中创建对变量或数据的抽象。它们类似于 Java 中的 getter 和 setter。

方法封装了一个操作。

通常，我使用属性来公开单个数据位或类的小计算，例如销售税。这是从购物车中的商品数量及其成本得出的。

我在创建操作时使用方法，例如从数据库中检索数据。任何具有移动部件的操作都是一种方法的候选者。

在您的代码示例中，如果我需要在它包含的类之外访问它，我会将它包装在一个属性中：

```
public Label Title 
{
   get{ return titleLabel;}
   set{ titleLabel = value;}
} 
```

设置文本：

```
Title.Text = "Properties vs Methods"; 
```

如果我只设置 Label 的 Text 属性，我会这样做：

```
public string Title 
{
   get{ return titleLabel.Text;}
   set{ titleLabel.Text = value;}
} 
```

设置文本：

```
Title = "Properties vs Methods"; 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-03-02T08:36:56.750

如果要设置对象的实际属性，则使用属性。

如果您正在执行一项任务/功能，那么您将使用一种方法。

在您的示例中，这是一个明确的属性。

但是，如果您的功能是 AppendToLabel，那么您将使用一种方法。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2009-03-02T08:49:02.527

从语义上讲，属性是对象的属性。方法是对象的行为。

Label 是一个属性，将其设为属性更有意义。

在面向对象编程方面，您应该清楚地了解什么是行为的一部分，什么只是一个属性。

汽车{颜色、型号、品牌}

汽车具有 Color、Model 和 Brand 属性，因此使用方法 SetColor 或 SetModel 没有意义，因为在语义上我们不要求 Car 设置自己的颜色。

因此，如果您将属性/方法案例映射到现实生活中的对象或从语义的角度来看它，您的困惑就会真正消失。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2009-03-02T08:45:55.293

你只需要看看这个名字......“财产”。这是什么意思？字典以多种方式对其进行了定义，但在这种情况下，“事物的基本或独特属性或质量”最适合。

想想行动的目的。事实上，你是在改变或恢复“一个基本的或独特的属性”吗？在您的示例中，您正在使用一个函数来设置文本框的属性。这似乎有点愚蠢，不是吗？

属性确实是函数。它们都编译为 getXXX() 和 setXXX()。它只是将它们隐藏在语法糖中，但它是为过程提供语义含义的糖。

想想像属性这样的属性。一辆车有很多属性。颜色、MPG、型号等。并非所有属性都是可设置的，有些是可计算的。

同时，方法是一个动作。GetColor 应该是一个属性。GetFile() 应该是一个函数。另一个经验法则是，如果它不改变对象的状态，那么它应该是一个函数。例如，CalculatePiToNthDigit(n) 应该是一个函数，因为它实际上并没有改变它所附加的 Math 对象的状态。

这可能有点漫无边际，但归根结底是决定你的对象是什么，以及它们代表什么。如果您无法确定它应该是属性还是函数，也许哪个都没有关系。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-03-02T08:33:17.277

属性应该只简单设置并获得一个衬里。还有更多，它应该真正转移到一个方法中。复杂的代码应该总是在方法中。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-03-02T08:37:53.737

我只使用属性来访问变量，即获取和设置单个变量，或者获取和设置控件中的数据。只要需要/执行任何类型的数据操作，我就会使用方法。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-03-02T09:49:16.063

作为设计问题，属性表示类对象的数据或属性，而方法是类对象的动作或行为。

在 .Net 中，使用属性还有其他含义：

*   属性用于数据绑定，而 get_ / set_ 方法则不使用。

*   XML 序列化用户属性作为序列化的自然机制。

*   属性由[**PropertyGrid**](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx)控件和实习生[**ICustomTypeDescriptor**](http://msdn.microsoft.com/en-us/library/system.componentmodel.icustomtypedescriptor.aspx)访问，如果您正在编写自定义库，则可以有效地使用它们。

*   属性由[**Attributes**](http://msdn.microsoft.com/en-us/library/system.attribute.aspx)控制，可以明智地使用它来设计面向方面的软件。

关于属性使用的误解（恕我直言）：

*   用于公开小计算：[**ControlDesigner.SelectionRules**](http://msdn.microsoft.com/en-us/library/system.windows.forms.design.controldesigner.selectionrules.aspx)的 get 块运行到 72 行！

*   用于公开内部数据结构：即使属性不映射到内部数据成员，如果它是类的属性，也可以将其用作属性。反之亦然，即使它的类属性的一个属性是不可取的，也可以返回类似数据成员的数组（而不是使用方法返回成员的深层副本。）

在此处的示例中，它可能已被编写，具有更多的业务含义：

```
public String Title
{
    set { Label.Text = text; }
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-10-04T17:04:25.130

属性的另一个重要优点是在调试期间可以在 Visual Studio 中看到属性的值。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-03-02T08:32:30.833

我更喜欢使用带有**1 个**参数的添加/设置方法的属性。如果参数更多，请使用方法。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-03-02T08:37:27.640

属性非常好，因为它们可以在 Visual Studio 的视觉设计器中访问，只要它们有访问权限。

如果您只是设置和获取以及可能不会访问大量代码的一些验证，则可以使用它们。要小心，因为在验证期间创建复杂的对象并不简单。

任何其他方法都是首选方法。

这不仅仅是关于语义。在 Visual Studio 视觉设计师中使用不恰当的属性开始出现怪异现象。

例如，我在类的属性中获取配置值。配置类实际上会打开一个文件并运行一个 sql 查询来获取该配置的值。这导致我的应用程序出现问题，其中配置文件将由 Visual Studio 本身而不是我的应用程序打开和锁定，因为不仅读取而且写入配置值（通过 setter 方法）。要解决此问题，我只需将其更改为一种方法。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-08-13T15:33:26.550

[这是Bill Wagner](https://web.archive.org/web/20100104103431/http://srtsolutions.com/blogs/billwagner/archive/2006/09/04/properties-vs-methods.aspx)关于何时使用属性与方法的一套很好的**指南**

*   当所有这些都为真时使用属性：getter 应该简单，因此不太可能抛出异常。请注意，这意味着没有网络（或数据库）访问。两者都可能失败，因此会引发异常。
*   它们不应该相互依赖。请注意，这将包括设置一个属性并使其影响另一个属性。（例如，设置 FirstName 属性会影响由 first name + last name 属性组成的只读 FullName 属性意味着这种依赖关系）
*   它们应该可以按任何顺序设置
*   getter 没有可观察到的副作用 请注意，本指南不排除属性中某些形式的惰性求值。
*   该方法必须始终立即返回。（请注意，这排除了进行数据库访问调用、Web 服务调用或其他类似操作的属性）。
*   如果成员返回数组，则使用方法。
*   对 getter 的重复调用（没有干预代码）应该返回相同的值。
*   对 setter 的重复调用（具有相同的值）应该与单次调用没有区别。

*   get 不应该返回对内部数据结构的引用（参见第 23 条）。一个方法可以返回一个深拷贝，并且可以避免这个问题。

*取自我对重复问题的回答。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-02-07T11:48:40.660

**这很简单。**

**1：**当您希望在存储到字段之前验证数据时使用属性。因此，通过这种方式，属性为您的字段提供了封装。因为如果您将字段公开，最终用户可能会根据您的业务要求分配任何可能有效或无效的值，例如年龄应大于 18。因此，在存储相应字段之前，我们需要检查其有效性。以这种方式，属性代表数据。

**2：**当您想要执行某些操作时使用方法，例如您提供一些数据作为参数并且您的方法正在根据提供的值进行一些处理并将处理后的值作为输出返回。或者您想通过此计算更改某些字段的值。“以这种方式方法代表行动”。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2010-06-30T10:50:29.893

我来自 java，我使用了一段时间的 get..set.. 方法。

当我编写代码时，我不会问自己：“访问这些数据是简单的还是需要繁重的过程？” *因为事情可以改变*（今天retrive这个属性很简单，明天可能需要一些或繁重的过程）。

今天我有一个方法 SetAge(int age) tomonrow 我还将有一个方法 SetAge(datebirthdate) 使用生日来计算年龄。

我对 get 和 set 中的编译器转换属性感到非常失望，但不认为我的 Get... 和 Set.. 方法相同。

# delphi - 打开的文件太多

> ID：601634
> 
> 赞同：0
> 
> 时间：2009-03-02T08:31:33.253
> 
> 标签：delphi, file, file-io

从多个客户端线程重复执行此代码块一段时间后，我收到带有消息“打开的文件过多”的 EInOutError：

```
var InputFile : Text;
...
Assign (InputFile, FileName);
Reset (InputFile)
try
  // do some stuff
finally
  CloseFile (InputFile);
end; 
```

客户端线程数约为 10，因此任何时候只能打开 10 个文件。Delphi 是否有可能拒绝立即关闭文件？我可以确保它可以吗？还是我在这里犯了错误？这是我打开文件的唯一地方，try..finally 块应该保证打开的文件被关闭，不是吗？

重新编辑：忘记编辑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T09:52:08.553

我只能建议您使用更“现代”的工具来处理文件。我不知道使用 Windows API 是否有打开文件的限制，但我刚刚测试并可以轻松地并行打开 1000 个流：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Strs: TList;
  i: integer;
begin
  Strs := TList.Create;
  try
    for i := 1 to 1000 do begin
      Strs.Add(TFileStream.Create('D:\foo.txt', fmOpenRead or fmShareDenyWrite));
    end;
  finally
    FreeObjectList(Strs);
  end;
end; 
```

我一直不明白为什么人们仍然在新代码中使用无类型文件而不是*TStream*及其后代。

**编辑：**在您的评论中，您写道您只想读取纯文本文件 - 如果是这样，只需创建一个*TStringList*并使用它的*LoadFromFile()*方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T08:58:10.803

Delphi 在 CloseFile 中立即关闭。您的示例代码似乎是正确的。

再试一次，在 try 和 finally 之间没有任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T09:25:27.773

您不是在旧的基于 Windows 9x 的计算机上运行它，是吗？如果是这样，您可能遇到了 DOS 文件句柄问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-03T02:07:08.100

这里有*一个*线程安全问题，虽然我看不出它是如何导致问题的。

问题是 Reset 使用全局 FileMode 变量。

至于客户端线程——你确定它们不会因为连接断开或其他原因而泄漏吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T09:02:07.143

将一些调试输出放在重置和关闭旁边可能很有用，这样您就可以看到每个线程打开文件的时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T09:22:24.193

你真的需要线程吗？听起来他们给你带来了麻烦。没有它们，您的代码将更容易调试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T10:22:50.693

这段代码应该可以正常工作。没有与使用线程代码中的文件相关的已知问题（据我所知）。我们经常使用这样的成语，一切正常。

我建议添加一些日志记录代码（在 Assign 和 CloseFile 之前），以查看 a) close 是否被执行，并且 b) 你真的只有 10 个线程在运行。也许您的线程终止逻辑有问题，并且 CloseFile 永远不会执行。

# jquery - jquery过滤原始html表单加载（）

> ID：601652
> 
> 赞同：0
> 
> 时间：2009-03-02T08:41:18.537
> 
> 标签：jquery

我想在 OS X 小部件上加载外部页面的一部分。使用 JQuery 我可以加载页面，但尝试将其放入页面时遇到错误。

在将返回的 html 放在页面上之前，我在过滤返回的 html 时遇到问题。

我希望能够获取页面，过滤出我想要的表，然后将其附加到页面（在 loadArea div）

```
$(document).ready(function () {
    $().load("source.html", function (request) {
        $("#loadArea").append(request).filter(".myclass"); // this is in callback because the loading is asynchronous and you cant filter it before it is all there) 
    });
}); 
```

当我执行上述操作时，屏幕上没有任何内容并且页面是空白的（应该是黑色 -> 某些东西破坏了整个页面）

使用空选择器 $() 是否正确？我通常以正确的方式进行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T09:14:22.200

您的空选择器方法可能有效，但使用 $.get 或 $.post 更有意义。*此外，您必须在附加之前*过滤要附加的元素。尝试

```
$.get('source.html', function(data) {
  $(data).filter('.myClass').appendTo('#loadArea');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T09:51:08.540

我会那样做

```
$(document).ready(function() {
  $(#loadArea).load('source.html .myclass'
     function());                             
  }); 
```

这将从source.html加载到#loadArea .myclass

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T08:53:31.377

我建议将其分解为功能部分进行测试。首先看看页面是否真的没有错误地返回，所以单独测试加载调用。然后尝试使用一些虚拟数据分别更新 loadArea。

在回调中使用 debugger 关键字可能有助于检查来自服务器的响应。

# java - 如何实现 Iterable 接口？

> ID：601658
> 
> 赞同：52
> 
> 时间：2009-03-02T08:48:16.367
> 
> 标签：java, iterator

给定以下代码，我如何迭代 ProfileCollection 类型的对象？

```
public class ProfileCollection implements Iterable {    
    private ArrayList<Profile> m_Profiles;

    public Iterator<Profile> iterator() {        
        Iterator<Profile> iprof = m_Profiles.iterator();
        return iprof; 
    }

    ...

    public Profile GetActiveProfile() {
        return (Profile)m_Profiles.get(m_ActiveProfile);
    }
}

public static void main(String[] args) {
     m_PC = new ProfileCollection("profiles.xml");

     // properly outputs a profile:
     System.out.println(m_PC.GetActiveProfile()); 

     // not actually outputting any profiles:
     for(Iterator i = m_PC.iterator();i.hasNext();) {
        System.out.println(i.next());
     }

     // how I actually want this to work, but won't even compile:
     for(Profile prof: m_PC) {
        System.out.println(prof);
     }
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-03-02T08:55:38.593

Iterable 是一个通用接口。您可能遇到的一个问题（您实际上并没有说您遇到了什么问题，如果有的话）是，如果您使用泛型接口/类而不指定类型参数，您可以删除不相关的泛型类型的类型班内。这方面的一个例子是[对泛型类的非泛型引用导致非泛型返回类型](https://stackoverflow.com/questions/449103/non-generic-reference-to-generic-class-results-in-non-generic-return-types/449115#449115)。

所以我至少会把它改成：

```
public class ProfileCollection implements Iterable<Profile> { 
    private ArrayList<Profile> m_Profiles;

    public Iterator<Profile> iterator() {        
        Iterator<Profile> iprof = m_Profiles.iterator();
        return iprof; 
    }

    ...

    public Profile GetActiveProfile() {
        return (Profile)m_Profiles.get(m_ActiveProfile);
    }
} 
```

这应该有效：

```
for (Profile profile : m_PC) {
    // do stuff
} 
```

如果没有 Iterable 上的 type 参数，迭代器可能会简化为 Object 类型，因此只有这样才能工作：

```
for (Object profile : m_PC) {
    // do stuff
} 
```

这是 Java 泛型的一个非常晦涩的极端案例。

如果没有，请提供更多关于发生了什么的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-02T08:56:05.067

首先：

```
public class ProfileCollection implements Iterable<Profile> { 
```

第二：

```
return m_Profiles.get(m_ActiveProfile); 
```

# asp.net - 如何使网格视图行可编辑？

> ID：601661
> 
> 赞同：1
> 
> 时间：2009-03-02T08:50:42.523
> 
> 标签：asp.net, gridview

当我在网格视图控件中的相应行上单击鼠标左键时，我希望该行变为可编辑。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T08:52:46.573

在这里您可以找到 gridview 编辑和更多内容：[ASP.NET 快速入门教程](http://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/data/gridview.aspx)

这也是另一个例子：[MSDN GridView RowEditing Event Reference](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowediting.aspx)

# perl - 如何修复 Perl 中的多行失控字符串错误？

> ID：601662
> 
> 赞同：1
> 
> 时间：2009-03-02T08:50:46.890
> 
> 标签：perl

我的 Perl 脚本中有一些错误，我查看了源代码但找不到问题。

```
#Tool: decoding shell codes/making shell codes

use strict;
use Getopt::Std;

my %opts=();
getopts("f:xa", \%opts);

my($infile, $hex);
my($gen_hex, $gen_ascii);

sub usage() {
print "$0 -f <file> [-x | -a] \n\t";
print '-p <path to input file>'."\n\t";
print '-x convert "\nxXX" hex to readable ascii'."\n\t";
print '-a convert ascii to "\xXX" hex'."\n\t";
print "\n";
exit;
}

$infile = $opts{f};

$gen_hex = $opts{a};
$gen_ascii = $opts{x};use

if((!opts{f} || (!$gen_hex && !$gen_ascii)) {
usage();
exit;
}

if($infile) {
open(INFILE,$infile) || die "Error Opening '$infile': $!\n"; 
while(<INFILE>) {
#Strips newlines
s/\n/g;
#Strips tabs
s/\t//g;
#Strips quotes
s/"//g;
$hex .= $_;
}
}

if($gen_ascii) {

# \xXX hex style to ASCII
$hex =~ s/\\x([a-fA-F0-9]{2,2})/chr(hex($1)/eg;
}
elsif ($gen_hex) {
$hex =~ s/([\W|\w)/"\\x" . uc(sprintf("%2.2x",ord($1)))/eg;
} 

print "\n$hex\n";
if($infile) {
close(INFILE);
} 
```

给我错误

```
Backslash found where operator expected at 2.txt line 36, near "s/\"
(Might be runaway multi-line // string starting on line 34) 
syntax error at 2.txt line 25, near ") {"
syntax error at 2.txt line 28, near "}"
syntax error at 2.txt line 36, near "s/\"
syntax error at 2.txt line 41\. nar "}"
Execution of 2.txt aborted due to compilation errors 
```

你看到问题了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-02T08:53:03.157

```
#Strips newlines
s/\n/g; 
```

是错的。你忘了一个额外的`/`：

```
#Strips newlines
s/\n//g; 
```

另外，这里的括号太少：

```
if((!opts{f} || (!$gen_hex && !$gen_ascii)) { 
```

而不是添加一些，你似乎有一个额外的。把它拿出来。

作为旁注，请尽可能尝试`use warnings;`。这是一件好事™。

编辑：当我在做的时候，你可能要小心你`open()`的 s：

```
open(INPUT,$input); 
```

可以被滥用。如果`$input`是`">file.txt"`怎么办？然后`open()`将尝试打开文件进行写入 - 不是你想要的。试试这个：

```
open(INPUT, "<", $input); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-02T09:58:59.003

有很多错误：拖尾`use`，运算符中缺少`/`，表达式中`s`的括号不平衡`if`。稍微整理一下：

```
use strict;
use Getopt::Std;

my %opts = ();
getopts( "f:xa", \%opts );

my ( $gen_hex, $gen_ascii );

sub usage() {
    print <<EOU
$0 -f <file> [-x | -a]
    -p <path to input file>
    -x convert "\\xXX" hex to readable ascii
    -a convert ascii to "\\xXX" hex
EOU
}

@ARGV = ( $opts{f} ) if exists $opts{f};

$gen_hex   = $opts{a};
$gen_ascii = $opts{x};

if ( not( $gen_hex xor $gen_ascii ) ) {
    usage();
    exit;
}

my $transform = $gen_ascii
    ? sub {
    s/\\x([a-fA-F0-9]{2,2})/pack'H2', $1/eg;
    }
    : sub {
    s/([^[:print:]])/'\\x'.uc unpack'H2', $1/eg;
    };

while (<>) {
    s/\n    #Strips newlines
    | \t    #Strips tabs
    | "     #Strips quotes
    //xg;
    &$transform;
    print;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T11:57:36.020

```
line25: if((!opts{f} || (!$gen_hex && !$gen_ascii)) {
line26: usage(); 
```

这是 $opts{f}

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-03-02T09:26:19.770

实际上，我认为错误在这里：

```
s/"//g;
```

双引号应该被转义，以便该行变为：

```
s/\"//g;
```

您可以注意到这是在 SO 上语法突出显示出错的行。

# php - 在 Win 上用 PHP 分叉/线程的最佳方法是什么？

> ID：601670
> 
> 赞同：2
> 
> 时间：2009-03-02T08:55:22.120
> 
> 标签：php, windows, multithreading, fork

我有一个 php 脚本，可以检查许多（数千个）站点的更新。有时（随着站点数量的增加更频繁），我在更新其中一个站点时遇到执行超时，整个脚本都付诸东流。

我能想到的最好的主意是分叉每个更新，所以如果它死了，整个更新就会继续。从我收集到的信息来看，PHP 线程似乎不是可以依赖的东西，尤其是在 Windows 平台上（不幸的是，我不得不在这个平台上工作）。

我考虑过使用 curl 作为分叉机制，但是对于服务器来说（在时间和处理能力方面）成本会不会更高？

我很高兴听到一些关于 PHP 分叉/线程的想法和经验......

谢谢，奥马尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T09:03:45.737

如果您要使用 cURL，请查看 multi* 系列方法，这些方法允许您简化 cURL 并与一组站点进行交互。话虽如此，您还可以将最大执行时间（通过 ini_set）设置为任意高的数字和/或保留自己的看门狗计数器，这样您就永远不会让它变得太高。

但是，是的，最终会遇到问题，并且 PHP 中缺乏完整的线程支持。因此，您最好的选择是查看其他替代方案，例如提供本机线程支持的其他语言/平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T10:48:25.577

我设法使用 pcntl 扩展在 php 中获得了某种形式的线程。这不是最好的解决方案，但它成功了。

[http://www.php.net/manual/en/ref.pcntl.php](http://www.php.net/manual/en/ref.pcntl.php)

也试试下面的链接，这给了我一个如何去实施的想法。

[http://www.van-steenbeek.net/?q=php_pcntl_fork](http://www.van-steenbeek.net/?q=php_pcntl_fork)

[http://www.hudzilla.org/phpbook/read.php/16_1_3](http://www.hudzilla.org/phpbook/read.php/16_1_3)

[http://www.electrictoolbox.com/article/php/process-forking/](http://www.electrictoolbox.com/article/php/process-forking/)

我希望这会有所帮助，但是 php 在线程方面并不是很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T09:00:12.093

您可以将 ini 指令设置[`max_execution_time`](http://uk3.php.net/manual/en/info.configuration.php#ini.max-execution-time)为 0。这应该会删除最大执行时间，并允许脚本运行而不会产生此错误。但是，必须在您的 php.ini 文件中设置此值 - 使用`ini_set`不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T09:37:14.627

```
set_time_limit(0); 
```

[set_time_limit 文档](http://de2.php.net/set_time_limit)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-03T15:46:04.980

好吧，最后我选择了 curl，它工作得很好。

我需要一个跨平台的解决方案，因为我在 Mac 上开发，而在这种情况下，生产服务器是 Windows。这意味着`pcntl`不可能。

我担心向我自己的服务器发送数千个 curl 请求可能会占用它并打扰当时网站上的用户，但我错了。

但是，我确实必须在`set_time_limit(0)`启动所有 curl 调用的脚本中添加一个，否则它只会超时。

# delphi - 为什么在异常后执行会跳转到 proc 的末尾？

> ID：601674
> 
> 赞同：2
> 
> 时间：2009-03-02T08:57:41.630
> 
> 标签：delphi, exception

当调试任何过程/函数/方法中的某些代码时发生未处理的异常时，调试器会停在那里并显示消息。

如果我现在继续一步一步调试，执行会直接从产生异常的那行跳转到当前过程的结尾（如果没有 finally 块）。

继续当前程序的下一行不是同样好吗？

为什么要跳到 proc 的末尾并继续调用过程？这只是设计使然还是有充分的理由？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-02T09:06:11.313

异常是意外情况，即处理停止的原因。

跳转到过程末尾是一条不可见的 finally 语句，用于释放任何本地“分配”的内存，如字符串、接口、记录等。

如果要处理异常，则必须使用 try .. except 语句封装可以给出异常的调用，并使用“on”子句仅处理要处理的特定异常。

在 except 中，您可以检查调试器中的变量，如果需要，您可以在代码中再次引发异常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-02T10:05:27.850

通常，未捕获的异常将在堆栈上的每个函数中执行隐藏的“最终”，因为它“展开”到异常处理程序。这会清理每个堆栈帧中的局部变量。在具有资源获取即初始化范式的 C++ 等语言中，它也会导致析构函数运行。

最终，在调用堆栈的某处，异常将被处理程序捕获。如果没有明确的，系统提供的将终止该进程，因为它还能合理地做什么？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-02T09:08:36.800

抛出异常是一种表达“发生意外的事情。我不知道如何处理”的方式。在这种情况下，最好不要做任何事情（除了抛出异常）而不是尝试继续，不知道你在做什么是否正确。

在现实生活中你也有同样的事情：如果有人让你用希伯来语（或你不知道的某种语言）数到 10，你就说你不知道。无论如何，您都不要继续尝试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T09:06:15.933

我希望它跳到proc的末尾，然后跳到调用proc的except或finally块。它真的在调用过程中继续，就好像什么都没发生一样？它使用什么作为返回值（如果是函数调用）？

继续原始 proc/function 中的下一行将是一件非常糟糕的事情——这意味着代码在调试器中的执行与在 release 中的执行*完全*不同（异常确实会导致执行退出该 proc/function，除非有一个 except /最终阻止）。为什么调试应该让你完全忽略异常？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-03T02:03:21.633

它必须展开堆栈才能找到处理程序。

我同意这是非常烦人的行为。继续不是一种选择，但如果调试器指向抛出它的地方并且局部变量仍然完好无损，它肯定会让生活更轻松。显然，下一步将是最后隐藏，而不是下一行。

我只想能够尽我所能检查导致它的原因。不久前，我只是在与此作斗争。文本解析，我知道有问题的字符串不包含非数字字符（理智限制意味着永远不会发生溢出情况，这是我的数据文件，我担心的是 oopses），所以我没有放置异常处理*程序*StrToInt——这不是一个有效的数字是什么废话？？？？？？是的——例程不会用缓冲区中的任何非数字来调用它——但是一个空字符串里面没有任何非数字！

# sizing - 硬件尺寸

> ID：601675
> 
> 赞同：0
> 
> 时间：2009-03-02T08:57:54.953
> 
> 标签：sizing

基本上，我正在寻找有关如何针对给定要求确定硬件尺寸的指南。在确定尺寸决定时需要考虑哪些参数。如果有任何机构可以帮助确定应用服务器、网络服务器、数据库等的大小细节，那就太好了。请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T10:00:57.153

通常，在这种情况下，您所做的是遵循产品供应商为特定应用服务器/数据库提供的硬件尺寸表。您需要的一些常见参数是可用性窗口、并发用户数、消耗的磁盘空间、应用程序内存要求等。

# c++ - VS 2008 中的 Visual C++ Redistributable Installer 在哪里？

> ID：601676
> 
> 赞同：0
> 
> 时间：2009-03-02T08:57:56.547
> 
> 标签：c++, visual-studio

我安装了 Visual Studio 2008 SP1 Professional。我已经构建了一个 C++ 应用程序，我想在另一台机器上安装可再发行运行时。安装程序在 VS 安装中可用吗？还是我必须[下载](http://www.microsoft.com/downloads/details.aspx?FamilyID=a5c84275-3b97-4ab7-a40d-3802b2af5fc2)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T09:02:52.117

查看您需要的平台的 %ProgramFiles%\Microsoft SDKs\Windows\v6.0A\Bootstrapper\Packages\。

# c++ - 访问集合的“总线错误” 从一个结构

> ID：601680
> 
> 赞同：0
> 
> 时间：2009-03-02T09:00:09.863
> 
> 标签：c++, stl, struct, bus-error

搜索了一段时间，但我无法弄清楚为什么这会引发总线错误。

任何帮助将非常感激。

```
typedef struct {
   set<int> pages;
} someStruct;
...
void someFunction() {
   ...
   someStruct *a = createSomeStruct(); // just mallocs and returns
   a->pages.insert(5);
   ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-02T09:01:58.890

malloc 不会初始化它分配的内存。尝试新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T09:16:26.907

如果出于某种原因确实必须使用 malloc ，则可以初始化集合：

```
typedef struct {
   set<int> pages;
} someStruct;
...
void someFunction() {
   ...
   someStruct *a = createSomeStruct();
   a->pages.insert(5);
   ...
}
...
someStruct *createSomeStruct(void) {
  someStruct *a = (someStruct *) malloc(sizeof(*a));
  new(&a->pages) set<int>;
  return a;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T09:16:20.400

另请注意，“总线错误”通常意味着“未对齐的内存读取”。也就是说，尝试从地址 0x1001 加载 int32 会在许多架构上导致总线错误（因为 load-32-bit-word op 需要对齐的地址）。这通常是您试图取消引用虚假指针的赠品。

Maurice 已经清楚地确定了问题的主要原因，但是考虑“总线错误”->“虚假指针”可以帮助在未来追踪这类事情。

# iphone - 乌龙、SIO2 或 3D iPhone 游戏新手的商业游戏引擎？

> ID：601690
> 
> 赞同：12
> 
> 时间：2009-03-02T09:04:08.073
> 
> 标签：iphone, unity3d, sio2, oolong-engine

我正在为我的第一个游戏编程项目尝试在[Oolong](http://code.google.com/p/oolongengine/)和[SIO2](http://sio2interactive.com/store.php) iPhone 游戏引擎之间进行选择。我有一些 Cocoa 经验和多年的 C++ 经验，包括相对较低级别的 2D 图形和开发[Quicktime 插件](http://www.google.com/search?hl=en&client=safari&rls=en-us&q=opticboom+3d+quicktime&btnG=Search)，但只接触过少量的 OpenGL。**对于我的背景和时间有限的人来说，哪个引擎最容易学习和最有效率？**

两者都包括子弹物理引擎。我倾向于 Oolong，因为它的 C++ 源代码和针对 PowerVR 图形的优化。然而，SIO2 中的 Lua 解释器和其他声音好东西很有吸引力。SIO2 似乎也有很多[教程](http://sio2interactive.com/TECHNOLOGY.html)。

[我也愿意在Unity](http://unity3d.com/unity/features/iphone-publishing)或[Torque 游戏环境](http://www.garagegames.com/products/consoles)上花钱，如果它们能节省我大量时间的话。不过，定价变得有趣了——Unity Indie 许可证仅适用于营业额（而非收入！）低于 100,000 美元的公司，因此您很容易脱离该类别，每个席位的价格高达 3,000 美元。我想要很多令人信服的东西，它可以节省时间来证明仅使用 SIO2 的投资是合理的！Torque 3D 产品似乎尚未发布，但看起来在 150 美元的独立许可证（他们的收入门槛为 250,000 美元）之上的成本约为 500 美元。

**2011 年 12 月编辑 - SIO2 不再免费 **

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-17T12:24:28.043

昨晚我启动了我的第一个 SIO2 应用程序，很容易从教程中启动和运行（教程包括一个完整的 XCode 项目，您可以加载并开始破解）。教程项目也得到了很好的评论——这使得它更快上手。

SIO2 的接口主要使用 C 语言，因此您的 C++ 背景应该使这种转换非常容易。

即使您不使用它，也请下载 SIO2 并打开其中一个教程并查看评论和代码。您将能够很快判断它是否是您喜欢的工具包和样式。

与吸收速度没有直接关系，但对我来说一个很大的优势是 Blender 集成。它让我可以使用免费的 3d 工具包来制作和导出模型，然后从那里开始。我看到乌龙使用 3DS，我不确定 Blender 是否导出该格式，所以我可能是错的。

如果你好奇：SIO2 提供了一个 Python 脚本，可以将 Blender 场景导出到一个 zip 文件。然后，从 SIO2 代码中，您从场景中引用您的对象并将它们拉入您的 iPhone 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:26:07.300

我尝试了 OOLong 和 Unity 的方式。我建议使用统一：

*   如果您有基本的游戏背景，Learn Curve 非常短
*   Unity 包含大量的“图形和音频”实用程序
*   有了统一，您就不会关心图形/音频文件格式
*   iOs 和 Android 的一个代码
*   全套预组装资产免于商店
*   扩展编辑器，让您的关卡编辑器

我花了一年时间来关闭一个 OOLong 项目。如果团结一致，我可能会节省六个月的工作时间。

# c - 置换 i 和 T[i]

> ID：601692
> 
> 赞同：3
> 
> 时间：2009-03-02T09:05:24.703
> 
> 标签：c, algorithm, permutation

假设我有一个 int T 数组，我正在寻找一种置换 i 和 T[i] 的就地算法

我有：[3 2 0 1] (a)

我想要：[2 3 1 0] (b)

例如。在 (b) T[0] = 2 中，因为在 (a) T[2] 中等于 0。

我期待找到一个简单的 O(n) 时间、O(1) 空间算法，但我找不到。有任何想法吗 ？

笔记 ：

*   有一个单一的数组（a）在之前（b）在之后。

*   数组中的值属于 [0, N[, 没有重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T09:26:35.337

要获得排列的反转，您只需要遍历排列的循环

```
int i, j, next, prev;
for(int i=0; i<N; i++) {
  if(T[i]>=N) continue;
  j=T[i];
  prev=i;
  while(j < N) {
    next=T[j];
    T[j]=prev+N;
    prev=j;
    j=next;
  }
}
for(int i=0; i<N; i++)
  T[i]-=N; 
```

我使用大于 N 的数字来标记这是已处理的循环的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T09:27:07.537

您可以进行字典排序以获得所有可能的排列。按照下面的链接获取置换算法列表

[排列](http://www.bearcave.com/random_hacks/permute.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T10:06:37.207

您似乎正在寻找数组的[排列组中的逆。](http://en.wikipedia.org/wiki/Permutation_group)您的示例数组是 {0→3, 1→2, 2→0, 3→1}，而您想要 {3→0, 2→1, 0→2, 1→3}。重新排列，即 {0→2, 1→3, 2→1, 3→0} 或 [2 3 1 0]。因此，要找到逆，您只需要遍历原始数组并反转索引的映射。这应该有效（如果您知道长度，您可以使用任何数组）：

```
int t[] = { 3, 2, 0, 1};
int tinv[4];
for (int i = 0; i < 4; i++)
    tinv[t[i]] = i; 
```

只要 t（长度为 n）是 [0 .. n-1] 的排列，tinv 就不应为任何值未定义。jpalecek 的解决方案稍微复杂一些，所以我不确定这个解决方案是否对您来说足够全面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-07T03:01:15.690

这是我在没有额外内存的情况下就地解决这个问题的尝试。这是一个 O(n) 算法。

jpalecek 的算法非常智能，但阅读起来并不直观，至少对我来说不是。我已经尝试过了，它可以工作，但我没有时间理解为什么和评论会很棒。

只要数组不太大，Gracenotes 的算法就很棒。如果数据很大，可能需要动态创建数组。

我的算法的基本思想是通过遵循索引和值对链来更新数组。例如索引 0 映射到值 3。通过使用值 3 作为索引，您将找到下一个对，即数组中的索引 3 和值 1。基本上我保存下一个索引和值对并更新前一个索引和对值直到我完成链条。

如果你能让它更高效、更优雅或整体更好，我会很感兴趣。

我已经编译并测试了下面的代码，但没有使用任何其他测试输入。我已经为那些希望尝试并更好地理解它是如何工作的人留下了调试输出。

```
// Array print routine.
void printArray (const char * str_p,int a[], int n)
{
   printf ("%s\n", str_p);
   for (int i = 0; i < n; i++)
   {
      printf ("%i ", i);
   }
   printf ("\n");
   for (int i = 0; i < n; i++)
   {
      printf ("%i ", a[i]);
   }
   printf ("\n\n");
}

// The main code.
void PermuteTheDamnArray()
{
   printArray ("Initial Array", a,n);

   int i = 0;     // Simply a counter.
   int p_ix = 0;  // Previous Index.
   int p_val = a[0]; // Previous Value.
   int n_ix = a[0];  // Next index.
   int n_val = a[n_ix]; // Next Value.
   for (i = 0; i < n; i++)
   {
      // Replace. 
      printf ("Swapping orig (%i,%i) with (%i,%i)\n", n_ix, n_val,p_val, p_ix);
      a[p_val] = p_ix;

      printArray ("Array after swap", a,n);

      // The next index and value pair becomes the new previous index and value pair.
      p_ix = n_ix;
      p_val = n_val;
      printf ("The previous pair is now: (%i,%i)\n", p_ix, p_val);

      // Get the next index and value pair.
      n_ix = n_val;
      n_val = a[n_val];
      printf ("The next pair is now: (%i,%i)\n", n_ix, n_val);

   }

   printArray ("Final Array", a,n);
}

Output:

Swapping orig (3,1) with (3,0)
Array after swap
0 1 2 3 
3 2 0 0 

The previous pair is now: (3,1)
The next pair is now: (1,2)
Swapping orig (1,2) with (1,3)
Array after swap
0 1 2 3 
3 3 0 0 

The previous pair is now: (1,2)
The next pair is now: (2,0)
Swapping orig (2,0) with (2,1)
Array after swap
0 1 2 3 
3 3 1 0 

The previous pair is now: (2,0)
The next pair is now: (0,3)
Swapping orig (0,3) with (0,2)
Array after swap
0 1 2 3 
2 3 1 0 

The previous pair is now: (0,3)
The next pair is now: (3,0)
Final Array
0 1 2 3 
2 3 1 0 
```

# c# - C#：如何将 switch 与 if 语句结合使用？

> ID：601693
> 
> 赞同：1
> 
> 时间：2009-03-02T09:05:47.277
> 
> 标签：c#, .net, switch-statement, if-statement

我需要将开关与 if 语句结合起来。

我怎样才能做到这一点？我想做这样的事情：

```
switch (periodtype)
{
    if(starttime>endtime)
    {
        ;
    }
    else
    {
        case 0: nextRunTime = nextRunTime.AddHours(period); break;
        case 1: nextRunTime = nextRunTime.AddMinutes(period); break;
        case 2: nextRunTime = nextRunTime.AddSeconds(period); break;
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-02T09:10:02.757

有什么问题：

```
if(starttime<=endtime)
{
    switch (periodtype)
    {
        case 0: nextRunTime = nextRunTime.AddHours(period); break;
        case 1: nextRunTime = nextRunTime.AddMinutes(period); break;
        case 2: nextRunTime = nextRunTime.AddSeconds(period); break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T09:09:58.123

```
if(starttime>endtime)
{
    // Stuff
}
else
{
    switch (periodtype)
    {
        case 0: nextRunTime = nextRunTime.AddHours(period); break;
        case 1: nextRunTime = nextRunTime.AddMinutes(period); break
        case 2: nextRunTime = nextRunTime.AddSeconds(period); break;
    }
} 
```

像那样？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T09:10:41.913

```
if(starttime>endtime)
{
    ;
}
else
{
   switch (periodtype)
   {
      case 0: nextRunTime = nextRunTime.AddHours(period); break;
      case 1: nextRunTime = nextRunTime.AddMinutes(period); break;
      case 2: nextRunTime = nextRunTime.AddSeconds(period); break;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T09:11:01.537

```
if(starttime <= endtime)
{
      switch (periodtype)
      {     
             case 0: nextRunTime = nextRunTime.AddHours(period); break;
             case 1: nextRunTime = nextRunTime.AddMinutes(period); break;
             case 2: nextRunTime = nextRunTime.AddSeconds(period); break;

       }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T09:11:44.453

嗯回答太晚了

这不是更容易吗：

```
if (starttime <= endtime)
{
    switch (periodtype)
    {   
        case 0: nextRunTime = nextRunTime.AddHours(period); break;
        case 1: nextRunTime = nextRunTime.AddMinutes(period); break;
        case 2: nextRunTime = nextRunTime.AddSeconds(period); break;
    }
} 
```

# iphone - 在 iPhone 上保留磁盘空间

> ID：601694
> 
> 赞同：2
> 
> 时间：2009-03-02T09:05:49.693
> 
> 标签：iphone, diskspace

我希望能够在我的 iPhone 上为我的特定应用程序“保留”一定数量的磁盘空间。**在我被激怒之前，我应该补充一点，这不适用于公共应用程序。**

我认为最简单的方法是实际创建文件块，直到我希望保留的空间，然后根据需要删除和使用这些块。

是否有任何文件系统操作可以让我做到这一点，而实际上不必为我想要分配的所有空间编写内容？我问这个是因为我不确定磁盘空间分配器可能是懒惰的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T15:09:30.130

不，这是 SDK 之外的东西。您必须创建自己的方法来为您处理此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T07:27:13.460

iTunes 确保每次同步后至少有 200MB 可用空间。只有不定期同步的用户才会导致问题（即使这样，当他们的可用空间低于 50MB 时，也会提示他们释放空间）。

与其预留空间，不如在磁盘空间不足时简单地弹出警报？（并进入特征缩减模式）

# java - 在 JSP 代码中使用 XSL 文件访问 XML 文件的概念和编程

> ID：601702
> 
> 赞同：0
> 
> 时间：2009-03-02T09:08:51.463
> 
> 标签：java, xml, jsp, xslt

我是在 JSP 代码中访问后端 XML 文件（类似于数据库）的初学者。任何人都可以向我提供链接和参考资料，为像我这样的初学者提供很好的理解吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T09:51:38.180

使用 JSP 时的一些提示： 在 JSP 之外保留尽可能多的代码。通过在 JSP 顶部创建一个帮助对象，我取得了非常好的结果。在 JSP 的 HTML 中，我可以调用辅助对象的方法来获取我的数据。

这样，我就有了一个普通对象（不依赖于 JSP cra....框架），我可以像任何其他对象一样测试和使用它。

所以我的建议是创建几个允许您访问数据库的对象。在 JSP 中，尽可能少的实际 Java 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T13:14:56.070

您可能想看看如何在 J2EE 中实现典型的 webapp 设计模式（参见例如Sun 的描述 webapp 设计[的蓝图）。](http://java.sun.com/blueprints/guidelines/designing_enterprise_applications_2e/web-tier/web-tier5.html)根据应用程序的复杂性，决定使用哪种模式。您也可以选择使用一些基于 J2EE 构建的现有 MVC 框架（尽管我不建议初学者这样做）。

围绕您的 XML 构建模型类将是一个好的开始（有多种方法可以在 Java 中处理 XML，例如[JAXP](https://jaxp.dev.java.net/)）。一旦模型准备好，您就可以开始在您的 JSP 中使用它（根据您选择的模式实现视图和控制器）。

# javascript - 从 ASP.NET MVC 调用外部 .js

> ID：601712
> 
> 赞同：1
> 
> 时间：2009-03-02T09:12:01.270
> 
> 标签：javascript, jquery, asp.net-mvc

我是 JavaScript 新手。我想做的是从 .js 文件中调用一个函数，该文件位于 ASP.NET MVC 项目的脚本文件夹中。

功能是：

```
function myfunction() {
    alert("HELLO");
} 
```

...它驻留在文件 brfix.js 中

在视图页面上，我这样称呼它：

```
<script src="../../Scripts/brfix.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        myfuntion();
    });
</script> 
```

但是代码不起作用。但是，如果我将 js-code 直接放在视图页上，它可以工作，如下所示：

```
<script type="text/javascript">
    $(document).ready(function() {
        alert("HELLO");
    });
</script> 
```

如何调用基于文件的js函数？一些 JavaScript-Big-Kahuna 可以帮助我吗？=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-03T20:02:55.673

如果该代码是直接从您的源代码中粘贴的，那么您有一个错字，这就是它不起作用的原因！

您的函数称为 myfunction()，但您调用的是 myfuntion()

您应该在开发时在浏览器中启用 js 错误。你没有说你使用的是哪个浏览器。对于 IE，它位于工具 - 选项 - 高级中。取消选中“禁用脚本调试”选项。在 Firefox 中，我会使用像 Dror 所说的 FireBug 之类的东西，如果内存可用，那么在发生 javascript 错误时会出现一些东西。如果您仍然遇到问题，我会尝试安装 Fiddler2（在 IE 中）并构建对 js 文件的请求，然后查看返回的内容。

另一种选择是放置一个调试器；在你调用你的函数之前调用，你应该能够单步执行 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-03T20:13:29.050

正如其他海报所提到的，有一个错字。然而...

查看用于引用站点内容的 Url.Content() 方法。（图像、脚本等...）使用 ../.. 并不可靠，尤其是当您的 URL 具有不同级别的深度或您的应用程序位于子目录中时。

这是我在大多数项目中使用的助手，例如：

```
public static string Script(this HtmlHelper Html, string url)
{
    UrlHelper Url = new UrlHelper(new RequestContext(Html.ViewContext.HttpContext, Html.ViewContext.RouteData));
    string html = "<script type=\"text/javascript\" src=\"{0}\"></script>";
    return string.Format(html, Url.Content(url));
} 
```

在这里它被称为：

```
<%= Html.Script("~/public/js/blah.js") %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T13:37:41.537

If your mvc site is the root site in iis you can start the script src with a slash to get to the scripts. otherwise you can use an asp:ScriptManager to include the scripts

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T12:03:18.347

可能是对外部文件的引用有误：

```
<script src="../../Scripts/brfix.js" type="text/javascript"></script> 
```

确保引用正确。您可以尝试使用查看源代码来查看实际位置 ../../Scripts/brfix.js 在最后一页中被翻译到。
您也可以尝试使用 FireFox 的 FireBug。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-17T22:47:00.790

我遇到了同样的问题，结果发现我有一些没有找到的 js 文件。例如，如果您的 MVC 项目结构是默认的 VS 设置，并且您的视图页面位于主页中，那么我认为下面会找到该文件：

```
<script src="../Scripts/brfix.js" type="text/javascript"></script> 
```

但是，即使找到了那个没有找到其他 js 文件，也会导致我的 $(document).ready 无法工作。在 Firefox 的 Firebug 中检查您的页面，如果未找到文件，您将看到 html 标记，其中包含一条消息，指出无法找到资源，位于有问题的参考下方。一旦我解决了所有的 js 引用，我的 $(document).ready 就可以工作了。

奇怪的是，VS 告诉我，当引用正确时它找不到 js 文件，而当引用不正确时，它没有标记问题。

# coupling - 解耦与 YAGNI

> ID：601721
> 
> 赞同：7
> 
> 时间：2009-03-02T09:15:38.093
> 
> 标签：coupling, decoupling, yagni

他们矛盾吗？

解耦是一件很棒的事情，而且很难实现。然而在大多数应用程序中我们并不真正需要它，所以我可以设计高度耦合的应用程序，它几乎不会改变任何东西，除了明显的副作用，例如“你不能分离组件”，“单元测试是痛苦的屁股”等。

你怎么看？您是否总是尝试解耦并处理开销？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-02T17:59:04.827

在我看来，脱钩和 YAGNI 是非常互补的美德。（我刚刚注意到 Rob 的回答，似乎我们在同一页上。）问题是你应该做多少解耦，YAGNI 是帮助确定答案的好原则。（对于那些谈到单元测试的人——如果你需要解耦来进行单元测试，那么 YAGNI 显然不适用。）

我真的很怀疑那些说他们“总是”脱钩的人。也许他们每次想到都会这样做。但我从未见过无法在某处添加额外抽象层的程序，我真诚地怀疑是否存在这样一个程序的重要示例。每个人都在某处画一条线。

根据我的经验，我已经对代码进行了解耦，然后从来没有利用额外的灵活性，因为我经常将代码耦合在一起，然后不得不返回并稍后更改它。我不确定这是否意味着我在两个方向上都很平衡或同样破碎。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T01:35:13.157

YAGNI 是一个经验法则（不是宗教）。脱钩或多或少是一种技术（也不是宗教）。所以它们并不真正相关，也不相互矛盾。

YAGNI 是关于实用主义的。假设您不需要某些东西，直到您需要为止。

通常假设 YAGNI 会导致解耦。如果您根本不使用那把刀，那么您最终会假设您需要拥有了解彼此行为的所有类，然后才能证明这是真的。

“解耦”（或“松散耦合”）是一个动词，所以它需要工作。YAGNI 是一个假设，当你发现它不再正确时，你会调整它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T09:19:43.293

我（几乎）总是解耦。每次我这样做时，我都发现它很有用，而且（几乎）每次我不需要以后都必须这样做。我还发现这是减少错误数量的好方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T09:21:42.213

为了去耦而去耦可能是不好的。不过，构建可测试的组件非常重要。

故事的难点在于知道何时以及需要多少去耦。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T09:22:52.430

我会说他们没有。解耦是关于减少代码中不必要的依赖关系，并通过干净、定义良好的接口加强访问。“你不需要它”是一个有用的原则，它通常建议不要在没有明显和当前用例的情况下解决解决方案的过度可扩展性和过于宽泛的架构。

这些的实际结果是，您拥有一个系统，可以更轻松地重构和维护单个组件，而不会无意中在整个应用程序中造成连锁反应，并且设计没有不必要的复杂方面 - 它就像需要的一样简单以满足当前的要求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-02T10:02:38.760

如果“单元测试很麻烦”，那么我会说您*确实*需要它。大多数情况下，解耦也可以以几乎零成本实现，那么您为什么不想这样做呢？

此外，在处理新代码库时，我最大的问题之一是在开始编写单元测试之前必须解耦代码，而在某处引入接口或使用依赖注入可以节省大量时间

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T09:21:31.137

好吧，YAGNI 只不过是人们到处乱扔的一个虚假的简单化短语。然而，去耦是一个很好理解的概念。YAGNI 似乎暗示一个人是某种通灵者。这只是陈词滥调的编程，这绝不是一个好主意。老实说，有一个案例可以证明 YAGNI 可能根本与解耦无关。耦合通常“更快”并且“谁知道您是否需要解耦解决方案；无论如何您都不会更改 X 组件！”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-02T09:22:17.563

正如您的标签所说，这是非常主观的。这完全取决于你自己的工程智慧来决定你“不需要”什么。在一种情况下您可能需要耦合，但在另一种情况下则不需要。谁来告诉？*你*，当然。

因此，对于如此主观的决定，不可能有一个指导方针来规定。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-02T10:02:09.183

YAGNI 乱七八糟 :) ...真的，我们不需要混合所有代码来“更快”。

单元测试在耦合时确实有助于感觉（假设一个人很好地理解什么是单元测试与其他类型的测试）。如果你用“你不能分离组件”的心态来做，你可以很容易地添加你不需要的东西:)

我会说 YAGNI 是在你开始扭曲和改变当前实现所要求的实际使用场景之外的逻辑时出现的。假设您有一些代码使用了几个外部支付提供商，它们都可以重定向到外部站点。可以有一个保持一切干净的设计，但我认为开始考虑我们不知道是否会得到支持的提供者是可以的，这些提供者有很多不同的方式来处理集成和相关工作流程。

# perl - 生成具有替换率的合成 DNA 序列

> ID：601727
> 
> 赞同：6
> 
> 时间：2009-03-02T09:19:34.653
> 
> 标签：perl, algorithm, bioinformatics, dna-sequence

鉴于这些输入：

```
my $init_seq = "AAAAAAAAAA" #length 10 bp 
my $sub_rate = 0.003;
my $nof_tags = 1000;
my @dna = qw( A C G T ); 
```

我想生成：

1.  一千个长度 - 10 个标签

2.  标签中每个位置的替换率是 0.003

产生输出如：

```
AAAAAAAAAA
AATAACAAAA
.....
AAGGAAAAGA # 1000th tags 
```

在 Perl 中有一种紧凑的方法吗？

我坚持将此脚本的逻辑作为核心：

```
#!/usr/bin/perl

my $init_seq = "AAAAAAAAAA" #length 10 bp 
my $sub_rate = 0.003;
my $nof_tags = 1000;
my @dna = qw( A C G T );

    $i = 0;
    while ($i < length($init_seq)) {
        $roll = int(rand 4) + 1;       # $roll is now an integer between 1 and 4

        if ($roll == 1) {$base = A;}
        elsif ($roll == 2) {$base = T;}
        elsif ($roll == 3) {$base = C;}
        elsif ($roll == 4) {$base = G;};

        print $base;
    }
    continue {
        $i++;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T10:21:58.370

作为一个小的优化，替换：

```
 $roll = int(rand 4) + 1;       # $roll is now an integer between 1 and 4

    if ($roll == 1) {$base = A;}
    elsif ($roll == 2) {$base = T;}
    elsif ($roll == 3) {$base = C;}
    elsif ($roll == 4) {$base = G;}; 
```

和

```
 $base = $dna[int(rand 4)]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T09:32:01.923

编辑：假设替代率在 0.001 到 1.000 范围内：

以及`$roll`，在[1..1000]范围内生成另一个（伪）随机数，如果它小于或等于（1000 * $sub_rate）则执行替换，否则什么都不做（即输出'A'） .

请注意，除非您的随机数生成器的属性已知，否则您可能会引入细微的偏差。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T20:14:57.137

不完全是你要找的东西，但我建议你看看 BioPerl 的[Bio::SeqEvolution::DNAPoint](http://search.cpan.org/~cjfields/BioPerl-1.6.0/Bio/SeqEvolution/DNAPoint.pm)模块。它虽然没有将突变率作为参数。相反，它询问您想要的原始序列同一性的下限是多少。

```
use strict;
use warnings;
use Bio::Seq;
use Bio::SeqEvolution::Factory;

my $seq = Bio::Seq->new(-seq => 'AAAAAAAAAA', -alphabet => 'dna');

my $evolve = Bio::SeqEvolution::Factory->new (
   -rate     => 2,      # transition/transversion rate
   -seq      => $seq
   -identity => 50      # At least 50% identity with the original
);

my @mutated;
for (1..1000) { push @mutated, $evolve->next_seq } 
```

所有 1000 个变异序列都将存储在 @mutated 数组中，它们的序列可以通过该`seq`方法访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-03T12:31:18.147

如果发生替换，您希望从可能性中**排除当前碱基**：

```
my @other_bases = grep { $_ ne substr($init_seq, $i, 1) } @dna;
$base = @other_bases[int(rand 3)]; 
```

另请参阅[Mitch Wheat 的回答](https://stackoverflow.com/questions/601727/generating-synthetic-dna-sequence-with-subtitution-rate/601750#601750)，了解如何实施替代率。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T04:41:19.740

我不知道我是否理解正确，但我会做这样的事情（伪代码）：

```
digits = 'ATCG'
base = 'AAAAAAAAAA'
MAX = 1000
for i = 1 to len(base)
  # check if we have to mutate
  mutate = 1+rand(MAX) <= rate*MAX
  if mutate then
    # find current A:0 T:1 C:2 G:3
    current = digits.find(base[i])
    # get a new position 
    # but ensure that it is not current
    new = (j+1+rand(3)) mod 4        
    base[i] = digits[new]
  end if
end for 
```

# wpf - WPF中的绝对定位

> ID：601745
> 
> 赞同：2
> 
> 时间：2009-03-02T09:27:51.637
> 
> 标签：wpf

我有一个很长的文本，并在 TextBlock 中显示第一句话。我希望通过单击 TextBlock 或按钮在 TextBlock 下方显示一个带有全文的面板。我希望这个面板绝对定位并显示在任何其他元素之上，您可以在 HTML 中执行类似的操作来显示和隐藏绝对定位的“div”元素。如何在 WPF 中做到这一点？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T14:03:28.847

`AdornerLayer`可以工作，但可能有点复杂。其他选项包括使用[`PopUps`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx)或[`ToolTips`](http://msdn.microsoft.com/en-us/library/system.windows.controls.tooltip.aspx)-- 您应该首先将它们视为最简单的选项。

如果这些都不起作用，那真的取决于您使用的是哪种面板。例如，如果您使用 a `Canvas`，您所要做的就是确保`ZIndex`在元素上设置正确。

为了使它更健壮，我建议以下内容：

```
<!-- Set Panel.ZIndex="99" when showing hidden area to ensure top placement -->
<Grid>
  <TextBlock>This is my primary bit of text ...</TextBlock>

  <!-- Canvas stays hidden until we want to show the rest of the text -->
  <Canvas Visibility="Hidden">
    <TextBlock Canvas.Bottom="-10">Content goes here</TextBlock>
  </Canvas>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T16:00:25.267

将长文本放在 AdornerLayer 中是最好的选择。查看一些链接 [http://msdn.microsoft.com/en-us/library/ms743737.aspx](http://msdn.microsoft.com/en-us/library/ms743737.aspx) [http://wangmo.wordpress.com/2008/10/19/relations-between-adorner-adornerlayer-and-adornerdecorator /](http://wangmo.wordpress.com/2008/10/19/relations-between-adorner-adornerlayer-and-adornerdecorator/)

# compiler-construction - SPDH帧分析仪

> ID：601746
> 
> 赞同：0
> 
> 时间：2009-03-02T09:28:11.917
> 
> 标签：compiler-construction, code-analysis, protocols

我必须产生一个 SPDH 协议的自动解析。

SPDH 定义了在电子支付终端和银行服务器之间交换的请求和响应消息的结构。

该协议的规范在本文档中进行了描述： [http ://www.trauco.com/docs/SPDH-specification_070212.pdf](http://www.trauco.com/docs/SPDH-specification_070212.pdf)

我为此协议指定了以下语法：

```
Frame           : = header fids etx ;

header          : = fields ;

fields          : = field fields | epsilon ;

field           : = string | number ;

fids            : = fid FieldSeparator fids | epsilon ;

fid             : = exp | subfids ;

exp             : = string | number| whitespace ;

subfids         : = exp RecordSeparator subfids |epsilon ;

whitespace      : = space whitespace | epsilon ;

space           : = ' ' ;

string          : = letter string | digits string | '-' string | period string |epsilon ;

FieldSeparator  : = period | epsilon ;

RecordSeparator : = '!'| epsilon    ;

number          : = digits number | epsilon    ;

digits          : = '0'|'1'|...|'8'| '9'    ;

letter          : = 'a'|...|'z'|'A'|...|'Z'    ;

period          : = '.'              ;

etx             : = 'ETX'| epsilon  ; 
```

我需要一些帮助来构思我的应用程序并实施我的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-03T08:55:03.643

因为我不会创建编译器。我只需要将框架分解为字段。我在第二步中将所有字段保存在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T03:38:29.487

尝试创建框架的状态图。也许第一次你不会做对，但这样你会更好地理解框架结构。

我会帮助您，但我无法访问提供的链接。请通过电子邮件发送文件或发送替代链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T09:44:05.653

*   你**真的**指定了语法吗？
*   目标平台是什么？
*   您正在使用哪些工具？
*   你熟悉[解析器生成器，也就是编译器编译器吗？](http://en.wikipedia.org/wiki/Compiler-compiler)

# aop - 编译时代码注入

> ID：601747
> 
> 赞同：0
> 
> 时间：2009-03-02T09:29:48.043
> 
> 标签：aop, postsharp

最近，我一直在使用[PostSharp](http://www.postsharp.org)。它是一个 AOP 框架，允许我们进行编译时代码注入。您可以只引用 PostSharp 程序集，在您的代码中使用它，编译后，您将获得一个已将所需代码注入其中的程序集。我试图找出 PostSharp 是如何将自己集成到 Visual Studio 的编译过程中并更改代码的，但直到现在还没有结果。

有没有办法让 Visual Studio 在编译期间或之后运行一些代码，而不使用项目的后期构建任务或任何插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T21:19:27.533

魔法在最后一行`C:\Windows\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets`。这会加载一个文件`c:\Program Files\MSBuild\v3.5\Custom.After.Microsoft.Common.targets`（如果存在）。

因此 PostSharp 在安装期间编辑此文件并添加对其自己的目标文件的引用。

# sql-server-2005 - 有什么方法可以将 sql server 2005 中的数据库图表转换为其他格式？

> ID：601749
> 
> 赞同：1
> 
> 时间：2009-03-02T09:31:22.393
> 
> 标签：sql-server-2005

我可以将图表转换为其他格式，如 Visio（除了复制到 sql server 2005 中的剪贴板命令）或任何其他实用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T09:56:02.397

显然不是，我多年来一直在寻找这个功能。

对于未来版本的 SQL 来说，这将是一个不错的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T09:50:25.250

不知道。但是 Balsamiq Mockups 是一个非常简单的图表模拟工具（包括 SQL 和 ER）。看看 - [http://www.balsamiq.com/](http://www.balsamiq.com/)

# iphone - 如何在倒 Y 轴的角度处理平移矩阵

> ID：601751
> 
> 赞同：1
> 
> 时间：2009-03-02T09:32:29.927
> 
> 标签：iphone, math, matrix, translation

我的用户案例是一个 iphone 应用程序，我在其中对图像的缩放、旋转和平移进行动画处理。

因此，我将所有内容连接起来并将其提供给转换属性，但存在一个问题：

由于我的图像大小不同，因此正确定位它们是一个问题。我习惯了一个倒置的 y 轴坐标系，所以我希望我的图像在 y 轴上精确定位在 60 像素处。

那么，如何从原来的笛卡尔 y 轴变为倒置 y 轴的观点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T16:13:19.383

正如 smacl 指出的那样，最简单的方法是通过在视图的原点中使用 (screenheight - viewheight - y) 而不是 y 将原点移动到屏幕的左下角。

但是，您可以使用 CATransform3D 翻转主视图图层的坐标系。我这样做是为了可以在我的 iPhone 应用程序和 Mac 客户端之间共享相同的 Core Animation CALayer 布局代码（iPhone 会反转 CALayers 的正常 Quartz 坐标系以匹配 UIViews 的坐标系）。要启用此功能，您需要做的就是放置线

```
self.layer.sublayerTransform = CATransform3DMakeScale(1.0f, -1.0f, 1.0f); 
```

在您的图层托管 UIView 的初始化代码中。请记住，这将翻转您的 CALayers，因此这些图层中的任何 UIKit 文本渲染也可能需要使用类似于以下的代码进行翻转：

```
CGContextSaveGState(context);
CGContextTranslateCTM(context, 0.0f, self.frame.size.height);
CGContextScaleCTM(context, 1.0f, -1.0f);

UIFont *theFont = [UIFont fontWithName:@"Helvetica" size:fontSize];
[text drawAtPoint:CGPointZero withFont:theFont];

CGContextRestoreGState(context); 
```

您可以使用 CGAffineTransform 进行类似的反转，但您还需要应用转换才能使其工作：

```
CGAffineTransform flipTransform = CGAffineTransformMakeTranslation(0.0f, self.frame.size.height);
flipTransform = CGAffineTransformScale(flipTransform, 1.0f, -1.0f); 
```

您可以使用仿射变换使用 CGPointApplyAffineTransform() 转换原点坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T09:42:54.957

对于每个 y 坐标，y = top-y，其中 top 是您正在绘制的边界框顶部的 y 坐标。

# html - 嵌套列表中的锚点是无效的还是萤火虫错误？

> ID：601754
> 
> 赞同：0
> 
> 时间：2009-03-02T09:34:32.637
> 
> 标签：html, firebug

以下 HTML 是否有问题，或者我只是遇到了 Firebug 错误？当我查看 firebug 中的第一个列表元素时，您会发现 firebug 很难正确识别锚点；但是，第二个（外部）列表元素没有问题。如果我从第一个列表元素中删除嵌套列表，那么问题就会消失。同样，如果我删除外部列表，问题就会消失。因此，在嵌套列表周围放置锚似乎存在问题。

我尝试用 div 甚至跨度替换锚点，并且萤火虫不会抱怨，所以这似乎是特定于锚点的。我也尝试了各种文档类型，但没有成功。

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  </head>
  <body>
    <ul>
      <li>
        <a href="http://whatever" style="display:block">
          <p>some text</p>
          <ul>
            <li>a list entry</li>
          </ul>
        </a>
      </li>
      <li>
        <a href="http://whatever">
           <p>more text</p>
        </a>
       </li>
    </ul>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T09:36:44.113

该`a`元素只允许[内联元素](http://www.w3.org/TR/html401/sgml/dtd.html#inline)作为子元素。所以`p`元素和`ul`元素不允许在那里。

# c++ - 如何获取 boost::asio::ip::tcp::socket 的 IP 地址？

> ID：601763
> 
> 赞同：66
> 
> 时间：2009-03-02T09:37:10.443
> 
> 标签：c++, networking, boost, boost-asio

我正在使用 Boost ASIO 库用 C++ 编写服务器。我想让客户端 IP 的字符串表示形式显示在我的服务器日志中。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2009-03-02T10:05:17.787

套接字具有检索远程端点的功能。我会试一试这个（长的）命令链，它们应该检索远程端 IP 地址的字符串表示形式：

```
asio::ip::tcp::socket socket(io_service);
// Do all your accepting and other stuff here.

asio::ip::tcp::endpoint remote_ep = socket.remote_endpoint();
asio::ip::address remote_ad = remote_ep.address();
std::string s = remote_ad.to_string(); 
```

或单行版本：

```
asio::ip::tcp::socket socket(io_service);
// Do all your accepting and other stuff here.

std::string s = socket.remote_endpoint().address().to_string(); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-05T15:10:55.080

或者，更简单的是`boost::lexical_cast`：

```
#include <boost/lexical_cast.hpp>

std::string s = boost::lexical_cast<std::string>(socket.remote_endpoint()); 
```

# mysql - mysql表结构 - 一个非常大的表或单独的表？

> ID：601766
> 
> 赞同：6
> 
> 时间：2009-03-02T09:39:29.177
> 
> 标签：mysql, performance, large-data-volumes

我正在从事一个与网站访问者分析性质相似的项目。它将被数百个网站使用，每个网站平均每天有 10,000 到 100,000 次页面访问，因此数据量将非常大。

我应该使用带有 websiteid 的单个表还是为每个网站使用单独的表？

对拥有 100 多个网站的实时服务进行更改，每个网站都有单独的表格，这似乎是一个大问题。另一方面，性能和可扩展性可能会成为如此大数据的问题。欢迎任何建议、意见或建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-02T10:17:51.330

一张由网站 FK[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-overview.html)的表怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T10:50:33.047

我会说根据您的数据使用最有意义的设计 - 在这种情况下是一张大表。

这些记录都是相同的类型，具有相同的列，因此从数据库规范化的角度来看，将它们放在同一个表中是有意义的。索引使选择特定行变得容易，尤其是当单个索引中的数据可以满足整个查询时（通常是这种情况）。

请注意，访问者分析必然涉及许多操作，除了一次对大量行进行操作外，没有简单的方法可以优化 - 例如：计数、总和和平均值。像这样的资源密集型统计数据通常是预先计算和存储的，而不是实时获取的。这是你想要考虑的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-21T14:47:54.547

如果数据统一，就一张表。如果您需要在具有多个表的所有网站上进行 SELECT 操作，那将是一件痛苦的事情。但是，如果您编写了足够多的脚本，则可以使用多个表来完成。

您可以使用 MySQL 的 MERGE 存储引擎跨表执行 SELECT（但不要期望良好的性能，并注意 Windows 对打开文件数量的硬限制 - 在 Linux 中，您可能必须使用 ulimit 来提高限制。有没有办法在 Windows 中做到这一点）。

我已经将一个巨大的表分成许多（数百个）表并使用 MERGE 来选择。我这样做是为了可以离线创建和优化每个小表。（例如 OPTIMIZE 或 ALTER TABLE...ORDER BY）。然而 SELECT 与 MERGE 的性能使我编写了自己的自定义存储引擎。（描述http://blog.coldlogic.com/categories/coldstore/'>这里）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-21T15:03:03.107

使用单一数据结构。一旦你开始遇到性能问题，有很多解决方案，比如你可以通过网站 id 对表进行分区，也称为水平分区，或者你也可以使用复制。这一切都取决于读取与写入的比率。

但是首先要保持简单，并使用一个具有适当索引的表。您还可以确定是否需要交易。您还可以利用各种不同的 mysql 存储引擎，如 MyIsam 或 NDB（内存集群）来提高性能。缓存在从数据库中卸载负载方面也起着非常好的作用。大部分只读且易于计算的数据通常放在缓存中，缓存为请求提供服务，而不是进入数据库，只有必要的查询进入数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-21T14:54:01.380

除非您对 MySQL 有性能问题，否则请使用一张表。

这里没有人不能回答性能问题，你应该自己做性能测试来了解，一张大桌子是否足够。

# ruby-on-rails - Rails 中的命名空间模型：联合的状态是什么？

> ID：601768
> 
> 赞同：17
> 
> 时间：2009-03-02T09:41:56.860
> 
> 标签：ruby-on-rails, ruby, activerecord, model, namespaces

从一开始，Rails 就遇到了命名空间模型的问题。随着时间的推移，几乎每个人都放弃了使用它。包括我自己。

随着 Rails 2.3 的发布，我想了解最新情况。我想到的具体问题是：

*   首先，可以去吗？
*   表命名，遵循什么规则？
*   关联，如何以最少的冗长声明它们？如何命名外键列？
*   自动要求，如果将模型文件放在与命名空间匹配的子目录中，它会起作用吗？或者，如何命名和放置文件？
*   代，模型生成器是否成功且正确地处理命名空间？
*   生成器，包括控制器的脚手架生成器怎么样？
*   应该注意的任何不兼容性/怪癖？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-05T15:50:40.663

我在这个问题上看到的最好的文章来自[Strictly Untyped](http://www.strictlyuntyped.com/2008/08/activerecord-can-haz-namespaces.html)。据我所知，2.3 没有解决任何问题，这意味着它们仍然不可靠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-04T23:15:03.503

我们最近在公司内部就这个问题进行了一场大辩论。我想在一天结束的时候，我们认为如果你不能在数据库中命名表，那么给模型命名是没有意义的。我们决定为我们的模型添加前缀（用户、用户地址、用户电子邮件地址）并将它们放入用户目录，然后使用：

```
config.load_paths << "#{RAILS_ROOT}/app/models/users" 
```

加载模型。为了控制模型中的详细程度，我们经常这样做：

```
has_many :addresses, :class_name => "UserAddress" 
```

生成的时候，我们就好像没有命名空间一样创建（脚本/生成模型UserAddress）然后手动复制到用户目录下。

耸耸肩。我想最后这一切真正给你的是一个更干净的目录结构，这对于像我这样的 VIM 用户来说实际上更麻烦，但对 TextMaters 来说很好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-03-04T23:26:21.013

我还是会远离它。当您考虑到代码中的简洁性和清晰度的麻烦和损失时，任何获得的东西（我不确定那会是什么）肯定会丢失。

我最新的应用程序有 87 个资源，并且包括所有地方的管理功能。我认为不需要命名空间，恕我直言。

# html - 我怎样才能把这个href链接转换成一个按钮？

> ID：601769
> 
> 赞同：1
> 
> 时间：2009-03-02T09:42:01.137
> 
> 标签：html

```
echo "<a href=User_list.php?id=$row[1]&sec=$row[5]&subj=$row[6]&type=viewrec2&Year=$row[12]&faci=$row[9]>LIST</a></td>"; 
```

如何将此代码转换为按钮？并将按钮制作为我制作的图像按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T09:49:26.717

尝试这个：

```
echo "<form action=\"User_list.php?id=$row[1]&sec=$row[5]&subj=$row[6]&type=viewrec2&Year=$row[12]&faci=$row[9]\">";
echo "  <button type=\"submit\" value=\"LIST\">";
echo "    <img src=\"image.gif\" alt=\"LIST\"/>";
echo "  </button>";
echo "</form>"; 
```

（感谢@guerda对如何包含图像[的回答。）](https://stackoverflow.com/questions/601769/how-can-i-convert-this-a-href-link-into-a-button/601779#601779)

你必须转义`'&'`字符，但我不知道你是如何在 PHP 中做到这一点的。

请注意，如果您在同一页面中有其他表单，这可能会产生副作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T09:45:45.587

尝试

```
<input type="button" onclick="window.location = 'User_list.php?id=$row[1]&sec=$row[5]&subj=$row[6]&type=viewrec2&Year=$row[12]&faci=$row[9]'" class="myButton" /> 
```

您可以使用 CSS 相应地设置按钮的背景图像的样式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T09:46:32.903

要将图像添加到 HTML 表单按钮，请尝试以下操作：

```
<button name="somebutton" type="button" value="somevalue" onclick="alert('Hello World!');">
  <img src="someimage.gif" alt="someimage">
</button> 
```

来自：[SelfHTML（德语）](http://de.selfhtml.org/html/formulare/klickbuttons.htm)

# xml - 由于编码，AXIS2 生成错误的 SOAP 消息。如何解决？

> ID：601771
> 
> 赞同：1
> 
> 时间：2009-03-02T09:42:56.610
> 
> 标签：xml, web-services, wsdl, axis2, wsdl2java

**问题**：如何在轴上使用不同的*编码（字符集和传输） ？*

这是我的客户：

```
public Object[] invoke(String xmlRepresentation)
            throws CustomApplicationException {

            Object[] responseWS = null;
            RPCServiceClient serviceClient = new RPCServiceClient();            
            Options options = serviceClient.getOptions();           
            options.setAction("WBSREFT");
            options.setTo(new EndpointReference("http://localhost:6132"));
            QName qName = new QName(XML_SCHEMA, operation);

            Object[] args = new Object[] { "blablabla" };
            responseWS = serviceClient.invokeBlocking(qName, args, returnTypes);

            String responseAsString = (String) responseWS[0];
            return responseWS;

    } 
```

这是正在生成的 SOAPEnvelope（使用 TCP/IP 监视器捕获）：

```
<?xml version="1.0" encoding="http://schemas.xmlsoap.org/soap/envelope/"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
<WBSREFT xmlns="http://tempuri.org/LICPOCSampleService">
<arg0 xmlns="">blablabla</arg0>
</WBSREFT>
</soapenv:Body>
</soapenv:Envelope> 
```

为什么 Axis2 生成了这种愚蠢的编码（[http://schemas.xmlsoap.org/soap/envelope](http://schemas.xmlsoap.org/soap/envelope)）？？？

使用 Apache TCPMon 我捕获了这个请求：

```
POST / HTTP/1.1
Content-Type: text/xml; charset=UTF-8
SOAPAction: "WBSREFT"
User-Agent: Axis2
Host: 172.17.192.113:6133
Transfer-Encoding: chunked

102
<?xml version='1.0' encoding='UTF-8'?>
   <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
      <soapenv:Body>
         <WBSREFT xmlns="http://tempuri.org/LICPOCSampleService">
            <arg0 xmlns="">to cobol</arg0>
         </WBSREFT>
      </soapenv:Body>
   </soapenv:Envelope>0 
```

如果我使用 TCPMon 捕获的soapUI 发送 XML 请求：

```
POST / HTTP/0.9
Content-Type: text/xml;charset=UTF-8
SOAPAction: ""
User-Agent: Jakarta Commons-HttpClient/3.1
Host: 172.17.192.113:6133
Content-Length: 265

<?xml version="1.0" encoding="UTF-8"?>
   <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
      <soapenv:Body>
         <WBSREFT xmlns="http://tempuri.org/LICPOCSampleService">
            <arg0 xmlns="">to cobol</arg0>
         </WBSREFT>
      </soapenv:Body>
   </soapenv:Envelope> 
```

我注意到这个奇怪的输出：XML 中间的 102 和 0 ......它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T11:55:21.783

XML 中间的 102 和 0 是“Transfer-Encoding: chunked”的产物，它们不是您发送的内容的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T12:35:43.010

毕竟 Eclipse 的插件 TCP/IP Monitor 显然没有给我正确的 XML 请求，导致我走向错误的方向。

它显示**encoding="http://schemas.xmlsoap.org/soap/envelope/"**，而 Apache TCPMon 给了我不同的（正确的）结果。

正如[saua 所](https://stackoverflow.com/users/40342/saua)指出的，问题是块编码，你可以用这个来改变它（并解决了我的问题）：

```
options.setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, Boolean.FALSE); 
```

并回答我的问题：

```
options.setProperty(org.apache.axis2.Constants.Configuration.CHARACTER_SET_ENCODING, "UTF-8"); 
```

# url - 如何重定向页面网址？

> ID：601772
> 
> 赞同：-2
> 
> 时间：2009-03-02T09:43:30.413
> 
> 标签：url, redirect

我的问题有点难但很简单。我有（或有）一个网页（[http://sub.domain.com/page.php](http://sub.domain.com/page.php)）。应用程序从该页面获取数据。我的目标是更改此页面，而不是更改它，而是让系统从 c:\page.php 获取数据。如何进行重定向？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T00:15:19.413

和其他人一样，我有点不清楚你到底要做什么，但我有一个很好的猜测。让我重申你的问题，看看我的情况是否正确：

您有一个从任意网页检索和处理数据的应用程序。您无法控制此应用程序的行为，并且它正在获取的 URL 不是可配置的选项。您希望能够覆盖 URL 并导致应用程序改为提取您生成的数据，而不是它正在提取的默认 URL。

如果“page.php”页面是您的应用程序从 sub.domain.com 提取的唯一数据，那么颠覆正常行为的一种简单方法是覆盖本地名称服务器上的 sub.domain.com 的 DNS 或运行应用程序的机器的[主机文件](http://en.wikipedia.org/wiki/Hosts_file)。这将是 Unix/Linux/OS X 中的 /etc/hosts 或现代 Windows 机器上的 %SystemRoot%\system32\drivers\etc\。

您可以在 hosts 文件中为 sub.domain.com 添加一个条目，该条目指向您控制的 Web 服务器的 IP 地址，然后您可以使该服务器响应您想要的任何内容。

如果应用程序依赖于来自 sub.domain.com 的更多内容，那么这种方法可能过于繁琐而无法实用，因为您必须将所有数据复制到伪装成 sub.domain.com 的网络服务器上，然后离开只是转换 page.php 内容时很正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T12:42:21.170

如果您的意思是“屏幕抓取”，则更改正在*抓取*数据的“系统”中的目标网址。您不能让系统从文件或文件夹中抓取（例如：c:\page.php”。它必须是一个 url。

# pygame - pygame 中的混合模式是什么意思？

> ID：601776
> 
> 赞同：12
> 
> 时间：2009-03-02T09:45:46.400
> 
> 标签：pygame, alphablending, blending

[Surface.blit](http://www.pygame.org/docs/ref/surface.html#Surface.blit)在 1.8 中有一个新参数：blend。定义了以下值：

*   `BLEND_ADD`
*   `BLEND_SUB`
*   `BLEND_MULT`
*   `BLEND_MIN`
*   `BLEND_MAX`
*   `BLEND_RGBA_ADD`
*   `BLEND_RGBA_SUB`
*   `BLEND_RGBA_MULT`
*   `BLEND_RGBA_MIN`
*   `BLEND_RGBA_MAX`
*   `BLEND_RGB_ADD`
*   `BLEND_RGB_SUB`
*   `BLEND_RGB_MULT`
*   `BLEND_RGB_MIN`
*   `BLEND_RGB_MAX`

有人可以解释这些模式的含义吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-09T08:57:41.293

您可以在此处找到混合操作的来源：[surface.h](https://github.com/atizo/pygame/blob/master/src/surface.h)

基本上，ADD 将两个源像素相加并在 255 处裁剪结果。SUB 减去两个像素并在 0 处裁剪。

`MULT`：`result = (p1 * p2) / 256`

`MIN`：选择每个通道的较低值（不是整个像素），所以如果 pixel1 是`(100,10,0)`并且 pixel2 是`(0,10,100)`，你得到`(0,10,0)`

`MAX`: 与 MIN 相对（即`(100,10,100)`）

还有一个额外的混合模式，这在文档中并不明显：（`0`或者只是将参数排除在外）。此模式会将源表面“标记”到目的地。如果源表面具有 Alpha 通道，这将确定每个像素的“强度”程度（`0`=no effect, `255`=copy pixel, `128`: `result = .5*source + .5*destination`）。

有用的效果：要使某个区域变暗，请使用混合模式 0，将源/印章表面填充黑色并将 alpha 设置为`10`: `(0,0,0,10)`。

要使其变亮，请使用白色`(255,255,255,10)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T23:47:49.960

这些是用于在彼此之上合成图像的混合模式。混合模式的名称已经告诉您底层操作。

`BLEND_*`常量只是常量的别名，变量`BLEND_RGB_*`在`BLEND_RGBA_*`所有四个通道（包括 alpha 通道）上运行，而不是仅在 RGB 上运行。

有关不同混合模式及其各自效果的一般信息，请参见[此处](http://illusions.hu/effectwiki/doku.php?id=list_of_blendings)。

# c++ - 如何使用 CDT 配置 Eclipse？

> ID：601777
> 
> 赞同：4
> 
> 时间：2009-03-02T09:45:59.050
> 
> 标签：c++, eclipse, cygwin, makefile, eclipse-cdt

我一直在尝试在带有 cygwin 的 Windows XP 下将 CDT 与 Eclipse 3.4 一起使用。

为了开始，我需要做什么？我使用了 Eclipse 主页上的“eclipse-cpp-ganymede-SR1-win32.zip”。

编辑：

主要问题是，我无法编译和运行代码。

在运行配置中，我为 C/C++ 应用程序尝试了 gcc.exe：

将 make.exe 的路径添加到我的 $Path 后，从头开始，它可以完美运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T08:14:23.020

我终于找到了。多谢你们。

下载并解压“eclipse-cpp-ganymede-SR1-win32.zip”后，您需要安装 Cygwin 或 MinGW。

确保编译器（例如 gcc.exe）和 make.exe 在您的 $Path 上。

启动 Eclipse，一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T07:56:39.257

如果您想在 Windows 上使用 Eclipse/CDT，您应该考虑使用[Wascana Desktop Developer](http://wascana.sourceforge.net/)，这是一个专门针对 Windows 主机的 CDT 发行版。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T09:54:08.797

根据[CDT 下载页面](http://www.eclipse.org/cdt/downloads.php)：

> 作为最低要求，您需要在安装 CDT 之前安装 Eclipse Platform Runtime

因此，将[CDT Ganymede 更新站点](http://download.eclipse.org/tools/cdt/releases/ganymede/)添加到您当前的 eclipse 3.4 配置中应该足以让您安装 CDT。

之后，您有任何错误消息吗？

例如，使用此包时可能会出现一些[与 eclipse.ini 相关的问题。](http://dev.eclipse.org/newslists/news.eclipse.newcomer/msg26763.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T10:00:39.797

对我来说，您下载的软件包从一开始就起作用。但是我将它与 MinGW 而不是 Cygwin 一起使用。

我也将它与 QT Integrator 一起用于 QT4 开发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T10:30:29.257

我使用 MinGW，但我注意到[文档说您可以使用 Cygwin](http://help.eclipse.org/stable/index.jsp?topic=/org.eclipse.cdt.doc.user/concepts/cdt_c_before_you_begin.htm)。我会查看[Max Berger 的 CDT 指南](http://max.berger.name/howto/cdt/)来解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-19T10:19:27.217

您可以在系统中同时安装 Cygwin 和 MinGW。gcc 和 make available with Mingw 似乎更适合原生 Windows 构建。如果 PATH 环境设置为 Cygwin [和/或] MinGW Eclipse 项目向导的路径，则要求您选择一个 . Cygwin 或 MinGW。

对于 MingW，如果您需要调试应用程序，您可能还需要下载 gdb

# c# - 使用 MCI 从内存中播放 avi 流

> ID：601781
> 
> 赞同：1
> 
> 时间：2009-03-02T09:48:44.037
> 
> 标签：c#, c++, windows, avi

我正在尝试在 C# 中使用 MCI 播放压缩的 AVI 文件。到目前为止，我可以通过打开文件来播放它。

我打开文件的方式是这样的：

```
String opencommand = "open \"" + file + "\" type mpegvideo alias someMovie shareable";    
int error;    
error = Avi.mciSendString(opencommand, null, 0, IntPtr.Zero); 
```

`file`文件路径在哪里。视频以这种方式播放得很好。

如果我能够从已经使用 avifil32.dll 加载的流中播放它，那在我的情况下会[`AVIFileOpen()`](http://msdn.microsoft.com/en-us/library/ms706420(VS.85).aspx)好得多`AVIFileGetStream()`。从 MSDN 文档看来我应该能够做到这一点。[他们在这里](http://msdn.microsoft.com/en-us/library/ms712776(VS.85).aspx)这么说：

> “MCI 可以使用文件接口指针或流接口指针打开 AVI 文件。要使用任一类型的接口指针打开文件，请指定 at 符号 (@)，后跟接口指针代替文件或参数的设备名称`lpszDevice`。有关文件和流接口的更多信息，请参阅“AVIFile函数和宏。”

但不幸的是，他们没有详细说明，我不知道我应该做什么。“流接口指针”实际上是什么意思，我从哪里得到一个？因为 MSDN 肯定不会试图解释他们发明的术语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-03T15:18:34.110

因此，部分回答我自己的问题：接口指针的假定用法似乎是这样的：

```
Avi.AVIFileOpen(ref aviFile, fileName, Avi.OF_SHARE_DENY_WRITE, 0);
Avi.mciSensString("open @" + aviFile + " type mpegvideo alias someMovie", null, 0, IntPtr.Zero); 
```

其中“aviFile”是指向由 AviFileOpen() 填充的文件接口的指针。我还尝试使用 AviFileGetStream() 获取流接口指针并将其传递给 MCI，但指针都不起作用，并且 MCI 抱怨它找不到文件。

根据 MS 的说法，这是一个已知的、未解决的[错误](http://support.microsoft.com/kb/140750)，所以除了将文件路径传递给 MCI 之外，这里没有什么可做的。

# ruby-on-rails - Rails 中用于提交小块数据的 AJAX 模式

> ID：601782
> 
> 赞同：1
> 
> 时间：2009-03-02T09:49:08.263
> 
> 标签：ruby-on-rails, ruby, ajax, design-patterns

我有一个网页，上面有很多小图像。在典型的场景中，用户点击图像并期望它随着新图像而改变。

要求：

1.  当用户单击图像时，控制器应该立即以 Ajax 方式知道它。
2.  当用户单击图像时，应将一些字符串传递给控制器​​。
3.  控制器完成它的工作并返回另一个图像（替换旧图像）。
4.  与图像控制器一起返回几个额外的字符串（例如完成状态）。
5.  网页用新图像更新旧图像，并用这些新字符串更新其他部分。
6.  页面上的图像数量各不相同，但可能有几十个。

问题：这里应该使用什么 Ajax 技术？我对 Ajax 还很陌生，而且对模式感觉不太好。应该是Json还是其他？

任何代码示例都会非常受欢迎和有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-07T20:30:44.560

好吧，听起来您需要图像对象上的事件观察者。在该图像对象上，您可以具有各种自定义属性，例如 imageid="2" 等。通过单击观察元素，您可以读取元素的属性并将它们传递给 AJAX 调用。我不确定数据库是否知道该图像，或者它是否可以在页面本身上使用。也许是一个后退/上一个按钮？在任何一种情况下，AJAX 调用都可以直接返回 JavaScript，然后对其进行解析以更新 DOM 并用新的图像源替换图像，或者它可以返回 JSON 响应，然后需要由 AJAX 回调读取和解析然后更新 DOM。最简单的是返回被解析的 JS 代码，

这实际上取决于您使用的 AJAX 库。

使用 jQuery，你可能会做这样的事情。

$("#buttonImage").click(function () {

var imageid = $(this).attr('imageid');

$.getJSON("/controller/get_image/" + imageid, function(data){ $("#buttonImage").attr("src", data.imagesrc); });

});

你的 /controller/get_image/123 会返回一个 JSON 响应，比如......

{ 'imagesrc' : '/my/image.jpg' }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T13:02:56.457

据我所知，更改图像的唯一浏览器安全方法是将新 URL 分配给它的 src 属性。如果您将图像返回给传递某些参数的请求，则可能会阻止客户端对图像进行兑现。由于这些原因，我将分别处理文本数据和图像的传输。完成状态始终可以作为 HTTP 状态文本返回，但如果需要服务器提供更多信息，您始终可以以 JSON 或 XML 的形式返回，最简单的是 JSON。通过在鼠标悬停事件上预加载图像可以提高响应能力。

# .net - 发布配置中的“好”ASP.net 堆栈跟踪或如何获取有问题的代码

> ID：601788
> 
> 赞同：3
> 
> 时间：2009-03-02T09:51:32.063
> 
> 标签：.net, asp.net

如果我有一个在 ASP.net 上运行的应用程序，并且我在 web.config 中启用了调试和堆栈跟踪，我会得到一个非常好的错误屏幕，告诉我究竟是哪个代码导致了错误。

可悲的是，在调试设置为 false 的实时系统上，黄屏死机非常无用，即使启用了堆栈跟踪，它也不会显示发生错误的行（这似乎很明显，因为应该没有调试信息）。

我只是想知道是否有一种方法可以获取有关错误的良好信息，而无需在 web.config 文件中启用 debug=true 。它不一定是对黄屏的改进，我也可以将我怀疑冒犯的代码包装在 try..catch 块中，但是在 catch 块中，有没有办法获得实际的代码导致错误？

您可能会怀疑，这是针对仅在生产中发生错误并且没有可用的远程调试器的情况:(

编辑：这是关于“正常”异常，如 System.ArgumentOutOfRangeException。如果有更好的方法来获取更多实际发生异常的信息，那么我想避免使用日志记录乱扔代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T11:15:25.437

面对这种情况，我要做的第一件事就是向 global.asax 添加一个全局异常处理程序，例如：

```
 protected void Application_Error(object sender, EventArgs e)
    {
        Exception ex = Server.GetLastError();
        Log.WriteException(ex);   // this is your code
    } 
```

您也可以在页面级别执行此类操作，但我认为您最好在应用程序级别执行此操作。当您将异常写入日志时，您还可以写入更多信息以帮助您重新创建错误，例如请求参数或会话信息。

另一个好的做法是在 web.config 中添加这样的部分：

```
 <customErrors mode="On" defaultRedirect="error.html">
    <error statusCode="500" redirect="500.aspx"/>
    <error statusCode="404" redirect="404.aspx"/>
    <error statusCode="403" redirect="403.aspx"/>
  </customErrors> 
```

这将显示所有未知错误的 error.html，并显示您为某些特定错误定义的相应页面，您可以在其中向用户提供有关如何解决错误或帮助他们找到所需内容的更多信息.

asp.net 中的错误处理是一个相当大的话题，但这应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T10:08:19.917

你能改造一些应用程序错误日志，比如[Log4Net](http://logging.apache.org/log4net/)或 ASP.NET [Health Monitoring](http://msdn.microsoft.com/en-us/library/ms998306.aspx)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T17:40:38.630

在不使用日志记录乱扔代码的情况下，我认为解决此问题的方法是将代码重构为更小的方法。听起来您有一个可以做很多事情的大型方法，并且异常可能发生在该方法中的许多地方。这曾经发生在我身上，我缩小范围的方法是将方法分成更小的块。由于您仍然可以在堆栈跟踪中看到方法名称，因此制作更细化的方法将帮助您跟踪引发异常的位置。

# javascript - 使用Javascript最小化浏览器窗口

> ID：601790
> 
> 赞同：11
> 
> 时间：2009-03-02T09:51:40.380
> 
> 标签：javascript, jquery, browser

是否有 Javascript 或 jQuery 方法来最小化当前浏览器窗口？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-02T10:06:00.703

无法在 javascript 中最小化浏览器窗口。

有办法改变窗口的大小，但没有真正的最小化（好词）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-02T10:04:54.013

不，没有。但是，根据您正在执行的操作以及所针对的浏览器，您可以使用窗口的模糊和焦点事件来实现类似的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-21T10:27:29.463

如果您使用扩展程序，则可以通过以下方式最小化`chrome.windows.update(window.id, { state: 'minimized' })`

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2013-01-24T09:22:51.010

我希望这是您正在寻找的：

```
<SCRIPT LANGUAGE="JavaScript">

function Minimize()
{
window.innerWidth = 100;
window.innerHeight = 100;
window.screenX = screen.width;
window.screenY = screen.height;
alwaysLowered = true;
}

function Maximize()
{
window.innerWidth = screen.width;
window.innerHeight = screen.height;
window.screenX = 0;
window.screenY = 0;
alwaysLowered = false;
}
</SCRIPT>

<A HREF="javascript:onClick=Minimize()">Minimize</A>
<A HREF="javascript:onClick=Maximize()">Maximize</A> 
```

# c# - 如何在午夜前或午夜后学习 mytime？

> ID：601791
> 
> 赞同：-3
> 
> 时间：2009-03-02T09:51:45.853
> 
> 标签：c#, .net, datetime

我向任何函数发送 datetime is_PM_AM("23:00.00") 如果它是 pm ，它必须返回 true 否则？但是怎么做？我的时间 =“23:30:00”

```
function(Datetime mytime) {
    if (Datetime.midnight < mytime) {
        return true;
    } else
        return false;
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T10:03:41.677

```
public bool IsTimePM(DateTime mytime)
{
    return (mytime.Hour >= 12 && mytime.Hour < 24);
} 
```

另请参阅[维基百科 - 12 小时制](http://en.wikipedia.org/wiki/12-hour_clock)

# java - 使用 Java 源代码从 MS Excel 导入数据

> ID：601795
> 
> 赞同：3
> 
> 时间：2009-03-02T09:53:44.680
> 
> 标签：java, excel

我想导入 MS Excel 中的数据并使用 Java 应用程序打印。我是Java新手。所以请指导，是否可能。

如果是，如何？任何网站/教程都会有很大帮助..

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T09:58:14.467

您可以使用[POI 库](http://poi.apache.org/index.html)来读取 excel 文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T09:55:37.170

您可以使用 jexcel API。它们总体上非常简单。[http://jexcelapi.sourceforge.net/](http://jexcelapi.sourceforge.net/)

我也认为 Apache POI 也在这个领域工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T10:06:49.593

这是一篇关于使用[JDBC 使用 Excel 作为数据源的文章](http://www.javaworld.com/javaworld/javaqa/2001-06/04-qa-0629-excel.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T12:09:13.933

为什么不以某种非专有格式从 Excel 中导出它？如果数据不太复杂，即使是 CSV 也可以解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T16:42:17.813

**这个 JSP 页面将 Excel 工作表连接到数据库。**

```
.<%@ page import="java.sql.*" %><br/>
.<% Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); %>

<BODY>               

.<%
  Connection con=DriverManager.getConnection("jdbc:odbc:DsnName");<br/>
  Statement stm=con.createStatement();<br/>
  ResultSet rs=stm.executeQuery("select * from [Sheet1$]");       
%>

.<% if(!rs.next()) {
    out.println("Sorry, could not find data");
 }
 else { %>
  .<%=rs.getString(1)%>
.<%}%>

</BODY> 
```

# c# - 使用 + 分配单个字符串值的性能成本是多少

> ID：601804
> 
> 赞同：11
> 
> 时间：2009-03-02T09:56:36.840
> 
> 标签：c#, java, performance, string, compiler-optimization

我经常想知道，在最初为字符串赋值时，将字符串拆分为多行以提高可读性是否会降低性能成本。我知道字符串是不可变的，因此每次都需要创建一个新字符串。此外，由于当今非常快速的硬件，性能成本实际上是无关紧要的（除非您处于某种恶魔般的循环中）。例如：

```
String newString = "This is a really long long long long long" +
    " long long long long long long long long long long long long " +
    " long long long long long long long long long string for example."; 
```

JVM 或 .Net 的编译器和其他优化如何处理这个问题。它会创建一个字符串吗？或者它会创建 1 个字符串，然后创建一个新的连接值，然后再创建另一个连接值？

这是出于我自己的好奇心。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-02T09:59:04.230

C# 规范保证这与在单个文字中创建字符串相同，因为它是编译时常量。从 C# 3 规范的第 7.18 节：

> 只要表达式满足上面列出的要求，就会在编译时评估该表达式。即使表达式是包含非常量结构的较大表达式的子表达式，也是如此。

（有关“上述要求”的详细信息，请参阅规范：）

[Java 语言规范在3.10.5 节](http://java.sun.com/docs/books/jls/third_edition/html/lexical.html#101083)的底部附近指定了它：

> 由常量表达式（第 15.28 节）计算的字符串在编译时计算，然后将其视为文字。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-02T10:03:54.313

实际上，在 Java 中，编译器会将`String`转换为常量。

```
class LongLongString
{
    public LongLongString()
    {
        String newString = "This is a really long long long long long" +
            " long long long long long long long long long long long long " +
            " long long long long long long long long long string for example.";
    }

    public static void main(String[] args)
    {
        new LongLongString();
    }
} 
```

被编译成：

```
Compiled from "LongLongString.java"
class LongLongString extends java.lang.Object{
public LongLongString();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   ldc #2; //String This is a really long long long long long long long long long long long long long long long long long  long long long long long long long long long string for example.
   6:   astore_1
   7:   return

public static void main(java.lang.String[]);
  Code:
   0:   new #3; //class LongLongString
   3:   dup
   4:   invokespecial   #4; //Method "<init>":()V
   7:   pop
   8:   return

} 
```

可以看出，在第 4 行中加载了单行，而不是`String`加载了多个实例。

**编辑：**源文件是使用`javac`版本 1.6.0_06 编译的。查看[The Java Language Specification, Third Edition](http://java.sun.com/docs/books/jls/third_edition/html/j3TOC.html)（以及[Jon Skeet 的回答](https://stackoverflow.com/questions/601804/what-is-the-performance-cost-of-assigning-a-single-string-value-using-s/601813#601813)中提到的同一部分），我无法找到任何关于编译器是否应该将多行连接`String`成单行的参考`String`，所以这种行为可能是编译器特定于实现。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-02T10:05:31.717

自己测试一下。在 C# 代码中（等效的 Java 也可以）：

```
string x = "A" + "B" + "C";
string y = "ABC";

bool same = object.ReferenceEquals(x, y); // true 
```

你会看到结果是`true`.

顺便说一句，您会看到该字符串也被保留在运行时的字符串池中：

```
bool interned = object.ReferenceEquals(x, string.Intern(x)); // true 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-02T09:59:39.283

没有性能权衡。编译器的优化会将其合并为单个字符串（至少在 Java 中）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-02T09:58:12.377

据我所知，这不会创建多个字符串，只会创建一个。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-02T11:04:46.273

等效的 .NET IL 来补充[coobird 的答案](https://stackoverflow.com/questions/601804/what-is-the-performance-cost-of-assigning-a-single-string-value-using-s/601824#601824)：

对于 C# 代码：

```
string s = "This is a really long long long long long" +
    " long long long long long long long long long long long long " +
    " long long long long long long long long long string for example.";
Console.WriteLine(s); 
```

调试编译产生：

```
.method public hidebysig static void Main(string[] args) cil managed
{
  .custom instance void [mscorlib]System.STAThreadAttribute::.ctor()
  .maxstack 1
  .locals init (
      [0] string str)
  L_0000: ldstr "This is a really long long long long long long long long long long long long long long long long long  long long long long long long long long long string for example."
  L_0005: stloc.0 
  L_0006: ldloc.0 
  L_0007: call void [mscorlib]System.Console::WriteLine(string)
  L_000c: ret 
} 
```

所以，正如你所看到的，它是一个字符串。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-02T09:59:51.200

只要所有字符串都是常量（就像在您的示例中一样），在 Java（我想是 C#）中，编译器会将其转换为单个字符串。

如果您连接大量动态字符串（例如在循环中），您只会遇到 + 的性能问题。在这种情况下，使用 StringBuilder 或 StringBuffer。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-02T21:59:46.680

免责声明：这适用于 Java。我会假设它适用于 c#

javac 不仅会创建一个字符串，而且 JVM 会为所有其他包含相同文本的字符串使用一个字符串。

```
String a = "He" + "llo th"+ "ere";
String b = "Hell" + "o the"+ "re";
String c = "Hello" +" "+"there";
assert a == b; // these are the same String object.
assert a == c; // these are the same String object. 
```

注意：它们在运行时将是相同的 String 对象，即使它们位于不同 JARS 的不同类中，由不同的编译器编译。

# c - mmap 保护标志对进程间共享的影响

> ID：601806
> 
> 赞同：1
> 
> 时间：2009-03-02T09:57:05.107
> 
> 标签：c, mmap

保护标志会影响进程之间的共享吗？如果我有 PROT_READ|PROT_WRITE 保护的映射内存区域，只要我没有写入它，它是否仍然完全共享？

```
int prot = PROT_READ|PROT_EXEC;
image = mmap(NULL, filesize, prot, MAP_PRIVATE, fildes, 0); 
```

与：

```
int prot = PROT_READ|PROT_WRITE|PROT_EXEC;
image = mmap(...) 
```

我想在映射后对内存区域的一小部分进行小修改，然后重新保护它，因为它比在我需要时保护小部分更简单。

问题是它最终是强制每个进程复制整个文件还是只是我在每个进程中修改的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T17:49:38.233

根据最近 Linux 系统上的[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)手册页，MAP_PRIVATE 使用[写时复制](http://en.wikipedia.org/wiki/Copy-on-write)(COW) 分配内存。这意味着，除非您对其进行更改，否则您的记忆将不会被复制。由于 COW 是实现这一点的一种有效方法，我认为在其他 *NIX 系统中也是如此。

mmap 的内存被组织成大小相等的块，即所谓的页。内存将始终以页面大小的倍数映射，即整个页面。每个页面都可以独立交换。因此，如果您向这个 mmap 的内存范围写入内容，则只需复制至少一页。

页面大小取决于您的系统，在 x86 上通常为 4096 字节。如果您对系统的页面大小感兴趣，可以使用[sysconf(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/sysconf.3.html)。

```
 #include <unistd.h>
   long pagesize = sysconf(_SC_PAGESIZE); 
```

您从 mmap() 获得的指针已经指向页面大小的倍数，您应该向 mprotect() 传递一个与页面边界对齐的地址。

# iphone - 如何从 iPhone 上的数组中提取字符串？

> ID：601807
> 
> 赞同：1
> 
> 时间：2009-03-02T09:57:40.630
> 
> 标签：iphone, arrays, string, substring

我想按索引从数组中提取一个字符串。

例如带有对象的数组：@"Hello"、@"World"

如何从中获取@“World”？我使用数组 [1]，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-02T09:59:25.260

我发现[这种方法](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSArray/objectAtIndex:)效果很好：

```
- (id)objectAtIndex:(NSUInteger)index 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T13:46:00.783

您还可以使用枚举器，如下所示：

```
NSEnumerator* enumerator = [myArray objectEnumerator];
ArrayObject* myObject;

while (myObject = [enumerator nextObject]) 
    {
// do something with myObject
} 
```

# iphone - 什么时候应该使用 UITableView reloadData ？和相关的缺陷；）

> ID：601818
> 
> 赞同：0
> 
> 时间：2009-03-02T10:00:38.453
> 
> 标签：iphone, uitableview

我用自定义单元格构建了一个 UITableView，每个单元格包含 5 个文本字段（有点像网格）。可以内联编辑单元格（无需进入单独的视图）。

在使用 reloadData 时，我遇到了一些奇怪的缺陷。

*   我的表格页脚是动态的（根据单元格计算值）。每次更新单元格时都应该调用 reloadData 吗？或者有没有办法只更新页脚？

*   当我开始编辑单元格但将其留空（不要在文本字段中写入任何文本）时，如果我使用了 reloadData，则单元格不会进入编辑模式。在空单元格上执行 reloadData 时是否存在任何已知缺陷？

基本上我不太确定使用 reloadData 的最佳实践，也没有在任何地方找到任何指南。任何建议将不胜感激。

问候，乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T15:06:02.357

您应该尽量减少表格视图中的重新加载，并且仅在您无法以其他方式更新表格时使用它。
例如，删除不需要重新加载的行时，只需根据需要使用 deleteRowsAtIndexPaths 或 deleteSections。

其他视图你可以只更新它们的属性。例如，如果您在页脚中有一个标签，您只需要设置它的 text 属性。您不需要重新加载表。

我认为您不能直接编辑 cellForRowAtIndexPath 方法之外的单元格的某些属性。在这种情况下，您将需要重新加载将调用 cellForRowAtIndexPath 方法的表。

# wpf - tabControl 中的多个 userControl 实例

> ID：601826
> 
> 赞同：4
> 
> 时间：2009-03-02T10:04:43.140
> 
> 标签：wpf, datatemplate, tabcontrol, itemtemplate

我有一个绑定到可观察集合的 tabControl。在 headerTemplate 中，我想绑定到一个字符串属性，并且在 contentTemplate 中我放置了一个用户控件。

这是 MainWindow.xaml 的代码：

```
<Grid>
    <Grid.Resources>            
        <DataTemplate x:Key="contentTemplate">
                <local:UserControl1 />
        </DataTemplate>

        <DataTemplate x:Key="itemTemplate">
                <Label Content="{Binding Path=Name}" />
        </DataTemplate>
    </Grid.Resources>

    <TabControl IsSynchronizedWithCurrentItem="True" 
                ItemsSource="{Binding Path=Pages}"
                ItemTemplate="{StaticResource itemTemplate}"
                ContentTemplate="{StaticResource contentTemplate}"/>

</Grid> 
```

及其背后的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        this.DataContext = new MainWindowViewModel();
    }        
}

public class MainWindowViewModel
{
    public ObservableCollection<PageViewModel> Pages { get; set; }

    public MainWindowViewModel()
    {
        this.Pages = new ObservableCollection<PageViewModel>();
        this.Pages.Add(new PageViewModel("first"));
        this.Pages.Add(new PageViewModel("second"));
    }
}

public class PageViewModel
{
    public string Name { get; set; }

    public PageViewModel(string name)
    {
        this.Name = name;
    }
} 
```

所以这个场景中的问题（指定了一个 itemTemplate 和一个 controlTemplate）是我只得到**一个**用户控件的实例，我想为每个绑定到的项目都有一个实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:26:19.743

尝试这个：

```
<TabControl IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding Pages}">
    <TabControl.Resources>
        <DataTemplate x:Key="contentTemplate" x:Shared="False">
            <local:UserControl1/>
        </DataTemplate>
        <Style TargetType="{x:Type TabItem}">
            <Setter Property="Header" Value="{Binding Name}"/>
            <Setter Property="ContentTemplate" Value="{StaticResource contentTemplate}"/>
        </Style>
    </TabControl.Resources>
</TabControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T10:30:25.323

尝试设置

> x:共享=“假”
> 
> 当设置为 false 时，修改 Windows Presentation Foundation (WPF) 资源检索行为，以便对资源的请求将为每个请求创建一个新实例，而不是为所有请求共享同一个实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-03T12:12:57.517

您需要覆盖类的`Equals()`方法`PageViewModel`。

```
public override bool Equals(object obj)
{
    if (!(obj is PageViewModel)) return false;

    return (obj as PageViewModel).Name == this.Name;
} 
```

像这样的东西应该工作。

现在它正在寻找值 Name 的相同属性。否则，您还可以添加一个唯一的 ID 属性。

# excel - 范围不连续的for循环

> ID：601830
> 
> 赞同：0
> 
> 时间：2009-03-02T10:05:29.783
> 
> 标签：excel, vba

我有一个循环遍历每一列，并将值设置为上面几行的 R1C1 总和。我正在使用 for 循环，但我想跳过几列，因为它们包含单元格中已经存在的公式。如何设置仅循环通过非连续集或数字的循环？

作为参考，我希望它循环浏览第 1 到 80 列，但跳过第 25、36、37、44、60、63、64、67、68、73、75 和 76 列。

编辑：谢谢大家，但是我已经按照您的描述进行了工作；我一直在寻找一种更短更优雅的方法。

编辑2：这甚至是VBA吗？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-02T10:20:20.060

Learning 的 C# 答案的 VBA 版本：-

```
Dim col As Integer: For col = 1 To 70

    Select Case col

    Case 25, 36, 37, 44, 60, 63, 64, 67, 68, 73, 75, 76
        'do nothing'

    Case Else
        'do something'

    End Select

Next col 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T10:10:36.713

我会做两件事之一。第一个是只执行特定循环号的主体：

```
for i = 1 to 70
    skipIt = false
    skipIt = skipIt or (i = 25)
    : : :
    skipIt = skipIt or (i = 76)
    if not skipIt then
        ' Put your body here. '
    end if
next 
```

或者，您可以直接跳到下一个：

```
for i = 1 to 70
    if i = 25 goto nextIter
    : : :
    if i = 76 goto nextIter

    ' Put your body here. '
nextIter:
next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T10:10:50.160

您可以在循环的开头放置一个 if ，并跳过您不想遍历的列

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T10:14:47.483

```
 for i = 1 to 70
  {
    switch (i)
    {
      case 25, 36, 37, 44, 60, 63, 64, 67, 68, 73, 75 76 : break;
      default : // process break;
    }
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T10:26:56.800

您可以设置一个包含您需要处理的列号的数组。

然后，您的循环可以遍历数组值。

另一种解决方案是为每一列定义一个布尔数组，并标记要跳过的列。在所有列的循环中检查布尔数组。

另一种解决方案是，如果您可以在循环中检测该列是否是您需要跳过的列（通过检测那里的公式）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-09T10:36:45.470

此方法使用 Excel 的范围对象功能。

使用 Excel 的 UNION 方法将您的范围定义为不连续的列范围。

为了加快循环，您可以使用范围对象的 SpecialCells 方法缩小范围以仅包含那些包含公式的单元格。

函数 LoopColumns() 将目标调暗为范围 将单元格调暗为范围

' 根据你想要的列的并集创建一个范围对象 Set Target = Union(Range("A:D"), Range("F:G"), Range("J:L"), Range("P :Q"))

' 如果您只想处理公式，请再次缩小范围，但让 Excel 将范围定义为仅包含公式的单元格 Set Target = Target.SpecialCells(xlCellTypeFormulas, 1)

```
For Each Cell In Target.Cells
    'process cells here...
Next Cell 
```

结束功能

# java - java servlet报错包不存在

> ID：601834
> 
> 赞同：1
> 
> 时间：2009-03-02T10:06:24.587
> 
> 标签：java, servlets

> **可能重复：**
> [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project)

当我尝试使用`javax.servlet.http.*`; 抛出一个错误包不存在。我应该重新安装java还是由于其他问题而发生。我正在使用 j2sdk 1.4.0 和 Tomcat 6.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T10:14:50.790

猜测 servlet.jar 不在类路径中。假设您在 Windows 上，右键单击我的电脑 -> 属性 -> 高级 -> 环境变量，然后检查您的 CLASSPATH 条目。

# c# - 如何从 RichTextBox 获取 RTF

> ID：601838
> 
> 赞同：12
> 
> 时间：2009-03-02T10:07:52.523
> 
> 标签：c#, .net, wpf, wpf-controls, richtextbox

如何获取 RTF 中的文本`RichTextBox`？我试图这样，但该属性不存在。

```
RichTextBox rtb = new RichTextBox();
string s = rtb.Rtf; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-02T10:13:55.893

要获取用户在 RichTextBox 中创建的实际 XAML：

```
 TextRange tr = new TextRange(myRichTextBox.Document.ContentStart,
                                myRichTextBox.Document.ContentEnd);
   MemoryStream ms = new MemoryStream();
   tr.Save(ms, DataFormats.Xaml);
   string xamlText = ASCIIEncoding.Default.GetString(ms.ToArray()); 
```

编辑：我面前没有要测试的代码，但是该`TextRange`类型的实例有一个`Save`（流式传输）方法，该方法需要一个`DataFormats`参数，可以是`DataFormats.Rtf`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-02T10:21:26.000

有 2 个 RichTextBox 类，一个来自 winforms 框架，一个来自 WPF 框架：

```
System.Windows.Controls.RichTextBox wpfBox;
System.Windows.Forms.RichTextBox winformsBox; 
```

只有 Winforms RichTextBox 具有 Rtf 属性，另一个具有包含 FlowDocument 的 Document 属性。

# macos - 如何欺骗 MacBookPro 和 Leopard 10.5.6 附带的有线以太网接口的以太网 MAC 地址？

> ID：601846
> 
> 赞同：0
> 
> 时间：2009-03-02T10:10:36.307
> 
> 标签：macos, drivers

使用 OSX 10.5。不再可能使用“ifconfig en0 laddr/ether XX:YY:....”来欺骗有线接口（例如 en0）的 MAC 地址

a/这是为什么？

b/ 尽管是由例如 VMware "vmnet-xxx" 守护程序完成的，但它是如何完成的？

c/ 有谁知道 Apple Developer 软件包是否包含有关 mach 内核设备接口的详细和有用的信息？例如设备驱动程序示例代码等？

非常感谢你

格鲁兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T11:24:38.457

A：这可能是出于工作场所安全原因的更改（这只是纯粹的猜测，可能是也可能不是真的），因为它似乎是驱动程序问题（这在 Tiger 中是可能的，我从经验中知道） . 在无线接口 en1 上仍然可以这样做。即使物理接口不支持它，设备也可以进入“监控”模式，并在 IP 链的更高层进行 MAC 地址匹配。我们将不得不拭目以待，看看苹果对此会做些什么。

B：那些守护进程将您的有线网络置于“监控”模式，基本上它的作用是告诉您的网卡您希望发送给您的所有内容都由操作系统处理，因此它会关闭在网卡（如果它支持的话）通常会丢弃不属于自己的东西（它的 MAC 地址），然后它在软件中完成这一切，使用操作系统提供的标准过滤钩子它可以监听任何传入的数据包并从网络上抓取那些发往 VMWare 设置的假 MAC 地址的那些。

用外行术语解释：假设您坐在机场并等待可以登机的通知，您被动地听但忽略不包含您的航班号的所有内容。现在其他人出现并要求您也收听他们的航班号，现在您必须积极倾听，因为您不能只过滤一个航班号。

C: 是的，除此之外，您还可以找到代码示例和参考手册。它们也都可以在线获得，如果它们是由 Apple 开发的，您也可以在线找到大多数设备驱动程序的代码。文档相当不错，但是我注意到在某些领域缺少它，这让我很难弄清楚我需要做什么才能完成某件事。[Developer.apple.com 的概念网络设备驱动程序](http://developer.apple.com/documentation/DeviceDrivers/Conceptual/NetworkDriver/4_Writing%20the%20Driver/chapter_4_section_1.html#//apple_ref/doc/uid/TP40000913-CH204-DontLinkElementID_13)。[Darwin](http://www.opensource.apple.com/darwinsource/)的源代码也可以在[http://www.opensource.apple.com/darwinsource/](http://www.opensource.apple.com/darwinsource/)找到，只要允许 Apple 将它们作为开源发布（Yukon2 驱动程序），您就可以找到大多数 Mac OS X 的设备驱动程序不包括在内）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T06:35:13.953

对我有用的是，启动到一个 linux 发行版，在那里更改 mac 地址，以便你有一个工作的互联网连接，重新启动到 mac os x（尝试使用 10.5.5），mac 仍然是来自 linux 的欺骗 - 使用我的电脑，它甚至可以在系统重新启动/关闭时工作

更具体地说，我用ubuntu 8.04（我相信）试过这个，在那里改变mac地址：

sudo ifconfig eth0 关闭

须藤 ifconfig eth0 硬件以太 000102020405

须藤 ifconfig eth0 向上

当然，您需要用您要使用的真实 MAC 替换 000102020405，请注意，对于其他发行版，甚至是不同版本的 ubuntu，MAC 欺骗过程可能会略有不同（您需要重新启动连接等） - 魔术这个技巧的关键在于它实际上可以在实时发行版上运行，所以你不需要安装任何东西，但我从未尝试过

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T20:47:43.997

我有运行 OSX 10.9 的 MacBookPro Retina 2013 年末，我可以做到！

我尝试的第一件事是以前在 linux 上对我有用的东西：

```
sudo -s
ifconfig en0 down
ifconfig en0 lladdr aa:bb:cc:dd:ee:ff
ifconfig en0 up 
```

但是，这在我的机器上会导致 ioctl 错误（电源已关闭）

因此，经过大量实验后，我认为您必须在接口启动时更改 mac 地址，但在机场实用程序未使用它时。这说起来容易做起来难！我将这些命令放在一起并调整延迟，直到我的 mac 成功更改 - 这对我有用：

```
ifconfig en0 down; sleep 0.5; ifconfig en0 up; sleep 2;\
ifconfig en0 lladdr aa:bb:cc:dd:ee:ff; ifconfig en0 
```

您可能需要更改您的延误，以便在机场开始之前赶上它。希望这会有所帮助！

编辑：您可能通过“nofu”所说的引导 linux 获得成功，但是在 MacBookPro 上设置双引导很麻烦，所以请告诉我这种“睡眠方法”是否适合您、延迟以及 OSX 的版本.

# c# - 使用 NVelocity 获取本地资源对象

> ID：601849
> 
> 赞同：0
> 
> 时间：2009-03-02T10:11:54.183
> 
> 标签：c#, asp.net-mvc, localization, nvelocity

使用 NVelocity 时，如何使用 GetLocalResourceObject 加载 .resx 文件？我将 ASP.NET MVC 与 mvccontrib nvelocity viewengine 和sharp-architechture 一起使用。

我已经硬编码了我能想到的每一个可能的虚拟路径（例如~/Home/index.vm.resx），但每个人都失败了。我也尝试过 ExpressionBuilderContext。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-03T13:41:15.653

你在哪里调用 GetLocalResourceObject？从控制器动作调用它是行不通的，因为动作与任何视图文件（例如/Home/Index.vm）没有真正的关联。本地资源**只能**在实际视图 ( `/Home/Index.vm`) 中工作。

此外，请确保将 .resx 文件放置在每个“查看文件夹”中的 App_LocalResources 文件夹中（例如`/Home/`）

*   /Views/Home/Index.vm
*   /Views/Home/App_LocalResources/Index.vm.resx

希望这对安德斯有所帮助，如果没有，请在 Messenger 上给我留言 ;-)

# visual-studio-2008 - 何时购买 Visual Studio Team System？

> ID：601860
> 
> 赞同：1
> 
> 时间：2009-03-02T10:16:28.650
> 
> 标签：visual-studio-2008, visual-studio-addins

我们使用 Visual Studio Professional，对此我们非常满意。我们使用 Tortoise SVN、Visual VSN、NUnit 和 resharper。对我们来说效果很好的组合。

现在我们需要运行负载测试。

我们查看了 Visual Studio Team System，但坦率地说，定价似乎有点高（明显轻描淡写）。我们有一个由 6 名开发人员组成的团队。

我确实想“得到钱能买到的最好的工具”，但……有什么建议吗？有替代品吗？

编辑：我们开发了一个用 C# 编写的 Web 应用程序。我们已经经营了三年多，因此很遗憾我们无法注册 bizspark。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T10:20:21.963

我真的不明白 VSTS 将如何帮助您进行负载测试。

此外，一个 6 人的开发团队太小，无法从 VSTS 中受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T10:25:28.160

如果您符合 Microsoft Bizspark 计划的标准，那么您可以免费获得他们的所有软件，包括 3 年的生产许可证：

[http://www.microsoft.com/BizSpark/](http://www.microsoft.com/BizSpark/)

跳这有帮助：

安德鲁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T10:32:16.723

我们有 Visual Studio Team System Development Edition 在工作，我在家里有 Visual Studio Professional（我有自己的 MSDN 许可证）。我不了解负载测试，但我最怀念 Team System 的两个功能是 C++ 代码覆盖工具和 C++ 静态分析。

哦，我有点想念 FxCop 集成，但可以解决。

如果它不是那么贵，我会升级我的 MSDN 订阅以包含它。如果我要建立自己的公司，我会参与 BizSpark 计划。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T12:23:59.810

我使用了完整的 VSTS (Team Suite + Team Foundation) 2005 版，我在不同的技术和应用程序（C#、C++、ASP.NET）上使用了不同的特性（SC、负载测试、单元测试、性能分析、代码覆盖率），它很棒而且很有帮助，但我不知道市场上是否有同等产品（即使是负载测试功能）

# c# - 为 webClient.DownloadFile() 设置超时

> ID：601861
> 
> 赞同：93
> 
> 时间：2009-03-02T10:16:57.900
> 
> 标签：c#, .net, download, webclient

我正在`webClient.DownloadFile()`用来下载文件，我可以为此设置一个超时时间，这样如果它无法访问该文件就不会花费这么长时间吗？

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2010-06-16T10:57:13.760

我的答案来自[这里](http://w3ka.blogspot.com/2009/12/how-to-fix-webclient-timeout-issue.html)

您可以创建一个派生类，它将设置基`WebRequest`类的超时属性：

```
using System;
using System.Net;

public class WebDownload : WebClient
{
    /// <summary>
    /// Time in milliseconds
    /// </summary>
    public int Timeout { get; set; }

    public WebDownload() : this(60000) { }

    public WebDownload(int timeout)
    {
        this.Timeout = timeout;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var request = base.GetWebRequest(address);
        if (request != null)
        {
            request.Timeout = this.Timeout;
        }
        return request;
    }
} 
```

您可以像使用基础 WebClient 类一样使用它。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-03-02T10:39:22.760

试试`WebClient.DownloadFileAsync()`。您可以`CancelAsync()`使用自己的超时时间通过计时器调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-25T18:37:20.013

假设您想同步执行此操作，使用 WebClient.OpenRead(...) 方法并在它返回的 Stream 上设置超时将为您提供所需的结果：

```
using (var webClient = new WebClient())
using (var stream = webClient.OpenRead(streamingUri))
{
     if (stream != null)
     {
          stream.ReadTimeout = Timeout.Infinite;
          using (var reader = new StreamReader(stream, Encoding.UTF8, false))
          {
               string line;
               while ((line = reader.ReadLine()) != null)
               {
                    if (line != String.Empty)
                    {
                        Console.WriteLine("Count {0}", count++);
                    }
                    Console.WriteLine(line);
               }
          }
     }
} 
```

从 WebClient 派生并覆盖 GetWebRequest(...) 以设置@Beniamin 建议的超时，这对我不起作用，但确实如此。

# .net - 是什么导致 WPF ListCollectionView 使用自定义排序来重新排序其项目？

> ID：601864
> 
> 赞同：11
> 
> 时间：2009-03-02T10:17:54.327
> 
> 标签：.net, wpf, sorting

考虑此代码（出于示例目的而通用的类型名称）：

```
// Bound to ListBox.ItemsSource
_items = new ObservableCollection<Item>();

// ...Items are added here ...

// Specify custom IComparer for this collection view
_itemsView = CollectionViewSource.GetDefaultView(_items)
((ListCollectionView)_itemsView).CustomSort = new ItemComparer(); 
```

当我设置`CustomSort`时，集合按我的预期排序。

但是，我要求数据在运行时重新排序以响应`Item`. 该类`Item`派生自`INotifyPropertyChanged`并且我知道当我的数据模板更新屏幕上的值时该属性正确触发，只有排序逻辑没有被调用。

我还尝试过`INotifyPropertyChanged.PropertyChanged`传递一个空字符串，以查看通用通知是否会导致启动排序。没有香蕉。

**编辑**响应肯特的建议，我想我会指出使用它对项目进行排序具有相同的结果，即集合排序一次但*不会*随着数据的变化而重新排序：

```
_itemsView.SortDescriptions.Add(
    new SortDescription("PropertyName", ListSortDirection.Ascending)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-02T11:51:00.857

我发现[WPF 博士的这篇文章](http://drwpf.com/blog/2008/10/20/itemscontrol-e-is-for-editable-collection/)首先回答了我的问题，然后继续讨论调用对性能的影响`Refresh`。一些关键摘录：

> 不幸的是，Refresh() 方法会导致视图完全重新生成。当视图中发生 Refresh() 时，它会引发 CollectionChanged 通知并将操作提供为“重置”。ListBox 的 ItemContainerGenerator 接收此通知并通过丢弃项目的所有现有视觉对象来响应。然后它会完全重新生成新的物品容器和视觉效果。

然后，他描述了一种提高性能的 hacky 解决方法。而不是调用刷新，删除，更改然后重新添加项目。

我原以为列表视图可能会跟踪更改的项目并知道在视图中单独重新定位该项目。

[.NET 3.5 SP1](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab99342f-5d1a-413d-8319-81da479ab0d7&DisplayLang=en)中引入了一种新方法，该方法涉及`IEditableObject`通过使用方法`BeginEdit()`、`CancelEdit()`和`EndEdit()`. 阅读[文章](http://www.drwpf.com/blog/Home/tabid/36/EntryID/42/Default.aspx)了解更多信息。

**编辑**正如[user346528 指出的那样](https://stackoverflow.com/questions/601864/what-causes-a-wpf-listcollectionview-that-uses-custom-sorting-to-re-sort-its-item/2911817#2911817)，`IEditableObject`实际上在 3.5SP1 中并不是新的。它实际上看起来像是[从 1.0](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditableobject.aspx)开始就在框架中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T11:09:56.710

正如接受的答案指示我的那样，我可以使用代码强制单个项目重新定位

```
IEditableCollectionView collectionView = DataGrid.Items;

collectionView.EditItem(changedItem);
collectionView.CommitEdit(); 
```

*视图模型*（集合中的项目）`changedItem`在哪里。*`ItemsSource`*

 *这样，您就不需要您的项目来实现任何接口，例如`IEditableObject`（在我看来，在某些情况下，合约非常复杂且难以实现）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-26T09:51:32.820

撞旧帖子，但只需创建一个继承自 ListViewCollection 并覆盖 OnPropertyChanged 的​​新集合类（对于 IBindingList，ListChanged 事件将包含 ListChangedEventArgs 参数中的属性更改）。并确保集合中的项目在属性更改（由您提出）时实现并使用 INotifyPropertyChange，否则集合不会绑定到属性更改。

然后在这个 OnPropertyChanged 方法中，sender 将是项目。如果 - 并且仅当 - 会导致度假村的属性发生更改，则删除该项目，然后重新添加它（如果添加它还没有这样做，则将其插入到排序位置）。如果项目可用而不是删除/添加它，则最好移动它。同样，这也应该通过过滤来完成（检查过滤谓词）。

不需要 IEditableObject！如果您希望编辑多个属性，然后完成编辑（例如编辑 3 个属性，然后在 WinForm DataGridView 中选择不同的行），然后对其进行排序，这将是使其工作的正确方法。但很多时候，您可能希望在更改每个属性后使用集合，而无需手动调用 BeginEdit/EndEdit。顺便说一句，IEditableObject 存在于 .NET 2.0 框架中，对于 .NET 3.5 来说并不新鲜（如果您阅读了博士的文章）。

注意：使用 BeginEdit() 和 EndEdit() 对同一个项目进行多次编辑时可能会出现问题 - 除非您增加（对于 true）/减少（对于 false）整数而不是设置布尔值！记得增加/减少一个整数才能真正知道编辑何时完成。

保持一个永久排序的列表既费时又容易出错（如果你强制排序插入，它可能会破坏插入契约），并且应该只在某些地方使用，例如 ComboBoxes。在任何网格上，这是一个非常糟糕的主意，因为更改行会导致它从用户当前位置下退出。

```
Public Class ListView
  Inherits ListCollectionView

  Protected Overrides Sub OnPropertyChanged(sender As Object, e As PropertyChangedEventArgs)

    ' Add resorting/filtering logic here.
  End Sub
End Class 
```

与您需要的类似的集合的最佳示例是 Jesse Johnsons ObjectListView，尽管这是 .NET 2.0 特定的（IBindingList 而不是 INotifyCollectionChanged/ObservableCollection/ListCollectionView）并且使用非常严格的许可证。他的博客对于他如何实现这一点可能仍然非常有价值。

编辑：

忘记添加 Sender 将是您需要使用的项目，而 e.PropertyName 是您需要用来确定它是否在 SortDescriptions 中的项目。如果不是，则对该属性的更改不会导致需要度假村。如果 e.PropertyName 是 Nothing，那么它就像刷新一样，其中许多属性可能已经更改，应该进行重新处理。

要确定它是否需要过滤，只需通过 FilterPredicate 运行它，并在需要时将其删除。过滤比排序便宜得多。

希望有帮助，

塔姆斯·J·罗伊斯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T10:36:45.823

鉴于您使用的是自定义排序，因此无法`ListCollectionView`知道哪些条件应该触发刷新。因此，您需要自己调用`Refresh()`集合视图。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-10T15:12:12.800

使用 .NET 4.5，WPF 添加了实时整形： [https ://docs.microsoft.com/en-us/dotnet/framework/wpf/getting-started/whats-new#repositioning-data-as-the-datas-values-改变生活塑造](https://docs.microsoft.com/en-us/dotnet/framework/wpf/getting-started/whats-new#repositioning-data-as-the-datas-values-change-live-shaping)

这允许您设置用于排序/分组/过滤的属性，并且如果属性值更改，则再次对项目进行排序/分组/过滤。在你的情况下：

```
// Bound to ListBox.ItemsSource
_items = new ObservableCollection<Item>();

// ...Items are added here ...

// Add sorting
_itemsView = CollectionViewSource.GetDefaultView(_items)
_itemsView.SortDescriptions.Add(new SortDescription("PropertyName", ListSortDirection.Ascending));

// Enable live sorting
// Note that if you don't add any LiveSortingProperties, it will use SortDescriptions
((ICollectionViewLiveShaping)_itemsView).LiveSortingProperties.Add("PropertyName");
((ICollectionViewLiveShaping)_itemsView).IsLiveSorting = true; 
```

# python - 东京内阁的 Python 表引擎绑定

> ID：601865
> 
> 赞同：12
> 
> 时间：2009-03-02T10:18:23.607
> 
> 标签：python, tokyo-cabinet

我正在为东京内阁的表引擎寻找 python 绑定。我尝试[了 Pytc](http://pypi.python.org/pypi/pytc)，但只能找到 Hash 和 B-tree 引擎支持。还有其他可用的绑定吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-22T13:25:52.453

下面是一个使用 PyTyrant 搜索表引擎的实现：

[http://github.com/ericflo/pytyrant/tree/master](http://github.com/ericflo/pytyrant/tree/master)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-08T22:41:45.300

我与 tc 的作者取得了联系，他告诉我以下内容：

> 目前，表（tdb）驱动程序存在于[主分支](http://github.com/rsms/tc/blob/master/src/TDB.c)（[单元测试](http://github.com/rsms/tc/blob/master/lib/tc/test/tdb.py)）中，而[fdb 驱动程序](http://github.com/rsms/tc/tree/fdb_rewrite)正在单独的分支中开发。

我尝试了表驱动程序进行了一次成功的小测试，我计划很快在更大的表上尝试它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-21T16:18:21.527

一年多来，我一直在监视（有时还改进）各种 Python 绑定，所以这里有一个更新的符合您标准的最佳绑定列表。

*   东京内阁，包括暴君：[tokyo-python](http://pypi.python.org/pypi/tokyo-python/)
*   对于 Tokyo Tyrant（纯 Python）：[pyrant](http://pypi.python.org/pypi/pyrant/)

有许多陈旧和/或不完整的替代方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-10-06T15:46:35.720

我的 pytc 分支“tc”确实支持表（TDB）[http://github.com/rsms/tc](http://github.com/rsms/tc)

基本示例：

```
>>> import tc
>>> db = tc.TDB("slab.tdb", tc.TDBOWRITER | tc.TDBOCREAT)
>>> db.put('some key', {'name': 'John Doe', 'age': '45', 'city': u'Internets'})
>>> rec = db.get('some key')
>>> print rec['name']
John Doe 
```

执行查询：

```
>>> import tc
>>> db = tc.TDB("slab.tdb", tc.TDBOWRITER | tc.TDBOCREAT)
>>> db.put('torgny',  {'name': 'Torgny Korv', 'age': '31', 'colors': 'red,blue,green'})
>>> db.put('rosa',    {'name': 'Rosa Flying', 'age': '29', 'colors': 'pink,blue,green'})
>>> db.put('jdoe',    {'name': 'John Doe',    'age': '45', 'colors': 'red,green,orange'})
>>> q = db.query()
>>> q.keys()
['torgny', 'rosa', 'jdoe']
>>> q.filter('age', tc.TDBQCNUMGE, '30')
>>> q.keys()
['torgny', 'jdoe']
>>> q.filter('colors', tc.TDBQCSTROR, 'blue')
>>> q.keys()
['torgny']
>>> # new query:
>>> q = db.query()
>>> q.order('name') # Ascending order by default
>>> q.keys()
['jdoe', 'rosa', 'torgny']
>>> q.order(type=tc.TDBQONUMASC, column='age')
>>> q.keys()
['jdoe', 'torgny', 'rosa'] 
```

TDB 单元测试中的更多示例：http: [//github.com/rsms/tc/blob/master/lib/tc/test/tdb.py](http://github.com/rsms/tc/blob/master/lib/tc/test/tdb.py)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T10:49:03.127

我知道的唯一另一个是 pytc 的一个分支，但看起来他们只做了一些重构和文档工作，所以可能仍然只支持哈希和 b-tree：

[tc](http://github.com/rsms/tc/tree/master)

如果这不起作用，您可能不走运。我认为所有的暴君绑定都只使用哈希引擎。

# python - Python中的数字图像裁剪

> ID：601874
> 
> 赞同：4
> 
> 时间：2009-03-02T10:23:37.493
> 
> 标签：python, image-processing

从教授，物理学家那里得到了这个问题。

我是 Python 编程的初学者。我不是计算机专业人士，我是物理学家。我试图在 python 中为我自己的研究编写一个代码，其中涉及一些图像处理。

我需要做的就是显示一个图像，然后使用我的鼠标选择一个感兴趣的区域，最后裁剪出选定的区域。我可以使用 ginput() 函数在 Matlab 中执行此操作。

我尝试使用 PIL。但是我发现在我发出命令 Image.show() 后，图像会显示出来，但是程序会在那里停止，除非我退出图像窗口。有什么办法可以实现我的计划。我需要下载任何其他模块吗？请指教。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-02T13:39:00.130

虽然我同意 David 的观点，您可能应该只使用 GIMP 或其他一些图像处理程序，但这里有一个使用[pygame](http://www.pygame.org/)的脚本（我认为它是对读者的练习），它可以满足您的需求。您将需要安装 pygame 以及 PIL，用法如下：

```
scriptname.py <input_path> <output_path> 
```

实际脚本：

```
import pygame, sys
from PIL import Image
pygame.init()

def displayImage( screen, px, topleft):
    screen.blit(px, px.get_rect())
    if topleft:
        pygame.draw.rect( screen, (128,128,128), pygame.Rect(topleft[0], topleft[1], pygame.mouse.get_pos()[0] - topleft[0], pygame.mouse.get_pos()[1] - topleft[1]))
    pygame.display.flip()

def setup(path):
    px = pygame.image.load(path)
    screen = pygame.display.set_mode( px.get_rect()[2:] )
    screen.blit(px, px.get_rect())
    pygame.display.flip()
    return screen, px

def mainLoop(screen, px):
    topleft = None
    bottomright = None
    runProgram = True
    while runProgram:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                runProgram = False
            elif event.type == pygame.MOUSEBUTTONUP:
                if not topleft:
                    topleft = event.pos
                else:
                    bottomright = event.pos
                    runProgram = False
        displayImage(screen, px, topleft)
    return ( topleft + bottomright )

if __name__ == "__main__":
    screen, px = setup(sys.argv[1])
    left, upper, right, lower = mainLoop(screen, px)
    im = Image.open(sys.argv[1])
    im = im.crop(( left, upper, right, lower))
    im.save(sys.argv[2]) 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-02T10:56:21.847

对于它的价值（来自另一位物理学家），我会在像[GIMP](http://www.gimp.org)这样的图像处理程序中执行此操作。用 Python（或任何语言）完成这项任务的主要好处是通过自动化过程来节省时间，但除非你——好吧，教授——可以以某种方式开发一种算法来自动找出要裁剪的图像的哪一部分，自动化似乎没有多少时间可以节省。

如果我没记错的话，GIMP 实际上是可编写脚本的，可能使用 Python，因此可以编写一个节省时间的 GIMP 脚本来执行您的教授朋友想要的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T10:49:56.730

Image.show() 只是调用它可以在当前平台上找到的任何简单的图片查看器，可能有也可能没有裁剪和保存工具。

如果您在 Windows 机器上并且只需要让它在您的机器上运行，请设置“打开方式...”关联以使其运行图像将其加载到您选择的编辑器中。在 OS X 和 *nix 上，您需要破解 Image.py 底部的 _showxv() 方法来更改用于打开图像的命令。

如果您确实需要提供可移植的解决方案，则需要使用 UI 框架来支持您的裁剪应用程序。选择归结为[Tkinter](http://pythonware.com/library/tkinter/introduction/index.htm)（ImageTk.py 为您提供了一个用于在 Tk 中显示 PIL 图像的包装器）、[PyQT4](http://www.riverbankcomputing.co.uk/software/pyqt/intro)（PIL 1.1.6 中的 ImageQt 为您提供了一个用于在 QT4 中显示图像的包装器）或[wxPython](http://wxpython.org/)（一个更高级别的应用程序创作工具包使用 wxWidgets）。掌握完整的 UI 工具包需要大量工作，但您将能够完全自定义应用程序界面的工作方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-07-11T17:34:31.977

python中是否有一个像库一样的脚本来自动裁剪图像： [自动裁剪图像](http://codeunivers.com/source-codes/python/automatically_crop_image)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-07-30T00:12:17.303

您正在寻找的是模块：matplotlib，它模拟 Matlab。请参阅 ginput() 函数。这允许您找到边界框，然后您可以使用 PIL 中的裁剪。

[http://matplotlib.sourceforge.net/api/figure_api.html](http://matplotlib.sourceforge.net/api/figure_api.html)

# c# - 数据绑定 POCO 属性

> ID：601880
> 
> 赞同：17
> 
> 时间：2009-03-02T10:27:49.293
> 
> 标签：c#, .net, data-binding, poco, system.componentmodel

是否有任何数据绑定框架（BCL 或其他）允许在实现和的*任何两个 CLR 属性*之间进行绑定？似乎应该可以做这样的事情：`INotifyPropertyChanged``INotifyCollectionChanged`

```
var binding = new Binding();
binding.Source = someSourceObject;
binding.SourcePath = "Customer.Name";
binding.Target = someTargetObject;
binding.TargetPath = "Client.Name";
BindingManager.Bind(binding); 
```

实施. `someSourceObject`_ `someTargetObject`_ `INotifyPropertyChanged`但是，我不知道对此有任何 BCL 支持，并且不确定是否存在允许这样做的现有框架。

**更新**：鉴于没有可用的现有库，我自己编写了自己的库。它可以[在这里找到](http://truss.codeplex.com/)。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-11T12:16:02.033

我写了[桁架](http://truss.codeplex.com/)来填补空白。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-10T06:35:59.847

我不知道有任何*库*可以做到这一点——但你可以很容易地编写自己的库。

这是我在几分钟内敲定的一个基础，它在两个简单属性之间建立了两种方式的数据绑定：

```
public static class Binder
{

    public static void Bind(
        INotifyPropertyChanged source,
        string sourcePropertyName,
        INotifyPropertyChanged target,
        string targetPropertyName)
    {
        var sourceProperty
            = source.GetType().GetProperty(sourcePropertyName);
        var targetProperty
            = target.GetType().GetProperty(targetPropertyName);

        source.PropertyChanged +=
            (s, a) =>
            {
                var sourceValue = sourceProperty.GetValue(source, null);
                var targetValue = targetProperty.GetValue(target, null);
                if (!Object.Equals(sourceValue, targetValue))
                {
                    targetProperty.SetValue(target, sourceValue, null);
                }
            };

        target.PropertyChanged +=
            (s, a) =>
            {
                var sourceValue = sourceProperty.GetValue(source, null);
                var targetValue = targetProperty.GetValue(target, null);
                if (!Object.Equals(sourceValue, targetValue))
                {
                    sourceProperty.SetValue(source, targetValue, null);
                }
            };
    }
} 
```

当然，这段代码缺少一些细节。要添加的内容包括

*   检查`source`并`target`分配
*   检查由标识`sourcePropertyName`和`targetPropertyName`存在的属性
*   检查两个属性之间的类型兼容性

此外，反射相对较慢（尽管在丢弃它之前对其进行基准测试，但它并没有*那么*慢），因此您可能希望使用已编译的表达式。

最后，鉴于通过字符串指定属性容易出错，您可以改用 Linq 表达式和扩展方法。然后代替写作

```
Binder.Bind( source, "Name", target, "Name") 
```

你可以写

```
source.Bind( Name => target.Name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T00:42:00.480

[AutoMapper](http://www.codeplex.com/AutoMapper)可以在两个实例之间复制值，但您必须编写自己的代码才能自动执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T10:16:00.273

也许[Bindable LINQ](http://www.codeplex.com/bindablelinq)或[连续 linq](http://www.codeplex.com/clinq)可以在这里提供帮助。如果您尝试添加实际上是实际更新数据的“派生属性”的模型属性，以使您的 UI 更容易绑定，那么这两个框架应该会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-16T16:51:26.497

我编写了一个小型[Bind](https://github.com/RafaelSalguero/Bind)项目，它完全支持嵌套属性异步绑定操作之间的绑定。sintax 再简单不过了：

```
//Two way binding between neasted properties:
Bind.TwoWay(()=> client.Area.Data.Name == this.AreaName);

//On change action execute:
Bind
    .OnChange(()=> client.Personal.Name)
    .Do(x => clientName = x); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-03-11T11:35:47.777

如果您将属性定义为[DependencyProperty](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)的，则可以这样做。WF 和 WPF 都有它的实现（第一个链接是 WPF 的。对于 WF 就是[这个](http://msdn.microsoft.com/en-us/library/system.workflow.componentmodel.dependencyproperty.aspx)），所以您需要决定使用哪个 - 但两者都应该足以满足您的需求。

# wix - WIX：如何根据属性选择功能

> ID：601881
> 
> 赞同：0
> 
> 时间：2009-03-02T10:28:44.643
> 
> 标签：wix, parameters

我想根据某些属性的值选择功能。

类似于这个问题： [WIX：如何从命令行选择功能](https://stackoverflow.com/questions/246329/wix-how-to-select-features-from-command-line)

似乎设置 ADDLOCAL 属性值是一种方法，但这是正确的方法吗？微软似乎在这篇文章中警告不要这样做：

[http://msdn.microsoft.com/en-us/library/aa367536(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa367536(VS.85).aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T22:44:41.110

功能也可以有条件地安装。请参阅 Feature 元素下的 Condition 元素。组件条件也可以工作。取决于你的包结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T23:14:19.980

为什么不使用组件而不是功能？可以根据各种属性有条件地安装组件。

我们这样做具有用户可以通过复选框选择的“假装功能”，然后是一组复杂的条件来安装各种组件，具体取决于他们的 Office 版本和复选框的状态。

# .net - .Net 3.5 图表控件异常

> ID：601883
> 
> 赞同：4
> 
> 时间：2009-03-02T10:30:07.260
> 
> 标签：.net, .net-3.5

我正在使用新的[免费 .net 图表控件](http://weblogs.asp.net/scottgu/archive/2008/11/24/new-asp-net-charting-control-lt-asp-chart-runat-quot-server-quot-gt.aspx)，当我在 Visual Studio 中运行项目时，它们似乎工作正常，但是当通过 IIS 访问相同时，我得到了异常：

```
[HttpException (0x80004005): No http handler was found for request type 'GET']
   System.Web.HttpApplication.MapIntegratedHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig, Boolean convertNativeStaticFileModule) +529
   System.Web.HttpServerUtility.Execute(String path, TextWriter writer, Boolean preserveForm) +947

[HttpException (0x80004005): Error executing child request for ChartImg.axd.]
   System.Web.HttpServerUtility.Execute(String path, TextWriter writer, Boolean preserveForm) +4120098
   System.Web.UI.DataVisualization.Charting.ChartHttpHandler.EnsureInitialized(Boolean hardCheck) +266
   System.Web.UI.DataVisualization.Charting.Chart.GetImageStorageMode() +25
   System.Web.UI.DataVisualization.Charting.Chart.Render(HtmlTextWriter writer) +133
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +240
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +240
   System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer) +253
   System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter output) +87
   System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer) +53
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +240
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +240
   System.Web.UI.Page.Render(HtmlTextWriter writer) +38
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +4240 
```

知道我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T09:53:01.270

找到了解决方案（有点）

解决方案：看起来我在 web.config 中的 httpHandler 是正确的，但是我缺少一个处理程序和一个 appSetting（在第二篇文章中有详细说明[）](http://social.msdn.microsoft.com/Forums/en-US/MSWinWebChart/thread/1dc4b352-c9a5-49dc-8f35-9b176509faa1/)。一旦我把这些整理好，它就可以正常工作。

缺失点：只是不确定为什么在使用 Visual Studio 运行它时会起作用。没有这些设置的图在两种环境（visual studio 和 iis）中都应该失败。好奇的。

感谢大家帮助指出一些好的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T10:36:32.847

您是否尝试过将项目的干净版本发布到 IIS，因为您似乎缺少处理图表图像生成的处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T10:55:24.470

看起来您的 IIS 设置为不处理 GET 动词。要签入 IIS，然后转到该站点，然后单击处理程序映射，找到 .aspx 处理程序，单击请求限制，然后单击动词。

如果也可能介于两者之间 - 比如 IIS url 扫描。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-20T07:35:34.083

您使用的是 IIS 7 吗？我在 IIS 7 上遇到了同样的问题，我在应用程序池中将“托管管道模式”切换为经典。

# client-server - 您如何计算客户端/服务器时间间隔？

> ID：601887
> 
> 赞同：1
> 
> 时间：2009-03-02T10:30:53.763
> 
> 标签：client-server, ntp

我正在开发客户端/服务器软件，并且正在寻找使客户端时钟与服务器时钟保持同步的最佳方法。

当然，我不能使用[NTP](http://en.wikipedia.org/wiki/Network_Time_Protocol)，因为我不想碰系统时钟。我只是想计算一个时间间隔，以便我可以将它添加到从服务器接收到的每个日期时间中，以将其转换为“本地时间”

我知道的是：

*   我使用 GMT 时间处理 TimeZone 问题

*   服务器在连接时将其当前时间发送给客户端，客户端从其时间中减去服务器时间以计算时间间隔。

当网络延迟恒定时，这很有效（阅读“我的局域网”......）

不幸的是，我希望我的软件可以在 Internet 上运行，甚至可以在移动客户端上运行，我已经见证了长达*1 分钟的延迟变化。*

对于我正在开发的软件，这样的滞后是不可接受的。

计算客户端/服务器时间间隔的好策略是什么？

* * *

最后一件事：我可以以两种方式发送消息（客户端到服务器和服务器到客户端）

这可能无关紧要，但这背后的技术是一个.net WCF客户端，它使用带有一些轮询的httpbinding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T10:45:58.703

为什么不能使用 NTP？当然 ntp 的默认设置是设置系统时间，但这不是强制性的：

```
$ ntpdate -q ntp.ubuntu.com
server 91.189.94.4, stratum 2, offset -0.102597, delay 0.05426
 2 Mar 11:44:36 ntpdate[12239]: adjust time server 91.189.94.4 offset -0.102597 sec 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T10:34:43.083

您可以定期 ping 服务器以计算延迟。我不认为你可以通过互联网真正接近。

# ruby - 如何在 Ruby 中遍历多行字符串？

> ID：601888
> 
> 赞同：57
> 
> 时间：2009-03-02T10:31:26.103
> 
> 标签：ruby, string, while-loop, loops

来自第一次 Ruby 程序员的非常简单的问题。

你如何在 Ruby 中遍历一段文本？每次遇到换行符时，我都想重新启动内循环。

```
def parse(input)
    ...
end 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2009-03-02T10:34:46.593

[字符串#each_line](https://ruby-doc.org/core-2.2.0/String.html#method-i-each_line)

```
str.each_line do |line|
    #do something with line
end 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-03-02T10:51:01.967

Iraimbilanja 所说的。

或者您可以在新行处拆分字符串：

```
str.split(/\r?\n|\r/).each { |line| … } 
```

请注意，在吃掉它们`each_line`的同时保留换行符。`split`

请注意，我在这里使用的正则表达式将处理所有三种行尾格式。`String#each_line`由可选参数分隔行`sep_string`，默认为`$/`，其本身默认为`"\n"`简单。

最后，如果您想做更复杂的字符串解析，请查看内置的 StringScanner 类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-02T15:18:56.753

您也可以使用任何模式：

```
str.scan(/\w+/) do |w|
  #do something
end 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-03-02T20:48:20.317

```
str.each_line.chomp do |line|
  # do something with a clean line without line feed characters
end 
```

我认为这应该照顾换行符。

# c# - 在免费平台上编写 C# 的最佳方式是什么？（编译器/IDE/调试器/等）

> ID：601893
> 
> 赞同：2
> 
> 时间：2009-03-02T10:35:14.783
> 
> 标签：c#

最好也在 linux 上 - 如有必要，我将安装 Windows XP 的基本版本

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-02T10:40:11.853

如果您打算在您的 linux 机器上安装 XP，那么 Microsoft Visual C# Express Edition 2005 和 2008 是非常好的程序。事实上，我认为所有的特快版都是免费的，真是太棒了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-02T10:40:15.877

没问题 - [MonoDevelop](http://monodevelop.com/Main_Page)会在你想要的时候运行 -

> MonoDevelop 是一个免费的 GNOME IDE，主要为 C# 和其他 .NET 语言设计。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-02T12:06:08.497

在 Linux 上，您唯一的选择是 Mono 和 monodevelop。但是，Mono 不会让您访问 Microsoft .NET 堆栈中的所有库。最值得注意的是，不支持 WCF、WPF 和 WF，推荐使用的 UI 库是 GTK#，而不是更广泛使用的 WinForms 或 WPF。

在 Windows 上，您可以使用免费的 Visual Studio Express 版本，或使用 sharpdevelop。Sharpdevelop 自然更侧重于与 NUnit 和 WiX 等其他免费工具的集成，但对于编辑、重构和调试，我会说 Visual Studio express 在功能方面仍然更好。您还可以找到更多 VS 插件。

如果你想要“最前沿”的东西，你真的需要窗户。否则没有太多选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-02T10:40:03.070

[单声道](http://www.mono-project.com/Main_Page)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T17:32:24.810

如果您正在考虑认真的（商业）.NET 开发，我不会深入研究 Mono 或 Shardevelop 之类的产品。例如，.NET 可能是 Java 的更好选择的原因之一是，微软为开发提供了非常好的和强大的工具，这使得开发过程变得更加容易。使用免费/开放的工具和实现使得在 .NET 中进行开发毫无意义，因为 Java 在这方面要好得多。

当然有 Express 系列，但那些 IDE 主要用于学习（你没有说为什么需要免费工具）。对于专业团队的发展，他们仍然是不够的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T17:35:11.823

Eclipse 是一个很棒的 IDE，显然[它有一个 C# 插件](http://www.improve-technologies.com/alpha/esharp/)。但是我没有使用它（插件），所以我不能评论它的质量。

# python - 如何编写有意义的文档字符串？

> ID：601900
> 
> 赞同：31
> 
> 时间：2009-03-02T10:39:52.727
> 
> 标签：python, comments, docstring

在您看来，什么是有意义的文档字符串？你期望在那里被描述什么？

例如，考虑这个 Python 类的`__init__`：

```
def __init__(self, name, value, displayName=None, matchingRule="strict"):
    """
    name - field name
    value - field value
    displayName - nice display name, if empty will be set to field name
    matchingRule - I have no idea what this does, set to strict by default
    """ 
```

你觉得这有意义吗？发布您的好/坏示例以供所有人了解（以及一般性答案，以便可以接受）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-02T11:25:15.397

我同意“任何你无法从方法的签名中分辨出来的东西”。这也可能意味着解释方法/函数返回什么。

您可能还希望使用[Sphinx](http://www.sphinx-doc.org/)（和 reStructuredText 语法）在您的文档字符串中进行文档编制。这样您就可以轻松地将其包含在您的文档中。例如，请查看广泛使用此功能的[repoze.bfg （](http://svn.repoze.org/repoze.bfg/trunk)[示例文件](http://svn.repoze.org/repoze.bfg/trunk/repoze/bfg/location.py)、[文档示例](http://svn.repoze.org/repoze.bfg/trunk/docs/)）。

可以放入 docstrings 的另一件事也是[doctests](http://docs.python.org/library/doctest.html)。这可能是有道理的，尤其是。对于模块或类文档字符串，您还可以通过这种方式展示如何使用它并同时使其可测试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-02T12:51:32.177

从[PEP 8](http://www.python.org/dev/peps/pep-0008/)开始：

> 编写好的文档字符串（又名“文档字符串”）的约定在[PEP 257](http://www.python.org/dev/peps/pep-0257/)中得到了永生。
> 
> *   为所有公共模块、函数、类和方法编写文档字符串。非公共方法不需要文档字符串，但您应该有一个注释来描述该方法的作用。此注释应出现在“def”行之后。
> *   [PEP 257](http://www.python.org/dev/peps/pep-0257/)描述了良好的文档字符串约定。请注意，最重要的是，结束多行文档字符串的 """ 应该单独一行，并且最好在前面有一个空行。
> *   对于一个班轮文档字符串，可以将结束的 """ 保持在同一行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-01-14T10:56:25.690

查看 numpy 的文档字符串以获得好的示例（例如[http://github.com/numpy/numpy/blob/master/numpy/core/numeric.py](http://github.com/numpy/numpy/blob/master/numpy/core/numeric.py)）。

文档字符串分为几个部分，如下所示：

```
Compute the sum of the elements of a list.

Parameters
----------
foo: sequence of ints
   The list of integers to sum up.

Returns
-------
res: int
   sum of elements of foo

See also
--------
cumsum:  compute cumulative sum of elemenents 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-02T10:44:16.540

应该去那里：

从方法的签名中您无法分辨的任何内容。在这种情况下，唯一有用的是： displayName - 如果为空，将设置为字段名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T12:34:34.123

我能想到包含在文档字符串中的最引人注目的东西是那些不明显的东西。通常这包括类型信息或能力要求 - 例如。“需要一个类似文件的对象”。在某些情况下，这将从签名中显而易见，而在其他情况下则不然。

您可以在文档字符串中添加的另一个有用的东西是`doctest`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-02T11:06:44.707

我喜欢使用文档尽可能详细地描述函数的作用，尤其是极端情况下的行为（也称为边缘情况）。理想情况下，使用该函数的程序员永远不必查看源代码 - 实际上，这意味着每当另一个程序员确实必须查看源代码以了解该函数如何工作的一些细节时，该细节可能应该是文档中提到。正如弗雷迪所说，任何不向方法签名添加任何细节的东西可能都不应该出现在文档字符串中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-24T17:05:20.530

通常在函数开头添加文档字符串的目的是描述函数，它做什么，它会返回什么，以及关于参数的描述。如果需要，您可以添加实施细节。甚至您也可以添加有关为未来开发人员编写代码的作者的详细信息。

# sql - 使用 SELECT 执行 INSERT 以插入多条记录

> ID：601906
> 
> 赞同：19
> 
> 时间：2009-03-02T10:41:48.747
> 
> 标签：sql, sql-server, sql-server-2005

在下图中，“DodgyOldTable”和“MainTable”之间存在 1:1 的关系。表“Option”包含在“OptionDesc”字段中具有“OptionVal1”、“OptionVal2”和“OptionVal3”的记录。我需要从 DodgyOldTable 中选择插入 MainTable_Option。像这样的东西：

```
INSERT MainTable_Option ([MainTableID],[OptionID])
SELECT ID, (CASE WHEN OptionVal1 = 'y' THEN 
    (SELECT OptionID 
     FROM Option 
     WHERE OptionDesc = 'OptionVal1') END
FROM DodgyOldTable 
```

如果可能的话，我想避免使用几个不同的选择语句来执行插入操作。

[替代文字 http://www.freeimagehosting.net/uploads/863f10bf5f.jpg](http://www.freeimagehosting.net/uploads/863f10bf5f.jpg)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-03-02T11:17:22.637

```
INSERT 
  MainTable_Option 
  (
  MainTableID, 
  OptionID
  )
SELECT
  d.ID, 
  o.OptionId
FROM
  DodgyOldTable d
  INNER JOIN Option o ON
    (d.OptionVal1 = 'Y' AND o.OptionDesc = 'OptionVal1') OR
    (d.OptionVal2 = 'Y' AND o.OptionDesc = 'OptionVal2') OR
    (d.OptionVal3 = 'Y' AND o.OptionDesc = 'OptionVal3') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T10:54:10.197

也许不是最有效的解决方案，但通过使用联合，这应该可以工作。

```
INSERT MainTable_Option ([MainTableID],[OptionID])
SELECT ID, (SELECT OptionID FROM Option WHERE OptionDesc = 'OptionVal1')
FROM DodgyOldTable dot
WHERE OptionVal1 = 'y'
UNION SELECT ID, (SELECT OptionID FROM Option WHERE OptionDesc = 'OptionVal2')
FROM DodgyOldTable dot
WHERE OptionVal2 = 'y'
UNION SELECT ID, (SELECT OptionID FROM Option WHERE OptionDesc = 'OptionVal3')
FROM DodgyOldTable dot
WHERE OptionVal3 = 'y' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T11:22:01.363

我的经验是，将它分成更小的部分通常更容易、更易读。所以不要试图在一个查询中完成所有事情。尤其是当您制作迁移脚本时，这应该不是问题。

写下步骤，可能会引入一个临时表，编写脚本来迁移您的数据，一切顺利！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T11:27:47.450

那么 CROSS JOIN 解决方案呢？

```
DECLARE @DodgyOldTable TABLE (ID INT, OptionVal1 CHAR, OptionVal2 CHAR, 
  OptionVal3 CHAR)
INSERT INTO @DodgyOldTable
SELECT 1, 'y', 'n', 'y' UNION
SELECT 2, 'y', 'n', 'n' UNION
SELECT 3, 'n', 'n', 'y' UNION
SELECT 4, 'y', 'y', 'y' UNION
SELECT 5, 'n', 'n', 'n'

DECLARE @Option TABLE (OptionID INT, OptionDesc VARCHAR(100))
INSERT INTO @Option
SELECT 1, 'OptionVal1' UNION
SELECT 2, 'OptionVal2' UNION
SELECT 3, 'OptionVal3'

SELECT ID, OptionID FROM
(
    SELECT 
        ID, 
        CASE    
          WHEN (OptionVal1 = 'y' AND OptionDesc = 'OptionVal1') 
            OR (OptionVal2 = 'y' AND OptionDesc = 'OptionVal2') 
            OR (OptionVal3 = 'y' AND OptionDesc = 'OptionVal3')
          THEN OptionID 
          ELSE NULL 
        END AS OptionID 
    FROM @DodgyOldTable DOT CROSS JOIN @Option O 
)CRS
WHERE OptionID IS NOT NULL 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-12T11:52:58.067

11 年后，但可能会帮助某人：

```
INSERT INTO schema.tableName (col1, col2,col3, col4, col5, col6, col7)
      SELECT col1, 
             col2,
             'Static value',
             CURRENT_TIMESTAMP,
             'Anothe static value', 
             1, 
             (SELECT col7 FROM schema2.anotherTableName)
       FROM schema.tableX; 
```

> col1 & col2 来自同一个选择
> 
> col3, col5 是静态字符串
> 
> col4 是当前系统时间
> 
> col6 一个 Num 值，
> 
> col7 来自返回一个值的选择。

注意：确保具有多个值的选择出现在开头。这是 MySQL

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T10:43:26.883

我会说手动迁移脚本会更容易使用，然后尝试在单个 sql 查询中执行它，如果这是一个选项的话。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T10:55:04.157

您可以将所有选择合并在一起以提供一个结果集，但这取决于您不想要多个选择的原因 - 如果选择太多或选择的数量可能经常更改，那么修改查询仍然会很痛苦额外的选择。不幸的是，我认为您必须将逻辑放在某处，以确定 DodgyOldTable 的哪些位映射到新结构，并编写迁移脚本（或 SSIS 包）进行批量迁移（如果这是一次性工作）或 UNION你的结果在一起...

```
INSERT MainTable_Option ([MainTableID],[OptionID])
SELECT ID, (CASE WHEN OptionVal1 = 'y' THEN (SELECT OptionID FROM Option WHERE OptionDesc = 'OptionVal1') END
FROM DodgyOldTable
WHERE OptionVal1 = 'y
UNION
SELECT ID, (CASE WHEN OptionVal2 = 'y' THEN (SELECT OptionID FROM Option WHERE OptionDesc = 'OptionVal2') END
FROM DodgyOldTable
WHERE OptionVal2 = 'y
... 
```

# eclipse - 在eclipse中监听插件事件

> ID：601916
> 
> 赞同：1
> 
> 时间：2009-03-02T10:47:34.660
> 
> 标签：eclipse, eclipse-plugin

我正在研究 Eclipse ide。我想知道在一个插件上执行的操作如何被其他插件监听，以便它们也可以处理相同的事件。

有什么事请回复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T11:53:39.510

正如[**eclipse插件架构**](http://www.eclipse.org/articles/Article-Plug-in-architecture/plugin_architecture.html#5.)文章中提到的

![监听器扩展](https://i.stack.imgur.com/I6yO2.jpg)

> 在侦听器扩展模式中，宿主插件充当观察的主体，扩展插件充当观察者或侦听器。
> 因此，主机插件提供了一个可以称为侦听器的扩展点，以及一个可以调用的相应接口`IListener`。
> 然后，每个扩展器插件通过提供实现 IListener 接口的特定侦听器或通过提供此类侦听器的序列来扩展侦听器扩展点。
> 
> 因为监听器随后通过插件扩展机制以声明方式指定，所以这些监听器可以通过扩展处理自动注册用于事件通知。
> 第一次需要通知时，主体插件处理其侦听器成员，并为每个成员实例化特定的侦听器回调对象并注册该侦听器以进行事件通知。

# lucene.net - 处理 Lucene 查询解析器错误

> ID：601928
> 
> 赞同：4
> 
> 时间：2009-03-02T10:51:43.107
> 
> 标签：lucene.net

我的应用程序接受用户输入的字符串并尝试使用 Lucene 查询解析器对其进行解析。然而，我注意到有几种格式的字符串会在这个查询解析器中引发错误。
例如：

*   ~任意字符串
*   任意字符串 +

首先，我尝试塑造我的用户输入的字符串，使其不能包含这些案例，但正如我所见，我现在可能无法预见更多案例。

您如何处理查询解析器异常？你如何防止它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T11:29:30.143

我们捕获剩余的解析异常并显示错误消息（“您的搜索不匹配任何文档。建议：尝试不同的关键字。”）。

另请参阅[如何使 Lucene QueryParser 更宽容？](https://stackoverflow.com/questions/263081/how-to-make-the-lucene-queryparser-more-forgiving)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T09:26:21.917

```
query.replace(/([\!\*\+\&\|\(\)\[\]\{\}\^\~\?\:\"\/])/g, ""); 
```

# iphone - NSMutableArray 损坏

> ID：601929
> 
> 赞同：1
> 
> 时间：2009-03-02T10:52:05.477
> 
> 标签：iphone

我正在做一个 iPhone 应用程序，它使用导航控件来浏览一些数据。这些数据存储在一个 sqlite 数据库中，我有一个类可以获取它并在 NSStrings 的 NSMutableArray 中返回它。

问题是，在导航的第一个屏幕中，一切正常，但在第二个屏幕（另一个被推送的视图）中，相同的代码失败了，因为 NSMutableArray 被破坏了。在调试器中，我可以看到它已正确返回，但是当需要使用它时，指针已损坏并且应用程序崩溃。

我在所有函数中都设置了断点，但我看不到任何可能损坏的地方。作为第一个视图，它使用相同的确切代码，即使访问相同的 eact 表，也可以正常工作，我真的不知道在哪里看。

如果有人想查看我已将其上传到我的网站的代码： http: [//sachafuentes.com/iBacus.zip](http://sachafuentes.com/iBacus.zip "http://sachafuentes.com/iBacus.zip")

提前致谢。

更新：

问题在于我获取数据的函数，它看起来像（这是一个带有一些伪代码的简化版本）。

```
-(NSMutableArray *) getPaises {
 NSMutableArray * paises;
 paises = [[NSMutableArray alloc] init];
 while( get new row ) {
  NSString *aPais = get the value;
  [paises addObject:aPais];
  [aPais release];
 }
 return paises;
} 
```

如果我注释掉 [aPais release] 一切正常，但对我来说这看起来像是内存泄漏，因为 NSString 不会被释放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T12:47:54.760

Okay, here's the problem:

`NSString *aPais = [NSString stringWithUTF8String:(char*)sqlite3_column_text(compiledStatement, 0)];`

By convention, any time that you see an `alloc` and an `init`, you need a `release` somewhere down the road.

By convention, any time that you use an `xWithX:` style method, the resulting object will be released for you.

Therefore, this statement:

`[aPais release];`

将导致您的方法崩溃，因为该对象在它应该被释放之前被释放。只需删除此行，将您的`NSMutableArray`实例设置为`autorelease`-d，您应该会得到更好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T11:08:16.827

寻找错误的[内存管理](http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html)，这是最可能导致崩溃的原因。我认为你在不应该的地方释放你的对象，因此你在数组中有[悬空指针。](http://en.wikipedia.org/wiki/Dangling_pointer)

## 更新1

`[aPais release]`是错误的，因为您不会在此方法中的任何地方保留它。返回值应始终自动释放。您应该与代码中的数量`retain`相同`release`。

（有些人认为 a`retain`也可以是`alloc init`，但我总是尝试使用`alloc init autorelease`，但这是风格问题。）

## 顺便提一句

你应该自动释放你的数组，你只用`[[alloc] init]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T12:42:14.353

任何对象，当你完成它时，你必须是 -d，否则你将有内存`alloc`泄漏`init`。`release`

Since you are passing the reference outside the scope of the `getPaises` method, you must autorelease the `NSMutableArray`, or you will have a memory leak:

`paises = [[[NSMutableArray alloc] init] autorelease];`

Can you please clarify the step here:

`NSString *aPais = get the value;`

It's not clear what happens in "`get the value`" and I suspect this is one cause of instability.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T12:43:18.750

I see that the code is (verbatim)

```
while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
    NSString *aPais = [NSString stringWithUTF8String:
                       (char*)sqlite3_column_text(compiledStatement, 0)];
    [paises addObject:aPais];
    [aPais release];
} 
```

...and it's exactly as @gs puts it. `aPais` is autoreleased and should not be released.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-13T09:22:29.977

您还可以*使用方便的构造函数*来初始化 NSMutableArray：

```
NSMutableArray *paises = [NSMutableArray array]; 
```

这相当于做：

```
NSMutableArray *paises = [[[NSMutableArray alloc] init] autorelease]; 
```

# modalpopupextender - Ajax 模态弹出显示问题

> ID：601930
> 
> 赞同：0
> 
> 时间：2009-03-02T10:52:49.017
> 
> 标签：modalpopupextender

在网页上，有一个 gridview 控件包含产品 ID。绑定到链接按钮。

在 gridview 的 ItemCommand 事件中，我获取产品信息并显示在 ajax 模式弹出扩展器控件中。弹出窗口以编程方式显示在 gridview 的 ItemCommand 上，也以编程方式隐藏。

现在的问题是，当我在显示第一个产品详细信息后关闭弹出窗口并尝试通过单击其他产品 ID 来查看下一个 1 时，有时会显示详细信息，有时不会。

来自数据库的数据也为每个产品获取。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-12T07:25:50.833

我也这样做，但我没有这样的问题。所以我在这里粘贴代码可能对你有帮助。
**代码：**

```
protected void GVallusers_RowEditing(object sender, GridViewEditEventArgs e)
    {
        try
        {
            GridViewRow gvRow = ((GridView)sender).Rows[e.NewEditIndex];
            populatepanel(gvRow);
            ModalPopupExtender1.Show();
        }
        catch (Exception exc)
        {
            lblinfo.Text = exc.Message;
        }
    }

public void populatepanel(GridViewRow gvrow)
    {      
        string userid = gvrow.Cells[0].Text;
        lblSite.Text=gvrow.Cells[1].Text;
        lblemail.Text = gvrow.Cells[3].Text;
    } 
```

# flash - Flash AS3 定时器问题

> ID：601935
> 
> 赞同：4
> 
> 时间：2009-03-02T10:54:48.807
> 
> 标签：flash, actionscript-3, animation, loops, timer

我有一个 timerEvent，它在舞台上添加了 25 个电影剪辑，并从 x:0,y:0 为它们设置动画，这一切都很好！我想做的是为每个影片剪辑分配比添加到舞台的最后一个影片剪辑多 25 像素的值。我做了一个小测试，每次定时器循环时尝试增加一个数值，但它没有增加。我也应该使用 for 循环/数组吗？

提前致谢。城野

```
import flash.events.*;
import caurina.transitions.*;

bringItemsOn();

var itemTimer:Timer;
function bringItemsOn():void {
    itemTimer=new Timer(300);
    itemTimer.addEventListener(TimerEvent.TIMER,itemTimer_tick);
    itemTimer.start();
}

function itemTimer_tick(e:TimerEvent):void {    
    itemTimer.currentCount-1;
    var mc:MovieClip = new MovieClip();
    mc.graphics.beginFill(Math.random() * 0x000000);
    mc.graphics.drawRect(0,0,stage.stageWidth,25);
    mc.x=0;
    mc.y=0;
    addChild(mc);
    Tweener.addTween(mc,{y:Math.random()*1000 - 500,
                             x:0,
                             time:.9,
                             transition:"easeOutExpo"});

    if (itemTimer.currentCount>=25) {
        itemTimer.removeEventListener(TimerEvent.TIMER,itemTimer_tick);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T23:20:44.707

老实说，我最初会使用 for 循环来设置这一切。完成 for 循环后，相应地放置每个项目，然后使用 TweenLite 或您最喜欢的 Tweening 包。

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    import gs.TweenLite;
    import gs.easing.*;

    public class ExampleDocumentClass extends Sprite
    {
        if(stage) _init();
        else addEventListener(Event.ADDED_TO_STAGE, _init(), false, 0, true);
    }
    private function _init(e:Event =null):void
    {
        for(var i:int = 0; i < 25; i++)
        {
            var mc:MovieClip = new MovieClip();
            mc.graphics.beginFill(Math.random() * 0x000000);
            mc.graphics.drawRect(0,0,stage.stageWidth,25);
            //Seperates them by 25, their width, so they will touch.
            mc.x= i * 25; //i * 25 + 1 leaves a space in between.
            mc.y=0;
            addChild(mc);
            TweenLite.to(mc, 0.9, {y:math.random()*1000-500, x: 0, ease: Expo.easeOut});

        if(i == 24) //Total length - 1
        {
            //The loop ended.
        }
    }
} 
```

重要的是要注意屏幕更新不会发生在代码块中，例如 for 和 while 循环。您不能以我展示的方式将这些基于彼此隔开，因为即使先前的项目 x 可能刚刚设置，它还没有被绘制到屏幕上；为了构建一个系统，假设所有图像的宽度不同，但必须一个接一个地开始，我们必须等待 Event.COMPLETE 事件为给定的加载器触发，以便我们可以访问它的宽度和其他属性。由于您只想将它​​们间隔 25 像素，并且它们的大小相同，因此我们仅使用“i”来分隔它们

发生了什么：i * 25 = 0; 我++；我 * 25 = 25; 我++；我 * 25 = 50;

如您所见，我们已经达到了我们想要的间距。

Brian Hodge
[hodgedev.com](http://hodgedev.com) [blog.hodgedev.com](http://blog.hodgedev.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-13T22:45:30.857

用这个 ：

```
 import flash.events.*;
 import caurina.transitions.*;

bringItemsOn();

var extra:int = 0;
var itemTimer:Timer;
function bringItemsOn():void {
    itemTimer=new Timer(300);
    itemTimer.addEventListener(TimerEvent.TIMER,itemTimer_tick);
    itemTimer.start();
}

function itemTimer_tick(e:TimerEvent):void {    
    itemTimer.currentCount-1;
    var mc:MovieClip = new MovieClip();
    mc.graphics.beginFill(Math.random() * 0x000000);
    mc.graphics.drawRect(0,0,stage.stageWidth,25);
    mc.x += extra;
    mc.y=0;
    extra = mc.width;
 /*u can use mc's width for different x value's or

make ur own like extra += 10; each mc.x will be different */
    addChild(mc);
    Tweener.addTween(mc,{y:Math.random()*1000 - 500,
                             x:0,
                             time:.9,
                             transition:"easeOutExpo"});

    if (itemTimer.currentCount>=25) {
        itemTimer.removeEventListener(TimerEvent.TIMER,itemTimer_tick);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T11:40:53.940

并没有真正找到您尝试增加变量或将 25px 添加到 y 的部分，但试试这个：

```
function itemTimer_tick(e:TimerEvent):void {

    ...

    mc.y = itemTimer.currentCount * 25;
    addChild(mc);

    ...

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T12:01:43.420

我真正不同的方法可能是使用方法的`delay`属性`Tweener.addTween`。启动所有的movieclip并稍微增加每个movieclip的延迟？

# asp.net - 自定义工具“msdiscocodegenerator”失败

> ID：601936
> 
> 赞同：1
> 
> 时间：2009-03-02T10:55:03.597
> 
> 标签：asp.net, web-services, compact-framework

尝试在我的 Compact Framework 应用程序中引用 Web 服务时出现此错误。通过谷歌搜索似乎表明这是一种常见的情况，但没有关于导致它的原因以及如何解决它的有用建议。**我可以通过添加服务引用**成功地从 WinForms 应用程序访问 Web 服务，但 CF 项目只有**Web 引用**选项。

我在 Vista 上运行 Visual Studio 2008。

有没有人在遇到这个问题后真正解决了这个问题？

谢谢比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-04T16:24:59.760

也许是的……我忘记了，就像一年多以前一样。我需要在 CF 2.0 设备上使用 WCF 服务（呈现为 Web 服务）。但是我在生成包装器时遇到了问题。

我想我最终所做的就是在桌面上做，然后将生成的代码复制到设备项目中。我不得不删除一些位来获得 CF 兼容性，但它最终奏效了。

抱歉说得这么模糊，但我的记忆有时就是这样。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T10:30:58.227

此问题已被 Microsoft 确定为 BUG，并已在最新版本的 Visual Studio 中修复。您可以安装 VS 2013 并尝试。将我的 Visual Studio 升级到 2013 版本后，它工作正常。

# python - python中欠定方程组的解基础

> ID：601941
> 
> 赞同：2
> 
> 时间：2009-03-02T10:56:21.567
> 
> 标签：python, linear-equation

我有一个未定方程组（n 个变量的 m 个方程，m 小于 n）。因此，如果它是可解的，则解集是线性空间（如果它是齐集）或仿射空间（非齐集）。

Python（可能与其他库）中是否有一种简单的方法来获得这个空间 - 例如，它的基础？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T11:01:32.410

使用来自[SciPy的](http://www.scipy.org)[linalg包](http://docs.scipy.org/doc/scipy/reference/linalg.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T12:19:30.943

就像之前的海报说的那样，你会想要来自 SciPy 的 linalg，但要专注于[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)解决方案。矩阵 U 是输出向量的基础。

# ruby-on-rails - 我在哪里放置“帮助”方法？

> ID：601943
> 
> 赞同：1
> 
> 时间：2009-03-02T10:56:50.317
> 
> 标签：ruby-on-rails, ruby, helper

在我的 Ruby on Rails 应用程序中，我有：

```
class AdminController < ApplicationController
  def create
    if request.post? and params[:role_data]
      parse_role_data(params[:role_data])
    end

  end
end 
```

并且

```
module AdminHelper
  def parse_role_data(roledata)
    ...
  end
end 
```

然而我得到一个错误说`parse_role_data`没有定义。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T11:03:22.733

助手主要用于复杂的与输出相关的任务，例如从日期列表中制作日历的 HTML 表格。任何与业务规则相关的东西，比如解析文件都应该放在关联的模型中，一个可能的例子如下：

```
class Admin < ActiveRecord::Base
  def self.parse_role_data(roledata)
    ...
  end
end

#Call in your controller like this
Admin.parse_role_data(roledata) 
```

在制作路由时还要考虑使用（RESTful 路由或 :conditions 选项）[ [http://api.rubyonrails.org/classes/ActionController/Routing.html]](http://api.rubyonrails.org/classes/ActionController/Routing.html])`request.post?` ，而不是在控制器中检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T10:59:24.053

您不应该通过 AdminHelper 访问 parse_role_data 吗？

**更新 1：**检查这个 [http://www.johnyerhot.com/2008/01/10/rails-using-helpers-in-you-controller/](http://www.johnyerhot.com/2008/01/10/rails-using-helpers-in-you-controller/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T11:42:08.163

从外观上看，您是否正在尝试创建用于向用户添加角色的 UI。我假设你已经有一个 UsersController，所以我建议添加一个 Role 模型和一个 RolesController。在您的 routes.rb 中，您会执行以下操作：

```
map.resources :users do |u|
    u.resources :roles
end 
```

这将允许您拥有如下路线：

```
/users/3/roles 
```

在您的 RolesController 中，您可以执行以下操作：

```
def create
    @user = User.find_by_username(params[:user_id])
    @role = @user.roles.build(params[:role])
    if @role.valid?
        @role.save!
        redirect_to @user
    else
        render :action => 'new'
    end
end 
```

这将从新操作中显示的表单中获取角色参数数据，并为该用户创建一个新角色模型。希望这对您来说是一个很好的起点。

# java - 在键值存储中处理集合（列表或集合）的最佳方法是什么？

> ID：601956
> 
> 赞同：3
> 
> 时间：2009-03-02T11:04:01.577
> 
> 标签：java, storage, distributed, key-value

我想知道当您的存储类似于 memcached 时，从一个非常大的列表中添加/删除项目的有效方法是什么？也许有一些带有Java接口的分布式存储可以很好地处理这个问题？

有人可能会推荐兵马俑。我知道，但这并不是我所需要的。;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T14:41:33.513

[Hazelcast](http://www.hazelcast.com) 1.6 will have distributed implementation MultiMap, where a key can be associated with a set of values.

```
MultiMap<String, String> multimap = Hazelcast.getMultiMap ("mymultimap");
multimap.put ("1", "a");
multimap.put ("1", "b");
multimap.put ("1", "c");
multimap.put ("2", "x");
multimap.put ("2", "y");

Collection<String> values = multimap.get("1"); //containing a,b,c 
```

[Hazelcast](http://www.hazelcast.com) is an open source transactional, distributed/partitioned implementation of queue, topic, map, set, list, lock and executor service. It is super easy to work with; just add hazelcast.jar into your classpath and start coding. Almost no configuration is required.

Hazelcast is released under Apache license and enterprise grade support is also available. Code is hosted at [Google Code](http://code.google.com/p/hazelcast/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-13T13:23:47.707

也许你也应该看看[Scalaris](http://www.onscale.eu/scalaris.html)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T01:21:56.477

如果您忽略并发问题，您可以使用键值存储对大多数数据结构进行建模。您的要求并不完全清楚，因此我将对您的用例做出一些假设。希望如果它们不正确，您可以概括该方法。

您可以通过具有一个指向 {data, prev_key, next_key} 的值元组的已知根（我们称之为“node_root”）节点在存储中轻松创建一个链表。prev_key 和 next_key 元素是键名，应遵循约定“node_foo”，其中 foo 是 UUID（理想情况下，您可以按顺序生成这些，如果不是，您可以使用其他类型的 UUID）。这提供了对您数据的有序访问。

现在，如果您需要 O(1) 删除键，您可以在结构上添加第二个索引，其中键为“数据”，值为“node_foo”，用于正确的 foo。然后，您可以像处理内存中的链表一样执行删除。完成后删除索引节点。

现在，请记住，并发修改此列表与并发修改任何共享数据结构一样糟糕。如果您使用的是 BDB 之类的东西，您可以使用它们（出色的）事务支持来避免这种情况。对于没有事务或并发控制的东西，您需要提供外部锁定或序列化对单个线程的访问。

# java - 如何在 c++ 或 c# 或 java 中创建 jpegs(live) 流？RTSP？

> ID：601957
> 
> 赞同：1
> 
> 时间：2009-03-02T11:04:07.757
> 
> 标签：java, java-me, streaming, jpeg, rtp

我正在构建一个服务器端的 html 呈现浏览器，它呈现 html 并将 jpegs 发送到移动客户端。我需要弄清楚如何构建一个服务器来抓取 jpeg 并将它们在会话中流式传输到我将在 j2me 中编写的客户端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T11:58:55.487

尚不完全清楚您所说的“实时”是什么意思，但我猜您正在谈论向服务器端进程发出请求，该进程呈现传入的 URL 并返回图像。我知道的最简单的方法之一是使用 Java 和[SWT](http://www.eclipse.org/swt/)。您可以使用[SWT 浏览器小部件](http://www.eclipse.org/articles/Article-SWT-browser-widget/browser.html)并捕获画布，然后将其转换为您想要的任何图像类型。浏览器小部件使用 firefox 来呈现页面，因此它们应该看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T12:10:05.023

我会编写一个每次提供一个 jpeg 的 servlet，以及一个每隔一段时间请求下一个 jpeg 的 midlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T15:27:57.430

嗯，有比普通 JPEG 更好的解决方案。我已经实现了这样的系统，您最好使用 MPEG-2、MPEG-4 ASP、H.264 等视频编解码器而不是 JPEG，并将更新作为 p 帧发送（即前一个的增量图像），如果有“太大”的变化（或错过更新，或将新客户端添加到现有流中），则发送 i-frame。

即使不使用视频编解码器，发送差异通常也是可取的。使用其他一些机制来编码差异。

关于如何获取要发送的缓冲区，您可以使用多个帧缓冲区进行渲染，并设置帧缓冲区代码以在发生更改时启动计时器，并在发生更改时发送周期性更改，当足够的时间时自上次更改（尚未发送）以来已经过去了发送更新（可能比第一个值更短的时间），并且还可能包括某种强制更新可以在某些情况下调用的选通（如果可以的话，对于例如，从浏览器获取页面加载完成指示，您可以通过更改 chrome 等在 Firefox 中进行一些工作）。

[添加]

有关其他解决方案的示例，请查看远程桌面协议和程序，如 VNC、RDP（Windows 远程桌面）等 - 这实际上就是他们正在做的事情，同样具有更高级的压缩和损坏区域跟踪。

对于帧缓冲区，您可以使用标准的 linux/etc 帧缓冲区代码（可能是最简单的），甚至可以使用 XVFB 之类的代码（与原始帧缓冲区相比，它使您可以访问有关事物发生变化的原因和原因的更多信息）。

# php - 如何找到以下数据

> ID：601959
> 
> 赞同：1
> 
> 时间：2009-03-02T11:04:57.567
> 
> 标签：php, cakephp

> **可能重复：**
> [如何在 CakePHP 中提供附加条件的同时查询基于 HABTM 关系的表？](https://stackoverflow.com/questions/602227/how-do-i-query-a-table-based-with-habtm-relationship-while-providing-additional)

我正在使用具有多对多关系的两个表（区域和 safaris）。这些表由另一个名为 region_safaris 的表连接（带有字段 - region_id $ safari-id）。我想获取满足给定标准的所有 safaris，例如 5 天和给定区域的持续时间。这应该在 cakephp 中实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-02T11:47:04.970

这似乎更像是数据库问题而不是 php 问题。这是获取映射到区域“yourRegion”的所有 5 天游猎列表的语法（对于大多数数据库，例如 MySQL）

```
table safari:
id
name
duration

table region:
id
name

table regions_safaris:
safari_id
region_id

select s.name
from region r, safaris_regions sr, region r, safari s
where r.name='yourRegion'
and sr.region_id=r.id and s.id=sr.safari_id and s.duration=5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T14:31:12.203

假设您的模型正确关联。这些是我将在类似情况下使用的代码行。在对 habtm 条件进行过滤时，我发现从具有最严格过滤器的模型开始（或以最快的速度查询数据库的模型）会很有帮助。在这种情况下，该地区。

从 Safari 控制器：

```
$conditions = array('conditions' => array('Region.id' => 'yourRegion', 'Safari.duration' => 5);
$this->Safari->Region->recursive = 1;
$safaris = $this->Safari->Region->find('all', $conditions); 
```

然后，您应该能够 print_r($safaris) 并通过嵌套区域数组访问每个 safari。IE：

```
$safaris['Region'][0]['Safari'][0]['name'] 
```

这应该为您提供与条件匹配的第一个返回的区域第一个关联的 safari。print_r($safaris) 以更好地了解数据结构，您将明白我的意思。

# sql-server - 按行对组进行报表服务器聚合

> ID：601961
> 
> 赞同：0
> 
> 时间：2009-03-02T11:06:58.920
> 
> 标签：sql-server, reporting-services

也许这是一个新手问题，但是

想象一下，我有一个报告，显示销售代表的销售订单列表，按 sku 级别逐项列出，并希望显示销售代表已售出 1 个 sku 总销售额的百分比。

IE

> 销售员
> 
> *   订单清单
>     
>     
>     
>     ```
>      - List of items              no sold:  5  out of this months total 942 
>     ```

例子：

> 约翰·多伊
> 
> ```
> - Order #12312
> 
>       - SKU SP1231     Sold 5 . Month total 445
> 
>       - SKU SP4141     Sold 63 .  Month total 300 
> ```
> 
> 艾玛·多伊
> 
> ```
> - Order #123324
> 
>       - SKU SP1231     Sold 65 . Month total 445
> 
>       - SKU SP4141     Sold 2 .  Month total 300 
> ```
> 
> ETC

月总数字是该特定 sku 在整个报告期内售出的商品数量。

我该如何添加这个号码？如果我使用`Fields!TotalAmount.Value`它将总数作为分组总数。即销售代表 Z 在订单 X 上销售了多少 sku Y。

我需要该特定 SKU 的全球总销售额。

如果我说`SUM(Fields!Amount,Nothing)`要设置全局范围，它会给出所有 sku 的总和，而不仅仅是有问题的 sku。

我该怎么做呢？

**编辑**

报表服务器是 SSRS，报表使用共享数据源，该数据源是报表服务器上已经托管的报表模型，它指向包含内容的 SQL Server 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-02T12:32:56.433

您没有说您使用的是什么 DBMS（从 Fields!Amount 语法中没有明确指出 Oracle）。这对您的 DBMS 有用吗？：

```
with sku_sales as
( select sku, sum(value) as sku_value
  from   sales
  group by sku
)
select sales.salesperson, sum(sales.value), sku_sales.sku_value
from   sales
join   sku_sales on sku_sales.sku = sales.sku
group by sales.salesperson, sku_sales.sku_value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T16:34:25.277

What would I do is select Sku total sum in your report dataset using **comma separated lists**:

```
-- testing data
DECLARE @Order TABLE (ID INT, SalesRepID INT, Date DATETIME)
INSERT INTO @Order
SELECT 1, 1, GETDATE() UNION
SELECT 2, 2, GETDATE() UNION
SELECT 3, 1, GETDATE() UNION
SELECT 4, 1, GETDATE() UNION
SELECT 5, 2, GETDATE()

DECLARE @OrderDetail TABLE (ID INT, OrderID INT, SkuID INT, SkuCount INT)
INSERT INTO @OrderDetail
SELECT 1, 1, 1, 10 UNION
SELECT 2, 1, 2, 5 UNION
SELECT 3, 1, 3, 20 UNION
SELECT 4, 1, 4, 10 UNION
SELECT 5, 2, 1, 15 UNION
SELECT 6, 2, 2, 25 UNION
SELECT 7, 2, 3, 15 UNION
SELECT 8, 3, 1, 15 UNION
SELECT 9, 3, 1, 10 UNION
SELECT 10, 3, 3, 10 UNION
SELECT 11, 3, 4, 15 UNION
SELECT 12, 4, 1, 5

DECLARE @Sku TABLE (ID INT, SkuCode VARCHAR(10))
INSERT INTO @Sku
SELECT 1, 'SP1233' UNION
SELECT 2, 'SP2262' UNION
SELECT 3, 'SP1531' UNION
SELECT 4, 'SP4235'

DECLARE @SalesRep TABLE (ID INT, SalesRepName VARCHAR(20))
INSERT INTO @SalesRep
SELECT 1, 'John Doe' UNION
SELECT 2, 'Emma Doe'

    -- filters for testing
DECLARE @StartDate DATETIME, @EndDate DATETIME
SELECT  @StartDate = GETDATE(), @EndDate = GETDATE()

DECLARE @SkuIDList VARCHAR(8000), @SkuSumList VARCHAR(8000)
SELECT @SkuIDList = '', @SkuSumList = ''
--gether all sku IDs and Sum in two comma separated list
SELECT @SkuIDList = @SkuIDList + CONVERT(VARCHAR, OD.SkuID) + ',', 
@SkuSumList = @SkuSumList + CONVERT(VARCHAR, SUM(OD.SkuCount)) + ','
FROM @Order O 
INNER JOIN @OrderDetail OD ON O.ID = OD.OrderID
WHERE O.Date BETWEEN @StartDate AND @EndDate
GROUP BY OD.SkuID
-- remove last ','
SELECT @SkuIDList = SUBSTRING(@SkuIDList, 0, LEN(@SkuIDList)),
 @SkuSumList = SUBSTRING(@SkuSumList, 0, LEN(@SkuSumList))

-- include thouse lists in the main select for your report dataset
SELECT O.ID, OD.SkuID, O.SalesRepID, SR.SalesRepName, S.SkuCode, 
    OD.SkuCount, @SkuIDList AS SkuIDs, @SkuSumList AS SkuSums
FROM @Order O 
INNER JOIN @OrderDetail OD ON O.ID = OD.OrderID
INNER JOIN @Sku S ON OD.SkuID = S.ID
INNER JOIN @SalesRep SR ON O.SalesRepID = SR.ID
WHERE O.Date BETWEEN @StartDate AND @EndDate 
```

Then you can use some custome code to retrieve sum value by sku ID (I have to write in C# currently, you easely convert it to VB):

```
public int GetSkuSum(string skuSumCSV, string skuIDCSV, int searchSkuID)
{
    string[] strSkuSum = skuSumCSV.Split(',');
    string[] strSkuID = skuIDCSV.Split(',');

    for (int i = 0; i < strSkuID.Length; i++)
    {
        if (Convert.ToInt32(strSkuID[i].Trim()) == searchSkuID)
        {
            return Convert.ToInt32(strSkuSum[i]);
        }
    }
    return 0;
} 
```

Then use it in your textbox Value expression:

```
=Code.GetSkuSum(Fields!SkuIDs.Value,Fields!SkuSums.Value,Fields!SkuID.Value) 
```

# c# - 读取单色位图像素颜色

> ID：601963
> 
> 赞同：3
> 
> 时间：2009-03-02T11:07:36.750
> 
> 标签：c#, .net, graphics, drawing, bitmap

我不知道更好的标题，但我会描述这个问题。

我们使用的硬件具有显示图像的能力。它可以显示分辨率为 64 x 256 的黑白图像。

问题是我们必须发送到设备的图像格式。它不是标准的位图格式，而是一个简单的字节数组，代表图像的每个像素。

0 = 黑色，1 = 白色。

因此，如果我们有一个大小为：4 x 4 的图像，字节数组可能看起来像：

1000 0100 0010 0001

图像看起来像：

[位图 http://www.mediafire.com/imgbnc.php/6ee6a28148d0170708cb10ec7ce6512e4g.jpg](http://www.mediafire.com/imgbnc.php/6ee6a28148d0170708cb10ec7ce6512e4g.jpg)

问题是我们需要通过在 C# 中创建单色位图来创建此图像，然后将其转换为设备可以理解的文件格式。

例如，可以在设备上显示文本。为此，他必须创建一个位图并向其写入文本：

```
var bitmap = new Bitmap(256, 64);

using (var graphics = Graphics.FromImage(bitmap))
{
    graphics.DrawString("Hello World", new Font("Courier", 10, FontStyle.Regular), new SolidBrush(Color.White), 1, 1);
} 
```

这里有2个问题：

1.  生成的位图不是单色的
2.  生成的位图具有不同的二进制格式

所以我需要一种方法：

1.  在 .NET 中生成单色位图
2.  读取位图中每个像素的单个像素颜色

我发现您可以将像素深度设置为 16、24 或 32 位，但没有找到单色，我不知道如何读取像素数据。

欢迎提出建议。

**更新：**我不能使用 Win32 PInvokes ......必须是平台中立的！

**跟进：**以下代码现在对我有用。（以防万一有人需要）

```
private static byte[] GetLedBytes(Bitmap bitmap)
{
    int threshold = 127;
    int index = 0;
    int dimensions = bitmap.Height * bitmap.Width;

    BitArray bits = new BitArray(dimensions);

    //Vertically
    for (int y = 0; y < bitmap.Height; y++)
    {
        //Horizontally
        for (int x = 0; x < bitmap.Width; x++)
        {
            Color c = bitmap.GetPixel(x, y);
            int luminance = (int)(c.R * 0.3 + c.G * 0.59 + c.B * 0.11);
            bits[index] = (luminance > threshold);
            index++;
        }
    }

    byte[] data = new byte[dimensions / 8];
    bits.CopyTo(data, 0);
    return data;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-02T11:30:41.217

我会计算每个像素的亮度，然后将其与某个阈值进行比较。

```
y=0.3*R+0.59G*G+0.11*B 
```

假设阈值为 127：

```
const int threshold = 127;
Bitmap bm = { some source bitmap };

byte[,] buffer = new byte[64,256];

for(int y=0;y<bm.Height;y++)
{
  for(int x=0;x<bm.Width;x++)
  {
   Color c=source.GetPixel(x,y);
   int luminance = (int)(c.R*0.3 + c.G*0.59+ c.B*0.11);
   buffer[x,y] = (luminance  > 127) ? 1 : 0;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T11:21:05.797

我不知道 C#。可能有很多方法可以做到这一点。这是一个简单的方法。

1.  创建一个大小与您的设备要求相同的空白黑色位图图像。在上面画任何你想画的东西，比如文字、图形等。

2.  现在对图像设置阈值，即将图像的像素设置为低于强度值为零，否则将其设置为。例如，将所有强度值 > 0 设置为 1。

3.  现在转换为您的设备所需的格式。创建一个大小为 (64 * 256)/8 的字节数组。将相应位设置为 1，其中早期位图中的相应像素值为 1，否则将其重置为 0。

编辑：第 3 步。使用按位运算符设置位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T11:40:08.637

您不应该使用位图的 GetPixel 方法将整个位图从一种格式转换为另一种格式！这将是无效的。相反，您应该使用[LockBits](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)方法来访问图像缓冲区的副本并将其转换为所需的格式。我不完全确定将其转换为单色，但 PixelFormat 枚举中有 Format1bppIndexed 值，这可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T11:43:28.877

您可以尝试在构造函数中提供像素格式：

```
var bitmap = new Bitmap(256, 64, PixelFormat.Format1bppIndexed); 
```

当我在其他平台上绘制单色位图时，有时不得不禁用抗锯齿，否则渲染的文本不会显示：

```
graphics.SmoothingMode=SmoothingMode.None; 
```

YMMV。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-02T11:44:34.600

[Bitmap 有一个](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)可以使用的 GetPixel 方法。这将让您在位图上绘图，然后将其转换为您需要的格式。

Windows 窗体中的位图（即，通过 Graphics.FromImage 访问）是 24 bpp（可能是 32？这还为时过早，我真的忘记了）。尽管如此，GetPixel 返回一个 Color 对象，因此位图的位深度无关紧要。我建议你这样写你的代码：

```
MyBitmapFormat ToMyBitmap(Bitmap b)
{
    MyBitmapFormat mine = new MyBitmapFormat(b.Width, b.Height);

    for (int y=0; y < b.Height; y++) {
        for (int x=0; x < b.Width; x++) {
            mine.SetPixel(x, y, ColorIsBlackish(b.GetPixel(x, y)));
        }
    }
}

bool ColorIsBlackish(Color c)
{
    return Luminance(c) < 128; // 128 is midline
}

int Luminance(c)
{
    return (int)(0.299 * Color.Red + 0.587 * Color.Green + 0.114 * Color.Blue);
} 
```

这个过程称为简单阈值。这是脑死亡，但它会作为第一次削减。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-04-07T17:35:23.520

感谢上面的代码 - 我正在尝试将单色图像转换为 2d 数组，其中 1-black 0-white 但是我遇到了一些问题 - 我使用您的代码加载了 8x8 bmp 图像，并正在输出它的内容通过使用到文本框

```
myGrid =GetLedBytes(myBmp);
     for (int x = 1; x < 8; x++)
     {
         textBox1.Text = textBox1.Text + Convert.ToString(myGrid[x])+ "  ";
     } 
```

但是我在文本框中得到了这个结果：

```
225  231  231  231  231  129  255 
```

我如何得到它，所以它是 0 和 1？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-02T11:11:45.973

[这一章](http://www.sergeybogdanov.com/Samples/)有一些创建单声道位图的代码。SaveImage 示例是一个有趣的示例。

# c++ - 如何将所有内核用于 nmake？

> ID：601970
> 
> 赞同：55
> 
> 时间：2009-03-02T11:13:13.287
> 
> 标签：c++, eclipse, qt, multicore, nmake

我刚买了一台新的四核计算机，发现 nmake 只使用了一个进程。

我曾经使用带有开关 -j4 的 make 来启动 4 个进程。什么是 nmmake 等价物？

[编辑] 根据以下信息，我已经能够将命令添加到我的 qmake 项目文件中：

QMAKE_CXXFLAGS += /MP

这有效地为我做到了。非常感谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-05-12T21:11:09.090

另一种通用的、非 Qt 相关的方式来告诉`nmake`使用所有内核是将环境变量设置`CL`为`/MP`：

```
set CL=/MP
nmake 
```

将使用所有 CPU 内核。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-06-28T17:12:36.177

QT 有一个工具：http: [//download.qt.io/official_releases/jom/](http://download.qt.io/official_releases/jom/)

他们还在 Qt creator 中默认使用它。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2009-03-02T11:21:42.720

根据[MSDN](http://msdn.microsoft.com/en-us/library/afyyse50(VS.71).aspx)，没有这样的选项`nmake`.

`/MP`但是，您可以使用VC++ 命令行编译器的选项并同时传递多个文件，使编译器并行构建多个文件：

```
> cl /MP a.cpp b.cpp c.cpp 
```

但是请注意，大多数 Makefile 不会像这样调用编译器 - 它们通常为每个单独的源文件单独调用编译器，这会阻止该`/MP`选项做任何有用的事情。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-03T16:29:33.283

[Incredibuild](http://www.xoreax.com/)声称能够在多核/多台机器上运行 nmake 构建。我没有任何经验。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2010-02-13T02:05:39.027

[CMake 2.8.1 RC1](http://www.cmake.org/pipermail/cmake/2010-February/035018.html) ，至于写这篇文章的时候，它已经准备好尝试了，它确实为 NMake 带来了新的生成器，称为[NMake Makefiles JOM](http://www.cmake.org/pipermail/cmake/2010-February/035021.html)，它生成具有特定设置的 jom 的 NMake，这是替换 NMake 的下降。因此，它使用 NMake 提供了支持多处理的构建。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-02T11:21:33.440

快速谷歌搜索给出：http: [//msdn.microsoft.com/en-us/library/bb385193.aspx](http://msdn.microsoft.com/en-us/library/bb385193.aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-05T18:23:26.583

这不适用于普通的 makefile，但 Visual Studio 2005 中有一个设置允许您同时构建多个 .vcproj 文件（前提是一个不依赖于另一个）。工具 -> 选项 -> 项目和解决方案 -> 构建和运行 -> **X**最大并行项目构建数。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-09-04T18:32:14.263

不太一样，但如果你使用`cmake`，你可以导出解决方案（例如使用生成器“Visual Studio 14 2015”而不是“NMake Makefiles”）。

在这种情况下，可以使用`msbuild`允许您使用`/maxcpucount`命令行开关并行化构建过程的工具构建导出的解决方案。

# c++ - 用于 C++ 的 DbUnit？

> ID：601973
> 
> 赞同：0
> 
> 时间：2009-03-02T11:15:57.557
> 
> 标签：c++, ant, dbunit, data-driven-tests

我们正在 Linux 下使用 C++ 进行开发，并且即将设置自动化测试。我们打算使用像 CppUnit oder CxxTest 这样的测试框架。我们使用 Ant 来构建软件，我们还将使用它来运行测试。

由于某些测试将涉及数据库访问，因此我们正在寻找一种工具或框架来促进在数据库中准备和清理测试数据的任务 - 就像 Java 世界中的 DbUnit（JUnit 扩展）一样。

另一种选择可能是使用实际的 DbUnit - Java VM 可用。利用 DbUnit 的 Ant 任务似乎是最有希望的。欢迎任何相关领域的报告！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T15:11:17.897

我会推荐[提升单元测试](http://www.boost.org/doc/libs/1_35_0/libs/test/doc/components/utf/index.html)。您可能必须使用设置和拆卸来手动清理数据库。当然，您可以在 ODBC 中构建自己的 C++ DbUnit。如果您确实让我知道，因为我也可以使用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T12:39:50.130

我想你有自己的 C++ api 来使用 DB。如果是真的，你最好自己做所有的数据库准备。在这种情况下，您还将测试您的 DB API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T18:46:32.237

由于似乎没有用于 C++ 开发的类似 DbUnit 的工具，因此我们构建了自己的一个小框架。基本上，它是一个适配器，用于从 C/C++ 测试运行程序中调用实际的 DbUnit 操作。它利用了DbUnit 提供的[Ant 任务。](http://www.dbunit.org/anttask.html)

我们定义了一些宏，比如`TS_DB_INSERT(filename)`which call`system("ant -Ddb.dataset=filename db.insert")`之类的。

在这种情况下，`db.insert`是一个 Ant 目标，它执行一个 DbUnit 任务，对数据库执行 INSERT 操作。`filename`引用包含要插入的数据的 XML 数据集。还有一个包含 DbUnit 的断言宏`compare`。

测试用例可能如下所示：

```
void testDatabaseStuff
{
    TS_DB_INSERT("input.xml");

    TestedClass::doSomething();

    TS_DB_ASSERT("expected.xml");
} 
```

# c# - CLR 与 JIT

> ID：601974
> 
> 赞同：54
> 
> 时间：2009-03-02T11:16:44.527
> 
> 标签：c#, compiler-construction, clr, jit

JIT 编译器和 CLR 有什么区别？如果您将代码编译为 il 并且 CLR 运行该代码，那么 JIT 在做什么？随着向 CLR 添加泛型，JIT 编译发生了怎样的变化？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2009-03-02T11:19:18.140

您将代码编译为 IL，IL 在运行时执行并编译为机器代码，这就是所谓的 JIT。

**编辑**，进一步充实答案（仍然过于简化）：

当您在 Visual Studio 中编译 C# 代码时，它会变成 CLR 可以理解的 IL，IL 对于在 CLR 之上运行的所有语言都是相同的（这使得 .NET 运行时能够使用多种语言和互操作他们之间很容易）。

在运行时，IL 被解释为机器代码（特定于您所在的体系结构），然后执行。这个过程被称为 Just In Time 编译或简称 JIT。只有需要的 IL 被转换成机器码（而且只有一次，一旦它被编译成机器码就会被“缓存”），**就在**它被执行之前的时间，因此得名 JIT。

这就是 C# 的样子

> C# 代码`>`C# 编译器`>`IL `>`.NET 运行时`>`JIT 编译器`>`机器代码`>`执行

这就是 VB 的样子

> VB 代码`>`VB 编译器`>`IL `>`.NET 运行时`>`JIT 编译器`>`机器码`>`执行

正如您所看到的，每种语言只有前两个步骤是唯一的，并且在转换为 IL 之后的所有内容都是相同的，正如我之前所说，这就是您可以在 .NET 之上运行几种不同语言的原因

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2009-03-02T12:16:08.410

JIT 是 CLR 的一个方面。

具体来说，它负责将由原始语言的编译器（例如 Microsoft c# 的 csc.exe）生成的 CIL（以下称为 IL）更改为当前处理器的本机代码（以及它在当前进程中公开的架构，例如例如 32/64 位）。如果有问题的程序集是 ngen 的，那么 JIT 过程是完全没有必要的，没有它，CLR 将很好地运行此代码。

在使用尚未从中间表示转换的方法之前，JIT 有责任对其进行转换。JIT 的
确切*启动时间是特定于实现的，并且可能会发生变化。*然而，CLR 设计要求 JIT在相关代码执行*之前*发生，相比之下，JVM 可以在一段时间内自由解释代码，而单独的线程创建机器代码表示。
“正常” CLR 使用[预 JIT 存根方法](http://codeidol.com/csharp/net-framework/Inside-the-CLR/Just-In-Time-(JIT)-Compilation/)其中 by 方法仅在使用时进行 JIT 编译。这涉及让初始本地方法存根成为间接指示 JIT 编译该方法，然后修改原始调用以跳过初始存根。当前的精简版在加载时编译类型的所有方法。

解决泛型的添加问题。

这是 IL 规范和 JIT 在其语义方面的最后一次重大更改，而不是其内部实现细节。

添加了几个新的 IL 指令，并为检测类型和成员提供了更多元数据选项。在 IL 级别也添加了约束。

当 JIT 编译具有通用参数的方法（显式或隐式通过包含类）时，它可能为使用的每种类型设置不同的代码路径（机器代码指令）。实际上，JIT 对所有引用类型使用共享实现，因为这些引用类型的变量将表现出相同的语义并占用相同的空间 (IntPtr.Size)。

每种值类型都会为其生成特定的代码，处理堆栈/堆上变量的减少/增加大小是造成这种情况的主要原因。此外，通过在方法调用之前发出受约束的操作码，对非引用类型的许多调用不需要封装值来调用方法（这种优化也用于非通用情况）。这也允许`<T>`正确处理默认行为，并在使用非 Nullable 值类型时将与 null 的比较剥离为无操作（始终为 false）。

如果在运行时尝试通过反射创建泛型类型的实例，则类型参数将由运行时验证以确保它们通过任何约束。这不会直接影响 JIT，除非在类型系统中使用它（尽管可能）。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2009-03-02T11:36:44.573

正如 Jon Skeet 所说，JIT 是 CLR 的一部分。基本上这就是幕后发生的事情：

1.  您的源代码被编译成称为通用中间语言 (CIL) 的字节码。
2.  来自每个类和每个方法（以及所有其他事物：O）的元数据都包含在生成的可执行文件（无论是 dll 还是 exe）的 PE 头中。
3.  如果您正在生成可执行文件，PE Header 还包括一个传统的引导程序，该引导程序负责在您执行可执行文件时加载 CLR（公共语言运行时）。

现在，当您执行时：

1.  引导程序初始化 CLR（主要通过加载 mscorlib 程序集）并指示它执行您的程序集。
2.  CLR 执行您的主条目。
3.  现在，类有一个向量表，其中保存了方法函数的地址，因此当您调用 MyMethod 时，会搜索该表，然后对该地址进行相应的调用。在开始时，所有表的所有条目都具有 JIT 编译器的地址。
4.  当调用此类方法之一时，将调用 JIT 而不是实际方法并获得控制权。然后，JIT 将 CIL 代码编译为适合架构的实际汇编代码。
5.  一旦代码被编译，JIT 就会进入方法向量表**，并将地址替换为已编译代码的地址，这样每个后续调用都不再调用 JIT。**
6.  最后，JIT 处理编译代码的执行。
7.  如果您调用另一个尚未编译的方法，则返回 4... 等等...

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-03-02T11:23:29.083

JIT 基本上是 CLR 的*一部分*。垃圾收集器是另一个。你把互操作责任等放在哪里是另一回事，我完全没有资格发表评论:)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2011-02-24T20:51:07.900

我知道线程已经很老了，但我想我可能会放入让我理解 JIT 的图片。[它来自Jeffrey Ritcher 通过 C# 编写](https://rads.stackoverflow.com/amzn/click/com/0735627045)的优秀书籍CLR 。在图片中，他所说的元数据是在程序集头中发出的元数据，其中存储了有关程序集类型的所有信息：

![通过 C# 来自 CLR 的 JIT 图像](https://i.stack.imgur.com/LXVmH.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-03-09T12:40:23.367

1）在编译.net程序时，将.net程序代码转换为中间语言（IL）代码

2）在执行程序时，中间语言代码在调用方法时转换为操作系统本地代码；这称为 JIT（即时）编译。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-05-05T17:55:14.320

1.  公共语言运行时（CLR）是解释器，而即时（JIT）是.Net Framework中的编译器。

2.JIT是.NET的内部编译器，它从CLR获取微软中间代码语言（MSICL）代码并执行它以机器特定的指令，而CLR作为一个引擎，它的主要任务是向JIT提供MSICL代码以确保代码是根据机器规格完全编译。

# visual-studio-2008 - 如何再次垂直拆分右侧的工具窗口？

> ID：601975
> 
> 赞同：0
> 
> 时间：2009-03-02T11:17:18.333
> 
> 标签：visual-studio-2008

在 Visual Studio 2008 中，我以某种方式在我的工具窗口中拖动，所以现在

*   解决方案资源管理器
*   数据库浏览器
*   类资源管理器
*   特性

都在侧面的一个长的垂直工具窗口中。现在无论我如何移动它们，取消停靠，取消隐藏，隐藏，停靠它们，我都无法让它们恢复原状。

我该怎么做才能做到：

*   解决方案资源管理器
*   数据库浏览器
*   类资源管理器

位于右侧的上半部分，并且：

*   特性

在下半部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T11:22:59.690

抓住“属性”选项卡并向上拖动，您应该会在屏幕上看到 9 个放置提示。您想要位于工具栏窗口中间的“五叶”三叶草中的底部。

如果一切都失败了，工具 -> 导入和导出设置 -> 重置所有设置。

# c# - “参数数量与存储过程的值数量不匹配” System.Data.Common.DbCommand 细微差别

> ID：601977
> 
> 赞同：1
> 
> 时间：2009-03-02T11:19:00.620
> 
> 标签：c#, sql, sql-server-2005, datareader

这可能是一个 sql server 数据库设置问题，但我不确定从哪里开始寻找。

我有一个存储过程：

```
CREATE PROCEDURE aStoredProcedure
@dteSince DATETIME = null
AS
... 
```

调用存储过程的 C# 代码是：

```
using (IDataReader dr = database.ExecuteReader("aStoredProcedure"))
{
... 
```

C# 代码在**生产**环境中运行良好。在这里，**dteSince**将设置为 null，因为它不作为输入参数提供。

问题是当我在**UAT**环境中运行它时，它返回标题中显示的消息 -*参数数量错误......*

我可以通过将代码更改为：

```
using (IDataReader dr = database.ExecuteReader (CommandType.StoredProcedure, "aStoredProcedure"))
{
... 
```

该修复只是掩盖了代码如何在一个环境中失败而在另一个环境中正常工作的真正问题。

我已经删除并重新创建了存储过程，但没有运气。

技术使用 C# 2.0 和 Sql Server 2005。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T11:30:59.983

恕我直言，无论如何都应该指定 CommandType - 显式总是比隐式更可取。很明显，在两种环境中都发生了不同的事情，但是当您明确说明命令类型时，代码会按预期工作。

我唯一能想到的 - 数据库设置是否完全相同 - 特别是在处理 NULL 时？

**编辑**

可能值得检查`SET ANSI_NULLS ON/OFF`和`SET CONCAT_NULL_YIELDS_NULL`开/关 - 您可以查看两个数据库的属性并查看设置是否匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T13:06:46.103

以下是我通常尝试的一些故障排除技巧。

1.  检查“数据库”对象类型所在的 DAL 程序集的程序集**版本。**
2.  检查对 DAL 的库**引用**- 无论您是否从 GAC 引用 DLL - 我之前在引用**GAC**的 DLL 时遇到问题，其中包含旧程序集
3.  当您的代码尝试连接到 UAT 环境中的数据库时，请检查您的**默认数据库**- 它可能指向其他数据库，具体取决于您连接到数据库的方式。

一切都还不好，清理并**重新**构建解决方案

旁注：嗯，我不认为“System.Data.IDataReader”将包含在所使用的技术中；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T14:56:20.443

您可以使用 SQL Profiler 查看 SQL Server 透视图中发生的情况。

理想情况下，还要让某人从生产中捕获跟踪，以便进行比较。

# c# - 通过c#访问windows用户的远程控制/终端服务属性

> ID：601979
> 
> 赞同：0
> 
> 时间：2009-03-02T11:19:46.737
> 
> 标签：c#

我正在编写一个在 Server 2003 框中添加用户的 C# 程序。我使用 .NET 3.5 命名空间`System.DirectoryServices.AccountManagement`，没关系。

但是，我想阻止添加的用户使用远程控制或终端服务器登录权限。

你知道如何在 C# 中做到这一点吗？到目前为止，我没有找到任何关于此的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-03T17:45:49.623

远程桌面到机器的能力取决于该机器的安全策略。默认情况下，Administrators 组和 Remote Desktop Users 组（在本地计算机上）的成员能够远程桌面。

# c# - 在 C# 中将 Xml 读入数据网格

> ID：601985
> 
> 赞同：1
> 
> 时间：2009-03-02T11:21:59.443
> 
> 标签：c#, xml, datagrid

将 Xml 从 XmlDocument 或字符串读取到 DataGrid 的最佳方法是什么？

xml 是否必须采用特定格式？

我必须使用 A DataSet 作为中介吗？

我正在开发一个客户端，该客户端使用从我的一位同事正在开发的服务器发送的 Xml，我可以让他更改 Xml 的格式以匹配 DataGrid 的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T11:31:24.040

这取决于您运行的 .NET 版本。如果您可以使用 Linq2Xml，那就很容易了。只需创建一个 XDocument 并选择子节点作为匿名类型的列表。

如果您不能使用 Linq2Xml，那么您还有其他一些选择。使用 DataSet 就是其中之一，这可以很好地工作，但这取决于您收到的 xml。另一种选择是创建一个类来描述您将从 xml 中读取的实体并手动单步执行 xml 节点。第三种选择是使用 Xml 序列化并将 xml 反序列化为对象列表。只要您有为其设置的类，它就可以很好地工作。

最简单的选择是创建 XDocument 或按照您的建议创建 DataSet。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T11:33:54.080

显然，您的 XML 需要有效:)

之后，定义一个数据集，定义一个数据网格。在数据集上使用 readXML 方法用您的 XML 填充数据集，使用 dataBind 完成，一切顺利。

```
DataSet myDataSet = new DataSet();
myDataSet .ReadXml(myXMLString);
myDataGrid.DataSource = myDataSet ; 
myDataGrid.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T11:41:18.570

您可以简单地将 XmlDatasource 对象用作网格的数据源。这允许您设置文件和 XPath，以便选择作为数据来源的 XML。然后，如果您愿意，可以使用 <%# XPath="blah"%> 函数显式地写出您的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T12:17:23.133

我们有一个部分答案可以将数据放入数据集中，但它会将其作为一组具有关系链接的表读入。

```
 DataSet ds = new DataSet();
        XmlTextReader xmlreader = new XmlTextReader(xmlSource, XmlNodeType.Document, null);
        ds.ReadXml(xmlreader); 
```

# php - SQL LIKE 查询失败 - 准备好的语句中的致命错误

> ID：601992
> 
> 赞同：1
> 
> 时间：2009-03-02T11:25:26.083
> 
> 标签：php, sql, mysql, mysqli

我有以下代码：

```
$countQuery = "SELECT ARTICLE_NO FROM ? WHERE upper(ARTICLE_NAME) LIKE '% ? %'";
if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("ss", $table, $brand);
    $numRecords->execute();
    $data = $con->query($countQuery) or die(print_r($con->error));
    $rowcount = mysql_num_rows($data);
    $rows = getRowsByArticleSearch($query, $table, $max);
    $last = ceil($rowcount/$page_rows);
} 
```

哪个应该可以正常工作。但是我收到以下错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '? 附近使用的正确语法。WHERE upper(ARTICLE_NAME) LIKE '%?%'' 在第 1 行

如果我把

```
SELECT ARTICLE_NO FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE '% o %'; 
```

查询工作正常。$table 是上面定义的，从 GET 收到查询，都是正确的有效值。为什么会失败？

编辑：更改为：

```
$countQuery = "SELECT ARTICLE_NO FROM AUCTIONS1 WHERE upper(ARTICLE_NAME) LIKE '% ? %'";

if ($numRecords = $con->prepare($countQuery)) {

    $numRecords->bind_param("s", $query); 
```

导致错误：

警告：mysqli_stmt::bind_param() [mysqli-stmt.bind-param]: 变量数与 C:\Program Files\EasyPHP 3.0\www\prog\get_records.php 在线准备语句中的参数数不匹配38

命令不同步；你现在不能运行这个命令

然而

```
$countQuery = "SELECT ARTICLE_NO FROM AUCTIONS1 WHERE upper(ARTICLE_NAME) LIKE ?";

if ($numRecords = $con->prepare($countQuery)) {

    $numRecords->bind_param("s", "%".$query."%"); 
```

结果是

致命错误：无法通过第 38 行 C:\Program Files\EasyPHP 3.0\www\prog\get_records.php 中的引用传递参数 2

最后

```
$countQuery = "SELECT ARTICLE_NO FROM AUCTIONS1 WHERE upper(ARTICLE_NAME) LIKE ? ";

if ($numRecords = $con->prepare($countQuery)) {

    $numRecords->bind_param("s", $query); 
```

只会给：

命令不同步；你现在不能运行这个命令

是否不可能为 LIKE 状态使用参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-03T12:30:02.783

对于`LIKE`子句，使用这个：

```
SELECT ARTICLE_NO FROM AUCTIONS1 WHERE upper(ARTICLE_NAME) LIKE CONCAT('%', ?, '%') 
```

至于表名，将表名作为参数是一种非常糟糕的做法。

如果由于某种原因您仍然需要这样做，则需要在准备查询之前将其嵌入到查询文本中：

```
$countQuery = "SELECT ARTICLE_NO FROM $table_name WHERE upper(ARTICLE_NAME) LIKE CONCAT('%', ? ,'%')";
if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("s", $brand);
    $numRecords->execute();
    $data = $con->query($countQuery) or die(print_r($con->error));
    $rowcount = mysql_num_rows($data);
    $rows = getRowsByArticleSearch($query, $table, $max);
    $last = ceil($rowcount/$page_rows);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-03T13:26:34.037

你发过吗

```
mysqli_free_result($result); 
```

在最后一次查询之后？那是命令不同步错误。

但是，这应该有效

```
$countQuery = "SELECT ARTICLE_NO FROM AUCTIONS1 WHERE upper(ARTICLE_NAME) LIKE ?";
if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("s", "%".$query."%"); 
```

想知道 $query 变量中有什么。尝试这样做

```
$query = '%'.$query.'%';
$numRecords->bind_param("s", $query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T11:28:55.980

请尝试以下操作：

```
$countQuery = "SELECT ARTICLE_NO FROM ? WHERE upper(ARTICLE_NAME) LIKE ?";
if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("ss", $table, "%$brand%");
    $numRecords->execute();
    $data = $con->query($countQuery) or die(print_r($con->error));
    $rowcount = mysql_num_rows($data);
    $rows = getRowsByArticleSearch($query, $table, $max);
    $last = ceil($rowcount/$page_rows);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T11:36:17.867

Afaik 你不能使用占位符作为 mysqli 和准备语句的标识符。因此，您必须手动将表名插入到查询中。

# php - Codeigniter 字符编码问题

> ID：601993
> 
> 赞同：7
> 
> 时间：2009-03-02T11:26:57.733
> 
> 标签：php, codeigniter, character-encoding

我有一些没有数据库数据的简单页面，只是从控制器静态加载。我已将所有可能的设置为`UTF-8`编码。我检查了标题，结果为`UTF-8`. 但是，显示这些字符时仍然会解析错误：����。

**控制器**：

```
function index(){

    $this->load->view('french/header_view');
    $this->load->view('french/homepage_view');
    $this->load->view('french/footer_view');

} 
```

**配置文件**：

```
$config['charset'] = "UTF-8"; 
```

**标题视图**：

```
<? header("Content-Type: text/html; charset=UTF-8"); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html >
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
.... 
```

**正文视图中使用的字符**：

> géniales - à - époustouflant

**生成的字符**：

> � s g�niales ！

我哪里出错了？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-02T11:35:35.153

似乎数据未以 UTF-8 编码。你检查过你的编辑器的编码设置吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-29T16:38:28.173

旧但仍然相关：

[http://philsturgeon.co.uk/blog/2009/08/UTF-8-support-for-CodeIgniter](http://philsturgeon.co.uk/blog/2009/08/UTF-8-support-for-CodeIgniter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T14:00:26.327

我在使用 Dreamweaver CS4 时遇到了同样的问题，但我使用 Notepad++（免费！）修复了它。

1.- 使用 Notepad++ -> 格式 -> 无 BOM 转换为 UTF-8。

2.- 保存。

3.- 再次查看文件**并更正**显示错误的字符。

4.- 再次保存。

5.-你完成了。

（还要确保在 CI 的配置文件中你有 UTF8）。

*对我来说，至少它是这样工作的（西班牙语）。*

# mysql - 安全 MySQL 备份 cron 作业 – my.cnf 未被读取

> ID：601995
> 
> 赞同：11
> 
> 时间：2009-03-02T11:27:19.197
> 
> 标签：mysql, security, cron, freebsd

我试图在运行 FreeBSD 的网络服务器上进行备份 cron 作业。目前它看起来像这样：

> `/usr/local/bin/mysqldump --opt --single-transaction --comments --dump-date --no-autocommit --all-databases --result-file=/var/backups/mysql/all.sql`

当我以 root 身份运行它时它工作正常（因为 root 具有`.my.cnf`用于连接的用户名和密码，但是当作业由 cron 运行时，`my.cnf`不会读取该文件。

有没有办法解决这个问题而不必将用户名和密码放入命令本身（因为这有点不安全）？

奇怪的是，我对 PostgreSQL 和一个`.pgpass`文件有相同的设置，这就像一个魅力。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-02T11:57:49.217

使用该[`--defaults-extra-file`](http://dev.mysql.com/doc/refman/5.0/en/option-files.html)选项告诉它在哪里可以找到`.my.cnf`文件（假设它可以被任何正在运行的用户读取`mysqldump`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T11:56:03.730

这很奇怪实际上cron应该阅读.my.cnf。如何在 /etc/crontab 或 crontab -e 中运行 cronjob？您可以尝试使用[AutoMySQLBackup](http://sourceforge.net/projects/automysqlbackup/)，它是一个使用 mysqldump 的小型 shell 脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T22:20:43.670

我也遇到了这个。

似乎 MySQL 被硬编码以查找“~/.my.cnf”，而不是“$HOME/.my.cnf”之类的东西。

在 FreeBSD 上，从 /etc/crontab 调用的 cronjobs 将忽略波浪号 '~' 字符，因此将忽略像 ~/.my.cnf 这样的值

实际上，以下内容对我根本不起作用：

mysql --defaults-extra-file=~/.my.cnf

但是，使用 $HOME 变量确实有效：

HOME=/home/admin mysql --defaults-extra-file=$HOME/.my.cnf

作为替代方案，如果我将 cronjob 从 /etc/crontab 移动到 /var/cron/tabs/root（使用 'crontab -e' 作为 root），我的 cronjob 将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T11:59:06.407

在 FreeBSD 上，您可以添加以下内容：

```
security.bsd.see_other_uids=0 
```

到 /etc/sysctl.conf 并重新启动，或使用

```
sysctl security.bsd.see_other_uids=0 
```

设置 sysctl 值。

现在除了 root 之外的用户只能查看他们自己的进程。因此，将密码放在命令行中的风险较小。

另外，如何运行crontab？您是使用 crontab -e -u root 将它添加到 root 用户 crontab，还是将其添加到 /etc/crontab？

验证是否在 .my.cnf 上设置了正确的权限以及 crontab 设置了哪些环境变量，因为这可能会导致它在与您的主目录不同的位置（对于 FreeBSD 上的根目录是 /root）。*