# StackOverflow 问答 10010000-10010999

# javascript - 如何使用 Javascript 在 Opera 中切换到下一页？

> ID：10010000
> 
> 赞同：1
> 
> 时间：2012-04-04T11:16:06.947
> 
> 标签：javascript, opera

我正在创建一个 javascript，并且在某些时候我希望它切换到歌剧中的下一个选项卡/页面。那部分看起来像这样：

```
case "O":
    if(document.URL.indexOf("&screen=place&try=confirm") >= 0){ 
        document.forms[0].submit.click();
    }
    else if(document.URL.indexOf("screen=place&target=") >= 0){ 
        insertUnit(document.units.light,30); document.units.attack.click();
    }
    else if(document.URL.indexOf("&screen=place") >= 0){ 
        SWITCH TO NEXT PAGE
    }
    break; 
```

切换到下一页当然不起作用，所以我的问题是，什么会起作用？

# wpf - 子控件中的 WPF 数据绑定

> ID：10010002
> 
> 赞同：0
> 
> 时间：2012-04-04T11:16:18.897
> 
> 标签：wpf, data-binding, user-controls

我是 WPF 的新手。我正在尝试构建一个具有功能（称为初始化）的应用程序，用户必须在其中填写大量数据并且重复表单的某些部分。我们正在重写一个有相当长的向导的遗留应用程序，尽管我们可能会在一个窗口中使用可折叠面板而不是下一页/上一页。还有一些部分是重复的，例如用户可以指定一些项目，如果他们说 3 他们将需要为每个部分填写一些配置信息，因此这些控件需要重复 3 次。

我正在使用 MVVM 并在此处使用此示例：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

旧向导大约有 4 页，因此我打算拥有一个包含 4 个子用户控件的用户控件（初始化）来稍微分解 xaml。

到目前为止，我已经进行了初始化（其 ViewModel 继承自 Workspace ViewModel，如上例所示）并且它包含一个正在工作的孩子：

```
<Expander ExpandDirection="Down" Header="ChildOne">
<view:ChildOne />
</Expander> 
```

我将为每个孩子和初始化有单独的 ViewModel，这给我带来了我的问题。我遇到的问题是 ChildOne 包含一个我试图绑定的下拉列表，如下所示：

```
<ComboBox x:Name="textMessageTypeCmb" ItemsSource="{Binding Path=TextMessageSelectionOptions, Mode=OneTime}"/> 
```

TextMessageSelectionOptions 是 ChildOne 的 ViewModel 中的公共属性。这不会导致任何错误，但会出现一个空的下拉列表 - 永远不会调用该属性 getter。如果我将该属性 getter 代码移到 Initialisation 的 ViewModel 中，它会起作用，但我试图将我的代码保持在可管理的块中，所以我想将帽子代码放回 ChildOne 的 ViewModel 中。如果在我的 MainWindow 中我将 ChildOne 创建为工作区而不是像这样的初始化，它也可以工作

```
ChildOneViewModel ws = this.Workspaces.FirstOrDefault(vm => vm is ChildOneViewModel) as ChildOneViewModel; 
```

谁能建议我是否采取了正确的方法（通过将其分成几个用户控件）以及我需要在绑定中做什么才能使这项工作？我真的不明白这些，但特别具有约束力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:34:04.643

在我看来，您的 ChildOne 视图`DataContext`仍然是这个 Initialisation vm。

您可以将视图绑定`Datacontext`到 ChildOneViewModel 对象

```
...
<view:ChildOne DataContext={Binding PropertyReturnsChildOneViewModellObject/>
... 
```

或指定组合框 ItemsSource 道具的路径。

```
<ComboBox x:Name="textMessageTypeCmb" ItemsSource="{Binding Path=PropertyReturnsChildOneViewModellObject.TextMessageSelectionOptions, Mode=OneTime}"/> 
```

注意：PropertyReturnsChildOneViewModellObject 是 Initialisation vm 的一个属性。

# html - 非连续跨度

> ID：10010004
> 
> 赞同：0
> 
> 时间：2012-04-04T11:16:32.370
> 
> 标签：html

有没有办法让一个`<span>`元素包含一些文本，而不是其他文本，它在中间？我尝试使用`<span>`具有相同 ID 的两个元素，但它似乎没有达到预期的效果。

编辑：更多背景知识，虽然我不认为这是一个确切的 XY 问题。

我现在有一个系统，可以在其中突出显示已通过使用`span:target`. 问题是这一次只能做一个跨度，我希望专门链接到同一页面上的多个文本段。此外，这些段彼此之间*以及*与我不想突出显示的文本不连续。也就是说，给定 XYZXYZ 的序列，然后我希望突出显示 X 文本（*如果*它被链接到）和 Z 文本（如果它被链接到），但绝不是 Y 文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:20:10.403

那不管用。HTML 是分层的，因此您不能将元素拆分为不相交的部分。

此外，就其本质而言，跨度是连续的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:22:54.073

我假设您指的是想要在文本中间使用不同的格式？

如果你的 HTML 看起来像这样：

```
<span id="mySpan">Lorem Ipsum Dolor</span> 
```

你想要`Ispum`不同的风格，你可以这样做：

```
<span id="mySpan">Lorem <span>Ipsum</span> Dolor</span> 
```

然后为这个“内部跨度”设置压倒一切的样式：

```
span#mySpan span
{
   //styles for inner span text here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:57:25.697

链接到包含元素并使用后代选择器。

```
span:target span.highlightMe {} 
```

# android - android：如何启动库项目中定义的活动

> ID：10010013
> 
> 赞同：4
> 
> 时间：2012-04-04T11:17:18.537
> 
> 标签：android, android-activity, android-library

我正在开发一个使用 androidVNC Viewer 作为库项目的 android 应用程序，但我无法从 androidVNC 启动一个活动（未找到活动异常）。

另外，我如何捆绑一个库项目并将其用作一个 apk？

**更新**

我正在使用以下意图调用：

```
Intent call= new Intent("android.androidVNC.androidVNC.LAUNCH");
startActivity(call); 
```

***使用以下代码后更新 2*** 我想我可以开始活动但得到**这个**（java.lang.NoSuchFieldError：android.androidVNC.R$id.textIP）错误......

```
Intent vnc_call = new Intent(getApplicationContext(), androidVNC.class);
            vnc_call.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(login); 
```

在我检查了 R.java、androidVNC original 和 androidVNC 用作库时（在生成的 java 文件下）......我得到的是**textip 在原始 R.java 中有**但它不在**R.java 中（生成java 文件）在调用项目**中。

**logcat 的 O/P（前几行）**

* * *

```
04-05 01:34:18.135: W/dalvikvm(479): 无法解析 Landroid/androidVNC/AbstractConnectionBean 的超类；(256)
04-05 01:34:18.135: W/dalvikvm(479): 类 'Landroid/androidVNC/AbstractConnectionBean;' 的链接 失败的
04-05 01:34:18.135: W/dalvikvm(479): 无法解析 Landroid/androidVNC/ConnectionBean 的超类；(8)
04-05 01:34:18.135: W/dalvikvm(479): 类 'Landroid/androidVNC/ConnectionBean;' 的链接 失败的
04-05 01:34:18.145: W/dalvikvm(479): VFY: 找不到签名中引用的类 (Landroid/androidVNC/ConnectionBean;)
04-05 01:34:18.155: W/dalvikvm(479): 无法解析 Landroid/androidVNC/AbstractConnectionBean 的超类；(256)
04-05 01:34:18.155: W/dalvikvm(479): 类 'Landroid/androidVNC/AbstractConnectionBean;' 的链接 失败的
04-05 01:34:18.155: W/dalvikvm(479): 无法解析 Landroid/androidVNC/ConnectionBean 的超类；(8)
04-05 01:34:18.155: W/dalvikvm(479): 类‘Landroid/androidVNC/ConnectionBean;’的链接 失败的
04-05 01:34:18.187: W/dalvikvm(479): 无法解析 Landroid/androidVNC/AbstractConnectionBean 的超类；(256)
04-05 01:34:18.187: W/dalvikvm(479): 类 'Landroid/androidVNC/AbstractConnectionBean;' 的链接 失败的
04-05 01:34:18.187: W/dalvikvm(479): 无法解析 Landroid/androidVNC/ConnectionBean 的超类；(8)`

04-05 01:34:18.135: W/dalvikvm(479): 无法解析 Landroid/androidVNC/AbstractConnectionBean 的超类；(256)
04-05 01:34:18.135: W/dalvikvm(479): 类 'Landroid/androidVNC/AbstractConnectionBean;' 的链接 失败的
04-05 01:34:18.135: W/dalvikvm(479): 无法解析 Landroid/androidVNC/ConnectionBean 的超类；(8)
04-05 01:34:18.135: W/dalvikvm(479): 类 'Landroid/androidVNC/ConnectionBean;' 的链接 失败的
04-05 01:34:18.145: W/dalvikvm(479): VFY: 找不到签名中引用的类 (Landroid/androidVNC/ConnectionBean;)
04-05 01:34:18.155: W/dalvikvm(479): 无法解析 Landroid/androidVNC/AbstractConnectionBean 的超类；(256)
04-05 01:34:18.155: W/dalvikvm(479): 类 'Landroid/androidVNC/AbstractConnectionBean;' 的链接 失败的
04-05 01:34:18.155: W/dalvikvm(479): 无法解析 Landroid/androidVNC/ConnectionBean 的超类；(8)
04-05 01:34:18.155: W/dalvikvm(479): 类‘Landroid/androidVNC/ConnectionBean;’的链接 失败的
04-05 01:34:18.187: W/dalvikvm(479): 无法解析 Landroid/androidVNC/AbstractConnectionBean 的超类；(256)
04-05 01:34:18.187: W/dalvikvm(479): 类 'Landroid/androidVNC/AbstractConnectionBean;' 的链接 失败的
04-05 01:34:18.187: W/dalvikvm(479): 无法解析 Landroid/androidVNC/ConnectionBean 的超类；(8)

```

任何线索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T11:30:32.247

即使库项目有自己的 AndroidManifest.xml，它的内容也不会添加到您的构建中。如果您打算使用库中包含的通常在清单中声明的​​任何内容，则必须将它们复制到您的实际应用程序清单中。这包括活动、广播接收器、服务、权限等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T15:26:58.927

假设 lib 和 app 具有不同的命名空间：

当按照 mah 的描述将 lib-manifest-info 与 app-manifest 合并时，您是否在活动中包含了不同的命名空间？

```
 <application ... >
        <activity
            android:name=".MyActivity" >... 
```

至

```
 <application ... >
        <activity
            android:name="my.namespace.MyActivity" >... 
```

使用最新的 eclipse-android 工具 1.7 也可能有所帮助。有关详细信息，请参阅[how-to-consume-reusable-gui-element-widget-with-resources-in-android](https://stackoverflow.com/questions/9721860/how-to-consume-reusable-gui-element-widget-with-resources-in-android)

# android - 如何在 android Listview 中使用 LinearLayout 而不是 CheckedTextView

> ID：10010014
> 
> 赞同：1
> 
> 时间：2012-04-04T11:17:26.107
> 
> 标签：android, android-listview

我想用 LinearLayout 项目实现列表视图（它将包含 CheckedTextView 和多个文本视图）。
所以我想在 ListView 中使用 LinearLayout 而不是 CheckedTextView。我试过了，但单选按钮状态没有改变。
我的代码：

```
 getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    getListView().setItemsCanFocus(false);
    setListAdapter(new ArrayAdapter(this,R.layout.list_item,android.R.id.text1,COUNTRIES)); 
```

项目清单

```
 <CheckedTextView
        .....
        /> 
```

我想要这个
list_item_new

```
<LinearLayout>
        .....
        <CheckedTextView/>
        <TextView/>
.....
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:35:29.760

如果要自定义列表项的显示方式，则需要实现自己的适配器。它比你想象的要简单得多。这是您的基本代码：

```
public class MyAdapter extends BaseAdapter {
    List myData;
    Context context;

    public MyAdapter(Context ctx, List data) {
        context = ctx;
         myData = data;
    }

    public int getCount() { return myData.size(); }

    public Object getItem(int pos) { return myData.itemAt(pos); }

    public int getItemId(int pos) { return pos; }

    public View getView(int position, View convertView, ViewGroup parent) {
        //this is where you create your own view with whatever layout you want
        LinearLayout item;
        if(convertView == null) {
            //create/inflate your linear layout here
            item = ...;
        }
        else {
            item = (LinearLayout) convertView;
        }

        //now create/set your individual components inside your layout based on your element
        //at the requested position
        ...
    }
} 
```

这就是它的全部。

# model-view-controller - Codeigniter URL / HMVC 歧义

> ID：10010015
> 
> 赞同：2
> 
> 时间：2012-04-04T11:17:29.033
> 
> 标签：model-view-controller, codeigniter, hmvc

如果我使用wireddesign的HMVC扩展在codeigniter中有以下结构，会发生什么？

**模块**：黄页 **控制器**：黄页 **方法**：列表

**模块**：黄页 **控制器**：列表 **方法**：索引

如果我访问 URL`www.site.com/yellowpages/listing`会发生什么？它会路由到控制器中的`listing`方法`yellowpages`还是路由到`listing`控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-13T09:38:49.547

我检查了这种情况，我得到了这将调用的答案

**模块：**黄页**控制器：**列表**方法：**索引

在 CI 中，它首先检查控制器并获取列表控制器，即具有索引功能的列表控制器

在这里，您需要将模块名称更改为小写，否则会出现找不到 url 的页面错误：www.site.com/yellowpages/listing 或者您可以将 url 更改为 www.site.com/Yellowpages/listing。但大多数情况下，我们使用小写的 url。

# c - linux 套接字编程中的选择调用

> ID：10010019
> 
> 赞同：0
> 
> 时间：2012-04-04T11:17:46.573
> 
> 标签：c, sockets, select

在大多数 Unix 系统中，键入 ctrl-d 表示标准输入上的 EOF。如果在调用 select 时对程序输入 ctrl-d 会发生什么？这里的 Select 是参考 C 中基于事件的 Socket 编程。

```
select(maxfd+1, &readfds, NULL, NULL, NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:23:22.370

如果关闭了文件描述符，则 select 将返回并指示文件描述符已准备好被读取。随后的读取将返回 0，表示文件结束条件。

# android - InApp 建设。我无法为应用设置价格或创建应用内产品列表

> ID：10010022
> 
> 赞同：0
> 
> 时间：2012-04-04T11:17:49.330
> 
> 标签：android, google-checkout, in-app-billing, google-play

不是一个编程问题，而是一个 Google Play 问题。

**我已经上传了一个未发布**的 InApp 应用程序，我想用我自己的产品对其进行测试。

它似乎与**保留的产品 ID** ( `android.test.purchased`, `android.test.canceled`...) 一起工作正常。我已经设置了正确的权限。我还使用同一个 Google 帐户（电子邮件）创建了一个**Google Checkout 商家帐户。**

我的问题是我无法使用计费。我无法为应用设置价格（只是免费），也无法添加应用内产品，因为**应用内产品**链接未按[所述](http://developer.android.com/guide/market/billing/billing_admin.html)显示。

那我该如何测试 InApp Billing？

PS：今天我的账号刚刚获批，有什么重要的吗？

罗马尼亚是否支持 InApp 计费？

# jquery - 使用 jQuery() 浮动 div

> ID：10010030
> 
> 赞同：0
> 
> 时间：2012-04-04T11:18:50.567
> 
> 标签：jquery, css

你好朋友我设计了一个浮动 div 并且它工作得很好但由于某些原因我不想在我的代码中使用`position:relative`或`position:absolute`

```
$(window).scroll(function () {

        var topWindowPosition = $(window).scrollTop();
        var leftWindowPosition = $(window).scrollLeft();
        var topLeftNavHeight = 200;
        if (topWindowPosition >= topLeftNavHeight) {
            $("#scroll").css({ top: topWindowPosition - topLeftNavHeight, left: 0, position: 'relative' });
        } else {
            $("#scroll").css({ top: 0, left: 0, position: 'relative' });
        }
        $("#scroll").forceRedraw();
    }); 
```

您还可以在此处查看工作演示

[http://jsfiddle.net/9E225/1/](http://jsfiddle.net/9E225/1/)

我可以在不使用职位的情况下做出同样的效果吗？请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:22:22.790

当然，只需使用`margins`而不是`positions`. 例如：

```
if (topWindowPosition >= topLeftNavHeight) {
    $("#scroll").css({ marginTop: topWindowPosition - topLeftNavHeight, marginLeft: 0});
} else {
    $("#scroll").css({ marginTop: 0, marginLeft: 0 });
} 
```

jsfiddle：http: [//jsfiddle.net/9E225/2/](http://jsfiddle.net/9E225/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:34:44.330

我不知道你对这种方法感觉如何。当元素超出滚动元素时，它会将元素捕捉到位，并在返回时立即返回。这种方法的主要优点是您的`#scroll`元素不会在每个触发的滚动事件上“跳回”并重新定位自己。

[示例](http://jsfiddle.net/PtmWe/)| 代码

```
var $el = $("#scroll");
var original_top = $el.position().top;

$(window).scroll(function () {
    //Scrolled past element
    if($(window).scrollTop() >= original_top){
        //Add hooked element, if it's not already hooked
        if(!$el.hasClass("hooked")) $el.addClass("hooked");
    }else if($(window).scrollTop() <= original_top){
        //Scrolled up before element, remove hooking and return back to normal
        if($el.hasClass("hooked")) $el.removeClass("hooked");
    }
}); 
```

CSS

```
.hooked{
    position: fixed;
    top: 0;
    left: 0;
} 
```

另外，我建议您看看[这个“JQuery Waypoints”库](http://imakewebthings.com/jquery-waypoints/)。它的运行方式与上述代码相同，但功能更多。:)

# asp.net - 虚拟计算机上的 IIS

> ID：10010031
> 
> 赞同：1
> 
> 时间：2012-04-04T11:18:52.203
> 
> 标签：asp.net, iis, iis-7, virtual-machine

我是新来的。我正在开发一些 Asp.Net 应用程序，我想在我的虚拟 IIS 上测试它们。我在 VmWare 虚拟计算机上安装了 Windows 7 并启用了 IIS 功能。我正在使用 IIS 7 推荐配置，并且我的虚拟计算机具有真实的 Internet 网络 IP。我想通过将虚拟计算机的 IP 写入浏览器来浏览我的网站。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:22:53.417

首先确保你的 VMWare 机器有一个允许它访问主机的网络接口。因此，换句话说：两台机器（主机和虚拟机）必须能够在网络上“看到”对方。

接下来，在虚拟机上打开一个 Cmd 窗口并执行`ipconfig`. 这将告诉您虚拟机的 IP 地址。

接下来，ping 该 IP 地址。它应该工作。

如果是这样，请尝试通过在主机上的浏览器中键入 IP 地址来访问虚拟机上的网站。

# .net - 如何使用 linq 将这样的 xml 解析为对象

> ID：10010036
> 
> 赞同：1
> 
> 时间：2012-04-04T11:19:15.613
> 
> 标签：.net, xml, linq, linq-to-xml

我将 xml 作为对服务的响应，我不想将其解析为键值属性对象。但它不工作。响应 - 我想要名称作为 Key prop 和 value 作为对象的 value prop 的对象。

```
<lst name="industry">
  <int name="Accounting">3</int> 
  <int name="Engineering">0</int> 
  <int name="Human Resources and Adminstration">0</int> 
  <int name="Software/IT">0</int> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:23:48.330

您可以使用 Linq-Xml 来选择`int`元素和 Linq-Objects 的`ToDictionary()`扩展方法来选择属性作为键和元素的值作为字典中的值：

```
var xml = @"<lst name=""industry"">
  <int name=""Accounting"">3</int>
  <int name=""Engineering"">0</int>
  <int name=""Human Resources and Adminstration"">0</int>
  <int name=""Software/IT"">0</int>
  </lst>";

var dict =
    XDocument.Parse(xml)
    .Root
    .Elements("int")
    .ToDictionary(xe => xe.Attribute("name").Value, xe => int.Parse(xe.Value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:30:20.663

您的 XML 格式不正确。我相信这就是您的 XML 的外观吗？

```
<lst name="industry">
 <int name="Accounting">3</int> 
 <int name="Engineering">0</int> 
 <int name="Human Resources and Adminstration">0</int> 
 <int name="Software/IT">0</int> 
</lst> 
```

对于这种情况，你可以做..

```
XDocument result = XDocument.Load(new StringReader("<lst name=\"industry\">" + 
                                                           "<int name=\"Accounting\">3</int>" + 
                                                           "<int name=\"Engineering\">0</int>" +
                                                           "<int name=\"Human Resources and Adminstration\">0</int>" +
                                                           "<int name=\"Software/IT\">0</int>" + 
                                                           "</lst>"));            

        var tmpTable = (from i in result.Descendants("int")
                        select new
                        {
                            Key = i.Attribute("name"),
                            Value = i.Value
                        }).ToDictionary(t => t.Key, t => t.Value); 
```

# sql - 更新现有表中的 ANSI_NULLS 选项

> ID：10010042
> 
> 赞同：15
> 
> 时间：2012-04-04T11:19:49.987
> 
> 标签：sql, sql-server-2008, clustered-index, ansi-nulls

在我们的数据库中有一个用`ANSI_NULLS OFF`. 现在我们已经使用这个表创建了一个视图。我们想为这个视图添加一个聚集索引。

在创建聚集索引时，它会显示一个错误，例如无法创建索引，因为此特定表的 ANSI_NULL 已关闭。

该表包含大量数据。所以我想在不丢失任何数据的情况下将此选项更改为 ON。

有什么办法可以改变表来修改这个选项。请提出您的建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-09T11:07:24.523

这是[在数据库管理员上交叉发布的，](https://dba.stackexchange.com/a/16230/3690)所以我也不妨从这里发布我的答案，以帮助未来的搜索者。

它可以通过使用`ALTER TABLE ... SWITCH`.

下面的示例代码

```
/*Create table with option off*/ 
SET ANSI_NULLS OFF; 

CREATE TABLE dbo.YourTable (X INT) 

/*Add some data*/ 
INSERT INTO dbo.YourTable VALUES (1),(2),(3) 

/*Confirm the bit is set to 0*/ 
SELECT uses_ansi_nulls, * 
FROM   sys.tables 
WHERE  object_id = object_id('dbo.YourTable') 

GO 

BEGIN TRY 
    BEGIN TRANSACTION; 
    /*Create new table with identical structure but option on*/
    SET ANSI_NULLS ON; 
    CREATE TABLE dbo.YourTableNew (X INT) 

    /*Metadata only switch*/
    ALTER TABLE dbo.YourTable  SWITCH TO dbo.YourTableNew;

    DROP TABLE dbo.YourTable; 

    EXECUTE sp_rename N'dbo.YourTableNew', N'YourTable','OBJECT'; 

    /*Confirm the bit is set to 1*/ 
    SELECT uses_ansi_nulls, * 
    FROM   sys.tables 
    WHERE  object_id = object_id('dbo.YourTable') 

    /*Data still there!*/ 
    SELECT * 
    FROM dbo.YourTable

    COMMIT TRANSACTION; 
END TRY 

BEGIN CATCH 
    IF XACT_STATE() <> 0 
      ROLLBACK TRANSACTION; 

    PRINT ERROR_MESSAGE(); 
END CATCH; 
```

警告：当您的表包含 IDENTITY 列时，您需要重新设定 IDENTITY 值。SWITCH TO 将重置标识列的种子，如果您对标识没有 UNIQUE 或 PRIMARY KEY 约束（例如，在 SQL 2014 中使用 CLUSTERED COLUMNSTORE 索引时），您不会立即注意到它。您需要使用 DBCC CHECKIDENT ('dbo.YourTable', RESEED, [reseed value]) 再次正确设置种子值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T04:30:40.200

不幸的是，如果不重新创建，就没有办法做到这一点。您需要创建新表`ANSI_NULLS ON`并在那里复制所有数据。

它应该是这样的：

```
SET ANSI_NULLS ON;

CREATE TABLE new_MyTBL (
....
)

-- stop all processes changing your data at this point

SET IDENTITY_INSERT new_MyTBL ON

INSERT new_MyTBL (...)   -- including IDENTITY field 
SELECT ...               -- including IDENTITY field 
FROM MyTBL 

SET IDENTITY_INSERT new_MyTBL OFF

-- alter/drop WITH SCHEMABINDING objects at this point

EXEC sp_rename @objname = 'MyTBL', @newname = 'old_MyTBL'
EXEC sp_rename @objname = 'new_MyTBL', @newname = 'MyTBL'

-- alter/create WITH SCHEMABINDING objects at this point
-- re-enable your processes

DROP TABLE old_MyTBL      -- do that when you are sure that system works OK 
```

如果有任何依赖对象，它们将在您重命名新表后立即使用。但是，如果其中一些是`WITH SCHEMABINDING`您需要的，`DROP`并且`CREATE`它们是手动的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T19:45:38.783

我尝试了上面推荐的 SWITCH 选项，但无法重新设置身份。我不知道为什么。

我使用了以下替代方法：

1.  为包含该表的数据库创建数据库快照
2.  您要更新的表的脚本表定义
3.  删除要更新的表（确保数据库快照创建成功）
4.  从从步骤 2 获得的脚本中将 SET ANSI NULL 从 OFF 更新为 ON，并运行更新的脚本。现在重新创建表。
5.  将数据库快照中的数据填充到您的表中： `SET IDENTITY_INSERT TABLE_NAME ON INSERT INTO TABLE_NAME (PK, col1, etc.) SELECT PK, col1, etc. FROM [Database_Snapshot].dbo.TABLE_NAME SET IDENTITY_INSERT TABLE_NAME OFF`
6.  手动迁移非聚集索引（从数据库快照获取脚本）

使用上述：

*   我不必担心约束和键，因为表/约束名称始终保持不变（我不需要重命名任何东西）
*   我有我的数据（快照）的备份，我可以依靠它来仔细检查是否缺少任何东西。
*   我不需要重新设定身份

我意识到如果表在其他表中被引用，删除表可能并不总是那么简单。在这种情况下，我不是这种情况。我很幸运。

# java - Maven exec 插件 - 当 classpathscope=test 时如何从 main/java 导入类

> ID：10010047
> 
> 赞同：2
> 
> 时间：2012-04-04T11:20:02.203
> 
> 标签：java, testing, maven, maven-2, exec

我有一个项目，其中主方法类“Bootstrap.class”位于 src/test 文件夹中。所以我曾经`<classpathScope>test</classpathScope>` 能够执行

```
mvn exec:java 
```

我的问题：我得到一个“java.lang.IllegalArgumentException：未知实体：”因为我正在导入位于 main/java.xml 的某些类。关于如何解决这个问题的任何想法？

这是我的Pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>eu.peadrtx</groupId>
<artifactId>register</artifactId>
<packaging>war</packaging>
<version>1.6-SNAPSHOT</version>
<name>eu.peadrtx.register</name>

<properties>
    <!-- Convenience property to set the GWT version -->
    <gwtVersion>2.4.0</gwtVersion>

    <!-- GWT needs at least java 1.6 -->
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>

    <!-- Don't let your Mac use a crazy non-standard encoding -->
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
</properties>

<!-- notwendig für einige gwt dependencies -->
<repositories>
    <repository>
        <id>gwt-maven-rewraps</id>
        <url>http://gwt-maven-rewraps.googlecode.com/hg/</url>
    </repository>
    <repository>
        <id>cobogw</id>
        <name>Maven2 Repository for cobogw library</name>
        <url>http://cobogw.googlecode.com/svn/maven2</url>
    </repository>
    <repository>
        <id>openehealth.releases</id>
        <name>Open eHealth Maven Repository</name>
        <url>http://repo.openehealth.org/maven2/releases</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
    <repository>
        <id>openehealth.snapshots</id>
        <name>Open eHealth Maven Repository</name>
        <url>http://repo.openehealth.org/maven2/snapshots</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
    <repository>
        <id>java.net</id>
        <name>java.net Maven Repository</name>
        <url>http://download.java.net/maven/2/</url>
    </repository>
    <repository>
        <id>codehaus nexus</id>
        <name>Codehaus Nexus Maven Repository</name>
        <url>https://nexus.codehaus.org/content/repositories/releases/</url>
    </repository>
    <repository>
        <id>codehaus</id>
        <name>Codehaus Maven Repository</name>
        <url>http://repository.codehaus.org</url>
    </repository>
    <repository>
        <id>jboss</id>
        <name>JBoss Maven Repository</name>
        <url>http://repository.jboss.org/nexus/content/groups/public-jboss/</url>
    </repository>
    <repository>
        <id>hapi-sf</id>
        <name>HAPI Sourceforge Repository</name>
        <url>http://hl7api.sourceforge.net/m2</url>
    </repository>
</repositories> 

<dependencies>

    ...

    <!-- dependencies for the Unit tests -->

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-dev</artifactId>
        <version>${gwtVersion}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-exec</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.1.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpcore</artifactId>
        <version>4.1.2</version>
    </dependency>
    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20080701</version>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.8.5</version>
    </dependency>       
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.15.0</version>
    </dependency>

</dependencies>

<build>
    <!-- Generate compiled stuff in the folder used for development mode -->
    <outputDirectory>target/www/WEB-INF/classes</outputDirectory>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>src/test/resources</directory>
            <filtering>true</filtering>
        </testResource>
    </testResources>
    <plugins>
        <plugin>
            <groupId>org.bsc.maven</groupId>
            <artifactId>maven-processor-plugin</artifactId>
            <version>2.0.5</version>
            <executions>
                <execution>
                    <id>process</id>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <phase>generate-sources</phase>
                </execution>
            </executions>
        </plugin>

        <!-- GWT Maven Plugin -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>2.4.0</version>
            <dependencies>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-user</artifactId>
                    <version>${gwtVersion}</version>
                </dependency>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-dev</artifactId>
                    <version>${gwtVersion}</version>
                </dependency>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-servlet</artifactId>
                    <version>${gwtVersion}</version>
                </dependency>
            </dependencies>
            <!-- JS is only needed in the package phase, this speeds up testing -->
            <executions>
                <execution>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>compile</goal>
                        <goal>test</goal> 
                     </goals>
                </execution>  
            </executions>

            <!-- Plugin configuration. There are many available options, see gwt-maven-plugin 
                documentation at codehaus.org -->

            <!-- add gwt:18n and gwt:css configuration see -> http://mojo.codehaus.org/gwt-maven-plugin/i18n-mojo.html#i18nConstantsBundles -->
            <configuration>
                <extraJvmArgs>-javaagent:target/www/WEB-INF/lib/lombok-0.10.8.jar=ECJ -XX:MaxPermSize=384m -Xmx512m -Xss124m</extraJvmArgs>
                <!-- URL that should be automatically opened in the GWT shell (gwt:run). -->
                <runTarget>Register.html</runTarget>
                <!-- Location of the develop-mode web application structure (gwt:run). -->
                <hostedWebapp>target/www</hostedWebapp>
                <!-- Ask GWT to create the Story of Your Compile (SOYC) (gwt:compile) -->
                <compileReport>true</compileReport>
                <module>eu.paedrtx.register.Register</module>
                <logLevel>INFO</logLevel>
                <style>${gwt.style}</style>
            </configuration>
        </plugin>

        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>exec-maven-plugin</artifactId>
          <version>1.2.1</version>
          <executions>
            <execution>
              <id>my-execution</id>
              <phase>prepare-package</phase>
              <goals>
                <goal>java</goal>
              </goals>
            </execution>
          </executions>
          <configuration>
            <mainClass>eu.paedrtx.register.server.utility.Bootstrap</mainClass>
            <classpathScope>test</classpathScope>
          </configuration>
        </plugin>

        <!-- Add source folders to test classpath in order to run gwt-tests as 
            normal junit-tests -->
        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <additionalClasspathElements>
                    <additionalClasspathElement>${project.build.sourceDirectory}</additionalClasspathElement>
                    <additionalClasspathElement>${project.build.testSourceDirectory}</additionalClasspathElement>
                </additionalClasspathElements>
                <useManifestOnlyJar>false</useManifestOnlyJar>
                <forkMode>always</forkMode>
                <!-- Folder for generated testing stuff -->
                <systemProperties>
                    <property>
                        <name>gwt.args</name>
                        <value>-out ${project.build.directory}/${project.build.finalName}</value>
                    </property>
                </systemProperties>
            </configuration>
        </plugin>
        <!-- Copy static web files before executing gwt:run-->
        <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.4.2</version>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>copy-resources</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>target/www</outputDirectory>
                        <resources>
                            <resource>
                                <directory>src/main/webapp</directory>
                            </resource>
                        </resources>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </execution>
            </executions>
        </plugin>
         <!-- Delete gwt generated stuff -->
        <plugin>
            <artifactId>maven-clean-plugin</artifactId>
            <version>2.3</version>
            <configuration>
            <filesets>
                <fileset><directory>src/main/webapp/register</directory></fileset>
                <fileset><directory>src/main/webapp/WEB-INF/classes</directory></fileset>
                <fileset><directory>tomcat</directory></fileset>
                <fileset><directory>www-test</directory></fileset>
                <fileset><directory>.gwt-tmp</directory></fileset>
            </filesets>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.7</version>  <!--  Note 2.8 does not work with AspectJ aspect path -->
            <configuration>
                <downloadSources>true</downloadSources>
                <downloadJavadocs>false</downloadJavadocs>
                <wtpversion>2.0</wtpversion>
                <additionalBuildcommands>
                <buildCommand>
                   <name>com.google.gwt.eclipse.core.gwtProjectValidator</name>
                </buildCommand>
                </additionalBuildcommands>
                <additionalProjectnatures>
                    <projectnature>com.google.gwt.eclipse.core.gwtNature</projectnature>
                </additionalProjectnatures>
            </configuration>
         </plugin>
    </plugins>
</build> 
```

堆栈跟踪：

```
[INFO] --- exec-maven-plugin:1.2.1:java (default-cli) @ register ---
[WARNING] 
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.IllegalArgumentException: Unknown entity: eu.paedrtx.register.server.domain.PaymentDetails
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:675)
    at eu.paedrtx.register.server.repository.Repository.create(Repository.java:54)
    at eu.paedrtx.register.server.utility.Bootstrap.main(Bootstrap.java:75)
    ... 6 more
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 6.299s
[INFO] Finished at: Wed Apr 04 13:04:14 CEST 2012
[INFO] Final Memory: 9M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project register: An exception occured while executing the Java class. null: InvocationTargetException: Unknown entity: eu.paedrtx.register.server.domain.PaymentDetails -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project register: An exception occured while executing the Java class. null
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: An exception occured while executing the Java class. null
    at org.codehaus.mojo.exec.ExecJavaMojo.execute(ExecJavaMojo.java:352)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.IllegalArgumentException: Unknown entity: eu.paedrtx.register.server.domain.PaymentDetails
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:675)
    at eu.paedrtx.register.server.repository.Repository.create(Repository.java:54)
    at eu.paedrtx.register.server.utility.Bootstrap.main(Bootstrap.java:75)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:45:42.900

尝试使用`exec`目标而不是`java`使用类路径参数，如此处所述[https://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html](https://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html)

这将分叉 JVM 并可能解决很多问题，尤其是使用像 Hibernate 这样的工具，这些工具可以进行非平凡的类加载。这是因为 Maven 不必使用类加载器魔法来提供正确的进程内类路径（Maven 是 java 进程本身，它以简单的类路径开始，仅包括 maven 引导 jars）。这样，它只会填充 -cp 参数，并分叉新进程：诊断简单易行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:57:11.820

我解决了这个问题。问题是我有 2 个 persistence.xml 一个用于测试/资源中的测试，另一个用于主/资源中的应用程序。我不得不删除 test/resources 中的那个，并在应用程序 persistence.xml 添加另一个持久性单元。

请参阅：[如何配置 JPA 以在 Maven 中进行测试](https://stackoverflow.com/questions/385532/how-to-configure-jpa-for-testing-in-maven)

# php - 如何从多个表制作登录脚本？

> ID：10010049
> 
> 赞同：-6
> 
> 时间：2012-04-04T11:20:10.330
> 
> 标签：php

```
> i ve got 4 separate tables to store login data.
>>> tables are  **admin_login staff_login >tutor_login student_login**.  
>>>>>> my php registration form is storing data into this fields. 
```

1.  现在我需要一些建议如何制作登录脚本？
2.  我已经准备好登录表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:28:20.463

首先，为什么有 4 张桌子？为什么没有 1 带有登录类型字段？

多个表的一般规则与一个表相同。您要检查用户名/电子邮件地址，然后检查密码。

开始查询您的表以获取用户名电子邮件地址。计算结果。如果他们是结果，则检查密码（无论您是否使用任何加密）匹配并登录。如果没有结果，则向用户发送一条消息，说明没有人匹配该用户名/电子邮件，如果密码不匹配然后告诉他们。

我不会为你写它，但这里是它的要点：

```
$query = mysql_query("CHECK FOR EMAIL ADDRESSES OR USERNAMES"); // Just query multiple tables if you're going to do it this way (I'd still use the one though)
$count = mysql_num_rows($query);

if ($count > 0) { // Email address exists
   // Check the passwords match up
   if (PASSWORDS MATCH) {
       // Do your login here
   } else {
       // Password wrong error
   }

} else {
    // No username error here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:23:37.877

您可以使用`UNION`'s 解决问题，但最好将数据库重构为单个表，其中包含一个字段，表示它们是管理员/导师等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:44:15.267

您可以先使用连接查询，也可以为所有用户创建一个统一表，其中包含如下`accessLevel`字段：用户表：

```
username | passwordHash | accessLevel
---------+--------------+------------
abc      |  mnbdjhgs    |   admin
pqr      |  kfgjkfbb    |   stud 
```

然后您可以简单地检查从腰部表格中获得的用户详细信息，例如：

```
$result = $mysqli->query("SELECT passwordHash, accesslevel FROM users WHERE username = '{$username}' ");

if($result)
{  $data = $result->fetch_assoc();
   if($data)
   {  if($password === $data['passwordHash'])
      {   //identify the user-type here..
          $accesslevel = $data['accessLevel'];

          //now u can do session initialization and other stuff..
      }
   }
}
else
{  //show wrong username or password messages
} 
```

# java - 为什么 JTabbedPane 不响应单击选项卡？

> ID：10010052
> 
> 赞同：1
> 
> 时间：2012-04-04T11:20:29.940
> 
> 标签：java, swing, jtabbedpane

我创建了一个带有 3 个选项卡的 JTabbedPane。当我切换到不同的标签时 stateChang 不响应点击。当我在 public void 中将调试标记添加到我的代码时`stateChanged(ChangeEvent e) { }`，单击后我看不到任何效果。

**可能是什么原因，我该如何解决？**

```
public class TabbedPanChangeListener implements ChangeListener {
        ConfigToolScannersPanel panel;
        List<String> artikels = GenericsUtil.makeList();
public TabbedPanChangeListener(ConfigToolScannersPanel configToolScannersPanel) {
        this.panel = configToolScannersPanel;
}

public void stateChanged(ChangeEvent e) {
    WebTabbedPane sourceTabbedPane = (WebTabbedPane) e.getSource();
    int index = sourceTabbedPane.getSelectedIndex();
    String titel = sourceTabbedPane.getTitleAt(index);
    File dirconfig  = new File("C:\\tmp\\config");
    File dirPictures = new File("C:\\tmp\\Pictures");
    File diraxi = new File("C:\\tmp\\");
    File artikels = new File("C:\\tmp\\artikels.csv");

    if (dirconfig.exists()) {
        if (titel.equalsIgnoreCase("ftp")) {                
            panel.updateUI();
        } else if (titel.equalsIgnoreCase("Picture")) {
            setSelectedFileToNull();
            BorderLayout layout = (BorderLayout) panel.pictureTabPanel.getLayout();
            panel.pictureTabPanel.remove(layout.getLayoutComponent(BorderLayout.WEST));
            panel.pictureTabPanel.add(FileList.getGui(dirPictures.listFiles(), true, panel), BorderLayout.WEST);
            panel.pictureTabPanel.remove(layout.getLayoutComponent(BorderLayout.NORTH));
            panel.pictureTabPanel.add(FileList.getGui(diraxi.listFiles(), false, panel), BorderLayout.NORTH);
            panel.pictureTabPanel.remove(layout.getLayoutComponent(BorderLayout.CENTER));

            // *** Add and remove from tool bar ***
            visibaleInvisibale(false);
            panel.btnDelete.setVisible(true);
            panel.btnDelete.setAction(new DeletePictureAction(panel));
            panel.btnAdd.setVisible(true);
            panel.btnAdd.setAction(new AddPictureAction(panel));
            panel.updateUI();
        } else if (titel.equalsIgnoreCase("dienst")) {

        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:24:02.417

您是否在代码中调用了这一行？

```
tabbedPane.addChangeListener(new TabbedPanChangeListener(configToolScannersPanel)); 
```

# logging - Firephp换行符不输出

> ID：10010056
> 
> 赞同：0
> 
> 时间：2012-04-04T11:20:36.817
> 
> 标签：logging, newline, firephp

我是firephp前萤火虫的粉丝。然而，它不输出换行符真的让我烦恼（请原谅双关语）。它使调试查询非常繁琐，因为我必须将查询复制到记事本++并手动格式化。

```
require_once(ROOT_DIR.'/includes/FirePHPCore/FirePHP.class.php');
require_once(ROOT_DIR.'/includes/FirePHPCore/fb.php');

$stringWithNewLines = "
hello world \n \n
and more and more
and

more
";

$firephp->log($stringWithnewLines);
$firephp->info($stringWithnewLines);
$firephp->warn($stringWithnewLines);
$firephp->error($stringWithnewLines); 
```

输出以下内容

![在此处输入图像描述](../Images/b355e2424c1c7832e1210004168913e7.png)

我遇到了以下 [http://code.google.com/p/firephp/issues/detail?id=30](http://code.google.com/p/firephp/issues/detail?id=30)

基本上说它不受支持并且链接到看起来不再活跃的fireconsole？有没有替代 firephp 或任何解决方法？

# javascript - 下载文件并获得完成百分比

> ID：10010057
> 
> 赞同：-2
> 
> 时间：2012-04-04T11:20:37.897
> 
> 标签：javascript, jquery

我可以检测从 2-4 MB 的大图像下载了多少字节吗？即通过下载图像的百分比通知用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:05:57.000

对于通常需要不到 15-30 秒的任何事情，颤动或虚假的进度指示器通常足以显示正在发生的事情。

如果您计划跟踪更大的下载，您可以尝试使用自定义构建 ajax 下载器进行下载，并在 XMLHTTPRequest.readystate == 3 时获取进度信息。

请参阅[http://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php](http://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php) 以开始构建自定义 ajax 下载器。

或者，让服务器跟踪您的 ajax 下载并生成单独的 ajax 调用以 ping 状态。这有点棘手，很抱歉我没有给你一个例子。

不，没有办法在普通标签上跟踪下载进度。

# javascript - 更改 div 的 id 以显示/隐藏

> ID：10010059
> 
> 赞同：0
> 
> 时间：2012-04-04T11:20:51.683
> 
> 标签：javascript, jquery, html

我的旧代码如下所示：

```
function unhide(rad) {
var id = "answer" + rad.id.replace("-", "");
var answer = document.getElementById(id);
if (answer) {
    var current = document.getElementById(currentShown);
    if (current) current.className = "hidden";
    currentShown = id;
    answer.className = "unhidden";
}
} 
```

当我的单选按钮被点击时：

```
<input class="editable" type="radio" name="q1" id="q1-a" onclick="unhide(this); scoreIncrement(this);"/>John 
```

它会取消隐藏这个 div：

```
<div id="answerq1a" class="hidden">
<p>Your answer is correct, John is 6ft2.</p>
</div> 
```

但是现在，我的单选按钮必须如下所示：

```
<input class="editable" type="radio" name="q1" id="untitled-region-1" onclick="unhide(this); scoreIncrement(this);"/>John 
```

并且我要取消隐藏的 div 具有相同的 id，但由于它们是唯一的，因此它将 1 替换为下一个数字。在我的情况下，它是 4 个 id，因此新 id 的 id 将是“untitled-region-5”，如下所示：

```
<div id="untitled-region-5" class="hidden">
<p>Your answer is correct, John is 6ft2.</p>
</div> 
```

那么如何更改此代码，以获取新的 id “untitled-region-5”并从中减去 4 以将其修复为具有新 id 的单选按钮？

```
function unhide(rad) {
var id = "answer" + rad.id.replace("-", "");
var answer = document.getElementById(id);
if (answer) {
    var current = document.getElementById(currentShown);
    if (current) current.className = "hidden";
    currentShown = id;
    answer.className = "unhidden";
}
} 
```

我正在沿着这种轨道前进：

```
function unhide2(rad) {
var id = $("div").attr('id').replace(/untitled-region-/, 'untitled-region-');
var untitled-region = document.getElementById(id);
if (untitled-region) {
    var current = document.getElementById(currentShown);
    if (current) current.className = "hidden";
    currentShown = id;
    untitled-region.className = "unhidden";
}
} 
```

但我不知道如何将 id 上的最后一位数字替换为“digit-4”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:28:57.783

你已经用 jQuery 标记了这个，所以我会给你 jQuery 的答案。

解决这个问题的正确方法不是与 id 混搭，而是链接收音机，并以其他方式关联 div，而 IMO 最好的方法是使用`data-`属性。

```
<input class="editable" type="radio" 
   name="q1" id="q1-a" data-answerId="untitled-region-5"/>John 
```

然后你的 javascript 就变得简单了——因为：

```
$('.editable').click(function(){
   $('#' + currentShown).removeClass('unhidden').addClass('hidden');
   var answerId = $(this).data('answerId');
   $('#' + answerId).removeClass('hidden').addClass('unhidden');
}); 
```

尽管我敦促您不要使用`unhidden`,`hidden`混淆并使用`.show()`and `.hide()`！

# entity-framework-4.3 - 实体框架代码优先 - 删除迁移表？

> ID：10010060
> 
> 赞同：3
> 
> 时间：2012-04-04T11:20:54.570
> 
> 标签：entity-framework-4.3, entity-framework-migrations

在 EF Migrations (V 4.1) 之前，如果我想为一个实体创建一个新的属性/列，我可以在我的开发机器上“作弊”很容易：

我会在数据库中创建该列，然后将该属性添加到我的实体中——它有效，我不必重新创建我的数据库。

同样的“作弊”不再适用于 V4.3。我还能以某种方式使用 V 4.3 做到这一点，例如删除迁移表或做一些其他技巧 - 严格来说是为了快速开发过程吗？

谢谢你

# sql-server-2008 - 登录 SQL Server 时出错

> ID：10010062
> 
> 赞同：22
> 
> 时间：2012-04-04T11:21:02.883
> 
> 标签：sql-server-2008, login

当我想连接到 SQL Server 2008 时，我收到以下消息：

> 无法连接到服务器。
> 附加信息：无法打开用户默认数据库。登录失败。用户“sa”登录失败。（Microsoft SQL Server。错误：4064）

如何解决此错误？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-04T11:52:22.840

`Microsoft SQL Server.Error:4064`当删除的数据库是某些数据库用户的默认数据库时，会发生此错误 ( )。

当用户尝试登录并且他们的默认数据库被删除时，会出现错误。

> 无法打开用户默认数据库。登录失败。用户“用户名”登录失败。（Microsoft SQL Server，错误：4064）

[这里](http://blog.sqlauthority.com/2008/11/04/sql-server-fix-error-4064-cannot-open-user-default-database-login-failed-login-failed-for-user/)给出了解决这个问题的方法，总结如下。

登录的解决方法是：

1.  在**连接到服务器**对话框中，单击**选项**
2.  更改**连接到数据库的值：**到服务器上的任何有效数据库

修复服务器的永久解决方案是运行 SQL，如：

```
ALTER LOGIN [test] WITH DEFAULT_DATABASE = master
GO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-23T07:21:40.323

在我的情况下，这是由于用户是多个组的成员，每个组都有自己的登录名。所有组的登录都需要将其默认数据库设置为用户可访问的数据库。

[https://support.microsoft.com/en-us/kb/307864](https://support.microsoft.com/en-us/kb/307864)中列出了其他可能的问题。

您可以使用无效的默认数据库将每个登录设置为具有 master 的默认数据库（所有登录均可访问）：

```
alter login [loginname] with DEFAULT_DATABASE = master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T04:58:29.050

用户默认数据库在连接时不可用，因此将弹出此错误消息。请检查您标记给该特定用户以访问的服务器是在线还是离线模式。

# windows - 使用类似 Bash 的语法在 Windows 上实现自动化

> ID：10010063
> 
> 赞同：1
> 
> 时间：2012-04-04T11:21:09.623
> 
> 标签：windows, bash, shell, automation

有没有办法我们可以用 bash 语法编写自动化脚本并在 Windows 主机上运行（我们可以调用 Windows 的可执行文件 .exe）。Windows 批处理语法看起来相当复杂：D

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T11:32:04.497

为此，您可以使用[cygwin](http://www.cygwin.com/)或 mingw sys。

它们都只是 WinXX 上可用的 BASH 实现（实际上它们更多，但您现在只需要 bash）。但是有一些区别：

*   cygwin 使用自己的文件系统层次结构，Win 驱动器映射到一个部件。子目录。所有与文件名相关的都是 unix 风格。将路径名传递给 Windows 程序存在一些问题。

*   MinGW 对 Windows 更友好，文件路径与 Windows 类似，Windows 原生程序的问题更少。

你应该尝试自己并选择你需要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:27:04.660

您可以安装 cygwin 并运行 bash。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T12:31:09.567

你可以得到一个 bash 的 win32 端口。Cygwin 是巨大的，但可以拥有本机 Windows bash 和一些实用程序，但占用空间要小得多。

[从UnxUtils](http://sourceforge.net/projects/unxutils/)开始，其中包括一个`sh`基于`zsh`（虽然它很慢）。

如果这还不够，您可以从[某些](http://win-bash.sourceforge.net/) [地方](http://www.steve.org.uk/Software/bash/)获得一个 win32 bash ，尽管大多数是旧版本。

# android - 当我需要使用活动上下文时如何避免静态上下文引用？

> ID：10010073
> 
> 赞同：1
> 
> 时间：2012-04-04T11:21:46.243
> 
> 标签：android, static, android-context

阅读本主题[避免内存泄漏](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)后，会引起一些疑问。

如果我需要使用活动上下文（例如：膨胀`PopupWindow`类中的视图以显示弹出窗口），我如何保持实际活动的上下文来执行它？如果我需要避免静态上下文引用，唯一的方法是在我的类中创建一个属性？而所有其他类我都需要我需要的实际活动上下文吗？

更新-

我想在许多不继承上下文的类中使用这个实际的活动上下文，就像我在我的应用程序类中使用应用程序上下文一样，它有一个名为`getApplicationContext()`声明的静态方法。此方法遵循单例设计模式并且工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:05:38.457

使用您在评论中链接的代码，为什么不这样做：

```
//my main activity
public class ExampleStaticReferenceActivity extends Activity {
        //...

    public void methodCalledWhenUserPressesButton(){
        LinearLayout masterLayout = (LinearLayout) findViewById(R.id.masterLayout);
        //now passing a reference to the current activity - elevine
        masterLayout.addView(ButtonCreator.createButton(this));
    }
}

//this class is in another package
public class ButtonCreator {
        //added a Context parameter - elevine
        public static Button createButton(Context context) {
                Button button;

                button = new Button(context);
                //... some configurations for button
                return button;
        }      

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:25:24.087

这将使您的应用程序崩溃，因为您的活动将在资源耗尽时被操作系统杀死，因此上下文也将为空。当您想在前台活动中显示弹出窗口时，提供后台活动实例毫无意义.. 什么博客说是避免传递活动。即使 getApplicationContext() 也可以完成这项工作..

# javascript - Javascript DOM 鼠标事件不适用于 IE 和 Mozilla

> ID：10010077
> 
> 赞同：1
> 
> 时间：2012-04-04T11:22:01.357
> 
> 标签：javascript, dom, file-upload

处理自定义文件上传应用程序。我有两个主要问题：

1.  下面给出的代码不是为 Mozilla 和 IE 打开文件对话框。
2.  在 Chrome 中它可以工作，但是当我在第一次单击时选择文件时，它永远不会将文件添加到正文中。但是在第二次单击时，它将在第一次单击中浏览的文件添加到正文中。

对上述问题的任何帮助将不胜感激。

```
功能 perform1Click(节点) {

            警报（“初始化”）；
            var evt = document.createEvent("MouseEvents");
            evt.initEvent("点击", true, false);
            node.dispatchEvent(evt);

            警报(3)
            获取文件（evt）；

        }

        函数获取文件（事件）{

            var 文件 = event.target.files;
            变量总大小 = 0;

            如果（总大小> 1024 * 10）{

                alert('总大小超过 1 Mb。');
                返回;
            }
            //警报（文件）
            //警报（文件长度）；
            for (var i = 0, f; f = files[i]; i++) {

                显示文件列表（f.name，f.size）；
                总尺寸=总尺寸+f.size；
            }
        }

        函数显示文件列表（名称，大小）{

            如果（名称！=''）{

                var top_plugin = document.getElementById('top_plugin');

                // 创建标签
                var ptag = document.createElement("p");

                // 创建 div
                var divBox = document.createElement("div");
                divBox.setAttribute('class', 'divBox');

                // 创建输入[type='checkbox']
                var inputCheckBox = document.createElement("input");
                inputCheckBox.setAttribute('type', 'checkbox');
                inputCheckBox.setAttribute('id', 'checkboxClass')

                // 将复选框添加到 div。
                divBox.appendChild(inputCheckBox);

                // 为 divBox 创建文本节点并将其添加到 divBox。
                var txtNode = document.createTextNode(name);
                divBox.appendChild(txtNode)

                var sizeDivBox = document.createElement("p");
                sizeDivBox.setAttribute('style', 'clear:both; display: inline-block;');

                var txtSizeNode = document.createTextNode(size);
                sizeDivBox.appendChild(txtSizeNode);
                divBox.appendChild(sizeDivBox);

                // 将 divBox 添加到 ptag。
                ptag.appendChild(divBox);
                //ptag.appendChild(divTxt);

                // 添加 ptag 到 top_plugin div。
                top_plugin.appendChild(ptag);
            }

            // 如果文件值不为空，则设为空白。
            如果（名称！=''）
            {
                名称 = '';
            }
        }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T05:36:34.657

我得到了相同问题的解决方案。请在下面找到新代码。

```
 function uploadDFiles() {

        var file = document.getElementById('_file');
        file.click();

        try {
            file.addEventListener("change", getFileName);
        }
        catch (e) {
            file.attachEvent("onclick", getFileNameOnIE);
            alert("Error:: "+e.description);
        }
    }

    function getFileName(event) {

        var files = event.target.files;
        for (var i = 0, f; f = files[i]; i++) {

            var fileName = f.name;
            var fileSize = f.size;

            var fSize = bytesToSize(fileSize, 2);

            displayFileList(fileName, fSize);
        }
    } 
```

但现在我有新的问题。此代码在 IE 中不起作用。对于 IE，我使用的是 attachEvent 方法，但它不起作用。请在下面找到代码：

```
 function getFileNameOnIE(event) {

        alert(event.type);
        var files = event.target;
        alert(files.length);

        for (var i = 0, f; f = files[i]; i++) {

            displayFileList(f.name, f.size);
        }
    } 
```

有人现在可以为我提供相同的解决方案吗？

--

Tks 巴拉特

# ruby-on-rails - 在这种情况下如何防止 DELETE HTTP 请求成功？

> ID：10010078
> 
> 赞同：2
> 
> 时间：2012-04-04T11:22:04.073
> 
> 标签：ruby-on-rails

Rails初学者在这里..

我有一个用户资源，我在其中实现了一个回调，该回调应该防止管理员用户删除自己。

```
before_filter :admin_no_delete,    only: :destroy

def admin_no_delete 
  admin_id = current_user.id if current_user.admin?
  redirect_to root_path if params[:id] == admin_id 
end 
```

如果这对某些人来说看起来很熟悉，它来自 Michael Hartl 的 rails 教程，[练习 #10 这里](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users?version=3.2#sec%3aupdating_deleting_exercises)但我尝试以不同的方式进行操作，而不是按照他的建议。

我的（蹩脚的）测试失败了

```
 describe "deleting herself should not be permitted" do
      before do
        delete user_path(admin) 
      end
      it { should_not redirect_to(users_path) }
    end 
```

但是为管理员用户公开一个删除链接只是为了测试并单击该链接，看起来回调实际上成功执行（重定向到root_path）。

我能够使用 jQuery 调用销毁操作来删除受回调保护的记录（使用 Web Inspector 的 javascript 控制台）：

```
$.ajax({url: 'http://localhost:3000/users/104', type: 'DELETE', success: function(result){alert(result)} }) 
```

寻找有关如何防止 DELETE HTTP 请求在这种情况下成功的想法。还有关于如何正确测试这种情况的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:00:43.200

您正在比较`admin_id`，一个整数与`params[:id]`。中的值`params`始终是字符串（或包含更多字符串的数组/哈希），因此比较总是会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:01:02.040

简单：`params[:id]`是一个字符串，`admin_id`而是一个 Fixnum。您可以按如下方式更改它，它应该可以工作：

```
redirect_to root_path if params[:id].to_i == admin_id 
```

不过，您使用的逻辑对我来说似乎有点奇怪。如果仅用于一个操作，为什么要使用 before 过滤器，为什么要更改重定向？我认为逻辑应该直接在销毁动作中，看起来像这样：

```
def destroy
  unless current_user.admin? && current_user.id == params[:id].to_i
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed."
  end
  redirect_to users_path
end 
```

# iphone - iphone秒表圈分裂

> ID：10010081
> 
> 赞同：0
> 
> 时间：2012-04-04T11:22:25.180
> 
> 标签：iphone, ios

我想**拆分计时器** 意味着当计时器运行时，当点击按钮时，计时器下方会有一个按钮**，记录当前计时器时间**，计时器继续从那个点开始，这个过程重复

例如秒表圈恢复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:46:59.327

我是直线解决方案的倡导者。

```
#import <mach/mach_time.h>

...
NSMutableArray *_stampsArray = [[NSMutableArray alloc] initWithCapacity: 10]; 
```

在每次“按圈”时保存当前系统时间

```
[_stampsArray addObject: [NSNumber numberWithUnsignedLongLong: mach_absolute_time()]; 
```

最后计算单圈时间

```
unsigned int lap = ... // 1 .. n
static struct mach_timebase_info timebase_info;
if(timebase_info.denom == 0) {
  mach_timebase_info(&timebase_info);
}
unsigned long long _timeStampStart = [_stampsArray objectAtIndex: lap -1];
unsigned long long _timeStampStop  = [_stampsArray objectAtIndex: lap];
unsigned long long _timeInterval = _timeStampStop - _timeStampStart;
_timeInterval *= timebase_info.numer;
_timeInterval /= timebase_info.denom;

_timeInterval /= 1000*1000*10; // resolution will be 1/100 sec. now 
```

要显示结果，您可以

```
int _decimalSec = _timeInterval % 100;
int _sec = (_timeInterval / 100) % 60;
int _min = (_timeInterval / (100 * 60)) % 60;
int _hour = (_timeInterval / (100 * 60 * 60));// % 24; 
NSString* formatedAsLapTime = [NSString stringWithFormat:@"%d:%02d:%02d.%02d", _hour, _min, _sec,_decimalSec]; 
```

要显示实际经过的时间，只需计算差异

```
unsigned long long _elapsed = mach_absolute_time() - [_stampsArray objectAtIndex: 0]; 
```

并根据需要以任何定期间隔（刷新率）使用 UI 中的值。有一个使用 NSTimer 的好地方 :-)

# php - 从多维数组中获取某个数组

> ID：10010082
> 
> 赞同：0
> 
> 时间：2012-04-04T11:22:27.107
> 
> 标签：php, codeigniter

我有一个多维数组，它是一个从名为“用户”的表中返回信息的查询。在我的代码的另一部分中，我只需要获取某个用户的记录，并且我想使用上面提到的数组来获取它。它的类型：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:34:36.433

这可能是您正在寻找的：

```
$row = NULL;

foreach ($parent as $key => $child)
{

  if (1 == $child['id'])
  {
    $row = $child; break;
  }

}

if (isset($row))
{
  // Stuff to do with the chosen row
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:28:36.800

```
$main = // your array
foreach ($main as $index => $sub) {
  foreach ($sub as $subIndex => $item) {
    if ($item['id'] == xxx) {
      return $main[$index][$subIndex];
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T11:26:50.230

IMO 使用 for 循环（而不是 foreach）将使您更容易引用所需的变量（通过使用 for 循环变量在数组中查找适当的行）

高温下，

大卫

# android - 如何使用 POST 为 Parse 服务器上传图像？

> ID：10010085
> 
> 赞同：3
> 
> 时间：2012-04-04T11:22:37.707
> 
> 标签：android, image, http, post, upload

我必须使用 HTTP Post 请求上传我的图片。图像将发布到[Parse 服务器](http://www.parse.com)。

我找到了这个文档，但我不确定如何创建上传图片。我有一个http请求方法，请纠正我。

这是[文档](https://www.parse.com/docs/rest#files)。

```
public boolean uploadingFiles ( String tempFilePath ) {
        String filePath = null ;
        String fileName = null ;
        boolean flag = false ;
        try {
            filePath = tempFilePath ;
            fileName = new String ( filePath ) ;
            fileName = filePath.substring ( filePath.lastIndexOf ( "/" ) + 1 , filePath.length ( ) ) ;
        } catch ( Exception e ) {
            Log.e ( "Exception" , "uploadingFiles Message = " + e.toString ( ) ) ;
        }

        HttpClient httpclient = new DefaultHttpClient ( ) ;
        try {

            HttpPost httppost = new HttpPost ( "https://api.parse.com/1/files/" ) ;
            StringBody filename = new StringBody ( fileName ) ;
            File f = new File ( filePath ) ;
            FileBody bin = new FileBody ( f ) ;

            MultipartEntity reqEntity = new MultipartEntity ( ) ;
            reqEntity.addPart ( "X-Parse-Application-Id" , new StringBody("MY KEY" )) ;
            reqEntity.addPart ( "X-Parse-REST-API-Key" , new StringBody("My KEY" )) ;
            reqEntity.addPart ( "Content-Type:" , new StringBody("image/png" )) ;
            reqEntity.addPart ( "file:" , bin ) ;

            httppost.setEntity ( reqEntity ) ;

            System.out.println ( "executing request " + httppost.getRequestLine ( ) ) ;
            HttpResponse response = httpclient.execute ( httppost ) ;
            HttpEntity resEntity = response.getEntity ( ) ;

            System.out.println ( "----------------------------------------" ) ;
            System.out.println ( response.getStatusLine ( ) ) ;
            if ( resEntity != null ) {
                System.out.println ( "Response content length: " + resEntity.getContentLength ( ) ) ;
                InputStream is = resEntity.getContent ( ) ;
                if ( is != null ) {
                    Writer writer = new StringWriter ( ) ;

                    char [ ] buffer = new char [ 1024 ] ;
                    try {
                        Reader reader = new BufferedReader ( new InputStreamReader ( is , "UTF-8" ) ) ;
                        int n ;
                        while ( ( n = reader.read ( buffer ) ) != - 1 ) {
                            writer.write ( buffer , 0 , n ) ;
                        }
                    } finally {
                        is.close ( ) ;
                    }
                    String serverResult = writer.toString ( ) ;
                    System.out.println ( "Response content: " + serverResult ) ;
                } else {
                    System.out.println ( "Response nothing: " ) ;
                }
            }
            EntityUtils.consume ( resEntity ) ;
        } catch ( Exception e ) {
            e.printStackTrace ( ) ;
        } finally {
            try {
                httpclient.getConnectionManager ( ).shutdown ( ) ;
            } catch ( Exception ignore ) {
            }
        }
        return flag ;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:51:06.073

这是我目前使用的

```
 try
    {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bitmap.compress(CompressFormat.JPEG, 100, bos);
        byte[] data = bos.toByteArray();

        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeout);
        HttpConnectionParams.setSoTimeout(httpParameters, timeout);
        HttpClient httpClient = new DefaultHttpClient(httpParameters);

        HttpPost postRequest = new HttpPost(URL_SEND);

        ByteArrayBody bab = new ByteArrayBody(data, "Feest" + pad(random.nextInt(9999) + 1) + ".jpg");
        MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        reqEntity.addPart("Filedata", bab);
        reqEntity.addPart("dropboxId", new StringBody(URLEncoder.encode(uid)));
        postRequest.setEntity(reqEntity);

        HttpResponse response = httpClient.execute(postRequest);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String sResponse;
        StringBuilder s = new StringBuilder();

        while((sResponse = reader.readLine()) != null)
        {
            s = s.append(sResponse);
        }

        if(d) Log.i(E, "Send response:\n" + s);
    }
    catch (Exception e)
    {
        if(d) Log.e(E, "Error while sending: " + e.getMessage());
        return ERROR;
    } 
```

# android - 自定义 android 按钮的外观和感觉

> ID：10010087
> 
> 赞同：0
> 
> 时间：2012-04-04T11:22:41.280
> 
> 标签：android

![在此处输入图像描述](../Images/9386a70c2977f134e9533493c6acda99.png)

屏幕底部的两个按钮是 Scan 和 Leads，如果我们点击任何按钮，按钮的视图是可见的，就像您在图像中看到的铅按钮一样按下，此视图将根据按钮单击而改变，并且在这里，我无法为按钮创建那种外观和感觉。请向我提供示例代码或建议我实现这种外观。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:29:55.970

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/button_some_name_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/button_some_name_default"/>

</selector> 
```

把它放在你的`/drawable/`文件夹中`button_some_name.xml`

然后在你的etc中有`button_some_name_pressed.png`&`button_some_name_pressed.png``drawable-ldpi` `drawable-mdpi`

还有其他州需要考虑

参考：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:48:28.893

这是自定义按钮。自定义按钮非常容易创建，您只需为按钮的不同状态制作不同的图像并将其放入 res/drawable 文件夹中。下面的链接包含创建这个的分步描述：

[http://androidemulator.wordpress.com/2011/11/03/creating-custom-buttons-in-android-applications/](http://androidemulator.wordpress.com/2011/11/03/creating-custom-buttons-in-android-applications/)

# ios - three20：ModelView 优于 ModalView？

> ID：10010088
> 
> 赞同：0
> 
> 时间：2012-04-04T11:22:41.153
> 
> 标签：ios, three20

我的应用程序中有 Three20 的午餐视图。loginScreen 现在是一个模型视图，只有在登录正确时才会禁用。

现在我有一个关于屏幕，登录屏幕上有一个按钮。

但是如何在模态视图上使用模型视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:29:48.450

当您在登录屏幕中创建 about 屏幕按钮时，将其设置为 IBOutlet 并确保将其连接到调用您的 about 视图的方法。然后，您可以在视图堆栈 [loginscreen.view addSubview:aboutscreenView] 顶部显示您的关于屏幕，完成后，从堆栈中删除 aboutscreenView。当用户登录时，您可以删除模式视图。

# webgl - 重新使用纹理单元来处理不同纹理类型的 chrome 中断

> ID：10010089
> 
> 赞同：0
> 
> 时间：2012-04-04T11:22:45.133
> 
> 标签：webgl

查看以下测试：

[http://binks.knobbits.org/webgl/texture3.html](http://binks.knobbits.org/webgl/texture3.html)

这是对立方体纹理的简单测试。它还具有 2D 纹理，可以很好地衡量。

我发现在某些浏览器（到目前为止，chrome）中，如果我重新使用与 2D 纹理相同的纹理单元来绘制立方体纹理，则图像无法正确显示。

底部有一个复选框，标记为“为球体上的立方体纹理和地板上的 2D 纹理使用单独的纹理单元”，显示了这一点。

这是 chrome 还是我的代码中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T01:52:27.747

我看不出你的代码有什么问题，但是

1）您不能对 2 个不同的目标使用相同的纹理。换句话说，你不能这样做

```
tex = gl.createTexture();
gl.bindTexture(gl.TEXTURE_2D, tex);
gl.bindTexture(gl.TEXTURE_CUBE_MAP, tex); 
```

2) 您不能同时在纹理单元上使用 TEXTURE_2D 和 CUBE_MAP。

您可以同时分配两者，但在渲染时，您只能在着色器中引用其中之一。换句话说。

```
gl.activeTexture(gl.TEXTURE0);
tex1 = gl.createTexture();
tex2 = gl.createTexture();
gl.bindTexture(gl.TEXTURE_2D, tex1);
gl.bindTexture(gl.TEXTURE_CUBE_MAP, tex2); 
```

没关系，但是尝试使用纹理单元 0 中的两种纹理的着色器会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:13:15.740

我已经订购了一些绘图功能的代码，现在正在工作。

正方形：

```
TexturedSquare.prototype.draw = function() {
    gl.bindBuffer(gl.ARRAY_BUFFER,this.v);
    gl.enableVertexAttribArray(gl.va_vertex);
    gl.enableVertexAttribArray(gl.va_normal);
    gl.enableVertexAttribArray(gl.va_tex1pos);
    gl.vertexAttribPointer(gl.va_vertex,4,gl.FLOAT,false,10*4,0);
    gl.vertexAttribPointer(gl.va_normal,4,gl.FLOAT,false,10*4,4*4);
    gl.vertexAttribPointer(gl.va_tex1pos,2,gl.FLOAT,false,10*4,4*8);

    gl.activeTexture(gl.TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D,this.texture);
    gl.bindTexture(gl.TEXTURE_CUBE_MAP,null);

    gl.uniform1i(shader.textures,1);
    gl.uniform1i(shader.texture1,0);
    gl.uniform1i(shader.cube_textures,0);
    gl.uniform1i(shader.cubeTexture0,1);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.e);
    gl.drawElements(gl.TRIANGLES,this.l,gl.UNSIGNED_SHORT,0);

    gl.disableVertexAttribArray(gl.va_tex1pos);
} 
```

领域：

```
GLHTexturedSphere.prototype.draw = function() {
    gl.bindBuffer(gl.ARRAY_BUFFER,this.vbuf);
    gl.enableVertexAttribArray(gl.va_vertex);
    gl.enableVertexAttribArray(gl.va_normal);
    gl.enableVertexAttribArray(this.va_cubetex0pos);
    gl.vertexAttribPointer(gl.va_vertex,4,gl.FLOAT,false,8*4,0);
    gl.vertexAttribPointer(gl.va_normal,4,gl.FLOAT,false,8*4,4*4);
    gl.vertexAttribPointer(this.va_cubetex0pos,4,gl.FLOAT,false,8*4,4*4);

    gl.activeTexture(gl.TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D,null);
    gl.bindTexture(gl.TEXTURE_CUBE_MAP,this.texture);

    gl.uniform1i(shader.textures,0);
    gl.uniform1i(shader.texture1,1);
    gl.uniform1i(shader.cube_textures,1);
    gl.uniform1i(shader.cubeTexture0,0);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.ebuf);
    gl.drawElements(gl.TRIANGLES,this.l,gl.UNSIGNED_SHORT,0);

    gl.disableVertexAttribArray(gl.va_cubetex0pos);
} 
```

他们俩现在都在使用`TEXTURE0`。请检查 WebGL 状态和统一值。

原始代码对我来说有点难，对不起。`texture1`但我认为问题在于`cubeTexture0`制服被设置为相同的值。

# mysql - 查询获得第三高分

> ID：10010096
> 
> 赞同：1
> 
> 时间：2012-04-04T11:23:16.380
> 
> 标签：mysql, sql, ranking

我有一个 student_table 表，其中有两列 student_name（具有 uniqe 约束），student_marks。从这张表中，我需要得到分数第三高的学生的记录。

我试过这个，但它不正确：

```
select * from student_table orderby(marks) enum(marks)=3; 
```

如何更正此查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T11:32:12.787

这是一个非常简单的解决方案

```
select *
from marks
order by marks desc
limit 2,1 
```

有限制你可以使用偏移量和长度。这里的偏移量设置为 2，因为它从 0 开始。对于第三条记录。1是极限。

这是另一个解决方案

```
$res=mysql_query("SELECT * from marks order by marks desc");
mysql_data_seek($res, 2);
$row=mysql_fetch_assoc($res)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T12:06:48.230

Try this

```
SELECT * FROM `student_table` ORDER BY marks DESC LIMIT 2,1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T11:27:05.237

如果您只想要第三条记录：

```
SELECT * FROM student_table ORDER BY marks DESC LIMIT 2,1 
```

阅读有关[LIMIT](http://dev.mysql.com/doc/refman/5.0/en/limit-optimization.html)命令的信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T11:26:59.470

在 MySQL 中，您可以执行以下操作：

```
SELECT * FROM Student_Table ORDER BY Marks LIMIT 2, 1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T11:26:41.857

```
select * from students_table orderby marks limit 2,1 
```

检查此网址以了解有关限制[http://php.about.com/od/mysqlcommands/g/Limit_sql.htm的更多信息](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T17:13:23.407

以下查询将返回第三名学生的所有记录，无论有多少学生并列第一、第二或第三名。

```
SELECT student_table.name, student_table.marks
  FROM student_table
 WHERE student_table.primary_key IN (   SELECT ranked.primary_key
                                          FROM student_table ranked
                                     LEFT JOIN student_table others
                                               ON ranked.marks < others.marks
                                      GROUP BY 1
                                        HAVING COUNT(DISTINCT others.marks) + 1 = 3) 
```

例如，如果`student_table`看起来像这样：

```
+---------+-------+
| name    | marks |
+---------+-------+
| Alpha   |   100 |
| Able    |   100 |
| Bravo   |    98 |
| Baker   |    98 |
| Bone    |    98 |
| Charlie |    93 | <-- 3rd place by marks
| Chimp   |    93 | <-- 3rd place by marks
| Delta   |    85 |
| Echo    |    80 |
| Ebert   |    80 |
+---------+-------+ 
```

查询将产生：

```
+---------+-------+
| name    | marks |
+---------+-------+
| Charlie |    93 |
| Chimp   |    93 |
+---------+-------+ 
```

顺便说一句，如果 MySQL 支持 DENSE_RANK()，查询会更容易一些，但是您可以使用上面的子查询来模拟该函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-03T08:21:59.037

**使用下面的查询**
**QUERY**：select * from student_table where 标记（从 student_table 组中选择标记按标记顺序按标记 desc 限制 2,1）；

# google-chrome-extension - 扩展面板上的 SidebarPane

> ID：10010111
> 
> 赞同：1
> 
> 时间：2012-04-04T11:24:15.290
> 
> 标签：google-chrome-extension

我已经创建了面板，并且知道我想为我的扩展程序创建 SidebarPane。方法 chrome.devtools.panels.elements.createSidebarPane 允许我为“元素”面板创建面板。除了我自己的面板，我可以做同样的事情吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-01T20:00:04.143

目前这是不可能的，除非您自己实现“元素面板”实现。可以在 crbug.com 上请求该功能。

# css - 如何在css3中创建一个箭头？

> ID：10010116
> 
> 赞同：3
> 
> 时间：2012-04-04T11:24:42.993
> 
> 标签：css

如何在css3中创建箭头？像这样。

![在此处输入图像描述](../Images/e770e83097753ee1ab371b7404937465.png)

![在此处输入图像描述](../Images/356e39866ce91a74d4909c8f60144a98.png)

jsfiddle [http://jsfiddle.net/BdSP4/1/](http://jsfiddle.net/BdSP4/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T11:30:51.403

见[JsFiddle](http://jsfiddle.net/Mikey/TsPfq/)

HTML

```
<div class="angle"></div> 
```

CSS

```
.angle:after { /* Thanks to :after just one div is necessary */
    content: '.';
    border-top: 20px solid #000; /* NW triangle gap */
    border-bottom: 20px solid #000; /* SW triangle gap */
    border-left: none;
    border-right: 20px solid transparent; /* W triangle */
    position: relative;
    left: 20px;
}
.angle {
    font-size: 0px; line-height: 0%; width: 0px; /* Necessary to not screw up the layout */
    border-top: 20px solid transparent; /* NE triangle gap */
    border-bottom: 20px solid transparent; /* SE triangle gap */
    border-left: none;
    border-right: 20px solid #000; /* E triangle */
} 
```

**更新：**小版本

这是 2 个重叠的三角形。一个是黑色的，一个是白色的。

[提琴手](http://jsfiddle.net/Mikey/TsPfq/2/)

相同的 HTML，不同的 CSS

```
.angle:after {
    content: '.';
    border-top: 10px solid transparent; 
    border-bottom: 10px solid transparent;
    border-left: none;
    border-right: 10px solid white; 
    position: relative;
    left: 5px;
}
.angle {
    font-size: 0px; line-height: 0%; width: 0px; /* Necessary to not screw up the layout */
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-left: none;
    border-right: 10px solid #000;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T11:28:52.573

[**--- 看演示 ----**](http://jsfiddle.net/Curt/BdSP4/)

```
<div class="triangle-left">
    <div></div>
</div>​

.triangle-left {
  border-color: transparent black transparent transparent;
  border-style: solid;
  border-width: 20px;
  width: 0;
  height: 0;
}

.triangle-left div
{
  border-color: transparent white transparent transparent;
  border-style: solid;
  border-width: 10px;
  width: 0;
  height: 0;
  position:relative;
  top:-9px;
  left:0px;
}​ 
```

这是一个内部有一个白色三角形的三角形，看起来像一个箭头。有关 CSS3 三角形的更多信息，请参见此处：

[http://jonrohan.me/guide/css/creating-triangles-in-css/](http://jonrohan.me/guide/css/creating-triangles-in-css/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T11:26:48.010

您不必使用 CSS 3 - 使用 HTML 实体创建它：

```
<span>&#8249;</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:48:24.327

只需使用 CSS3 添加替代方案 `rotate`

### [演示](http://jsfiddle.net/Starx/h8aLR/2/)

CSS

```
.arrow { width: 20px; height: 20px; overflow: hidden; }
.arrow span  {
    display: block;
    border: 4px #000 solid;
    background: #fff;
    width: 14px;
    height: 14px;
    float:right;
    margin-right: -12px;

    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    transform: rotate(45deg);
    filter: progid:DXImageTransform.Microsoft.Matrix(
         M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476, sizingMethod='auto expand');
    zoom: 1;
} 
```

HTML

```
<div class="arrow"><span></span></div> 
```

# android - 显示未接 VOIP 呼叫的通知

> ID：10010119
> 
> 赞同：1
> 
> 时间：2012-04-04T11:25:01.827
> 
> 标签：android, calllog

我没有找到这个问题的答案。我有一个 VOIP 应用程序。我可以在本地通话记录中添加有关未接来电的日志，但未显示通知。有没有办法让设备本机通话记录显示通知？我不想添加自己的通知，因为我想确保图标始终是本机呼叫日志应用程序将为其他呼叫显示的图标。

我找到[了这个](https://stackoverflow.com/questions/9144010/create-missed-call-notification)，但没有答案。我使用的代码类似于上一篇文章中显示的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:48:44.413

只是为了清楚起见：

您仍然可以添加自己的通知，但使用 android 系统内置图标 - 这些图标与内置电话应用程序使用的图标相同。例如：

```
 Notification notification = new Notification();
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.icon = android.R.drawable.stat_notify_missed_call; 
```

这样，您将始终显示特定 Android 操作系统版本特有的图标。

有关更多信息，请查看[图标指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)，尤其是在您的情况下 -[状态栏图标](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:26:43.707

如果您只是在通话记录数据库中添加一个条目，则不会显示通知。您需要添加您的通知。如果您不添加自己的通知，则只有在通话记录仍然存在的情况下，才会在电话启动时显示通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:45:40.060

这是我的实现（主要是从android代码复制的）：

```
private static void showMissedCallNotification(Context context, final Contact contact) {
    notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    // display the first line of the notification:
    // 1 missed call: call name
    // more than 1 missed call: <number of calls> + "missed calls"
    int titleResId;
    String expandedText;
    numberMissedCalls++;
    if (numberMissedCalls == 1) {
        titleResId = R.string.notification_missedCallTitle;
        expandedText = contact.getDisplayName();
    } else {
        titleResId = R.string.notification_missedCallsTitle;
        expandedText = context.getString(R.string.notification_missedCallsMsg,
                numberMissedCalls);
    }
    final PendingIntent callLogIntent = createCallLogIntent(context);
    // make the notification
    int id = android.R.drawable.stat_notify_missed_call;
    String ticker = context.getString(R.string.notification_missedCallTicker, contact.getDisplayNumber());
    long currentTime = Platform.timeProvider().getTime();
    Notification note = new Notification(id, ticker, currentTime);
    note.setLatestEventInfo(context, context.getText(titleResId), expandedText, callLogIntent);
    note.flags |= Notification.FLAG_AUTO_CANCEL;
    // This intent will be called when the notification is dismissed.
    // It will take care of clearing the list of missed calls.
    note.deleteIntent = createClearMissedCallsIntent(context);

    //configureLedNotification(note);
    notificationManager.notify(MISSED_CALL_NOTIFICATION, note);
}

/**
 *  Returns an intent to be invoked when the missed call notification is clicked. 
 * @param context 
 */
private static PendingIntent createCallLogIntent(Context context) {
    Intent intent = new Intent(context, ClearMissedCallsService.class);
    intent.setAction(ClearMissedCallsService.ACTION_OPEN_CALL_LOGS);
    return PendingIntent.getService(context, 0, intent, 0);
}

/**
 *  Returns an intent to be invoked when the missed call notification is cleared. 
 * @param context 
 */
private static PendingIntent createClearMissedCallsIntent(Context context) {
    Intent intent = new Intent(context, ClearMissedCallsService.class);
    intent.setAction(ClearMissedCallsService.ACTION_CLEAR_MISSED_CALLS);
    return PendingIntent.getService(context, 0, intent, 0);
}

/*package */ static void cancelMissedCallNotification() {
    // reset the number of missed calls to 0.
    numberMissedCalls = 0;
    notificationManager.cancel(MISSED_CALL_NOTIFICATION);
} 
```

和：

```
/**
 * Handles the intent to clear the missed calls that is triggered when a notification is dismissed.
 */
public class ClearMissedCallsService extends IntentService {
    /** This action is used to clear missed calls. */
    public static final String ACTION_CLEAR_MISSED_CALLS = "com.android.phone.intent.CLEAR_MISSED_CALLS";
    public static final String ACTION_OPEN_CALL_LOGS = "com.android.phone.intent.OPEN_CALL_LOGS";
public ClearMissedCallsService() {
        super(ClearMissedCallsService.class.getSimpleName());
    }

    @Override
    public void onCreate() {
        super.onCreate();
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        // Clear the list of new missed calls.
        ContentValues values = new ContentValues();
        values.put(Calls.NEW, 0);
        StringBuilder where = new StringBuilder();
        where.append(Calls.NEW);
        where.append(" = 1 AND ");
        where.append(Calls.TYPE);
        where.append(" = ?");
        getContentResolver().update(Calls.CONTENT_URI, values, where.toString(),
                new String[]{ Integer.toString(Calls.MISSED_TYPE) });
        NativeCallLog.cancelMissedCallNotification();

        if (ACTION_OPEN_CALL_LOGS.equals(intent.getAction()))   {
            Intent intentOpenCallLogs = createOpenCallLogIntent();
            startActivity(intentOpenCallLogs);
        }

    }

    private static Intent createOpenCallLogIntent() {
        Intent intent = new Intent(Intent.ACTION_VIEW, null);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.setType("vnd.android.cursor.dir/calls");
        return intent;
    }   

} 
```

您还需要在 AndroidManifest 中添加它

> ```
>  <service
>         android:exported="true"
>         android:name="yourpackage.ClearMissedCallsService" >
>         <intent-filter >
>             <action android:name="com.android.phone.intent.CLEAR_MISSED_CALLS" />
>         </intent-filter>
>         <intent-filter >
>             <action android:name="com.android.phone.intent.OPEN_CALL_LOGS" />
>         </intent-filter>            
>     </service> 
> ```

# cakephp - 编辑功能是 INSERT 而不是 UPDATE CakePHP 2.1

> ID：10010121
> 
> 赞同：1
> 
> 时间：2012-04-04T11:25:15.490
> 
> 标签：cakephp, insert, edit, cakephp-2.1

尽管这是我在 2.x 中的第一个应用程序，但我对 CakePHP 并不完全陌生。我正在使用烘焙控制器和视图，但编辑功能有问题。

对于初学者来说，这是烤出来的：

```
public function edit($id = null) {
        $this->User->id = $id;
        if (!$this->User->exists()) {
            throw new NotFoundException(__('Invalid user'));
        }
        if ($this->request->is('post') || $this->request->is('put')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The user has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
            }
        } else {
            $this->request->data = $this->User->read(null, $id);
        }
    } 
```

当这个被单独留下时

```
if (!$this->User->exists()) {
            throw new NotFoundException(__('Invalid user'));
        } 
```

我被告知我的用户无效，即使我毫无疑问地知道该用户确实存在。

如果我将其更改为：

```
 if (!$this->User->exists($id)) {
                    throw new NotFoundException(__('Invalid user'));
                } 
```

出现了正确的编辑表单，并填充了正确的数据，但是在保存时它会尝试插入而不是更新。

通常这是因为 CakePHP 没有可使用的 ID，但表单中有一个隐藏的 ID 字段，我什至试图通过在保存之前放置以下内容来强制解决此问题。

```
$this->request->data['User']['id'] = $id; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T14:06:14.950

```
public function edit($id = null) {
        if (!$this->User->exists($id)) {
            throw new NotFoundException(__('Invalid user'));
        }
        if ($this->request->is('post') || $this->request->is('put')) {
            $user_data = $this->User->findById($id);
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The user has been saved'), 'flash');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The user could not be saved. Please, try again.'), 'flash');
            }
        } else {
            $options = array('conditions' => array('User.' . $this->User->primaryKey => $id));
            $this->request->data = $this->User->find('first', $options);
        }
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T20:08:49.263

我也遇到了同样的问题，bake生成的代码，隐藏id等等。然后我发现数据库上的字段id没有设置为autoincrement。

我刚刚设置为自动增量并且它有效

# grails - 我想在条件返回值中添加分页

> ID：10010123
> 
> 赞同：2
> 
> 时间：2012-04-04T11:25:19.593
> 
> 标签：grails, pagination

```
params.max = Math.min(params.max ? params.int('max') : 2, 100)
orders=OrderInfo.createCriteria().listDistinct() 
```

对于分页，我们需要将参数传递给列表，例如。`Post.list(params)`. 我如何在这里传递它？我试过但给出了一个错误。

我们还需要我得到的总数。但我无法设置参数

```
orders=OrderInfo.createCriteria().listDistinct() 
```

请建议正确的代码

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T13:09:29.747

如果您将参数作为`list`方法的第一个参数传递，您会得到一个`PagedResultList`包含方法的参数`getTotalCount()`。有了这个，您可以获得实例总数。

```
params.max = Math.min(params.max?.toInteger() ?: 25, 100)
params.offset = params.offset ? params.offset.toInteger() : 0

def orderInfoCriteria = OrderInfo.createCriteria()
def results = orderInfoCriteria.list(params) { // your criteria code ... }
log.debug "Getting ${results.size()} order infos of ${results.totalCount}" 
```

阅读[文档](http://grails.org/doc/2.0.x/ref/Domain%20Classes/createCriteria.html)以获取有关标准的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T06:14:55.930

**Grails Criteria 查询和分页参数**

```
params.max = params?.max as Integer ?: 10
params.page = params?.page as Integer ?: 1
params.offset = (params.page - 1) * params.max
params.sort = params?.sort ?: "email"
params.order = params?.order ?: "asc"
params.filter = params?.filter ?: ""
params.packet = params?.packet ?: ""

def members = Member.createCriteria().list(params)
  {
    or
    {
      if(params.filter != ""){
        ilike("firstName", "%" + params.filter + "%")
        ilike("lastName", "%" + params.filter + "%")
        ilike("email", "%" + params.filter + "%")
        try {
          params.filter as Long
          eq("citizenId" , params.filter.toLong())
        }catch (e) {

        }
        ilike("mobile", "%" + params.filter + "%")
      }
    }
  }

def dataMembers = [:]
dataMembers.data = members
dataMembers.totalRecord = members.totalCount
render dataMembers as JSON 
```

**输出**

```
{
"data": [
    {
      "id":1,
      "firstName":name
    },
    {
      "id":2,
      "firstName":name
    }
  ],
"totalRecord":5
} 
```

# java - SSLException：找不到任何密钥存储条目来支持启用的密码套件

> ID：10010126
> 
> 赞同：0
> 
> 时间：2012-04-04T11:25:30.587
> 
> 标签：java, android, ssl

我想实现一个小的 android 应用程序，它作为 SSL 服务器工作。在密钥库的正确格式出现很多问题之后，我解决了这个问题并进入了下一个问题。

KeyStore 类正确加载了我的密钥库文件。但是当我尝试打开服务器套接字（socket.accept()）时，会出现以下错误：

> javax.net.ssl.SSLException：找不到任何密钥存储条目来支持启用的密码套件。

我用这个命令生成了我的密钥库：

> keytool -genkey -keystore test.keystore -keyalg RSA -keypass ssltest -storepass ssltest -storetype BKS -provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath bcprov.jar

Java SE6 的无限强度管辖政策适用于我的 jre6。

我通过调用获得了支持的密码套件列表

```
socket.getSupportedCipherSuites() 
```

打印出一个[长长的列表](http://nopaste.info/23b45dc075.html)，其中的组合非常不同。但我不知道如何获得支持的密钥。在使用 portecle 将其转换为 BKS 格式后，我还尝试了 android 调试密钥库，但仍然出现相同的错误。

谁能帮助并告诉我如何生成与其中一个密码套件兼容的密钥？

版本信息：

targetSDK：15
在运行 4.0.3 的模拟器和运行 2.3.3 的真实设备上测试
BounceCastle 1.46
portecle 1.7

我的测试应用程序代码：

```
public class SSLTestActivity extends Activity implements Runnable {
SSLServerSocket mServerSocket;
ToggleButton tglBtn;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    this.tglBtn = (ToggleButton)findViewById(R.id.toggleButton1);

    tglBtn.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {
                new Thread(SSLTestActivity.this).run();
            } else {
                try {
                    if (mServerSocket != null)
                        mServerSocket.close();
                } catch (IOException e) {
                    Log.e("SSLTestActivity", e.toString());
                }
            }
        }
    });
}

@Override
public void run() {
    try {
        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
        keyStore.load(getAssets().open("test.keystore"), "ssltest".toCharArray());

        ServerSocketFactory socketFactory = SSLServerSocketFactory.getDefault();
        mServerSocket = (SSLServerSocket) socketFactory.createServerSocket(8080);
        while (!mServerSocket.isClosed()) {
            Socket client = mServerSocket.accept();
            PrintWriter output = new PrintWriter(client.getOutputStream(), true);
            output.println("So long, and thanks for all the fish!");
            client.close();
        }
    } catch (Exception e) {
        Log.e("SSLTestActivity", e.toString());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:51:29.940

> *密钥库不支持启用的密码套件*

支持或不支持密码套件并不取决于密钥库。支持它们的是`SSLSocket`（或引擎）。它在密钥库中寻找适合其支持的密码套件之一的类型的密钥。通常，启用的密码套件基于 RSA 或 DSS，因此它将分别查找 RSA 或 DSA 密钥。

在以下代码中：

```
KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
keyStore.load(getAssets().open("test.keystore"), "ssltest".toCharArray());

ServerSocketFactory socketFactory = SSLServerSocketFactory.getDefault();
mServerSocket = (SSLServerSocket) socketFactory.createServerSocket(8080); 
```

你没有用你的`keyStore`. 在这种情况下，您可能根本不加载它（顺便说一下，您应该始终关闭您从中读取的输入流）。

在这里，您仍在使用`SSLServerSocketFactory`您尚未专门配置的默认值（并且没有默认密钥库）：这就是您得到“*找不到任何密钥库条目以支持启用的密码套件*”的原因：它找不到合适的密钥库条目，因为它甚至找不到密钥库。

您需要配置一个`SSLContext`，使用从您的密钥库构建的初始化它，`KeyManager`然后从中获取服务器套接字工厂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T11:10:59.977

这对你来说可能为时已晚，但对其他人来说。

> keytool -genkey -keystore test.keystore -keyalg RSA -keypass ssltest -storepass ssltest -storetype BKS -provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath bcprov.jar

成功创建了密钥对，理论上应该可以工作。

我不确定的是密钥对的内容。如果您将所有内容都保留为默认值（即一直输入 enter），则 CN 的值将是“未知”。我进行了几次迭代测试并确认了它。CN=Unknown 将成功生成密钥对（可以使用 Keytool -list 确认）但在 SSL 协商期间将失败。不知何故，它将无法找到建立安全连接所需的密钥。（以下将失败，上述异常）

> ```
> File: C:\Users\James\Downloads\test.keystore
>     Type: BKS-V1
>     Provider: BC
>     Keys
>         None
>     Key Pairs
>         mykey
>             Last Modified: 07/Aug/2015 16:07:13 ICT
>             Private Key
>                 Locked - unlock to get properties
>             Certificates
>                 Unknown
>                     Version: 3
>                     Subject: CN=Unknown,OU=Unknown,O=Unknown,L=Unknown,ST=Unknown,C=Unknown
>                     Issuer: CN=Unknown,OU=Unknown,O=Unknown,L=Unknown,ST=Unknown,C=Unknown
>                     Serial Number: 5BA77D0F
>                     Valid From: 07/Aug/2015 16:07:13 ICT
>                     Valid Until: 05/Nov/2015 16:07:13 ICT
>                     Public Key
>                         Algorithm: RSA
>                         Key Size: 2048 bits
>                         Format: X.509
>                         Encoded: 0x30820122300D06092A864886F70D01010105000382010F003082010A02820101009344283AD35606471D23D2F2B4DA61614C9A973932DF798DF66FE034C818BD6B0285BE860894FBD750180E2D668123442652D04BDFA6190CC28DBB2AA5EB657A428880428226D45F5B942AAB71FF05890FC4CD9A9F932F70E84A5CC118215E7FFE4C93FEFE46E8BD4B141D1742C790BACFF7B503230E263419A23BA3E8B4E7E0F4AECDF5082363AA86693502FFBAA3545F87AE7E462139CF666B35BF348CB5E61F2A62BEBA019F3C51021890A6D58093E91E6B807257DDF138BBB1044B8EB44A8F1E835A04B5EA3C53A7F024C805F28C1A28DFD12A2AC9A1335FD220AD247D951385756964DA1EDD804A13B42B6006554525954EEEBBCFD35FA0D81C93E0DEE50203010001
>                         Public Exponent: 0x10001
>                         Modulus: 0x9344283AD35606471D23D2F2B4DA61614C9A973932DF798DF66FE034C818BD6B0285BE860894FBD750180E2D668123442652D04BDFA6190CC28DBB2AA5EB657A428880428226D45F5B942AAB71FF05890FC4CD9A9F932F70E84A5CC118215E7FFE4C93FEFE46E8BD4B141D1742C790BACFF7B503230E263419A23BA3E8B4E7E0F4AECDF5082363AA86693502FFBAA3545F87AE7E462139CF666B35BF348CB5E61F2A62BEBA019F3C51021890A6D58093E91E6B807257DDF138BBB1044B8EB44A8F1E835A04B5EA3C53A7F024C805F28C1A28DFD12A2AC9A1335FD220AD247D951385756964DA1EDD804A13B42B6006554525954EEEBBCFD35FA0D81C93E0DEE5
>                     Signature Algorithm: SHA256WITHRSA
>                     MD5 Fingerprint: 47:F8:40:B9:05:71:CF:30:36:8D:B4:28:7D:FE:B7:6F
>                     SHA-1 Fingerprint: 11:6F:A3:28:7F:87:97:E7:14:CE:63:A1:9D:09:85:CF:E4:7E:FE:E8
>     Trusted Certificates
>         None 
> ```

顺便说一句：对于 Windows 开发人员，您可能希望将 Key Explorer 与 Keytool 进行比较。它具有比 Keytool 更多的功能。

# ruby-on-rails - 启动 Rails 服务器时出错

> ID：10010129
> 
> 赞同：1
> 
> 时间：2012-04-04T11:25:53.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

您好，我是 ruby​​ 和 rails 的新手……但是当我启动 rail 服务器时，我收到了这个错误

这是我得到的错误

```
D:\mynewapp>ruby script/server 
```

=> 启动 WEBrick => Rails 2.3.5 应用程序从[http://0.0.0.0:3000](http://0.0.0.0:3000) D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': n such file to load -- rush (MissingSourceFile) from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:156:in`block in require'开始来自 D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:521:in `new_constants_in' from D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:156:in`require' 来自 D:/mynewapp/vendor/gems/delayed_job- 1.7.0/lib/delayed/worker.r 1:in `<top (required)>' from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:156:in`block in require' 来自 D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb :521:in `new_constants_in' from D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:156:in`require' 来自 D:/mynewapp/vendor/gems/delayed_job-1.7.0/lib/delayed_job.rb:6 n `<top (required)>' from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:156:in`block in require' 来自 D:/ruby/lib/ruby/gems/1.9.1/ gems/activesupport-2.3.5/lib/active_s 端口/dependencies.rb:521:in`new_constants_in' from D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:156:in`来自 D:/mynewapp/config/environment.rb:39:in`block in <top (requir )>' from D:/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.5/lib/initializer.rb:1 :in`的 require' 来自 D:/mynewapp/config/environment.rb:9:in 的`<top (required)>' from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:156:in`块中的运行'来自 D:/ruby/lib/ruby/gems/ 1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:521:in `new_constants_in' from D:/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.5/lib/active_s port/dependencies.rb:156:in`require' 来自 D:/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.5/库/命令/服务器。：84：在`<top (required)>' from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from D:/ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' from script/server:3:in`'

任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:43:45.137

似乎是服务器抱怨缺少一个名为“rush”的文件（要加载的此类文件--rush）

经过一番搜索，我发现它是 unix shell 的 ruby​​ 替代品

[http://rush.heroku.com/](http://rush.heroku.com/)

所以尝试安装 'rush' gem 并通过 Gem 文件查看（如@Said 建议的那样）

[http://rubygems.org/gems/rush](http://rubygems.org/gems/rush)

以下文章也将很有用

[http://rush.heroku.com/rdoc/](http://rush.heroku.com/rdoc/) [http://www.slideshare.net/adamwiggins/rush-the-ruby-shell-and-unix-integration-library](http://www.slideshare.net/adamwiggins/rush-the-ruby-shell-and-unix-integration-library) [http://www.rubyinside.com/rush -a-ruby-shell-that-abstracts-system-operations-into-ruby-ones-765.html](http://www.rubyinside.com/rush-a-ruby-shell-that-abstracts-system-operations-into-ruby-ones-765.html)

高温高压

# jquery - 基于使用 Jquery 的 optgroup 选择显示/隐藏文本

> ID：10010130
> 
> 赞同：1
> 
> 时间：2012-04-04T11:26:07.440
> 
> 标签：jquery, html

我有以下 HTML 标记：-

```
<select name="Fault" class="textbox" id="fault">
<option>Single Light Out</option>
<option>Light Dim</option>
<option>Light On In Daytime</option>
<option>Erratic Operating Times</option>
<option>Flashing/Flickering</option>
<option>Causing Tv/Radio Interference</option>
<option>Obscured By Hedge/Tree Branches</option>
<option>Bracket Arm Needs Realigning</option>
<option>Shade/Cover Missing</option>
<option>Column In Poor Condition</option>
<option>Several Lights Out (please state how many)</option>
<option>Column Leaning</option>
<option>Door Missing/Wires Exposed</option>
<option>Column Knocked Down/Traffic Accident</option>
<option>Lantern Or Bracket Broken Off/Hanging On Wires</option>
<option>Shade/Cover Hanging Open</option>
</select>

<span id="faulttext" style="color:Red; display:none">Text in the span</span> 
```

此 Jquery 片段将最后 5 个选项添加到选项组中。

```
$('#fault option:nth-child(n+12)').wrapAll('<optgroup  label="Urgent Reasons">'); 
```

我想要做的是，`display:none`如果选择了其中的任何项目，则删除`<optgroup>`，有效地显示跨度消息，可能带有淡入淡出的过渡，如果选择了之外的任何选项，也隐藏消息`<optgroup>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:44:35.357

怎么样：

```
$("#fault").change(function (event) {
    var $selected = $(this).find("option:selected");
    $("#faulttext").toggle(!!$selected.closest("optgroup").length);
}); 
```

**示例：http:** [//jsfiddle.net/UPLUF/](http://jsfiddle.net/UPLUF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:41:21.270

```
$('#fault').on('change', function(){
    if($('option:selected',this).is('optgroup > option',this))
        $('#faulttext').show();
}); 
```

您可以从这里开始实现逆向方法。

# ruby-on-rails - 属于少数模型的模型的嵌套属性表单

> ID：10010131
> 
> 赞同：0
> 
> 时间：2012-04-04T11:26:11.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms, nested-attributes

我有几个模型 - **User**，**Teacher**和**TeacherLeader**。

```
class User < ActiveRecord::Base                                                              
  attr_accessible ...,
                  :teacher_attributes

  has_one :teacher
  has_one :teacher_leader

  accepts_nested_attributes_for :teacher_leader
end

class Teacher < ActiveRecord::Base
  belongs_to :user                                              
  has_one :teacher_leader
end

class TeacherLeader < ActiveRecord::Base
  belongs_to :user
  belongs_to :teacher
end 
```

我想通过嵌套属性填充**TeacherLeader 。**所以，我在控制器中做这样的事情：

```
class TeacherLeadersController < ApplicationController
  ...
  def new
    @user = User.new
    @teacher_leader = @user.build_teacher_leader   

    @teachers_collection = Teacher.all.collect do |t| 
      [ "#{t.teacher_last_name} #{t.teacher_first_name} #{t.teacher_middle_name}", t.id ] 
    end

    @choosen_teacher = @teachers_collection.first.last unless @teachers_collection.empty? 
  end
end 
```

并且也有这样的观点（**new.html.erb**）：

```
<%= form_for @user, :url => teacher_leaders_url, :html => {:class => "form-horizontal"} do |f| %>
 <%= field_set_tag do %>
   <% f.fields_for :teacher_leader do |tl| %>
     <div class="control-group">
        <%= tl.label :teacher_id, "Teacher names", :class => "control-label" %>
        <div class="controls">
              <%= select_tag( :teacher_id, 
                  options_for_select( @teachers_collection, @choosen_teacher )) %>           
        </div>
     </div>
   <% end %>
 <% end %> 

     ...    

 <%= f.submit "Create", :class => "btn btn-large btn-success" %>
<% end %> 
```

问题是这里的选择表格没有出现。为什么？我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:56:01.927

```
<%= f.fields_for :teacher_leader do |tl| %> 
```

# tfs - 如何：TFS 与 Rational Quality Manager 和 Rational Requirement Composer 集成

> ID：10010132
> 
> 赞同：2
> 
> 时间：2012-04-04T11:26:12.807
> 
> 标签：tfs, tfsintegrationplatform, ibm-jazz

我正在研究一种将 Rational (IBM Jazz) Quality Manager (RQM) 和 Requirement Composer (RRC) 与 TFS 集成的集成方法。

随着团队从 ClearCase 迁移到 TFS，我们所关注的仍然是能够管理 RRC 中的需求并使用 RQM 管理测试。

流程将类似于：

1.  需求在 RRC 中计划和详细说明
2.  在 TFS 中创建连接到 RRC 中的需求的工作项
3.  使用 VS2010 创建设计和代码并在 TFS 中管理版本控制
4.  在 RQM 中创建测试计划和测试用例（连接到 RRC 中的需求）
5.  针对 TFS 中的构建运行测试
6.  在 RQM 中针对 TFS 中的构建发布测试结果
7.  在 RRC、RQM 和 TFS 中运行报告，链接跨平台的项目。

我已经开始关注 TFS 集成平台。但希望得到您的指导，以提供早期解决方案和更好的解决方案以及如何实现这一目标。

**更新：**

由于我在这里没有得到很好的回应，所以我把它放在了 MSDN 上，我真的得到了很好的回应。我不会在这里删除这篇文章，而是在此处提供链接：

[http://social.msdn.microsoft.com/Forums/en-US/tfsintegration/thread/fcb20f89-6801-4ad1-8f46-3df68325ca8d](http://social.msdn.microsoft.com/Forums/en-US/tfsintegration/thread/fcb20f89-6801-4ad1-8f46-3df68325ca8d)

请遵循此。

# javascript - 固定 div 页面滚动后闪烁

> ID：10010134
> 
> 赞同：0
> 
> 时间：2012-04-04T11:26:28.827
> 
> 标签：javascript, css

我正在尝试创建一个广告块/div，一旦您向下滚动页面，它就会切换到固定位置。

这是我正在尝试做的事情的演示以及我用来做它的代码......

[http://jsfiddle.net/jasondavis/6vpA7/3/embedded/result/](http://jsfiddle.net/jasondavis/6vpA7/3/embedded/result/)

在演示中，它可以完美地按照我想要的方式工作，但是当我在我的实时站点[http://goo.gl/zuaZx](http://goo.gl/zuaZx)上实现它时， 它可以工作，但是当你向下滚动时，每个 div 都会闪烁进出视图滚动或向下键按下。在我的网站上实时查看问题是右侧边栏上显示“推荐书籍”的块

这是我正在使用的代码...

```
$(document).ready( function() {

    $(window).scroll( function() {
        if ($(window).scrollTop() > $('#social-container').offset().top)
            $('#social').addClass('floating');
        else
            $('#social').removeClass('floating');
    } );

} );​ 
```

css

```
#social.floating {
    position: fixed;
    top: 0;
}​ 
```

我的演示 jsfiddle 可以正常工作 [http://jsfiddle.net/jasondavis/6vpA7/3/](http://jsfiddle.net/jasondavis/6vpA7/3/)

我的现场网站上唯一不同的是 div/id 名称不同。正如您所看到的，它在我的实时站点上有点工作，除了当您向下滚动页面时闪烁进出视图。

任何人都知道为什么这会发生在我的现场而不是我的 jsfiddle 演示上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:34:32.453

您会注意到在示例代码和您的 jsFiddle 中，您的内部 div（`#social`等`#text-2`）有一个包装器/容器 div，这是`scrollTop()`执行测试的地方。在您的实时代码中，您已经省略了这个包装器，并且您都在检查`scrollTop()`AND 将浮动类设置在同一个元素 ( `#text-2`) 上。所以每次滚动时，它都会在类之间交换，因为`scrollTop()`条件会一直检查相同的元素。您需要包装`#text-2`另一个 div 并在此基础上执行条件，就像在您的示例中一样。

此外，`#text-2`is 一个`li`没有 parent 的元素`ul`。您应该给它一个父级`ul`或将其更改为 a `div`，否则它是无效的 HTML。

# javascript - Javascript 自动选项卡在 iPad 或 iPhone 上不起作用

> ID：10010136
> 
> 赞同：0
> 
> 时间：2012-04-04T11:26:36.663
> 
> 标签：javascript, iphone, html, ios, ipad

我有这段 html 代码：

```
 <form name="postcode" method="post" onsubmit="return OnSubmitForm();">
<input class="postcode" maxlength="1" size="1" name="c" onKeyup="autotab(this, document.postcode.o)" /> 
<input class="postcode" maxlength="1" size="1" name="o" onKeyup="autotab(this, document.postcode.d)" /> 
<input class="postcode" maxlength="1" size="1" name="d" onKeyup="autotab(this, document.postcode.e)" /> 
<input class="postcode" maxlength="1" size="1" name="e" /> <br />
    </form> 
```

它使用这个javascript：

```
<script>
/*
Auto tabbing script- By JavaScriptKit.com
http://www.javascriptkit.com
This credit MUST stay intact for use
*/
function autotab(original,destination){
if (original.getAttribute&&original.value.length==original.getAttribute("maxlength"))
destination.focus()
}
</script><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" type="text/javascript"></script>
<script src="js/scripts.js" type="text/javascript"></script>

<script type="text/javascript">
function OnSubmitForm()
{
  if(document.postcode.operation[0].checked == true)
  {
    document.postcode.action ="plans.php";
  }
  else
  if(document.postcode.operation[1].checked == true)
  {
    document.postcode.action ="plans_gas.php";
  }
  else
  if(document.postcode.operation[2].checked == true)
  {
    document.postcode.action ="plans_duel.php";
  }

  return true;
}
</script> 
```

只要您在其中一个文本框中输入一个字符，它就会自动跨过下一个文本框。

这适用于 pc 或 mac 以及 safari 以及所有其他浏览器。但是在 iPad 或 iPhone 上（使用 safari）查看网页时，自动选项卡功能不起作用。

关于如何使自动标签在这些移动设备上工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:14:09.683

根据设计，据我所知，移动 Safari 中的输入字段禁用焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:33:42.890

在我上次使用移动 Safari 的体验中，我需要将事件“onKeyUp”更改为“onKeyPress”，您尝试过吗？

# python - 如何使用 NaturalDocs 记录类属性

> ID：10010144
> 
> 赞同：0
> 
> 时间：2012-04-04T11:26:57.533
> 
> 标签：python, documentation-generation

通过

```
"""
  Function: myfunc
  Parameters:
    a - First parameter
    b - First parameter
""" 
```

我可以记录一个函数，它会在类摘要中列出。我怎样才能对属性做类似的事情？因为我没有在 python 中声明它们，所以我希望像

```
""" ----------------------------------------------------------------------------
  Attributes:
  first - First attribute of the class
  second - Second one
""" 
```

那根本行不通...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:33:39.493

如果您没有明确声明类属性 - 我假设您只是在构造函数中为它们分配值 - 您可以将它们的注释与类注释放在一起：

```
"""
  Class: MyClass
  Describe the class here.

  Attributes:
    attr1 - First attribute of the class
    attr2 - Second one
"""
class MyClass:

    def __init__(self, arg1):
        self.attr1 = arg1
        self.attr2 = "attr2" 
```

您也可以对方法执行相同的操作。这是最简单的方法，但您不会在索引中单独列出类成员，这是一个巨大的缺点。如果您为文档中的每个类成员引用提供前缀将起作用：

```
"""
  Class: MyClass
  Describe the class here.

  Attribute: attr1
  First attribute of the class

  Attribute: attr2
  Second one
"""
class MyClass:

    # Constructor: __init__
    # Describe the constructor.
    #
    # Parameters:
    #   arg1 - The first argument.
    def __init__(self, arg1):
        self.attr1 = arg1
        self.attr2 = "attr2"

    # Method: method1
    # Describe the method here.
    def method1(self):
        print("method1") 
```

对于通常在实现之前放置注释的方法，为注释添加前缀不是问题。如果你没有明确声明你的属性来为他们的评论创造自然的地方，它会使类评论有点混乱。您还可以将评论拆分为更多部分。请注意，您可以混合使用行和块注释。

两点说明：如果您想使用由 分隔的块注释，`"""`而不仅仅是前缀为的行注释，`#`您必须`Languages.txt`在 NaturalDocs 项目目录中添加以下行：

```
Alter Language: Python

   Block Comment: """ """ 
```

显然您喜欢关键字`Attribute`，而不是`Property`默认情况下 NaturalDocs 识别的关键字。`Topics.txt`在 NaturalDocs 项目目录中添加以下内容以使其也被识别：

```
Alter Topic Type: Property

   Add Keywords:
      attribute, attributes 
```

--- 费尔达

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:30:15.877

检查此处描述的文档字符串： [http :](http://epydoc.sourceforge.net/manual-docstring.html) ***//epydoc.sourceforge.net/manual-docstring.html***

*变量也可以使用注释文档字符串记录。如果变量赋值的前面有一个注释，其行以特殊标记“#:”开头，或者在同一行后面跟着这样的注释，那么它被视为该变量的文档字符串：*

```
#: docstring for x
x = 22
x = 22 #: docstring for x 
```

# c# - 通过将 C# dll 导出为 .tlb 文件在 VB 6.0 中使用它时查找其命名空间

> ID：10010147
> 
> 赞同：2
> 
> 时间：2012-04-04T11:27:02.677
> 
> 标签：c#, vb6, com-interop

我必须在 vb6.0 应用程序中检查 C# dll 中的命名空间。我正在使用“TypeLibInfo”来获取 dll 的信息。我可以检查类名和方法名，但不能检查命名空间。如何获取DLL的命名空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:36:38.193

如果您有权访问 Visual Studio，则可以使用[对象浏览器](http://msdn.microsoft.com/en-us/library/exy1facf%28v=vs.80%29.aspx)查看程序集中的命名空间、类等。

如果不这样做，您可能需要使用[Reflector](https://stackoverflow.com/questions/4876347/is-there-a-free-alternative-to-net-reflector)、[CodeReflect](http://www.devextras.com/decompiler/)等工具来执行此操作。

# java - 如何对文本文件执行二进制搜索

> ID：10010151
> 
> 赞同：9
> 
> 时间：2012-04-04T11:27:12.923
> 
> 标签：java, android, binary-search

我在我的 Android 应用程序中使用了一个大文本文件 (5Mb)。我将文件创建为预先排序的字符串列表，并且文件一旦创建就不会更改。如何在不逐行读取匹配字符串的情况下对此文件的内容执行二进制搜索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T12:02:59.640

由于文件的内容没有改变，您可以将文件分成多个部分。说 AG、HN、0-T 和 UZ。这使您可以检查第一个字符并立即将可能的集合剪切为原始大小的四分之一。现在线性搜索将不会花费很长时间，或者可以选择读取整个文件。如果 n/4 仍然太大，这个过程可以扩展，但想法是一样的。将搜索细分构建到文件结构中，而不是尝试全部在内存中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:17:43.223

一个 5MB 的文件并没有那么大 - 您应该能够将每一行读入一个`String[]`数组，然后您可以使用它`java.util.Arrays.binarySearch()`来查找您想要的行。这是我推荐的方法。

如果您不想将整个文件读入您​​的应用程序，那么它会变得更加复杂。如果文件的每一行长度相同，并且文件已经排序，那么您可以在 RandomAccessFile 中打开文件并自己执行二进制搜索，`seek()`如下所示...

```
// open the file for reading
RandomAccessFile raf = new RandomAccessFile("myfile.txt","r");
String searchValue = "myline";
int lineSize = 50;
int numberOfLines = raf.length() / lineSize;

// perform the binary search...
byte[] lineBuffer = new byte[lineSize];
int bottom = 0;
int top = numberOfLines;
int middle;
while (bottom <= top){
  middle = (bottom+top)/2;
  raf.seek(middle*lineSize); // jump to this line in the file
  raf.read(lineBuffer); // read the line from the file
  String line = new String(lineBuffer); // convert the line to a String

  int comparison = line.compareTo(searchValue);
  if (comparison == 0){
    // found it
    break;
    }
  else if (comparison < 0){
    // line comes before searchValue
    bottom = middle + 1;
    }
  else {
    // line comes after searchValue
    top = middle - 1;
    }
  }

raf.close(); // close the file when you're finished 
```

但是，如果文件没有固定宽度的行，那么如果不先将其加载到内存中，您将无法轻松执行二进制搜索，因为您无法像使用 fixed 那样快速跳转到文件中的特定行-宽度线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-29T01:20:45.827

在统一字符长度的文本文件中，您可以按字符方式寻找有问题的间隔的中间，开始读取字符直到您击中分隔符，然后使用后续字符串作为元素中间值的近似值。但是，在android中这样做的问题是您显然无法[随机访问资源](https://stackoverflow.com/questions/9335379/randomaccessfile-in-android-raw-resource-file)（尽管我想您每次都可以重新打开它）。此外，这种技术不能推广到地图和其他类型的集合。

另一种选择是（使用[RandomAccessFile](https://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)）在文件的开头写入一个整数的“数组” - 每个字符串一个 - 然后返回并使用相应字符串的位置更新它们。再次搜索将需要跳来跳去。

我会做（并且在我自己的应用程序中做的）是在文件中实现[哈希集](http://en.wikipedia.org/wiki/Hash_table)。这个确实与树分开链接。

```
import java.io.BufferedInputStream;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.util.ArrayList;
import java.util.Collections;
import java.util.LinkedList;
import java.util.Set;

class StringFileSet {

    private static final double loadFactor = 0.75;

    public static void makeFile(String fileName, String comment, Set<String> set) throws IOException {
        new File(fileName).delete();
        RandomAccessFile fout = new RandomAccessFile(fileName, "rw");

        //Write comment
        fout.writeUTF(comment);

        //Make bucket array
        int numBuckets = (int)(set.size()/loadFactor);

        ArrayList<ArrayList<String>> bucketArray = new ArrayList<ArrayList<String>>(numBuckets);
        for (int ii = 0; ii < numBuckets; ii++){
            bucketArray.add(new ArrayList<String>());
        }

        for (String key : set){
            bucketArray.get(Math.abs(key.hashCode()%numBuckets)).add(key);
        }

        //Sort key lists in preparation for creating trees
        for (ArrayList<String> keyList : bucketArray){
            Collections.sort(keyList);
        }

        //Make queues in preparation for creating trees
        class NodeInfo{

            public final int lower;
            public final int upper;
            public final long callingOffset;

            public NodeInfo(int lower, int upper, long callingOffset){
                this.lower = lower;
                this.upper = upper;
                this.callingOffset = callingOffset;
            }

        }

        ArrayList<LinkedList<NodeInfo>> queueList = new ArrayList<LinkedList<NodeInfo>>(numBuckets);
        for (int ii = 0; ii < numBuckets; ii++){
            queueList.add(new LinkedList<NodeInfo>());
        }

        //Write bucket array
        fout.writeInt(numBuckets);
        for (int index = 0; index < numBuckets; index++){
            queueList.get(index).add(new NodeInfo(0, bucketArray.get(index).size()-1, fout.getFilePointer()));
            fout.writeInt(-1);
        }

        //Write trees
        for (int bucketIndex = 0; bucketIndex < numBuckets; bucketIndex++){
            while (queueList.get(bucketIndex).size() != 0){
                NodeInfo nodeInfo = queueList.get(bucketIndex).poll();
                if (nodeInfo.lower <= nodeInfo.upper){
                    //Set respective pointer in parent node
                    fout.seek(nodeInfo.callingOffset);
                    fout.writeInt((int)(fout.length() - (nodeInfo.callingOffset + 4))); //Distance instead of absolute position so that the get method can use a DataInputStream
                    fout.seek(fout.length());

                    int middle = (nodeInfo.lower + nodeInfo.upper)/2;

                    //Key
                    fout.writeUTF(bucketArray.get(bucketIndex).get(middle));

                    //Left child
                    queueList.get(bucketIndex).add(new NodeInfo(nodeInfo.lower, middle-1, fout.getFilePointer()));
                    fout.writeInt(-1);

                    //Right child
                    queueList.get(bucketIndex).add(new NodeInfo(middle+1, nodeInfo.upper, fout.getFilePointer()));
                    fout.writeInt(-1);
                }
            }
        }

        fout.close();
    }

    private final String fileName;
    private final int numBuckets;
    private final int bucketArrayOffset;

    public StringFileSet(String fileName) throws IOException {
        this.fileName = fileName;

        DataInputStream fin = new DataInputStream(new BufferedInputStream(new FileInputStream(fileName)));

        short numBytes = fin.readShort();
        fin.skipBytes(numBytes);
        this.numBuckets = fin.readInt();
        this.bucketArrayOffset = numBytes + 6;

        fin.close();
    }

    public boolean contains(String key) throws IOException {
        boolean containsKey = false;

        DataInputStream fin = new DataInputStream(new BufferedInputStream(new FileInputStream(this.fileName)));

        fin.skipBytes(4*(Math.abs(key.hashCode()%this.numBuckets)) + this.bucketArrayOffset);

        int distance = fin.readInt();
        while (distance != -1){
            fin.skipBytes(distance);

            String candidate = fin.readUTF();
            if (key.compareTo(candidate) < 0){
                distance = fin.readInt();
            }else if (key.compareTo(candidate) > 0){
                fin.skipBytes(4);
                distance = fin.readInt();
            }else{
                fin.skipBytes(8);
                containsKey = true;
                break;
            }
        }

        fin.close();

        return containsKey;
    }

} 
```

一个测试程序

```
import java.io.File;
import java.io.IOException;
import java.util.HashSet;

class Test {
    public static void main(String[] args) throws IOException {
        HashSet<String> stringMemorySet = new HashSet<String>();

        stringMemorySet.add("red");
        stringMemorySet.add("yellow");
        stringMemorySet.add("blue");

        StringFileSet.makeFile("stringSet", "Provided under ... included in all copies and derivatives ...", stringMemorySet);
        StringFileSet stringFileSet = new StringFileSet("stringSet");

        System.out.println("orange -> " + stringFileSet.contains("orange"));
        System.out.println("red -> " + stringFileSet.contains("red"));
        System.out.println("yellow -> " + stringFileSet.contains("yellow"));
        System.out.println("blue -> " + stringFileSet.contains("blue"));

        new File("stringSet").delete();

        System.out.println();
    }
} 
```

如果您为 android 修改它，您还需要将[Context 传递](https://stackoverflow.com/questions/7666589/using-getresources-in-non-activity-class)给它，以便它可以访问 getResources() 方法。

您可能还想[阻止 android 构建工具压缩文件](http://ponystyle.com/blog/2010/03/26/dealing-with-asset-compression-in-android-apps/)，这显然只能通过将文件的扩展名更改为 jpg 之类的东西来完成 - 如果您正在使用 GUI。这使我的应用程序中的过程快了大约 100 到 300 倍。

您还可以考虑使用[NDK](https://developer.android.com/tools/sdk/ndk/index.html#Installing)[给自己更多内存](https://stackoverflow.com/questions/11275650/how-to-increase-heap-size-of-an-android-application)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-30T18:36:03.397

这是我快速整理的内容。它使用两个文件，一个带有单词，另一个带有偏移量。偏移文件的格式是这样的：前 10 位包含字长，后 22 位包含偏移（字位置，例如 aaah 为 0，abasementable 为 4，等等）。它以大端（java标准）编码。希望它可以帮助某人。

word.dat：

aahabasementableabnormalabnormalityabnormalityabortionistortion-rightsabracadabra

wordx.dat：

```
00 80 00 00 01 20 00 04 00 80 00 0D 01 00 00 11   _____ __________
01 60 00 19 01 60 00 24 01 E0 00 2F 01 60 00 3E   _`___`_$___/_`_> 
```

我在 C# 中创建了这些文件，但这是它的代码（它使用一个 txt 文件，其中的单词由 crlfs 分隔）

```
static void Main(string[] args)
{
    const string fIn = @"C:\projects\droid\WriteFiles\input\allwords.txt";
    const string fwordxOut = @"C:\projects\droid\WriteFiles\output\wordx.dat";
    const string fWordOut = @"C:\projects\droid\WriteFiles\output\word.dat";

    int i = 0;
    int offset = 0;
    int j = 0;
    var lines = File.ReadLines(fIn);

    FileStream stream = new FileStream(fwordxOut, FileMode.Create, FileAccess.ReadWrite);
    using (EndianBinaryWriter wwordxOut = new EndianBinaryWriter(EndianBitConverter.Big, stream))
    {
        using (StreamWriter wWordOut = new StreamWriter(File.Open(fWordOut, FileMode.Create)))
        {
            foreach (var line in lines)
            {
                wWordOut.Write(line);
                i = offset | ((int)line.Length << 22); //first 10 bits to the left is the word size
                offset = offset + (int)line.Length;
                wwordxOut.Write(i);
                //if (j == 7)
                  //  break;
                j++;
            }
        }
    }
} 
```

这是用于二进制文件搜索的 Java 代码：

```
public static void binarySearch() {
    String TAG = "TEST";
    String wordFilePath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/word.dat";
    String wordxFilePath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/wordx.dat";

    String target = "abracadabra"; 
    boolean targetFound = false; 
    int searchCount = 0; 

    try {
        RandomAccessFile raf = new RandomAccessFile(wordxFilePath, "r");
        RandomAccessFile rafWord = new RandomAccessFile(wordFilePath, "r");
        long low = 0;
        long high = (raf.length() / 4) - 1;
        int cur = 0;
        long wordOffset = 0;
        int len = 0;

        while (high >= low) {
            long mid = (low + high) / 2;
            raf.seek(mid * 4);
            cur = raf.readInt();
            Log.v(TAG + "-cur", String.valueOf(cur));

            len = cur >> 22; //word length

            cur = cur & 0x3FFFFF;  //first 10 bits are 0

            rafWord.seek(cur);
            byte [] bytes = new byte[len];

            wordOffset = rafWord.read(bytes, 0, len);
            Log.v(TAG + "-wordOffset", String.valueOf(wordOffset));

            searchCount++;

            String str = new String(bytes);

            Log.v(TAG, str);

            if (target.compareTo(str) < 0) {
                high = mid - 1;
            } else if (target.compareTo(str) == 0) {
                targetFound = true;
                break;
            } else {
                low = mid + 1;
            }
        }

        raf.close();
        rafWord.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    if (targetFound == true) {
        Log.v(TAG + "-found " , String.valueOf(searchCount));
    } else {
        Log.v(TAG + "-not found " , String.valueOf(searchCount));
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-02T22:21:15.210

尽管这听起来有点矫枉过正，但不要将执行此操作所需的数据存储为平面文件。建一个数据库，查询数据库中的数据。这应该既有效又快速。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-13T09:49:59.377

这是一个我认为有效的功能（在实践中使用它）。线条可以有任何长度。您必须提供一个名为“nav”的 lambda 来进行实际的行检查，以便您可以灵活地处理文件的顺序（区分大小写、不区分大小写、按某个字段排序等）。

```
import java.io.File;
import java.io.RandomAccessFile;

class main {
    // returns pair(character range in file, line) or null if not found
    // if no exact match found, return line above
    // nav takes a line and returns -1 (move up), 0 (found) or 1 (move down)
    // The line supplied to nav is stripped of the trailing \n, but not the \r
    // UTF-8 encoding is assumed

    static Pair<LongRange, String> binarySearchForLineInTextFile(File file, IF1<String, Integer> nav) {
        long length = l(file);
        int bufSize = 1024;
        RandomAccessFile raf = randomAccessFileForReading(file);
        try {
            long min = 0, max = length;
            int direction = 0;
            Pair<LongRange, String> possibleResult = null;
            while (min < max) {
                ping();
                long middle = (min + max) / 2;
                long lineStart = raf_findBeginningOfLine(raf, middle, bufSize);
                long lineEnd = raf_findEndOfLine(raf, middle, bufSize);

                String line = fromUtf8(raf_readFilePart(raf, lineStart, (int) (lineEnd - 1 - lineStart)));
                direction = nav.get(line);
                possibleResult = (Pair<LongRange, String>) new Pair(new LongRange(lineStart, lineEnd), line);

                if (direction == 0) return possibleResult;
                // asserts are to assure that loop terminates
                if (direction < 0) max = assertLessThan(max, lineStart);
                else min = assertBiggerThan(min, lineEnd);

            }

            if (direction >= 0) return possibleResult;

            long lineStart = raf_findBeginningOfLine(raf, min - 1, bufSize);
            String line = fromUtf8(raf_readFilePart(raf, lineStart, (int) (min - 1 - lineStart)));

            return new Pair(new LongRange(lineStart, min), line);
        } finally {
            _close(raf);
        }
    }

    static int l(byte[] a) {
        return a == null ? 0 : a.length;
    }

    static long l(File f) {
        return f == null ? 0 : f.length();
    }

    static RandomAccessFile randomAccessFileForReading(File path) {
        try {

            return new RandomAccessFile(path, "r");

        } catch (Exception __e) {
            throw rethrow(__e);
        }
    }

    // you can change this function to allow interrupting long calculations from the outside. just throw a RuntimeException.
    static boolean ping() {
        return true;
    }

    static long raf_findBeginningOfLine(RandomAccessFile raf, long pos, int bufSize) {
        try {
            byte[] buf = new byte[bufSize];
            while (pos > 0) {
                long start = Math.max(pos - bufSize, 0);
                raf.seek(start);
                raf.readFully(buf, 0, (int) Math.min(pos - start, bufSize));
                int idx = lastIndexOf_byteArray(buf, (byte) '\n');
                if (idx >= 0) return start + idx + 1;
                pos = start;
            }
            return 0;
        } catch (Exception __e) {
            throw rethrow(__e);
        }
    }

    static long raf_findEndOfLine(RandomAccessFile raf, long pos, int bufSize) {
        try {
            byte[] buf = new byte[bufSize];
            long length = raf.length();
            while (pos < length) {
                raf.seek(pos);
                raf.readFully(buf, 0, (int) Math.min(length - pos, bufSize));
                int idx = indexOf_byteArray(buf, (byte) '\n');
                if (idx >= 0) return pos + idx + 1;
                pos += bufSize;
            }
            return length;
        } catch (Exception __e) {
            throw rethrow(__e);
        }
    }

    static String fromUtf8(byte[] bytes) {
        try {
            return bytes == null ? null : new String(bytes, "UTF-8");
        } catch (Exception __e) {
            throw rethrow(__e);
        }
    }

    static byte[] raf_readFilePart(RandomAccessFile raf, long start, int l) {
        try {
            byte[] buf = new byte[l];
            raf.seek(start);
            raf.readFully(buf);
            return buf;
        } catch (Exception __e) {
            throw rethrow(__e);
        }
    }

    static <A> A assertLessThan(A a, A b) {
        assertTrue(cmp(b, a) < 0);
        return b;
    }

    static <A> A assertBiggerThan(A a, A b) {
        assertTrue(cmp(b, a) > 0);
        return b;
    }

    static void _close(AutoCloseable c) {
        try {
            if (c != null)
                c.close();
        } catch (Throwable e) {
            throw rethrow(e);
        }
    }

    static RuntimeException rethrow(Throwable t) {

        throw t instanceof RuntimeException ? (RuntimeException) t : new RuntimeException(t);
    }

    static int lastIndexOf_byteArray(byte[] a, byte b) {
        for (int i = l(a) - 1; i >= 0; i--)
            if (a[i] == b)
                return i;
        return -1;
    }

    static int indexOf_byteArray(byte[] a, byte b) {
        int n = l(a);
        for (int i = 0; i < n; i++)
            if (a[i] == b)
                return i;
        return -1;
    }

    static boolean assertTrue(boolean b) {
        if (!b)
            throw fail("oops");
        return b;
    }

    static int cmp(Object a, Object b) {
        if (a == null) return b == null ? 0 : -1;
        if (b == null) return 1;
        return ((Comparable) a).compareTo(b);
    }

    static RuntimeException fail(String msg) {
        throw new RuntimeException(msg == null ? "" : msg);
    }

    final static class LongRange {
        long start, end;

        LongRange(long start, long end) {
            this.end = end;
            this.start = start;
        }

        public String toString() {
            return "[" + start + ";" + end + "]";
        }
    }

    interface IF1<A, B> {
        B get(A a);
    }

    static class Pair<A, B> {
        A a;
        B b;

        Pair(A a, B b) {
            this.b = b;
            this.a = a;
        }

        public String toString() {
            return "<" + a + ", " + b + ">";
        }
    }
} 
```

# facebook - 旧的 Facebook 离线访问令牌是否继续使用已弃用的离线访问？

> ID：10010152
> 
> 赞同：2
> 
> 时间：2012-04-04T11:27:20.543
> 
> 标签：facebook, deprecated, access-token

我已使用我的应用程序用户的 offline_access 存储访问令牌。我准备将其获取并延长 60 天的令牌，以使我的应用程序与 offline_access 弃用一起工作。但我需要知道旧令牌会发生什么。

当启用离线访问弃用时，旧存储的令牌会在两小时、60 天后过期还是永不过期（直到用户取消对应用程序的授权等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:01:50.327

根据[涉及`offline_access`](http://developers.facebook.com/roadmap/offline-access-removal/) `access_token`授予您权限的用户的[权限删除](http://developers.facebook.com/roadmap/offline-access-removal/)`offline_access`的文档，将保持与以前相同：

> **如果您一直在使用 offline_access**
> 
> 对于那些请求offline_access 权限的开发者和那些授予该权限的用户，**现有的access_tokens 将继续没有过期时间**。
> 
> 对于必须登录或重新登录您的应用程序的任何用户，他们将不再在 Auth Dialog 中看到 offline_access 的权限（因为已启用迁移）。**即使没有获取 offline_access，您的应用程序也应该继续像以前一样运行**，但您应该考虑使用新端点来延长现有 access_tokens 的到期时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:36:25.820

Juicy Scripters 的答案似乎不再有效！[删除offline_access 权限](https://developers.facebook.com/roadmap/offline-access-removal/)的文档的当前版本状态：

> 启用迁移后，对于那些请求 offline_access 权限的开发人员和授予该权限的用户，现有的 access_tokens 将继续工作。但是，**下次**您的应用使用 access_token 从/向 Facebook GET 或 POST 数据时，**其过期时间将自动从无限过期重置为有限**但较长的过期时间。[这将是 60 天]

确保您的应用程序可以处理即将到期的 access_tokens！检查路线图的变化 - 它似乎是一个活的文件！

Update: It's definitively a living document - from yesterday to today a fifth scenario about Page Access Tokens was added and there's also a small last updated info at the bottom of the page. (btw a changelog and diff would be a really nice addition for these types of documentation)

# c# - log4net：错误 XmlConfigurator：无法在应用程序的 .config 中找到配置部分“log4net”

> ID：10010157
> 
> 赞同：3
> 
> 时间：2012-04-04T11:27:50.657
> 
> 标签：c#, log4net

我为日志记录创建了一个单独的控制台应用程序，然后将该单个控制台 dll 添加到多个用于日志记录的应用程序中。一旦我运行该应用程序，它记录良好，但也显示以下错误

```
 log4net:ERROR XmlConfigurator: Failed to find configuration section 'log4net' in the application's .config file. Check your .config file for the <log4net> and <configSections> elements. The configuration section should look like: <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" /> 
```

log4net:ERROR XmlConfigurator: 未能在应用程序的 .config 文件中找到配置部分“log4net”。检查 .config 文件中的 and 元素。配置部分应如下所示：

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:35:22.120

添加

```
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>
...

</configuration> 
```

到您的 app/web.config 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:33:51.863

第一个猜测：您添加 dll 的应用程序在其配置文件中没有 log4net 配置部分。如果是这种情况，要么将 log4net 配置部分添加到应用程序的配置中，要么使用另一种方式来配置 log4net（例如，从始终位于 dll 旁边的文件中读取配置，但是首选方式是将所有配置放在一个地方，所以我建议在应用程序的配置中添加一个部分）。

# jquery - 如何使用 jQuery 将文本更改为输入并获取输入值？

> ID：10010158
> 
> 赞同：0
> 
> 时间：2012-04-04T11:27:51.607
> 
> 标签：jquery

我有以下问题。单击文本后，我想通过输入更改此文本。在此输入中插入值并按 ENTER 后，我想返回输入值。

我使用此代码但单击输入后不起作用:(:

```
$(document).ready(function() {

    $('.qty_new').click(function(){
        $(this).replaceWith("<input class='newVal' value='' />");
        return false;

        $('.newVal').keypress(function(e){
            var qty=$(this).val();
            var code =null;
            code = (e.keyCode ? e.keyCode : e.which);
            if (code == 13){
               alert('ratata');
            } 
        });
    });

    <span class='qty_new'>100</span> 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:40:28.617

请看我的小提琴 - 代码工作正常

[http://jsfiddle.net/R6z9S/](http://jsfiddle.net/R6z9S/)

摆脱`return false;`

* * *

```
$(document).ready(function() {

    $(document).on('click','.qty_new',function(){
        $(this).replaceWith("<input class='newVal' value='' />");

        $('.newVal').keypress(function(e){
            var qty=$(this).val();
            var code =null;
            code = (e.keyCode ? e.keyCode : e.which);
            if(e.keyCode == 13) {
                alert('You pressed enter! '+qty);
            }
        });
    });
}) 
```

# c# - 我们如何在 btn click in asp.net 上增加或减少 div 的大小？

> ID：10010167
> 
> 赞同：1
> 
> 时间：2012-04-04T11:28:18.713
> 
> 标签：c#, javascript, asp.net

我们如何在 btn click in asp.net 上增加或减少 div 的大小？

```
 //stylesheet

      <style>div { width:50px; height:70px; float:left; margin:5px;
            background:rgb(255,140,0); }
      </style>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
    //div content
    <body>
      <div></div>
    </body>
    //script which m using for clicking

      <script>$("div").one('click', function () {
          $(this).height(30);
        });</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:32:38.297

看看[来自 jquery 的动画](http://api.jquery.com/animate/)

[不久前在这里](https://stackoverflow.com/questions/5616823/jquery-change-height-of-div-on-button-click)讨论过这个问题，他有一个小提琴，在[这里](http://jsfiddle.net/jomanlk/JJh9z/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:36:22.910

您的问题与您在代码中所做的不匹配。

它提到您需要**在 btn click 上增加或减少 div 的大小**。但是您的代码是`div`单击事件。我也认为这是`Jquery`您需要包含库的内容

将您的代码编辑为这样的内容

```
$("#ButtonId").click(function() {
  $('#DivID').height(30) ;  
}); 
```

**更新**

如果您需要在同一次单击时更改回以前的大小..您必须使用[toggle](http://api.jquery.com/toggle/)。

# java - Spring MVC - 如何检查是否没有传递意外的查询字符串参数？

> ID：10010176
> 
> 赞同：11
> 
> 时间：2012-04-04T11:28:43.777
> 
> 标签：java, spring, spring-mvc, validation

我有一个用 Spring MVC 编写的 Web 服务。第三方开发人员可以使用它。我们的方法有很多**可选**参数（在查询字符串中传递）。

我想确保所有查询字符串参数都拼写正确并且没有拼写错误。有没有简单的方法来做到这一点？方法签名示例：

```
 @RequestMapping(value = {"/filter"}, method = RequestMethod.GET)
    @ResponseBody
    public List<MetricType> getMetricTypes(    
            @RequestParam(value = "subject", required = false) Long subjectId,
            @RequestParam(value = "area", required = false) Long areaId,
            @RequestParam(value = "onlyImmediateChildren", required = false) Boolean onlyImmediateChildren,   
            @RequestParam(value = "componentGroup", required = false) Long componentGroupId    
            ) throws Exception
    {
        //Some code
    } 
```

如果有人使用“onlyImmediateChildren=true”参数（拼写错误）而不是“onlyImmediateChildren=true”调用此方法，Spring MVC 将忽略输入错误的参数并假设“onlyImmediateChildren”为空。开发人员将获得稍微不正确的结果列表，并且不会注意到错误。此类问题可能普遍存在且难以诊断。我想检查查询字符串中没有错别字的参数以防止此类问题。

更新

可以从查询字符串中提取实际参数列表。然后可以将其与允许的参数列表进行比较。如果我对允许的参数列表进行硬编码，它将复制方法签名。我想知道从方法签名中提取允许的参数列表是否容易（例如通过@RequestParam 注释）？

非常感谢

格言

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T20:31:38.957

您可以实现自己的[HandlerInterceptor](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)。在 preHandle 方法中，您可以获取所有带有 @RequestParameter 注释的 HandlerMethod 参数。这些将是请求中所有允许的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:39:34.217

您可以使用[`getParameterMap`](http://docs.oracle.com/cd/E17802_01/products/products/servlet/2.3/javadoc/javax/servlet/ServletRequest.html#getParameterMap%28%29)请求的方法来获取`Map`所有提交的参数，并根据所有允许的参数列表验证键。您应该能够`request`通过简单地将对象添加到方法签名来获取对象，例如：

```
public List<MetricType> getMetricTypes(   
    HttpServletRequest request,
    @RequestParam(value = "subject", required = false) Long subjectId,
    ...
) throws Exception { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-15T04:31:58.497

Spring 将通过 type 的参数注入 url 字符串中存在的所有查询参数

`@RequestParam Map<String,String>`在您的控制器方法中（如果存在）。

```
@RequestMapping(value = "", method = RequestMethod.GET, produces = {"application/json"})
 public HttpEntity<PagedResources<WebProductResource>> findAll(@RequestParam Map<String, String> allRequestParams){
... 
```

}

然后，您可以自己验证地图的键。对于一般的“企业”方式，请在此处查看我的答案：[如何检查 spring RestController 中的未知查询参数？](https://stackoverflow.com/questions/28092449/how-to-check-spring-restcontroller-for-unknown-query-params/48255585#48255585)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-23T11:51:00.153

这是我的一个实现，`HandlerInterceptor`它只接受由参数注释明确定义的参数：

```
import javax.servlet.http.HttpServletRequest
import javax.servlet.http.HttpServletResponse
import org.springframework.http.HttpStatus
import org.springframework.stereotype.Component
import org.springframework.web.bind.annotation.RequestParam
import org.springframework.web.method.HandlerMethod
import org.springframework.web.servlet.HandlerInterceptor

/**
 * Interceptor which assures that only expected [RequestParam]s are send.
 */
@Component
class UnexpectedParameterHandler : HandlerInterceptor {

    override fun preHandle(request: HttpServletRequest, response: HttpServletResponse, handler: Any): Boolean {
        if (handler is HandlerMethod) {
            val queryParams = request.parameterNames.toList()
            val expectedParams = handler.methodParameters
                .map { methodParameter ->
                    val requestParamName = methodParameter.getParameterAnnotation(RequestParam::class.java)?.name
                    val parameterName = methodParameter.parameter.name
                    requestParamName ?: parameterName
                }

            val unknownParameters = queryParams.minus(expectedParams)
            if (unknownParameters.isNotEmpty()) {
                response.writer.write("unexpected parameter $unknownParameters")
                response.status = HttpStatus.BAD_REQUEST.value()
                return false
            }
        }

        return super.preHandle(request, response, handler)
    }
} 
```

# php - innerHTML 在使用 javascript 的 IE8 中不起作用

> ID：10010180
> 
> 赞同：0
> 
> 时间：2012-04-04T11:29:00.203
> 
> 标签：php, javascript

```
<div class="dis-opt-box">
 <div class="dis-opt-box-top">
        <form id="frmBook" accept-charset="utf-8" action="http://localhost/parcel3/book" method="post">
        <div class="opt-box-heading">
            <div class="service opt-box-heading-txt">Service</div>
            <div class="price opt-box-heading-txt">Price</div>
            <div class="info opt-box-heading-txt">Info</div>
            <div class="coll-tody opt-box-heading-txt">Collection today</div>
            <div class="printer-needed mt_5">Printer needed</div>
            <div class="enhanced opt-box-heading-txt mt_5">Enhanced compensation</div>
            <div class="drop-off opt-box-heading-txt mt_13">Drop off at <br>Parcelforce <br>Worldwide <br>Depot</div>
  </div>
                                  <div class="economy-services">
                        <h3>Next Day, Pre 9am delivery</h3>
                                                            <div class="service-box">
                                        <div class="service-box-small">
                                            <div class="service-box-small-1"><span class="pl-10">Parcelforce Express 24, Pre 9am</span></div>
                                            <div class="service gray-border">
                                                                                                <img src="/parcel3/web/img/uploads/couriers/parcel2shippf.jpg" alt="Parcelforce Express 24, Pre 9am" title="Parcelforce Express 24, Pre 9am" class="pb-23" />                                            </div>
                                            <div class="price1 gray-border">
                                                <a href="#" class="flyout">&pound;15.99<span style='width:300px;'><div style='float:left; width:250px; text-align:left;'>Base Price: </div><div style='float:left; width:50px; text-align:left;'>&pound;15.99</div><div style='float:left; width:250px; text-align:left;'>Remote Area Charge: </div><div style='float:left; width:50px; text-align:left;'>&pound;0.00</div><div style='float:left; width:250px; text-align:left;'>Number of Packages: </div><div style='float:left; width:50px; text-align:left;'>1</div><div style='float:left; width:250px; text-align:left;'>Sub total: </div><div style='float:left; width:50px; text-align:left;'>&pound;15.99</div><div style='float:left; width:250px; text-align:left;'>VAT: </div><div style='float:left; width:50px; text-align:left;'>&pound;3.20</div><div style='float:left; width:250px; text-align:left;'>Grand Total: </div><div style='float:left; width:50px; text-align:left;'>&pound;19.19</div></span></a>
                                                <div class="red-star">*</div>                                            </div>
                                            <div class="info gray-border ">
                                                <a href="#" class="flyout"><img src="/parcel3/web/img/images/info-icon.png" alt="" /><span>Delivery before 9am on next working day to most of the UK. Door to door service. Each consignment covered for compensation up to a maximum of &pound;50.00 as standard. Trackable on line. Full support and backup. Fast and reliable courier service from a top courier company.</span></a>
                                            </div>
                                            <div class="info gray-border" style="background:none;">
                                            <img src="/parcel3/web/img/images/question.png" alt="Collection today can only be shown when a collection postcode has been supplied" title="Collection today can only be shown when a collection postcode has been supplied" />                                            </div>
                                            <div class="printer-needed gray-border">
                                            <img src="/parcel3/web/img/images/available.png" alt="Available" title="A printer is needed for this service. You will need to print shipping labels and attach them to your parcel" />                                            </div>
                                            <div class="enhanced gray-border">
                                            <img src="/parcel3/web/img/images/available.png" alt="Available" title="Available" />                                            </div>
                                            <div class="drop-off gray-border">
                                            <img src="/parcel3/web/img/images/available.png" alt="Available" title="Available" />                                            </div>
                                        </div>
                                        <div class="green-button">
                                            <button type="button" value="21" class="book" onclick="javascript:addPackageDetails('/parcel3/web/index/addPackageDetails','21');">Book</button>                                        </div>
                                    </div>
                                                    </div>
                                                    <div class="vat-extra">* Plus VAT</div>
                                <div class="clear"></div>
        <input name='data[packageOptions][0]' type='hidden' value='' id='packageOptions_0'/>
        <input name='data[hdnChoosePackage]' type='hidden' value='1'/>
  </form>
    </div>
 <div class="dis-opt-box-bottom"></div>
</div> 
```

此 HTML 来自 Ajax 响应。我只是尝试使用innerHTML 在DIV 中添加这个HTML。它在 Firefox、IE9、Crome、Safari 中运行良好，但在 IE8 中无法运行。

谁能帮我？

我得到这个 HTML 作为响应并使用这个代码

```
document.getElementById('chooseDetail').innerHTML = response; 
```

但在 IE8 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:34:36.903

我认为 IE8 对您插入的内容有点严格，您可能必须运行 innerHTML 才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:59:32.667

尝试`<br>`用`<br/>`. 一些 IE 版本对有效的 HTML 标记非常严格。

# java - 获取 eclipse (java) 以使用 java3d

> ID：10010181
> 
> 赞同：1
> 
> 时间：2012-04-04T11:29:01.567
> 
> 标签：java, eclipse, java-3d

我有一个简单的java项目（改编自[这里](http://goblinbashing.blogspot.de/2010/05/setting-up-java3d-with-eclipse.html)的例子），如下：

```
import com.sun.j3d.utils.universe.SimpleUniverse;
import com.sun.j3d.utils.geometry.ColorCube;
import javax.media.j3d.BranchGroup;

public class HelloWorld {

    public HelloWorld()
    {
        SimpleUniverse universe = new SimpleUniverse();
        BranchGroup group = new BranchGroup();
        group.addChild(new ColorCube(0.3));
        universe.getViewingPlatform().setNominalViewingTransform();
        universe.addBranchGraph(group);
    }

    public static void main(String[] args) {
        System.out.println("Hello World!");
        System.out.println("PATH : " + System.getProperty("java.library.path"));
        new HelloWorld();        
    }
} 
```

我的输出是：

```
Hello World!
PATH : /usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64:/usr/lib/jvm/java-6-openjdk/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib/jni:/lib:/usr/lib
Exception in thread "main" java.lang.UnsatisfiedLinkError: no j3dcore-ogl in java.library.path
  at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
  at java.lang.Runtime.loadLibrary0(Runtime.java:840)
  at java.lang.System.loadLibrary(System.java:1047)
  at javax.media.j3d.NativePipeline$1.run(NativePipeline.java:231)
  at java.security.AccessController.doPrivileged(Native Method)
  at javax.media.j3d.NativePipeline.loadLibrary(NativePipeline.java:200)
  at javax.media.j3d.NativePipeline.loadLibraries(NativePipeline.java:157)
  at javax.media.j3d.MasterControl.loadLibraries(MasterControl.java:987)
  at javax.media.j3d.VirtualUniverse.<clinit>(VirtualUniverse.java:299)
  at HelloWorld.<init>(HelloWorld.java:10)
  at HelloWorld.main(HelloWorld.java:20) 
```

我假设这个异常表明`libj3dcore-ogl.so`找不到库。这是它的位置：

```
$ locate libj3dcore-ogl.so
/usr/lib/jni/libj3dcore-ogl.so 
```

如上面的输出所示，`/usr/lib/jni`在里面`java.library.path`。我究竟做错了什么？（我使用的是 Ubuntu 10.04 和 Eclipse 3.7.2 - 如果这可能是个问题？）

Java 对我来说是一个未知的领域。因此，请在您的笔记/建议/答案上尽可能详细。

**更新 1**

显然它是一个 64 位库（在 64 位操作系统上）：

```
$ file /usr/lib/jni/libj3dcore-ogl.so
/usr/lib/jni/libj3dcore-ogl.so: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, stripped 
```

我使用 openjdk 作为运行时环境。java3d( `libjava3d-java`) 和 openjdk( `openjdk-6-jdk`) 都是通过`aptitude`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:30:05.360

有趣的是，如果我从终端编译并运行应用程序，它就可以工作：

```
javac -classpath /usr/share/java/j3dcore.jar:/usr/share/java/j3dutils.jar:/usr/share/java/vecmath-1.5.2.jar:. HelloWorld.java
java -classpath /usr/share/java/j3dcore.jar:/usr/share/java/j3dutils.jar:/usr/share/java/vecmath-1.5.2.jar:. HelloWorld 
```

但我真的很想用eclipse来做这种事情。

```
$ java -version
java version "1.6.0_20"
OpenJDK Runtime Environment (IcedTea6 1.9.13) (6b20-1.9.13-0ubuntu1~10.04.1)
OpenJDK 64-Bit Server VM (build 19.0-b09, mixed mode) 
```

* * *

它也适用于`libj3dcore-ogl.so`Eclipse `j3dcore.jar`，如果我将本地库（ -> 添加外部 JAR...):`j3dutils.jar``vecmath-1.5.2.jar`

```
sudo cp /usr/lib/jni/libj3dcore-ogl.so /usr/lib/jvm/java-6-openjdk/jre/lib/amd64/ 
```

但我想知道是否真的没有不需要这个副本的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T21:22:02.297

我在尝试运行需要`java3d`. 我仅将 Eclipse 用于编译和打包可运行的 jar 部分（因为它是一个 Maven 项目），但我遇到的运行时错误属于同一类型。我想确认[moooeeeeep](https://stackoverflow.com/users/1025391/moooeeeep)的回答是中肯的并且非常有帮助。我在这里发帖的原因主要是因为我认为这对其他人提供完整步骤很有用（独立于 Eclipse，因为在这两种情况下使用 Eclipse 设施或 Maven 依赖项设置东西都失败了）。**这里的一切都是关于正确设置 JRE**。

**注意：** *我在 OpenJDK-7-amd64（和 Debian - 64 位系统）下工作。`i386`因此，如果适用，请随意调整以下步骤（只需将“ **amd64** ”替换为“ **i386** ”）。*

***这对我有用：***

```
sudo apt-get install libjava3d-jni libjava3d-java libvecmath-java 
```

这将添加需要注入到 JRE 中的文件：

```
$ locate j3d
/usr/lib/jni/libj3dcore-ogl.so
/usr/share/java/j3dcore-1.5.2+dfsg.jar
/usr/share/java/j3dcore.jar
/usr/share/java/j3dutils-1.5.2+dfsg.jar
/usr/share/java/j3dutils.jar 
```

由于这些文件位于不同的位置，但绝对不在 JRE 的位置，因此复制（或链接）如下：

***动态库：***

```
sudo cp /usr/lib/jni/libj3dcore-ogl.so /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/ 
```

***罐子：***

```
sudo cp /usr/share/java/j3d*.jar  /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/ext/
sudo cp /usr/share/java/vecmath-*.jar /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/ext/ 
```

***导致 ：***

```
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/libj3dcore-ogl.so
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/ext/j3dcore-1.5.2+dfsg.jar
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/ext/j3dcore.jar
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/ext/j3dutils-1.5.2+dfsg.jar
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/ext/j3dutils.jar
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/ext/vecmath-1.5.2.jar 
```

希望这可以提供任何帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:37:31.360

我在另一个项目上遇到了同样的问题，这为我解决了这个问题：

打开项目的运行配置，选择“Arguments”选项卡并将以下内容插入“VM arguments”框中

> -Djava.library.path=/usr/lib/jni

我不知道你为什么要在这里再次给出路径。它也不适用于相对的，但这种方式对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:51:20.323

java.lang.UnsatisfiedLinkError 只有在找不到本地方法的定义时才会抛出。

# macos - 通过applescript加载PowerPoint文件时如何忽略所有弹出窗口？

> ID：10010182
> 
> 赞同：0
> 
> 时间：2012-04-04T11:29:02.927
> 
> 标签：macos, applescript, ms-office, powerpoint

我正在使用 applescript 加载一个 PowerPoint 演示文稿，因此我可以自动将其保存为另一种格式。

这是代码：

```
tell application "Microsoft PowerPoint"
    open "/Users/Me/Desktop/test.pptx"
end tell

set theOutputPath to "/Users/Me/Desktop/Export.pdf"
tell application "Microsoft PowerPoint"
    save active presentation in theOutputPath as save as PDF
end tell

tell application "Microsoft PowerPoint"
    close active presentation
end tell 
```

这可行，但是当打开使用 PowerPoint for Windows 制作的某个文档而不是打开、导出、关闭 PowerPoint 时，我会弹出一个窗口：

“此演示文稿包含 ActiveX 控件，无法在 PowerPoint 中使用。如果您保存此演示文稿，ActiveX 控件将被删除”

除非我按“确定”，否则什么都不会发生。所以我不能完全编写加载/导出/关闭脚本，因为加载后我必须用鼠标单击“确定”。

实际发生的是：AppleScript 执行打开，并立即尝试保存。但是，应用程序在上述弹出窗口中被阻止，因此 AppleScript 给出以下错误：

> Microsoft PowerPoint 出现错误：活动演示文稿不理解保存消息。

所以脚本执行失败。

我在字典中搜索并没有找到任何解决此问题的方法，也没有在 PowerPoint 首选项中找到解决方案。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:51:01.407

如果确定按钮是默认按钮，请尝试：

```
activate application "Microsoft PowerPoint"
tell application "System Events"
tell process "Microsoft PowerPoint"
    keystroke return
end tell
end tell 
```

注意：您必须启用辅助设备访问

# jasper-reports - 为 Jasper 报告中的每个组重置 $V{REPORT_COUNT}

> ID：10010190
> 
> 赞同：2
> 
> 时间：2012-04-04T11:29:21.920
> 
> 标签：jasper-reports, ireport

我`$V{REPORT_COUNT}`在 JasperReports 中使用打印序列号，效果很好。但是，当我按字段分组并在新页面上开始每个组时，序列号仍然在各个组中继续存在。

我需要`$V{REPORT_COUNT}`为每个组重置此变量。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T17:45:51.720

如果您想要在每页上重置的计数，那么这不是`$V{REPORT_COUNT}`定义。

听起来您想要内置变量`$V{PAGE_COUNT}`。或者你可能想要内置的`$V{MyGroup_COUNT}`.

更一般地说，您可以创建自己的变量来计算您想要的。但是在这种情况下，内置的可能会满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T05:48:03.527

当您在 i report 中创建新组时，将在 ireport 的变量中自动创建一个新变量。拿它而不是报告计数。每个组的 sl no 将从 1 开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T06:50:59.740

该变量由组名创建，例如。如果 groupname 是 grp1 则创建的变量是 grp1_count

# android - Android - 按钮突然停止响应侦听器

> ID：10010191
> 
> 赞同：0
> 
> 时间：2012-04-04T11:29:35.423
> 
> 标签：android

我有一个这样的按钮：

```
<Button
  android:id="@+id/logout_button"        
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Log out"
/> 
```

我有一个这样的听众：

```
 Button logout = (Button)findViewById(R.id.logout_button);           

        logout.setOnClickListener(new Button.OnClickListener() 
        {  
            public void onClick(View v) 
            {
                Toast.makeText(getApplicationContext(), "Logging out. Please wait...", Toast.LENGTH_LONG).show();   

                sendEmail("Logout Chosen", "From home page, user clicked on logout" );      

                Intent myIntent = new Intent(ProblemioActivity.this, LogoutActivity.class);
                ProblemioActivity.this.startActivity(myIntent);
            }
        }); 
```

我不记得对此做了太多更改，但按钮突然停止响应点击。有趣的是在同一页面上，其他按钮仍然可以正常工作。

知道为什么会发生这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:31:36.877

1）尝试重建你的代码，看看是否有效。ECLIPSE：项目>清理>你的项目

2）另外，检查另一个按钮的 ID，并确保您没有不小心将它们命名为相同（应该只有一个 ID 为“logout_button”的按钮）

# linux - URL 卷曲时间

> ID：10010193
> 
> 赞同：1
> 
> 时间：2012-04-04T11:29:43.510
> 
> 标签：linux, redirect, curl, timing

我正在编写一个脚本来输出获取页面的总时间。

```
curl -I -L -o /dev/null -w "Connect: %{time_connect}: TTFB: %{time_starttransfer} Total time: %{time_total} \n" $1 2>/dev/null 
```

但是我遇到的问题是它返回最终 URL 的时间。

**例子**

www.apple.com 总时间为 3 秒

www.chinesegooseberry.com*重定向*到 www.kiwifruit.com 总时间为 3 秒

但实际上它类似于 www.chinesegooseberry.com（重定向 1.5 秒） www.kiwifruit.com（3 秒）所以它应该给我 4.5 秒的总时间

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:55:45.920

这个快速的 perl 脚本可能会有所帮助：

```
#! /usr/bin/perl

use LWP::UserAgent;
use Time::HiRes qw/&time/;

sub timereq {
   my ($url) = @_;
   my $ua = LWP::UserAgent->new;
   $ua->requests_redirectable ([qw/GET POST/]);
   my $start = time;
   my $ret = $ua->get($url);
   if ($ret->is_success()) {
      return time-$start;
   }
   print STDERR "req to $url failed\n" unless $ret->is_success();
   return undef;
}

$| = 1;

foreach my $url(@ARGV) {
   printf("%6.3f %s\n",timereq($url),$url);
} 
```

对于在命令行上传递的每个 url，它将以秒为单位给出响应时间（端到端），作为浮点数。

希望这对你有用。

# jquery - 使用链接的一部分作为变量

> ID：10010196
> 
> 赞同：1
> 
> 时间：2012-04-04T11:29:52.467
> 
> 标签：jquery, html, variables

有这个链接我怎么能只得到 ?ref="THIS" 部分？因为我只想用 jQuery 选择链接的这一部分，然后将其用作变量。这可能吗？我想在加载页面时这样做。所以：

JavaScript：

```
$(document).ready(function()
    GET the variable (var variable = ref="THIS";)

    if(cookie != null){
    $("#"+variable).show().$.cookie("actual" , variable);

}); 
```

html:

```
<a href="products.php?ref=oscilobatiente&tipo=7001ad></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:35:56.930

好的，所以给 A 标签 myLink 的 id，你可以这样做（请注意，索引上的 + 4 是为了不包括“ref =”：

```
var myLinkHref = $("#myLink").attr("href");
var ref = myLinkHref.substring(myLinkHref.indexOf("ref=") + 4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:47:46.550

看到这个[小提琴](http://jsfiddle.net/6CUMW/3/)

编辑：由于 Thiefmaster 的一些好评，我对其进行了调整，使其现在可以与对象一起使用

js

```
$(function() {
    var url = $("a").attr("href");
    var index = url.indexOf('?');
    var vars = url.substring(index + 1, url.length).split('&');
    var params = {} ;
    for(var i = 0; i < vars.length; i ++)
    {
        var param = vars[i].split('=');

        params[param[0]] = param[1];

    }
    alert(params.ref);
});​ 
```

# jquery - 有人可以告诉我如何获取名为 popover 的元素吗？

> ID：10010198
> 
> 赞同：1
> 
> 时间：2012-04-04T11:30:07.230
> 
> 标签：jquery, twitter-bootstrap

我正在使用 twitter bootstrap popover 函数来显示弹出窗口。有人可以告诉我如何获取名为 popover 的元素吗？

```
$("[rel=popover]").popover(
{

    delay: { show: 5, hide: 20000 },
    html: true,
    content:'Here I need id of element which over called popover'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:35:47.143

您可以为 content 参数提供一个函数而不是字符串，然后使用它`$(this)`来获取 popover 元素的 jQuery 对象。

例子：

```
 $("[rel=popover]").popover({
        delay: { show: 5, hide: 20000 },
        content: function() {
            return "Popover Id: " + $(this).attr("id");
        }
    }); 
```

# qt - QTimer 超时后是否继续计数？

> ID：10010202
> 
> 赞同：3
> 
> 时间：2012-04-04T11:30:25.600
> 
> 标签：qt, qt4

我想知道 QTimer 是否会在超时后继续计数。

例如，假设我有一个每 500 毫秒超时的 QTimer。假设当这个特定的 QTimer 超时时，我的程序恰好在我创建的某个函数中（不在事件循环中），并且程序从我的函数到事件循环需要 10 毫秒。这是否意味着下一次 QTimer 超时将在 1010 毫秒？

如果是这种情况，有没有办法绕过它？

谢谢。

编辑： ![定时器结果](../Images/296d56c5ca7a2c59cac8cb1b3cc6aff0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:17:01.507

当您放置一个带有 delay 的 Qtimer 时`d`，它会`timeout()`在这段时间过去之后触发一个信号，并且一旦窗口系统的事件队列中的所有事件都已处理完毕。

因此，如果您的程序花费任何时间不在事件循环中，那就没问题了。无论如何，无论是否在 Qt 中，将超时设置为`t ms`真正意味着，***至少`t ms`在过去***时唤醒我。你不能保证任何准确性。

ps：如果你担心很少`ms`，那么你应该担心时间粒度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T19:58:27.903

我使用多个计时器进行了一些测试，但使用了`timerEvent`( `QObject::setTimer()`)。

问题是，当然，如果您有多个计时器在某个时间点干扰（恰好在同一时间滴答），您的所有`doStuffThatTake10ms`代码都将被“排队”......但是计时器的绝对精度应该随着时间的推移而保持不变。这里有一些代码来尝试一下。

```
#ifndef MULTITIMER_H
#define MULTITIMER_H

#include <QObject>
#include <QTime>

class MultiTimer : public QObject
{
    Q_OBJECT
public:
    explicit MultiTimer(QObject *parent = 0);
    void timerEvent(QTimerEvent *event);

private:
    int timerId[4];
    int interval[4];
    int count[4];
    QTime absoluteTimer;
};

#endif // MULTITIMER_H 
```

实施.cpp

```
#include "MultiTimer.h"
#include <QTimerEvent>
#include <QTime>
#include <QDebug>

MultiTimer::MultiTimer(QObject *parent) :
    QObject(parent)
{
    interval[0] = 500;
    interval[1] = 1000;
    interval[2] = 1500;
    interval[3] = 2000;

    for( int i = 0; i < 4; i++)
        timerId[i] = startTimer(interval[i]);

    for( int i = 0; i < 4; i++)
        count[i] = 0;

    absoluteTimer.start();
}

void MultiTimer::timerEvent(QTimerEvent *event)
{
    int id = -1;
    for( int i = 0; i < 4; i++){
        if( event->timerId() == timerId[i]){
            id = i;
            count[id]++;
            break;
        }
    }

    if( id != -1) {
        qDebug() << "timer" << id
                 << "interval" << interval[id]
                 << "count" << count[id]
                 << "total" << count[id]*interval[id]
                 << "reference" << absoluteTimer.elapsed();

        usleep(10000);
    }
} 
```

试一试 create `a = QApllication()`and a `MultiTimer`object and fire `a.exec()`。

在 linux 上 1 分钟后的结果

```
timer 1 interval 1000 count 59 total 59000 reference 59010 
timer 0 interval 500 count 119 total 59500 reference 59500 
timer 0 interval 500 count 120 total 60000 reference 60000 
timer 1 interval 1000 count 60 total 60000 reference 60010 
timer 3 interval 2000 count 30 total 60000 reference 60021 
timer 2 interval 1500 count 40 total 60000 reference 60031 
timer 0 interval 500 count 121 total 60500 reference 60500 
```

正如您所看到的，第 121 个滴答声`timer 0`是正确的`60500ms`……但`60000ms`所有计时器都会发生碰撞，从而导致执行延迟。

# html - abcpdf html图像拉伸

> ID：10010204
> 
> 赞同：0
> 
> 时间：2012-04-04T11:30:32.197
> 
> 标签：html, image, resolution, dpi, abcpdf

我正在尝试渲染一个带有图像的 html 页面。

我有一个问题，当前图像的大小似乎翻了一番，我的图像是 304x112，当它渲染为 pdf 时，它是 607x224。

我确实找到了这个

> 屏幕分辨率通常为 96 dpi。因此，当您在显示器上查看 HTML 页面时，Windows 将以 96 dpi 显示它。
> 
> 屏幕分辨率和 PDF 72 dpi 分辨率之间的差异意味着 HTML 在打印文档中的显示比在屏幕上显示的要大。
> 
> 如果您希望两者显示相同的大小，则需要应用 72/96 (0.75) 的比例来弥补这一点。
> 
> 例如，如果您正在渲染一个为 Width 参数提供 800 值的网页，如果您希望两者显示相同的大小，则需要将 Rect 的宽度设置为 600。

和

> PDF 文档主要是基于矢量的。因此，它们实际上并没有 dpi，因为它们与分辨率无关。基于光栅的 PDF 的唯一部分是图像。
> 
> HTML 的大多数元素——文本、线条——都是基于矢量的。所以它们与分辨率无关。
> 
> 呈现网页中图像的分辨率很复杂。假设您有一个由图像标签引用的 300 平方图像。如果您的 Doc.Rect 的宽度与您传递给 AddImageUrl 的宽度相同，那么它将以 72 dpi 呈现。然而，通过改变这两个值之间的比率，图像将被缩放，因此分辨率也会改变。
> 
> 而且...如果你的300平方在一个宽高为150的img标签中，那么默认分辨率将加倍。

我的问题似乎是那里的第二部分中描述的。

我的最终结果是将输出添加到 a4 纵向页面，以便可以打印（连同文档中的其他文本，但工作正常）。

目前在渲染时我使用这个

```
doc.MediaBox.String = pageSize;
doc.Rect.String = pageSize;
doc.AddImageHtml(html, true, width, disableCache); 
```

其中页面大小为“A4”，宽度在 addimagehtml 调用中设置为 800。

在设置页面大小后，我尝试将 doc.Rect.Width 设置为 600，并将 addimagehtml 调用的宽度设置为 800，但图像仍然无法正确呈现。

还有什么我想念的吗？

编辑：要转换的页面的 HTML 是这样的：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head runat="server">
        <title>Workpack</title> 
        <style>
             body { font-family: Arial, Helvetica, sans-serif; }
        </style>
    </head>
    <body style="border: 1px solid black;">
        <div style="height: 1100px;">
            <div style="position: absolute; top: 50%;">
                <div style="text-align: center; width: 780px;" >
                    <div>
                        <% if (!string.IsNullOrWhiteSpace(Model.CompanyLogo)){%>
                            <img src="<%: Url.ToFullyQualifiedUrl(Model.CompanyLogo) %>"/>
                            <% } %>
                    </div>
                    <div>
                        <h1><%: Model.PlantName %></h1>
                    </div>
                    <div style="font-size: 15pt; font-weight: bold;">
                        <h1><%: Model.WorkpackTitle %> - <%: Model.WorkPackNumber %></h1>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T02:57:12.407

如果没有看到实际的 HTML，很难说。基本思想是`AddImageUrl`/`AddImageHtml`将填充 的区域`Rect`，因此要使最终输出中的图像更小，您可以减小`Rect`（因此`Rect`小于`MediaBox`）。

或者，您可以减少`width`参数。例如：

```
const string kHtml = "<html><img src='https://encrypted.google.com/images/srpr/logo3w.png'></html>";

// The img gets smaller and smaller....
foreach (var i in Enumerable.Range(1, 5))
{
    using (var doc = new Doc())
    {
        doc.Rect.String = doc.MediaBox.String = "A4";
        doc.AddImageHtml(kHtml, true, 400 * i, true);
        doc.Save(i + ".pdf");
    }
} 
```

# debugging - 如何从内核初始化睡眠（）？

> ID：10010207
> 
> 赞同：0
> 
> 时间：2012-04-04T11:30:40.137
> 
> 标签：debugging, linux-kernel, kernel, sleep, oscilloscope

我正在使用示波器通过在 GPIO 上设置值来调试内核 init 的一些代码，在`sleep()`给定时间很早之前的最佳方法是什么，即在`ddr3_init()`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:57:40.733

您可以使用在给定时间间隔后停止的繁忙循环。这应该休眠一秒钟（我不确定它是否有效，我通过查看 time.h 标头将它放在一起）：

```
#include <linux/time.h>

struct timespec start_ts = current_kernel_time();
s64 start = timespec_to_ns(&start_ts);
do {
    struct timespec now_ts = current_kernel_time();
    s64 now = timespec_to_ns(&now_ts);
} while (now - start < 1000000000ULL); 
```

# .net - Teamcity 忽略在 Visual Studio 2010 中配置的项目上下文

> ID：10010212
> 
> 赞同：1
> 
> 时间：2012-04-04T11:30:56.757
> 
> 标签：.net, visual-studio-2010, teamcity, teamcity-7.0

我有一个包含六个项目的解决方案。

其中四个项目是类库，另外两个是 WPF 应用程序和 Windows 服务。后面的两个项目有一个名为“Test”的项目配置——所有的类库都没有这个配置，只有标准的“Debug”和“Release”配置。

我添加了一个名为“测试”的*解决方案*配置，并且在配置管理器中，我从 Release 中复制了设置，因此所有类库都构建在 Release 配置中，并且 WPF 和 Windows 服务都使用“测试'的配置。

解决方案构建在 Visual Studio (2010) 中运行良好，但是，当我在 TeamCity 7 中配置 Visual Studio (sln) 运行程序时，它会忽略这些设置，并尝试使用“测试”配置构建所有项目，当然它找不到类库的此配置。

有没有办法告诉 TeamCity 使用存储在解决方案文件中的这些项目上下文？

我不想向每个类库添加不必要的测试配置，这将是发布配置的精确副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:11:01.293

我正在解决完全相同的问题，不幸的是我没有看到任何其他选项，只能添加额外的配置。我们实际上正在使用其他配置来替换我们的 web.config，这是 VS2010 的一个不错的功能。运行 MSBuild 时似乎不可能有多个配置。我在 TeamCity 中得到以下信息：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(483, 9)：未为项目“something.csproj”设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='SomeConfiguration' 平台='AnyCPU'。您可能会看到此消息，因为您正在尝试构建没有解决方案文件的项目，并且指定了该项目不存在的非默认配置或平台。

只有我们的主网站有“SomeConfiguration”配置，解决方案中的组成项目都没有这个配置。

对此有另一个看法会很棒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:41:15.487

TeamCity 使用 MSBuild.exe 构建解决方案。如果从控制台启动 MSBuild.exe foo.sln /p:Configuration=Release /t:Rebuild 这是否有效？

检查您在完成的构建参数选项卡中没有 system.Configuration 参数。

# algorithm - graph - Graph 中的 Embedded 和 Topological 有什么区别？

> ID：10010213
> 
> 赞同：15
> 
> 时间：2012-04-04T11:31:03.537
> 
> 标签：algorithm, data-structures, graph, topology

在[Algorithm Design Manual](http://www.algorist.com/)中，第 178 页描述了 Graph 的一些属性，其中之一是嵌入和拓扑：

> 嵌入式与拓扑
> 
> 如果顶点和边被分配了几何位置，则嵌入图。因此，任何图形的绘制都是一种嵌入，它可能具有也可能不具有算法意义。
> 
> 有时，图的结构完全由其嵌入的几何形状定义。例如，如果给定平面上的一组点，并寻求访问所有这些点的最小成本旅行（即旅行商问题），则底层拓扑是连接每对顶点的完整图。权重通常由每对点之间的欧几里得距离定义。
> 
> 点网格是几何拓扑的另一个示例。n × m 网格上的许多问题都涉及在相邻点之间行走，因此边缘是从几何图形中隐式定义的。

我完全不明白：

1.  首先，`embedded`这里到底是什么意思？只要顶点有自己的几何位置，那我可以称之为嵌入图吗？
2.  是什么`any drawing of a graph is an embedding`意思？这是否意味着我在第 1 点所说的？
3.  是什么`Topological`意思？我认为这个描述中没有解释。
4.  这个描述中的例子真的让我很困惑。有人可以用最简单的词让我理解这两个图表术语吗？
5.  **理解这两个术语真的很重要吗？**

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:22:24.450

1.  我提醒你，一个图只是一组顶点和一组定义在它们上面的边，所以顶点没有自己的几何位置。图的绘制称为嵌入，绘制的图称为嵌入。
2.  这意味着任何绘制图形的方式都称为该图形的嵌入。
3.  拓扑图是一个图，其顶点和边分别是点和弧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-07T05:21:56.883

除了 msj 的回答。

Graph = `G(V, E)`，其中`V`是一组顶点，并且`E`是一组来自 V 的顶点。这是根据 Skiena 的图定义。请注意，没有提及该图是如何在视觉上显示的（即没有提及其拓扑结构）。

示例（请注意，它没有定义位置`a`，`b`例如 X，Y 坐标系）

`V = { a, b, c, d, e, f }`和`E = { (a,b), (b,c), (a,e) }`

要“绘制”图形，您可以为其分配几何位置，例如在 X、Y 坐标系中。

```
|
|           b (2,3)
|   a(1,2)
|
|
|____________________________
 Fig 1 
```

图 1 只是一个嵌入，我们在其中绘制指定的顶点对`E`

嵌入式和拓扑图的区别在于“拓扑”是如何形成的。在任何“嵌入”中，您都可以手动分配几何位置，如上所述，但在拓扑图中，您根据图的拓扑定义自身来定义“规则”。例如，您指定一个`G(V,E)`并定义一个规则，例如“仅访问每个节点一次”定义了称为“完整图”的拓扑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-25T00:45:21.320

Skiena 使用地理友谊图作为嵌入式图的示例，因为每个顶点都与朋友居住的这个世界中的一个地理点相关联。

摘自本书 - 我的朋友住在我附近吗？– 社交网络并没有脱离地理。您的许多朋友之所以成为您的朋友，仅仅是因为他们碰巧住在您附近（例如，邻居）或曾经住在您附近（例如，大学室友）。

因此，对社交网络的全面理解需要一个嵌入式图，其中每个顶点都与他们所居住的这个世界中的点相关联。这种地理信息可能没有被明确编码，但图形固有地嵌入平面这一事实塑造了我们对任何分析的解释。

# javascript - 单击复选框时检查其选中状态

> ID：10010216
> 
> 赞同：2
> 
> 时间：2012-04-04T11:31:23.810
> 
> 标签：javascript, jquery, class, checkbox, click

我正在尝试在单击复选框时测试其状态。

我的问题是它总是报告为真实的，因为它报告了更改事件发生之后而不是之前的状态。

无论如何我可以在更改之前进行测试。

使用 jQuery 的当前代码 - 类“包”的所有复选框：

```
$(".package").click(function(){
    if($(this).is(":checked")){
        alert($(this).attr("checked"));
    }
}); 
```

即使选择了当前未选中的复选框，这也始终返回 true。

**编辑：**好吧，似乎有一些旧的 js 干扰了这个过程，在清理之后，点击功能确实有效。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:46:29.607

在复选框上使用`onchange`事件不是[跨浏览器](https://stackoverflow.com/a/1501861/851498)（你好 IE！是的，即使使用 jQuery）。

以下作品：

```
$('.package').click(function() {
    console.log(this.checked) // There is no need for jQuery here
}) 
```

选中复选框时记录“true”，取消选中时记录“false”。

说真的，使用`$(this).attr('checked')`or`$(this).is(':checked')`只是 jQueryception。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:40:26.227

click 事件在实际文本框更改发生之前触发，您需要订阅 change 事件：

```
$(".package").change(function(){
    if($(this).is(":checked")){
        alert($(this).attr("checked"));
    }
}); 
```

**编辑：尝试查询实际的 Javascript 对象本身，应该可以**

```
$(".package").change(function(){
    if(this.checked){
        alert(this.checked);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T11:41:37.280

您可以改用更改事件，这样您就可以确定之前的检查状态总是与您现在阅读的相反

```
$(".package").change(function() {
    alert($(this).attr("checked"));
}); 
```

# iphone - 我的应用程序进入后台后如何保持下载？

> ID：10010218
> 
> 赞同：0
> 
> 时间：2012-04-04T11:31:32.867
> 
> 标签：iphone, objective-c, ios

我的 iPhone 应用程序从服务器下载文件。当我退出后台时，等待一段时间，然后将其带回前台，我看到了错误`Internet connection failed`。

当下载到后台时，如何避免此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:34:12.937

iPhone 任务在关闭后有一定的时间可以完成其工作。如果不这样做，它将被杀死。

参考：[https ://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)

# r - R中的随机行选择

> ID：10010220
> 
> 赞同：6
> 
> 时间：2012-04-04T11:31:41.377
> 
> 标签：r

我有这个数据框

```
id <- c(1,1,1,2,2,3)
name <- c("A","A","A","B","B","C")
value <- c(7:12)
df<- data.frame(id=id, name=name, value=value)
df 
```

此函数从中选择一个随机行：

```
randomRows = function(df,n){
  return(df[sample(nrow(df),n),])
} 
```

IE

```
randomRows(df,1) 
```

但是我想为每个“名称”（或每个相同的“id”）随机选择一行，并将整行连接到一个新表中，因此在这种情况下为三行。这必须遍历 2000 多行数据框。请告诉我怎么做？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:40:11.380

我认为你可以用这个`plyr`包做到这一点：

```
library("plyr")
ddply(df,.(name),randomRows,1) 
```

例如：

```
 id name value
1  1    A     8
2  2    B    11
3  3    C    12 
```

这是你想要的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:16:11.963

这是在基础 R 中执行此操作的一种方法。

```
> df.split <- split(df, df$name)
> df.sample <- lapply(df.split, randomRows, 1)
> df.final <- do.call("rbind", df.sample)
> df.final
  id name value
A  1    A     7
B  2    B    11
C  3    C    12 
```

# c# - 在 mvc .net 中检查我从哪个站点重定向到我的站点

> ID：10010224
> 
> 赞同：0
> 
> 时间：2012-04-04T11:31:54.220
> 
> 标签：c#, asp.net-mvc-2, .net-3.5

我想限制用户直接打开我的网站（有点有趣，但就是这样）。

用户应该首先去另一个站点，在那里登录，然后只能允许他们从那个站点重定向到我的站点。

我试图在下面的方法中访问请求对象，但它抛出了一个异常：

```
 protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();
            RegisterRoutes(RouteTable.Routes);
        } 
```

我的网站在 MVC2 C#

没有会话，登录我的网站

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:43:50.070

您可以为此使用[引荐来源网址。](https://stackoverflow.com/questions/1471188/how-do-i-get-the-referrer-url-in-an-asp-net-mvc-action)但是，由于这是一个 http 变量，它**绝对不是**防故障的。是否发送取决于浏览器，使用[Tamper Data](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/)之类的工具很容易修改。我不建议为此目的依赖推荐人。

如果您还管理重定向用户的其他站点，则可以生成某种散列，并将其与 url 作为请求参数一起发送。当哈希值正确时，欢迎用户。

# php - Zend - 在另一个模块中找不到数据库表

> ID：10010225
> 
> 赞同：0
> 
> 时间：2012-04-04T11:31:56.520
> 
> 标签：php, zend-framework, zend-studio, zend-db-table

我有一个包含三个模块的应用程序`default`：`disciplines`和`plans`。在`disciplines`我有一个在这个模块中工作正常的 dbtable，但是如果我想在`plans`里面的模块中使用 dbtable，`plans_dbtable`我会得到

> 在第 43 行的 C:\xampp\htdocs\proiect_mps\application\modules\plans\models\DbTable\Plans.php 中找不到类 'Disciplines_Model_DbTable_Disciplines'。

Require_once 和 include 不能解决问题。我编写了 Disciplines_Boostrap 和 Plans_Bootstrap 类。但它不起作用。有任何想法吗？

```
class Plans_Model_DbTable_Plans extends Zend_Db_Table_Abstract
{
    ...
    public function addPlan(
        $year,
        $name,
        $code,
        $domain,
        $specialization,
        $years)
    {

       // Id-ul disciplinei
       $id_discipline = 0;
       $discipline = new Disciplines_Model_DbTable_Disciplines();
       ....
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:48:24.853

由于您使用的是 Zend，因此我不建议您将 require_once 作为最佳答案。基本上，如果您的配置很好，则不需要在任何地方使用 require_once。这可能会有所帮助：

在文件 application.ini 中

```
;Module Configuration
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.moduleControllerDirectoryName = "controllers"

; Enables Modules bootstrap resource plugin, so each module directory has a bootstrap.php file
resources.modules = 1 
```

在你的 BootStrap.php 文件中

```
protected function _initFrontController() {
        // The Zend_Front_Controller class implements the Singleton pattern
        $frontController = Zend_Controller_Front::getInstance();

        // look in the modules directory and automatically make modules out of all folders found
        $frontController->addModuleDirectory(APPLICATION_PATH . '/modules');

        // forces the front controller to forward all errors to the default error controller (may already be false by default)
        $frontController->throwExceptions(false);

        return $frontController;
    } 
```

是的，您需要为每个模块安装 Bootstrap.php

```
 class Disciplines_Bootstrap extends Zend_Application_Module_Bootstrap
{
    /**
     * This file is ABSOLUTELY NECESSARY to get module autoloading to work.
     * Otherwise calls to "$form = new Module_Form_MyForm()" will fail.
     */

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T10:45:03.997

我想我已经自己解决了。我不得不写

```
require_once(APPLICATION_PATH.'/modules/disciplines/models/DbTable/Disciplines.php'); 
```

代替

```
require_once '/proiect_mps/application/modules/disciplines/models/DbTable/Disciplines.php'; 
```

这也有效：

```
require_once('/../../../disciplines/models/DbTable/Disciplines.php'); 
```

对于我的文件夹结构。

# r - R：跨矩阵识别单元格值

> ID：10010228
> 
> 赞同：3
> 
> 时间：2012-04-04T11:32:08.733
> 
> 标签：r, matrix

[我在这里](http://dl.dropbox.com/u/1791181/coords.csv)有一组 945 个地理编码位置。每个位置都有一个 ID 和一个给定的人口：

```
"ID","LON","LAT","POPULATION"
1,86.648064,22.80682,386
2,86.65358,22.81848,655
3,86.670502,22.78508,624
4,86.685028,22.842409,708
5,86.716599,22.866791,987
6,86.734879,22.87911,415
7,86.736687,23.112619,715 
```

我正在尝试计算每个位置 10 公里半径内所有村庄的总人口。

计算每个点的距离很简单：

```
coords = read.csv("filepath/coords.csv", header=T, stringsAsFactors=F)
coords.matrix = data.matrix(coords[,c(2,3)])

library(sp)
dist = list()
for(i in 1:nrow(coords.matrix)) {
  dist[[i]] = (spDistsN1(coords.matrix, coords.matrix[i,], longlat=T)) #See: http://hosho.ees.hokudai.ac.jp/~kubo/Rdoc/library/sp/html/spDistsN1.html
}
dist = do.call(rbind, dist) 
```

这给了我[这个](http://dl.dropbox.com/u/1791181/dist.csv)945X945 矩阵。但是如何将这些单元格与 ID 和相应的群体相关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:48:44.450

假设`dist`矩阵在 KM 中具有距离，我认为您可以这样做：

```
coords$POPIN10KM <- sapply(1:nrow(dist),function(i)sum(coords$POPULATION[dist[i,]<10])) 
```

这会在您的数据框中添加一列，指示 10 公里内的人口

# jquery - 如何将数据插入到 jquery 数据表中？

> ID：10010232
> 
> 赞同：0
> 
> 时间：2012-04-04T11:32:14.227
> 
> 标签：jquery, datatable, jquery-datatables

我试图在数据表中插入数据，但 javascript consoloe 说这个表是未定义的。这是我的代码：

```
// ----creating the table----
        miArray = [[11,22,33,44,55,"22/11/2012",99,86,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111]]

            var tabla= "<table name='tabla1' id='dataTable'><thead><tr><th>Tipo de documento</th><th>Tipo de documento</th><th>Tipo de documento</th><th>Codigo de documento</th><th>Descripcion de documento</th><th>Fecha de documento</th><th>Codigo de proveedor</th><th>Descripcion de proveedor</th><th>Importe</th><th>Importe IVA</th><th>Total a pagar</th></tr></thead><tbody>"

            for (i=0;i<miArray.length;i++){ 
                    tabla = tabla + '<tr>'
                for (j=0;j<miArray[i].length;j++){              
                    tabla = tabla +'<td></td>'                      
                }   
                tabla = tabla + '</tr>'     
            }
            tabla = tabla +'</tbody></table>'

            document.getElementById("tabla1").innerHTML = tabla

            // -----inserting data--------
            h=1
            for (i=0;i<miArray.length;i++){
                for (j=0;j<miArray[i].length;j++){          
                    document.getElementById("tabla1").rows[h].cells[j] = miArray[i][j]          
                }   
            h++ 
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:36:49.050

id 为“tabla1”的表是否存在于 DOM 中？如果没有，您可以即时创建它：

原生 JavaScript：

```
var tabla1 = document.createElement('table');
tabla1.id = 'tabla1'; 
```

jQuery：

```
var tabla1 = $('<table></table>', { id: 'tabla1' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:20:36.683

如果是这种情况，您是否要创建 jquery Datatable，那么您必须包括

页面中的 jquery.dataTables.min.js 或 jquery.dataTables.js

# c# - 在 ForAllMembers 方法中访问源对象

> ID：10010233
> 
> 赞同：2
> 
> 时间：2012-04-04T11:32:14.343
> 
> 标签：c#, automapper

尝试根据 viewModel 上的特定字段跳过属性映射。有什么方法可以访问 ForAllMembers -> Condition 方法中的源对象

```
Mapper.CreateMap<AViewModel, AEntity>()
      .IgnoreMembers(ignoreMembers)
      .ForAllMembers(o => {
          o.Condition(ctx => {
                        //Need to access AViewModel instance here
                return "Id" == ctx.MemberName;
    });
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:47:11.643

我不知道官方的方式，但你可以使用该`Parent`属性`ResolutionContext`

```
Mapper.CreateMap<AViewModel, AEntity>()
      .IgnoreMembers(ignoreMembers)
      .ForAllMembers(o => {
          o.Condition(ctx => {
                AViewModel instance = (AViewModel)ctx.Parent.SourceValue;
                return "Id" == ctx.MemberName;
    });
   }); 
```

如果您在映射的多个级别深处，您可以“遍历” `Parent`关系，直到找到您正在寻找的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:56:14.060

我认为您可以使用自定义 ValueResolver 以另一种方式执行此操作。

看：

[使用 AutoMapper 进行条件投影](https://stackoverflow.com/questions/6522569/conditional-projection-using-automapper)

# iphone - 淡出图像进入 UITableView 编辑模式？

> ID：10010237
> 
> 赞同：0
> 
> 时间：2012-04-04T11:32:24.430
> 
> 标签：iphone, objective-c, uitableview

我有一个自定义 UITableViewCell 类，每个单元格都有一个我给它的 UIImageView。

我想要做的就是在进入编辑模式时淡出这个图像，并在退出编辑模式时淡出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:39:29.133

```
- (void)tableView:(UITableView *)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath {
//detect editing mode
    for (UITableViewCell *cell in self.tableView.visibleRows) { // loop through the visible cells and animate their imageViews

         [UIView animateWithDuration:1.0
                 delay:0
                 animations: ^{ cell.imageView.alpha = 0.5; }
                 completion: ^(BOOL finished) { cell.imageView.alpha = 1.0; }
         }];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:50:14.183

在您的客户单元类中编写以下方法

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated{
     [super setEditing:editing animated:animated];
     if (editing) {
   PUT YOUR fade animation code here
     } 
```

}

# assembly - 如何在汇编程序中创建一个循环？

> ID：10010239
> 
> 赞同：-1
> 
> 时间：2012-04-04T11:32:34.307
> 
> 标签：assembly

所以我需要让系统扬声器发出哔哔声，我得到了这个

```
program lab1;   
begin  
asm   
MOV AL, 10110110b   
OUT 43h, AL  
MOV AX, 1000 ||<------ 1000 is N     
OUT 42h, AL  
MOV AL, AH  
OUT 42h, AL  
IN AL, 61h  
OR AL, 00000011b  
OUT 61h, AL  
MOV CX, 1000  
@N1:MOV DX, 0   
@N:NOP    
NOP    
NOP    
NOP   
DEC DX   
JNZ @N   
LOOP @N1    
IN AL, 61h    
AND AL, 11111100b    
OUT 61h, AL    
end    
end 
```

我现在需要在一个循环中完成所有这些，并且 N 需要得到 10000 增加 1000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:56:23.420

好吧，如果该代码发出哔哔声并且您想再哔声一次，那么调用它可能是最简单的。每当你最终让某件事情发挥作用时，比如你的哔哔声程序，别管它，在最后放一个 RET 并调用它。

事实上，AL 被第一次 OUT 调用破坏了，所以也许你应该将 N 传递给其他东西，BX，也许。

```
MOV CX,10
MOV BX,1000
@nextN:
PUSH CX
PUSH BX
CALL beep;
POP BX
POP CX
ADD BX,1000
LOOP @nextN
RET
..

@beep:   
MOV AL, 10110110b   
OUT 43h, AL  
MOV AX, BX     
..
RET 
```

PS - 有一个“家庭作业”标签！

# knockout.js - 使用复杂的 json 对象和剔除绑定创建父/子下拉列表

> ID：10010243
> 
> 赞同：0
> 
> 时间：2012-04-04T11:32:42.773
> 
> 标签：knockout.js

我有一个 json 对象，其中包含站点和站点的客户端。一个站点可以有多个客户端。

我知道如何使用敲除绑定填充站点下拉列表框（父级）。但是，当父下拉列表中发生 onchange 时，我无法弄清楚如何填充客户端下拉列表（子）。

如果有更多经验的人可以更改下面的代码以向我展示如何实现主/子下拉列表功能，我将不胜感激。

干杯

C

```
 var posterArray = ([
                           { SiteId: 1,
                             SiteName: "Mail",
                             ClientSite:[
                                { ClientId: 1, ClientName: "Mail Client A" }, { ClientId: 1, ClientName: "Mail Client B"}]  
                           },

                           { SiteId: 2,
                             SiteName: "DSAC",
                             ClientSite:
                                { ClientId: 1, ClientName: "DSAC Client A" }
                           }
    ]);

    var ViewModel = function () {
        var self = this;

        // Poster
        self.PosterList = ko.mapping.fromJS([]);
        self.PosterListEnable = false;

        self.refreshPosterList = function () {
            var data = [];
            if (posterArray.length == 0) {
                data = [{ SiteId: 'No Posters', SiteName: 'No Posters'}];
            } else if (posterArray.length == 1) {
                data = posterArray;
            } else {
                data = [{ SiteId: 'Select a Poster', SiteName: 'Select a Poster'}];
                data.push.apply(data, posterArray);
            }

            ko.mapping.fromJS(data, null, self.PosterList);
            self.refreshClientList();
        };

        //Client
        self.ClientList = ko.mapping.fromJS([]);
        self.refreshClientList = function () {

        };

    };

    var viewModel = new ViewModel();

    $(function () {

        ko.applyBindings(viewModel);
        viewModel.refreshPosterList();
    });

</script>
<fieldset class="SearchFilter">
    <legend>Search Filter</legend>
    <div class="SearchItem">
        <span>Poster:</span>
        <select id="dllPoster" data-bind="foreach: PosterList, disable:PosterList().length <= 1" onchange="viewModel.refreshClientList();">
            <option data-bind="text: SiteName, attr:{value:SiteId}"></option>
        </select>
        <select id="ddlClient" data-bind="with: PosterList.ClientSite ">
            <option data-bind="text: ClientName, attr:{value:ClientId}"></option>
        </select>
    </div>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T01:05:18.980

Knockout 对下拉列表有特定的绑定。看看“选项”绑定： http: [//knockoutjs.com/documentation/options-binding.html](http://knockoutjs.com/documentation/options-binding.html)

这是您的示例的 jsFiddle：http: [//jsfiddle.net/9QVw9/](http://jsfiddle.net/9QVw9/)

# visual-studio-extensions - 在 Visual Studio 扩展中记录错误

> ID：10010247
> 
> 赞同：3
> 
> 时间：2012-04-04T11:33:02.100
> 
> 标签：visual-studio-extensions

在 Visual Studio 扩展中记录意外异常的正确方法是什么。Visual Studio SDK 中是否有任何类，或者可能存在来自偏方开发人员的一些库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:07:48.093

有记录到 ActivityLog.xml 文件的[ActivityLog类。](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.activitylog.aspx)就是这样。

# jquery - jQuery Sortable 启用输入

> ID：10010248
> 
> 赞同：1
> 
> 时间：2012-04-04T11:33:06.127
> 
> 标签：jquery, jquery-ui, post

我有 2 个 div。第一个 div`Available items`包含一些列表项，其中包含一个设置为 的输入字段，`disabled`可以将其拖到另一个`Wanted items`div 中。这很好用，但是一旦输入在想要的项目列表中，我就需要启用它，这样当我发布它时，它只会发布想要的项目，而不是所有内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:44:49.920

`receive`您应该在所需项目列表的方法中指定一个函数。就像是：

```
$("#wantedItems").sortable({
    receive: function (event, ui) {
        //enable the input here
    }
}); 
```

# android - 使用预加载的固定短语 + 新文本创建 Android 视图

> ID：10010251
> 
> 赞同：0
> 
> 时间：2012-04-04T11:33:19.377
> 
> 标签：android, user-interface, textview, tokenize

我正在尝试构建一个 Android 输入控件，它允许用户通过将不同的短语组合在一起并随后对其进行编辑来构建一段文本。例如，以下固定短语可能是预定义的：

*   继续里程
*   北
*   南
*   抬头
*   开始挖掘宝藏
*   挖掘地下几米

构建一个有意义的段落需要不止一个短语。此外，短语本身一旦输入，就需要可编辑：例如，在第一个设定短语中，必须在“proceed”和“miles”之间插入一个数字。下面是一个段落示例，可以想象在这些短语的帮助下构建：

> 向北行驶 42 英里，仰望天空，然后向南行驶 21 英里。开始挖掘宝藏，挖掘地下3米。

到目前为止，我已经尝试了两种主要方法来实现这一点：

1.  我尝试向 中添加上下文菜单`EditText`，通过长按打开。上下文菜单的每个条目都对应于一组短语。不幸的是，内置的 Android 长按菜单接管了（剪切/复制/粘贴选项），因此无法看到我的上下文菜单。

2.  我尝试使用 a `MultiAutoCompleteTextView`，`CommaTokenizer`从资源文件中加载短语。这看起来很有希望，但它在每个短语之后强制使用逗号。此外，编辑变得对用户不友好 - 退格逗号会删除整个插入的短语。我想构建一个全新的 Tokenizer 是可能的，但我没有看到我可以实际使用什么令牌，也没有看到在点击退格键时如何防止删除整个令牌。

3.  我采取了不同的方法并查看了 Android 用户词典，看看我是否可以在其中添加短语。不幸的是，它似乎不接受带有空格的短语。

有人对我接下来可以尝试什么有任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:36:07.770

我通过子类`MultiAutoCompleteTextView`化和覆盖`replaceText()`方法来解决这个问题，以不“标记为已替换”输入的短语。工作正常。

# iphone - Objective-C 中的绑定指针

> ID：10010254
> 
> 赞同：0
> 
> 时间：2012-04-04T11:33:45.120
> 
> 标签：iphone, objective-c, ios, cocoa-touch, pointers

在我的代码中的某个时刻，我设置`UIImageView *` `imageView.image`为`UIImage *` `myImage`. 从这一点来看，我很想查看`myImage`.`imageView`

在任何`myImage`更改上，我都想`imageView`展示`myImage`. 希望你能理解。谢谢你。

-- 编辑 1 以获得更好的解释。

在代码中的某个时刻，我将 imageView 的图像设置为`myClass.image`. 从这一点开始，我想`imageView`对`myClass.image`. 例如`myClass.image = [UIImage imageNamed:@"foo"];`. 两者`imageView`和`myClass.image`都是具有保留的属性。现在，当我更改 时`myClass.image`，我还必须设置`imageView.image = myClass.image`在图像视图中查看新图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:55:29.707

看看[KVO](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html)。

向`myClass.image`属性添加一个观察者，当它发生变化时，更新你的`imageView`. 代码看起来像：

```
// To add the observer
[myClass addObserver:self forKeyPath:@"image" options:0 context:0];

// And to listen for changes
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([keyPath isEqualToString:@"image"])
        myImageView.image = object.image;
    else
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:56:48.200

不久前我为此编写了一个实用程序类，因此您可以从我的 Dropbox[下载它。](http://dl.dropbox.com/u/25258177/Binding.zip)

语法是这样的：

```
[self bind:@"myImage" toObject:imageView keyPath:@"image"];
...
[self unbind:@"myImage" fromObject:imageView keyPath:@"image"]; 
```

# javascript - 我们如何增加或减少 div 在 btn click in asp.net 的大小？

> ID：10010255
> 
> 赞同：1
> 
> 时间：2012-04-04T11:33:49.963
> 
> 标签：javascript, jquery, asp.net, css

我们如何增加或减少 div 在 btn click in asp.net 的大小？

样式表

```
<style>
div{
    width:50px; 
    height:70px; 
    float:left; 
    margin:5px; 
    background:rgb(255,140,0); 
}
</style> 
```

Javascript：

```
<script src="_http://code.jquery.com/jquery-latest.js"></script>
<script>
$("div").one('click', function () {
    $(this).height(30);
});
</script> 
```

标记：

```
<body>
    <div></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:23:37.557

**HTML**

```
<div id="div1"></div>
<input type="button" id="aAdd"  value="Increase" />
<input type="button" id="aDecrease"  value="Decrease" /> 
```

**脚本**

```
var currentHeight;
var measurement=100;

$(function(){    
    currentHeight=$("#div1").height();  
    $("#aAdd").click(function(){      
        currentHeight=parseInt(currentHeight)+measurement    
        $("#div1").height(currentHeight);
    });
     $("#aDecrease").click(function(){     
        currentHeight=parseInt(currentHeight)-measurement             
        $("#div1").height(currentHeight);
    });

}); 
```

这是工作示例[http://jsfiddle.net/pJWMh/14/](http://jsfiddle.net/pJWMh/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:13:46.467

```
$("div").click(function() { $(this).height(30); }); 
```

***[请参阅工作 jsFiddle 演示](http://jsfiddle.net/CodeMaverick/pJWMh/)***

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-04T12:50:43.470

你所有的拳头都给了 div 的 id。我修改了一些 html 并放置按钮，如下所示。

```
<body>
<form id="form1" runat="server">
<div id="dvMain">
</div>

<input id="btn" onclick="javascript:changeDivSize();" type="button" value="Change Size" />

</form> 
```

调用 javascript functin changeDivSize() 如下

```
function changeDivSize() {

        $("#dvMain").height(500);
    } 
```

希望对你有帮助...

# c# - 增强 C# 枚举以使用按位运算？

> ID：10010257
> 
> 赞同：1
> 
> 时间：2012-04-04T11:33:53.933
> 
> 标签：c#, .net, .net-4.0, enums

二元运算*非常有用*。这样我可以这样做 `| ^ &`，以便 ro 发出一个新序列。

但是，有时有些`Enum`'s 没有`base 2`附加值（或根本没有值）。

IE：

![在此处输入图像描述](../Images/6d4d8f8bb885780268d81c0243ad7604.png)

我想`Enhance || derive|| attach`为每个条目赋予枚举（如果可能）的值。

所以我将能够做到：

```
if (MyListItemType== Header |Footer ) ... 
```

是否可以 ？还是有任何棘手的解决方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T11:37:03.613

> 我要加强 || 导出|| 将值附加到每个条目的枚举（如果可能）。

你不能这样做（没有重新定义枚举）。但是当它在你不拥有的代码中时，它就结束了。可能已经存在依赖编号的代码，更改 int 值会破坏该代码。

但这通常意味着 Enum 并非旨在设置位，因此尝试将其用作一个位可能无论如何都不是一个好主意。

这是代码创建者的设计决策。

查看您的示例列表：

```
var item = ListItemType.Header | ListItemType.Footer | ListItemType.SelectedItem; 
```

真的可以`item`同时是页眉、页脚和选中项吗？这是一个互斥选项列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T11:35:46.400

您想使用[标志](http://msdn.microsoft.com/en-us/library/cc138362.aspx)枚举：

```
[Flags]
enum Days2
{
    None = 0x0,
    Sunday = 0x1,
    Monday = 0x2,
    Tuesday = 0x4,
    Wednesday = 0x8,
    Thursday = 0x10,
    Friday = 0x20,
    Saturday = 0x40
}
class MyClass
{
    Days2 meetingDays = Days2.Tuesday | Days2.Thursday;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T11:37:46.320

不，你不能。

如果 an`Enum`没有标记`FlagsEnumeration`和/或具有正确的位掩码值（如您所说 - “没有 base2”），则不能对其使用按位运算来获得有意义的结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T11:55:59.083

正如其他人所说，它无法完成，但我将使用扩展方法的快捷方式：

```
public enum MyEnum
    {
        This,
        That,
        TheOther
    }

    public static class MyEnumeExtensions
    {
        public static bool IsAny(this MyEnum enumValue, params MyEnum[] values)
        {
            return values.Any((e) => e == enumValue);
        }
    } 
```

所以我可以使用：

```
myEnum.IsAny(This, That); 
```

这**几乎**是您想要实现的目标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T11:36:29.807

您正在寻找标志枚举：http: [//msdn.microsoft.com/en-us/library/cc138362.aspx](http://msdn.microsoft.com/en-us/library/cc138362.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T11:36:46.783

```
[Flags]
enum Days2
{
    None = 0x0,
    Sunday = 0x1,
    Monday = 0x2,
    Tuesday = 0x4,
    Wednesday = 0x8,
    Thursday = 0x10,
    Friday = 0x20,
    Saturday = 0x40
} 
```

[http://msdn.microsoft.com/en-us/library/cc138362.aspx](http://msdn.microsoft.com/en-us/library/cc138362.aspx)

然后，您可以对它们使用按位运算符。

# java - Java中的工厂模式示例

> ID：10010266
> 
> 赞同：2
> 
> 时间：2012-04-04T11:34:55.083
> 
> 标签：java, design-patterns

我正在尝试工厂模式中的一个示例。这给了我 ArrayIndexOutOfBoundsException。有人可以解释一下吗？

```
java.lang.ArrayIndexOutOfBoundsException: 0 at com.factory.SalutationFactory.main(SalutationFactory.java:10) 
```

这是我的课。

```
package com.factory;

public class SalutationFactory {

    public static void main(String[] args) {

        try
        {
        SalutationFactory factory = new SalutationFactory();        
        factory.getPerson(args[0], args[1]);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    public Person getPerson(String name, String gender){

        if(gender.equals("M"))
            return new Male(name);
        else if(gender.equals("F"))
            return new Female(name);
        else 
            return null;
    }
}

package com.factory;

public class Person {

    private String name;
    private String gender;

    public String getName(){
        return name;
    }

    public String getGender(){
        return gender;
    }

}

package com.factory;

public class Female extends Person {

    public Female(String fullname){
        System.out.println("Hello Ms " + fullname);
    }
}

package com.factory;

public class Male extends Person {

    public Male(String fullname){
        System.out.println("Hello Mr " + fullname);
    }

} 
```

感谢开发

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:36:54.327

由于这是唯一使用数组的行：

```
 factory.getPerson(args[0], args[1]); 
```

我怀疑您没有提供 2 个命令行参数。你需要类似的东西：

```
$ java com.factory.SalutationFactory Smith M 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:37:59.307

```
factory.getPerson(args[0], args[1]); 
```

在这里您使用的是命令行参数，因此在运行此应用程序时，您必须传递命令行参数

运行使用

```
java SolutionFactory Santosh M 
```

这里**Santosh**将被分配给**args[0]**而**M**将被分配给**args[1]**

如果在不传递任何命令行参数的情况下运行该程序，则**args 的长度**将**为零**，并且在**main()**内部调用**args[0]**会导致**ArrayIndexOutOfBounds**异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T19:14:34.060

在使用它们之前，您必须检查 null 或对象。只需添加行

```
if (args.length >= 2)
    factory.getPerson(args[0], args[1]);
/* else 
    Add reminder to provide at least 2 arguments. */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:28:05.263

我尝试了相同的示例，在这里尝试后是解决方案。创建此代码。

```
String []pin =new String[4];
    pin[0]="M";
    pin[1]="F";
    Factory factory = new Factory();
    factory.getPerson(pin[0],pin[1]); 
```

这会起作用

你的输出应该是“女性”。

# javascript - 解码 HTML 十进制编码字符

> ID：10010268
> 
> 赞同：0
> 
> 时间：2012-04-04T11:34:58.420
> 
> 标签：javascript, decode

javascript 中是否嵌入了任何内容来解码像`&#34;`" 之类的条目？

我需要类似于在这里找到的东西：[http](http://www.hashemian.com/tools/html-url-encode-decode.php) ://www.hashemian.com/tools/html-url-encode-decode.php （十进制解码）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:36:13.233

使用[`String.fromCharCode`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/fromCharCode)方法。例子：

```
var entity = '&#34;';
var numeric = /\d+/.exec(entity);
var decoded = String.fromCharCode(numeric); 
```

一个[通用的 HTML 实体到字符的](https://stackoverflow.com/questions/7394748/whats-the-right-way-to-decode-a-string-that-has-special-html-entities-in-it)方法是：

```
var dummy = document.createElement('textarea');
dummy.innerHTML = entity;
var decoded = dummy.value; 
```

# fortran - 隐式真实错误

> ID：10010269
> 
> 赞同：-2
> 
> 时间：2012-04-04T11:35:00.997
> 
> 标签：fortran

我已经用`implicit real*8`. 该程序运行良好，但是一旦我插入另一个包含长精度和双精度数字数据的数据文件，我发现的结果就不合适了。专家和程序开发人员建议我改变`implicit real*16`。但它在我的 fortran 电站 4.0 中不起作用并给出隐含错误。如何转换或升级发电站，使其可以使用`implicit real*16`或更多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:53:28.540

Powerstation 太旧了。即使是现在，也不是每个编译器都支持 real*16。考虑获取一个新的编译器。我建议从 gfortran 开始，它确实支持四精度。

我也担心那些隐含的东西可能会隐藏许多其他问题。还考虑为您的变量显式键入并使用`implicit none`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:02:20.410

您的文件中的值是什么？整数和双精度浮点值？那么问题似乎不太可能是由于您没有将它们读入四精度实变量引起的。只有很少的计算需要四精度。您是否将整数值读入整数变量并将浮点数读入 Fortran 实数？正如其他人所写的那样，隐式类型是最糟糕的方法......它仍然是 Fortran 的一部分，只是为了支持遗留代码。最佳实践是使用“隐式无”并显式键入所有变量。这将允许编译器捕捉错误，例如变量名中的拼写错误。有关变量类型的更多信息，请参见[Fortran：integer*4 vs integer(4) vs integer(kind=4)](https://stackoverflow.com/questions/3170239/fortran-integer4-vs-integer4-vs-integerkind-4/3170438)和[扩展双精度](https://stackoverflow.com/questions/9211037/extended-double-precision/9215930)

# php - MySql，在 BOOLEAN MODE 中搜索具有两个关键字的列

> ID：10010271
> 
> 赞同：0
> 
> 时间：2012-04-04T11:35:05.260
> 
> 标签：php, mysql

我为我的网站制作了一个搜索系统。

假设数据库中有 5 个数据。

1.  苹果 macbook air 评测
2.  苹果 iMac 评测
3.  苹果 iPhone 评测
4.  iPhone 4 拆箱评测
5.  iPhone越狱评测

用户在搜索输入中键入“iphone 评论”。

我想显示这样的结果

1.  苹果**iPhone 评测**
2.  **iPhone** 4 拆箱**评测**
3.  **iPhone**越狱**评测**

我可以成功打破搜索词并使用布尔模式。

```
SELECT * FROM BOOKMARK WHERE MATCH title AGAINST ('iphone* review*' IN BOOLEAN MODE) 
```

但它不会像上面那样显示结果。

它搜索具有 iphone 或评论词的数据。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:42:23.220

您必须`+`在单词前面使用符号，以确保它出现在每次点击中。

```
SELECT * FROM BOOKMARK WHERE MATCH title AGAINST ('+iphone +review' IN BOOLEAN MODE) 
```

有关更多信息，请参阅[手册](http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T06:30:46.703

你可以试试这个查询：

```
SELECT * FROM BOOKMARK WHERE MATCH title AGAINST ('"iphone review"' IN BOOLEAN MODE) 
```

这个对我有用。

# php - 电子邮件反垃圾邮件 PHP

> ID：10010273
> 
> 赞同：1
> 
> 时间：2012-04-04T11:35:11.650
> 
> 标签：php, javascript, jquery

我的网站上有一个没有任何垃圾邮件保护的联系表单，并且我收到大量垃圾邮件，我将添加反垃圾邮件保护，我知道我可以使用 PHP 做到这一点，但如果我停止验证表单，如果使用 jQuery 的反垃圾邮件问题是错误的，这就足够了吗？还是垃圾邮件机器人绕过 javascript 安全措施？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T11:46:39.600

一个真正简单的技巧是添加一个具有显示无的 css 样式的输入字段。然后检查该字段是否已填写。由于它是隐藏的，因此只有机器人会填充它。在 php 中，您可以检查该字段是否已填充，如果是，则阻止它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T11:42:25.870

我会用一个`reCAPTCHA`. 集成它非常简单，并且有据可查。

试试看！它完全可以防止垃圾邮件。

更多在这里[https://developers.google.com/recaptcha/docs/php](https://developers.google.com/recaptcha/docs/php)

**编辑：**

[官方 reCaptcha 网站](http://www.google.com/recaptcha)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:06:11.710

我经常做的两件事似乎可以消除几乎所有的垃圾邮件：

1.  添加一个样式为 的文本字段，`display:none`提交页面时，该字段应设置，但为空。如果它不为空，则它来自机器人。
2.  不要正确设置表单的操作，然后使用 JavaScript 正确设置它。（以下示例）

此外，如前所述，一个好的验证码通常会起到作用。

```
<form style="display:none;" id="myform" action="http://www.google.com">
    ...
</form>
<script>
var obj=document.getElementById('myform');
obj.action='realaction.php';
obj.style.display='block';
</script>
<noscript>You must have JavaScript enabled to contact us</noscript> 
```

# scala - Scala中的括号匹配---函数式方法

> ID：10010276
> 
> 赞同：8
> 
> 时间：2012-04-04T11:35:17.413
> 
> 标签：scala, functional-programming

假设我想解析一个带有各种左方括号和右方括号的字符串（我在标题中使用了括号，因为我认为它更常见——不过问题是一样的），这样我就可以在一个列表中分离出所有更高的级别。

鉴于：

```
[hello:=[notting],[hill]][3.4(4.56676|5.67787)][the[hill[is[high]]not]] 
```

我想：

```
List("[hello:=[notting],[hill]]", "[3.4(4.56676|5.67787)]", "[the[hill[is[high]]not]]") 
```

我这样做的方法是计算左括号和右括号，并在我将计数器设为 0 时添加到列表中。但是，我有一个丑陋的命令式代码。您可以假设原始字符串格式正确。

我的问题是：解决这个问题的好方法是什么？

注意：我曾考虑过使用 for...yield 构造，但考虑到计数器的使用，我无法获得简单的条件（我也必须有条件来更新计数器）而且我不知道如何使用它在这种情况下构造。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T18:30:49.800

Quick solution using Scala parser combinator library:

```
import util.parsing.combinator.RegexParsers

object Parser extends RegexParsers {
  lazy val t = "[^\\[\\]\\(\\)]+".r

  def paren: Parser[String] =
    ("(" ~ rep1(t | paren) ~ ")" |
     "[" ~ rep1(t | paren) ~ "]") ^^ {
      case o ~ l ~ c => (o :: l ::: c :: Nil) mkString ""
    }

  def all = rep(paren)

  def apply(s: String) = parseAll(all, s)
} 
```

Checking it in REPL:

```
scala> Parser("[hello:=[notting],[hill]][3.4(4.56676|5.67787)][the[hill[is[high]]not]]")
res0: Parser.ParseResult[List[String]] = [1.72] parsed: List([hello:=[notting],[hill]], [3.4(4.56676|5.67787)], [the[hill[is[high]]not]]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T14:00:10.643

关于什么：

```
def split(input: String): List[String] = {
  def loop(pos: Int, ends: List[Int], xs: List[String]): List[String] =
    if (pos >= 0)
      if ((input charAt pos) == ']') loop(pos-1, pos+1 :: ends, xs)
      else if ((input charAt pos) == '[')
        if (ends.size == 1) loop(pos-1, Nil, input.substring(pos, ends.head) :: xs)
        else loop(pos-1, ends.tail, xs)
      else loop(pos-1, ends, xs)
    else xs
  loop(input.length-1, Nil, Nil)
}

scala> val s1 = "[hello:=[notting],[hill]][3.4(4.56676|5.67787)][the[hill[is[high]]not]]"
s1: String = [hello:=[notting],[hill]][3.4(4.56676|5.67787)][the[hill[is[high]]not]]

scala> val s2 = "[f[sad][add]dir][er][p]"
s2: String = [f[sad][add]dir][er][p]

scala> split(s1) foreach println
[hello:=[notting],[hill]]
[3.4(4.56676|5.67787)]
[the[hill[is[high]]not]]

scala> split(s2) foreach println
[f[sad][add]dir]
[er]
[p] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T15:14:02.833

鉴于您的要求，计算括号似乎非常好。您将如何以实用的方式做到这一点？您可以使状态显式传递。

所以首先我们定义我们的状态，它将结果累积`blocks`或连接到下一个`block`并跟踪深度：

```
case class Parsed(blocks: Vector[String], block: String, depth: Int) 
```

然后我们编写一个处理返回下一个状态的纯函数。希望我们可以仔细查看这个函数并确保它是正确的。

```
def nextChar(parsed: Parsed, c: Char): Parsed = {
  import parsed._
  c match {
    case '[' | '(' => parsed.copy(block = block + c,
                                  depth = depth + 1)
    case ']' | ')' if depth == 1 
                   => parsed.copy(blocks = blocks :+ (block + c),
                                  block = "",
                                  depth = depth - 1)
    case ']' | ')' => parsed.copy(block = block + c,
                                  depth = depth - 1)
    case _         => parsed.copy(block = block + c)
  }
} 
```

然后我们只是使用 a`foldLeft`来处理具有初始状态的数据：

```
val data = "[hello:=[notting],[hill]][3.4(4.56676|5.67787)][the[hill[is[high]]not]]"
val parsed = data.foldLeft(Parsed(Vector(), "", 0))(nextChar) 
parsed.blocks foreach println 
```

返回：

```
[hello:=[notting],[hill]]
[3.4(4.56676|5.67787)]
[the[hill[is[high]]not]] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T16:54:38.240

你有一个丑陋的命令式解决方案，那么为什么不做一个好看的呢？:)

这是对 huynhjl 解决方案的命令式翻译，但只是张贴以表明有时命令式是简洁的，也许更容易理解。

```
 def parse(s: String) = {
    var res = Vector[String]()
    var depth = 0
    var block = ""
    for (c <- s) {
      block += c
      c match {
        case '[' => depth += 1
        case ']' => depth -= 1
                    if (depth == 0) {
                      res :+= block
                      block = ""
                    }
        case _   =>
      }
    }
    res
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T11:53:51.723

尝试这个：

```
val s = "[hello:=[notting],[hill]][3.4(4.56676|5.67787)][the[hill[is[high]]not]]"
s.split("]\\[").toList 
```

返回：

```
List[String](
  [hello:=[notting],[hill],
  3.4(4.56676|5.67787),
  the[hill[is[high]]not]]
) 
```

# iphone - 媒体查询和 firefox/chrome

> ID：10010283
> 
> 赞同：0
> 
> 时间：2012-04-04T11:35:47.793
> 
> 标签：iphone, css, media-queries

嗨，我有一个被 ios 模拟器接收的媒体查询

```
<link rel="stylesheet" media="all and (max-device-width: 480px)" href="css/iphone.css"> 
```

我想做的是通过调整浏览器的大小在 Firefox 或 chrome 上模拟这个，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:07:24.517

```
<link type="text/css" rel="stylesheet" href="css/iphone.css" media="all and (max-width: 480px)" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:56:31.677

你需要使用`max-width`. `max-device-width`是物理屏幕尺寸，因此不会改变。请参阅：[移动网络的 max-device-width 和 max-width 有什么区别？](https://stackoverflow.com/questions/6747242/what-is-the-difference-between-max-device-width-and-max-width-for-mobile-web)

但是，这并不能完全解决您的 iOS 问题，因为 Safari 默认报告的宽度（但不是设备宽度）为 980 像素，因此并非为移动设备设计的页面显示为完全缩小的页面。因此，您还需要在 HTML 中添加如下内容：

```
<meta name="viewport" content="initial-scale = 1.0"> 
```

您可以在此处找到 Apple 关于视口设置的参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T12:07:51.807

Yes you can directly simulate this on Firefox and chrome. But Firefox doesn't support media queries below 480.

You can also check the below link for re-size in Firefox & chrome. [http://www.smashingmagazine.com/](http://www.smashingmagazine.com/)

Hope This Helps

# c++ - 在opengl应用程序中不断滞后

> ID：10010285
> 
> 赞同：0
> 
> 时间：2012-04-04T11:35:58.817
> 
> 标签：c++, winapi, opengl, lag

我在我的 opengl 应用程序中遇到了一些重复的滞后。我正在使用 win32 api 创建窗口，并且还在创建 2.2 上下文。所以程序的主循环很简单：

*   清除颜色缓冲区
*   画一个三角形
*   交换缓冲区。

三角形正在旋转，这就是我可以看到滞后的方式。我的帧时间也不流畅，这可能是问题所在。但我非常确定增量时间计算是正确的，因为我尝试了很多方法。

您认为这可能是图形驱动程序的问题吗？因为我的一个朋友运行几乎完全相同的程序，除了我做的计算更少+我使用的是标准的 opengl 着色器。此外，他的程序比我的程序使用更多的 CPU 功率，并且 CPU 百分比比我的更平滑。

我还应该补充一点：在我的笔记本电脑上，我每隔约 1 秒就会有相同的延迟，所以我可以看到某种模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:15:39.000

抖动的帧速率有很多原因。在我的头顶上：

*   在每一帧结束时不调用 glFlush()
*   其他正在运行的软件干扰
*   在代码中做某些图形驱动程序不喜欢的事情
*   图形驱动程序中的错误
*   使用具有可怕分辨率的标准 Windows 时间函数

试试这些：

*   尽可能多地杀死正在运行的程序。`CTRL`为此，请使用任务管理器 ( - `SHIFT`- `ESC`)中的进程选项卡。
*   一点一点地减少程序正在执行的工作量，看看它如何影响帧速率和显示的平滑度。
*   如果可以，请尝试启用/禁用垂直同步（您可以在显卡设置中执行此操作），看看是否有帮助
*   添加一些调试代码以输出绘制每一帧所花费的时间，并查看数字是否存在异常，例如每 20 帧需要额外的 20 毫秒，或者随机帧需要 100 毫秒。

# javascript - “indexOf”作为 IE8 中“for ... in”cicle 中数组的键

> ID：10010286
> 
> 赞同：0
> 
> 时间：2012-04-04T11:36:04.357
> 
> 标签：javascript, internet-explorer, internet-explorer-8, prototype, ecmascript-5

我使用了[此处](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)描述的代码，但现在，当我执行“for ... in ...”cicle 时，它​​会将函数“indexOf”作为数组的索引位置...

示例代码：

```
var the_array=new Array();                  
for (key in the_array){
    console.log(key +"  -  "+the_array[key]);
} 
```

此代码在控制台中显示：

```
indexOf  -  function (searchElement /*, fromIndex */ ) {  
    "use strict";  
    if (this == null) {  
       throw new TypeError();  
    }  
    var t = Object(this);  
    var len = t.length >>> 0;  
    if (len === 0) {  
        return -1;  
    }  
    var n = 0;  
    if (arguments.length > 0) {  
        n = Number(arguments[1]);  
        if (n != n) { // shortcut for verifying if it's NaN  
            n = 0;  
        } else if (n != 0 && n != Infinity && n != -Infinity) {  
            n = (n > 0 || -1) * Math.floor(Math.abs(n));  
        }  
    }  
    if (n >= len) {  
        return -1;  
    }  
    var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);  
    for (; k < len; k++) {  
        if (k in t && t[k] === searchElement) {  
            return k;  
        }  
    }  
    return -1;  
} 
```

我怎样才能防止函数作为数组上的键出现？

顺便说一句，我知道我可以使用 jquery 的 inArray 函数，但是在这种情况下，我想使用“indexOf”函数......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:48:41.240

`for...in`由于这个和其他原因，在数组上使用是个坏主意。在这里查看我的答案：

[为什么带有数组的“for(var item in list)”在 JavaScript 中被认为是不好的做法？](https://stackoverflow.com/questions/2265167/why-is-forvar-item-in-list-with-arrays-considered-bad-practice-in-javascript/2265195#2265195)

# jquery - 如何检查 jQuery Cycle 幻灯片放映是否因此日志“ [cycle] terminating; too little slides: 1 ”而终止

> ID：10010289
> 
> 赞同：1
> 
> 时间：2012-04-04T11:36:14.053
> 
> 标签：jquery, jquery-cycle

我必须检查一个 jQuery Cycle 幻灯片是否被终止。我需要检查这个，因为我有多个幻灯片，我按顺序运行它，但是，当日志“ [cycle] terminating; too little slides: 1 ”出现时，因为幻灯片只有一页，它会阻止所有 Cycle 选项“之后”和“之前”，所以它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:42:17.510

我不确定它为什么会给您带来问题，您可能需要详细说明正在发生的确切问题。您可以在初始化循环之前检查是否存在任何幻灯片，如下所示：

```
if ($('#slideshow').children().length > 1) {
    $('#slideshow').cycle();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:50:46.403

您可以尝试在 Cycle 中修复，但更简单的方法是不要将 Cycle 功能附加到少于两个项目的“幻灯片”。

编辑：正是@Christian Varga sussests。

# android - android项目中类之间的通信

> ID：10010296
> 
> 赞同：0
> 
> 时间：2012-04-04T11:36:31.180
> 
> 标签：android

一个多星期以来，我一直在努力解决一个问题。

我有一个包含 3 个扩展 View 的子类的主要活动。当一个 View 类发生触摸事件时，调用其他 2 个 View 类中的某个方法会与该事件同步。但我不知道如何调用某个方法。换句话说，我不知道如何在扩展 View 的类之间进行通信。

有谁知道如何弄清楚？任何意见将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:46:39.253

在您的活动中，创建您要访问并调用该方法的该类的实例。

让我们假设 3 个类，其中 classone、classtwo 和 classthree，每个类都有一个名为 method 的方法。

在你的活动中

```
classone test = new classone();

test.method(); 
```

# firebird - 偏移量 951 处的请求 BLR 无效

> ID：10010300
> 
> 赞同：1
> 
> 时间：2012-04-04T11:36:41.600
> 
> 标签：firebird, database-migration, interbase

我有由 Firebird 1.0 创建的 gdb 文件（另外 25GB 约 38GB）。在打开某些表期间，它们显示错误 [running Firebird Server 1.0 (stopped Interbase 7.5)]-> Invalid request BLR at offset 951 这是什么意思？

另外我想把它转换成 Interbase 7.5 它有 ODS 版本。10（通过 gstat -h）。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:38:52.410

首先尝试检查数据库是否损坏并可能修复它：

```
gfix -mend -full -ignore -user SYSDBA -pas masterkey database.gdb 
```

如果报告错误，则执行备份-恢复周期：

```
gbak -b -ig -g -user SYSDBA -pas masterkey server:database.gdb database.gbk

gbak -c -user SYSDBA -pas masterkey database.gbk server:new.gdb 
```

如果还原失败，那么您需要在停用索引的情况下进行还原，并在以后一一激活它们：

```
gbak -c -i -n -o -user SYSDBA -pas masterkey database.gbk server:new.gdb 
```

我相信 Firebird 1.0 是一个增强的 Interbase 6.0。因此，FB 1.0 的备份有可能使用 IB 7.5 恢复。如果不是，那么您总是有一个将数据库转储到 sql INSERT 命令的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:35:45.433

关于转Interbase——Firebird 1.0 ODS应该和当时的Interbase基本一样，所以你可以在FB下创建备份，在IB 7.5下恢复。如果这不起作用，您必须在 IB 中创建新的空数据库，然后使用[Clever Component 的 Interbase DataPump](http://www.clevercomponents.com/products/datapump/index.asp)或其他类似工具将数据从 FB“泵”到 IB。鉴于数据库的大小，无论哪种方式都将是一个漫长的等待......

抱歉，不知道错误 - 它可能表明数据库/某些表已损坏，或者只是您使用 IB 更改了数据库的元数据，现在 FB 不理解这些更改（因为 IB7.5 BLR 是可能与 FB1.0 不兼容）。

# android - 使用本机库调试 APK

> ID：10010305
> 
> 赞同：0
> 
> 时间：2012-04-04T11:37:11.900
> 
> 标签：android, debugging, android-ndk, native, native-code

我有一个从 Eclipse 生成的 APK，其中包含一个打包在 APK 内的本机库。
我在收到 BOOT_COMPLETED 时启动服务。普通版的 SO 文件和 APK 运行良好。

我已经设置了调试环境并尝试调试此应用程序和本机代码。

现在的问题是，如果我通过它安装`ADB install my.pack.age.app`它被复制到`data/app`然后我没有得到`BOOT_COMPLETED`意图。

当我手动将此 apk 放入`system/app`文件夹时，由于未找到库，出现不满意的链接器错误。它正在路径中搜索`data/data/my.pack.age.app/lib`。

我有使用`gdbserver`文件生成的本机库的调试版本，其他`gdb.setup`和其他东西都已正确设置以进行调试。

**在文件夹中安装时如何调试此 apk `/system/app`？**

`PS: Modifying the Packages.xml and packages.list by hand and changing the path of native library is not in my option as it would require every time to modify that file & may get corrupt installation.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:57:48.627

我发现了问题，对于与来自 OEM 的设备捆绑的系统 APK，
您必须将库放在 System/lib 文件夹中，以便系统/应用文件夹中的所有 APK。
我把它打包在APK里面。

# flash - 检测是否在资源管理器中激活了插件

> ID：10010306
> 
> 赞同：0
> 
> 时间：2012-04-04T11:37:14.183
> 
> 标签：flash, internet-explorer, plugins, detection

我使用plupload并遇到问题。如果浏览器中安装了 flash，则 Plupload 将使用 flash。但是如果安装了闪存但停用了...错误。

在我的页面中，我想找到一个脚本来了解 Flash 是否已激活（不仅已安装）。我在网站上找到了这段代码

```
for (var el in navigator.plugins) {
if (navigator.plugins[el].name &&
    navigator.plugins[el].name.toLowerCase().indexOf('shockwave') !== -1) {
    console.log(navigator.plugins[el]);
}
} 
```

但这似乎不适用于 IE。

我能找到一种方法来检查吗？

# regex - 这个数字提取正则表达式有什么问题？

> ID：10010308
> 
> 赞同：1
> 
> 时间：2012-04-04T11:37:18.247
> 
> 标签：regex

我有一个如下字符串：

```
<br><b>224h / 15.45 verbuchte Stunden</b> 
```

我想提取数字并创建了以下正则表达式：

```
([0-9]\.?[0-9]{0,2})h\s\/\s([0-9]\.?[0-9]{0,2}) 
```

但是对于前面的字符串，这给了我数字 224 和 15 而不是 15.45。这个正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:39:38.140

因为您只允许在点之前有一位数字。

试试这个，我`{1,2}`在点之前用作量词，根据您的需要更改它。可能`+`会是一个更好的选择，它允许一个或多个。

```
([0-9]\.?[0-9]{0,2})h\s\/\s([0-9]{1,2}\.?[0-9]{0,2}) 
```

一个更好的正则表达式可能是这个

```
([0-9]+(?:\.[0-9]{1,2})?)h\s*\/\s*([0-9]+(?:\.[0-9]{1,2})?) 
```

我在这里将完整的小数部分设为可选，并且在点之后至少需要一位且最多 2 位数字，并且在之前至少需要一位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:47:01.550

答案由[stema给出](https://stackoverflow.com/a/10010345/256544)。

如果您的正则表达式引擎支持字符类，它可能会更紧凑一点，如下所示：

```
(\d{1,2}\.?\d{0,2})h\s/\s(\d{1,2}\.?\d{0,2}) 
```

`\d`是一个[速记字符](http://www.regular-expressions.info/charclass.html#shorthand)类`[0-9]`

# vb.net - 如何正确枚举选定路径中的文件？

> ID：10010317
> 
> 赞同：0
> 
> 时间：2012-04-04T11:37:48.960
> 
> 标签：vb.net, file-io, iteration

Visual Studio 2008 (vb.net) 我制作了简单的 anivirus，但是当我通过这段代码进行全面扫描时：

```
FolderBrowserDialog1.SelectedPath = ("C:\")
    'first scan:************************************
    Try

        For Each strDir As String In
        System.IO.Directory.GetDirectories(FolderBrowserDialog1.SelectedPath)

            For Each strFile As String In System.IO.Directory.GetFiles(strDir)

                ListBox1.Items.Add(strFile)

            Next
        Next

        'Start the timer:

    Catch ex As Exception
    End Try

    Timer1.Start()` 
```

只需扫描前 6 个文件...我认为问题来自 Windows 文件夹权限（Windows - 程序文件...等）那么如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:37:20.787

将 a`Console.WriteLine(ex)`在您的 catch 块中，以便您可以看到抛出的任何异常。那时你可能会看到你的问题。最有可能的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:10:36.850

您可以尝试以下方法：

```
For Each strFile As String In System.IO.Directory.GetFiles(strDir, "*", IO.SearchOption.AllDirectories) 
```

**编辑：**

您可以尝试在此线程中找到的最后一个解决方案： [http ://www.vbforums.com/showthread.php?t=624969](http://www.vbforums.com/showthread.php?t=624969)

我自己尝试过，它非常慢，但效果很好。

```
Public Class Form1

    Private Sub foo(ByVal aDir As String)
        Try

            Dim di As New IO.DirectoryInfo(aDir)
            Dim aryFiles() As IO.FileInfo = di.GetFiles("*.*")
            Dim aryDirs() As IO.DirectoryInfo = di.GetDirectories()

            For Each fi As IO.FileInfo In aryFiles
                rslts.Add(fi.FullName)
            Next

            For Each d As IO.DirectoryInfo In aryDirs
                foo(d.FullName)
            Next

        Catch ex As Exception
            'Stop 'the catch should be more specific
        End Try

    End Sub

    Dim rslts As List(Of String)

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        rslts = New List(Of String)
        foo("C:\")
        ListBox1.Items.Clear()
        ListBox1.Items.AddRange(rslts.ToArray)
     End Sub
End Class 
```

看起来您的解决方案本质上是循环遍历它可以找到的第一个文件夹并停在那里。这个解决方案有点不同，因为它会根据起始位置递归地遍历所有文件和文件夹。

# c# - C# 中的可空类型是什么？

> ID：10010319
> 
> 赞同：-1
> 
> 时间：2012-04-04T11:37:56.843
> 
> 标签：c#

```
 int? _fileControlNo = null;
   public int? FileControlNo
    {
        get { return _fileControlNo; }
        set { _fileControlNo = value; }
    } 
```

将空值分配给上述属性时出现语法错误。

```
objDPRUtils.FileControlNo =sArrElements.Value(3)==null ? null : Convert.ToInt32(sArrElements.Value(3)); 
```

如果我能够使用 Nullable 类型在 valuetype 对象中设置 null 值，任何人都可以向我解释为什么会发生错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T11:41:00.203

条件运算符的结果需要具有相同的类型或可以相互隐式转换的类型。

在您的情况下，您有 a`null`和`Int32`- 这些违反了该要求。

`Int32`如果您返回 nullable而不是 an `Int32`，则`null`可以隐式转换为这种类型，并且您的代码将起作用（或者，将 the 强制转换`null`为 an `int?`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:41:36.417

投到`null`_`int?`

```
objDPRUtils.FileControlNo =sArrElements.Value(3)==null ? (int?) null : Convert.ToInt32(sArrElements.Value(3)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T11:44:38.830

条件运算符需要返回相同类型的结果，在您的情况下，它不可能`null`

这应该工作

```
sArrElements.Value(3)==null ? (int?)null : Convert.ToInt32(sArrElements.Value(3)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:42:34.007

尝试像这样直接分配：

```
objDPRUtils.FileControlNo =sArrElements.Value(3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T11:43:45.127

可空类型正如他们所说的那样：也可以存储空值的简单值类型。
我建议您根本不需要最后一行代码。你应该能够逃脱：

```
objDPRUtils.FileControlNo =sArrElements.Value(3); 
```

如果您真的想在 null 的情况下分配另一个值，请使用 null 合并运算符 ??

```
objDPRUtils.FileControlNo =sArrElements.Value(3)??0; 
```

在这种情况下，如果`FileControlNo`右侧为空，则将值 0 分配给 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T11:44:20.727

您的代码混合类型 null 和 Int32 不能像这样在这种情况下混合。它们必须是同一类型。

如果您使用`int.TryParse`并且仅尝试在成功时设置值，您将获得相同的结果，并且可以`HasValue`在该字段上使用来确定其是否为空，这通常是可空类型的使用方式

愚蠢的例子

```
class Program
{
    private static int? _fileControlNo;

    static void Main(string[] args)
    {
        string[] sArrElements = new string[] { "1", "2", "3", null };

        int result;
        if (int.TryParse(sArrElements[3], out result))
        {
            FileControlNo = result;
        }

        if (_fileControlNo.HasValue)
        {
            // do something here
        }
    }

    public static int? FileControlNo
    {
        get { return _fileControlNo; }
        set { _fileControlNo = value; }
    } 

} 
```

您会注意到，`HasValue`在这种情况下，您的测试中的代码将永远不会执行，因为无法设置 _fileControlNo，因为 tryParse 总是失败（更改索引器并且会更改）。

# php - 使用 PHP 读取数据库 GeoIPASNum.dat

> ID：10010321
> 
> 赞同：0
> 
> 时间：2012-04-04T11:38:23.597
> 
> 标签：php

如何使用 PHP 从 GeoIPASNum.dat 获取信息？可能没有内置功能。

# javascript - 如何使用jquery验证是否至少选择了#age-groups、#subjects和#topics中的一个复选框

> ID：10010323
> 
> 赞同：0
> 
> 时间：2012-04-04T11:38:31.463
> 
> 标签：javascript, jquery, validation

在我的上传表单中，我有几个选择框。这些被安排在名为#age-groups、#subjects 和#topics 的div 中。

我希望能够使用 jquery 来确保用户从 3 个单独的 div 中的每一个中单击至少一个复选框。

请有人帮我弄清楚如何做到这一点。

对于单击每个 div 中的至少一个复选框时，我希望函数输出：

```
 if (at least 1 checkbox is ticked in each of the 3 divs)
   {
     $('#two')
         .append('<div class="done rotatetwo wiggler"></div>')
         .addClass('grey')
   } 
```

如果可能，该函数可以在选择最终所需的选择框后立即输出上述代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:43:20.770

您需要检查复选框/选择框的父母以确定。

看看[这个](https://stackoverflow.com/questions/2204250/jquery-check-if-checkbox-is-checked)

基本上，

HTML

```
<fieldset id="age-groups">
  <input type="checkbox" name="chk[]" value="Apples" />
  <input type="checkbox" name="chk[]" value="Bananas" />
</fieldset> 
```

JavaScript/jQuery

```
 var atLeastOneIsChecked_ageGroups = $('#age-groups :checkbox:checked').length > 0; 
```

会为你工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:48:50.537

您需要使用三个选择器来识别三个 DIV 中的任何选中复选框，然后检查`length`生成的 jQuery 对象的属性以确保它们大于零。

```
if($('#age-groups input:checkbox:checked').length && ... ) {
    // do your stuff here
} 
```

我只包含了`#age-groups`div 的选择器，但您应该能够修改它以选择其他两个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:49:38.710

```
$(":checkbox").click(function(){
    if (($("#age-groups input:checked").length>0) && ($("#subjects input:checked").length>0) && ($("#topics input:checked").length>0){
        $('#two').append('<div class="done rotatetwo wiggler"></div>').addClass('grey');
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:49:51.007

——误读了问题。如果您想检查是否在所有相关 div 中选择了至少一个框，这将对您有所帮助。

尝试这样的事情：

```
if($("#age-groups input[name^='foo']:checked:enabled, #subjects input[name^='foo']:checked:enabled, #topics input[name^='foo']:checked:enabled").length > 0)
// at least one selected
else
// none selected 
```

当然，如果您将一个类添加到所有复选框而不是使用父 div 对它们进行分组，这可以简化。

```
if( $("input[name^='foo'].test:checked:enabled").length > 0)
// something selected 
```

希望这可以帮助！

# .net - 用户“xxx”登录失败无法打开明确指定的数据库解决方法

> ID：10010324
> 
> 赞同：3
> 
> 时间：2012-04-04T11:38:34.823
> 
> 标签：.net, sql-server-2008, ef-code-first

我首先使用实体​​框架代码。启动应用程序时，应用程序会尝试在 SQLServer2008R2 上创建数据库。

我收到的错误消息是：

**“用户“NT instans\Networkservice”登录失败无法打开明确指定的数据库”**

在更仔细地查看 SQLServer 日志中的问题后，我可以看到错误代码是：18456 严重性 14，状态为 38。请在以下位置阅读：[http ://sql-articles.com/articles/troubleshooting/troubleshooting-login-失败-错误-18456/](http://sql-articles.com/articles/troubleshooting/troubleshooting-login-failed-error-18456/)

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T01:05:45.510

我只是想在这里放一个我在两个程序员之间浪费太多时间后发现的解决方案：删除`.suo`文件。我意识到最初的问题是在 18 个月前提出的，但它可能会节省将来遇到这个问题的人。

我们尝试安装不同版本的 Visual Studio，删除 localdb 实例，以 SA 身份登录，一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-02T12:04:15.343

我今天在 VS 2015 的 Web API 项目中遇到了非常类似的问题。我从解决方案资源管理器中对我的 C# Web API 项目进行了一次干净的操作，并且它正常工作。这太疯狂了。相同的 sa 凭证（在我的项目的 web.config 文件中配置）全天都在工作，但它突然停止工作。

包括这篇文章在内的许多其他帖子都建议删除 *.suo 文件，但我相信 Visual Studio 不再创建 *.suo 文件。我至少在我的 VS 2015 环境中没有看到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-13T15:05:50.893

我今天有同样的问题。很多事情，包括清理解决方案都没有帮助，但删除 .suo 文件有帮助。它仍然存在，位于与解决方案文件相同的文件夹中，位于隐藏的子文件夹“.vs”中。路径示例：“.vs/solution-name/v16/.suo”。是的，没有名字。我删除了文件并唷，它又可以工作了。

# javascript - 无法使用“window.onbeforeunload”更改网页的位置

> ID：10010326
> 
> 赞同：4
> 
> 时间：2012-04-04T11:38:42.780
> 
> 标签：javascript, jquery, html

谁能告诉我，当他执行以下操作时，我如何发出 AJAX 请求并将用户发送到其他页面？

1.  点击浏览器的下一个，上一个 btns。
2.  以任何方式刷新页面(f5,ctrl+r,refresh btn)。
3.  尝试关闭浏览器的窗口（这里我不想重定向他，只是 AJAX 请求）。

我认为 window.onbeforeunload 可以做到，

```
 window.onbeforeunload = function () {
    makeAjaxCall();
    ------
    ------
  }

 // Ajax Call is successful
  function makeAjaxCall_SuccessHandler() {
    window.location.href = 'Home.html';
 } 
```

但它根本不起作用........在搜索这个主题后，我发现这是一种为浏览器安全制定的规则。所以请告诉我如何做到这一点或任何替代方式来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:44:35.503

我想不是。
浏览器可以在操作后随时停止执行。Ajax 调用是很长的操作。

您可以向用户提出诸如“确定使用`onbeforeunload`吗？”之类的问题。您必须返回字符串或将其分配给`event.returnValue`

你可以在这里阅读[https://developer.mozilla.org/en/DOM/window.onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload)

我认为对于您的问题，您可以尝试进行同步调用或尝试使用一些 GET 参数打开 iframe 或在此函数主体的 iframe 中发送表单数据。但我不确定时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:57:53.317

你没有描述你得到的实际行为，所以我在这里有点猜测，但我认为你的问题在于 AJAX 的异步部分。您会看到，当您的 onbeforeunload 处理程序执行时，它很可能会启动 AJAX 调用，*但*它不会阻止等待其结果返回。相反，执行将继续，并且 onbeforeunload 将在您从 AJAX 请求中获得任何结果之前完成（如果有任何调用）。

首先添加一些调试跟踪以验证您的处理程序是否实际执行。如果是，请添加一个空闲循环以使其保持忙碌（防止它返回）并查看 AJAX 调用是否通过（我会检查服务器端）。

如果确实如此，我想您将不得不修改空闲循环以查阅某种标志。或者更好的是，如果您使用的库允许，使服务器调用同步。

# javascript - 如何从 webkit 的 javascript 中获取 javascript 新对象信息？

> ID：10010331
> 
> 赞同：0
> 
> 时间：2012-04-04T11:38:53.183
> 
> 标签：javascript, webkit, javascriptcore

我想将新的对象信息名称和参数提取到 HTML 页面中。如

```
<script>
    var a = new g(10,20);
</script> 
```

我需要打印：

带有参数 10,20 的新对象 g

我是 Webkit 的新手。最初我想只是在 javascriptcore 中添加一个 printf 语句。我在 JavaScriptCore/runtime/FunctionConstructor.cpp ,ObjectConstructor.cpp 添加了一些 printf 语句。

但没有得到正确的结果。

我用谷歌搜索，但关于 javascriptcore 的教程很少。我希望一些专家能指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:04:06.850

我不确定您使用的是哪个版本的 WebKit，所以我的解决方案可能不起作用。

我建议您在 Interpreter.cpp 中的 DEFINE_OPCODE(op_construct) 块内添加日志记录语句。

# iphone - 在没有任何代码更改的情况下将 iPhone 应用程序作为通用提交是否有效？

> ID：10010332
> 
> 赞同：0
> 
> 时间：2012-04-04T11:38:55.660
> 
> 标签：iphone, ios, app-store

我有一个简单的 iPhone 应用程序，主要是表格视图、地图视图和其他标准内容。当我更改项目设置以使其通用时，经过一些小调整后一切正常。所以 iPad 版本看起来就像一个大的 iPhone 应用程序。

毫无疑问，如果我使用一些拆分视图、弹出窗口并重新设计 UI 以使其在 iPad 上看起来更好，该应用程序会看起来更好。但我想知道——苹果审查团队会接受一个基本上只是 iPhone 应用程序放大版的通用应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:57:30.010

只要您在提交更新时解释发生了什么变化（例如“现在有了 iPad 友好的用户界面！”），Apple*应该*毫无问题地接受您的更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:11:21.497

你有什么好怕的呢？那苹果会给你一个拒绝的理由吗？去做吧，如果你得到反馈，做必要的改变。即使 Apple 是控制狂 #1 和令人卑微的权力怪物巨型公司，我也会更担心它会被发布而用户不会批准它。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:58:31.467

iPad 用户可以按原样下载和运行您的 iPhone 应用程序，并获得相同的结果。从任何非营销的角度来看，将其称为“通用”而不做任何更改会有什么优势？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T17:33:07.273

顺便说一句，我已经提交了应用程序，没有任何更改，并且没有任何问题被接受。

# c# - 如何将数据从 aspx 页面返回到 RTF 字段？

> ID：10010336
> 
> 赞同：2
> 
> 时间：2012-04-04T11:39:06.070
> 
> 标签：c#, asp.net, tridion

我正在自定义功能区工具栏并向其添加一个按钮。每当我单击该按钮时，它将打开一个 aspx 页面，允许作者选择一些数据，这些数据将附加到现有的 RTF 字段内容中。

我们的要求是将数据作为链接返回，即锚元素，每当作者点击链接弹出页面时，必须打开并允许作者选择其他选项；单击提交按钮后，新值必须替换为旧值。

挑战是：

当前弹出页面由 javascript- 打开，它是显示 aspx 页面的入口点。作者选择数据并提交，正是这个 javascript 返回值并附加到 RTF 字段。现在当弹出页面作为独立页面打开时，如何从中返回数据。

早期响应将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:49:51.813

如果只是将内容附加到 RTF 字段，那么使用自定义 URL 会不会少很多工作？

自定义 URL 是您可以在 Schema 字段上设置的链接，它将在组件中显示为该字段标题上的链接。这将打开一个带有指定 URL 的弹出窗口，您可以从那里直接返回该字段（允许您添加或替换现有内容）。

可以在[http://docportal.sdl.com/sdltridion](http://docportal.sdl.com/sdltridion)上找到有关此主题的文档（[直接主题链接](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011/concept_34A7EEA7E40649E79052454C70ED3431)）

用于将内容覆盖或附加到文本字段的自定义 URL HTML 页面示例如下所示：

```
<html>
<head>
<title>Custom URL example</title>
<style>
body {
    background:#fafafa;
    font-family:arial,helvetica,sans-serif;
    font-size:12px;
    line-height:1.5em;
}
a {
    color:#000;
    font-weight:bold;
    text-decoration:none;
}
a:hover {
    color:#666;
}
</style>
<script type="text/javascript" language="javascript" src="/WebUI/Core/Controls/Popup/PopupInit.js"></script>
<script language="JavaScript">
    function overwrite(value) {
        var fields = window.dialogArguments.getFields();
        if (fields && fields.length > 0) {
            if (fields[0].getValues() != null && fields[0].getValues()[0] != null && fields[0].getValues()[0].length > 0) {
                if (!confirm('This will overwrite the existing content of the field. Continue?')) {
                    return;
                }
            }
            fields[0].setValues([value]);
            window.close();
        }
    }
    function append(value) {
        var fields = window.dialogArguments.getFields();
        if (fields && fields.length > 0) {
            var current = '';
            if (fields[0].getValues() != null && fields[0].getValues()[0] != null && fields[0].getValues()[0].length > 0) {
                current = fields[0].getValues()[0];
            }
            fields[0].setValues([current + value]);
            window.close();
        }
    }
</script>
</head>
<body>
    <h1>Make a choise</h1>
    <p><a href="javascript:overwrite(' - dummy content - ')">overwrite current value</a></p>
    <p><a href="javascript:append(' - dummy content - ')">append to current value</a></p>
</body>
</html> 
```

这是一个 HTML 页面，您应该将其放在 ..\Tridion\web 文件夹中的某个位置（我通常会在其中创建一个 CustomURL 子目录，因此您可以像这样引用它：/CustomUrl/example.html）

# android - 如何在构建 Android 应用时禁用某些 Log 功能？

> ID：10010338
> 
> 赞同：4
> 
> 时间：2012-04-04T11:39:22.787
> 
> 标签：android, logging

我使用 Log 函数来调试我的 Android 应用程序。我即将发布我的应用程序，我想降低调试级别。但是我不知道如何禁用其中一些功能。假设我只想禁用 Log.v() 日志。

Android 文档[在这里](http://developer.android.com/guide/publishing/preparing.html)说应该删除代码中的 Log 函数调用或删除/设置为 false android::debbugable 选项。第一个选项不符合我的需要，因为我想在我的源代码中记录调用（以供将来更新）。第二个选项禁用所有日志，不方便预发布测试。

您知道如何仅禁用详细 (Log.v) 日志吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:51:02.113

您可以为 -class 创建自己的包装器`Log`，可能是这样的：

```
static class MyLog{
    private static int mLevel;
    public final static void setLevel(int level){
        mLevel = level;
    }
    public final static void v(String tag, String message){
        if( mLevel > 0 ) return;
        Log.v(tag, message);
    }
    public final static void d(String tag, String message){
        if( mLevel > 1 ) return;
        Log.d(tag, message);
    }
    public final static void i(String tag, String message){
        if( mLevel > 2 ) return;
        Log.d(tag, message);
    }
    //Same for w and e if neccessary..
} 
```

然后，您可以使用`MyLog.setLevel(1);`禁用任何详细日志记录（或更高级别也禁用这些日志）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T11:52:45.610

如果你打算用 Proguard 混淆你的发布，那么把诸如

```
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** v(...);
} 
```

进入配置文件将从您的代码中删除这些类别的日志记录。

# html - 第 4 个孩子之后的 CSS 插入中断

> ID：10010341
> 
> 赞同：8
> 
> 时间：2012-04-04T11:39:29.320
> 
> 标签：html, css, dom, html-lists

目前，此[示例](http://jsfiddle.net/M4aV3/)显示了一个无序列表，其中包含 8 个列表项。

`li`有没有办法只使用 CSS（没有 HTML 或 JavaScript）在第 4项之后插入中断。就像是：

```
ul li:nth-child(4n):after {
    content = '<br>';
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T11:41:06.910

在它之后添加一个块元素：http: [//jsfiddle.net/M4aV3/1/](http://jsfiddle.net/M4aV3/1/)

```
ul li:nth-child(4n):after {
    content: ' ';
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-29T12:11:05.713

您还可以使用中断字符：

```
li:nth-child(4n):after {
   content: '\a';
   white-space: pre;
} 
```

[http://jsfiddle.net/00woyu28/](http://jsfiddle.net/00woyu28/)

# ios - 单击将触发本机 iOS 屏幕的 webview 内的链接（使用从 webview 传递的参数）

> ID：10010342
> 
> 赞同：3
> 
> 时间：2012-04-04T11:39:33.520
> 
> 标签：ios, html, cordova, sencha-touch-2, appcelerator

查看 Facebook iOS 应用程序，可以看到在提要中（例如），单击评论将弹出一个原生 iOS 对话框，以及单击一张照片，也会弹出一个原生 iOS 屏幕。或者单击评论将为此加载不同的 iOS 屏幕。

我正在开发一个混合 iOS 应用程序（html5 + obj-c），并且会喜欢这种功能。我检查过：

[http://en.wikipedia.org/wiki/Multiple_phone_web-based_application_framework](http://en.wikipedia.org/wiki/Multiple_phone_web-based_application_framework)

但不能说哪个最适合。例如，phonegap 非常流行，但不确定这种实现（“本地桥”）是否可行。即使是这样，如果它需要我处理一个主要的学习曲线（它的语法和编写一个特殊的插件）。你会怎么做？哪个FW最合适。我不使用任何系统功能，例如相机/文件系统等。phonegap 提供的本机桥除外，因此请考虑框架大小，这是我需要的唯一部分。话虽如此，该应用程序并不是 100% 的 phonegap 或 100% 的本地应用程序。

我认为 sencha touch 2 对于这个需求目标是不可能的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:59:16.987

是的，您可以使用自定义协议。

在您的 html 中，声明您的 JS 调用函数：

```
function callIt(paramText) {
    var iframe = document.createElement("IFRAME");
    iframe.setAttribute("src", "my-protocol://" + paramText.replace(/ /gi,'%20'));
    document.documentElement.appendChild(iframe);
    iframe.parentNode.removeChild(iframe);
    iframe = null;
} 
```

在 iOS 上，您将使用 webView 委托方法 webView:shouldStartLoadWithRequest:navigationType 拦截调用：

检查请求是否有您的“我的协议：”前缀。在这种情况下，使用示例“://”分隔符从请求中提取您的参数（您也可以使用任何您希望的分隔符），然后返回 NO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T23:03:22.800

**仅使用 sencha 框架**，您可以从您的 javascript 代码进行自定义 url 方案调用

例如 ：

```
window.location='test://'+parameters; 
```

在本机部分，当调用此自定义 url 时，您必须编写协议处理程序，处理程序将在本机部分执行相应的功能。

现在相反，假设现在您想从本机 ios 传递到 sencha，您可以将数据保存在 javascript 文件中并在 sencha 部分使用它，您可以从本机代码调用 javascript 中的函数。

**您不需要使用 phoneGap**，因为您可以访问所有本机框架

# spring-mvc - 如何在 Spring MVC 2.5 中使用 JMF？

> ID：10010349
> 
> 赞同：0
> 
> 时间：2012-04-04T11:39:56.277
> 
> 标签：spring-mvc, jmf

如果我使用 javac 运行我的应用程序，CaptureDeviceManager.getDeviceList(null) 工作正常。但是，如果我在使用 Spring 部署它之后在 tomcat 中运行它，它会返回 null 吗？这里有什么问题？如何在 Spring 2.5 中使用 JMF？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T02:18:51.213

确保 JMF 库位于 CATALINA_HOME/shared/lib 目录中，而不是您的 WEB-INF 目录中。

# asp.net - Asp.NET 4.0菜单控件a：鼠标释放后保持活动样式

> ID：10010350
> 
> 赞同：0
> 
> 时间：2012-04-04T11:40:02.857
> 
> 标签：asp.net, css, menu, pseudo-class

我在 asp.net 4.0 Web 应用程序中使用标准的 asp.net 菜单。澄清一下，它是一个标准的 Web 应用程序，它不是任何可用的 MVC 应用程序版本。

这是我遇到的问题。

这确实是一个相当简单的设置。我有 CSS 覆盖菜单的各种状态，:link、:visited、:hover 和:active。

正如您所怀疑的那样，这些状态之间存在明显的差异。此外，我运行了一些 javascript 来突出显示当前页面的链接，这是另一个相当正常的活动。到目前为止，没有什么神秘或晦涩的。

当人们开始点击菜单时，问题就来了。假设您在主页上。第一个菜单项被突出显示。现在让我们说 - 无论出于何种原因，只有用户可以想出 - 您单击并拖动其中一个菜单项。它不必很远，它可以只有一两毫米。预期的行为是拖动将否定单击，页面将保持在原处，并且单击拖动的菜单项将返回其先前的状态。

实际发生的是拖动否定了单击，页面保持在原位，并且单击拖动的菜单项似乎保留 :active 样式（如果存在），或者 :hover 样式（如果 :active 样式不存在）。

**复制：**

不过，这似乎是 Asp.Net 菜单中的一个错误。

为了尝试在我的项目之外复制问题，我使用 VS2010 中的模板创建了一个沼泽标准 Asp.NET Web 应用程序项目。

我在 Site.css 中更改了一行 - 具体来说，我将 div.menu ul li a:active 中的 :active 样式更改为 color: red;

然后我启动应用程序，单击主菜单项并将其拖动几毫米。

果然，当我放开鼠标按钮时，菜单项卡住了 :active 样式。

**测试**

我最初在 IE8 中发现了这个问题，但是在 IE9 以及 Firefox/Aurora 中仍然存在。

然而，Chrome 和 Safari 大部分情况下会将菜单项恢复到其预期状态。它们都在元素的边缘留下了发光的效果。我还没有在 Opera 中测试过。

**....利润？**

我已经在网上搜寻了解决此问题的方法，但找不到。事实上，很难找到该问题的参考资料，我最接近的是 Sitepoint 的参考页面之一，其中提到了类似于 IE7 中的错误的内容。

[http://reference.sitepoint.com/css/pseudoclass-hover](http://reference.sitepoint.com/css/pseudoclass-hover)

有人有想法么？

**代码**

这是 Site.Master 中的代码 - 我已重命名菜单项以保护罪魁祸首：

```
<div class="topnav">
    <asp:menu id="topnav" runat="server" orientation="Horizontal" renderingmode="List" skiplinktext="" maximumdynamicdisplaylevels="1" viewstatemode="Enabled" >
        <items>
            <asp:menuitem navigateurl="~/Default.aspx" text="Home" value="home"></asp:menuitem>
            <asp:menuitem navigateurl="~/Overview.aspx" text="Overview" value="overview"></asp:menuitem>
            <asp:menuitem navigateurl="~/Benefits.aspx" text="Benefits" value="benefits"></asp:menuitem>
            <asp:menuitem navigateurl="~/Hardware.aspx" text="Hardware" value="hardware"></asp:menuitem>
            <asp:menuitem navigateurl="~/SDK.aspx" text="Develop" value="SDK"></asp:menuitem>
        </items>
    </asp:menu>
</div> 
```

在此期间，我还将发布适用于此菜单的 CSS。

```
.right .topnavcont
{
    width: 767px;
    background-color: #dddddd !important;
    height: 22px;
}

.topnav #topnav li
{
    float: left;
}

.topnav
{
    background-color: #ddd;      
    line-height: 22px;
    float: right;
    margin-right: 11px;
    background: url(../img/shadow.gif) repeat-y top right;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #777;
    text-align: center;
}

.topnav li
{
    width: 109px;
}

.topnav a:link, .topnav a:visited
{
    color: #777;
    display: block;
    background-image: url(../img/bg_n-s.gif);
    background-repeat: repeat-x;
    text-decoration: none;
    visibility: visible;
}

.topnav  a:hover
{
    color: #fff !important;
    background-image: url(../img/bg_h-s.gif);
    display: block;
    visibility: visible;
}

.topnav a:active
{
    background-image: url(../img/bg_a-s.gif);
    display: block;
    color: #fff;
    visibility: visible;
}

.topnav .current
{
    color: #fff !important;
    background-image: url(../img/bg_h-s.gif) !important;
} 
```

最后但并非最不重要的一点是，我在页面上运行的 javascript 来协助这个菜单。

```
$(function ()
{
    var pathname = (window.location.pathname.match(/[^\/]+$/)[0]);
    $('.topnav ul li a').each(function ()
    {
        if ($(this).attr('href') == pathname)
        {
            $(this).addClass('current');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:16:09.370

在扯掉我的头发并考虑从事篮子编织之后，我想我已经设法想出了一个半生不熟的解决方案。

秘密在于 Asp.Net Menu 控件完全无法正确处理 css 伪类。

在上面的代码中，您可以看到我定义了一个 a:active 伪类，这就是问题所在。

Asp.Net 不希望您使用伪类，它希望您在设计时使用 Web 控件中公开的属性。因此，不要仅仅坚持使用古老的 :link:visited:hover:active 伪类，而是应该设置属性`staticselectedstyle-cssclass`。

不一定是坏事，尽管它看起来有点冗长和违反直觉。

不过要记住的是要确保以元素为目标的 :active 伪类不在`staticselectedstyle-cssclass`代码之前，因为出于某种原因，浏览器似乎只从每个类中获取点点滴滴，与此同时，一切都错了。

所以现在，我的 topnav 的 CSS 看起来像这样：

```
.topnav
{
    background-color: #ddd;
    /*margin-top: 1px;*/
    line-height: 22px;
    float: right;
    margin-right: 11px;
    background: url(../img/shadow.gif) repeat-y top right;

    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #777;
    text-align: center;
}

.topnav #topnav li
{
    float: left;
}

.right .topnavcont
{
    width: 767px;
    background-color: #dddddd !important;
    height: 22px;
}

.topnav li
{
    width: 109px;
}

.topnav a:link, .topnav a:visited
{
    color: #777;
    display: block;
    background-image: url(../img/bg_n-s.gif);
    background-repeat: repeat-x;
    text-decoration: none;
    visibility: visible;
}

.topnav  a:hover 
{
    color: #fff !important;
    background-image: url(../img/bg_h-s.gif);
    display: block;
    visibility: visible;
}

topnav .staticmenuitemselected
{
    color: #777;
    display: block;
    background-image: url(../img/bg_n-s.gif);
    background-repeat: repeat-x;
    text-decoration: none;
    visibility: visible;
} 
```

不过，我还没有完全完成对 :active 伪类的试验，因为我确实希望单击菜单上的按钮的行为在它执行那种华丽的点击操作时给我一个温暖的模糊光晕。

感谢您阅读/希望这对某人有所帮助。

# wpf - 如何在 WPF ListView 中使用 ItemTemplateSelector 和 HeaderTemplate？

> ID：10010351
> 
> 赞同：9
> 
> 时间：2012-04-04T11:40:07.630
> 
> 标签：wpf, listview, datatemplate, datatemplateselector

假设以下 XAML 定义的窗口：

```
<Window x:Class="LayoutTests.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:LayoutTests"
        Title="Window1">
  <Window.Resources>
    <XmlDataProvider x:Key="XmlData" IsInitialLoadEnabled="True">
      <x:XData>
        <Items xmlns="">
          <Item text="Item 1" type="A" />
          <Item text="Item 2" type="B" />
          <Item text="Item 3" type="A" />
        </Items>
      </x:XData>
    </XmlDataProvider>
    <DataTemplate x:Key="TypeATemplate">
      <TextBlock Text="{Binding XPath=./@text}" Foreground="Red"/>
    </DataTemplate>
    <DataTemplate x:Key="TypeBTemplate">
      <TextBlock Text="{Binding XPath=./@text}" Foreground="Green"/>
    </DataTemplate>
    <DataTemplate x:Key="HeaderTemplate">
      <TextBlock Text="A Header"/>
    </DataTemplate>
    <local:TypeSelector x:Key="TypeSelector" TypeATemplate="{StaticResource TypeATemplate}" TypeBTemplate="{StaticResource TypeBTemplate}"/>
  </Window.Resources>
    <Grid>
    <ListView ItemsSource="{Binding Source={StaticResource XmlData}, XPath='/Items/Item'}" ItemTemplateSelector="{StaticResource TypeSelector}">
      <!--<ListView.View>
        <GridView>
          <GridViewColumn Width="Auto" HeaderTemplate="{StaticResource HeaderTemplate}"/>
        </GridView>
      </ListView.View>-->
    </ListView>
  </Grid>
</Window> 
```

并`DataTemplateSelector`在后面的代码中定义如下：

```
 public class TypeSelector : DataTemplateSelector
  {
    public DataTemplate TypeATemplate { get; set; }
    public DataTemplate TypeBTemplate { get; set; }
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
      var element = item as XmlElement;
      if (element.Attributes["type"].Value == "A")
        return TypeATemplate;
      else
        return TypeBTemplate;
    }
  } 
```

如果没有注释掉标头模板的代码，则不再调用 DataTypeSelector。**如何同时指定 a`DataTemplateSelector`和`HeaderTemplate`？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T11:55:42.593

我认为您要做的是设置单个 GridViewColumn 及其标题的样式。所以将 TemplateSelector 从 ListView 移动到 GridViewColumn 定义：

```
<Grid>
  <ListView ItemsSource="{Binding Source={StaticResource XmlData}, XPath='/Items/Item'}">
  <ListView.View>
    <GridView>
      <GridViewColumn Width="Auto" CellTemplateSelector="{StaticResource TypeSelector}" HeaderTemplate="{StaticResource HeaderTemplate}"/>
    </GridView>
  </ListView.View>
  </ListView>
</Grid> 
```

# ios - 在 iOS 中使用位置服务的应用程序可以在启动时自动启动吗

> ID：10010355
> 
> 赞同：2
> 
> 时间：2012-04-04T11:40:34.003
> 
> 标签：ios, gps, autostart

虽然我在**苹果的文档**中阅读了基于**VoIP**的应用程序将在启动后**自动**启动，但没有提及使用**GPS**的应用程序。这应该意味着**注册 GSP 的应用程序不会**在设备启动时自动启动。

但是，在继续之前，我***需要***确保我的理解是正确的。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:28:14.580

There is no concept of "auto start" in iOS neither the concept of "boot time" from the point of view of 3rd party apps. When the OS starts all applications that were open before the shutdown will be "opened" again and put in inactive state. VoIP and GPS applications can request something like 10s CPU in every 10 mins. These cycles will be restarted automatically after device boot if the application was running before shutdown. However this is not "autostart" behavior.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T16:00:05.067

您可以使用 voip 等后台服务启动应用程序。您可以通过在 info.plist 文件上启用它来激活此服务。

# php - 链接到 wordpress 中的自定义 php 主题页面

> ID：10010359
> 
> 赞同：1
> 
> 时间：2012-04-04T11:40:44.143
> 
> 标签：php, wordpress, templates, hyperlink

我想将模板 php 页面 (header.php) 链接到我在同一主题中制作的自定义 php 页面 (cmenu.php)。我已经通过谷歌搜索了很多网站，也通过 Wordpress Codex 搜索了如何实现这一点，但我似乎找不到它。

在我的 header.php 页面中，我有一个 div，我想要一个 url href 链接到我的自定义菜单，名为`cmenu.php`. （我想将其链接到该页面以更适合移动设备。）

我尝试了在 codex 和 google 中找到的以下代码，但它们都不起作用：

`get_cmenu()`

`get_template_part('cmenu')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:33:55.040

制作要链接到[模板页面](http://codex.wordpress.org/Theme_Development#Custom_Page_Templates)的页面并制作页面并将该模板分配给它。
在模板页面中，您可以运行所需的所有自定义代码。

# c# - DevExpress Wpf GridControl 的过滤问题

> ID：10010360
> 
> 赞同：0
> 
> 时间：2012-04-04T11:40:45.137
> 
> 标签：c#, wpf, .net-4.0, devexpress, gridcontrol

这是我的问题：我正在使用 DexExpress wpf 开发应用程序`GridControl 10.1, c#, Net 4.0`，并使用复选框下拉列表来过滤列。现在，当我在列上设置过滤器，然后尝试在第二个过滤器上进行过滤时，在第二个过滤器上，它会显示该列的所有值，而不仅仅是可见的值。让我举个例子：

> C. A C. B C. C
> 1 A q
> 2 C a
> 1 B q
> 2 C t
> 2 D f

Noe：如果在 Col. A 上设置 filter `"[Col. A] = 2"`，然后我在 B 列上下拉清单过滤器，我看到：

> A
> B
> C
> D

虽然我只会看到：

> 光盘_

（如在 Excel 中）... 我能做什么？

提前致谢！

路易吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T19:42:24.107

该解决方案由 DevExpress 支持团队在此处提供：[filter popup](http://www.devexpress.com/Support/Center/p/Q243835.aspx)

# iphone - UIScrollView 滚动方向

> ID：10010361
> 
> 赞同：0
> 
> 时间：2012-04-04T11:40:48.573
> 
> 标签：iphone, uiscrollview, paging, direction

我正在使用 UIScrollView 在 3 个不同的 UIView 之间水平滚动（我称它们为页面，因为我有 `scrollView.pagingEnabled=YES;`）。每个页面也可以垂直滚动。我的问题是，即使我使用`scrollView.directionalLockEnabled=YES;`它仍然会双向滚动。我怎样才能阻止这种情况发生。(I want a similar behavior with the one that the Calendar app has, when Day mode is selected; I have already checked some calendar apps, but they don't have the horizo​​ntal scrolling enabled).

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:45:32.400

将 scrollView 的内容大小设置为等于 scrollView 高度。

```
scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * pages.count,scrollView.frame.size.height); 
```

# php - 拖放保存定位问题

> ID：10010365
> 
> 赞同：1
> 
> 时间：2012-04-04T11:41:04.733
> 
> 标签：php, javascript, jquery, html, css

我目前正在使用拖放脚本并保存（位置：相对）div（s）的左侧和顶部坐标。我的问题是，当我重新加载时，保存它们的坐标并不总是相同的位置（如放置）。

div 位于具有给定高度和宽度的容器内（此容器限制 div 仅在其中移动 - 周边 div）

所以我试图让坐标只在 DIV 内工作/空间，而不是整个页面。

我正在使用 PHP 为该页面获取正确的 div/小部件，该页面提供小部件类（背景和其他基于 css 的变量）

所有小部件都有一个自定义 ID，以防有多个特定小部件

**这是我的主要代码：**

```
<?
    $load = mysql_query("SELECT * FROM `widgets` WHERE `page`='1' AND `show`='yes'")or die(mysql_error());
    while($widget = mysql_fetch_array($load)){
?>
<div id="<? echo $widget['id']; ?>" style="left: <? echo $widget['left']; ?>px; top: <? echo $widget['top']; ?>px;" class="<? echo $widget['widgetid']; ?> draggable ui-widget-content" onmouseup="find('<? echo $widget['id']; ?>','1')"> </div>
<? } ?> 
```

这是我用于保存的 Javascript：

```
function find(id, page){
    var position = $("#"+id).position();
    $.ajax({
        type: "POST",
        url: "save.php",
        data: "l=" + position.left + "&t=" + position.top + "&request=" + page + "&w=" +id,
        success: function(msg){
            var element = document.getElementById(id);
            element.style.opacity = "1.0";
        }
    });
} 
```

l 是左边，t 是顶部，都发送 onmouseup (w = widgetid, request = pageid)

变量正在保存到数据库中，只是没有正确放置在页面上（向右移动很远或稍微向上移动）

任何帮助将不胜感激！

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:34:56.120

如[jQuery 文档](http://api.jquery.com/position/)中所述`.position()`：

> 获取匹配元素集中第一个元素相对于偏移量**parent**的当前坐标。

如果你继续阅读，它会说

> 将此与 .offset() 进行对比，后者检索相对于**文档**的当前位置。

# silverlight-toolkit - Silverlight 5 中的 Dataform 和工具包 NumericUpDown 未按预期工作

> ID：10010369
> 
> 赞同：1
> 
> 时间：2012-04-04T11:41:09.587
> 
> 标签：silverlight-toolkit, silverlight-5.0

我们刚刚将旧的 Silverlight 4 应用程序迁移到 Silverlight 5 并注意到我们的一个 Dataforms 存在问题。有问题的 Dataform 包含来自 SL5 工具包的 NumericUpDown 控件。我们注意到 CommitEdit 在以下情况下似乎没有触发（即它返回 false）：

1) 打开包含 DataForm 的弹出窗口

2) 通过单击向上或向下箭头更改 NumericUpDown 控件中的值。

3) 单击连接到 Dataform 的 Save 按钮。

连接保存按钮的Click事件代码如下：

```
private void OKButton_Click(object sender, RoutedEventArgs e)
{
    if (updateUserDataForm.ValidateItem())
        updateUserDataForm.CommitEdit(true);
    else
        updateUserDataForm.CancelEdit();
} 
```

XAML 是：

```
 <toolkit:DataField Label="Display Order" LabelStyle="{StaticResource LabelStyles}" HorizontalAlignment="Left">
            <toolkit:NumericUpDown Minimum="1" Maximum="200" Value="{Binding DisplayOrder, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ValueChanged="NumericUpDown_ValueChanged"/>

        </toolkit:DataField> 
```

当您在单击“保存”按钮之前首先在表单焦点上提供另一个控件时，CommitEdit 工作正常。当我们使用 SL 4 工具包中的 DatForm 和 NumericUpDown 控件时，我们从未遇到过这种行为。这是 SL5 工具包引入的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:26:03.637

OK it appears that this is actually a bug:

[http://forums.silverlight.net/t/182569.aspx/1](http://forums.silverlight.net/t/182569.aspx/1)

I have fixed it by extending the NumericUpDown control as described here:

[http://silverlight.codeplex.com/workitem/4633](http://silverlight.codeplex.com/workitem/4633)

I'm sure this must be a bug specific to the SL5 toolkit.

# ruby-on-rails - Ruby-on-Rails 每当通过 Javan 工作步骤

> ID：10010371
> 
> 赞同：1
> 
> 时间：2012-04-04T11:41:28.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cron, crontab, cron-task

我在 javan 教程中遵循 railscast，但我似乎无法实现它。是否必须安装 capistrano 才能进行 cron 工作？这是因为我没有 deploy.rb。我详细列出了步骤。如果我错过了任何步骤导致我的 cron 无法工作？我总是收到报告说我收到了一封新邮件，但我没有发送任何电子邮件操作。

步骤1：

```
wheneverize . 
```

====> 配置文件夹中的 schedule.rb

第 2 步：[Scheduler.rb]

```
every '1 * * * *' do
   runner 'Company.count'
end 
```

第三步：【什么是“存储”？】

```
whenever --update-crontab store 
```

第 4 步：[config/deploy.rb]<-- 我没有部署文件，所以我自己创建了它。

```
after "deploy:symlink", "deploy:update_crontab"  

namespace :deploy do  
  desc "Update the crontab file"  
  task :update_crontab, :roles => :db do  
     run "cd #{release_path} && whenever --update-crontab #{application}"  
  end  
end 
```

第 5 步：

```
whenever --update-crontab store

crontab -l 
```

我错过了什么？为什么它不起作用？请逐步启发我，因为我是ROR的新手..谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:38:27.993

[When 文档](https://github.com/javan/whenever)有一个使用*Capistrano部署**Whenever*的示例。只需将以下内容添加到*Capistrano*部署配置的顶部即可。

 **```
set :whenever_command, "bundle exec whenever"  # set this first if using bundler
require "whenever/capistrano" 
```

然后，*无论何时*将作为部署的一部分安装到*cron中。*

* * *

**更新**

要测试是否已成功更新*cron*，请以目标机器的 Capistrano 部署用户*身份**ssh*到目标机器并运行`crontab -l`。您应该会看到与此类似的输出：

```
crontab -l

# Begin Whenever generated tasks for: app_name
0 0 * * * /bin/bash -l -c 'cd /opt/path/app_name/releases/20120321133343 && RAILS_ENV=production rake group:task --silent'

0 3 * * 6 /bin/bash -l -c '/opt/path/app_name/shared/bin/script'

# End Whenever generated tasks for: app_name 
```**

# asp.net - WCF 数据服务还是只是 WCF 服务？

> ID：10010376
> 
> 赞同：4
> 
> 时间：2012-04-04T11:41:58.033
> 
> 标签：asp.net, wcf, windows-phone-7, wcf-data-services

我正在努力决定走哪条路。我有一个解决方案，需要有一个 web 服务和一个客户端，它是一个 windows phone 7 项目。WP7项目需要通过WCF服务与数据库进行通信。

对于我应该选择哪种方式，以及常规 WCF 服务文件与 WCF 数据服务有什么区别、优点/缺点，我有点困惑。考虑到我的 wp7 应用程序需要在数据库上的某些表上运行查询，哪种方式更容易使用，没什么太花哨的。

欢迎任何解释。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T11:51:22.440

如果您需要 CRUD 和灵活的查询功能，WCF 数据服务非常棒 - 它们允许您以最少的开发工作量公开底层数据（例如通过实体框架）并控制安全性，作为一个`REST`完整的 API，特别是对于 AJAX 和 SPA 类型的客户端前端结束。（另外，请注意 WebAPI 现在也提供类似的功能）。

WCF 服务更多地用于正式的“服务”和“操作”集成功能，其中有更多的业务重点，例如规则、处理、工作流等。例如，WCF 对提交处理声明很有用（自定义/富图数据输入和输出），触发夜间批处理作业（无效响应）等。

此外，您可以将这两种技术结合起来，例如对于 CQRS 类型体系结构，通过使用 Data Services 进行查询，将 WCF 用于命令类型功能。

# oracle - 用于模式比较和升级脚本的开源工具

> ID：10010380
> 
> 赞同：0
> 
> 时间：2012-04-04T11:42:15.033
> 
> 标签：oracle, schema, compare

是否有任何开源工具来比较不同的 Oracle 模式并提供升级脚本。

非常感谢，钱德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:10:40.623

我不知道任何开源工具，但如果你想要一个免费的工具，你可以使用 Oracle SQL Developer。

你有一个数据库比较工具和许多其他有用的东西。

你可以[在这里](http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html)下载：

# java - 单选按钮首先禁用，提交后再次启用

> ID：10010383
> 
> 赞同：3
> 
> 时间：2012-04-04T11:42:21.473
> 
> 标签：java, javascript, jsp, struts2

我有一个jsp，其中一些单选按钮和文本框取决于下拉选择。
这是我的jsp和javascript代码。

jsp

```
 <s:form action="crInquiry" name="form">    
            <s:select name="filterValue" list="headerList"
    onchange="OnChange(this.form.filterValue);" />
            <s:radio name="filter" list="#{'STATUS_FILTER_START':'START','STATUS_FILTER_END':'STOP'}" 
label="Stage"></s:radio>
            <s:textfield disabled="true" value="0" name="count" theme="css_xhtml"></s:textfield>
            <s:radio name="ascOrder"  list="#{'ASC':'ASC','DESC':'DESC'}"></s:radio>
            <s:submit value="Filter" onclick="gotopage('FilteredInquiryLog')"></s:submit>
            <s:submitvalue="Details" onclick="gotopage('crInquiry')"></s:submit>
            </s:form> 
```

javascript

```
<script type="text/javascript">
    function OnChange(dropdown) {
        var myindex = dropdown.selectedIndex;
        document.form.filter[0].disabled = false;
        document.form.filter[1].disabled = false;
    if (myindex == 8) {
            alert("8");
            document.form.filter[0].disabled = true;
            document.form.filter[1].disabled = true;
            document.form.count.disabled = false;
            document.form.submit.disabled = false;
        }
        else if (myindex == 9) {
            alert("9");
            document.form.filter[0].disabled = true;
            document.form.filter[1].disabled = true;
            document.form.count.disabled = true;
            document.form.submit.disabled = false;
        }

        else{
            document.form.filter[0].disabled = false;
            document.form.filter[1].disabled = false;
            document.form.count.disabled = true;
            document.form.submit.disabled = false;
            }
        }

    function gotopage(actionname)
    {   
            document.form.action=actionname+".action";
            document.form.submit();
    }
</script> 
```

问题是当我在下拉列表中选择一个项目时说元素号。8 或 9 所以通过 javascript 单选按钮应该被禁用 9 的文本字段和单选按钮。当我选择一个项目时，它完全禁用了依赖单选按钮或文本字段但是当我提交时，它显示我启用了单选按钮，因为我来了同一个jsp。我的javascript有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:52:07.417

您还应该在页面 onload 事件上检查您的下拉值。

像这样的东西

```
<script type="text/javascript">

/**
* This function will be called twice - once on onChage event, and once on onLoad event
*/
    function OnChange() {
    dropdown = document.getElementById('myDropDown');
        var myindex = dropdown.selectedIndex;
        document.form.filter[0].disabled = false;
        document.form.filter[1].disabled = false;
    if (myindex == 8) {
            document.form.filter[0].disabled = true;
            document.form.filter[1].disabled = true;
            document.form.count.disabled = false;
            document.form.submit.disabled = false;
        }
        else if (myindex == 9) {
            document.form.filter[0].disabled = true;
            document.form.filter[1].disabled = true;
            document.form.count.disabled = true;
            document.form.submit.disabled = false;
        }

        else{
            document.form.filter[0].disabled = false;
            document.form.filter[1].disabled = false;
            document.form.count.disabled = true;
            document.form.submit.disabled = false;
            }
        }

    function gotopage(actionname)
    {   
            document.form.action=actionname+".action";
            document.form.submit();
    }
</script>

<body onload="OnChange()">
<s:form action="crInquiry" name="form">    
            <s:select name="filterValue" list="headerList" id="myDropDown"
    onchange="OnChange();" />
            <s:radio name="filter" list="#{'STATUS_FILTER_START':'START','STATUS_FILTER_END':'STOP'}" 
label="Stage"></s:radio>
            <s:textfield disabled="true" value="0" name="count" theme="css_xhtml"></s:textfield>
            <s:radio name="ascOrder"  list="#{'ASC':'ASC','DESC':'DESC'}"></s:radio>
            <s:submit value="Filter" onclick="gotopage('FilteredInquiryLog')"></s:submit>
            <s:submitvalue="Details" onclick="gotopage('crInquiry')"></s:submit>
            </s:form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:49:44.370

如果我正确理解了您的问题，我认为您的 Javascript 没有问题。
因为提交之前和提交之后的页面数据之间没有通信，所以会产生问题。

您可以通过以下方法之一克服此问题。1.在body的“OnLoad”事件上调用你的javascript，它对你也一样。
2\. 将页面的当前状态存储在某个控件（比如文本字段）中，并与页面的其他数据一起提交。在加载时（可能是 onLoad 或 JSP 页面的末尾），您可以使用该字段中的值恢复状态。

我希望这对你有用。

# c# - C# 或 VB.net 中的示例仪表板应用程序？

> ID：10010386
> 
> 赞同：3
> 
> 时间：2012-04-04T11:42:27.677
> 
> 标签：c#, .net, vb.net, visual-studio-2008, dashboard

虽然这不是一个编程问题，但我很抱歉。

但我希望这个问题对正在或将要开发 Dashboard Appllication 作为[这里的](http://code.msdn.microsoft.com/silverlight/A-guide-to-create-6ab135b2)现场演示[的](http://www.visifire.com/samples/SalesDashboard/silverlight_samples_sales_dashboard.html)开发人员有所帮助。

我只是想在 vb.net 中开发仪表板应用程序，但找不到任何好的示例 [甚至在 C#.net 中也没有]......所以请帮助我或建议我任何好的示例 [VB.NET 或 C# .NET 并且不使用任何第三方控件，如 VisiFire 等] 用于仪表板样式应用程序。太感谢你了。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:01:18.203

我建议你检查[PRISM Library](http://compositewpf.codeplex.com/)。

它是一个用于创建复合应用程序的模式和实践库（由多个控件组成）

它是参考实现，[Stock Trader RI](http://msdn.microsoft.com/en-us/library/ff921074%28v=pandp.20%29.aspx)是一个类似仪表板的应用程序。

`Silverlight`该库在 和中包含许多快速入门和`C#`示例`VB.NET`。它也被广泛采用。我已经使用它很长时间了，它帮助我学习`WPF`和设计了我的`WPF`应用程序。

# php - 如何用fancybox加载php页面？

> ID：10010390
> 
> 赞同：-2
> 
> 时间：2012-04-04T11:42:56.183
> 
> 标签：php, fancybox

我搜索了很多，但我找不到答案。

在我的contact.php 我有这个代码：

```
<a class="mailform" href="submit.php">Click</a> 
```

我有这个脚本，但它不起作用：

```
$('.mailform').click(function() {
     $.fancybox(
        {
            'autoDimensions'    : false,
            'width'                 : 350,
            'height'                : 'auto',
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'ajax'   : {
              cache   : false,
              url     : this.href
             }
        }
    );
}); 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:52:21.067

您需要返回 false 以阻止链接通过

```
$('.mailform').click(function() {

     var myUrl = $(this).attr('href');

     $.fancybox(
        {
            'autoDimensions'    : false,
            'width'             : 350,
            'height'            : 'auto',
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'ajax'   : {
              cache   : false,
              url     : myUrl
             }
        }
    );

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:47:10.310

`this`我怀疑您的问题与魔术变量的范围有关。在您的代码中，`this`指的是您分配给的对象文字`'ajax':`。为了做我认为您正在尝试做的事情，您将需要另一个临时变量。按照惯例，我们称变量为`that`。您还需要`false`从单击处理程序返回，停止浏览器跟随主窗口中的链接。

```
$('.mailform').click(function() {
    // Here, `this` refers to the <a> DOM element, so we create a copy of it
    // and store it in `that`
    var that = this;
    $.fancybox({
        // Now `this` refers to the object you are passing to fancybox()
        'autoDimensions': false,
        'width'         : 350,
        'height'        : 'auto',
        'transitionIn'  : 'none',
        'transitionOut' : 'none',
        'ajax'          : {
            // Now `this` refers to the object you are assigning to 'ajax':
            cache   : false,
            url     : that.href // Use `that` instead of `this`
        }
    });
    // We also need to return false, to stop the browser following the link
    return false;
}); 
```

# node.js - 删除nodejs脏数据库文件

> ID：10010391
> 
> 赞同：3
> 
> 时间：2012-04-04T11:43:07.550
> 
> 标签：node.js, fs, node-dirty

我在删除由 NodeJS **Dirty**存储扩展创建的 db 文件时遇到问题。据我所知，Dirty 没有提供删除 db 文件的方法，所以我必须手动执行此操作。

我已经尝试过*fs.unlink()*并且它可以正确执行，但是在我终止节点服务器之前不会删除文件，这（我认为）意味着 Dirty 仍然持有文件句柄。问题是我也无法从 Dirty 获取文件句柄，因为它使用不返回文件句柄的*createReadStream*和*createWriteStream方法。*

有什么方法可以删除 Dirty 生成的 db 文件，例如，当客户端与服务器断开连接时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T23:07:36.130

不要烦人，但你为什么要惹恼它？也许还有另一种方法来处理这个问题。否则，我能提供的唯一帮助可能是分叉 Dirty 并提供杀死流的选项（http://nodejs.org/api/fs.html#fs_fs_createwritestream_path_options）

如果您最终选择了这条路线，请告诉我，我很乐意提供帮助——我正在使用 DirtyDB 作为**[Sails](https://github.com/balderdashy/sails)**和**[Waterline](https://github.com/mikermcneil/waterline)**的内存数据库适配器。

# vim - 不使用搜索转到 Vim 中的下一个相同单词

> ID：10010392
> 
> 赞同：9
> 
> 时间：2012-04-04T11:43:10.490
> 
> 标签：vim, command, keyboard-shortcuts

Vim 中是否有一个快捷方式可以转到与光标所在的单词相同的下一个单词？它应该可以在不使用 search command 输入单词的情况下工作`/`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-04T11:45:52.253

`*`转到下一个匹配词并`#`转到前一个匹配词。`*`非常有用，有时被称为*超级明星*。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T11:45:40.597

`*`并且`#`是你的朋友（分别向前和向后）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T11:49:17.560

要搜索光标下的当前单词，请使用“*”。

向后搜索当前光标词使用'#'

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-04T14:00:22.017

虽然这里的所有答案都是正确的，但我认为提供更多信息可能会很有用。

`*`实际上所做的是对`\<word-under-the-cursor\>`. `n`因为这只是一个搜索操作，所以您可以使用and前后导航到下一个匹配项`N`。这也意味着您之前的搜索丢失了。 与执行反向搜索`#`完全相同。`*`

搜索字符串中的`\<`and`\>`是 vim 正则表达式语言中的单词边界，这使得它工作得很好。同样重要的是要注意，什么被认为是“单词”是由`iskeyword`选项决定的。有关`:help word`更多信息，请参阅。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-05T18:08:35.527

`gd`它的变种也很方便。它的工作方式与 略有不同`*`，因为它搜索光标下单词的本地声明（如果不存在本地则搜索全局声明）。`n`然后，您可以像使用 superstar 一样搜索结果，它会跳过评论。在编辑代码时它会很有帮助。

```
:help gd 
```

# c++ - 如何在 linux 上通过 cmake 链接 google protobuf 库？

> ID：10010398
> 
> 赞同：23
> 
> 时间：2012-04-04T11:43:56.667
> 
> 标签：c++, cmake, protocol-buffers

我正在尝试以与 boost 相同的方式制作它：

```
find_package(Boost COMPONENTS system filesystem REQUIRED)                                                    
find_package(ProtocolBuffers)                                                                                

## Compiler flags                                                                                            
if(CMAKE_COMPILER_IS_GNUCXX)                                                                                 
    set(CMAKE_CXX_FLAGS "-O2")                                                                               
    set(CMAKE_EXE_LINKER_FLAGS "-lsqlite3 -lrt -lpthread")                                                   
endif()                                                                                                      

target_link_libraries(complex                                                                                
  ${Boost_FILESYSTEM_LIBRARY}                                                                                
  ${Boost_SYSTEM_LIBRARY}                                                                                    
  ${PROTOBUF_LIBRARY}                                                                                        
) 
```

（在某处搜索）但输出错误：

```
CMake Warning at complex/CMakeLists.txt:18 (find_package):
  Could not find module FindProtocolBuffers.cmake or a configuration file for
  package ProtocolBuffers.

  Adjust CMAKE_MODULE_PATH to find FindProtocolBuffers.cmake or set
  ProtocolBuffers_DIR to the directory containing a CMake configuration file
  for ProtocolBuffers.  The file will have one of the following names:

    ProtocolBuffersConfig.cmake
    protocolbuffers-config.cmake 
```

如何将其与 cmake 链接？或者我什至可以使用 cmake 编译 .proto 文件？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-04T12:12:21.433

你可以试试 CMake 的`FindProtobuf`模块：

```
include(FindProtobuf)
find_package(Protobuf REQUIRED)
include_directories(${PROTOBUF_INCLUDE_DIR})
...
target_link_libraries(complex
    ${Boost_FILESYSTEM_LIBRARY}
    ${Boost_SYSTEM_LIBRARY}
    ${PROTOBUF_LIBRARY}
) 
```

有关更多信息，请运行

```
cmake --help-module FindProtobuf 
```

# html - 在 TinyXPath 中如何通过元素内容索引来查询数据

> ID：10010399
> 
> 赞同：0
> 
> 时间：2012-04-04T11:44:03.390
> 
> 标签：html, xml, xpath, xerces, tinyxpath

我正在使用 TinyXPath 来增强现有的测试工具，以便可以获取和使用来自客户 XML 结构的数据。

XML 看起来像这样

```
<Platform>
  <LinkData>
    <Plan>
      <Label>A</Label>
        <Settings>
           <SomeSetting1>ENABLED</SomeSetting1>
           <SomeSetting2>ENABLED</SomeSetting2>
        </Settings>
    </Plan>
    <Plan>
      <Label>B</Label>
        <Settings>
           <SomeSetting1>ENABLED</SomeSetting1>
           <SomeSetting2>DISABLED</SomeSetting2>
        </Settings>
    </Plan>
  </LinkData>
</Platform> 
```

鉴于上述我无法控制的结构，我需要能够为 TinyXPath 构造 XPath 表达式。简单地说，TinyXPath 需要在正确的子标签值匹配（解析为真）时返回给定的 SomeSetting1/2 字段中的值，以便测试应用程序可以使用它们。

我尝试了以下方法，但是使用子元素索引的方式很困难（通常我希望使用属性。这是我的尝试，它不返回结果（例如启用/禁用）：-

```
Platform/LinkData/Plan[child::Label='A']/Settings/SomeSetting1/text()
Platform/LinkData/Plan[child::Label='A']/Settings/SomeSetting2/text()
Platform/LinkData/Plan[child::Label='B']/Settings/SomeSetting1/text()
Platform/LinkData/Plan[child::Label='B']/Settings/SomeSetting2/text() 
```

非常感谢 TinyXPath 大师的任何进一步帮助 - 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:04:21.597

此 xpath 将使用给定的 XML 返回您要查找的内容：

```
//Settings/child::node()/text() 
```

此 xpath 还将添加对标签的检查并按 concat 分组`|`：

```
//LinkData/Plan[Label/text()='A']/Settings/child::node()/text() | //LinkData/Plan[Label/text()='B']/Settings/child::node()/text() 
```

而这个在标签检查中结合了它们：

```
//LinkData/Plan[Label/text()='A' or Label/text()='B']/Settings/child::node()/text() 
```

希望这可以帮助！

# nhibernate - NHIbernate QueryOver 分离条件和 Any 子句

> ID：10010400
> 
> 赞同：5
> 
> 时间：2012-04-04T11:44:08.060
> 
> 标签：nhibernate

我在子查询中有以下失败：

```
var subquery = QueryOver.Of<Product>()
                .Where(x => x.ProductCategories.Any(y => y.Categgory == parameter.Category)); 
```

我收到 Any 语句的错误：

```
Unrecognised method call: System.Linq.Enumerable:Boolean Any 
```

我将如何更新 QueryOver 的上述限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T12:01:52.497

```
ProductCategory productCategory = null;
var subquery = QueryOver.Of<Product>()
  .JoinAlias(product => product.ProductCategories, () => productCategory)              
  .Where(() => productCategory.Category.Id == parameter.Category.Id); 
```

类别的类型是什么？如果这是一个实体：

```
productCategory.Category.Id == parameter.Category.Id 
```

如果这是基本属性：

```
productCategory.Category == parameter.Category 
```

是多对多的关系吗？（产品和类别）

```
Category category = null;
var subquery = QueryOver.Of<Product>()
  .JoinAlias(product => product.Category, () => category)            
  .Where(() => category.Id == parameter.Category.Id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:07:46.577

```
ProductCategory productCategory = null;
var subquery = QueryOver.Of<Product>()
  .JoinAlias(product => product.ProductCategories, () => productCategory)  
  .Where(Subqueries.WhereExists(CatExistsQuery())

private QueryOver<ProductCategory , ProductCategory > CatExistsQuery(<your type> parameter)
        {
            ProductCategory _innerCat = null;

            var query = (QueryOver<ProductCategory , ProductCategory >)Session
                        .QueryOver(() => _innerCat )
                        .Where(() => _productCategory.Id== _innerCat.Id)
                        .And (innerCat.Id == parameter.Category.Id)

            return query ;
        } 
```

# asp.net - .NET 社交网站 API

> ID：10010404
> 
> 赞同：-2
> 
> 时间：2012-04-04T11:44:17.950
> 
> 标签：asp.net, facebook, linkedin

我想使用他们的 API 来集成社交网站。是否有任何免费的 API 可以简化这项工作？像 Facebook、[LinkedIn](http://en.wikipedia.org/wiki/LinkedIn)和谷歌。

我的目的是让用户有机会通过这些网站登录/注册，以便专门从 LinkedIn 和 Facebook 获取个人资料信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:30:12.387

查看 Facebook SDK。有一个[NuGet](http://en.wikipedia.org/wiki/NuGet)可以帮助您快速入门：

*   [文档](http://csharpsdk.org/docs/)

*   [源代码](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:48:30.337

Facebook 有一个很棒的 AP​​I 和[文档](http://developers.facebook.com/)，如果需要，您可以[下载 Facebook API 。](http://facebooktoolkit.codeplex.com/releases/view/39727)

# javascript - 如何根据字段名称（jQuery）隐藏 SharePoint 显示表单中的字段？

> ID：10010405
> 
> 赞同：4
> 
> 时间：2012-04-04T11:44:20.223
> 
> 标签：javascript, jquery, sharepoint

我有一个 SharePoint 列表，其中包含以下单行文本字段`Title`：`Year`和`Type or Location`. 我希望能够`Type or Location`在默认显示表单中隐藏表格行。我知道我应该创建一个 JavaScript 脚本并将其放在 DispForm.aspx 内的内容编辑器 Web 部件中。

我不熟悉 jQuery 语法，因此我需要代码方面的帮助，即我不知道如何引用包含`Type or Location`字段及其值的表行。这是我到目前为止所做的，但它不起作用：

```
jQuery(document).ready(function($) {
   $("input[title='Type or Location']").closest("tr").hide();
}); 
```

我知道这`"input[title='Type or Location']"`部分不正确；至少我认为是这样。谁能帮帮我？谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T15:12:38.453

尝试：

```
jQuery(document).ready(function($) {
   $("h3.ms-standardheader:contains('Type or Location')").closest("tr").hide();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:40:11.160

我不确定您为什么要为此使用 jQuery。在 SharePoint 中，您可以选择将字段设为必填、可选或隐藏。在大多数情况下，只需切换到隐藏即可解决您的问题。

作为记录，我也会尽量避免使用 jQuery(document).ready，它可能会与 SharePoint 开箱即用的 onload 事件发生冲突。在你的情况下，它是不需要的。

更新：这是使用 jQuery 执行此操作的一种方法：

```
$("td.ms-formlabel:contains('Type or Location')").parent().hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:34:53.667

语法应该是这样的：

```
$("input[title='Type']").closest("tr").hide();

$("input[title='Location']").closest("tr").hide(); 
```

它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T18:45:20.463

如果它只是默认显示表单，那么创建一个视图并将其设为默认值怎么样？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T11:52:10.140

试试这种方式：

```
jQuery(document).ready(function($) {
   $("input[title='Type'],input[title='Location']").closest("tr").hide();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T11:57:08.260

这取决于 Type ior Location 是什么类型的列。如果它是单行文本，那么你就很接近了。您应该使用 DOM 检查器（如 IE 的开发人员工具或 Firebug）来查看输入元素的实际标题是什么。

如果列是不同的类型，那么它可能不是输入元素。再次使用 DOM 检查器，您可以查看组成字段控件的元素并从中决定您的选择器。

最后，请记住，将内容隐藏在脚本中并不安全。精明的用户可以关闭脚本或以其他方式更改脚本，以便他们可以编辑它。这一切都取决于您的要求。

// 更新 // 啊，你说的是 DispForm。正如另一个答案中指出的那样，DispForm 中没有任何输入元素。您需要更正您的选择器。

# database - 检索嵌套链接数据，Cakephp (2.1.0)

> ID：10010410
> 
> 赞同：0
> 
> 时间：2012-04-04T11:44:34.110
> 
> 标签：database, cakephp, cakephp-2.1

我有以下数据库关系：

`Building hasMany Shape`

`Appartment hasOne Shape`

`Building hasMany Appartment`

`Shape belongsTo Building & Appartment`

现在，在 Shape 模型中，我想检索属于某个建筑物的所有形状。这包括属于该特定建筑物的公寓的形状。

例如

`Building 'X'`

`There are 4 shapes directly linked to building X via the belongsTo Building relation.` `Shape->Building`

`And there are 2 shapes directly linked to 2 appartments via the belongsTo Appartment relation. These 2 appartments again are directly linked to Building X via the belongsTo Building relation. Thus these 2 shapes are indirectly linked to building X.` `Shape->Appartment->Building`

我似乎无法理解这一点，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:06:13.607

使用[CakePHP 的 Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:11:53.667

您可能还想重新考虑将形状用作自己的表格。

例如，如果您的表只有一个正确的并且看起来像这样：

```
shapes
id     int
shape  varchar 50 
```

而是这样做：

```
buildings
id    int
bulding_number  int
shape varchar 50
...
appartments
id    int
appartment_number  int
shape varchar 50
... 
```

在建筑物和公寓桌子上正确选择形状会更容易。您的数据库将更简单、更快，并且可能更容易编程。

但是，如果您要捕获其他形状属性，请继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:28:37.873

尝试在你的发现中提高你的[递归价值](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#magic-find-types)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T06:59:48.917

您可以在函数中使用该`'threaded'`子句。 请参阅此处的语法示例：http: [//book.cakephp.org/1.3/view/1018/find](http://book.cakephp.org/1.3/view/1018/find)`find`

它将给出父子关系中的所有依赖数据

# silverlight - TransformToVisual 仅第一次返回不正确的结果

> ID：10010415
> 
> 赞同：2
> 
> 时间：2012-04-04T11:44:43.523
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1

我正在尝试使用该`TransformToVisual`方法来获取 Image 元素的绝对坐标，如下所示：

```
var transform = img.TransformToVisual( this ); // this is the current page
Point absolutePosition = transform.Transform( new Point(0, 0) ); 
```

我第一次使用它时，这段代码返回了一个不正确的值（它总是 155,255）。但是，它总是在之后返回正确的坐标。

此代码在 Tap 事件处理程序中运行，因此 UI 在执行时已经完全呈现。我尝试调用`InvalidateMeasure`and `InvalidateArrange`（在 Image 元素和页面上），但没有帮助（我不知道这些调用是否与 有任何联系`TransformToVisual`）。

可能是什么问题呢？

更新：如果我将手机锁定然后解锁，则不会发生上述问题。

UPDATE2：如果图像位于页面的中心，该位置*似乎**是*图像的左上角。（图像的大小固定为 170x260。我得到坐标 155,255。2*155 + 170 = 480, 2*255 + 260 = 770（好吧，第二个不完全是 800，但无论如何它是可疑的。应用程序栏和系统托盘都是隐藏的。））

UPDATE3：问题出现在我的应用程序的主页上。但是，如果我导航到另一个页面，然后返回主页，它也可以正常工作。

# php - 产品制造商 Magento

> ID：10010416
> 
> 赞同：0
> 
> 时间：2012-04-04T11:44:43.767
> 
> 标签：php, magento

我从 magento 开始，遇到了一个非常奇怪的问题，我有一个根类别，两个子类别，每个类别都有子类别和产品，我想要根类别下的两个子类别中的每一个的制造商列表。

我开始将根类别 ID 设为 3。请看下面的代码..

```
$root=3;
    $rootcategories=Mage::getModel('catalog/category')->getCategories($root,1,false,true,false);    
foreach($rootcategories as $c=>$Cat){
    $product = Mage::getResourceModel('catalog/product_collection')
                           ->addCategoryFilter($Cat);
foreach($product as $pro){
    $pId=$pr['entity_id'];
    $_product=Mage::getModel('catalog/product')->load($pId);
    $manufacturers[$c][]=$_product->getResource()->getAttribute('manufacturer')->getFrontend()->getValue($_product);
}
}
echo '<pre>'; 
print_r($manufacturers);
die; 
```

我应该从此代码中获取制造商列表，但是对于每个类别中的每个产品，我都会得到一个“否”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:37:12.813

你没有`$pro`在你的循环中使用你的变量`foreach`:)

```
foreach($product as $pro) {
   echo $pro->getManufacturers;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T14:44:41.830

尝试这个。到处工作。

```
$manufacturer = Mage::getModel('catalog/product')->load($_product->getId())->getAttributeText('manufacturer'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:34:39.680

尝试

```
$root=3;
$categories = Mage::getModel('catalog/category')->load($root)->getChildrenCategories();
foreach($categories AS $cat)
{
$productCollection =  Mage::getResourceModel('catalog/product_collection')->addCategoryFilter($cat);
foreach($productCollection AS $product)
{
echo $product->getAttributeText('manufacturer').'<br/>';
}
} 
```

类似的东西。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:08:53.733

你为什么不干脆做

```
$_product->getData('manufacturer'); 
```

??

# sql - 更新 BLOB 列数据

> ID：10010419
> 
> 赞同：-1
> 
> 时间：2012-04-04T11:44:50.573
> 
> 标签：sql, blob

是否可以更改 BLOB 列数据的特定内容？

即我有一个表，其中有一个 BLOB 数据类型列。它包含一些文本内容。

我想为一组选择性的行替换此文本内容中的一些字符。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-04T12:05:04.647

一般来说是的，但是您使用的是什么界面？

例如，参见[这个 java/jdbc 方法](http://docs.oracle.com/javase/6/docs/api/java/sql/Blob.html#setBytes%28long,%20byte%5B%5D%29)

# asp.net - TFS 在获取最新文件时挂起

> ID：10010421
> 
> 赞同：2
> 
> 时间：2012-04-04T11:45:11.393
> 
> 标签：asp.net, visual-studio-2010, visual-studio-2008

我们的服务器上有 TFS 2010。由于许多图像和其他资源文件，我们有一个大约 900 MB 的大型项目。现在，当有人在本地 Visual Studio 中打开它并尝试获取最新文件时，VS 2010 会进入无响应模式并出现错误关闭。

是否需要对 TFS 进行任何维护才能顺利运行项目。此问题仅在过去 2 个月内出现。

# asp.net - Chrome 下载 .aspx 文件而不是查看它

> ID：10010424
> 
> 赞同：0
> 
> 时间：2012-04-04T11:45:23.217
> 
> 标签：asp.net, file, coda, mojoportal

我正在尝试在我的服务器（外部托管）上安装 mojoportal，但是当我转到 .aspx 页面时，浏览器只是将它下载到应该像网页一样正确加载的位置。

怎么了？

它试图加载的文件是：

```
<%@ Page Language="C#" AutoEventWireup="false" EnableSessionState="False" CodeBehind="Default.aspx.cs" Inherits="mojoPortal.Web.UI.Pages.SetupHome" %> 
```

*   我什至不知道那个位是做什么的，但这就是我要加载的文件中的全部内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:45:48.633

如果它下载它而不显示它，则意味着 asp.net 未在此站点上运行，并且 Web 服务器看到此 aspx 就像任何要下载的文件一样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-10-22T17:03:54.590

通过保险公司的安全门户工作时，我也遇到了这个问题。我是我办公室里唯一得到这个的人。当出现临床调查时（我会回答问题），我的浏览器只是尝试下载一个 .aspx 文件。我在 Chrome、Edge、Firefox 和 IE11 上都会遇到这种情况。我的 IT 帮助台对此没有答案，门户网站的所有者表示，如果只有我有问题，那不是他们的问题。我错过了什么软件？]

# php - 奇怪的事情与 CTYPE_ALNUM

> ID：10010430
> 
> 赞同：2
> 
> 时间：2012-04-04T11:45:52.573
> 
> 标签：php, html

我对 PHP 函数 CTYPE_ALNUM 有这个奇怪的问题

如果我做：

PHP：

```
$words="àòè";

if(ctype_alnum($words)){

   Echo "Don't work";

}else{

   Echo "Work";     

} 
```

这将呼应“工作”

但是如果我有一个表格并且在那个表格中我插入带有坟墓的字母（à，è，ò），这将回显“不工作”

代码：

```
 <form action="" method="post"> 

    <input type="text" name="words" />
    <input type="submit" />

  </form>

 $words=$_POST['words'];

 if(isset($words)){

  if(ctype_alnum($words)){

      Echo "Don't Work";

  }else{

      Echo "Work";      

 }

} 
```

如果我在文本输入中插入字母 à 或 è 或 ò 这将回显“不工作”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:15:51.883

`ctype_alnum`是地区相关的。这意味着如果您使用标准`C`语言环境或常见语言环境，例如`en_US`，则不会匹配重音字母，仅`[A-Za-z]`. 您可以尝试将语言环境设置为可以识别这些派生的语言[`setlocale`](http://www.php.net/manual/en/function.setlocale.php)（请注意，语言环境需要安装在您的系统上，并且并非所有系统都相同），或者使用更便携的解决方案，例如：

```
function ctype_alnum_portable($text) {
    return (preg_match('~^[0-9a-z]*$~iu', $text) > 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T01:51:07.133

如果要检查 Unicode 标准中定义的所有字符，请尝试以下代码。我在 Mac OSX 中遇到了错误检测。

```
//setlocale(LC_ALL, 'C');
setlocale(LC_ALL, 'de_DE.UTF-8');

for ($i = 0; $i < 0x110000; ++$i) {

    $c = utf8_chr($i);
    $number = dechex($i);
    $length = strlen($number);

    if ($i < 0x10000) {
        $number = str_repeat('0', 4 - $length).$number;
    } 

    if (ctype_alnum($c)) {
        echo 'U+'.$number.' '.$c.PHP_EOL;
    }

}
function utf8_chr($code_point) {

    if ($code_point < 0 || 0x10FFFF < $code_point || (0xD800 <= $code_point && $code_point <= 0xDFFF)) {
        return '';
    }

    if ($code_point < 0x80) {
        $hex[0] = $code_point;
        $ret = chr($hex[0]);
    } else if ($code_point < 0x800) {
        $hex[0] = 0x1C0 | $code_point >> 6;
        $hex[1] = 0x80  | $code_point & 0x3F;
        $ret = chr($hex[0]).chr($hex[1]);
    } else if ($code_point < 0x10000) {
        $hex[0] = 0xE0 | $code_point >> 12;
        $hex[1] = 0x80 | $code_point >> 6 & 0x3F;
        $hex[2] = 0x80 | $code_point & 0x3F;
        $ret = chr($hex[0]).chr($hex[1]).chr($hex[2]);
    } else  {
        $hex[0] = 0xF0 | $code_point >> 18;
        $hex[1] = 0x80 | $code_point >> 12 & 0x3F;
        $hex[2] = 0x80 | $code_point >> 6 & 0x3F;
        $hex[3] = 0x80 | $code_point & 0x3F;
        $ret = chr($hex[0]).chr($hex[1]).chr($hex[2]).chr($hex[3]);
    }

    return $ret;
} 
```

# java - 如何使用 Java 访问另一个类中的一个类变量？

> ID：10010431
> 
> 赞同：-2
> 
> 时间：2012-04-04T11:46:11.610
> 
> 标签：java, string

我创建了2个类如下...

```
public class A extends JFrame {
    public String x = "abcdefg";
}

public class B extends JFrame {
    public String y;
} 
```

这两个类都扩展了`JFrame`. 我想知道`String y`in是否`Class B`可以继承 in 的`String x`值`Class A`？我希望它更新或者`x`更新`y`另一个字符串。

有没有一种方法可以使这些字符串对 2 个类通用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:49:48.553

只需让 B 类扩展 A。

```
public class A extends JFrame {

}

public class B extends A {

} 
```

但是TBH，我们都认为拥有公共领域是一个糟糕的主意！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:14:41.447

我会做这样的事情..

```
class a
{
    private String aVal = "abc";

    public String returnAVal(){
         return aVal;
    }
}

class b extends a
{
    private String y = returnAVal();

    public void testY(){
        System.out.println(y);
    }
} 
```

希望能帮助到你。

书呆子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:00:08.400

为了单个 varibale.check [LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)而拥有 Inheritance 并不是一个好主意。

将其设为私有并提供 setter 和 getter 来访问它。

# php - PHP 通过 CLI 发送电子邮件

> ID：10010433
> 
> 赞同：0
> 
> 时间：2012-04-04T11:46:23.250
> 
> 标签：php, email, exec, command-line-interface

我想在某些服务结束后发送一封电子邮件，所以我使用 php exec() 函数来做到这一点

我使用的命令是：`exec('(other service commands; /usr/bin/php /var/www/vhosts/domain.com/httpdocs/email.php name@domain.com) > /dev/null &');`

email.php 包含一个 mysql 更新和一个 mail() 函数。它似乎运行良好，因为 mysql 更新正在进行，但它不发送电子邮件。

如果我通过 CLI 而不是通过 php exec() 运行命令，则电子邮件将正确发送。
例如。`/usr/bin/php /var/www/vhosts/domain.com/httpdocs/email.php receiver@domain.com`

我还应该设置什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:55:45.307

我终于明白了！

显然，`sendmail_path`在 CLI 的 php.ini ( `/etc/php5/cli/php.ini`) 上被注释掉了。

我取消了它的注释，将它的值设置为`/usr/sbin/sendmail -t -i`，重新启动了 apache，现在它可以正常工作了！

# iphone - iphone sdk中的错误网址

> ID：10010434
> 
> 赞同：0
> 
> 时间：2012-04-04T11:46:25.590
> 
> 标签：iphone

网址[http://crescerance.com/School/isummit/speakers.html](http://crescerance.com/School/isummit/speakers.html)

> Isummit[12923:1d013] 错误域=NSURLErrorDomain 代码=-1000“错误 URL”UserInfo=0x91aa490 {NSUnderlyingError=0x91aa1d0“错误 URL”，NSLocalizedDescription=错误 URL}

# java - Hibernate映射文件和注解的区别

> ID：10010435
> 
> 赞同：6
> 
> 时间：2012-04-04T11:46:28.180
> 
> 标签：java, hibernate

今天我试图创建一个使用 Hibernate 作为 ORM 的应用程序。所以在创作的时候我有一个疑问。使用 Hibernate 映射文件（.hbm 文件）或注释的最佳实践是什么？它的优点和缺点是什么？请帮助我理解。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T11:55:46.023

*   没有功能上的区别。你可以用这两种方法（几乎）做同样的事情
*   xml 文件在 Java 有注解之前使用（在 1.5 中添加），因此它们可以被认为是一种过时的映射方式
*   通常首选使用 JPA 注释而不是特定于 hibernate 的注释；如果使用 xml - 有一种 JPA xml 格式，应该优先于休眠原生格式

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T12:35:11.130

问题是你的品味是什么——两种方式（大部分）都可以做同样的事情，不同之处在于如何写作。

使用注释，您可以将 Java 成员变量/getter 和映射直接放在一个地方。

XML 映射文件可以更好地概述表及其映射。

在我看来，xml 映射文件有助于更好地设计数据库和应用程序。Annonations 倾向于强制 Java 类 -> 映射 -> 数据库表的方向，这是错误的方向（数据库总是应该先设计 - 以后更改数据库表需要很多努力 - 大多数性能泄漏都在糟糕的数据库设计中 - Java 类可以随时轻松更改）。

如果 xml 文件有一个功能优势：如果您有不同的数据库，但结构不同，例如一个 Oracle 数据库和一个 MySQL 数据库，可能在表名和数据类型方面存在一些差异，那么您只需要将应用程序从一个数据库移植到另一个数据库需要编写一些新的映射文件。您不需要更改任何一行 Java 代码。这在注释中是不可能的。

我更喜欢使用 xml 映射文件。那是*我的*口味。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T12:01:11.587

使用 XML 方法的一个很好的用例是，如果您要持久保存由另一个实用程序生成的对象，因此无法进行注释。

除此之外，我会使用注释，因为它倾向于使实现更简洁，并且您不太可能通过拼写错误的属性名称来引入错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-08T09:09:11.583

这就是它在“TUTORIALS POINT”中所说的

“如果您要使您的应用程序**可移植到其他符合 EJB 3 的 ORM**应用程序，您必须使用注释来表示映射信息，但**如果您想要更大的灵活性**，那么您应该使用基于 XML 的映射”

对我来说，我更喜欢 XML 配置文件，而不是注释。因为这样我们就可以进行更改，只需最少的代码更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T11:58:03.150

注释基于约定优于配置的原则：

```
http://en.wikipedia.org/wiki/Convention_over_configuration 
```

而xml文件只是配置。

关于使用注释与使用配置有很多讨论。

[堆栈溢出链接](https://stackoverflow.com/questions/182393/xml-configuration-versus-annotation-based-configuration)

从我的角度来看，我更喜欢注解，因为它更容易编写和维护。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-22T16:11:33.460

Annotations are developed with java language and java developer easy to learn when compared with XML. And one more point in real time table names and column names are fixed 99%, so no need to change java code also but if you want to change table names and column names frequently you will move with XML finally cfg.xml file is manadatary because database may change.

# excel - 如何改进 Excel 数据连接的刷新？

> ID：10010452
> 
> 赞同：4
> 
> 时间：2012-04-04T11:47:16.673
> 
> 标签：excel, file, database-connection

像许多人一样，我有从 40 多个文本文件中提取数据作为数据源的电子表格。文本文件来自另一个应用程序，需要定期更新到 Excel 中。

数据源文件集和电子表格需要能够在不同系统上复制和运行。这就是 Excel 惊人地无法支持从电子表格文件夹（或根本路径）导入数据成为一个大问题的地方。[这个问题](https://stackoverflow.com/questions/3927531/relative-file-paths-for-excel-data-connections)提到了这个问题，但没有解决方案。

我为 Excel 中的这个（恕我直言）基本缺陷开发了一个粗略的解决方法。使用 SUBST 将电子表格文件夹映射到驱动器号。然后从 SUBST 驱动器号导入数据。该驱动器号和路径将成为电子表格的一部分，深埋在对话框中，并且非常不方便更新。因此，每当您复制或移动电子表格时，都要将 SUBST 重新创建到当前文件夹。丑陋，但有效。

**新问题：**使用这种技术，当我打开电子表格并单击刷新以从数据源刷新时，我必须在 40 多个对话框上单击“导入” - 每个文件一个。我怎样才能使这个过程自动化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T23:32:30.483

我发现在数据范围属性下，有一个“刷新时提示文件名”的设置。通过取消选中它，不再需要为每个链接文件单击导入。每个链接数据源的属性必须单独调整。似乎没有任何能力来多选数据源。

# ruby-on-rails - 用于富文本编辑器的 Rails 活动记录验证

> ID：10010453
> 
> 赞同：1
> 
> 时间：2012-04-04T11:47:27.543
> 
> 标签：ruby-on-rails, validation, rich-text-editor

我正在使用简单的表单并想为用户模型添加一个 validates_presence_of :introduction 验证。

```
 = f.input :intro, :as => :rich_text_editor, :input_html => {:rows => 6} 
```

问题是，默认情况下，html 标记 br 传入参数，同时保存用户的介绍和验证存在不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:59:01.570

您可以实现自己的验证，而不是执行简单的 validates_presence_of，在您的情况下，它可能是这样的：

```
class YourModel < ActiveRecord::Base

  validates_each :intro do |record, attribute, value|
    if value.blank? || value.strip == "<br/>"
      model.errors.add( attribute, :blank )
    end
  end

end 
```

然后您将按照您预期的方式进行验证。

# c# - 在运行时分配按钮样式

> ID：10010454
> 
> 赞同：0
> 
> 时间：2012-04-04T11:47:34.917
> 
> 标签：c#, silverlight

我在 Blend 中设计了一个按钮，它在命名空间标题之后给了我这个 xaml。

```
<UserControl.Resources>
        <Style x:Key="ButtonStyle1" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Rectangle Fill="#BF4FFFF" RadiusY="10" RadiusX="10" Stroke="Black"/>
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

在运行时，我正在生成一个要应用此样式的按钮。如何才能做到这一点。
我注意到按钮具有`button.Style`属性，但我无法为其分配样式。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:02:53.437

您可以在代码中访问资源字典，例如：

```
button.Style = (Style)Application.Current.Resources["ButtonStyle1"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:01:24.330

我认为您的填充颜色代码错误。请尝试另一个代码

```
 <UserControl.Resources>
    <Style x:Key="ButtonStyle1" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Rectangle Fill="Red" RadiusY="10" RadiusX="10" Stroke="Black"/>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding         HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

 <Grid x:Name="LayoutRoot" Background="White">
      <Button Content="Button" Height="48" Style="{StaticResource ButtonStyle1}" HorizontalAlignment="Left" Margin="70,71,0,0" Name="button1" VerticalAlignment="Top" Width="178"  />
</Grid> 
```

# networking - 我需要IP地址吗？

> ID：10010455
> 
> 赞同：2
> 
> 时间：2012-04-04T11:47:36.983
> 
> 标签：networking, network-programming

我想尽快将 WLAN 中的数据发送到该 WLAN 中的另一台设备？我现在完全糊涂了。

如果我想从这个 WLAN 中的一个设备向这个 WLAN 中的另一个设备发送一些东西。那我一定需要一个IP地址吗？

所以我可以编写一个程序来生成 IP 数据包并将它们发送到目的地。然后我会在网络层编程。

我可以去数据链路层向这个 WLAN 中的路由器发送一些东西，然后他就知道在没有任何 IP 地址的情况下将它发送到哪里？它会比在网络层编程更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:11:09.677

您确实可以发送到 MAC 地址。有点怀疑这是否值得努力。使用 IP 是做事的标准方式。速度只会略微提高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:52:33.223

是的，如果您使用 TCP/IP 堆栈，您需要两个设备中的 IP 地址。

如果你在同一个局域网交换机下，你可以直接用MAC地址发送，无需IP。使用原始套接字。不建议这样做。

# javascript - 复制内容 每次使用javascript更改时进入表单字段

> ID：10010456
> 
> 赞同：0
> 
> 时间：2012-04-04T11:47:42.533
> 
> 标签：javascript, jquery, forms

我需要做的是将id为#logo的div的内容复制到id为#input_2_15的表单字段中。

div 中的内容`<img src.../>`是图像（它会在不刷新页面的情况下这样做）。我怎样才能做到这一点？

此外，是否有可能获得仅复制图像名称的功能，例如。12345.png 而不是整个`<img src=..../>`?

米罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:05:50.040

```
$('#logo').find('img').attr('src'); 
```

这将为您提供图像位置.. 现在只需将其附加到第二个 div 中的 img src

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:10:02.630

你的意思是

```
function getUrl(id) {
  // function to return the source of an image inside an object with given ID
  return $("#"+id).find("img").attr("src");
}

$(document).ready(function() {
  var currentImage = getUrl("logo"); // get the url of the div now (empty I guess)

  $("#ajaxtrigger").click(function() { // some link with ID ajaxtrigger

    $("#logo").load("someurlreturningsomehmtl",function(){ // loads the image
      if (currentImage != getUrl("logo")) { // did it change?
        currentImage = getUrl("logo"); // save the name
        $("#input_2_15").val(currentImage); // update the field
      }
    })
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T23:32:40.193

我认为这是“发布和订阅”（“Pub/Sub”）方法的一个案例。

在[本文中](https://gist.github.com/1321768)，我们学习了四种使用 jQuery 1.7 进行 Pub/Sub 的方法，我选择了选项 1，它利用了 jquery 1.7 的一个新特性，即它的 $.Callbacks 特性。这篇文章给出了很好的理解，我不会在这里尝试更好。

下面的代码是选项 1 的略微修改版本，避免了对全局变量的需要：

```
$.Topic = function(id) {
    var callbacks, topic = id && $.Topic.topics[id];
    if (!topic) {
        callbacks = $.Callbacks();
        topic = {
            publish: callbacks.fire,
            subscribe: callbacks.add,
            unsubscribe: callbacks.remove
        };
        if (id) {
            $.Topic.topics[id] = topic;
        }
    }
    return topic;
};
$.Topic.topics = {};//avoid global var by making `topics` a property of the static function `jQuery.Topic`.

$(function() {

     //A function to change the logo and fire a publisher. 
    function changeLogoSrc(src) {
        $("#logo img").attr('src', src);
        $.Topic('logoSrcChanged').publish(src); 
    }

    // A subscriber which listenes for the 'logoSrcChanged' publisher 
    // and responds by writing the src string to the required form field
    $.Topic('logoSrcChanged').subscribe(function(src) {
        $("#input_2_15").val(src);
    });
}); 
```

[演示在这里](http://jsfiddle.net/jCaQ3/3/)

因此，使用正确的术语，用于更改徽标和更新表单字段的代码实际上是“解耦”的。

对于一些简单的事情，这种方法可以说是夸大其词，但在需要许多 pub/sub 的更广泛的环境中会很有用。

# c# - 文本框后面代码中的 URL 格式验证

> ID：10010457
> 
> 赞同：0
> 
> 时间：2012-04-04T11:47:46.390
> 
> 标签：c#, asp.net

我使用一个文本框，文本框是用户选择..

用户可以粘贴文本或 URL 的……但用户想要显示视频链接……必须遵循给定的验证……

1.  文本框文字必须只有一个视频链接...
2.  视频链接格式“http://www.youtube.com/watch?v=xxxxxxx-xx&feature=g-logo&context=G2093438FOAAAAAAABAA”（或）“http://youtu.be/xxxxxxx-xx”

[注：xxxxxxx-xx -video 文件名] 3\. 只允许上述格式的视频。因为用户有一段时间

我该怎么做这个验证？（在验证拆分功能期间.....）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:00:12.810

你的网址有什么共同点吗？如果是这样，那么您可以检查字符串是否存在于 URL 中

<< ***** *****在自定义验证器 ServerValidate 事件中添加以下代码 *>>

```
 string str = TextBox1.Text.Trim();
    if(str.contains(your_matching_string))
    {
        args.IsValid = true;   
    }
    else
    {
       args.IsValid = false;   
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T15:44:49.190

TextBox 上的A`RegularExpressionValidator`可以解决问题，但您需要进行一些试验和错误才能得出正确的正则表达式。

这是一个开始：“^http://youtu.be/[a-zA-Z0-9]{7}-[a-zA-Z0-9]{2}”

为了弄清楚其余部分，我至少可以推荐[RadSoftware 的正则表达式设计器](http://www.radsoftware.com.au/)。

# ftp - 如何从 phpdesigner 8 导出 ftp 列表？

> ID：10010459
> 
> 赞同：3
> 
> 时间：2012-04-04T11:48:00.833
> 
> 标签：ftp, phpdesigner

我在 phpDesigner 中有 ftp 连接列表。如何导出或保存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T14:46:43.867

您可以在以下位置找到 ftp xml 文件：C:\Users\your user dir\AppData\Roaming\phpDesigner

phpdesigner_ftp.xml

对于 Windows XP 用户（我假设他们仍然大量存在！）......路径是：

```
C:\Documents and Settings\[Windows-User]\Application Data\phpDesigner 
```

例如，我有一个名为“Ruturaaj”的 Windows 用户帐户。所以，我的路径看起来像：

```
C:\Documents and Settings\Ruturaaj\Application Data\phpDesigner 
```

知道这个文件夹非常方便，因为它还包含一些其他有用的 XML 文件。例如，查找“autocomplete.xml”。该文件包含您在一段时间内添加到 phpDesigner 的所有自动完成代码片段。既然您知道此文件夹路径，我建议您备份此文件夹并简单地用新安装覆盖文件以一遍又一遍地设置相同的环境。

# php - PHP 将结果输出到一页

> ID：10010460
> 
> 赞同：0
> 
> 时间：2012-04-04T11:48:11.370
> 
> 标签：php, button

我有一个系统，用户搜索电影，评论出现在页面上，每个评论旁边都有一个按钮。The button can be selected to look at the individual review but i basically want a button that when selected it will look at all reviews on one page, the code i am using for the individual review is this

```
<?php

ini_set ('display_errors', 1);
error_reporting (E_ALL & ~E_NOTICE);

$searchfilm=$_POST['searchfilm'];

//Connect to database

//Filter search
$searchfilm = strtoupper($searchfilm);
$searchfilm = strip_tags($searchfilm);
$searchfilm = trim ($searchfilm);

$query = mysql_fetch_assoc(mysql_query("SELECT filmreview FROM review WHERE id = '$id'"));
$data = mysql_query("SELECT film.filmname, review.filmreview, review.reviewtitle, review.id FROM film, review WHERE film.filmid = review.filmid AND filmname = '$searchfilm'");  

while($row = mysql_fetch_assoc($data))
{
    // echo $row['filmname'];
    // echo "<b>Film Name:</b> " .$searchfilm;
    echo "<table border=\"2\" align=\"left\">";
    echo "<tr><td>";
    echo "<b>Review Title:</b> " .$row['reviewtitle'];
    echo "<tr><td>";
    echo $row['filmreview'];
    echo "<p>"; 
    echo "<form method='post' action='analyse1.php'>";
    echo "<input type='hidden' name='reviewid' value='".$row['id']."'>";
    echo "<input type='submit' name='submit' value='Analyse'>";
    echo "</form>";     
    echo "</table>";

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:56:53.677

您可以从评论表中的电影 ID 获取电影评论
您可以修改上面的代码并添加另一个表单以获取所有电影评论，当用户单击按钮时，它将重定向他/她到 film_reviews.php

```
<?php
if(isset($_POST['submit']) && $_POST['submit'] == "getAllReviews"){

    $filmID = mysql_real_escape_string($_POST['filmid']);

    $sql = "SELECT * FROM review WHERE filmid = '$filmID'";
    $res = mysql_query($sql);
    if(is_resource($res)){
      while($row = mysql_fetch_array($res)){
           echo "<p>".$row['reviewtitle']."</p>";
           echo "<p>".$row['filmreview']."</p>";
      }
    }
} 
```

# javascript - Javascript分配的CSS背景图像问题

> ID：10010461
> 
> 赞同：0
> 
> 时间：2012-04-04T11:48:12.423
> 
> 标签：javascript, css, background-image

我编写了这段代码，为每个类 .hpCarousel 提供相关的背景图像。

图像名称为：0bg.jpg、1jpg.bg、2bg.jpg 等...

```
for (i=0; i < 8; i++) {
$('.hpCarousel:eq('+i+')').css('background-image', 'url(wp-content/themes/blankslate/assets/carousel/'+i+'bg.jpg');
} 
```

它在 Firefox 中运行良好。这些类具有分配了正确背景图像的样式。

![在此处输入图像描述](../Images/192f4f280a9062600a6b26b92404243c.png)

它不适用于 Chrome OSX&WIN /Safari OSX/IE。.hpCarousel 类 div 没有样式。

![在此处输入图像描述](../Images/8feec80f32886dc4c909a1b21c127ad9.png)

起初我认为这与 Chrome 的后台刷新错误有关。但是在其他浏览器上找到它让我不这么认为。

我显然做错了什么吗？

**这些类在加载时隐藏。这有什么区别吗？然后他们一个接一个地淡入淡出，产生一个轮播**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:55:01.767

您在 FireBug 中有错误吗？您可以在循环中使用另一个（更通用的）选择器：

```
$('.hpCarousel:nth-child(' + i + ')') 
```

此外，`$.each`迭代器是一种更方便的方式来遍历您的背景。

```
$('.hpCarousel').each(function(index) {
    $(this).css('background-image', 'url(wp-content/themes/blankslate/assets/carousel/'+index+'bg.jpg');
}); 
```

# jquery - 延迟后隐藏元素，然后使其可切换？

> ID：10010462
> 
> 赞同：0
> 
> 时间：2012-04-04T11:48:22.127
> 
> 标签：jquery

嗨，我希望最初可以看到页面顶部的警报横幅，然后在延迟后向上动画。

之后我希望用户能够向上或向下切换元素。

这是我的html：

```
$(document).ready( function() {
$('#foo').delay(3000).animate({
    top: "-150px",
  }, 1000, function() {
    // Animation complete.
  });
      });
      $(document).ready(function() {
  $('#clickme').toggle(function() {
    $('#foo').animate({
      top: '-=120'
    }, 1000);
  },function() {
    $('#foo').animate({
      top: '+=120'
    }, 1000);
  })
});

</script>
</head>
<div id="foo">
It's a notification!
</div>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
tortor arcu, sollicitudin et rutrum non, dapibus convallis est. Nulla in
est risus, sit amet consectetur eros. Aliquam posuere, tellus at cursus
pulvinar, mi nulla bibendum sapien, quis lobortis diam risus nec lectus.
Sed justo nunc, lacinia ac sagittis non, aliquam nec est. Praesent porta
neque sed erat vehicula id cursus quam semper.</p>
<button id="clickme">
  Click here
</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:52:28.583

您是否忘记为手动动画指定“px”单位？

```
 top: '-=120px' 
```

另外，你为什么要使用 2“文件准备好”？

好的，这是一个有效的示例：

```
<script type="text/javascript">

 $(document).ready( function() {

  $('#foo').delay(3000).animate({
    top: "-150px",
   }, 1000, function() {
     // Animation complete.
   });

  $('#clickme').toggle(function() {
     $('#foo').animate({
       top: '0'
     }, 1000);
  },function() {
     $('#foo').animate({
       top: '-150px'
     }, 1000);
  });

 });

</script> 
```

不要忘记添加这个：

```
 <style type="text/css">
    #foo {position: absolute;}
 </style> 
```

...因为您正在为顶级属性设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:15:06.420

真的，它正在工作。问题 ：

firdt .ready() -> 顶部：“-150px”，

必须是 -> top: "-=150px",

并将 style="top: 500px; position: absolute" 添加到#foo

为什么？因为#foo 被定位在可见文档之外... ;)

# java - response.sendRedirect 不起作用

> ID：10010466
> 
> 赞同：0
> 
> 时间：2012-04-04T11:48:32.977
> 
> 标签：java, jsp, response

我有两个jsps。一个是`login_first.jsp`，另一个是`main.jsp`。提交后`login_first.jsp`，我打电话`main.jsp`。它工作正常。

我有注销按钮，`main.jsp`其中将控制权发送回`login_first.jsp`. 它执行`login_first.jsp`但页面未加载。请帮忙。

login_first.jsp

```
<%@ page session="false" %>
<%
try {   
    HttpSession session = request.getSession(true); 
    if ("Submit".equals(request.getParameter("SubmitButton"))) {                                
        session.setAttribute("userLoggedIn", "true");               
        response.sendRedirect("main.jsp");          
        return;                             
    } else {            
        session.setAttribute("userLoggedIn", "false");              
        session.invalidate();
    }    
%>                                                                                                 
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <body>      
        <form name="loginForm" method="post">           
            <table>             
                <tr>            
                    <td><input type="submit" name="SubmitButton" value="Submit" class=button/></td>
                </tr>       
            </table>                                                    
        </form>
    </body> 
<%
} catch (Exception e) {
    e.printStackTrace();    
    response.sendRedirect("login_first.jsp");           
    return;
} 
%>
</html> 
```

主.jsp

```
<%@ page session="false" %>
<%
try {   
    HttpSession session = request.getSession(false);    
    if (session != null && "true".equals(session.getAttribute("userLoggedIn"))
            && !"Logout".equalsIgnoreCase(request.getParameter("logout"))) {        
        // do work          
    } else {        
        if (session != null) {
            session.setAttribute("userLoggedIn", "false");              
        }
        response.sendRedirect("login_first.jsp");           
        return;
    }    
%>                                                                                                 
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <body>      
        <form name="creditCardForm" target="formresponse" autocomplete="off" method="post">                 
            <table width="50%" border=0 cellpadding=3 cellspacing=1>            
                <tr>                    
                    <td>            
                        <div align="right">                                                                                    
                            <input name="logout" type="submit" class=button value="Logout">                           
                        </div>                  
                    </td>
                </tr>               
            </table>                    
            <iframe name="formresponse" width="0" height="0" style="visibility:hidden"></iframe>
        </form>
    </body> 
<%
} catch (Exception e) {
    e.printStackTrace();
    response.sendRedirect("login_first.jsp");   
    return;
} 
%>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:09:51.023

首先，两个页面都设置了“session=false”，但您正在尝试获取/设置 Session 中的属性。您确定它完全按预期工作吗？

其次，您只能在任何数据发送回客户端之前（在缓冲区刷新之前）调用 response.sendRedirect()。你确定它发生在你的情况下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:21:59.437

尽管 scriptlet 已经过时，但我认为您应该检查有关 JSP 文件所在位置的文档以及是否需要在重定向 URL 上使用[前导](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29)`/`；例如`/first_login.jsp`，而不是`first_login.jsp`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:09:48.883

我刚刚发现`target="formresponse"`main.jsp 中有问题。因此，我已将此注销移至单独的表单并添加了操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:51:48.490

> 但是相同的 sendRedirect 正在 first_login.jsp 中工作。从 main.jsp 到 login_first.jsp 不工作。

一个原因可能是您的 main.jsp 位于某个子文件夹中。

# java - 使用 Fragments 和 TabHost android

> ID：10010467
> 
> 赞同：0
> 
> 时间：2012-04-04T11:48:35.297
> 
> 标签：java, android, android-fragments

我有这段代码，它在我的应用程序的按钮上创建一个选项卡。我创建了 3 个选项卡。我的选项卡实现几乎相同，仅更改了布局的颜色。我想测试，但它没有显示我创建的布局。

也许我做错了什么。

这是我的第一个选项卡类：

```
public class Tab1Fragment extends Fragment {

    /** (non-Javadoc)
     * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
     */
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {

        Log.v("test","onCreateView:Tab1Fragment");

        if (container == null) {
            return null;
        }

        LinearLayout theLayout = (LinearLayout)inflater.inflate(R.layout.tab_frag1_layout, container, false);

        // Register for the Button.OnClick event
        Button b = (Button)theLayout.findViewById(R.id.frag1_button);
        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(Tab1Fragment.this.getActivity(), "OnClickMe button clicked", Toast.LENGTH_LONG).show();

            }
        });
        return theLayout;
    }
} 
```

而这个类布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#FF0000" >

    <Button
        android:id="@+id/frag1_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

但是，当我运行它时，它会为我调用并打印： **onCreateView:Tab1Fragment**

但我没有看到带有按钮和红色的布局。

我发现我的错误现在标签和框架显示在设备 2.1 中，尺寸为 480x800，但在平板电脑上它无法正常工作。

以下是如何添加标签的代码：

打包我的.test.project；

```
import java.util.HashMap;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import android.view.View;
import android.widget.TabHost;
import android.widget.TabHost.TabContentFactory;

/**
 * @author mwho
 * 
 */
public class TabsFragmentActivity extends FragmentActivity implements
        TabHost.OnTabChangeListener {

    private TabHost mTabHost;
    private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabInfo>();
    private TabInfo mLastTab = null;

    private class TabInfo {
        private String tag;
        private Class<?> clss;
        private Bundle args;
        private Fragment fragment;

        TabInfo(String tag, Class<?> clazz, Bundle args) {
            this.tag = tag;
            this.clss = clazz;
            this.args = args;
        }

    }

    class TabFactory implements TabContentFactory {

        private final Context mContext;

        /**
         * @param context
         */
        public TabFactory(Context context) {
            mContext = context;
        }

        /**
         * (non-Javadoc)
         * 
         * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
         */
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }

    }

    /**
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
     */
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        // Step 1: Inflate layout
        setContentView(R.layout.main_tab_activity);

        // Step 2: Setup TabHost
        initialiseTabHost(savedInstanceState);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); 
        }

        Log.v("test","tabs");
    }

    /**
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
     */
    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("tab", mTabHost.getCurrentTabTag()); // save the tab
                                                                // selected
        super.onSaveInstanceState(outState);
    }

    /**
     * Step 2: Setup TabHost
     */
    private void initialiseTabHost(Bundle args) {

        //ge
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);

        mTabHost.setup();

        TabInfo tabInfo = null;

        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab1").setIndicator("Tab 1"),
                (tabInfo = new TabInfo("Tab1", Tab1Fragment.class, args)));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);

        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab2").setIndicator("Tab 2"),
                (tabInfo = new TabInfo("Tab2", Tab2Fragment.class, args)));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);

        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab3").setIndicator("Tab 3"),
                (tabInfo = new TabInfo("Tab3", Tab3Fragment.class, args)));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        // Default to first tab

        this.onTabChanged("Tab1");
        //
        mTabHost.setOnTabChangedListener(this);
    }

    /**
     * @param activity
     * @param tabHost
     * @param tabSpec
     * @param clss
     * @param args
     */
    private static void addTab(TabsFragmentActivity activity, TabHost tabHost,TabHost.TabSpec tabSpec, TabInfo tabInfo) {

        // Attach a Tab view factory to the spec
        tabSpec.setContent(activity.new TabFactory(activity));

        String tag = tabSpec.getTag();

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state. If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        tabInfo.fragment = activity.getSupportFragmentManager().findFragmentByTag(tag);

        if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {

            FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();

            ft.detach(tabInfo.fragment);

            ft.commit();

            activity.getSupportFragmentManager().executePendingTransactions();

        }

        tabHost.addTab(tabSpec);
    }

    /**
     * (non-Javadoc)
     * 
     * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
     */
    public void onTabChanged(String tag) {

        TabInfo newTab = this.mapTabInfo.get(tag);

        if (mLastTab != newTab) {

            FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();

            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }

            if (newTab != null) {
                if (newTab.fragment == null) {

                    newTab.fragment = Fragment.instantiate(this,newTab.clss.getName(), newTab.args);

                    ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);

                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            this.getSupportFragmentManager().executePendingTransactions();
        }
    }

}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0" />

            <FrameLayout
                android:id="@+android:id/realtabcontent"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1" />

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:orientation="horizontal" />
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

# c# - 在 c#，WP7 中将对象转换为 JSON 字符串

> ID：10010469
> 
> 赞同：2
> 
> 时间：2012-04-04T11:48:41.297
> 
> 标签：c#, json, windows-phone-7

我在尝试获取 JSON 字符串时遇到问题

[{键：{键：值，键：值，键：值，键：值}，键：[{键：值，键：值，键：值，键：值}]

## 在 C# 中。

我的班级结构是这样的

```
 public class wideeye
    {
        public listing listing { get; set; }
        public listing_images[] listing_images { get; set; }
    }

    public class listing
    {

        public string category { get; set; }
        public string city { get; set; }
        public string country { get; set; }
        public string created_at { get; set; }
        public string current_publish_date { get; set; }
        public string details { get; set; }
        public string id { get; set; }
        public string industry { get; set; }
        public string list_exp_date { get; set; }
        public string list_price { get; set; }
        public string list_start_date { get; set; }
        public string make { get; set; }
        public string model { get; set; }
        public string open_bid { get; set; }
        public string state { get; set; }
        public string status { get; set; }
        public string title { get; set; }
        public string updated_at { get; set; }
        public string year { get; set; }
    }

    public class listing_images
    {
        public string created_at { get; set; }
        public string id { get; set; }
        public string listing_id { get; set; }
        public string listing_image_content_type { get; set; }
        public string listing_image_file_name { get; set; }
        public int listing_image_file_size { get; set; }
        public string listing_image_updated_at { get; set; }
        public string updated_at { get; set; }

    }

} 
```

* * *

## 代码是

```
 listing bid1 =
              new listing { category = "electronics", city = "BBSR" };

     listing_images bid2 =
             new listing_images {  created_at = "Instrumentation",  id = "10" };

     List<listing> obid1 = new List<listing>() { bid1};
     List<listing_images> obid2 = new List<listing_images>() { bid2 };

        //DataContractJsonSerializer serializer =  null;

     string sJSON = JsonConvert.SerializeObject(obid1);
     string sJSONw = JsonConvert.SerializeObject(obid2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:47:15.827

DataContractJsonSerializer 类非常好用。

将 System.Runtime.Serialization.dll 和 System.Servicemodel.Web.dll 的引用添加到您的项目中。

```
using System.Runtime.Serialization.Json;

...
...
...

    MemoryStream stream = new MemoryStream();
    DataContractJsonSerializer sr = new DataContractJsonSerializer(obj.GetType());

    sr.WriteObject(stream, obj);
    stream.Position = 0;

    StreamReader reader = new StreamReader(stream);
    string jsonResult = reader.ReadToEnd(); 
```

当然要进行适当的异常处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:54:13.283

![在此处输入图像描述](../Images/f6bc170219f4e48ba0486d1e86890e32.png)我投票支持使用 JSON.net @ [http://json.codeplex.com/](http://json.codeplex.com/)它被 Microsoft 采用并且它比 DataContractJsonSerializer 更有效

此处使用示例：http: [//james.newtonking.com/projects/json/help/](http://james.newtonking.com/projects/json/help/)

![序列化器的性能](../Images/f6bc170219f4e48ba0486d1e86890e32.png)

或者如果不使用 Javascript 序列化器

```
 protected static string JsonSerialize(Object obj)
 {
        var serializer = new System.Web.Script.Serialization.JavaScriptSerializer { MaxJsonLength = int.MaxValue };
        var json = serializer.Serialize(obj);
        return json;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:03:27.330

会将此作为评论留下，但相当麻烦：

向您的项目添加对 System.Web.MVC 的引用，然后像这样创建 JSON：

```
var jsonOutput = Json(obid1); 
```

这就是我在 MVC 控制器中为我的 AJAX 调用生成 JSON 的方式。虽然没有在 Windows 移动应用程序中尝试过。

只是一个想法。

# php - 图像的导出和保存对话框

> ID：10010472
> 
> 赞同：0
> 
> 时间：2012-04-04T11:48:48.837
> 
> 标签：php, charts

我在 php 中动态生成图像。图像具有固定名称。我想要一个按钮或超链接并单击该按钮，用户应该能够导出图像而不是右键单击并保存为图像选项。问题是，如果是 excel、pdf 或 doc 文件，我可以指定文件的路径，浏览器会自动要求打开或保存选项，但对于图像，它会在单独的窗口中打开它们。我想要相同的对话框来保存其他文件如 excel、pdf 的图像。请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:53:22.030

您可以将标题设置为强制下载（对于 PHP）：

```
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$file");
header("Content-Type: image/png"); 
```

然后就可以读取文件了

```
readfile($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:56:40.453

如果您使用的是 Apache，您可以使用 .htaccess 强制下载图像，或者使用标头标签直接通过 php

PHP 示例

```
$file = "PATH TO FILE" ;
$fileName = basename($file);
$fileSize = filesize($file);
set_time_limit(0);
header("Pragma: public");
header("Expires: 0");  // Cache Options 
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");  // Cache Options 
header("Content-type: application/octet-stream");
header("Content-Disposition: filename=\" " . $fileName ."\"");
header("Content-length: $fileSize");
readfile($file); 
```

# python - 用 Tkinter 处理情节

> ID：10010476
> 
> 赞同：0
> 
> 时间：2012-04-04T11:49:16.040
> 
> 标签：python, matplotlib, tkinter

我想用一些 Tkinter 按钮处理一个绘图窗口。例如，绘制矩阵列和使用按钮切换列。我试过这个：

```
import numpy
import pylab
import Tkinter

pylab.ion()
# Functions definitions:
x = numpy.arange(0.0,3.0,0.01)
y = numpy.sin(2*numpy.pi*x)
Y = numpy.vstack((y,y/2,y/3,y/4))

#Usual plot depending on a parameter n:
def graphic_plot(n):
    if n < 0: n = 0
    if n > len(Y): n = len(Y)-1
    fig = pylab.figure(figsize=(8,5))
    ax = fig.add_subplot(111)
    ax.plot(x,Y[n,:],'x',markersize=2)
    ax.set_xlabel('x title')
    ax.set_ylabel('y title')
    ax.set_xlim(0.0,3.0)
    ax.set_ylim(-1.0,1.0)
    ax.grid(True)
    pylab.show()

def increase(n):
   return n+1

def decrease(n):
    return n-1

n=0
master = Tkinter.Tk()
left_button  = Tkinter.Button(master,text="<",command=decrease(n))
left_button.pack(side="left")
right_button = Tkinter.Button(master,text=">",command=increase(n))
right_button.pack(side="left")
master.mainloop() 
```

但是不知道什么时候调用graphic_plot函数并根据`n`参数刷新图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:34:35.770

首先，您需要[将函数传递给](http://effbot.org/tkinterbook/button.htm)按钮中的`command`参数。在这段代码中，

```
left_button  = Tkinter.Button(master, text="<", command=decrease(n)) 
```

您将`decrease(0)`或 -1 交给`command`.

* * *

其他问题：

*   我们不能只传入，`decrease`因为它需要一个参数
*   `n`的状态永远不会改变
*   情节应该在任何时候`n`被 inced/deced更新

我们可以通过以下几种方法轻松地解决这些问题`n`：

```
class SimpleModel:

  def __init__(self):
    self.n = 0

  def increment(self):
    self.n += 1
    graphic_plot(self.n)

  def decrement(self):
    self.n -= 1
    graphic_plot(self.n) 
```

然后对于按钮，我们将拥有：

```
model = SimpleModel()  # create a model

left_button  = Tkinter.Button(master, text="<", command=model.decrease)

right_button = Tkinter.Button(master, text=">", command=model.increase) 
```

# iframe - 所见即所得的编辑器和 IFRAME

> ID：10010479
> 
> 赞同：0
> 
> 时间：2012-04-04T11:49:22.957
> 
> 标签：iframe, wysiwyg, rich-text-editor

回复这篇文章：[https ://stackoverflow.com/questions/3914510/wysiwyg-editor-without-iframe](https://stackoverflow.com/questions/3914510/wysiwyg-editor-without-iframe)

有人可以解释为什么很多所见即所得的编辑器使用 IFRAME 吗？

使用 IFRAME 的充分理由是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:04:23.347

最重要的原因是它提供了从页面到内容的隔离，因此可以应用不同的样式表，对图像使用 baseHref，编辑包括标题在内的整个页面......

# c# - 检查特殊公式中括号的完整性

> ID：10010482
> 
> 赞同：2
> 
> 时间：2012-04-04T11:49:30.220
> 
> 标签：c#, string, boolean, formula

如果用户输入的公式适合条款，我的程序应该在屏幕上打印一条消息（你只能使用数字和字母，你不能以'（'开头，就像数学公式一样，对于每个左括号，都有成为一个合适的（并且在正确的位置）右括号。

这里有一些程序**应该接受**并打印的公式：

真的-

*   一个(aa(a)aaa(aa(a)aa)aa)aaaaa
*   一种（（（（））））

这里有一些程序**不应该接受**和打印的公式：

错误的-

*   ()()()
*   )()()(

但程序总是打印 False 感谢您的帮助 继承代码：***编辑***

```
 bool IsNumeric(char character)
    {
        return "0123456789".Contains(character);
        // or return Char.IsNumber(character);
    }

    bool IsLetter(char character)
    {
        return "ABCDEFGHIJKLMNOPQRSTUVWXWZabcdefghigjklmnopqrstuvwxyz".Contains(character);

    }

    bool IsRecognized(char character)
    {
        return IsBracket(character) | IsNumeric(character) | IsLetter(character);
    }
    public bool IsValidInput(string input)
    {
        if (String.IsNullOrEmpty(input) || IsBracket(input[0]))
        {
            return false;
        }
        var bracketsCounter = 0;
        for (var i = 0; i < input.Length; i++)
        {
            var character = input[i];
            if (!IsRecognized(character))
            {
                return false;
            }
            if (IsBracket(character))
            {
                if (character == '(')
                    bracketsCounter++;
                if (character == ')')
                    bracketsCounter--;
            }
        }

        if (bracketsCounter > 0)
        {
            return false;
        }

        return bracketsCounter==0;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:59:45.657

您的算法过于复杂 - 您所需要的只是一个循环和一个计数器。

*   检查初始字符`(`（您已经这样做了）
*   将计数器设置为零，并逐个遍历每个字符
*   如果字符不是字母或括号，则返回 false
*   如果字符是开口`(`，则增加计数器
*   如果字符是 close `)`，则减少计数器；如果计数器小于零，则返回 false
*   `true`如果循环结束后计数为零，则返回；否则返回`false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:59:52.960

调试真的这么难吗？这个条件：

```
((!IsNumeric(st[i])) && (st[i] != '(') && (st[i] != ')')&&((st[i]<'a')||(st[i]>'z')||(st[i]<'A')||(st[i]>'Z')))
    return false; 
```

显然是错误的。它每次都返回`false`。`a`你不考虑`a`大于`Z`。

**编辑：**

> 那么我怎样才能使它更容易阅读呢？这是我认为的唯一方法。你有其他解决这个问题的方法吗？

至于那个条件块 - 例如，使用更小的方法/函数。

```
bool IsBracket(char character)
{
    return (character == '(' | character == ')');
}

bool IsNumeric(char character)
{
    return "0123456789".Contains(character);
    // or return Char.IsNumber(character);
}

bool IsLetter(char character)
{
    // see why this is NOT prone to fail just because 'a' is greater than 'Z' in C#?
    return (character >= 'a' & character <= 'z') |
        (character >= 'A' & character <= 'Z');

    // or return Regex.IsMatch(character.ToString(), "[a-zA-Z]", RegexOptions.None);
    // or return Char.IsLetter(character);
}

// now you can implement:
bool IsRecognized(char character)
{
    return IsBracket(character) | IsNumeric(character) | IsLetter(character);
} 
```

然后在你的大方法中你可以安全地使用：

```
if (!IsRecognized(st[i]))
    return false; 
```

对于这样一个微不足道的例子来说，它可能看起来有点矫枉过正，但原则上它是一种更好的方法，当然也更具可读性。

之后，您可以将代码简化为以下内容：

```
 bool IsInputValid(string input)
    {
        if (String.IsNullOrEmpty(input) || IsBracket(input[0]))
        {
            return false;
        }
        var bracketsCounter = 0;
        for (var i = 0; i < input.Length; i++)
        {
            var character = input[i];
            if (!IsRecognized(character))
            {
                return false;
            }
            if (IsBracket(character)) // redundant?
            {
                if (character == '(') // then what?
                if (character == ')') // then what?
            }
            if (bracketsCounter < what?)
            {
                what?
            }
        }
        return bracketsCounter == what?;
    } 
```

(`dasblinkenlight`的算法)

**编辑 4 月 10 日**

你理解错了。

```
 bool IsNumeric(char character)
    {
        return "0123456789".Contains(character);
        // or return Char.IsNumber(character);
    }

    bool IsLetter(char character)
    {
        return "ABCDEFGHIJKLMNOPQRSTUVWXWZabcdefghigjklmnopqrstuvwxyz".Contains(character);

    }

    bool IsRecognized(char character)
    {
        return IsBracket(character) | IsNumeric(character) | IsLetter(character);
    }
    public bool IsValidInput(string input)
    {
        if (String.IsNullOrEmpty(input) || IsBracket(input[0]))
        {
            return false;
        }
        var bracketsCounter = 0;
        for (var i = 0; i < input.Length; i++)
        {
            var character = input[i];
            if (!IsRecognized(character))
            {
                return false;
            }
            if (IsBracket(character))
            {
                if (character == '(')
                    bracketsCounter++;
                if (character == ')')
                    bracketsCounter--;
            }
            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
            if (bracketsCounter < 0) // NOT "> 0", and HERE - INSIDE the for loop
            {
                return false;
            }
            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        }

        return bracketsCounter==0;
    }
}
} 
```

顺便说一句，您的 IsLetter 方法也犯了一个错误：...UVWXWZ? 应该是 UVWXYZ

# blackberry - 未找到 net_rim_json_org

> ID：10010484
> 
> 赞同：4
> 
> 时间：2012-04-04T11:49:39.597
> 
> 标签：blackberry, java-me

我在 j2me 中创建了一个应用程序，我在该应用程序中使用了 json 解析。我可以成功构建它。

```
解析导入：C:\Program Files\Research In Motion\BlackBerry JDE 6.0.0/lib/net_rim_api.jar(net_rim_json_org.cod)

构建成功（总时间：1 分 3 秒）

```

但是当在黑莓 9000 v5.0 上导入应用程序并尝试打开它时显示

```
未找到 net_rim_json_org
```

我的问题是，它显示 net_rim_api.jar (net_rim_json_org.cod) 已导入，但是当我在设备上尝试时显示错误 - 为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T03:24:47.113

我也遇到了这个问题，并设法解决如下所述。

**`package org.json.me`**在 JDE 6.0.0 中内置，但在 JDE 5.0.0 或更低版本中不内置。因此，您需要自己添加该包。[您可以从github](https://github.com/upictec/org.json.me/)下载该软件包。

如果您想为**JDE 6**和**JDE 5**编写相同的代码并使您的应用程序同时在 JDE 6 和 JDE 5 上运行，那么您可以将该包重命名为**`org.json.whatever`** .... 并在您的代码中任何您需要使用的地方**`org.json.me.JSONArray`**, **`org.json.me.JSONObject`**.... 您只需使用**`org.json.whatever.JSONArray`**,**`org.json.whatever.JSONObject`**等等。因此您可以使您的代码 JDE 版本独立于 JSON 解析。

更多关于 json 解析的 SO 问题“ [Json parser for Blackberry OS 5](https://stackoverflow.com/questions/7453618/json-parser-for-blackberry-os-5) ”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:44:41.600

您已经使用 SDK 6.0 编译了您的应用程序，并尝试在使用 SDK 5.0 的设备上启动它

```
SDK version == JDE version you have used. 
```

您得到的错误意味着设备操作系统版本。5.0 没有这个库，存在于设备操作系统版本中。6.0

请注意，如果您使用 SDK 6.0 编译应用程序，它将在 OS 版本 6.0 和 7.0 的设备上正常运行，但不能在 OS 5.0 和更早版本的设备上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:40:24.827

在您构建设置==> 订单和导出时，您是否正在导出该库。如果没有，请选中复选框，您的应用程序运行正常

# mysql - Mysql 到 PostgreSql Rails 3 heroku 应用程序 true/false

> ID：10010488
> 
> 赞同：2
> 
> 时间：2012-04-04T11:49:53.030
> 
> 标签：mysql, ruby, ruby-on-rails-3, postgresql

一切正常，直到我推送到heroku，我认为这与mysql和postgres显示布尔值的不同方式有关？

我在**Max OSX上使用****Ruby 1.9.2p318**和**Rails 3.2.2**和**Mysql 5.2.35**

 **这是我要运行的查询

```
@special_offers = Wine.find(:all, :include => [:inventories], :conditions => ["inventories.special = ? AND inventories.warehouse_id IN (?)", "true", @wharehouses_array], :order => "inventories.updated_at DESC", :limit => 3) 
```

似乎问题出在`inventories.special = ?, "true"` 这在 mysql 上可以正常工作，但当我推送到 heroku 时却不行，这是使用 postgres

我尝试用 1 和“1”和“t”和 t 和 true 替换“true”，但似乎没有任何效果？

* * *

**更新：**
*Heroku 日志文件*

```
2012-04-04T14:06:58+00:00 app[web.1]: [2012-04-04 14:06:58] INFO  WEBrick 1.3.1
2012-04-04T14:06:58+00:00 app[web.1]: [2012-04-04 14:06:58] INFO  WEBrick::HTTPServer#start: pid=1 port=54181
2012-04-04T14:06:58+00:00 app[web.1]: [2012-04-04 14:06:58] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-04-04T14:06:59+00:00 heroku[web.1]: State changed from starting to up
2012-04-04T14:07:01+00:00 app[web.1]: => Booting WEBrick
2012-04-04T14:07:01+00:00 app[web.1]: => Call with -d to detach
2012-04-04T14:07:01+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-04-04T14:07:01+00:00 app[web.1]: 
2012-04-04T14:07:01+00:00 app[web.1]: => Rails 3.2.2 application starting in production on http://0.0.0.0:54181
2012-04-04T14:07:01+00:00 app[web.1]: 
2012-04-04T14:07:01+00:00 app[web.1]: Started GET "/" for 41.119.121.138 at 2012-04-04 14:07:01 +0000
2012-04-04T14:07:02+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-04-04T14:07:03+00:00 app[web.1]:   Rendered partials/_display_wines.html.erb (169.1ms)
2012-04-04T14:07:03+00:00 app[web.1]:   Rendered partials/_display_wines.html.erb (0.0ms)
2012-04-04T14:07:03+00:00 app[web.1]:   Rendered partials/_display_wines.html.erb (8.1ms)
2012-04-04T14:07:03+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (259.9ms)
2012-04-04T14:07:03+00:00 app[web.1]:   Rendered partials/_header_bar.html.erb (6.5ms)
2012-04-04T14:07:03+00:00 app[web.1]:   Rendered partials/_main_links.html.erb (0.3ms)
2012-04-04T14:07:03+00:00 app[web.1]:   Rendered partials/_footer.html.erb (4.9ms)
2012-04-04T14:07:03+00:00 app[web.1]: Completed 200 OK in 1081ms (Views: 345.8ms | ActiveRecord: 175.7ms | Solr: 0.0ms)
2012-04-04T14:07:03+00:00 app[web.1]: cache: [GET /] miss
2012-04-04T14:07:03+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=1350ms status=200 bytes=36808
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/javascripts/jquery.js dyno=web.1 queue=0 wait=0ms service=137ms status=304 bytes=0
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/stylesheets/style1.css dyno=web.1 queue=0 wait=0ms service=179ms status=304 bytes=0
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /stylesheets/style1.css] miss
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /javascripts/jquery.js] miss

+00:00 app[web.1]: cache: [GET /javascripts/script1.js] miss
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/javascripts/script1.js dyno=web.1 queue=0 wait=0ms service=187ms status=304 bytes=0
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/javascripts/PIE.js dyno=web.1 queue=0 wait=0ms service=185ms status=304 bytes=0
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/javascripts/rails.js dyno=web.1 queue=0 wait=0ms service=189ms status=304 bytes=0
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /javascripts/PIE.js] miss
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /javascripts/rails.js] miss
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /images/header_tile.png] miss
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/header_tile.png dyno=web.1 queue=0 wait=0ms service=16ms status=304 bytes=0
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /images/none.png] miss
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/none.png dyno=web.1 queue=0 wait=0ms service=35ms status=304 bytes=0
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /images/cybercellar_logo.jpg] miss
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /images/flags.png] miss
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/flags.png dyno=web.1 queue=0 wait=0ms service=96ms status=304 bytes=0
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/cybercellar_logo.jpg dyno=web.1 queue=0 wait=0ms service=84ms status=304 bytes=0
2012-04-04T14:07:04+00:00 app[web.1]: cache: [GET /images/header_login.png] miss
2012-04-04T14:07:04+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/header_login.png dyno=web.1 queue=0 wait=0ms service=44ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/no_wine.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/no_wine.png dyno=web.1 queue=0 wait=0ms service=22ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/buttons2.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/buttons2.png dyno=web.1 queue=0 wait=0ms service=19ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/find_wine_wrap.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/find_wine_wrap.png dyno=web.1 queue=0 wait=0ms service=22ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/comment.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/comment.png dyno=web.1 queue=0 wait=0ms service=5ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/bullet.png] miss

4:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/bullet.png dyno=web.1 queue=0 wait=0ms service=13ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/buttons.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/buttons.png dyno=web.1 queue=0 wait=0ms service=12ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/links_bar.png] miss
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/hr_light.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/hr_light.png dyno=web.1 queue=0 wait=0ms service=12ms status=304 bytes=0
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/links_bar.png dyno=web.1 queue=0 wait=0ms service=17ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/cart_background.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/cart_background.png dyno=web.1 queue=0 wait=0ms service=4ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/home_page_image.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/home_page_image.png dyno=web.1 queue=0 wait=0ms service=6ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/find_wine.png] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/find_wine.png dyno=web.1 queue=0 wait=0ms service=10ms status=304 bytes=0
2012-04-04T14:07:05+00:00 app[web.1]: cache: [GET /images/footer_tile.jpg] miss
2012-04-04T14:07:05+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/footer_tile.jpg dyno=web.1 queue=0 wait=0ms service=7ms status=304 bytes=0
2012-04-04T14:07:06+00:00 app[web.1]: cache: [GET /images/social.png] miss
2012-04-04T14:07:06+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/hr_dark.jpg dyno=web.1 queue=0 wait=0ms service=5ms status=304 bytes=0
2012-04-04T14:07:06+00:00 app[web.1]: cache: [GET /images/hr_dark.jpg] miss
2012-04-04T14:07:06+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/social.png dyno=web.1 queue=0 wait=0ms service=6ms status=304 bytes=0
2012-04-04T14:07:06+00:00 app[web.1]: cache: [GET /images/credit_cards.png] miss
2012-04-04T14:07:06+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/credit_cards.png dyno=web.1 queue=0 wait=0ms service=14ms status=304 bytes=0
2012-04-04T14:07:06+00:00 app[web.1]: cache: [GET /images/money_back.png] miss
2012-04-04T14:07:06+00:00 heroku[router]: GET stormy-fog-6888.herokuapp.com/images/money_back.png dyno=web.1 queue=0 wait=0ms service=5ms status=304 bytes=0 
```

* * *

**架构文件：用于库存表**

```
create_table "inventories", :force => true do |t|
    t.integer   "wine_id"
    t.integer   "warehouse_id"
    t.integer   "stock"
    t.float     "price"
    t.integer   "quantity_id"
    t.timestamp "created_at"
    t.timestamp "updated_at"
    t.boolean   "available",                        :default => false
    t.boolean   "discount",                         :default => false
    t.string    "markupprofile_id",   :limit => 45
    t.string    "discountprofile_id", :limit => 45
    t.float     "discount_price"
    t.boolean   "special",                          :default => false
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:23:03.037

使用实际的 TrueClass，而不是字符串，Rails 会为您将其转换为正确的查询。

正确的：

```
"inventories.special = ?", true 
```

不正确：

```
"inventories.special = ?", "true" 
```

它不会引发错误，因为第二个仍然会产生有效的查询，它只是在寻找其中 special 是包含实际真实字符的字符串的记录。**

# sql - 如何在sql中按单词设置日期

> ID：10010490
> 
> 赞同：2
> 
> 时间：2012-04-04T11:50:12.920
> 
> 标签：sql, sql-server-2005

我想问当我输入天、月、年和每周的名称时如何设置日期。这是我的例子

```
case when description  = 'weekly' 
        then weekly else 
case when description  = 'monthy' 
        then month else 
case when description  = 'year' 
        then year else 
case when description  = 'days' 
        then days else 
        entered 
end &DATE_D 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:12:45.753

你的案例陈述对我来说看起来不太正确。您是否在寻找：

```
case description  
    when 'weekly' then weekly  
    when 'monthy' then month 
    when 'year' then year 
    when 'days' then days 
    else entered 
end DATE_D 
```

# jquery - 是否有一个 jQuery 选择器可以返回所有“第一个类型”的后代？

> ID：10010492
> 
> 赞同：0
> 
> 时间：2012-04-04T11:50:15.203
> 
> 标签：jquery

例如，考虑这个标记：

```
<table>
   <tr>
    <td>
      <div id="d1">
         <div>222</div>
         <div>333</div>
      </div>
    </td>
   </tr>
   <tr>
    <td>
      <p>
         <div id="d1_1">
          <div>222</div>
         </div>
      </p>
    </td>
   </tr>
</table> 
```

编辑：我想只得到 DIVS“d1”和“d1_1”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:08:17.543

```
$('td').find('div:first') 
```

This says, find the first div in each td.

Just for fun, this would find those NOT the first one:

```
$('td').find('div:not(:first)') 
```

See this (slightly modifed) example: [http://jsfiddle.net/ezaHU/](http://jsfiddle.net/ezaHU/)

I modified it to add text to the second examples td so it would show in the example.

AND just for complete example, if you ONLY have an id on those:

```
$('td').find('div[id]') 
```

But I did not think that is what you were aiming for based on the progression of your edits.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:07:42.420

You can use **[`children()`](http://api.jquery.com/children)** like:

```
$('td').children('div') 
```

See this **[fiddle](http://jsfiddle.net/tQKBq/)**

EDIT: Re-reading your question, in case you know all IDs you can also just do:

```
$('#d1, #d1_1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:51:50.850

编辑后你想要这个：

```
$('div:contains("111"):parent'); 
```

# python - apache 是否具有等效于 asp.net httpcontext.cache 和输出缓存的功能？

> ID：10010493
> 
> 赞同：0
> 
> 时间：2012-04-04T11:50:17.677
> 
> 标签：python, asp.net-mvc, apache

我正在将站点从 asp.net-mvc 和 IIS 迁移到 apache。一切都已迁移，但最后一点是 asp.net-mvc 站点正在使用 HttpContext.Cache 并在某些方法上输出缓存属性。

apache web server / python 上的等价物是什么（[使用这个](http://www.modpython.org/)）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:06:24.397

看看[mod_cache](http://httpd.apache.org/docs/2.2/mod/mod_cache.html)看看它是否符合您使用 HttpContext.Cache 的目的。

# php - 使用 PHP preg_match_all 提取特定链接

> ID：10010503
> 
> 赞同：0
> 
> 时间：2012-04-04T11:50:54.953
> 
> 标签：php, curl, preg-match-all

我有一个包含

```
 <img width="10" height="12" scr="https://www.site.com/yughggcfgh">
<img width="11" height="15" scr="https://www.site.com/yughggcfghcvbcvb">
<img width="10" height="12" scr="https://www.site.com/a.jpg">
<img width="10" height="12" scr="https://www.site.com/b.gif"> 
```

我想提取数组中没有扩展名的图像的路径，
输出必须如下

```
ari[1]= <img width="10" height="12" scr="https://www.site.com/yughggcfgh">
ari[2]= <img width="11" height="15" scr="https://www.site.com/yughggcfghcvbcvb"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:05:39.957

你真的应该使用[domDocument](http://php.net/manual/en/class.domdocument.php)或一些 html 解析器而不是正则表达式，这是一个例子：

```
<?php 
$somesource='<img width="10" height="12" src="https://www.site.com/yughggcfgh">
<img width="11" height="15" src="https://www.site.com/yughggcfghcvbcvb">
<img width="10" height="12" src="https://www.site.com/a.jpg">
<img width="10" height="12" src="https://www.site.com/b.gif">';

$xml = new DOMDocument();
@$xml->loadHTML($somesource);
foreach($xml->getElementsByTagName('img') as $img) {
    if(substr($img->getAttribute('src'),-4,1)!='.'){
        $image[] = $img->getAttribute('src');
    }
}

print_r($image);

Array
(
    [0] => https://www.site.com/yughggcfgh
    [1] => https://www.site.com/yughggcfghcvbcvb
)

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:56:42.720

正则表达式可能不是适合这项工作的工具，但你可以……</p>

您应该能够通过[负面的后向断言](http://php.net/regexp.reference.assertions)来实现您的目标：

```
preg_match_all('/src=".+?(?<!\.jpg|\.jpeg|\.gif|\.png)"/', $html, $matches); 
```

# javascript - 学习 Jquery API 的应用程序？

> ID：10010506
> 
> 赞同：2
> 
> 时间：2012-04-04T11:51:05.307
> 
> 标签：javascript, jquery

谁能告诉我一些网络或移动应用程序或游戏？所以我可以在 java 脚本和 jquery api 中尝试它们。我想成为java script和jquery的优秀程序员。你的经验对我有用。希望得到帮助。

将不胜感激...提前谢谢，，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T11:58:11.150

您可以使用[visualjquery](http://visualjquery.com/)浏览可用功能列表并使用[jsfiddle](http://jsfiddle.net/)轻松测试它们。你也可以试试[http://codylindley.com/jqueryselectors/](http://codylindley.com/jqueryselectors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:25:06.190

你不是很清楚你到底在寻找什么。您是否在询问可以使用 Javascript 和 jQuery 编写哪些移动应用程序或游戏的建议？如果是这样，您将不会很幸运。Javascript 允许使网页动态化，并且 jQuery 在其上构建以提供更快使用的基本操作框架。游戏是用 jQuery 编写的，但运行 Javascript 的引擎目前还不够强大或不够可靠，无法使其成为超越 Pairs 等游戏的愉快体验。

如果您正在寻找用 Javascript 制作的东西只是为了学习一点，也许您可​​以尝试构建一个带有正方形的页面，您可以使用箭头键移动该正方形。

# linux - Linux内核版本号？

> ID：10010514
> 
> 赞同：1
> 
> 时间：2012-04-04T11:51:46.290
> 
> 标签：linux, kernel

我对 Linux 内核版本号有些困惑。我注意到许多 Linux 发行版不使用最新的内核，事实上我看到一些使用 2.4 版。是否有一个原因？2.4、2.6、3.2除了年龄有区别吗？使用旧内核有什么安全隐患？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:04:46.250

在主要版本（例如 2.4 和 2.6）之间，引入了新功能并弃用了旧功能，最终使内核二进制文件不兼容。

如果您依赖于一些不属于主线内核的内核模块（例如，它是专有的并且原作者不提供更新的模块；或者它是开源的（但从未将其纳入内核），这很重要）并且没有人愿意花时间迁移代码）

新的主要版本也可能显着改变系统行为。我记得当从 2.4 切换到 2.6 时，许多需要低延迟音频的人（这是我的背景，请原谅我）会继续使用旧内核，因为新的调度算法在某些情况下表现更差。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T11:53:22.297

不同的内核具有不同的功能和改进，发行版的开发人员会查看他们将支持的功能，然后根据该内核的最稳定支持来决定使用哪个内核。

使用哪一个是发行版开发人员的决定，他们会选择他们觉得舒服的那个。

这是软件开发的一个特点，就像问 Java 1.1 和 Java 1.7 是什么，除了年龄有什么区别......答案是很多东西。

大多数内核和软件也将有一个安全补丁计划，如果您不更新他们的系统并保持最新状态，那么您将引发安全问题，因为它们永远不会被修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-16T07:05:48.910

I hope the below page would help us in understanding the linux version numbering system: [http://www.linfo.org/kernel_version_numbering.html](http://www.linfo.org/kernel_version_numbering.html)

A snap from [http://www.tldp.org/FAQ/Linux-FAQ/kernel.html#linux-versioning](http://www.tldp.org/FAQ/Linux-FAQ/kernel.html#linux-versioning)

> > Linux version numbers follow a longstanding tradition. Each version has three numbers, i.e., X.Y.Z. The "X" is only incremented when a really significant change happens, one that makes software written for one version no longer operate correctly on the other. This happens very rarely -- in Linux's history it has happened exactly once.
> > 
> > The "Y" tells you which development "series" you are in. A stable kernel will always have an even number in this position, while a development kernel will always have an odd number.
> > 
> > The "Z" specifies which exact version of the kernel you have, and it is incremented on every release.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T12:16:08.927

Linux Kernel有一个[人类可读的更改日志](http://kernelnewbies.org/LinuxChanges)。

有些人采取“如果它有效 - 不要改变它”的态度。因此，运行旧内核会带来安全隐患——但升级也可能会破坏某些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T12:20:26.060

通常，二进制映像可能无法在版本号的第一部分或第二部分发生变化的内核之间移植。因此，为了从 2.4 升级到 2.6，很大一部分库和可执行文件也需要升级/重新编译。如果您使用闭源应用程序/驱动程序，这可能是一个特殊问题。

大多数 Linux 发行商会根据安全影响/对附加功能的需求，支持来自较新内核版本的端口补丁。如果您无法定期升级整个系统，那么您需要找到一个明确支持较长支持周期且具有良好向后移植历史的发行版（例如 RHEL、SuSE）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T11:57:59.400

随着内核的改进/更改，它们可能会打破对早期版本的期望。如果发行版因为太多软件在新版本内核下中断而变得不稳定，开发人员可能会选择使用早期版本，直到软件能够处理新内核中的更改。

# django - 如何使用 django 为 postgresql 模式和表生成固定装置

> ID：10010517
> 
> 赞同：0
> 
> 时间：2012-04-04T11:51:59.680
> 
> 标签：django, postgresql-9.0

我正在使用 django 和 postgresql db 来开发我的项目，db 有 3 个模式。我正在使用连接字符串编写原始查询来获取数据并将数据插入表中。

例子：

```
from django.db import connection 
    query = "select * from schema1.records" 
    cursor = connection.cursor()
    cursor.execute(query)
    output = cursor.fetchall() 
```

就像我在所有视图中使用的方式一样。

我想为我的视图编写测试用例，所以我需要生成夹具来测试我的视图，如何为模式和表生成夹具。请帮忙。

注意：我没有编写任何模型，我只是在整个项目中使用了原始查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:56:35.750

跑：

```
manage.py dumpdata help 
```

这将展示如何使用 loaddata 来生成夹具。

# jsp - 通过 Tomcat 服务器运行 WebApplication

> ID：10010520
> 
> 赞同：0
> 
> 时间：2012-04-04T11:52:02.443
> 
> 标签：jsp, tomcat

我成功部署了我的 webapplicon，索引页面运行良好，但是当我尝试导航到登录页面时，出现如下错误消息......

```
org.apache.jasper.JasperException: The absolute uri: http://java.sun.com/jsp/jstl/core cannot be resolved in either web.xml or the jar files deployed with this application
org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:56)
org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:410)
org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:117)
org.apache.jasper.compiler.TagLibraryInfoImpl.generateTLDLocation(TagLibraryInfoImpl.java:311)
org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:152)
org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:410)
org.apache.jasper.compiler.Parser.parseDirective(Parser.java:475)
org.apache.jasper.compiler.Parser.parseElements(Parser.java:1427)
org.apache.jasper.compiler.Parser.parse(Parser.java:138)
org.apache.jasper.compiler.ParserController.doParse(ParserController.java:242)
org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:45:39.570

确保您的 Web 应用程序中有这 2 个 jar 文件：

*   jstl.jar
*   标准.jar。

对于 Tomcat 7.xx，您需要**jstl1.2** jar。

# javascript - Javascript - 脚本加载顺序

> ID：10010528
> 
> 赞同：2
> 
> 时间：2012-04-04T11:52:18.293
> 
> 标签：javascript, jquery

我有这个代码：

```
$("#pop_mali_oglas").on('click', function(){
        TINY.box.show({url:'<?php echo base_url()?>form/novi_unos/<?php echo $p ?>'});
        $.getScript("<?php echo JS ?>vendor/jquery.ui.widget.js");
        $.getScript("<?php echo JS ?>tmpl.min.js");
        $.getScript("<?php echo JS ?>load-image.min.js");
        $.getScript("<?php echo JS ?>canvas-to-blob.min.js");        
        $.getScript("<?php echo JS ?>bootstrap.min.js");        
        $.getScript("<?php echo JS ?>bootstrap-image-gallery.min.js");     
        $.getScript("<?php echo JS ?>jquery.iframe-transport.js");
        $.getScript("<?php echo JS ?>jquery.fileupload.js");
        $.getScript("<?php echo JS ?>jquery.fileupload-ip.js");
        $.getScript("<?php echo JS ?>jquery.fileupload-ui.js");
        $.getScript("<?php echo JS ?>locale.js");        
        $.getScript("<?php echo JS ?>main.php");       
        return false;                    
}); 
```

第一行是最后加载（`TINY.box.show({url:'<?php echo base_url()?>form/novi_unos/<?php echo $p ?>'});`），我需要先加载它，然后再加载其余部分。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:58:52.260

我猜第二个参数 (ajax true|false) 默认为 true，这就是为什么它似乎是最后加载的原因。传入 0 作为第二个参数以强制它同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:57:11.403

问题是所有脚本都是异步加载的，这基本上意味着它们都被同时触发，这意味着它们很可能会破坏一切。如果您依赖它们按顺序加载..

查看[过去](https://stackoverflow.com/questions/5000415/javascript-jquery-call-a-function-after-previous-function-is-complete)关于运行函数或任何 javascript 的方法的答案。

就像 tkone 在他的示例中显示的那样，该函数将首先运行 TINY.box.show 函数，然后再运行所有 $.getScript 函数。

```
$("#pop_mali_oglas").on('click', function(){
          scriptload(function() {
          getscripts()
          return false; 
        });
});

function scriptload(callback) {
 tinyboxfunc()
 callback();
} 

function tinyboxfunc() {
TINY.box.show({url:'<?php echo base_url()?>form/novi_unos/<?php echo $p ?>'}); 
};

function getscripts() {
            $.getScript("<?php echo JS ?>vendor/jquery.ui.widget.js");
            $.getScript("<?php echo JS ?>tmpl.min.js");
            $.getScript("<?php echo JS ?>load-image.min.js");
            $.getScript("<?php echo JS ?>canvas-to-blob.min.js");        
            $.getScript("<?php echo JS ?>bootstrap.min.js");        
            $.getScript("<?php echo JS ?>bootstrap-image-gallery.min.js");     
            $.getScript("<?php echo JS ?>jquery.iframe-transport.js");
            $.getScript("<?php echo JS ?>jquery.fileupload.js");
            $.getScript("<?php echo JS ?>jquery.fileupload-ip.js");
            $.getScript("<?php echo JS ?>jquery.fileupload-ui.js");
            $.getScript("<?php echo JS ?>locale.js");        
            $.getScript("<?php echo JS ?>main.php"); 
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T11:57:12.433

这些是异步加载的——它们将以加载的任何顺序出现。为了确保一个在其他加载之前加载，最好的办法是加载一个，然后在第一次加载时触发的回调中加载其他加载.

就像是

```
$.getScript(first script to load, function(){
    // other get script functions
}); 
```

* * *

**编辑**

显然这不是关于脚本加载而是执行顺序。

第一个 tinybox 行会首先执行，但是，在其他行执行并返回之前，调用它的结果可能不可见。这可能是由于 tinybox 命令正在异步加载文件。我上面的答案仍然适用，但您需要了解 tinybox 如何在异步事件成功完成后执行回调。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T12:19:15.147

您应该在[$.getScript](http://api.jquery.com/jQuery.ajax/)之前设置 $.ajaxSetup：

```
 $.ajaxSetup({
  async: false
 }); 
```

作为记录， $.getScript() 确实是异步执行的，所以在使用它之前设置它。

# git - 在 Git 中更改项目中间的开发工作流程

> ID：10010529
> 
> 赞同：0
> 
> 时间：2012-04-04T11:52:19.807
> 
> 标签：git, github

我有一个 Git 存储库，我已经开始在**master**分支上开发它，现在我相信 master 不应该是一个长期运行的分支。和其他人一样，我认为 master 分支始终拥有稳定的产品。

所以，我想打开一个名为**develop**的新分支，该分支将是一个长期运行的开发分支，但我不确定在这里切换的最佳方法是什么。我目前的解决方案是这样的：

打开新分支并将其推送到 GitHub：

```
git checkout -b develop
git push origin develop 
```

然后返回主分支并停止跟踪除**README.md**之外的所有文件并将其推送到远程存储库（在本例中为 GitHub）：

```
git checkout master
git rm . --cached -r
git add README.md
git commit -m "cleaned up the master branch"
git push origin master 
```

你怎么认为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:21:17.010

您的问题与名称“master”有关。

一个分支就是一个分支。它们中没有一个比其他任何一个都更重要。该名称实际上只是一个标签——一个标识当前 HEAD 的字符串，并且随着 HEAD 的提交而颠簸。但是一个分支的“master”-ness 很重要，因为这是 git 赋予它在项目中创建的第一个分支的名称。但这*只是一个名字*。让我们取你当前的 master 分支并给它一个新的名字。既然你所说的无关紧要，让我们选择“史蒂夫”。

```
git branch -m master steve 
```

伟大的。现在你没有主分支！但是你有旧的史蒂夫分支，里面有历史工作。这值得一试，但因为你现在正在历史上划清界限，你可能永远不会再陷入困境。

因此，然后检查您的开发分支，对其进行处理等。当它稳定时（无论在您的特定情况下意味着什么），为自己创建一个新的主人

```
git checkout -b master 
```

哈哈！该主分支上的首次提交是稳定的，您可以确保所有未来的提交也是如此！（顺便说一句，在从开发到主的所有合并中，您都需要 --no-ff，以将那些中间可能不稳定的提交排除在闪亮的新“主”分支之外。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:00:24.227

这根本不是分支在 Git 中的工作方式。没有理由从 中删除所有文件`master`，实际上，这`master`对于以后的合并将完全无用。您将迫使您的分支`master`和`develop`分支从根本上发散。

只需检查您的`develop`分支，然后在那里进行开发工作。当它被认为是“稳定的”时，结帐`master`并将`git merge develop`您的稳定代码带入 master。然后推动两个分支。

您还应该将您的内容修改为自动`git push origin develop`包含在您的分支中，从而允许您推送和拉取更改：`-u``--set-upstream``develop`

```
git push -u origin develop 
```

* * *

作为[Dan Ray 回答](https://stackoverflow.com/a/10010987/229044)的附录，如果您真的想追溯地`master`清空直到您`git merge --no-ff develop`，您需要销毁 master，并且（现在或当您准备合并时）重新创建它以指向您的 repo 中最早的提交。然后`master`和`develop`将在最早的时刻分流，它们可以合并，给人一种“主人总是稳定的”的错觉：

*   检查你的`develop`分支：`git checkout -b develop`
*   删除`master`：`git branch -d master`
*   通过在您的存储库中找到最早的提交`git log`
*   在那个早期的时间点重新创建主人：`git branch master <early commit id>`
*   最终合并为master：`git checkout master && git merge --no-ff develop`

现在您的主分支“总是”为空，直到您的开发代码被合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:59:57.483

听起来你想要做的是结合创建一个新`develop`分支`master`和[这个答案](https://stackoverflow.com/a/647451/649852)[如何插入第一个提交，转移所有其他](https://stackoverflow.com/questions/645450/git-how-to-insert-a-commit-as-the-first-shifting-all-the-others)？.

假设您有如下历史记录：

```
$ git --version
git version 1.7.9.rc2.1.g69204
$ git log --oneline --decorate --all
3047e68 (HEAD, master) D
d5b5fdb C
4a26775 B
c53013b A
2a984b8 initial 
```

`develop`从分支创建一个新`master`分支：

```
$ git branch develop
$ git log --oneline --decorate --all
3047e68 (HEAD, master, develop) D
d5b5fdb C
4a26775 B
c53013b A
2a984b8 initial 
```

创建一个新的初始提交并设置你喜欢的方式：

```
$ git symbolic-ref HEAD refs/heads/newroot
$ git rm --cached -r .
$ git add README.md
$ git clean -f -d
$ git commit -m 'new initial'
$ git log --oneline --decorate --all
8b9881c (HEAD, newroot) new initial
3047e68 (master, develop) D
d5b5fdb C
4a26775 B
c53013b A
2a984b8 initial 
```

现在使`newroot`分支`develop`和新的初始提交`master`分支：

```
$ git rebase --onto newroot newroot develop
$ git branch -d newroot
$ git log --oneline --decorate --all
3d589b6 (HEAD, develop) D
f6a83da C
6c8bdc9 B
f8dd99f A
79706b0 initial
8b9881c new initial
3047e68 (master) D
d5b5fdb C
4a26775 B
c53013b A
2a984b8 initial 
```

现在，在您确定要摆脱现有`master`历史并进行commit`new initial`之后`master`：`HEAD`

```
$ git reset --hard 8b9881c
HEAD is now at 8b9881c new initial
$ git log --oneline --decorate --all
3d589b6 (develop) D
f6a83da C
6c8bdc9 B
f8dd99f A
79706b0 initial
8b9881c (HEAD, master) new initial 
```

当`develop`分支稳定并准备就绪时`master`：

```
$ git checkout master
$ git merge --no-ff develop
$ git log --oneline --graph --decorate --all
*   e8a5c32 (HEAD, master) Merge branch 'develop'
|\  
| * 3d589b6 (develop) D
| * f6a83da C
| * 6c8bdc9 B
| * f8dd99f A
| * 79706b0 initial
|/  
* 8b9881c new initial 
```

# iphone - 带有 CustomView 和边框的 UIBarButton

> ID：10010534
> 
> 赞同：2
> 
> 时间：2012-04-04T11:52:37.460
> 
> 标签：iphone, ios, uibutton, uibarbuttonitem

我已经将 UIBarButtonItem 子类化，并试图制作一个正常显示刷新图像的按钮，但在加载时是一个活动微调器。我遇到的问题是我无法让边框样式在里面显示自定义视图。它只是没有出现。

这是我的代码（来自我的 UIBarButtonItem 子类的构造函数）：

```
self = [super initWithTitle:@"" style:UIBarButtonItemStyleBordered target:self action:nil];
UIView *viwInner = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 24,24)];
[self.customView addSubview:viwInner];

self.btnStandard = [UIButton buttonWithType:UIButtonTypeCustom];
[self.btnStandard setFrame:CGRectMake(0, 0, 24,24)];
UIImage *initialImage = [[UIImage imageNamed:@"refresh_24.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[self.btnStandard setBackgroundImage:initialImage forState:UIControlStateNormal];
[self.btnStandard setBackgroundImage:initialImage forState:UIControlStateHighlighted];
[self.btnStandard setBackgroundImage:initialImage forState:UIControlStateSelected];
[self.btnStandard addTarget:self action:@selector(didTapInitialButton:) forControlEvents:UIControlEventTouchUpInside];
[viwInner addSubview:self.btnStandard];

self.btnLoading = [UIButton buttonWithType:UIButtonTypeCustom];
[self.btnLoading setFrame:CGRectMake(0, 0, 24,24)];
self.loadingView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActionSheetStyleBlackOpaque];
[self.loadingView setHidesWhenStopped:true];
[self.loadingView stopAnimating];
[self.btnLoading addSubview:self.loadingView];
[self.btnLoading addTarget:self action:@selector(didTapAbortButton:) forControlEvents:UIControlEventTouchUpInside];
[viwInner addSubview:self.btnLoading];

return self; 
```

这有什么不工作的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:48:00.587

在 iOS5 中，有一个技巧可以将动画图像放入 a`UIBarButtonItem`并保持`UIBarButtonItemStyleBordered`：

```
UIImage *image = [UIImage animatedImageNamed:@"refresh-" duration:1.f];
self.button = [[UIBarButtonItem alloc] initWithImage:image
                                               style:UIBarButtonItemStyleBordered 
                                              target:self
                                              action:@selector(doSomething:)]; 
```

然后，创建一组图像，动画的每一帧一个图像，然后命名为“refresh-0.png”、“refresh-1.png”等等：

![刷新-0.png](../Images/ee41fed2be2563e196c7b4be71185e09.png) ![刷新-1.png](../Images/69882055c720352993695d74aadc0872.png) ![刷新-2.png](../Images/c045316f873722732e54cc3d7064d9b0.png)

当您想停止动画时，将按钮的图像替换为静态版本：

```
self.button.image = [UIImage imageNamed:@"refresh-0.png"]; 
```

自己创建所有这些图像仍然很麻烦，但它可能比创建自己的按钮边框背景更一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T05:42:15.240

要使用 UIActivityIndi​​catorView 完成此操作，而不是替换它，您必须自己渲染按钮边框。我所做的是将 UIBarButtonItem 的 customView 设置为包含边框的 UIImageView，并将活动视图添加为该图像的子视图。

这给您留下了获取边框图像的问题。如果您只需要一种条形颜色，那么您可以将其从模拟器屏幕截图中裁剪出来；如果您需要在多种条形颜色上使用它，那么您不仅要获得边框像素，还要获得边框透明度，[为此](http://artins.org/ben/software/custom-bordered-button-bar-items)我编写了一个 Python 脚本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T13:39:08.457

`-initWithImage:style:target:action:`由于 UIBarButtonItems（使用or创建`-initWithTitle:style:target:action:`）不支持按钮内的任意视图，因此无法执行您尝试执行的操作。

您可以尝试将 放在`UIActivityIndicatorView`模拟按钮边框的图像顶部。然后，您可以使用`initWithCustomView:`将视图添加到您的按钮。

希望这可以帮助。

# c# - Linq to SQL 转换为 SQL 语法

> ID：10010541
> 
> 赞同：1
> 
> 时间：2012-04-04T11:53:19.843
> 
> 标签：c#, sql, linq, linq-to-sql

我正在尝试在 Linq 中执行以下查询

```
SELECT *
FROM Table1 T1
INNER JOIN Table2 T2
ON T1.ID = T2.AnotherID
LEFT OUTER JOIN Table3 T3
on T1.ID = T3.AnotherID 
```

它以正确的 SQL 语法按预期工作，但我很难将其转换为相应的 Linq to SQL 语法。

如何将左连接与内连接结合起来？

问候，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T12:02:06.097

```
var results = from t1 in Table1
   from t2 in Table2
   where t1.ID = t2.AnotherID
   join t3 in Table3 on t1.ID equals t3.AnotherID into joined
   from j in joined.DefaultIfEmpty()
   select new {t1, t2, t3 = j} 
```

# javascript - 使用vb从asp.net中的列表框中限制项目选择

> ID：10010544
> 
> 赞同：3
> 
> 时间：2012-04-04T11:53:25.403
> 
> 标签：javascript, asp.net

我想使用 vb 限制从 asp.net 中的列表框中选择的项目数。我正在尝试使用javascript。但是，不工作。需要帮忙

```
<asp:ListBox ID="lbprefferedlocation" runat="server" DataSourceID="locations" 
                DataTextField="City_Name" OnSelectedIndexChanged="chkCount(this)" DataValueField="City_Name" SelectionMode="Multiple"></asp:ListBox>
            <asp:HiddenField ID="hiddenChkCount" runat="server" />
            <asp:SqlDataSource ID="locations" runat="server" 
                ConnectionString="<%$ ConnectionStrings:JPConnString %>" 
                SelectCommand="SELECT [City_Name] FROM [State_Info]"></asp:SqlDataSource>

function chkCount(obj)
{
    if(obj.checked==true)
    {
        if( document.getElementById( '<%=hiddenChkCount.ClientID %>' ).value >= 5 )
        {
            alert('You cannot select more than 5 items.');
            obj.checked=false;
        }
        else
        {
            document.getElementById( '<%=hiddenChkCount.ClientID %>' ).value = parseInt( document.getElementById( '<%=hiddenChkCount.ClientID %>' ).value ) + 1;
        }
    }
    else
    {
        document.getElementById( '<%=hiddenChkCount.ClientID %>' ).value = parseInt( document.getElementById( '<%=hiddenChkCount.ClientID %>' ).value) - 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:01:24.297

您可以使用`CustomValidator`：

```
 <asp:CustomValidator ID="CV_CheckLocationCount" runat="server"
     ValidateEmptyText="true" 
     ClientValidationFunction="CheckLocationCount"
     OnServerValidate="CheckLocationCount" 
     ControlToValidate="lbprefferedlocation"
     EnableClientScript="true" 
     ErrorMessage="Select at least one and at most 5 locations"
     ValidationGroup="VG_SAVE">*
</asp:CustomValidator>

function CheckLocationCount(sender, args){
    var count=$('#<%=lbprefferedlocation.ClientID %> option:selected').length;
    args.IsValid = count > 0 && count <= 5;
} 
```

**编辑**：这是一个非 jQuery 解决方案：

```
function validateListBoxSelectionCount(listbox, minSelected, maxSelected){
    var selected=0;
    if(listbox != null){
        for (var i=0; i<listbox.length; i++){
            if(listbox.options[i].selected){
               selected++; 
               if(selected>maxSelected)break;
            }
        }
    }
   return (selected >= minSelected && selected <= maxSelected);
} 
```

你可以这样使用它：

```
var listBox  = document.getElementById("<%=lbprefferedlocation.ClientID %>");
args.IsValid = validateListBoxSelectionCount(listBox, 1, 5); 
```

# playframework - Playframework InvocationTargetException 发生：null

> ID：10010549
> 
> 赞同：1
> 
> 时间：2012-04-04T11:54:00.113
> 
> 标签：playframework, java.util.concurrent, invocationtargetexception

我扩展了聊天示例，并每 5 秒添加一条“保持活跃”消息。如果我通过断点调试和运行代码，它会完美运行。但是，如果我只是运行应用程序，它会崩溃并显示以下日志：

```
// Loop while the socket is open
        while (inbound.isOpen()) {

            // Wait for an event (either something coming on the inbound
            // socket channel, or ChatRoom messages)
            Either<WebSocketEvent, Chat> e = await(Promise.waitEither(
                    inbound.nextEvent(), serverStream.nextEvent()));

            // Incoming text event on WebSocket
            for (String json : TextFrame.match(e._1)) {
                Chat message = Chat.fromJSON(json);
                message.saveAsChatMessage(client, user);

                if (message.isPublishable()) {
                    serverStream.publish(message);
                }
            }

            // After processing information we need to beam this done on the
            // WebSocket
            for (Chat chat : ClassOf(Chat.class).match(e._2)) {
                if (chat.isMeantForMe(client, user, threads)) {
                    outbound.send(chat.toJSON());
                }
            }

            // Case: The socket has been closed
            for (WebSocketClose closed : SocketClosed.match(e._1)) {
                user.setOnline(false);
                user._save();

                // Update all the threads for this user
                for (Thread t : threads) {
                    Chat chat = new Chat();
                    chat.event = event_type.OFFLINE;
                    chat.userId = user.id;
                    serverStream.publish(chat);
                }

                disconnect();
            }
        } 
```

这是完整的日志：

```
Execution exception
InvocationTargetException occured : null

play.exceptions.JavaExecutionException
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:233)
    at play.mvc.WebSocketInvoker.invoke(WebSocketInvoker.java:28)
    at play.server.PlayHandler$WebSocketInvocation.execute(PlayHandler.java:1161)
    at play.Invoker$Invocation.run(Invoker.java:276)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.reflect.InvocationTargetException
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:551)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:502)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161)
    ... 11 more
Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to java.util.Iterator
    at controllers.ChatServerController.join(ChatServerController.java)
    ... 16 more 
```

我知道它与并发有关。我该怎么做才能防止死锁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:51:25.420

我犯的错误是在事件流上发送 JPA 模型。这是从导致崩溃的不同线程调用的。我修改了代码以在事件流或简单对象上发送 json（字符串类型）。

# java - 如何从文本框中获取值并传递给 Process Builder

> ID：10010550
> 
> 赞同：0
> 
> 时间：2012-04-04T11:54:00.783
> 
> 标签：java, svn, processbuilder

对不起或问非常基本的问题和我的英语

我正在尝试在 Cygwin 中运行 SVN 导出命令，它工作正常。现在我想使用文本框 Paas 参数如何实现这一点。

```
ProcessBuilder pb = new ProcessBuilder("cmd"," /c svn export http://My_svn/trunk/data/ d:\\NirajData -r 118 --username niraj --password abc123 --force --non-interactive"); 
```

在上面的代码中我想通过

```
SVN_path=http://My_svn/trunk/data/ 
Destination Path=d:\\NirajData
Svn Versio=118
svnusername=niraj
svnpassword=abc123 
```

请帮助我这样做。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:08:06.047

If I understand it correctly, instead of invoking process builder directly you need to show GUI component: - show GUI component containing boxes for your values and OK\Cancel buttons.
- when OK is pushed construct the command manually part by part based on values from GUI filled by user
- you can also add some checks if all of needed values are filled...
- invoke the command using process builder.

# asp.net - Ninject/.NET MVC3 - 检索我的对象的实例

> ID：10010551
> 
> 赞同：0
> 
> 时间：2012-04-04T11:54:05.917
> 
> 标签：asp.net, asp.net-mvc-3, ninject

这是一些代码，

```
k.Bind<IGame>().To<Game>().Named("A")
   .WithConstructorArgument("ColorChoiceCount", 12);

iGame = k.Get<IGame>("A");
((Game)iGame).SelectedColor = new GameColor(System.Drawing.Color.Red);
iGame = k.Get<IGame>("A"); 
```

首先`iGame = k.Get<IGame>("A");`我得到一个新的实例`Game`。下一行：我更改了它的一个属性。下一行（`iGame = k.Get<IGame>("A");`再次）我再次得到一个新实例。

我想要的是能够检索我已经使用过的实例。但我对这种工具完全陌生，所以我想我错过了一些东西。

如果你能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:58:50.810

您需要指定对象的生命周期 - 默认情况下，容器将创建一个新实例。

> 可用的方法如下：
> 
> *   在适用范围
> *   瞬态作用域
> *   线程范围内
> *   单例范围
> *   请求范围

[http://blog.bobcravens.com/2010/03/ninject-life-cycle-management-or-scoping/](http://blog.bobcravens.com/2010/03/ninject-life-cycle-management-or-scoping/)

您可能想要一个单例（游戏的单个实例）：

```
k.Bind<IGame>().To<Game>().InSingletonScope().Named("A")
   .WithConstructorArgument("ColorChoiceCount", 12); 
```

# jquery - 自定义 jquery selectList 插件以允许文本框和删除？

> ID：10010553
> 
> 赞同：0
> 
> 时间：2012-04-04T11:54:07.940
> 
> 标签：jquery, jquery-plugins, selectlist

我正在使用这个 selectList 插件[http://odyniec.net/projects/selectlist/](http://odyniec.net/projects/selectlist/)

问题是对于用户添加的每个元素，我想让他们指定一个数量。我可以用模板做到这一点：

```
 $(document).ready(function () {
      $('#mySelect').selectList({
      clickRemove: false,
     template: '<li><a>%text%<a/> - <input id="cnt_%value%" name="cnt%value%" type="text" value="1" /></li>'
      });
   }); 
```

我需要将 clickRemove 设置为 false 否则单击文本框删除元素。但是，使用 clickRemove: false，我无法找到允许用户删除元素的方法。

我已经尝试了@Esailija 的建议，这可以删除所有项目：

```
 $("ul.selectlist-list").on("click", "a", function () {
     var selectList = $('#mySelect').selectList({ instance: true });
     selectList.remove();
  }); 
```

而且我可以将硬编码的 ID 传递给 remove() 并且可以正常工作，但我似乎找不到与我要删除的元素关联的值。输入元素的值是一个数量，而不是所选项目的 ID。

那么如何获取要传递给删除的所选项目的值呢？

~~我试图向模板添加一个删除：~~

 ~~```
 template: '<li><a href="#" onclick="$(this).parent().remove()">%text%<a/> - <input id="cnt_%value%" name="cnt%value%" type="text" value="1" /></li>' 
```~~ 

~~这将从显示中删除该项目，但不允许重新选择它。有没有办法做到这一点，或者其他允许这种功能的插件？~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:16:23.867

试试这个（没有内联处理程序）

```
$( "ul.selectlist-list" ).on( "click", "a", function(){
    var $this = $(this),
        $input = $this.siblings("input"),
        selectList = $this.closest( ".selectlist-list" ).prev("select").selectList({instance: true});

    selectList.remove( $input.val() );
}); 
```

即使它不起作用（取决于你的 HTML 结构），你也明白了。您需要调用`remove`a 的方法，`.selectList`而不是直接删除元素，因为插件不会知道您这样做了。

[http://odyniec.net/projects/selectlist/usage.html#api-methods](http://odyniec.net/projects/selectlist/usage.html#api-methods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:25:04.177

检查库的源代码，有一个删除元素的解决方案：

```
 $list.children().each(function () {
            if ($(this).data('value') == value || typeof value == 'undefined')
                remove($(this));
        }); 
```

# svg - d3拖动svg元素时的拖动行为故障

> ID：10010555
> 
> 赞同：2
> 
> 时间：2012-04-04T11:54:34.167
> 
> 标签：svg, d3.js

我正在尝试使用 d3 制作一个包含任意数量的矩形和文本元素的块。我设想的方式是将所有内容嵌套在一个 svg 中，并让 svg 可以拖动，而所有内容都随之移动。

但是，每当我将拖动行为附加到元素时，它就会在我移动它时变得模糊。即使我将 ag 嵌套在 svg 和其他所有带有 g 元素的东西中，也会发生这种行为。

![](../Images/d02d66dea66be0f57f42c107ae8ed280.png)

这是简化的代码。我有一个主 svg，我在其中插入另一个 svg，我在其中嵌套了一个矩形。

```
var dragT = d3.select('#test').append('svg').selectAll('svg.test')
    .data([{x:100,y:100}])
    .enter().append('svg')
    .attr('x',100).attr('y',100)
    .style('width',100)
    .call(rectDragBehav).append('g')
    .append('rect').attr('x',100).attr('y',100)
            .attr('width',100).attr('height',100);

var rectDragBehav = d3.behavior.drag()
    .on('drag', rectDragDrag)

function rectDragDrag(d,i) {
    d.x += d3.event.dx;
    d.y += d3.event.dy; console.log(1);
    d3.select(this)
        .attr('x',d.x)
        .attr('y',d.y);//.attr("transform", "translate(" + d.x + "," + d.y + ")");
} 
```

更新：我不知道这意味着什么，但我刚刚发现当你向下滚动以使整个 svg 看不见并向上滚动时，残像消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:25:53.723

[这是一个](http://jsfiddle.net/xnjGD/1/)使用 jsFiddle 的示例。我制作了样本来帮助您，希望对您有所帮助。

的HTML：

```
<svg height="400" width="600"></svg> 
```

JavaScript：

```
function onDragDrop(dragHandler, dropHandler) {
    var drag = d3.behavior.drag();

    drag.on("drag", dragHandler).on("dragend", dropHandler);
    return drag;
}

    var g = d3.select("body").select("svg").append("g").data([{ x: 50, y: 50 }]);

    g.append("rect")
      .attr("width", 40)
      .attr("height", 40)
      .attr("stroke", "red")
      .attr("fill","transparent")
      .attr("x", function (d) { return d.x; })
      .attr("y", function (d) { return d.y; })
      .call(onDragDrop(dragmove, dropHandler));

    g.append("text")
      .text("Any Text")
      .attr("x", function (d) { return d.x; })
      .attr("y", function (d) { return d.y; })
      .call(onDragDrop(dragmove, dropHandler));

    function dropHandler(d) {
       // alert('dropped');
    }

    function dragmove(d) {
        d3.select(this)
         .attr("x", d.x = d3.event.x)
         .attr("y", d.y = d3.event.y);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:09:50.633

# android - 在构建时选择res目录android

> ID：10010558
> 
> 赞同：0
> 
> 时间：2012-04-04T11:54:43.963
> 
> 标签：android, build

我想创建一个构建时间切换 res 目录项目，其中每个资源文件夹都有名称相同但图像/图标不同的图像/图标。

例如： res1>具有粉红色的 abc.png res2>具有橙色的 abc.png

首先这可能吗？有没有办法在构建时选择它？或蚂蚁构建简单教程或任何其他方式....

# jquery - jQuery - 从这个函数中排除一个 li？

> ID：10010575
> 
> 赞同：2
> 
> 时间：2012-04-04T11:56:10.133
> 
> 标签：jquery

我在最后一个 li 上有一个 8 li 的 ul 列表，它的 ID 为 #search - 我不希望将下拉列表应用于此，我该如何排除它？这是我的代码..

```
$(document).ready(function () {     
  $('#navigation li').hover(function () {
    // Show the sub menu
    $('ul', this).stop(true,true).slideDown(300);
  },
  function () {
  //hide its submenu
   $('ul', this).stop(true,true).slideUp(200);         
  });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T11:57:12.100

使用 jQuery 的[.not()](http://api.jquery.com/not/)

```
$('#navigation li').not("#search").hover(function () {
   // Show the sub menu
   $('ul', this).stop(true,true).slideDown(300);
},
function () {
  //hide its submenu
  $('ul', this).stop(true,true).slideUp(200);         
}); 
```

# iphone - iOS旋转矩阵的解释

> ID：10010579
> 
> 赞同：8
> 
> 时间：2012-04-04T11:56:35.603
> 
> 标签：iphone, accelerometer, gyroscope, core-motion

我正在尝试使用 3D 旋转，但我似乎不明白框架如何进行计算。

例如我得到这个数据：

偏航 -1.010544 俯仰 0.508249 滚动 1.128918

然后我打印对应的旋转矩阵

*   0.599901 -0.128495 -0.789689
*   0.740043 0.464230 0.486649
*   0.304065 -0.876344 0.373584

在阅读了 API 和 wiki 之后，我很确定必须有一种通用的方法来创建欧拉角的旋转矩阵。[我在这里](http://en.wikipedia.org/wiki/Euler_angles#Geometric_algebra)尝试了所有这些，没有结果。

我错过了什么，或者这是如何完成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-22T13:50:57.057

好吧，iOS 或 CoreMotion 两者都提供。旋转矩阵和欧拉角表示。文档在[这里](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/doc/c_ref/CMAttitude)。

但是，如果您对这种计算的工作原理感兴趣，请看[这里](http://planning.cs.uiuc.edu/node102.html)。总结一下：每个欧拉角都可以用一个旋转矩阵来表示，它描述了围绕一个单位轴的旋转。由于存在三个角度，因此您只需将它们组合起来即可。但要小心！欧拉角不是明确的，因为旋转矩阵可以乘以不同的顺序。

编辑：您链接到四元数计算。还是我完全错了？

# c# - 如何根据asp.net中的时间锁定令牌？

> ID：10010588
> 
> 赞同：1
> 
> 时间：2012-04-04T11:57:01.843
> 
> 标签：c#, asp.net, token, access-token

我正在使用以下程序生成令牌，基于时间（当前时间）。它工作正常，这意味着令牌将被生成。

```
 public string GenerateToken()
            {
                MD5 md5 = System.Security.Cryptography.MD5.Create();
                DateTime input = DateTime.Now;
                byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(input.ToString());
                byte[] hash = md5.ComputeHash(inputBytes);

                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < hash.Length; i++)
                {
                    sb.Append(hash[i].ToString("X2"));
                }
                return sb.ToString();
            } 
```

我使用以下程序尝试在 2 分钟内锁定（过期）令牌。这意味着我访问`GetToken() method`，它将返回令牌。`particular Time(current Time)`我需要为该令牌设置有效时间 2 分钟。如果我访问 getToken () 前 2 分钟我需要获得相同的令牌。但我`getToken()`在 2 分钟后访问我需要获得新令牌。我该怎么做？如何锁定令牌？

```
 public string GetToken()
        {
            DateTime currentTime = DateTime.UtcNow;               
            tokenExp = DateTime.UtcNow.AddMinutes(2);
            if (tokenExp >= currentTime)
            {
                token = GenerateToken();
                return token;
            }

            else lock (tokenLock)
                {
                    if (tokenExp >= currentTime)
                    {
                        token = GenerateToken();
                        //return token;

                    }
                    return token;
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:11:27.980

您应该在 GenerateToken 方法中使用类似下面的内容

```
 DateTime dateTime = DateTime.UtcNow;
 dateTime = dateTime.AddSeconds(-dateTime.Second);
 if (dateTime.Minute % 2 != 0)
     dateTime = dateTime.AddMinutes(1); 
```

这将生成偶数分钟的时间，这与 2 分钟的持续时间相同。

**更新**

完整代码

```
public string GenerateToken()
{
    MD5 md5 = System.Security.Cryptography.MD5.Create();
    DateTime dateTime = DateTime.UtcNow;
    dateTime = dateTime.AddSeconds(-dateTime.Second);
    if (dateTime.Minute % 2 != 0)
        dateTime = dateTime.AddMinutes(1);

    byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(dateTime.ToString());
    byte[] hash = md5.ComputeHash(inputBytes);

    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < hash.Length; i++)
    {
        sb.Append(hash[i].ToString("X2"));
    }
    return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:00:16.583

您正在使用**散列**，而您应该使用**加密**。

散列是一种方式，但加密是两种方式，即当您取回令牌时，您可以解密令牌以获得原始值，以便能够计算时间差并检查它是否大于 2 分钟。

您可以使用 AES、3DES、...

# c++ - Python 和浮点数 - 仅打印整数

> ID：10010589
> 
> 赞同：0
> 
> 时间：2012-04-04T11:57:04.147
> 
> 标签：c++, python, floating-point

当不需要额外的精度来表达数字时，Python中有没有办法只打印浮点数的整数部分？例如浮点 1.0。其他一些语言默认执行此操作。这里有些例子：

在 C++ 中，此代码打印 1，而不是 1.0：

```
int main()
{ 
    float f = 1.0;
    std::cout << f << "\n";

    return 0;
}

./a.out 
1 
```

但是，在 Python 中，此代码打印 1.0：

```
f = 1.0

print type(f)
<type 'float'>

print f
1.0 
```

我希望 Python 代码只打印 1，而不是 1.0，这就是完全表示数字所需的全部内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T11:58:51.600

使用`g`格式化选项：

```
print "{:g}".format(1.0) 
```

或者

```
print "%g" % 1.0 
```

（第一个选项仅适用于 Python 2.7。）

这与`std::cout`默认配置非常相似。它只会打印有限数量的数字，就像`std::cout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:00:44.440

模运算符应该适用于所有 Python 版本：

```
>>> f = 1.0
>>> if f % 1 == 0:
...     print int(f)
... else:
...     print f
... 
1
>>> 
```

# regex - 正则表达式时间格式？

> ID：10010590
> 
> 赞同：0
> 
> 时间：2012-04-04T11:57:07.770
> 
> 标签：regex

我有一个正则表达式，它接受特定格式的时间，例如“10:00”。

我想将正则表达式更改为接受这种格式或只接受一个破折号（“-”）。

这是表达式：

```
/^((\d)|(0\d)|(1\d)|(2[0-3]))\:((\d)|([0-5]\d))$/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:00:52.663

解决这个问题的关键点：

*   方括号 (`[`和`]`) 用于包围字符类。
*   管道的`|`意思`or`。
*   `[\:|-]`表示 chech 用于文字`:`或连字符`-`。

结果模式是：

```
^((\d)|(0\d)|(1\d)|(2[0-3]))[\:|-]((\d)|([0-5]\d))$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:07:03.733

Does this regex need to have so many brackets?

```
/^(([01]?\d|2[0-3]):[0-5]\d|-)$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:02:16.300

只需使用替代方法：

```
^<your regex>$|^-$ 
```

这将匹配您格式中的时间或单个连字符减号。

# jquery - 在 jqGrid 中格式化时间

> ID：10010595
> 
> 赞同：1
> 
> 时间：2012-04-04T11:57:15.493
> 
> 标签：jquery, jqgrid

我正在尝试在 jqGrid 中设置时间格式。这没用。我想在语言环境文件中使用预定义的格式化程序。这是 col 的定义方式：

```
 { name: 'Tid', index: 'Tid', width: 65, editable: true, formatoptions: { mask: 'ShortTime' }, editrules: { time: true} } 
```

我尝试了几种不同的选择，但它似乎在网格中没有什么不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:10:37.363

在我看来，文档还不够清楚。正确的语法应该是

```
formatoptions: { srcformat: 'ISO8601Long', newformat: 'ShortTime' } 
```

其他问题是： （in ）中`srcformat`定义的默认值：'Ymd'。因此，默认情况下，输入数据中的任何时间信息都将被忽略。`$.jgrid.formatter.date.srcformat``grid.locale-en.js`

请参阅[演示](http://www.ok-soft-gmbh.com/jqGrid/TimeFormat.htm)。

如果您想在网格中使用本地数据，您还应该考虑我[在此处](http://www.trirand.com/blog/?page_id=393/bugs/errors-in-parsedate-method-with-f-m-and-j-formats/#p25721)报告的错误。该错误已在 github 上的代码中[修复](https://github.com/tonytomov/jqGrid/commit/b688200d8c25a1d639b94b802d47653798da34e1)，但它是在 jqGrid 4.3.1 发布之后。

# java - java中的'new StringBuffer（aString）'是什么？

> ID：10010602
> 
> 赞同：4
> 
> 时间：2012-04-04T11:57:28.807
> 
> 标签：java

我看到一个反转字符串的程序

```
public class ReverseName{
    public static void main(String[]args)
    {
        String name=args[0];
        String reverse=new StringBuffer(name).reverse().toString();
        System.out.println(reverse);
    }
} 
```

那么到底是 怎么回事`new StringBuffer(name).reverse().toString();`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:01:37.527

```
String reverse=new StringBuffer(name).reverse().toString(); 
```

让我们分解一下。

```
new StringBuffer(name) 
```

首先，我们创建一个新的[StringBuffer](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html)（我会使用 StringBuilder，因为我们不需要线程安全），其内容为`name`. 这只是允许一种更高效的方式来附加字符串，但在这里它用于下一部分。

```
.reverse() 
```

这将调用 StringBuffer 上的 reverse 方法，该方法返回一个反转的 StringBuffer。

```
.toString(); 
```

最后，这又变成了一个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:01:50.527

您可以将其拆分为 3 行以进行理解

```
StringBuffer reverseBuffer = new StringBuffer(name); // Creating new StringBuffer object
reverseBuffer  = reverseBuffer.reverse(); //Reversing the content using StringBuffer
String reverse = reverseBuffer.toString(); // Converting StringBuffer to String and saving in reverse 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T11:58:55.507

只是一个反转字符串的 StringBuffer 对象

您使用“名称” String object 实例化 StringBuffer 对象，然后将其反转。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T11:59:38.760

来自 JAVA API

公共字符串缓冲区反向（）

导致此字符序列被相反的序列替换。如果序列中包含任何代理对，则将它们视为单个字符以进行反向操作。因此，高低代理的顺序永远不会颠倒。设 n 是在执行 reverse 方法之前这个字符序列的字符长度（不是 char 值的长度）。那么新字符序列中索引 k 处的字符等于旧字符序列中索引 nk-1 处的字符。

请注意，反向操作可能会导致在操作之前生成未配对的低代理和高代理的代理对。例如，反转“\uDC00\uD800”会产生“\uD800\uDC00”，这是一个有效的代理对。

返回： 对此对象的引用。自：JDK1.0.2

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html#reverse%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html#reverse%28%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T12:18:07.003

实际上 String 是一个不可变的类，这意味着一旦 String 的对象被创建，它的内容就不能被修改。因此我们使用 StringBuffer 来构造字符串。在上面的示例中，StringBuffer 的对象是使用内容名称创建的，名称中的字符串在 StringBuffer 的同一对象中反转（因为它是可变的）。再次转换为 String 对象并将该对象分配给反向对象引用。

# list - 在 Ext.List 上触发 itemtap 事件

> ID：10010604
> 
> 赞同：0
> 
> 时间：2012-04-04T11:57:37.047
> 
> 标签：list, events, sencha-touch

我已经定义了一个煎茶列表如下

```
Ext.List({
                    itemTpl: '<div class={filterClass}></div>{filterType}',
                    id: 'sFilter',
                    width: 200,
                    cls: 'sFilter',
                    grouped: false,
                    indexBar: false,
                    store: store,
                    listeners: {
                        itemtap: function (me, index, item, e) {
                            var selectedRecord = me.store.getAt(index);
                            var filterTag = selectedRecord.data.filterTag;
                            if (filterTag !== searchResultTag.Everything) {
                                var filteredResults = filterResults(filterTag, allResults);
                                //some more code
                            } else {
                                //some more code
                            }
                        }
                    }
                }); 
```

列表的项目是动态添加的，它们没有“id”。我想在上面的列表中触发（第一项）itemtap 事件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:05:11.277

```
 listeners: {
        itemtap: function (me, index, item,record,e) {

            if(index==0){
                alert('This is the first record');
            }else{
                alert('This is not the first record')
            }
                   alert(selectedRecord);

    }
} 
```

这可能会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:49:36.873

这应该允许您获取选定的记录并触发该点击事件

```
 listeners: {
            itemtap: function (me, record, index, item, e) {
                var selectedRecord = index.data.filterType;
                var rec=record;

                if(rec===0){
                    alert('This is the first record');
                }else{
                    alert('This is not the first record')
                }
                       alert(selectedRecord);

        }
    } 
```

# iphone - 在iphone中点击按钮时打开文件对话框

> ID：10010606
> 
> 赞同：4
> 
> 时间：2012-04-04T11:57:51.733
> 
> 标签：iphone, ios, file, button, dialog

我做了一个可可应用程序，当在可可应用程序中使用 NSOpenPanel 控制器点击按钮时，文件对话框正在打开。对于 ipad 应用程序，我们使用的是 UISplitViewController。

我想知道在 iphone 中开发应用程序时，点击按钮时要使用什么控制器打开文件对话框。

例如在撰写邮件时。在撰写邮件时，如果我们想从本地驱动器附加任何文件，我们单击“附加文件”按钮。然后它将打开一个文件打开对话框，用于选择我们想要的文件。

任何人都可以帮助我或建议我使用什么控制器在 iphone 应用程序中打开文件？打开文件对话框，在

cocoa applications --------- 使用的控制器是 NSOpenPanel

ipad应用程序--------使用的Controller是UISplitViewController

就像我的手机应用程序一样明智------- ??????

请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:15:41.590

iOS 没有浏览任意本地文件的概念。

它确实能够从照片库中浏览图像——您可以使用`UIImagePickerController`.

除了照片，您甚至可以打开的唯一文件是您自己的沙盒文件夹中的文件（即您自己放在那里的文件）。没有内置的视图控制器可以显示它们——您必须编写自己的视图控制器来使用类似的东西读取文件列表`NSFileManager contentsOfDirectoryAtPath:error:`，并在适当的 UI 中显示它们。

# java - Google API v3：将活动添加到 Google 日历

> ID：10010610
> 
> 赞同：-1
> 
> 时间：2012-04-04T11:57:59.417
> 
> 标签：java, google-calendar-api

导航到 URL 并表示同意：

```
https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile+https://www.googleapis.com/auth/calendar&state=%2Fprofile&redirect_uri=http://localhost:8080/webapp_name/calendar/calendar.html?operation=oauth2callback&response_type=code&client_id=84294424369.apps.googleusercontent.com&approval_prompt=force 
```

我在我的方法中得到“代码”，它将用于获取访问令牌，例如

```
HttpClient client = new HttpClient();
String accessTokenURL = "https://accounts.google.com/o/oauth2/token";
PostMethod method = new PostMethod(accessTokenURL);     
method.addParameter("code",request.getParameter("code"));           method.addParameter("client_id","84294424369.apps.googleusercontent.com");
method.addParameter("client_secret","sPXaCrOX_19df5iXjII7ZlCp");            method.addParameter("redirect_uri",request.getRequestURL()+"?operation=oauth2callback");
method.addParameter("grant_type","authorization_code");

int returnCode = client.executeMethod(method);

HashMap gctoken =   (HashMap)new JSONDeserializer().deserialize(method.getResponseBodyAsString());

String accessToken = gctoken.get("access_token").toString(); 
```

现在使用上面的令牌将事件插入我的日历：

```
String accessTokenURL = "https://www.googleapis.com/calendar/v3/calendars/jude.law@gmail.com/events";

PostMethod method = new PostMethod(accessTokenURL);
method.addParameter("access_token",accessToken);
method.addParameter("summary","New york trip");
method.addParameter("description","Chicago desc");
method.addParameter("start",(new Date()).toString());
Calendar cal = new GregorianCalendar();
cal.setTime(new Date());
cal.add(Calendar.HOUR,1);           
method.addParameter("end",cal.getTime().toString());

int returnCode = client.executeMethod(method);

System.out.println("Event created------->   "+method.getResponseBodyAsString()); 
```

上面的插入代码给了我错误

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "authError",
    "message": "Invalid Credentials",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Invalid Credentials"
 }
} 
```

**`HOW to solve this Credentials problem and create entry in my google calendar?`**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T09:53:39.717

好的，解决了。

我做了

```
HttpClient client = new HttpClient();   
String accessTokenURL1 = "https://www.googleapis.com/calendar/v3/calendars/"+calId+"/events";
PostMethod method = new PostMethod(accessTokenURL1);
method.setRequestHeader("Content-Type","application/json");         
method.setRequestHeader("Authorization","OAuth "+token);
method.setRequestBody(json);
int returnCode = client.executeMethod(method); 
```

# silverlight - Silverlight 绑定值错误

> ID：10010611
> 
> 赞同：1
> 
> 时间：2012-04-04T11:58:00.237
> 
> 标签：silverlight, binding, mvvm, caliburn.micro

我有一个 Silverlight 页面打开一个对话框。它是一个管理页面，其中包含一些通过 Web 服务与数据库通信的高级逻辑。对于 Silverlight 客户端，我们充分利用了 MVVM。第一次打开对话框，根据实现的逻辑一切正常。

**问题：** 第二*次*打开对话框时，我们的数据绑定设置器开始接收错误的值。

**代码：**

对话框是如何创建的：

```
MyPopupViewModel myPopup = new MyPopupViewModel();
Caliburn.Micro.Execute.OnUIThread(() => WindowManager.ShowDialog(myPopup)); 
```

最终得到错误值的绑定之一：

```
<ComboBox
    ItemsSource="{Binding YesNoItems}"
    SelectedValue="{Binding IsSynchronizing, Mode=TwoWay, Converter={StaticResource BooleanToYesNoConverter}}"
    /> 
```

**我试过的：**

*   我在设置器中放置了断点。这就是我如何意识到逻辑是正确的，但是第二次打开 setter 时会使用其他值调用它。

*   我发现吸气剂被称为 {1, 2, 1} 次 {1st, 2nd, 3rd} 次它们被打开。

*   我确保每次都初始化对话框。也许 Caliburn-micro 以某种方式缓存了旧的，但它显然不会长时间缓存它，因为它在第三次打开时再次正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:14:30.643

通过在对话框的构造函数中添加以下装饰器来解决它`View`，在代码隐藏中。我已经有那个装饰器了`ViewModel`，但`View`显然也需要它。

```
PartCreationPolicy(CreationPolicy.NonShared)] 
```

一位同事通过断点帮助我找到了这一点，然后为每个实例设置了一个 ID。这样我们就证明了有几个例子。很实用。因此，需要告知 Views 每次都重新创建而不是重复使用。

最终的代码隐藏如下所示：

```
[Export]
[PartCreationPolicy(CreationPolicy.NonShared)]
public partial class MyPopupView
{
    public MyPopupView()
    {
        InitializeComponent();
    }
} 
```

# perl - 无法在 Perl 中生成“WinSCP.com”

> ID：10010615
> 
> 赞同：-2
> 
> 时间：2012-04-04T11:58:24.417
> 
> 标签：perl, batch-file

```
system("WinSCP.com /console /script=$scpConfig /parameter=<list parameters> ) == 0  or die "Error transfering file $fileToSend to destination Plateform ";

Can't spawn "WinSCP.com /console /script=$scpConfig  /parameter=<list parameters> 
11:27:13 :      [ERROR]  Error captured :  Error transfering file xxx.tar.gz 
```

我在 DOS 窗口上键入相同的命令，可以通过 scp 传输我的文件，同时当我使用系统命令时出现此错误：

```
Can't spawn "WinSCP.com /console /script=$scpConfig  /parameter=<list parameters> 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T03:46:49.923

这可能会有所帮助：[http](http://winscp.net/eng/docs/executables) ://winscp.net/eng/docs/executables ，似乎 *.com 文件仅用于控制台操作，而 *.exe 用于 GUI 和控制台，您是否尝试过使用 *.exe ?

# php - 在重写的查询字符串末尾强制使用斜杠

> ID：10010620
> 
> 赞同：0
> 
> 时间：2012-04-04T11:58:39.140
> 
> 标签：php, .htaccess

这是我的 htaccess 的样子：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www.site.com$ [NC]
RewriteRule .? http://site.com%{REQUEST_URI} [R=301,L]

RewriteCond %{REQUEST_URI} /page1/([^?].*)$ [NC]
RewriteRule /page1/(.*)$ /page1/?$1 [L] # change /page1/stuff to /page1/?stuff
# End rewriting for page1

RewriteCond %{REQUEST_URI} /page2/([^?].*)$ [NC]
RewriteRule /page2/(.*)$ /page2/?$1
# End rewriting for page2

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*index\.php\ HTTP/
RewriteRule ^(([^/]+/)*)index\.php$ http://%{HTTP_HOST}/$1 [R=301,NS,L]

Options -Indexes 
```

我还想要的是，如果用户访问它，`site.com/page1/stuff`或者`site.com/page1/stuff/more`它会在地址栏中添加一个斜杠并将其更改为`site.com/page1/stuff/`，`site.com/page1/stuff/more/`但我没有尝试过任何工作。有没有办法做到这一点而不会导致重定向循环？

我希望我所有的网址都有一个斜杠，我看到目录已经这样做了。

编辑：为了澄清，我希望用户可以看到尾随斜杠，而不是`?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:09:36.470

感谢@LazyOne 的链接，无论如何这有效：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

# windows - 如何在 Windows 上安装 Email::Sender？

> ID：10010621
> 
> 赞同：4
> 
> 时间：2012-04-04T11:58:43.887
> 
> 标签：windows, perl, email, smtp

我在 Windows 上使用 Perl。我将尝试使用[Email::Sender](https://www.metacpan.org/module/Email%3a%3aSender)模块发送邮件。但我无法为[Email::Sender](https://www.metacpan.org/module/Email%3a%3aSender)安装模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:40:01.983

我使用`cpan Email::Sender`了命令，然后输出如下：

```
CPAN: Storable loaded ok
Going to read /home/user name/.cpan/Metadata
Database was generated on Wed, 04 Apr 2012 09:59:04 GMT
Running install for module Email::Sender
Running make for R/RJ/RJBS/Email-Sender-0.110005.tar.gz
CPAN: Digest::MD5 loaded ok
CPAN: Compress::Zlib loaded ok
Checksum for /home/user name/.cpan/sources/authors/id/R/RJ/RJBS/Email-Sender
-0.110005.tar.gz ok
Scanning cache /home/user name/.cpan/build for sizes
sh: /home/user: No such file or directory
/bin/tar: This does not look like a tar archive
/bin/tar: Exiting with failure status due to previous errors
Uncompressed /home/user name/.cpan/sources/authors/id/R/RJ/RJBS/Email-Sender
-0.110005.tar.gz successfully
Using Tar:/bin/tar xvf /home/user name/.cpan/sources/authors/id/R/RJ/RJBS/Em
ail-Sender-0.110005.tar:
/bin/tar: /home/user: Cannot open: No such file or directory
/bin/tar: Error is not recoverable: exiting now
Couldn't untar /home/user name/.cpan/sources/authors/id/R/RJ/RJBS/Email-Send
er-0.110005.tar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T12:00:12.527

假设您指的是 CPAN 模块`Email::Sender`（Perl 区分大小写），而不是其他不在 CPAN 中的模块，那么您使用 Perl 发行版附带的软件包安装程序。

在大多数情况下，这将是：

```
cpan Email::Sender 
```

[CPAN 主页](http://www.cpan.org/)的入门部分链接了[更多详细信息和方法](http://www.cpan.org/modules/INSTALL.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:09:39.450

使用下面给出的命令：

```
cpan Email::Sender 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T17:00:55.750

尽管`Email::Sender`有漂亮而简单的命令结构，但它不是标准 Perl 安装的一部分。但是，[Net::SMTP](http://perldoc.perl.org/Net/SMTP.html)是。

是的，`Net::SMTP`使用起来有点复杂，但是您可能已经安装了它，并且如果您的 Perl 脚本在各种机器上使用 - 包括可能无法安装 CPAN 模块的机器 - 这是您必须执行的简单操作之一处理。

如果你真的喜欢`Email::Sender`，你可以根据你的 Perl 安装类型来安装它。如果你有 ActiveState，你可以使用 Perl 包管理器（它在 ActiveState 下的开始菜单中）`Email::Sender`为你下载。

查看您的错误消息，首先尝试安装`Archive::Tar`并`Compress::Zlib`查看是否有助于安装`Email::Sender`.

如果没有，并且您已经安装了[7Zip](http://www.7-zip.org/)，请转到该`/home/user name/.cpan/sources/authors/id/R/RJ/RJBS`目录，然后`Em ail-Sender-0.110005.tar`使用 7Zip 手动解压缩文件。如果失败，请转到[Email::Sender](http://search.cpan.org/dist/Email-Sender/lib/Email/Sender.pm)的 CPAN 页面，手动下载抓取的 tar 球，然后使用 7Zip 解压缩。

完成后，您必须手动运行以下命令：

```
 C> perl Makefile.PL 
```

`C> nmake`¹

```
 C> nmake test
 C> nmake install 
```

毕竟，这就是 CPAN 所做的。

还有一件事：看看我的[svn-watch.pl](https://github.com/qazwart/SVN-Watcher-Hook/blob/master/svn-watch.pl)程序。第 767 行左右是使用`Net::SMTP`. 我也使用`Mail::Sendmail`which 是另一个 Perl 电子邮件模块，因为有些网站`Net::SMTP`在使用`Mail::Sendmail`. 您可以看到我用来确定是否`Mail::Sendmail`已安装的逻辑，如果已安装，则使用它。如果`Mail::Sendmail`没有安装，我默认为`Net::SMTP`. 该测试逻辑在 #739 到 #742 行。

希望这可以帮助。

* * *

^(1.)该命令可能是`nmake`或者`make`取决于您的 Perl 发行版。

# php - 插入值时仅显示 1 行

> ID：10010622
> 
> 赞同：0
> 
> 时间：2012-04-04T11:58:45.523
> 
> 标签：php, javascript, mysql

我下面的代码应该显示每个问题（$_POST[questionText]）。对于每个问题，它显示它的 SessionId、QuestionId、QuestionContent 和 OptionId。但相反，它只显示 1 个问题。为什么它只显示 1 个问题，我怎样才能让它显示所有问题？

我使用回显来使用 INSERT VALUES 对输出进行文本处理。

```
foreach($_POST['questionText'] as $i => $question)
{

      $insertquestion = array();

$options[] = $_POST['gridValues'];

switch ($options[$i]){

    case "3": 
    $selected_option = "A-C";
    break;

    case "4": 
    $selected_option = "A-D";
    break;

    default:
    $selected_option = "";
    break;

}      

$optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = '". mysql_real_escape_string($selected_option)."')";

 $optionrs = mysql_query($optionquery);
 $optionrecord = mysql_fetch_array($optionrs);
 $optionid = $optionrecord['OptionId']; 

    $insertquestion[] = "'". mysql_real_escape_string($_SESSION['id'] ) . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". mysql_real_escape_string( $_POST['num_questions'] ) ."','".  mysql_real_escape_string( $question ) ."','".  mysql_real_escape_string( $optionid ) ."'";

    $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent, OptionId) 
    VALUES (" . implode('), (', $insertquestion) . ")";

    $i++;

    }

echo($questionsql); 
```

下面是javascript代码和表单代码。它的工作原理是用户在文本区域中输入一个问题`('name='questionText')`并输入一个选项`(name='gridValues')`，然后他们将它们两个附加到一个表格行中（表格形式为 which `id='qandatbl'`）。这是问题1。然后他们对第二个问题再次做同样的事情，然后是第三个等等。请仔细看这个，很容易理解。

```
<script>

    function insertQuestion(form) {   

    var context = $('#optionAndAnswer');

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
    var $question = $("<td class='question'></td>");
    var $options = $("<td class='option'></td>");
    var $questionType = '';

    $('#questionTextArea').each( function() {

    var $this = $(this);
    var $questionText = $("<textarea class='textAreaQuestion'></textarea>").attr('name',$this.attr('name')+"[]")
                   .attr('value',$this.val())

    $question.append($questionText);

    });

    $('.gridTxt', context).each( function() {

     var $this = $(this);
     var $optionsText = $("<input type='text' class='gridTxtRow maxRow' />").attr('name',$this.attr('name'))
                     .attr('value',$this.val())

    $options.append($optionsText);
    $questionType = $this.val();

    });

    $tr.append($question);
    $tr.append($options);    
    $tbody.append($tr); 

    }

</script>

    <form id="QandA" action="insertQuestion.php" method="post" >

    <h1>SESSION (<?php echo $_SESSION['id'] ?>)</h1>

    <table>
    <tr>
        <td rowspan="3">Question:</td> 
        <td rowspan="3">
            <textarea id="questionTextArea" rows="5" cols="40" name="questionText"></textarea>
        </td>
    </tr>
    </table>

    <table id="optionAndAnswer" class="optionAndAnswer">
    <tr class="option">
    <td>Option Type:</td>
    <td>
    <div>
        <input type="text" name="gridValues" class="gridTxt maxRow" readonly="readonly" />
    </div>
    </td>
    </tr>
    </table>

    <table id="qandatbl" align="center">
    <thead>
    <tr>
        <th class="question">Question</th>
        <th class="option">Option Type</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
    </table>

    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:46:51.273

第一的。你能把你的java脚本改成：

```
var $optionsText = $("<input type='text' class='gridTxtRow maxRow' />").attr('name',$this.attr('name')+"[]")
                     .attr('value',$this.val()) 
```

然后你的php代码：

* * *

更新

```
$i = 0;
$c = count($_POST['gridValues']);

print_r($_POST['questionText']);
print_r( $_POST['gridValues'] );

$insertquestion = array();

for($i = 0;  $i < $c; $i++ ){

    switch ($_POST['gridValues'][$i]){
        case "3": 
        $selected_option = "A-C";
        break;
        case "4": 
        $selected_option = "A-D";
        break;
        default:
        $selected_option = "";
        break;
    }      

    $optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = '". mysql_real_escape_string($selected_option)."')";
    $optionrs = mysql_query($optionquery);
    $optionrecord = mysql_fetch_array($optionrs);
    $optionid = $optionrecord['OptionId']; 

    $insertquestion[] = "'". mysql_real_escape_string($_SESSION['id'] ) . 
                    ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". 
                    mysql_real_escape_string( $_POST['num_questions'] ) ."','".  
                    mysql_real_escape_string( $_POST['questionText'][$i] ) ."','".  
                    mysql_real_escape_string( $optionid ) ."'";

}

 $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent, OptionId) 
    VALUES (" . implode('), (', $insertquestion) . ")";

echo($questionsql); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:52:58.517

据我从你的代码中可以看出，它正在这样做......

```
foreach($_POST['questionText'] as $i => $question)
{
    // insert the row
    $questionsql = '...';
    $i++;
    }
echo($questionsql); 
```

循环结束时的输出也是如此`$questionsql`，此时它将仅包含来自最后一次迭代的数据。

如果要`$questionsql`为每个插入的行输出，则需要进入循环内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:04:32.157

```
$('#questionTextArea').each( function() {
...
} 
```

这部分函数只会导致函数的一次迭代发生。您结合使用 id 选择器（唯一）和每个函数。因此，您选择一个元素，然后使用 each 函数迭代一个对象。

# sql-server - SQL Server：使用服务帐户时确定域用户

> ID：10010628
> 
> 赞同：1
> 
> 时间：2012-04-04T11:59:00.310
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, dns

我想将我的应用程序设置为使用服务帐户连接到 SQL Server，而不是通过域用户凭据。通过传递，有必要授予特定用户对数据库的读/写访问权限，我认为这是一个安全漏洞。

我的问题是，如果我使用服务帐户凭据建立与 SQL 服务器的连接，是否仍然可以识别发起请求的实际用户？例如，域用户 John Smith 访问网站并执行一些操作。使用某些服务帐户的安全凭据建立与数据库的连接，但是 johh smith 的名称仍会传递到 SQL 服务器。SQL 会以某种方式使用此人的姓名 - 例如将其存储在审计表中等。

这可以做到吗？考虑到我需要以某种方式将原始用户名输入 SQL 服务器，这是最佳做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:50:55.627

如果用户使用 SQL Server 登录名登录到 SQL Server，则无法通过 SQL 登录名知道他是谁（在域级别上）。

```
however johh smith's name is still passed through to SQL server 
```

是的，您可以做的是使用 User.Identity.Name 以某种方式捕获 AD 用户名，然后将其发送到您自己手动创建的审核表上的 SQL Server

# objective-c - 当 UIImageView 图像完成加载时停止动画 UIActivityIndi catorView

> ID：10010629
> 
> 赞同：0
> 
> 时间：2012-04-04T11:59:00.587
> 
> 标签：objective-c, ios, uiimageview

我想在 UIImageView 上显示旋转的活动视图，并在图像完成加载并显示后停止并隐藏活动视图。该图像是从资产库拍摄的大照片。

```
- (void)viewDidLoad
{
    //set photo
    UIImageView *Photo = _photo;
    NSURL *url = [[NSURL alloc] initWithString:project.photo];
    ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];

    [library assetForURL:url resultBlock:^(ALAsset *asset) {

        ALAssetRepresentation *rep = [asset defaultRepresentation];
        CGImageRef iref = [rep fullResolutionImage];
        if (iref) {
            self.photo.image = [UIImage imageWithCGImage:[rep fullScreenImage] scale:[rep scale] orientation:0];

        }
             } failureBlock:^(NSError *error) {

                 NSLog(@"Couldn't load asset %@ => %@", error, [error localizedDescription]);

             }];

    [_ImageLoader stopAnimating];
} 
```

但是，这不起作用，因为活动视图不断旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:29:25.243

微调器始终是动画的，因为

```
- (void)viewWillAppear:(BOOL)animated; 
```

被调用后

```
- (void)viewDidLoad 
```

所以基本上你在告诉微调器停止后告诉它动画。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:11:51.690

氦气是对的。您想将 cal 移动到结果块内的 [_ImageLoader stopAnimating]，或者最终在动画开始之前停止动画。

# java - 将 Json 解析为 Java

> ID：10010630
> 
> 赞同：1
> 
> 时间：2012-04-04T11:59:01.420
> 
> 标签：java, json, list, parsing, sonarqube

我想解析这个 Json 代码：

```
[{"id":7,"key":"integrationContinue:integrationContinue","name":"life Portlet","scope":"PRJ","qualifier":"TRK","date":"2012-03-26T10:10:22+0100","lname":"life Portlet","lang":"java","version":"1.0-SNAPSHOT","description":"","msr":[{"key":"ncloc","val":897.0,"frmt_val":"897"},{"key":"coverage","val":0.6,"frmt_val":"0,6%"}]}] 
```

我创建了两个类：

```
 public class Ressources {

  private String id;
    private String key;
    private String name;
    private String lname;
    private String scope;
    private String qualifier;
    private String lang;
    private String version;
    private String date;
    private List<Mesures> msr;

    public Ressources() {

    }

    public Ressources(String id, String key, String name, String lname,
            String scope, String qualifier, String lang, String version,
            String date, List<Mesures> msr) {
        super();
        this.id = id;
        this.key = key;
        this.name = name;
        this.lname = lname;
        this.scope = scope;
        this.qualifier = qualifier;
        this.lang = lang;
        this.version = version;
        this.date = date;
        this.msr = msr;
    }
 @Override
 public String toString() {return "Ressources : \n id=" + id  + ",\n key=" + key + ",\n name=" + name + ",\n lname=" + lname + ",\n scope=" + scope + ",\n qualifier=" + qualifier + ",\n lang=" + lang + ",\n version=" + version + ",\n date=" + date; 
```

}

```
 public class Ressources {

  private String id;
    private String key;
    private String name;
    private String lname;
    private String scope;
    private String qualifier;
    private String lang;
    private String version;
    private String date;
    private List<Mesures> msr;

    public Ressources() {

    }

    public Ressources(String id, String key, String name, String lname,
            String scope, String qualifier, String lang, String version,
            String date, List<Mesures> msr) {
        super();
        this.id = id;
        this.key = key;
        this.name = name;
        this.lname = lname;
        this.scope = scope;
        this.qualifier = qualifier;
        this.lang = lang;
        this.version = version;
        this.date = date;
        this.msr = msr;
    }
 @Override
 public String toString() {return "Ressources : \n id=" + id  + ",\n key=" + key + ",\n name=" + name + ",\n lname=" + lname + ",\n scope=" + scope + ",\n qualifier=" + qualifier + ",\n lang=" + lang + ",\n version=" + version + ",\n date=" + date;} 
```

（带有 getter 和 setter）

```
public class Mesures {

private String key;
private float val;
private String frmt_val;

public Mesures(){}
public Mesures(String akey, float aval,String afrmt_val ){
    key=akey;
    val=aval;
    frmt_val=afrmt_val;

}

 @Override
 public String toString() {return " \n key=" + key  + ",\n val=" + val + ",\n frmt_val=" + frmt_val;
} 
```

然后我创建了两个函数：

```
 public List<Ressources> parseGson_Ressources(String jsonToParse) {

        JsonElement jsonElement = new JsonParser().parse(jsonToParse);
        JsonArray array = jsonElement.getAsJsonArray();

        @SuppressWarnings("rawtypes")
        Iterator iterator = array.iterator();
        List<Ressources> ressources = new ArrayList<Ressources>();

        while (iterator.hasNext()) {
            JsonElement jsontmp = (JsonElement) iterator.next();
            Gson gson = new Gson();
            Ressources ressource1 = gson.fromJson(jsontmp, Ressources.class);        
            ressources.add(ressource1);

        }

        return ressources;
    }

 public List<Mesures> parseGson_Mesures(String jsonToParse) {

        JsonElement jsonElement = new JsonParser().parse(jsonToParse);
        JsonArray array = jsonElement.getAsJsonArray();

        @SuppressWarnings("rawtypes")
        Iterator iterator = array.iterator();
        List<Mesures> mesures = new ArrayList<Mesures>();

        while (iterator.hasNext()) {
            JsonElement jsontmp = (JsonElement) iterator.next();
            Gson gson = new Gson();
            Mesures mesure = gson.fromJson(jsontmp, Mesures.class);
            mesures.add(mesure);
        }   
        return mesures;
    } 
```

然后我写了这段代码来得到结果：

```
 String xxx = RequestSonar(); //wich return the Json result

     List<Ressources> listRessources = new ArrayList<Ressources>();
     listRessources = rs.parseGson_Ressources(xxx);
     Iterator<Ressources> iterator;
     iterator = listRessources.iterator();

     while (iterator.hasNext()) {

         Ressources ressource = iterator.next();
         System.out.println(ressource.toString());
     }
     List<Mesures> listMesures = new ArrayList<Mesures>();
     Iterator<Mesures> iterator2;
     listMesures = rs.parseGson_Mesures(xxx);
     iterator2 = listMesures.iterator();

     while (iterator2.hasNext()) {

        Mesures mesure = iterator2.next();
        System.out.println(mesure.toString());
    } 
```

执行后我得到这个结果：

```
Ressources : 
id=7,
key=integrationContinue:integrationContinue,
name=life Portlet,
lname=life Portlet,
scope=PRJ,
qualifier=TRK,
lang=java,
version=1.0-SNAPSHOT,
date=2012-03-26T10:10:22+0100

key=integrationContinue:integrationContinue,
val=0.0,
frmt_val=null 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:25:00.833

```
i think this will help you,

create two classes with getter setter methods

public class Ressources {

    private String id;
    private String key;
    private String name;
    private String lname;
    private String scope;
    private String qualifier;
    private String lang;
    private String version;
    private String date;
    private List<Mesures> msr;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getKey() {
        return key;
    }

    public void setKey(String key) {
        this.key = key;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLname() {
        return lname;
    }

    public void setLname(String lname) {
        this.lname = lname;
    }

    public String getScope() {
        return scope;
    }

    public void setScope(String scope) {
        this.scope = scope;
    }

    public String getQualifier() {
        return qualifier;
    }

    public void setQualifier(String qualifier) {
        this.qualifier = qualifier;
    }

    public String getLang() {
        return lang;
    }

    public void setLang(String lang) {
        this.lang = lang;
    }

    public String getVersion() {
        return version;
    }

    public void setVersion(String version) {
        this.version = version;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public List<Mesures> getMsr() {
        return msr;
    }

    public void setMsr(List<Mesures> msr) {
        this.msr = msr;
    }

}

public class Mesures {

    private String key;
    private float val;
    private String frmt_val;

    public String getKey() {
        return key;
    }

    public void setKey(String key) {
        this.key = key;
    }

    public float getVal() {
        return val;
    }

    public void setVal(float val) {
        this.val = val;
    }

    public String getFrmt_val() {
        return frmt_val;
    }

    public void setFrmt_val(String frmt_val) {
        this.frmt_val = frmt_val;
    }

}

then use this to Parse your JSON

String jsonl = "[{'id':7,'key':'integrationContinue:integrationContinue','name':'life Portlet','scope':'PRJ','qualifier':'TRK','date':'2012-03-26T10:10:22+0100','lname':'life Portlet','lang':'java','version':'1.0-SNAPSHOT','description':'','msr':[{'key':'ncloc','val':897.0,'frmt_val':'897'},{'key':'coverage','val':0.6,'frmt_val':'0,6%'}]}]";

Gson gson = new Gson();
Type collectionType = new TypeToken<List<Ressources>>() {
        }.getType();
List<Ressources> ressourcesList = gson.fromJson(jsonl, collectionType);

Ressources ressources = ressourcesList.get(0);
System.out.println("id :" + ressources.getId());
System.out.println("key :" + ressources.getKey());
System.out.println("name :" + ressources.getName());
System.out.println("scope :" + ressources.getScope());
System.out.println("qualifier :" + ressources.getQualifier());
System.out.println("date :" + ressources.getDate());
System.out.println("lname :" + ressources.getLname());
System.out.println("lang :" + ressources.getLang());
System.out.println("version :" + ressources.getVersion());
System.out.println("Mrs :");

List<Mesures> mrsList = ressources.getMsr();
for (int i = 0; i < mrsList.size(); i++) {
System.out.println("key :" + mrsList.get(i).getKey());
System.out.println("val :" + mrsList.get(i).getVal());
System.out.println("frmt_val :" + mrsList.get(i).getFrmt_val());
}

output:

id :7
key :integrationContinue:integrationContinue
name :life Portlet
scope :PRJ
qualifier :TRK
date :2012-03-26T10:10:22+0100
lname :life Portlet
lang :java
version :1.0-SNAPSHOT
Mrs :
key :ncloc
val :897.0
frmt_val :897
key :coverage
val :0.6
frmt_val :0,6% 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T12:03:49.043

你可以写：

```
public Ressources[] parseGson_Ressources(String jsonToParse) {
    Gson gson = new Gson();
    Ressources[] resources = gson.fromJson(jsonToParse, Ressources[].class);
} 
```

这应该完成您的两个复杂方法`parseGson_Ressources`和`parseGson_Ressources`.

**编辑**根据 Guillaume Polet 的评论，我的初始代码不正确。我将方法的返回类型更改为数组，因为这更易于实现。不过，如果您想坚持`List`解决方案，请考虑他的评论 - 它应该会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:08:05.840

I don't want to burst your bubble... but I would simply go:

```
new Gson().fromJson(<json string here>, MyClass.class) 
```

MyClass would be the class that you generated the JSon from. The GSon is a Google library. If you use maven, you can include it as follows:

```
<dependency>
  <groupId>com.google.code.gson</groupId>
  <artifactId>gson</artifactId>
  <version>1.7.1</version>
</dependency> 
```

It's so easy... to convert to JSon, simple use the toJson() method.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:29:32.407

如果这个 JSON 是从 Sonar Web 服务调用的结果，那么您不需要解析它：只需使用 Sonar Java Web Service Client 组件，这将为您完成所有工作，您无需关心JSON => [http://docs.codehaus.org/display/SONAR/Using+the+Web+Service+Java+client](http://docs.codehaus.org/display/SONAR/Using+the+Web+Service+Java+client)

# css - 让 CSS 过渡正常工作的麻烦

> ID：10010633
> 
> 赞同：1
> 
> 时间：2012-04-04T11:59:15.903
> 
> 标签：css, opera, css-transitions

我试图让我的头脑围绕 CSS3 过渡，我不确定我的理解是否有问题，或者浏览器是否不合作。

首先，我认为 Opera 应该从 10 版左右开始支持过渡，但在 11.62 中似乎也`transition`没有做任何事情。`-o-transition`还是 Opera 使用不同的语法？

无论如何，我可以通过编写在大多数其他浏览器上悬停时使背景颜色淡入淡出

```
div {transition:background 2s;}
div:hover {background:lime} 
```

到目前为止还可以，我也可以通过编写使背景淡入但不淡出

```
div:hover {transition:background 2s; background:lime} 
```

并且背景会淡出，但不会像这样：

```
div {transition:background 2s;}
div:hover {transition:background 0s; background:lime} 
```

但我不明白为什么会这样。根据文档，具有`0s`持续时间的过渡不应该有任何影响，那么为什么最后一个有不同的结果呢？

[jsFiddle](http://jsfiddle.net/WZTuM/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:08:55.177

我假设您正在寻找的是[`ease`](https://developer.mozilla.org/en/CSS/timing-function#ease)计时功能。

所以你的 CSS 规则应该看起来像这样。

```
.class {
    transition: property(ies) duration timing-function;
}

.class:hover {
    property(ies): new value;
} 
```

对于 Opera，您必须定义确切的属性。在您的情况下，它不是*背景*属性，而是*背景颜色*属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:17:10.027

从您的示例看来，它的行为与我预期的一样。转换从一种状态运行到另一种状态。

我会尽力解释这一点。

在最后一个上，在其正常状态下的转换为 2s，在悬停状态下的`<div>`转换为 0s 。`<div>`

# 那么发生了什么？

1.  当您将鼠标悬停在 上时`<div>`，状态将变为`:hover`，因此运行过渡`div:hover`。你有一个 0 的过渡，所以没有动画运行。
2.  当您从状态中移除鼠标时，`<div>`状态会从`:hover`恢复到正常状态，因此`div`在其正常状态下运行转换。你有这个在2s。

这是否解释了正在发生的事情以及转换如何工作？

# c# - 为什么使用 OleDb 导入 Excel 时忽略第一个空行

> ID：10010634
> 
> 赞同：4
> 
> 时间：2012-04-04T11:59:31.963
> 
> 标签：c#, .net, excel, oledb

使用 .Net 的 OleDb，我尝试导入一个 Excel 表，其中第一行可以为空。我想保留 DataTable 中的空行，以便以后能够将单元格映射到 Excel 样式的单元格名称“A1，A2，...”。但是无论我做什么，第一行都被删除了。

Excel 文件如下所示：

```
 -   -   -
 ABC XY  ZZ
 1   2   3
 4   4   5 
```

其中“-”是一个空单元格。（我对导入格式没有影响。）

简化代码：

```
 string cnnStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\"file.xls\";Extended Properties=\"Excel 8.0;HDR=No;IMEX=1\"";
        string mySheet = "Sheet1$";

        OleDbConnection connection = new OleDbConnection(cnnStr);
        DataSet Contents = new DataSet();
        using (OleDbDataAdapter adapter = new OleDbDataAdapter("select * from [" + mySheet + "]", connection))
        {
            adapter.Fill(Contents);
        }

        Console.WriteLine(Contents.Tables[0].Rows.Count); // prints: 3
        Console.WriteLine(Contents.Tables[0].Rows[0].ItemArray[0]); // prints: ABC 
```

知道如何保留该空行吗？

ps：我找到[了如何在从 Excel 读取时计算空行](https://stackoverflow.com/questions/7317665/how-to-count-empty-rows-when-reading-from-excel)但无法重现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:44:27.547

该问题似乎与 OLEDB 提供程序的 TypeGuessRows 功能有关。简而言之，Excel 列中的数据可以是任何类型。OLEDB 提供程序通过扫描工作表的前 8 行来猜测数据类型以确定多数类型 - 样本中值最多的数据类型。不属于多数类型的任何内容都将被丢弃。

[有关更详细的说明，请参阅此博客文章。](http://www.processinginfinity.com/mystery-of-the-missing-cell-value)

以及讨论该行为的这篇[MS 知识库文章。](http://support.microsoft.com/kb/281517)

（跳到 TypeGuessRows 行为的解决方法部分）

作为测试，我创建了一个类似于您发布的示例的文件，但将**所有列格式化为文本**并保存了文件。运行您发布的代码，我可以看到返回了 4 行，第一行是空字符串。

您可能还想尝试修改注册表以查看将 TypeGuessRows 设置更改为 0（扫描文件中的所有数据以确定每列的数据类型）是否有助于返回第一个空白行。我的预感是这无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:28:56.757

OleDbDataAdapter 将第一行视为标题。为了获得第一行，从数据表的标题创建一个数据行。并在第一个位置插入。

```
 DataTable dt = Contents.Tables[0];

  DataRow dr = new DataRow();
  int i = 0;
  foreach (DataColumn column in dt.Columns)
  {
    dr[i] = column.ColumnName.ToString();
    i++;
  }
  dt.Rows.InsertAt(dr, 0); 
```

# iphone - JSONKit 实现上的错误

> ID：10010641
> 
> 赞同：7
> 
> 时间：2012-04-04T12:00:02.623
> 
> 标签：iphone, ios, xcode, jsonkit

![错误](../Images/300db9004511510d86563fd981aa4242.png)

将**JSONKit.h**和 **JSONKit.m**文件导入我的项目后，我收到以下错误。我浏览了又浏览了，但似乎没有人遇到过这些问题？

我所做的只是导入文件并构建，然后我得到了这个

是我忘记导入还是...??????

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T12:07:45.750

您可以在 JSONKit 文件中禁用 ARC（自动引用计数）。

一般步骤是：

1.  转到您的项目设置，在 Build Phases > Compile Sources 下
2.  选择要禁用 ARC 的文件并添加 -fno-objc-arc 编译器标志。您可以通过选择文件然后按“Enter”键一次为多个文件设置标志。

请参阅这篇文章：[iOS 5 Best Practice (Release/retain?)](https://stackoverflow.com/questions/6308425/ios-5-best-practice-release-retain)了解更多详情。

希望能帮助到你。

**编辑**

经过讨论，我们还有一些其他的选择来解决这个问题。例如，您可以将 JSONKit 转换为 ARC 兼容的。但是按照's 的说法，由于 JSONKit是用来管理内存`Mike Weller`的，所以转换起来会很困难。`malloc`

我认为使用`-fno-objc-arc`编译器标志是一种低风险且方便的解决问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:17:45.437

tangqiaoboy 的回答将解决这些错误，但您也可以考虑使用 NSJSONSerialization 类。它使将 NSDictionarys 和 NSArrays 转换为 JSON 变得非常容易，反之亦然。

祝你好运！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-04T12:18:02.667

您可以`ARC`通过以下步骤将您的项目转换为兼容的

去`Edit menu -> Refactor -> Convert to Objective-C ARC...`

或者，如果您`do not`想`ARC`在当前项目中使用，请按照以下`tangqiaoboy`步骤操作。

# android - 如何搜索文件的内容并只读取文件的一部分

> ID：10010650
> 
> 赞同：0
> 
> 时间：2012-04-04T12:00:36.003
> 
> 标签：android

我正在使用 JSON-RPC。当我向服务器发送请求时，我从服务器收到了将近 2MB 长的响应。数据中没有换行符。众所周知，不可能将所有 2MB 数据存储在字符串中，我必须将数据写入文件。

这是我的文件的样子：

> [{"data1":"data1",....},{...},...]

我想逐部分读取数据，例如获取“{”和“}”之间的字符串，以便获得 1 个 JSON 对象的确切内容，之后我可以解析数据。

我已经参考了这个[链接](https://stackoverflow.com/a/3635147/928861)，但是我不会得到“{”和“}”的位置来复制我的 JSON 数据。

有没有办法实现这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:12:34.090

你也可以使用

> [com.google.gson.stream.JsonReader.JsonReader](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonReader.html)

并在您从服务器获取数据时编译您的对象。无需存储到字符串或从文件中写入和读取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:09:42.413

您应该使用[正则表达式模式](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)

或多或少是这样的：

```
Pattern pattern = Pattern.compile( "{(.*?)}" );
Matcher matcher = pattern.matcher( response );
while( matcher.find() ) {
  String jsonString = "{" + matcher.group( 0 ) +"}" ;
  //parse the json
} 
```

# c# - 使用 LINQ 分组

> ID：10010651
> 
> 赞同：3
> 
> 时间：2012-04-04T12:00:43.973
> 
> 标签：c#, .net, linq, grouping

我该如何使用`LINQ`来实现以下目标？

我有一些 c# 对象（我写它们只是`JSON`为了简化）

```
{ Name: A, Domain: a, SubDomain: 1}
{ Name: B, Domain: a, SubDomain: 2}
{ Name: C, Domain: b, SubDomain: 1}
{ Name: D, Domain: b, SubDomain: 2}
{ Name: E, Domain: c, SubDomain: 1} 
```

我想将它们收集为：

```
{ Domain: a ,{{Name: A, SubDomain: 1}, {Name: B, SubDomain: 2}}
  Domain: b ,{{Name: C, SubDomain: 1}, {Name: D, SubDomain: 2}}
  Domain: c ,{{Name: E, SubDomain: 1}} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T12:04:36.480

你只是想分组`Domain`？

```
var list = GetListFromFoo();
var groupedList = list.GroupBy(x => x.Domain); 
```

这是用这种`LINQ`方法完成的：

```
public static IEnumerable<IGrouping<TKey, TSource>> GroupBy<TSource, TKey>(
    this IEnumerable<TSource> source, Func<TSource, TKey> keySelector) 
```

[MSDN](http://msdn.microsoft.com/en-us/library/bb534501.aspx)

* * *

如果我理解你的评论是正确的，这就是你要找的：

```
var groupedList = list.GroupBy(x => x.Domain, x => new
                                        {
                                            x.Name,
                                            x.SubDomain
                                        }); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/bb534304.aspx)

# php - 查找图像，但仅 jpeg

> ID：10010655
> 
> 赞同：0
> 
> 时间：2012-04-04T12:00:56.267
> 
> 标签：php

我正在使用以下内容来解析 html 页面并返回图像：

```
$html = file_get_html($url);

foreach($html->find('img') as $e){ 

    $image = $e->src;

            } 
```

理想情况下，虽然我只想显示带有 .jpg 扩展名的文件 - 我知道我可能可以使用 preg_match 但有更有效的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:04:30.723

### 注意：仅仅因为文件具有类似 JPEG 的扩展名并不*意味着*引用文件的内容实际上是 JPEG 数据！

* * *

[`pathinfo()`](http://php.net/manual/en/function.pathinfo.php)是您正在寻找的原生 PHP 函数。是的，您可以随心所欲地操纵字符串，但如果您正在寻找“正确”的方式来做到这一点，那么这里是：

```
$html = file_get_html($url);

// file extensions we are looking for
$allowedExtensions = ['jpg', 'jpeg', 'jpe'];

foreach($html->find('img') as $el){ 
    // file extensions are usually treated as case insensitive, but the
    // implied comparison operator used with in_array() is case sensitive
    // so normalise the data to lower-case.
    $extension = strtolower(pathinfo($el->src, PATHINFO_EXTENSION));

    if (in_array($extension, $allowedExtensions)) {
        // File has a JPEG-like file extension
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T12:11:28.163

你的代码很好。这将适用于您的情况

```
// Create DOM from URL or file
$html = file_get_html('http://www.yahoo.com/');
// Find all images
foreach($html->find('img') as $element)
{
    $img = strtolower($element->src);
    if(pathinfo($img,PATHINFO_EXTENSION) == "jpg")
        echo $element->src . '<br>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:03:49.080

```
$split = explode(".", $image);
$extention = $split[count($split)-1]; 
```

# ruby - 如何在 ruby 中使用 File.Open 打开存储在变量中的文件？

> ID：10010659
> 
> 赞同：2
> 
> 时间：2012-04-04T12:01:20.000
> 
> 标签：ruby, file, console

我想打开文件并阅读我从控制台传递的文件。像

```
filename = gets()
File.open(filename,'r') do |file| 
```

但在控制台上出现如下错误：

```
test.rb:7:in `initialize': Invalid argument - myfile (Errno::EINVAL)
        from test.rb:7:in `open'
        from test.rb:7 
```

是否可以读取具有从控制台获取的文件名并`do |file| ..end`在 ruby​​ 中执行的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:08:23.070

您从 STDIN 读取的字符串有一个尾随`\n`. 摆脱它。

```
filename = gets().chomp 
```

# c# - 无法访问已处置的对象 - wcf 客户端

> ID：10010662
> 
> 赞同：5
> 
> 时间：2012-04-04T12:01:29.377
> 
> 标签：c#, wcf-client, objectdisposedexception

我有一个遇到问题的 WCF 客户端。
我不时收到此异常：`Cannot access a disposed object`. 这就是我打开连接的方式：

```
private static LeverateCrmServiceClient crm = null;

public static CrmServiceClient Get(string crmCertificateName)
        {

            if (crm != null)
            {
                crm.Close();
            }
            try 
            {
                crm = new LeverateCrmServiceClient("CrmServiceEndpoint");
                crm.ClientCredentials.ClientCertificate.SetCertificate(
                               StoreLocation.LocalMachine,
                               StoreName.My,
                               X509FindType.FindBySubjectName,
                               crmCertificateName);
            }
            catch (Exception e) 
            {
                log.Error("Cannot access CRM ", e);
                throw;
            }
            return crm;
        } 
```

如您所见，我每次都在关闭并重新打开连接。你认为可能是什么问题？

堆：

```
System.ServiceModel.Security.MessageSecurityException: Message security verification failed. ---> System.ObjectDisposedException: Cannot access a disposed object.
Object name: 'System.ServiceModel.Security.SymmetricSecurityProtocol'.
  at System.ServiceModel.Channels.CommunicationObject.ThrowIfClosedOrNotOpen()
  at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message& message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
  --- End of inner exception stack trace ---

Server stack trace:
  at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message& message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
  at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.ProcessReply(Message reply, SecurityProtocolCorrelationState correlationState, TimeSpan timeout)
  at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.Request(Message message, TimeSpan timeout)
  at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
  at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
  at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:
  at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
  at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
  at Externals.CrmService.ICrmService.GetTradingPlatformAccountDetails(Guid ownerUserId, String organizationName, String businessUnitName, Guid tradingPlatformAccountId)
  at MyAppName.Models.ActionsMetadata.Trader.BuildTrader(Guid tradingPlatformAccountId) in C:\Users\X\Documents\Visual Studio 2010\Projects\MyAppName\MyAppName\Models\ActionsMetadata\Trader.cs:line 120
  at MyAppName.Models.ActionsMetadata.Trader.Login(String accountNumber, String password) in C:\Users\X\Documents\Visual Studio 2010\Projects\MyAppName\MyAppName\Models\ActionsMetadata\Trader.cs:line 48
  at MyAppName.Models.ActionsMetadata.Handlers.LoginHandler.Handle(StepHandlerWrapper wrapper) in C:\Users\X\Documents\Visual Studio 2010\Projects\MyAppName\MyAppName\Models\ActionsMetadata\Handlers\LoginHandler.cs:line 23
  at MyAppName.Models.ActionsMetadata.Handlers.HandlerInvoker.Invoke(IAction brokerAction, ActionStep actionStep, Dictionary`2 stepValues, HttpContext httpContext, BaseStepDataModel model) in C:\Users\X\Documents\Visual Studio 2010\Projects\MyAppName\MyAppName\Models\ActionsMetadata\Handlers\StepServerInoker.cs:line 42
  at MyAppName.Controllers.LoginController.Login(String step) in C:\Users\X\Documents\Visual Studio 2010\Projects\MyAppName\MyAppName\Controllers\LoginController.cs:line 35
  at lambda_method(Closure , ControllerBase , Object[] )
  at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
  at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
  at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
  at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
  at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
  at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T13:29:01.520

根据该堆栈跟踪，我假设您有一个 ASP.NET MVC 应用程序，其中包含一些调用该`Get`方法以获取`CrmServiceClient`对象的代码，然后继续调用该`CrmServiceClient`对象上的各种方法。例如，登录过程的一部分就是这样做的。

您的`Get`方法的工作方式是，每次调用它时，它都会首先关闭`CrmServiceClient`它之前返回的对象（无论它是否仍在使用）然后创建并返回一个新对象。

想象一下，两个用户几乎在同一时间尝试登录到您的应用程序——彼此相差几毫秒。处理第一个用户登录的线程调用`Get`并获取它的`CrmServiceClient`对象，然后一毫秒后处理第二个用户的登录调用`Get`的线程，这导致第一个线程的`CrmServiceClient`对象被关闭。但是，第一个线程仍在运行，现在当它尝试调用它的`CrmServiceClient`对象上的方法时，它会得到一个`System.ObjectDisposedException: Cannot access a disposed object`.

> “如你所见，我每次都在关闭和重新打开连接。”

当前`Get`方法中的代码不是实现此目标的好方法。相反，您应该让调用者负责关闭（或处置）`CrmServiceClient`对象，并且您可能应该将您的`Get`方法重命名为`Open`或`Create`建议这样做。无论发生任何异常，调用者都应使用`using`语句确保对象已关闭/处置：

```
using (CrmServiceClient client = CrmServiceFactory.Get("my-crm-certificate"))
{
    client.Something();
    client.GetTradingPlatformAccountDetails();
    client.SomethingElse();
} // client is automatically closed at the end of the 'using' block 
```

# regex - Perl - 将变量名与类型分开

> ID：10010666
> 
> 赞同：1
> 
> 时间：2012-04-04T12:01:44.290
> 
> 标签：regex, perl

我有这些字符串：

```
int name
const int level
const char          *  const                    format
(float) int promenna
(char *) int jina 
```

如何在 perl 中将变量的名称（名称、级别、格式……）与 rest 分开？我尝试了一些常规的表达方式，`/((\.*\s*\w+)+)(\s+)(\w+)$/`但我不是很擅长，我的有问题。那么有人有简单的解决方案吗？在第三个例子中，有很多空格，你必须计算在内，可能有 \s*。谢谢

编辑：我不好解释我想要什么。我说我想要单独的名称，我的意思是我需要从字符串中删除最后一个单词（变量名）。我很抱歉造成误解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:37:23.430

只需将最后一个“单词”替换为任何内容，使用

```
s/\w+$// 
```

例如：

```
#!perl

my @strings = (
    'int name',
    'const int level',
    'const char          *  const                    format',
    '(float) int promenna',
    '(char *) int jina',
    'char *a'
);

for my $string (@strings) {
    $string =~ s/\w+$//;
    $string =~ s/\s*$//;
    $string =~ s/\s+/ /g;
    print "$string\n";
} 
```

结果是

```
int
const int
const char * const
(float) int
(char *) int
char * 
```

# encryption - 解压缩/反序列化未知二进制数据

> ID：10010674
> 
> 赞同：1
> 
> 时间：2012-04-04T12:01:59.797
> 
> 标签：encryption, compression, binary-data

我有一些“未知”的二进制数据，这些数据已被旧的内部应用程序以不可读的方式压缩、打包或格式化。旧的内部应用程序仍然可以使用这些数据。

如果无法访问内部应用程序源代码，我们是否可以确定此文件的格式，以便我们可以将其解压缩以用于其他用途？

在 linux 机器上以“less”查看这个文件时，它看起来像这样：

```
0>^V<FF><D4>^@<BE>C`^B^Oc^_c^N`^B^Oc^O`^A^O`^B^]c^]c+`^A*`^B+c+`^A;c<c;c9p^C^C<F6>p^A^D<F6>cIcJ`^A;cK`^BIs^D<F7>p^B^C<F7>c9`^A:c<`^A<c=`^B=`^A=c^^c/`^B^^c^^c^\`^B<c+`^B<c^]`^A^_c^OS<80>^X<FE><E1>^@;Cc^P`^C^O`^A^A`^A^P`^A0c1`^BAcR`^Ars    ^Cp^B^K^Cs^K^Cp^A^M^Cp^A^L
^Cs^M^Cs^L^Bp^B^M^Ap^A^L^Bs
^As     ^Bp^B   ^Bs     ^B`^Asp^B^H^Bcr`^Accrcb`^BQcR`^BAcR`^AAcB`^BAcB`^A1c2c!`^A!c^R`^B^QS<80>^R<FF>T<FF><92>C`^B<FE>c^Oc<FE>`^B<F0>c^O`
^A^A`^Cbcb`^Brs       ^Bp^B   ^Bs
^Cs
^Bp^B 
```

是否有任何工具可以通过一组通用的基本解压缩算法运行这些数据并输出每个算法的结果，以便我们可以筛选结果以查看是否有任何有用的东西？

* * *

更新：

```
:~$ file /tmp/data
/tmp/data: data

:~$ od -x /tmp/test
0000000 01b3 0113 01e0 23f3 0000 0004 2033 03e4
0000020 6970 6e63 6369 d300 8001 003e 0144 2361
0000040 0000 0004 b833 43e5 0260 63f0 60f0 f001
0000060 0260 60f0 0f02 0260 630f 601f 0f02 1f63
0000100 0260 631f 631f 601e 2f01 0160 633d 602e
0000120 4d02 3d63 0160 635b 604c 4b01 0260 634d
0000140 635c 604c 5d02 6d63 0160 635c 606d 5c02
0000160 6d63 0160 635b 605c 5c02 5b63 5d63 0160
0000200 605c 5d02 5d63 6d63 0160 606d 6e01 0160
0000220 635c 636d 605c 5d02 5c63 0160 634c 603d
0000240 3e02 3e63 0160 601f 1f01 0460 6010 f003
0000260 0360 6001 1001 0260 63f0 6310 60f0 1004
0000300 0160 6040 4001 5063 0260 6350 6041 4001
0000320 5163 0160 6340 6040 5102 0160 6340 6351
0000340 6361 6051 5103 6263 6163 0260 6351 6062
0000360 5102 5163 4163 5163 0360 6341 6031 4101
0000400 3163 3163 0160 6341 6041 4102 5163 0160
0000420 6040 4102 4163 3063 0160 6341 6031 3102
0000440 2063 3163 0260 6320 6021 3002 2163 2063
0000460 0260 6311 6010 1001 0160 6001 0105 0160
0000500 6310 6011 1004 1163 1163 1063 0260 6301
0000520 6010 1102 0160 6311 6011 1102 1063 0163
0000540 0260 6011 1101 1163 0260 6311 6010 0101
0000560 1063 0360 60f0 0105 0360 60f0 0102 0163
0000600 f363 0260 6304 60f5 e402 f563 e363 e463
0000620 0260 63e4 60e4 e601 e763 0270 08fd d663
0000640 e663 0360 63d5 60d4 e401 f563 0160 63e5
0000660 70f7 fe02 6308 63e6 60f6 e401 0260 63f4
0000700 60f3 f201 f363 f363 0260 63f4 60f5 f502
0000720 0463 0160 63e5 6004 f301 0160 63f3 6002
0000740 f202 0263 0160 6301 6301 60f0 0102 0160
0000760 6001 f001 0460 60f0 e002 e063 0260 63ef
0001000 60d0 e001 cf63 0160 63c0 60cf c002 bf63
0001020 c063 af63 0360 60b0 cf01 af63 0160 63af
0001040 60af af02 bf63 0160 60af 9f01 9e63 0260
0001060 639f 609e 9e01 9d63 0170 fef8 9e63 0270
0001100 fef8 9e63 0160 639d 709e f802 63fe etc.. 
```

# ruby - 将 gem 上传到 Geminabox 的问题

> ID：10010678
> 
> 赞同：4
> 
> 时间：2012-04-04T12:02:15.913
> 
> 标签：ruby, gem, rack

我用 Geminabox 搭建了一个 Rack 服务器，在我的机器上运行在[http://localhost:9292](http://localhost:9292)。现在我试图将 gem 上传到服务器（从终端上的不同选项卡充当客户端），但是当我输入时：

```
gem sources -a http://localhost:9292 
```

我收到以下错误：

```
Error fetching http://localhost:9292:
bad response Not Found 404 (http://localhost:9292/specs.4.8.gz) 
```

有一个尾随冒号，我有点迷茫，有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:25:00.990

在 Geminabox 开始提供必要的文件之前，您需要至少上传一个 gem。

（我知道这是一个老问题，但我是从谷歌来到这里的，所以其他人也可以）

# mysql - 为什么这个字符串比较mysql查询什么都不返回？

> ID：10010682
> 
> 赞同：0
> 
> 时间：2012-04-04T12:02:28.967
> 
> 标签：mysql, string, sql-like

我执行以下操作：

```
SELECT url FROM mytable WHERE 1 
```

结果：网址：'http://www.ciao.es/Epson_Stylus_S22__2007613'

现在一切都很好......但是当我这样做时：

```
SELECT * FROM mytable WHERE url = 'http://www.ciao.es/Epson_Stylus_S22__2007613' 
```

我什么都得不到！！！

我尝试使用 LIKE，更改引号等...我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:10:05.147

您的表字段 url 中有“”。因此，如果您正在查询，您将得到如下输出：“http://www.ciao.es/Epson_Stylus_S22__2007613”（单引号）所以这样写：

```
SELECT * FROM mytable WHERE url = "'http://www.ciao.es/Epson_Stylus_S22__2007613'" 
```

或从表中删除单引号。

# android - 安卓倒计时

> ID：10010684
> 
> 赞同：10
> 
> 时间：2012-04-04T12:02:32.587
> 
> 标签：android, countdown

我想在android中写一个倒计时，从3开始计数到0。就像起初3出现然后消失，2出现等等。我搜索了很多，但我找不到任何好的样本。你能帮我看看我该怎么办吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-04T12:13:43.967

使用倒计时

例如：

```
import android.os.CountDownTimer;   

MyCount timerCount;
public class TestCountdown extends Activity {

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    timerCount = new MyCount(3 * 1000, 1000);
    timerCount.start();
  }

  public class MyCount extends CountDownTimer {
      public MyCount(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
      }

      @Override
      public void onFinish() {
        //some script here
      }

      @Override
      public void onTick(long millisUntilFinished) {
        //some script here 
      }   
    } 
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T12:05:49.397

Android 中的好人想到了你。

你有一个课程 - [`CountDownTimer`](http://developer.android.com/reference/android/os/CountDownTimer.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:07:52.500

我不会为此编写代码，但这应该不难。只需先使用线程显示值 3（使用 TextView）然后再休眠（假设您希望它在 1 秒后更改，则为 100 毫秒）然后减少它并重复。

一个例子是

```
for i=0 to 3
print the number 
thread.sleep(100) 
```

# mysql - 如何创建一个查询来满足两组不同的数据并产生依赖于 MySQL 中第一组的结果？

> ID：10010688
> 
> 赞同：0
> 
> 时间：2012-04-04T12:02:53.527
> 
> 标签：mysql, count, group-by, union

我正在尝试计算一组数据有一个或多个失败的所有实例。

我也发现很难建立这个问题，所以我希望展示一个例子可以解释我想要实现的目标。

样本数据：

```
INSERT INTO test.answers (id, result_id, fail_all, fail_group) VALUES
    (1,1,0,1),  (2,1,0,1),  (3,1,0,1),  (4,1,0,0),
    (5,2,1,0),  (6,2,0,0),  (7,2,1,0),  (8,2,1,0),  (9,2,1,0),
    (10,3,0,1), (11,3,1,1), (12,3,0,1), (13,3,0,1), (14,3,0,1),
    (15,4,0,0), (16,4,0,0), (17,4,0,1), (18,4,0,1), (19,4,0,0), (20,4,0,1),
    (21,5,1,0), (22,5,0,1), (23,5,1,1), (24,5,0,1), (25,5,1,0), (26,5,0,1);

INSERT INTO test.results (id,team_id) VALUES
    (1,1), (2,1), (3,1), (4,2), (5,2); 
```

然后我运行以下查询：

```
SELECT
    COUNT(IF(a.fail_all = 1,1,NULL)) AS count_fail_all,
    COUNT(IF(a.fail_group = 1,1,NULL)) AS count_fail_group,
    a.result_id
FROM test.answers AS a
GROUP BY a.result_id 
```

结果：

```
count_fail_all, count_fail_group, result_id
0, 3, 1
4, 0, 2
1, 5, 3
0, 3, 4
3, 4, 5 
```

我需要创建一个按 team_id 分组的查询，并计算每个结果有多少失败。如果一个结果有多个失败，那么这个整体结果就是失败。因此，如果上述查询中的结果计数为 3（例如：第一个结果），那么它应该只计为一个。fail_group 现在可以忽略，因为我相信 fail_all 的相同解决方案适用于 fail_group。

我希望的结果是：

```
team_id, amount_of_fails, amount_of_fails_per_group
1, 2, 2
2, 1, 2 
```

我希望有人可以帮助我创建我需要的查询？我什至不知道如何开始。让我知道我是否可以做些什么来调整查询，因为我知道它不是很好问？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:07:36.177

If you want that output. Maybe something like this:

```
SELECT
  r.team_id,
  SUM(IF(a.fail_all = 1,1,0)) AS amount_fail_all,
  SUM(IF(a.fail_group = 1,1,0)) AS amount_fail_group
 FROM answers AS a
 JOIN results AS r on r.id=a.result_id
 GROUP BY r.team_id 
```

This will get you this output:

```
team_id  amount_fail_all  amount_fail_group
1        2                2
2        1                2 
```

# java - 在 Java 中创建具有偏移量的 Date 对象

> ID：10010689
> 
> 赞同：2
> 
> 时间：2012-04-04T12:02:54.697
> 
> 标签：java, datetime, date, object, offset

我目前正在学习如何为 Android 创建应用程序，但我的 Java 相当生疏，因为我更像是一个 .NET 人。

如果在 C# 中，我想创建一个 DateTime 对象，其值设置为今天的日期加上 5 年，我可以使用

```
DateTime dt = DateTime.Now.AddYears(5); 
```

Java语言中有类似的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T12:06:13.053

您可以使用 a`Calendar`进行计算：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.YEAR, 5);
Date date = cal.getTime(); // getTime() returns a Date object 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:11:30.547

您可以使用 JODA 时间 --- [http://joda-time.sourceforge.net](http://joda-time.sourceforge.net)创建 DateTime 对象。

使用 plusYears 方法添加 5​​ 年 -- [http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html)

```
 DateTime.now().plusYears(5); 
```

# core-data - 如何在目标c中恢复数据下载？

> ID：10010696
> 
> 赞同：-2
> 
> 时间：2012-04-04T12:03:38.797
> 
> 标签：core-data

我正在下载一些数据并且互联网连接中断，如何在核心数据模型中从当前状态恢复下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:59:13.613

核心数据模型与下载无关。您必须区分以下步骤：

1.  提出下载请求。
2.  下载以成功或错误结束。
3.  处理数据 - 例如将其存储在核心数据中。
    *   如果成功完成，你就完成了
    *   如果不继续
4.  请注意，您可以再次下载。
5.  形成一个新的下载请求，只向服务器请求丢失的数据
6.  转到第 2 步。

步骤 1 将使用`NSURLRequest`.
可以在`NSURLConnection`委托方法中捕获第 2 步。
如果你成功了，第 3 步应该是常规的。如果没有，您将不得不分析您的数据对象以查看可以挽救和保存的内容。
第 4 步可以在`Reachability`课堂上完成。检查 Apple 的示例代码。
第 5 步要求您的服务器可以处理选择性数据请求。

单个步骤有很多细节。最好在 stackoverflow 上搜索并查阅文档以对各个步骤进行编码。我希望这个方案能帮助你解决问题。

# .htaccess - .htaccess mod-rewrite -- 不重定向

> ID：10010701
> 
> 赞同：0
> 
> 时间：2012-04-04T12:03:55.427
> 
> 标签：.htaccess, mod-rewrite, redirect

好的，所以我有一个像 adf.ly 一样工作的脚本；您提交一个 URL，该 URL 被缩短，然后在您被带到您的 URL 之前显示一个插页式广告。我在根目录中有以下 .htaccess：

```
DirectoryIndex index.php

FileETag none
ServerSignature Off

Options All -Indexes

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^([0-9a-zA-Z]{1,6})$ fly/?to=$1 [L]
RewriteRule ^([0-9]{1,9})/banner/(.*)$ fly/?uid=$1&adt=2&url=$2 [L]
RewriteRule ^([0-9]{1,9})/(.*)$ fly/?uid=$1&adt=1&url=$2 [L]
</IfModule> 
```

该脚本正在生成shortURL（您可以在这里尝试：http: [//www.twitsym.com/short/](http://www.twitsym.com/short/)）但是它不会重定向到fly.php，然后是最终URL。我对 .htaccess 很糟糕，几乎没有知识。任何人都可以进一步了解可能导致问题的原因吗？

目录结构为：

```
.../
.../fly/index.php 
```

再次感谢您，StackOverflow！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:33:10.183

如果这是虚拟服务器，您似乎需要在 httpd.conf 或 vhost.conf 中的某处使用[LogLevel指令。](http://httpd.apache.org/docs/2.0/en/mod/core.html#loglevel)有关类似问题，请参阅[此帖子。](https://stackoverflow.com/questions/5641618/how-to-enable-loglevel-debug-on-apache2-server)代码将是：

```
RewriteLogLevel 3
RewriteLog "/usr/local/var/apache/logs/rewrite.log" 
```

htaccess 应该重定向到哪里（即哪个 URL 应该引导到哪里？）此外，您要求重定向到 fly.php，但它不会出现在您的 .htaccess 中。这是你的意图吗？

# jquery - 可以将 URL 添加到 jQuery 数组并对其进行一些检查

> ID：10010704
> 
> 赞同：3
> 
> 时间：2012-04-04T12:04:01.380
> 
> 标签：jquery, arrays, json, loops, each

我对 jQuery/JS 很陌生。但是我在 jQuery 中有循环，我想做一些检查。我想检查 URL 是否已经打印。如果重要的话，循环的数据来自 JSON。

基本上我会有一个数组 var = myArray ，我会在其中放置循环中的所有 URL。我每个人都会经历那个循环。然后每次我都会检查 URL 是否已经在数组中。作为伪：

```
var myArray = [];
each data {
    myArray.push({'url':data.url});

    if data.url is already in myArray {
        do stuff
    }

    if data.url is not already in myArray {
        do other stuff
    }
} 
```

我在用 jQuery.inArray() 玩 aounrd 但我总是得到 -1

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:07:04.253

只需直接推送 url 而不是创建对象：

```
myArray.push(data.url); 
```

然后`jquery.inarray()`应该可以正常工作

```
if (jquery.inArray(data.url, myArray)) 
```

但是，您需要在循环的末尾而不是开头添加新的 url，否则当您检查时它们将始终位于数组中。

演示：http: [//jsfiddle.net/c2934/](http://jsfiddle.net/c2934/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:11:23.437

试试这个：

```
var myArray = [];
$.each(data, function(i,u) {
   if($.inArray(u, myArray)){
        //DO STUFF IF URL IN ARRAY
   }else{
       myArray.push(u);
       //DO SUTFF IF URL NOT IN ARRAY
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:18:05.147

在您的伪代码中，您在检查它是否存在之前推送到数组，以便它始终存在。那你需要推动`data.url`而不是`{'url':data.url}`

您正在寻找的工作示例：

```
var testData = [ 1, 2, 2, 3, 4]
var myArray = []    
jQuery.each( testData, function( pos, val ) {
    // not in array
    if ( jQuery.inArray( val, myArray ) == -1 ) {
        myArray.push( val );

    // in array  
    } else {
        alert( "Already in [" + myArray + "] : " + val );        
    }    
})​;​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:43:59.737

您也可以使用 $.grep()

```
var myArray = [];
var ar = [{'url':'test1'},{'url':'test1'},{'url':'test3'}];
$.each(ar,function(ii,data) {
  if ($.grep(myArray,function(e,i){ return e.url == data.url;   }).length > 0) {
    console.log('in array: ' + data.url);
  } else {
    console.log('not in array: ' + data.url);
  }
  myArray.push({'url': data.url });
}); 
```

# php - 在php中初始化一个实例

> ID：10010708
> 
> 赞同：1
> 
> 时间：2012-04-04T12:04:18.017
> 
> 标签：php, initialization, instance

*我看到有时用new calssname()*初始化一个对象 ； 其他时候只是 *新的类名；* // 没有 （）

顺便说一句，有什么区别吗？两个都？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:05:35.667

两者都是可以接受的（只要没有强制参数传递）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:12:37.680

尽管两者在 PHP 中都是可以接受的，但为了保持一致性，我倾向于使用前者，因为没有括号的初始化在 Java 和 C++ 中不起作用。

# api - Disqus API，尝试从本地主机进行一些调用

> ID：10010721
> 
> 赞同：2
> 
> 时间：2012-04-04T12:05:10.277
> 
> 标签：api, localhost, disqus

并在 API 配置的允许域中添加了 localhost，但是当我进行调用时，我得到：

```
XMLHttpRequest cannot load https://disqus.com/api/3.0/forums/listPosts.json?forum=my_forum&api_key=my_public_key. Origin http://localhost:4567 is not allowed by Access-Control-Allow-Origin. 
```

我怎样才能解决这个问题？

# session - 为什么我无法从 AutoLogin 类中设置的 portlet 中读取会话属性

> ID：10010722
> 
> 赞同：0
> 
> 时间：2012-04-04T12:05:30.450
> 
> 标签：session, liferay

我尝试从我的 portlet 访问我在 AutoLogin 阶段设置的会话属性失败。

在 AutoLogin 类中设置属性：

```
@Override
public String[] login(HttpServletRequest request, HttpServletResponse response) throws AutoLoginException {
      request.getSession().setAttribute("My-Attribute-Key", "Hello World");
 ...
} 
```

来自 Portlet 的访问属性：

```
@Override
public void doView(RenderRequest renderRequest, RenderResponse renderResponse) throws IOException, PortletException {
        Object attribute = PortalUtil.getHttpServletRequest(renderRequest).getSession().getAttribute("My-Attribute-Key");
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:19:02.323

查看 Liferay Wiki 上的[会话共享](http://www.liferay.com/community/wiki/-/wiki/Main/Session+Sharing)。

# jquery - Jquery多个选择器？

> ID：10010728
> 
> 赞同：0
> 
> 时间：2012-04-04T12:05:42.677
> 
> 标签：jquery, html

我有以下 HTML 标记：

```
<select name="Fault" class="textbox" id="fault">
<option>Single Light Out</option>
<option>Light Dim</option>
<option>Light On In Daytime</option>
<option>Erratic Operating Times</option>
<option>Flashing/Flickering</option>
<option>Causing Tv/Radio Interference</option>
<option>Obscured By Hedge/Tree Branches</option>
<option>Bracket Arm Needs Realigning</option>
<option>Shade/Cover Missing</option>
<option>Column In Poor Condition</option>
<option>Several Lights Out (please state how many)</option>
<option>Column Leaning</option>
<option>Door Missing/Wires Exposed</option>
<option>Column Knocked Down/Traffic Accident</option>
<option>Lantern Or Bracket Broken Off/Hanging On Wires</option>
<option>Shade/Cover Hanging Open</option>
</select>

<span id="faulttext" style="color:Red; display:none">Text in the span</span>

<select name="Fault" class="textbox" id="faultw">
<option>Single Light Out</option>
<option>Light Dim</option>
<option>Light On In Daytime</option>
<option>Erratic Operating Times</option>
<option>Flashing/Flickering</option>
<option>Causing Tv/Radio Interference</option>
<option>Obscured By Hedge/Tree Branches</option>
<option>Bracket Arm Needs Realigning</option>
<option>Shade/Cover Missing</option>
<option>Column In Poor Condition</option>
<option>Several Lights Out (please state how many)</option>
<option>Column Leaning</option>
<option>Door Missing/Wires Exposed</option>
<option>Column Knocked Down/Traffic Accident</option>
<option>Lantern Or Bracket Broken Off/Hanging On Wires</option>
<option>Shade/Cover Hanging Open</option>
</select>

<span id="faulttextw" style="color:Red; display:none">Text in the span</span> 
```

和下面的jQuery脚本： -

```
$(document).ready(function(){

$('#fault option:nth-child(n+12)').wrapAll('<optgroup label="Urgent Faults">');

$('#faultw option:nth-child(n+12)').wrapAll('<optgroup label="Urgent Faults">');

$("#fault").change(function (event) {
    var $selected = $(this).find("option:selected");
    $("#faulttext").fadeToggle(!!$selected.closest("optgroup").length);
});

$("#faultw").change(function (event) {
    var $selected = $(this).find("option:selected");
    $("#faulttextw").fadeToggle(!!$selected.closest("optgroup").length);
});

}); 
```

请注意，有两个选择列表和两个跨度，第二个集合以 w 为后缀。

另请注意，上面的 jquery 是重复的，以处理带后缀的元素集。

我将如何修改/整理上面的 jquery 来处理这两者？

用作选择器`#fault, #faultw option:nth-child(n+12)`似乎不起作用。

同样在 jquery 的第二位，如果我要使用它来处理更改事件，`$("#fault, #faultw").change`那么我将需要`fadeToggle`匹配的 span 文本。

还是最好保持简单并保持原样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:11:34.787

逗号的作用类似于 OR，因此启动了一个不相关的选择器 -`option:nth-child(n+12)`末尾的部分仅适用于逗号之后的选择器的其余部分，而不适用于它之前的选择器。您将需要使用：`#fault option:nth-child(n+12), #faultw option:nth-child(n+12)`。

至于`change`事件处理程序，您可以在元素上使用 HTML5`data-*`属性`<select>`来指定要使用的跨度的 ID。

HTML：

```
<select name="Fault" class="textbox" id="fault" data-spanid="faulttext">
    // options
</select>

<span id="faulttext" style="color:Red; display:none">Text in the span</span>

<select name="Fault" class="textbox" id="faultw" data-spanid="faulttextw">
    // options
</select>

<span id="faulttextw" style="color:Red; display:none">Text in the span</span> 
```

jQuery：

```
$("#fault, #faultw").change(function (event) {
    var $selected = $(this).find("option:selected");
    $("#" + $(this).data('spanid')).fadeToggle(!!$selected.closest("optgroup").length);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:08:24.270

使用选择器`#fault option:nth-child(n+12), #faultw option:nth-child(n+12)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:16:44.137

这是另一个解决方案

```
$(document).ready(function(){

$('#fault option:nth-child(n+12) , #faultw option:nth-child(n+12)').wrapAll('<optgroup label="Urgent Faults">');

$("#fault , #faultw").change(function (event) {
    var $selected = $(this).find("option:selected");
    var id  =   $(this).attr('id');

    $("#"+id).fadeToggle(!!$selected.closest("optgroup").length);
}); 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:19:56.897

最不显眼的方法是让它取决于 DOM 中选择的实际位置。`.nextAll('selector')`寻找那个。

```
$("#fault, #faultw").change(function (event) {
    var $selected = $(this).find("option:selected");
    $(this).nextAll('#faulttext,#faulttextw').first().fadeToggle(!!$selected.closest("optgroup").length);
}); 
```

# caching - 访问 AppFabric 缓存时出错

> ID：10010729
> 
> 赞同：4
> 
> 时间：2012-04-04T12:05:49.433
> 
> 标签：caching, appfabric

我试图使用 MVC asp.net 项目让 Appfabric 缓存与 IIS7 一起运行。在共享目录中使用 XML 配置提供程序。

使用 cassini 网络服务器（我的本地管理员帐户）时，我可以访问 AppFabric 缓存。

使用 IIS（“ApplicationPoolIdentity”）时，我无法让它工作，并且收到标准消息，它无法连接到主机。

我试图向不同的用户（APPPOOL\name、NETWORKservice、Everyone 等）授予对缓存的访问权限，但我每次都得到这个空异常。

> PS C:> Grant-CacheAllowedClientAccount "每个人"
> 
> Grant-CacheAllowedClientAccount ：对象引用未设置为对象的实例。在 line:1 char:32 + Grant-CacheAllowedClientAccount <<<< Everyone + CategoryInfo : NotSpecified: (:) [Grant-CacheAllowedClientAccount], NullReferenceException + FullyQualifiedErrorId :
> System.NullReferenceException,Microsoft.Applicat ionServer.Caching.Commands.GrantCacheAllowedClientAccountCommand

我有两台几乎相同的开发人员机器，使用 win7 x64（连接域），两台计算机上的错误相同。

但是在我的家用计算机（未连接域）上，它使用相同的安装设置、相同的共享目录按预期工作。

到目前为止我做了什么：

*   两次重新安装appfabric缓存
*   重新配置缓存以使用另一个目录
*   设置配置目录共享，Everyone完全访问
*   目录的安全权限，每个人的完全访问权限。

有没有办法更深入地调试此错误消息或修复它的解决方案？

![来自 appfabric 缓存 powershell 的错误](../Images/d3979e34e1d53513915de0d70792543d.png)

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <configuration>
>  <configSections>
>    <section name="dataCache"     
>      type="Microsoft.ApplicationServer.Caching.DataCacheSection,
>      Microsoft.ApplicationServer.Caching.Core" />
> </configSections>
> <dataCache size="Small">
>  <caches>
>    <cache consistency="StrongConsistency" name="default" minSecondaries="0">
>      <policy>
>        <eviction type="Lru" />
>        <expiration defaultTTL="10" isExpirable="true" />
>    </policy>
>   </cache>
>  </caches>
>  <hosts>
>    <host replicationPort="22236" arbitrationPort="22235" clusterPort="22234"
>      hostId="1556989554" size="3003" leadHost="true" account="DOM\vitcpu7$"
>      cacheHostName="AppFabricCachingService" name="vitcpu7.office.domain.se"
>      cachePort="22233" />
> </hosts>
> <deploymentSettings>
>   <deploymentMode value="RoutingClient" />
> </deploymentSettings>
> </dataCache>
> </configuration> 
> ```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T07:06:48.120

这是因为它是在域环境中设置的，并且“远程注册表”服务没有启动。由于我的家庭计算机在工作组中，因此不需要“远程注册表”启动它的组合，AppFabric 缓存需要这个来在 powershell 中进行大多数更改。

[更多信息，请访问 msdn 社交](http://social.msdn.microsoft.com/Forums/en-CA/velocity/thread/e977c98d-32e6-4b58-8947-6248cdcf5020)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T11:39:13.147

同意 Kiteloop，需要启动“远程注册表”并以管理员身份运行“缓存管理 Powershell Windows”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T06:56:49.860

对于内置帐户，只需使用这种格式的命令

Grant-CacheAllowedClientAccount -Account "DOMAIN1\Server1$"

更多在这个 MSDN 链接[http://msdn.microsoft.com/en-us/library/ff921012.aspx](http://msdn.microsoft.com/en-us/library/ff921012.aspx)

# javascript - 使用 jquery 保存 javascript 对象并从数据库传递一个 ID

> ID：10010733
> 
> 赞同：5
> 
> 时间：2012-04-04T12:05:57.327
> 
> 标签：javascript, jquery, ajax, class, object

我正在使用 jQuery 来保存我的 javascript 对象的值。我需要从数据库中检索插入对象的 ID。如果 Save 函数在 javascript 对象中，我知道该怎么做（参见下面的代码）。但是，如果 Save 函数不在 javascript 对象中，我该如何设置 ID 变量？

在职的：

```
Person = function() {
    var self = this;

    self.ID;
    self.Name;
    self.SurName;

    self.Save = function() {
        $.ajax({
            type: "POST",
            url: "Save",
            contentType: "application/json; charset=utf-8", 
            data: JSON.stringify({ Name: self.Name, SurnName: self.SurName }),
            dataType: "json",
            success: function (result) {
                var ID = result.d.ID; //this is the ID retreived from database
                self.ID = ID; //set the ID, it works, since I can reference to self
            }
        });
    };
}¨ 
```

那么我现在如何实现一个函数（在 Person 类之外！），例如：

```
SavePerson = function(p) {
     $.ajax({
        type: "POST",
        url: "Save",
        contentType: "application/json; charset=utf-8", 
        data: JSON.stringify({ Name: p.Name, SurnName: p.SurName }),
        dataType: "json",
        success: function (result) {
            var ID = result.d.ID; //this is the ID retreived from database
            p.ID = ID; //set the ID, it doesn't work, becouse if I call SavePerson repetedly for different objects, a p will not be a correct person.
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:22:10.747

澄清一下，您希望 Person 对象 id 属性使用最近的保存进行更新吗？如果是这样，下面的脚本就足够了。我使用了 deferred 来确保 p.ID 仅在异步请求完成后更新。

```
$.Person = function() {
    var self = this;
    self.ID;
    self.Name;
    self.SurName;
}

$.SavePerson = function() {
var dfd = $.Deferred();
     $.ajax({
        type: "POST",
        url: "Save",
        contentType: "application/json; charset=utf-8", 
        data: JSON.stringify({ Name: p.Name, SurnName: p.SurName }),
        dataType: "json",
        success: dfd.resolve
    });
return dfd.promise();
};

var p = new $.Person();

$.SavePerson().then(function(result){
    p.ID = result.d.ID;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:17:54.877

可能有更好的方法来做到这一点，但我会让我的数据库也返回 Name 和 Surname 以及 ID，然后搜索我的 Person 列表以在成功函数中找到正确的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T15:16:35.770

也许这就是你想要的？

我在这里借了一些代码：

```
/*** makeClass() ***
 * The following allows us to easily create
 * Javascript classes.  Source of this:
 * http://ejohn.org/blog/simple-class-instantiation/
 * makeClass - By John Resig (MIT Licensed)
 */

function makeClass() {
    return function(args) {
        if (this instanceof arguments.callee) {
            if (typeof this.init == "function") this.init.apply(this, args.callee ? args : arguments);
        } else return new arguments.callee(arguments);
    };
});

/* set up ajax */
$.ajaxSetup({
    async: false,
    type: "POST",
    contentType: "application/json",
    converters: {
        "json jsond": function(msg) {
            return msg.hasOwnProperty('d') ? msg.d : msg;
        }
    },
    data: '{}',
    dataType: "json",
    error: function(jqXHR, status, error) {
        alert("An error occurred on the server. Please contact support.");
    }
});

/* set up my person class */
var personClass = makeClass();
personClass.prototype.init = function() {
    this.ID = '';
    this.SurName = '';
    this.Name = '';
}

/* create my save function */
personClass.prototype.SavePerson = function(p) {
    this.Name = (typeof p === 'undefined') ? this.Name : p.Name;
    this.SurName = (typeof p === 'undefined') ? this.SurName : p.SurName;
    $.ajax({
        url: "Save",
        data: JSON.stringify({
            Name: this.Name,
            SurnName: this.SurName
        }),
        success: function(result) {
            var ID = result.ID; //ID  from database
            this.ID = ID; //set the ID, 
        }
    });
};
//create two persons
var person1 = personClass();
var person2 = personClass();

//set person1 to be fred
person1.Name = "Fred";
person1.SurName = "Flintstone";

// independent person
var p = {Name: "Barney", SurName: ""};
p.Surname = "Rubble";

//save specific and the independent (as person2)
person1.SavePerson();
person2.SavePerson(p);

//alert the ID of both
alert(person1.ID + ":" + person2.ID); 
```

# iptables - IPTABLES：ping 和 wget 工作，虽然他们不工作

> ID：10010734
> 
> 赞同：2
> 
> 时间：2012-04-04T12:06:04.393
> 
> 标签：iptables, forwarding, nat

看来我不明白 IPTABLES 逻辑。

我在我的服务器上重新安装了 ubuntu server 11.10 并打开了转发（/etc/sysctl.conf 中的 net.ipv4.ip_forward=1）。服务器有两个网络接口 - eth0（ip 192.168.1.1）寻找本地网络，eth1（ip 213.164.156.130）寻找互联网。

本地网络中还有另一台计算机，IP 为 192.168.1.2。

然后我在 ITABLE *nat 中添加了两个简单的规则：

```
-A PREROUTING -i eth1 -j DNAT --to-destination 192.168.1.2
-A POSTROUTING -o eth1 -j SNAT --to-source 213.164.156.130 
```

我认为第一条规则意味着将每个传入的数据包转发到 192.168.1.2。

但是，如果我从服务器运行“ping google.com”、“wget google.com”，它们就会成功运行。服务器接收数据包并且不进行转发，我真的很坚持这一点。

如果我从 192.168.1.2 运行这些命令，它们也可以工作，这意味着转发工作在这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:24:21.877

这些是 NAT 规则。

在您的第一条规则中，地址转换发生在路由数据包之前。您将目标地址更改为 192.168.1.2，在第二条规则中，您将在路由到 213.164.156.130 之前更改源地址。

我猜你可以 ping & wget 因为你的 INPUT 和 OUTPUT 链有一个默认操作。

TBH，我对你真正想要做什么感到困惑，但如果你想转发数据包，你需要修改 FORWARD 链。这是有关 iptables 的详细和有用信息的链接，因此您可以更好地理解逻辑 - Ch14:_Linux_Firewalls_Using_iptables">http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_: *Ch14* :_Linux_Firewalls_Using_iptables。

# java - 强制热点进行频繁的GC？

> ID：10010738
> 
> 赞同：1
> 
> 时间：2012-04-04T12:06:19.233
> 
> 标签：java, jvm-hotspot

我正在用 Java 对服务器进程进行基准测试，看起来 Hotspot 并没有产生很多 GC，但是当它发生时，它的性能会大大提高。

我可以强制热点频繁地进行较小的 GC，而不是一些大规模的长 GC 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:07:36.393

You can try changing the GC to parallel or concurrent. Here's a link to the documentation.

[http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:18:23.667

干扰 GC 的调用时间通常是个坏主意。如果 gc 的性能有问题，更好的方法是调整 eden、survivor 和 old space 的大小。

如果必须进行一次完整的扫描，那么它被调用的频率并不重要，速度总是相对较慢，唯一快速的 gc 调用是那些在伊甸园和幸存者空间中的调用。

因此增加伊甸园和幸存者空间可能会解决您的问题，但不幸的是，良好的内存分析相当耗时且执行起来很复杂。

[http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html) （从其他答案窃取的链接）还提供了有关如何在必要时进行配置的选项。-XX:NewRatio=2 或 -XX:NewRatio=3 可能会提高您的速度，但也可能会减慢速度。不幸的是，这非常依赖于应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:16:45.273

您可以通过以下方式告诉 JVM 以编程方式进行垃圾收集：[System.gc()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#gc%28%29)。请注意，Javadoc 说这只是一个建议。您可以在进入不希望 GC 性能损失的关键部分之前尝试调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:51:33.327

您可以通过减少年轻/新大小或更频繁地调用 gc 来增加执行 GC 的频率。这并不意味着你会暂停更短的时间，只是它会经常发生。

减少 GC 影响的最佳方法是对应用程序进行内存分析并减少产生的垃圾量。这不仅会使您的代码更快，而且会减少每次 GC 发生的频率和持续时间。

在更极端的情况下，您可以将 GC 发生的频率减少到每天不到一次，将其作为一个问题一起消除。

# xpages - 确定已定义用户的所有组

> ID：10010740
> 
> 赞同：5
> 
> 时间：2012-04-04T12:06:30.387
> 
> 标签：xpages, lotus, usergroups

我目前正在创建一个 java 方法（是 XPages 托管 bean 的一部分）来检索用户（不一定是当前用户）所属的列表组。

是否有任何简单的方法来检索此信息，或者我是否必须遍历所有组以检查用户并检查这些组是否是其他组的子组？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T20:30:49.590

在这里的博客文章中回答了这个问题：http: [//ntf.gbs.com/nathan/escape.nsf/d6plinks/NTFN-8TMHRP](http://ntf.gbs.com/nathan/escape.nsf/d6plinks/NTFN-8TMHRP)

简单的版本是你正在寻找的是......

```
lotus.notes.addins.DominoServer server = new lotus.notes.addins.DominoServer("YourCanonicalServerName");
Collection nameList = server.getNamesList("TheUserNameYou'reLookingFor"); 
```

这应该就是你所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-24T07:36:30.957

使用这个片段：

```
XSPContext context = XSPContext.getXSPContext(FacesContext.getCurrentInstance());
DirectoryUser currentUser = context.getUser();
Vector<String> groups = new Vector(currentUser.getGroups()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:18:52.347

`($ServerAccess)`您可以从按用户名分类的 names.nsf 中的视图中检索此信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:31:24.873

session.evaluate("@UserNamesList");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T19:26:13.020

不确定您是否可以在此处（重新）使用 LotusScript，但这篇[文章（IBM DeveloperWorks，请看第 4 段）](http://www.ibm.com/developerworks/lotus/library/ls-groups/)是一个很好的开始。它提到了 NotesGroupManager 和 NotesGroup 类。这些类可以用作重写 XPage 代码的基础。似乎没有其他“简单”的方法可以找到用户所属的所有组。这个问题的直接答案似乎是否定的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T21:43:55.007

您可能更愿意在由组成员组织的每个主管中创建一个特殊视图，而不是遍历服务器上所有目录中的所有组。这使得找到匹配的速度要快得多。

Jasper 提到的 GroupManager 工具也是一个很好的 LotusScript 代码示例，它可以完成您想要的大部分工作。Java 中的对象是相同的，只是语法更讨厌。

/新人

# ruby-on-rails - Advanced contraints in rails 3 for user-centric routing

> ID：10010744
> 
> 赞同：1
> 
> 时间：2012-04-04T12:06:39.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, constraints

Learning rails development and would usually prefer to search out an answer than waste peoples time but this has been doing my head in all night.

Essentially I'm trying to present user-dependant views ala github etc.

I'm trying to follow the instructions laid out here: [http://collectiveidea.com/blog/archives/2011/05/31/user-centric-routing-in-rails-3/](http://collectiveidea.com/blog/archives/2011/05/31/user-centric-routing-in-rails-3/)

My authentication at the moment is from the railscast "Authentication from Scratch - revised" which uses sessions, my sessions_crontroller.rb:

```
class SessionsController < ApplicationController
    def new
    end

    def create
      user = User.find_by_email(params[:email])
      if user && user.authenticate(params[:password])
        session[:user_id] = user.id
        redirect_to root_url, notice: "Logged in!"
      else
        flash.now.alert = "Email or password is invalid"
        render "new"
      end
    end

    def destroy
      session[:user_id] = nil
      redirect_to root_url, notice: "Logged out!"
    end
end 
```

And my routes.rb:

```
C::Application.routes.draw do

root :to => "static_pages#home", :constraints => LoggedInConstraint.new(false)
root :to => "users#show", :constraints => LoggedInConstraint.new(true)

resources :users
resources :sessions 
```

As per my understanding, because I'm not using cookies the final comment under that blog posts recommends using request.session[:your_key] in place of request.cookies.key?("user_token") however when logged in I am still taken to static_pages#home? If anyone could shed some light on the topic I would very much appreciate it.

I also apologise for any formatting errors etc, this is my first question on stackoverflow.

Thanks again!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:46:08.570

不确定你的确切问题，但我只是做了类似的事情，所以也许我的代码会帮助你：

我的路线：

```
# Except from config/routes.rb
require File.expand_path("../../lib/role_constraint", __FILE__)

MyApp::Application.routes.draw do
  mount Resque::Server, :at => "/resque", :constraints => RoleConstraint.new('admin')
  ...
  ...
  ... 
```

我的约束：

```
# lib/role_constraints.rb
class RoleConstraint < Struct.new(:value)
  def matches?(request)
    request.session[:role] == value
  end
end 
```

我的会话控制器：

```
# app/controllers/sessions_controller.rb
class SessionsController < ApplicationController
  before_filter :require_user, :only => :destroy
  def new
  end

  def create
    user = User.find_by_username(params[:username])
    if user && user.authenticate(params[:password])
      session[:user_id] = user.id

      # Just for /resque
      # Not secure - if you change a user's role, it will not be updated here
      # until they log out and log in again.
      session[:role] = user.role

      if user.email.nil?
        redirect_to user, :notice => "Please add your email address to your account"
      else
        redirect_to root_url, :notice => "Logged in!"
      end
    else
      flash.now.alert = "Invalid email or password"
      render "new"
    end
  end

  def destroy
    session[:user_id] = nil
    session[:current_project_id] = nil
    redirect_to root_url, :notice => "Logged out!"
  end
end 
```

# .net - .Net 中的 ConcurrentQueue 和 BlockingCollection 有什么区别？

> ID：10010748
> 
> 赞同：65
> 
> 时间：2012-04-04T12:06:58.920
> 
> 标签：.net, generics, c#-4.0

`ConcurrentQueue`.Net和.Net有什么区别`BlockingCollection`？

`BlockingCollection`当可以通过 完成时，为什么最适合生产者-消费者操作`ConcurrentQueue`？我必须改进以下代码中的任何内容吗？

```
MessageSlotMachineGameStartOrAndStatusUpdate msg;

while (!aCancellationToken.IsCancellationRequested)
{
    try
    {
        this.isStillConsumingMsg = true;
        Boolean takeResult = this.msgQueue.TryTake(out msg, this.msgConsumeTimeOut, aCancellationToken);
        if (takeResult)
        {
            if (msg != null)
            {
                this.ProcessMessage(msg);
            }
        }
        else
        {
            break;
        }
    }
    catch (OperationCanceledException err)
    {
        EngineManager.AddExceptionLog(err, "Signal Operation Canceled");
    }
    catch (Exception err)
    {
        EngineManager.AddExceptionLog(err, "Signal exception");
    }
    finally
    {
        this.isStillConsumingMsg = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-04T12:10:44.677

`BlockingCollection`有一个`Take`方法，如果没有东西可以阻止消费者，并等待生产者端提供一个项目。`ConcurrentQueue`缺少这样的方法——如果它是空的，消费者需要处理等待，生产者需要提供一个非空的通知。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-01-07T10:30:36.047

**BlockingCollection**是并发集合的包装器，默认包装的集合是**ConcurrentQueue** ;-)

来自[Microsoft BlockingCollection](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.blockingcollection-1?view=netframework-4.8)：

> 创建 BlockingCollection 对象时，您不仅可以指定有界容量，还可以指定要使用的集合类型。例如，您可以为先进先出 (FIFO) 行为指定**ConcurrentQueue**对象，或为后进先出 (LIFO) 行为指定**ConcurrentStack对象。**您可以使用任何实现**IProducerConsumerCollection**接口的集合类。 **BlockingCollection 的默认集合类型是 ConcurrentQueue。**

**BlockingCollection**有一个**Take()**阻塞方法（因此得名），但它也有一个非常有趣的**GetConsumingEnumerable()**方法，它允许您无限循环：只有在将某些内容添加到集合时，代码才会进入代码内部的循环。请参阅[albahari.com](http://www.albahari.com/threading/part5.aspx#_BlockingCollectionT)关于线程的优秀在线电子书。

以下是该网站的代码示例：

```
public class PCQueue : IDisposable
{
  BlockingCollection<Action> _taskQ = new BlockingCollection<Action>(); 
  public PCQueue (int workerCount)
  {
    // Create and start a separate Task for each consumer:
    for (int i = 0; i < workerCount; i++)
      Task.Factory.StartNew (Consume);
  }

  public void Dispose() { _taskQ.CompleteAdding(); }

  public void EnqueueTask (Action action) { _taskQ.Add (action); }

  void Consume()
  {
    // This sequence that we’re enumerating will block when no elements
    // are available and will end when CompleteAdding is called. 
    foreach (Action action in _taskQ.GetConsumingEnumerable())
      action();     // Perform task.
  }
} 
```

# php - 如何验证按位值？

> ID：10010749
> 
> 赞同：2
> 
> 时间：2012-04-04T12:07:03.053
> 
> 标签：php, security, validation, binary, bit-manipulation

在数据库表中，我有一列名为`options`. 它具有整数类型，并且应该保存来自用户输入的按位值的总和。用户向服务器发送按位值数组`[1, 2, 4, 8]`，然后将值汇总并保存在该列中。当我需要输出值时——我只需要检查`$options & 2`. 一切正常，但我只是想知道：在将按位值的总和保存在数据库中之前，我是否需要以某种方式检查用户输入？

感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:14:25.587

简短而简单：
应**始终**检查用户输入。总是。

在您的情况下，您应该在总结它们或使用它们做任何其他事情*之前检查不同的值。*如果一切正常（只有数字是 2 的幂），总结它们并处理结果（保存到数据库/其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:17:46.193

对于未检查的用户输入按位值，您可能面临的问题与提交后未检查的任何类型的数据所面临的问题相同。

所以是的，您应该**始终**检查并验证您的用户输入数据。

# iphone - White space in iPhone

> ID：10010756
> 
> 赞同：0
> 
> 时间：2012-04-04T12:07:35.720
> 
> 标签：iphone

I am optimizing my online portfolio for the iPhone.

I am using the following media queries for both portrait and landscape orientations.

1)@media screen and (orientation:portrait) {}

2)@media screen and (orientation:landscape) {}

The issue I have is that when I rotate my iPhone from portrait to landscape or vice versa the design gets messed up adding a lot of white space between elements, only if I refresh the browser then the design is fine.

When first building the style sheet for the media query in portrait mode, I came across a lot of white space and I had to use few negative margins to bring the elements back to their original position... I am assuming there is already something wrong there..

I hope this is enough for you guys to understand my issue.

Thanks so much

# javascript - 验证代码不起作用直接重定向到操作路径

> ID：10010760
> 
> 赞同：1
> 
> 时间：2012-04-04T12:07:45.770
> 
> 标签：javascript, jquery, validation

这是来自的 html

```
 <form action="http://localhost/own/import.php" method="post" enctype="multipart/form-data" name="form1">

      <input type="file" name="xmlfile" id="file1">

      <input type="file" name="uploaded_image" id="file2">

   <input type="submit" id="submit" name="Submit" value="Submit" style="margin:0 0 0 150px;"> 
```

这是java脚本文件

```
function getExt(filename) {
  var dot_pos = filename.lastIndexOf(".");
  if (dot_pos == -1) {
     return "";
  }
    return filename.substr(dot_pos + 1).toLowerCase();
 }

function validate_ext() {
var filename = document.getElementById("file1").value;
var filename2 = document.getElementById("file2").value;
var ext = getExt(filename);
var ext2 = getExt(filename2);

if (filename != "") {
    if (!(ext == "xml")) {
       alert("Please upload XML file format only");
       return false;
    }
}

 if (filename2 != "") {
    if (!((ext2 == "jpg") || (ext2 == "jpeg") || (ext2 == "png"))) {
            alert("Please upload jpg, jpeg, png file format only");
            return false;
        }
    }

    return true;
  }

$(document).ready(function() {
    $('#submit').click(validate_ext);
    alert("test");
}); 
```

我也在这里分享代码[http://jsfiddle.net/vikastyagi87/XugLp/18/](http://jsfiddle.net/vikastyagi87/XugLp/18/)

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:41:28.613

文件名可以未定义您应该尝试：

```
if (filename != undefined && filename.length > 0) 
```

你忘了 ＃

```
$('#submit').click(validate_ext); 
```

你为什么写

```
if (!(ext == "xml")) 
```

代替

```
if (ext.toUpperCase() != "XML") 
```

!= 比 !(==) 简单，并且您的文件扩展名可以包含大写字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:32:41.970

我犯了错误

```
if (filename != "") {
if (!(ext == "xml")) {
   alert("Please upload XML file format only");
   return false;
   }
}

if (filename2 != "") {
if (!((ext2 == "jpg") || (ext2 == "jpeg") || (ext2 == "png"))) {
        alert("Please upload jpg, jpeg, png file format only");
        return false;
    }
} 
```

但是在改变之后现在它正在工作

```
if (!(ext == "xml")) {
   alert("Please upload XML file format only");
   return false;
}

if (!((ext2 == "jpg") || (ext2 == "jpeg") || (ext2 == "png"))) {
        alert("Please upload jpg, jpeg, png file format only");
        return false;
    } 
```

这是工作代码[http://jsfiddle.net/vikastyagi87/XugLp/29/](http://jsfiddle.net/vikastyagi87/XugLp/29/)

# ruby - Ruby 在没有显式包含声明的情况下在子类上执行 self.included(base) 方法？

> ID：10010764
> 
> 赞同：10
> 
> 时间：2012-04-04T12:07:51.620
> 
> 标签：ruby, class, inheritance, module

我有许多从一个超类继承的类。超类作为模块定义。模块内部是一个设置一些实例变量的 self.included(base) 方法。

所以是这样的：

```
module MyModule
  def self.included(base)
    base.instance_variable_set("@my_instance_variable", {})
  end
end

class MySuperClass
  include MyModule
end

class ClassA < MySuperClass
end

class ClassB < MySuperClass
end 
```

除非我在 ClassA 和 ClassB 中明确包含 MyModule，否则我的实例变量将不会在这两个类中设置。

有没有办法确保在每个子类中执行模块 self.included(base) 方法而无需显式包含模块？因为它已经包含在超类中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T12:16:07.200

类实例变量是类私有的。继承的类不能直接访问它们。这里有几种方法。

## 1.定义访问器

```
module MyModule
  def self.included(base)
    base.instance_variable_set :@my_instance_variable, {}
    base.extend ClassMethods
  end

  module ClassMethods
    def my_instance_variable
      # self is ClassA here, so we need to call superclass
      superclass.instance_variable_get :@my_instance_variable # => {}
    end
  end
end

class MySuperClass
  include MyModule
end

class ClassA < MySuperClass; end

ClassA.my_instance_variable # => {} 
```

## 2\. 更多元程序化

但是每次从你那里继承一个类时都会调用一个钩子。此时您可以设置变量。看一下这个。

```
module MyModule
  def self.included(base)
    base.extend ClassMethods
  end

  module ClassMethods
    # make it a class method. It will be called on target classes later.
    def enhance klass 
      klass.instance_variable_set("@my_instance_variable", {})
    end
  end
end

class MySuperClass
  include MyModule

  # this hook will get called on 'class ClassA < MySuperClass`
  def self.inherited klass
    # set class instance var on child class
    enhance klass
  end
end

class ClassA < MySuperClass; end

ClassA.instance_variable_get '@my_instance_variable' # => {} 
```

**注意：**在这个示例中，每个继承的类都有自己的类实例 var（而基类没有）。这可能更适合您的情况，可能不是。

# ios - 奇怪的位移结果

> ID：10010767
> 
> 赞同：0
> 
> 时间：2012-04-04T12:07:52.743
> 
> 标签：ios, bit-shift

```
int64_t maskTestNum = (1ll << 63); 
```

有人可以解释为什么这打印为下面的值吗？

> -9223372036854775808

我认为绝对值是正确的，但为什么是减号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:21:26.767

请改用无符号整数：uint64_t。

# eclipse - JavaHL 不工作

> ID：10010768
> 
> 赞同：5
> 
> 时间：2012-04-04T12:07:53.113
> 
> 标签：eclipse, svn, subclipse, javahl

我尝试从 SVN 更新一个项目（我有一个全新安装的 eclipse，但它是一个现有的工作区）所以我安装了 subclipse 但是当我想用 SVN 做任何事情时，我收到如下错误消息：

```
Failed to load JavaHL Library.
These are the errors that were encountered:
no libsvnjavahl-1 in java.library.path
no svnjavahl-1 in java.library.path
no svnjavahl in java.library.path
java.library.path = .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java 
```

或者

```
Problems reported while synchronizing SVNStatusSubscriber. 0 of 1 resources were synchronized.
An error occurred synchronizing <Project name>: Error getting status for resource P<Project name> Unable to load default SVN Client
Error getting status for resource P<Project name> Unable to load default SVN Client
Unable to load default SVN Client 
```

我使用 eclipse indigo 3.7.2 在 Mac OS X 10.6.8 上工作。

有人可以帮我让它工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:25:31.870

答案在此 Wiki 页面中有详细说明：

[http://subclipse.tigris.org/wiki/JavaHL](http://subclipse.tigris.org/wiki/JavaHL)

您需要安装 Subversion 本机库，包括 JavaHL 库。我建议使用 MacPorts 或 HomeBrew 来获取本机库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:21:23.170

真的需要JavaHL吗？我只是忽略了这个错误，我仍然可以毫无问题地使用 svn。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T15:09:48.873

确保您的 Subclipse 版本和您的本机 JavaHL 库匹配（请查看[http://subclipse.tigris.org/wiki/JavaHL](http://subclipse.tigris.org/wiki/JavaHL)了解详细信息）。

When unsure about the version of JavaHL, do something like

```
$ strings /opt/local/lib/libsvnjavahl-1.a | fgrep svn:
svn:auth:username
svn:auth:password
svn:auth:config-dir
svn: 
svn:1.8.8 (r1568071) 
```

Here, I have the 1.8.8 version installed. Btw, this one appears to work well with Subclipse 1.10.x.

Then check whether your native library folder, for example /opt/local/lib when using MacPorts, is taken into account. MacPorts for example adds symbolic link /Library/Java/Extensions/libsvnjavahl.jnilib, thus there is no need to configure java.library.path on launching Eclipse or STS.

Again if unsure, you may try something like

```
STS --launcher.appendVmargs -vmargs -Djava.library.path=/opt/local/lib 
```

Be aware however, that the launch configuration above overrides the default setting of java.library.path which may trigger other (non 100% pure) plugins to fail.

# jquery - 为什么 JQuery UI 滑块中的句柄是标签？

> ID：10010770
> 
> 赞同：6
> 
> 时间：2012-04-04T12:07:57.983
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我正在阅读滑块的官方演示页面中的代码：http: [//jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)，我想知道为什么要使用`<a>`标签来处理？为什么不是一个`<div>`？

```
<div class="demo">

<div id="slider" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
    <a class="ui-slider-handle ui-state-default ui-corner-all ui-state-hover" href="#" style="left: 19%; ">
    </a>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:18:33.230

我认为他们使用了锚点，因为在 HTML 中，链接将 HTML 与其他标记语言区分开来，因为它们提供了交互。取自 w3c

> HTML 为富文本和结构化文档提供了许多传统的发布习惯，但它与大多数其他标记语言的不同之处在于它对超文本和交互式文档的特性。本节介绍链接（或超链接，或 Web 链接），基本的超文本结构。链接是从一个 Web 资源到另一个 Web 资源的连接。虽然是一个简单的概念，但链接一直是推动 Web 成功的主要力量之一。

句柄也是你点击的东西，所以也许他们认为使用 an`<a>`而不是 a在语义上更有意义`<span>`。

为了清楚起见，我的想法是他们可以在技术上使用任何东西，但他们出于语义原因选择锚点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T12:34:47.957

我想知道同样的......所以我在这里......有一个理论！

手柄需要能够**获得焦点**
（当它们有焦点时，您可以使用箭头、Home 键和 End 键来操作手柄）

不确定跨度或 div 是否**可以**成为焦点（在所有浏览器中）？

也许`<button>`可以代替使用？（有人，请尝试）
- 这会更有意义。并且不要弄乱状态行：（
（如果周围的表单没有正确的提交按钮，我们会遇到麻烦吗？）

# c# - MVC 3 成员资格和授权

> ID：10010771
> 
> 赞同：2
> 
> 时间：2012-04-04T12:08:02.900
> 
> 标签：c#, asp.net-mvc-3, authorization

我正在开发一个 MVC3 应用程序，我已经到了需要开始将 Intranet 站点的不同区域保护给特定用户的地步。

该站点正在 Intranet 上使用，并使用 Windows 身份验证进行登录。

在数据库中，我有一个用户表，其中包含许多确定用户角色的字段。这是在站点的管理区域中维护的。

某些用户可以访问管理区域，某些用户只能阅读站点的某些区域而不能贡献，等等。有一些复杂的业务规则。

我正在寻找如何保护不同区域的安全。我已经阅读了几篇关于在特定组的控制器上使用授权属性的文章，据我了解，这似乎不太合适我必须从应用程序的配置中控制哪些用户在哪些组中而应用程序的管理员用户应该是通过应用程序本身控制它的人。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:11:30.723

为用户分配角色并使用`AuthorizeAttribute`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:34:54.553

如果您主要关心管理用户，ASP.NET 可以通过其内置的 Web 应用程序管理工具在这方面做得很好。在解决方案资源管理器的右上角，刷新按钮的右侧，是一个锤子工具，您可以单击它。它允许您管理用户和角色，并从那里您可以将用户分配给角色。也许您的管理员可以使用它。

这告诉你如何： [http ://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7)

至于必须将授权属性放在控制器/方法上，我看不出有任何解决办法。如果我误解了你的问题，请告诉我。

# android - 正在监听地理位置的不可阻挡的 Android 服务

> ID：10010776
> 
> 赞同：1
> 
> 时间：2012-04-04T12:08:23.080
> 
> 标签：android, service, geolocation, gps, unbind

我实现了用于监听用户位置的 Android 服务：

```
public class ListenLocationService extends Service {
    IBinder mBinder = new LocalBinder();      
    public interface ILocationService {     
          Location userLocation = new Location("");
          public void StartListenLocation();
          public void StopListenLocation();
          public Location getUserLocation();
        }
    LocationManager locationManager;
    LocationListener locationListener;
    public class LocalBinder extends Binder implements ILocationService{

        public void StopListenLocation(){
            //so many attempts to stop service and no one helped
            locationManager.removeUpdates(locationListener);
            locationListener = null;
            stopSelf();
        }

        public void StartListenLocation()
        {   
            locationManager = (LocationManager)ListenLocationService.this.getSystemService(Context.LOCATION_SERVICE);
            locationListener = new LocationListener() {

                public void onStatusChanged(String provider, int status, Bundle extras) {               
                }       

                public void onProviderEnabled(String provider) {                     
                }

                public void onProviderDisabled(String provider) {                   
                }

                public void onLocationChanged(Location location) {                  
                    userLocation.set(location);
                }
            };
            //if I have only one requestLocationUpdates situation is the same

                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 
                        400, 1, locationListener);
                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
                        400, 1, locationListener);
            }

        public Location getUserLocation(){
            return userLocation;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }   

} 
```

我在两个活动中绑定到这个服务。在第一个活动中，我只是启动服务：

```
 private ServiceConnection mConnection = new ServiceConnection() {

        public void onServiceConnected(ComponentName className,
                IBinder service) {
            mService = (ILocationService) service; 
            mService.StartListenLocation();   
        }

        public void onServiceDisconnected(ComponentName arg0) {
            Log.d("LOG","onServiceDisconnected");
        }
    };

    public void onCreate(Bundle savedInstanceState) {
...
        Intent intent = new Intent(this, ListenLocationService.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
...
}
    @Override 
    public void onStop(){
        super.onStop();
        unbindService(mConnection);
        mService.StopListenLocation();      
    } 
```

如果我只在我的应用程序中启动第一个活动并关闭它然后服务停止 - GPS 标记从设备屏幕上消失。

但是，如果我进入第二个活动（我正在获取 userLocation）并在此关闭之后（使用 Android 后退按钮），那么 GPS 标记仍在我的屏幕上！

第二个活动的代码：

```
 private ServiceConnection mConnection = new ServiceConnection() {

        public void onServiceConnected(ComponentName className,
                IBinder service) {
            mService = (ILocationService) service;             
            userLocation = mService.getUserLocation();              
        }

        public void onServiceDisconnected(ComponentName arg0) {
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
...
    Intent intent = new Intent(this, ListenLocationService.class);
    bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
...
}
    @Override 
    public void onStop(){
        super.onStop();
            unbindService(mConnection);
            mService.StopListenLocation();          

    } 
```

你可以看到我`onStop()`不仅在这两种方法中都写了`unbindService`（最初我认为这就足够了），而且我正在`StopListenLocation`用这段代码调用函数：

```
locationManager.removeUpdates(locationListener);
locationListener = null;
stopSelf(); 
```

如果只有第一个活动绑定到它，它会停止服务。但是，如果两个活动都被绑定，则服务不会在两者之后停止`onStop()`。我曾经`Log.d`确保所有方法都被调用：`onStop(), stopListenLocation(), onBind()`等等。唯一的事情是`onServiceDisconnected()`永远不会被调用。

我想情况是我的服务启动了另一个系统服务来监听位置。我停止了我的服务，但这个控制 GPS 的系统服务继续工作，尽管`locationManager.removeUpdates(locationListener);`. 也许我的建议有误。

如何在两个活动都停止的情况下停止 GPS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:29:10.023

BIND_AUTO_CREATE 并不一定意味着服务将在没有连接时自行终止，它只是意味着如果系统需要资源，它是第一件事。如果系统没有资源匮乏，它将让您的服务继续运行，因为如果您的活动再次需要该服务，那么绑定到现有实例比从头开始创建它在时间上更便宜。

简而言之，它会继续“运行”，但不要担心——它不会消耗其他地方需要的任何东西。

编辑：另请注意，仅仅因为您未绑定服务并不意味着它将中断服务正在异步处理的任何正在运行的处理任务。所发生的只是你告诉操作系统你不再对结果感兴趣了。您**必须**在与服务断开连接之前明确停止任何正在运行的任务，否则该任务将继续消耗 CPU 时间

# scala - Can a Scala script reference other uncompiled scala code in the same directory?

> ID：10010779
> 
> 赞同：13
> 
> 时间：2012-04-04T12:08:29.667
> 
> 标签：scala, classpath

If I have two separate uncompiled scala files in the same directory as:

```
// hello.scala
object hello {
  def world() = println("hello world")
} 
```

and:

```
// do.scala
hello.world() 
```

I get an error when running do.scala:

```
$ scala do.scala
error: not found: value hello 
```

Instead I have to compile the hello.scala file first and put it on the classpath to get it to work:

```
$ scalac hello.scala
$ scala -cp hello do.scala
hello world 
```

Is there a way to get one script to call the other uncompiled scala file using the right use of import, package, classpath, the scala command line tool or something else?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T12:59:05.353

也许不完全是您正在寻找的东西，但您可以从 Scala REPL shell 中完成

```
:load hello.scala
:load do.scala 
```

达到相同的结果：

```
$ scala
Welcome to Scala version 2.9.1 (Java HotSpot(TM) Server VM, Java 1.6.0_26).
Type in expressions to have them evaluated.
Type :help for more information.

scala> :load hello.scala
Loading hello.scala...
defined module hello

scala> :load do.scala
Loading do.scala...
hello world

scala> 
```

如果您想要一些非交互式的脚本

```
$ cat <<EOF | scala
:load hello.scala
:load do.scala
EOF 
```

也可以。

用于`:help`REPL shell 可以做的更有趣的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:16:37.050

查看动态编译/嵌入编译器。Twitter 的[util-eval](https://github.com/twitter/util)就是这样一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-06T19:45:19.710

你可以把

```
:load /path/file 
```

在您要加载的文件的第一行。

# mysql - 当我需要相同的查询但顺序不同时，mysql如何节省时间

> ID：10010782
> 
> 赞同：1
> 
> 时间：2012-04-04T12:08:42.817
> 
> 标签：mysql

我有两个查询，但第一个是 ORDER BY country DESC，第二个是相同的，但 ORDER BY people ASC。（这些查询仅作为示例 - 我的查询非常复杂且耗时）。当我得到相同的结果但只有不同的排序时，如何节省时间并且不运行两次查询？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:12:10.293

对需要进行排序的列进行索引是优化的一个步骤

# tfs - TFS 对链接到评论的工作项更改的警报

> ID：10010786
> 
> 赞同：0
> 
> 时间：2012-04-04T12:08:59.167
> 
> 标签：tfs, linked-list, alert, review, workitem

**TFS 2010 中是否可以在对链接**到审阅工作项的工作项进行更改时创建警报？我希望将开发人员对与审核工作项链接到的基础工作项所做的任何更改通知审阅者。我们在 VS 2008 上运行 TFS 2010。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T00:48:13.310

不可能使用任何开箱即用的工具。您可以使用 TFS Power Tools 创建自定义工作项警报，但用于过滤警报的查询是平面查询，您无法对其父项进行任何处理。

如果您真的想这样做，您可以创建自己的实用程序。它必须订阅工作项更改事件，并为每个事件检查链接的工作项以查看更改的工作项是否链接到审查项。如果是这样，您可以采取任何您想提醒人们发生某事的操作，但“警报”将来自您的实用程序，而不是 TFS。

# php - Symfony 2 链接到当前页面

> ID：10010789
> 
> 赞同：2
> 
> 时间：2012-04-04T12:09:16.810
> 
> 标签：php, symfony, twig, routes

如何在我的模板中创建指向当前的链接？

我想创建一个语言切换器，它应该链接到各种语言的当前页面，因此所有参数都应该与语言环境相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T15:25:14.603

我最终为此推出了自己的功能。我虽然起初它被包含在某个地方，`FrameworkBundle`但没有找到任何关于它的东西。这是我采取的步骤。

起初，我创建了一个 Twig 扩展函数，该函数将输出与用户当前正在访问的路径相同的路径（包括参数和查询字符串）。我把这一步留给了你。如果您还不知道如何创建 Twig 扩展，您可以从 Symfony2 上的一个很好的教程中查看[此链接，以了解如何创建 Twig 扩展。](http://tutorial.symblog.co.uk/docs/customising-the-view-more-with-twig.html#twig-extensions)如果您需要，我可以帮助您。

下一步是创建将切换当前路由的语言环境的函数本身。此函数将需要`Request`和`Router`对象作为依赖项。就我个人而言，我将此功能放在名为`RoutingHelper`service 的专用服务中。然后，我的 Twig 扩展功能会使用此服务。这里是我添加到依赖容器的服务定义：

```
acme.helper.routing:
    class: Application\AcmeBundle\Helper\RoutingHelper
    scope: "request"
    arguments:
        request: "@request"
        router: "@router" 
```

我的服务的构造函数：

```
protected $request;
protected $router;

public function __construct($request, $router)
{
    $this->request = $request;
    $this->router = $router;
} 
```

$locale 参数是要切换到的新语言环境。这里的功能：

```
public function localizeCurrentRoute($locale)
{
    $attributes = $this->request->attributes->all();
    $query = $this->request->query->all();
    $route = $attributes['_route'];

    # This will add query parameters to attributes and filter out attributes starting with _
    $attributes = array_merge($query, $this->filterPrivateKeys($attributes));

    $attributes['_locale'] = $locale;

    return $this->router->generate($route, $attributes);
} 
```

本质上，它完成了其他人迄今为止所做的工作，但它也处理参数和查询字符串。该方法`filterPrivateKeys`将从路由属性中删除私有属性。这些属性是以下划线开头的属性，不应传递回路由生成器。这里是它的定义：

```
private function filterPrivateKeys($attributes)
{
    $filteredAttributes = array();
    foreach ($attributes as $key => $value) {
        if (!empty($key) && $key[0] != '_') {
            $filteredAttributes[$key] = $value;
        }
    }

    return $filteredAttributes;
} 
```

最后，我可以在我的 Twig 视图中创建链接以切换语言环境：

```
{% block language_bar %}
        <a href="{{ localize_route('en') }}"> English </a>
        <a href="{{ localize_route('fr') }}"> Français </a>
{% endblock %} 
```

**编辑**：

这是我的树枝扩展服务定义：

```
acme.twig.extension:
    class: Application\AcmeBundle\Twig\Extension\AcmeExtension
    arguments:
      container: "@service_container"
    tags:
      -  { name: twig.extension } 
```

在树枝扩展功能中，我有这个电话：`$routingHelper = $this->container->get('acme.helper.routing');`

这应该解决发生的范围扩大异常，因为树枝扩展不在请求范围内。

**更新：**

Symfony 2.1 现在可以以比以前更简单的方式拥有一个语言环境切换器。事实上，Symfony 的 2.1 版本引入了一个新的路由参数，使得进行区域切换变得*更加*容易。这里的代码，全部在树枝中

```
{% set route_params = app.request.attributes.get('_route_params') %}

{# merge the query string params if you want to keep them when switching the locale #}
{% set route_params = route_params|merge(app.request.query.all) %}

{# merge the additional params you want to change #}
{% set route_params = route_params|merge({'_locale': 'fr'}) %}

{{ path(app.request.attributes.get('_route'), route_params) }} 
```

它仍然是几行 twig 代码，但可以包含在 Twig 块中以便于重用。来自 Symfony 社区的 stof 的学分，用于上面的代码。

希望这是您正在寻找的。

问候，
马特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:16:32.590

```
<a href="{{ path(app.request.attributes.get('_route')) }}">Current page</a> 
```

类似问题：[语言切换不改变当前页面](https://stackoverflow.com/questions/9677396/language-switching-without-changing-the-current-page)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:35:40.383

```
<a href="{{ path(app.request.get('_route'), {'_locale': 'en'}) }}">English</a> 
```

# c# - 从数据表更新 sql 表

> ID：10010802
> 
> 赞同：0
> 
> 时间：2012-04-04T12:09:56.530
> 
> 标签：c#, sql, insert, sql-update

使用 C# .net 4.0 和 Visual Studio 2010。

我需要使用在我的代码中生成的表来更新服务器上的表。

我很难弄清楚我需要做什么。

我需要更新还是需要创建一个临时表并插入？或完全不同的东西。

```
public void SaveMyWorkI()
{
    DataGridViewRowCollection coll = ParetoGrid.Rows;

    saveTable.Columns.Add("Part", typeof(string));
    saveTable.Columns.Add("Pareto", typeof(string));

    foreach (DataGridViewRow item in coll)
    {
        saveTable.Rows.Add(item.Cells[2].Value, item.Cells[5].Value);
        //saveTable.Rows.Add(item.Cells[5].Value);
    }

    MyErrorGrid.DataSource = saveTable;

    //SqlCommand pgINSERT = new SqlCommand("INSERT or UPDATE", conn);

} 
```

更新将部分内部加入。

如您所见，我刚刚这样做了，现在我的大脑一片空白。不仅如此，这是小程序的最后一个主要部分。

这是我到目前为止所拥有的：

```
foreach (DataGridViewRow item in coll)
        {
            saveTable.Rows.Add(item.Cells[2].Value, item.Cells[5].Value);

            part = item.Cells[2].Value.ToString();
            pareto = item.Cells[5].Value.ToString();

            SqlCommand pgINSERT = new SqlCommand("UPDATE dbo.OldParetoAnalysis SET part = " + part + " , pareto = " + pareto + "", conn);
            pgINSERT.ExecuteReader();
            //saveTable.Rows.Add(item.Cells[5].Value);
        } 
```

我得到的错误是“ `Invalid column name 'BK177'`”，BK177 是我第一行第一列的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:23:50.967

所以基本上你有一个包含数据的 DataTable 并且你想在数据库中插入它的所有内容？

您没有说您使用的是哪个版本的 SQL Server，但如果您使用的是 2008，则有一个表值参数类型，您可以使用它来将整个表发送到一个过程。然后你可以在 proc 上阅读这个表并做任何你需要做的事情。

参考资料：http: [//msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

[http://msdn.microsoft.com/en-us/library/bb675163.aspx](http://msdn.microsoft.com/en-us/library/bb675163.aspx)

[http://blog.sqlauthority.com/2008/08/31/sql-server-table-valued-parameters-in-sql-server-2008/](http://blog.sqlauthority.com/2008/08/31/sql-server-table-valued-parameters-in-sql-server-2008/)

# java-me - 来自 IP 摄像机的 RTSP 实时流式传输

> ID：10010807
> 
> 赞同：4
> 
> 时间：2012-04-04T12:10:28.033
> 
> 标签：java-me, nokia, rtsp, live-streaming, ip-camera

是否可以使用 RTSP 查看 IP 摄像机的实时流？

示例 URL：rtsp://public ip:554/1363e66e.mp4

编码是 320 x 240 分辨率的 mp4 h.264 基线配置文件。

[我在这里](http://www.developer.nokia.com/Community/Wiki/How_to_play_video_streaming_in_Java_ME)关注了 Wiki 链接。但我得到错误：预取错误-2

当我尝试在诺基亚 e72 上使用真实播放器播放时，我收到错误消息：“常规：系统错误”。

请让我知道我能做些什么。

Ovi 商店也没有可以播放流的视频播放器，但我可以在桌面上的 VLC 上播放流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:42:18.840

如果您在 Ovi 商店中没有 VLC 播放器，您可以使用 ReaPlayer 进行流式传输。查看您的 IP 摄像机支持的端口地址范围。尝试 1024 - 2000 的范围。RTSP 支持 VLC、Quicktime 和 Real player。使用这些对象中的任何一个，您都可以流式传输它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:18:02.880

所以我认为情况就是这样，

有几种不同的 mp4 容器。标准版不允许您将实时数据包装到 mp4 容器中，因为 mp4 需要在其标头中有一个名为 MDAT 的字段/原子，并且它还包含有关文件及其大小的信息。（在文件之后写入完全编码。）

因此，除非您意识到您无法在 mp4 中流式传输实时内容，除非它是碎片化的 mp4。

当 Windows 8 退出时，Media Foundation 将允许您执行此操作（我从 msdn 论坛获得了英特尔，所以我不知道它的真实性）。我不知道 ffmpeg/Gstreamer 能做什么。同样，如果这是您正在开发的商业产品，您可能会遇到 ffmpeg 的一些许可问题。

看看webrtc。

我猜最好使用 webm 或 ogg/theora，但我不确定 theora 是否可以做你想做的事，这也是我正在做的事情。

请分享你的发现

谢谢。

# sql - SQL Server 代理作业崩溃

> ID：10010811
> 
> 赞同：0
> 
> 时间：2012-04-04T12:10:43.097
> 
> 标签：sql, sql-server-2005, sql-server-agent

运行带有 SQL Server 2005 的 Windows 2003，大约 85-90 个作业每小时运行一次（在不同的时间），为服务器上托管的每个网站生成新的站点地图，以及取消发布的页面。

我在服务器上遇到的问题是，服务器似乎分三个阶段运行，每天早上 8 点到下午 6 点之间运行作业，每天早上 2 点到 3 点左右重新启动服务器。

一旦作业在早上开始，它们将成功运行大约 90 分钟（上午 9.30），大约需要 3-5 秒才能完成作业。

9.30 之后，作业将正确启动，然后卡在执行（使用 100% CPU）。

如果我手动停止作业，服务器会恢复正常，但是作业将根本无法执行，并抛出以下错误。（它们改为每 60 分钟运行一次，而不是几个月前每 15 分钟运行一次，但名称从未更改）

```
Step ID     1
Server      [Server Name]
Job Name        Execute Replicate File For [website] web
Step Name       Vbscript for Replicate File  every 15Minutes
Duration        00:00:00
Sql Severity        0
Sql Message ID      0
Operator Emailed        
Operator Net sent       
Operator Paged      
Retries Attempted       0

Message
Executed as user: [Domain]\[User]. The step did not generate any output. 
The step failed. 
```

有关正在运行的脚本的信息：它是一个 VBScript

```
Dim IEObj 
Set IEObj=CreateObject("InternetExplorer.Application")
IEObj.Navigate "[weblink]/ReplicateFile.asp"
IEObj.visible=false
do Until IEObj.ReadyState=4
loop
IEObj.quit
Set IEObj=Nothing 
```

@mellamokb - 该脚本在常规设置中作为 ActiveX 脚本，而不是 T-SQL 脚本，因此我无法为错误指定输出文件。

注意：我没有在这台服务器或它正在复制的 CMS 上设置任何东西，而且我对数据库的了解相当低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:46:47.883

我的猜测是，您在浏览器中显示的页面 [weblink]/ReplicateFile.asp 至少在一个会话中出错。

编码

```
do Until IEObj.ReadyState=4
loop 
```

will cause significant CPU usage while it is running. And, more importantly, if the browser never gets to ReadyState 4, this code will continue to run forever. Have two of three of these stuck, and you will see 100% CPU usage on your server.

# php - 如何使用 Zend Framework 创建文件夹？

> ID：10010814
> 
> 赞同：1
> 
> 时间：2012-04-04T12:10:48.913
> 
> 标签：php, zend-framework, phpmyadmin, zend-form, zend-studio

例如，今天的日期是`2012-04-04`我想`2012`作为父文件夹，然后`201204`作为子文件夹，然后`20120404`作为子文件夹。喜欢

```
2012/201204/20120404 
```

如何使用 Zend Framework 创建它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:13:52.250

创建文件夹与 Zend Framework 无关！您只需为此使用纯 PHP。

PHP 有这个[`mkdir()`](http://www.php.net/manual/en/function.mkdir.php)功能。

我看到您被列为`Zend_Form`您问题的标签。所以我认为你想创建文件夹来存储你通过表单上传的文件。在这种情况下，您只需在文件传输期间创建所需的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T12:51:42.970

似乎 Zend Framework 并没有真正与文件系统相关的类。

但是，您仍然可以通过使用 Directory 类来使用 OOP。

[http://php.net/manual/en/class.directory.php](http://php.net/manual/en/class.directory.php)

# android - 如何在 listiew 中给出 setonitemclick 侦听器条件

> ID：10010815
> 
> 赞同：0
> 
> 时间：2012-04-04T12:10:51.603
> 
> 标签：android

我正在将菜单代码从 mysql 数据库获取到 android。如果我单击列表视图中的项目并且 codez=1 意味着它导航到另一个页面，否则转到另一个页面

```
 JSONArray json = jArray.getJSONArray("mainmenu");

        final List<String> codez=new ArrayList<String>();
         for ( i = 0; i < json.length(); i++) {

                JSONObject e = json.getJSONObject(i);
                codez.add(e.getString("menucode"));

         }
       list.setOnItemClickListener(new OnItemClickListener() {   

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            System.out.println(codez);
            // TODO Auto-generated method stub
            if(codez.equals("1"))
            {
            Intent intent=new Intent(getApplicationContext(),FoodMenu.class);
            startActivity(intent);
            }else
            {

            }
        }
    }); 
```

它打印所有代码但不导航你能告诉我上述代码的解决方案吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:17:53.040

`codez`是一个`List`，不是一个`String`。因此，当您尝试将其与 进行比较时`"1"`，比较总是会失败。您的意思是选择列表中的一项吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:18:34.750

1.  `codez`是一个数组，所以不要将它与字符串进行比较，而是使用该[`contains`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#contains%28java.lang.Object%29)方法。
2.  如果您希望只有一个代码，请使用字符串变量，而不是列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:20:00.327

更正您的代码

```
 if(codez.contains("1"))
        {
        Intent intent=new Intent(getApplicationContext(),FoodMenu.class);
        startActivity(intent);
        }else
        {

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:06:04.333

使用循环来获取特定情况，例如

```
`for(int i= 0;i<codez.length;i++){
   if(codez[i].equals("1")){
      Intent intent=new Intent(getApplicationContext(),FoodMenu.class);
       startActivity(intent);
   }
}` 
```

希望这会帮助你。

# simulation - OMNeT++：omnetpp.ini 文件中参数的优先级。我创建特定值的方式会导致错误

> ID：10010818
> 
> 赞同：0
> 
> 时间：2012-04-04T12:11:22.440
> 
> 标签：simulation

第 9.3.1 章中的优先级部分告诉我应该先应用特殊情况，然后再应用一般情况。

```
[General]
*.host[0].waitTime = 5ms   # specifics come first
*.host[3].waitTime = 6ms
*.host[*].waitTime = 10ms  # catch-all comes last 
```

我在 omnetpp.ini 文件中有以下几行：

```
**.server[*].tcpApp[0].port = 1000

**.pods[0..1].**.server[*].tcpApp[0].port = 80

**.pods[2..3].**.server[*].tcpApp[0].port = 21 
```

此代码有效，但在检查参数时每个服务器都有 1000，而不是特殊情况 80 和 21。所以我希望它看起来像这样：

```
**.pods[0..1].**.server[*].tcpApp[0].port = 80

**.pods[2..3].**.server[*].tcpApp[0].port = 21

**.server[*].tcpApp[0].port = 1000 
```

然而，这会产生一个错误，其中包括我的服务器所基于的 StandardHost 模块的 TCP 模块中的空指针异常。

在 ned 文件中，参数声明如下：

```
 int port = default(1000); // port number to listen on 
```

留下这个包罗万象的线路也会导致错误。只有在其他两行之上的最后一行才能让模拟运行。

可以在 INET 的 TCPServerHostApp.ned 中找到端口参数的示例。我想为应该在服务器上运行的不同服务分配不同的端口。

你对我有什么建议，正确应用这些参数？我设置参数的方式是否有错误，或者我是否需要在初始化过程中自己设置端口（这对我来说没有意义）？

编辑：业力系统还不允许我回答这个问题，所以这是我的问题的原因：

嗯，问题出在另一个地方。使用 connect(ipaddr, port) 连接新套接字时，我从作业请求消息中得到了错误的端口。

在流量生成模块中，我读取了错误的连接服务器的端口，这导致了错误，因为所使用的端口始终是默认值 = 1000 而不是 80 或 21。

服务器期望 80 或 21，当套接字尝试连接端口 1000 时导致崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:35:56.563

只想在这里添加这个，所以每个人都看到我发现了错误。

嗯，问题出在另一个地方。使用 连接新套接字时`connect(ipaddr, port)`，我从作业请求消息中得到了错误的端口。

在流量生成模块中，我读取了错误的连接服务器的端口，这导致了错误，因为所使用的端口始终是默认端口`(= 1000)`而不是`80 or 21`.

`80 or 21`当套接字尝试连接时，服务器预期会导致崩溃`1000`。

# java - 子类化 DefaultRowSorter 以允许树表排序

> ID：10010819
> 
> 赞同：16
> 
> 时间：2012-04-04T12:11:23.150
> 
> 标签：java, swing, swingx, treetable, jxtreetable

在[这个问题](https://stackoverflow.com/questions/9499533/how-to-make-a-jxtreetable-sort-its-top-elements)中，我询问了如何使 JXTreeTable (SwingX) 对其顶部元素进行排序。

[我查看了mKorbel](https://stackoverflow.com/users/714968/mkorbel)建议的库 ( [aephyr](http://code.google.com/p/aephyr/) )，并尝试将其与 JXTreeTable 结合起来（我通过复制 JXTreeTable 的源代码创建了一个名为 JXSortableTreeTable 的新类）。

到目前为止，我能够实现一种机制来对树表的节点进行排序，即当`convertRowIndexToModel`我的自定义排序器（见下文）被调用时，它返回的索引是正确的。

因此，我有一个看起来像这样的课程：

```
public class TreeTableRowSorter <M extends TreeTableModelAdapter> extends DefaultRowSorter {
    private M treeTableModel; // model
    private List<Integer> indices; // list where each entry is the model index
    private IdentityHashMap<Object, NodeSorter> sorters;

    private class IndicesMapFiller { // class that fills the "map" this.indices
        public void fillIndicesMap(Object node) { // recursive
            // Fills the indices "map"
        }
    }

    @Override
    public int convertRowIndexToModel(int index) {
        return indices.get(index);
    }

    @Override
    public int convertRowIndexToView(int index) {
        return indices.indexOf(index);
    }

    @Override
    public void toggleSortOrder(int columnIndex) {
        sorters.get(treeTableModel.getRoot()).toggleSortOrder(columnIndex);

        super.toggleSortOrder(columnIndex);
    }

    @Override
    public void sort() {
        getRowSorter(treeTableModel.getRoot()).sort(true);

        indices = new ArrayList<Integer>();

        for (int i = 0; i < getViewRowCount(); i++)
            indices.add(-1);

        IndicesMapFiller filler = new IndicesMapFiller(indices);

        filler.fillIndicesMap(treeTableModel.getRoot());

        System.out.println("INDICES: " + indices);
    }

    private class TreeTableRowSorterModelWrapper extends ModelWrapper<M, Integer> {
        private final Object node;
        private final TreeTableRowSorterModelWrapper parent;

        public TreeTableRowSorterModelWrapper(Object node, TreeTableRowSorterModelWrapper parent) {
            this.node = node;
            this.parent = parent;
        }

        @Override
        public M getModel() {
            return treeTableModel;
        }

        @Override
        public int getColumnCount() {
            return (treeTableModel == null) ? 0 : treeTableModel.getColumnCount();
        }

        @Override
        public int getRowCount() {
            // Returns only the number of direct visible children in order for
            // each NodeSorter to only sort its children (and not its children's
            // children)
            int rowCount = treeTableModel.getDirectVisibleChildrenCount(node, getParentPath());

            return rowCount;
        }

        public TreePath getParentPath() {
            Object root = treeTableModel.getRoot();
            if (root == null || node == root)
                return null;

            if (parent.getNode() == root)
                return new TreePath(root);

            return parent.getParentPath().pathByAddingChild(parent);
        }

        @Override
        public Object getValueAt(int row, int column) {
            Object node = treeTableModel.getChild(getNode(), row);
            return treeTableModel.getValue(node, column);
        }

        public Object getNode() {
            return node;
        }
    }

    public class NodeSorter extends DefaultRowSorter<M, Integer> {
        private NodeSorter parent;

        private Map<Object, NodeSorter> children;

        public NodeSorter(Object root) {
            this(null, root);
        }

        public NodeSorter(NodeSorter par, Object node) {
            parent = par;

            TreeTableRowSorterModelWrapper parentWrapper =
                    (parent == null) ? null : (TreeTableRowSorterModelWrapper) parent.getModelWrapper();

            TreeTableRowSorterModelWrapper wrapper =
                    new TreeTableRowSorterModelWrapper(node, parentWrapper);
            setModelWrapper(wrapper);

            children = createChildren();
            if (parent != null)
                setMaxSortKeys(Integer.MAX_VALUE);

            if (node == null)
                return;

            // Create the sorters for all children (even those not yet shown)
            int childCount = getModel().getChildCount(node);

            for (int i = 0; i < childCount; i++) {
                Object childNode = getModel().getChild(node, i);
                getChildSorter(childNode, sorters);
            }
        }

        protected Map<Object, NodeSorter> createChildren() {
            int childCount = getModel().getChildCount(getNode());

            IdentityHashMap<Object, NodeSorter> map = new IdentityHashMap<Object, NodeSorter>(childCount);

            return map;
        }

        public NodeSorter getParent() {
            return parent;
        }

        TreeTableSortController<M> getMaster() {
            return TreeTableSortController.this;
        }

        NodeSorter getChildSorter(Object node, Map<Object, NodeSorter> map) {
            NodeSorter s = children.get(node);
            if (s == null && map != null) {
                s = new NodeSorter(this, node);
                children.put(node, s);
                map.put(node, s);
            }
            return s;
        }

        protected TreeTableRowSorterModelWrapper getTreeTableModelWrapper() {
            return (TreeTableRowSorterModelWrapper) getModelWrapper();
        }

        public Object getNode() {
            return ((TreeTableRowSorterModelWrapper) getModelWrapper()).getNode();
        }

        @Override
        public void toggleSortOrder(int columnIndex) {
            for (NodeSorter childSorter : children.values()) {
                childSorter.toggleSortOrder(columnIndex);
            }

            super.toggleSortOrder(columnIndex);
        }

        private boolean firePathEvent = true;

        void sort(boolean sortChildren) {
            if (!isVisible())
                return;

            firePathEvent = false;

            try {
                super.sort();
            } finally {
                firePathEvent = true;
            }

            if (!sortChildren)
                return;

            for (NodeSorter sorter : children.values())
                sorter.sort(sortChildren);
        }

        private TreePath getPathToRoot() {
            if (parent == null)
                return new TreePath(getNode());
            return parent.getPathToRoot()
                    .pathByAddingChild(getNode());
        }
    } 
```

如果模型数据是这样组织的（模型中每个全局节点的索引显示在最后一列中）：

```
Name       / Date       / File UID | Glob. View Idx | Glob. Model Idx
(Root)
|- Mr. X   / 1996/10/22 / AE123F6D | 0              | 0
|--- File1 / 2012/01/10 / DFC2345Q | 1              | 1
|--- File2 / 2012/01/11 / D321FEC6 | 2              | 2
|- Mrs. Y  / 1975/03/03 / G2GF35EZ | 3              | 3
|--- File3 / 2012/02/29 / 35GERR32 | 4              | 4
|--- File4 / 2012/01/22 / LKJY2342 | 5              | 5
.
.
.
```

如果我对第二列进行排序，我想得到这个输出：

```
Name       / Date       / File UID | Glob. View Idx | Glob. Model Idx
(Root)
|- Mrs. Y  / 1975/03/03 / G2GF35EZ | 0              | 3
|--- File4 / 2012/01/22 / LKJY2342 | 1              | 5
|--- File3 / 2012/02/29 / 35GERR32 | 2              | 4
|- Mr. X   / 1996/10/22 / AE123F6D | 3              | 0
|--- File1 / 2012/01/10 / DFC2345Q | 4              | 1
|--- File2 / 2012/01/11 / D321FEC6 | 5              | 2
.
.
.
```

我**实际**得到的与未排序的版本完全相同，只是 convertRowIndexToModel 的结果是正确的，因为如果我为模型的每一行调用它，我会得到：

```
V -> M
0 -> 3
1 -> 5
2 -> 4
3 -> 0
4 -> 1
5 -> 2
```

因此，我的问题归结为：

当继承 DefaultRowSorter 来实现像 JXTreeTable 这样的树表的排序时，我应该重写哪些方法？由于我无法覆盖 rowSorter（私有）的 viewToModel 或任何修改它的函数（也是私有的），我实现了自己的 V->M 映射创建，并确保在调用我的排序器的 convertRowIndexTo(Model|View) 时使用它。

我觉得像在 JXSortableTreeTable 或自定义排序器中的某处调用转换方法之类的东西丢失了。

非常感谢您的帮助和有见地的评论！

编辑>在对结果进行更多测试之后，它似乎与 JXTreeTable 的分层列有关，因为它在对其他列进行排序时可以完美地工作，因此数据没有更新（我也尝试更改分层列（设置为另一列），前者一旦不再分层就可以工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:34:10.830

基于我检查过的 aephyr 库，如果您像这样修改节点排序器，它应该只对第一个元素进行排序：

```
public class NodeSorter extends DefaultRowSorter<M, Integer> {

     [.....]

            private Comparator noopComparator = new Comparator(){
                @Override
                public int compare(Object o1, Object o2) {
                    return 0;
                }
            };

    @Override
    public Comparator<?> getComparator(int column) {
                 // if it has no parent then compare --> sort
                 // if it has a parent then do nothing
                if(parent != null)
                    return noopComparator;
                Comparator<?> c = super.getComparator(column);
                return c != null ? c : getMaster().getComparator(column);
    }
   [....] 
```

# wpf - 如何在 WPF mediaElement 中播放音频文件而不等待它完全加载文件？

> ID：10010828
> 
> 赞同：1
> 
> 时间：2012-04-04T12:11:53.983
> 
> 标签：wpf, wav, mediaelement

我有几个想要通过 WPF MediaElement 播放的大型 WAV 文件（播放时间约为 5-10 分钟）。但是，当我将源设置为这些文件之一并调用 Play 方法时，MediaElement 似乎要等到文件完全加载后才开始播放。任何人都知道在加载文件的其余部分时让它播放的方法。或者建议另一种方式来播放这些 WAV 文件，而不是使用 MediaElement？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T13:52:06.333

将 mediaElement 控件添加到您的窗口，然后添加以下代码以播放音频文件

```
mediaElement1.LoadedBehavior = MediaState.Manual;
                mediaElement1.Source = new Uri("C://test.wma", UriKind.RelativeOrAbsolute);
                mediaElement1.Play(); 
```

这段代码对我有用。

# android - 如何将 Soap 对象解析为清晰的数据？

> ID：10010836
> 
> 赞同：0
> 
> 时间：2012-04-04T12:12:12.477
> 
> 标签：android, web-services, ksoap2

这是肥皂对象，我正在尝试按字段组织数据

anyType{schema=anyType{element=anyType{complexType=anyType{choice=anyType{element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; }; }; }; }; }; }; }; diffgram=anyType{NewDataSet=anyType{Table=anyType{USUARIO_CODIGO=401; USUARIO_NOME=tc3; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:37:19.89-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:37:19.89-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=402; USUARIO_NOME=tc4; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:38:07.753-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:38:07.753-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=403; USUARIO_NOME=(null); USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:01.627-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:01.627-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=404; USUARIO_NOME=tc5; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405; USUARIO_DATA_CADASTRO=2012-04-02T13:38:07.753-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:38:07.753-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=403; USUARIO_NOME=(null); USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:01.627-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:01.627-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=404; USUARIO_NOME=tc5; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405; USUARIO_DATA_CADASTRO=2012-04-02T13:38:07.753-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:38:07.753-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=403; USUARIO_NOME=(null); USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:01.627-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:01.627-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=404; USUARIO_NOME=tc5; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405; 753-03:00；USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=403; USUARIO_NOME=(null); USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:01.627-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:01.627-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=404; USUARIO_NOME=tc5; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405; 753-03:00；USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=403; USUARIO_NOME=(null); USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:01.627-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:01.627-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=404; USUARIO_NOME=tc5; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:01.627-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:01.627-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=404; USUARIO_NOME=tc5; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:01.627-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:01.627-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=404; USUARIO_NOME=tc5; USUARIO_NUMERO_PARTICIPANTES=1；USUARIO_DESCRICAO=anyType{}; USUARIO_LATITUDE=0; USUARIO_LONGITUDE=0; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405; USUARIO_FOTO_PERFIL=anyType{}; USUARIO_DATA_CADASTRO=2012-04-02T13:50:52-03:00; USUARIO_DATA_ATUALIZACAO=2012-04-02T13:50:52-03:00; USUARIO_ATIVO=A; }; 表=anyType{USUARIO_CODIGO=405;

# wpf - 禁用控件时如何将绑定值更新为其类型的默认值？

> ID：10010838
> 
> 赞同：0
> 
> 时间：2012-04-04T12:12:23.753
> 
> 标签：wpf, data-binding

我有一些与搜索模型的属性绑定的控件。未选中无线电时，将禁用所有输入控件。当控件被禁用而不更改当前控件的任何值时，我需要将搜索模型的绑定值设置为默认值（其类型）。

![在此处输入图像描述](../Images/21e3d8923246d1e6c857eae57e070500.png)

**谢谢，**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:15:37.523

您必须将每个 TextBox 的 IsEnable 属性与 ViewModel 中的属性绑定，然后当它变为 false 时，您可以将 value 属性设置为其默认值。

# perl - DBIx Class Row 虚拟/非持久列

> ID：10010839
> 
> 赞同：3
> 
> 时间：2012-04-04T12:12:25.697
> 
> 标签：perl, dbix-class, rose-db-object

是否可以将列添加到虚拟的 DBIx::Class::Row 对象，因为它们没有保存到数据库中？我正在寻找像 Rose::DB::Object 通过其非持久列 [http://search.cpan.org/dist/Rose-DB-Object/lib/Rose/DB/Object/Metadata.pm# nonpersistent_columns](http://search.cpan.org/dist/Rose-DB-Object/lib/Rose/DB/Object/Metadata.pm#nonpersistent_columns)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:15:56.257

您是否尝试过向 Schema 中的 Result 类添加方法？这可能会让你到同一个地方。您添加的方法不能在 ->search 中使用，也不会在 ->get_columns 中返回，但根据您的用例，可能就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T18:35:27.573

我只需要再次查找它，因为我需要它。您可能已经有了解决方案，但对于其他来这里的人来说：[https ://metacpan.org/module/DBIx::Class::Manual::FAQ#Misc](https://metacpan.org/module/DBIx::Class::Manual::FAQ#Misc)

基本上要么使用 Moose 并创建一个属性，要么将这样的内容添加到您的架构中：

```
__PACKAGE__->mk_group_accessors('simple' => qw/non_column_data/); # must use simple group 
```

# silverlight - Silverlight 中不提供 Encoding.ASCII 是否有替代方案？

> ID：10010840
> 
> 赞同：2
> 
> 时间：2012-04-04T12:12:29.737
> 
> 标签：silverlight, windows-phone-7, encoding, ascii

对于 Windows 窗体应用程序，我有以下代码行：

```
return Encoding.ASCII.GetBytes(chars.ToArray()); 
```

这条线运行良好，但今天我在 Windows Phone/Silverlight 框架上尝试了我的代码，并且：

```
Encoding.ASCII 
```

那里不存在图书馆。除了 Silverlight 库之外，是否有任何（简单）方法可以做同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:15:38.300

尝试使用 Encoding.UTF8 - Silverlight 仅是 unicode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:25:40.673

可能使用 Encoding.UTF8 会解决您的问题，但您始终可以使用[Silverlight 编码生成器](http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator)并获得您想要的任何编码！

# c# - c# url编码不匹配编码

> ID：10010842
> 
> 赞同：0
> 
> 时间：2012-04-04T12:12:35.143
> 
> 标签：c#, encoding

我有一个很大的 url，我正在使用 System.Web.HttpUtility.UrlEncode 进行编码。当我对其进行编码时，它不像我拥有的​​工作示例那样对其进行编码。我不确定问题是什么，可能是不同的字符类型或其他东西，我举了一个例子来说明应该创建的内容和实际创建的内容。感谢您的帮助，我迷路了。

工作示例（看看这个有 Did%252Citag%252 而另一个没有）

22%7Chttp%3A%2F%2Fv17.nonxt1.googlevideo.com%2Fvideoplayback%3Fid%3D0b608733ae5257c3%26itag%3D22%26source%3Dpicasa%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1333533157%26sparams% 252Citag％252Csource％252Cip％252Cipbits％252Cexpire％26signature％3D8AD67D74F34FBAFBBA87616C0AED4A336DF0982A.129E2B5E648F8A2F35A34F312AC5C3C957A1C40A％26key％3Dlh1％2C35％7Chttp％3A％2F％2Fv18.nonxt3.googlevideo.com％2Fvideoplayback％3Fid％3D0b608733ae5257c3％26itag％3D35％26source％3Dpicasa％ 26ip％3D0.0.0.0％26ipbits％3D0％26expire％3D1333533157％26sparams％3Did％252Citag％252Csource％252Cip％252Cipbits％252Cexpire％26signature％3D7A58A11994C710872E945D0EAA6E43B6BFB8A648.B9C1D9FB377E1A49EBF3DC6C166C0B6E3E94EC24％26key％3Dlh1％2C34％7Chttp％3A％2F％2Fv6。 nonxt1.googlevideo.com%2Fvideoplayback%3Fid%3D0b608733ae5257c3%26itag%3D34%26source%3Dpicasa%26ip%3D0.0.0。0％26ipbits％3D0％26expire％3D1333533157％26sparams％3Did％252Citag％252Csource％252Cip％252Cipbits％252Cexpire％26signature％3D260B10850A3448C849B8B8F1F2AF5E31244E71BC.6D7420FD66B85D40982BFB2C847EDB46021C63AE％26key％3Dlh1％2C5％7Chttp％3A％2F％2Fv23.nonxt7.googlevideo.com％ 2Fvideoplayback％3Fid％3D0b608733ae5257c3％26itag％3D5％26source％3Dpicasa％26ip％3D0.0.0.0％26ipbits％3D0％26expire％3D1333533157％26sparams％3Did％252Citag％252Csource％252Cip％252Cipbits％252Cexpire％26signature％3D9894DCDA7D2634EE0006CE0F6E0E29ABF7A8F253.18765D7CD7BDE80ED1A47DC8EC559C3E05C92F56％ 26键%3Dlh10％26iPbits％3D0％26 expight％3D1333533157％26sparams％3Did％252citag％252csource％252cip％252cipbits％252cexpire％26signature％3d9894dcda7d2634ee0006ce0f253.18765d7cd7bde80ed1a47d2c559c3405c92f56％26key％3dlh10％26iPbits％3D0％26 expight％3D1333533157％26sparams％3Did％252citag％252csource％252cip％252cipbits％252cexpire％26signature％3d9894dcda7d2634ee0006ce0f253.18765d7cd7bde80ed1a47d2c559c3405c92f56％26key％3dlh1

这是我正在创建的示例（请参阅此编码为 did%2citag%2）

5%7chttp%3a%2f%2fv23.nonxt7.googlevideo.com%2fvideoplayback%3fid%3d0b608733ae5257c3%26itag%3d5%26source%3dpicasa%26ip%3d0.0.0.0%26ipbits%3d0%26expire%3d1333562840%26sparams%3d 2citag％2csource％2cip％2cipbits％2cexpire％26signature％3dC0E2993011931D9F5FCAFAF54E821415F6042DDD.477CD23B021563A6DE30E858E35C21046E0B0BA6％26key％3dlh1％2c18％7chttp％3A％2F％2fv11.nonxt4.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3D18％26source％3dpicasa％ 26ip％3d0.0.0.0％26ipbits％3D0％26expire％3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3d696501A8ACBA0E1246173B040E0FB81DA8EBCDC7.944BA6C08C630EFFC2456D66BAD12376D7E377B2％26key％3dlh1％2c34％7chttp％3A％2F％2fv6。 nonxt1.googlevideo.com%2fvideoplayback%3fid%3d0b608733ae5257c3%26itag%3d34%26source%3dpicasa%26ip%3d0.0.0。0％26ipbits％3D0％26expire％3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3dDDD3D9081F7F2FF462D17CFAE6CAB72AEB86DEA9.3275E0EE8921EF728132035FC94BEF5926A0B7C1％26key％3dlh1％2C35％7chttp％3A％2F％2fv18.nonxt3.googlevideo.com％ 2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3d35％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3d7826E7470450F9F473BC7A845967EF3AC655CFB.3850F952F5D68151D325CD754C581CD66B0BC4D7％ 26key%3dlh1%2c22%7chttp%3a%2f%2fv17.nonxt1.googlevideo.com%2fvideoplayback%3fid%3d0b608733ae5257c3%26itag%3d22%26source%3dpicasa%26ip%3d0.0.0.0%26ipbits%3d0%262840%3d1333% 26sparams%3did%2citag%2csource%2cip%2cipbits%2cexpire%26signature%3d32FAAE6AE74B22BFB3DBD4300CEEDBC1A12A9ED4.8014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%3dlh18014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%3dlh18014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%3dlh18014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%3dlh18014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%3dlh13275E0EE8921EF728132035FC94BEF5926A0B7C1％26key％3dlh1％2C35％7chttp％3A％2F％2fv18.nonxt3.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3d35％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％ 3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3d7826E7470450F9F473BC7A845967EF3AC655CFB.3850F952F5D68151D325CD754C581CD66B0BC4D7％26key％3dlh1％2C22％7chttp％3A％2F％2fv17.nonxt1.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％ 3D22％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3d32FAAE6AE74B22BFB3DBD4300CEEDBC1A12A9ED4.8014678ABB1AEE93FB4B1C36E2C74C89102DC112％26key％3dlh13275E0EE8921EF728132035FC94BEF5926A0B7C1％26key％3dlh1％2C35％7chttp％3A％2F％2fv18.nonxt3.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3d35％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％ 3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3d7826E7470450F9F473BC7A845967EF3AC655CFB.3850F952F5D68151D325CD754C581CD66B0BC4D7％26key％3dlh1％2C22％7chttp％3A％2F％2fv17.nonxt1.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％ 3D22％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3d32FAAE6AE74B22BFB3DBD4300CEEDBC1A12A9ED4.8014678ABB1AEE93FB4B1C36E2C74C89102DC112％26key％3dlh1COM％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3d35％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3d7826E7470450F9F473BC7A845967EF3AC655CFB。 3850F952F5D68151D325CD754C581CD66B0BC4D7％26key％3dlh1％2C22％7chttp％3A％2F％2fv17.nonxt1.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3D22％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％ 3d1333562840%26sparams%3did%2citag%2csource%2cip%2cipbits%2cexpire%26signature%3d32FAAE6AE74B22BFB3DBD4300CEEDBC1A12A9ED4.8014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%3COM％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3d35％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％3d1333562840％26sparams％3did％2citag％2csource％2cip％2cipbits％2cexpire％26signature％3d7826E7470450F9F473BC7A845967EF3AC655CFB。 3850F952F5D68151D325CD754C581CD66B0BC4D7％26key％3dlh1％2C22％7chttp％3A％2F％2fv17.nonxt1.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3D22％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％ 3d1333562840%26sparams%3did%2citag%2csource%2cip%2cipbits%2cexpire%26signature%3d32FAAE6AE74B22BFB3DBD4300CEEDBC1A12A9ED4.8014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%33850F952F5D68151D325CD754C581CD66B0BC4D7％26key％3dlh1％2C22％7chttp％3A％2F％2fv17.nonxt1.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3D22％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％ 3d1333562840%26sparams%3did%2citag%2csource%2cip%2cipbits%2cexpire%26signature%3d32FAAE6AE74B22BFB3DBD4300CEEDBC1A12A9ED4.8014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%33850F952F5D68151D325CD754C581CD66B0BC4D7％26key％3dlh1％2C22％7chttp％3A％2F％2fv17.nonxt1.googlevideo.com％2fvideoplayback％3fid％3d0b608733ae5257c3％26itag％3D22％26source％3dpicasa％26ip％3d0.0.0.0％26ipbits％3D0％26expire％ 3d1333562840%26sparams%3did%2citag%2csource%2cip%2cipbits%2cexpire%26signature%3d32FAAE6AE74B22BFB3DBD4300CEEDBC1A12A9ED4.8014678ABB1AEE93FB4B1C36E2C74C89102DC112%26key%3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:32:10.147

看起来在第一个示例中，URL 是双重编码的。这意味着如果您查看解码的 sparams 参数，它表示为

> sparams=id%2Citag%2Csource%2Cip%2Cipbits%2Cexpire

在你的第二个例子中

> sparams=id、itag、来源、ip、ipbits、过期

因此，第一个示例中发生的情况是，他们首先对值执行 UrlEncode。使用此值构造 URL，然后对构造的 URL 执行 UrlEncode。

**更新：**如果您的查询字符串的值包含需要进行 UrlEncoded 的值（例如，& 空格？等），这是要遵循的一般做法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:19:20.437

根据[w3c](http://www.w3schools.com/tags/ref_urlencode.asp)标准，您的示例很好。没有 %252 符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:22:49.423

我不确定您到底在期待什么，但是当您将这些字符串发送到[URL Decoder](http://meyerweb.com/eric/tools/dencoder/)时，您会得到以下结果：

**字符串 1**

```
22|http://v17.nonxt1.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=22&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333533157&sparams=id%2Citag%2Csource%2Cip%2Cipbits%2Cexpire&signature=8AD67D74F34FBAFBBA87616C0AED4A336DF0982A.129E2B5E648F8A2F35A34F312AC5C3C957A1C40A&key=lh1,35|http://v18.nonxt3.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=35&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333533157&sparams=id%2Citag%2Csource%2Cip%2Cipbits%2Cexpire&signature=7A58A11994C710872E945D0EAA6E43B6BFB8A648.B9C1D9FB377E1A49EBF3DC6C166C0B6E3E94EC24&key=lh1,34|http://v6.nonxt1.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=34&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333533157&sparams=id%2Citag%2Csource%2Cip%2Cipbits%2Cexpire&signature=260B10850A3448C849B8B8F1F2AF5E31244E71BC.6D7420FD66B85D40982BFB2C847EDB46021C63AE&key=lh1,5|http://v23.nonxt7.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=5&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333533157&sparams=id%2Citag%2Csource%2Cip%2Cipbits%2Cexpire&signature=9894DCDA7D2634EE0006CE0F6E0E29ABF7A8F253.18765D7CD7BDE80ED1A47DC8EC559C3E05C92F56&key=lh1 
```

**字符串 2**

```
5|http://v23.nonxt7.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=5&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333562840&sparams=id,itag,source,ip,ipbits,expire&signature=C0E2993011931D9F5FCAFAF54E821415F6042DDD.477CD23B021563A6DE30E858E35C21046E0B0BA6&key=lh1,18|http://v11.nonxt4.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=18&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333562840&sparams=id,itag,source,ip,ipbits,expire&signature=696501A8ACBA0E1246173B040E0FB81DA8EBCDC7.944BA6C08C630EFFC2456D66BAD12376D7E377B2&key=lh1,34|http://v6.nonxt1.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=34&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333562840&sparams=id,itag,source,ip,ipbits,expire&signature=DDD3D9081F7F2FF462D17CFAE6CAB72AEB86DEA9.3275E0EE8921EF728132035FC94BEF5926A0B7C1&key=lh1,35|http://v18.nonxt3.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=35&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333562840&sparams=id,itag,source,ip,ipbits,expire&signature=7826E7470450F9F473BC7A845967EF3AC655CFB.3850F952F5D68151D325CD754C581CD66B0BC4D7&key=lh1,22|http://v17.nonxt1.googlevideo.com/videoplayback?id=0b608733ae5257c3&itag=22&source=picasa&ip=0.0.0.0&ipbits=0&expire=1333562840&sparams=id,itag,source,ip,ipbits,expire&signature=32FAAE6AE74B22BFB3DBD4300CEEDBC1A12A9ED4.8014678ABB1AEE93FB4B1C36E2C74C89102DC112&key=lh1 
```

你的 URLS 完全不同，而且它们还有一个我不确定你想要的前导字符。

# email - PHP Mail 显示 SMTP 错误

> ID：10010843
> 
> 赞同：-4
> 
> 时间：2012-04-04T12:12:35.413
> 
> 标签：email, php

我在 php 中尝试了许多邮件脚本，但我的服务器总是显示 SMTP 错误。我正在使用 PHP5。请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:28:15.540

I think you are trying your code on local machine, try upload it to someserver than try ...

# java - 如何从 Java 中卸载 Linux 文件夹

> ID：10010852
> 
> 赞同：3
> 
> 时间：2012-04-04T12:13:19.427
> 
> 标签：java, linux, shell

我试过：

```
final ProcessBuilder pb = new ProcessBuilder("umount", "foldername");
final Process p = pb.start(); 
```

投掷

> umount: /home/user/foldername 不在 fstab 中（而且你不是 root）

我试过

```
final ProcessBuilder pb = new ProcessBuilder("sudo","umount", "foldername");
final Process p = pb.start(); 
```

投掷

> sudo：对不起，你必须有一个 tty 才能运行 sudo

我获得了 root 密码，但无法将其提供给`ProcessBuilder`. 我也无法编辑`fstab`（或任何需要编辑的内容），因为它是从保存的操作系统映像在远程服务器上启动的远程虚拟机。

我只想以root身份运行命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:03:23.197

你有几个选择：

1.  使控制终端可用，`sudo`以便用户可以在那里输入密码。

    ```
    pb = new ProcessBuilder("sh", "-c", "sudo umount foldername </dev/tty");
    Process p = pb.start();
    p.waitFor(); 
    ```

2.  `gksudo`使用而不是执行程序`sudo`。使用 GTK+ 的系统通常附带该`gksu`软件包，作为 和 的图形`su`界面`sudo`。

    ```
    pb = new ProcessBuilder("gksudo","umount", "foldername"); 
    ```

3.  打开终端模拟器窗口`sudo`：

    ```
    pb = new ProcessBuilder("xterm","-e","sudo","umount","foldername"); 
    ```

# php - 使用 foreach 循环获取 stdClass 对象中的计数值

> ID：10010854
> 
> 赞同：-2
> 
> 时间：2012-04-04T12:13:37.140
> 
> 标签：php, arrays

```
Array ( [0] => stdClass Object ( [count] => 3  ) ) 
Array ( [0] => stdClass Object ( [count] => 1 ) ) 
Array ( [0] => stdClass Object ( [count] => 2 ) )
Array ( [0] => stdClass Object ( [count] => 0 ) )
Array ( [0] => stdClass Object ( [count] => 0 )  ) 
Array ( [0] => stdClass Object ( [count] => 0 )  )
Array ( [0] => stdClass Object ( [count] => 0 )  )
Array ( [0] => stdClass Object ( [count] => 3 )  ) 
```

我只想打印 3 1 2 0 0 0 0 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:17:44.750

```
foreach($data as $array)
{
   echo $array[0]->count;
} 
```

# windows-7 - 在 Windows 7 64Bit 下开发 spotify 应用程序 - 应用程序密钥

> ID：10010856
> 
> 赞同：1
> 
> 时间：2012-04-04T12:13:43.543
> 
> 标签：windows-7, spotify

我现在有一个完美的开发者帐号，将 32 位文件 libspotify.dll 复制到 SYSWOW64。我的 spotify 客户端中有开发人员菜单。当我尝试打开检查器时，会出现一条蓝色消息：“选择您要检查的应用程序”。我尝试检查一个随机应用程序，但没有任何反应。要开发我自己的，或尝试我需要应用程序密钥的示例。但表格似乎没有做任何事情：[https ://developer.spotify.com/technologies/libspotify/#application-keys](https://developer.spotify.com/technologies/libspotify/#application-keys)

我错过了什么吗？

Spotify 客户端版本：0.8.2.610.g090a06f8

控制台不显示任何内容。控制台热键：`CTRL`+ `ALT`+`HOME`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:45:51.633

libSpotify 用于将 Spotify 技术嵌入到您自己的独立应用程序中。如果您正在开发 HTML 应用程序以进入 Spotify 客户端，则不需要 libSpotify 或 libSpotify 应用程序密钥。

至于检查应用程序，您只能检查自己的应用程序。要开始使用，请查看此处的文档[和](https://developer.spotify.com/technologies/apps/tutorial/)[此处](https://developer.spotify.com/technologies/apps/)的教程。

# php - 是否可以在 PHP 代码中跟踪浏览器历史记录？

> ID：10010858
> 
> 赞同：0
> 
> 时间：2012-04-04T12:13:49.703
> 
> 标签：php, browser-history

我想知道是否可以在 php 页面上获取浏览器历史记录？假设如果之前访问过该浏览器上的特定链接，我想显示一个 php 页面，否则将显示一个空白页面。有可能这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:20:51.333

因为它是你自己的站点，你可以存储一个会话变量来确认他们去那里，做类似的事情

```
session_start();
$SESSION["VisitedMySpecialPage"]=time(); 
```

然后在检查器页面中

```
session_start();
if (isset($SESSION["VisitedMySpecialPage"]))
{
 // check here it was within say the last hour..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:16:53.430

您可以跟踪在您自己的域上访问了哪些页面，但您无法查看他访问了哪些其他域。您可以查看referer 标头以查看他来自哪个站点，但这只是1 个站点并且不是很可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:17:42.770

好吧，前段时间有解决这个问题的方法，我不知道哪个浏览器仍然可以做到：

*   用 href attr放置`<a>`标签以链接您感兴趣的内容
*   检查`<a>`节点（通过`JS`），如果该链接得到`:visited`伪类发送
*   通过ajax将结果发送到服务器

# javascript - 从 id 中删除一个整数

> ID：10010862
> 
> 赞同：2
> 
> 时间：2012-04-04T12:14:02.510
> 
> 标签：javascript, jquery, html

我有一个身份证：

```
div id ="untitled-region-5" 
```

我想抓住那个 id 并从中删除 4，然后用新的 id 做一些代码。

到目前为止，我正在尝试通过阅读有关如何执行此操作的类似内容：

```
var n = $(this).attr('id').match(/untitled-region-(\d+)/)[1]; 
```

但我不知道如何从整数中删除 4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:16:26.173

它仍然是一个字符串，这就是为什么你不能轻易地在数学中使用它。某些操作有效，因为它们会将值隐式转换为数字。

用于`parseInt`显式进行转换，以便您知道自己拥有什么：

```
var n = parseInt($(this).attr('id').match(/\d+$/)[0]);
n -= 4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:18:53.250

```
<div id ="untitled-region-5">​ 
```

只需取 n 并减去 4

```
var n = $('div').attr('id').match(/untitled-region-(\d+)/)[1];
var newNumber = n-4;
$('div').attr('id','untitled-region-'+newNumber); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:25:26.703

```
var id = $("div").attr("id");
var n = parseInt(id.substring(id.lastIndexOf("-") + 1), 10); 
```

我也做了一个 jsFiddle：http: [//jsfiddle.net/YEWQQ/](http://jsfiddle.net/YEWQQ/)

# android - 使用 ndk jni 为 curl 构建错误

> ID：10010864
> 
> 赞同：7
> 
> 时间：2012-04-04T12:14:06.830
> 
> 标签：android, curl, android-ndk, java-native-interface

我被错误困在 curl 的编译中：

```
$ndk-build
Android NDK: Building for application 'curl' 
Android NDK: Trying to define local module 'curl' in sources/curl//jni/Android.mk. 
Android NDK: But this module was already defined by sources/curl//jni/Android.mk. 
build/core/build-module.mk:34: *** Android NDK: Aborting. . Stop. 
```

任何人都可以提供您用于编译依赖项的过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T05:05:40.497

尝试将预编译的静态库包含到 NDK 项目中时，我遇到了类似的错误。我通过编辑我的项目的 Android.mk 文件来修复它，将该行移动`$(call import-module,<MY_MODULE_NAME>)`到文件的最末尾（在 之后`include $(BUILD_SHARED_LIBRARY)`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T08:58:02.550

在我的例子中，我添加了一个需要 gnustl_shared 的共享库，所以我将它添加到我的 Android.mk 文件中：

```
include $(CLEAR_VARS)
LOCAL_MODULE := libgnustl_shared
LOCAL_MODULE_PATH := $(TARGET_OUT_OPTIONAL_STATIC_LIBRARY)
LOCAL_SRC_FILES := $(LOCAL_PATH)/../../native_libs/$(TARGET_ARCH)/libgnustl_shared.so
include $(PREBUILT_SHARED_LIBRARY) 
```

我遇到的冲突是这样的：

```
Android NDK：尝试在 jni/Android.mk 中定义本地模块“gnustl_shared”。
Android NDK：但是这个模块已经被 c:/android-ndk-r10d/sources/cxx-stl/gnu-libstdc++/Android.mk 定义了。
```

原因是因为**我已经将它用作静态库**。这是在 Application.mk 中：

```
APP_STL := gnustl_static
```

解决方案是将其更改为`APP_STL := gnustl_shared`，然后`LOCAL_MODULE := libgnustl_shared`从 Android.mk 中删除该部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T08:53:02.773

我遇到了同样的问题，因为我使用了错误的命令。

在 Android.mk 目录中，我使用了“ `ndk-build -f Android.mk`”，这是导致问题的原因
`Android NDK: Trying to define local module 'SRC' in Android.mk.`
`Android NDK: But this module was already defined by ...`

但是当我输入“ `ndk-build`”时，构建成功！

# ssas - 使用 XMLA 或 DMV 确定 SSAS 盒的硬件规格和操作系统版本？

> ID：10010865
> 
> 赞同：1
> 
> 时间：2012-04-04T12:14:06.990
> 
> 标签：ssas, xmla, dmv

在我目前的项目中，SSAS 在独立服务器上运行，我想知道硬件规格（CPU、内存等）和操作系统版本。

问题是我无权访问操作系统（甚至无法远程访问 perfmon 或 eventvwr），而 DBA 迄今为止忽略了我的请求。同时，我想知道是否有可以运行的 XMLA 命令或针对将提供此信息的 DMV 之一的 SQL 查询。

此外，我拥有 SSAS 实例的管理员权限，并且可以针对它运行 Profiler 跟踪，所以如果有其他方法，我会全力以赴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:19:58.097

您无法通过 SSAS 找到硬件或操作系统规格。

# c# - C# 音频到 Web 服务器 UDP

> ID：10010870
> 
> 赞同：2
> 
> 时间：2012-04-04T12:14:34.450
> 
> 标签：c#, javascript, asp.net, html, live-streaming

我有一个用 C# 编写的双向音频聊天。意味着：有一个服务器应用程序，它通过 UDP 将波形编码的音频作为字节数组发送。客户端应用程序然后解码并播放音频。所以这很好用。对于录制和编码/解码，我使用 NAudio（库）。

现在，任务是不同的，在网站上显示流。我更喜欢使用 ASP.NET，所以我可以使用 C# 和 NAudio 接收和解码字符串。我在那里也显示了一个凸轮图像，它运行顺利并且没有任何问题。

我仍然不知道该怎么做。UDP-bytestream 可以被解码和播放吗？我认为这是不可能的，或者可以使用 javascript 代替 C#？HTML5 音频标签也很有用。

很高兴收到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:48:18.690

既然您提到您使用的是 ASP.Net，听起来您已经拥有一个 Microsoft 服务器堆栈。您可能会查看 Windows Media Services 并了解如何将您的音频/视频编码为 WM 流，然后将其嵌入到您的 ASP.Net 页面上。

# java - 应用程序具有全局缓存时垃圾收集的最佳实践

> ID：10010872
> 
> 赞同：1
> 
> 时间：2012-04-04T12:14:43.490
> 
> 标签：java

我正在使用具有全局缓存并且我们也有数据发布者的应用程序。问题是我们经常面临内存不足的问题。现在做了一些调整，但这还不够。我们有大量的年轻代和终身代对象。大多数情况下，应用程序都会进入终身代，因此会抛出 OutOfMemoryError。

由于我们有 2 个 CPU 主机，我们可以应用吞吐量收集器来避免暂停时间，但它主要收集年轻代，因此我们使用并发低暂停收集器。

为此应用程序调整 VM 的最佳方法是什么？

我怎样才能增加 Minor GC，这反过来又会控制我们的终身代。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:21:06.450

我的第一个想法是使用 Wea​​kHashMap，但后来我发现了这篇文章：[WeakHashMap is not a cache](http://www.codeinstructions.com/2008/09/weakhashmap-is-not-cache-understanding.html)。请参阅该文章中的链接，也许您还会发现[apache commons](http://commons.apache.org/collections/api/org/apache/commons/collections/ReferenceMap.html)合适。

在我看来，最好的做法是不要实现自己的缓存，特别是如果它是一个中心且重要的组件。最好使用图书馆。否则，您将始终必须“调整”您的实施，并且仍然会一遍又一遍地出现新问题。因此，即使您的应用程序中已经有自定义缓存，切换到可靠库的努力也可能得到回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:34:14.900

如果您有缓存，则需要一种机制来不时删除过时的数据。那是您的任务，而不是 vms 任务。

可用的缓存解决方案，如[http://java-source.net/open-source/cache-solutions/oscache](http://java-source.net/open-source/cache-solutions/oscache)有不同的策略如何使缓存条目过期，您可以使用并在必要时进行扩展。

编辑：如果（您如何在评论中指出）您无法更改应用程序的代码，您可以向服务器添加更多内存并调整 jvm 允许使用的堆。这不会解决问题，但它可能会减少它出现的频率。

# c++ - 带段错误的 Valgrind 泄漏检测

> ID：10010873
> 
> 赞同：3
> 
> 时间：2012-04-04T12:14:53.900
> 
> 标签：c++, segmentation-fault, valgrind

我正在检查我的代码是否存在内存泄漏。在我得到代码之前一切都很好：

```
mSystem = new LightSystem();
sf::View *view = th::DisplayManager::Get()->GetCamera();
mSystem->SetView(*view); 
```

`SetView`确实很小的工作（提取传递的`view`指针的一些成员。当最新的代码行被注释时，一切都很好，但是取消注释一切都在默认模式下工作，并且在使用 valgrind（`valgrind --tool=memcheck ./Binary`）进行内存泄漏检测时失败。

```
==23703== Use of uninitialised value of size 8
==23703==    at 0x6B8472: ltbl::LightSystem::SetView(sf::View const&) (LightSystem.cpp:55)
==23703==    by 0x6A7A7D: th::LightManager::Initialize() (LightManager.cpp:46)
==23703==    by 0x6A75EA: th::Root::Initialize() (Root.cpp:101)
==23703==    by 0x6A7113: th::Root::Root() (Root.cpp:66)
==23703==    by 0x6A7553: th::Root::Get() (Root.cpp:88)
==23703==    by 0x6291A8: th::Game::Initialize() (Game.cpp:36)
==23703==    by 0x61DC1C: main (main.cpp:82)
==23703== 
==23703== Invalid read of size 8
==23703==    at 0x6B8472: ltbl::LightSystem::SetView(sf::View const&) (LightSystem.cpp:55)
==23703==    by 0x6A7A7D: th::LightManager::Initialize() (LightManager.cpp:46)
==23703==    by 0x6A75EA: th::Root::Initialize() (Root.cpp:101)
==23703==    by 0x6A7113: th::Root::Root() (Root.cpp:66)
==23703==    by 0x6A7553: th::Root::Get() (Root.cpp:88)
==23703==    by 0x6291A8: th::Game::Initialize() (Game.cpp:36)
==23703==    by 0x61DC1C: main (main.cpp:82)
==23703==  Address 0x8 is not stack'd, malloc'd or (recently) free'd
==23703== 
==23703== 
==23703== Process terminating with default action of signal 11 (SIGSEGV)
==23703==  Access not within mapped region at address 0x8
==23703==    at 0x6B8472: ltbl::LightSystem::SetView(sf::View const&) (LightSystem.cpp:55)
==23703==    by 0x6A7A7D: th::LightManager::Initialize() (LightManager.cpp:46)
==23703==    by 0x6A75EA: th::Root::Initialize() (Root.cpp:101)
==23703==    by 0x6A7113: th::Root::Root() (Root.cpp:66)
==23703==    by 0x6A7553: th::Root::Get() (Root.cpp:88)
==23703==    by 0x6291A8: th::Game::Initialize() (Game.cpp:36)
==23703==    by 0x61DC1C: main (main.cpp:82)
==23703==  If you believe this happened as a result of a stack
==23703==  overflow in your program's main thread (unlikely but
==23703==  possible), you can try to increase the size of the
==23703==  main thread stack using the --main-stacksize= flag.
==23703==  The main thread stack size used in this run was 8388608. 
```

问题是：为什么在没有 valgrind 的情况下它可以成功运行并打破它。我也尝试设置`--main-stacksize=`一个很大的值，但它对我没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:17:29.453

> ```
> ==23703== Process terminating with default action of signal 11 (SIGSEGV)
> ==23703==  Access not within mapped region at address 0x8 
> ```

在某些时候（可能`LightSystem.cpp:55`），您正在取消引用您分配的指针，该指针`8`看起来不像有效地址。

# iphone - 如何在ios5上播放flash文件？

> ID：10010874
> 
> 赞同：-3
> 
> 时间：2012-04-04T12:14:59.603
> 
> 标签：iphone, xcode, ios5, flash

> **可能重复：**
> [我们可以使用 Objective C 在 iphone 中播放 .swf 文件吗](https://stackoverflow.com/questions/6677718/can-we-play-swf-files-in-iphone-using-objective-c)

我想在我的应用程序上实现启动画面。我有一个“SWF”文件。如何使用此文件实现启动画面？请告诉我。任何第 3 方 sdk 或任何相同的框架或库？请给我有关此功能的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:18:36.033

`Swf`不支持`iOS`。您可以获取图像序列并使用它来代替 swf 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:20:35.800

您将无法这样做，因为：

*   iPhone 不支持 SWF。这是 Adob​​e 和 Apple 之间在移动行业中最激烈的战斗之一
*   启动屏幕由操作系统在您的应用程序启动时显示，而不是由用户代码显示
*   启动屏幕后的任何附加动画都违反了 Apple 的指导方针，将被拒绝。另请参阅[在 splashScreen 和主屏幕之间添加动画](https://stackoverflow.com/questions/9992200/adding-animation-between-splashscreen-and-home-screen)

# android - android：在 listview 选择上得到错误值

> ID：10010880
> 
> 赞同：0
> 
> 时间：2012-04-04T12:15:31.330
> 
> 标签：android

我有连接到数据库的列表视图。

当我选择行时，我得到相同的 ID。

```
public void onListItemClick(ListView parent, View v, int position,long id) {
        showDialog(DELETE_ROW);
    }

else if (id==2)
{
  builder.setMessage(c.getString(0)); <-- here i get error id - same id all the time
  builder.setTitle("AAA");
  builder.setIcon(R.drawable.no);
  builder.setCancelable(false);
  builder.setPositiveButton("yes ", new DialogInterface.OnClickListener()
  {
    public void onClick(DialogInterface dialog, int id)
    {
      Toast.makeText(getBaseContext(),c.getString(0),Toast.LENGTH_SHORT).show(); <-- here i get the real id - what i need
     }
    });
    builder.setNegativeButton("no", new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface dialog, int id)
    {
      return;
    }
   });
} 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:30:18.740

在这里，您将不得不使用最终变量。

```
public final int my_id=0;

public void onListItemClick(ListView parent, View v, int position,long id) {
    my_id=id;
    showDialog(DELETE_ROW);
} 
```

现在

```
else if (my_id==2)
{
 ......
 public void onClick(DialogInterface dialog, int id)
 {
  my_id=id; // Assigning the Value
  Toast.makeText(getBaseContext(),c.getString(0),Toast.LENGTH_SHORT).show(); 
 }
 ...
} 
```

现在您可以使用 my_id 来检查值。

# blackberry - 在黑莓的网格布局中将字段右对齐

> ID：10010884
> 
> 赞同：0
> 
> 时间：2012-04-04T12:15:36.953
> 
> 标签：blackberry

我希望我的应用程序对齐两个字段，一个向左对齐，另一个向屏幕的最左侧对齐。为此，我正在使用 GridLayoutManager 类。这是我的代码

```
GridFieldManager gridFieldManager = new GridFieldManager(2,2, GridFieldManager.PREFERRED_SIZE_WITH_MAXIMUM); 

gridFieldManager.add(new ButtonField("Button One"), Field.FIELD_HCENTER);  
gridFieldManager.add(new ButtonField("Button Two"), Field.FIELD_RIGHT);  

gridFieldManager.add(new ButtonField("HC", Field.FIELD_HCENTER)); 
gridFieldManager.add(new ButtonField("RT", Field.FIELD_RIGHT));

add(gridFieldManager); 
```

而且，这是我在模拟器中的输出

![在此处输入图像描述](../Images/05e2c584075b97ecd146596369055f32.png)

谁能帮我把按钮二对准屏幕的最右边？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:23:33.510

基本上这都是对齐标志和网格的列属性的问题。

`GridFieldManager`将样式更改为`Manager.USE_ALL_WIDTH`并将列属性设置为`GridFieldManager.AUTO_SIZE`使所有可用空间在两列之间平均分配。

```
gridFieldManager.setColumnProperty(0, GridFieldManager.AUTO_SIZE, 0);
gridFieldManager.setColumnProperty(1, GridFieldManager.AUTO_SIZE, 0); 
```

* * *

下面的代码片段

```
GridFieldManager gridFieldManager = new GridFieldManager(2,2, Manager.USE_ALL_WIDTH); 
gridFieldManager.setColumnProperty(0, GridFieldManager.AUTO_SIZE, 0);
gridFieldManager.setColumnProperty(1, GridFieldManager.AUTO_SIZE, 0);

gridFieldManager.add(new ButtonField("Button One"), Field.FIELD_LEFT);  
gridFieldManager.add(new ButtonField("Button Two"), Field.FIELD_RIGHT);  
gridFieldManager.add(new ButtonField("HC"), Field.FIELD_LEFT); 
gridFieldManager.add(new ButtonField("RT"), Field.FIELD_RIGHT);

add(gridFieldManager); 
```

生产

![在此处输入图像描述](../Images/7804ebc8d5dafa5243ce2cb7a5d60273.png)

* * *

这个稍作修改的代码片段

```
GridFieldManager gridFieldManager = new GridFieldManager(1,2, Manager.USE_ALL_WIDTH); 
gridFieldManager.setColumnProperty(0, GridFieldManager.AUTO_SIZE, 0);
gridFieldManager.setColumnProperty(1, GridFieldManager.AUTO_SIZE, 0);

VerticalFieldManager vfmLeft = new VerticalFieldManager();
vfmLeft.add(new ButtonField("Button One", Field.FIELD_HCENTER));  
vfmLeft.add(new ButtonField("HC", Field.FIELD_HCENTER)); 
gridFieldManager.add(vfmLeft, Field.FIELD_LEFT);  

VerticalFieldManager vfmRight = new VerticalFieldManager();
vfmRight.add(new ButtonField("Button Two", Field.FIELD_HCENTER));  
vfmRight.add(new ButtonField("RT", Field.FIELD_HCENTER));
gridFieldManager.add(vfmRight, Field.FIELD_RIGHT);  

add(gridFieldManager); 
```

生产

![在此处输入图像描述](../Images/623de2655ca0d725b97ef5865cb96bd3.png)

* * *

最后，为了说明我之前所说的关于在两列之间分配可用空间的内容，下面的代码片段

```
GridFieldManager gridFieldManager = new GridFieldManager(1,2, Manager.USE_ALL_WIDTH | Manager.USE_ALL_HEIGHT); 
gridFieldManager.setColumnProperty(0, GridFieldManager.AUTO_SIZE, 0);
gridFieldManager.setColumnProperty(1, GridFieldManager.AUTO_SIZE, 0);
gridFieldManager.setRowProperty(0, GridFieldManager.AUTO_SIZE, 0);

VerticalFieldManager vfmLeft = new VerticalFieldManager(Manager.USE_ALL_WIDTH | Manager.USE_ALL_HEIGHT);
vfmLeft.setBackground(BackgroundFactory.createSolidBackground(Color.CYAN));
gridFieldManager.add(vfmLeft);  

VerticalFieldManager vfmRight = new VerticalFieldManager(Manager.USE_ALL_WIDTH | Manager.USE_ALL_HEIGHT);
vfmRight.setBackground(BackgroundFactory.createSolidBackground(Color.GRAY));
gridFieldManager.add(vfmRight);  

add(gridFieldManager); 
```

产生两个大小相等的列。

![在此处输入图像描述](../Images/6e8d4966f1a13a98ab5d59d8349f244a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:38:27.157

看来您应该使用**JustifiedHorizo** ​​ntalFieldManager 而不是 GridFieldManager。JustifiedHorizo​​ntalFieldManager 不是 BlackBerry SDK 中包含的标准管理器，而是 RIM 后来发布的一组 UI 组件的成员，用于帮助开发人员构建更丰富的 UI 界面。您必须从[此处](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276)下载代码，将其添加到您的项目中，然后包含以下行：

```
JustifiedHorizontalFieldManager justifiedManager = new JustifiedHorizontalFieldManager(buttonOne, buttonTwo, false, USE_ALL_WIDTH ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T14:05:51.097

请使用以下课程。

```
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.container.HorizontalFieldManager;

public class HFMLeftFieldRightField extends HorizontalFieldManager {

 private Field leftField;
 private Field rightField;

 private final static int TOP_MARGIN = 0;
 private final static int LEFT_MARGIN = 30;

 public HFMLeftFieldRightField() {
  super(USE_ALL_WIDTH);
 }

 public HFMLeftFieldRightField(boolean isQatari) {
  super(USE_ALL_WIDTH | Field.FIELD_LEFT);
 }

 public void sublayout(int maxWidth, int maxHeight) {

  super.sublayout(maxWidth, maxHeight);
  int width = getWidth();

  if (rightField != null) {
   int x = width - rightField.getWidth() - LEFT_MARGIN;
   int y = TOP_MARGIN;
   setPositionChild(rightField, x, y);
  }
  if (leftField != null) {
   int y = TOP_MARGIN+rightField.getHeight()/5;
   int x = LEFT_MARGIN;
   setPositionChild(leftField, 0, y);
  }

  setExtent(maxWidth, rightField.getHeight() + TOP_MARGIN * 2);
 }

 public void setLeftButton(Field leftField) {
  this.leftField = leftField;
super.add(leftField);
 }

 public void setRightButton(Field rightField) {
  this.rightField = rightField;
  super.add(rightField);
 }

} 
```

并以这种方式添加字段。

```
HFMLeftFieldRightField hfm = new HFMLeftFieldRightField();
hfm.setLeftButton(new EditField("Left"));
hfm.setRightButton(new EditField("Right"));
add(hfm); 
```

更多详情[http://keraisureshvblackberry.blogspot.in/2012/02/there-are-very-common-there-there-are.html](http://keraisureshvblackberry.blogspot.in/2012/02/there-are-very-common-there-there-are.html)

希望有帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:45:08.353

将 gridFieldManager 构造函数的样式参数更改为 GridFieldManager.USE_ALL_WIDTH

应该是这样的

```
GridFieldManager gridFieldManager = new GridFieldManager(2,2,GridFieldManager.USE_ALL_WIDTH ); 
```

# data-structures - 在图上定义无效路径

> ID：10010888
> 
> 赞同：0
> 
> 时间：2012-04-04T12:15:48.780
> 
> 标签：data-structures, graph-algorithm

我们正在开发一个适合大多数情况的常规有向图的项目。然而，在我们的图表上，我们想要使一些路径无效。例如，如果我们的图表是：

```
A->B
A->D
B->C
D->C 
```

那么 A->B->C 是有效路径，但 A->D->C 不是。我们可以在某处定义无效路径并每次都进行验证检查，但这会导致一个重要的性能问题，因为我们的应用程序高度依赖于图。

那么，对于这种类型的情况，是否有特殊的数据结构或算法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:22:00.223

您可以在的每个节点上存储一个映射，`from:list(to)`这样您就知道来自 A 的路径不能到达 C，因为它不在可以从 C 到达的节点列表中。如果深度大于 1，则通向它的节点元组可以是一个键而不是那个节点。这很像 eBGP 用于 Internet 路由的方式。

另一方面，如果您决定使用您所描述的数据结构，无论如何您都需要进行检查。要么，要么为每种情况存储多个图表。

# ios - 将 iPad webapp 打包到可下载的 iPad 应用程序并提交到 App Store

> ID：10010899
> 
> 赞同：1
> 
> 时间：2012-04-04T12:16:27.407
> 
> 标签：ios, ipad, web-applications

我们正在为 iPad 创建一个 Web 应用程序，它目前没有离线功能。我们正在考虑是否需要创建一个可下载的 iPad 应用程序并提交到 App Store。Web 应用程序可以在某种嵌入式浏览器中运行，使其看起来像原生应用程序。

以下是我对此的疑问：

1.  创建一个可下载的 iPad 应用程序让用户拥有与 iPad 上的原生应用程序相同的体验是否是好的/必要的？

2.  Apple 是否允许此类应用提交到 App Store？

3.  是否有安装 iPad Web 应用程序的最佳实践？大多数用户是否可以接受/首选在 iPad Safari（或主屏幕图标）中输入 URL 的方式？

4.  您是如何管理 iPad Web 应用程序的安装过程的？

谢谢，
J

# android - 从数据库返回字符串

> ID：10010904
> 
> 赞同：0
> 
> 时间：2012-04-04T12:16:50.543
> 
> 标签：android, database

我正在尝试在我的数据库中创建一个方法。我想从我的数据库中返回一个具有特定列名的特定行中的字符串。我试过这个，但它不起作用。有人能帮助我吗？？

```
public String getNameAtPosition(String row){
    String name = null;

    Cursor c = mDb.query(ValuteMetaData.VALUTE_TABLE, null, ValuteMetaData.ID + "=" + row, null, null, null, null);

    name = String.valueOf(c.getLong(ValuteMetaData.VALUTE_NAME_KEY));

    return name;
}

public Cursor fetchValuteListView(String data){ 
        String[] data_query={data};
        return mDb.query(ValuteMetaData.VALUTE_TABLE,null,ValuteMetaData.VALUTE_DATA_KEY+"=?",data_query,null,null,null);              
}

static class ValuteMetaData {  // i metadati della tabella, accessibili ovunque
        static final String VALUTE_TABLE = "Valute";
        static final String ID = "_id";
        static final String VALUTE_NAME_KEY = "name";
        static final String VALUTE_SIGLA_KEY = "sigla";
        static final String VALUTE_CAMBIO_KEY = "cambio";
        static final String VALUTE_DATA_KEY = " data";
}

private static final String VALUTE_TABLE_CREATE = "CREATE TABLE IF NOT EXISTS "  //codice sql di creazione della tabella
                + ValuteMetaData.VALUTE_TABLE + " ("
                + ValuteMetaData.ID+ " integer primary key autoincrement, "
                + ValuteMetaData.VALUTE_NAME_KEY + " text, "
                + ValuteMetaData.VALUTE_SIGLA_KEY + " text, "
                + ValuteMetaData.VALUTE_CAMBIO_KEY + " text, "
                + ValuteMetaData.VALUTE_DATA_KEY + " text);"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:19:26.690

更改您的方法和查询如下：

```
public String getNameAtPosition(String row){
    String name = null;

    Cursor c = mDb.query(ValuteMetaData.VALUTE_TABLE, null,
            ValuteMetaData.ID + " = ?" , new String[]{row}, null, null, null);

    if(c.moveToFirst())
        name = c.getString(c.getColumnIndex(ValuteMetaData.VALUTE_NAME_KEY));

    return name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:20:15.693

在使用光标之前，您应该将其指向行。在你的情况下，你应该写：

```
c.moveToFirst(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:20:21.233

改变：

```
name = String.valueOf(c.getLong(ValuteMetaData.VALUTE_NAME_KEY)); 
```

to（注意“getString”和“getColumnIndex”）

```
if(c.moveToFirst()){
    name = String.valueOf(c.getString(c.getColumnIndex(ValuteMetaData.VALUTE_NAME_KEY)));
} 
```

# ruby - nil:NilClass (NoMethodError) 的未定义方法“艺术家”

> ID：10010912
> 
> 赞同：1
> 
> 时间：2012-04-04T12:17:06.397
> 
> 标签：ruby

运行以下代码时出现此错误：

```
#!/usr/bin/env ruby -rubygems
require File.join(File.dirname(__FILE__), 'authentication')
require "csv" # faster_csv (ruby 1.9)

lines = CSV.read(File.join(File.dirname(__FILE__), 'karaoke.csv')) # Exported an Excel file as CSV
lines.slice!(0) # remove header line
collection = StorageRoom::Collection.find('collection ID')
Song = collection.entry_class
lines.each do |row|
  karaoke = Song.new(:artist => row[0], :song => row[1], :genre => row[2], :file => StorageRoom::File.new_with_filename("#{karaoke.artist}#{karaoke.song}.mov"))
  if karaoke.save
    puts "Misuero Karaoke Latino saved: #{karaoke.artist}, #{karaoke.song}, #{karaoke.genre}"
  else
    puts "Misuero Karaoke Latino could not be saved: #{karaoke.errors.join(', ')}"
  end
end 
```

错误是：

```
import_csv.rb:15:in `block in <main>': undefined method `artist' for nil:NilClass (NoMethodError)
    from import_csv.rb:14:in `each'
    from import_csv.rb:14:in `<main>' 
```

我有兴趣了解为什么会发生此错误以及解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:30:03.450

查看第 15 行（`import_csv.rb:15`告诉您在哪里搜索问题）：

```
karaoke = Song.new(:artist => row[0], :song => row[1], :genre => row[2], 
  :file => StorageRoom::File.new_with_filename("#{karaoke.artist}#{karaoke.song}.mov")) 
```

在赋值表达式的右侧，您使用`karaoke.artist`并`karaoke.song`构造, 但变量的`:file`一部分尚未初始化（它出现在左侧）。事实上，当红宝石解释器看到赋值运算符并开始评估赋值表达式的右侧部分（*初始化*变量）并失败时，它定义了变量，因为*定义**的*变量具有值。`Song``karaoke` *`karaoke`**`nil`***

 **** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:29:44.743

看来问题在于您对`karaoke`变量的分配。当您将任何内容分配给新变量时，分配的右侧在左侧之前计算。因此，当您的代码到达第 15 行时，`karaoke`变量是`nil`.

因此，当您`karaoke`在方法中使用变量时`StorageRoom::File.new_with_filename`，它就是一个`nil`对象。`karaoke`在计算整个赋值右侧之前不包含任何内容。然后它与`karaoke`变量相关联。

您应该考虑使用类似`row[0]`and`row[2]`而不是`karaoke.artist`and `karaoke.genre`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:25:34.133

这意味着您在 nil/Null 上调用艺术家方法

可能尝试用#{row[0]}#{row[1]}替换#{karaoke.artist}#{karaoke.song}

```
karaoke = Song.new(:artist => row[0], :song => row[1], :genre => row[2], :file => StorageRoom::File.new_with_filename("#{row[0]}#{row[1]}.mov")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T12:31:48.580

您不能使用卡拉 OK 对象来初始化自身。

在您编写时使用 ruby​​（假设您以前从未使用过“a”变量）

```
a = some_expression_or_value 
```

解释器计算“右部分”的值，即某个表达式或值，然后将其分配给变量。你的变量 karaoke 之前没有被使用过，这意味着它的值是 nil。这就是您收到此错误的原因。***

# iphone - 区分 UITableView 编辑状态？

> ID：10010926
> 
> 赞同：5
> 
> 时间：2012-04-04T12:17:58.853
> 
> 标签：iphone, objective-c, uitableview

我一直在尝试区分 UITableView 中的编辑状态。

只有在点击编辑按钮后处于编辑模式时，我才需要调用一个方法，因此当您将单元格滑入并看到小的圆形删除图标时，而不是当用户滑动删除时。

无论如何我可以区分两者吗？

谢谢。

编辑：

多亏了罗德里戈的解决方案

每个单元格和整个表格视图都有一个“正在编辑”的 BOOL 值，所以我循环遍历所有单元格，如果其中有多个正在编辑，那么我们知道整个表格是（用户点击了编辑按钮），但是如果只有一个是编辑，然后我们知道用户已经滑动了一个单元格，正在编辑那个单独的单元格，这让我可以单独处理每个编辑状态！

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    int i = 0;
    //When editing loop through cells and hide status image so it doesn't block delete controls. Fade back in when done editing.
    for (customGuestCell *cell in self.tableView.visibleCells) 
    { 
        if (cell.isEditing) {
            i += 1;
        }
    }

    if (i > 1) 
    {
        for (customGuestCell *cell in self.tableView.visibleCells) 
        { 
            if (editing) 
            {
                // loop through the visible cells and animate their imageViews
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.4];
                cell.statusImg.alpha = 0;
                [UIView commitAnimations];
            } 
        }
    }
    else if (!editing) 
    {
        for (customGuestCell *cell in self.tableView.visibleCells) 
        { 
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.4];
            cell.statusImg.alpha = 1.0;
            [UIView commitAnimations];            
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-12T14:35:55.293

即使这篇文章很老，以下内容可能对其他人有帮助：

如果您实现以下委托消息： `- (void)tableView:(UITableView *)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath;`

和

`- (void)tableView:(UITableView *)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath;`

编辑单行时将调用这些方法。`-[UIViewController setEditing:animated:]`只有当用户点击编辑按钮时才会被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T12:44:15.937

有一种策略，我现在不测试，但也许可以。

您可以将 UITableView 设置为处于编辑模式并使用`isEditing`功能进行测试。但细胞有相同的`isEditing`。因此，您可以检查是只有一个单元格处于编辑状态还是所有 UITableView。

检查当您将一个单元格设置为处于编辑状态时，UITableView 是否完全更改为编辑状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T03:13:12.053

我选择的解决方案是将编辑按钮的操作覆盖为自定义方法，例如 editBtnTapped。在这个方法中我设置了一个变量editButtonPressed，然后，因为我们覆盖了编辑按钮的动作，手动调用了setEditing:animated:。

在 viewDidLoad 中：

```
[self.navigationItem.rightBarButtonItem setAction:@selector(editBtnPressed)]; 
```

然后是新的操作方法：

```
- (IBAction) editBtnPressed
{
  if ([self isEditing]) 
  {
    self.editButtonPressed = NO;
    [self setEditing:NO animated:YES];
  }
  else  
  {
    self.editButtonPressed = YES;
    [self setEditing:YES animated:YES];
  }
} 
```

现在在 setEditing:animated: 我检查 editButtonPressed 标志以确定我是否因为按下编辑按钮或简单的用户滑动而在那里。如果我因为编辑按钮而在那里，我会添加单元格；否则我不会。

请记住，您可能在其他地方需要该标志（例如 numberOfRowsInSection）。

希望这个替代方案有所帮助。

问候，

- 约翰

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T12:52:15.507

我发现这样做的唯一可靠方法是维护一个私有标志`inEditMode`并将这个标志切换到`setEditing:animated`. 然后使用`inEditMode`而不是`isEditing`检查表是否处于编辑模式。

# magento - 在 java 脚本中的 magento 中调用自定义控制器

> ID：10010928
> 
> 赞同：1
> 
> 时间：2012-04-04T12:18:04.843
> 
> 标签：magento

我创建了一个名为connector的自定义模块，公司名称是social.in that，有一个控制器，即Social_Connectors_Customer_AccountController。在这个控制器中，动作方法是

```
public function connectAction()
{
    $this->_redirect('customer/account');
} 
```

现在，当我在单击链接时调用此操作方法时，不知何故未调用控制器。并给我错误，例如：找不到您请求的页面，我们很好地猜测了原因。

我的phtml文件中的java脚本是：如何在这个脚本中调用控制器的动作方法？

```
 document.observe('click', function(e){

      var target = e.findElement('a[rel^=google]') || e.findElement('button[rel^=google]');
      if (target && target.readAttribute('rel')=='google')
      {
      alert('<?php echo $this->getUrl(); ?>');
      }

      }); 
```

或者任何人都可以说如何在点击我的链接时调用控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:59:30.843

要调用控制器动作，您必须遵循 mvc magento 模块的结构。函数 getUrl() 必须正确定义。检查其定义。

# sharepoint-2010 - 如何在我的网站集的共享点中强制用户友好的 URL

> ID：10010934
> 
> 赞同：0
> 
> 时间：2012-04-04T12:18:09.797
> 
> 标签：sharepoint-2010

忽略我之前提出的（并已删除）已解决的问题，我想知道，如何强制 sharepoint 生成对用户友好的我的网站集 URL？

为了使问题更容易，我将举一个例子。

```
http://spaces.companyspttest.biz/Person.aspx?accountname=ADtest\Eon 
```

必须成为

```
http://spaces.companyspttest.biz/Eon 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:44:22.427

好的，似乎我一直在寻找的是自助式网站创建。

要激活它，请转到 Sharepoint 中管理中心的 Web 应用程序管理，选择需要此“短 URL”的 Web 应用程序，单击功能区中的自助服务站点创建，然后将其打开。

之后，将托管路径添加到名为 Profiles 的 Web 应用程序。

不是我想要的关于 URL 的 10000%，但绝对是我在键入 URL 时想要看到的页面。

# c# - 部分声明不能指定不同的基类？

> ID：10010940
> 
> 赞同：4
> 
> 时间：2012-04-04T12:18:29.203
> 
> 标签：c#, wpf, xaml, inheritance

我看到许多其他人在其他问题中询问此错误消息，但我似乎对自己解决此问题的方法了解不够。我通过 WPF UserControl 创建了这个错误

```
public partial class EnterNewRequest : UserControl 
```

但后来我想向 UserControl 添加一个方法，所以我使用继承将它粘贴在那里（不能使用扩展，因为我需要覆盖这个方法）。但是现在我的用户控件很不高兴，我不确定我需要更改 xaml 中的哪些内容。UserControl 更改块位于命名空间 RCO_Manager 中。这是我的 xaml：

```
<UserControl x:Class="RCO_Manager.EnterNewRequest"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T12:42:03.393

我在使用 Windows Phone 时遇到了同样的问题。我不记得确切的例外情况，但您可以[在 GitHub 上查看 XAML](https://github.com/cbenard/SimpleOAuth.Net/blob/master/SimpleOAuthTester.WP.Mango/MainPage.xaml)，在此处查看[页面代码](https://github.com/cbenard/SimpleOAuth.Net/blob/master/SimpleOAuthTester.WP.Mango/MainPage.xaml.cs)，在此处查看[基本页面代码](https://github.com/cbenard/SimpleOAuth.Net/blob/master/SimpleOAuthTester.WP.Mango/Classes/BasePhoneApplicationPage.cs)（我的是基本页面，而不是基本控件）。我需要添加一个新的`XAML`命名空间并更改`<UserControl/>`声明：

**代码假设**

```
namespace RCO_Manager
{
    // Inherits **Base**UserControl, not UserControl
    public partial class EnterNewRequest : BaseUserControl
    {
        // Magic goes here
        ...
    }
} 
```

**XAML**

```
<local:BaseUserControl
    xmlns:local="clr-namespace:RCO_Manager"
    x:Class="RCO_Manager.EnterNewRequest" 
```

**边注**

根据[Baboon](https://stackoverflow.com/users/677014/baboon)的说法，一旦在 中指定基类，就不需要在代码隐藏中指定它`XAML`，因此您可以更改代码隐藏以显示以下内容。我现在无法验证它，但你可以在让它工作后试一试。

```
public partial class EnterNewRequest // Don't specify BaseUserControl here
{
    ... 
```

# c# - 从后面的代码提交表单

> ID：10010941
> 
> 赞同：4
> 
> 时间：2012-04-04T12:18:32.930
> 
> 标签：c#, asp.net

我在我的 c#/asp.net 应用程序上实现功能时遇到问题。

我有一个带有 RadioButtonList 和提交按钮的表单。RadioButtonList 是根据`Page_Load()`我从数据库中检索到的对象列表生成的。如果列表中只有 1 个对象，我想自动提交表单。

我可以访问我的 Form 对象、提交按钮等......但我似乎找不到解决方案（最后我正在寻找一种`form.Submit()`）方法。

有谁知道我该怎么做？

提前致谢 ！

编辑>>这是代码：

.aspx： http: [//pastebin.com/0E6T7dqH](http://pastebin.com/0E6T7dqH)

.aspx.cs：[http ://pastebin.com/54payZJP](http://pastebin.com/54payZJP)

编辑2 >>>

因为似乎没有办法做我一开始想做的事情，所以我最终使用了一个带有 response.redirect() 的会话变量

来源： [http ://dotnetslackers.com/Community/blogs/haissam/archive/2007/11/26/ways-to-pass-data-between-webforms.aspx](http://dotnetslackers.com/Community/blogs/haissam/archive/2007/11/26/ways-to-pass-data-between-webforms.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:20:44.303

发布发生在客户端。与您当前在服务器端执行的 Page_Load 一样，只需调用您要在发布时执行的代码。

**编辑：实际上去另一个 aspx**

```
public void Page_Load(object sender, EventArgs e) {
    if(!IsPostback && OnlyOneItem) {
        Server.Transfer("TheOtherPage.aspx");
    }
} 
```

Server.Transfer 将维护整个请求，因此您的帖子数据将可用。

[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.transfer.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.transfer.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:22:39.880

尝试这样的事情

在你的`Page_Load`

```
if(!IsPostBack)
{
      if(check for only one object)
      {
         //your submit code
      }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T15:13:54.547

我实际上不得不做一次类似的事情。这是您可以做到的一种方法。

Asp.Net 按钮有一个名为 的属性`PostBackUrl`，它完全符合您的预期 - 如果您单击按钮，它控制表单将发布的位置。

您还可以使用[RegisterStartupScript](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)函数在页面上呈现 javascript。

现在，有了这两件，您就可以实现您的目标。

```
if(!IsPostBack)
{
    if(results == 1)
    {
        button.PostBackUrl = "next page's url"
        //Register script to click the button using RegisterStartupScript
    }
} 
```

现在，已经向您展示了这一点，我会警告您，它可能不会带来最佳的用户体验。当我这样做时，它是针对一个没有其他解决方案的非常具体的案例。该页面实际上将回传给用户，并且在单击按钮的 javascript 生效之前，他们将看到该页面片刻。此外，当您设置按钮的 PostBackUrl 时，这意味着当它被单击时，您的整个表单将被发布到指定的页面。当前页面背后的代码根本不会触发，所以如果你有任何验证，它就不会运行。

让用户点击按钮提交表单并没有错，即使他们只有一个选择。根据我的经验，用户喜欢感觉自己可以控制系统。他们不喜欢页面只是在没有他们输入的情况下做事。

Also, there is not really anything wrong with putting the information the next page needs into the session or even a database table, and using `Response.Redirect`. It's a fairly common practice and works reliably in most scenarios.

# facebook - 在页面/链接上发表评论 true FB.api

> ID：10010945
> 
> 赞同：1
> 
> 时间：2012-04-04T12:18:46.420
> 
> 标签：facebook, facebook-javascript-sdk, facebook-comments

有没有使用 Facebooks js api 在页面上发表评论的方法？FB.api()。您可以在人墙上张贴

```
FB.api('/me/feed', 'post', { caption: message, name: "the tile",  description: "a neat message", link : "http://www.stackoverflow.com" }, function(response) {}); 
```

但是是否有相当于在页面上发表评论的方式？没有社交插件“评论框”。任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:44:11.983

所有的图形 api 都建立在 url 上，所有不同的 SDK（包括 js 的）只是为你包装了 http 请求。

正如[页面文档](http://developers.facebook.com/docs/reference/api/page/)所述：

> **喂养**
> 
> 此连接对应于 Page's Wall。您可以通过向 PAGE_ID/feed 连接发出 HTTP POST 请求来创建链接、帖子或状态消息。要查看更多详细信息，请参阅链接、帖子和状态消息文档。
> 
> 要在发布到墙上时模拟页面（即作为页面而不是当前用户发布），您必须使用具有 manage_pages 和 publish_stream 权限的页面 access_token，如上面的 [页面访问令牌](http://developers.facebook.com/docs/reference/api/page/#page_access_tokens)中所述。

从 javascript sdk 做到这一点是这样的：

```
FB.api('/PAGE_ID/feed', 'post', { caption: message, name: "the tile",  description: "a neat message", link : "http://www.stackoverflow.com" }, function(response) {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T15:16:10.903

是的，您可以，但您必须是该页面的管理员，并且您必须使用正确的授权请求访问令牌：`publish_stream, offline_access, manage_pages, read_stream`

这里有一个很棒的教程来获取您的 access_token 并发布消息：[http ://sp4ce.net/computer/2012/02/15/facebook-page%3A-automatic-answer.html](http://sp4ce.net/computer/2012/02/15/facebook-page%3A-automatic-answer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:34:49.860

这是官方 Facebook 页面：http: [//developers.facebook.com/docs/reference/api/page/](http://developers.facebook.com/docs/reference/api/page/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-11T16:11:20.267

似乎这是不可能的，也永远不会：

> 此功能从来没有也不打算提供。
> 
> 针对这种情况添加了一条错误消息：“评论可能不会添加到评论插件中”

[https://developers.facebook.com/bugs/164794086987157](https://developers.facebook.com/bugs/164794086987157)

# c# - 检查错误提供程序是否存在错误

> ID：10010946
> 
> 赞同：0
> 
> 时间：2012-04-04T12:18:50.390
> 
> 标签：c#, .net, winforms, errorprovider

我在我的 Windows 窗体上使用错误提供程序。在提交表单时，我需要检查表单上是否存在一些错误。如果错误提供程序中存在错误，我可以得到。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T12:30:32.890

编写一个`Validate()`方法，如果验证失败，则返回 false 并从`SaveButton`处理程序执行它。您**应该在此方法中重新验证**表单的所有控件。`Save`仅在`Validate()`返回 true时继续。

您可以使用[ErrorProvider.GetError](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.geterror.aspx)来获取表单上**特定控件**的错误，但要获取整个表单上的所有错误，您需要遍历在表单上使用该特定 ErrorProvider 实例的所有控件。

# css - 谷歌网络字体在 PC 上表现得很疯狂

> ID：10010948
> 
> 赞同：2
> 
> 时间：2012-04-04T12:18:56.350
> 
> 标签：css, fonts, web

我为一家公司建立了一个网站，并在一些文本上使用了谷歌网络字体。问题是 - 在我的两台计算机（mac 和 pc）上，文本看起来清晰且良好。但是当我的客户在他们的计算机上查看网页时，它的所有内容都脾气暴躁并且很难阅读......他们运行 Internet Explorer 8 - 这应该没有任何问题。

有什么建议可能是错的吗？

他们电脑的截图

![在此处输入图像描述](../Images/5b45268e6dcd6ce14de788d345b36802.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:21:29.043

看起来像是 ClearType 的问题。他们有什么版本的 Windows？我敢打赌它是XP。

本文解释了如何设置 ClearType

> [http://www.jvfconsulting.com/blog/27/Mozilla_FireFox_Tips_Tricks_Activate_ClearType_Font.html](http://www.jvfconsulting.com/blog/27/Mozilla_FireFox_Tips_Tricks_Activate_ClearType_Font.html)

然后，您可以使用 Microsoft 的 Web 工具来微调 ClearType，如果它看起来仍然有点不稳定

> [http://www.microsoft.com/typography/cleartype/tuner/step1.aspx](http://www.microsoft.com/typography/cleartype/tuner/step1.aspx)

# 编辑

如果您担心普通用户有同样的问题，一种可能的解决方案是检测是否启用了 ClearType，然后相应地更改字体系列。

查看此处了解详细信息： [您能否检测到是否通过 javascript 在 PC 上启用了 Cleartype？](https://stackoverflow.com/questions/4328558/can-you-detect-if-cleartype-is-enabled-on-pc-via-javascript)

# java - ArrayIndexOutOfBoundsException 错误...为什么？

> ID：10010952
> 
> 赞同：1
> 
> 时间：2012-04-04T12:19:10.917
> 
> 标签：java, android

我对这个有点迷茫。如何获得 OutOfBounds？是否有大小限制（除了 sizeof (int)）？

也许是因为**多个线程**可以来这里？UI线程和服务线程？

> java.lang.ArrayIndexOutOfBoundsException at kenyu73.realsignal.DatabaseWrapper.getSignalValues(DatabaseWrapper.java:137) at kenyu73.realsignal.DatabaseWrapper.getSignalValues(DatabaseWrapper.java:116) at kenyu73.realsignal.BarScaleGraph$buildGraphThread.drawGraph(BarScaleGraph.java: 128) 在 kenyu73.realsignal.BarScaleGraph$buildGraphThread.execute(BarScaleGraph.java:94) 在 kenyu73.realsignal.BarScaleGraph$buildGraphThread.run(BarScaleGraph.java:74)

另外，我用**静态实例**调用这些类方法。我认为线程正在竞争相同的变量？？？想法？

**条形图类**

```
ContentValues[] values = DatabaseWrapper.getInstance().getSignalValues(getContentResolver(), signal_type, false); 
```

**数据库包装类**

```
private static final DatabaseWrapper    instance    = new DatabaseWrapper();

// grab static instance so we only have one db wrapper
public static DatabaseWrapper getInstance() {
    return instance;
}

. . . .

public ContentValues[] getSignalValues(ContentResolver cr, int signal_type_id, boolean bGroupByLatLon) {

    String sWhere = "signal_type_id=" + signal_type_id;

    Cursor cursor;

    if (bGroupByLatLon) {
        cursor = cr.query(CONSTS.CONTENT_URI_GRP_LATLNG, null, sWhere, null, null);
    } else {
        cursor = cr.query(CONSTS.CONTENT_URI_LOGGER, null, sWhere, null, null);
    }

    ContentValues[] values = new ContentValues[cursor.getCount()];

    int count = 0;
    if (cursor.getCount() > 0) {
        cursor.moveToFirst();
        do {
            values[count] = new ContentValues(); // <--- LINE 137
            values[count].put("signal_value", cursor.getInt(cursor.getColumnIndex("signal_value")));
            values[count].put("latitude", cursor.getInt(cursor.getColumnIndex("latitude")));
            values[count].put("longitude", cursor.getInt(cursor.getColumnIndex("longitude")));
            values[count].put("timestamp", cursor.getLong(cursor.getColumnIndex("timestamp")));
            values[count].put("network", cursor.getString(cursor.getColumnIndex("network")));

            count++;

        } while (cursor.moveToNext());
    }
    cursor.close();

    return values;
} 
```

**编辑**：要试试这个 - 添加**同步**到实例

```
// grab static instance so we only have one db wrapper
public static synchronized DatabaseWrapper getInstance() {
    return instance;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:28:35.087

唯一合理的答案是`cursor.getCount()`返回的数字低于您的`do..while`循环进行的循环数。我没有看到`do..while`循环逻辑中的错误（尽管这是不寻常的逻辑；见下文）。

我的猜测是它是一个实时游标，而其他东西是在循环运行时~~删除~~添加相关行。唯一真正的找出方法是在代码中添加检测，以便您可以查看`cursor.getCount()`返回的内容`count`、每次循环迭代开始时的内容等。

如果您并不真正关心*为什么*并且只是希望它停止发生，您可以使用 a`List`代替：

```
public ContentValues[] getSignalValues(ContentResolver cr, int signal_type_id, boolean bGroupByLatLon) {

    String sWhere = "signal_type_id=" + signal_type_id;

    Cursor cursor;

    if (bGroupByLatLon) {
        cursor = cr.query(CONSTS.CONTENT_URI_GRP_LATLNG, null, sWhere, null, null);
    } else {
        cursor = cr.query(CONSTS.CONTENT_URI_LOGGER, null, sWhere, null, null);
    }

    List<ContentValues> values = new LinkedList<ContentValues>();
    ContentValues entry;

    while (cursor.moveToNext()) {
        entry = new ContentValues();
        entry.put("signal_value", cursor.getInt(cursor.getColumnIndex("signal_value")));
        entry.put("latitude", cursor.getInt(cursor.getColumnIndex("latitude")));
        entry.put("longitude", cursor.getInt(cursor.getColumnIndex("longitude")));
        entry.put("timestamp", cursor.getLong(cursor.getColumnIndex("timestamp")));
        entry.put("network", cursor.getString(cursor.getColumnIndex("network")));
        values.add(entry);
    }
    cursor.close();

    return values.toArray(new ContentValues[values.size()]);
} 
```

*（或达到这种效果的代码。）*

在那里我使用了一个临时链表，所以我不在乎`cursor.getCount`返回什么，完成后将其转换为数组。我还使用了更常见的循环游标的习惯用法（因为游标在第一行之前开始，`while (cursor.moveToNext())`是一种方便的循环方式），而不是（再次）我在你`do..while`的 .的直接性`while (cursor.moveToNext())`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:15:27.240

我猜这是一个竞争条件，其中线程之间的计数是变化的......尝试同步方法：

```
public synchronized ContentValues[] getSignalValues(...){
    ...
} 
```

如果以前的不适合你，总有这样的：

```
public ContentValues[] method1(...){
    synchronized (monitor1) {
        ...
    }
}

public ContentValues[] method2(...){
    synchronized (monitor2) {
        ...
    }
} 
```

这将解决问题，但我会尝试使用不同的架构来阻止这种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:24:49.633

那这个呢，

```
int count = 0;
if (cursor.getCount() > 0) {
ContentValues[] values = new ContentValues[cursor.getCount()];
cursor.moveToFirst();
do {
        if(cursor.getCount() >= count)
        {
        values[count].put("signal_value", cursor.getInt(cursor.getColumnIndex("signal_value")));
        values[count].put("latitude", cursor.getInt(cursor.getColumnIndex("latitude")));
        values[count].put("longitude", cursor.getInt(cursor.getColumnIndex("longitude")));
        values[count].put("timestamp", cursor.getLong(cursor.getColumnIndex("timestamp")));
        values[count].put("network", cursor.getString(cursor.getColumnIndex("network")));
        }
        count++;
    }  while (cursor.moveToNext());
  }
cursor.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:28:27.683

您使用 do...while 循环，do while 循环将执行额外的迭代，因为在每次迭代之后检查条件，而不是之前。代码越过了你的保护条件并进入循环，然后当有一个结果时执行 2x。

将循环切换到while循环，这应该可以正常工作。

```
int count = 0;
    if (cursor.getCount() > 0) {
        cursor.moveToFirst();
        while (cursor.moveToNext()) {
            values[count] = new ContentValues();
            values[count].put("signal_value", cursor.getInt(cursor.getColumnIndex("signal_value")));
            values[count].put("latitude", cursor.getInt(cursor.getColumnIndex("latitude")));
            values[count].put("longitude", cursor.getInt(cursor.getColumnIndex("longitude")));
            values[count].put("timestamp", cursor.getLong(cursor.getColumnIndex("timestamp")));
            values[count].put("network", cursor.getString(cursor.getColumnIndex("network")));

            count++;

        }
    }
    cursor.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T12:35:22.153

虽然我不确定问题是什么，但您可以以更安全的方式进行操作：

```
List<ContentValues> values = new ArrayList<ContentValues>();
if (cursor.getCount() > 0) {
    cursor.moveToFirst();
    do {
        ContentValues value = new ContentValues();
        value.put("signal_value", cursor.getInt(cursor.getColumnIndex("signal_value")));
        values.add(value);
    } while (cursor.moveToNext());
}
// ...
return values.toArray(new ContentValues[0]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T12:37:02.100

cursor.moveToFirst 可能返回 false。尝试将其包装在 if 语句中：

```
if (cursor.moveToFirst()) {
  do....
} 
```

# jquery - 用户单击后更改 JQuery Raty ReadOnly 值

> ID：10010954
> 
> 赞同：3
> 
> 时间：2012-04-04T12:19:17.083
> 
> 标签：jquery, jquery-plugins

我想在点击事件中将 Raty 设为只读，但它不起作用：

```
 $('#number').raty({
            click: function(score, evt) {
                readOnly: true; //it does not work here
                $.get(
                "../../ajax/test.aspx",
                {r:score},
                function (data) { alert(data); },
                "html"
        );

                },
            scoreName: 'entity.score',
            number: 10

            }); 
```

[拉蒂主页](http://www.wbotelhos.com/raty/#action-demo)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T12:32:54.390

您需要取消绑定点击事件`img`

```
$('#star').raty({
    click: function(score, evt) {
        $(this).find('img').unbind('click');
        // $(this).find('img').unbind(); <-- this removes all listeners
    }
});
​ 
```

[http://jsfiddle.net/xnZVd/](http://jsfiddle.net/xnZVd/)

# java - 如何从java脚本调用struts 1.3动作

> ID：10010960
> 
> 赞同：0
> 
> 时间：2012-04-04T12:19:31.310
> 
> 标签：java, javascript, struts

我正在使用 struts 1.3 进行开发，我正在尝试从 java 脚本调用 struts 操作我的代码如下所示

```
<SCRIPT type="text/javascript">

        function callMyFunction(autoKey){

            var newUrl = '/AuftragTrace.do?autoKey=' + autoKey;
            document.forms[0].action = newUrl;
            document.forms[0].submit();
        }

    </SCRIPT> 
```

当调用这个我得到以下错误

错误 404--未从 RFC 2068 超文本传输​​协议中找到--HTTP/1.1: 10.4.5 404 Not Found 服务器未找到与请求 URI 匹配的任何内容。没有说明这种情况是暂时的还是永久性的。

如果服务器不希望向客户端提供此信息，则可以使用状态代码 403（禁止）来代替。如果服务器通过一些内部可配置的机制知道旧资源永久不可用并且没有转发地址，则应该使用 410 (Gone) 状态代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:22:19.907

您需要传递完整的 URL。这里：

```
var newUrl = '/AuftragTrace.do?autoKey=' + autoKey; 
```

大概应该是这样的：

```
// note the relative URL
var newUrl = 'AuftragTrace.do?autoKey=' + autoKey; 
```

或类似的东西：

```
// note FULL url
var newUrl = '/AppName.war/AuftragTrace.do?autoKey=' + autoKey; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:19:02.767

确保变量“autoKey”是否具有某些值并且该值与绝对 URL 连接（在客户端）。

# api - 如何编写一个中间层 http API 端点，可以在结果到达客户端时将结果流式传输？

> ID：10010962
> 
> 赞同：0
> 
> 时间：2012-04-04T12:19:45.173
> 
> 标签：api, http, node.js

场景是这样的 - 我有一个我正在用 node.js 编写的前端 Web 服务器。我有一个尚未编写的中间层内部 API 层，它可以用任何东西编写。内部 API 是唯一允许与数据存储（恰好是关系数据库）对话的东西。

免责声明：我是 node.js 初学者。

node.js 想要异步进行数据访问——这使得像 Database.query.all 这样的调用效率低下，因为响应回调在整个列表组装完成之前不会启动。我读过的文档表明，最好一次将结果流式传输给客户端。

我想知道如何编写前端和中间层 http 内部 API，以便我可以利用 node.js 的异步性，here。

我想问题是“如何通过 http 流式传输结构化数据”？我想这就是我要求支持的内部 API 的功能。

我是不是该：

*   让前端请求一个 ID 列表，然后向后端分别发出一个请求？听起来很粗糙而且很健谈，而且我看不到请求会按照我想要的顺序返回的保证，所以我必须等到我把所有东西都放在前端......？
*   让前端针对数据页面的内部 API 发出一系列请求，并将每个块视为一个流段......？
*   只为第一个屏幕的价值获取足够的数据，然后请求后续的块，当它到达时将每个块写入列表的末尾？
*   **更聪明的东西！？**

（注意：请不要说“摆脱中间层，这样你就可以直接与数据库对话”——这不是一个选项）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:15:35.633

我不确定您所说的“流媒体”到底是什么意思；从您给出的想法来看，它可以被解释为一些[HTTP 服务器推送或长轮询技术](http://en.wikipedia.org/wiki/Push_technology)，或者只是发出后续的 XHR 请求。

由于您使用的是节点，因此我推荐[Socket.io](http://socket.io)，它可以让您真正**随时随地**将数据推送到浏览器。

如果您选择使用 XHR，只需告诉浏览器接下来要请求什么。

如果这不适合您，并且您想使用服务器推送或长轮询，那么[response.write()](http://nodejs.org/api/http.html#http_response_write_chunk_encoding)似乎是要走的路。但是您可能会遇到请求超时等问题。

# mysql - 行程表设计

> ID：10010964
> 
> 赞同：3
> 
> 时间：2012-04-04T12:19:49.103
> 
> 标签：mysql, database, database-design

我必须开发一个包含目的地之间距离的表格，并且需要一些帮助。我现在对如何开始几乎一无所知

![在此处输入图像描述](../Images/b42eee10c863c65bf806c6a47563d605.png)

这里的表格分别显示到点的距离`A to A, B, C AND D ARE 0, 4, 8, AND 12`等等。

需要将 MySQL 表中的这些数据转换为由管理面板管理并在客户端站点使用，具体取决于往返目的地。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:22:59.100

如果您没有“真实”日期（如地理位置），您需要将数据存储在 2 个表中。

第一个表，位置（因此在此处存储 A、B、C、D 以及有关该位置的其他相关信息）

第二个表，3 列。从位置，到位置，距离。（在 from/to_location 上有一个键，因此它是唯一的。但在插入之前始终检查其他方式，因为您可以在表中支持 A、C 和 C、A）

这样您就可以轻松地从数据库中提取正确的数据。

例如，获取从 A 到 C 的距离 ( `SELECT distance FROM distance_table WHERE from_location = "A" AND to_location = "C"`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:23:13.837

所以基本上你需要一个有 3 列的表。A点，B点，距离

在您的程序中，您可以执行 2 个 for 循环来通过二维表作为插入。

如果您希望它是唯一的，那么在您的代码中，如果您当前正在查看 B 到 A，请尝试在再次插入之前检查 A 到 B 是否已经存在。在 PointA 和 PointB 必须唯一的表上也放置一些约束可能是明智的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:55:36.427

做一张桌子

```
Create table `table_name`( `Distance_from` varchar(2), `A` int,`B` int, `C` int, `D` int ,primary key(Distance_from)); 
```

然后像这样插入你的记录

```
Insert into `table_name`(`Distance_from`,`A`,`B`,`C`,`D`) values('A',0,4,8,12) 
```

同样插入所有行。

# php - Why does changing/making errors in codebase sometimes destroy a session in Codeigniter/PHP?

> ID：10010971
> 
> 赞同：0
> 
> 时间：2012-04-04T12:20:17.597
> 
> 标签：php, codeigniter, session

Why does changing/making errors in one's codebase sometimes destroy a session in Codeigniter/PHP? I can't figure out the logic of why this is happening sometimes and not others and its driving me nuts.

I'm wondering what the triggers are for calling sess_destroy(). Can a session only be destroyed if my script contains code that writes data to the session? I guess what i'm trying to figure out is whether there are redirect scripts baked into codeigniter/php to destroy a session upon parse errors even if I haven't explictly made calls to update the session data

thanks,

tim

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:36:35.470

If you make some change in your code that result in parse error or other type of fatal error then it's possible that php cannot write data to session - because script dies before the php calls session_write(), which php usually does automatically at the end of script.

So if php never gets a chance to call session_write() you session data is lost.

You should check your php error log to see if you have any fatal errors, find the source of them and fix your script.

# java - 如何在 MYSQL 数据表中保存 JPasswordField 字符

> ID：10010978
> 
> 赞同：2
> 
> 时间：2012-04-04T12:20:41.233
> 
> 标签：java, mysql, swing, prepared-statement, jpasswordfield

我正在用 Java 编写一个访问控制程序，该程序使用`JPasswordField`. 由于该`jpasswordfield.getPassword()`方法以字符形式返回值，因此我需要知道如何使用`preparedstatement`. 我正在使用 MYSQL 字段`password char[100]`来存储密码。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:20:26.617

使用一些密码加密算法来保存密码，这将是一个很好的做法，谷歌它的详细信息，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:37:40.413

我做了一个简单的例子，使用准备好的语句将 char 数组存储在数据库中。我使用 Java DB 而不是 MySQL，因为它包含在 JDK (jdk1.7.0/db/lib/derby.jar) 中，对于这个例子来说应该没关系。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Example {
    public static void main(String[] args) throws SQLException {
        try (Connection connection = DriverManager.getConnection("jdbc:derby:memory:sampleDB;create=true");
             Statement statement = connection.createStatement()
        ) {
            char[] pw = "password".toCharArray();
            statement.execute("create table sample(pw char(10))");

            try (ResultSet resultSet = statement.executeQuery("select * from sample");
                 PreparedStatement preparedStatement = connection.prepareStatement("insert into sample values (?)")
            ) {
                for (int i = 1; i <= 10; i++) {
                    preparedStatement.setString(1, new String(pw) + i);
                    preparedStatement.execute();                    
                }

                while (resultSet.next()) {
                    System.out.println(resultSet.getString(1));
                }
            }
        }
    }
} 
```

正如其他人已经说过的那样，您不应该将密码以明文形式存储在数据库中。相反，您应该存储它的哈希值（[SHA-1 Hash in Java](http://www.anyexample.com/programming/java/java_simple_class_to_compute_sha_1_hash.xml)）。

# c# - Java 在许多内核上的扩展性比 C# 差得多？

> ID：10010979
> 
> 赞同：16
> 
> 时间：2012-04-04T12:20:42.470
> 
> 标签：c#, java, .net, eclipse, jvm-hotspot

我正在测试在 Java 和 C# 的 32 核服务器上运行相同功能的许多线程。我使用函数的 1000 次迭代运行应用程序，这些迭代使用线程池在 1、2、4、8、16 或 32 个线程上进行批处理。

在 1、2、4、8 和 16 个并发线程时，Java 的速度至少是 C# 的两倍。但是，随着线程数量的增加，差距缩小，C# 的平均运行时间几乎相同，增加了 32 个线程，但 Java 偶尔需要 2000 毫秒（而两种语言通常运行大约 400 毫秒）。Java 开始变得更糟，每个线程迭代所花费的时间大幅增加。

**编辑这是 Windows Server 2008**

**EDIT2 我更改了下面的代码以显示使用 Executor Service 线程池。我还安装了 Java 7。**

我在热点 VM 中设置了以下优化：

-XX:+UseConcMarkSweepGC -Xmx 6000

但它仍然没有让事情变得更好。代码之间的唯一区别是我使用下面的线程池和我们使用的 C# 版本：

[http://www.codeproject.com/Articles/7933/Smart-Thread-Pool](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)

有没有办法让 Java 更加优化？Perhaos，您可以解释为什么我看到性能大幅下降？

有没有更高效的 Java 线程池？

（请注意，我不是指改变测试功能）

```
import java.io.DataOutputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.PrintStream;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.ThreadPoolExecutor;

public class PoolDemo {

    static long FastestMemory = 2000000;
    static long SlowestMemory = 0;
    static long TotalTime;
    static int[] FileArray;
    static DataOutputStream outs;
    static FileOutputStream fout;
    static Byte myByte = 0;

  public static void main(String[] args) throws InterruptedException, FileNotFoundException {

        int Iterations = Integer.parseInt(args[0]);
        int ThreadSize = Integer.parseInt(args[1]);

        FileArray = new int[Iterations];
        fout = new FileOutputStream("server_testing.csv");

        // fixed pool, unlimited queue
        ExecutorService service = Executors.newFixedThreadPool(ThreadSize);
        ThreadPoolExecutor executor = (ThreadPoolExecutor) service;

        for(int i = 0; i<Iterations; i++) {
          Task t = new Task(i);
          executor.execute(t);
        }

        for(int j=0; j<FileArray.length; j++){
            new PrintStream(fout).println(FileArray[j] + ",");
        }
      }

  private static class Task implements Runnable {

    private int ID;

    public Task(int index) {
      this.ID = index;
    }

    public void run() {
        long Start = System.currentTimeMillis();

        int Size1 = 100000;
        int Size2 = 2 * Size1;
        int Size3 = Size1;

        byte[] list1 = new byte[Size1];
        byte[] list2 = new byte[Size2];
        byte[] list3 = new byte[Size3];

        for(int i=0; i<Size1; i++){
            list1[i] = myByte;
        }

        for (int i = 0; i < Size2; i=i+2)
        {
            list2[i] = myByte;
        }

        for (int i = 0; i < Size3; i++)
        {
            byte temp = list1[i];
            byte temp2 = list2[i];
            list3[i] = temp;
            list2[i] = temp;
            list1[i] = temp2;
        }

        long Finish = System.currentTimeMillis();
        long Duration = Finish - Start;
        TotalTime += Duration;
        FileArray[this.ID] = (int)Duration;
        System.out.println("Individual Time " + this.ID + " \t: " + (Duration) + " ms");

        if(Duration < FastestMemory){
            FastestMemory = Duration;
        }
        if (Duration > SlowestMemory)
        {
            SlowestMemory = Duration;
        }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-04T12:41:40.617

## 概括

以下是原始响应、更新 1 和更新 2。更新 1 讨论了使用并发结构处理测试统计变量周围的竞争条件。更新 2 是处理竞争条件问题的一种更简单的方法。希望我不再更新 - 很抱歉响应的长度，但多线程编程很复杂！

## 原始回复

> 代码之间的唯一区别是我使用下面的线程池

我会说这是一个绝对巨大的差异。当两种语言的线程池实现是完全不同的代码块，编写在用户空间时，很难比较两种语言的性能。线程池实现可能会对性能产生巨大影响。

您应该考虑使用 Java 自己的内置线程池。请参阅[ThreadPoolExecutor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)及其所属的整个[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)包。[Executors](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)类为池提供了方便的静态工厂方法，是一个很好的高级接口。您只需要 JDK 1.5+，尽管越新越好。其他海报提到的 fork/join 解决方案也是这个包的一部分——如前所述，它们需要 1.7+。

## 更新 1 - 使用并发结构解决竞争条件

`FastestMemory`您有围绕,`SlowestMemory`和的设置的竞争条件`TotalTime`。对于前两个，您正在执行`<`和`>`测试，然后在多个步骤中进行设置。这不是原子的；另一个线程肯定有可能在测试和设置之间更新这些值。的`+=`设置`TotalTime`也是非原子的：变相的测试和设置。

这里有一些建议的修复。

**总时间**

这里的目标是线程安全的、原子`+=`的`TotalTime`.

```
// At the top of everything
import java.util.concurrent.atomic.AtomicLong;  

...    

// In PoolDemo
static AtomicLong TotalTime = new AtomicLong();    

...    

// In Task, where you currently do the TotalTime += piece
TotalTime.addAndGet (Duration); 
```

**最快内存/最慢内存**

这里的目标是测试和更新`FastestMemory`，并且`SlowestMemory`每个步骤都在原子步骤中，因此没有线程可以在测试和更新步骤之间滑入以导致竞争条件。

**最简单的方法**：

使用类本身作为监视器来保护变量的测试和设置。我们需要一个包含变量的监视器以保证同步可见性（感谢@AH 捕捉到这一点。）我们必须使用类本身，因为一切都是`static`.

```
// In Task
synchronized (PoolDemo.class) {
    if (Duration < FastestMemory) {
        FastestMemory = Duration;
    }

    if (Duration > SlowestMemory) {
        SlowestMemory = Duration;
    }
} 
```

**中间方法**：

您可能不喜欢为监视器使用整个类，或者通过使用类来公开监视器等。您可以做一个单独的监视器，它本身不包含`FastestMemory`and `SlowestMemory`，但是您会遇到同步可见性问题。你可以通过使用`volatile`关键字来解决这个问题。

```
// In PoolDemo
static Integer _monitor = new Integer(1);
static volatile long FastestMemory = 2000000;
static volatile long SlowestMemory = 0;

...

// In Task
synchronized (PoolDemo._monitor) {
    if (Duration < FastestMemory) {
        FastestMemory = Duration;
    }

    if (Duration > SlowestMemory) {
        SlowestMemory = Duration;
    }
} 
```

**进阶方法**：

这里我们使用`java.util.concurrent.atomic`类而不是监视器。在激烈的争论下，这应该比这种`synchronized`方法表现得更好。试试看。

```
// At the top of everything
import java.util.concurrent.atomic.AtomicLong;    

. . . . 

// In PoolDemo
static AtomicLong FastestMemory = new AtomicLong(2000000);
static AtomicLong SlowestMemory = new AtomicLong(0);

. . . . .

// In Task
long temp = FastestMemory.get();       
while (Duration < temp) {
    if (!FastestMemory.compareAndSet (temp, Duration)) {
        temp = FastestMemory.get();       
    }
}

temp = SlowestMemory.get();
while (Duration > temp) {
    if (!SlowestMemory.compareAndSet (temp, Duration)) {
        temp = SlowestMemory.get();
    }
} 
```

让我知道这之后会发生什么。它可能无法解决您的问题，但是围绕跟踪您表现的变量的竞争条件太危险了，不容忽视。

我最初将此更新发布为评论，但将其移至此处，以便我有空间显示代码。此更新已经进行了几次迭代 - 感谢[AH](https://stackoverflow.com/users/947357/a-h)发现了我在早期版本中遇到的错误。此更新中的任何内容都将取代评论中的任何内容。

最后但同样重要的是，涵盖所有这些材料的优秀资源是[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)，这是最好的 Java 并发书籍，也是整体上最好的 Java 书籍之一。

## 更新 2 - 以更简单的方式解决竞争条件

我最近注意到您当前的代码将永远不会终止，除非您添加`executorService.shutdown()`. 也就是说，必须终止存在于该池中的非守护线程，否则主线程将永远不会退出。这让我想到，既然我们必须等待所有线程退出，为什么不在它们完成后比较它们的持续时间，从而完全绕过并发更新`FastestMemory`等呢？这更简单，可能更快；没有更多的锁定或 CAS 开销，并且`FileArray`无论如何您已经在进行迭代。

我们可以利用的另一件事是您的并发更新是非常安全的，因为每个线程都在写入单独的单元格，并且在写入期间`FileArray`没有读取。`FileArray`

有了它，您可以进行以下更改：

```
// In PoolDemo
// This part is the same, just so you know where we are
for(int i = 0; i<Iterations; i++) {
    Task t = new Task(i);
    executor.execute(t);
}

// CHANGES BEGIN HERE
// Will block till all tasks finish. Required regardless.
executor.shutdown();
executor.awaitTermination(10, TimeUnit.SECONDS);

for(int j=0; j<FileArray.length; j++){
    long duration = FileArray[j];
    TotalTime += duration;

    if (duration < FastestMemory) {
        FastestMemory = duration;
    }

    if (duration > SlowestMemory) {
        SlowestMemory = duration;
    }

    new PrintStream(fout).println(FileArray[j] + ",");
}

. . . 

// In Task
// Ending of Task.run() now looks like this
long Finish = System.currentTimeMillis();
long Duration = Finish - Start;
FileArray[this.ID] = (int)Duration;
System.out.println("Individual Time " + this.ID + " \t: " + (Duration) + " ms"); 
```

也试试这种方法。

您绝对应该检查您的 C# 代码是否存在类似的竞争条件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T12:43:13.400

> ...但 Java 有时需要 2000 毫秒...

和

```
 byte[] list1 = new byte[Size1];
    byte[] list2 = new byte[Size2];
    byte[] list3 = new byte[Size3]; 
```

hickups 将是清理您的阵列的垃圾收集器。如果你真的想调整，我建议你对数组使用某种缓存。

**编辑**

这个

```
 System.out.println("Individual Time " + this.ID + " \t: " + (Duration) + " ms"); 
```

在内部做一个或多个`synchronized`。因此，此时您的高度“并发”代码将被很好地序列化。只需将其删除并重新测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T04:48:27.117

虽然@sparc_spread 的回答很棒，但我注意到的另一件事是：

> 我用函数的 1000 次迭代运行应用程序

请注意，HotSpot JVM 在客户端模式下的任何函数的前 1.5k 次迭代和服务器模式下的 10k 次迭代都使用**解释**模式。HotSpot JVM 自动将具有这么多内核的计算机视为“服务器”。

这意味着 C# 将在 Java 之前执行 JIT（并以机器代码运行），并且有机会在函数运行时获得更好的性能。尝试将迭代次数增加到 20,000 次，然后从 10k 次迭代开始计数。

这里的基本原理是 JVM 收集有关如何最好地执行 JIT 的统计数据。它相信你的函数会随着时间的推移运行很多，所以它需要一个“慢速引导”机制来实现更快的整体运行时间。或者用他们的话说“20% 的功能在 80% 的时间内运行”，那么为什么要对它们进行 JIT 处理呢？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T12:26:19.310

你用的是java6吗？Java 7 具有提高并行编程性能的特性：

[http://www.oracle.com/technetwork/articles/java/fork-join-422606.html](http://www.oracle.com/technetwork/articles/java/fork-join-422606.html)

# mysql - mysql group_concat 问题

> ID：10010986
> 
> 赞同：3
> 
> 时间：2012-04-04T12:21:15.920
> 
> 标签：mysql, group-concat

我只是想知道这是否可能是 MYSQL`GROUP_CONCAT` 返回此类数据的功能。这是一个场景

```
SELECT GROUP_CONCAT(marks) AS `i need only 40 int in this column`  FROM marks 
```

当我执行此查询时，结果将显示如下

![在此处输入图像描述](../Images/42847e68a1a057ca5a7514258b13e21e.png)

需要结果`40`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:24:55.010

试试这个：

```
select group_concat(m.marks) from 
    ( select distinct marks from marks limit 40 ) m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:32:08.220

建议第一：规范化你的数据库表——一个字段应该只包含一个值。

现在，针对您的具体问题的解决方案：MySQL 具有[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)应该执行您想要的功能：

```
SELECT marks
FROM marks
WHERE FIND_IN_SET('40', marks) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:42:38.230

你的语法

```
SELECT GROUP_CONCAT(marks) AS `i need only 40 int in this column`  FROM marks 
```

工作正常。您正在给出`GROUP_CONCAT(marks)`name `i need only 40 int in this column`，因此它通过语法显示了您所说的内容。

> “结果需要 40”

当你使用 group_concat 并且你想记录分数是 40 时是什么意思？为什么不使用查询

```
select * from table_name where marks='40' 
```

如果 group_concat 是一个命令，那么使用

```
SELECT GROUP_CONCAT(marks) AS `i need only 40 int in this column`  FROM marks where marks='40' 
```

# database - 电子商务项目的数据库设计（我应该使用 EAV 方法）

> ID：10010992
> 
> 赞同：4
> 
> 时间：2012-04-04T12:21:39.253
> 
> 标签：database, database-design

我即将设计我的第一个电子商务数据库。

我在大多数电子商务网站中发现这些网站有类别，然后是子类别，然后是子类别，依此类推。并且 SubCategory 的深度不固定意味着一个 Category 有六个嵌套的 Sub Category 而其他一些有不同的

现在所有产品都有与之关联的属性。

现在我的问题是这些网站是否继续为嵌套子类别添加表并继续为数据库中的属性添加列

**或者**

他们应用称为“EAV”模型的东西（如果我是对的）来解决这个问题，或者他们继续添加列和/或表格，并继续更新网页，因为我发现在许多网站上现在有一个新类别。

（如果他们使用 EAV 模型，那么网站性能会受到影响，不是吗..）

由于这是我的第一个电子商务项目，请提供您的一些宝贵建议。

谢谢，

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T11:41:15.333

您需要的是产品功能的**EAV**和**产品类别的嵌套集的****组合**。

 ****虽然我当然同意 EAV 几乎总是一个糟糕的选择，但 EAV 是*完美*选择的一个应用程序是用于处理在线目录中的产品属性。

想想网站如何显示产品属性... 产品的属性总是显示为一个垂直列表，有两列：“属性” | “价值”。有时，这些列表显示多个产品的并排比较。EAV 非常适合做这种事情。使 EAV 对大多数应用程序而言毫无意义和效率低下的因素正是使 EAV 对在线目录中的产品属性有意义和高效的原因。

大家总是说“EAV 是邪恶的！”的原因之一。是 EAV 中的属性是“无意义的”，因为列名（即属性的含义）是表驱动的，因此不是由模式定义的。模式的全部意义在于赋予您的模型意义，因此这一点很好。 *然而*，对于在线产品目录，产品属性的含义*对于系统本身*来说并不重要。您的目录系统关心产品属性的唯一原因是将它们转储到列表或可能的产品比较矩阵中。*因此，在这种特殊情况下，* EAV 并不碰巧是邪恶的。

**对于产品类别**，您需要一个嵌套集模型，正如我在[这个问题](https://stackoverflow.com/questions/7420885/how-do-i-design-a-database-to-store-properties-selecting-attributes-by-synonyms/7423459#7423459)的答案中所描述的那样。嵌套集使您能够非常快速地检索以及遍历不平衡层次结构的多个级别，但需要在编辑时进行一些预先计算。****

# python - 将 pymssql 与 freetds 一起使用时出现 UnicodeDecodeError

> ID：10010994
> 
> 赞同：4
> 
> 时间：2012-04-04T12:21:56.617
> 
> 标签：python, unicode, freetds, pymssql

我想从 python 2.6 中获取 SQL Server 2008 中的一个字段。这是我的 freeTDS .conf 文件：

```
[ARGSERVER03]
    host = 192.168.1.3
    port = 1433
    tds version = 7.0 
```

这是代码：

```
conn = pymssql.connect(host='192.168.1.3', user='****', password='****', database='TrafficMonitor', as_dict=True, charset='UTF-8')
i = 0
cur.execute('SELECT * FROM dbo.tblTrafficCounterData')
while i < 10:
    car = cur.fetchone_asdict()
    if car is None:
        break
    c = car['Class']
    print c
    i = i + 1 
```

但它给出了：

```
UnicodeDecodeError: 'utf8' codec can't decode byte 0xd3 in position 0: invalid continuation byte 
```

Unicode 字段是波斯语。回溯是为了线`car = cur.fetchone_asdict()`

**[编辑]**

我已经从 sql server management studio 检查了数据库属性中的数据库排序规则，它是：

```
Arabic_CI_AS 
```

但是当我在字符集中使用它时，它给出了：

```
LookupError: unknown encoding: Arabic_CI_AS 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:14:03.820

您是否非常确定 SQL Server 使用的是 UTF-8（由您的 表示`charset='UTF-8'`）？通常，我遇到的大多数 SQL Server 实例都使用 Microsoft 编码（不是 UTF-8），例如 cp1252（在美国）。

一些可以帮助您发现正确编码的事情：

`SELECT DATABASEPROPERTYEX('dbname', 'Collation') SQLCollation`

*   [http://msdn.microsoft.com/en-us/library/ms143508.aspx](http://msdn.microsoft.com/en-us/library/ms143508.aspx)
*   [Python 编码表](http://docs.python.org/library/codecs.html#standard-encodings)

# java - 无法测试 JPA + Spring

> ID：10010995
> 
> 赞同：2
> 
> 时间：2012-04-04T12:21:56.987
> 
> 标签：java, spring, jpa, transactions

我有以下测试用例：

```
@ContextConfiguration("/spring/test-context.xml")
@TransactionConfiguration(transactionManager="txManager")
@Transactional()
public class MyEntityDaoTestCase extends AbstractJUnit4SpringContextTests { 

    @Autowired
    private MyEntityDao dao;

    @Test
    public void testSave_success() {
        MyEntity e = new MyEntity();
        dao.save(e);
        MyEntity result = dao.findById(e.getId());
        assertNotNull(result);      
    }
} 
```

我的 DAO 定义如下：

```
public abstract class MyEntityDAO {

    @PersistenceContext
    private EntityManager mEntityManager;

    public void save(MyEntity entity) {
        mEntityManager.persist(entity);
    }

    public MyEntity findById(Long id) {
        return mEntityManager.find(mEntityClass, id);
    }
} 
```

我的 Spring 配置如下：

```
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!-- 
        Bean post-processor for JPA annotations 
    -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <!--
        JPA entity manager factory 
     -->
    <bean id="jpaEntityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
      <property name="persistenceUnitName" value="unit-test-pu"/>
    </bean>

    <!--
        Transaction manager 
     -->
    <bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="jpaEntityManagerFactory"/>
    </bean>

    <!-- 
        Enable the configuration of transactional behavior based on annotations 
    -->
    <tx:annotation-driven transaction-manager="txManager"/>

    <!--
        DAO instance beans 
     -->
    <bean id="mockEntityDao" class="mypackage.MyEntityDao"></bean>

</beans> 
```

执行测试时我没有收到任何错误，但它不会通过。看起来 findById() 方法不会在数据库中找到实体。谁能建议如何正确测试这种情况？

编辑：

我的 JPA 提供程序处于休眠状态。我正在使用内存中的 HSQLDB 进行单元测试，并具有以下配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
   <persistence-unit name="unit-test-pu" transaction-type="RESOURCE_LOCAL">   
      <properties>
         <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver"/>
         <property name="javax.persistence.jdbc.user" value="sa"/>
         <property name="javax.persistence.jdbc.password" value=""/>
         <property name="javax.persistence.jdbc.url" value="jdbc:hsqldb:."/>
         <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
         <property name="hibernate.archive.autodetection" value="class"/>
         <property name="hibernate.show_sql" value="true"/>
         <property name="hibernate.format_sql" value="true"/>
         <property name="hibernate.hbm2ddl.auto" value="create"/>
      </properties>      
   </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:53:03.390

您可以尝试使用 @TransactionalConfiguration 注释和 Spring JUnit 运行器。

比如把你的班级改成这样：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/spring/test-context.xml")
@TransactionConfiguration(transactionManager="txManager", defaultRollback=true)
@Transactional
public class MyEntityDaoTestCase { 
```

这也意味着您不需要扩展抽象案例（因为您使用的是 Spring 运行器）——除非您特别喜欢这种方法。

这里有更多[细节](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html#testcontext-tx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:42:52.977

我认为您应该扩展[AbstractTransactionalJUnit4SpringContextTests](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/test/context/junit4/AbstractTransactionalJUnit4SpringContextTests.html)而不是 AbstractJUnit4SpringContextTests 以使`@Transactional`-annotations 产生任何效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:34:57.537

如果您严格遵循 TDD，则不应使用内存数据库，而应模拟所有内容。问题是persist 方法返回void。因此，您无法测试正确的响应（具有由数据库生成的 id 的实体）解决此问题的一种方法是对我们来说 Mockito doAnswer 方法，这里是一个示例：

```
@RunWith(MockitoJUnitRunner.class)
public class CookieRepositoryTest {

@Mock
 EntityManager em;

@Mock
 TimeService timeService;

@InjectMocks
 CookieRepository underTest = new CookieRepository();

@Test
 public void testCreateEntity() throws Exception {
 Cookie newCookie = new Cookie();

when(timeService.getTime()).thenReturn(new DateTime(DateTimeZone.UTC));

doAnswer(new Answer<Brand>() {
 @Override
 public Brand answer(InvocationOnMock invocationOnMock) throws Throwable {
 Object[] args = invocationOnMock.getArguments();
 Cookie cookie = (Cookie) args[0];
 cookie.setId(1);
 return null;
 }

}).when(em).persist(any(Brand.class));

Cookie persistedCookie = underTest.createEntity(newCookie);
 assertNotNull(persistedCookie.getId());
 }

} 
```

完整的解释可以在我的博客[文章](http://cyberroadie.wordpress.com/2012/07/02/how-to-test-a-jpa-repository/)中找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-26T19:31:58.043

如果您想测试持久层，还可以查看 DBUnit 功能。

您可以在此处找到来自 Petri Kainulainen 的一篇关于在基于 Spring 的场景中测试持久层（在本例中为 JPA）的好文章：

[http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-integration-testing/](http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-integration-testing/)

有了这个，您可以测试 DAO 类是否按预期运行，写入和读取数据库，在服务层上您可以避免测试这方面，更多地关注业务逻辑的“模拟”方法。

希望能帮助到你

弗兰