# StackOverflow 问答 10399000-10399999

# linux - 通过 sftp 连接进入最后创建的目录

> ID：10399001
> 
> 赞同：0
> 
> 时间：2012-05-01T14:17:38.957
> 
> 标签：linux, shell

我已经通过 Linux shell 脚本打开了到远程服务器的 SFTP 连接，现在我需要进入目录**/distribution**中最后创建的目录并从中下载文件，代码如下所示：

```
lftp -u ${sourceEnv},${sourcePass} sftp://${sourceHost}<<EOF
cd $sourceBuildDir/distribution
variable=$(ls -t -r | tail -n 1)
cd $variable
mget *
bye
EOF 
```

但它不能通过 SFTP 连接工作，命令**ls -t -r | tail -n 1**本身也不是**变量**创建。有任何想法吗 ？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:02:53.637

与 Marc B 的回答相同，我认为您无法在 lftp 内完成所有操作。特别是我不认为它支持用户变量......（我应该检查......）

因此，出于某些目的，您可以在 lftp 脚本中调用用于启动 lftp 的 shell。例如：

```
# This is a lftp script (like yours)
ls -tr| ! "tail -1|awk '{print $NF}'" 
```

“！”之后的所有内容 传递给 Unix shell。被调用的“尾巴”是系统尾巴，而不是一些 lftp 命令。awk 也是如此，我用它来仅获取目录的名称（lftp 的 ls 提供所有文件权限等......）

对于更复杂的事情（根据您的要求），我相信您最好使用使用 lftp 的 shell 脚本，就像任何其他 shell 命令一样。您的示例将变为：

```
 # Call lftp to log in and do 'ls', capture the ouput and process it.
    sourceBuildDir=$(lftp -c "open ${sourceEnv}:${sourcePass}@${sourceHost}; ls" \
                     |tail -1|awk '{print $NF}');
    echo "I am about to download $sourceBuildDir";
    # Call lftp with the processed dir name and do the rest 
    # (btw. did you consider using the 'mirror' command?)
    lftp -c "open ${sourceEnv}:${sourcePass}@${sourceHost}; \
             cd $sourceBuildDir/distribution; mget *"; 
```

PS 有时 lftp 命令会产生额外的东西，例如“[FEAT协商...]”，可能会破坏脚本。您可能可以通过重复两次 lftp 命令来解决，以便第二次成功，而无需 lftp 进一步协商。

希望这有助于走上正轨！干杯。

# javascript - 停止输入表单的字符

> ID：10399003
> 
> 赞同：4
> 
> 时间：2012-05-01T14:17:50.927
> 
> 标签：javascript, jquery, forms, keyboard, jquery-events

我有这个 jQuery 可以阻止按下回车键，并且我已经准备好接受一系列不允许的按键。

```
 $('.form input').bind('keypress', function(e) {
        var keys = [13];
        for (var i = keys.length; i--;){
            if(e.keyCode===keys[i]){
                return false;
            }
        }
    }); 
```

我想对`|`角色做类似的事情，但由于它是 220 的转变，我不需要停止`\`输入表单，我如何限制该角色或使用修饰键？（当然，也将在服务器端处理它）。

我也知道特殊字符的键盘布局可能因不同的本地化键盘而异，因此可能需要关注生成的字符而不是键本身（不完全确定），但我不想引入大量开销

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:25:39.983

该`keypress`事件是关于*字符*，而不是键。您可以直接与( )`keyCode`的字符代码进行比较，无需担心 shift 键被按下（并且可能并非在所有键盘上都有）。`"|"``"|".charCodeAt(0)`

示例 - [Live Copy](http://jsbin.com/esopiv) | [来源](http://jsbin.com/esopiv/edit)：

HTML：

```
<p>Try to type | in the box below.</p>
<input id="theInput" type="text" size="80"> 
```

JavaScript：

```
jQuery(function($) {

  var keys = [13, "|".charCodeAt(0)];
  $("#theInput").keypress(function(e) {
    var index;

    for (index = 0; index < keys.length; ++index) {
      if (keys[index] === e.keyCode) {
        display("Denied!");
        return false;
      }
    }
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

或者正如[bažmegakapa 指出的那样](https://stackoverflow.com/a/10399130/157247)，由于您已经在使用 jQuery，您可以使用它的[`inArray`](http://api.jquery.com/jQuery.inArray/)功能：

```
jQuery(function($) {

  var keys = [13, "|".charCodeAt(0)];
  $("#theInput").keypress(function(e) {
    if ($.inArray(e.keyCode, keys) !== -1) {
      display("Denied!");
      return false;
    }
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T14:27:53.763

管道的键码是`124`这样的：

```
$('.form input').bind('keypress', function(e) {
    var keys = [13, 124];
    for (var i = keys.length; i--;){
        if(e.keyCode===keys[i]){
            return false;
        }
    }
});​ 
```

[查看演示](http://jsfiddle.net/MT72a/)

如果您仍然使用 jQuery，则可以使用以下[`inArray()`](http://api.jquery.com/jQuery.inArray/)方法：

```
$('.form input').bind('keypress', function(e) {
    var keys = [
        13, // enter
        124 // |
    ];
    return $.inArray(e.keyCode, keys) === -1;
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:24:10.247

总之，最好的解决方案是：

```
var keys = [13, "|".charCodeAt(0)];
$(".form input").keypress(function(e) {
    return $.inArray(e.keyCode, keys) === -1;
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-01T14:30:01.430

如果您只是想不包含特定字符（甚至是一组字符），我认为更好的方法是从表单值中删除任何受限字符。

`$('.form input').keyup(function(e){ $(this).val( $(this).val().replace("|", "" ) ); });`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-01T14:21:47.987

您可以检查是否`e.shiftKey`为真，但这需要您修改数组。我个人会使用类似的东西：

```
var mod = {
    NONE:0,
    SHIFT:1,
    CTRL:2,
    ALT:4
};
var keys = [
    [13,mod.NONE], // enter, no mod
    [220,mod.SHIFT] // \ with Shift = |
];
for( var i=keys.length; i--;) {
    if( e.keyCode === keys[i][0] && (e.shiftKey + 2*e.ctrlKey + 4*e.altKey) === keys[i][1]) {
        return false;
    }
} 
```

# hibernate - 使用 H2 进行 Hibernate 配置的问题

> ID：10399014
> 
> 赞同：0
> 
> 时间：2012-05-01T14:19:09.633
> 
> 标签：hibernate, configuration, h2

我正在尝试将 Hibernate 配置为在 H2 上工作，但是当我调用时：
`Configuration cfg = new Configuration().configure();`
调用`new Configuration()`输出以下内容：
`מאי 01, 2012 5:10:41 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
מאי 01, 2012 5:10:41 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.1}
מאי 01, 2012 5:10:41 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
מאי 01, 2012 5:10:41 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist`

但这并没有停止执行......在此之后，对`.configure()`输出的调用：
`מאי 01, 2012 5:14:39 PM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
מאי 01, 2012 5:14:39 PM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
מאי 01, 2012 5:14:39 PM org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null`

这些消息是什么意思？

休眠.cfg.xml：

```
<session-factory>

    <!-- Database connection settings -->
    <property name="connection.driver_class">org.h2.Driver</property>
    <property name="connection.url">jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE</property>
    <property name="connection.username">user</property>
    <property name="connection.password">password</property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.H2Dialect</property>

    <!-- Disable the second-level cache  -->
    <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>

    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

    <!-- Drop and re-create the database schema on startup -->
    <property name="hbm2ddl.auto">create</property>

    <!-- Names the annotated entity class -->
    <mapping class="database.datatypes.Course"/>
    <mapping class="database.datatypes.Distance"/>
    <mapping class="database.datatypes.ExamRange"/>
    <mapping class="database.datatypes.NumExamsOnDate"/>
    <mapping class="database.datatypes.RecommendedSchedule"/>

</session-factory> 
```

代表表的类之一：

`@Entity public class Distance {`

```
private Course courseA, courseB;
private Long MinDistance, Cost;

@Id
@GeneratedValue(generator="increment")
@GenericGenerator(name="increment", strategy = "increment")
private Long id;

public Distance() {
    super();
}

public Distance(Course courseA, Course courseB, Long minDistance, Long cost) {
    super();
    this.courseA = courseA;
    this.courseB = courseB;
    MinDistance = minDistance;
    Cost = cost;
}

@Override
public String toString() {
    return "Distance [courseA=" + courseA + ", courseB=" + courseB
            + ", MinDistance=" + MinDistance + ", Cost=" + Cost + "]";
}

public Course getCourseA() {
    return courseA;
}

public void setCourseA(Course courseA) {
    this.courseA = courseA;
}

public Course getCourseB() {
    return courseB;
}

public void setCourseB(Course courseB) {
    this.courseB = courseB;
}

public Long getMinDistance() {
    return MinDistance;
}

public void setMinDistance(Long minDistance) {
    MinDistance = minDistance;
}

public Long getCost() {
    return Cost;
}

public void setCost(Long cost) {
    Cost = cost;
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
} 
```

}

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:23:45.563

如您所见，您提到的消息来自 INFO 级别。来自这个日志级别的消息通常会让你知道底层框架（这里是 Hibernate）在做什么。所以，在那种情况下，一切都很好。如果您认为这些消息太令人不安，只需将日志记录级别更改为类似 WARN。

# php - 哪种方法更好总是使用 file_put_contents 写入数据或检查数据是否更改然后更新文件？

> ID：10399019
> 
> 赞同：0
> 
> 时间：2012-05-01T14:19:33.797
> 
> 标签：php, mysql

好的，所以我想知道这两种方法中哪一种更好？

方法一：从数据库中查询字符串，直接使用file_put_contents()

方法2：从数据库查询字符串，使用file_get_contents，检查数据库和文件中的两个数据是否相同，如果不使用file_put_contents()

只是想知道对于站点上显示页面所需的主文件，哪个是更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:22:26.247

如果字符串每次都更改，方法 1 会更好。

如果对数据库查询的更改比例变少，则不能具体说。

如果字符串永远不会改变，那么方法 2 显然会更好。

通常，从文件中读取比从文件中保存要快。在哪个阶段，通过硬件和软件为您的计算机带来回报，您需要对其进行度量以做出有根据的猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:24:24.033

如果字符串变化很大，方法1会更好。

如果字符串不经常更改，方法 2 会更好。

这与阅读比写作快的事实有关。

您可以考虑在数据库中放置一个值，说明字符串内容是否已保存，如果没有：

*   保存
*   更新数据库说它已保存。

# mysql - MySql 根据其他字段更新字段

> ID：10399020
> 
> 赞同：1
> 
> 时间：2012-05-01T14:19:35.830
> 
> 标签：mysql, database, wordpress

我正在尝试为另一个自定义元字段等于 1 的所有 WordPress 帖子更新自定义元。

我的桌子看起来像这样

```
元ID | post_id | 元密钥 | 元值
------------------------------------------------
0001 | 第1234章 _p_free | 1
0002 | 第1234章 new_free | 空值
0003 | 第2345章 _p_free | 1
0004 | 第2345章 new_free | 空值
0005 | 9876 | _p_free | 0
0006 | 9876 | new_free | 空值
```

所以，正如你所看到的，我想做的是运行一个查询，找到所有带有 meta_key = _p_free 和 meta_value = 1 的帖子，然后用相同的 post_id 更新 new_free 也等于 1。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:24:41.370

您需要将[多表`UPDATE`语法](http://dev.mysql.com/doc/refman/5.5/en/update.html)与自联接一起使用：

```
UPDATE tbl AS t1 JOIN tbl AS t2 USING (post_id)
SET t1.meta_value = 1
WHERE t2.meta_key = '_p_free' AND t2.meta_value = 1 
```

# svn - svn 提交对旧版本所做的更改

> ID：10399022
> 
> 赞同：3
> 
> 时间：2012-05-01T14:19:37.177
> 
> 标签：svn

这应该很简单，但不知何故我无法弄清楚：

我更新到倒数第二个修订版，比如说修订版 100（HEAD 位于 101），如下所示：`svn up -r 100`. 然后我进行了各种更改，现在我希望将修改后的文件作为修订版 102 签入（这样我可以在需要时返回到 101）。我怎么做？如果我只是简单地做一个，`svn commit`我会得到一个“过时”的错误。我`svn up`无法解决过时的问题，因为我不希望 HEAD (101) 中的任何更改回来......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:27:21.883

将更改的文件保存到临时文件夹。重命名本地存储库以进行备份。创建新的本地存储库。将代码更改粘贴回复制到临时文件夹的文件中。犯罪。

在提交之前，您可能需要执行 KDiff 以确认所有更改都正确。

希望这有助于解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:53:19.750

In order to undo the changes of a previous commit, you should use `svn merge`, not `svn up`:

Instead of `svn up -r100`, check out the HEAD revision and do `svn merge -c -101 .`

That results in the same content in your local files, but now subversion will no longer try to reapply revision 101's changes before allowing you to commit.

See also [the svn manual on undoing changes](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo).

# java - 在浏览器中预览本地 html 文件

> ID：10399023
> 
> 赞同：4
> 
> 时间：2012-05-01T14:19:37.813
> 
> 标签：java, javascript, html, jsf, file-upload

我有一个用户可以上传文件的网页。他可以用标签选择要上传的文件`<t:inputFileUpload>` `jsf`。（这个标签就像标准的HTML输入标签一样`type="file"`）。

我想添加预览功能。

当用户选择一个文件（例如：`html`文件）时，他可以预览他的 html 本地文件。

我知道浏览器的安全限制原因存在“问题”。

我的第一个解决方案是将文件从用户本地计算机加载到服务器，然后在服务器上创建指向该文件的链接。问题是我的服务器存在风险，也许这个文件已损坏......

有人对这个未来有想法和解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:34:50.687

这是一个显示文件预览的简单[JSFiddle](http://jsfiddle.net/brantolsen/zkaDA/)`html`。[我从这里](http://www.html5rocks.com/en/tutorials/file/dndfiles/)找到的教程创建了它。

对您来说最有用的代码部分如下

```
var f = // uploaded file.
var reader = new FileReader();
// Closure to capture the file information.
reader.onload = (function(theFile) {
    return function(e) {
         // Render the file.
         $("#preview").html(e.target.result);
    };
})(f);

// Read in the html file as text.
reader.readAsText(f); 
```

这使用 HTML5`FileReader`来读取和显示`html`文件的内容。

# asp.net - 保护管理面板 - 使用 SQL 的 ASP.NET

> ID：10399032
> 
> 赞同：0
> 
> 时间：2012-05-01T14:20:10.993
> 
> 标签：asp.net, linq, security, entity-framework-4

我有一个我自己编写的电子商务系统。我在此表中有一个表“admin_table”，我存储管理员用户名和管理员密码。我只为自己使用这个系统——但我希望它超级安全——在代码中硬编码设置用户名和密码还是保持当前方法更好？保护它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:26:58.563

如果您需要**超级安全**，我认为两种方式都不会达到您的预期。

因为代码中的硬编码意味着，任何阅读代码的人都可以获得您的*密码*。

就安全性而言，将密码另存为数据库字段也不是一个很好的方法。

如果您可以以某种`encrypted`方式保存密码或使用类似的方式`membership provider`为您进行加密。

您可能需要查看[成员资格简介](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)和 [创建自定义成员资格提供程序](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

# android - Android 和 OpenGL ES 1.1 的 ConcurrentModificationException

> ID：10399033
> 
> 赞同：0
> 
> 时间：2012-05-01T14:20:14.840
> 
> 标签：android, opengl-es, concurrency

我对 OpenGL 编程很陌生，我制作了一个简单的引擎来简化我的绘图，这很有效。现在我想根据加速度计进行转换，我得到了*ConcurrentModificationException*。

这是对象类：

```
public class IbnRushdObject
{
    /** The graphical object to show */
    private Mesh mesh = null;

    /** List of transformations to be executed upon this object */
    private List<IbnRushdTransformation> transformations;

    /** Lock to prevent modification of the list when executing the transformations and viceversa */
    private final ReentrantLock lock = new ReentrantLock();

    /**
     * Initializes this IbnRushd object with a mesh
     * @param mesh
     */
    public IbnRushdObject(Mesh mesh)
    {
        this.mesh = mesh;
    }

    /**
     * Adds a transformation to be performed on this object<br>
     * The transformation does not take place until {@link #moveDraw(GL10)} is called
     * @param trans
     */
    public void addTransformation(IbnRushdTransformation trans)
    {
        try
        {
            lock.lock();
            if (transformations == null)
            {
                transformations = new LinkedList<IbnRushdTransformation>();         
            }
            transformations.add(trans);
        }
        finally
        {
            lock.unlock();
        }
    }

    /**
     * Executes transformations for this object and draws it
     * @param gl
     */
    public void moveDraw(GL10 gl)
    {
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();

        try
        {
            lock.lock();
            for(IbnRushdTransformation trans: transformations) // ConcurrentMoificationException thrown here
            {
                trans.execute(gl);
                if (!trans.isPermanent())
                {
                    transformations.remove(trans);
                }
            }
        }
        finally
        {
            lock.unlock();
        }

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_COLOR_ARRAY);

        mesh.draw(gl);
    }
} 
```

并且*moveDraw()*方法只能从

```
@Override
public void onDrawFrame(GL10 gl)
{
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glClearColor(0, 0.5f, 0.5f, 1.0f);

    for(IbnRushdObject object : objectQueue)
    {
        object.moveDraw(gl);
    }
} 
```

它包含要绘制的所有对象的列表。

这是监听加速度计事件的代码。侦听器方法是*onEventChange()*。

```
public class IbnRushdOrientation implements ServiceListener<Orientation>
{
    private IbnRushdObject object = null;

    public IbnRushdOrientation(IbnRushdObject obj)
    {
        object = obj;
    }

    @Override
    public void onEventChange(Orientation arg0)
    {
        IbnRushdRotation hrot = new IbnRushdRotation();
        hrot.setFixed(0, 0, 1, 0);
        hrot.setIncremental((float)arg0.getHorizontalAngle());
        hrot.setPermanent(false);

        IbnRushdRotation vrot = new IbnRushdRotation();
        vrot.setFixed(0, 1, 0, 0);
        vrot.setIncremental((float)arg0.getVerticalAngle());
        vrot.setPermanent(false);

        object.addTransformation(hrot);
        object.addTransformation(vrot);
    }
} 
```

我`for(IbnRushdTransformation trans: transformations)`在*moveDraw()*方法中得到 ConcurrentModificationException 。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:33:06.350

在迭代对象时，您无法从列表中删除它。这就是导致异常的原因。

如果您使用迭代器而不是 for 循环 (transformations.iterator()) 来迭代列表，那么您可以调用 iterator.remove() 以在迭代时安全地删除它。

“请注意，Iterator.remove 是在迭代期间修改集合的唯一安全方法；如果在迭代过程中以任何其他方式修改基础集合，则行为未指定。”

[http://java.sun.com/docs/books/tutorial/collections/interfaces/collection.html](http://java.sun.com/docs/books/tutorial/collections/interfaces/collection.html)

# javascript - Dojo 拖放问题：将目标容器中的数据转换为 JSON

> ID：10399036
> 
> 赞同：1
> 
> 时间：2012-05-01T14:20:31.767
> 
> 标签：javascript, json, dojo, drag-and-drop

我有两个 DND 容器，SourceContainer 和 TargetContainer SourceContainer 有一些 json 数据，例如：

```
Apple 
Orange 
Banana 
```

使用以下 Json：

```
var json = {"fruits": [
           {"fruitId": 1, "fruitName": "Apple", "fruitDesc": "This is an Apple"},
           {"fruitId": 2, "fruitName": "Orange", "fruitDesc": "This is an Orange"},
           {"fruitId": 3, "fruitName": "Banana", "fruitDesc": "This is a Banana"}
        ]
    };

var results="";
   for(var i=0;i<json.fruits.length;i++){
     results += '<div class="dojoDndItem ">' + '<span style="visibility: hidden">' + json.fruits[i].fruitId + '</span>' + json.fruits[i].fruitName  + '</div>';
   } 
```

**我的源容器**

```
<div><label>Fruits</label></div> 
<div dojoType="dojo.dnd.Source" id="source1" copyonly="false" delay="8" class="container dojoDndSource dojoDndTarget dojoDndContainer">
<div dojoType="dojo.dnd.Source" ></div> results </div> 
```

**我的目标容器**

```
<div><label>Basket</label></div>
<div dojoType="dojo.dnd.Source"  id="source2" copyonly="false" descending="true" delay="8" class="container dojoDndSource dojoDndTarget dojoDndContainer">
<div dojoType="dojo.dnd.Source" ></div>
</div>

<button id="toJsonBtn" data-dojo-type="dijit.form.Button" type="button">ToJson</button> 
```

现在，当我将“Apple”和 Banana 拖到 TargetContainer 并单击按钮时，我希望 TargetContainer 中的数据在 Json 中转换。

这样做的任何想法。感谢任何帮助。谢谢

**注意：**强制不使用 JQuery :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:31:26.617

我想出了如何解决它。如果有人感兴趣，以下是解决方案；

**我们的 Json**

```
var json = {"fruits": [
               {"fruitId": 1, "fruitName": "Apple", "fruitDesc": "This is an Apple"},
               {"fruitId": 2, "fruitName": "Orange", "fruitDesc": "This is an Orange"},
               {"fruitId": 3, "fruitName": "Banana", "fruitDesc": "This is a Banana"}
            ]
        }; 
```

**目标容器中的项目**

```
Apple 
Orange 
Banana 
```

**创建目标容器**

```
var fruitListContainer = new dojo.dnd.Source("fruitNode");

dojo.connect(dojo.byId('toJsonBtn'), 'onclick', function() {
  var target_container = fruitListContainer.getAllNodes();
  var fruit_arr = [];
  for(var i=0;i<target_container.length;i++){
      var fruit_results = target_container[i].childNodes[0].nodeValue;
      roles_arr.push(fruit_results);
  }
var result={};
result["fruits"]=fruit_arr;
alert(JSON.stringify(result)); 
```

警报输出将是（这是必需的）：

```
{"fruits":["Apple","Orange","Banana"]} 
```

**注意：** *如果需要任何解释，我很乐意提供帮助。*

# android - progressDialog 有最短时间吗？

> ID：10399039
> 
> 赞同：0
> 
> 时间：2012-05-01T14:20:43.200
> 
> 标签：android, mysql, progressdialog

嗨，我正在尝试在远程服务器上连接到 mysql 数据库时使用进度对话框，通常需要大约 1 秒（大约）来注册/创建帐户，但我想确定我不会去冻结应用程序......所以我放了一个进度对话框，因为治疗非常快，我想它没有出现？那正确吗 ？是否有最短时间出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:30:55.447

您可以在线程中启动 processDialog。

```
private ProgressDialog progDialog;
String str_process = getResources().getString(R.string.str_process);  
String str_wait = getResources().getString(R.string.str_wait);  
progDialog = ProgressDialog.show(MyApp.this, str_process, str_wait);  
new Thread() {  
    public void run() {  
        try{
            //TOTO here, put your code here or sleep few seconds
        }catch (Exception e){ }
     handler.sendEmptyMessage(0);
     progDialog.dismiss();
     }
 }.start();

private Handler handler = new Handler(){
    @Override  
    public void handleMessage(Message msg){

    }
}; 
```

可能对你有帮助。

# android - 活动未完成

> ID：10399042
> 
> 赞同：0
> 
> 时间：2012-05-01T14:20:48.623
> 
> 标签：android, android-activity, countdowntimer

我有 3 个活动（a、b 和 c）。在活动 a 中，我有一个倒数计时器，它在几秒钟后开始活动 b。在活动 a 中，用户可以启动活动 c：

```
Intent myIntent = new Intent(a.this, c.class);
a.this.startActivity(myIntent);
finish(); 
```

使用此代码，我想完成倒数计时器活动 a 并启动 c。现在的问题：当用户启动 c 时，c 启动但倒计时没有停止并在完成时启动活动 b。为什么？我已经用倒数计时器完成了洞活动。我不明白。我也试过`onDestroy()`了，但它不起作用。我的倒计时：

```
new CountDownTimer(7000, 1000) {
  public void onTick(long millisUntilFinished) { }
  public void onFinish() { }
}.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:36:12.053

```
public class a extends Activity {
   CountDownTimer timer;

   public void onCreate(Bundle bundle)
   {
     // ..
     timer = new CountDownTimer(7000, 1000) {
       public void onTick(long millisUntilFinished) { }

       public void onFinish() {
        Intent myIntent = new Intent(a.this, b.class);
        a.this.startActivity(myIntent);           
       }
     }.start();
   }

   public void startActivityC()
   {
      timer.cancel();
      Intent myIntent = new Intent(a.this, c.class);
      a.this.startActivity(myIntent);      
   }   
} 
```

请记住，这是伪代码，可能存在错误/错误。它只是为了说明技术而不是工作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:29:40.837

当您使用 a.this.startActivity(myIntent) 开始新活动时；'a' 活动停止，并且从不执​​行 finish() 调用。您应该在开始“c”活动之前停止计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:56:38.830

覆盖活动 a 的 onPause() 函数以停止计时器 - 可能通过检查由任何按钮或操作启动活动 c 设置的布尔变量。

# facebook - 可以使用图形 api 从 facebook 用户配置文件中删除什么？

> ID：10399043
> 
> 赞同：0
> 
> 时间：2012-05-01T14:20:49.077
> 
> 标签：facebook, graph, profile

即使在获得适当的权限和有效的访问令牌后，应用程序也无法从用户个人资料中删除图片，这让我感到震惊。我想知道可以使用图形 API 从用户配置文件中删除哪些对象/操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:00:20.797

用户对象上的可删除连接列在文档中： [https ://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

照片未列为应用可以删除的内容。

# xslt - XSL - 计算表格宽度

> ID：10399045
> 
> 赞同：0
> 
> 时间：2012-05-01T14:20:57.203
> 
> 标签：xslt, xpath

我在尝试获取每个 td 的宽度时遇到问题，我目前在列宽中得到一个空白值，如何获取每个 td 的值。

```
 <xsl:template match="table">
    <fo:table table-layout="fixed">
    <xsl:call-template name="tokenize-style"/>
      <!-- Calculate the table cols... -->
      <xsl:for-each select="tbody/tr[1]/td">
        <fo:table-column>  
          <xsl:attribute name="column-width">
<xsl:value-of select="@width"></xsl:value-of>

          </xsl:attribute>
        </fo:table-column>
      </xsl:for-each>
      <xsl:apply-templates select="*|text()"/>
    </fo:table>
  </xsl:template>
  <xsl:template match="tbody">
    <fo:table-body>
      <xsl:apply-templates select="*|text()"/>
    </fo:table-body>
  </xsl:template> 
```

基于 HTML ->

```
<table class="te-tablerenderer" style="width: 170mm; text-align: left;">
            <tbody style="text-align: left;">
               <tr class="" style="text-align: left;">
                  <td style="width: 141px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(255, 255, 255); border-right-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); border-left-color: rgb(255, 255, 255); "> </td>
                  <td style="width: 143px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(255, 255, 255); border-right-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); border-left-color: rgb(255, 255, 255); ">          
                     <b>Postcode:</b>        
                  </td>       
                  <td class="GENTICS_Table_Cell_active"
                      style="width: 325px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(255, 255, 255); border-right-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); border-left-color: rgb(255, 255, 255); ">          
                     djnds fnjksdnf      
                  </td>        
                  <td style="width: 33px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(255, 255, 255); border-right-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); border-left-color: rgb(255, 255, 255); ">         </td>    
               </tr>
            </tbody>
         </table> 
```

注意：这是我想要获取元素的所有样式时调用的模板：

```
 <xsl:template name="tokenize-style">
    <xsl:param name="pString" select="string(@style)"/>
    <xsl:choose>
      <xsl:when test="not($pString)"/>
      <xsl:when test="contains($pString,';')">
        <xsl:call-template name="tokenize-style">
          <xsl:with-param name="pString"
               select="substring-before($pString,';')"/>
        </xsl:call-template>
        <xsl:call-template name="tokenize-style">
          <xsl:with-param name="pString"
               select="substring-after($pString,';')"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:attribute name="{normalize-space(substring-before($pString,':'))}">
          <xsl:value-of select="normalize-space(substring-after($pString,':'))"/>
        </xsl:attribute>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template> 
```

**输出**

```
<fo:table table-layout="fixed" width="170mm" text-align="left">
                  <fo:table-column column-width=""/>
                  <fo:table-column column-width=""/>
                  <fo:table-column column-width=""/>
                  <fo:table-column column-width=""/>
                  <fo:table-body>
                     <fo:table-row>
                        <fo:table-cell padding-start="1pt" padding-end="1pt" padding-before="1pt" padding-after="1pt"
                                       padding-top="1pt"
                                       padding-bottom="1pt">
                           <fo:block> </fo:block>
                        </fo:table-cell> 
```

（..ETC）

*注意*列宽是空白...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:48:34.510

问题是`td`s 没有`width`属性-您应该`tokenize-style`在每个模板上调用模板`td`，然后从其输出中获取宽度，或直接从属性中提取宽度`style`-如下所示：

```
 <xsl:attribute name="column-width"> 
     <xsl:value-of select="normalize-space(substring-before(substring-after(@syle,'width:'),';'))" /> 
  </xsl:attribute> 
```

# asp.net - 使 HTTPHandler (ashx) 在 ASP.NET 中放置会话 cookie

> ID：10399048
> 
> 赞同：1
> 
> 时间：2012-05-01T14:21:08.733
> 
> 标签：asp.net, session, cookies, httphandler, ashx

如何在 ashx 文件中创建 HTTPHandler PLACE 由 ASP.NET 管理的 SessionCookie？似乎 ashx-File 的调用没有放置 cookie，因此无法维护会话。

背景：我即将编写基于 HTTP 的 Web 服务包装器。不同的客户端调用我提供给他们的 URL 并带有给定的参数。我检查凭据，调用第 3 方 Web 服务并将更改的结果返回给客户端。第 3 方 Web 服务提供商通过合同要求为每个不同的客户端调用提供一个 SessionID。

解决方案：HTTPHandler 似乎是最好的选择。所以我创建了一个网站项目。不幸的是，直接调用 ashx-File 似乎不会将会话 cookie 添加到响应中，因此会为来自同一客户端的每次调用创建一个新的 SessionID。

我做了以下相关：

*   实现标记接口 IRequiresSessionState 或/和 IReadOnlySessionState
*   添加`<sessionState mode="InProc" cookieless="false" timeout="20" />` 到 web.config
*   在 Session_Start-Method HttpContext.Current.Session("init") = 0 的 Global.asax 文件中保存会话状态中的某些内容

不同的尝试，但应该避免：

*   在调用 ashx 文件之前，调用 Default.aspx 文件会放置一个会话 cookie，因此会话会被维护。
*   使用数据库和时间戳实现“自己的”会话。

版本：IIS 6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:28:53.897

`IRequireSessionState`并且`IRequireReadOnlySessionState`是互斥的。如果您打算以任何方式更新会话状态，则应该只实施前者。

# c# - 解决错误：'Timer' 是 'System.Windows.Forms.Timer' 和 'System.Timers.Timer' 之间的模糊引用

> ID：10399050
> 
> 赞同：2
> 
> 时间：2012-05-01T14:21:11.633
> 
> 标签：c#

我正在尝试创建一个 Windows 窗体应用程序，并且我想实现一个计时器。

```
 public void timerStart()
    {
        DateTime now = DateTime.Now;
        DateTime finish = base.taskEndDate;
        finish = finish.AddHours(_appointmentTime.Hours); //_appointmentTime is a user defined value.
        finish = finish.AddMinutes(_appointmentTime.Minutes);
        finish = finish.AddMilliseconds(_appointmentTime.Milliseconds);

        //Calculating the milliseconds left till task ends.
        int daysLeft = finish.Day - now.Day;
        int hoursLeft = finish.Hour - now.Hour;
        int minsLeft = finish.Minute - now.Minute;
        int secLeft = finish.Second - now.Second;
        int milLeft = finish.Millisecond - now.Millisecond;

        //Preparing to Start the timer.
        TimeSpan end = new TimeSpan(daysLeft, hoursLeft, minsLeft, secLeft, minsLeft);
        MessageBox.Show(end.ToString());
        double x = end.TotalMilliseconds;
        System.Timers.Timer _timer = new Timer(x);          

    } 
```

是我如何定义我的方法但我收到错误

```
 'Timer' is an ambiguous reference between 'System.Windows.Forms.Timer' and 'System.Timers.Timer' 
```

而且我不确定如何解决该错误。一旦计时器结束，我计划制作一个提醒用户的事件。我不希望计时器出现在表单上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:23:05.350

您似乎添加了两个`using`引用（`System.Windows.Forms`和`System.Timers`）。所以要么删除一个或完全限定类型名称：

```
System.Timers.Timer _timer = new System.Timers.Timer(x); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T14:26:21.793

您可以使用类型别名来消除它们的歧义，如下所示：

```
using System.Timers;
using Timer = System.Timers.Timer; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T14:23:06.893

System.Timers.Timer _timer = new System.Timers.Timer(x);

计时器不会出现在表单上，​​它们不是可视的。

还要记住 DNF 中（三种！）不同类型的计时器之间的差异。

[http://msdn.microsoft.com/en-us/magazine/cc164015.aspx](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

# mysql - Rails 本地服务器无法启动

> ID：10399054
> 
> 赞同：0
> 
> 时间：2012-05-01T14:21:43.080
> 
> 标签：mysql, ruby-on-rails, gem, connection

我正在尝试在我的 Rails 中设置一个本地测试服务器，但我不断收到错误，我无法在线找到解决方案的错误，所以这就是我来到这里的原因。我是一名平面设计师，所以我对 Rails 的了解不是很好，这是为了工作。无论如何，这里是我尝试启动测试服务器时的代码......我猜这与无法建立连接有关，但只是无法弄清楚如何解决这个问题......

> /Users/yungtsai/.rvm/gems/ruby-1.8.7-p352/gems/activerecord 3.1.4/lib/active_record/connection_adapters/abstract/connection_specification.rb:62:in `establish_connection': 开发数据库未配置
> （ ActiveRecord::AdapterNotSpecified)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:54:01.287

首先尝试从任何现有迁移中创建+构建您的数据库

```
rake db:create
rake db:migrate 
```

如果这不起作用，请从迁移中重建它（具有更高级别的详细信息），并让我们知道它是否引发任何错误。

```
rake db:migrate:reset --trace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:40:49.280

您可能在 config/ 文件夹中没有 database.yml 文件。

查看有关配置数据库的 Rails 入门指南部分：http: [//guides.rubyonrails.org/getting_started.html#configuring-a-database](http://guides.rubyonrails.org/getting_started.html#configuring-a-database)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T19:06:00.973

转到并在该部分`{yourapp}/config/database.yml`中键入正确的参数`development`

# excel - Excel 有重复的两列

> ID：10399060
> 
> 赞同：8
> 
> 时间：2012-05-01T14:22:05.700
> 
> 标签：excel

所以我在excel中有两列，A列包含与B列几乎完全相同的数据。

我需要一种将 A 列与 B 列匹配的方法，并且需要从 B 列中删除 A 列和 B 列中相同的任何值。

所以 A 列有 11,592 个产品 SKU 编号。

B 列有 12,555 个产品 SKU 编号。

而且我需要一种方法来从 B 列中获取**不在**A 列中的 SKU 产品编号。也许将它们放入 C 列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T14:48:08.887

在单元格 C1 中使用以下公式：

```
=IF(VLOOKUP(B1,A:A,1)=B1,"",B1) 
```

将其复制并粘贴到 B 列中具有值的所有行中，它将显示唯一值。

然后通过粘贴值将 C 列复制到 D 列，以便您可以对其进行排序/过滤掉空白。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T14:48:18.307

我在这里做了几个假设，以便我回答这个问题。您可能需要相应地调整单元格：

*   您的 A 列数据位于单元格 A1:A11592 中
*   您的 B 列数据位于单元格 B1:B12555 中

我们需要设置 C 列以显示 B 中不在 A 中的值。我们将在 C1:C12555 的每个单元格中使用一个公式来执行此操作（我们将测试 B 列中的每个值一个单元格）。作为第二步，我们可以对列 C 进行排序，以将找到的值放在列表的顶部。

1.  在单元格 C1 中创建一个公式： `=IF(ISNA(VLOOKUP(B1,$A1:$A11592,1,FALSE)),B1,"")`
2.  将 C1 复制到所有单元格 C1:C12555（请参阅末尾的提示）

现在，C 列中的每个单元格都包含 B 列中旁边的值，如果该值未出现在 A 列中，或者如果该值确实出现，则为空白（空字符串）。要将 col C 中的所有值放在一起，您可以同时选择列 B*和*C，然后对列 C 进行排序。

**提示：**要快速将 C1 复制到 12000 多行，试试这个：

1.  选择单元格 C1，按 Ctrl-C（Mac 上的 Command-C）进行复制。
2.  使用箭头键，向左移动到单元格 B1。
3.  按“结束”键和“向下箭头”键。这会将您跳转到 B 列中的最后一个非空白值（即列的“末尾”）。这假设您在 B 列的数据中间没有任何空白值。
4.  使用箭头键，向右移动到 C 列（应该是单元格 C12555）。
5.  按住SHIFT键，按“end”和“up arrow”跳回C列顶部；因为你按住 SHIFT 单元格都被选中了。
6.  按 Ctrl-C 将复制的函数粘贴到所有单元格。

# c# - 查找所有引用时如何跳过方法的覆盖

> ID：10399064
> 
> 赞同：6
> 
> 时间：2012-05-01T14:22:12.320
> 
> 标签：c#, visual-studio-2010

我想确定在我的类中重写 Equals() 的代码更改对代码的影响。

```
 public override bool Equals(object obj)
  {
     // My code to be changed
     return true;
  } 
```

当我按 Shift-F12 查找所有引用时，Visual Studio 返回 126,703 个我调用 object.Equals() 的位置。

有没有办法在查找引用时跳过 Equals() 方法的覆盖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:28:33.727

因为该`Equals`方法是在一个`object`级别上定义的，所以您的类的一个对象可以很容易地传递给一个调用方法，该方法只`Equals`知道它是一个`object`.

例如，如果您曾经将对象添加到 HashSet，或者如果您调用`.Distinct()`包含您的对象的集合，那么您将间接调用`Equals`.

找到覆盖将影响的所有地方的唯一方法`Equals`是找到你的类正在使用的所有地方，看看用它做了什么。

# android - 使用 MediaPlayer 进行 Android 流式传输：错误（1，-1004）和 3GPP 视频

> ID：10399066
> 
> 赞同：1
> 
> 时间：2012-05-01T14:22:31.690
> 
> 标签：android, youtube, media-player, android-videoview

我正在尝试做一个播放视频的应用程序。我有两个问题：

1）我有一个 Youtube 的链接：rtsp:// 我做：

"Uri myUri = Uri.parse(link); //link = rtsp://... mMediaPlayer.setDataSource(getApplicationContext(), myUri);"

然后，视频不播放......但是，如果我使用“videoview”作品。我认为问题在于“媒体播放器”不播放 mpeg 编解码器。有任何想法吗？

2）我有几个不同质量的链接，我将它们连接到wifi并没有问题，但有数据连接：

05-01 15:58:25.453: E/Link:(31565): http%3A%2F%2Fo-o.preferred.mad01s04.v16.lscache3.c.youtube.com%2Fvideoplayback%3Fupn%3D35Zn4tL7Ibc%26sparams%3Dcp %252Cid%252Cip%252Cipbits%252Citag%252Cratebypass%252Csource%252Cupn%252Cexpire%26fexp%3D900147%26itag%3D18%26ip%3D85.0.0.0%26signature%3DAACE528D596873408192BCDDF4ECFC7DDFD68EBB.575689C34D97BA9D750C7B40CC63B427E40E7838%26sver%3D3%26ratebypass%3Dyes%26source%3Dyoutube %26expire%3D1335903378%26key%3Dyt1%26ipbits%3D8%26cp%3DU0hSSllLUV9MUkNOMl9RRVVEOnduVjJoRkFBMDBn%26id%3D8fb5ca7aa1a31f5e

05-01 15:58:25.464: I/AwesomePlayer(31648): setDataSource_l('http://oo.preferred.mad01s04.v16.lscache3.c.youtube.com/videoplayback?upn=35Zn4tL7Ibc&sparams=cp%2Cid%2Cip %2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=900147&itag=18&ip=85.0.0.0&signature=AACE528D596873408192BCDDF4ECFC7DDFD68EBB.575689C34D97BA9D750C7B40CC63B427E40E7838&sver=3&ratebypass=yes&source=youtube&expire=1335903378&key=yt1&ipbits=8&cp=U0hSSllLUV9MUkNOMl9RRVVEOnduVjJoRkFBMDBn&id=8fb5ca7aa1a31f5e')

05-01 15:58:25.484: V/ChromiumHTTPDataSource(31648): 代表 uid 10101 连接

05-01 15:58:25.484: I/ChromiumHTTPDataSource(31648): 连接到[http://oo.preferred.mad01s04.v16.lscache3.c.youtube.com/videoplayback?upn=35Zn4tL7Ibc&sparams=cp%2Cid%2Cip% 2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=900147&itag=18&ip=85.0.0.0&signature=AACE528D596873408192BCDDF4ECFC7DDFD68EBB.575689C34D97BA9D750C7B40CC63B427E40E7838&sver=3&ratebypass=yes&source=youtube&expire=1335903378&key=yt1&ipbits=8&cp=U0hSSllLUV9MUkNOMl9RRVVEOnduVjJoRkFBMDBn&id=8fb5ca7aa1a31f5e](http://o-o.preferred.mad01s04.v16.lscache3.c.youtube.com/videoplayback?upn=35Zn4tL7Ibc&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=900147&itag=18&ip=85.0.0.0&signature=AACE528D596873408192BCDDF4ECFC7DDFD68EBB.575689C34D97BA9D750C7B40CC63B427E40E7838&sver=3&ratebypass=yes&source=youtube&expire=1335903378&key=yt1&ipbits=8&cp=U0hSSllLUV9MUkNOMl9RRVVEOnduVjJoRkFBMDBn&id=8fb5ca7aa1a31f5e) @0

05-01 15:58:26.226: I/ChromiumHTTPDataSourceSupport(31648): 服务器响应 http 状态 403

05-01 15:58:26.226: I/AwesomePlayer(31648): mConnectingDataSource->connect() 返回 -1004

05-01 15:58:26.226: E/MediaPlayer(31565):**错误 (1, -1004)**

05-01 15:58:26.242: E/MediaPlayer(31565): 错误 (1,-1004)

05-01 15:58:26.242: E/RS(31565): MediaPlayer 播放错误

05-01 15:58:26.242: V/(31565): 媒体错误，错误未知 -1004

05-01 15:58:26.242: I/RS(31565): MediaPlayer 播放完成

我希望你能帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:45:05.893

1) 尝试不使用静态构造函数 2) 使用标准构造函数创建 mp 对象，尝试使用 setDataSource()、prepareAsync() 等。 3) 捕获 null 和非法状态异常。

MediaPlayer api 存在一些错误和限制。

请忽略我的示例代码中的 isCanceleld()。

示例代码：

```
if (mp == null && isCancelled() != true) {
                    mp = new MediaPlayer();
                    mp.setDataSource(chnlUrlParam);
                    mp.prepareAsync();
                    mp.start(); 
```

// Log.d("doInBackground", "mp.getCurrentPosition() after mp.start() "+ mp.getCurrentPosition()); // Log.d("doInBackground","mp.getDuration() after mp.start() " + mp.getDuration()); mp.setOnBufferingUpdateListener(新 OnBufferingUpdateListener() {

```
 @Override
                        public void onBufferingUpdate(MediaPlayer mp,
                                int percent) {
                            Log.d("TAG_Async", "percent: " + percent);
                        }
                    });

                }

                if (mp == null) {
                    Log.d(TAG_Async,"### Failed to create media player from static constructor ###");
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:15:34.620

实际上有一个错误是流式URL错误，因此存在此问题..否则它在videoview中运行良好。

您必须在 url 之后添加 youtube 签名。

我一直在努力，而且效果很好。

# sql - 如何按计算列分组？

> ID：10399067
> 
> 赞同：10
> 
> 时间：2012-05-01T14:22:32.713
> 
> 标签：sql, group-by

假设下表包含 3 个数字字段：

```
Images (table)
--------------
Width
Height
Amount 
```

宽度和高度是以毫米为单位的图像尺寸。现在我想创建一份关于按尺寸（以厘米为单位）分组的图像数量的报告。这意味着我必须 GROUP BY 2 个不存在的列。

我可以：

```
SELECT      ROUND(Width/10,0)   AS W
        ,   ROUND(Height/10,0)  AS H
        ,   SUM(Amount)         AS A 
FROM        IMAGES
GROUP BY    Width
        ,   Height 
ORDER BY    W
        ,   H
        ,   A 
```

但这只会在视图级别进行 mm 到 cm 的转换，并且会导致相同尺寸的多行。

例如

```
 W   H  A
--- --- - 
150 159 2
150 160 1 
```

不会产生 1 个类别

```
W  H  A
-- -- - 
15 16 3 
```

但在

```
W  H  A
-- -- - 
15 16 2
15 16 1 
```

目标引擎实际上是一个 FileMaker 数据库，不幸的是，它似乎不支持 GROUP BY 子句中的聚合函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T14:25:45.403

只需`GROUP BY`计算列：

```
SELECT 
    ROUND(Width/10,0) as W
    ,ROUND(Height/10,0) as H
    ,COUNT(*) as A -- You may replace this with SUM(Amount) too
FROM 
    IMAGES
GROUP BY 
    ROUND(Width/10,0)
    ,ROUND(Height/10,0)
ORDER BY 
    W
    ,H
    ,A 
```

**编辑：**另外，根据我对您的问题的理解，您想要的`COUNT`不是`SUM`行...，对吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:45:39.163

以下查询用于`Common Table Expression (CTE)`将宽度和高度从 mm 转换为 cm 以及舍入，然后生成派生表输出。然后使用此 CTE 输出对宽度和高度值进行分组，以计算金额列的总和。

我不确定您是在寻找`SUM`金额栏还是`COUNT`金额栏。我根据您的查询假设*SUM 。*如果您只想要*COUNT*，请将查询中的*SUM更改为**COUNT*。

[**单击此处查看 SQL Fiddle 中的演示**](http://sqlfiddle.com/#!6/a8eec/1)

*脚本*：

```
CREATE TABLE images
(
        width   INT     NOT NULL
    ,   height  INT     NOT NULL
    ,   amount  FLOAT   NOT NULL
);

INSERT INTO images (width, height, amount) VALUES
    (150, 159, 1),
    (150, 159, 2),
    (150, 158, 1),
    (150, 159, 3),
    (150, 158, 2),
    (160, 158, 4),
    (160, 158, 1);

;WITH imagesincm AS
(
    SELECT      ROUND(width  / 10,0)    AS W
            ,   ROUND(height / 10,0)    AS H
            ,   amount
    FROM        images
) 
SELECT      W
        ,   H
        ,   COUNT(amount) AS A
FROM        imagesincm
GROUP BY    W
        ,   H 
ORDER BY    W
        ,   H 
```

*输出*：

```
W  H  A
-- -- - 
15 15 9
16 15 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-13T04:54:54.597

根据官方 FileMaker SQL 参考 ( [https://help.claris.com/en/sql-reference.pdf](https://help.claris.com/en/sql-reference.pdf) ) 的第 11 页，Group By 子句仅适用于字段。

# objective-c - 如何从已知的 url / 文件路径中检索 UIManagedDocument？

> ID：10399069
> 
> 赞同：0
> 
> 时间：2012-05-01T14:22:36.510
> 
> 标签：objective-c, url, uimanageddocument

我的目的是从已知 url 检索 UIManagedDocument 对象，然后打开它。

就像是：

```
 UImanagedDocument *doc = retrieveDoc(url); 
```

然后，我可以做类似的事情：

```
 [doc openWithCompletionHandler:^(BOOL success){ ....}]; 
```

相信我，我确实搜索过苹果的文档，有一个唯一的方法，叫做使用给定的 url 进行初始化。是的，我之前初始化并保存它，然后我只需要拿起它。有什么办法可以做到这一点？

希望哪位大神指点一下，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:15:10.733

应该有这样一个类方法，但是在apple的参考中找到了创建UIManagedDocument的示例代码

```
 doc = [[UIManagedDocument alloc] initWithFileURL:docURL];
 if ([[NSFileManager defaultManager] fileExistsAtPath:[docURL path]]) {
[doc openWithCompletionHandler:^(BOOL success){
    if (!success) {
        // Handle the error.
    }
}];
}
else {
[self addInitialData];
[doc saveToURL:docURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success){
    if (!success) {
        // Handle the error.
    }
}]; 
```

所以，基本上，每次我想从给定的 url 检索 UIManagedDocument 时，我必须先初始化它，然后再打开它。我对吗？

无论如何，这就是我迄今为止发现的工作方式。

# php - PHP从用户cd解密密码

> ID：10399074
> 
> 赞同：-1
> 
> 时间：2012-05-01T14:23:04.130
> 
> 标签：php, mysql

我想要一种廉价的方法来阻止我的用户在访问我的网站时与其他人共享密码。有没有一种方法可以将加密密码存储在 cd 上。当用户访问网站并输入他/她的 ID 时，php 在客户端驱动器中搜索带有加密密码的 cd 并解密密码以与我为他们设置的 MYSQL 数据库密码进行比较。我将使用一些软件来保护 cd 不被复制。我知道用户可以简单地将 cd 借给某人，但这将不可避免地成为用户继续这样做的不便。

如果沿着这种思路有任何其他廉价的建议，我将不胜感激进一步探索它的帮助。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:26:05.567

PHP 在服务器上执行，因此您无法仅使用 php 执行此操作。您将需要为浏览器开发一个插件，或使用某种额外的软件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:26:21.593

简短的回答：没有。

长答案：您需要自己尝试，对此事进行自己的体验，然后发现它不起作用。

PHP btw 在服务器上运行，而不是在客户端上。PHP 和用户之间的唯一连接是一些 HTTP 协议，它可以伪造你需要的一切。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T14:26:42.120

不使用 PHP。在 Web 服务器上运行的站点无法访问浏览计算机的硬件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T14:39:59.943

考虑实施一些双重身份验证（我知道的+我拥有的）。

查看 Google 的“[两步](https://code.google.com/p/google-authenticator/)”验证，除了您的用户名和密码外，他们还通过短信向您的手机发送验证码，该验证码需要您登录。

在这种情况下，手机就是“我拥有的东西”。用户将不得不共享手机或费心提供验证码。

# python - Django HttpResponse - 带有文件和内容的响应

> ID：10399077
> 
> 赞同：1
> 
> 时间：2012-05-01T14:23:09.617
> 
> 标签：python, django, django-views

有没有一种简单的方法来执行以下操作？

在视图中获取请求后，向用户发送一个文件，以及重新渲染的页面模板？类似于“合并”响应与文件和 render_to_response

这就是我用文件返回响应的方式：

```
filename = "/path/to/somewhere"
wrapper  = FileWrapper(open(filename))
content_type = mimetypes.guess_type(filename)[0]
response = HttpResponse(wrapper,content_type=content_type)
response['Content-Length'] = os.path.getsize(filename)
response['Content-Disposition'] = "attachment; filename=%s"%filename
return response 
```

这就是我返回带有渲染数据的普通模板的方式：

```
data = getData()
return render_to_response('../templates/some_template.html', {'data': data,}) 
```

（我可能已经用复制粘贴删除了一些重要的行，但为了说明我的观点 - 这段代码有效，问题不在于这两个代码示例）

问题是：我如何将它们“合并”在一起？有没有一种简单的方法可以使用 django 标准功能来做到这一点？我必须为此使用 Ajax 吗？（我不熟悉 ajax ......所以如果有办法在没有的情况下做到这一点，那就更好了）

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:09:14.727

如果您简化了对超文本传输​​协议的看法，那么您的用户与您的应用程序交互的方式就是发送一个请求，您的应用程序会为其提供响应。在[RFC 6266 的第 4.2](https://www.rfc-editor.org/rfc/rfc6266#section-4.2)节中，当您返回与“附件”处置类型匹配的响应时，您指示用户的客户端它应该“提示用户在本地保存响应，而不是正常处理它”。

不支持提供包含 HTML 和一些其他内容类型的响应，并且可以指示客户端保存一个并显示另一个。它不受支持的事实并不意味着您不应该探索提供这种用户体验的替代方案，但它应该暗示我们没有在实践它并且用户不会期望它。

但是，抛开事实不谈，如果您真的想这样做，您需要了解提供文件和显示新的 HTML 文档将采用两个单独的请求/响应上下文。最简单的设计将包括用户将从该页面发起检索文件的请求，并订阅应用程序，以便在用户完成检索文件时收到通知，然后开始显示一些新内容或重定向到一个新的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-25T15:33:59.930

可以使用多部分。

HttpResponse 是子类化的，可以返回多部分数据。

在客户端，您需要以块的形式接收数据并根据适当的 Mime 类型进行解析。

这是一个实现

[https://anentropic.wordpress.com/2010/05/14/jsdjango-streaming-multi-part-ajax-responses-mxhr/](https://anentropic.wordpress.com/2010/05/14/jsdjango-streaming-multi-part-ajax-responses-mxhr/)

# .htaccess - 禁止使用 htaccess 上传 javascript 文件

> ID：10399087
> 
> 赞同：2
> 
> 时间：2012-05-01T14:24:19.530
> 
> 标签：.htaccess

有没有办法阻止使用 htaccess 将 JavaScript 文件上传到特定文件夹，但仍允许在子文件夹中运行 JavaScript？

# php - Symfony 环境和调试栏

> ID：10399089
> 
> 赞同：3
> 
> 时间：2012-05-01T14:24:24.763
> 
> 标签：php, symfony, wamp, environments

我是 Symfony 的新手。一直在做一些测试（Symfony 2.0.13 和 WAMP2.2 中的 php5.3.8）并阅读[文档](http://symfony.com/doc/current/cookbook/configuration/environments.html)，但我对环境有点困惑[。](http://symfony.com/doc/current/book/internals.html#configuration)

当我转到`LOCALHOST/Symfony/web/app_dev.php/demo/hello/Foo`（app_dev 表示开发环境，对吗？）我可以看到 Web 调试工具栏并单击分析器信息，在“项目配置”选项卡中，我可以看到： *Environment dev*

现在我转到`LOCALHOST/Symfony/web/app.php/demo/hello/Foo`web 调试工具栏（顺便说一句，为什么我现在看到这个工具栏？这不是生产环境吗？我的用户应该默认看到这个栏吗？）我还看到，在“项目配置" 选项卡： *环境开发*

似乎这个“演示”包以某种方式与“开发”相关联，无论 URL 是 app_dev.php 还是 app.php？

此外，我还做了一些测试：我的本地 IP 是 192.168.153.1。

当我尝试访问时：

```
http://192.168.153.1/Symfony/web/app_dev.php/demo/hello/Foo 
```

它说“您无权访问此文件。请检查 app_dev.php 以获取更多信息。” 所以，好的，如果我编辑 app_dev.php 中的行并添加我的（外部）IP，我可以访问。

但是，当我连接到

```
http://192.168.153.1/Symfony/web/app.php/demo/hello/Foo 
```

它说的是一样的！所以似乎我的 app.php 没有被执行，无论我在 URL 中输入什么，app_dev.php 都在执行。

这真是令人困惑！我检查了我的 htaccess，一切似乎都是正确的。

谁能帮我解决这个问题？

我没有修改 app_dev.php 的代码，也没有修改 app.php，一切都是“按原样”开箱即用的。

* * *

2012-05-02 编辑

奇怪的事情发生了。我用这些行编辑了我的 config_prod.yml：

```
# load the profiler
framework:
    profiler: { only_exceptions: false }

# enable the web profiler
web_profiler:
    toolbar: true
    intercept_redirects: true
    verbose: true 
```

保存，然后编辑 app.php 文件。想测试如果我改变会发生什么：

```
$kernel = new AppKernel('prod', false); //Symfony default 
```

至

```
$kernel = new AppKernel('prod', true); 
```

当我转到 app.php/WHATEVER 时，出现了一个错误页面，所以我恢复了所有更改，重新启动了 Apache，现在 WebDebug 工具栏不再显示在 PROD (app.php/WHATEVER) 中

所以，我不知道如何，但它现在似乎按预期工作，虽然 config_prod.yml 文件和 app.php 处于原始状态。它还允许我用我的外部 IP 连接到 app.php

真的很奇怪...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-05T00:07:31.423

对于那些使用格式错误的模板进行输出的人来说，这是一个答案。

*[删除重定向到垃圾邮件网站的链接]*

刚刚复制给你：

“嗨。您正在查看的页面上必须有正确的 HTML。我认为调试栏会附加在 . 之前`</body>`。因此，如果您有这样的页面（见下文），您应该会看到调试栏。”

代码：

```
<html> <head>

</head> <body>

</body> </html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:45:09.140

您需要在 app_dev.php 中禁用 ip 过滤。您将能够从外部 ip 看到调试栏。

问候， 马克斯

# android - 用于在 android 上保存有关网络的状态信息的关系数据库（sqlite）？

> ID：10399090
> 
> 赞同：0
> 
> 时间：2012-05-01T14:24:27.460
> 
> 标签：android, sqlite, relational-database

我最新的项目是一个用于监控网络上各种设备（带有网络接口的音频设备）的 Android 应用程序。

我目前的想法是，我将运行一个 Android 服务，它每秒轮询网络/设备是否有任何更改，并在 sqlite 数据库中维护网络状态模型。

然后，我的 UI 将在需要有关网络状态的信息时查询数据库。

所以我的问题：

**这听起来合理吗？**

**有没有更好的方法来使用 Android-y 对我的网络进行建模？**

**我是否应该担心如此频繁的轮询占用过多的系统资源？**

为稍微模糊的设计讨论型问题道歉。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:37:06.683

有什么理由需要如此频繁地轮询？我会担心这些工作重叠。

电池问题会带来如此多的活动。

另外 - 由于 android 依赖于 wifi，您必须处理该连接的来/去。

您可能更适合在网络上设置一台机器，让它轮询然后通过 android 查询它。

# c - 多个图像的内存缓冲区

> ID：10399095
> 
> 赞同：1
> 
> 时间：2012-05-01T14:24:49.623
> 
> 标签：c, image

我在 PC 上接收来自两个摄像头的图像。流不是连续的，而是在事件检测时发生。因此，我必须在特定时间后收到大约 8-10 对图像。由于我必须处理图像，我想首先将所有图像保存在一个大缓冲区中，然后再批量处理它们。将图像保存在两个大缓冲区（每个相机一个）中也是可以接受的。如何将这对图像保存在一个（或两个）大缓冲区中？我正在用 C 实现这个程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:16:22.740

假设使用以下 API 来获取图像：

```
int ImageGet(
  char * pBuffer, 
  size_t * pSize); /* returns 0 on success or any other value if no image is available or on error */ 
```

您可以执行以下操作：

```
#include <stdlib.h>
#include <string.h>

...

#define IMAGESIZE_MAX (1024*1024) 

char * pBuffer = NULL;
char * pBufferCurrent = pBuffer;
int iResult = 0;
size_t size = IMAGESIZE_MAX;
size_t sizeTotal = 0;

do 
{
  char * pBufferCurrent = realloc (
    pBuffer, 
    sizeTotal + sizeof(size) + size);

  if (!pBufferCurrent)
  {
    break;
  }

  pBuffer = pBufferCurrent;

  pBufferCurrent += sizeTotal;

  if ((iResult = ImageGet (
    pBufferCurrent + sizeof(size), 
    &size))
  {
    break; 
  }

  memcpy (
    pBufferCurrent,
    &size, 
    sizeof(size));

  sizeTotal += (sizeof(size) + size);
} while (1);

... 
```

这会按顺序存储您的数据：

```
[     size 1     ][  image data 1  ][     size 2     ][  image data 2  ]...
<-sizeof(size_t)-><-    size 1    -><-sizeof(size_t)-><-    size 2    -> 
```

在 指向的缓冲区中`pBuffer`。

* * *

要从缓冲区中检索对描述图像 N 的数据的引用，`pBuffer`您可以使用以下方法：

```
const char * BufferImageGetByIndex(
    const char * pBuffer,
    unsigned indexImage)
{
  for (unsigned indexImageCnt = 0;
    indexImageCnt < indexImage;
    ++ indexImageCnt)
  {
    pBuffer += sizeof(size_t) + *((size_t *) pBuffer);
  }

  return pBuffer;
} 
```

然后要实际获得图像，您可以这样做：

```
...
/* Get a reference to the data decribing **fourth** image in the buffer filled by the example above. */
const char * pBufferImage4 = *BufferImageGetByIndex(pBuffer, 3);

/* Get the size ... */
size_t sizeImage4 = *((size_t *) pBufferImage4);
/* ... and a reference to the image data. */
const char * pImage4 = pBufferImage4 + sizeof(size_t);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:30:39.940

假设您的图像都是标准大小和格式，您可以简单地 malloc() 一个缓冲区，该缓冲区将在事件检测时保存所有图像。如果您希望对图像进行任何分析，我建议您切换到 C++ 并使用 OpenCV 库。它们在开源图像库中几乎没有并行。

# split - 拆分 NDIS_BUFFER (WDK)

> ID：10399099
> 
> 赞同：0
> 
> 时间：2012-05-01T14:25:17.047
> 
> 标签：split, buffer, driver, wdk, ndis

我是驱动程序编程的新手，我找不到一个可能很简单的问题的解决方案。我正在编辑 wdk 示例中的 ndis_prot 示例驱动程序。目前，数据包作为 Irp 到达驱动程序并存储到 pNdisBuffer 中。我需要将该缓冲区分成两部分 - pNdisBuffer1 和 pNdisBuffer2 - 首先填充标头，然后填充数据并将它们都链接到 pNdisPacket。关于这方面的文章很少，但我找不到这方面的例子。应该是可能的，就像这里描述的那样

[http://blogs.msdn.com/b/ntdebugging/archive/2008/09/19/ndis-part-1.aspx](http://blogs.msdn.com/b/ntdebugging/archive/2008/09/19/ndis-part-1.aspx)

但我想看看 wdk （代码）中的例子。

PS：请不要问我为什么需要这样做，也不要尝试将其更改为不同的东西。它只需要那样做。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T00:00:50.907

伪代码（错误处理和一些声明被省略等）

```
// initial code
PNDIS_PACKET sourcePack;
...
PNDIS_PACKET packet1, packet2, current;
NdisAllocatePacket(&status, &packet1, handle);
NdisAllocatePacket(&status, &packet2, handle);
current = packet1;
PNDIS_BUFFER sourceBuf, newBuf;
NdisGetFirstBufferFromPacket(sourcePack,&sourceBuf,&va,&len,&totalLen);
while(sourceBuf != NULL)
{
  NdisQueryBuffer(sourceBuf,&va,&len);
  if( .. (PUCHAR)va+x is a split point ..)
  {
    if(x != 0)
    {
      newBuf = NewBuf(va, x);
      NdisCahinBufferAtBack(current,newBuf);
    }
    current = packet2;
    newBuf = NewBuf(va+x, len-x);
  }
  else
  {
    newBuf = NewBuf(va,len);
  }
  NdisChainBufferAtBack(current,newBuf);
  NdisGetNextBuffer(sourceBuf,&sourceBuf);
}
...
PNDIS_BUFFER NewBuf(PVOID va, ULONG len)
{
  PNDIS_BUFFER newBuffer;
  NdisAllocateBuffer(&Status, &newBuffer, handle, va, len);
  return newBuffer;
}

// response to comment
newBuf = NewBuf(va, x);
NdisCahinBufferAtBack(current,newBuf);
newBuf = NewBuf(va+x, len-x);
NdisCahinBufferAtBack(current,newBuf); 
```

# jquery - 如何在 XML 中解析 Goodreads API 的响应？

> ID：10399100
> 
> 赞同：1
> 
> 时间：2012-05-01T14:25:18.767
> 
> 标签：jquery, ajax

我正在尝试为我的副项目使用 Goodreads API，但遇到了一些问题。以下 URL 返回 XML 数据。如果我使用`datatype: 'xml'`，那么我会得到跨域错误，这就是我使用'jsonp'但仍然出错的原因`Uncaught SyntaxError: Unexpected token <`。我做错了吗？

```
$.ajax({
  url : 'http://www.goodreads.com/user/show/userid.xml?key=developerKey&id=userId, 
  method : 'get', 
  dataType : 'jsonp', 
  success : function (data) {
    console.log($.parseXML(data));
  }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-09T11:27:45.350

使用支持 CORS的外部*代理发出 goodreads 请求。*

至少 Yahoo YQL 可以用作代理，正如本示例代码中所做的那样（它是免费的，不需要 API 密钥！）。YQL 返回包装在 中的 Goodreads XML 响应`/query/results`。

```
var url = "http://www.goodreads.com/user/show/userid.xml" +
          "?key=developerKey&id=userId";

$.get("http://query.yahooapis.com/v1/public/yql",
    {
        q: "select * from xml where url=\""+url+"\"",
        format: "xml"
    },
    function(xml){
        // contains XML with the following structure:
        // <query>
        //   <results>
        //     <GoodreadsResponse>
        //        ...
        console.log(xml);
    }
); 
```

此答案中有关 YQL 的更多信息： [https ://stackoverflow.com/a/8579158/1068385](https://stackoverflow.com/a/8579158/1068385)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:44:57.697

尝试改用“应用程序/xml”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T16:16:20.053

(1) 跨域错误消息表明您的应用未正确通过 Goodreads 身份验证。

```
url : 'http://www.goodreads.com/user/show/userid.xml?key=developerKey&id=userId, 
```

缺少结束引号，并且不评估查询字符串的变量。我认为你的意思是

```
url : 'http://www.goodreads.com/user/show/userid.xml?key=' + developerKey + '&id=' + userId, 
```

(2) 看起来您正在从 Goodreads 服务器收到响应，但您也可能想尝试这样做以确保您得到了您期望的内容：

```
dataType: 'text' 
```

并且只是 console.log() 数据而不解析它。

# r - 用于计算 AUC 的 pROC 包

> ID：10399109
> 
> 赞同：2
> 
> 时间：2012-05-01T14:25:56.090
> 
> 标签：r, proc-r-package

看着 pROC 包，我对响应和预测器有点困惑：

响应：响应的因子、数字或字符向量，通常用 0（控制）和 1（案例）编码。物体。ROC 曲线中只能使用两个类别。如果向量包含两个以上的唯一值，或者它们的顺序可能不明确，请使用级别来指定哪些值必须用作控制值和大小写值。

predictor：一个数字向量，包含每个观察值。有序因子被强制转换为数字。

例如，如果我使用：

auc（响应，预测）

响应是我的模型产生的事实和预测因素吗？

我的“真相”是 0 或 1，并且预测向量包含概率。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T17:37:01.217

您似乎（几乎）正确地说明了它。ROC 曲线提供的答案是，如果知道真相，可以预期的正或负准确度。但是，最后一句话 a 是不正确的，因为您提供了 a) 响应和 b) 模型的测量值或分数，而不是概率。在特定情况和对照中，在不同级别的截止值生成一系列表格后，软件应返回并绘制特异性的敏感性和互补性。

信息量最大的 ROC 图将标记 ROC 曲线上的截止值。当我使用那个包时，没有这样的标签，我在家宴上搜索其他包。

# .net - 用于获取数组中字符串序列在另一个数组上的重叠的算法

> ID：10399112
> 
> 赞同：1
> 
> 时间：2012-05-01T14:26:15.567
> 
> 标签：.net, arrays, string, algorithm

我想建立一个算法，它能够给出两个数组中元素的重叠索引。

例如我有两个字符串数组

Array1: {"a","c","h", **"d","a","o","m"** }

Array2: { **"d","a","o","m"** ,"c","e","o","m","c","z","e","l" ,"p","v","c","z","c"}

它应该以这种方式返回 array1 和 array2 的索引

*x1,y1={3,6}* *x2,y2={0,3}*

这意味着数组中字符串的序列应该匹配，只要字符串值匹配，我们就需要这样做，并确保每条记录在它们之前的记录匹配中都是唯一的。

等待答案和回复，如果有问题，请告诉我。

举个例子，我在数据库中有一个表，我在其中插入记录，并且我要插入的每条记录都应该是非常独特的。所以在插入时，我们确实有一个需要批量插入的记录数组。因此，如果我说，我确实有数据库表中的记录格式为：

**列** 1 哈希 1 哈希 2 哈希 3 哈希 4 哈希 5

我想在数据库中插入一堆记录，格式为： hash3 hash4 hash5 hash6 hash7 hash8

那么表格的结果应该看起来像这样 **colum1** hash1 hash2 hash3 hash4 hash5 *hash6 hash7 hash8*

但是，如果需要插入数据库的数组的格式为 hash2 hash3 hash4 hash6

那么它应该被视为一个全新的条目，并将作为一个整体插入到数据库中。

希望这次我清楚阐述我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:52:00.950

The problem you're referring to is called the Longest Common Substring problem (not to be confused with another problem about strings and an LCS acronym - longest common subsequence). As usual, the best explanation is in Wikipedia: [http://en.wikipedia.org/wiki/Longest_common_substring_problem](http://en.wikipedia.org/wiki/Longest_common_substring_problem) :)

In short - if the strings are really short and you're a very lazy programmer, the fastest way of doing that is to check all substrings of arr2 against arr1\. This will take about n^2*m time (if arr2 if of length n, and arr1 is of length m) - which is a lot of time for long strings.

If your strings are longer / you are less lazy, the best algorithm using suffix trees will give you linear running time.

# javascript - jQuery show() 具有有趣且意想不到的“动画”效果

> ID：10399119
> 
> 赞同：0
> 
> 时间：2012-05-01T14:26:42.053
> 
> 标签：javascript, jquery

我不介意这种效果或侥幸发生，但是如果发生这种情况，我希望它不要离开页面太远，然后它会在说话的庄园中反弹回来。去[http://originalglbtexpo.com/asites/cholerose/](http://originalglbtexpo.com/asites/cholerose/)看看我的意思。点击任何链接，观察第一件事物消失，然后替换它的方块从左边开始，然后走到最右边，然后迅速回到原来的位置。

不知道如何解决这个问题，所以我正在寻找想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:38:08.167

`show()`将宽度和高度从零设置为自然值，这可能会影响您的边距。您可以通过在规则`!important`后面使用声明锁定元素的宽度来避免这种“捕捉”行为。`width: 730px``#content_wrap`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:35:20.717

`$().show`正是以这种方式缓解。请参阅[jQuery API 上的演示](http://api.jquery.com/show/)。

# javascript - 如何在 ASP.NET MVC 应用程序中组织 JavaScript 代码

> ID：10399122
> 
> 赞同：14
> 
> 时间：2012-05-01T14:27:14.863
> 
> 标签：javascript, ajax, asp.net-mvc-3

我们将在视图页面上添加一些 Ajax 功能。比如说，单击删除或插入按钮，将调用一个 Action 在后台执行 CRUD 作业，然后在该操作后刷新项目列表。

在许多现有示例中，javascript 代码嵌入在`<script>`标签内的视图页面中。因为通常一个视图可能需要许多功能。比如说，当插入一条记录时，会有一个函数来收集表单数据，验证数据（这部分可能很长），并通过调用动作`$.ajax()`。出于这个原因，我们正在考虑将所有这些 javascript 放入一个单独的`.js`文件中。

那么，这方面的专业做法是什么？我们应该将`.js`文件放在与其相同的文件夹下`Views`吗？还是应该将它们全部放入`Script`文件夹并从那里引用？

`.js`我们应该为每个单独的视图创建单独的文件还是将`.js`不同视图的所有文件组合成一个大文件？

此外，我们喜欢如何将 C# 代码分组`#region`以便折叠。JavaScript中有类似的东西吗？它只是太容易长得太长了。

感谢您提供任何有用的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:33:01.607

我不会为此目的使用 Scripts 目录，因为所有默认的 JavaScript 文件（即 jQuery 和其他文件）都放在这里。我通常将 Content 目录用于我自己的 JavaScript（还有 CSS 和图像）文件。

您可以在单独的文件夹中构建您的文件，例如您的视图（即 ~/Content/js/myviewfolder/somename.js）。

如果你想结构化你的 JavaScript 代码：你可以将独立的代码分成不同的文件，你可以让它处理到一个文件中。或者您可以将其分组为匿名的自执行代码块，然后您可以折叠这些块。除此之外，我没有想法。（就个人而言，我会选择不同的文件（如果将不同的 JavaScript 文件构建到一个文件中，有多种方法。）

# jquery - 为什么我的书签不起作用？

> ID：10399128
> 
> 赞同：0
> 
> 时间：2012-05-01T14:27:43.157
> 
> 标签：jquery, bookmarklet

我正在尝试制作一个书签来更改我访问的任何页面的光标。

我这样做：

```
<a href="javascript:var i,s,ss=['http://www.zombiepanic.info/wp-content/themes/MYgRID/js/tronc.js','http://code.jquery.com/jquery-1.7.2.min.js'];for(i=0;i!=ss.length;i++){s=document.createElement('script');s.src=ss[i];document.body.appendChild(s);}void(0);"> Go! </a> 
```

我的js文件是：

```
(function() {

    function getCssTransform() {

        $('body').css('cursor','crosshair');

    }

getCssTransform();

})(); 
```

它在我制作的 empty.html 页面中完美运行，但是当我不想在 google 或 facebook 或其他网站中使用时，脚本被注入但我的光标没有改变……</p>

有任何想法吗 ？

（Ps：对不起英语，我是法国人）

编辑 ：

```
(function ($) {

$(document).ready(function() {

document.body.style.cursor="crosshair";
});

})(jQuery); 
```

我试试这个，但这是同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:33:06.470

```
(function(){var a=document.createElement("style");
 a.innerText="*{cursor:crosshair !important}";document.body.appendChild(a)
})() 
```

似乎工作正常。（为了清楚起见，最多分成 3 行。）

# algorithm - 找到 {0,...,n-1} 的排列 h 使得 h_i+a_i 变得递增

> ID：10399129
> 
> 赞同：0
> 
> 时间：2012-05-01T14:27:50.950
> 
> 标签：algorithm, adhoc

`a`给出了一个由 0 到 n-1 之间的 n 个整数组成的数组。答案是 (0,...,n-1) 的排列，这样：

```
a_0 + h_0 <= a_1 + h_1 <= ... <= a_n-1 + h_n-1 <= n-1 
```

`n <= 60`答案是独一无二的。

例如，如果`a`是 (0,2,4,2,0)，则答案 ( `h`) 是唯一确定的（正如问题所承诺的那样）：

h = (3,1,0,2,4)

# relational-database - 将数据库行保存到图形和 RDF 时丢失信息？

> ID：10399132
> 
> 赞同：1
> 
> 时间：2012-05-01T14:28:06.540
> 
> 标签：relational-database, rdf

假设我有从关系数据库表中检索到的数据行（可能通过连接表）。每行有几列（如A、B、C、D..），以下行是我所拥有的。

A1、B1、C1、D1

A1、B2、C1、D1

A1、B2、C1、D2

如果我要在实体之间绘制网络图，我可以通过创建多个三元组将信息保存在 RDF 中，例如

A1 连接到 B1

B1 连接到 C1

C1 连接到 D1

A1 连接到 B2

B2 连接到 C1

C1 连接到 D2 （以及相反的方向）

因此，在双向图中，它们将是

A1 -- B1 -- C1 -- D1

'----- B2 --- ' '--- D2

这种方法的一个问题是我现在引入了歧义，因为通过查看上图，我还可以得到 A1 -- B1 -- C1 -- D2 之间的联系，而我在原始行中没有。**我的第一个问题**- 一般来说，当将数据库行保存到网络图中时会发生这种情况（或者我做错了什么？）

为了保留原始信息，我可以将每行中的四个实体分组到一个 bnode 中，但我担心这是否会给我在创建图形连接时提供与以前相同的灵活性（和性能）。稍后我可能只需要获取 As 和 Bs 或其他子集组合之间的所有连接。这也不会像以前那样节省空间，因为您必须在不同的 bnode 之间存储重复的信息。

所以**我的第二个问题是**- 将行存储在 RDF 中但仍保持灵活性和性能的最佳方式是什么？我查看了 WWW.org 将 RDF 映射到 RDF 的建议（[http://www.w3.org/TR/r2rml/](http://www.w3.org/TR/r2rml/)以及[http://www.w3.org/TR/rdb-direct-mapping/](http://www.w3.org/TR/rdb-direct-mapping/)） ，但似乎我必须将数据分组到同一行 ID 下才能保留数据。这是唯一的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:36:29.180

您的行呈现 n 元关系（n=4）。所以你有四件事彼此有某种关系。RDF是基于二元关系（n=2）的，所以只能表示两个事物彼此有关系。要在 RDF 中表示 n 元关系，您总是必须引入一个附加节点并将 n 个成员连接到它。W3C 有一个关于这个主题的长篇最佳实践文档：[Defining N-ary Relations on the Semantic Web](http://www.w3.org/TR/swbp-n-aryRelations/)。

这种方法不会失去灵活性（您可以使用 SPARQL 轻松查询这些关系），也不会存储重复信息——事实上，您提出的表示不起作用的原因是因为您丢失了基本信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:03:40.903

你想要'C1 connectedTo D1'的声明似乎很奇怪。我不会说这是错误的，因为您的示例是如此抽象，没有暗示您的数据是。

在大多数 sql/rdb 数据环境中，都有一个标识行的主键（或复合键）。没有它，在检索到一行后“几乎”不可能更新它。我说“几乎”是因为可以做到这一点的数据库有一个“隐藏”列，可以唯一标识行（例如 postgres oid）。

从概念上讲，数据库中的一行对应于一个主题（将主键映射到一个主题），一列对应于一个谓词。然后，实际数据值对应于三元组中的对象。将您的 uri 添加到命名空间中的所有内容，然后就可以使用了。

有关将关系映射到三元组的冗长示例，您可以查看[d2rq-language](http://d2rq.org/d2rq-language)。如果我的假设成立（你有一个主键）那么你的性能应该很好，你可以使用 SPARQL 或简单的三元组来非常有效地获取你的数据。如果假设不正确，您可以使用 bnodes 甚至您描述的“行内”三元组，但您的示例中没有足够的信息来提供良好的指导。

您的示例没有表明存在唯一行。您可能暗示每一行都定义了从 a 列到 d 列的映射或路由。如果是这种情况，则您的数据与上述不同，并且每一行都是一个单独的图表。如果您的数据存储中有四边形，但这是一个单独的建模构造，也可以这样做。

# android - Android 从服务器自动完成 EditText

> ID：10399133
> 
> 赞同：9
> 
> 时间：2012-05-01T14:28:21.103
> 
> 标签：android, autocomplete

我想为 EditText 字段实现自动完成机制，但自动完成列表来自服务器。我查看了 AutoCompleteTextView 但默认情况下它只支持固定字符串。

我只是在谈论用户界面。我将向我的网络服务器发出一个 http 请求并取回 JSON 结果。我何时触发请求以及如何将其插入 UI？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T17:20:56.113

我认为你可以使用 AutoCompleteTextView，就像在这个例子中：http: [//developer.android.com/reference/android/widget/AutoCompleteTextView.html](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

...但是为了使用您的服务器，您必须调整您的适配器。这就是它的用途:)

**编辑：** 这是一个很好的例子： [如何使用 AutoCompleteTextView 并使用来自 Web API 的数据填充它？](https://stackoverflow.com/questions/5023645/how-do-i-use-autocompletetextview-and-populate-it-with-data-from-a-web-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:32:25.437

这取决于为您的服务器提供哪种服务。例如，如果它是一个 Web 服务器，您应该执行一个 http 请求。

# android - Android空推错误

> ID：10399136
> 
> 赞同：2
> 
> 时间：2012-05-01T14:28:28.047
> 
> 标签：android

我正在尝试将 Airpush for android 实现到我的应用程序中，但即使是原始测试示例应用程序 logcat 也说

```
dalvikvm    Could not find class 'com.airpush.android.Airpush', referenced from method com.air.airtest.onCreate 
```

我的代码来自原始示例代码，因此没有解析错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:41:33.140

看来您正在使用新的 Eclipse ADT。

如果您有对不在“libs”文件夹中的 jar 的引用，例如，如果您使用“类路径变量”，则可以通过导出引用来解决新 ADT 17 的 NoClassDefFoundError 问题。要导出引用：只需转到“Properties > Java Build Path > Order and Export”，然后检查要导出的所有引用。成功完成所有步骤后，清理并构建项目。见下图。[在这里](https://stackoverflow.com/questions/2247998/noclassdeffounderror-eclipse-and-android)查看更多详细信息。

# windows-phone-7 - 在 windows phone 7 上录制扬声器

> ID：10399139
> 
> 赞同：2
> 
> 时间：2012-05-01T14:29:05.010
> 
> 标签：windows-phone-7, streaming, audio-recording

你知道是否可以截取win phone 7上的音频流并记录扬声器上正在播放的内容？

或者，我使用 MediaElement，有没有办法获取当前流？我想在达到特定频率时添加一些动画。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:26:08.010

只要您知道媒体的位置并可以启动下载，您就可以获得媒体。没有用于自动捕获声音输出的内置功能。假设 MediaElement 正在播放远程流，您应该知道它的位置。

# javascript - 创建 XMLHttpRequest 的方法

> ID：10399140
> 
> 赞同：0
> 
> 时间：2012-05-01T14:29:06.980
> 
> 标签：javascript, ajax

我最近刚开始学习 ajax，我正在研究创建 HttpRequests
的方法这些是我迄今为止想出的方法：

```
function one() {
if(window.XMLHttpRequest) {
    xhr = new XMLHttpRequest();
    alert('Other');
} else if (window.ActiveXObject) {
    xhr = new ActiveXObject("Microsoft.XMLHTTP");
    alert('windows');
}
return xhr;
}

function two() {
    if(window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
        alert('Other');
    } else if (!window.XMLHttpRequest) {
        xhr = new ActiveXObject('Microsoft.XMLHTTP');
        alert('windows');
    }
    return xhr;
}

function three() {
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
        alert('Other');
    } else {
        xhr = new ActiveXObject();
        alert('windows');
    }
    return xhr;
}

function four() {
    try {
        xhr = new XMLHttpRequest();
        alert('Other');
    } catch (e) {
        xhr = new ActiveXObject();
        alert('windows');
    }
    return xhr;
} 
```

我想知道更多创建请求的方法。如果有人有其他方法，请分享。我喜欢 Javascript 的部分原因是有很多方法可以完成相同的任务，我喜欢探索所有可能的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:39:57.993

```
function four() {
  try {
    return new XMLHttpRequest(); 
  } catch (e) // Catch ReferenceError
    return new window.ActiveXObject("Microsoft.XMLHTTP");
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:37:34.087

在寻找做事的好方法时，我通常会遵循 jQuery，

```
// Functions to create xhrs
function createStandardXHR() {
    try {
        return new window.XMLHttpRequest();
    } catch( e ) {}
}

function createActiveXHR() {
    try {
        return new window.ActiveXObject( "Microsoft.XMLHTTP" );
    } catch( e ) {}
}

// Create the request object
// (This is still attached to ajaxSettings for backward compatibility)
jQuery.ajaxSettings.xhr = window.ActiveXObject ?
    /* Microsoft failed to properly
     * implement the XMLHttpRequest in IE7 (can't request local files),
     * so we use the ActiveXObject when it is available
     * Additionally XMLHttpRequest can be disabled in IE7/IE8 so
     * we need a fallback.
     */
    function() {
        return !this.isLocal && createStandardXHR() || createActiveXHR();
    } :
    // For all other browsers, use the standard XMLHttpRequest object
    createStandardXHR; 
```

[资源](https://github.com/jquery/jquery/blob/master/src/ajax/xhr.js)

# java - 给定一个 pcap 文件，如何使用 jpcap 查找 src ip 地址是本地还是远程

> ID：10399143
> 
> 赞同：0
> 
> 时间：2012-05-01T14:29:12.757
> 
> 标签：java, pcap, jpcap

给定一个 pcap 文件，我如何使用 jpcap 找出哪些 src ip 地址是本地的，哪些是远程的？任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:31:14.583

你不能。

pcap 条目中没有任何内在的东西可以告诉您数据包是入站还是出站。

您需要一个配置文件来告诉您哪些 IP 被视为“本地”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T18:37:16.333

要确定一个地址是否在运行基于 pcap 的应用程序的机器上是本地地址，该`pcap_findalldevs()`例程可用于获取该机器上所有接口的列表，以及分配给每个接口的 IPv4 和 IPv6 地址列表. 我不知道 jpcap 是否包含对`pcap_findalldevs()`.

# backbone.js - 骨干关系属于

> ID：10399146
> 
> 赞同：1
> 
> 时间：2012-05-01T14:29:34.387
> 
> 标签：backbone.js, backbone-relational

您如何使用主干和主干关系创建和使用属于（或多对一）关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T19:50:19.380

例如，如果您的关系是 A Building 有很多 Rooms。房间属于建筑物：

```
Building = Backbone.RelationalModel.extend({
    relations: [
        {
            type: 'HasMany',
            key: 'rooms',
            relatedModel: 'Room',
            reverseRelation: {
                key: 'building'
            }
        }
    ]
});

Room = Backbone.RelationalModel.extend();

house = new Building({id:1});
science_building = new Building({id:2});

console.log(house.get('rooms').length);  // ==> 0

living_room = new Room({building:1,name:"Living Room"});
lab = new Room({building:2,name:"Chemistry Lab"});

console.log(house.get('rooms').length); // ==> 1
console.log(house.get('rooms').first().get('name')); // ==> "Living Room"

console.log(science_building.get('rooms').length); // ==> 1
console.log(science_building.get('rooms').first().get('name')); // ==> "Chemistry Lab" 
```

reverseRelation 属性指定关系的“belongs_to”部分。

# c# - C# 显示 XML 数据

> ID：10399149
> 
> 赞同：0
> 
> 时间：2012-05-01T14:29:45.560
> 
> 标签：c#, xml

有没有可以快速加载 XML 的组件？我已经使用 textbox 和 webbrowser 来显示 XML，它们工作得很好，但是由于我的 XML (200MB) 中存储了大量数据，我需要 30 秒才能显示它。是否有任何其他组件可以更快地显示 XML 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:50:26.133

正如@PinnyM 在评论中所解释的那样 - 对于如此大的文档，取决于客户端计算机，30 秒听起来并不合理。取决于浏览器 - 它将使用 CSS、JavaScript 或其他附加组件的任意组合呈现此文件。这些技术并不是真正为如此大的文件设计的。

您可以考虑更改 mime 类型并使用记事本之类的工具打开文件，该工具不会以漂亮的打印格式呈现 XML，但显示 XML 标记应该更快。

# cakephp - CakePHP 模型验证，检查可能 2 的 1 字段是否存在文本

> ID：10399150
> 
> 赞同：0
> 
> 时间：2012-05-01T14:29:50.680
> 
> 标签：cakephp, cakephp-1.2

我在数据库中的城镇/城市字段上使用了一些简单的验证。这已应用于模型中。如您所见，city 和 town 这两个字段至少需要 3 个字符且不能为空。

但是，当人们填写此字段的表格时，他们将拥有一个城镇或城市，而不是两者兼而有之。如何在验证中创建一个检查，以便只需要完成这些字段中的 1 个？我显然不能 'allowEmpty' => true 两个字段，所以我该如何实现呢？

验证规则：

```
 'town' => array(         
             'rule' => array('minLength', 3),                            
             'allowEmpty' => false,
             'message' => 'Must have town'
          ) ,

                 'city' => array(         
             'rule' => array('minLength', 3),                            
             'allowEmpty' => false,
             'message' => 'Must have city'
          ) , 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:37:01.943

您可以在 AppModel 上创建自定义验证规则，如下所示：

```
function eitherOr(&$data, $orFields = array()) {
    foreach ($orFields as $orField => $orValue) {
        if (!empty($orValue)) {
            unset($this->validationErrors[key($data)]);
        }
    }
    return true;
} 
```

然后，添加到您的验证规则。

```
var $validate = array(
  'town' => array(
    'empty' => array(
      'rule' => 'allowEmpty'
    ),
    // other rules
  ),
  'city' => array(
    // other rules
    'eitherOr' => array(
      'rule' => array('eitherOr', array('town'))
    )
  )
); 
```

基本上，它将检查您在第二个参数中传递的字段数组中的值（在这种情况下，`array('town')`将检查 town 字段。如果该值不为空，它将删除 city 上的任何验证错误，因此允许它通过。该规则需要放在最后，以便消除验证错误。

# hsqldb - 使用 HSQLDB 清除 .lobs 文件的推荐方法

> ID：10399153
> 
> 赞同：2
> 
> 时间：2012-05-01T14:30:03.810
> 
> 标签：hsqldb

我正在将 HSQLDB 用于保存 BLOBS 的项目，版本为 2.2.8，并且可以看到 .lobs 文件按预期创建。

*.lobs 文件的大小不断增加，并且不会因为从应用程序中删除记录而下降。

在阅读文档时，发现 .lobs 文件未清除，必须在关闭数据库后完成。

所以，问题是：如果我们有应用程序 24*7 在线，那么我们如何处理 lobs 文件的清除或缩小大小？

*   有没有办法以编程方式做到这一点？
*   或者通过配置设置的某种方式（刚刚发现 lob_file_scale 设置，这不是我正在寻找的）？
*   在这种情况下，推荐的家政方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T18:16:14.520

当 CHECKPOINT 发生时，被删除的 lob 占用的所有空间都被释放。该空间被重新用于新的 lob，并且 .lobs 文件的大小在所有空间都用完之前不会增长。

当 .log 文件的大小达到限制时，会定期出现检查点。也可以通过执行 CHECKPOINT SQL 语句来执行检查点。

# javascript - 使用 jQuery.support.cors = true 的跨域脚本

> ID：10399154
> 
> 赞同：3
> 
> 时间：2012-05-01T14:30:08.467
> 
> 标签：javascript, jquery, jsonp

我一直在研究各种展示跨域脚本的示例，并遇到了一个我想使用 jQuery.support.cors = true 以及 Ajax 调用从 web 服务中检索数据的案例。我有一个[使用 jsonp](http://jsfiddle.net/shelbyz/jdNUn/)工作的 web 服务示例，我认为添加 jQuery.support.cors = true、将 dataType 更改为“json”并删除 &$callback=? 从网址。我可以看到来自 web 服务 (Netflix) 的响应带有预期的数据，但是当 ajax 调用返回时，它会执行错误函数而不是成功。

我最初认为 Web 服务可能没有正确的 cors 标头，但我倾向于认为收到的格式化响应将等同于存在的标头。也许我没有正确格式化成功/错误函数并且 Ajax 结果不喜欢那样。

这是尝试使用 jQuery.support.cors 无济于事[的小提琴。](http://jsfiddle.net/shelbyz/Tg4eZ/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:37:28.080

从：`curl -i "http://odata.netflix.com/v2/Catalog/Titles?$select=Name,Runtime,ReleaseYear&$filter=dark&$orderby=Name&$format=json"`

```
Cache-Control: private
Content-Length: 3386076
Content-Type: application/atom+xml;charset=utf-8
Expires: Tue, 01 May 2012 14:37:06 GMT
Vary: *
Server: Microsoft-IIS/7.0
DataServiceVersion: 2.0;
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Tue, 01 May 2012 14:36:37 GMT 
```

没有与 CORS 相关的标头。Netflix 不允许 CORS 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:35:22.443

当然，在这个例子中，Netflix 会阻止来自他们自己服务器之外的任何内容。

# ios - UINavigationController 工具栏 - 使用 UIActivityIndi catorView 添加状态文本

> ID：10399156
> 
> 赞同：3
> 
> 时间：2012-05-01T14:30:24.923
> 
> 标签：ios, xcode, uinavigationcontroller, uibarbuttonitem, uiactivityindicatorview

我想在我的应用程序中添加一个加载活动指示器，类似于邮件应用程序中的加载活动指示器，右侧有状态文本。我正在使用 UINavigationController，所以我知道我需要在希望显示它的每个视图上设置 toolbarItems 数组。我可以添加活动指示器，它确实会显示出来，但是当我尝试使用下面的代码添加文本字段时，文本不会显示。有没有办法以编程方式创建一个容器，该容器同时具有状态文本和 UIActivityIndi​​catorView，如果添加到 toolbarItems 数组中，则会显示该容器。

```
UIBarButtonItem *textFieldItem = [[[UIBarButtonItem alloc] initWithCustomView:textField] autorelease];
self.toolbarItems = [NSArray arrayWithObject:textFieldItem]; 
```

* * *

更新：我根据 pdriegen 的代码创建了一个从 UIView 派生的类。
我还在控制器中将此代码添加到 viewDidLoad

```
UIProgressViewWithLabel * pv = [[UIProgressViewWithLabel alloc] init];

UIBarButtonItem * pvItem = [[UIBarButtonItem alloc] initWithCustomView:pv];

[self setToolbarItems:[NSMutableArray arrayWithObject:pvItem]]; 
```

目前，工具栏中没有显示任何内容。我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T17:16:04.737

不要将活动指示器和标签添加为单独的视图，而是创建一个包含它们的单个复合视图并将该复合视图添加到您的工具栏。

创建一个派生自 UIView 的类，重写 initWithFrame 并添加以下代码：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self configureView];
    }
    return self;
}

-(void)configureView{

    self.backgroundColor = [UIColor clearColor];

    UIActivityIndicatorView* activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];        
    activityIndicator.frame = CGRectMake(0, 0, self.frame.size.height, self.frame.size.height );
    activityIndicator.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    activityIndicator.backgroundColor = [UIColor clearColor];

    [self addSubview:activityIndicator];

    CGFloat labelX = activityIndicator.bounds.size.width + 2;

    UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(labelX, 0.0f, self.bounds.size.width - (labelX + 2), self.frame.size.height)];
    label.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    label.font = [UIFont boldSystemFontOfSize:12.0f];
    label.numberOfLines = 1;

    label.backgroundColor = [UIColor clearColor];
    label.textColor = [UIColor whiteColor];
    label.text = @"Loading..";

    [self addSubview:label];
} 
```

您还必须公开用于 startAnimating、stopAnimating 的方法和一个设置标签文本的方法，但希望您明白这一点。

要将其添加到您的工具栏，请使用以下内容进行初始化：

```
UIProgressViewWithLabel * pv = [[UIProgressViewWithLabel alloc] initWithFrame:CGRectMake(0,0,150,25)]; 
```

玩弄宽度以使其适合..

# android - 如何从主活动、对话框的 onClick 函数中调用 findPreference？

> ID：10399157
> 
> 赞同：0
> 
> 时间：2012-05-01T14:30:33.653
> 
> 标签：android, android-preferences, android-dialog

我在主要活动中有以下对话框：

```
@Override
protected Dialog onCreateDialog(int id) {
    final Dialog dialog;
    switch(id) {
    case DIALOG_NAME:
        builderDialog.setMessage(getString(R.string.dialog_text))
               .setCancelable(false)
               .setPositiveButton(R.string.dialog_share_yes, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // how should I call findPreference here?
                       PreferenceScreen screen = (PreferenceScreen) findPreference("pref_key");
                       ...
                   }
               }) 
```

我收到以下错误：

> 对于新的 DialogInterface.OnClickListener(){} 类型，方法 findPreference(String) 未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:34:22.753

您必须使用您的上下文调用它；

```
YourActivity.this.findPreference("pref_key"); 
```

这应该工作;）

# java - 如何从 oracle 数据库获取信息到 java bean？

> ID：10399160
> 
> 赞同：0
> 
> 时间：2012-05-01T14:30:50.293
> 
> 标签：java, oracle

我在使用 mysql 后尝试使用 oracle，并且有一个关于从 db 表中获取信息的问题。这就是我所拥有的。

```
PreparedStatement statement = null;
    ResultSet resultSet = null;

    List<News> newsList = new ArrayList<News>();

    try {
        statement = connection.
        prepareStatement(NewsSQLQueryContainer.GET_NEWS_LIST);

        resultSet = statement.executeQuery();
        while (resultSet.next()) {
            News news = new News();
            news.setIdNews(resultSet.getInt("idnews"));
            news.setInfo(resultSet.getString("info"));
            news.setNewsDate(resultSet.getDate("newsdate"));
            news.setNewsHeader(resultSet.getString("newsheader"));
            newsList.add(news);
            }
    } 
```

并且连接是从我自己的池中接收的，它以这种方式初始化：

```
public static void init() throws DAOException{
    if(instatance == null){

        ResourceBundle rb = ResourceBundle.getBundle(PROPERTIES_FILENAME);
        String driver  = rb.getString("DATABASE_DRIVER_NAME");
        String url = rb.getString("DATABASE_URL");
        String user = rb.getString("DATABASE_USER");
        String password = rb.getString("DATABASE_PASSWORD");
        String poolSizeStr = rb.getString("DATABASE_POOLSIZE");
        int poolSize = (poolSizeStr != null) ?
                Integer.parseInt(poolSizeStr) : DEFAULT_POOL_SIZE;

        log.info("Trying to create pool of connections...");

        instatance = new ConnectionPool(driver,url,user,password,poolSize);

        log.info("Connection pool initialized");
} 
```

从此属性文件中：

```
DATABASE_DRIVER_NAME=oracle.jdbc.driver.OracleDriver
DATABASE_URL=jdbc:oracle:thin:@localhost:1521:ORCL
DATABASE_USER=root
DATABASE_PASSWORD=root
DATABASE_POOLSIZE=40 
```

几乎相同的代码与 mysql 一起工作，现在不工作（没有结果集）。从 oracle 获取信息有什么特殊方法吗？

修复它：只是忘记了这个用户对这个数据库没有这样的权限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:42:09.847

我认为您遇到的问题与从 Oracle 表获取信息与从 MySQL 表获取信息之间的任何区别无关。您检索结果集的方式看起来没有任何问题（尽管看到 NewsSQLQueryContainer.GET_NEWS_LIST 中包含的查询会很有趣）。很抱歉这个明显的问题 - 你的表是否包含任何数据？！

# java - 通过@EJB 注解注入远程EJB

> ID：10399163
> 
> 赞同：4
> 
> 时间：2012-05-01T14:31:03.630
> 
> 标签：java, jakarta-ee, ejb, ejb-3.0

简单的问题：当我在给定的应用程序服务器上部署 EJB，然后我想从部署在不同应用程序服务器上的 EJB 中使用它（当然是远程的），我如何在第二个应用程序服务器中注入前 EJB 的远程实例一？

它应该是这样的：

```
 @Stateless
 public class EJBClient {

   @EJB("myRemoteBean")
   static private MyBeanRemote bean;

   ... 
 } 
```

但我想知道的是：如何为第二个应用程序服务器指定 JNDI 属性（IP 等）以进行查找？

如果没有执行此操作的标准方法，则服务器是 JBoss。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:35:41.953

好吧，首先我猜你的代码有点混乱。您不应该使用带有注释的静态类`@Stateless`。

其次，你为什么打电话给你的班级`EJBClient`然后用 注释它`@Stateless`？

要回答您的问题，查找方法取决于应用程序服务器。在 Jboss 中，EJB 名称由`Context/EJB_Name/remote`. 其中`Context`是您在其中部署 EJB 的 EAR 名称，`EJB_Name`是用 注释的接口名称`@Remote`。

在查找过程中，您应该在属性中指定另一台服务器所在的位置。

希望这对您有所帮助。

# gevent - 为什么这个 http 流不能按预期工作？

> ID：10399164
> 
> 赞同：1
> 
> 时间：2012-05-01T14:31:11.663
> 
> 标签：gevent, python-requests

我有一个服务器正在尝试将一些内容流式传输到客户端（这是 Kenneth Reitz 优秀的[请求](http://python-requests.org)库）-（以下代码的道具[toastdriven.com](http://toastdriven.com/blog/2011/jul/31/gevent-long-polling-you/)）。请注意，在浏览器中，它按预期工作。

```
from gevent import monkey
monkey.patch_all()

import datetime
import time
from gevent import Greenlet
from gevent import pywsgi
from gevent import queue

import json

def current_time(body):
    current = start = datetime.datetime.now()
    end = start + datetime.timedelta(seconds=60)

    while current < end:
        current = datetime.datetime.now()
        message = json.dumps({'time': current.strftime("%Y-%m-%d %I:%M:%S")})
        body.put(message)
        time.sleep(1)

    body.put('</body></html>')
    body.put(StopIteration)

def handle(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/html')])
    body = queue.Queue()
    g = Greenlet.spawn(current_time, body)
    return body

server = pywsgi.WSGIServer(('127.0.0.1', 1234), handle)
print "Serving on http://127.0.0.1:1234..."
server.serve_forever() 
```

还有一个客户：

```
import sys
import requests
import json

my_config = {'verbose': sys.stdout}
r = requests.get('http://127.0.0.1:1234/', config=my_config)

for line in r.iter_lines():
    print json.loads(line) 
```

我不明白为什么 json 行没有出现在终端（OSX）中。当我 ctrl-c 时，响应被转储到屏幕上。

如果我做：

```
for line in r.iter_content() 
```

我得到了 json，每行上的一个字符，按预期流式传输。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:54:04.820

您的客户端可能正在缓冲的终端窗口中运行。每次打印后，尝试添加`sys.stdout.flush()`以刷新输出缓冲区。

# xml-parsing - 使用 TDOM 解析 xml 数据的问题

> ID：10399166
> 
> 赞同：1
> 
> 时间：2012-05-01T14:31:17.617
> 
> 标签：xml-parsing, tcl, tdom

希望有人能指出我正确的方向。

我对 TCL 比较陌生，但与我使用的其他语言（Javascript/VbScript/C#）相比，示例代码非常缺乏。

**代码：**

* * *

```
package require http

package require tdom

set html "<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\" s:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"><s:Body><u:InfoResponse xmlns:u=\"urn:schemas-upnp-org:service:Transport:1\"><MyData>This is my final bit of data</MyData></u:InfoResponse></s:Body></s:Envelope>"

set doc [dom parse $html]

set root [$doc documentElement]

set node [$root selectNodes "/s:Envelope/s:Body/u:InfoResponse/MyData/text()"] 

puts [$node data] 
```

* * *

**错误是：**

```
前缀无法解析
    在执行时
"$root selectNodes "/s:Envelope/s:Body/u:InfoResponse/MyData/text()"
    从内部调用
"设置节点 [$root selectNodes "/s:Envelope/s:Body/u:InfoResponse/MyData/text()]"

```

如果我更改 XML 并将元素重命名为 Envelope、Body 等，它工作正常（但不是可能的解决方案，因为这是一个数据馈送）。我不得不承认我的 XML 解析技巧有点欠缺。

我尝试了一个在线 xQuery 工具，它可以解析它。我猜它可能与命名空间和 TCL 有关，但不知道该怎么做..

我基本上只需要`<MyData>`从这部分数据中提取出来，并且只会有一个响应，所以可能有一种更简单的方法而不是 xQuery？我需要撤回的其他一些数据将有多个，所以很高兴知道如何做到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:58:52.007

与您可能期望的相反，tDOM 的`selectNodes`方法不使用来自上下文节点的命名空间前缀映射；您必须自己提供该映射[选项`-namespaces`，如文档](http://docs.activestate.com/activetcl/8.5/tdom/domNode.html)中所述。

尝试这个：

```
set nsmap {
    s  http://schemas.xmlsoap.org/soap/envelope/
    u  urn:schemas-upnp-org:service:Transport:1
}
set node [$root selectNodes -namespaces $nsmap \
        "/s:Envelope/s:Body/u:InfoResponse/MyData/text()"] 
```

我有点担心无前缀元素的映射，但如果它被排除在映射之外，它*可能会起作用。*（在同一个文档中混合命名空间的非命名空间的 XML 通常不是一个好主意。）

# weblogic - 我的应用程序如何访问在 Weblogic 管理控制台中配置的密钥库？

> ID：10399167
> 
> 赞同：3
> 
> 时间：2012-05-01T14:31:20.743
> 
> 标签：weblogic, keystore

我想访问在我的 Web 应用程序的 Weblogic 的自定义密钥库配置中配置的身份密钥库 (JKS)。如何在不依赖以下环境属性的情况下让 weblogic 公开它：-Djavax.net.ssl.Keystore、-Djavax.net.ssl.KeystorePassword。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T09:50:30.910

You can use following code as a starting point.

A couple of notes:

*   User executing the code needs to belong to a group called `OracleSystemGroup`
*   Keystore is loaded from file system which is not recommended by EJB specification. But I think that file reading can be safely done.
*   Keystore passphrase is contained in `java.lang.String`, which is not recommended.

Because of these cons I am investigating a better approach. I have been trying to find a WebLogic service which would provide services to access certificates and keys in identity store. It seems that [there is not one](http://docs.oracle.com/cd/E21764_01/web.1111/e13710/archtect.htm#i1062666).

```
InitialContext ic = new InitialContext();
MBeanServer server = (MBeanServer) ic.lookup("java:comp/env/jmx/runtime");

// Get access to server configuration
ObjectName runtime = new ObjectName("com.bea:Name=RuntimeService,Type=weblogic.management.mbeanservers.runtime.RuntimeServiceMBean");
ObjectName serverConfig = (ObjectName) server.getAttribute(runtime, "ServerConfiguration");

/* Load identity store location and passphrase.
 * If e.g. Demo identity has been configured (in WL console) instead of
 * custom identity then the following does not work.
 */

// Passphrase as clear text
Object keyStorePassPhrase = server.getAttribute(serverConfig, "CustomIdentityKeyStorePassPhrase");
Object keyStoreFileName = server.getAttribute(serverConfig, "CustomIdentityKeyStoreFileName");

// Load keystore
KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
ks.load(new FileInputStream(keyStoreFileName.toString()),
        keyStorePassPhrase.toCharArray()); 
```

# linux - Vagrant for virtual linux dev - 如何知道 vm 启动是否“挂起”？

> ID：10399170
> 
> 赞同：1
> 
> 时间：2012-05-01T14:31:29.900
> 
> 标签：linux, virtualbox, vagrant

大家好：我最近安装了 vagrant，并且正在学习它。我注意到启动需要一段时间，事实上，它甚至提到了：

“这可能需要几分钟”。

为什么 vagrant 需要很长时间才能启动？我会假设它只是虚拟盒子顶部的一个薄层，在大多数情况下启动速度非常快。

另外 - 我如何监控引导是否挂起？

一些事实：

1）我在 ubuntu 12 中使用 ruby​​ 1.8 作为主机，使用 64 位主机/流浪者操作系统。

2) 顶部 sais :

```
 %cpu    %mem         
   20   0 1820m 686m 650m S     10      18.6   1:03.21 VBoxHeadless 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:59:37.837

这些可能与阻止`vagrant`命令连接到已引导虚拟机的网络问题有关。您可以通过启用该`gui`选项来检查虚拟机是否已启动，或者查看 Virtual Box GUI 中的缩略图。

Github 上有一个未解决的问题，可能与您的问题相符：[问题 #455](https://github.com/mitchellh/vagrant/issues/455)

我个人在我`Vagrantfile`的中使用它，问题刚刚停止：

```
 # Using hostonly network. You can change this if it doesn't fit your environment
  # (no reason it shouldn't).
  config.vm.network :hostonly, "10.10.10.2"

  # Seems to fix 
  config.vm.customize ["modifyvm", :id, "--rtcuseutc", "on"]
  config.ssh.max_tries = 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-03T19:45:30.060

1.  修改您的 vagrantfile 以启用 ui[启动](http://docs.vagrantup.com/v2/virtualbox/configuration.html)
2.  启用 ui 启动的 vagrant up
3.  尽快通过 ui 以 vagrant/vagrant 身份登录并执行“top”以验证正在运行的进程。

# html - 响应式“网格”？

> ID：10399173
> 
> 赞同：2
> 
> 时间：2012-05-01T14:31:40.117
> 
> 标签：html, grid, zurb-foundation

我有一项令人羡慕的任务是“改造”一个网站以使其具有响应性，并获得了 Zurb 基础 980px 网格。我有点迷茫我应该如何让我现有的网站适应这个 - 我是否必须完全重新设计它以使元素与新网格对齐？我知道该站点将按比例缩放，并且在某些断点处将隐藏一些元素并为其他元素加载新的 CSS - 但这是我没有得到的网格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:35:20.710

到目前为止，我已经转换了两个 960gs 的网站，而且都运行得很快。

**对于初学者，请确保您已经引用了项目中的所有基础资源（Javascript 和 CSS）。**

首先，您提到您的网格是 960，但 zurb 是 980。我们将完全自定义。您需要做的是添加 CSS 覆盖。为此，请打开 app.css 并添加以下代码：

> .row { 最大宽度：960px; }

接下来，您需要查看当前的 HTML，看看它与 Zurb 的相似程度。在 960gs 中，没有行，只有列。所以在我的项目中，我需要添加行，并对列类进行查找和替换，如下所示：

前：

```
<div class="container_12">
  <div class="grid_8">
          ...    
  </div>
  <div class="grid_4">
          ...
  </div>
</div> 
```

后：

```
<div class="container">
 <div class="row">
  <div class="eight columns">
          ...    
  </div>
  <div class="four columns">
          ...
  </div>
 </div>
</div> 
```

您需要在所有页面上执行此操作。**请记住，每个 <row> 必须仅包含 12 列，不多不少。**

完成此操作后，您应该一切顺利。由于您现在正在处理灵活的网格和灵活的内容，因此您可能需要完成一些额外的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:44:45.383

您可以使用 960.gs 网站上的 Adapt.js 插件。

[http://adapt.960.gs/](http://adapt.960.gs/)

它已经与 960gs 兼容，因此您无需更改框架中的任何内容。

但是，您可能仍需要重新编码一些内部 CSS 类以适应流动性。

# glassfish - 带有 Glassfish 3.1.2 和 Grizzly 的 Websockets - 意外响应代码：405

> ID：10399175
> 
> 赞同：2
> 
> 时间：2012-05-01T14:31:50.000
> 
> 标签：glassfish, websocket, grizzly

我正在尝试在本地 Glassfish 3.1.2 服务器安装中使用 websocket。我在我的 Maven 项目中使用 Grizzly 2.2：

```
<dependency>
  <groupId>org.glassfish.grizzly</groupId>
  <artifactId>grizzly-websockets</artifactId>
  <version>2.2</version>
</dependency> 
```

WebSocketsServlet.java

```
import org.glassfish.grizzly.Grizzly;
import java.util.logging.Logger;
import org.glassfish.grizzly.websockets.WebSocketEngine;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;

public class WebSocketsServlet extends HttpServlet {

    private static final Logger logger = Grizzly.logger(WebSocketsServlet.class);
    private final VideoSharingApplication app = new VideoSharingApplication();

    @Override
    public void init(ServletConfig config) throws ServletException {
        logger.log(Level.SEVERE, "registering");
        WebSocketEngine.getEngine().register(config.getServletContext().getContextPath() + "/videosharing", app);
    }

    @Override
    public void destroy() {
        WebSocketEngine.getEngine().unregister(app);
    }
} 
```

VideoSharingWebSocket.java

```
import java.util.logging.Logger;
import org.glassfish.grizzly.websockets.DefaultWebSocket;
import org.glassfish.grizzly.websockets.ProtocolHandler;
import org.glassfish.grizzly.websockets.WebSocketListener;
import org.glassfish.grizzly.Grizzly;

public class VideoSharingWebSocket extends DefaultWebSocket {

    private static final Logger logger = Grizzly.logger(VideoSharingWebSocket.class);

    public VideoSharingWebSocket(ProtocolHandler handler, WebSocketListener... listeners) {
        super(handler, listeners);
    }

} 
```

VideoSharingApplication.java

```
import java.util.logging.Level;
import java.util.logging.Logger;
import org.glassfish.grizzly.Grizzly;
import org.glassfish.grizzly.websockets.ProtocolHandler;
import org.glassfish.grizzly.websockets.WebSocket;
import org.glassfish.grizzly.websockets.WebSocketApplication;
import org.glassfish.grizzly.websockets.WebSocketListener;

import org.glassfish.grizzly.http.HttpRequestPacket;

public class VideoSharingApplication extends WebSocketApplication {

    private static final Logger logger = Grizzly.logger(VideoSharingApplication.class);

    @Override
    public WebSocket createSocket(ProtocolHandler handler, WebSocketListener... listeners) {
        logger.log(Level.SEVERE, "createSocket");
        return new VideoSharingWebSocket(handler, listeners);
    }

    @Override
    public boolean isApplicationRequest(HttpRequestPacket request) {
        logger.log(Level.SEVERE, "isApplicationRequest");
        return "/videosharing".equals(request.getRequestURI());
    }

    @Override
    public void onMessage(WebSocket socket, String data) {
        logger.log(Level.SEVERE, "onMessage");
        for (WebSocket webSocket : getWebSockets()) {
            if (socket != webSocket) {
                webSocket.send(data);
            }
        }
    }
} 
```

我使用以下命令在 Glassfish 中启用了 websockets 支持：

```
asadmin set configs.config.server-config.network-config.protocols.protocol.http-listener-1.http.websockets-support-enabled=true 
```

客户端代码，app.js：

```
var network = function () {
    return {
        initialize: function() {
            var url = 'ws://localhost:8080/monApp/videosharing';
            var websocket = new WebSocket(url);
            websocket.name = APP.id;
            websocket.onopen = function(evt) {
                alert('onopen');
            };
            websocket.onerror = function(evt) {
                alert('onerror');
            };
            websocket.onmessage = function (evt) {
                alert('onmessage');
                var command = JSON.parse(evt.data);
                if (command.type == "pause") {
                    APP.pauseVideo();
                } else if (command.type == "play") {
                    APP.playVideo();
                } else if (command.type == "seeked") {
                    APP.seekVideo(command.currentTime);
                } else {
                    alert("Unknown command " + command);
                }
            };
            websocket.onclose = function()
            {
                alert('onclose');
            };
        },
        send: function(command) {
            websocket.send(command);
        }
    }
};

var APP = {
    id: Math.floor(Math.random() * 10000),

    network: network(),

    // Cannot use 'this' here after updating window.onload (see below)
    initialize: function () {
        APP.network.initialize();
        var video = APP.getVideo();
        video.addEventListener('play', 
            function (event) {
                alert('play');
                var command = { type: "play" };
                APP.network.send(JSON.stringify(command));
            },
            false);
        video.addEventListener('pause',
            function (event) {
                alert('pause');
                var command = { type: "pause" };
                APP.network.send(JSON.stringify(command));
            },
            false);
        video.addEventListener('seeked',
            function (event) {
                alert('seeked');
                var command = { type: "seeked",
                                currentTime: APP.getVideo().currentTime };
                APP.network.send(JSON.stringify(command));
            },
            false);
    },

    getVideo: function () {
        return document.getElementsByTagName("video")[0];
    },

    pauseVideo: function () {
        var video = this.getVideo();
        video.pause();
    },

    playVideo: function () {
        var video = this.getVideo();
        video.play();
    },

    seekVideo: function (currentTime) {
        var video = this.getVideo();
        video.currentTime = currentTime;
    }

};

window.onload = APP.initialize; 
```

我正在 Mac 的 Chrome 18.0.1025.165 中对此进行测试。在页面加载时，我收到此错误：

```
Unexpected response code: 405 
```

在服务器日志中没有错误，只显示我的“注册”（WebSocketsServlet）日志。

你有什么建议吗？

先感谢您。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:19:40.913

GlassFish 3.1.2 使用 Grizzly 1.9.46。Grizzly 2.x 与该版本的 GlassFish 不兼容。您需要在 3.1.2 中使用 1.9.46 或更高版本的 1.9。

# jquery - jQuery 选择 标签并在其周围环绕空格

> ID：10399180
> 
> 赞同：0
> 
> 时间：2012-05-01T14:32:27.177
> 
> 标签：jquery, replace

例如我有这个标记：

```
Test text<br>
test2 text 
```

它
内部需要在之前和之后有一个空间。像这样

```
" <br> " 
```

所以我可以拆分整个文本并得到一个完整的列表，如下所示：

```
Test
text
<br>
test2
text 
```

我使用以下代码进行拆分：

```
var words = text.split(" ");
    //            console.log("words:" + words);
for ( var i = 0, l = words.length; i<l; ++i ) {
    //  console.log(i +": "+words[i] );
} 
```

我有一些代码可以回答我的问题。还没有完成，需要你的帮助。

```
// Replace all "<br>" to " <br> "             
$("#artikel br").each(function(){
   alert($(this).index()));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:35:50.803

```
$("#artikel").html(function(index, oldhtml){
    return oldhtml.replace(/\<br\>/gi, "&nbsp;<br>&nbsp;"); 
}); 
```

`html` [文档](http://docs)

[**现场演示**](http://jsfiddle.net/hgt7X/1/)

# actionscript - 如何让 Flixel 在重叠时忽略透明图像？

> ID：10399185
> 
> 赞同：1
> 
> 时间：2012-05-01T14:32:45.280
> 
> 标签：actionscript, transparency, collision-detection, flixel

我使用 Photoshop 创建了一组静态对象、一堆墙壁和大门，并让背景透明。该`bunchOfWalls`图像与我的地图大小相同（600x600x）。

所以，当我这样做时`FlxU.overlap(bunchOfWalls, myHero, heroHitWalls);`，这个函数会随着 Hero 的每一次移动而触发，因为它会在每次检测到与图像透明区域的碰撞时触发。这意味着英雄无法移动，因为图像层位于地图层本身的顶部并且具有相同的大小（均为 600x600）。

有什么方法可以让 Flixel 忽略我`bunchOfWalls`图像的透明区域，还是有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:14:32.317

每个 Flx 对象都有一个边界框，它是一个用于确定碰撞的矩形。内置的`FlxG.collide()`&`FlxG.overlap()`函数只检查对象的边界框是否相交。不考虑透明度。

那么你如何解决这个问题？你可以...

1) 将背景图像拆分成不透明的墙块。然后就可以继续使用 Flixel 的碰撞方法了。

2）使用考虑透明度的像素完美碰撞方法。我是[Flixel Power Tools](http://www.photonstorm.com/flixel-power-tools)的忠实粉丝——它是一个包含许多有用功能的插件，其中一个是像素完美碰撞。它真的很容易使用，在你的情况下它可能看起来像这样：

```
if (FlxCollision.pixelPerfectCheck(bunchOfWalls, myHero))
{
    heroHitWalls();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:33:16.873

使用 flixel 的另一个不错的选择是`FlxTilemap`为你的墙壁创建一个，而不是一个单一的大精灵。与@WgFunstorm 的第一个建议基本原理相同；将你的墙壁分成几部分并根据这些部分进行碰撞。

# vim - 尝试安装已安装 vimballPlugin 的 vimball

> ID：10399186
> 
> 赞同：2
> 
> 时间：2012-05-01T14:32:57.030
> 
> 标签：vim

我想安装这个[插件](http://www.vim.org/scripts/download_script.php?src_id=16854)，所以首先我提取 zip 的内容，然后我这样做：

```
$ vim camelcasemotion.vba 
```

然后我做：

```
:so % 
```

但我收到此错误：

> 处理 /tmp/camelcasemotion.vba 时检测到错误：第 2 行：E492：不是编辑器命令：UseVimball 按 ENTER 或键入命令继续

[在这里](http://www.vim.org/scripts/script.php?script_id=1905)你有插件的页面。我已经安装了 vim 7.3 和 vimballPlugin，你可以在这里看到：

```
:/usr/share/vim/vim73/plugin$ ls
getscriptPlugin.vim  gzip.vim  matchparen.vim  netrwPlugin.vim  README.txt  rrhelper.vim  spellfile.vim  tarPlugin.vim  tohtml.vim  vimballPlugin.vim  zipPlugin.vi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T14:05:51.747

I feel you pain, and am - was - just going through the same issues.

What I did incorrectly was:

*   I put `so /usr/share/vim/[some dirs]/vimballPlugin.vim"` in my vimrc

I then did `: scriptnames` and saw that the plugin hadn't loaded, well, it wasn't on the list.

What I then did correctly was:

*   I actually sourced the plugin myself from within vim: `so /usr/share/vim/[some dirs]/vimballPlugin.vim` and it had loaded:

`: scriptnames` then gave

```
 :
       :
   22: ~/.vim/plugin_loadManually/Align.vba
   23: /usr/share/vim/vim73/plugin-manual/vimballPlugin.vim
   24: /usr/share/vim/vim73/autoload/vimball.vim 
```

The "Align" plugin, that I had been failing to install (from a vimball) I have now also installed (via the `so %` command on the vimball, as per normal.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T17:50:41.133

确保您的路径中有一个 .vimrc 以供 VIM 打开，至少具有以下内容（如在此处找到：http: [//www.mail-archive.com/vim@vim.org/msg12581.html](http://www.mail-archive.com/vim@vim.org/msg12581.html)）。这为我解决了。

```
" =====================================================================
"  Initialize: {{{1
set nocp
if version >= 600
  filetype plugin indent on
endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:17:56.033

> 未找到用户定义的命令

这解释了错误；Vimball 插件未安装（尽管您在文件系统中的某处找到它）或已明确关闭（在`:let g:loaded_vimballPlugin = 1`某处）。原因取决于你的环境，如何/谁安装了 Vim。该`:scriptnames`命令向您显示什么是活动的，并且 :set runtimepath? 显示目录。或者只是务实地从 vim.org 下载 Vimball 插件并重新安装？！

# jquery - Jquery 后退按钮。

> ID：10399188
> 
> 赞同：3
> 
> 时间：2012-05-01T14:33:01.133
> 
> 标签：jquery, back

我想创建一个按钮来运行以前运行的功能。即我单击按钮A 运行功能A 然后单击按钮B 运行功能B 我想要一个按钮，允许用户通过单击后退按钮返回到功能A。

我以为我可以用一个全局变量来保存以前的语句，但它不起作用，因为运行的每个函数都会覆盖存储的语句。这是一些伪代码来解释我的意思

```
var globalvar;
globalvar = functionA;
function B { run globalvar}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T14:35:21.027

使用哈希超链接和`hashchange`事件。在 jQuery 中：

```
$(window).on('hashchange',function() {
    var hash = location.hash.substring(1); // strip the leading # symbol
    // now run code based on whatever the value of 'hash' is
}); 
```

HTML：

```
<a href="#hash1">function A</a>
<a href="#hash2">function B</a> 
```

现在，每当用户单击浏览器的“后退”按钮（或触发 的 HTML 按钮`history.go(-1)`）时，它将返回到之前选择的任何散列并再次触发 hashchange 事件。

[http://jsfiddle.net/mblase75/hL5FZ/](http://jsfiddle.net/mblase75/hL5FZ/)

警告：像 IE7 这样的旧浏览器[可能不支持 hashchange](https://stackoverflow.com/q/3090478/901048)或`history.go()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T12:21:35.133

JQuery 方法，并将类应用回链接，例如：

```
$(document).ready(function(){
  $('a.back').click(function(){
    parent.history.back();
    return false;
  });
}); 
```

# django - django app - 我使用 SQLITE3 完成了应用程序，但想转换为 postgreSql 以部署到 heroku，如何转换？

> ID：10399190
> 
> 赞同：0
> 
> 时间：2012-05-01T14:33:02.810
> 
> 标签：django, heroku

我正在使用窗户。我想在 Heroku 上部署我的 django 应用程序。我在这样做时遇到了错误，并且知道它支持 postgresql 数据库，但我使用了 SQLITE3。那么，如何转换为 Postgresql？在 settings.py 中更改引擎、数据库名称、用户名、密码是否足够或更多更改？此外，在进行更改后，我的代码是否仍然有效，或者我是否需要更改所有内容，例如我的代码中的查询和其他与数据库相关的内容。

安装 postgresql 和 psycopg 后，我尝试了以下命令：

```
python manage.py syncdb 
```

它返回错误说：`received invalid response to SSL negotiation`
还有什么变化可以在 Heroku 上工作吗？

# javascript - 使用 javascript 或 jquery 读写覆盖外部文件

> ID：10399194
> 
> 赞同：0
> 
> 时间：2012-05-01T14:33:07.090
> 
> 标签：javascript, jquery, html, local

我想知道是否有任何方法可以使用 javascript 或 jquery 读写和覆盖外部文件，或者只是另一种方法来处理 html/javascript 应用程序的本地数据？

不是数据库，只是像 xml 之类的文件或其他任何适合该任务的文件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:40:05.183

不知道您对该项目的需求和要求，我会查看本地存储 (HTML5)。您可以在[http://diveintohtml5.info/storage.html阅读更多相关信息](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:33:12.023

```
 $(document).ready(function() {

 $.ajax({
                    type: "GET",
                    url: "XMLFile/CRF_STRUCT_EXTRACT_SUPPORT.xml",
                    dataType: "xml",
                    success: xmlParser
                });  

});

   function xmlParser(xml) {

// do anything with xml file here.

  } 
```

# c# - 事件驱动设计和核心/UI逻辑分离

> ID：10399197
> 
> 赞同：0
> 
> 时间：2012-05-01T14:33:25.440
> 
> 标签：c#, model-view-controller, events, event-handling, separation-of-concerns

我是事件驱动开发的新手，当我尝试实现应该通过核心/UI 边界的事件时，我感到迷茫。

在我的程序中，我有以下内容（c# 中的示例）：

```
UI.RuleForm   Core.RuleList     UI.ResultForm
Cell 1        Rule 1
Cell 2        Rule 2
Cell 3        Rule 3 
```

我想要的是：当一个`RuleForm`单元格发生变化时，它会更新`RuleList`. 并且当`RuleList`发生变化时，resultFrom 将从规则中重新计算。

我目前的想法是，为了保持核心逻辑与UI逻辑分离（即核心应该对UI一无所知），核心应该只生成事件，而不是处理其他人生成的事件。

所以我必须创建某种`UI.RuleListWrapper`可以处理`RuleForm`更改事件的方法，更新`Core.RuleList`. `RuleList`在术语应该触发可以使用的`OnChange`事件。`UI.ResultForm`

总而言之，我的问题是：

我想知道我的推理和有目的的实现是否可以，这可能意味着：**核心模块是否应该能够处理由外部 UI 生成的事件** 我的分离是某种“我的恐惧症”，还是以前做过。还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:04:34.020

你设置`mvc`标签。在 MVC 中，您有一个模型，其中包含数据和业务逻辑（或特定于域的逻辑，如果您愿意）。您有一个 VIEW 来显示数据并接受用户输入。该视图包含最少的代码。最后你有一个控制器，它将视图和模型联系在一起并协调整个事情。

您的示例中缺少的部分是控制器。

MVC 模式公开了一个总体思路，但没有指定任何实现细节。因此，您会发现 MVC 的实现方式完全不同。

模型对视图或控制器一无所知。通常视图不知道控制器。实现 MVC 的主要挑战是找到在 M、V 和 C 之间进行通信的适当方式。我认为在使用 .NET 时利用对象数据绑定并将视图直接绑定到模型是一个好主意. （这可能不是“纯粹的”MVC，但这不会伤害任何人。）模型应该实现`INotifyPropertyChanged`. 它允许模型在不知道任何细节的情况下与视图和控制器进行通信。控制器可以选择订阅`PropertyChanged`模型的事件，以便在属性发生更改时采取适当的操作，例如告诉视图启用或禁用控件。控制器还将订阅视图的按钮单击事件并触发适当的操作。

控制器还可以与其他控制器通信，允许您在另一个视图上显示一个 MVC 三重奏中的操作结果。

# php - 如何在 wordpress/php 中测试 cmyk 或 rgb 颜色模式的 jpg 图像？

> ID：10399201
> 
> 赞同：3
> 
> 时间：2012-05-01T14:33:45.553
> 
> 标签：php, image, wordpress, jpeg

我刚刚让一个客户在 CMYK 中上传了一个 jpg 图像，但它在 IE 和某些版本的 firefox 中没有正确呈现。在上传之前，我是否可以进行检查以确保它以 RGB 格式保存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T14:39:34.623

您可以使用`getimagesize()`. [http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

```
$imgDetails = getimagesize('yourimage.jpg');
if ($imgDetails['channels'] === 4) {
    // CMYK
} elseif ($imgDetails['channels'] === 3) {
    // RGB
} 
```

# php - cURL SSL 请求失败

> ID：10399203
> 
> 赞同：1
> 
> 时间：2012-05-01T14:33:47.390
> 
> 标签：php, rest, ssl, curl, liveperson

我正在尝试使用 Liveperson REST API，我使用以下 php 代码：

```
$authorization = "LivePerson appKey=MY_APP_KEY";
$accept = "application/xml";
$contentType = "application/xml";

$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "C:/dev/wamp/exported.crt");

curl_setopt($ch, CURLOPT_URL, "https://dev.liveperson.net/api/account/1234?v=1");
curl_setopt($ch,CURLOPT_HTTPHEADER,array('Authorization: '.$authorization,'Accept: '.$accept,'Content-Type: '.$contentType));
curl_exec($ch);
$response = curl_getinfo( $ch );
var_export($response);
curl_close($ch); 
```

请求失败，我已经尝试了以下

*   在 php.ini 上启用 openssl
*   从 liveperson 服务器导出证书并在我的代码中使用它
*   按照[此处的说明进行操作](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:45:45.590

尝试`getcwd()`从代码中的第 9 行删除。您使用的是相对于您当前工作目录的完整路径“C:/dev/wamp/exported.crt”，这是错误的。:)

希望这能解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:50:12.183

从您的请求中删除 CA 证书：

```
# curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "C:/dev/wamp/exported.crt"); 
```

实际上，您必须在此处定义证书颁发机构（在您的情况下为 VeriSign）的公钥/证书文件。Liveperson的证书肯定是错的。

检查证书是否对您的问题负责：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

此设置当然不是您的项目的建议，但它可能有助于识别问题。如果认证过程以某种方式负责，您应该成功连接到 Liveperson 的 API 主机。

如果认证过程确实负责，请尝试下载 [VeriSign 的公共根证书] 并将其用作 CAINFO：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_CAINFO, "C:/dev/wamp/verisign_root.crt"); 
```

# java - 枚举中的特殊字符

> ID：10399207
> 
> 赞同：20
> 
> 时间：2012-05-01T14:33:55.080
> 
> 标签：java, enums

我想将特殊字符、括号（ '(' 和 ')' ）和撇号 (') 放在一个枚举中。

我有这个：

```
private enum specialChars{
   "(", ")", "'"
} 
```

但它不起作用。Java 说了一些关于无效标记的内容。我该如何解决这个问题？

Grtz me.eatCookie();

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-01T14:37:04.547

你可以这样做：

```
private enum SpecialChars{
   COMMA(","),
   APOSTROPHE("'"),
   OPEN_PAREN("("),
   CLOSE_PAREN(")");

   private String value;
   private SpecialChars(String value)
   {
      this.value = value;
   }

   public String toString()
   {
      return this.value; //will return , or ' instead of COMMA or APOSTROPHE
   }
} 
```

示例使用：

```
public static void main(String[] args)
{
   String line = //..read a line from STDIN

   //check for special characters 
   if(line.equals(SpecialChars.COMMA)      
      || line.equals(SpecialChars.APOSTROPHE)
      || line.equals(SpecialChars.OPEN_PAREN) 
      || line.equals(SpecialChars.CLOSE_PAREN)
   ) {
        //do something for the special chars
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T14:35:10.117

枚举常量必须是有效的 Java 标识符。`toString`如果您希望它们*以*不同的方式显示，您可以覆盖。

```
public enum SpecialChars {

    OPEN_PAREN {
        public String toString() {
            return "(";
        }
    },

    CLOSE_PAREN {
        public String toString() {
            return ")";
        }
    },

    QUOTE {
        public String toString() {
            return "'";
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T14:37:53.227

你应该改用这样的东西：

```
private enum SpecialChars {
   LEFT_BRACKET('('),
   RIGHT_BRACKET(')'),
   QUOTE('\'');

   char c;

   SpecialChars(char c) {
     this.c = c;
   }

   public char getChar() {
     return c;
   }
} 
```

# java - 如何判断 java/android 中是否存在按钮视图

> ID：10399208
> 
> 赞同：0
> 
> 时间：2012-05-01T14:33:56.700
> 
> 标签：java, android, button, view

我很难相信我在任何地方都找不到这个答案。我的代码似乎无法正常用于检查按钮视图的存在。这是我所拥有的，任何建议都非常感谢。谢谢！

Java 文件：

```
public class LayoutsActivity extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    ActivateButtons();
}

void ActivateButtons()
{
    Button mainLayoutButton = (Button) this.findViewById(R.id.MainLayout);
    if(mainLayoutButton != null)
    {
        mainLayoutButton.setOnClickListener(new View.OnClickListener() {    
            public void onClick(View v) {
                setContentView(R.layout.main);
                ActivateButtons();
            }
        });
    }

    Button linearLayoutButton = (Button) this.findViewById(R.id.LinearLayout);
    if(linearLayoutButton != null)
    {
        linearLayoutButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                setContentView(R.layout.mylinearlayout);
                ActivateButtons();
            }
        });
    }

    Button tableLayoutButton = (Button) this.findViewById(R.id.TableLayout);
        tableLayoutButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                setContentView(R.layout.mytablelayout);
                ActivateButtons();
            }
        });

    Button frameLayoutButton = (Button) this.findViewById(R.id.FrameLayout);
    if(frameLayoutButton != null)
    {
        frameLayoutButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                setContentView(R.layout.myframelayout);
                ActivateButtons();
            }
        });
    }
    Button relativeLayoutButton = (Button) this.findViewById(R.id.RelativeLayout);
    if(relativeLayoutButton != null)
    {
        relativeLayoutButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                setContentView(R.layout.myrelativelayout);
                ActivateButtons();
            }
        });
    }

    Button absoluteLayoutButton = (Button) this.findViewById(R.id.AbsoluteLayout);
    if(absoluteLayoutButton != null)
    {
         absoluteLayoutButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                setContentView(R.layout.myabsolutelayout);
                ActivateButtons();
            }
        }); 
    }

    Button DynamicLayoutButton = (Button) this.findViewById(R.id.DynamicLayout);
    if(DynamicLayoutButton != null)
    {
        DynamicLayoutButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                LinearLayout dynamicLayout = new LinearLayout(LayoutsActivity.this);
                dynamicLayout.setOrientation(LinearLayout.VERTICAL);
                LinearLayout.LayoutParams size=new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

                final TextView mytext= new TextView(LayoutsActivity.this);
                mytext.setText("This is the dynamic layout");
                mytext.setTextSize(20);
                mytext.setGravity(Gravity.CENTER);

                dynamicLayout.addView(mytext, size);
                /* Button b= new Button(LayoutsActivity.this);
                b.setText("Click Here to go to Main Layout");
                dynamicLayout.addView(b, size); */

                Button b= new Button(LayoutsActivity.this);
                b.setText("Main Layout");
                b.setId(R.id.DynamicLayout);
                dynamicLayout.addView(b, size);

                //Step L
                Button linear = new Button(LayoutsActivity.this);
                b.setText("Linear Layout");
                b.setId(R.id.LinearLayout);
                dynamicLayout.addView(linear, size);

                Button table = new Button(LayoutsActivity.this);
                table.setText("Table Layout");
                table.setId(R.id.LinearLayout);
                dynamicLayout.addView(table, size);

                ActivateButtons();

                setContentView(dynamicLayout);
            }
        });
    }
} 
```

}

XML 文件：每个布局都有一个，但都相似

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/LinearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Linear layout" />
        <!-- The layout lays out its children next to each other (horizontally or vertically)-->
    <Button
        android:id="@+id/TableLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Table Layout" />
        <!-- The layout represents a table like structure where there are columns and rows for the children-->
    <Button
        android:id="@+id/FrameLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Frame Layout" />
        <!-- The layout places the children on top of one another-->
    <Button
        android:id="@+id/RelativeLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Relative Layout" />
        <!-- The layout positions its children relative to each other-->
    <Button
        android:id="@+id/AbsoluteLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Absolute Layout" />
        <!-- The layout has children with absolute coordinates-->
    <Button
        android:id="@+id/DynamicLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Dynamic Layout" />
        <!-- The layout creates a second, new page -->
    <Button
        android:id="@+id/MainLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Main Layout" />
        <!-- The layout returns to the original layout which seems to be similar to the linear layout-->
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:41:32.197

我有点困惑。如果您的按钮在 XML 布局中，它怎么可能永远不存在？如果它不在 XML 中，您的 R.id.MainLayout 将无法编译。除非您说 MainLayout 是某种布局而不是按钮。这也会导致问题，因为您将其转换为按钮。此代码是否编译并运行？

# android - 如何设置 TextView 的文本？

> ID：10399210
> 
> 赞同：6
> 
> 时间：2012-05-01T14:34:04.673
> 
> 标签：android, textview

我面临`TextView`在 android 中设置文本的问题，我的代码是：

```
public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button button = (Button) findViewById(R.id.button1);
        final TextView text = (TextView) findViewById(R.id.textView1);
        final EditText input = (EditText) findViewById(R.id.editText1);
        final String string = input.getText();
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                text.setText(string);                   
            }
        });
    }
} 
```

如果我写

```
 final Editable string = input.getText(); 
```

然后它的工作......！！！！

现在我想像这样发送数据`EditText`到下一个`Activity`：

```
public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button button = (Button) findViewById(R.id.button1);
        final TextView text = (TextView) findViewById(R.id.textView1);
        final EditText input = (EditText) findViewById(R.id.editText1);
        final Editable string = input.getText();
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent intent = new Intent(Main.this, Second.class);
                intent.putExtra("thetext", string);
                startActivity(intent);
            }
        });
    }
} 
```

在`Second.java`课堂上我`StringExtra`是这样得到的：

```
public class Second extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

        TextView text = (TextView) findViewById(R.id.textView2);
        String string = getIntent().getExtras().getString("thetext", "not found");
        text.setText(string); /// Here the text is not shown but the default message "not found" is set to `TextView`
    }
} 
```

请给我继续开发的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:39:45.640

问题应该是，您发送的是`Editable`，而不是`String`。试试这个：

```
final String string = input.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:39:29.093

我认为问题在于您实际上是在意图中添加了“可编辑”，而不是字符串。虽然很接近，但它们不是一回事。如果你 toString() 你的 Editable 来获取一个 String 对象并将其放入意图中，你应该能够像你正在做的那样使用 getString 将其取回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T05:09:03.367

```
 private TextView mTextView;
     private String mString;

mTextView = (TextView) findViewById(R.id.tv);
mString = "hello everyone ! how r u?";
mTextView.setText(mString); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T14:41:10.550

尝试这样的事情：

```
public class Main extends Activity {
    EditText input;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TextView text = (TextView) findViewById(R.id.textView1);
        input = (EditText) findViewById(R.id.editText1);

        Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent intent = new Intent(Main.this, Second.class);
                intent.putExtra("thetext", input.getText().toString());
                startActivity(intent);
            }
        });
    }
} 
```

（提示：发布代码最简单的方法是粘贴代码，选择它，然后使用 crtl+k 缩进/格式化它。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T14:43:32.507

根据 android 文档，放入 extras 的字符串的名称必须包含一个包前缀...即 som.arshay.dev.thetext 其次，getExtras() 返回一个包，这不是您添加的。你需要 `getStringExtra( name )`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T14:47:00.533

在这一行**使用**

```
final String string = input.getText().toString(); 
```

代替

```
final String string = input.getText(); 
```

# .net - htmlagilitypack 抓取所有行

> ID：10399215
> 
> 赞同：0
> 
> 时间：2012-05-01T14:34:29.417
> 
> 标签：.net, winforms, html-parsing, web-scraping, html-agility-pack

我需要在网页中包含的 iframe 中使用包含“row”的类来抓取所有表行。

我目前有这个代码：

```
"//tr[contains(@class, 'row']" 
```

但我得到一个错误

> '//tr[contains(@class, 'row']' 有一个无效的标记。

我的问题是：

1.  如何获取 iframe 的 HTML 内容？
2.  什么是正确的 XPath 表达式？

有人可以帮我吗？

**编辑** 我将 xpath 更改为

```
"//tr[contains(@class, 'row')]" 
```

我没有得到错误，但我什么也没得到

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:19:37.847

正如评论中提到的，您需要获取 iFrame 的源并直接加载页面以对 HTML 进行转义。

1.  使用 HTMLAgityPack 查找 iframe 位置

    阅读这篇关于如何获取 iFrame 的 src 的信息：[get i frame source using HtmlAgilityPack](https://stackoverflow.com/questions/9110331/get-i-frame-source-using-htmlagilitypack)

2.  执行 WebRequest 以获取 iFrame 的 src

3.  使用 HTMLAgityPack 解析响应。

# java - 黑莓中两个不同版本（4.6、4.7和5.0+以上）的一个版本

> ID：10399216
> 
> 赞同：5
> 
> 时间：2012-05-01T14:34:30.093
> 
> 标签：java, blackberry, preprocessor, blackberry-jde

我想为黑莓 5.0 及更高版本导入 facebook 库，不想为 4.6 和 4.7 导入这些库。

我尝试通过以下链接使用 4.7 及更高版本的预处理器：http: [//smartfone-more.blogspot.in/2010/05/coding-for-multiple-blackberry-devices.html](http://smartfone-more.blogspot.in/2010/05/coding-for-multiple-blackberry-devices.html)

现在它在 JDE 4.7 上工作正常，但在 5.0 中没有得到预期的结果。请在下面找到我尝试过的代码：

```
//#ifdef JDE_4_7_0
import net.rim.device.api.ui.component.ButtonField;
//#else
import net.rim.device.api.ui.component.LabelField;
//#endif
import net.rim.device.api.ui.container.MainScreen;

public class TestScreen extends MainScreen{

        TestScreen(){

                //#ifdef JDE_4_7_0
                ButtonField btn = new ButtonField("Test Button");
                add(btn);
                //#else
                LabelField lbl1 = new LabelField("Test Label 1");

                add(lbl1);
                //#endif
        }
} 
```

根据代码，我期望在 5.0 的 else 部分和 4.7 的 if 部分编写结果。我在设备和 JDE 上都检查了它。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:06:13.810

首先，`JDE_4_7_0`标签是您应该在 BlackBerry 项目属性 -> “编译”选项卡 -> 预处理器定义中定义的自定义标签。你可以给它你想要的名字。

其次，在您的源文件中，第一行（甚至在包声明之前）应该是：

```
//#preprocess 
```

然后，当您要禁用条件导入时，请返回“预处理器定义”选项卡并删除该`JDE_4_7_0`条目。这将使编译器进入该`#else`子句。Eclipse 的 BB 插件不会检测操作系统，它都是您应该控制的工件。

编辑：
您将以两组可交付成果结束，一组用于 5.0+，另一组用于 4.x。BBant 工具允许您一步完成编译过程，但编译的结果是一样的。作为替代方案，您可以：

*   尝试在 4.6 项目中包含 FacebookBlackBerrySDK-vx.xxjar 和 Log4B-vx.xxjar（确保这些已预先验证）。我能够包含这些 jar 并编译一个 4.5 项目，但这并不意味着您可以毫无错误地使用它们*。所以...
*   仅在 OS 5.0 及更高版本中使用 facebook 功能，方法是在运行时使用`DeviceInfo.getSoftwareVersion`或检测它`DeviceInfo.getPlatformVersion`。

使用这种方法，您可能能够拥有一个与 4.6+ 设备兼容的应用程序，并且只有 5.0+ 设备会使用 fb sdk。

*注意：我不知道为什么 facebook blackberry sdk 是为 5.0 编译的。也许作者只是在他的开发机器中使用了他的低级操作系统，谁知道呢。但如果不对其进行测试，我不能说它是 4.5 兼容的，只是 jar 是 4.5 可编译的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:01:11.100

将指令名称更改为类似的名称`JDE_4_7_0_OR_HIGHER`，然后进入项目的 Blackberry_App_Descriptor.xml 文件并添加`JDE_4_7_0_OR_HIGHER`到“预处理指令”列表，然后确保在使用 4.7 或更高版本的 JRE 编译项目时启用它（您可以安装多个 JRE，然后在编译之前在项目选项中选择特定的一个）。然后您的代码将如下所示：

```
//#preprocess

//#ifdef JDE_4_7_0_OR_HIGHER
import net.rim.device.api.ui.component.ButtonField; 
//#else 
import net.rim.device.api.ui.component.LabelField; 
//#endif 
import net.rim.device.api.ui.container.MainScreen; 

public class TestScreen extends MainScreen{ 

        TestScreen(){ 

                //#ifdef JDE_4_7_0_OR_HIGHER
                ButtonField btn = new ButtonField("Test Button"); 
                add(btn); 
                //#else 
                LabelField lbl1 = new LabelField("Test Label 1"); 
                add(lbl1); 
                //#endif 
        } 
} 
```

# asp.net-mvc - Html.DropDownList 未验证

> ID：10399217
> 
> 赞同：1
> 
> 时间：2012-05-01T14:34:33.120
> 
> 标签：asp.net-mvc, razor

在我看来，我有这段代码：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"type="text/javascript"></script>

...  

    <div class="modal_label">
        @Html.LabelFor(model => model.Organization.Type)
    </div>
    <div class="modal_field">
        @Html.DropDownListFor(model => model.Organization.Type, (IEnumerable<SelectListItem>)ViewBag.TypeList, String.Empty)
        @Html.ValidationMessageFor(model => model.Organization.Type)
    </div> 
```

如果我将@Html.DropDownFor 更改为@Html.EditorFor，则验证工作正常，但在这种情况下，我呈现了以下 html：

```
 <select id="Organization_Type" name="Organization.Type" class="valid">
 ...
 </select> 
```

这是我的模型：

```
[MetadataType(typeof(OrganizationMetaData))]
public partial class Organization
{

}

public class OrganizationMetaData
{
    [Required(ErrorMessageResourceType = typeof(CCMESResources.ResourceErrors),ErrorMessageResourceName = "ValueIsRequired")]
    public int Type { get; set; }
} 
```

当表单发布时，ModelState 中有错误。你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:36:34.580

确保您在视图模型上使用了可为空的类型：

```
[Required]
public int? Type { get; set; } 
```

在您的模型中，您似乎使用了一个不可为空的整数，这与您试图在视图中实现的目标不一致。

还要确保您发布此表单的控制器操作将视图模型作为操作参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:46:07.600

在您的模型（或视图模型）中，当您从下拉列表中为其分配一个值时，如果第一个选择的值是空字符串或 null，它“应该”触发验证，但它需要访问服务器去做吧。在没有先发帖的情况下，我无法成功地在客户端进行不显眼的验证。为所需值使用可为空的字段通常不是一个好主意。此外，由于您没有使用可为空的字段，因此在检查模型是否有效时应该强制验证。这是我项目中的一个片段（另外，我正在使用“Min”注释的[数据注释扩展）：](http://dataannotationsextensions.org/)

模型：

```
[Display(Name = "Ticket Priority")]
[Min(1, ErrorMessage = "You must select a ticket priority.")]
public int TicketPriorityID { get; set; } 
```

看法：

```
<div class="editor-label">
    @Html.LabelFor(model => model.TicketPriorityID)
</div>
<div class="editor-field">
    @Html.DropDownList("TicketPriorityID", string.Empty)
    @Html.ValidationMessageFor(model => model.TicketPriorityID)
</div> 
```

控制器（HttpGet）：

```
ViewBag.TicketPriorityID = new SelectList(db.TicketPriorities.OrderBy(x => x.TicketPriorityID).ToList(), "TicketPriorityID", "Name"); 
```

控制器（HttpPost）：

```
if (ModelState.IsValid)
{
    ...
} 
```

# asp.net - 缓存大量对象的方法（ASP.NET 缓存与静态对象和单独缓存对象与字典）

> ID：10399222
> 
> 赞同：3
> 
> 时间：2012-05-01T14:34:53.457
> 
> 标签：asp.net, caching, httpcontext.cache

我正在编写一个在页面上显示项目列表的控件。该数据库包含（比方说）50,000 个与（比方说）1000 页相关（多对多）的项目。

我没有编写一个存储过程来从数据库中返回给定页面的一组完整项目（即所有列，以便水合项目对象列表），而是考虑执行以下操作来呈现列表：

*   在应用程序启动时，缓存所有列表项
*   让 SP 只返回项目的键值
*   遍历键列表并从缓存中检索匹配的对象

初步测试表明，这比为每个页面请求从数据库中提取列表执行得更快。它似乎也减少了整体内存消耗，因为每个页面请求只会查找现有对象，而不是每个请求都创建一个私有列表（当流量很高并且请求大页面时，内存消耗会变得非常高）。

所以现在我正在和其他开发者讨论如何实现缓存。我们提出了几种选择，在这里我希望您能提出意见：

*   使用 ASP.NET HttpContext.Current.Cache
*   使用静态/单例对象

在其中的每一个中，还可以选择是否：

1.  单独缓存每个项目对象
2.  构建一个包含所有项目对象的字典（或类似列表），然后缓存字典

读取性能是主要关注点。维护是次要的问题——我们会防御性地编写我们的 GetItems 方法来检查每个项目是否在缓存中，如果没有，则从数据库中检索它并将其插入缓存中。

我知道没有正确的答案……每件事都有利有弊。我只是想看看人们是否有可以分享上述任何一种方法的陷阱，或者是否有任何方法脱颖而出，成为迄今为止表现最好的方法，或者特别难以将新数据合并到其中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:52:12.433

我会采用 Cache 的方法。一些原因是：

1.  您可以控制在释放内存之前对象将在缓存中保留多长时间。在重负载下，这可以让服务器更好地响应。
2.  如果值得付出努力，我什至可以更进一步并使用某种分布式缓存，以便它在应用程序池回收中幸存下来。我想到了[Memcache](http://memcached.org/)和[NCache 。](http://www.alachisoft.com/ncache/index.html)

我不喜欢单例方法。在我看来，当您可以完美地使用 Cache 时，您将重新发明轮子。并发将与缓存一样成为一个问题，并且您失去了使用分布式缓存的灵活性。无论您采用哪种方法，我都会创建一个包装类来存储和检索 Cache 中的对象，这将使您将来可以轻松地从传统 Cache 无缝更改为分布式 Cache。

# android - Robotium 和 ActionBarSherlock

> ID：10399225
> 
> 赞同：2
> 
> 时间：2012-05-01T14:35:05.333
> 
> 标签：android, actionbarsherlock, classnotfoundexception, robotium, android-testing

您好，我在 Eclipse 中创建了一个测试项目，并使用 robotsium 正确设置。我正在测试一个已使用调试密钥库签名的 APK。我知道这个测试项目从最基本的角度来看是有效的，因为我可以在更改线路时启动活动：

```
private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "com.*********.*******Activity"; 
```

（我已经把真实的项目名称加星标了）

我遇到的问题是，只要测试进入使用 actionbarsherlock 的列表视图，测试就会崩溃。

E/AndroidRuntime(585): java.lang.NoClassDefFoundError: com.actionbarsherlock.app.SherlockFragmentActivity

这是从崩溃创建的红色文本墙开始处 Logcat 中的报告。即使我的测试仅包含睡眠操作并且我启动 listActivity 就好了，我也遇到了这个问题。

如果您有任何建议或需要其他信息，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:31:52.223

您需要将 ActionBarSherlock apklib 作为测试项目中的依赖项。如果您使用 Maven，则此依赖项必须在提供的范围内。

# report - 获取方法未在报告中提取第一个值

> ID：10399227
> 
> 赞同：1
> 
> 时间：2012-05-01T14:35:11.490
> 
> 标签：report, reporting, axapta, microsoft-dynamics, ax

再次向我提出另一个报告查询...我以前遇到过这个问题并解决了这个问题，但是在检查了现有报告后我看不出我哪里出错了，所以希望其他人看到这个问题能够提供帮助.. .

基本上，我有一个和其他报告一样的报告，有两个标题和一个正文部分，以及一些作为可编程部分的静态字段。标头和可编程部分很好，可以按预期运行。正文部分中的数据来自 ProdBOM 表中的字段，并且该表与我用作数据源的主表之间存在关系。这两个都是我报告中的数据源。

我已将以下代码输入到 fetch 方法中；

```
public boolean fetch()
{
    ProdBom                 _prodBom;
    LogisticsControlTable   _logisticsControlTable;
    ;

    queryRun = new QueryRun(this);

    if (!queryRun.prompt() || !element.prompt())
    {
        return false;
    }

    while (queryRun.next())
    {
        if (queryRun.changed(tableNum(LogisticsControlTable)))
        {
            _logisticsControlTable = queryRun.get(tableNum(LogisticsControlTable));
            if(_logisticsControlTable)
            {
                element.newPage();
            }
            this.send(_logisticsControlTable);

            if(_logisticsControlTable.ProdId)
            {
                while select _prodBom where _prodBom.ProdId == _logisticsControlTable.ProdId
                {
                    element.send(_prodBom);
                }
            }
        }
    }
    return true;
} 
```

结果是第一页的正文部分没有数据，但后面的页面正文中有数据，有什么原因会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T21:26:24.713

`element.newPage()`您在 first 之前显式调用`send`，这会创建一个空白页面。

控制变量可以解决问题：

```
boolean newPage = false;    
...    
if (newPage)
    element.newPage();
else
    newPage = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:08:55.450

[查询运行.Changed()：](http://msdn.microsoft.com/en-us/library/aa872445%28v=ax.50%29.aspx)

> 确定自上次调用 QueryRun.next 方法以来指定的数据源是否已获取新值。

您的 IF 子句是否导致第一​​遍跳过？

或者，是因为您立即调用“element.newPage()”吗？创建报表时是否有一个现有页面，您应该在创建新页面之前先填充数据？

如果您无法分辨，我在 AX 中的报告能力较弱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:38:10.650

谢谢您的帮助。它部分归结为 newPage() 函数。为了解决这个问题，我按照 Jan 的建议在 IF 中添加了一个子句，这样只有在循环获取新的 uniqueID 时才会打印新页面。我还必须将 ProductionBom 部分替换为可编程的，以便在第一遍中拾取它，最后将 while select 语句修改如下；

```
while select _prodBom where _prodBom.ProdId == _logisticsControlTable.ProdId
{
    if(_logisticsControlTable.ProdId == _prodBom.ProdId)
    {
        element.send(_prodBom);
    }
    element.execute(1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-18T11:01:25.643

```
//Started with Classdeclaration
Boolean = newpage;

/*Second step would be your after debugging it depends on your
  report/design which method is going to call. Mine was Fetch.
  So, take a look.*/

newpage = true,

/*Third step would be execution part; there you just need to put
  'if' condition.*/

If(newpage==false)
{
    element.newpage();
}
else
{
  newpage=false;
} 
```

就这样，首先调用函数，然后依次`element.newpage`类推。

# mysql - 导致 mySQL 服务器实例关闭的 DELETE 语句？

> ID：10399228
> 
> 赞同：2
> 
> 时间：2012-05-01T14:35:16.327
> 
> 标签：mysql, sql, mysql-workbench

通过保存数月的冗余数据，我正在尝试修剪我的数据库。不幸的是，当我运行我认为会删除不必要行的查询时，mySQL 服务器实例（不是服务器本身）似乎崩溃了。

```
DELETE w FROM word w WHERE NOT EXISTS(
    SELECT NULL FROM translation t WHERE t.WordID = w.KeyID LIMIT 1
) AND NOT EXISTS (
    SELECT NULL FROM namespace n WHERE n.IdentifierID = w.KeyID  LIMIT 1
) 
```

有没有办法让这个查询更有效率？

**编辑**来自 SQL Workbench 的 #1 错误：错误代码：1053。服务器正在关闭

**编辑#2**下面的查询也失败了，这表明将表粘合在一起一定有问题，也许？

```
SELECT w.* FROM word w
    LEFT JOIN translation t ON t.WordID = w.KeyID
    LEFT JOIN namespace n ON n.IdentifierID = w.KeyID
WHERE t.TranslationID IS NULL AND n.NamespaceID IS NULL 
```

但是，在子查询中使用硬编码值是可行的：

```
SELECT w.* FROM word w WHERE NOT EXISTS(
    SELECT NULL FROM translation t WHERE t.WordID = 1
) AND NOT EXISTS (
    SELECT NULL FROM namespace n WHERE n.IdentifierID = 1
) 
```

**编辑#3**表*单词*包含与表*命名空间*和*翻译*中的每一行相关联的单词。*换句话说， word*中的一行可能与*命名空间*和*翻译*表中的一个或多个行相关联。这是最初被认为是防止数据重复和提高搜索性能的一种手段。

经过数月更新和弃用*命名空间*和*转换*表中的数据行，有些词不再使用。我想删除这些词，以便腾出一些空间并提供更相关的搜索结果。

**编辑#4**我开始认为这可能是超时错误？我尝试将查询更改为以下内容：

```
DELETE FROM word WHERE KeyID NOT IN (
    SELECT WordID FROM translation 
    UNION
    SELECT IdentifierID FROM namespace
) 
```

徒劳无功。

至于索引，解释产生以下结果

```
id, select_type, table, type, possible_keys, key, key_len, ref, rows, Extra
'1', 'PRIMARY', 'word', 'ALL', NULL, NULL, NULL, NULL, '18430', 'Using where'
'2', 'DEPENDENT SUBQUERY', 'translation', 'ALL', NULL, NULL, NULL, NULL, '28219', 'Using where'
'3', 'DEPENDENT UNION', 'namespace', 'ALL', NULL, NULL, NULL, NULL, '7708', 'Using where'
NULL, 'UNION RESULT', '<union2,3>', 'ALL', NULL, NULL, NULL, NULL, NULL, '' 
```

*word*：*KeyID上的主键和**Key*列上的索引键。

*translation :* *TranslationID*上的主键和索引键*NamespaceIDKey*

*namespace :* *NamespaceID*上的主键

 ***编辑#5**虽然它不一定回答我提出的问题，但以下蛮力查询解决了我的问题。但是，如果数据库有外键，这种方法显然不会奏效，但仍然是：

```
-- Push all relevant words into a temporary table
CREATE TABLE temp
    SELECT DISTINCT w.* FROM translation t
        INNER JOIN word w ON w.KeyID = t.WordID
    UNION
    SELECT w2.* FROM namespace n2
        INNER JOIN word w2 ON w2.KeyID = n2.IdentifierID;

-- Empty the table
TRUNCATE TABLE word;

-- Re-insert the relevant words
INSERT INTO word            
    SELECT * FROM temp; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:45:27.973

尽管您已通过解决直接问题解决了它，但看起来您可能已经在您的编辑之一中描述了原因：

*   ***您正在加入尚未编制索引的字段。***

如果您创建以下两个索引，查询可能会显着加快：

*   `Translation(WordID)`
*   `Namespace(IdentifierID)`

如果没有这些索引，MySQL 就必须搜索整个表才能找到匹配项。有了索引，MySQL 可以在很短的时间内找到匹配项。

如果您在其他任何地方通过这些字段连接这些表，您应该为它们编制索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-07T13:38:49.817

> 错误代码：1053。服务器正在关闭

当与 MySQL 服务器的连接中断时，您会收到此错误。它的文字几乎没有误导性，因为只有连接被关闭，而不是服务器。

例如，我有 cron 作业，它会杀死长时间运行的 SELECT 语句以防止服务器过载。当它终止与 mysql`KILL`命令的连接时，查询也会返回此错误。*

# wpf - 扩展器内容内的网格不左对齐

> ID：10399232
> 
> 赞同：0
> 
> 时间：2012-05-01T14:35:23.083
> 
> 标签：wpf, expander

谁能帮我解决我的问题？加载此视图时，扩展器确实会扩展，但在内容内部，网格不会左对齐。我已经尝试了我能想到的一切。任何帮助将不胜感激。

```
<Expander Background="White" FlowDirection="RightToLeft" Header="Test" BorderBrush="Black" BorderThickness="1" Margin="5">
        <Expander.Content>
            <Label Background="Orange" Margin="5" HorizontalContentAlignment="Left">
                    <Grid FlowDirection="LeftToRight" Width="816" HorizontalAlignment="Left">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="25"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <CheckBox Name="chkTest" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15,0,0,0" Content="Test"/>
                        <TextBox Name="txtBlah" Grid.Row="0" Grid.Column="1" Text="Blah" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10,0,0,0" />
                        <CheckBox Name="chkTest2" Grid.Row="0" Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15,0,0,0" Content="Test2"/>
                        <TextBox Name="txtBlahBlah" Grid.Row="0" Grid.Column="3" Text="BlahBlah" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10,0,0,0" />
                        <TextBlock Name="txtBlockTest3" Grid.Row="0" Grid.Column="4" Text="Test3" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15,0,0,0"/>
                        <TextBox Name="txtTest4" Grid.Row="0" Grid.Column="5" Text="Test4" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="5,0,0,0" />
                        <TextBlock Name="txtBlockTest5" Grid.Row="0" Grid.Column="6"  Text="Test5" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15,0,0,0"/>
                        <ComboBox Name="cbTest6" Grid.Row="0" Grid.Column="7" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="5,0,0,0"/>
                    </Grid>
            </Label>
        </Expander.Content>
    </Expander> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:51:30.063

从应该做`FlowDirection="LeftToRight"`的工作。`Grid``Label`

```
<Label FlowDirection="LeftToRight" Background="Orange" Margin="5">
    <Grid Width="816" HorizontalAlignment="Left"> 
```

# iphone - 使用 performSelectorOnMainThread 调用非 void 函数

> ID：10399235
> 
> 赞同：4
> 
> 时间：2012-05-01T14:35:47.893
> 
> 标签：iphone, objective-c, ios, multithreading

正如我的问题的标题所说..我试图用`performSelectorOnMainThread`..我的函数 return调用一个非 void 函数`UIImage`，当我这样调用它时：

```
UImage *img = [self performSelectorOnMainThread:@selector(captureScreen:) withObject:webView waitUntilDone:YES]; 
```

它给了我一个错误，我的分配类型不兼容，我也尝试像这样强制转换它

```
UImage *img = (UIImage*)[self performSelectorOnMainThread:@selector(captureScreen:) withObject:webView waitUntilDone:YES]; 
```

我得到了 *语义问题：需要算术或指针类型的“void”类型的操作数*

我知道我可以正常调用它，但是我尝试了一些多线程的东西并且需要它像这样调用..那么我该如何防止这个错误呢？

**编辑 ：**

我尝试在此函数（captureScreen）中使用 GCD，它不断在“viewToCapture”上生成 Exc_bad_access .. 所以我决定在 GCD 块内调用父函数

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{
    [self captureScreenDelayed:pageView];

    dispatch_sync(dispatch_get_main_queue(), ^{
    });
}); 
```

和“ *captureScreenDelayed* :”如下

```
- (void) captureScreenDelayed:(EpubPageViewController*)pageView
{
    if(!pageView)
        pageView = [self currentPageView];

    if(pageView.pageImageView)
        pageView.pageImageView.image = (UIImage*)[self performSelectorOnMainThread:@selector(captureScreen:) withObject:webView waitUntilDone:YES];
} 
```

和*captureScreen*：

```
-(UIImage*)captureScreen:(UIView*) viewToCapture
{

    UIGraphicsBeginImageContextWithOptions(viewToCapture.bounds.size, viewToCapture.opaque, 0.0);
    [viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage;
} 
```

老实说，我不确定这是否是在单独的线程中获取图像的正确方法......我感谢任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:41:58.030

您必须记住的是，您*实际*调用的方法是`-performSelectorOnMainThread:withObject:waitUntilDone:`具有`(void)`返回类型的。因此，您无法获得通过此方法返回的执行选择器的结果。如果您需要执行这种类型的多线程，您应该查看[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)，尤其是[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T14:48:56.863

`performSelectorOnMainThread:...`没有返回值。您需要找到一些其他机制来获取图像。一种简单的方法，在这种情况下会起作用，因为您正在等待选择器完成，将 NSMutableArray 作为您的对象传递并在主线程中将图像添加到其中，例如

```
NSMutableArray* parameterArray = [[NSMutableArray alloc] init];
[parameterArray addObject: webView];
[self performSelectorOnMainThread:@selector(captureScreen:) withObject:parameterArray waitUntilDone:YES];
if ([parameterArray count > 1)
{
    UIImage* img = [webView objectAtIndex: 1];
}
else
{ 
// error
} 
```

看起来`captureScreen:`像

```
-(void) captureScreen: (NSMutableArray*) parameterArray
{
    UIView* webView = [parameterArray objectAtIndex: 0];
    // capture the screen
    [parameterArray addObject: capturedImage];
} 
```

# fancybox - FancyBox 与 TwitterBootstrap 模式？

> ID：10399238
> 
> 赞同：5
> 
> 时间：2012-05-01T14:36:24.763
> 
> 标签：fancybox, twitter-bootstrap

对于最近一个包含 FancyBox 的项目，总体上我很满意。一位朋友建议我将 jQuery modal 插件视为 Twitter 的 Bootstrap 框架的一部分。有没有人用过这个插件并且可以发表评论？有什么好处，坏处吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:45:55.077

对于专业人士来说，我不得不说，由于它已经包含在引导程序中，您可以在整个站点中保持一致的风格，而无需进行大量修改，或者根本不需要修改。bootstrap modal 插件利用 CSS3 转换来提供效果，从而增加和额外的性能提升，再加上它的小尺寸，它是一个非常快速的解决方案。引导模式使用起来很轻松，并且有据可查，因此您不会迷路。

有什么缺点？好吧，您无法控制模态框的宽度和位置，因为它使用 CSS 定位在一个固定容器中，您必须修改 CSS 以使其适应您的需要，当您需要多个不同大小时，这可能会变得很难看模态加载到您的页面。如果不对 js 或 css 进行大量修改，就不能在屏幕上垂直/水平居中模式。到目前为止，您还不能轻松加载任何其他媒体，例如 iframe/视频/图像，而无需 hack 或其他什么。我之前提到了引导模式通过使用 CSS3 过渡效果带来的额外好处和性能引导，这是一把双刃剑，因为旧浏览器不支持这些方法，因此没有演示效果。说到效果，

我会选择fancybox，物有所值，引导模式插件仍然很年轻，在未来的版本中它将赶上其余的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T18:09:27.397

花式盒子的优点：

*   它支持更多开箱即用的媒体。

引导程序的优点：

*   免费用于商业用途 - Apache 许可证 2.0，而 Fancybox 2.x 是 CC BY-NC 3.0 许可的。
*   已经包含在我们的大多数项目中。
*   根据需要修改和扩展非常简单。
*   持续和一致的更新。
*   更干净的代码。花式框代码充满了不良做法（浏览器代理嗅探、使用贬值的 jQuery 调用、有缺陷的旧版 IE 支持）。
*   在大部分繁重的工作中大量使用 CSS，使其更平滑、更小、更快。
*   由于它是由 CSS 控制的，因此非常容易控制模态框的整体外观。

也许自 5 月以来 bootstrap 发生了显着变化，但是，自从我从 2012 年 8 月开始使用它以来，我可以说 Andres llich 关于难以控制模态的宽度/高度/居中的大部分内容要么消失了，或者更可能他只是不太了解 CSS。容器是您指定的容器，可以有一个 ID，您想要“覆盖”的任何 CSS 都非常简单，只需指定 ID，然后指定相应的类，例如：

```
#citymodal {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    height: 80%;
    margin-left: -167px;
    width: 334px;
    padding-bottom: 40px;
    min-height: 150px;
} 
```

这使得我们的城市模式 334px 宽，水平居中。我们可以很容易地将它垂直居中，但是这个特殊的盒子对客户的高度有响应（80%）并且总是大于他们的观看高度（对于所有“总是”的样本都小于 8+ 30" 视网膜显示器堆叠垂直或更少）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T22:45:09.350

我会在这里为 Bootstrap 投票。使用 Bootstrap 3，有一些很好的响应特性，我做了一个 POC 来看看我如何自定义默认 Bootstrap 模态的固定宽度。对于任何内容大小，它都非常有效。

[http://scottpdawson.com/development/creating-a-variable-width-modal-dialog-using-bootstrap-3/](http://scottpdawson.com/development/creating-a-variable-width-modal-dialog-using-bootstrap-3/)

此外，您不必保留标题栏和按钮栏。正如您将在 lynda.com 视频（订阅者可用）中看到的那样，省略它们可以让您获得一些非常不错的全屏照片缩放行为。

[http://www.lynda.com/course20/Bootstrap-tutorials/Updating-modals/138156/144536-4.html](http://www.lynda.com/course20/Bootstrap-tutorials/Updating-modals/138156/144536-4.html)

# node.js - 如何更改进程列表中的命令行？

> ID：10399241
> 
> 赞同：3
> 
> 时间：2012-05-01T14:36:38.497
> 
> 标签：node.js

nginx是如何出现在进程列表中的呢？

```
$ ps -ef | grep nginx
... S     9:16   0:08.43 nginx: worker process
... Ss    9:16   0:00.00 nginx: master process nginx 
```

我想在 node.js 中更改我的 CLI 程序的进程名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:42:34.223

在 Node.js 中，您可以更改[`process.title`](http://nodejs.org/docs/latest/api/process.html#process_process_title)以设置流程的标题，如`ps`.

# python - 使用 argparse 完成 Bash 选项卡不会显示目录中的所有文件

> ID：10399244
> 
> 赞同：3
> 
> 时间：2012-05-01T14:36:56.220
> 
> 标签：python, bash, shell, argparse

我注意到如果我使用 argparse 参数，bash 选项卡完成返回的文件更少。我怎样才能改变/控制它？

**最小的示例代码**

```
me@here:~/test$ cat argparsetest.py 
import argparse
parser.add_argument('-i', help='input', required=True) 
```

**bash 完成示例：**

```
# shows all the files 
me@here:~/test$ python argparsetest.py 
argparsetest.py  result.png       u1.py  

# does not show the image result.png I am actually interested in
me@here:~/test$ python argparsetest.py -i
argparsetest.py  u1.py 
```

已经有两个类似的问题，但我没有发现它们有帮助。

*   [在 bash 中，argparse（和已弃用的 optparse）如何响应 python 程序名称后的“tab”按键？](https://stackoverflow.com/questions/9568611/how-does-argparse-and-the-deprecated-optparse-respond-to-tab-keypress-after)

*   [Python argparse 和 bash 完成](https://stackoverflow.com/questions/8387924/python-argparse-and-bash-completion)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T14:51:25.600

这与 argparse 甚至 Python 本身无关。您可能启用了“[可编程 bash 完成](http://www.gnu.org/software/bash/manual/bashref.html#Programmable-Completion)”，并且完成规则被混淆了，因为您的命令行以“python”开头。

解决这个问题的最简单方法是添加到 python 文件的顶部：

```
#!/usr/bin/env python 
```

，然后使 Python 脚本可执行：

```
me@here:~/test$ chmod u+x argparsetest.py 
```

然后直接调用它，而不显式调用“python”：

```
me@here:~/test$ ./argparsetest.py<TAB>
argparsetest.py  result.png       u1.py  

me@here:~/test$ ./argparsetest.py -i<TAB>
argparsetest.py  result.png       u1.py 
```

或者，您可以完全关闭 bash 完成

```
complete -r 
```

而且，如果您想在以后的会话中禁用它，请注释掉或删除 ~/.bashrc 或 /etc/bashrc 上可能如下所示的行：

```
if [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
fi 
```

# mysql - MYSQL 只接受 root 账户

> ID：10399248
> 
> 赞同：1
> 
> 时间：2012-05-01T14:37:06.233
> 
> 标签：mysql, apache2, phpmyadmin, lamp

我有一个真正的大问题。我的电脑上有 LAMP。当我尝试不使用 root 帐户（通过 phpmyadmin）连接到 mysql 时 - phpmyadmin 说它无法连接到 mysql。所以，我只能通过root连接到mysql。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:39:50.393

检查 mysql.users 表以获得适当的权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:40:36.627

你真的做了你想要使用的账户吗？计算机用户帐户！= mysql 帐户。这似乎是您为 mysql root 用户提供了与普通 root 帐户相同的密码，但它们是不同的实体

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T14:41:36.563

如果您最近添加了任何用户，您可能需要`FLUSH PRIVILEGES`.

查看[MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)以获取更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T13:56:19.530

问题出在愚蠢的用户中。我有三个名为“%”的坏用户。我已经杀了他们——现在一切都好。

# asp.net - 启用 AJAX 的 WCF 服务

> ID：10399252
> 
> 赞同：0
> 
> 时间：2012-05-01T14:37:21.783
> 
> 标签：asp.net, ajax

是否可以在启用 AJAX 的 WCF 服务中定义多个函数？例如：

```
[OperationContract]
    public string GreetUser(string uname)
    {
        return "Hello " + uname;
    }
 public string DeleteUser(string uname)
    {
        return "Hello " + uname;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:45:32.950

只需在`[OperationContract]`上面添加一个`DeleteUser`.

请注意，您不能使用 WCF 服务重载函数/方法。名称必须是唯一的。您可以更改 OperationContract Name 属性以修复重载的函数/方法。

# java - 将 SQLCipher 与 android 提供的 sqlite 数据库文件一起使用

> ID：10399254
> 
> 赞同：6
> 
> 时间：2012-05-01T14:37:29.570
> 
> 标签：java, android, sqlcipher

我在文件中有一个数据库文件重置`assets`。

如何`SQLCipher`在android中使用加密数据库？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T14:57:01.170

这会有点复杂。由于 SQLite 和 Android 的 SQLCipher 之间的数据库文件格式不同，并且由于您要发送未加密的数据库，因此您必须做一些事情。

首先，我要[`SQLiteAssetHelper`](https://github.com/jgilfelt/android-sqlite-asset-helper)着手将未加密的数据库交付到您的环境中。

然后，使用适用于 Android 的标准 SQLCipher 创建一个空但加密的数据库。

接下来，您需要实现代码以将数据从打包但未加密的数据库中复制出来，并将其插入到空但加密的数据库中。

完成后，您可以关闭并删除已打包但未加密的数据库，只使用加密的数据库。

`SQLiteAssetHelper`有朝一日，这可能会成为一个有用的扩展......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:48:23.493

他们在他们的网站上详细介绍了如何使用[SQLCipher](http://sqlcipher.net/sqlcipher-for-android/)

基本上你下载他们的二进制文件，在你的项目中设置它们，然后使用他们的 SQLiteDatabase 类而不是标准的 android SQLiteDatabase 类：

```
 import info.guardianproject.database.sqlcipher.SQLiteDatabase; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:32:19.157

以下代码摘录可用于在 SQLite Cipher 数据库中创建多个表：

使用这些导入：

```
import java.sql.SQLException;
import net.sqlcipher.database.SQLiteDatabase;
import net.sqlcipher.database.SQLiteOpenHelper;
import android.content.ContentValues;  
import android.content.Context;  
import android.database.Cursor;  
import android.util.Log;

/** Helper to the database, manages versions and creation */

    public class DBAdapter extends SQLiteOpenHelper {
        private static final String DATABASE_NAME = "Test";
        private static final int DATABASE_VERSION = 1;

        // Table name
        public static final String TABLE_1 = "Table1";
        public static final String TABLE_2 = "Table2";

        // Column names for Table1 table
        static final String KEY_PASSWORD = "password";
        static final String KEY_USER = "user";

        // Column names for Table2 table
        static final String KEY_EVENT = "event";
        static final String KEY_USERNAME = "username";

        public DBAdapter(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            String sql1 = "create table " + Table_1 + " (" + KEY_USER + " text primary key, " + KEY_PASSWORD + " text not null);";
            String sql2 = "create table " + Table_2 + " (" + KEY_EVENT + " text primary key, " + KEY_USERNAME + " text not null FOREIGN KEY(" + KEY_USERNAME + ") REFERENCES " + TABLE_1 + "(" + KEY_USER + "));";
            db.execSQL(sql1);
            db.execSQL(sql2);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            if (oldVersion >= newVersion){
                return;
            }

            String sql = null;
            if (oldVersion == 1) 
                sql = "alter table " + TABLE_1 + " add note text;";
            if (oldVersion == 2)
                sql = "";

            Log.d("EventsData", "onUpgrade  : " + sql);
            if (sql != null)
                db.execSQL(sql);
        } 

        public Cursor getAllUsers(String username, SQLiteDatabase db){
            return db.query(TABLE_1, ...);
        }

        public Cursor getAllEvents(String event, SQLiteDatabase db){
            return db.query(TABLE_2, ...);
        }
   } 
```

现在您可以对两个表执行所有 CRUD 方法。只需确保每个方法都有一个`SQLiteDatabase`作为参数，如`getAllUsers()`方法中所示。

# alfresco - 如何在 Alfresco WQS 网站上创建图片库？

> ID：10399255
> 
> 赞同：1
> 
> 时间：2012-05-01T14:37:31.883
> 
> 标签：alfresco, image-gallery

我正在使用 Alfresco Web Quick Start 创建一个基本的 CMS 网站。

我想在我的网站上有一个图片库，我的画廊文件夹中的所有图片都像标准画廊一样显示（即单击以平滑移动到下一个图像，单击图像放大，可能添加评论）。

我目前在网站的图库页面上有我的图片，但您必须单击每个缩略图放大并返回主图库页面，然后才能查看另一张图片。它是功能性的，但看起来不太好，所以我需要改进它！

我认为这个插件可能是一个可能的解决方案（http://addons.alfresco.com/addons/gallery-plus-dashlet），但它只在网站仪表板上显示图像，但我希望我的画廊包含在我网站的图库页面。对此的任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:35:14.850

[这](http://code.google.com/p/alfresco-deckshare/)是一个使用 WQS 构建共享演示文稿的站点的项目。它包括的功能之一是图像轮播。包含的图像是存储在 Alfresco 存储库中的演示文稿的预览图像。您应该能够使用该组件并执行类似的操作，以在您自己的基于 WQS 的站点中实现图像库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:18:12.367

要检查的一件事是您使用的是什么版本的 Alfresco。DeckShare 是围绕 Alfresco 3.3 设计和构建的（如果我没记错的话）。它很可能无法与较新版本的 Alfresco（即 4.0）一起正常工作，因为核心产品中的某些代码已更改。

由于您是 Alfresco 的新手，因此最简单的做法是安装旧版本的 Alfresco。如果您更有野心，您可以尝试更新 DeckShare 代码以使用更新的版本。

我想我已经完成了类似于你想要使用 Lightbox（而不是 SlimBox）的东西。我做了一个关于 WQS 的简短演示，其中包括一个 LightBox 集成（参见第 27 页）[http://www.tribloom.com/content/tale-two-wqs-implementations-pdf](http://www.tribloom.com/content/tale-two-wqs-implementations-pdf)为例。我相信 WQS 页面已经包含 slimbox.js，在这种情况下，很容易创建一个组件/Web 脚本来显示一个画廊（我的称为 imagebrowser.get.html.ftl）：

```
...
    <div class="interior-content">
        <#if articles.assets?size == 0>
            ${msg('list.none')}
        <#else>
            <#if subTitle??><h3>${msg(subTitle)}</h3></#if>                
            <ul class="portfolio-wrapper"><#list articles.assets as article><li><a href="<@makeurl asset=article />${linkParam!''}" rel="lightbox-img" title="${article.title!''}"><img src="<@makeurl asset=article rendition='rightColumn'/>" alt="${asset.title!''}" class="img-border" /></a></li></#list>
            </ul>
        </#if>
    </div>
... 
```

# arrays - 传递动态数组：清除值

> ID：10399258
> 
> 赞同：1
> 
> 时间：2012-05-01T14:37:37.263
> 
> 标签：arrays, vba

在 VBA 中，我将值存储到一个动态数组中，该数组`PidArr`在一个名为`Unlock`. 数组开始如下：

```
Dim PidArr() As String
ReDim PidArr(1 To 2) 
```

插入的数据如下所示：

```
 ...within a loop
        PidArr(Count) = LineStr 'this is a string containing the data.
        Logging "Inserted " & PidArr(Count) 'this correctly shows the data has inserted.
        ReDim PidArr(1 To Count + 1) 'resize the array more 
```

在将值正确存储到该数组中后，稍后会调用另一个函数（Advance）（并将`PidArr`数组传递给它）

```
Advance listRecords:=PidArr 
```

该函数如下所示：

```
Sub Advance(ByRef listRecords() As String) 
```

在`Advance`我可以打印类似的东西：

```
UBound(listRecords) 
```

它返回一个 6。

但是当我尝试打印出诸如`listRecords(1)`or之类的值时`listRecords(2)`，什么都没有打印出来（空白）。

为什么是这样？它不会崩溃，因此它根本不是数组中的无效范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:50:50.240

您使用需要`redim preserve`. 您仅使用 redim 所做的就是使用新大小重新定义（重新声明）数组并截断旧数据。所以你只是有元素坐在那里，里面什么都没有。 `preserve`时将保留元素中的数据`redim`。

# jquery - 使用 JQuery 将新属性添加到 HTML 字符串

> ID：10399268
> 
> 赞同：1
> 
> 时间：2012-05-01T14:38:26.687
> 
> 标签：jquery, string, attributes, new-operator, add

我在向现有 html 字符串添加新属性时遇到问题。

首先，我从编辑器中读取 HTML 代码并将其保存为字符串。

然后我可以从这个字符串访问属性：

```
$("img", $(htmlString)).attr("src"); 
```

但是如果我尝试添加一个新属性（例如名称），它就不起作用。为此，我尝试：

```
$("img", $(htmlString)).attr("name", "fooo"); 
```

所以我的问题是，我需要添加一个具有一些值的新属性，最后我应该有一个新的 HTML 字符串，其中包含带有新添加属性的旧 HTML 代码。我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:47:45.453

> 我想从 src 复制值，修改它，然后保存在同一个 img 标记中的新属性中。只有保存部分不起作用

尝试这个：

```
var $img = $("img", $(htmlString));
var src = $img.attr("src");
src = src.replace(".jpg", ".png");
$img.attr("data-src", src); 
```

这将变成这样：

```
<img src="/images/myimage.jpg" alt="Example image" /> 
```

对此：

```
<img src="/images/myimage.jpg" data-src="/images/myimage.png" alt="Example image" /> 
```

这是假设只有 1 个`img`标签`htmlString`。如果您有多个，则需要遍历每个。

# .htaccess - 重定向和搜索引擎优化

> ID：10399269
> 
> 赞同：0
> 
> 时间：2012-05-01T14:38:27.963
> 
> 标签：.htaccess, redirect, seo

将多个域重定向到一个域的最佳方法是什么？这是一个多语言网站

我读过将更多域指向一个可能会以一种糟糕的方式影响搜索引擎的排名？

IE

```
www.domain.dk -> www.domain.com/dk
www.domain.de -> www.domain.com/de 
```

301重定向可以吗？它会影响 www.domain.com 的排名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:59:24.590

这实际上是一种非常有益的做事方式，因为它将来自反向链接的域价值整合到单个 .com 域中，而不是将它们分散到多个域中。我建议使用子域（这样您就可以为德语瑞士和法语瑞士执行 ch.domain.com/de 和 ch.domain.com/fr 之类的操作，但文件夹也可以。）

您应该始终使用 301 重定向来保留域值

然后你可以使用：

*   Hreflang rel=alternate 标签用于指定语言，如果您在每个位置使用多种语言（即 .com/dk 可能支持英语和丹麦语）http://support.google.com/webmasters/bin/answer.py?hl=en&answer =189077
*   谷歌站长工具本地化
*   适当的规范标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:42:27.540

1.  重定向需要是[301 重定向](http://www.webconfs.com/how-to-redirect-a-webpage.php)
2.  [将多个域指向您的网站不会为您提供任何 SEO 好处](https://webmasters.stackexchange.com/questions/3777/could-i-buy-a-domain-name-to-increase-traffic-to-my-site-like-this/3778#3778)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:06:29.117

> 使用 301 重定向，因为它是一个永久重定向，它会将 90-99% 的链接汁（排名能力）传递到重定向页面。301 指的是此类重定向的 HTTP 状态代码。在大多数情况下，301 重定向是在网站上实现重定向的最佳方法。

来源：[http ://www.seomoz.org/learn-seo/redirection](http://www.seomoz.org/learn-seo/redirection)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T11:26:07.620

您应该始终使用 301 重定向将当前 Url 重定向到新的 Urls。这样 google 就会明白这个 url 是从 this 重定向到 this 的。

使用以下代码创建一个`.htaccess`文件，它将确保所有进入 domain.com 的请求都将被重定向到 www.domain.com 该`.htaccess`文件需要放置在您旧网站的根目录中（即与您的网站相同的目录）放置索引文件）

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^domain.com [nc]
rewriterule ^(.*)$ http://www.domain.com/$1 [r=301,nc] 
```

请将 domain.com 和 www.newdomain.com 替换为您的实际域名。

> **注意**这种 .htaccess 重定向方法仅适用于启用了 Apache Mod-Rewrite 模块的 Linux 服务器。

# prefuse - 关于 Prefuse 图形布局的教程/概述？

> ID：10399271
> 
> 赞同：1
> 
> 时间：2012-05-01T14:38:40.087
> 
> 标签：prefuse

到目前为止，我的 prefuse 可视化使用的是 RandomLayout，因为我无法找出其他布局，例如 DirectedForceLayout 或 BallonTreeLayout 是如何工作的。

我用谷歌搜索了很多，但找不到任何解释或教程来显示我的各种 prefuse 图形布局以及我应该如何使用它。

有没有可用的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:49:32.407

这不是一个教程，但 prefuse 附带了一个演示`ForceDirectedLayout`：

[https://github.com/prefuse/Prefuse/blob/master/demos/prefuse/demos/GraphView.java](https://github.com/prefuse/Prefuse/blob/master/demos/prefuse/demos/GraphView.java)

# java - 没有从提交到线程池的作业中获得任何输出

> ID：10399272
> 
> 赞同：2
> 
> 时间：2012-05-01T14:38:41.320
> 
> 标签：java, multithreading, static

假设我有 A 类和 B 类。A 类只有一个带有以下代码的 main 方法：

```
public class A{
    public static void main(String[] args){
        String xput = "";
        ExecutorService pool = Executors.newFixedThreadPool(4);
        for(int i = 1; i < number; i++){
            pool.submit(new B(list.get(i-1)));
            xput = B.returnValue;
            System.out.println(xput);//testing purposes
        }
    }
} 
```

B 类扩展了 Thread，看起来像这样：

```
public class B extends Thread{

    static String returnValue = "";        

    public B(String x){
        super(x);
    }

    public void run(){
        double x = 20;
        returnValue += "Grand total: " +
            NumberFormat.getCurrencyInstance().format(x) + "\n";
    }
} 
```

但是`System.out.println(xput)`除了空行之外不打印任何内容。有谁知道为什么？显然，我的类有比这更多的代码，但由于我没有得到任何输出，所以我从一个小案例开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:41:19.477

这段代码受到许多竞争条件的影响，因为它们都在更新相同的`static String returnValue`. `System.out.println(xput)`此外，当调用时，线程实际上可能还没有运行。您需要使用该`future.get()`方法等待每个线程完成，并且您不能在将它们提交到线程池的同一循环中执行此操作。

由于 4 个线程将同时运行，并且它们都在更新同一个`static`字段，因此您需要围绕该变量提供一些同步。我建议改为使用的`Future`功能`ExecutorService`而不是修改静态字段。像下面这样的东西应该可以工作：

```
List<Future<String>> futures = new ArrayList<Future<String>>();
for(int i = 1; i < number; i++){
    B b = new B(list.get(i - 1));
    // submit the job b add the resulting Future to the list
    futures.add(pool.submit(b));
}
// all of the jobs are submitted now
StringBuilder sb = new StringBuilder();
for (Future<String> future : futures) {
   // now join with each of the jobs in turn and get their return value
   sb.append(future.get());
}
System.out.println(sb.toString());

// you should implement Callable _not_ extend thread
public class B implements Callable<String> {
    public String call(){
        ...
        return "some string";
    }
} 
```

的`Future`功能`ExecutorService`允许您从线程池处理的每个作业中获取结果。您可以使用可以从该方法`submit()` `Callable`返回结果`String`（或其他对象）的类`call()`。

此外，您`B`应该实施`Callable`not extend `Thread`。虽然它会起作用，但这只是因为它也能`Thread`实现`Runnable`。线程池有自己的内部线程，你只提交`Runnable`或`Callable`反对它。

最后，在处理列表（或任何 Java 集合）时不要使用`for (int i`循环，您应该养成使用以下方法的习惯：

```
 for(String x : list) {
    B b = new B(x);
    ... 
```

如果你*必须*使用，`for (int i`那么至少从 0 到`size()`列表的：

```
 for(int i = 0; i < list.size(); i++) { 
```

这样，如果您更改列表的大小，您也不必记住更改循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:46:51.763

没有打印任何内容，因为您在设置“returnValue”之前正在检查它。拥有'returnValue'静态也意味着所有线程都将写入同一个共享变量。

如果你想为你的线程有一个返回值，让它们实现`callable<T>`而不是线程，并将它们传递给`<T> Future<T> submit(Callable<T> task)`方法。调用返回的值以获取您要查找的值`get()`。`Future<T>`

# .net - 从 .net 中的类库项目中引用设置的最佳实践

> ID：10399273
> 
> 赞同：0
> 
> 时间：2012-05-01T14:38:42.460
> 
> 标签：.net, reference, app-config

我的解决方案中有多个项目。我有一个专门用于保存引用许多 WCF 服务引用的项目（它保存对 WCF 服务的引用，而不是 WCF 服务的实现），让我们将此项目称为“GlobalWebServices”。然后我有许多引用这个 GlobalWebServices 项目的可执行应用程序。当我执行这些应用程序并尝试调用引用 Web 服务时，它们自然会丢失我想要调用的 ServiceReferences 的配置详细信息。配置设置属于类库项目 - 'GlobalWebServices'。

存储这些 ServiceReference 绑定详细信息的最佳方式是什么？我不想将每一个都复制到正在执行的应用程序的 .config 文件中，因为它感觉不整洁，而且我正在复制信息。我不想在“GlobalWebServices”应用程序中对 ServiceReference 绑定进行硬编码，因为我已经为每个服务生成了绑定连接信息（嗯……Vis​​ual Studio 已经为我做了这件事，但仍然如此）。理想情况下：我希望 GlobalWebServices 库在构建时自动将绑定信息（当前存储在它的 app.config 中）包含到类库中。

对此的最佳实践解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:57:51.820

[您可以使用configSection](http://weblogs.asp.net/cibrax/archive/2007/07/24/configsource-attribute-on-system-servicemodel-section.aspx)分离出 web.config 的不同部分。

可能有更好的答案，但我的第一个想法是将配置文件放在您的类库项目中。将配置文件的属性设置为“Content”和“Copy if Newer”。这将允许您将它放在一个位置以进行源代码控制。这个选项的缺点是，一旦部署，它会在几个不同的位置，但如果使用配置文件的每个应用程序的配置需要不同，这也可能很好。

我知道可以以编程方式配置服务，然后将配置写入文件。我想这意味着您可以采用另一种方式，并拥有一个单独的 XML 文件，并从那里加载绑定等，而不是 app.config 本身。

# c# - Selenium C# 使用 WaitForElementPresent 和 WaitForPageToLoad 等创建类方法

> ID：10399278
> 
> 赞同：0
> 
> 时间：2012-05-01T14:39:29.623
> 
> 标签：c#, class, methods, selenium

到目前为止，我一直在使用一种直接的技术来定义我的 xpath 并调用 selenium 操作来使用 xpath。例如：

带有测试脚本的代码 -

`selenium.WaitForElementPresent(Menu.Home);`

`selenium.Click(Menu.Home);`

`selenium.WaitForPageToLoad(null);`

方法中的代码 -

`public class Menu`

`{`

`public const string Home = "//ul[@class='menunavigation']/li/a[contains(text(),'Home')]";`

`}`

...在继续我的下一个动作之前。

但这不是一个好习惯，因为我在测试脚本中不必要地重复了代码。所以我想构建包含额外等待等的类方法，以便我的测试脚本只包含以下行：

`selenium.Click(Menu.Home);`

我的方法看起来像这样：

`public static void Home(string xpath, object selenium)`

`{`

`xpath = "//ul[@class='gts-ribbon']/li/a[contains(text(),'Home')]";` `selenium.WaitForElementPresent(xpath);`

`"now perform the click command"`

`selenium.WaitForPageToLoad(null);`

`}`

但这对我不起作用，因为我的 C# 不强。有人可以帮我解决我的方法。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:54:59.500

You could try something like this

```
 public void ClickSave(Element element, IWebDriver webDriver)
        {
            if (webDriver.FindElement(By.LinkText(element.Text)).Enabled)
            {
                element.Click();
            }
        } 
```

Hope that helps some

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:33:44.727

在库文件中创建这样的函数。

```
public void isPresentClick(DefaultSelenium selObj,string locator)  
{  
   selenium.WaitForElementPresent(locator);
   selenium.Click(locator);
   selenium.WaitForPageToLoad(3000);
} 
```

当您需要以下方式时，不要调用此函数。
创建库的对象（obj）并使用该函数。

```
object obj = new library();
obj.isPresentClick(selenium,"Menu.Home") 
```

这将调用库中的函数并执行其中指定的步骤。

语法可能有误，请检查一下，因为我是在记事本的有限资源中完成的。

根据我的建议，您不应该使用等待页面加载到该库函数中。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:51:20.197

这是我最终选择的设计：

在我的测试脚本中，我调用了一个新的 selenium 命令：

> selenium.ClickAndWait(Menu.Home);

我有一个名为 Extensions 的新类，其中我有一个名为“ClickAndWait”的专用方法：

> 公共静态类扩展{
> 
> ```
>  public static void SelectAndWait(this ISelenium selenium, string locator)
>     {
>         selenium.WaitForElementPresent(locator);
>         selenium.Select(locator);
>     }
> } 
> ```

而且我仍然有我的专用菜单类和我的 Home 等方法：

> public class Menu { public const string Home = "//ul[@class='menunavigation']/li/a[contains(text(),'Home')]"; }

感谢您的所有建议和指导人们:) Benny

# asp.net-mvc - 是否可以在 MVC 应用程序中使用 Web 服务

> ID：10399281
> 
> 赞同：1
> 
> 时间：2012-05-01T14:39:40.810
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html

我对 asp.net MVC 很陌生。我正在使用 MVC3，我想知道是否可以将 Web 服务作为我的模型。我知道在 MVC 中，您的创建、删除、编辑和详细信息视图是自动生成的，但在 Web 服务中，每个 Web 服务将是一个视图。我想要完成的事情很奇怪吗？这不是使用 MVC 的真正意义吗？我很难找到任何让我认为我在这里使用了错误技术的例子。接受的答案将是一个链接到一个很好的教程或一个很好的例子解释。我主要关心的是当事情可以自动生成时做额外的工作。所以我已经添加了网络参考，我可以创建我的控制器并使用这个参考自动生成一些东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:41:16.747

是的，您可以在 ASP.NET MVC 中使用 Web 服务。在这种情况下，您的模型将是您在生成客户端代理时从 Web 服务导入的类。但是无论您的模型来自哪里，您都应该始终定义视图模型，它们是专门针对您的视图要求量身定制的类。然后您将让您的控制器操作将视图模型传递给视图，而不是模型。控制器操作将负责查询数据源以检索模型（此数据源绝对可以是任何可以想象的），将模型映射到视图模型类并将此视图模型传递给视图。

# java - 我可以滥用浏览器超时来避免忙于轮询服务器以获取长时间运行的任务的结果吗

> ID：10399283
> 
> 赞同：0
> 
> 时间：2012-05-01T14:39:44.097
> 
> 标签：java, spring, spring-mvc, cross-browser, long-polling

在我的应用程序中，客户端可以请求可能需要 1-2 分钟才能完成的复杂任务。任务在单独的线程中运行，请求处理程序通过 BlockingQueue 与其通信。

目前，服务器会立即将客户端重定向到等待页面，该页面每 10 秒轮询一次服务器。但是，这是非常低效的，如果任务在轮询后立即完成，客户端可能需要额外等待 10 秒。

我想做的是允许请求处理程序（等待页面）被阻塞，直到任务完成，然后才将响应写入用户。根据我的观察，如果服务器接受 TCP 套接字（并且可能已经写回了一些标头？？），大多数浏览器将使用更长的超时时间，但我不确定不同浏览器之间的确切超时时间。

让浏览器等待2分钟现实吗？有没有人有这方面的经验或更好的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:54:58.733

你有没有想过`Push Notification`。

您当前拥有的是 Pull 通知，您可以在其中轮询服务器以获取响应。

在拉取服务器中，当响应准备好时会通知您，它称为彗星，也称为反向 ajax。

在这种情况下，您的浏览器不再需要等待，您可以继续其他工作，一旦响应准备好，将其呈现给用户。

是的，可以让浏览器等待，只是不要写响应。

解释一下，当您提交工作而不是重定向到不同的页面时，不要提交响应，而是启动服务器处理并在完成后提交响应。并在 UI 中显示处理消息，以便用户知道提交的任务正在处理中。

恕我直言，我不觉得这有什么好处，因为它会使您的应用程序看起来好像一次只能处理一个请求，如果这是可以接受的，那么没有问题，尽管考虑到今天的技术，几乎每个人都想在更短的时间。

# javascript - 如何在新窗口中打开所有推文链接？

> ID：10399285
> 
> 赞同：1
> 
> 时间：2012-05-01T14:39:49.717
> 
> 标签：javascript, jquery, json, twitter

有人知道如何在新窗口中打开我所有的推文链接吗？

我需要在[我的 jsfiddle](http://jsfiddle.net/Autodealers/XSmYa/)中完成此操作。

提前谢谢你！
亲切的问候，
乔纳森

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:42:13.000

[http://jsfiddle.net/XSmYa/18/](http://jsfiddle.net/XSmYa/18/)

使用 jquery find 函数执行以下操作

```
$('#timeline').append(timeline).find("a").attr('target', '_blank'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:52:39.530

我更喜欢这种方法 - 它会覆盖链接单击事件以打开新窗口或选项卡。

```
$('#timeline').delegate("a", "click", function(){
    window.open($(this).attr('href'));
    return false;
}); 
```

这可以独立于生成内容的脚本来完成。

# c# - 使用 css 样式打印

> ID：10399291
> 
> 赞同：2
> 
> 时间：2012-05-01T14:40:06.810
> 
> 标签：c#, javascript, asp.net, css, printing

我有一个链接到我的网页的 CSS 样式表。当我查看网页时，它看起来应该是这样的，但是当我打印文档时，我再也看不到样式了。我已经用属性第二次添加了css：`media='print'`但它不起作用。有人知道如何使用该`window.print()`功能并保持打印文档的样式吗？

ASPX：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="cpHead" ClientIDMode="AutoID">
<link rel="stylesheet" type="text/css" media="screen" href="Styles/Site.css" />
<link rel="stylesheet" type="text/css" media="print" href="Styles/Site.css" />
</asp:Content>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="Main" ClientIDMode="AutoID">
    <asp:Image ID="imgHeader" Width="100%" runat="server" />
    <asp:GridView ID="gvPrintData" Width="100%" runat="server" HeaderStyle-CssClass="printGridHeader" RowStyle-CssClass="printGridRow" AlternatingRowStyle-CssClass="printGridAltRow" />
</asp:Content> 
```

。CS：

```
Response.Write("<script type='text/javascript'>window.print(); window.onfocus = function() { window.close(); }</script>"); 
```

综合浏览量（它应该看起来如何）： ![页](../Images/af05a1d80e46d1fa1100e6541bec7d1c.png)

Printedview（它在打印文档上的外观）： ![文档](../Images/55493524a44d8442b32df1425456ecc8.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T14:42:42.320

您的样式表实际上正在工作 - 查看标题字体。我怀疑正在发生的是浏览器没有打印背景颜色。

转到浏览器中的页面设置/打印设置并检查背景图像和颜色是否已打开。

**火狐**

![火狐](../Images/075c079c0206fb6092f57c23ffee4bf9.png)

**IE9**

![IE9](../Images/dd1b8aa22c0297bbf0587de3e864f851.png)

# c - 将所有 255 个 ASCII/ANSI/ISO 字符输出到文件中

> ID：10399292
> 
> 赞同：1
> 
> 时间：2012-05-01T14:40:12.893
> 
> 标签：c, file

```
#include <stdio.h>
#include <iostream>

int main()
{
    FILE* oFile=fopen("file","wb");

    for(int i = 255; i>=0; i--)
        fprintf(oFile,"%c",i);

    system("pause");
    return 0;
} 
```

现在，“文件”只包含“奇怪”的字符：

.。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。婛塙噗呕剓偑乏䱍䩋䡉䙇䑅䉃䁁㸿㰽㨻㠹㘷㐵㈳〱ⸯⰭ⨫⠩☧␥∣‡ḟᰝᨛ᠙ᘗᐕሓထฏ఍਋ࠉ؇Ѕȃp

对我来说有趣的是，使用控制台流，一切都很好。

```
#include <stdio.h>
#include <iostream>

int main()
{

    for(int i = 255; i>=0; i--)
        printf("%c",i);

    system("pause");
    return 0;
} 
```

问题是：为什么输出文件中没有“拉丁”字符？即使在从 UCS-2 little endian（为什么它被自动选择？）转换为 notepad++ 中的 ascii 之后：

ďł˝ď«»ďŁąď›·ď“µď‹łď±î»Żîłî««îŁ©î›§î“Ąî‹Łîˇí»źíłťí«›íŁ™í›—í“•í‹“í'ě»ŹěłŤě« ‹ěŁ‰ě›‡ě“…ě‹ěëşżë˛˝ëŞ»ë˘ąëš·ë'µëŠłë‚±ęşŻę˛ęŞ«ę˘©ęš§ę'ĄęŠŁę‚ˇéşźé˛ťéŞ›é˘™éš—é'• éŠ“é‚'čşŹč˛ŤčŞ‹č˘‰čš‡č'…čŠč‚çążç±˝ç©»çˇąç™·ç'µç‰łç±ćąŻć±ć©«ćˇ©ć™§ć'Ąć‰Łćˇĺąźĺ± ťĺ©›ĺˇ™ĺ™—ĺ'•ĺ‰“ĺ'äąŹä±Ťä©‹äˇ‰ä™‡ä'...ä‰äă¸żă°˝ă¨»ă ąă·ăµăłă€±â¸Żâ°â ¨«â ©â§âĄâŁâ€ˇá¸źá°ťá¨›á ™á—á•á“á€'ŕ¸Źŕ°Ťŕ¨‹ŕ ‰Ř‡Đ...Č</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:42:54.997

您是否在 unicode 感知编辑器中打开“文件”？由于您在输出流中使用不可见字符，我看起来将文件解释为 UTF-8 或 UTF-16。查看您的编辑器是否有字符编码选项，并尽可能将其设置为纯 ASCII。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T14:49:39.673

我认为你遇到的一个问题是你碰巧用一个众所周知的[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-16)“feff”开始你的文件，它是 UTF-16 的 BOM。这意味着许多编辑会认为这是 UTF16，他们通常默认为 ASCII/UTF8。

以十六进制查看您的文件：

```
00000000  ff fe fd fc fb fa f9 f8  f7 f6 f5 f4 f3 f2 f1 f0  |................|
00000010  ef ee ed ec eb ea e9 e8  e7 e6 e5 e4 e3 e2 e1 e0  |................|
00000020  df de dd dc db da d9 d8  d7 d6 d5 d4 d3 d2 d1 d0  |................|
00000030  cf ce cd cc cb ca c9 c8  c7 c6 c5 c4 c3 c2 c1 c0  |................|
00000040  bf be bd bc bb ba b9 b8  b7 b6 b5 b4 b3 b2 b1 b0  |................|
00000050  af ae ad ac ab aa a9 a8  a7 a6 a5 a4 a3 a2 a1 a0  |................|
00000060  9f 9e 9d 9c 9b 9a 99 98  97 96 95 94 93 92 91 90  |................|
00000070  8f 8e 8d 8c 8b 8a 89 88  87 86 85 84 83 82 81 80  |................|
00000080  7f 7e 7d 7c 7b 7a 79 78  77 76 75 74 73 72 71 70  |.~}|{zyxwvutsrqp|
00000090  6f 6e 6d 6c 6b 6a 69 68  67 66 65 64 63 62 61 60  |onmlkjihgfedcba`|
000000a0  5f 5e 5d 5c 5b 5a 59 58  57 56 55 54 53 52 51 50  |_^]\[ZYXWVUTSRQP|
000000b0  4f 4e 4d 4c 4b 4a 49 48  47 46 45 44 43 42 41 40  |ONMLKJIHGFEDCBA@|
000000c0  3f 3e 3d 3c 3b 3a 39 38  37 36 35 34 33 32 31 30  |?>=<;:9876543210|
000000d0  2f 2e 2d 2c 2b 2a 29 28  27 26 25 24 23 22 21 20  |/.-,+*)('&%$#"! |
000000e0  1f 1e 1d 1c 1b 1a 19 18  17 16 15 14 13 12 11 10  |................|
000000f0  0f 0e 0d 0c 0b 0a 09 08  07 06 05 04 03 02 01 00  |................|
00000100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:43:26.533

您将看到的内容在很大程度上取决于托管操作系统/编辑器的代码页/编码

# regex - 在正则表达式中，显式字符如何可选地出现在替换中？

> ID：10399296
> 
> 赞同：1
> 
> 时间：2012-05-01T14:40:45.287
> 
> 标签：regex

我正在尝试从文本文件中提取图形信息并将其转换为 CSV 格式。数据以以下格式显示：

```
 X-axis    Y-axis    dY/dX 
```

我打算转换为：

```
X-axis,Y-axis,dY/dX 
```

但是，应该注意的`dY/dX`是，当从所使用的软件导出时，该列并不总是存在。

我目前的正则表达式是：

```
\s*(?<xaxis>\-*\d+\.\d+)\s*(?<yaxis>\-*\d+\.\d+)\s*(?<dydx>\-*\d+\.\d+)* 
```

替换表达式为：

```
${xaxis},${yaxis},${dydx} 
```

我的问题是：即使匹配表达式说明了`dY/dX`列的可选性质，替换表达式如何做同样的事情？目前，如果该`dY/dX`列不存在，则会在 CSV 文件中打印一个尾随逗号。我很欣赏这不是一个大问题，但我想知道这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:46:15.800

事实证明这是不可能的。我已经重写了程序，首先将数据存储在一个`DataTable`实例中，然后从中生成一个 CSV 文件。这样，可以确定列数并将必要的格式应用于输出。

# c# - 在 SQL Server 中绑定查询结果列别名

> ID：10399297
> 
> 赞同：1
> 
> 时间：2012-05-01T14:40:49.027
> 
> 标签：c#, sql-server, visual-studio-2010, data-binding

通过将列名从数据源拖到表单设计器上，我一直在将数据库列绑定到 Visual Studio 2010 中的控件。

我有一个看起来像这样的查询：

```
SELECT BankId, CASE WHEN (ProductId = 1) THEN 'True' ELSE 'False' END AS Prod1Avail
FROM tblBankProducts
WHERE (CompanyId = @CompanyId) 
```

`Prod1Avail`未显示在数据源中。应该如何`Prod1Avail`使用 Visual Studio 的设计器将列别名 () 从查询绑定到控件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:48:33.623

```
SELECT     BankId, CAST(CASE WHEN (ProductId = 1) THEN 1 ELSE 0 END AS bit) AS Prod1Avail
FROM         tblBankProducts
WHERE     (CompanyId = @CompanyId) 
```

[如下更新](http://msdn.microsoft.com/en-us/library/kda44dwy.aspx)TableAdapter 的查询。

1.  在组件托盘中选择一个 TableAdapter。

2.  单击 TableAdapter 的智能标记，然后选择添加查询。

3.  使用上述查询完成对话框

# javascript - 检测用户是否停止滚动页面

> ID：10399299
> 
> 赞同：0
> 
> 时间：2012-05-01T14:40:53.160
> 
> 标签：javascript, scroll

我正在尝试用 javascript 做一些事情，让我的聊天行为比现在好一点。

由于我使用 PrimeFaces 的投票来更新面板并模拟聊天，因此面板每秒都会更新，因此很难阅读旧消息（更新面板会导致在面板顶部重置滚动条）。

所以我在 , 中添加了一个`onscroll`事件`div`，以在用户滚动时停止轮询。

但我需要一种让它重新启动的方法，所以我想到了设置一个计时器并`poll.start()`在滚动停止后回忆一分钟。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:45:24.090

我在自己的聊天引擎上所做的是：

当有新消息到达时...

*   如果用户一直滚动到视图的（新消息）端，则保持滚动锚定在该端。
*   否则，将卷轴保留在原来的位置。

这可以通过将 的值`scrollTop`与`0`或进行比较来轻松测试`scrollHeight-offsetHeight`。

# c++ - 在堆栈上创建 QLayout 是否安全？

> ID：10399304
> 
> 赞同：3
> 
> 时间：2012-05-01T14:41:28.240
> 
> 标签：c++, qt

我从 Qt 文档中知道该`QLayout`对象承担其小部件的所有权。但就对象而言，在堆栈上创建它然后使用该函数`QLayout`将其传递给小部件是否安全？`setLayout`还是必须在堆上创建？

```
#include <iostream>

#include <QtGui/QApplication>
#include <QPushButton>
#include <QVBoxLayout>

class LoudPushButton : public QPushButton
{
public:
    virtual ~LoudPushButton(){std::cout << "~LoudPushButton()" << std::endl;}
};

class LoudQVBoxLayout : public QVBoxLayout
{
public:
    virtual ~LoudQVBoxLayout(){std::cout << "~LoudQVBoxLayout()" << std::endl;}
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QWidget window;

    // On the heap
    LoudQVBoxLayout* mainlayout = new LoudQVBoxLayout;
    mainlayout->addWidget(new LoudPushButton);
    mainlayout->addWidget(new LoudPushButton);
    window.setLayout(mainlayout);
  /*
    // On the stack
    LoudQVBoxLayout mainlayout;
    mainlayout.addWidget(new LoudPushButton);   
    mainlayout.addWidget(new LoudPushButton);
    window.setLayout(&mainlayout);
  */
    window.show(); 

    return a.exec();
} 
```

两种选择 //​​ 在堆栈上和 // 在堆上在出口处产生相同的结果：

```
~LoudQVBoxLayout()
~LoudPushButton()
~LoudPushButton() 
```

但是我可以确定这不是未定义的行为吗？是否`window`调用`delete`其布局？

编辑：

鉴于 Cat Plus Plus 的回答，我猜想：

```
LoudPushButton button;
mainlayout->addWidget(&button);
mainlayout->addWidget(new LoudPushButton); 
```

即使`button`和`*mainlayout`保证同时被删除，也会产生未定义的行为。这是真的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:49:33.170

每个`QObject`删除它的孩子。只有没有父对象的对象才能具有自动存储。并`QWidget::setLayout`重新定义布局。所以，不，你不能用`QLayout`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T18:42:17.707

在 Qt 中，对象树的设计使得 QWidgets 可以在堆栈上构建。只要父母是在孩子之前被创造出来的，他们就会正确地毁灭。您的两个示例都不是未定义的行为。

Qt 文档甚至[给出了一个示例](http://qt-project.org/doc/qt-4.8/objecttrees.html#construction-destruction-order-of-qobjects)并解释了为什么在堆栈上构造带有父级的小部件是合法的：

```
int main()
{
    QWidget window;
    QPushButton quit("Quit", &window);
    ...
} 
```

> 这段代码是正确的：quit 的析构函数没有被调用两次，因为 C++ 语言标准 (ISO/IEC 14882:2003) 指定本地对象的析构函数按其构造函数的相反顺序调用。因此，首先调用子进程的析构函数quit，然后在调用window 的析构函数之前将自己从其父window 中移除。

布局也应该正常运行，因为它们被设计为随时被销毁。`QWidget::setLayout` [文档](http://qt-project.org/doc/qt-4.8/qwidget.html#setLayout)提到：

> 如果这个小部件上已经安装了布局管理器，QWidget 不会让你安装另一个。您必须先删除现有的布局管理器（由 layout() 返回），然后才能使用新布局调用 setLayout()。

Qt 布局系统跟踪已在 QWidgets 上设置的 QLayout 对象的生命周期，并将适当地处理销毁，如本文档所暗示的那样。QLayout 的析构函数包括将其从设置的 QWidget 中注销的代码。

# android - AlertDialog.Builder 中的三个以上垂直按钮

> ID：10399311
> 
> 赞同：0
> 
> 时间：2012-05-01T14:42:00.277
> 
> 标签：android, android-alertdialog

内置的 android AlertDialog.Builder 最多有三个按钮选项（正、负、中性），它们水平对齐。我想为其添加更多按钮，并垂直设置方向。

我该怎么做 ？

任何想法将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:45:18.863

只需创建您的自定义对话框。

```
Dialog dialog = new Dialog(YourActivity.class);
dialog.setContentView(R.layout.your_dialog_layout);
dialog.setTitle("Dialog message"); 
```

现在您可以简单地创建新的 xml 文件并将您想要的任何内容放在那里。

管理按钮：

```
Button close = (Button) dialog.findViewById(R.id.close);
close.setOnClickListener(new OnClickListener()
{
    @Override
    public void onClick(View v) 
    {
          dialog.cancel();
    }   
}); 
```

检查：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:46:54.583

改为使用`Android.app.Dialog`。但是，没有辅助构建器类。

[对话](http://developer.android.com/reference/android/app/Dialog.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:50:59.540

您必须创建自定义布局。

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)

创建您自己的布局并对其进行充气以获取视图并点击链接获取其余部分。

# python - 在谷歌应用引擎python中设置cron作业

> ID：10399313
> 
> 赞同：5
> 
> 时间：2012-05-01T14:42:10.553
> 
> 标签：python, google-app-engine, cron

我刚刚开始使用 Google App Engine，所以我还在学习如何配置所有内容。我编写了一个名为 parsexml.py 的脚本，我想每 10 分钟左右运行一次。该文件位于我的主目录中，与 main.py、app.yaml 等一起。据我了解，我需要创建一个新文件 cron.yaml，如下所示：

```
cron:
- description: scrape xml
  url: /
  schedule: every 10 minutes 
```

我不确定我需要在 url 字段中输入什么。我也不确定是否需要其他任何东西。我是否需要更改我的 app.yaml 文件？在哪里指定我的 parsexml.py 文件的名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T14:46:29.800

布莱恩，

您需要更新您的`app.yaml`和`cron.yaml`文件。在每一个中，您都需要指定脚本将运行的路径。

`app.yaml`：

```
handlers:
- url: /path/to/cron
  script: parsexml.py 
```

或者，如果您有一个 catch all 处理程序，则无需更改它。例如：

```
handlers:
- url: /.*
  script: parsexml.py 
```

`cron.yaml`：

```
cron:
- description: scrape xml
  url: /path/to/cron
  schedule: every 10 minutes 
```

在[文档](https://developers.google.com/appengine/docs/python/tools/webapp/running)中，`parsexml.py`您需要指定一个处理程序`/path/to/cron`并将其注册到 WSGI 处理程序（或者您可以使用 CGI）：

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app

class ParseXMLHandler(webapp.RequestHandler):
    def get(self):
        # do something

application = webapp.WSGIApplication([('/path/to/cron', ParseXMLHandler)],
                                     debug=True)
if __name__ == '__main__':
    run_wsgi_app(application) 
```

**注意**：如果您使用的是 Python 2.7 运行时，您需要指定用于处理请求的全局 WSGI 变量`script: parsexml.application`在哪里。`application`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:47:18.710

在 GAE 中，所有操作都是通过 URL 完成的。您不能只是将任意脚本作为 cron 运行：您需要使该脚本成为处理程序并为其提供 URL，就像项目中的任何其他视图一样。

因此，将 URL 映射到 app.yaml 中的脚本，编辑脚本以使其成为处理程序，然后在 cron.yaml 中使用该 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:45:17.727

该 url 用于为您的 cron 作业运行 py 脚本

基本上在你的 app.yaml

你有

```
app.yaml
handlers:
- url: /helloworld.py
  script: helloworld.py 
```

在 cron.yaml 中

```
cron.yaml
- description: scrape xml
  url: /helloworld.py
  schedule: every 10 minutes 
```

如果您希望 cron 运行 hello world，您必须将 url 设置为`url: /helloworld.py`

# string - 如何评估球拍中的琴弦

> ID：10399315
> 
> 赞同：12
> 
> 时间：2012-05-01T14:42:16.027
> 
> 标签：string, eval, racket

我试图了解如何让 eval 函数读取字符串并评估字符串内的内容。

目前我知道

```
> (eval '(+ 1 2))
   3 
```

但我对球拍的使用并不了解。所以目前我正试图得到它，以便我可以做到这一点：

```
> (eval "(+ 1 2)")
   3 
```

任何有用资源的建议或链接将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-01T14:50:01.857

您想`read`与`open-input-string`. 像这样：

```
-> (eval (read (open-input-string "(+ 1 2)")))
3 
```

您还可以使用`with-input-from-string`：

```
-> (with-input-from-string "(+ 1 2)"
     (lambda () (eval (read))))
3 
```

# android - Android，滚动视图和无用的布局

> ID：10399320
> 
> 赞同：2
> 
> 时间：2012-05-01T14:42:34.817
> 
> 标签：android, android-layout

我有一个使用滚动视图的布局。滚动视图中文本的第一部分在模拟器中被截断，在 HTC 手机上，滚动视图滚动到文本末尾，并且需要大量滚动才能返回文本。

Eclipse 抱怨“此 ScrollView 布局或其 LinearLayout 父级无用”，我怀疑此消息是我的问题的罪魁祸首，但很高兴得到纠正

布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/Container"
    android:id="@+id/about">
        <ScrollView style="@style/Content">
                <TextView style="@style/Content"
                    android:id="@+id/about_content"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/about_text" />
        </ScrollView>
</LinearLayout> 
```

款式

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MainTheme">
        <item name="android:textColor">@color/txtColor</item>
    </style>
    <style name="ApplicationTheme" parent="android:Theme">
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:colorBackground">@color/mnuColor</item>
        <item name="android:textColor">@color/txtColor</item>
    </style>
    <style name="Container" parent="ApplicationTheme">
        <item name="android:textColor">@color/txtColor</item>
        <item name="android:layout_height">fill_parent</item>
        <item name="android:layout_width">fill_parent</item>
        <item name="android:colorBackground">@color/mnuColor</item>
    </style>
    <style name="Webview" parent="Container">
        <item name="android:background">@drawable/web_background_image</item>
        <item name="android:windowBackground">@drawable/background_image</item>
        <item name="android:colorBackground">@color/mnuColor</item>
    </style>
    <style name="MyPlaceDialog" parent="@android:style/Theme.Dialog">
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">fill_parent</item>
        <item name="android:orientation">vertical</item>
        <item name="android:stretchColumns">*</item>   
    </style>
    <style name="Content">
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_gravity">center</item>
    </style>

    <style name="button" parent="@android:style/Widget.Button">
        <item name="android:background">@drawable/button</item>
        <item name="android:layout_marginTop">2dp</item>
        <item name="android:layout_marginBottom">3dp</item>
        <item name="android:layout_marginLeft">4dp</item>
        <item name="android:layout_marginRight">4dp</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
    </style>    
</resources> 
```

Androids 文档在帮助解释为什么布局可能无用并且 Eclipse 也没有更好的帮助方面完全无用，因此非常感谢任何关于我需要做什么来解决这个问题的想法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T14:48:13.367

您的线性布局仅包含一个视图。因此，您的 LinearLayout 可以被消除，并且 ScrollView 可以成为您布局的根元素。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" style="@style/Content">
    <TextView style="@style/Content"
       android:id="@+id/about_content"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="@string/about_text" />
</ScrollView> 
```

请注意，lint 并不总是 100% 准确。虽然您可以删除视图是正确的，但它并不总是您想要或需要做的事情。

# c# - HttpContent.ReadAsAsync 在哪里？

> ID：10399324
> 
> 赞同：331
> 
> 时间：2012-05-01T14:42:51.083
> 
> 标签：c#, .net, asp.net-web-api, httpcontent

我在网络上使用新`HttpClient`对象（作为新 Web API 的一部分）的大量示例中看到应该有`HttpContent.ReadAsAsync<T>`方法。但是[MSDN](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent_methods%28v=vs.110%29.aspx)没有提到这个方法，IntelliSense也没有找到。

它去了哪里，我该如何解决？

* * *

## 回答 #1

> 赞同：505
> 
> 时间：2012-05-01T14:50:25.650

看起来它是一个扩展方法（在 System.Net.Http.Formatting 中）：

[HttpContentExtensions 类](http://msdn.microsoft.com/en-us/library/hh834253%28v=vs.108%29.aspx)

**更新：**

> PM> 安装包 Microsoft.AspNet.WebApi.Client

根据[System.Net.Http.Formatting](http://www.nuget.org/packages/System.Net.Http.Formatting) NuGet 包页面，该`System.Net.Http.Formatting`包现在是旧版，可以在[此处的 NuGet](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.Client/)`Microsoft.AspNet.WebApi.Client`上找到的包中找到。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2014-06-05T05:18:43.233

我有同样的问题，所以我只需获取 JSON 字符串并反序列化到我的类：

```
HttpResponseMessage response = await client.GetAsync("Products");
//get data as Json string 
string data = await response.Content.ReadAsStringAsync();
//use JavaScriptSerializer from System.Web.Script.Serialization
JavaScriptSerializer JSserializer = new JavaScriptSerializer();
//deserialize to your class
products = JSserializer.Deserialize<List<Product>>(data); 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2018-02-11T19:21:13.680

如果您已经在使用`Newtonsoft.Json`并且不想安装`Microsoft.AspNet.WebApi.Client`：

```
 var myInstance = JsonConvert.DeserializeObject<MyClass>(
   await response.Content.ReadAsStringAsync()); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-01-10T23:48:12.133

您可以编写扩展方法：

```
public static async Task<Tout> ReadAsAsync<Tout>(this System.Net.Http.HttpContent content) {
    return Newtonsoft.Json.JsonConvert.DeserializeObject<Tout>(await content.ReadAsStringAsync());
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2021-03-01T10:03:31.270

2021 年更新：看起来该方法已在 .NET5 中删除。或者，您可以使用`ReadFromJsonAsync<>()`from `System.Net.Http.Json.HttpContentJsonExtensions`。它解决了目的。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-01-11T21:12:25.853

只需在您的项目中右键单击 Manage NuGet Packages 搜索 Microsoft.AspNet.WebApi.Client 安装它，您将可以访问扩展方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-05T07:31:34.220

几次点击这个并遵循了一堆建议，如果在安装 NuGet Microsoft.AspNet.WebApi.Client 后您没有发现它可用，请手动从解决方案中的包文件夹中添加一个引用：

```
\Microsoft.AspNet.WebApi.Client.5.2.6\lib\net45\System.Net.Http.Formatting.dll 
```

并且不要陷入向 System.Net.Http.Formatting.dll NuGet 添加旧引用的陷阱

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-01T18:15:36.257

尽管我遇到了同样的问题，但该线程中的答案并没有完全帮助我解决问题。出于这个原因，我决定在这篇文章中写下我的研究结果。要解决此问题，请按照以下步骤操作：

1.  使用 NuGet将[Microsoft.AspNet.WebApi.Client](https://www.nuget.org/packages/Microsoft.AspNet.WebApi.Client/)包添加到项目中。在 ASP.NET 解决方案中，通过转到`Tools > NuGet Package Manager > Package Manager Console`Visual Studio IDE 打开包管理器控制台并将`Microsoft.AspNet.WebApi.Client`包添加到解决方案中。

```
Install-Package Microsoft.AspNet.WebApi.Client -Version 5.2.7 
```

2.  安装后，检查系统上是否存在扩展 DLL。`System.Net.Http.Formatting.dll`作为第一步的结果，文件应该存在于下面显示的目录中。

```
{root-solution-directory}\packages\Microsoft.AspNet.WebApi.Client.{package-version}\lib\net45\ 
```

3.  手动添加对相关项目的引用。右键单击解决方案中 ASP.NET 项目中的**“引用”**部分，单击**“添加引用...”**部分。由于该文件`System.Net.Http.Formatting.dll`是扩展名，因此在直接搜索时不会像`Microsoft.AspNet.WebApi.Client`包中的其他项目一样列出。因此，要手动添加 DLL 文件，请单击**“参考管理器”**窗口底部的**“浏览...”按钮。**选择第二步所示目录中的文件并选中复选框以将 DLL 文件包含在项目中。**`System.Net.Http.Formatting.dll`**

***   在项目中包含`System.Net.Http`命名空间以在项目中使用该DLL提供的功能；`using System.Net.Http.Formatting;`声明在`HttpContentExtensions`静态类中可用。** 

 **```
using System.Net.Http; 
```

**可选：您可以通过安装**[System.Net.Http.Formatting.Extension](https://www.nuget.org/packages/System.Net.Http.Formatting.Extension/)或[WebApiDoodle.Net.Http.Formatting](https://www.nuget.org/packages/WebApiDoodle.Net.Http.Formatting/)包之一并按照上述步骤来实现类似的解决方案。**

# sql - 插入多个属性作为外键

> ID：10399325
> 
> 赞同：2
> 
> 时间：2012-05-01T14:42:51.970
> 
> 标签：sql, database-design, foreign-keys

我有 2 张桌子：`Lecturer`和`Department`.

该`Lecturer`表具有以下列：

```
id, email, phone, expertise, dept_id. 
```

该`Department`表有这些：

```
dept_id, dept_name, dept_code, dept_program. 
```

样本数据如下：

**讲师**桌

```
(id=1, email= a@a.com, phone= 9999, expertise= multimedia and programming, dept_id=1) 
```

**部门**表

```
(id=1, dept_name=Computer Science, dept_code=CS, dept_program=Bachelor of Comp Science) 
```

专业知识列有几个值，有些讲师可能有超过 5 个专业领域，所以我认为我应该单独为专业知识创建另一个表。但是如何在讲师表中插入多个专业属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:48:31.157

您不能仅通过更改`lecturer`表格来真正做到这一点。通常，您通过创建单独的表来处理多值属性。在这种情况下，您将创建一个表来保存专业知识属性，并创建另一个表来将专业知识与讲师相关联。作为奖励，这也有助于防止在专业知识描述方面出现不一致。

结果表可能如下所示：

```
department(dept_id, dept_name, dept_code, dept_program)
lecturer(id, email, phone, dept_id*)
expertise(id, description)
lecturer_expertise(lect_id*, expertise_id*) 
```

# javascript - Backbone.js 自定义构造函数？

> ID：10399334
> 
> 赞同：17
> 
> 时间：2012-05-01T14:43:52.727
> 
> 标签：javascript, backbone.js

我正在寻找一些在我的模型上创建自定义构造函数的示例。我希望模型/数据的结构不同，然后将其设置为属性。

有人可以告诉我一些如何做到这一点的基本例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-02T12:02:41.677

如果您真的想覆盖构造函数，请将`constructor`属性传递给`Backbone.Model.extend()`，例如：

```
var Klass = Backbone.Model.extend( {

  constructor : function ( attributes, options ) {

    // ...

  }

} ); 
```

如果要从自定义构造函数中调用内置构造函数，可以执行以下操作：

```
var Klass = Backbone.Model.extend( {

  constructor : function ( attributes, options ) {

    Backbone.Model.apply( this, arguments );

  }

} ); 
```

或者，如果您不想在整个子类中重复包含父类的变量的名称，或者您不想担心该变量的值会发生变化，则可以执行以下操作：

```
var Klass;

var parent_klass = Backbone.Model.prototype;

( function ( parent_klass ) {

  Klass = parent_klass.constructor.extend( {

    constructor : function ( attributes, options ) {

      parent_klass.constructor.apply( this, arguments );

    }

  } );

} )( parent_klass ); 
```

或者，如果您更喜欢[@Claude 建议](https://stackoverflow.com/questions/10399334/backbone-js-custom-constructor/10413335#12347014)的方式，但在子类中重复子类变量名称而不是父类变量名称：

```
var Klass = Backbone.Model.extend(

  {

    constructor : function ( attributes, options ) {

      Klass.parent_klass.constructor.apply( this, arguments );

    }

  },

  {

    parent_klass : Backbone.Model.prototype

  }

); 
```

如果你想要更多的建议，你必须更具体地说明你想要完成的事情。

在内置构造函数功能之后您只想做的任何事情，您可能应该在`initialize()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-10T07:25:25.480

正如我在评论中提到的，使用`this.constructor.__super__`(or `this.__super__`) 时要小心，以免最终陷入无限循环（`Maximum call stack size exceeded`在 Chrome 中）。

在控制台中尝试以下操作（后果自负，这将导致上述无限循环）

```
var A = Backbone.Model.extend({constructor: function () {
  console.log("log: A");
  this.constructor.__super__.constructor.apply(this, arguments);
}});

var B = A.extend({constructor: function () {
  console.log("log: B");
  this.constructor.__super__.constructor.apply(this, arguments);
}});

new A();
//  log: A
//  > Backbone.model.extend.constructor
new B();
//  log: B
//  (8192) log: A
//  > RangeError: Maximum call stack size exceeded 
```

原因是在创建时`B`，`this`在 for 的构造函数中`A`指向 的实例`B`，所以`this.constructor.__super__.constructor`一直指向 的构造函数`A`，它被一次又一次地调用。

如果您想要“预期行为”，请使用以下语法之一：

```
var A = Backbone.Model.extend({constructor: function () {
  console.log("log: A");
  A.__super__.constructor.apply(this, arguments);
}});

var B = A.extend({constructor: function () {
  console.log("log: B");
  B.__super__.constructor.apply(this, arguments);
}});

new A();
//  log: A
//  > Backbone.model.extend.constructor
new B();
//  log: B
//  log: A
//  > A.extend.constructor 
```

或直接没有`__super__`：

```
var A = Backbone.Model.extend({constructor: function () {
  console.log("log: A");
  Backbone.Model.apply(this, arguments);
}});

var B = A.extend({constructor: function () {
  console.log("log: B");
  A.apply(this, arguments);
}});

new A();
//  log: A
//  > Backbone.model.extend.constructor
new B();
//  log: B
//  log: A
//  > A.extend.constructor 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-11T07:42:11.093

这就是我覆盖默认 Backbone.Model 构造函数的方式：

```
Backbone.Model = (function(Model) {
  // Define the new constructor
  Backbone.Model = function(attributes, options) {
    // Your constructor logic here
    // ...
    // Call the default constructor if you wish
    Model.apply(this, arguments);
    // Add some callbacks
    this.on('event', this.myCallback, this);
  };
  // Clone static properties
  _.extend(Backbone.Model, Model);      
  // Clone prototype
  Backbone.Model.prototype = (function(Prototype) {
    Prototype.prototype = Model.prototype;
    return new Prototype;
  })(function() {});
  // Update constructor in prototype
  Backbone.Model.prototype.constructor = Backbone.Model;
  return Backbone.Model;
})(Backbone.Model); 
```

之后，您必须确保 Backbone.Collection 原型使用​​更新后的 Backbone.Model 构造函数：

```
_.extend(Backbone.Collection.prototype, {
  model: Backbone.Model
}); 
```

在我看来，这种方法的“优势”是您可以继续使用 Backbone.Model 作为模型构造函数，这使得更改更加透明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T14:54:06.707

如果您想自己编写模型，如下所示：

```
var YourModel = function () {
    // your constructor here
};

_.extend(YourModel.prototype, Backbone.Model.prototype, {
    // your model method here
}); 
```

小心，我认为你需要查阅`Backbone.Model`构造函数[源代码](http://documentcloud.github.com/backbone/docs/backbone.html#section-28)。但我认为这不是一个好主意。覆盖`initialize`方法是正确的方法：

```
var YourModel = Backbone.Model.extend({
    initialize: function (attrs, options) {
        Backbone.Model.prototype.initialize.apply(this, arguments); // call super constructor

        // your constructor code here
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T14:49:23.560

听起来您正在寻找[`initialize`](http://documentcloud.github.com/backbone/#Model-constructor)方法。它在您创建新模型时被调用，您可以将 if 用于您需要的任何用途：

```
var myModel = Backbone.Model.extend({
  initialize: function() {
    // do something besides setting attributes or model
    alert('myModel is ready for action!');
  }
});

new myModel(); 
```

如果你想做一些更复杂的事情，你可能会覆盖`constructor`Backbone 核心中的方法。不过，这是一项更棘手的业务。如果可以的话，使用暴露的方法会更好！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-30T17:41:01.533

覆盖 Backbone.Model 构造函数时需要注意的事项 - 如果您不调用`Backbone.Model.apply`，则可能不会设置 Model.cid。

这很糟糕 - 如果 cid 未跨多个模型设置，则集合可能会认为它是您集合中第一个模型的副本 - 并且不允许添加它。

# php - 使用 PHP 将大文件上传到 FTP

> ID：10399336
> 
> 赞同：2
> 
> 时间：2012-05-01T14:44:00.427
> 
> 标签：php, file-upload, ftp

我正在尝试使用 php 将大文件上传到 ftp 服务器。我可以上传小文件，但上传大文件时遇到问题。查了一下发现需要设置upload_max_filesize和post_max_size，设置ftp为被动模式，设置时间限制为never。我没有设置时间限制，我现在没有返回任何错误，但它也没有上传文件。如果您查看`if (!$upload) {`底部的线，它应该会回显某些内容，但事实并非如此。更重要的是，它只是不起作用。关于出了什么问题或我需要做些什么来完成这项工作的任何见解？谢谢！

```
ini_set('upload_max_filesize', '50M');   
ini_set('post_max_size', '50M');  

$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// check connection
if ((!$conn_id) || (!$login_result)) {
        echo "FTP connection has failed!";
        echo "Attempted to connect to $ftp_server for user $ftp_user_name";
        exit;
}

 // turn passive mode on
ftp_pasv($conn_id, true);

if($_FILES['upload_file']['name']!=''){
    $source_file = $_FILES['upload_file']['tmp_name'];
    $destination_file = $_FILES['upload_file']['name']; 

    // upload the file
    $upload = ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY);

    // check upload status
    if (!$upload) {
            echo "FTP upload has failed!<br />";
        } else {
            echo "Uploaded $source_file to $ftp_server as $destination_file<br />";
        }       
} 
```

## 更新

我发现我无法从 php 页面设置 upload_max_filesize 值；此外，我似乎无法让 .htaccess 工作：如果我有一个 .htaccess 文件，则会导致 HTTP 错误 500。此外，我无权访问 php.ini。

我还能如何更改 upload_max_filesize 值？

## 更多信息

我的网络管理员告诉我，我使用的是基于 IIS Windows 的系统，因此 .htaccess 文件将无法工作。有没有办法可以通过 web.config 影响文件上传大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:49:49.883

从这个网站：[http ://www.php.net/manual/en/ini.php](http://www.php.net/manual/en/ini.php)

> 'upload_max_filesize' 和 'post_max_size'

属于 PHP_INI_PERDIR 类型

这意味着可以在“php.ini、.htaccess 或 httpd.conf”中设置条目。所以你不能在你的脚本中设置它。

- - 编辑 - -

一个类似的问题： [Changing_max_filesize on PHP](https://stackoverflow.com/questions/1122418/changing-upload-max-filesize-on-php)

--- 编辑 2 ---

就个人而言，我想做同样的事情（通过 ftp 上传大文件）并最终编写一个 java 应用程序。对于处理大文件，php 并不是最好的方法。Web 浏览器并不喜欢这样。因此，对于处理大文件，我建议查看其他替代方案：(java, swf, javascript, ...)

当我有时间时，我想尝试一下[http://nodejs.org/](http://nodejs.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:02:17.267

正如@AngeDeLaMort 正确指出的那样，您不能使用速记符号在 PHP.ini 之外设置配置值。

参考：[在 PHP 上更改 upload_max_filesize](https://stackoverflow.com/questions/1122418/changing-upload-max-filesize-on-php)

尝试这样做。

在根目录中创建 .htaccess 文件并添加以下内容。

```
php_value upload_max_filesize 50M
php_value post_max_size 50M
php_value max_execution_time 200
php_value max_input_time 200 
```

# jquery-ui - JqG rid GridView 问题

> ID：10399339
> 
> 赞同：0
> 
> 时间：2012-05-01T14:44:09.737
> 
> 标签：jquery-ui, jqgrid, jqgrid-asp.net, jqgrid-php, jqgrid-formatter

如果我将 gridView 属性设置为 true，则表格高度设置不正确，它在最后一条记录下方显示空白空间。我认为它正在完成最后一页的 rowNum。是错误还是我缺少要设置的属性？这只发生在 FireFox

```
 $('#jqgInventory').jqGrid({
autowidth: true,
caption: 'Inventory',
datatype:'local',
forceFit: true,
gridview: true,
height: 500,
hidegrid: false,
ignoreCase: true,
loadonce: true,
loadui: 'disable',
rowNum:25,
scroll:true,
shrinkToFit: true,
viewrecords: true,
beforeRequest: function() {$('#gridScript').block();},
beforeSelectRow: function(rowid, e) {return false;},
gridComplete: function() {$('#lblVehicleCount').html($('#jqgInventory').getGridParam('records'));$('#gridScript').unblock();Inventory.modifyGridCellClick();},
colModel: [
{
align: 'Center',
name:'Select',
label: 'SEL',
title: true,
width:20,
index:'Select'
},{
align: 'Left',
name:'Photo',
hidden: false,
label: 'PHOTO',
stype:'text',
sortable: false,
sorttype:'text',
title: true,
width:100,
index:'Photo'
},{
align: 'Left',
name:'Information',
hidden: false,
label: 'INFO',
stype:'text',
sortable: false,
sorttype:'text',
title: true,
width:100,
index:'Information'
},{
align: 'Right',
name:'Price',
hidden: false,
label: 'PRICE',
stype:'text',
sortable: true,
sorttype:function(cellValue){return CustomGridSortByIntegerAsString(cellValue);},
title: true,
width:50,
index:'Price'
},{
align: 'Right',
name:'Mileage',
hidden: false,
label: 'MILEAGE',
stype:'text',
sortable: true,
sorttype:function(cellValue){return CustomGridSortByIntegerAsString(cellValue);},
title: true,
width:25,
index:'Mileage'
},{
align: 'Right',
name:'Age',
hidden: false,
label: 'AGE',
stype:'text',
sortable: true,
sorttype:function(cellValue){return CustomGridSortByIntegerAsString(cellValue);},
title: true,
width:50,
index:'Age'
},{
name:'VehicleKey',
hidden: true,
label: 'VEHICLEKEY',
width:50,
index:'VehicleKey'
}
]
,data:data}); 
```

![在此处输入图像描述](../Images/5690ab0b1fdd899b0c91790e7552eefd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:56:16.540

首先你应该小心使用字母的大小写。不`gridview: true`一样。`gridView: true`以同样的方式，你应该使用`datatype: 'local'`代替`datatype: 'Local'`和`loadui: 'disable'`代替`loadui: 'Disable'`。如果你写得正确，`loadui`你可以删除`beforeRequest`你使用的值。

要解决您的主要问题，您应该使用`height: 'auto'`（或`height: '100%'`）或添加附加选项`scrollOffset: 0`。

# asp.net - 如何使用几个关键字 asp.net 验证数据表中的行

> ID：10399341
> 
> 赞同：0
> 
> 时间：2012-05-01T14:44:36.680
> 
> 标签：asp.net, datatable, arrays

Dim keywords() As String = {"FirstName", "LastName", "Gender"}

我有一个只有 1 列的数据表。我想检查数据表中的所有行是否包含所有关键字，例如，

```
 Table1
    __________
    FirstName
    LastName
    Gender 
```

此表 1 有效。

```
 Table2
     ______
     FirstName
     Gender 
```

此表 2 无效，因为缺少姓氏

```
 Table3
      ______
      FirstName
      LastName
      Gender
      DateofBirth 
```

此表 3 也是有效的，因为它包含关键字中的所有必要内容。我怎样才能做到这一点 ？是否也可以指出缺少哪个？例如，在 table2 中，缺少 LastName。

增值帮助将是..检查重复项..但这不是必需的..如果我能解决第一个问题..我已经很感激了..

非常感谢 ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:46:40.533

您可以使用 LINQ：

```
var tableValues = table.AsEnumerable()
                       .Select(dr => dr.Field<String>("SomeColumn"))
                       .ToList();

if (keywords.Except(tableValues).Any()) {
    //Uh oh...
}

if (tableValues.Distinct().Count() < tableValues.Count) {
    //Uh oh...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:53:00.023

Simply rotate a loop to DataTable rows

```
DataTable table = new DataTable();
// TODO: Render table

string[] keywords = { "FirstName", "LastName", "Gender" };
bool isValid = true;
bool hasDuplicates = false;
foreach (string keyword in keywords)
{
    DataRow[] rows = table.Select("Field='" + keyword + "'");
    if (rows.Count() <= 0)
    {
        isValid = false;
        break;
    }
    if (rows.Count() > 1)
    {
        hasDuplicates = true;
        break;
    }
}

if (!isValid)
{
    //TODO:
}
if (hasDuplicates)
{
    //TODO:
} 
```

# jquery - JQuery将活动类添加到同名类

> ID：10399342
> 
> 赞同：2
> 
> 时间：2012-05-01T14:44:57.173
> 
> 标签：jquery

我在下面有两个相同的 div 案例。

```
<div class="box">
  <div class="content">
    Content here
  </div> 
  <div class="info">
    Text here
  </div> 
</div> 
```

.info 被 overflow: hidden 隐藏，当我将鼠标悬停在 .box 上时，.info .animates 向上并包含一些关于 .content 的信息。

但是，由于当我将鼠标悬停在其中一个 .box 上时，我具有相同的类名，因此它们两个 .animates 上的 .info。

我想出了这个解决方案

```
$(document).ready(function(){
    $('.box').mouseover(function(){
        $(this).find(".info").addClass("active");
    });

    $('.box').hover(function(){
        $('.active').animate({bottom: "0px"}, {queue: false, duration: 100})
    }, function(){
        $('.active').animate({bottom: "-50px"}, {queue: false, duration: 100});
    }); 

    $('.box').mouseout(function(){
        $(this).find(".info").removeClass("active");
    }); 
}); 
```

我尝试先使用悬停来添加和删除类，但是在 .animate 上的 .hover 和 .info 没有动画下来之前，活动类被删除了。

这是一个好的解决方案还是有更好、更“正确”的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:52:42.763

You should be able to do something along these lines.

```
$('.box').hover(function(){
    $(this).find('.info').animate({bottom: "0px"}, {queue: false, duration: 100})
}, function(){
    $(this).find('.info').animate({bottom: "-50px"}, {queue: false, duration: 100});
}); 
```

If you give us your css, I could get a working jsfiddle as an example.

# asp.net-mvc - 为什么在 LocalReport.SetParameters 调用上停止执行而不触发错误

> ID：10399345
> 
> 赞同：0
> 
> 时间：2012-05-01T14:45:06.303
> 
> 标签：asp.net-mvc, localreport

我有一个 MVC 控制器方法，它将 rdlc 报告的结果写入文件。这在我的本地机器上运行良好，但是当它发布到生产环境时，它会在 setparameters 行上停止执行并且不会触发异常。任何线索将不胜感激。

```
 public JsonResult GenerateSignInSheet(string id)
    {
        try
        {
            string pgmid = id;
            string strProgDate = "";
            DateTime? dtProgDate = null;
            Program prog = db.Programs.SingleOrDefault(p => p.ProgramID == pgmid);
            if (prog != null)
                dtProgDate = prog.ProgDate;
            if (dtProgDate != null)
                strProgDate = String.Format("{0:d}", dtProgDate);

            string strProgLoc = string.Empty;
            var locInfo = this.dc.usp_ProgramLocSiteInfo(id).SingleOrDefault();
            if (locInfo != null) strProgLoc = locInfo.VendorOrHost ?? string.Empty;

            //Rep information
            string strRepName = string.Empty;

            LocalReport localReport = new LocalReport();

            // the following 2 lines will allow globals to work - MS gotcha
            System.Security.PermissionSet sec = new System.Security.PermissionSet(System.Security.Permissions.PermissionState.Unrestricted);
            localReport.SetBasePermissionsForSandboxAppDomain(sec);

            localReport.ReportPath = Server.MapPath("~/Content/Reports/RptSignInSheetPrefilled.rdlc");
            var sourceList = dc.GetRSVPListForSignin(pgmid).ToList();
            ReportDataSource reportDataSource = new ReportDataSource("DataSetRSVPList", sourceList);
            ReportParameter p1 = new ReportParameter("ProgramID", pgmid);
            ReportParameter p2 = new ReportParameter("ProgDate", strProgDate);
            ReportParameter p3 = new ReportParameter("LocName", strProgLoc);
            ReportParameter p4 = new ReportParameter("RepName", strRepName);

            localReport.SetParameters(new ReportParameterCollection { p1, p2, p3, p4 });
            localReport.DataSources.Add(reportDataSource);

            //string reportType = "PDF";
            string mimeType;
            string encoding;
            string fileNameExtension;

            //The DeviceInfo settings should be changed based on the reportType
            //http://msdn2.microsoft.com/en-us/library/ms155397.aspx

            string deviceInfo =

            "<DeviceInfo>" +
            "  <OutputFormat>PDF</OutputFormat>" +
            "  <PageWidth>11in</PageWidth>" +
            "  <PageHeight>8.5in</PageHeight>" +
            "  <MarginTop>0.5in</MarginTop>" +
            "  <MarginLeft>0.5in</MarginLeft>" +
            "  <MarginRight>0.5in</MarginRight>" +
            "  <MarginBottom>0.5in</MarginBottom>" +
            "</DeviceInfo>";

            Warning[] warnings;
            string[] streams;
            byte[] renderedBytes;

            //Render the report
            renderedBytes = localReport.Render(
                "PDF",
                deviceInfo,
                out mimeType,
                out encoding,
                out fileNameExtension,
                out streams,
                out warnings);

            string strPDFOutputPath = System.Configuration.ConfigurationManager.AppSettings["PDFDocumentsPath"].ToString();
            string strPDFFilename = strPDFOutputPath + id.Replace("-", string.Empty) + ".pdf";

            System.IO.FileStream fs = new System.IO.FileStream(strPDFFilename, System.IO.FileMode.Create);
            fs.Write(renderedBytes, 0, renderedBytes.Length);
            fs.Close();
            fs.Dispose();

            //var theFile = File(renderedBytes, mimeType);

            return Json(new { File = strPDFFilename });

        }
        catch (Exception ex)
        {
            Elmah.ErrorSignal.FromCurrentContext().Raise(ex);
            return Json(new { File = "" });
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:39:56.720

您应该检查您的 dll 的版本。

我遇到了同样的问题，我的案例（Asp.Net 4 Razor，MVC）需要其中的第 11 版：

*   Microsoft.ReportViewer.Common
*   Microsoft.ReportViewer.ProcessingObjects
*   Microsoft.ReportViewer.WebForms

# javascript - 如何使用谷歌地图+移动Secncha触摸在中央屏幕中显示标记

> ID：10399347
> 
> 赞同：0
> 
> 时间：2012-05-01T14:45:12.593
> 
> 标签：javascript, mobile, geolocation, sencha-touch, extjs

我编写了在 sencha-touch 框架中正常工作的地图代码。我需要一些像[wikimapia.org](http://wikimapia.org)这样的东西，它有一个固定的十字架或中间的任何物体，但地图是可拖动的。然后我可以单击对象并显示地址。

任何帮助请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:38:02.100

在类似问题上查看我自己的答案

*   [如何在 Sencha-Touch2.0 的地图中获取当前位置的标记](https://stackoverflow.com/questions/10333076/how-can-i-get-marker-on-current-location-in-map-in-sencha-touch2-0/10333449#10333449)

此外，我还将当前位置设置为位于`marker`地图中心。因此，您的标记位于屏幕中心的问题也得到了解决。

您可以创建一个并在标记的侦听器上`infoWindow`打开它。`click`像这样，

```
google.maps.event.addListener(someMarker, 'click', function() {
   infowindow.setContent('_Place Address_');
   infowindow.open(map, someMarker);
}); 
```

# php - php c2dm 代码错误响应

> ID：10399358
> 
> 赞同：0
> 
> 时间：2012-05-01T14:46:09.940
> 
> 标签：php, drupal, android-c2dm

您好，我正在用 php 为 c2dm 编写代码，这是 drupal 模块中的代码，我的问题是它在我的本地主机“wamp”服务器上工作，但是当尝试在我的 centos 5 服务器上使用它时，var_dump($response)返回 bool(false)，我的域已通过认证，并且 curl 在我的服务器上运行良好，我的情况有什么解决方案吗？

```
function push_notifications_c2dm_token() {
  $data = array(
    'Email'         => PUSH_NOTIFICATIONS_C2DM_USERNAME,
    'Passwd'        => PUSH_NOTIFICATIONS_C2DM_PASSWORD,
    'accountType'   => 'HOSTED_OR_GOOGLE',
    'source'        => 'Company-AppName-Version',
    'service'       => 'ac2dm',
  );

  $curl = curl_init();
  curl_setopt($curl, CURLOPT_URL, PUSH_NOTIFICATIONS_C2DM_CLIENT_LOGIN_ACTION_URL);
  curl_setopt($curl, CURLOPT_FOLLOWLOCATION, TRUE);
  curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
  curl_setopt($curl, CURLOPT_POST, TRUE);
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
  curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
  $response = curl_exec($curl);
  var_dump($response); die();
  curl_close($curl);

  // Get the auth token.
  preg_match("/Auth=([a-z0-9_\-]+)/i", $response, $matches);
  $auth_token = $matches[1];

  if (!$auth_token) {
    watchdog('push_notifications', 'Google C2DM Server did not provide an authentication token.', NULL, WATCHDOG_ERROR);
  }
  else {
    return $auth_token;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:09:25.277

您可以使用`curl_error()`（[http://www.php.net/manual/en/function.curl-error.php](http://www.php.net/manual/en/function.curl-error.php)）在您的代码中查找问题。返回的错误布尔值`curl_exec()`没有提供足够的信息来解决问题。

# java - 从小程序中更改/添加 Java 小程序参数

> ID：10399361
> 
> 赞同：0
> 
> 时间：2012-05-01T14:46:22.033
> 
> 标签：java, applet

有没有办法从小程序本身更改/添加小程序参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:53:08.290

我不这么认为。Applet 参数在 HTML 页面上定义，由浏览器读取并由 java 插件通过 applet 上下文传递给 applet。即使您通过 LiveConnect 运行代码并在 applet 运行时动态更改 applet 的参数，它也不会获得新值，因为 java 插件不会`init()`再次调用它的方法。

最大的问题是你为什么需要这个？如果您从小程序参数中读取某些参数，您将其分配给小程序内的某个变量。您想在运行时更改此变量的值吗？就这么做吧，即给applet的这个内部变量赋新值。

# javascript - Canjs 与淘汰赛？

> ID：10399373
> 
> 赞同：3
> 
> 时间：2012-05-01T14:47:24.370
> 
> 标签：javascript, model-view-controller, mvvm, knockout.js, javascript-framework

我打算用[Knockoutjs](http://knockoutjs.com/)开始一些项目，但是，最近我发现[了 Canjs](http://canjs.us/)。

*   canjs与knockoutjs的优缺点是什么？
*   哪一个更适合不同类型大小的 Web 应用程序（小型应用程序/大型项目/企业应用程序）？

经过一番研究，我发现 canjs 更高效、更轻巧、更实用，但我还没有任何经验。

另外，我可以请人们将[Canjs](http://canjs.us/)标签添加到*Stackoverflow*吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T18:04:34.543

我建议在以下位置查看所有不同的选项：

TodoMVC [http://addyosmani.github.com/todomvc/](http://addyosmani.github.com/todomvc/)

浏览这些选项的源代码将使您对不同框架的比较有一个很好的感觉。

我个人的感觉是它们之间基本上有两种方法：

1.  使用带有 1 路绑定和详细模板引擎的 jquery 选择器（大多数框架）
2.  在 MVVM 模式中使用 2 路绑定的命名约定方法（knockoutjs）

就我个人而言，我发现选项 2 会导致编写更少的代码，这是我努力的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:11:36.067

除了你提到的 2 个之外，还有很多 JavaScript 框架。很难比较它们，因为它们有其他意图/目的。我不了解 CanJS，但我确信它们的目标与 KnockOut 不同。选择使用哪个框架实际上取决于您使用的网站及其功能，而不是 FrameWork 的功能。

所以选择最适合你的项目的，无论如何，每一个选择。不仅仅是一个 JavaScript 框架。

可以询问和比较具体问题（不确定 SO 是否适合它）。示例是比较不同框架的模板或数据绑定。但不建议在不了解网站（或即将成为网站）的情况下比较 2 个框架

# java - 批量解析DNS

> ID：10399374
> 
> 赞同：3
> 
> 时间：2012-05-01T14:47:24.980
> 
> 标签：java

我需要将大量（数十万）域解析为 Java 中的 IP 地址。虽然`InetAddress.getByName()`对于少量使用是可行的，但对于大量使用来说速度很慢（可能是因为它一次只向 DNS 服务器发送一个请求并等待响应，然后再继续下一个请求）。

有没有更有效的方法（例如将它们批量发送到 DNS 服务器）可以减少解析大量域所需的时间？

应 fmucar 的要求，我添加了用于尝试更多多线程方法的代码：

```
Set<String> ips = Collections.synchronizedSet(new HashSet<String>());
int i = 0;
List<Set<String>> sets = new ArrayList<Set<String>>();
for (String host : domains) {
    if (i++ % 5 == 0) {
        sets.add(new HashSet<String>());
    }
    Set<String> ipset = sets.get(sets.size()-1);
    ipset.add(host);
}
for (Set<String> ipset : sets) {
    Thread t = new Thread(new DomainResolver(ips, ipset));
    t.start();
} 
```

在每个线程 250 个时，我们达到了每分钟 700 个结果的峰值。虽然比以前更好（<300），但在需要解决数十万问题时仍然不是那么好。将其降低到每个线程只有 5 个，这大大加快了每分钟数千个的速度。不过，这显然会产生大量线程，因此目前正在研究在 C 中进行解析以利用[http://www.chiark.greenend.org.uk/~ian/adns/](http://www.chiark.greenend.org.uk/~ian/adns/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:21:08.037

根据[RFC for DNS Implementation](https://www.rfc-editor.org/rfc/rfc1035)，您一次只能提出一个问题，定义如下：

> 4.1.2\. 问题部分格式
> 
> 问题部分用于承载大多数查询中的“问题”，即定义所问内容的参数。该部分包含 QDCOUNT（通常为 1）条目，每个条目的格式如下：
> 
> ```
>  1  1  1  1  1  1
>   0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5
> +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
> |                                               |
> /                     QNAME                     /
> /                                               /
> +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
> |                     QTYPE                     |
> +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
> |                     QCLASS                    |
> +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
> ```
> 
> 在哪里：
> 
> QNAME 一个域名，表示为一系列标签，其中每个标签由一个长度八位组组成，后跟该八位组数。域名以根的空标签的零长度八位字节结束。请注意，该字段可能是奇数个八位字节；不使用填充。
> 
> QTYPE 一个两个八位字节的代码，它指定查询的类型。该字段的值包括对 TYPE 字段有效的所有代码，以及一些更通用的代码，这些代码可以匹配一种以上的 RR 类型。
> 
> Mockapetris [第 28 页] RFC 1035 域实现和规范
> 1987 年 11 月
> 
> QCLASS 一个两个八位字节的代码，用于指定查询的类。例如，对于 Internet，QCLASS 字段为 IN。……

但是，您可能会得到自定义的 [极不可能] 解析器，它们维护自己的缓存并支持批量传输，因为它们的规范略微开放。我不知道是否存在。也许你可以写一个:) ...有关解析器的更多信息，请查看此[RFC的第 5 节](https://www.rfc-editor.org/rfc/rfc1034)

最简单的解决方案是使用之前建议的线程。

编辑：我猜这个故事的寓意是 DNS 服务器不是为接受批量请求而设计的。这是有道理的，否则攻击者可能很容易从单个 DNS 服务器请求太多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:58:10.577

您可以使用 java.util.concurrent.* 类创建多线程应用程序来执行多个查询，而无需等待结果。

```
See ExecutorService, Runnable, Callable, Future, Thread ... classes. 
```

如果您不熟悉教程，那么阅读教程可能是个好主意。

```
eg. You can use a `BlockingQueue`, and producer-consumer pattern. 
```

您的应用程序的一部分将开始创建 Callable 对象，它们将在它们可用时将结果放入 BlockingQueue 中，而另一部分将从 BlockingQueue 获取结果并可能写入文件。

编辑 1：示例：

```
ExecutorService threadExecutor = Executors.newFixedThreadPool(50);
for(....){
  Runnable thread = new Thread(new DomainResolver(ips, ipset));
  threadExecutor.execute(thread);
} 
```

与其一次创建和启动多个线程，不如将执行任务委托给执行器（参见上面的编辑）服务，该服务在任何时候最多接受 50 个线程。您将需要找到最佳线程数，过多的线程意味着，大多数 cpu 周期将用于切换线程。太低意味着，cpu 周期将浪费在等待 DNS 服务器返回结果

# ios5 - 在多个设备上恢复购买

> ID：10399377
> 
> 赞同：2
> 
> 时间：2012-05-01T14:47:41.003
> 
> 标签：ios5, ios4, in-app-purchase

我有一个`inApp Purchases Client - Sever Model`集成的应用程序。

我很难跟踪`Restoration and Delivery of the Products`.

我正在跟踪`UDID`购买产品的用户，服务器将产品交付给该特定用户`UDID`。

```
 Now if i want to restore the previous purchases on a different device, 
  how will i deliver the content? As my database has a different UDID? 
```

我们必须在什么基础上跟踪购买，以便我们可以在所有设备上交付它？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:36:06.057

对此的解决方案可能如下：

当用户购买东西时，为用户生成一个唯一标识符（例如使用 CFCreateUUID）。将此 ID 与收据一起发送到服务器。在服务器上存储一条记录。当用户想要在另一台设备上共享此产品时，他们必须单击“共享到其他设备”按钮。当他们这样做时，会向他们指定的电子邮件地址发送一封电子邮件。此电子邮件包含一个链接 yourapp://id=。当用户在另一台设备上打开它时，会向您的服务器发送“恢复”操作。检查给定 ID 的记录并跟踪“恢复”计数器，以便用户最多只能在 5 台设备上恢复。

我知道……这很荒谬，但我还没有找到更好的方法来处理它。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:51:31.033

你不应该使用 UDID，Apple 可能会拒绝你的应用程序（隐私问题，你可以[在这里查看](http://techcrunch.com/2012/03/24/apple-udids/)）。

与问题相关：

为什么需要 UDID？在恢复过程中，您将收到每笔交易的收据。您可以将此数据发送到您的服务器，然后您可以在其中对照 Apple 服务进行检查。如果正确，则服务器将内容交付给设备。不需要 UDID。

# javascript - 非常基本的 Backbone.js 问题

> ID：10399380
> 
> 赞同：0
> 
> 时间：2012-05-01T14:47:55.707
> 
> 标签：javascript, backbone.js

我确信这很明显，但我是新来的主干.js 并且已经浪费了很多时间。我正在尝试使用 Backbone 设置一个非常简单的示例，其中 this.name 是一个人名，当名称更改时程序会发出“hi”警报。但是，当我运行下面的代码时，我得到了错误

对象函数 (){a.apply(this,arguments)} 没有方法 'get'

```
this.name = Backbone.Model.extend({
    initialize: function() {
      this.bind('change', function() {alert('hi')});
    },
    defaults : {
      name: 'bob'
    }

  });

console.log(this.name.get('name')); 
```

请让我知道我做错了什么，这让我发疯:)谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:50:53.463

`this.name`还没有被实例化。试试这个：

```
this.nameModel = Backbone.Model.extend({
  initialize: function() {
    this.bind('change', function() {alert('hi')});
  },
  defaults : {
    name: 'bob'
  }
});

// instantiate the model
this.name = new this.nameModel();
console.log(this.name.get('name')); 
```

# javascript - 如果找到点，正则表达式要求下一个字符是数字

> ID：10399382
> 
> 赞同：-1
> 
> 时间：2012-05-01T14:48:03.187
> 
> 标签：javascript, regex

我想验证这样的东西，数值和或用点

这些将是有效的：

*   1
*   1.1
*   12.12.12
*   123.123.123.12
*   1.12.123.12345.123456

这些将无效：

*   .1
*   1.
*   123.123。
*   123..

我试过的

*   `/^[\d*\.?\d*]+$/.test(the_number_from_form_input_field)`
*   `this.value.match(/[^\d*\.?\d*$]/)`
*   `/^[\d+(\.\d)?]+$`

我目前正在使用的

*   `/^[\d\.]+$/.test(the_number_from_form_input_field)`
*   `this.value.match(/[^\d\.]/)`

希望这与 .match() 和 .test() 一起使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:51:08.783

如果您反转测试，这可能会更简单：

```
if (/\.([^\d]|$)/.test(myString)) {
    // test failed
} 
```

即查找*不*跟数字或字符串末尾的文字点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:57:07.703

不知道 jquery，但我认为这应该工作

```
^\d+(\.\d+)*$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T14:52:56.023

```
myString.test(/^\d+(\.\d+)*$/); 
```

[JSfiddle](http://jsfiddle.net/4qwnn/)

-edit- 感谢 veeTrain，最后`\d*`删除，因为它没有做任何事情。（它仍然在小提琴中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T14:57:01.997

我认为您可以通过这种方式找到这些值：

```
/^(\d+\.)*\d+$)/ 
```

查找零个、一个或多个数字和点分组，后跟一个或多个数字。

感谢 rsplak 的提琴；我们的正则表达式似乎都解决了这个问题。[我在行动](http://jsfiddle.net/4qwnn/2/)。

# sql - SSRS 2008 中的复杂迭代查询

> ID：10399386
> 
> 赞同：1
> 
> 时间：2012-05-01T14:48:14.043
> 
> 标签：sql, tsql, ssrs-2008, sql-server-2008-r2, reporting-services

在最初为客户手动编写多个报表作为 MVC 3 (EF4) 项目的一部分后，我决定在 Microsoft 报表服务（SQL Server 2008 上的 SSRS 2008）中编写报表要容易得多。对于我的大多数报告，这已被证明是轻而易举的事，甚至不必为我的大多数报告编写 SQL 过程（基于模型的 BIDS 中的语义查询）。

然而，由于其输入参数的性质以及最初是在返回列表而不是 LINQ 查询的函数中计算的，一份报告仍然令人生畏。目标是返回 people 表中在日期 a 和日期 b 之间的任何一天（由报告请求者输入的变量）内的所有忙于 x% 的人。此忙碌级别信息仅存在于 Job 表中，该表包含有关分配给哪个人员、作业的开始和结束日期以及任务级别的信息。结果，我原来的 C# 函数做了以下事情（伪代码）：

```
given startDateRange a, stopDateRange b, busyLevel x
{
for each person in people:
   List returnPeople = new List()
   create array consisting of days from a to b
   for each job in jobs:
      for each intersecting date of DateRange and job dateRange:
         add task level of job to array
   for each day in array:
      if array[day] < x
         returnPeople.Add(person)
         break;
return returnPeople
} 
```

相关部分的表结构：

```
People Table:
-PersonID (PK)
-other stuff...

Jobs Table:
-JobID (PK)
-StartDate
-StopDate
-Allocation
-AssignedPersonID (FK to People Table) 
```

如您所见，如果该作业的 AssignedPersonID 为 = 那某人，则该作业在某人的日程表中

所以......因为我现在在 SSRS 2008 工作，我正在寻找有关如何从相同的输入参数在 SSRS 中获得这些相同结果的指导。一些我目前不知道的语义查询技巧？带有临时表或表变量的 SQL 存储过程？某种数据处理扩展？任何有关解决此类问题的最佳方法的信息将不胜感激。

让我知道是否需要其他信息/代码。

编辑：目前正在使用几乎复制我原始函数结构的游标和临时表的解决方案。但是由于游标的复杂性和低效性，这绝对不是理想的，因此建议/替代方案会有所帮助。

编辑：找到了一个解决方案，绝对不是最有效的。如果有人有更快的方法，将改变接受的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:51:56.423

很抱歉，过了一段时间才回复您。我不认为有一种方法可以绕过使用 WHILE 循环来遍历这些日子，因为这样可以为您提供与用户输入范围进行比较所需的个别日子。我认为这个查询应该有助于提高速度，因为它不使用任何游标。我在 WHILE 循环中添加了逻辑，所以你只循环一次，结果就是你的临时表。变量名称可能有点不同，您可能会将 <= 切换为 < 或其他东西，但主要逻辑就在那里。

查询包括开始日期和结束日期，并设置为包括分配小于或等于用户输入的任何人。我希望它可以帮助你：

```
DECLARE @startDate datetime, @endDate datetime, @maxAllocation float, @dayCounter datetime

DECLARE @PeopleList TABLE (PersonId int, PersonName varchar(50))

SET @dayCounter = @startDate
WHILE @dayCounter <= @endDate
BEGIN
    INSERT INTO @PeopleList SELECT P.PersonId, P.PersonName FROM People P INNER JOIN Jobs J ON P.PersonId = J.AssignedPersonId
       WHERE J.StartDate <= @dayCounter AND J.StopDate >= @dayCounter
       GROUP BY P.PersonId, P.PersonName
       HAVING SUM(J.Allocation) <= @maxAllocation
    SET @dayCounter = DATEADD(DAY, 1, @dayCounter)
END

SELECT DISTINCT PersonId, PersonName FROM @PeopleList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:22:10.393

您的问题与 SSRS 无关。您只需要构建查询以提供 SSRS 上的数据集。我不关心数据如何到达数据源、查询、过程、临时表、魔术，就报告而言，它只关心字段名称。

因此，如果您无法将 linq 查询转换为 T-SQL 查询，我建议您在数据库上运行跟踪，从应用程序执行 linq 查询（然后您将在跟踪中看到 T-SQL），复制它并粘贴在报告的数据源上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:30:49.403

最终使用了 TSQL 存储过程，结合了临时表和嵌套游标。很可能不是最有效的解决方案，但希望它能帮助其他有同样问题的人。如果有人发布更有效的解决方案，我将更改接受的答案，因为这是我最初要求的。

```
 DECLARE @PeopleList TABLE(
                                          PersonID CHAR(15)
                                          )
      DECLARE @PersonValue CHAR(10)
      --Local busyList table with all dates in desired range
            DECLARE @DateValue DATETIME
            DECLARE @TotalAllocation FLOAT
            DECLARE @BusyList TABLE(
                                                DateInRange DATETIME,
                                                AllocationForDate FLOAT
                                                )
            DECLARE @dayCounter DATETIME
            SET @dayCounter = @startDate
            INSERT INTO @BusyList VALUES (@startDate, 0)
            WHILE @dayCounter<@endDate
            BEGIN
                  SET @dayCounter = @dayCounter + 1
                  INSERT INTO @BusyList VALUES (@dayCounter, 0)
            END

      DECLARE currentUser CURSOR LOCAL FAST_FORWARD FOR
      SELECT PersonID FROM [People]

      OPEN currentPerson
      FETCH NEXT FROM currentPerson INTO @PersonValue
      WHILE (@@FETCH_STATUS = 0)
            BEGIN
            DECLARE currentDay CURSOR LOCAL FAST_FORWARD FOR
            SELECT DateInRange FROM @BusyList

            OPEN currentDay
            SET @TotalAllocation = NULL
            UPDATE @BusyList SET AllocationForDate = 0
            FETCH NEXT FROM currentDay INTO @DateValue
            WHILE (@@FETCH_STATUS = 0)
                  BEGIN
                        SET @TotalAllocation = (SELECT SUM(TaskLevel) FROM Job WHERE AssignedPersonID = @PersonValue AND @DateValue BETWEEN Opportunity.StartDate AND Job.EndDate)
                        UPDATE @BusyList
                        SET AllocationForDate = @TotalAllocation WHERE (DateInRange = @DateValue)
                        FETCH NEXT FROM currentDay INTO @DateValue
                  END
            CLOSE currentDay
            DEALLOCATE currentDay
            IF EXISTS(SELECT * FROM @BusyList WHERE AllocationForDate <= @allocation OR AllocationForDate IS NULL)
                BEGIN
                INSERT INTO @PersonList VALUES (@PersonValue)
                END
            PRINT @PersonValue
            FETCH NEXT FROM currentUser INTO @PersonValue
            END

      SELECT * FROM [People] WHERE EXISTS (SELECT * FROM @PersonList Where [@PersonList].PersonID = [Person].PersonID)

      CLOSE currentPerson
      DEALLOCATE currentPerson 
```

# asp.net - 将获取变量（QueryString）添加到 FormView asp.net 中的 PostBackUrl

> ID：10399391
> 
> 赞同：1
> 
> 时间：2012-05-01T14:48:32.837
> 
> 标签：asp.net

我有以下代码：

```
<asp:Button ID="InsertButton" runat="server" CausesValidation="True" 
                                    CommandName="Insert" Text="Add Form" 
             PostBackUrl="~/APPLICATION/FormView.aspx?postquestion="/> 
```

我使用 FormView 控件。

我需要将 Request.QueryString["postquestion"] 变量添加到 PostBackUrl 的“FormView.aspx?postquestion="。

我在网上找到了以下代码，但是它不起作用：

```
PostBackUrl='<%# ="~/APPLICATION/FormView.aspx?postquestion=" + Request.QueryString  ["postquestion"].ToString() %>' 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:13:04.920

尝试分配`PostBackUrl`这样的代替：

```
<asp:Button ID="InsertButton" runat="server" 
    CausesValidation="True" 
    CommandName="Insert" 
    Text="Add Form"          
    PostBackUrl='<%# string.Format("~/APPLICATION/FormView.aspx?postquestion={0}", Request.QueryString["postquestion"]) %>' /> 
```

# php - php函数数组返回？

> ID：10399394
> 
> 赞同：1
> 
> 时间：2012-05-01T14:48:34.883
> 
> 标签：php, arrays, function

我想知道是否有一种方法可以从返回内联数组的函数中返回数组值。所以如果我有这样的功能：

```
class MyObj
{
    public function myFunction()
    {
         return array('arrayIndex'=>'myValue');
    }
} 
```

我希望能够做到这一点：

```
$object = new MyObj();
$myValue = $object->myFunction()['arrayIndex']; //but this doesn't work 
```

而不是这个：

```
 $object = new MyObj();
 $myArray = $object->myFunction();
 $myValue = $myArray['arrayIndex']; 
```

简单的问题，但我只是不知道是否可以以类似的方式引用它。所以是还是不是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:50:56.770

升级到 PHP 5.4，然后您可以进行[数组取消引用](http://schlueters.de/blog/archives/138-Features-in-PHP-trunk-Array-dereferencing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:52:31.453

关于什么

```
class MyObj
{
    public function myFunction($index)
    {
        $your_array = array('arrayIndex'=>'myValue');
        return $your_array[$index];
    }
}

f$object = new MyObj();
$myValue = $object->myFunction('arrayUndex'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:44:23.533

```
class MyObj
{
    public function myFunction()
    {
         return array($one,$two);
    }
}

f$object = new MyObj();
list($first,$second) = $object->myFunction(); 
```

# javascript - 用自己的修改版本替换任何单词

> ID：10399396
> 
> 赞同：1
> 
> 时间：2012-05-01T14:48:47.257
> 
> 标签：javascript, regex

我正在寻找一种简单的方法来转动这个字符串：

```
(java || javascript) && vbscript 
```

进入这个字符串：

```
(str.search('java') || str.search('javascript')) && str.search('vbscript') 
```

即用替换字符串中的每个单词`str.search('" + word + "')`

我已经查看了`mystring.match(/[-\w]+/g);`哪个会将任何单词拉入数组（但不是它们的位置）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:52:43.370

You can call `replace`:

```
mystring.replace(/[-\w]+/g, "str.search('$&')"); 
```

Note that this is an XSS hole, since the user input can contain `'`s.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:11:47.447

只是一个具有正确捕获并使用 1 作为回溯索引的固定版本。[请参阅String.replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)的“将字符串指定为参数”部分中的详细信息。

```
mystring.replace(/([-\w]+)/g, "str.search('$1')"); 
```

# java - 如何轻松地将 JSON 转换为字符串以进行日志记录

> ID：10399398
> 
> 赞同：1
> 
> 时间：2012-05-01T14:49:02.770
> 
> 标签：java, json, rest, jackson

我将尽可能清楚地解释我要完成的工作。

我正在编写一个 Web 应用程序的后端，该应用程序使用 REST API 来提取用于客户端报告的数据。我正在编写的框架使用 Codehaus jackson 来解析从 JSON 到数据对象（数据 bean）的请求。我有一堆这种类型的 API，10-15。他们每个人都从客户端获得不同的请求对象（尽管确实存在一些继承）。我想做的是为这些 API 中的每一个添加日志记录（使用 log4j），这样当我输入每个方法时，请求数据对象都会被记录下来。简单的解决方案是为这些数据对象中的每一个实现一个 toString() 方法，但我想避免遍历所有这些数据对象，看看是否有类似于杰克逊将 JSON 解析为对象的方式的解决方案。一世。

我认为有很简单的方法可以做到这一点。

这是 REST API 及其数据 bean 的示例：

```
@POST
@Path("/path123/")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Response getSomeData(@Context HttpServletRequest httpServletRequest, DataBeanExample bean){
    DataBeanExample resultBean;
    //DO SOME STUFF , for example take the bean, extract parameters from it and call some other api.
    return Response.ok(resultBean, MediaType.APPLICATION_JSON).build();

}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "DataBeanExample")

public class DataBeanExample{

@XmlElement(name = "timeFrame", required = true)
private String timeFrame = "";
@XmlElement(name = "timeFrom",required = true)
private long timeFrom;
@XmlElement(name = "timeTo",required = true)
private long timeTo;

public String getTimeFrame() {
    return timeFrame;
}

public void setTimeFrame(String timeFrame) {
    this.timeFrame = timeFrame;
}

public long getTimeTo() {
    return timeTo;
}

public void setTimeTo(long timeTo) {
    this.timeTo = timeTo;
}

public long getTimeFrom() {
    return timeFrom;
}

public void setTimeFrom(long timeFrom) {
    this.timeFrom = timeFrom;
} 
```

}

在示例中，我想做的是在“getSomeData”的开头获取对象 bean 并记录它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:58:27.953

可能这可能有效

```
new ObjectMapper().writeValue(System.out, dataBeanExampleInstance) 
```

或者`writeValueAsString`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-01T14:50:51.497

你知道吗：

JSON.stringify

# c# - 使用 C# 在 .net 中阅读 rss 提要的最佳方式

> ID：10399400
> 
> 赞同：110
> 
> 时间：2012-05-01T14:49:21.453
> 
> 标签：c#, rss, xmltextreader

*阅读RSS 提要*的最佳方式是什么？

我正在使用`XmlTextReader`来实现这一点。还有其他最好的方法吗？

```
XmlTextReader reader = new XmlTextReader(strURL);

DataSet ds = new DataSet();
ds.ReadXml(reader); 
```

使用阅读*RSS 提要*`XmlTextReader`后，有什么方法可以将数据填充到`ListItem`而不是`DataSet`？

![在此处输入图像描述](../Images/6f5941cf56c7b6a7fe20bf48889f7b1c.png)

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-01-08T19:00:52.740

添加`System.ServiceModel`参考资料

使用[`SyndicationFeed`](https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.syndication.syndicationfeed?redirectedfrom=MSDN&view=netframework-4.8)：

```
string url = "http://fooblog.com/feed";
XmlReader reader = XmlReader.Create(url);
SyndicationFeed feed = SyndicationFeed.Load(reader);
reader.Close();
foreach (SyndicationItem item in feed.Items)
{
    String subject = item.Title.Text;    
    String summary = item.Summary.Text;
    ...                
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-12-02T23:37:02.107

这是一篇旧文章，但如果你像我一样现在来到这里，为了节省人们一些时间，我建议你看看**CodeHollow.FeedReader**包，它支持更广泛的 RSS 版本，更易于使用并且看起来更健壮. [https://github.com/codehollow/FeedReader](https://github.com/codehollow/FeedReader)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-01T14:50:20.953

你正在寻找[`SyndicationFeed`class](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)，它正是这样做的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-27T04:24:30.953

用这个 ：

```
private string GetAlbumRSS(SyndicationItem album)
    {

        string url = "";
        foreach (SyndicationElementExtension ext in album.ElementExtensions)
            if (ext.OuterName == "itemRSS") url = ext.GetObject<string>();
        return (url);

    }
    protected void Page_Load(object sender, EventArgs e)
    {
        string albumRSS;
        string url = "http://www.SomeSite.com/rss‎";
        XmlReader r = XmlReader.Create(url);
        SyndicationFeed albums = SyndicationFeed.Load(r);
        r.Close();
        foreach (SyndicationItem album in albums.Items)
        {

            cell.InnerHtml = cell.InnerHtml +string.Format("<br \'><a href='{0}'>{1}</a>", album.Links[0].Uri, album.Title.Text);
            albumRSS = GetAlbumRSS(album);

        }

    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-17T16:11:35.120

更新：这仅支持 UWP - **Windows Community Toolkit**

现在有一个更简单的方法。您可以使用[RssParser](https://docs.microsoft.com/en-us/windows/communitytoolkit/parsers/rssparser?WT.mc_id=AZ-MVP-5001828)类。示例代码如下。

```
public async void ParseRSS()
{
    string feed = null;

    using (var client = new HttpClient())
    {
        try
        {
            feed = await client.GetStringAsync("https://visualstudiomagazine.com/rss-feeds/news.aspx");
        }
        catch { }
    }

    if (feed != null)
    {
        var parser = new RssParser();
        var rss = parser.Parse(feed);

        foreach (var element in rss)
        {
            Console.WriteLine($"Title: {element.Title}");
            Console.WriteLine($"Summary: {element.Summary}");
        }
    }
} 
```

对于非 UWP，请`System.ServiceModel.Syndication`按照其他人的建议使用命名空间中的 Syndication。

```
public static IEnumerable <FeedItem> GetLatestFivePosts() {
    var reader = XmlReader.Create("https://sibeeshpassion.com/feed/");
    var feed = SyndicationFeed.Load(reader);
    reader.Close();
    return (from itm in feed.Items select new FeedItem {
        Title = itm.Title.Text, Link = itm.Id
    }).ToList().Take(5);
}

public class FeedItem {
    public string Title {
        get;
        set;
    }
    public string Link {
        get;
        set;
    }
} 
```

# php - 扩展在打开的购物车上不起作用

> ID：10399411
> 
> 赞同：0
> 
> 时间：2012-05-01T14:49:41.933
> 
> 标签：php, ajax, opencart

我已经安装了[vqmod_admin_ajax_edit_quantity](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=5445&path=21&page=2)

将 XML 文件放在网站上。

然后它会告诉您 自定义链接保存`Set $_['text_save']`并关闭`$_['text_close']``admin/language/*/catalog/product.php`

但是当我添加

```
$_['text_save'] 
$_['text_close'] 
```

我得到语法错误..所以我把

```
$_['text_save'] = 'Save',
$_['text_close'] = 'Close', 
```

然后出现语法错误，`unexpected ','`

我在这里添加它：

```
/admin/language/english/catalog.product.php 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:41:49.353

要使用的正确语法是

```
$_['text_save'] = 'Save';
$_['text_close'] = 'Close'; 
```

# php - PHP解析器在阅读评论时是否需要微时间

> ID：10399414
> 
> 赞同：3
> 
> 时间：2012-05-01T14:50:01.093
> 
> 标签：php, parsing, time, process, comments

**仔细读**

这里的问题不在于 PHP 解析器是否处理注释，也不是关于省略注释是否会给您的脚本带来更多性能！

它是关于**“PHP 解析器在阅读评论时会花一点时间吗？”**

**我为什么要问？**

由于 Internet World 对这个问题的误解。一些程序员说“是”，一些程序员回答“否”。我应该拒绝谁？

编辑：（在获得大部分评论和声称在评论上花费微时间的回答之后）

**看看我这里有什么**

```
<?php

// Control
echo microtime(), "<br />"; // 0.25163600 1292450508
echo microtime(), "<br />"; // 0.25186000 1292450508

// Test
echo microtime(), "<br />"; // 0.25189700 1292450508
# TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST
# .. Above comment repeated 18809 times ..
echo microtime(), "<br />"; // 0.25192100 1292450508

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:58:54.183

即使它需要一些微秒（是的，你的文件必须被解析，对吧？！），你不应该删除它们。首先要做的是缓存字节码，因此 PHP 解释器不必将“纯文本”代码重新解析为字节码。我认为您可以从中获得更多的性能提升，而不必担心注释会占用解析时间。

它似乎确实与[这篇文章](https://stackoverflow.com/questions/4445364/do-php-comments-take-server-time)重复。（请注意，提交前先刷新页面。）

# android - 带有向量的自动完成功能 - android

> ID：10399416
> 
> 赞同：0
> 
> 时间：2012-05-01T14:50:06.050
> 
> 标签：android

我的应用程序中有一个这样的向量：

```
 Vector<Firm> firmVector= new Vector<Firm>(); 
```

如您所见，这是我自己的类中的对象向量`Firm`

所以对于我的问题，是否可以在`AutoComplete`这个“向量”中添加一个？

像这个，来自[developer.android.com](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html)：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  AutoCompleteTextView textView = (AutoCompleteTextView)findViewById(R.id.autocomplete_country);
  ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES);
  textView.setAdapter(adapter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:04:35.743

`getFilter()`是的，您可以通过实现 ArrayAdapter 来做到这一点，但您需要实现`AutoCompleteTextView`. 与此类似的东西可能会起作用：

```
 private class FirmAdapter extends ArrayAdapter<Firm> {
private Filter filter;
        @Override
        public Filter getFilter() 
        {
            if(filter == null){
                filter = new Filter(){
                    int lastlen = 0;
                    boolean initialized = false;

                    @SuppressWarnings("unchecked")
                    @Override
                    protected void publishResults(CharSequence constraint, FilterResults results)
                    {
                        filteredItems = (List<Firm>)results.values;
                        ArrayAdapter.this.notifyDataSetChanged();
                    }

                    @Override
                    protected FilterResults performFiltering(CharSequence constraint)
                    {
                        FilterResults results = new FilterResults();
                        if(constraint == null || constraint.length() == 0){
                            results.values = null;
                        }else{
                            String val;
                            Firm obj;
                            constraint = constraint.toString().toUpperCase();
                            int newlen = constraint.length();
                            LinkedList<Firm> filteredResults = new LinkedList<Firm>();
                            if(newlen < lastlen){
                                int i = 0, size = ArrayAdapter.super.getCount();
                                for(i=0;i<size;i++){
                                    obj = ArrayAdapter.super.getItem(i);
                                    val = obj.toString(); // CUSTOMIZE THIS
                                    if(val.contains(constraint)) filteredResults.add(obj);
                                }
                            }else{
                                int i = 0, size = getCount();
                                for(i=0;i<size;i++){
                                    obj = getItem(i);
                                    val = obj.toString(); // CUSTOMIZE THIS
                                    if(val.contains(constraint)) filteredResults.add(obj);
                                }
                            }
                            lastlen = newlen;
                            results.values = filteredResults;
                        }
                        return results;
                    }
                };
            }
            return filter;
        }
    }
} 
```

我从我的一个项目中删除了这个，所以它需要一些测试和清理才能开始工作（在我的情况下，我在一组`JSONObject`实例上有一个过滤器，你有一个`Firm`）但是尝试类似的东西。带有的注释`CUSTOMIZE THIS`是您希望根据输入到`AutoCompleteTextView`.

# python - Mask numpy array with a range of values

> ID：10399437
> 
> 赞同：0
> 
> 时间：2012-05-01T14:51:26.087
> 
> 标签：python, numpy

I have a numpy structured array with one of the columns called 'time' I want to restrict my data where the `'time'` column is in a certain range. I tried this:

```
time_restricted_data = Data[ (Data['time'] > 0.6) & (Data['time'] < 0.7) ] 
```

But that returned all the data where `Data['time'] > 0.6`.

Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:29:43.133

Something is wrong in your example, i.e. I can't confirm it, and I think what you wrote should work as expected:

```
In [19]: Data = np.zeros(100,dtype=[('time', np.float), ('y',np.float)])

In [20]: Data['y'] = np.random.uniform(size=100)

In [21]: Data['time'] = np.random.uniform(size=100)

In [22]: print Data[ (Data['time'] > 0.6) & (Data['time'] < 0.7) ]
[(0.6309334093696576, 0.5898588768194092)
 (0.6026040512366535, 0.4260650141076221)
 (0.6587399844526572, 0.033397798015253444)
 (0.6863639946779522, 0.67002523603246)
 (0.6522035987367735, 0.948019085443445)
 (0.6809894254849801, 0.5131390279565994)
 (0.6311277013562147, 0.5746610745753917)
 (0.6324174554481182, 0.8587836614681397)
 (0.6542221804687635, 0.9706926940115863)
 (0.671321726341415, 0.7446681474117195)] 
```

# php - 使用单个查询计算重复项和更新表

> ID：10399439
> 
> 赞同：0
> 
> 时间：2012-05-01T14:51:30.313
> 
> 标签：php, mysql, sql

我有一张有几千条记录的表。我想更新具有重复名字的所有记录如何通过单个查询实现此目的？示例表结构：

```
Fname varchar(100)
Lname varchar(100)
Duplicates int 
```

必须使用单个查询的重复总数更新此重复列。如果不循环运行，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:01:25.680

> 我有一张有几千条记录的表。我想更新具有重复名字的所有记录如何通过单个查询实现此目的？

您确定要*存储*所谓的重复项的数量吗？如果没有，这是一个相当简单的查询：

```
SELECT fname, COUNT(1) AS number FROM yourtable GROUP BY fname; 
```

不过，我不明白您为什么要存储该号码。如果插入了另一条记录怎么办？如果有记录被删除怎么办？“重复数”将保持不变，因此在第一次突变时会变得不正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:57:46.130

```
update table as t1
inner join ( 
select
fname,
count(fname) as total
from table
group by fname) as t2
on t1.fname = t2.fname
set t1.duplicates = t2.total 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:57:32.750

首先创建列，然后编写如下查询：

```
UPDATE table SET table.duplicates = (SELECT COUNT(*) FROM table r GROUP BY Fname/Lname/some_id) 
```

也许这个其他SO会有所帮助？

[如何从 SQL Server 中的 SELECT 更新？](https://stackoverflow.com/questions/2334712/sql-server-update-from-select)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-01T14:56:22.930

您可能无法做到这一点。您无法更新您在同一查询中选择的同一个表。

# javascript - jquery mobile trigger 'create' not working except the first time

> ID：10399442
> 
> 赞同：4
> 
> 时间：2012-05-01T14:51:42.683
> 
> 标签：javascript, jquery, ajax, jquery-mobile

I am using jQuery Mobile to create a site, in the index page I placed here a form for a search. I hooked submit event for ajax post. When ajax success get the resource (html,`<ul>...</ul>`), placed in the target container, then trigger the create event for enhance the view. This work fine in the first time. When I click back to index page and search again I got a raw listview without enhance, who can tell me why? ps: I have tried many methods but there is more and more problem, the official document was so poor.

```
$(document).bind('pageinit',function(){
        $("#search").submit(function(){
            var searchdata = $("#search").serialize();

            $.ajax({
                'type':"POST",
                'url':"/server/jnulib.php?action=search",
                'data':searchdata,
                'success':function(data){
                    $("#searchresultfield > ul").remove();
                    $("#searchresultfield").html(data).find('ul').trigger('create');

                    try{
                        $("#searchresultfield > ul").listview('refresh');
                    }catch(e){

                    }

                    $.mobile.changePage("#searchresult");
                       //$("div[data-role='header'] > a").
                }
            });

            return false;
        });
    }); 
```

EDIT： Test Url： [http://ijnu.sinaapp.com](http://ijnu.sinaapp.com) Another problem: the second ajax request failed and the browser navigate to the ajax target straightly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:21:04.823

对我来说， `.trigger('create');`如果应用于元素，总是有效的`data-role="page"`

例如

HTML 代码

```
<div data-role="page" id="somePage">
...
</div> 
```

Javascript代码

```
$('#somePage').trigger('create'); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:00:59.990

You could try changing:

```
$("#searchresultfield").html(data).find('ul').trigger('create'); 
```

to:

```
$("#searchresultfield").html(data).find('ul').listview().listview('refresh'); 
```

Anytime you append or remove elements you need to refresh, and if you remove the whole list, you need to reinitialize it.

Also I have had issues with listview('refresh') rendering improperly if it was not visible.

```
$(document).on('pageshow','div',function(event, ui){
 if($("#searchresultfield > ul").is(":visible")) $("#searchresultfield > ul").listview('refresh');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T03:17:37.463

尝试：

```
$("#searchresultfield > ul").empty(); 
```

代替

```
$("#searchresultfield > ul").remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:01:19.023

也许您应该在处理完提交事件后尝试取消挂钩。并在您返回之前的页面后再次启动它。多次添加事件处理程序会导致很多问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T08:45:45.100

我认为问题在于 jquery mobile 会加载所有页面，尽管所有页面都来自不同的文件到一个大页面中，并且导航基于转到此页面中的不同点，因此当您第一次进入该页面时会考虑您访问的页面但是，当单击后退按钮并离开该页面时，该页面仍被视为已创建，因此该事件不会再次触发，

我用的是：

```
$('#oppList').live('pageshow',function(event){
    getList();

}); 
```

#opplist 是我刚刚加载的页面的 data-role="page" 的 id，无论是第一次加载页面还是之后发生这种情况都无关紧要，因为每当显示页面时都会触发事件。

在这里查看[敌人 jquery 移动事件](http://jquerymobile.com/test/docs/api/events.html)

另请参阅此处了解[jquery 移动导航](http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-navmodel.html)

希望这可以帮助 ！

# c# - 如何解决无法从父级转换到子级的问题

> ID：10399443
> 
> 赞同：0
> 
> 时间：2012-05-01T14:51:51.800
> 
> 标签：c#

我已经读过你不能把父母投给孩子的原因：你不能把动物投给狗；它可能是一只猫。

但这是我的问题：

我从我的数据层收到一个具有 50 个属性的数据对象。现在我创建了这个对象的一个​​子对象，只有一个属性。

在我的函数中，我想用基础对象的 50 个和一个额外的来填充对象的所有 51 个属性。

所以我正在寻找一种将父对象的 50 个属性“复制”到子对象的方法。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:31:17.703

这很可能是您不想使用继承的时候。要做到这一点，新的 Type 不会从任何东西继承，并且有两个属性，一个是旧类型（您当前正在考虑用作父类型），另一个是新数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:57:49.577

您可以使用复制构造函数来基于父对象创建新的子对象。您甚至可以在父类中创建一个复制构造函数，并在创建新子类时使用该构造函数。

```
public Parent (Parent other)
{
   //copy other.Properties to this.Properties
}

public Child (Parent other) : base(other)
{
   //populate property 51
}

public Child (Child other) : base(other)
{
   //copy property 51
} 
```

如果您希望将属性复制到现有实例，您可能需要为此创建一个单独的方法。

```
public void Assimilate(Parent other)
{
   //copy parent's properties
}

public void Assimilate(Child other)
{
   //copy child's properties
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:16:55.533

基于复制构造函数的通用解决方案有两种方法（即一种不涉及每个属性的手动复制和相关的维护噩梦）：

1.  使用反射制作浅拷贝。 [这里的例子](http://www.dotnetspider.com/resources/4683-Copy-Constructor-C-using-Reflection.aspx)

2.  使用序列化进行深度复制（将基础对象序列化为内存流，然后将其序列化为派生对象）。[此处示例](http://geekswithblogs.net/mnf/archive/2009/07/17/implement-copy-constructor-using-serialization-or-reflecton.aspx)的第一部分讨论了序列化（文章讨论了这两种方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:11:52.913

这是您问题的一面（复制构造函数的答案似乎是一种可能的方法），但请注意，您*可以*从基类转换为子类，但不能保证像从子类转换一样成功-类到一个基地。见下文：

```
public class Base
{
}

public class Child1 : Base
{
}

public class Child2 : Base
{
}

main()
{
    Child1 ch1 = new Child1();
    Child2 ch2 = new Child2();

    Base myBase;
    myBase = ch1; // Always succeeds, no cast required
    myBase = ch2; // Always succeeds, no cast required

    // myBase contains ch2, of type Child2
    Child1 tmp1;
    Child2 tmp2;

    tmp2 = (Child2)myBase;   // succeeds, but dangerous
    tmp2 = mybase as Child2; // succeeds, but safer, since "as" operator returns null if the cast is invalid
    tmp1 = (Child1)myBase;   // throws a ClassCastException and tmp1 is still unassigned
    tmp1 = myBase as Child1; // tmp1 is now null, no exception thrown

    if(myBase is Child1)     
    {
        tmp1 = (Child1)myBase; // safe now, as the conditional has said it's true
    }
    if(myBase is Child2)     // test to see if the object is the sub-class or not
    {
        tmp2 = (Child2)myBase; // safe now, as the conditional has said it's true
    } 
} 
```

我希望这是有道理的。如果你只是盲目地施放它，它可能会抛出异常。如果使用`as`关键字，它要么成功，要么返回 null。`is`或者您可以在分配它之前使用 if 语句和关键字预先“测试”它。

# c# - Asp.Net MVC3 - 我可以调用一个字段“Id”并且不让它包含页面ID吗？

> ID：10399445
> 
> 赞同：0
> 
> 时间：2012-05-01T14:52:11.827
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个 ASP.NET MVC 页面的问题，该页面显示了正在分派到特定位置的订单列表。该页面被调用`Orders/DispatchToCentre/2`，其中 2 是数据库中中心的 ID，它显示正常。

问题是我希望能够回发对页面上订单的更改，所以我这样做：

```
<dl class="orders">
@foreach (OrderViewModel ovm in Model)
{
    <dd>@ovm.User.Name </dd>
    <dt>
    @Html.Partial("OrderTable", ovm)
    <p>
    @using (Html.BeginForm("Dispatch", "Order", new { id = ovm.Id }, FormMethod.Post ) )
    {
       @Html.TextBox("id", ovm.Id );
       @Html.Hidden("OriginatingPage", Request.Path);
       <input type="submit" name="submit-@ovm.Id" value="Order dispatched" />         
    }   
    </p>

    </dt>
}
</dl> 
```

问题是，当我查看页面源时，我得到了这个：

```
 <p>
    <form action="/Order/Dispatch/3f180e5b-d112-4245-98ef-602e86eccda6" method="post">
      <input id="id" name="id" type="text" value="2" />
      <input id="OriginatingPage" name="OriginatingPage" type="hidden" value="/Order/DispatchToCentre/2" />       
      <input type="submit" name="submit-3f180e5b-d112-4245-98ef-602e86eccda6" value="Order dispatched" />         
    </form>    
  </p> 
```

`id`输入似乎完全忽略了`OrderViewModel.Id`我明确将其设置为（这应该是一个 Guid ）并自动将自己设置为使用路径中的 Center Id 。

是否需要使用一些配置来避免这种干扰自动性，或者我最好只是忽略这里的助手并手动创建字段？显然，后者是一项相当微不足道的任务，但如果我在概念上误解了 Razor 渲染操作的某些重要方面，或者我只是遇到了一个怪癖，这将有助于理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:02:50.517

在控制器、`HttpGet`动作中，在返回视图之前，您应该调用

```
ModelState.Remove("id"); 
```

事实上，`ModelState`它在提供模型值方面比模型本身具有更高的优先级，因此来自 ModelState 的值总是优先于模型值（如果有的话）

# zend-framework - Zend_Form int 验证..？

> ID：10399447
> 
> 赞同：5
> 
> 时间：2012-05-01T14:52:26.850
> 
> 标签：zend-framework, zend-form

在 Zend 框架中是否有一个标准验证器用于我只想作为数字的输入？它是我注册表中的年龄字段，所以我显然只想要数字。

像 addValidator('NumbersOnly');

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T15:15:06.543

您可以使用 Digits 验证器类

```
addValidator('Digits') 
```

# nhibernate - 一对多关系的 NHibernate 聚合查询

> ID：10399448
> 
> 赞同：2
> 
> 时间：2012-05-01T14:52:27.223
> 
> 标签：nhibernate, linq-to-nhibernate

我有下一个实体：

```
class Topic
{
    public virtual int Id {get; private set;} 
    public virtual ICollection<Vote> Votes {get; private set; }
}

class Vote
{
    public virtual Topic Topic {get; private set;}
    public virtual VoteType VotedTo {get; private set;} // enum VotedUp, VotedDown
} 
```

我需要从数据库加载下一个信息 - 所有主题（ID，实际上是名称，但在这个演示案例中并不重要）和另外两个字段**CountOfVotedUp, CountOfVotedDown (aggregates)**。因此，据我所知，在 SQL 世界中，我们需要联接、分组、大小写和计数。

是否可以使用 LINQ 获取此信息而对 db 的操作更少？我的意思是 N+1，额外的选择，连接等。

我所尝试的只是使用 NH 的 LINQ，但它的查询聚合仅在 Topic.Id 上，我无法计算任何 Votes 集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:54:59.977

如果您有一个汇总类来存储您的结果：

```
public class  SummaryDTO
{
    public int TopicId { get; set; }
    public VoteType TypeOfVote { get; set; }
    public int VoteCount { get; set; }
} 
```

然后

```
Vote voteAlias = null;
SummaryDTO result = null;

youNHSession.QueryOver<Topic>()
  .JoinAlias(x=> x.Votes, ()=>voteAlias)
  .SelectList(
    list=>list
      .SelectGroup(topic=>topic.Id).WithAlias(()=>result.TopicId)            
      .SelectGroup(()=>voteAlias.VotedTo).WithAlias(()=>result.TypeOfVote)
      .SelectCount(()=>voteAlias.VotedTo).WithAlias(()=>result.VoteCount ))
  .TransformUsing(Transformers.AliasToBean<SummaryDTO>())
  .List<SummaryDTO>(); 
```

我想这不是您正在寻找的，但希望这会让您走上正轨。

# java - 使用 void 方法和对象数组作为参数的 EasyMock 期望？

> ID：10399454
> 
> 赞同：0
> 
> 时间：2012-05-01T14:52:46.800
> 
> 标签：java, unit-testing, mocking, testng, easymock

当使用 EasyMock 为 void 方法设置期望值时，是否可以指定一个 Object 数组作为该方法的参数之一？

例如，如果我们有这样的事情：

```
Errors mockErrors = createMock(Errors.class);
...
mockErrors.rejectValue(Object[]{"5", "2"});
mockErrors.replay();

classUnderTest.someMethod(); 
```

在 ClassUnderTest 中， someMethod 调用 rejectValue(Object[]{"5", "2"});

然而，尽管期望被设置为被调用的确切内容，easy mock 抱怨意外的方法调用。

```
>     Unexpected method call rejectValue(["5", "2"]):
>         rejectValue(["5", "2"]): expected: 1, actual: 0 
```

我认为这是因为在引擎盖下它依赖于 Object[] 上的 equals 方法，并且由于两者不同，它返回 false 并且不满足条件。

有办法解决吗？因为我没有使用 expect() 设置期望，所以我可以使用 any() ...有没有办法在 void 方法上做同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:59:12.610

```
mockErrors.rejectValue(aryEq(new Object[] {"5", "2"})); 
```

有关详细信息，请参阅[javadoc](http://www.easymock.org/api/easymock/3.1/org/easymock/EasyMock.html#aryEq%28T%5B%5D%29)。

# c# - Asp.net 中的调度。最好的解决方案是什么？

> ID：10399455
> 
> 赞同：0
> 
> 时间：2012-05-01T14:52:49.470
> 
> 标签：c#, asp.net, windows-services, scheduled-tasks

我想在 Asp.net 中调度

我有以下选项来实现这个

1.  编写 SQLServer JOB（我不想这样做。不想离开 .Net 环境）

2.  第二个选项是我将编写 windows 服务，这个窗口服务将调用 asp.net webservice 然后这个 webservice 调用 asp.net 方法
    （我也不需要这样做，因为我的托管服务提供商可能不允许我安装窗口服务）

3.  第三个选项是我在全局类的 Application_Start 事件中调用我的调度方法（缺点是，网络服务器会随时终止线程）

4.  在主页的 Page_Load 事件中调用调度代码（可能几个小时没有人访问我的网站，页面执行也可能由于调度代码而变慢）

5.  我还发现一些在线服务会以给定的时间间隔调用您的页面，下面给出了一些

    [http://www.cronservice.co.uk/new/](http://www.cronservice.co.uk/new/) http://scheduler.codeeffects.com

**任何人都给我投注者解决方案，并解释为什么它是投注者？**

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:00:39.200

ASP.NET 应用程序不是实现调度的正确位置。我建议创建一个在短时间内运行的服务或计划任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:07:28.590

在共享托管环境中，您没有太多选择。我的主机 (WinHost) 允许远程访问他们的数据库，因此我能够使用任务计划程序创建在本地服务器上运行的可执行文件。

由于数据库是通过 Internet 访问的，因此性能不是很好，但它仍然比尝试使用 ASP.NET 运行伪计划任务要好。

一些主机还提供一项服务，该服务将按计划在您的站点内请求一个 URL。但是，这对我不起作用，因为我必须运行的任务比请求超时时间长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:02:41.993

没有一种解决方案适合所有人。SQL 作业和 windows 作业（通过[windows 任务调度程序调度](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)）被广泛使用。在我以前的工作地点之一，他们的工作可以在多个平台（大型机、Windows、SQL 服务器）上运行。其中一些工作的失败，每天将造成数千美元的损失。所以他们采用了一种叫做 ESP 的东西。该软件监控所有平台上的作业，并在出现故障时向控制室发送消息。

如果您对要求有更多了解，我们可能会为您提供更好的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:05:32.093

ASP.NET 不是存放计划任务的正确位置。当我必须创建计划任务时，我正在使用 Quartz.net。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T15:06:21.990

创建一个启动任务的页面并将其放置在 URL [http://www.mydomain.com/runtask](http://www.mydomain.com/runtask)中。

[在您的家用 PC 上创建一个向http://www.mydomain.com/runtask](http://www.mydomain.com/runtask)发送请求的计划任务。

您需要始终保持家用 PC 处于开启状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T15:07:57.187

理想情况下，当您获得完全控制/历史记录/错误报告等时，我会选择 1。您可以在 .NET 中编写 SSIS 作业并让 SQL 服务器安排它。

但是，我在共享主机方面遇到了类似的问题，该问题非常严格。我所做的是创建一个页面，该页面在页面加载时运行该过程（使用查询字符串中的验证以确保安全）。然后，我使用我拥有的一台始终开启的机器来安排 Windows 任务计划程序（这是标准的 Windows 的一部分）来调用一些 VB 脚本，该脚本打开浏览器然后关闭它。

# spring - Submit Datatable: Spring

> ID：10399460
> 
> 赞同：0
> 
> 时间：2012-05-01T14:53:10.123
> 
> 标签：spring, jsp, spring-mvc

I have a datatable on my jsp populated by a "java.util.Set" collection that came from a Hibernate search. I want to make this datatable editable and then save the edited table on my database. I'm able to do it if the datatable is formed through List collection object. All my POJO objects are formed with Set Collection and I'm trying to avoid changing all of them.

I'm using Spring MVC and as I told before Hibernate.

Thanks. Regards.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:05:04.317

似乎可以使用 Set 在 JSP 中显示数据，但您不能修改它们。看看这个[链接](http://forum.springsource.org/showthread.php?12914-How-to-bind-a-java-util-Set)。

# javascript - 何时保证元素可聚焦？

> ID：10399461
> 
> 赞同：0
> 
> 时间：2012-05-01T14:53:15.587
> 
> 标签：javascript, jquery, dom

如果 dom 元素是`:visible`，它是否总是可聚焦的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:55:17.430

不，您不能（例如默认情况下）聚焦 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:57:47.213

不能保证，但您可以检查元素是否会触发`focus`事件。

```
var focussableEls = [];
$(":visible").each({
    if (typeof this.focus == 'function')
        focussableEls.push(this.id);
});
console.log(focussableEls); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:04:09.560

检查具有`tabindex`属性的元素：

```
$('[tabindex]') 
```

# security - Do email forms need to be santized before sending?

> ID：10399464
> 
> 赞同：2
> 
> 时间：2012-03-22T15:23:14.387
> 
> 标签：security, email

I have a client that keeps getting reports from godaddy's "websiteprotection.com" stating how the website is insecure.

> Your website contains pages that do not properly sanitize visitor‑provided input to make sure it contains no malicious content or scripts. Cross‑site scripting vulnerabilities let malicious users execute arbitrary HTML or script code in another visitor's browser.
> 
> Output:
> 
> The request string used to detect this flaw was : /cross_site_scripting.​nasl.asp The output was : HTTP/1.1 404 Not Found\r Date: Wed, 21 Mar 2012 08:12:02 GMT\r Server: Apache\r X-Pingback:http://​CLIENTSWEBSITE.com/​xmlrpc.php\r Expires: Wed, 11 Jan 1984 05:00:00 GMT\r Cache-Control: no-cache, must-revalidate, max-age=0\r Pragma: no-cache\r Set-Cookie: PHPSESSID=​1jsnhuflvd59nb4trtquston50; path=/\r Last-Modified: Wed, 21 Mar 2012 08:12:02 GMT\r Keep-Alive: timeout=15, max=100\r Connection: Keep-Alive\r Transfer-Encoding: chunked\r Content-Type: text/html; charset=UTF-8\r \r

```
<div id="contact-form" class="widget"><form action="http://​CLIENTSWEBSITE.c
     om/<script>cross_site_​scripting.nasl</script>.asp" id="contactForm"
     meth od="post"> 
```

It looks like it has an issue with the contact form. All the contact form does is posts an ajax request to the same page, and than a PHP script mails the data (no database stuff).

Is there any a security issues here? Any ideas on how I can satisfy the security scanner?

Here is the form and script:

```
<form action="<?php echo $this->getCurrentUrl(); ?>" id="contactForm" method="post">
    <input type="text" name="Name" id="Name" value="" class="txt requiredField name" />
    //Some more text inputs

    <input type="hidden" name="sendadd" id="sendadd" value="<?php echo $emailadd ; ?>" />
    <input type="hidden" name="submitted" id="submitted" value="true" /><input class="submit" type="submit" value="Send" />
    </form>
    // Some initial JS validation, if that passes an ajax post is made to the script below

    //If the form is submitted
    if(isset($_POST['submitted'])) {

    //Check captcha 
if (isset($_POST["captchaPrefix"])) {

$capt = new ReallySimpleCaptcha();
$correct = $capt->check( $_POST["captchaPrefix"], $_POST["Captcha"] );
if( ! $correct ) { echo false; die(); } else {
$capt->remove( $_POST["captchaPrefix"] );
}

}

$dateon = $_POST["dateon"]; 
$ToEmail = $_POST["sendadd"]; 
$EmailSubject = 'Contact Form Submission from ' . get_bloginfo('title'); 
$mailheader = "From: ".$_POST["Email"]."\r\n"; 
$mailheader .= "Reply-To: ".$_POST["Email"]."\r\n"; 
$mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 

$MESSAGE_BODY = "Name: ".$_POST["Name"]."<br>"; 

$MESSAGE_BODY .= "Email Address: ".$_POST["Email"]."<br>"; 

$MESSAGE_BODY .= "Phone: ".$_POST["Phone"]."<br>"; 

if ($dateon == "on") {$MESSAGE_BODY .= "Date: ".$_POST["Date"]."<br>";}

$MESSAGE_BODY .= "Message: ".$_POST["Comments"]."<br>"; 

mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 

echo true; die(); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-03-22T15:47:57.807

I'm not sure I understand what's going on here, but are they complaining about the data going from the form to the "http://website/script.asp" without being checked?

Because, if so, then that's just ridiculous because even if you *chose* to do some JavaScript / other client-side checking, one should never rely on it. All the sanitisation should be done server side, which I presume it is?

Could you post the original script for clarity?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-03-22T15:49:06.213

It's a security risk because it's possible to type `<script>cross_site_​scripting.nasl</script>`.asp into a form (or a hidden element), and have it appear on your pages. That lets other websites inject arbitary code into your website. If you're *just* using a contact form and have no user login or cookies, then this is just a spam risk.

(Post the HTML/PHP which generates the form, and this may become clearer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:06:39.107

Your script is immediately at risk because you're blindly using $_POST for your email headers. This could allow a person to manipulate the header of the email to send to a wildcard email address, or simply use your form on your server to send spam to others.

With a content type of HTML, you should run `htmlentities()` on the user input ( Assuming you don't really want them to have HTML fire off in an email viewer as mentioned).

Additionally, look into `filter_input()` to ensure the email address they're entering is valid and not header injection.

[http://us2.php.net/manual/en/function.filter-input.php](http://us2.php.net/manual/en/function.filter-input.php)

# iphone - iPhone iOS Dropbox SDK how to sync in background?

> ID：10399468
> 
> 赞同：0
> 
> 时间：2012-05-01T14:53:29.190
> 
> 标签：iphone, objective-c, ios, dropbox, background-process

I'm working with the CHDropboxSync example and got it to perform sync of my core data over to dropbox and back. It uses RestKit for object mapping. The current implementation relies on DBRequest for network operations, and is not background - task friendly.

Has anyone managed to get dropbox to sync files in background on iPhone? How can I get a list of DBRequests to execute once an application enters background mode? **Is there something within the Dropbox SDK, like a request queue, that can be easily configured to continue executing in background?**

I'm looking at ASIHTTPRequest, because it is capable of continuing in the background, but it seems like I'll have to rewrite quite a lot of code if I want to use that with the dropbox SDK.

I would imagine that including core data into the equation makes things a lot more complicated due to the whole NSManagedObjectContext and threading issues.

Thank you for any input! I'm very new to network based file synchronization, and would appreciate if someone can point me to a demo project that deals with dropbox sync in background.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:25:24.680

1.  后台的东西可以在这里找到（尝试与 GCD 一起使用）：[Background tasks iPhone](https://stackoverflow.com/questions/7367644/background-tasks-iphone)

2.  虽然 CHDropboxSync 可能没问题，但请考虑编写自己的同步代码：[基本同步算法](http://datsafail.blogspot.com/2012/07/basic-syncing-algorithm.html)

3.  如果您无法让 Dropbox SDK 执行此操作，请尝试使用 Dropbox REST API 执行手动请求。请参阅 MGTwitterEngine 了解如何进行 OAuth 等。

# c - calloc 调用失败，代码崩溃

> ID：10399473
> 
> 赞同：1
> 
> 时间：2012-05-01T14:53:59.173
> 
> 标签：c, crash, gdb

我有一段 C 代码如下，它在下面的 calloc() 调用中崩溃：

```
... some code
free (ipl->fldptr);
ipl->fldptr = calloc (flds*4, sizeof(struct fldptr_type));
...some more code 
```

我试图 gdb 它并在崩溃时得到以下回溯：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000003ade478f94 in _int_malloc () from /lib/libc.so.6
Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.7.el6.x86_64 libgcc-4.4.4-13.el6.x86_64 libstdc++-4.4.4-13.el6.x86_64
(gdb) bt
#0  0x0000003ade478f94 in _int_malloc () from /lib/libc.so.6
#1  0x0000003ade4796d8 in calloc () from /lib/libc.so.6
#2  0x0000000000daf00d in myfunction (ipl=0x106f75f0, flds=11)
    at myfile.c:1286 
```

作为调试的一部分，我在 gdb 提示符下执行以下操作：

第 2 帧转到该用户代码堆栈帧并打印变量的值（flds，指针（ipl），它们似乎没问题。显然没有 NULL 取消引用。

但是 calloc() 仍然失败并且它在那里崩溃。这段代码之前成功执行了多次，但是当应用程序运行一段时间后它会崩溃。（内存泄漏？？试图让 valgrind 在上面运行，但碰巧在 valgrind memcheck 工具下运行时，我的代码崩溃的行为是不可重复的）

我正在寻找一些指针来帮助我调试和修复这个问题。

一些相关信息 - gcc: 4.4.4 。红帽企业 Linux 服务器 6.0 64 位 Linux

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:56:27.673

你可能有一个损坏的堆，例如一些内存`free`太早 -d （并且仍然被重用），或者一些缓冲区溢出（或无效访问，如`ptr[-3]`）

您应该使用[valgrind](http://valgrind.org/)来调试此类问题。

您也可以使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc)。

您还可以手动搜索此类错误，使用`gdb`. 使用`watch`gdb 命令并禁用[地址空间布局随机化](http://en.wikipedia.org/wiki/Address_space_layout_randomization)应该会有所帮助。

我还建议始终清除您拥有`free`-d 的指针，因此在代码中的任何地方都替换`free(x)` 为`free(x), x=NULL`（因此，如果`x`被错误地取消引用，您将`SIGSEGV`立即获得）。

您还可以使用具有堆栈保护器功能的更新版本的 GCC（当前版本为 4.7）。看到[这个问题](https://stackoverflow.com/q/1629685/841108)。

# locking - Ticket lock algorithm performance?

> ID：10399474
> 
> 赞同：3
> 
> 时间：2012-05-01T14:54:04.227
> 
> 标签：locking, pthreads

Is anyone familiar with the ticket lock algorithm which replaces the basic spinlock algorithm in the linux kernel? I am hoping to find an expert on this. I've read from a few online sources that the ticket lock algorithm is supposed to be faster, since the naive algorithm overwhelms the CPU bus with all threads trying to get the lock at the same time. Can anyone confirm/deny this for me?

I did some experiments of my own. The ticket lock is indeed fair, but its performance is just about on par with the pthread spinlock algorithm. In fact, it is just a touch slower.

The way I see it, an unfair algorithm should be a bit faster since the thread that hogs the lock early on finishes more quickly, giving the scheduler less work to do.

I'd like to get some more perspective on this. If it isnt faster, why is ticket lock implemented in the kernel and why is it not used in user space? thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T01:44:50.750

> 有没有人熟悉替换linux内核中基本自旋锁算法的票锁算法？我希望找到这方面的专家。我从一些在线资源中了解到票证锁定算法应该更快，因为天真的算法使 CPU 总线不堪重负，所有线程都试图同时获得锁定。任何人都可以为我确认/否认这一点吗？
> 
> 我自己做了一些实验。票证锁确实是公平的，但它的性能与 pthread 自旋锁算法差不多。事实上，它只是慢了一点。

我认为引入[票锁](http://lwn.net/Articles/267968/)主要是出于公平的原因。票证锁和自旋锁的速度和[可扩展性](http://www.linuxsymposium.org/2012/view_abstract.php?content_key=4)与 MCS 等可扩展锁相比几乎相同。它们都引入了大量的缓存行无效和内存读取，这使 CPU 总线不堪重负。

> 在我看来，一个不公平的算法应该更快一点，因为早期占用锁的线程完成得更快，给调度程序更少的工作要做。

不涉及调度程序。票证锁和自旋锁是忙等待锁，等待时不阻塞，而是不断检查锁值。一旦锁被释放，程序就会继续运行。控制流永远不会进入调度程序并返回。我们使用自旋锁而不是块唤醒锁的原因是块唤醒涉及上下文切换，这很昂贵，而我们只是等待和消耗 CPU 时间变得更便宜。所以忙等待锁只能用在“短”临界区。

> 我想对此有更多的看法。如果不是更快，为什么在内核中实现票证锁，为什么不在用户空间中使用？谢谢！

它在内核中，因为内核代码也有临界区，所以你需要内核空间锁来保护内核数据。但是，当然，您可以实现一个使用空间票锁，并在您的应用程序中使用它。

# javascript - Facebook 之类的按钮 iframe 实现在 Firefox 中不可点击，可在其他浏览器中使用

> ID：10399480
> 
> 赞同：0
> 
> 时间：2012-05-01T14:54:43.453
> 
> 标签：javascript, facebook, facebook-like, facebook-iframe

我使用的是普通的 iframe 代码，而不是 xfbml（正在附加片段，因此恢复为基本 iframe）。

```
<iframe scrolling="no" frameborder="0" style="border: medium none; overflow: hidden; width: 92px; height: 22px; position:absolute;top:3px;left:180px;" allowtransparency="true" src="http://www.facebook.com/plugins/like.php?href=http://www.xxxxwebsitexxxx.co.uk&amp;layout=button_count&amp;show_faces=false&amp;width=92&amp;action=like&amp;font=arial&amp;colorscheme=light"></iframe> 
```

该按钮显示正确，但在Firefox中单击它时，我收到以下错误：

```
this.event is undefined
http://static.ak.fbcdn.net/rsrc.php/v1/yW/r/MrPDat_Xp7Z.js (line 31) 
```

我认为违规行是这样的：

```
__d("DOMEvent",["copyProperties"],function(a,b,c,d,e,f){var g=b("copyProperties");function h(i){this.event=i||window.event;this.target=this.event.target||this.event.srcElement;}g(h.prototype,{preventDefault:function(){var i=this.event;i.preventDefault?i.preventDefault():i.returnValue=false;return this;},stopPropagation:function(){var i=this.event;i.stopPropagation?i.stopPropagation():i.cancelBubble=true;return this;},kill:function(){this.stopPropagation().preventDefault();return this;}});e.exports=h;}); 
```

__d("DOMEventListener",[],function(a,b,c,d,e,f){var g,h;if(window.addEventListener){g=function(j,k,l){j.addEventListener (k,l,false);};h=function(j,k,l){j.removeEventListener(k,l,false);};}else if(window.attachEvent){g=function(j,k ,l){j.attachEvent('on'+k,l);};h=function(j,k,l){j.detachEvent('on'+k,l);};}var i={ add:function(j,k,l){g(j,k,l);return {remove:function(){h(j,k,l);j=null;}};},remove:h} ;e.exports=i;});

这是一个已知问题吗？我在一个普通的网站上尝试了相同的代码，并禁用了所有附加组件以确保它不是兼容性问题。

我在 Mac 上使用 Firefox 12.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:41:39.470

我面临同样的问题，但我没有做过任何修改，所以我认为这是 facebook 的错误，因为这非常简单（只需从 FB 复制并粘贴到您的网站）并且它适用于 IE、Chrome 和 Safari（到目前为止我已经试过）但是如果你已经登录了FB，就没有这样的问题。让我们尝试联系 FB 让他们知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:52:21.427

我只能说，当我第一次登录 Facebook 时，我在 Firefox 中没有这个问题，所以在尝试从 facebook 加载登录弹出窗口时一定会出错？我敢打赌 Facebook 很快就会解决这个问题，因为它只会影响任何使用 iframe 版本的 like 按钮的网站。

编辑：该问题似乎已由 Facebook 解决，但截至今天，问题又回来了。也许 Facebook 已经改变了其他东西，导致这个问题再次发生？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:15:33.590

截至 2012 年 5 月 3 日，22:14 (GMT+1)，这个问题似乎已被 Facebook 修复。

我检查了 iframe 实现引入的 javascript，并且有问题的代码行已更改。

当我现在单击 facebook like 按钮时，弹出窗口会按原样显示。

# php - php navigating an RSS Feed with a namespace

> ID：10399481
> 
> 赞同：0
> 
> 时间：2012-05-01T14:54:45.503
> 
> 标签：php, rss

I have an RSS feed from flikr

[http://api.flickr.com/services/feeds/photoset.gne?set=72157629920039099&nsid=50910794@N07&lang=en-us&format=rss_200](http://api.flickr.com/services/feeds/photoset.gne?set=72157629920039099&nsid=50910794@N07&lang=en-us&format=rss_200)

In here there is a media:description, media:thumbnail e.t.c

I am trying my hardest to get the URL from the media:thumbnail but I am having no luck whatso ever!

My code...

```
$content = file_get_contents("http://api.flickr.com/services/feeds/photoset.gne?set=72157629920039099&nsid=50910794@N07&lang=en-us&format=rss_200");

$x = new SimpleXmlElement($content);

$ourItems = "";

foreach($x->channel->item as $entry) {

    $thumbParent   = $entry->children("media");
    $thumb         = $thumbParent->thumbnail->attributes();
    $thumbW        = $thumb['width']; 
    $thumbH        = $thumb['height']; 
    $thumbURL      = $thumb['url']; 

   $ourItems .= "<li>\n"
                    ."<a href='$entry->link' title='$entry->title'>\n"
                       ."<img src='" . $thumbURL . "' />\n"
                    ."</a>\n"
                 ."</li>\n";

}

return $ourItems; 
```

Please can someone point me in the correct direction - thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:53:27.307

尝试使用 children 函数：

```
 $thumbA = $item->children('media', true)->thumbnail->attributes();

 <media:thumbnail url="<?php echo ($thumbA['url']); ?>" /> 
```

# javascript - jQuery 更新表单元素

> ID：10399482
> 
> 赞同：0
> 
> 时间：2012-05-01T14:54:46.210
> 
> 标签：javascript, jquery

我有一个表单，我在单击按钮时创建了一个复选框。我正在使用[https://github.com/pixelmatrix/uniform](https://github.com/pixelmatrix/uniform)，它提供了一个更新功能来动态创建不起作用的元素。我有一个解决方法，但我的问题是它还重置了已经创建的元素，所以它们加倍，三倍等。

它们被包裹在一个 div 中，其类为`checker`. 有没有办法在应用我的`$('.table').find('input:checkbox').uniform()`. 我尝试了不同的示例，但它们似乎不适用于我的代码，而且我的 jQuery 仍然受到限制。

谢谢

```
<div class="checker" id="uniform-160">
        <span>
            <input type="checkbox" name="chbox" id="160" style="opacity: 0;">
        </span>
 </div> 
```

jQuery：

```
$(".fg-button").live("click", function(){
    $('.table').find('input:checkbox').uniform()
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:59:50.953

试试这个：

```
$('.table input:checkbox').not('div.checker input').uniform() 
```

# sitefinity - 无法加载文件或程序集 Telerik.Sitefinity

> ID：10399488
> 
> 赞同：2
> 
> 时间：2012-05-01T14:55:03.073
> 
> 标签：sitefinity, sitefinity-4, sitefinity-5

在将我的 Sitefinity 4.1.1339.0 安装升级到 4.3（最终升级到 Sitefinity 5）时遇到一些问题。它给了我以下错误：

> > 无法加载文件或程序集“Telerik.Sitefinity，Version=4.1.1339.0，Culture=neutral，PublicKeyToken=b28c218413bdf563”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我以为是 /bin/Telerik.Sitefinity.dll 文件，但那里的所有内容似乎都已更新。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:04:30.510

如果您在 Sitefinity web.config 中使用“assemblyBinding”，则需要将该配置部分更新为最新的 dll 版本。程序集绑定是将过时的第三方 Sitefinity 模块/插件映射到当前 Sitefinity dll 的常用解决方案。

以下是 Sitefinity 5.1.3210 的正确版本。请注意，Telerik.Web.UI 是不同的版本，因为它来自不同的 Telerik 产品线。

```
<!-- From web.config - not complete file -->
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="Telerik.Sitefinity" publicKeyToken="b28c218413bdf563" culture="neutral"/>
    <bindingRedirect oldVersion="0.0.0.0-65535.65535.65535.65535" newVersion="5.1.3210.0"/>
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="Telerik.Sitefinity.Model" publicKeyToken="b28c218413bdf563" culture="neutral"/>
    <bindingRedirect oldVersion="0.0.0.0-65535.65535.65535.65535" newVersion="5.1.3210.0"/>
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="Telerik.Web.UI" publicKeyToken="121fae78165ba3d4" culture="neutral"/>
    <bindingRedirect oldVersion="0.0.0.0-65535.65535.65535.65535" newVersion="2012.2.607.40"/>
  </dependentAssembly>
</assemblyBinding> 
```

如果您将升级到许多版本 4.1 -> 4.4 -> 5.0 -> 5.1，您可能希望注释掉配置的这一部分，直到您完成升级，然后将其重新添加。否则，您将拥有在每次升级后编辑这三行。

注意：要获取 dll 版本，请浏览到 bin 文件夹。右键单击 dll 文件，单击属性，然后选择“详细信息”选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:58:54.423

我同意@Josh，另外您可以尝试查看 App_Data\Sitefinity\Configuration 文件夹中的所有文件。出于某种原因，我不得不手动更新这些文件中的所有引用以匹配确切的 DLL 版本。确保完全重新启动 cassini/IIS/sitefinity 实例以获取更改。

# email - CakePHP 2 每次发送 2 封电子邮件

> ID：10399492
> 
> 赞同：0
> 
> 时间：2012-05-01T14:55:34.443
> 
> 标签：email, cakephp-2.0, html-email

通过电子邮件向收件人发送联系表单时，我在 CakePHP 中遇到了一个奇怪的错误。填写并提交联系表格后，CakePHP 就会将电子邮件发送给收件人。但是，它似乎同时发送两封电子邮件，而不是一次发送一封电子邮件。

我的控制器代码是这样的：

```
var $helpers = array('Html', 'Form', 'Js');
var $components = array('Email', 'Session');

public function index() {
    $this->layout = 'modal';

    if(isset($this->data['Contact'])) {
        $userName = $this->data['Contact']['yourname'];
        $userPhone = $this->data['Contact']['yourtelephone'];
        $userEmail = $this->data['Contact']['youremail'];
        $userMessage = $this->data['Contact']['yourquestion'];

        $email = new CakeEmail();
        $email->viewVars(array(
                'userName' => $userName,
                'userPhone' => $userPhone,
                'userEmail' => $userEmail,
                'userMessage' => $userMessage
        ));
        $email->subject(''.$userName.' has asked a question from the website');
        $email->template('expert', 'standard')
            ->emailFormat('html')
            ->to('recipient-email@gmail.com')
            ->from('postman@website.co.uk', 'The Postman')
            ->send();

        if ($email->send($userMessage)) {
            $this->Session->setFlash('Thank you for contacting us');
        } 
        else {
            $this->Session->setFlash('Mail Not Sent');
        }

    }
} 
```

这是联系表格的代码：

```
 <?php
            echo $this->Form->create('Contact', array('url' => '/contact/ask-the-expert/', 'class' => 'contact'));

            echo $this->Form->input('yourname', array(
                'type' => 'text',
                'label' => 'Your Name <span class="star">*</span>',
            ));
            echo $this->Form->input('yourtelephone', array(
                'type' => 'text',
                'label' => 'Your Telephone',
            ));
            echo $this->Form->input('youremail', array(
                'type' => 'text',
                'label' => 'Your Email <span class="star">*</span>',
            ));
            echo $this->Form->input('yourquestionAnd ', array(
                'type' => 'textarea',
                'label' => 'Your Question <span class="star">*</span>',
            ));
            echo $this->Form->submit();

            echo $this->Form->end();
         ?> 
```

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:38:39.823

将您的邮件发送代码放入`if ($this->request->is('post')) {}`其中并尝试。

**UPDATE**
更新了代码。

```
var $helpers = array('Html', 'Form', 'Js');
var $components = array('Email', 'Session');

public function index() {
$this->layout = 'modal';

if(isset($this->data['Contact'])) {
    $userName = $this->data['Contact']['yourname'];
    $userPhone = $this->data['Contact']['yourtelephone'];
    $userEmail = $this->data['Contact']['youremail'];
    $userMessage = $this->data['Contact']['yourquestion'];

    $email = new CakeEmail();
    $email->viewVars(array(
            'userName' => $userName,
            'userPhone' => $userPhone,
            'userEmail' => $userEmail,
            'userMessage' => $userMessage
    ));
    $email->subject(''.$userName.' has asked a question from the website');
    $email->template('expert', 'standard')
        ->emailFormat('html')
        ->to('recipient-email@gmail.com')
        ->from('postman@website.co.uk', 'The Postman')

    if ($email->send($userMessage)) {
        $this->Session->setFlash('Thank you for contacting us');
    } 
    else {
        $this->Session->setFlash('Mail Not Sent');
    }

    }
} 
```

# utf-8 - 汉字显示为？

> ID：10399495
> 
> 赞同：-1
> 
> 时间：2012-05-01T14:55:51.323
> 
> 标签：utf-8, character-encoding, symbols

我有一个显示汉字的问题，看看这两页。 [http://www.wufangsingapore.com/instructor-junbeng.php](http://www.wufangsingapore.com/instructor-junbeng.php)

[http://www.wufangsingapore.com/schedule.php](http://www.wufangsingapore.com/schedule.php)

你会意识到我链接的第一个链接没有任何汉字问题，而我的第二个链接显示为??? 尽管它在 cPanel 中显示良好。元标记中两个页面的字符集都设置为“charset=utf-8”，这应该是正确的。可能是什么问题？

它们都只是纯 html，即使它们在 PHP 扩展中，它们也不会从任何数据库中读取。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:05:48.320

虽然我没有弄清楚到底发生了什么。

这就是我为使汉字出现而所做的。

1.  在 cPanel 的文件管理器中打开文件并将整个 PHP/HTML 代码块复制到记事本上
2.  再次将记事本文件另存为文件名 schedule.php
3.  通过 Windows Explorer FTP 重新上传。

# html - Chrome上的div排列错误

> ID：10399496
> 
> 赞同：0
> 
> 时间：2012-05-01T14:55:52.137
> 
> 标签：html, css

我试图修复一个只出现在 CHROME 中的小错误，这让我很头疼。
在[我网站的索引上，我](http://www.lumeatapetului.ro/uk/)有 3 个带有小图像的容器，它们在 IE 和 FF 上看起来不错，但在 CHROME 上，第二个容器出现了位移，我不知道如何修复。
这第二个容器有点问题，因为它有一些鼠标悬停效果，大气球作为工具提示，如果我设法将所有 3 个容器放在同一行，工具提示将仅显示部分。

请看一下，如果可以的话，给我一些提示。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:03:32.393

你的标记相当精神分裂。您正试图与这些元素`position:relative;`结合使用`display:inline`并`float:`定位这些元素。

选择一种方法并始终如一地使用它。

我建议浮动它们，或使用`display:inline-block;`.

# javascript - 从标签中删除 rel 属性

> ID：10399497
> 
> 赞同：5
> 
> 时间：2012-05-01T14:55:56.257
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [删除 html 标签的属性](https://stackoverflow.com/questions/3909555/remove-attribute-of-html-tag)

我的代码中有一些 jQuery，它为我的代码中的所有标签添加了一个 rel 属性。我不想删除添加这些 rel 属性的代码，而是想使用 JavaScript/jQuery 删除这些 rel 属性。因此，我可以将 rel 属性重置为空字符串：

```
var $this = $(this);
var $items = $this.find('a');
$items.attr('rel', ''); 
```

相反，我想做的是完全删除 rel 标签。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T14:57:04.710

试试`removeAttr()` [http://api.jquery.com/removeAttr/](http://api.jquery.com/removeAttr/)

```
$items.removeAttr('rel'); 
```

# matlab - 在命令行中更改 simbiology 反应中的参数范围 - MATLAB TOOLBOX SIMBIOLOGY

> ID：10399498
> 
> 赞同：2
> 
> 时间：2012-05-01T14:56:01.043
> 
> 标签：matlab

我正在使用 Simbiology 构建模型。我实际上是从 SBML 文件中读取模型。这是我加载模型后得到的

米1

SimBiology 模型 - 模型 1

模型组件： 隔间：1 事件：0 参数：200 反应：200 规则：0 物种：100

然而，

m1.Parameters 给出

答案=

空矩阵：0×1

我相信的原因是因为所有参数都有“反应”范围。如何通过命令行将它们全部设为“模型”范围？

此外，我无法通过反应对象访问参数（值或范围）。如何访问参数值和范围（如果其范围为反应）？

在这里的任何帮助将不胜感激。

谢谢！阿耶莎

PS - 我还在 Mathworks 新闻阅读器（用户论坛）上发布了相同的查询。希望有人从那里或这里回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T00:48:55.340

Pramod 还在用户论坛上发布了一个答案，但为了完整起见，我想在这里复制它。

-亚瑟

* * *

以下代码说明了如何将参数的范围从反应更改为模型。

% 加载lotka。m1 = sbmlimport('lotka')

% 模型级别没有参数 m1.Parameters

% 将参数从反应复制到模型 i = 1:numel(m1.Reactions) p = m1.Reactions(i).KineticLaw.Parameters; 复制obj(p,m1) 删除(p) 结束

m1.参数

请注意，如果有多个具有相同名称的参数，则会出现错误，因为模型需要参数的唯一名称。

如上面的代码所示，您可以通过以下方式访问反应范围参数

反应.KineticLaw.Parameters

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:50:11.693

您可能不想将参数的范围更改为 Model 只是为了查看它们 - 这会改变模型的结构并可能使其无法模拟。

您可以使用命令查看模型中的所有参数

```
sbioselect(m1, 'Type', 'parameter') 
```

当参数的作用域是反应而不是模型时，它的父级是反应的 KineticLaw，而不是反应本身。因此，如果`r`您感兴趣的反应，您可以使用`r.KineticLaw.Parameters`.

希望有帮助！

# ruby - 图像未在控制器中的 rails 3.2.3 中渲染

> ID：10399499
> 
> 赞同：0
> 
> 时间：2012-05-01T14:56:02.027
> 
> 标签：ruby, ruby-on-rails-3.1, asset-pipeline

嘿，我有一个控制器方法 show，它的布局中有一个页脚部分。它由 2 个图像组成。因此当

```
localhost:3000/jobs 
```

被调用并且相同的页脚部分被渲染，图像被显示但是当 localhost:3000/jobs/show/1 被调用时，页脚图像不会被渲染。现在它寻找 /jobs/assets/twitter_32.png 而不是 assets/twitter_32.png

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:09:32.683

确保您始终使用`image_tag`帮助器来引用资产管道中的图像！

`<%= image_tag 'twitter_32.png' %>`在 HTML/Erb 中

`image-url('twitter_32.png')`在 SASS/CSS 中

这将始终指向正确的图像，尤其是当您在资产管道中激活摘要文件名时（默认情况下已激活）。

有关更多信息，请参阅[资产管道指南](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:04:30.630

只需将图像源设置为`/assets/image.ext`. 现在，您可能将其作为`assets/image.ext`. 这个小斜线使一切变得不同。

# c++ - C++：是否有必要将 const 添加到作为参数传递的 POD 中？

> ID：10399501
> 
> 赞同：3
> 
> 时间：2012-05-01T14:56:15.427
> 
> 标签：c++, constants

想象一个接受 int 或 unsigned int 或任何 POD 的函数签名。如果您只是阅读它们，那么 const 它们有什么好处>？

我能想到的唯一一个，是让你不要搞砸并意外分配给它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T15:11:10.827

我假设您在谈论顶级限定符`void f( const type x )`，而不是指向/引用对象的 const 。在这种情况下，重要的是要注意，语言确定函数参数中的顶级 const-volatile 限定符从函数的签名中删除，即以下声明相同的函数：

```
void f( int );
void f( const int );
void f( volatile int );
void f( const volatile int ); 
```

从这个角度来看，在*声明*中添加 cv 限定符是没有意义的。现在在定义中，编译器实际上检查了 cv 限定符，在这种情况下，它会将对参数的更改标记为错误。我见过一些人建议你应该和一些人建议你不应该`const`在定义中使用来捕捉错误，但在我见过的大多数代码中，`const`并没有使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T14:59:32.927

> 我能想到的唯一一个，是让你不要搞砸并意外分配给它？

是的，这就是`const`. 因此，更容易分析和推理函数的目的和正确性。

尽管如此，在公共 API 中使用按值（即非指针/非引用）参数通常被认为是不好的做法`const`：如果您稍后想在实现中修改它们，您需要在以下选项之间进行选择： - 编辑公共标头to remove `const`，这可能会触发客户端代码的重新编译（这在文件修改时间戳驱动的`make`规则中很常见）， - 如果您不`const`从实现中删除 ，您可能会被迫对另一个变量进行低效复制，以便能够修改值.... - 允许声明和定义不同，这可能会使程序员在两者之间摇摆不定（如果他们记得在某处看到它 const 但那不是实现，他们可能会做出证明是错误的假设- 同样的危险不会​​'t 存在于非`const`实际上是声明`const`- 最坏的情况是他们不必要地仔细检查事物以找出变量的当前状态）。

因此，对于实现文件内部的函数，`const`如果您认为它增加了价值，请使用（有时冗长足以让您不打扰），但在公共头文件中积极避免使用它。

在 Exceptional C++ 中，Herb Sutter 建议：

> “避免在函数声明中使用 const 传值参数。如果不修改，仍然在同一函数的定义中使用 const 参数。”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T14:58:59.540

const 正确性应该更多地用于合同，而不是在函数参数中使用时作为优化工具。
它使使用更直观，并防止诚实的程序员犯错误，除了现代编译器足以应用任何所需的优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T15:08:58.163

让我们澄清一件事：指针符合 POD 的条件，通常的做法是声明它们`const`。

按照惯例，整数和浮点参数永远不会声明为 const，即使您的函数无意在其主体内更改它们。任何更改都只在函数本身的上下文中，并且永远不会传播回调用者，因此从函数的公共接口的角度来看，声明它们`const`是多余的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-01T15:00:39.300

无需用 const 装饰 int 或 uint 参数。

这样，值就被传递了：这个 int 或 uint 的副本被生成并传递到你的函数中。在函数内，任何更改都不会影响这个外部 int 或单元。

将 const 与指针参数一起使用。

# iphone - 子类 UITableView 更改部分索引的字体颜色？

> ID：10399504
> 
> 赞同：2
> 
> 时间：2012-05-01T14:56:25.683
> 
> 标签：iphone, cocoa-touch, uitableview

我有一个黑色的背景，`UITableView`上面有一个。默认情况下，部分索引是半透明的，带有深色文本颜色。我想将部分索引的文本颜色更改为与`UITableViewCell`标题标签相同的颜色。我已经阅读了一些内容，看来您必须将`UITableView`? 我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:08:44.320

从 iOS 6 开始，您可以这样做：

```
searchTable.sectionIndexColor = [UIColor blackColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:32:25.657

为了解决这个问题，我在 viewDidAppear 中使用了以下内容：

```
for (UIView *subView in [self.view subviews])
   {
        if ([[[subView class] description] isEqualToString:@"UITableViewIndex"])
        {
            [subView performSelector:@selector(setIndexColor:) withObject:[UIColor whiteColor]];
        }
    } 
```

由于没有记录，因此必须通过选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T15:02:01.253

从 iOS 6.0 开始，有两种方法可以让您更改部分索引的颜色和拖动滑块时显示的背景。

```
if ([tableView respondsToSelector:@selector(setSectionIndexColor:)]) {
    tableView.sectionIndexColor = ... // some color
    tableView.sectionIndexTrackingBackgroundColor = ... // some other color
} 
```

当然，这只会在设备有 6.0+ 的情况下执行。对于任何较旧的 iOS，什么都不会改变。

# sql - 如何在不使用数据库别名的情况下从不同的数据库中查询表？

> ID：10399505
> 
> 赞同：3
> 
> 时间：2012-05-01T14:56:26.033
> 
> 标签：sql, sql-server, sql-server-2008

我正在执行从两个数据库表中检索数据的任务，我包括以下查询来实现它。

*在存储过程中查询*：

```
--Some query here...
LEFT OUTER JOIN     aaa c 
ON                  l.IDNo      = c.LogonIDNo
INNER JOIN          Data_00.dbo.yyy A
ON                  C.MacCusNo  = A.Cus_no
LEFT OUTER JOIN     abc T 
ON                  A.xyz       = T.bbb 
```

*表*：

```
aaa : table of database Data_01
yyy : table of database Data_00 
```

有什么方法可以在不使用“Data_00.dbo.yyy”的情况下从两个数据库表中检索数据，我只想使用`yyy`它而不是它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T15:03:18.047

我假设您使用的是 SQL Server。

是的，您可以创建同义词。同义词允许您指定用于访问各种数据库对象的简写名称，无论它们是否与同义词规则位于同一个数据库中。

```
USE Data_01;

CREATE SYNONYM yyy FOR Data_00.dbo.yyy; 
```

# javascript - jQuery Mobile 列表中的 jQuery .append() JSON 数据在刷新页面时添加重复项？

> ID：10399510
> 
> 赞同：0
> 
> 时间：2012-05-01T14:56:44.273
> 
> 标签：javascript, jquery, jquery-mobile

我需要帮助。我找不到我的错误。出于某种原因，当我附加一个 ul 时，我得到了重复的 li。我创建了一个 AJAX 搜索，可以在键入时搜索结果。问题是当我离开页面时，例如，如果我点击个人资料并返回，如果我搜索相同的关键字，我会得到重复的结果。这很奇怪，因为我在输入任何内容之前清空（）我的 ul。这可能非常简单，但我找不到它。

这是我的 jQuery，它附加了我的 ul：

```
 $(document).delegate("#search", "pageshow", function() {
        $("#search input").focus(function() {
            $("ul#search_list").empty();
            $(this).val("");
            localStorage.search = "";
        });
        $("#search input").keyup(function() {
            $("ul#search_list").empty();
            localStorage.search = $("#search input").val();
            var result = "";
            $.ajax({
                url: '/app/users/search/'+localStorage.search,
                dataType: 'jsonp',
                jsonp: 'jsoncallback',
                success: function(data) {
                    $.each(data, function(i,item){
                        var result = '<li><a href="#friend_profile" class="friend_profile" data-search_user_id="'
                        + item.id +
                        '"><img class="round" src="'
                        + item.picture + '" /><h3>'
                        + item.name + 
                        '</h3><p>' + item.location + '</p></a></li>';
                        $("ul#search_list").append(result);
                        $("ul#search_list").listview('refresh');
                    });
                },
                error: function(){
                    $("ul#relationships_list").text('Sorry, you dont seem to have any friends.');
                }
            });
        });
    }); 
```

这是正在附加的 HTML ul：

```
 <div data-role="page" id="search">

            <div data-role="header" data-position="fixed">
                <a data-rel="back">Back</a>
                <h1>Search</h1>
                <a href="index.html">Settings</a>
            </div><!-- /header -->

            <div data-role="content"> 
                <ul id="search_list" data-role="listview" data-filter="true">
                </ul>                 
            </div><!-- /content -->

            <div data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#dash" data-icon="grid">Dash</a></li>
                        <li><a href="#points" data-icon="star">Points</a></li>
                        <li><a href="#claim" data-icon="check">Claim</a></li>
                        <li><a href="#search" data-icon="search" class="ui-btn-active ui-state-persist">Search</a></li>
                        <li><a href="#profile" data-icon="home">Profile</a></li>
                    </ul>    
                </div>
            </div><!-- /content -->

        </div><!-- /page --> 
```

这是出现的屏幕截图。如果您想要视觉效果：

![iPhone 模拟 jQuery Mobile](../Images/f3aa00070b4f286ff83db6aa33ae8086.png)

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:48:38.537

这些选项都不起作用。但我找到了一个快速修复方法，可以删除 ul 中的重复项。这是迄今为止唯一有效的方法。这是解决方案的链接：

[jquery删除重复的li](https://stackoverflow.com/questions/3838845/jquery-remove-duplicate-li)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:28:06.007

有一次我在页面隐藏上清除结果时遇到了这个问题。我不确定您使用的是哪个版本的 JQueryMobile，但我在 1.0 中遇到了这个问题。ajax 事件似乎并没有破坏 pagehide 上的页面，所以我不得不删除 pagehide 上的元素。我不知道这是否有帮助。

# css - 一起内联和块表单输入

> ID：10399511
> 
> 赞同：1
> 
> 时间：2012-05-01T14:56:44.943
> 
> 标签：css, forms, input

我正在尝试为我的表单提供一个类似于此图像[http://reversl.net/demo/](http://reversl.net/demo/)上显示的布局，其中名字和姓氏输入是内联的，但所有其他输入都是堆叠的（即彼此叠加）。我目前使用以下标记有类似[http://reversl.net/form/的东西；](http://reversl.net/form/)

```
<div class="container">
  <form>
<ol>            
  <li>
    <label for=name>Firstname:</label>
    <input id=name name=name type=text placeholder="Jon" required autofocus>
  </li>

  <li>
    <label for=name>Surname:</label>
    <input id=surname name=surname type=text placeholder="Doe" required autofocus>
  </li>

  <li>
    <label for=message>Message:</label>
    <textarea id=message name=message placeholder="Type your message here..." required></textarea>
  </li>

</ol>
  </form>
</div> 
```

样式如下；

```
label {
display: block;
line-height: 1.75em;
}

input, textarea {   
width: 250px;
display: inline-block;
margin-bottom: 2em;
padding: .75em .5em;
color: #999;
border: 1px solid #e9e9e9;
outline: none;
}

input:focus, textarea:focus {
-moz-box-shadow:    inset 0 0 3px #aaa;
-webkit-box-shadow: inset 0 0 3px #aaa;
box-shadow:         inset 0 0 3px #aaa;
}

textarea {
height: 100px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:04:51.423

给出前两个 LI`display: inline-block`并根据需要调整填充/边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:18:45.437

我做到了

**HTML**

```
<div class="container">
    <form>
        <ul style="float: left">
            <label for="name">Firstname</label>
            <input id="name" autofocus="" name="name" placeholder="Jon" required="" type="text">
        </ul>
        <ul style="float: left">
            <label for="name">Surname</label>
            <input id="surname" autofocus="" name="surname" placeholder="Doe" required="" type="text">
        </ul>
        <br><br><br><br><br>
        <ul>
            <ul style="padding: 0px; margin: 0px">
                Message</ul>
&nbsp;<textarea id="message" name="message" placeholder="Type your message here..." required="" style="width: 536px"></textarea>
        </ul>
    </form>
</div> 
```

和**CSS**

```
label {
    display: block;
    line-height: 1.75em;
}
input, textarea {
    width: 250px;
    display: inline-block;
    margin-bottom: 2em;
    padding: .75em .5em;
    color: #999;
    border: 1px solid #e9e9e9;
    outline: none;
}
input:focus, textarea:focus {
    -moz-box-shadow: inset 0 0 3px #aaa;
    -webkit-box-shadow: inset 0 0 3px #aaa;
    box-shadow: inset 0 0 3px #aaa;
}
textarea {
    height: 100px;
}
ul {
    margin: 0px;
} 
```

# java - 如何更改此 Java Applet 以使用 JPanel？

> ID：10399519
> 
> 赞同：-1
> 
> 时间：2012-05-01T14:57:09.453
> 
> 标签：java, swing, applet, awt, jpanel

如何将其更改为`JPanel`，此代码是 Java中的`Applet`我如何更改它？

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import java.lang.reflect.Array;
public class Hangman extends Applet implements ActionListener{

        static final int DEAD=13;   // amount of errors till loss
        private int errors;        // amount of errors
        private String message;   // error or victorie
        private String information; // information of the message
        private String rword;      // the rword
        private StringBuffer gword;// the gword
        private Button bStart;      // Button "Restart"
        private Button bGo;         // Button "Go"
        private TextField tfLetter; // letter box
        private Font fnt;           // common font

        public void init(){

        fnt = new Font( "Monospaced", 20, 20 );
        setFont(fnt);

                // Create textbox for guess letter

                tfLetter = new TextField();
                // Create buttons and labels

                bStart = new Button("Restart");
                bGo = new Button("Go");
                // Add the graphical elements to the applet

                add(bStart);
                add(new Label("Guess a letter:"));
                add(tfLetter);
                add(bGo);

                // Buttons are events:
                bStart.addActionListener(this);
                bGo.addActionListener(this);

                // Start first game
                initGame();
        }

        public void initGame(){

        /* Setting the errors to 0 */
                errors=0;

        /* Enter the wordslist, separated by a | here: */
                String str = "computer|radio|calculator|teacher|bureau|police|geometry|president|subject|country|enviroment|classroom|animals|province|month|politics|puzzle|instrument|kitchen|language|vampire|ghost|solution|service|software|virus25|security|phonenumber|expert|website|agreement|support|compatibility|advanced|search|triathlon|immediately|encyclopedia|endurance|distance|nature|history|organization|international|championship|government|popularity|thousand|feature|wetsuit|fitness|legendary|variation|equal|approximately|segment|priority|physics|branche|science|mathematics|lightning|dispersion|accelerator|detector|terminology|design|operation|foundation|application|prediction|reference|measurement|concept|perspective|overview|position|airplane|symmetry|dimension|toxic|algebra|illustration|classic|verification|citation|unusual|resource|analysis|license|comedy|screenplay|production|release|emphasis|director|trademark|vehicle|aircraft|experiment";
                String[] temp;

                /* delimiter */
                String delimiter = "\\|";

                /* given string will be split by the argument delimiter provided. */
                temp = str.split(delimiter);

        /* Setting the seed */
        Random randomGenerator = new Random();

        /* Generating random number */
        int randomInt = randomGenerator.nextInt(temp.length);
                rword = new String(temp[randomInt]);
                char positions[] = new char[rword.length()];
                for (int i=0; i<rword.length(); i++) {
                        positions[i] = '.';
                }
                String s = new String(positions);
                gword = new StringBuffer(s);
                tfLetter.setText("");

                // Delete the messages
                message="";
                information = "";
                repaint();
        }
        public void paint(Graphics g) {

                // Draw the hangman
                int baseY = 250;

                if (errors >  0){    // ground
                        g.drawLine(90, baseY,200,baseY);
                }
                if (errors >  1){    // bar up
                        g.drawLine(125,baseY,125,baseY-100);
                }
                if (errors >  2){
                        g.drawLine(110,baseY,125,baseY-15);
                }
                if (errors >  3){
                        g.drawLine(140,baseY,125,baseY-15);
                }
                if (errors >  4){    // side bar
                        g.drawLine(125,baseY-100,175,baseY-100);
                }
                if (errors >  5){
                        g.drawLine(125,baseY-85,140,baseY-100);
                }
                if (errors >  6){    // rope
                        g.drawLine(175,baseY-100,175,baseY-75);
                }
                if (errors >  7){    // body
                        g.drawOval(170,baseY-75,10,12);
                }
                if (errors >  8){
                        g.drawOval(170,baseY-65,15,25);
                }
                if (errors >  9){    // arms
                        g.drawLine(160,baseY-65,170,baseY-60);
                }
                if (errors > 10){
                        g.drawLine(183,baseY-60,193,baseY-65);
                }
                if (errors > 11){    // legs
                        g.drawLine(165,baseY-30,170,baseY-45);
                }
                if (errors > 12){
                        g.drawLine(183,baseY-45,193,baseY-30);
                }

                // Show the messages
                g.drawString( message, 40, baseY+25 );
                g.drawString( information, 25, baseY+45 );
                g.drawString( new String (gword), 110, 60);

        }

        public void actionPerformed(ActionEvent e){
                if (e.getSource() == bStart){
                        initGame();
                }
                if (e.getSource() == bGo){
                        processTurn();
                        // Delete the letter input box
                        tfLetter.setText("");
                        repaint();
                }
        }
        private void processTurn(){
                String s, t;
                char a;

                s = tfLetter.getText();
                a = s.charAt(0);

                if (!Character.isLetter(a)){
                          message="Only enter letters!";
                          return;
                }
                if (s.length()>1){
                          message="One letter at a time!";
                          return;
                }

                // Has the letter been guessed

                t = new String(gword);
                if (t.indexOf(s) != -1){
                        message="Letter has already been guessed";
                        return;
                }

                // If the letter doesn't occur in the rword

                if (rword.indexOf(s) == -1){
                        message="";
                        errors++;
                        if (errors==DEAD){
                                message="You lost!";
                                information = 
                                      "Click on restart for another chance!";
                        }

                        return;
                }

                // Replace dots in gword with the found letter.

                for (int i=0; i<rword.length(); i++){
                        if (rword.charAt(i) == a){
                                gword.setCharAt(i, a);
                        }
                }
                t = new String(gword);

                // If all the dots have been filled, you win

                if (t.indexOf('.') == -1){
                        message="You win!";
                        return;
                }

                // Delete message

                message="";
                repaint();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:03:45.557

替换这一行：

`public class Hangman extends Applet implements ActionListener{`

通过以下一个：

`public class Hangman extends JPanel implements ActionListener{`

Applet 扩展了扩展 Container 的 Panel。JPanel 也间接扩展了 Container。方法`add()`在容器中声明。

所以，你唯一要做的就是给`init()`自己打电话。这个方法是java插件在applet时调用的。

JPanel yourGame = new Hangman(); 你的游戏.init();

顺便说一句，您甚至不必让您的游戏扩展 JPanel。您想在单独的框架中运行它吗？在这种情况下，请执行以下操作：

```
Frame f - new Frame();
Panel yourGame = new Hangman();
yourGame.init();
f.add(yourGame);
f.setSize(300, 300);
f.setVisible(true); 
```

而已。这将创建框架并将您的小程序（即面板）放在框架的中间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:27:25.397

请参阅代码以了解无数的小改动。请注意，我从游戏中删除了第二个按钮，而是将动作侦听器直接添加到文本字段中。

![刽子手游戏](../Images/6e8d3755d505089bd8934c87b2b2dad3.png)

```
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.*;
import javax.swing.*;
import java.util.Random;
import java.lang.reflect.Array;

public class Hangman extends JPanel implements ActionListener{

    static final int DEAD=13;   // amount of errors till loss
    private int errors;        // amount of errors
    private String message;   // error or victorie
    private String information; // information of the message
    private String rword;      // the rword
    private StringBuffer gword;// the gword
    private JButton bStart;      // Button "Restart"
    private JTextField tfLetter; // letter box
    private Font fnt;           // common font

    Hangman() {

        fnt = new Font( "Monospaced", 20, 20 );
        setFont(fnt);

        // Create textbox for guess letter
        tfLetter = new JTextField(4);
        // Create buttons and labels

        bStart = new JButton("Restart");
        //bGo = new JButton("Go");
        // Add the graphical elements to the applet

        setLayout(new FlowLayout(FlowLayout.CENTER, 5, 5));
        add(bStart);
        add(new JLabel("Guess a letter:"));
        add(tfLetter);

        // Buttons are events:
        bStart.addActionListener(this);
        tfLetter.addActionListener(this);

        validate();

        // Start first game
        initGame();
        setPreferredSize(new Dimension(300,300));
    }

    public void initGame(){

        /* Setting the errors to 0 */
        errors=0;

        /* Enter the wordslist, separated by a | here: */
        String str = "computer|radio|calculator|teacher|bureau|police|geometry|president|subject|country|enviroment|classroom|animals|province|month|politics|puzzle|instrument|kitchen|language|vampire|ghost|solution|service|software|virus25|security|phonenumber|expert|website|agreement|support|compatibility|advanced|search|triathlon|immediately|encyclopedia|endurance|distance|nature|history|organization|international|championship|government|popularity|thousand|feature|wetsuit|fitness|legendary|variation|equal|approximately|segment|priority|physics|branche|science|mathematics|lightning|dispersion|accelerator|detector|terminology|design|operation|foundation|application|prediction|reference|measurement|concept|perspective|overview|position|airplane|symmetry|dimension|toxic|algebra|illustration|classic|verification|citation|unusual|resource|analysis|license|comedy|screenplay|production|release|emphasis|director|trademark|vehicle|aircraft|experiment";
        String[] temp;

        /* delimiter */
        String delimiter = "\\|";

        /* given string will be split by the argument delimiter provided. */
        temp = str.split(delimiter);

        /* Setting the seed */
        Random randomGenerator = new Random();

        /* Generating random number */
        int randomInt = randomGenerator.nextInt(temp.length);
        rword = new String(temp[randomInt]);
        char positions[] = new char[rword.length()];
        for (int i=0; i<rword.length(); i++) {
                positions[i] = '.';
        }
        String s = new String(positions);
        gword = new StringBuffer(s);
        tfLetter.setText("");

        // Delete the messages
        message="";
        information = "";
        repaint();
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        // Draw the hangman
        int baseY = 250;

        if (errors >  0){    // ground
                g.drawLine(90, baseY,200,baseY);
        }
        if (errors >  1){    // bar up
                g.drawLine(125,baseY,125,baseY-100);
        }
        if (errors >  2){
                g.drawLine(110,baseY,125,baseY-15);
        }
        if (errors >  3){
                g.drawLine(140,baseY,125,baseY-15);
        }
        if (errors >  4){    // side bar
                g.drawLine(125,baseY-100,175,baseY-100);
        }
        if (errors >  5){
                g.drawLine(125,baseY-85,140,baseY-100);
        }
        if (errors >  6){    // rope
                g.drawLine(175,baseY-100,175,baseY-75);
        }
        if (errors >  7){    // body
                g.drawOval(170,baseY-75,10,12);
        }
        if (errors >  8){
                g.drawOval(170,baseY-65,15,25);
        }
        if (errors >  9){    // arms
                g.drawLine(160,baseY-65,170,baseY-60);
        }
        if (errors > 10){
                g.drawLine(183,baseY-60,193,baseY-65);
        }
        if (errors > 11){    // legs
                g.drawLine(165,baseY-30,170,baseY-45);
        }
        if (errors > 12){
                g.drawLine(183,baseY-45,193,baseY-30);
        }

        // Show the messages
        g.drawString( message, 40, baseY+25 );
        g.drawString( information, 25, baseY+45 );
        g.drawString( new String (gword), 110, 60);

    }

    public void actionPerformed(ActionEvent e){
        if (e.getSource() == bStart){
            initGame();
        }
        if (e.getSource().equals(tfLetter)){
            processTurn();
            // Delete the letter input box
            tfLetter.setText("");
            repaint();
        }
    }
    private void processTurn(){
        String s, t;
        char a;

        s = tfLetter.getText();
        a = s.charAt(0);

        if (!Character.isLetter(a)){
                  message="Only enter letters!";
                  return;
        }
        if (s.length()>1){
                  message="One letter at a time!";
                  return;
        }

        // Has the letter been guessed

        t = new String(gword);
        if (t.indexOf(s) != -1){
                message="Letter has already been guessed";
                return;
        }

        // If the letter doesn't occur in the rword

        if (rword.indexOf(s) == -1){
                message="";
                errors++;
                if (errors==DEAD){
                        message="You lost!";
                        information =
                              "Click on restart for another chance!";
                }

                return;
        }

        // Replace dots in gword with the found letter.

        for (int i=0; i<rword.length(); i++){
                if (rword.charAt(i) == a){
                        gword.setCharAt(i, a);
                }
        }
        t = new String(gword);

        // If all the dots have been filled, you win

        if (t.indexOf('.') == -1){
                message="You win!";
                return;
        }

        // Delete message

        message="";
            repaint();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JPanel hangman = new Hangman();
                JOptionPane.showMessageDialog(null, hangman);
            }
        });
    }
} 
```

# c# - 获取两个列表之间的差异

> ID：10399521
> 
> 赞同：2
> 
> 时间：2012-05-01T14:57:10.783
> 
> 标签：c#, .net, object

我有一个对象类型的 2 个列表：

```
列表<MyClass> list1;

列表<MyClass> list2;

```

提取这两个列表之间数据差异的最佳方法（性能和干净的代码）是什么？
我的意思是获取添加、删除或更改（以及更改）的对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-01T15:01:39.907

尝试`Except`使用`Union`，但您需要为两者都这样做才能找到两者的差异。

```
var exceptions = list1.Except(list2).Union(list2.Except(list1)).ToList(); 
```

**或者作为 Linq 的替代方案，可能会有更快的方法：HashSet.SymmetricExceptWith()：**

```
var exceptions = new HashSet(list1);

exceptions.SymmetricExceptWith(list2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:05:02.327

```
IEnumerable<string> differenceQuery = list1.Except(list2); 
```

[http://msdn.microsoft.com/en-us/library/bb397894.aspx](http://msdn.microsoft.com/en-us/library/bb397894.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:23:54.050

您可以使用`FindAll`来获得您想要的结果，即使您`IEquatable`的. 这是一个例子：`IComparable``MyClass`

```
List<MyClass> interetedList = list1.FindAll(delegate(MyClass item1) {
   MyClass found = list2.Find(delegate(MyClass item2) {
     return item2.propertyA == item1.propertyA ...;
   }
   return found != null;
}); 
```

`list2`同样，您可以通过比较来获取您感兴趣的项目`list1`。

此策略也可能会获得您的“更改”项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T11:03:50.847

获取在 list1 或 list2 中但不在两者中的项目的一种方法是：

```
var common = list1.Intersect(list2);
var exceptions = list1.Except(common).Concat(list2.Except(common)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-18T10:12:49.080

试试这个进行对象比较并循环它`List<T>`

```
public static void GetPropertyChanges<T>(this T oldObj, T newObj)
{
    Type type = typeof(T);
    foreach (System.Reflection.PropertyInfo pi in type.GetProperties(System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance))
    {
        object selfValue = type.GetProperty(pi.Name).GetValue(oldObj, null);
        object toValue = type.GetProperty(pi.Name).GetValue(newObj, null);
        if (selfValue != null && toValue != null)
        {
            if (selfValue.ToString() != toValue.ToString())
            {
             //do your code
            }
        }
    }
} 
```

# linux - ./yourscript.sh 和 sh yourscript.sh 有什么区别

> ID：10399527
> 
> 赞同：-2
> 
> 时间：2012-05-01T14:57:26.443
> 
> 标签：linux, shell

> **可能重复：**
> [以 ./script.sh 和 sh script.sh 运行 shell 脚本有什么区别](https://stackoverflow.com/questions/2468132/whats-the-difference-between-running-a-shell-script-as-script-sh-and-sh-script)

当您运行脚本时`./yourscript.sh`，`sh yourscript.sh`这之间有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:01:26.040

运行脚本 ./yourscript.sh 时，该文件必须标记为可执行文件，并且您必须在脚本顶部声明您希望使用的 shell。例如：

```
#!/bin/sh
<your code here> 
```

仅使用 sh yourscript.sh 时，不需要这些要求。

# macos - 如何在 OS X 下获取当前连接的 VPN 的名称

> ID：10399535
> 
> 赞同：3
> 
> 时间：2012-05-01T14:57:59.890
> 
> 标签：macos, bash, vpn

我知道我可以通过这样做来获取 Wifi SSID

```
/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I | sed -e "s/^  *SSID: //p" -e d 
```

但是有没有办法获取当前正在使用的 VPN 名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:33:10.730

假设您的意思是使用 Network Preferences 注册的 VPN 服务，AppleScript，特别是*System Events*的*Network Preferences Suite*将起作用：

```
tell application "System Events"
    tell current location of network preferences
        get name of every service whose (kind is greater than 11 and kind is less than 16) and connected of current configuration is true
    end tell
end tell 
```

如果您需要从 shell 访问它，`osascript -e`是您的朋友（`-e`AppleScript 每行一个选项，请注意引用和转义 - 请参阅`man osascript`）。

# android - 登录生产和proguard

> ID：10399538
> 
> 赞同：0
> 
> 时间：2012-05-01T14:58:10.873
> 
> 标签：android, android-layout

我的代码中到处都有 LOG.d。在生产/发布方面，默认情况下是否调试？或者我应该把它们包围起来的条件短语。

此外，如果 Proguard 删除了调试语句，那么我将得到的崩溃报告的行号将不正确，对吧？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:33:09.340

日志消息在发布模式下仍然可见，proguard 不会触及那些。

Log.d 中的“调试”是日志消息的级别。

Proguard 会混淆文件名和源代码行，因此您不会在堆栈跟踪中看到它们，但您可以映射回原始源代码或配置 proguard 以保留它们。

[http://developer.android.com/guide/developing/tools/proguard.html](http://developer.android.com/guide/developing/tools/proguard.html)

# c - 在 C 中循环退出后使用“for”循环迭代器

> ID：10399544
> 
> 赞同：11
> 
> 时间：2012-05-01T14:58:34.130
> 
> 标签：c, for-loop, c99

多年来，我养成了`for`在循环退出后不使用循环迭代器值的习惯。我本可以发誓我这样做了，因为它曾经产生编译器警告，但是在我最近的一次代码审查中受到挑战后，我被证明是错误的。

例如，我总是这样做（注意：我们的代码标准禁止使用“break”关键字）：

```
int i, result;
bool done = false;
for (i=0; i<10 && !done; i++) {
    if (some_condition) {
        result = i;
        done = true;
    }
}
// Value of i may be undefined here 
```

现在，`result`如果我可以依赖 i 的值，显然可以删除该变量。我认为由于编译器优化，您不能依赖循环迭代器的值。我只是记得一个幻影教学吗？或者这是标准（特别是关于 GNU C）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T15:13:06.247

在[C89](https://en.wikipedia.org/wiki/ANSI_C#C89)、[C99](https://en.wikipedia.org/wiki/C99)或[C11](https://en.wikipedia.org/wiki/C11_(C_standard_revision))中访问`for`语句后的迭代变量没有任何问题。

```
 int i;

 for (i = 0; i < 10; i++) {
     /* Some code */
 }

 printf("%d\n", i);  // No magic, the value is 10 
```

从 C99 开始，您还可以使用声明作为`for`语句的第一个子句，在这种情况下，声明的变量当然不能在`for`语句之后使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-24T17:39:04.117

不同的语言有不同的规则。在 Pascal 中，允许编译器在最终递增后优化存储循环索引，因此它*可能*是第一个循环终止值，也*可能*是最后一个有效值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T20:30:45.010

*有很多用例，其中 for 循环仅*用于推进迭代器。这可以在 strlen 的某些实现中看到（尽管无可否认，还有其他方法可以做 strlen），以及其他类型的函数，其目标是找到某个限制：

```
/*find the index of the first element which is odd*/
for (ii = 0; ii < nelem && arry[ii] % 2 == 0; ii++); 
```

如前所述，混淆点可能来自迭代器本身在 for 语句中定义的结构。

一般来说，for 语句非常强大，不幸的是它们通常从未充分发挥其潜力。

例如，同一个循环的不同版本可以写成如下（尽管它不能证明使用迭代器的安全性）：

```
#include <stdio.h>
int main(void)
{
    int cur, ii = 0, nelem, arry [] = { 1, 2, 4, 6, 8, 8, 3, 42, 45, 67 };
    int sum = 0;

    nelem = sizeof(arry) / sizeof(int);
    /* Look mom! no curly braces! */

    for (
            ii = 0;
            ii < nelem && ((cur = arry[ii]) %2 == 0 ||
                                ((printf("Found odd number: %d\n", cur)||1)));
            ii++, sum += cur
        );
    printf("Sum of all numbers is %d\n", sum);
    return 0;
} 
```

在这种特殊情况下，对于这个特定问题似乎需要做很多工作，但对于某些事情来说它可能非常方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:25:48.940

即使该`for`循环的控制变量的值已明确定义，您可能已被告知避免`for`在 for 循环之后使用循环的控制变量，因为该变量的范围是处理方式，特别是因为历史的处理已经改变的 C++ （我知道这个问题被标记为“C”，但我认为避免在循环之后使用 for 循环控制变量的理由可能起源于这个 C++ 历史）。

例如，考虑以下代码：

```
int more_work_to_do(void) 
{
    return 1;
}

int some_condition(void)
{
    return 1;
}

int foo()
{
    int i = 100;

    while (more_work_to_do()) {
        int done = 0;

        for (int i = 0; i < 10 && !done; i++) {
            if (some_condition()) {
                done = 1;
            }
        }

        if (done) return i;   // which `i`?
    }

    return 1;
} 
```

`i`在循环中声明的一些旧的作用域规则下，`for`在带有注释“which `i`”的语句上返回的值将由`for`循环确定（VC++ 6 使用这些规则）。根据用于确定该变量范围的较新的标准规则，返回的值将`i`在函数开始时声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T08:52:55.433

虽然我不可能知道你的习惯是如何形成的，但我可以告诉你我的习惯是如何做到的。这是通过看到这样的代码：

```
for (i=0u; (i<someLimit) && (found != TRUE); i++)
{
    if (someCondition) found = TRUE;
}
foundIndex = i-1; 
```

基本上，这样的代码是在某些编码规则（例如基于 MISRA）不允许使用 break 关键字时编写的。但是，如果您不跳出循环，则循环通常会给您留下一个“i”，它与您关心的内容相差一个。

有时，您甚至可以找到以下内容：

```
for (i=0u; (i<someLimit) && (found != TRUE); i++)
{
    if (someCondition) found = TRUE;
}
foundIndex = i; 
```

这只是语义上的错误，并且可以在将“禁止中断关键字规则”引入到单元测试未充分覆盖的现有代码库中时发现。可能听起来令人惊讶，但一切都在那里......

# jquery - jQuery：如何在上传之前验证图像的尺寸？

> ID：10399547
> 
> 赞同：0
> 
> 时间：2012-05-01T14:58:40.650
> 
> 标签：jquery, image, validation, height, width

我对 jquery 有一些问题。我找到了一些解决方案来在上传之前验证图像的大小。它也张贴在这里：

```
$.validator.addMethod('filesize', function(value, element, param) {
    // param = size (in bytes) 
    // element = element to validate (<input>)
    // value = value of the element (filename)
    return this.optional(element) || (element.files[0].size <= param) 
}); 
```

我定义了一切，它完美地工作！但我也想验证该图像的宽度和高度。我尝试添加与上面相同的第二种方法，但我使用高度或宽度而不是大小，但这不起作用：

```
$.validator.addMethod('widthpic', function(value, element, param) {
   return this.optional(element) || (element.files[0].width == param) 
}); 
```

有什么解决办法吗？当然，我还在 PHP 中检查了图像的大小，但我也想以 jquery 样式添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:59:12.217

用来读取文件大小的东西是[W3C File API](http://www.w3.org/TR/FileAPI/)。我没有看到任何参考建议您可以确定宽度或高度之类的东西。您必须等到服务器端，获取图像，然后使用[ImageMagick](http://php.net/manual/en/book.imagick.php)之类的库来检查尺寸。

# html - html5画布动画。移动图像会产生闪烁或痕迹

> ID：10399548
> 
> 赞同：1
> 
> 时间：2012-05-01T14:58:47.327
> 
> 标签：html, canvas

我看过其他关于此的帖子，但我找不到任何可以帮助我的东西。

我正在画布上绘制一个移动的图像，当它移动时，它会留下一条尚未被清除的自身痕迹。如果我将此图像绘制在另一个图像之上，我不会得到任何痕迹，但顶部的图像会闪烁。我不认为 clearRect 对我有用。

我可以在图像动画之间保存画布状态吗？还是我应该使用第二张画布？

我不太确定如何进行，任何建议都会很棒

***添加示例 - jsfiddle.net/zE67k/2 带有图像和闪烁。jsfiddle.net/zE67k/3 没有图像和踪迹。这只是一个例子，我也试图通过画布的背景图像来实现这一点。

***我还尝试将一个画布放在另一个画布上，但我仍然会闪烁，我认为问题在于我放置 clearRect 的位置。如果我将 clearRect 放在眼睛被绘制之前，它确实有效，但是这段代码绘制和更新眼睛的方式一次只做一个，因此前一个眼睛被清除，只剩下一个。我正在尝试从本教程[http://astronautz.com/wordpress/html5-eyes-that-follow-the-mouse/](http://astronautz.com/wordpress/html5-eyes-that-follow-the-mouse/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:37:11.633

您应该在将其他图像绘制到顶部之前保存干净的画布，并在再次绘制移动的图像之前恢复保存的干净状态。您可以使用额外的画布来保存干净的状态：

```
// create clean buffer
var buffer = document.createElement('canvas'), 
   canvas = document.getElementById('myCanvas');

buffer.width = canvas.width;
buffer.height = canvas.height;

// draw "background"/clean state to canvas
drawBackground(canvas);

// save clean state
buffer.getContext('2d').drawImage(canvas); 
```

然后，当您想绘制/移动其他图像/项目时，只需恢复干净状态：

```
canvas.getContext('2d').drawImage(buffer);
drawObject(canvas, x, y, w, h); 
```

# hadoop - hbase 无法连接到 hadoop

> ID：10399552
> 
> 赞同：0
> 
> 时间：2012-05-01T14:58:58.813
> 
> 标签：hadoop, hbase

我在伪分布式模式下运行一个 hdfs 实例，并试图在同一台服务器上创建另一个连接到它的 hbase 实例。hadoop中的日志很好，但是我在hbase的日志中经常出现连接失败

==================================================== =================================

```
2012-05-01 10:49:07,212 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
2012-05-01 10:49:07,213 WARN org.apache.zookeeper.ClientCnxn: Session 0x13708dc552d0001 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)

2012-05-01 10:49:08,882 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
2012-05-01 10:49:08,882 WARN org.apache.zookeeper.ClientCnxn: Session 0x13708dc552d0001 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119) 
```

==================================================== =================================

core-site.xml@hadoop的配置

```
<configuration>

<property>
    <name>fs.default.name</name>
    <value>hdfs://localhost:9000</value>
</property>

</configuration> 
```

hbase-site.xml@hbase的配置

```
<configuration>
<property>
   <name>hbase.rootdir</name>
   <value>hdfs://localhost:9000/hbase</value>
</property>
<property>
   <name>dfs.replication</name>
   <value>1</value>
</property>
</configuration> 
```

我也尝试用服务器的实际 ip 替换 localhost，但得到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:48:27.083

您需要将 $HBASE_HOME/bin/lib/hadoop-{{version}}core.jar 中的核心 hadoop jar 替换为我遇到的 $HADOOP_HOME/hadoop-{{version}}core.jar 中的那个当我尝试从运行正常的 hbase 0.90-xxx 安装 hbase 0.92 时出现同样的问题，我将旧 hbase 中的 hbase-env.sh 和 hbase-site.xml 替换为新的但忘记复制 hadoop 核心 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T21:01:34.797

*   首先，您需要确保您的 hbase 主节点正在运行，您可以使用`jps`来检查。

如果它没有运行，您可以通过`start-hbase.sh`命令或`hbase master start`. 然后通过其他命令检查其状态，例如`netstat -an | grep 9000`

*   其次，如果前面的方法不起作用，请检查您的防火墙配置，例如 iptables 和 SELinux。用于`sudo iptables -L`检查您的 iptables 配置。`sudo service iptables stop`您可以在基于 redhat 的 linux 系统下通过命令禁用 iptables 。

用于`getenforce`检查 SElinux 是否处于`enforcing`模式。

*   三、检查系统配置，例如`ssh`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T01:34:08.980

当我在配置中看到 localhost 时，我总是很怀疑。此外，当您使用 localhost 时，从您正在运行的主机以外的主机访问伪分布式系统的任何服务变得非常困难（甚至不可能）。

您确实说过您尝试了 IP 地址，但您可能想确保它是节点真正认为的 IP 地址。

检查 Zookeeper 启动时的日志，看看它“认为”它的 IP 地址是什么。应该有这样一行：

```
2012-01-31 09:32:46,083 - INFO  [main:Environment@97] - Server environment:host.name=ip-10-8-127-58.ec2.internal 
```

然后使用 host.name 的值作为所有 Hadodop、HBase、Hive、Zookeeper 等需要主机名的配置文件中所有位置的值（假设它们都在您所说的伪分布式模式下的同一台机器上） )

此外，您没有在 hbase-site.xml 中显示您的 hbase.zookeeper.quorum 设置。这就是 hbase 获取 Zookeeper 地址的地方

```
 <property>
    <name>hbase.zookeeper.quorum</name>
    <value>ip-10-8-127-58.ec2.internal</value>
  </property> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:33:04.973

我认为 Hbase 找不到 zookeeper quorum，你必须在 hbase-site.xml 中设置 hbase.zookeeper.quorum 属性。还要检查类路径是否设置正确，请查看此文档[http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/mapreduce/package-summary.html#classpath](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/mapreduce/package-summary.html#classpath)

# apache - Apache Multiply Sites 再次

> ID：10399554
> 
> 赞同：0
> 
> 时间：2012-05-01T14:58:59.953
> 
> 标签：apache, apache2, lamp, virtualhost

好的。我的本地开发机器上有 LAMP 服务器。我需要在上面开发几个站点。因此，我在 $APACHE/sites-available 中创建了两个文件（我的站点的配置），并为 /sites-enabled 为它们创建了符号链接。之后我开始了 sudo /etc/init.d/apache2 restart 。没有错误或警告。当我尝试 mysite.dev 时，它给出了它，而当 foobar.dev - 它给出了 mysite.dev！

因此，apache 为所有虚拟主机提供了一个站点。如何解决？

[http://pastebin.com/qjcx6RS3](http://pastebin.com/qjcx6RS3)（第一个站点） [http://pastebin.com/FdVStJm8](http://pastebin.com/FdVStJm8)（第二个站点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:25:45.670

您需要在 httpd.conf 中像这样设置[`NameVirtualHost`-directive ：](http://httpd.apache.org/docs/2.0/mod/core.html#namevirtualhost)

```
NameVirtualHost *:80 
```

两个虚拟主机的示例（如您的情况）：

```
NameVirtualHost *:80

<VirtualHost *:80>
ServerName www.domain.tld
ServerAlias domain.tld *.domain.tld
DocumentRoot /www/domain
</VirtualHost>

<VirtualHost *:80>
ServerName www.otherdomain.tld
DocumentRoot /www/otherdomain
</VirtualHost> 
```

...当然也可以将单独文件中的虚拟主机[包含](http://httpd.apache.org/docs/2.0/de/mod/core.html#include)到 httpd.conf 中。

# ubuntu - 是否可以在没有 GUI 的情况下运行 selenium (Firefox) Web 驱动程序？

> ID：10399557
> 
> 赞同：121
> 
> 时间：2012-05-01T14:59:06.967
> 
> 标签：ubuntu, selenium, webdriver

我们正在考虑将我们的生产服务器从 Ubuntu - **desktop** 10.04 升级到 Ubuntu- **server** 12.04。

我们在当前的桌面操作系统上运行了各种服务，例如 Selenium Web Driver。我的问题是 Selenium Web 驱动程序可以从基于 cli 的系统运行吗？

我的直接想法是它不能，因为它依赖于 Firefox，但我希望有人证明我错了！

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-01T15:02:00.977

您正在寻找的是[无头浏览器](/questions/tagged/headless-browser "显示标记为“无头浏览器”的问题")。

是的，可以在 Firefox 上无头运行 Selenium。这是您可以关注的[帖子。](http://www.alittlemadness.com/2008/03/05/running-selenium-headless/ "无头运行 Selenium")

这是设置 Xvfb 的摘要步骤

```
#install Xvfb
sudo apt-get install xvfb

#set display number to :99
Xvfb :99 -ac &
export DISPLAY=:99    

#you are now having an X display by Xvfb 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-05-27T20:12:05.017

Chrome 现在有一个无头模式：

```
op = webdriver.ChromeOptions()
op.add_argument('--headless')
driver = webdriver.Chrome(options=op) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-01T15:01:02.570

是的。您可以在启动 webdriver 时`HTMLUnitDriver`改用 for 。`FirefoxDriver`这是无头浏览器设置。详细信息可以在[这里](http://code.google.com/p/selenium/wiki/HtmlUnitDriver)找到。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-02T23:02:39.707

如果您想要无头浏览器支持，那么您可能会采用另一种方法。

[https://github.com/detro/ghostdriver](https://github.com/detro/ghostdriver)

它是在 Selenium 会议期间宣布的，目前仍在开发中。它使用 PhantomJS 作为浏览器，比 HTMLUnitDriver 好得多，还没有截图，但它仍在积极开发中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-29T03:29:38.537

一个可选的方法是`pyvirtualdisplay`像这样使用：

```
from pyvirtualdisplay import Display

display = Display(visible=0, size=[800, 600])
display.start()

#do selenium job here

display.close() 
```

一个较短的版本是：

```
with Display() as display:
    # selenium job here 
```

这通常是一个 python 封装`xvfb`，并且在某种程度上更方便。

顺便说一句，虽然`PhantomJS`是一个无头浏览器，如果你使用它不会打开任何窗口，但似乎`PhantomJS`仍然*需要*一个 gui 环境才能工作。

当我使用`PhantomJS()`而不是`Firefox()`无头模式（腻子连接的控制台）时，我得到了错误代码 -6。但是，在桌面环境中一切正常。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-20T03:00:49.593

更新：您不再需要 XVFB 来运行无头 Firefox。Linux 上的 Firefox v55+ 和 Windows/Mac 上的 Firefox v56+ 现在支持无头执行。

我在这里添加了一些使用方法文档：

[https://developer.mozilla.org/en-US/Firefox/Headless_mode#Selenium_in_Java](https://developer.mozilla.org/en-US/Firefox/Headless_mode#Selenium_in_Java)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-05T12:27:06.957

另一个选项是现在由 WebDriver 正式支持的 GhostDriver：[GhostDriver 实际性能增益](https://stackoverflow.com/questions/14194371/ghostdriver-actual-performance-gain/14707494#14707494)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-31T19:04:31.397

安装并运行容器化 Firefox：

```
docker pull selenium/standalone-firefox
docker run --rm -d -p 4444:4444 --shm-size=2g selenium/standalone-firefox 
```

使用连接`webdriver.Remote`：

```
driver = webdriver.Remote('http://localhost:4444/wd/hub', DesiredCapabilities.FIREFOX)
driver.set_window_size(1280, 1024)
driver.get('https://www.google.com') 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-07T09:43:22.517

请注意，HtmlUnitDriver webclient 是单线程的，而 Ghostdriver 仅占 WebDriver 功能的 40%。

尽管如此，Ghostdriver 可以正常运行以进行测试，但我无法将其连接到 WebDriver 集线器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-11T08:37:39.233

是的，您可以在没有浏览器的情况下运行测试脚本，但您应该在无头模式下运行它们。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-04T04:01:47.073

也许你需要设置你的窗口大小尺寸。就像：</p>

```
options = webdriver.ChromeOptions()
options.add_argument('--headless')
options.add_argument('--disable-gpu')
options.add_argument('--window-size=1920x1080');

browser = webdriver.Chrome(options=options,executable_path = './chromedriver') 
```

如果也不起作用，请尝试增加窗口大小尺寸。

# android - 更改光标在展开的 EditText 中的开始位置

> ID：10399565
> 
> 赞同：13
> 
> 时间：2012-05-01T14:59:58.083
> 
> 标签：android, android-edittext

我有从其正常单行宽度和高度扩展的 TextField，但是当我更改文本字段的高度时，开始在 EditText 中输入的光标始终位于扩展文本字段的中心，这也是它开始放置文本的位置。

我怎样才能像往常一样将光标移到左上角，同时仍然保持更大的高度框？

这就是我的盒子的布局

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/camera_picture"
    android:layout_marginTop="58dp"
    android:ems="10"
    android:inputType="textMultiLine" >

    <requestFocus />
</EditText> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-01T15:03:37.023

在你的xml中设置这个

**机器人：重力=“顶部”**

你也可以试试这个

**机器人：重力=“上|左”**

```
<EditText
    android:id="@+id/editText1"
    android:gravity="top"   <----------------
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/camera_picture"
    android:layout_marginTop="58dp"
    android:ems="10"
    android:inputType="textMultiLine" >

    <requestFocus />
</EditText> 
```

# c# - 嵌套接口：Cast IDictionary > 到词典 >?

> ID：10399568
> 
> 赞同：2
> 
> 时间：2012-05-01T15:00:07.720
> 
> 标签：c#, generics, interface, casting

我认为将`IDictionary<TKey, IList<TValue>>`对象转换为相当简单`IDictionary<TKey, IEnumerable<TValue>>`，但是

```
var val = (IDictionary<TKey, IEnumerable<TValue>>)Value; 
```

抛出一个`System.InvalidCastException`，并且

```
var val = Value as IDictionary<TKey, IEnumerable<TValue>>; 
```

使`val`为空。投射这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T15:03:51.407

> `IDictionary<TKey, IList<TValue>>`我认为将对象投射到`IDictionary<TKey, IEnumerable<TValue>>`

绝对不。它不会是类型安全的。这是一个为什么不这样做的例子：

```
// This is fine...
IDictionary<string, IList<int>> dictionary = new Dictionary<string, IList<int>>();

// Suppose this were valid...
IDictionary<string, IEnumerable<int>> badDictionary = dictionary;

// LinkedList<T> doesn't implement IList<T>
badDictionary["foo"] = new LinkedList<int>();

// What should happen now?
IList<int> bang = dictionary["foo"]; 
```

`LinkedList<int>`正如你所看到的，这会导致问题——当我们期望所有的值都能实现时，我们会试图摆脱困境`IList<int>`。泛型的重点是类型安全——那么你希望哪一行会失败？第一行、第三行和第四行对我来说显然很有效 - 所以第二行是*唯一*无法编译的行，它确实......

现在在*某些*情况下，它可以安全地完成。例如，您可以将（在 C# 4 中）从`IEnumerable<string>`to转换为，`IEnumerable<object>`因为`IEnumerable<T>`仅用于`T`“输出”位置。

有关详细信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/dd799517.aspx)

编辑：澄清一下 -使用现有键/值对的副本创建一个*新*字典很容易，例如使用链接：

```
var copy = original.ToDictionary<TKey, IEnumerable<TValue>>(pair => pair.Key,
                                                            pair => pair.Value); 
```

你只需要知道你现在有两个独立的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:46:11.143

这可能会或可能不会帮助你，但我想我会把它作为对乔恩回答的补充。

如果您只需要字典的*values*，而不参考它们的键，您可以这样做：

```
IDictionary<TKey, IList<TValue>> dictionary = Whatever();
var values = (IEnumerable<IEnumerable<TValue>>)dictionary.Values; 
```

为此，您必须使用 C# 4.0 或更高版本，并且必须将 TValue 限制为引用类型。这是代码，稍微重构，并带有注释来解释：

```
IDictionary<TKey, IList<TValue>> dictionary = Whatever();

//Values returns an ICollection<IList<TValue>>
ICollection<IList<TValue>> temp1 = dictionary.Values;

//ICollection<T> inherits from IEnumerable<T>
IEnumerable<IList<TValue>> temp2 = temp1;

//IEnumerable<T> is covariant
//There is an implicit reference conversion between IList<T> and IEnumerable<T>
//So there is an implicit reference conversion between IEnumerable<IList<T>>
//and IEnumerable<IEnumerable<T>>
IEnumerable<IEnumerable<TValue>> values = temp2; 
```

# php - 新的英国 cookie 法是否可以接受 PHP 会话？

> ID：10399569
> 
> 赞同：16
> 
> 时间：2012-05-01T15:00:10.460
> 
> 标签：php, cookies, session-cookies

我只是在寻找有关新的[英国 Cookie 法](http://www.ico.gov.uk/for_organisations/privacy_and_electronic_communications.aspx)以及它如何影响 PHP 会话的一些建议。我了解，当 cookie 是“绝对必要的”并且给出的示例是将商品添加到购物车时，您不需要用户选择加入。

我正在使用类似的功能来记住您存储在联系表单中的内容，我认为这是对会话的绝对必要使用，因此不需要选择加入。

然而，我的困惑是因为我有一个 session_start(); 在每个页面的顶部，这意味着 cookie 是立即设置的。一些用户不会去使用联系表，所以这意味着 cookie 对他们来说不是绝对必要的。

我可以删除 session_start(); 从每个页面的顶部开始，但此功能在许多网站中都使用，如果我们可以保留它会更好。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T15:13:07.557

简单的答案是你可能会没事的，无论如何，这项法律的执行程度还有待商榷。

> 我们将按比例执法。如果客户向我们投诉，我们将研究风险。如果网站的 cookie 和隐私对许多人构成风险，我们可能会采取行动。
> 
> 不过，需要取得平衡，**因为并非所有 cookie 都是平等的，我们的执行方法将牢记这一点**。
> 
> 例如，有人可能会抱怨未经他们同意放置的 cookie，但如果它只是用于记住基本细节而不是收集用于营销目的的信息，那么采取行动可能是不合适的。

[*（来源：ICO 的 Dave Evans 谈欧盟 cookie 法律合规性）*](http://econsultancy.com/uk/blog/9610-q-a-the-ico-s-dave-evans-on-eu-cookie-law-compliance)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T12:26:30.523

不，我认为 php 会话**不**属于 Cookie 法。Cookie 和 Session 有很多不同之处。

例如，在这里阅读：http: [//php.about.com/od/learnphp/qt/session_cookie.htm](http://php.about.com/od/learnphp/qt/session_cookie.htm)

此外，如果您阅读法律： http: [//www.bis.gov.uk/assets/biscore/business-sectors/docs/i/10-1132-implementing-revised-electronic-communications-framework-consultation.pdf](http://www.bis.gov.uk/assets/biscore/business-sectors/docs/i/10-1132-implementing-revised-electronic-communications-framework-consultation.pdf)

它说，

> “修订后的第 5 条第 3 款的规定涉及在用户设备中存储信息或访问存储信息的任何尝试”（第 57 页）

所以你看，它说“用户的设备”并且会话没有存储在那里，它们存储在服务器[http://ejvyas.blogspot.com/2010/02/where-is-stored-is-it-in-browser-或-at.html](http://ejvyas.blogspot.com/2010/02/where-is-stored-is-it-in-browser-or-at.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T15:13:37.930

据我所知，ICO 将在法律解释上相当自由，最重要的是表明你正在做出改变以符合法律精神。

我认为由于表单对网站来说是必不可少的，所以你不需要证明它对 100% 的用户来说是必不可少的。

在电子商务网站中，人们认为可以在未经许可的情况下使用与购物袋相关的 cookie，因为这对于网站的功能至关重要，即使特定用户实际上并未在他们的购物篮中添加任何东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T07:25:20.867

如果您能够在用户的计算机上存储 PHP 会话 cookie 以启用您网站的“基本”功能 - 是什么阻止了您在未经他们同意/知识的情况下将其他信息与该访问者相关联..？（除了它是非法的。）

毕竟，您存储的所有信息 - 除了客户端的 cookie ID 之外 - 都保存在服务器端，用户不能做任何事情来查看/修改它吗？

简而言之，如果用户“允许”您在他们的计算机上存储 PHP 会话 cookie，那么没有什么可以阻止您存储有关他们访问的大量其他数据？- IP、浏览器、操作系统等...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-15T21:33:39.523

阅读 GDPR 并了解会话在 php 中的工作方式后，我必须告诉您： 1\. php 中的 session_start() 在标题之前调用，因为在页面加载和标题之后您无法发送额外的标题（如 php 会话那样）完成的。2\. 因为这种情况发生在 php 中的会话是语言本身的基本要素，以使该语言能够正常工作，所以它是您需要的。不想。3\. 一个 php 会话在用户机器中存储一个带有会话 id 的 cookie 以了解连接。不是用户。例如，服务器说“我有来自某人的请求。为了不混合来自每个人的请求，请保留每个人的 id”。人员、IP、地理位置或任何其他数据当时未知。要清楚这个 session_start() 不存储任何其他数据，但会话 ID 是服务器端语言 php 和服务器本身的工作方式，并且在初始化之前不可能获得同意。4\. 但是：在存储任何其他数据之前，您必须告知。我相信你必须告知你什么时候开始做，你是怎么做的，你做多长时间以及你存储了什么。所以不再跟踪客人。第三方如 google、facebook 和您页面上的其他实现是另一回事。如果第三方还没有这样做，您几乎应该为客人删除它。所以不再跟踪客人。第三方如 google、facebook 和您页面上的其他实现是另一回事。如果第三方还没有这样做，您几乎应该为客人删除它。所以不再跟踪客人。第三方如 google、facebook 和您页面上的其他实现是另一回事。如果第三方还没有这样做，您几乎应该为客人删除它。

很简单：php 必须在 headers 之前启动会话。存储数据需要征得同意，因此当用户登录、注册或任何其他交互时会通知用户并将同意存储在数据库中（供您）和 cookie 本身（供用户知道）。

# c# - 颜色转换器的难度

> ID：10399570
> 
> 赞同：1
> 
> 时间：2012-05-01T15:00:12.853
> 
> 标签：c#, .net, colors, gradient

我在地图上有 GRP 轨道，难度从 1 到 10。我希望这些轨道根据难度具有不同的颜色。简单难度是绿色，困难是红色，中等难度是橙色。但是，我不仅需要这 3 种颜色，还需要它们之间的平滑过渡。就像每个难度点使用一种颜色或每半个点使用一种颜色。是否有任何算法来计算这些颜色及其过渡？就像以某种方式增加/减少 rgb 值？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:46:07.190

您正在寻找的是跨颜色插值的能力。仅在两种颜色之间进行插值可能还不够（因为您可能会在两者之间得到虚假颜色），而是将每种颜色的 RGB 视为 3D 空间中的一个点并沿折线进行插值（其中每个点都是一种颜色/中间颜色） ) 代表颜色（在您的情况下是困难）。[这](http://www.cs.brown.edu/stc/summer/94Animation/94Animation_19.html)是一个链接，显示了我在说什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:05:00.493

```
Red = 255,0,0
Yellow = 255, 255, 0
Green = 0,255,0 
```

制作一个从级别 1 循环到 10 的 for 循环。

对于每个级别，创建颜色如下：

```
Red = level * 25.5;
Green = 255 - (level * 25.5);
Blue = 0; 
```

然后从 RGB 值创建颜色。

显然这只是伪代码，但它应该给你一个开始的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:17:28.257

```
using System;
using System.Drawing;
using System.Windows.Forms;

public partial class MainForm : Form
{
    protected override void OnPaint(PaintEventArgs e)
    {
        Color[] colors = new Color[11];

        colors[0] = Color.Green;
        colors[1] = Interpolate(Color.Green, Color.Orange, 0.2);
        colors[2] = Interpolate(Color.Green, Color.Orange, 0.4);
        colors[3] = Interpolate(Color.Green, Color.Orange, 0.6);
        colors[4] = Interpolate(Color.Green, Color.Orange, 0.8);
        colors[5] = Color.Orange;
        colors[6] = Interpolate(Color.Orange, Color.Red, 0.2);
        colors[7] = Interpolate(Color.Orange, Color.Red, 0.4);
        colors[8] = Interpolate(Color.Orange, Color.Red, 0.6);
        colors[9] = Interpolate(Color.Orange, Color.Red, 0.8);
        colors[10] = Color.Red;

        Rectangle rect = new Rectangle(10, 10, 20, 90);
        for (int i = 0; i < colors.Length; i++)
        {
            e.Graphics.FillRectangle(new SolidBrush(colors[i]), rect);
            rect.Offset(20, 0);
        }

        base.OnPaint(e);
    }

    private static Color Interpolate(Color a, Color b, double t)
    {
        int R = (int)(a.R + (b.R - a.R) * t);
        int G = (int)(a.G + (b.G - a.G) * t);
        int B = (int)(a.B + (b.B - a.B) * t);
        return Color.FromArgb(R, G, B);
    }

    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new MainForm());
    }
} 
```

# c - 在 C 中读取特定的输入格式

> ID：10399571
> 
> 赞同：1
> 
> 时间：2012-05-01T15:00:17.097
> 
> 标签：c, input

我需要读取 N 未知的数组中一行中的所有 N 个数字。当遇到换行符时，读取另一个数组中的下一个 X 数字。X 也是未知数。

输入格式为：-

1 2 3 4 5 .. 到 N（存储在数组 A 中）

1 2 3 4 .. 到 X（存储在数组 B 中）。

如何接受这种情况的输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:24:52.277

你可以试试

```
while ( scanf(" %d%c", &num, &ch) == 2 )
{
    if ( ch =='\n') break;
    // to do :: store or whatever you want 
} 
```

它一直读到换行。

# c# - 单击按钮时如何显示表单？

> ID：10399575
> 
> 赞同：1
> 
> 时间：2012-05-01T15:00:33.567
> 
> 标签：c#, winforms, .net

在我用 C# 编码的应用程序中，我在解决方案资源管理器上右键单击我的项目，然后转到添加，然后选择 Windows 窗体并选择 Windows 窗体并按下确定！

然后我将我的表单命名为 MessageForm 而不是默认名称（ Form2 ）

现在在我的表单中我添加了一个按钮，我希望这个按钮在我点击它时向我显示另一个表单（MessageForm）所以我的代码是：

```
 MessageForm Frm = new MessageForm();
        Frm.Show(); 
```

但是有一个错误，我无法编译代码，因为我得到以下内容：

```
 Error  1   The type or namespace name 'MessageForm' could not be found (are you missing a using directive or an assembly reference?) 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:05:31.600

我怀疑您只是将文件重命名`Form2.cs`为`MessageForm.cs`而不是该文件中的实际类型名称。在“添加 Windows 窗体”对话框中单击“确定”之前，您应该替换`Form2.cs`为`MessageForm.cs`. 这样文件和类型将被正确命名。但是如果表单已经存在，您可以导航到相应的文件并替换：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }
} 
```

和：

```
public partial class MessageForm : Form
{
    public MessageForm()
    {
        InitializeComponent();
    }
} 
```

# haskell - 为什么具有多个生成器的 Haskell 列表推导将最右边的生成器视为最紧密的循环？

> ID：10399577
> 
> 赞同：15
> 
> 时间：2012-05-01T15:00:38.210
> 
> 标签：haskell, conventions

我正在阅读[Gentle Introduction](http://haskell.org/tutorial)并且想知道为什么在具有两个生成器的列表理解中，最右边的生成器被迭代“最快”（即编译到最内层循环，我猜）。观察以下 GHCi 输出：

```
*Main> concat [[(x,y) | x <- [0..2]] | y <- [0..2]]
[(0,0),(1,0),(2,0),(0,1),(1,1),(2,1),(0,2),(1,2),(2,2)]
*Main> [(x,y) | x <- [0..2], y <- [0..2]]
[(0,0),(0,1),(0,2),(1,0),(1,1),(1,2),(2,0),(2,1),(2,2)] 
```

如果最左边的生成器迭代得最快，那么上述两个表达式将具有相同的值，我认为这使得选择这个约定更自然。

那么有谁知道为什么选择了相反的约定？我注意到 Python 具有与 Haskell 相同的约定（甚至可能是从 Haskell 借来的？），在 Python 世界[中，这个词](http://www.python.org/dev/peps/pep-0202/)似乎是选择了排序“因为这是你编写 for 循环的顺序”，但是我认为从 for 循环的角度思考并不是大多数 Haskell 程序员所做的......

想法？

* * *

根据我对 Louis Wasserman 回答的评论如下：

> 我想在这里，与理解的命令式解释相对应的顺序被认为比与嵌套列表相对应更自然。因此，本质上，Haskell 对此的解释与我在问题中链接的 Python 解释相同，毕竟，看起来。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-01T15:03:44.433

所以事情的范围是理智的。

```
[(x, y) | x <- [1..10], y <- [1..x]] 
```

有道理——`x`在理解范围内`y`——但是

```
[(x, y) | y <- [1..x], x <- [1..10]] 
```

意义不大。

此外，这种方式与`do`monad 语法一致：

```
do x <- [1..10]
   y <- [1..x]
   return (x, y) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T16:00:08.130

`do`如果您先将列表推导式扩展为符号，然后再扩展为单子绑定，则可能更有意义。假设我们要编写一个推导式，在其中引用已经绑定的名称：

```
[ (x,y) | x <- [1,2,3], y <- [x+1,x+2] ] 
```

这扩展到

```
do x <- [1,2,3]
   y <- [x+1,x+2]
   return (x,y) 
```

扩展到

```
[1,2,3] >>= \x ->
[x+1,x+2] >>= \y -> 
return (x,y) 
```

这清楚地表明，`x`它恰好在需要的时候在范围内。

如果扩展为`do`符号是从右到左而不是从左到右，那么我们的原始表达式将扩展为

```
[x+1,x+2] >>= \y ->
[1,2,3] >>= \x ->
return (x,y) 
```

这显然是荒谬的 - 它指的是尚未绑定`x`的范围内的值。`x`所以我们必须把我们原来的理解写成

```
[ (x,y) | y <- [x+1,x+2], x <- [1,2,3] ] 
```

为了得到我们想要的结果，这似乎不自然——当你的眼睛扫描`y <- [x+1,x+2]`你实际上并不知道是什么的短语时`x`。您必须向后阅读理解才能找出答案。

因此，*不需要*将最右边的绑定展开到“内循环”中，但是当您考虑到人类将不得不阅读生成的代码时，这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:09:43.340

实际上 Python 使用与 Haskell 相同的范围结构来进行列表推导。

比较你的 Haskell：

```
*Main> concat [[(x,y) | x <- [0..2]] | y <- [0..2]]
[(0,0),(1,0),(2,0),(0,1),(1,1),(2,1),(0,2),(1,2),(2,2)]
*Main> [(x,y) | x <- [0..2], y <- [0..2]]
[(0,0),(0,1),(0,2),(1,0),(1,1),(1,2),(2,0),(2,1),(2,2)] 
```

使用这个 Python：

```
>>> from itertools import chain
>>> list(chain(*[[(x,y) for x in range(3)] for y in range(3)]))
[(0, 0), (1, 0), (2, 0), (0, 1), (1, 1), (2, 1), (0, 2), (1, 2), (2, 2)]
>>> [(x,y) for x in range(3) for y in range(3)]
[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]
>>> 
```

# android - 如何解决 Eclipse ADB 无法建立环回连接的问题？

> ID：10399582
> 
> 赞同：1
> 
> 时间：2012-05-01T15:00:40.930
> 
> 标签：android, eclipse, adb, loopback

我正在使用学校计算机进行一些 Android 编程。它工作了一段时间，直到突然我收到以下错误消息：

```
[2012-05-01 07:55:19 - ddms]Failed to initialize Monitor Thread: Unable to establish loopback connection
[2012-05-01 07:56:35 - DeviceMonitor]Adb connection Error:An existing connection was forcibly closed by the remote host
[2012-05-01 07:56:36 - DeviceMonitor]Connection attempts: 1 
```

我试过重置亚行。我尝试从命令窗口杀死并重新启动 ADB。我运行了命令：

```
E:\Java\Android\android-sdk\platform-tools>netsh interface teredo set state disa
bled
Ok. 
```

我无法访问控制面板或 C 盘。可能是学校的防火墙阻止我建立连接。有谁知道解决方法，以便我可以重新编程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:55:32.273

启用 IPv6 中的问题：更改 ddms.bat 中的最后一个字符串

```
call %java_exe% %java_debug% -Dcom.android.ddms.bindir=%prog_dir% -classpath "%jarpath%;%swt_path%\swt.jar" com.android.ddms.Main %* 
```

`%java_debug%`添加以下内容后

```
-Djava.net.preferIPv4Stack=true 
```

对于日食变化`eclipse.ini`：

```
 openFile
-vmargs
-Djava.net.preferIPv4Stack=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:24:37.883

尝试从您的设备禁用 USB 调试，然后重新启用该功能。在我的一些设备上，似乎 ADB 故障出在设备上，而不是在运行 Eclipse 的客户端机器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:23:56.513

它是在您使用 Eclipse 时停止工作，还是您回到机器后发现它不再工作？

通常，当我遇到这种情况时，拔下设备（或完全关闭模拟器）、杀死 adb（`adb kill-server`）、关闭 Eclipse，然后重新启动 adb（`adb start-server`），然后重新插入设备（或重新启动模拟器）就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T06:58:47.673

我看到您可能正在 Windows 上工作（查看路径），但重置我的 USB 堆栈在 Ubuntu 上为我解决了这个问题。讨论的其他解决方案的成功有限。

`sudo service udev restart`通过在终端中输入重新启动 udev 。

# php - 如何使用 Jumi 插件将 php 代码直接添加到文章中

> ID：10399585
> 
> 赞同：0
> 
> 时间：2012-05-01T15:00:49.263
> 
> 标签：php, javascript, joomla1.5, joomla-extensions, jumi

大家好，我在 joomla 1.5 中安装了**Jumi 插件 2.0 版**并尝试在文章中编写 php 代码。如果我将 php 源存储在外部文件中并在**{jumi [../../filename.php]}**等内容中调用它，我就可以使用代码。但是我无法使用 JCE 编辑器将相同的代码直接写入内容中。我收到一个错误，例如“Jumi 正在工作，但来源需要放在方括号内”。问题是我还需要为 div 标签和 js 使用 php 变量输出。我不知道如何克服这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:19:16.943

由于这个原因和其他原因，JUMI 从来没有太多运气，所以切换到[DirectPHP](http://extensions.joomla.org/extensions/edition/custom-code-in-content/4470)并将 PHP 保留在文章本身中。

# delphi - 在 Word 文档中用破折号替换项目符号

> ID：10399593
> 
> 赞同：7
> 
> 时间：2012-05-01T15:01:30.947
> 
> 标签：delphi, vba, ms-word, activex

我正在尝试用破折号替换word文档中列表的项目符号，基本上只有要替换的“渲染图标”，即

**替换以下列表中的项目符号：**

*   这是一个列表项

*   这是另一个列表项

*   还有一个项目

**用破折号：**

> — 这是一个列表项
> 
> — 这是另一个列表项
> 
> ——还有一个项目

我将在 Delphi 中使用 ActiveX 来执行此操作，但 VB 代码也可以，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T16:03:58.330

这是你正在尝试的吗？

```
Option Explicit

'~~> Select the relevant range before running this code
Sub Sample()
    With ListGalleries(wdBulletGallery).ListTemplates(1).ListLevels(1)
        .NumberFormat = ChrW(61485)
        .TrailingCharacter = wdTrailingTab
        .NumberStyle = wdListNumberStyleBullet
        .NumberPosition = InchesToPoints(0.25)
        .Alignment = wdListLevelAlignLeft
        .TextPosition = InchesToPoints(0.5)
        .ResetOnHigher = 0
        .StartAt = 1
        .Font.Name = "Symbol"
        .LinkedStyle = ""
    End With
    ListGalleries(wdBulletGallery).ListTemplates(1).Name = ""

    Selection.Range.ListFormat.ApplyListTemplateWithLevel ListTemplate:= _
    ListGalleries(wdBulletGallery).ListTemplates(1), ContinuePreviousList:= _
    False, ApplyTo:=wdListApplyToSelection, DefaultListBehavior:= _
    wdWord10ListBehavior
End Sub 
```

**快照**

![在此处输入图像描述](../Images/8cbf52961fd254fd87628e7013b6d69b.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T19:26:30.027

在**德尔福**代码中：

```
uses ..., ComObj;

const
  wdListNumberStyleBullet = 23;
var
  vMSWord                      : variant;
    Doc                          : Variant;
  oListTemplate                : Variant;
  oListLevel                   : Variant;
  iLoopTemplates, iMaxTemplates: Integer;
  iLoopLevels, iMaxLevels      : Integer;
begin
  try
    vMSWord         := GetActiveOleObject('Word.Application');
    vMSWord.Visible := True;
    Doc             := vMSWord.ActiveDocument;
    iMaxTemplates   := Doc.ListTemplates.Count;
    for iLoopTemplates := 1 to iMaxTemplates do
    begin
      oListTemplate := Doc.ListTemplates.Item(iLoopTemplates);
      iMaxLevels    := oListTemplate.ListLevels.Count;
      for iLoopLevels := 1 to iMaxLevels do
      begin
        oListLevel := oListTemplate.ListLevels.Item(iLoopLevels);
        if      (oListLevel.NumberStyle  = wdListNumberStyleBullet)
            and (oListLevel.NumberFormat = UTF8String(#61623))
            and (oListLevel.Font.Name    = 'Symbol') then
//        if (oListLevel.NumberStyle = wdListNumberStyleBullet) then
        begin
          oListLevel.NumberFormat := UTF8String('-');
          oListLevel.Font.Name    := 'Arial';
        end;
      end;
    end;
  except
    ShowMessage('Open a Word document before running this method');
  end; 
```

当前的***IF***正在检查它是否真的是带有 • 的 • 子弹

如果您不需要此检查，请注释此行 ( *if...* ) 并取消注释下一行...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T16:27:57.117

一个可以完成这项工作的宏......

```
Dim oListTemplate As ListTemplate
Dim oListLevel As ListLevel

For Each oListTemplate In ActiveDocument.ListTemplates
    For Each oListLevel In oListTemplate.ListLevels
        If oListLevel.NumberStyle = wdListNumberStyleBullet Then
            With oListLevel
                .NumberFormat = "-"
                .Font.Name = "Arial"
            End With
        End If
    Next oListLevel
Next oListTemplate 
```

# jquery - jquery & SEO - 使用方法通过 js 隐藏内容

> ID：10399594
> 
> 赞同：0
> 
> 时间：2012-05-01T15:01:36.967
> 
> 标签：jquery, seo

我们目前有许多客户，我们为其建立网站，他们不断要求将整个主页列为 jpeg（其中大部分是时尚客户）......

我知道使用 SEO，无论如何您都不允许伪装页面，但是我想知道是否有人知道是否可以执行以下操作。

1.  创建页面内的所有内容
2.  在页面内创建与页面图像内容相关的文章
3.  使用 $("divid").hide(); 隐藏页面内的所有文本 或 $("#divid").remove()

因为它是 javascript，我想知道当提交给谷歌时它会对页面产生什么样的影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:05:19.790

向搜索引擎提供不同的内容，无论方法或技术如何，都被称为伪装，违反了他们的服务条款。您尝试做的事情将被视为伪装，最终会导致您客户的网站被禁止。

# java - 在对象中表示优先级/偏好的最佳方式是什么？

> ID：10399598
> 
> 赞同：6
> 
> 时间：2012-05-01T15:02:03.520
> 
> 标签：java, oop, design-patterns, domain-driven-design

在域中建模优先级/偏好的最佳方法是什么？
例如，假设我有一个`Person`代表一个人的类并且有一些偏好，例如`PersonX`喜欢披萨、意大利面条和煎蛋卷，实际上他更喜欢意大利面条而不是披萨。
这些是如何最好地建模的？
第一个想法就是把它们放在一个`List`（作为 的成员变量`Person`）中，根据插入顺序保持偏好，例如列表中的第一个是最喜欢的，然后列表中的第二个是第二个最喜欢的等等，但这似乎我最终太乏味了。例如，当我想对偏好等进行搜索或关联时。
也许有这样的问题的标准方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:13:58.523

您可以按照您的建议使用该列表，并向您的 Person 类添加一个方法，该方法将返回一个`Comparator<Preference>`能够比较该人的 2 个偏好的方法：

```
Person somebody.addPreference(pizzaPreference);
Person somebody.addPreference(omelettePreference);
....
Comparator<Preference> c = somebody.getPreferenceComparator();
boolean prefersPizzaOverOmelette = (c.compare(pizzaPreference, omelettePreference) > 0);
boolean hasNoPreferenceBetweenPizzaAndOmelette = (c.compare(pizzaPreference, omelettePreference) == 0); 
```

比较器会简单地检查列表中的首选项索引（如果它包含该首选项等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:14:51.463

您可以使用[优先级队列](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)来表示对象优先级，并为您的类定义一个适当`Comparator`的考虑到所描述的规则。队列使用优先级堆，该堆将负责在插入对象时维护按优先级排序的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:20:03.437

使用这样的类结构...（请原谅草率的 Java...我是 C# 人）

```
public class PersonPreference
{
     public Preference preference;
     public int rank;
} 
```

然后，允许您的用户对他们的偏好（因此，排名列）进行排序，并在必要时对该属性/列进行排序。

**编辑**

再看一遍，我想重新定义我的班级。偏好应该是用户的喜好与另一个喜好相比...

```
public class PersonLike
{
     public string like;
     public int rank;
} 
```

这个新类定义了一个人喜欢的东西，并且它允许一个排名，这样当你有这个类的许多实例（或它的数据表示）时，它们可以被排名，这实际上产生了偏好，因为偏好本质上是用户喜欢某物而不是其他东西。喜欢本身并不是一种偏好，因为它没有与其他任何东西进行比较。

这种方法允许对 n 个兴趣进行排名，从而创建大量偏好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T17:01:14.260

`Preference`作为一个整体，它本身就是一个完整的实体，尽管它没有任何意义，除非它与任何实体相关联`Person`但可以独立存在。

就 Preference 优先级而言，`Preference`没有任何优先级 Omelet，Pizza 都是相似的，但是当它与 Person 关联时它具有优先级（比如说我喜欢 Pizza 多于 omelet，取决于我而不是 Pizza 或 Omelet ）。

所以你有一个`Preference`和`Person`对象。

现在 Preference 将因人而异，因此您将 Preference 与 Person 相关联。

由于优先级在很大程度上取决于 Person 你有多种选择来实现：

1.  使用[PriorityQueue](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html) - 添加 Preference 时分配优先级。该队列将出现在 Person 类本身中
2.  使用自定义比较器（如@assylias 所建议）
3.  将规则添加到首选项（基于位置、性别等）并具有预先配置的规则，当给定某些标准时，这些规则将返回系统计算的首选项，尽管对此进行手动覆盖。在这种情况下，您可以只使用`PriorityQueue`.

# wpf - 如何防止 TextBox 在 Grid 内垂直拉伸

> ID：10399599
> 
> 赞同：0
> 
> 时间：2012-05-01T15:02:09.183
> 
> 标签：wpf, xaml

在下面的标记中，文本框垂直填充整个网格行，无论行高有多大。对于单行文本框，这看起来不太好。我需要它垂直居中，并且高度刚好适合当前字体。在文本框上设置 Height 属性会有所帮助，但我不想硬编码高度以防字体更改。

```
<Grid FocusManager.FocusedElement="{Binding ElementName=TitleBox}">
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto" />
  </Grid.ColumnDefinitions>
  <TextBox Name="TitleBox"
           Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}"
           Grid.Column="0" />
  <Button Command="{Binding CreateCommand}"
          IsDefault="True"
          Grid.Column="1">Create</Button>
</Grid> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T15:04:53.763

将`VerticalAlignment`文本框的 设置为`Center`。默认值`Stretch`解释了为什么它会伸展以填充整个网格单元：

```
VerticalAlignment="Center" 
```

# sphinx - 从 aspell 创建 Sphinx 词形

> ID：10399602
> 
> 赞同：1
> 
> 时间：2012-05-01T15:02:20.277
> 
> 标签：sphinx, aspell

是否有可能从 aspell 为 sphinx 创建词形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:45:00.697

我从未使用过 Aspell，但转储字典看起来很容易

[http://aspell.net/0.50-doc/man-html/5_Working.html](http://aspell.net/0.50-doc/man-html/5_Working.html)

从那里将该文件转换为wordforms文件应该很简单。

# dns - 使用主机文件将一个主机名解析为另一个

> ID：10399603
> 
> 赞同：16
> 
> 时间：2012-05-01T15:02:29.187
> 
> 标签：dns, hosts

我知道如何使用我的主机文件将主机名解析为 IP 地址，例如

```
1.2.3.4 example.com 
```

但是是否可以将主机名解析为另一个

```
example.com example1.com 
```

与主机文件？原因是，我正在测试一个新站点，托管使用虚拟主机，因此 IP 地址上有多个域。Apache 中的 ServerAlias 也不是一个选项。

任何帮助表示赞赏！

谢谢斯蒂芬

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T15:07:34.637

不。

您可以在主机文件中添加多个主机名，例如：1.2.3.4 hostname1 hostname2

但是每次你查找一个名字或地址时，你只会得到整行。或者那是你想要的？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T15:59:11.813

您无法将一个域解析为另一个域，但您可以为一个 IP 设置多个主机名，如下所示：

```
1.2.3.4 example.com
1.2.3.4 example1.com
1.2.3.4 example.net
1.2.3.4 example.net 
```

# lithium - 锂链路路由

> ID：10399610
> 
> 赞同：1
> 
> 时间：2012-05-01T15:02:53.303
> 
> 标签：lithium

我正在尝试创建我的第一个锂应用程序，但我遇到了一个非常奇怪的错误。

我的索引视图中有一行，

`<td><?php echo $this->html->link($question->title, array('controller'=>'questions','action'=>'view','id'=>$question->id)); ?></td>`

我想它会链接到该记录视图，并且使用`'questions/view'.$question->id'`它确实如此，但是，使用数组 url 我得到了致命的。

`Fatal error: Uncaught exception 'lithium\net\http\RoutingException' with message 'No parameter match found for URL`('控制器' => '问题', '动作' => '视图', 'id' => '1')`.' in /Applications/MAMP/htdocs/learning-lithium/libraries/lithium/net/http/Router.php on line 306`

在我看来，路由器正在尝试匹配帮助程序中的 url，并且由于某种原因它不能，因此它抛出了异常。有谁知道这是为什么？我从 CakePHP 的角度攻击锂，所以这对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:09:51.123

`'args'`参数由默认路由处理，并作为参数传递给您的操作方法。

试试这个：

```
<?=$this->html->link($question->title, array('Questions::view', 'args' => array($question->id))); ?> 
```

要使用`id`参数对其进行路由，您需要指定一个通过 查找 id 参数的路由`{:id}`。查看“数据库对象路由”部分的默认 routes.php 文件。为了完整起见，我将在下面复制一些示例：

```
/**
 * ### Database object routes
 *
 * The routes below are used primarily for accessing database objects, where `{:id}` corresponds to
 * the primary key of the database object, and can be accessed in the controller as
 * `$this->request->id`.
 *
 * If you're using a relational database, such as MySQL, SQLite or Postgres, where the primary key
 * is an integer, uncomment the routes below to enable URLs like `/posts/edit/1138`,
 * `/posts/view/1138.json`, etc.
 */
// Router::connect('/{:controller}/{:action}/{:id:\d+}.{:type}', array('id' => null));
// Router::connect('/{:controller}/{:action}/{:id:\d+}');

/**
 * If you're using a document-oriented database, such as CouchDB or MongoDB, or another type of
 * database which uses 24-character hexidecimal values as primary keys, uncomment the routes below.
 */
// Router::connect('/{:controller}/{:action}/{:id:[0-9a-f]{24}}.{:type}', array('id' => null));
// Router::connect('/{:controller}/{:action}/{:id:[0-9a-f]{24}}'); 
```

因此，您需要根据您的 id 采用的格式取消注释这两个部分之一。他们使用带有 id 参数的正则表达式来确保它不匹配不是 id 的 url 参数。顺便说一句，第一条路线是设置 id 的默认值，`null`这对我来说并不完全有意义，因为我认为该路线永远不会与空值匹配，但无论如何，这就是你为你的设置默认值的方式参数。

请注意，如果您这样做，您的控制器操作方法需要如下所示：

```
public function view() {
    $id = $this->request->id;
    // or an alternative that does the same thing
    // $id = $this->request->get("params::id");
    // ... etc ...
} 
```

获取作为参数传递给控制器​​操作方法的 url 片段的唯一方法是使用`'args'`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:37:18.190

您没有在路由中使用命名参数，因此只需在视图中输出以下内容：

```
<?php echo $this->html->link($question->title, array('controller'=>'questions', 'action'=>'view', $question->id));?> 
```

QuestionsController 中的函数签名应该是：

```
public function view($id) {} 
```

# browser - 为什么即使我可以在我的 linux localhost 上 curl 也无法在浏览器中打开网站？

> ID：10399612
> 
> 赞同：1
> 
> 时间：2012-05-01T15:03:11.783
> 
> 标签：browser, curl, webserver

我可以使用 curl [http://localhost:9000卷曲内部托管站点的内容，但是当我尝试在 Windows 浏览器](http://localhost:9000)[http://ip-address:9000/](http://ip-address:9000/)中打开相同内容时无法连接。我正在尝试从内部网络中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:03:45.937

管理员需要打开 iptables 端口 3000，然后在浏览器上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:40:58.073

通过 curl 使用`localhost`地址获取站点意味着您的机器（本地主机）是托管该站点的机器。然后您说您在 Windows 上，并且该站点由 linux 机器提供服务。它是哪一个？

无论如何，如果您可以使用 curl 通过 curl 获取内容`http://localhost:9000`，那么您应该可以通过 web 浏览器使用`http://localhost:9000`. 试试看。

# python - 访问嵌套字典中的值

> ID：10399614
> 
> 赞同：41
> 
> 时间：2012-05-01T15:03:20.250
> 
> 标签：python, dictionary

我是 python 新手，需要帮助解决问题：

我有一本像

```
tmpDict = {'ONE':{'TWO':{'THREE':10}}} 
```

除了做之外，我们还有其他方式来获取 THREE 的价值吗？

```
tmpDict['ONE']['TWO']['THREE'] 
```

?

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-01T15:15:27.220

在 python 中，当然有几种方法可以做到这一点，但**有一种明显的方法可以做到这一点。**

`tmpdict["ONE"]["TWO"]["THREE"]` *是*显而易见的方法。

当这不适合您的算法时，这可能暗示您的结构不是最适合该问题的结构。

如果您只想节省重复输入，您当然可以为字典的一个子集起别名：

```
>>> two_dict = tmpdict['ONE']['TWO'] # now you can just write two_dict for tmpdict['ONE']['TWO']
>>> two_dict["spam"] = 23
>>> tmpdict
{'ONE': {'TWO': {'THREE': 10, 'spam': 23}}} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-01T15:10:53.203

您可以在每个字典上使用 get() 。确保您已为每个访问添加了无检查。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-12-28T10:01:48.000

我的实现：

```
def get_nested(data, *args):
    if args and data:
        element  = args[0]
        if element:
            value = data.get(element)
            return value if len(args) == 1 else get_nested(value, *args[1:]) 
```

示例用法：

```
>>> dct={"foo":{"bar":{"one":1, "two":2}, "misc":[1,2,3]}, "foo2":123}
>>> get_nested(dct, "foo", "bar", "one")
1
>>> get_nested(dct, "foo", "bar", "two")
2
>>> get_nested(dct, "foo", "misc")
[1, 2, 3]
>>> get_nested(dct, "foo", "missing")
>>> 
```

如果缺少键，则不会引发异常，在这种情况下返回 None 值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-08-24T09:23:09.730

Sivasubramaniam Arunachalam 或 ch3ka 已经给出了答案。

我只是在添加答案的性能视图。

```
dicttest={}
dicttest['ligne1']={'ligne1.1':'test','ligne1.2':'test8'}
%timeit dicttest['ligne1']['ligne1.1']
%timeit dicttest.get('ligne1').get('ligne1.1') 
```

给我们 ：

> 每个循环 112 ns ± 29.7 ns（平均值 ± 标准偏差。7 次运行，每次 10000000 次循环）
> 
> 每个循环 235 ns ± 9.82 ns（平均值 ± 标准偏差。7 次运行，每次 1000000 次循环）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-01T15:06:37.047

不，那些是嵌套字典，所以这是唯一真正的方法（你可以使用`get()`，但本质上是一样的）。但是，还有另一种选择。您可以使用元组作为键来代替嵌套字典：

```
tempDict = {("ONE", "TWO", "THREE"): 10}
tempDict["ONE", "TWO", "THREE"] 
```

这确实有一个缺点，例如，没有（简单和快速）获取所有元素的`"TWO"`方法，但如果这无关紧要，这可能是一个很好的解决方案。

# java - 库和库文件夹之间的区别？我们如何将 jar 文件添加到 lib 文件夹？

> ID：10399617
> 
> 赞同：0
> 
> 时间：2012-05-01T15:03:29.517
> 
> 标签：java, eclipse, jar

当我创建动态 Web 项目时，我将有 2 个文件夹，名称为 Libraries 和 lib。所以在项目期间我添加了.jar文件如下

```
Build Path --> Configure Build Path--> Libraries (tab) --> Add external JAR's -- > OK 
```

当我这样做时，它会将文件添加到库中，但是我想将 .jar 文件添加到 lib 文件夹中。

![在此处输入图像描述](../Images/e010e7544d7ea8a070767732ef7d5245.png)

我尝试将所有 .jar 文件从库复制到 lib，但它说

![在此处输入图像描述](../Images/909a9a0ff4133cf3c0ed09c0a6db5a02.png)

将 .jar 文件直接复制到目录结构中的 lib 文件夹中，但我没有在 eclipse 中显示。

![在此处输入图像描述](../Images/56553b5718798ae420e8f5aa624508cc.png)

感谢您的建议和意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:16:03.280

`WEB-INF/lib`通过复制文件本身（不是从 Eclipse 视图中的库）将 jar 复制到目录中，然后从 Eclipse 中点击刷新，它们将出现在`Web App Libraries`

PS：使用 maven/ant 之类的构建工具来管理依赖项几乎总是更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:07:32.957

*   在文件浏览器中打开 lib 文件夹并粘贴所有复制的 jar。
*   刷新lib文件夹

# msmq - msmq 是否确保事务队列上的数据完整性？

> ID：10399626
> 
> 赞同：3
> 
> 时间：2012-05-01T15:04:13.153
> 
> 标签：msmq, firewall, data-integrity, transactional-queue

我正在使用 MSMQ 传输`byte`数组。

格式化程序是一个`BinaryMessageFormatter`.

目标队列是私有队列，我使用的是直接 TCP 通信。

目标机器位于不同的 LAN 中，我通过其外部 IP 地址访问它。

有一个防火墙将传入的 TCP 通信路由到实际的目标机器（端口转发）。

所以系统的架构是这样的：

```
[源机器] --> [目标防火墙] --> [目标机器]
```

我已经使用该系统几个月了，一切都很好。

最近我们遇到了防火墙故障。

显然，这导致了数据损坏：

虽然队列是事务性的，并且根据 MSMQ，消息已成功传递到目标计算机，但消息的内容已损坏。

也就是说，从队列中读取消息的代码引发了异常：

```
try
{
    var message = queue.Receive(readTimeout, transaction);
    if (message != null)
    {
        data = (byte[]) message.Body; // this line raises an exception
        return true;
    }
}
catch (Exception e)
{
    Logger.Error("error reading queue", e);
} 
```

我不得不从队列（顶部）删除一些消息，然后系统恢复正常。

# 我的问题：

假设只是防火墙的故障导致了这种情况，并且知道它是一个事务队列，那么为什么认为消息已传递？
MSMQ 不是在执行某种校验和以确保事务队列上的数据完整性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:16:43.320

目前看来 MSMQ 在数据完整性和完整性方面完全“信任” TCP 层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:35:48.633

这只是一个猜测，但我认为[分布式事务协调](http://msdn.microsoft.com/en-us/library/ms684146.aspx)器（DTC）可能在这里遇到麻烦。顾名思义，DTC 负责处理涉及网络中多个系统的事务。

在您的场景中，我可以想象的是，无法通过您的不同 LAN 正确管理事务。

我对您的建议是检查两个网络中涉及的 DTC 实例的配置，是否可以选择启用它们之间的通信和/或研究是否需要设置防火墙以允许 DTC 通信。

# winapi - 防止在 GetOpenFileName、CFileDialog、IFileOpenDialog 等中加载所有非系统 shell 扩展

> ID：10399627
> 
> 赞同：2
> 
> 时间：2012-05-01T15:04:14.137
> 
> 标签：winapi, mfc, shell-extensions

我正在寻找一种使用资源管理器外壳提示用户输入文件名的编程方式，我只希望加载系统外壳扩展。

我正在寻找此功能的原因是我想消除 3rd 方 shell 扩展作为崩溃和其他不确定行为的可能原因。

理想情况下，在某处我错过了一个标志，我可以将它传递给一个函数，这意味着类似于“安全模式”的资源管理器实例，它只加载系统外壳扩展。这似乎是一个必不可少的功能，我花了很多时间研究文档却无济于事。

我查看了 CFileDialog、GetOpenFileName 和 IFileOpenDialog 的 API 文档。看起来阻止加载非系统外壳扩展的唯一方法是通过注册表玩弄或使用软件实用程序进行某种全局黑客攻击。对于表现良好的应用程序来说，这些都不能令人满意。

我知道我可以使用不基于资源管理器的“旧式”文件对话框，但如果我强迫他们这样做，我的用户会杀了我。:)

我能想到的唯一方法是（呃）重新发明轮子并编写一个类似资源管理器的文件打开对话框。

# c# - 两个线程之间的共享变量的行为与共享属性不同

> ID：10399628
> 
> 赞同：6
> 
> 时间：2012-05-01T15:04:15.620
> 
> 标签：c#, .net, concurrency, thread-safety, volatile

在他关于 C# 线程的出色论文中，Joseph Albahari 提出了以下简单的程序来演示为什么我们需要使用某种形式的内存隔离来围绕由多个线程读取和写入的数据。如果您在发布模式下编译程序并在没有调试器的情况下自由运行它，程序将永远不会结束：

```
 static void Main()
  {
     bool complete = false;
     var t = new Thread(() =>
     {
        bool toggle = false;
        while (!complete) toggle = !toggle;
     });
     t.Start();
     Thread.Sleep(1000);
     complete = true;                  
     t.Join(); // Blocks indefinitely
  } 
```

我的问题是，为什么上面程序的以下稍微修改的版本不再无限期阻塞？

```
class Foo
{
  public bool Complete { get; set; }
}

class Program
{
  static void Main()
  {
     var foo = new Foo();
     var t = new Thread(() =>
     {
        bool toggle = false;
        while (!foo.Complete) toggle = !toggle;
     });
     t.Start();
     Thread.Sleep(1000);
     foo.Complete = true;                  
     t.Join(); // No longer blocks indefinitely!!!
  }
} 
```

而以下仍然无限期阻塞：

```
class Foo
{
  public bool Complete;// { get; set; }
}

class Program
{
  static void Main()
  {
     var foo = new Foo();
     var t = new Thread(() =>
     {
        bool toggle = false;
        while (!foo.Complete) toggle = !toggle;
     });
     t.Start();
     Thread.Sleep(1000);
     foo.Complete = true;                  
     t.Join(); // Still blocks indefinitely!!!
  }
} 
```

如下所示：

```
class Program
{
  static bool Complete { get; set; }

  static void Main()
  {
     var t = new Thread(() =>
     {
        bool toggle = false;
        while (!Complete) toggle = !toggle;
     });
     t.Start();
     Thread.Sleep(1000);
     Complete = true;                  
     t.Join(); // Still blocks indefinitely!!!
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T15:20:33.873

在第一个示例`Complete`中是一个成员变量，可以为每个线程缓存在寄存器中。由于您没有使用锁定，因此对该变量的更新可能不会刷新到主内存，并且另一个线程将看到该变量的陈旧值。

在第二个例子中， where`Complete`是一个属性，你实际上是在 Foo 对象上调用一个函数来返回一个值。我的猜测是，虽然简单的变量可能会缓存在寄存器中，但编译器可能并不总是以这种方式优化实际属性。

编辑：

关于自动属性的优化 - 我认为规范在这方面没有任何保证。您基本上依赖于编译器/运行时是否能够优化 getter/setter。

在它位于同一个对象上的情况下，它似乎确实如此。在另一种情况下，似乎没有。无论哪种方式，我都不会打赌。解决此问题的最简单方法是使用简单的成员变量和标记，`volotile`以确保它始终与主内存同步。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T15:12:23.207

这是因为在您提供的第一个片段中，您创建了一个封闭布尔值的 lambda 表达式`complete`- 因此，当编译器重写它时，它会捕获值的副本，而不是引用。同样，在第二个中，由于关闭了`Foo`对象，它正在捕获引用而不是副本，因此当您更改基础值时，由于引用而注意到更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T15:26:16.223

其他答案以技术上正确的术语解释了发生的事情。让我看看能不能用英文解释一下。

第一个例子说“循环直到这个变量位置为真”。新线程创建该变量位置的副本（因为它是值类型）并继续循环下去。如果变量碰巧是一个引用类型，它会复制一个引用，但由于引用碰巧指向同一个内存位置，它本来可以工作的。

第二个例子说“循环直到这个方法（getter）返回真”。新线程无法创建方法的副本，因此它会创建对相关类实例的引用的副本，并在该实例上重复调用 getter 直到它返回 true（重复读取设置的相同变量位置在主线程中为真）。

第三个例子和第一个例子一样。封闭变量恰好是另一个类实例的成员这一事实无关紧要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T23:48:31.890

扩展[Eric Petroelje 的答案](/a/10399863/234)。

如果我们如下重写程序（行为相同，但避免使用 lambda 函数使反汇编更容易阅读），我们可以对其进行反汇编，看看“缓存寄存器中的字段值”实际上意味着什么

```
class Foo
{
    public bool Complete; // { get; set; }
}

class Program
{
    static Foo foo = new Foo();

    static void ThreadProc()
    {
        bool toggle = false;
        while (!foo.Complete) toggle = !toggle;

        Console.WriteLine("Thread done");
    }

    static void Main()
    {
        var t = new Thread(ThreadProc);
        t.Start();
        Thread.Sleep(1000);
        foo.Complete = true;
        t.Join();
    }
} 
```

我们得到以下行为：

```
 Foo.Complete is a Field  |   Foo.Complete is a Property
x86-RELEASE  |      loops forever        |          completes  
x64-RELEASE  |        completes          |          completes 
```

在 x86 版本中，CLR JIT 将 while(!foo.Complete) 编译为以下代码：

Complete 是一个字段：

```
004f0153 a1f01f2f03      mov     eax,dword ptr ds:[032F1FF0h] # Put a pointer to the Foo object in EAX
004f0158 0fb64004        movzx   eax,byte ptr [eax+4]  # Put the value pointed to by  [EAX+4] into EAX (this basically puts the value of .Complete into EAX)
004f015c 85c0            test    eax,eax   # Is EAX zero? (is .Complete false?)
004f015e 7504            jne     004f0164  # If it is not, exit the loop
# start of loop
004f0160 85c0            test    eax,eax   # Is EAX zero? (is .Complete false?)
004f0162 74fc            je      004f0160  # If it is, goto start of loop 
```

最后两行是问题。如果 eax 为零，那么它只会在一个无限循环中说“EAX 为零吗？”，**而无需任何代码更改 eax 的值！**

Complete 是一个属性：

```
00220155 a1f01f3a03      mov     eax,dword ptr ds:[033A1FF0h] # Put a pointer to the Foo object in EAX
0022015a 80780400        cmp     byte ptr [eax+4],0 # Compare the value at [EAX+4] with zero (is .Complete false?)
0022015e 74f5            je      00220155 # If it is, goto 2 lines up 
```

这实际上看起来像更好的代码。虽然 JIT 已将属性 getter（否则您会看到一些`call`指令转到其他函数）内联到一些简单的代码中以`Complete`直接读取该字段，因为它不允许缓存变量，当它生成循环时，它会重复读取一遍又一遍的记忆，而不仅仅是毫无意义地读取寄存器

在 x64 版本中，64 位 CLR JIT 将 while(!foo.Complete) 编译成这段代码

Complete 是一个字段：

```
00140245 48b8d82f961200000000 mov rax,12962FD8h # put 12E12FD8h into RAX. 12E12FD8h is a pointer-to-a-pointer in some .NET static object table
0014024f 488b00          mov     rax,qword ptr [rax] # Follow the above pointer; puts a pointer to the Foo object in RAX
00140252 0fb64808        movzx   ecx,byte ptr [rax+8] # Add 8 to the pointer to Foo object (it now points to the .Complete field) and put that value in ECX
00140256 85c9            test    ecx,ecx # Is ECX zero ? (is the .Complete field false?)
00140258 751b            jne     00140275 # If nonzero/true, exit the loop
0014025a 660f1f440000    nop     word ptr [rax+rax]  # Do nothing!
# start of loop
00140260 48b8d82f961200000000 mov rax,12962FD8h # put 12E12FD8h into RAX. 12E12FD8h is a pointer-to-a-pointer in some .NET static object table 
0014026a 488b00          mov     rax,qword ptr [rax] # Follow the above pointer; puts a pointer to the Foo object in RAX 
0014026d 0fb64808        movzx   ecx,byte ptr [rax+8] # Add 8 to the pointer to Foo object (it now points to the .Complete field) and put that value in ECX
00140271 85c9            test    ecx,ecx # Is ECX Zero ? (is the .Complete field true?)
00140273 74eb            je      00140260 # If zero/false, go to start of loop 
```

Complete 是一个属性

```
00140250 48b8d82fe11200000000 mov rax,12E12FD8h # put 12E12FD8h into RAX. 12E12FD8h is a pointer-to-a-pointer in some .NET static object table
0014025a 488b00          mov     rax,qword ptr [rax] # Follow the above pointer; puts a pointer to the Foo object in RAX
0014025d 0fb64008        movzx   eax,byte ptr [rax+8] # Add 8 to the pointer to Foo object (it now points to the .Complete field) and put that value in EAX
00140261 85c0            test    eax,eax # Is EAX 0 ? (is the .Complete field false?)
00140263 74eb            je      00140250 # If zero/false, go to the start 
```

64 位 JIT 对属性和字段都做同样的事情，除了当它是一个字段时，它会“展开”循环的第一次迭代——这基本上`if(foo.Complete) { jump past the loop code }`出于某种原因在它前面放了一个。

在这两种情况下，它在处理属性时都与 x86 JIT 做类似的事情：
- 将方法内联到直接内存读取 - 它不缓存它，并且每次都重新读取值

我不确定 64 位 CLR 是否不允许像 32 位一样将字段值缓存在寄存器中，但如果是这样，那就不用担心了。也许它会在未来？

无论如何，这说明了行为是如何依赖于平台并可能发生变化的。我希望它有帮助:-)

# qt - 在控制台外运行应用程序时“找不到 qtCored4.dll”。可能是什么问题？

> ID：10399629
> 
> 赞同：0
> 
> 时间：2012-05-01T15:04:16.877
> 
> 标签：qt

从 mingw 控制台内部运行应用程序时，它可以毫无问题地执行。但是当我尝试在 Windows 资源管理器的调试文件夹中执行相同的 exe 文件时，它说**没有找到 QtCored4.dll。**我什至将 bin 文件夹位置添加到环境变量中，但随后又产生了另一个错误：**程序入口点 _Z5qFreePv 无法位于动态链接库中......**所以，谁能给我一个关于如何解决的提示这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:28:16.690

正如上面 nax83 指出的那样，问题是由于我的系统上**安装了多个版本的 qt 而导致路径变量不明确。**我从路径变量中删除了所有其他与 qt 相关的值，然后明确指定了一个版本的所有路径。重新编译并构建了应用程序，我的应用程序运行起来没有任何问题和问题。

# android - Android 形状按钮点击区域

> ID：10399630
> 
> 赞同：1
> 
> 时间：2012-05-01T15:04:23.187
> 
> 标签：android, animation, button, shape

我有以下形状

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
<gradient android:angle="360" android:endColor="@color/LightBlue" android:startColor="@color/DarkBlue"/>
    <corners android:topRightRadius="10dp" android:bottomLeftRadius="10dp"/>
</shape> 
```

和这个按钮

```
<Button android:id="@+id/butLeft" android:layout_width="25dp"
            android:layout_height="@dimen/contentTabHeight" android:background="@drawable/lefttabbackground"
            android:layout_toRightOf="@id/contentLeft"
            android:layout_centerVertical="true"></Button> 
```

现在我要做的是我有一个自定义动画，将 contentleft(linearlayout) leftmargin 更改为 -200，然后当您单击按钮时，我慢慢地将左边距变为 0。所以基本上是一个滑出面板。

问题是，如果我将 contentleft 的左边距设为 -200，我无法单击按钮，如果我将其设为 -199，则 contentleft 的一部分伸出，然后按钮只能从左侧工作一点（看起来像 1px），但其余的则不行的按钮。

我在没有动画的情况下尝试了它，它和你看到的按钮一样，但是如果你点击它，它就不起作用。

这是怎么回事。更糟糕的情况我不介意一些内容左突出，但完全不显示会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:19:26.297

![在此处输入图像描述](../Images/1219413192a57100a567ef489f93f4c3.png)

试试这个让你的按钮宽度图像多一点....

右侧的某些部分使其透明。

它不会显示，您还可以获得点击事件

希望对你有帮助....！

# qt - Qt：我应该为矩阵使用什么类而不是 QMatrix？

> ID：10399632
> 
> 赞同：1
> 
> 时间：2012-05-01T15:04:33.263
> 
> 标签：qt, matrix

QMatrix 的文档说它已经过时并且强烈不建议使用。好的，但是我应该用什么来存储矩阵？
我什至在[Qt 文档错误跟踪器](https://bugreports.qt-project.org/browse/QTBUG-25430)上发布了错误报告，但他们没有回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:31:59.957

这取决于你想做什么。QMatrix 的替代品是[QTransform](http://qt-project.org/doc/qt-4.8/qtransform.html)，所以如果它能完成你想要的，你应该使用它。值得注意的是，QMatrix 和 QTransform 都不是数学意义上的真正矩阵。

如果您谈论的是普通的数学矩阵，您应该查看任何现有的 C++ 矩阵库（快速 Google 搜索会找到许多结果），或者编写自己的矩阵类。我最近在做一个项目，我需要做小（2x2）矩阵的乘法，所以我自己设计了这个类。这很容易。

编辑：顺便说一句，这不是一个错误，所以如果可能的话，你应该尝试删除报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T23:09:41.160

QMatrix 专门用于 2D 转换，而 QTransform 为此目的替换了它。如果您正在寻找用于 3D 工作或线性代数的常规矩阵类，那么 Qt 具有 QMatrix4x4 和 QGenericMatrix。

# algorithm - 从第一原理开始快速排序的复杂性分析

> ID：10399641
> 
> 赞同：2
> 
> 时间：2012-05-01T15:05:01.767
> 
> 标签：algorithm, complexity-theory

我正在尝试了解复杂性分析以及如何从第一原理中执行它。以 QuickSort 为例，我希望能够推导出该算法的平均情况复杂度的 O-notation 表达式。

我知道 QuickSort 是 O(nlog(n)) 并且我理解为什么，它必须在每次迭代中传递 n 个元素，并且递归深度是 log n。但我不知道你将如何用第一原则来展示这一点，即计算原始操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:03:21.100

Knuth 在*《计算机编程艺术》第 3 卷（排序和搜索）*第 5.2.2 节（按交换排序）中详细分析了快速排序的具体实现（当然是在 MIX 中）。他可能是世界上唯一一个愿意手工进行这种分析以供人类消费的人。

# android - 使用 BroadcastReceiver 获取歌曲的播放位置

> ID：10399643
> 
> 赞同：0
> 
> 时间：2012-05-01T15:05:07.077
> 
> 标签：android

我知道应该可以通过使用来自谷歌音乐/htc 播放器的 IMediaPlaybackService 来获取歌曲的播放位置但是我可以通过 BroadcastReceiver 获得相同的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:19:41.927

不。默认的 IMediaPlaybackService 实现（参见[此处](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/MediaPlaybackService.java)）不发送任何带有播放位置的广播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:26:43.737

如果您使用 MediaPlayer 类播放音频文件，则可以使用此代码获取 MediaPlayer 的当前位置：

```
MediaPlayer mp = new MediaPlayer();
(Code to setup the MediaPlayer)
mp.getCurrentPosition(); 
```

您无法从 MediaPlaybackService 获取信息，它是安全的。

# asp.net - Ruby vs ASP 开发时间

> ID：10399644
> 
> 赞同：-1
> 
> 时间：2012-05-01T15:05:08.380
> 
> 标签：asp.net, ruby

我不想引发语言战争，但我对 ruby​​ 与 asp 网络表单的开发时间感兴趣。例如，如果有人在两个平台上都有相同的经验，那么对于类似于 Wordpress（带有一些 ajax bling 的数据驱动站点）的站点，哪个平台会导致最快的开发时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:09:09.003

每个人都说 Ruby，但它是一个如此主观的问题，没有真正的答案。

*如果*您同样熟练，那么您可能会发现 Ruby 更快，但是您已经知道方法上的差异。如果您都不知道，那么最好使用您已经知道的内容。

# haml - haml 语法问题 - 在标签中写入单独的单词，没有映射

> ID：10399646
> 
> 赞同：0
> 
> 时间：2012-05-01T15:05:26.000
> 
> 标签：haml

我对 HAML 很陌生，谁能解释我如何让它渲染：

```
<html itemscope itemtype="http://schema.org/"> 
```

这是导致问题的“项目范围”。

我有：

```
%html{ :itemtype => "http://schema.org"} 
```

我似乎无法在任何地方添加“itemscope”而不会出现映射错误。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:10:54.173

尝试将其添加为布尔值并告诉它格式化 html5：

```
engine = Haml::Engine.new '%html{:itemscope => true :itemtype => "http://schema.org"}', :format => :html5
puts engine.render 
```

应该渲染

```
<html itemscope itemtype="http://schema.org/"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T10:04:44.833

重新审视一个老问题，所需要的只是：

```
%html{itemscope: true, itemtype: "http://schema.org"} 
```

这将产生：

```
<html itemscope itemtype="http://schema.org/"> 
```

# html - 更改 HEAD 会使网站无法正常工作？

> ID：10399649
> 
> 赞同：0
> 
> 时间：2012-05-01T15:05:55.823
> 
> 标签：html, css

我在文档的头部添加了新的元标记和不同的标题标记，这使得重绘黑色背景的 IE 代码不起作用。

知道我错过了什么吗？我在新代码中看不到任何会导致此问题的内容？

旧的正确工作代码：

```
 <!-- saved from url=(0022)http://internet.e-mail -->
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>netball</title>
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="favicon.ico"> <!--[if IE 6]>
    <link href="ie6.css" rel="stylesheet" type="text/css">
    <![endif]-->
    <!--[if IE 7]>
    <link href="ie7.css" rel="stylesheet" type="text/css">
    <![endif]-->
    <!--[if IE 8]>
    <link href="ie8.css" rel="stylesheet" type="text/css">
    <![endif]-->
    <!--[if IE 9]>
    <link href="ie9.css" rel="stylesheet" type="text/css">
    <![endif]-->
    <!--[if IE]>
    <style type="text/css">
    .black_overlay {position:absolute; top: expression(document.compatMode=="CSS1Compat"? document.documentElement.scrollTop+"px" : body.scrollTop+"px");}</style><![endif]-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script src="jquery.simpletip-1.3.1.min.js"></script>
    </head> 
```

没有工作的新代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Netball - notice board</title>
<meta name="description" content="netball description to go here." />
<meta name="keywords" content="net, ball, netball, womens" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">
<link href="style.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico"> <!--[if IE 6]>
<link href="ie6.css" rel="stylesheet" type="text/css">
<![endif]-->
<!--[if IE 7]>
<link href="ie7.css" rel="stylesheet" type="text/css">
<![endif]-->
<!--[if IE 8]>
<link href="ie8.css" rel="stylesheet" type="text/css">
<![endif]-->
<!--[if IE 9]>
<link href="ie9.css" rel="stylesheet" type="text/css">
<![endif]-->
<!--[if IE]>
<style type="text/css">
.black_overlay {position:absolute; top: expression(document.compatMode=="CSS1Compat"? document.documentElement.scrollTop+"px" : body.scrollTop+"px");}</style><![endif]-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js">
</script>
<script src="jquery.simpletip-1.3.1.min.js"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:48:04.483

看起来您的链接标签格式不正确。关闭它们，你应该会很好。

# documentation - 如何在 Intellij 中查找非核心库的文档？

> ID：10399651
> 
> 赞同：3
> 
> 时间：2012-05-01T15:05:57.960
> 
> 标签：documentation, intellij-idea

我设置了我的 JDK 文档路径，这样我就可以点击 Cntrl J (osx) 来获得核心 Java 库的“快速文档查找”。如果我尝试使用 Spring 或 Hibernate 等非核心库，我只会得到方法签名。我该如何获取这些库的文档呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:16:18.227

[附加文档目录](http://www.jetbrains.com/idea/webhelp/libraries-global-libraries-and-the-configure-library-dialog.html)或指定外部文档 URL，或附加源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T19:04:41.363

如果您使用的是 Maven，则可以使用 Maven 目标：

`mvn dependency:resolve -Dclassifier=javadoc`.

这个[目标](http://maven.apache.org/plugins/maven-dependency-plugin/resolve-mojo.html)解决了存储库中的项目依赖关系。[分类器](http://maven.apache.org/plugins/maven-dependency-plugin/resolve-mojo.html#classifier)指定查找 javadocs。所有文档都将下载到您的 Maven 本地存储库中，通常是`~/.m2`.

之后，IntelliJ 能够找到 Spring、Hibernate 的所有 javadoc，如果没有，请检查项目结构中的设置。

# python - Redis 输出到 Python 变量

> ID：10399652
> 
> 赞同：0
> 
> 时间：2012-05-01T15:06:02.710
> 
> 标签：python, redis

我正在尝试改进一些朋友给我的代码。这是我现在所拥有的一个片段：

```
print 'Message is', message
md5Hash = hashlib.md5(message).hexdigest()
print 'Hash is', md5Hash
tempName = md5Hash + '.glados.wav'
doneName = 'ok-' + md5Hash + '.done.wav'
for f in os.listdir(filesPath):
    if f[-4:] in ('.wav', '.mdd'):
            os.remove(filesPath + os.sep + f) 
```

现在，它正在从脚本运行时传递的参数接收“消息”变量。我想做的是从 Redis 命令获取输出：

```
LPOP myList
"one" 
```

并将那个“一个”作为“消息”python变量。

可能有一种简单的方法可以做到这一点，我忽略了，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:08:08.497

嗯……用[`redis-py`](https://github.com/andymccurdy/redis-py)？

```
import redis
r = redis.Redis(host='localhost', port=6379, db=0)
message = r.lpop("myList")
# ... 
```

# c - C：分段错误

> ID：10399657
> 
> 赞同：-1
> 
> 时间：2012-05-01T15:06:34.547
> 
> 标签：c, pointers, segmentation-fault

我创建了这个函数来读取一个单词。我遇到了分段错误，我找不到问题。这就是我所做的。

```
void LeeCaracter(FILE * fp, char * s)

{

    char c;
    int i = 0;

    c = fgetc(fp);
    while(c==' ' || c=='\t' || c=='\n')
        c = fgetc(fp);
    while(c!=' ' && c!='\n')
      {
          s[i] = c;
          i++;
          c = fgetc(fp);

      }
    s[i] = '\0'; 
} 
```

s 是一个指针参数，因为我以后必须使用它。只写一个*是否正确？谢谢你的帮助！

*如果我想知道单词后面的字符（' ' or '\n'）怎么办？我在 while 循环之后添加了这个：“printf("%c",c);" 但它不打印任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:11:11.037

考虑：

```
while(c==' ' || c=='\t' || c=='\n')
    c = fgetc(fp); 
```

所以，在这一点上，c 不是的两件事是`' '`和`'\n'`。然后：

```
while(c!=' ' && c!='\n')
  {
      s[i] = c;
      i++;
  } 
```

由于 c 的值在循环中不会改变，因此 while 条件始终为真。这意味着很快`s[i]`就会超出范围。您需要检查 s 的长度，可能是通过将其作为参数传入（更不用说，重新考虑一下您的算法——可能您想在循环中更多地 fgetc）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:42:52.420

您必须确保“s”有足够的空间来包含输入文件中字符数最多的单词。然后，您需要确保检查“文件结束”。这是一个工作版本。我希望它也适用于你。

```
#include <stdio.h>

void LeeCaracter(FILE * fp, char * s)
{
  char c;
  int i = 0;

  c = fgetc(fp);
  if (feof(fp)) return;
  while (c == ' ' || c == '\t' || c == '\n')
    c = fgetc(fp);
  while (!feof(fp) && (c != ' ' && c != '\n')) {
    s[i++] = c;
    c = fgetc(fp);
  }
  s[i] = '\0'; 

  printf("%s\n", s);
}

int main(void)
{
  char s[128]; /* assuming no word is larger than this size */
  FILE *fp = fopen("/usr/share/dict/words", "r");

  while (!feof(fp)) {
    LeeCaracter(fp, s);
  }

  return 0;
} 
```

# powershell - PowerShell：每分钟监控多个服务器事件日志

> ID：10399659
> 
> 赞同：2
> 
> 时间：2012-05-01T15:06:39.960
> 
> 标签：powershell, monitoring, event-log

我正在研究一个 PowerShell 脚本，该脚本将每分钟监视一个服务器列表并在指定事件上触发。虽然我的剧本还没有完成，但这就是我目前所拥有的；

```
$TimeAgo = (Get-Date).addMinutes(-1)
$servers = "server1","server2","server3","server4"

foreach ($server in $servers) 
{
    $events = Get-EventLog application -computername $server -after $TimeAgo

    foreach ($event in $events) 
    { 
        $event 
    }
} 
```

foreach 正在完成它的工作，我可以看到来自“server1”的事件填充了屏幕，但随后它锁定了。它永远不会退出 server1，也永远不会移动到 server2。

关于发生了什么的任何想法？

对于调试，如果我在服务器上本地运行它，这将起作用：

```
$TimeAgo = (Get-Date).addMinutes(-1)
Get-EventLog application -after $TimeAgo 
```

当 -ComputerName 被引入时，我得到一个闪烁的光标并且它没有移动到列表中的第二台服务器上。

编辑：它正在工作，完成第一台服务器只需要大约 6-7 分钟。如果我想每分钟扫描一次，这并不理想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:08:16.953

尝试使用 -newest 参数，然后查看新事件的结果。-after 参数解析整个日志。您可以使用 measure-command 测试时间以进行比较。

```
measure-command {get-eventlog application -comp server1 -after (get-date).addminutes(-1))}
measure-command {get-eventlog application -comp server1 -newest 1} 
```

在这里的远程服务器上，-after 需要 45 秒，而 -newest 需要 195 毫秒。

# ruby-on-rails - Rails / Paperclip：file_field不显示

> ID：10399660
> 
> 赞同：2
> 
> 时间：2012-05-01T15:06:45.297
> 
> 标签：ruby-on-rails, paperclip

我正在尝试使用 PaperClip，并且一直在关注他们的 GitHub 页面上的快速入门。

我已经安装了 gem、模型和控制器，在视图中我有：

```
<% form_for @account, :html => { :multipart => true } do |f| %>
        <%= f.file_field :image %>
    <% end %> 
```

但是当页面呈现时什么都没有显示。我已经剥离了所有 CSS 以确保这不是问题，但仍然不是运气。关于为什么文件选择器不显示的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:14:22.363

不确定您使用的是什么版本的 Rails，但我认为您忘记了表单助手中的等号，请尝试：

```
<%= form_for @account, :html => { :multipart => true } do |f| %>
   <%= f.file_field :image %>
<% end %> 
```

# c++ - 计算数组 C++ 中的特定元素

> ID：10399663
> 
> 赞同：0
> 
> 时间：2012-05-01T15:06:59.493
> 
> 标签：c++, arrays

我现在有一个数组，`[2,3,4,3,4,5,6,3]`我想知道一个数组中有多少个 3。是否有任何捷径可以做到这一点，而不是通过循环并检查每个元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T15:08:19.740

使用`std::count`来自`<algorithm>`：

```
std::count(array.begin(), array.end(), 3)
// or if it's a raw array: std::count(array, array + NUM_OF_ELEMENTS, 3)
// or the most generic solution (std::{begin,end} are from C++11):
std::count(std::begin(array), std::end(array), 3) 
```

# ssis - SSIS 和 ADO.NET 和 Azure

> ID：10399664
> 
> 赞同：3
> 
> 时间：2012-05-01T15:07:04.357
> 
> 标签：ssis

我正在尝试使用 SSIS 将表移动到 SQL Azure。我有一个 ADO.NET 源和目标，但是当我运行它时，它总是失败，并出现与 IDENTITY INSERT 关闭相关的错误。从它提到的其他帖子中，我应该从“尽可能使用批量插入”框中删除选中。我有并且仍然收到同样的错误。关于如何将 IDENTITY 列移入 SQL Azure 的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:02:26.723

通过消息，目的地有一个身份字段，所以你有两个选项：

*   将 ADO 目标更改为 OLEDB 目标并选中目标组件上的“保持身份”复选框
*   在您尝试插入记录的表上手动设置 identity_insert ON。

# linux - Linux 中的异步套接字——轮询与回调通过

> ID：10399665
> 
> 赞同：5
> 
> 时间：2012-05-01T15:07:17.270
> 
> 标签：linux, sockets, asynchronous, callback, ioctl

在决定在我的简单服务器（linux）中实现异步套接字时，我遇到了一个问题。我打算不断地 poll()，并在调用之间进行一些清理和缓存。现在这似乎很浪费，所以我做了更多的挖掘并找到了一种*可能*在 i/o 上实现一些回调的方法。

如果我使用 O_NONBLOCK 创建一个套接字，使用 SIOCSPGRP ioctl() 在 i/o 上发送 SIGIO，并使用 sigaction() 在 i/o 期间定义回调函数，我会招致性能损失吗？ .

另外，我可以为不同的socket定义不同的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:50:37.973

*“我打算不断轮询（），并在调用之间进行一些清理和缓存。现在这似乎很浪费”*

怎么浪费？您是否真的尝试过实现这一点？

你有你的 fd 列表。您使用列表调用 poll 或（更好）`epoll()`。当它触发时，你遍历 fd 列表并适当地处理每一个。您需要缓存传入和传出数据，因此每个 fd 都需要某种结构。完成此操作后，我为 fd 结构使用了哈希表（从 fd 生成密钥），但您可能没问题，*至少在最初*，只需使用固定长度数组并检查操作系统是否有问题你是一个奇怪的高fd（nb，我从来没有见过这种情况发生，我眯着眼睛看的日志比我能数的要多）。这些结构包含指向传入和传出缓冲区的指针，可能是一个状态变量，例如：

```
struct connection {
   int fd;  // mandatory for the hash table version
   unsigned char *dataOut;
   unsigned char *dataIn;
   int state;  // probably from an enum
};

struct connection connected[1000];  // your array, or... 
```

...可能链表实际上最适合 fd，我对哈希表有一个不相关的要求。

从那里开始并逐步完善。我认为你只是想找到一个简单的出路——你可能会在以后通过让其他事情*变得更难*来付出代价；）0.02美元。

# python - 检查字符串中的字符串

> ID：10399671
> 
> 赞同：6
> 
> 时间：2012-05-01T15:07:41.943
> 
> 标签：python, string, list, comparison

我有一个包含许多字符串的巨大列表，例如：

```
['xxxx','xx','xy','yy','x',......] 
```

现在我正在寻找一种有效的方法来删除另一个字符串中存在的所有字符串。例如“xx”“x”适合“xxxx”。

由于数据集很大，我想知道除此之外是否有有效的方法

`if a in b:`

完整的代码：可能有一些优化部分：

```
for x in range(len(taxlistcomplete)):
if delete == True:
    x = x - 1
    delete = False
for y in range(len(taxlistcomplete)):
    if taxlistcomplete[x] in taxlistcomplete[y]:
        if x != y:
            print x,y
            print taxlistcomplete[x]
            del taxlistcomplete[x]
            delete = True
            break
    print x, len(taxlistcomplete) 
```

代码的更新版本：

```
for x in enumerate(taxlistcomplete):
if delete == True:
    #If element is removed, I need to step 1 back and continue looping.....
    delete = False
for y in enumerate(taxlistcomplete):
    if x[1] in y[1]:
        if x[1] != y[1]:
            print x[1],y[1]
            print taxlistcomplete[x]

            del taxlistcomplete[x[0]]
            delete = True
            break
print x, len(taxlistcomplete) 
```

现在用枚举实现，只是现在我想知道这是否更有效以及如何实现删除步骤，所以我也有更少的搜索。

### 

只是一个短暂的想法...

基本上是我想看的...

如果元素与列表中的任何其他元素不匹配，则将此元素写入文件。因此，如果 'xxxxx' 不在 'xx'、'xy'、'wfirfj' 等... 打印/保存

一个新的简单版本，因为我认为无论如何我都无法进一步优化它......

```
print 'comparison'

file = open('output.txt','a')

for x in enumerate(taxlistcomplete):
    delete = False
    for y in enumerate(taxlistcomplete):
        if x[1] in y[1]:
            if x[1] != y[1]:
                taxlistcomplete[x[0]] = ''
                delete = True
                break
    if delete == False:
        file.write(str(x)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T15:23:11.357

`x in <string>`速度很快，但是根据列表中的所有其他字符串检查每个字符串将花费 O(n^2) 时间。无需通过优化比较来节省几个周期，您可以通过使用不同的数据结构来节省大量成本，这样您只需一次查找即可检查每个字符串：对于两千个字符串，这是两千次检查而不是四百万次。

有一种称为“前缀树”（或 trie）的数据结构，可让您非常快速地检查字符串是否是您以前见过的某个字符串的前缀。去谷歌上查询。由于您还对出现在另一个字符串*中间*`x`的字符串感兴趣，因此索引表单`x, x[1:], x[2:], x[3:],`等的所有子字符串（因此：只有`n`长度字符串的子字符串`n`）。也就是说，您索引从位置 0、1、2 等开始并继续到字符串末尾的子字符串。这样您就可以检查新字符串是否是索引中某些内容的*初始*部分。

然后，您可以像这样在 O(n) 时间内解决您的问题：

1.  按长度递减的顺序排列您的字符串。这确保没有字符串可以是您尚未看到的内容的子字符串。由于您只关心长度，因此您可以在 O(n) 时间内进行桶排序。

2.  从一个空的前缀树开始，然后遍历您的有序字符串列表。对于每个 string `x`，使用您的前缀树来检查它是否是您以前见过的字符串的子字符串。如果不是，则将其子字符串`x, x[1:], x[2:]`等添加到前缀树中。

在长列表的中间删除非常昂贵，因此如果您将要保留的字符串收集到新列表中，您将获得进一步的加速（实际的字符串不会被复制，只是参考）。完成后，删除原始列表和前缀树。

如果这对你来说太复杂了，至少不要把所有事情都和所有事情进行比较。按大小对字符串进行排序（按降序排列），并仅将每个字符串与之前的字符串进行对比。这将使您毫不费力地加快 50% 的速度。并创建一个新列表（或立即写入文件）而不是就地删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:22:37.977

`'$'`这是一个简单的方法，假设您可以识别一个保证不在任何原始字符串中的字符（我将在我的示例中使用）：

```
result = ''
for substring in taxlistcomplete:
    if substring not in result: result += '$' + substring
taxlistcomplete = result.split('$') 
```

这利用了 Python 对子字符串搜索的内部优化，只需将一个大字符串创建为子字符串搜索 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:09:34.913

使用列表理解——注意`in`——是解决问题的最快和更 Pythonic 的方法：

```
[element for element in arr if 'xx' in element] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:58:22.873

这是我的建议。首先，我按长度对元素进行排序。因为显然字符串越短，它就越有可能是另一个字符串的子字符串。然后我有两个 for 循环，在其中我遍历列表并从列表中删除 el 是子字符串的每个元素。请注意，第一个 for 循环仅将每个元素传递一次。

通过首先对列表进行排序，我们破坏了列表中元素的顺序。因此，如果顺序很重要，则不能使用此解决方案。

编辑。我假设列表中没有相同的元素。所以当 el == el2 时，这是因为它是同一个元素。

```
a = ["xyy", "xx", "zy", "yy", "x"]
a.sort(key=len)

for el in a:
    for el2 in a:
        if el in el2 and el != el2:
            a.remove(el2) 
```

# javascript - javascript将整数数组转换为对象数组

> ID：10399677
> 
> 赞同：0
> 
> 时间：2012-05-01T15:08:13.970
> 
> 标签：javascript, performance

我有一个整数数组，称为`SelectedItems`. 我有另一个数组，其中包含被调用`AvailableItems`并从 json 解析的对象；这些`Item`对象具有属性`{ContainerID, ContainerName, ItemID, ItemName}`。

我想`SelectedItems`从一个整数数组转换为一个数组，`Items`其中每个数组`ItemID`都替换为`Item`对应于`ItemID`in的对象`AvailableItems`。每一个`ItemID`都是`SelectedItems`独一无二的。

我从 2个循环开始：一个循环`SelectedItems`遍历.`AvailableItems``ItemID``SelectedItems`

所以基本上我建立了一个看似非常低效的循环。我想知道是否有更好的方法来避免循环内的重复循环？

样本数据：

因为`AvailableItems`，你有

```
{
  ContainerID: i, 
  ContainerName: 'SomeName', 
  ItemID: j, 
  ItemName: 'SomeOtherName'
} 
```

with 可能是 1,000 个对象，然后`SelectedItems`是整数数组

```
[23,43,64,34...] 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:15:42.890

您可以将数字数组`AvailableItems`中的每个对象放在与其匹配的索引处`ItemID`。

因此，您知道带有`ItemID`5的项目位于，`AvailableItems[5]`而不必循环查找它。

不知道如果你在不同的值之间有很大的差距会产生什么影响`ItemID`，但你可以尝试一下，看看它是否运作良好。

* * *

**更新：**

快速搜索并阅读[此答案](https://stackoverflow.com/a/4524312/259457)后，看起来索引之间的间隙不会浪费大量内存。但是会影响检查的结果`AvailableItems.length`。如果您有一个包含一个条目的数组，但该条目的索引是 500，那么`AvailableItems.length`将返回 501，即使数组中只有一个条目。

只要您不需要使用该`length`功能，此解决方案应该适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:15:28.857

`AvailableItem`如果您能够通过仅通过其 ID 对其进行寻址而无需遍历整个数组来获得任意值（如果您有一个基于索引的数组，其中 ID 是索引），那么您可以通过`SelectedItems`并检查它是否存在于 中`AvailableItems`，如果然后将其`SelecteItem`转换为对象并将其添加到某个临时数组以供以后使用。

# .net - 无论如何要知道何时销毁池线程（或 ThreadStatic 成员）？

> ID：10399680
> 
> 赞同：4
> 
> 时间：2012-05-01T15:08:19.147
> 
> 标签：.net, multithreading, .net-3.5, threadpool

我需要将第三方组件添加到我们的一个产品中（这是一个可以 24/7 运行的 Windows 服务）。
3PC 是一个 .net 库，它具有一些用于处理图像的硬核 C++ 可爱。
3PC 要求为它运行的每个线程调用*Initialize*和*Teardown例程。*
这很好，我们在旧软件中使用它，但这个产品是用 .Net 线程池编写的，池化的工作人员将使用 3PC。我不知道如何安全地调用*Initialize*和*Teardown*例程。

我得到的最接近的是在初始化 ThreadStatic 成员时调用 3PC`Initialize`方法，但是我无法在被调用`Teardown`的同一线程上`Initialize`调用。

`Initialize`如果我将and包装`Teardown`在一个对象中，并在对象中`Teardown`调用 Finalize 方法，那么`Teardown`将由 GC 自己的 Finalize 线程调用，而不是对象是*静态的**线程*（更不用说不能保证 Finalizer 的事实将永远运行）。

 *显然我担心资源泄漏，因为线程池在后台*管理*线程，**我不知道线程是否或何时会被销毁或创建**，所以我不知道服务在一段时间内会泄漏多少.

有人有什么想法吗？我错过了什么？还有什么要尝试的吗？
谢谢

**更新**

问：*拆解是做什么的？*

我假设它“释放一些记忆”，但老实说我不知道​​。我尝试使用 Reflector 对程序集进行扩展，但它很快从 IL 变成了本机机器代码。我要坚持（第三）党路线，必须这样做。

这绝对是一个子系统拆除的事情。

此外，几年前，我们在另一个产品中发现了围绕此组件的错误。没有为每个线程调用初始化程序，这导致了一些非常罕见的*未定义行为*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:41:14.713

如果最坏的情况变得最坏，并且没有更好的解决方案即将出现，您可以使用固定数量的线程（=内核数？）创建自己的线程池。通过在每个线程中创建一个 3PC 实例并调用 Initialize()，您应该希望一切正常。

就像是：

```
using System;
using System.Collections.Generic;
using System.Collections.Concurrent;
using System.Linq;
using System.Text;
using System.Threading;

namespace WindowsPoolApp
{

public abstract class Task {
    public EventHandler FonComplete;
    public ThreadPool myPool;
    protected int param;
    public Exception error;
    public Task(int inParam, EventHandler OnDone) { param = inParam; FonComplete = OnDone; }
    public abstract void run();
};

public class PoolThread{
private
    3PC my3PC;
    BlockingCollection<Task> FinQueue;
public
    PoolThread(BlockingCollection<Task> inQueue)
    {
       FinQueue=inQueue;
    }
    Task inMess;
    public void run(){
        my3PC = new 3PC();
        my3PC.Initialize();
        while(true){
            inMess=FinQueue.Take();
            if(inMess==null){
              my3PC.Teardown();
              return;
            }
            try
            {
                inMess.run();
                inMess.error = null;
            }
            catch (Exception e)
            {
                inMess.error = e;
            }
            inMess.FonComplete(inMess, null);
        }
    }
};

public class ThreadPool {
    volatile int FthreadCount;
    BlockingCollection<Task> queue;
    void startThread(){
            PoolThread thisPoolThread=new PoolThread(queue);
            Thread thisThread=new Thread(new ThreadStart(thisPoolThread.run));
            thisThread.Priority = ThreadPriority.BelowNormal;
            thisThread.IsBackground = true;
            thisThread.Start();
    }
    void SetThreadCount(int newCount){
        while(FthreadCount<newCount){startThread();};
        while(FthreadCount>newCount){
            queue.Add(default(Task));
            FthreadCount--;
        };
    }
    public ThreadPool(int initThreads){
        queue=new BlockingCollection<Task>();
        for(FthreadCount=0;FthreadCount<initThreads;FthreadCount++) startThread();
    }
    public int threadCount{
        get{return FthreadCount;}
        set
        {
            while (FthreadCount < value) {
                startThread();
                FthreadCount++;
            };
            while (FthreadCount > value)
            {
                queue.Add(default(Task));
                FthreadCount--;
            }
        }
    }

    public void submit(Task task){
        task.myPool=this;
        queue.Add(task);
    }
};

} 
```

要启动它，请调用“new ThreadPool(numThreads);”，要关闭它，请将“threadCount”属性设置为 0。*

# objective-c - 如何从 XCode 中的第二个目标创建第二个应用程序？

> ID：10399683
> 
> 赞同：1
> 
> 时间：2012-05-01T15:08:23.073
> 
> 标签：objective-c, ios5, xcode4

所以我创建了一个简单的项目，我可以将其作为 iPhone 应用程序进行测试。现在，我想用 iAd 对其进行轻微改动。通过管理方案（http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/Building/Building.html），我能够复制目标并测试到 iPhone。

问题是无论我测试什么方案，我都会覆盖另一个应用程序。我希望能够拥有两个应用程序

*   应用名称
*   应用名称（免费）

同时生活在我的手机上。

我想避免重复源文件，因为只有故事板和视图控制器不同，否则它们都使用相同的图像和模型。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:17:50.380

您是否尝试过在刚刚创建的新目标中更改捆绑标识符？因此，您的完整版本将具有捆绑标识符：**“com.yourcompany.AppName”**，而您的精简版将具有捆绑标识符：**“com.youcompany.AppNameLite”**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:21:23.950

我目前不在我的 Mac 分区上，如果我有点偏离，很抱歉。我会为您的应用添加新配置。称之为“免费发布”。在此配置中添加一个 gcc 预处理器符号“FREE”。然后，无论您在哪里初始化和实例化您的 iad，都将代码放在一些“#if”语句中。

像这样的东西。

```
#if FREE
    // Init iAds
#endif 
```

# php - WHERE附近的MySql查询错误

> ID：10399684
> 
> 赞同：1
> 
> 时间：2012-05-01T15:08:28.737
> 
> 标签：php, mysql, sql

我的代码是

```
$user_query = '
     UPDATE  
          users  
     SET  
          `password`="$password",  
          `email`="$email", 
          `position`="$position", 
     WHERE  
          `username`=".$uname."';
$user_result = mysql_query($user_query, $connection);
confirm_query($user_result); 
```

当我运行此查询时，它给了我一个错误：

> 数据库查询失败：您的 SQL 语法有错误；
> 检查与您的 MySQL 服务器版本相对应的手册，以`username`在第 7 行的 'WHERE =".$uname."'附近使用正确的语法

任何机构都可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:13:56.533

您的查询是单引号，因此不会解析变量。正如您在错误中看到的那样，字符串实际上是

```
`username`=".$uname." 
```

您需要在整个事物周围使用双引号，以正确解析变量。

```
$user_query = "
 UPDATE  
      users  
 SET  
      `password`='$password',  
      `email`='$email', 
      `position`='$position'
 WHERE  
      `username`='$uname'"; 
```

或正确使用字符串连接运算符`.`.

```
$user_query = '
 UPDATE  
      users  
 SET  
      `password`="'.$password.'",  
      `email`="'.$email.'", 
      `position`="'.$position.'"
 WHERE  
      `username`="'.$uname.'"'; 
```

正如其他人所指出的，还有一个额外的`,`after `postion="$position"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:11:06.217

去掉分句`,`前的逗号`WHERE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:11:02.683

`position="$position",`和`where`子句之间有一个尾随逗号。`where`删除子句前的逗号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T15:11:39.400

只需更改引号，并使用 DB 驱动程序功能更好地转义数据，例如`mysql_real_escape_string()`

引号之间的区别：[https ://stackoverflow.com/a/3446286/765634](https://stackoverflow.com/a/3446286/765634)

转义： http: [//php.net/mysql_real_escape_string](http://php.net/mysql_real_escape_string)

完整查询：

```
$user_query = <<<SQL
     UPDATE  
          users  
     SET  
          `password`="{$password}",  
          `email`="{$email}", 
          `position`="{$position}", 
     WHERE  
          `username`="{$uname}"
SQL; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T15:11:41.283

```
 UPDATE  
          users  
     SET  
          `password`="$password",  
          `email`="$email", 
          `position`="$position"
     WHERE  
          `username`=".$uname."'; 
```

你有一个尾随`,`位置

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T15:12:49.257

`position`="$position"后面多了一个逗号。删除它。

# haskell - Haskell：获取表达式的静态类型

> ID：10399685
> 
> 赞同：11
> 
> 时间：2012-05-01T15:08:46.670
> 
> 标签：haskell, types, ghc

我正在寻找一个执行 GHCi :type 命令的功能。

理想情况下，它会有一个类似的签名

```
getStaticType :: a -> String

a = getStaticType (1+2)
-- a = "(Num t) => t"

b = getStaticType zipWith
-- b = "(a -> b -> c) -> [a] -> [b] -> [c]" 
```

（注意：这与 Data.Dynamic 无关。我只想要从编译器推断出的静态类型。事实上，该函数根本不需要运行时实现，因为对它的所有调用都可以在编译时内联为常量时间。我假设它存在于某个地方，因为 GHCi 可以做到）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-01T15:11:44.750

你可以这样做：

```
import Data.Typeable

getStaticType :: Typeable a => a -> String
getStaticType = show . typeOf 
```

请注意，类型必须是 的实例`Typeable`。您可以`Typeable`使用`DeriveDataTypeable`Haskell 语言扩展和`... deriving (Typeable, ...)`.

另请注意，不能以这种方式识别多态类型；您必须始终调用具有*特定*类型的函数，因此您永远无法获得在 GHCi 中使用已编译的 Haskell 代码获得的多态类型信息。

GHCi 的做法是使用 GHC API 来分析包含类型信息的中间 Haskell 抽象语法树 (AST)。GHCi 与典型的已编译 Haskell 程序没有相同的受限环境；它可以做很多事情来了解有关其环境的更多信息。

使用 TemplateHaskell，您可以这样做；首先，创建这个模块：

```
module TypeOf where

import Control.Monad

import Language.Haskell.TH
import Language.Haskell.TH.Syntax

getStaticType :: Name -> Q Exp
getStaticType = lift <=< fmap pprint . reify 
```

然后，在**不同的模块**（非常重要）中，您可以执行以下操作：

```
{-# LANGUAGE TemplateHaskell #-}

import TypeOf

main = putStrLn $(getStaticType 'zipWith) 
```

该程序输出：

```
GHC.List.zipWith :: forall a_0 b_1 c_2 . (a_0 -> b_1 -> c_2) ->
                                         [a_0] -> [b_1] -> [c_2] 
```

您可以使用比该`pprint`功能更好的漂亮打印机；看看[`Language.Haskell.TH.Ppr`](http://hackage.haskell.org/packages/archive/template-haskell/2.7.0.0/doc/html/Language-Haskell-TH-Ppr.html)模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T17:41:52.000

试试[http://www.haskell.org/haskellwiki/GHC/As_a_library](http://www.haskell.org/haskellwiki/GHC/As_a_library)

```
typed targetFile targetModule = do
 defaultErrorHandler defaultFatalMessager defaultFlushOut $ do
  runGhc (Just libdir) $ do

   dflags <- getSessionDynFlags
   let dflags' = xopt_set dflags Opt_ImplicitPrelude
   setSessionDynFlags dflags'

   target <- guessTarget targetFile Nothing
   setTargets [target]
   load LoadAllTargets

   m <- getModSummary $ mkModuleName targetModule
   p <- parseModule m
   t <- typecheckModule p

   return $ typecheckedSource d 
```

# c++ - Qt 错误：发出信号 QDeclarativeEngine::quit()，但没有连接接收器来处理它

> ID：10399686
> 
> 赞同：4
> 
> 时间：2012-05-01T15:08:47.013
> 
> 标签：c++, qt, qml

我对 Qt 很陌生，所以我无法弄清楚一些 Qt 问题。如果有人可以帮助我，我将不胜感激。

我试图摆脱应用程序窗口的框架并在 qml 中创建一个退出按钮以退出应用程序。因此，我制作了一个程序如下：

主文件

```
 #include <QtGui/QApplication>
 #include <QDeclarativeContext>
 #include <QObject>
 #include "qmlapplicationviewer.h"
 #include "myclass.h"
 #include "mainwindow.h"

 Q_DECL_EXPORT int main(int argc, char *argv[])
 {
     QApplication app(argc, argv);
     MyClass myClass;
     MainWindow window;

     window.rootContext()->setContextProperty("myObject", &myClass);
     window.show();

     return app.exec();
 } 
```

主窗口.cpp

```
 #include "mainwindow.h"

 MainWindow::MainWindow(QWidget *parent) : QDeclarativeView(parent)
 {
     // No window decorations
     setWindowFlags(Qt::FramelessWindowHint);

     // Set QML file
     setSource(QUrl::fromLocalFile("qml/Test2/main.qml"));
 }

 // Destructor.
 MainWindow::~MainWindow()
 {
 } 
```

我的类.cpp

```
 #include <QDeclarativeEngine>
 #include <QDeclarativeComponent>
 #include <QDeclarativeContext>
 #include <stdio.h>
 #include "myclass.h"

 MyClass::MyClass()
 {
     click_count = 0;
 }

 int MyClass::click_function(void)
 {
     click_count++;
     fprintf(stderr, "CLICK COUNT in CPP: %d\n", click_count);
     return click_count;
 } 
```

qml

```
 MouseArea {
     id: mouse_exit
     anchors.fill: parent
     onClicked: {
         console.log("Click on exit button: ")
         console.log("click count: ", myObject.click_function())
         Qt.quit();
     }
 } 
```

它编译成功，但是，每当我单击退出按钮时，就会出现 Qt 错误“**发出信号 QDeclarativeEngine::quit()，但没有连接到处理它的接收器**”。根据我在网上搜索这个问题，似乎我必须将 QDeclarativeEngine::quit() 信号连接到 QApplication::quit() 插槽。但是没有太多关于使用 connect() 函数的信息。我尝试了很多方法来使用 connect()，但我仍然不知道如何在这种情况下使用它。

有人可以帮我解决这个问题吗？我真的很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:43:41.047

语法是：

```
connect(sender, SIGNAL(signalName(args)), receiver, SLOT(slotName(args))); 
```

你可以把它放在你的 MyClass 构造函数中：

```
connect(this, SIGNAL(quit()), qApp, SLOT(quit())); 
```

或者在 main 函数中，since`connect()`是一个静态函数，正如 Slavic81 在下面的评论中指出的那样。

请注意，qApp 是全局应用程序的宏。

# ibm-mq - 使用 Websphere MQ 客户端构建持久架构

> ID：10399687
> 
> 赞同：4
> 
> 时间：2012-05-01T15:08:56.523
> 
> 标签：ibm-mq

如果客户端不允许您保留消息，也不允许确保传递，您如何使用 MQ 客户端和服务器创建持久的架构环境？

只是想弄清楚如果客户端似乎不包含持久化数据所需的任何必要组件，您如何构建可销售/耐用的架构。

谢谢，

小号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:25:46.157

中间件消息传递源于需要在本地保存数据以减轻远程节点或网络故障的影响。当时的想法是队列管理器本地安装在应用程序所在的盒子上，并被视为传输堆栈的一部分。例如，您可以将 TCP 和 WMQ 安装为传输，并且某些应用程序会使用 TCP，而其他应用程序会使用 WMQ。

在其间的 20 年中，导致创建 MQSeries（现在的 WebSphere MQ）的最初问题已基本解决。网络的可用性提高了 9 倍，高可用性硬件和软件集群提供了选项以保持不同的组件 24x7 可用。

因此，当今广泛用于解决您的问题的做法遵循两种基本方法。要么使组件具有高可用性，以便客户端始终可以找到消息传递服务器，要么将 QMgr 放在应用程序所在的位置以提供本地队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:09:47.900

MQ 的默认操作是，当发送消息（MQPUT 或 JMS 术语 producer.send）时，应用程序在消息到达队列管理器上的队列之前不会收到对 MQPUT 调用的响应。即MQPUT是同步调用，如果收到完成码OK，说明客户端应用程序连接的队列管理器已经成功接收到消息。它可能还没有到达它的最终目的地，但它已经达到了 MQ 服务器的保护，因此您可以依靠 MQ 来处理消息并将其转发到它需要到达的地方。

无论是客户端连接还是本地绑定到队列管理器，发送消息的应用程序都对其数据负责，直到 MQPUT 调用成功返回。类似地，接收应用程序一旦从成功的 MQGET（或 JMS consumer.receive）调用中获取数据，就需要对其数据负责。

有多个级别的消息保护可用。如果您使用的是非持久性消息和异步 ​​PUT，那么您实际上是在说消息是否到达目的地并不重要（尽管它们通常会）。如果您希望 MQ 真正照顾您的消息，请使用如上所述的同步 PUT、持久消息，并在事务（也称为同步点）中执行您的 PUT 和 GET，这样您就可以完全控制提交点。

如果您的网络非常不可靠，以至于您希望定期无法将消息发送到服务器，并且希望需要定期重试以便需要客户端消息保护，那么您可以研究的一个选项是 MQ Telemetry（例如在 WebSphere MQ 中） V7.1) 设计用于低带宽和/或不可靠的网络通信，作为进入更广泛 MQ 的路由。

# c++ - C++ 标准函数的替代方案以获得速度优化

> ID：10399688
> 
> 赞同：2
> 
> 时间：2012-05-01T15:08:56.863
> 
> 标签：c++, performance, optimization

只是为了澄清一下，我也认为这个标题有点傻。我们都知道该语言的大多数内置函数都写得很好而且速度很快（甚至有一些是用汇编编写的）。虽然可能对我的情况仍有一些建议。我有一个演示搜索引擎工作的小项目。在索引阶段，我有一个过滤方法可以从关键字中过滤掉不必要的东西。它在这里：

```
bool Indexer::filter(string &keyword)
{
    // Remove all characters defined in isGarbage method
    keyword.resize(std::remove_if(keyword.begin(), keyword.end(), isGarbage) - keyword.begin());

    // Transform all characters to lower case
    std::transform(keyword.begin(), keyword.end(), keyword.begin(), ::tolower);

    // After filtering, if the keyword is empty or it is contained in stop words list, mark as invalid keyword
    if (keyword.size() == 0 || stopwords_.find(keyword) != stopwords_.end())
        return false;

    return true;
} 
```

乍一看，这些函数（都是 STL 容器的成员函数或标准函数）应该很快，并且在索引阶段不需要太多时间。但是在使用 Valgrind 进行分析后，它的包容性成本`filter`高得离谱：33.4%。该过滤器的三个标准函数大部分时间都用于该百分比：`std::remove_if`占用 6.53%、`std::set::find`15.07% 和`std::transform`7.71%。

因此，如果我可以做（或改变）任何事情来减少这个过滤器的指令时间成本（比如使用并行化或类似的东西），请给我你的建议。提前致谢。

更新：感谢您的所有建议。简而言之，我总结了我需要做的事情是：1）通过构建我自己的循环来合并`tolower`并合二为一。`remove_if`2）使用`unordered_set`代替`set`更快的`find`方法。因此，我选择`Mark_B`了 's 作为正确答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:29:21.840

首先，您确定编译时启用了优化和内联吗？

假设是这种情况，我会首先尝试编写自己的转换器，将删除垃圾和小写合并到一个步骤中，以防止第二次迭代关键字。

`unordered_set`如果不使用其他容器（例如评论中建议的），您对查找无能为力。

您的应用程序是否有可能真的只是在操作中真正占用 CPU 密集型部分？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:40:29.977

如果您使用增强过滤器迭代器，则可以将`remove_if`and合并`transform`为一个，例如（未经测试）：

```
keyword.erase(std::transform(boost::make_filter_iterator(!boost::bind(isGarbage), keyword.begin(), keyword.end()),
                             boost::make_filter_iterator(!boost::bind(isGarbage), keyword.end(), keyword.end()),
                             keyword.begin(),
                            ::tolower), keyword.end()); 
```

这是假设您希望修改字符串的副作用在外部仍然可见，否则通过`const`引用传递，只需使用`count_if`和谓词即可完成所有操作。您可以为停用词列表构建一个分层数据结构（基本上是一棵树），从而使“就地”匹配成为可能，例如，如果您的停用词是`SELECT, SELECTION, SELECTED`您可以构建一棵树：

```
|- (其他/空接受)
\- SELECT- （空，失败）
             |-（其他，接受）
             |- 离子（失败）
             \- ED（失败）

```

您可以同时遍历类似的树结构，同时转换和过滤，而无需对字符串本身进行任何修改。实际上，您希望将多字符运行压缩到树中的单个节点中（可能）。

您可以使用以下内容相当简单地构建这样的数据结构：

```
#include <iostream>
#include <map>
#include <memory>

class keywords {
  struct node {
        node() : end(false) {}
    std::map<char, std::unique_ptr<node>> children;
        bool end;
  } root;

  void add(const std::string::const_iterator& stop, const std::string::const_iterator c, node& n) {
    if (!n.children[*c])
      n.children[*c] = std::unique_ptr<node>(new node);

    if (stop == c+1) {
      n.children[*c]->end = true;
      return;
    }
    add(stop, c+1, *n.children[*c]);
  }
public:
  void add(const std::string& str) {
    add(str.end(), str.begin(), root);
  }

  bool match(const std::string& str) const {
    const node *current = &root;
    std::string::size_type pos = 0;
    while(current && pos < str.size()) {
      const std::map<char,std::unique_ptr<node>>::const_iterator it = current->children.find(str[pos++]);
      current = it != current->children.end() ? it->second.get() : nullptr;
    }
    if (!current) {
      return false;
    }
    return current->end;
  }
};

int main() {
  keywords list;
  list.add("SELECT");
  list.add("SELECTION");
  list.add("SELECTED");
  std::cout << list.match("TEST") << std::endl;
  std::cout << list.match("SELECT") << std::endl;
  std::cout << list.match("SELECTOR") << std::endl;
  std::cout << list.match("SELECTED") << std::endl;
  std::cout << list.match("SELECTION") << std::endl;
} 
```

这正如你所希望的那样工作并给出了：

```
0
1
0
1
1

```

然后只需要对其进行`match()`修改以适当地调用转换和过滤函数，例如：

```
const char c = str[pos++];
if (filter(c)) {
  const std::map<char,std::unique_ptr<node>>::const_iterator it = current->children.find(transform(c));
} 
```

您可以对此进行一些优化（紧凑的长单字符串运行）并使其更通用，但它显示了如何在一次通过中就地完成所有操作，这是加速您展示的功能的最有可能的候选者。

（当然是基准变化）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:38:13.757

您可以通过单次遍历字符串来加快速度，忽略垃圾字符。像这样的东西（伪代码）：

```
std::string normalizedKeyword;
normalizedKeyword.reserve(keyword.size())
for (auto p = keyword.begin(); p != keyword.end(); ++p)
{
    char ch = *p;
    if (!isGarbage(ch))
        normalizedKeyword.append(tolower(ch));
}

// then search for normalizedKeyword in stopwords 
```

尽管`std::remove_if`存在内存分配和将字符复制到`normalizedKeyword`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T08:13:55.680

如果对 isGarbage() 的调用不需要同步，那么并行化应该是首先考虑的优化（当然，过滤一个关键字是一项足够大的任务，否则并行化应该更高一级）。这是如何完成的 - 一次通过原始数据，使用线程构建块进行多线程：

```
 bool isGarbage(char c) {
    return c == 'a';
}

struct RemoveGarbageAndLowerCase {
    std::string result;
    const std::string& keyword;

    RemoveGarbageAndLowerCase(const std::string& keyword_) : keyword(keyword_) {}

    RemoveGarbageAndLowerCase(RemoveGarbageAndLowerCase& r, tbb::split) : keyword(r.keyword) {}

    void operator()(const tbb::blocked_range<size_t> &r) {
        for(size_t i = r.begin(); i != r.end(); ++i) {
            if(!isGarbage(keyword[i])) {
                result.push_back(tolower(keyword[i]));
            }
        }
    }

    void join(RemoveGarbageAndLowerCase &rhs) {
        result.insert(result.end(), rhs.result.begin(), rhs.result.end());
    }
};

void filter_garbage(std::string &keyword) {
    RemoveGarbageAndLowerCase res(keyword);
    tbb::parallel_reduce(tbb::blocked_range<size_t>(0, keyword.size()), res);
    keyword = res.result;
}

int main() {
    std::string keyword = "ThIas_iS:saome-aTYpe_Ofa=MoDElaKEYwoRDastrang";

    filter_garbage(keyword);

    std::cout << keyword << std::endl;

    return 0;
} 
```

当然，可以通过避免数据复制来进一步改进最终代码，但示例的目标是证明这是一个易于线程化的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T15:54:05.157

这里的问题不是标准功能，而是您对它们的使用。当您显然只需要做一个时，您正在对您的字符串进行多次传递。

您需要做的事情可能无法直接使用算法完成，您需要提升或滚动自己的帮助。

您还应该仔细考虑是否真的需要调整字符串的大小。是的，您可能会节省一些空间，但这会降低您的速度。单独删除它可能会占您运营费用的很大一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T16:05:05.310

这是一种将垃圾清除和小写合并到一个步骤中的方法。它不适用于 UTF-8 等多字节编码，但您的原始代码也没有。我假设`0`并且`1`都是垃圾值。

```
bool Indexer::filter(string &keyword)
{
    static char replacements[256] = {1}; // initialize with an invalid char
    if (replacements[0] == 1)
    {
        for (int i = 0;  i < 256;  ++i)
            replacements[i] = isGarbage(i) ? 0 : ::tolower(i);
    }
    string::iterator tail = keyword.begin();
    for (string::iterator it = keyword.begin();  it != keyword.end();  ++it)
    {
        unsigned int index = (unsigned int) *it & 0xff;
        if (replacements[index])
            *tail++ = replacements[index];
    }
    keyword.resize(tail - keyword.begin());

    // After filtering, if the keyword is empty or it is contained in stop words list, mark as invalid keyword
    if (keyword.size() == 0 || stopwords_.find(keyword) != stopwords_.end())
        return false;

    return true;
} 
```

您的时间安排的最大部分是，`std::set::find`所以我也会尝试`std::unordered_set`看看它是否可以改善事情。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-01T15:43:22.440

我会用较低级别的 C 函数来实现它，可能是这样的（不检查这个编译），就地替换而不调整关键字的大小。

1.  我不会使用一组垃圾字符，而是添加一个包含所有 256 个字符的静态表（是的，它仅适用于 ascii），所有正常的字符都为 0，应该被过滤掉的字符为 1。就像是：

`static const char GARBAGE[256] = { 1, 1, 1, 1, 1, ...., 0, 0, 0, 0, 1, 1, ... }`;

然后对于偏移量`pos`中的每个字符，`const char *str`您可以检查`if (GARBAGE[str[pos]] == 1)`；

这或多或少是无序集所做的，但指令会少得多。`stopwords`如果不是，则应该是无序集。

现在是过滤功能（我在这里假设 ascii/utf8 和以空字符结尾的字符串）：

```
bool Indexer::filter(char *keyword)
{

    char *head = pos;
    char *tail = pos;

    while (*head != '\0') {
        //copy non garbage chars from head to tail, lowercasing them while at it
        if (!GARBAGE[*head])  {
           *tail = tolower(*head);
           ++tail; //we only advance tail if no garbag
        }
        //head always advances
        ++head;
    }
    *tail = '\0';

    // After filtering, if the keyword is empty or it is contained in stop words list, mark as invalid keyword
    if (tail == keyword || stopwords_.find(keyword) != stopwords_.end())
        return false;

    return true;
} 
```

# c# - 将 TLB（和 tlbimp.exe）与 C# 一起使用的缺点

> ID：10399695
> 
> 赞同：1
> 
> 时间：2012-05-01T15:09:17.420
> 
> 标签：c#, pinvoke, com-interop, tlbimp, typelib

我们正在将一家通信公司的软件集成到我们自己的软件中，用于接听电话、转接电话、与客户匹配号码等。

他们为我们提供了 API 文档，其中包括一个 TLB 文件。我们已经使用 tlbimp 工具创建了一个程序集，我们现在想在我们的实现中使用它。

由 tlbimp 创建的一些类已被赋予内部构造函数，使它们无法实例化。我认为在这种情况下应该没问题，因为另一个类应该返回这些类的实例。

这让我想到：在使用 tlbimp.exe 和整个 TLB 时，我还应该注意哪些其他陷阱？手动创建 DllImport/ComImport/PInvoke 代码会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:13:16.150

一般来说，如果你有一个 TLB，我至少会通过使用 tlbimp 生成的程序集来开始我的工作。

该工具本身被广泛使用，并根据 TLB 中提供的定义生成正确的代码。我见过一些结果代码不正确的情况，但它几乎总是回到非常复杂的数组编组情况，或者 TLB 作者只是简单地添加了错误的 COM 注释的地方。

如果您确实发现任何问题，那么您应该考虑开始手动编写修复代码。但我当然不会那样开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T17:56:47.063

您不能调用类型库中声明的那种 COM 接口方法。实现 COM 服务器的 DLL 不会导出方法。您可以将后期绑定与反射或*动态*关键字一起使用，但这很痛苦且容易出错。使用导入库，这就是它存在的原因。

# javascript - Handlebars 没有方法 'html'

> ID：10399698
> 
> 赞同：0
> 
> 时间：2012-05-01T15:09:30.373
> 
> 标签：javascript, handlebars.js

如果我 console.log($('#result-template').html())，我得到：

```
{{#each this}}
<tr>
    <td>{{MfgName}}</td>
    <td><button type="submit" name="MfgID" value="{{MfgID}}">Select</button></td>
</tr>
{{/each}} 
```

但是当我这样做时：

```
var template = Handlebars.compile('#result-template').html(); 
```

我得到：

> 未捕获的类型错误：对象函数（上下文，选项）{} 没有方法“html”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:14:11.630

你的意思是：

`var template = Handlebars.compile($('#result-template').html());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:14:23.367

`Handlebars.compile`返回一个`function`代表模板，而不是一个 jQuery 对象。在调用模板函数之前没有 HTML。

# android - 在 GLSL 中乘以然后除以采样的纹理值会在某些 Android 设备上产生不正确的结果？

> ID：10399707
> 
> 赞同：0
> 
> 时间：2012-05-01T15:10:02.620
> 
> 标签：android, glsl, opengl-es-2.0

一些背景：这是我的第一个 OpenGL ES 2 程序，所以我没有经验。我一直在研究一个着色器来显示颜色索引的纹理。它从一个纹理中采样一个点，将其乘以 256.0 以将其缩放到 8 位整数范围，从调色板纹理中的偏移量中采样相应的 RGBA 值，并设置 gl_FragColor。

我已经在我的三星 Galaxy S2 上完美运行了一个月，但它从未在我的 Galaxy S1 上运行过，只显示黑色纹理。在无数次尝试将我的头撞在墙上试图通过我代码的所有部分的反复试验来找到问题之后，我最终将其缩小为一段着色器代码，可以有效地简化为以下内容：

```
precision highp float;

varying vec2 v_texCoord;
uniform sampler2D texture;

void main()
{
    float multiplied = texture2D(texture, v_texCoord).s * 256.0;

    float divided = multiplied / 256.0;

    gl_FragColor = vec4(divided, divided, divided, 1.0);
} 
```

例如，`texture`是一个 256x256 像素的纹理，每个值都设置为 0xFF。如果我在我的 Galaxy S2 上运行该代码，它工作正常：我得到一个完全白色的屏幕，正好是 0xFFFFFF。如果我在我原来的 Galaxy S1 上运行它，屏幕正好是 0x000000。

现在，我发现如果我降低 256.0 的值然后运行它，我的 Galaxy S1 上的输出开始从全黑增加到各种灰度。例如，8.0 给了我 0x424142，4.0 给了我 0x848284。当我乘/除以 2.0 时，它开始像我的 Galaxy S2 一样输出 0xFFFFFF！

知道什么可能导致这样的问题吗？我会接受你最疯狂的猜测，因为在这一点上我完全被打败了。我看不出有什么可能导致这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:51:57.117

Is the answer floating point truncation?

A fragment shader is allowed to use "lowp" float precision, which means 16-bit floating point, which 256 * 256 would overflow (see [http://en.wikipedia.org/wiki/Half-precision_floating-point_format](http://en.wikipedia.org/wiki/Half-precision_floating-point_format)). At this point the math falls apart and results are undefined.

However, as far as I can tell (see [glblenchmark.com data](http://glbenchmark.com/phonedetails.jsp?benchmark=glpro27&D=Samsung+GT-i9100+Galaxy+S2&testgroup=gl)) the Galaxy S1 should support highp floats in the fragment shader as it has the "OES_fragment_precision_high" extension in the `glGetString(GL_EXTENSIONS)` output. (Though I may have the wrong model there...)

Maybe there is some other reason you're not getting high precision floats though. What `#version` are you using in your shader?

# java - 运行 maven 测试时出现 NoSuchEJBException

> ID：10399710
> 
> 赞同：0
> 
> 时间：2012-05-01T15:10:17.963
> 
> 标签：java, maven, jboss, ejb, jndi

我有一个作为 Maven 测试运行的 Maven 客户端项目。我在 junit 测试中做的第一件事是使用 jndi 字符串进行查找。在这里，我收到一个无状态 bean 代理，它被转换为远程接口。一旦我从接口调用一个方法（比如保存一些使用数据访问对象的域对象至极使用 jpa），我就会收到异常

```
javax.ejb.NoSuchEJBException: No such EJB[appname=,modulename=someName,distinctname=,beanname=SomeBean] 
```

文档说：“如果尝试在不再存在的有状态会话或单例对象上调用业务方法，则会引发 NoSuchEJBException”。问题是 bean 是无状态的，不是有状态的或单例的。我也很确定 jndi 字符串是正确的，因为如果我在客户端项目的主要方法中进行相同的查找和持久性方法调用（使用“安装 jboss-as:deploy”作为 maven 构建运行）一切工作正常。有什么建议我可以在测试时使用代理中的持久性方法吗？一些同事有类似的设置，并且在没有 Arquillian 左右的情况下也适用于他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:57:58.520

我不知道为什么，但它现在有效。我所做的是在所有 DaoBean 继承的抽象通用 DaoBean 中删除 EntityManager 的 getter 方法。在执行客户端时，getter 突然显示为错误（之前未显示为错误）。

# c++ - 信号量（互斥）麻烦

> ID：10399714
> 
> 赞同：0
> 
> 时间：2012-05-01T15:10:43.953
> 
> 标签：c++, multithreading, mutex, semaphore

假设我有一个互斥锁、两个线程、一个函数和一个循环（伪代码）。功能：

```
void Update(){
    Mutex.enter();
    ...// time: 10 ms
    Mutex.leave();
} 
```

主要.cpp：

```
void main(){
    ...// Starting thread
    while(true)
        Update();
} 
```

线：

```
void Thread(void *){
    Mutex.enter();
    ... // 
    Mutex.leave();
} 
```

但是Function调用不断，所以Mutex小时候是空闲的。线程进入 Mutex 的机会有多大？如果低，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:15:45.860

如果您使用的是 boost 线程（[链接](http://www.boost.org/doc/libs/1_49_0/doc/html/thread.html)），那么我会使用[`yield()`](http://www.boost.org/doc/libs/1_49_0/doc/html/thread/thread_management.html#thread.thread_management.this_thread.yield). 它将允许任何其他“等待”线程“有机会”运行。

也可能有一种 win32 或 pthreads 方式来执行此操作。

编辑：顺便说一句，在锁`yield()` *外*使用。如果它在锁内，显然那将毫无用处。

Edit2：这里是不同平台的功能：

*   Win32：`SwitchToThread()` [msdn 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686352%28v=vs.85%29.aspx)。
*   Linux/Unix pthreads: `pthread_yield()' [link](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_yield.3.html)

If you're not on any of those platforms, read the descriptions at those links, and look for a function that does the same thing in your framework.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:34:50.287

From the pseudo-code you showed it seems like there's no cooperation between threads. If thread2 is lucky to grab the mutex before the call to the first Update() is placed then for the whole lifetime of thread2 Update() functions will not be called. It looks like a flawed design to me. If thread2 is doing the work and 'main' thread is calling Update() function to monitor and report the progress of whatever is happening in thread2 thread routine, then it would make much more sense to have thread1 (the main one) wait on a update_required signal and thread2 (the one that is progressing with work) would do the work, then fill-in a struct variable with all the data needed to report the progress and signal thread1 to use the data and report the progress. Using a ring buffer of such struct variable could eliminate the need for mutexes altogether.

# c# - 以编程方式设置程序集默认图标

> ID：10399716
> 
> 赞同：1
> 
> 时间：2012-05-01T15:10:48.650
> 
> 标签：c#, icons, .net-assembly

从标题来看，我有一个 Windows 窗体项目，我需要为该文件设置程序集图标。该文件包含在外部 dll 中，它不是图标文件。

有什么方法可以实现吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:56:40.890

看这里：http: [//msdn.microsoft.com/en-us/library/ms648004%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms648004%28v=VS.85%29.aspx)

如文章中所述，您要使用的功能是：

1.  [开始更新资源](http://msdn.microsoft.com/en-us/library/ms648030%28v=vs.85%29.aspx)
2.  [更新资源](http://msdn.microsoft.com/en-us/library/ms648049%28v=vs.85%29.aspx)
3.  [结束更新资源](http://msdn.microsoft.com/en-us/library/ms648032%28v=vs.85%29.aspx)

# php - 从 php 多维数组中选择数据

> ID：10399723
> 
> 赞同：1
> 
> 时间：2012-05-01T15:11:07.213
> 
> 标签：php, arrays, multidimensional-array

我有一个多维数组，如下所示：

```
$a = array (
   #id           num  name      full name
    0 => array ( 65, 'name-1', 'Name One' ),
    1 => array ( 76, 'name-2', 'Name Two' ),
    2 => array ( 82, 'name-3', 'Name Three' )
); 
```

现在，如果我想选择`'name-1'`(name) 我使用`$a[0][1]`并选择`'Name Three'`(full name) 我使用`$a[2][2]`.

因此，如果数组中有 id，我可以选择数字、名称或全名。

但是，如果我有号码或姓名并且我想选择全名怎么办？我怎么能得到它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:14:40.740

如果使用 id 你的意思是数字：

```
$num = // num you want to find
foreach ($a as $b) {
    if ($b[0] == $num) {
        $name = $b[1];
        $full = $b[2];
        break;
    }
} 
```

如果使用 id 你的意思是#ID 那么：

```
$id = // id you want to find
$num = $a[$id][0];
$name = $a[$id][1];
$full = $a[$id][2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:16:07.843

你有价值并且你想要一个键，所以也许你应该考虑重组你的数组。如果要保留该结构，则需要遍历每个元素（for、foreach），检查`array_search`您的匹配项（结果是数组键或 false）。

```
for ($i = 0, $ix = count($a); $i < $ix; ++$i) {
  $pos = array_search($NAME, $a[$i]);
  if ($pos === false) {
    continue;
  }
  print_r($a[$i]);
  break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:16:26.187

您将不得不遍历数组。例如，如果您有号码：

```
$result = false;
foreach ($a as $value) {
    if ($value[0] == $number) { 
        $result = $value; break;
    }
} 
```

现在你可以使用 $value。要使用姓名或全名进行搜索，您必须使用 $value[1] 和 $value[2]。

# filter - IE9 滤镜渐变和边框半径冲突

> ID：10399726
> 
> 赞同：7
> 
> 时间：2012-05-01T15:11:20.757
> 
> 标签：filter, internet-explorer-9, css

我正在尝试在同一元素上使用渐变效果和边框半径，但它们之间存在冲突。渐变效果很好，但它使边界半径不起作用。

这是脚本

```
.selector {
     filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff4317',endColorstr='#891a00');
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
} 
```

我不想使用任何`.htc`文件。

这是过滤器和边界半径之间的已知问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T15:26:43.083

您可以使用 SVG 渐变，这是一个在 IE9 中使用的示例：http `border-radius`: [//jsfiddle.net/thirtydot/Egn9A/](http://jsfiddle.net/thirtydot/Egn9A/)

要生成 SVG 渐变，请使用： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)。你没有提到试图让它在其他浏览器/版本的 IE 中工作，但如果这是你想要做的（你可能是因为你正在使用`filter`），请使用“IE9 支持”部分中描述的方法.

另一个生成 SVG 渐变的站点：http: [//ie.microsoft.com/testdrive/graphics/svggradientbackgroundmaker/default.html](http://ie.microsoft.com/testdrive/graphics/svggradientbackgroundmaker/default.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-11T10:29:45.167

**将这些类用于边界半径和渐变**

**HTML 代码：**

**`<div class="box-radius ">border radius with gradient</div>`**

**CSS 代码：**

```
.box-radius {
        -webkit-border-radius: 5px;
           -moz-border-radius: 5px;
             -o-border-radius: 5px;
                border-radius: 5px;  
        /* behavior: url(border-radius.htc); */
    }

.gradient {
    background-image: -moz-linear-gradient(top, #ff4317, #891a00); /* Firefox 3.6 */
    background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0, #ff4317),color-stop(1, #891a00)); /* Safari & Chrome */
    filter:  progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#ff4317',endColorstr='#891a00'); /* IE6 & IE7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#ff4317',endColorstr='#891a00')"; /* IE8 */ 
```

# postgresql - PSQLException：当前事务被中止，命令被忽略直到事务块结束

> ID：10399727
> 
> 赞同：216
> 
> 时间：2012-05-01T15:11:22.017
> 
> 标签：postgresql, jboss, infinispan

我在 JBoss 7.1.1 Final 的 server.log 文件中看到以下（截断的）堆栈跟踪：

```
Caused by: org.postgresql.util.PSQLException: 
ERROR: current transaction is aborted, commands ignored until end of 
transaction block

at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2102)
at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)
at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:512)
at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:374)
at org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:302)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_23]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_23]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_23]
at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_23]
at org.postgresql.ds.jdbc23.AbstractJdbc23PooledConnection$StatementHandler.invoke(AbstractJdbc23PooledConnection.java:455)
at $Proxy49.executeUpdate(Unknown Source)   at org.jboss.jca.adapters.jdbc.WrappedStatement.executeUpdate(WrappedStatement.java:371)
at org.infinispan.loaders.jdbc.TableManipulation.executeUpdateSql(TableManipulation.java:154) [infinispan-cachestore-jdbc-5.1.2.FINAL.jar:5.1.2.FINAL]
... 154 more 
```

检查 Postgres 日志文件会发现以下语句：

```
STATEMENT:  SELECT count(*) FROM ISPN_MIXED_BINARY_TABLE_configCache
ERROR:  current transaction is aborted, commands ignored until end of transaction block
STATEMENT:  CREATE TABLE ISPN_MIXED_BINARY_TABLE_configCache(ID_COLUMN VARCHAR(255) NOT NULL, DATA_COLUMN BYTEA, TIMESTAMP_COLUMN BIGINT, PRIMARY KEY (ID_COLUMN))
ERROR:  relation "ispn_mixed_binary_table_configcache" does not exist at character 22 
```

我正在使用 JBoss 7.1.1 Final 附带的 Infinispan，即 5.1.2.Final。

所以这就是我认为正在发生的事情：

*   Infinispan 尝试运行该`SELECT count(*)...`语句以查看 ; 中是否有任何记录`ISPN_MIXED_BINARY_TABLE_configCache`。
*   出于某种原因，Postgres 不喜欢这种说法。
*   Infinispan 忽略了这一点，并继续`CREATE TABLE`发表声明。
*   Postgres barfs 因为它仍然认为它是同一个事务，而 Infinispan 未能回滚，并且这个事务是从第一条`SELECT count(*)...`语句开始的。

这个错误是什么意思，知道如何解决它吗？

* * *

## 回答 #1

> 赞同：265
> 
> 时间：2012-10-27T20:01:39.103

**我使用 Java 和 PostgreSQL 在表上进行插入时遇到了这个错误。我将说明如何重现此错误：**

```
org.postgresql.util.PSQLException: ERROR: 
current transaction is aborted, commands ignored until end of transaction block 
```

**概括：**

你得到这个错误的原因是你输入了一个事务并且你的一个 SQL 查询失败了，你狼吞虎咽地忽略了它。但这还不够，然后您使用相同的连接，使用 SAME TRANSACTION 运行另一个查询。在第二个格式正确的查询中引发异常，因为您正在使用损坏的事务来执行额外的工作。默认情况下，PostgreSQL 会阻止您这样做。

**我在用着：** `PostgreSQL 9.1.6 on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2), 64-bit".`

**我的 PostgreSQL 驱动程序是：** `postgresql-9.2-1000.jdbc4.jar`

**使用 Java 版本：** `Java 1.7`

**下面是用于说明异常的表创建语句：**

```
CREATE TABLE moobar
(
    myval   INT
); 
```

**Java程序导致错误：**

```
public void postgresql_insert()
{
    try  
    {
        connection.setAutoCommit(false);  //start of transaction.

        Statement statement = connection.createStatement();

        System.out.println("start doing statement.execute");

        statement.execute(
                "insert into moobar values(" +
                "'this SQL statement fails, and it " +
                "is gobbled up by the catch, okfine'); ");

        //The above line throws an exception because we try to cram
        //A string into an Int.  I Expect this, what happens is we gobble 
        //the Exception and ignore it like nothing is wrong.
        //But remember, we are in a TRANSACTION!  so keep reading.

        System.out.println("statement.execute done");

        statement.close();

    }
    catch (SQLException sqle)
    {
        System.out.println("keep on truckin, keep using " +
                "the last connection because what could go wrong?");
    }

    try{
        Statement statement = connection.createStatement();

        statement.executeQuery("select * from moobar");

        //This SQL is correctly formed, yet it throws the 
        //'transaction is aborted' SQL Exception, why?  Because:
        //A.  you were in a transaction.
        //B.  You ran a SQL statement that failed.
        //C.  You didn't do a rollback or commit on the affected connection.

    }
    catch (SQLException sqle)
    {
        sqle.printStackTrace();
    }   

} 
```

**上面的代码为我生成了这个输出：**

```
start doing statement.execute

keep on truckin, keep using the last connection because what could go wrong?

org.postgresql.util.PSQLException: 
  ERROR: current transaction is aborted, commands ignored until 
  end of transaction block 
```

**解决方法：**

你有几个选择：

1.  最简单的解决方案：不要进行交易。设置`connection.setAutoCommit(false);`为`connection.setAutoCommit(true);`。它之所以有效，是因为失败的 SQL 只是作为失败的 SQL 语句而被忽略。欢迎你让 SQL 语句失败，PostgreSQL 不会阻止你。

2.  留在事务中，但是当您检测到第一个 SQL 失败时，回滚/重新启动或提交/重新启动事务。然后，您可以根据需要继续在该数据库连接上失败尽可能多的 SQL 查询。

3.  不要捕获并忽略 SQL 语句失败时引发的异常。然后程序将在格式错误的查询上停止。

4.  取而代之的是 Oracle，当您对事务中的连接的查询失败并继续使用该连接时，Oracle 不会引发异常。

为了捍卫 PostgreSQL 以这种方式做事的决定……Oracle让你在中间变得软弱，让你做愚蠢的事情并忽略它*。*

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-05-01T15:36:04.237

检查导致. *_* `current transaction is aborted`这通常意味着数据库抛出了您的代码忽略的异常，现在期望下一个查询返回一些数据。

因此，您现在认为一切正常的应用程序和数据库之间存在状态不匹配，这需要您从头回滚并重新启动事务。

在这种情况下，您应该捕获所有异常并回滚事务。

[这是一个类似的问题。](https://stackoverflow.com/questions/2979369/databaseerror-current-transaction-is-aborted-commands-ignored-until-end-of-tra)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-02-21T00:30:19.680

我认为最好的解决方案是使用`java.sql.Savepoint`.

在执行可以的查询之前`throw SQLException`，请使用该方法`Connection.setSavepoint()`，如果抛出异常，您只会回滚到此保存点，而不是整个事务。

示例代码：

```
Connection conn = null;
Savepoint savepoint = null;
try {
    conn = getConnection();
    savepoint = conn.setSavepoint();
    //execute some query
} catch(SQLException e) {
    if(conn != null && savepoint != null) {
        conn.rollback(savepoint);
    }
} finally {
   if(conn != null) {
      try {
          conn.close();
      } catch(SQLException e) {}

   }
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-02-13T16:28:03.030

在 postgresql JDBC 驱动程序上已经完成了一些与此行为相关的工作：
请参阅[https://github.com/pgjdbc/pgjdbc/pull/477](https://github.com/pgjdbc/pgjdbc/pull/477)

现在可以通过设置

```
自动保存=总是
```

在连接中（请参阅[https://jdbc.postgresql.org/documentation/head/connect.html](https://jdbc.postgresql.org/documentation/head/connect.html)）以避免“当前事务中止”综合症。
由于围绕语句执行处理保存点的开销保持非常低（有关详细信息，请参见上面的链接）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-02-13T05:27:53.190

在 Ruby on Rails PG 中，我创建了一个迁移，迁移了我的数据库，但忘记重新启动我的开发服务器。我重新启动了我的服务器并且它工作了。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-23T14:24:11.943

尝试这个`COMMIT;`

我在 pgadmin4 中运行它。它可能会有所帮助。它与上一个命令过早停止有关

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-06-09T02:37:53.943

出现这个错误的原因是之前有其他数据库错误操作导致当前数据库操作无法进行（我用google翻译把我的中文翻译成英文）</p>

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-11-04T05:16:12.650

你需要回滚。JDBC Postgres 驱动程序非常糟糕。但是如果你想保留你的事务，并且只是回滚那个错误，你可以使用保存点：

```
try {
_stmt = connection.createStatement();
_savePoint = connection.setSavepoint("sp01");
_result = _stmt.executeUpdate(sentence) > 0;
} catch (Exception e){
 if (_savePoint!=null){
 connection.rollback(_savePoint);
}
} 
```

在这里阅读更多：

[http://www.postgresql.org/docs/8.1/static/sql-savepoint.html](http://www.postgresql.org/docs/8.1/static/sql-savepoint.html)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-30T10:26:13.083

该问题已在 Infinispan 5.1.5.CR1 中修复：[ISPN-2023](https://issues.jboss.org/browse/ISPN-2023)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-02-27T23:44:54.647

我有同样的问题，但后来意识到数据库中有一个同名的表。删除后，我能够导入文件。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-05-11T19:34:34.203

如果卷上的磁盘空间不足，可能会发生这种情况。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2022-01-18T10:42:24.593

对我来说问题是，驱动程序没有安装。我下载了驱动程序并粘贴到 ~/Library/Tableau/Driver(mac) 文件夹中，它工作正常。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-01-15T15:19:23.090

这是 PostgreSQL 非常奇怪的行为，它甚至不符合 PostgreSQL 强制用户明确所有内容的哲学——因为异常被明确地捕获和忽略。因此，即使这种辩护也不成立。在这种情况下，Oracle 的行为更加用户友好并且（就我而言）正确 - 它为开发人员留下了选择。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-15T06:42:46.743

我只是遇到同样的错误。通过在本地 PostgreSQL 中启用[log_statement](https://www.postgresql.org/docs/current/static/runtime-config-logging.html#GUC-LOG-STATEMENT)和[log_min_error_statement](https://www.postgresql.org/docs/current/static/runtime-config-logging.html#GUC-LOG-MIN-ERROR-STATEMENT) ，我能够找出根本原因。

我提到[了这个](https://stackoverflow.com/questions/2979369/databaseerror-current-transaction-is-aborted-commands-ignored-until-end-of-tra)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-15T03:25:27.047

我使用带有`@Transactional`注释的spring，我捕获了异常，对于某些异常，我将重试3次。

对于 posgresql，当出现异常时，您不能再使用相同的 Connection 提交。您必须先回滚。

就我而言，我使用`DatasourceUtils`获取当前连接并`connection.rollback()`手动调用。并调用recruive方法重试。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-04-21T16:13:19.133

我正在使用 spring boot jpa 并通过实现 @EnableTransactionManagement 来修复

附件可能对您有所帮助。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-28T22:39:38.417

我将 JDBI 与 Postgres 一起使用，遇到了同样的问题，即在违反先前事务语句的某些约束后，后续语句将失败（但在我等待一段时间后，比如 20-30 秒，问题就消失了）。

经过一番研究，我发现问题是我在我的 JDBI 中“手动”执行事务，即我用 BEGIN;...COMMIT; 包围了我的语句。原来是罪魁祸首！

在JDBI v2中，我只需添加@Transaction注解，@SqlQuery或@SqlUpdate中的语句将作为事务执行，不再出现上述问题！

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-11-19T13:05:22.117

就我而言，我收到此错误是因为我的文件已损坏。在迭代文件记录时，它给了我同样的错误。

将来可能会对任何人都有帮助。这是发布此答案的唯一原因。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2015-01-24T14:46:13.237

将隔离级别从可重复读取更改为已提交读取。

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2020-04-21T16:10:54.900

我正在使用 spring boot jpa 并通过实现 @EnableTransactionManagement 来修复

附件可能对您有所帮助。[![在此处输入图像描述](../Images/8bef558a85ef85167a82a89463d8a739.png)](https://i.stack.imgur.com/Gd4FP.png)

# c# - 如何在 C++ 中创建抽象基类？

> ID：10399729
> 
> 赞同：-4
> 
> 时间：2012-05-01T15:11:25.677
> 
> 标签：c#, c++, polymorphism, virtual, abstract

我将如何在 C++ 中执行以下操作（以下代码是 C#）：

```
class Base
{
    public virtual void Foo()
    {
        // do stuff...
    }
}

class C : Base
{
    public override void Foo()
    {
        base.Foo(); // <=== how do you do this line?
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:13:00.690

使用运算符`::`：

```
class Base
{
public:
    virtual ~Base() {}
    virtual void Foo()
    {
        // do stuff
    }
};

class C : public Base
{
public:
    void Foo()
    {
        Base::Foo();
    }
}; 
```

要在 C++ 中拥有一个抽象类，至少有一个方法需要是纯虚拟的：

```
class Base
{
public:
    virtual ~Base() {}
    virtual void Foo() {}
    virtual void another_function() = 0; // Pure virtual function.
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:14:26.400

像这样：

```
class base {
public:
    virtual void Foo() = 0;
}

class sub : public base {
public:
    void Foo() { 
        std::cout << "In Sub!" << std::endl;
    }
} 
```

注意`virtual`关键字的使用。在 C++ 中，除非显式声明，否则不会在运行时查找函数实现，如 C#、Objective-C 或 Java。因此，我们必须告诉运行时

“嘿，我们这里有一个函数，需要在运行时确定它的实现，所以不要假设它是一个类`base`，而是一个子类。”

还要注意`= 0`函数声明的部分。在 C++ 中，这描述了一个`pure virtual`函数。没有它，`base`就不能是抽象的，除非在`pure virtual`类中有另一个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:21:57.203

我只想指出，**你可以** 在 C++ 中做到这一点。您只需在 C++ 中实现纯虚函数，您可以在 .h 中执行此操作：

```
class Base
{
    public:
       Base();
       virtual ~Base();
       virtual void Foo()=0;
}; 
```

这在你的 .cpp

```
void Base::Foo()
{
   std::cout<< "In Base::Foo which is pure virtual\n";
} 
```

然后在您的派生类中执行其他人指示的操作，并在您的 Derived::Foo() 中调用 Base::Foo() ，它将产生输出。使函数成为纯虚拟函数并不能消除其具有可执行代码的能力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:18:10.540

要在 C++ 中创建一个类抽象，您需要为它提供一个纯虚函数。您的代码的 C++ 版本将是：

```
class Base
{
public:
    virtual void Foo() = 0; //setting a virtual function to 0 makes it pure virtual.     This is abstract.
}

class C : Base
{
public:
    void Foo()
    {
        Base::Foo(); //I don't think this line will work...You're calling an abstract method.
    }
} 
```

# loops - 使用powershell检查ftp文件夹中的文件

> ID：10399731
> 
> 赞同：2
> 
> 时间：2012-05-01T15:11:35.500
> 
> 标签：loops, powershell, ftp

我正在寻找使用 powershell 来查看 ftp 文件夹中是否有特定文件。更具体地说，大约有 15 个不同的文件夹需要检查特定文件名。关于我将如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:38:11.200

[这里](http://gallery.technet.microsoft.com/scriptcenter/PowerShell-FTP-Client-db6fe0cb)有一个 PowerShell ftp 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T22:01:25.200

```
$DEBUG = 1
# Machines
    $MachineNames = @("machine1","machine2" )
    $MachineIPs = @("192.168.1.1","192.168.1.2"  )
# Websites
    $WebsiteNames = @("website1","website2" )
    $WebsiteURLs = @("http://yahoo.com","http://google.com"    )

#====== check websites
$i = 0;
foreach ($WebsiteURL in $WebsiteURLs){
    # First we create the request.
    $HTTP_Request = [System.Net.WebRequest]::Create($WebsiteURL)
    # We then get a response from the site.
    $HTTP_Response = $HTTP_Request.GetResponse()
    # We then get the HTTP code as an integer.
    $HTTP_Status = [int]$HTTP_Response.StatusCode
    #$HTTP_Response
    If ($HTTP_Status -eq 200) { 
        if ($DEBUG -eq 1) {Write-Host "== " $WebsiteNames[$i] " is OK!" }
    }
    Else {
        if ($DEBUG -eq 1) {Write-Host "==Error: "$WebsiteNames[$i] " may be down!" }
        SendEmails $WebsiteNames[$i]
    }
    # Finally, we clean up the http request by closing it.
    $HTTP_Response.Close()
    Clear-Variable HTTP_Response
    $i = $i + 1
}

#====== check IP
$i = 0;
foreach ($MachineIP in $MachineIPs){
    $isValidIP = Test-Connection $MachineIP -Count 1 -Quiet 
    if ($DEBUG -eq 1) {
    $hostn = [System.Net.Dns]::GetHostEntry($MachineIP).HostName
    New-Object -TypeName PSObject -Property @{'Host'=$hostn;'IP'=$MachineIP}
    }
    if (-not($isValidIP)) {
        if ($DEBUG -eq 1) {Write-Host "==Error: " $MachineNames[$i] " ("$MachineIPs[$i]") may be down!" }
        SendEmails $MachineNames[$i]
    }
    $i = $i + 1
} 
```

# ruby-on-rails - 带有咖啡脚本和生态模板语言的 Backbone.js 模板错误

> ID：10399740
> 
> 赞同：1
> 
> 时间：2012-05-01T15:11:49.793
> 
> 标签：ruby-on-rails, google-chrome, backbone.js, coffeescript, eco

***解决了：***

我有一个用coffeescript编写的主干（0.9.2），如下所示

```
class Animal.Views.Cats extends Backbone.View
 template: JST['animals/cats']
 ...
 ...
 render: ->
  $(@el).html(@template())
  this 
```

使用此咖啡脚本代码，当我在浏览器中执行时，我在控制台中收到以下错误

> **对象 <#cat> 的属性模板不是函数**

我正在使用带有 rails 3.1 后端的生态模板我哪里出错了？

**解决方案：**

问题是深度嵌套的模板文件结构

> 模板：JST['mammals/animals/cats'] 修复了问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:36:27.747

重申一下，如果您有这样的目录结构：

```
app/assets/templates/namespace/animals/cats.jst.eco 
```

引用模板时需要包含命名空间：

*   不会**工作**：`JST['animals/cats']`
*   将工作：`JST['namespace/animals/cats']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:38:52.833

在您的代码中，“模板”未定义为函数，而是定义为属性。

尝试

```
template: -> JST['animals/cats'] 
```

即，插入功能箭头'->'

或者，如果您不希望它成为一个函数，则在 @template 之后删除括号

```
$(@el).html @template 
```

# c# - 跨多个实体同步 ID

> ID：10399741
> 
> 赞同：0
> 
> 时间：2012-05-01T15:11:52.043
> 
> 标签：c#, .net, entity-framework, entity

我有一个正在运行的应用程序，它的实体可能是：CustomerType1、CustomerType2 和 CustomerType3。

所有三个 CustomerType 实体可能具有完全不同的信息，但它们都有一个 CustomerID 字段，它是一个整数。

我试图弄清楚如何进行设置，以便无论创建哪种类型，CustomerID 在所有三种类型中都将始终是唯一的，并且仍然是整数。

例如，创建以下内容将导致以下 CustomerID

客户类型 1 - 1

客户类型 1 - 2

客户类型 1 - 3

客户类型 2 - 4

客户类型 1 - 5

客户类型 3 - 6

客户类型 1 - 7

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:46:22.103

2种可能的方法：

1.  为所有客户类型使用一个表，并使用“鉴别器”字段来跟踪每个客户类型，并将 CustomerID 作为其身份。
2.  使用外部表来管理将 CustomerID 创建为身份字段。

第一种方法的优点是在以下教程中概述的实体框架中具有直接支持：

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application)

请注意，尽管您的客户类型可能包含不同的数据，但从长远来看，尽管浪费了数据库空间，但这种方法在可扩展性方面最终可能会更便宜。在您的业务层中，客户类型可以简单地忽略不属于他们的字段。

第二种方法可能最适合添加到难以更改的现有应用程序中。从长远来看，以这种方式跟踪 ID 涉及更多工作。一方面，您的业务层需要从一个表中获取一个 ID 才能插入到另一个表中，这对于大型数据集来说可能很昂贵。根据业务层的要求，可能还存在您必须丢弃未使用的 CustomerID 而系统中根本不存在的情况（例如，您将从 CustomerID 58 跳到 CustomerID 60）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:25:22.260

您的方法类似于在网络数据库中具有相同的实体类型，具有唯一的 ID。

通常，许多开发人员使用 UID 或相关类型。它是一种具有 64、128 或更多位数的类型，并且它是随机自动生成的。如果在不同的机器上使用相同的数据库，几乎不可能得到相同的值。

一些数据库将该值存储为字符串，而不是整数。

如果您只有一个带有整数键的表，您如何生成主键值？自动的 ？您是否在代码中生成值，然后分配给主键字段？

**解决方案 1**

如果您的数据库支持作为整数自动生成的 UID 或 OID 或唯一标识符，请使用它们。

**解决方案 2**

如果您的数据库支持 UID 或 OID 作为 varchar / string，或者您使用的数据库引擎或程序具有生成 UID 的函数，您可以使用该函数，将结果值从字符串转换为整数，（剥离分隔符，如“ -")，并存储在整数主键字段中。

**概括**

许多开发人员更喜欢让数据库引擎在插入新记录时自动生成主键。在这种情况下，最好在代码中生成主键并直接分配它。由于您使用的是“实体框架”，我忽略了该库如何处理主键。

干杯。

# jquery - jQuery-File-Upload 插件 - 无法删除文件夹

> ID：10399743
> 
> 赞同：2
> 
> 时间：2012-05-01T15:12:01.270
> 
> 标签：jquery, jquery-plugins, file-upload

我正在尝试实现[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload) - 当我将文件从资源管理器拖放到浏览器中时，它可以正常工作。但我也希望能够拖放一个文件夹。

当我将文件拖放到浏览器上时，这些文件位于 fileuploaddrop(e, data) 事件处理程序的 data.files 参数中。但是当我删除一个文件夹时，文件数组是空的。

```
var dropZone = $('#fileUploadDiv').fileupload({
    dropZone : $('.dropZone'),
    drop : function(e, data) {
      $.each(data.files, function(index, file) {
        console.log('Dropped file: ' + file.name);
      });
    }
}). 
```

插件不支持这个，还是我在某处遗漏了一个神秘的设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:16:03.280

上传器使用 HTML5 功能，不允许删除文件夹。在此处阅读更多内容：[HTML5 是否允许拖放上传文件夹或文件夹树？](https://stackoverflow.com/questions/3590058/does-html5-allow-drag-drop-upload-of-folders-or-a-folder-tree)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:21:40.550

chrome 21 现在可以拖放和输入目录上传

您可以使用 webkitdirectory 获取目录上传

```
<input type='file' webkitdirectory> 
```

这是上传文件夹的完整代码。

[https://protonet.info/en/blog/html5-experiment-drag-drop-of-folders/](https://protonet.info/en/blog/html5-experiment-drag-drop-of-folders/)

# javascript - jQuery-UI：sortable() 占位符感觉很粘

> ID：10399747
> 
> 赞同：2
> 
> 时间：2012-05-01T15:12:15.620
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-sortable

我正在尝试使用`$.sortable`来实现一个简单的难题：

```
<html>
  <head>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <style>
      span {
        display: inline-block;
        width: 1em;
        text-align: center;
        border: 1px solid;
        background: white;
        margin: 0 4px;
      }
      .vowel { color: red }
      .vowel:hover {
        cursor: pointer;
        background: red;
        color: white;
      }
      .word { padding: 5px }
      #words, #vowels{
        float: left;
        clear: both;
        padding: 5px;
        margin: 5px;
      }
      #words { border: 1px solid black }
      #vowels { border: 2px solid red }
      #vowels .placeholder {
        display: none;
      }
      .word .placeholder {
        width: 4px;
        margin: -2px;
        background: pink;
        height: 1em;
        border: none;
      }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <script>
      $(function(){
        $('#vowels,.word').disableSelection().sortable({
          cursor: 'pointer',
          placeholder: 'placeholder',
          cancel: '.consonant',
          connectWith: '#vowels,.word',
          helper: 'clone',
          appendTo: 'body',
          stop: function(event, ui) {
            var $uiItem = $(ui.item);
            if ($uiItem.parent().is('#vowels')) $uiItem.remove();
          }
        });
        $('#vowels').bind('sortstart', function(event, ui){
          var $uiItem = $(ui.item);
          $uiItem.clone().show().insertBefore($uiItem);
        });
      });
    </script>
  </head>
  <body>
    <div id="vowels">
      <span class="vowel">A</span>
      <span class="vowel">E</span>
      <span class="vowel">I</span>
      <span class="vowel">O</span>
      <span class="vowel">U</span>
      <span class="vowel">Y</span>
    </div>
    <div id="words">
      <div class="word">
        <span class="consonant">H</span>
        <span class="consonant">P</span>
        <span class="consonant">P</span>
      </div>
      <div class="word">
        <span class="consonant">B</span>
        <span class="consonant">S</span>
        <span class="consonant">H</span>
        <span class="consonant">F</span>
        <span class="consonant">L</span>
      </div>
      <div class="word">
        <span class="consonant">D</span>
        <span class="consonant">C</span>
      </div>
      <div class="word">
        <span class="consonant">G</span>
        <span class="consonant">R</span>
        <span class="consonant">M</span>
        <span class="consonant">P</span>
      </div>
      <div class="word">
        <span class="consonant">D</span>
        <span class="consonant">P</span>
      </div>
      <div class="word">
        <span class="consonant">S</span>
        <span class="consonant">N</span>
        <span class="consonant">Z</span>
      </div>
      <div class="word">
        <span class="consonant">S</span>
        <span class="consonant">L</span>
        <span class="consonant">P</span>
      </div>
    </div>
  </body>
</html> 
```

虽然它有效，但它并没有我希望的那么好。我可以拖动字母，但占位符的移动并不如我所愿，偶尔会卡在某个位置。

我能做些什么让它更顺利地移动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:07:02.117

您可能遇到的一个问题与 jQuery UI Bug #4759 有关。你可以在[这里阅读。](http://bugs.jqueryui.com/ticket/4759)本质上，问题在于选项 connectWith 在初始化期间比在初始化之后要慢得多。所以你需要做的就是像这样移动 connectWith ：

```
$(function() {
$('#vowels,.word').disableSelection().sortable({
    cursor: 'pointer',
    placeholder: 'placeholder',
    cancel: '.consonant',
    helper: 'clone',
    appendTo: 'body',
    stop: function(event, ui) {
        var $uiItem = $(ui.item);
        if ($uiItem.parent().is('#vowels')) $uiItem.remove();
    }
}).sortable(
   "option", "connectWith", '#vowels,.word'
);
$('#vowels').bind('sortstart', function(event, ui) {
    var $uiItem = $(ui.item);
    $uiItem.clone().show().insertBefore($uiItem);
}); 
```

这是[jsFiddle](http://jsfiddle.net/SeasonEnds/V8ECd/1/)。

# java - JSCH + Expect4J，在标准 .expect 和 .send 之前需要额外的登录步骤

> ID：10399748
> 
> 赞同：3
> 
> 时间：2012-05-01T15:12:19.360
> 
> 标签：java, sockets, ssh, jsch

我编写了一个程序，将通过 SSH 登录。该服务器采取了一个额外的步骤，即当它提示“目的地：”时，您需要向它提供区号和三位数的电话号码。所以，我想做的是让我的终端等待 Destination: 提示，给它我的六位数，然后在执行我的期望代码之前查看结果提示以查看它的去向。在 Destination: 提示之后有五种可能的终端类型，这意味着我需要在使用正则表达式给它我的六个电话号码数字后测试返回的流。

我陷入困境的地方是找出获取目的地的最佳方法：提示，发送我的数字，获取结果代码以执行我的正则表达式和 if then 语句，然后将其传递给我将成为的几个类之一从那时起使用 expect4j 执行。在转移到期望之前我应该​​使用 exec shell，如果是这样，我如何从中获取输入来运行正则表达式？我应该发送一个 expect.expect ("Destination:"); 后跟一个expect.send("123456");，然后获取输入以运行正则表达式，如果是，我如何从中获取输入？（我的示例代码使用了一个缓冲区，它以某种方式从执行方法中获取信息，我真的不明白它是如何完全工作的，）或者，我的最后一个选择，我应该构建我的示例代码的两个实例，一个使会话和 ssh 通道，

**简而言之：**据我所知，这是我的三个选项：运行一个 exec shell，在进入更复杂的列表构建之前运行一个 expect.expect 和 expect.send 等，或者使用 expect 方法运行两个列表，一个在另一个之后。不知道该走哪条路，以及如何让我的输入恢复运行正则表达式。

我设法让它登录到我的五个终端选项之一，检查和断开连接，最近我构建了登录代码，提供数字，并使用正则表达式读取结果代码以指示我的五个终端选项中的哪一个它的类型。我就是不能让他们一起工作。

我的代码是根据[http://nikunjp.wordpress.com/2011/07/30/remote-ssh-using-jsch-with-expect4j/中的示例构建的](http://nikunjp.wordpress.com/2011/07/30/remote-ssh-using-jsch-with-expect4j/)

```
 package switchoverlay;

    import com.jcraft.jsch.ChannelShell;
    import com.jcraft.jsch.JSch;
    import com.jcraft.jsch.Session;
    import expect4j.Closure;
    import expect4j.Expect4j;
    import expect4j.ExpectState;
    import expect4j.matches.Match;
    import expect4j.matches.RegExpMatch;
    import java.util.ArrayList;
    import java.util.Hashtable;
    import java.util.List;
    import java.util.regex.Matcher;
    import java.util.regex.Pattern;
    import org.apache.oro.text.regex.MalformedPatternException;

    public class SSHLogin {

            static final String controlB = "\u0002";
            static final String controlC = "\u0003"; 
            static final String controlV = "\u0016";
            static final String cr = "\u0013";
            static final String lf = "\u0010";
            static final String sp = "\u0032";

            String npa = OverlayGUI.tn.substring(1, 4); //Get first three digits from tn
            String nxx = OverlayGUI.tn.substring(5, 8); //Get first three digits from tn
            String xxxx = OverlayGUI.tn.substring(9, 13); //Get last four digits from tn

            private static final int COMMAND_EXECUTION_SUCCESS_OPCODE = -2;
            private static String ENTER_CHARACTER = "\r";  //NOT GOOD FOR A GTD5!
            private static final int SSH_PORT = 22;
            private List<String> loginLstCmds = new ArrayList<String>();
            private static String[] switchPromptRegEx = new String[]
            {"\r\nDestination: ", //npanxx
            "via.{12}\r\n"}; //controlB

            private Expect4j expect = null;
            private StringBuilder loginBuffer = new StringBuilder();
            private String userName;
            private String password;
            private String host;

            /**
            *
            * @param host
            * @param userName
            * @param password
            */
            public SSHLogin(String host, String userName, String password) {
                    this.host = host;
                    this.userName = userName;
                    this.password = password;
            }
            /**
            *
            * @param LoginCmdsToExecute
            */
            public String execute(List<String> LoginCmdsToExecute) {
                    this.loginLstCmds = LoginCmdsToExecute;

                    Closure closure = new Closure() {
                            public void run(ExpectState expectState) throws Exception {
                                    loginBuffer.append(expectState.getBuffer());
                            }
                    };

                    List<Match> lstPattern =  new ArrayList<Match>();
                    for (String regexElement : switchPromptRegEx) {
                            try {
                                    Match mat = new RegExpMatch(regexElement, closure);
                                    lstPattern.add(mat);
                            } catch (MalformedPatternException e) {
                                    e.printStackTrace();
                            } catch(Exception e) {
                                    e.printStackTrace();
                            }
                    }

                    try {                
                            expect = SSH();
                            boolean isSuccess = true;                

                            for(String strCmd : loginLstCmds) {
                                    isSuccess = isSuccess(lstPattern,strCmd);
                                    if (!isSuccess) {
                                            isSuccess = isSuccess(lstPattern,strCmd);
                                    }
                            }

                            checkResult(expect.expect(lstPattern));
                    } catch (Exception ex) {
                            ex.printStackTrace();
                    } finally {
                            testType();
                    }
                    return loginBuffer.toString();
            }
            /**
            *
            * @param objPattern
            * @param strCommandPattern
            * @return
            */
            private boolean isSuccess(List<Match> objPattern,String strCommandPattern) {
                    try {
                            boolean isFailed = checkResult(expect.expect(objPattern));

                            if (!isFailed) {

                                    expect.send(strCommandPattern);
                                    Thread.sleep( 8000);
                                    //expect.send(ENTER_CHARACTER);  //NOT GOOD FOR A GTD5!
                                    return true;
                            }
                            return false;
                    } catch (MalformedPatternException ex) {
                            ex.printStackTrace();
                            return false;
                    } catch (Exception ex) {
                            ex.printStackTrace();
                            return false;
                    }
            }
            /**
            *
            * @param hostname
            * @param username
            * @param password
            * @param port
            * @return
            * @throws Exception
            */
            private Expect4j SSH() throws Exception {
                    JSch jsch = new JSch();
                    Session session = jsch.getSession(userName, host, SSH_PORT);
                    if (password != null) {
                            session.setPassword(password);
                    }
                    Hashtable<String,String> config = new Hashtable<String,String>();
                    config.put("StrictHostKeyChecking", "no");
                    session.setConfig(config);
                    session.connect(120000);
                    ChannelShell channel = (ChannelShell) session.openChannel("shell");
                    channel.connect();                   
                    Expect4j expect = new Expect4j(channel.getInputStream(), channel.getOutputStream());          

                    return expect;              
            }
            /**
            *
            * @param intRetVal
            * @return
            */
            private boolean checkResult(int intRetVal) {
                    if (intRetVal == COMMAND_EXECUTION_SUCCESS_OPCODE) {
                            return true;
                    }
                    return false;
            }
            /**
            *
            */
            private void testType() {
            String lBString = loginBuffer.toString();
            System.out.println(lBString);

            Pattern gtd5 = Pattern.compile(".*GTD5.*");         
            Matcher gtd5Matcher = gtd5.matcher(lBString);
            if (gtd5Matcher.find()) {
                System.out.println("Your switch type is GTD5");
            }

            Pattern dms10 = Pattern.compile(".*DMS10^0.*");         
            Matcher dms10Matcher = dms10.matcher(lBString);
            if (dms10Matcher.find()) {
                System.out.println("Your switch type is DMS10");
            }

            Pattern dms100 = Pattern.compile(".*DMS100.*");         
            Matcher dms100Matcher = dms100.matcher(lBString);
            if (dms100Matcher.find()) {
                System.out.println("Your switch type is DMS100");
            }

            Pattern ess = Pattern.compile(".*5es.*");         
            Matcher essMatcher = ess.matcher(lBString);
            if (essMatcher.find()) {
                System.out.println("Your switch type is 5ESS");
            }

            Pattern dco = Pattern.compile(".*DCO.*");         
            Matcher dcoMatcher = dco.matcher(lBString);
            if (dcoMatcher.find()) {
                System.out.println("Your switch type is DCO");
            }

    //else { System.out.println("Switch type Error."); }

    //SSHGTD5ExamClient runSsh = new SSHGTD5ExamClient();  //pass on to expect4j based on regex for remaining expect and sends?

                                    //if (expect!=null) {  //old code for shutting down expect4j
                            //expect.close();

                    }

    } 
```

# c# - 用等间距线填充空间

> ID：10399750
> 
> 赞同：0
> 
> 时间：2012-05-01T15:12:26.847
> 
> 标签：c#, winforms, gdi+

我有以下 C# 代码：

```
int cellHeight = (int)Math.Floor((ClientSize.Height - controlsSpacing) / 25f);

int yStart = MarginSize + controlsSpacing;
for (int i = 0; i < 25; i++)
{
    g.DrawRectangle(Pens.Black, 0 + MarginSize, yStart, ClientSize.Width - MarginSize - 1,
                    cellHeight);
    yStart += cellHeight;
} 
```

我想要做的是绘制 25 条从顶部延伸到底部的线，它们的间距相等以适合该`ClientSize`区域。我遇到的问题是，画的最后一条线似乎总是比其余的线更小或更大。我的数学一定在某个地方失败了。任何帮助，将不胜感激。

这是一个屏幕截图：

![在此处输入图像描述](../Images/f43f051d7743a546485cd1deab344ae4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:43:23.307

问题是

```
int cellHeight = (int)Math.Floor(..)
yStart += cellHeight; 
```

您通过使用删除的部分`Math.Floor`在每次迭代中都会丢失，并累积到您看到的间隙。

`yStart`在每次迭代中计算：

```
int cellHeight = (int);

for (int i = 0; i < 24; i++)
{
    float yStart = MarginSize + controlsSpacing +
                 (ClientSize.Height - controlsSpacing) * i / 25f;

    g.DrawRectangle(Pens.Black,
                    MarginSize,
                    yStart,
                    ClientSize.Width - MarginSize - 1,
                    cellHeight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:15:17.437

使 cellHeight 和 yStart 双打，并在调用 DrawRectangle 时将它们转换为整数。您可能需要执行 Math.Round() 而不仅仅是转换为 int。

```
double cellHeight = (ClientSize.Height - controlsSpacing) / 25.0;

double yStart = MarginSize + controlsSpacing;

for (int i = 0; i < 24; i++)
{
    g.DrawRectangle(Pens.Black, 0 + MarginSize, (int)yStart, ClientSize.Width - MarginSize - 1,
                    (int)cellHeight);
    yStart += cellHeight;
} 
```

# mysql - Perl 中的 mySQL 查询字符串似乎无法处理 '\n'

> ID：10399751
> 
> 赞同：0
> 
> 时间：2012-05-01T15:12:30.037
> 
> 标签：mysql, perl

我正在尝试用`<br/>`标签替换数据库中的换行符，并用 Perl 编写以下 mySQL 查询字符串。

```
my $queryString = "Select REPLACE(r.form_text,'\n','<br /> '), ... FROM myTable r;" 
```

出于某种原因，`\n`在 perl 中被视为换行符，并且似乎没有将其替换为`<br/>`. 这是我尝试打印时得到的`$queryString`

```
REPLACE(r.form_text,'

','< br /> ') 
```

我尝试使用`\\n`，`\\\n`它也没有工作。如果这是一个重复的问题，我深表歉意。如果我在这里遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:34:11.617

当然你会得到一个换行符。当您使用双引号引用字符串时，其中的任何内容都会被插入，并`\n`成为文字换行符。如果你想要一个文字`\n`，你需要防止插值。通常，您会使用单引号，但这是不切实际的，因为您已经在字符串中包含了单引号。因此，请使用该`q()`功能。

```
my $queryString = 
    q|Select REPLACE(r.form_text,'\n','<br /> '), ... FROM myTable r;|; 
```

请注意，您可以为 使用多种分隔符`q()`，在本例中，我使用了 pipe `|`。如果您尝试打印此字符串，它应该有一个文字`\n`. 文档[在这里](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)。

# ide - F# 类型推断（编译器输出）

> ID：10399752
> 
> 赞同：3
> 
> 时间：2012-05-01T15:12:34.170
> 
> 标签：ide, f#, type-inference

有没有办法通过 F# 编译器获得类型推断结果的结构化输出？

（我正在尝试构建一个小型 IDE）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T15:35:31.413

假设您有一个 file `test.fs`，您可以使用以下命令生成 F# Signature File `test.fsi`，其中包含有关所有顶级定义的类型信息：

```
Fsc.exe --sig:test.fsi test.fs 
```

要获取有关局部变量的信息，您需要将 F# 编译器用作服务。有一个简单的[命令行示例](http://fsxplat.codeplex.com/wikipage?title=fsharp%20intellisense%20tool&referringTitle=Home)演示了如何调用 API，您还可以探索[MonoDevelop 的 F# 绑定](https://github.com/fsharp/fsharpbinding)。

# powershell - powershell bitstransfer对象引用未设置为对象的实例

> ID：10399754
> 
> 赞同：3
> 
> 时间：2012-05-01T15:12:34.953
> 
> 标签：powershell, powershell-remoting

我有一个用 C# 编写的程序，它使用 powershell bitstransfer 从机器上传和下载文件。它一直工作正常，直到今天上传和下载停止工作并给出此错误。似乎该错误是我机器的本地错误，因为其他机器可以正常使用 bitstransfer 并且重新启动机器并没有解决问题。有人可以帮我吗？谢谢

```
PS Start-BitsTransfer -Source \\ip\data\filename.xml -Destination G:\\PLAYGROUND\\dir\\\
Start-BitsTransfer : Object reference not set to an instance of an object.
At line:1 char:19
+ Start-BitsTransfer <<<<  -Source \\ip\data\filename.xml -Destination G:\\PLAYGROUND\\dir\\\
    + CategoryInfo          : NotSpecified: (:) [Start-BitsTransfer], NullReferenceException
    + FullyQualifiedErrorId : System.NullReferenceException,Microsoft.BackgroundIntelligentTransfer.Management.NewBits
   TransferCommand

    PS Start-BitsTransfer -Source G:\\PLAYGROUND\\dir\\file.txt -Destination \\\\ip\\data\\\
Start-BitsTransfer : Object reference not set to an instance of an object.
At line:1 char:19
+ Start-BitsTransfer <<<<  -Source G:\\PLAYGROUND\\dir\\file.txt -Destination \\\\ip\\data\\\
    + CategoryInfo          : NotSpecified: (:) [Start-BitsTransfer], NullReferenceException
    + FullyQualifiedErrorId : System.NullReferenceException,Microsoft.BackgroundIntelligentTransfer.Management.NewBits
   TransferCommand 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T19:13:34.400

我改用复制命令修复了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-11T08:39:17.200

我认为当您有大量异步作业时会发生这种情况。在我的情况下，所有工作都处于失败或转移状态，并且在运行后`Get-BitsTransfer | Remove-BitsTransfer`我能够开始位转移。

# java - 调用 List 中对象的 setter 方法也会改变 List 中其他对象的属性。List 是 HashMap 中的值

> ID：10399756
> 
> 赞同：0
> 
> 时间：2012-05-01T15:12:59.117
> 
> 标签：java, reference, arraylist, hashmap

我有一个包含键的字符串和作为值的列表的 Map。在将几个条目放入 Map 并随机扩展 Map 中的 List 值后，我遇到以下问题：

```
 list3 = map.get("string1");
    list3.get(0).setName("testobject");
    for(TestObject to : list3){
        System.out.println(to.getName());
    } 
```

它不仅设置名称为“testobject”的第一个TestObject，还设置列表（list3）中名称为“testobject”的其他TestObject，即：

```
**Output**
testobject
nonameset
nonameset
nonameset
testobject
nonameset
nonameset
nonameset
testobject
nonameset 
```

完整的代码写在下面。我猜这个问题与随机扩展地图中的 List 值（randomlyExpand 函数）和引用有关，但由于我的 Java 知识仍在开始发展，我并不真正了解发生了什么。这可能是一件非常愚蠢的事情。所以我的问题是：这里发生了什么？以及如何在保留相同功能的同时解决问题。

```
import java.util.*;
public class Test {
public static void main(String[] args) {
    Map<String, List<TestObject>> map = new HashMap<String,    List<TestObject>>();
    List<TestObject> list1 = new ArrayList<TestObject>();
    List<TestObject> list2 = new ArrayList<TestObject>();
    List<TestObject> list3 = new ArrayList<TestObject>();

    for(int i = 0; i < 5; i++){
        list1.add(new TestObject());
    }
    for(int i = 0; i < 5; i++){
        list2.add(new TestObject());
    }       
    map.put("string1", list1);
    map.put("string2", list2);

    map = randomlyExpand(map); 

    list3 = map.get("string1");
    list3.get(0).setName("testobject");
    for(TestObject to : list3){
        System.out.println(to.getName());
    }
}

//Randomly expand list values in Map from size 5 to size 10
public static Map<String, List<TestObject>> randomlyExpand(Map<String, List<TestObject>> map){
    Random ran = new Random();
    for (String key : map.keySet()){
        List<TestObject> tempList = new ArrayList<TestObject>();
        List<TestObject> values = map.get(key);
        for (int i = 0; i < 10; i++){
            int randomInt = ran.nextInt(values.size());
            tempList.add(values.get(randomInt));
        }
        map.put(key, tempList);
    }
    return map;
}
} 
```

测试对象类：

```
public class TestObject {
private String name = "nonameset";

TestObject(){
}

public String getName(){
    return this.name;
}

public void setName(String s){
    this.name = s;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:22:16.327

在您的 randomExpand 方法中，您将添加列表中已有的相同值。您将新条目添加到列表中，但对象完全相同。

当您将对象添加到列表时，您不会添加该对象的副本，而只是添加对它的引用。

这就是为什么当您更改其中一个条目中的属性时，它似乎反映了其他对象中的这种更改。实际上，发生这种情况是因为您将同一个对象多次添加到列表中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T15:24:03.060

问题出在你的`randomlyExpand`功能上。您正在遍历您之前使用此创建的 5 个杰出对象的列表：

```
for(int i = 0; i < 5; i++){
    list2.add(new TestObject());
} 
```

现在你正在这样做：

```
 int randomInt = ran.nextInt(values.size());
 tempList.add(values.get(randomInt)); 
```

您将获得其中一个杰出的对象，然后将其再次添加到另一个索引上。现在，这个单个对象在您的列表中出现了两次（甚至更多）。因此，您在列表中多次拥有相同的对象。这就是你多次看到或反对的方式。

解决方案很简单：在循环中创建新对象。

```
for (int i = 0; i < 10; i++){
    int randomInt = ran.nextInt(values.size());

    TestObject obj = new TestObject();
    obj.setName(values.get(randomInt).getName());

    tempList.add(obj);
} 
```

# javascript - 为什么它不浮动？

> ID：10399766
> 
> 赞同：-4
> 
> 时间：2012-05-01T15:13:40.200
> 
> 标签：javascript, floating-point

我有一些代码。并且无法理解为什么它不起作用。

```
var cena = 0;
$.post('ajax.php?action=kosztKategorii', {kat_id: v_kat, zaCo: v_zaCo}, function(data)
        {
            cena = parseFloat(data);
            $('#'+cont_id).html(data);
        });
return cena; 
```

问题是返回值是 NaN。并且数据 i 等于“1.12”（字面意思），在我的 div 中，它是通过 $('#'+cont_id).html(data) 放置的，并且可以正确显示。parseFloat() 函数有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:43:40.193

`*.post`是**异步**的。
您的回调直到函数的其余部分完成后一段时间才会运行。

相反，您需要使用回调返回值。

# prolog - Prolog递归语法

> ID：10399774
> 
> 赞同：4
> 
> 时间：2012-05-01T15:14:11.727
> 
> 标签：prolog, dcg

目前我在循环回`noun_phrase`from时遇到问题`np2`。我想知道是否有人可以帮助我循环回`noun_phrase`. 这是一些代码：

```
noun_phrase([X|T],(det(X), NP2),Rem):-
   det(X),
   np2(T,NP2,Rem).

np2([H|T],np2(adj(H),Rest),NP) :-
   adj(H),
   np2(T,Rest,Rem),
   noun_phrase(NP,Rem,_). 
```

我想从`np2`back 循环到`noun_phrase`. 我认为代码`np2`是错误的，因为我只是一起破解了它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T17:27:22.047

直接在 Prolog 中编码语法是一个相当繁琐的过程。是的，你可以这样做，但如果你刚开始学习 Prolog，你并不是处于最佳位置。事实上，科学花了很多年才想出一种特别有效的编码——当这种编码被理解时，Prolog 就诞生了！

你需要的是语法——[定句语法](http://en.wikipedia.org/wiki/Definite_clause_grammar) [dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")。不要试图理解它们在 Prolog 中的编码（现在），只需使用`phrase/2`!

这是Fernando CN Pereira 和 Stuart M. Shieber的[Prolog 和自然语言分析](http://www.mtome.com/Publications/PNLA/pnla.html)中的程序 3.11 。Pereira 设计了我们今天使用的 DCG 规则的风格。这本书是最被低估的 Prologbook 之一。而且它是免费的！

```
s(s(NP,VP)) --> np(NP), vp(VP)。

np(np(Det,N,Rel)) -->
   检测（检测），
   n(N),
   optrel（相对）。
np（np（PN））-> pn（PN）。

副总裁（副总裁（电视，NP））->电视（电视），NP（NP）。
vp(vp(IV)) --> iv(IV)。

optrel(rel(epsilon)) --> []。
optrel(rel(that,VP)) --> [that], vp(VP).

pn(pn(terry)) --> [特里]。
pn(pn(shrdlu)) --> [shrdlu]。

iv(iv(halts)) --> [暂停]。

det(det(a)) --> [a]。

n（n（程序））-> [程序]。

电视（电视（写入））-> [写入]。

```

如果要将字典表示为 Prolog 事实，请使用

```
n（n（程序））-> [程序]。

```

相当

```
n(n(W)) --> [W],{名词(W)}。

名词（程序）。

```

所以，让我们使用它：

```
?-短语(s(P), Xs)。
P = s(np(det(a),n(program),rel(epsilon)),vp(tv(writes),np(det(a),n(program),rel(epsilon)))),
Xs = [a,program,writes,a,program] ;
P = s(np(det(a),n(program),rel(epsilon)),vp(tv(writes),np(det(a),n(program),rel(that,vp(tv(writes) ),np(det(a),n(program),rel(epsilon))))))),
Xs = [a,program,writes,a,program,that,writes,a,program] ...

```

多么自我指涉的话语啊！但是现在，所有句子的长度都更有启发性：

```
?-长度（Xs，N），短语（s（P），Xs）。
Xs = [特里，暂停]，
N = 2,
P = s(np(pn(terry)),vp(iv(halts)));
Xs = [shrdlu,halts],
N = 2,
P = s(np(pn(shrdlu)),vp(iv(halts)));
Xs = [a,program,halts],
N = 3,
P = s(np(det(a),n(program),rel(epsilon)),vp(iv(halts)));
Xs = [特里，写，特里]，
N = 3,
P = s(np(pn(terry)),vp(tv(writes),np(pn(terry))));
Xs = [特里，写，shrdlu]，
N = 3,
P = s(np(pn(terry)),vp(tv(writes),np(pn(shrdlu))));
Xs = [shrdlu,writes,terry],
N = 3,
P = s(np(pn(shrdlu)),vp(tv(writes),np(pn(terry))))...

```

# javascript - 点击链接删除fancybox

> ID：10399776
> 
> 赞同：0
> 
> 时间：2012-05-01T15:14:12.843
> 
> 标签：javascript, jquery, fancybox

我有一个这样做的第三方 JQuery 库：

```
var $this = $(this);
...
var $items = $this.find('a');
...
$items.attr('rel', opts.group).fancybox(opts.fancybox); 
```

最后一行将 rel 属性添加到我页面中的链接，并在我单击链接时弹出一个花式框。我想阻止这种情况的发生，并注意到通过注释掉最后一行，我会提示下载链接指向的文件——这正是我想要的。问题是我不能只注释掉这一行，因为如果我将来升级这个库，那么我将无法使用我的更改来更新库。所以我认为如果我删除 rel 内联属性，花式框就不会弹出。我能够删除 rel 标签，但由于某种原因，仍然会弹出花哨的框。知道我需要编写什么代码来摆脱花哨的盒子并获得下载文件的提示吗？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:15:41.083

尝试考虑执行操作的时间顺序。
也许启动fancybox的代码出现**在**您用来删除它的代码之后。
仅在文档准备好时尝试执行您的代码，从而确保在加载任何外部库后执行它。
例如：

```
$(document).ready(function(){
    // Your code here //
}); 
```

# php - 在哪里放置取消链接代码以从服务器中删除文件

> ID：10399785
> 
> 赞同：1
> 
> 时间：2012-05-01T15:14:30.520
> 
> 标签：php, javascript

我在下面有一个 javascript 函数，当用户单击“删除”按钮时，它会从 .listImage 中删除附加的文件名：

```
function stopImageUpload(success, imagefilename){

      var result = '';

      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage">Delete</button><br/><hr/></div>'); 
      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

      $(".deletefileimage").on("click", function(event) {

        $(this).parent().remove();

    });

      return true;   
} 
```

如您所见，`$(".deletefileimage").on("click", function(event) {`用于删除正确的附加文件名。

但我想做的是，当用户删除一个文件名时，它也会从服务器中删除该文件。所以我正在尝试使用此代码： `unlink($_FILES["fileImage"]["temp_name"]);`从服务器中删除文件。

但我想知道的是，我在哪里存储此代码，以便它使用 javascript 函数删除附加的文件名，然后能够进入 php 脚本从服务器中删除文件？

下面是发生文件上传的 php 脚本 (imageupload.php)：

```
<?php

session_start();

$result = 0;

if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {
    $parts = explode(".",$_FILES['fileImage']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("ImageFiles2/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileImage"]["tmp_name"],
    "ImageFiles2/" . $_FILES["fileImage"]["name"]);
    $result = 1;

}
    else
      {
      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles2/" . $_FILES["fileImage"]["name"]);
      $result = 1;

      }

?>

  <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result ? 'true' : 'false'; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:21:54.783

您将需要`ajax`调用您的 php 脚本以允许删除服务器上的文件。JQuery 的`ajax`文档可以在[这里](http://api.jquery.com/jQuery.ajax/)找到。

首先，您需要像这样连接您的按钮和图像文件名

```
$('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Delete</button><br/><hr/></div>'); 
```

现在，您的删除方法将如下所示。

```
$(".deletefileimage").on("click", function(event) {
    // Find the image file name that is associated with this delete button. You 
    // may want to think about linking the image file name and the delete button
    // in a better way than this.
    var image_file_name = $(this).attr('image_file_name');
    $(this).parent().remove();
    console.log("Deleting " + image_file_name);
    jQuery.ajax("delete.php?imagefilename=" + image_file_name)
      .done(function(data) {
        $(".msg").append(data);
       });
}); 
```

最后，`delete.php`遗嘱需要看起来像这样

```
<?php
  $image_file_name = "ImageFiles/" . $_GET["imagefilename"];
  if (User Uploaded this File || Has Permission to Delete it)
  {
    print "Deleting $image_file_name";
    // This assumes delete.php is in the same directory as the image file.
    unlink($image_file_name);
  }
?> 
```

[这是一个 JSFiddle](http://jsfiddle.net/brantolsen/hEEeP/1/)向您展示工作代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:25:09.360

将您上传的文件存储在公共临时目录中的好主意，然后仅在保存内容时移动。

另一种方法是使用标记“活动/非活动”列出所有上传的文件并定期运行删除旧文件（非活动并在几小时或几天前创建）的脚本。在这种情况下，当您添加文件或删除内容时，您会将其标记为“非活动”，而当您保存内容时，您会将使用过的文件标记为“活动”。

# java - JTextPane 是否支持文本内存分页？

> ID：10399786
> 
> 赞同：3
> 
> 时间：2012-05-01T15:14:31.300
> 
> 标签：java, swing, memory, paging, jtextpane

我正在尝试改进文档显示组件的现有实现。表达的担忧之一是，在加载大量文本时，我们将收到 OOM 异常。

根据我之前使用 .net 的经验，我确实知道一些基本组件实现了分页，因此并非所有文本都可视加载到文档中，因此事情不仅工作得更快，而且我们还有望避免 OOM 异常。

所以我想知道是否有任何基本的摆动组件，特别是 JTextPanel，它支持这些功能？

感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:43:56.647

似乎 Swing 将文档的实际存储与其表示分离。

我认为你应该能够通过定义一个[`AbstractDocument.Content`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/text/AbstractDocument.Content.html)负责内存管理（例如分页）的实现来拥有你想要的功能。

[`DefaultStyledDocument`](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/DefaultStyledDocument.html)在其`AbstractDocument.Content`构造函数中采用 a ，并且`JTextPane`采用 a `StyledDocument`，因此如果您定义了该实现，您应该能够将其插入。

我还没有尝试过，所以这只是一个建议——你也许可以在网上找到实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:14:06.490

不，`JTextPane`不支持内存页。您可以创建一个`Docuemnt`实例并将文件内容`Document`读`Document`入`JTextPane`. 然后获取所需的片段`Document`并将其插入另一个仅显示所需片段的片段。

# matlab - JPEG压缩和解压一遍又一遍

> ID：10399787
> 
> 赞同：0
> 
> 时间：2012-05-01T15:14:37.233
> 
> 标签：matlab, jpeg, dct

我对 Matlab 以及图像和信号处理相当陌生。到目前为止，我能够读取图像并执行 DCT 转换并将其填充到矩阵中，然后通过放置从低到高的 DCT 系数（5、10、15、30）并执行得到这个数字的逆 DCT ---> ![在此处输入图像描述](../Images/c91dfff2af384ba80ec9d98b4bf3d2b8.png)

我想知道的是如何重新压缩重建的图像以执行另一个转换以显示进一步的 JPEG 损失？我该怎么办？谢谢，我希望你能耐心地解释我在做什么/试图做什么，因为我对这个奇妙的世界很陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:28:45.870

理想情况下，您应该创建一个函数来进行压缩。如果您循环输入输出，您可以继续压缩图像。

# android - java.lang.RuntimeException: 无法实例化应用程序 android.app.Application: java.lang.NullPointerException at LoadedApk.makeApplication

> ID：10399789
> 
> 赞同：24
> 
> 时间：2012-05-01T15:14:46.277
> 
> 标签：android

所以我不时收到这个错误。它位于从 Eclipse 中的“运行”按钮启动的应用程序处。这种情况每 4-5 次发生一次。任何人都知道发生了什么。

对此，我真的非常感激！

```
05-01 18:08:31.109: W/dalvikvm(15491): threadid=1: thread exiting with uncaught exception (group=0x40a311f8)
05-01 18:08:31.109: E/AndroidRuntime(15491): FATAL EXCEPTION: main
05-01 18:08:31.109: E/AndroidRuntime(15491): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3938)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.app.ActivityThread.access$1300(ActivityThread.java:123)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.os.Looper.loop(Looper.java:137)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.app.ActivityThread.main(ActivityThread.java:4424)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at java.lang.reflect.Method.invokeNative(Native Method)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at java.lang.reflect.Method.invoke(Method.java:511)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at dalvik.system.NativeStart.main(Native Method)
05-01 18:08:31.109: E/AndroidRuntime(15491): Caused by: java.lang.NullPointerException
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
05-01 18:08:31.109: E/AndroidRuntime(15491):    at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
05-01 18:08:31.109: E/AndroidRuntime(15491):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-01T15:36:58.123

查看了 ICS 源代码 - 无论出于何种原因，包管理器似乎无法获取您的包信息 - 它可能只是一个 eclipse/ADT 错误，其中 eclipse 对文件持有某种锁定，但不管它是什么，它看起来不像是你的代码可能导致的事情。我建议运行一个干净的，从模拟器/设备上卸载应用程序，或者如果这些都不起作用，你可以尝试一个新的 eclipse 工作区。

另一件事可能是一个问题，如果您使用的是图书馆项目 - 尝试取消两者的链接，清理，然后再次将它们链接起来 - 但这就是我的技巧:)

**更新：** yorkw 更好地解释了为什么会发生这种情况及其解决方法：[RuntimeException：无法实例化应用程序](https://stackoverflow.com/questions/10150899/runtimeexception-unable-to-instantiate-application/10158241#10158241)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T19:35:12.440

这是（不出所料*）Eclipse/ADT/adb 中的一个错误。我设法通过从模拟器中卸载我的应用程序来修复它。希望它不会回来，但我不会屏住呼吸。

*说真的，Eclipse 和 ADT 似乎是我用过的软件中漏洞最多的。仅在一天之内，我就遇到了至少四个不同的非常烦人的错误！（这个，ddms 损坏的管道，正在使用的工作区，但它不是，dex 内存不足。）这是令人尴尬的粗制滥造。感谢上帝，我们有stackoverflow！

编辑：我说得太早了。一旦您第二次运行该应用程序，该错误就会返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T16:42:56.787

在 4.x 或更高版本的模拟器和实际设备上运行我的应用程序时，我也会收到此错误，但该错误不会阻止我的应用程序启动，所以我只是忽略它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-02T13:50:33.093

I struggled with this error too.The error occurs inconsistently. Found out it was a library dependency that was not included in the build path for API level 16 (android-support-v4)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-22T08:40:52.220

如果您`new Intent(getActivity(), ActivityXY.class)`在活动完成并收集垃圾时尝试调用，也会发生这种情况。这通常表明您在销毁活动/片段时忘记取消某些异步操作

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-21T02:25:38.743

`.project`这是您项目中文件的错误。您可以`.project`在没有错误的情况下打开项目中的其他文件进行比较。几乎，您可以在此文件中看到`<buildCommand>`标签错误。

# javascript - 在加载其他任何内容之前检查用户是否已登录

> ID：10399791
> 
> 赞同：1
> 
> 时间：2012-05-01T15:15:01.570
> 
> 标签：javascript, facebook, facebook-graph-api

我正在制作一个简单的阅读画布应用程序，我想在加载任何内容/文章之前检查用户是否已登录。当然，我有 FB.Init 方法，其中有一个 getLoginStatus，它看起来像这样（我已经删除了我的命名空间和 ID）：

```
 <script> 
    window.fbAsyncInit = function() {       
      FB.init(
      {
        appId   : '[APP ID]', // App ID
        status  : true, // check login status
        cookie  : true, // enable cookies to allow the server to access the session
        xfbml   : true  // parse XFBML
      });

      FB.getLoginStatus(function(response) {      
        if (!response.authResponse) {
         var oauth_url = 'http://www.facebook.com/dialog/oauth/';
         oauth_url += '?client_id=[APP ID]';
         oauth_url += '&redirect_uri=' + encodeURIComponent('http://apps.facebook.com/[APP NAMESPACE]/');
         oauth_url += '&scope=read_stream,publish_stream,offline_access'
         window.top.location = oauth_url;
         }  
      });   

    };
    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
</script> 
```

但无论我做什么，它都会首先加载我的 HTML 内容（我的文章、Divs、Paragrafs、文本......）并在完成后重定向。

该脚本是我的 HTML 的开头。我也尝试通过正文中的 onLoad() 方法加载它，但这也不起作用，它仍然会在重定向之前加载我的一些 HTML 内容。

在加载 HTML 代码的单个字母或图像之前，如何检查用户是否已登录 Facebook（如果未登录则重定向）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:22:09.750

您正在使用 facebook js sdk 的异步加载，不仅如此，一旦您从服务器发送回输出（静态内容或动态内容），浏览器就会获取整个内容并加载它，您无能为力那。

如果您想检查用户之前是否经过身份验证，我建议您使用[Server-Side auth flow](http://developers.facebook.com/docs/authentication/server-side/)。这样，您甚至可以在将内容返回给用户之前就知道状态，如果您发现他没有经过身份验证，那么您发回给他的内容就是重定向内容。只有当用户通过身份验证返回时，您才会发回画布内容。

* * *

# 编辑

如果您的整个应用程序是静态的，那么就保持这种状态，无需仅为服务器端身份验证添加 php（或任何其他服务器端解决方案）。

我不确定你为什么介意页面在重定向之前加载，这里有两个“解决方案”：

(1) 加载一个只有 fb sdk 和检查用户是否登录的方法的最小化页面，如果他没有，则重定向他。如果他已登录，则加载一个添加其余内容的脚本并将其动态添加到 dom。

(2) 如果您只是不希望用户在登录之前看到某些内容，只需使用 css 隐藏该部分，并在他登录时使用 javasript 更改它。

# r - 分层 10 折交叉验证

> ID：10399792
> 
> 赞同：9
> 
> 时间：2012-05-01T15:15:06.230
> 
> 标签：r

我已经开始使用 10 折交叉验证为人工数据集创建一些训练和测试集：

```
rows <- 1000

X1<- sort(runif(n = rows, min = -1, max =1))
occ.prob <- 1/(1+exp(-(0.0 + 3.0*X1)))
true.presence <- rbinom(n = rows, size = 1, prob = occ.prob)

# combine data as data frame and save
data <- data.frame(X1, true.presence)

id <- sample(1:10,nrow(data),replace=TRUE)
ListX <- split(data,id) 
fold1 <- data[id==1,] 
fold2 <- data[id==2,] 
fold3 <- data[id==3,] 
fold4 <- data[id==4,] 
fold5 <- data[id==5,] 
fold6 <- data[id==6,] 
fold7 <- data[id==7,] 
fold8 <- data[id==8,] 
fold9 <- data[id==9,] 
fold10 <- data[id==10,] 

trainingset <- subset(data, id %in% c(2,3,4,5,6,7,8,9,10))
testset <- subset(data, id %in% c(1)) 
```

我只是想知道是否有更简单的方法来实现这一点以及如何执行分层交叉验证以确保类先验（true.presence）在所有折叠中大致相同？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-05-15T09:36:05.767

`createFolds`封装方法`caret`执行分层分区。这是帮助页面中的一段：

> ...当 y 是试图平衡拆分内的类分布的一个因素时，随机抽样是在 y （=结果）的水平内完成的。

这是您的问题的答案：

```
library(caret)
folds <- createFolds(factor(data$true.presence), k = 10, list = FALSE) 
```

和比例：

```
> library(plyr)
> data$fold <- folds
> ddply(data, 'fold', summarise, prop=mean(true.presence))
     fold      prop
1       1 0.5000000
2       2 0.5050505
3       3 0.5000000
4       4 0.5000000
5       5 0.5000000
6       6 0.5049505
7       7 0.5000000
8       8 0.5049505
9       9 0.5000000
10     10 0.5050505 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-01T15:47:53.173

我确信 (a) 有一种更有效的编码方式，并且 (b) 几乎可以肯定在包中的某处有一个函数只会返回折叠，但这里有一些简单的代码可以让您了解如何使用可能会这样做：

```
rows <- 1000

X1<- sort(runif(n = rows, min = -1, max =1))
occ.prob <- 1/(1+exp(-(0.0 + 3.0*X1)))
true.presence <- rbinom(n = rows, size = 1, prob = occ.prob)

# combine data as data frame and save
dat <- data.frame(X1, true.presence)

require(plyr)
createFolds <- function(x,k){
    n <- nrow(x)
    x$folds <- rep(1:k,length.out = n)[sample(n,n)]
    x
}

folds <- ddply(dat,.(true.presence),createFolds,k = 10)

#Proportion of true.presence in each fold:
ddply(folds,.(folds),summarise,prop = sum(true.presence)/length(true.presence))

   folds      prop
1      1 0.5049505
2      2 0.5049505
3      3 0.5100000
4      4 0.5100000
5      5 0.5100000
6      6 0.5100000
7      7 0.5100000
8      8 0.5100000
9      9 0.5050505
10    10 0.5050505 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-31T08:33:42.730

@joran 是对的（关于他的假设（b））。 **dismo::kfold()**是您正在寻找的。

所以`data`从最初的问题开始使用：

```
require(dismo)
folds <- kfold(data, k=10, by=data$true.presence) 
```

`nrow(data)`给出一个包含每行数据的折叠关联的长度向量. 因此，`data[fold==1,]`返回第 1 折`data[fold!=1,]`并可用于验证。

编辑 6/2018：我强烈支持使用 @gkcn 推荐的 caret 包。它更好地集成在 tidyverse 工作流程中，并且更积极地开发。去吧！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-03T08:24:56.603

我发现 splitTools 非常有用，希望小插图[https://cran.r-project.org/web/packages/splitTools/vignettes/splitTools.html](https://cran.r-project.org/web/packages/splitTools/vignettes/splitTools.html)可以帮助任何对此主题感兴趣的人。

```
> y <- rep(c(letters[1:4]), each = 5)
> y
 [1] "a" "a" "a" "a" "a" "b" "b" "b" "b" "b" "c" "c" "c" "c" "c" "d" "d" "d" "d" "d"
> create_folds(y)
$Fold1
 [1]  1  2  3  5  6  7  8 10 12 13 14 15 17 18 19 20

$Fold2
 [1]  1  2  4  5  6  8  9 10 11 12 13 14 16 17 19 20

$Fold3
 [1]  2  3  4  5  6  7  9 10 11 12 13 15 16 17 18 20

$Fold4
 [1]  1  2  3  4  7  8  9 10 11 13 14 15 16 18 19 20

$Fold5
 [1]  1  3  4  5  6  7  8  9 11 12 14 15 16 17 18 19

> create_folds(y, m_rep = 3)
$Fold1.Rep1
 [1]  1  2  4  5  6  7  8 10 11 12 13 15 16 17 19 20

$Fold2.Rep1
 [1]  2  3  4  5  6  8  9 10 11 12 13 14 16 17 18 20

$Fold3.Rep1
 [1]  1  2  3  5  7  8  9 10 11 12 14 15 17 18 19 20

$Fold4.Rep1
 [1]  1  2  3  4  6  7  9 10 11 13 14 15 16 18 19 20

$Fold5.Rep1
 [1]  1  3  4  5  6  7  8  9 12 13 14 15 16 17 18 19

$Fold1.Rep2
 [1]  1  2  3  5  6  8  9 10 11 12 13 14 16 17 18 19

$Fold2.Rep2
 [1]  1  2  3  4  6  7  8 10 11 12 14 15 17 18 19 20

$Fold3.Rep2
 [1]  2  3  4  5  6  7  8  9 12 13 14 15 16 17 19 20

$Fold4.Rep2
 [1]  1  3  4  5  7  8  9 10 11 13 14 15 16 17 18 20

$Fold5.Rep2
 [1]  1  2  4  5  6  7  9 10 11 12 13 15 16 18 19 20

$Fold1.Rep3
 [1]  1  2  3  4  6  7  9 10 11 12 13 15 16 18 19 20

$Fold2.Rep3
 [1]  2  3  4  5  6  8  9 10 11 12 13 14 16 17 18 19

$Fold3.Rep3
 [1]  1  2  4  5  6  7  8  9 11 12 14 15 16 17 19 20

$Fold4.Rep3
 [1]  1  2  3  5  7  8  9 10 12 13 14 15 17 18 19 20

$Fold5.Rep3
 [1]  1  3  4  5  6  7  8 10 11 13 14 15 16 17 18 20 
```

# asp-classic - 禁用重复窗口上的返回功能（asp 代码）

> ID：10399794
> 
> 赞同：0
> 
> 时间：2012-05-01T15:15:15.963
> 
> 标签：asp-classic

我有一个需要用户登录的应用程序。登录后，该登录会话的密钥将存储在数据库中。

当用户执行 Ctrl+K 时我遇到了问题，因为它打开了一个重复的窗口，该窗口现在共享存储到数据库中的密钥。当他们打开副本时，我将他们重定向到登录页面，但他们仍然可以单击“返回”，并且他们现在有两个具有相同键的窗口 - 这会导致我的应用程序出现很多问题......

如何阻止用户返回 - 或者如何在任何新窗口上强制再次登录（这会创建一个新密钥，然后两个窗口都将有效）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:06:14.917

好的 - 使用 window.name 找到了一种不同的方法来处理这个问题。

总之谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:22:36.837

您如何检测到他们正在打开一个新窗口？当你重定向它们时，你不能简单地在你的数据库中设置一个标志来表明它们当前的会话密钥不再有效吗？这样，他们就真的被踢了出去——而不是简单地重定向到登录页面。

# java - 如何检查 Double 值是否为负？

> ID：10399801
> 
> 赞同：11
> 
> 时间：2012-05-01T15:15:40.800
> 
> 标签：java, double

正如标题所示，我如何检查特定`Double`是否为负数。这是获取`Double`实例的方式

```
(Double.parseDouble(data[2]) 
```

想法、建议？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-01T16:19:34.343

迂腐，`< 0`不会给你所有的负数。

```
double d = -0.0;
System.out.println(d + " compared with 0.0 is " + Double.compare(d, 0.0));
System.out.println(d + " < 0.0 is " + (d < 0.0)); 
```

印刷

```
-0.0 compared with 0.0 is -1
-0.0 < 0.0 is false 
```

`-0.0`为负但不小于`0.0`

您可以使用

```
public static boolean isNegative(double d) {
     return Double.compare(d, 0.0) < 0;
} 
```

一个更有效但更迟钝的版本是检查有符号位。

```
public static boolean isNegative(double d) {
     return Double.doubleToRawLongBits(d) < 0;
} 
```

注意：在 IEEE-754 下，NaN 可以具有与负数相同的有符号位。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-01T15:17:40.223

```
Double v = (Double.parseDouble(data[2]));
if (v<0){
//do whatever?
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-01T15:16:57.743

你可以测试它是否是`< 0`：

```
if (Double.parseDouble(data[2]) < 0) {
    // the number is negative
} else {
    // the number is positive
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-01T15:21:49.910

`Double.parseDouble`返回 a `double`（原始）而不是 a `Double`。在这种情况下，这并不重要，但值得注意。

您可以使用：

```
if (foo < 0) 
```

检查一个值是否为负 - 但请注意这*不是*相反的

```
if (foo >= 0) 
```

由于“不是数字”值。不过，它确实适用于无限值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-01T15:21:38.553

```
Double.parseDouble(data[2]); 
```

不给你 a `Double`，它返回 a `double`。如果您将它分配给 a `Double`，它会通过自动装箱到达那里。无论如何，看看它是否为负，将其与 0 进行比较？如：

```
Double.parseDouble(data[2]) < 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T15:23:25.060

我非常喜欢的另一个可能的解决方案是

```
Double v = Double.parseDouble(data[2]);

if (v == Math.abs(v))
{
    //must be positive
}
else
{
    //must be negative
} 
```

# javascript - javascript函数什么是范围以及为什么使用$

> ID：10399809
> 
> 赞同：-1
> 
> 时间：2012-05-01T15:16:08.077
> 
> 标签：javascript, javascript-events

> **可能重复：**
> [为什么 JavaScript 变量会以美元符号开头？](https://stackoverflow.com/questions/205853/why-would-a-javascript-variable-start-with-a-dollar-sign)

我不确定 $scope 和 $defer 是什么，但它们似乎可以工作。

```
function xyz($scope, $defer) {
    xyz = this;
    this.defer = $defer;
    this.scope = $scope;
    this.scope.test = function(re) {
        console.log(this,arguments);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T15:20:43.327

通常，这些天开发人员命名一个变量`$something`以标记它是包装框架的对象类型。例如，要缓存一个 jQuery 对象，使用`$this = $(this);`

话虽如此，美元符号并没有什么特别之处。只是为开发人员提个醒。

一点历史和推理；ECMAScript 3 说：

> 标识符中的任何位置都允许使用美元符号 ($) 和下划线 (_)。**美元符号仅用于机械生成的代码**。

而 ECMAScript 5 说：

> 美元符号 ($) 和下划线 (_) 可以在 IdentifierName 中的任何位置使用。

所以当有人说“嘿，你不应该在你的 var 中使用美元符号，因为它是用于机械生成的代码！” 你可以说“Psh，ECMA 5，你好？”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T15:17:07.233

这些是参数的名称。

UPDATE:`$`作为 JavaScript 中的标识符是完全有效的（即使是单独使用，由于某些 JS 库，这可能更常见），但它通常不用作这样的标志。我猜代码是由具有过多 Perl 经验的人编写的，或者可能是由主要处理基于 jQuery 的代码的人编写的。

# android - 如何从 inputmethodservice 调用活动并将数据从活动传递给 Inputmethodsevice

> ID：10399811
> 
> 赞同：4
> 
> 时间：2012-05-01T15:16:10.067
> 
> 标签：android

我有一个软键盘作为调用活动的输入方法服务。按下按钮并激活扫描仪。扫描器活动捕获一组数据，然后将数据返回到 inputmethodservice 以填写浏览器上的文本字段。

如何将活动的扫描值返回给 inputmethodservice 以及如何设置为 getCurrentInputConnection().commitText(data, 1)？以下用于调用scannerActivity的片段

```
final Intent intent = new Intent(Intent.ACTION_MAIN, null);
                final ComponentName cn = new ComponentName(
                        "com.example.android.softkeyboard",
                        "com.example.android.softkeyboard.ScannerActivity");
                intent.setComponent(cn);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:10:43.897

你不应该改用 startActivityForResult 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:27:23.620

`use this way`

 ````
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
startActivityForResult(intent, 0);

public void onActivityResult(int requestCode, int resultCode, Intent intent)
{    
 if(resultCode == 0)
 {    
   if (resultCode == RESULT_OK)
   {    
    String contents = intent.getStringExtra("your string");    
    }    
}    
}; 
````

# python - 是否应该使用 xrange(iterations) 或 len(iterations) 列表在“for 循环”中获得更好的性能，唤起 1000000 次？

> ID：10399818
> 
> 赞同：0
> 
> 时间：2012-05-01T15:16:52.063
> 
> 标签：python

我有一个脚本可以唤起一个“for 循环”，其中迭代次数（1000）超过一百万次。我已经阅读了 range() vs xrange() 线程，并且我知道我不想做这样的事情。

```
for o in xrange(1000000):
    for i in range(1000): #Definitely do not want
        pass 
```

相反，我希望创建一个包含 1000 个元素的对象，然后使用它来不断迭代。

方法一：

```
iterate=range(1000)
for o in xrange(1000000):
    for i in iterate:    #<---
        pass 
```

方法二：

```
for o in xrange(1000000):
    for i in xrange(1000):    #<----
        pass 
```

我想知道哪种方法会在“for 循环”中提供更好的性能。谢谢你。

编辑：对不起。我相信我不清楚。我的问题是我是否应该使用已经创建的列表或使用 xrange() 来使我正在调用的这个内部循环获得更好的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:56:24.603

一些本地测试结果：

```
>>> timeit.timeit('for i in repeat(None, 1000): pass', setup='from itertools import repeat', number=100000)
1.94118924332561
>>> timeit.timeit('for i in xrange(1000): pass', number=100000)
2.5231991775491025
>>> timeit.timeit('for i in range(1000): pass', number=100000)
3.9302601308266816
>>> timeit.timeit('for i in r: pass', setup='r = [None] * 1000', number=100000)
2.0900103923822684
>>> timeit.timeit('for i in r: pass', setup='r = range(1000)', number=100000)
2.2248894063351656
>>> timeit.timeit('for i in r: pass', setup='r = xrange(1000)', number=100000)
2.9105822108675823 
```

您不能对它使用缓存`itertools.repeat`，因为该迭代器的行为就像一个生成器（您只能“读取”一次值，然后它们就消失了）。

重复`1`或类似的事情可能会无限快，因为`None`不再需要查找名称，但是任何此类性能优势都会在测试结果随机变化的噪音中丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:20:43.330

[`xrange`](http://docs.python.org/library/functions.html#xrange)在 Python 2.x 和[`range`](http://docs.python.org/release/3.3/library/functions.html#range)3.x 中，不在内存中构建列表，因此如果您只想迭代这些值，这是最佳选择。但是，使用列表表达式构建临时列表会破坏目的。相反，您只想：

```
for i in xrange(1000): # range in Python 3.x
    pass 
```

对于像 1000 这样的小数字，这不太可能显着影响性能（[2.x 文档](http://docs.python.org/library/functions.html#xrange)说*over的**优势是最小的`xrange``range`*）。相反，对您的程序进行基准测试并找出哪个部分速度较慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T15:19:24.013

`xrange()`消耗的内存比`range()`. 它也更快：

```
In [1]: %timeit for i in range(1000): pass

10000 loops, best of 3: 28.8 us per loop

In [2]: %timeit for i in xrange(1000): pass

100000 loops, best of 3: 18.3 us per loop 
```

（Linux 上的 64 位 Python 2.7.2。）

注意上面`xrange()`直接使用。您的第二个代码片段（带有 with`iterate`的那个）否定了使用的好处，`xrange()`应该避免使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:21:52.927

它的表现值得。这样做的好处`xrange`是，它返回一个可迭代对象，这意味着它不会创建 N 个元素的列表并返回它（如`range`）：

```
def xrange(n):
    i = 0
    while i < n:
        yield i 
```

xrange 看起来与此类似。所以你的LC`iterate = [x for x in xrange(1000)]`等于`iterate = range(1000)`

正确的代码是：

```
for i in xrange(1000):
    pass 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T15:19:29.800

xrange 将为您提供更好的性能，因为它不必在迭代之前分配整个结果列表。这导致更好的数据缓存一致性等。

编辑：查看您的示例，您两次都在创建列表。然后我会说，在您给出的情况下，使用 range 会更高效，因为它致力于创建范围列表，而不是通过 xrange 使用列表推导来创建列表。

# c# - c#设置DataSource属性时无法修改Items集合

> ID：10399821
> 
> 赞同：2
> 
> 时间：2012-05-01T15:17:01.797
> 
> 标签：c#, .net, visual-studio-2010

我正在尝试将项目向上/向下移动列表框，但不断收到错误，不知道如何修复它。错误与“ `listBox1.Items.Remove(selected);`”有关

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace company1
{
    public partial class Form1 : Form
    {
        List<Configuration> lines = new List<Configuration>();

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            this.listBox1.Items.Clear();
            //Read in every line in the file
            using (StreamReader reader = new StreamReader("file.txt"))
            {
                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    //string textfile = line;
                    string[] myarray = new string[] { "\\n" };
                    string[] parts = new string[9];
                    parts = line.Split(myarray, StringSplitOptions.RemoveEmptyEntries);
                    lines.Add(new Configuration(parts[0], int.Parse(parts[1]), int.Parse(parts[2])));
                    line = reader.ReadLine();
                }

            }
            listBox1.DataSource = lines;
            listBox1.DisplayMember = "CompanyName";
        }

        private void moveup_button_Click(object sender, EventArgs e)
        {
            if (listBox1.SelectedItems.Count > 0)
            {
                object selected = listBox1.SelectedItem;
                int indx = listBox1.Items.IndexOf(selected);
                int totl = listBox1.Items.Count;

                if (indx == 0)
                {
                    listBox1.Items.Remove(selected);
                    listBox1.Items.Insert(totl - 1, selected);
                    listBox1.SetSelected(totl - 1, true);
                }
                else
                {
                    listBox1.Items.Remove(selected);
                    listBox1.Items.Insert(indx - 1, selected);
                    listBox1.SetSelected(indx - 1, true);
                }
            }
        }

        private void movedown_button_Click(object sender, EventArgs e)
        {
            if (listBox1.SelectedItems.Count > 0)
            {
                object selected = listBox1.SelectedItem;
                int indx = listBox1.Items.IndexOf(selected);
                int totl = listBox1.Items.Count;

                if (indx == totl - 1)
                {
                    listBox1.Items.Remove(selected);
                    listBox1.Items.Insert(0, selected);
                    listBox1.SetSelected(0, true);
                }
                else
                {
                    listBox1.Items.Remove(selected);
                    listBox1.Items.Insert(indx + 1, selected);
                    listBox1.SetSelected(indx + 1, true);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:27:35.390

使用 BindingList 对象：

*   使用您的初始项目作为数据创建一个 BindingList
*   将列表框的数据源绑定到该 BindingList 对象
*   从 BindingList 中添加和删除项目，而不是从列表框中

[http://msdn.microsoft.com/en-us/library/ms132679.aspx](http://msdn.microsoft.com/en-us/library/ms132679.aspx)的好例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T12:44:33.347

```
 Conn obcon = new Conn();
 SqlConnection ob = new SqlConnection(obcon.strCon);
 SqlDataAdapter da = new SqlDataAdapter();
 da.SelectCommand = new SqlCommand();
 da.SelectCommand.Connection = ob;
 SqlCommand ds = da.SelectCommand;
 ds.CommandText = "Select* from UserManagement";
 ds.CommandType = CommandType.Text;
 DataTable dt = new DataTable();
 da.Fill(dt);
 DataTable dtt = new DataTable();
 dtt.Columns.Add("FullName");
 dtt.Rows.Add();
 dtt.Rows[0]["FullName"] = "Select Name";
 for (int i = 0; i < dt.Rows.Count; i++)
 {
     dtt.Rows.Add();
     dtt.Rows[i + 1]["FullName"] = dt.Rows[i][0].ToString();
 }
 cmbFindUser.DataSource = dtt;
 cmbFindUser.DisplayMember = "FullName";
 cmbFindUser.ValueMember = "FullName"; 
```

# c# - 时间 (DateTime) 格式有条件地显示分钟

> ID：10399822
> 
> 赞同：2
> 
> 时间：2012-05-01T15:17:05.327
> 
> 标签：c#, datetime, format

jquery [FullCalendar 插件](http://arshaw.com/fullcalendar/docs/text/timeFormat/)具有简洁的时间格式。

如果时间是**7:00pm**，则格式显示为**7p**。

如果时间是**上午 7:30**，则格式显示为**7:30a**。

**问题：**有什么方法可以使用标准格式来通过 c# sharp 完成此任务？显然我可以自己创建逻辑来执行此操作，但我希望有一个格式字符串可以完成此操作。

即（不起作用）：

```
MyDateTime.ToString("h{:mm}t"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:18:56.157

格式化字符串没有条件 - 无法在格式化字符串中指定条件。

您将需要相应地使用标准`if`和格式。

```
if(MyDateTime.Minutes == 0)
{
  return MyDateTime.ToString("h");
}

return MyDateTime.ToString"h:mmt"); 
```

或者，在一行中：

```
return MyDateTime.ToString((MyDateTime.Minutes == 0)?"h":"h:mmt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:19:53.933

不，在内置的 .NET 日期/时间格式中没有这样的东西。您必须自己编写代码。

（老实说，我在其他日期/时间库中没有看到类似的日期和时间。我已经看到了 period 的条件格式*，*但这是另一回事。唯一的例外是“小数秒”，它可以如果时间是整数秒，则表示它们被删除 - 包括小数点。）

# ruby-on-rails - simple_form 单个非模型字段

> ID：10399828
> 
> 赞同：1
> 
> 时间：2012-05-01T15:17:37.340
> 
> 标签：ruby-on-rails, simple-form

所以我有一个 simple_form，我想使用标准的 j-Query datepicker 来选择日期。

问题是，rails 不喜欢正常的美国 MM/DD/YYYY 日期格式，所以我想要显示日期的字段并将符合 rails 的日期格式存储在隐藏字段中。

如何告诉 simple_form 使用模型中不存在的字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:49:15.460

不知道你不能做什么，但我会做类似的事情：

```
$(".datepicker").datepicker({ altFormat: "yy-mm-dd", dateFormat: "yy-mm-dd" }); 
```

如果配置日期选择器对您不起作用，请`attr_accessor :new_field_name`在您的模型中使用并将日期选择器添加到其中并执行您将在那里执行的操作。

# php - 如何使用 htaccess 和 htpasswd 对 ModX 网站中的资源进行密码保护？

> ID：10399835
> 
> 赞同：5
> 
> 时间：2012-05-01T15:18:24.627
> 
> 标签：php, apache, .htaccess, modx, .htpasswd

我们正在尝试保护我们的 ModX 安装中的几个不同的资源。当前的 .htaccess 代码如下（不包括所有 ModX 的东西）

```
AuthName "Dialog prompt"
AuthType Basic
AuthUserFile /var/www/vhosts/mywebsite.co.uk/.htpasswd

<FilesMatch ^index.php\?q=71$>
    require valid-user
</FilesMatch> 
```

练习的目的是保护以下资源：

*   [http://mywebsite.co.uk/index.php?q=71](http://mywebsite.co.uk/index.php?q=71)
*   [http://mywebsite.co.uk/area/protected](http://mywebsite.co.uk/area/protected)

我尝试了 LocationsMatch、Locations、Files 和 Filesmatch 的各种组合，但无法正常工作。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:10:57.590

您可能不需要 htaccess。您可以从正确的系统事件发送 HTTP 身份验证标头[http://php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:19:47.990

这就是整体解决方案：

如果其他人需要知道，我创建了一个名为 passwordprotect 的片段并放在页面顶部：[[passwordprotect]]。然后我输入以下代码（对上述响应的改编）：

```
<?php

if(isset($_SERVER['PHP_AUTH_USER']) && ($_SERVER['PHP_AUTH_USER']=='user') &&     ($_SERVER['PHP_AUTH_PW']=='password'))
{
    echo 'You are successfully logged in.';
} else {
    header('WWW-Authenticate: Basic realm="Protected area"');
    header('HTTP/1.0 401 Unauthorized');
    echo 'Text to send if user hits Cancel button';
    exit;
} 
```

编辑：如果您发现这有时有效，有时无效，这可能是因为使用 [[passwordprotect]]，modx 将缓存该片段。我在Revolution 上获得了更好的成功：[[!passwordprotect]]。我认为代码是 Evolution 上的 [!passwordprotect!]。感叹号只是表示不缓存片段。希望对某人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T11:51:35.597

绝对没有理由这样做，并且使 MODX 革命 ACL 的全部目的无效。正确答案是：

1.  建立一个可以访问资源的具有最低角色的用户组。
2.  在资源组中创建测试资源。
3.  将站点管理员添加到资源组。
4.  在资源组中创建一个测试用户。
5.  刷新站点缓存。
6.  注销所有用户 - 包括您自己。
7.  测试 ACL - 使用管理器和前端的站点管理员。
8.  注销或使用完全不同的浏览器并使用测试用户进行测试。
9.  一旦它开始工作，将受保护的文档移动到资源组。
10.  将用户添加到您想要访问的组中。
11.  删除片段。

如果您需要更多帮助，请获取我的书或访问我的网站。

# python - Python string .format(*variable)

> ID：10399837
> 
> 赞同：3
> 
> 时间：2012-05-01T15:18:31.207
> 
> 标签：python

I'm reading a book to read and it covers this below example.

```
somelist = list(SPAM)
parts = somelist[0], somelist[-1], somelist[1:3]
'first={0}, last={1}, middle={2}'.format(*parts) 
```

Everything seems clear apart from the star being used at the end of the last line. The book fails to explain the usage of this and I hate to progress on without full understanding things.

Many thanks for your help.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T15:19:35.870

The `*` operator, often called the star or splat operator, unpacks an iterable into the arguments of the function, so in this case, it's equivalent to:

```
'first={0}, last={1}, middle={2}'.format(parts[0], parts[1], parts[2]) 
```

[The python docs](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists) have more info.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T15:21:04.183

It's argument unpacking (kinda) operator.

```
args = [1, 2, 3]
fun(*args) 
```

is the same as

```
fun(1, 2, 3) 
```

(for some callable `fun`).

There's also star in function definition, which means "all other positional arguments":

```
def fun(a, b, *args):
    print('a =', a)
    print('b =', b)
    print('args =', args)

fun(1, 2, 3, 4) # a = 1, b = 2, args = [3, 4] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:37:59.967

A comprehensive [explanation](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/) about single and double asterisk form.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:25:49.470

`*` when used inside a function means that the `variable` following the `*` is an iterable, and it extracted inside that function. here `'first={0}, last={1}, middle={2}'.format(*parts)` actually represents this:

```
'first={0}, last={1}, middle={2}'.format(parts[0],parts[1],parts[2]) 
```

**for example:**

```
 >>> a=[1,2,3,4,5]
 >>> print(*a)
 1 2 3 4 5 
```

# ios - 当 showsUserLocation = YES 时，MKMapView 冻结约 30 秒

> ID：10399838
> 
> 赞同：3
> 
> 时间：2012-05-01T15:18:32.047
> 
> 标签：ios, mapkit

我有一个带有完全填充视图控制器的 MKMapView 的 iOS5 应用程序。在该`viewDidLoad`方法中，当我设置`showsUserLocation = YES`（或通过情节提要）时，在询问用户是否允许使用其当前位置后，应用程序在首次运行时冻结 30 秒。

当我设置`showUserLocation = NO`时，该应用程序运行顺利。

有人见过这个吗？

# php - 如何加载 Magento 产品并找到分配给它的商店

> ID：10399839
> 
> 赞同：1
> 
> 时间：2012-05-01T15:18:34.183
> 
> 标签：php, magento

我被要求对一些订单（来自 Ebay 扩展）进行逆向工程，并找出他们真正使用的商店。

充实一个例子；我们从一个 Magento 后端经营多家商店，销售各种产品。这些都是使用单个商家帐户在 eBay 上出售的。

所以我需要做的是加载分配给 eBay 商店的订单，加载附加到该订单的商品，然后查看该商品在哪些其他商店上使用。一旦我走到那一步，我可以简单地过滤掉管理员 storeID 和 eBay storeID，它们将与我正在寻找的商店一起离开。

这就是我到目前为止所拥有的：

```
foreach($collection->getItems() as $order):
   // need to do this to load correct order information
   $order = Mage::getModel('sales/order')->loadByIncrementID($order->getIncrementId());
   $items = $order->getItemsCollection();
   foreach($items as $item) {
      // need to do this to get the actual item, not the item on the order
      $item = Mage::getModel('catalog/product')->load($item->getItemId());
      // do something to get the other store ids
   }
endforeach; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T18:52:02.737

您可以使用 Mage_Catalog_Model_Product::getStoreIds() 方法获取这些商店的列表：

```
$item = Mage::getModel('catalog/product')->load($item->getItemId());
$storeIds = $item->getStoreIds(); 
```

然后 $storeIds 将包含商店 ID 数组，当您转储时：

```
var_dump($storeIds) 
```

你应该得到以下结果：

```
array(3) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "3"
  [2]=>
  string(1) "5"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:45:19.313

尝试这个

```
$item = Mage::getModel('catalog/product')->load($item->getItemId());

$storeId = $item->getStoreId(); 
```

这对我来说很好。

# python - 读取域内的所有页面

> ID：10399841
> 
> 赞同：2
> 
> 时间：2012-05-01T15:18:46.493
> 
> 标签：python, scraper

我正在使用 urllib 库来获取页面。通常我有顶级域名，我希望从该域的每个页面中提取一些信息。因此，如果我有 xyz.com，我希望我的代码从 xyz.com/about 等获取数据。这就是我正在使用的：

```
import urllib,re

htmlFile = urllib.urlopen("http://www.xyz.com/"+r"(.*)")
html = htmlFile.read()
............... 
```

不过，这对我没有用。任何想法表示赞赏。

谢谢。-T

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:22:39.223

我不知道你为什么希望`domain.com/(.*)`工作。您需要拥有该域中所有页面（动态或静态）的列表。你的 python 程序不能自动知道这一点。您必须通过以下链接或查看网站的站点地图从其他地方获得这些知识。

作为一个脚注，抓取是一个有点阴暗的业务。无论您采用何种方法，请始终确保您没有违反任何条款和条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:22:17.513

您正在尝试在 Web 服务器上使用正则表达式。事实证明，Web 服务器实际上并不支持这种格式，所以它失败了。

要做你想做的事，你需要实现一个蜘蛛。一个程序，它将下载一个页面，找到其中的所有链接，并决定要遵循哪些链接。然后，下载这些页面中的每一个，然后重复。

一些需要注意的事情 - 循环，最终指向同一页面的多个链接，链接到域之外，以及被网络服务器禁止向其发送 1000 多个请求的垃圾邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:47:01.097

Scrapy 内置了这个功能。没有递归获取链接。它会异步自动为您处理所有繁重的工作。只需指定您的域和搜索词以及您希望它在页面中搜索的深度。即整个站点。 [http://doc.scrapy.org/en/latest/index.html](http://doc.scrapy.org/en/latest/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:47:28.970

除了@zigdon 的回答，我建议你看看[scrapy](http://scrapy.org/)框架。

[CrawlSpider](http://doc.scrapy.org/en/latest/topics/spiders.html#crawlspider-example)将帮助您轻松实现爬网。

# javascript - 在正则表达式中指定复杂条件

> ID：10399844
> 
> 赞同：0
> 
> 时间：2012-05-01T15:18:57.473
> 
> 标签：javascript, regex, html

HTML 5 中的 id 属性值有以下规则

```
1.The string should contain nonwhitespace characters
2\. It should contain at least one letter 
```

我如何以正则表达式形式表示这一点。我达到了满足第一个条件的正则表达式..

```
/(^|\s)\S+/ig 
```

但是我怎样才能在上面的正则表达式中指出第二个条件
......而且我是正则表达式的新手......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:23:15.617

你的限制是错误的。[HTML5 ID 数据类型](http://www.w3.org/TR/html-markup/datatypes.html#common.data.id-def)必须：

*   必须至少有一个字符长
*   不得包含任何空格字符

那是：

```
^\S+$ 
```

完毕。

笔记：

*   正则表达式中没有任何字符（`\S`不是字符），您不必使正则表达式不区分大小写（`/.../i`是多余的）。
*   由于您的正则表达式已锚定 ( `^...$`)，因此只能有一个匹配项。这意味着不需要“全局”修饰符，因此`/.../g`也是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:22:16.153

最简单的方法是匹配两个表达式。

```
myString.match(/(^|\s)\S+/i) && myString.match(/[a-zA-Z]/) 
```

# c# - 直接“保存”到剪贴板 - 可能吗？

> ID：10399853
> 
> 赞同：1
> 
> 时间：2012-05-01T15:19:46.260
> 
> 标签：c#, .net, clipboard, clipboard-pictures

我正在使用一个生成 BMP 或 JPG 格式图像的 API。有问题的 API 方法需要路径和文件名。但是，在某些情况下，我想简单地将图像放入剪贴板。

我知道我可以保存到文件，然后打开文件并将 Stream 的数据复制到剪贴板：

```
private void SaveSnapshot(string path)
    {
        var pathWasblank = path.IsNullOrBlank();
        path = path.NullIfBlank() ?? Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyPictures),"tempFile.jpg");
        myApiInstance.ExportJPG(path, 100, true);

        //to ensure the file has made it to the filesystem
        while(!File.Exists(path)) Thread.Sleep(100);

        if (pathWasblank) //it should be on the Clipboard and not in a file
        {
            using (var stream = File.OpenRead(path))
                Clipboard.SetImage(Image.FromStream(stream));

            File.Delete(path); //cleanup;
        }
    } 
```

我想知道的是，是否有一种方法可以跳过重新打开、复制然后删除文件，而是通过指定与剪贴板相对应的一些文件路径直接“保存”到剪贴板。如果没有，没什么大不了的；我有一个可行的解决方案。

# ios-simulator - 在ios上模拟多点触控（n> 2）的方法？

> ID：10399854
> 
> 赞同：2
> 
> 时间：2012-05-01T15:19:46.510
> 
> 标签：ios-simulator, multi-touch

有没有办法在 iOS 模拟器上添加第三个（或更多）触摸位置？

按住**Option**键会给你第二个接触点......但我还没有想出如何启用更多并且想要。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T01:37:09.833

这个应用程序和框架 iSimulator 似乎是这样做的好方法，如果您仍在寻找这个问题的答案。

> iSimulate 是一个应用程序/库对，旨在解决 iPhone 模拟器中无法使用多点触控和加速度计的问题。现在，借助 iPhone 或 iPod Touch 上的 iSimulate，它可以无线发送多点触控事件、加速度计和指南针事件以及 GPS 位置到 iPhone 模拟器。

[http://www.vimov.com/isimulate/features/](http://www.vimov.com/isimulate/features/)

看到这里提到：http: [//iosdevelopertips.com/tools/isimulate-testing-multi-touch-events-accelerometer-movements-using-xcode-simulator.html](http://iosdevelopertips.com/tools/isimulate-testing-multi-touch-events-accelerometer-movements-using-xcode-simulator.html)

# android - Android - 如何从持有者刷新（可扩展）列表视图？

> ID：10399856
> 
> 赞同：1
> 
> 时间：2012-05-01T15:19:58.567
> 
> 标签：android, listview, expandablelistview

我有一个可扩展的列表视图。每个子行中有一个 TextView 和一个 CheckBox。当我单击一个复选框时，子项目会获得显示该项目已完成的删除效果。当一个组中的所有子项都被选中时，该组项也会获得删除效果。至少它应该。我可以通过长按某个项目并选择“设置完成”或使用手势打开上下文菜单来将子项目设置为完成。这两个过程都在持有者之外，所以我可以调用 refreshList() （见下面的代码）来重新创建列表。

假设我在一个小组中有两个孩子。我将两个孩子都设置为通过菜单或手势完成-> 组项目接收删除效果。好的。假设现在我通过单击复选框取消选中其中一个子项 -> 组项仍然具有删除效果，因为列表未刷新，因此 getGroupView 未激活。

简化代码：

```
public View getGroupView(int groupPosition, boolean isExpanded,
     View convertView, ViewGroup parent) {
    View view = convertView;
    if (view == null) {
     LayoutInflater inflater = (LayoutInflater) 
      context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     view = inflater.inflate(R.layout.groupitem, null);
    }
    TextView title = (TextView) view.findViewById(R.id.groupText);
    ImageView tick = (ImageView) view.findViewById(R.id.groupTick);

  //if sum of records in the finished column equals the number of records (e.g. 1+1+1 == 3)
   if ((grpfinsum == todoItemsgroupsFinished.size()) && (grpfinsum > 0))
      {
          title.setPaintFlags(title.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
          tick.setImageDrawable(tick.getResources().getDrawable(R.drawable.btn_finished));
          tick.setVisibility(View.VISIBLE);
      }
      else
      {
        title.setPaintFlags(title.getPaintFlags() & (~ Paint.STRIKE_THRU_TEXT_FLAG));
        tick.setVisibility(View.INVISIBLE);
      }
}

 public View getChildView(final int groupPosition, final int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
       final ViewHolder holder;
    if (convertView == null) 
    {
      LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      convertView = inflater.inflate(R.layout.childitem2, null);
      holder = new ViewHolder();
      holder.cTitle = (TextView) convertView.findViewById(R.id.child_title);
      holder.linlay = (LinearLayout) convertView.findViewById(R.id.childlayout);
      holder.cText = (TextView) convertView.findViewById(R.id.child_text);
      holder.cText2 = (TextView) convertView.findViewById(R.id.child_text2);
      holder.checkBox = (CheckBox) convertView.findViewById(R.id.multiple_checkbox);
      convertView.setTag(holder);
    } 
    else 
    {
     holder = (ViewHolder) convertView.getTag();
    }

holder.checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

          if (isChecked)
          {
              holder.cTitle.setPaintFlags(holder.cTitle.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
              HotOrNot entry24 = new HotOrNot(GroceryListsInner2.this);
              entry24.open();
              entry24.modifyEntryInner(modifiedtablename.replaceAll(" ","_"), todoItemsgroupsID.get(childPosition), "1");
              entry24.close();
          }
          else
          {
              holder.cTitle.setPaintFlags(holder.cTitle.getPaintFlags() & (~ Paint.STRIKE_THRU_TEXT_FLAG));
              HotOrNot entry25 = new HotOrNot(GroceryListsInner2.this);
              entry25.open();
              entry25.modifyEntryInner(modifiedtablename.replaceAll(" ","_"), todoItemsgroupsID.get(childPosition), "0");
              entry25.close();
          }

            }
        }
    });

public void refreshList() {
             groupData.clear();
             childData.clear();
             groupCheckBox.clear();
             childCheckBox.clear();

             if (todoItemsgroups.size() > 0) todoItemsgroups.clear();
             if (todoItemsgroupsNote.size() > 0) todoItemsgroupsNote.clear();
             if (todoItemsgroupsFinished.size() > 0) todoItemsgroupsFinished.clear();
             HotOrNot entry = new HotOrNot(this);
                entry.open();
                Cursor c = entry.getAllTitlesFromInnerListGroupBy(originaltablename);
                if (c.moveToFirst())
                {
                do{
                    todoItemsgroups.add(c.getString(7));
                    todoItemsgroupsNote.add(c.getString(4));
                 }while (c.moveToNext());
                 }

                entry.close();

                max = 0;
                for (int i = 0; i < todoItemsgroups.size(); i++) 
                {
                     Map<String, String> curGroupMap = new HashMap<String, String>();
                     groupData.add(curGroupMap);
                     curGroupMap.put(G_TEXT, todoItemsgroups.get(i).replaceAll("_", " "));

                     List<Map<String, String>> children = new ArrayList<Map<String, String>>();
                     HotOrNot entry2 = new HotOrNot(this);
                     entry2.open();
                     Cursor c2 = entry2.getAllTitlesFromInnerListGroup(originaltablename, todoItemsgroups.get(i));
                     if (c2.moveToFirst())
                     {
                      do{
                           Map<String, String> curChildMap = new HashMap<String, String>();
                           children.add(curChildMap);
                           curChildMap.put(C_TITLE, c2.getString(1).replaceAll("_", " "));
                           curChildMap.put(C_TEXT, c2.getString(4));
                           curChildMap.put(C_TEXT2, c2.getString(6));
                        }while (c2.moveToNext());
                     }
                     entry2.close();

                     if (children.size() > max)
                     {
                         max = children.size();  
                     }

                     childData.add(children);
                 }

                 for ( int i = 0; i < todoItemsgroups.size(); i++) {

                        List<Map<String, Boolean>> childCB = new ArrayList<Map<String,Boolean>>();
                        for (int j = 0; j < max; j++) {
                            Map<String, Boolean> curCB = new HashMap<String, Boolean>();
                            childCB.add(curCB);
                            curCB.put(C_CB, false);
                        }
                        childCheckBox.add(childCB);
                  }
                   adapter2.notifyDataSetChanged();

                   adapter2 = new ExpandBaseAdapter2(GroceryListsInner2.this, groupData, childData, groupCheckBox, childCheckBox);
                   exList  = (ExpandableListView) findViewById(R.id.layoutExListView2);
                   exList.setAdapter(adapter2);
}

gestureDetector = new GestureDetector(new MyGestureDetector()); 
         gestureListener = new View.OnTouchListener() { 
             public boolean onTouch(View v, MotionEvent event) { 
                 if (gestureDetector.onTouchEvent(event)) { 

                    if (todoItemsgroupsID.size() > 0) todoItemsgroupsID.clear();

                    HotOrNot entry = new HotOrNot(GroceryListsInner2.this);
                    entry.open();
                    Cursor c = entry.getAllTitlesFromInnerListGroup(originaltablename, todoItemsgroups.get(groupPosition));
                    if (c.moveToFirst())
                    {
                    do{
                        todoItemsgroupsID.add(c.getString(0));
                     }while (c.moveToNext());
                    }
                    entry.close();

                    if (gestureDirection.equals("ltr"))
                    {
                        HotOrNot entryG = new HotOrNot(GroceryListsInner2.this);
                        entryG.open();
                        entryG.modifyEntryInner(modifiedtablename.replaceAll(" ","_"), todoItemsgroupsID.get(childPosition), "1");
                        entryG.close();
                        refreshList();
                    }
                    else 
                    {
                        HotOrNot entryG = new HotOrNot(GroceryListsInner2.this);
                        entryG.open();
                        entryG.modifyEntryInner(modifiedtablename.replaceAll(" ","_"), todoItemsgroupsID.get(childPosition), "0");
                        entryG.close();
                        refreshList();
                    }

                    return true; 
                 } 
                 return false; 
             } 
         }; 
```

# java - node.js 和服务器安全问题

> ID：10399859
> 
> 赞同：3
> 
> 时间：2012-05-01T15:20:07.847
> 
> 标签：java, asp.net, security, node.js

既然 node.js 是基于 javascript 的，又因为 javascript 是高度动态的语言，那是不是意味着服务器端的代码注入比 java 或 asp.net 更危险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:33:07.050

任何允许您轻松地将字符串评估为一行代码的语言都存在固有的安全风险。在这方面，NodeJS 并不比用 Javascript 或 PHP 编写的任何东西差。

即使您使用 Java 或 ASP 编写代码，如果不小心，天真的 Web 程序员仍可能遭受 SQL 注入攻击，而代码注入只是应用程序可能受到损害的一种方式。

关键是仔细过滤来自用户的任何输入，并在使用 eval 或编写自修改代码之前仔细考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T22:28:05.910

无论技术选择如何，您都需要在服务器端代码中验证用户输入。

对于 node.js，有一些库可以帮助您执行此操作，例如**node-validator** [https://github.com/chriso/node-validator](https://github.com/chriso/node-validator)

# scala - 在 sbt 中添加依赖项时重用带有版本号的属性

> ID：10399864
> 
> 赞同：7
> 
> 时间：2012-05-01T15:20:34.903
> 
> 标签：scala, build, dependencies, sbt

我有一个用 sbt 0.11 构建的项目。我正在尝试使用 Scala Swing 创建一个简单的 UI，所以首先是在我的 build.sbt 中添加对 scala-swing 的依赖：

```
libraryDependencies += "org.scala-lang" % "scala-swing" % "2.9.1-1" 
```

但我定义了一个 SettingKey scalaVersion：

```
scalaVersion := "2.9.1-1" 
```

我如何引用该属性？如果我尝试像这样使用它

```
libraryDependencies += "org.scala-lang" % "scala-swing" % scalaVersion 
```

编译器抱怨它在预期字符串时找到了 sbt.SettingKey[String]。SettingKey 上有方法`get(...)`和方法，`evaluate(...)`但它们需要传入一些 Setting[Scope] 参数。

仅引用此属性的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:31:25.583

您需要告诉系统`libraryDependencies`现在依赖于`scalaVersion`：

```
libraryDependencies <+= (scalaVersion) { sv => "org.scala-lang" % "scala-swing" % sv } 
```

（这是我的首选格式；它实际上是在调用`apply`方法，`scalaVersion`因此您可以用几种不同的方式编写它，例如，`scalaVersion("org.scala-lang" % "scala-swing" % _)`.）

如果您有多个要同时依赖的设置，您将应用它们的元组：

```
foo <<= (scalaVersion, organization) { (sv, o) => o + " uses Scala " + sv } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T21:59:33.227

```
libraryDependencies <+= scalaVersion("org.scala-lang" % "scala-swing" % _) 
```

告诉 SBT 你的`<`设置依赖于另一个设置。

告诉 SBT 您要添加另一个值，而`+`不是替换现有值（此外，它表明设置的内容是一个序列，并且您正在向其中添加一个元素）。

语法`setting(function)`与 相同`function(setting)`，其中`function`将在适当上下文中评估的设置作为参数。我什至不知道怎么写，而且会很冗长，所以这个快捷方式很有帮助。

也可以`(setting 1, setting 2)((a, b) => ... )`用来对多个设置进行依赖。

PS：以下可能也有效，并且它有点短，但从 2.10.0 开始，它已被弃用，没有特殊的编译器标志。

```
libraryDependencies <+= scalaVersion("org.scala-lang" % "scala-swing" %) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-07T16:22:39.510

意识到这是旧的 - 添加一个答案以防其他人遇到它。只需添加`.value`到`scalaVersion`变量以获取字符串值：

```
libraryDependencies += "org.scala-lang" % "scala-swing" % scalaVersion.value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:38:43.083

就像是

```
libraryDependencies <+= scalaVersion { v => "org.scala-lang" % "scala-swing" % v} 
```

应该管用。

# jquery - 如何缓存从 Ajax 调用接收到的数据？

> ID：10399866
> 
> 赞同：5
> 
> 时间：2012-05-01T15:20:39.753
> 
> 标签：jquery, ajax, caching

我想缓存从服务器接收到的数据，以便执行最少数量的 PHP/MySQL 指令。我知道缓存选项是自动为 $.ajax() 设置的。但是，每次调用 $.ajax() 时，我都会看到 MySQL 指令，即使 postdata 与先前调用中的相同。我错过了什么吗？缓存从服务器接收到的数据的最佳方法是什么？这是我的代码：

```
var postdata = {'pid':'<?php echo $project_id;?>',
                'record_id':this.id};

$.ajax({
    type: "POST",
    url: "get_note.php",
    data: postdata
}).done(function(data){
    if (data != '0') {
        // Add dialog content
        $('#note_container').html(data);
        $('#note_container').dialog();
    } else {
        alert(woops);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:25:03.700

我会自己处理缓存：

```
// declare this on global scope
var ajaxCache = {};
...

if (!ajaxCache[this.id]) {
    ajaxCache[this.id] = $.ajax({
        type: "POST",
        url: "get_note.php",
        data: {'pid':'<?php echo $project_id;?>','record_id':this.id}
    });
}

ajaxCache[this.id].done(function(){
    if (data != '0') {
        // Add dialog content
        $('#note_container').html(data);
        $('#note_container').dialog();
    } else {
        alert('woops');
    }
}); 
```

这样，如果已经发生了具有所述 id 的请求，除非您将其从缓存中删除，否则不会发出新请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T15:27:03.870

这是想法。当然，根据您的需要进行调整。

```
function getAjaxData(){
    var $node = $('#note_container');
    if ($node.data('ajax-cache').length == 0) {
        $.ajax({
            // do stuff. 
            success: function(data){
                // Add dialog content
                $node.html(data).data('ajax-cache',data).dialog();
            }
        });
    } else {
        $node.html( $node.data('ajax-cache') ).dialog();
    }
}
getAjaxData(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:23:58.620

您必须添加一个缓存参数，例如：

```
$.ajax({
...
...
cache : true
}); 
```

# css - 非常基本的 HTML 格式

> ID：10399874
> 
> 赞同：2
> 
> 时间：2012-05-01T15:21:11.797
> 
> 标签：css, html, css-float, css-position

我在这里拉头发。我只希望两个 div 并排包含内容，这些内容根据所有内容可见的内容调整 div 及其包含的 div 的大小，没有滚动。

以下标记不是我的网站，但我编写它是为了展示我想要的内容：

```
 <!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Test</title>

<style>

#outer{
    width:400px;
}

#innerleft{
    width:200px;
    float:left;
}

#innerright{
    width:200px;
    color:#900;
    float:left;
}

</style>

</head>
<body>

<div id="outer">
    <div id="innerleft">
        sdgfjfdbvkjfdbvkjfdbvkjdfbvkjdfbvkjdfbvkjdbvkjdfbvkjdfbvkjdfbvkjdfbvkjdfbjkfbvjkdfbdfkjdfbjkfdbkjdfjvfjkbfvbjkfvkjbvbfjdjdfdfbdfj
    </div>
    <div id="innerright">
        dsufbjksvkudfsvkdfubvjkdfhbvkhdfbvksdbvkjsdbvkjdsbvkjsbdvkjbsdvkjbsdkjvbskjvbsdkjvbskdjbvksdbvksdjvbkjdsbvkjsbvkjsdbvkjdsbvkjdsksbdjv
    </div>
</div>

</body>
</html> 
```

我似乎已经尝试了一切！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:26:24.280

申请`word-wrap`：

```
#outer > div
{
  word-wrap: break-word;
} 
```

[http://jsfiddle.net/NEbj7/1/](http://jsfiddle.net/NEbj7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:52:44.230

默认情况下，浏览器不会换行其中没有任何空格的文本。要强制浏览器换行，您必须将 word-wrap 属性添加到 #innerleft 和 #innerright

```
#innerleft, #innerright{
word-wrap: break-word;
} 
```

参考：[http ://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap](http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:30:29.223

要使其自动调整大小，您需要添加更多 -- % 百分比以使其自动填充空间

```
#outer{
    width:100%; /* 100% */
}

#innerleft{
    width:50%; /* 50% */
    float:left;
    word-break:break-all; /* Lines may break between any two characters for non-CJK scripts */
}

#innerright{
    width:50%;  /* 50% */
    color:#900;
    float:left;
    word-break:break-all;  /* Lines may break between any two characters for non-CJK scripts */
} 
```

[http://jsfiddle.net/eZpvr/1/](http://jsfiddle.net/eZpvr/1/)

# mysql - 将数组保存在数据库中或制作不同的列

> ID：10399879
> 
> 赞同：1
> 
> 时间：2012-05-01T15:21:34.717
> 
> 标签：mysql, performance

我正在创建一个项目，我将让某人从 20 个类别中选择最多 3 个类别。因为它总是最多 3 个类别，所以我只在数据库中再创建 3 个列（category_1、category_2、category_3） .

我想在插入时，而不是保存在 3 个不同的列中，而是将数组保存到“类别”列中。

我的问题是，在获取信息的那一刻。如果我确实假设搜索具有 1 个特定类别的每条记录，那么什么会更快？让它查看 1 列是一个数组（我想用 LIKE 或类似的东西）还是查看 3 列？

我希望我的问题很清楚。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:23:04.977

不要在数据库列中存储逗号分隔的列表（“数组”）。使用[交叉引用表](http://en.wikipedia.org/wiki/Cross-reference_table)。

（如果您想在数据库中强制执行“不超过 3 个类别”条件，您可以`category_number`在交叉引用表中添加一个附加列。理想情况下，您将使用检查约束将该列限制为值 1、2和 3，但 MySQL 不支持检查约束；相反，您可以将该列作为另一个具有三行`category_number`的表的外键。）`permitted_category_number`

# java - 春天 - Maven | 贾斯珀依赖

> ID：10399880
> 
> 赞同：1
> 
> 时间：2012-05-01T15:21:35.077
> 
> 标签：java, spring, maven, jasper-reports, pom.xml

我正在尝试将我的 spring 项目添加到 jasper 依赖项，但在下面出现此错误
我已经尝试过使用不同版本的 jasper 和 log4j，但我无法让它工作：
我使用最新版本的 spring 和 oracle weblogic 11g。
这只发生在我添加 jasper 依赖项时。
有人有同样的问题吗？

```
 <1/Mai/2012 16H10m BST> <Warning> <HTTP> <BEA-101162> <User defined listener org.springframework.web.context.ContextLoaderListener failed: java.lang.ExceptionInInitializerError.
java.lang.ExceptionInInitializerError
    at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:242)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:272)
    Truncated. see log file for complete stacktrace
Caused By: java.lang.ClassCastException: weblogic.xml.jaxp.RegistryDocumentBuilderFactory cannot be cast to javax.xml.parsers.DocumentBuilderFactory
    at javax.xml.parsers.DocumentBuilderFactory.newInstance(Unknown Source)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:849)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:773)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:483)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:127)
    Truncated. see log file for complete stacktrace
> 

<1/Mai/2012 16H10m BST> <Warning> <HTTP> <BEA-101162> <User defined listener org.springframework.web.context.ContextLoaderListener failed: java.lang.NoClassDefFoundError: Could not initialize class org.apache.log4j.LogManager.
java.lang.NoClassDefFoundError: Could not initialize class org.apache.log4j.LogManager
    at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:242)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:272)
    Truncated. see log file for complete stacktrace
> 
```

这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.company</groupId>
  <artifactId>myproject</artifactId>
  <name>myProject</name>
  <packaging>war</packaging>
  <version>1.0.0-BUILD-SNAPSHOT</version>
  <properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
    <org.aspectj-version>1.6.9</org.aspectj-version>
    <org.slf4j-version>1.6.1</org.slf4j-version>
    <jackson.version>1.9.3</jackson.version>
    <validation-api-version>1.0.0.GA</validation-api-version>
    <hibernate-validator-version>4.2.0.Final</hibernate-validator-version>
    <jasper.version>4.5.0</jasper.version>
    <commons.digester.version>2.1</commons.digester.version>
    <commons.collections.version>3.2.1</commons.collections.version>
  </properties>
  <dependencies>

    <!-- Spring -->
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
      <version>${org.springframework-version}</version>
      <exclusions>
        <!-- Exclude Commons Logging in favor of SLF4j -->
        <exclusion>
          <groupId>commons-logging</groupId>
          <artifactId>commons-logging</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webmvc</artifactId>
      <version>${org.springframework-version}</version>
    </dependency>

    <!-- mysql -->
    <dependency>
      <groupId>com.mysql</groupId>
      <artifactId>mysqljdbc6</artifactId>
      <version>3.1.10</version>
    </dependency>

    <!-- Spring Data JPA -->
    <dependency>
      <groupId>org.springframework.data</groupId>
      <artifactId>spring-data-jpa</artifactId>
      <version>1.0.3.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-jdbc</artifactId>
      <version>${org.springframework-version}</version>
      <type>jar</type>
      <scope>compile</scope>
    </dependency>

    <!-- validation -->
    <dependency>
      <groupId>javax.validation</groupId>
      <artifactId>validation-api</artifactId>
      <version>${validation-api-version}</version>
      <type>jar</type>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-validator</artifactId>
      <version>${hibernate-validator-version}</version>
      <type>jar</type>
      <scope>compile</scope>
    </dependency>

    <!-- Data Mapper package is a high-performance data binding package built on Jackson JSON processor -->
    <dependency>
      <groupId>org.codehaus.jackson</groupId>
      <artifactId>jackson-mapper-asl</artifactId>
      <version>${jackson.version}</version>
      <type>jar</type>
      <scope>compile</scope>
    </dependency>

    <!-- Jackson is a high-performance JSON processor (parser, generator) -->
    <dependency>
      <groupId>org.codehaus.jackson</groupId>
      <artifactId>jackson-core-asl</artifactId>
      <version>${jackson.version}</version>
      <type>jar</type>
      <scope>compile</scope>
    </dependency>
    <!-- AspectJ -->
    <dependency>
      <groupId>org.aspectj</groupId>
      <artifactId>aspectjrt</artifactId>
      <version>${org.aspectj-version}</version>
    </dependency>
    <!-- Logging -->
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
      <groupId>net.sf.jasperreports</groupId>
      <artifactId>jasperreports</artifactId>
      <version>4.1.2</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>jcl-over-slf4j</artifactId>
      <version>${org.slf4j-version}</version>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <version>${org.slf4j-version}</version>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
      <version>1.2.16</version>
      <exclusions>
        <exclusion>
          <groupId>javax.mail</groupId>
          <artifactId>mail</artifactId>
        </exclusion>
        <exclusion>
          <groupId>javax.jms</groupId>
          <artifactId>jms</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.sun.jdmk</groupId>
          <artifactId>jmxtools</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.sun.jmx</groupId>
          <artifactId>jmxri</artifactId>
        </exclusion>
      </exclusions>
      <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
      <groupId>javax.inject</groupId>
      <artifactId>javax.inject</artifactId>
      <version>1</version>
    </dependency>
    <!-- Servlet -->
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.5</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>javax.servlet.jsp</groupId>
      <artifactId>jsp-api</artifactId>
      <version>2.1</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jstl</artifactId>
      <version>1.2</version>
    </dependency>
    <!-- Test -->
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.7</version>
      <scope>test</scope>
    </dependency>
    <!-- Tiles -->
    <dependency>
      <groupId>org.apache.tiles</groupId>
      <artifactId>tiles-extras</artifactId>
      <version>2.2.2</version>
      <exclusions>
        <exclusion>
          <artifactId>tiles-freemarker</artifactId>
          <groupId>org.apache.tiles</groupId>
        </exclusion>
        <exclusion>
          <artifactId>tiles-velocity</artifactId>
          <groupId>org.apache.tiles</groupId>
        </exclusion>
        <exclusion>
          <artifactId>tiles-ognl</artifactId>
          <groupId>org.apache.tiles</groupId>
        </exclusion>
        <exclusion>
          <artifactId>tiles-mvel</artifactId>
          <groupId>org.apache.tiles</groupId>
        </exclusion>
      </exclusions>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-eclipse-plugin</artifactId>
        <version>2.9</version>
        <configuration>
          <additionalProjectnatures>
            <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
          </additionalProjectnatures>
          <additionalBuildcommands>
            <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
          </additionalBuildcommands>
          <downloadSources>true</downloadSources>
          <downloadJavadocs>true</downloadJavadocs>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
          <compilerArgument>-Xlint:all</compilerArgument>
          <showWarnings>true</showWarnings>
          <showDeprecation>true</showDeprecation>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <configuration>
          <mainClass>org.test.int1.Main</mainClass>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

我检查了 pom.xml 的依赖层次结构，发现了一些奇怪的东西，我会放在下面这可能是问题吗？但这很奇怪，因为它只会在我每次添加 jasper 的依赖项时发生。我开发了其他东西，从来没有冲突过。

![http://imageshack.us/photo/my-images/151/capturar1b.jpg/](../Images/684b26fa6eb8c176b51a3a7422eae642.png)
![http://imageshack.us/photo/my-images/696/capturar2f.jpg/](../Images/b0b24eea75845aa6415d5490b82574dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:49:37.273

**第二个答案**

* * *

第一个错误表明正在使用不兼容的 XML 解析器实现。Weblogic 很可能提供它自己的实现，这与您的依赖项之一引入的 XML 解析器实现相冲突。您需要弄清楚是什么引入了 XML 解析器，然后排除该解析器。许多 IDE（如使用 m2eclipse 时的 Eclipse）可以提供 POM 的可视化图表，以帮助找出依赖关系。或者，我认为您可以使用' [mvn dependency:tree](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html) '。

第二个错误*似乎*表明它`org.apache.log4j.LogManager`不在类路径上。假设您正在正确构建战争（或爆炸战争）并且所有 maven 生成的依赖 jar 都在 /WEB-INF/lib 文件夹中，那么我最好的猜测是有两个 log4j 实现在起作用，它们是冲突的. （也许 weblogic 包含一个 log4j 实现，并且默认情况下它可用于 webapps。）为了测试它，您可以尝试将 log4j 依赖范围设置为“提供”。如果您仍然遇到 log4j 问题，您可能会考虑使用 slf4j 自己的日志记录实现 ( [logback](http://logback.qos.ch/) )。IE

```
 <dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <scope>runtime</scope>
    <version>1.0.0</version>
  </dependency> 
```

**第一个答案**（也许有用，但没有解决主要问题。）

* * *

尝试从 jasper 中排除 commons-logging。

另外，我注意到您直接使用杰克逊。Jasper 也依赖于 Jackson。就我而言，我还需要将 Jackson 从 Jasper 中排除，以便我可以参考更新的版本。

```
 <dependency>
    <groupId>net.sf.jasperreports</groupId>
    <artifactId>jasperreports</artifactId>
    <version>4.5.0</version>
    <exclusions>
      <exclusion>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
      </exclusion>
      <exclusion>
        <artifactId>jackson-mapper-lgpl</artifactId>
        <groupId>org.codehaus.jackson</groupId>
      </exclusion>
      <exclusion>
        <artifactId>jackson-core-lgpl</artifactId>
        <groupId>org.codehaus.jackson</groupId>
      </exclusion>        
    </exclusions>
  </dependency> 
```

我看到您确实从许多其他依赖项中正确删除了 commons-logging。如果检查最终传递依赖项，则不应看到 commons-logging.jar。

（另外，我尝试稍微改进一下您的 XML 格式。以前很难阅读。仍然不是那么容易阅读，但更好。）

# elf - ELF 文件的大小与 RAM 中的大小

> ID：10399886
> 
> 赞同：2
> 
> 时间：2012-05-01T15:21:52.157
> 
> 标签：elf, stm32

我有一个 STM32，我将 ELF 文件加载到 RAM 中（使用 OpenOCD 和 JTAG）。到目前为止，我还没有真正关注我加载的 ELF 文件的大小。

通常，当我编译一个对于我的板来说太大的 ELF 文件（我的板有 128KB 的 RAM 可以加载可执行文件）时，链接器会抱怨（在链接器脚本中我指定了 RAM 的大小）。

现在我注意到输出的 ELF 文件的大小，我看到它是 261KB，但链接器并没有抱怨！

为什么我的 ELF 文件这么大，但我的链接器却很好？主机上的 ELF 文件是否完全加载到板上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:28:13.620

否 - ELF 包含诸如未加载的重定位记录之类的内容。它还*可以*包含仅由调试器加载的调试信息（通常为 DWARF 格式）。

您可能希望使用它`readelf`来了解您的 ELF 文件中实际包含的内容。您可能不想一直这样做，但至少进行几次以了解其中的内容可以更好地了解您正在处理的内容。

`readelf`是 binutils 包的一部分；很有可能您已经拥有其他开发工具附带的副本。

如果您想了解更多细节，谷歌搜索“ELF 格式”之类的内容应该会找到很多文章。但是请注意，ELF 是一种绝对不平凡的格式。如果您决定要了解所有细节，则需要相当多的时间和精力。

# javascript - 如何使用完全缓存使用手动触发 F5 键和重新加载页面

> ID：10399889
> 
> 赞同：2
> 
> 时间：2012-05-01T15:22:07.253
> 
> 标签：javascript, jquery, html, caching, browser

我们有一个网页，通常通过单击 F5 或 Ctrl-R 重新加载，只是为了查看是否有新数据到达。

此页面中的所有图像都有一个**永久缓存**标头，因此浏览器永远不应重新加载。

但是当用户按下 F5 时，大多数浏览器都会检查每个缓存条目，并带有一个请求和一个 if-modfied-since 标头。我们的 HTML 页面无论如何都不会被缓存，但是图像应该被缓存很长时间，并且不需要询问图像是否被修改。这是一个无用的请求，我们想摆脱它。

我们的页面上有一个重新加载图标，但用户仍然会使用键盘重新加载（我也愿意）。

所以我尝试触发 F5 和 Ctrl-R 键并像这样手动重新加载（顺便说一句，我们使用的是 jquery）：

```
<img src="someimg.png" />
<a id="reload" href="mypage.html">Reload</a>    
<script type="text/javascript">
function loading() {
    window.location.href = $('#reload').attr("href"); 
    return false;
}

function isF5(e) {
    return e.which == 116;
}
function isCtrlR(e) {
    return e.ctrlKey &amp;&amp; e.which == 82;
}

function triggerReloadKeys(e) {
    if (isF5(e) || isCtrlR(e)) {
        $('#reload').click();
    }
}
$(document).bind("keydown", triggerReloadKeys);
$('#reload').click(loading); 
```

someimg.png 总是带有一个持久的缓存指令。

我的第一个答案是告诉我不要接管用户浏览器，如果他愿意，让他刷新。你是对的，但我们在高峰时间的速度高达 5000 页/秒。甚至更多的图像，因为每个人都在重新加载页面。我们只是想减少请求的数量，不管它们有多快。（而且我知道我无法触发菜单栏中的浏览器刷新按钮，但我现在不关心它）。

我们非常成功地减少了应用程序中的请求数量，因为我们没有任何重新加载按钮或 F5，但每个人都被迫使用我们自己的 HTML 重新加载链接。

可以像这样一起禁用 F5 键：

```
function triggerReloadKeys(e) {
    if (isF5(e) || isCtrlR(e)) {
        return false;
    }
} 
```

我不知道是否有可能在仍然使用缓存的同时触发 F5 并强制重新加载并模仿单击页面上另一个链接的行为。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:52:15.763

我想你还没有得到你的答案。

这是我在我的网站上使用的：

```
var ctrlDown = false;
var ctrlKey = 17, f5Key = 116, rKey = 82;

$(document).keydown(function( e ) {
    if( e.keyCode == f5Key )
    {
        //F5 pressed. Copy your code here or try
        //window.location   = window.location;
        //It will avoid if-modified-since requests.
        e.preventDefault( );
    }

    if( e.keyCode == ctrlKey )
        ctrlDown = true;
    if( ctrlDown && ( e.keyCode == rKey ) )
    {
        //Ctrl + R pressed. Do whatever you want
        //or copy the same code here that you did above
        e.preventDefault( );
    }

}).keyup(function(e) {
    if (e.keyCode == ctrlKey)
        ctrlDown = false;
}); 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:39:35.317

您试图在错误的地方（即客户端）解决此问题。

**如果您的图像真的永远不会改变，那么在服务器端**为这些图像添加一个未来的`Expires`http 标头。这样浏览器缓存将不会尝试查看图像是否已更新，因为缓存指令确保它不会。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T06:40:00.067

```
<body onload="JavaScript:document.body.focus();" onkeydown="return showKeyCode(event)">
</body>
<script src="<?php echo $this->webroot; ?>assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script>
        var version = navigator.appVersion;

        function showKeyCode(e) {
            var keycode = (window.event) ? event.keyCode : e.keyCode;

            if ((version.indexOf('MSIE') != -1)) {
                if (keycode == 116) {
                    event.keyCode = 0;
                    event.returnValue = false;
                    return false;
                }

                if (keycode != 154) {
                    event.keyCode = 0;
                    event.returnValue = false;
                    return false;
                }
                if (keycode != 123) {
                    event.keyCode = 0;
                    event.returnValue = false;
                    return false;
                }
            }
            else {
                if ((keycode == 116)||(keycode != 123)||(keycode != 154)) {
                    return false;
                }
            }
        }
 </script> 
```**

# css - 垂直和水平居中

> ID：10399893
> 
> 赞同：4
> 
> 时间：2012-05-01T15:22:16.273
> 
> 标签：css

> **可能重复：**
> [在页面上垂直和水平居中 <div> 的最佳方法？](https://stackoverflow.com/questions/356809/best-way-to-center-a-div-on-a-page-vertically-and-horizontally)

我有一个画布元素，我希望它位于页面的正中心，无论是垂直的还是水平的。

我是一名程序员，我对 CSS 了解不多。任何人都可以帮助我将画布垂直和水平居中吗？

这是我当前的 CSS 代码：

```
/* Set up canvas style */
#canvas {
  font-family: 'pixel';
  margin-left: auto;
  margin-right: auto;
  display: block;
  border: 1px solid black;
  cursor: none;
  outline: none;
} 
```

它已经水平居中，但不是垂直居中，提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:36:20.777

我不知道这是否会有所帮助，但我编写了这个 jQuery 插件可能会有所帮助。我也知道这个脚本需要调整。它会在需要时调整页面。

```
(function($){
    $.fn.verticalCenter = function(){
        var element = this;

        $(element).ready(function(){
            changeCss();

            $(window).bind("resize", function(){
                changeCss();
            });

            function changeCss(){
                var elementHeight = element.height();
                var windowHeight = $(window).height();

                if(windowHeight > elementHeight)
                {
                    $(element).css({
                        "position" : 'absolute',
                        "top" : (windowHeight/2 - elementHeight/2) + "px",
                        "left" : 0 + "px",
                        'width' : '100%'
                    });
                }
            };
        });

    };
})(jQuery);

$("#canvas").verticalCenter(); 
```

* * *

## 精炼代码+演示

请以***“整页”***模式查看此演示。

```
(function($) {
  $.fn.verticalCenter = function(watcher) {
    var $el = this;
    var $watcher = $(watcher);
    $el.ready(function() {
      _changeCss($el, $watcher);
      $watcher.bind("resize", function() {
        _changeCss($el, $watcher);
      });
    });
  };
  function _changeCss($self, $container) {
    var w = $self.width();
    var h = $self.height();
    var dw = $container.width();
    var dh = $container.height();
    if (dh > h) {
      $self.css({
        position: 'absolute',
        top: (dh / 2 - h / 2) + 'px',
        left: (dw / 2 - w / 2) + 'px',
        width: w
      });
    }
  }
})(jQuery);

$("#canvas").verticalCenter(window);

$(function() {
  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext('2d');
  drawSmile(ctx, 0.9, 'yellow', 'black', 0.75);
});

function drawSmile(ctx, scale, color1, color2, smilePercent) {
  var x = 0, y = 0;
  var radius = canvas.width / 2 * scale;
  var eyeRadius = radius * 0.12;
  var eyeXOffset = radius * 0.4;
  var eyeYOffset = radius * 0.33;
  ctx.save();
  ctx.translate(canvas.width / 2, canvas.height / 2);
  ctx.beginPath(); // Draw the face
  ctx.arc(x, y, radius, 0, 2 * Math.PI, false);
  ctx.fillStyle = color1;
  ctx.fill();
  ctx.lineWidth = radius * 0.05;
  ctx.strokeStyle = color2;
  ctx.stroke();
  ctx.beginPath(); // Draw the eyes
  ctx.arc(x - eyeXOffset, y - eyeYOffset, eyeRadius, 0, 2 * Math.PI, false);
  ctx.arc(x + eyeXOffset, y - eyeYOffset, eyeRadius, 0, 2 * Math.PI, false);
  ctx.fillStyle = color2;
  ctx.fill();
  ctx.beginPath(); // Draw the mouth
  ctx.arc(0, 0, radius * 0.67, Math.PI * (1 - smilePercent), Math.PI * smilePercent, false);
  ctx.stroke();
  ctx.restore();
}
```

```
#canvas {
  border: 3px dashed #AAA;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<canvas id="canvas" width="256" height="256"></canvas>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:26:45.907

这应该可以解决问题：

```
#canvas {
    position: absolute;
    top: 50%; left: 50%;
    width: 200px;
    height: 200px;
    margin: -100px 0 0 -100px;
} 
```

顶部和左侧边距必须是元素高度和宽度的一半的负数。

如果您不知道宽度和高度并且需要使用 javascript 计算它，则同样适用。只需获取宽度/高度，将它们除以一半，然后以与上面示例相同的方式将值设置为边距。

希望有帮助:)

# asp.net - 在 ASP.NET 中跟踪 Google DFP 广告点击次数

> ID：10399907
> 
> 赞同：2
> 
> 时间：2012-05-01T15:23:26.873
> 
> 标签：asp.net, google-dfp

我想知道是否可以跟踪网站用户何时点击 Google DFP 广告。我知道 Google DFP 网站会跟踪点击次数，但我希望能够跟踪哪些用户（登录时，使用 ASP.NET 会员资格）正在点击广告以及有多少广告。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:19:02.343

我一直在问一个类似的问题，但还没有找到答案！

我最接近的是这个 - [http://support.google.com/richmedia/bin/answer.py?hl=en&answer=117426](http://support.google.com/richmedia/bin/answer.py?hl=en&answer=117426)

要使用您自己的点击跟踪服务器跟踪点击，您必须在广告代码中包含一个属性，该属性指定服务器的 URL。每次用户点击广告时都会访问该 URL，从而使您的服务器能够计算点击次数。此属性为 click=value，其中 value 是点击跟踪服务器的 URL。点击跟踪 URL 不应包含任何分号 (;)。如有必要，您可以将分号编码为等效的 %3B 字符。

下面的示例 URL 显示了一个带有已实现点击属性的广告代码：

```
http://ad.doubleclick.net/adi/N270.maheshdfasite/B3140338.2;dcopt=1_ist;click=http://site.com/cgi/clicktrack?clickid=12345&page=abcd&goto=;sz=0x0;ord=[timestamp]? 
```

所以看起来你可以在点击处理程序中放置一个指向你网站的 URL。

这是否特定于富媒体（例如 Flash 广告）？我不知道！

# wpf - IDataErrorInfo 通知

> ID：10399915
> 
> 赞同：0
> 
> 时间：2012-05-01T15:24:00.407
> 
> 标签：wpf

我遇到了 IDataErrorInfo 问题，这是一个示例

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new MainWindowViewModel();
    }
}

public class MainWindowViewModel : INotifyPropertyChanged, IDataErrorInfo
{
    public List<Person> _source1 = null;
    public List<Person> Source1
    {
        get
        {
            return _source1 ?? (_source1 = new List<Person>()
                {
                    new Person(){ Nom ="one"}
                });
        }
    }

    public List<Person> _source2 = null;
    public List<Person> Source2
    {
        get
        {
            return _source2 ?? (_source2 = new List<Person>()
                {
                    new Person(){ Nom ="two"}
                });
        }
    }

    private Person _selectedItem1;
    public Person SelectedItem1 { get { return _selectedItem1; } set { _selectedItem1 = value; RaisePropertyChanged("SelectedItem1"); } }
    private Person _selectedItem2;
    public Person SelectedItem2 { get { return _selectedItem2; } set { _selectedItem2 = value; RaisePropertyChanged("SelectedItem2"); } }

    public MainWindowViewModel()
    {
        //This is the actual way, i solve my problem
        //this.PropertyChanged += (sender, e) =>
        //    {
        //        if (e.PropertyName == "SelectedItem1")
        //        {
        //            RaisePropertyChanged("SelectedItem2");
        //        }
        //    };
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void RaisePropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    public string Error
    {
        get { throw new NotImplementedException(); }
    }

    public string this[string columnName]
    {
        get {

            string errors= string.Empty;

            if (columnName == "SelectedItem2")
            {
                if(this.SelectedItem1 != null && this.SelectedItem2 == null)
                    errors = "erreur";
            }

            return errors;
        }
    }
}

public class Person
{
    public string Nom { get; set; }        
} 
```

如您所见，我必须告知 SelectedItem2 很奇怪，因为 SelectedItem1 被选中，但红角没有出现。这是xaml代码。

```
<Window x:Class="WpfApplication5.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel>
    <ComboBox ItemsSource="{Binding Path=Source1}" DisplayMemberPath="Nom" SelectedItem="{Binding Path=SelectedItem1}"/>
    <ComboBox ItemsSource="{Binding Path=Source2}" DisplayMemberPath="Nom" SelectedItem="{Binding Path=SelectedItem2,ValidatesOnDataErrors=True}"/>
</StackPanel> 
```

是解决这个问题的更好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:59:15.800

我想你需要做的就是

```
public Person SelectedItem1 
{ 
    get { return _selectedItem1; } 
    set 
    { 
       _selectedItem1 = value; 
       RaisePropertyChanged("SelectedItem1"); 
       RaisePropertyChanged("SelectedItem2"); 
    } 
} 
```

当 SelectedItem1 已更改时，这将导致重新评估 SelectedItem2 上的验证。

# php - 使用 PHP 从 JSON 字符串转换时间

> ID：10399919
> 
> 赞同：2
> 
> 时间：2012-05-01T15:24:25.030
> 
> 标签：php, json, string, date, time

我在将我从 JSON 获得的时间字符串转换为另一种格式时遇到问题。不知何故，日期设置为负 24 小时。这是来自 JSON 的对象

```
 [date] => 2011-07-02T00:00:00+02:00 
```

我正在使用`strtotime()`和`date()`

```
date('l, d F Y', strtotime($day->date)); 
```

但输出看起来像这样

```
FRIDAY, 01 JULY 2011 
```

显然，JSON 中的日期是七月二日。有谁知道为什么会这样？我错过了什么重要的东西吗？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:28:26.317

我认为您应该使用[DateTime](http://php.net/datetime)。它不依赖于主机 TimeZone。除了格式是有效的 ISO8601。所以 DateTime 根本没有问题。

```
$dt = new DateTime("2011-07-02T00:00:00+02:00");
echo $dt->format("l, d F Y"); 

// Echos Saturday, 02 July 2011 
```

[http://ideone.com/yPp4d](http://ideone.com/yPp4d)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T15:29:10.320

PHP 不理解无限的时间/日期字符串数组。对人类来说“显而易见”的东西，对计算机来说并不那么明显。如果没有针对该确切日期格式的特定解析器，计算机语言如何理解`T`您的示例中的用途？

[PHP strtotime 格式](http://www.php.net/manual/en/datetime.formats.date.php)将向您展示 PHP 可以将字符串从哪些格式转换为时间或日期对象。

即使正确解析日期/时间，您`tzcorrection`的 +0200 也会告诉 PHP 纠正 GMT + 2 小时的时区差异，这可能不是您正确的时区偏移量，因此会给您错误。

# probability - 贝叶斯网络的设计：理解“状态”和“节点”的区别

> ID：10399920
> 
> 赞同：1
> 
> 时间：2012-05-01T15:24:31.940
> 
> 标签：probability, bayesian-networks

我正在使用“Hugin Lite”程序设计一个小型贝叶斯网络。问题是我很难理解“节点”（视觉圈）和“状态”（女巫是节点的“领域”）之间的区别。

我会写一个很清楚的例子，另一个我看不懂的例子。

我理解的例子：
有两个女人（W1和W2）和一个男人（M）。
M得到一个W1的孩子。孩子的名字是：C1
然后M 得到一个W2 的孩子。孩子的名字是：C2

生成的网络是：

![在此处输入图像描述](../Images/b7bc123509313626e493a255d962135c.png)

每个节点 (W1,W2,M,C1,C2) 的四种可能状态是：

*   AA：这个人有两个基因“A”
*   Aa/aA：这个人有一个基因“A”和一个基因“a”
*   aa：这个人有两个基因“a”

现在我无法理解的示例：

给出的数据：

*   一个人在国外（旅行）时的总付款（授权与否）：5％（当然，95％的交易是在本国进行的交易）
*   旅行时未授权付款：1%
*   在本国未授权付款：0.2%
*   在本国和外国公司的未授权付款：10%
*   在本国和外国公司的授权付款：1%
*   旅行和前往外国时的总（授权或未授权）付款：90%

我画的如下。

![在此处输入图像描述](../Images/1b67855076faa32e7b820d66b7ca382b.png)

但我不确定它是否正确。你怎么看？然后我应该为每个节点完成一个“概率表”。但是我应该写什么呢？

概率表： ![在此处输入图像描述](../Images/fdef09d0181628d5bce0f992f5f325d8.png)

非常感谢有关网络正确性以及如何填写表格的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-10T03:53:51.270

节点是随机变量（RV），即可以具有不同状态的“事物”，因此具有一定程度的不确定性，因此您可以为这些状态分配概率。因此，例如，如果您谈论 Person 的 RV，它可能具有不同的状态，例如 [Man or Woman] 及其相应的概率，如果您想将其与另一个 RV Credit Worthiness [Good,Bad] 相关联，那么您可以“嫁给”Person和 Credit Worthiness 结合了 RV 和状态的组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:41:35.680

这是作业，所以我不想告诉你答案。相反，我会做一个观察，并提出几个问题。观察结果是，您希望您的箭头从原因到结果。

所以。付款授权状态是该位置的原因吗？还是该位置是付款授权的原因？

此外，您真的需要为每个旅行、家庭、外国和本地的四个变量吗？或者可能一些较少数量的变量就足够了？

# perl - 如何使用 WWW::Mechanize 的输出？

> ID：10399921
> 
> 赞同：0
> 
> 时间：2012-05-01T15:24:34.377
> 
> 标签：perl, mechanize, www-mechanize

我想循环浏览网页上的所有链接，所以我试过了

```
#!/usr/bin/perl

use WWW::Mechanize;

my $url = "http://www.google.com";
my $m = WWW::Mechanize->new();
$m->get($url);

my @links = $m->find_all_links(url_regex => qr/google/);

foreach my $link (@links){
    print Dumper $m->get($link->url_abs);
} 
```

这给了我例如

```
$VAR11 = bless( [
                  'http://www.google.com/ncr',
                  'Google.com in English',
                  undef,
                  'a',
                  $VAR1->[4],
                  {
                    'href' => 'http://www.google.com/ncr',
                    'class' => 'gl nobr'
                  }
                ], 'WWW::Mechanize::Link' ); 
```

**问题**

如何只输出链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:57:02.327

文档指出链接作为[`WWW::Mechanize::Link`](http://search.cpan.org/perldoc/WWW::Mechanize::Link)对象返回。所以：

```
my @links = $m->find_all_links(url_regex => qr/google/);
print $_->url, "\n" for @links; 
```

# php - MySQL在INSERT上将列设置为同一表中其他列的CONCAT？

> ID：10399923
> 
> 赞同：-1
> 
> 时间：2012-05-01T15:24:40.023
> 
> 标签：php, mysql

我有一个 MySQL 表用于存储上传文件的详细信息，如下所示：

```
CREATE TABLE files (
    file_id bigint not null primary key auto_increment,
    file_name text,
    file_path text,
    file_extension varchar(15),
    file_link text); 
```

磁盘上文件的实际名称设置为`file_id`插入记录时由表生成的名称 - 所以虽然我可以记录各种详细信息，但此时数据库实际上并不知道文件的名称。

`UPDATE`当然，在设置列之后不久运行另一个语句很容易`file_link`，但我想知道是否有一种方法可以在这里做一些更优雅的事情？

我想做的`file_link`是自动将值设置`INSERT`为此：`CONCAT(file_path, file_id, file_extension)`无需`UPDATE`立即运行另一条语句。

有谁知道我该怎么做 - 如果这是一个坏主意，你能解释一下原因吗？

PS 我正在使用 PHP 来运行这些语句，如果这有所不同的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:39:13.897

您可以使用以下触发器执行此操作：

```
DELIMITER $$

CREATE TRIGGER makelink BEFORE INSERT ON files
  FOR EACH ROW
    BEGIN
      SET NEW.file_link = CONCAT(NEW.file_path, NEW.file_id, NEW.file_extension);
    END;
$$

DELIMITER ; 
```

...虽然我不得不说，我个人会用`SELECT`语句创建它，而不是让数据库在插入时执行这样的事情 - 确保存储静态数据的效率稍微高一些，但它会使数据库模式不那么透明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:43:46.667

通常，您不想存储派生数据。当您有一些空闲周期时，请阅读数据库规范化。

# php - 当键值对匹配时，如何在 PHP 中将值从一个数组添加到另一个数组？

> ID：10399924
> 
> 赞同：1
> 
> 时间：2012-05-01T15:24:46.490
> 
> 标签：php, arrays, multidimensional-array

这是我的两个数组：

```
$array1 =( [0] => Array ( [row_id] => 237 [comment] => 'hello0' )
           [1] => Array ( [row_id] => 5 [comment] => 'hello1' ) 
           [2] => Array ( [row_id] => 6 [comment] => 'hello2' ) );

$array2= ( [0] => Array ( [row_id] => 5 [vote] => 1 ) 
           [1] => Array ( [row_id] => 7 [vote] => 1 ) 
           [2] => Array ( [row_id] => 237 [vote] => 0 ) ); 
```

我想匹配`$array1`并添加`$array2`的键/值对 到 $array1 哪里`[row_id]``$array2``[vote]``$array1[row_id]=$array2[row_id]`

这就是我希望输出的方式：

```
$array1 =( [0] => Array ( [row_id] => 237 [comment] => 'hello0' [vote] => 0  )
           [1] => Array ( [row_id] => 5 [comment] => 'hello1' [vote] => 1 ) 
           [2] => Array ( [row_id] => 6 [comment] => 'hello2' [vote] => 1 ) ); 
```

我相信有很多方法可以做到这一点，所以对最快计算的想法也将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:38:54.617

```
foreach($array1 as $key1=>$value1)
{
  foreach($array2 as $key2=>$value2)
  {
     if($value1['row_id']==$value2['row_id'])
     {
         $value1['vote'] = $value2['vote'];
         $result[$key1][]=$value1;
     }
 }
}

$result is what you need! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T17:37:59.833

```
foreach($array1 as $key1=>$value1)
{
    foreach($array2 as $key2=>$value2)
   {
       if($value1['row_id']==$value2['row_id'])
       {
           if ($value2['vote']) {
               $result[$key1]['vote']=$value2['vote']; // You're assigning the vote value to a new index of 'vote' on the original array.
           } else {
               $result[$key1]['vote'] = 'no vote';
           }
       }
   }
} 
```

这是Ray Cheng的回答中需要的改变。

已编辑

再次编辑：

从数据库中提取数据时，您绝对可以将记录作为数组获取（查找它，它与山一样古老，代码就在那里）。下一步是将数组重新组织为首选格式。`FOREACH`非常适合这个。

```
// $array1 brought in from some other process
$arrayStorage = array();
foreach ($array1 as $row){ 
    $arrayStorage[$row['row_id']] = array('votes'=>$row['votes'], 'comment'=>$row['comment']);
} 
```

当你想把它放回数据库时，把它倒过来，确保你再次拔出钥匙。

```
foreach ($arrayStorage as $row_id=>$row_data){ ... 
```

编辑最后一个：

假设已将两个各自的数据库都提取为 OP 格式的数据...

```
foreach ($array1 as $row){ 
    $arrayStorage[$row['row_id']]['comment'] = $row['comment'];
}

foreach ($array2 as $row){ 
    $arrayStorage[$row['row_id']]['votes'] = $row['votes'];
}
$array1 = $arrayStorage;

// You are going through $array1 and $array2 and creating a placeholder that is built with the $row_id as an associated structure with a comment and vote for each $row_id. This is your final desired array. 
```

# magento - 如何在 Magento 1.6 中更改客户发票模板

> ID：10399928
> 
> 赞同：5
> 
> 时间：2012-05-01T15:24:51.973
> 
> 标签：magento

如何更改 Magento 1.6 中的客户发票模板？我们希望删除它告诉客户跟踪号的区域并更改电子邮件产生的一些措辞。

可以在此处找到我们要编辑的电子邮件示例：http: [//deadlydash.com/magento.jpg](http://deadlydash.com/magento.jpg)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T18:47:43.460

**系统 > 交易电子邮件 > 添加模板**

*   选择“新发票”
*   加载模板
*   根据需要编辑
*   对客人发票模板也这样做（如果适用）。

**系统 > 配置 > 销售电子邮件**

*   将您刚刚创建的模板设置为用于这些电子邮件的模板。

# r - 如何更改ggplot2中的轴标签颜色？

> ID：10399930
> 
> 赞同：11
> 
> 时间：2012-05-01T15:24:54.820
> 
> 标签：r, ggplot2

我试过了

```
... + xlab("New label", colour="darkgrey") 
```

和

```
... + xlab("New label", color="darkgrey") 
```

但它说这个论点是未使用的。我调查了`?xlab`，但它不包含任何颜色参数。有可能改变它吗？如何？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-01T15:27:27.783

从**ggplot2** 0.9.2 开始，语法变成了：

```
dat <- data.frame(x = 1:5,y = 1:5)
p + theme(axis.title.x = element_text(colour = "red"),
          axis.title.y = element_text(colour = "blue")) 
```

tidyverse页面是[了解](https://ggplot2.tidyverse.org/)所有选项的良好起点。

请注意，基于的旧语法`opts`已被弃用。有用于更新代码的详细[转换指南。](https://ggplot2-dev.googlegroups.com/attach/5aa16afece3d5bc6/theme0.html?gda=9XgBzEYAAABCncUW0npTUN_veVgl3inYi0oNsf4Sjxsz8g3AimkTHy2Q5nwgitdzQrQMmMK7aytx40jamwa1UURqDcgHarKEE-Ea7GxYMt0t6nY0uV5FIQ&view=1&part=4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-01T19:48:57.733

这会同时改变 x 和 y 轴：

```
theme(text=element_text(color="red")) 
```

这也改变了刻度的标签：

```
theme(text=element_text(color="red"),axis.text=element_text(color="blue")) 
```

# asp.net - 在 web.config 文件中设置重定向

> ID：10399932
> 
> 赞同：54
> 
> 时间：2012-05-01T15:25:04.213
> 
> 标签：asp.net, web-config, http-redirect

我正在尝试用更具描述性的网址重定向一些不友好的网址。这些 url`.aspx?cid=3916`以每个类别名称页面的最后一位不同的数字结尾。我希望它改为重定向到`Category/CategoryName/3916`. `web.config`我在文件中试过这个：

```
<location path="Category.aspx?cid=3916">
<system.webServer>
  <httpRedirect enabled="true" destination="http://www.site.com/Category/CategoryName/3916" httpResponseStatus="Permanent" />
</system.webServer> 
```

但由于它不仅仅以扩展名结束，因此它不起作用。有没有一种简单的方法可以让它工作？我正在使用 IIS 7.5。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-01T15:30:30.870

1.  **打开旧页面所在**目录下的web.config
***   然后为旧位置路径和新目的地添加代码，如下所示：

    ```
    <configuration>
      <location path="services.htm">
        <system.webServer>
          <httpRedirect enabled="true" destination="http://domain.com/services" httpResponseStatus="Permanent" />
        </system.webServer>
      </location>
      <location path="products.htm">
        <system.webServer>
          <httpRedirect enabled="true" destination="http://domain.com/products" httpResponseStatus="Permanent" />
        </system.webServer>
      </location>
    </configuration> 
    ```** 

 **您可以根据需要添加任意数量的位置路径。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-01T15:31:10.450

您可能希望查看[URL Rewrite 之](http://www.iis.net/download/urlrewrite)类的东西来将 URL 重写为对用户更友好的 URL，而不是使用简单的`httpRedirect`. 然后，您可以制定这样的规则：

```
<system.webServer>
  <rewrite>
    <rules>
      <rule name="Rewrite to Category">
        <match url="^Category/([_0-9a-z-]+)/([_0-9a-z-]+)" />
        <action type="Rewrite" url="category.aspx?cid={R:2}" />
      </rule>
    </rules>
  </rewrite>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-23T12:52:34.823

如果您需要在许多站点中添加 http 重定向，您可以将其用作 ac# 控制台程序：

```
 class Program
{
    static int Main(string[] args)
    {
        if (args.Length < 3)
        {
            Console.WriteLine("Please enter an argument: for example insert-redirect ./web.config http://stackoverflow.com");
            return 1;
        }

        if (args.Length == 3)
        {
            if (args[0].ToLower() == "-insert-redirect")
            {
                var path = args[1];
                var value = args[2];

                if (InsertRedirect(path, value))
                    Console.WriteLine("Redirect added.");
                return 0;
            }
        }

        Console.WriteLine("Wrong parameters.");
        return 1;

    }

    static bool InsertRedirect(string path, string value)
    {
        try
        {
            XmlDocument doc = new XmlDocument();

            doc.Load(path);

            // This should find the appSettings node (should be only one):
            XmlNode nodeAppSettings = doc.SelectSingleNode("//system.webServer");

            var existNode = nodeAppSettings.SelectSingleNode("httpRedirect");
            if (existNode != null)
                return false;

            // Create new <add> node
            XmlNode nodeNewKey = doc.CreateElement("httpRedirect");

            XmlAttribute attributeEnable = doc.CreateAttribute("enabled");
            XmlAttribute attributeDestination = doc.CreateAttribute("destination");
            //XmlAttribute attributeResponseStatus = doc.CreateAttribute("httpResponseStatus");

            // Assign values to both - the key and the value attributes:

            attributeEnable.Value = "true";
            attributeDestination.Value = value;
            //attributeResponseStatus.Value = "Permanent";

            // Add both attributes to the newly created node:
            nodeNewKey.Attributes.Append(attributeEnable);
            nodeNewKey.Attributes.Append(attributeDestination);
            //nodeNewKey.Attributes.Append(attributeResponseStatus);

            // Add the node under the 
            nodeAppSettings.AppendChild(nodeNewKey);
            doc.Save(path);

            return true;
        }
        catch (Exception e)
        {
            Console.WriteLine($"Exception adding redirect: {e.Message}");
            return false;
        }
    }
} 
```**

# javascript - w/超时？

> ID：10399938
> 
> 赞同：8
> 
> 时间：2012-05-01T15:25:30.220
> 
> 标签：javascript, html, image

我在我们的网站上有一些跟踪像素，如果他们的服务器出现故障或速度变慢，我想防止它们影响我们的用户体验。指定浏览器应尝试加载给定 img 的最长时间的最简单方法是什么 - 即尝试 100 毫秒然后放弃？（我宁愿不跟踪给定的客户，也不愿让第三方服务器上的服务器挂起影响我们的网站）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:30:15.203

`<img>`您可以使用 JavaScript插入并`setTimeout()`在 100 毫秒后将其删除。

jQuery 示例：

```
var tracker = $("<img>", { src: trackingUrl }).appendTo(document.body);
setTimeout(function() { tracker.remove(); }, 100); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:28:10.460

您应该在文档准备好时加载它们。或在最后一行（在 html 中）。这样 - 它不会损害用户体验。文档就绪也可以与 jQuery 一起使用。

但你可以使用window.load。

*通常（并非总是） - 所有脚本都应位于页面末尾。*

> 如果你想强制超时 KILL ：

创建一个`img`标签。

将`load`事件附加到 img（此函数将设置标志：已下载=1；）

设置源。

使用`setTimeout`函数你会杀死 img。

如何 ？

如果在 X MS 之后下载的 ==0 则杀死。

所以：每个加载事件（来自 IMg）都在设置一个标志（下载=1）。

你的超时功能什么都不在乎！！！在 x MS 之后，她会杀死 img - 只有在下载 ==0 的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:30:52.140

您必须使用 javascript 来执行此操作，HTML/HTTP 没有任何本机可以在页面基础上执行此操作。谷歌搜索“HTML IMG 超时”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-03T06:36:49.520

作为`img.parentNode.removeChild(img)`

并非所有人`img`都有容器。

```
var img = new Image()
img.src = '...third-party server...'
setTimeout(function() {
  img.removeAttribute('src')
}, 100) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-01T15:29:53.163

您可以在 IMG 标记中调用服务器进程。让它担心负载超时。

# java - 将 Spring 与 GWT 集成

> ID：10399943
> 
> 赞同：0
> 
> 时间：2012-05-01T15:25:54.900
> 
> 标签：java, spring, gwt

我有一个带有以下 Maven 模块的模块化 Spring 项目：持久性、服务和控制器（还有一个 Spring Web 应用程序模块）。

我想知道如何将 Spring 与 GWT 集成。我需要像[这篇文章](http://technophiliac.wordpress.com/2008/08/24/giving-gwt-a-spring-in-its-step/)那样实现 GWT 控制器吗？如果是这样，这个控制器和我现有的控制器应该都在一个单独的模块中吗？

好吧，这可能是我的一个有点抽象的问题的全部描述。如果有人可以分享相关经验，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:54:21.710

看看[RestyGWT](http://restygwt.fusesource.org/)。我们也将它与 Spring 控制器结合使用。

# jquery - 登录后 GET http://0.0.0.0:3000/assets/images/ajax-loader.gif 404（未找到）错误

> ID：10399945
> 
> 赞同：0
> 
> 时间：2012-05-01T15:26:06.413
> 
> 标签：jquery, ruby-on-rails, devise

登录后，我收到此错误：

```
GET http://0.0.0.0:3000/assets/images/ajax-loader.gif 404 (Not Found) error after login 
```

可能是因为这个，注销没有正确发生。

这是我的 github 存储库：[https ://github.com/shreedharshetty/richapp](https://github.com/shreedharshetty/richapp)

您可以使用用户名：[redacted] 和密码：[redacted] 登录。

请帮助我摆脱这个错误。

编辑***这是 Gem 中的一个错误，即将修复：

[https://github.com/tscolari/jquery-mobile-rails/pull/8](https://github.com/tscolari/jquery-mobile-rails/pull/8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:05:49.030

好吧，我能想到一种解决方案。

查看您的 gem 文件，我看到您使用

```
gem 'jquery_mobile_rails' 
```

我在 github 中搜索了这个 gem，我找到了其中的 2 个，一个是 1 年前编辑的，第二个是 16 天前编辑的。

我只能认为你使用第一个，那是旧的，但第二个说清楚的是 Rails 3.1

但同时，这两个 gem 都需要`gem 'jquery_mobile_rails'`在 Gemfile 中使用来安装它，可能是你有旧的 gem，只有这样我才能解释为什么你的图像路径错误。

```
`/assets/images/ajax-loader.gif` 
```

这是图像的路径，如果我查看 google-inspect 你在 application.css 中有这一行但在 github repo 中你没有这样的行，所以我认为这是 gem 在 application.css 中插入的一行

所以我最好下载新的 gem 并将其粘贴到 vendor/bundle 文件夹中，就像运行`bundle install --path=vendor/bundle`命令一样。

我会进一步寻找解决方案，但现在你应该看看这个`jquery_mobile_rails`gem。

ps

如果您现在的路径`/assets/images/ajax-loader.gif` 对于 rails 3.1 是错误的，您可能会尝试自己创建此路径，只需转到 root/public/ 并创建此文件夹 images 并将 ajax-loader.gif 放在应用程序应该找到的这种方式中路径..与否，但值得一试。

# r - Hmisc 的 latex(): na.blank 没有按预期工作；虚假的空列；如何在列中获取组？

> ID：10399946
> 
> 赞同：1
> 
> 时间：2012-05-01T15:26:14.620
> 
> 标签：r

我有一个名为“d”、“n”、“beta”、“family”、“alpha”和“value”的data.frame。我想创建一个带有 的 LaTeX 表`Hmisc::latex`，其中前三列包含变量“d”、“n”和“beta”，它们给出了相应的行名。其他变量（“family”、“alpha”）应显示在剩余的列中（“F1”和“F2”中的每一个——family 的元素——定义一个组；对于这两个组中的每一个，不同的alpha 的值定义列；总体而言，因此有 2 * 3 = 6 列包含相应的“值”）。这是我到目前为止所拥有的：

```
## running parameters
nn <- length(n <- c(100, 500)) # sample sizes
nd <- length(d <- c(10, 100, 1000)) # dimensions
nfamily <- length(family <- c("F1", "F2")) # families
nbeta <- length(beta <- c(0.25, 0.75)) # betas
nalpha <- length(alpha <- c(0.95, 0.99, 0.999)) # alphas

## create array containing the results
res <- array(NA, dim=c(nn, nd, nfamily, nbeta, nalpha),
             dimnames=list(n=n, d=d, family=family, beta=beta, alpha=alpha))
set.seed(1)
for(i in 1:nn){
    for(j in 1:nd){
        for(k in 1:nfamily){
            for(l in 1:nbeta){
                for(m in 1:nalpha){
                    res[i,j,k,l,m] <- i+j+k+l+m+runif(1) # some dummy values
                }
            }
        }
    }
}

## create a data.frame from the array of values
df <- as.data.frame.table(res, responseName="value")

## sort it according to the variables you want to display in the rows and bring the
## corresponding columns to the front/beginning
row.vars <- c("d", "n", "beta") # specify row variables
df. <- df[with(df, do.call(order, sapply(row.vars, as.name))), # sort rows
          c(row.vars, setdiff(names(df), row.vars))] # sort colums

## format numbers, set unwanted row names to NA
df.. <- df.
df..$value <- formatC(df.$value, digits=3, format="f")
names2NA <- function(x) {x[c(FALSE, x[-1]==x[-length(x)])] <- NA; x} # arg = TRUE <=> entry equal to previous one
for(j in 1:length(row.vars)) df..[, row.vars[j]] <- names2NA(df..[, row.vars[j]])

## now use Hmisc's latex()
require(Hmisc)
latex(df.., title="title",
      file="",
      label="tab:res",
      cgroup=c("family", "alpha"),
      na.blank=TRUE, # use blanks rather than NA => not working (see first columns)!
      rowname=NULL,
      colheads=c("Family", "alpha"), # character() specifying column headings
      dcolumn=TRUE,
      booktabs=TRUE,
      caption="My table containing all results.",
      caption.loc="bottom",
      collabel.just=rep("c", 2),
      where="htbp",
      center="centering",
      type="verbatim",
      helvetica=FALSE
      ) 
```

以下是我的问题：

1）为什么前三列中的 NA 没有被空格替换（应该是这种情况`na.blank=TRUE`）？

2) 为什么要插入一个空的第四列？

3) 如何在上述列中获取变量“family”和“alpha”作为组？

**更新**

同时，我设法将 data.frame 转换为矩阵。我有类似的问题，我在这里发布（因为它更具体）：[Hmisc：如何使用latex（）对列变量进行分组？](https://stackoverflow.com/questions/10408869/hmisc-how-to-group-column-variables-with-latex)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T13:30:13.370

我只有问题 1 的答案。

显然 na.blank=TRUE 仅适用于数字列，而不适用于字符或因子。这似乎没有在任何地方记录，但我在这个非常简单的例子中发现了。

```
x <- data.frame(c(1, NA, NA), c("cow", NA, NA), factor(c("chicken", NA, NA)))
names(x) <- c("numeric", "character", "factor")
library(Hmisc)
latex(x, file = '', na.blank = TRUE) 
```

如果您运行代码，您会看到数字列中的 NA 变为空白，而其他列中的 NA 变为“NA”。我不知道这种行为的原因。然而，通过在运行 latex 命令之前将字符和因子列中的 NA 替换为 "" 很容易解决。

在您的代码中，前几列是因素，因此上述适用。

# vim - Vim - 恢复文件后缩进和语法高亮被破坏

> ID：10399950
> 
> 赞同：5
> 
> 时间：2012-05-01T15:26:34.383
> 
> 标签：vim, syntax, highlight, recover

我正在用 vim 编辑一个文件。我启动另一个vim来编辑同一个文件，它说/tmp/file.swp退出，按“R”恢复它。我选择了康复。但在那之后，语法高亮对该文件不起作用（其他文件仍然可以）。我尝试了 :syntax on 和一些命令，但没有奏效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T15:30:09.947

您可以尝试使用以下命令来指定类型类型。例如对于 c 文件：

```
:set filetype=c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-24T07:57:42.167

我只是以一种简单的方式解决它。

我找到 ~/.vim/view/ 的文件夹并删除有关我刚刚恢复的 py 文件的记录...

```
cd ~/.vim/view && ls -alh | grep filename_1 | awk '{print $9}' | xargs rm 
```

你可以随心所欲地改变它......只是一个演示。

:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-17T09:28:43.447

突然崩溃后，我不得不恢复 vim 缓冲区。虽然文件已正确恢复，但我不能对语法高亮说同样的话。（我很确定这与语言无关，但为了完整起见，我的文件是一个 python 脚本。）

据我所知，此问题通常是由于会话（[如此类似问题](https://stackoverflow.com/questions/9281438/syntax-highlighting-doesnt-work-after-restore-a-previous-vim-session)中所述）或错误加载的语法突出显示所致。但是[vim 视图](http://vimdoc.sourceforge.net/htmldoc/starting.html#views-sessions)也会影响文件在编辑器中的显示方式。对于像我这样倾向于[自动加载先前存储的视图的](http://vim.wikia.com/wiki/Make_views_automatic)人来说尤其如此。根据这种预感**，我删除了存储的视图文件**并解决了问题。

请注意，这个解决方案显然是有代价*的：文件将以全新的视图打开*，即 vim 不会记住以前的布局（光标位置、打开/关闭的文件夹等）。这很明显，但我想我还是会提到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:30:08.880

可能需要为正确的语法设置文件类型：

```
" C syntax:
:set ft=c

" Java syntax:
:set ft=java

" Python syntax:
:set ft=py

" ... etc. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T12:11:12.067

`:e %`您可以通过键入which 编辑当前文件来重新运行缓冲区打开进程以再次运行所有自动命令。这将使所有 bufread* 自动命令运行，您将恢复所有内容。我相信它们是故意禁用的，以防恢复的文件中有问题，并且自定义自动命令可能会对损坏的文件造成不良影响。

# objective-c - Objective-C - 滚动视图事件

> ID：10399952
> 
> 赞同：2
> 
> 时间：2012-05-01T15:26:36.170
> 
> 标签：objective-c, ios, uiscrollview

我找到了一些可以完全解决我的问题的答案，但似乎我错过了一些步骤。我只是想拦截 ScrollView 的“ViewDidBlablabla”事件，所以我创建了一个自定义 UIScrollView 类。

# MyScrollView.m

```
#import "MyScrollView.h"

@implementation MyScrollView

- (id)initWithFrame:(CGRect)frame{
    NSLog(@"initWithFrame");
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

-(void)scrollViewWillBeginDragging:(UIScrollView*)scrollView{
    NSLog(@"scrollViewWillBeginDragging");
    //scrollView.contentOffset
}

-(void)scrollViewDidScroll:(UIScrollView*)scrollView{
    NSLog(@"scrollViewDidScroll");
}

-(void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView{
    NSLog(@"scrollViewDidEndScrollingAnimation");
}

@end 
```

# MyScrollView.h

```
#import <UIKit/UIKit.h>

@interface MyScrollView : UIScrollView <UIScrollViewDelegate>

@end 
```

当我分配我的自定义滚动视图时，我确实收到了控制台消息“initWithFrame”，但无法访问其他事件。我错过了什么？

如果您需要其他一些代码，请随时询问，但由于我使用了自定义的“initWithFrame”方法，我想错误应该在这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:30:37.173

尝试将您的视图设置为自身的代表：

```
if (self) {
    // Initialization code
    self.delegate = self;
} 
```

从技术上讲，您不需要继承`UIScrollView`来响应滚动事件：将 设置`delegate`为`<UIScrollViewDelegate>`.

此外，[该`scrollViewDidEndScrollingAnimation:`方法已经消失了大约两年](https://stackoverflow.com/q/546095/335858)，因此不会在现代 iOS 安装上调用它。

# iphone - iPhone iOS 以编程方式生成星形、旭日形或多边形 UIBezierPath

> ID：10399958
> 
> 赞同：7
> 
> 时间：2012-05-01T15:26:51.730
> 
> 标签：iphone, objective-c, quartz-graphics, graphic, uibezierpath

我正在寻找一种使用 UIBezierPath 以编程方式创建星星、旭日形和其他“尖刺”效果的方法。

![星爆图像](../Images/ad2d83a4ec5566fef2eb91120a9ab4c7.png)

```
UIBezierPath *sunbeamsPath = [UIBezierPath bezierPath];
[sunbeamsPath moveToPoint: CGPointMake(x, y)]; 
```

是否有任何算法可以以编程方式为类似形状的旭日形生成点，而没有路径重叠？

我也对像下面这样的不规则形状的旭日形图案感兴趣：

![不规则的旭日形](../Images/2935f9bfd96065881aa4c4c9818b0701.png)

我想这样的算法会采用一定数量的光线，然后将圆大致分成若干段，并按顺时针方向为该段生成点。像我描述的那样的算法已经存在还是我必须自己写一个？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T22:38:51.443

我知道这很老，但我自己对这个问题的第一部分很好奇，并且离开 jrturton 的帖子，我创建了一个自定义 UIView，它从视图中心生成一个 UIBezierPath。甚至动画它旋转以获得奖励积分。结果如下：

![在此处输入图像描述](../Images/1c82748b7bc5508c43f6f87b4487caa8.png)

我使用的代码在这里：

```
- (void)drawRect:(CGRect)rect {
CGFloat radius = rect.size.width/2.0f;

[self.fillColor setFill];
[self.strokeColor setStroke];

UIBezierPath *bezierPath = [UIBezierPath bezierPath];
CGPoint centerPoint = CGPointMake(rect.origin.x + radius, rect.origin.y + radius);

CGPoint thisPoint = CGPointMake(centerPoint.x + radius, centerPoint.y);
[bezierPath moveToPoint:centerPoint];

CGFloat thisAngle = 0.0f;
CGFloat sliceDegrees = 360.0f / self.beams / 2.0f;

for (int i = 0; i < self.beams; i++) {

    CGFloat x = radius * cosf(DEGREES_TO_RADIANS(thisAngle + sliceDegrees)) + centerPoint.x;
    CGFloat y = radius * sinf(DEGREES_TO_RADIANS(thisAngle + sliceDegrees)) + centerPoint.y;
    thisPoint = CGPointMake(x, y);
    [bezierPath addLineToPoint:thisPoint];
    thisAngle += sliceDegrees;

    CGFloat x2 = radius * cosf(DEGREES_TO_RADIANS(thisAngle + sliceDegrees)) + centerPoint.x;
    CGFloat y2 = radius * sinf(DEGREES_TO_RADIANS(thisAngle + sliceDegrees)) + centerPoint.y;
    thisPoint = CGPointMake(x2, y2);
    [bezierPath addLineToPoint:thisPoint];
    [bezierPath addLineToPoint:centerPoint];
    thisAngle += sliceDegrees;

}

[bezierPath closePath];

bezierPath.lineWidth = 1;
[bezierPath fill];
[bezierPath stroke]; 
```

}

您可以在此处下载示例项目：

[https://github.com/meekapps/Sunburst](https://github.com/meekapps/Sunburst)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:54:25.423

我不知道创建这些的算法，但我确实有一些建议 - 创建你的贝塞尔路径，使得 (0,0) 是旭日形的中心，然后定义你需要绘制一个“光束”的多少点你的旭日形向上，回到 (0,0)

然后，对于任意数量的光束，执行一个循环：对您的光束点 (CGPointApplyTransform) 应用旋转变换（2 pi / 光束数），并将它们添加到路径中。

完成后，您可以平移和缩放绘图路径。

我最近使用类似的过程来绘制星形多边形，非常简单。这个想法归功于[Rob Napier 的](https://stackoverflow.com/users/97337/rob-napier)书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-26T03:16:10.300

**Swift 版本**

```
import UIKit

extension Int {
    var degreesToRadians: Double { return Double(self) * .pi / 180 }
    var radiansToDegrees: Double { return Double(self) * 180 / .pi }
}
extension FloatingPoint {
    var degreesToRadians: Self { return self * .pi / 180 }
    var radiansToDegrees: Self { return self * 180 / .pi }
}

class SunBurstView: UIView {

    override func draw(_ rect: CGRect) {
        let radius: CGFloat = rect.size.width / 2.0
        UIColor.red.setFill()
        UIColor.blue.setStroke()
        let bezierPath = UIBezierPath()
        let centerPoint = CGPoint(x: rect.origin.x + radius, y: rect.origin.y + radius)
        var thisPoint = CGPoint(x: centerPoint.x + radius, y: centerPoint.y)
        bezierPath.move(to: centerPoint)
        var thisAngle: CGFloat = 0.0
        let sliceDegrees: CGFloat = 360.0 / self.beams / 2.0

        for _ in 0..<self.beams {
            let x = radius * CGFloat(cosf(Float((thisAngle + sliceDegrees).degreesToRadians))) + centerPoint.x
            let y = radius * CGFloat(sinf(Float((thisAngle + sliceDegrees).degreesToRadians))) + centerPoint.y
            thisPoint = CGPoint(x: x, y: y)
            bezierPath.addLine(to: thisPoint)
            thisAngle += sliceDegrees
            let x2 = radius * CGFloat(cosf(Float((thisAngle + sliceDegrees).degreesToRadians))) + centerPoint.x
            let y2 = radius * CGFloat(sinf(Float((thisAngle + sliceDegrees).degreesToRadians))) + centerPoint.y
            thisPoint = CGPoint(x: x2, y: y2)
            bezierPath.addLine(to: thisPoint)
            bezierPath.addLine(to: centerPoint)
            thisAngle += sliceDegrees
        }
        bezierPath.close()
        bezierPath.lineWidth = 1
        bezierPath.fill()
        bezierPath.stroke()
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-12T21:09:26.300

我注意到 Swift 版本没有为我编译或占用足够的屏幕，所以这是 Reinier 在 Swift 4 中针对矩形视图调整的答案。

```
extension Int {
    var degreesToRadians: Double { return Double(self) * .pi / 180 }
    var radiansToDegrees: Double { return Double(self) * 180 / .pi }
}

extension FloatingPoint {
    var degreesToRadians: Self { return self * .pi / 180 }
    var radiansToDegrees: Self { return self * 180 / .pi }
}

class SunBurstView: UIView {

    var beams: CGFloat = 20

    override func draw(_ rect: CGRect) {
        self.clipsToBounds = false
        self.layer.masksToBounds = false
        let radius: CGFloat = rect.size.width * 1.5
        UIColor.orange.withAlphaComponent(0.3).setFill()
        UIColor.clear.setStroke()
        let bezierPath = UIBezierPath()
        let centerPoint = CGPoint(x: rect.origin.x + (radius / 3), y: rect.origin.y + (radius / 1.5))
        var thisPoint = CGPoint(x: centerPoint.x + radius, y: centerPoint.y)

        bezierPath.move(to: centerPoint)
        var thisAngle: CGFloat = 0.0
        let sliceDegrees: CGFloat = 360.0 / self.beams / 2.0

        for _ in 0...Int(beams) {
            let x = radius * CGFloat(cosf(Float((thisAngle + sliceDegrees).degreesToRadians))) + centerPoint.x
            let y = radius * CGFloat(sinf(Float((thisAngle + sliceDegrees).degreesToRadians))) + centerPoint.y
            thisPoint = CGPoint(x: x, y: y)
            bezierPath.addLine(to: thisPoint)
            thisAngle += sliceDegrees
            let x2 = radius * CGFloat(cosf(Float((thisAngle + sliceDegrees).degreesToRadians))) + centerPoint.x
            let y2 = radius * CGFloat(sinf(Float((thisAngle + sliceDegrees).degreesToRadians))) + centerPoint.y
            thisPoint = CGPoint(x: x2, y: y2)
            bezierPath.addLine(to: thisPoint)
            bezierPath.addLine(to: centerPoint)
            thisAngle += sliceDegrees
        }
        bezierPath.close()
        bezierPath.lineWidth = 1
        bezierPath.fill()
        bezierPath.stroke()
    }

} 
```

[![在此处输入图像描述](../Images/96d8a91832236a489c1fcd2ca9c1f516.png)](https://i.stack.imgur.com/oxDYm.png)

# php - 在 PHP 中发送带有链接和参数的邮件

> ID：10399959
> 
> 赞同：0
> 
> 时间：2012-05-01T15:26:52.270
> 
> 标签：php, parameters, gmail, sendmail

我在使用 php 发送邮件时遇到了一个奇怪的问题，这是我的代码：

```
$link = "http://www.somelink/verify.php?id=".$uniqID;

$message ="<html><head></head><body><p>Full Name:".$data[0]." ".$data[1]."</p>";
$message .="<p>Flight Number: ".$data[4]."</p>";
$message .="<p>The Ride: ".$curPlace." to ".$data[5]."</p>";
$message .="<p>Number of Passengers: ".$data[3]."</p>";
$message .="<p>Date:".$data[6]." time:".$data[7]."</p>";
$message .="<p>The price: ".$data[8]."</p>";
$message .="<p>To verify the reservation press this <a href=".$link.">link</a></p></body></html>";

$headers = 'From: my@email.com' . "\r\n" .'Reply-To: some@email.com';
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "Sensitivity: Personal"."\r\n";
$sent=mail($data[2],"Taxi Reservation",$message, $headers);
if($sent){
    echo "Message was sent to ".$data[2];
}
else{
    echo "Message was not sent";
} 
```

问题出在 Gmail。如果我按原样发送，我会收到成功消息，但在我的 gmail 中什么也没有，但确实进入了另一个非 gmail 帐户。但！如果我从这一行中删除一个标签： `$message .="<p>To verify the reservation press this <a href=".$link.">link</a></p></body></html>";` 我确实在 Gmail 中收到了邮件。所以我不明白出了什么问题。什么会导致这个问题？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:40:14.897

如果您的电子邮件没有到达 Gmail，但发送同一电子邮件的相同代码到达了不同的帐户，我怀疑问题在于 Gmail 正在查看您的电子邮件并将其归类为垃圾邮件 - 您是否检查过它是否已消失进入您的垃圾邮件文件夹而不是您的收件箱？

Gmail 有一套规则来识别他们认为是垃圾邮件的内容——大概包括链接就足以将您的电子邮件推入垃圾邮件类别。

# windows - 如何在 MS windows xp 命令提示符下编写参数无穷大？

> ID：10399961
> 
> 赞同：0
> 
> 时间：2012-05-01T15:27:00.867
> 
> 标签：windows, command-line

有一个在 windows xp 命令提示符下执行的二进制 exe。需要的一个参数是无穷大（∞）。我的系统是win xp 5.1.26（在命令提示符窗口中）。如何写？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:30:21.167

一种方法是将无穷大符号复制到剪贴板，右键单击命令提示符窗口并选择“粘贴”。如果这不起作用，请检查设置。

或者，[替代代码](http://usefulshortcuts.com/alt-codes/maths-alt-codes.php)！

# c++ - Antlr 和链接失败

> ID：10399964
> 
> 赞同：3
> 
> 时间：2012-05-01T15:27:16.107
> 
> 标签：c++, antlr

我正在使用 ANTLR 和 Visual Studio 2011 beta，在编译时出现以下错误...：/我重新编译了 antlr.lib，我尝试了一切...可能是什么？我也用 antlr 2.7.5 测试过...

```
antlr.lib(TokenRefCount.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(TokenRefCount.obj) : warning LNK4075: ignoring '/EDITANDCONTINUE' due to '/SAFESEH' specification
antlr.lib(BitSet.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(RecognitionException.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(MismatchedCharException.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(CharBuffer.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(CharScanner.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(NoViableAltForCharException.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(Token.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(ASTRefCount.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(BaseAST.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(TokenBuffer.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(MismatchedTokenException.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(ASTFactory.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(Parser.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(LLkParser.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(NoViableAltException.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(CommonAST.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(String.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(InputBuffer.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
antlr.lib(CommonToken.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MDd_DynamicDebug' doesn't match value 'MTd_StaticDebug' in tard_lexer.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "void __cdecl std::_Debug_message(wchar_t const *,wchar_t const *,unsigned int)" (?_Debug_message@std@@YAXPB_W0I@Z) already defined in libcpmtd.lib(stdthrow.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: __thiscall std::_Container_base12::_Container_base12(void)" (??0_Container_base12@std@@QAE@XZ) already defined in tard_lexer.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: __thiscall std::_Container_base12::~_Container_base12(void)" (??1_Container_base12@std@@QAE@XZ) already defined in tard_lexer.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: void __thiscall std::_Container_base12::_Orphan_all(void)" (?_Orphan_all@_Container_base12@std@@QAEXXZ) already defined in tard_lexer.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "void __cdecl std::_Xbad_alloc(void)" (?_Xbad_alloc@std@@YAXXZ) already defined in libcpmtd.lib(xthrow.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "void __cdecl std::_Xlength_error(char const *)" (?_Xlength_error@std@@YAXPBD@Z) already defined in libcpmtd.lib(xthrow.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "void __cdecl std::_Xout_of_range(char const *)" (?_Xout_of_range@std@@YAXPBD@Z) already defined in libcpmtd.lib(xthrow.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: __thiscall std::locale::id::id(unsigned int)" (??0id@locale@std@@QAE@I@Z) already defined in tard_lexer.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "char const * __cdecl std::_Syserror_map(int)" (?_Syserror_map@std@@YAPBDH@Z) already defined in libcpmtd.lib(syserror.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "char const * __cdecl std::_Winerror_map(int)" (?_Winerror_map@std@@YAPBDH@Z) already defined in libcpmtd.lib(syserror.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: __thiscall std::_Lockit::_Lockit(int)" (??0_Lockit@std@@QAE@H@Z) already defined in libcpmtd.lib(xlock.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: __thiscall std::_Lockit::~_Lockit(void)" (??1_Lockit@std@@QAE@XZ) already defined in libcpmtd.lib(xlock.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: struct std::_Iterator_base12 * * __thiscall std::_Container_base12::_Getpfirst(void)const " (?_Getpfirst@_Container_base12@std@@QBEPAPAU_Iterator_base12@2@XZ) already defined in tard_lexer.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "bool __cdecl std::uncaught_exception(void)" (?uncaught_exception@std@@YA_NXZ) already defined in libcpmtd.lib(uncaught.obj)
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: bool __thiscall std::ios_base::good(void)const " (?good@ios_base@std@@QBE_NXZ) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: int __thiscall std::ios_base::flags(void)const " (?flags@ios_base@std@@QBEHXZ) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: __int64 __thiscall std::ios_base::width(void)const " (?width@ios_base@std@@QBE_JXZ) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: __int64 __thiscall std::ios_base::width(__int64)" (?width@ios_base@std@@QAE_J_J@Z) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: int __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputc(char)" (?sputc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAEHD@Z) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputn(char const *,__int64)" (?sputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAE_JPBD_J@Z) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: void __thiscall std::basic_ios<char,struct std::char_traits<char> >::setstate(int,bool)" (?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > * __thiscall std::basic_ios<char,struct std::char_traits<char> >::tie(void)const " (?tie@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_ostream@DU?$char_traits@D@std@@@2@XZ) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: class std::basic_streambuf<char,struct std::char_traits<char> > * __thiscall std::basic_ios<char,struct std::char_traits<char> >::rdbuf(void)const " (?rdbuf@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_streambuf@DU?$char_traits@D@std@@@2@XZ) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: char __thiscall std::basic_ios<char,struct std::char_traits<char> >::fill(void)const " (?fill@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEDXZ) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: void __thiscall std::basic_ostream<char,struct std::char_traits<char> >::_Osfx(void)" (?_Osfx@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEXXZ) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::operator<<(class std::basic_ostream<char,struct std::char_traits<char> > & (__cdecl*)(class std::basic_ostream<char,struct std::char_traits<char> > &))" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@P6AAAV01@AAV01@@Z@Z) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::operator<<(int)" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@H@Z) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::flush(void)" (?flush@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV12@XZ) already defined in tard_parser.obj
msvcprtd.lib(MSVCP110D.dll) : error LNK2005: "class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl std::endl(class std::basic_ostream<char,struct std::char_traits<char> > &)" (?endl@std@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@1@AAV21@@Z) already defined in tard_parser.obj
MSVCRTD.lib(MSVCR110D.dll) : error LNK2005: _memmove already defined in LIBCMTD.lib(memmove.obj)
MSVCRTD.lib(MSVCR110D.dll) : error LNK2005: __invalid_parameter already defined in LIBCMTD.lib(invarg.obj)
MSVCRTD.lib(MSVCR110D.dll) : error LNK2005: __CrtDbgReportW already defined in LIBCMTD.lib(dbgrptw.obj)
MSVCRTD.lib(MSVCR110D.dll) : error LNK2005: _tolower already defined in LIBCMTD.lib(tolower.obj)
MSVCRTD.lib(MSVCR110D.dll) : error LNK2005: _sprintf already defined in LIBCMTD.lib(sprintf.obj)
MSVCRTD.lib(MSVCR110D.dll) : error LNK2005: _isprint already defined in LIBCMTD.lib(_ctype.obj)
MSVCRTD.lib(ti_inst.obj) : error LNK2005: "private: __thiscall type_info::type_info(class type_info const &)" (??0type_info@@AAE@ABV0@@Z) already defined in LIBCMTD.lib(typinfo.obj)
MSVCRTD.lib(ti_inst.obj) : error LNK2005: "private: class type_info & __thiscall type_info::operator=(class type_info const &)" (??4type_info@@AAEAAV0@ABV0@@Z) already defined in LIBCMTD.lib(typinfo.obj)
LINK : warning LNK4098: defaultlib 'MSVCRTD' conflicts with use of other libs; use /NODEFAULTLIB:library
../../dist/debug\test_vc_7_1.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:46:38.777

您的项目运行时库是什么？我认为您包含一些不应该在您的运行时选项中使用的默认库。[只需按照本文](http://msdn.microsoft.com/en-us/library/6wtdswk0%28v=vs.71%29.aspx)所述设置您的库和运行时选项，然后根据表格忽略其余部分。

# ios - iOS 中的区域监控：didEnterRegion 触发但 didExitRegion 不在模拟器中

> ID：10399967
> 
> 赞同：1
> 
> 时间：2012-05-01T15:27:20.983
> 
> 标签：ios, cllocationmanager

我正在使用 CLLocationManager 来监控 iOS 中的区域。我以正常方式设置委托：

```
self.locationManager = [[[CLLocationManager alloc] init] autorelease];
self.locationManager.delegate = self; 
```

并实现几个委托功能，包括：

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
{
   NSLog(@"GeoFence: didEnterRegion");    
}

- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region 
{
    NSLog(@"GeoFence: didExitRegion");    
} 
```

然后我开始监视一个区域：

```
CLLocationCoordinate2D coordinates = CLLocationCoordinate2DMake(lat, lng);     
CLRegion *grRegion = [[CLRegion alloc] initCircularRegionWithCenter:coordinates radius:radius identifier:[NSString stringWithFormat:@"grRegion%i", 1]];

CLLocationAccuracy acc = kCLLocationAccuracyNearestTenMeters;
[self.locationManager startMonitoringForRegion:grRegion desiredAccuracy:acc]; 
```

为 lat (51.116261)、lng (-0.85300) 和 radius (200) 设置适当的值。在 iPhone 5.1 模拟器中构建并运行应用程序后，我使用 Xcode 4.3 中的位置注入工具在远处位置和目标位置之间移动并再次返回。在此过程下，didEnterRegion 事件正确触发，但 didExitRegion 永远不会触发。我还收到了其他委托回调，例如 didUpdateToLocation。我改变了模拟动作的模式，使用了模拟器的位置设置工具而不是 Xcode 的，并尝试了在装有 iOS 5.1 的 iPhone 4S 上运行应用程序的相同测试。所有测试都有相同的结果。

我已确保按照其他线程中的建议启用了 WiFi，并徒劳地查看了有关相关主题的其他问题。关于为什么其中一个区域转换事件会触发，而另一个不会触发的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:39:34.687

我在 5.1 中遇到了同样的问题。我向苹果公司提交了一个雷达作为一个错误。它会触发第一个事件，进或出，但之后没有其他事件。

据我所知，这个问题已经在 iOS 6 测试版中得到解决。因此，请等待 iOS 6 上线时解决。

雷达：11715223

# php - 在extjs中查询mysql数据库

> ID：10399972
> 
> 赞同：0
> 
> 时间：2012-05-01T15:27:47.783
> 
> 标签：php, mysql, database, html, extjs

我们正在开发一个 extjs 应用程序，它通过 php 和 mysql 从数据库中检索数据。我们看到这是可能的，但是我们对使用 extjs 访问 mysql 数据库的其他可能性感到好奇。

事实上，我们不确定这种老派的方式是否是在 extjs 中有效地做到这一点的方式。

那么 extjs 还有其他可用的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:56:15.807

可以使用 ExtJS 服务器端。您可能需要使用 Node.js……顺便说一下，有适用于 Node 的 MySQL 驱动程序。

这是一个在后端使用 ExtJS 模型和 Node.js 的项目。这可能会帮助您了解可能的情况。

[https://github.com/storminwalker/node-extjs](https://github.com/storminwalker/node-extjs)

# c++ - GDB C++ - 在查看核心转储时检查 STL 容器？

> ID：10399973
> 
> 赞同：4
> 
> 时间：2012-05-01T15:27:55.860
> 
> 标签：c++, stl, gdb, coredump

我正在 gdb 中调试我的程序（事后）的核心转储。我打开它：gdb [program_name] [core_name]

但是，当我尝试检查 STL 向量时，例如 print vec->size() 或 print vec->at(0)

我得到错误

> “如果没有调试过程，您将无法做到这一点”

我只是想检查这些容器的内容和大小。有没有办法将虚拟进程附加到核心转储 gdb 检查，以便我可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:42:42.560

打印向量：

```
(gdb) print *vec 
```

然后熟悉实现向量的内部结构并打印原始缓冲区。通常称为“_M_buffer”或类似的名称。根据您的完成方式，缓冲区可能位于其中的内部对象。

# x86 - 以下汇编指令添加 -8(%rbp), %xmm0 做什么？

> ID：10399978
> 
> 赞同：8
> 
> 时间：2012-05-01T15:28:10.593
> 
> 标签：x86, x86-64, sse2, assembly, memory-access

我试图弄清楚汇编指令实际上做了什么

```
addsd   -8(%rbp), %xmm0 
```

我知道这是带有 SSE2 的 x86-64 机器上的浮点加法。另外，我知道 %xmm0 是一个寄存器。但是，我不确定 -8(%rbp) 是什么意思。手册对此有点混乱。

基本上，问题是，-8(%rbp) 是否意味着它是从寄存器中获取一个值（可能是 rbp 的最后 8 个字节），还是从内存中获取一个值（从 -8 偏移的浮点值rbp 中包含的地址）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T15:35:28.887

你的第二个猜测是正确的。它正在访问`-8`从 address 偏移的字节处的值`rbp`。

`double`假设 AT&T 语法，该指令从地址加载一个 8 字节`rbp - 8`，并将其添加到`xmm0`.

# excel - 如何在for语句中为行选择列值？

> ID：10399980
> 
> 赞同：2
> 
> 时间：2012-05-01T15:28:18.720
> 
> 标签：excel, excel-2010, vba

感谢您过去提出我的 n00bish 问题，我还有另一个问题，我对此进行了广泛的研究，但没有找到答案。

我正在尝试遍历表中的行并选择某一列的值，此时我想要对该值做的就是将它放在 MsgBox 中，但我的尝试一再失败。

```
Dim id As Range
Dim trtype As Range

set id = Activesheet.Range("Table1[Column1]")

For Each r In id
    r.Select
    Set trtype = .Range(Cells(.ActiveRow, "Column5"))
    MsgBox trtype.Value
Next r 
```

`trtype = .Range(Cells(.ActiveRow, "Column5")`这将返回“类型不匹配”，并突出显示该行 。

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:40:05.737

您错过了该行中的 SET 一词：

```
trtype = .Range(Cells(.ActiveRow, "Column5")) 
```

trtype 是一个对象变量（即指向内置 Excel 对象的变量）。VBA 规则是您必须使用 SET 来分配它。

多年来，这是我最常见的 VBA 错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T23:43:23.530

我通过执行以下操作使其工作：

```
For Each r In id
    r.Select
    trtype = Selection.Text
    MsgBox trtype
Next r 
```

感谢您让我在正确的轨道上找到关于 set 的答案，这让我开始讨论何时使用 set 以及发现它仅适用于对象并且字符串必须设置为`.Text`Not`.Value`

# c# - 重负载应用程序冻结

> ID：10399981
> 
> 赞同：2
> 
> 时间：2012-05-01T15:28:22.087
> 
> 标签：c#, .net, multithreading, event-handling

我们有一个客户端-服务器 C# 应用程序，当我们使用一些脚本在 UI 中创建 1000 种或更多类型的对象时，它会冻结，而不是单独在 UI 中创建它。

我们为某些事件使用了很多事件处理程序，但据我了解，所有线程（UI 和后台）和事件处理程序都在正确管理。然后我们的客户端应用程序也会冻结。我们不知道它背后的确切原因是什么。高峰时间挂起应用程序占用了大约 16 个线程。任务管理器报告它占用了超过 90% 的 CPU 时间。

谁能告诉我背后的原因

```
 [STAThread]
    static void Main()
    {
        try
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.DoEvents();
            Application.Run(new Test());
        } 
```

**更新**

我如何将延迟加载应用到 Treeview、Listview 和 propertygrid。除了这些方法之外，我还使用了 beginupdate、endupdate、双缓冲？

**更新**

高 CPU 使用率是什么意思，我的应用程序 exe 挂在 13 个线程上，在某些地方我听说如果使用`ThreadPriority.Lowest`它会降低 CPU 使用率，它还能工作吗？我不知道在哪里正确使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:52:56.663

听起来您需要某种延迟加载技术来在用户向下滚动表单时按需加载控件。一次加载这么多控件将不可避免地锁定应用程序。

本文提供了一些关于如何提高 winform 应用程序性能的好技巧：

*   [提高 Windows 窗体应用程序性能的实用技巧](http://msdn.microsoft.com/en-us/magazine/cc163630.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:00:38.737

Treeviews 和 Listviews 本身效率不高，并且没有添加大量逻辑。如果您没有时间优化它们，您可能需要查看 3rd 方解决方案，例如 AMAZING 开源 ObjectListView。

它有几种处理特定情况的方式，例如处理数百万条记录的 FastObjectListView 或处理层次结构的 TreeListView！

掌握它确实需要一些努力，但远不及将 Treeviews 和 Listviews 制作成..以及 ObjectListViews 所需的东西：D

[http://objectlistview.sourceforge.net](http://objectlistview.sourceforge.net)

[http://objectlistview.sourceforge.net/cs/recipes.html#what-flavour-of-objectlistview-do-i-want-to-use](http://objectlistview.sourceforge.net/cs/recipes.html#what-flavour-of-objectlistview-do-i-want-to-use)

[http://objectlistview.sourceforge.net/cs/recipes.html](http://objectlistview.sourceforge.net/cs/recipes.html)

[http://objectlistview.sourceforge.net/cs/gettingStarted.html](http://objectlistview.sourceforge.net/cs/gettingStarted.html)

我自己在几个项目中使用它并取得了巨大的成功！！

干杯，

# django - 一段时间后，来自 webapp 的 Paramiko sftp.open 调用失败

> ID：10399984
> 
> 赞同：1
> 
> 时间：2012-05-01T15:28:31.717
> 
> 标签：django, paramiko

我在 django 应用程序中使用 paramiko 将上传的文件移动到单独的资产服务器。这一切都可以正常工作一段时间（几个小时左右？），但随后它开始在 sftp.open 调用上产生 EOFErrors。以下是生成的 2 个回溯：

```
storages/backends/sftpstorage.py in _read

        return self.sftp.open(remote_path, 'rb')

paramiko/sftp_client.py in open

        t, msg = self._request(CMD_OPEN, filename, imode, attrblock)

paramiko/sftp_client.py in _request

        num = self._async_request(type(None), t, *arg)

paramiko/sftp_client.py in _async_request

            self._lock.release()

paramiko/sftp.py in _send_packet

        self._write_all(out)

paramiko/sftp.py in _write_all

                raise EOFError() 
```

和：

```
django/db/models/fields/files.py in save

        self.name = self.storage.save(name, content)

django/core/files/storage.py in save

        name = self.get_available_name(name)

django/core/files/storage.py in get_available_name

        while self.exists(name):

generic/storage.py in exists

                    raise

storages/backends/sftpstorage.py in exists

            return False

paramiko/sftp_client.py in stat

        t, msg = self._request(CMD_STAT, path)

paramiko/sftp_client.py in _request

        num = self._async_request(type(None), t, *arg)

paramiko/sftp_client.py in _async_request

            self._lock.release()

paramiko/sftp.py in _send_packet

        self._write_all(out)

paramiko/sftp.py in _write_all

                raise EOFError() 
```

因此，在替换照片以及仅保存项目时都会发生这种情况，而照片保持不变。`exists`这是由于拨打电话的事实。

此外，我使用 django-imagekit 进行图像缩放，并使用 django-storages 的 sftpstorage 将文件存储在远程机器上。

奇怪的是，这可以正常工作一段时间，但随后停止工作。通过触摸 wsgi 文件重新启动 mod_wsgi 使其再次工作。这可能是什么原因？可能是一些 ssh 会话重用不起作用吗？

# jquery - 检测浏览器后退按钮按下 - Jquery Mobile

> ID：10399985
> 
> 赞同：4
> 
> 时间：2012-05-01T15:28:39.173
> 
> 标签：jquery, jquery-mobile

是否可以使用 Jquery/Jquery mobile 检测浏览器后退按钮的点击？

我有一个小测验应用程序 - 如果用户在玩游戏的中途单击手机后退按钮，我需要重置变量。

谢谢你的时间！

干杯保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:30:37.363

没有。该页面无权访问浏览器。这将是一个巨大的安全风险。您可以向页面添加 onunload 事件，但我真的不推荐此操作（请）。

# linux - 如果我安装了 SIGCHLD 处理程序，在特定 pid 上的 *blocking* 等待仍然有效吗？

> ID：10399987
> 
> 赞同：5
> 
> 时间：2012-05-01T15:28:53.267
> 
> 标签：linux, macos, perl, unix

我有一些东西使用一堆异步分叉来完成它的工作（在一个工具包下面）。

在特定的代码区域中，我正在分叉，然后对子进程进行阻塞等待。

SIGCHLD 处理程序是否会在阻塞等待看到它之前吞噬信号，让我可能挂起，或者等待总是会得到一些东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:35:22.990

处理程序在`SIGCHLD`子进程退出的事件（边缘）上被触发。阻塞调用`waitpid()`将等待该特定子进程的条件（级别）不再存在。

当进程退出时，a`SIGCHLD`将被传递，其处理程序将正常执行。如果该进程发生`waitpid()`阻塞，则无论是否存在信号处理程序，它都会正常返回。

# mysql - 如何根据包含 ascii 代码 0x02 的字符串选择行？

> ID：10399992
> 
> 赞同：3
> 
> 时间：2012-05-01T15:29:28.783
> 
> 标签：mysql, select, ascii

我想在包含 0x02 字符的表中找到所有字符串。
为了清楚起见，我正在寻找类似的东西：

```
SELECT * FROM table WHERE column LIKE '%0x02%'
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:41:36.130

我会去

```
SELECT * FROM table WHERE LOCATE(X'02', column) > 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:33:51.750

十六进制文字？一个`%`是`0x25`

```
SELECT * FROM table WHERE column LIKE 0x250225 
```

检查[手册](http://dev.mysql.com/doc/refman/5.0/en/hexadecimal-literals.html)提醒我`0x`语法不是严格的 SQL 标准，所以可以`X''`改用

```
SELECT * FROM table WHERE column LIKE X'250225' 
```

# ruby - “target.should be”如何在 rspec 中工作

> ID：10399994
> 
> 赞同：2
> 
> 时间：2012-05-01T15:29:38.357
> 
> 标签：ruby, metaprogramming

使用 rpec 时，我不知道什么是“be”。

```
target.should be 5 
```

我知道如何使用它，但它是如何实现的？是不是有点像运营商，即

```
target.should.send(:be, 5) 
```

我怎样才能实现类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:50:08.423

`be`是一种返回 RSpec 匹配器的方法，如 d11wtq 在[上面的评论中提到的](https://github.com/dchelimsky/rspec/blob/master/lib/spec/matchers/be.rb#L237-239)

您可以实现任何其他返回匹配器的方法，但还有[其他更简单的方法](https://github.com/dchelimsky/rspec/wiki/Custom-Matchers)来编写匹配器。

```
RSpec::Matchers.define :be_a_multiple_of do |expected|
  match do |actual|
    actual % expected == 0
  end
end

describe 9 do
  it "should be a multiple of 3" do
    9.should be_a_multiple_of(3)
  end
end 
```

# backbone.js - 骨干网 - 查看未更新页面

> ID：10399995
> 
> 赞同：1
> 
> 时间：2012-05-01T15:29:38.937
> 
> 标签：backbone.js

我正在尝试在 questionListView 中使用渲染功能，它似乎正在运行，但没有更新页面。

模板：

```
<script id="myTemplate" type="text/template">
 <p>Test</p>
</script> 
```

部分JS：

```
$(function(){

//Test data
var initialListData = [
    { listName: "Sample Questions", listID: 1},
    { listName: "Default questions", listID: 2}
];

// MODELS ----------------------------------------------------
var questionList = Backbone.Model.extend({
    defaults: {
        listName: "Name of the list",
        listID: 0
    }
});

// COLLECTIONS ----------------------------------------------------
var populateList = Backbone.Collection.extend({
    model: questionList
});

// VIEWS ----------------------------------------------------
var questionListView = Backbone.View.extend({
    template: $("#myTemplate").html(),
    render: function () {
        console.log('I can see this, but nothing happens...');
        var tmpl = _.template(this.template);            
        $(this.el).append(tmpl(this.model.toJSON()));
        return this;
    }
});

var AppView = Backbone.View.extend({
  el : $("#content"),
    initialize: function (){
        this.collection=new populateList(initialListData);
        this.render();
    },
    render: function (){
        _.each(this.collection.models, function (item) {
            this.renderSelect(item);
        }, this);
    },
    renderSelect: function(item){
         var populateQuestionList = new questionListView({
             model: item
        });
        this.$el.append(populateQuestionList.render().el);
    }
});

var app = new AppView();

} (jQuery)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:51:52.213

您是否在 document.ready 事件的回调中触发此事件？如果没有，您的代码可能在 DOM 实际加载并准备好之前执行。尝试：

```
$(function () {
    var app = new AppView();
}); 
```

一些杂项。

*   您可以`template: _.template($("#myTemplate").html())`将模板功能缓存为微优化
*   您可以在最近版本的主干中使用[`this.$el`](http://documentcloud.github.com/backbone/#View-%24el)而不是。`$(this.el)`您已经在一个地方这样做了，但不是两者都这样做。

# powershell - powershell中的.matches不返回任何结果

> ID：10399999
> 
> 赞同：1
> 
> 时间：2012-05-01T15:29:47.920
> 
> 标签：powershell

我正在研究基于[blog.commandlinekungfu.com](http://blog.commandlinekungfu.com/)上的加密脚本的脚本。本质上，我想获取文本文件中所有字母的频率。在示例中，他使用 Here-String 来存储值，但我想使用 Get-Content。这是故障。

此代码有效

```
PS c:\$foobar = @"
                  foo
                  bar
                "@
PS c:\$foobar | Select-String -AllMatches "[A-Z]").matches 
```

它返回适当的值。但是，如果我有一个包含完全相同信息的文本文件，则会返回一个空值。

```
PS c:\$text = Get-Content "foobar.txt"
PS c:\$text | Select-String -AllMatches "[A-Z]").matches 
```

不返回任何内容

有谁知道为什么 Here-String 有效但 Get-Content 无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:15:20.277

这里的字符串被视为一个字符串，使用 get-content 管道传递一组字符串。您可以将 filoe 内容通过管道传输到 Out-String cmdlet：

```
(get-content file.txt | out-string | Select-String -AllMatches "[A-Z]").matches 
```