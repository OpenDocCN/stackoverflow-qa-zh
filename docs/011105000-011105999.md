# StackOverflow 问答 11105000-11105999

# java - 解码 UTF-16 文本

> ID：11105000
> 
> 赞同：0
> 
> 时间：2012-06-19T16:09:18.530
> 
> 标签：java, servlets, character-encoding

我有一个 Java servlet，它通过 HTTP GET 请求从上游系统接收数据。此请求包括一个名为“text”的参数和另一个名为“charset”的参数，指示文本参数的编码方式：

如果我指示上游系统向我发送文本`TĀ`并调试 servlet 请求参数，我会看到以下内容：

```
request.getParameter("charset") == "UTF-16LE"
request.getParameter("text").getBytes() == [0, 84, 1, 0] 
```

此字符串中两个字符的[代码点（十六进制）是：](http://www.columbia.edu/kermit/ucs2.html)

```
[T]  0054
[Ā]  0100 
```

我无法弄清楚如何将其转换`byte[]`回 String `"TĀ"`。我应该提一下，我并不完全信任`charset`并怀疑它可能正在使用`UTF-16BE`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:17:20.210

使用[`String(byteArray, charset)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28byte%5B%5D,%20java.lang.String%29)构造函数：

```
byte[] bytes = { 0, 84, 1, 0 };
String string = new String(bytes, "UTF-16BE"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:35:13.670

你为什么要调用 getBytes() 呢？您已经将参数作为字符串。在不指定字符集的情况下调用 getBytes() 只是一个破坏数据的机会。

# ruby-on-rails-3 - Rails 3 选择查询不起作用

> ID：11105002
> 
> 赞同：0
> 
> 时间：2012-06-19T16:09:20.320
> 
> 标签：ruby-on-rails-3, select, count

我有以下查询不起作用，我想知道如何解决它。

```
Player.select("players.*, 
    (SELECT COUNT(*) FROM Results 
    WHERE results.player_id = players.id and win = true) 
as wins").where("wins > 0").order("wins desc") 
```

`win`当布尔值设置为true时，我试图通过计算其外键出现在结果表中的次数来限制父播放器记录。但是，有时外键会出现在结果表中，但布尔`win`字段会是错误的，导致我不想看到的记录计数为零，所以我想我会尝试使用消除这些零记录计数.where("wins > 0") 子句，但我收到此错误：

> PGError：错误：列“wins”不存在

有趣的是，`wins`当我尝试按它进行排序时，它会找到该字段，但不会在添加的 where 子句中找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:08:05.840

我相信以下查询会起作用：

```
select players.*, count(results.id) as wins from players left join results on results.player_id = players.id and results.win = true group by players.id having count(results.id) > 0 order by wins desc; 
```

这应该是 Railsify，尽管我自然没有测试过它：

```
Player.select('players.*, count(results.id) as wins').joins('left join results on results.player_id = players.id and results.win = true').group('players.id').having('count(results.id) > 0').order('wins desc') 
```

如果您不关心wins = 0 的行，则可以进行内连接而不是左连接，这可能会更快。

# eclipse - Eclipse：从未调用过垂直标尺监听器

> ID：11105010
> 
> 赞同：1
> 
> 时间：2012-06-19T16:09:43.693
> 
> 标签：eclipse, eclipse-plugin

我正在尝试在 Eclipse 中实现垂直标尺侦听器。我实现了`IPartListener2`接口，当打开一个 java 编辑器时，我注册了监听器。问题是当垂直标尺被点击时，监听器永远不会被调用。如果我调用 CompositeRuler.fireAnnotationSelected()，监听器会按预期调用。

我认为这可能是一个错误，但我想在填充 bugzilla 之前确定。有人可以指出我做错了什么吗？

这是 IPartListener2 类：

```
public class EditorListener implements IPartListener2 {

    @Override
    public void partOpened(IWorkbenchPartReference partRef) {
        IWorkbenchPart part = partRef.getPart(true);
        if (part != null && part instanceof IEditorPart)
            configureJavaEditor((IEditorPart) part);
    }

    // other IPartListener2 methods...

    private void configureJavaEditor(IEditorPart editorPart) {
        Object obj = ((JavaEditor) editorPart).getAdapter(IVerticalRulerInfo.class);
        if (obj != null && obj instanceof IVerticalRulerInfoExtension) {
            ((IVerticalRulerInfoExtension) obj).addVerticalRulerListener(new VerticalRulerListener());
            if (obj instanceof CompositeRuler) 
                ((CompositeRuler) obj).fireAnnotationSelected(null); // -> listener called
        }
    }
} 
```

垂直标尺侦听器只打印正在调用的方法。

起初我认为这可能会发生，因为我使用 JavaEditor 来获取垂直标尺（不鼓励 JavaEditor 访问），所以我从 JavaEditor 更改为 AbstractDecoratedTextEditor，即编辑器类层次结构中的下一个类，但问题仍然存在相同。我没主意了。关于出了什么问题的任何提示？

# android - NullPointer 当我调用 bindService()

> ID：11105022
> 
> 赞同：0
> 
> 时间：2012-06-19T16:10:35.923
> 
> 标签：android, nullpointerexception, android-service

我正在开发一个应用程序。为了简单起见，它有这样的设计：

ServiceManager <--------> CommService --------> 通过 AsyncTask 做事...

我正在尝试将我的 ServiceManager 绑定到 CommService。所以，CommService 有一个Binder。而且我有一个 NullPointerException，我不知道如何解决它。我认为 ServiceConnection 没有完成它的工作并且绑定没有激活。

ServiceManager的代码在这里：

```
public class ProbeManagerService extends Service implements ICommManager, ICommListener {
    private CommService mService;
    private boolean mBound;

    private ServiceConnection svc1 = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder rawBinder) {
        CommBinder commBinder = (CommBinder) rawBinder;
        mService = commBinder.getService();
        mBound = true;
    }

    public void onServiceDisconnected(ComponentName className) {
        //commBinder = null;
        mBound = false;
    }
    };

    public void onCreate() {
        Log.i("ProbeManagerService, onCreate", "passage dans le onCreate du Service");
        super.onCreate();
        Intent bindIntent = new Intent(this, CommService.class);
        //startService(bindIntent); changes nothing with or without this line
        bindService(bindIntent, svc1, Context.BIND_AUTO_CREATE);
   }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i("ProbeManagerService, onStartCommand", "passage dans le onStartCommand du Service");
        this.getActions();
        return START_STICKY;
    }

    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public void getActions() {
        if(mBound)
            this.mService.getActions(this, urlGetActions, jsonGetActions, GET_ACTIONS);
        else
            System.out.println("On n'est pasl lié");

    } 
```

CommService 代码在这里：

```
public class CommService extends Service implements IComm {

private final CommBinder binder = new CommBinder(this);
private HttpClient client;

public CommService() {
    super();
}

public void onCreate() {
    super.onCreate();
    this.client = new DefaultHttpClient();
}

@Override
public IBinder onBind(Intent intent) {
    return binder;
}

public void onDestroy() {
    super.onDestroy();
    this.client.getConnectionManager().shutdown();
}

// ============ METHODES A IMPLEMENTER DE L'INTERFACE IComm ==============
@Override
public void getActions(ICommListener listener, String url, String json, String type) {
    new SendHttpRequest(listener).execute(url, json, type);

} 
```

CommBinder 代码在这里：

```
public class CommBinder extends Binder {

private CommService service;

public CommBinder(CommService service) {
    this.service = service;
}

public CommService getService() {
    return this.service;
} 
```

Logcat在这里：

```
06-19 18:03:35.665: I/ProbeManagerService, onCreate(25705): passage dans le onCreate du Service
06-19 18:03:35.775: I/System.out(25705): fichier lus
06-19 18:03:35.785: I/ProbeManagerService, onStartCommand(25705): passage dans le onStartCommand du Service
06-19 18:03:35.815: D/AndroidRuntime(25705): Shutting down VM
06-19 18:03:35.815: W/dalvikvm(25705): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-19 18:03:35.855: E/AndroidRuntime(25705): FATAL EXCEPTION: main
06-19 18:03:35.855: E/AndroidRuntime(25705): java.lang.RuntimeException: Unable to start service .probecontroller.android.services.ProbeManagerService@40516da8 with Intent { cmp=.probecontroller.android.controller/.probecontroller.android.services.ProbeManagerService }: java.lang.NullPointerException
06-19 18:03:35.855: E/AndroidRuntime(25705):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2052)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at android.app.ActivityThread.access$2800(ActivityThread.java:117)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:994)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at android.os.Looper.loop(Looper.java:123)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at android.app.ActivityThread.main(ActivityThread.java:3683)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at java.lang.reflect.Method.invokeNative(Native Method)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at java.lang.reflect.Method.invoke(Method.java:507)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at dalvik.system.NativeStart.main(Native Method)
06-19 18:03:35.855: E/AndroidRuntime(25705): Caused by: java.lang.NullPointerException
06-19 18:03:35.855: E/AndroidRuntime(25705):    at .probecontroller.android.services.ProbeManagerService.getActions(ProbeManagerService.java:162)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at .probecontroller.android.services.ProbeManagerService.onStartCommand(ProbeManagerService.java:124)
06-19 18:03:35.855: E/AndroidRuntime(25705):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2039)
06-19 18:03:35.855: E/AndroidRuntime(25705):    ... 10 more
06-19 18:03:51.226: I/Process(25705): Sending signal. PID: 25705 SIG: 9 
```

欢迎任何帮助。解决这个问题已经花费了几个小时，我阅读了很多论坛、帖子，但根本没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:14:52.847

`getActions()`显然，您在绑定服务之前正在调用`ProbeManagerService`，因为唯一可以`null`是`mService`. `bindService()`是异步的；当该方法返回时，您还不会被绑定。

# c++ - google/dense_hash_map 的线程安全

> ID：11105023
> 
> 赞同：2
> 
> 时间：2012-06-19T16:10:36.643
> 
> 标签：c++, multithreading, thread-safety, hashmap

[`dense_hash_map`](http://goog-sparsehash.sourceforge.net/doc/dense_hash_map.html)线程中的读取操作是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:20:38.303

`const`可重入类型（大多数是）的C++ 对象通常被认为是线程安全的。

的文档`dense_hash_map`没有指定有关线程安全的任何内容，因此最具防御性的方法是假设它甚至不是可重入的。但是，使类不可重入需要不受保护的全局可变状态，并且很难找到`dense_hash_map`要求这样做的论据，但是鉴于它将其内容存储到磁盘，这可能就是您所希望的。在没有文档确认的情况下假设事情是线程安全的，即使在可变操作上也是牵强的。

除非有文档，否则您可能希望查看实现，看看您是否可以验证 API 至少某个子集的可重入性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T22:13:41.213

根据论文[Scalable, High Performance Ethernet Forwarding with CUCKOOSWITCH](https://www.cs.cmu.edu/~./dongz/papers/cuckooswitch.pdf) (2013)，对于读写`google::dense_hash_map`来说**不是线程安全的：**

> [...] 因此，我们还比较了三个非线程安全的哈希表：STL`hash_map`和 Google 的`sparse_hash_map`和`dense_hash_map`. [...] 这些非线程安全的表不支持并发读写。

我找不到任何其他关于`google::dense_hash_map`线程安全与否的信息。

# c# - 单元测试 Webform HttpContext 依赖代码？

> ID：11105029
> 
> 赞同：1
> 
> 时间：2012-06-19T16:10:59.543
> 
> 标签：c#, asp.net, unit-testing

我试图为依赖于 HttpContext 对象的几个方法编写一些单元测试。我想出了以下课程，但我认为这不是最好的方法。

```
internal class HttpContextMocking
{

    public static HttpContext Context()
    {

        HttpContext context = new HttpContext(new SimpleWorkerRequest("", "", "", null, new StringWriter()));

        context.Cache.Insert("SomeName", "value", null, DateTime.Now.AddMinutes(3), TimeSpan.Zero);

        return context;
    } 
```

然后我在我的单元测试中通过以下方式调用这个模拟 HttpContext：

```
 [TestMethod]
    [TestCategory("Web")]
    public void Get()
    {
        HttpContext.Current = HttpContextMocking.Context();

        object result = CacheUtility.Get("NonExistentItem");

        Assert.IsNull(result);
    } 
```

有没有更好的方法来实现这一点，当我开始添加更多虚拟数据时会更干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:24:04.360

HttpContext 模拟起来真的很复杂。我建议将依赖项更改为提供您需要的接口，然后有两个实现：一个真实的，使用 HttpContext 和一个用于测试的 Mock 。

如果您无论如何都想模拟它并且您的代码可以解决问题，请保持这种状态。

另一种选择是为 MSTest 使用 ASP.NET 主机类型。在这种情况下，您将执行一个实际请求，并且您的 HttpContext 将在那里：

```
[TestMethod]
[HostType("ASP.NET")]
[AspNetDevelopmentServerHost(@"$(SolutionDir)\Tests", "/")]
[UrlToTest("http://localhost:1234/TestPage.aspx")]
public void MyTest()
{
    Page page = testContextInstance.RequestedPage;
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:54:20.083

HttpContextWrapper 和 HttpContextBase .NET 类是为模拟目的而创建的，例如[http://www.codemerlin.com/2011/07/mocking-httpcontext-httpresponse-httprequest-httpsessionstate-etc-in-asp-net/](http://www.codemerlin.com/2011/07/mocking-httpcontext-httpresponse-httprequest-httpsessionstate-etc-in-asp-net/)

# sql - Ruby on Rails - 动态 SQL 查询

> ID：11105040
> 
> 赞同：7
> 
> 时间：2012-06-19T16:11:37.173
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord

我正在我的一个控制器中执行以下原始 sql 查询：

```
active_users_query = <<-SQL 
       SELECT count(DISTINCT patients.id)
       FROM public.patients, public.subscriptions, public.users, public.calendar_days
       WHERE patients.user_id = users.id 
       AND patients.id = calendar_days.patient_id 
       AND subscriptions.user_id = patients.user_id 
       AND (date_trunc('day',patients.last_sync) > current_date - interval '30 days' 
       OR date_trunc('day', calendar_days.created_at) > current_date - interval '30 days' 
       OR date_trunc('day',users.current_sign_in_at) > current_date - interval '30 days') 
       AND subscriptions.code_id = 2  
SQL 
```

有没有办法可以在此查询的最后一行添加一些 RoR 代码以动态生成 code_id ？

像这样的东西：

```
AND subscriptions.code_id = '@subscription.code' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T16:19:28.960

您可以在 heredoc 字符串中插入 Ruby 变量

```
active_users_query = <<-SQL 
       SELECT count(DISTINCT patients.id)
       FROM public.patients, public.subscriptions, public.users, public.calendar_days
       WHERE patients.user_id = users.id 
       AND patients.id = calendar_days.patient_id 
       AND subscriptions.user_id = patients.user_id 
       AND (date_trunc('day',patients.last_sync) > current_date - interval '30 days' 
       OR date_trunc('day', calendar_days.created_at) > current_date - interval '30 days' 
       OR date_trunc('day',users.current_sign_in_at) > current_date - interval '30 days') 
       AND subscriptions.code_id = '#{@subscription.code}'  
SQL 
```

# jquery - 如何让 jQuery EasyUI 数据网格和树网格在后台加载？

> ID：11105042
> 
> 赞同：0
> 
> 时间：2012-06-19T16:11:37.093
> 
> 标签：jquery, datagrid, jquery-easyui

我正在尝试从大型查询中构建一个 jQuery EasyUI 数据网格或树形网格。显然数据库需要足够长的时间来响应我得到“此页面上的脚本可能正忙”弹出窗口。此外，整个浏览器 (Firefox) 在等待时会锁定。我认为 AJAX 的全部意义在于不显眼地加载内容。

我已经浏览了 EasyUI 的教程和文档，但我不清楚如何强制数据网格在后台加载。EasyUI 论坛上有一些类似的未回答问题。

我是否需要覆盖 datagrid 的 loader 属性？如果是这样，有谁知道我在哪里可以获得默认加载器函数的非混淆版本，这样我就可以确定在编写自己的函数之前了解它应该做什么？

此外，如果我需要具有排序和过滤功能的异步数据网格和数据树，那么 jQuery EasyUI 是不是简单而干净地执行此操作的错误库？人们会推荐一些替代的 jQuery 库吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:56:39.513

您还可以查看[DataTables](http://datatables.net)。我使用过它，发现它是一个很棒的数据网格插件，具有您正在寻找的所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:36:42.797

> 此外，如果我需要具有排序和过滤功能的异步数据网格和数据树，那么 jQuery EasyUI 是不是简单而干净地执行此操作的错误库？人们会推荐一些替代的 jQuery 库吗？

事实证明，答案是使用 jqGrid（jqueryui 的一个插件）而不是 easyui 数据网格。它开箱即用地进行适当的异步查询，具有我需要的所有其他功能，切换快速且轻松，而且我对从 easyui 迁移没有任何遗憾。

# python - 随机混合文件中的行顺序

> ID：11105047
> 
> 赞同：2
> 
> 时间：2012-06-19T16:11:59.230
> 
> 标签：python

假设我有一个包含一些行的文件：

```
line 1 ...
line 2 ...
...
line n ... 
```

是否可以有另一个文件，其中行的顺序将随机混合？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T16:14:07.900

该[`random`](http://docs.python.org/library/random.html#random.shuffle)模块是您的朋友：

```
import random
with open("infile.txt") as f:
    lines = f.readlines()
random.shuffle(lines)
with open("outfile.txt", "w") as f:
    f.writelines(lines) 
```

应该做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:13:42.220

1) 读取文件 2) 将每一行存储在字符串数组中 3) 洗牌字符串数组 4) 写入文件

我想这就是你要的吗？

# ocaml - 在 Ocaml 中打字的一个奇怪例子

> ID：11105053
> 
> 赞同：6
> 
> 时间：2012-06-19T16:12:19.247
> 
> 标签：ocaml, typing

很奇怪，这个 ocaml 片段是由顶层很好地键入的。查看结构，如果 g 是顶层所示的 int->int 类型，`h x = g x`则结构的部分将无法类型统一。那么有人可以澄清一下吗？

```
module Mymodule : sig
  val h:int ->int
  val g: string-> string
end = struct
  let g x = x
  let h x = g x
end 
```

这是顶层的回应：

```
 module Mymodule : sig val h : int -> int val g : string -> string end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T17:01:37.923

我会说在从模块导出之前`string -> string`不会应用类型。`g`在模块内部（因为你没有给它一个类型）它有 type `'a -> 'a`。（免责声明：我不是模块专家，但我正在努力学习。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-19T21:03:19.463

这里要理解的重要一点是，OCaml 以组合方式执行类型推断，即，它会首先推断类型，`struct ... end`然后才会匹配推断的类型，`sig ... end`以验证结构确实实现了签名。

例如，如果你写

```
module Monkey : sig val f : int -> int end =
struct
  let f x = x
end 
```

然后 OCaml 会很高兴，因为它会看到它`f`具有`'a -> 'a`可以专门用于所需类型的多态类型`int -> int`。因为`sig ... end`使得`Monkey`不透明，即签名隐藏了实现，它会告诉你`f`有 type `int -> int`，即使实际的实现有一个多态类型。

在您的特定情况下，OCaml 首先推断出`g`具有 type `'a -> 'a`，然后推断出 of 的类型`h`也是`'a -> 'a`如此。因此得出结论，该结构具有类型

```
sig val g : 'a -> 'a val h : 'a -> 'a end 
```

接下来，将签名与给定的签名进行匹配。因为类型的函数`'a -> 'a`可以被专门化`int -> int`，`string -> string`OCaml 得出的结论是一切都很好。当然，使用的全部意义`sig ... end`在于使结构不透明（实现是隐藏的），这就是为什么顶层不*暴露*and 的多态类型的`g`原因`h`。

这是另一个显示 OCaml 工作原理的示例：

```
module Cow =
struct
  let f x = x
  let g x = f [x]
  let a = f "hi"
end

module Bull : sig
  val f : int -> int
  val g : 'b * 'c -> ('b * 'c) list
  val a : string
end = Cow 
```

回应是

```
module Cow :
    sig 
      val f : 'a -> 'a
      val g : 'a -> 'a list
      val a : string
    end

module Bull :
    sig
      val f : int -> int
      val g : 'a * 'b -> ('a * 'b) list
      val a : string end
    end 
```

# jquery - 在 Rails 循环中多次使用 JQuerys 对话框

> ID：11105054
> 
> 赞同：0
> 
> 时间：2012-06-19T16:12:23.110
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui-dialog, dynamic-links

我在一个循环中有以下 rails 代码，其中包含一个 jquery 对话框的链接。

（此链接中的“report_image”是一个简单地调用图像的辅助方法。）

```
<%= link_to report_image, "#", :class => "flight_report_opener" %>
  <div id="flight_report_dialog" title=" FLIGHTS REPORT">
    <p>Dialog content</p>
  </div>
<% end %> 
```

当然，问题在于这会在同一页面上生成多个 id="flight_report_dialog" 实例......这会破坏 .dialog 调用。也不能使用类。我试图通过将循环生成的 id (@ratings.each do |rating|) 添加到对话框 div css id 的末尾来更改动态生成的 id。然后通过link_to_function 中的命名函数调用传递它。

```
<div id="flight_report_dialog_<%= rating %>" title=" FLIGHTS REPORT"> %> </div> 
```

那对我也没有效果。

我觉得我在这里放个屁。希望有人可以帮助我解决这个问题。

如何从动态生成的链接在同一页面上多次调用 jquery 对话框函数。

我目前正在使用的功能是这个......这当然不起作用。实际上，为了清楚起见，该函数工作正常......在 id 的第一个实例上调用：

```
$("#flight_report_opener").click(
     function() { $( "#flight_report_dialog" ).dialog( "open" ); 
     return false; 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:29:23.373

这是我为解决这个问题所做的。您可以将此代码拼凑到上面的代码中...

在视图中：

```
<%= link_to report_image, "#", :class => "ground_report_opener", :data => {rating: rating.id} %>
<div class="ground_report_dialog" id="ground_report_dialog_<%= rating.id %>" title=" GROUND REPORT"> 
```

在 JS 中：

```
$(".flight_report_opener").click(function() { 
$( "#flight_report_dialog_"+$('.flight_report_opener').data('rating') ).dialog( "open" ); 
return false; 
}); 
```

# iphone - 禁用 iPhone 4S / 新 iPad 键盘上的听写按钮

> ID：11105058
> 
> 赞同：20
> 
> 时间：2012-06-19T16:12:32.210
> 
> 标签：iphone, objective-c, ios, ipad

我们是一个医疗保健应用程序。我们在应用程序中有一个符合 HIPAA 标准的语音识别器，通过它可以进行所有听写。医院不希望医生意外开始与不符合 HIPAA 的 Nuance Dragon 服务器通话。所以，我一直在寻找可以抑制键盘上的听写键的方法。

我尝试在键盘上的听写按钮上放置一个假按钮，但在 iPad 上，拆分坞站的概念不断在整个屏幕上移动麦克风。这听起来不像是一个合理的解决方案。有没有专家可以帮助我？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T18:21:58.980

好的，终于明白了！诀窍是观察 UITextInputMode 更改通知，然后收集更改模式的标识符（代码似乎避免直接使用 Private API，尽管通常似乎需要一点私有 API 知识），以及模式何时更改听写，resignFirstResponder（这将取消语音听写）。耶！这是一些代码：

在您的应用程序委托中的某个地方（至少那是我放的地方）

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(inputModeDidChange:) name:@"UITextInputCurrentInputModeDidChangeNotification"
                                           object:nil]; 
```

然后你可以

```
UIView *resignFirstResponder(UIView *theView)
{
    if([theView isFirstResponder])
    {
        [theView resignFirstResponder];
        return theView;
    }
    for(UIView *subview in theView.subviews)
    {
        UIView *result = resignFirstResponder(subview);
        if(result) return result;
    }
    return nil;
}

- (void)inputModeDidChange:(NSNotification *)notification
{        
    // Allows us to block dictation
    UITextInputMode *inputMode = [UITextInputMode currentInputMode];
    NSString *modeIdentifier = [inputMode respondsToSelector:@selector(identifier)] ? (NSString *)[inputMode performSelector:@selector(identifier)] : nil;

    if([modeIdentifier isEqualToString:@"dictation"])
    {
        [UIView setAnimationsEnabled:NO];
        UIView *resigned = resignFirstResponder(window);
        [resigned becomeFirstResponder];
        [UIView setAnimationsEnabled:YES];

        UIAlertView *denyAlert = [[[UIAlertView alloc] initWithTitle:@"Denied" message:nil delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil] autorelease];
        [denyAlert show];
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-22T18:33:48.737

您可以创建自己的键盘并为将接受此听写的文本字段设置 inputView。然后当他们按下任何键时，他们将获得您的键盘，因此您不必覆盖标准键盘上的键，您将能够自定义整个东西。

```
self.myButton.inputView = self.customKeyboardView; 
```

这是一个非常自定义的键盘示例

[http://blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/](http://blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/)

Ray 还有一个关于自定义键盘的精彩教程。

[http://www.raywenderlich.com/1063/ipad-for-iphone-developers-101-custom-input-view-tutorial](http://www.raywenderlich.com/1063/ipad-for-iphone-developers-101-custom-input-view-tutorial)

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-25T09:37:35.263

我遇到了同样的问题，我发现隐藏听写按钮的唯一方法是更改​​键盘类型。对我来说，将其更改为电子邮件类型似乎是合理的：

```
textField.keyboardType = UIKeyboardTypeEmailAddress; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T18:54:01.620

您可以创建覆盖 insertDictationResult: 的 UITextField/UITextView 的子类，以不插入任何内容。

这不会阻止信息被发送，但您可以显示一个警报，通知他们后膛。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-20T18:43:23.690

这是基于@BadPirate 的 hack 的 Swift 4 解决方案。它将触发初始铃声，表明听写开始，但听写布局永远不会出现在键盘上。

这不会隐藏键盘上的听写按钮：因为唯一的选择似乎是使用带有[UIKeyboardType.emailAddress](https://developer.apple.com/documentation/uikit/uikeyboardtype/emailaddress)的电子邮件布局。

* * *

在`viewDidLoad`拥有`UITextField`要禁用听写的视图控制器中：

```
// Track if the keyboard mode changed to discard dictation
NotificationCenter.default.addObserver(self,
                                       selector: #selector(keyboardModeChanged),
                                       name: UITextInputMode.currentInputModeDidChangeNotification,
                                       object: nil) 
```

然后自定义回调：

```
@objc func keyboardModeChanged(notification: Notification) {
    // Could use `Selector("identifier")` instead for idSelector but
    // it would trigger a warning advising to use #selector instead
    let idSelector = #selector(getter: UILayoutGuide.identifier)

    // Check if the text input mode is dictation
    guard
        let textField = yourTextField as? UITextField
        let mode = textField.textInputMode,
        mode.responds(to: idSelector),
        let id = mode.perform(idSelector)?.takeUnretainedValue() as? String,
        id.contains("dictation") else {
            return
    }

    // If the keyboard is in dictation mode, hide
    // then show the keyboard without animations
    // to display the initial generic keyboard
    UIView.setAnimationsEnabled(false)
    textField.resignFirstResponder()
    textField.becomeFirstResponder()
    UIView.setAnimationsEnabled(true)

    // Do additional update here to inform your
    // user that dictation is disabled
} 
```

# c++ - 如何调用模板化的 operator()()？

> ID：11105060
> 
> 赞同：1
> 
> 时间：2012-06-19T16:12:51.650
> 
> 标签：c++, templates, compiler-errors, operators

我有一个看起来像这样的结构：

```
struct foo_t
{
    template <std::size_t x, std::size_t y>
    std::size_t operator()() const
    { return /*something dealing with x and y*/; }
}; 
```

该定义似乎编译得很好，但是我该如何称呼它呢？我似乎无法通过编译器：

```
foo_t foo;
foo<3, 3>(); // ERROR: Compiler seems to think I'm asking for "foo < 3 ..." 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:13:59.477

很丑，但是..，

```
foo_t foo;
foo.operator()<3, 3>(); 
```

[[在线演示。](http://ideone.com/1h377)]

# php - 来自我的网站或 Facebook（或其他一些集成）的 PHP 会话

> ID：11105061
> 
> 赞同：0
> 
> 时间：2012-06-19T16:13:00.020
> 
> 标签：php, facebook, session, facebook-php-sdk

我希望这很简单。我正在一个网站上工作，用户可以直接在该网站注册或使用 Facebook 等登录。我想知道的是如何处理脚本顶部的会话数据？

这是我所拥有的：

`if ($_SESSION['loggedin'] == 'true') { }`

我努力了：

`if ($_SESSION['loggedin'] == 'true')|| if $user{`

但这抛出了一个错误：意想不到的 T_BOOLEAN_OR

这甚至是做这种会话工作的正确方法吗？还是我应该以不同的方式处理这个问题？有其他人愿意分享吗？

谢谢，

刘易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:15:47.337

正确的语法不是

```
if ($_SESSION['loggedin'] == 'true')|| if $user{...} 
```

这是...

```
if ($_SESSION['loggedin'] == 'true' || $condition2==true){...} 
```

所有条件的逻辑顺序都必须包含在 if 的括号中。由于`if`语句总是检查是否为真，所以可以这样简化

```
if ($_SESSION['loggedin'] || $condition2){...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:15:02.317

这是基本的 PHP 语法：

```
if (($_SESSION['loggedin'] == 'true') || ($user whatever....)) {
    ...
} 
```

# c - 带 {} 的 C 宏

> ID：11105063
> 
> 赞同：0
> 
> 时间：2012-06-19T16:13:12.863
> 
> 标签：c, macros, compiler-errors

我在 C 中定义了以下结构：

```
typedef struct point{
    float x;
    float y;
    float z;
} Point;
typedef Point Vector; 
```

和以下宏：

```
#define sub(p1,p2)      {p1.x-p2.x,p1.y-p2.y,p1.z-p2.z} 
```

这是这样使用的：

```
void fun(Point p0, Point p1){
    Vector u;
    u=sub(p1,p0);
} 
```

从我读过的内容来看，这应该可以工作，或者我可能遗漏了一些甚至很明显的东西......但我收到以下错误，我不明白我应该做什么：

```
error: expected expression before '{' token 
```

所以基本上我只想获得与以下内容相同的内容：

```
struct point u={p1.x-p0.x,p1.y-p0.y,p1.z-p0.z} 
```

我真的不知道我做错了什么......谢谢。

[编辑] 包含更多功能细节，因此您可以看到我认为我的错误在哪里。未使用变量声明进行初始化，因为更改后

```
Vector u;
u=sub(p1,p0); 
```

到

```
Vector u=sub(p1,p0); 
```

它有效，但我仍然不明白为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T16:19:40.553

这与宏无关：即使您手动扩展此宏，问题仍然存在。失败的原因是赋值中的初始化列表必须由*常量表达式*组成，因此`p1.x`是不允许的。

如果您使用的是 C99，请将宏更改为使用[*复合文字*](http://port70.net/~nsz/c/c99/n1256.html#6.5.2.5)，如下所示：

```
#define sub(p1,p2)      (Vector){p1.x-p2.x,p1.y-p2.y,p1.z-p2.z} 
```

这将允许您在赋值和初始化程序中使用宏。

# c# - Salesforce 插入/更新 QueryResult 字段？

> ID：11105064
> 
> 赞同：0
> 
> 时间：2012-06-19T16:13:13.083
> 
> 标签：c#, soap, wsdl, salesforce

所以我们有一个数据结构“案例”，例如退货案例、退款案例等。其中一个字段是“案例评论”字段。该字段（在 C# wsdl 生成的代码中）是一个 QueryResult 字段。

我知道要查询 CaseComments 我可以使用：

```
SELECT (SELECT ParentId, CommentBody FROM Case.CaseComments) FROM Case 
```

获取所有案例评论的 ParentId 和 CommentBody 字段。然而，这是我没有得到的插入，或者找到任何关于如何做的合理文档。

我更喜欢使用强类型查询，例如：

```
 Case updateCase = new Case();
    updateCase.Id = caseToAddToID;
    updateCase.CaseComments = new QueryResult();
    updateCase.CaseComments.records = (sObject[])new CaseComment[1];
    updateCase.CaseComments.records[0] = new CaseComment();
    ((CaseComment)updateCase.CaseComments.records[0]).ParentId = caseToAddToID;
    ((CaseComment)updateCase.CaseComments.records[0]).CommentBody = noteToAdd;

    binding.update(new sObject[]{updateCase}); 
```

但是当做这样的事情时，我得到一个错误：

```
 Error: getting record type info.
    INVALID_FIELD: No such column 'CaseComments' on entity 'Case'. 
    If you are attempting to use a custom field, be sure to append 
    the '__c' after the custom field name. Please reference your WSDL
    or the describe call for the appropriate names. 
```

但是，如果我尝试仅在 caseComment 数据结构上使用 create()，它会毫无错误地插入，但不会与 Case 适当关联，而且我似乎找不到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T04:30:20.200

对您的工作感到惊讶，您可能想要检查新案例评论是否实际保存。在 APEX 中，如果您尝试写入子关系字段（即`updateCase.CaseComents.records = (sObject[]) new CaseComment[1];`），则会出现异常，尽管您可以将记录添加到数组中，即使它们不会被更新。

例如，这会引发错误

```
 Case updateCase = new Case();
 updateCase.caseComments = new List<CaseComment>(); // throws compile error in APEX 
```

您可以这样做，但不会保存新的案例评论。

```
 Case updateCase = [select (select id from CaseComments) from Case where id = '1234'];
 updateCase.caseComments.add(new CaseComment(commentBody = 'comment));
 binding.update(new sObject[]{ updateCase }); 
```

正确的方法是在单独的 DML 语句中创建它们

```
 CaseComment newComment = new CaseComment();
 newComment.parentId = caseToAddToId;
 newComment.commentBody = noteToAdd;
 binding.update(new sObject[] { newComment }); 
```

# dynamics-crm - 如何使用 odata json 更新外键

> ID：11105065
> 
> 赞同：0
> 
> 时间：2012-06-19T16:13:14.000
> 
> 标签：dynamics-crm, dynamics-crm-2011

预期行为：用户单击注册按钮并在相关实体中创建记录。到目前为止，这一直有效，但现在我们需要根据当前表单的查找来更新外键。我该如何做到这一点？下面粘贴的代码在浏览器中引发错误“创建记录时出错；错误 - 错误请求”

```
// JScript source code
CreateButton = function () {
    var fieldTable = crmForm.all.new_registerbutton_d;
    var html = "<TABLE border=0 cellSpacing=0 cellPadding=0><TBODY><TR><TD width=0px>" + fieldTable.innerHTML + "</TD><TD width=200><INPUT style='BACKGROUND-COLOR: #d8e8ff' onclick=Button_OnClick() value='Register' type=button></TD></TR></TBODY></TABLE>";

    fieldTable.innerHTML = html;
    document.all.new_registerbutton.style.display = 'none';
    crmForm.all.new_registerbutton_c.innerText = "";
}

Button_OnClick = function () {

    //var new_se_registration = new Object();
    var invitationName = Xrm.Page.getAttribute("new_name").getValue();
    //new_se_registration.new_name = invitationName;

    var invitationGUID = Xrm.Page.data.entity.getId().replace('{', '').replace('}', '');
    alert(invitationGUID);
    var value = new Array();
    value[0] = new Object();
    value[0].id = invitationGUID;
    value[0].name = invitationName;
    //var invitation = {
    //id: invitationGUID, name: invitationName, entityType: "new_se_registration"
    //};
    //var invitation= { Id: invitationGUID, LogicalName: "new_se_registration", Name: invitationName };
    //value[0].entityType = Xrm.Page.data.entity.getEntityType();
    //new_se_registration.new_new_se_invitation_new_se_registid.setValue([{ id: invitationGUID, name: invitationName, entityType: "new_se_registration"}]);
    //new_se_registration.new_new_se_invitation_new_se_registid = invitation;

    //new_se_registration.new_eventname= Xrm.Page.getAttribute("new_eventname").getValue();
    //new_invitationid is the Event id
    var lookupItem = new Array;
    lookupItem = crmForm.all.new_invitationid.DataValue;
    var eventname = lookupItem[0].name;
    //new_se_registration.new_eventname = eventname;

    lookupItem = crmForm.all.new_invitationid.DataValue;

    var new_se_registration = {

        new_new_se_invitation_new_se_registid: {
        __metadata: { type: "Microsoft.Crm.Sdk.Data.Services.EntityReference" },
        Id: invitationGUID,
        LogicalName: invitationName
        },

        new_name: invitationName,
        new_eventname: eventname
    };

    //alert (  eventname);

    // end Ek - adding event name

    //deleteRecord(new_se_registration.new_name, "new_se_registrationSet");

    var reg = Xrm.Page.getAttribute("new_registered").getValue();

    if (reg == null) {
        reg = "N";
    }

    if (reg != "Y") {

        //Xrm.Page.getAttribute("new_registered").setValue("Y");
        //alert(reg);
        //return;

        createRecord(new_se_registration, "new_se_registrationSet", RegisterCompleted, null);
        Xrm.Page.getAttribute("new_registered").setValue("Y");
        //Xrm.Page.data.entity.attributes.get("new_registered").setSubmitMode("always");
        //Xrm.Page.data.entity.save(); 
    }
    else {
        alert("\"" + Xrm.Page.getAttribute("new_name").getValue() + "\" has been registered already.");
    }
}

function RegisterCompleted(data, textStatus, XmlHttpRequest) {
    var new_se_registration = data;
    Xrm.Page.data.entity.save();
    alert("\"" + Xrm.Page.getAttribute("new_name").getValue() + "\" has been registered successfully.");
}

function checkDuplicate() {
    alert("test");
}

function deleteRecord(id, odataSetName) {

    var serverUrl = Xrm.Page.context.getServerUrl();
    var ODATA_ENDPOINT = "/XRMServices/2011/OrganizationData.svc";

    $.ajax({

        type: "POST",
        contentType: "application/json; charset=utf-8",
        datatype: "json",
        url: serverUrl + ODATA_ENDPOINT + "/" + odataSetName + "(guid'" + id + "')",
        beforeSend: function (XMLHttpRequest) {

            //XMLHttpRequest.setRequestHeader("Accept", "application/json");
            XMLHttpRequest.setRequestHeader("X-HTTP-Method", "DELETE");
        },

        success: function (data, textStatus, XmlHttpRequest) {
            alert("Record deleted successfully!");
        },

        error: function (XmlHttpRequest, textStatus, errorThrown) {
            alert("Error while deletion – " + errorThrown);
        }
    });
}

function createRecord(entityObject, odataSetName, successCallback, errorCallback) {

    var jsonEntity = window.JSON.stringify(entityObject);
    var serverUrl = Xrm.Page.context.getServerUrl();
    var ODATA_ENDPOINT = "/XRMServices/2011/OrganizationData.svc";

    $.ajax({

        type: "POST",
        contentType: "application/json; charset=utf-8",
        datatype: "json",
        url: serverUrl + ODATA_ENDPOINT + "/" + odataSetName,
        data: jsonEntity,
        beforeSend: function (XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Accept", "application/json");
        },

        success: function (data, textStatus, XmlHttpRequest) {
            if (successCallback) {
                successCallback(data.d, textStatus, XmlHttpRequest);
            }
        },

        error: function (XmlHttpRequest, textStatus, errorThrown) {

            if (errorCallback)
                errorCallback(XmlHttpRequest, textStatus, errorThrown);
            else
                alert("Error on the creation of record; Error – " + errorThrown);
        }

    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:34:17.163

解决了。区分大小写。为 new_new_se_invitation_new_se_registId 使用了错误的大小写。

```
var new_se_registration = {

    new_new_se_invitation_new_se_regist**I**d: {
    __metadata: { type: "Microsoft.Crm.Sdk.Data.Services.EntityReference" },
    Id: invitationGUID,
    LogicalName: invitationName
    },

    new_name: invitationName,
    new_eventname: eventname
}; 
```

# tomcat - 获取 maven 对 Tomcat 进行并行部署

> ID：11105069
> 
> 赞同：2
> 
> 时间：2012-06-19T16:13:44.747
> 
> 标签：tomcat, maven

我找不到让 Maven 使用 Tomcat 7 的并行部署进行 Tomcat 7 部署的标准化方法：

[http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Parallel_deployment](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Parallel_deployment)

有没有可靠的方法来做到这一点？也许总是保持应用程序的两个版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-10T09:32:35.303

您可以为此用例使用[tomcat7-maven-plugin](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/)：

```
 <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <path>/WebappName##${maven.build.timestamp}</path>
                <url>http://localhost:8080/manager/text</url>
                <username>tomcat</username>
                <password>tomcat</password>
                <update>true</update>
            </configuration>
        </plugin> 
```

如您所见，版本是在`path`元素中指定的，基于此示例中的构建时间戳。

当然，如果您不想让所有旧版本保持运行，您仍然需要`undeployOldVersions="true"`在 server.xml元素中使用。`<Host>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-03T19:59:55.183

这就是我在我的问题[如何让 Maven 创建一个适当命名的 .war 以与 Tomcat 7 的并行部署功能一起使用的问题？](https://stackoverflow.com/questions/18918603/how-do-i-get-maven-to-create-an-appropriately-named-war-for-use-with-tomcat-7s).

你的问题确实是它的要点。下面是我所做的。

首先，让 Maven 生成正确命名的 .war 文件。我使用了 Maven 的时间戳插件。

```
...
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>${war.version}</version>
    <configuration>
        <warName>${war.name}</warName>
    </configuration>
</plugin>
... 
```

使用时间戳作为版本可确保 .war 文件根据 Tomcat 7 用于确定最新版本的规则正确命名。

我找不到任何有关让 Tomcat 7 Maven 插件使用此插件的信息。在 Tomcat IRC 和 Maven IRC 上询问。也许这是可能的，但我无法让它工作。

我所做的是这样的：

```
...
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <id>copy</id>
            <phase>install</phase>
            <goals>
                <goal>copy</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>${group.id}</groupId>
                        <artifactId>${artifact.id}</artifactId>
                        <version>${version}</version>
                        <type>war</type>
                        <overWrite>true</overWrite>
                        <outputDirectory>${autodeploy.directory}</outputDirectory>
                        <destFileName>${war.name}.war</destFileName>
                    </artifactItem>
                </artifactItems>
            </configuration>
        </execution>
    </executions>
</plugin>
... 
```

这只是将文件从一个地方复制到另一个地方。在本例中，您构建到 Tomcat 的自动部署目录的 .war。

如果您使用 Jenkins 进行部署，您可以将副本设置为构建后操作。（使用 target/appname*.war 作为 EAR/WAR 文件名。）

只是为了完整起见，这里引用了各种属性：

```
<properties>
    <artifact.id>myApp</artifact.id>
    <version>1.0</version>      
    <group.id>com.example.${artifact.id}</group.id>
    <autodeploy.directory xml:space="preserve">C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps</autodeploy.directory>
    <war.name>${artifact.id}##${maven.build.timestamp}</war.name>    
... 
```

（请注意`xml:space="preserve"`当目录中有空格时让 Windows 开心。）

Tomcat 7 默认会自动部署，但不会删除旧版本。也许这就是您想要的，因为您将拥有所有旧版本，以防万一您搞砸了并且需要取消部署最新版本。

但是如果你想用笔写，可以这么说，从你的 Tomcat 7 安装目录中找到 conf/server.xml。`<Host>`看起来像这样：

```
<Host appBase="webapps" autoDeploy="true" name="localhost" unpackWARs="true" undeployOldVersions="true"> 
```

`undeployOldVersions="true"`是魔法。

就是这样。现在，当你这样做时`maven clean install`，它会构建一个命名良好的 war 并将其放入 Tomcat 的 autodeploy 目录中，它应该可以正常工作。

-科林

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T06:48:10.917

这里也一样，所以我编写了一个脚本来使用 Maven 完成此操作，请参阅[http://tynamo.org/Zero+downtime+deployment+to+Tomcat+7+with+Maven](http://tynamo.org/Zero+downtime+deployment+to+Tomcat+7+with+Maven)。此外，Tomcat 7.0.31 将具有 undeployOldVersions（请参阅[https://issues.apache.org/bugzilla/show_bug.cgi?id=52777](https://issues.apache.org/bugzilla/show_bug.cgi?id=52777)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T19:33:39.740

直接通过 Maven 执行此操作可能是一个挑战。您可以尝试让 Maven 在打包时将其版本号应用于 WAR 文件，然后部署它。

至于旧版本，“undeployOldVersions”属性将让 Tomcat 在不再使用旧版本时将其删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T14:11:32.350

您可以尝试使用更好的 Tomcat 管理器，例如 MeerCat：[http ://www.meercatmanager.com](http://www.meercatmanager.com)

它不使用 Maven，但可以在多个 Tomcat 服务器实例上部署相同的应用程序并轻松管理它们的部署。看看这个 ！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-06T10:05:56.967

解决方案是使用 Cargo 插件。

请在下面找到 3 个配置文件，这些配置文件可让您：

*   本地部署到 Cargo 自动安装的 Tomcat
*   本地部署到已安装并启动的 Tomcat
*   远程部署。

请注意“上下文”属性，该属性允许在部署期间使用## 重命名工件以进行并行部署。

```
<profiles>
    <profile>
        <!-- Local deploy - tomcat 7 automatically installed by Cargo -->
        <id>local_deploy_auto_install</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.cargo</groupId>
                    <artifactId>cargo-maven2-plugin</artifactId>
                    <configuration>
                        <container>
                            <containerId>tomcat7x</containerId>
                            <zipUrlInstaller>
                                <url>http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.35/bin/apache-tomcat-7.0.35.zip</url>
                            </zipUrlInstaller>
                        </container>
                        <deployables>
                            <deployable>
                                <properties>
                                    <context>${project.artifactId}##${project.version}</context>
                                </properties>
                            </deployable>
                        </deployables>
                        <configuration>
                            <properties>
                                <cargo.servlet.port>9080</cargo.servlet.port>
                            </properties>
                        </configuration>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>

    <profile>
        <!-- Local deploy - tomcat 7 must have been installed and started -->
        <id>local_deploy</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.cargo</groupId>
                    <artifactId>cargo-maven2-plugin</artifactId>
                    <configuration>
                        <!-- When Cargo starts the container, the following tag instructs it to wait for you to kill the session with Crtl-C -->
                        <!-- <wait>true</wait> -->
                        <!-- The following tag details the container you want to deploy to. -->
                        <container>
                            <!-- Specifying "tomcat7x" is very important! This one tripped me up for quite a while. The issue is that instead 
                                of being an identifier for you, "tomcat7x" is an identifier for Cargo that you want to deploy your webapp in Tomcat 7.x. 
                                I had initially thought otherwise and hence just dropped the 'x', making it "tomcat7", but that never worked. -->
                            <containerId>tomcat7x</containerId>
                            <!-- Type == Installed means that you want to deploy to a container that's installed on your computer -->
                            <type>installed</type>
                        </container>
                        <configuration>
                            <!-- This is another one that confused me for long. Its not enough to specify 'installed' in the container tag. You 
                                have to now specify another configuration with type == existing and the home path -->
                            <type>existing</type>
                            <home>${basedir}/../../tomcat7.0.37</home>
                        </configuration>
                        <!-- Here you specify 'deployables' -->
                        <deployables>
                            <!-- This deployable specifies the webapp you want to deploy -->
                            <deployable>
                                <properties>
                                    <context>${project.artifactId}##${project.version}</context>
                                </properties>
                            </deployable>
                        </deployables>
                    </configuration>
                    <!-- Executions specify the targets that you want to run during build -->
                    <executions>
                        <!-- Maven has the concept of a 'phase' which can be thought of a collection of goals. Hence here we are specifying 
                            that during the 'install' phase first deploy the webapp to the container specific folder and then start the container. Both 
                            'deployer-deploy' and 'start' are cargo specific goals. -->
                        <execution>
                            <id>verify-deploy</id>
                            <phase>install</phase>
                            <goals>
                                <goal>deploy</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>

    <profile>
        <!-- Remote dans un tomcat7 pré-installé, pré-démarré -->
        <id>remote_deploy</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.cargo</groupId>
                    <artifactId>cargo-maven2-plugin</artifactId>
                    <configuration>
                        <!-- When Cargo starts the container, the following tag instructs it to wait for you to kill the session with Crtl-C -->
                        <!-- <wait>true</wait> -->
                        <!-- The following tag details the container you want to deploy to. -->
                        <container>
                            <!-- Specifying "tomcat7x" is very important! This one tripped me up for quite a while. The issue is that instead 
                                of being an identifier for you, "tomcat7x" is an identifier for Cargo that you want to deploy your webapp in Tomcat 7.x. 
                                I had initially thought otherwise and hence just dropped the 'x', making it "tomcat7", but that never worked. -->
                            <containerId>tomcat7x</containerId>
                            <!-- Type == Installed means that you want to deploy to a container that's installed on your computer -->
                            <type>remote</type>
                        </container>
                        <configuration>
                            <!-- This is another one that confused me for long. Its not enough to specify 'installed' in the container tag. You 
                                have to now specify another configuration with type == existing and re-issue the home path -->
                            <type>runtime</type>
                            <properties>
                                <cargo.protocol>http</cargo.protocol>
                                <cargo.hostname>192.168.0.6</cargo.hostname>
                                <cargo.servlet.port>8080</cargo.servlet.port>
                                <cargo.remote.username>deploy</cargo.remote.username>
                                <cargo.remote.password>purplerain</cargo.remote.password>
                            </properties>
                        </configuration>
                        <!-- Here you specify 'deployables' -->
                        <deployables>
                            <!-- This deployable specifies the webapp you want to deploy -->
                            <deployable>
                                <properties>
                                    <context>${project.artifactId}##${project.version}</context>
                                </properties>
                            </deployable>
                        </deployables>
                    </configuration>
                    <!-- Executions specify the targets that you want to run during build -->
                    <executions>
                        <!-- Maven has the concept of a 'phase' which can be thought of a collection of goals. Hence here we are specifying 
                            that during the 'install' phase first deploy the webapp to the container specific folder and then start the container. Both 
                            'deployer-deploy' and 'start' are cargo specific goals. -->
                        <execution>
                            <id>verify-deploy</id>
                            <phase>install</phase>
                            <goals>
                                <goal>deploy</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

# c - C中的指针表达式

> ID：11105070
> 
> 赞同：0
> 
> 时间：2012-06-19T16:13:45.157
> 
> 标签：c

以下指针表达式有什么区别

```
*ptr++ 
```

* * *

```
++*ptr 
```

* * *

```
(*ptr)++ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:17:58.073

第一个，`*ptr++;`，递增指针并计算指针在递增之前指向的值。

第二个，`++*ptr;`取消引用指针并增加指向的值，它的值是增加的值。

第三个，`(*ptr)++`，取消引用指针并递增指向的值，它的值是递增之前的指向值。

考虑例如`int arr[4] = { 1, 2, 3, 4 };`和`ptr = &arr[1];`。

*   之后`int val = *ptr++;`，指针`ptr`指向`arr[2]`并且`val`为 2。
*   之后`int val = ++*ptr;`，指针`ptr`仍然指向`arr[1]`，`arr[1]`递增，所以现在它的值为 3， 也是`val`。
*   之后`int val = (*ptr)++;`，指针仍然指向`arr[1]`,`arr[1]`递增，因此它的值现在是 3，但`val`具有旧值`arr[1]`2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:23:13.733

第一个 will 等价于`*(ptr++)`which will 返回一个带有当前值的临时指针，然后递增 ptr。

第二个将增加所指向的值`ptr`（假设它是一个已`++`定义的类型）并返回增加的值

第三个将返回指向的当前值`ptr`，然后递增`ptr`

前任。

```
int a = 0;
int * ptr = &a;
int b = *ptr++; 
```

a = 0，b = 0，但`ptr`会指向胡说八道。

```
int a = 0;
int * ptr = &a;
int b = ++*ptr; 
```

a = 1, b = 1

```
int a = 0;
int * ptr = &a;
int b = (*ptr)++; 
```

a = 1, b = 0

# dos - DOS重命名文件疑难解答

> ID：11105073
> 
> 赞同：0
> 
> 时间：2012-06-19T16:13:48.400
> 
> 标签：dos, filenames

我正在尝试批量重命名使用以下方案命名的几个文件：`picture.scn_xxx.png`.

*   占位符`xxx`的数值范围从`00000001`到 (可能) `99999999`。
*   我想删除`.scn`只是有`picturexxx.png`.

**我在命令中尝试了以下内容：**

```
ren picture.scn_*.png image*.png 
```

但是，这并没有给我想要的结果，而是得到`image.scn_xxx.png`了。没有被`.scn`删除（我希望得到`imagexxx.png`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:00:17.570

```
for /f "tokens=1* delims=_" %A in ('dir /b /a-d "picture.scn_*.png"') do ren "picture.scn_%B" "picture%B" 
```

如果在批处理文件中使用，则必须更改为`%A`and`%B``%%A``%%B`

# c# - 在特定时间运行的 Windows 服务会在第二天运行

> ID：11105075
> 
> 赞同：0
> 
> 时间：2012-06-19T16:13:52.333
> 
> 标签：c#, timer, windows-services, timespan

我有一个 Windows 服务设置为在特定时间运行，它是第一次运行，但我似乎不知道如何告诉它在第二天结束时运行..

这就是我正在尝试的...

```
protected override void OnStart(string[] args)
    {
        log.Info("Info - Service Start");
        string timeToRunStr = "17:11";
        var timeStrArray = timeToRunStr.Split(';');
        foreach (var strTime in timeStrArray)
        {
            timeToRun.Add(TimeSpan.Parse(strTime));
        }
        ResetTimer();
    }

    void ResetTimer()
    {
        log.Info("Info - Reset Timer");
        try
        {
            TimeSpan currentTime = DateTime.Now.TimeOfDay;
            TimeSpan nextRunTime = timeToRun[0];
            foreach (TimeSpan runTime in timeToRun)
            {
                if (currentTime < runTime)
                {
                    nextRunTime = runTime;
                    // log.Info("Info - in loop");
                    break;
                }
                else {
                    TimeSpan test = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, 16, 51, 0).Subtract(DateTime.Now);
                    nextRunTime = test;
                }
            }
            _timer = new Timer((nextRunTime - currentTime).TotalSeconds * 1000);
            log.Info("Info - Timer : " + (nextRunTime - currentTime).TotalSeconds * 1000);
            log.Info("Info - nextRuntime : " + nextRunTime);
            log.Info("Info - currentTime : " + currentTime);
            _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
            _timer.Start();
        }
        catch (Exception ex)
        {
            log.Error("This is my timer error - ", ex);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:49:36.497

查看这些替代方案：：
[下一个凌晨 3 点发生的日期时间](https://stackoverflow.com/a/1142638/47733)

使用计时器控制活动，参见模型：

```
class Program
{
    static void my_task(Object obj)
    {
        Console.WriteLine("task being performed.");
    }

    static TimerCallback timerDelegate;
    static Timer timer;

    static void Main(string[] args)
    {
        DateTime now = DateTime.Now;
        DateTime today = now.Date.AddHours(12);
        DateTime next = now <= today ? today : today.AddDays(1);

        timerDelegate = new TimerCallback(my_task);

        //                                     hence the first         after the next       
        timer = new Timer(timerDelegate, null, next - DateTime.Now, TimeSpan.FromHours(24));
    }
} 
```

# php - 从 Ajax 写入 PHP 会话变量

> ID：11105077
> 
> 赞同：1
> 
> 时间：2012-06-19T16:13:52.283
> 
> 标签：php, session-variables

好的，这开始让我烦恼，因为它非常简单并且可以在其他地方使用，但是在当前的任务中它没有，所以我开始了！

有一个主页依赖于设置的会话变量或不显示某些信息。假设此页面位于此处：[http](http://dev.example.com/some_page.php) ://dev.example.com/some_page.php 例如

```
if (isset($_SESSION["some_var"])) { /* it's set so do whatever */ }
else { /* not set so do whatever else.. */ } 
```

有一个由 jQuery $.ajax() 触发的 ajax 页面调用并将此会话变量设置为 null 以更改主页的操作，假设它位于此处：[http ://dev.example.com/ajax/some_ajax_page .php](http://dev.example.com/ajax/some_ajax_page.php)

它的代码如下所示：

```
<?php
    if (!isset($_SESSION)) session_start();
    $_SESSION["some_var"] = null; 
```

当ajax触发后重新加载主页面时，会话变量“some_var”仍然完好无损，但如果在ajax页面中的“null”之后回显，则将其设置为“null”。

基本上它似乎没有写入全局会话，只写入本地路径。

这有意义吗？

请问有什么帮助吗？另外，如果您想进一步澄清任何事情，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:30:05.137

摆脱对会话的检查。如果这是您调用的唯一文件，请执行以下操作：

```
<?php
   session_start();
   $_SESSION["some_var"] = null; 
```

另外，您是否使用在每个请求上自动重新生成会话 ID 的框架？如果是这样，您可能会遇到问题。

如果您有一台开发机器可以使用并具有这样做的权限，您可以手动删除 /var/lib/php/session/ 目录中的所有会话。当您使用您的站点时，应该只创建一个会话文件。您还可以检查该文件以查看写入的内容和时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:31:56.610

该`session_start()`函数将为您处理创建和持久会话的尝试，由 PHP 的配置定义，或者如果您设置自己的保存处理程序，则可以在运行时选择。确保您阅读了此处的文档：

[http://us2.php.net/manual/en/function.session-start.php](http://us2.php.net/manual/en/function.session-start.php)

对于您的代码，您要确保`session_start()`在要保存或访问会话变量的任何页面的开头调用。所以你上面的页面可能看起来像：

```
 <?php

 session_start();

 $_SESSION['myvar'] = 'some value'; 
```

然后在不同的页面中，您可以尝试访问该值：

```
 <?php

 session_start();

 if ($_SESSION['myvar'] == 'some value') {

   // do something

 } 
```

那应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:31:37.020

似乎您正在使用不同的会话变量。一个用于 AJAX 调用，另一个用于普通页面调用。当您没有以相同的方式初始化两个调用（或使用初始化会话的相同起始代码）时，可能会发生这种情况。确保 session_start() 两个调用使用相同的[session_id](http://www.php.net/manual/es/function.session-id.php)。

```
// try in both calls
session_start();
echo session_id(); // must return the same id in both calls 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:41:30.493

为什么不使用未设置？这是正确的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T21:39:58.820

原来我正在处理的应用程序有它自己的 session_handler，如果在请求会话数据之前没有包含它，它总是无效的，即使它是相同的 session_id。

# mysql - MySQL 查询返回空

> ID：11105080
> 
> 赞同：0
> 
> 时间：2012-06-19T16:13:58.493
> 
> 标签：mysql

我有 2 个表 - 帖子和 postmeta。

```
posts
ID   title   category  post_status  post_type    

1    ABC      cat-1    Publish      Store
2    DEF      cat-2    Publish      Store
3    GHI      cat-3    Publish      Store
4    JKL      cat-2    Publish      Store
5    XYZ      cat-5    Draft        Store
6    MNO      cat-9    Publish      Article 
```

和

```
postmeta
meta_id post_id  meta_key    meta_value

109       1       city          1
110       1       featured      h
111       2       city          1,2
112       2       featured      both
113       3       city          2,3
114       3       featured      both
115       4       city          1
116       4       featured      n
117       5       city          1,4
118       5       featured      h 
119       6       city          1
120       6       featured      h 
```

我正在尝试运行一个查询，该查询将为我提供具有以下条件的帖子列表：

1.  其对城市的价值为 1 AND
2.  其特征值为 h 或两者 AND
3.  其发布状态为 Publish AND
4.  其帖子类型为商店
5.  按标题排序

我正在尝试的查询是

```
SELECT DISTINCT posts.ID , posts.*, postmeta.*
            FROM posts, postmeta
            WHERE posts.ID = postmeta.post_id
            AND (postmeta.meta_value  = 'h' OR postmeta.meta_value = 'both') 

AND (postmeta.meta_key = 'post_city_id' AND (postmeta.meta_value LIKE '%,1,%' OR postmeta.meta_value LIKE '%1,%'  OR postmeta.meta_value LIKE '%,1%' OR postmeta.meta_value LIKE '%1%'))

            AND posts.post_status = 'Publish' 
            AND posts.post_type = 'Store'

            ORDER BY (SELECT postmeta.meta_value from postmeta where (posts.ID = postmeta.post_id) and postmeta.meta_key LIKE '%home_featured_type%') asc, posts.post_title LIMIT 0,6 
```

正确的返回将是 ID 1 和 2，即 abc 和 def。但我得到的是空的结果。我无法弄清楚它在哪里分崩离析。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:34:00.823

这是一个固定的查询，但我仍然不明白这个神秘的`ORDER BY (SELECT)`东西。

[http://sqlfiddle.com/#!2/5ce5a/19](http://sqlfiddle.com/#!2/5ce5a/19)

```
SELECT DISTINCT posts.ID , posts.*, postmeta_city.*, postmeta_featured.*

FROM       posts

INNER JOIN postmeta AS postmeta_city
     ON     postmeta_city.post_id = posts.ID
    AND     postmeta_city.meta_key = 'city'
    AND (   postmeta_city.meta_value LIKE '%,1,%'
         OR postmeta_city.meta_value LIKE '%1,%'
         OR postmeta_city.meta_value LIKE '%,1%'
         OR postmeta_city.meta_value LIKE '%1%'
        )
INNER JOIN postmeta AS postmeta_featured
     ON     postmeta_featured.post_id = posts.ID
    AND     postmeta_featured.meta_key = 'featured'
    AND (   postmeta_featured.meta_value = 'h'
         OR postmeta_featured.meta_value = 'both'
        )

WHERE posts.post_status = 'Publish' 
  AND posts.post_type = 'Store'

ORDER BY (
    SELECT postmeta.meta_value
    FROM postmeta
    WHERE ( posts.ID = postmeta.post_id )
      AND postmeta.meta_key LIKE '%home_featured_type%'
  ) asc,
  posts.title

LIMIT 0,6;
; 
```

更新了其他人的想法，请点赞：

[http://sqlfiddle.com/#!2/5ce5a/33](http://sqlfiddle.com/#!2/5ce5a/33)

```
SELECT DISTINCT posts.ID , posts.*, postmeta_city.*, postmeta_featured.*

FROM       posts

INNER JOIN postmeta AS postmeta_city
     ON postmeta_city.post_id = posts.ID
    AND postmeta_city.meta_key = 'city'
    AND FIND_IN_SET('1', postmeta_city.meta_value)

INNER JOIN postmeta AS postmeta_featured
     ON postmeta_featured.post_id = posts.ID
    AND postmeta_featured.meta_key = 'featured'
    AND postmeta_featured.meta_value IN ('h','both')

WHERE posts.post_status = 'Publish' 
  AND posts.post_type = 'Store'

ORDER BY (
    SELECT postmeta.meta_value
    FROM postmeta
    WHERE ( posts.ID = postmeta.post_id )
      AND postmeta.meta_key LIKE '%home_featured_type%'
  ) asc,
  posts.title

LIMIT 0,6;
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:30:06.383

你得到一个空的结果集，因为你正在`AND`输入`meta_value`列，所以它必须同时等于两个值，这是不可能的。像这样的东西`val = '1' AND val = 'both'`总是会返回 false 并且没有任何行会加入。相反，您必须使用`OR`介于条件之间：城市 -> 1 和特色 -> h/both。

由于帖子必须同时包含 city -> 1 和 features -> h/both （不是跨列而是跨多行），因此您需要一个`HAVING`与 a 结合的子句`GROUP BY`以确保每个帖子连接两行，同时满足两者条件......不是一个或另一个。

此外，`LIKE`要检查`1`. 您可以改用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)：

```
SELECT
    *
FROM
    posts a
INNER JOIN
    postmeta b ON a.ID = b.post_id
    AND
    (
        (b.meta_key = 'city' AND FIND_IN_SET('1', b.meta_value) > 0)
        OR  
        (b.meta_key = 'featured' AND b.meta_value IN ('h', 'both'))
    )
WHERE
    a.post_status = 'Publish'
    AND a.post_type = 'Store'
GROUP BY
    a.ID
HAVING
    COUNT(*) = 2
ORDER BY
    a.title 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:37:33.390

试试这个 ：

```
SELECT DISTINCT posts.ID , posts.*, postmeta.*
            FROM posts AS p INNER JOIN postmeta AS pm
            WHERE p.ID = pm.post_id
            AND (pm.meta_value  in ('h','both') 

AND (pm.meta_key = 'city' AND 
(pm.meta_value LIKE '%,1,%' OR pm.meta_value LIKE '%1,%'  OR pm.meta_value LIKE '%,1%' OR pm.meta_value LIKE '%1%'))

            AND posts.post_status = 'Publish' 
            AND posts.post_type = 'Store'

            ORDER BY p.title LIMIT 0,6 
```

由于您只想按标题排序，因此无需在“order by”子句中编写任何查询。

# salesforce - 使用电子邮件模板在 Salesforce 中设置WhatId

> ID：11105086
> 
> 赞同：4
> 
> 时间：2012-06-19T16:14:22.097
> 
> 标签：salesforce, apex-code

我必须使用电子邮件模板向 Salesforce 中的用户发送电子邮件。此模板包含自定义对象的合并字段类型。

```
 Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage();
mail.setTargetObjectId(user.get(0).id);

mail.setTargetObjectId(user.get(0).Id)
mail.setTemplateId(specifier.get(0).Template_id__c);
mail.saveAsActivity = false;
mail.setWhatId(custom_object.Id); 
```

我在文档中阅读如果您为 targetObjectId 字段指定联系人，您也可以指定 whatId。这有助于进一步确保模板中的合并字段包含正确的数据。该值必须是以下类型之一： Account Asset Campaign Case Contract Opportunity Order Product Solution Custom

但是如果我们向不联系的用户发送电子邮件，那么如何为自定义对象中的合并字段类型分配自定义对象，如上面的代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T02:00:14.827

在他们的电子邮件方法中，这是一个巨大的整体，多年来一直困扰着我。特别是给定的工作流电子邮件警报似乎没有问题为用户发送电子邮件模板。唉，如果你的目标是用户，你就不能使用 setWhatId() 。但是您可以[投票](http://success.salesforce.com/ideaView?id=08730000000BrTLAA0)让他们添加该功能，

我已经解决了这个问题，我通常创建一个与用户同名和电子邮件的联系人，使用它来发送电子邮件，然后将其删除。这很好用，尽管处理联系人对象上的验证规则可能是一个挑战。查看他们的[开发板](http://boards.developerforce.com/t5/Apex-Code-Development/SingleEmailMessage-using-setTemplateId-NEED-URGENT-HELP/m-p/424471#M76862)进行完整讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T18:55:22.903

您可以获取模板并替换合并字段，如下所示：

```
EmailTemplate template = [SELECT Id, Subject, HtmlValue, Body FROM EmailTemplate WHERE Name = 'Case Update'];
Case modifiedCase = [SELECT Account.Id, Account.Name, Owner.FirstName, Owner.LastName, CaseNumber, Subject, LastModifiedBy.FirstName,  LastModifiedBy.LastName from Case where Id=:modifiedCaseId];

String subject = template.Subject;
subject = subject.replace('{!Case.Account}', modifiedCase.Account.Name);
subject = subject.replace('{!Case.CaseNumber}', modifiedCase.CaseNumber);
subject = subject.replace('{!Case.Subject}', modifiedCase.Subject);

String htmlBody = template.HtmlValue;
htmlBody = htmlBody.replace('{!Case.Account}', modifiedCase.Account.Name);
htmlBody = htmlBody.replace('{!Case.OwnerFullName}', ownerFullName);
...

Messaging.SingleEmailMessage email = new Messaging.SingleEmailMessage();
email.setSubject(subject);
email.setHtmlBody(htmlBody);
Messaging.sendEmail(new Messaging.SingleEmailMessage[] {email}); 
```

只要模板中没有添加新字段，这将正常工作。管理员可以在不需要更改代码的情况下弄乱电子邮件的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:33:53.073

不确定这是否可行，但这取决于您的自定义对象与将接收合并电子邮件的用户之间的关系。User 和 CustomObject 之间是否存在一对一的关系？如果是这样，也许添加对每个用户对象引用的单个自定义对象实例的引用，然后在您的用户对象上添加自定义公式字段就`CustomObject__r.CustomField__c`可以了。

在用户对象的自定义公式字段中：

```
TEXT(CustomObject__r.CustomField__c) 
```

然后您的模板可以更改为用户模板，合并字段将是实际指向您的自定义对象实例的公式字段。但是如果你在 User 和 CustomObject__c 之间有一些其他的关系，比如一对多或多对多，我认为你不走运。

# c - 对于 readdir_r，entry 和 result 可能具有相同的值吗？

> ID：11105087
> 
> 赞同：0
> 
> 时间：2012-06-19T16:14:24.783
> 
> 标签：c, readdir

我可以这样使用`readdir_r`吗？我在规范中没有找到任何关于它的信息，但也许我只是瞎了......

```
readdir_r(dir, entry, &entry); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:45:08.120

它是 readdir_r ，第二个参数是*指向struct* **dirent**的指针，而不是 struct dirent 本身，第三个参数是指向 struct dirent 的指针，它接收 struct dirent 的地址或 NULL 表示 end-of -目录。用法类似于

 *```
struct dirent* pentry = malloc(offsetof(struct dirent, d_name) +
                             pathconf(dirpath, _PC_NAME_MAX) + 1);
if (!pentry)
    out_of_memory();

for (;;){
   struct dirent* result;
   readdir_r(dirp, pentry, &result); // you can check the return code, but it only fails if dirp is invalid
   if( !result )
       break;
   // process result
}
free(pentry); 
```

正如 Hristo 上面指出的那样，参数是按值传递的，因此您*可以*将第二个 arg（pentry）的地址作为第三个 arg（即 &pentry）传递——它不会影响 readir_r，它无法判断。但是，当您到达目录末尾时，它将在 penentry 中存储 NULL，但是您需要 penentry 的值才能释放它指向的 malloced 缓冲区。所以忘记是否允许使用第二个参数的地址......这样做是没有意义的、误导的，并且会导致内存泄漏。

有关 readdir_r 的规范，请参阅 [http://www.kernel.org/doc/man-pages/online/pages/man3/readdir.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/readdir.3.html) 或 [http://pubs.opengroup.org/onlinepubs/009695399/functions /readdir.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/readdir.html)*

# c# - 返回列表 从数据库

> ID：11105090
> 
> 赞同：3
> 
> 时间：2012-06-19T16:14:30.677
> 
> 标签：c#, sql-server, list, executescalar

我有一个简单的问题，尽管在谷歌上搜索了很多，但我还是找不到答案。也许张贴这个问题会帮助下一个寻找相同答案的可怜人。

我有一个返回不同 ID 集合的查询。

我正在`SQLCommand`使用此查询创建一个并使用`ExecuteScalar( )`它来运行它。

`ExecuteScalar( )`似乎返回了一个对象，并且不允许我将其转换为 List。

解决此问题的最佳做法是什么？如何解决此问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:16:45.717

执行标量返回单条数据。想一排一列。如果你想返回一个集合，你需要调用`ExecuteReader()`. 这将返回一个`IDataReader`. 然后您可以遍历记录并返回您的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T16:16:37.493

[执行标量](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)：

> 执行查询，并返回查询返回的结果集中**第一行的第一列。****其他列或行将被忽略**。

您需要使用[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)：

```
SqlCommand command = new SqlCommand(queryString, connection);
IList<int> ints = new List<int>();
using(SqlDataReader reader = command.ExecuteReader()) {
     while (reader.Read())
     {
         ints.add(reader.GetInt32(0)); // provided that first (0-index) column is int which you are looking for
     }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T16:16:24.113

`ExecuteScalar(`) - 仅返回第一行和第一列....

检查 msdn：[SqlCommand.ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

你需要使用这样的东西来获得结果，即[ExecuteReader](http://msdn.microsoft.com/en-us/library/y6wy5a0f.aspx)

```
 using (IDataReader reader = 
        command.ExecuteReader(CommandBehavior.CloseConnection))
 {
      List<int> intlist = ReadList(reader);
 } 
```

创建列表的方法

```
List<int> ReadList(IDataReader reader)
{
    List<int> list = new List<int>();
    int column = reader.GetOrdinal("MyColumn");

    while (reader.Read())
    {
        //check for the null value and than add 
        if(!SqlReader.IsDBNull(column))
             list.Add(reader.GetInt32(column));
    }

    return list;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T16:18:35.353

`ExecuteScalar`方法返回查询返回的结果集中第一行的第一列。其他列或行将被忽略。

如果您想要一个项目列表，您应该使用`ExecuteReader`并循环通过阅读器并阅读所需的值

```
List<int> items=new List<int>();
using (IDataReader reader = db.ExecuteReader(dbCommand))
{
      while (reader.Read())
      {
         items.Add(reader.GetInt32(reader.GetOrdinal("YourColumnName"));
      }
} 
```

# c# - 将 Migrator.NET 添加到现有的生产数据库

> ID：11105093
> 
> 赞同：3
> 
> 时间：2012-06-19T16:14:51.553
> 
> 标签：c#, database, migration, migratordotnet

我有兴趣开始将 Migrator.NET 与现有的生产数据库一起使用。我有一些需要支持的初始状态：

a) 数据库处于当前版本（我们开始使用 Migrator 的版本），无需升级。初始化 Migrator 为将来的数据库升级做准备。

b) 没有数据库，运行我的初始数据库创建脚本（让我们的数据库达到使用 Migrator 开始的点）。将 Migrator 版本初始化为 0（或 1？），为将来的数据库升级做准备。在初始化起点后运行可能需要的任何数据库迁移。

关于如何最好地处理这件事有什么想法吗？

顺便说一句，我对除 Migrator .NET 之外的其他解决方案持开放态度。这似乎是最成熟的，尽管它还没有开发一年多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:18:29.897

看看[FluentMigrator](https://github.com/schambers/fluentmigrator)和[RoundhouseE](https://github.com/chucknorris/roundhouse)。我曾经使用过 Migrator.NET，但不幸的是它被放弃了。

您的要求看起来相当标准。我认为他们俩都支持这种情况。您可以从基线 sql 脚本开始创建数据库架构，或者说当前数据库是起点并保存数据库的副本（架构和数据），然后恢复该数据库以初始化该过程。

# jquery - 数据表更改选定的行分隔符

> ID：11105098
> 
> 赞同：1
> 
> 时间：2012-06-19T16:15:00.850
> 
> 标签：jquery, datatables

我正在使用 jquery 数据表：

[http://datatables.net/release-datatables/examples/server_side/select_rows.html](http://datatables.net/release-datatables/examples/server_side/select_rows.html)

当您选择多行时，ID 通过逗号串在一起。有没有一种快速简便的方法来修改代码，以便它们通过 | 串起来？（管道）因为我打算使用可能包含逗号的文本 id，所以当我分解字符串时，我可能会得到不正确的结果。

- - - - - - - - - - - - - - -更新 - - - - - - - - - - ----------------

请参考：[http](http://www.kwedsd.byethost7.com/1.html) ://www.kwedsd.byethost7.com/1.html ，现在如果你在浏览器中打开控制台，然后点击多行你会看到串在一起的值（实际的表格行是可点击的)，我宁愿使用 | （管道）而不是逗号，因为分隔符有办法实现这一点。

将所选行字符串化的代码是：

```
$('#example tbody tr').live('click', function () {
    var aData = oTable.fnGetData( this );
    var iId = aData[0]; 
    if ( jQuery.inArray(iId, gaiSelected) == -1 ){
        gaiSelected[gaiSelected.length++] = iId;
    }else{
        gaiSelected = jQuery.grep(gaiSelected, function(value) {
            return value != iId;
        } );
    }
    console.log(gaiSelected);
    $(this).toggleClass('row_selected');
} ); 
```

# android - 从其他应用打开 Twitter 应用中的页面 - Android

> ID：11105103
> 
> 赞同：81
> 
> 时间：2012-06-19T16:15:09.340
> 
> 标签：android, twitter

我正在寻找某种方式来启动 Twitter 应用程序并从我的应用程序中打开指定页面，而无需 webview。我在这里找到了 Facebook 的解决方案： [Opening facebook app on specified profile page](https://stackoverflow.com/questions/10788247/opening-facebook-app-on-specified-profile-page?answertab=active#tab-top)

我需要类似的东西。

**编辑** 我刚刚找到了一个解决方案：

```
try {
    Intent intent = new Intent(Intent.ACTION_VIEW,
    Uri.parse("twitter://user?screen_name=[user_name]"));
    startActivity(intent);
} catch (Exception e) {
    startActivity(new Intent(Intent.ACTION_VIEW,
    Uri.parse("https://twitter.com/#!/[user_name]"))); 
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-12T16:12:38.670

根据 fg.radigales 的回答，如果可能的话，这就是我用来启动应用程序的方法，否则会退回到浏览器：

```
Intent intent = null;
try {
    // get the Twitter app if possible
    this.getPackageManager().getPackageInfo("com.twitter.android", 0);
    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("twitter://user?user_id=USERID"));
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
} catch (Exception e) {
    // no Twitter app, revert to browser
    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/PROFILENAME"));
}
this.startActivity(intent); 
```

**更新**

添加`intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);`以解决 Twitter 在我的应用程序中打开而不是作为新活动打开的问题。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-09-21T11:56:21.393

这对我有用：`twitter://user?user_id=id_num`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-10-19T12:05:18.343

通过 2 个步骤从使用 Android 的其他应用打开 Twitter 应用上的页面：

1.只需粘贴以下代码（在按钮单击或您需要的任何地方）

```
Intent intent = null;
try{
   // Get Twitter app
   this.getPackageManager().getPackageInfo("com.twitter.android", 0);
   intent = new Intent(Intent.ACTION_VIEW, Uri.parse("twitter://user?user_id=USER_ID"));
   intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
} catch () {
   // If no Twitter app found, open on browser
   intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/USERNAME"));
} 
```

2.`intent = new Intent(Intent.ACTION_VIEW, Uri.parse("twitter://user?user_id=USER_ID"));`

要获取 USER_ID，只需输入用户名[https://tweeterid.com/](https://tweeterid.com/)并在其中获取 Twitter 用户 ID

**参考**：[https ://solutionspirit.com/open-page-twitter-application-android/](https://solutionspirit.com/open-page-twitter-application-android/)

希望它会有所帮助:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-18T16:43:14.307

我的答案建立在 fg.radigales 和 Harry 被广泛接受的答案之上。如果用户安装了 Twitter 但已禁用（例如通过使用 App Quarantine），则此方法将不起作用。将选择 Twitter 应用程序的意图，但由于它被禁用，它将无法处理它。

代替：

```
getPackageManager().getPackageInfo("com.twitter.android", 0);
intent = new Intent(Intent.ACTION_VIEW, Uri.parse("twitter://user?user_id=2343965036")); 
```

您可以使用以下内容来决定要做什么：

```
PackageInfo info = getPackageManager().getPackageInfo("com.twitter.android", 0);
if(info.applicationInfo.enabled)
    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("twitter://user?user_id=2343965036"));
else
    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/wrkoutapp")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T16:40:21.033

试试这个代码片段。它会帮助你。

```
//Checking If the app is installed, according to the package name
        Intent intent = new Intent();
        intent.setType("text/plain");
        intent.setAction(Intent.ACTION_SEND);
        final PackageManager packageManager = getPackageManager();
        List<ResolveInfo> list = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);

        for (ResolveInfo resolveInfo : list) 
        {
            String packageName = resolveInfo.activityInfo.packageName;

            //In case that the app is installed, lunch it.
            if (packageName != null && packageName.equals("com.twitter.android")) 
            {
                try
                {
                    String formattedTwitterAddress = "twitter://user/" ;
                    Intent browseTwitter = new Intent(Intent.ACTION_VIEW, Uri.parse(formattedTwitterAddress));
                                    long twitterId = <Here is the place for the twitter id>
                    browseTwitter.putExtra("user_id", twitterId);
                    startActivity(browseTwitter);

                    return;
                }
                catch (Exception e) 
                {

                }
            }
        }

        //If it gets here it means that the twitter app is not installed. Therefor, lunch the browser.
        try
        { 
                            String twitterName = <Put the twitter name here>
            String formattedTwitterAddress = "http://twitter.com/" + twitterName;
            Intent browseTwitter = new Intent(Intent.ACTION_VIEW, Uri.parse(formattedTwitterAddress)); 
            startActivity(browseTwitter);
        }
        catch (Exception e) 
        {

        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-21T15:26:09.247

对我来说，如果你有 Twitter 应用程序或访问网络浏览器，它会打开 Twitter 应用程序：

```
 Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/"+"USERID"));
                    startActivity(intent); 
```

# c++ - 数据对话框验证：为空或已验证

> ID：11105105
> 
> 赞同：1
> 
> 时间：2012-06-19T16:15:12.003
> 
> 标签：c++, mfc

我正在尝试验证 MFC 中的一些代码，并且想知道如何验证 none 或范围之间的数字，即

```
void AddBuilding::DoDataExchange(CDataExchange* pDX)
{
    CDialogEx::DoDataExchange(pDX);

    DDX_Text(pDX, IDC_BUILDINGLATITUDE, m_Latitude);
    DDV_MinMaxFloat(pDX, m_Latitude, -90, 90);

} 
```

有任何想法吗？非常感谢！詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:28:16.847

要获得所需的内容，您可能必须编写自定义数据验证器。MFC[技术说明 026](http://msdn.microsoft.com/en-us/library/57weza95.aspx)介绍了如何执行此操作。它还包含有关如何扩展类向导以使用您的自定义例程的说明，而无需手动为其编写所有代码，但我不确定当前版本的 VS 是否真的支持这一点（考虑到VS 的那部分已经改变，我倾向于猜测“不是”，但我完全不确定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:00:12.657

```
void AddBuilding::DoDataExchange(CDataExchange* pDX) 
{ 
    CDialogEx::DoDataExchange(pDX); 

    DDX_Text(pDX, IDC_BUILDINGLATITUDE, m_Latitude); 

    if (pDX->m_bSaveAndValidate)
    {
      if (m_Latitude.GetLength()>0) // You may want to trim the string first.
      {
        m_fLatitude = _tsof(LPCTSTR(m_Latitude));
          // You probably need a better conversion function, that would tell you if
          // the string isn't a number, such as strtod() or sscanf().

        if (m_fLatitude<-90.0 || m_fLatitude>90.0)
        {
          pDX->PrepareEditCtrl(IDC_BUILDINGLATITUDE);
          AfxMessageBox(_T("Wrong latitude"),...);
          pDX->Fail();
        }
      }
    } 
} 
```

# vb.net - VB.Net DataGridView BindingSource 和结构数组未更新

> ID：11105108
> 
> 赞同：1
> 
> 时间：2012-06-19T16:15:35.453
> 
> 标签：vb.net, arrays, datagridview, structure, bindingsource

我遇到了一些问题，这一切都在一些简化的代码中得到了解释

我有一个结构

```
Public Structure myStruct
    Public Property name As String
    Public Property span As Double
    Public Property offs As Double
End Structure 
```

在 Singleton 对象中实例化如下

```
Public myValues(10) As myStruct 
```

然后在一个窗体上，我使用该结构作为 SourceBinder 的 DataSource，并将活页夹用作 DataGridView 的 DataSource。

在加载表单时，我将所有值放入活页夹

```
 For i As Integer = 0 To 9
        binder.Add(singleton.getRef.myValues(i))
    Next i 
```

所有值都显示在网格上。

用户应该能够更改值，这应该反映在 myValues 上，但不管我在 CellValueChanged 或 CurrentChanged 上放了什么代码。我不能让它反映变化。

在这些事件上使用断点，我注意到 grid.row().cell().values 和 binder.current 永远不会改变。

我还尝试放置一个按钮并直接更改 myValues 并重置活页夹，但没有任何反应`binder.ResetBindings(False)`。

据我所知，所有 ReadOnly 属性都设置为 false。

我还尝试在网格上将 VirtualMode 设置为 true 并捕获 CellValuePushed 和 CellValueNeeded 事件，但这些事件从未被调用。（那是在猜测基础上）

如果有人可以帮助我，我对这个真的没有想法！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:49:53.523

尝试改用一个类：

```
Public Class myStruct
  Public Property name As String
  Public Property span As Double
  Public Property offs As Double
End Class 
```

# python - 如何编写 Python 包/模块？

> ID：11105111
> 
> 赞同：4
> 
> 时间：2012-06-19T16:15:40.350
> 
> 标签：python, windows, python-2.7, pythonpath

由于我是新手，我开始通过使用 python GUI 编写简单程序来学习 python ..
每次，当我尝试清除控制台时，我需要定义以下几行代码

```
import os

def cls():
  os.system('cls')
  print("Console Cleared") 
```

后来我把它称为

```
cls() 
```

现在我厌倦了一遍又一遍地编写上面的代码（每次我打开 gui 窗口）..
所以，我想创建一个名为的模块以`cls`供将来使用以节省我的时间..
最后我会调用它如下

```
import cls

cls() 
```

有没有办法做到这一点 ...

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:37:27.840

好吧，一个解决方案是创建一个目录来添加你的模块并将这个目录添加到 Python pat。例如，您可以创建一个目录，让我们说，`C:\mypymodules`并在其中放置一个`cls.py`包含您的函数的文件。

现在，让我们将此目录添加到 Python 路径中。按照[这些说明](https://stackoverflow.com/a/4855685/287976)进行操作，只需插入`C:\mypymodules`其中提到的目录即可。现在，*打开一个新的命令行窗口*并尝试导入模块。

另一种解决方案是使用[distutils](http://docs.python.org/distutils/index.html) *. 不要创建自己的模块目录，而是在文件的同一目录中`cls.py`创建一个文件`setup.py`，其名称如下：

```
from distutils.core import setup
setup(name='cls', py_modules=['cls']) 
```

然后，只需执行它：

```
> python setup.py install 
```

这可能会将您的模块安装在默认的 Python 库目录中。实际上，这是打包、管理或 python 包的方式（或者更好的方式之一）。

（我并没有真正使用 Windows，所以一些细节可能会被破坏。尽管如此，我相信一般概念是相同的。）

* 有些人可能会争论使用[setuptools](http://packages.python.org/an_example_pypi_project/setuptools.html)，但我认为这对你的情况来说真的是矫枉过正。无论如何，如果您想了解更多信息，请参阅[此问题](https://stackoverflow.com/questions/6344076/differences-between-distribute-distutils-and-setuptools)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:20:16.180

如果您将`cls()`函数放在名为 的文件中`cls.py`，并将其放在与调用它的程序相同的目录中，或者放在`PYTHONPATH`系统上的某个位置，那么您可以像这样使用您的函数：

```
import cls

cls.cls() 
```

这是因为`cls()`函数在`cls`模块内部（模块的名称由文件名决定）。

如果您只想`cls()`做到这一点，请执行以下操作：

```
from cls import cls

cls() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:24:05.367

您可以通过使您的模块跨平台来为它增添一点情趣。这里是：

```
import os, sys
def cls():
    if 'win' in sys.paltform:
        os.system('cls')
        print 'Console cleared'
    else:
        os.system('clear')
        print 'Console cleared' 
```

现在，您可以在任何其他脚本中使用它：

```
from cls import cls
cls() 
```

# python - 实现具有多个索引的字典的数据结构？

> ID：11105115
> 
> 赞同：12
> 
> 时间：2012-06-19T16:16:03.210
> 
> 标签：python, dictionary

我正在寻找一种数据结构，它在两个不同的索引下保存相同的值，我可以通过**其中*一个***来访问数据。

例子：

```
x = mysticalDataStructure()
x.add(1,'karl', dog)
x.add(2,'lisa', cat)

$ x[1].age
2
$ x['karl'].age
2
$ x[1].age = 4
$ x['karl'].age
4 
```

是否有任何预先滚动的内容，或者我自己滚动的最佳方法是什么（我需要通过索引（以 1 为增量从 0 到 n 的数字）和通过字符串访问）。

`collections.ordereddict`似乎无法通过该位置进行快速随机访问，据我所知，我只能使用迭代器遍历它，直到到达元素`i`（我可以按正确的顺序插入）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T16:22:24.603

您不能只使用字典是否有特殊原因：

```
x = {}
x[1] = x['karl'] = dog
x[2] = x['lisa'] = cat 
```

然后你可以通过任何一个访问它。

如果您真的不想重复自己，请执行以下操作：

```
class MysticalDataStructure(dict):
    def add(self, key1, key2, value):
        return self[key1] = self[key2] = value

x = MysticalDataStructure()
x.add(1, 'karl', dog)
x.add(2, 'lisa', cat) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-19T17:12:12.767

```
class MultiKeyDict(object):

    def __init__(self, **kwargs):
        self._keys = {}
        self._data = {}
        for k, v in kwargs.iteritems():
            self[k] = v

    def __getitem__(self, key):
        try:
            return self._data[key]
        except KeyError:
            return self._data[self._keys[key]]

    def __setitem__(self, key, val):
        try:
            self._data[self._keys[key]] = val
        except KeyError:
            if isinstance(key, tuple):
               if not key:
                  raise ValueError(u'Empty tuple cannot be used as a key')
               key, other_keys = key[0], key[1:]
            else:
               other_keys = []
            self._data[key] = val
            for k in other_keys:
                self._keys[k] = key

    def add_keys(self, to_key, new_keys):
        if to_key not in self._data:
            to_key = self._keys[to_key]
        for key in new_keys:
            self._keys[key] = to_key

    @classmethod
    def from_dict(cls, dic):
        result = cls()
        for key, val in dic.items():
            result[key] = val
        return result 
```

用法：

```
>>> d = MultiKeyDict(a=1, b=2)
>>> d['c', 'd'] = 3 # two keys for one value
>>> print d['c'], d['d']
3 3
>>> d['c'] = 4
>>> print d['d']
4
>>> d.add_keys('d', ('e',))
>>> d['e']
4
>>> d2 = MultiKeyDict.from_dict({ ('a', 'b'): 1 })
>>> d2['a'] = 2
>>> d2['b']
2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:20:29.133

只需使用三张地图。

```
maps = [dict(), dict(), dict()]

def insert(rec):
   maps[0][rec[0]] = rec
   maps[1][rec[1]] = rec
   maps[2][rec[2]] = rec 
```

但是，对 rec 对象的关键属性的更改将需要重新插入。就像任何其他地图一样，当您更改对象的键时。

毕竟，映射只是映射键-> 对象。他们实际上并不存储对象的副本（它只是没有被垃圾收集）。所以地图就是一个索引，仅此而已。如果您想要三个索引，请使用三个映射。编写几个胶水代码函数来管理它们。

正如 Trevor 所提到的，您还可以使用共享字典：

```
index = dict()

def insert(rec):
    index[rec[0]] = rec
    index[rec[1]] = rec
    index[rec[2]] = rec 
```

那么您可以通过其中任何一个访问它。

不过要小心键冲突！

# xml - 如何格式化 XSD 文档？

> ID：11105118
> 
> 赞同：7
> 
> 时间：2012-06-19T16:16:05.513
> 
> 标签：xml, xsd

**问题：**

我有一个包含文档的 xsd 架构，例如：

```
<xs:element name="Tag" type="XTag">
  <xs:annotation>
    <xs:documentation>
      Do like this:
       - foo
       - bar
    </xs:documentation>
  </xs:annotation>
</xs:element> 
```

当我在 Eclipse 中查看文档时，空白被截断为一个空格，所以我最终得到：

```
Do like this: - foo - bar 
```

当文档不仅仅是一点注释时，这自然会限制可读性。例如，在 javadoc 中，可以使用一个 html 标签来格式化文档

**问题：**

有没有办法格式化文档，至少只是添加换行符？

**一些细节：**

我在 Eclipse 中做所有事情。我编写的 XSD 已添加到 中`preferences -> XML -> XML catalog`，因此我可以在 XML 编辑器中获得内容帮助和查看文档。

它是一个内部工具，唯一可以预见的查看文档的地方是通过 Eclipse 以上述方式。所以如果它在eclipse中工作，那就足够了:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-29T19:16:43.770

将您的文档嵌入`<![CDATA[ ]]>`并使用 html 表达式。下面的示例应该正确呈现。

```
<xs:annotation>
    <xs:documentation>
    <![CDATA[
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<br/>
Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
<p><b>Duis aute</b> irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. </p>
<br/>
<b>Excepteur sint occaecat cupidatat non proident,<br/>
<ul>
    <li>sunt in culpa qui officia</li> 
    <li>deserunt mollit anim</li>
    <li>id est laborum.</li>
</ul>
    ]]>
    </xs:documentation>
</xs:annotation> 
```

使用 Spring Tool Suite v3.6.4 (Eclipse 4.4.2) 测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T13:47:25.867

尝试将 html`<br/>`用于换行符和`List<ul><li>item</li></ul>`列表项。

不确定您是否应该嵌入“正在建设”的动画 GIF 甚至表格。它在记录 xsd 并使用 oXygen XML 编辑器创建相应的 xml 时对我有用。

# python - Python3：如何从具有类内函数的其他文件中获取值？

> ID：11105121
> 
> 赞同：0
> 
> 时间：2012-06-19T16:16:15.963
> 
> 标签：python, class, function

我想创建一个类来存储我的脚本必须处理的许多数据文件的属性。属性是在数据文件中找到的值，或者是根据在数据文件中找到的其他值计算得出的值。

不幸的是，我不了解我为实现该目标而编写的代码的输出。我认为这应该做的是：打印正在处理的文件的名称和该文件的值`seqlength`。实际输出在代码下方给出。

```
class SrcFile:

   def __init__(self, which):
      self.name = which       

   def seqlength(self):
      with open(self.name) as file:
         linecounter = 0
         for line in file:
            linecounter += 1
            if linecounter == 3:
            self.seqlength = int(line.split()[0])
            break

for f in files:
    file = SrcFile(f)
    print(file.name, file.seqlength) 
```

`file.name`这按预期打印，但`file.seqlength`它返回一个我不理解的值。

```
../Testdata/12_indels.ss <bound method SrcFile.seqlength of <__main__.SrcFile object at 0x10066cad0>> 
```

我很清楚，我不了解有关类和函数的基本知识。你清楚我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:19:30.350

`.seqlength`是一种方法和需要`()`，但你也没有从中返回任何东西。试试这个：

```
 def seqlength(self):
     with open(self.name) as file:
         linecounter = 0
         for line in file:
             linecounter += 1
             if linecounter == 3:
                 return int(line.split()[0]) 
```

然后调用它：

```
for f in files:
    file = SrcFile(f)
    print(file.name, file.seqlength()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:18:08.897

那是因为`.seqlength`是一种方法。

尝试做

```
print(filename, file.seqlength()) 
```

# c# - MvvmCross - 在 MonoTouch-Dialog 中使用 DateTimeElement 时出现空异常

> ID：11105125
> 
> 赞同：1
> 
> 时间：2012-06-19T16:16:35.137
> 
> 标签：c#, xamarin.ios, monotouch.dialog, mvvmcross

我在 MonoTouch Dialog 的 MvvmCross 实现中使用 DateElement。发生异常是因为 DateTimeElement 中的方法 UpdateDetailDisplay(UITableViewCell cell) 期望 cell 参数永远不会为空。

```
 protected override void UpdateDetailDisplay(UITableViewCell cell)
    {
        if (cell.DetailTextLabel != null)
        {
            cell.DetailTextLabel.Text = FormatDate(Value);
        }
    } 
```

似乎在设置 Dialog 视图期间调用了此方法 3 次：

1.  作为创建 DateElement 实例的结果

2.  关于绑定

3.  在调用 GetCell 时构建 TableView 期间。

cell 参数仅出现在事件 3 上。

我是不是做错了什么，或者该方法是否应该像 StringElement 那样对参数为 null 进行测试？

这是我在 MvxTouchDialogViewController 派生的 ViewDidLoad 事件中的代码：

```
 public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        this.Root = new RootElement("Sign-Up")
        {
            new Section()
            {
                Bind( new EntryElement("Gender:", "required"), "{'Value':{'Path':'Gender','Mode':'TwoWay'}}"),
                Bind( new EntryElement("First name:", "required"), "{'Value':{'Path':'FirstName','Mode':'TwoWay'}}"),
                Bind( new EntryElement("Last name:", "required"), "{'Value':{'Path':'LastName','Mode':'TwoWay'}}"),
                Bind( new EntryElement("Display name:", "required"), "{'Value':{'Path':'DisplayName','Mode':'TwoWay'}}"),
                Bind( new EntryElement("Email:", "required"), "{'Value':{'Path':'Email','Mode':'TwoWay'}}"),
                Bind( new EntryElement("Confirm email:", "required"), "{'Value':{'Path':'ConfirmEmail','Mode':'TwoWay'}}"),
                Bind( new EntryElement("Password:", "required",null,true), "{'Value':{'Path':'Password','Mode':'TwoWay'}}"),
                Bind( new EntryElement("Confirm password:", "required", null,true), "{'Value':{'Path':'ConfirmPassword','Mode':'TwoWay'}}"),
                Bind (new DateElement("Date of birth", DateTime.Now), "{'Value':{'Path':'DateOfBirth','Mode':'TwoWay'}}")
            },
        };
    } 
```

我只能通过使用我自己的方法从 DateElement 派生我自己的类来“解决”这个问题：

公共类 MyDateElement : DateElement { public MyDateElement (string caption, DateTime date) : base (caption, date) { }

```
 protected override void UpdateDetailDisplay(UITableViewCell cell)
    {
        if(cell == null)return;

        if (cell.DetailTextLabel != null)
        {
            cell.DetailTextLabel.Text = FormatDate(Value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:05:19.640

这看起来像是 MonoTouch.Dialog 和/或 MvvmCross 中的某个错误。

> 难道我做错了什么？

不。在我看来，你做的事情是对的。

我猜这个错误出现在您的示例中，因为 DateTimeElement 在列表中很长 - 所以当第一次绘制表格时它不在屏幕上（没有获得单元格）。

* * *

我不清楚最好的解决方案是否是您找到的解决方案，或者是否更改 ValueElement 中调用 UpdateXXXDisplay 以首先检查 null 的代码（或者是否要防御并同时做这两个！）

```
 private UITextAlignment _alignment;
    public UITextAlignment Alignment
    {
        get { return _alignment; }
        set { _alignment = value; UpdateCaptionDisplay(CurrentAttachedCell);}
    }

    private TValueType _value;
    public TValueType Value
    {
        get { return _value; }
        set { _value = value; UpdateDetailDisplay(CurrentAttachedCell); }
    } 
```

[我将在https://github.com/slodge/MvvmCross/issues](https://github.com/slodge/MvvmCross/issues)中将此作为问题记录下来，然后尽快修复它...

感谢您找到这个 - 以及非常详细的说明

# java - JavaEE：在请求/事务结束时执行任务

> ID：11105130
> 
> 赞同：4
> 
> 时间：2012-06-19T16:16:49.773
> 
> 标签：java, jboss, ejb, java-ee-6, cdi

我们有一种情况，我们想在请求或事务结束时执行一些任务。更具体地说，我们需要在该请求期间收集一些数据，最后我们使用这些数据进行一些自动数据库更新。

此过程应尽可能透明，即需要此过程的 EJB 用户不必担心这一点。

此外，我们无法控制确切的调用堆栈，因为进程有多个入口点。

为了实现我们的目标，我们目前正在考虑以下概念：

1.  某些低级操作（总是被调用）触发 CDI 事件
2.  一个无状态的 EJB 监听这些事件，并在接收到一个事件后收集数据并将其存储到一个作用域 CDI bean 中（请求作用域或会话作用域都可以）
3.  在请求结束时，另一个事件被触发，导致作用域 CDI bean 中的数据被处理

到目前为止，我们设法启动并运行了第 1 步和第 2 步。

但是，问题在于第 3 步：

正如我已经说过的，该流程有多个入口点（源自 Web 请求、预定作业或远程调用），因此我们想到了以下方法：

3a。CDI 扩展扫描所有 bean 并向每个 EJB 添加注释。

3b。为添加的注解注册了一个拦截器，因此在每次调用 EJB 方法时都会调用该拦截器。

3c。该拦截器的第一次调用将在被调用的方法返回后触发一个事件。

这就是问题所在（再次在第三步:)）：

拦截器如何知道它是否是第一次调用？

我们想到了以下方法，但到目前为止都没有奏效：

*   获取请求/对话范围的 bean
    *   失败，因为没有上下文处于活动状态
*   获取请求/对话上下文并激活它（然后应该标记第一次调用，因为在后续调用中上下文应该是活动的）
    *   系统创建了另一个请求上下文，因此 WELD 以至少两个活动请求上下文结束并对此抱怨
    *   转换上下文保持活动状态或过早停用（我们还不知道原因）
*   开始长时间的对话并在调用后结束
    *   失败，因为没有活动的请求上下文 :(

我们尚未尝试但似乎不鼓励的另一种选择：

*   使用 ThreadLocal 来存储一些上下文数据或至少使用调用上下文传播，如下所述：[http ://blog.dblevins.com/2009/08/pattern-invocationcontext-propagation.html](http://blog.dblevins.com/2009/08/pattern-invocationcontext-propagation.html)

但是，AFAIK 不能保证请求将完全由同一个线程处理，因此当容器决定切换到另一个线程时，甚至不会调用上下文传播中断？

所以，感谢所有与我一起忍受并阅读所有冗长描述的人。

欢迎任何有关如何解决此问题的想法。

顺便说一句，这是我们正在使用的一些软件组件/标准（我们无法切换）：

*   JBoss 7.1.0.Final（连同 WELD 和 CDI 1.0）
*   EJB 3.1
*   Hibernate 3.6.9（还不能切换到 4.0.0）

**更新**：

根据您迄今为止提供的建议，我们提出了以下解决方案：

1.  使用请求范围的对象将数据存储在
2.  第一次将对象存储在该对象中时会触发事件
3.  在事务结束之前调用侦听器（使用`@Observes(during=BEFORE_COMPLETION)`- 谢谢，@bkail）

到目前为止，这有效，但仍然存在一个问题：

我们还有由 CDI 管理并自动注册到 MBean 服务器的 MBean。因此，这些 MBean 可以注入 EJB 引用。

但是，当我们尝试调用 MBean 方法时，该方法又调用 EJB 并因此导致上述过程启动，我们得到一个`ContextNotActiveException`. 这表明在 JBoss 中执行 MBean 方法时请求上下文没有启动。

当使用 JNDI 查找而不是 DI 来获取服务时，这也不起作用。

对此也有任何想法吗？

**更新 2**：

好吧，看来我们现在可以运行它了。

基本上我们做了我在之前的更新中描述的，并通过创建我们自己的范围和上下文（它在第一次调用 EJB 方法时激活并在相应的拦截器完成时停用）解决了上下文不活动的问题。

通常我们应该能够对请求范围做同样的事情（至少如果我们没有错过规范中的任何内容）但是由于 JBoss 7.1 中有一个错误，当从 MBean 调用 EJB 或计划的作业（执行 JNDI 查找）。

在拦截器中，我们可以尝试获取一个活动的上下文，并在失败时激活 bean 管理器中存在的一个（很可能`EjbRequestContext`在这种情况下），但尽管我们进行了测试，但我们宁愿不要指望它在每种情况下都能正常工作。

然而，自定义作用域应该独立于任何 JBoss 作用域，因此不应该在这里干涉。

感谢所有回答/评论的人。

所以还有最后一个问题：我应该接受谁的回答，因为你们都帮助我们进入了正确的方向？- 我会尝试自己解决这个问题并将这些点归因于 jan - 他得到的最少:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:02:55.490

使用带有注释的方法来完成这项工作[`@PreDestroy`](http://docs.oracle.com/javaee/6/api/javax/annotation/PreDestroy.html)。

```
@Named
@RequestScoped
public class Foo {

    @PreDestroy
    public void requestDestroyed() {
        // Here.
    }

} 
```

它在 bean 实例被容器销毁之前被调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:55:38.507

您正在寻找的是[SessionSynchronization](http://docs.oracle.com/javaee/6/api/javax/ejb/SessionSynchronization.html)。这让 EJB 与事务生命周期相关联，并在事务完成时得到通知。

请注意，我是在具体讨论事务，您提到“请求和事务”，我不知道您是指 EJB 事务还是与您的应用程序相关的东西。

但我说的是 EJB 事务。

缺点是它仅在调用特定 EJB 时调用，而不是一般的“所有”事务。但无论如何，这很可能是合适的。

最后，在这些临时回调区域中要小心——在这些生命周期方法中，事务性发生了一些奇怪的事情。最后，最终将东西放入一个本地的、基于内存的队列中，另一个线程为提交到 JMS 或其他任何东西而获得了该队列。缺点是它们与手头的交易有关，优点是它们确实有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:40:41.153

唷，这是一个复杂的场景:)

根据我对您到目前为止所尝试的了解，您在 CDI 技术方面非常先进 - 您没有什么大不了的。

我想说您应该能够在入口点激活对话上下文（您可能已经看过[相关的文档](http://docs.jboss.org/weld/reference/latest/en-US/html/contexts.html)？）并在整个处理过程中使用它。实际上可能值得考虑实现自己的范围。我曾经在一个遥远相关的场景中这样做过，我们无法判断我们是被 HTTP-request 还是 EJB-remoting 调用的。

但老实说，这一切都感觉太复杂了。这是一个相当脆弱的拦截器构造，它们通过事件相互通知，总而言之，这些事件似乎太容易被破坏。

是否有另一种更适合您需求的方法？例如，您可能会尝试连接事务管理本身并从那里执行您的数据积累？

# r - 无法使用 install.packages 安装 R-forge 包

> ID：11105131
> 
> 赞同：62
> 
> 时间：2012-06-19T16:16:50.487
> 
> 标签：r, svn, installation, package, r-forge

[这个](http://thread.gmane.org/gmane.comp.lang.r.finance/10265), [question](http://thread.gmane.org/gmane.comp.lang.r.finance/10022) , [is](http://thread.gmane.org/gmane.comp.lang.r.finance/9715) , [ask](http://thread.gmane.org/gmane.comp.lang.r.finance/9359) , [over](http://thread.gmane.org/gmane.comp.lang.r.finance/9169/focus=9170) , [and](http://thread.gmane.org/gmane.comp.lang.r.finance/9135) , [over](http://thread.gmane.org/gmane.comp.lang.r.finance/8645) , [and](http://thread.gmane.org/gmane.comp.lang.r.finance/7965) , [over](http://thread.gmane.org/gmane.comp.lang.r.finance/7173) , 在[R-sig-finance](https://stat.ethz.ch/mailman/listinfo/r-sig-finance)邮件列表上，但我认为在 stackoverflow 上没有被问到。

它是这样的：

我在哪里可以获得 R-forge 上托管的最新版本的 XYZ 包？我试图用 安装它`install.packages`，但这就是发生的事情：

```
> install.packages("XYZ",repos="http://r-forge.r-project.org")
Warning message: package ‘XYZ’ is not available (for R version 2.15.0) 
```

在 XYZ 的 R-forge 网站上查看，我发现该包无法构建。因此，没有下载源的链接。有没有其他方法可以获取源代码？获得源代码后，如何将其转换为可以加载的包`library("XYZ")`？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-19T16:16:51.160

R-Forge 可能由于几个不同的原因无法构建包。可能是文档尚未更新以反映代码中的最新更改。或者，可能是某些依赖项在构建时不可用。

您可以使用 svn 签出源代码。首先，在 R-Forge 网站上搜索项目，进入项目主页——例如[http://r-forge.r-project.org/projects/returnanalytics/](http://r-forge.r-project.org/projects/returnanalytics/) 点击 SCM 链接进入一个页面像这样 [http://r-forge.r-project.org/scm/?group_id=579](http://r-forge.r-project.org/scm/?group_id=579)

此页面将告诉您用于签出项目的命令。在这种情况下，您会得到

> 可以使用以下命令通过匿名访问签出此项目的 SVN 存储库。
> 
> svn checkout svn://svn.r-forge.r-project.org/svnroot/returnanalytics/

如果你在 Windows 上，你可能想要下载并安装[TortoiseSVN](http://tortoisesvn.net/)

一旦你安装了 TortoiseSVN，你可以在 Windows 资源管理器窗口中右击并选择“SVN checkout”。在“存储库的 URL：”字段中，输入您在 R-Forge 上找到的命令的“svn checkout”部分以外的所有内容。在这种情况下，您将输入“svn://svn.r-forge.r-project.org/svnroot/returnanalytics/”。

单击确定后，项目将下载到当前目录。

如果您使用的是类似 UNIX 的系统（或者如果您在安装 TortoiseSVN for Windows 时安装了命令行客户端工具，这不是默认设置），您可以在终端中键入 R-forge 为您提供的命令（系统终端，而不是 R 终端）

```
svn checkout svn://svn.r-forge.r-project.org/svnroot/returnanalytics/ 
```

这将在当前工作目录下创建一个新目录，其中包含包中的所有文件。在该目录的顶层将是一个名为“pkg”的子目录。这个特定的项目（returnanalytics）包含多个包。

```
ls returnanalytics/pkg
#FactorAnalytics  MPO  PApages  PerformanceAnalytics  PortfolioAnalytics 
```

但是一些 R-forge 项目只有一个包。例如

```
svn checkout svn://svn.r-forge.r-project.org/svnroot/random/
#Checked out revision 14.
ls random/pkg
#DESCRIPTION  inst  man  NAMESPACE  R 
```

现在您已经拥有了所有代码的本地副本，如果您希望能够安装该软件包，您必须先构建它。

注意事项：由于 R-Forge 未能构建软件包，因此软件包很可能存在问题。因此，如果您只是构建它，您可能会发现有些事情并没有按预期工作。特别是，很可能存在缺失或不完整的文档。

如果您使用的是类似 UNIX 的系统，则可以相对轻松地构建和安装该软件包。对于像returnanalytics这样的多包项目，如果你想安装，例如PortfolioAnalytics包，你可以这样做

```
R --vanilla CMD INSTALL --build returnanalytics/pkg/PortfolioAnalytics 
```

“PortfolioAnalytics”是包含您要构建/安装的包的目录的名称。对于单包项目，您可以像这样构建和安装

```
R --vanilla CMD INSTALL --build random/pkg 
```

如果您想在 Windows 上构建/安装软件包，请参阅[此问题](https://stackoverflow.com/questions/4739837/how-do-i-install-an-r-package-from-the-source-tarball-on-windows)并点击@JoshuaUlrich 提供的[两个](http://cran.r-project.org/doc/manuals/R-admin.html#Windows-packages) [链接](http://cran.r-project.org/doc/manuals/R-admin.html#The-Windows-toolset)

更多信息可以在[R 安装和管理](http://cran.r-project.org/doc/manuals/R-admin.html#Add_002don-packages)、[R-Forge 用户手册](http://download.r-forge.r-project.org/R-Forge_Manual.pdf)和[SVN 手册](http://svnbook.red-bean.com/)中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-12T01:41:44.050

如果（且仅当）您拥有适合您的操作系统的工具链，那么这可能会成功：

```
# First download source file to your working directory
# As an example use browser to download pkg:partykit from: 
#  http://download.r-forge.r-project.org/src/contrib/partykit_1.1-2.tar.gz
# Move to working directory
# Or in the case of returnanalytics (which is a bundle of packages):
# http://r-forge.r-project.org/R/?group_id=579 and download the tar.gz (source)
# Then in R:

install.packages( "partykit_1.1-2.tar.gz", repo=NULL, type="source")
# for the first of the ReturnAnalytics packages:
install.packages( "Dowd_0.11.tar.gz", repo=NULL, type="source") 
```

这些方向应该是“跨平台”。~~我不确定接受的答案中的说明是否适用于 Macs (OSX)~~。（我后来证实他们确实在 Mac 上“工作”，但发现这个过程比我上面建议的更复杂。他们确实产生了一个目录，其中包含应该成功的形式的包`R --vanilla CMD INSTALL --build pathToEachPackageSeparately`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-09T08:46:56.443

您尝试安装的软件包的当前版本也可能需要更新版本的 R，例如，您可能会看到如下错误：

“错误：这个 R 是 2.15.0 版，包 'PerformanceAnalytics' 需要 R >= 3.0.0”

然后你可以尝试更新你的 R

或者，如果您面临与我相同的情况，即尝试使用 pqR（当前使用 R 版本 2.15），您可以在此处找到过时的已实现包：

[http://cran.at.r-project.org/src/contrib/Archive/PerformanceAnalytics/](http://cran.at.r-project.org/src/contrib/Archive/PerformanceAnalytics/)

您可以从 R-Forge 包页面 -> “稳定版本：从 CRAN 获取 PerformanceAnalytics 1.4.3541” -> 旧资源：PerformanceAnalytics 存档到这里

例如，您会发现包 PerformanceAnalytics 版本 1.1.0 只需要 R >= 2.14

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-01T11:22:37.933

或者，您可以从 GitHub 安装特定包，如果它在 GitHub 上有一个存储库。

我跑了`install.packages('ggfortify')`，得到了

> 警告消息：“包 'ggfortify' 不可用（对于 R 版本 3.3.2）”</p>

[ggfortify](https://github.com/sinhrks/ggfortify)是同一包的 GitHub 存储库。

该[`devtools`](https://github.com/hadley/devtools)库允许您直接使用`install_github('username/repo')`.

```
library(devtools)
install_github('sinhrks/ggfortify') 
```

# java - JTable 不会听 Doubleclicks

> ID：11105133
> 
> 赞同：2
> 
> 时间：2012-06-19T16:16:51.630
> 
> 标签：java, swing, jtable, double-click, mouselistener

我正在尝试`JTable`使用默认组件为可编辑实现撤消（和重做）功能。`JTable`有一个额外的类来指定它的属性，称为`SpecifiedJTable`.

为此，我想抓住双击单元格的时刻（即选择/标记要编辑的单元格的时刻）以将单元格中的信息及其坐标推送到堆栈上。

这应该由`MouseListener`……至少这是我的想法。我试过这个（站在我`SpecifiedJTable`班的构造函数中）

```
class JTableSpecified extends JTable {
    private static final long serialVersionUID = 1L;
    private int c; // the currently selected column
    private int r; // the currently selected row

    public JTableSpecified(String[][] obj, String[] columnNames) {
        super(obj, columnNames); // constructs the real table
        // makes that you can only select one row at a time
        this.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        // makes that columns are not squeezed
        this.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        // forbids to rearrange the columns
        getTableHeader().setReorderingAllowed(false);
        // adds action listener
        this.getModel().addTableModelListener(new TableModelListener() {
            public void tableChanged(TableModelEvent e) {
                r = getSelectedRow();
                c = getSelectedColumn();
                // get the String at row r and column c
                String s = (String) getValueAt(r, c);
                if (jobDisplayed) jobSwitch(c, s);
                else resSwitch(c, s);
            }
        });    
        this.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
                if (e.getClickCount() == 2) {
                    System.out.println("test");
                }
            }
        });
    }
} 
```

但不知何故，clickCounter 不想达到任何高于 1 的值。

我很高兴得到任何答案和帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:56:00.653

您遇到的问题与使用有关，`mouseClicked()`而不是使用`mousePressed()`. 在这种情况下，似乎很难增加点击计数器，但仍然是可能的。我花了很多点击和鼠标移动来增加点击计数器超过 1。你可以在你的代码中自己尝试。要使计数器超过 1，您需要在同时将鼠标从一个单元格移动到另一个单元格时快速按下和释放鼠标（或者我只是幸运地在单元格之间单击？）。

正如您在这个完全工作的示例中所看到的，由您的代码制作，两次鼠标按下，使用该`mousePressed()`方法被检测得很好。

```
public class JTableSpecified extends JTable {
    private static final long serialVersionUID = 1L;

    public JTableSpecified(String[][] obj, String[] columnNames) {
        super(obj, columnNames); // constructs the real table
        // makes that you can only select one row at a time
        this.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        // makes that columns are not squeezed
        this.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        // forbids to rearrange the columns
        getTableHeader().setReorderingAllowed(false);
        // adds action listener
        this.getModel().addTableModelListener(new TableModelListener() {
            @Override
            public void tableChanged(TableModelEvent e) {
            }
       });        
        this.addMouseListener(new MouseAdapter() {

            @Override
            public void mousePressed(MouseEvent e) {
                if (e.getClickCount() == 2) {
                    System.out.println("test");
                }
                System.out.println("e.getClickCount() = " + e.getClickCount());
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JPanel panel = new JPanel();
                panel.add(new JTableSpecified(new String[][]{{"oi", "oi2"}, {"oi3", "oi4"}}, new String[]{"Col1", "Col2"}));
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setContentPane(panel);
                f.pack();
                f.setVisible(true);
            }
        });
    }
} 
```

**结论：**也许您实际上想使用该`mousePressed()`方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:04:51.920

BasicTableUI 通过进入被双击的单元格上的编辑模式来响应双击。它做了很多复杂的事情，其中​​一部分涉及创建一个 JTextField（或其他组件）以允许编辑数据，然后防止鼠标单击事件进一步传播。

如果您的表格或该表格单元格不可编辑，您可以使用点击计数 2、3、4、...轻松捕获鼠标事件。但由于您希望表格可编辑，您需要一种不同的方法。

一种想法是覆盖 JTable。[编辑CellAt()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#editCellAt%28int,%20int,%20java.util.EventObject%29)

一个更好的主意是忘记弄乱 JTable，而是监听表模型本身的数据变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T22:12:44.587

这个答案扩展了 Boro 的答案。
为了捕捉允许用户编辑表格的所有情况，我还需要为 F2 添加一个 KeyListener（其效果与双击单元格相同）并通过按任意键禁用自动单元格编辑。
我刚刚将它添加到 mouseListener 后面的构造函数中（见上文）

> // 通过按键禁止编辑
> this.putClientProperty("JTable.autoStartsEdit", Boolean.FALSE);
> 
> // keyListener 对按下 F2 做出反应（键码 113）
> this.addKeyListener(new KeyAdapter(){
> 
> > 公共无效keyPressed（KeyEvent e）{
> > 
> > > if (e.getKeyCode() == 113) System.out.println("test");
> > > }
> > > });

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T08:12:45.483

代码中的错误是 mouseClicked 方法在第一次单击时被调用。当双击发生时，mouseClicked 方法被再次调用。您可以为较早的单击事件放置一个静态变量（或类变量）来存储时间（使用 e.getWhen() 方法）。检查时差，如果它足够小，请执行您的操作（我建议调用 doubleClick 方法）。

您可能必须在您的类 JTableSpecified 中实现鼠标侦听器，因为静态变量可能不会放置在您现有的代码中。

# java - 从@XmlTransient 反转

> ID：11105136
> 
> 赞同：2
> 
> 时间：2012-06-19T16:17:03.627
> 
> 标签：java, xml, annotations, jaxb

@XmlTransient 阻止将 JavaBeans 属性映射到 XML 表示。是否有与此相反的东西，这意味着即使 WebService 未使用的方法也会被映射？如果这不可能，是否存在解决方法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:18:39.200

默认情况下，所有公共字段和属性都使用 JAXB 映射到 XML，除非它们使用`@XmlTransient`. 如果您只想映射显式注释的字段和属性，那么您可以使用`@XmlAccessorType(XmlAccessType.NONE)`.

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html](http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:50:48.760

JPA 的 @Transient 注释可防止序列化属性被持久化。

# spring - 如何解决spring mvc映射问题？

> ID：11105138
> 
> 赞同：1
> 
> 时间：2012-06-19T16:17:06.917
> 
> 标签：spring, mapping, pojo

我有一个简单的 Spring 程序，后端是带有 Restful Web 服务的 Spring MVC，前端是纯 HTML + ajax。

我的问题是，当我尝试使用以下内容将 HTTP 请求参数映射到 pojo 时，它总是失败：

```
@RequestMapping(value = "/books", method = RequestMethod.PUT)
    public @ResponseBody
    String updateBook(BookInfo book) 
```

这里我使用 PUT 方法，因为它是一个修改操作。也不例外，但我没有任何东西注入到书本对象中。

使用相同的 HTTP 请求参数，如果我将方法更改为 POST，并且客户端通过 POST 发送它，它将成功：

```
@RequestMapping(value = "/books", method = RequestMethod.POST)
public ResponseEntity<String> addBook(BookInfo book) 
```

这本时间书总是会被填满。

为什么 PUT 和 POST 有区别？还是返回类型的问题？（一个是 ResponseBody，另一个是 ResponseEntity）？或者，如果您使用 PUT，那么 pojo 必须在持久上下文中？

我应该如何调查这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:23:06.683

我认为这不是您的配置或代码的问题。在 Spring Framework 中，提供了一个名为**HiddenHttpMethodFilter**的过滤器，它为所有方法提供服务，但最初它将执行 POST 请求，但带有一个隐藏的**_method**表单字段。此过滤器读取此隐藏字段值，然后相应地更改方法值。请参阅[此链接](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)以了解更多信息。我认为使用此过滤器进行配置将解决您的问题。

希望这对您有所帮助。干杯。

# c# - 您可以在“Page_PreInit”之后/之前分配母版页吗？

> ID：11105140
> 
> 赞同：2
> 
> 时间：2012-06-19T16:17:13.157
> 
> 标签：c#, asp.net, webforms

我想动态设置母版页，但目前我有一个基本页面，`Page_PreInit`其中初始化/执行成员页面所需的各种任务。

现在我知道您可以通过放入成员页面来覆盖基本页面， `(new protected void Page_OnInit(..))`但我不想说基本页面已经完成了它的工作。

```
"this.MasterPageFile =" 
```

有没有办法在 之后或之前设置母版页`Page_PreInit`？
或者同时使用 Page PreInt 和 BasePage PreInt ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:20:25.213

## 编辑：重读你的问题，我看到你的问题：

```
public class BasePage : WebPage {
  protected void Page_PreInit(object sender, EventArgs e){
    //do stuff here
  }
}

public class MyPage : BasePage {
  protected void Page_PreInit(object sender, EventArgs e){
    //overwrites base class functionality
    //Pretty sure you can:
    base.Page_PreInit(sender,e);
  }
} 
```

* * *

## 原始答案

[http://msdn.microsoft.com/en-us/library/c8y19k6h.aspx#sectionToggle1](http://msdn.microsoft.com/en-us/library/c8y19k6h.aspx#sectionToggle1)

根据 MSDN，您可以*在* `Page_PreInit`.

有理由在之前或之后这样做`Page_PreInit`吗？无论如何，我并不完全确定在页面生命周期的预初始化之前会有什么有用的东西。

[![](../Images/3a0d78824094377740ddfd56bec1776e.png)](https://i.stack.imgur.com/X9fsd.png)
[（来源：[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC386473.png)）]

没有更早的钩子，除了页面构造函数，如果你可以在那里做的话。但是您还不能访问任何页面值。

# objective-c - 核心数据删除不成功*容易修复？*

> ID：11105145
> 
> 赞同：0
> 
> 时间：2012-06-19T16:17:33.280
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我有一个简单的 XCDataModel，其中包含一个具有一个属性的实体。本质上，我正在保存一系列日期。

现在，我知道我正在正确添加 NSDates，因为我在添加它们后运行了一个 fetch 请求并运行了如下结果：

```
for (NSManagedObject *info in fetchedObjects) {
    NSLog(@"Name: %@", [info valueForKey:@"attribute"]);
} 
```

并且每增加一个 NSDate 都会被计算在内。来自日志的示例：

```
2012-06-19 12:40:38.531 Arts Days[47194:16103] Name: 2013-03-27 04:00:00 +0000
2012-06-19 12:40:38.531 Arts Days[47194:16103] Name: 2013-03-01 05:00:00 +0000
2012-06-19 12:40:38.532 Arts Days[47194:16103] Name: 2013-01-01 05:00:00 +0000 
```

**现在，**当我尝试从 Core Data 中删除一个对象时，它被证明是不成功的（通过运行相同的 fetch 并再次运行结果）。

这是获取：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Entity" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

[fetchRequest setFetchBatchSize:366];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

NSError *error = nil;

[fetchRequest setSortDescriptors:sortDescriptors];

NSArray *fetchedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

for (NSManagedObject *object in fetchedObjects) {
    if ([[object valueForKey:@"date"] isEqualToDate:date]) {
        [managedObjectContext deleteObject:object];
    }
}
if (![managedObjectContext save:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
} 
```

此外，带有未解决错误的 NSLog 包含 nil nil ...

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:49:55.250

看来您使用了两个不同的`NSManageObjectContext`实例。`self.managedObjectContext`（一个 ivar）来设置你的获取请求并执行获取，但是一个本地实例来执行`deleteObject:`and`save:`操作。本地实例`managedObjectContext`可能是 nil 并且没有引用与 ivar 相同的对象。

# objective-c - 从调用无弧 C 函数的 ARC 方法释放对象

> ID：11105149
> 
> 赞同：4
> 
> 时间：2012-06-19T16:18:00.053
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在使用基于 ARC 的项目中不符合 ARC 的库。该库中的函数返回一个保留`UIImage *`对象。有没有办法使用`__bridge`属性让 ARC 知道这一点，以便它可以管理返回对象的保留计数？我试过了：

```
UIImage *returnedImage;
returnedImage = (__bridge_transfer UIImage *)functionThatReturnsAUIImage(); 
```

但它不允许我将`UIImage *`a 转换为`UIImage *`)。我也试过：

```
returnedImage = (UIImage *)(__bridge_transfer void *)functionThatReturnsAUIImage(); 
```

这也没有奏效。编译器建议`__bridge_retained`代替`__bridge_transfer`，但我相信这样做会与我所追求的相反（即它会增加返回`UIImage`对象的保留计数）。

我相信正确的做法是让 C 函数返回一个自动释放的对象。据我所知，ARC 假定任何返回对象的 C 函数都将返回一个自动释放的对象。我可以访问这个库的源代码，所以我可以这样做，但我想知道如果我无法修改库，是否有可以从调用方使用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T01:57:24.193

`bridge`逻辑修饰符对您不起作用，这太糟糕了。

两种可能的方法突然出现在我面前。

首先，虽然它并不优雅，但您可以编写自己的图像发布函数，例如：

```
//  ImageManualMemoryManagement.h

#import <UIKit/UIKit.h>

int releaseImage(UIImage *img); 
```

和

```
//  ImageManualMemoryManagement.m

#import "ImageManualMemoryManagement.h"

int releaseImage(UIImage *img)
{
    [img release];

    return 0;
} 
```

在项目的目标设置中，在 Build Phases 下，双击“Compile Sources”下的这个 .m 源文件并添加非 ARC 标志`-fno-objc-arc`（以允许您使用该`release`方法）。

你现在有了一个可以调用的函数，它可以减少 UIImage 的保留计数，然后一切都好起来了。

其次，更引人注目的解决方案是围绕图像库提供的整个 C 接口编写自己的非 ARC 包装类，以纠正那些没有返回具有正确保留计数的项目的少数方法。但是对于一次retainCount 违规似乎需要做很多工作。但是，如果图书馆有它自己的弱点（例如，你正在处理一个笨拙的低级图书馆），你可能会用一块石头杀死两只鸟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:27:27.873

根据苹果的[Transitioning to ARC Release Notes](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)，这里应该使用 __unsafe_unretained。

> __unsafe_unretained 指定一个不保持被引用对象活动的引用，并且在没有对该对象的强引用时不设置为 nil。如果它引用的对象被释放，则指针悬空。

因为 ARC 和 MRC（手动引用计数）的内存管理规则不同，所以没有一个对内存管理有影响的关键字起作用。唯一的选择是关键字 __unsafe_unretained，它对 ARC 和 MRC 都没有内存管理影响。

# mysql - 合并来自同一个表的两个 SELECTS

> ID：11105150
> 
> 赞同：0
> 
> 时间：2012-06-19T16:18:05.637
> 
> 标签：mysql

我有一张桌子，里面有项目：

*   标识（整数）
*   排序（整数）
*   内容（字符串）

我的项目页面显示当前项目和接下来三个项目的预览。为了获取接下来的三个项目，我想使用一个干净的 MySQL 查询。当然，如果此人在最后一个项目中，则没有剩下 3 个项目可以展示。

所以它需要再次显示第一个。

基本上我试图结合这两个陈述：

```
SELECT *
FROM projects
WHERE ordering > {currentProjectOrdering}
ORDER BY ordering ASC 
```

和

```
SELECT *
FROM projects
WHERE ordering > 0
ORDER BY ordering ASC 
```

并且

```
LIMIT 0,3 
```

简而言之：获取比当前项目排序更高的接下来三个记录，如果（其中一些）不存在，则从 ordering = 1 开始。

假设有 10 个项目：项目 1 显示 2,3 和 4 项目 2 显示 3,4 和 5 ...项目 9 显示 10、1 和 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:31:52.837

If you want data from first condition **AND** second condition use

```
SELECT *
FROM projects
WHERE ordering > {currentProjectOrdering} AND ordering > 0
ORDER BY ordering ASC
LIMIT 0,3 
```

If you want data from first condition **OR** second condition use

```
SELECT *
FROM projects
WHERE ordering > {currentProjectOrdering} OR ordering > 0
ORDER BY ordering ASC
LIMIT 0,3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:39:48.323

像这样的东西应该可以工作（假设你只限制那个人正在从事的项目）：

```
 SELECT * FROM projects WHERE person = person_id && (ordering > 0 && COUNT(id) < 4) 
|| (ordering >= currentProjectOrdering && COUNT(id) >= 4)) ORDER BY ordering LIMIT 0,3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:15:27.980

我很好奇这个。我没有 mysql 也无法测试，但我*认为*您不会在这些示例中获得所需的 3 条记录 - 如果您位于列表的末尾并且需要从列表中获取 1 或 2开始。我正在玩`TSQL`- 所以没有`LIMIT`因此`TOP`。

我也很好奇是否有人可以做得更好。

```
SELECT  TOP 3 
    CASE
    WHEN ORDERING >= {currentProjectOrdering} THEN ORDERING
    ELSE {currentProjectOrdering} - ORDERING END AS DISPLAYORDER,*
FROM SO_projects  
WHERE (ordering >= {currentProjectOrdering} AND ordering < {currentProjectOrdering}+ 3 ) OR ordering < 3
ORDER BY DISPLAYORDER DESC 
```

不能保证，因为我不知道 MYSQL，但这是我的尝试。在 T-SQL`TOP`中，根据 ORDER BY 返回指定数量的记录（在本例中为 3）。的 0,3 部分（我希望）中的 0 没有歧义`LIMIT`。我用谷歌搜索，看起来这些`CASE`东西应该非常相似。由于工作原理，您也许可以摆脱 > 和 < `LIMIT`。该逻辑适用于 SqlServer：

```
SELECT  
    CASE
    WHEN ORDERING >= {currentProjectOrdering} THEN ORDERING
    ELSE {currentProjectOrdering} - ORDERING END AS DISPLAYORDER,*
FROM SO_projects  
WHERE (ordering >= {currentProjectOrdering} AND ordering < {currentProjectOrdering} + 3    ) OR ordering < 3
ORDER BY DISPLAYORDER DESC 
LIMIT 0,3 
```

# c# - 从数据源填充的下拉列表 - 后面的代码无法访问值

> ID：11105154
> 
> 赞同：0
> 
> 时间：2012-06-19T16:18:19.933
> 
> 标签：c#, asp.net, data-binding, drop-down-menu, datasource

我有一个从数据库填充的 asp 保管箱：

这是aspx

```
<asp:DropDownList runat="server" ID="ddl_last" AppendDataBoundItems="true"> 
```

这是cs：

```
 ddl_last.DataSource = eggsContext.Customers;
        ddl_last.DataValueField = "last_name";
        ddl_last.DataTextField = "last_name";
        ddl_last.DataBind(); 
```

当我尝试从 c# 代码中获取 ddl_last.SelectedValue 时，我什么也没得到。事实上 ddl_last.Items 计数为 0！当我不从代码中填充它，而是在 aspx 中写入

```
<asp:ListItem Text="example" /> 
```

一切正常。

我可以通过编写 document.getElementById('ddl_last').value 从 javascript 获取值；

但我想知道微软这次搞砸了什么，这不是从背后的代码工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:51:17.430

在评论中看到您的问题后，我认为这可能会帮助您解决它：

> 要禁用页面的视图状态并为页面上的特定控件启用它，请将页面**和**控件的 EnableViewState 属性设置为 true，将页面的 ViewStateMode 属性设置为 Disabled，并将控件的 ViewStateMode 属性设置为启用。

[http://msdn.microsoft.com/en-us/library/system.web.ui.control.viewstatemode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.viewstatemode.aspx)

另请注意，在禁用 ViewState 的情况下，您仍然可以通过以下方式检索*发布*的值

```
if (Request["ddl_last"] != null)
    val = Request["ddl_last"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:48:03.173

看看这个问题，当您尝试访问 ddl_last.SelectedValue 和 ddl_last.Items 计数时，您的 ddl_last 列表似乎没有被数据绑定。确保在绑定数据后访问这些值

# c# - asp.net 更改.page 宽度

> ID：11105161
> 
> 赞同：0
> 
> 时间：2012-06-19T16:18:42.000
> 
> 标签：c#, asp.net, css, width

如何在页面后面的代码中以编程方式更改下面的 .page 宽度值？

我需要根据页面上其他元素的宽度来设置它，这些元素会根据用户操作而不断变化。

```
 .page
        {
            width: 1900px;
            margin: 0px auto 0px auto;
            position:fixed;
        } 
```

如何从 c# 代码更改它，它的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:29:27.183

如果你想使用 jQuery，你可以用 jQuery 来做 -

```
<script type="text/javascript">
  $(document).ready(function() {
    $('.page').css('width', $('.otherElementClass').width()+'px');
  });
</script> 
```

# c# - PDF 渲染良好，但打印时边缘呈锯齿状 - PDFSharp

> ID：11105165
> 
> 赞同：0
> 
> 时间：2012-06-19T16:18:56.993
> 
> 标签：c#, .net, pdf, printing, pdfsharp

我有一个通过 PDFSharp 生成 PDF 的复杂应用程序。我遇到了一个很难解决的问题。

渲染旋转图像（文本也是图像）时，生成的 PDF 看起来不错，但打印时它的边缘参差不齐，而且通常混乱——见附件。

以下是相关代码：

```
// determine how big the image should be
double destinationWidth = Math.Round(pageWidth * imageInfo.WidthFactor);
double destinationHeight = destinationWidth;

// rescale the image to needed size
imageInfo.Image = ImageHelper.ResizeImage(imageInfo.Image, (int)(destinationWidth * 3), (int)(destinationHeight * 3));

// get image
XImage xImage = XImage.FromGdiPlusImage(imageInfo.Image);

// define fill area
XRect destination = new XRect();
destination.X = imageInfo.XFactor * pageWidth;
destination.Y = imageInfo.YFactor * pageHeight;
destination.Width = destinationWidth; //pageWidth * imageInfo.WidthFactor;
destination.Height = destinationHeight; //destination.Width; // shouldn't this use the page height and height factor?

// save state before rotate
XGraphicsState previousState = gfx.Save();

// rotate canvas
gfx.RotateAtTransform(imageInfo.RotationAngle, new XPoint(destination.X + destination.Width / 2, destination.Y + destination.Height / 2));

// render image
gfx.DrawImage(xImage, destination);

// undo transforms
gfx.Restore(previousState); 
```

请，请，帮助。它可以从 Chrome 的 PDF 查看器中很好地打印出来，物有所值。

我尝试将图像转换为 SVG（逐个像素）并进行渲染，效果很好，但性能使其不可行。我需要找到一个更优雅的解决方案。

非常感谢！

PDF： [https ://dl.dropbox.com/u/49564994/PDF.pdf](https://dl.dropbox.com/u/49564994/PDF.pdf)

打印输出： [https ://dl.dropbox.com/u/49564994/Print.jpg](https://dl.dropbox.com/u/49564994/Print.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:32:40.390

大约两年前，我遇到了类似的问题。生成的 PDF 在我打印时全部乱码。那只是一份报告，没有任何图像，但少了几个句子或单词。

我使用了 Word 模板，替换了一些占位符以生成报告，然后使用 Office [Save As PDF 插件将](http://www.microsoft.com/en-us/download/details.aspx?id=9943)Word 文档保存为 PDF 。

当您使用 PCL 打印机驱动程序或 PostScript 打印机驱动程序打印 PDF 时，会有所不同。看看你是否得到它们之间的任何区别。可能是字体问题。检查字体编码是否设置正确。

当时我没有找到解决办法。最后求助于将PDF转换为图像并将其发送到打印机。工作得很好。

这也应该可以通过[调用 GhostScript 从 PDF 页面创建图像来](http://www.pdfsharp.net/wiki/PDFsharpFAQ.ashx#Can_PDFsharp_show_PDF_files_Print_PDF_files_Create_images_from_PDF_files_3)使用 PDFSharp 。

# javascript - 使用ajax比较两个xml值

> ID：11105170
> 
> 赞同：2
> 
> 时间：2012-06-19T16:19:22.830
> 
> 标签：javascript, html, xml, ajax

好的，所以我正在尝试使用微芯片的 Pic-web 监控和控制某些东西。除了一件事，我设法将它全部编程。我需要比较它给我的两个温度，如果其中一个比另一个小，则需要激活一个继电器，如果它更大或相等，则必须激活另一个继电器。据我了解，Pic-web 更新了一个 xml 文件（status.xml），然后网站（使用 ajax）从那里获取值并将它们显示在网页上。

XML 文件如下所示

```
<response>
<temp0>~temp~</temp0>
<temp2>~tempc~</temp2>
</response 
```

我用来获取网页中的值的 ajax 代码

```
document.getElementById('temp0').innerHTML = getXMLValue(xmlData, 'temp0');
document.getElementById('temp2').innerHTML = getXMLValue(xmlData, 'temp2'); 
```

为了显示它们，我使用

```
<span id="temp0"style="font-weight:normal">?</span>
<span id="temp2"style="font-weight:normal">?</span> 
```

我需要做的就是比较 temp0 和 temp2

```
 var temp0 = parseFloat(document.getElementById('temp0').innerHTML)
    var temp2 = parseFloat(document.getElementById('temp2').innerHTML)

    if( temp0 < temp2 ) 
    {
        document.getElementById('temp3').innerHTML = '<font color="#00FF00">ON</font>';
    } 
    else 
    {
        document.getElementById('temp3').innerHTML = '<font color="#00FFFF">OFF</font>';

} 
```

我只是添加`<span id="temp3">?</span>`以显示结果

我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:27:05.187

```
if(getXMLValue(xmlData, 'temp0') < 'temp2') 
```

`'temp0'`不是 的值`document.getElementById('temp0')`，它只是一个包含“temp0”的字符串。

您需要将其分配给变量并将其转换为字符串中的数字：

```
var temp0 = parseFloat(document.getElementById('temp0').innerHTML)
var temp2 = parseFloat(document.getElementById('temp2').innerHTML) 
```

然后使用：

```
if(temp0 < temp2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:26:05.570

这条线看起来不正确...

```
if(getXMLValue(xmlData, 'temp0') < 'temp2') 
```

应该是……？

```
if(getXMLValue(xmlData, 'temp0') < getXMLValue(xmlData, 'temp2')) 
```

并且除非 getXMLValue 返回一些种类，否则您需要在比较之前对其进行转换

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:27:46.350

像这样的东西怎么样：

```
var temp0 = parseInt(getXMLValue(xmlData, 'temp0'))
  , temp2 = parseInt(getXMLValue(xmlData, 'temp2'));

if( temp0 < temp2 ) {
    ...
} else {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:16:10.170

```
// Compare the two temperatures
var temp0 = parseFloat(document.getElementById('temp0').innerHTML)
var temp2 = parseFloat(document.getElementById('temp2').innerHTML)

if( temp0 < temp2 ) {
    document.getElementById('temp3').innerHTML = '<font color="#00FF00">ON</font>';
} else {
    document.getElementById('temp3').innerHTML = '<font color="#FF0000">OFF</font>';
} 
```

如果 temp2 > temp0 这将显示 ON

如果 temp0 < temp2 则关闭

谢谢大家的支持

# sql - 如何理解已经开发的数据库？

> ID：11105179
> 
> 赞同：18
> 
> 时间：2012-06-19T16:19:40.207
> 
> 标签：sql, foxpro

我的问题可能看起来有点奇怪，但我相信你们中的大多数人可能已经经历过这个阶段。

我目前正在从事一个数据库迁移项目（从 FoxPro 到 SQL Server）。正在迁移的数据库很大，我是这个项目的新手。有什么简单的方法可以理解这样的数据库吗？就像表格是如何相关的以及它是如何建模的。此数据库上没有可用的适当文档。

我认为了解它的构建方式可以更轻松地编写新的查询/存储过程。只是想知道任何捷径。

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-19T17:26:07.977

实际上，我希望您在这里找不到太多答案，因为我的职业生涯是基于进入这些大型无证数据模型并试图弄清楚它们。但对于它的价值：

*   我不喜欢自动数据建模器/电子建模器，尽管这可能是个人意见。我的偏好是找一块白板（或纸），然后用手画出你的数据模型。如果您是动觉学习者（通过参与来学习），我发现这是熟悉新数据库的最佳方式......就像自动化系统读取数据库一样好，您不会当你用手画它时，你会知道你会做什么。

*   数据建模技术的数量有限，但是它们可以以多种方式组合。我猜像你这里有一个更大的数据库，你将有多个程序员创建它，这意味着你可能会看到在同一个数据库中使用多种技术。在过去，我发现一个系统将其电路信息存储为一个单独的表，该表自我重复地连接到自身以存储数据电路的信息，而客户信息部分是一个非常直接的星形设计......2非常独立编程风格，可能是两个独立的开发人员。后来我冒险进入了应用程序的电话电路部分，我立即意识到它与数据电路部分的风格相同（可能是同一个程序员）。通常，

*   物理数据库结构只是要理解的一部分......在左边（在数据库之前）是如何生成数据并将其加载到您的数据库（数据仓库？）。了解您的数据是什么以及它是如何创建的，是了解加载后在数据库中查找的内容的第一步。

*   与上述相反，在数据进入数据库之后……了解数据的使用方式（由您的用户使用）将帮助您了解他们从中得到了什么以及他们需要什么。如果您可以掌握用于生成现有报告的脚本，则可以加分，因为 from 语句将帮助您了解现有表的使用方式。

*   永远不要忘记采访你的用户……尤其是如果你能找到一个在系统初始部署时就已经存在的用户。如果它是内部设计的，那么很可能正是这些人为系统提供了一些初始需求，并且与他们交谈会让您了解设计系统的人在收集需求时首先听到的内容。您公司的逻辑部门（客户服务、运营、计费、等等）通常与您的数据模型将遵循的部门相同。

*   最后......玩！如果开发或 QA 环境可用，请开始编写查询并查看返回的结果...更改您的语句并重试。

我认为您要避免的最大愚蠢行为是只关注桌子的排列方式。了解其中的数据，它是如何生成的以及如何使用的。了解你的公司，它是如何安排的以及它是如何运作的。它的存储方式（数据建模）对于这种理解是次要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-07T19:57:05.303

如果我跳入一个包含数百个表和数百万条记录的大型 SQL Server 数据库，我会使用两个查询来帮助理解这一切，找到“主”表，然后缩小到特定的表和列。

```
--Query to show list of tables ordered by number of records in each table
    SELECT
        t.NAME AS TableName,
        SUM(p.rows) AS [RowCount]
    FROM 
        sys.tables t
    INNER JOIN      
        sys.indexes i ON t.OBJECT_ID = i.object_id
    INNER JOIN 
        sys.partitions p ON i.object_id = p.OBJECT_ID AND i.index_id = p.index_id
    INNER JOIN 
        sys.columns c on t.object_id = c.object_id
    WHERE   
        i.index_id <= 1
    GROUP BY 
        t.NAME, i.object_id, i.index_id, i.name 
    ORDER BY 
        SUM(p.rows) DESC

--Query to show any columns or table names like what I'm looking for
SELECT
    c.name, t.name
FROM sys.columns c
    INNER JOIN sys.tables t ON c.object_id = t.object_id
WHERE c.name LIKE '%#ColumnName%' OR t.name LIKE '%#TableName%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:28:12.300

我最近经历了同样的过程......我认为对我帮助最大的事情是创建我自己的数据库图。我使用了免费工具 wwwsqldesigner。这看起来很简单，我唯一遇到的问题是由于某种原因它无法在 Chrome 中运行，但 firefox 运行良好。我只是把我经常使用的表格放进去，我发现当我需要做一些新的事情时，我经常会参考它。

如果您可以使用自动生成的数据库图表，那将是一个更好的方法，但我个人无法让它们工作（我使用的是 sql server）。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-17T20:39:17.990

嗨，以下脚本可能会对您有所帮助。如果您在任何已开发的数据库上使用它，您至少会了解表之间的关系。

```
SELECT
fk.name 'FK Name',
tp.name 'Parent table',
cp.name, cp.column_id,
tr.name 'Refrenced table',
cr.name, cr.column_id
FROM 
    sys.foreign_keys fk
INNER JOIN 
    sys.tables tp ON fk.parent_object_id = tp.object_id
INNER JOIN 
    sys.tables tr ON fk.referenced_object_id = tr.object_id
INNER JOIN 
    sys.foreign_key_columns fkc ON fkc.constraint_object_id = fk.object_id
INNER JOIN 
    sys.columns cp ON fkc.parent_column_id = cp.column_id AND fkc.parent_object_id = cp.object_id
INNER JOIN 
    sys.columns cr ON fkc.referenced_column_id = cr.column_id AND fkc.referenced_object_id = cr.object_id
ORDER BY
 tp.name, cp.column_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T16:24:49.117

您可以使用 SQL Server Management Studio 创建实体关系模型，以便轻松查看 db 表之间的关系。基本上在管理工作室的 db 文件夹中，有一个名为“Database Diagrams”的文件夹。只需右键单击它，然后选择“新建数据库图”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T16:29:24.953

迁移后旧的 Foxpro 服务器会和新的 sql server 共存吗？如果没有，您应该尝试逐步破译系统。无需在任何停滞和未使用的代码上浪费时间。注释和图表，让您大致了解数据流并开始挖掘！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-17T21:30:46.770

Foxpro 中有两种截然不同的数据对象。
您很可能正在查看不包含在“数据库”中的免费数据表（DBF、CDX、IDX、FPT 文件）。
或者，Foxpro 可能有一个数据库（一个 DBC 文件），它可以包含数据表，并且可以在相关条件下“保存”。

但是，Foxpro 数据表通常在应用程序需要时根本不相关，此时它们基于索引表达式动态相关。

索引是使用某些表达式（例如：Fld1 + Fld2 或 Account_ID 等）在数据表上构建的，以满足应用程序的需求。
这些索引可以在需要时为已创建索引的任何给定数据表“激活”。

相关表具有父/子关系，其中子表已激活索引，父表通过其自身字段中与子索引表达式匹配的值与该子表相关。

将数据移动到 SQL Server 后如何利用数据取决于您在应用程序中使用的内容。

如果您仍在为应用程序使用 Foxpro，您可以查询 SQL Server 并将记录取回内存游标（它的工作方式非常类似于数据表），如果您取回多个 SQL Server 查询游标，则可以创建一个索引（使用表达式）并根据需要关联表。

如果您要将应用程序更改为其他语言（例如可能是 VB.net 或 C++），那么您将必须通过 SQL 查询语法本身创建自己的“关系”。

请记住，移动数据表并不是什么大问题。
但是更改应用程序语言是一件大事，甚至您处理任何单个任务的方式也必须以不同的方式处理。
把它想象成将一本书从英文翻译成中文——一切都必须改变。

如果您不确定和/或没有 Foxpro 和应用程序源代码的副本，您最好考虑找一位顾问来为您完成工作，或者至少为您提供帮助/建议。

另外，请记住，如果项目是**BUSINESS CRITICAL**，那么您不应该尝试节省转换成本。

祝你好运

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-16T12:54:47.323

您可以使用 MySQL 工作台对整个数据库或多个数据库进行逆向工程以将它们可视化以供初学者使用，稍后，您必须遵循将其放在纸上以获得更好结果的幼稚方法。

# css - JSF 有效，但未加载正确的 CSS

> ID：11105183
> 
> 赞同：3
> 
> 时间：2012-06-19T16:19:59.783
> 
> 标签：css, jsf, primefaces, prerender

我正在尝试使用

```
<f:event type="preRenderView" listener="{#loginControl.checkAuthentication}" /> 
```

标签。

该机制有效，但外观已损坏，似乎缺少一些 CSS。当我删除检查时，我的页面会按原样显示。

这是我的观点之一，其中检查身份验证：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">
<f:event listener="#{loginControl.checkAuthorization}" type="preRenderView" />
<h:head>
... 
```

调用以下方法：

```
public void checkAuthorization(ComponentSystemEvent evt){
  FacesContext ctx = FacesContext.getCurrentInstance();
  ConfigurableNavigationHandler nav = (ConfigurableNavigationHandler)      
  ctx.getApplication().getNavigationHandler();

  // navigate to login-screen
  if(this.user==null){          
   nav.performNavigation("login");
  } else {
   nav.performNavigation("welcome");
  }
} 
```

输出是这样的：

[http://www.convince-it.de/Auswahl_002.jpeg](http://www.convince-it.de/Auswahl_002.jpeg)

[http://www.convince-it.de/Auswahl_003.jpeg](http://www.convince-it.de/Auswahl_003.jpeg)

如您所见，当我检查授权时，组件未按应有的方式呈现。第一张图是启用授权检查后生成的视图的屏幕截图。第二个视图是未经授权检查的渲染视图，但具有想要的外观。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:28:00.593

显然，当导航处理程序在预渲染期间更改视图时，无法添加/更改必要的 PrimeFaces CSS/JS。

我建议发送重定向而不是转发。

```
if (user == null) {          
    nav.performNavigation("login?faces-redirect=true");
} else {
    nav.performNavigation("welcome?faces-redirect=true");
} 
```

# asp.net - ASP.NET Mermbership.cs 文件模板

> ID：11105184
> 
> 赞同：0
> 
> 时间：2012-06-19T16:20:05.340
> 
> 标签：asp.net, asp.net-membership, membership-provider, custom-membershipprovider

是否有可用的 ASP.NET 成员资格文件模板？

如果它不可用如何从头开始编写自定义会员文件...？

感谢进阶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:45:50.683

以下是您需要为会员提供者覆盖的方法。如果想学习，可以使用 JetBrains 的 dotPeek 或 telerik JustDecompile反编译这个[ASP.NET Universal Providers ；](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)你会得到 DefaultMembershipProvider.cs （我不能上传它，因为它太长了）。

```
public class CustomMembershipProvider : MembershipProvider
{
    public override MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)
    {
        throw new NotImplementedException();
    }

    public override bool ChangePasswordQuestionAndAnswer(string username, string password, string newPasswordQuestion, string newPasswordAnswer)
    {
        throw new NotImplementedException();
    }

    public override string GetPassword(string username, string answer)
    {
        throw new NotImplementedException();
    }

    public override bool ChangePassword(string username, string oldPassword, string newPassword)
    {
        throw new NotImplementedException();
    }

    public override string ResetPassword(string username, string answer)
    {
        throw new NotImplementedException();
    }

    public override void UpdateUser(MembershipUser user)
    {
        throw new NotImplementedException();
    }

    public override bool ValidateUser(string username, string password)
    {
        throw new NotImplementedException();
    }

    public override bool UnlockUser(string userName)
    {
        throw new NotImplementedException();
    }

    public override MembershipUser GetUser(object providerUserKey, bool userIsOnline)
    {
        throw new NotImplementedException();
    }

    public override MembershipUser GetUser(string username, bool userIsOnline)
    {
        throw new NotImplementedException();
    }

    public override string GetUserNameByEmail(string email)
    {
        throw new NotImplementedException();
    }

    public override bool DeleteUser(string username, bool deleteAllRelatedData)
    {
        throw new NotImplementedException();
    }

    public override MembershipUserCollection GetAllUsers(int pageIndex, int pageSize, out int totalRecords)
    {
        throw new NotImplementedException();
    }

    public override int GetNumberOfUsersOnline()
    {
        throw new NotImplementedException();
    }

    public override MembershipUserCollection FindUsersByName(string usernameToMatch, int pageIndex, int pageSize, out int totalRecords)
    {
        throw new NotImplementedException();
    }

    public override MembershipUserCollection FindUsersByEmail(string emailToMatch, int pageIndex, int pageSize, out int totalRecords)
    {
        throw new NotImplementedException();
    }

    public override bool EnablePasswordRetrieval
    {
        get { throw new NotImplementedException(); }
    }

    public override bool EnablePasswordReset
    {
        get { throw new NotImplementedException(); }
    }

    public override bool RequiresQuestionAndAnswer
    {
        get { throw new NotImplementedException(); }
    }

    public override string ApplicationName
    {
        get { throw new NotImplementedException(); }
        set { throw new NotImplementedException(); }
    }

    public override int MaxInvalidPasswordAttempts
    {
        get { throw new NotImplementedException(); }
    }

    public override int PasswordAttemptWindow
    {
        get { throw new NotImplementedException(); }
    }

    public override bool RequiresUniqueEmail
    {
        get { throw new NotImplementedException(); }
    }

    public override MembershipPasswordFormat PasswordFormat
    {
        get { throw new NotImplementedException(); }
    }

    public override int MinRequiredPasswordLength
    {
        get { throw new NotImplementedException(); }
    }

    public override int MinRequiredNonAlphanumericCharacters
    {
        get { throw new NotImplementedException(); }
    }

    public override string PasswordStrengthRegularExpression
    {
        get { throw new NotImplementedException(); }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:27:38.040

我不确定你在说什么，但[在这里](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)你有一个关于如何实现自定义会员提供程序的很好的示例

在[MSDN](http://msdn.microsoft.com/en-us/library/44w5aswa.aspx)上，您还可以找到有关此主题的多个资源

# ios - NSURLResponse 中没有“Set-Cookie”标头

> ID：11105187
> 
> 赞同：3
> 
> 时间：2012-06-19T16:20:11.987
> 
> 标签：ios, http, header, nsurlrequest, setcookie

当我从 iOS发出对[http://www.google.com的请求并通过如下方式查看返回的标头时：](http://www.google.com)

* * *

NSDictionary *dictionary = [响应 allHeaderFields];

* * *

我在那里看不到“Set-Cookie”。当我使用不同的客户端时，我会看到该标题。

我尝试更改用户代理，但没有效果。我尝试更改缓存策略但没有效果...

# integration - DokuWiki 与 mantis 的集成失败

> ID：11105192
> 
> 赞同：2
> 
> 时间：2012-06-19T16:20:32.407
> 
> 标签：integration, wiki, mantis, dokuwiki

我尝试将 dokuwiki 与螳螂集成。-> [DokuWiki 集成](http://www.mantisbt.org/wiki/doku.php/mantisbt%3aissue:7075%3aintegration_with_dokuwiki)

我使用 mantis 1.1.6 和最新的 dokuwiki(angua)。这些应用程序在 apache 2.2.14 上运行，后者集成在 xampp 1.7.4 中

我的配置如下所示：

mantis/config_inc.php 和 mantis/config_defaults_inc.php：

```
 #####################
# Wiki Integration
#####################

# Wiki Integration Enabled?
$g_wiki_enable = OFF;

# Wiki Engine
$g_wiki_engine = 'dokuwiki';

# Wiki namespace to be used as root for all pages relating to this mantis installation.
$g_wiki_root_namespace = 'mantis';

# URL under which the wiki engine is hosted.  Must be on the same server.
$g_wiki_engine_url = $t_protocol . '://' . $t_host . '/%wiki_engine%/'; 
```

dokuwiki/conf/local.php：

```
<?php

 define( 'MANTIS_ROOT', 'c:/xampp/htdocs/mantis2/' ); 
 define( 'MANTIS_URL', 'http://localhost/mantis2/' );    

 $conf['useacl']       = 1;               
 $conf['authtype']     = 'mantis';        
 $conf['defaultgroup'] = 'VIEWER';       
 $conf['superuser'] = '@ADMINISTRATOR';   

 require_once( MANTIS_ROOT . 'core.php' );

 ?> 
```

其他一切都与描述的文档中的相同。

现在我使用 mantis 中的管理员帐户登录。我可以看到新的菜单选项“Wiki”。遵循此菜单选项“Wiki”会给我带来以下错误消息：

致命错误：在第 41 行调用 C:\xampp\htdocs\dokuwiki\inc\auth\mantis.class.php 中未定义的函数 auth_prepare_username()

我没有修改 mantis.class.php。

有人知道现在该怎么办吗？

最好的祝愿克里斯汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:26:22.233

我建议您尝试更新版本的 MantisBT - 1.1.6 已经很老了。

# c# - MVVM - IsEnabled 无法与绑定布尔值一起正常工作

> ID：11105195
> 
> 赞同：1
> 
> 时间：2012-06-19T16:20:38.520
> 
> 标签：c#, wpf, button, mvvm, isenabled

我有一个简单的按钮：

```
<Button Content="Login" Command="{Binding StartAction}" IsEnabled="{Binding Path=Loading, Converter={StaticResource InverseBooleanConverter}}"/> 
```

如您所见， IsEnabled 绑定到一个布尔属性。执行 StartAction 时，布尔值设置为 true，因此按钮被禁用（请注意，我使用的是 InverseBooleanConverter）。这工作正常。

更改布尔值后，StartAction 方法创建一个新线程，该线程在完成时调用 ViewModel 上的回调（创建线程的位置，因此可以找到 StartAction 方法的位置）。这个回调很简单：

```
private void DisplayResult()
{
    Loading = false;
} 
```

这应该再次启用按钮，但是，这不会发生。

如果我在其他地方将加载设置为 false，则该按钮会启用。与按钮一起，其他一些元素（也绑定到此布尔值）在布尔值更改时应该变得不可见/可见，并且它也可以正常工作，即使回调方法更改了 Loading 属性。

我在这里有点困惑。为什么它不起作用？我认为这可能与线程有关，但我看不出有任何理由不应该这样做，特别是因为它可以与 UI 上的其他元素一起使用。

为了清楚起见，这是 Loading 属性：

```
public bool Loading
{
    get { return loading; }
    set
    {
        if (loading != value)
        {
            loading = value;
            RaisePropertyChanged("Loading");
        }
    }
} 
```

知道这里可能有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:28:50.153

在您的回调中，您可能需要指示 UI 再次检查该属性并进行相应更新。这是使用`CommandManager`. 我在您的回调代码中添加了一些内容：

```
private void DisplayResult()
{
    Loading = false;
    CommandManager.InvalidateRequerySuggested();
} 
```

[`CommandManager.InvalidateRequerySuggested`](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.invalidaterequerysuggested.aspx)指示 WPF 根据需要立即更新任何绑定的控件。

# python - 使用 python 连接到 localhost mysql db

> ID：11105197
> 
> 赞同：-1
> 
> 时间：2012-06-19T16:20:43.843
> 
> 标签：python, mysql

公平警告：我是个大菜鸟。请戴上儿童手套处理。

细节：

*   蟒蛇 3.2
*   MySQL 5.5
*   已安装 Tornado 网络框架
*   已安装 pymysql
*   Windows 7的

问题：我正在关注 Tornado 文档，这里是关于连接到 mysql 数据库[的](http://www.tornadoweb.org/documentation/database.html?highlight=mysql)。我只想连接到 localhost，但收到以下错误消息：

```
Traceback (most recent call last):
  File "C:\Python32\DIP3\tornado-test.py", line 5, in <module>
    class Connection(localhost,re_project, user=root, password=mypassword, max_idle_time=25200):
NameError: name 'localhost' is not defined 
```

这是我试图运行的代码：

```
import tornado.ioloop
import tornado.web
import pymysql

class Connection(localhost,re_project, user=root, password=mypassword, max_idle_time=25200):
    db = database.Connection("localhost", "re_project")
    for Bogota in db.query("SELECT * FROM cities_copy"):
        print(Bogota.title) 
```

当我执行代码时，MySQL 当前正在运行，所以我认为这应该不是问题。我还能做错什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:27:23.040

这一行：

```
class Connection(localhost,re_project, user=root, password=mypassword, max_idle_time=25200): 
```

完全没有意义。你不能定义这样的类。您的意思是使用`def`而不是`class`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:23:16.137

您实际上并没有定义构造函数。将此视为您需要执行的操作的模板：

```
class Connection(object):
    def __init__(self, host, project, user, password, max_idle_time):
        self.db = database.Connection(
            host, project, user=user, password=password, max_idle_time=max_idle_time)

    def some_other_method(self):
        for bogota in self.db.query("SELECT * FROM cities_copy"):
            print(bogota.title) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:59:50.140

好吧，我想我明白了这个问题。在文档中，该行`class tornado.database.Connection(host, database, user=None, password=None, max_idle_time=25200)`是文档的一部分，并不意味着复制/粘贴。这描述了如何做`db = database.Connection`。

绿色代码示例行应该独立工作，只要 1) tornado.database 模块被导入并且 2)`db =`行被调整以将适合您的数据库的值传递给`Connection`方法。

所以：

```
from tornado import database  # you can use "import tornado.database" here, but then
                              # you will have to use "tornado.database.Connection()"
                              # instead of "database.Connection()"

db = database.Connection("localhost", "re_project", user="root", password="mypassword")
for bogota in db.query("SELECT * FROM cities_copy"):  # I changed "bogota" to lower-case because the convention in Python is for only classes, not objects, to have upper-case names.
    print(bogota.title) 
```

我没有对此进行测试，因为我没有安装 Python 3.2，所以如果它不起作用，请告诉我，我会尝试调整。

# javascript - AJAX 调用成功

> ID：11105200
> 
> 赞同：0
> 
> 时间：2012-06-19T16:21:10.367
> 
> 标签：javascript, ajax

所以，我有两个 JavaScript 函数：

```
function Generate() {
  //Do something
  $.ajax({data:{Svc: 'cpMain',
                Cmd: 'Generate'
               },
     dataType: "text",
     context: this,
     success: genSuccess()
   });
}

function genSuccess() {
  //Do something
} 
```

在我的 c# 中，`Page_Init()`我从我的 AJAX 回调中获取参数来做某事。

我希望订单是`Generate()`，回调，`genSuccess()`。但是它的运行顺序是`Generate()`, `genSuccess()`, 回调。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:22:02.173

提供`genSuccess`to的函数引用`success`，而不是调用的返回值`genSuccess`

```
success: genSuccess 
```

# git - 无法将我的应用程序我的 Github 推送到 Heroku

> ID：11105204
> 
> 赞同：0
> 
> 时间：2012-06-19T16:21:41.783
> 
> 标签：git, heroku

> **可能重复：**
> [Ruby on rails 和 Heroku 问题](https://stackoverflow.com/questions/4912335/ruby-on-rails-and-heroku-problem)

我目前正在做[Michael Hartl 的 Rails 教程](http://ruby.railstutorial.org/)。将我的名为 first_app 的应用程序推送到 Github 时，一切正常，但是当我继续尝试将其推送到 Heroku 时，`git push heroku master`我不断收到错误

> src refspec master 不匹配任何。错误：未能将一些 refs 推送到 'git@heroku.com:radiant-mountain-8467.git'。

我试过抬头并尝试不同的东西，到目前为止还没有运气。当我访问 heroku 网站时，我看到了一些应用程序，但是当我点击它们时，他们只会说

> 欢迎使用您的新应用！如果您需要帮助部署，请参阅文档。

那是不对的，所以我决定问你任何想法，这样我才能继续前进。

我在用着：

*   Mac：狮子 10.7.3
*   红宝石 1.9.3p194
*   git 版本 1.7.4.4
*   导轨 3.2.6
*   红宝石 1.8.24

# android - 如何制作自定义 Edittext，使其看起来像在 android 中旋转 45 度

> ID：11105207
> 
> 赞同：2
> 
> 时间：2012-06-19T16:21:51.017
> 
> 标签：android, android-layout, android-emulator, android-widget

如何制作自定义 Edittext，使其看起来像在 android 中旋转 45 度，并且它应该是可编辑的，以便用户可以在旋转的 Edittext 上输入文本。我试过了。但我没有得到任何解决方案。请给出一些想法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:26:54.433

您可以尝试像这样覆盖 EditText onDraw 方法...

```
@Override
protected void onDraw(Canvas canvas) {
     canvas.save();
     canvas.rotate(45.0f,xpivot,ypivot); //rotate around (x,y) pivot point 
     super.onDraw(canvas);
     canvas.restore();
} 
```

我没有对此进行测试，但我认为它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:28:50.373

“自定义 EditText”意味着您扩展 EditText 并覆盖 draw 方法，以您想要的方式绘制文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T06:47:16.887

我找到了一种不同的方法，它正在起作用。

```
EditText lEditTxt = (EditText)findViewById(R.id.Edit_ID);
        Animation lAnim = new RotateAnimation(0, -45, 250, 50);
        lAnim.setRepeatCount(Animation.INFINITE);
        lEditTxt.startAnimation(lAnim);
        getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

# php - 在 Windows Phone 7 (IE) 中未提交表单

> ID：11105212
> 
> 赞同：2
> 
> 时间：2012-06-19T16:22:10.630
> 
> 标签：php, javascript, jquery, windows-phone-7, onclick

我一直在从头开始开发我的网站，但在 Windows Phone 7 上的本机浏览器上遇到了问题。

我已经构建了一个通过 javascript 函数提交的表单。使用 JQuery .submit() 函数的锚标记 onclick 事件。浏览器似乎加载然后挂起而没有完成表单发布。有谁知道为什么会这样？还有更好的选择吗？

# c++ - 编译 libjingle pcp

> ID：11105217
> 
> 赞同：0
> 
> 时间：2012-06-19T16:22:26.280
> 
> 标签：c++, libjingle

我试图在 libjingle 项目中编译 pcp 示例。但我得到了这个错误，我不知道为什么：

```
g++ -DPOSIX -DEXPAT_RELATIVE_PATH -DFEATURE_ENABLE_SSL -DHAVE_OPENSSL_SSL_H=1  -W -Wall -g -frtti  -o p2p pcp_main.o  -lpthread -lssl libsrtp.a libxmpphelp.a libjingle.a  libexpat.a  
pcp_main.o:(.rodata._ZTI14CustomXmppPump[typeinfo for CustomXmppPump]+0x18): undefined reference to `typeinfo for XmppPump'
pcp_main.o:(.rodata._ZTIN7cricket18SessionManagerTaskE[typeinfo for cricket::SessionManagerTask]+0x8): undefined reference to `typeinfo for buzz::XmppTask'
pcp_main.o:(.rodata._ZTIN7cricket15SessionSendTaskE[typeinfo for cricket::SessionSendTask]+0x8): undefined reference to `typeinfo for buzz::XmppTask'
pcp_main.o:(.rodata._ZTI17AutoPortAllocator[typeinfo for AutoPortAllocator]+0x8): undefined reference to `typeinfo for cricket::HttpPortAllocator' 
```

有人知道我在哪里做错了吗？？？我整天都在上面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:53:10.120

我有同样的问题，但确实设法通过 scons 成功编译它，在你的 talk/ 目录中将以下行附加到'libjingle.scons'

```
 talk.App(env, name = "pcp",
     posix_libs = [
       "crypto",
       "ssl",
     ],
     srcs = [
       "examples/pcp/pcp_main.cc",
     ],
 libs = [
       "jingle",
       "expat",
       "srtp",
       "xmpphelp",
     ],
) 
```

然后使用 libjingle 的 README 中的说明构建它。pcp 二进制文件将构建在您的 /talk/build/dbg/staging/ 目录中。

# .htaccess - 我在哪里可以在共享主机帐户上上传 .htaccess 文件？

> ID：11105228
> 
> 赞同：1
> 
> 时间：2012-06-19T16:23:15.030
> 
> 标签：.htaccess, redirect, mobile, shared-hosting

我是服务器端编码的新手，所以如果答案对某些人来说是显而易见的，请耐心等待：

前段时间我设计了一个网站的前端。它作为子目录驻留在共享主机环境中。我正在尝试上传 .htaccess 文件以重定向到其移动版本（我没有设计并且托管在另一个帐户上）。我尝试将 .htaccess 文件上传到根目录和子目录，每个都有自己的问题。

当我上传到根目录时，任何设备上都不会发生重定向。这不是我的愿望，但我希望根目录下的所有网站都将被重定向到这个网站的移动版本，但什么也没发生。

当我将 .htaccess 文件上传到子目录时 - 从所有设备查看返回“您请求的页面不可用”

以下代码是移动设计师提供的用于输入 .htaccess 文件的代码：

```
<IfModule mod_rewrite.c>

RewriteEngine on

#Check if this is the desktop to mobile query string
RewriteCond %{QUERY_STRING} (|&)m=1(&|$)
#Set a cookie, and skip the next 2 rules
RewriteRule – [CO=mredir:1:%{HTTP_HOST},S=2]
#Check if this is the mobile to desktop query string
RewriteCond %{QUERY_STRING} (|&)m=0(&|$)
#Set a cookie, and skip the next rule
RewriteRule – [CO=mredir:0:%{HTTP_HOST},S]
RewriteCond %{HTTP_USER_AGENT}
“android|blackberry|iphone|ipod|iemobile|opera
mobile|palmos|webos|googlebot-mobile” [NC]

#Check if we’re not already on the mobile site
RewriteCond %{HTTP_HOST} !m\.
#Can not read and write cookie in same request, must duplicate condition
RewriteCond %{QUERY_STRING} !(|&)m=0(&|$)
#Check to make sure we haven’t set the cookie before
RewriteCond %{HTTP_COOKIE} !^.mredir=0.$ [NC]
#allow mobile sites to access images on the main site
RewriteCond %{REQUEST_URI} !\.(gif|png|jpe?g|ico)$ [NC]

RewriteRule ^(.*)$ http://example.mobi/ [L,R=301]
</IfModule> 
```

*我省略了将替换[http://example.mobi的 url](http://example.mobi)*

我无法检测到上述代码中是否有任何语法错误，我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:26:20.740

这只是我的猜测。但是你为什么要使用 .htaccess 进行简单的重定向呢？如果只有一个站点（根目录/主机上的特定子目录）应该始终重定向到新的移动版本，那么为什么不能使用服务器/主机配置设置永久重定向？

此类工具几乎在每个控制面板中，如 cPanel、DirectAdmin 等。即使您的托管服务提供商运行自己的复杂软件来运行和管理托管服务器，我也很难相信它没有为您提供任何工具或解决方案进行永久重定向，从而迫使您使用 .htaccess 玩这个游戏。

顺便说一句：如果你 100% 确定你不能通过服务器/主机配置来做到这一点，并且 .htaccess 是唯一的方法，那么也许这是改变你的主机的正确时机？毕竟，域名/地址/URL对于每个项目来说都是最重要的，它可以托管在任何主机上。

至于您的问题，我建议从普通 PC 或 Linux 并通过配备 FireBug 或类似开发人员工具的浏览器运行第二个场景（子文件夹中的 .htaccess）。然后输入您应该执行重定向但失败的网页，并仔细检查该工具的日志/路径以查看您实际重定向到的位置？这是您期待的真正的 URL 吗？大多数情况下，“您请求的页面不可用”意味着它的含义，即 - 一个网站试图将您的浏览器重定向到一个不存在的 URL。

# r - 过滤掉R中仅包含0的矩阵中的行

> ID：11105234
> 
> 赞同：3
> 
> 时间：2012-06-19T16:23:23.330
> 
> 标签：r, matrix

我有矩阵

```
m <- matrix(c(1, 0, 3, 4, 0, 6), 3) 
```

我需要过滤掉两列的值为 0 实际上返回矩阵的行：

```
m <- matrix(c(1, 3, 4, 6), 3) 
```

我试过了

```
m[m[, 1] > 0 & m[, 2] > 0] 
```

但这会返回一个向量，而不是一个只有 0 行的矩阵。这应该很简单，但我被卡住了。

谢谢，-伊丽莎白

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:29:26.953

您只是在自己的解决方案中缺少一个“，”。采用

```
m[m[,1]>0 & m[,2]>0,] 
```

它会起作用：

```
> m[m[,1]>0 & m[,2]>0,]
     [,1] [,2]
[1,]    1    4
[2,]    3    6 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T16:34:27.747

如果你有很多列

```
m
     [,1] [,2]
[1,]    1    4
[2,]    0    0
[3,]    3    6
m^2
     [,1] [,2]
[1,]    1   16
[2,]    0    0
[3,]    9   36
rowSums(m^2)
[1] 17  0 45
m[rowSums(m^2)>0,]
     [,1] [,2]
[1,]    1    4
[2,]    3    6 
```

# url - iis 7子域重写反向代理到内部服务器

> ID：11105242
> 
> 赞同：4
> 
> 时间：2012-06-19T16:24:07.177
> 
> 标签：url, iis, rewrite, reverse-proxy

在 Server2008 系统上，安装了 ARR/URL 重写。传入 ARR 服务器（“pirate.mydomain.com”）的流量，该服务器位于 DMZ 中。内部 IIS 服务器（Server 2008/URL 重写），包含部门子站点（static.mydomain.com/deptone、static.mydomain.com/depttwo 等）的单个 IIS 站点（'static.mydomain.com'）。

在 ARR 服务器的服务器级别，ARR 服务器代理设置：启用“启用代理”，启用“使用 URL 重写以检查传入请求”，“反向代理”设置为“pirate.mydomain.com”。

意图是将 deptone.mydomain.com 重写（未重定向）为 static.mydomain.com/deptone .... 并将 depttwo.mydomain.com 重写为 static.mydomain.com/depttwo 。

URL 不应在访问者的浏览器中更改。

在“pirate.mydomain.com”的 IIS 站点级别，URL 重写规则如下：

```
<rule name="deptone redirect" stopProcessing="true">
<match url=".*" />
<conditions logicalGrouping="MatchAll" trackAllCaptures="false">
<add input="{HTTP_HOST}" pattern="^(www.)?pirate.mydomain.com/(deptone)(.*)" />
</conditions>
<action type="Rewrite" url="http://static.mydomain.com/deptone{C:3}" appendQueryString="false" />
</rule> 
```

这不起作用；我收到 400.0 错误（“最大转发限制”）。

需要有关此过程的 URL 重写规则的指导。去过 IIS 论坛/帮助，但仍然无法正常工作。

谢谢。

# php - 尝试使用 PHP 将变量插入 MSSQL

> ID：11105250
> 
> 赞同：-2
> 
> 时间：2012-06-19T16:24:34.883
> 
> 标签：php, sql-server, wamp

我正在尝试将一些变量插入 MSSQL，它给了我 500 服务器错误

> HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

但是，当我用简单的数字或文本值替换这些变量时，它会起作用。我正在运行 Wamp 服务器并连接到亚马逊 RDS MSSSQL 实例。这是我的代码：

```
$status = "closed";

$connection = odbc_connect("Driver={SQL Server Native Client 10.0};Server=$server;Database=$database;", $user, $password);

$query = "INSERT INTO DatabaseTableName (ColumnName) VALUES ('$status')";

$results = odbc_exec($connection, $query);
if ($results){
    echo "Query Executed";
}else {
    echo "Query failed " .odbc_error();
} 
```

如果我删除变量`$status`并输入一个数字或一个单词，它会起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:28:28.700

```
$query = "INSERT INTO DatabaseTableName (ColumnName) VALUES ('".$status."')"; 
```

您可能还想考虑清理您的输入。

查看[mysqli 真正的转义字符串](http://us3.php.net/mysqli_real_escape_string)

# excel - GPA计算器的excel中的条件总和？

> ID：11105260
> 
> 赞同：0
> 
> 时间：2012-06-19T16:25:30.420
> 
> 标签：excel, conditional-statements

我在 excel 中创建了一个 GPA 电子表格，并且基础工作正常，但我想扩展功能以从计算中排除不完整和通过/失败类。我一直在思考如何排除任何具有 I、P 或 F 等级字母的行（失败，因为 E 用于正常等级字母 F）但尚未找到解决方案。如果不创建 VBA 脚本，这可能吗？

我有 5 列，第一列是 GPA，然后是课程/学分/成绩/分数，每一行都有关于一门课程的信息。分数是学分 * 等级字母值 (A = 4.0) 这是为了确保 GPA 的权重正确。GPA 目前只是 totalPoints/totalCredits =SUM($D2:$D10)/SUM($B2:$B10)

```
Course,Credits,Grade,Points,GPA
IT110,3,A,12,2.392307692
CS101,3,A-,11.1,
CALC1,4,C,8,
IT101,1,P,0,Don't include Pass/Fail courses
ENG101,2,I,0,Don't include incompletes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:55:17.553

计算总 GPA (excel 2007 +)

```
=SUMIFS(D2:D10,C2:C10,"<>P",C2:C10,"<>I",C2:C10,"<>F") / SUMIFS(B2:B10,C2:C10,"<>P",C2:C10,"<>I",C2:C10,"<>F") 
```

sumifs 的一些解释。（[http://office.microsoft.com/en-us/excel-help/sumifs-function-HA010047504.aspx](http://office.microsoft.com/en-us/excel-help/sumifs-function-HA010047504.aspx)）

它需要几个范围。首先，一个“sum_range”，然后它需要成对的参数。一个标准范围，然后是标准。任意多对。（在这里我做了3）。只要范围中的每个单元格都满足您列出的所有条件，它就会在总和范围内进行汇总。（<> 是 Excel 中的不等于运算符）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:29:04.703

例子

```
 col a    col b   col  c   col d   col  f 
```

第1行,,,,5,,,,,,,,6,,,,,,,1,,,,,,,2,,,,,,,,=7(结果显示在col f)

此处输入所有 col 任何数字，但 col f 仅显示加法 2 和 1（添加每个 col 2 和 1）

其他号码不加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T23:52:47.133

我只有一个模糊的概念 GPA 是什么，但基于您问题中的数据：

```
=SUMIF(C:C,"<char(69)",D:D)/SUMIF(C:C,"<char(69)",B:B) 
```

产生与接受的答案相同的结果，是它的一半长度使用更广泛可用的函数。

# ruby-on-rails-3 - 在 activeadmin 上使用 batch_action 批量编辑记录（带有 activeadmin 的 rails）

> ID：11105261
> 
> 赞同：3
> 
> 时间：2012-06-19T16:25:38.487
> 
> 标签：ruby-on-rails-3, activeadmin

我想在 activeadmin 中使用 batch_edit 来编辑多个产品并将它们分配给类别。

因此，我只想获取所有选定的 ID 并在活动管理员中显示其他表单，以从下拉菜单中将这些产品 ID 分配给类别。

如何使用 ActiveAdmin 和 batch_actions 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T04:18:43.820

你只需要添加`selectable_column`到你的索引视图

```
index do
  selectable_column
  column :company if current_admin_user.admin?
  ...
end 
```

默认情况下，这将为您提供批量删除操作，您可以添加自己的操作。

ActiveAdmin[文档](http://www.activeadmin.info/docs/9-batch-actions.html)提供有关如何操作的信息

# c# - 如何知道表单是否显示为对话框

> ID：11105262
> 
> 赞同：17
> 
> 时间：2012-06-19T16:25:42.350
> 
> 标签：c#, winforms

是否已经有一些我可以使用的属性，例如：

```
if (this.IsDialog)
{
    DialogResult = ...;
}
else
{
    //do something else
} 
```

或者我应该自己创建这样的属性*并将*其设置为`true`在将表单显示为对话框之前？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-19T16:28:12.980

你可以检查一下是否[`this.Modal`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.modal.aspx)属实。

# css - 如何在 Twitter Bootstrap 的网格系统中设置列内的输入宽度？

> ID：11105265
> 
> 赞同：3
> 
> 时间：2012-06-19T16:25:49.853
> 
> 标签：css, internet-explorer, twitter-bootstrap

我是 Bootstrap 的新手，到目前为止我很喜欢它，但是有几个简单的问题与网格有关 - 似乎无法在任何地方找到答案......

```
<div class="container">
    <div class="row" style="background-color: #ccc;"> <!-- 1\. How do I get this background colour to exclude the left 20px gutter? -->

        <div class="span5">
            Left Col

            <div class="row">
                <div class="span5">
                    <input class="span5" type="text"/> <!-- 2\. How do I stop this input from shifting right 20px in IE7? -->
                </div>
            </div>

        </div>

        <div class="span7">
            Right Col

            <div class="input-prepend">
                <!-- This lines up correctly, even in IE7 - my star hack will break this -->
                <span class="add-on">+</span><input type="text" placeholder="Add..." class="span6">
            </div>
        </div>
    </div>
</div> 
```

1.  检查引导 css 后，我可以看到 .row 开始时将 margin-left 拉回 20px，因此每次创建 .spanX 时，它的左侧都有一个 20px 的排水沟。这是有道理的，但是我如何将样式应用于整行（例如背景颜色）并将其应用于该行中的所有列（在我的示例中为 span5 和 span7），但不包括左侧 20px 装订线？

2.  其次，设置列内元素宽度的最佳方法是什么？在我的示例中，我尝试通过将文本框放置在带有 span5 的嵌套行中来调整文本框的大小以填充左侧列的宽度。这在 IE7 中不起作用 - 相反，它向右移动 20 像素，我失去了右手边沟。

要查看这一点，请查看IE7 与良好浏览器中的[http://jsfiddle.net/jRcJG/](http://jsfiddle.net/jRcJG/)。

我最接近的方法是将 IE hack 组合在一起以再次将输入移回，但这会导致其他问题，例如压缩右列中的输入前置：

[http://jsfiddle.net/JsBpV/](http://jsfiddle.net/JsBpV/)

不幸的是，我正在做的项目必须支持 IE7，所以我没有忽略这些用户的奢侈。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:39:57.640

#2 的一个简单但不一定优雅的解决方案是在一个类中添加一个 IE star hack：

```
input.ie-fix-left, textarea.ie-fix-left {
    *margin-left: -20px;
} 
```

这要求您在受此问题影响的每个输入元素上放置一个类：

```
<div class="row">
    <div class="span6">
        <input type="text" class="span6 ie-fix-left"/>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:45:30.460

1.  使用 .span12 创建一个 div，并使用 .span5 和 span7 包含另一个级别的行/跨度
2.  jQuery

# automapper - AutoMapper：在目标基础上映射源属性

> ID：11105266
> 
> 赞同：2
> 
> 时间：2012-06-19T16:25:50.513
> 
> 标签：automapper

这是我需要在左侧映射的两个类：

```
class HumanSrc {
    public int IQ;
    public AnimalSrc Animal;
}
class AnimalSrc {
    public int Weight;
} 
```

右侧是相同的对象，但使用继承组成：

```
class HumanDst : AnimalDst {
   public int IQ;
}
class AnimalDst {
    public int Weight;
} 
```

所以我需要的映射是：

```
humanSrc.IQ -> humanDst.IQ 
humanSrc.Animal.Weight -> humanDst.Weight; 
```

我可以很容易地显式地进行这种映射，但是我有几个类都派生自 Animal，而且 Animal 类很大，所以我宁愿映射 Animal 一次，然后将它包含在每个派生类映射中。

我查看了 .Include<> 方法，但我认为它不支持这种情况。

这是我正在寻找的本质（伪代码）：

```
// define animal mapping
var animalMap = Mapper.CreateMap<AnimalSrc, AnimalDst>().ForMember(dst=>dst.Weight, opt=>opt.MapFrom(src=>src.Weight);
// define human mapping
var humanMap = Mapper.CreateMap<HumanSrc, HumanDst>();
humanMap.ForMember(dst=>dst.IQ, opt=>opt.MapFrom(src=>src.IQ));

// this is what I want. Basically I want to say:
// "in addition to that, map this child property on the dst object as well"
humanMap.ForMember(dst=>dst, opt=>opt.MapFrom(src=>src.Entity)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:08:40.940

作为一种解决方法，您可以添加带有映射基类的 BeforeMap。可能它不是最好的解决方案，但至少它需要更少的映射配置：

```
humanMap.BeforeMap((src, dst) =>
{
   Mapper.Map(src.Animal, (AnimalDst)dst);
}); 
```

# java - 无法将 EAR 发布到 Websphere

> ID：11105270
> 
> 赞同：7
> 
> 时间：2012-06-19T16:26:14.353
> 
> 标签：java, exception, websphere, ear

我正在 Windows 上运行 Rational Application Developer for WebSphere Software (v. 8.0.4.1)。我有一个 EAR 项目，我正试图将它部署到我的机器上运行的 Websphere 服务器。EAR 项目引用了一个 WAR 项目。

绑定部署时，我收到四条消息：

```
Publishing failed
**Could not publish to the server - org.eclipse.wst.server.core**
java.lang.IndexOutOfBoundsException: Index: 4, Size: 4
at java.util.ArrayList.get(Unknown Source)
at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModules(Unknown Source)
at com.ibm.ws.ast.st.v8.core.internal.WASServerBehaviour.publishModules(Unknown Source)
at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(Unknown Source)
at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(Unknown Source)
at org.eclipse.wst.server.core.internal.Server.publishImpl(Unknown Source)
at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Unknown Source)
at org.eclipse.core.internal.jobs.Worker.run(Unknown Source)

OK - Unknown

Error in delegate - org.eclipse.wst.server.core
java.lang.NullPointerException
at com.ibm.etools.webtools.sdo.deploy.internal.cloudscape.DisconnectTaskDelegate.execute(Unknown Source)
at org.eclipse.wst.server.core.internal.Publisher.execute(Unknown Source)
at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.executePublishers(Unknown Source)
at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(Unknown Source)
at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(Unknown Source)
at org.eclipse.wst.server.core.internal.Server.publishImpl(Unknown Source)
at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Unknown Source)
at org.eclipse.core.internal.jobs.Worker.run(Unknown Source)

deploySuccess -  com.ibm.etools.server.task.ejbdeploy 
```

奇怪的是，我可以看到 EAR & WAR 服务在服务器上启动/同步，当我进入管理控制台时，我可以看到正在运行的应用程序。

有没有人看到同样的错误？建议？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-11T17:26:39.267

遇到了同样的问题。从 c:/myworkspace/.metadata/.plugins/org.eclipse.wst.server.core 下的 publish.xml 中删除了故障服务器的条目，还删除了文件夹 tmp*（tmp0 或 tmp1 等适用于故障服务器）。

重新启动 RAD 后，注意到这些映射已重新创建，并且发布似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T04:45:02.947

我遇到了同样的问题，我只从 c:/myworkspace/.metadata/.plugins/org.eclipse.wst.server.core 文件夹中删除了 tmp* 文件夹并重新启动了 RSA。

然后我能够将我的 EAR 发布到 Websphere 7.0 上。

未对 publish.xml 进行任何更改。

谢谢你的提示！

# php - 如何将 composer 包安装到 /src 目录中？

> ID：11105273
> 
> 赞同：4
> 
> 时间：2012-06-19T16:26:29.110
> 
> 标签：php, symfony, composer-php

如何修改我的 composer.json 以直接安装到 src-dir (Symfony/src) 中？

```
{
"name": "acme/example-bundle",
"type": "symfony-bundle",
"license": "MIT",
"require": {
    "php": ">=5.3.2",
    "symfony/framework-bundle": "2.1.*"
},
"suggest": {
    "doctrine/doctrine-bundle": "*"
},
"autoload": {
    "psr-0": { "Acme": "src/" }
},
"target-dir": "../../src/Acme/ExampleBundle" 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:11:04.407

实际上，将供应商包安装到 src 目录并不是一个好主意，因为不应编辑供应商包，并且 src 目录用于在开发过程中编辑的代码。

我想到的一个原因是你想要修改这些包。如果这是重点，您最好不要使用 git 子模块，因为 composer 只有一个单向流程，这意味着更改只能来自供应商包的源，并且源没有上游。

我将 git 子模块用于我的项目中的包，这些包不是特定于项目的，因此驻留在他们自己的 git 存储库中，但在项目期间积极开发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T19:23:03.453

PHP/Symfony 项目的 src 目录通常只用于该项目的代码。您作为依赖项安装的代码进入供应商目录。

这使得跟踪哪些代码是项目本身的一部分以及哪些代码在单独的存储库中维护变得容易。

因此，您不应该将来自单独存储库的包安装到您的 src 目录中。如果 Symfony 中的 Bundle 像许多核心框架 bundle 一样位于 vendor 目录中，它们就可以正常工作。

# vb.net - 传输无法连接到服务器 - CDO.Message - VB.NET

> ID：11105279
> 
> 赞同：0
> 
> 时间：2012-06-19T16:26:57.700
> 
> 标签：vb.net, smtp, cdo.message

我在服务器上运行了一个 VB.net 应用程序，它将每天发送近 200 封电子邮件。以下是我的编码：

```
Dim objNewMail = CreateObject("CDO.Message")
                  objNewMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
                    objNewMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "localhost"
                    objNewMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
                    objNewMail.Configuration.Fields.Update()

                    objNewMail.From = mailFrom
                    objNewMail.To = mailTO
                    objNewMail.CC = mailCC
                    objNewMail.bcc = mailBCC

                    objNewMail.Subject = mailSubject
                    objNewMail.HTMLBody = content
                    objNewMail.Send()

                    objNewMail = Nothing 
```

上面的代码在一个循环中运行。上面的代码运行良好，没有任何问题。但是每月一到两次，我收到以下错误消息并且应用程序停止。

**System.Runtime.InteropServices.COMException (0x80040213)：传输无法连接到服务器。**

任何人都可以帮我解决这个问题，或者我也可以接受任何其他更好和更先进的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:21:11.017

您可能希望将 .Send() 调用包装在 Try...Catch 中，如果失败，几秒钟后重试。

CDO 似乎已被弃用，取而代之的是 System.Net.Mail。[在www.systemnetmail.com/](http://www.systemnetmail.com/)上有一个包含全面常见问题解答的站点，尽管我会在事件日志中查找类似的偶发错误。

是否有其他与错误同时发生的情况，例如服务器刚刚重新启动？

# java - 从大型 txt 文件中删除非 UTF-8 字符

> ID：11105280
> 
> 赞同：5
> 
> 时间：2012-06-19T16:26:58.060
> 
> 标签：java, json, utf-8, large-files

我正在处理一个 1 GB 的 JSON 文本文件，我正在尝试使用 Java 对其进行解析。但是，解析器会抛出异常，因为它遇到了生成此异常的字符“ñ”：

> 异常 UTF-8 起始字节 0x96 无效

我尝试使用 sed 和 perl 删除该字符，但似乎他们无法读取该字符，因此文件保持不变。我想从整个文件中删除该字符或将其替换为任何其他字符或字符串，以便解析工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:30:09.283

您的文件未以 UTF-8 编码。

您应该找到编码并使用此编码来读取使用[`InputStreamReader`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html). 如果需要，然后将其保存为 UTF-8（例如使用 an `OutputStreamWriter`）。

如果您不知道编码，我建议您使用一些可能的编码进行测试：请参阅[Charsets](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/charset/Charset.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:31:31.807

是的，它可能不是 UTF-8，有关如何检查它是什么编码的一些信息，请参见此处：[Java : How to determine the correct charset encoding of a stream](https://stackoverflow.com/questions/499010/java-how-to-determine-the-correct-charset-encoding-of-a-stream)

最好的答案似乎指向[`InputStreamReader#getEncoding()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html#getEncoding())

# recursion - 使用 Id 和父 ID 从 db 中递归获取子列表

> ID：11105282
> 
> 赞同：1
> 
> 时间：2012-06-19T16:27:15.053
> 
> 标签：recursion, openjpa

我正在编写一个函数，当你抛出一个 ID 时，你应该得到这个特定 ID 的所有子孙……我正在考虑递归地执行此操作。我还使用 ORM 工具来访问数据并创建将成为父级子级的对象这是我目前使用的结构表...

```
ORGANIZATION_ID   | Name  |  PARENT_ID
--------------------------------------------------
1                 | A     |     0   -Indicates root
2                 | B     |     1
3                 | C     |     2
4                 | D     |     2
5                 | E     |     4
6                 | F     |     1
7                 | G     |     1
8                 | H     |     7
9                 | J     |     8
10                | K     |     9 
```

我在想，当我得到 org_ID 时，我会寻找它的父级......然后我会搜索所有 parentID 是 orgID 的行。
在每一个上，你都需要做同样的事情。我会这样做，而 orgID 不是搜索的原始 ID。你觉得这听起来对吗？实现它的最佳方法是什么？递归肯定会在这里发生。我只需要弄清楚如何。

# c - C如何识别右值和左值？

> ID：11105284
> 
> 赞同：1
> 
> 时间：2012-06-19T16:27:24.867
> 
> 标签：c, lvalue, rvalue

在 C 中，有没有办法识别右值和左值？

其中一些很容易识别，比如在赋值中，左边的值是左值，右边的值是右值。

但在其他情况下，很难识别这样的规则。

例如：`*p++` and `i++`（其中 p 是指向整数的指针，i 是整数） - 如何识别它是右值还是左值？上下文是`++*p++`有效的，而`++i++`不是因为`i++`是右值（正如严肃的人所说）。

如何识别表达式中的右值和左值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:20:17.330

*左值*这个术语一直在 C 中（并被带到 C++ 并在以后扩展）。一开始就没有*右值。*我的草稿 (N1570) 确实列出了两次出现的*右值*一词——一次在脚注 #64 中，一次在索引中。

简而言之：在 C 世界中，您有两种类型的对象——*左*值和其他所有对象。

请注意，脚注不是标准的一部分，但它们可以提供一些有用的见解。下面是脚注 64：

> 64) 名称“左值”最初来自赋值表达式 E1 = E2，其中要求左操作数 E1 是（可修改的）左值。将其视为表示对象“定位器值”可能更好。有时被称为“右值”的东西在本国际标准中被描述为“表达式的值”。
> 
> 左值的一个明显示例是对象的标识符。再举一个例子，如果 E 是一个一元表达式，它是一个指向对象的指针，那么 *E 是一个左值，它指定 E 指向的对象。

这提供了一个良好的开端。现在，请记住，表达式是由对象（和运算符，但我们稍后会介绍）构建的，在处理对象时需要担心两个基本的事情：类型和值。让我们看看标准对类型限制的说明（6.3.2.1/p1）：

> 左值是一个表达式（对象类型不是 void），它可能指定一个对象；64) 如果一个左值在计算时没有指定一个对象，则行为未定义。

另外，请注意下一行很重要：

> 当一个对象被称为具有特定类型时，该类型由用于指定该对象的左值指定。

因此，*左值*可以用作类型的替代品（我们也会看到这一点）。接下来，让我们看一下对象*是**左值*的上下文（6.3.2.1/2）：

> 当它是 sizeof 运算符、_Alignof 运算符、一元 & 运算符、++ 运算符、-- 运算符或 . 运算符或赋值运算符

因此，这些是您需要留意的运营商。在所有其他情况下：

> 没有数组类型的左值被转换为存储在指定对象中的值（并且不再是左值）；这称为左值转换。

有两种特殊类型：数组和函数指示符。这些*衰减*即被*转换为类型为''pointer to type''的表达式，该表达式指向数组对象的初始元素，而不是左值*/ *“指向函数返回类型的指针”*。*（请记住，我们已经暂停了左*值可以作为类型工作的事实——这正是他们所做的，`sizeof`并且`_Alignof`！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:49:36.857

*lvalue*（来自*左侧（LHS）值*）指的是内存（或寄存器）存储并且您可以为其分配值。`*p++`是一个*左值*，因为它是一个取消引用的指针（即指向内存中的位置，`ptr`而其`ptr`自身的值是该位置的地址）并且`++*ptr++`实际上意味着：`*ptr = *ptr + 1; ptr = ptr + 1;`- 它递增指向的`ptr`值，然后递增指针值本身。`i++`不是*左值*，因为它是`i`1 递增的值，并且不引用内存中的位置。您可以将此类值视为最终值 - 它们无法进一步修改，只能用作分配给*左值的值*. 这就是为什么它们被称为*右*值（来自*右侧（RHS）值*）。

LHS 和 RHS 指的是赋值表达式的两边`A = B;`。`A`是 LHS，`B`是 RHS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:55:46.820

来自 Deitel 和 Deitel：

变量名被称为*左*值（对于“左值”），因为它们可以用在赋值运算符的左侧。常量被称为*右*值（对于“正确的值”），因为它们只能用于赋值运算符的右侧。请注意，*左*值也可以用作*右值*，但反之则不行。

```
x = 3;  /*  here, x is an lvalue */
c = x;  /*  and in the next line it is an rvalue */ 
```

# ant - 在 ANT 文件中折射类似的代码片段

> ID：11105285
> 
> 赞同：2
> 
> 时间：2012-06-19T16:27:26.737
> 
> 标签：ant, mxmlc

我的 ANT 文件中有以下代码片段，它将我的项目编译为 swf 文件：

```
<target name="my target">
<mxmlc  file="${APPS_DIR}//@{appName}.mxml" 
    output="${DEPLOY_APPS_DIR}/@{appName}.swf" 
    actionscript-file-encoding="UTF-8" 
    keep-generated-actionscript="false" 
    optimize="true" 
    debug="${DEBUG_TF}" 
    locale="en_US"
    static-rsls="false"
    static-link-runtime-shared-libraries="false"
    verify-digests="false"> 
<!-- BEGIN code A -->
...
...
...
<!-- END code A -->
</mxmlc>
</target> 
```

由于我有很多以类似方式使用**代码 A**的文件，我想创建一个包含此代码的可分离文件。

但是，我怎样才能从主 ant 文件中调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:51:25.090

我找到了解决方案。自己一边回答一边问。我是在[这里](http://ant.apache.org/faq.html#xml-entity-include)找到的。

您可以使用 XML 包含外部文件的方式，并让解析器为 Ant 完成这项工作：

```
<?xml version="1.0"?>
<!DOCTYPE project [
       <!ENTITY common SYSTEM "common.xml">
]>
<project name="test" default="test" basedir=".">
  <target name="setup">
    ...
  </target>
  &common;
  ...   
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:53:09.457

使用[`import`](http://ant.apache.org/manual/Tasks/import.html). 它的作用与[实体包含相同，](http://ant.apache.org/faq.html#xml-entity-include)但它还使您能够覆盖目标并提供特殊属性，例如导入的 ant 文件的路径。从`import`文档：

> 因此，如果我导入一个名为 builddocs 的 docsbuild.xml 文件，我可以将其路径作为 ant.file.builddocs 获取，类似于主构建文件的 ant.file 属性。

*更新*（因为我没有正确阅读原始问题）

在您导入的文件中，创建[`presetdef`](http://ant.apache.org/manual/Tasks/presetdef.html)如下

```
<presetdef name="mxmlc" uri="com.chercheinfo">
   <mxmlc> 
<!-- BEGIN code A -->
...
...
...
<!-- END code A -->
   </mxmlc>
</presetdef> 
```

然后您可以将目标更改为：

```
<target name="my target">
    <kaissun:mxmlc  file="${APPS_DIR}//@{appName}.mxml" 
        output="${DEPLOY_APPS_DIR}/@{appName}.swf" 
        actionscript-file-encoding="UTF-8" 
        keep-generated-actionscript="false" 
        optimize="true" 
        debug="${DEBUG_TF}" 
        locale="en_US"
        static-rsls="false"
        static-link-runtime-shared-libraries="false"
        verify-digests="false"> 
    </kaissun:mxmlc>
</target> 
```

（您需要将以下属性添加到要绑定到`xmlns:kaissun="com.chercheinfo"`的`project`元素中）`kaissun``com.chercheinfo`

您也可以使用`presetdef`预设公共属性。例如，

```
<presetdef name="mxmlc" uri="com.chercheinfo">
   <mxmlc actionscript-file-encoding="UTF-8"
       keep-generated-actionscript="false"
       optimize="true"
       locale="en_US"
       static-rsls="false"
       static-link-runtime-shared-libraries="false"
       verify-digests="false"> 
<!-- BEGIN code A -->
...
...
...
<!-- END code A -->
   </mxmlc>
</presetdef> 
```

将允许您将目标缩小到

```
<target name="my target">
    <kaissun:mxmlc  file="${APPS_DIR}//@{appName}.mxml" 
        output="${DEPLOY_APPS_DIR}/@{appName}.swf" 
        debug="${DEBUG_TF}"> 
    </kaissun:mxmlc>
</target> 
```

:D

# nuget - 创建安装引用的 NuGet 包，其中 Copy Local 设置为 false

> ID：11105286
> 
> 赞同：14
> 
> 时间：2012-06-19T16:27:32.167
> 
> 标签：nuget

有没有办法创建一个 NuGet 包，当包安装到项目中时，它会添加对“复制本地”设置为 false 的 dll 的引用？

我认为这将是“install.ps1”文件中的某种脚本。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-19T17:43:59.830

是的，您可以使用 install.ps1 执行此操作，正如您猜到的那样。

这是一个示例 install.ps1，每次运行时都会翻转 System.dll 上的标志。您应该能够使用此示例了解如何做您想做的事情：

```
param($installPath, $toolsPath, $package, $project)

foreach ($reference in $project.Object.References)
{
    if($reference.Name -eq "System")
    {
        if($reference.CopyLocal -eq $true)
        {
            $reference.CopyLocal = $false;
        }
        else
        {
            $reference.CopyLocal = $true;
        }
    }
} 
```

但是这个 MSDN 文档应该会有所帮助。

*   `Object`Hanselman 使用对[VSProject 接口](http://msdn.microsoft.com/en-us/library/ms171024)的解析。
*   [变量 NuGet 为您提供了对项目接口](http://msdn.microsoft.com/en-us/library/x29xdte5)的`$project`解析。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T00:04:23.687

我认为这个 install.ps1 可以满足您的要求 - 包添加的所有 DLL 的 Copy Local 值都为 false。请注意，除了从中获取所有名称之外，我没有对 AssemblyReferences 列表做任何事情 - 如果您想要基于目标框架等的条件，您可能需要做更多的事情。

```
param($installPath, $toolsPath, $package, $project)

$asms = $package.AssemblyReferences | %{$_.Name}

foreach ($reference in $project.Object.References)
{
    if ($asms -contains $reference.Name + ".dll")
    {
        $reference.CopyLocal = $false;
    }
} 
```

# javascript - 窗口 B 关闭时如何触发窗口 A 中的函数？

> ID：11105289
> 
> 赞同：1
> 
> 时间：2012-06-19T16:27:44.073
> 
> 标签：javascript, jquery

您能否举个例子，当窗口 B 关闭时，函数 X 是如何在窗口 A 中触发的。例如，首先启动窗口 A，然后按下窗口 A 中的一个按钮，然后打开窗口 B 并执行某些操作……然后关闭窗口 B。一旦关闭窗口 B，焦点就会转移到窗口 A。这一次，我想执行窗口 A 中的函数 X。请让我知道如何在 Javascript 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:02:14.227

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:49:10.553

`focus`为对象上的类型注册一个事件监听器`window`：

```
window.addEventListener("focus", function() {
    console.log("I'm focused again!");
    // Rest of your code
}); 
```

对于 IE<9，请使用，`attachEvent`或者，如果您不希望出现任何问题，请定义该`window.onfocus`属性。

# playframework - Play 框架中的进度指示器

> ID：11105290
> 
> 赞同：5
> 
> 时间：2012-06-19T16:27:44.580
> 
> 标签：playframework, progress-bar

在 Play 中实现某种进度指示器的最佳方式是什么？

我有一个简单的导入页面，用户可以在其中上传 csv 文件。然后服务器会进行一些冗长的处理，直到导入完成。我想在上传后将用户重定向到一个单独的页面，并在此页面上给他一些持续的反馈，例如“导入的 856 个数据集中的 150 个”。

上传操作触发了一个控制器方法，该方法可以在自己的线程中启动耗时的任务，但是我如何通过来自另一个页面的 ajax 调用来获取作业的状态（因为 play 在请求之间没有任何类型的状态） ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:07:47.247

您可能会从您的控制器创建一个作业。事实上，如果您阅读 Play 文档，我们明确鼓励您在 Jobs 中执行长时间运行的处理，以免它们占用 HTTP 请求线程。

因此，您的工作正在运行，通过处理您的 CSV 文件。下一步是记录每个数据集的处理时间。因此，假设您向您的 Job 传递了一个参考，例如一个 uid 或某个唯一编号，然后您将其传递回您的客户。然后，您只需要记录（如果您想符合无状态并轻松扩展，可能在数据库中）根据您的唯一 ID 处理的数据集数量的每个增量。

例如

```
@Entity
public class DatasetProgress extends Model {

    public Long uid;
    public Long datasetsDone;
    public Long datasetsTotal;

} 
```

然后，您可以创建一个控制器操作，该操作根据您的 uid 返回 DatasetProgress 对象，您可以使用它来显示进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:44:30.747

您可以做的一件事是进行一些集中通知。您可以为导入提供一些唯一标识符并编写以该 ID 为键的更新消息。然后要检索状态，您只需使用该密钥。

另一种选择是使用网络套接字并将通知推送回客户端（尽管它们尚未得到广泛支持）。

# visual-studio-2010 - Resharper“无法分析项目输出。文件不存在”

> ID：11105294
> 
> 赞同：2
> 
> 时间：2012-06-19T16:27:52.550
> 
> 标签：visual-studio-2010, resharper

多年来一直使用 Resharper。但是，在我当前的位置，当我使用 Resharper 6.1 在 Visual Studio 2010 的解决方案中运行所有单元测试时，所有项目都会编译，然后出现以下消息框，要求我点击 OK：

```
---------------------------
ReSharper Unit Testing
---------------------------
Cannot analyse project output.

The file does not exist.
---------------------------
OK   
--------------------------- 
```

在我按 OK 之前，测试不会运行。我无法弄清楚为什么会发生这种情况，而且似乎没有不利影响。

问题似乎也越来越严重。随着时间的推移，这个问题在某些时候变得更糟：首先我只得到这个消息框一次，现在我得到了五次（在测试运行之前我必须点击 OK 五次 :-)）

注意：如果我运行单个单元测试或一类单元测试，甚至是特定项目中的所有单元测试，则不会发生这种情况。

任何想法为什么会发生这种情况？如何解决？

# fancybox - 我想在页面加载时启动一个 Fancybox（例如 Fancybox 的模式或灯箱版本）

> ID：11105296
> 
> 赞同：0
> 
> 时间：2012-06-19T16:28:01.060
> 
> 标签：fancybox

我不知道在哪里插入脚本才能在页面加载时打开一个精美的框以进行添加。如果我向他们发送我的代码，任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:43:17.617

如果使用fancybox v1.3.4，请查看[http://fancybox.net/blog](http://fancybox.net/blog) No. 6

如果使用fancybox v2.x，请查看[http://fancyapps.com/fancybox/#useful](http://fancyapps.com/fancybox/#useful) No. 11

如果您只想在访问者第一次访问该页面时启动 fancybox，您也可以查看此[https://stackoverflow.com/a/8305703/1055987](https://stackoverflow.com/a/8305703/1055987)

# javascript - 搜索与搜索和替换

> ID：11105300
> 
> 赞同：1
> 
> 时间：2012-06-19T16:28:13.010
> 
> 标签：javascript

我正在用 JavaScript 编写一段代码，它应该替换 JSON obj 中多个字符串中出现的所有字符。

并非所有的字符串都包含特定的字符，我们正在谈论**很多字符串**。所以我的问题是：在谈论效率时，最好是进行替换还是在字符串中搜索字符，并且只有在找到时才进行替换？

换句话说：

```
var obj = ["str","str2","tr3","str","tr2","str3","str","s22tr2","str3","st","rtr2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3"]; 
```

选项1：

```
for(var i=0;i<obj.length;i++){
  if(obj[i].indexOf("s")!=-1){
      document.write(obj[i].replace(/s/gi,"*"));
  }
}​ 
```

选项2：

```
for(var i=0;i<obj.length;i++){
    document.write(obj[i].replace(/s/gi,"*"));
}​ 
```

想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:03:28.963

它取决于 obj 中元素的数量和每个元素的大小，在大多数情况下，直接替换更快。到目前为止，您提供的样本最快的是“加入和替换”。检查这个非常懒惰的例子：

```
var obj = ["str","str2","tr3","str","tr2","str3","str","s22tr2","str3","st","rtr2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3","str","str2","str3"];
var b = obj.join(',');
b +=',' + b; //  * 2
b +=',' + b; //  * 4
b +=',' + b; //  * 8
b +=',' + b; //  * 16
b +=',' + b; //  * 32
b +=',' + b; //  * 64
b +=',' + b; //  * 128
obj = b.split(',');
var t1 = new Date().getTime();

for(var i=0;i<obj.length;i++)
    if(obj[i].indexOf("s")!=-1 || obj[i].indexOf("S")!=-1)
        document.write(obj[i].replace(/s/gi,"*"));
    else
        document.write(obj[i]);
document.write('<br>');

var t2 = new Date().getTime();

for(var i=0;i<obj.length;i++)
    document.write(obj[i].replace(/s/gi,"*"));
document.write('<br>');

var t3 = new Date().getTime();

document.write(obj.join('|').replace(/s/gi,"*").split('|').join('')); // see note
document.write('<br>');

var t4 = new Date().getTime();

alert((t2-t1) + ' vs ' + (t3-t2) + ' vs ' + (t4-t3)); 
```

注意：'|' 表示不包含在对象元素中的字符（甚至是标记），有助于避免错误。

挑选。

更新：

在第一次测试中添加了大写字母 S。

值得探索的有趣案例：/s/gi.test vs indexOf

# python - 詹金斯执行时间太长

> ID：11105304
> 
> 赞同：2
> 
> 时间：2012-06-19T16:28:48.470
> 
> 标签：python, windows, selenium, build, jenkins

我目前正在使用 Jenkins 构建 Python 回归测试。出于某种原因，测试套件中的每个单独测试都需要大约。在 Jenkins 中运行 15 分钟（总共大约 70/80 个测试），但是当我在同一个 Windows 框中从命令行运行测试时，每个单独的测试只需要大约 30 秒到 1 分钟即可运行。我什至将打印语句放在一些文件中，但它们都没有出现在 jenkins 命令行输出中。有没有其他人遇到过这个问题或有任何建议？

谢谢

另外，我不是每次构建时都进行同步，只同步一次！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:23:39.513

这可能与在后台（和/或作为服务）运行 Jenkins 有关。尝试在前台运行它，`java -jar jenkins.war`看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:10:05.570

检查机器上的负载并确保为 Jenkins 设置了足够的内存来运行这些测试。

目前尚不清楚您是使用 Jenkins-slave 还是直接在 master 上工作 - 这也可能对性能产生影响。

# c# - 并发 Web 请求性能问题

> ID：11105307
> 
> 赞同：5
> 
> 时间：2012-06-19T16:28:51.400
> 
> 标签：c#, httpwebrequest, task-parallel-library

我正在开发一项新服务来为我们公司的多个 Web 资产运行 QA，并且遇到了一个有趣的网络并发问题。为了提高性能，我使用 TPL 根据大量 url 创建 HttpWebRequest，以便它们可以并行运行；但是，我似乎无法找到过程中的瓶颈所在。

到目前为止我的观察：

*   我最多可以通过 TPL 获得大约 25-30 个并行线程
*   服务的 CPU 永远不会中断 5-6%（在 1 - 4 个内核上运行，有和没有 H/T）
*   NIC 使用率从不中断 2-3%
*   整体网络流量似乎没有受到影响（其他用户没有抱怨，同时运行的速度测试没有显示出太大的影响）
*   在我们的办公网络 (15Mbps) 或我们的数据中心 (100+Mbps) 上运行之间的速度变化不大
*   通过一次从多台主机下载而不是从一台主机下载大量页面，我获得了一点性能提升。

可能的痛点：

*   CPU（内核或硬件线程数）
*   网卡
*   最大允许并发 HttpWebRequest 数
*   局域网
*   广域网
*   路由器/交换机/负载均衡器

**所以问题是：**

显然，现在可以在几分钟内下载整个互联网，但我很想知道在这种情况下瓶颈在哪里，以及可以采取什么措施来克服它。

附带说明一下，我们目前正在使用 3rd 方服务进行抓取，但我们在某些方面受到它们的限制，并且希望获得更大的灵活性。关于公司秘密酱汁或[箭尖上的毒药](http://techcrunch.com/2012/04/15/user-experience-and-the-poison-on-the-tip-of-the-arrow/)...... :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T16:34:34.937

我强烈怀疑以下原因之一是：

1.  您遇到了默认连接限制。检查 ServicePointManager.DefaultConnectionLimit 的值。我建议您将其设置为几乎无限的值，例如 1000。
2.  TPL 没有启动足够多的线程来使网络饱和。请注意，远程 Web 服务器可能有大量延迟。在等待期间，您的线程不会对网络施加负载。

TPL 不保证任何最低并行度 (DOP)。这很可惜，因为有时在使用 IO 时，您确实需要准确控制并行度。

我建议您手动启动固定数量的线程来执行 IO，因为这是保证特定 DOP 的唯一方法。您需要试验确切的值。它可能在 50 到 500 的范围内。您可以减少线程的默认堆栈大小，以节省那么多线程的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:37:50.307

也许你达到了 TCP 连接限制，或者没有正确处理连接，无论如何尝试使用 JMeter 之类的东西来查看你可以获得的最大并发 HTTP 吞吐量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T17:05:57.577

> 代码真的很简单。我使用 Parallel.ForEach 循环访问一组 URL（字符串）。该操作创建一个 HttpWebRequest，然后将结果转储到 ConcurrentBag。顺便说一句，NCrawler 似乎很有趣；我会检查一下。谢谢你的提示。

因为用 Parallel.ForEach 是不可能控制线程数的，所以我建议至少切换到一个`ThreadPool`.

您可以使用它[`QueueUserWorkItem`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)来分配工作，直到您的任务集合完全推送到工作线程或直到方法返回 false（池中没有更多线程）。

`ThreadPool`您可以控制要分配的最大线程[`SetMaxThreads`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.setmaxthreads.aspx)数。

# jquery - 使用 jQuery 获取子单选按钮的值

> ID：11105309
> 
> 赞同：0
> 
> 时间：2012-06-19T16:29:10.793
> 
> 标签：jquery

我的 HTML 代码如下所示：

```
 <div id="single"><br><br>
     1) effew<br>
     <input name="answer0" id="answer0" value="1" type="radio"> ewf
     <input name="answer0" id="answer0" value="2" type="radio"> avb
     </div>
     <div id="single"><br><br>
     2) fe<br>
     <input name="answer1" id="answer1" value="1" type="radio"> few
     <input name="answer1" id="answer1" value="2" type="radio"> eww
     <input name="answer1" id="answer1" value="3" type="radio"> tfs
     </div> 
```

我想以 id 为单个迭代上述 div 标签，然后在每个 div 标签中以单个 id 获取选定单选按钮的值。编写的jQuery代码是：

```
$("input[name=single]").each( function() {
    var val = $('input[name=answer]:checked').val();
    alert(val);
}); 
```

上面的 jQuery 代码似乎不起作用。请。建议我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:34:23.827

**HTML** （请注意，我更改`Id`了，`class`因为不允许重复的 id

```
 <div class="single"><br><br>
      1) effew<br>
     <input name="answer0" id="answer0" value="1" type="radio"> ewf
     <input name="answer0" id="answer0" value="2" type="radio"> avb
 </div>
 <div class="single"><br><br>
     2) fe<br>
     <input name="answer1" id="answer1" value="1" type="radio"> few
     <input name="answer1" id="answer1" value="2" type="radio"> eww
     <input name="answer1" id="answer1" value="3" type="radio"> tfs
 </div> 
```

**JS**

```
$("div.single input[type=radio]:checked").each( function() {
    alert(this.value);
}); 
```

[jsFiddle 演示](http://jsfiddle.net/WtXTs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:32:04.593

试试这个 - [http://jsfiddle.net/NfLwy/](http://jsfiddle.net/NfLwy/)

```
$("div.single input:checked").each( function() {
    alert( $(this).val() );
}); 
```

并且`id`应该是独一无二的。替换为`class`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:43:18.757

相同的 html 上不能存在相同的 ID，在这种情况下您应该使用 class。
这是[演示](http://jsfiddle.net/NVhAx/1/)。尝试一下：

**HTML**

```
<div class="single"><br><br>
     1) effew<br>
     <input name="answer0" id="answer0" value="1" type="radio" checked> ewf
     <input name="answer0" id="answer0" value="2" type="radio"> avb
</div>
<div class="single"><br><br>
     2) fe<br>
     <input name="answer1" id="answer1" value="1" type="radio"> few
     <input name="answer1" id="answer1" value="2" type="radio"> eww
     <input name="answer1" id="answer1" value="3" type="radio" checked> tfs
</div>​ 
```

**JS：**

```
 $("div.single input[type=radio]:checked").each( function() {
        var val = $(this).val();
        alert(val);
    });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T11:20:15.740

一个更简单的解决方案是

```
$('.single').on('click',function(e) {
            alert($($(this).find("input[type=radio]:checked")).attr('id'));
        }); 
```

# python - Log in Profile in python

> ID：11105310
> 
> 赞同：-2
> 
> 时间：2012-06-19T16:29:14.490
> 
> 标签：python

Is there any way that we can print the user name of the person who has logged in the system in the file? the file is an output file of python.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:46:31.507

你可以调查一下`os.environ`。

```
In [1]: import os

In [2]: os.environ['LOGNAME']
Out[2]: 'lev' 
```

# php - Do a query to an array?

> ID：11105317
> 
> 赞同：0
> 
> 时间：2012-06-19T16:29:46.157
> 
> 标签：php, arrays

I have this:

```
$array = array(1 => array('min' => 0, 'max' => 0.5, 'value'=>12.5),
2 => array('min' => 0.5, 'max' => 1, 'value'=>13.5),
3 => array('min' => 1, 'max' => 1.5, 'value'=>15.5),
4 => array('min' => 1.5, 'max' => 2, 'value'=>18.5)); 
```

Then I have the variable (which of course is dynamic)

```
$number= 1.1; 
```

How would I do to get the value 15.5 given that `$number` is between `1` and `1.5` ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:32:07.733

Iterate through the array.

```
function getValue($array, $number){
  foreach($array as $params):
    if($params['min'] < $number and $params['max'] > $number)
      return $params['value'];
  endforeach;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:50:55.247

过于复杂的 map-reduce 方式：

[http://codepad.org/s6T86VYf](http://codepad.org/s6T86VYf)

```
$array = array(
1 => array('min' => 0, 'max' => 0.5, 'value'=>12.5),
2 => array('min' => 0.5, 'max' => 1, 'value'=>13.5),
3 => array('min' => 1, 'max' => 1.5, 'value'=>15.5),
4 => array('min' => 1.5, 'max' => 2, 'value'=>18.5));

$number= 1.1;

function reduce( $row ){
  global $number;
  return $row['min'] <= $number
      && $row['max'] >= $number;
}

function map( $row ){
  return $row['value'];
}

$reduced = array_filter( $array, 'reduce');

$mapped = array_map('map', $reduced );

print_r( $mapped ); 
```

# java - Eclipse RCP 应用程序 - 创建 Preference 页面条目，该条目以加密方式保存

> ID：11105321
> 
> 赞同：3
> 
> 时间：2012-06-19T16:30:00.977
> 
> 标签：java, encryption, eclipse-plugin, preferences, rcp

我发现可以为我的 Eclipse 3.7 RCP 应用程序创建首选项页面。
如何做到这一点在[此处](http://www.vogella.com/articles/EclipsePreferences/article.html#preferencepage)描述。

**问题：**
是否可以在preferecne-page 中添加一个条目字段，该字段将被**加密**保存在安全存储中？

到目前为止，我只找到了一种以编程方式使用安全存储的方法。
这对我来说不是一个解决方案，因为首选项页面条目会自动保存。

**解决方案：** 我做到了，正如 Tonny Madsen 所说：

*   扩展`SecureIPreferenceStore`类，这是一个`IPreferenceStore`.
*   通过使用类型的私有变量，使新类将所有首选项存储在安全存储中`ISecurePreferences`
*   将新类设置为首选项页面的 PreferenceStore

*ScopedPreferenceStore 的扩展*

```
 public class SecureIPreferenceStore extends ScopedPreferenceStore {

/* Current class will override all storage and loading methods, using this secure preferenceStore, to store all preferences in an encrypted way. */ 
    private static final ISecurePreferences SECURE_PREFERENCES = SecurePreferencesFactory.getDefault();

/**
* Use this class to retrieve an instance of  {@code SecureIPreferenceStore}, which will store all preferences in the default secure storage.
 * 
 * @param context - the scope to store to, e.g. {@link org.eclipse.core.runtime.preferences.ConfigurationScope ConfigurationScope} 
 * or {@link org.eclipse.core.runtime.preferences.InstanceScope InstanceScope}
 * 
* @param qualifier - the qualifier to look up the preference node. An example of a qualifier would be the plug-in identifier that the preference is associated with,
* (e.g. the "org.eclipse.core.resources" uses the preference node in the instance scope where the preferences for "org.eclipse.core.resources" are stored)
*/
public SecureIPreferenceStore(IScopeContext context, String qualifier){
        super(context, qualifier);
}

@Override
public void setValue(String name, boolean value) {
    try {
        SECURE_PREFERENCES.putBoolean(name, value, true);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void setValue(String name, double value) {
    try {
        SECURE_PREFERENCES.putDouble(name, value, true);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void setValue(String name, float value) {
    try {
        SECURE_PREFERENCES.putFloat(name, value, true);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void setValue(String name, int value) {
    try {
        SECURE_PREFERENCES.putInt(name, value, true);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void setValue(String name, long value) {
    try {
        SECURE_PREFERENCES.putLong(name, value, true);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void setValue(String name, String value) {
    try {
        SECURE_PREFERENCES.put(name, value, true);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public boolean getBoolean(String name) {
    Boolean result = false;
    try {
        result = SECURE_PREFERENCES.getBoolean(name, result);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return result;
}

@Override
public double getDouble(String name) {
    Double result = 0.0;
    try {
        result = SECURE_PREFERENCES.getDouble(name, result);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return result;
}

@Override
public float getFloat(String name) {
    Float result = 0.0f;
    try {
        result = SECURE_PREFERENCES.getFloat(name, result);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return result;
}

@Override
public int getInt(String name) {
    int result = 0;
    try {
        result = SECURE_PREFERENCES.getInt(name, result);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return result;
}

@Override
public long getLong(String name) {
    Long result = 0L;
    try {
        result = SECURE_PREFERENCES.getLong(name, result);
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return result;
}
} 
```

*FieldEditorPreferencePage 中新类的用法：*

```
 @Override
    public void init(IWorkbench workbench) {
        setPreferenceStore(
                new SecureIPreferenceStore(ConfigurationScope.INSTANCE, 
                        "de.vogella.rcp.preferences.secure") );
        setDescription("A demonstration of a preference page implementation");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:12:20.647

这个我没试过，但是...

我会添加自己`IPreferenceStore`的安全存储，然后`FieldEditors`在首选项页面中使用常用的。

`ScopedPreferenceStore`最简单的方法是重写子类`getStorePreferences()`以返回一个新的`IEclipsePreferences`. `EclipsePreferences`这可能是覆盖各种`internal...(...)`接口方法的子类`ISecurePreferences`。鉴于内部方法与 的方法非常匹配`ISecurePreferences`，这可能不会非常困难:-)

# apache-flex - 在设置数据之前会打开 Flex 弹出窗口

> ID：11105330
> 
> 赞同：0
> 
> 时间：2012-06-19T16:30:23.073
> 
> 标签：apache-flex, adobe, popupwindow

我有一个从按钮打开的弹出窗口（selectReasonCode）。该按钮具有以下代码

```
var selectReasonCode:SelectReasonCode = new SelectReasonCode();         
selectReasonCode.title = "Reason Codes";
selectReasonCode.showCloseButton = true;
PopUpManager.addPopUp(selectReasonCode, this, true);
PopUpManager.centerPopUp(selectReasonCode);             
selectReasonCode.updateReasons(reasonTypeId, rasonCds);  //This sets the dataprovider 
```

在选择原因代码屏幕上，我有一个数据网格，其中填充了 updateReasons 方法（由上述方法调用）中设置的值。

问题是我的弹出屏幕打开为空。但是如果我在调试模式下在代码中添加一个断点并传递它，屏幕就会打开数据。我相信屏幕会在数据实际设置之前打开。这是真的吗？如果是这样，我如何确保在屏幕打开之前先执行 update Reasons 方法？

要排除调试模式...我在 updateReasons 代码后添加了一行以导致错误。因此首先显示错误，用户单击确定，然后打开弹出窗口。然后数据显示在弹出窗口中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:41:03.300

> 我相信屏幕会在数据实际设置之前打开。这是真的吗？

是的！

> 如果是这样，我如何确保在屏幕打开之前先执行 update Reasons 方法？

执行该方法，直到您取回数据后才显示弹出窗口。在调试模式下执行可能会给您在等待数据从远程服务器返回时所需的暂停；取决于调试点在哪里。

但是，您可以像这样移动 updateReasons 方法调用：

```
var selectReasonCode:SelectReasonCode = new SelectReasonCode();         
selectReasonCode.title = "Reason Codes";
selectReasonCode.showCloseButton = true;
selectReasonCode.updateReasons(reasonTypeId, rasonCds);  //This sets the dataprovider 
PopUpManager.addPopUp(selectReasonCode, this, true);
PopUpManager.centerPopUp(selectReasonCode); 
```

但是，在 updateReasons 触发异步服务调用的假设下，您必须等到数据返回后才能显示弹出窗口。概念上是这样的：

```
// first make your pop up component an instance variable instead of a local variable to the method
protected var selectReasonCode:SelectReasonCode;         

// in your method; create the instance like nromal 
selectReasonCode:SelectReasonCode = new SelectReasonCode();
selectReasonCode.title = "Reason Codes";
selectReasonCode.showCloseButton = true;
selectReasonCode.updateReasons(reasonTypeId, rasonCds);  //This sets the dataprovider  
selectReasonCode.addEventListener('someEventThatTellsMeDataIsReturn',onPopUpDataReturn);

// finally in your data is available method, display the pop up using the PopUpManager
protected function onPopUpDataReturn(event:Event):void{
  PopUpManager.addPopUp(selectReasonCode, this, true);
  PopUpManager.centerPopUp(selectReasonCode);             
} 
```

# c# - 使用统一和泛型，是否在容器旋转期间注入关闭类型的实例，如果是，为什么？

> ID：11105331
> 
> 赞同：1
> 
> 时间：2012-06-19T16:30:23.553
> 
> 标签：c#, dependency-injection, unity-container

看来情况就是这样。如果我将泛型标记为封闭类型，则说明我打算使用类型而不是类型的实例。当 Unity 尝试解析下面的 ExternalLinkingRepository 类中的关闭类型时，我收到一个错误。该错误指出 Unity 无法协调构造函数，因为具有相同数量的参数 (2) 的参数超过 1 个。我已经查看了构造函数注入器（并且确实需要一个用于连接字符串，但这不是问题）关于 Unity 为什么尝试实例化关闭类型的任何想法？

这是我的容器和代码的注册片段。我错过了什么或误解了什么：

```
 // Bootstrapping location...
    .RegisterType<ICampaignRepository, ExternalLinkingRepository>()

    // Concrete Repository -- CampaignDataContext is the cause of issue
    public class ExternalLinkingRepository : RepositoryBase<CampaignDataContext>, ICampaignRepository
    { 
      // blah
    }

    //Base class
     public abstract class RepositoryBase<T> where T : DataContext, IDisposable
     {

       protected T _dataContext;

       public RepositoryBase(String connectionString)
       {

        if (_dataContext == null)
        {
            _dataContext = (T)new DataContext(connectionString);
        }

       }

      public void Dispose()
      {
         if (_dataContext != null)
         {
            GC.SuppressFinalize(_dataContext);
            _dataContext.Connection.Close();
         }
      }

} 
```

**编辑 anyaysis 的更详细的代码列表和错误消息** **容器配置**

```
 IUnityContainer container = new UnityContainer();

        // *****NB**** The code below throws an exception - this is a know bug with Unity
        // If you have the exception manager set to break on "thrown" exceptions (as opposed to just userhandled exceptions) you will be stopped here. 
        // However, the exception IS handled  within the Unity framework and execution of the application can continue safely. The next release of Unity will fix this. 
        // Remove this message when vNext Unity is used. 

        container.RegisterType<IBusinessManager, KnowledgeKubeBusinessManager>()
        .RegisterType<IDataManager, KnowledgeKubeDataManager>()
            // In this instance, specific concrete types are registered for the interfaces specified in the constructor of the UserManagerFactory
        .RegisterType<IUserManagerFactory, UserManagerFactory>(new InjectionConstructor(new ResolvedParameter(typeof(FormsAuthenticatedUserManager)), new ResolvedParameter(typeof(WindowsAuthenticatedUserManager))))
        .RegisterType<IApplicationConfigurationSettings, ApplicastionConfigurationSettings>()
        .RegisterType<IKnowledgeKubeSessionProvider, KnowledgeKubeManagerSessionProvider>()
        .RegisterType<IQuestionnaireQueryArgs, AnsweredKnowledgeQuestionnaireQueryArgs>()
        .RegisterType<ICampaignBusinessManager, CampaignBusinessManager>()
        .RegisterType<ICampaignRepository, ExternalLinkingRepository>(new InjectionConstructor(ConnectionString))

            // Add Interception on KnowledgeKubeDataManager using the  VirtualMethodInterceptor (Much Faster than the TransparentProxyInterceptor)  
        .AddNewExtension<Interception>().Configure<Interception>().SetDefaultInterceptorFor<KnowledgeKubeDataManager>(new VirtualMethodInterceptor())
        .Container.AddNewExtension<Interception>().Configure<Interception>().SetDefaultInterceptorFor<WindowsAuthenticatedUserManager>(new VirtualMethodInterceptor()); 
```

**ExternalLinkingRepository 配置**

```
/// <summary>
/// TODO: Some refactoring going on here from Campaign to external data linking. 
/// </summary>
public class ExternalLinkingRepository : RepositoryBase<CampaignDataContext>, ICampaignRepository
{

    public ExternalLinkingRepository(String connectionString) : base(connectionString) { }

      public void GetKnowledgeAreaIDs(String externalURLID, String username, out Guid userID, out Int32 knowledgeGroupID, out Int32 knowledgeQuestionnaireID)
    {
        knowledgeGroupID = 0;
        knowledgeQuestionnaireID = 0;
        userID = Guid.Empty; 

        try
        {
            int productIdx = 0; 
            foreach (var result in _dataContext.usp_GetKnowledgeAreaIDSByExternalURLID(externalURLID,username))
            {
            // blah 
```

**错误信息**

> “/WhiteBox”应用程序中的服务器错误。CampaignDataContext 类型有多个长度为 2 的构造函数。无法消除歧义。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：类型 CampaignDataContext 有多个长度为 2 的构造函数。无法消除歧义。
> 
> 源错误：
> 
> 第 115 行：_container = 容器；第 116 行：
> 第 117 行：container.BuildUp(this as T); 第 118 行：
> 第 119 行：}
> 
> 源文件：C:\Development\Acropolis\Development\KnowledgeKube_1.0.0\Acropolis Suite\WhiteBox\WhiteBox\Web\WhiteBoxBasePage.cs 行：117
> 
> 堆栈跟踪：
> 
> [InvalidOperationException：CampaignDataContext 类型有多个 >length 2 的构造函数。无法消除歧义。] Microsoft.Practices.ObjectBuilder2.ConstructorSelectorPolicyBase`1.FindLongestConstructor(>Type typeToConstruct) 在 e:\Builds\Unity\UnityTemp\Compile\Unity\Unity \Src\ObjectBuilder>\Strategies\BuildPlan\Creation\ConstructorSelectorPolicyBase.cs:113

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:03:02.180

Unity 在设置阶段不会创建对象实例。但是，当您注册一个映射时，Unity 会尝试识别创建实例时要使用的构造函数。默认情况下，Unity 将选择接受最多参数的构造函数（最贪婪的构造函数）。如果有多个构造函数采用最大数量的参数（我不确定，但从您的描述中听起来好像有两个 ctor 采用 1 个参数？）Unity 无法决定使用哪个构造函数，因此会引发异常。要解决此问题，您可以删除其中一个构造函数或明确告诉 Unity 要使用哪个构造函数

```
container.RegisterType<ICampaignRepository, ExternalLinkingRepository>(
    new InjectionConstructor("myConnectionString")); 
```

或者，如果您有一个 ctor 接受您希望由 Unity 解析的参数，您可以通过它们的类型指定它们

```
container.RegisterType<ICampaignRepository, ExternalLinkingRepository>(
    new InjectionConstructor(typeof(IMyTypeThatUnityShouldResolve)); 
```

# file-get-contents - JSON file_get_contents 空文件

> ID：11105332
> 
> 赞同：0
> 
> 时间：2012-06-19T16:30:26.327
> 
> 标签：file-get-contents, json

为什么这会输出一个 0 字节的文件？

```
<?php
$jsonurl = "http://do.convertapi.com/Web2Pdf/json/?curl=http://stackoverflow.com/";
$json = file_get_contents($jsonurl,0,null,null);
$json_output = json_decode($json);
file_put_contents('converted.pdf', $json_output);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:37:19.433

我想您需要执行以下操作：

```
file_put_contents('converted.pdf', base64_decode($json_output->File)); 
```

您实际上所做的是检索 JSON 数据并将其解码为 PHP 对象。您需要从该对象中检索“文件”属性的内容并将其放入文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:47:30.043

$json_output 是一个对象，但 file_put_contents 只接受字符串或数组

# c++ - What does a const cast do differently?

> ID：11105333
> 
> 赞同：3
> 
> 时间：2012-06-19T16:30:30.263
> 
> 标签：c++

Is there an actual difference between a const_cast and c style cast (ObjectType) ?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T16:32:32.663

A `const_cast` conveys specific information about the intent behind the cast that a C cast cannot.

If you accidentally try to use a `const_cast` for purposes other than adding or removing `const` or `volatile`, the compiler will help you with an error message.

Also, `const_cast` is searchable, unlike a C-style cast.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T16:33:51.057

A`const_cast`只能添加或删除`const`-ness（或`volatile`-ness，尽管这不太常见）。

C 风格的演员表可以做与任何“新”演员表相同的事情，除了 a `dynamic_cast`（它可以做一些他们都做不到的事情，尽管它在这里并不真正相关）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T16:31:35.263

C-style cast in C++ attempts a static cast, a reinterpret cast, a const cast, or a combination of those.

It is recommended to avoid C casts mainly because...

*   reinterpret casts and const casts are used seldomly enough that it's good to emphasize what you're doing,
*   in other cases, when you want a static cast, writing it explicitly gives you additional compile-time checks compared to C casts.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:34:43.670

`const_cast`只能修改参数的*const-ness*（或*volatile-ness*），而不是它的*基本*类型。所以

```
 const T *tc = f();
 volatile T *tv = g();

 U *ua = const_cast<U*>(tc); //error
 U *ub = const_cast<U*>(tv); //error

 U *ub = (U*)(tc); //okay
 U *ub = (U*)(tv); //okay 
```

所以 c-style cast 修改 cv-qualified`T*`到`U*`没有任何问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T16:34:23.617

一样的动作。C 风格的强制转换可以完全抛弃 const。

const_cast 的原因是它可以作为一个可搜索的红旗，可以搜索并仔细审查/惩罚有罪的人。这个想法是 C++ 比 C 更加类型紧密。因此，如果不是不可能的话，故意违反类型系统（例如违反 const 正确性）很容易被发现。

使这种违反类型安全的行为完全不可能会破坏太多的向后兼容性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T16:34:21.163

const_cast 受到更多限制，除了更改 const-ness 之外，不会让您做任何事情。这使它更安全，即不易发生事故。

此外，它更容易搜索。

# asp.net-mvc - Telerik report in a popup won't open a second time

> ID：11105334
> 
> 赞同：1
> 
> 时间：2012-06-19T16:30:32.677
> 
> 标签：asp.net-mvc, dom, telerik-mvc, telerik-reporting

I am displaying a Telerik report in a Telerik MVC popup window which is instantiated in client-side code. Everything works fine the first time -- the report appears normally.

But if the window is closed (as it will be) and the user clicks for a second time the button on the page that opens the popup, the popup opens but no report content appears. Here is the client code:

```
$(document).ready(function () {

    $('#printButton').click(function () {
        var printPopup = $.telerik.window.create({
            title: "Resident Account Report",
            contentUrl: '/myApp/ReportPages/ReportPage.aspx' + '?rpt=myReport&ID=' + @Model.id,
            actions: ["Refresh", "Maximize", "Close"],
            height: 600,
            width: 1100,
            modal: true,
            resizable: true,
            draggable: true,
            scrollable: false,
            onRefresh: function () {
                var myWindow = $(this).data('tWindow');
                myWindow.center().open();
            }
        });
    });
}); 
```

Is the problem because the first popup instance still exists in the DOM and needs to be disposed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:48:03.840

我相信你上面解释的问题正是原因。关闭 MVC 弹出窗口不会释放加载到 MVC 弹出窗口中的对象。因此，您要么为每个弹出窗口处理并重新加载报告模块，要么仅使用将报告内容从原始页面导出到您的弹出窗口，这样您的内容将始终位于父窗口中，并且弹出窗口将仅用于查看导出的报告数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T18:58:24.933

我知道这个问题已经有将近 1.5 年的历史了，但是我遇到了同样的问题并且我有解决方案，所以为将来会遇到这个问题的兄弟们分享解决方案。

就我而言，我从 Action 返回整个视图以响应 ajaxRequest()。在这种情况下，它还会返回所有与现有文件冲突的 JS 文件、CSS 文件等。

当我改变我的动作以返回部分视图时，一切都像魅力一样。

谢谢你，桑德什·达迪

# annotations - jaxb, can I use @XmlJavaTypeAdapter with @XmlElements?

> ID：11105338
> 
> 赞同：3
> 
> 时间：2012-06-19T16:31:02.973
> 
> 标签：annotations, jaxb, marshalling, xmladapter

Given the following annotations

```
@XmlElements({
 @XmlElement(name = "first", type = First.class),
 @XmlElement(name = "second", type = Second.class),
 @XmlElement(name = "third", type = Third.class),
 @XmlElement(name = "fourth", type = Fourth.class),
 @XmlElement(name = "fifth", type = Fifth.class),
 @XmlElement(name = "sixth", type = Sixth.class),
 @XmlElement(name = "seventh", type = Seventh.class)})
private List<Dimension> dimensions = new ArrayList<>(); 
```

And because of some funny legacy logic, I need to provide an adapter for Third.class.

```
@XmlJavaTypeAdapter(ThirdAdapter.class)
public class Third implements Dimension 
```

However, ThirdAdapter never seems to be called. Is @XmlJavaTypeAdapter compatible with @XmlElements? Or is there a better solution to this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:47:10.630

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/#moxy)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

这似乎是 JAXB[参考实现](http://jaxb.java.net/)中的一个错误。这也是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/#moxy)中的一个[**错误**](https://bugs.eclipse.org/bugs/show_bug.cgi?id=347026)，但我们已在 EclipseLink 2.4.0 流中修复了它。您可以从以下位置下载候选版本：[](http://www.eclipse.org/eclipselink/#moxy)

 ***   [http://www.eclipse.org/eclipselink/downloads/milestones.php](http://www.eclipse.org/eclipselink/downloads/milestones.php)

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要添加一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```**

# ruby-on-rails - yaml_db Not Working When Dumping the Database

> ID：11105339
> 
> 赞同：1
> 
> 时间：2012-06-19T16:31:11.977
> 
> 标签：ruby-on-rails, database, yaml, dump

I'm trying to convert my rubyonrails project from sqlite3 to MySQL by following:

*   [Convert a Ruby on Rails app from sqlite to MySQL?](https://stackoverflow.com/questions/1670154/convert-a-ruby-on-rails-app-from-sqlite-to-mysql)
*   [https://github.com/ludicast/yaml_db](https://github.com/ludicast/yaml_db)

Here is the command line log:

```
plee@sos:~/rubyonrails/blog$ gem install yaml_db
Successfully installed yaml_db-0.2.3
1 gem installed
Installing ri documentation for yaml_db-0.2.3...
Installing RDoc documentation for yaml_db-0.2.3...

plee@sos:~/rubyonrails/blog$ gem list | grep yaml_db
yaml_db (0.2.3)

plee@sos:~/rubyonrails/blog$ rake db:data:dump
rake aborted!
Don't know how to build task 'db:data:dump'

(See full trace by running task with --trace)

plee@sos:~/rubyonrails/blog$ rake db:dump
rake aborted!
Don't know how to build task 'db:dump'

(See full trace by running task with --trace)
plee@sos:~/rubyonrails/blog$ 
```

and my OS info:

```
plee@sos:~/rubyonrails/blog$ uname -a
Linux sos 2.6.38-15-generic-pae #60-Ubuntu SMP Tue May 22 11:48:17 UTC 2012 i686 i686 i386 GNU/Linux
plee@sos:~/rubyonrails/blog$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 11.04
Release:    11.04
Codename:   natty 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T20:02:41.823

我终于明白为什么了。安装需要两个步骤：

步骤 1\. 安装`gem` `yaml_db`：

`gem install yaml_db`

步骤 2\. 将其添加到`Gemfile`您的项目主目录下

`gem 'yaml_db'`

然后我们就可以`rake db:dump`毫无问题地运行了。

# android - android layout - scale image to fit custom view

> ID：11105340
> 
> 赞同：0
> 
> 时间：2012-06-19T16:31:13.083
> 
> 标签：android, image, image-manipulation, android-view

I was wandering if anyone could help me with a little image scaling problem that I have while creating custom view (customized button)? So, I created a custom view class with custom constructor and few methods:

```
public class GamesButton extends View {
public int imageID;
public Bitmap image;
public GamesButton(Context context, AttributeSet attrs) {
    super(context, attrs);
}
public GamesButton(Context context, int resImage) {
    super(context);
    this.imageID = resImage;
    this.image = BitmapFactory.decodeResource(context.getResources(),imageID);
    setFocusable(true);
    setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // do something
        }
    });
    setClickable(true);
}
public void onDraw(Canvas canvas) {
    Paint textPaint = new Paint();
    textPaint.setColor(Color.BLACK);
    canvas.drawBitmap(image,0 , 0,null);

}
   .
   .
   . 
```

I've also overridden onMeaure() and others, but my custom view size is not the issue here.

The problem is the Bitmap image that I use as a button or as a surface that you click on. I can't scale it so that you can see the whole image on screen.

Is there a way to deal with this?

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:39:32.770

您可以通过将按钮的背景设置为 9patch 图像文件来创建自定义按钮。您还可以使用选择器，并为按钮的不同状态提供不同的 9patch 图像文件。这比覆盖 onDraw() 要简单得多。

# iphone - iPhone 上的 ReachabilityRef 出现重复符号错误

> ID：11105342
> 
> 赞同：0
> 
> 时间：2012-06-19T16:31:19.687
> 
> 标签：iphone, duplicates, sharekit

我在我的 iPhone 应用程序中使用 ShareKit 和 BCFads sdk。构建应用程序时，出现重复符号错误。

```
ld: duplicate symbol _OBJC_IVAR_$_Reachability.reachabilityRef in /BCFAds/BCFAds.a(Reachability.o) and /Debug-iphonesimulator/libShareKit.a(Reachability.o) for architecture i386
collect2: ld returned 1 exit status
Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-g++-4.2 failed with exit code 1 
```

这个问题来自ReachabilityRef。它在 sharekit 的 Reachability.m 中定义。

```
@interface Reachability: NSObject
{
 BOOL localWiFiRef;
 SCNetworkReachabilityRef reachabilityRef;
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:48:10.223

如果您有 2 个可达性，请签入您的项目。{h/m} 希望这对您有所帮助。

# python - 比较python中不同键的两个字典

> ID：11105343
> 
> 赞同：-3
> 
> 时间：2012-06-19T16:31:24.430
> 
> 标签：python

如何比较两个不同键的字典，例如下面的字典？

```
dictionary={"name":"abc","age":23,"male":True}
new_dictionary={"my_name":"abc","my_age":23,"male":1} 
```

当比较示例中的两个字典时，比较应该返回`true`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:37:23.053

```
>>> dictionary={"name":"abc","age":23,"male":True}
>>> new_dictionary={"my_name":"abc","my_age":23,"male":1}
>>> key_map = {"name": "my_name", "age": "my_age"}
>>> all(new_dictionary[key_map.get(k, k)] == v for k, v in dictionary.items())
True 
```

或者，如果您只是对确保值相同而不进行任何密钥检查感兴趣：

```
>>> set(dictionary.values()) == set(new_dictionary.values())
True 
```

**编辑：**正如 Tadeck 在评论中指出的那样，在`sorted()`这里使用比`set()`.

（是的，即使一本字典有`1`而另一本有，这也有效`True`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:38:47.437

您需要定义比较发生的确切方式。如果您只想比较这些值，无论它们分配给什么键，都可以使用：

## 按值比较（忽略键）

根据您的更新要求，其中一种解决方案是：

```
>>> def compare(dict1, dict2):
    return sorted(dict1.values()) == sorted(dict2.values())

>>> compare({"name":"abc","age":23,"male":True},
    {"my_name":"abc","my_age":23,"male":1})
True
>>> compare({"name":"abc","age":23,"male":True},
    {"my_name":"abc","my_age":24,"male":1})
False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:39:32.210

```
dictionary={"name":"abc","age":23,"male":True}
new_dictionary={"my_name":"abc","my_age":23,"male":1}    
dict_alias = {"name":"my_name","age":"my_age","male":"male"}

def compare(dictionary,new_dictionary,dict_alias):
    same = True
    for key in dictionary.keys():
        if dictionary[key] == new_dictionary[dict_alias[key]]:
            continue
        else:
            same = False
            break
    return same 
```

# android - Fragments/FragmentsActivity之间的过渡

> ID：11105353
> 
> 赞同：0
> 
> 时间：2012-06-19T16:31:52.243
> 
> 标签：android, android-fragments, android-viewpager

所以我的应用程序在启动 FragmentActivity 时启动`TestFActivity`。该 FragmentActivity 包含一个 viewpager，其中包括 3 个 Fragments `WelcomeFragment`、`ListFragment`和`TagFragment`。现在，我希望当我单击 ListFragments 中的一个项目时，它会打开一个新的 FragmentActivity `DetailsView`，其中将包含一个 viewpager（其中包括来自的所有项目`ListFragment`并允许在它们之间滑动）。

我不知道如何做到这一点，如果这是片段的好逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:35:58.293

从 a 中启动一个 Activity 与`Fragment`从另一个启动一个 Activity 没有什么不同`Activity`，只需`Intent`使用新的 Activity 类名构造一个并调用`startActivity()`。就像是：

```
//Fragments aren't a context, so used getActivity() instead
Intent intent = new Intent(getActivity(), DetailsView.class);
startActivity(intent); 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:40:42.020

这是一个关于如何使用[ViewPager的教程](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# delphi - How to use the XPObserver unit contained in dunit's DUnitWizard, to implement an observer pattern, or even a MVC pattern?

> ID：11105361
> 
> 赞同：6
> 
> 时间：2012-06-19T16:32:15.310
> 
> 标签：delphi, model-view-controller, oop, observer-pattern, dunit

There are good examples of Observer pattern in Delphi, thanks to the wise questions & answers on Stackoverflow, such as [Best way to implement observer pattern in Delphi](https://stackoverflow.com/questions/4041106) and [Are there any Videos/Screen casts or other resources on how to use Interfaces in Delphi?](https://stackoverflow.com/questions/435623). From those stackoverflow questions, the following links of instructive materials are extracted:

1.  [Joanna Carter's blog](http://blogs.teamb.com/joannacarter/2004/06/30/690)

2.  [SourceMaking site](http://sourcemaking.com/design_patterns/observer/delphi)

3.  [TDelphiHobbyist's blog](http://tdelphihobbyist.blogspot.se/2009/10/observer-design-pattern-in-delphi-push.html)

4.  [itte.no site](http://itte.no/delphi/ObservedDemo.htm)

5.  [dunit's DUnitWizard](http://dunit.svn.sourceforge.net/viewvc/dunit/trunk/contrib/DUnitWizard/Source/Common/XPObserver.pas?view=markup)

In that second stackoverflow question, mghie described `dunit's DUnitWizard's XPObserver.pas` as very interesting and other `XP*.pas` as worthing a closer look. However, the `XPObserver` unit is referenced only in two places, in `dunit\Contrib\DUnitWizard\Source\Common\dunit\XPObserverTests.pas` where the only interest of the test seems to be checking of reference counting, and `dunit\Contrib\DUnitWizard\Source\DelphiExperts\DUnitProject\XPTestedUnitUtils.pas` where only the IXPFamily type declared in the XPObserver unit is used.

I therefore wonders what is the best practice of using this `XPObserver` unit.

For example: Design questions, such as:

(1) How to use the `XPObserver` unit to implement an observer pattern that do something?

(2) How to use `XPObserver` to implement a MVC pattern?

Or coding questions like:

(3) `XPObserver`'s `TXPSubjects` is claimed to provide the capability of enabling `single observer<->multiple subject` relation. However, `FSubjects` is declared private. There is also no getters. I wonder is this by design? (For example, the author has written `// ...***DON'T*** refactor this method!!` in `TXPSubject.DeleteObserver`. I am thus not confident to modify the code because I cannot understand this and maybe other parts completely.) If so, what is the supposed way to use TXPSubjects to enable `single observer<->multiple subject` relation?

Thank you very much for your time and comments!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:31:18.823

让我给你一个例子，如何使用 XPObserver 单元。首先模拟一个数据模型的几个接口：

```
type
  IColorChannel = interface(IXPSubject)
    function GetValue: byte;
    procedure RandomChange;
  end;

  IColorChannelObserver = interface(IXPObserver)
    ['{E1586F8F-32FB-4F77-ACCE-502AFDAF0EC0}']
    procedure Changed(const AChannel: IColorChannel);
  end;

  IColor = interface(IXPSubject)
    function GetValue: TColor;
  end;

  IColorObserver = interface(IXPObserver)
    ['{0E5D2FEC-5585-447B-B242-B9B57FC782F2}']
    procedure Changed(const AColor: IColor);
  end; 
```

`IColorChannel`只是包装一个`byte`值，它具有返回值并随机更改它的方法。`IColorChannelObserver`向它注册自己的接口的实现者也可以观察到它。

`IColor`只是包装一个`TColor`值，它只有一个返回值的方法。`IColorObserver`向它注册自己的接口的实现者也可以观察到它。

一个类实现`IColorChannel`，没什么难的：

```
type
  TColorChannel = class(TXPSubject, IColorChannel)
    function GetValue: byte;
    procedure RandomChange;
  private
    fValue: byte;
  end;

function TColorChannel.GetValue: byte;
begin
  Result := fValue;
end;

procedure TColorChannel.RandomChange;
var
  Value, Idx: integer;
  Icco: IColorChannelObserver;
begin
  Value := Random(256);
  if fValue <> Value then begin
    fValue := Value;
    for Idx := 0 to ObserverCount - 1 do begin
      // Or use the Supports() function instead of QueryInterface()
      if GetObserver(Idx).QueryInterface(IColorChannelObserver, Icco) = S_OK then
        Icco.Changed(Self);
    end;
  end;
end; 
```

现在是一个实现`IColor`RGB 的类，它将包含并观察三个实例`TColorChannel`- 即单个观察者多主体关系：

```
type
  TRGBColor = class(TXPSubject, IColor, IColorChannelObserver)
    function GetValue: TColor;
  private
    fRed: IColorChannel;
    fGreen: IColorChannel;
    fBlue: IColorChannel;
    fValue: TColor;
    function InternalUpdate: boolean;
  public
    constructor Create(ARed, AGreen, ABlue: IColorChannel);

    procedure Changed(const AChannel: IColorChannel);
  end;

constructor TRGBColor.Create(ARed, AGreen, ABlue: IColorChannel);
begin
  Assert(ARed <> nil);
  Assert(AGreen <> nil);
  Assert(ABlue <> nil);
  inherited Create;
  fRed := ARed;
  fRed.AddObserver(Self, fRed);
  fGreen := AGreen;
  fGreen.AddObserver(Self, fGreen);
  fBlue := ABlue;
  fBlue.AddObserver(Self, fBlue);
  InternalUpdate;
end;

procedure TRGBColor.Changed(const AChannel: IColorChannel);
var
  Idx: integer;
  Ico: IColorObserver;
begin
  if InternalUpdate then
    for Idx := 0 to ObserverCount - 1 do begin
      if GetObserver(Idx).QueryInterface(IColorObserver, Ico) = S_OK then
        Ico.Changed(Self);
    end;
end;

function TRGBColor.GetValue: TColor;
begin
  Result := fValue;
end;

function TRGBColor.InternalUpdate: boolean;
var
  Value: TColor;
begin
  Result := False;
  Value := RGB(fRed.GetValue, fGreen.GetValue, fBlue.GetValue);
  if fValue <> Value then begin
    fValue := Value;
    Result := True;
  end;
end; 
```

如果三个通道值中的任何一个发生更改，颜色将应用更改并依次通知所有观察者。

现在使用这些类的数据模块：

```
type
  TDataModule1 = class(TDataModule)
    procedure DataModuleCreate(Sender: TObject);
  private
    fRed: IColorChannel;
    fGreen: IColorChannel;
    fBlue: IColorChannel;
    fColor: IColor;
  public
    property BlueChannel: IColorChannel read fBlue;
    property GreenChannel: IColorChannel read fGreen;
    property RedChannel: IColorChannel read fRed;
    property Color: IColor read fColor;
  end;

procedure TDataModule1.DataModuleCreate(Sender: TObject);
begin
  Randomize;

  fRed := TColorChannel.Create;
  fGreen := TColorChannel.Create;
  fBlue := TColorChannel.Create;

  fColor := TRGBColor.Create(fRed, fGreen, fBlue);
end; 
```

最后是一个使用该数据模块并且只知道接口而不知道实现类的表单：

```
type
  TForm1 = class(TForm, IXPObserver, IColorChannelObserver, IColorObserver)
    Button1: TButton;
    Button2: TButton;
    Button3: TButton;
    StatusBar1: TStatusBar;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure ButtonClick(Sender: TObject);
  public
    procedure Changed(const AChannel: IColorChannel); overload;
    procedure Changed(const AColor: IColor); overload;
    procedure ReleaseSubject(const Subject: IXPSubject;
      const Context: pointer);
  private
    fChannels: array[0..2] of IColorChannel;
    fColor: IColor;
  end;

procedure TForm1.FormCreate(Sender: TObject);
var
  Idx: integer;
begin
  Button1.Caption := 'red';
  Button1.Tag := 0;
  fChannels[0] := DataModule1.RedChannel;

  Button2.Caption := 'green';
  Button2.Tag := 1;
  fChannels[1] := DataModule1.GreenChannel;

  Button3.Caption := 'blue';
  Button3.Tag := 2;
  fChannels[2] := DataModule1.BlueChannel;

  for Idx := 0 to 2 do
    fChannels[Idx].AddObserver(Self, fChannels[Idx]);

  fColor := DataModule1.Color;
  fColor.AddObserver(Self, fColor);
end;

procedure TForm1.FormDestroy(Sender: TObject);
var
  Idx: integer;
begin
  for Idx := Low(fChannels) to High(fChannels) do
    fChannels[Idx].DeleteObserver(Self);
  fColor.DeleteObserver(Self);
end;

procedure TForm1.ButtonClick(Sender: TObject);
var
  Button: TButton;
begin
  Button := Sender as TButton;
  if (Button.Tag >= Low(fChannels)) and (Button.Tag <= High(fChannels)) then
    fChannels[Button.Tag].RandomChange;
end;

procedure TForm1.Changed(const AChannel: IColorChannel);
var
  Idx: integer;
begin
  Assert(AChannel <> nil);
  for Idx := Low(fChannels) to High(fChannels) do
    if fChannels[Idx] = AChannel then begin
      while StatusBar1.Panels.Count <= Idx do
        StatusBar1.Panels.Add;
      StatusBar1.Panels[Idx].Text := IntToStr(AChannel.GetValue);
      break;
    end;
end;

procedure TForm1.Changed(const AColor: IColor);
begin
  Assert(AColor <> nil);
  Color := AColor.GetValue;
end;

procedure TForm1.ReleaseSubject(const Subject: IXPSubject;
  const Context: pointer);
var
  Idx: integer;
begin
  // necessary if the objects implementing IXPSubject are not reference-counted
  for Idx := Low(fChannels) to High(fChannels) do begin
    if Subject = fChannels[Idx] then
      fChannels[Idx] := nil;
  end;
  if Subject = fColor then
    fColor := nil;
end; 
```

表单实现了接口，但没有引用计数。它注册自己以观察数据模块的四个属性中的每一个，每当颜色通道更改时，它会在状态栏窗格中显示值，当颜色更改时，它会更新自己的背景颜色。有按钮可以随机更改颜色通道。

数据模块属性和其他更改数据的方法都可以有更多的观察者。

使用 FastMM4 在 Delphi 5 和 Delphi 2009 中测试，没有内存泄漏。当表单中没有匹配的`DeleteObserver()`每个调用时，就会出现泄漏`AddObserver()`。

# visual-studio-2010 - VB 2010 Excel 自动化

> ID：11105367
> 
> 赞同：1
> 
> 时间：2012-06-19T16:32:39.743
> 
> 标签：visual-studio-2010, excel, vba, datagridview, selectionchanged

我正在尝试从 datagridview 元素中的选定行自动填充主 excel 文件。我已经将数据库连接到数据网格，并且我正在尝试根据数据网格的选定行填充 excel 电子表格中的某些字段。

```
 Dim objExcel As New Excel.Application
    objExcel.Workbooks.Add("path of master workbook")
    '
    objExcel.Visible = True

    'Select and modify cells 

    'Site(Name)

    objExcel.Range("B2").Select()
    objExcel.ActiveCell.FormulaR1C1() = 'Where I want to specify the value 
```

根据我所做的研究，我需要使用我的数据网格的 selectionchanged 事件来识别选定的行，然后根据列索引填充电子表格，然后使用循环填充剩余的字段。我还想通过循环遍历数据网格视图中的选定行来添加创建多个工作表的能力。

我查看了许多不同的代码示例，用于将整个数据网格导出到 Excel，但我一生都无法弄清楚如何仅获取所选行的值，然后根据列进一步获取单个单元格的值.

有人可以指出我正确的方向，还是让我知道我完全不在基地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:57:40.327

要设置单元格的值，您可以使用

```
objExcel.Range("B2").Value = "whatever" 
```

无需选择单元格来设置其值。由于您将循环遍历行/列并插入值，您可能会发现使用不同的方法来寻址特定单元格会更方便：

```
objExcel.Cells(2,2).Value = "whatever"  'row,column 
```

我不确定您是否需要在 datagridview 上捕获事件（除非您在选择行时自动写入行）：我猜您有一个按钮或其他东西来触发导出，所以您只需要 dso是看dgv的`SelectedRows`

[http://msdn.microsoft.com/en-us/library/x8x9zk5a.aspx#Y0](http://msdn.microsoft.com/en-us/library/x8x9zk5a.aspx#Y0)

# class - creating object using new Operator in java

> ID：11105368
> 
> 赞同：0
> 
> 时间：2012-06-19T16:32:47.640
> 
> 标签：class, object, set, hashset

Here

> set s = new HashSet();

Here what does the new operator does exactly. Is that creates the object for the class **`Set`** or for the object for the constructors class **`HashSet`**. why we want to write these types of codes. and is that any alternative option to create a object for a class without using new keyword.

Please explain me clearly i am new to java programming...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:35:29.370

“new”创建类“HashSet”的新“实例”。

“创建”的一部分是调用类的构造函数。

在 Java 中（与其他语言不同，例如 C++ 或 Javascript），“new”是创建新对象的唯一方法。

这里有更多信息：

*   [http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)

# python - 如何使用 numpy 将矩阵拆分为 4 个块？

> ID：11105375
> 
> 赞同：15
> 
> 时间：2012-06-19T16:33:15.780
> 
> 标签：python, matrix, numpy, split, strassen

我正在使用 python 实现 Strassen 的矩阵乘法。在划分步骤中，我们将较大的矩阵划分为较小的子矩阵。是否有内置的 numpy 函数来拆分矩阵？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-08-19T05:58:34.067

根据[这个答案](https://stackoverflow.com/questions/16856788/slice-2d-array-into-smaller-2d-arrays)，您可以使用`swapaxes`：

您可以创建一个辅助方法：

```
def split(array, nrows, ncols):
    """Split a matrix into sub-matrices."""

    r, h = array.shape
    return (array.reshape(h//nrows, nrows, -1, ncols)
                 .swapaxes(1, 2)
                 .reshape(-1, nrows, ncols)) 
```

这是一个使用它的例子

```
import numpy as np

array = np.array([
    [1, 1, 2, 2],
    [3, 3, 4, 4],
    [5, 5, 6, 6],
    [7, 7, 8, 8]])

A, B, C, D =  split(array, 2, 2)
# A = 
# [[1 1]
#  [3 3]]

# B = 
# [[2 2]
#  [4 4]]

# C = 
# [[5 5]
#  [7 7]]

# D =
# [[6 6]
#  [8 8]]
print('A = \n{}\n\n'
      'B = \n{}\n\n'
      'C = \n{}\n\n'
      'D =\n{}'.format(A, B, C, D)) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-19T16:46:57.557

不完全是，但是使用数组切片表示法，您应该可以很容易地自己完成。

```
>>> A = np.linspace(0,24,25).reshape([5,5,])
>>> A
array([[  0.,   1.,   2.,   3.,   4.],
       [  5.,   6.,   7.,   8.,   9.],
       [ 10.,  11.,  12.,  13.,  14.],
       [ 15.,  16.,  17.,  18.,  19.],
       [ 20.,  21.,  22.,  23.,  24.]]) 
```

使 B 成为 A 中的左上角 2x2：

```
>>> B = A[0:2,0:2] 
```

请注意，B 是一个视图，它与 A 共享数据

```
>>> B[1,1] = 60
>>> print A
[[  0\.   1\.   2\.   3\.   4.]
 [  5\.  60\.   7\.   8\.   9.]
 [ 10\.  11\.  12\.  13\.  14.]
 [ 15\.  16\.  17\.  18\.  19.]
 [ 20\.  21\.  22\.  23\.  24.]] 
```

如果需要从 A 复制数据，使用 copy 方法：

```
>>> B = A[0:2,0:2].copy()
>>> B
array([[  0.,   1.],
       [  5.,  60.]])
>>> B[1,1] = 600
>>> B
array([[   0.,    1.],
       [   5.,  600.]])
>>> A
array([[  0.,   1.,   2.,   3.,   4.],
       [  5.,  60.,   7.,   8.,   9.],
       [ 10.,  11.,  12.,  13.,  14.],
       [ 15.,  16.,  17.,  18.,  19.],
       [ 20.,  21.,  22.,  23.,  24.]]) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-11T19:31:04.317

我遇到了同样的问题，发现了一些内置的 numpy 函数将我的矩阵拆分为 4 个子矩阵（我的矩阵大小为 2^N*2^N）

这是我写的代码：

```
upper_half = np.hsplit(np.vsplit(my_matrix, 2)[0], 2)
lower_half = np.hsplit(np.vsplit(my_matrix, 2)[1], 2)

upper_left = upper_half[0]
upper_right = upper_half[1]
lower_left = lower_half[0]
lower_right = lower_half[1] 
```

使用 numpy 重新组合它们的奖励：

```
C=np.vstack([np.hstack([c11, c12]), np.hstack([c21, c22])]) 
```

vsplit hsplit hstack 和 vstack 似乎是为此目的而制作的

# php - UTF8 mailto 中的特殊字符：subject= link 和 Outlook

> ID：11105376
> 
> 赞同：15
> 
> 时间：2012-06-19T16:33:18.357
> 
> 标签：php, email, encoding, utf-8, outlook

我正处于重新编码一个正式使用 iso-8859-1 字符编码的网站的最后阶段，但现在整个是 UTF-8。

问题是 mailto href 链接的主题部分在使用特殊字符时无法与 Outlook 一起使用。我得到了通常的乱码字符表示，表明当单击链接并且在 Outlook 中弹出新的邮件窗口时存在明显的字符编码问题。

我试过 rawurlencode() 来解决这个问题，但这似乎不适用于 Outlook ......

```
<a href="mailto:blah@blah.com?subject=<?=rawurlencode($subj);?>">send email</a> 
```

于是想，outlook一定要坚持不同的编码，先尝试utf-8解码主题字符串……

```
<a href="mailto:blah@blah.com?subject=<?=rawurlencode(utf8_decode($subj));?>">send email</a> 
```

答对了！工作伟大的前景。但现在其他一切都失败了:(

我找不到适用于所有邮件客户端的解决方案。

当整个页面以 iso-8859-1 显示时，它在所有邮件客户端上运行良好。但当页面内容为 utf-8 时不会。

不幸的是，客户希望保留这个直接的电子邮件链接，尽管它下面有一个正常工作的邮件表单！

有一个快乐的解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T14:26:32.373

如果你使用 utf-8 试试这个：

```
<?php $subject = "=?UTF-8?B?" . base64_encode($subject) . "?="; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T19:12:53.800

主题行有时出现乱码的原因是，当您指定编码时，它不适用于电子邮件标题。您的主题行位于电子邮件标题中。这是一个在主题行上应用 UTF8 编码的函数：

```
function EncodeSubject($_subject)
{
    $encodedSubject = str_replace("&quot;", '"', $_subject);
    $encodedSubject = preg_replace('/[^x09\x20-\x3C\x3E-\x7E]/e', 'sprintf("=%02X", ord("$0"));', $encodedSubject);
    $encodedSubject = str_replace(' ', '_', $encodedSubject);
    return ="?utf-8?q" . $encodedSubject . "?=";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T05:36:41.867

您需要检查以下内容

1) HTML 代码

```
<meta contentType="text/html; charset=UTF-8"/> 
```

2) IE 视图的浏览器设置 --> 编码 --> Unicode (UTF-8)

3) 内容类型/MIME 类型应为“ **application/x-www-form-urlencoded** ”

# perl - 两个或更多 PathParts 链接（催化剂）

> ID：11105383
> 
> 赞同：7
> 
> 时间：2012-06-19T16:33:50.837
> 
> 标签：perl, catalyst, chained

我怎样才能在一个动作中同时拥有多个路径部分？我尝试使用 Regex 和 LocalRegex，但它确实不起作用。

这是我想要的结果：

```
/typeone/*/*/something
/typetwo/*/*/something 
```

我想通过仅使用一个捕获两个参数的基本操作来实现这一点，并且可以具有“typeone”或“typetwo”路径部分。

“某物”只是链接到该基础的另一个动作。我不想有两个具有两个不同路径部分的基地，这需要我有两个链接到每个基地的东西，对吧？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T00:42:58.707

Catalyst 社区的普遍看法似乎是，链接总是比正则表达式匹配更好，这些天——在某种程度上，一些正则表达式的东西可能会在版本 6 中移出核心。

这里的例子有帮助吗？[http://wiki.catalystframework.org/wiki/gettingstarted/howtos/chainedexamples.view](http://wiki.catalystframework.org/wiki/gettingstarted/howtos/chainedexamples.view)
这个`account/org/*/edit`似乎涉及匹配3个单独的PathParts ...

每个相关的潜艇——在你的情况下由 typeone 和 typetwo 触发的那些——都将运行。或者这不是你所追求的？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T15:05:34.837

据我所知，没有办法设置一个以上的 PathPart，或者有一个启用正则表达式的 PathPart。

# java - 如何使用 java 将 .gif 图像转换为 .avi 视频？

> ID：11105385
> 
> 赞同：2
> 
> 时间：2012-06-19T16:33:54.253
> 
> 标签：java, video

给定我从 mySQL 检索到的一堆图像`.gif`，我需要将它们全部转换为`.avi`视频。所以我有`img1.gif,img2.gif....,imgn.gif`，按照需要为视频制作动画的顺序。我应该使用什么 API/库来完成这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:39:44.113

在 stackoverflow 上查看上一个问题并给出一个很好的答案：[Java：如何从图像数组创建电影？](https://stackoverflow.com/questions/8856757/java-how-do-i-create-a-movie-from-an-array-of-images)在这里： Java：从在主题的快速谷歌上找到的[帧制作动画/视频](https://stackoverflow.com/questions/2286474/java-make-an-animation-video-from-frames)

# parsing - 如何在 Vim 中找到 Django 模板标签并用块标签替换它们？

> ID：11105388
> 
> 赞同：1
> 
> 时间：2012-06-19T16:34:01.603
> 
> 标签：parsing, vim, django-templates, replace

我需要更改几个如下所示的 Django 模板实例：

```
{% block content %}{{ mycontents }}{% endblock content %} 
```

对此：

```
{% templatetag openblock %} block content {% templatetag closeblock %}{% templatetag openvariable %} mycontents {% templatetag closevariable %}{% templatetag openblock %} endblock content {% templatetag closeblock %} 
```

我怎样才能构造一个查找和替换命令来做到这一点？我通常将 Vim 用于这种事情，但我对其他替代方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:01:30.983

可以使用以下两个替换命令分别转换块和变量内容：

```
:%s/{%\(.\{-}\)%}/{% openblock %}\1{% closeblock %}/g
:%s/{{\(.\{-}\)}}/{% openvariable %}\1{% closevariable %}/g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:46:47.413

我个人会用宏来做。这只有在“mycontents”都在一行时才有效

保存宏：

`:let @q='/{% block wcwtemplatetagw"aciwopenblockf}a block a {% templatetag closeblock %}{% templatetag openvariable %}l2dlf}C{% templatetag closevariable %}{% templatetag openblock %} endblock a {% templatetag closeblock %}'`

并`@q`使用

编辑 ooookkkk 我应该猜到从 vim 粘贴特殊字符是行不通的

# c# - 在 IIS Express 中启动 MVC 3 应用程序时输入字符串的格式不正确

> ID：11105391
> 
> 赞同：0
> 
> 时间：2012-06-19T16:34:15.403
> 
> 标签：c#, asp.net-mvc-3, iis-express

我目前正在一个 MVC3 站点上工作，在 IIS Express 和 VS2010 本地。该应用程序运行良好，直到 IIS Express 挂起，我不得不终止该进程。

从那时起，当我使用 IIS Express 在 VS2010 中运行该站点时，我得到了这个 YSoD：

```
Input string was not in a correct format. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.FormatException: Input string was not in a correct format.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[FormatException: Input string was not in a correct format.]
   System.VersionResult.SetFailure(ParseFailureKind failure, String argument) +9566207
   System.Version.TryParseComponent(String component, String componentName, VersionResult& result, Int32& parsedComponent) +9549261
   System.Version.TryParseVersion(String version, VersionResult& result) +135
   System.Version.Parse(String input) +68
   System.Version..ctor(String version) +23
   System.Web.Compilation.CompilationUtil.GetVersionFromVString(String version) +76
   System.Web.Compilation.CompilationUtil.CreateCodeDomProviderWithPropertyOptions(Type codeDomProviderType) +116
   System.Web.Compilation.CompilationUtil.CreateCodeDomProviderNonPublic(Type codeDomProviderType) +12
   System.Web.Compilation.AssemblyBuilder..ctor(CompilationSection compConfig, ICollection referencedAssemblies, CompilerType compilerType, String outputAssemblyName) +366
   System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders() +700
   System.Web.Compilation.BuildProvidersCompiler.PerformBuild() +40
   System.Web.Compilation.ApplicationBuildProvider.GetGlobalAsaxBuildResult(Boolean isPrecompiledApp) +9118854
   System.Web.Compilation.BuildManager.CompileGlobalAsax() +44
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +265

[HttpException (0x80004005): Input string was not in a correct format.]
   System.Web.Compilation.BuildManager.ReportTopLevelCompilationException() +62
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +421
   System.Web.Compilation.BuildManager.CallAppInitializeMethod() +31
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +691

[HttpException (0x80004005): Input string was not in a correct format.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256 
```

堆栈跟踪似乎没有指向代码问题。IIS Express 完全有可能是一个红鲱鱼，我实际上在某个地方搞砸了我的代码......但我希望堆栈跟踪/调试器能够捕捉到这一点。

有谁知道我该如何追踪这个？

提前致谢 ：）

**编辑**

我刚刚在VS开发服务器上试了一下，报同样的错误，估计不是IIS Express吧！

**编辑 2**

项目版本（在 AssemblyInfo.cs 中）如下所示：

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("One_Page_Booking_Engine")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("One_Page_Booking_Engine")]
[assembly: AssemblyCopyright("Copyright ©  2012")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("287108fb-4a0c-419f-8b35-a3bc0e2f8617")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Revision and Build Numbers 
// by using the '*' as shown below:
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

**编辑3：**

我现在尝试删除 and 的内容`bin`，`obj`重新启动 VS 并重新启动我的 PC。什么都没有：（我也尝试将站点发布到带有 IIS 的服务器并运行它：我得到完全相同的 YSoD！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:59:38.000

排序！

问题出在我的 web.config 中。我从 HTML5BoilerPlate 中提取了模板，最后得到了这个块：

```
<compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v2.0"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v2.0"/>
        <providerOption name="OptionInfer" value="true"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers> 
```

这很好，除了当我部署它时，我将`value`from更改`v2.0`为`v4.0`. 尽管最初工作，大概是用缓存或其他东西，这就是导致它咳出毛球的原因。

我已经删除了整个`compilers`块，现在它工作正常！

谢谢大家的评论，大家:)

# magento - 可配置产品 - 关联产品未保存

> ID：11105396
> 
> 赞同：1
> 
> 时间：2012-06-19T16:34:27.220
> 
> 标签：magento, magento-1.4

在线 1.4.0.1 商店已启动并运行良好 2 年。几个月内没有对网站进行任何更改。一切都一直很好。

昨天，我们添加了新的属性、属性集和简单产品。当我们创建一个新的可配置产品（我们一直都有）时，关联产品看起来很好，但是一旦我们全选并单击保存并继续编辑按钮，它会显示“产品已成功保存”但关联产品不存在。如果我们单击重置过滤器按钮 Assoc。产品重新出现，但全选并重试失败。

此外，如果我们单击 Create Empty、Quick Create 或 Copy from Configurable 按钮，则不会发生任何事情。

任何解决方案、帮助或方向将不胜感激。我们陷入困境，无法继续开发新产品。如果您需要更多信息或屏幕截图，请告诉我们。

如果可以的话请帮忙。

# sql - SQL 中“CharIndex”的替代方案

> ID：11105400
> 
> 赞同：1
> 
> 时间：2012-06-19T16:34:50.260
> 
> 标签：sql

我有一个 sql 表，其中“代码”列之一由“|”分隔的多个字符值组成。

（例如：|0000000171|0000001192|0000003498|0000003569|）。

现在在查询中检查单个值是否存在于列“代码”中，如果我使用，则成功返回一行：-

```
charindex('0000000171', Codes) > 0 
```

**问题**：- 如果我想搜索多个值（如果它们中的任何一个存在于“代码”列中），那么 SQL 中的正确查询可能是什么。

例如。如果需要在“代码”列中搜索三个值 0000000171、0000000172、0000000173 的存在，则以下语法返回 Nothing：-

```
charindex('0000000171,0000000172,0000000173', Codes) > 0 
```

请指教 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:51:16.887

如果您需要使用分隔列表，那么您的 charindex 应该在每个代码上包含分隔符，如下所示：

```
charindex('|'+'0000000171'+'|', Codes) > 0 
```

或者

```
charindex('|0000000171|', Codes) > 0 
```

设计“代码”字段的人似乎考虑到了这一点，因为它以分隔符开头和结尾。

但是，正确的解决方案是将代码存储在单独的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:38:42.343

关于什么：

```
(charindex('0000000171', Codes) > 0
or
charindex('0000000172', Codes) > 0
or
charindex('0000000173', Codes) > 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:39:22.987

可以使用`charindex`三遍

```
charindex('0000000171', Codes) > 0 or
charindex('0000000172', Codes) > 0 or
charindex('0000000173', Codes) > 0 
```

# java - Java：重命名时的 DefaultMutableTreeNode 事件

> ID：11105401
> 
> 赞同：0
> 
> 时间：2012-06-19T16:34:52.913
> 
> 标签：java, swing, rename, jtree, treenode

我创建了一个扩展 DefaultMutableTreeNode 的类。它有一个 Resource 类型的变量“resource”，因此它可以链接到一个对象，而该对象不会影响其名称。Resource 类有一个变量“名称”，当其对应的 DefaultMutableTreeNode 被重命名时，我想更改它，但我找不到任何此类事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:46:38.350

在 DefaultTreeCellEditor 中有这个方法：[http](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeCellEditor.html#addCellEditorListener(javax.swing.event.CellEditorListener) ://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeCellEditor.html#addCellEditorListener(javax.swing.event.CellEditorListener )

# sitecore - 从项目锁定所有者处获取 context.user.profile

> ID：11105403
> 
> 赞同：1
> 
> 时间：2012-06-19T16:35:07.527
> 
> 标签：sitecore, sitecore6

这是我的问题：
这个管道被覆盖以试图显示用户的真实姓名。

```
Sitecore.Pipelines.GetContentEditorWarnings.IsLocked 
```

更改只是使用`Item.getUpdatedBy()`而不是`Item.Locking.GetOwner()`锁定，因为想法是更新该项目的任何人都必须锁定该项目。`getUpdatedBy()`还显示了用户名的旁边`Context.user.profile.fullname`。问题是用户可以在不实际锁定项目的情况下更新项目，因此您会看到锁定字段填充的用户与上次更新的用户不同。

我想做的事：我需要显示项目的锁所有者全名 ( `context.user.profile.fullname`)。如何`context.user.profile`从锁拥有者 ( `Item.Locking.GetOwner()`) 获取信息？

让我知道我是否需要更清楚。谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:34:46.870

该`Item.Locking.GetOwner()`方法只返回持有锁的人的用户名。从用户名中，您需要获取用户，然后是他们的个人资料。可能有几种方法可以解决这个问题……这是一种。

```
string username = theItem.Locking.GetOwner();
Sitecore.Security.Accounts.User user = Sitecore.Security.Accounts.User.FromName(theItem, false);
Sitecore.Security.UserProfile profile = user.Profile;
string fullName = profile.FullName; 
```

# c# - WPF WrapPanel 动态高度

> ID：11105404
> 
> 赞同：4
> 
> 时间：2012-06-19T16:35:16.230
> 
> 标签：c#, wpf, user-controls, wrappanel

我有一个包装面板，其中包含可变数量的控件。

我希望方向是垂直的（因为其中的对象将具有固定的宽度但可变的高度）。

但我遇到的问题是，当存在滚动条时，高度是无限的，因此项目永远不会包裹到第二列。滚动条是必要的，因为经常会有比一个屏幕上容纳的更多的对象。我可以通过设置固定高度来阻止这种情况，但这不是一个可接受的解决方案，因为每个选择的合理固定高度会有所不同。

本质上，我想要一个`WrapPanel`根据面板的宽度和其中包含的项目数量动态变化的高度。

为了显示：

如果面板足够宽以显示 3 列，它将：

| 1 5 9 |

| 2 6 - |

| 3 7 - | 高度=4

| 4 8 - |

但是，如果用户将窗口的大小更改为只能容纳 2 列的程度，则高度会增加：

| 1 6 |

| 2 7 |

| 3 8 | 高度 = 5

| 4 9 |

| 5 - |

另外，我不确定这有多可行，但我理想情况下希望水平排列物品，但保持垂直方向，所以它们会被订购：

| 1 2 3 |

| 4 5 6 |

| 7 8 9 |

谁能告诉我如何开始这个？我假设它可以通过自定义实现来实现`WrapPanel`，但我对如何开始感到有些困惑。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:00:57.277

使用以下代码实现了我所需要的：

```
public class InvertedWrapPanel : WrapPanel
{
    private int itemsPerRow = 0;

    protected override Size MeasureOverride(Size availableSize)
    {
        if (Orientation == Orientation.Horizontal)
        {
            return base.MeasureOverride(availableSize);
        }
        else //Orientation is vertical
        {
            double w = availableSize.Width;

            double maxChildWidth = 0;

            foreach (UIElement child in Children)
            {
                //Get the current childs desired size parameters
                child.Measure(availableSize);

                //Store off the maximum child width
                if (child.DesiredSize.Width > maxChildWidth)
                    maxChildWidth = child.DesiredSize.Width;
            }

            //See how many items we can fit in a row
            itemsPerRow = Convert.ToInt32(Math.Floor(w / maxChildWidth));

            return base.MeasureOverride(availableSize);
        }
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        if (Orientation == Orientation.Horizontal)
        {
            return base.ArrangeOverride(finalSize);
        }
        else //Orientation is vertical
        {
            double currentX = 0;
            double currentY = 0;

            int col = 0;

            double lastX = 0;
            double lastWidth = 0;

            //Arrays to store differing column heights
            double[] lastY = new double[itemsPerRow];
            double[] lastHeight = new double[itemsPerRow];

            double[] colHeights = new double[itemsPerRow];

            foreach (UIElement child in Children)
            {
                //If we've reached the end of a row
                if (col >= itemsPerRow)
                {
                    col = 0;
                    currentX = 0; //reset the x-coordinate for first column
                }
                else
                    currentX = lastX + lastWidth; //Increase the x-coordinate

                //Increase the y-coordinates for the current column
                currentY = lastY[col] + lastHeight[col];

                //Draw the element
                child.Arrange(new Rect(currentX, currentY, child.DesiredSize.Width, child.DesiredSize.Height));

                //Store off the current child's parameters
                lastX = currentX;
                lastWidth = child.DesiredSize.Width;

                lastY[col] = currentY;
                lastHeight[col] = child.DesiredSize.Height;

                colHeights[col] += child.DesiredSize.Height;

                col++;
            }

            //Set the height of the panel to the max column height.
            //Otherwise scroll bar will set height to infinity.
            double maxHeight = 0;

            foreach (double d in colHeights)
            {
                if (d > maxHeight)
                    maxHeight = d;
            }

            base.Height = maxHeight;

            return finalSize;
        }
    } 
```

# excel - vsto 是否有用于 word 和 excel 的包装器（框架）

> ID：11105408
> 
> 赞同：3
> 
> 时间：2012-06-19T16:35:28.467
> 
> 标签：excel, frameworks, ms-word, vsto, wrapper

我正在使用 VSTO 和互操作命名空间有一段时间了。它的大部分部分都很好（足够）。但有时它接缝真的很荒谬。

有些方法返回一个对象，当很明显它们应该返回什么时，该对象必须被强制转换。

### *像这个例子一样添加一个新的工作表：*

`sheet = (Excel.Worksheet)application.ActiveWorkbook.Worksheets.Add(missing, application.ActiveWorkbook.ActiveSheet, 1, missing);`

其他时候，您需要使用缺少的 Type 进行方法调用，因为它没有方法覆盖。（*我知道这只是 C# 中的问题，而不是 VB 中的问题*）

### *就像在这个例子中保护一个 excel 表一样：*

`sheet.Protect(missing, true, true, true, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing);`

我现在的问题是：是否有任何类型的包装器、框架、api ......来避免所有这些小不便？（*或任何提供一些更方便方法的框架*）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:40:16.857

您应该使用[VSTO 电动工具扩展库](http://msdn.microsoft.com/en-us/magazine/dd263100.aspx?pr=blog)。从[MSDN](http://www.microsoft.com/en-us/download/details.aspx?id=7805)下载[VSTO_PTextLibs.exe](http://download.microsoft.com/download/3/5/3/353b1b84-828b-432b-b00f-ad70179aecd6/VSTO_PTExtLibs.exe)。它们提供了使与 Office API 的互操作更简单的[**扩展方法**](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。[](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:39:20.197

@Jake Ginnivan 编写了库[VSTO Contrib](http://vstocontrib.codeplex.com/)，其中包含许多帮助类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:50:12.797

[我的Templater](http://templater.info/)库的第一个版本是 MS Office 和 OpenOffice API 调用的包装器。我也对它的 API 感到厌恶。

有很多报告框架，您可能可以使用无事件的框架。Microsoft 的 OpenXML SDK 可能是最流行的一种。**

# paypal - 使用 Paypal 捐款按钮选择金额

> ID：11105411
> 
> 赞同：5
> 
> 时间：2012-06-19T16:35:34.513
> 
> 标签：paypal

我尝试通过 PayPal 按钮创建捐赠并添加带有金额的自定义选择。我试图添加这样的东西：

```
<label for="amount">Select the amount you wish to donate:</label>
<input type="hidden" name="currency_code" value="EUR" />
<select id="amount" name="amount">
  <option value="25.00">€25.00</option>
  <option value="35.00">€35.00</option>
  <option value="50.00">€50.00</option>
  <option value="75.00">€75.00</option>
  <option value="100.00">€100.00</option>
</select> 
```

但 PayPal 根本没有收到选定的价值。我错过了什么？我应该将哪些自定义变量放入按钮生成器表单中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T17:09:38.893

这段代码对我有用：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

<!-- Identify your business so that you can collect the payments. -->
<input type="hidden" name="business" value="my@email.com">

<!-- Specify a Donate button. -->
<input type="hidden" name="cmd" value="_donations">

<!-- Specify details about the contribution -->
<input type="hidden" name="item_name" value="Donation">
<input type="hidden" name="item_number" value="Donation"> 
<select name="amount"><option value="10.00">€10.00</option><option value="25.00">€25.00</option></select>
<input type="hidden" name="currency_code" value="EUR">

<!-- Display the payment button. -->
<input type="image" name="submit" border="0" src="https://www.paypal.com/en_US/i/btn/btn_donate_LG.gif" alt="PayPal - The safer, easier way to pay online">
</form> 
```

[参考](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_donation_buttons#id08AAF0T10ZS)

# php - 在包含的 PHP 中获取 Wordpress 页面的标题

> ID：11105414
> 
> 赞同：0
> 
> 时间：2012-06-19T16:35:48.000
> 
> 标签：php, wordpress, include, title

（长期读者，第一次作家）

我有一个 wordpress 安装，每个页面都显示一个信息表，根据它所在的页面而不同。我试图使用页面标题作为变量，告诉表格使用此代码显示什么：

```
<?php $post_title = the_title(); ?>
<?php $parent_title = get_the_title($post->post_parent); ?> 
```

...获取页面标题以及父页面的标题。我要显示的表格在页面模板中的 php include 命令中。但是，看起来页面模板中的变量不会延续到包含的 php 页面中。如何将页面标题放入可以在包含的 php 中使用的变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:44:44.610

下面的函数接受 2 个参数、包含的文件和一个参数数组。例如：

```
render('yourfile.php', array('title' => 'Your title')); 
```

**功能：**

```
<?php
function render($file, $params)
{
    extract($params); 
    ob_start(); 
    require($file); 
    return ob_get_clean(); 
}
?> 
```

然后，您将放入`$title`包含的文件中。

# c++ - 将一种类型的对象分配给另一种类型

> ID：11105417
> 
> 赞同：2
> 
> 时间：2012-06-19T16:35:57.517
> 
> 标签：c++, variable-assignment

在下面的代码中有两个类。创建一个类型二的对象，然后将其分配给类一的指针。

在调用 out 函数时，调用第一类的 out 函数。

```
#include<iostream>
using namespace std;

class one
{
    public :
        void  out()
        {
            cout<<"one ";
        }
};

class two
{
    public : 
        void out()
        {
            cout<<"two ";
        }
};

int main()
{ 
    two dp[3];
    one *bp = (one *)dp;
    for (int i=0; i<3;i++)
    (bp++)->out();
} 
```

**输出**

```
one one one 
```

根据我的输出应该是两个而不是一个。当我们创建类型二的对象时，该对象的内存位置包含类外函数的地址，那么为什么在赋值时调用类外函数呢？

**编辑**-此外，即使我们更改了第二类中的函数名称，输出也不会更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:49:50.023

新手假设*所有*C++ 成员函数“属于”一个对象并不罕见。
正如你所注意到的，他们没有。

从概念上讲——精确的过程是编译器实现的细节——你的`out`成员函数被转换成看起来像这样的“自由”函数：

```
void one_out(one* this) { cout << "one"; }
void two_out(two* this) { cout << "two"; } 
```

对于非成员函数，这就是所有需要的。

当编译器看到

```
 (bp++)->out(); 
```

它*知道*bp 是一个指向`one`（它不知道你撒谎）的指针，所以它调用

```
one_out(bp++); 
```

因为这就是编译器所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:50:05.293

您的机器上的输出可能是“一一”，但它可能很容易被炸毁、消失并给您买冰淇淋或发射导弹。您的代码会引发未定义的行为。

```
class one
/*...*/

class two
/*...*/ 
```

请注意，`one`和`two`是完全不相关的类。您不是从 派生`two`的`one`，反之亦然。它们是完全不同的类型。

因为这...

```
two dp[3];
one *bp = (one *)dp;
for (int i=0; i<3;i++)
    (bp++)->out(); 
```

此代码唤起了未定义的行为*。 `bp`不指向类型的对象`one`，它指向类型的对象`two`。鉴于上述代码，您不能以这种方式转换指针。

`one`（* 注意：未定义行为是指当对象实际上是.时尝试调用方法`two`。强制转换本身不会引发未定义行为。）

您正在使用的这种转换语法`(one *)dp`是 C 风格的转换，在这种情况下归结为`reinterpret_cast<one*>(bp);`. 最好在`reinterpret_cast`您真正打算这样做时使用，如果除了编写自文档代码之外没有其他原因。

如果你真的想`one*`从 a 中得到 a `two*`，你有两个选择。

1.  创建一个继承层次结构，这样您就可以在不调用 UB 的情况下进行投射
2.  创建一个转换运算符，以便您可以`one`从 a构造 a，`two`反之亦然。

在您的情况下，由于您正在循环对象数组`one`并尝试`two`通过这些指针执行方法，因此您最好的选择可能是上面的＃1。

```
class one
{
    public :
        virtual void  out()
        {
            cout<<"one ";
        }
};

class two : public one
{
    public : 
        void out()
        {
            cout<<"two ";
        }
}; 
```

现在您的循环将起作用，代码将发出“二二二”，而不是您实际看到的任何随机行为。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-19T16:38:33.207

由于您的`out()`方法未声明`virtual`，它是在对象的静态类型而不是对象的运行时类型上调度的。

此外，这两个类之间没有子类型关系，因此以这种方式分配指针是不正确的。

# c# - 我可以使用 LINQ 将我的报告分组吗？

> ID：11105419
> 
> 赞同：2
> 
> 时间：2012-06-19T16:36:01.647
> 
> 标签：c#, linq, grouping

我有以下报告：

```
var report = _repository.GetAll(
   .OrderBy(item => item.RowKey.Substring(0, 4))
   .Select((t, index) => new Question.Grid()
   {
      RowKey = t.RowKey,
      Row = index + 1,
      ShortTitle = t.ShortTitle
   } 
```

这给了我：

```
RowKey Order  Title

0000  1  Title 1
0001  2  Title 2
0010  3  Title 3
0010  4  Title 4
0100  5  Title 5
0101  6  Title 6
0101  7  Title 7 
```

我需要做的是制作一个两列的报告，它会给我小计

```
a) When digits 1-2 of the row key change
b) When digits 3-4 of the row key change 
```

像这样：

```
Key   Count

00    4
0001  1
0010  3

01    3
0100  1
0101  2 
```

或者如果这更容易：

```
Key   Count

0000  4
0001  1
0010  2

0100  2
0100  1
0101  2 
```

这是我可以用 LINQ 做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:11:47.847

像这样的东西？

```
var groups = _repository.GetAll()
  .GroupBy(x => x.RowKey.Substring(0, 2))
  .Select(x => new 
  { 
    RowKey = x.Key, // + "00"
    Count = x.Count(),
    SubItems = x
      .GroupBy(y => y.RowKey.Substring(0, 4))
      .Select(z => new 
      { 
        RowKey = z.Key, 
        Count = z.Count() 
      })
  });

foreach(var outerGroup in groups)
{
  Console.WriteLine(outerGroup.RowKey + " " + outerGroup.Count);
  foreach(var innerGroup in outerGroup.SubItems)
  {
    Console.WriteLine(innerGroup.RowKey + " " + innerGroup.Count);
  }
} 
```

# ide - 是否有第三方工具可以将 Eclipse 设置转换为 Netbeans？

> ID：11105422
> 
> 赞同：2
> 
> 时间：2012-06-19T15:52:10.563
> 
> 标签：ide, eclipse, netbeans

我通常使用 Eclipse，但我需要使用 Netbeans 一段时间，因为我正在启动一个 JavaFX 项目。

我无法理解必须重新映射每个快捷方式和设置。是否有可以为我导入 Eclipse 设置的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:08:58.543

这可能会有所帮助： [http ://wiki.netbeans.org/EclipseToNetBeans](http://wiki.netbeans.org/EclipseToNetBeans)

# delphi - idHttpServer 上的 OnDisconnect 事件

> ID：11105424
> 
> 赞同：2
> 
> 时间：2012-06-19T16:36:44.590
> 
> 标签：delphi, delphi-2010, indy, indy10

断开连接时是否会触发任何事件`idHttpServer`？

断开连接并不是指客户端断开连接时，而是`idHTTPServer`由于某种原因断开连接时。

我可以更好地解释它：当`idHTTPServer`正在侦听套接字端口时，由于某种未知原因，计算机与网络断开连接（例如，网络变得不可用）组件不再工作（它停止侦听到端口），在这种情况下，我需要重新连接（重新打开端口）。根据`idHttpServer.OnDisconnect`帮助，仅当客户端与服务器断开连接时才会触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:58:43.497

您可以考虑在一段时间内通过自连接创建与服务器的看门狗连接，当您无法连接时，您将重新启动服务器或您需要做的任何事情来纠正问题。

这确实有额外的好处，您实际上是在测试与服务器的连接，因此如果发生任何其他可能导致客户端问题连接的问题，这些将被拾取。

这也可以是一个单独的应用程序，它能够关闭、杀死和重新启动您的服务器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:00:22.600

我有两个建议可以帮助您解决问题。

首先，添加一个计时器，每分钟（或您选择的间隔）一次，“询问”窗口您的端口是否仍在侦听。这必须在 Indy 之外完成，因为 Indy 没有这样做的机制。如果 Windows 告诉您此端口未在侦听，则将其记录到日志中并重新启动服务器。定期检查此日志以查看您的应用是否曾报告您的端口停止侦听。这将告诉您它是否真的断开连接。

其次，您可能需要考虑每晚重新启动服务器套接字。例如，每晚午夜，停止并启动服务器套接字以确保新连接。可能存在一些变量溢出，例如，如果您不断增加一个数字并且它越来越大，那么随着时间的推移，该数字将变得太大而您的应用程序无法容纳它。这可能发生在 5 秒或 5 个月的运行时间之间，具体取决于您增加它的速度。

# c++ - 对临时的引用，它由类型运算符创建

> ID：11105428
> 
> 赞同：0
> 
> 时间：2012-06-19T16:37:11.320
> 
> 标签：c++, temporary, lifetime

假设我们需要一些类来包装 std::string，除了所有其他细节之外，它还使用类型转换运算符自动转换回 std::string：

```
class MyWrappedString {
    std::string m_value;
    /* ... */
public:
    inline operator std::string() const {
        return m_value;
    }
}; 
```

因此，运算符**将返回包装字符串对象的副本**。

但是，为什么下面的代码看起来是正确的？

```
MyWrappedString x;
const std::string& y = x;
// now, y should be a reference to a temporary, right?
std::cout << "y is: " << y << std::endl; 
```

转换运算符将返回 m_value 的临时副本，因此`const std::string& y = x`将创建对该临时副本的引用。

为什么这行得通？我记得有一些引用对象的生命周期延长，但我不确定。

第二个问题：是否有可能有一个类型转换运算符返回一个 const 引用？

例如：

```
inline operator const std::string &() const {
    return m_value;
} 
```

那么，上面的代码不必在临时副本上工作吗？

PS：这个问题有点相关：[Lifetime of temporaries](https://stackoverflow.com/questions/4214153/lifetime-of-temporaries)，但仍然是一个不同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:45:15.780

`const`引用使引用保持活动状态（即使它通常会超出范围），直到 const 引用超出范围

对于第二个问题：是的，您可以返回一个 const 引用，并且必须将函数的返回值分配给一个 const 引用

# iphone - 将 JSON 映射到 Core Data 对象

> ID：11105435
> 
> 赞同：1
> 
> 时间：2012-06-19T16:37:43.193
> 
> 标签：iphone, ios, core-data

我有一个 WS Witch 返回给我一个 JSON 结构。我想用 JSON 创建数据结构（类、对象）并创建代表 JSON 结构的 CoreData 模型。有什么建议吗？帮助 ？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:05:38.047

我之前也有类似的要求，我用[这个博客](http://www.cimgf.com/2011/06/02/saving-json-to-core-data/)作为我的指南。您显然必须创建一个数据模型，其属性映射到传入的 JSON 结构。上面的博客也包含了一些特殊情况，所以如果不是完整的，应该是通过参考。它至少会给你一个很好的提示，你可以下一步去哪里！

# .net - 如何防止大的 EF INSERT 阻止来自不同应用程序的 SELECT？

> ID：11105440
> 
> 赞同：1
> 
> 时间：2012-06-19T16:38:04.787
> 
> 标签：.net, sql-server, entity-framework, ef-code-first

我有一个返回大量数据的过程（提交时需要 50-100k 个实体的顺序）

我正在执行我`Add`之前的所有 s `Commit`（工作单元模式）。我对提交实际需要多长时间并*不太*在意——这个过程运行时间很长（几周），所以这里或那里的一分钟并不是世界末日，而是在提交期间，第二个应用程序使用相同的摘要实体和上下文无法从数据库表中读取并最终超时。

如果我等到提交发生并尝试从应用程序 #2 再次读取，它几乎可以立即工作。

那么，我如何告诉 EF 在提交期间不要锁定表（大概是它在做什么？）？

关键代码在这里：

```
Dim DBTask = TaskRepository.Single(function(x) x.Id = CurrentTaskId)

''Task is a class which stores the results from the process before committing them
For Each Result In Task.Results
    Dim DbResult = TaskResultRepository.CreateInstance
    DbResult.Field1 = Result.Field1
    DbResult.Field2 = Result.Field2

    DbTask.Results.Add(DbResult)
Next
DbTask.JobStatus = Entities.JobStatuses.Completed
QLog.DebugFormat("Committing Task {1}: {0}", Task.Name, Task.Id)
UnitOfWork.Commit()
Tasks.Remove(Task)
QLog.InfoFormat("End Task {1}: {0}", Task.Name, Task.Id) 
```

更糟糕的是，我目前缺乏工具，因为有人放错了 SQL Server 安装磁盘，所以没有 Management Studio/Performance Analyser，只有服务器资源管理器。

作为参考，我的`Repository(Of T As Entitybase).CreateInstance`方法是：

```
Protected ReadOnly Entities As IDbSet(Of T)
Public Function CreateInstance() As T Implements Interfaces.IRepository(Of T).CreateInstance
    Dim Entity = Entities.Create(Of T)()
    With Entity
        .CreatedOn = Now
    End With
    Entities.Add(Entity)
    Return Entity
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:01:05.007

问题是您要在单个 UOW 中导入所有内容，并且该过程需要数周才能完成（？）我真的希望这是一个错字，并且您在数周内都没有打开交易。一分钟太长，一周太荒谬。

你描述的是ETL的概念。提取、转换、加载。您将数据批量加载到数据库中的位置。您为此使用 EF，这意味着您使用的是针对小型工作单元进行了优化的 ORM。它们**并不是**用于 ETL 的工具。

第一个问题是使用 ORM 来执行 ETL。更好的选择是 Rhino.ETL 或 SSIS 来管理数据导入。第二个问题是您在单个事务中导入的数据量。把它分成几块。一次可能有 1K、5K 条记录。这将有助于提高吞吐量并实际上减少导入所有数据所需的时间。

最后要调整的是，您将要手动控制事务锁定。听起来像使用了序列化级别锁定，这是最严格和最慢的。在事务完成之前不会发生其他任何事情。您可能会发现 ReadCommitted 是一个更好的锁定级别，允许在从另一个进程写入数据时进行读取。

但对于 EF 控制另一个操作过程。不，那是不可能的。

# javascript - 使用 jquery 加载和插入 ASP.NET 部分视图

> ID：11105442
> 
> 赞同：3
> 
> 时间：2012-06-19T16:38:17.403
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3, partial-views

我有一个表格行的部分视图。表中的每一行描述一个元素。一个元素可以有子元素，但如果它是一个子元素，它就不能有它自己的子元素。在表中，每个父元素都有一行，以及所有子元素的列表。我正在努力在他们可以单击的子元素旁边添加一个链接，它将不再是一个子元素。所以它需要从列表中删除，并在你刚刚取出它的父元素下的表中添加一行。我有以下 javascript 函数可以正确更新数据库中的元素以不再有父元素并将其从列表中删除。

```
 function removeElementFromParent(id, parentid) {
        if (confirm("Are you sure you want to remove this element from the group?")) {
            $.post('@Url.Content("~/Pack/RemoveElementFromParent")', { "elementid": id });
            $('#' + id).remove();
        }
    } 
```

要创建行并插入它，我尝试这样做：

```
$('@Url.Action("~/Pack/ElementRow", new { elementid = id })').insertAfter('#' + parentid); 
```

但这不起作用，因为您不能在 @Url.Action(...) 中使用 javascript 变量 id。我已经使用它`$('#id').load(@Url.Action(...));`来加载请求的数据。我尝试做类似的事情，但由于我们没有明确的加载位置，因此在这种情况下不会起作用。此外，您仍然无法使用 javascript 变量。

如果有更好的方法可以做到这一点，我们将不胜感激

* * *

**编辑**

这是我的解决方案：

```
$('<tr id="' + id + '"></tr>').insertAfter('#' + parentid);
$('#' + id).load('@Url.Action("ElementRow")' + '?elementid=' + id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:11:13.673

如果您想将 javascript 变量与 Url.Action 一起使用，那么您应该编写类似这样的内容

```
$('@Url.Action("~/Pack/ElementRow")' + "?elementid=" + id).insertAfter('#' + parentid); 
```

希望这能解决你的问题。

# unix - unix - 以另一个用户身份运行命令

> ID：11105444
> 
> 赞同：5
> 
> 时间：2012-06-19T16:38:28.807
> 
> 标签：unix, sudo

我是 Unix 的新手。我正在尝试以另一个用户身份运行 shell 脚本和命令。

例如：我以 user1 身份登录，想以 user2 身份执行脚本。我不想要密码提示，我希望它自动输入。我知道公钥身份验证，但我试图找出是否有类似的东西：

```
sudo -u user2 script.sh 
```

我正在尝试对此进行 cron 操作，所以我不想要密码提示。我希望它在 sudo 命令本身中处理。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:40:55.407

您可以将 NOPASSWD 选项添加到`/etc/sudoers`文件中。但出于安全原因，这可能对您不利。

```
user    user2 = NOPASSWD: /usr/local/bin/script.sh 
```

您拥有的另一个选项：使用`sudo`，但不是直接从某个脚本运行它，而是使用`pexpect`or `expect`，它将为您输入密码。从安全的角度来看，这也可能并不理想，因为您需要将密码保存在脚本中。

你`expect`可以这样做：

```
#!/usr/bin/expect
set password "megapassword"
spawn /bin/sudo -u user1 /usr/local/bin/script.sh
expect "password for user:"
send "$password\r"
expect eof 
```

不要忘记对该文件设置 500 权限。

使用`pexpect`（这是一个 python 模块），它看起来像：

```
import pexpect
password = "megapassword"
p = pexpect.spawn("sudo -u user1 /usr/local/bin/script.sh")
i = p.expect([".ssword:*", pexpect.EOF])
p.sendline(password) 
```

如果您在其中运行该命令`cron`并且可以将该命令添加到 user1 的 crontab 中，您也可以这样做。这可能是最好的解决方案。

```
user1$ crontab -e 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:46:29.943

正如 Igor 所说，添加一个 NOPASSWD 选项`/etc/sudoers`，或者首先将命令安排在*user2*的 crontab 中。

# ruby-on-rails - 为什么我在使用 Ruby Grape 进行 POST 时会收到 HTTP 405

> ID：11105447
> 
> 赞同：2
> 
> 时间：2012-06-19T16:38:39.723
> 
> 标签：ruby-on-rails, grape-api

我的代码非常简单：

```
class App < Grape::API
  resource :pincards do
   post '/' do
   end
  end
end 
```

我会做一个

```
POST /pincards 
```

但我最终得到了不允许的 HTTP 405。请注意，如果我将“帖子”更改为：

```
get '/' do
end 
```

它会工作得很好。所以我知道我的东西是正确的我只是不知道为什么我在 POST 上得到那个 HTTP 405。

我还想知道这个 Grape 示例应用程序是否向您展示了如何进行 POST：

[https://github.com/dblock/grape-on-rack/](https://github.com/dblock/grape-on-rack/)

但我无法遵循它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-13T14:02:04.860

我认为你需要这样：

```
post do
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T04:28:00.173

我建议将 PostMan 扩展安装到 Google Chrome，并为我们提供一些原始 JSON POST 请求的屏幕截图，这些请求对 PostMan 中的 API 进行。我最近问了一个类似的问题，该问题通过正确命名我的 API 来解决；但是，如果不提供一些我的 cURL POSTS 的屏幕截图和一些在 Dev Tools 的 Network 选项卡中失败的 POST 请求的屏幕截图，我永远不会弄明白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T07:21:37.740

它可能无法解决您的问题，但对于其他人来说，我收到此错误是因为我错误地关闭了资源的末尾。

# php - 使用动态 URL 来“激活”额外的 CSS

> ID：11105451
> 
> 赞同：3
> 
> 时间：2012-06-19T16:38:48.947
> 
> 标签：php, dynamic

首先很抱歉，如果这是一个常见问题，但我在 Google 上找不到任何内容，而且似乎没有过多记录。

我目前正在为自己制作一个作品集，展示我的图形设计和东西。我喜欢它的外观，但我确实意识到与其他网站相比它看起来很暗。特别是导航栏中的文字也很小，但我不想更改它。

相反，我希望在页面底部有一个小的 iOS 样式开关，单击该开关会将用户带到相关页面的备用版本，或者只是应用了不同 CSS 的版本。然后我可以将背景设置得更亮，文本更大，等等。简单但乏味的解决方案是使每一页四次，一个具有大字体和浅色背景，一个深色和小背景等，但这并不理想。我想知道我是否可以制作更像：

```
portfolio.co.uk/home?light=on&text=big 
```

据我所知，动态 URL（我相信它们被称为）是 PHP 的东西，但我对 PHP 的经验与没有 PHP 经验的人一样少。我想知道这项任务是否可以在不变得过于复杂的情况下完成，是否有办法甚至创建一个 cookie，这样重复访问者就不必每次都导航到他们喜欢的版本。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:44:45.093

使用查询字符串参数来确定要加载的样式表。

基本上，创建一个始终加载的通用样式表，无论您使用哪个主题。然后，将特定于主题的规则放入单独的样式表中，并使用 PHP`if`语句来确定发送什么标记来加载适当的页面。

```
<head>
    <link href="common.css" rel="stylesheet" type="text/css" />
    <link href="<?php echo $_GET["style"] == "iPhone" ? "iPhone" : "normal" ?>.css" rel="stylesheet" type="text/css" />
   ...
</head> 
```

请注意，我使用 if-check（三元运算符`? :`）而不是直接使用查询字符串中的字符串，因为如果用户更改查询字符串并出错，我希望有一种发送默认值的方法。如果您有多个要使用的主题，您可以设置一个 switch 语句并将适当的文件名存储在您在标签中引用的`link`变量中。

```
$stylesheet = "default";
switch ($_GET["style"]) {
    case "iPhone": $stylesheet = "iPhone";
    case "bigBold": $stylesheet = "bigBold";
}

<link href="<?php echo $stylesheet; ?>.css" rel="stylesheet" type="text/css" /> 
```

# 如何使用：

要将此代码添加到您的 PHP 页面中，请将开关代码放在页面顶部（或者，更好的是，放在它自己的`include`d 文件中。

## *页面顶部*

像这样设置你的页面：

```
<?php 
    $stylesheet = "default";
    switch ($_GET["style"]) {
        case "iPhone": $stylesheet = "iPhone";
        case "bigBold": $stylesheet = "bigBold";
    }
?>
<!DOCTYPE html>
<html>
    <head>
        <link href="common.css" rel="stylesheet" type="text/css" />
        <link href="<?php echo $stylesheet; ?>.css" rel="stylesheet" type="text/css" />
       ...
    </head>
    <body>
        ...
    </body>
<html> 
```

需要将此代码添加到您想要使用替代样式的每个页面，因此更好的选择是将此代码分成一个可以`include`在所有页面上使用的文件。

## *作为包含文件*

创建一个名为的文件`stylesheetSelector.php`并将此代码添加到其中：

```
<?php 
    $stylesheet = "default";
    switch ($_GET["style"]) {
        case "iPhone": $stylesheet = "iPhone";
        case "bigBold": $stylesheet = "bigBold";
    }
?> 
```

然后，在您的 PHP 页面中：

```
<?php include_once('stylesheetSelector.php'); ?>
<!DOCTYPE html>
<html>
    <head>
        <link href="common.css" rel="stylesheet" type="text/css" />
        <link href="<?php echo $stylesheet; ?>.css" rel="stylesheet" type="text/css" />
       ...
    </head>
    <body>
        ...
    </body>
<html> 
```

在所有页面上执行此操作，然后，如果您决定添加其他主题，您只需将信息添加到`stylesheetSelector.php`文件中，它将在每个页面上都可用`include`。

**警告：**这需要在`.php`文件中完成，或者您的 Web 服务器需要使用 PHP 来处理`.html`文件，否则您将看到 PHP 代码以明文形式显示（不会被解释）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:43:59.523

您可以根据查询字符串更改 CSS 样式表 yes ...在 php 中是这样的：

```
if ($_GET['light'] == 'on'){
   echo "<style>something here</style>";
}else {
   echo "<style>something else</style>";
} 
```

`$_GET['light']`获取查询字符串值`light`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T10:32:13.303

响应包含 php 文件。当您使用包含 <'stylesheetSelector.php'> 时，如何将路径包含在 <> 中。由于我们使用保存在服务器上的单独文件，因此该文件可能不在同一目录中？

阅读有关条件 css 的链接，说明最好检查浏览器功能而不是基于浏览器进行选择。原因是您不必像浏览器更新功能那样更新或更改代码。

[http://www.conditional-css.com/](http://www.conditional-css.com/)

# android - 电子邮件客户端在附加图像时表现不同

> ID：11105453
> 
> 赞同：1
> 
> 时间：2012-06-19T16:39:04.330
> 
> 标签：android

我有以下代码，我正在附加 res 文件夹中的图像并发送它，在 Samsung Galaxy S2 中，我有两个电子邮件客户端，默认为 samsung 和 gmail 一个。当我发送电子邮件时，当我从 gmail 发送它时，我收到扩展名为 .png 的正确文件，但是如果我从默认电子邮件客户端发送它，附件中缺少 .png，我必须重命名文件才能看到它。 *意图 emailIntent = new Intent(android.content.Intent.ACTION_SEND);*

 *```
 emailIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, 
```* 

// String rawFolderPath = "android.resource://" + getPackageName() // + "/" + R.raw.test;

```
 Uri emailUri = Uri.parse(rawFolderPath );
    emailIntent.putExtra(Intent.EXTRA_STREAM, emailUri);
    emailIntent.setType("image/png");

    startActivity(Intent.createChooser(emailIntent, "send email using")); 
```

*应该怎么解决？？*

# jquery - 使用 jquery ajax 将列表元素传递给发布请求

> ID：11105456
> 
> 赞同：0
> 
> 时间：2012-06-19T16:39:31.473
> 
> 标签：jquery, post

我正在尝试使用 jquery ajax 函数将发布请求发送到服务器。

我的问题如下：cgi脚本（我想尽可能避免触摸）期望具有以下格式的url，其中通过多次声明参数来传递列表参数

例如对于给定的查询类型“列表”：

> queryType=queryValue1&queryType=queryValue2&queryType=queryValue3

我无法猜测如何使用 jquery ajax 方法的数据字段来执行此操作，而不用最后声明的参数覆盖所有参数值。

# c# - 如何在可观察集合中获得价值？

> ID：11105459
> 
> 赞同：0
> 
> 时间：2012-06-19T16:39:37.733
> 
> 标签：c#, wcf, windows-phone-7

我曾使用 listbox.itemsource 作为我的 e.Result。

```
<ListBox Height="476" HorizontalAlignment="Left" Margin="11,17,0,0" Name="ListBox1" VerticalAlignment="Top" Width="434" Foreground="#FFF5F5F1" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
<StackPanel Orientation="Vertical">
                            <TextBlock Height="40" HorizontalAlignment="Left" Margin="8,24,10,0" Name="txtBlockCustName" Text="{Binding CustName, Mode=OneWay}" VerticalAlignment="Top" FontSize="26" />

                            <TextBlock Height="40" HorizontalAlignment="Left" Margin="8,24,0,0" Name="txtBlockCustEmail" Text="{Binding CustEmail, Mode=OneWay}" VerticalAlignment="Top" FontSize="26" />
  </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

我怎样才能得到数据绑定值？

```
void proxy_FindProfileCompleted(object sender, FindProfileCompletedEventArgs e)
        {
            ListBox1.ItemsSource = e.Result;
            ObservableCollection<Customer> Customers = this.ListBox1.ItemsSource as ObservableCollection<Customer>;
        } 
```

我想从可观察的集合中获取客户姓名和客户电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:43:18.087

我不明白这是否是您需要的，但请尝试一下：

```
void proxy_FindProfileCompleted(object sender, FindProfileCompletedEventArgs e)
{             
    ListBox1.ItemsSource = e.Result;
    ObservableCollection<Customer> Customers = 
        this.ListBox1.ItemsSource as ObservableCollection<Customer>;  
    foreach(Customer cust in Customers)
    {
        // You can get cust.CustName
        // and you can get cust.CustEmail
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:47:23.703

您可以从查看类开始`CollectionViewSource`。这会跟踪当前项目（您可能必须`IsSynchronizedWithCurrentItem=true`在列表框绑定上）。您可以改为绑定到 this 并传递它。

如果这不能回答您的问题，我会尝试提出一个更详细的示例。

# wpf - XamDataGrid 列可见性无法使用 MVVM

> ID：11105461
> 
> 赞同：5
> 
> 时间：2012-06-19T16:39:45.283
> 
> 标签：wpf, mvvm, visibility, xamdatagrid

我正在尝试在 MVVM 体系结构中实现 XamDataGrid 列可见性，但它似乎不起作用。

我正在执行以下操作：

为未绑定的字段添加 Visiblility 属性 -

```
<igDP:UnboundField Name="gridCustomerId" 
                   Label="ID" 
                   Binding="{Binding customerid, 
                                     Mode=TwoWay, 
                                     UpdateSourceTrigger=PropertyChanged}" 
                   Visibility="{Binding ShowCustomerIDColumn, 
                                        Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}"> 
```

在我的视图模型中，添加一个可见性类型的属性：

```
//ToShow CustomerID Column
private Visibility showCustomerIDColumn; 
public Visibility ShowCustomerIDColumn 
{
    get
    {
        return showCustomerIDColumn; 
    }

    set
    {
        showCustomerIDColumn=value; 
        InvokePropertyChanged("ShowCustomerIDColumn"); 
    }    
} 
```

然后在命令处理程序中使用以下代码：

```
if(ShowCustomerIDColumn == Visibility.Hidden) 
    ShowCustomerIDColumn = Visibility.Visible; 
else
    ShowCustomerIDColumn = Visibility.Hidden; 

InvokePropertyChanged("ShowCustomerIDColumn"); 
```

有人有解决方案吗？

干杯，安舒曼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-22T08:28:28.217

可见性在这里不起作用的主要原因是与其他属性不同**，可见性不是 Fields 类中的依赖属性（UnboundField 类派生自 Field 类）**。

**查看可见性属性**

[![查看可见性属性](../Images/2c7e7732bb11d0c42189f6908da58222.png)](https://i.stack.imgur.com/NpLTo.jpg)

**请参阅支持绑定的 Label/RowSpan 属性**

[![请参阅支持绑定的标签属性](../Images/ca2600a4eee8f6102715de262d5ba802.png)](https://i.stack.imgur.com/gz9TT.jpg)

**您需要在 c# 代码中设置可见性**（在某些行为或事件背后的代码中）：

```
fieldlayout.Fields[node.Name].Visibility = node.Visibility ? Visibility.Visible : Visibility.Collapsed; 
```

# easymock - 在 Easymock 中模拟链式方法调用的简单方法

> ID：11105464
> 
> 赞同：5
> 
> 时间：2012-06-19T16:40:00.493
> 
> 标签：easymock

有没有一种简单的方法来模拟这个调用：

```
objectA.getB().getC(); 
```

现在我这样做的方式是：

```
A mockA = EasyMock.createMock(A.class);
B mockB = EasyMock.createMock(B.class);
C mockC = EasyMock.createMock(C.class);

expect(mockA.getB()).andReturn(mockB);
expect(mockB.getC()).andReturn(mockC); 
```

这有点矫枉过正，因为我所关心的只是获得 mockC。有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T08:49:52.260

我知道这个问题是关于 EasyMock 的，但我不能只是坐在我的手上而不告诉你关于 Mockito 的事情。在 Mockito 中，你想做的嘲笑是相当容易的。

```
A mockA = Mockito.mock(A.class, RETURNS_DEEP_STUBS);
C mockC = Mockito.mock(C.class);
Mockito.when(mockA.getB().getC()).thenReturn(mockC); 
```

请注意，Mockito 最初是对 EasyMock 的增强，您可以在此处阅读更多信息：[https ://code.google.com/p/mockito/wiki/MockitoVSEasyMock](https://code.google.com/p/mockito/wiki/MockitoVSEasyMock)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:12:32.667

不，没有——如果你想用模拟替换`A`,`B`并且`C`在你的测试中，你需要三个模拟对象。

另一种方法是使用真实的`A`和`B`类，并且只`C`用模拟对象替换。然后你的单元测试将测试

1.  包含的类`objectA.getB().getC()`
2.  `A`
3.  `B`

作为一个“单元”在一起。这是否有意义，取决于具体情况。

# asp.net - 尝试使用 vbscript 显示 SQL 数据库中的数据

> ID：11105466
> 
> 赞同：2
> 
> 时间：2012-06-19T16:40:01.447
> 
> 标签：asp.net, sql, vbscript, webpage

我正在尝试在 VBScript 中建立与我的 SQL 服务器的连接。

每当我连接到我的 SQL 服务器时，网页上都会显示“处理 URL 时出现问题”并联系管理员的错误。

我知道我的连接字符串是正确的，因为它适用于所有其他页面。

这是我目前用来设置 SQL 连接的代码

```
Const SQL_Connection_String = "Provider=sqloledb;SERVER=SQLPROD;DATABASE=MyDataBase;UID=MyUsername;PWD=MyPassword;"
    Set SQLConnection = CreateObject("ADODB.Connection")
    SQLConnection.provider = "ADODB.Connection"
    Set SQLConnectionRecordSet = CreateObject("ADODB.Recordset") 
```

据我所知，这应该是在 VBscript 中建立连接的有效方式。我还没有真正找到任何关于配置这些连接的好文档。

我想知道的是：我是否正确设置了连接，是否有一些策略可以用来解决这个问题？这意味着如果连接成功，我希望能够有一个返回 true 或 false 的打印语句。我还想以某种方式打印我的阅读器的内容，以查看它是否已从数据库中读取，以及它是否读取了我希望它读取的内容。

谢谢你的帮助。我是第一次使用 VBscript 和 ASP.net，所以我不知道任何细微之处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:58:18.647

您的

```
SQLConnection.provider = "ADODB.Connection" 
```

肯定是错的。当您在连接字符串中指定提供程序时，删除该行的（小）机会会使您的脚本“工作”。

**更新**

(1) 如果您在连接数据库时遇到问题，请使用[这个优秀的资源](http://www.connectionstrings.com/)来开始学习理论和示例，创建一个空文件（例如 constr.udl），启动它，然后使用 GUI 指定/测试您的连接。离开对话框会将连接字符串保存在文件中，您可以从其中通过一个体面的（启用 Unicode）编辑器来获取它。 ![使用 .udl 文件](../Images/974ff998ae91594d0bb069a017594f63.png)

(2) 如果您的 ASP 页面上有太多错误，请将（简化的）数据库代码提取到命令行 .vbs 脚本中；这样您就可以专注于一个敌人（并在您确定时处理第二个敌人，您的 SELECT 会返回所需的数据）。

(3) 如果您对特定的 SQL 语句/功能/表达式有问题，请研究文档；在这种情况下，请查看您最喜欢的 SQL 书籍或按照谷歌[LIKE（按马）](http://msdn.microsoft.com/en-us/library/ms179859.aspx)。JOIN 也可能是候选人。然后用（2）从简单的语句开始，掌握了看似枯燥的语句**后，再进行更复杂的语句。**（“Table2.Date LIKE '2011'”可能会起作用，具体取决于 Date 列的类型和内容（并且 Date 不是保留字/关键字吗？）

（虽然 Derek 肯定会读到他另一个问题的答案，但从这里开始的其他人可能也会从阅读[本文](https://stackoverflow.com/a/11109308/603855)中受益。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:14:03.287

下面是一些用于编写 ADO 脚本的示例代码：

```
Set SQLConnection = CreateObject("ADODB.Connection")
SQLConnection.Open ConnectionString

Set rs = CreateObject("ADODB.RecordSet")
rs.Open "SELECT SYSTEM_USER AS Username, session_id, auth_scheme, net_transport, client_net_address FROM sys.dm_exec_connections WHERE (@@SPID = session_id)", SQLConnection 

' Loop through each record until there are no more
While NOT rs.EOF
    ' Loop through each field
    For Each field In rs.Fields
        output.Write field.Value & " "
    next

    rs.MoveNext
    output.WriteLine
Wend 
```

# sql - 查找重复项并进行比较

> ID：11105467
> 
> 赞同：-1
> 
> 时间：2012-06-19T16:40:05.907
> 
> 标签：sql, tsql

此查询返回与 POG.Dbkey 相关的产品数量。我需要找到所有重复项以比较哪些具有相同的产品，哪些具有相同数量的产品。

--每个货架图中的总产品

```
select pog.DBKey
,Count(pos.DBParentProductKey)
as Total
from ix_spc_planogram as pog with (nolock)
, ix_spc_position as pos with (nolock)
where pog.dbkey = pos.dbparentplanogramkey
and pog.Value4= 358
group by  pog.dbkey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:52:27.620

如果我理解你的问题（prolly not），你可以像这样选择重复的数量：

```
select pog.DBKey
,Count(pos.DBParentProductKey) as 'Total'
,Count(pog.DBKey) - 1 as 'Number Duplicates'
as Total
from ix_spc_planogram as pog with (nolock)
, ix_spc_position as pos with (nolock)
where pog.dbkey = pos.dbparentplanogramkey
and pog.Value4= 358
group by  pog.dbkey 
```

或像这样限制它`HAVING`：

```
select pog.DBKey
,Count(pos.DBParentProductKey) as 'Total'
as Total
from ix_spc_planogram as pog with (nolock)
, ix_spc_position as pos with (nolock)
where pog.dbkey = pos.dbparentplanogramkey
and pog.Value4= 358
group by  pog.dbkey
having count(pog.dbkey) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:09:52.940

这会让你开始。

这是我在需要从表中选择/删除重复项时使用的模板：

```
Select  *
--DELETE
FROM    Table
WHERE   Table.TableID IN
(
    -- List 1 - all rows that have duplicates
    SELECT t1.TableID
    FROM Table t1
    WHERE Exists
    (
        SELECT UniqueField1, UniqueField2, Count(TableID)
        FROM Table
        WHERE Table.UniqueField1 = t1.UniqueField1
        AND UniqueField2 = t1.UniqueField2
        GROUP BY UniqueField1, UniqueField2
        HAVING Count(TableID) > 1
    )
)
AND TableID NOT IN
(
    -- List 2 - one row from each set of duplicate
    SELECT Max(TableID)
    FROM Table t2
    WHERE Exists
    (
        SELECT UniqueField1, UniqueField2, Count(TableID)
        FROM Table
        WHERE UniqueField1 = t2.UniqueField1
        AND UniqueField2 = t2.UniqueField2
        GROUP BY UniqueField1, UniqueField2
        HAVING Count(TableID) > 1
    )
    GROUP BY UniqueField1, UniqueField2
) 
```

# css - 垂直对齐 CSS3 下拉菜单

> ID：11105474
> 
> 赞同：1
> 
> 时间：2012-06-19T16:40:46.793
> 
> 标签：css, drop-down-menu, navigation, vertical-alignment

我一直在使用这种方法制作下拉菜单：

[http://azadcreative.com/2012/01/bulletproof-css3-dropdown-navigation-menu/](http://azadcreative.com/2012/01/bulletproof-css3-dropdown-navigation-menu/)

它完全按照我的意愿工作，唯一的问题是我无法让菜单项（不包括徽标，它的位置正确）在导航栏中垂直对齐。我尝试了许多方法，但似乎都没有。我怀疑另一个选择器正在干扰，但我不知道是哪个。

这是我当前代码的结果：

[http://i.stack.imgur.com/fqh6W.png](http://i.stack.imgur.com/fqh6W.png)

我也在尝试对齐分隔符。

我的 CSS

```
<style type="text/css">
    @import url("inc/reset.css");
    @import url("fonts/fonts.css");
    body { background-color: #fff; }
    nav {
        width: 925px;
        margin: 0 auto;
        zoom: 1;
        text-align: left;
        border: 1px solid #000;
    }
    nav:before, nav:after { display: table; content: ""; zoom: 1;   }
    nav:after { clear: both; }
        nav ul {
            float: left;
            zoom: 1;
            width: auto;
            z-index: 100;
            position: relative;
        }
        nav ul:before, nav ul:after { display: table;   content: ""; zoom: 1 }
        nav ul:after { clear: both; }
            nav ul li {
                float: left;
                padding: 0 0 10px 0;
                position: relative;
                outline: none;
                padding: 0 1px 0 0;
            }
            nav ul li.span:before { content: ''; }
            nav ul li + li:before { content: '|'; color: #a8c399; }
        nav ul a {
            padding: 15px;
            float: right;
            display: block;
            zoom: 1;
            font: .9em "jubilat-regular", "Franklin Gothic Book", "Times New Roman", serif;
            text-transform: lowercase;
        }
        nav ul a:link, nav ul a:visited { color: #353536; text-decoration: none; outline: none; }
        nav ul a:hover, nav ul a:active { color: #701271;   text-decoration: none; outline: none; }

    #menu li:hover > ul { display: block; }
    #menu li:hover > a { color: #701271; }

    nav li ul {
        display: none;
        margin: 0;
        position: absolute;
        top: 46px;
        left: 15px;
        width: 10em;
        background: #fff;
        border: 1px dashed #a8c399;
        z-index: 1000;
        zoom: 1;
    }
        nav li ul li + li:before { content: ''; }
        nav li ul li:hover { background-color: #a8c399; }
        nav li ul:before, nav li ul:after { display: table; content: ""; zoom: 1;   }
        nav li ul:after { clear: both; }
    nav li ul a { float: none; }
    nav li ul li { width: 10em; display: block; }
</style> 
```

我的 HTML：

```
<nav>
<ul id="menu">
    <li><a href="#">Why Miche</a></li>
    <li><span style="color:#701271;"><a href="#">Join Us</a></span>
        <ul>
            <li><a href="#">Join My Team!</a></li>
            <li><a href="#">Starter Kits</a></li>
        </ul>
    </li>
    <li><a href="#">Host a Miche Party</a>
        <ul>
            <li><a href="#">Hostess Benefits</a></li>
            <li><a href="#">Miche Party Ideas</a></li>
        </ul>
    </li>
    <li class="span"><a href="#"><img src="images/logo.png" width="295" height="67" alt="Miche" /></a></li>
    <li class="span"><span style="color:#701271;"><a href="#">Shop</a></span></li>
    <li><a href="#">About Miche</a>
        <ul>
            <li><a href="#">Media</a></li>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">Giving Back</a></li>
        </ul>
    </li>
    <li><span style="color:#701271;"><a href="#">About Me</a></span></li>
</ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:13:30.103

我对齐了分隔符（在评论中添加了 css）：http:
[//jsfiddle.net/JTKEx/](http://jsfiddle.net/JTKEx/)

你还想具体改变什么？

# c++ - C++：在运行时添加一个 dll 目录

> ID：11105479
> 
> 赞同：0
> 
> 时间：2012-06-19T16:41:02.670
> 
> 标签：c++, qt, dll, msdn

我想在我的应用程序中使用 Qt。它应该是一个自解压的单个 exe 文件。因为我想使用 Qt，所以我想将 Qt 库提取到一个临时目录并在运行时添加它们。不应将它们提取到 exe 路径。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:44:17.043

一种可能性是更改工作目录，例如`cwd("newdir")`或`SetCurrentDirectory("newdir")`.

另一个是修改你的进程 $PATH，例如`putenv ("PATH", "path + newdir")`.

# c# - 如何将我的 C# 字符串值打印成格式化文本，以使用打印机、BioPDF 打印机、Bullzip 软件进行打印

> ID：11105480
> 
> 赞同：0
> 
> 时间：2012-06-19T16:41:03.127
> 
> 标签：c#, wpf, printing

我有关于学生帐户的报告，是否可以将其打印到默认的物理打印机或软件打印机（如 BioPDF 打印机）以及如何在 C# 中格式化我的文本。

我正在使用 WPF 使用 C# 编写我的代码。我很抱歉，因为我不知道在这个问题中提供什么样的信息，请耐心等待；）。

//===================**编辑**===========================

```
PrintDialog printDialog = new PrintDialog();
       if (printDialog.ShowDialog().GetValueOrDefault(false))
       {
           printDialog.PrintVisual(listBox1, this.Title);
       } 
```

// 我正在尝试打印 ListBox 的内容，但问题是我在视觉中使用的是阿拉伯语

```
<ListView HorizontalAlignment="Left" Margin="503,73,0,98" Name="listBoxEPayed" Width="410" MouseDoubleClick="listBoxEPayed_MouseDoubleClick">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Header="الرقم" Width="50" DisplayMemberBinding="{Binding Path=ReportID}" />
                        <GridViewColumn Header="محرر الفاتوره" Width="100" DisplayMemberBinding="{Binding Path=UserName}" />
                        <GridViewColumn Header="قيمة المبلغ" Width="75" DisplayMemberBinding="{Binding Path=Cashamount}" />
                        <GridViewColumn Header="التاريخ" Width="120" DisplayMemberBinding="{Binding Path=Date}" />
                    </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView> 
```

//打印的结果是所有字符都被打乱了。请注意，我正在使用 bioPDF 打印机软件测试打印页面的布局。结果似乎在这张照片中![在此处输入图像描述](../Images/7ec36ab0f97f99d5dd8f7a3811f6a52d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:00:39.643

选项 1：使用 WPF 表单打印出来。以下代码片段来自 SO question（[在一页上打印 WPF 窗口](https://stackoverflow.com/questions/2175530/printing-of-wpf-window-on-one-page)）

```
PrintDialog printDialog = new PrintDialog();
if (printDialog.ShowDialog().GetValueOrDefault(false))
{
    printDialog.PrintVisual(this, this.Title); 
} 
```

问题是，窗户可能不适合一张纸。

* * *

选项 2：将您的数据绑定到报告解决方案，如 Chrystal Reports（现在由 SAP 拥有，有一个免费版本）、Active Reports、DevExpress 或其他报告解决方案。一些可用的报告组件非常昂贵，但为了获得高质量的结果，它们物有所值。

# entity-framework - Add-Migration 命令因“类型未解析”而失败（其中“类型”是内部实体框架类）

> ID：11105483
> 
> 赞同：10
> 
> 时间：2012-06-19T16:41:13.507
> 
> 标签：entity-framework, entity-framework-migrations

我已经使用了一个带有单独迁移包的实体框架（对于 3.5 或 4.0，不记得了），并包含了迁移 api（4.3、5.0）。

但是今天我创建了一个新项目（空 MVC4.0 项目），安装最新的稳定 EF（4.3）并在“pm > Add-Migration initital”命令中收到以下错误

```
System.Runtime.Serialization.SerializationException: Type is not resolved for member 'System.Data.Entity.Migrations.Design.ToolingFacade+GetPendingMigrationsRunner,EntityFramework    , Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
   at System.AppDomain.DoCallBack(CrossAppDomainDelegate callBackDelegate)
   at System.Data.Entity.Migrations.Design.ToolingFacade.Run(BaseRunner runner)
   at System.Data.Entity.Migrations.Design.ToolingFacade.GetPendingMigrations()
   at System.Data.Entity.Migrations.AddMigrationCommand.<>c__DisplayClass2.<.ctor>b__0()
   at System.Data.Entity.Migrations.MigrationsDomainCommand.Execute(Action command) 
```

然后我尝试切换到 EF5.0，但仍然出现错误，版本有所不同：

```
System.Runtime.Serialization.SerializationException: Type is not resolved for member 'System.Data.Entity.Migrations.Design.ToolingFacade+GetPendingMigrationsRunner,EntityFramework      , Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. 
```

这是我第一次收到此错误。“
System.Data.Entity.Migrations.Design.ToolingFacade”类存在，其中的“GetPendingMigrationsRunner”子类也存在于引用的EntityFramework程序集中。

任何人都知道什么可能导致错误？迁移适用于 MVC4.0 上的另一个项目，在那些我选择了标准（非空）项目模板的项目上。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-03T20:27:29.337

我可以通过右键单击包含我的迁移的类库并选择“设置为启动项目”来修复此错误

来源：[http ://forums.asp.net/t/1978562.aspx?Getting+exception+while+running+EF+Migrations+command+in+Package+Manager+Console](http://forums.asp.net/t/1978562.aspx?Getting+exception+while+running+EF+Migrations+command+in+Package+Manager+Console)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T18:13:37.533

在某些项目针对 .NET 4.5（因此使用 EF 5）和一些针对 .NET 4（因此使用 EF 4.4）的解决方案中尝试启用迁移时，我遇到了同样的错误。它似乎试图加载错误版本的 EF DLL。

当我暂时从我的解决方案中卸载 .NET 4.5 项目时，我可以在我的其他项目中成功使用 Enable-Migrations。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T15:33:12.773

当我的计算机磁盘空间不足时，我遇到了这个问题。清理一些文件并重新运行为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T11:06:17.500

通过在我的解决方案中将测试单元库而不是库本身作为启动项目，我能够避免此错误。

# wordpress - 使用 git 跟踪服务器上所做的更改而无需提交

> ID：11105485
> 
> 赞同：0
> 
> 时间：2012-06-19T16:41:16.913
> 
> 标签：wordpress, git

在我提出问题之前，我想提一下，我今天才**开始**尝试 git，因此我是一个完全的 git 新手。

我经常为客户在 Wordpress 网站上与平面设计师合作。在我将代码上传到服务器后，图形设计师有时会使用 Wordpress 编辑器（在 Wordpress 管理面板中）直接在服务器上编辑 CSS 和其他文件。

你可以想象这会给我带来问题，因为我必须首先将所有修改后的文件重新下载到我的本地开发文件夹中——因为我不知道哪些文件被编辑了，所以我必须重新下载整个主题文件夹。然后我在本地进行更改，然后重新上传到服务器。

从我在网上阅读的内容来看，Git 似乎可以减轻这种痛苦。

**我的问题**：如果设计师使用 wp 编辑器更改*服务器上的文件***而不**使用 git / commit，那么使用 Git 仍然对我有帮助吗？它会以类似于 Dropbox 的工作方式自动将所有修改后的文件下载到我的机器上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:06:58.747

执行 git pull 来移动文件，不会从服务器上的工作目录中收集任何更改。一个潜在的工作流程可能是首先登录到服务器并提交所有更改并将它们推送到裸存储库。然后，您可以从本地裸存储库中提取并查看其他人所做的更改，git 将帮助您将它们合并到本地环境中。

您也可以以相同的方式从本地环境部署到生产环境，方法是推送到裸存储库，然后从裸存储库拉取到生产服务器。

裸仓库似乎是一个额外的步骤，但是您的两个环境（服务器和本地）都是工作环境，因此传输裸仓库将使您在提交和合并时更容易一些。（如果我在这个问题上偏离了轨道，我相信有人会以我的方式指出错误......）

您需要从 repo 中排除 wp-config.php 文件，或根据环境变量等修改权限站点（即在本地和服务器上的 vhost 文件中设置环境变量并使用条件语句确定在 wp-config.php 中使用哪些数据库凭据）。就像是：

```
switch ($_SERVER['APPLICATION_ENV']) {
case 'local':
    define('DB_NAME', 'local');
    define('DB_USER', 'localuser');
    define('DB_PASSWORD', 'localpwd');
    define('DB_HOST', 'localhost');
    define('WP_HOME','http://local.verycoolwebsite.com');
    define('WP_SITEURL','http://local.verycoolwebsite.com');
    define('WP_DEBUG', true);
    define('SAVEQUERIES', true);
break;

case 'production':
    define('DB_NAME', 'production');
    define('DB_USER', 'www');
    define('DB_PASSWORD', 'foobar');
    define('DB_HOST', 'localhost');
    define('WP_HOME','http://www.verycoolwebsite.com');
    define('WP_SITEURL','http://www.verycoolwebsite.com');
    define('WP_DEBUG', false);
    define('SAVEQUERIES', false);
break;
} 
```

如果图像目录很大并且不需要版本控制，则排除它们也可能是一个好主意。

作为另一种选择，如果您要查找的是移动更改而不是完整版本控制，请查看 rsync 命令。

# android - sqlite-net 和外键

> ID：11105487
> 
> 赞同：1
> 
> 时间：2012-06-19T16:41:25.687
> 
> 标签：android, sqlite, xamarin.android

我正在使用这个漂亮的轻量级 c# 库与 sqlite dbs 进行交互。问题是它不支持外键。我想知道是否有任何工作或必须忍受它。

# c - 用表达式参数的 printf 替换算术表达式

> ID：11105489
> 
> 赞同：1
> 
> 时间：2012-06-19T16:41:29.790
> 
> 标签：c, text, sed, awk

我正在使用一个多面体编译器，该编译器会产生非常不可读的代码，这是一个小示例：

```
for (t2=2*t1;t2<=min(floord(2*T+N-3,32),floord(64*t1+N+61,32));t2++) {
  for (t3=max(ceild(32*t2-N-27,32),2*t1);t3<=min(min(floord(2*T+N-3,32),floord(64*t1+N+61,32)),floord(32*t2+N+27,32));t3++) {
    if ((t1 <= floord(32*t3-N+1,64)) && (t2 <= t3-1)) {
      if ((N+1)%2 == 0) {
        for (t5=max(32*t2,32*t3-N+4);t5<=32*t2+31;t5++) {
          a[-32*t3+t5+N-2][N-2]=b[-32*t3+t5+N-2][N-2];;
        }
      }
    }
    if ((t1 <= floord(32*t2-N+1,64)) && (t2 >= t3)) {
      if ((N+1)%2 == 0) {
        for (t6=max(32*t3,32*t2-N+4);t6<=min(32*t2,32*t3+31);t6++) {
          a[N-2][-32*t2+t6+N-2]=b[N-2][-32*t2+t6+N-2];;
        }
      }
    } 
```

我试图通过使用数组索引的 printf 转换生成的代码中的算术表达式来调试编译器的一部分，例如，这个表达式：

```
a[-32*t3+t5+N-2][N-2]=b[-32*t3+t5+N-2][N-2];; 
```

应该变成这个 printf：

```
printf("a[%d][%d] = b[%d][%d]\n",-32*t3+t5+N-2,N-2,-32*t3+t5+N-2,N-2); 
```

我开始尝试使用 awk 并生成了这个简单的程序，它识别要修改的字符串并让程序的其余部分保持不变：

```
awk '{if ($0 ~ "^[ ]*[a,b]") print "printf("; else print $0;}' 
```

但是，我不知道如何解析算术表达式以便在删除数组访问的索引时保留其结构。我尝试了一个while循环，但我现在被卡住了。awk 应该可以进行此类替换，但欢迎使用其他语言提出任何建议！

**update**算术表达式可以是任何算术表达式，例如：

```
b[t3][t4]=0.2*(a[t3][t4]+a[t3][t4-1]+a[t3][1+t4]+a[1+t3][t4]+a[t3-1][t4]);; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:27:23.073

**代码：**

```
awk '/\[/ { \
    sub(/^ */, ""); \
    sub(/;*$/, ""); \
    print \
        "printf(\"" \
        gensub("\\[[^]]*\\]", "[%d]", "g") \
        "\"" \
        gensub("[^\\[]*\\[([^]]*)\\][^\\[]*", ",\\1", "g") \
        ");" \
    ; \
    next; \
}1' 
```

**说明：**

*   `awk '/\[/ { ........; next; }1'`将`........`在找到`[`字符的任何行上执行，否则将打印未触及的行。
*   `sub(/^ */, "");`从当前行修剪前导空格字符
*   `sub(/;*$/, "");`修剪当前行的拖尾分号字符
*   接下来是一个`print`连接 5 位的语句
*   `gensub("\\[[^]]*\\]", "[%d]", "g")`返回当前行的副本，其中任何方括号语句都替换为 with `[%d]`。请注意，嵌套的方括号会破坏这一点。另请注意，与 相反`sub`，该`gensub`命令实际上并不修改当前行。
*   `gensub("[^\\[]*\\[([^]]*)\\][^\\[]*", ",\\1", "g")`还获取当前行的副本，并且对于它找到的每个方括号表达式，它会做 3 件事：
    *   `[^\\[]*`删除前导非`[`字符
    *   `\\[([^]]*)\\]`匹配方括号表达式，并将`",\\1"`其替换为逗号字符后跟方括号内的内容
    *   `[^\\[]*`删除尾随的非`[`字符（直到下一个方括号表达式或行尾）
*   请注意，删除两个`[`方括号表达式之间的前导和尾随非字符是多余的，但在行的开头和结尾很有用。

**输入：**

```
for (t2=2*t1;t2<=min(floord(2*T+N-3,32),floord(64*t1+N+61,32));t2++) {
  for (t3=max(ceild(32*t2-N-27,32),2*t1);t3<=min(min(floord(2*T+N-3,32),floord(64*t1+N+61,32)),floord(32*t2+N+27,32));t3++) {
    if ((t1 <= floord(32*t3-N+1,64)) && (t2 <= t3-1)) {
      if ((N+1)%2 == 0) {
        for (t5=max(32*t2,32*t3-N+4);t5<=32*t2+31;t5++) {
          a[-32*t3+t5+N-2][N-2]=b[-32*t3+t5+N-2][N-2];;
        }
      }
    }
    if ((t1 <= floord(32*t2-N+1,64)) && (t2 >= t3)) {
      if ((N+1)%2 == 0) {
        for (t6=max(32*t3,32*t2-N+4);t6<=min(32*t2,32*t3+31);t6++) {
          a[N-2][-32*t2+t6+N-2]=b[N-2][-32*t2+t6+N-2];;
        }
      }
    }

    b[t3][t4]=0.2*(a[t3][t4]+a[t3][t4-1]+a[t3][1+t4]+a[1+t3][t4]+a[t3-1][t4]);; 
```

**输出：**

```
for (t2=2*t1;t2<=min(floord(2*T+N-3,32),floord(64*t1+N+61,32));t2++) {
  for (t3=max(ceild(32*t2-N-27,32),2*t1);t3<=min(min(floord(2*T+N-3,32),floord(64*t1+N+61,32)),floord(32*t2+N+27,32));t3++) {
    if ((t1 <= floord(32*t3-N+1,64)) && (t2 <= t3-1)) {
      if ((N+1)%2 == 0) {
        for (t5=max(32*t2,32*t3-N+4);t5<=32*t2+31;t5++) {
printf("a[%d][%d]=b[%d][%d]",-32*t3+t5+N-2,N-2,-32*t3+t5+N-2,N-2);
        }
      }
    }
    if ((t1 <= floord(32*t2-N+1,64)) && (t2 >= t3)) {
      if ((N+1)%2 == 0) {
        for (t6=max(32*t3,32*t2-N+4);t6<=min(32*t2,32*t3+31);t6++) {
printf("a[%d][%d]=b[%d][%d]",N-2,-32*t2+t6+N-2,N-2,-32*t2+t6+N-2);
        }
      }
    }

printf("b[%d][%d]=0.2*(a[%d][%d]+a[%d][%d]+a[%d][%d]+a[%d][%d]+a[%d][%d])",t3,t4,t3,t4,t3,t4-1,t3,1+t4,1+t3,t4,t3-1,t4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:01:39.193

拆分表达式：

```
a[N-2][-32*t2+t6+N-2]=b[N-2][-32*t2+t6+N-2]; 
```

成一个数组，使用拆分：

```
split( $0, ar, "[][]" ) 
```

在此调用之后`ar[2] = "N-2"`，`ar[4] = "-32*t2+t6+N-2"`, 等。 split 中的正则表达式看起来有点奇怪，但基本上它只是在`[`or上进行拆分`]`。显然，这非常脆弱，最好使用完整的解析器，但这应该会有所帮助。

# xml - Oracle 11g：提取和计数 XML 元素

> ID：11105491
> 
> 赞同：2
> 
> 时间：2012-06-19T16:41:32.000
> 
> 标签：xml, oracle, xquery

我将 XML 类型的数据存储在 Oracle 11g 数据库中。我的数据的粗略版本如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<record>
<record_number>12345</record_number>
<record_type> book </record_type>
</record> 
```

数据操作功能，例如：

```
SELECT XML_Type FROM Metadata 
```

指定每行包含格式良好的 XML 文件（具有许多标签和元素）的列。我正在努力提取和计算每个`<record_type>`元素的出现次数。例如，我想知道 XML 标记`<record_type>`有多少次包含“book”、“article”等元素。不过，我不知道与该标记关联的整个元素列表。

谢谢，

我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:22:00.297

取决于您的数据的确切存储方式（即表中是否有 1 行是 1 个看起来像您发布的示例的 XML 文档，或者表中是否有 1 行是 1 个具有许多不同记录标签的 XML 文档它）最简单的方法是

```
SQL> ed
Wrote file afiedt.buf

  1  with t as (select '<?xml version="1.0" encoding="UTF-8"?>
  2                     <record>
  3                       <record_number>12345</record_number>
  4                       <record_type> book </record_type>
  5                     </record>' xml
  6                from dual
  7              union all
  8              select '<?xml version="1.0" encoding="UTF-8"?>
  9                        <record>
 10                           <record_number>6789</record_number>
 11                           <record_type> magazine </record_type>
 12                        </record>' xml
 13                 from dual)
 14  select xmltype(t.xml).extract( '//record_number/text()' ) record_number,
 15         xmltype(t.xml).extract( '//record_type/text()' ) record_type
 16*   from t
SQL> /

RECORD_NUMBER        RECORD_TYPE
-------------------- ------------------------------
12345                 book
6789                  magazine 
```

提取数据后，计算或聚合数据应该很容易。

# grails - 如果域类未知，如何有效地根据 ID 找到域类实例？

> ID：11105492
> 
> 赞同：1
> 
> 时间：2012-06-19T16:41:55.043
> 
> 标签：grails

如果给了我一个 ID，但没有指明它属于哪个域类，我应该如何加载它？

我可以一次针对我的应用程序中的每个域类测试 get()，但是代码将难以管理并且效率相当低。有替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:16:49.257

正如其他人所说，仅使用 ID 很难做很多事情。您唯一真正的选择是尝试检索具有该 ID 的每个域类，但正如其他人所提到的，完全有可能存在多个具有该 ID 的实例的域类。

值得庆幸的是，获取应用程序中的所有域类并使用`application.domainClasses`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:51:11.770

是的，只有一种方法：尝试 get() 每个域，直到找到一个。

顺便说一句，不同的域可以具有完全相同的 id（取决于配置）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:29:06.533

您可以将某种“元数据”添加到您的 id。

例如，假设您有 2 个域类：Book 和 Author。在数据库中，您为该表创建两个 id 序列，一个在 100000 - 199999 范围内，第二个在 200000-299999 范围内。

现在，当您有一个 Id 时，您可以检查它的范围并找出它是哪个域对象。它会比遍历所有域类并在它们上调用 get() 更快，特别是如果你有一些急切加载的集合。

但缺点是您必须以某种方式管理此范围，并始终记住它们，并确保涵盖序列用完免费 ID 的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:53:15.837

在不了解上下文的情况下，提出一些建议会更加困难。如果您有权访问返回 id 的实例，那么也许您可以找出该类，然后使用该类执行 get()。

# ajax - 如何使用参数将 XDomainRequest 调用发布到 WCF 服务方法

> ID：11105495
> 
> 赞同：2
> 
> 时间：2012-06-19T16:42:07.950
> 
> 标签：ajax, wcf, xdomainrequest

我想我已经阅读了关于 XDomainRequest 的所有 StackOverflow 帖子以及关于 AJAX 和 WCF 的另外几十篇文章，但我仍然无法让**XDomainRequest AJAX 调用**正常工作。我已经在我的 WCF 服务上实现了 CORS（“Access-Control-Allow-Origin”），并且我的代码在 Chrome 和 Firefox 中与 xmlHttpRequest 一起工作得很好，但是我正在跨域进行调用，所以对于 IE，我需要使用XDomainRequest 对象。当我 GET 或 POST 到没有 args 的方法时，我的 xdr 工作正常，我什至可以使用查询字符串成功地将 GET 动词用于具有 args 的方法，但是当我尝试**POST**到**具有 args的方法时**我的 xdr 抛出一个错误，即使我在 BeginRequest 方法中放置了一个断点并且我看到来自服务器的响应是“200 OK”。我想我已经尝试了配置文件设置的每一种组合，但我必须遗漏一些东西。非常感谢为我指明正确方向的任何帮助。

以下是我的代码的相关部分：

**WCF - Global.asax**

```
protected void Application_BeginRequest(object sender, EventArgs e)
    {
        //for CORS
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
    } 
```

**WCF - IService1.cs**

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebInvoke(Method = "POST")]
    string GetData();

    [OperationContract]
    [WebInvoke(Method = "POST")]
    string GetData2(string param);
} 
```

**WCF-Service1.svc**

```
public class Service1 : IService1
{
    public string GetData()
    {
        return "Hello";
    }

    public string GetData2(string param)
    {
        return string.Format("Hello - {0}", param);

    }
} 
```

**WCF - Web.config**

```
<?xml version="1.0"?> 
```

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <services>
        <service behaviorConfiguration="WcfService1.Service1Behavior" name="WcfService1.Service1">
            <endpoint address="AjaxEndpoint" behaviorConfiguration="AjaxBehavior" contract="WcfService1.IService1" bindingConfiguration="AjaxBinding"/> 
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="WcfService1.Service1Behavior">
                <!--<serviceMetadata httpGetEnabled="true" />-->
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviors>
        <endpointBehaviors>
            <behavior name="AjaxBehavior">
                <enableWebScript/>
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <bindings>
        <webHttpBinding>
            <binding name="AjaxBinding"/>
        </webHttpBinding>
    </bindings>
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

**客户端 AJAX 调用**

```
var WcfURL = "http://localhost/WcfService1/Service1.svc/AjaxEndpoint"
if (window.XDomainRequest) {
//IE - use cross-domain request
xdr = new XDomainRequest();
xdr.onprogress = function () { alert("onprogress: " + xdr.responseText) };
xdr.onload = function () { updateText(xdr.responseText) }; 
xdr.onerror = function () { alert("xdr error") };
xdr.timeout = 7500;
xdr.ontimeout = function () { alert("xdr timeout") };

var data = "passedInParam";
//var method = "/GetData";  //this works
var method = "/GetData2";  //this throws an error
xdr.open("POST", WcfURL + method);

xdr.send(data); 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:03:43.557

我找到了解决方案。感谢 Fiddler，我能够查看更多从服务返回的响应。错误是

> 传入消息具有意外的消息格式“原始”。该操作的预期消息格式为“Xml”、“Json”。这可能是因为尚未在绑定上配置 WebContentTypeMapper。

有了这些信息，我开始研究 WebContentTypeMapper。我发现[这篇](https://stackoverflow.com/questions/2038673/wcf-input-huge-xml-as-stream-with-content-type-xml-text)文章很有用，在添加 WebContentTypeMapper 方法后，我可以看到来自 XDomainRequest 的请求的 contentType 类型为“application/json”（如预期的那样），而我**没有**在 XDomainRequest.send() 方法中包含一个参数，但在传入参数时更改为类型“application/octet-stream”。（即 xdr.send(data)）我不知道为什么它会更改为八位字节-stream，但这样做会导致服务方法抛出 500 错误（带有上面的消息），从而导致 xdr 请求出错。但是 WebContentTypeMapper 被恰当地命名，并且使用它来更改 contentType 很容易。在将其更正为 Json 类型后，我的 xdr 运行良好。

这是方法：

```
public class CustomContentTypeMapper : WebContentTypeMapper
{
    public override WebContentFormat GetMessageFormatForContentType(string contentType)
    {
        if (contentType == "application/octet-stream")
        {
            return WebContentFormat.Json;
        }
        else
        {
            return WebContentFormat.Default;
        }
    }
} 
```

以下是更新的配置文件部分：

```
<endpoint address="AjaxEndpoint" behaviorConfiguration="AjaxBehaviour" contract="WcfService1.IService1" binding="customBinding" bindingConfiguration="CustomMapper"/>
...
<bindings>
        <customBinding>
            <binding name="CustomMapper">
                <webMessageEncoding webContentTypeMapperType="WcfService1.CustomContentTypeMapper, WcfService1" />
                <httpTransport manualAddressing="true" />
            </binding>
        </customBinding>
    </bindings> 
```

# jquery - 滚动到顶部功能

> ID：11105496
> 
> 赞同：0
> 
> 时间：2012-06-19T16:42:12.380
> 
> 标签：jquery, css, wordpress, scrolltop

我正在尝试在我的网站上添加滚动到顶部功能。

我正在使用的脚本是由另一个开发人员组合在一起的，所以我不确定我是否正确使用它。

这是我的 footer.php 文件（使用 wordpress）[http://pastebin.com/vniCcaGr](http://pastebin.com/vniCcaGr)

任何想法为什么它不能在我的网站上运行（已删除）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:50:36.557

我还没有看到你的代码，但是使用 scrollTop 可以解决你的问题。

```
jQuery("#id_of_scroll_to_top_button").click(function(){
   jQuery(document).scrollTop(0);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:03:14.473

我有时会使用一个名为 scrollTo 的插件，它的功能类似于原生的 scrollTop，但有更多的选项。

在这里检查：[scrollTo 插件](http://demos.flesler.com/jquery/scrollTo/)

# php - 如何在带有 php 的 ubuntu 服务器上使用 Ghostscript 将 .docx 文件转换为 pdf

> ID：11105497
> 
> 赞同：1
> 
> 时间：2012-06-19T16:42:14.297
> 
> 标签：php, linux, ghostscript, docx

我想将现有的 docx 文件转换为服务器上的 pdf。任何人都可以提供我如何实现这一点的代码示例。我的意图是使用 php exec() 命令来触发所需的任何命令行参数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:05:09.113

为了回答我自己的问题，我解决这个问题的过程是使用[PHPDocx](http://www.phpdocx.com/)创建动态 docx 文件，然后我让主机在服务器上安装 libreoffice，并在无头模式下使用它从 docx 创建 pdf文件，最后我使用[PDF Merger](http://pdfmerger.codeplex.com/)将 pdf 文件连接在一起

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:23:12.040

有一个名为 Docmosis 的工具，您可以调用它来执行 DOCX->PDF。它使用 java/openoffice/libre-office/odf-converter 一起使转换链以合理的保真度工作。您可以使用 Docmosis 或尝试自己组合 openoffice/libreoffice 和 odf-converter。当然，如果没有 odf-converter，OpenOffice 和 LibreOffice 的 docx 格式渲染效果会很差。

# java - 无法在自定义对话框中实现 setSingleChoiceItems

> ID：11105498
> 
> 赞同：0
> 
> 时间：2012-06-19T16:42:18.283
> 
> 标签：java, android, eclipse, android-alertdialog

我想在自定义对话框中实现 setSingleChoiceItems 但无法做到。我希望当我按下一个按钮时会弹出一个带有 setSingleChoiceItems 的自定义警报框，然后它将转到另一个活动。

下面的代码：

```
package com.ssaa;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class VoteActivity extends Activity {
    /** Called when the activity is first created. */

    Button b;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        b=(Button) findViewById(R.id.vote);
        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                showDialog(1);
            }
        });
    }

    public void showallDialog()
    {
        final CharSequence[] items = {"Yes", "No", "Can't Say"};
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setTitle("AM I AWESOME?");
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item)
            {
                Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
            }
        });
        AlertDialog alert = builder.create();
    }
    @Override
    protected Dialog onCreateDialog(int id) {
        // TODO Auto-generated method stub
        Dialog d =null;
        switch (id) {
        case 1:

            showallDialog();

        default:
            break;
        }
        return d;
    }

  /*  class MyCustomDialogue extends Dialog
    {

        public MyCustomDialogue(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
        }

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);

        }
    }*/

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }
} 
```

我认为我在方法上做错了`showallDialog()`。请帮我纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:50:54.157

您目前正在尝试显示一个空对话框，因为您从未在`onCreateDialog`

showallDialog 应该返回您创建的对话框。前任：

```
 public AlertDialog showallDialog()
    {
        final CharSequence[] items = {"Yes", "No", "Can't Say"};
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setTitle("AM I AWESOME?");
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item)
            {
                Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
                //create your intent here
                Intent intent = new Intent(getApplicationContext(), YourNextActivity.class);
                startActivity(intent);
            }
        });
        return builder.create();
    } 
```

然后，当您在其中创建对话框时，`onCreateDialog`将“d”分配给您的 AlertDialog

```
case 1:
   d = showallDialog();
   break; 
```

# c# - 如何在不获取整个文档的情况下获取字段值？

> ID：11105499
> 
> 赞同：2
> 
> 时间：2012-06-19T16:42:28.663
> 
> 标签：c#, mongodb, mongodb-.net-driver

我知道，这似乎是一个非常愚蠢的问题。但不管怎么说。

Lats 说，我收集了这种结构的文件：

```
{
  _id: idvalue, 
  name: namevalue, 
  location: 
  {
    long: longvalue, 
    lat: latvalue
  }
} 
```

当然，还有 C# 中的序列化类。

我需要获取由它的_id 指定的文档的位置。

我试图通过以下方式做到这一点：

```
var documentLocation = collection.FindOne("_id", new ObjectId(id)).Location; 
```

但在这种情况下，整个文档将取自 db。而且我只想采用json的“位置：{long：longvalue，lat：latvalue}”部分。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:10:00.150

您应该使用`Find`而不是`FindOne`. `FindOne`内部调用 Find 方法如下：

```
return Find(query).SetLimit(1).FirstOrDefault() 
```

这意味着您无法`MongoCursor`通过`FindOne`. 但是要指定驱动程序应该返回哪些字段（通过`SetFields`），您需要访问 mongo 游标。

此外，当您指定字段时，驱动程序仍会返回整个对象（不仅仅是位置），但除指定之外的所有字段都将为空/空。

所以，最后一个查询：

```
var documentLocation = collection.Find("_id", new ObjectId(id))
                                 .SetFields(Fields.Include("Location"))
                                // single if you sure that this document always in db
                                 .Single() 
                                 .Location; 
```

`_id`即使您没有明确指定，驱动程序也将始终返回该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:59:03.390

我认为您可以使用 Cursor 和 Mongo 光标对象上的 setFields 方法来做到这一点。

```
var cursor = collection.FindAs<DocType>(Query.EQ("_id", new ObjectId(id));
cursor.SetFields(Fields.Include("location");
var items = cursor.ToList(); 
```

现在我不能 100% 确定它会完全正确地工作，但它应该在附近。

# java - 休眠键多对一

> ID：11105500
> 
> 赞同：1
> 
> 时间：2012-06-19T16:42:32.503
> 
> 标签：java, hibernate, criteria

我在从表中获取正确数据时遇到问题。该类`CompanyActualData`包含该类的一个成员`CompanyActualDataPK`。该类`CompanyActualDataPK`包含该类的成员`Entity`和 String `isin`。`Entity`有一个 String `visibility`，我想过滤它。我想得到所有`CompanyActualData`，有一个特别的`visibility`和一个特别的`isin`。

目前，我在努力制定正确的标准。

```
List<CompanyActualData> l = 
    session.createCriteria(CompanyActualData.class)
    .add(Restrictions.eq("companyActualDataPK.isin", isin))
    .createCriteria("companyActualDataPK")
    .add(Restrictions.eq("companyActualDataPK.entity.visible", visibility))
    .list(); 
```

我总是得到错误

> 无法解析属性：de.ll.web.pm.services.company.actual.CompanyActualData 的 companyActualDataPK.entity.visible

也许有人有暗示。

```
<class name="de.ll.web.pm.services.company.actual.CompanyActualData" schema = "reporting"   table="company_actual">

        <composite-id name="companyActualDataPK" class="de.ll.web.pm.services.company.actual.CompanyActualDataPK">          
            <key-property name="isin" column="isin"/>
            <key-property name="countryId" column="country_id"/>
            <key-many-to-one  name="entity"     class="de.ll.web.pm.services.entity.Entity" lazy="false" >
                <column name="entity_id"></column> 
            </key-many-to-one> 
        </composite-id>

        <property name="sedol" column="sedol" not-null="false" />
        <property name="valueDouble" column="value_double" not-null="false" />
        <property name="valueString" column="value_string" not-null="false" />
        <property name="date" column="date_id" not-null="false" />

        <many-to-one name="currency"
            class="de.ll.web.pm.services.currency.Currency" lazy="false" insert="false" update="false">
            <column name="currency_id"></column>
        </many-to-one>  
    </class> 
```

>

```
<class name="de.ll.web.pm.services.entity.Entity"
        table="md_entity" schema="reporting">

        <id name="entityId" column="entity_id" type="java.lang.String">
            <generator class="native" />
        </id>

        <property name="name" column="name" />
        <property name="description" column="description" />
        <property name="vendor" column="vendor" />
        <property name="visible" column="is_visible" type="java.lang.String"  />
        <property name="currency" column="is_currency" type="java.lang.String" />
</class> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:51:02.207

通过这样做`createCriteria("companyActualDataPK")`，`Criteria`扎根于PK类。以下 s 中给出的所有属性名称`Restriction`都将与`CompanyActualDataPK`类相关。

尝试做：

```
List<CompanyActualData> l = 
    session.createCriteria(CompanyActualData.class)
    .add(Restrictions.eq("companyActualDataPK.isin", isin))
    .add(Restrictions.eq("companyActualDataPK.entity.visible", visibility))
    .list(); 
```

# c# - 在 Mono for Android 中集成 SYGIC

> ID：11105506
> 
> 赞同：2
> 
> 时间：2012-06-19T16:42:52.877
> 
> 标签：c#, monodevelop, xamarin.android

任何人都可以帮助我如何将 Sygic SDK 集成到 Mono for Android 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:13:49.727

我不熟悉那个 SDK，但是快速浏览[他们的网站](http://www.sygic.com/en/business%3asdk)，看起来他们提供了 SDK 的 Android 版本，我猜它是以 .jar 文件的形式出现的。如果是这种情况，Android 的 Mono 提供了为 Java 库创建绑定的能力，您可以通过 C# 在应用程序中访问这些绑定，因此我建议您试一试。[这里](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_%28.jar%29)有一些关于如何开始创建绑定项目的好文档。

# c++ - CreateWindowEx 返回 NULL

> ID：11105507
> 
> 赞同：2
> 
> 时间：2012-06-19T16:42:57.510
> 
> 标签：c++, visual-studio-2010, winapi, visual-c++-2010, createwindowex

以下是我的代码的一部分。每次我运行程序时，`CreateWindowEx`SPanel 都会返回`NULL`，触发错误。任何人都可以看到这段代码有什么问题吗？

`SPanelProc`and`MainWndProc`已经声明，并且属于原型`LRESULT CALLBACK SPanelProc (HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam);`。

我正在编程的环境是 Visual C++ 2010。

为什么`CreateWindowEx`总是回来`NULL`？

```
#include <Windows.h>
#include <WindowsX.h>

LRESULT CALLBACK SPanelProc (HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch (msg)
    {
        case WM_MOUSEMOVE:

        break;
    }

    return 0;
}

void Init ()
{
    HWND child;
    HINSTANCE hInstance = (HINSTANCE)(GetWindowLongPtr (parent, GWLP_HINSTANCE));
    WNDCLASSEX wc;
    const char PanelClassName[] = "SPanel"; //ClassName of the panel. Do not reuse on another window

    //Create the window, initialize GWLP_USERDATA, check for errors, register the window class, and hide the window

    //Create the windowclass for the button
    wc.cbSize        = sizeof (WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = SPanelProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon (hInstance, IDI_APPLICATION);
    wc.hCursor       = LoadCursor (hInstance, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = PanelClassName;
    wc.hIconSm       = LoadIcon (hInstance, IDI_APPLICATION);

    //If could not register window class
    if(!RegisterClassEx (&wc))
    {
        MessageBox (NULL, "Panel registration failed!", "Error!", MB_OK);
        PostQuitMessage (0);
        return;
    }

    //Create window
    child = CreateWindowEx (WS_EX_NOPARENTNOTIFY, PanelClassName, "TITLE_TEXT", WS_CHILD, 0, 0, 400, 200, parent, NULL, hInstance, NULL);

    //Check for error in window creation
    if (child == NULL)
    {
        MessageBox (NULL, "Panel creation failed!", "Error!", MB_OK);
        PostQuitMessage (0);
        return;
    }

    return;
}

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    WNDCLASSEX wc;
    HWND hWnd;
    MSG Msg;
    int length, width;

    //Register the window, create the window, and check for errors
    {
        //Window class
        wc.cbSize        = sizeof (WNDCLASSEX);
        wc.style         = 0;
        wc.lpfnWndProc   = MainWndProc;
        wc.cbClsExtra    = 0;
        wc.cbWndExtra    = 0;
        wc.hInstance     = hInstance; //Instance used to create the window
        wc.hIcon         = LoadIcon (hInstance, MAKEINTRESOURCE (IDI_CODERICON)); //Change here to change large application icon
        wc.hCursor       = LoadCursor (hInstance, IDC_ARROW); //Change here to change application cursor
        wc.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1); //Change here to change starting background color (white)
        wc.lpszMenuName  = NULL;
        wc.lpszClassName = Coder::Constants::MAINWNDCLASSNAME;
        wc.hIconSm       = (HICON)LoadImage (hInstance, MAKEINTRESOURCE (IDI_CODERICON), IMAGE_ICON, GetSystemMetrcs (SM_CXSMICON), GetSystemMetrics (SM_CYSMICON), 0); //Change here to change application icon (small, as in taskbar)

        //Register the window class so that the ClassName can be used to create the window and then check for error
        if (!RegisterClassEx (&wc))
        {
            MessageBox (NULL, "Main window registration failed!", "Error!", MB_OK);
            return 0;
        }

        //Get screen dimensions
        length = GetSystemMetrics (SM_CXSCREEN);
        width = GetSystemMetrics (SM_CYSCREEN);

        //Create window
        hWnd = CreateWindowEx (WS_EX_CLIENTEDGE, /*Border*/
            Coder::Constants::MAINWNDCLASSNAME,
            Coder::Constants::MAINWNDTITLETEXT, /*Title of window*/
            WS_OVERLAPPED | WS_SYSMENU | WS_MINIMIZEBOX | WS_THICKFRAME | WS_CLIPCHILDREN, /*Window style*/
            (length - Coder::Constants::XDEFAULT - Coder::Constants::XSHIFT) / 2, (width - Coder::Constants::YDEFAULT - Coder::Constants::YSHIFT) / 2, /*Top-left x and y coordinates*/
            Coder::Constants::XDEFAULT + Coder::Constants::XSHIFT, Coder::Constants::YDEFAULT + Coder::Constants::YSHIFT, /*Lengths and widths of window*/
            NULL, NULL, 
            hInstance, NULL);

        //Check for error in window creation
        if (hWnd == NULL)
        {
            MessageBox (NULL, "Main window creation failed!", "Error!", MB_OK);
            return 0;
        }
    }

    //Call function
            Init (hWnd);

    //Show and redraw the window
    ShowWindow (hWnd, nCmdShow);
    UpdateWindow (hWnd);

    //Put window in message loop
    while (GetMessage (&Msg, NULL, 0, 0) > 0) //While not terminated
    {
        TranslateMessage (&Msg);
        DispatchMessage (&Msg);
    }

    //Return
    return static_cast<int>(Msg.wParam);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T18:18:46.840

每个窗口过程都必须`DefWindowProc(hwnd,msg,wparam,lparam)`在每条消息上返回，但在`WM_ERASEBKGND`使用`WM_PAINT`自定义绘制过程时的消息除外（您必须返回 0，以便操作系统不会使用默认过程重新绘制窗口）

# sql - 检查上次数据库使用情况？

> ID：11105508
> 
> 赞同：1
> 
> 时间：2012-06-19T16:43:00.087
> 
> 标签：sql, sql-server, sql-server-2000

> **可能重复：**
> [如何确定特定 Sql Server 2000 数据库中任何记录的最后更改时间？](https://stackoverflow.com/questions/201990/how-can-i-determine-the-last-time-any-record-changed-in-a-specific-sql-server-20)

我的雇主要求我将所有当前使用的数据库从一台服务器迁移到另一台服务器，然后“归档”所有不再使用的数据库。

我遇到的问题是几乎没有文档说明哪些应用程序正在使用服务器上的哪些数据库，并且名称方案也没有太多约定。不幸的是，我们在这里“支持”了很多第三方软件，至少可以说，事情很混乱。

我想使用的方法是迁移在上个月左右看到交易的任何数据库，然后离线并备份其他数据库。

我遇到的问题是我不确定如何检查给定数据库上的活动？有什么我可以使用的东西来告诉我是否发生了什么事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:48:52.223

检查当前活动[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)非常好。但是，除了可能已经执行的任何日志记录之外，我担心这就是您所能做的。

但是我通常发现将可疑数据库设置为脱机通常会导致任何问题出现;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:51:50.287

不幸的是，在 SQL Server 2000 中，您对此无能为力。SQL Server 不会以一种方便的方式自行跟踪这一点，您只需运行查询即可。您可以设置一天或一周的服务器端跟踪，然后从跟踪中提取数据并按 database_id 分组，以查看在该期间哪些数据库被触及。

恕我直言，关闭访问权限并等待人们抱怨是错误的方式。首先，如果您拒绝访问关键数据库怎么办？仅在月底访问的数据库呢？如果唯一使用该数据库的人正在度假怎么办？如果您关闭访问并且可以相当快地重新打开它，这可能没问题，但我会非常小心这种方法。

在 SQL Server 2005 及更高版本中，您可以查询每个数据库中的 DMV，例如 sys.dm_db_index_usage_stats，它会告诉您最后一次用户搜索/扫描/更新。您还可以设置简单的审核。[我在这里写了一篇博客](https://sqlblog.org/2008/05/06/when-was-my-database-table-last-accessed)（尽管它现在可能对你没有帮助）。

# c# - EF 4 STE context.Refresh() 和 context.[Entity].Include("NavigationProperty") 之间的区别

> ID：11105514
> 
> 赞同：0
> 
> 时间：2012-06-19T16:43:20.257
> 
> 标签：c#, entity-framework, entity-framework-4

(1) 有人可以解释使用下面描述的两种不同方法执行数据访问之间的区别吗？

```
context.Refresh(RefreshMode.ClientWins, context.ParentEntity); 
```

和

```
return (from pe in context.ParentEntity select pe).ToList(); 
```

(2) 对于涉及子实体/导航属性的更复杂的示例，这两个调用之间是否存在根本区别：

```
context.Refresh(RefreshMode.ClientWins, context.ParentEntity);
context.Refresh(RefreshMode.ClientWins, context.ChildEntity); 
```

和

```
return (from pe in context.ParentEntity.Include("ChildEntities") select pe).ToList(); 
```

(3) 最后，我们有一些代码执行了这两种方法的组合：

```
context.Refresh(RefreshMode.ClientWins, context.ParentEntity.Include("ChildEntities")) 
```

当一种方法应该在另一种方法上使用时，或者它们在功能上都相同时，我试图让我的头脑清醒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:19:35.247

我认为您对`Refresh`和`Include`...有错误的想法

“`Refresh`具有双重目的，即允许使用来自数据源的数据刷新对象，并成为解决冲突的机制”（来自[MSDN](http://msdn.microsoft.com/en-us/library/bb896255.aspx)）

"`Include`指定要包含在查询结果中的相关对象。" （来自[MSDN](http://msdn.microsoft.com/en-us/library/bb738708.aspx)）

*所以要回答你的问题*，`Refresh`是一个无效的方法而不是一个查询......它用于管理并发和解决冲突......我不确定你是否试图从中获取结果，但我不能想象它工作得很好！

您的`(from pe in context...`语句是使用该方法的[LINQ](http://msdn.microsoft.com/en-us/library/vstudio/bb397926.aspx)查询，该`Include`方法（就像听起来一样）在查询结果中包含指定的对象。

Taking a look at the MSDN pages for the methods can usually help quite a bit when you're not sure what they are doing.

Hope this helped!

# javascript - Javascript 单例模式

> ID：11105521
> 
> 赞同：1
> 
> 时间：2012-06-19T16:43:50.380
> 
> 标签：javascript, javascript-objects

我不知道如何解释我面临的问题。我做了一个小片段。请检查以下内容：

```
var Package = {};

Object.defineProperty(Object.prototype, 'inherit',
    {
        value: function(Parent, args)
        {
            var temp = function(){};
            temp.prototype = Parent.prototype;
            this.prototype = new temp();
            this.uber = Parent.prototype;
            this.prototype.constructor = this;
        },
        enumerable: false
    });

var Module1 = Package.Module1 = function() {
  // code;
};
Module1.prototype.method1 = function() {
};

var Module2 = Package.Module2 = function() {
  // code;
};
Module2.prototype.method2 = function() {
};

var Module3 = Package.Module3 = function() {
  // code;
};
// using custom : object.prototype.inherit
// Module3 inherit Module1 and 2;
Module3.inherit(Module1);
Module3.inherit(Module2);
Module3.prototype.method3 = function() {
};

//creating object 
var mod = new Package.Module3();
mod.method1();
mod.method2();
mod.method3(); 
```

创建mod对象我可以访问method1,2和3。但实际上我想在不创建对象的情况下调用方法，例如Package.Module3.method1(); 这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:48:25.933

对象字面量表示法？

```
var Package = {
    ModuleA : {
        methodA : function(){},
        methodB : function(){}
    },
    ModuleB : {
        methodC : function(){},
        methodD : function(){}
    }
}

Package.ModuleA.methodA(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:50:29.583

尝试这样的事情：

```
var Module3 = Package.Module3 = (function() {       
   var Module3 = function(){
       // using custom : object.prototype.inherit
       // Module3 inherit Module1 and 2;
   };
   Module3.inherit(Module1);
   Module3.inherit(Module2);
   Module3.prototype.method3 = function() {
   };
   return new Module3();
})(); 
```

在这种情况下，您只有一个`Module3`类实例。

*用法*：

```
Package.Module3.method1();
Package.Module3.method2();
Package.Module3.method3(); 
```

# node.js - 具有相同文件名的nodejs gridfs grid.put（）覆盖文件

> ID：11105522
> 
> 赞同：0
> 
> 时间：2012-06-19T16:43:52.863
> 
> 标签：node.js, mongodb, gridfs

当我使用 grid.put() 将文件写入 GridFS 时，它与之前存储的文件具有相同的文件名，第一个文件将被覆盖。相同的文件名实际上只能在数据库中存在一次，还是我做错了什么？

我的代码如下所示：

```
var mongo = require('mongodb'),
  Server = mongo.Server,
  Db = mongo.Db,
  Grid = mongo.Grid;
  server = new Server('localhost', 27017, {auto_reconnect: true});
  db = new Db('mydb', server);

db.open(function(err, db) {
  var buffer = new Buffer("This is the first sample text");
  grid.put(buffer, {metadata:{}, filename: "test.txt", content_type: 'text'}, function(err, fileInfo) {
    buffer = new Buffer("This is the second sample text");
    // now this overwrites the first one...
    grid.put(buffer, {metadata:{}, filename: "test.txt", content_type: 'text'}, function(err, fileInfo) {
    });
  });
}); 
```

我认为该文件是由 ._id ObjectId 指定的，而不是由文件名指定的。我错了吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:36:18.833

根据[GridFS 规范](http://www.mongodb.org/display/DOCS/GridFS+Specification)，文件由 _id 索引。文件名是元数据的一部分，不必是唯一的。如果您两次放置具有相同文件名的内容，您应该能够通过在命令行中使用*mongofiles list来确认这两个文件是否存在。*

您使用的是哪个版本的 MongoDB Node.js 驱动程序？看起来几个月前纠正了一个驱动程序错误：[无法将具有相同文件名的文件保存到 GridFS](https://github.com/mongodb/node-mongodb-native/issues/531)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-19T21:54:47.663

是的，它们被覆盖了，就像在真实的文件系统上一样！这`_id`对于 MongoDB 内部（以及标准文档）是必不可少的，但是当您使用 GridFS 文件时，该`_id`字段并不重要，文件名必须是唯一的。

**另外**：当你这样做时，你期望得到什么`grid.get`？第一个文件？第二？两者结合？

# c++ - 我很困惑！C++ 中的字符、字符* 或字符串

> ID：11105526
> 
> 赞同：5
> 
> 时间：2012-06-19T16:44:06.323
> 
> 标签：c++, c-strings

当我使用 char 或 char* 时，Visual Studio 2012(11) 只会输出最后一个字符，例如：

```
#include <iostream>
#include <string>
int main(){
 using namespace std;
 char chName = 'Alex'; 
 cout<<chName;
} 
```

它只显示“x”。我使用的是正确的， `string strName = "Alex"` 但是在那些将参数作为字符的函数中，字符串不能作为参数传递。在这种情况下，VS 编译器说字符串不能转换为 int。还告诉我 char 和 char* 有什么区别。我是一名 PHP 开发人员，而 C++ 是如此令人困惑。请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T16:49:49.427

`char`一次只能保留 1 个字符；在这种情况下，它会保留您的最后一个字符，`'x'`. `char *`是指向一个或多个`char`对象的指针，如果读取正确，也可以用作字符串。所以设置

```
const char *chName = "Alex";
cout << chName; 
```

应该输出全名。

另一个问题是你对引用的使用。`'x'`表示 a `char`，而`"x"`表示 s 的数组`char`，称为字符串文字。

如果有一个函数需要你传递一个 char *，你可以传递

```
const char *param = "this is da parameter";
function (param); 
```

或者

```
std::string param = "da parameter"; //std::string is a type of string as well.
function (param.c_str ()); 
```

你也可以使用声明

```
char chName[] = "Alex"; 
```

这将创建一个 s 的本地数组`char`（即 5 `char`s，因为它在数组末尾附加了一个空字符）。所以，调用`chName[3]`应该返回`'x'`。这也可以流式传输以`cout`喜欢其他人

```
cout << chName; 
```

编辑：顺便说一句，你应该`int`在你的函数中返回一个`main ()`。喜欢`0`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T16:47:53.053

```
char chName = 'Alex'; 
```

这是错误的。这样，您从 Alex 创建了一个四字节整数，然后将其存储在 char 中——当然，它不适合单字节 char，所以只有它的不太重要的字节`x`被存储，然后输出。你需要使用

```
const char *chName = "Alex"; 
```

以获得正确的输出。

您的问题的替代方法：使用`std::string`，因为您在 C++ 中工作，但对于那些期望 a`char *`作为其参数的函数，请使用：

```
std::string str; // C++ string object
function_call(str.c_str()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T16:50:48.930

该`char`类型包含一个整数值，通常范围为 -128 到 127。它不是字符串类型。C 中的单引号用于字符文字，而不是字符串文字。`'Alex'`不一样`"Alex"`。

您使用的 char 文字语法：

```
char chName = 'Alex'; 
```

被称为多字符文字，它有一个实现定义的 type 值`int`。我熟悉的实现通过连接各个字符的值来构造它。所以 的值`'Alex'`可能是 A 0x41、l 0x6C、e 0x65、x 0x78 或`0x416C6578`。然后，当您将其分配给 char 时，它会被截断为最后一个字节（因为这是 char 可以容纳的所有字节），即 0x78，或与`'x'`.

是 C 中的`*`指针引用运算符，在声明指针时也使用它。所以`const char *chName = "Alex";`声明了一个指向 a`char`而不是单个的`char`指针，并且该指针将指向字符串文字的第一个字符`"Alex"`。所以你的程序可能看起来像：

```
#include <iostream>

int main(){
  const char *chName = "Alex"; 
  std::cout << chName;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T16:52:37.293

```
char chName = 'Alex'; 
```

是一个多字符文字，它是实现定义的。

```
_ C++ standard, §2.14.3/1 - Character literals _

An ordinary character literal that contains more than one c-char is a multicharacter     
literal . A multicharacter literal has type int and implementation-deﬁned value. 
```

而不是这个，你应该使用

```
const char *chPTR = "Alex"; 
```

或者

```
char chName[] = "Alex"; 
```

**char 和 char* 的区别**
ch 中`char ch;`是*char 变量*，可以存储单个 ascii 字符，而*指向 char*`char *ch;`的指针可以存储 char 变量的地址。

 ***char 和 String 之间的区别**
请参阅[此 SO 帖子](https://stackoverflow.com/questions/1287306/difference-between-string-and-char-types-in-c)。*

# c# - 无需重新查询数据库即可重新填充下拉列表的 ASP MVC 方法

> ID：11105528
> 
> 赞同：2
> 
> 时间：2012-06-19T16:44:10.630
> 
> 标签：c#, asp.net-mvc, drop-down-menu, validation

**问题**

我有一个视图模型列表。大多数视图模型都有一个下拉输入。当 ModelState 有效时，一切正常，我能够处理输入数据，但是当表单验证中发生错误时，一切都会变得一团糟，因为下拉菜单需要重新填充数据。这有点问题，因为每个视图模型都有不同的下拉列表。

**尝试的解决方案**

我可以认为每个视图模型并从数据库中获取相应的域模型，但这似乎不是很有效（特别是因为可能有大约 30 个字段，每个字段可能有不同的下拉列表！）。

如果表单验证失败，下拉菜单是否仍然存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:48:12.407

> 如果表单验证失败，下拉菜单是否仍然存在？

没有什么内置的。一种可能性是[`Cache`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)这些数据库调用的结果，以避免每次都命中它。因此，您只需拥有从缓存返回列表的方法，或者如果不存在查询数据库，则将结果列表存储到缓存并返回结果。然后，如果发生验证错误，您将调用这些方法来重新填充您的下拉列表。这是一种简单有效的方法，尤其是对于值不经常更改的下拉列表。

# java - 如何使用 Mysql JDBC 驱动连接 Android 和 MySQL

> ID：11105529
> 
> 赞同：10
> 
> 时间：2012-06-19T16:44:11.963
> 
> 标签：java, android, mysql

我想从 MySQL 中的表中获取数据并在 TextView 中显示它，但是当我尝试连接数据库时遇到了一些问题。
我正在使用适用于 Android 的 Eclipse，当我尝试在 Java Project 中从 MySQL 获取数据时它可以工作，但是当我使用 Android Project 时它不起作用。
有谁知道如何使用 MySQL JDBC 驱动程序将 MySQL 与 Android Project 连接起来？
或者给我其他建议如何将 Android 项目与 MySQL 连接？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T14:29:51.227

如果您想从 Android 连接到 Mysql 数据库，您只需要按照以下步骤操作：

*   下载驱动mysql-connector-java-3.0.17-ga-bin.jar
*   将其粘贴到您的 android 项目中的文件夹 libs 中。
*   单击 ConfigureBuildPath->add jar 以将 jar 包含到项目中。
*   现在您有了驱动程序，但您还需要在 androidManifest.xml 中为 INTERNET 授予权限。
*   使用下一个代码进行连接：

    ```
    try{
        Class.forName("com.mysql.jdbc.Driver").newInstance();
    }catch(Exception e){
        System.err.println("Cannot create connection");
    }
    try{
        connection = DriverManager.getConnection("jdbc:mysql://192.168.xx.xx:3306/dbname","root","password");
        Statement statement = connection.createStatement();

        String query = "SELECT column1, column2 FROM table1 WHERE column3 = ";
        query = query +"'" +variable+"'";           
        ResultSet result = statement.executeQuery(query);
    }catch(Exception e){
        System.err.println("Error");
    } 
    ```

建议：如果驱动程序实例没有给出任何错误，但连接出现异常，则应尝试从清单中删除 Target SDK 版本，因为某些版本会出现问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T18:13:20.090

Android 默认不支持 MySQL。它有一个内置的数据库，即 SQLite。如果您尝试远程访问 MySQL 数据库，您应该使用任何标准 Web 服务公开该数据库的接口。例如，您可以在使用 Java/PHP 等和 MySQL 连接器编写的服务器端创建 RESTful Web 服务。（您已经完成了！）您的 Android 应用程序可以使用使用此 Web 服务生成的 URL 与此服务通信。

同样，这个问题之前已经重复过，因此您可以检查这些解决方案。

# magento - Magento 将产品属性拉入 Adminhtml 订单项网格

> ID：11105530
> 
> 赞同：3
> 
> 时间：2012-06-19T16:44:16.310
> 
> 标签：magento, admin, adminhtml

我正在为 Magento 的管理员中的特定功能创建自定义模块。在 Adminhtml 网格中，我正在拉入订单项，但还需要拉入特定于每个产品的数据，因为它当前位于数据库中。

附件是我当前的 Adminhtml 网格的屏幕截图。 ![Adminhtml 网格](../Images/f127e6381ade4cea0fa8ac09d7ed4a44.png) 我需要将产品属性（品牌、风味等）作为附加列添加到网格中。我该怎么做呢？我尝试添加一个

```
$collection->join() 
```

在

```
_prepareCollection() 
```

函数，但无法确定要加入哪些确切的表（平面索引已打开）。

谢谢！标记

* * *

谢谢你的提示。不完全是我正在寻找的东西，因为我正在使用选择菜单处理 EAV 对象，但它很接近（upvoting）。

以下是我要添加的集合选择：

```
$collection->getSelect()->join('catalog_product_index_eav', '`catalog_product_index_eav`.`entity_id` = `main_table`.`product_id` AND `catalog_product_index_eav`.`attribute_id` = (SELECT attribute_id FROM eav_attribute WHERE attribute_code = "brand")', array('attribute_id'));
$collection->getSelect()->join('eav_attribute_option_value', '`eav_attribute_option_value`.`option_id` = `catalog_product_index_eav`.`value`', array('brand' => 'value')); 
```

我真的不需要`search`这个新品牌列的输入文本框中的功能，但是有人知道如何使它工作吗？收到此错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'brand' in 'where clause' 
```

我可以进去诊断，但我想有人可能会不以为然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:57:30.057

您将不得不找出要在联接中使用的表。

```
$collection->getSelect()->join('sales_flat_order_item', '`sales_flat_order_item`.order_id=`main_table`.entity_id AND `sales_flat_order_item`.parent_item_id IS NULL  ', null);

$collection->getSelect()->join('catalog_product_entity_varchar', '`catalog_product_entity_varchar`.attribute_id=144 AND `catalog_product_entity_varchar`.entity_id = `sales_flat_order_item`.`product_id`', array('models'  => new Zend_Db_Expr('group_concat(`catalog_product_entity_varchar`.value SEPARATOR ",")'))) 
```

资料来源： http: [//www.atwix.com/magento/customize-orders-grid/](http://www.atwix.com/magento/customize-orders-grid/)

# image - 使用 SVG 居中图像

> ID：11105534
> 
> 赞同：10
> 
> 时间：2012-06-19T16:44:25.343
> 
> 标签：image, svg

我的`.svg`文件中有以下图像：

```
<image xlink:href="developer.mozilla.png" x="50%" y="50%" height="62" width="71"/> 
```

我希望它显示在页面中间，但似乎左上角在中间。如何让图像的中心显示在页面的中心？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T09:28:09.783

像这样的东西应该工作：

```
<image xlink:href="developer.mozilla.png" x="50%" y="50%" height="62" width="71" transform="translate(-35.5,-31)"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T08:33:21.380

这是一种方法...

```
<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <svg x="50%" y="50%" width="258px" height="221px" overflow="visible"> 
    <image x="-129px" y="-110.5px" width="258px" height="221px" xlink:href="http://images2.wikia.nocookie.net/__cb20110303182948/hogwartsrpg/images/9/95/KittenCareCat.png"/>
  </svg>
</svg> 
```

# user-interface - 普通的 html 按钮而不是 Twitter Bootstrap 样式的按钮？

> ID：11105537
> 
> 赞同：1
> 
> 时间：2012-06-19T16:44:42.843
> 
> 标签：user-interface, twitter-bootstrap

我在 IE 9 中工作并想使用 Twitter Bootstrap。警告之一是方形按钮。从用户体验的角度来看，用户对此并不熟悉。在没有 Twitter Bootstrap 样式的情况下保持 html 按钮正常的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:52:02.453

如果按按钮，您的意思是以下元素：

```
<div class="btn">Button</div> 
```

然后你可以简单地覆盖样式：

```
<div class="btn" style="border-radius: 0px">Button</div> 
```

更优雅的解决方案是添加您自己的 CSS 类，例如`squared`：

```
div.squared {border-radius: 0px;} 
```

并改用它：

```
<div class="btn squared">Button</div> 
```

另请注意，为了跨浏览器兼容性，您可能需要添加特定于浏览器的 CSS，CSS 总数为：

```
div.squared {
    border-radius: 0px;
    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
} 
```

# regex - Linux命令行正则表达式

> ID：11105541
> 
> 赞同：0
> 
> 时间：2012-06-19T16:45:05.577
> 
> 标签：regex, macos, bash, shell

我想在目录中搜索以 .m 结尾的所有文件的字符串，例如 @"LBL_18989" @"LBL_15459" ，@"LBL_14359" ...

我的命令是：

```
find . type f -name \*.m | grep '@"LBL_[[0-9]"]+' 
```

但它没有给出预期的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:48:33.420

你应该总是引用你的论点。find 的 -name 模式包含一个“*”，这意味着 shell 在将其传递给 find 之前会尝试将其扩展为一个 glob。您还可以使用 -regex 而不是将 find 的输出通过管道传输到 grep。

```
find . -type f -regex '@"LBL_[[:digit:]"]+' 
```

根据 jdi 的评论，您可能需要在这些文件的内容中搜索给定的正则表达式。如果是这样，您可以使用以下内容：

```
find . type f -name '*.m' -exec grep -E '@"LBL_[[:digit:]"]+' /dev/null {} + 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:48:35.350

你的代码为我运行。但是，您在问题中陈述的正则表达式将匹配的不仅仅是示例列表中的文件名。如果您要查看文件名是否需要名称验证，这可能是一个问题，因为有些人会验证确实不需要。你的正则表达式模式

grep '@"LBL_[[0-9]"]+'

还匹配文件名，例如

1.  @"LBL_"
2.  @“LBL_2”
3.  @"LBL_3"3"
4.  @"LBL_"4

如果您的列表确实具有代表性，我会改为使用

grep '@"LBL_[[0-9]]+"'

并将引号字符移动到模式末尾的加号之后。您可以使用 grep，也许这就是您的用例，但是如果您使用 egrep 或 grep 和 -E 开关，您可以使用 [[:digit:]] 类。POSIX.2 不赞成使用破折号字符的括号表达式中的范围。来自 POSIX 规范：“范围非常依赖于排序序列，可移植程序应避免依赖它们。”

# java - 带有套接字的 DataInputStream... 缺少字节？

> ID：11105544
> 
> 赞同：2
> 
> 时间：2012-06-19T16:45:11.563
> 
> 标签：java, multithreading, sockets, byte

在我的项目中，我使用`DataOutputStream`and`DataInputStream`使用带有线程的套接字发送和接收字节。

**客户**

```
public void run(){
    while(isRunning) {//which is true upon connection of the socket to the server
         if(scanner.hasNext()){ // I use a scanner to test the program
             dos = new DataOutputStream(new OutputStream(socket.getOutputStream));

             byte[] toServer = scanner.next().getBytes();
             dos.writeInt(toServer.length);
             dos.write(toServer);
         } 
    }
} 
```

**服务器**

```
public void run(){
    while(isRunning){
        if(scanner.hasNext()){
              dis = new DataInputStream(new InputStream(socket.getInputStream));    
              int arrLength = dis.readInt();

              byte[] fromClient = new byte[arrLength];
              dis.read(fromClient, 0, fromClient.length);
              System.out.println("Your string is: " + new String(fromClient));
        }
    }
} 
```

问题是，当我`new String(fromClient)`在服务器端打印出来时，单词/句子的第一个字符总是丢失。当我在客户端输入单词`"Test"`时，服务器会打印出`"est"`. 但是当我输入`" Test"`（开头有一个空格）时，服务器会打印出`"Test"`. 我不明白怎么了？我的字节转换有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:27:43.000

下面的代码对我有用。鉴于帖子中的拼写错误，我怀疑这不是正在运行的实际代码，而是一个近似值，并且这是真实代码中的错误。这里有一些东西要寻找：

*   如果你有一个`dis.readByte();`after `readInt()`call，那显然会切断主角。确保您的写入和读取完全对称。还要确保您的流链是对称的。

*   如果您从另一个类获取流，请确保它本身没有执行任何读取方法。

*   当前的帖子正在做一个`new InputStream()`(and `OutputStream`)，因为它们是抽象的，所以不会编译。如果那里有缓冲，则需要确保`dos.flush();`. 然而，这会导致挂起而不是部分输入。

* * *

```
String file = "/tmp/x";
DataOutputStream dos = new DataOutputStream(new FileOutputStream(file));

String inputString = "Test";
byte[] toServer = inputString.getBytes();
dos.writeInt(toServer.length);
dos.write(toServer);

DataInputStream dis = new DataInputStream(new FileInputStream(file));
int arrLength = dis.readInt();

byte[] fromClient = new byte[arrLength];
dis.read(fromClient, 0, fromClient.length);
// works fine for me
assertEquals(inputString, new String(fromClient)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:31:57.867

您应该使用 readFully() 而不是 read()，并且您不应该为每次读取或写入都重新构建流。在套接字的生命周期中使用相同的流。另外扫描仪连接到什么？如果它连接到套接字，它将使用其中的数据。

# c# - 将 int* 编组为 C#

> ID：11105549
> 
> 赞同：6
> 
> 时间：2012-06-19T16:45:18.010
> 
> 标签：c#, c++, marshalling

我在 C++`void someFunc(char* arg1, int* arg2)`中有一个函数，我想在 C# 中使用这个函数时对参数进行编组（在导入 DLL 之后）..

你能告诉我我应该如何编组，因为我在这里很困惑。

```
[DllImport(Dllname)]
extern void someFunc([MarshallAsAttribute(UnmanagedType,LPStr)] string arg1, IntPtr arg2); 
```

我应该在这里使用 IntPtr 吗？我不能从 C# 传递任何 int 变量的地址，以便它会落在 C++ 的指针中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T16:48:29.270

问题是`int*`可以用于 C 中的许多不同场景。如何编组这取决于它的`int* arg2`含义。

例如，如果它只是设置一个 int 值，您可以将其编组为`ref int`. 但是，如果`int*`表示一个数组，您将需要传递一个数组（但这不太可能，因为没有长度项，这在通过指针使用数组时很常见）。

# css - 如何通过附加/前置获取输入以与 twitter bootstrap 匹配宽度

> ID：11105550
> 
> 赞同：14
> 
> 时间：2012-06-19T16:45:22.223
> 
> 标签：css, twitter-bootstrap

有没有办法让具有附加和/或前置的输入都具有匹配的宽度？

这是一个示例，但您可以看到，给定多个带有不同长度的附加/前置的输入，最终都会有不同的宽度，并且看起来不太好。

[http://jsfiddle.net/PLkfq/1/](http://jsfiddle.net/PLkfq/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:47:42.483

你可以使用 jQuery：

```
$(document).ready(function(){
 var normal_width = $("#service_name").width();
 var add_on = $(".add-on").width();
 var after_width = normal_width-add_on+3;
 $("#service_duration").width(after_width);
}); 
```

通过这种方法，您可以为输入设置任何大小

[http://jsfiddle.net/PLkfq/25/](http://jsfiddle.net/PLkfq/25/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:41:55.170

如果您想精确到像素，请忘记类并将样式应用于 id

为分钟跨度添加一个 id

```
<span id="minutes" class="add-on">minutes</span> 
```

并使用这一点 css

```
#service_name{width:200px;}
#service_duration{width:130px;}
#minutes{width:70px;} 
```

[http://jsfiddle.net/baptme/PLkfq/4/](http://jsfiddle.net/baptme/PLkfq/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T14:58:11.677

不要在附加输入上定义类 span1，而是尝试使用 input-medium。输入宽度是统一的，但附加标签会随着内容大小而变化，这看起来不错。如果你不喜欢这样，你可以在附加类上设置一个 min-width 以使它们都具有相同的大小。

[http://jsfiddle.net/PLkfq/40/](http://jsfiddle.net/PLkfq/40/)

```
<div class="container-fluid">
<div class="span12">
    <div class="row-fluid">
        <form class="form-horizontal">
            <fieldset>

              <div class="control-group string required">
                <label class="string required control-label" for="service_name">
                  <abbr title="required">*</abbr> Service name</label>
                  <div class="controls">
                    <input class="string required" id="service_name" name="service[name]" size="50" type="text">
                  </div>
              </div>

              <div class="control-group integer required">
                <label class="integer required control-label" for="service_duration">
                  <abbr title="required">*</abbr> Duration</label>
                  <div class="controls">
                    <div class="input-append">
                      <input class="numeric integer required input-medium" id="service_duration" name="service[duration]" type="text"><span class="add-on">minutes</span>
                    </div>
                  </div>
              </div>
                  <div class="control-group integer required">
                <label class="integer required control-label" for="service_sec">
                  <abbr title="required">*</abbr> Seconds</label>
                  <div class="controls">
                    <div class="input-append">
                      <input class="numeric integer required input-medium" id="service_sec" name="service[sec]" type="text"><span class="add-on">sec</span>
                    </div>
                  </div>
              </div>
            </fieldset>
        </form>
    </div>
</div> 
```

# php - ORDER BY 提取数组中的某个序列

> ID：11105552
> 
> 赞同：0
> 
> 时间：2012-06-19T16:45:34.700
> 
> 标签：php, mysql

所以我有一个查询，用于条形图中的标签。我在 PHP 中使用 fetch_array 提取这些标签。标签顺序应为：

白人、非裔美国人、西班牙裔等。

但是一旦我们按 asc 或 desc 进行任何类型排序，它们就会按字母顺序排列，例如

非裔美国人、西班牙裔、白人。有没有办法按一定的顺序专门订购这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:47:51.427

使用`CASE`语句来指定您的排序顺序。它将为该值分配 0，`White`为所有其他值分配 1，然后按字母顺序对剩余的值进行排序。

```
ORDER BY
  CASE WHEN label='White' THEN 0 ELSE 1 END,
  label ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:48:00.213

您应该在别处定义订单（因为您的订单是自由形式的，您不能依赖自动解决方案）。一个技巧可能是`myorder`在表中添加一个字段，因此您可以`ORDER BY myorder`在查询中指定：

```
 id  desc      myorder
 ..  ......... ..........
 1   Hispanic  3
 2   White     2
 3   African-  1 
```

这种方法的一个优点是它是可重用的，您可以编辑软件方式的订单（如果您需要这种特定类型的选项）并适用于任意数量的行。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-19T16:47:09.077

在 mysql 中，您可以使用[字段函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)进行自定义排序顺序。例如：

```
SELECT * FROM GraphTable ORDER BY FIELD(GraphLabel, 'White', 'African American', 'Hispanic') 
```

或通过 id：

```
SELECT * FROM GraphTable ORDER BY FIELD(LabelID, 123, 456, 234); 
```

从mysql手册：

> 场（str，str1，str2，str3，...）
> 
> 返回 str1, str2, str3, ... 列表中 str 的索引（位置）。如果未找到 str，则返回 0。

# c# - Windows phone 7 导航同步

> ID：11105555
> 
> 赞同：0
> 
> 时间：2012-06-19T16:45:50.317
> 
> 标签：c#, windows-phone-7

在 Windows Phone 7 C# 中，我需要显示一个页面，当页面执行 NavigationService.GoBack() 时，执行一些代码：

```
Save();
NavigationService.Navigate(new Uri("/Add.xaml", UriKind.Relative));
Reload(); 
```

但是 Reload() 它是在页面显示时执行的！如何让程序等待页面关闭以运行 Reload()？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:34:07.617

最好的方法是使用 OnNavigatedTo 方法。

```
override void OnNavigatedTo(NavigationEventArgs e)
{
    if(e.NavigationMode == NavigationMode.Back)
    {
        Reload();
    }
} 
```

# ruby - 当应用程序关闭时，我在 Sinatra 中要执行的代码放在哪里？

> ID：11105556
> 
> 赞同：9
> 
> 时间：2012-06-19T16:45:51.073
> 
> 标签：ruby, sinatra

我正在为我的网络应用程序使用 Sinatra。我有一些清理代码要在我的应用程序关闭时执行。在 Sinatra 中是否有这个钩子，还是我必须使用单独的机制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T16:53:32.657

查看[Kernel#at_exit](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-at_exit)，如果您在主应用程序文件的某处定义这样的块，我不明白为什么它不应该在 Sinatra 应用程序中工作。

**更新：**根据马特的评论，您必须`at_exit`在需要 Sinatra 之前定义您的处理程序。

# mysql - MySQL 查询 - 连接表以显示一个表中的所有值，并且仅在另一列中匹配结果

> ID：11105557
> 
> 赞同：1
> 
> 时间：2012-06-19T16:45:56.813
> 
> 标签：mysql, join

为糟糕的问题标题道歉。

我有两张表，jobs 和 Persons-Jobs。

**工作表**

```
1    Painting

2    Plumbing

3    Executive

4    CraneOperator 
```

**人员-工作表**

```
JohnSmit   Painting

JohnSmit   CraneOperator

TomJones   Executive

BradPit    Plumbing 
```

**问题**

我想运行一个返回两列的查询。第一列必须显示作业表中的所有记录。第二列必须显示从事这项工作的人的姓名。我想要一个只返回一个用户的结果的 where 子句，在这个例子中是 JohnSmit。例如，查询应输出：

```
 Painting   JohnSmit

    Plumbing   *NULL*

    Executive  *NULL*

CraneOperator  JohnSmit 
```

我已经尝试过外部连接，但是在 Persons-Jobs 表中有多个人的情况下它会失败。

```
select j.job,p.person 
from jobs j 
LEFT OUTER JOIN `Persons-Jobs` p on j.job = p.job
where p.person='JohnSmit' 
or p.person is NULL 
```

任何帮助，一如既往的感激。

谢谢和问候， Smudger

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:51:12.017

您可以在 join 子句中对人员进行限制。这样，其他人将在加入发生之前被过滤掉。

```
select j.job,p.person 
from   jobs j 
LEFT 
JOIN   `Persons-Jobs` p 
on     j.job = p.job 
and    p.person='JohnSmit' 
```

# apache - 子域上的 CakePHP

> ID：11105560
> 
> 赞同：1
> 
> 时间：2012-06-19T16:46:26.483
> 
> 标签：apache, cakephp, cakephp-1.3

我有一个内置 cakePHP (1.3) 的网络应用程序现在可以正常工作了一段时间。客户想要内置一堆新特性/功能，所以我在我的开发环境中完成了所有这些。我要求主机设置“staging.domain.com”，以便我可以上传代码并让客户审核。它在同一个盒子上，`/var/www/staging`而不是真正的应用程序上`/var/www/html`

这是问题所在：没有一个 css/js/images 被拉入。

`mod_rewrite`已打开（选中）并且所有定义的路径似乎都是正确的，并且 app/tmp 目录的权限设置为 777。我很难过。这可能是我缺少的一些简单的东西。

可以肯定的是，我在我的`default.ctp`布局文件中重复了一些定义（所以如果它拉动蛋糕就可以工作）。

```
APP_DIR - app
ROOT - /var/www/staging
WEBROOT_DIR - webroot
WWW_ROOT - /var/www/staging/app/webroot/
CAKE_CORE_INCLUDE_PATH - /var/www/staging

Server[DOCUMENT_ROOT] => /var/www/staging 
```

这是我的`apache_get_modules`

```
Array ( [0] => core [1] => prefork [2] => http_core [3] => mod_so 
[4] => mod_auth_basic [5] => mod_auth_digest [6] => mod_authn_file 
[7] => mod_authn_alias [8] => mod_authn_anon [9] => mod_authn_dbm 
[10] => mod_authn_default [11] => mod_authz_host [12] => mod_authz_user 
[13] => mod_authz_owner [14] => mod_authz_groupfile [15] => mod_authz_dbm 
[16] => mod_authz_default [17] => util_ldap [18] => mod_authnz_ldap 
[19] => mod_include [20] => mod_log_config [21] => mod_logio [22] => mod_env 
[23] => mod_ext_filter [24] => mod_mime_magic [25] => mod_expires 
[26] => mod_deflate [27] => mod_headers [28] => mod_usertrack 
[29] => mod_setenvif [30] => mod_mime [31] => mod_dav [32] => mod_status 
[33] => mod_autoindex [34] => mod_info [35] => mod_dav_fs 
[36] => mod_vhost_alias [37] => mod_negotiation [38] => mod_dir 
[39] => mod_actions [40] => mod_speling [41] => mod_userdir [42] => mod_alias 
[43] => mod_substitute [44] => mod_rewrite [45] => mod_proxy 
[46] => mod_proxy_balancer [47] => mod_proxy_ftp [48] => mod_proxy_http 
[49] => mod_proxy_ajp [50] => mod_proxy_connect [51] => mod_cache 
[52] => mod_suexec [53] => mod_disk_cache [54] => mod_cgi [55] => mod_version 
[56] => mod_perl [57] => mod_php5 [58] => mod_python [59] => mod_ssl ) 
```

有人遇到过这个吗？

* * *

更新：为每个请求添加 app_controller.php 代码。

```
class AppController extends Controller {
    var $components = array ('Session','SparkPlug.Authsome' => 
    array('model' => 'User'));
    var $uses = array('SparkPlug.UserGroup');

    function beforeFilter() {
        parent::beforeFilter();
        SparkPlugIt($this);
        $this->set('user',$this->Authsome->get());

        $user = $this->Authsome->get();
        $notificationOptions = array(
            'conditions' => array(
                'User.id' => $user['User']['id'],
            ),
            'fields' => 'phone',
        );
        $notifications = $this->User->find('first',$notificationOptions);
        $notificationItems = count(json_decode($notifications['User']['phone']));
        $this->set('notificationItems',$notificationItems);

    }
} 
```

* * *

## 更新

感谢那些为我研究这个问题的人。刚刚收到我的系统管理员发来的一封电子邮件，说他在配置中打错了：-/ 之后去检查它，是的，现在一切正常。没有多少编码可以解释这一点。当您无法直接访问服务器时，您必须依赖其他人。无论如何，也许这个问题有一天会对其他人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:11:01.063

如果我是你，我会在 /var/html/staging/ 目录中创建一个单独的 APP 实例 - 并编辑 /app/webroot/index.php 中的路径定义以指向 /var/www/ 中的蛋糕核心html/蛋糕。

然后，您可以根据需要根据您的喜好定制该 APP 目录。

请注意，这纯粹是出于代码审查的目的。在任何情况下，您都不应该将核心代码上传到生产环境进行测试！

# mercurial - 将 mercurial 存储库转换为具有完整历史记录的子存储库（如 hg log -f）

> ID：11105567
> 
> 赞同：6
> 
> 时间：2012-06-19T16:46:44.983
> 
> 标签：mercurial

最近我将我的 mercurial 存储库中的一些文件移动到一个子目录（作为一个模块）以保持一切整洁。几天后，我发现我在另一个项目中需要该模块，所以我试图将它转换为它自己的 mercurial 存储库。

我面临的问题是新的存储库历史记录不完整，它只包括重命名后的文件历史记录。我得到的历史与执行相同`hg log filename`，我想要的是拥有文件的完整历史，比如`hg log -f filename`.

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:57:36.887

我假设你有这样的结构：

```
main.c
lib1.c
lib2.c 
```

您重命名了文件并得到如下内容：

```
main.c
lib/lib1.c
lib/lib2.c 
```

你现在想要这样的东西作为你的`lib`存储库：

```
lib1.c
lib2.c 
```

我假设这是最后一部分，因为当您将其作为子存储库包含时，它看起来就像您的原始存储库在重命名后所做的那样。

我会分几个阶段来做这件事。

第一阶段是按照您可能已经做过的那样做。使用命令行`hg convert --filemap LibTempMap.txt Main LibTemp`和以下内容转换存储库`LibTempMap.txt`：

```
exclude *
include lib
rename lib . 
```

这为您提供了一个存储库，其中包含重命名后的历史记录。

第二阶段是使用命令行转换重命名之前的存储库`hg convert --rev X --filemap LibMap.txt Main Lib`（其中 X 是重命名之前的修订版）和以下内容`LibMap.txt`：

```
exclude *
include lib1.c
include lib2.c 
```

这为您提供了一个存储库，其中包含重命名之前的历史记录。

然后，我会将以后的更改从文件夹中移植到使用（在`LibTemp`存储`Lib`库**中****重**命名后的修订版在哪里）。这应该干净地移植，因为您通过在转换期间进行重命名确保临时存储库中的文件结构相同。`hg transplant -s ..\LibTemp Y:tip``Lib``Y`**`LibTemp`**

然后，您将获得`Lib`包含您想要的历史记录和文件的存储库，并且可以删除该`LibTemp`存储库。

# ios - 为什么在输出到文件时需要在 Brad Larson 的 GPUImage 框架中使用屏幕外缓冲区

> ID：11105568
> 
> 赞同：1
> 
> 时间：2012-06-19T16:46:46.637
> 
> 标签：ios, opengl-es, framebuffer, renderer

布拉德，我在您的 GPUImage 框架中看到，您有一个名为movieFrameBuffer 和movieRenderBuffer 的屏幕外帧和渲染缓冲区，定义在GPUImageMovieWriter.m 文件中。有什么需要声明离屏帧缓冲区。你不能使用 GPUImageView.m 中定义的缓冲区来抓取像素吗？是720P和1080P支持的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:39:03.547

虽然在 GitHub 项目页面或我的论坛上可能会更好地问这个问题，但我这样做有一个有趣的原因，我想我会澄清一下。

在测试 AVAssetWriter 时，我发现使用 BGRA 帧显着提高了编码性能。因此，当使用 抓取帧时`glReadPixels()`，我需要对传入的过滤帧应用颜色混合着色器，以便以 BGRA 颜色格式读取它们。这是使用屏幕外帧缓冲区呈现的。

在 iOS 5.0 上，我使用纹理缓存来避免需要使用`glReadPixels()`. 因为在 iOS 设备上内部纹理颜色格式是 BGRA，所以不需要颜色混合。但是，我仍然通过一个简单的直通着色器运行这些过滤后的帧，并将它们输出到屏幕外 FBO，以防直到该点的过滤器链以不同的分辨率呈现。这允许您以一种分辨率录制电影，并以另一种分辨率显示或执行其他操作。

作为一项优化，我希望在输入图像大小与输出电影编码大小匹配的情况下消除直通渲染步骤。这将需要对过滤器架构进行一些工作，因此可能暂时不会发生。

# objective-c - 如何创建项目外壳

> ID：11105570
> 
> 赞同：1
> 
> 时间：2012-06-19T16:46:59.927
> 
> 标签：objective-c, ios, xcode

我正在尝试构建一个基于 iOS 的项目，该项目具有基本功能，并且可以在未来用作创建其他应用程序的基础（例如，具有 API 功能、Facebook 登录等）。有什么想法可以在 XCode 中进行设置吗？现在我遇到了项目名称等在项目之间保持不变的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:53:34.080

您必须创建自定义项目模板。我应该警告您，在 Xcode 4 中创建自定义项目模板很困难并且没有很好地记录。以下文章包含有关创建自定义项目模板的更多信息：

[创建自定义 Xcode 4 项目模板](http://meandmark.com/blog/2011/12/creating-custom-xcode-4-project-templates/)

# iphone - 在 iOS 中为我 已经本地化的应用程序构建 FIXED 语言版本？

> ID：11105572
> 
> 赞同：0
> 
> 时间：2012-06-19T16:47:03.593
> 
> 标签：iphone, ios, xcode, ipad, localization

我的应用程序已经支持使用自定义图像和 .strings 进行英语和法语本地化。但是，如何构建和存档我的应​​用程序的版本，该版本固定为英语或法语，而无需手动更改我的图像和 .strings 文件？

因此，无论用户在他或她的手机上使用什么语言，应用程序都必须保持该固定语言。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:46:16.487

我相信您可以从 XCode 目标设置中删除本地化语言，而无需删除实际文件。请参阅此相关问题的答案：[强制将特定本地化用于目标](https://stackoverflow.com/questions/10486374/force-a-specific-localization-to-be-used-for-a-target/10495375#10495375)

# makefile - makefile 的错误检查行为

> ID：11105577
> 
> 赞同：5
> 
> 时间：2012-06-19T16:47:22.180
> 
> 标签：makefile, return-value

如果我的程序必须针对不同的结果（主要是错误）返回不同的值（例如 0、1、2、3 等），则调用该程序的 makefile 将不得不停止执行其余的 makefile 命令。即使该命令产生错误（返回非零值），是否有办法继续执行生成文件？

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:47:18.167

```
mycommand; test $? -gt 3 
```

根据需要更改测试。我不认为使用`-`or`-k`是一个好主意，因为它会停止`make`检测错误。

请注意，在生成文件中时，这 2 个命令必须位于同一行。

*在评论反馈后添加：* 您还可以执行以下操作，以允许您在对错误做出反应之前无条件地运行后续命令：

```
mycommand; status=$PIPESTATUS; follow-on-command && test $status -gt 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T20:38:09.420

要测试我知道将返回非零退出代码的命令，我使用如下：

```
test: mybadcommand
    mybadcommand; test $$? -eq 1 
```

这测试 mybadcommand 返回 1 退出值。请注意，在 Makefiles 中，您**需要**转义指向退出状态的 shell 变量，因为在 make $? 表示比目标更新的依赖项。

因此，在上面的代码片段中，小心使用**$$?** 而不是 $?。

# java - 在java中使用正则表达式提取字符串

> ID：11105579
> 
> 赞同：-1
> 
> 时间：2012-06-19T16:47:24.547
> 
> 标签：java

我需要帮助才能使用以下字符串中的正则表达式在 JAVA 中提取 2 个字符串：

```
"Batch job <jobid> <jobtype> success" 
```

我需要取出jobid和job type。当我将字符串从 get() 方法放入 String 对象时，我得到`<`替换为`&lt`; 这是字面意思。

如何编写正则表达式以从我的字符串中提取 jobid 和 jobtype？字符串应该没有`<>`.

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:55:04.997

好吧，给我们一个样本并不能说明格式中可能存在什么差异。所以让我们假设它真的很严格：这两个字段总是被“批处理作业......成功”包围并用空格分隔。那么一个正则表达式可能如下所示：

```
Pattern pattern = Pattern.compile("Batch job (.*) (.*) success");
Matcher matcher = pattern.matcher(log);
if (matcher.matches()) {
    String jobId = matcher.group(1);
    String jobType = matcher.group(2);
    //...
} 
```

如果格式有更大的灵活性，那么您需要设计更精确的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:56:58.510

尝试使用`/<(.*?)>/`do ....

```
Pattern patt = Pattern.compile("/<(.*?)>/");
Matcher matc = patt.matcher("Batch job <jobid> <jobtype> success");
if (matc.matches()) {
    String jobid = matc.group(1);
    String jobtype = matc.group(2);
} 
```

2个字符串`jobid`and`jobtype`将包含 and 之间的字符串`<`（`>`不包括`<`and `>`）

# wpf - 如何在 Bing 地图中的多边形颜色之间进行插值

> ID：11105585
> 
> 赞同：0
> 
> 时间：2012-06-19T16:47:57.680
> 
> 标签：wpf, colors, bing-maps, polygon, interpolation

我有一个带有 Bing 地图 API 的 WPF 应用程序。我所拥有的是在许多国家/地区进行的多边形渲染以及正在显示的实时统计数据。我用它来跟踪我的服务器流量主要来自哪里。该项目进展顺利，但我遇到了一个小障碍。我所拥有的是从绿色变为红色的多边形，如果统计数据发生变化，反之亦然。如果有人注销，那么它会变成绿色，如果有人登录，它就会变成红色。我想做的是给定一组用户，比如说 20 个，我可以在一秒钟内逐渐改变颜色。

例如，0 为绿色，20 为红色。所以 10 会是黄色的。有了这个，有没有办法逐渐改变颜色？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:59:12.820

可能有一种奇特的方式来做您在 xaml 中寻找的东西，但我想将多边形的颜色绑定到您的视图模型/代码隐藏中的属性然后更新颜色会容易得多必要时。

对于颜色插值，这里有另一个 SO[问题](https://stackoverflow.com/questions/790699/wpf-color-interpolation)。

# ruby-on-rails - 正确的 Rails 关联设置

> ID：11105591
> 
> 赞同：0
> 
> 时间：2012-06-19T16:48:10.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我设置了一个提醒服务，通过电子邮件发送与个人兴趣和城市相关的交易。基本上，用户输入重要日期（朋友生日、周年纪念日等）和那个特别的人的兴趣。

我想根据 1）用户所在城市和 2）相关人员的兴趣向他们发送交易

我应该如何为 Deal 模型设置关联？

到目前为止我有什么..

```
class User < ActiveRecord::Base
belongs_to :city
has_many :person_interests, :as => :person
has_many :interests, :through => :person_interests

end

class City < ActiveRecord::Base
 attr_accessible :name 
  belongs_to :province
  has_many :users
end

class PersonInterest < ActiveRecord::Base 
  belongs_to :interest
  belongs_to :person, :polymorphic => true  
end

class Interest < ActiveRecord::Base
  has_many :person_interests
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:45:08.640

如果一笔交易可能适用于多个利益，您可以从以下内容开始：

```
class Deal < ActiveRecord::Base 
  belongs_to :interests
  belongs_to :city
end

class City < ActiveRecord::Base
 attr_accessible :name 
  belongs_to :province
  has_many :users
  has_many :deals
end

class Interest < ActiveRecord::Base
  has_many :person_interests
  has_many :deals
end 
```

然后你可以做类似的事情

```
@relevant_deals = @city.deals.where(:interest_id => 'abc') 
```

或者

```
@relevant_deals = @interest.deals.where(:city_id => 'def') 
```

# asp.net - “ascx”用户控件可以包装内容吗？

> ID：11105595
> 
> 赞同：1
> 
> 时间：2012-06-19T16:48:27.573
> 
> 标签：asp.net, .net-4.0, asp.net-4.0

我正在尝试创建一个 ascx 控件，它可以像面板一样包装内容。我想做类似的事情 -

```
<%@ Register TagPrefix="FOO" TagName="Section" Src="CollapsibleSection.ascx" %>
    <Foo:Section runat="server">
        [ Section of asp.net webforms page ]
    </Foo:Section> 
```

自从我完成网络表单以来已经有一段时间了，不记得这是否可行？虽然我可以编写一个完全自定义的控件，但如果可能的话，我的应用程序有很多优点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:50:56.227

你需要装饰你的用户控件[`TemplateContainerAttribute`](http://msdn.microsoft.com/en-us/library/system.web.ui.templatecontainerattribute.aspx)并继承自[`INamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T16:56:02.753

这称为模板化控件。

这是一个简单的教程，解释了如何在 C# 和 VB.Net 中完成此操作： [How to: Create Templated ASP.NET User Controls](http://msdn.microsoft.com/en-us/library/36574bf6.aspx)

引用自 MSDN（上面的链接）：

> 1.  在 .ascx 文件中，在您希望模板出现的位置添加一个 ASP.NET PlaceHolder 控件。
> 2.  在用户控件的代码中，实现 ITemplate 类型的属性。
> 3.  将实现 INamingContainer 接口的服务器控件类定义为在其中创建模板实例的容器。这称为模板的命名容器。
> 4.  将 TemplateContainerAttribute 应用于实现 ITemplate 的属性，并将模板命名容器的类型作为参数传递给属性的构造函数。
> 5.  在控件的 Init 方法中，重复以下步骤一次或多次：
>     *   创建命名容器类的实例。
>     *   在命名容器中创建模板的实例。
>     *   将命名容器实例添加到 PlaceHolder 服务器控件的 Controls 属性。

# asp.net-mvc-3 - MVC3 下拉列表值没有填充在编辑器模板中

> ID：11105597
> 
> 赞同：0
> 
> 时间：2012-06-19T16:48:33.177
> 
> 标签：asp.net-mvc-3, data-binding, drop-down-menu

我有一个带有下拉菜单的编辑器模板：

```
 @Html.DropDownListFor(m => m.AdmissionState, new List<SelectListItem>()
                                                   {
                                                       new SelectListItem()
                                                           {
                                                               Text = "1",
                                                               Value = "1"
                                                           },
                                                       new SelectListItem()
                                                           {
                                                               Text = "2",
                                                               Value = "2"
                                                           },
                                                       new SelectListItem()
                                                           {
                                                               Text = "3",
                                                               Value = "3"
                                                           },                   
                                                   }, "- Select -") 
```

我从视图中调用它：

```
@Html.EditorFor(m => m.Licenses) 
```

在控制器中，我有以下代码：

```
profile.Licenses.Add(new AttorneyLicenseModel()
        {
            AdmissionDate = "06/14/2012",
            AdmissionState = "2",
            AdmissionNumber = "asd",
        });
        profile.Licenses.Add(new AttorneyLicenseModel()
        {
            AdmissionDate = "07/16/2012",
            AdmissionState = "5",
            AdmissionNumber = "qwe",
        }); 
```

对于每个许可证，我都看到了从模型中填充数据的字段，但下拉列表中没有 - 选中了默认值。我究竟做错了什么？当然，带有值的代码非常简化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:53:21.717

试试这样：

```
@Html.DropDownListFor(
    m => m.AdmissionState, 
    new SelectList(
        new[] 
        {
            new { Value = "1", Text = "1" },
            new { Value = "2", Text = "2" },
            new { Value = "3", Text = "3" },
        }, 
        "Value", 
        "Text", 
        Model.AdmissionState
    ),
    "- Select -"
) 
```

如果您有兴趣了解为什么我的代码有效而您的代码无效，您可以阅读我昨天为类似问题提供的以下答案：[ASP.NET MVC DropDownListFor not selection value from model](https://stackoverflow.com/questions/11042660/asp-net-mvc-dropdownlistfor-not-selecting-value-from-model/11045737#11045737)

# c# - 使用 XmlReader 读取属性值

> ID：11105603
> 
> 赞同：22
> 
> 时间：2012-06-19T16:48:54.797
> 
> 标签：c#, xml, xmlreader

我有一个我试图从[这里](http://www.newyorkfed.org/markets/seclend/xml/v3_0/secLendingXML.cfm)读取的 XML 文件，并且有以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.IO;

namespace XML
{
    class Program
    {
        static void Main(string[] args)
        {
            XmlTextReader textReader = new XmlTextReader("secLendingXML.cfm.xml");
            while (textReader.Read())
            {
                switch (textReader.NodeType)
                {
                    case XmlNodeType.Element:
                        Console.WriteLine(textReader.Name);
                        Console.WriteLine(textReader.Value);
                        break;
                    case XmlNodeType.Text:
                        Console.WriteLine(textReader.Value);
                        break;
                    case XmlNodeType.XmlDeclaration:
                    case XmlNodeType.ProcessingInstruction:
                        Console.WriteLine(textReader.Name + " " + textReader.Value);
                        break;
                    case XmlNodeType.Comment:
                        Console.WriteLine(textReader.Value);
                        break;
                    case XmlNodeType.EndElement:
                        break;
                }
            }
            Console.ReadLine();
        }
    }
} 
```

代码在读取节点并返回名称的意义上工作正常。但是，问题是我也在尝试检索节点内的数据。换句话说，当它读取测试部分之后的第一部分时，它将读取：

```
slnc:DataSet
slnc:Group
slnc:Section
slnc:ActualAvailableToBorrow
*** here ***
slnc:oustandingLoans 
```

这是我希望文本阅读器读取节点中的以下值的地方，例如 `confidentiality="F"`，`currency="USD"`等，但它只是直接跳到下一部分而不读取这些值！

```
<slnc:actualAvailableToBorrow xmlns:slnc="http://www.newyorkfed.org/xml/schemas/SecLending" 
      confidentiality="F" currency="USD" decimals="0" method="AA" 
      multiplier="5" securityLendingType="AA" status="A" value="1474"/> 
```

如何让 textreader 读取属性值？理想的情况是打印值“货币”，然后打印其值：“F”，依此类推。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-19T17:04:48.797

### 获取单个命名属性

使用[XmlTextReader.GetAttribute (MSDN)](http://msdn.microsoft.com/en-us/library/3c932kx5.aspx)

```
case XmlNodeType.Element:
  Console.WriteLine(textReader.Name);
  Console.WriteLine(textReader.Value);
  Console.WriteLine(textReader.GetAttribute("currency")); 
```

这个函数的一个很好的特性是：如果没有定义属性，它不会导致异常——它只会简单地返回`Null`。

### 获取所有属性

使用[XmlTextReader.MoveToAttribute (MSDN)](http://msdn.microsoft.com/en-us/library/4k1h0k3e)

将 AttributeCount 属性与 MoveToAttribute 结合使用：

```
case XmlNodeType.Element:
  Console.WriteLine(textReader.Name);
  Console.WriteLine(textReader.Value);
  for (int attInd = 0; attInd < textReader.AttributeCount; attInd++){
      textReader.MoveToAttribute( attInd );
      Console.WriteLine(textReader.Name);
      Console.WriteLine(textReader.Value);
  }
  textReader.MoveToElement(); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-06-28T10:12:11.390

您可以稍微更改循环条件，以便它也遍历属性：

```
while (textReader.MoveToNextAttribute() || textReader.Read())
{ 
     switch (textReader.NodeType)
     {
         case XmlNodeType.Element:
             Console.WriteLine(textReader.Name);
             Console.WriteLine(textReader.Value);
             break;
         //...
         case XmlNodeType.Attribute:
             //use textReader.Name and textReader.Value here for attribute name and value
             break;
    }
} 
```

`MoveToNextAttribute`方法将 reader 推进到当前元素中的下一个属性，如果不能这样做，则返回 false。

# websphere - 从代码扩展麦迪逊商店

> ID：11105605
> 
> 赞同：0
> 
> 时间：2012-06-19T16:49:18.507
> 
> 标签：websphere, ibm-rad, websphere-commerce

我正在开发一个关于 websphere commerce 的插件，允许从这个平台创建的商店可以相互通信。使用“Accelerator”、“Administrator Console”和“IBM Management Tools”，我定制了我从这些应用程序创建的Madison Store，但我需要添加代码片段，我不知道我是否应该使用IBM Rational Application Developer 来做这个，或者如果有另一种方法来编辑创建的商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:50:13.477

根据您创建插件的方式，一般来说您必须使用 Websphere Commerce Developer 来执行此操作。它需要 WebSphere Commerce 特定的库来编译站点。

# javascript - JCrop：将文本添加到选择区域 - 可能吗？

> ID：11105606
> 
> 赞同：0
> 
> 时间：2012-06-19T16:49:19.210
> 
> 标签：javascript, selection, jcrop

我打算将 JCrop 用于标准图像上传功能。到目前为止一切都很好，效果很好。但是：需要最小图像尺寸，所以我不想让用户进行裁剪，然后在他尝试 ulpoad 时用错误消息阻止他，我想插入一个连续的（或至少在选择之后）信息-关于当前选择大小的文本。所以，这是我的问题：你能在 jcrop 选择区域中添加文本吗？还是我必须自己创造一些东西？

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:10:59.830

简短的回答是不，您不能将文本添加到选择区域。当然，您可以添加 jcrop 脚本并添加此类功能（我认为这是一个很酷的添加）。

我有类似的需求（即通知用户它太小）并根据选择大小在单独的区域中进行操作。类似于以下内容：

```
$("#myDiv").Jcrop({onChange: checkSelection},function(){jcrop_api = this;));

function checkSelection(c){
  if (c.x2 - c.x < minWidth)
    ... 
```

# django - AngularJS：模板在本地主机服务器上什么也不打印

> ID：11105610
> 
> 赞同：0
> 
> 时间：2012-06-19T16:49:32.007
> 
> 标签：django, angularjs

我的基本任务是从模板标签打印一些东西。如果我从文件系统打开 html 文件，它可以工作，但如果我从 django web-server 运行它，它什么也不打印。

例如：

```
<li ng-repeat="k in [0, 1, 2]">{{k}}</li> 
```

如果我从文件系统打开文件，则输出：

```
<li>0</li>
<li>1</li>
<li>2</li> 
```

如果我从 Django 网络服务器获取文件：

```
<li></li>
<li></li>
<li></li> 
```

这个问题让我发疯:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:34:44.933

如果 Django 弄乱了`{{}}`标签，您可以像这样更改模板标签：

```
 var app = angular.module('myApp', []);
    app.config(function($interpolateProvider) { 
      $interpolateProvider.startSymbol('(('); 
      $interpolateProvider.endSymbol('))');
    }); 
```

[http://docs.angularjs.org/api/ng.$interpolateProvider](http://docs.angularjs.org/api/ng.$interpolateProvider)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:13:16.747

使用时要小心`(( ))`。您可能会遇到内部函数调用的问题`(( ))`。

另请注意使用`{{ }}`. 您的配置会破坏它们。

见[https://stackoverflow.com/a/11108407/457375](https://stackoverflow.com/a/11108407/457375)

# sql - 在存储过程的 where 子句中使用 If

> ID：11105619
> 
> 赞同：4
> 
> 时间：2012-06-19T16:50:13.343
> 
> 标签：sql, stored-procedures

我正在编写一个带有 3 个参数的存储过程，并且我的 where 子句根据这些参数之一而改变。是否可以用这种方式编写 SQL 查询 -

```
 CREATE PROCEDURE [dbo].[VendorVettingModal] @column NVarchar (50), @applicanttype NVarchar (10), @donotuse int AS

                declare @column NVarchar (50), @applicanttype NVarchar (10), @donotuse int

    select a.Id, a.Firstname, rs.Status,cs.ClearanceStatus
    from applicant a 
    left join ReviewStatus rs on a.ReviewStatus = rs.Id 
    left join ClearanceStatus cs on a.ClearanceStatus = cs.Id
    where
    if(@column = 'Recruiting')
    begin
        a.applicanttype = @applicanttype and a.reviewstatus = 7 and a.donotuse = @donotuse      
    end
    else if(@column = 'Clearance')
    begin
        a.applicanttype = @applicanttype and (a.reviewstatus != 7 or a.reviewstatus is null) and a.donotuse = @donotuse     
    end 
```

而不是这样写？因为我有大约 20-25 列和更多的连接和参数，而不是这里定义的。我只是试图在这里让它变得不那么复杂。

```
 CREATE PROCEDURE [dbo].[VendorVettingModal] @column NVarchar (50), @applicanttype NVarchar (10), @donotuse int AS

                declare @column NVarchar (50), @applicanttype NVarchar (10), @donotuse int

    if(@column = 'Recruiting')
    begin
        select a.Id, a.Firstname, rs.Status,cs.ClearanceStatus
        from applicant a 
        left join ReviewStatus rs on a.ReviewStatus = rs.Id 
        left join ClearanceStatus cs on a.ClearanceStatus = cs.Id
        where
        a.applicanttype = @applicanttype and a.reviewstatus = 7 and a.donotuse = @donotuse      
    end
    else if(@column = 'Clearance')
    begin
        select a.Id, a.Firstname, rs.Status,cs.ClearanceStatus
        from applicant a 
        left join ReviewStatus rs on a.ReviewStatus = rs.Id 
        left join ClearanceStatus cs on a.ClearanceStatus = cs.Id
        where
        a.applicanttype = @applicanttype and (a.reviewstatus != 7 or a.reviewstatus is null) and a.donotuse = @donotuse     
    end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:56:19.003

使用括号：

```
 select a.Id, a.Firstname, rs.Status,cs.ClearanceStatus
    from applicant a 
    left join ReviewStatus rs on a.ReviewStatus = rs.Id 
    left join ClearanceStatus cs on a.ClearanceStatus = cs.Id
    where a.applicanttype = @applicanttype
    and a.donotuse = @donotuse 
    AND ((@column = 'Recruiting' AND (a.reviewstatus = 7))
    OR
    (@column = 'Clearance' AND (a.reviewstatus != 7 or a.reviewstatus is null))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T16:56:33.200

你可以通过两种方式做到这一点。一种方法是使用动态 SQL。但是，这不适用于任何数据库。另一种方法是将 WHERE 子句构造为：

```
where (case when @column = 'Recruiting' and
                 a.applicanttype = @applicanttype and a.reviewstatus = 7 and a.donotuse = @donotuse
            then 'True'
            when @column = 'Clearance' and
                 a.applicanttype = @applicanttype and (a.reviewstatus != 7 or a.reviewstatus is null) and a.donotuse = @donotuse
            then 'True'
            . . .
       end) = 'True' 
```

与动态 SQL 相比，它的两个优点是查询不必重新编译，并且可以在更广泛的数据库中工作。一个缺点是 WHERE 子句*可能*无法利用适用的索引。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-19T17:00:00.327

不幸的是，在 transact-sql 中，“if-else-if-else”只能这样写：http: [//msdn.microsoft.com/en-us/library/ms182587.aspx](http://msdn.microsoft.com/en-us/library/ms182587.aspx)

```
DECLARE @Number int;
SET @Number = 50;
IF @Number > 100
   PRINT 'The number is large.';
ELSE 
    BEGIN
        IF @Number < 10
            PRINT 'The number is small.';
        ELSE
            PRINT 'The number is medium.';
    END;
GO 
```

这很复杂，但只有这种方法是可能的

# php - PHP - 从文本列表中提取单词

> ID：11105623
> 
> 赞同：-1
> 
> 时间：2012-06-19T16:50:27.590
> 
> 标签：php

我有一个列入白名单的单词列表`kitchen chair table`：

给定一个文本，我想知道其中有哪些列入白名单的单词。

什么是实现这一目标的*好方法？*我的意思是，易于理解，具有良好的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:57:10.237

不是一个非常明确的问题，但这样的事情可能对你有用：

```
$str = "kitchen chair table";
$search = "kitchen bathroom chair";
$arr1 = explode(' ', $str);
$arr2 = explode(' ', $search);
print_r(array_intersect($arr1, $arr2)); 
```

**输出：**

```
Array
(
    [0] => kitchen
    [1] => chair
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:57:50.670

为此，您应该使用带有单词边界的正则表达式。如果您不这样做并且仅依赖字符串位置，则诸如“heat”之类的单词将在诸如“cheat”之类的单词中匹配

```
$word_list = "kitchen chair table tables";
$words = explode( ' ', $word_list);

$text = 'There is a table in the kitchen';

foreach( $words as $word) {
    if( preg_match( '/\b' . $word . '\b/', $text)) {
        echo "$word is in the text\n";
    }
} 
```

这输出：

```
kitchen is in the text 
table is in the text 
```

请注意，`table`如果其中`$text`只有一个，这将不匹配`tables`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:55:08.430

```
//list of words
$myArray = array('kitchen', 'chair', 'table');

foreach($myArray as $word){
    if(stristr($textBody, $word) !== false){
    // word's in there
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:55:25.010

您可以使用 php [explode](http://php.net/manual/en/function.explode.php)函数用空格展开单词列表。然后它会返回一个数组。输入文本也会做同样的事情。这样，您将拥有两个 Array。

之后，您可以使用[array_intersect](http://php.net/manual/en/function.array-intersect.php)函数，该函数将返回两个数组中的常用词。

```
$array = explode(' ',$wordlist);
$result = array_intersect($array, $inputarray); 
```

$result 将包含所有常用词。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T16:57:45.820

您是否需要知道这些单词在字符串中出现的频率或它们的确切位置？如果没有，我建议您将列表转换为带有“explode(' ', $list)”的数组。然后遍历该数组并使用 strpos 进行搜索。

如果您愿意，我可以提供示例代码:)

如果您需要位置和所有出现，则必须使用正则表达式。

# gradle - 如何使 Java 插件类任务依赖于我自己的任务？

> ID：11105625
> 
> 赞同：0
> 
> 时间：2012-06-19T16:50:32.287
> 
> 标签：gradle

Gradle 让我很适应。我有一个包含 java 插件的 build.gravle，我在其中构建了一个任务，该任务生成一个属性文件并将其放入 build/classes 目录中。这一切都像冠军一样工作。这是我的自定义任务。

```
task generateBuildSignature << {
    def whoami = System.getProperty( 'user.name' );
    def hostname = InetAddress.getLocalHost().getHostName();
    def buildTag = System.env.BUILD_TAG ?: "dev"

    ant.propertyfile( file: "${buildDir}/buildsignature.properties", comment: "This file is automatically generated - DO NOT EDIT!" ) {
        entry( key: "version", value: "${project.version}" )
        entry( key: "buildTimestamp", value: "${new Date().format('yyyy-MM-dd HH:mm:ss z')}" )
        entry( key: "buildUser", value: "$whoami" )
        entry( key: "buildSystem", value: "$hostname" )
        entry( key: "buildTag", value: "$buildTag" )
    }
} 
```

现在我想将此任务的执行集成到 Java 构建生命周期中，最好是在 processResources 之后立即执行或作为类的依赖项，但我在文档[http://gradle.org/docs/current/的第 23 章userguide/java_plugin.html](http://gradle.org/docs/current/userguide/java_plugin.html)，目前尚不清楚如何将我的任务放入通过 java 插件进入的任务的依赖链中。对初出茅庐的 gradle 用户有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:10:00.633

您必须（并且可以）做的就是添加任务依赖项。例如：

```
classes.dependsOn(generateBuildSignature) 
```

# java - 如何将参数传递给 errors.rejectValue() 这是 Spring MVC 3 中 ResourceBundle 的另一个属性？

> ID：11105627
> 
> 赞同：2
> 
> 时间：2012-06-19T16:50:36.810
> 
> 标签：java, spring-mvc

我想传递 ResourceBundle 的 (globalmessage.properties) 属性名称“ **atm.number** ”而不是硬编码文本“Número de cajero”作为“ **errors.required** ”属性的参数。我将如何在验证器中做到这一点？

**ReporteIncidenciaValidator（验证器）：**

```
public class ReporteIncidenciaValidator implements Validator {

    public boolean supports(Class<?> clazz) {
        return ReporteIncidencia.class.isAssignableFrom(clazz);
    }

    public void validate(Object target, Errors errors) {
        ReporteIncidencia reporteIncidencia = (ReporteIncidencia) target;
        if (StringUtils.isBlank(reporteIncidencia.getNumeroCajero())) {
            errors.rejectValue("numeroCajero", "errors.required",
                new Object[]{"Número de cajero"}, "");
        }

    }
} 
```

**globalmessage.properties：**

```
errors.required={0} es requerido.
atm.number=Número de cajero 
```

**servlet-context.xml：**

...

```
<beans:bean id="messageSource"
  class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <beans:property name="basename" value="classpath:globalmessages" />
</beans:bean> 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:45:59.823

一种简单的方法是使用 ApplicationContext 类

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename">
            <value>locale\messages</value>
        </property>
    </bean>

</beans>

public class ReporteIncidenciaValidator implements Validator, ApplicationContextAware  {
    private ApplicationContext ctx;

    public boolean supports(Class<?> clazz) {
        return ReporteIncidencia.class.isAssignableFrom(clazz);
    }

    public void validate(Object target, Errors errors) {
        String message = context.getMessage("yourKey", 
                new Object[] { }, Locale.US);
        // your code

    }
} 
```

# gcc - makefile 中的通配符目标不起作用

> ID：11105628
> 
> 赞同：0
> 
> 时间：2012-06-19T16:50:39.260
> 
> 标签：gcc, makefile, g++, wildcard

我有这个简单的规则`Makefile`：

```
PP=g++ -std=c++0x
%.o: $.cpp
        $(PP) $< -c -o $@ 
```

当我运行时`make parse_utils.o`，执行的命令应该是：

```
g++ -std=c++0x parse_utils.cpp -c -o parse_utils.o 
```

但实际上是：

```
>make parse_utils.o
g++    -c -o parse_utils.o parse_utils.cpp 
```

我得到了一个编译错误，因为我使用了`C++11`语法。

这个通配符规则错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:52:14.470

你的目标是错误的。改变

```
%.o: $.cpp 
```

到

```
%.o: %.cpp 
```

# ruby-on-rails - 一种在 Ruby on Rails 中创建拍卖式定时触发器的方法

> ID：11105635
> 
> 赞同：0
> 
> 时间：2012-06-19T16:50:58.697
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

什么宝石/技术最适合创建拍卖风格的系统，在给定的持续时间到期时运行特定的操作？（即向用户发送电子邮件，告诉他们拍卖结束）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:09:47.700

如果您想要实时通知，我认为 resque_sceduler 适合您。因此，您可以安排任务在拍卖结束的确切时间发送电子邮件。

如果等待几分钟或几小时没有问题，您可以使用 cron 作业或类似的东西。实际上有很多选择。

# c - Linux 文件创建大小

> ID：11105637
> 
> 赞同：1
> 
> 时间：2012-06-19T16:51:03.267
> 
> 标签：c, linux, file, ubuntu

如果我像这样在 ubuntu 中创建一个文件：“echo "asd" > file.txt" 并执行 ls -l file.txt 它说它的大小是 4 个字节，但我只写了 3 个（asd）。如果我执行“cat file.txt”，它会显示我添加的 3 个字符。为什么文件有 4 个字节大？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T16:51:55.823

`asd`+ 换行符 = 4 个字节

```
$ echo asd | wc -c
4
$ echo -n asd | wc -c
3
$ echo asd | hd
00000000  61 73 64 0a                                       |asd.|
00000004 
```

-n in echo 关闭换行符

`hd`向您显示流的十六进制转储。你会看到最后的`0a`角色。那是第四个字符，换行符。

# sql - 如何删除内部连接中的重复项？

> ID：11105641
> 
> 赞同：-1
> 
> 时间：2012-06-19T16:51:15.573
> 
> 标签：sql, sql-server, sql-server-2008

我的查询：

```
 select 
  SUM(payments.paid_amt) as paid_amt, 
  SUM(payments.copay_amt) as copay_amt,
  SUM(payments.CO_INSURANCE_AMT) as co_ins_amt,
  SUM(payments.PATIENT_RESP_AMT) as patient_resp_amt,
  accession.ACCESSION_ID

  from 
  [F_PAYOR_PAYMENTS_monthly] payments

  join F_ACCESSION_daily accession
  on accession.ACCESSION_ID=payments.ACCESSION_ID

  where accession.XIFIN_LOAD_DATE between '20111201' and '20111231'

  group by   accession.ACCESSION_ID 
```

这是加入数据的样本：

![在此处输入图像描述](../Images/be88c4ba1b9196a4b2ed2a70194c0922.png)

这是付款：

![在此处输入图像描述](../Images/57856e6500cd99d0791c6289ca0cee30.png)

我的问题是 SAME 加入的 SAME 付款被多次计算

我的问题是如何确保对特定加入的付款只计算一次？

之间的关系`payments ---> accession`是`many to 1`

非常感谢您的指导。

我对上述示例的期望是：

```
AA895325, sum(paid_amt), sum(copayt_amt), etc.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:15:38.270

以下是一些可能性（这不是真正的答案，但评论太长了）：

(1) 您在表格中有重复项。鉴于您看到重复，这将是最明显的地方。

（2）您的说法“我的问题是 SAME 加入的 SAME 付款被多次计算”不太正确。问题是额外的付款被计算在内。我认为付款上有付款日期，您希望加入级别的日期逻辑能够捕捉到它。但是这种逻辑仍然会允许所有付款。

(3) 您的分析不正确，即记录了多笔付款。查询是正确的，但由于某种原因没有达到您的预期。

如所写，查询不应增加付款，除非加入表中有重复的加入 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:23:19.177

好的，如果我理解你的问题，这似乎是一个非常简单的概念，你没有考虑到。当然，有付款`accesion_id`的表格每个月有不止一次付款，甚至表格的名称也暗示了这一点（`F_PAYOR_PAYMENTS_monthly`），您甚至在评论中说该表格每月有付款。所以，知道这一点，为什么每次收到多笔付款会让您感到惊讶`accesion_id`？，这似乎很明显。由于您没有回答一些询问您应该选择哪种付款方式的评论，您要么过滤一个月，要么按月分组，就这么简单：

```
select  accession.ACCESSION_ID,
        SUM(payments.paid_amt) as paid_amt, 
        SUM(payments.copay_amt) as copay_amt,
        SUM(payments.CO_INSURANCE_AMT) as co_ins_amt,
        SUM(payments.PATIENT_RESP_AMT) as patient_resp_amt

from [F_PAYOR_PAYMENTS_monthly] payments
join F_ACCESSION_daily accession
on accession.ACCESSION_ID=payments.ACCESSION_ID
where accession.XIFIN_LOAD_DATE between '20111201' and '20111231'
AND payment.[Month] = '201112'
group by   accession.ACCESSION_ID, payments.[Month] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T17:00:19.877

将 accession_id 从 select 和 group by 中取出。它是通过加入求和，因为你告诉它。

说看到您按 XIFIN_LOAD_DATE 的月份和年份部分分组，我也希望它们出现在选择列表中。

现在读了上面的评论，我开始彻底糊涂了。

如果您是按加入求和，并且是一对多，那么多个加入不是重复的。这是你说的你想要的。

如果要按加入日期的年/月求和，则删除 accession-id 应使其根据链接日期所在的年/月对所有加入进行求和。

它会帮助所有相关人员，您只需输入一些示例数据，然后列出您期望的查询结果。

# windows-phone-7 - Windows Phone 上的数据序列化

> ID：11105650
> 
> 赞同：0
> 
> 时间：2012-06-19T16:52:01.223
> 
> 标签：windows-phone-7, twitter, datacontractserializer

我正在关注[本教程](http://igrali.com/2012/06/17/twitter-authentication-from-windows-phone-app/)，但我被困在 TwitterAcces 类（包含 twitter 令牌）被序列化的部分。这是调用序列化方法的地方：

```
 void CallBackVerifiedResponse(OAuthAccessToken at, TwitterResponse response)
    {
        if (at != null)
        {
            SerializeHelper.SaveSetting<TwitterAccess>("TwitterAccess", new TwitterAccess
            {
                AccessToken = at.Token,
                AccessTokenSecret = at.TokenSecret,
                ScreenName = at.ScreenName,
                UserId = at.UserId.ToString()
            });
        }
    } 
```

这是我的 SerializeHelper.cs：

```
public class SerializeHelper
{
    public static void SaveSetting<T>(string fileName, T dataToSave)
    {
        using (var store = IsolatedStorageFile.GetUserStoreForApplication())
        {
            try
            {
                using (var stream = store.CreateFile(fileName))
                {
                    var serializer = new DataContractSerializer(typeof(T));
                    serializer.WriteObject(stream, dataToSave);
                }
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
                return;
            }
        }
    }

} 
```

我得到的错误是：`The type or namespace name 'DataContractSerializer' could not be found (are you missing a using directive or an assembly reference?)`Visual Studio 无法帮助我解决问题。它建议创建一个新类。我四处搜索，我认为该类应该在`System.Runtime.Serialization;`我正在使用的里面，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:09:55.500

您必须在项目中添加`System.Runtime.Serialization.dll`引用。

# java - 如何让 logback 读取名称为变量的属性文件？

> ID：11105652
> 
> 赞同：5
> 
> 时间：2012-06-19T16:52:04.767
> 
> 标签：java, logging, logback

我正在使用[http://logback.qos.ch/](http://logback.qos.ch/)

例如，我正在使用参数运行我的 java 进程，`-Dproperties.url=myappproperties-production.properties`或者`-Dproperties.url=myappproperties-development.properties`取决于运行它的环境。

问题：如何让 logback 获取我的属性文件？

如果属性文件名是静态的，我会这样做（**工作正常**）：

```
<configuration>
    <property resource="myappproperties-development.properties" />
    (...)
</configuration> 
```

但我需要一些动态的东西（**这不起作用**）：

```
<configuration>
    <property resource="${properties.url}" />
    (...)
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:28:36.970

资源文件的值可以是属性本身。换句话说，

```
<configuration debug="true">
    <property resource="${properties.url}" />
    (...)
</configuration> 
```

应该管用。BYW，将element的`debug`属性设置为在控制台上查看 logback 的内部消息。您使用的是哪个版本的 logback？`<configuration>``true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T14:38:27.000

如果属性 url 值是用引号引起来的，你将如何处理这个问题？例如

```
-Dproperties.url="myappproperties-production.properties" 
```

我刚试过这个，它没有用

我问的原因是因为 Amazon Elastic Beanstalk 中最新版本的 Amazon AMI 在属性值周围添加了逗号 - 即使用户没有指定这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T11:14:19.720

这是 Spring 推荐的方式：

```
<configuration>

    <springProfile name="local">
        <!-- configuration to be enabled when the "local" profile is active -->
        <property resource="application-local.properties" />
    </springProfile>

    <springProfile name="dev">
        <!-- configuration to be enabled when the "dev" profile is active -->
        <property resource="application-dev.properties" />
    </springProfile>

</configuration> 
```

参考文档：[https ://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html)

# javascript - 寻找相似 Q 的算法如何工作？

> ID：11105653
> 
> 赞同：1
> 
> 时间：2012-06-19T16:52:11.937
> 
> 标签：javascript, ajax, stack-overflow

也许我的问题不是问得正确，但此刻我不知道该怎么说才好。
我喜欢 SO 中的“可能已经有你答案的问题”或 SimilarQuestion 功能。

我想尝试在我的项目中创建相同的功能。

寻找类似问题的算法如何工作？

在我看来，最好的方法是在输入文本时发送 ajax 请求，然后在服务器上创建语句，使用 like 语句在数据库中查找问题？

这是正确的方法吗？

你能给我建议什么更好的方法来做这个功能。

先谢谢了。

另外：我发现我的问题与 [如何构建“相关问题”引擎重复？](https://stackoverflow.com/questions/2182671/how-to-build-a-related-questions-engine)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:12:27.187

并不像看起来那么微不足道，确实引用的问题为您提供了一些指向它的指针，因此请尝试从那里开始。

基本上，您正在尝试重现搜索引擎的功能......您输入了一系列术语（您的问题），并且算法需要找到一组与您输入的术语更密切相关的文档。

话虽如此，您可以尝试使用 apache lucene 之类的东西来尝试在您的应用程序中实现模糊字符串搜索。

# c# - PerformClick之后的C#Run方法

> ID：11105655
> 
> 赞同：0
> 
> 时间：2012-06-19T16:52:14.530
> 
> 标签：c#

我的按钮有问题`PerformClick()`。

在我的主表单中，我正在加载另一个表单 30 次：

```
for (int i = 0; i < iloscIteracji; i++)
{
    pso _pso = new pso(czastki, punkty, 1, 3, 3,1);
    _pso.Show();
} 
```

然后在`Form1_Load`我检查构造函数的设置

```
 if (ktoraMetoda == 1)
    {
        button1.PerformClick();
        radioButton1.Checked = true;
        textBox1.Text = "100";
        button3.PerformClick();

    } 
```

但问题是`button3_click`我有两种方法要运行：

```
znajdzNajlepszych();
zmienKolory(); 
```

那是行不通的。我试图在这两种方法上设置断点，但应用程序只是离开了它们。

有什么建议么？

# linux - 使用 Processing.org 创建的应用程序无法在 Linux 上启动

> ID：11105661
> 
> 赞同：0
> 
> 时间：2012-06-19T16:52:49.647
> 
> 标签：linux, processing, linux-mint

我使用 Processing.org 创建了一个应用程序。当我“导出应用程序”并在我的 Mac 上运行它时，一切正常。当我“导出应用程序”并将 application.linux 文件夹移动到运行 Linux Mint 的计算机上时，我单击了 Shell 脚本文件，但没有任何反应。

任何想法可能是什么原因？我不是特别熟悉 Linux，所以它可能是一些基本的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:22:59.003

这里真正的问题是，一旦我将文件放到 Linux 机器上，我必须右键单击 shell 文件并将权限设置为“使此文件可执行”

# google-app-engine - 获取没有 www 的 appengine 网站

> ID：11105662
> 
> 赞同：5
> 
> 时间：2012-06-19T16:52:50.643
> 
> 标签：google-app-engine, web-applications, dns

有没有办法在不让用户输入的情况下设置 appengine Web 应用程序以部署在网站上`www.url.com`？

我已将其部署到`www.url.com`但`url.com`无法正常工作。

*appengine 可以吗？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:56:18.923

AppEngine 目前不支持裸域。

您现在可以做的最好的事情就是将您的裸域名设置为自动重定向到 www。版本。

有用的链接：

请求支持裸域的[Google 代码问题](http://code.google.com/p/googleappengine/issues/detail?id=777)

[尼克约翰逊](http://blog.notdot.net/2009/12/Naked-domains-on-App-Engine)对为何存在限制的解释

# python - 如何使用python提取.gpx数据

> ID：11105663
> 
> 赞同：12
> 
> 时间：2012-06-19T16:52:53.783
> 
> 标签：python, perl, extract, gpx

我是一个新的 linux/python 用户，拥有 .gpx 文件（由 GPS 跟踪软件制作的输出文件），需要将值提取到 csv/txt 中以用于 GIS 程序。我在我的 Python 入门书籍、本网站和在线中查找了字符串和切片等。我使用了 .gpx 到 .txt 的转换器，可以将经度和纬度提取到文本文件中。我需要提取高程数据。该文件顶部有六行文本，我只知道如何在 emacs 中打开此文件（除了在网站上上传）这是从第 7 行开始的文件。

理想情况下，我想知道如何通过 python（或 Perl）将所有值提取到 csv 或 txt 文件中。如果有人知道网站教程或示例脚本，将不胜感激。

```
<metadata>
<time>2012-06-13T01:51:08Z</time>
</metadata>
<trk>
<name>Track 2012-06-12 19:51</name>
<trkseg>
<trkpt lat="43.49670697" lon="-112.03380961">
<ele>1403.0</ele>
<time>2012-06-13T01:53:44Z</time>
<extensions>
<ogt10:accuracy>34.0</ogt10:accuracy></extensions>
</trkpt>
<trkpt lat="43.49796612" lon="-112.03970968">
<ele>1410.9000244140625</ele>
<time>2012-06-13T01:57:10Z</time>
<extensions>
<gpx10:speed>3.75</gpx10:speed>
<ogt10:accuracy>13.0</ogt10:accuracy>
<gpx10:course>293.20001220703125</gpx10:course></extensions>
</trkpt>
<trkpt lat="43.49450857" lon="-112.04477274">
<ele>1406.5</ele>
<time>2012-06-13T02:02:24Z</time>
<extensions>
<ogt10:accuracy>12.0</ogt10:accuracy></extensions>
</trkpt>
</trkseg>
<trkseg>
<trkpt lat="43.49451057" lon="-112.04480354">
<ele>1398.9000244140625</ele>
<time>2012-06-13T02:54:55Z</time>
<extensions>
<ogt10:accuracy>10.0</ogt10:accuracy></extensions>
</trkpt>
<trkpt lat="43.49464813" lon="-112.04472215">
<ele>1414.9000244140625</ele>
<time>2012-06-13T02:56:06Z</time>
<extensions>
<ogt10:accuracy>7.0</ogt10:accuracy></extensions>
</trkpt>
<trkpt lat="43.49432573" lon="-112.04489684">
<ele>1410.9000244140625</ele>
<time>2012-06-13T02:57:27Z</time>
<extensions>
<gpx10:speed>3.288236618041992</gpx10:speed>
<ogt10:accuracy>21.0</ogt10:accuracy>
<gpx10:course>196.1999969482422</gpx10:course></extensions>
</trkpt>
<trkpt lat="43.49397445" lon="-112.04505216">
<ele>1421.699951171875</ele>
<time>2012-06-13T02:57:30Z</time>
<extensions>
<gpx10:speed>3.0</gpx10:speed>
<ogt10:accuracy>17.0</ogt10:accuracy>
<gpx10:course>192.89999389648438</gpx10:course></extensions>
</trkpt>
<trkpt lat="43.49428702" lon="-112.04265923">
<ele>1433.0</ele>
<time>2012-06-13T02:58:46Z</time>
<extensions>
<gpx10:speed>4.5</gpx10:speed>
<ogt10:accuracy>18.0</ogt10:accuracy>
<gpx10:course>32.400001525878906</gpx10:course></extensions>
</trkpt>
<trkpt lat="43.49444603" lon="-112.04263691">
<ele>1430.199951171875</ele>
<time>2012-06-13T02:58:50Z</time>
<extensions>
<gpx10:speed>4.5</gpx10:speed>
<ogt10:accuracy>11.0</ogt10:accuracy>
<gpx10:course>29.299999237060547</gpx10:course></extensions>
</trkpt>
<trkpt lat="43.49456961" lon="-112.04260058">
<ele>1430.4000244140625</ele>
<time>2012-06-13T02:58:52Z</time>
<extensions>
<gpx10:speed>4.5</gpx10:speed>
<ogt10:accuracy>8.0</ogt10:accuracy>
<gpx10:course>28.600000381469727</gpx10:course></extensions>
</trkpt>
<trkpt lat="43.49570131" lon="-112.04001132">
<ele>1418.199951171875</ele>
<time>2012-06-13T03:00:08Z</time>
<extensions> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-06-18T20:20:17.590

您可以安装 GPXpy

```
sudo pip install gpxpy 
```

然后只需使用该库：

```
import gpxpy 
import gpxpy.gpx 

 gpx_file = open('input_file.gpx', 'r') 

    gpx = gpxpy.parse(gpx_file) \
    for track in gpx.tracks: 
      for segment in track.segments: 
    for point in segment.points: 
      print 'Point at ({0},{1}) -> {2}'.format(point.latitude, point.longitude, point.elevation) 

    for waypoint in gpx.waypoints: 
      print 'waypoint {0} -> ({1},{2})'.format(waypoint.name, waypoint.latitude, waypoint.longitude) 

    for route in gpx.routes: 
      print 'Route:' 
```

欲了解更多信息：[https ://pypi.python.org/pypi/gpxpy](https://pypi.python.org/pypi/gpxpy)

问候

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T16:54:23.967

[GPX 是一种 XML 格式](https://en.wikipedia.org/wiki/GPS_eXchange_Format)，因此请使用[lxml](http://lxml.de/)之类的合适模块或包含的[ElementTree XML API](http://docs.python.org/library/xml.etree.elementtree.html)来解析数据，然后使用 python[`csv`模块](http://docs.python.org/library/csv.html)输出到 CSV 。

涵盖这些概念的教程：

*   [lxml.etree 教程](http://lxml.de/tutorial.html)
*   [ElementTree 教程](http://effbot.org/zone/element.htm)
*   [深入了解 Python 3 的 XML 处理](http://getpython3.com/diveintopython3/xml.html)
*   [在 Python 中处理 CSV 文件](http://www.linuxjournal.com/content/handling-csv-files-python)

[我还发现了一个名为gpxpy](https://github.com/tkrajina/gpxpy)的 python GPX 解析库，它可能为 GPX 文件中包含的数据提供了更高级别的接口。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-19T21:18:55.657

由于 Martijn 发布了一个 Python 答案并说 Perl 会变成线路噪音，我觉得也需要一个 Perl 答案。

在Perl 模块目录[CPAN](http://search.cpan.org/)上，有一个名为[Geo::Gpx](http://search.cpan.org/~andya/Geo-Gpx-0.21/lib/Geo/Gpx.pm)的模块。正如 Martijn 所说，GPX 是一种 XML 格式。但幸运的是，已经有人把它做成了一个为我们处理解析的模块。我们所要做的就是加载那个模块。

有几个可用于处理 CSV 的模块，但是这个 XML 文件中的数据相当简单，所以我们真的不需要一个。我们可以使用内置功能自行完成。

请考虑以下脚本。我会在一分钟内给出解释。

```
use strict;
use warnings;
use Geo::Gpx;
use DateTime;
# Open the GPX file
open my $fh_in, '<', 'fells_loop.gpx';
# Parse GPX
my $gpx = Geo::Gpx->new( input => $fh_in );
# Close the GPX file
close $fh_in;

# Open an output file
open my $fh_out, '>', 'fells_loop.csv';
# Print the header line to the file
print $fh_out "time,lat,lon,ele,name,sym,type,desc\n";

# The waypoints-method of the GEO::GPX-Object returns an array-ref
# which we can iterate in a foreach loop
foreach my $wp ( @{ $gpx->waypoints() } ) {
  # Some fields seem to be optional so they are missing in the hash.
  # We have to add an empty string by iterating over all the possible
  # hash keys to put '' in them.
  $wp->{$_} ||= '' for qw( time lat lon ele name sym type desc );

  # The time is a unix timestamp, which is hard to read.
  # We can make it an ISO8601 date with the DateTime module.
  # We only do it if there already is a time, though.
  if ($wp->{'time'}) {
    $wp->{'time'} = DateTime->from_epoch( epoch => $wp->{'time'} )
                             ->iso8601();
  }
  # Join the fields with a comma and print them to the output file
  print $fh_out join(',', (
    $wp->{'time'},
    $wp->{'lat'},
    $wp->{'lon'},
    $wp->{'ele'},
    $wp->{'name'},
    $wp->{'sym'},
    $wp->{'type'},
    $wp->{'desc'},
  )), "\n"; # Add a newline at the end
}
# Close the output file
close $fh_out; 
```

* * *

让我们分步进行：

*   [`use strict`](http://perldoc.perl.org/strict.html)并[`use warnings`](http://perldoc.perl.org/warnings.html)执行诸如声明变量之类的规则，并告诉您最难发现的常见错误。
*   `use Geo::Gpx`并且`use DateTime`是我们使用的模块。`Geo::Gpx`将为我们处理解析。我们需要`DateTime`将 unix 时间戳变成可读的日期和时间。
*   该[`open`](http://perldoc.perl.org/functions/open.html)函数打开一个文件。`$fh_in`是保存文件句柄的变量。我们要读取的 GPX 文件是**falls_loop.gpx**，我冒昧地从[topografix.com](http://www.topografix.com/gpx_sample_files.asp)借来了它。`open`您可以在[perlopentut](http://perldoc.perl.org/perlopentut.html)中找到更多信息。
*   我们创建一个`Geo::Gpx`名为的新对象`$gpx`，并使用我们的文件句柄`$fh_in`告诉它从哪里读取 XML 数据。`new`- 方法由所有具有面向对象接口的 Perl 模块提供。
*   [`close`](http://perldoc.perl.org/functions/close.html)关闭文件句柄。
*   接下来`open`有一个`>`告诉 Perl 我们要写入这个文件句柄。
*   我们`print`通过将它作为第一个参数来[打印](http://perldoc.perl.org/functions/print.html)文件句柄。请注意，文件句柄后没有逗号。是`\n`换行符。
*   [`foreach`循环](http://perldoc.perl.org/perlsyn.html#Compound-Statements)`waypoints`获取对象的- 方法的返回值`Geo::Gpx`。该值是一个数组引用。将其视为包含数组的数组（如果您想了解有关引用的更多信息，请参阅[perlref ）。](http://perldoc.perl.org/perlref.html)在循环的每次迭代中，该数组 ref 的下一个元素（表示 GPX 数据中的一个航点）将被放入`$wp`. 如果打印出来[`Data::Dumper`](http://search.cpan.org/~smueller/Data-Dumper-2.131/Dumper.pm)是这样的：

    ```
    $VAR1 = {
          'ele' => '64.008000',
          'lat' => '42.455956',
          'time' => 991452424,
          'name' => 'SOAPBOX',
          'sym' => 'Cemetery',
          'desc' => 'Soap Box Derby Track',
          'lon' => '-71.107483',
          'type' => 'Intersection'
        }; 
    ```

*   现在*后缀* [`for`](http://perldoc.perl.org/functions/map.html)有点棘手。正如我们刚刚看到的，hashref 中有 8 个键。不幸的是，其中一些有时会丢失。因为我们有`use warnings`，所以如果我们尝试访问这些缺失值之一，我们会收到警告。我们必须创建这些键并`''`在其中放置一个空字符串。

    `foreach`并且`for`在 Perl 中完全可以互换，并且两者也可以在单个表达式后面的*后缀语法中使用。*我们使用`qw`-operator 创建`for`将迭代的列表。[`qw`](http://perldoc.perl.org/5.14.2/perlop.html#Quote-Like-Operators)是**引用单词**的缩写，它就是这样做的：它返回其中的字符串列表，但被引用。我们也可以说`('time', 'lat', 'long'... )`。

    在表达式中，我们访问 的每个键`$wp`。`$_`是循环变量。在第一次迭代中，它将保持“时间”，然后是“纬度”，依此类推。由于`$wp`是 hashref，我们需要`->`访问它的键。花括号表明它是一个 hashref。仅当它不是真值时，运算符才会为我们的散列 ref 元素分配一个值[`||=`。](http://perldoc.perl.org/5.14.2/perlop.html#Assignment-Operators)

*   现在，如果有时间值（如果没有设置日期，我们刚刚分配的空字符串被视为“没有”），我们将 unix 时间戳替换为适当的日期。[DateTime](http://search.cpan.org/~drolsky/DateTime-0.75/lib/DateTime.pm)帮助我们做到这一点。该`from_epoch`方法获取 unix 时间戳作为参数。它返回一个`DateTime`对象，我们可以直接使用它来调用`iso8601`它的函数。

    这称为链接。有些模块可以做到。它类似于 jQuery 的 JavaScript 对象所做的。我们的 hashref 中的 unix 时间戳被替换为`DateTime`操作的结果。

*   现在我们`print`再次回到我们的文件句柄。[`join`](http://perldoc.perl.org/5.14.2/functions/join.html)用于在值之间放置逗号。我们还在末尾添加了一个换行符。
*   一旦我们完成了循环，我们`close`就是文件句柄。
*   现在我们完成了！:)

总而言之，我想说这很简单，也很可读，不是吗？我试图使它成为过度冗长的语法与 _Perl_ish 风格的健康组合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-26T17:18:37.957

每次我尝试这样做时，我都会在互联网上搜索解决方案并最终编写自己的正则表达式解析器。

```
import re
import numpy as np

GPXfile='Lunch_Walk.gpx'
data = open(GPXfile).read()

lat = np.array(re.findall(r'lat="([^"]+)',data),dtype=float)
lon = np.array(re.findall(r'lon="([^"]+)',data),dtype=float)
time = re.findall(r'<time>([^\<]+)',data)

combined = np.array(list(zip(lat,lon,time))) 
```

这给出了格式的数组：

```
array([['51.504613', '-0.141894', '2020-12-26T12:43:14Z'],
       ['51.504624', '-0.141901', '2020-12-26T13:10:26Z'],
       ['51.504633', '-0.141906', '2020-12-26T13:10:28Z'],
       ...) 
```

然后，您可以随心所欲地使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-26T00:02:49.663

虽然`gpxpy`是流行的 python 答案，我自己找到了这个答案并尝试了它，但我发现很难获得像心率这样的扩展类型数据，如果不是不可能的话，而且仍然需要遍历各种嵌套的 xml 祖先/子代所以我写了[gpxcsv](https://pypi.org/project/gpxcsv/)。

一样容易：

```
from gpxcsv import gpxtolist
import pandas as pd

df = pd.DataFrame(
    pxtolist('myfile.gpx')) 
```

对于数据框，或者存在一个命令行工具来创建一个 csv 或 json 文件，在跟踪点中保留尽可能多的列，因为它使用标签作为列名。

项目源码[在 github 上](https://github.com/astrowonk/gpxcsv)。

# c - 长十六进制 Linux 上的位运算 C

> ID：11105665
> 
> 赞同：0
> 
> 时间：2012-06-19T16:53:02.690
> 
> 标签：c, linux, hex, bit-manipulation

简而言之：问题与十六进制语言 C 的按位运算有关；操作系统：Linux

我只想对“长”十六进制字符串进行一些按位运算。我尝试了以下方法：

第一次尝试：

由于溢出，我无法使用以下内容：

```
long  t1 = 0xabefffcccaadddddffff;
and t2 = 0xdeeefffffccccaaadacd; 
```

第二次尝试：不起作用，因为 abcdef 被解释为字符串而不是十六进制

```
char* t1 = "abefffcccaadddddffff";
char* t2 = "deeefffffccccaaadacd";

int len = strlen(t1);

for (int i = 0; i < len; i++ )
    {
        char exor = *(t1 + i) ^ *(t2 + i);
    printf("%x", exor);
} 
```

有人可以让我知道该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:59:32.963

按位运算通常很容易扩展到更大的数字。

最好的方法是将它们拆分为 4 或 8 字节序列，并将它们存储为 uint 数组。在这种情况下，这些特定字符串至少需要 80 位。

对于 AND 它非常简单，例如：

```
unsigned int A[3] = { 0xabef, 0xffcccaad, 0xddddffff };
unsigned int B[3] = { 0xdeee, 0xfffffccc, 0xcaaadacd };
unsigned int R[3] = { 0 };

for (int b = 0; b < 3; b++) {
    R[b] = A[b] & B[b];
} 
```

一个更完整的示例，包括扫描十六进制字符串并打印它们：

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

typedef unsigned int uint;

void long_Print(int size, const uint a[]) {
    printf("0x");
    for (int i = 0; i < size; i++) {
        printf("%x", a[i]);
    }
}

void long_AND(int size, const uint a[], const uint b[], uint r[]) {
    for (int i = 0; i < size; i++) {
        r[i] = a[i] & b[i];
    }
}

// Reads a long hex string and fills an array. Returns the number of elements filled.
int long_Scan(int size, const char* str, uint r[]) {
    int len = strlen(str);
    int ri = size;

    for (const char* here = &str[len]; here != str; here -= 8) {
        if (here < str) {
            char* tmp = (char*)malloc(4);

            tmp[0] = '%';
            tmp[1] = (char)(str - here + '0');
            tmp[2] = 'x';
            tmp[3] = '\0';

            sscanf(str, tmp, &r[ri--]);

            free(tmp);

            break;
        }
        else {
            sscanf(here, "%8x", &r[ri--]);
        }
    }

    for (; ri >= 0; ri--) {
        r[ri] == 0;
    }

    return size - ri;
}

int main(int argc, char* argv[])
{
    uint A[3] = { 0 };
    uint B[3] = { 0 };
    uint R[3] = { 0 };

    long_Scan(3, "abefffcccaadddddffff", A);
    long_Scan(3, "deeefffffccccaaadacd", B);

    long_Print(3, A);
    puts("\nAND");
    long_Print(3, B);
    puts("\n=");

    long_AND(3, A, B, R);
    long_Print(3, R);

    getchar();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:55:29.600

您当然需要使用可以处理任意长整数的库。考虑使用 libgmp：[http ://gmplib.org/](http://gmplib.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:57:00.157

在进行任何类型的按位运算之前，您需要使用整数。`"abeffccc"`不是*整数*。它是一个字符串。您需要使用类似[`strtol`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/) 的东西首先将字符串转换为整数。

如果您的值太大而无法放入 64 位`long long int`(0xFFFFFFFF,FFFFFFFF)，那么您需要使用 Big Integer 库或类似的东西来支持任意大的值。正如 H2CO3 所提到的，[libgmp](http://gmplib.org/)是 C 中大量数据的绝佳选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:59:36.887

`unsigned long`您可以尝试使用数组，而不是直接使用`unsigned int`。每个都`unsigned int`包含 32 位或 8 个十六进制数字。因此，您必须将常量分成 8 个十六进制数字的块：

```
unsigned int t1[3] = { 0xabef , 0xffcccaad , 0xddddffff }; 
```

请注意，出于理智考虑，您应该以相反的顺序存储它们，以便 的第一个条目`t1`包含最低位。

# database - WP中的表名问题

> ID：11105670
> 
> 赞同：0
> 
> 时间：2012-06-19T16:53:28.007
> 
> 标签：database, wordpress

我正在尝试从 Wordpress 在数据库中插入值。表名是“wp-consultte”，我是这样称呼它的：$wpdb->insert('wp-consultte'....

使用 WP 调试“$wpdb->show_errors();” 这出现了：WordPress数据库错误：[表'wordpress.wp-consultte'不存在]

我不明白为什么当数据库名称为“wp-consultte”时 WP 会尝试查找“wordpress.wp-consultte”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:00:51.997

不知道为什么插入不起作用，但你总是可以依靠

```
$wpdb->query("INSERT INTO 'wp-consultte' ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:27:53.463

首先是`wordpress.wp-consultte`指wordpress**数据库中的wp-consultte****表**。因此它在正确的地方搜索。

 **您必须首先在数据库中创建表。根据您之前的问题：[使用 Wordpress 中的数据库时](https://stackoverflow.com/questions/11105114/problems-using-database-from-wordpress)出现问题，我认为它尚不存在。

[http://codex.wordpress.org/Creating_Tables_with_Plugins#Create_Database_Tables](http://codex.wordpress.org/Creating_Tables_with_Plugins#Create_Database_Tables)将是一个好的开始。**

# android - 每次调试前卸载 Android 应用

> ID：11105674
> 
> 赞同：13
> 
> 时间：2012-06-19T16:53:58.083
> 
> 标签：android, eclipse, debugging

我正在使用安装了 Android SDK 的 Eclipse 3.7.2 开发一个 Android 应用程序。我想知道 Eclipse 中是否有一个设置，在启动调试器时会自动从设备上卸载任何以前存在的应用程序版本？

例如，如果我正在开发一个应用程序，每次对应用程序进行更改时，我都想从手机中完全卸载旧应用程序并安装新应用程序。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-19T17:37:16.320

1.  右键单击您的项目
2.  特性
3.  建造者
4.  新的
5.  程序
6.  在名称字段中，键入“卸载”作为名称（不需要引号）
7.  在位置，使用浏览文件系统按钮并定位您的 adb（类似于 C:\Users\petey\Android\android-sdk\platform-tools\adb.exe）
8.  在参数中，“卸载 your.app.package.goes.here”（不需要引号）
9.  点击确定
10.  选择卸载
11.  点击向上按钮，直到它在顶部

现在您应该能够调试和运行您的应用程序，并且每次都会卸载它。

如果这在 Windows 上太多了，请保持打开运行对话框（同时打开开始键和 r 按钮）并键入“adb uninstall your.app.package.goes.here”（无引号）。运行对话框具有自动完成和历史记录，让生活更轻松。您也可以通过终端或命令提示符执行此操作。确保平台工具在您的路径中。

# asp.net - Crystal Reports 查看器：无法打开连接错误

> ID：11105681
> 
> 赞同：1
> 
> 时间：2012-06-19T16:54:30.023
> 
> 标签：asp.net, sql-server, vb.net, crystal-reports

目前，我正在编写一段代码，该代码涉及使用 Crystal Reports Viewer 将 .RPT 文件导出为 PDF。我的问题是，除了我计划最终将其放在上面的网站之外，该代码几乎适用于所有内容。

当放置在网站上时，它会返回错误“无法打开连接”。我相信它连接到为了读取报告本身的数据而形成的 SQL Server 连接。

代码本身是可靠的，并且在我构建的单独控制台应用程序中使用时可以工作，以测试所述代码是在我的本地机器上还是在服务器本身上运行。它甚至在我在 Visual Studio 的虚拟主机中测试网站时运行。

我已将其范围缩小为某种权限问题，但我对各种权限设置的了解不足，无法确定哪些权限设置特别适用于这种情况。值得一提的是，网站上的其他页面都直接连接到同一个数据库，但它们是直接通过 Linq 进行的，而不是通过 Crystal Report Viewer。

那么有人知道我需要修改哪些设置才能修复连接错误。

补充说明：其他建议之一是确保有一个与代码使用的匹配的 ODBC DNS。我已经创建了这样的 DNS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:22:31.003

应用程序池决定了您的应用程序如何以多种方式运行。您可能可以将 web.config 配置为在您选择的凭据或访问级别下运行。

未阅读评论的人的解决方案：

将应用程序池的高级设置下的身份更改为所需的访问级别。

很高兴我能帮忙。- J

# linq - Linq 语法问题 - List.Find(Predicate 匹配）

> ID：11105682
> 
> 赞同：1
> 
> 时间：2012-06-19T16:54:33.013
> 
> 标签：linq, list, predicate

我正在尝试在其中添加一些逻辑。但我不确定如何添加第二个条件……
**例如：**

```
 foreach (FolderAssetInfo e in folderAssetsList)
        {
            var foundAsset = databaseAssetsList.Find(a => a.AssetFullName == e.AssetFullName);
            //I want to add an AND logic inside the parenthesis such as:
            //a => a.AssetFullName == e.AssetFullName && a.AssetFirstName == e.AssetFirstName)

            if (foundAsset != null)
            {
                Console.WriteLine(Found it!);
            }
        } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:58:19.580

你的语法很完美：

```
var foundAsset = databaseAssetsList.Find(a => a.AssetFullName == e.AssetFullName && a.AssetFirstName == e.AssetFirstName); 
```

基本上，这`Predicate<T>`只是返回布尔值的语法。注释 ( `a.AssetFullName == e.AssetFullName && a.AssetFirstName == e.AssetFirstName`) 中的语法将返回一个布尔值，如所写，因此它适用于谓词。

* * *

您确实有语法错误的一个地方是您调用`Console.WriteLine`- 这将需要您添加引号：

```
Console.WriteLine("Found it!"); // Quotes are required here! 
```

# python - 如何从 PYTHON 中的列表中提取数据

> ID：11105683
> 
> 赞同：-11
> 
> 时间：2012-06-19T16:54:34.030
> 
> 标签：python

假设我有如下数据：

```
A = [{'X1': val1, 'X2': 'val2', 'X3': 'val3', 'X4': val4}] 
```

如何提取 val1、val2、val3、val4？

最快的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:56:52.750

```
>>> A = [{'X1': val1, 'X2': 'val2', 'X3': 'val3', 'X4': val4}]
>>> list(A[0].values())
[val1,'val2','val3',val4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:56:23.233

我不太确定你为什么需要它，但是：

```
A[0].values() 
```

将 val1、val2、val3、val4 提取到一个列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:57:39.453

什么意思，提取？

您可以这样提取这些数据：

```
A[0].values() 
```

它们现在被提取了:)

# c# - 托管和使用 Web 服务的最佳实践？

> ID：11105689
> 
> 赞同：1
> 
> 时间：2012-06-19T16:55:07.523
> 
> 标签：c#, asp.net, web-services

我们在同一台服务器上运行的 asp.net 应用程序很少。在所有应用程序中，我们都有常见的 c# 类文件，例如`DataAccess`and `ConnectionManager`，在所有应用程序中都有一个本地副本，支持相同的通用功能来处理 DB，我计划将它们更改为 Web 服务并将它们托管在服务器上，所以每次我开发一个新的应用程序时，我都可以调用这些服务来处理数据管理。

我对网络服务没有太多有效的经验，请指出实现它的最佳方法。

**我有几个问题，例如：**

1.  我是否需要对其应用凭据，或者它是安全的，因为所有应用程序都将托管在同一台服务器上。
2.  一个简单的 Web 服务只会解决创建 WCF 或 SOAP 的目的或需要，同样没有经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:58:07.100

为什么要将它们公开为 Web 服务？

听起来您最好将文件放在 GAC 中并以这种方式在应用程序之间共享。

# android - 位图的 Android 堆管理 - Android 如何不耗尽内存？

> ID：11105691
> 
> 赞同：2
> 
> 时间：2012-06-19T16:55:12.780
> 
> 标签：android

我有一个`GridView`从网络加载的 JPEG。

我正在尝试找出我的应用程序的内存限制。

`GridView`我写了一个 Robotium 测试来快速从上到下滚动。即使我有近 300 个 JPEG，通过测量的堆和通过`Runtime.freeMemory()`的本机堆`Debug.getNativeHeapFreeSize()`也是稳定的。

我正在 Eclair 模拟器上进行测试，因为我的应用需要支持 Eclair。

Android 从哪里获得内存来存储位图？这些数字似乎没有加起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:02:53.043

您用于 GridView 的适配器是否重用视图？如果是这样，一旦不再引用它们，它就会从重用的图像视图中收集图像的垃圾。

# vba - 是否可以在不使用剪贴板的情况下使用 VBA 功能？仅使所有工作表值

> ID：11105695
> 
> 赞同：2
> 
> 时间：2012-06-19T16:55:29.330
> 
> 标签：vba, excel

我使用 Excel 2010 具有以下功能：

```
Private Function MakeAllSheetsValuesOnly(targetBookName As String)

If Excel.ActiveWorkbook.Name = Excel.ThisWorkbook.Name Then
Else

        Excel.Workbooks(targetBookName).Activate

        Dim mySheet
        For Each mySheet In Excel.ActiveWorkbook.Sheets
                    With mySheet
                                With .Cells
                                            .Copy
                                            .PasteSpecial Excel.xlPasteValues
                                End With
                                .Select
                                .Range("A1").Select
                    End With
                    Excel.ActiveWindow.SmallScroll Down:=-200
                    Excel.Application.CutCopyMode = False
        Next mySheet
End If

End Function                        'MakeAllSheetsValuesOnly 
```

它有效，但我宁愿不依赖剪贴板是否有另一种方法可以只制作所有工作表值？

刚刚找到了我在另一个与该主题相关的程序中使用的替代逻辑：

```
Dim rSource As Range
Dim rDest As Range

Set rSource = .Range("C5:BG" & .Range("B4").Value + 4)   
Set rDest = mySummaryBook.Sheets("Data_Measures").Cells(Rows.Count, 4).End(xlUp)(2, 1)
    With rSource
          Set rDest = rDest.Resize(.Rows.Count, .Columns.Count)
    End With
    rDest.Value = rSource.Value
Set rSource = Nothing
Set rDest = Nothing 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T17:08:36.703

也许是这样的：

```
With mySheet.UsedRange
    .Value = .Value
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:08:12.633

基于上面蒂姆的回答，这似乎是最有效的方法，您可以清理代码以使其更快，更少的资源密集型。见下文。没有太大的变化，但将有助于处理。首先不需要函数。子会做。无需选择和激活这么多东西：

```
Private Sub MakeAllSheetsValuesOnly(targetBookName As String)

If ActiveWorkbook.Name <> ThisWorkbook.Name Then

        Dim wkb As Workbook
        Set wkb = Workbooks(targetBookName)

        With wkb
            Dim mySheet As Worksheet
            For Each mySheet In wkb.Worksheets
                mySheet.UsedRange.Value = mySheet.UsedRange.Value
            Next mySheet
        End With
End If

End Sub 'MakeAllSheetsValuesOnly 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T17:15:42.547

您不需要为此提供功能。

蒂姆已经给了你一个很好的方法。这是另一种方式...

```
Sub Sample()
    MakeAllSheetsValuesOnly "Book2"
End Sub

Private Sub MakeAllSheetsValuesOnly(targetBookName As String)
    Dim mySheet As Worksheet
    Dim formulaCell As Range
    Dim aCell As Range

    Application.ScreenUpdating = False

    For Each mySheet In Workbooks(targetBookName).Sheets
        On Error Resume Next
        Set formulaCell = mySheet.Cells.SpecialCells(xlCellTypeFormulas)
        On Error GoTo 0

        If Not formulaCell Is Nothing Then
            For Each aCell In formulaCell
                aCell.Value = aCell.Value
            Next
        End If
    Next mySheet

    Application.ScreenUpdating = True
End Sub 
```

# java - Java中的“未处理的检查异常作为抛出的异常”

> ID：11105697
> 
> 赞同：3
> 
> 时间：2012-06-19T16:55:30.640
> 
> 标签：java

我正在学习 SCJP 6 学习指南 Exam_310-065 的第 5 章以及它说*的异常声明和公共接口部分*

> *“每个方法必须要么通过提供一个 catch 子句来处理所有已检查的异常，要么将每个未处理的已检查异常列为抛出的异常。”*

我们如何将每个未处理的已检查异常列为抛出的异常以及它在代码中的样子？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:57:34.277

它看起来像这样：

```
public void foo() throws SomeCheckedException, AnotherCheckedException
{
    // This method would declare it in *its* throws clause
    methodWhichThrowsSomeCheckedException();

    if (someCondition)
    {
        // This time we're throwing the exception directly
        throw new AnotherCheckedException();
    }
} 
```

有关详细信息，请参阅[JLS 中的第 8.4.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.6)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:59:48.177

例如，如果您有：

```
public void doSomething() throws SomeException { 
    ... 
    throw new SomeException();
} 
```

并且你想调用`doSomething`，你必须要么`catch`异常，要么声明使用它的方法也容易被 throwing `SomeException`，因此在调用堆栈中进一步传播它：

```
public void doSomethingElse() throws SomeException { 
    doSomething();
} 
```

或者

```
public void doSomethingElse() { 
    try { 
        doSomething();
    }
    catch (SomeException) { 
        // Error handling
    }
} 
```

考虑到[`RuntimeException`](http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimeException.html)s 不是检查异常，因此它们是该规则的一个例外。

# wpf - 如何在列表框中存储其他数据？

> ID：11105698
> 
> 赞同：1
> 
> 时间：2012-06-19T16:55:31.160
> 
> 标签：wpf, caliburn.micro

我有一个使用 Caliburn.Micro 的 wpf 应用程序。我需要将 ListBox 绑定到对象集合，但我想显示对象的一个​​字段，并且还想以某种方式将 Guid（另一个字段）附加到每个项目。你能告诉我我该怎么做吗？我不知道 Caliburn.Micro 是否有专门针对它的东西，或者我只需要使用 WPF。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:59:56.223

（对不起，我的英语不好）

如果 Guid 字段是对象的一部分，则无需将其存储在其他位置。列表框将显示一个字段，但它仍然绑定到原始对象，您可以使用`((MyObjectType)MyListBox.SelectedItem).Guid`. 使用 Caliburn 更容易，因为您只需要将 VM 上的属性绑定到 SelectedItem。

但是，如果 Guid**不是**您的对象的一部分，您可以使用 Tag 属性，正如 Paul Sasik 所说。我不喜欢使用 Tag 属性，所以这是解决此问题的另一种简单（且更灵活）的方法，您需要将对象封装在另一个对象上：

```
public class GuidObject<T>
{
    public T Instance {get;set;}
    public Guid Guid {get;set;}
} 
```

你可以像这样使用它：

```
//this is your original guidless items list
var myObjectsList = new[] { new MyObject { Name = "Dostoyevsky" }, 
                            new MyObject { Name = "Ozzy" } };

var myObjectsWithGuidList = new ObservableCollection<GuidObject<MyObject>>();

//encapsulate each MyObject on a GuidObject and include a Guid
//if your myObjectsList is already a List, you do not need to call ToList()
myObjectsList.ToList().ForEach(o => myObjectsWithGuidList.Add(new GuidObject<MyObject>() { Instance = o, Guid = Guid.NewGuid() }));

//now myObjectsWithGuidList contains a list of your itens and a Guid field, you can bind it to your ListBox 
```

[在这里](http://rextester.com/KPN63206)你可以看到这个运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:59:28.940

您可以使用每个 ListBox 对象的[Tag 属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag.aspx)来存储任意信息。

从链接：

> 此属性类似于其他 Microsoft 编程模型中的标记属性，例如 Microsoft Visual Basic for Applications (VBA) 或 Windows 窗体。标签旨在提供一个预先存在的属性位置，您可以在其中存储有关任何 FrameworkElement 的一些基本自定义信息，而无需您对元素进行子类化。
> 
> 由于此属性接受一个对象，因此您需要使用属性元素用法才能将可扩展应用程序标记语言 (XAML) 中的 Tag 属性设置为具有已知和内置类型转换器的对象以外的任何内容，例如细绳。以这种方式使用的对象通常不在标准的 Windows Presentation Foundation (WPF) 命名空间内，因此可能需要将命名空间映射到外部命名空间才能作为 XAML 元素引入。

# amazon-ec2 - EC2 Amazon 服务器卡住了

> ID：11105699
> 
> 赞同：0
> 
> 时间：2012-06-19T16:55:30.770
> 
> 标签：amazon-ec2, amazon-web-services

我通过 Amazon EC2 托管了我的网站。

总体而言，它运行良好，但有时（大约每小时 1 次）就像卡住了。当服务器控制台处于该状态时，我什至无法在服务器控制台上编写命令。

我从微型实例转移到小型实例，期望有所改进，但情况相同。

我应该在哪里解决这个问题的任何指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:24:54.783

这取决于各种因素。

**您应该关注的领域：**

*   如果您无法连接 (SSH) 到您的实例：从管理控制台检查系统日志。
*   如果您预计响应时间会很慢：从控制台检查您的 CloudWatch 指标。
*   验证您的实例上正在运行的进程。找出哪个进程正在占用 CPU % / Memory % 您可以通过`top`或 `ps -auwx`

# c# - 使用 ASP.NET MVC 3 上传文件

> ID：11105702
> 
> 赞同：3
> 
> 时间：2012-06-19T16:55:45.250
> 
> 标签：c#, asp.net-mvc-3, file-upload

我正在努力通过 ASP.NET MVC 3 公开一些基于 REST 的服务。这些服务将通过 JQuery 以及 Windows Phone Silverligh 应用程序进行访问。我知道如何与典型的服务交互。例如，我目前有如下内容：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult AddComment(string username, string comment)
{
  // Do stuff
  return Json(new { message = "Success" });
} 
```

我想公开一个允许用户上传文件的基于 REST 的服务。这里的诀窍是我还需要将一些数据与每个文件一起传递。但是，我不知道该怎么做。我发现的每个示例都只有一个文件。但我不确定

1.  如何接受附加数据
2.  从 JQuery 传递什么。

我传递的其他所有内容都只是字符串。但是，由于文件和一些字符串文本，在此我似乎将数据序列化为二进制格式。正因为如此，我不知道该怎么办。我说得有道理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:55:21.317

操作的签名应该是： public ActionResult MyAction(string username, string comment, HttpPostedFileBase file1) { ... }

MVC 绑定应检查请求并将表单提交与基于参数名称和类型的操作相匹配。

客户端表单必须具有 enctype = "multipart/form-data" 和 POST 方法。

JQuery 只会使用 $("#form").submit() 发布表单。

# entity-framework - 将 Collectionviewsource 与 WPF 数据网格和实体框架绑定

> ID：11105707
> 
> 赞同：2
> 
> 时间：2012-06-19T16:56:07.567
> 
> 标签：entity-framework, wpfdatagrid, collectionviewsource

我在 WPF 和 C# 方面相对较新。按照这个[示例](http://chateau-logic.com/content/wpf-entity-framework-listbox-datagrid-filtering-using-collectionviewsource-collectionview)，我创建了一个带有数据网格和两个组合框（FileName 和 PartID）的表单，我想用它们来过滤数据网格（surveyresponsesDataGrid）。

这是我的 WPF 表单的 XAML：

```
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dat="clr-namespace:System.Windows.Data;assembly=PresentationFramework"
    Title="Review Data" Height="446" Width="987" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:my="clr-namespace:SWA_IFR" Loaded="Window_Loaded">
<Window.Resources>
    <CollectionViewSource 
        Source="{Binding ElementName=surveyresponses, Path=FileName.SelectedItem}" 
        x:Key="cvs" Filter="fn_Filter" 
        x:Name="srView"
        CollectionViewType="{x:Type dat:ListCollectionView}" />
</Window.Resources>

<Grid>
    <DataGrid AutoGenerateColumns="False" EnableRowVirtualization="True" Height="247" HorizontalAlignment="Left" 
              ItemsSource="{Binding Source={StaticResource cvs}}" Margin="12,93,0,0" Name="surveyresponsesDataGrid" 
              RowDetailsVisibilityMode="VisibleWhenSelected" VerticalAlignment="Top" Width="941">
        <DataGrid.Columns>
            <DataGridTextColumn x:Name="fileUploadNameColumn" Binding="{Binding Path=FileUploadName}" Header="File Upload Name" Width="*" />
            <DataGridTextColumn x:Name="participantIDColumn" Binding="{Binding Path=ParticipantID}" Header="Participant ID" Width="*" />
            <DataGridTextColumn x:Name="quesIDColumn" Binding="{Binding Path=QuesID}" Header="Ques ID" Width="*" />
            <DataGridTextColumn x:Name="quesTypeColumn" Binding="{Binding Path=QuesType}" Header="Ques Type" Width="*" />
            <DataGridTextColumn x:Name="scoreIntColumn" Binding="{Binding Path=ScoreInt}" Header="Score Int" Width="*" />
            <DataGridTextColumn x:Name="scoreTextColumn" Binding="{Binding Path=ScoreText}" Header="Score Text" Width="*" />
            <DataGridTextColumn x:Name="scoreDescrColumn" Binding="{Binding Path=ScoreDescr}" Header="Score Descr" Width="*" />
        </DataGrid.Columns>
    </DataGrid>
    <ComboBox Height="29" HorizontalAlignment="Left" Margin="184,17,0,0" Name="FileName" VerticalAlignment="Top" Width="211" SelectionChanged="FileName_SelectionChanged" />
    <Label Content="Filter by File Upload Name" Height="29" HorizontalAlignment="Left" Margin="14,17,0,0" Name="label2" VerticalAlignment="Top" Width="159" />
    <ComboBox Height="29" HorizontalAlignment="Left" Margin="184,52,0,0" Name="PartID" VerticalAlignment="Top" Width="211"  />
    <Label Content="Filter by Participant ID" Height="29" HorizontalAlignment="Left" Margin="14,52,0,0" Name="label1" VerticalAlignment="Top" Width="159" />
</Grid> 
```

这是我的代码：

> 公共部分类 ReviewData ：窗口
> 
> ```
> {
>     SMEntities context = new SMEntities();
> 
>     public ReviewData()
>     {
>         InitializeComponent();
>     }
> 
>     private void Window_Loaded(object sender, RoutedEventArgs e)
>     {
> 
>         var filename = context.surveyresponses.Select(f => f.FileUploadName).Distinct();
>         this.FileName.ItemsSource = filename;
> 
>         var partid = context.surveyresponses.Select(p => p.ParticipantID).Distinct();
>         this.PartID.ItemsSource = partid;
> 
>     }
> 
>     void fn_Filter(object sender, FilterEventArgs e)
>     {
>         if (e.Item is surveyresponse)
>             e.Accepted = (e.Item as surveyresponse).FileUploadName.ToUpper().Contains(FileName.Text.ToUpper());
>         else
>             e.Accepted = true;
>     }
> 
>     private void RefreshList()
>     {
>         if (surveyresponsesDataGrid.Items is CollectionView)
>         {
>             CollectionViewSource csv = (CollectionViewSource)FindResource("cvs");
>             if (csv != null)
>                 csv.View.Refresh();
>         }
>     }
> 
>     private void srFilter_TextChanged(object sender, TextChangedEventArgs e)
>     {
>         RefreshList();
>     }
> } } 
> ```

第一个问题是我认为在 Window.Resource 部分中的 CollectionViewSource 设置不正确，但我找不到任何关于关闭的明确指导。EF 类是surveyresponses，但不确定我是否正确设置了Path 属性——目前它设置为第一个组合框FileName 的SelectedItem。我的目标是仅过滤与 FileName 组合框中的选择匹配的条目的数据网格。

第二个问题是我不确定如何使用辅助过滤器，这样一旦设置了第一个过滤器，选择 PartId 组合框将根据第二个字段（参与者 ID）进一步过滤数据网格。

我错过了一些基本的东西，看不出它是什么。

感谢您的指导。

# java - TripleDES 算法：从 .NET 到 Java

> ID：11105718
> 
> 赞同：-5
> 
> 时间：2012-06-19T16:56:37.660
> 
> 标签：java, android, .net, encryption, 3des

我有这个 vb.net 代码（但我认为含义代码也与 c# 等效），我必须在 Java 中复制它并且无论如何**我都无法修改**它（只是复制）：

```
Public Shared Function Encrypt(ByVal plainText As String, Optional key As String = "") As String

    If String.IsNullOrEmpty(key) Then key = "sfdjf48mdfdf3054"

    Dim encrypted As String = Nothing
    Try

        Dim inputBytes As Byte() = ASCIIEncoding.ASCII.GetBytes(plainText)
        Dim pwdhash As Byte() = Nothing

        'generate an MD5 hash from the password.
        'a hash is a one way encryption meaning once you generate
        'the hash, you cant derive the password back from it.
        Dim hashmd5 As New MD5CryptoServiceProvider()
        pwdhash = hashmd5.ComputeHash(ASCIIEncoding.ASCII.GetBytes(key))
        hashmd5 = Nothing

        ' Create a new TripleDES service provider
        Dim tdesProvider As New TripleDESCryptoServiceProvider()
        tdesProvider.Key = pwdhash
        tdesProvider.Mode = CipherMode.ECB

        encrypted = Convert.ToBase64String(tdesProvider.CreateEncryptor().TransformFinalBlock(inputBytes, 0, inputBytes.Length))

    Catch e As Exception
        Dim str As String = e.Message
        Throw
    End Try
    Return encrypted
End Function 
```

确切地说，这是一个 .NET 实用程序类函数。

现在，

我不知道如何复制

```
TripleDESCryptoServiceProvider() 
```

在java代码中我开始写一些代码，但我不知道如何继续：

```
public static String encrypt(String plaintext, String enctoken){

    if(enctoken == null)
        enctoken = "sfdjf48mdfdf3054";

    String encrypted = null;

    byte[] plaintextByte = EncodingUtils.getAsciiBytes(plaintext);

    //nel caso non funzionasse provare getBytes semplicemente
    byte[] pwd = EncodingUtils.getAsciiBytes(Connessione.md5(enctoken));        

    try {
        Cipher cipher = Cipher.getInstance("DESEDE/ECB/NoPadding");
        SecretKeySpec myKey = new SecretKeySpec(pwd,"DESede");

        cipher.init( Cipher.ENCRYPT_MODE, myKey);

        try {
            byte[] encryptedPlainText= cipher.doFinal(plaintextByte);

            encrypted = Base64.encodeToString(encryptedPlainText, 0); 
            return encrypted;

        } catch (IllegalBlockSizeException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (BadPaddingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       

    return "";
} 
```

**更新：**

我刚刚更新了代码。现在应该不错了。Enctoken String 将是一个字符串数据表示（刚刚知道）。这样，只有当第二个参数为 NULL 时才设置固定键

**更新 2**

不幸的是，c# hash 总是与 Java hash 不同！！如何在java中复制这个？？

```
 Dim hashmd5 As New MD5CryptoServiceProvider()
    pwdhash = hashmd5.ComputeHash(ASCIIEncoding.ASCII.GetBytes(key))
    hashmd5 = Nothing

    ' Create a new TripleDES service provider
    Dim tdesProvider As New TripleDESCryptoServiceProvider()
    tdesProvider.Key = pwdhash
    tdesProvider.Mode = CipherMode.ECB

    encrypted = Convert.ToBase64String(tdesProvider.CreateEncryptor().TransformFinalBlock(inputBytes, 0, inputBytes.Length)) 
```

我以这种方式尝试过，但它不起作用：

**哈希**

```
public static final String md5(byte[] s) { 
    try { 

        MessageDigest m = MessageDigest.getInstance("MD5");
        byte[] digest = m.digest(s);
        String hash = EncodingUtils.getAsciiString(digest, 0, 16);
        Log.i("MD5", "Hash: "+hash);

        return hash;

    } catch (NoSuchAlgorithmException e) {
    e.printStackTrace();
    }
    return "";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T17:39:54.823

自己修的！以下函数给出相同的 MD5 HASH 结果：

JAVA哈希MD5

```
public static final byte[] md5(String s) { 
    try { 

        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] messageDigest = md.digest(s.getBytes("UTF-8"));

        String md5 = EncodingUtils.getString(messageDigest, "UTF-8");

        Log.i("Function MD5", md5);
        Log.i("Function MD5 Length","Length: "+ md5.length());

        return messageDigest;

    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    return null;
} 
```

VB.NET 哈希 MD5

```
Dim hashmd5 As New MD5CryptoServiceProvider()
pwdhash = hashmd5.ComputeHash(ASCIIEncoding.ASCII.GetBytes(key)) 
```

而且，TRIPLE-DES ECB JAVA 是

```
try {
        Cipher cipher = Cipher.getInstance("DESEDE/ECB/PKCS5Padding");
        SecretKeySpec myKey = new SecretKeySpec(hash,"DESede");

        cipher.init(Cipher.ENCRYPT_MODE, myKey);

        try {
            byte[] encryptedPlainText = cipher.doFinal(plaintextByte);

            encrypted = Base64.encodeToString(encryptedPlainText, 0); 
            Log.i("ENCRYPT", "Pwd encrypted: "+encrypted);
            return encrypted;

        } catch (IllegalBlockSizeException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (BadPaddingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

TRIPLE-DES VB.NET 是

```
' Create a new TripleDES service provider
    Dim tdesProvider As New TripleDESCryptoServiceProvider()
    tdesProvider.Key = pwdhash
    tdesProvider.Mode = CipherMode.ECB

    encrypted = Convert.ToBase64String(tdesProvider.CreateEncryptor().TransformFinalBlock(inputBytes, 0, inputBytes.Length)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:57:17.547

ECB 模式没有 IV 之类的东西（这是您的应用程序中不安全的事情之一，您至少应该使用 CBC 模式）。

至于秘钥，你刚刚算了一个，为什么会卡在这里？你得到什么例外？同样，使用 ASCII 字符而不是完整字节是不安全的；它使您容易受到（至少）暴力攻击。

# matlab - 为什么 linprog 只给出 x1 或 x2 的一个值，而不是两者的组合？

> ID：11105719
> 
> 赞同：0
> 
> 时间：2012-06-19T16:56:52.187
> 
> 标签：matlab, mathematical-optimization, linear-programming

嗨，我有以下使用 linprog 的代码

```
for K = 1:3;
   for M = 1:3; 

      PV_output(:,:,K) = real(PV_power_output(:,:,K));
      PV =reshape(PV_output(:,:,1),8760,1); 
      WT_output(:,:,M) =  WT_power_output(:,:,M);
      WT = reshape(WT_output(:,:,1),8760,1);
    PVenergy = sum(sum(PV_output(:,:,1)));
   WTenergy = sum(sum(WT_power_output(:,:,1)));
   % Linprog
   f = [((CRF*CC_PV)/PVenergy)+OM_PV; ((CRF*CC_WT)/WTenergy)+OM_WT];
   A(:,:) = [-PV  -WT];
   b(:,:)  = -0.25.*Demand(:);
   lb = zeros(2,1);
 ub = [max_PV_area/PV_area; max_WT_area/WT_area]';
   [x(:,K,M), fval, exitflag] = linprog(f,A,b,[],[],lb,ub)
    end
end 
```

其中 PV = 8760x2，WT = 8760 x 2 和 x = 2x1。当我运行这个程序时，优化会以退出标志 1 收敛，但我要么得到 x1 =0 的值，要么得到等于某个整数的 x2 值。

为什么输出不给出混合结果（即 x1 和 x2 的非零值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:04:26.300

因为线性规划求解器将返回由约束定义的多面体顶点处的解。最佳解决方案将始终位于这样的顶点。

# image - matlab中带有图像的sub2ind和矩阵矩阵的问题

> ID：11105722
> 
> 赞同：0
> 
> 时间：2012-06-19T16:56:53.560
> 
> 标签：image, matlab, image-processing

我在这里发布了为什么我在探索一种技术时遇到的代码。

```
 Y = repmat((1:m)', [1 n]);
   X = repmat(1:n, [m 1]) - labels_left;
   X(X<1) = 1;
   indices = sub2ind([m,n],Y,X);

  final_labels = labels_left;
  final_labels(abs(labels_left - labels_right(indices))>=1) = -1; 
```

在上面的代码中，左边的标签是单通道图像。[mn] 是该图像的大小。我想知道这个 sub2ind 在上面的代码中是如何工作的。而且我在最后一个包含的语句中也面临问题

```
 labels_right(indices) 
```

上面的表达式的计算结果是什么。这里的标签右也是一个图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:53:04.053

也许一个更小的例子可以帮助理解：

```
%# image matrix
M = rand(4,3)
[m n] = size(M)

%# meshgrid, and convert to linear indices
[X,Y] = meshgrid(1:n,1:m)
indices = sub2ind([m,n],Y,X)

%# extract those elements
M(indices) 
```

矩阵 M：

```
>> M
M =
      0.95717      0.42176      0.65574
      0.48538      0.91574     0.035712
      0.80028      0.79221      0.84913
      0.14189      0.95949      0.93399 
```

所有点的 (x,y) 坐标网格：

```
>> X,Y
X =
     1     2     3
     1     2     3
     1     2     3
     1     2     3
Y =
     1     1     1
     2     2     2
     3     3     3
     4     4     4 
```

转换为线性索引：

```
>> indices
indices =
     1     5     9
     2     6    10
     3     7    11
     4     8    12 
```

然后我们使用这些索引对矩阵进行索引。

```
>> M(indices)
ans =
      0.95717      0.42176      0.65574
      0.48538      0.91574     0.035712
      0.80028      0.79221      0.84913
      0.14189      0.95949      0.93399 
```

请注意：`M(indices(i,j)) = M(Y(i,j)),X(i,j))`.

# python - 在 Pandas 中旋转 DataFrame 以输出到 CSV

> ID：11105728
> 
> 赞同：5
> 
> 时间：2012-06-19T16:57:17.490
> 
> 标签：python, dataframe, pandas

这是一个简单的问题，在网上很难找到答案。情况如下：

```
>>> A
[('hey', 'you', 4), ('hey', 'not you', 5), ('not hey', 'you', 2), ('not hey', 'not you', 6)]
>>> A_p = pandas.DataFrame(A)
>>> A_p
         0        1  2
0      hey      you  4
1      hey  not you  5
2  not hey      you  2
3  not hey  not you  6
>>> B_p = A_p.pivot(0,1,2)
>>> B_p
1        not you  you
0                    
hey            5    4
not hey        6    2 
```

这并不是文档中所建议的`pivot`——在那里，它显示了左上角没有 1 和 0 的结果。这就是我正在寻找的，一个打印为的 DataFrame 对象

```
 not you  you
hey            5    4
not hey        6    2 
```

问题是正常行为会导致 csv 文件的第一行是

```
0,not you,you 
```

当我真的想要

```
not you, you 
```

当普通的 csv 文件（带有前面的“0”）读入 R 时，它没有正确设置框架对象的列名和行名，导致痛苦的手动操作以获取正确的格式。有没有办法让枢轴给我一个 DataFrame 对象，而左上角没有额外的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T15:31:58.657

好吧，你有：

```
In [17]: B_p.to_csv(sys.stdout)
0,not you,you
hey,5.0,4.0
not hey,6.0,2.0

In [18]: B_p.to_csv(sys.stdout, index=False)
not you,you
5.0,4.0
6.0,2.0 
```

但我假设你想要行名。将索引名称设置为 None ( `B_p.index.name = None`) 会给出一个前导逗号：

```
In [20]: B_p.to_csv(sys.stdout)
,not you,you
hey,5.0,4.0
not hey,6.0,2.0 
```

`write.csv`这大致匹配（忽略带引号的字符串）R 在when中写入的内容`row.names=TRUE`：

```
"","a","b"
"foo",0.720538259472741,-0.848304940318957
"bar",-0.64266667412325,-0.442441171401282
"baz",-0.419181615269841,-0.658545964124229
"qux",0.881124313748992,0.36383198969179
"bar2",-1.35613767310069,-0.124014006180608 
```

这些有帮助吗？

编辑：`index_label=False`今天添加了您想要的选项：

```
In [2]: df
Out[2]: 
       A  B
one    1  4
two    2  5
three  3  6

In [3]: df.to_csv('foo.csv', index_
index_exp     index_label=  index_name=   

In [3]: df.to_csv('foo.csv', index_name=False)

In [4]: 
11:24 ~/code/pandas  (master)$ R

R version 2.14.0 (2011-10-31)
Copyright (C) 2011 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

re> read.csv('foo.csv')
      A B
one   1 4
two   2 5
three 3 6 
```

# php - 原则 2：更新表 SET 字段 = 字段 + 1 WHERE id = 1

> ID：11105729
> 
> 赞同：2
> 
> 时间：2012-06-19T16:57:24.260
> 
> 标签：php, doctrine-orm

我想完成这个（mysql）查询：

```
UPDATE table SET field = field + 1 WHERE id = 1 
```

使用 Doctrine 2 实体执行上述操作的正确方法是什么？

***编辑**

我正在寻找一种方法来`$entity->incrementField()`执行上面的 mysql 查询`flush()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:31:16.313

我似乎无法找到使用实体本身执行此操作的方法。我现在已经通过使用会增加的常规 DQL 解决了这个问题，并使用结果更新模型/实体。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-23T21:48:44.087

它不会导致完全相同的查询，但也许这就是您正在寻找的？

```
class MyEntity {
    private $field;

    public function incrementField() {
        $this->field++;
    }
} 
```

# java - 如何仅将部分图像用于 LWJGL

> ID：11105741
> 
> 赞同：0
> 
> 时间：2012-06-19T16:57:54.920
> 
> 标签：java, image, load, textures, lwjgl

嘿，我想知道是否有办法只获取图像的一部分并将其转换为 LWJGL 的纹理。这是我加载图像并用作纹理的基本代码。PNG 解码器来自 twl 库。在此先感谢您的帮助。

```
int floorTexture = glGenTextures();
        {
            InputStream in = null;
            try {
                in = new FileInputStream("res/floor.png");
                PNGdecoder decoder = new PNGdecoder(in);
                ByteBuffer buffer = BufferUtils.createByteBuffer(4 * decoder.getWidth() * decoder.getHeight());
                decoder.decode(buffer, decoder.getWidth() * 4, Format.RGBA);
                buffer.flip();
                in.close();
                glBindTexture(GL_TEXTURE_2D, floorTexture);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
                glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, decoder.getWidth(), decoder.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
                glBindTexture(GL_TEXTURE_2D, 0);
            } catch (FileNotFoundException ex) {
                System.err.println("Failed to find the texture files.");
                Display.destroy();
                System.exit(1);
            } catch (IOException ex) {
                System.err.println("Failed to load the texture files.");
                Display.destroy();
                System.exit(1);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:07:03.387

您可以将 PNG 解码为 BufferedImage，然后使用 getRGB() 提取您感兴趣的区域的数据。您可能需要一些额外的代码来将 (A)RGB 整数转换为 GL 接受的字节缓冲区格式。有关执行此操作的更详细示例，请查看此问题的答案[`LWJGL Textures and Strings`](https://stackoverflow.com/questions/10801016/lwjgl-textures-and-strings)。

然而，与此不同的是，在 GL 中，您通常使用纹理坐标来为您正在渲染的内容选择正确的子图像。

这种方法的优点是可以使用单个[`glDrawElements`](http://www.opengl.org/sdk/docs/man/xhtml/glDrawElements.xml)/[`glDrawArrays`](http://www.opengl.org/sdk/docs/man/xhtml/glDrawArrays.xml)调用来渲染具有不同纹理的多边形，提高渲染性能。

# iphone - 将 ASCII 编码的字符串转换为 UTF8？

> ID：11105742
> 
> 赞同：2
> 
> 时间：2012-06-19T16:57:56.933
> 
> 标签：iphone, objective-c, xcode

我有一个用 ASCII 编码的字符串，但我需要将它转换为用 UTF8 编码的字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:01:38.133

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:15:32.710

ASCII 字符串是 UTF-8 字符串，因为 ASCII 是 UTF-8 的严格子集。无需转换。

```
NSString *myString = @"ascii string"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T02:51:02.877

```
NSData *data = [decode dataUsingEncoding:[NSString defaultCStringEncoding]];
decode = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

# batch-file - 为什么当我使用“-d64”时jvm会抛出“无法识别的选项”？

> ID：11105743
> 
> 赞同：7
> 
> 时间：2012-06-19T16:58:02.923
> 
> 标签：batch-file, jvm, cygwin

我正在设置我的 JAVA_OPTS：“-d64 -server -XX:+CMSClassUnloadingEnabled”，然后是一些。

我以为 -d64 是指定机器是 64 位还是在 64 位上运行！？

这似乎在 Mac 上运行良好。当我使用 Cygwin 在 Windows 7 上尝试运行 shell 脚本时，它会中断。如果我删除 -d64，一切正常。

我也使用 Windows 批处理文件做了同样的事情，-d64 仍然抛出同样的错误。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T17:19:43.217

该`-d64`选项特定于 Solaris/Linux。在 Windows 上，该选项[不可用](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)

由于 Mac OsX 是基于 linux 的，因此该选项可以在那里工作。在 Windows 上，您需要通过选择可执行文件来选择 JVM（64 位/32 位版本是单独安装的）——直接命名可执行文件或将其 bin 正确添加到 PATH 环境变量

# c# - LINQ to XML 调用 .Value 返回空对象

> ID：11105744
> 
> 赞同：1
> 
> 时间：2012-06-19T16:58:04.290
> 
> 标签：c#, .net, xml, linq, linq-to-xml

在更改 .csproj 文件中的设置的程序中，以下 linq to xml 语句始终返回“对象未设置为对象的实例”：

```
static void Main(string[] args)
    {
        string rootDir =
            @"e:\path\to\proj\file\foo.csproj";

        var xDoc = XDocument.Load(rootDir);
        var ns = xDoc.Root.Name.Namespace;

        var hasConditions = xDoc.Root.Elements(ns + "PropertyGroup")
            .Where(x => x.Attribute("Condition") != null);

        Console.WriteLine(hasConditions.Count());

        try
        {
            var debugConfig = xDoc.Root.Elements(ns + "PropertyGroup")
                .Where(x => x.Attribute("Condition")
                .Value == " '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ");

            Console.WriteLine(debugConfig.Count());
        }
        catch
        {
            Console.WriteLine("doesn't work");
        }
    } 
```

完整的项目文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>8.0.30703</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{F08E2AEB-A1C2-43F9-A93C-38AF2A99C96A}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>CommunicationSystem.XmlLoading.Common</RootNamespace>
    <AssemblyName>CommunicationSystem.XmlLoading.Common</AssemblyName>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
    <SccProjectName>SAK</SccProjectName>
    <SccLocalPath>SAK</SccLocalPath>
    <SccAuxPath>SAK</SccAuxPath>
    <SccProvider>SAK</SccProvider>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
    <RunCodeAnalysis>true</RunCodeAnalysis>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
    <RunCodeAnalysis>true</RunCodeAnalysis>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'DEV|AnyCPU'">
    <DebugSymbols>true</DebugSymbols>
    <OutputPath>bin\DEV\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <DebugType>full</DebugType>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'SIT|AnyCPU'">
    <DebugSymbols>true</DebugSymbols>
    <OutputPath>bin\SIT\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <DebugType>full</DebugType>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'QA|AnyCPU'">
    <OutputPath>bin\QA\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <Optimize>true</Optimize>
    <DebugType>pdbonly</DebugType>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="StorageSystem">
      <HintPath>..\..\..\GlobalDependencies\StorageSystem\beta\StorageSystem.dll</HintPath>
    </Reference>
    <Reference Include="System" />
    <Reference Include="System.Configuration" />
    <Reference Include="System.Core" />
    <Reference Include="System.Web" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Common\IEnumerableExtensions.cs" />
    <Compile Include="Common\XmlLoaderBase.cs" />
    <Compile Include="Configuration\SchemasConfigurationElement.cs" />
    <Compile Include="Configuration\SettingsConfigurationElement.cs" />
    <Compile Include="Configuration\TConfigurationElementCollection.cs" />
    <Compile Include="Configuration\XmlLoadingConfigurationSection.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <Compile Include="Validation\XValidationResult.cs" />
    <Compile Include="Validation\XValidator.cs" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
   Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
</Project> 
```

我的怀疑是它与属性值中的空格有关，但我不能确定....还有其他人面临类似的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:59:25.180

我怀疑这是问题所在：

```
x.Attribute(ns + "Condition") 
```

您*确定*该属性在命名空间中吗？（与元素名称不同，属性名称不会从 . 继承“默认”命名空间`xmlns="..."`。）尝试：

```
x.Attribute("Condition") 
```

编辑：如果问题确实是*所有*元素上都不存在该属性，那么解决方案比arcain 提出的解决方案更简单。您可以只使用强制转换为字符串：

```
var debugConfig = xDoc.Root.Elements(ns + "PropertyGroup").Where(x => 
      (string) x.Attribute("Condition") == " [long string here] "); 
```

当调用 null 时，字符串转换将返回`null`，这是您想要的。

（为混乱的格式道歉 - SO 上的短线使它变得棘手。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:16:26.500

我不得不执行类似的任务，我遇到了同样的问题。根本原因是该`Condition`属性可能并不存在于所有`PropertyGroup`元素上。这是来自我的[LINQPad](http://www.linqpad.net/)脚本的查询（这是 .Dump() 方法的来源。）

```
string projFile = @"FileName";

XNamespace ns = "http://schemas.microsoft.com/developer/msbuild/2003";
XDocument doc = XDocument.Load(projFile);

var query = from node in doc.Root.Descendants(ns + "PropertyGroup")
        where node.Attribute("Condition") != null // this fixed the issue
        && node.Attribute("Condition").Value.IndexOf(
                "'$(Configuration)|$(Platform)' == 'Debug|AnyCPU'",
                StringComparison.OrdinalIgnoreCase) >= 0
        select node;

query.Dump(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:23:39.973

您已经有了答案，但我使用[这个 xml 库](https://github.com/ChuckSavage/XmlLib/)和这个简单的 XPath 解决了它：

```
XElement root = XElement.Load(file);
XElement node = root.XPathElement("//PropertyGroup[@Condition={0}]",
                " '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "); 
```

# c# - 如何使用2*Xeon E5的电源？

> ID：11105745
> 
> 赞同：2
> 
> 时间：2012-06-19T16:58:06.013
> 
> 标签：c#

我有两台服务器，一台运行一个 E3-1220 处理器，另一台运行两个 E5-2640 处理器。[http://ark.intel.com/compare/52269,64591](http://ark.intel.com/compare/52269,64591)

问题是两个处理器服务器的价格要贵 5 倍，但我的程序执行速度要慢 2 倍，请参阅我关于 stackoverflow[线程池程序的问题在更快的服务器上运行速度要慢得多](https://stackoverflow.com/questions/11096169/threadpool-program-runs-much-slower-on-much-faster-server)）

我写了这个简单的程序来比较 E3-1220 和 E5-2640 它没有做任何事情，只是我在现实世界中做的事情：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;

namespace TestSpeed
{
    class Program
    {
        private static double a;
        private static double b;
        private static double c = 0.34;
        private static double d = 0.15;
        private static double e = 0.25;
        private static double f = 0.03;
        private static double g = 8;

        static void Main(string[] args)
        {
            Stopwatch sw = Stopwatch.StartNew();
            for (int i = 0; i < 1000000000; i++)
            {
                double e = a;
                a = 1;
                double f = b;
                b = 1;
                if (true)
                {
                    double h = 1.83;

                    double j = Math.Ceiling(h/d);
                    if (j <= c)
                    {
                        c = Math.Ceiling(h/d + e);
                    }
                    else if (j > c)
                    {
                        c = Math.Ceiling(h/d - e);
                    }
                    if (c <= -0.5)
                    {
                        a = a - f*c;
                    }

                    double k = Math.Floor(h/d);
                    if (k <= g)
                    {
                        g = Math.Floor(h/d + e);
                    }
                    else if (k > g)
                    {
                        g = Math.Floor(h/d - e);
                    }
                    if (g > 0.5)
                    {
                        b = b + f*g;
                    }
                }

                bool result = (Math.Abs(e - a) > 0) ||
                              (Math.Abs(f - b) > 0);
            }
            long time = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
            Console.WriteLine(time);

        }
    }
} 
```

E5-2640 是新的 Intel 处理器，我想它应该至少比以前的 E3-1220 好一点，几乎便宜 5 倍。

但结果是：Xeon E5-2640 是 31182（~31 秒），Xeon E3-1220 是 26650（~26 秒）。所以比率是 31182/26650 = 1.17 时钟比率是 3 / 2.5 = 1.2

所以Xeon E3和Xeon E5绝对没有区别。E3 的时钟频率提高了 20%，因此工作速度提高了 20%。我能做什么，也许我可以以某种方式使用一些特殊的 Xeon E5 指令？

非常烦人的是，在实际应用中至强 E5 比至强 E3 慢 2 倍（！！）...（请参阅我的链接问题）

所以问题是 - 我可以做些什么来使用 2 * Xeon E5 配置的力量？我应该使用哪些技术可能会使用任何指南如何在 C# 上编程以使用多处理器配置的强大功能？

我只是让我失望的是，我花了 10 000 美元购买了执行我的程序的服务器比我以 1 500 美元购买的现有服务器慢 2 倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:05:31.650

根据我的一点经验，Task Parallel Library 在创建正确数量的线程以最大化 CPU 方面做得很好。查看[http://msdn.microsoft.com/en-us/library/dd537609.aspx](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:58:00.560

首先：这个测试不决定什么服务器是最好的（10 000 美元或 1 500 美元），因为在价格中包括了几件事，比如材料的质量、电源、HD 等等等等等等。你的test 可以计算算术运算的数量（主要涉及处理器和内存总线）。

在我的 Xeon E5410 @ 2.33GHz - 4GB RAM（虚拟机 - 4 核）中，我得到以下结果：

```
425872098
Time Elapsed: 00:05:56.9214226 
```

但最大的错误是：服务器只使用了 25% 的电源（1 个核心）。

所以我使用了[并行任务库](http://msdn.microsoft.com/en-us/library/dd537608.aspx)，4 个内核以 100% 的功率耗尽。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TestSpeed
{
    class Program
    {
        private static double a;
        private static double b;
        private static double c = 0.34;
        private static double d = 0.15;
        private static double e = 0.25;
        private static double f = 0.03;
        private static double g = 8;

        static void Main(string[] args)
        {
            Stopwatch sw = Stopwatch.StartNew();
            Parallel.For(0, 1000000000, (p) =>
            {
                double e = a;
                a = 1;
                double f = b;
                b = 1;
                if (true)
                {
                    double h = 1.83;

                    double j = Math.Ceiling(h / d);
                    if (j <= c)
                    {
                        c = Math.Ceiling(h / d + e);
                    }
                    else if (j > c)
                    {
                        c = Math.Ceiling(h / d - e);
                    }
                    if (c <= -0.5)
                    {
                        a = a - f * c;
                    }

                    double k = Math.Floor(h / d);
                    if (k <= g)
                    {
                        g = Math.Floor(h / d + e);
                    }
                    else if (k > g)
                    {
                        g = Math.Floor(h / d - e);
                    }
                    if (g > 0.5)
                    {
                        b = b + f * g;
                    }
                }

                bool result = (Math.Abs(e - a) > 0) ||
                              (Math.Abs(f - b) > 0);
            });
            sw.Stop();
            long time = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
            Console.WriteLine(time);
            Console.WriteLine(sw.Elapsed.ToString());
            Console.Read();
        }
    }
} 
```

结果：

```
359930438
Time Elapsed: 00:05:01.6560249 
```

差不多一分钟，好吧，这意味着无论你可以同时运行多少个线程，差异都是很小的。也许缓存（L1 或 L2）不足以容纳一些变量并强制更多的 RAM 往返，或者答案可能不在您的处理器中，而是在您的**代码**中。

# java - 构建一个新的应用程序：Java jax-rs ee6 restful web 服务和一个使用backbone.js 的html5 前端

> ID：11105747
> 
> 赞同：1
> 
> 时间：2012-06-19T16:58:09.627
> 
> 标签：java, html, session, rest, backbone.js

我们目前正在评估构建一个包含以下技术的新 Web 应用程序：

后端：ee6 jax-rs restful web service

前端：使用backbone.js（和其他各种库）的html5 UI

问题是，实现安全会话的最佳方式是什么？限制是我们不能使用 oAuth（由于我们将使用旧的登录服务）。我们需要金融行业的安全级别。

我们正在考虑使用 HTTPS 基本身份验证与其余服务器（后端），并使用主干.js 的会话优雅地处理前端。

采用这种策略有哪些安全隐患？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:10:05.690

当您处理安全问题时，您必须记住，您的安全性与最薄弱的环节一样强大。我希望您完全意识到您需要保护所有通信，而不仅仅是登录。
另外，您将使用什么密钥长度？128位？
我建议您查看[SPEGNO](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/lab/part6.html) .. 我认为这可能会对您有所帮助。

# rally - 使用 Rally C# API 查询备用工作区

> ID：11105753
> 
> 赞同：1
> 
> 时间：2012-06-19T16:58:26.043
> 
> 标签：rally

我正在使用 C# Rally Rest API Wrapper 进行一堆 Rally API 调用，并取得了巨大成功……除非我尝试查询非默认工作区。例如，使用以下代码：

```
public Project GetProject(string objectID)
    {
        Request request = new Request("Project");
       // request.Workspace = "2354109555"; //"CTO:SST";
        request.Query = new Query("ObjectID", Query.Operator.Equals, objectID);
        QueryResult q = _restApi.Query(request);
        foreach (var result in q.Results)
        {
            return CreateProjectFromResult(result);
        }
        return null;
    } 
```

如果 objectID 在默认工作区中，则找到该项目。如果不是，则找不到。我尝试将 Workspace 属性设置为工作区对象 ID、工作区名称，而不是设置它.. 无济于事。我还进入了 Rally，切换了我的默认工作区，并验证了成功获取项目的切换。

我还三次检查了项目和工作区的 objectID。

我被正式难住了。有没有人有神奇的答案或其他我可以尝试的东西？

非常感谢，
奥兰多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:19:19.430

我认为你是 99% 的方式。当您在 Request 对象上指定工作区属性时，它需要采用 ref 的形式，即：

```
 request.Workspace = "/workspace/2354109555"; //"CTO:SST"; 
```

进行修改后，您的代码应该从该工作区中提取。

# node.js - 更改 Mongoose 流上的查询

> ID：11105755
> 
> 赞同：1
> 
> 时间：2012-06-19T16:58:40.203
> 
> 标签：node.js, mongoose

我有一个带有一些 Socket.io、Express 和 Mongoose 的 NodeJS 服务器脚本。现在我有一个流查询，问题是我想在某个时候更改查询。

例子：

```
var stream = Collection.find({date:{'$gt':currentTime}}).tailable().stream(); 
```

这完美地工作并将事件发送到：stream.on('data'); 所以这很酷。

但是我如何在流式传输的同时更改该查询？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:45:18.827

你不能。基本上，您要求一种方法来更改现有游标所绑定的查询，而这是不可能的。您必须关闭现有的查询流并打开一个新的。

# amazon-ec2 - 在 ec2 中部署的 tomcat 出现 503 错误

> ID：11105756
> 
> 赞同：0
> 
> 时间：2012-06-19T16:58:47.850
> 
> 标签：amazon-ec2, tomcat6

我在两个亚马逊 ec2 实例上部署了 tomcat 6.0.28，它们共享一个通用的 mysql 5.5 数据库。我还使用了弹性负载均衡器。当我在本地机器上使用 tomcat 运行程序时，一切都很好。

但是当我在 EC2 中使用这些时，我收到以下错误，

java.io.IOException：服务器返回 HTTP 响应代码：503 for URL:。

有人可以帮助我吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:35:13.940

那么问题在于会话。我没有启用粘性。因此，下次负载均衡器路由到不同的实例。我在弹性负载均衡器中启用了粘性，现在一切都很好。

# asp.net - ASP.NET 通用提供程序和会话状态

> ID：11105759
> 
> 赞同：2
> 
> 时间：2012-06-19T16:59:04.447
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, azure-sql-database, universal-provider

我正在开发一个 ASP.NET MVC 4 网站，并且正在使用[Microsoft ASP.NET Universal Providers](http://nuget.org/packages/Microsoft.AspNet.Providers)。我计划部署到 Windows Azure 并使用 SQL 数据库。为了在我的本地 SQL Server 2008 数据库上初始化成员资格、配置文件和角色，我通过 ASP.NET 网站管理工具创建了一个新用户。如何初始化会话？

当我的应用程序运行时，我自然会得到一个 SqlException 说“无效的对象名称 dbo.Sessions”。在 Windows Azure 上进行测试时，这不是问题。dbo.Sessions 是自动创建的。从 Azure 上的 dbo.Sessions 生成创建表脚本并将其应用到我的本地 SQL 数据库后，我可以在本地运行。

网络配置：

```
<membership hashAlgorithmType="SHA1" defaultProvider="DefaultMembershipProvider">
  <providers>
    <clear />
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" passwordFormat="Hashed" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<profile enabled="false" defaultProvider="DefaultProfileProvider">
  <providers>
    <clear />
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</profile>
<roleManager enabled="false" defaultProvider="DefaultRoleProvider">
  <providers>
    <clear />
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</roleManager>
<sessionState mode="Custom" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</sessionState> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:05:40.920

本文更详细地介绍了旧的 aspnet_Memembership 与 Universal Providers 之间的区别。

[http://dotnet.dzone.com/articles/stronger-password-hashing-net](http://dotnet.dzone.com/articles/stronger-password-hashing-net)

文章的关键点：

首先，**没有更多的 aspnet_regsql**，您只需确保设置了连接字符串并且该帐户具有 DBO 权限（不用担心，它不必保持这种状态）然后运行应用程序并尝试**执行任何**操作应该导致会员提供者访问数据库（即登录 - 没有帐户并不重要）。

当它起作用时，这就是它的全部内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:18:37.723

当您使用 Microsoft ASP.NET 通用提供程序部署到 Windows Azure 和 SQL 数据库时，您的连接字符串似乎存在一些问题，因为 SQL 数据库上的表未创建。

以下来自 Soctt 的博客显示了有关如何执行此操作的分步详细信息，因此请关注并查看缺少的内容：

[介绍 System.Web.Providers - 用于 SQL Compact 和 SQL Azure 上的会话、成员资格、角色和用户配置文件的 ASP.NET 通用提供程序](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

# asp.net - 无法访问 wcf 服务中的 asp.net 会话

> ID：11105764
> 
> 赞同：3
> 
> 时间：2012-06-19T16:59:28.703
> 
> 标签：asp.net, wcf, session, jquery

我正在尝试访问 WCF 服务中的 asp.net 会话。我正在`jQuery AJAX`从我的 asp.net 应用程序调用 wcf 服务。我已经浏览了许多 SO 问题和文章，并尝试了他们所说的一切，但我仍然无法访问 wcf 服务中的客户端会话。当我写`DataSet ds = HttpContext.Current.Session["data"] as DataSet;`时，`ds`总是为空。

我在这里想念什么？

这是我的 WCF 服务的样子： //Interface

```
[ServiceContract(SessionMode = SessionMode.Allowed)]
public interface IMyService
{
    [OperationContract(IsInitiating=true)]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    string GetData();

    [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    bool SaveData(string data);
} 
```

//服务

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class MyService : IMyService
{
    public string GetData()
    {
        return "something";

    }
    public bool SaveData(string data)
    {
        DataSet ds = HttpContext.Current.Session["data"] as DataSet;
        return true;
    }

} 
```

我正在创建一个数据集`session_start`并将`Global.asax`其放入会话中，以便只要用户会话有效，我就可以在整个应用程序中使用它。

```
 protected void Session_Start(object sender, EventArgs e)
    {
        DataSet ds = new DataSet();

        //Table to hold Product Selection
        DataTable dt = new DataTable("T1");
        dtSSNCertification.Columns.Add("Col1");
        ds.Tables.Add(dt);

        Session.Add("data", ds);
    } 
```

这就是我的 wcf 项目的`web.config bindings`样子：

```
 <service name="MyService">
    <endpoint address="" behaviorConfiguration="JSONPBehaviorConfiguration"
      binding="customBinding" bindingConfiguration="jsonpBinding"
      contract="IMyService">
    </endpoint>
  </service> 
```

```
 <customBinding>
    <binding name="jsonpBinding" >
      <jsonpMessageEncoding />
      <httpTransport manualAddressing="true"/>
    </binding>
  </customBinding>

  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:08:17.883

要使用 ASP.NET 功能，您需要启用与 WCF 的 ASP.NET 兼容性。在您的 web.config 中设置：

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"> 
```

# c# - 无法使用 Server.MapPath

> ID：11105768
> 
> 赞同：123
> 
> 时间：2012-06-19T16:59:33.120
> 
> 标签：c#, visual-studio, intellisense, server.mappath

我必须做什么才能`Server.MapPath`工作？
我有`using System.Web;`

还有什么？当我键入`Server`时，没有快速结果选项（智能感知）`Server`。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：304
> 
> 时间：2012-06-19T17:10:25.997

你可以尝试使用这个

```
 System.Web.HttpContext.Current.Server.MapPath(path); 
```

或使用`HostingEnvironment.MapPath`

```
 System.Web.Hosting.HostingEnvironment.MapPath(path); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-19T17:06:37.080

您的项目需要引用 assembly `System.Web.dll`。服务器是一个类型的对象`HttpServerUtility`。例子：

```
HttpContext.Current.Server.MapPath(path); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-07-09T14:00:16.853

`System.Web.HttpContext.Current.Server.MapPath("~/")`如果我们从线程中调用它，则返回 null。

所以，尝试使用

`System.Web.Hosting.HostingEnvironment.MapPath("~/")`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-02T03:44:20.033

`System.web`如果没有，请先添加对 的引用。在**References**文件夹中执行此操作。

然后你可以使用`Hosting.HostingEnvironment.MapPath(path);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-11T23:59:40.537

```
bool IsExist = System.IO.Directory.Exists(HttpContext.Current.Server.MapPath("/UploadedFiles/"));
if (!IsExist)
    System.IO.Directory.CreateDirectory(HttpContext.Current.Server.MapPath("/UploadedFiles/"));

StreamWriter textWriter = File.CreateText(Path.Combine(HttpContext.Current.Server.MapPath("/UploadedFiles/") + "FileName.csv"));
var csvWriter = new CsvWriter(textWriter, System.Globalization.CultureInfo.CurrentCulture);
csvWriter.WriteRecords(classVM); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-06T12:41:15.503

我知道这篇文章已经有几年的历史了，但我所做的就是将此行添加到您班级的顶部，您仍然可以使用 Server.MapPath

```
Dim Server = HttpContext.Current.Server 
```

或者你可以做一个功能

```
Public Function MapPath(sPath as String)
    return HttpContext.Current.Server.MapPath(sPath)
End Function 
```

我致力于让事情变得更容易。我还将它添加到我的实用程序类中，以防我再次遇到这种情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-28T06:24:40.203

尝试添加`System.Web`作为对您项目的引用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-07T09:52:10.903

您需要添加[对 System.Web](https://i.stack.imgur.com/LCfKQ.png)`System.Web`的引用 ( ) 引用

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-06T08:07:51.747

我遇到了同样的问题，我想这可能会对某人有所帮助。正如这个问题的原始海报所问

> 我必须做什么才能使 Server.MapPath 工作？
> 我有使用 System.Web；

我们编写的类应该实现**System.Web.UI.Page**

比如说，我们的类名是**MyClass**

```
public class MyClass: System.Web.UI.Page
{
// Code runs here 
} 
```

# model-view-controller - 执行 AJAX 请求时遵循 MVC 模式的正确方法

> ID：11105770
> 
> 赞同：1
> 
> 时间：2012-06-19T16:59:46.303
> 
> 标签：model-view-controller, extjs, extjs4, extjs-mvc

我正在使用 extjs mvc 样式来创建 Web 应用程序。我没有任何直接问题，但我不确定我应该如何处理此代码以继续遵循 mvc 模式。

这是我的情况：

*   控制器，检测点击事件
*   视图，其中有一个 changePassword 方法

我只是想发出一个 ajax 请求来更改用户的密码（请注意，代码当前正在运行，我只是在考虑是否应该移动控制器上的一部分）。

目前代码的行为如下：

*   控制器检测点击事件并使用它传递给的记录参数在视图上运行 changePassword 方法
*   查看打开提示信息，要求用户输入新密码
*   查看运行 ajax 调用并显示成功/错误消息

我的想法是：

*   控制器检测点击事件并运行 View.showChangePassword 提示
*   查看显示提示并将密码插入那里返回给控制器
*   控制器运行 ajax 调用
*   控制器使用参数运行 View.showChangePasswordResult：ajax 调用返回的内容

我的想法比我目前使用的更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:22:16.290

是的。我也只会移动`showChangePassword`到控制器。

*   控制器检测事件
*   控制器在必要时创建另一个视图并订阅该视图的提交方法
*   控制器通过 Ajax 提交值。

# jquery - JQGrid 真正的滚动问题

> ID：11105772
> 
> 赞同：2
> 
> 时间：2012-06-19T16:59:48.473
> 
> 标签：jquery, jqgrid

我的 JqGrid 代码如下所示

```
$('#grid').jqGrid({
    url: '',
    scroll: 1,
    postData: {
        ...
    },
    datatype: "json",
    mtype: 'POST',
    colNames: [....],
    colModel: [{
        name: 'source',
        index: 'source',
        width: '100',
        align: 'center',
        stype: 'select',
        searchoptions: {
            dataUrl: 'getSource'
            }
    }, { ...
    }],
    rowNum: 200,
    height: '450px',
    autowidth: false,
    shrinkToFit: true,
    rownumbers: true,
    pager: '#table-page',
    sortname: '...',
    viewrecords: true,
    sortorder: 'asc',
    caption: "Records",
    emptyrecords: "Empty records",
    loadonce: false,
    loadComplete: function() {
       ....
    },
    jsonReader: {
       ....
    }
}); 
```

当我缓慢滚动网格并达到 200 时，网格会重新加载，但视图显示 2000 年的 View 1-400。

如果我继续缓慢滚动，我会看到 View 1-600 of 2000。

我们还可以在演示[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html) -> New in 3.7 -> True Scrolling 中看到相同的错误。

有人可以建议我一个解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:03:06.107

它按设计工作...如果您缓慢滚动，它会将记录添加到表中-因此您可以向上滚动并且数据仍然存在-如果您快速滚动，则删除当前数据，并且仅使用数量添加新数据您在与滚动位置匹配的起点指定的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:08:55.273

`viewrecords`如果需要，您可以使用以下选项关闭数字：

```
viewrecords: false 
```

jqGrid[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)有更多详细信息：

> 如果为 true，jqGrid 将在查询中的记录总数中显示网格中的开始和结束记录数。此信息以以下格式显示在寻呼栏（默认右下角）中：“从 Z 中查看 X 到 Y”。如果这个值为真，还有其他参数可以调整，包括emptyrecords和recordtext。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:51:34.513

这是我的代码：删除旧数据但保持滚动位置：

```
beforeProcessing: function(data, status, xhr){
    // Prevent from loading duplicate data
    var firstId = data.rows[0].id;
    if (-1 != $("#"+firstId ).index()){
        return false;
    }

    // Keep scroll position
    $.scrolltop = $(this).closest(".ui-jqgrid-bdiv").scrollTop();

    // Clear old data -> This will make scroll position to zero
    $(this).jqGrid('clearGridData', true);

    // Show white Div portion
    $(this).parent().children('div').eq(0).show();
},
loadComplete: function (data) {
    // Set height of white Div portion
    $(this).parent().children('div').eq(0).height($.scrolltop);

    // Re-set scroll position
    $(this).closest(".ui-jqgrid-bdiv").scrollTop($.scrolltop);
} 
```

# excel - 如何在轴最大值之外绘制图表值？

> ID：11105773
> 
> 赞同：0
> 
> 时间：2012-06-19T16:59:49.237
> 
> 标签：excel, charts, dword

在早期版本的 Excel 中，您可以创建一个注册表项，以允许 Excel 使用 QFE_Bonn dword=1 显示将位于轴最小值/最大值之外的值/标签。这是我在 Excel 2003 中使用的：[包含标签的绘图线消失了……](http://support.microsoft.com/kb/931663)）

我无法在 Excel 2010 (Office Pro Plus) 中找到类似的补丁或本机功能。任何想法如何实现这一点，或者 MS 是否完全删除了此功能？

以下是 Excel 2003 中示例的屏幕截图。我创建了一系列数据，这些数据一致超过了 y 轴最大值。该系列的颜色填充已被移除

![Excel 截图](../Images/d89d98039a1a445a70090ae264c4d7f0.png)

要完成外观，请移除系列的边框，使其看起来不可见。然后用相关数据替换系列的值标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:12:48.217

有一个使用 DataLabels.Left 属性的解决方法，该属性相对于 ChartArea 定位 DataLabel。

这是一个示例 VB 解决方案：

```
sub FakeLabels()
Dim sF As Double
Dim lOff As Double
Dim p As Double

ActiveSheet.ChartObjects(1).Activate

With ActiveChart
    For sF = 1 To .SeriesCollection.Count
        If .SeriesCollection(sF).Name = "FakeSeries" Then
             'Define the lOff variable by adding 100, or some other value
             lOff = .SeriesCollection(sF).Points(1).DataLabel.Left + 100
             For p = 1 To .SeriesCollection(sF).Points.Count
                 .SeriesCollection(sF).Points(p).DataLabel.Left = lOff               
             Next p
        End If
    Next sF
End With 
```

它产生相同的结果，唯一的新要求是将“虚拟”系列的值保持在图表的轴最小值/最大值内。

令人惊喜的是，重新调整图表大小似乎不会影响标签的相对位置。

**2013 年 9 月 25 日更新**

自从第一次问这个问题以来，我一直使用“文本框”方法。但是管理标签位置和文本框位置之间的相互作用、它们的相对位置`PlotArea`ie、何时使用`.InsideWidth`vs.`.Width`或`.InsideLeft`vs.`.Left`以及是否需要对这些点进行任何类型的享乐“调整”是非常笨拙的价值观，似乎总是如此，它们从来都不是完全一致的。

在阅读 PPT 对象模型参考以进行其他一些与图表相关的查询时，我[偶然发现了这个属性](http://msdn.microsoft.com/en-us/library/office/ff745647%28v=office.14%29.aspx)，它似乎复制了以前的修补程序/注册表黑客的功能。

`.ShowDataLabelsOverMaximum`

# facebook - 如何从应用程序定期通知用户

> ID：11105777
> 
> 赞同：1
> 
> 时间：2012-06-19T17:00:02.463
> 
> 标签：facebook, facebook-graph-api, facebook-wall, facebook-timeline

所以有一个应用程序，假设它是一个能够根据用户第一次运行应用程序时所做的选择来提供相关新闻的应用程序。有没有办法将新闻发布到用户的墙上，而无需用户在线并且理想情况下作为应用程序？

所以在他/她的时间线上，它看起来像这样（编辑过的图像，不是来自某个应用程序的真实帖子，只是为了让你明白我的意思）：

![脸书墙贴](../Images/eea1963c63630ef9331142deec1cc90e.png)

当我使用`$facebook->api('/me', 'post')`时，它只是以用户身份创建一个帖子，这不是我想要的，并且不允许我在用户未登录时发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:20:08.857

您可以使用[服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)来获取长期访问令牌（60 天），然后您可以使用该令牌直到令牌超时。然后，您需要让用户重新使用您的应用程序以获取新令牌。

[您可以通过使用客户端身份验证](http://developers.facebook.com/docs/authentication/client-side/)然后在服务器端[扩展令牌](http://developers.facebook.com/roadmap/offline-access-removal/)来获得相同的结果。

另一个适合您的选项是获取应用程序访问令牌（不会过期）并要求用户`publish_stream`授予权限，然后：

> 应用程序访问令牌还可用于代表已授予您应用程序发布权限的用户向 Facebook 发布内容。

# php - 遍历子目录并删除所有与数据库条目不匹配的文件

> ID：11105779
> 
> 赞同：0
> 
> 时间：2012-06-19T17:00:05.070
> 
> 标签：php, mysql, subdirectory

我一直在一个严重依赖图像的网站上工作，因此我想实现在数据库或我存储它们的子目录中出现任何问题时进行清理的功能。如果出现问题，我的功能会删除数据库条目该图像不在子目录中，但如果图像不在数据库中，我删除子目录中的图像的功能似乎不起作用。这是我的代码（假设在 MySQL 数据库中名为“images”的表上有一个名为“location”的条目，有一个名为“images”的子目录，所有图像都有一个 jpg 扩展名，所有上传的图像都被赋予数据库中的键与子目录中的键相同）：

```
foreach(glob("images/*.*") as $entry)
    {   
        if (!mysql_num_rows(mysql_query("SELECT * FROM images WHERE location = '$entry'")))
        {
            if (preg_match("/jpg/", $entry))
            {
                unlink ($entry);
            }   
        }
    } 
```

我进行了调试，子目录中的条目与数据库中的条目匹配，但尽管它们相等，但 SQL 查询返回的是空结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:07:07.267

`glob`返回带有路径的条目，所以它会像`images/foo.jpg`. 如果它仅以文件名存储在数据库中，这就是它不匹配的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:05:26.180

除非您提供的代码不是实际代码，否则我的猜测是您没有将绝对路径传递给`unlink();`. 您只传递了一个相对路径（例如“images/test.jpeg”），脚本找不到该文件。

# c# - 如何重新排序 DataGrid 的列？

> ID：11105780
> 
> 赞同：2
> 
> 时间：2012-06-19T17:00:11.200
> 
> 标签：c#, .net, datagrid

如何重新排序 a 的列`System.Windows.Forms.DataGrid`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:14:46.137

如果绑定数据表，则可以将列顺序更改为

```
dataTable.Columns["Column Name"].SetOrdinal(NewIndex); 
```

您需要在绑定之前将 DataSource 设置为 null 并清理 GridView

```
dataGridView1.DataSource = null;
dataGridView1.Columns.Clear();
dataGridView1.DataSource = dataTable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:04:24.070

通过按所需顺序将新数据写入网格。

考虑使用 a`DataGridView`代替。它具有更好的排序功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T05:41:56.607

您可以将列 DisplayIndex 绑定到数据上下文中的某个整数。

```
<DataGridTextColumn Header="Name" DisplayIndex="{Binding Path=DisplayIndex_Name}" /> 
```

在后面的代码中，您可以只更改绑定参数的值，在这种情况下`DisplayIndex_Name`，DataGridTextColumn 的绑定 DisplayIndex 也会根据您给它的值而改变。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.displayindex.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.displayindex.aspx)

# zend-framework - 学说代理 OneToOne 实体的身份名称设置为 [] 但值正确

> ID：11105785
> 
> 赞同：0
> 
> 时间：2012-06-19T17:00:43.993
> 
> 标签：zend-framework, doctrine-orm

嗨，我对 OneToOne 关系有一个小问题，当它运行以下内容时：-

```
$userToView = $this->view->entityManager->getRepository("Ajfit\Entity\User")
                                            ->findOneByName($userName); 
```

这会按预期填充，但名为engineerFk 的关系字段是代理实体，其标识符字段设置为[]，但值设置正确，见下文：-

![被调试的实体](../Images/125f7107d1c593263211b24c298b805a.png)

我的用户实体是这样的：-

```
class User extends PersistentObject
{
   /**
    * @var integer $pk
    *
    * @ORM\Column(name="pk", type="integer")
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="IDENTITY")
    */
    protected $pk;

   /**
    * @var integer $engineerFk
    * @ORM\OneToOne(targetEntity="Ajfit\Entity\Engineer")
    * @ORM\JoinColumn(name="pk", referencedColumnName="user_fk")
    */
    protected $engineerFk;
} 
```

我的工程师实体设置如下：-

```
class Engineer extends PersistentObject
 {
 /**
  * @var integer $pk
  *
  * @ORM\Column(name="pk", type="integer")
  * @ORM\Id
  * @ORM\GeneratedValue(strategy="IDENTITY")
  */
 }
protected $pk; 
```

我在数据库中的 sql 是这样的：-

```
/*user table*/

CREATE TABLE `user` (
  `pk` int(10) unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`pk`)
) ENGINE=InnoDB AUTO_INCREMENT=34 DEFAULT CHARSET=utf8 COLLATE=utf8_bin

/*engineer table */

CREATE TABLE `engineer` (
  `pk` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_fk` int(10) unsigned NOT NULL,
  PRIMARY KEY (`pk`),
  KEY `engineer_user_fk` (`user_fk`),
  CONSTRAINT `engineer_user_fk` FOREIGN KEY (`user_fk`) REFERENCES `user` (`pk`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 
```

任何重新解决这个问题的帮助都会非常感激。

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:16:00.980

我认为您在错误的实体上定义了关系的拥有方。它应该在拥有外键的实体上定义。我对注释不太满意，所以我将使用 YAML 来描述关联。

因此，对于 Engineer 实体，您应该具有以下内容：

```
oneToOne:
    user:
        targetEntity: User
        inversedBy: engineer
        joinColumn:
            name: user_fk
            referencedColumnName: pk 
```

然后，对于 User 实体，配置应该是这样的：

```
oneToOne:
    engineer:
        targetEntity: Engineer
        mappedBy: user 
```

阅读[本文](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html)了解详情。

此外，通过这种关联映射，Doctrine 2 控制台工具将生成略有不同的实体类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:26:16.557

最有可能的是，它与延迟加载有关。在您开始使用它之前，您的代理对象不会被加载。

# asp.net - 为什么我的应用程序不允许我打开跟踪？

> ID：11105787
> 
> 赞同：1
> 
> 时间：2012-06-19T17:00:58.627
> 
> 标签：asp.net, trace

我有一个 asp.net 应用程序，当我尝试打开应用程序跟踪时......

```
 <system.web>
      <trace enabled="true" pageOutput="true" requestLimit="40" localOnly="false"/>
      <authorization>
        <deny users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>
  <location path="Pages/Account/MyAlerts.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>
  <location path="Pages/Account/FullDetails.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>
  <location path="Pages/Account/ActivateLicence.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>
  <system.web> 
```

我收到以下错误：

![arrrg 没有痕迹](../Images/33cd9c3162f606212afb727cec53fc0b.png)

我一直在寻找

```
<deployment retail=true /> 
```

但它不在我的配置中，我真的不明白为什么当我导航到 mysite/trace.axd 时出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:05:43.920

寻找继承自您的价值观，

1.  machine.config - 如果您使用的是 .NET framework 4，它位于 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config

2.  根 web.config - 如果您使用 .NET 框架 4，它位于 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config

3.  如果您的应用程序在 IIS 中配置为子文件夹，则您的 web.config 值可能是从父应用程序继承的。

    `<deployment retail=true />` 通常用于 machine.config 中的生产 Web 服务器，您可以从此处阅读有关配置值继承的更多信息[http://msdn.microsoft.com/en-us/library/ms178685.aspx](http://msdn.microsoft.com/en-us/library/ms178685.aspx)

# ruby-on-rails - 将参数传递给“.js.erb”模板

> ID：11105790
> 
> 赞同：15
> 
> 时间：2012-06-19T17:01:15.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, erb

我想在 Rails3 应用程序中将一些参数传递给我的 Javascript 模板我尝试使用 respond_to 块是：

```
 respond_to do |format|
      format.js({:id=>params[:id]})
    end 
```

我也试过：

```
 respond_to do |format|
      format.js(params[:id])
    end 
```

我是否被迫将 id 作为 js 模板使用的实例变量？如何在这里将变量传递给模板？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-19T17:13:41.960

它有效吗？

```
respond_to do |format|
  format.js { render "action", :locals => {:id => params[:id]} }
end 
```

“action”是您的操作/模板名称（索引、显示等）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-08-11T23:49:15.697

作为替代方案，您可以在控制器中定义 @variable，并且应该能够在 js.erb 模板中访问它。然后您不需要将变量作为参数传递。

# c# - 只打印第一页

> ID：11105791
> 
> 赞同：3
> 
> 时间：2012-06-19T17:01:29.563
> 
> 标签：c#, winforms, reporting-services, rdlc, localreport

我正在使用 LocalReport.Render 技术从 Windows 窗体应用程序打印报告，如下所述：http: [//msdn.microsoft.com/en-us/library/ms252172.aspx](http://msdn.microsoft.com/en-us/library/ms252172.aspx)

它有效，但只打印第一页。我没有在报告页面上使用任何页眉或页脚，仅使用正文。没有子关系，没有子报表。只是一个非常简单的数据对象列表。

我正在做这样的事情来将数据源加载到报告中：

```
List<mysimpledataobject> MyData = new List<mysimpledataobject>();
... add 10 items to the list ...
report.DataSources.Add(new ReportDataSource("Sales", MyData)); 
```

只有第一页呈现。我想也许所有的页面都被渲染到流列表中，也许只有第一页实际上被发送到打印机，但是当我调试并查看流列表时，我看到的只是一个项目。流应该在每个页面的流列表中有一个项目。

部分渲染代码如下所示：

```
report.Render("Image", deviceInfo, CreateStream, out warnings);

foreach (Stream stream in m_streams)
    stream.Position = 0; 
```

m_streams 列表中只有 1 项，因此仅打印 1 页。

我也尝试过传递一个 DataTable 和一个业务对象数组作为数据源，但这也不起作用。

任何想法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:17:25.303

如果要渲染报表的所有页面，则需要将**0**设置为`StartPage`设置 in `DeviceInfo`。

`StartPage`和`EndPage`的默认值为**1**。这就是为什么你总是只渲染第一页。

例子：

```
string mime, encoding, fileNameExtension;
string[] streams;
Warning[] warnings;
byte[] bytes = report.Render("IMAGE", @"<DeviceInfo><OutputFormat>TIFF</OutputFormat><StartPage>0</StartPage></DeviceInfo>", out mime, out encoding, out fileNameExtension, out streams, out warnings); 
```

# java - 用 C/C++ 和其他语言重现 Java 原语 hashCode 逻辑的库

> ID：11105792
> 
> 赞同：2
> 
> 时间：2012-06-19T17:01:31.137
> 
> 标签：java, c++, c, language-agnostic, distributed

我想知道是否有一个多语言库或允许给我以下结果的东西：

*   我在 Java 中有一个 String = "Abcde12345"
*   我们假设它在 Java 中的 hashcode 是“78911”
*   我在 C 程序中有一个 String = "Abcde12345"

我想知道的是：如何在我的 C 程序中轻松获取哈希码 78911？由于每种语言都可以为字符串提供自己的哈希算法，我该如何处理呢？

* * *

我在使用分布式哈希表（数据网格、分布式缓存、NoSQL ......）的背景下问这个问题。我计划为 Java 专有数据网格创建类似于 C 中非常简单的客户端的东西。

这是我现在的用例，但对于我的项目，我需要一个与多种语言兼容的哈希算法： - Ruby 中的 Java 哈希算法 - Java 中的 C# 哈希算法 - Java 中的 C++ 哈希算法 - C++ 中的 Java 哈希算法 - Java 哈希Erlang 中的算法无论如何，两种语言中两种算法的哈希都需要产生完全相同的哈希值。

如果可能的话，我想将这个概念扩展到原始类型和“简单结构”，而不仅仅是字符串

* * *

有谁知道任何工具来处理我的用例？

* * *

**编辑：吉姆·巴尔特**

我的用例是：

我有一个名为 GemFire 的专有分区/数据网格技术，用 Java 编写。它充当分布式哈希图。哈希图中的桶数是固定的。对于每个映射键，它计算其哈希码，并应用一个模数，以便它知道每个键到它所属的每个桶。

例如，如果我有 113 个桶（这是 gemfire 中的默认桶数），我的地图键是字符串“键”

```
"Key".hashCode() % 113 = 69 
```

因此 GemFire 知道“Key”属于第 69 个桶。

现在我有一个 C 应用程序：

*   此应用程序已经知道 Gemfire (113) 使用的存储桶数量。
*   对于任何随机密钥，此应用程序需要能够计算 GemFire 将放置该随机密钥的桶号。
*   这个应用程序需要能够快速计算它，我们不能使用网络服务。
*   这个应用程序应该很容易部署，而且我在 C/Java 之间没有任何桥接技术——这需要安装 JVM 来运行 C 应用程序

因此，如果您知道如何做到这一点而不必在 C 中编写/使用 Java 哈希码端口，请告诉我。

**编辑：**为了避免混淆：我不是在寻找其他任何东西，但吉姆巴尔特你建议我不需要我声称需要的东西所以告诉我你是否看到任何其他解决方案，除了像你说的那样使用自定义或流行的哈希算法。

将来我可能需要对带有 C# 客户端应用程序和其他语言的 Erlang 分区应用程序做同样的事情！

* * *

**编辑：**我想避免使用非 java 哈希算法（正如有人建议使用 md5/sha1 或任何更快的非面向安全的哈希算法）。这是因为我的解决方案旨在部署在通常用 Java 编写的遗留分布式系统上，这些系统已经包含大量数据，并且哈希算法的任何更改都需要大量的数据迁移过程。但是，我牢记这个解决方案，因为对于从头开始新的分布式系统或准备进行数据迁移的人们来说，它可能是一个不错的第二选择。

* * *

**所以最后，我要找的不是有人告诉我用 C 实现 Java 字符串哈希算法，我已经知道我可以做到，谢谢！我想知道是否有人已经这样做了，不仅是为了用 C 实现所有原始的 java 算法，而且还用其他语言和其他语言实现！！！我正在寻找一个多语言库，为其他语言提供哈希算法的端口。**

因此，如果地球上只有 3 种语言（C、Java 和 Python），我的问题是：是否有任何多语言库提供：

*   C 中的 Java 哈希端口
*   Python 中的 Java 哈希端口
*   Java中的C哈希端口
*   Python 中的 C 哈希端口
*   Java 中的 Python 哈希端口
*   C 中 Python 哈希的一个端口

对于所有可用的原始类型，以及最终的基本结构。如果对于给定的语言没有“默认哈希算法”，那么最广泛使用的可以被认为是语言算法。

**你明白我的意思吗？我想知道有没有图书馆！我知道我可以查看 JDK 或规范并自己实现它，但是由于我的目标是大量语言并且我不知道如何用每种语言编写代码，所以我希望有人这样做对我来说，并在一个开源、免费使用的项目中提供！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:15:20.977

我要补充一点，您可以浏览 OpenJDK 的源代码并查看 hashCode 实现。但是，请记住，正如 Jim Garrison 建议的评论所建议的那样，不同的类可能会覆盖 hashCode，因此您必须遵循实现。我建议对字符串执行散列以使用众所周知的散列函数，例如 sha-1 或 md5 - 您可以在 Java、C/C++ 和其他编程语言中找到实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:31:58.097

计算 Java 字符串的哈希码的算法非常简单，并且作为公共规范的一部分进行了记录：http: [//docs.oracle.com/javase/1.4.2/docs/api/java/lang/String。 html#hashCode](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#hashCode) ()

> String 对象的哈希码计算为 s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]
> 
> 使用 int 算术，其中 s[i] 是字符串的第 i 个字符，n 是字符串的长度，^ 表示求幂。（空字符串的哈希值为零。）

还要注意 String 是一个 final 类，所以它的方法不能被覆盖；因此，您可以保证给定的算法对于任何 Java 字符串都是正确的。

对于 Java 以外的语言，如果该语言没有指定散列算法（Java 不常这样做），那么即使可以确定散列算法也不能确定不会改变。我怀疑您实际上并不需要您声称需要的东西，但是您必须更多地说明您的要求（而不是您认为会解决这些要求的内容）。

# mysql - 错误 #2002 无法通过套接字“/Applications/MAMP/tmp/mysql/mysql.sock”连接到本地 MySQL 服务器 (2)

> ID：11105796
> 
> 赞同：15
> 
> 时间：2012-06-19T17:01:39.140
> 
> 标签：mysql, mamp, mysql-error-2002

我正在运行 MAMP。
直到昨天它一直工作正常。到目前为止，我还没有找到任何有帮助的东西。但这是我的问题：

正如标题所述，我收到以下错误：

> 错误 #2002 *“无法通过套接字 '/Applications/MAMP/tmp/mysql/mysql.sock' (2) 连接到本地 MySQL 服务器”*

我注意到，当我搜索它时，这似乎是一个非常常见的错误。

无论如何，当我 cd to`tmp/mysql`并且除了and目录`ls -laxo`之外唯一出现的是（我不知道那是什么，但我有预感这不是我问题的根源）。`./``../``.dummy`

那是`mysql.sock`文件所在的位置。有谁知道解决这个问题的方法。也许我需要创建`mysql.sock`文件，但我不知道该放什么。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-11-05T20:26:21.230

**测试**

如果您尝试使用完整路径启动 MySQL，它应该可以工作

```
/Applications/MAMP/Library/bin/mysql -u root -p 
```

* * *

**使固定**

如果可行，那么您可以通过运行将其设置为正常工作

```
sudo ln -s /Applications/MAMP/tmp/mysql/mysql.sock /tmp/mysql.sock 
```

* * *

**解析度**

现在 MySQL 应该可以正常工作了

```
mysql -u root -p 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-16T00:18:37.603

我知道这已经晚了，但是如果有人在搜索这个（就像我今晚一样，但我找到了解决方案），这对我有用：

我打开了 MAMP，不得不点击“使用默认的 Apache 和 MySQL 端口”。（80 和 3306 而不是 8888 和 8889）。这似乎解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-07T17:21:39.910

愚蠢的解决方案......但就我而言，我没有启动mysql服务器。所以，也看那个！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-09T15:53:47.720

如果您宁愿避免通过 MAMP 或 my.cnf 文件中的选项更改端口，尝试通过以下命令行强制 TCP 连接可能会很有用：

`/Applications/MAMP/Library/bin/mysql -h 127.0.0.1 -P 8889 -u root`

如果端口不是 mysql 默认的 3306，记住设置端口很重要。

该`-P`参数允许您设置端口。

MAMP 的默认端口是 8889，但您可以在 MAMP 运行时通过 MAMP WebStart 页面轻松验证您的端口设置：

[http://localhost:8888/MAMP/](http://localhost:8888/MAMP/)

它看起来类似于：

[![在此处输入图像描述](../Images/aef99667efb4e2d5a73900c9b4c2bd67.png)](https://i.stack.imgur.com/toyz9.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-28T06:35:08.937

mysql服务器还没有启动。

```
mysqld stop
mysql.server start 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-16T06:10:46.933

我遇到了同样的问题。当我单独启动 MAMP 时，问题就消失了。并发出以下命令工作正常。

```
mysql -u root -p 
```

# html - 修复了使用多个 Fullcalendar 滚动的标题

> ID：11105799
> 
> 赞同：2
> 
> 时间：2012-06-19T17:01:40.873
> 
> 标签：html, css, scroll, fullcalendar

我正在扩展一个日程安排应用程序，该应用程序在议程日视图中显示多个完整日历，以显示多人当天的日程安排。让每个 Fullcalendar 使用自己的滚动条已被拒绝；因此，所有日历都以全长显示，并在周围的 div 中设置了一个滚动条。

现在的问题是让标题在垂直滚动期间保持固定。扩展标题功能还有其他要求（附加数据、图标、链接等），因此在每个 Fullcalendar div 上方创建自己的标题对我来说更有意义。

使用 CSS 并正确放置 div，我能够让日历与标题分开垂直滚动，从而实现“固定标题”效果。然后问题是水平滚动：如果我让 div 水平向外延伸，那么包含日历的 div 的垂直滚动条一直向右，超出可见性。

我还尝试了固定标题的插件，方法是使用带有任意文本的标题设置，然后将 Fullcalendar div 放在单行中的元素内。这些都以不同的方式失败（隐藏日历，重新打印标题，其他方式）。

这是基本设置：http: [//jsfiddle.net/jzqJC/](http://jsfiddle.net/jzqJC/)。我正在寻找如何使主要内容区域具有（1）必要时垂直和水平滚动条，（2）在垂直滚动时保持列标题固定的方向，以及（3）同步列标题的水平滚动和它们下面的日历。我花了几天时间根据 stackoverflow 和谷歌搜索来修补和尝试一些东西，但我很茫然，需要帮助。请指教。

[附带问题：如何在小提琴中链接到 fullcalendar.min.js？我是否需要文件的公共 URL 并将其添加为资源？如果是这样，将该文件放在公共 URL 中的最佳方式是什么？]

谢谢，
J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:40:24.863

我创建了这个小提琴，看看它是否是你要找的：http: [//jsfiddle.net/7NgUB/](http://jsfiddle.net/7NgUB/)

我将 .headerItem,.calendarItem 显示更改为内联，并将 #headerRow,#calendarRow 位置更改为 CSS 中的绝对位置。

然后一切都用jquery完成：

指定#headerRow,#calendarRow 宽度为其子项的总宽度，设置#calendarRow 顶部位置显示在#headerRow 下方，每次滚动#content 时更改#headerRow 顶部位置

# javascript - 使用 ASP .NET MVC 推出新版本的 JavaScript、css 和图形内容

> ID：11105800
> 
> 赞同：3
> 
> 时间：2012-06-19T17:01:42.493
> 
> 标签：javascript, asp.net-mvc, cache-control

我希望通过 <script> 标记引用的 JavaScript、我的 css 和各种图形文件缓存在用户浏览器上，以用于我的网站的给定版本。但是，当我发布对文件的更新时，我想确保新内容（Javascript、css、图形等）将在用户的机器上更新。

在研究这个问题时，我遇到了许多可能的解决方案：

1.  为缓存控制和过期等内容调整 http 标头
2.  将唯一的查询字符串附加到每个资源请求
3.  在所请求资源的路径（或文件名）中包含版本号

我对选项 1 的担忧（除了不知道如何为某些内容类型实现它）是，如果浏览器和 IIS 之间有中间代理，那么中间代理可能不尊重 http 标头，并且内容将被缓存在浏览器和代理。

我对选项 2 的关注有两个方面。一方面，如果我只使用随机数或时间戳，那么浏览器每次都会请求新资源，即使内容没有更改（版本之间没有更改）也会绕过本地缓存。解决此问题的方法是使用资源文件的时间戳或文件的哈希；这只有在新版本出现时才会改变。然而，这导致了我的第二个担忧：我知道一些网络代理从不缓存任何带有查询字符串的东西，默认情况下（http://stackoverflow.com/questions/5541340/how-can-i-prevent-javascript-caching-查询字符串方法不工作）。虽然这可能是可定制的，但我不想依赖管理员更改默认设置，以获得缓存的性能优势。

选项 3 似乎是最佳选择，但对于 ASP .NET MVC（当前使用 ASP .NET MVC 3），我不知道如何以实用的方式实现它。手动，我可以进入每个链接到图形、css 或外部 javascript 文件的文件，并更改路径以包含每个版本的不同版本号，但显然这很乏味且容易出错。

那么我的问题是：

1）是否有任何其他策略可以避免缓存（对于给定版本）我应该考虑和

2) 假设我使用选项 3（包括资源路径中的版本号），我如何在 ASP .NET MVC 应用程序中以一种易于维护的方式实现这一点？

谢谢，

巴黎圣母院

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:28:13.337

这个想法是每当 js、css 文件的版本发生变化时，您必须从服务器更改 URL，以便浏览器请求新版本。

请参阅此[线程](https://stackoverflow.com/questions/118884/what-is-an-elegant-way-to-force-browsers-to-reload-cached-css-js-files)中@Kip 的答案，清楚地描述了这一点。虽然答案在 php 中，但它可以在 asp.net mvc 本身中实现。

如果您使用的是 ASP.NET MVC 4 的新捆绑/缩小功能，我认为它会自动处理版本控制（虽然不确定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:34:12.277

Http 缓存以两种方式完成。通过验证机制和过期机制。

对于到期机制，您可以在标头上使用 expires（但这对于您知道永远不会改变的静态资源很有用）。

对于验证机制和条件获取 ETag，使用这似乎是解决您的问题的完美案例。

# jquery - jQuery遍历html“blob”/文档-无法访问属性

> ID：11105801
> 
> 赞同：2
> 
> 时间：2012-06-19T17:01:59.110
> 
> 标签：jquery

**前提：**

我想从文档中取出一大块 html，然后更改 div id 并在原始 html 下方的同一文档中重新打印相同的 html 块并进行一些修改。我会重复这个'X'次。

**问题：**

当我尝试重新打印时，我似乎无法访问 html 块中的 div。

**我的脚步**

*   我在一个页面上有一些 html，包含在一个 div 中，

    ```
    <div id="a">
       <div id="aaa">...</div>
       <div id="bbb">...</div>
       <div id="ccc">...</div>
    </div> 
    ```

我使用 jQuery 提取这个 html

```
var h = $("#a").html(); 
```

我将它转换为 jQuery 对象

```
var jqObj = $(h); 
```

然后查看里面的div

```
$("div", jqObj).each(function (idx, elem) {
       //elem is a HTMLDivElement type
        var jq = $(this);
       // I want to access the id, class etc. of the div elements here            
    }); 
```

'each' 正确迭代的次数与 div 的次数一样多。

但无论我做什么，无论是 $(this).attr("id") 还是 elem.id 或其他任何东西，它都会返回未定义。我打印了 $(this).html() ，它似乎有内容，但是 div 中的所有 id 似乎都被删除了。

我究竟做错了什么？如何获取此 HtmlDivElement 的 id（我需要在再次打印出 html 之前更改它们）和其他属性？

**问题解决了**

请参阅下面有关使用 clone() 的评论。这是我的功能，以防其他人需要它。

```
function Inserts() {
    //get the html    
    var h = $("#a").clone();

    //now turn it into a jquery object
    var jqObj = $(h);

    //now parse it, let's make some modifications
    var someID = "0";
    $("div", jqObj).each(function (idx, elem) {

        if ($(this).attr("id") == undefined)
            return;

        $(this).attr("id", someID + "_" + $(this).attr("id"));
    });

    $("#target_div").append(jqObj.html()); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:04:38.393

使用[clone](http://api.jquery.com/clone/)而不是获取 html 并创建新元素。克隆后，您可以在将块重新插入所需的位置之前更改属性。

请注意，在重新插入之前更改对象的 id 是准强制性的。用来`attr("id","anotherId")`做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:36:20.407

`clone()`是要走的路，它很简单，专为此类任务而设计。

顺便说一句，你的方法的问题是，

你在做，

```
var h = $("#a").html();
var jqObj = $(h); 
```

即你正在尝试这个，

```
var jqObj = $('<div id="aaa">...</div><div id="bbb">...</div><div id="ccc">...</div>') 
```

但是，传递给`$`函数的标记字符串没有根元素，`$`函数需要根元素才能将标记字符串（带标签的字符串）转换为 jQuery 对象。

所以，如果你需要在你的方法中找到一个解决方案，你可以做这样的事情。

```
$(function(){
    var h = $("#a").wrap('<div />').parent().html();
    var jqObj = $(h);  
    $("div",jqObj).each(function (idx, elem) {
        //elem is a HTMLDivElement type
        var jq = $(this);
        console.log(jq.attr('id')); 
        // I want to access the id, class etc. of the div elements here            
    });
}); 
```

# advantage-database-server - 事件通知订阅的范围是什么？

> ID：11105803
> 
> 赞同：1
> 
> 时间：2012-06-19T17:02:09.003
> 
> 标签：advantage-database-server

有利的是，当我在哪个级别订阅事件（通过`sp_CreateEvent`）时，该事件会被创建吗？每个连接？每个客户？数据库范围？

该应用程序是我有一个长时间运行的应用程序，其中偶尔会由于错误而重置广告连接。创建新连接时`sp_CreateEvent`，除了重新订阅（ ）之外，我还需要重新创建（ ）吗？`sp_WaitForEvent`

另外，有没有办法检查我给定的连接/应用程序/任何级别的事件是否已经存在某个事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:13:21.720

事件是在每个数据库级别上创建的，但是任何希望等待事件的连接都必须使用`sp_CreateEvent`. 认为它更像是`sp_CreateEvent` *注册*一个事件的连接，而不是*创建*它。

如果所有连接都希望等待该事件，则必须为该事件创建/注册，因此如果连接因错误而终止并重新创建，则必须再次调用`sp_CreateEvent`and `sp_WaitForEvent`。

没有办法简单地检查事件是否存在。可能最好的检查方法是调用`sp_WaitForEvent`并检查错误。如果您希望它立即返回，请将超时指定为 0。您也可以调用`sp_CreateEvent`or`sp_DropEvent`并检查错误，但如果事件存在与否，您可能会产生意想不到的后果。

在我们的在线文档中阅读有关[事件的更多信息。](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/index.html?master_events_notifications_.htm)

# javascript - 在 Rally SDK 2 中，如何更新数组字段，例如 Artifacts for Changeset？

> ID：11105805
> 
> 赞同：0
> 
> 时间：2012-06-19T17:02:12.980
> 
> 标签：javascript, rally

所以，我为一个变更集制作了一个模型，得到一个包含 2 个工件的变更集并获取 Artifacts 字段。当我控制台记录它时，我得到两个项目。我有另一个项目（一项任务）要推进这个领域。当我控制台记录工件数组时，我得到三个项目。

但是当我直接或使用 set() 设置字段时，我在控制台记录变更集，它仍然只认为有两个工件。我可能做错了什么？

```
Rally.data.ModelFactory.getModel({
      type: 'Changeset',
      success: function(model) {
             model.load( '1234', {
                  fetch: [ 'Artifacts' ],
                  callback: function(result, operation) {
                            if ( operation.wasSuccessful() ){
                                var artifacts = result.get('Artifacts');
                                if ( ! artifacts ) {
                                    artifacts = [];
                                }
                                artifacts.push( item );
                                console.log( artifacts );

                                result.data.Artifacts = artifacts;
                                //result.set('Artifacts', artifacts);

                                console.log( result );
                                result.save( {
                                    callback: function( result, operation ) {
                                    console.log( "After saving: ", operation );
                                    }
                                    } );
                            }
                   }
             })
      }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:30:27.423

看起来您需要创建一个新的工件数组，因为在使用相同的数组设置时它不会将记录标记为脏（可能是 Rally 代码或 Ext 代码中的错误）。此外，您需要传递工件的数据对象（在下面的示例中，newUserStory.data）。

我调整了您的代码以创建一个创建存储库、变更集和用户故事的示例；然后它将该用户故事附加到变更集的工件集合中。如果您完整地运行此代码，则需要将每个对象创建与更新代码分开运行，因为它是异步的，但相互依赖。另一种选择是在每个 save() 调用中进行回调。

创建必要的域对象：

```
 var newRepo, newChangeset, newUserStory;

Rally.data.ModelFactory.getModel({
      type: 'SCMRepository',
      success: function(model) {
          newRepo = new model({
            Name: 'Repo1',
            SCMType: 'SCM Type 1'   
          });
          newRepo.save();
      }
});

Rally.data.ModelFactory.getModel({
      type: 'Changeset',
      success: function(model) {
          newChangeset = new model({
            CommitTimestamp: '2012-06-20 01:00:00',
            Revision: 'revision1',
            SCMRepository: newRepo.data._ref
          });
          newChangeset.save();
      }
});

Rally.data.ModelFactory.getModel({
      type: 'UserStory',
      success: function(model) {
          newUserStory = new model({
            Name: 'Test story ' + new Date()
          });
          newUserStory.save();
      }
}); 
```

现在更新变更集：

```
Rally.data.ModelFactory.getModel({
      type: 'Changeset',
      success: function(model) {
          model.load( newChangeset.data.ObjectID, {
                  fetch: [ 'Artifacts' ],
                  callback: function(result, operation) {
                      if ( operation.wasSuccessful() ){         
                            var artifacts = result.get('Artifacts'),
                                artifactsCopy = Ext4.Array.clone(artifacts);

                            artifactsCopy.push(newUserStory.data);
                            result.set('Artifacts', artifactsCopy);

                            result.save( {
                                callback: function( result, operation ) {
                                    if (operation.wasSuccessful()) {
                                        var artifactInUpdate = Ext4.Array.filter(result.data.Artifacts, function(artifact) {
                                            return artifact._ref === newUserStory.data._ref;
                                        });

                                        console.log('Userstory added to changeset:', artifactInUpdate.length > 0);
                                    } else { 
                                        console.log('update not successful');
                                    }
                                }
                            });
                        }
                  }
           });
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:22:26.300

这在周末的 SaaS 版本中得到了修复。现在可以发送一组工件，并且该数组替换原始列表，就像 WSAPI 中的其他数组一样。

# jquery - Jquery飞入文本动画：如何在悬停时暂停元素？

> ID：11105807
> 
> 赞同：0
> 
> 时间：2012-06-19T17:02:16.910
> 
> 标签：jquery

我有以下 Jquery 文本飞入动画器（请参见下面的代码）。现在我希望一旦用户将鼠标悬停在任何正在动画的元素上，动画就会停止。另外，我希望最后一个元素（Text6）在淡出之前暂停一段时间。我尝试申请：

```
if ($activeText.is('.lastClass')) 
{$activeText.animate.delay(5000) OR $activeText.delay(5000)}; 
```

但它不起作用。如何在最后一个 div 上暂停动画？

查询：

```
<script type="text/javascript">

$(document).ready(function(){

    $('.container .flying-text').css({opacity:0});
    $('.container .active-text').animate({opacity:1, marginLeft: "0px"}, 1500); //animate first text
    var int = setInterval(changeText, 2000);    // call changeText function every 5 seconds

function changeText(){  
    var $activeText = $(".container .active-text");   //get current text    
    var $nextText = $activeText.next();  //get next text
    /*if($activeText.next().length == 0) $nextText = $('.container .flying-text:first');

    $activeText.animate({opacity:0}, 1000);
    $activeText.animate({marginLeft: "-100px"});*/

     if ($activeText.next().length == 0) {
        $nextText = $('.container .flying-text:first'); //if it is last text, loop back to first text

        // To fade all out
        var $allText = $(".container div");
        $allText .animate({
            opacity: 0
        }, 1000);
        $allText .animate({
            marginLeft: "-100px"
        });
    }

    $nextText.css({opacity: 0}).addClass('active-text').animate({opacity:1, marginLeft: "0px"}, 1500, function(){

        $activeText.removeClass('active-text');                                           
    });
}
});
</script> 
```

HTML：

```
<div class="flying1">
  <div class="flying-text active-text">Text1</div>                  
  <div class="flying-text">Text2</div>                      
  <div class="flying-text">Text3</div>
  <div class="flying-text">Text4</div>
  <div class="flying-text">Text5</div>  
  <div class="flying-text lastClass">Text6</div>                   
</div> 
```

谢谢你！

# c++ - 在 Python 中扩展的 C++ 类中的 Seg 错误回调问题

> ID：11105809
> 
> 赞同：3
> 
> 时间：2012-06-19T17:02:22.607
> 
> 标签：c++, python, multithreading, callback, virtual

我正在用 SWIG for Python 包装一个抽象 C++ 类，并且遇到了段错误问题。这是我正在处理的代码的简化版本。（“更改”是一个枚举。）

**Foo.h**

```
class Foo
{
public:
    virtual ~Foo() {};

    virtual void OnStateChange(Changes change) = 0;
}; 
```

然后在 Python 中。

**测试.py**

```
class MyFoo(Foo):
    def __init__(self):
        super(MyFoo).__init__(self)

    def OnStateChange(self, change):
        print("the state has changed to", change) 
```

然后，我将 MyFoo 的一个实例传递给 C++ lib（通过 SWIG 包装的函数），C++ 代码尝试调用 OnStateChange。第一次调用它时，我看到了 print 语句的输出，第二次程序因段错误而崩溃。

我已经阅读了这里的 SWIG 文档[http://www.swig.org/Doc1.3/Python.html#Python_directors](http://www.swig.org/Doc1.3/Python.html#Python_directors)关于实现我正在尝试做的事情并且我启用了导向器。我知道这可能没有足够的信息继续下去，但过去几天我一直在寻找高低，但没有找到任何令人满意的东西。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:38:20.577

在尝试创建一个小示例后，我发现了这个问题。我忘记了 C++ 代码正在运行它自己的线程，并试图调用 Python 线程。解决问题所需要做的就是将 -threads 选项添加到 swig 命令中。

# eclipse - Eclipse：包括更新站点所需的功能

> ID：11105812
> 
> 赞同：1
> 
> 时间：2012-06-19T17:02:35.133
> 
> 标签：eclipse, update-site

我正在开发一个 Eclipse 插件，它需要第三方插件，例如 AJDT（AspectJ 开发工具）插件。当用户想要从更新站点安装我的插件并且在他的可用更新站点列表中没有安装或启用 AJDT 时，安装将失败。

我在 site.xml 旁边创建了一个文件 associateSites.xml，并将引用包含在 site.xml: 标记中：

```
<site
  associateSitesURL="associateSites.xml"> 
```

associateSites.xml 的内容如下所示：

```
<associateSites>
<associateSite url="..."/>
</associateSites> 
```

这似乎没有想要的效果。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-07T10:20:45.000

使用 associateSitesURL 似乎已被弃用。

这可以帮助：

[在 Eclipse 的更新站点中包含一个外部更新站点](https://stackoverflow.com/questions/57398070/include-an-external-update-site-in-my-update-site-in-eclipse)

和...一起

[特征导出向导](https://help.eclipse.org/2020-06/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/update_sitemap.html)

您必须添加

```
<repository-reference location=...> 
```

在 category.xml 中添加标签并按照[功能导出向导](https://help.eclipse.org/2020-06/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/update_sitemap.html)中的说明导出功能，选中“分类存储库”选项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T17:28:21.903

尝试将 associateSitesURL 设为绝对 URL（例如`http://www.yourdomain.com/updates/associateSites.xml`）

# entity-framework - EF Power Tools Beta 2 和 Visual Studio 2012 RC

> ID：11105813
> 
> 赞同：1
> 
> 时间：2012-06-19T17:02:38.580
> 
> 标签：entity-framework, visual-studio-2012, entity-framework-5

ADO.NET 博客位于

[http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx](http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx)

说：

**兼容性**

Power Tools 与 Visual Studio 2010 和 Entity Framework 4.2 或更高版本兼容。

**您也可以在 Visual Studio 11 Beta 上安装 Power Tools，但您可能会收到错误“在所选文件中找不到派生自 DbContext 的可构造类型”。**这是由 Visual Studio 11 单元测试工具中的错误引起的，在该工具中加载了旧版本的 EntityFramework.dll。我们正在与该团队密切合作以解决该问题。作为一种解决方法，您可以删除 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\BindingPaths{BFC24BF4-B994-4757-BCDC-1D5D2768BF29} 注册表项。但是请注意，这将导致单元测试命令停止工作。感谢早期采用者，感谢您对预发布软件的超人耐心。

**我的问题是：** 有人知道这个问题是否在 VS2012 Professional RC 上得到解决？我有一个相当稳定的安装，不想搞砸它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:02:36.137

是的，它已在 Visual Studio 2012 RC 中修复。

# java - Java PreparedStatement RETURN_GENERATED_KEYS 不起作用

> ID：11105815
> 
> 赞同：1
> 
> 时间：2012-06-19T17:02:41.277
> 
> 标签：java, sql, jdbc, insert, prepared-statement

我试图在执行 SQL 插入时将标识列返回到我的 java 程序。运行代码时出现以下错误

```
 Uncaught exception thrown in one of the service methods of the 
servlet: Cocoon. Exception thrown : java.lang.AbstractMethodError: java/sql
/Connection.prepareStatement(Ljava/lang/String;I)Ljava/sql/PreparedStatement; 
```

这是我正在运行的代码。

```
private void insertUserInputParameters(ReportData rptData){

     UserInputParameters userParams = rptData.getUserInputData();
     StringBuilder sql = new StringBuilder();
     PreparedStatement pstmt = null;
     ResultSet rs = null;
     int userDataId = -1;

    //Get a database connection.
    sl = ServiceLocator.getInstance();
    ds = sl.getDataSource("jdbc/collegeguide");
    con = ds.getConnection();
    con.setReadOnly(false);

    sql.append("insert into cpgusrdtaf (statecd, addr1, addr2, city, state, ");
    sql.append("zipcode, dependent, shdindic, marstatus, residency, prntatge, ");
    sql.append("fincome, mincome, pincome, taxspaid, taxreturn, elig1040, ");
    sql.append("gincome, pcash, inetwrth, bnetwrth, pbenefit, paddlinf, ");
    sql.append("puntax, pdslcwrk, smstatus, sresidncy, studtr, stud1040, ");
    sql.append("sadjinc, sincome, spincome, sdslcwrk, studtax, scash, ");
    sql.append("sinvest, snetwrth, saddlinf, suntax, househld, nmbrsch, ");
    sql.append("studact, studsat, schools, housing) ");
    sql.append("values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?, ");
    sql.append("?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");

    //This line of code is where I get the error**
    pstmt = con.prepareStatement(sql.toString(), Statement.RETURN_GENERATED_KEYS);

    //If I remove the 'Statement.RETURN_GENERATED_KEYS' I do not get the error.**
    pstmt = con.prepareStatement(sql.toString());

    setStatementValues(pstmt, userParams);
    pstmt.executeUpdate();

    rs = pstmt.getGeneratedKeys();
    if(rs.next()){
       userDataId = rs.getInt(1);
    } 
```

我不允许使用存储过程，所以我不能走那条路。任何帮助将不胜感激

我正在使用 java 1.5

在此先感谢道格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:34:26.503

假设参数/参数是平衡的

（请确认查询是本机执行的，并且驱动程序支持 RETURN_GENERATED_KEYS），

您可以尝试使用 RETURN_GENERATED_KEYS 作为 executeUpdate 调用的参数的一部分吗？

```
pstmt = con.createStatement();
pstmt.executeUpdate(sql.toString(), Statement.RETURN_GENERATED_KEYS); 
```

编辑：只需阅读您关于使用 DB2 的说明。根据[http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.java.doc%2Fsrc%2Ftpc%2Fimjcc_t0057053.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.java.doc%2Fsrc%2Ftpc%2Fimjcc_t0057053.html)

_Restriction：对于 IBM Data Server Driver for JDBC and SQLJ 版本 3.57 或更高版本，以下形式对于将行插入 DB2® for z/OS® 数据服务器上的视图无效。

Connection.prepareStatement(sql-statement, Statement.RETURN_GENERATED_KEYS);_

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T06:48:59.673

这种方式对我有用：

```
prepStmt = con.prepareStatement(sql, new String[]{"NameOfIDField"}); 
```

我曾经遇到过 oracle 数据库的问题，如果表有很多字段，这将无法正常工作。但即使有 60 个字段，上述内容也适用于我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T17:44:38.370

我的 JT400.jar 文件是旧版本。我从sourceforge下载了最新的jar文件，问题就解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T16:34:09.520

用语句试试

```
Statement st    = null;
ResultSet rs    = null;
st = con.createStatement();

String query = " INSERT INTO refac_folios
([usuario], [estatus]) VALUES ('" + usuario + "'," + Vista_FoliosRefacciones.ESTATUS_CREADO )" ;

Integer afectadas = st .executeUpdate( query, Statement.RETURN_GENERATED_KEYS );

if (afectadas > 0){

     rs = st.getGeneratedKeys();

     if (rs .next()) {
          folio = rs.getInt(1);
     }
  rs.close();
}
st.close(); 
```

# html - 使用 Salesforce 门户重定向/登录

> ID：11105818
> 
> 赞同：0
> 
> 时间：2012-06-19T17:02:50.030
> 
> 标签：html, login, salesforce

在我们的网站上登录销售人员时遇到问题。当客户填写信息时，它会提交，然后再次将他们带到登录门户以输入信息，就像它不记得刚刚输入的内容一样。

我们有什么办法可以解决这个问题？

```
<div id="nav">
    <ul>
        <li id="login">
            <a id="login-trigger" href="#">
                                Log In <span>▼&lt;/span></a>
            <div id="login-content">
                <form action="https://na6.salesforce.com/secur/login_portal.jsp" method="post">
                    <input type="hidden" value="00D80000000anEa" name="orgId" />
                    <input type="hidden" value="060800000006ANB" name="portalId" />
                    <input type="hidden" value="true" name="useSecure" />
                    <input type="hidden" value="2" name="loginType" />
                    <input type="hidden" name="action" value="loginAction" />
                    <fieldset id="inputs">
                        <input id="txtUserIdGutter" class="InputText" type="text" name="Email"
                        placeholder="Your email address" tabindex="1" />
                        <input id="txtPasswordGutter" class="InputText" type="password" name="Password"
                        placeholder="Password" />
                    </fieldset>
                    <fieldset id="actions">
                        <input type="submit" id="submit" value="Log in" />
                        <label>
                            <input type="checkbox" checked="checked" />Keep me signed in</label>
                        <label>
                            <a href="https://na6.salesforce.com/secur/forgotpasswordp.jsp?orgId=00D80000000anEa&amp;portalId=060800000006ANB&amp;pLu=http%3A%2F%2Fwww.carrierstore.com%2F">Forgot Password?</a>
                        </label>
                    </fieldset>
                </form>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:12:30.277

您需要联系 Salesforce 的开发人员支持团队。

# xml - 在嵌套节点中获取唯一的 XPath 节点值

> ID：11105822
> 
> 赞同：2
> 
> 时间：2012-06-19T17:03:02.643
> 
> 标签：xml, xpath

我是 XPath 的新手，所以我需要一些帮助来解决这个问题。我有一个像这样的 XML 文件：

```
<items>
    <item>
        <brandName>Brand 1</brandName>
        <productTypes>
            <productType>Type 1</productType>
            <productType>Type 3</productType>
        </productTypes>
    </item>
    <item>
        <brandName>Brand 1</brandName>
        <productTypes>
            <productType>Type 2</productType>
            <productType>Type 3</productType>
        </productTypes>
    </item>
    <item>
        <brandName>Brand 2</brandName>
        <productTypes>
            <productType>Type 4</productType>
            <productType>Type 5</productType>
        </productTypes>
    </item>
</items> 
```

我试图找出一种方法来获取特定品牌的所有独特产品类型。例如，“Brand 1”的所有唯一 productType 将输出“Type 1”、“Type 2”、“Type 3”

我一直在谷歌搜索没有太多运气。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:37:33.180

这有效：

```
(/items/item[brandName='Brand 1']/productTypes/productType)[not(text()=preceding::*)] 
```

它是如何工作的：第一个`(...)`得到所有的`productType`brandName='Brand 1'。此时我有一个`productType`节点列表。现在我选择当前节点之前的节点中不包含节点文本的节点。

在python中试过：

```
n = libxml2dom.parseString(xml)
[x.textContent for x in n.xpath("(/items/item[brandName='Brand 1']/productTypes/productType)[not(text()=preceding::*)]")]
>>> [u'Type 1', u'Type 3', u'Type 2'] 
```

# architecture - 什么是存储缓冲区？

> ID：11105827
> 
> 赞同：45
> 
> 时间：2012-06-19T17:03:28.910
> 
> 标签：architecture, hardware, intel, cpu-architecture

谁能解释什么是加载缓冲区以及它与失效队列有何不同。以及存储缓冲区和写入组合缓冲区之间的区别？Paul E Mckenny [http://www.rdrop.com/users/paulmck/scalability/paper/whymb.2010.07.23a.pdf](http://www.rdrop.com/users/paulmck/scalability/paper/whymb.2010.07.23a.pdf)的论文 很好地解释了存储缓冲区和失效队列，但不幸的是没有谈论写组合缓冲区

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-21T00:57:09.513

无效队列更像是存储缓冲区，但它是内存系统的一部分，而不是 CPU。基本上，它是一个跟踪失效并确保它们正确完成的队列，以便缓存可以获取缓存行的所有权，然后它可以写入该行。加载队列是一种推测结构，它跟踪乱序处理器中的运行中的负载。例如，可能会出现以下情况

1.  CPU 推测性地从 X 发出负载
2.  *在存储到 Y之后*，该加载按程序顺序进行，但 Y 的地址尚未解析，因此存储不会继续。
3.  Y 已解析，结果等于 X。在解析到 Y 的存储时，该存储在加载队列中搜索已发出但在程序顺序中存储到 Y 之后存在的推测性加载。它会注意到 X 的负载（等于 Y），并且必须压缩那些从负载 X 开始并跟随的指令。

存储缓冲区是存在于 CPU 中的推测结构，就像加载队列一样，用于允许 CPU 推测存储。写组合缓冲区是内存系统的一部分，本质上需要一堆小的写入（想想 8 字节写入）并将它们打包成一个更大的事务（64 字节缓存行），然后再将它们发送到内存系统。这些写入不是推测性的，并且是一致性协议的一部分。目标是节省总线带宽。通常，写入组合缓冲区用于对 I/O 设备（通常用于显卡）的未缓存写入。在 I/O 设备中，通常通过执行 8 字节写入来对设备寄存器进行大量编程，并且写入组合缓冲区允许将这些写入组合成更大的事务，然后将它们传送出缓存。

# python - 在 py.test 中，当我明确跳过标记为 xfail 的测试时，如何将其报告为“已跳过”而不是“xfailed”？

> ID：11105828
> 
> 赞同：3
> 
> 时间：2012-06-19T17:03:32.870
> 
> 标签：python, pytest

我有一个标记为 xfail 的 py.test 测试函数：

```
@pytest.mark.xfail
def test_that_fails():
    assert 1 == 2 
```

在我的 pytest_runtest_setup() 钩子中，我明确地跳过了这个测试：

```
def pytest_runtest_setup (item):
    pytest.skip ('Skipping this test') 
```

当我运行 py.test 时，它报告测试 xfailed：

```
tests.py x

========================== 1 xfailed in 1.69 seconds =========================== 
```

如何让 py.test 将此测试报告为已跳过？

好像我在问，“如何在我的 pytest_runtest_setup() 钩子中从这个测试中删除 xfail 标记？”

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:35:49.740

感谢您的错误报告:)

我同意期望 py.test 将其报告为“跳过”测试而不是 xfail 是有道理的。毕竟，如果跳过测试，则无法确定 xfail-outcome (xfail/xpass)。我刚刚解决了这个问题，您可以通过键入以下内容进行安装：

```
pip_install -i http://pypi.testrun.org -U pytest
# using easy_install is fine as well 
```

这应该为您提供带有“py.test --version”的 2.2.5.dev4 并解决您的问题。它将成为下一个 pypi 版本的一部分。

# django - 使用 uWSGI 启动时未加载 Models.py

> ID：11105832
> 
> 赞同：1
> 
> 时间：2012-06-19T17:03:52.353
> 
> 标签：django, wsgi, uwsgi, django-signals, django-wsgi

我有一个系统，我需要在请求之前和之后对 URL 进行完全动态控制。

我正在为此使用信号，并且对于预请求信号（我遇到问题的那个，我有一个像这样的中间件，它连接到信号，允许它检查当前 request.path 是否适用到它，然后与它得到的第一个一起去。这通常工作得很好，而且相当优雅）：

```
class PreRouteMiddleWare(object):
    def process_request(self, request):
        url = request.path.strip('/')
        if url == '':
            url = '/'
        pre_routes = pre_route.send(sender=request, url=url)
        for reciever, response in pre_routes:
            if response:
                return response
        return None 
```

现在，要注册在 Django 路由堆栈“之前”发生的事情，我在应用程序中执行以下操作`models.py`：

```
@receiver(pre_route)
def try_things(sender, url, **kwargs):
    try:
        thing= Thing.objects.get(url=url)
        from myapp.views import myview
        return myview(sender, some_args)
    except Thing.DoesNotExist:
        return False 
```

这在我的开发服务器上也很有效。

但是，问题出现在我使用 uWSGI 的生产环境中。我像这样启动uWSGI（从新贵）：

```
sudo /usr/local/bin/uwsgi --emperor '/srv/*/uwsgi.ini' --enable-threads --single-interpreter 
```

我的 uwsgi.ini 看起来像这样：

```
[uwsgi]
socket = /srv/new/uwsgi.sock
module = wsgi:app
chdir = /srv/new/myapp
virtualenv = /srv/new
env = DJANGO_SETTINGS_MODULE=myapp.settings
uid = wsgi_new
gid = www-data
chmod = 770
processes = 2 
```

似乎正在发生的是对于每个 uWSGI 进程/线程，它们似乎只在第一个请求时加载 models.py，这意味着每个进程的第一个请求将无法连接信号。这意味着我有 n 个（其中 n 是进程数）请求完全失败，因为 models.py 在启动时没有加载（因为它正在开发中）。

我配置 uWSGI 错了吗？有没有更好的方法来强制在启动时连接信号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:24:57.317

Django 实际上是懒惰地加载东西。使用开发服务器会让人产生一种错误的安全感，即事情将如何在真正的 WSGI 服务器中工作，因为开发服务器加载管理命令会强制进行许多生产服务器不会发生的早期初始化。

你可能会读到：

[http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html](http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html)

这解释了在 mod_wsgi 中发生的问题。uWSGI 也会发生同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:37:35.740

好的，事实证明我需要让我的中间件挂钩 process_view 而不是 process_request：

```
class PreRouteMiddleWare(object):
    def process_view(self, request, *args, **kwargs):
        url = request.path.strip('/')
        if url == '':
            url = '/'
        pre_routes = pre_route.send(sender=request, url=url)
        for reciever, response in pre_routes:
            if response:
                return response
        return None 
```

现在效果很好！

# php - 用 jQuery 重新设置表单的样式？

> ID：11105833
> 
> 赞同：1
> 
> 时间：2012-06-19T17:03:53.403
> 
> 标签：php, jquery, css, ajax, forms

我设置了这个脚本，它将数据库中的所有相关用户回显到旁边有复选框的页面。您可以通过选中某些框并提交表单来将数据库中的这些用户组成一个组。这一切都很好。

不幸的是，我们的设计师不喜欢这样。她想要的基本上是屏幕左侧六个空白字段的列表。然后，当您单击屏幕右侧某人姓名旁边的加号按钮时，该姓名将出现在第一个空白字段中……以此类推，随后单击每个加号按钮。

因此，与其重新编码这一切（这真的不是一个选择），我想我可以用 jQuery 来“重新设计”这一切。我可以设置复选框的样式，使它们在未选中时看起来像加号，在选中时看起来像减号。

然后我只需要进行某种事件，以便在单击复选框时，将人名插入第一个空框中。这一切都只是烟雾和镜子。空框可能只是一个带边框的 div。从功能上讲，它的工作方式和以前一样。

谁能确认这是否可行？我的 JS 知识很烂，我不知道从哪里开始。另外，我已经在页面上有以下 jQuery 验证器功能，我不希望这个新的 JS 干扰它：

```
$(document).ready(function(){
$("#myform").validate({
    debug: false,
    rules: {
        group: {required: true}, 
    },
    messages: {
        group: {required: " Field required.", loginRegex: " Invalid character."},
    },
    submitHandler: function(form) {
        $('input[type=submit]').attr('disabled', 'disabled');
        $('#results').html('Loading...');
        $.post('process_group.php', $("#myform").serialize(), function(data) {
            $('#results').html(data);
        });
    }
    });
}); 
```

我想我要求的是关于如何编写复选框以在选中时将其值插入某个 div 的建议。并在未选中时删除该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:32:54.710

如果我理解正确，您需要使用 JQuery 执行以下操作：

1）用可点击的+/-符号替换服务器端代码生成的复选框（）。

您可以通过找到复选框并将其默认阶段替换为背景图像为 + 的空链接来执行此操作。

`$('checkbox').remove().html('<a href="#" style="background-image:plusSign.png">Some Name</a>');`

如果你知道怎么做，你应该创建加号和减号背景图像 CSS 类，而不是内联样式。

2）您想在单击时将 + 更改为 -，并且 3）让 + 符号旁边的用户名出现在其他地方（在空输入框中？）

要切换背景图像，只需在单击时更改样式（或类，如果您知道如何使图像成为 CSS 类）。然后获取内容并将其放入您的目标元素中。

这个 jsFiddle 可能有助于说明我上面描述的内容：http: [//jsfiddle.net/Ap2yW/1/](http://jsfiddle.net/Ap2yW/1/)

# python-3.x - Pygame 中的多个显示

> ID：11105836
> 
> 赞同：10
> 
> 时间：2012-06-19T17:04:03.620
> 
> 标签：python-3.x, pygame

我正在制作一个小游戏，我想制作另一个与我的主窗口分开的窗口。

我在主窗口中有主游戏，我想打开一个新窗口并在用户做某事时做一些动画。

在我下面的示例代码中，当用户按下“a”时，我希望它打开一个新窗口并快速移动到那里。

在这里我设置了两个窗口：（我知道这不起作用，这是我要问的怎么做）

```
SCREEN_X = 400
SCREEN_Y = 400
BSCREEN_X = 240
BSCREEN_Y = 160

BATTLE_SCENE = pygame.display.set_mode((BSCREEN_X, BSCREEN_Y))
SCREEN = pygame.display.set_mode((SCREEN_X, SCREEN_Y)) 
```

然后是程序：

```
def run_ani ():
    #Do animation, blitting to BATTLE_SCENE
    return

def main_game():
    ending=False
    while ending==False:
        clock.tick(30)
        for event in pygame.event.get():
            if event.type == pygame.QUIT: ending=True
            if event.type == KEYDOWN: # key down or up?
                if event.key == K_ESCAPE:
                    ending=True # Time to leave
                    print("Stopped Early by user")
                elif event.key == K_a:
                    run_ani()
        #Normal screen motion, blitting to SCREEN
        if ending: pygame.quit()
    return 
```

到目前为止，它所做的是绘制主屏幕，然后当按下 A 时，它停止绘制主屏幕动画，但仍然在主屏幕上绘制其他动画并在左上角绘制。

我很确定它会这样做，因为我设置`BATTLE_SCENE`为小于主屏幕，因此当向它传送时，`BATTLE_SCENE`它会传送到我在主屏幕上角创建的区域 (240x160)。

但是我想`BATTLE_SCENE`成为一个单独的窗口，这样当我按'a'时它会弹出，做它的事情，然后关闭或至少在主屏幕后面。

这个怎么做？甚至可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T18:29:32.313

你真的需要多个窗口吗？我的意思是，你真的需要它们吗？

如果是，那么您可能应该改用[pyglet](http://www.pyglet.org/) / [cocos2d](http://cocos2d.org/)。

要在 pygame 中有多个窗口，您需要多个进程（每个窗口一个）。虽然这是可行的，但不值得付出努力。你需要[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)在窗口之间交换数据，我猜你的代码会变得容易出错和丑陋。

当您需要多个窗口时，请使用 pyglet。

更好的解决方案可能是将您的游戏划分为场景。创建多个场景，使每个场景代表游戏的一个阶段，例如 MenuScene、MainScene、BattleScene、GameOverScene、OptionScene 等。

然后让这些场景中的每一个处理游戏那部分的输入/绘图。

*   MenuScene 处理游戏菜单的绘制和输入等
*   MainScene 处理运行游戏的绘制和输入等
*   BattleScene 处理您在其中所做的任何事情的绘图和输入等`run_ani`

在您的主循环中，只需通过实现方法 、 和 . 将控制权传递给`draw()`当前`handle_event()`场景`update()`。

一些示例代码来了解这个想法：

```
scenes = {'Main': MainScene(),
          'Battle': BattleScene()} #etc

scene = scenes['Main']

class MainScene():
  ...
  def handle_event(self, event):
    if event.type == KEYUP:
      if event.key == K_a:
        scene = scenes['Battle']
  ...

class BattleScene():
  ...
  def draw(self):
    # draw your animation

  def update(self):
    # if animation is over:
    scene = scenes['Main']

...

def main_game():
  ending=False
  While Not ending:
      clock.tick(30)
      for event in pygame.event.get():
        scene.handle_event(event)
        scene.update()
        scene.draw() 
```

这是一种清晰地分离游戏逻辑并允许上下文切换的简单方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-11T18:27:58.340

========================================编辑=========== ===============================

实际上它不会起作用。显然pygame只支持一个显示屏幕，当你初始化另一个时，它会关闭第一个。您将使用两个变量，它们实际上是相同的表面。您可以让游戏增加窗口大小并在其一侧播放战斗场景，为此，您可以使用不同的值再次调用 pygame.display.set_mode()。引用显示屏的变量仍然可用，因为它改变了对新屏幕的引用。场景结束后，您可以以同样的方式缩小窗口。

==================================================== =================================

基本上发生的是你运行一个循环，它的每次迭代都在渲染和显示一个新帧。当您在循环内调用函数时，它不会继续运行，直到您完成运行该函数。

解决这个问题的一种方法是在主循环中不断调用更新战斗场景的函数。另一种方法是使用线程。线程基本上是同时运行多个脚本（“线程”）。

幸运的是，python 已经使用 threading 模块为我们实现了这一点。我在这里解释模块太长了，但你可以在[这里](https://docs.python.org/3.4/library/threading.html)学习。如果您以前没有使用过线程，这可能会有点复杂，但过一段时间会更容易。如果你想了解更多关于线程的信息，你可以去[这里](http://en.wikipedia.org/wiki/Thread_%28computing%29)。

具体来说，您可以有两个线程，一个用于每个循环/窗口，并同时运行它们。

希望我对你有所帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-03T05:28:29.830

是的，这是可能的。SDL2 能够打开多个窗口。在示例文件夹中，您可以查看“video.py”。

[https://github.com/pygame/pygame/blob/main/examples/video.py](https://github.com/pygame/pygame/blob/main/examples/video.py)

“这个例子需要 pygame 2 和 SDL2。_sdl2 是实验性的，会改变。”

# javascript - 从 JSON 到生成的 CoffeeScript

> ID：11105839
> 
> 赞同：1
> 
> 时间：2012-06-19T17:04:12.653
> 
> 标签：javascript, json, coffeescript

我目前已经为项目演示硬编码了一些数据。代码如下所示：

```
update: () =>
    t = getTime()
    if t == undefined
        zone = -1
    else if between(t, 100, 110) 
        zone = 1
    else if between(t, 111, 120) 
        zone = 2 
```

现在，下一步是采用以下形式的 json 数组：

```
[{"start": 100, "end": 110, "zone": 1}, {"start": 111, "end": 120,"zone": 2}] 
```

制作上面生成的代码。这可能吗？这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:17:22.877

```
fs = require 'fs'

json = fs.readFileSync 'PUT_FILENAME_HERE', 'utf-8'
data = JSON.parse json

for zoneData in data
  if between(t, zoneData.start, zoneData.end)
    zone = zoneData.zone
    break 
```

# ruby-on-rails - 设计不显示成功消息

> ID：11105840
> 
> 赞同：1
> 
> 时间：2012-06-19T17:04:13.267
> 
> 标签：ruby-on-rails, devise

设计的行为很奇怪。它显示红色或错误消息，但不显示绿色或成功消息。

这发生在我对路由和控制器进行更改以根据用户是否登录重定向到登录页面或主页之后。

所以 routes.rb 现在有：

```
devise_for :users

root :to => "questions#redirect_on_visit" 

match 'home', :to => "questions#index" 
```

和控制器：

```
before_filter :authenticate_user!, :except => [:redirect_on_visit]

def redirect_on_visit
  if user_signed_in?       
    redirect_to home_path      
  else    
    redirect_to new_user_session_path      
  end
end 
```

还更改了应用程序控制器以在登录/注销后重定向到适当的页面：

```
 protected

 def after_sign_in_path_for(resource)    
   stored_location_for(:user) || root_path      
 end

 private

 def after_sign_out_path_for(resource)
   stored_location_for(:user) || root_path    
 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:10:13.060

我极度麻木。我拥有 , 的事实`root :to => "questions#redirect_on_visit"`将在每次用户访问、登录或退出时重定向。重定向显然是在洗掉闪存消息。

最后我找到了我正在寻找的解决方案。[这是为了保存这里](https://stackoverflow.com/questions/7426526/flash-message-in-redirect-not-working-rail3)`flash.keep(:notice)`提到的闪存消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:28:43.217

您的问题是从**登录 => 根 => 主页**的多重重定向， 因为 Flash 对象只有一个请求才有生命假

我想写`redirect_on_visit`路由`after_sign_in_path_for`会更好`after_sign_out_path_for`

像这样的东西

```
def after_sign_in_path_for(resource)    
   stored_location_for(:user) ||  home_path    
 end

 private

 def after_sign_out_path_for(resource)
   stored_location_for(:user) || new_user_session_path   
 end 
```

# java - 如何设置编译器编码？

> ID：11105847
> 
> 赞同：2
> 
> 时间：2012-06-19T17:04:38.483
> 
> 标签：java, maven

我想让 Maven 使用 -Dfile.encoding=UTF8 标志编译我的项目，方法是在父项目的 pom.xml 中设置它。

这不是这样做的：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

所以当 Maven 编译时我得到这个错误：

```
 javac option: M:\Parent\persistence\target\generated-sources\apt
...\Database.java:90: error: unmappable character for encoding Cp1252
     * Semantics of SQL INSERT OR IGNOREÃ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:12:06.280

根据文档，您所拥有的看起来是正确的：

[http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html)

由于那失败了，请尝试明确设置它：

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin> 
```

# android - 无法在 Button 上设置背景资源

> ID：11105851
> 
> 赞同：2
> 
> 时间：2012-06-19T17:04:43.993
> 
> 标签：android, android-view, android-button, android-resources

我有一个应用程序，我将一些资源应用于按钮以修改其背景。

一切正常，但是当我的应用程序在 onPause 之后进入 onResume 时，我无法再设置背景了。

我有一组 18 个按钮，当我在 onResume 中时，我调用：

```
for (int i = 0; i < max; i++) {
    Button b = l.get(i);
    b.setBackgroundResource(R.color.green);
} 
```

在 li 中有从`findViewById()`.

这仅适用于 for 的最后一个元素，但不适用于其他元素。

任何想法？

** 编辑 **

这是我用于填充数组的代码

```
btn_1 = (Button)findViewById(R.id.btn_1);
btn_1.setOnClickListener(this);
l.add(btn_1); 
```

这对我所有的按钮都重复。

** 第二次编辑 **

```
public void onResume() {
    btn_1 = (Button)findViewById(R.id.btn_1);
    btn_1.setOnClickListener(this);
    l = new ArrayList<Button>();
    l.add(btn_1);
    ...
    for (int i = 0; i < max; i++) {
        Button b = l.get(i);
        b.setBackgroundResource(R.color.green);
    }
} 
```

在`onCreate()`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:49:01.923

试试下面的d ..这会很好。

```
List<Button> mButtonList = new ArrayList<Button>();

onCreate() {

    mButtonList.add((Button) findViewById(R.id.btn_1));
    mButtonList.add((Button) findViewById(R.id.btn_2));
    mButtonList.add((Button) findViewById(R.id.btn_3));
    ....

    for(Button b : mButtonList) {
        b.setOnClickListener(this);
    }

}

onResume() {
    for(Button b : mButtonList) {
        b.setBackgroundResource(R.color.green);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:08:47.370

简单的例子：

**活动**

```
public class StackOverFlowActivity extends Activity {   
    private ArrayList<Button> myArray = new ArrayList<Button>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myArray.add((Button)findViewById(R.id.btn_1));
        myArray.add((Button)findViewById(R.id.btn_2));
        myArray.add((Button)findViewById(R.id.btn_3));
        myArray.add((Button)findViewById(R.id.btn_4));
        myArray.add((Button)findViewById(R.id.btn_5));
    }

    @Override
    protected void onResume() {
        super.onResume();
        for (Button b : myArray) {
            b.setBackgroundColor(getResources().getColor(R.color.blue));
        }
    }
} 
```

**XML 主要**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn_1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1" />

    <Button
        android:id="@+id/btn_2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 2" />

    <Button
        android:id="@+id/btn_3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 3" />

    <Button
        android:id="@+id/btn_4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 4" />

    <Button
        android:id="@+id/btn_5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 5" />

</LinearLayout> 
```

**我在 Strings.xml 中的颜色**

```
<color name="blue">#0099CC</color> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:01:03.060

改用这个：

```
for (int i = 0; i < max; i++) {
    Button b = l.get(i);
    b.setBackgroundColor(getResources().getColor(R.color.green));
} 
```

如果 max 真的很大，您可能希望`getColor`在循环之前缓存结果。

编辑：

根据文档：[setBackgroundResource](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)仅与可绘制的 id 一起使用，而[setBackgroundColor](http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29)似乎正是您所需要的，因此您的代码的另一部分可能运行不正常，也许循环，上面的行在`setBackgroundColor`我的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T12:11:10.190

你说过：

> ": btn_1 的 ... 代码相同，只需将 btn_1 与 btn_2、btn_3 等交换即可。"

如果是这样，那么每次您尝试添加新按钮时，这些行都会重置您的数组。

```
l = new ArrayList<Button>();
l.add(btn_1); 
```

PS您应该避免使用手动创建按钮数组 - 而是使用一些育儿布局，例如LinearLayout，然后使用getChildAt（i）获取他的按钮儿子，**它更干净**。例子：

```
 // Register all the buttons in the layout to the OnClickListener
    LinearLayout lin = (LinearLayout)findViewById(R.id.linear_buttons);
    int childcount = lin.getChildCount();
    for (int i=0; i < childcount; i++){
        View v = lin.getChildAt(i);
        v.setOnClickListener(this);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T17:51:36.840

尝试这个 -

```
for (int i = 0; i < l.getChildCount(); i++) 
{
    Button b = (Button) l.getChildAt(i);
    b.setBackgroundResource(R.color.green);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T02:40:57.313

为什么不扩展 Button 类，设置它的颜色，然后使用那个新类？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-29T10:44:12.767

尝试这个。它为我工作

```
for (int i = 0; i < count; i++) {

            btn_title[i] = new Button(ActivityName.this);
            btn_title[i].setText(menu.menu_title[i]);
            btn_title[i].setId(i);
            btn_title[i].setTextColor(Color.BLACK);
            btn_title[i].setBackgroundColor(Color.parseColor(dataxml
                    .getMenucolor()));
            btn_title[i]
                    .setTextSize(Integer.parseInt(dataxml.getFontsize()));
            btn_title[i].setGravity(Gravity.CENTER_VERTICAL
                    | Gravity.CENTER_HORIZONTAL);
            btn_title[i].setSingleLine();
            btn_title[i].setEllipsize(TruncateAt.END);

            btn_title[i].setOnClickListener(new ButtonListner());

        } 
```

希望这会有所帮助

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-29T10:02:02.623

它显然不起作用，让我解释一下为什么它设置了 button 的最后一个值。您正在使用一个按钮参考（无论您从哪里获得`(Button)findViewById(R.id.btn_1)`）并且不合时宜地有一个按钮参考，您只需使用更改其值 `l.add(btn_1);`

你需要做的是，为每个按钮**创建一个新的按钮实例**，并在适当的视图中对其进行**充气。**

这是那个小勾号

```
for (int i==0 ; i < length; i++ ){
    Button button  = new Button(context); 

    collectionOfButton.add(button) ;
} 
```

如果您尝试集成到某些**xml 布局**文件中，请使用**inflate使用该按钮集合。**

# backbone.js - Backbone.js - 后退按钮恢复滚动位置

> ID：11105854
> 
> 赞同：4
> 
> 时间：2012-06-19T17:05:19.607
> 
> 标签：backbone.js

我有一个用backbone.js 编写的Web 应用程序。假设我有一页搜索结果，并且用户滚动到搜索结果的底部。用户单击最后一个搜索结果，然后显示该结果的页面。

我想支持后退按钮，当用户单击“后退”时，路由器会启动并重新显示搜索页面。问题是当搜索页面被重新渲染时，它再次滚动到顶部。

将结果恢复到原始位置的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:22:24.857

考虑跟踪视图中的滚动位置。然后在一个`render`或让`route`改变位置的页面

```
View = Backbone.View.extend({
   initialize: function () {
      var self = this;
      $( window ).on( 'scroll', function () {
         self.position = this.pageYOffset;
      });

   },
   render: function () {
      // render code
      if ( this.position ) {
        window.scrollBy( 0, this.position );
      }
   }
}); 
```

# json - 将 JSON 日期发送到 WCF 服务

> ID：11105856
> 
> 赞同：4
> 
> 时间：2012-06-19T17:05:20.323
> 
> 标签：json, wcf, datepicker

我想将 json 对象发布到我的 WCF 服务

我唯一的问题是他的日期属性。我从 jquery datepicker 获取日期，我想在我的服务中获取它作为 c# datetime。

我的服务：

```
namespace Employee
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        [WebInvoke(Method = "POST", 
                   RequestFormat = WebMessageFormat.Json,
                   ResponseFormat = WebMessageFormat.Json,
                   BodyStyle = WebMessageBodyStyle.Wrapped)]
        bool UpdateEmployee(Employee Employee);
    }
} 
```

这是员工：

```
[DataContract]
public class Employee
{
    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public string Department { get; set; }

    [DataMember]
    public int Salary { get; set; }

    [DataMember]
    public DateTime Hired { get; set; }
} 
```

所有其他属性都可以正常工作。我只需要将我的日期字符串转换为 json 日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:14:17.763

object的预期格式`DateTime`不是 jQuery 日期选择器返回的格式。WCF 需要 ASP.NET 格式的日期（例如，`\/Date(1234567890)\/`）。

不过，您可以使用其他格式，但这并不简单（至少在 .NET 4.0 之前不会；在 4.5 上这会好很多）。基本上，您将使用一个字符串属性（如果您的服务在完全信任下运行，它可以是私有的），该属性将从线路中获取值，然后`DateTime`在序列化过程中将其连接到一个属性。[在http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/06/wcf-extensibility-serialization-callbacks.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/06/wcf-extensibility-serialization-callbacks.aspx)上有关于这个技巧的更多信息，你可以在下面的代码中看到它。

```
namespace StackOverflow_11105856
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        [WebInvoke(Method = "POST",
                   RequestFormat = WebMessageFormat.Json,
                   ResponseFormat = WebMessageFormat.Json,
                   BodyStyle = WebMessageBodyStyle.Wrapped)]
        string UpdateEmployee(Employee Employee);
    }

    public class Service : IService1
    {
        public string UpdateEmployee(Employee Employee)
        {
            return string.Format("Name={0},Hired={1}", Employee.Name, Employee.Hired.ToString("yyyy-MM-dd HH:mm:ss"));
        }
    }

    [DataContract]
    public class Employee
    {
        [DataMember]
        public string Name { get; set; }

        [DataMember]
        public string Department { get; set; }

        [DataMember]
        public int Salary { get; set; }

        public DateTime Hired { get; set; }

        [DataMember(Name = "Hired")]
        private string HiredForSerialization { get; set; }

        [OnSerializing]
        void OnSerializing(StreamingContext ctx)
        {
            this.HiredForSerialization = this.Hired.ToString("yyyy-MM-dd", CultureInfo.InvariantCulture);
        }

        [OnDeserializing]
        void OnDeserializing(StreamingContext ctx)
        {
            this.HiredForSerialization = "1900-01-01";
        }

        [OnDeserialized]
        void OnDeserialized(StreamingContext ctx)
        {
            this.Hired = DateTime.ParseExact(this.HiredForSerialization, "MM/dd/yyyy", CultureInfo.InvariantCulture);
        }
    }
} 
```

和 jQuery 调用：

```
 function StackOverflow_11105856_Test() {
        var url = "/StackOverflow_11105856.svc/UpdateEmployee";
        var data = {
            Name: "John Doe",
            Department: "Accounting",
            Salary: 50000,
            Hired: $("#StackOverflow_11105856_datepicker").val()
        };
        $.ajax({
            type: 'POST',
            url: url,
            contentType: "application/json",
            data: JSON.stringify({ Employee: data }),
            success: function (result) {
                $("#result").text(result.UpdateEmployeeResult);
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:09:12.647

您应该尝试将属性更改`BodyStyle = WebMessageBodyStyle.Wrapped`为 `BodyStyle = WebMessageBodyStyle.Bare`. 这样框架就不会添加任何额外的 XML 装饰。

此外，您应该检查来自客户端的日期格式。也许您应该以预设格式从客户端发送它，然后在您的对象中包含一个字符串属性，而不是 DateTime 属性。

您可以添加一个只读属性，使用已知格式将日期字符串转换为 DateTime。

# php - PHP FieldClass 中的默认电子邮件地址

> ID：11105860
> 
> 赞同：0
> 
> 时间：2012-06-19T17:05:37.373
> 
> 标签：php

我是 PHP 新手，正在构建一个显示客户订单表格（收集姓名、地址、电子邮件等）的页面。

我想为显示电子邮件通知输入框的部分添加一个默认值，但无法很好地弄清楚语法以知道它应该去哪里：

```
<tr>
<td valign="top" class="<? $form->FieldClass('notifications');?>">Email Notifications:</td>
<td valign="top" colspan="3" value="test"><? ShowText('notifications', '35'); ?></td>
</tr> 
```

我知道单个部分应该是 value="email@location" 但我不确定它应该去哪里。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:10:26.120

要使用默认值填充 HTML 文本框，请使用该`value`属性。

```
<input type="text" name="notifications" value="email@location.com" /> 
```

如果`ShowText`函数是 Web 框架的一部分，那么它可能会让您输入文本框的默认值（例如，作为函数的第三个参数）。否则，您必须检查此函数的来源并根据需要对其进行修改。

`<td>`标签用于定义表格单元格。在实践中，人们经常使用表格来定位页面上的元素，尽管这不是他们的预期目的。表格与表单域没有任何关系，但通常用于在页面上定位表单域。

**提示：**最好使用长版本的 PHP 开始标记 ( `<?php`) 而不是短版本 ( `<?`)。如果 PHP 安装配置为这样做，则 Web 服务器仅支持短版本。通过使用长版本，您不必担心服务器是否设置了此配置参数（它使您的脚本更具可移植性）。

# sql-server - 在 SSAS 中链接多对多维度关系

> ID：11105865
> 
> 赞同：0
> 
> 时间：2012-06-19T17:05:45.957
> 
> 标签：sql-server, sql-server-2008, ssas, olap, business-intelligence

我正在 SSAS 中开发一个多维数据集并尝试对以下关系进行建模：

*   1 位客户的许多事实
*   许多客户对许多销售代表
*   许多销售代表（下属）到销售代表（经理）
*   每个 M2M 关系都由一个桥接表促进，该桥接表也充当多维数据集中的事实表

我有大部分工作。我可以按客户和销售代表（下属）对事实进行切片，但是当我将销售代表（经理）添加到查询中时，无论桥表中是否存在这种关系，它似乎都会返回每个下属/经理组合。

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:11:58.383

我的一些维度缺少与中间度量值组的关系。

[http://msdn.microsoft.com/en-us/library/ms345139(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms345139(v=sql.90).aspx)

# ruby-on-rails - 在 FactoryGirl 中创建字典作为属性

> ID：11105866
> 
> 赞同：0
> 
> 时间：2012-06-19T17:05:56.923
> 
> 标签：ruby-on-rails, testing, rspec, factory-bot

Factory Girl 允许执行以下操作：

```
FactoryGirl define 
  factory :post do
    content  "some content"
    styles   "styles here"
    team     1
  end
end 
```

但是，如果我在工厂块内尝试一些东西，例如：

```
 factory :post do
    content  "some content"
    styles   "styles here"
    team     1
    my_dictionary {'a' => 1, 'b' => 2}
  end 
```

my_dictionary 不会被解释为字典类型。我不知道如何将字典作为 FactoryGirl 中的属性。谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:12:57.927

您观察到的问题来自 Ruby 中的语法歧义。该语言使用花括号来定义散列（您称为字典）以及块（例如，当使用`each`循环时）。由于您现在使用散列作为该`my_dictionary`方法的唯一参数，因此解析器不清楚该左大括号是解释为块的开始还是散列。在这种情况下，Ruby 默认采用块假设。

要将解释强制作为方法参数，您可以像这样使用括号：

```
my_dictionary({'a' => 1, 'b' => 2}) 
```

然后，可以毫无歧义地解析该语句。您在这里所拥有的只是您不能轻易省略方法调用的括号的极少数情况之一。

# python - 从python中的函数构建一个类

> ID：11105868
> 
> 赞同：0
> 
> 时间：2012-06-19T17:06:00.473
> 
> 标签：python, class, function, methods, partial

我已经编写了一系列函数，但一直在玩弄使用它们来构建类的想法。我不想全部重写它们，而是想从课堂上调用它们。这样做的正确方法是什么？我可以想到以下几点：

一个无聊的功能，但它给出了这个想法。

```
def my_func( a_dict, a_tuple ):
    a,b = a_tuple
    a_dict[a] = b
    return a_dict 
```

我想到的两种方法如下：

```
class MyDict(dict):
    def my_method(self, a_tuple):
        return my_func(self, a_tuple) 
```

或者：

```
import functools
class MyOtherDict(dict):
    def __init__(self):
        self.my_parital = functools.partial(my_func, self) 
```

有人指出，以下内容也将起作用。这似乎是最简单的！

```
class MySimpleDict(dict):
    my_method = my_function 
```

问题的一个小扩展：

这样做是否常见（从方法调用函数）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:12:33.313

甚至还有第三个：

```
class MyThirdDict(dict):
    my_method = my_func 
```

这表现得好像函数是在类范围内定义的——每次访问它都会导致调用函数的`__get__`，从而产生一个方法。

此外，在你的第一种方法中，我会做

```
class MyDict(dict):
    def my_method(self, a_tuple):
        return my_func(self, a_tuple) 
```

为了使行为100％相同。

从您的两种方法来看，第一种方法肯定更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:12:46.073

更简单的呢...

```
def my_func( a_dict, a_tuple ):
    a,b = a_tuple
    a_dict[a] = b
    return a_dict

class MyDict(dict):
    my_method = my_func 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T17:13:07.620

实例方法只是一个函数，它是类的一个属性，所以下面的方法在这里起作用：

```
class MyDict(dict):
    my_method = my_func 
```

例如：

```
>>> def my_func( a_dict, a_tuple ):
...     a,b = a_tuple
...     a_dict[a] = b
...     return a_dict
... 
>>> class MyDict(dict):
...     my_method = my_func
... 
>>> d = MyDict()
>>> d.my_method(('a', 'b'))
{'a': 'b'}
>>> d
{'a': 'b'} 
```

这看起来有点令人困惑，因为`self`它没有用作第一个参数名称，但它的工作方式相同。`MyDict`实例作为参数`a_dict`传入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T17:10:51.123

前者可能会被认为更干净——在你`__init__`的“方法”中创建有点讨厌（也意味着这些方法在类定义中不可见）。

# login - Google OAuth 2.0 故障排除 - 来自 Google 服务器的查询分隔符不正确

> ID：11105879
> 
> 赞同：0
> 
> 时间：2012-06-19T17:06:46.890
> 
> 标签：login, oauth-2.0

**登录.php**

```
<?php
    define('client_id', 'cid');
    define('redirect_uri', 'http://domain.tld/file.php');
    define('client_secret', 'secret');

    $endpoint = 'https://accounts.google.com/o/oauth2/auth';
    $querystr = array(
        'response_type' => 'token',
        'client_id' => client_id,
        'redirect_uri' => redirect_uri,
        'scope' => 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile',
#       'state' => $_SERVER['REQUEST_URI']
    );

    if (isset($_GET['access_token']))
        print_r($_GET);
    else
        header('Location: ' . $endpoint . '?' . http_build_query($querystr));

?> 
```

上面的代码工作正常，我遇到的问题是我从谷歌得到的响应格式不正确。我从他们那里得到的查询字符串不是以问号`?`开头，而是以数字符号开头`#`。以下是来自 Google 服务器的示例返回。

`http://domain.tld/file.php#access_token=ya29.AHES6ZABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmno&token_type=Bearer&expires_in=3600`

为什么用数字符号将查询字符串与文件路径分开？是因为我没有使用 https 模式并且它在惩罚我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:11:31.847

不，它被称为 URL 的“哈希”。对于从服务器到客户端的响应（*反之亦然*），这是一种常见的方案。例如，Facebook OAuth 2.0 也使用了这种技术。只要习惯它，并从井号开始解释响应。

# gcc - 这种带有输入=输出的 gcc 样式 asm 是否需要早期破坏？

> ID：11105880
> 
> 赞同：7
> 
> 时间：2012-06-19T17:06:47.140
> 
> 标签：gcc, inline-assembly

Gcc inline asm early clobber 约束在此处的 gcc 文档中进行了描述：

[http://gcc.gnu.org/onlinedocs/gcc/Modifiers.html#Modifiers](http://gcc.gnu.org/onlinedocs/gcc/Modifiers.html#Modifiers)

我们有一个 128 位添加的 amd64 实现：

```
#define ADD128(rh, rl, ah, al, bh, bl)                                     \
    __asm__("addq %2, %0; adcq %3, %1"                                     \
            /* outputs */ : "=r"(rl),  /* %0 */                            \
                            "=r"(rh)   /* %1 */                            \
            /* inputs */  : "emr"(bl), /* %2 */                            \
                            "emr"(bh), /* %3 */                            \
                            "0"(al),   /* %4 == %0 */                      \
                            "1"(ah)    /* %5 == %1 */                      \
            /* clobbers */: "cc"       /* condition registers (CF, ...) */ \
           ) 
```

我想知道这是否必须对 %0 使用早期的 clobber (&)：

```
#define ADD128(rh, rl, ah, al, bh, bl)                                 \
    __asm__("addq %2, %0; adcq %3, %1"                                     \
            /* outputs */ : "=&r"(rl),  /* %0 */                            \
                            "=r"(rh)   /* %1 */                            \
            /* inputs */  : "emr"(bl), /* %2 */                            \
                            "emr"(bh), /* %3 */                            \
                            "0"(al),   /* %4 == %0 */                      \
                            "1"(ah)    /* %5 == %1 */                      \
            /* clobbers */: "cc"       /* condition registers (CF, ...) */ \
           ) 
```

但是，我不太确定，因为我们在 amd64 版本（`%0`== `%4`，`%1`== `%5`）中有明确的输入 = 输出？

第一个非earlyclobber 版本目前似乎适用于我们正在使用的所有优化级别，至少使用intel 编译器（如果使用gcc，我们不需要这个，因为gcc 现在支持这个目标上的本机int128 操作）。

为了严格遵守内联 asm 中早期 clobber 的 gcc 规范，我们是否需要`&`for`%0`约束，即使使用 inputs=outputs 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:20:49.290

`bh`如果您使用与and完全相同的表达式调用此宏，则需要早期的clobber `al`。在这种情况下，如果没有 clobber，编译器可能会选择对`%3`and使用相同的寄存器`%4`（与 相同`%0`），因此第一条指令可能会在第二个表达式读取该值之前破坏该值。

您实际上不太可能以可能触发此问题的方式调用宏，因此没有clobber 看不到任何问题也就不足为奇了。`al`添加 clobber 还会在调用具有相同 to的宏时引入额外的（不需要的）寄存器副本`bl`（例如，将 128 位值添加到其自身），因此有点不受欢迎。

# sql - SQL如何提取进程的所有可能路径

> ID：11105887
> 
> 赞同：1
> 
> 时间：2012-06-19T17:07:16.317
> 
> 标签：sql, sql-server, sql-server-2008

我有存储过程阶段信息的过程阶段表。每个流程阶段都可以有一条或多条通往下一阶段的路线，并且此信息与每个阶段一起存储在 xml 列中。

例如阶段样本数据

```
stageId | stageXML
A | '<stage id="A"><routes><route id="1"><action><method>goToStage</method><arguments><id>B</id></arguments></action></route><route id="2"><action><method>goToStage</method><arguments><id>C</id></arguments></action></route><route id="3"><action><method>goToStage</method><arguments><id>D</id></arguments></action></route></routes></stage>'
B | '<stage id="B"><routes><route id="1"><action><method>goToStage</method><arguments><id>END</id></arguments></action></route></routes></stage>'
C | '<stage id="C"><routes><route id="1"><action><method>goToStage</method><arguments><id>A</id></arguments></action></route></routes></stage>'
D | '<stage id="D"><routes><route id="1"><action><method>goToStage</method><arguments><id/></arguments></action></route></routes></stage>' 
```

SQL 创建测试数据：

```
CREATE TABLE #stages
(stageId CHAR(1), stageXML xml)

INSERT INTO
  #stages(stageId,stageXML)
VALUES
('A' , '<stage id="A"><routes><route id="1"><action><method>goToStage</method><arguments><id>B</id></arguments></action></route><route id="2"><action><method>goToStage</method><arguments><id>C</id></arguments></action></route><route id="3"><action><method>goToStage</method><arguments><id>D</id></arguments></action></route></routes></stage>'),
('B' , '<stage id="B"><routes><route id="1"><action><method>goToStage</method><arguments><id>END</id></arguments></action></route></routes></stage>'),
('C' , '<stage id="C"><routes><route id="1"><action><method>goToStage</method><arguments><id>A</id></arguments></action></route></routes></stage>'),
('D' , '<stage id="D"><routes><route id="1"><action><method>goToStage</method><arguments><id/></arguments></action></route></routes></stage>')

SELECT * from #stages 
```

每个阶段都遵循 goToStage 方法到下一个阶段，直到它达到“END”的 goToStage/id，或者没有下一个阶段（没有 goToStage/id）或者下一个阶段已经通过。

所以我需要做的是使用 SQL Server 2008+ 得到以下结果： 注意，路由列可以是逗号分隔的，也可以是 xml 或任何可用的。

```
stageId | route
A | B, END
A | C, A, END
A | D, END 
```

我确信这是可以做到的，但我正在努力让 SQL 正确，所以任何帮助都会很棒。

提前致谢。

**更新：** 经过一番修改，我设法将路线数据提取为以下格式：

```
stageId | nextStageId
A | B
A | C
A | D
B | END
C | A
D | 
```

使用 SQL，如果更容易的话，也许有人可以帮助我创建路由。

```
SELECT  t.c.value('@id', 'VARCHAR(3)') AS stageId,
    t1.c1.value('.', 'VARCHAR(3)') AS nextStageId
FROM    #stages
CROSS APPLY stageXML.nodes('//stage') as T(C)
CROSS APPLY stageXML.nodes('//route/action/arguments/id') as T1(C1)
WHERE   stageXml.exist('//method[text()="goToStage"]') = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:07:03.293

数据中有循环，这在一般情况下是一个计算上难以解决的问题。例如，路线`C,A,B,END`导致路线`C,A,C,A,B,END`，路线导致路线`C,A,C,A,C,A,B,END`等。

SQL 无法在不陷入无限循环的情况下执行此操作，因为在您的无向路由图中存在无限数量的此类字符串。（CTE 允许无限递归，但你只会让你的服务器崩溃。）

# php - 你能从过滤器类中调用一个小部件吗

> ID：11105889
> 
> 赞同：0
> 
> 时间：2012-06-19T17:07:30.740
> 
> 标签：php, yii

抱歉，如果这是一个愚蠢的问题，但我创建了一个过滤器类来监视事件并在这些事件上生成电子邮件。我的一个要求是它在电子邮件中添加一个数据表。两个相关的问题。

1 - 是否可以`$this->widget('zii::widgets.grid.CGridView, array());`从过滤器中的函数调用。

2 - 是否可以将小部件的结果发送到要包含在电子邮件正文中的变量？

如果这不可能，我将开始导出到可以附加到电子邮件的 Excel 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:16:44.187

你把这个弄错了。不管你在哪里，要渲染你需要一个控制器。

因此，您必须创建并实例化一个控制器才能在其上调用 renderPartial。所以我要做的就是将所有外观放入一个 EmailController 中，然后简单地初始化并使用 renderPartial，最后一个参数来返回输出。

我们使用了 PHPMailer，该行如下所示：

```
$mail->Body = CController::renderInternal(Yii::app()->basePath . '/views/email/email_report.php', array('arrData' => $arrData), true); 
```

我们事件'没有电子邮件控制器。（上面的代码是从控制台应用程序调用的）。

# android - 如何找到正确的 UUID？

> ID：11105891
> 
> 赞同：3
> 
> 时间：2012-06-19T17:07:36.000
> 
> 标签：android, bluetooth, uuid

大约一周前，我在这里收到了某人的帮助，但我的代码似乎仍然存在问题。我正在运行 Android 2.0，所以我不能使用这些方法来获取 UI，而是需要反射地调用这些方法。下面是我的代码

```
 public ConnectThread(BluetoothDevice device, boolean secure) {
        Log.d(TAG,"here5");
        mmDevice = device;
        BluetoothSocket tmp = null;
        mSocketType = secure ? "Secure" : "Insecure";
        Log.d(TAG,"here6");
        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice

        ParcelUuid[] uuids = servicesFromDevice( mmDevice );
        Log.d( Integer.toString( uuids.length ),"here7");
        try {
            if (secure) {
                tmp = device.createRfcommSocketToServiceRecord(
                        uuids[0].getUuid());
            } else {
                tmp = device.createInsecureRfcommSocketToServiceRecord(
                        uuids[0].getUuid());
            } 
```

我在上面的最后一行代码中收到 NullPointerException。我假设它正在谈论我的 uuids[0].getUuid() 调用。servicesFromDevice 函数如下...

```
 public ParcelUuid[] servicesFromDevice(BluetoothDevice device) {
    try {
        Class cl = Class.forName("android.bluetooth.BluetoothDevice");
        Class[] par = {};
        Method method = cl.getMethod("getUuids", par);
        Object[] args = {};
        ParcelUuid[] retval = (ParcelUuid[]) method.invoke(device, args);
        return retval;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

这是我的 LogCat

```
06-19 13:11:07.002: D/MainMenu(13137): onActivityResult -1
06-19 13:11:07.002: D/BluetoothService(13137): connect to: 00:06:66:00:A2:11
06-19 13:11:07.002: D/BluetoothService(13137): here1
06-19 13:11:07.002: D/BluetoothService(13137): here2
06-19 13:11:07.002: D/BluetoothService(13137): here5
06-19 13:11:07.010: D/BluetoothService(13137): here6
06-19 13:11:07.017: D/AndroidRuntime(13137): Shutting down VM
06-19 13:11:07.017: W/dalvikvm(13137): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-19 13:11:07.025: E/AndroidRuntime(13137): FATAL EXCEPTION: main
06-19 13:11:07.025: E/AndroidRuntime(13137): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { (has extras) }} to activity {my.eti.commander/my.eti.commander.MainMenu}: java.lang.NullPointerException
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.app.ActivityThread.access$2000(ActivityThread.java:117)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.os.Looper.loop(Looper.java:130)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.app.ActivityThread.main(ActivityThread.java:3683)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at java.lang.reflect.Method.invokeNative(Native Method)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at java.lang.reflect.Method.invoke(Method.java:507)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at dalvik.system.NativeStart.main(Native Method)
06-19 13:11:07.025: E/AndroidRuntime(13137): Caused by: java.lang.NullPointerException
06-19 13:11:07.025: E/AndroidRuntime(13137):    at my.eti.commander.BluetoothService$ConnectThread.<init>(BluetoothService.java:409)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at my.eti.commander.BluetoothService.connect(BluetoothService.java:180)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at my.eti.commander.MainMenu.onActivityResult(MainMenu.java:238)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.app.Activity.dispatchActivityResult(Activity.java:3908)
06-19 13:11:07.025: E/AndroidRuntime(13137):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
06-19 13:11:07.025: E/AndroidRuntime(13137):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:53:11.630

来自上面评论部分的@Devunwired......

您是否尝试过使用`common SPP ID`许多嵌入式设备使用，而不是尝试查询设备？

您可能会走运并拥有使用此服务 ID 的嵌入式芯片之一：

```
UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB") 
```

将 my 设置`UUID`为此服务 ID 对我有用。

# sql - sqlite LEFT OUTER JOIN 多个表

> ID：11105895
> 
> 赞同：13
> 
> 时间：2012-06-19T17:07:54.363
> 
> 标签：sql, sqlite, outer-join

在这个例子中，我们在 SQLite 数据库上有 3 个相关的表：

```
CREATE TABLE test1 (
    c1 integer,
    primary key (c1)
);
CREATE TABLE test2 (
    c1 integer,
    c2 integer,
    primary key (c1, c2)
);    
CREATE TABLE test3 (
    c2 integer,
    c3 integer,
    primary key (c2)
); 
```

现在我需要加入所有表：

```
test1 -> test2（带有 c1 列）
          test2 -> test3（带有 c2 列）。
```

我已经尝试过这个解决方案，但它没有运行：

```
SELECT 
   * 
   FROM test1 a 
        LEFT OUTER JOIN test2 b
                        LEFT OUTER JOIN test3 c
                          ON c.c2 = b.c2 
          ON b.c1=a.c1 
```

它给了我一个错误： `near "ON": syntax error.`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-19T17:15:36.663

这是您`ON`陈述的简单错误。这符合 SQL 标准：

```
SELECT * 
FROM test1 a 
LEFT OUTER JOIN test2 b ON b.c1=a.c1 
LEFT OUTER JOIN test3 c ON c.c2=b.c2 
```

这将在[此处更深入地解释。](http://web.archive.org/web/20141016200848/http://www.sql-server-pro.com/sql-join.html)

# python - 如果找不到数据，如何让 XPath 在 Python 中返回“无”？

> ID：11105900
> 
> 赞同：1
> 
> 时间：2012-06-19T17:08:26.707
> 
> 标签：python, xpath, lxml

如果子元素没有文本值，XPath 不返回任何内容。在这种情况下，评级没有数据，所以我希望它这样说 - 这个孩子没有或没有，而不是忽略它。非常感谢您的意见。

**XML：**

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<bookstore>

<book>  
  <title lang="eng">Harry Potter</title>
  <price>29.99</price>
  <rating></rating>
</book>

<book>
  <title lang="hindi">Learning XML</title>
  <price>39.95</price>
  <rating></rating>
</book>

</bookstore> 
```

**Python ：**

```
>>> import lxml.html as lh
>>> bk=open('book.xml','r')
>>> bkout=lh.parse(bk)
>>> bk.close()
>>> bkout.xpath('//book/*/text()')
['Harry Potter', '29.99', 'Learning XML', '39.95']

>>> bkout.xpath('//book/* and not(text())/text()')
True 
```

**期望的输出：**

```
['Harry Potter', '29.99', '', 'Learning XML', '39.95', '']
or
['Harry Potter', '29.99', None, 'Learning XML', '39.95', None] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:16:05.233

删除“文本（）”：

```
In [16]: [x.text for x in bk.xpath("//book/*")]
Out[16]: ['Harry Potter', '29.99', None, 'Learning XML', '39.95', None] 
```

# android - Eclipse 声称它缺少一个必需的库 - 但我认为它已经包含在内

> ID：11105904
> 
> 赞同：0
> 
> 时间：2012-06-19T17:08:47.670
> 
> 标签：android, eclipse, admob

Eclipse 在“问题”窗口中告诉我它缺少必需的库：

```
'c:\[long path omitted]\GoogleAdMobAdsSdk-6.0.0.jar' 
```

但我已经在项目的“libs”目录中有 GoogleAdMobAdsSdk-6.0.0.jar。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:11:31.243

检查两次项目的构建路径，lib/中的事件必须将文件指定为依赖项

# google-app-engine - Google App Engine 日志记录：基于 HTTP 标头的过滤器

> ID：11105909
> 
> 赞同：2
> 
> 时间：2012-06-19T17:09:00.113
> 
> 标签：google-app-engine, logging

在 Google App Engine 日志中，是否可以根据 HTTP 请求标头过滤日志信息？

我什至认为没有办法在日志中查看 HTTP 请求标头，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:41:10.700

默认情况下不是，但您可以自己记录它们。

确保您添加了一些唯一的关键字，以便您可以在日志查看器中对其进行过滤。

# java - 运行时异常 - Datanucleus 增强器

> ID：11105914
> 
> 赞同：1
> 
> 时间：2012-06-19T17:09:23.647
> 
> 标签：java, eclipse, google-app-engine, datanucleus

为了触发`Datanucleus enhancer`，我需要对 Persistable 类/实体进行虚拟修改，然后再次保存。但是，当触发时，抛出/记录此错误：

```
java.lang.RuntimeException: Unexpected exception
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:76)
    at com.google.appengine.tools.enhancer.Enhance.<init>(Enhance.java:71)
    at com.google.appengine.tools.enhancer.Enhance.main(Enhance.java:51)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:74)
    ... 2 more
Caused by: java.lang.NoSuchMethodError: org.datanucleus.plugin.PluginManager.<init>(Lorg/datanucleus/PersistenceConfiguration;Lorg/datanucleus/ClassLoaderResolver;)V
    at org.datanucleus.OMFContext.<init>(OMFContext.java:159)
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:172)
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:150)
    at org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1157)
    ... 7 more 
```

尽管 datanucleus-enhancer-3.0.1 位于 Maven 类路径中，也位于 WEB-INF/文件夹中。

如果没有缺少库，可能导致此错误的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:55:01.880

你相信你在互联网上读到的一切吗？jasper-compiler 与 DataNucleus 增强有什么关系？答：没什么。那篇文章是关于一些 Jasper 类中缺少的一些方法......你没有。

您只是使用了不一致的“datanucleus-enhancer”和“datanucleus-core”版本。如果您使用的是 Maven，则不会遇到问题，但由于您不是，您可以在这里很容易地看到[，](http://repo1.maven.org/maven2/org/datanucleus/datanucleus-enhancer/3.0.1/datanucleus-enhancer-3.0.1.pom)如果使用 datanucleus-enhancer 3.0.1，那么您还需要 datanucleus-core 3.0.x。毕竟这也是 NoSuchMethodError 所暗示的……CLASSPATH 中不存在某些东西。打包的 DataNucleus zip 发行版始终提供所有一致的文件，因此您也没有使用过其中之一

# java - Java - 获取 JPanel 的图像

> ID：11105915
> 
> 赞同：5
> 
> 时间：2012-06-19T17:09:24.113
> 
> 标签：java, swing, jpanel, bufferedimage

我正在编写一个程序，我在`JPanel`. 我怎样才能得到一个画在上面`Image`的`JPanel`东西？我尝试了这段代码，但我得到的只是一张空白图像，其背景颜色为`JPanel`. `BufferedImage`不包含在我的面板上绘制的内容。

```
 private BufferedImage createImage(JPanel panel) {    
        int w = panel.getWidth();
        int h = panel.getHeight();
        BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        Graphics2D g = bi.createGraphics();
        panel.paint(g);
        return bi;
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:16:08.007

这是一个 SSCCE 说明它的工作原理。一个常见的错误是传递`null`as `ImageObserver`of`drawImage`方法，因为图像的加载是异步的。

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestPrint {

    protected static void initUI() throws MalformedURLException {
        final ImageIcon image = new ImageIcon(new URL("http://www.travelblog.org/Wallpaper/pix/tb_fiji_sunset_wallpaper.jpg"));
        JPanel panel = new JPanel() {
            @Override
            protected void paintComponent(java.awt.Graphics g) {
                super.paintComponent(g);
                g.drawImage(image.getImage(), 0, 0, this);
            };
        };
        panel.setPreferredSize(new Dimension(image.getIconWidth(), image.getIconHeight()));
        panel.setSize(panel.getPreferredSize());
        BufferedImage bi = new BufferedImage(panel.getWidth(), panel.getHeight(), BufferedImage.TYPE_INT_RGB);
        Graphics g = bi.createGraphics();
        panel.print(g);
        g.dispose();
        try {
            ImageIO.write(bi, "png", new File("test.png"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:17:25.420

你的代码对我有用。

这是一个简单的例子。调整框架大小以查看面板更改大小和图像四处移动。

```
public static void main(String[] args) {
    JFrame frame = new JFrame("Test");
    JPanel panel = new JPanel();
    panel.setBackground(Color.BLUE);
    JLabel label = new JLabel("Image");
    label.setForeground(Color.RED);
    panel.add(label);
    frame.add(panel, BorderLayout.NORTH);
    frame.pack();
    JLabel image = new JLabel(new ImageIcon(createImage(panel)));
    frame.add(image, BorderLayout.SOUTH);
    frame.pack();
    label.setText("Original");      
    frame.setVisible(true);
}

private static BufferedImage createImage(JPanel panel) {
    int w = panel.getWidth();
    int h = panel.getHeight();
    BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
    Graphics2D g = bi.createGraphics();
    panel.paint(g);
    return bi;
} 
```

所以你的问题一定出在其他地方。确保您的面板在您创建它的图像时具有正尺寸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T17:22:12.783

这是一个可以添加到任何 Java 2/JDK 1.2 应用程序的快速示例方法。只需传入要快照的组件和要保存到的文件名。

```
public void saveComponentAsJPEG(Component myComponent, String filename) {
    Dimension size = myComponent.getSize();
    BufferedImage myImage = new BufferedImage(size.width, size.height, BufferedImage.TYPE_INT_RGB);
    Graphics2D g2 = myImage.createGraphics();
    myComponent.paint(g2);
    try {
        OutputStream out = new FileOutputStream(filename);
        JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);
        encoder.encode(myImage);
        out.close();
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

这种方法非常通用。它可用于拍摄各种 Java 应用程序组件的快照。但是，请注意，您使用 com.sun.image.codec.jpeg 可能会影响代码的可移植性。

编辑：我测试了代码以确保一切正常：

```
import com.sun.image.codec.jpeg.JPEGCodec;
import com.sun.image.codec.jpeg.JPEGImageEncoder;
import java.awt.*;
import java.awt.geom.Ellipse2D;
import java.awt.image.BufferedImage;
import java.io.FileOutputStream;
import java.io.OutputStream;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class ScreenCapture extends JFrame {

    public ScreenCapture() {
        createAndShowUI();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                ScreenCapture screenCapture = new ScreenCapture();
            }
        });
    }

    private void createAndShowUI() {
        setTitle("Test Screen Capture");
        setSize(300, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        getContentPane().add(new DrawingPanel());
        setVisible(true);
        saveComponentAsJPEG(this, "C:/test.jpg");

    }

    public void saveComponentAsJPEG(Component myComponent, String filename) {
        Dimension size = myComponent.getSize();
        BufferedImage myImage = new BufferedImage(size.width, size.height, BufferedImage.TYPE_INT_RGB);
        Graphics2D g2 = myImage.createGraphics();
        myComponent.paint(g2);
        try {
            OutputStream out = new FileOutputStream(filename);
            JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);
            encoder.encode(myImage);
            out.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    class DrawingPanel extends JPanel {

        public DrawingPanel() {
            setDoubleBuffered(true);
        }

        @Override
        public void paintComponent(Graphics grphcs) {
            super.paintComponents(grphcs);
            Graphics2D g2d = (Graphics2D) grphcs;

            RenderingHints rhints = g2d.getRenderingHints();
            boolean antialiasOn = rhints.containsValue(RenderingHints.VALUE_ANTIALIAS_ON);

            if (!antialiasOn) {
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            }

            Shape circle = new Ellipse2D.Float(100.0f, 100.0f, 100.0f, 100.0f);

            g2d.setColor(Color.RED);
            g2d.draw(circle);
            g2d.fill(circle);
        }
    }
} 
```

# visual-studio-2010 - .rdlc 中组内的条件计数？

> ID：11105918
> 
> 赞同：5
> 
> 时间：2012-06-19T17:09:34.393
> 
> 标签：visual-studio-2010, crystal-reports, rdlc

我有一个 .rdlc 报告，已分组。在每个组内，我都有一个 ID。其中一些是积极的，而另一些则是消极的。我需要正数 Id 和负数 Id 之间的差异

就像是

```
=CountDistinct(Fields!Id.Value) where Fields!Id.Value > 0 - CountDistinct(Fields!Id.Value) where Fields!Id.Value < 0 
```

我怎样才能做到这一点 ？我正在考虑一个功能，但我想知道是否有一种简单的方法

编辑：每个组中的 Id 可以不止一次，这就是我使用 CountDistinct 的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T14:52:43.520

你可以试试这个：

```
CountDistinct(IIf(Fields!Id.Value > 0, Fields!Id.Value, Nothing)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:00:19.520

创建 2 个全局变量。一个是正​​面的，一个是负面的。

然后创建一个计算它们的新公式，如下所示：

```
WhilePrintingRecords;
IF (GroupName ({your_group_name}) > 0) THEN
    Positive var = Positive var + 1;
ELSE 
    Negative var = Negative var + 1; 
```

您实际上可以在公式中查找您的组，并在编写公式时将其拖到编辑器中。

由于它是组级别的操作，因此应首先读取记录。这就是我们使用 whilePrintingRecords 而不是 whileReadingRecords 的原因。

希望我正确理解了您的问题。

# java - dbpedia 聚光灯数据集

> ID：11105920
> 
> 赞同：0
> 
> 时间：2012-06-19T17:09:36.220
> 
> 标签：java, jar, dbpedia, spotlight-dbpedia

在继续使用[dbpedia Spotlight dataset](https://stackoverflow.com/questions/11088289/dbpedia-spotlight-dataset)时，我按照说明更新数据集，但出现以下错误：

```
INFO 2012-06-19 11:58:04,300 main [MergedOccurrencesContextSearcher] - Using index at: org.apache.lucene.store.MMapDirectory@/home/user_name/new/spotlight/index lockFactory=org.apache.lucene.store.NativeFSLockFactory@671381e7
Exception in thread "main" java.io.FileNotFoundException: /home/user_name/new/spotlight/index/segments_bp (No such file or directory)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
    at org.apache.lucene.store.MMapDirectory.openInput(MMapDirectory.java:219)
    at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:345)
    at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:265)
    at org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:76)
    at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:709)
    at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:72)
    at org.apache.lucene.index.IndexReader.open(IndexReader.java:273)
    at org.dbpedia.spotlight.lucene.search.BaseSearcher.<init>(BaseSearcher.java:67)
    at org.dbpedia.spotlight.lucene.search.MergedOccurrencesContextSearcher.<init>(MergedOccurrencesContextSearcher.java:64)
    at org.dbpedia.spotlight.model.SpotlightFactory.<init>(SpotlightFactory.scala:71)
    at org.dbpedia.spotlight.web.rest.Server.main(Server.java:86) 
```

我已经能够成功使用spotter 字典，但无法使用索引文件。

你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:56:04.100

没有足够的信息很难帮助你。该消息抱怨文件不存在。文件在吗？目录在吗？

请粘贴命令的结果 `ls -lah /home/user_name/new/spotlight/index`

# python - 从压缩文件中读取 matlab 文件 (*.mat) 而无需解压到 Python 中的目录

> ID：11105931
> 
> 赞同：5
> 
> 时间：2012-06-19T17:10:19.527
> 
> 标签：python, matlab, zip

这个具体问题源于尝试处理由 MATLAB 算法生成的大型数据集，以便我可以使用 python 算法处理它们。

**背景：**我在 MATLAB 中有大型数组（通常为 20x20x40x15000 [i,j,k,frame]），我想在 python 中使用它们。因此，我将数组保存到 *.mat 文件中，并用于`scipy.io.loadmat(fname)`将 *.mat 文件读入 numpy 数组。但是，出现一个问题，如果我尝试在 python 中加载整个 *.mat 文件，则会发生内存错误。为了解决这个问题，我将 *.mat 文件切成小块，这样我就可以一次将一个块加载到 python 数组中。如果我按帧划分 *.mat，我现在有 15,000 个 *.mat 文件，使用起来很快就会很痛苦（至少在 Windows 中是这样）。所以我的解决方案是使用压缩文件。

**问题：**我可以使用 scipy 直接从压缩文件中读取 *.mat 文件，而无需先将文件解压缩到当前工作目录吗？

**规格：** Python 2.7，Windows XP

**当前代码：**

```
import scipy.io
import zipfile
import numpy as np

def readZip(zfilename,dim,frames):
    data=np.zeros((dim[0],dim[1],dim[2],frames),dtype=np.float32)
    zfile = zipfile.ZipFile( zfilename, "r" )
    i=0
    for info in zfile.infolist():
        fname = info.filename
        zfile.extract(fname)
        mat=scipy.io.loadmat(fname)
        data[:,:,:,i]=mat['export']
        mat.clear()
        i=i+1
    return data 
```

**试过的代码：**

```
mat=scipy.io.loadmat(zfile.read(fname)) 
```

*产生此错误：*

```
TypeError: file() argument 1 must be encoded string without NULL bytes, not str 
```

* * *

```
mat=scipy.io.loadmat(zfile.open(fname)) 
```

*产生此错误：*

```
fileobj.seek(0)
UnsupportedOperation: seek 
```

* * *

任何其他有关处理数据的建议表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:32:36.353

我很确定我的问题的答案是**否定**的，并且有更好的方法来完成我想要做的事情。

无论如何，在 JF Sebastian 的建议下，我设计了一个解决方案。

**解决方法：**将MATLAB中的数据保存为HDF5格式，即`hdf5write(fname, '/data', data_variable)`. 这会生成一个 *.h5 文件，然后可以通过[h5py](http://code.google.com/p/h5py/)将其读入 python 。

**蟒蛇代码：**

```
import h5py

r = h5py.File(fname, 'r+')
data = r['data'] 
```

我现在可以直接索引到数据中，但是仍然保留在硬盘上。

```
print data[:,:,:,1] 
```

或者我可以将它加载到内存中。

```
data_mem = data[:] 
```

然而，这再次产生了内存错误。因此，为了将其放入内存，我可以遍历每一帧并将其添加到一个 numpy 数组中。

h5py FTW！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:27:03.660

在我的一个冻结应用程序中，我们将一些文件捆绑到 py2exe 创建的 .bin 文件中，然后像这样将它们拉出：

```
z = zipfile.ZipFile(os.path.join(myDir, 'common.bin'))

data = z.read('schema-new.sql') 
```

我不确定这是否会将您的 .mat 文件输入 scipy，但我认为值得一试。

# c# - 网格参考图像样式和按钮样式

> ID：11105934
> 
> 赞同：0
> 
> 时间：2012-06-19T17:10:26.823
> 
> 标签：c#, wpf, xaml, reference, styles

我目前在网格中有几个按钮，它们具有相同的 xaml 图像样式和按钮样式。我正在尝试从按钮的样式功能中调用网格引用。我可以完成按钮样式的工作，但我在对图像样式进行编码时遇到问题，因此它是一次调用（xaml 的新手）。提前感谢您的帮助。

```
<Image>
    <Image.Style>
        <Style TargetType="{x:Type Image}">
            <Setter Property="Source"
                    Value="edit_32.png" />
            <Setter Property="Stretch"
                    Value="Uniform" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsEditing}"
                             Value="True">
                    <Setter Property="Source"
                            Value="save_smallest.png" />
                    <Setter Property="Stretch"
                            Value="Uniform" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Image.Style>
</Image>

<Button.Style>
    <Style TargetType="Button">
        <Setter Property="IsEnabled"
                Value="False" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding CanEdit}"
                         Value="True">
                <Setter Property="IsEnabled"
                        Value="True" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Button.Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:55:03.690

想出了我的问题的答案。这组代码允许我使用双重样式设置，同时只为按钮样式创建一个调用：

```
<!--SaveEditImageSwitch-->
<Image x:Key="SaveEditImage" x:Shared="False">
    <Image.Style>
        <Style TargetType="{x:Type Image}">
            <Setter Property="Source"
                    Value="edit_32.png" />
            <Setter Property="Stretch"
                    Value="Uniform" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsEditing}"
                             Value="True">
                    <Setter Property="Source"
                            Value="save_smallest.png" />
                    <Setter Property="Stretch"
                            Value="Uniform" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Image.Style>
</Image>

<!--ButtonEditSaveStyle-->
<Style TargetType="Button"
       x:Key="ButtonEditSaveStyle">
    <Setter Property="IsEnabled"
            Value="False" />
    <Setter Property="Content"
            Value="{DynamicResource ResourceKey=SaveEditImage}" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding CanEdit}"
                     Value="True">
            <Setter Property="IsEnabled"
                    Value="True" />
        </DataTrigger>
    </Style.Triggers>
</Style>

<Button Width="32"
        Height="22"
        HorizontalAlignment="Left"
        VerticalAlignment="Center"
        Name="gdEmployeeInfo_btnUpdateRecord"
        Click="gdEmployeeInfo_btnUpdateRecord_Click" 
        Style="{DynamicResource ResourceKey=ButtonEditSaveStyle}"> 
```

# android - 如何在 js 函数中获取 SpeechRecognizer 侦听器响应？

> ID：11105937
> 
> 赞同：0
> 
> 时间：2012-06-19T17:10:45.860
> 
> 标签：android, voice-recognition

我正在处理 SpeechRecognizer Listner 活动。

我从 Webview 按钮触发意图 (startListning(intent)) 单击抛出 javascript

```
act.startFun(); 
```

startFun() 方法在我的 MainActivity.java 文件中声明

```
public void startFun(){
        Log.d(TAG,"ONCLICK");
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);         
 intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
         intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,"voice.recognition.test");
         intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS,5); 
         sr.startListening(intent);
   } 
```

我的 SpeechRecognizer Listner 就像

```
class listner implements RecognitionListener{  
            public void onResults(Bundle results) {
            end=1;
            Log.d(TAG, "onResults");
        }

        public void onRmsChanged(float rmsdB) {
            Log.d(TAG, "onRmsChanged");
        }
    } 
```

我的要求是我想将 onResults(Bundle results) 的结果字符串传递给我的 javascript 方法。

请有人帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:41:17.600

没有简单的方法将变量传递给 JavaScript 函数......但是您可以创建一个 JavaScriptInterface 类并在准备好字符串时向 JavaScript 发出信号以获取字符串。

```
webview.addJavascriptInterface(new JavaScriptInterface(),"Interface"); 
```

列出要在 JavaScriptInterface 类中调用的函数。然后在你的javascript中......

```
Interface.getStringResult(); 
```

您还可以创建一个函数来检查该接口是否存在于 JavaScript 中：

```
function runningInAndroidApp() {
    if (typeof Interface != 'undefined') {
        return true;
    }
    return false;
} 
```

# ruby-on-rails - 动态获取路由路径

> ID：11105940
> 
> 赞同：5
> 
> 时间：2012-06-19T17:11:03.207
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我最近将我的一些模板从 ERB 转换为 Haml。大多数情况下它变得更干净更好，但按钮定义开始变得糟糕。

我想转换这个

```
= link_to t('.new', :default => t("helpers.links.new")),
          new_intern_path,                                       
          :class => 'btn btn-primary' if can? :create, Intern 
```

像这样

```
= new_button Intern 
```

除此之外，我还有其他几个实体，`Intern`因此所有其他页面也将从中受益。

所以，我输入了这段代码

```
 def new_button(person_class)
    return unless can?(:create, person_class)

    new_route_method = eval("new_#{person_class.name.tableize}_path")

    link_to t('.new', :default => t("helpers.links.new")),
              new_route_method,                                       
              :class => 'btn btn-primary'
  end 
```

它按预期工作。我只是不确定那个`eval`电话（因为它是邪恶的）。有没有更简单、不那么邪恶的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:16:20.287

哦，这是一个更好的版本：

```
def edit_button(person)
  return unless can?(:edit, person)

  link_to t('.edit', :default => t("helpers.links.edit")),
          send("edit_#{person.class.name.singularize.underscore}_path", person),
          :class => 'btn btn-mini'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-12T21:56:02.890

您可能有兴趣查看`PolymorphicRoutes`（[http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html#method-i-polymorphic_path](http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html#method-i-polymorphic_path)）。

有了它，您的代码可能类似于：

```
def edit_button(person)
  return unless can?(:edit, person)

  link_to t('.edit', :default => t("helpers.links.edit")),
          edit_polymorphic_path(person),
          :class => 'btn btn-mini'
end 
```

# c# - 将 UML 添加到 Visual Studio 2010 高级版？

> ID：11105943
> 
> 赞同：0
> 
> 时间：2012-06-19T17:11:22.207
> 
> 标签：c#, visual-studio-2010, uml

我想在我的 Visual Studio 2010 Premium 中添加一个 UML 工具。看起来它可能是此处所述的 Ultimate 唯一的东西-> [Visual Studio 2010 Professional 是否支持 UML 建模？](https://stackoverflow.com/questions/4647838/does-visual-studio-2010-professional-support-uml-modeling). 我没有找到任何将 UML 支持添加到 Premium 的内容。

如果它确实是 Ultimate 唯一的东西，那么人们在 Visual Studio 之外使用哪些 UML 工具？

我是 UML 的新手，并试图弄清楚如何通过更少的修改来更好地完成我的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:43:13.077

StarUML 是目前最好的 UML 图表工具之一，它是免费的。如果您在设计上做得足够勤奋，它甚至会自动生成标题和源代码骨架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:28:32.100

看看这些：

*   企业架构师
*   Magic Draw - 我用过这个，它非常好，而且效果很好。如果您刚开始使用 UML，可能会令人生畏，因此可能会矫枉过正。

这两个都需要许可证。我不知道有任何*像样的*免费 UML 工具。但是我不是 UML 工具的权威！

编辑：

只记得 Altova 也有一个 UML 工具——我没有用过这个。不过我用过他们的XSD套件，可以验证他们的软件质量非常好，所以UML工具可能也不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:16:12.450

我有 Ultimate 版本，也可以访问 Sparx EA，但我选择的工具是 Visio 和这些优秀的免费 UML[模板](http://softwarestencils.com/uml/index.html)。Visio 的优点是它允许在同一个图表中使用许多形状（非 UML），并且它在 MSDN 中是免费的。我不是 UML 纯粹主义者，我的图表不需要所有的花里胡哨。

我曾经遇到的一位建筑师使用了[Agilian](http://www.visual-paradigm.com/product/ag/)，这似乎也是一种功能强大的工具。

# java - 为什么直到类回调被击中后才构造 java 枚举？

> ID：11105945
> 
> 赞同：0
> 
> 时间：2012-06-19T17:11:24.100
> 
> 标签：java, android, enums, construction

我有一个 Android 类，它具有来自异步 HTTP 进程的回调，以及一个带有多个状态代码的枚举：

```
public abstract class HttpPackage {

    public enum StatusCode {
        SUCCESS(0),
        NOT_FOUND(100),
        USERNAME_NOT_FOUND(101),
        AUTH_FAILED(110),
        SAVE_ERROR(111)
        //etc.

        private final int mCode;

        StatusCode(int i) {
            mCode = i;
            sByCode.put(i, this);
        }

    }

    private static final HashMap<Integer, StatusCode> sByCode = new HashMap<Integer, StatusCode>();

    //...
} 
```

我发现 HttpPackage 类中的回调在`enum`构造之前被命中，这意味着当我尝试从静态代码映射中提取状态代码时，它返回 null，并且我的代码认为所有提要都失败了（当他们不是）。为什么这`enum`会在回调被击中后构造？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:17:08.643

Java 中的类是延迟加载的。如果您在加载 StatusCode 类之前访问地图，那么它当然是空的。

地图应该在枚举本身中。这样，如果您正在访问地图，则可以保证枚举类已加载，并且地图不为空。地图也应该对外部代码隐藏。`StatusCode getByCode(int code)`您应该在枚举中提供一个静态方法。

编辑：示例代码：

```
public enum StatusCode {
    SUCCESS(0),
    NOT_FOUND(100),
    USERNAME_NOT_FOUND(101),
    AUTH_FAILED(110),
    SAVE_ERROR(111);

    private final int code;

    private static final Map<Integer, StatusCode> map = new HashMap<Integer, StatusCode>();

    static {
        for (StatusCode sc : values()) {
            map.put(sc.getCode(), sc);
        }
    }

    StatusCode(int i) {
        this.code = i;
    }

    public static StatusCode getByCode(int code) {
        return map.get(code);
    }

    public int getCode() {
        return code;
    }

    public static void main(String[] args) {
        System.out.println(StatusCode.getByCode(111));
    }
} 
```

或者，您也可以`getMap()`在构造函数中使用静态方法，如果地图为空，则延迟初始化地图。

# jquery - 滑动切换链接

> ID：11105952
> 
> 赞同：0
> 
> 时间：2012-06-19T17:11:32.053
> 
> 标签：jquery

如果 3 和 3.2 不是链接，下面的脚本可以正常工作，但我不知道如何在它们是链接时让它工作。

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - Test</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.6.js'></script>

<style>
ul{
list-style-type: none;
padding: 0;
margin-left: 0;
font-weight: bold;
}
</style>

<script type='text/javascript'>

$(document).ready(function() {
    $("#nav ul li:not(:has(li.current))").find("ul").hide().end() // Hide all other ULs
    .click(function(e) {
        if (this == e.target) {
            $(this).children('ul').slideToggle('fast');
        }
    });
});

</script>

</head>
<body>
  <div id="nav">
    <ul>
        <li><a href="javascript:void(0)">1</a></li>
        <li><a href="javascript:void(0)">2</a></li>
        <li><a href="javascript:void(0)">3</a>
            <ul>
                <li><a href="example.com">3.1</a></li>
                <li><a href="javascript:void(0)">3.2</a>
                    <ul>
                        <li><a href="example.com">3.2.1</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="javascript:void(0)">4</a></li>
    </ul>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:14:54.283

使用*[preventDefault](http://api.jquery.com/event.preventDefault/)*阻止链接被跟踪：

```
.click(function(e) {
    if (this == e.target) {
        $(this).children('ul').slideToggle('fast');
    }
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:21:51.267

我已经清理了你的代码：

HTML：

```
 <div id="nav">
    <ul>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a>
            <ul>
                <li><a href="example.com">3.1</a></li>
                <li><a href="#">3.2</a>
                    <ul>
                        <li><a href="example.com">3.2.1</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#">4</a></li>
    </ul>

</div>​ 
```

CSS：

```
ul{
list-style-type: none;
padding: 0;
margin-left: 0;
font-weight: bold;
}

ul ul{
    display:none;
} 
```

jQuery：

```
$(document).ready(function() {
    $('#nav ul li a[href="#"]').click(function(event) {
        event.preventDefault();
        $(this).siblings('ul').toggle();
    });
});​ 
```

演示：http:
[//jsfiddle.net/PvQVY/](http://jsfiddle.net/PvQVY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:22:26.300

为什么要检查 this **== e.target**，试试这个

```
$(document).ready(function() {
   $("#nav ul li:not(:has(li.current))").find("ul").hide().end() // Hide all other ULs
     .click(function(e) {
       e.preventDefault();
       $(this).children('ul').slideToggle('fast');
   });
}); 
```

# c# - 处理 SharePoint UpdateListItems XML 响应

> ID：11105953
> 
> 赞同：1
> 
> 时间：2012-06-19T17:11:35.863
> 
> 标签：c#, xml, xpath, sharepoint-2007

我正在使用 Lists Web 服务将一些项目插入到 SharePoint 2007 列表中。我正在尝试编写一些代码来处理响应中报告的任何错误，但是导航 XML 没有按预期工作。我正在尝试获取 Result 元素的集合，然后检查每个 Result 的 ErrorCode 子元素以获取错误代码。当我尝试获取第二个结果的 ErrorCode 时，它​​似乎再次给了我第一个结果的 ErrorCode，即使我在第二个 Result 元素上调用 SelectSingleNode。我究竟做错了什么？这是我的数据和代码（大部分 z:row 属性被省略以保持简短）：

共享点响应：

```
- <Results xmlns="http://schemas.microsoft.com/sharepoint/soap/">
    - <Result ID="1,New">
          <ErrorCode>0x00000000</ErrorCode> 
          <ID /> 
          <z:row ows_ContentTypeId="0x0100760B0FF12756D249834F5B18A46B1A31" ows_Title="Seas-a-1-1-Target1" ows_PointID="1" ows_X_x0020_Value="355.000000000000" ... xmlns:z="#RowsetSchema" /> 
      </Result>
    - <Result ID="2,New">
          <ErrorCode>0x80020005</ErrorCode> 
          <ErrorText>The operation failed because an unexpected error occurred. (Result Code: 0x80020005)</ErrorText> 
      </Result>
  </Results> 
```

代码：

```
System.Xml.XmlNode response = listService.UpdateListItems("SCs", batchElement);

XmlNamespaceManager nsm = new XmlNamespaceManager(response.OwnerDocument.NameTable);
nsm.AddNamespace("sp", response.NamespaceURI);

XmlNodeList results = response.SelectNodes("//sp:Result", nsm);
foreach (XmlNode result in results)
{
    System.Diagnostics.Debug.WriteLine(result.OuterXml);
    XmlNode node = result.SelectSingleNode("//sp:ErrorCode", nsm);
    System.Diagnostics.Debug.WriteLine(node.OuterXml);
} 
```

输出：

```
<Result ID="1,New" xmlns="http://schemas.microsoft.com/sharepoint/soap/"><ErrorCode>0x00000000</ErrorCode><ID /><z:row ows_ContentTypeId="0x0100760B0FFF2756D249834F5B18A46B1A31" ows_Title="Seas-a-1-1-Target1" ows_PointID="1" ows_X_x0020_Value="355.000000000000" ... xmlns:z="#RowsetSchema" /></Result>
<ErrorCode xmlns="http://schemas.microsoft.com/sharepoint/soap/">0x00000000</ErrorCode>
<Result ID="2,New" xmlns="http://schemas.microsoft.com/sharepoint/soap/"><ErrorCode>0x80020005</ErrorCode><ErrorText>The operation failed because an unexpected error occurred. (Result Code: 0x80020005)</ErrorText></Result>
<ErrorCode xmlns="http://schemas.microsoft.com/sharepoint/soap/">0x00000000</ErrorCode> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:15:54.033

尝试：

```
XmlNode node = result.SelectSingleNode(".//sp:ErrorCode", nsm); 
```

我认为问题在于`//sp:ErrorCode`“所有错误代码节点都从文档的根目录开始”，而您想要的是结果节点下的错误代码节点。

# objective-c - UINavigationBar setBackgroundImage:forBarMetrics: 纵向/横向怪异

> ID：11105955
> 
> 赞同：1
> 
> 时间：2012-06-19T17:11:39.103
> 
> 标签：objective-c, ios, ios5, uinavigationbar, landscape-portrait

切换到 iOS5，我想使用`UINavigationBar`使用以下代码片段的自定义样式：

```
if ([navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:
                                                                         forBarMetrics:)]) {
        [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavigationBar.png"] 
                                           forBarMetrics:UIBarMetricsDefault];
        [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavigationBarLandscape.png"] 
                                           forBarMetrics:UIBarMetricsLandscapePhone];
    } 
```

这很好用，但是：我的自定义图像有圆角（参见附加图像），导致以下情况：

从纵向模式开始，它看起来很好。

![纵向（正常）](../Images/823e80163179a180c0bb5e24fb82b2fa.png)

更改为横向模式看起来也不错。

![横向（正常）](../Images/e871057e09496a3fdf70dc16d42ef230.png)

然而，改回纵向模式似乎不会将图像更改为*NavigationBar.png*，因此右上角没有圆角。

![人像（右上角没有圆角）](../Images/6b1b6959267247fad3535fa46d827841.png)

任何有关如何解决此问题的建议表示赞赏。

// 编辑

将以下代码添加到我的 viewController 会删除此“错误”，但这不是正确的解决方案！？！

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration { 
    [super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation 
                                            duration:duration];
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"NavigationBar.png"] 
                                                  forBarMetrics:UIBarMetricsDefault];
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"NavigationBarLandscape.png"] 
                                                  forBarMetrics:UIBarMetricsLandscapePhone];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:37:13.800

由于iOS6默认引入了圆角，这个问题很快就会消失。

# java - 无法运行 GWT ServiceAsync

> ID：11105959
> 
> 赞同：0
> 
> 时间：2012-06-19T17:11:59.443
> 
> 标签：java, gwt, rpc, gwt-rpc, asynccallback

我正在尝试创建一个异步回调以从应用引擎中的 GAE JDO 数据库返回一个包含所有客户的列表。我已经完成了一个运行良好但只返回一个字符串的登录类。现在我正在尝试获取一个列表，但我遇到的错误来自：

```
18:05:39.219 [ERROR] [prototipov8]    subtype   
com.google.gwt.resources.client.impl.ExternalTextResourcePrototype.ETRCallback is not default 
instantiable (it must have a zero-argument constructor or no constructors at all) and has no 
custom serializer. (reached via
com.google.gwt.user.client.rpc.AsyncCallback<java.util.List<pt.sites.shared.model.Customer>>) 
```

和

```
[ERROR] [prototipov8] - subtype com.google.gwt.user.client.rpc.AsyncCallback<T> 
is not instantiable 
```

完整错误：

```
17:54:07.268 [ERROR] [prototipov8] Unable to load module entry point class pt.info2000.sites.client.old.Main (see associated exception for details)
 java.lang.RuntimeException: Deferred binding failed for 'pt.info2000.sites.client.old.TableService' (did you forget to inherit a required module?)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:53)
at com.google.gwt.core.client.GWT.create(GWT.java:97)
at pt.info2000.sites.client.old.Main.<clinit>(Main.java:30)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at com.google.gwt.dev.shell.ModuleSpace.loadClassFromSourceName(ModuleSpace.java:654)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:363)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Unknown Source)
Caused by: com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
at com.google.gwt.dev.shell.ModuleSpace.rebind(ModuleSpace.java:595)
at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:455)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
at com.google.gwt.core.client.GWT.create(GWT.java:97)
at pt.info2000.sites.client.old.Main.<clinit>(Main.java:30)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at com.google.gwt.dev.shell.ModuleSpace.loadClassFromSourceName(ModuleSpace.java:654)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:363)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Unknown Source) 
```

通话

```
 public static final TableServiceAsync table = GWT.create(TableService.class); 
```

餐桌服务

```
@RemoteServiceRelativePath("getObjects")
 public interface TableService extends RemoteService {

List<Customer> getObjects(AsyncCallback<List<Customer>> callback);

  } 
```

表服务异步

```
 public interface TableServiceAsync {

    void getObjects(AsyncCallback<List<Customer>> callback, 
             AsyncCallback<List<Customer>> asyncCallback);

  } 
```

Costumer.class 一个 gae 中的 JDO

```
 @PersistenceCapable 
```

公共类客户扩展用户实现可序列化{

```
/**
 * 
 */
private static final long serialVersionUID = 1L;

@Persistent
private Date birthDate;

@Persistent
private int nib;

@Persistent
public Set<Key> companies;

@Persistent
public Set<Key> sugestions;

@Persistent
public Set<Key> documents;

/**
 * @param code
 * @param name
 * @param description
 * @param creationDate
 * @param modificationDate
 * @param creator
 * @param lastModifier
 * @param username
 * @param password
 * @param avatar
 * @param activo
 * @param cookie
 * @param loginIP
 * @param roles
 * @param contacts
 */
public Customer(int code, String name, String description,
        Date creationDate, Date modificationDate, Key creator,
        Key lastModifier, String username, String password, Blob avatar,
        boolean activo, String cookie, String loginIP, Set<Key> roles,
        Set<Key> contacts) {
    super(code, name, description, creationDate, modificationDate, creator,
            lastModifier, username, password, avatar, activo, cookie, loginIP,
            roles, contacts);
}

public Customer() {

} 
```

我已经尝试找到解决方案，但我无法使其工作，有没有人遇到这个错误？有什么建议或解决方案吗？提前感谢您花时间阅读本文。任何可以帮助的代码请询问。

Edit1：我有一个没有参数的默认构造函数，并且该类实现了可序列化，我可以对其进行序列化。此代码适用于 Customer 类；

```
Serializable c = new Customer(); 
```

Edit2：添加了请求的代码和完整的错误。试图将列表传递给 hashset 但错误仍然存​​在。没有找到任何其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:29:14.150

为了使一个对象成为`Serializable`，它需要有一个没有参数的默认构造函数。这就是这个错误所说的。如果对象是可序列化的，则只能将对象从客户端传递到服务器端（反之亦然）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:15:44.780

你的接口是错误的。您应该阅读[GWT 文档](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC#invoke)以进行 RPC 调用。

假设您不需要该方法的任何参数，您的 TableService 接口应该如下所示。

```
@RemoteServiceRelativePath("getObjects")
public interface TableService extends RemoteService {
    List<Customer> getObjects();
} 
```

然后，您的 TableServiceAsync 将如下所示

```
public interface TableServiceAsync {
    void getObjects(AsyncCallback <List<Customer>> callback);
} 
```

AsyncCallback 不可序列化，这就是您遇到此错误的原因。如果您需要将参数传递给您的方法，例如一个字符串数组来识别要获取哪些客户，您的界面将如下所示

```
@RemoteServiceRelativePath("getObjects")
public interface TableService extends RemoteService {
    List<Customer> getObjects(String[] ids);
}

public interface TableServiceAsync {
    void getObjects(String[] ids, AsyncCallback <List<Customer>> callback);
} 
```

# web-services - Web 服务方法中 java.util.Date 输入/输出的空值

> ID：11105964
> 
> 赞同：1
> 
> 时间：2012-06-19T17:12:20.953
> 
> 标签：web-services, jakarta-ee, netbeans, jaxb, jax-ws

我有一个使用 jax-ws 和 netbeans 7 的向导创建的 web 服务（这是我的第一次）。要使用 java.util.Date 而不是 XmlGregorianCalendar，我已使用此 xml 修改了客户端的 Web 服务：

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxws:bindings  node="wsdl:definitions/wsdl:types/xsd:schema"
                 xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
                               xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
                                xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
                                xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <jaxb:globalBindings>
        <jaxb:serializable/>
           <jaxb:javaType name="java.util.Date" xmlType="xsd:dateTime"/>
        </jaxb:globalBindings>
</jaxws:bindings> 
```

现在使用 Date 代替 XmlGregorianCalendar 并生成 Adapter1 ：

```
public class Adapter1
    extends XmlAdapter<String, Date>
{

    public Date unmarshal(String value) {
        return new Date(value);
    }

    public String marshal(Date value) {
        if (value == null) {
            return null;
        }
        return value.toString();
    }

} 
```

当我在适配器中添加 system.out.println 时，我看到 Date 已接收/发送到服务器，但如果我使用 ws 的方法，我在 Date field/parameters 上总是为空。

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:34:38.130

生成的`XmlAdapter`不会执行所需的转换。默认`XmlAdapter`期望以下工作：

```
Foo foo1 = new Foo(foo2.toString()); 
```

在这种情况下无效：

```
Date date1 = new Date(date2.toString()); 
```

您将需要编写一些转换代码并从外部绑定文件中引用它：

```
<jxb:bindings xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb" version="2.1">
    <jxb:bindings schemaLocation="format.xsd">
        <jxb:bindings node="//xs:element[@name='my-date']">
            <jxb:property>
                <jxb:baseType>
                    <jxb:javaType name="java.util.Date"
                        parseMethod="org.example.DateFormatter.parseInt"
                        printMethod="org.example.DateFormatter.printInt" />
                </jxb:baseType>
            </jxb:property>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/xml-schema-to-java-generating.html](http://blog.bdoughan.com/2011/08/xml-schema-to-java-generating.html)

# html - 带有 CSS 下拉菜单的联系表格 - 无响应

> ID：11105966
> 
> 赞同：1
> 
> 时间：2012-06-19T17:12:24.297
> 
> 标签：html, css, button, popup, contact-form-7

我正在使用 AJAX Wordpress 主题，但据我所知，问题不在于主题，而在于我添加的代码。

我使用“Contact-Form-7”作为一个特殊的下拉框。我正在使用它来创建一个易于访问的提交表单。

我以前使用过这些代码行，但我遇到的问题是单击按钮时该框不会显示。下面是两个链接和我使用的源代码。链接 1 是我添加此表单的 Ajax 站点。链接 2 与我们所做的形式相同，但它工作得很好。按钮在顶部，上面写着“请求约会”。

链接 1：[http ://www.geigerandwood.com](http://www.geigerandwood.com)

链接2： [http ://www.tobiasdental.com](http://www.tobiasdental.com)

标题中的代码行：

```
<!-- BEGIN: FREE Estimates Form -->
    <div class="center-wrap">
        <section id="drop-down-content">
            <h1>Request an Appointment</h1>
            <?php echo do_shortcode('[contact-form-7 id="173" title="Drop Down"]'); ?>
        </section>
        <section id="drop-down">
            <a id="drop-down-toggle">Request an Appointment</a>
        </section>                  
    </div>
<!-- END: FREE Estimates Form --> 
```

CSS中的代码行：

```
/* Free Estimates Drop Down Box */
  body #drop-down {
    transition: top 0.5s;
    -moz-transition: top 0.5s;
    -webkit-transition: top 0.5s;
    -o-transition: top 0.5s;
    width: 700px;
    background-color: #333333;
    position: absolute;
    top: -30px;
    left: 0;
    z-index: 10000;
    padding: 20px 0 10px 0; }

    body #drop-down-content:after{  
      content: "";
      position: absolute;
      top: -7px;
      left: 133px;
      width: 15px;
      height: 7px;
      background: url("images/dark-arrow-up.png") no-repeat 0 0;
    }
    body #drop-down form {
      zoom: 1;
      clear: both; }
      body #drop-down form:before, body #drop-down form:after {
        content: "";
        display: block; }
      body #drop-down form:after {
        clear: both; }
    body #drop-down div {
      width: 250px;
      float: left;
      margin-right: 25px; }
    body #drop-down div input{
        width: 250px;   
    }
    body #drop-down label {
      display: block;
      color: #eeeeee;
      margin-bottom: 10px;
      font-style: italic;
      text-transform: uppercase;
      text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.4); }
    body #drop-down textarea {
      height: 85px;
      float: left;
      margin-right: 25px; }
    body #drop-down button {
      float: left;
      margin-left: 0;
      font-size: 18px;
      padding: 8px;
      margin-top: 45px; }
    body #drop-down.open {
      top: 0; }
  body #drop-down-toggle {
    display: block;
    text-indent: -9000px;
    overflow: hidden;
    background: url("images/topper_btn.png") no-repeat 0 0;
    width: 243px;
    height: 45px;
    cursor: pointer;
    position: absolute;
    bottom: -44px;
    right: 0; }
  body #drop-down-content{
    position: absolute;
    display: none;  
    left: 440px;
    top: 50px;
    background-color: #333333;
    padding: 18px;
    border-radius: 5px;
    z-index: 10000;
    color: #fff;
    font-weight: bold;
    font-size: 14px;
  }

  body #drop-down-content input[type="text"]{
    color: #521306;
    font-size: 14px;
    font-weight: bold;
    font-family: "Swiss 721", Helvetica;
    border: 3px solid #c5d0d7;
    border-radius: 2px;
    width: 247px;
  }
  body #drop-down-content input[type="file"]{
    color: #521306;
    font-size: 14px;
    font-weight: bold;
    font-family: "Swiss 721", Helvetica;
    border: 3px solid #c5d0d7;
    border-radius: 2px;
    width: 247px;
  }
  body #drop-down-content p{
    margin-top: 13px;   
  }
  body #drop-down-content .wpcf7-submit{
    background-color: #521306;
    color: #fff;
    float: right;
    padding: 7px 12px;
    font-size: 14px;
    width: auto;
    border: 0;
    cursor: pointer;    
  }
/* Free Estimates Drop Down Box END */ 
```

在上面的代码中，当按下按钮时，将在“section id='drop-down-content'”中自动添加以下内容：

```
<section id="drop-down-content" style="display: none;"> <!--button is not clicked-->
<section id="drop-down-content" style="display: block;"> <!--button is clicked--> 
```

我遇到的唯一问题是让它执行那个动作。我迷失了我所缺少的东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:57:30.113

在您的牙医网站中有一个名为“application-ck.js”的脚本，其中的脚本用于显示-隐藏“下拉内容”div。但是“geigerandwood.com”顶部表单没有这样的点击事件。

# c - 如何在单独的共享对象库中引用变量

> ID：11105970
> 
> 赞同：2
> 
> 时间：2012-06-19T17:12:36.493
> 
> 标签：c, linux, gcc, shared-libraries

假设我有一个使用共享对象库 X 的程序，它与我的程序分开编译。现在，当我为 X 编写代码时，我需要引用一个变量，比如 A，它在我的程序中声明（它将使用 X 库）。如何在 X 的代码中引用变量 A？弱引用？外部？还是其他什么技术？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:15:03.873

使用`extern`关键字：

```
extern int A;

// later:
call_a_function(A);
A = something_else; 
```

是的，如果共享对象是单独编译的，它就可以工作。在这种情况下，编译器会在内部生成一个带有变量名称的导出符号，然后动态链接器会查找它。

更新：正如@Hristo 指出的那样，此外，您必须`-rdynamic`在构建单元时指定链接器标志才能使其工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T17:35:04.963

在编译程序时需要指定**-rdynamic标志以使其工作。****然后共享对象库可以通过简单地使用extern**关键字来引用程序中的变量。

# powershell - 在 powershell 脚本中附加到电子邮件

> ID：11105971
> 
> 赞同：0
> 
> 时间：2012-06-19T17:12:38.840
> 
> 标签：powershell

我有以下 powershell 脚本：

```
$csv = Import-Csv -Path D:\temp\Audit.csv | Where-Object {$_.PrivateLabelSeqId -eq "602"} | Measure-Object
$Fun = $csv.Count
$mailBody = 
@"
There are <b> $Fun </b> available!
"@

Send-MailMessage -Body $mailBody -BodyAsHtml `
-From "mail@mail.com" -To "mailto@mail.com" `
-Subject "Audit - FUN" -Encoding $([System.Text.Encoding]::UTF8) `
-Attachment "D:\temp\Audit.csv" `
-SmtpServer "192.0.0.20" 
```

但是我没有收到任何电子邮件。然而，没有附件，它似乎工作得很好。关于如何解决这个问题的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:55:18.057

我曾经遇到过同样的问题，我改用 System.Net.Mail 解决了它。

```
$filenameAndPath = (Resolve-Path .\$file).ToString()
$from = 'mail@mail.com'
$to = "mailto@mail.com" `
$Subject "Audit - FUN" -Encoding $([System.Text.Encoding]::UTF8) 
[void][Reflection.Assembly]::LoadWithPartialName('System.Net') | out-null

$message = New-Object System.Net.Mail.MailMessage($from, $to, $subject, $subject)
$attachment = New-Object System.Net.Mail.Attachment($filenameAndPath, 'text/plain')
$message.Attachments.Add($attachment)
$smtpClient = New-Object System.Net.Mail.SmtpClient
$smtpClient.host = '192.0.0.20'
$smtpClient.Send($message) 
```

阅读有关 System.Net.Mail.Attachement 类的更多信息 [http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx)

# sharepoint-2010 - 如何定义在表单库中提交表单后自动触发的工作流？

> ID：11105977
> 
> 赞同：0
> 
> 时间：2012-06-19T17:13:07.757
> 
> 标签：sharepoint-2010, infopath2010, workflowservice, infopath-forms-services

我需要提交一个表单来触发经历不同阶段的工作流。我如何首先开始，是否有一个简单的程序来实现它？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:18:19.797

您需要拥有创建工作流的权限。找到包含表单的特定列表，然后转到列表设置 > 工作流程设置。如果我没记错的话，SP 为您提供了三态以及处置批准工作流程。

您是否尝试过 SharePoint Designer？它允许您设置自定义触发器以及开发更高级的工作流程。

看看[这个](http://office.microsoft.com/en-us/windows-sharepoint-services-help/use-a-three-state-workflow-HA010154431.aspx#BM1)材料是否有帮助。

# jpa - 在“来自实体的 JPA 表”期间查找失败

> ID：11105987
> 
> 赞同：0
> 
> 时间：2012-06-19T17:14:04.097
> 
> 标签：jpa, glassfish, eclipselink, lookup, jta

我正在尝试使用 JPA 从实体生成表，但是当我尝试这样做时，我收到：

```
[EL Config]: The foreign key column name for the mapping element [offer] is being defaulted to: OFFER_OID.
....
[EL Info]: EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
java.lang.RuntimeException: Orb initialization erorr
    at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:180)
    at com.sun.enterprise.naming.impl.SerialContext.getORB(SerialContext.java:364)
    at com.sun.enterprise.naming.impl.SerialContext.getProviderCacheKey(SerialContext.java:371)
    at com.sun.enterprise.naming.impl.SerialContext.getRemoteProvider(SerialContext.java:401)
    at com.sun.enterprise.naming.impl.SerialContext.getProvider(SerialContext.java:346)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:504)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:654)
    at javax.naming.InitialContext.lookup(InitialContext.java:415)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:103)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.perform(Main.java:83)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.execute(Main.java:74)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.main(Main.java:61)
Caused by: java.lang.NullPointerException
    at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:152)
    ... 20 more
[EL Severe]: Local Exception Stack: 
Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [jdbc/MySQLJDBCResource].
Internal Exception: javax.naming.NamingException: Lookup failed for 'jdbc/MySQLJDBCResource' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is javax.naming.NamingException: Unable to acquire SerialContextProvider for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is java.lang.RuntimeException: Orb initialization erorr]]
    at org.eclipse.persistence.exceptions.ValidationException.cannotAcquireDataSource(ValidationException.java:497)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:109)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.perform(Main.java:83)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.execute(Main.java:74)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.main(Main.java:61)
Caused by: javax.naming.NamingException: Lookup failed for 'jdbc/MySQLJDBCResource' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is javax.naming.NamingException: Unable to acquire SerialContextProvider for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is java.lang.RuntimeException: Orb initialization erorr]]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:654)
    at javax.naming.InitialContext.lookup(InitialContext.java:415)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:103)
    ... 11 more
Caused by: javax.naming.NamingException: Unable to acquire SerialContextProvider for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is java.lang.RuntimeException: Orb initialization erorr]
    at com.sun.enterprise.naming.impl.SerialContext.getProvider(SerialContext.java:351)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:504)
    ... 15 more
Caused by: java.lang.RuntimeException: Orb initialization erorr
    at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:180)
    at com.sun.enterprise.naming.impl.SerialContext.getORB(SerialContext.java:364)
    at com.sun.enterprise.naming.impl.SerialContext.getProviderCacheKey(SerialContext.java:371)
    at com.sun.enterprise.naming.impl.SerialContext.getRemoteProvider(SerialContext.java:401)
    at com.sun.enterprise.naming.impl.SerialContext.getProvider(SerialContext.java:346)
    ... 16 more
Caused by: java.lang.NullPointerException
    at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:152)
    ... 20 more

Exception in thread "main" javax.persistence.PersistenceException: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [jdbc/MySQLJDBCResource].
Internal Exception: javax.naming.NamingException: Lookup failed for 'jdbc/MySQLJDBCResource' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is javax.naming.NamingException: Unable to acquire SerialContextProvider for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is java.lang.RuntimeException: Orb initialization erorr]]
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:517)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.perform(Main.java:83)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.execute(Main.java:74)
    at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.main(Main.java:61)
Caused by: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [jdbc/MySQLJDBCResource].
Internal Exception: javax.naming.NamingException: Lookup failed for 'jdbc/MySQLJDBCResource' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is javax.naming.NamingException: Unable to acquire SerialContextProvider for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is java.lang.RuntimeException: Orb initialization erorr]]
    at org.eclipse.persistence.exceptions.ValidationException.cannotAcquireDataSource(ValidationException.java:497)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:109)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
    ... 7 more
Caused by: javax.naming.NamingException: Lookup failed for 'jdbc/MySQLJDBCResource' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is javax.naming.NamingException: Unable to acquire SerialContextProvider for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is java.lang.RuntimeException: Orb initialization erorr]]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:654)
    at javax.naming.InitialContext.lookup(InitialContext.java:415)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:103)
    ... 11 more
Caused by: javax.naming.NamingException: Unable to acquire SerialContextProvider for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is java.lang.RuntimeException: Orb initialization erorr]
    at com.sun.enterprise.naming.impl.SerialContext.getProvider(SerialContext.java:351)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:504)
    ... 15 more
Caused by: java.lang.RuntimeException: Orb initialization erorr
    at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:180)
    at com.sun.enterprise.naming.impl.SerialContext.getORB(SerialContext.java:364)
    at com.sun.enterprise.naming.impl.SerialContext.getProviderCacheKey(SerialContext.java:371)
    at com.sun.enterprise.naming.impl.SerialContext.getRemoteProvider(SerialContext.java:401)
    at com.sun.enterprise.naming.impl.SerialContext.getProvider(SerialContext.java:346)
    ... 16 more
Caused by: java.lang.NullPointerException
    at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:152)
    ... 20 more 
```

所以，我认为主要问题在这里：“jdbc/MySQLJDBCResource”的查找失败。在我的 persistence.xml 中，我设置了 jta-data-source，如您所见：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="acmeauction" transaction-type ="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/MySQLJDBCResource</jta-data-source>
        <class>...[cutted]...</class>
    </persistence-unit>
</persistence> 
```

我正在使用 Glassfish v3、JPA EclipseLink：我很乐意提供任何有用的附加信息。谢谢， 安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:07:56.160

看起来 Glassfish 设置正确。您似乎正在从 Eclipse 运行？

尝试在 Eclipse 之外运行。

# php - 转义 MySQL PHP

> ID：11105989
> 
> 赞同：1
> 
> 时间：2012-06-19T17:14:15.577
> 
> 标签：php, mysql, escaping, mysql-real-escape-string

有人知道为什么 mysql_real_escape_string() 函数在引号或双引号之前添加三个反斜杠，而不是一个？

我在检索内容时遇到问题；有一个额外的反斜杠。这只发生在 Aruba MySQL 服务器上。在本地主机上它工作得很好。

这可能是特定的排序规则吗？我能为此做些什么？（除了暴力删除斜线？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:22:30.847

您的问题可能是`magic_quotes_gpc`已启用：

> 最好查看您的 PHP 配置文件 (php.ini) 并确保它被禁用：
> 
> ```
> magic_quotes_gpc = Off 
> ```
> 
> 如果你打开它并使用 mysql_real_escape_string，那么你最终会双重转义你的引号，这是不好的。

[http://www.php-developer.org/best-practices-of-mysql_real_escape_string-function-in-php/](http://www.php-developer.org/best-practices-of-mysql_real_escape_string-function-in-php/)

# apache - 为每个目录设置 Apache 的 PATH？

> ID：11105990
> 
> 赞同：2
> 
> 时间：2012-06-19T17:14:18.043
> 
> 标签：apache

如何为每个目录设置 Apache 服务器的 PATH？

问题：我有一个系统，我无法更改安装在/usr/bin/ 中的python 系统。

我有一堆 python cgi 脚本，它们都 `#!/usr/bin/env python` 作为第一行。出于后勤原因，我强烈不希望更改这些脚本。

但这些脚本需要的 Python 版本与系统安装的版本不同。我在 /opt/python/bin/ 中安装了正确的版本。因此，如果我可以将此目录放在 PATH 的前面，但仅限于这个特定的 cgi 目录，它将解决我的问题。

也就是说，如果以下内容可行，它会做我想要的。

```
 ScriptAlias /mydir/cgi/ /home/me/devel/cgi/
      <Directory /home/me/devel/cgi>
        SetEnv PATH /opt/python/bin:/usr/bin:/bin
        ...other stuff...
      </Directory> 
```

但似乎 SetEnv 在 PATH 上不起作用（至少在 Apache 2.2 上）。

是否有其他方法可以仅更改 Apache 中一个特定目录的 PATH？

（PS，我也试过 SetEnvIf 没有任何喜悦。）

# codeigniter - Codeigniter 控制器/视图“漂亮的 uri”不起作用

> ID：11105993
> 
> 赞同：0
> 
> 时间：2012-06-19T17:14:28.387
> 
> 标签：codeigniter

我是一个完整的 Codeigniter 菜鸟。

我想我已经正确设置了所有内容，并且当我转到以下页面时会显示页面：

```
http://www.example.com/index.php/pages/view/my_page 
```

但是当我在没有 index.php 文件的情况下访问时出现 Apache 404 错误：

```
http://www.example.com/pages/view/my_page 
```

有什么明显的我失踪了吗？.htaccess 规则，还是控制器的变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:18:58.957

默认情况下，index.php 文件将包含在您的 URL 中

您可以使用带有一些简单规则的[.htaccess文件轻松删除此文件。](http://codeigniter.com/user_guide/general/urls.html)以下是此类文件的示例，使用“否定”方法重定向除指定项目之外的所有内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# ios - IOS搜索标签名称完成气泡

> ID：11105994
> 
> 赞同：0
> 
> 时间：2012-06-19T17:14:38.870
> 
> 标签：ios, user-interface

我正在尝试创建一个名称自动完成的搜索栏，在图像中看起来像这样。

![自动完成文本气泡](../Images/4b9b31c69c8d8cebdd29c59715c79d65.png)

有谁知道我如何能够实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:19:41.427

看看开源库[Three20](http://three20.info/)[`TTMessageController`](http://api.Three20.info/interface_t_t_message_controller.php)中的和。这正是你想要的：[`TTMessageRecipientField`](http://api.Three20.info/interface_t_t_message_recipient_field.php)

![TTMessageController 示例](../Images/5c77d74c99be621597ee43134b3c151e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:33:35.740

首先，您需要一个包含联系人姓名的数组：

```
//Add Address Book framework    

#import <AddressBook/AddressBook.h>

--------------------

ABAddressBookRef addressBook = ABAddressBookCreate();
NSArray *allPeople = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);

NSMutableArray *firstNames = [NSMutableArray alloc] init];

for(NSUInteger personIndex = 0; personIndex <= [allPeople count]; personIndex++){

    ABRecordRef person = (__bridge ABRecordRef)[allPeople objectAtIndex: incrementer];

    firstNameString = (__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);

    [firstNames addObject: firstNameString];
} 
```

所以`firstNames`数组现在包含了所有人的数组；

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];

    if (cell == nil) 
{
        cell = [[UITableViewCell alloc] initWithFrame:CGRectMake(your, values, go, here) reuseIdentifier:@"MyIdentifier"];
    }

    cell.text = [firstNames objectAtIndex: indexPath.row];

} 
```

到目前为止，您有一个包含所有名字的表格视图。确保在协议`UITableViewDataSource`和`UITableViewDelegate`. 还要确保`firstNames`在头文件中将数组声明为属性，以确保在整个 .m 文件中都可以访问它，因为如果不这样做，则无法在`cellForRowAtIndexPath:`方法中访问它。

[要实现自动补全，请按照此处](http://www.raywenderlich.com/336/how-to-auto-complete-with-custom-values)关于自定义自动补全值的 Ray Wenderlich 的教程进行操作。然后使用人们的名字数组作为自定义值。