# StackOverflow 问答 12142000-12142999

# php - 电子邮件的 RegExp 和 preg_match 也允许 *@domain.*

> ID：12142003
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:30:15.020
> 
> 标签：php, javascript, regex, email, preg-match

你好，

我正在使用它来验证电子邮件：

```
JavaScript:

RegExp(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/);

PHP:

preg_match("/^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*(.[a-z]{2,3})$/i", $email) 
```

这些可以很容易地验证字符串就像 blah@blahblah.blah，但我也想允许`*@blahblah.blah`，这两个规则应该如何编辑？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:00:43.743

关于您的 PHP 问题，我实际上会推荐一种完全不同的方法：[filter_var](http://se.php.net/manual/en/function.filter-var.php)是验证电子邮件地址的绝佳方法，并且是 PHP 现代框架的一部分。如果您运行的是 PHP 5.2+，那就是。

# iphone - Bootstrap 下拉菜单在 3G/蜂窝网络上不起作用

> ID：12142005
> 
> 赞同：5
> 
> 时间：2012-08-27T12:30:20.470
> 
> 标签：iphone, drop-down-menu, twitter-bootstrap, 3g

我的引导菜单在桌面系统上工作得非常好，甚至在通过无线连接的 iPhone/iPad 上也能正常工作。但是，一旦我通过 3G/蜂窝连接（即禁用 WiFi）进行测试，下拉菜单就不会出现。

更奇怪的是，Bootstrap 网站上的示例在 3G 上都可以正常工作，所以我将那里的确切代码复制并粘贴到我的网站中进行测试，但它不起作用！

这是默认的下拉代码：

```
<div class="btn-group">
<button data-toggle="dropdown" class="btn dropdown-toggle">Action <span class="caret"></span></button>
<ul class="dropdown-menu">
    <li><a href="#">Action</a></li>
    <li><a href="#">Another action</a></li>
    <li><a href="#">Something else here</a></li>
    <li class="divider"></li>
    <li><a href="#">Separated link</a></li>
 </div> 
```

同样，这一切都可以在 WiFi 上正常工作，但是在 3G 上时下拉菜单不会出现，即使引导示例工作正常......

更新：只需更新 bootstrap.js 即可解决此问题（必须在某个时候更改/损坏？）但最新的 2.1.0 引入了无法选择下拉菜单项的错误。在此报告：[https ://github.com/twitter/bootstrap/issues/4756](https://github.com/twitter/bootstrap/issues/4756)

# multitasking - 网络工作者是否抢占式？

> ID：12142008
> 
> 赞同：4
> 
> 时间：2012-08-27T12:30:28.333
> 
> 标签：multitasking, web-worker

我想`web workers`不是先发制人。否则我不明白它们如何被`terminate`API 终止。这是对的吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T14:59:28.547

Web Worker 不会抢占主窗口中的任何内容。

这是一个基于消息的事件模型。因此，您可以从主窗口调用终止，并根据工作人员在其执行中的位置，您可能会或可能不会收到最后一条消息。

假设您有某种生产者、消费者模型。

# jquery - 如何将变量传递给 jquery 加载选择器？

> ID：12142009
> 
> 赞同：1
> 
> 时间：2012-08-27T12:30:30.987
> 
> 标签：jquery, ajax, load, selector

我正在使用 ajax 在 div 内加载页面。当我有一个固定的选择器 div 时，一切正常，例如 -

```
$('.ajaxurl').click(function(){
    $('.selected-blog').load($(this).attr('href'));
    return false;
}); 
```

这里 '.selected-blog' 是一个固定条目。

但是，我在页面上有多个 .ajaxurl 链接，每个链接都有自己的“.selected-blog” div，因此我希望能够根据单击的 .ajaxurl 链接将源加载到不同的 div 中。换句话说，每个 .ajaxurl 链接都需要有一个对应的唯一 .selected-blog-[id] 类，单击链接需要将 [id] 变量传递给函数，以便可以将其附加到选择器。

我尝试为 .ajaxurl 链接提供一个 id 以作为变量传递给 jquery，以便正文代码为 -

```
<div class="teaser-id<?php print $id; ?>">
  <a class="ajaxurl" id ="id<?php print $id; ?>" href="[pagelink]">Click me</a>  
  stuff here
</div> 
<div class="selected-blog-id<?php print $id; ?>"></div>     

[this above code repeats for each teaser in the list] 
```

jquery代码是-

```
$('.ajaxurl').click(function(){
     var x = this.id;
     $('.selected-blog-,'+x).load($(this).attr('href'));
     return false;
}); 
```

但我无法让它工作，我做错了什么？

（最后 - 如果它对解决方案有影响，这是一个额外的点 - 我想隐藏 teaser-[id] div，所以如果传递的变量也可以用于这个 .hide() 函数会很好！）

我该怎么做呢？！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:35:44.630

你不需要让你的 html 如此复杂。您可以保持简单并使用 jquery [next()](http://api.jquery.com/next/)来获取下一个 div 类`selected-blog-id`以将内容加载到其中。这些方面的东西应该适合你：

**HTML**：

```
<div class="teaser-id">
    <a class="ajaxurl" href="[pagelink]">Click me</a>  
    stuff here
</div> 
<div class="selected-blog-id"></div> 
```

**Javascript**：

```
$('.ajaxurl').click(function(e) {
    var $parent = $(this).parent();

    // hide the teaser
    $parent.hide();

    // load content into the next div with selected-blog-id
    $parent.next('.selected-blog-id').load(this.href);
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:40:05.843

有几件事似乎打错了，否则您可能需要仔细检查以下内容：

```
<div class="teaser-id-<?php print $id; ?>">
 <a class="ajaxurl" id ="blog-<?php print $id; ?>" href="[pagelink]">Click me</a>  
 <!-- <a class="ajaxurl" id ="id<?php print $id; ?>" href="[pagelink]">Click me</a> -->  
 stuff here
</div> 
<div class="selected-blog-<?php print $id; ?>"></div> 
<!-- <div class="selected-blog-id<?php print $id; ?>"></div> -->   

[this above code repeats for each teaser in the list] 
```

jQuery

```
$('.ajaxurl').click(function(){
    var x = this.id.replace("blog-", '');
    //$('.selected-blog-,'+x).load($(this).attr('href'));
    $('.selected-blog-' + x).load($(this).attr('href'), function(){
        $(".teaser-id-" + x).hide();
    });
    return false;
}); 
```

**更新** 根据评论更改此...

```
$('.selected-blog-'+x).load($(this).attr('href')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:36:39.277

您将`ajaxurl`元素打印为`id ="id<?php print $id; ?>"`，您是否打算这样做`id ="<?php print $id; ?>"`？

# .net - 页面同时回发时异步回调失败

> ID：12142010
> 
> 赞同：0
> 
> 时间：2012-08-27T12:30:36.040
> 
> 标签：.net, asynchronous, postback, webmethod, pagemethods

我的解决方案中遇到了 js 异步回调的问题。这是请求；

1.  用户单击“生成 Excel”按钮。
2.  在服务器上生成包含大量数据的 excel 文件（大约需要 2 分钟）。
3.  在此期间，用户可以在应用程序中进行其他操作，包括页面回发/请求/等。
4.  当生成 excel 时，会弹出一个弹出窗口以从服务器下载文件，而不管用户所在的页面如何。

我做了什么 ：

*   创建了一个生成 excel 文件 wrt 业务需要的函数“ **GenerateReport** ”。（服务器端）
*   编写了一个 WebMethod ' **GetFilePath** '，它递归地检查文件是否已由**GenerateReport**方法在某个服务器位置生成并返回新文件的文件路径，该方法根据业务逻辑不再返回相同的文件路径。（服务器端）
*   创建了一个 javascript 函数**DownloadLink()** ，它以 60 秒的延迟递归调用**GetFilePath方法。**函数调用如下所示：

    PageMethods.GetFilePath(UserId, onSuccess, onError);

*   OnSuccess 和 OnError 是 JS 回调函数，当下载文件的 URL 可用时触发 OnSuccess，此 JS 方法显示下载弹出窗口，出现错误时调用 OnError。

工作正常，直到发生以下情况。 **当从 GetFilePath 方法调用 OnSuccesss 并且同时发生一些其他操作的回发时**，由于尚未加载新页面并且不会向用户显示下载弹出窗口，因此永远不会进行 OnSuccess 调用。

我应该怎么做才能解决这个问题，以确保用户获得下载链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:36:37.847

除了每 60 秒检查一次外，在最初加载页面时检查是否有准备好的下载链接。

# matlab - 在 K-Means 中传递自定义距离函数

> ID：12142020
> 
> 赞同：3
> 
> 时间：2012-08-27T12:31:27.423
> 
> 标签：matlab, k-means

有没有办法在 MATLAB k-means 实现中传递自定义距离函数（例如 jaccard 距离）？

杰卡德距离函数

```
D = pdist(X,'jaccard'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:36:33.167

您需要做的是使用 SVD 将距离矩阵分解为特征空间，然后对由 SVD 的分数表示的新特征空间执行 kmeans。参见 Rob Tibshirani 的《统计学习要素》。

或者你可以做 k 个与距离矩阵一起工作的 mediods - R 中的 as.dist() 会将一个矩阵转换为一个 dist 对象，然后你可以在这个对象上做 K-mediods。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:52:57.567

从[文档](http://www.mathworks.nl/help/toolbox/stats/kmeans.html)中，我们了解到我们可以将`'distance'`选项传递给`kmeans`：

> '距离'
> 
> 距离测量，在 p 维空间中。kmeans 对此参数进行最小化。kmeans 为不同的支持距离度量计算不同的质心簇。
> 
> 'sq欧几里得'
> 
> 平方欧几里得距离（默认）。每个质心是该集群中点的平均值。
> 
> '城市街区'
> 
> 绝对差之和，即L1距离。每个质心是该集群中点的组件中位数。
> 
> '余弦'
> 
> 一减去点之间夹角的余弦（视为向量）。在将这些点标准化为单位欧几里得长度之后，每个质心都是该簇中点的平均值。
> 
> '相关性'
> 
> 一减去点之间的样本相关性（视为值序列）。在将这些点居中并将这些点归一化为零均值和单位标准偏差之后，每个质心都是该簇中点的分量均值。
> 
> '汉明'
> 
> 不同位的百分比（仅适用于二进制数据）。每个质心是该集群中点的组件中位数。

因此，例如：

```
[idx,ctrs] = kmeans(X,2, 'Distance','cityblock'); 
```

至于*自定义*功能（即用户实现）：AFAIK，如果不破解相关的 m 文件，这是不可能的。

# android - 如何在 EditText 控件中的文本更改后 0.5 秒执行某些操作？

> ID：12142021
> 
> 赞同：70
> 
> 时间：2012-08-27T12:31:27.720
> 
> 标签：android, filter, android-edittext, textwatcher, textchanged

我正在使用 EditText 控件过滤我的列表。我想**在用户输入完 EditText 后 0.5 秒**过滤列表。我为此目的使用了`afterTextChanged`事件。`TextWatcher`但是这个事件会随着 EditText 中每个字符的变化而上升。

我该怎么办？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-08-27T13:34:12.637

采用：

```
editText.addTextChangedListener(
    new TextWatcher() {
        @Override public void onTextChanged(CharSequence s, int start, int before, int count) { }
        @Override public void beforeTextChanged(CharSequence s, int start, int count, int after) { }

        private Timer timer = new Timer();
        private final long DELAY = 1000; // Milliseconds

        @Override
        public void afterTextChanged(final Editable s) {
            timer.cancel();
            timer = new Timer();
            timer.schedule(
                new TimerTask() {
                    @Override
                    public void run() {
                        // TODO: Do what you need here (refresh list).
                        // You will probably need to use
                        // runOnUiThread(Runnable action) for some
                        // specific actions (e.g., manipulating views).
                    }
                },
                DELAY
            );
        }
    }
); 
```

诀窍是在`Timer`每次`EditText`更改文本时取消和重新安排。

有关设置延迟多长时间，请参阅[这篇文章](https://ux.stackexchange.com/a/38545)。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-02-08T11:27:02.220

更好地使用带有 postDelayed() 方法的*Handler 。*在Android的实现中，Timer每次都会创建一个新的线程来运行任务。*然而Handler*有它自己的 Looper 可以附加到我们希望的任何线程上，所以我们不会支付额外的成本来创建一个线程。

### 例子

```
 Handler handler = new Handler(Looper.getMainLooper() /*UI thread*/);
 Runnable workRunnable;
 @Override public void afterTextChanged(Editable s) {
    handler.removeCallbacks(workRunnable);
    workRunnable = () -> doSmth(s.toString());
    handler.postDelayed(workRunnable, 500 /*delay*/);
 }

 private final void doSmth(String str) {
    //
 } 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-09-16T14:24:24.613

您可以使用[RxBindings](http://github.com/JakeWharton/RxBinding)；这是最好的解决方案。请参阅 RxJava 运算符 debounce[指南](http://reactivex.io/documentation/operators/debounce.html)。我相信这对你的情况会很好。

```
RxTextView.textChanges(editTextVariableName)
            .debounce(500, TimeUnit.MILLISECONDS)
            .subscribe(new Action1<String>() {
                @Override
                public void call(String value) {
                    // Do some work with the updated text
                }
            }); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-06-07T09:45:22.460

使用 Kotlin 扩展函数和协程：

```
fun AppCompatEditText.afterTextChangedDebounce(delayMillis: Long, input: (String) -> Unit) {
    var lastInput = ""
    var debounceJob: Job? = null
    val uiScope = CoroutineScope(Dispatchers.Main + SupervisorJob())
    this.addTextChangedListener(object : TextWatcher {
        override fun afterTextChanged(editable: Editable?) {
            if (editable != null) {
                val newtInput = editable.toString()
                debounceJob?.cancel()
                if (lastInput != newtInput) {
                    lastInput = newtInput
                    debounceJob = uiScope.launch {
                        delay(delayMillis)
                        if (lastInput == newtInput) {
                            input(newtInput)
                        }
                    }
                }
            }
        }

        override fun beforeTextChanged(cs: CharSequence?, start: Int, count: Int, after: Int) {}
        override fun onTextChanged(cs: CharSequence?, start: Int, before: Int, count: Int) {}
})} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-04-08T11:20:52.347

以上解决方案都不适合我。

我需要一种方法让 TextWatcher 不会触发我在搜索视图中输入的每个字符并显示一些进度，这意味着我需要访问 UI 线程。

```
private final TextWatcher textWatcherSearchListener = new TextWatcher() {
    final android.os.Handler handler = new android.os.Handler();
    Runnable runnable;

    public void onTextChanged(final CharSequence s, int start, final int before, int count) {
        handler.removeCallbacks(runnable);
    }

    @Override
    public void afterTextChanged(final Editable s) {
        // Show some progress, because you can access UI here
        runnable = new Runnable() {
            @Override
            public void run() {
                // Do some work with s.toString()
            }
        };
        handler.postDelayed(runnable, 500);
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
}; 
```

在每个 onTextChanged 上删除 Handler（当用户输入新字符时调用）。afterTextChanged 在输入字段内的文本发生更改后调用，我们可以在其中启动一个新的 Runnable，但如果用户键入更多字符，它将取消它（有关更多信息，当调用这些回调时，[请参阅this](https://stackoverflow.com/questions/476848/android-textwatcher-aftertextchanged-vs-textwatcher-ontextchanged)）。如果用户不再输入任何字符，则间隔将传入 postDelayed 并调用您应该对该文本执行的工作。

此代码每个时间间隔仅运行一次，而不是针对每个关键用户输入。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-27T12:36:20.527

你如何确定他们已经完成了写作？编辑文本失去焦点？然后是[setOnFocusChangedListener](http://developer.android.com/reference/android/view/View.html#setOnFocusChangeListener%28android.view.View.OnFocusChangeListener%29)。

**响应最新的编辑问题**：如果您想在最后一次击键后等待特定时间，那么您必须在第一次按键时启动一个线程（使用 TextWatcher）。不断记录最新击键的时间。让线程休眠到最近一次击键的时间 + 0.5 秒。如果最新击键的时间戳尚未更新，请按照您的意图进行操作。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-02-27T08:59:42.923

在 Kotlin 语言中，你可以这样做：

```
tv_search.addTextChangedListener(mTextWatcher)

private val mTextWatcher: TextWatcher = object : TextWatcher {
    private var timer = Timer()
    private val DELAY: Long = 1000L

    override fun afterTextChanged(s: Editable?) {
        timer.cancel()
        timer = Timer()
        timer.schedule(object : TimerTask() {
            override fun run() {

                // Do your stuff here
            }
        }, DELAY)
    }

    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
    }

    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
    }

} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-19T14:04:35.370

您还可以使用**TextWatcher**接口并创建实现它的自定义类以多次重用您的**CustomTextWatcher并且您可以将视图或您可能需要的任何内容传递给它的构造函数：**

```
public abstract class CustomTextWatcher implements TextWatcher { // Notice abstract class so we leave abstract method textWasChanged() for implementing class to define it

    private final TextView myTextView; // Remember EditText is a TextView, so this works for EditText also

    public AddressTextWatcher(TextView tView) { // Notice I'm passing a view at the constructor, but you can pass other variables or whatever you need
        myTextView = tView;
    }

    private Timer timer = new Timer();
    private final int DELAY = 500; // Milliseconds of delay for timer

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void afterTextChanged(final Editable s) {
        timer.cancel();
        timer = new Timer();

        timer.schedule(

            new TimerTask() {
                @Override
                public void run() {
                    textWasChanged();
                }
            },
            DELAY

        );
    }

    public abstract void textWasChanged(); // Notice the abstract method to leave the
                                           // implementation to the implementing class

} 
```

现在在您的活动中，您可以像这样使用它：

```
// Notice I'm passing in the constructor of CustomTextWatcher
// myEditText I needed to use
myEditText.addTextChangedListener(new CustomTextWatcher(myEditText) {
    @Override
    public void textWasChanged() {
        //doSomething(); This is method inside your activity
    }
}); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-07-16T09:11:53.130

您可以使用计时器。输入文本后，它将等待 600 毫秒。使用 600 毫秒的延迟将代码放入 afterTextChanged() 中。

```
@Override
    public void afterTextChanged(Editable arg0) {
        // The user typed: start the timer
        timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                // Do your actual work here
               editText.setText(et.getText().toString());
            }
        }, 600); // 600 ms delay before the timer executes the „run“ method from TimerTask
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // Nothing to do here
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // The user is typing: reset already started timer (if existing)
        if (timer != null) {
            timer.cancel();
        }
    }
}; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-27T18:38:16.940

那是在输入完成时和之后的事件......添加一个 textWatcher 并在 onTextChanged 方法中放置：

```
if (charSequence.length() > 0){ 
    // Your code 
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-06T11:50:27.370

如果您只想第一次跳过 textWatcher，请添加以下代码：

这将允许 textWatcher 从第二次开始进行任何更改。

```
Boolean firstchange = false;

profileEmailEditText.addTextChangedListener(new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if (firstchange) {
            emailAlertText.setVisibility(View.VISIBLE);
        }
        else {
            firstchange = true;
        }
    }

    @Override
    public void afterTextChanged(Editable s) {

    }
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-14T14:24:50.643

试试这个

```
class DelayTextWatcher(val ms: Long = 500, val textChanged: (String) -> Unit) : TextWatcher {

private var timer: CountDownTimer? = null
override fun afterTextChanged(p0: Editable) {
    timer?.cancel()
    timer = object : CountDownTimer(ms, ms) {
        override fun onTick(millisUntilFinished: Long) {

        }

        override fun onFinish() {
            textChanged(p0.toString())
        }
    }.start()
}

override fun beforeTextChanged(p0: CharSequence?, p1: Int, p2: Int, p3: Int) {
}

override fun onTextChanged(p0: CharSequence?, p1: Int, p2: Int, p3: Int) {
}

fun dispose() {
    timer?.cancel()
} 
```

}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-15T00:35:49.283

如果你用 Kotlin 编写，你可以这样做。

这种方法使用协程而不是线程（如果您将通过 Timer() 来实现）。此外，您可以`debounceJob`通过launchWhenCreated等来控制生命周期。

```
private val onNumberListener = object : TextWatcher {
    private var debounceJob: Job? = null
    private val DELAY: Long = 1000L

    override fun afterTextChanged(s: Editable?) {
        debounceJob?.cancel()
        debounceJob = this@FragmentName.viewLifecycleOwner.lifecycle.coroutineScope
            .launch(Dispatchers.Main) {
                delay(DELAY)
                viewModel.onNumberChange(s?.toString() ?: "")
            }
    }

    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {

    }

    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {

    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-08T20:15:34.583

观察文本更改事件的另一种方法是使用协程通道。

```
lifecycleScope.launchWhenCreated {
            editText.afterTextChanged {
                // do something
            }
        } 
```

创建扩展函数以从流中收集数据

```
suspend fun EditText.afterTextChanged(afterTextChanged: suspend (String) -> Unit) {
    val watcher = Watcher()
    this.addTextChangedListener(watcher)

    watcher.asFlow()
        .debounce(500)
        .collect { afterTextChanged(it) }
} 
```

创建一个 Watcher 类以在更改后提供文本

```
class Watcher : TextWatcher {

    private val channel = ConflatedBroadcastChannel<String>()

    override fun afterTextChanged(editable: Editable?) {
        channel.offer(editable.toString())
    }

    override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {}

    override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {}

    fun asFlow(): Flow<String> {
        return channel.asFlow()
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-03-17T12:53:58.567

最好的方法是移动光标

> setSelection(it.toString().length)

使用这种形式不要使用树或协程来睡眠 N tine

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2012-08-27T12:36:33.150

您可以[`EditorActionListener`](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html)用于此目的。

```
editText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_DONE) {
            //Do something here
            return true;
        }
        return false;
    }
}); 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-02-02T08:17:27.410

为您的案例使用计时器并不是最佳解决方案，因为每次都会创建一个新对象。根据[Timer 文档](http://developer.android.com/reference/java/util/Timer.html)，最好使用 ScheduledThreadPoolExecutor -

> “计时器安排一次性或重复执行的任务。新代码首选 ScheduledThreadPoolExecutor。”

这是一个更好的方法

```
Runnable runnabledelayedTask = new Runnable(){
    @Override
    public void run(){
        //TODO Perform any operation here
    }
};

editText.addTextChangedListener(
    new TextWatcher() {
        @Override public void onTextChanged(CharSequence s, int start, int before, int count) { }
        @Override public void beforeTextChanged(CharSequence s, int start, int count, int after) { }

        private final long DELAY = 500; // Milliseconds

        @Override
        public void afterTextChanged(final Editable s) {
            ScheduledExecutorService scheduledPool = Executors.newScheduledThreadPool(1);
            ScheduledFuture sf = scheduledPool.schedule(callabledelayedTask, DELAY, TimeUnit.MILLISECONDS);
            // You can cancel ScheduledFuture when needed
        }
    }
); 
```

# windows-phone-7 - 删除 MessagePrompt 中的边框

> ID：12142022
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:31:30.500
> 
> 标签：windows-phone-7, xaml, border

我正在使用 Coding4Fun 提示消息在 WP7（Windows Phone 7）上显示弹出消息。

我搜索了如何删除消息提示周围的白色边框，发现以下内容

[如何在 Coding4Fun MessagePrompt 中删除边框](https://stackoverflow.com/questions/11044946/how-to-remove-the-border-in-coding4fun-messageprompt)

我想执行解决方案，但我不知道将 XAML 代码放在答案中的什么位置。

任何人都可以澄清答案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:00:18.160

你把它作为一个孩子的`<phone:PhoneApplicationPage>`显然。

给出的例子：

```
<phone:PhoneApplicationPage x:Class="Your.Class"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    Some other namespace declarations >

    <!-- Your page resources dictionary -->
    <phone:PhoneApplicationPage.Resources>  
        <ControlTemplate x:Key="MsgPropmtNoBorder"
                         TargetType="c4f:MessagePrompt">
                 BLAH-BLAH-BLAH
        </ControlTemplate>
    </phone:PhoneApplicationPage.Resources>

    <!-- Your layout root and all the page content -->
    <Grid x:Name="LayoutRoot"
          Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        BLAH-BLAH-BLAH-YOUR-CONTENT

    </Grid>
</phone:PhoneApplicationPage> 
```

# jquery - 使用 jquery 在选项选择的基础上添加新的表单输入字段

> ID：12142024
> 
> 赞同：1
> 
> 时间：2012-08-27T12:31:32.230
> 
> 标签：jquery, html, forms, logic

我有一个 html 表单，在下拉列表中的输入字段选择中，我想添加一些 html 输入字段。我正在使用`append()`但它实际上只是附加到 div 假设我有 2 个选项 1,2 在选择 1 时将一些输入字段添加到表单中，但在为选项 1 选择 2 个输入字段时保持不变。我可以使用什么另一种方法来代替附加？我真的错过了一些非常基本的东西，谷歌搜索了很多，但在这种情况下没有帮助。

```
jQuery('#category').change(function() {
   if( $(this).val() == 1 ) {
      // input fields to add for 1
   }
   if( $(this).val() == 4 ) {
     // input fields to add for 4
   }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:47:23.743

为什么不在表单中创建所有输入字段并执行以下操作：

```
$(document).ready(function()
{
    $("#inputfield1").hide();
    $("#inputfield2").hide();
});

jQuery('#category').change(function() {
   if( $(this).val() == 1 ) {
      $("#inputfield1").show();
      $("#inputfield2").hide();
   }
   if( $(this).val() == 4 ) {
      $("#inputfield2").show();
      $("#inputfield1").hide();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:40:10.837

在相同位置添加输入字段。并设置它的css`display:none;`并将属性更改为`display:block;` 下拉更改值。

# java - java.util.concurrent.DelayQueue 忽略过期元素

> ID：12142025
> 
> 赞同：6
> 
> 时间：2012-08-27T12:31:34.147
> 
> 标签：java, multithreading, priority-queue

下面的 java 代码示例使用 java DelayQueue 来处理任务。但是，从另一个线程插入任务似乎会破坏（我的）预期行为。

很抱歉代码示例太长了，但总结一下：

1.  主线程将 5 个任务（AE）添加到具有各种延迟（0ms、10ms、100ms、1000ms、10000ms）的延迟队列中
2.  启动另一个线程，在 3000 毫秒后将另一个任务添加到延迟队列
3.  主线程轮询 DelayQueue 并在每个 Task 过期时报告
4.  8000ms后，主线程报告DelayQueue中剩余的Tasks

我从代码示例中得到的输出是：

```
------initial tasks ---------------
task A due in 0ms
task B due in 9ms
task C due in 99ms
task D due in 999ms
task E due in 9999ms
task F due in 99999ms
------processing--------------------
time = 5    task A due in -1ms
time = 14   task B due in 0ms
time = 104  task C due in 0ms
time = 1004 task D due in 0ms
time = 3003 added task Z due in 0ms
------remaining after 15007ms -----------
task F due in 84996ms
task E due in -5003ms
task Z due in -12004ms 
```

我的问题是：为什么在 15000 毫秒后延迟队列中剩余过期的任务（即 GetDelay() 返回 -ve 值的地方）？

我检查过的一些事情：

*   我已经实现了 compareTo() 来定义任务的自然顺序
*   equals() 与 compareTo() 一致
*   hashCode() 已被覆盖

我最感兴趣的是学习如何解决这个问题。预先感谢您的协助。（以及迄今为止帮助我的所有 Stack Overflow 答案：）

```
 package test;

    import java.util.concurrent.DelayQueue;
    import java.util.concurrent.Delayed;
    import java.util.concurrent.TimeUnit;

    public class Test10_DelayQueue {

       private static final TimeUnit delayUnit = TimeUnit.MILLISECONDS;
       private static final TimeUnit ripeUnit = TimeUnit.NANOSECONDS;

       static long startTime;

       static class Task implements Delayed {    
          public long ripe;
          public String name;    
          public Task(String name, int delay) {
             this.name = name;
             ripe = System.nanoTime() + ripeUnit.convert(delay, delayUnit);
          }

      @Override
      public boolean equals(Object obj) {
         if (obj instanceof Task) {
            return compareTo((Task) obj) == 0;
         }
         return false;
      }

      @Override
      public int hashCode() {
         int hash = 7;
         hash = 67 * hash + (int) (this.ripe ^ (this.ripe >>> 32));
         hash = 67 * hash + (this.name != null ? this.name.hashCode() : 0);
         return hash;
      }

      @Override
      public int compareTo(Delayed delayed) {
         if (delayed instanceof Task) {
            Task that = (Task) delayed;
            return (int) (this.ripe - that.ripe);
         }
         throw new UnsupportedOperationException();
      }

      @Override
      public long getDelay(TimeUnit unit) {
         return unit.convert(ripe - System.nanoTime(), ripeUnit);
      }

      @Override
      public String toString() {
         return "task " + name + " due in " + String.valueOf(getDelay(delayUnit) + "ms");
          }
       }

       static class TaskAdder implements Runnable {

      DelayQueue dq;
      int delay;

      public TaskAdder(DelayQueue dq, int delay) {
         this.dq = dq;
         this.delay = delay;
      }

      @Override
      public void run() {
         try {
            Thread.sleep(delay);

            Task z = new Task("Z", 0);
            dq.add(z);

            Long elapsed = System.currentTimeMillis() - startTime;

            System.out.println("time = " + elapsed + "\tadded " + z);

         } catch (InterruptedException e) {
         }
      }
    }

    public static void main(String[] args) {
      startTime = System.currentTimeMillis();
      DelayQueue<Task> taskQ = new DelayQueue<Task>();

      Thread thread = new Thread(new TaskAdder(taskQ, 3000));
      thread.start();

      taskQ.add(new Task("A", 0));
      taskQ.add(new Task("B", 10));
      taskQ.add(new Task("C", 100));
      taskQ.add(new Task("D", 1000));
      taskQ.add(new Task("E", 10000));
      taskQ.add(new Task("F", 100000));

      System.out.println("------initial tasks ---------------");
      Task[] tasks = taskQ.toArray(new Task[0]);
      for (int i = 0; i < tasks.length; i++) {
         System.out.println(tasks[i]);
      }

      System.out.println("------processing--------------------");
      try {
         Long elapsed = System.currentTimeMillis() - startTime;
         while (elapsed < 15000) {
            Task task = taskQ.poll(1, TimeUnit.SECONDS);
            elapsed = System.currentTimeMillis() - startTime;
            if (task != null) {
               System.out.println("time = " + elapsed + "\t" + task);
            }
         }

         System.out.println("------remaining after " + elapsed + "ms -----------");
         tasks = taskQ.toArray(new Task[0]);
         for (int i = 0; i < tasks.length; i++) {
            System.out.println(tasks[i]);
         }

      } catch (InterruptedException e) {
      }
    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:49:48.523

因为你的`comapareTo`方法漏洞百出。正确的实现如下。一旦你像下面这样改变，你所有的问题都会得到解决。`compareTo`如果或遵守`compareTo`合同，请始终尝试重用方法

```
return Long.valueOf(this.ripe).compareTo(that.ripe); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T13:43:24.977

原因是由于数值溢出。

您的`compareTo()`方法是以`long`纳秒为单位将差异转换为`int`，但不能将超过 2.2 秒的纳秒保留在一个中`int`，您将得到溢出 - 或多或少地给出随机结果，因此队列中的顺序可能在一个后面如果将来过期超过 2.2 秒，则过期。

`poll()`不会超出队列中的下一个项目，其顺序由`compareTo`将项目放入队列时的方法定义。

另外，`equals()`应该同意`hashCode()`，以及`compareTo()`。有关这方面的更多信息，请参阅[javadoc 。`hashCode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T01:24:31.617

除非这是实现事件调度程序的练习，否则最好使用[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html). 它会做你想做的所有事情，甚至更多。

# ruby - Rails 3 + Devise - 登录用户无法打开页面更改密码

> ID：12142026
> 
> 赞同：2
> 
> 时间：2012-08-27T12:31:34.147
> 
> 标签：ruby, devise, haml, ruby-on-rails-3.2, simple-form

我使用带有`devise`,`simple form`和`haml`gems 的 Rails 3 应用程序。我的应用程序也支持很少的语言环境。我在主页上创建了简单的链接：

```
%p
  = link_to "Change pass", edit_user_password_path 
```

应用程序向所有人显示此链接（只是为了测试它）。但我发现非登录用户可以打开这个链接。但是当登录用户打开此链接时，系统会告诉您：

```
You are already signed in. 
```

我不知道我做错了什么。

我的用户模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body
end 
```

我的路线：

```
 scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
    devise_for :users, :skip => [:registrations]                                          

    root :to => 'pages#home'
  end

  match '*path', to: redirect("/#{I18n.default_locale}/%{path}"), constraints: lambda { |req| !req.path.starts_with? "/#{I18n.default_locale}/" }
  match '', to: redirect("/#{I18n.default_locale}") 
```

我还在**views/devise/shared/_links.haml中评论了几行**

```
- if devise_mapping.registerable? && controller_name != 'registrations'
  / = link_to t(".sign_up_link"), new_registration_path(resource_name)
  / %br/ 
```

因为我不想让用户注册并查看链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:58:14.037

`edit_user_password_path``password_controller`当用户需要重置密码时，Devise 中使用。我认为您正在寻找的是`edit_user_registration_path`. 这将使用户编辑`registrations_controller`他们可以修改其电子邮件地址和密码的操作。这是默认的设计行为。

如果您想提供更多自定义功能，可以阅读[Devise Wiki](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password)上的教程，了解如何提供自定义密码更改功能。

另请注意，当用户关注时`edit_user_registration_path`，他们可以选择取消您可能希望从视图中删除的帐户，或使用自定义方法来避免这种不需​​要的功能。

# bash - 使用 shell 脚本 (bash) 在单独的终端中运行命令

> ID：12142031
> 
> 赞同：0
> 
> 时间：2012-08-27T12:31:57.660
> 
> 标签：bash, unix

我想使用“./application_name”启动多个应用程序，每个应用程序都在单独的终端中，我如何在 bash 脚本中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:35:53.287

我不确定我是否理解您的要求，但这可能是您需要的：

```
x-terminal-emulator -e "./application_name [arguments]" & 
```

这将在后台启动一个新的终端模拟器，它将运行给定的命令而不是 shell。

如果您的系统没有`x-terminal-emulator`别名，请替换实际终端仿真器的名称，例如`xterm`or `gnome-terminal`。他们（几乎）都支持这个`-e`选项。

当然，这要求您的 bash 脚本首先从 X11 会话内部运行（而不是从 cron 作业或类似的东西），否则将不会`$DISPLAY`出现新的终端仿真器。

**编辑**： 参数是否`-e`在外壳下执行或直接似乎取决于使用哪个终端仿真器。例如，`xterm`在 shell 下运行它，但`gnome-terminal`没有。这样做的结果是，您可能会也可能无法提供复合 shell 命令，`cd foobar; ./something & wait`例如`-e`. 作为那些*不在*shell 下运行命令的终端仿真器的解决方法，您可以使用`-e 'sh -c "actual command"'`. 特殊字符的正确引用会[变得复杂](http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome)，因为您有两个级别的引用，但可以做到。

# macos - 基于 NSDocument 的 Mac 应用程序 - 抑制奇怪的保存更改提示

> ID：12142033
> 
> 赞同：1
> 
> 时间：2012-08-27T12:32:01.793
> 
> 标签：macos, cocoa, nsdocument, savechanges

我开始从基于 NSDocument 的应用程序模板开发这个 Mac 应用程序，认为其中的报告应该成为富文本格式的文档。

现在，应用程序规格已经改变，应用程序已经完成，我不再需要应用程序基于 NSDocument。如果修改应用程序使其不基于文档是微不足道的，那当然是正确的解决方案。这是我的第一个 Mac 应用程序，如果您知道，我必须确保我知道我在做什么，拆掉零件并确保所有参考资料完好无损。

由于某种原因，仅仅因为我在应用程序主窗口的子视图中的文本字段中输入了文本，文档就被应用程序中的某个进程视为已更改。

如何抑制或覆盖此提示（大致为“文档已更改。保存更改？”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:34:58.607

把这是你的 NSDocument 子类，比如 MyDocument.m：

```
- (void)updateChangeCount:(NSDocumentChangeType)changeType {
    //overridden to do nothing
} 
```

# php - PHP 将自定义应用操作发布到时间线

> ID：12142040
> 
> 赞同：1
> 
> 时间：2012-08-27T12:32:21.763
> 
> 标签：php, facebook-php-sdk, facebook-opengraph

我希望我的网站比现在有更好的 fb 集成。截至目前，我使用以下代码将消息/链接发布到给定用户的时间线。

```
$attachment = array('message' => 'Predicted the '.ucwords($winning_team_short).' to beat the '.ucwords($losing_team_short).' on '.ordSuffix($new_date_format).'',
            'caption' => 'Sportannica - Online Sports Encyclopedia',
            'name' => 'How will your predictions pan out?',
            'link' => 'http://www.sportannica.com/games/'.$league.'/'.$game.'/predictions',
            'description' => ''.ucwords($winning_team_short).' ('.$winning_score.')  '.ucwords($losing_team_short).' ('.$losing_score.')',
            'picture' => 'http://www.sportannica.com'.$path.''.$winning_team.'.png'
        );

        $facebook->api('/me/feed/', 'post', $attachment); 
```

不过，我想要一种更好的方法……一种将消息发布到用户时间轴的方法，就像像 spotify 这样的应用程序所做的那样。

当我转到打开的图形仪表板时，我已经定义了几个自定义操作和对象。一种行动是“预测”。我想让消息显示为“.$fb_user_name。”预测“.$winning_team.”在“.$game_date.”上击败“.$losing_team.”；

我对 fb api 比较陌生，所以在谈到这个材料时我有点迷茫。我确实知道 spotify 的方法使用自定义操作，所以我知道我走在正确的道路上。任何人都可以发布一些示例 php 代码，用于他们将使用自定义操作和对象的消息发布到用户时间轴的方法吗？

谢谢，

槊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:33:55.850

**例子：**

在批量查询中使用 php sdk 3.1.1 / 删除其他查询。

```
 $queries = array(
        array('method' => 'POST', 'relative_url' => '/me/anotherfeed:view?feed=http://anotherfeed.com/?fbid='.$thepage[id].'')
        // any other api calls needed, this is a batch request for performance.
   );
    try {
 $postResponseA = $facebook->api('?batch='.json_encode($queries), 'POST');
    } catch (FacebookApiException $e) {
  //echo 'AF error: '.$e.'';
  }
  $actions=json_decode($postResponseA[0][body], true); 
```

* * *

上面的帖子分为4部分

**命名空间** `anotherfeed:`

**行动** `view?`

**目的** `feed`

**网址** `http://anotherfeed.com/?fbid='.$thepage[id].'`

这会产生“用户查看了另一个提要上的任何提要”

* * *

该操作取决于页面头部的 OG Meta 标签来填充操作帖子。

示例标签：

```
<meta property="og:title" content="SecurityNewsDaily" />    
<meta property="og:description" content="SecurityNewsDaily on Another Feed, Feeding on the best of Facebook, one page at a time." />
<meta property="og:type" content="anotherfeed:feed" />
<meta property="og:image" content="https://graph.facebook.com/146893188679657/picture?type=large" />
<meta property="og:site_name" content="AnotherFeed" />
<meta property="fb:app_id" content="135669679827333" />
<meta property="fb:admins" content="732484576" />
<meta property="og:url" content="http://anotherfeed.com/index.php?fbid=146893188679657" />
<meta property="og:restrictions:age" content="13+"/> 
```

# asp.net-mvc-3 - asp .net mvc 辅助函数中出现意外的 pharantesis 错误

> ID：12142043
> 
> 赞同：0
> 
> 时间：2012-08-27T12:32:42.073
> 
> 标签：asp.net-mvc-3, html-helper

我在 asp .net mvc helper 函数中遇到了意外的 pharantesis 错误。一切似乎都很好，它给出了一个“}”错误。

```
@helper GetirIcerikStil(string anaMenuKontrol, string solMenuKontrol, string sekmeKontrol, UrlHelper url){
var d = DateTime.Now;
var tazele = d.ToLongTimeString();

anaMenuKontrol = BuyutIlkHarf(anaMenuKontrol);
solMenuKontrol = BuyutIlkHarf(solMenuKontrol);
sekmeKontrol = BuyutIlkHarf(sekmeKontrol);

var href1 = string.IsNullOrEmpty(anaMenuKontrol) ? "" : @url.Content("~/_Docs/SoruCevap/" + anaMenuKontrol + "/_Stil/Index.less?" + @tazele);
var href2 = string.IsNullOrEmpty(solMenuKontrol) ? "" : @url.Content("~/_Docs/SoruCevap/" + anaMenuKontrol + "/" + solMenuKontrol + "/_Stil/Index.less?" + @tazele);
var href3 = string.IsNullOrEmpty(sekmeKontrol) ? "" : @url.Content("~/_Docs/SoruCevap/" + anaMenuKontrol + "/" + solMenuKontrol + "/" + sekmeKontrol + "/_Stil/Index.less?" + @tazele);

if (string.IsNullOrEmpty(href1))
{
    <link href="@href1" class="icerikStil anaMenu" rel="stylesheet" type="text/css" />

    if (string.IsNullOrEmpty(href2))
    {
        <link href="@href2" class="icerikStil solMenu" rel="stylesheet" type="text/css" />

        if (string.IsNullOrEmpty(href3))
        {
            <link href="@href3" class="icerikStil sekme" rel="stylesheet" type="text/css" />
        }
    }

    <link href="#" id="icerikStilPozisyonu" />
}
} 
```

第 32 行在浏览器中产生的错误是：

```
 Compiler Error Message: CS1513: } expected

Source Error:

Line 30:         
Line 31:         <link href="#" id="icerikStilPozisyonu" />
Line 32:     }
Line 33: }
Line 34: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:33:38.660

我解决了剃刀功能的问题，例如：

```
@functions
{
    public static string GetirIcerikStil(string anaMenuKontrol, string solMenuKontrol, string sekmeKontrol, UrlHelper url)
    {
        var d = DateTime.Now;
        var tazele = d.ToLongTimeString();

        anaMenuKontrol = BuyutIlkHarf(anaMenuKontrol);
        solMenuKontrol = BuyutIlkHarf(solMenuKontrol);
        sekmeKontrol = BuyutIlkHarf(sekmeKontrol);

        var href1 = string.IsNullOrEmpty(anaMenuKontrol) ? "" : @url.Content("~/_Docs/SoruCevap/" + anaMenuKontrol + "/_Stil/Index.less?" + @tazele);
        var href2 = string.IsNullOrEmpty(solMenuKontrol) ? "" : @url.Content("~/_Docs/SoruCevap/" + anaMenuKontrol + "/" + solMenuKontrol + "/_Stil/Index.less?" + @tazele);
        var href3 = string.IsNullOrEmpty(sekmeKontrol) ? "" : @url.Content("~/_Docs/SoruCevap/" + anaMenuKontrol + "/" + solMenuKontrol + "/" + sekmeKontrol + "/_Stil/Index.less?" + @tazele);

        var link1 = string.IsNullOrEmpty(href1) ? "" : "<link href='" + href1 + "' class='icerikStil anaMenu' rel='stylesheet' type='text/css' />";
        var link2 = (string.IsNullOrEmpty(href2) || link1 == "") ? "" : "<link href='" + href2 + "' class='icerikStil solMenu' rel='stylesheet' type='text/css' />";
        var link3 = (string.IsNullOrEmpty(href3) || link2 == "") ? "" : "<link href='" + href3 + "' class='icerikStil sekme' rel='stylesheet' type='text/css' />";
        var link4 = "<link href='#' id='icerikStilPozisyonu' />";

        return link1 + link2 + link3 + link4;
    }

    private static string BuyutIlkHarf(string kelime)
    {
        return string.IsNullOrEmpty(kelime) ? "" : char.ToUpper(kelime[0]) + kelime.Substring(1);
    }
} 
```

我从视图中调用了该函数，`@Html.Raw`如下所示：

```
@Html.Raw(@headH.GetirIcerikStil(ViewBag.AnaMenuKisaAdi, ViewBag.SolMenuKisaAdi, ViewBag.SeciliTab, Url)) 
```

# android - 与bringChildToFront相反的android

> ID：12142044
> 
> 赞同：4
> 
> 时间：2012-08-27T12:32:48.440
> 
> 标签：android, android-view

有没有一种与bringChildToFront相反的方法。我想把孩子送回去。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:49:01.317

本机android API中没有这样的方法。但是你可以自己实现它，这里是一个例子：

```
public void moveChildToBack(View child) {
    int index = indexOfChild(child);
    if (index > 0) {
        detachViewFromParent(index);
        attachViewToParent(child, 0, child.getLayoutParams());
    }
} 
```

此方法仅适用于**android.view.ViewGroup**类的子类，因为它使用受保护的方法。

主要思想是将您的子视图移动到子列表中的第一位，因为 ViewGroup 使用子视图的自然顺序来绘制它们，这意味着列表中的第一个视图将具有最低的 Z 顺序，而最后一个视图将具有最高的 Z-命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:50:13.820

试试下面的代码：

```
private void moveToBack(View currentView) {
    ViewGroup vg = ((ViewGroup) currentView.getParent());
    for(int i=0;i<vg.getChildCount();i++){
        View v=vg.getChildAt(i);
        if(!v.equals(currentView))
        {
            vg.bringChildToFront(v);
            break;
        }
    }
} 
```

这个想法是把另一个孩子带到前面。如果你需要把它弄到极点，去掉“break;”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-01T07:23:57.770

```
mLastIndex = ((ViewGroup)getParent()).indexOfChild(this);

before you call bringChildToFront,you can record the mLastIndex,then you call moveToBack to send view back.

private void moveToBack(View currentView) {
    ViewGroup viewGroup = ((ViewGroup) currentView.getParent());
    for(int i = 0; i<viewGroup.getChildCount() - (mLastIndex+1); i++) {
        LogUtils.d(TAG,viewGroup.getChildAt(mLastIndex)+"");
        viewGroup.bringChildToFront(viewGroup.getChildAt(mLastIndex));

    }
} 
```

# ios - 从公式中获取数组

> ID：12142047
> 
> 赞同：0
> 
> 时间：2012-08-27T12:32:50.203
> 
> 标签：ios, nsmutablearray, nsarray

我正在构建一个 ios ipad 应用程序，我在代码中有以下公式来计算一次性金额：

```
 LumpSum = 0;
    for (int n = 1; n<= int_YEARSlasts; n=n+1)
    {
        float x = ((1 + (float_IR/100)) / (1 + (float_ERret/100)));
        int y = (n - 1);
        LumpSum = LumpSum + (NEEDincome * pow(x, y));
    } 
```

这段代码效果很好，给了我想要的一次性金额。

我想要做的是从这个公式中为从 1 到“int_YEARSlasts”的 n 上的每个值获取每个值

我不确定如何做到这一点，任何人都可以指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:45:04.240

我假设你想在每个索引处存储 LumpSum：

```
 LumpSum = 0;
NSMutableArray *mutArrLumpSumValues = [NSMutableArray array];
for (int n = 1; n<= int_YEARSlasts; n=n+1)
{
    float x = ((1 + (float_IR/100)) / (1 + (float_ERret/100)));
    int y = (n - 1);
    LumpSum = LumpSum + (NEEDincome * pow(x, y)); 
    [mutArrLumpSumValues addObject:LumpSum];
}
NSLog(@" mutArrLumpSumValues : %@",mutArrLumpSumValues); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:44:20.257

```
NSMutableArray *getValueArray = [[NSMutableArray alloc] init];
LumpSum = 0;
    for (int n = 1; n<= int_YEARSlasts; n=n+1)
    {
        float x = ((1 + (float_IR/100)) / (1 + (float_ERret/100)));
        int y = (n - 1);
        LumpSum = LumpSum + (NEEDincome * pow(x, y));
        [getValueArray addObject:LumpSum];
    }
 NSLog(@"Get Value Array: %@",getValueArray); 
```

I think it will be helpful to you.

# xmpp - openfire 是否支持用户/联系人阻止？

> ID：12142048
> 
> 赞同：4
> 
> 时间：2012-08-27T12:32:50.903
> 
> 标签：xmpp, openfire

openfire 是否支持用户/联系人阻止？

我正在创建一个基于 XMPP 的聊天。现在我希望我的用户有一个工具，他们可以通过它主动阻止某个人与他们聊天。

我知道 XMPP 已经定义了通信阻止的扩展（在隐私列表 [XEP-0016] 中定义），以及隐私列表的精简接口（在简单通信阻止 [XEP-0191] 中定义）。

但是在实现这些扩展时，阻止用户的服务器请求会给我一个响应

我的问题是openfire（我正在使用Openfire 3.7.1）是否支持这些扩展如果是的话我应该去哪里并启用插件如果不是可用的替代方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T07:37:01.387

Openfire 支持隐私列表 XEP（并且已经很久了，包括您所指的 3.7.1.release）。Spark 客户端（IgniteRealtime.org 上的另一个项目）可以使用它。该客户端还显示了一个调试窗口，您可以在其中看到交换了哪些相关的 XMPP 节以设置列表。

# cocoa - Cocoa View 回调中的指针值是否稳定？

> ID：12142049
> 
> 赞同：1
> 
> 时间：2012-08-27T12:33:00.840
> 
> 标签：cocoa

我正在实施一个`NSOutlineViewDataSource`（但它也可能是一个`NSTableViewDataSource`或其他任何东西）。该`outlineView: objectValueForTableColumn: byItem:`方法被调用了很多（显然每行一次），我想知道正在请求哪一列。我可以做这个：

```
if ([[tableColumn identifier] isEqualToString:@"myCol"]) 
```

但感觉非常昂贵，每行每列一次。

我可以存储一个指针`NSTableColumn *`并比较指针值吗？比较这些会快得多。或者指针是否可能在应用程序的持续时间内发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:57:26.823

an 的稳定性与 a`NSTableColumn *`的稳定性相同`NSTextField *`。

最有可能的是，`NSOutlineViewDataSource`为您服务的对象`NSOutlineView`的生命周期与`NSTableColumn`.

一个典型的模式是让一个`NSWindowController`子类实例作为大纲视图的数据源，其中大纲视图位于一个 xib 中，该 xib 将窗口控制器作为文件的所有者。表列将在窗口控制器初始化后不久创建（并且在 -- 拦截它的点之后`-loadWindow`，`NSWindowController`在子类中覆盖`-loadWindow`以`NSWindowController`首先调用`[super loadWindow]`，然后使用设置的不再`nil`指针Interface Builder) 并且会在窗口控制器被释放后很快被销毁。从`-loadWindow`被调用的时间到`-dealloc`在窗口控制器上被调用的时间，相同的`NSTableColumns`将被使用（当然，前提是您自己的代码中没有任何东西与它们混淆）。

唯一的潜在危险是大纲视图将在数据源被释放后调用它的数据源。为避免这种困难，在释放窗口控制器时将大纲视图的数据源设置为 nil。

# php - 我可以将整个代码文件夹复制粘贴到 SVN 存储库中吗

> ID：12142053
> 
> 赞同：0
> 
> 时间：2012-08-27T12:33:09.623
> 
> 标签：php, windows, linux, svn

我正在建立一个网站，我的 public_html 在 SVN 下。现在我对SVN不太了解。

这个周末我把整个网站复制到我的windows电脑上，我对网站做了一些改动。

我在 SRC 目录下进行了更改。

现在我可以将整个文件夹复制粘贴到主 webiste SRC 文件夹中。由于该文件夹在我的 Windows XP 上共享，我可以替换它。或者我可以删除旧的并用这个新的替换。

我只是不想破坏 SVN 。哪种方法是安全的，这样 diff 文件夹上的其他编码器就不会受到影响

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:33:17.630

只要您不触摸 .svn 文件夹就可以了。复制另一个同名文件就像编辑它一样。复制文件后，您可以提交更改。

**但是：**如果其他人可能进行了更改，请确保在从存储库更新之前复制您的文件（然后更新将尝试与您的更改合并）！如果您将文件复制到已经更新的文件上，您将覆盖其他人的更改 - 有效地撤消它们（但您不会注意到，因为您可以提交）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:38:42.587

最好的方法是`commit / ci`更改​​您的更改，而不是删除存储库中的更改。

下次您 MOVE 文件时，请使用`SVN MOVE`command 。另外，您可能会考虑更新到 Git？

这是 SVN 命令的链接，供您开始使用 :)

[http://www.linuxfromscratch.org/blfs/edguide/chapter03.html#ch03-introduction](http://www.linuxfromscratch.org/blfs/edguide/chapter03.html#ch03-introduction)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:41:22.520

如果您复制和粘贴，您应该删除 public_html 和子目录中的所有 .svn 文件和文件夹。

...或者您可以在服务器上安装 SVN 客户端并运行“svn update”（您可能希望限制 .svn 文件和文件夹被公众访问）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T14:42:11.140

“SVN 方式”是从您的 Windows 计算机提交 ( `svn commit`) *SRC*目录，然后在服务器 *public_html* 目录内的*SRC*`svn update`目录中执行更新 ( ) 。

 *当您复制*SRC*目录时，您克隆了工作副本。您可以将它们都用作正常的工作副本并使用存储库来同步它们。*

# c - ANSI C 中的自赋值

> ID：12142055
> 
> 赞同：4
> 
> 时间：2012-08-27T12:33:11.857
> 
> 标签：c, embedded, ansi, iar

我目前正在开发一个嵌入式 C 项目，并且我“继承”了一些包含以下语句的旧代码：

```
rxStruct = rxStruct; 
```

其中 rxStruct 是一个变量。

这样的陈述有什么用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T12:57:25.897

如果没有进一步的信息，这种语句的一种用途是防止未使用的参数编译器警告，如果`rxStruct`作为参数传入，然后不使用。

# ruby-on-rails - 针对当前 URL 的 ROR if 语句

> ID：12142056
> 
> 赞同：3
> 
> 时间：2012-08-27T12:33:15.163
> 
> 标签：ruby-on-rails, if-statement, ruby-on-rails-3.2

我相信这真的很简单，所以为这个幼稚的问题道歉。

我正在尝试测试我的当前页面是否为`'jobs#index'`. 如果是我有一些额外的 CSS 和内容要包含在页面中，如果没有，那么我希望它在没有这些额外内容的情况下加载页面。

我相信它应该是这样的，但我似乎无法做到这一点。

```
 <% if path == 'jobs#index' %>
  <div class="slidingDiv">
    Fill this space with really interesting content. 
  </div>
  <div class="show_hide">
    FILTERS
  </div>
 <% else %>
 <% end %> 
```

任何建议真的将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:23:13.027

rails中有内置[`current_page?`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-current_page-3F#method-i-current_page-3F)方法。

```
if current_page?(:controller => 'jobs', :action => 'index') 
```

此外，您可以执行以下操作：

```
if controller_name == 'jobs' && action_name == 'index' 
```

顺便说一句，您可以`<% else %>`放入上面的示例代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T12:37:02.397

```
<% if params[:action] == "index" && params[:controller] == "jobs" %> 
```

不过，我会把它放在一个辅助方法中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T12:50:01.220

I would create a helper method like below. You can pass more paths this way.

in view

```
<% if is_path?("/hello/world", root_path) %> 
```

in helper

```
def is_path?(*paths)
  paths.include?(request.path)
end 
```

note: Try to use named helpers for routes

> jobs#index equals to jobs_path

# django - 在 django db + 基于缓存的会话上使用 django 签名的 cookie 会话的性能比较？

> ID：12142058
> 
> 赞同：12
> 
> 时间：2012-08-27T12:33:22.763
> 
> 标签：django, session, django-sessions

Django 1.4 提供了几种维护[django 会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)的方法：

我对使用的看法：

i) 仅缓存：不太可取，用户会话可能会从内存缓存中清除。

ii) Db + cache ( `cached_db`)：优选、简单且安全的解决方案。

iii) 签名的 cookie 会话：最好，没有数据库命中。

假设会话数据非常小，即在 cookie 中存储它没有问题。在数据库 + 内存缓存驱动的会话引擎上使用签名 cookie 是否有任何性能优势？对于 N 个并发新用户，将保存 N 个数据库命中的顺序。这将减少数据库服务器每单位时间必须处理的总查询数。

**更新**：我们发现 redis 或 aerospike 是 django 真正强大且高吞吐量的会话后端。我们`redis`用作会话后端

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:24:59.643

> 您必须能够处理 N 个并发查询（N - 并发新用户）。

**您只能在非常大的范围内**看到差异。你必须是悲观主义者（服务器宕机、备份不良、amazon bancrupcy），并且你的数据库必须能够在高峰时间处理所有用户。

*   使用 cookie 会话的 10 000 000 个用户将花费您 0 美元的额外费用，iframe 和手机问题
*   10 000 000 个具有缓存会话的用户每天将花费您数百或不到数百美元，在重启的情况下会丢失会话
*   使用 cache_db 会话的 10 000 000 个用户每天将花费您数千美元（任何能够一次处理 1 000 000 次点击的持久存储，10% 的用户）

我使用 redis 后端（定期保存到磁盘），可以切换到 memcached 服务集群。

[http://www.icis.com/blogs/icis-chemicals-confidential/files/2011/10/19/goodcheapfast.jpg](http://www.icis.com/blogs/icis-chemicals-confidential/files/2011/10/19/goodcheapfast.jpg)

# java - 使用 Java 和 AsyncScalr 缩放大图像

> ID：12142069
> 
> 赞同：2
> 
> 时间：2012-08-27T12:33:56.550
> 
> 标签：java, image, image-processing, image-scaling, imgscalr

我在 Servlet 中使用 AsyncScalr 来缩小一些大图像（约 10-15 兆字节），实际调整大小的过程大约需要 40 毫秒，这并不多。过度杀伤来自从本地存储中读取图像作为 BufferedImage。所以时间大多是这样的：

读取图像文件：1630ms ！！调整图像大小：41ms 写入图像：40ms

下面是我正在使用的代码，有没有更优化的方法来做到这一点？

```
 final FileImageInputStream fileImageInputStream = new FileImageInputStream(file);
        BufferedImage bufferedImage = ImageIO.read(fileImageInputStream);

        // resize file
        Future<BufferedImage> result = AsyncScalr.resize(bufferedImage, Method.SPEED, width, OP_ANTIALIAS, OP_BRIGHTER);
        try {
            bufferedImage = result.get();
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
        catch (ExecutionException e) {
            e.printStackTrace();
        }

        // Write the image
        ImageIO.write(bufferedImage, imageOutput, outputStream); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:13:54.850

回答我的问题，使用 java.awt.Toolkit 加载图像已经解决了这个问题。

# java - 是否有必要使用 JPA 和 MySQL 获取实体才能引用它？

> ID：12142070
> 
> 赞同：5
> 
> 时间：2012-08-27T12:33:56.737
> 
> 标签：java, mysql, jpa, foreign-keys

我有一个应用程序，它创建了许多引用其他两个实体的行，即行中有两个实现多对一关系的外键引用。

这些是被引用的两个实体：

```
CREATE TABLE a (
    `id` INT NOT NULL auto_increment,
    -- lots of other attributes,
    PRIMARY KEY (id)
)

CREATE TABLE b (
    `id` INT NOT NULL auto_increment,
    -- lots of other attributes,
    PRIMARY KEY (id)
) 
```

这是引用 a 和 b 的实体：

```
CREATE TABLE x (
    `id` INT NOT NULL auto_increment,
    `f_a` INT NOT NULL,
    `f_b` INT NOT NULL,
    CONSTRAINT `FK_a` FOREIGN KEY (`f_a`) REFERENCES `a` (`id`),
    CONSTRAINT `FK_b` FOREIGN KEY (`f_b`) REFERENCES `b` (`id`),
) 
```

a、b 和 x 通过 EclipseLink 使用 JPA 映射到 A、B 和 X 类，这是非常基本的，没有什么花哨的。

当我在 Java 中创建一个 X 时，我执行以下操作（注意 a 和 b 已经存在，我只知道它们的 ID - 它们是从遗留应用程序提供的）：

```
A a = entityManager.find(A.class, knownIdForA);
B b = entityManager.find(B.class, knownIdForB);

X x = new X();
x.setA(a);
x.setB(b);

entityManager.persist(x); 
```

问题是我必须插入大约 200,000 个实体，这相当多。As 和 B 的数量分别大约是 3 倍，所以我必须获取 200,000 次 A 和 B，很可能是 200,000 个不同的 A 和 B，所以我对缓存无能为力。

我的问题是：真的有必要获取整个实体吗？有没有办法降低这些成本？或者有什么方法可以手动设置外键引用（归结为一个整数）而不会失去 JPA 的好处（即不必编写我自己的查询）？

问题的另一种表述：如何使用 JPA 完成以下任务？

```
 INSERT INTO x (`f_a`, `f_b`) VALUES (13, 17); 
```

其中 f_a 和 f_b 是外键？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T13:10:03.550

您可以使用 EntityManager 的`getReference()`方法获取“引用”实例，而不是使用 find() 加载实体。这些引用是延迟获取的，因此在您的情况下，根本不需要获取它们。

您的代码看起来类似：

```
A a = entityManager.getReference(A.class, knownIdForA);
B b = entityManager.getReference(B.class, knownIdForB);

X x = new X();
x.setA(a);
x.setB(b);

entityManager.persist(x); 
```

但只有persist() 调用才能访问您的数据库。

# html - 当我移动鼠标时，CSS菜单消失得太快

> ID：12142071
> 
> 赞同：3
> 
> 时间：2012-08-27T12:34:04.223
> 
> 标签：html, css

这是我的问题[http://jsfiddle.net/yf4W8/4/](http://jsfiddle.net/yf4W8/4/)

当我尝试访问菜单项时，菜单消失得太快。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:39:15.007

固定的！
[http://jsfiddle.net/yf4W8/14/](http://jsfiddle.net/yf4W8/14/)

我只是将它包装在另一个 div 中，如果您将鼠标悬停，菜单将出现。我的包装器也包装了菜单，所以如果你离开`<a>`你仍然在包装器上，保持菜单可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T12:38:49.477

这是因为您悬停的链接与将显示的项目之间存在间隙。

消除间隙，它将起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T12:41:42.113

那是因为您没有正确使用 CSS 来实现此效果。如果鼠标从标题移动到列表，您想要的是菜单保持显示，否则它应该消失。为此，您可以使用 Javascript。就像是：

```
$("#heading").mouseenter(function(e) {
  if ($(e.ralatedTraget).prop('id') != 'menu') {
   $("#menu").stop().fadeIn(500);
   }
});
$("#heading").mouseleave(function(e) {
   if ($(e.ralatedTraget).prop('id') != 'menu') {
     $("#menu").stop().fadeOut(500);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:45:21.253

这是你的 CSS 的结构。我已经构建了一个简单的下拉列表，您应该能够使用或复制并实现您所拥有的。

[提琴手示例](http://jsfiddle.net/rhoenig/kE4yb/)

# java - 如何一起使用listActivity和mapActivity

> ID：12142073
> 
> 赞同：0
> 
> 时间：2012-08-27T12:34:06.350
> 
> 标签：java, android

我使用`MapActivity`和`ListActivity`一起在地图上显示商店位置。商店来自列表。我用过`setListAdapter(adapter)`，但不支持。我也使用`ListView`which give`setAdapter(adpt)`但我得到`Null pointer exception`.

这是我的代码：

```
public void search(View view) {
    // || is the concatenation operation in SQLite
    listView=(ListView) findViewById(R.id.list);

    try{    
        cursor = db.rawQuery("SELECT _id, store FROM storeInfo WHERE address LIKE         ?", 
    new String[]{"%" +   searchText.getText().toString() + "%"});
    adapter = new SimpleCursorAdapter(
            this, 
            R.layout.store_list_item, 
            cursor, 
            new String[] {"store"}, 
            new int[] {R.id.store});

        listView.setAdapter(adapter);

    }catch(Exception e){
        System.out.println("Exception::"+e);
    }

    public void onItemClick(AdapterView parent, View view, int position, long id) {
        Intent intent = new Intent(this, StoreDetails.class);
        Cursor cursor = (Cursor) adapter.getItem(position);
        //Cursor cursor = (Cursor) listView.getAdapter().getItem(position);
        intent.putExtra("STORE_ID", cursor.getInt(cursor.getColumnIndex("_id")));
        startActivity(intent);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:44:10.990

This isn't the complete code... And I'm a little unsure of the flow of your app. Are you using a ListActivity where a user selects an item and then you open a MapActivity? You can't have a ListActivity and a MapActivity in one. You'll have to add either ListView or MapView into the appropriate activity. If your using a MapActivity you'll still need to call `setContentView()` and set your layout (which contains your MapView and ListView).

Depending on what you need to do, you could also use a ListFragment and define all of the logic and functionality required for your list in there and just add it to your MapActivity.

# python - StringListProperty vs StringProperty（重复=真）

> ID：12142074
> 
> 赞同：2
> 
> 时间：2012-08-27T12:34:11.853
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

它们之间的主要区别是什么？你也能谈谈结构化属性吗？它们都保存了多个值，但我无法理解其中的区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T13:57:50.163

[db.StringListProperty()](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses)在传统的[Datastore API](https://developers.google.com/appengine/docs/python/datastore/)中用于存储多个 String 值，而[ndb.StringProperty(repeated=True)](https://developers.google.com/appengine/docs/python/ndb/properties)是相同的，但使用的是最新的 API，称为[NDB](https://developers.google.com/appengine/docs/python/ndb/)。

ndb 中引入的主要新特性是：自动缓存、复杂查询和原子事务。

如果您以前有使用旧数据库的经验，我建议您阅读文档并检查此[备忘单。](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/edit)

# java - h2db 按字段排序

> ID：12142079
> 
> 赞同：3
> 
> 时间：2012-08-27T12:34:35.193
> 
> 标签：java, h2

我有一个来自 Lucene 搜索引擎的 ID 列表，并希望以特定顺序（分数）从数据库中选择这些 ID。

我可以在 SQL 查询中这样做吗？似乎 h2 不知道 ORDER BY FIELD(id, <list,of,ids>) 函数 - 未找到函数“FIELD”。

谢谢你。

```
SELECT * FROM table WHERE id IN (3,1,2,4) ORDER BY FIELD(id, 3,1,2,4); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:40:12.110

这是你需要的吗？

```
SELECT * FROM table WHERE id IN (3,1,2,4) ORDER BY decode(id,3,1,1,2,2,3,4,4,5); 
```

# xcode - Xcode 运行脚本警告和错误消息被截断

> ID：12142083
> 
> 赞同：5
> 
> 时间：2012-08-27T12:34:42.350
> 
> 标签：xcode, build

我在运行脚本中遇到了一个有趣的 Xcode 行为，如果它们在消息末尾有方括号和文本，它会截断错误和警告消息。

示例运行脚本：

```
echo "warning: before [in brackets]"
echo "warning: before in brackets]"
echo "warning: before [in brackets"
echo "warning: before [in brackets] after"
echo "error: before [in brackets]"
echo "error: before in brackets]"
echo "error: before [in brackets"
echo "error: before [in brackets] after"
exit 1 
```

构建日志截图：

![构建日志截图](../Images/7d7ca8679d9205c48719cb184aabfb8b.png)

这样做有充分的理由吗？是否可以以某种方式引用或转义该消息？我尝试了一堆不同的报价和转义，但没有成功。

我只用 Xcode 4.4.1 测试过。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:01:19.520

我刚刚注意到 clang 输出错误消息的格式如下：

```
/path:1:1: warning: incomplete implementation [-Wincomplete-implementation] 
```

这表明它`[]`用于以某种方式对警告和错误消息进行分类，但目前无法确定它们是否用于 IDE 中的任何内容。

# android - HTML5 音频标签在 Android 中不起作用

> ID：12142084
> 
> 赞同：8
> 
> 时间：2012-08-27T12:34:43.523
> 
> 标签：android, cordova

我为 android ics 创建了一个示例电话间隙应用程序。index.html 有一个这样的音频标签。

```
<audio id="player1" controls preload><source src="media/track1.mp3" type="audio/mp3" /></audio> 
```

我根本无法播放音频。我到处都看到堆栈溢出帖子，提到音频标签在 froyo 发布后会正常工作。但是，我正在姜胡子和 ICS 中对其进行测试，但它在任何地方都不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T15:32:02.007

由于编解码器许可问题和操作系统实施/支持，不同设备/操作系统之间的 HTML5 音频支持不一致。如果您只是播放 MP3 文件，您可以使用 PhoneGap 的[Media](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html#Media)类可靠地处理这些文件，它将在所有平台上提供一致且可靠的音频编程。

如果您希望能够预加载音频并拥有更高级的场景，如复音或分层（如视频游戏效果），您可以使用[LowLatencyAudio](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LowLatencyAudio) PhoneGap 原生插件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T22:15:40.420

超级迟到但这`type="audio/mp3"`是错误的 - 它应该是`type="audio/mpeg"`

话虽如此，Android 在播放 HTML5 音频方面仍然很糟糕 - 您需要`src`在播放声音之前重置属性（或者它们只会播放一次）并且它不能容忍多种文件类型（其他浏览器需要）。他们也不支持 WebAudioAPI

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T12:39:08.937

根据[html5test.com](http://html5test.com/compare/browser/android40.html) Android 4 仅支持音频标签中的 mp3。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-03T15:07:55.913

希望我早点回答一些发现。

以下似乎对我有用。Android 似乎对哪个来源先出现非常敏感。所以我在第三行有“mp3”源并将它向上移动，所以它现在可以肯定地工作了。controls=controls 是因为没有它 IE 11 似乎无法在普通 PC 上运行。我对此事的看法。必须在 ogg 中制作副本以便 Firefox 识别它。

```
<audio controls="controls">
<source src="/somefile.mp3" type="audio/mpeg"></source>
<source src="/somefile.ogg" type="audio/ogg">   
Your browser does not support the audio element.
</source></audio> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T14:05:07.210

看来您的 mp3 路径不正确。如果此文件在 SD 卡上，则路径将类似于：

```
file:///sdcard/media/track1.mp3 
```

# web-services - 如何在 Phonegap 中使用 magento 站点

> ID：12142085
> 
> 赞同：0
> 
> 时间：2012-08-27T12:34:45.427
> 
> 标签：web-services, magento, cordova, sencha-touch

我是phonegap的新手。是否可以在 Phonegap 和 Magento 之间创建链接我想使用 phonegap 显示我的购物网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:31:32.293

Long story short: **NO**. Besides many million reasons why nobody did it so far, think that iOS and Android don't run PHP by default, so there is no way to reuse PHP code. You need to build a layer in Magento that will provide data through API(s) and a totally new Phonegap codebase on top of that. Good luck! :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T16:27:32.593

这可能是一个老问题，但我仍然想给我 2 美分。也许以后对其他人有用。

我认为这应该很容易实现。

最简单的方法是为您的 magento 商店创建响应式设计，然后在 phonegap / cordova web 容器中运行该网站。

您还可以将此方法与编写通过 API 连接的基于 javascript 和 html5 的客户端的更简洁的方法相结合。

# regex - shell 测试运算符正则表达式

> ID：12142092
> 
> 赞同：4
> 
> 时间：2012-08-27T12:35:27.627
> 
> 标签：regex, shell

```
#!/bin/bash
# This file will fix the cygwin vs linux paths and load programmer's notepad under windows.
# mail : <sandundhammikaperera@gmail.com> 
# invokes the GNU GPL, all rights are granted.

# check first parameter is non empty.
# if empty then give a error message and exit.
file=${1:?"Usage: pn filename"};

if [[ "$file" == /*/* ]] ;then
  #if long directory name.
# :FAILTHROUGH:
  echo "$0: Executing pn.exe $file" 

else 
  file="$(pwd)/$file";
fi

#check whether the filename starts with / if so replace it with appropriate prefix #
prefix="C:/cygwin/";

#check for the partterns starting with "/" #
echo $var | grep "^/*$"
if [[ "$?" -eq "0" ]] ;then
  # check again whether parttern starts with /cygdrive/[a-z]/ parttern #
  if [[ $file == /cygdrive/[a-z]/* ]] ; then 
    file=${file#/cygdrive/[a-z]/};
    file="C:/"$file;
  else
    file="$prefix""$file";  
  fi 
fi

#check for the appropriate file permissions #
# :TODO: 

echo $file
exec "/cygdrive/c/Program Files (x86)/Programmer's Notepad/pn.exe"  $file 
```

正如我在我的程序中在cygwin和windows之间转换路径名并加载pn.exe [windows中的程序员记事本]一样。所以我的问题是，

1.  “[[”或“test”运算符内置了正则表达式。（以及我在上面的程序中使用它们）。但是如果我改变了，为什么他们不在这里工作，

    ```
    echo $var | grep "^/*$"
    if [[ "$?" -eq "0" ]] ;then 
    ```

    对此，

    ```
    if [[ "$file" == ^/*$ ]] ;then 
    ```

    这是什么原因？有什么解决方法吗？我已经尝试过第二种方法`[[ "$file" == ^/*$ ]]`，但没有奏效。然后，简单的谷歌搜索给我带来了这里：[http ://unix.com/shell-programming](http://www.unix.com/shell-programming-scripting/66216-compare-variable-against-regular-expression.html)

2.  如何找到有关 [[ 运算符或“测试”命令的所有文档？我用过 `man test`但是:(。如果有的话，哪个文件指定了它对正则表达式使用的限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:43:15.210

首先，`grep "^/*$"`将仅匹配仅包含斜杠的路径，例如“/”、“///”、“////”。您可以使用`grep "^/"`以匹配以斜杠开头的路径。如果你想使用 bash 正则表达式：

```
var="/some"
#echo $var | grep "^/"
if [[ "$var" =~ ^/ ]] ;then
  echo "yes"
fi 
```

# xml - MSN天气API条件列表？

> ID：12142094
> 
> 赞同：11
> 
> 时间：2012-08-27T12:35:40.047
> 
> 标签：xml, api, weather, weather-api, msn

微软有一个与谷歌非常相似的天气 API（现在看来完全死了）。我已将我的一个应用程序转换为他们的提要，但我无法找到所有可能的天气条件的列表。

这对 Google 的天气 API 有很好的记录，但我找不到 MSN 天气 API 的条件列表。

FWIW，使用 MSN 取回数据的示例 URL 是：

~~[http://weather.service.msn.com/data.aspx?weadegreetype=F&culture=en-US&weasearchstr=Chicago,IL](http://weather.service.msn.com/data.aspx?weadegreetype=F&culture=en-US&weasearchstr=Chicago,IL)~~（服务不再可用（2016 年 1 月））

任何人都可以阐明可能的条件吗？我需要它们，以便我可以将条件文本转换为图标。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T18:27:59.150

我决定走一条稍微不同的路线，并根据 XML 中提供的图标（**skycode**和**skycodeday**）找出条件。

这是我想出的清单。希望它对其他人从 Google 的天气 API 迁移有所帮助：

*   0, 1 ,2, 3 ,4, 17, 35 - 雷暴
*   5 - 雨/雪混合
*   6 - 雨夹雪/雪混合
*   7 - 雨/雪/雨夹雪混合
*   8,9 - 冰冷
*   10 - 雨/雨夹雪混合
*   11 - 小雨
*   12 - 雨
*   13 - 小雪
*   14,16,42,43 - 雪
*   15 - 暴风雪
*   18,40 - 阵雨
*   19 - 灰尘
*   20 - 雾
*   21 - 阴霾
*   22 - 烟雾
*   23,24 - 有风
*   25 - 寒冷
*   26 - 多云
*   27,29,33 - 部分多云（夜间）
*   28,30,34 - 部分多云
*   31 - 清除（夜）
*   32 - 清除
*   36 - 热
*   37,38 - 分散的雷暴
*   39 - 零星阵雨
*   41 - 零星的阵雪
*   44 - 不适用
*   45 - 零星阵雨（夜间）
*   46 - 零星阵雪（夜间）
*   47 - 分散的雷暴（夜）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T03:26:58.397

这是我的功能，可以轻松地将您的 Google API 代码转换为 MSN API：

```
function skycode2image ($skycode)
{    

$daynight = "na";

$skycodes = array ( 
0 => 'thunderstorm', 
1 => 'thunderstorm',
2 => 'thunderstorm',
3 => 'thunderstorm',
4 => 'thunderstorm',
5 => 'rain_snow',
6 => 'sleet',
7 => 'rain_snow',
8 => 'icy',
9 => 'icy',  
10 => 'rain_snow', 
11 => 'showers',
12 => 'rain',
13 => 'flurries',
14 => 'snow', 
15 => 'snow', 
16 => 'snow', 
17 => 'thunderstorm',
18 => 'showers',
19 => 'dust',
20 => 'fog',
21 => 'haze',
22 => 'haze',
23 => 'windy',
24 => 'windy',
25 => 'icy',
26 => 'cloudy',
27 => 'mostly_cloudy',
28 => 'mostly_cloudy',
29 => 'partly_cloudy', 
30 => 'partly_cloudy',
31 => 'sunny',
32 => 'sunny',
33 => 'mostly_sunny',
34 => 'mostly_sunny',
35 => 'thunderstorm',
36 => 'hot',
37 => 'chance_of_tstorm',
38 => 'chance_of_tstorm', 
39 => 'chance_of_rain',
40 => 'showers',
41 - 'chance_of_snow',  
42 => 'snow',
43 => 'snow',
44 => 'na',
45 => 'chance_of_rain',
46 => 'chance_of_snow',
47 => 'chance_of_tstorm');

$condition =  $skycodes[$skycode];

if (in_array($skycode,array(27,29,31,33,31,45,46,47))) $daynight = 'night';
if (in_array($skycode,array(28,30,32,34,36,37,38,39,41))) $daynight = 'day';   

return array($condition,$daynight);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-07T23:36:15.247

每当微软受到质疑时，似乎都会出现很多错误信息。我今天正在测试 MSN Weather API；它确实回来了；并且每小时返回天气数据。

我刚才做了以下[可能是非标准的]查询：“ [http://weather.service.msn.com/data.aspx?weasearchstr=ny,NY&culture=en-US&weadegreetype=C&src=msn](http://weather.service.msn.com/data.aspx?weasearchstr=ny,NY&culture=en-US&weadegreetype=C&src=msn) ”

它确实返回了所要求的内容：

```
<weatherdata xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><weather weatherlocationcode="wc:USNY0309" weatherlocationname="New York, NY" url="http://a.msn.com/54/en-US/ct40.782,-73.832?ctsrc=msn" imagerelativeurl="http://blob.weather.microsoft.com/static/weather4/en-us/" degreetype="C" provider="Foreca" attribution="http://www.foreca.com/" attribution2="Foreca" lat="40.782" long="-73.832" timezone="-5" alert="" entityid="10109777" encodedlocationname="New+York%2C+NY"><current temperature="4" skycode="29" skytext="Partly Cloudy" date="2016-02-07" observationtime="18:00:00" observationpoint="New York, NY" feelslike="2" humidity="62" winddisplay="9 km/h East" day="Sunday" shortday="Sun" windspeed="9 km/h" /><forecast low="-3" high="5" skycodeday="31" skytextday="Clear" date="2016-02-06" day="Saturday" shortday="Sat" precip="" /><forecast low="1" high="7" skycodeday="28" skytextday="Mostly Cloudy" date="2016-02-07" day="Sunday" shortday="Sun" precip="10" /><forecast low="-3" high="3" skycodeday="16" skytextday="Snow" date="2016-02-08" day="Monday" shortday="Mon" precip="90" /><forecast low="0" high="1" skycodeday="30" skytextday="Partly Sunny" date="2016-02-09" day="Tuesday" shortday="Tue" precip="90" /><forecast low="-2" high="5" skycodeday="28" skytextday="Mostly Cloudy" date="2016-02-10" day="Wednesday" shortday="Wed" precip="50" /><toolbar timewindow="60" minversion="1.0.1965.0" /></weather><weather weatherlocationcode="wc:USNY0996" weatherlocationname="New York, NY" url="http://a.msn.com/54/en-US/ct40.714,-74.006?ctsrc=msn" imagerelativeurl="http://blob.weather.microsoft.com/static/weather4/en-us/" degreetype="C" provider="Foreca" attribution="http://www.foreca.com/" attribution2="Foreca" lat="40.714" long="-74.006" timezone="-5" alert="" entityid="23164" encodedlocationname="New+York%2C+NY"><current temperature="5" skycode="29" skytext="Partly Cloudy" date="2016-02-07" observationtime="18:00:00" observationpoint="New York, NY" feelslike="4" humidity="58" winddisplay="7 km/h East" day="Sunday" shortday="Sun" windspeed="7 km/h" /><forecast low="-7" high="4" skycodeday="31" skytextday="Clear" date="2016-02-06" day="Saturday" shortday="Sat" precip="" /><forecast low="1" high="7" skycodeday="28" skytextday="Mostly Cloudy" date="2016-02-07" day="Sunday" shortday="Sun" precip="10" /><forecast low="-2" high="3" skycodeday="16" skytextday="Snow" date="2016-02-08" day="Monday" shortday="Mon" precip="80" /><forecast low="-1" high="1" skycodeday="30" skytextday="Partly Sunny" date="2016-02-09" day="Tuesday" shortday="Tue" precip="80" /><forecast low="-3" high="5" skycodeday="30" skytextday="Partly Sunny" date="2016-02-10" day="Wednesday" shortday="Wed" precip="50" /><toolbar timewindow="60" minversion="1.0.1965.0" /></weather></weatherdata> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-03T00:24:52.890

现在是 2016 年 4 月，看起来 Microsoft 天气数据仍在通过：[华盛顿州天气数据](http://weather.service.msn.com/data.aspx?src=vista&wealocations=wc:USWA0367)（链接与 OP 帖子中显示的不同——现已停止）。

链接中的“wealocations”参数对于每个天气采集点都不同；例如，“USWA0367”代表华盛顿州雷德蒙德。[您可以从这里](https://weather.codes/united-states-of-america)获取您的天气位置代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-02T19:38:21.237

我们写信通知您，Microsoft Weather API 将不再可供下载，并将于 2015 年 4 月 15 日停用，这意味着它将不再提供天气数据。因此，请从您当前使用它的任何产品或应用程序中删除 Microsoft Weather API。

如果您有兴趣获得备用天气 API，以下是可能能够满足您需求的外部提供商列表：

```
http://api.accuweather.com/ 
http://www.wunderground.com/weather/api/d/pricing.html 
https://developer.forecast.io/ 
```

免责声明：Microsoft 和 Microsoft Weather 与上述任何公司均无任何关联或关联。

谢谢微软天气团队

# c# - WPF 多线程和 ICollectionChanged

> ID：12142096
> 
> 赞同：0
> 
> 时间：2012-08-27T12:35:48.170
> 
> 标签：c#, .net, wpf, vb.net, silverlight

我目前正在为一个项目使用 .NET 3.5，我需要实现一个静态队列，以获取它的项目由一个后台线程入队并由另一个后台线程出队。由于 .NET 3.5 中没有 ObservableQueue 或类似的东西，我尝试派生我自己的队列并实现 INotifyCollectionChanged，因为我的 UI 应该向用户显示队列的内容。

但是当我尝试运行它时，第一个后台工作人员将一个项目排入队列，CollectionChanged 被引发，然后我最终得到一个异常，例如

> c# 调用线程无法访问此对象，因为不同的线程拥有它

我的业务对象（队列中的那些东西）都实现了 INotifyPropertyChanged，并且使它们出队的后台工作人员也更改了一些属性，因此同一个线程也调用 PropertyChanged 和 CollectionChanged。奇怪的是，当 PropertyChanged 被提升时我没有收到任何错误，但是 CollectionChanged 崩溃了......有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:28:28.877

首先，我应该从一开始就扩展 ObservableCollection 以实现 INotifyCollectionChanged 集合。对于多线程集合，请参阅此类，这可能对您有所帮助（仅适用于多线程，如果您想添加需要实现它的队列行为）

公共类 ThreadSafeObservableCollection : ObservableCollection { 私有 SynchronizationContext SynchronizationContext;

```
 public ThreadSafeObservableCollection()
    {
        SynchronizationContext = SynchronizationContext.Current;

        // current synchronization context will be null if we're not in UI Thread
        if (SynchronizationContext == null)
            throw new InvalidOperationException("This collection must be instantiated from UI Thread, if not, you have to pass SynchronizationContext to con                                structor.");
    }

    public ThreadSafeObservableCollection(SynchronizationContext synchronizationContext)
    {
        if (synchronizationContext == null)
            throw new ArgumentNullException("synchronizationContext");

        this.SynchronizationContext = synchronizationContext;
    }

    protected override void ClearItems()
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.ClearItems()), null);
    }

    protected override void InsertItem(int index, T item)
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.InsertItem(index, item)), null);
    }

    protected override void RemoveItem(int index)
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.RemoveItem(index)), null);
    }

    protected override void SetItem(int index, T item)
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.SetItem(index, item)), null);
    }

    protected override void MoveItem(int oldIndex, int newIndex)
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.MoveItem(oldIndex, newIndex)), null);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:02:30.613

使用这样的东西：

```
if (System.Windows.Application.Current.Dispatcher.CheckAccess())
        {
            Messages.Add(message);
        }
        else
        {
            System.Windows.Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal,
                new Action(() => Messages.Add(message)));
        } 
```

您只能从 GUI-Thread 访问，因为 GUI 可能绑定到集合。并且许多使用 gui 的线程并不是一件好事，因为结果你会经常收到错误。

所以想想：为什么你不能做这样的事情：listBox1.Items.Add(...) 从另一个线程。现在您知道为什么不能从另一个线程访问列表了。

（如果你真的不知道为什么你可以为它做类似 listBox1.Items.Add(...) google ......你会发现很多文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:03:47.760

当您尝试从非调度程序（即非 GUI）线程与 GUI 交互时，您会遇到这样的异常。在您的情况下，我假设您只是在引发 CollectionChanged 事件而不检查它是否是 GUI 线程。为了解决这个问题，正如 chrisendymion 所写，我们应该`Dispatcher`. 我在这里看到两个可能的选择：

1) 对您的自定义队列（添加/删除）的每次调用都是在 Dispatcher ( `Dispatcher.Invoke`)上进行的

2) 将引发 CollectionChanged 事件的代码包装到相同的`Dispatcher.Invoke`.

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:41:00.120

当您的后台线程修改队列时，您是否尝试过委托？

喜欢 ：

```
if (Dispatcher.Thread != Thread.CurrentThread)
{
       Dispatcher.Invoke(new Action(delegate()
       {
           //Modify your collection
       }));
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-15T08:30:44.193

对于为什么这不起作用，每个人都有一个很好的技术答案。分配给当前线程的“Dispatcher”对象无权访问 UI。

在 .NET 中，如果当前线程中不存在调度程序，.NET 将新建另一个调度程序，但是这将具有与您的后台线程相同的同步上下文 - 而不是它需要同步访问的 UI 线程。

对我来说最简单的解决方案是在 ObservableCollection 中保存对原始调度程序的引用，并在不同的调度程序中覆盖基类调用，这样的事情应该可以工作：

```
public class ObservableDispatcherCollection<T> : ObservableCollection<T> where T : class
    {
        private Dispatcher _dispatcher;

        public ObservableDispatcherCollection(Dispatcher dispatcher)
        {
            _dispatcher = dispatcher; 
        }

        public ObservableDispatcherCollection(Control parent)
        {
            _dispatcher = parent.Dispatcher;
        }

        protected override void     OnCollectionChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
        {
            _dispatcher.Invoke(new Action(() =>
            {
                base.OnCollectionChanged(e);
            }));
        }

        protected override void OnPropertyChanged(System.ComponentModel.PropertyChangedEventArgs e)
        {
            _dispatcher.Invoke(new Action(() =>
            {
                base.OnPropertyChanged(e);
            }));
        }
} 
```

# linq - 实体框架延迟加载子项中的空属性

> ID：12142104
> 
> 赞同：1
> 
> 时间：2012-08-27T12:36:24.180
> 
> 标签：linq, entity-framework, entity-framework-4

使用延迟加载的实体框架 - 在实体为空时加载相关实体有以下问题。

假设我有两张表employee 和employeedetails。假设在上述情况下，并非所有员工条目在employeedetails 表中都有条目。如果我想查找员工列表

```
(from e in objectcontext.employees                                  
                              select new EmployeeEntity
                              {
                                  EmpID= e.EmployeeID,
                                  FirstName = e.FirstName,
                                  Address = e.employeedetails.Address
                              }).ToList(); 
```

EmployeeEntity 是我们将结果填充到其中的数据类。

如果即使返回列表中的一名员工在表employeedetails 中没有条目，上述代码也会中断。**这很明显，因为对于那些没有详细信息条目的客户，e.employeedetails 将为空**

重写上述查询的最佳方法是什么？

这样的事情可以接受吗？

```
(from e in objectcontext.employees                                  
                              select new EmployeeEntity
                              {
                                  EmpID= e.EmployeeID,
                                  FirstName = e.FirstName,
     Address = e.employeedetails  == null ? "" :    e.employeedetails.Address,
                              }).ToList(); 
```

我不清楚上述查询的效率 - 这个语句会在数据库级别进行空值检查吗？

我是否应该做一个明确的包含，比如

```
objectcontext.include("employeedetails")... 
```

然后循环遍历结果以检查是否为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:52:00.767

是的，该语句确实会在生成的 SQL 查询中执行空检查。最有可能的是，它只是一个`NVL`or `COALESCE`。

这就是你应该这样做的方式。

# android - 给定应用程序包名称，如何知道该应用程序是否支持主屏幕上的小部件

> ID：12142112
> 
> 赞同：0
> 
> 时间：2012-08-27T12:36:45.770
> 
> 标签：android, widget

给定应用程序包名称如何知道该应用程序是否支持主屏幕上的小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:32:00.130

使用 PackageManager 并调用`getPackageInfo(packageName, GET_RECEIVERS)`应用程序。

遍历所有并`PackageInfo.receivers`调用.`PackageManager.getReceiverInfo(componentName, GET_META_DATA)``ActivityInfo``PackageInfo.receivers`

看场`metadata`。这可能是 null 或者它可能包含一个 Bundle。如果它包含一个 Bundle，请在 Bundle 中查找带有 key 的项目`"android.appwidget.provider"`。如果您发现，那么您可以非常确定该应用程序支持主屏幕上的小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:40:53.750

David Wasser 的解决方案也是我的第一个猜测，但它未能检测到我的一个小部件。如果第一种方法不适合您，这是另一种方法。

您可以列出 ACTION_APP_WIDGET_UPDATE 操作的所有接收器，所有主屏幕小部件都应收听，然后按包名称过滤：

```
 PackageManager pm = getPackageManager();
    Intent intent = new Intent();
    intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);

    List<ResolveInfo> list = pm.queryBroadcastReceivers(intent, 0);

    for (ResolveInfo info : list) {
        Log.i("package", info.activityInfo.packageName);
    } 
```

# php - 如何在此函数中实现正确的显示隐藏 /slideToggle 功能

> ID：12142114
> 
> 赞同：-2
> 
> 时间：2012-08-27T12:36:52.973
> 
> 标签：php, javascript, jquery, slidetoggle

我在 jquery 中有一个函数，它在链接单击时显示图像，并且在再次单击链接时还必须隐藏图像。

这是代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script>
    var $j = jQuery.noConflict();
    $j(document).ready(function(){
        $j('.links').click( function(){
        var linkclicked = this.id;
        var url = $j(this).attr('href'),
        image = new Image();

        image.src = url;
        image.onload = function () {
              $j('#image-holder'+linkclicked).empty().append(image);
            /* The above line shows the image on first click.
               Adding slideToggle hides the image again  */
            };
            image.onerror = function () {
                $j('#image-holder'+linkclicked).empty()
                                .html('That image is not available.');
            }
            $j('#image-holder'+linkclicked).empty().html('Loading...');
            return false;
        });
    }); 
function loadnow() {

}
</script>
</head>
<body>
<?php $topicid=1; ?>
<a href="myimages/red-brick-wall-texture.jpg" class="links" id="<?php echo $topicid; ?>" >Show image</a>
<div id="<?php echo 'image-holder'.$topicid; ?>"></div>
<?php $topicid=2; ?>
<br><a href="/myimages/gymicon.JPG" class="links" id="<?php echo $topicid; ?>" >Show image</a>
<div id="<?php echo 'image-holder'.$topicid; ?>"></div>
</body>
</html> 
```

请让我知道在哪里编写 slideToggle 以正确启用显示/隐藏功能。这里有两个链接显示单独的图像。单击时会显示它们，但问题是在下次单击时隐藏它们，并在再次单击时使它们
可见，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:02:19.587

您在此处获取代码的方式并不完全适合`.slideToggle`. 您不应该将图像的 URL 放在元素的`href`属性中，`<a>`因为链接会在点击时尝试转到那里。

工作方式在[文档页面](http://api.jquery.com/slideToggle/)`.slideToggle`上有很好的记录。您所要做的就是使用用于保存图像的 HTML 标签。然后在页面加载时将它们显示出来。您所要做的就是在链接点击事件上调用该函数。 `<img>``$().hide();``.slideToggle()`

请参阅此小提琴中带有一些杂项图片的工作示例：http: [//jsfiddle.net/8xcZT/5/](http://jsfiddle.net/8xcZT/5/)。

或者这里是您的代码的工作版本：http: [//jsfiddle.net/JMXba/9/](http://jsfiddle.net/JMXba/9/)。我可以看到这可能是可取的等待点击加载图像。

祝你好运！

# flash - 在 as2 中确定 event.target

> ID：12142115
> 
> 赞同：0
> 
> 时间：2012-08-27T12:37:00.557
> 
> 标签：flash, events, actionscript-2, adobe-flash-cs3

如何在 as2 中检测事件在哪个movieClip 上触发。我已经列出了重复的movieclip，并希望在每个movieclip 上添加click 事件并区分哪个movieclip 事件有fird。我知道 as3 中的解决方案，但需要 as2 解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:34:45.430

在 AS2 中，当您分配一个函数说 using`myButton.onRelease = myFunction;`时，您可以在函数中简单地引用调用者 using `this`：

```
function myFunction() {
 trace(this._name);
}

myButton.onRelease = myFunction; // will trace "myButton" when you click it 
```

# javascript - 递归切换语句

> ID：12142122
> 
> 赞同：0
> 
> 时间：2012-08-27T12:37:57.937
> 
> 标签：javascript, switch-statement

**当模式**为**random**时，我得到一个`undefined`递归 Switch 语句的值。这个想法是最随机的，它会随机选择一个数字并设置一个**新的模式**并返回原始的 switch 语句。

 ******当模式不是随机的时，一切正常。所以我不确定这里有什么问题。
变量`a`是模式，而`i,j`只是数字。

```
switchMode: function (i, j, a){
            var b;
            console.log(a);
            switch(a) {
                default:
                case 'add':
                    console.log(i, j);
                    b = i + j;
                    break;

                case 'minus':
                    console.log(i, j);
                    b = i - j; //negative numbers possible
                    break;

                case 'multiply':
                    console.log(i, j);
                    b = i * j; //0 possible
                    break;  

                case 'random':
                    this.randomSwitchMode(i, j);
                    break; //random
            }   
            return b;
        },

randomSwitchMode: function(i, j) {
            var c = Math.ceil(Math.random() * 3);

            console.log(i, j, c);

            switch(c) {
                default:
                case 1: 
                    var a = 'add';
                    console.log(a);
                    this.switchMode(i, j, a);
                    break;

                case 2: 
                    var a = 'minus';
                    console.log(a);
                    this.switchMode(i, j, a);
                    break;

                case 3:
                    var a = 'multiply';
                    console.log(a);
                    this.switchMode(i, j, a);
                    break; 
            } 
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:40:57.327

你没有从“randomSwitchMode”返回任何东西。即使您这样做，您也必须确保将其返回值分配给“switchMode”中的“b”。

因此，随机案例应如下所示：

```
 case 1: 
                var a = 'add';
                console.log(a);
                return this.switchMode(i, j, a); 
```

然后在“switchMode”中：

```
 case 'random':
                b = this.randomSwitchMode(i, j);
                break; //random 
```

由于无论如何您都会遇到所有这些麻烦，因此我建议`switch`您保留一个将操作名称映射到函数的对象，而不是使用语句：

```
switchMode: function (i, j, a) {
  var ops = {
    'add': function(i, j) { return i + j; },
    'minus': function(i, j) { return i - j; },
    'multiply': function(i, j) { return i * j; },
    'random': function(i, j) {
      return ops[['add', 'minus', 'multiply'][Math.floor(Math.random() * 3)]](i, j);
    }
  };
  return ops[a](i, j);
} 
```

我猜您可以将“随机”案例分开并以不同方式处理。总体而言，虽然`switch`声明本身没有任何问题，但基于数据结构的实现将更加灵活。******

# jquery - 使用 JQuery 在单个复选框单击时启用/禁用复选框

> ID：12142125
> 
> 赞同：0
> 
> 时间：2012-08-27T12:38:10.777
> 
> 标签：jquery, checkbox

我是新手的jQuery，并努力解决一个问题，即当一个主复选框检查时，我试图禁用许多复选框。

我有一个包含 1 个主要复选框和 3 个辅助复选框的表单。当主复选框被选中时，所有其他辅助复选框都被禁用，但默认情况下必须处于选中状态。并且当未选中主要复选框时，所有其他被禁用的辅助复选框都将变为启用并且必须全部选中。默认情况下，当用户到达表单时：必须选中主要复选框，因此必须选中并禁用其他 3 个复选框。

这是我的代码：

```
<s:checkbox id="primary_CB" name="primaryCB" value="true"/>Primary checkbox
<s:checkbox cssClass="secondary_CB" name="secondary_CB1"/>Secondary checkbox1
<s:checkbox cssClass="secondary_CB" name="secondary_CB2"/>Secondary checkbox2
<s:checkbox cssClass="secondary_CB" name="secondary_CB3"/>Secondary checkbox3 
```

我的 JQuery 代码：

```
$('#primary_CB').click(function () {
if ($(this).attr('checked')) {
$(".secondary_CB").attr('disabled', 'disabled');
} else {
    $(".secondary_CB").removeAttr('disabled');
    }
}); 
```

但是我的代码以奇怪的方式工作，当我第一次在表单上时，所有 4 个复选框都被选中，没有一个被禁用。只有当我取消选中/再次选中禁用功能的主要复选框时。此外，当再次禁用时，所有辅助复选框都会自动取消选中。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:48:53.780

如果我正确理解您的问题，这应该有效：

```
$("#primary_CB").click(function() {
    $("input.secondary_CB").prop("disabled", !this.checked);
}); 
```

对于 1.6 以下的 jQuery

```
$("#primary_CB").click(function() {
    $("input.secondary_CB").attr("disabled", !this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:41:52.397

```
$('#primary_CB').click(function () {
if ( !$(this).is ( ":checked" ) )
{
$(".secondary_CB").attr ( "disabled" , true );
} else {
    $(".secondary_CB").removeAttr ( "disabled" );
    }
}); 
```

# macos - 使用 packagemaker 将多个包合并到一个下

> ID：12142130
> 
> 赞同：2
> 
> 时间：2012-08-27T12:38:24.617
> 
> 标签：macos, packagemaker

我正在为 Mac 制作安装程序，我需要在一个下分发多个包。但问题是，当我在 Package Maker 的 Contents 窗格中拖动包时，它们被标记为“？”

所以任何人都可以告诉我如何做这样的事情。我在 Lion 上使用最新版本的 Package Maker。

# jms - 我可以在不使用 MOM 的情况下开发发布订阅系统吗

> ID：12142132
> 
> 赞同：0
> 
> 时间：2012-08-27T12:38:31.493
> 
> 标签：jms, publish-subscribe, mom

我正在尝试开发一个**发布/订阅**系统。
为此，我阅读了一些有关它的论文和文章。他们都将消息服务作为发布/订阅系统的一个组成部分。

我的问题是，我可以在不使用 JMS 之类的 MOM 的情况下开发发布订阅系统吗？还是我遗漏或过度简化了事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:26:52.047

It depends what you mean by "MOM". If you think MOM = JMS then yes, there are plenty of pub/sub applications which are not JMS servers (off the top of my head): 0MQ, TIBCO Rendezvous and the many AMQP implementations around.

I guess my definition of MOM is an infrastructure for reliably getting a message from one system to another in an asynchronous manner. Pub/sub is a feature on top of the message transport which allows a message to be distributed to multiple other systems. Once you get beyond the point of opening a socket and stuffing a bunch of bytes down it, I would argue you are in the realm of MOM.

So, no you don't need JMS to do pub/sub....there are plenty of open-source and closed-source alternatives out there. Which one depends on your requirements and skills.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:18:12.163

你可以看看`multicast`提供了一对多的通信。多播不需要 MOM，而是需要启用多播的 IP 网络。通常网络路由器负责创建消息副本并将消息传递到目的地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:58:54.933

我不认为你过于简单化了。有可用的独立产品提供基于发布/订阅的高级功能，而不是更大的 MOM 系统的一部分。

其中之一是一组实现数据分发服务 (DDS) 规范的产品，由对象管理组 (OMG) 标准化。查看[此 Wikipedia 条目](http://en.wikipedia.org/wiki/Data_distribution_service)以获取非常简短的介绍和参考列表。

DDS 支持许多高级数据管理功能，例如强类型和内容感知数据总线、分布式状态管理和历史数据访问。其丰富的服务质量设置允许将大量复杂性从应用程序转移到中间件。这一切都基于发布/订阅范式。

如果您想详细介绍您的应用程序，那么我可能会向您指出使用该技术的类似用例——如果您感兴趣的话。

# python - 如何获取元组列表中的第一个元素？

> ID：12142133
> 
> 赞同：207
> 
> 时间：2012-08-27T12:38:37.183
> 
> 标签：python, list

我有一个如下所示的列表，其中第一个元素是 id，另一个是字符串：

```
[(1, u'abc'), (2, u'def')] 
```

我只想从此元组列表中创建一个 id 列表，如下所示：

```
[1,2] 
```

我将使用这个列表，`__in`所以它需要是一个整数值列表。

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-08-27T13:25:51.693

```
>>> a = [(1, u'abc'), (2, u'def')]
>>> [i[0] for i in a]
[1, 2] 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-07-08T15:32:57.773

使用 zip 函数解耦元素：

```
>>> inpt = [(1, u'abc'), (2, u'def')]
>>> unzipped = zip(*inpt)
>>> print unzipped
[(1, 2), (u'abc', u'def')]
>>> print list(unzipped[0])
[1, 2] 
```

**编辑**（@BradSolomon）：以上适用于 Python 2.x，其中`zip`返回一个列表。

在 Python 3.x 中，`zip`返回一个迭代器，以下等价于上述内容：

```
>>> print(list(list(zip(*inpt))[0]))
[1, 2] 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-08-27T12:39:22.720

你的意思是这样的吗？

```
new_list = [ seq[0] for seq in yourlist ] 
```

您实际上拥有的是`tuple`对象列表，而不是集合列表（正如您最初的问题所暗示的那样）。如果它实际上是一个集合列表，那么*就没有第一个元素*，因为集合没有顺序。

在这里，我创建了一个平面列表，因为通常这似乎比创建 1 个元素元组的列表更有用。`seq[0]`但是，您只需用替换即可轻松创建包含 1 个元素的元组列表`(seq[0],)`。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-06-28T04:43:28.967

这是[`operator.itemgetter`](https://docs.python.org/3/library/operator.html#operator.itemgetter)为了什么。

```
>>> a = [(1, u'abc'), (2, u'def')]
>>> import operator
>>> b = map(operator.itemgetter(0), a)
>>> b
[1, 2] 
```

该`itemgetter`语句*返回一个函数*，该函数返回您指定的索引处的元素。和写的完全一样

```
>>> b = map(lambda x: x[0], a) 
```

但我发现这`itemgetter`是一个更清晰、[更明确](https://www.python.org/dev/peps/pep-0020/#id3)的.

这对于制作紧凑的排序语句很方便。例如，

```
>>> c = sorted(a, key=operator.itemgetter(0), reverse=True)
>>> c
[(2, u'def'), (1, u'abc')] 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-04-03T13:12:21.517

您可以使用“元组解包”：

```
>>> my_list = [(1, 'abc'), (2, 'def')]
>>> my_ids = [idx for idx, val in my_list]
>>> my_ids
[1, 2] 
```

在迭代时，每个元组都被解包，并且它的值被设置为变量`idx`和`val`。

```
>>> x = (1, 'abc')
>>> idx, val = x
>>> idx
1
>>> val
'abc' 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2020-02-18T12:25:53.700

我在想比较不同方法的运行时可能很有用，所以我做了一个基准测试（使用[simple_benchmark](https://pypi.org/project/simple-benchmark/)库）

**I) 具有 2 个元素的元组的基准测试** [![在此处输入图像描述](../Images/8ef5c21015b92d5cfdb4124abf9a9d55.png)](https://i.stack.imgur.com/lsLop.png)

正如您可能期望的那样，通过索引从元组中选择第一个元素`0`显示为非常接近解包解决方案的最快解决方案，因为它期望正好有 2 个值

```
import operator
import random

from simple_benchmark import BenchmarkBuilder

b = BenchmarkBuilder()

@b.add_function()
def rakesh_by_index(l):
    return [i[0] for i in l]

@b.add_function()
def wayneSan_zip(l):
    return list(list(zip(*l))[0])

@b.add_function()
def bcattle_itemgetter(l):
     return list(map(operator.itemgetter(0), l))

@b.add_function()
def ssoler_upacking(l):
    return [idx for idx, val in l]

@b.add_function()
def kederrack_unpacking(l):
    return [f for f, *_ in l]

@b.add_arguments('Number of tuples')
def argument_provider():
    for exp in range(2, 21):
        size = 2**exp
        yield size, [(random.choice(range(100)), random.choice(range(100))) for _ in range(size)]

r = b.run()
r.plot() 
```

**II) 具有 2 个或更多元素的元组的基准** [![在此处输入图像描述](../Images/8b5a5f7f349cbe1f90dc07e70c29a0ef.png)](https://i.stack.imgur.com/9Argt.png)

```
import operator
import random

from simple_benchmark import BenchmarkBuilder

b = BenchmarkBuilder()

@b.add_function()
def kederrack_unpacking(l):
    return [f for f, *_ in l]

@b.add_function()
def rakesh_by_index(l):
    return [i[0] for i in l]

@b.add_function()
def wayneSan_zip(l):
    return list(list(zip(*l))[0])

@b.add_function()
def bcattle_itemgetter(l):
     return list(map(operator.itemgetter(0), l))

@b.add_arguments('Number of tuples')
def argument_provider():
    for exp in range(2, 21):
        size = 2**exp
        yield size, [tuple(random.choice(range(100)) for _
                     in range(random.choice(range(2, 100)))) for _ in range(size)]

from pylab import rcParams
rcParams['figure.figsize'] = 12, 7

r = b.run()
r.plot() 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-09-29T14:36:20.120

如果元组是唯一的，那么这可以工作

```
>>> a = [(1, u'abc'), (2, u'def')]
>>> a
[(1, u'abc'), (2, u'def')]
>>> dict(a).keys()
[1, 2]
>>> dict(a).values()
[u'abc', u'def']
>>> 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-12-30T23:54:27.747

从性能上看，在python3.X

*   `[i[0] for i in a]`并且`list(zip(*a))[0]`是等价的
*   他们比`list(map(operator.itemgetter(0), a))`

**代码**

```
import timeit

iterations = 100000
init_time = timeit.timeit('''a = [(i, u'abc') for i in range(1000)]''', number=iterations)/iterations
print(timeit.timeit('''a = [(i, u'abc') for i in range(1000)]\nb = [i[0] for i in a]''', number=iterations)/iterations - init_time)
print(timeit.timeit('''a = [(i, u'abc') for i in range(1000)]\nb = list(zip(*a))[0]''', number=iterations)/iterations - init_time) 
```

**输出**

3.491014136001468e-05

3.422205176000717e-05

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-03-20T05:46:50.170

当我跑的时候（如上所述）：

```
>>> a = [(1, u'abc'), (2, u'def')]
>>> import operator
>>> b = map(operator.itemgetter(0), a)
>>> b 
```

而不是返回：

```
[1, 2] 
```

我收到了这个作为回报：

```
<map at 0xb387eb8> 
```

我发现我必须使用 list()：

```
>>> b = list(map(operator.itemgetter(0), a)) 
```

使用此建议成功返回列表。也就是说，我对这个解决方案很满意，谢谢。（使用 Spyder、iPython 控制台、Python v3.6 测试/运行）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-04-06T15:57:11.853

我想知道为什么没有人建议使用 numpy，但现在检查后我明白了。它可能不是混合类型数组的最佳选择。

**这将是 numpy 中的解决方案：**

```
>>> import numpy as np

>>> a = np.asarray([(1, u'abc'), (2, u'def')])
>>> a[:, 0].astype(int).tolist()
[1, 2] 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-02-17T18:57:49.977

您可以[解压缩](https://www.python.org/dev/peps/pep-0448/)元组并使用列表推导仅获取第一个元素：

```
l = [(1, u'abc'), (2, u'def')]
[f for f, *_ in l] 
```

**输出：**

```
[1, 2] 
```

无论元组中有多少元素，这都会起作用：

```
l = [(1, u'abc'), (2, u'def', 2, 4, 5, 6, 7)]
[f for f, *_ in l] 
```

**输出：**

```
[1, 2] 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-11-08T04:07:15.430

我更喜欢这样压缩：

```
>>> lst = [(1, u'abc'), (2, u'def')]
>>> new, _ = zip(*lst)
>>> new
(1, 2)
>>> 
```

或者，如果您不知道有多少额外的值：

```
>>> new, *_ = zip(*lst)
>>> new
(1, 2)
>>> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-06-16T04:47:34.890

要获取列表或元组的元素，您可以遍历列表或元组

```
a = [(1, u'abc'), (2, u'def')]

list1 = [a[i][0] for i in range(len(a))]

print(list1) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-27T12:40:14.657

这些是元组，而不是集合。你可以这样做：

```
l1 = [(1, u'abc'), (2, u'def')]
l2 = [(tup[0],) for tup in l1]
l2
>>> [(1,), (2,)] 
```

# forms - Twitter bootstrap 将水平表单与内联混合

> ID：12142135
> 
> 赞同：21
> 
> 时间：2012-08-27T12:38:40.620
> 
> 标签：forms, twitter-bootstrap

嗨，我试图将内联形式与水平混合，我有[http://jsfiddle.net/TNLnP/3/](http://jsfiddle.net/TNLnP/3/)但我想得到类似的东西

```
<label><input>
<label><input><label><input><label><input> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-06-06T14:22:15.897

如果您想将两者都保留在同一个`form`元素中，您可以添加`form-inline`到您的`fieldset`：

```
<form>
<div class="row">
    <fieldset class="form-inline">
        <label class="control-label">A</label>
        <input type="text" class="input-medium">
    </fieldset>
</div><!-- end row -->
<div class="row">
    <fieldset class="form-inline">
        <label class="control-label">B</label>
        <input type="text" class="input-mini" >
        <label class="control-label">C</label>
        <input type="text" class="input-mini" >
        <label class="control-label">D</label>
        <input type="text" class="input-mini" >
        <label class="control-label">E</label>
        <input type="text" class="input-mini" >
    </fieldset>
</div><!-- end row -->
</form> 
```

[http://jsfiddle.net/ZWNjw/](http://jsfiddle.net/ZWNjw/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T10:34:02.470

```
<!-- First Form =============================== -->
<div class="row">
  <form class="form-inline">
    <fieldset>
      <label class="control-label">A</label>
      <input type="text" class="input-medium">
    </fieldset>
  </form>
</div><!-- end row -->

<!-- Second Form ================================== -->
<div class="row">
  <form class="form-inline">
    <fieldset>
      <label class="control-label">B</label>
      <input type="text" class="input-mini" >
      <label class="control-label">C</label>
      <input type="text" class="input-mini" >
      <label class="control-label">D</label>
      <input type="text" class="input-mini" >
      <label class="control-label">E</label>
      <input type="text" class="input-mini" >
    </fieldset>
  </form>
</div><!-- end row --> 
```

[在jsfiddle](http://jsfiddle.net/eB39A/)试试这个。希望它会帮助你。:)

# mysql - MySQL Group 在聚合函数相等时返回多个结果

> ID：12142138
> 
> 赞同：0
> 
> 时间：2012-08-27T12:38:45.707
> 
> 标签：mysql, sql, join, group-by

我正在尝试从数据库表（“结果”）中获取结果列表，但是，每个成员可能已经提交了多个结果，我希望检索他们的最佳时间。

下面的查询有效（尽管我不确定它是否有效），除非有来自同一个竞争对手的多个结果且得分相同的情况。（例如，2 号选手两次得分 32.15 秒）。在这种情况下，我为这个竞争对手获得了两行，而不是我想要的那一行。

```
SELECT result_id FROM ( 
    SELECT member_id,MIN(time) AS mintime FROM result 
        JOIN member_result ON result.id = member_result.result_id 
        WHERE event_id = ? 
        GROUP BY member_id ORDER BY mintime ) AS x 
JOIN result ON result.time = x.mintime
JOIN member_result ON member_result.result_id = result.id
AND member_result.member_id = x.member_id 
```

任何解决该问题的建议都会受到欢迎。

编辑：根据要求的表格结构；

```
member_result (TABLE)
 id int unsigned (10)
 result_id int unsigned (10)
 member_id int unsigned (10)
 club_id int unsigned (10)

result (TABLE)
 id int unsigned (10)
 time decimal (6)
 is50mPool BIT ()
 date date ()
 verified BIT ()
 verified_date timestamp ()
 verified_comment varchar (255)
 hasEmailed BIT ()
 enabled BIT ()
 event_id int unsigned (10 
```

示例问题：结果：id#1 for event#2，time 60 member_result：id#1，result_id 1，member_id 3 结果：id#2 for event#2，time 60 member_result：id#2，result_id 2，member_id 3

我只想返回一行，其中一个是 result_id - 目前两行都返回，因为最短时间相等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:55:59.977

编辑：

您可以尝试使用 MIN 或 MAX 取决于您对 ID 更感兴趣，然后只有一行：

像：

```
SELECT result_id FROM ( 
    SELECT member_id, MIN(member_result.id) as member_resultID ,MIN(time) AS mintime FROM result 
        JOIN member_result ON result.id = member_result.result_id 
        WHERE event_id = 2 
        GROUP BY member_id ORDER BY mintime ) 
AS x 
JOIN result ON result.time = x.mintime
JOIN member_result ON member_result.result_id = result.id
AND member_result.id = x.member_resultID 
```

这仅返回第一个用户的给定事件的 MIN 时间。（所以只有一排而不是两排）

这是一个[SqlFiddle](http://www.sqlfiddle.com/#!2/89eb2/6)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:40:05.353

```
SELECT Distinct result_id FROM ( 
SELECT member_id,MIN(time) AS mintime FROM result 
    JOIN member_result ON result.id = member_result.result_id 
    WHERE event_id = ? 
    GROUP BY member_id ) AS x 
JOIN result ON result.time = x.mintime
JOIN member_result ON member_result.result_id = result.id
AND member_result.member_id = x.member_id 
```

你试过这个吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:32:06.937

实际上，事实证明这就像在外部查询上再次分组一样简单 - 由于 GROUP BY 查询的限制，我在没有 ORDER BY 的限制之前有一个 LIMIT 语句，最初似乎不起作用的东西坏了。

```
SELECT result_id FROM ( 
SELECT member_id,MIN(time) AS mintime FROM result 
    JOIN member_result ON result.id = member_result.result_id 
    WHERE event_id = ? 
    GROUP BY member_id ORDER BY mintime ) AS x 
JOIN result ON result.time = x.mintime
JOIN member_result ON member_result.result_id = result.id
AND member_result.member_id = x.member_id
GROUP BY member_result.member_id 
```

感谢所有做出贡献的人！

# android - iOS 和 Android 上相对地理定位的准确性

> ID：12142139
> 
> 赞同：1
> 
> 时间：2012-08-27T12:38:48.327
> 
> 标签：android, ios, gps, css-position

从我读过的内容来看，GPS 在一定程度上是准确的，但是 GPS 提供给您的信息与实际位置之间可能存在一些误差。使用 GPS 进行相对定位时如何？假设我们有两个非常接近的点（小于 100 米）。如果您测量 iPhone 或基于 Android 的手机给出的坐标之间的距离，您能达到真正的准确度吗？如果没有，有没有办法在测量两个靠近点之间的距离时达到真正的准确性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:47:51.870

是的，有办法。GPS 不够准确，但如果您从 Google 地球获得足够好的图像，您可以在那里进行非常准确的测量。另外，您可能知道该地区的高层建筑吗？如果您通过简单的几何图形进行操作，可能还有另一种方法。

# sql - 了解 Oracle Apex_Application.G_Fnn 以及如何使用它

> ID：12142143
> 
> 赞同：8
> 
> 时间：2012-08-27T12:39:00.167
> 
> 标签：sql, oracle11g, oracle-apex

我对 Oracle apex_application.gfnn 的工作方式以及它是仅适用于 Oracle ApEx 中的标准 SQL 报告还是仅适用于 SQL（可更新报告，即表格形式）感到非常困惑。

基本上我正在尝试使用这个示例 SQL 来实现以下目标，这只是一个标准 SQL 报告，但我不确定我想要实现的目标是否可以通过这种类型或报告实现，即：

```
select id,
       name,
       telephone,
       apex_item.checkbox2(10,id) as "Tick when Contacted",
       apex_item.text(20,my_date) as "Date Contacted",
       apex_item.textarea(30,my_comment,5,80) as "Comment"
from   my_table 
```

根据上面的 SQL，假设这个 SQL 查询返回 10 行。现在使用复选框作为我的驾驶 ID，我勾选了所有奇数记录/行的复选框，即第 1、3、5、7、9 行，对于这些行中的每一行，我还输入了一个日期值 (f20) 和注释(f30)

牢记这一点，然后我想创建一个页面进程，当用户按下“保存”按钮时调用该页面进程，该按钮将遍历这些检查的行并存储每条记录、我的日期和我的评论，但仅适用于我已选择。

因此，基于上述内容，我希望我的表中有 5 个新闻行，其中包含以下列：

```
ID      MY_DATE      MY_COMMENT
1       26/08/2012   Comment A
3       27/08/2012   Comment B
5       28/08/2012   Comment C
7       29/08/2012   Comment D
9       30/08/2012   Comment E 
```

不幸的是，我不确定如何使用`apex_application.G_F10.COUNT`.

对于勾选复选框的每一行，我希望能够访问每个数组元素 (f20) 和 f(f30) 的内容。

这是可能的还是我误解了 apex_application.G_Fnn 的工作原理？如果这是不可能的，我怎么能做到这一点？我需要表格报告吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T13:10:08.487

你很亲密。

```
select apex_item.checkbox2(10, empno) select_me,
apex_item.text(20, empno) empno,
apex_item.text(30, ename)||apex_item.hidden(50, empno) ename
from emp 
```

我正在连接隐藏的项目，因为我不希望它在自己的列中。布局混乱。
此外，由于复选框的工作方式，隐藏项目在那里。复选框只为选中的项目提交它们的值。这意味着数组 10 有 3 个值。其他数组仍将包含所有行的值。
这就是我再次添加隐藏 empno 的原因：这样我们就可以将检查的值与其他行匹配。

在提交过程中：

```
DECLARE
   v_empno emp.empno%TYPE; 
   v_ename emp.ename%TYPE;
BEGIN
   --f10: checkbox
   --f20: empno
   --f30: ename
   --f50: empno again
   for i in 1..apex_application.g_f10.count
   loop
      for j in 1..apex_application.g_f50.count loop
         if apex_application.g_f10(i) = apex_application.g_f50(j) 
         then         
            -- access values for the selected rows in the other arrays
            v_empno := apex_application.g_f20(j);
            v_ename := apex_application.g_f30(j);

            apex_debug_message.log_message('Employee: '||v_empno||' - '||v_ename);
         end if;
      end loop;
   end loop;
END; 
```

运行页面，启用调试，选择记录 2、4 和 6，提交。

![记录选择和查询输出](../Images/ba1949a460cf7f3bbaca3ed6a49067ea.png)

调试输出：

![调试输出：布莱克、琼斯、福特](../Images/3a4ecd75e1eadc0150fd77fb5786f8f9.png)

您现在需要做的就是将您的处理置于该循环中。

# php - PHP数组：对匹配日期的值求和

> ID：12142144
> 
> 赞同：4
> 
> 时间：2012-08-27T12:39:03.850
> 
> 标签：php, arrays

我试图弄清楚如何对多维数组的某些值求和，如果它们具有相似的日期。

这是我的数组：

```
<?$myArray=array(

array(
        'year' => 2011,
        'month ' => 5,
        'day' => 13,
        'value' => 2
    ),
array(
        'year' => 2011,
        'month '=> 5,
        'day' => 14,
        'value' => 5
    ),
array(
        'year' => 2011,
        'month ' => 5,
        'day' => 13,
        'value' => 1
    ),
array(
        'year' => 2011,
        'month ' => 5,
        'day' => 14,
        'value' => 9
    )
);?> 
```

这是我希望输出的样子：

```
<?$output=array(

array(
        'year' => 2011,
        'month ' => 5,
        'day' => 13,
        'value' => 3 //the sum of 1+2
    ),
array(
        'year' => 2011,
        'month '=> 5,
        'day' => 14,
        'value' => 14 //the sum of 5+9
    )
);?> 
```

注意 4 个子数组是如何匹配的`year/month/day`，然后只求和`value`。我已经看到[了关于这个主题的其他 SO 线程，](https://stackoverflow.com/questions/1496682/php-how-to-sum-values-of-the-array-of-the-same-key)但找不到一个只求`value`和而不是`year/month/day`值的线程。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:43:15.430

最初使用年/月/日的组合来索引您的输出数组可能是最简单的：

**注意**：上面的示例数组的所有`month`键都带有尾随空格。我只是`month`在这里使用，*没有*尾随空格。

```
// Initialize output array...
$out = array();

// Looping over each input array item
foreach ($myArray as $elem) {
  // Initialize a new element in the output keyed as yyyy-mm-dd if it doesn't already exist
  if (!isset($out[$elem['year'] . "-" . $elem['month '] . "-" . $elem['day']])) {
    $out[$elem['year'] . "-" . $elem['month '] . "-" . $elem['day']] = array(
      // Set the date keys...
      'year' => $elem['year'],
      'month' => $elem['month '],
      'day' => $elem['day'],
      // With the current value...
      'value' => $elem['value']
    );
  }
  // If it already exists, just add the current value onto it...
  else {
     $out[$elem['year'] . "-" . $elem['month '] . "-" . $elem['day']]['value'] += $elem['value'];
  }
}

// Now your output array is keyed by date.  Use array_values() to strip off those keys if it matters:
$out = array_values($out); 
```

### 输出（调用之前`array_values()`）：

```
array(2) {
  '2011-5-13' =>
  array(4) {
    'year' =>
    int(2011)
    'month' =>
    int(5)
    'day' =>
    int(13)
    'value' =>
    int(3)
  }
  '2011-5-14' =>
  array(4) {
    'year' =>
    int(2011)
    'month' =>
    int(5)
    'day' =>
    int(14)
    'value' =>
    int(14)
  }
} 
```

### 更新：

用单键日期（而不是 3 部分）做同样的事情，没有连接会更容易：

```
$myArray=array(
      array(
            'date' => '2011-05-13',
            'value' => 2
        ),
    array(
            'date' => '2011-05-14',
            'value' => 5
        ),
        array(
            'date' => '2011-05-13',
            'value' => 7
        ),
    array(
            'date' => '2011-05-14',
            'value' => 3
        ),

);

   foreach ($myArray as $elem) {
      // Initialize a new element in the output if it doesn't already exist
      if (!isset($out[$elem['date']])) {
        $out[$elem['date'] = array(
          // Set the date keys...
          'date' => $elem['date'],
          // With the current value...
          'value' => $elem['value']
        );
      }
      else {
        $out[$elem['date']]['value'] += $elem['value'];
      }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:05:59.490

这就是我将如何做到的。结果将以`$newArray`日期时间对象作为键。如果你只是想要它作为一个索引数组，它应该很容易做到。

```
// Example array
$myArray = array(
    array(
    'date' => new DateTime('1993-08-11'),
    'value' => 3
    ),

    array(
    'date' => new DateTime('1993-08-11'),
    'value' => 5
    )
);

$newArray = array();

foreach($myArray as $element)
{
    $iterationValue = $element['value'];
    $iterationDate = $element['date'];
    $dateKey = $iterationDate->format('Y-m-d');

    if(array_key_exists($dateKey, $newArray))
    {
        // If we've already added this date to the new array, add the value
        $newArray[$dateKey]['value'] += $iterationValue;
    }
    else
    {
        // Otherwise create a new element with datetimeobject as key
        $newArray[$dateKey]['date'] = $iterationDate;
        $newArray[$dateKey]['value'] = $iterationValue;
    }
}

nl2br(print_r($newArray)); 
```

实际上最终做了与@MichaelBerkowski 解决方案几乎相同的事情。尽管如此，当您不想在应用程序中稍后处理日期时，拥有 DateTime 对象总是更灵活。

**编辑：现在对其进行了测试并修复了错误**

# html - 如何在数据网格中插入无线电组？

> ID：12142146
> 
> 赞同：1
> 
> 时间：2012-08-27T12:39:07.017
> 
> 标签：html, datagrid, datagridview, radio-button, radio-group

我的应用程序有一个粗略的模型，如下图所示：

![在此处输入图像描述](../Images/fe45d1351cc1f4c1870ecc00d29cc5a2.png)

我正在使用 jquery easyui 数据网格框架来获取此信息，但我无法插入单选组类型作为我的列之一，如我图片的状态列中所示。谁能帮助我如何在数据网格表中插入单选按钮？另一件事是，数据网格是获得这些类型函数的唯一方法，还是我们可以获得相同东西的任何其他方式？如果有人知道任何其他方式，请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:20:14.367

我也在使用 easyui 网格和其他组件。您可以使用 easyui datagrid 的 formatter 属性看[这里](http://www.jeasyui.com/documentation/index.php)

在格式化程序属性上，您可以将任何 innerHTML（如单选按钮、按钮、标签等）添加到 datagridcolumns。请看下面的示例，我在我的项目中使用此示例；

```
 var btnid="";
 FILL_TESTGRID: function (_data) {
            try {
                $('#TestGrid').datagrid({
                    singleSelect: true,
                    remoteSort: false,
                    fitcolumns: true,
                    nowrap: false,
                    columns: [[
                        { field: 'ID', title: 'ID', sortable: true },
                        { field: 'NAME', title: 'NAME', sortable: true },
                        { field: 'action', title: 'ColumntTitle3', formatter: function (value, row, index) {
                            var col;
                            if (row.ID!= null) {
                                col = '<input type="button" id="Btn'+row.ID+'"  onclick="TestFunc(' + row.ID + ')" value="Add" class="GridButton"/>';
                                btnid = "Btn"+row.ID; //set to a global for getting out grid
                            }
                            return col;
                        }
                        }
                    ]]                
            }
            catch (err) {
                alert(err)
            }
        }       
    }

    document.getElemntById(btnid); //getting button, radio or text (value,checked etc) 
```

# android - 在 TextView.setText(string) 上发生空指针异常

> ID：12142155
> 
> 赞同：0
> 
> 时间：2012-08-27T12:39:51.680
> 
> 标签：android, textview

我正在尝试更新一些`TextViews`. 我有 3 个`Main_Activity.XML`默认布局`Portrait`和`Landscape`. 在`TextView`这些布局中都具有相同的`andoid:id`

我已经阅读了有关更新的所有内容`TextView`，但不知道为什么这会导致整个应用程序崩溃。

我想也许`TextView txt = (TextView) findViewById(R.id.txtViewActiveTimeProp1)`是返回一个空值，然后当我尝试时`setText`我得到一个空指针异常。有什么想法吗？我已经把

```
TextView txt = (TextView) findViewById(R.id.txtViewActiveTimeProp1);
String strPref = retrievePrefs("pref_active_times_prop1");
txt.setText(strPref); 
```

在完成`Button` `onclick`后很久发生的事件，`setContentView`结果与上述相同。验证了我用来`TextView`在所有 3 个布局中引用出口的 id。

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    PreferenceManager.setDefaultValues(this, R.xml.preference, false);
    setContentView(R.layout.activity_main);

TextView txt = (TextView) findViewById(R.id.txtViewActiveTimeProp1);
String strPref = retrievePrefs("pref_active_times_prop1");
txt.setText(strPref);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:44:00.600

Hi You have to do findViewById inside onCreate method. since you are doing findViewById inside event listener it is returning null.

Do the below mentioned changes in your code.

```
public class MainActivity extends Activity {
TextView txt;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

PreferenceManager.setDefaultValues(this, R.xml.preference, false);
setContentView(R.layout.activity_main);

txt = (TextView) findViewById(R.id.txtViewActiveTimeProp1);
String strPref = retrievePrefs("pref_active_times_prop1");
txt.setText(strPref);
} 
```

and inside your click listener

```
String strPref = retrievePrefs("pref_active_times_prop1");
txt.setText(strPref); 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:58:30.977

似乎值 String strPref = retrievePrefs("pref_active_times_prop1"); 即将到来 null ，打印 strPref 值并检查

# asp.net-mvc-3 - 如何将不同的调查保存到数据库

> ID：12142157
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:40:04.553
> 
> 标签：asp.net-mvc-3, relational-database, database-schema

我被分配在 ASP.NET MVC3 上制作基于 Web 的调查应用程序。我有三个不同的调查。我必须以最佳方式将调查答案存储在数据库中。我只想出了一个解决方案：为每种调查类型制作一个答案表。

你能提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:43:22.557

您可以将带有**调查类型**的答案的单个表本身作为列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:44:23.760

也许是这样的？

表调查_答案

id（这是 pk）：qid（问题 id）：answer（varchar MAX）：pid（个人 id）

你可以用它做一个问题表，一个人表。在问题表中，放置 qid、问题及其所属的问题组（调查 id）。Persons 表很明显，你放了一个 pid（person id）和关于这个人的信息（如姓名、年龄、性别等）

三表方法不好的原因是因为假设您的调查数量增加了。让我们看看它变成了 100 个或更多不同类型的调查——这取决于你在哪里工作——这绝对有可能——你会有 100 个不同的表格吗？1000？没门。

# android - IntentService 中的处理程序

> ID：12142167
> 
> 赞同：2
> 
> 时间：2012-08-27T12:40:44.923
> 
> 标签：android, handler, intentservice

我正在使用一个`IntentService`从 Internet 下载一些东西到我的`Android app`. 我也在使用[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/) `httpClient`，这也是`async`.

我遇到的问题是，当我触发下载`async`调用时，`IntentService`线程完成并且`http`客户端无法回调响应，因为`Service`线程已死。

我使用过这样的处理程序，它似乎可以工作，但我对 loppers 有点迷茫。它是否正确？我可以安全地使用此代码吗？

```
new Handler(getMainLooper()).post(new Runnable() {
        @Override
        public void run() {
           //my downloading code here
        }
})); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:20:24.627

Intent Service 本身提供了一个后台线程，因此您应该在其 onHandleIntent 方法中直接进行 http 调用，并通过广播与您的活动进行交互。

另一方面，我从未使用过 loopj，但它看起来提供了开箱即用所需的所有异步性。我会问自己为什么需要在意图服务中使用它。如果您需要在应用程序后台运行时运行它，更好的解决方案是在更经典的服务中使用它。

您尝试实施的解决方法与意图服务的性质相反，意图服务是简单的工作线程，在处理意图后到期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:50:01.327

是的，这似乎是安全的，因为您的

> 下载异步调用

将在单独的线程上工作（很可能）。

# jsf-2 - P:contextMenu 不在 P:layout 组件内呈现

> ID：12142169
> 
> 赞同：4
> 
> 时间：2012-08-27T12:40:46.113
> 
> 标签：jsf-2, primefaces, facelets

我必须在 P:layout 标记内写 P:contextMenu 第一个 P:layout 中的 ContextMenu 没有呈现。我的页面如下：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui"
xmlns:c="http://java.sun.com/jsp/jstl/core">
  <h:body>
 <h:form id="statementsOfAccountForm">
        <p:layout id="playout" style="min-width:400px;min-height:200px;">
            <p:layoutUnit position="west" resizable="true" size="100"
                minSize="40" maxSize="200" collapsible="true">
    <h:form id="statementsOfAccountLeftForm">
                <p:contextMenu>
                    <p:menuitem value="Account Summary" 
                         />
                    <p:menuitem value="Mini Statement" 
                         />

                </p:contextMenu>
  </h:form>
            </p:layoutUnit>

            <p:layoutUnit position="center" id="centerPage" collapsible="true">
                 <h:form id="statementsOfAccountCenterForm">
        <div align="center">hi</div>
      </h:form>
        </p:layout>
    </h:form> 
```

这是我的代码，！我看到输出如下：上下文菜单未以正确的格式显示。页面只显示普通链接。怎么了？请帮忙。看[这里的屏幕截图](http://i.stack.imgur.com/uYAv7.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:50:49.757

该`update`属性可能找不到具有 id 的组件，`centerPage`因此不会呈现。

暂时从 menuItem 中删除 update 属性，然后为`centerPage`您要更新的 layoutUnit 中组件的生成客户端 ID 评估客户端源。然后，您可以通过 clientId 专门引用这些。

然而，一个问题是该`layoutUnit`组件可能不会生成客户端组件供您参考，因此您可能必须直接在此 layoutUnit 中引用一个组件。

```
...
<p:menuitem value="Account Summary" update=":statementsOfAccountForm:centerPageGroup"
... 

<p:layoutUnit position="center" id="centerPage" collapsible="true">
    <h:panelGroup layout="block" id="centerPageGroup"><ui:include 
        src="#{helloBean.pageName}.xhtml" /></h:panelGroup> 
</p:layoutUnit> 
```

这是一个如何使用 update 属性专门引用 id 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:45:15.140

我已经尝试了您的示例（尽管删除了对支持 bean 的引用）并且它按预期工作：

```
<h:form id="statementsOfAccountForm">
    <p:layout id="playout" style="min-width:400px;min-height:200px;">
        <p:layoutUnit position="west" resizable="true" size="100"
            minSize="40" maxSize="200" collapsible="true">
            <p:contextMenu>
                <p:menuitem value="Account Summary" update="centerPage" />
                <p:menuitem value="Mini Statement" update="centerPage" />
            </p:contextMenu>
        </p:layoutUnit>
        <p:layoutUnit position="center" id="centerPage" collapsible="true">
            <div align="center">
            </div>
        </p:layoutUnit>
    </p:layout>
</h:form> 
```

结果：

![上下文菜单的结果](../Images/107cdf03750679c09c7c0d1cd5f4eb06.png)

我建议你尝试和我做的完全一样的事情。验证这是否有效后，添加更多代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:33:38.887

[Primefaces 3.3 用户指南](http://primefaces.googlecode.com/files/primefaces_users_guide_3_3.pdf)，第 245 页，说：

> 使用表单和整页布局时，避免使用包含 layoutunits 的表单，因为生成的 dom 可能不一样。所以以下是无效的。

```
<p:layout fullPage="true">
    <h:form>
        <p:layoutUnit position="west" size="100">
            <h:outputText value="Left Pane" />
        </p:layoutUnit> 
        <p:layoutUnit position="center">
            <h:outputText value="Right Pane" />
        </p:layoutUnit>
    </h:form>
</p:layout> 
```

> 一个布局单元必须有它自己的形式，也避免因为同样的原因尝试更新布局单元，而是更新它的内容。

Primefaces 菜单在 layoutUnits 中使用时有一点问题。为了克服[这个问题](http://forum.primefaces.org/viewtopic.php?f=3&t=14013)，你可以使用这个 CSS 片段：

```
<style type="text/css">
.ui-layout-unit-center {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    z-index: -1;
}

.ui-layout .ui-layout-noscroll div.ui-layout-bd {
    overflow: visible;
}
</style> 
```

或者如果上述方法不起作用，您可以尝试[另一种方法：](http://forum.primefaces.org/viewtopic.php?f=3&t=14801)

```
<style type="text/css">
.ui-layout-west {
    z-index:20 !important;
    overflow:visible;
}

.ui-layout-west .ui-layout-unit-content {
    overflow:visible;
}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:05:34.533

您的布局位于单个 h:form 中。您实际上应该在每个布局单元中都有 ah:form 。所以尝试以下方法：

```
<p:layout id="playout" style="min-width:400px;min-height:200px;">
    <p:layoutUnit position="west" resizable="true" size="100"
        minSize="40" maxSize="200" collapsible="true">
        <h:form id="statementsOfAccountLeftForm">
            <p:contextMenu>
                <p:menuitem value="Account Summary" update="centerPage"
                    actionListener="#{helloBean.changeCenterPage('accountSummary')}" />
                <p:menuitem value="Mini Statement" update="centerPage"
                    actionListener="#{helloBean.changeCenterPage('miniStatement')}" />

            </p:contextMenu>
        </h:form>
    </p:layoutUnit>

    <p:layoutUnit position="center" id="centerPage" collapsible="true">
        <h:form id="statementsOfAccountCenterForm">
            <div align="center"><ui:include
                src="#{helloBean.pageName}.xhtml" /></div>
        </h:form>
    </p:layoutUnit>
</p:layout>
</h:form> 
```

# office365 - 为 SharePoint Online 创建沙盒 WebPart

> ID：12142171
> 
> 赞同：0
> 
> 时间：2012-08-27T12:40:52.260
> 
> 标签：office365

我已注册 Office 365 预览网站。我需要为该站点创建一个沙盒 WebPart。你能告诉我，我需要在我的系统上安装 SharePoint 2013 吗？当我尝试创建 SharePoint 项目 2013 时，它显示我需要安装它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:45:48.200

为了构建 SharePoint 完全信任或沙盒解决方案，您需要在开发系统上安装 SharePoint。

如果您要构建 SharePoint 2013 应用程序，您的开发系统上不需要 SharePoint。

您应该查看各种架构，然后决定创建哪种类型的解决方案。最佳起点是[http://msdn.microsoft.com/en-us/sharepoint/](http://msdn.microsoft.com/en-us/sharepoint/)

# php - Apache 显示 PHP 代码而不是执行它

> ID：12142172
> 
> 赞同：125
> 
> 时间：2012-08-27T12:40:56.077
> 
> 标签：php, apache

我最近一直在尝试在我的计算机上安装 PHP 和 Apache。几个小时后，它们就安装好了。正如大家所说，我已经修改了 httpd.conf 和 php.ini 文件。然后我创建了一个简单的 PHP 脚本：

```
<?php phpinfo(); ?> 
```

但是当我尝试用它运行它时，`http://127.0.0.1/phpinfo.php`它只显示源代码而不是执行它。我正在使用 Apache 2、PHP 5 和 Windows Vista。

编辑线：

PHP.INI:

```
short_open_tag = On 
```

HTTPD配置文件

```
LoadModule php5_module "C:/php/php5apache2_2.dll"
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps
PHPIniDir "C:/php" 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-27T12:49:14.093

您必须启用 php！检查`mods-enabled`Apache 目录中的文件夹（默认：`/etc/apache2/`）以查看是否找到名为`php`. 我不记得扩展名，但我认为它是`.so`.

还要检查`/var/log/apache2/error.log`您是否有任何其他错误。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2017-04-28T18:32:08.580

哇，这里有很多解决方案！这是我在**Ubuntu 16.04**上所做的：

```
sudo apt-get install php libapache2-mod-php
sudo a2enmod mpm_prefork && sudo a2enmod php7.0
sudo service apache2 restart 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2016-05-31T16:39:00.637

对于 PHP 7（也可能适用于以前的版本），但我必须这样做：

将此添加到 /etc/apache2/apache2.conf 的底部

```
<FilesMatch \.php$>
SetHandler application/x-httpd-php
</FilesMatch> 
```

从终端运行：

```
sudo a2dismod mpm_event && sudo a2enmod mpm_prefork && sudo a2enmod php7 
```

然后不要忘记重新启动 Apache，以便它知道您更改了内容：

```
sudo service apache2 restart 
```

这是来自：[https ://www.atlantic.net/community/howto/try-php7-lamp-ubuntu-14-04/的摘要](https://www.atlantic.net/community/howto/try-php7-lamp-ubuntu-14-04/)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-05-29T05:03:45.407

打开文件

`/etc/apache2/httpd.conf`

和改变

```
#LoadModule php5_module libexec/apache2/libphp5.so 
```

进入

```
LoadModule php5_module libexec/apache2/libphp5.so 
```

所以只需取消注释 PHP 模块加载`httpd.conf`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-12-01T14:16:41.410

[我发现这可以解决我的相关问题。](https://askubuntu.com/questions/407744/apache-doesnt-execute-php-files-but-makes-me-download-them)我将其添加到相关`<Directory>`部分：

```
<IfModule mod_php5.c>
    php_admin_flag engine on
</IfModule> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-05-12T09:43:26.390

一个对我有用的不同答案。就是这样，要安装`[sudo] apt-get install libapache2-mod-php5.X`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-06-27T16:09:17.703

> # **Apache 显示 php 代码而不是执行已修复的问题**
> 
> **1.打开php5.6 conf或者php7.x conf**
> 
> **# 以下命令：**
> 
> **$ sudo vi /etc/apache2/mods-enabled/php5.6.conf**
> 
> # 2\. 评论以下几行
> 
> [![在此处输入图像描述](../Images/831ac292b338c7a22ee1cdfa5b517f0a.png)](https://i.stack.imgur.com/NXhBM.png)
> 
> # 3.重启服务器
> 
> **$ sudo 服务 apache2 重启**
> 
> # 4享受:)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-07-23T09:32:48.343

好吧，如果您已经尝试了上面或更早告诉您的内容（这可能是原因），并且它仍然显示代码而不是执行它，那么您做错了一件事尚未解决。您用于访问 php 代码的 url；有些人试图通过将 .php 文件拖入 Web 浏览器来执行他们的 php 代码。这是错误的做法，可能会导致此类问题。如果您在 C://wamp/www 文件夹中将文件保存为“test.php”，那么您必须通过以下方式访问该文件：localhost://test.php。这样访问就会出现这种错误：localhost://wamp/www/test.php

希望我帮助了那里的人。o/ ~丹尼尔

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-12-22T04:31:38.233

发布对我有用的东西以防万一帮助别人，尽管这是一个不寻常的案例。

我设置了一个处理程序来强制我的网络主机使用比默认版本更高的 php。有 5.1，但我想要 5.6，所以我有这个：

```
<FilesMatch \.php$>
    SetHandler php56-cgi
</FilesMatch> 
```

在我的 .htaccess 文件中。

当尝试在本地运行我的网站时，将其放置在其中会导致 php 代码输出到浏览器。删除它解决了这个问题。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-02-22T10:17:45.717

感谢此线程上的其他人的建议。按照上面提到的步骤，我发现 apache 服务器无法开始报告`load`. `/etc/apache2/mods-enabled`原来 php7.0 和 php7.1 都被启用了。

```
a2dismod php7.0
systemctl restart apache2 
```

并且 php 再次正确呈现。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-08-16T15:39:12.470

将以下配置添加到`/etc/apache2/apache2.conf`

```
<FilesMatch "\.php$">
    SetHandler application/x-httpd-php
</FilesMatch> 
```

并重新启动`apache`通过`sudo service apache2 restart`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-09-16T01:37:28.313

您可以删除您的*.htaceess*文件并让系统创建一个新的（空白或基本）文件。可能是您添加的某些行是不正确的语句，或者是内部的其他内容导致了问题。*然后，您可以从旧的.htaccess*文件中逐行添加，以查看导致问题的原因。

这对我有用。在我的情况下，告诉机器不要显示 php 扩展的行是问题（*RewriteCond*和*RewriteRule*）。我的旧*.htaccess*文件在共享服务器上运行良好，但是当我切换到 VPS 时出现了这个问题。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-09-19T17:28:12.040

在 MAMP 中运行 $_POST 时，我也遇到了这种情况。我所有的 .ini 和 httpd 文件都设置正确。如果您正在处理表单并且您有一个 html 文档并将信息发布到运行 $POST 的 php 表单处理程序，请确保您正在通过您的服务器从 localhost 运行 html 文件，而不仅仅是在本地运行。

这是我运行 html 文档的快捷方式，只需单击目录中的 html 文件并在我的 Web 浏览器中启动，实际上要检查您的表单中是否正在处理 php，您必须通过服务器运行 html。我忽略了一个非常简单的协议。

例子：

错误的：`file:///Applications/MAMP/htdocs/form/form.html`

对：`http://localhost:your port number/form/form.html`

现在，一旦您单击提交按钮，就应该处理 php

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-12-06T13:03:05.010

如果您是 ubuntu 用户，安装 apache 后必须在全新安装中运行以下命令

```
sudo apt-get install php5 libapache2-mod-php5 php5-mcrypt 
```

在我的情况下工作正常。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-01-22T21:24:46.800

对于 PHP7 和 Apache2.4，这就是您需要做的所有事情：

```
sudo vim /etc/httpd/conf/httpd.conf 
```

转到最底部并插入以下内容（全部单独）：

```
<FilesMatch "\.*">
SetHandler application/x-httpd-php
</FilesMatch> 
```

然后，重新启动 Apache 以加载新配置：

```
sudo service httpd restart 
```

Apache 现在将使用 PHP 执行所有 HTTP/S 请求。如果您只有 html、css 和 php 文件，那么这对您来说很好。如果您正在运行其他语言，则需要根据您的情况定制文件。我已经用 phpMyAdmin 对此进行了测试，它工作正常。

所有人在这里谈论的其他东西对我来说都不是必需的。当我将“AddType Application .....”放在正确的位置时，Apache 只是告诉我该模块已经加载并跳过了它。

更多信息可以在这里找到： [https ://httpd.apache.org/docs/2.4/mod/core.html#filesmatch](https://httpd.apache.org/docs/2.4/mod/core.html#filesmatch)

我的安装完成如下：

```
sudo yum install -y httpd24 php70 mysql56-server php70-mysqlnd 
```

如果您还没有，您还应该阅读此内容： [https ://httpd.apache.org/docs/current/howto/htaccess.html#when](https://httpd.apache.org/docs/current/howto/htaccess.html#when)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-03-07T20:11:47.190

如果模块 userdir 已启用并且您的站点位于 userdir (~/public_html) 中，则必须检查 /etc/apache2/mods-enabled/php5.conf。以下部分使其工作（在 Ubuntu 14.10 utopic 上）：

```
# Running PHP scripts in user directories is disabled by default
# 
# To re-enable PHP in user directories comment the following lines
# (from <IfModule ...> to </IfModule>.) Do NOT set it to On as it
# prevents .htaccess files from disabling it.

# <IfModule mod_userdir.c>
#     <Directory /home/*/public_html>
#        php_admin_flag engine Off
#    </Directory>
# </IfModule> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-04-08T15:39:46.413

什么对我有用：

在活动的 httpd.conf 中，找到

```
<IfModule mime_module>
...
</IfModule> 
```

它缺少以下内容

```
AddType application/x-httpd-php .php
AddHandler application/x-httpd-php .php 
```

重新启动 apache 后，正确解析 .php 文件。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-07-30T18:46:18.133

以上都不适用于我... PHP7，Apache Httpd 2.2 on CentOS 6

事实上，我在 Apache 之前安装了（全部使用 yum）php ......你必须做相反的事情：总是先安装 Apache，然后是 PHP，然后它就可以工作了......事实上，你很可能错过`libphp7.so`了`libphp7-zts.so``/etc/httpd/modules/`

我无论如何都能够在不卸载 PHP 的情况下恢复。我确实在`/etc/httpd/conf/httpd.conf`:中添加了魔法线，`AddType application/x-httpd-php .php` 然后运行：`yum install php php-mysql`

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-03-10T13:16:52.970

我尝试了上面的一些解决方案，但是我们场景中的修复是安装 fpm-module。

我们在 php 之前安装了 httpd，这可能与问题有关，但为了解决我们安装了以下内容：

# yum 模块安装 php:7.2

这安装了 php-fpm-7.2.11-4.module+el8.1.0+5443+bc1aeb77.x86_64.rpm 模块，然后我们通过以下方式启用：

# systemctl enable --now php-fpm

从那时起，我们将 /etc/httpd/conf.d/php.conf 保留为默认值并重新启动 httpd

# 服务 httpd 重启

然后一切正常。

希望这会有所帮助，花费的时间比它应该弄清楚的要长。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-07-10T11:20:37.270

我遇到了同样的问题，这是由 Debian/Ubuntu 默认配置的 module 引起的`suphp`。它包含`suPHP_Engine off`整个 /usr/share，导致浏览器中显示 php 源。停用`a2dismod suphp`是临时解决方案。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-10-26T20:00:05.197

我有同样的问题。当我运行一个 php 文件时，网络浏览器向我显示了 php 代码而不是执行它。我尝试了很多次：卸载/重新安装 wampserver64，解决 PHP/Apache 设置/模块等。 2 天后：我意识到当我尝试通过按默认组合“ctrl +”在记事本 ++ 中运行 php 文件时alt + shift + R" 用于镀铬。它试图在我的 chrome 地址栏中执行我的 php 文件，例如：“file///C:/wamp64/www/bla/bla..”。那是我的问题。我根据页面[配置 Notepad++ 以在 localhost 上运行 php 进行了更改？](https://stackoverflow.com/questions/7536238/configuring-notepad-to-run-php-on-localhost). 我的问题解决了。但是2天后..

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-03-15T20:30:34.390

以管理员身份运行 Xampp (apache)。在谷歌浏览器类型：

`localhost/<insert folder name here>/<insert file name>`

即如果您创建的文件夹是“LearnPhp”，文件是“chapter1.php”然后输入

`localhost/LearnPhp/chapter1.php`

我在下载 xampp 时创建的 htdocs 文件夹中的 xampp 文件夹中创建了此文件夹。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-01-17T15:09:00.787

Debian 9 解决方案：

```
touch /etc/apache2/conf-available/php.conf 
```

添加到文件下一行：

```
<IfModule mod_php5.c>
    <IfModule mod_mime.c>
        AddType application/x-httpd-php .php
    </IfModule>
    <FilesMatch ".+\.php$">
        SetHandler application/x-httpd-php
    </FilesMatch>
</IfModule>
<IfModule mod_php.c>
    <IfModule mod_mime.c>
        AddType application/x-httpd-php .php
    </IfModule>
    <FilesMatch ".+\.php$">
        SetHandler application/x-httpd-php
    </FilesMatch>
</IfModule> 
```

然后运行：

```
a2enconf php && service apache2 restart 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-08-28T06:05:16.770

有时如果你有 php 版本冲突，它会发生要克服这个问题，请按照以下步骤操作

第 1 步：安装 Yum 列表 | grep 'php'

> 如果您有多个版本的 php，例如 php 5.6 和 php 7.0，则会发生此冲突

第 2 步：yum 删除 **您的 php 版本 **

第 3 步：然后重新启动 apapche`/etc/init.d/httpd restart`或`service apache2 restart`

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-12-08T19:04:13.597

这个[解决方案](https://askubuntu.com/a/1000700)对我有用。我清除了 apache2 并重新安装。它发生在清除和安装之后。如果是第一次安装，就不会遇到这个问题。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-08-24T10:43:39.477

在我使用 PHP7.3 Apache2.4 Ubuntu 18.04 的情况下，我必须执行：

```
$ a2enmod actions fastcgi alias proxy_fcgi 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-05-14T08:50:47.683

### Centos 7、PHP 8、Apache 2

我最近升级了一个 centos 服务器以使用 php 8。

升级后 php 停止工作，apache 开始为我提供 php 代码作为文本。

花了很长时间寻找未更新的配置设置后，我将其追踪到：

在`/etc/httpd/conf.d`

```
<IfModule  mod_php7.c> 
```

需要更改为：

```
<IfModule  mod_php.c> 
```

在其他地方，您可能会看到`mod_php7`可能会更新为`mod_php`变体的检查，但这个肯定为我修复了它。

之后不要忘记重新启动服务器。

# python - 运行带有参数的 python 脚本

> ID：12142174
> 
> 赞同：23
> 
> 时间：2012-08-27T12:40:56.677
> 
> 标签：python, c, eclipse

我想从 C 调用 Python 脚本，传递脚本中需要的一些参数。

我要使用的脚本是 mrsync 或多[播远程同步](http://sourceforge.net/projects/mrsync/)。我通过调用以下命令从命令行得到了这个工作：

```
python mrsync.py -m /tmp/targets.list -s /tmp/sourcedata -t /tmp/targetdata 
```

> -m 是包含目标 IP 地址的列表。-s 是包含要同步的文件的目录。-t 是目标机器上将放置文件的目录。

到目前为止，我设法通过使用以下 C 程序运行了一个不带参数的 Python 脚本：

```
Py_Initialize();
FILE* file = fopen("/tmp/myfile.py", "r");
PyRun_SimpleFile(file, "/tmp/myfile.py");
Py_Finalize(); 
```

这工作正常。但是，我找不到如何将这些参数传递给`PyRun_SimpleFile(..)`方法。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-29T19:42:51.827

似乎您正在使用 Python.h 中的 python 开发 API 寻找答案。这是一个应该工作的例子：

```
#My python script called mypy.py
import sys

if len(sys.argv) != 2:
  sys.exit("Not enough args")
ca_one = str(sys.argv[1])
ca_two = str(sys.argv[2])

print "My command line args are " + ca_one + " and " + ca_two 
```

然后是传递这些参数的 C 代码：

```
//My code file
#include <stdio.h>
#include <python2.7/Python.h>

void main()
{
    FILE* file;
    int argc;
    char * argv[3];

    argc = 3;
    argv[0] = "mypy.py";
    argv[1] = "-m";
    argv[2] = "/tmp/targets.list";

    Py_SetProgramName(argv[0]);
    Py_Initialize();
    PySys_SetArgv(argc, argv);
    file = fopen("mypy.py","r");
    PyRun_SimpleFile(file, "mypy.py");
    Py_Finalize();

    return;
} 
```

如果您可以将参数传递给您的 C 函数，则此任务将变得更加容易：

```
void main(int argc, char *argv[])
{
    FILE* file;

    Py_SetProgramName(argv[0]);
    Py_Initialize();
    PySys_SetArgv(argc, argv);
    file = fopen("mypy.py","r");
    PyRun_SimpleFile(file, "mypy.py");
    Py_Finalize();

    return;
} 
```

你可以直接通过这些。现在我的解决方案出于时间原因只使用了 2 个命令行参数，但是您可以对需要传递的所有 6 个参数使用相同的概念......当然还有更简洁的方法来捕获 python 端的参数，但是这只是基本的想法。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-27T12:51:53.997

你有两个选择。

1.  称呼

    ```
    system("python mrsync.py -m /tmp/targets.list -s /tmp/sourcedata -t /tmp/targetdata") 
    ```

    在你的 C 代码中。

2.  实际使用`mrsync`（希望）定义的 API。这更灵活，但更复杂。第一步是弄清楚如何将上述操作作为 Python 函数调用执行。如果`mrsync`写得很好，就会有一个函数`mrsync.sync`（比如说）你称之为

    ```
    mrsync.sync("/tmp/targets.list", "/tmp/sourcedata", "/tmp/targetdata") 
    ```

    一旦确定了如何执行此操作，就可以使用 Python API 直接从 C 代码调用该函数。

# iphone - 通过 SKPSMTPMessage 在 iPhone 中发送直邮

> ID：12142175
> 
> 赞同：0
> 
> 时间：2012-08-27T12:40:57.777
> 
> 标签：iphone, smtp

我正在尝试发送直接邮件。据我所知，对于直接邮件，即不应出现其他控制器，邮件应通过 myController 单击按钮发送，所以，我们不能使用`MFMailComposeViewController`。所以，我使用的是 SKPSMTPMessage。对于 SKPSMTPMessage，我已经完成了主要设置，并且我可以使用临时数据发送邮件。我没有得到的一些东西：比如..

```
testMsg.fromEmail = @“from@gmail.com”;

testMsg.toEmail = @“to@gmail.com”;

testMsg.relayHost = @"smtp.gmail.com";

testMsg.requiresAuth = YES;

testMsg.login = @“from@gmail.com";

testMsg.pass = @"mypassword”; 
```

在这里，我们必须通过 testMsg.login/testMsg.pass。现在我使用一些临时用户 ID 和相应的密码。但是在我的应用程序中，我无处询问/获取他的密码的任何详细信息，只有我得到了他的电子邮件 ID。所以，我的问题是......即使 m 没有获取用户密码，是否可以发送邮件。如果没有，使用 SKPSMTPMessage 发送邮件的最合适方式是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:43:31.280

Following code for just applying the settings over following code.

```
 + (void)initialize {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *defaultsDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"me@example.com", @"fromEmail",
                                               @"you@example.com", @"toEmail",
                                               @"smtp.example.com", @"relayHost",
                                               @"me@example.com", @"login",
                                               @"SekritSquirrel", @"pass",
                                               [NSNumber numberWithBool:YES], @"requiresAuth",
                                               [NSNumber numberWithBool:YES], @"wantsSecure", nil];

    [userDefaults registerDefaults:defaultsDictionary];
} 
```

# facebook - 如何在没有 apps.facebook 链接的情况下显示 facebook 应用程序

> ID：12142177
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:41:07.327
> 
> 标签：facebook

我有一个 facebook iframe 应用程序，该应用程序可以通过链接正确打开，`https://apps.facebook.com/<app_name>` 但是我希望它可以使用类似的配置文件打开`https://www.facebook.com/<name>/app_<app_id>`。例如：[https ://www.facebook.com/inwi.ma/app_425874907457614](https://www.facebook.com/inwi.ma/app_425874907457614)

知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:43:38.970

What you need to do is add this application as a page tab to gain accces to a URL like that.

More info on how to get started with your tab application can be found on Facebook's documentation - [https://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

# facebook - activeX 继续在 Facebook 应用程序中运行

> ID：12142181
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:41:21.450
> 
> 标签：facebook, activex

我想创建一个使用 ActiveX 的 FB 应用程序。在用户离开应用程序页面并转到其他一些 FB 页面后，有没有办法让 ActiveX 运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:53:12.980

> 在用户离开应用程序页面并转到其他一些 FB 页面后，有没有办法让 ActiveX 运行？

您可以轻松地将此处的“ActiveX”替换为“任何类型的插件内容”，并且答案仍然与网络上多年来的答案相同：

如果它所在的页面被卸载，插件内容当然会停止播放。

在 facebook.com 中，您唯一的选择是打开一个弹出窗口并在该窗口中播放您的插件内容。

# c - C初学者的书

> ID：12142190
> 
> 赞同：0
> 
> 时间：2012-08-27T12:41:52.210
> 
> 标签：c, algorithm, data-structures

我是一名 PHP 开发人员，现在我想学习 C 有几个原因。

1.  我缺乏Java知识，以及数据结构和算法。
2.  PHP 是用 C 语言编写的。

最重要的是第一个原因。我不想深入研究 C，但至少我能理解 C 程序在做什么。有谁知道我应该如何进行？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:45:17.253

这可能是错误的做法。首先学习编程背后的基本理论，即算法和数据结构。这些是语言中立的。

比尝试学习一种语言及其语法来编写你的算法。为了回答你的问题，一本好书是[C 简而言之](http://www.oreilly.de/catalog/9780596006976/)，但它不会教你编程的基础知识。

然后还有发明 C 的 Kernighan&Ritchie所著的《 [The C Programming Language 》一书。](https://rads.stackoverflow.com/amzn/click/com/0131103628)

# ruby - Ruby：Ruby 中实例变量和局部变量之间的区别

> ID：12142193
> 
> 赞同：7
> 
> 时间：2012-08-27T12:42:08.480
> 
> 标签：ruby

> **可能重复：**
> [Rails 和类变量](https://stackoverflow.com/questions/11523547/rails-and-class-variables)

谁能告诉我 Ruby 实例变量和局部变量有什么区别？

据我所知，实例变量和局部变量都是相同的，并且都在方法本身内部声明，除了实例变量使用@符号表示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T13:19:51.317

这是一个[范围](http://www.techotopia.com/index.php/Ruby_Variable_Scope)问题。局部变量仅在定义它的方法中可见/可用（即，当方法返回时它会消失）。

另一方面，实例变量在定义它的类的实例中的任何其他地方都是可见的（这与在类的所有实例之间共享的类变量不同）。但请记住，定义实例变量*时很重要。*如果您在一个方法中定义了一个实例变量，但在调用第一个方法之前尝试在另一个方法中使用它，您的实例变量将具有 nil 值：

```
def method_one
  @var = "a variable"

  puts @var
end

def method_two
  puts @var
end 
```

@var 将有不同的值，具体取决于您调用每种方法的时间：

```
method_two() # Prints nil, because @var has not had its value set yet

method_one() # Prints "a variable", because @var is assigned a value in method_one

method_two() # Prints "a variable" now, because we have already called method_one 
```

# javascript - 通过 javascript 在 web.config 文件中引用 WCF 服务

> ID：12142194
> 
> 赞同：0
> 
> 时间：2012-08-27T12:42:09.523
> 
> 标签：javascript, asp.net, wcf, web-config

我有一个 asp.net webforms 网站和一个 wcf 服务。我使用 jQuery 执行与 WCF 服务之间的 AJAX 操作，如下所示：

```
$.ajax({
    type: "POST",
    url: "192.168.1.24/ServiceMain.svc/" + serviceName,
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    data: "{}",
    cache: true,
    success: function (json)
    {
       //Success operation here
    },
    error: function ()
    {
        //Error operation here
    }
}); 
```

现在一切都很好。但是，我希望能够做一个测试和生产环境，两者都将托管在具有不同 IP 地址的不同服务器上。

显然，如果不加以检查，硬编码 URL 以指向正确的 WCF 服务将成为一个乏味的问题。因此，我想知道检索 WCF 服务 URL 的最佳方法是什么。我考虑过使用*web.config*文件，如下所示：

`<%=ConfigurationManager.AppSettings("SomeWCFKey")%>`

但是，我不确定如何正确引用我的 web.config 文件中的地址：

```
<endpoint address="http://192.168.1.24/ServiceMain.svc" 
binding="basicHttpBinding" 
bindingConfiguration="BasicHttpBinding_IServiceMain" 
contract="ServiceMain.IServiceMain" 
name="BasicHttpBinding_IServiceMain" /> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:50:30.193

嗨，我认为您确实想阅读可以通过此代码获得的端点地址

```
private List<string> GetEndpoints() 
{
     var endpointList = new List<string>();
     var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
     var serviceModel = ServiceModelSectionGroup.GetSectionGroup(config);
      foreach (ChannelEndpointElement endpoint in serviceModel.Client.Endpoints)
     {
         endpointList.Add(endpoint.Address.ToString());
     }
      return endpointList; 
} 
```

这是详细描述 mroe 的 pont：[Getting WCF Bindings and Behaviors from any config source](http://weblogs.asp.net/cibrax/archive/2010/05/11/getting-wcf-bindings-and-behaviors-from-any-config-source.aspx)

这也可能对您有所帮助：[以编程方式枚举 app.config 中定义的 WCF 端点](http://mostlytech.blogspot.ca/2007/11/programmatically-enumerate-wcf.html)

# python - Django：userena编辑个人资料被禁止

> ID：12142195
> 
> 赞同：3
> 
> 时间：2012-08-27T12:42:14.330
> 
> 标签：python, django, user-profile

我已经安装`django-userena`来管理用户配置文件并且一切正常，除了新注册用户无法编辑/更新他们的配置文件并且只面对空白屏幕。

如果我让用户成为超级用户，那么它可以更改/更新配置文件。

发现那个`profile_edit`视图`django-userena`装饰有`@permission_required_or_403('change_profile', (get_profile_model(), 'user__username', 'username'))`

显然需要添加`post_save`信号以添加必要的权限，但我想知道是否有任何设置，比如`USERENA_ALLOW_UPDATE_PROFILE`有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:13:59.903

最后挖掘`django-userena`和`django-guardian`来源我展示了我的这个小研究的输出，所以如果你希望用户能够编辑他们的个人资料，你可以使用下面的代码

## 用户发布保存信号，向新用户对象添加“change_profile”权限

```
@receiver(post_save, sender=User, dispatch_uid='user.created')
def user_created(sender, instance, created, raw, using, **kwargs):
  """ Adds 'change_profile' permission to created user objects """
  if created:
    from guardian.shortcuts import assign
    assign('change_profile', instance, instance.get_profile()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-10T03:08:50.400

对于现有用户，只需发出此命令，页面即可运行：

```
python manage.py check_permissions 
```

# iphone - 检查是否为 UIViewController 更改了任何文本字段、文本视图或标签..？

> ID：12142197
> 
> 赞同：0
> 
> 时间：2012-08-27T12:42:23.910
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

我有一个视图控制器，它包含 n 个`UITextFields`and `UItextViews`，`UILabels`如果它们中的任何一个发生变化，我是否可以得到通知..？

我可以通过手动查看它们各自`TextDidChangeNotification`和相似的方式来做到这一点，但我正在寻找一种更优化的方式来做到这一点，我不必担心它们中的每一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:39:31.817

```
// Assumes you don't use tag values now - if you do small change to create
// and index set, add the ones you use, so all new ones assigned are unique.
// assumes ARC 
```

1) 新伊瓦尔：

```
{
    NSMutableDictionary *savedValues; 
} 
```

1）当您想要基线值时：

```
savedValues = [self snapshot]; 
```

2）最初将其称为基线当前值，然后在以后的任何时间点：

```
- (NSMutableDictionary *)snapshot
{
    NSInteger tag = 1;
    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithCapacity:[self.view.subviews count]];

    for(UIView *v in self.view.subviews) {
        if([v isKindOfClass:[UILabel class]] || [v isKindOfClass:[UITextField class]] || [v isKindOfClass:[UITextView class]]) {
            if(v.tag == 0) v.tag = tag++; // will happen once
            // EDIT below
            [dict setObject:[NSString stringWithString:[(id)v text]] forKey:[NSNumber numberWithInteger:tag]];
        }
    }
    return dict;
} 
```

4）当您想查看是否有任何变化时：

```
- (BOOL)anyChanges
{
    NSDictionary *currentDict = [self snapshot];
    return [currentDict isEqualToDictionary:savedValues];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:51:54.333

让您的类处理文本字段中的 UIControlEventValueChanged 事件，文本视图或标签的值发生更改。添加这一行 ViewDidLoad 方法：

```
 [youLabel addTarget:self action:@selector(valueChanged:) 
          forControlEvents:UIControlEventValueChanged];  
  // add for textfield, textview also if needed
  [youTextField addTarget:self action:@selector(valueChanged:) 
          forControlEvents:UIControlEventValueChanged];
  [youTextView addTarget:self action:@selector(valueChanged:) 
          forControlEvents:UIControlEventValueChanged]; 
```

现在当值改变时会调用选择器

```
- (void) valueChanged:(id)sender{
  if(sender isKindofClass[UILabel class])
  {
    //label value changed here to differntiate used tag
    if([sender tag] == 0) 
     ....
     ....
  }
  else if(sender isKindofClass[UITextField class])
  {
    // textField value changed to differntiate used tag
    if([sender tag] == 0) 
     ....
     ....
  }
  else if(sender isKindofClass[UITextView class])
  {
    // textview value changed to differntiate used tag
    if([sender tag] == 0) 
     ....
     ....
  }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:01:24.480

您应该对所有文本字段、文本视图和标签使用一种方法。并给 textFields 和 textViews 和标签一个唯一的标签。这可以帮助您定义它的 textField、textView 或 Label。

```
if(sender.tag == 1000)//UILabel
{

    UILabel *label=(UILabel *)sender

      //write own code for label what do you want.

}
 else if(sender.tag == 2000)//UITextField
{
    UITextField *textField=(UITextField *)sender

      //write own code for textField what do you want.

}
else if(sender.tag == 3000)// UITextView
{
    UITextView *textView=(UITextView *)sender

      //write own code for textView what do you want.

} 
```

# mysql - 用户使用的第一个项目

> ID：12142198
> 
> 赞同：2
> 
> 时间：2012-08-27T12:42:26.450
> 
> 标签：mysql, group-by, inner-join

我正在编写一个查询来获取特定 user_id 是第一个使用的项目。这是一些示例数据 -

```
item_id used_user_id    date_used
1       1               2012-08-25
1       2               2012-08-26               
1       3               2012-08-27
2       2               2012-08-27
3       1               2012-08-27
4       1               2012-08-21
4       3               2012-08-24
5       3               2012-08-23 
```

询问

```
select item_id as inner_item_id, ( select used_user_id 
                                   from test 
                                   where test.item_id = inner_item_id 
                                   order by date_used asc 
                                   limit 1 ) as first_to_use_it 
from test 
where used_user_id = 1 
group by item_id 
```

它返回正确的值

```
inner_item_id   first_to_use_it
1               1
3               1
4               1 
```

但是在一张巨大的桌子上查询非常慢。是否有我可以使用的某个索引或我可以编写的更好的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:50:25.247

我无法准确理解您的意思，因为在您的内部查询中，您已经按他们的排序，`used_user_id`并且在您的外部查询中，您还按他们的用户 ID 对其进行了过滤。为什么不直接这样做呢？

```
SELECT DISTINCT item_id AS inner_item_id,
       used_user_id AS first_to_use_it 
FROM   test
WHERE  used_user_id = 1 
```

**更新 1**

```
SELECT  b.item_id, 
        b.used_user_id AS first_to_use_it
FROM
    (
        SELECT item_ID, MIN(date_used) minDate
        FROM tableName
        GROUP BY item_ID
    ) a
        INNER JOIN tableName b
            ON a.item_ID = b.item_ID AND
                a.minDate = b.date_used
WHERE   b.used_user_id = 1 
```

# c# - 仅当我在上面放置断点时，重新启动站点才有效

> ID：12142201
> 
> 赞同：0
> 
> 时间：2012-08-27T12:42:40.210
> 
> 标签：c#, visual-studio-2010, iis-7, servermanager

# 语境

我使用`ServerManager`该类在站点上执行一些操作。

实际上，我删除了 a 上的绑定（http/https），`site1`然后在`site2`.

我用`.CommitChanges()`.

之后，问题是 IIS 关闭了该站点。所以我用`site2.Start()`重新启动站点。

但这不起作用......除非我在`site2.Start()`.

知道发生了什么吗？你有解决方案吗？

# 完整代码（在最后一行重新启动）

```
var serverManager = new ServerManager();
var regex = new Regex("^(http|https)://");
var host = regex.Replace(url, "");
var instance = serverManager.Sites.First(site => site.Bindings.Any(binding => binding.Host == host));
var pool = instance.Applications[0].ApplicationPoolName;
var bindingHttp = instance.Bindings.First(attr => attr.Host == host && attr.Protocol == "http");
var bindingHttps = !host.Contains("xxx") ? instance.Bindings.First(attr => attr.Host == host && attr.Protocol == "https") : null;
var bindingHttpInformation = bindingHttp.BindingInformation;
var bindingHttpsInformation = !host.Contains("xxx") ? bindingHttps.BindingInformation : null;
var certificateHash = !host.Contains("xxx") ? bindingHttps.CertificateHash : null;
var certificateStoreName = !host.Contains("xxx") ? bindingHttps.CertificateStoreName : null;
var newSiteName = getPoolOrSiteName(pool);
var newSite = serverManager.Sites.First(attr => attr.Name == newSiteName);
var bindingCollection = newSite.Bindings;

instance.Bindings.Remove(bindingHttp);

if (!host.Contains("xxx"))
{
    instance.Bindings.Remove(bindingHttps);

    var binding = newSite.Bindings.CreateElement("binding");
    binding["protocol"] = "https";
    binding["certificateHash"] = certificateHash;
    binding["certificateStoreName"] = certificateStoreName;
    binding["bindingInformation"] = bindingHttpsInformation;
    bindingCollection.Add(binding);
}

var binding2 = newSite.Bindings.CreateElement("binding");
binding2["protocol"] = "http";
binding2["bindingInformation"] = bindingHttpInformation;
bindingCollection.Add(binding2);

serverManager.CommitChanges();

newSite.Start(); //only works if I put a breakpoint here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:46:57.710

我认为这是一个时间问题。当您使用 IIS 管理控制台停止站点并随后尝试启动它时，情况也是如此。你必须给它一些时间来完成停止。所以（警告：丑陋的）睡眠可能会：

```
System.Threading.Thread.Sleep(5000); 
```

它在调试时起作用的事实是因为您在继续之前给了它延迟。

# xcode - 如何在 AppCode 中关闭编译器优化

> ID：12142204
> 
> 赞同：1
> 
> 时间：2012-08-27T12:42:46.397
> 
> 标签：xcode, appcode

我正在将一个 iOS 项目移植到 Android。我需要逐步了解 Objective C 类中的方法，以了解它们是如何工作的，并帮助编写单元测试来验证我的端口。AppCode 是我选择的武器。

问题是，在调试时，我经常得到“由于优化而暂时不可用的值”，并且我无法检查大多数类、列表和数组。

我在 Xcode 中打开了项目并将编译器优化设置为“无”，然后在 AppCode 中打开它。我还尝试从 AppCode 中打开 Xcode 中的项目（File-> Open project in Xcode）。尽管项目属性没有显示优化，但我仍然无法查看大多数变量。我还在调试窗口中重复了变量，并且执行点在单步执行时会在代码周围跳转。这让我相信优化仍然处于开启状态。

我已经通过 AppCode 中的调试首选项尝试使用 GDB 和 LLDB。

谁能拯救我的理智？

谢谢

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:34:11.583

您是否检查过您正在使用的运行/调试配置（在 AppCode 中）是调试（而不是发布）配置？运行 -> 编辑配置会弹出一个对话框，您可以在其中编辑每个配置。确保“配置”下拉菜单设置为“调试”。

# php - REST 基础与 php

> ID：12142205
> 
> 赞同：6
> 
> 时间：2012-08-27T12:42:47.333
> 
> 标签：php, rest

我正在尝试学习 REST 的基础知识，并且找到了一个非常好的教程（至少它帮助我理解了基础知识）。[这是我一直在关注的教程](http://phpmaster.com/rest-can-you-do-more-than-spell-it-2/)。

无论如何，在这段代码片段中，作者展示了网站如何使用类似`www.example.com/restaurant/42 instead of /?restaurant_ID=42`.

谁能解释为什么使用它

```
explode("/", $path, 2); 
instead of
explode("/", $path); 
```

对于此示例，它们将生成相同的数组，但如果它是更长的路径，例如`Restaurant/item/3`？你不想把所有东西都分开吗？如您所见，在此块的更下方，他们确实使用了没有定义限制的爆炸。第一个只是为了资源吗？（如果它是 MVC，我猜是控制器）

```
<?php
// assume autoloader available and configured
$path = parse_url($_SERVER["REQUEST_URI"], PHP_URL_PATH);
$path = trim($path, "/");
@list($resource, $params) = explode("/", $path, 2); //why is limit used here?

$resource = ucfirst(strtolower($resource));
$method = strtolower($_SERVER["REQUEST_METHOD"]);
$params = !empty($params) ? explode("/", $params) : array();  //no limit here?

if (class_exists($resource)) {
 try {
    $resource = new $resource($params);
    $resource->{$method}();
}
catch (Exception $e) {
    header("HTTP/1.1 500 Internal Server Error");
}
}
else {
header("HTTP/1.1 404 File Not Found");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:51:53.727

它首先将整个路径拆分为一个*资源*和一个*参数*变量。`$resource`将包含第一个元素，`$params`其余的。例如：

```
restaurant/42      -> restaurant, 42
restaurant/item/3  -> restaurant, item/3
foo/bar/baz/boom   -> foo, bar/baz/boom 
```

然后，`$params`字符串进一步分解为单个项目：

```
restaurant/42      -> restaurant, (42)
restaurant/item/3  -> restaurant, (item, 3)
foo/bar/baz/boom   -> foo, (bar, baz, boom) 
```

从本质上讲，它是对第一部分进行特殊处理。

你可以得到同样的效果：

```
$params   = explode('/', $path);
$resource = array_shift($params); 
```

# mysql - 透视此联合查询的结果？

> ID：12142206
> 
> 赞同：0
> 
> 时间：2012-08-27T12:42:50.070
> 
> 标签：mysql, sql, sql-server-2008

我对这些表具有只读访问权限，并且需要构建一个查询，该查询将根据每个零件编号的图像记录数列出零件编号记录的计数。本质上，我需要将结果格式化为：

vendor_desc|带有 1 张图像的部件计数|带有 2 张图像的部件计数|...

供应商XYZ|250|307

我做了这个联合查询，在一列中列出了结果，但需要按图像数量分隔列。这是我的联合查询：

```
SELECT vnd.vendor_desc,
       Count(img1.[part#]) part
FROM   [mytable].[dbo].[parts_images] AS img1
       INNER JOIN mytable.dbo.vendors AS vnd
               ON vnd.vendor_id = LEFT(img1.part#, 3)
       INNER JOIN (SELECT img2.part#,
                          Count(img2.image_file)images
                   FROM   [mytable].[dbo].[parts_images] AS img2
                   GROUP  BY img2.part#
                   HAVING ( Count(img2.image_file) = 1 )) AS img2
               ON img1.part# = img2.part#
GROUP  BY vendor_desc

UNION

SELECT vnd.vendor_desc,
       Count(img1.[part#]) part
FROM   [mytable].[dbo].[parts_images] AS img1
       INNER JOIN mytable.dbo.vendors AS vnd
               ON vnd.vendor_id = LEFT(img1.part#, 3)
       INNER JOIN (SELECT img2.part#,
                          Count(img2.image_file)images
                   FROM   [mytable].[dbo].[parts_images] AS img2
                   GROUP  BY img2.part#
                   HAVING ( Count(img2.image_file) = 2 )) AS img2
               ON img1.part# = img2.part#
GROUP  BY vendor_desc
ORDER  BY vendor_desc 
```

提前致谢！

这是我正在寻找的结果的查询：

```
SELECT vnd.vendor_desc,
       Count(img2.[part#]) part
       ,COUNT(img3.part#)
FROM   mytable.[dbo].[parts_images] AS img1
       INNER JOIN mytable.dbo.vendors AS vnd
               ON vnd.vendor_id = LEFT(img1.part#, 3)
       left JOIN (SELECT img2.part#,
                          Count(img2.image_file)images
                   FROM   mytable.[dbo].[parts_images] AS img2
                   GROUP  BY img2.part#
                   HAVING ( Count(img2.image_file) = 1 )) AS img2
               ON img1.part# = img2.part#
               left JOIN (SELECT img3.part#,
                          Count(img3.image_file)images
                   FROM   mytable.[dbo].[parts_images] AS img3
                   GROUP  BY img3.part#
                   HAVING ( Count(img3.image_file) = 2 )) AS img3
               ON img1.part# = img3.part#
GROUP  BY vendor_desc
order by vendor_desc 
```

感谢您的帮助，波迪卢斯卡！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:45:41.107

所以

```
SELECT *
FROM (yourunionquery) src
PIVOT
(COUNT(vendor_desc) FOR part IN ([1],[2],[3], ... )) p 
```

如果您需要可变数量的列，则必须使用动态 SQL 构建此查询以填充结果列

# c - 如何关闭 C 源代码中的指定警告？

> ID：12142208
> 
> 赞同：2
> 
> 时间：2012-08-27T12:42:57.253
> 
> 标签：c, gcc, compile-time

例如，我怎样才能摆脱`warning: unnamed struct/union that defines no instances`源文件中的“”，而不是通过编译器命令行选项。

我想定义一个 C 宏 `CONST_BUG_ON`，我用它在编译时检查一些 const 值。

```
#define CONST_BUG_ON(e)        struct  {int a:!(e);} 
```

它发出警告`warning: unnamed struct/union that defines no instances`，但在这种情况下，它不是一个真正的问题。

谢谢汤姆坦纳

```
#define CONST_BUG_ON_3(e, l) struct buggy##l {int a:!(e);}
#define CONST_BUG_ON_2(e, l) CONST_BUG_ON_3(e, l)
#define CONST_BUG_ON(e) CONST_BUG_ON_2(e, __LINE__) 
```

这很好，但仍然存在一些问题：如果 file`a`的第 6 行包含 CONST_BUG_ON(e)，并且 file 包含`a`在 file 中`b`，并且文件的第 6 行也`b`包含 CONST_BUG_ON(e)，则 gcc 会抱怨重新定义错误。使用`__COUNTER__`instade`__LINE__`可能完美，但我的旧编译器不支持`__COUNTER__`.

谢谢 Basile Starynkevitch

```
#define CONST_BUG_ON(e) do { \
   int tab[__builtin_constant_p(e)?1:-1] = {0}; \
   if (tab[0]) abort(); } while (0) 
```

这是一个C语句，只能放在函数中，我很想在函数外使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:11:30.523

解决编译器投诉的一种方法是您有一个未定义任何实例的未命名结构是给它一个名称：

```
#define CONST_BUG_ON(e)        struct ForDebuggingOnly {int a:!(e);} 
```

获取所需表达式测试的另一种方法是声明（但不定义）一个具有非法大小的数组（如果`e`为真）：

```
#define CONST_BUG_ON(e)    extern int ForDebuggingOnly[(e) ? -1 : 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:25:48.107

看起来您尝试的方法称为**编译时断言**或**编译时断言**宏。有多种方法可以做到这一点，通常在断言失败时涉及具有负维度的数组。许多项目都调用这个宏`CT_ASSERT()`，并且有[一堆](https://stackoverflow.com/search?q=compile%20time%20assert)与它们相关的 Stackoverflow 问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:47:06.710

假设一个最近的 GCC 编译器，你可以使用[__builtin_constant_p](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Other-Builtins.html)来测试编译时常量，也许使用

```
 #define CONST_BUG_ON(e) do { \
       int tab[__builtin_constant_p(e)?1:-1] = {0}; \
       if (tab[0]) abort(); } while (0) 
```

对于您关于忽略某些警告的问题，也许[GCC 诊断编译指示](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Diagnostic-Pragmas.html)会有所帮助。

如果您希望您`CONST_BUG_ON`仅在声明上下文中工作，您可以尝试

```
 #define CONST_BUG_ON(e) CONST_BUG_AT(e,__LINE__)
  #define CONST_BUG_AT(e,l) \
     extern int tab_##l[__builtin_constant_p(e)?0:-1]; 
```

最后，您甚至可以使用[MELT](http://gcc-melt.org/)（一种用于扩展 GCC 的高级域特定语言）自定义 GCC 编译器（使用您的特定 pragma），但这将花费您数天的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T13:17:51.007

您可以使用宏魔法通过传入行号来给自己一个唯一的 ID

```
#define CONST_BUG_ON_3(e, l) struct buggy##l {int a:!(e);}
#define CONST_BUG_ON_2(e, l) CONST_BUG_ON_3(e, l)
#define CONST_BUG_ON(e) CONST_BUG_ON_2(e, __LINE__) 
```

这相当恶心，但每次使用时都会给出一个唯一的名称（第二级间接可能是虚假的，但这是我在一些经受住时间考验的代码中所拥有的）。

# grails-domain-class - Grails - beforeInsert 在条目中抛出异常 null id

> ID：12142209
> 
> 赞同：1
> 
> 时间：2012-08-27T12:43:08.987
> 
> 标签：grails-domain-class, grails-2.0

我正在尝试在我的用户域类中使用 beforeInsert。

```
 class User {

    String reEnterPassword

    static constraints = {

        password(blank: false, nullable: false, size:5..50, validator: {password, obj ->
         def reEnterPassword = obj.properties['reEnterPassword']
         if(reEnterPassword == null) return true 
         reEnterPassword == password ? true : ['invalid.matchingpasswords']
         })
        reEnterPassword(bindable:true, blank: false);
    }

    def beforeInsert = {
        password = password.encodeAsSHA()
        }

    String toString(){
        name
        }

    static transients = ['reEnterPassword']

    } 
```

在我的控制器中，我有保存方法（生成）

```
 def save() {
    def userInstance = new User(params)
    if (!`userInstance.save(flush: true)`) {
        render(view: "create", model: [userInstance: userInstance])
        return
    } 
```

这是抛出异常Grails运行时异常，org.hibernate.AssertionFailure: null id in entry（异常发生后不要刷新Session），当域对象save方法遇到SQL异常时

我在文档中阅读了[自动时间戳记](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)，即不要尝试在事件中刷新会话（例如使用 obj.save(flush:true)）。由于在刷新期间触发了事件，这将导致 StackOverflowError。

在这种情况下如何保存我的`userInstance.save(flush: true)`我试图删除`flush:true`但我仍然得到同样的错误。如果我删除flus：true..那么当我需要打电话时。当休眠将刷新所有这些记录。

我尝试了定义[此 JIRA 票证](http://jira.grails.org/browse/GRAILS-5865)的解决方案 ，请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:23:50.440

可能是您有其他验证错误吗？

如果您将代码放在 beforeValidate 方法中，它将起作用：

```
def beforeValidate = {
     password = password.encodeAsSHA()
} 
```

我想我为时已晚，无法帮助您，但我希望它可以帮助其他有同样问题的人。

问候，乌尔斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:21:40.263

改变你的

```
def beforeInsert = {
    password = password.encodeAsSHA()
} 
```

至

```
def beforeInsert() {
    password = password.encodeAsSHA()
} 
```

这应该可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:28:35.730

I believe if the beforeInsert method return false then you get the "null id in entry" exception. Perhaps this is treated as an indication that validation has failed.

e.g. the following will cause the exception

```
def beforeInsert() {
  flag = false
} 
```

however the following should work OK

```
def beforeInsert() {
  flag = false
  return true
} 
```

# python - 如何终止选定的线程

> ID：12142220
> 
> 赞同：1
> 
> 时间：2012-08-27T12:43:33.563
> 
> 标签：python, multithreading

我有一个代码，其中有两种类型的线程。从第二个产生了 3 个线程。我想知道是否有一个我可以调用的函数，它将终止第二个类型的三个衍生线程，但仍然保持第一个运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:46:14.380

一个常见的解决方案是有一个全局变量，线程检查它们是否应该终止。

**编辑：**一种方法的示例：

```
class MyThread(Thread):
    def __init__(self):
        self.keep_running = True

    def run(self):
        while self.keep_running:
            # Do stuff

my_thread = MyThread()
my_thread.start()

# Do some other stuff

my_thread.keep_running = False
my_thread.join() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:59:43.457

您可以为每种类型的线程保留一个线程池，然后相应地终止它们。例如，您可以将它们保存在`Queue.Queue`全局中，然后`.stop()`根据需要保存它们。

编辑//您可以将希望停止的每个子线程加入其父线程[`.join()`](http://docs.python.org/library/threading.html#threading.Thread.join)

# sql - How to copy azure tables with entries

> ID：12142224
> 
> 赞同：1
> 
> 时间：2012-08-27T12:43:43.050
> 
> 标签：sql, azure, azure-sql-database

I am looking to copy some lookup tables that are currently on windows azure. I do not believe trhere is a way to do this through sql server management studio so I'm wondering the best way to do this other than scripting them out by hand

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:07:58.707

您通常会使用[SQL 数据库迁移向导 (SQLAzureMW)](http://sqlazuremw.codeplex.com/)执行任何涉及将数据从 SQL Azure 移动到 SQL Azure 的任务。此工具知道 SQL Azure 中支持和不支持的内容，并且比手动创建脚本更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:04:25.270

Select into 将创建和复制表，但不会创建索引或约束。

[INTO 子句 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188029.aspx)

在 SSMS 中，您可以右键单击表并选择生成以创建脚本。然后您可以编辑表和其他名称并运行脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:21:05.450

在这里找到答案，这比我希望的要容易！

[为 SQL Server 表自动生成 INSERT 语句的最佳方法是什么？](https://stackoverflow.com/questions/982568/what-is-the-best-way-to-auto-generate-insert-statements-for-a-sql-server-table)

# jquery - 具有基于 Ajax 的内容的 jQuery UI 选项卡：如何避免 AJAX 调用加载的第一个面板

> ID：12142228
> 
> 赞同：2
> 
> 时间：2012-08-27T12:44:06.327
> 
> 标签：jquery, ajax, jquery-ui, jquery-ui-tabs, jquery-tabs

假设使用*jQuery UI 选项卡*并通过 AJAX 调用加载选项卡内容，例如：

```
<div id="tabbed-menu">
    <ul>
        <li><a href="url1">LINK1</a></li>
        <li><a href="url2">LINK2</a></li>
        <li><a href="url3">LINK3</a></li>
    </ul>
</div> 
```

使用以下 Javascript 代码：

```
$(function() {
  $("#tabbed-menu").tabs();
}); 
```

现在，在**document.ready**上创建了选项卡式菜单，并且第一个选项卡的*内容*由**服务器请求**加载。

假设我想替换这个额外的不必要的服务器请求。例如，我可以加载包含第一个选项卡的全部内容的页面。

我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:14:37.700

`href`您可以在第一个选项卡的属性中提供 id 选择器而不是 URL 。例如：

```
<div id="tabbed-menu">
    <ul>
        <li><a href="#content1">LINK1</a></li>
        <li><a href="url2">LINK2</a></li>
        <li><a href="url3">LINK3</a></li>
    </ul>
    <div id="content1">
        Content of first tab.
    </div>
</div> 
```

此外，如果您想让第一个选项卡在第二次重新加载，您可以： 1）将新内容的 url 添加到锚点，例如：

```
<a href="#content1" data-url="url1">LINK1</a> 
```

2) 绑定 tabbselect 事件，拦截静态内容加载，替换为内容重载，例如：

```
$("#private-area-menu").bind("tabsselect", function(event, ui) {
      if(ui.index==0){
          $('#tab-content').html(''); // required to clear the previous static data
          $('#tab-content').load($(ui.tab).attr('data-url')); // refresh data              
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:10:59.857

您可以尝试在选项卡加载时重叠回调函数，例如：

```
$('#example').tabs({
        load: function(event, ui) {
            $(ui.panel).delegate('a', 'click', function(event) {
                $(ui.panel).load(this.href);
                event.preventDefault();
            });
        }
}); 
```

或在选项卡上选择如下：

```
$('#example').tabs({
    select: function(event, ui) {
        var isValid = ... // form validation returning true or false
        return isValid;
    }
}); 
```

此片段取自[http://docs.jquery.com/UI/API/1.8/Tabs](http://docs.jquery.com/UI/API/1.8/Tabs)，我建议您阅读。

# ruby-on-rails - 在哪里放置 Rails 种子数据

> ID：12142231
> 
> 赞同：3
> 
> 时间：2012-08-27T12:44:12.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想知道最好的地方是放置种子数据，更具体地说是种子文件。

例如。我有一堆 CSV 文件 > countries.csv、states.csv、categories.csv

目前，我将它存储在我的应用程序根目录中，但它看起来有点乱。我一直在试图找出人们把他们的种子数据放在哪里。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:46:58.773

专门的地方是`db/seeds`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:50:46.903

您可以将所有种子文件放在 db/seeds 目录下。

# windows - In which Platform C language Coded?

> ID：12142232
> 
> 赞同：0
> 
> 时间：2012-08-27T12:44:14.220
> 
> 标签：windows

I just Likely know that in which platform operating system coded.

as per my knowledge.

Windows kernel written in C language. Linux kernel is also written in C language.

but remain operating system in?

In which Platform C language is written?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:53:39.050

是的，Windows 内核和 Linux 内核是用 C 编写的。大多数操作系统往往是这样。
不过也有用其他语言编写的操作系统，例如[Chorus 内核](http://www.cdk3.net/oss/Ed2/Chorus.pdf)是用 C++ 编写的。

大多数 C 编译器也是用 C 编写的。这样做的好处是，一旦你设法让编译器在机器上运行（通常是在另一台已经有工作编译器/交叉编译器的机器上编译它），机器本身就可以编译更新到它自己的编译器，而无需维护另一个编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:50:45.120

C 编译器的大部分部分（如 gcc）本身都是用 C 编写的。当然，您需要一些东西来引导您的编译器，以便它可以自行编译。那将是像[Assembler](http://en.wikipedia.org/wiki/Assembly_language)这样的低类型语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:01:21.043

C 语言是被认为是[自托管](http://en.wikipedia.org/wiki/Self-hosting "自托管")的众多语言之一——也就是说，编译器可以编译自己的源代码，该源代码是用编译器设计用于编译的相同语言编写的。

您可能还想研究[Bootstrapping](http://en.wikipedia.org/wiki/Bootstrapping_%28compilers%29 "自举")的过程，这是用于让特定语言的第一个编译器在给定平台上运行的过程 - 正如其他人所指出的，这可以通过交叉编译或通过用不同的语言编写原始编译器，尽管其他技术是可能的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-27T12:51:25.690

首先，你可能想用实际的句子来改进你的问题。

其次，C 不是在平台上编写的，它是用另一种编程语言编写的。大多数编译器都是用汇编程序编写的，汇编程序是发送到处理器的实际机器代码的可读版本。我不知道是否有其他编译器，用某种中间语言编写，但最终，一切都归结为汇编代码，它编译为机器代码。

# java - 将 JsonArray 添加到 JsonObject

> ID：12142238
> 
> 赞同：36
> 
> 时间：2012-08-27T12:44:37.027
> 
> 标签：java, json, arrays

我今天为这个主题搜索了很多。但我找不到它，如何将 JSONArray 添加到 JSONObject？

因为每次我这样做我都会收到这个错误：Stackoverflow

```
 JSONObject fillBadkamerFormaatFromContentlet(Structure structure, String formaat) {
    JSONObject jsonObject = new JSONObject();
    JSONArray arr = new JSONArray();

    BadkamerFormaat badkamerFormaat = new BadkamerFormaat();
    BadkamerTegel badkamerTegel;
    List<Contentlet> contentlets = getContentletsByStructure(structure);
    badkamerFormaat.formaat = formaat;
    badkamerFormaat.tegels = new ArrayList<BadkamerTegel>();

    try {
        jsonObject.put("formaat", formaat); 
    } catch (JSONException e1) {
        throw new RuntimeException(e1);
    }

    for(Contentlet contentlet : contentlets) {
        badkamerTegel = new BadkamerTegel();
        badkamerTegel.naam = contentlet.getStringProperty(ParameterNames.toolBetegelVeldNaam);
        try {
            badkamerTegel.afbeeldingTegel = contentlet.getBinary(ParameterNames.toolBetegelVeldTegelAfbeelding).getPath();
            badkamerTegel.afbeeldingBadkamer = contentlet.getBinary(ParameterNames.toolBetegelVeldBadkamerAfbeelding).getCanonicalPath();
            arr.put(badkamerTegel.toJSON());
        } catch (IOException e) {
            throw new RuntimeException(e);
        }   
    }

    try {
        jsonObject.put("aoColumnDefs",arr);
    } catch (JSONException e) {
        throw new RuntimeException(e);
    }

    return jsonObject;          
} 
```

我收到此错误：

```
java.lang.StackOverflowError
at com.dotmarketing.util.json.JSONArray.<init>(JSONArray.java:248)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953)
at com.dotmarketing.util.json.JSONObject.put(JSONObject.java:953) 
```

我想要的 JSON：只有最后一个 JsonArray 出错了：

```
{
           "wand": [
        {
            formaat: 'vierkant15x15'
            tegels: [
                    {naam: '', imgThumb: '/bla/bla.png', largeImg: '/bla/bla2.png'}
                    ,{naam: '', imgThumb: '/bla/bla.png', largeImg: '/bla/bla2.png'}
                    ]
        }
        ,

        {
            formaat: 'vierkant17x15'
            tegels: [
                    {naam: '', imgThumb: '/bla/bla.png', largeImg: '/bla/bla2.png'}
                    ,{naam: '', imgThumb: '/bla/bla.png', largeImg: '/bla/bla2.png'}
                    ]
        }
    ] 
```

, "vloer": [ { 格式: 'vierkant10x15' tegels: [ {naam: '', imgThumb: '/bla/bla.png', largeImg: '/bla/bla2.png'} ,{naam: '', imgThumb: '/bla/bla.png', largeImg: '/bla/bla2.png'} ] } ,

```
 {
            formaat: 'vierkant45x15'
            tegels: [
                    {naam: '', imgThumb: '/bla/bla.png', largeImg: '/bla/bla2.png'}
                    ,{naam: '', imgThumb: '/bla/bla.png', largeImg: '/bla/bla2.png'}
                    ]
        }
    ] 
```

}

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-27T14:59:54.430

我认为这是您正在使用 的[API](http://dotcms.com/docs/latest/javadocs/com/dotmarketing/util/json/JSONArray.html)的问题（又名错误） 。`JSONArray`实现`Collection`（派生此 API 的 json.org 实现*没有*JSONArray 实现集合）。并且`JSONObject`有一个重载`put()`方法，它接受一个 Collection 并将其包装在 a 中`JSONArray`（从而导​​致问题）。我认为您需要强制使用其他`JSONObject.put()`方法：

```
 jsonObject.put("aoColumnDefs",(Object)arr); 
```

你应该向供应商提交一个错误，很确定他们的`JSONObject.put(String,Collection)`方法被破坏了。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-20T07:19:14.250

这是简单的代码

```
List <String> list = new ArrayList <String>();
list.add("a");
list.add("b");
JSONArray array = new JSONArray();
for (int i = 0; i < list.size(); i++) {
        array.put(list.get(i));
}
JSONObject obj = new JSONObject();
try {
    obj.put("result", array);
} catch (JSONException e) {
 // TODO Auto-generated catch block
e.printStackTrace();
}
pw.write(obj.toString()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-28T19:49:05.960

你的清单：

```
List<MyCustomObject> myCustomObjectList; 
```

你的 JSONArray：

```
// Don't need to loop through it. JSONArray constructor do it for you.
new JSONArray(myCustomObjectList) 
```

你的回应：

```
return new JSONObject().put("yourCustomKey", new JSONArray(myCustomObjectList)); 
```

您的 post/put http body 请求将是这样的：

```
 {
        "yourCustomKey: [
           {
               "myCustomObjectProperty": 1
           },
           {
               "myCustomObjectProperty": 2
           }
        ]
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-18T11:04:05.493

我自己开始了解这一点，对 android 开发非常陌生，我发现这个视频非常有帮助。

[https://www.youtube.com/watch?v=qcotbMLjlA4](https://www.youtube.com/watch?v=qcotbMLjlA4)

它特别介绍了在视频中的 19:30 将 JSONArray 转换为 JSONObject。

JSONArray 到 JSONObject 的视频中的代码：

```
JSONArray queryArray = quoteJSONObject.names();

ArrayList<String> list = new ArrayList<String>();

for(int i = 0; i < queryArray.length(); i++){
    list.add(queryArray.getString(i));
}

for(String item : list){
    Log.v("JSON ARRAY ITEMS ", item);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-17T20:40:47.650

只需尝试以下简单的解决方案：

```
JsonObject body=new JsonObject();
body.add("orders", (JsonElement) orders); 
```

每当我的 JSON 请求是这样的：

```
{
      "role": "RT",
      "orders": [
        {
          "order_id": "ORDER201908aPq9Gs",
          "cart_id": 164444,
          "affiliate_id": 0,
          "orm_order_status": 9,
          "status_comments": "IC DUE - Auto moved to Instruction Call Due after 48hrs",
          "status_date": "2020-04-15",
        }
      ]
    } 
```

# php - 带有 pgsql 的 csv“UTF8”字符编码

> ID：12142239
> 
> 赞同：0
> 
> 时间：2012-08-27T12:44:37.597
> 
> 标签：php, postgresql, csv, utf-8, character-encoding

我们的客户向我们发送了一个 CSV 数据文件，我需要将其导入到 Postgresql 8.3.9 数据库中的特定表中。数据库使用UTF-8字符编码，即我们的CMS允许多种语言，例如法语，通过CMS以法语输入数据库。一种特殊的工具是让客户端将图像上传到服务器，然后用法语为它们输入“alt”标签。但是，由于需要进行批量更新，我们已收到一个 CSV 文件以供输入特定表格 - 用于图像 alt 标签，使用法语。

CSV 有一些特殊字符，例如“é” - 例如“Bottes Adaptées Amora Cuir Faux-Croco Fauve Photo d'Ensemble”

图像本身托管在两个地方 - 一个是 CDN，一个是本地数据库备份和本地服务器（Web 服务器）文件备份。我正在使用 PHP 脚本来读取 CSV 文件并执行必要的操作，以便在两个地方更新“alt”标签 - 我们的 Web 数据库和 CDN。

但是，当我阅读 CSV（使用 PHP）时，字符并没有像预期的那样“出来”。该数据以“Bottes Adaptèes Amora Cuir Faux-Croco Fauve Photo d'Ensemble”的形式发布。

我认为这与数据库没有任何关系，但它与我的 PHP 文件读取 CSV 数据有关。即使我打印它正在读取的数据，上面的特殊字符也不会像上面那样打印，它的打印就像特殊字符没有被识别一样。其他字符打印正常。

这是我正在使用的代码（这里没有使用一些特殊的自定义函数来与数据库交互，但可以忽略它们）。CSV 文件由 {column 1}（图像名称）和 {column 2}（用于 ALT 标记）组成。

```
$handle = fopen($conn->getIncludePath() . "cronjobs/GIB_img_alt_tags_fr.csv", "r");   
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
//normally I run a query here to check if the data exists - "SELECT imageid, image_fileref FROM table1 WHERE image_fileref = '". $data[0]. "'");
    if ($conn->Numrows($result)) { //if rows were found - 
        $row=$conn->fetchArray($result);
        //printing the data from $row here
    }
}
fclose($handle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:41:53.920

您仍然省略了关键信息 - 在寻求帮助时`UPDATE`不要`UPDATE`从代码中删除语句 - 而且您对问题的描述非常混乱，但有一些暗示正在发生什么。

## 不匹配的编码

您的 PHP 连接很可能`client_encoding`设置为`UTF-8`. 如果您在`UTF-8`没有转换的情况下通过连接发送数据，则连接`client_encoding`必须是`UTF-8`.

为了确认，`SHOW client_encoding`从 PHP 作为 SQL 语句运行并打印结果。在导入 CSV 之前添加`SET client_encoding = 'UTF-8'`到您的代码中，看看是否有帮助。当然，假设 CSV 文件确实是 UTF-8 编码的。如果不是，您需要将其转码为 UTF-8 或找出它*的*编码方式`SET client_encoding`。

阅读[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://www.joelonsoftware.com/articles/Unicode.html)和[PostgreSQL 字符集支持手册](http://www.postgresql.org/docs/9.1/static/multibyte.html)。

## 更好的方法

无论如何，您采用的方法不必要地缓慢且效率低下。你应该：

*   开启交易
*   在数据库中创建一个与 CSV 文件结构相同的临时表。
*   用于[`pg_copy_from`](http://www.php.net/manual/en/function.pg-copy-from.php)将 CSV 加载到临时表中，并使用适当的选项来指定 CSV 格式。
*   `INSERT`然后将临时表的内容合并到目标表中`UPDATE`，例如：

    ```
    INSERT INTO table1 (image_fileref, ... other fields ...)
    SELECT n.image_fileref, ... other fields ...
    FROM the_temp_table n
    WHERE NOT EXISTS (SELECT 1 from table1 o WHERE o.image_fileref = n.image_fileref);

    UPDATE table1 o
    SET .... data to update ....
    FROM the_temp_table n
    WHERE o.image_fileref = n.image_fileref; 
    ```

*   提交交易

`INSERT`可以更有效地编写为`left outer join`带有过滤器的过滤`IS NULL`器以排除匹配的行。这取决于数据。试试看。

我可能已经写了一个更快的基于[CTE](http://www.postgresql.org/docs/current/static/queries-with.html)的版本，但是你没有说你使用的是什么版本的 Pg，所以我不知道你的服务器是否支持 CTE。

由于您遗漏了`UPDATE`我无法更具体地了解`UPDATE`or`INSERT`语句。如果您为您或我提供了架构，`table1`甚至只是为您`INSERT`或`UPDATE`我提供了更多信息。如果没有样本数据，我无法运行这些语句来检查它们，而且我不想编造一些虚拟数据，因此上述内容未经测试。事实上，完成代码是一个学习练习。我不会用完整的陈述来更新这个答案，你可以解决这个问题。

# c++ - C字符串替换反斜杠

> ID：12142240
> 
> 赞同：0
> 
> 时间：2012-08-27T12:44:42.470
> 
> 标签：c++, cstring

我目前使用 C 字符串标头和 C++ 并且遇到了问题。我有很长的路要走：

```
C:\bla\bla\bla\bla 
```

我需要将反斜杠更改为双反斜杠，以便我的`OS_CopyFile()`函数可以正确读取它，但我不知道如何？

我使用以下方法获取路径：

```
CHAR* szValueBuf = NULL;
DWORD cchValueBuf = 0;
UINT uiStat =  MsiGetProperty(hInstall, TEXT("OriginalDatabase"), TEXT(""), &cchValueBuf);

if (ERROR_MORE_DATA == uiStat)
{
    ++cchValueBuf; 
    szValueBuf = new TCHAR[cchValueBuf];
    if (szValueBuf)
    {
        uiStat = MsiGetProperty(hInstall, TEXT("OriginalDatabase"), szValueBuf, &cchValueBuf);
    }
}
if (ERROR_SUCCESS != uiStat)
{
    if (szValueBuf != NULL) 
        delete[] szValueBuf;
    return ERROR_INSTALL_FAILURE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:49:03.580

为什么不复制原始字符串，一次一个字符，当您看到反斜杠时，您只需在副本中附加一个额外的反斜杠？

但正如其他人所指出的，如果字符串没有在源代码中进行硬编码，那么您很可能不需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:49:17.677

如果您在运行时将字符串显示在 C 变量中，则不存在更改反斜杠的风险。

C 字符串中的反斜杠仅在 C 编译器解析源代码时是特殊的，它将替换例如`"\n"`包含单个换行符的字符串。这种替换只发生在实际的字符串文字中，永远不会在运行时发生在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:56:31.367

您误解了反斜杠在 C++ 中的工作方式。您的字符串只有一个反斜杠。在字符串文字中，您必须在代码中使用两个反斜杠才能在运行时在字符串中使用一个反斜杠。

```
OS_CopyFile(szValueBuf, "C:\\TEMP\\product.ini",0); 
```

上面的字符串中只有两个反斜杠。你为自己发明了一个不存在的问题。

# wxpython - wxPython与easyGUI结合，分别显示两个窗口

> ID：12142253
> 
> 赞同：0
> 
> 时间：2012-08-27T12:45:46.333
> 
> 标签：wxpython, easygui

我使用 Python 在 GUI 上工作。我尝试了easyGUI（http://easygui.sourceforge.net/），它工作得非常好，只是我还没有找到同时显示两个窗口的方法。

这是我迄今为止在 GNU/Linux 中尝试过的：

```
from easygui import *
import wx
class FicheFrame( wx.Frame ) :

    def __init__( self, data ) :
        wx.Frame.__init__( self, None,-1, "Custom data", size=(300, 400) )
        self.d = data
        scrollWin = wx.PyScrolledWindow( self, -1 )

        x = 20       
        y = 20

        txtStr = self.d
        stTxt = wx.StaticText( scrollWin, -1, txtStr, pos=(x, y) )

        w, h = stTxt.GetSize()
        dy = h + 10     
        y += dy

        scrollWin.SetScrollbars( 0, dy,  0, y/dy+1 )
        scrollWin.SetScrollRate( 1, 1 )    

myapp = wx.App( redirect=False )
myAppFrame = FicheFrame('data')
myAppFrame.Show()
exceptionbox(msg='Test test test', title=None)
myapp.MainLoop() 
```

不幸的是，**异常**框显示在**myAppFrame**之前。当我关闭**exceptionbox**时，出现**myAppFrame**，我不明白为什么，不应该是相反的吗？

**编辑：** 这项工作在 Windows 中按预期工作！...

**编辑2：**

我实际上找到了一种使用 Tkinter 的方法......这段代码有效：

```
from easygui import *
from Tkinter import *

while True:
    root = Tk()
    w = Label(root, text="Hello, world!")
    w.pack()
    exceptionbox(msg='test test', title=None)
    root.destroy()
    root.mainloop()
    del root 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:37:03.587

EasyGUI 基于 Tkinter，基本上是一组对话框。我不会混合使用 Tkinter 和 wxPython。相反，只需在 wx.xml 中创建对话框。EasyGUI 的大多数对话框在 wxPython 中都有对应的对话框，或者可以使用 wx.Dialog 的简单子类创建。看：

*   [http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/](http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/)
*   [http://www.blog.pythonlibrary.org/2010/07/10/the-dialogs-of-wxpython-part-2-of-2/](http://www.blog.pythonlibrary.org/2010/07/10/the-dialogs-of-wxpython-part-2-of-2/)

并查看 MessageDialog 或 GenericMessageDialog

# android - 从适配器调用 Activity 方法

> ID：12142255
> 
> 赞同：127
> 
> 时间：2012-08-27T12:45:47.470
> 
> 标签：android, list, adapter, addressing

是否可以调用`Activity`from中定义的方法`ListAdapter`？

（我想在行中创建一个`Button`，`list's`当单击此按钮时，它应该执行在相应活动中定义的方法。我尝试`onClickListener`在我的设置中设置`ListAdapter`但我不知道如何调用此方法，它的路径是什么。 ..)

当我使用时，`Activity.this.method()`我收到以下错误：

```
No enclosing instance of the type Activity is accessible in scope 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2012-08-27T13:00:18.097

是的你可以。

在适配器中添加一个新字段：

```
private Context mContext; 
```

在适配器构造函数中添加以下代码：

```
public AdapterName(......, Context context) {
  //your code.
  this.mContext = context;
} 
```

在 Adapter 的 getView(...) 中：

```
Button btn = (Button) convertView.findViewById(yourButtonId);
btn.setOnClickListener(new Button.OnClickListener() {
  @Override
  public void onClick(View v) {
    if (mContext instanceof YourActivityName) {
      ((YourActivityName)mContext).yourDesiredMethod();
    }
  }
}); 
```

在您看到代码、活动等的地方替换为您自己的类名。

如果您需要将同一适配器用于多个活动，则：

创建接口

```
public interface IMethodCaller {
    void yourDesiredMethod();
} 
```

在您需要具有此方法调用功能的活动中实现此接口。

然后在 Adapter getView() 中，调用如下：

```
Button btn = (Button) convertView.findViewById(yourButtonId);
btn.setOnClickListener(new Button.OnClickListener() {
    @Override
    public void onClick(View v) {
        if (mContext instanceof IMethodCaller) {
            ((IMethodCaller) mContext).yourDesiredMethod();
        }
    }
}); 
```

你完成了。如果您需要将此适配器用于不需要此调用机制的活动，则代码将不会执行（如果检查失败）。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-08-27T13:02:42.347

你可以这样做：

声明接口：

```
public interface MyInterface{
    public void foo();
} 
```

让您的 Activity 实施它：

```
 public class MyActivity extends Activity implements MyInterface{
        public void foo(){
            //do stuff
        }

        public onCreate(){
            //your code
            MyAdapter adapter = new MyAdapter(this); //this will work as your 
                                                     //MyInterface listener
        }
    } 
```

然后将您的活动传递给 ListAdater：

```
public MyAdapter extends BaseAdater{
    private MyInterface listener;

    public MyAdapter(MyInterface listener){
        this.listener = listener;
    }
} 
```

在适配器中的某个地方，当您需要调用该 Activity 方法时：

```
listener.foo(); 
```

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2014-12-31T05:54:07.810

# 原来的：

我理解当前的答案，但需要一个更清楚的例子。这是我使用`Adapter`(RecyclerView.Adapter) 和`Activity`.

## 在您的活动中：

这将实现`interface`我们在`Adapter`. 在此示例中，当用户单击`RecyclerView`.

```
public class MyActivity extends Activity implements AdapterCallback {

    private MyAdapter myAdapter;

    @Override
    public void onMethodCallback() {
       // do something
    }

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        myAdapter = new MyAdapter(this);
    }
} 
```

## 在您的适配器中：

在 中`Activity`，我们启动了我们的`Adapter`并将其作为参数传递给构造函数。这将启动我们`interface`的回调方法。你可以看到我们使用我们的回调方法来处理用户点击。

```
public class MyAdapter extends RecyclerView.Adapter<MyAdapter.ViewHolder> {

    private AdapterCallback adapterCallback;

    public MyAdapter(Context context) {
        try {
            adapterCallback = ((AdapterCallback) context);
        } catch (ClassCastException e) {
            throw new ClassCastException("Activity must implement AdapterCallback.", e);
        }
    }

    @Override
    public void onBindViewHolder(MyAdapter.ViewHolder viewHolder, int position) {
        // simple example, call interface here
        // not complete
        viewHolder.itemView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                try {
                    adapterCallback.onMethodCallback();
                } catch (ClassCastException e) {
                   // do something
                }
            }
        });
    }

    public static interface AdapterCallback {
        void onMethodCallback();
    }
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-12-28T09:09:56.413

**基本而简单。**

在您的适配器中只需使用它。

`((YourParentClass) context).functionToRun();`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-07-01T10:58:30.387

对于科特林：

在您的适配器中，只需调用

```
(context as Your_Activity_Name).yourMethod() 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-05-20T09:21:13.543

另一种方法是::

在您的适配器中编写一个方法，比如说 public void callBack(){}。

现在，在活动中为适配器创建对象时，会覆盖此方法。当您调用适配器中的方法时，将调用覆盖方法。

```
Myadapter adapter = new Myadapter() {
  @Override
  public void callBack() {
    // dosomething
  }
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-12T10:51:30.923

在 Kotlin 中，现在有一种使用 lambda 函数的更简洁的方法，不需要接口：

```
class MyAdapter(val adapterOnClick: (Any) -> Unit) {
    fun setItem(item: Any) {
        myButton.setOnClickListener { adapterOnClick(item) }
    }
}

class MyActivity {
    override fun onCreate(savedInstanceState: Bundle?) {
        var myAdapter = MyAdapter { item -> doOnClick(item) }
    }

    fun doOnClick(item: Any) {

    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-26T10:44:39.400

```
if (parent.getContext() instanceof yourActivity) {
  //execute code
} 
```

如果具有从您的方法`GroupView`请求视图的 Activity 是，则此条件将使您能够执行某些操作`getView()``adapter``yourActivity`

注意：`parent`是 GroupView

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-17T13:08:52.540

对于 kotlin，您可以执行以下操作：

`if(context is MainActivity){ context.functionToCall(values) }`

# android - Android/Cocos2d-x - C++ 框架 - 尝试测试 CCFadeOutTRTiles

> ID：12142256
> 
> 赞同：0
> 
> 时间：2012-08-27T12:45:52.067
> 
> 标签：android, cocos2d-x

我试图在 Sprite 中应用 CCFadeOutTRTiles 效果，但整个屏幕都受到了影响。我需要在 EAGLView 中更改 pixelFormat，但我不知道如何更改它。有人可以帮助我吗？

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:14:06.987

我对第 2 版进行了更新，它运行良好。tks

# delphi - 如何选择 VirtualStringTree 中的所有根节点或所有子节点？

> ID：12142258
> 
> 赞同：5
> 
> 时间：2012-08-27T12:45:57.307
> 
> 标签：delphi, delphi-7, virtualtreeview, tvirtualstringtree

我想选择所有根节点或所有子节点（不是 VirtualTreeView 中的所有节点）。
我尝试使用此代码选择所有根节点：

```
procedure SelectAllRoots;
var
  Node: PVirtualNode;
begin
  Form1.VirtualStringTree1.BeginUpdate;
  Node := Form1.VirtualStringTree1.GetFirst;
  while True do 
  begin
    if Node = nil then 
      Break;
    if not (vsSelected in Node.States) then
      Node.States := Node.States + [vsSelected];
    Node := Form1.VirtualStringTree1.GetNext(Node);
  end;
  Form1.VirtualStringTree1.EndUpdate;
end; 
```

我可以说有一个小故障。选择不完整或卡住。我究竟做错了什么 ？

**编辑：**
我使用多选。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T12:53:25.757

***1.选择所有根节点：***

要选择所有根节点，可以使用以下过程：

```
procedure SelectRootNodes(AVirtualTree: TBaseVirtualTree);
var
  Node: PVirtualNode;
begin
  AVirtualTree.BeginUpdate;
  try
    Node := AVirtualTree.GetFirst;
    while Assigned(Node) do
    begin
      AVirtualTree.Selected[Node] := True;
      Node := AVirtualTree.GetNextSibling(Node);
    end;
  finally
    AVirtualTree.EndUpdate;
  end;
end; 
```

***2.选择所有子节点：***

要选择与级别无关的所有子节点，您需要使用这样的递归函数：

```
procedure SelectChildNodes(AVirtualTree: TBaseVirtualTree);
var
  Node: PVirtualNode;

  procedure SelectSubNodes(ANode: PVirtualNode);
  var
    SubNode: PVirtualNode;
  begin
    SubNode := AVirtualTree.GetFirstChild(ANode);
    while Assigned(SubNode) do
    begin
      SelectSubNodes(SubNode);
      AVirtualTree.Selected[SubNode] := True;
      SubNode := AVirtualTree.GetNextSibling(SubNode);
    end;
  end;

begin
  AVirtualTree.BeginUpdate;
  try
    Node := AVirtualTree.GetFirst;
    while Assigned(Node) do
    begin
      SelectSubNodes(Node);
      Node := AVirtualTree.GetNextSibling(Node);
    end;
  finally
    AVirtualTree.EndUpdate;
  end;
end; 
```

# cordova - 为什么 GCM 的 RegistraitonID 无效 - 使用 phonegap for android？

> ID：12142261
> 
> 赞同：6
> 
> 时间：2012-08-27T12:46:02.750
> 
> 标签：cordova, google-cloud-messaging

我已经完成了使用 deviceId、apiKey 和 senderId 的服务器端编码。我可以知道为什么我仍然得到这个“无效注册”吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T12:53:00.677

检查在客户端生成的注册 ID。客户端和服务器端的注册ID似乎不匹配。

这是来自[GCM 页面](http://developer.android.com/guide/google/gcm/gcm.html)的解释。

> 检查您传递给服务器的注册 ID 的格式。确保它与手机在 com.google.android.c2dm.intent.REGISTRATION 意图中收到的注册 ID 匹配，并且您没有截断它或添加其他字符。当错误代码为 InvalidRegistration 时发生。

# struts2 - 如何获取动作类中选定单选按钮的值，struts 2？

> ID：12142262
> 
> 赞同：0
> 
> 时间：2012-08-27T12:46:12.090
> 
> 标签：struts2

如何获取动作类中选定单选按钮的值，struts 2？

```
<s:form action="vote.action" method="post">
<s:radio name="vote" list="#{'1':'Candidate1','2':'Candidate2','3':'Candidate3'}" value="2" />
<s:submit method="execute" key="label.vote" align="center" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:54:57.143

为了让 struts2 在您的操作类中注入您的表单值，您需要执行以下操作之一

1.  在您的操作类中创建与您的 JSP 中的字段值同名的单个属性。
2.  创建一个具有您需要的属性的 bean，并确保将这些属性命名为与 JSP 中的相同。
3.  在您的操作类中为 bean 的属性创建 getter 和 setter。

我建议阅读一些描述数据如何在 JSP 和 Action 类之间以及以相反方式流动的文档。

简而言之，对于您的单选按钮，您需要做的就是在您的操作类中定义 getter 和 setter，其名称与 jsp 单选按钮字段的名称相同，并且您都可以在您的操作类中接收值（拦截器的力量和魔力;))

[处理表格](http://struts.apache.org/2.3.4.1/docs/processing-forms.html)

# jquery - 如何以相同的形式在重复的 id 上应用 jquery datepicker？

> ID：12142265
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:46:23.670
> 
> 标签：jquery

我有一个复杂的代码，我需要在动态调用中克隆相同的表，并且必须在它们上应用日期选择器。问题是我愿意应用日期选择器的重复 ID。所以，当我应用日期选择器时，它来了，我只能使用 Enter 键选择当前日期。但是，当我使用鼠标时，它会抛出类似“TypeError：f is undefined”的错误。请提供解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:59:36.970

我有同样的问题。我使用 firebug 检查了内部渲染器 html，发现我的 html 包含与 datepicker 具有相同 id 的其他元素。删除该 id 解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:48:48.413

重复的 ID 不是有效的 html。使它们独一无二，或者删除它们并使用共享的 css 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:49:07.910

重复的 ID 不是有效的 HTML 标记。当您通过 ID 搜索元素时，它只会找到第一个匹配项并返回它。您最好为每个元素添加一个类，然后对该类进行查询以应用日期选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:51:06.010

你不应该在表单上有重复的 id 它不是有效的 html。而是放置一个名称属性并使用 $('input[]') 或 css class $('.mycssclass') 选择它们

# php - PHP 读取和解析大文件？

> ID：12142268
> 
> 赞同：1
> 
> 时间：2012-08-27T12:46:29.633
> 
> 标签：php, file, memory, file-get-contents, fread

我即将阅读一个大小为 200Mb 的文本文件，然后在其中编辑一些内容，然后将其保存回来。但我有错误。所以：

*   应该在 php 中修改哪些确切的设置？

还有什么文件读取方法最适合打开和解析大文件？我是说：

*   恐惧？
*   文件获取内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:54:04.683

我不得不做类似的事情，读取 1GB 文件。我想留在 PHP 中，所以最后我用[fread](http://il.php.net/manual/en/function.fread.php)一点一点地读取文件的一部分：

```
while (!feof($source_file)) {
    $buffer = fread($source_file, 1024);  // use a buffer of 1024 bytes
    $buffer = str_replace($old,$new,$buffer);
    fwrite($target_file, $buffer);
} 
```

这样，在任何给定时间，只有一小部分文件保存在内存中。我检查了效率，它很好，整个文件大约半分钟。

一个小提示 - 如果被替换的字符串位于缓冲区的末尾，它可能不会被替换。为确保您已更改所有事件，请以较小的偏移量再次运行脚本：

```
$buffer = fread($source_file, 512);
fwrite($target_file, $buffer);  
while (!feof($source_file)) {
    $buffer = fread($source_file, 1024);  // use a buffer of 1024 bytes
    $buffer = str_replace($old,$new,$buffer);
    fwrite($target_file, $buffer);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:56:13.403

与已经存在的答案基本相同，但带有文件指针。

```
$original = fopen("/tmp/inputfile.txt", "r");
$new = fopen("/tmp/outputfile.txt", "w");
if ($original && $new) {
    while (($buffer = fgets($handle)) !== false) {
        //do modification on $buffer (which is a single line)

        fwrite($new, $buffer);
    }

    fclose($original);
    fclose($new);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:03:10.470

我使用以下内容来完成类似的任务：

```
$file = file_get_contents("/path/to/file");
$lines = explode("\n", $file);

$arr = preg_grep("/search_string/", $lines);

// $arr is now a smaller array of things to match
// do whatever here

// write back to file
file_put_contents("/path/to/file", implode("\n", array_merge($arr, $lines))); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-08-27T12:52:13.907

PHP 不是设计或打算这样做的。您可能需要考虑使用 Perl，或者将文本更改为 XML，或者将其放入数据库中。

按照您的意图执行此操作意味着整个文件将被加载到内存中。如果你有多个用户做同样的事情，你会很快耗尽内存。

对于 XML 解析，请看这里[XMLReader](http://se2.php.net/manual/en/book.xmlreader.php)

# javascript - 骨干 - 迭代集合时将索引传递给视图？

> ID：12142269
> 
> 赞同：0
> 
> 时间：2012-08-27T12:46:33.530
> 
> 标签：javascript, backbone.js

我正在尝试渲染一个需要知道在其集合中传入的模型的索引位置的视图：

**父视图**

```
collection.each(function($_v, $_k) {
    (new view({model: $_v, index: $_k})).render();
}); 
```

**子视图**

```
className: function() {
    0 === this.index % 2 ? 'colored' : '';
} 
```

但是，似乎`this.index`无法以这种方式设置并成为`undefuined`. 进行这项工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:10:01.307

我认为应该是：

```
className: function() {
    0 === this.options.index % 2 ? 'colored' : '';
} 
```

# actionscript-3 - 在 mx Datagrid 中使用 itemRenderer

> ID：12142272
> 
> 赞同：0
> 
> 时间：2012-08-27T12:46:39.990
> 
> 标签：actionscript-3, apache-flex, datagrid, flex4.5, itemrenderer

我有一个 2 列的 mx DataGrid。第一列在 TextInput 中呈现其数据，在 ComboBox 中呈现第二列。当我更改 ComboBox 中的选定值时，我希望相同索引的 TextInput 将其文本更改为 ComboBox 中选定的值。谁能帮我这个？我的代码如下。

```
<mx:DataGrid id="myGrid" rowHeight="25" dataProvider="{Testarray}" width="100%" height="205" chromeColor="#D0CCAF" headerHeight="0" showHeaders="false" >
                <mx:columns>
                    <mx:DataGridColumn headerText="My Header 1"                                                                        
                                       editable="true"                                                                        
                                       dataField="LBL"                                                                            
                                       >
                        <mx:itemRenderer>
                            <fx:Component>
                                <mx:HBox horizontalAlign="left" horizontalScrollPolicy="off" verticalScrollPolicy="off">

                                    <s:TextInput id="label_txt" text="{data.LBL}" width="98%"/>
                                </mx:HBox>
                            </fx:Component>
                        </mx:itemRenderer>
                    </mx:DataGridColumn>    

                    <mx:DataGridColumn headerText="My Header 2"                                                                       
                                       editable="true"                                                                                
                                       rendererIsEditor="true"                                                                        
                                       dataField="ALIAS"                                                                            
                                       >
                        <mx:itemRenderer>
                            <fx:Component>

                                    <renderers:comboItemRenderer height="80%" change="comboitemrenderer1_changeHandler(event)" lookupField="ALIAS" labelField="ALIAS" dataProvider="{outerDocument.searchCustomizationComponents_array}">
                                        <fx:Script>
                                            <![CDATA[
                                                import mx.events.DataGridEvent;
                                                import mx.events.ListEvent;

                                                protected function comboitemrenderer1_changeHandler(event:ListEvent):void
                                                {
                                //WHAT TO PUT HERE?
                                                }

                                            ]]>
                                        </fx:Script>

                                    </renderers:comboItemRenderer>
                            </fx:Component>
                        </mx:itemRenderer>
                    </mx:DataGridColumn>

                </mx:columns>
            </mx:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:51:34.367

```
I got it myself. Thanks buddies.
I needed to add these 2 lines of codes for the textInput to take the value of the selectedItem int he ComboBox.
protected function comboitemrenderer1_changeHandler(event:ListEvent):void
                                                {
                                                    outerDocument.myGrid.dataProvider[outerDocument.myGrid.selectedIndex]['LBL'] = this.selectedItemKey; 
                                                    outerDocument.myGrid.invalidateList();

                                    }
Also note that the code for my comboitemrenderer below:
    <mx:ComboBox
        xmlns:mx="http://www.adobe.com/2006/mxml" 
        dataChange="setSelected()" 
        change="onSelectionChange(event)"
        focusEnabled="true">
        <mx:Script>
            <![CDATA[
                import mx.events.DataGridEvent;
                import mx.events.ListEvent;
                import mx.controls.dataGridClasses.DataGridListData;

                private var _ownerData:Object;
                private var _lookupField:String = "value";

                // When using this component as an itemEditor rather than an itemRenderer
                // then set ' editorDataField="selectedItemKey"' on the column to 
                // ensure that changes to the ComboBox are propogated.
                [Bindable] public var selectedItemKey:Object;

                public function set lookupField (value:String) : void {
                    if(value) {
                        _lookupField = value;
                        setSelected();
                    }
                }           
                override public function set data (value:Object) : void {
                    if(value) {                    
                        _ownerData = value;
                        setSelected();
                    }
                }
                override public function get data() : Object {
                    return _ownerData;
                }            
                private function setSelected() : void {
                    if (dataProvider && _ownerData) {
                        var col:DataGridListData = DataGridListData(listData);
                        for each (var dp:Object in dataProvider) {
                            if (dp[_lookupField] == _ownerData[col.dataField]) {
                                selectedItem = dp;
                                selectedItemKey = _ownerData[col.dataField];
                                return;     
                            }
                        }                    
                    }
                    selectedItem = null;
                }
                private function onSelectionChange (e:ListEvent) : void {
                    if (selectedItem && _ownerData) {                    
                        var col:DataGridListData = DataGridListData(listData);
                        _ownerData[col.dataField] = selectedItem[_lookupField];
                        selectedItemKey = selectedItem[_lookupField];

    }
                }                   
            ]]>
        </mx:Script>    
    </mx:ComboBox> 
```

# ios - Trigger.io 是否支持 iOS 6？

> ID：12142274
> 
> 赞同：3
> 
> 时间：2012-08-27T12:46:47.897
> 
> 标签：ios, trigger.io, ios6

当尝试使用 iOS 6 beta 4 (Xcode 4.5) 在模拟器上运行我的 Trigger.io 应用程序时，它中止并显示以下日志：

```
[   INFO] Forge tools running at version 3.3.11
[   INFO] Checking JavaScript files...
[   INFO] JavaScript check complete
[   INFO] Verifying your configuration settings...
[   INFO] Configuration settings check complete
[   INFO] Running iOS Simulator
[   INFO] Starting simulator
[   INFO] Showing log output:
[   INFO] Terminating since there is no system event server.
[   INFO] (Run the EventPump or pass the argument "-RegisterForSystemEvents" if you want to run without SpringBoard. 
```

这仅发生在模拟器上还是真实设备上？

相同的应用程序在 4.x 和 5.x 设备和模拟器上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:00:53.273

iOS 6 beta 4 引入了对如何在 Web 视图中加载和显示内容的规则的更改，目前这让我们大吃一惊。

我们绝对会为 iOS 6 解决这个问题！然而，目前这方面的情况显然仍在发生变化，所以我们要等到发布候选版本和 iOS 6 本身，然后才能以一种或另一种方式解决这个问题。

@Patrick，这可能意味着我们毕竟要回到 http 方案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T20:26:13.717

9 月 17 日`Trigger.io`增加了对 iOS 6 和新 iPhone 5 屏幕尺寸的支持：

[http://docs.trigger.io/en/latest/release-notes.html#v1-4-14](http://docs.trigger.io/en/latest/release-notes.html#v1-4-14)

# svn - 如何在eclipse中使用环境变量作为#defines

> ID：12142280
> 
> 赞同：1
> 
> 时间：2012-08-27T12:47:04.857
> 
> 标签：svn, g++, environment-variables, c-preprocessor

我希望分配一个内部版本号作为我的（C++）项目版本信息的一部分。我希望 g++ 或 Eclipse 调用一些会增加（或者如果我选择在发布时将其固定不变）BUILD_NUMBER 的外部脚本，然后在我的代码中选择 BUILD_NUMBER 作为#defined 值。这可能吗？我该怎么做？请注意，我希望这个值受到更多限制，可能是 C++ 变量。在我们将构建声明为 beta 之前，它将是一个变量。然后它会锁定。

作为替代方案，我可以使用 SVN 版本号。Eclipse 可以将其填充到环境变量或#define-d 值中吗？

我环顾了谷歌和 Eclipse 论坛，发现许多条目与我用来提出这个问题的搜索词相同。没有什么话题出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:01:28.767

Eclipse 调用您的 makefile，通常默认使用“全部”目标（您可以在 Projects > Properties > C++ Build > Behavior > Workbench Build Behavior 中更改目标。）

由于您的问题没有提及您的makefile，这可能是问题的关键：您需要向您的makefile 添加代码，以确保在调用g++ 之前生成内部版本号标头（要创建）。

如果你不熟悉 GNU 'make'，你应该从它开始。至于从 Subversion 获取当前版本，您可以在 bash 脚本中执行此操作或制作配方：

```
echo "#define SVN_REV=$(svn info | grep 'Last Changed Rev:' | cut -c 17 )" > my_version_header.h 
```

此命令首先运行'svn info'，选择最后更改的修订行，修剪行的开头，并将结果写入C 头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:02:04.493

您可以使用[$Revision$ Subversion 关键字](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html)（并适当地设置 svn:keywords）来获取插入/更新*文件的最后更改修订。*

但是，如果您想要整个“项目”（目录）的修订号，则需要按照[FAQ 中的说明进行](http://subversion.apache.org/faq.html#version-value-in-source)操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:42:33.420

[我在http://th0nt.wordpress.com/2009/05/01/use-build-variables-in-eclipse-cdt-to-simplify-setting-work/](http://th0nt.wordpress.com/2009/05/01/use-build-variables-in-eclipse-cdt-to-simplify-setting-work/)找到了满足我需求的解决方案。它的要点是将 -D VERSION_NUMBER= 添加`myShellScript`到 Properties->C/C++ Builds->GCC C++ Compiler->Miscellaneous 属性。将 myShellScript 放在路径上的某个位置。

# javascript - 使用 JavaScript 验证用户交互/输入 - 好方法？

> ID：12142281
> 
> 赞同：0
> 
> 时间：2012-08-27T12:47:05.730
> 
> 标签：javascript, validation

我有一个包含很多控件（单选按钮、选择、文本字段……）的网站。我想验证这些控件，这意味着单击一个单选按钮应该禁用另一个按钮，或者在文本字段中输入一定数量，应该显示一条消息等等。

有什么好的方法吗？使用框架是可以的，但我没有找到一个好的框架。应该用 JavaScript 来完成。

有什么好的方法呢？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:50:38.463

是的，这是一个非常好的方法，因为它提高了可用性。但也总是在服务器端验证所有内容。

jQuery [Validate](http://docs.jquery.com/Plugins/Validation/validate)插件是一种非常灵活的客户端表单验证替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:49:55.563

Why not you are trying the jquery validate plugin ?

Validation client side data using javascript is Ok but i would recommend you to validate it on server side also in order to maintain the integrity of data.

# tomcat - URLRewriteFilter 和 FW1

> ID：12142283
> 
> 赞同：1
> 
> 时间：2012-08-27T12:47:19.280
> 
> 标签：tomcat, coldfusion, url-rewriting, tuckey-urlrewrite-filter, fw1

我正在使用框架一 (FW/1)、Coldfusion 10 并尝试使用 Tuckey URLRewriteFilter 从 URL 中删除 index.cfm。我在 FW/1 设置中将 generateSES 设置为 true 并将 SESOmitIndex 设置为 true

我的 urlrewrite.xml 文件中有以下代码

```
<rule>
    <from>^/(.*)$</from>
    <to last="true">/index.cfm/$1</to>
</rule> 
```

当我查看应用程序时，我收到 404 错误，因此我将 CGI 范围转储到我的 onMissingTemplate() 方法中，我看到以下键引起了我的注意。

```
PATH_INFO m/
PATH_TRANSLATED C:\Coldfusion10\cfusion\wwwroot\index.cf
CF_TEMPLATE_PATH  C:\Coldfusion10\cfusion\wwwroot\index.cf
SCRIPT_NAME //index.cf 
```

似乎它正在扼杀请求/上下文等。我在这里看到了一些关于 SO 的其他帖子，但没有任何答案。

我在本地 Windows Vista 机器上使用 ColdFusion 10，本地内置网络服务器。

谁能阐明我做错了什么或为什么会发生这种情况？我正在使用 URLRewriteFilter 4.0.3 版 [http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:35:43.927

> *“我在 FW/1 设置中将 generateSES 设置为 true，将 SESOmitIndex 设置为 true”*

这两个设置无关紧要——它们只影响 buildUrl 方法的行为。
*[（尽管知道 path_info 的存在将为该请求切换“generateSES”标志可能很有用，即使您在 FW 设置中明确禁用它也是如此。）]*

如果您使用的是 URL 过滤器，则无需担心通过 path_info 并且仅重写为 query_string 可能更简单 - 同样，无论上述设置如何，都使用/处理两者。

作为第一步，只需尝试一下，看看你会得到什么：

```
<rule>
    <from>^/(?!index\.cfm|favicon\.ico|list|of|folders)(.*)</from>
    <to last="true">/index.cfm?action=$1</to>
</rule> 
```

您可能会注意到那里的负面前瞻性`(?!`.. `)`- 它可以防止实际文件和目录被错误地重定向 - 如果您有任何其他根级文件添加它们，以及包含您的图像的任何顶级文件夹/样式表/等，`|`用作分隔符。

# android - 从没有扩展活动的调用中获取字符串（）

> ID：12142288
> 
> 赞同：1
> 
> 时间：2012-08-27T12:47:33.590
> 
> 标签：android, class, android-activity, getstring

我对一个包含我想从另一个类调用的信息的简单类有疑问。例如，这是`Util`包含信息的类：

```
public class Util{

public ArrayList<RecetaBean> getRellenas() {
    ArrayList<RecetaBean> MiLista = new ArrayList<RecetaBean>();

    RecetaBean receta1 = new RecetaBean();
    String ingrediente1[] = {         getString(R.string.app_name),getString(R.string.app_name),
    };
    receta1.setIngredientesLista(ingrediente1);

    MiLista.add(receta1);
    MiLista.add(receta1);
    MiLista.add(receta1);

    return MiLista;
}   
  } 
```

然后在另一个类中，我得到这样的 Items 调用：

```
 Util u = new Util();
    ArrayList<RecetaBean> Recetas = u.getRellenas(); 
```

`Util`所以，我在类中有一个执行问题`GETSTRING`，因为我想得到一个不同的字符串（因为不同的语言）。退出错误的方法是扩展类`Util`，`Activity`但`Util`不是`Activity`！如果我从 扩展`Activity`，应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:53:39.220

您需要做的就是在 Method 中定义一个上下文。

并这样称呼它；

```
Util u = new Util();
ArrayList<RecetaBean> Recetas = u.getRellenas(this); 
```

和你在你的方法中的上下文是这样的：

```
public ArrayList<RecetaBean> getRellenas(Context con) {
    ArrayList<RecetaBean> MiLista = new ArrayList<RecetaBean>();

    RecetaBean receta1 = new RecetaBean();
    String ingrediente1[] = {         con.getString(R.string.app_name), con.getString(R.string.app_name),
    };
    receta1.setIngredientesLista(ingrediente1);

    MiLista.add(receta1);
    MiLista.add(receta1);
    MiLista.add(receta1);

    return MiLista;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:58:41.107

您是否考虑过使用字符串数组？这将比您尝试做的简单得多。

就整体用户体验而言，我认为您对语言更改的担忧是不合理的。

# iphone - 在自定义相册中添加照片也添加在默认相册“相机胶卷”中

> ID：12142289
> 
> 赞同：0
> 
> 时间：2012-08-27T12:47:34.327
> 
> 标签：iphone, ios5

在我的应用程序中，我正在创建一个新相册“我的相册”，用户可以在该新创建的相册中导出照片。但它在“我的专辑”和默认专辑“相机胶卷”中的两张专辑中都显示

那么任何人都可以告诉我这是默认行为还是我的代码中可能存在问题？

谢谢。

# c++ - C++：非内联模板方法的放置

> ID：12142292
> 
> 赞同：2
> 
> 时间：2012-08-27T12:48:03.157
> 
> 标签：c++, templates, include

假设我有一个带有方法模板的类：

```
//file: X.h
class X{

    int x;
    //... more members and non-template functions

    template<typename T>
    void foo(T t){ //Error, cannot define the method here. Declaration is okay
        Y y = ...;
    }
}

//file Y.h
class Y {
    X x;
} 
```

由于循环类依赖（foo 的主体依赖于 Y，Y 依赖于 X），我无法定义`foo`我声明它的方法模板（请不要现在质疑设计）。

`foo`那么，在这种情况下，该把定义放在哪里呢？我不能将它放到 .cpp 文件中的其他定义中，否则链接将失败。

我的解决方案是创建一个新的头文件，例如“X.hpp”，并且只在其中添加模板方法的定义。在这个文件中，我包括“Xh”和“Yh”。现在，每当我需要 X 类时，我只包含“X.hpp”，它又会包含其他必要的 h 文件。

所以我的问题是：这是正确/最好的方法吗？不知何故，我有一个仅用于单个方法模板定义的 .hpp 文件，但它似乎是循环类型依赖项的唯一可能方式。再次请：不要通过说“最好避免循环类型依赖”或类似的东西来质疑设计。问题是：如果我有这些依赖项，那么处理单一方法模板的最佳方式是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:52:41.110

不质疑设计：

```
//file: X.h
#ifndef X_H
#define X_H
class X{

    int x;
    //... more members and non-template functions

    template<typename T>
    void foo(T t);
};

#include "Y.h"

template<typename T>
void X::foo(T t){ //Error, cannot define the method here. Declaration is okay
    Y y = ...;
}

#endif

//file Y.h
#ifndef Y_H
#define Y_H

#ifndef X_H
#error "Please include X.h"
#endif

class Y {
    X x;
}

#endif 
```

不需要额外的文件。

# actionscript-3 - 带有“if”的 AS3 KeyboardEvent 给出错误

> ID：12142293
> 
> 赞同：0
> 
> 时间：2012-08-27T12:48:03.947
> 
> 标签：actionscript-3, keyboard-events

第一次将 EventListener 用于 KeyboardEvent，但我无法使其工作：

这是代码：

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, Cal);

function Cal(event:KeyboardEvent):void 
{
    if (event.keyCode == Keyboard.ENTER) {
        Calco();
    }
} 
```

我得到的错误是：

场景 1，图层“动作”，第 1 帧，第 95 行 1136：参数数量不正确。预期 1。

第 94 行是 if 行，第 95 行是 Calco 的东西……我不明白问题出在哪里。我有另一个运行良好的代码示例，我以它为例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:00:56.607

一些想法......和工作示例：

```
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

// #1 - use the proper variables / function  names, upper and lower cases:
// Classes: Xxxxxx
// function : xxxxxx, xxxXxxxx
// variables : xxxxXxxx, xxxxx
// constants : XXXXXX
// #2 - use the readable function name, no shotcuts... ( just few advices );

stage.addEventListener(KeyboardEvent.KEY_DOWN, handleKeyboardDown);

function handleKeyboardDown(    e   :KeyboardEvent):void
{
    // #3 - for keyboard events use switch instead...

    // The error which was here is that the variable which parsed is named 'event' and you are using 'e',
    // you need to use the same name as it being initialized
    switch(e)
    {
        case Keyboard.ENTER :

            // the error for your 'Calco()' function, is because
            // function Calco (value.... expects for an variable.
                    // in this case this function does not required any variables
            calculate();
            break;
    }
}

function calculate():void
{
    trace (this);
} 
```

# ffmpeg - 使用ffmpeg将flv转换为mp4时设置背景颜色

> ID：12142294
> 
> 赞同：2
> 
> 时间：2012-08-27T12:48:03.960
> 
> 标签：ffmpeg, flv, mp4, alpha, webm

我正在尝试将上传到服务器的 flv 文件（带有 alpha 通道）转换为 html5 兼容格式。我已经进行了转换，但透明度呈现为黑色。我想做的是能够指定颜色。

是否可以转换视频并指定颜色？

或者，我是否能够在我生成的静止图像上覆盖具有透明度的视频？

**更新** 我可能解决了我自己的问题......这是我的 ffmpeg 命令：

```
`ffmpeg -loop_input -f image2 -i background.png -r 25 -t 10 -an -level 21 -refs 2 -b 345k -bt 345k -acodec libfaac -vcodec libx264 -ac 2 -ab 96k -ar 44100 -vf "movie=input.flv, scale=370:500 [logo]; [in][logo] overlay=0:0 [out]" -y -threads 0 output.mp4` 
```

哪个有效..我只需要在转换之前在服务器上以正确的尺寸生成背景图像。

# python - 使用 dbus-python api 在 linux 系统上实现 A2DP sink

> ID：12142298
> 
> 赞同：2
> 
> 时间：2012-08-27T12:48:09.663
> 
> 标签：python, linux, bluetooth, dbus, a2dp

我想在运行最新 Ubuntu 12.04 和最新 bluez 堆栈的 linux 系统上实现自定义 A2DP 接收器。

我的基本要求是：

*   充当接收器的 Linux 系统（例如具有默认密钥“0000”或“anything”的自动身份验证的蓝牙耳机）

*   我想使用 dbus-python API 与 bluez stack 进行通信。我想运行我自己的算法来在运行时配置通信参数，那就是我想实现我自己的接收器。

*   后来我还想为我的 linux 系统实现 HSP 和 HFP 配置文件。

基本上，我想运行这些配置文件并测试通过 USB 与我的 linux 系统连接的外部蓝牙模块以进行各种音频传输配置，并评估不同配置文件下的音频接收性能。

我知道网络上必须已经有开源代码。但我找不到一个。即使代码是用 C 或 JAVA 编写的，对我来说也没关系。我需要它用于我的教育目的，我不能购买商业代码。因此，有专业知识的人请帮助我创建这个测试平台。因为，我的主要目标是将来修改 bluez 堆栈，我不想浪费时间创建测试台。

# c++ - 如何避免专门化“大”模板类而不创建空类？

> ID：12142301
> 
> 赞同：4
> 
> 时间：2012-08-27T12:48:31.267
> 
> 标签：c++, templates

鉴于以下情况：

```
template <typename T0,typename T1,typename T2 , typename T3 , typename T4>
class Tuple
{
private:
    T0 v0;
    T1 v1;
    T2 v2;
    T3 v3;
    T4 v4;

public:
    void f()
    {
        cout << v0 << "," << v1 << "," << v2 << "," << v3 << "," << v4 << endl;
    }

}; 
```

我想创建一个只有两个`int`-s 的部分类，那么我必须像这样专门化：

```
class NullType { };  // create an empty class
template <typename T0, typename T1>
class Tuple<T0,T1,NullType,NullType,NullType >
{
    private:
        T0 v0;
        T1 v1;
    public:
        void func()
        {
            cout << "i'm a specialization" << endl;
        }
}; 
```

但是这个实现需要我做：

```
Tuple<int,int,NullType,NullType,NullType> b; 
```

所以这很丑:)

有没有另一种方法来实现部分专业化而不定义另一个（空）类，所以我可以这样做：`Tuple<int,int> b1;`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T12:56:53.777

您可以使 T2 到 T4 默认模板参数并使用`void`而不是空`NullType`类，例如：

```
template <typename T0,typename T1,typename T2=void , typename T3=void , typename T4=void> class Tuple { private:
    T0 v0;
    T1 v1;
    T2 v2;
    T3 v3;
    T4 v4;

public:
    void f()
    {
        cout << v0 << "," << v1 << "," << v2 << "," << v3 << "," << v4 << endl;
    }

};

template <typename T0, typename T1> class Tuple<T0,T1,void,void,void > {
    private:
        T0 v0;
        T1 v1;
    public:
        void func()
        {
            cout << "i'm a specialization" << endl;
        } };

int main(int argc, char** argv) {
    Tuple<int,int> myTuple;
    myTuple.func(); 
    return 0;
} 
```

有关工作示例，请参见[此处。](http://ideone.com/tw0QR)

编辑：或者，您可以将[boost::tuple](http://www.boost.org/doc/libs/1_51_0/libs/tuple/doc/tuple_users_guide.html)或 std::tuple 与 C++11 一起使用 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:21:29.953

如果您的编译器支持 C++11 模板别名，这很容易做到：

```
template <typename T, typename U>
using tuple2 = tuple<T,U,NullType,NullType,NullType>; 
```

# javascript - 如何在 javascript ( jquery?

> ID：12142304
> 
> 赞同：2
> 
> 时间：2012-08-27T12:48:43.837
> 
> 标签：javascript, regex

我需要操作一个看起来像这样的链接href：

> /agents/view/model:会员/ag_start_dateMonth:08/ag_start_dateYear:2012/ag_end_dateMonth:08/ag_end_dateYear:2012

我需要抓住部分：`ag_start_dateMonth`并用`08`用户通过表单选择的值替换该值。

这意味着，我需要在字符串中找到此模式的位置，并在下一个`ag_start_dateMonth`之后和之前找到值，并将其替换为用户通过表单选择选项提供的新值。`:``/`

我怎样才能做到这一点？请建议，我很不确定正则表达式语法：-/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:52:10.487

使用[替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
var s = '/agents/view/model:Member/ag_start_dateMonth:08/ag_start_dateYear:2012/ag_end_dateMonth:08/ag_end_dateYear:2012';
var selected = 10;
s = s.replace(/(ag_start_dateMonth:)([0-9]+)/, '$1' + selected); 
```

这个方便的小正则表达式维护两个匹配组：一个可能称为静态，另一个将包含您要替换的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:55:19.363

这应该可以帮助您：

```
var s = '/agents/view/model:Member/ag_start_dateMonth:08/ag_start_dateYear:2012/' +
        'ag_end_dateMonth:08/ag_end_dateYear:2012';
var newText = 'foo';

alert(s.replace(/(ag_start_dateMonth:)08(\/)/, '$1' + newText + '$2')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:02:59.493

如果此输入来自页面上的表单，您始终可以“重建”href 而不是搜索和替换。假设您有一个表单，您可以从页面上获取这些值，使用 jQuery 这将是微不足道的

```
jQuery('#id-of-form button').click( function () {
    var start_month = jQuery('#id-of-form select.start-month').val();
    var start_year = jQuery('#id-of-form select.start-year').val();
    var end_month = jQuery('#id-of-form select.end-month').val();
    var end_year = jQuery('#id-of-form select.end-year').val();
    jQuery(a#your-link-id).attr('href','/agents/view/model:Member/ag_start_dateMonth:' +
         start_month + '/ag_startdateYear:' + start_year + "/ag_end_dateMonth:" +
         end_month + '/ag_end_dateYear:' + end_year);
}); 
```

# mysql - 计算要结束的行数

> ID：12142311
> 
> 赞同：-1
> 
> 时间：2012-08-27T12:48:57.407
> 
> 标签：mysql

```
 id      date     group n1  n2  n3  n4  n5
18853   1945-01-05  BA  87  34  1   59  50
18854   1945-01-13  BA  6   66  1   16  48 <= the last 16, 7 rows to the end
18855   1945-01-20  BA  38  14  24  78  36
18856   1945-01-27  BA  49  30  87  15  65 <= the last 49, 5 rows to the end
18857   1945-02-03  BA  30  64  36  5   32
18858   1945-02-10  BA  15  36  37  86  31 <= the last 36, 3 rows to the end
18859   1945-02-17  BA  86  78  69  7   60 <= the last 86, 2 rows to the end
18860   1945-02-24  BA  83  7   72  88  19 <= the last 7, 1 row to the end
18861   1945-03-03  BA  47  20  77  73  30 <= the last 47, 0 rows to the end 
```

我有上面的表格（它是按 id 排序的，但是我打算按日期排序）。有没有办法获取指定数字和mySql中最后一行之间的行数？请注意，某些数字会重复两次或更多次。该脚本应使用最低的行。这是 mySQL 应该输出的表：

```
Number|Rows count to the end
16|7
7|1
86|2
49|5
47|0
36|3 
```

查询应搜索列 n1、n2、n3、n4、n5 并选择最接近末尾的值并将剩余的行计数到末尾。谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:02:38.577

假设您的未命名列命名如下：

```
c1      c2          c3  c4  c5  c6  c7  c8
18853   1945-01-05  BA  87  34  1   59  50
18854   1945-01-13  BA  6   66  1   16  48
18855   1945-01-20  BA  38  14  24  78  36
18856   1945-01-27  BA  49  30  87  15  65
18857   1945-02-03  BA  30  64  36  5   32
18858   1945-02-10  BA  15  36  37  86  31
18859   1945-02-17  BA  86  78  69  7   60
18860   1945-02-24  BA  83  7   72  88  19
18861   1945-03-03  BA  47  20  77  73  30 
```

此外，假设 c1 是您的 PK 索引列，而列 c7 是您感兴趣的列，以下可能会给您您想要的内容：

```
select t1.c7, MAX(t1.c1), (select count(*)
              from table t2
              where MAX(t1.c1) < t2.c1) as rowsToEnd
from table t1
group by t1.c7 
```

好的，在理应了解您想要什么之后，以下内容应该可以满足您的需求：

**编辑：**在阅读了 Imre L 的回答后，我意识到我完全忘记了 IN 运算符，所以这是更优雅的解决方案：

**再次编辑：**阅读您的问题更新后。这是假设 c4、c5、c6、c7、c8 之一包含出现在这些行中的任何一行中的所有数字：

```
select distinct t3.c4, ( select count(*) AS RowsToEnd
                         from table t1
                         where t1.c1 > ( select max(t2.c1)
                                         from table t2
                                         where t3.c4 IN 
                                         (t2.c4, t2.c5, t2.c6, t2.c7, t2.c8)
                        )
from table t3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:56:58.180

假设数字列是名称 n1..n6

使用 16 作为示例编号

```
select count(1) 
  from tablename 
 where date > (select date 
               from tablename 
              where 16 in (n1,n2,n3,n4,n5,n6) 
              order by date desc
              limit 1) 
```

重复日期呢？

# django - 使用 wsgi 运行 Django 项目

> ID：12142316
> 
> 赞同：0
> 
> 时间：2012-08-27T12:49:13.890
> 
> 标签：django, django-admin, django-views, django-wsgi

嗨，我正在尝试使用 WSGI 应用程序托管 django 站点。我的项目位于`/opt/labs`其中，其内容是`django/` `labs_site/` `content/` `home/`

labs_site 是从 startproject 和`labs_site/urls.py`i 链接到内容、主页和其他模块的初始项目

我遵循了[https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/)中的文档，直到重命名`labs_site/wsgi.py`为`os.environ.setdefault("DJANGO_SETTINGS_MODULE", "labs_site.settings")`

所以在此之后我应该遵循的下一步是什么。我想在没有运行服务器的情况下运行项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:11:27.220

现在修改你的 apache 设置。如果设置 wsgi 文件是您的第一步，那么下一步应该修改您的 apachee 配置以指向该文件。

您发布的链接指向此页面：[https ://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/)

有所有必要的信息。您可以选择将所有内容放入 http.conf 文件或在 /etc/apache 中的可用站点和启用站点的文件夹下为其创建站点文件。

之后 - 通过 /etc/init.d/apache2 或 service apache2 restart 重新启动您的 apache 服务器 - 无论哪个有效。

然后从你第一次开始，你会在 /var/log/apache2/error.log 中看到一些错误。修复它们......然后再试一次:)

祝你好运。

# html - div的水平滚动条

> ID：12142319
> 
> 赞同：0
> 
> 时间：2012-08-27T12:49:24.060
> 
> 标签：html, css, scroll

请在[此处找到演示](http://jsfiddle.net/gwUyn/)。

我试图让水平滚动到 div 但在当前代码中，只出现垂直滚动。我需要所有 ul 列表都在同一行，这意味着它不应该出现在第二行，这样我才能获得水平滚动。[http://jsfiddle.net/gwUyn/](http://jsfiddle.net/gwUyn/)

如何获得水平滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:13:49.333

上：

```
.horizontalaccordion > ul > li 
```

添加：

```
dispaly:inline-block 
```

删除：

```
dispaly:block 
```

你的代码会起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:00:52.457

您应该使用“溢出-x：滚动；” 在您的 div 所属的 css id 或类中。

> ##HTML FILE## <div class="test">你要写的所有文本</div>
> 
> ##CSS 文件## .test{ 宽度：100px; 高度：100px；溢出-x：滚动；}

链接已编辑

在你的情况下，这是特别的，但我认为你试图这样做：http: [//jsfiddle.net/5XCRL/](http://jsfiddle.net/5XCRL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:09:35.303

永远不会有水平滚动条，而您的子元素适合父元素。如果我正确理解了你的目标，这个[jsfiddle](http://jsfiddle.net/gwUyn/1/)可以帮助你

**更新：**

再试一次：[jsFiddle](http://jsfiddle.net/gwUyn/3/)

# r - 指定模型错误

> ID：12142322
> 
> 赞同：1
> 
> 时间：2012-08-27T12:49:29.277
> 
> 标签：r, time-series, xts, quantmod

我正面临这个问题，无法解决：这是代码：

```
library(quantmod)
library(TTR)
library(randomForest)

getSymbols('^STOXX50E', src='yahoo')
equity.index<-STOXX50E

myReturnsSign = function(x) sign(Delt(Cl(x),type="log"))[-1]
mySMA =function(x,n) SMA(Cl(x),n)[-1]
myEMA = function(x,n,ratio) EMA(Cl(x),n,ratio)[-1]

model1<-specifyModel(myReturnsSign(equity.index) ~ myEMA(equity.index,20,0.8) + mySMA    (equity.index,5)) 
```

这是错误消息：

```
Error in xts(model.frame(model@model.spec, data = env, na.action = NULL),  : 
NROW(x) must match length(order.by) 
```

然而 ：

```
> dim(myEMA(equity.index,20,0.8))
[1] 2632    1

> dim(mySMA(equity.index,5))
[1] 2632    1

> dim(myReturnsSign(equity.index))
[1] 2632    1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:14:30.163

FWIW，`specifyModel`代码已经超过 4 年没有工作了，我认为那不是因为它是稳定的。

无需仔细观察，您的问题似乎可以通过`[-1]`从函数中删除这些子集来解决

```
myReturnsSign = function(x) sign(Delt(Cl(x),type="log"))
mySMA =function(x,n) SMA(Cl(x),n)
myEMA = function(x,n,ratio) EMA(Cl(x),n,ratio)
model1<-specifyModel(myReturnsSign(equity.index) ~ myEMA(equity.index,20,0.8) + mySMA(equity.index,5)) 
```

# php - 动态填充复选框

> ID：12142330
> 
> 赞同：0
> 
> 时间：2012-08-27T12:50:12.933
> 
> 标签：php, javascript, html

简单的问题，我正在尝试动态填充 html 表单复选框，但是当我尝试通过在 html 中使用复选框的选中属性来执行此操作时，它无法正常工作。该复选框保持选中我是否使用`checked='0' / checked='1'`,`checked='true' / checked='false'`和`checked='checked' / checked='unchecked'`。

虽然我通过在 php 中应用额外的检查来解决它，如下所示......

```
while($contact = $db->fetchByAssoc($contacts))
{
$include_checked =( $contact['include'])? " checked={$contact['include']} ": "";
$opted_checked = ($contact['opted_out'])? " checked={$contact['include']} ": "";

$html.="<tr><td>{$contact['name']} </td>
            <td><input type='checkbox' {$include_checked}/> </td>    
            <td><input type='checkbox' {$opted_checked}/> </td> 
```

有没有更好的解决方案呢？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:54:07.410

属性的值`checked`无关紧要。当您希望它未选中时，根本不要设置`checked`属性。

```
<input type="checkbox" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:57:27.673

用于`yes`预选它。删除它以默认取消选中它

```
<input type="checkbox" checked="yes"/> 
```

或`checked="checked"

```
<input type="checkbox" checked="checked"/> 
```

或者，但已弃用且不鼓励使用：

```
<input type="checkbox" checked /> 
```

未选中？根本不要使用任何选项。只需将其删除。通过后端没有办法不选择它。当然，这根本不需要。

# c# - 获取列表中的属性名称

> ID：12142332
> 
> 赞同：2
> 
> 时间：2012-08-27T12:50:19.030
> 
> 标签：c#, reflection, properties

**例子**

```
public class MyItems
{
    public object Test1  {get ; set; }
    public object Test2  {get ; set; }
    public object Test3  {get ; set; }
    public object Test4  {get ; set; }
    public List<object> itemList
    {
        get
        {
            return new List<object>
            {
                Test1,Test2,Test3,Test4
            }
        }
    }
}

public void LoadItems()
{
    foreach (var item in MyItems.itemList)
    {
        //get name of item here (asin,  Test1, Test2)
    }
} 
```

**

我已经用反射尝试了这个.. asin`typeof(MyItems).GetFields()`等.. 但这不起作用。

如何找出“item”的名称？测试1？测试2？？ETC...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:55:27.647

```
 var test = typeof(MyItems).GetProperties().Select(c=>c.Name); 
```

以上将为您提供一个可枚举的属性名称。如果要获取列表中属性的名称，请使用：

```
var test = typeof(MyItems).GetProperties().Select(c=>c.Name).ToList(); 
```

编辑：

根据您的评论，您可能正在寻找：

```
 foreach (var item in m.itemList)
    {
        var test2 = (item.GetType()).GetProperties().Select(c => c.Name);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:54:37.537

对象的“名称”既不是`"Test1"`，也不是`"MyItems[0]"`。

两者都只是对对象的引用，实际上是无名的。

我不知道 C# 中的任何技术可以给你一个对象的所有引用，给定一个对象，所以我不认为你想要的东西是可能的，你想要的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:58:14.887

您可以使用此代码访问属性的名称（请参阅[MSDN](http://msdn.microsoft.com/de-de/library/kyaxdd3x.aspx#Y1090)）

```
Type myType =(typeof(MyTypeClass));
// Get the public properties.
PropertyInfo[] myPropertyInfo = myType.GetProperties(BindingFlags.Public|BindingFlags.Instance);

for(int i=0;i<myPropertyInfo.Length;i++)
{
    PropertyInfo myPropInfo = (PropertyInfo)myPropertyInfo[i];
    Console.WriteLine("The property name is {0}.", myPropInfo.Name);
    Console.WriteLine("The property type is {0}.", myPropInfo.PropertyType);
} 
```

但现在我**不知道任何代码**来*访问引用的名称*！

# javascript - 滚动页面时弯曲的图像路径

> ID：12142333
> 
> 赞同：2
> 
> 时间：2012-08-27T12:50:21.200
> 
> 标签：javascript, bezier, curve

我正在尝试为一个项目创建一个过山车，并且需要过山车跟随一条路径。

[你可以在过山车](http://www.graahf.dk/rollercoaster/rollercoaster.html)上看到我的插图

我需要红框跟随背景中的过山车路吗？红色框说明了我将要使用的图像。这可能吗？我正在尝试使用此代码...

```
<script type="text/javascript">

        $(window).on('scroll', function(e) {
            var scrollTop = $(window).scrollTop();
            //var windowHeight = $(window).height();
            var windowHeight = $('.road2').height();
            //var S = scrollTop + Math.floor(windowHeight / 2);

            var S = $(this).scrollTop();            // scrolled distance
            var t = 0 + (S/windowHeight);                
            //var T = 0 + (S/36);                        // value for Top
            //var L = 300 + Math.abs(Math.sin(S/400)*460);  // value for Left
            //
            //$(".rollerImage").css({top: T+'%', left: L+'px'});    //set CSS

            var canvas_X=400;
            var canvas_Y=400;

            // Increment Parameterization
            t += 0.05;

            // Width of Car
            var car_X=150;
            // Hieght of Car
            var car_Y=50;

            // Point A
            var a_X=0;
            var a_Y=0;

            // Point B
            var b_X=canvas_X-car_X; //Place point B at the end
            var b_Y=0;

            // Center of Semi Circle
            var c_X=(b_X-a_X)/2;
            var c_Y=(a_Y-a_Y)/2;

            // Calculate X and Y point on trajectory 
            var x = a_X + t * (b_X- a_X);
            var y = Math.sqrt(Math.pow((b_X - a_X),2)/4 + Math.pow((x-c_X),2));

            $(".rollerImage").css({top: x+'px', left: y+'px'});    //set CSS

        });            
    </script> 
```

希望有人可以帮助这种类型的路径动画。也许可以在坐标数组中定义路径？

我尝试使用[joel scrollpath](http://joelb.me/scrollpath/)，但无法将图像“绑定”到路径:(

//格拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:38:35.763

我尝试使用您的 html 和 css 文件以及演示站点中的代码使其与 jQuery Scrollpath 一起使用。

检查这是否适合您：http: [//jsfiddle.net/Skr4R/6/embedded/result/](http://jsfiddle.net/Skr4R/6/embedded/result/)

您还可以检查小提琴的来源：http: [//jsfiddle.net/Skr4R/6/](http://jsfiddle.net/Skr4R/6/)

对此很重要的是，整个包装器移动和旋转，这就是为什么在我的解决方案中，火车图像位于包装器之外，如下所示：

```
<div class="rollerCoasters">
  <img src="" style="background:red; height:100px; width:50px; position:absolute; top:380px; left:50%; z-index:200; margin-left:-25px">
</div>

<div class="wrapper">
  <div class="road1"><img src="base64-encoded-img" width="1434" height="539"/></div>
</div> 
```

希望这能让你开始。如果您希望火车移动而不是周围环境，这可能不是最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:58:42.820

我正在尝试实现相同的过程，这对我有帮助，关于用轨道旋转火车/物体的前进方式你能不旋转背景吗（轨道让火车看起来像是在跟随轨道）

# javascript - Erlang 中的 decodeURIComponent

> ID：12142334
> 
> 赞同：1
> 
> 时间：2012-08-27T12:50:23.793
> 
> 标签：javascript, unicode, erlang, yaws

我使用 encodeURIComponent 在客户端对我的数据进行编码。

```
encodeURIComponent($('#...').val()), 
```

如何在 yaws 服务器上对其进行解码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:23:03.720

inets 应用程序的[http-uri 模块](http://www.erlang.org/doc/man/http_uri.html#decode-1)中有一些东西可能会有所帮助

# wpf - 单选按钮 Ischecked 属性在 wpf mvvm 中不起作用

> ID：12142337
> 
> 赞同：3
> 
> 时间：2012-08-27T12:50:30.187
> 
> 标签：wpf, mvvm

我无法将两个单选按钮绑定到我的 xaml 表单和具有相同组名的 IsChecked 属性，我也使用了 nullabletoboolconverters。但是，radiobuttons ischecked 属性在我的代码中没有改变（它根本没有击中断点，一旦我们在第二个单选按钮之后点击第一个单选按钮）并且我分别绑定其中两个的 ischecked 属性，因为我需要设置基于 radiobuttons 属性的表单上某些其他面板的可见性。

以下是我的 xaml 代码，稍后是我的单选按钮属性的 viewmodel.cs 代码：

```
 <RadiobuttonSelectedConverter x:Key="CheckedSelection"/>// declaring my converter class in my resource dictionary.

  <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="3" Margin="10,5,0,0">
        <RadioButton GroupName="RadiosGroup" IsChecked="{Binding IsRadioButton1,Mode=TwoWay,
             Converter={StaticResource CheckedSelection}, ConverterParameter=true}">
                    First</RadioButton>
        <RadioButton GroupName="RadiosGroup" 
                     Margin="40,0,0,0" IsChecked="{Binding IsRadioButton2,Mode=TwoWay, 
            Converter={StaticResource CheckedSelection}, ConverterParameter=true}">Second</RadioButton>
    </StackPanel>

    private bool _isRadioButton1;

    public bool IsRadioButton1
    {
        get
        {
            return _isRadioButton1;
        }
        set
        {
            if _isRadioButton1!= value)
            {
                _isRadioButton1= value;

                IsRadioButton2= false;
                OnPropertyChanged("IsRadioButton1");

            }
        }
    }

    private bool _isRadioButton2;

    public bool IsRadioButton2
    {
        get
        {
            return _isRadioButton2;
        }
        set
        {
            if (_isRadioButton2 != value)
            {
                _isRadioButton2 = value;

              IsRadioButton1= false;
              OnPropertyChanged("IsRadioButton2");

            }
        }
    } 
```

以下是我的转换器代码：

```
 [ValueConversion(typeof(bool?), typeof(bool))]
public class RadiobuttonSelectedConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool param = bool.Parse(parameter.ToString());
        if (value == null)
        {
            return false;
        }
        else
        {
            return !((bool)value ^ param);
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool param = bool.Parse(parameter.ToString());
        return !((bool)value ^ param);
    }
} 
```

有人请帮我解决我的问题提前谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:20:11.643

就我个人而言，我根本不会编写`RadioButtons`这样的关联代码。由于您想要的选择行为与用于 a 的选择行为相同`ListBox`，我发现最简单的方法是简单地使用为每个项目设置`ListBox`样式的a 。`RadioButtons`

代码隐藏通常包含

*   `ObservableCollection<string> Options`
*   `string SelectedOption`

我将使用这种风格`ListBox`：

```
<Style x:Key="RadioButtonListBoxStyle" TargetType="{x:Type ListBox}">
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="KeyboardNavigation.DirectionalNavigation" Value="Cycle" />
    <Setter Property="ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="{x:Type ListBoxItem}" >
                <Setter Property="Margin" Value="2, 2, 2, 0" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Border Background="Transparent">
                                <RadioButton
                                    Content="{TemplateBinding ContentPresenter.Content}" VerticalAlignment="Center"
                                    IsChecked="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent},Mode=TwoWay}"/>

                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

样式是这样应用的：

```
<ListBox ItemsSource="{Binding Options}"
         SelectedValue="{Binding SelectedOption}"
         Style="{StaticResource RadioButtonListBoxStyle}" /> 
```

您还可以使用其他东西而不是 a`String`作为集合，例如 a `ChildViewModel`，然后根据当前项目设置您的相关视图，这意味着您不必费心`Visibility`在您的任何一个相关面板中`ViewModel`。

```
<DockPanel>
    <ListBox ItemsSource="{Binding OptionViewModels}"
             SelectedValue="{Binding SelectedViewModel}"
             Style="{StaticResource RadioButtonListBoxStyle}"
             DockPanel.Dock="Left">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding DisplayName}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <ContentControl Content="{Binding SelectedViewModel}" />
</DockPanel> 
```

但是对于您的实际问题，我可以想到它可能表现不正确的 3 个原因。

第一个在[Jay 的回答](https://stackoverflow.com/a/12142904/302677)中进行了概述：您`IsChecked2`在 setter 中设置为 false ，`IsChecked1`并在其 setter 中设置为 false，因此最终结果是两个值都是 false。`IsChecked2``IsChecked1`

第二个是你的转换器可能有问题。你说它是一个评论它在没有转换器的情况下正常工作，所以我认为这可能是问题的一部分。

最后，我相信更改分组`RadioButtons`将触发`IsOptionA.IsSelected = false`旧项目和`IsOptionB.IsSelected = true`新选择的项目，并且这两个可能会在某个地方交叉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:25:52.333

这里有几个问题。

1.  你不需要转换器。制造`IsRadioButton1`和`IsRadioButton2`类型的属性，`bool?`就`TwoWay` `Binding`足够了，或者只是让它`bool`好像三态不适合你。
2.  您的设置器中的逻辑似乎不正确。在这两种情况下，您都将 other 的值设置`RadioButton`为`false`，因此如果`IsRadioButton1`是`true`然后您设置`IsRadioButton2`为`true`，则 setter 将调用`IsRadioButton = false`，然后该 setter 将调用`IsRadioButton2 = false`。他们最终都会成为`false`.

您可能希望阅读此内容`if(value) IsRadioButton2 = false;`

* * *

### 编辑

实际上，我记得，`RadioButton`并不意味着像 a`bool`那样绑定到属性`CheckBox`。我认为您将所有`RadioButton`s 绑定到一个属性，并使用 a`Converter` *和 a`ConverterParameter`*来设置该属性。我会找到一个例子并在一分钟内发布。

* * *

好的，这是一个解决方案，使用一个`RadioButton`纯粹通过绑定行为的派生类：http: [//blogs.msdn.com/b/mthalman/archive/2008/09/04/wpf-data-binding-with-radiobutton.aspx](http://blogs.msdn.com/b/mthalman/archive/2008/09/04/wpf-data-binding-with-radiobutton.aspx)

这是一个相关的 SO 问题和答案：[MVVM：将单选按钮绑定到视图模型？](https://stackoverflow.com/questions/2284752/mvvm-binding-radio-buttons-to-a-view-model)

# python - difflib.SequenceMatcher get_matching_blocks() 出现无法解释的行为

> ID：12142339
> 
> 赞同：0
> 
> 时间：2012-08-27T12:50:34.280
> 
> 标签：python, string, fuzzy, difflib

我正在尝试[fuzzywuzzy](https://github.com/seatgeek/fuzzywuzzy)，并遇到了很多情况下它会产生错误的结果。我尝试调试并遇到了一个难以解释的 get_matching_blocks() 场景。

我对 get_matching_blocks() 的理解是，它应该返回一个三元组 (i,j,n)，其中`n`索引处第一个字符串中长度的子字符串应与索引 处第二个字符串`i`中长度的子字符串完全匹配`n`j.

```
>>> hay = """"Find longest matching block in a[alo:ahi] and b[blo:bhi]. If isjunk was omitted or None, find_longest_match() returns (i, j, k) such that a[i:i+k] is equal to b[j:j+k], where alo <= i <= i+k <= ahi and blo <= j <= j+k <= bhi. For all (i', j', k') meeting those conditions, the additional conditions k >= k', i <= i', and if i == i', j <= j' are also met. In other words, of all maximal matching blocks, return one that starts earliest in a, and of all those maximal matching blocks that start earliest in a, return the one that starts earliest in b."""
>>> needle = "meeting those conditions"
>>> needle in hay
True
>>> sm = difflib.SequenceMatcher(None,needle,hay)
>>> sm.get_matching_blocks()
[Match(a=5, b=8, size=2), Match(a=24, b=550, size=0)]
>>> 
```

那么为什么上面的代码找不到匹配的块呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:09:24.600

我可能看不太清楚，但你不匹配`hay`and `needle`。你得到了

```
sm = difflib.SequenceMatcher(None,needle, sms) 
```

不应该

```
sm = difflib.SequenceMatcher(None, needle, hay) 
```

? 此外，为了记录，返回的列表中的最后一个元素`get_matching_blocks()`是格式的虚拟 (len(a), len(b), 0)。

也许这只是粘贴错误，但是请用实际代码更新您的问题（我正在考虑`SequenceMatcher()`方法）

* * *

`SequenceMatcher`破坏了“垃圾启发式” - 如果第二个字符串至少有 200 个字符长，则每个字母（计数 1）超过总长度的 1% 就是*垃圾。*来自[官方 bug 票](http://bugs.python.org/issue2986)的评论（即[此评论](http://bugs.python.org/msg109442)）：

> 该错误的原因是启发式的：如果第二个序列的长度至少为 200 个项目，那么在第二个序列中出现超过 1% 的时间的任何项目都被视为垃圾。这是针对像“else:”和“return”这样的重复代码行，但对于常见项目是必要内容的小字母来说可能是致命的。

我还将让自己引用上述作者提供的代码示例：

这里 len(a) == 200，len(b) == 199：

```
>>> print(SM(None, 'x' + 'y'*199, 'y'*199).ratio())
>>> 0.9975 #correct 
```

这里 len(a) == 199, len(b) == 200 （我们切换`a`和`b`）：

```
>>> print(SM(None, 'y'*199, 'x' + 'y'*199).ratio())
>>> 0 #wrong 
```

显然这两种情况都应该给出相同的输出。

该错误已通过添加我提到的可选参数来*修复*`autojunk`，对于此处的正确行为，应手动将其设置为`False`.

# c# - 将 URL 传递给 ColumnFixture

> ID：12142341
> 
> 赞同：0
> 
> 时间：2012-08-27T12:50:39.160
> 
> 标签：c#, fitnesse

我正在使用 C# 和 Slim 进行 Fitnesse 测试项目。我正在尝试将 Url 地址作为参数传递给 ColumnFixture。所有测试用例的 URL 地址都应该相同，所以我决定使用 !define 关键字来定义我的 url。在 Fitnesse 测试中，我有：

```
!define webServiceUrl {http://mytestserver.address.svc}

|!-MyNamespace.SearchClientFixture-!                       |
|webServiceUrl   |contactPhoneNumber|contactId?|identificationResult?|
|${webServiceUrl}|922222222         |0         |notfound             |
|${webServiceUrl}|                  |0         |notfound             | 
```

${webServiceUrl} 呈现为 HTML 锚标记，传递给我的 ColumnFixture 类的值也是 HTML 锚标记

`<a href="http://mytestserver.address.svc">http://mytestserver.address.svc</a>`

我试图用`!<text>! and !-`Fitnesse 标签转义 HTML，但它不起作用。我的问题是： 1\. 在我的情况下如何转义 HTML？2.如何将单个值传递给所有测试用例共享的ColumnFixture？是否可以向 SetUp 方法发送值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:21:46.397

你试过把！在表格的第一行之前。这应该会关闭整个表格的 wiki 渲染。

```
!|MyNamespace.SearchClientFixture                       |
|webServiceUrl   |contactPhoneNumber|contactId?|identificationResult?|
|${webServiceUrl}|922222222         |0         |notfound             |
|${webServiceUrl}|                  |0         |notfound             | 
```

这对我和我的所有项目都有效。唯一的麻烦是当您想要在表格中使用实际的 wiki 标记时（例如 !today）。

# webview - 某些站点或功能是否超出 WinRT WebView 控件的范围？

> ID：12142343
> 
> 赞同：2
> 
> 时间：2012-08-27T12:50:44.797
> 
> 标签：webview, windows-8, microsoft-metro, windows-runtime

如果我创建一个新的 Metro 项目并仅添加一个 WebView 控件，则添加以下代码：

```
public MainPage()
{
    this.InitializeComponent();

    wv1.Navigate(new Uri("http://www.amazon.com"));
} 
```

然后我得到一个`Unhandled Exception`（它让我可以选择使用新的 VS 实例进行调试）。如果我尝试其他网站，有些工作，有些不工作 - 我会遇到各种错误，但`http://www.bbc.co.uk`例如工作正常。我认为这与网站本身的特定功能有关。

是否有一些我无法使用 WebView 控件访问的网站功能？如果是这样，有没有办法解决这个问题？我似乎什至无法捕捉到错误（在上面的代码周围放置一个 try / catch 没有任何作用）。

# php - 具有模态响应的简单联系表

> ID：12142345
> 
> 赞同：1
> 
> 时间：2012-08-27T12:50:46.857
> 
> 标签：php, html, modal-dialog, contact-form

好的，我知道模态联系表单有很多问题/答案，但我想知道如何在页面上有一个正常的联系表单，并且在提交时，PHP 操作会以模态形式弹出，说“谢谢联系我们”，或者类似的东西，然后关闭的能力。我以前做过 HTML 联系表单并迷上了 PHP 操作，只是从来没有在模式中......任何简单的解决方案（不使用插件）？

如果有人有这个问题并希望得到答案，请务必投票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:36:25.177

如果您想要一个无 javascript 的解决方案，那么您的表单处理脚本将需要能够呈现表单的所有状态。这些包括：

*   初始未填写表格
*   对第一次提交的回应可能是：
    *   显示部分或错误填写的表格并标记错误
    *   谢谢你的消息
*   回复感谢信息

模态弹出窗口只是一个半透明的容器元素（例如`<div>`），其样式被设计为在所有其他 html（除了其子项）之上的 z 位置并覆盖整个视口。它包含一个表格和您可能喜欢的任何其他内容。不使用时，其`display`属性设置为`none`。

所以你的 php 表单处理程序可能会像这样工作：

```
$modalclass='modalhide';
$filteredpost=array();

if(isset($_POST['submit1']){ //user submitted form data
    //validate submitted data
    $filteredpost = my_cleanup_function($_POST); 
    if(my_form_is_good($filteredpost){
      $modalclass='modalshow';
      $filteredpost=array();
    } 
} 

echo <<< EOF
<form method='POST' name='mainform' action='myhandler.php'>
   //other form fields
   <input type='submit' name='submit1'>
</form>
<div class='$modalclass'>
   <form name='thanksmodal' method='POST' action='myhandler.php'>
      //content of some sort
      <input type='submit' name='thankssubmit'>
   </form>
</div>
EOF; 
```

AJAX 方法类似，只是 javascript 拦截提交按钮操作，异步提交到表单处理脚本并显示结果。周围有很多 javascript 库可以使这更容易。[jQuery](http://jquery.com/)和[jQuery-UI](http://jqueryui.com/home)是我最喜欢的两个。

# ruby-on-rails - Globalize3 - 一个视图中的两个翻译

> ID：12142347
> 
> 赞同：1
> 
> 时间：2012-08-27T12:50:50.390
> 
> 标签：ruby-on-rails, ruby, internationalization, globalize3

我使用 gem globalize3。

我想在一个索引视图中获得两种语言的翻译帖子，首先是英语，然后是俄语。而且我想发的不是英文的，是在英文帖子后面的俄文下面。我的问题是，因为我有一个默认的语言环境：en，如果：

```
@posts = Post.with_translations(:en) 
```

我会根据需要收到英文帖子，如果：

```
@posts_ru = Post.with_translations(:ru) 
```

我也收到英文帖子..可能是因为默认语言环境英语

如何在一个索引视图中同时获取英文和俄文的@posts？请帮我！提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T13:05:53.320

您可以像这样获得所有翻译：

```
@posts = Post.with_translations 
```

在您看来，如下所示使用它：

```
<% @posts.each do |post| %>

  <%= post.name(:en) %>
  <%= post.name(:ru) %>

<% end %> 
```

# jquery - 仅当鼠标悬停超过 3 秒时触发 onmouseover usnig jquery

> ID：12142348
> 
> 赞同：1
> 
> 时间：2012-08-27T12:50:58.893
> 
> 标签：jquery

我有一些如下所示的链接，这是一个[jsfiddle 链接](http://jsfiddle.net/3YBr8/)。

**我想要的是 ？**

我希望仅当鼠标悬停超过 3 秒时才触发 jquery 方法。我知道我必须使用`setTimeout`，但我无法理解如何使用它。

如果有人可以通过编辑我的[小提琴链接来帮助我](http://jsfiddle.net/3YBr8/)

**代码**

```
<ul>
     <li>
          <a onmouseout="RemoveDetails(this)" onmouseover="GetSomeDetail('Sachin (actor)', this)" onclick="Suggestion('Sachin (actor)');" class="link">Sachin (actor)</a>
     </li>
     <li>
          <a onmouseout="RemoveDetails(this)" onmouseover="GetSomeDetail('Sachin Dev Burman', this)" onclick="Suggestion('Sachin Dev Burman');" class="link">Sachin Dev Burman</a>
     </li>
     <li>
          <a onmouseout="RemoveDetails(this)" onmouseover="GetSomeDetail('Sachin Pilot', this)" onclick="Suggestion('Sachin Pilot');" class="link">Sachin Pilot</a>
     </li>
     <li>
          <a onmouseout="RemoveDetails(this)" onmouseover="GetSomeDetail('Sachin Rana', this)" onclick="Suggestion('Sachin Rana');" class="link">Sachin Rana</a>
     </li>
     <li>
          <a onmouseout="RemoveDetails(this)" onmouseover="GetSomeDetail('Sachin Tendulkar', this)" onclick="Suggestion('Sachin Tendulkar');" class="link">Sachin Tendulkar</a>
     </li>
     <li>
          <a onmouseout="RemoveDetails(this)" onmouseover="GetSomeDetail('Sachin, Pas-de-Calais', this)" onclick="Suggestion('Sachin, Pas-de-Calais');" class="link">Sachin, Pas-de-Calais</a>
     </li>
</ul>
<hr/>
<p style="color:red;" id="moreInfo"></p> 
```

**查询代码**

```
function GetSomeDetail(input, currentContext) {   
    $("#moreInfo").text(input);
}

function RemoveDetails(currentContext) {
    $("#moreInfo").text('Unloaded !');
} 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:56:51.977

你可以做这样的事情

```
var timeout;
    toExecute = function () {
        //
    };

$(XYZ).on({
    mouseover: function () {
        if(timeout) clearTimeout(timeout);
        timeout = setTimeout(toExecute, 3000);
    },
    mouseleave': function () {
        clearTimeout(timeout);
    }
); 
```

[这](http://jsfiddle.net/joplomacedo/3YBr8/5/)是您的小提琴上的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:57:05.420

我推荐你使用[这个插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)。

您可以使用它，`setTimeout()`但您可能遇到的问题比您想象的要多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:12:10.857

小提琴：http: [//jsfiddle.net/Guffa/3YBr8/2/](http://jsfiddle.net/Guffa/3YBr8/2/)

您可以通过在脚本中而不是在 HTML 标记中设置事件来大量清理代码。您可以将脚本中所需的文本放入每个项目的数据属性中。

```
<ul>
    <li>
        <a data-input="Sachin (actor)" class="link">Sachin (actor)</a>
    </li>
    <li>
        <a data-input="Sachin Dev Burman" class="link">Sachin Dev Burman</a>
    </li>
    <li>
        <a data-input="Sachin Pilot" class="link">Sachin Pilot</a>
    </li>
    <li>
        <a data-input="Sachin Rana" class="link">Sachin Rana</a>
    </li>
    <li>
        <a data-input="Sachin Tendulkar" class="link">Sachin Tendulkar</a>
    </li>
    <li>
        <a data-input="Sachin, Pas-de-Calais" onclick="Suggestion('Sachin, Pas-de-Calais');" class="link">Sachin, Pas-de-Calais</a>
    </li>
</ul>
<hr/>
<p style="color:red;" id="moreInfo"></p> 
```

当用户悬停项目时启动计时器。使用一个变量来保存计时器的句柄，这样如果鼠标在时间过去之前被移除，您可以停止计时器。

```
function info(text) {
    $("#moreInfo").text(text);
}

function GetSomeDetail(input) {   
    info(input);
}

function RemoveDetails() {
    info('Unloaded !');
}

function Suggestion(input) {
    alert(input);
}

$(document).ready(function(){

    var timer = null;

    $('.link').mouseover(function(){
        if (timer != null) {
            RemoveDetails();
        }
        var input = $(this).data('input');
        timer = window.setTimeout(function(){
            timer = null;
            GetSomeDetail(input);
        }, 3000);
        info('timer started');
    }).mouseout(function(){
        if (timer != null) {
            window.clearTimeout(timer);
            timer = null;
            info('timer stopped');
        } else {
            RemoveDetails();
        }
    }).click(function(){
        Suggestion($(this).data('input'))
    });

}); 
```

我添加了调用以在计时器启动或停止时显示一些信息，这些信息当然不会出现在最终结果中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:16:07.200

也许像

```
<ul>
    <li><a class="link">Sachin (actor)</a></li>
    <li><a class="link">Sachin Dev Burman</a></li>
    <li><a class="link">Sachin Pilot</a></li>
    <li><a class="link">Sachin Rana</a></li>
    <li><a class="link">Sachin Tendulkar</a></li>
    <li><a class="link">Sachin, Pas-de-Calais</a></li>
</ul>
<hr/>
<p style="color:red;" id="moreInfo"></p> 
```

js

```
var timer;

$(".link").on({
    mouseenter: function() {
        var text = $(this).text();
        timer = setTimeout(function() {
            $("#moreInfo").text(text);
        }, 1000); //set to one second now
    },
    mouseleave: function() {
        clearTimeout(timer);
        $("#moreInfo").text('Unloaded !');
    },
    click: function() {
        Suggestion($(this).text());
    }
}); 
```

[**小提琴**](http://jsfiddle.net/3YBr8/3/) ​</p>

# windows - CMD：如何递归删除文件和目录的“隐藏”属性

> ID：12142350
> 
> 赞同：20
> 
> 时间：2012-08-27T12:51:00.107
> 
> 标签：windows, batch-file, cmd

我找不到从文件和目录中递归删除“隐藏”属性的命令或简单的一批命令。“attrib”和“for”等所有命令似乎都跳过了隐藏文件。例如：

```
attrib -H /S /D /L mydir 
```

根本不做任何事情，因为它跳过了所有隐藏的东西。有人知道如何使用标准 Windows 工具执行此操作吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-03T20:28:49.240

如果不删除系统，您将无法删除隐藏。

你要：

```
cd mydir
attrib -H -S /D /S 
```

这将从当前目录中的所有文件/文件夹中删除隐藏和系统属性。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-27T21:56:21.487

移动 -h 并指定 mydir 是一个目录

```
attrib /S /D /L -H mydir\*.* 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-22T17:46:02.407

如果您想删除整个闪存驱动器上所有文件夹中所有文件的属性，请执行以下操作：

**属性 -r -s -h /S /D**

此命令将删除所有文件夹和子文件夹的属性：

-只读 -系统文件 -隐藏 -处理匹配文件和所有子文件夹。- 处理文件夹以及

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-08T19:20:18.690

在管理员模式下启动命令提示符

1.  在搜索中输入*cmd*并按住`Crtl`+`Shift`以**管理员**模式打开
2.  类型`attrib -h -r -s /s /d "location of the drive letter:" \*.*`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-11T05:03:16.100

要为其当前目录和子目录制作批处理文件：

```
cd %~dp0
attrib -h -r -s /s /d /l *.* 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-20T08:43:27.080

例如**E:**驱动器下名为 new 的文件夹

输入命令：

```
e:\cd new

e:\new\attrib *.* -s -h /s /d 
```

并且所有文件和文件夹都未隐藏

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-20T06:12:10.087

只需键入

```
attrib -h -r -s /s /d j:*.* 
```

其中 j 是驱动器号*...* 解锁 j 驱动器中所有锁定的东西

如果你想让它具体化..然后使用 cmd 转到特定位置，然后键入

```
attrib -h -r -s /s /d "foldername" 
```

它还可用于锁定驱动器或文件夹，只需将“-”更改为“+”

```
attrib +h +r +s /s /d "foldername" 
```

# jquery - fancybox 和播放列表在本地工作，但不能在线

> ID：12142352
> 
> 赞同：0
> 
> 时间：2012-08-27T12:51:09.640
> 
> 标签：jquery, fancybox, jplayer

我正在开发一个网站，用户将在其中上传各种格式的媒体以创建故事。我的“故事视图”页面有四个可拖动的 div，其中包含四种类型的媒体：照片、音频剪辑、扫描的文档和视频。音频播放器是 jquery 的 jplayer，适用于使用 mysql 数据库中的动态播放列表。当用户点击照片、文档或视频时，灯箱应该通过 fancybox 加载。这可以在本地工作（有一些小错误），但不能在线。照片加载，但音频播放列表没有加载（我没有在线加载视频），当您单击照片时，您会在 Web 控制台中收到此错误：$.fancybox 不是函数。

我查看了相关帖子并尝试使用其他路径（在线路径）但它似乎没有效果。

您可以在这里查看开发网站：http: [//cdonahue.web44.net/LifeStorIntegration22AugOnline/lifestor2.html](http://cdonahue.web44.net/LifeStorIntegration22AugOnline/lifestor2.html)

如果您使用用户名“2”和密码“password”登录，您将进入故事页面。选择第一个（“英寸海滩”）以查看故事视图。要查看调用的任何脚本的代码，请返回 LifeStorIntegration22AugOnline 目录。

如果您需要更多信息，请告诉我——感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:48:06.020

我的英语好像不太好。但这会帮助你..

只需删除 jquery.fancybox.js 中的所有注释行

所有的浏览器都对注释行和下一行感到困惑。

# drupal-7 - 隐藏 Drupal 管理员

> ID：12142355
> 
> 赞同：1
> 
> 时间：2012-08-27T12:51:27.440
> 
> 标签：drupal-7, apache2

我试图从 Internet 隐藏我的 Drupal7 管理页面，只允许从内部局域网访问。

我正在尝试隐藏 /admin /user 和 */edit，但是我还需要拒绝其他什么来禁用对 Drupal 管理员所有部分的访问吗？

```
<Location ~ "(/([aA][dD][mM][iI][nN]|[uU][sS][eE][rR])|/[eE][dD][iI][tT])">
  Order deny,allow
  Deny from all  
  Allow from 12.193.10.0/24
</Location> 
```

Apache 似乎接受了这一点，并且请求中的 urlencoding 字符似乎在处理请求之前就已解决（例如：/%55ser）

编辑：我注意到参数化路径，所以我还要检查这些类型：?q=admin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:48:48.333

比你列出的更多，只有`*/delete`一页。

模块可以通过实现告诉 Drupal 某些路径（除了开头的路径`admin/`）应该是管理的[`hook_admin_paths()`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_admin_paths/7)。

您可以调用相同的钩子来获取应视为管理的所有模式的列表，并相应地更新您的 vhost 文件：

```
$paths = module_invoke_all('admin_paths'); 
```

变量的开发打印输出`$paths`如下所示：

![在此处输入图像描述](../Images/bbeb59353e0839e179a1379377818662.png)

它应该让您对需要隐藏的路径有一个很好的了解。对于您的安装，打印输出可能看起来完全不同，这取决于您安装了哪些模块。

# asp.net-mvc - 将复杂对象作为参数发送到 ASP.NET MVC3 中的 Post Action

> ID：12142356
> 
> 赞同：3
> 
> 时间：2012-08-27T12:51:30.737
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我尝试使用`submit`按钮发送参数以发布操作，因此有我的示例：

```
@using(Html.BeginForm(actionName: "Search", controllerName: "MyController", routeValues: new { rv = "102" })) {

   ...
  <input type="submit" value="Search" />
} 
```

这是我的搜索操作：

```
[HttpPost]
public virtual ActionResult Search(string rv, FormCollection collection) {

 ...
} 
```

所以到目前为止一切都很好，

然后我尝试发送一个复杂的对象，比如`Dictionary<string, string>`

因此，您可以将参数`string`类型替换为并发送字典，但在这种情况下，值总是返回一个计数为 0 的字典？问题出在哪里？如何发送字典来发布操作？`rv``Dictionary<string, string>``rv`

**更新**

我也尝试过这个但还没有工作（平均 rv steel 是一本 0 计数的字典）：

```
@using(Html.BeginForm(actionName: "Search", controllerName: "MyController", routeValues: new { rv = Model.MyDictionary }, method: FormMethod.Post, htmlAttributes: new { @class = "FilterForm" })) {

 ...
}

[HttpPost]
public virtual ActionResult Search(Dictionary<string, string> rv, FormCollection collection) {

 ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:51:02.300

您不能发送复杂的对象。如果您希望能够将对象反序列化为集合或字典，请阅读[以下文章以了解默认模型绑定器期望的预期有线格式。](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

因此，在阅读 ScottHa 的文章并了解字典的预期有线格式后，您可以推出自定义扩展方法，该方法将按照约定将字典转换为 RouteValueDictionary：

```
public static class DictionaryExtensions
{
    public static RouteValueDictionary ToRouteValues(this IDictionary<string, string> dict)
    {
        var values = new RouteValueDictionary();
        int i = 0;
        foreach (var item in dict)
        {
            values[string.Format("[{0}].Key", i)] = item.Key;
            values[string.Format("[{0}].Value", i)] = item.Value;
            i++;
        }
        return values;
    }
} 
```

然后在您看来，您可以使用此扩展方法：

```
@using(Html.BeginForm(
    actionName: "Search", 
    controllerName: "MyController", 
    routeValues: Model.MyDictionary.ToRouteValues(), 
    method: FormMethod.Post, 
    htmlAttributes: new RouteValueDictionary(new { @class = "FilterForm" }))
) 
{
    ...
} 
```

显然，在这里我假设这`Model.MyDictionary`是一个`IDictionary<string, string>`属性。

# api - Tumblr API 结果中缺少 Tumblr 关注者

> ID：12142357
> 
> 赞同：3
> 
> 时间：2012-08-27T12:51:40.363
> 
> 标签：api, tumblr

我在下面使用此代码来获取特定用户的关注者。但有时某些 tumblr 博客并未从响应中显示出来。

```
$oauth = new OAuth($conskey,$conssec);
$oauth->fetch("http://api.tumblr.com/v2/user/following", array('offset'=>0) ,OAUTH_HTTP_METHOD_GET);
$following_list = json_decode($oauth->getLastResponse()); 
```

我不确定这些博客是否对他们的设置做了一些事情，使他们在 API 请求的响应中不可见。

有人在 Tumblr API 请求中遇到过这种问题吗？我该如何解决这个问题以查看完整的关注者列表？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:55:05.117

你的意思是你可以数组返回类似

[响应] => stdClass 对象

```
 (
        [total_blogs] => 29
        [blogs] => Array
            (
                [0] => stdClass Object
                    (
                        [name] => papertissue
                        [url] => http://papertissue.tumblr.com/
                        [updated] => 1360904405
                    )

                [1] => stdClass Object
                    (
                        [name] => lunchbagart
                        [url] => http://lunchbagart.tumblr.com/
                        [updated] => 1361159341
                    )

                [2] => stdClass Object
                    (
                        [name] => pacegallery
                        [url] => http://pacegallery.tumblr.com/
                        [updated] => 1360951263
                    )

                ...

                [19] => stdClass Object
                    (
                        [name] => rulesformyunbornson
                        [url] => http://rulesformyunbornson.tumblr.com/
                        [updated] => 1360770089
                    )

            )
  ) 
```

你只能看到 20 条回复，对吧？您将需要使用 offset 命令再次运行该命令并告诉它从 post 21 开始

像这个用户/following/?offset=21

基本上，您可以将 total_blogs 的值除以 20 来查找运行命令的次数（例如在 for 循环中），然后每次将偏移量增加 20 以获得完整列表。

请让我知道这是否有帮助，或者您的意思可能是别的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T18:08:26.283

我也做过同样的事情，并注意到我的追随者也被高估了。我也向 Tumblr 支持发送了一封电子邮件，但他们还没有回复我。

要知道真实数字，您可以随时手动计算和计算重复项。我很懒（读作：开发人员），只有一个 Ruby 脚本为我做这件事。

# python - 片段着色器：获取片段到贝塞尔曲线的距离

> ID：12142362
> 
> 赞同：2
> 
> 时间：2012-08-27T12:51:56.800
> 
> 标签：python, glsl, pyglet, fragment-shader

让我们从我所在的位置开始； ![当前状态](../Images/5dc8425d98282ea9e0e231d2ce026888.png)

我有一个通过 FBO 生成此纹理的片段着色器。除了贝塞尔曲线，我几乎拥有我想要的所有原语。

我相当大的片段着色器：

```
testfrag = """//fragment
uniform float thickness; //sets beam thickness
uniform float light; //sets beam intensity

uniform vec4 lines[200]; //pairs of lines; x1, y1, x2, y2
uniform vec3 circles[200]; //circles x,y,radius
uniform vec4 ellipses[200]; //ellipses x,y,width, heightmultiplication
uniform int ellipselength = 1; //amount of ellipses
uniform int linelength = 2; //amount of linepairs
uniform int circlelength = 1; //amount of circles

uniform vec2 polygons[200]; //polygon data, points in x,y. (0,0) points used as end marker
uniform int polylength; //amount of polygons

int i; //for counter variable 1
int i2; //for counter variable 2
float mindistance = 1.0; //distance from fragment to next segment

float P2L(in vec2 p, in vec2 lp1, in vec2 lp2) //distance point to line segment
{
  float squared = pow(distance(lp1, lp2), 2); //squared line length
  float t = dot(p - lp1, lp2 - lp1) / squared; //relative position in parellel to line
  if (t < 0.0) return distance(p, lp1); //before the line, get radius to point
  if (t > 1.0) return distance(p, lp2); //after the line, get radius to point
  return distance(p, lp1 + t * (lp2 - lp1)); //otherwise, get distance line to point
}
float P2C(in vec2 p, in vec3 circle) //point to circle
{
    return abs(distance(p, circle.xy)-circle.z); //euclidian distance - radius
}
float P2E(in vec2 p, in vec4 ellipse) //point to ellipse
{
    return abs(sqrt(pow(p.x-ellipse.x,2) + pow((p.y-ellipse.y)/ellipse.w, 2)) -ellipse.z); // similar to circle, with factor on height
}

bool PinPoly(in vec2 p, in int start, in int len) //test if point in polygon
{
  int i, j; 
  bool c = false;
  for (i = start, j = len-1+start; i < len+start; j = i++) {
    if ( ((polygons[i].y>p.y) != (polygons[j].y>p.y)) &&
     (p.x < (polygons[j].x-polygons[i].x) * (p.y-polygons[i].y) / (polygons[j].y-polygons[i].y) + polygons[i].x) )
       c = !c;
  }
  return c;
} //balls if I know how this works

void main()
{   

    vec2 pos = gl_TexCoord[0].xy; // get position on fbo
    for (i = 0; i < linelength; i++) //test lines
    {
        mindistance = min(mindistance, P2L(pos, lines[i].xy, lines[i].zw));
    }
    for (i = 0; i < circlelength; i++) //test circles
    {
        mindistance = min(mindistance, P2C(pos, circles[i]));
    }
    for (i = 0; i < ellipselength; i++) //test ellipses
    {
        mindistance = min(mindistance, P2E(pos, ellipses[i]));
    }
    i = 1;
    int first;
    while (i < polylength) //test polygons
    {
        //first for line segments
        first = i-1;
        while (polygons[i] != (0.0, 0.0))
        {
            mindistance = min(mindistance, P2L(pos, polygons[i-1], polygons[i]));
            i++;

        }

        mindistance = min(mindistance, P2L(pos, polygons[i-1], polygons[first]));
        if (PinPoly(pos, first, i-first)) //then test if it is inside a polygon
        {
            mindistance = 0.0;
        }
        i += 2; //jump over the (0,0) vec2

    }

    gl_FragColor = light*(1.0/thickness)*(thickness-mindistance).xxxx; //set color of fragment
}
""" 
```

在 pyglet 环境中大致这样调用：

```
def on_draw(self):
    if not self.inited:
        vert = shader.Shader(shader.texvertex)
        frag = shader.Shader(shader.testfrag)
        self.TexProgram = shader.Program([vert, frag])
        with self.TexProgram:
            self.TexProgram["lines[0]"] = (0.25, 0.5, 0.75, 0.5)
            self.TexProgram["lines[1]"] = (0.0, 0.0, 1.0, 1.0)
            self.TexProgram["circles[0]"] = (0.5, 0.5, 0.1)
            self.TexProgram["ellipses[0]"] = (0.75, 0.25, 0.1, 2.0) #x,y, width, multiplicator on height
            self.TexProgram["polygons[0]"] = (0.1, 0.9)
            self.TexProgram["polygons[1]"] = (0.2, 0.9)
            self.TexProgram["polygons[2]"] = (0.2, 1)
            self.TexProgram["polygons[3]"] = (0.1, 1)
            self.TexProgram["polygons[4]"] = (0,0)
            self.TexProgram["polygons[5]"] = (0.1, 0.1)
            self.TexProgram["polygons[6]"] = (0.2, 0.1)
            self.TexProgram["polygons[7]"] = (0.2, 0.2)
            self.TexProgram["polygons[8]"] = (0.1, 0.2)
            self.TexProgram["polygons[9]"] = (0,0)
            self.TexProgram["polylength"] = 8
            self.TexProgram["light"] = 1.05
            self.TexProgram["thickness"] = 0.02
        self.inited = True

    self.clear()
    else:
        with self.TexProgram:
            self.fbo.bind_texture()
            self.fbo.clear()
            t = (0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0)
            x1 = 0
            x2 = w
            y1 = 0
            y2 = h

            glColor4d(1,1,1,1)
            glEnable (GL_TEXTURE_2D)
            glBegin(GL_QUADS)
            glTexCoord2d(t[0], t[1]); glVertex2d(x1, y1)
            glTexCoord2d(t[2], t[3]); glVertex2d(x2, y1)
            glTexCoord2d(t[4], t[5]); glVertex2d(x2, y2)
            glTexCoord2d(t[6], t[7]); glVertex2d(x1, y2)
            glEnd() 
```

贝塞尔曲线通常有 3 个以上的点，一切都在 2D 空间中。在我看来，有两种方法可以解决这个问题。

1：

```
Generate points on curve.
get closest curve point.
generate points around curve point.
get closest point of those.
rince and repeat last steps until satisfactory precision is reached. 
```

2：想出一个公式/算法来解析距离。我尝试了这个，但没有找到任何数量的贝塞尔曲线点的解决方案，只有一个恒定的数量。

我更喜欢第二种方法的解决方案。我可以自己想出第一种方法的解决方案，但如果有人知道任何资源来查找它，这样我就不会浪费时间了，无论如何都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:48:19.113

我不建议对任意贝塞尔曲线进行分析计算距离，因为贝塞尔曲线的每个点都取决于每个节点，到曲线的距离也是如此。（即使没有这个，您当前的实现似乎也很消耗并且无法扩展。）

我可以推荐两种方法来计算任意形状的距离图（或 Voronoi 图）：

1.  [广义Voronoi图的快速计算......](http://gamma.cs.unc.edu/VORONOI/)：对于每条线（段），您绘制一个“帐篷”（两个四边形排列成屋顶）并从上方渲染场景 - 深度缓冲区是您的距离图。光束厚度和强度可以在着色器中进行调整，也可以通过调整帐篷高度来调整。对于每个点，您渲染一个圆锥。编辑：额外的几何图形也可以在几何着色器中生成。

2.  [Jump Flooding](http://www.comp.nus.edu.sg/~tants/jfa.html)：为此，您需要设置一个乒乓渲染方案并渲染到多个缓冲区。我跳过算法，因为解释起来有点冗长，请看论文。

两种算法都适用于大量形状。

# events - 处理嵌套可排序对象时，jquery ui 绑定到可排序的接收事件

> ID：12142363
> 
> 赞同：2
> 
> 时间：2012-08-27T12:51:59.330
> 
> 标签：events, jquery, jquery-ui-sortable

我需要对列进行排序，我需要能够对列中的字段进行排序，并希望挂钩到 col 排序完成，以便我可以保存新的列位置，然后还挂钩到字段排序完成事件，以便我可以保存新的字段位置

有一个 jsFiddle[在这里](http://jsfiddle.net/chrisp_68/pKVqU/10/)展示了一个示例（似乎在 IE 中不起作用，但那是一个不同的故事！）。这表明，当拖动列时不显示警报，当在列之间拖动字段时，显示字段和列警报。

我使用“接收”来避免多次调用，一个用于源，一个用于目标。

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:01:13.523

您应该使用不同的事件来挂钩， sortupdate 会做您想要的。因为您正在嵌套 sortables，所以防止事件冒泡也很重要，这就是导致双重警报的原因。[这是一个更新的小提琴](http://jsfiddle.net/pKVqU/16/)

顺便说一句，当将一个字段拖到另一列时， sortupdate 处理程序被调用两次，因为两列发生了变化。

# oracle - 我可以在没有后果的情况下删除/添加属性吗？Oracle 对象类型

> ID：12142365
> 
> 赞同：3
> 
> 时间：2012-08-27T12:52:00.360
> 
> 标签：oracle, plsql, object-type

我有一个`OBJECT_TYPE`with `ATTRIBUTE varchar2(200)`。还有许多其他对象引用这个对象。我需要将属性的长度减少到`varchar2(50)`. 我知道我不能直接这样做，所以我找到了这种方式：

```
ALTER TYPE CUSTOMER DROP ATTRIBUTE name INVALIDATE;
ALTER TYPE CUSTOMER ADD ATTRIBUTE name varchar2(50) CASCADE; 
```

**问题是：**在删除/创建属性后有什么可以破坏的吗？使用`INVALIDATE`选项而不是`CASCADE`在`DROP`语句中是否正确？我不想丢失任何东西——关系或数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:01:37.210

是否有理由不使用以下内容：

```
ALTER TYPE CUSTOMER MODIFY ATTRIBUTE name VARCHAR2(50); 
```

我在使用类型和删除属性时遇到了兼容性问题，尤其是在使用类型定义的表和数据时。这是我避免基于数据类型的表和视图的原因之一。长度的更改将使表和关联数据超过 50 的任何行无效。如果其他对象只是类型并且未在视图和表中使用，那么上面的 alter type 应该可以正常工作。您可能需要重新编译任何类型。请记住，类型变得越来越严格，以及它如何影响任何相关数据。

# mysql - MySQL检查日期时间列是否在周末期间

> ID：12142372
> 
> 赞同：7
> 
> 时间：2012-08-27T12:52:09.740
> 
> 标签：mysql, datetime

我在数据库中有一个包含日期时间列的表。有没有办法我可以编写查询以确定记录是否在周末期间？

我想显示所有记录，并在每个结果行中有一个附加列来显示周末，如果它符合（星期五 1730 小时之后）或（星期日 2359 小时之前）的标准。

以下是我目前拥有的，但似乎有问题。：（ 任何帮助将不胜感激。 ：）

```
SELECT recordTime, DATE_FORMAT(recordTime, "%W %w %T"), (( (DATE_FORMAT(recordTime, "%T") > '17:30:00' AND DAYOFWEEK(recordTime)=6)
    AND (DATE_FORMAT(recordTime, "%T") < '23:59:59' AND DAYOFWEEK(recordTime)=7) )
    OR (DATE_FORMAT(recordTime, "%T") < '23:59:59' AND DAYOFWEEK(recordTime)=0)) AS Weekend
FROM `waitrecord` 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-27T13:20:41.020

你的逻辑是错误的。一天不能同时是工作日 6 和工作日 7。

条件应该是

```
DAYOFWEEK(recordTime) = 7
or DAYOFWEEK(recordTime) = 1
or (DATE_FORMAT(recordTime, "%T") > '17:30:00' AND DAYOFWEEK(recordTime) = 6) 
```

*编辑：* [DAYOFWEEK](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)实际上返回`1`星期日和`7`星期六（与从零开始的[DATE_FORMAT形成对比）](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)

# ruby-on-rails - railstutorial.org，第 6 章。未知属性：密码

> ID：12142374
> 
> 赞同：6
> 
> 时间：2012-08-27T12:52:11.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, tdd, railstutorial.org

我已经完成[了 railstutorial 的第 6 章，](http://ruby.railstutorial.org/chapters/modeling-users)但是在我添加&后，我的所有[用户模型规范](https://github.com/gaurish/twitter-clone/blob/modeling-users/spec/models/user_spec.rb)都开始失败，并出现以下错误：`password``password_confirmation`

```
Failures:

  1) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  2) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  3) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  4) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  5) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  6) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  7) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  8) User when name is not present 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  9) User when email is not present 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  10) User when name is too long 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  11) User when email format is invalid should be invalid
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  12) User when email format is valid should be valid
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  13) User when email address is already taken 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  14) User when password is not present 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  15) User when password confirmation is nil 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  16) User when password doesn't match confirmation 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  17) User return value of authenticate method with valid password 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  18) User return value of authenticate method with invalid password 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  19) User return value of authenticate method with invalid password 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

  20) User with a password that's too short 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com",
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:17:in `new'
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

Finished in 7.43 seconds
39 examples, 20 failures, 5 pending

Failed examples:

rspec ./spec/models/user_spec.rb:22 # User 
rspec ./spec/models/user_spec.rb:23 # User 
rspec ./spec/models/user_spec.rb:24 # User 
rspec ./spec/models/user_spec.rb:25 # User 
rspec ./spec/models/user_spec.rb:26 # User 
rspec ./spec/models/user_spec.rb:27 # User 
rspec ./spec/models/user_spec.rb:28 # User 
rspec ./spec/models/user_spec.rb:32 # User when name is not present 
rspec ./spec/models/user_spec.rb:37 # User when email is not present 
rspec ./spec/models/user_spec.rb:42 # User when name is too long 
rspec ./spec/models/user_spec.rb:46 # User when email format is invalid should be invalid
rspec ./spec/models/user_spec.rb:57 # User when email format is valid should be valid
rspec ./spec/models/user_spec.rb:73 # User when email address is already taken 
rspec ./spec/models/user_spec.rb:78 # User when password is not present 
rspec ./spec/models/user_spec.rb:83 # User when password confirmation is nil 
rspec ./spec/models/user_spec.rb:88 # User when password doesn't match confirmation 
rspec ./spec/models/user_spec.rb:96 # User return value of authenticate method with valid password 
rspec ./spec/models/user_spec.rb:102 # User return value of authenticate method with invalid password 
rspec ./spec/models/user_spec.rb:103 # User return value of authenticate method with invalid password 
rspec ./spec/models/user_spec.rb:109 # User with a password that's too short 
rake aborted! 
```

用户模型可以在[这里](https://github.com/gaurish/twitter-clone/blob/modeling-users/app/models/user.rb)找到现在，我已经将源代码与原始模型进行了比较，但似乎我遗漏了一些东西。不要它是什么

谁能告诉我为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T18:43:45.937

`has_secure_password`如果您还没有这样做， 只需添加到用户模型文件中。

```
class User < ActiveRecord::Base
 attr_accessible :email, :name, :password, :password_confirmation
 has_secure_password
 # ..
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T12:55:09.923

添加：

```
attr_accessor :password, :password_confirmation 
```

然后，本教程将使您将摘要保存在`password_digest`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-07T17:34:50.487

我只是有同样的问题。我在 Cloud9 上做这个。

我注意到我的测试也没有全部运行。

刷新我的文件树解决了这两个问题。

我不需要将 :password 或 :password_confirmation 直接放在模型中（或者根本不需要从教程中进行任何编码更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-22T20:37:50.707

我最终花了几个小时，找不到任何答案。我的问题最终出现在小写线上：

```
before_save { self.email = email.downcase } 
```

他指定你可以用我做的不同方式来做这条线。见下文。

[https://www.railstutorial.org/book/_single-page#sec-creating_and_authenticating_a_user](https://www.railstutorial.org/book/_single-page#sec-creating_and_authenticating_a_user)

**在代码清单 6.31 中，我们可以将赋值写成 self.email = self.email.downcase（其中 self 指代当前用户），但在 User 模型中，右侧的 self 关键字是可选的：self.email = email.downcase**

不要这样做。它每次都给我错误消息，直到我恢复 `before_save { self.email = email.downcase }`

并删除： `self.email = self.email.downcase`

我是一个菜鸟，所以不完全确定为什么这会有所作为，但确实如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T18:12:31.890

它正在产生这些错误，因为第一个`before {}`块试图添加 User 模型未指定的两个属性 -`password`和`password_confirmation`.

因为这个`before {}`块在每次测试之前运行（这就是重点），所以每次测试都会出错并且它们都失败了。这并不是说测试本身失败了，而是`ActiveRecord`不知道如何处理这些属性，并且在每个测试真正运行之前都会产生错误：

```
ActiveRecord::UnknownAttributeError:
unknown attribute: password 
```

正如codeneko的回答所说，只需在教程中前进并放入`has_secure_password`用户模型文件即可解决此问题。这告诉`ActiveRecord`接受`password`和`password confirmation`属性，所有测试都将通过。

不幸的是，教程会立即告诉您注释掉，`has_secure_password`因此在教程让您取消注释之前，使用潜水的答案作为替代可能不是一个坏主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-09T13:50:58.750

我认为 `attr_accessor :password, :password_confirmation`为用户模型添加的公认答案是错误的。因为如果`has_secure_password`虚拟地创建这些属性，这意味着它出于某种原因（安全性）这样做。因此，解决方案可能是在您创建用户测试对象的任何地方调用 BCrypt：

```
require 'bcrypt'

    @user = User.new(name: 'test', password: BCrypt::Password.create("my password"), password_confirmation: 'my password') 
```

我在这篇文章中写道：

[Rails - 未知属性密码](https://stackoverflow.com/questions/43302339/rails-unknown-attribute-password/43304529#43304529)

如果我错了，请纠正我。

# perl - 是否有 SHA256withRSA 的 perl 实现

> ID：12142381
> 
> 赞同：5
> 
> 时间：2012-08-27T12:52:47.630
> 
> 标签：perl, cryptography, pkcs#1

我需要能够制作 JSON Web 令牌签名（它只接受[带有 SHA-256 哈希函数签名的 'RSASSA-PKCS1-V1_5-SIGN](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#computingsignature)），但这项任务的明显 CPAN 竞争者（[Crypt::RSA](http://search.cpan.org/~vipul/Crypt-RSA/lib/Crypt/RSA.pm)）只会使用[MD2、MD5 或 SHA1](http://search.cpan.org/~vipul/Crypt-RSA/lib/Crypt/RSA/SS/PKCS1v15.pm#new%28%29)生成签名。

是否有另一个图书馆可以做我想做的事？如有必要，我应该能够进行一些黑客攻击以到达那里，但这不会太漂亮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:24:38.463

我能够找到一个符合我要求的模块：[Crypt::OpenSSL::RSA](http://search.cpan.org/dist/Crypt-OpenSSL-RSA/)

```
my $rsa = Crypt::OpenSSL::RSA->new_private_key($key);
$rsa->use_sha256_hash;
my $signature = $rsa->sign($message); 
```

比扩展 Crypt::RSA 容易得多，但奇怪的是很难找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T08:58:25.257

Looks like you had to modify the 'Crypt::RSA::SS::PKCS1v15.pm' to add the SHA256 supporting. It is not so difficult, you can try this patched version:

```
#!/usr/bin/perl -sw
##
## Crypt::RSA::SS:PKCS1v15
##
## Copyright (c) 2001, Vipul Ved Prakash.  All rights reserved.
## This code is free software; you can redistribute it and/or modify
## it under the same terms as Perl itself.
##
## $Id: PKCS1v15.pm,v 1.6 2001/06/22 23:27:38 vipul Exp $

package Crypt::RSA::SS::PKCS1v15;
use strict;
use base 'Crypt::RSA::Errorhandler';
use Crypt::RSA::DataFormat qw(octet_len os2ip i2osp h2osp);
use Crypt::RSA::Primitives;
use Crypt::RSA::Debug qw(debug);
use Digest::SHA qw(sha1 sha256);
use Digest::MD5 qw(md5);
use Digest::MD2 qw(md2);
use Math::Pari qw(floor);

$Crypt::RSA::SS::PKCS1v15::VERSION = '1.99.1';

sub new { 

    my ($class, %params) = @_;
    my $self = bless { 
                       primitives => new Crypt::RSA::Primitives, 
                       digest     => $params{Digest} || 'SHA1',
                       encoding   => { 
                                        MD2 => "0x 30 20 30 0C 06 08 2A 86 48
                                                   86 F7 0D 02 02 05 00 04 10",
                                        MD5 => "0x 30 20 30 0C 06 08 2A 86 48
                                                   86 F7 0D 02 05 05 00 04 10",
                                       SHA1 => "0x 30 21 30 09 06 05 2B 0E 03
                                                   02 1A 05 00 04 14",
                                       SHA256 => "0x 30 31 30 0d 06 09 60 86 
                                                     48 01 65 03 04 02 01 05 
                                                     00 04 20",
                                     },
                       VERSION    => $Crypt::RSA::SS::PKCS1v15::VERSION,
                     }, $class;           
    if ($params{Version}) { 
        # do versioning here
    }
    return $self;

}

sub sign { 

    my ($self, %params) = @_; 
    my $key = $params{Key}; my $M = $params{Message} || $params{Plaintext};
    return $self->error ("No Message or Plaintext parameter", \$key, \%params) unless $M;
    return $self->error ("No Key parameter", \$M, \%params) unless $key;
    my $k = octet_len ($key->n);

    my $em; 
    unless ($em = $self->encode ($M, $k-1)) { 
        return $self->error ($self->errstr, \$key, \%params, \$M) 
            if $self->errstr eq "Message too long.";
        return $self->error ("Modulus too short.", \$key, \%params, \$M)
            if $self->errstr eq "Intended encoded message length too short";
    }

    my $m = os2ip ($em);
    my $sig = $self->{primitives}->core_sign (Key => $key, Message => $m);
    return i2osp ($sig, $k);

}    

sub verify { 

    my ($self, %params) = @_;
    my $key = $params{Key}; my $M = $params{Message} || $params{Plaintext};
    my $S = $params{Signature}; 
    return $self->error ("No Message or Plaintext parameter", \$key, \%params) unless $M;
    return $self->error ("No Key parameter", \$M, \$S, \%params) unless $key;
    return $self->error ("No Signature parameter", \$key, \$M, \%params) unless $S;
    my $k = octet_len ($key->n);
    return $self->error ("Invalid signature.", \$key, \$M, \%params) if length($S) != $k;
    my $s = os2ip ($S);
    my $m = $self->{primitives}->core_verify (Key => $key, Signature => $s) || 
        $self->error ("Invalid signature.", \$M, $key, \%params);
    my $em = i2osp ($m, $k-1) || 
        return $self->error ("Invalid signature.", \$M, \$S, $key, \%params);
    my $em1; 
    unless ($em1 = $self->encode ($M, $k-1)) { 
        return $self->error ($self->errstr, \$key, \%params, \$M) 
            if $self->errstr eq "Message too long.";
        return $self->error ("Modulus too short.", \$key, \%params, \$M)
            if $self->errstr eq "Intended encoded message length too short.";
    }

    debug ("em: $em"); debug ("em1: $em1");

    return 1 if $em eq $em1;
    return $self->error ("Invalid signature.", \$M, \$key, \%params);

}

sub encode { 

    my ($self, $M, $emlen) = @_;

    my $H;
    if    ($self->{digest} eq "SHA1") { $H = sha1 ($M) }
    elsif ($self->{digest} eq "SHA256" ) { $H = sha256 ($M) }
    elsif ($self->{digest} eq "MD5" ) { $H =  md5 ($M) }
    elsif ($self->{digest} eq "MD2" ) { $H =  md2 ($M) }

    my $alg = h2osp($self->{encoding}->{$self->{digest}});
    my $T = $alg . $H;
    $self->error ("Intended encoded message length too short.", \$M) if $emlen < length($T) + 10;
    my $pslen = $emlen - length($T) - 2;
    my $PS = chr(0xff) x $pslen;
    my $em = chr(1) . $PS . chr(0) . $T; 
    return $em;

}

sub version { 
    my $self = shift;
    return $self->{VERSION};
}

sub signblock { 
    return -1;
}

sub verifyblock { 
    my ($self, %params) = @_;
    return octet_len($params{Key}->n);
}

1; 
```

# c# - LINQ to Entities 无法识别自定义方法

> ID：12142384
> 
> 赞同：1
> 
> 时间：2012-08-27T12:52:54.460
> 
> 标签：c#, linq, linq-to-entities

下面的代码会产生错误：

> *LINQ to Entities 无法识别方法`System.String GenerateSubscriptionButton(Int32)`method，并且此方法无法转换为存储表达式。*

如何在 LINQ to Entities 中创建正确的自定义方法？

```
var model = _serviceRepository.GetProducts().Select(p => new ProductModel
{
    Id = p.Id,
    Name = p.Name,
    Credits = p.Credits,
    Months = p.Months,
    Price = p.Price,
    PayPalButton = GenerateSubscriptionButton(p.Id)
});        

private string GenerateSubscriptionButton(int id)
{
    return new PaymentProcessor.PayPalProcessor().CreateSubscriptionButton(id);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:56:56.523

你不能那样做。提供者应如何将您的方法转换为 SQL？

请记住：LINQ to Entities 实际上并不执行查询的 C# 代码。相反，它解释表达式并将它们转换为 SQL。

在您的具体情况下，解决方案可能看起来像这样：

```
var model = _serviceRepository.GetProducts()
                              .Select(p => new ProductModel 
                                           { 
                                               Id = p.Id, 
                                               Name = p.Name, 
                                               Credits = p.Credits, 
                                               Months = p.Months, 
                                               Price = p.Price
                                           })
                              .ToList()
                              .Select(x =>
                                      {
                                          x.PayPalButton = GenerateSubscriptionButton(x.Id);
                                          return x;
                                      }); 
```

`ToList`到目前为止，调用对数据库执行查询并返回结果。从那时起，查询实际上是一个 LINQ to objects 查询，其中代码不被解释而是被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:57:17.303

你不能。问题是，您不能`GenerateSubscriptionButton`从 SQL 调用。

您需要检索实体，然后一旦它们在内存中，您就可以调用`GenerateSubscriptionButton`. `AsEnumerable`您可以通过在将实体投影到模型之前添加调用来实现这一点。

```
var model = _serviceRepository.GetProducts()
    .AsEnumerable()
    .Select(p => new ProductModel
                     {
                         Id = p.Id,
                         Name = p.Name,
                         Credits = p.Credits,
                         Months = p.Months,
                         Price = p.Price,
                         PayPalButton = GenerateSubscriptionButton(p.Id)
                     }); 
```

# html - 使用 css替换图像（在标签中）

> ID：12142386
> 
> 赞同：7
> 
> 时间：2012-08-27T12:52:59.613
> 
> 标签：html, css

我有以下html：

```
<div class="A">
    <img src="image1.png" width="100px" height="100px"/> 
</div> 
```

在我的媒体查询 css 样式表中，我想用另一个 (image2.png) 替换该图像。

我需要写什么css代码？

我尝试了以下方法：

```
.A img
{
   background:url("image2.png") no-repeat;
} 
```

但这似乎不正确？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T12:57:49.907

如果您使用的是 CSS3，那么`content`答案是：

```
.A img
{
    content: url("image2.png");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T12:56:43.573

您的代码不起作用，因为原始`<img>`标签中的图像是前景图像，与背景图像不同。

所以设置CSS并没有摆脱原始图像。此外，虽然 CSS 确实有效，但它显示的背景图像显示在前景图像的后面。

为此，您需要将原始图像作为背景图像（即使用 CSS`background-image`属性设置），或者切换到替换脚本中的前景图像。这将涉及设置`src`属性：

```
$('.a img').attr('src','newimage.png'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T12:55:44.847

您不能在 CSS 中修改它，而是使用这样的 div：

```
<div id='#theImage'></div> 
```

然后在 CSS 中：

```
#theImage {
    width:100px;
    height:100px;
    background:url("image1.png") no-repeat;
} 
```

然后，您可以使用媒体查询重新设置 div 的样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:56:35.380

您正在设置一个`img`您将无法看到的元素的背景，因为在其`src`属性中定义的图像正在覆盖它

无论如何，如果从语义的角度来看，这两个图像都与上下文相关，则不应使用 css 将第二个图像放置在第一个图像的位置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T13:03:44.453

如果将背景放在图像上，则图像只会与背景重叠；使背景完全不可见。

解决方法是让图片作为一个元素的背景

像这样：http: [//jsfiddle.net/PabXF/](http://jsfiddle.net/PabXF/)

# xml - 在 perl 的子例程中声明全局变量

> ID：12142387
> 
> 赞同：2
> 
> 时间：2012-08-27T12:52:59.723
> 
> 标签：xml, perl, anonymous-function, subroutine

我想知道是否可以在 Perl 的子例程中声明一个全局变量，以便我可以在挂钩的 void 函数中使用该变量，但通过在子例程中声明它来限制全局变量的破坏性影响。

因此子例程用于`XML::Parser`收集一堆元素的 ID，其方式类似于：

```
sub getRecipeIDs {
    my $recipe = shift;
    my @elements = ();

    my $parser = new XML::Parser(Style => 'Tree',
        Handlers => {
            Start => sub {
                my ($expat, $element, %attrs) = @_;
                if ($element eq 'recipe') {
                    push @elements, $attrs{id};
                }
        }});

    $parser->parse($recipe);

    return @elements;
} 
```

我也在`strict`我的脚本中使用。

所以我想以`@elements`这样一种方式声明它是本地的，`getRecipeIDs`但对匿名子例程是可见的。

感谢您的宝贵时间，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:56:40.843

它应该已经按照您编写示例的方式工作。你用“ `my $func = sub { ... }`”做的是你创建一个可以访问封闭范围变量的闭包——在这种情况下`@elements`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T13:01:10.337

您的代码应该可以正常工作

尽管匿名子程序的深度，它的范围包括词法数组`@elements`，它可以自由访问它

此外，子例程算作对数组的引用，因此当它在调用结束时超出范围时不会被垃圾收集`getRecipeIDs`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T12:56:02.173

`my`很好。词法变量在嵌套范围内可见，例如匿名子例程。

因此，您的代码应该按原样工作。

# javascript - window.opener 在 chrome 和 IE 中不起作用

> ID：12142392
> 
> 赞同：0
> 
> 时间：2012-08-27T12:53:29.623
> 
> 标签：javascript, window.opener

我有一个孩子弹出窗口。从这个子弹出窗口中，我将一些值从子弹出窗口发送到父页面的文本框。

javascript 在 Firefox 中运行良好，但在 chrome 和 IE 中无法运行

贝娄是javascript

```
function submitValues(value1,value2)
{
  window.close();
  window.opener.document.getElementById("value1Id").value = value1;
  window.opener.document.getElementById("value2Id").value = value2;
} 
```

我无法弄清楚这是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:02:13.797

您可以将参数传递给 showModalDialog 函数。只需将窗口对象作为参数传递。

```
window.showModalDialog(theURL, window); 
```

Yo 可以使用 dialogArguments 从模态窗口访问参数。请参阅：http: [//msdn.microsoft.com/en-us/library/ms533723%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms533723%28VS.85%29.aspx)

```
var openerWindow = window.dialogArguments; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T05:34:24.577

如果它有效，你可以试试下面的功能吗 window.close 将关闭窗口

```
function submitValues(value1,value2)
{

   window.opener.document.getElementById("value1Id").value = value1;
   window.opener.document.getElementById("value2Id").value = value2;
   window.close();
} 
```

# linux-device-driver - Linux SPI 驱动程序

> ID：12142403
> 
> 赞同：1
> 
> 时间：2012-08-27T12:54:08.287
> 
> 标签：linux-device-driver, interrupt, spi

我正在尝试为 Gumstix Overo Fire 的 Angstrom Linux 2.6.36 编写一个 SPI 驱动程序。我的驱动程序在中断处理程序中不断崩溃。这是完整的代码

```
#include <linux/init.h>
#include <linux/module.h>
#include <linux/ioctl.h>
#include <linux/fs.h>
#include <linux/device.h>
#include <linux/err.h>
#include <linux/errno.h>
#include <linux/mutex.h>
#include <linux/slab.h>
#include <linux/smp_lock.h>
#include <linux/cdev.h>
#include <linux/spi/spi.h>
#include <linux/string.h>
#include <asm/uaccess.h>
#include <linux/kernel.h>
#include <mach/gpio.h>
#include <linux/interrupt.h>
#include <linux/delay.h>
#include <linux/kthread.h>
#include <linux/hrtimer.h>

#define IRQ_PIN 10

#define SPI_BUFF_SIZE   4
#define USER_BUFF_SIZE  128

#define SPI_BUS 1
#define SPI_BUS_CS1 1
#define SPI_BUS_SPEED 1500000

unsigned char *buff_even = 0;
unsigned char *buff_odd = 0;
unsigned char *temp_buff = 0;
unsigned int sample_counter = 0;  
unsigned int buff_counter = 0;  
unsigned int current_buffer = 0;  
unsigned int local_current_buffer = 0;  
unsigned int local_sample_counter = 0;
unsigned int num_reads = 0;
unsigned int num_miss_samples = 0;
unsigned int regval = 0;

#define LIMIT (4000)
#define BUFF_SIZE (4*LIMIT)

#define MAJOR_NUM 100
#define READ_CURR_COUNTER _IOWR(MAJOR_NUM, 1, int)
#define READ_BUFF     _IOWR(MAJOR_NUM, 2, int)
#define READ_CURR_BUFF_NO _IOWR(MAJOR_NUM, 3, int)
#define READ_REGISTER _IOWR(MAJOR_NUM, 4, unsigned char)
#define WRITE_REGISTER _IOWR(MAJOR_NUM, 5, int)
#define START_READ _IOWR(MAJOR_NUM, 6, int)
#define STOP_READ _IOWR(MAJOR_NUM, 7, int)

const char this_driver_name[] = "adc";

static int running = 0;
static int resetting = 0;
static int reading = 0;

struct spike_control
{
    struct spi_message msg;
    struct spi_transfer transfer;
    u8 *tx_buff; 
    u8 *rx_buff;
};

static struct spike_control spike_ctl;

struct spike_dev
{
    struct semaphore spi_sem;
    struct semaphore fop_sem;
    dev_t devt;
    struct cdev cdev;
    struct class *class;
    struct spi_device *spi_device;
    char *user_buff;
    u8 test_data;   
    int irq;    
};

static struct spike_dev spike_dev;

static DEFINE_MUTEX(list_lock);
static DEFINE_MUTEX(count_lock);

static int status;

static void spike_completion_handler(void *arg)
{
    local_sample_counter++;

    if (sample_counter >= local_sample_counter + 1)
        num_miss_samples++;

    if (current_buffer == 0)
    {
        buff_even[buff_counter++] = spike_ctl.rx_buff[0];
        buff_even[buff_counter++] = spike_ctl.rx_buff[1];
        buff_even[buff_counter++] = spike_ctl.rx_buff[2];
        buff_even[buff_counter++] = spike_ctl.rx_buff[3];
    }
    else if (current_buffer == 1)
    {
        buff_odd[buff_counter++] = spike_ctl.rx_buff[0];
        buff_odd[buff_counter++] = spike_ctl.rx_buff[1];
        buff_odd[buff_counter++] = spike_ctl.rx_buff[2];
        buff_odd[buff_counter++] = spike_ctl.rx_buff[3];
    }

    memset(spike_ctl.rx_buff, 0, SPI_BUFF_SIZE);

    if (sample_counter == LIMIT)
    {
        buff_counter = 0;
        mutex_lock(&count_lock);
        if (current_buffer == 0)
            current_buffer = 1;
        else
            current_buffer = 0;
        sample_counter = 0; 
        mutex_unlock(&count_lock);
        local_sample_counter = 0;
    }

}

static irqreturn_t adc_handler(int irq, void *dev_id)
{
    sample_counter++;   

    spi_message_init(&spike_ctl.msg);   

    spike_ctl.msg.complete = spike_completion_handler;
    spike_ctl.msg.context = NULL;

    spike_ctl.transfer.tx_buf = NULL;
    spike_ctl.transfer.rx_buf = spike_ctl.rx_buff;
    spike_ctl.transfer.len = 4;

    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_async(spike_dev.spi_device, &spike_ctl.msg);

    return IRQ_HANDLED;
}

static void resetbuffers(void)
{
    local_sample_counter = 0;
    sample_counter = 0;
    num_miss_samples = 0;
    current_buffer = 0;
    buff_counter = 0;   
    memset(spike_ctl.rx_buff, 0, SPI_BUFF_SIZE);
    memset(spike_ctl.tx_buff, 0, SPI_BUFF_SIZE);
    memset(buff_even, 0, BUFF_SIZE);
    memset(buff_odd, 0, BUFF_SIZE);
    memset(temp_buff, 0, BUFF_SIZE);
}

static int read_register(unsigned char addr)
{
    if (down_interruptible(&spike_dev.spi_sem))
        return -ERESTARTSYS;

    if (!spike_dev.spi_device)
    {
        up(&spike_dev.spi_sem);
        return -ENODEV;
    }

    memset(spike_ctl.rx_buff, 0, SPI_BUFF_SIZE);
    memset(spike_ctl.tx_buff, 0, SPI_BUFF_SIZE);

    spike_ctl.transfer.tx_buf = spike_ctl.tx_buff;
    spike_ctl.transfer.rx_buf = spike_ctl.rx_buff;
    spike_ctl.transfer.len = 1;

    spike_ctl.tx_buff[0] = 0x11;//Stop read data continuous
    spi_message_init(&spike_ctl.msg);   
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);
    __asm__ __volatile__("ldr r0,=0x2710\n\t"
                         ".LOOP1:\n\t"
                         "subs r0,r0,#1\n\t"
                         "bne .LOOP1\n\t");

    spike_ctl.tx_buff[0] = 0x20 + addr;//Address of register
    spi_message_init(&spike_ctl.msg);
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);
    __asm__ __volatile__("ldr r0,=0x2710\n\t"
                         ".LOOP2:\n\t"
                         "subs r0,r0,#1\n\t"
                         "bne .LOOP2\n\t");

    spike_ctl.tx_buff[0] = 0;//Number of registers to read minus 1
    spi_message_init(&spike_ctl.msg);
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);
    __asm__ __volatile__("ldr r0,=0x2710\n\t"
                         ".LOOP3:\n\t"
                         "subs r0,r0,#1\n\t"
                         "bne .LOOP3\n\t");

    spi_message_init(&spike_ctl.msg);
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);
    __asm__ __volatile__("ldr r0,=0x2710\n\t"
                         ".LOOP4:\n\t"
                         "subs r0,r0,#1\n\t"
                         "bne .LOOP4\n\t");

    printk(KERN_ALERT "%x\n",spike_ctl.rx_buff[0]);
    regval = spike_ctl.rx_buff[0];

//  spike_ctl.tx_buff[0] = 0x10;//Start read data continuous
//  spi_message_init(&spike_ctl.msg);   
//  spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
//  status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);

    up(&spike_dev.spi_sem);

    return status;
}

static int write_register(unsigned char addr, unsigned char val)
{
    if (down_interruptible(&spike_dev.spi_sem))
        return -ERESTARTSYS;

    if (!spike_dev.spi_device)
    {
        up(&spike_dev.spi_sem);
        return -ENODEV;
    }

    memset(spike_ctl.rx_buff, 0, SPI_BUFF_SIZE);
    memset(spike_ctl.tx_buff, 0, SPI_BUFF_SIZE);

    spike_ctl.transfer.tx_buf = spike_ctl.tx_buff;
    spike_ctl.transfer.rx_buf = spike_ctl.rx_buff;
    spike_ctl.transfer.len = 1;

    spike_ctl.tx_buff[0] = 0x11;//Stop read data continuous
    spi_message_init(&spike_ctl.msg);   
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);
    __asm__ __volatile__("ldr r0,=0x2710\n\t"
                         ".LOOP5:\n\t"
                         "subs r0,r0,#1\n\t"
                         "bne .LOOP5\n\t");

    spike_ctl.tx_buff[0] = 0x40 + addr;//Address of register
    spi_message_init(&spike_ctl.msg);
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);
    __asm__ __volatile__("ldr r0,=0x2710\n\t"
                         ".LOOP6:\n\t"
                         "subs r0,r0,#1\n\t"
                         "bne .LOOP6\n\t");

    spike_ctl.tx_buff[0] = 0;//Number of registers to read minus 1
    spi_message_init(&spike_ctl.msg);
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);
    __asm__ __volatile__("ldr r0,=0x2710\n\t"
                         ".LOOP7:\n\t"
                         "subs r0,r0,#1\n\t"
                         "bne .LOOP7\n\t");

    spike_ctl.tx_buff[0] = val;//Value to write
    spi_message_init(&spike_ctl.msg);
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);
    __asm__ __volatile__("ldr r0,=0x2710\n\t"
                         ".LOOP8:\n\t"
                         "subs r0,r0,#1\n\t"
                         "bne .LOOP8\n\t");

    spike_ctl.tx_buff[0] = 0x10;//Start read data continuous
    spi_message_init(&spike_ctl.msg);   
    spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
    status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);

//  spike_ctl.tx_buff[0] = 0x10;//Start read data continuous
//  spi_message_init(&spike_ctl.msg);   
//  spi_message_add_tail(&spike_ctl.transfer, &spike_ctl.msg);
//  status = spi_sync(spike_dev.spi_device, &spike_ctl.msg);

    up(&spike_dev.spi_sem);

    return status;
}

static long adc_ioctl(struct file *file, unsigned int cmd, unsigned long arg)
{
    unsigned char addr;
    switch(cmd) 
    {
    case READ_CURR_COUNTER: 
        mutex_lock(&count_lock);
        local_current_buffer = current_buffer;  
        local_sample_counter = sample_counter;
        mutex_unlock(&count_lock);
        copy_to_user((void *)arg, &local_sample_counter, sizeof(unsigned int));
        printk(KERN_ALERT "Read current counter %d\n",local_sample_counter);
        break;
    case READ_BUFF: 
        mutex_lock(&count_lock);
        local_current_buffer = current_buffer;  
        local_sample_counter = sample_counter;
        mutex_unlock(&count_lock);
        if (local_current_buffer == 0)
        {
            memcpy(temp_buff,buff_odd, BUFF_SIZE);
//          memset(temp_buff, 'Q', BUFF_SIZE);          
        }
        else
        {
            memcpy(temp_buff,buff_even, BUFF_SIZE);
//          memset(temp_buff, 'T', BUFF_SIZE);          
        }
        copy_to_user((void *)arg, temp_buff, BUFF_SIZE);
        num_reads++;
        break;
    case READ_CURR_BUFF_NO: 
        mutex_lock(&count_lock);
        local_current_buffer = current_buffer;  
        local_sample_counter = sample_counter;
        mutex_unlock(&count_lock);
        copy_to_user((void *)arg, &local_current_buffer, sizeof(int));
        break;
    case READ_REGISTER: 
        get_user(addr, (unsigned char *)arg);
        disable_irq(spike_dev.irq);
        read_register(addr);
        enable_irq(spike_dev.irq);
        copy_to_user((void *)arg, &regval, sizeof(int));
        break;
    case WRITE_REGISTER:    
        disable_irq(spike_dev.irq);

        enable_irq(spike_dev.irq);
        //copy_to_user((void *)arg, &local_current_buffer, sizeof(int));
        break;

    default:
        return -ENOTTY;
    }
    return 1;

}

static int spike_open(struct inode *inode, struct file *filp)
{   
    int status = 0;

    if (down_interruptible(&spike_dev.fop_sem)) 
        return -ERESTARTSYS;

    if (!spike_dev.user_buff) {
        spike_dev.user_buff = kmalloc(USER_BUFF_SIZE, GFP_KERNEL);
        if (!spike_dev.user_buff) 
            status = -ENOMEM;
    }   

    up(&spike_dev.fop_sem);

    return status;
}

static int spike_probe(struct spi_device *spi_device)
{
    if (down_interruptible(&spike_dev.spi_sem))
        return -EBUSY;

    spike_dev.spi_device = spi_device;

    printk(KERN_ALERT "SPI[%d] max_speed_hz %d Hz\n", spi_device->chip_select, spi_device->max_speed_hz);

    up(&spike_dev.spi_sem);

    return 0;
}

static int spike_remove(struct spi_device *spi_device)
{
    if (down_interruptible(&spike_dev.spi_sem))
        return -EBUSY;

    spike_dev.spi_device = NULL;

    up(&spike_dev.spi_sem);

    return 0;
}

static int __init add_spike_device_to_bus(void)
{
    struct spi_master *spi_master;
    struct spi_device *spi_device;
    struct device *pdev;
    char buff[64];
    int status = 0;

    spi_master = spi_busnum_to_master(SPI_BUS);
    if (!spi_master)
    {
        printk(KERN_ALERT "spi_busnum_to_master(%d) returned NULL\n",
            SPI_BUS);
        printk(KERN_ALERT "Missing modprobe omap2_mcspi?\n");
        return -1;
    }

    spi_device = spi_alloc_device(spi_master);
    if (!spi_device)
    {
        put_device(&spi_master->dev);
        printk(KERN_ALERT "spi_alloc_device() failed\n");
        return -1;
    }

    spi_device->chip_select = SPI_BUS_CS1;

    /* Check whether this SPI bus.cs is already claimed */
    snprintf(buff, sizeof(buff), "%s.%u", 
            dev_name(&spi_device->master->dev),
            spi_device->chip_select);

    pdev = bus_find_device_by_name(spi_device->dev.bus, NULL, buff);
    if (pdev)
    {
        /* We are not going to use this spi_device, so free it */ 
        spi_dev_put(spi_device);

        /* 
         * There is already a device configured for this bus.cs  
         * It is okay if it us, otherwise complain and fail.
         */
        if (pdev->driver && pdev->driver->name && strcmp(this_driver_name, pdev->driver->name))
        {
            printk(KERN_ALERT 
                "Driver [%s] already registered for %s\n",
                pdev->driver->name, buff);
            status = -1;
        } 
    }
    else
    {
        spi_device->max_speed_hz = SPI_BUS_SPEED;
        spi_device->mode = SPI_MODE_0;
        spi_device->bits_per_word = 8;
        spi_device->irq = -1;
        spi_device->controller_state = NULL;
        spi_device->controller_data = NULL;
        strlcpy(spi_device->modalias, this_driver_name, SPI_NAME_SIZE);

        status = spi_add_device(spi_device);        
        if (status < 0)
        {   
            spi_dev_put(spi_device);
            printk(KERN_ALERT "spi_add_device() failed: %d\n", 
                status);        
        }               
    }

    put_device(&spi_master->dev);

    return status;
}

static struct spi_driver spike_driver = {
    .driver = {
        .name = this_driver_name,
        .owner = THIS_MODULE,
    },
    .probe = spike_probe,
    .remove = __devexit_p(spike_remove),    
};

static int __init spike_init_spi(void)
{
    int error;

    spike_ctl.tx_buff = kmalloc(SPI_BUFF_SIZE, GFP_KERNEL | GFP_DMA);
    if (!spike_ctl.tx_buff)
    {
        error = -ENOMEM;
        goto spike_init_error;
    }

    spike_ctl.rx_buff = kmalloc(SPI_BUFF_SIZE, GFP_KERNEL | GFP_DMA);
    if (!spike_ctl.rx_buff)
    {
        error = -ENOMEM;
        goto spike_init_error;
    }

    error = spi_register_driver(&spike_driver);
    if (error < 0)
    {
        printk(KERN_ALERT "spi_register_driver() failed %d\n", error);
        goto spike_init_error;
    }

    error = add_spike_device_to_bus();
    if (error < 0)
    {
        printk(KERN_ALERT "add_spike_to_bus() failed\n");
        spi_unregister_driver(&spike_driver);
        goto spike_init_error;  
    }

    spike_dev.irq = OMAP_GPIO_IRQ(IRQ_PIN);

    return 0;

spike_init_error:

    if (spike_ctl.tx_buff) {
        kfree(spike_ctl.tx_buff);
        spike_ctl.tx_buff = 0;
    }

    if (spike_ctl.rx_buff) {
        kfree(spike_ctl.rx_buff);
        spike_ctl.rx_buff = 0;
    }

    return error;
}

static ssize_t spike_read(struct file *filp, char __user *buff, size_t count, loff_t *offp)
{
    size_t len;
    ssize_t status = 0;

    if (!buff) 
        return -EFAULT;

    if (*offp > 0) 
        return 0;

    if (down_interruptible(&spike_dev.fop_sem)) 
        return -ERESTARTSYS;

    printk(KERN_ALERT "Interrupt triggered %d Missed packet %d\n", sample_counter, num_miss_samples);

    up(&spike_dev.fop_sem);

    return status;  
}

static ssize_t spike_write(struct file *filp, const char __user *buff, size_t count, loff_t *f_pos)
{
    size_t len; 
    ssize_t status = 0;

    if (down_interruptible(&spike_dev.fop_sem))
        return -ERESTARTSYS;

    memset(spike_dev.user_buff, 0, 16);
    len = count > 8 ? 8 : count;

    if (copy_from_user(spike_dev.user_buff, buff, len))
    {
        status = -EFAULT;
        goto spike_write_done;
    }

    /* we'll act as if we looked at all the data */
    status = count;

    /* but we only care about the first 5 characters */
    if (!strnicmp(spike_dev.user_buff, "inc", 3))
    {
        disable_irq(spike_dev.irq);
        write_register(1,0x62);
        resetbuffers();
        printk(KERN_ALERT "4000 samples per second\n");
        enable_irq(spike_dev.irq);
    } 

    if (!strnicmp(spike_dev.user_buff, "dec", 3))
    {
        disable_irq(spike_dev.irq);
        write_register(1,0x52);
        resetbuffers();
        printk(KERN_ALERT "1000 samples per second\n");
        enable_irq(spike_dev.irq);
    } 

    if (!strnicmp(spike_dev.user_buff, "stop", 4))
    {
        disable_irq(spike_dev.irq);
        resetbuffers();
        printk(KERN_ALERT "Driver stopped\n");
    } 

spike_write_done:

    up(&spike_dev.fop_sem);

    return status;
}

static const struct file_operations spike_fops = {
    .owner          = THIS_MODULE,
    .open           = spike_open,
    .read           = spike_read,
    .write          = spike_write,
    .unlocked_ioctl = adc_ioctl,    
};

static int __init spike_init_cdev(void)
{
    int error;

    spike_dev.devt = MKDEV(0, 0);

    error = alloc_chrdev_region(&spike_dev.devt, 0, 1, this_driver_name);
    if (error < 0)
    {
        printk(KERN_ALERT "alloc_chrdev_region() failed: %d \n", 
            error);
        return -1;
    }

    cdev_init(&spike_dev.cdev, &spike_fops);
    spike_dev.cdev.owner = THIS_MODULE;

    error = cdev_add(&spike_dev.cdev, spike_dev.devt, 1);
    if (error)
    {
        printk(KERN_ALERT "cdev_add() failed: %d\n", error);
        unregister_chrdev_region(spike_dev.devt, 1);
        return -1;
    }   

    return 0;
}

static int __init spike_init_class(void)
{
    spike_dev.class = class_create(THIS_MODULE, this_driver_name);

    if (!spike_dev.class)
    {
        printk(KERN_ALERT "class_create() failed\n");
        return -1;
    }

    if (!device_create(spike_dev.class, NULL, spike_dev.devt, NULL, this_driver_name))
    {
        printk(KERN_ALERT "device_create(..., %s) failed\n",
            this_driver_name);
        class_destroy(spike_dev.class);
        return -1;
    }

    return 0;
}

static int __init spike_init(void)
{

    int result;
    memset(&spike_dev, 0, sizeof(spike_dev));
    memset(&spike_ctl, 0, sizeof(spike_ctl));

    sema_init(&spike_dev.spi_sem, 1);
    sema_init(&spike_dev.fop_sem, 1);

    buff_even = kmalloc(BUFF_SIZE, GFP_KERNEL);
    buff_odd  = kmalloc(BUFF_SIZE, GFP_KERNEL);
    temp_buff = kmalloc(BUFF_SIZE, GFP_KERNEL);

    if ( buff_even == 0 )
        printk(KERN_ALERT "Failed to allocate buffer even\n");

    if ( buff_odd == 0 )
        printk(KERN_ALERT "Failed to allocate buffer odd\n");

    if ( temp_buff == 0 )
        printk(KERN_ALERT "Failed to temp buffer\n");

    if (spike_init_cdev() < 0) 
        goto fail_1;

    if (spike_init_class() < 0)  
        goto fail_2;

    if (spike_init_spi() < 0) 
        goto fail_3;

    result = request_irq(spike_dev.irq, adc_handler, IRQF_TRIGGER_RISING, "adc", &spike_dev);

    if (result < 0)
    {
                printk(KERN_ALERT "request_irq failed: %d\n", result);
                return -1;
    }

    return 0;

fail_3:
    device_destroy(spike_dev.class, spike_dev.devt);
    class_destroy(spike_dev.class);

fail_2:
    cdev_del(&spike_dev.cdev);
    unregister_chrdev_region(spike_dev.devt, 1);

fail_1:
    return -1;
}
module_init(spike_init);

static void __exit spike_exit(void)
{

    disable_irq(spike_dev.irq);
    free_irq(spike_dev.irq, &spike_dev);
    gpio_free(IRQ_PIN);

    spi_unregister_device(spike_dev.spi_device);
    spi_unregister_driver(&spike_driver);

    device_destroy(spike_dev.class, spike_dev.devt);
    class_destroy(spike_dev.class);

    cdev_del(&spike_dev.cdev);
    unregister_chrdev_region(spike_dev.devt, 1);

    if (spike_ctl.tx_buff)
        kfree(spike_ctl.tx_buff);

    if (spike_ctl.rx_buff)
        kfree(spike_ctl.rx_buff);

    if (spike_dev.user_buff)
        kfree(spike_dev.user_buff);

    if ( buff_even != 0 )
        kfree(buff_even);

    if ( buff_odd != 0 )
        kfree(buff_odd);

    if ( temp_buff != 0 )
        kfree(temp_buff);

    printk(KERN_ALERT "Interrupt triggered %d Missed packet %d\n", sample_counter, num_miss_samples);

}
module_exit(spike_exit); 
```

中断处理程序崩溃在线

```
status = spi_async(spike_dev.spi_device, &spike_ctl.msg); 
```

如果我注释掉这一行，一切运行正常，但当然没有从 SPI 读取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:46:51.950

穆罕默德，也许你到时候解决了这个问题。

但是，我看到的是您在 SPI 完成处理程序 (spike_completion_handler) 中使用互斥锁，它在无法休眠的上下文中执行。因此，我建议改用自旋锁。这是安全的，因为 count_lock 总是保护不休眠的代码。

这可能不是您的问题的原因（没有阅读整个代码），但最好还是这样做。

# php - PHP - 树枝安装

> ID：12142413
> 
> 赞同：0
> 
> 时间：2012-08-27T12:55:03.587
> 
> 标签：php, smarty, twig

我一直在看 Twig (http://twig.sensiolabs.org/)。我一直想做一个简单的开源日历程序，我可以分发（有一个迷你安装程序等）。Smarty（另一个模板引擎）希望您将其安装在不可通过 Web 访问的目录中以确保安全。唯一的事情是，如果不是不可能的话，我认为这会使我的安装程序变得非常复杂。twig 是否要求您将其主要文件放在 webroot 之外，或者我可以将它放在任何地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:06:27.380

Smarty 和 Twig 都不*需要*您将它们存储在任何特定的地方。出于安全原因，*建议*将两者都存储在 doc-root 之外。不多。不低于。

# php - 从 PHP 中截取 HTML（输出）

> ID：12142414
> 
> 赞同：0
> 
> 时间：2012-08-27T12:55:03.793
> 
> 标签：php

我有一个 PHP 函数，它通过 echo 打印出 HTML，也可以在标签之外打印它（参见下面的示例）。我想做的（出于 MVC 目的）是能够拦截这两种方法生成的输出流，以便我可以将其传递给显示格式化函数。

我曾尝试使用 ob_start() 等，但这只会拦截回显数据。

例子：

```
<?php
function doLogicStuff()
{
  echo "This is some text.";  //You can intercept this using ob_start()
  ?>
    <b>This is some more HTML stuff</b>  <!-- This will not be intercepted by ob_start() -->
  <?php
}
?> 
```

我希望能够截取该函数输出的完整“最终结果”，以便我可以将其传递给一个负责以统一方式显示其的函数。

有没有办法做到这一点，或者将所有内容写入字符串变量并返回它是最简单的（这当然可以解决问题，但对于大块 HTML 来说这样做很烦人）。

谢谢！

# java - JTextArea 自动高度调整大小

> ID：12142415
> 
> 赞同：1
> 
> 时间：2012-08-27T12:55:07.533
> 
> 标签：java, swing, jtextarea, layout-manager, boxlayout

所有组件宽度都相同。我有一个 JPanel（框布局；PAGE_AXIS）。我在上面添加了一个 Box.filler，它具有以下规格：

最小尺寸（高度）-1

首选尺寸（高度） JPanel 高度

最大尺寸（高度） JPanel 高度

我添加了边框厚度为 7 像素的 JTextArea（仅在下方）。

当我输入文本时，JTextArea 会扩展，但还不够，并且在几行之后，文本超出了界限（您再也看不到它了）。

我可以确定存在多少行文本（使用 FontMetrics），并且可以相应地强制 setSize，但没有真正改变。打印出 JTextArea.getHeight() 确实表明尺寸在我看来已经改变，但在视觉上它保持不变。而且我没有忘记验证和重绘。

如何强制 JTextArea 调整到特定大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:05:53.197

您也可以只让 JTextArea 换行？：

```
JTextArea.setWrapStyleWord(true); 
```

`setRows(int rows)`您也可以尝试使用然后设置行数`revalidate()`和`repaint()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:35:33.663

您可以将 JTextArea 放入 JScrollPane 以保持其他行可见，而无需更改 JTextArea 在屏幕上所需的空间。

[有关如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)的更多信息，请参阅 Oracle 教程。

# c - 将 xml 值映射到结构值

> ID：12142422
> 
> 赞同：0
> 
> 时间：2012-08-27T12:55:33.140
> 
> 标签：c, xml, struct, xml-parsing, xml-serialization

您能否帮助将 xml 值映射到结构成员。假设如果 struct abc 有数据成员，那么它应该像 abc.data = myxml.data ，其中 myxml 是一个具有数据属性值的 xml 文件。我已经使用 libxml2 来解析和获取这些值，但是如何映射 C 结构和 XML 值。感谢你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:59:19.857

您可能必须手动执行此操作，方法是检查标签名称，然后在它们的位置设置值。

使其更加自动化的一种方法可能是有一个包含标签名称的表，例如`void`指向结构成员的指针。然后，当您有一个标签时，您可以遍历表，将名称与实际标签进行比较，然后通过某种类型转换设置值。

# php - Symfony 2 - 如何删除捆绑包？

> ID：12142425
> 
> 赞同：38
> 
> 时间：2012-08-27T12:55:58.113
> 
> 标签：php, symfony, symfony-2.1

所以我的问题是如何删除我创建的捆绑包？

您可以使用此控制台命令创建捆绑包：

```
php app/console generate:bundle --namespace=Test/BlogBundle --format=yml 
```

这太棒了，但是如果我需要删除这个捆绑包怎么办？是否有控制台命令可以删除我不再需要的捆绑包？

我知道当您从控制台创建新包时，您：

```
1\. create /src/Test/BlogBundle directory
2\. change /app/config/routing.yml file to include routes
3\. include your new bundle in /app/Resources/App.Kernel.php
4\. I think there is something changed in /app/cache/... 
```

现在完全删除捆绑包的正确方法是什么？

使用控制台这些包是“神奇地”生成的，所以我不知道这个命令在文件夹结构和文件中发生了什么变化？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-27T13:15:13.490

它基本上是您概述的过程，只是顺序有所不同。

1.  **删除**/src/Test/BlogBu​​ndle 目录
2.  更改 /app/config/routing.yml 文件以**删除捆绑**路由
3.  ****从**/app/AppKernel.php**中删除**你的新包**
***   **清除缓存**（通过删除缓存/{$env} 或控制台缓存：清除）**

 **如果这不是使用依赖管理器安装的 - 那应该就是全部了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-11T10:24:40.780

我知道我迟到了，但 Symfony 有[关于](http://symfony.com/doc/current/cookbook/bundles/remove.html)如何删除捆绑包的说明。这就是我删除的方式。您可以将相同的说明用于您创建并现在要删除的其他捆绑包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-17T14:33:35.993

要在 Symfony 3（及更高版本）中删除包：

**方法一：**

1.  转到`composer.json`，搜索并删除捆绑包。
2.  运行 composer update （它会自动删除包并清除缓存）

**方法 2：**
运行`composer remove alias/to/your/bundle`
fe：`composer remove nesbot/carbon`

就是这样。**

# castle - 如何使用城堡 IWcfClientFactory

> ID：12142435
> 
> 赞同：0
> 
> 时间：2012-08-27T12:56:30.330
> 
> 标签：castle

如何从城堡 wcf 设施中使用 IWcfClientFactory 任何人都可以发布一个示例

# javascript - 如何创建一个选择器，就像 jQuery 有 jQuery() 或 $() 一样？

> ID：12142441
> 
> 赞同：3
> 
> 时间：2012-08-27T12:56:42.653
> 
> 标签：javascript

我一直在为自定义布局脚本创建自己的库。为了易于使用，我试图模拟 jQuery 如何通过 jQuery() 公开其库，这使得代码非常易于阅读和直接。我想出了一些可行的方法，但我不确定这是否是正确的方法。不是将函数保留在内部，而是将所有函数“附加”到库中。无论如何，到目前为止对我有用的代码如下：

```
slateUI = (function(slateID){
    slateUI.ID = slateID;
    return slateUI;
}); 
```

一个相关的函数看起来像这样：

```
slateUI.doSomething = function(content)
{
    //DID SOMETHING USING slateUI.ID
} 
```

我对 OOP 很陌生，比如语言的特性。我确信有更好的方法来解决这个问题。我遇到的问题是将元素传递给附加的函数调用，例如：

```
slateUI("#someSlate").doSomething(...) 
```

从 slateUI.ID 获取其元素

这是解决这个问题的正确方法吗？或者这是我想出的一种黑客方式，并且有一些直接的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:38:54.763

```
// function which returns a new SlateUI object (so we dont have to use the "new" keyword)
slateUI = function ( slateID ) {
    return new SlateUI( slateID );
};

// class definition
function SlateUI ( slateId ) {
    this.id = slateId;
}
// methods added to the class prototype (allows for prototypical inheritance)
SlateUI.prototype.someFunction = function() {
    alert( this.id );
    return this; // adding this line to the end of each method allows for method chaining
};

// usage
slateUI( 'someid' ).someFunction(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:13:07.997

您的问题的简短版本是您正在寻找链接功能的能力。

这可以通过从每个函数返回相关对象来实现。如果函数没有其他返回值，则只返回`this`变量，将控制权交还给调用者。

# variables - 批处理文件、变量扩展和循环中的子字符串

> ID：12142442
> 
> 赞同：1
> 
> 时间：2012-08-27T12:56:44.227
> 
> 标签：variables, batch-file, substring, expansion

我无法理解 DOS 批处理文件的变量替换机制，尤其是在 for 循环中。

简化批处理问题：想象如下目录
01foo.txt
02foo.dir（这是一个目录）
bar01（这是一个目录）
bar02（这是一个目录）

我想将此目录中不以“bar”开头的所有文件/目录移动到 bar+_the_first_2_characters_of_the_filename_or_directory_name 的子目录。
在这种情况下，01foo.txt 将被移动到 bar01，02foo.dir 将被移动到 bar02。

以下脚本是我的第一次尝试：

```
setlocal EnableDelayedExpansion  
for %%A in (*) do (  
    set _x=%%A
    if (!_x:~0,2! NEQ "bar") move %%A bar!_x:~0,2!
)
endlocal 
```

除了这似乎只针对文件循环之外，它根本不起作用:-)。我在 if 语句中收到一个错误，说“3！此时出乎意料”

关于如何改善情况/脚本的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:06:17.423

只是语法的问题...

该`IF`语句不期望不接受周围的括号。
中的逗号`!_x:~0,2!`打破了 IF 语句，您可以引用这两个部分或将其移动到自己的`set prefix=!_x:~0,2!"`行中。
如果你引用`"bar"`你也需要引用`"!prefix!"`。

就这样

```
setlocal EnableDelayedExpansion  
for %%A in (*) do (  
    set "_x=%%A"
    set "prefix=!_x:~0,2!"
    if "!prefix!" NEQ "bar" move %%A bar!prefix!
)
endlocal 
```

# javascript - jquery中是否有任何方法或地方可以编写从Dom删除页面后调用的方法？

> ID：12142443
> 
> 赞同：0
> 
> 时间：2012-08-27T12:56:43.733
> 
> 标签：javascript, jquery, jquery-ui, cordova, jquery-mobile

在我的应用程序中有各种页面。在我曾经使用过的一页中

```
intervalID = setInterval(function(){getResponse();}, timer); 
```

现在假设点击后退按钮我想取消那个计时器。我应该在哪里写`clearInterval(intervalID);`？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:22:23.733

如果您有使用 push/popstate 处理历史记录的单页应用程序（听起来像），那么您可以使用：

```
window.onpopstate = function() {
  clearInterval(intervalID);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:01:42.550

当您更改页面时，您的 intervalID 引用将被自动销毁（就像任何其他引用一样）：无论如何，如果您需要在页面更改之前执行通用操作，只需使用`onbeforeunload`事件

[https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

（请注意，页面本身的刷新也会触发此事件）

# iphone - 在 xcode 4.2 上播放时没有背景音乐

> ID：12142444
> 
> 赞同：0
> 
> 时间：2012-08-27T12:56:46.113
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用以下代码：my Sound is placed in myapp/Shared Resources/background_music.aiff

```
@synthesize window = _window;
- (void)dealloc
{
    [backgroundSound release];
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    sleep(3);
     //this variable can be named differently

    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/background_music.aiff",[[NSBundle mainBundle] resourcePath]]];
    NSError *error;

    backgroundSound = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];

     backgroundSound.numberOfLoops = -1;
    //>> this will allow the file to //play an infinite number of times */

    return YES;
}

@interface AppDelegate : UIResponder <UIApplicationDelegate>{
    AVAudioPlayer *backgroundSound;

}

@property (strong, nonatomic) UIWindow *window;
@end 
```

没有错误，也没有循环声音。请告诉我发生了什么。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:20:30.830

好的，我添加了`[background play];`，它已经开始正常工作了.....我正在关注的教程中没有提到..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:23:51.083

```
 player = [[MPMoviePlayerController alloc] initWithContentURL:url];
    player.movieSourceType = MPMovieSourceTypeStreaming;
    if(player.playbackState == MPMoviePlaybackStatePlaying)
        [player stop];
    [player play]; 
```

# model-view-controller - MVC 设计模式模型逻辑

> ID：12142453
> 
> 赞同：5
> 
> 时间：2012-08-27T12:57:15.137
> 
> 标签：model-view-controller, design-patterns, confirmation-email

根据 MVC 设计模式，如果我们创建一个用户（数据库工作）并且我们必须向用户发送一封带有激活码的邮件，那么在模型创建数据库记录之后，这是否适合模型或控制器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T13:11:33.790

MVC 模式用于在业务逻辑（模型）和 GUI（视图）之间创建抽象。控制器只是这两个块之间的适配器（谷歌适配器模式）。

因此，控制器应该只具有用于从控制器获取所需信息并采用它以适应视图的代码。任何其他逻辑都应该在模型中。

仅当您了解模型不是单个类而是您的所有业务逻辑时，这才有意义。

示例（具体实现，但希望您理解）：

```
public class UserController : Controller
{
    // notice that it's a view model and not a model
    public ActionResult Register(RegisterViewModel model)
    {
        UserService service;
        User user = service.Register(model.UserName);
        return View("Created");
    }
}

// this class is located in the "model"
public class UserService
{
   public User Register(string userName)
   {
       // another class in the "model"
       var repository = new UserRepository();
       var user = repository.Create(userName);

       // just another "model" class
       var emailService = new EmailService();
       emailService.SendActivationEmail(user.Email);

       return user;
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T14:38:57.640

MVC 和受 MVC 启发的设计模式是两层的组合：

*   *表示层*
*   *模型层*

表示层由视图、控制器和*（主要在面向 Web 的解决方案中）*模板组成。该层处理用户交互。它识别用户输入、产生响应并管理用户界面的其他方面。控制器基于用户交互改变模型层的状态。

模型层处理领域业务规则并与不同形式的存储进行交互。模型层，就像表示层一样，不是任何单一的对象或类，而是一组具有不同职责的结构。

在这种情况下，处理用户管理的服务使用不同的结构是有意义的，这将发送验证电子邮件、创建帐户并存储这个新创建的用户。

模型层中的服务就像屏障一样，将表示层与业务逻辑隔离开来。它们处理[域对象](http://c2.com/cgi/wiki?DomainObject)和存储抽象（[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)、[存储库](http://martinfowler.com/eaaCatalog/repository.html)、[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)等）之间的交互。

## TL;博士

应从模型层发送带有新创建用户的激活码的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:47:48.157

控制器是一个对象，它简化并将消息委托给模型对象。

您将拥有的是模型中的接口对象（或边界对象），它表示两个系统（您的系统和电子邮件）之间的链接。类电子邮件客户端。您的模型对象将在需要时与此对象协作。

# android - actionbarsherlock TitleTextStyle 不起作用

> ID：12142460
> 
> 赞同：0
> 
> 时间：2012-08-27T12:57:35.937
> 
> 标签：android, actionbarsherlock

我的项目中的 ActionBar 有以下样式

```
 <style name="Theme.MyTheme" parent="Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="homeAsUpIndicator">@drawable/icon_back</item>
    <item name="android:homeAsUpIndicator">@drawable/icon_back</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#0099CC</item>
    <item name="android:height">?android:attr/actionBarSize</item>
    <item name="background">#0099CC</item>
    <item name="android:titleTextStyle">@style/Theme.ActionBar.TitleTextStyle</item>
    <item name="titleTextStyle">@style/Theme.ActionBar.TitleTextStyle</item>
    <item name="android:displayOptions">useLogo|showTitle|homeAsUp</item>
    <item name="displayOptions">useLogo|showTitle|homeAsUp</item>
</style>

<style name="Theme.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">@color/white</item>
    <item name="android:padding">10dp</item>
</style> 
```

现在标题栏中的文本以 0dp 向左对齐。TextColor 属性工作正常，但填充似乎被忽略了。结果Activity的标题就卡在了不怎么好看的屏幕左手边。如何为文本添加填充？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:17:49.060

这就是我能够设置主页图标和标题之间的填充的方式。

```
ImageView view = (ImageView)findViewById(android.R.id.home);
view.setPadding(left, top, right, bottom); 
```

不过，我找不到通过 ActionBar xml 样式自定义它的方法。也就是说，以下 XML 不起作用：

```
<style name="ActionBar" parent="android:style/Widget.Holo.Light.ActionBar">        
    <item name="android:titleTextStyle">@style/ActionBarTitle</item>
    <item name="android:icon">@drawable/ic_action_home</item>        
</style>

<style name="ActionBarTitle" parent="android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textSize">18sp</item>
    <item name="android:paddingLeft">12dp</item>   <!-- Can't get this padding to work :( -->
</style> 
```

从这里：

[ActionBar 的主页图标和标题之间的填充](https://stackoverflow.com/questions/9737101/padding-between-actionbars-home-icon-and-title#answers-header)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:00:31.327

要存档在 ABS 中具有居中的标题，而没有主页按钮，您可以这样做：

在您的活动中，在您的`oncreate`方法中：

```
getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM); 
getSupportActionBar().setCustomView(R.layout.abs_layout); 
```

abs_layout：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="my Title"
        android:textColor="#ffffff"
        android:id="@+id/mytext"
        android:textSize="25dp" />

</LinearLayout> 
```

现在你应该有一个只有标题的操作栏。如果要设置自定义背景，请在上面的 Layout 中设置（但不要忘记设置`android:layout_height="match_parent"`）

或与：

```
getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.yourimage)); 
```

# php - 将上传的文件作为附件发送到电子邮件

> ID：12142461
> 
> 赞同：1
> 
> 时间：2012-08-27T12:57:42.750
> 
> 标签：php, html, forms, email, attachment

我是网页设计的新手。我需要在 HTML 中创建一个表单，以便它要求用户输入几个字段并上传他/她的简历。当他提交表格时，他的提交应该通过电子邮件发送给我，并附上他的简历作为电子邮件的附件。我使用 PHP 发送电子邮件。一切正常，除了文件没有随发送的电子邮件附加。

我发布了 HTML 和 PHP 代码，请帮助我..

**HTML 代码：文件名：Careers.html**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Contact Form</title>
</head>

<body>
<form action="Careers.php" method="post" enctype="multipart/form-data">
    Name<br>
     <input type="text" name="cf_name"><br>
    E-mail<br>
     <input type="text" name="cf_email"><br>
        Date of Birth<br>
     <input type="text" name="db_name"><br>
        Contact Number<br>
     <input type="text" name="db_cntct"><br>
    Class 12 Marks/CGPA/Percentage<br>
     <input type="text" name="cf_board"><br>
         Graduation Marks/CGPA/Percentage<br>
     <input type="text" name="db_grad"><br>
     Post-Graduation Marks/CGPA/Percentage<br>
     <input type="text" name="cf_pgrad"><br>
        Present Employer<br>
     <input type="text" name="db_emplyr"><br>
     Date of Joining<br>
     <input type="text" name="cf_doj"><br>
        Designation<br>
     <input type="text" name="db_desg"><br>
        Current CTC<br>
     <input type="text" name="db_ctc"><br>
     Upload your Resume<br>
     <input type="file" name="attachment" size="40"><br>
Message<br>
<textarea name="cf_message"></textarea><br><br>
<input type="submit" value="Send">
<input type="reset" value="Clear">
</form>
</body>
</html> 
```

**PHP 代码：文件名：Careers.php**

```
<?php
$field_name = $_POST['cf_name'];
$field_email = $_POST['cf_email'];
$field_dob = $_POST['db_name'];
$field_contact = $_POST['db_cntct'];
$field_board = $_POST['cf_board'];
$field_grad = $_POST['db_grad'];
$field_pgrad = $_POST['cf_pgrad'];
$field_emplyr = $_POST['db_emplyr'];
$field_doj = $_POST['cf_doj'];
$field_desg = $_POST['db_desg'];
$field_ctc = $_POST['db_ctc'];
$field_message = $_POST['cf_message'];

$mail_to = 'sachinrocksus@gmail.com';
$subject = 'Job Application from a site visitor '.$field_name;

$body_message = 'From: '.$field_name."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Date of Birth: '.$field_dob."\n";
$body_message .= 'Contact Number: '.$field_contact."\n";
$body_message .= 'Class 12 Marks/CGPA/Percentage: '.$field_board."\n";
$body_message .= 'Graduation Marks/CGPA/Percentage: '.$field_grad."\n";
$body_message .= 'Post-Graduation Marks/CGPA/Percentage: '.$field_pgrad."\n";
$body_message .= 'Present Employer: '.$field_emplyr."\n";
$body_message .= 'Date of Joining: '.$field_doj."\n";
$body_message .= 'Designation: '.$field_desg."\n";
$body_message .= 'Current CTC: '.$field_ctc."\n";
$body_message .= 'Message: '.$field_message."\n";

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";       

$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Your Job Application has been recieved. We will contact you shortly.');
        window.location = 'Careers.html';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed');
        window.location = 'Careers.html';
    </script>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:10:49.513

你没有传递任何东西作为附件

在这里我粘贴一个片段希望这对你有帮助

```
<?php
    $fileatt = "mypdffile.pdf"; // Path to the file
    $fileatt_type = "application/pdf"; // File Type
    $fileatt_name = "mypdffile.pdf"; // Filename that will be used for the file as the attachment

    $email_from = "sales@mysite.com"; // Who the email is from
    $email_subject = "Your attached file"; // The Subject of the email
    $email_message = "Thanks for visiting mysite.com! Here is your free file.
    ";
    $email_message .= "Thanks for visiting.
    "; // Message that the email has in it

    $email_to = $_POST['email']; // Who the email is to

    $headers = "From: ".$email_from;

    $file = fopen($fileatt,'rb');
    $data = fread($file,filesize($fileatt));
    fclose($file);

    $semi_rand = md5(time());
    $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

    $headers .= "\nMIME-Version: 1.0\n" .
    "Content-Type: multipart/mixed;\n" .
    " boundary=\"{$mime_boundary}\"";

    $email_message .= "This is a multi-part message in MIME format.\n\n" .
    "--{$mime_boundary}\n" .
    "Content-Type:text/html; charset=\"iso-8859-1\"\n" .
    "Content-Transfer-Encoding: 7bit\n\n" .
    $email_message .= "\n\n";

    $data = chunk_split(base64_encode($data));

    $email_message .= "--{$mime_boundary}\n" .
    "Content-Type: {$fileatt_type};\n" .
    " name=\"{$fileatt_name}\"\n" .
    //"Content-Disposition: attachment;\n" .
    //" filename=\"{$fileatt_name}\"\n" .
    "Content-Transfer-Encoding: base64\n\n" .
    $data .= "\n\n" .
    "--{$mime_boundary}--\n";

    $ok = @mail($email_to, $email_subject, $email_message, $headers);

    if($ok) {
    echo "You file has been sent
    to the email address you specified.

    Make sure to check your junk mail!

    Click here to return to mysite.com.";

    } else {
    die("Sorry but the email could not be sent. Please go back and try again!");
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-31T15:05:37.590

感谢分享这么好的代码：只需稍加修改，这就是真正的工作代码。制作一个 HTML 文件：

### 上传文件并作为电子邮件附件发送

名称：
电子邮件：
选择要上传的文件：

同一文件夹创建一个名为 mail_sender.php 的 php 文件

```
<?php 
error_reporting(E_ALL);
ini_set('display_errors', 1);

    $name_of_uploaded_file =basename($_FILES['uploaded_file']['name']);
    $formData = $_POST;
    getFile( $name_of_uploaded_file, $formData );

    function getFile( $filename , $formData ) {

        $allowedExts = array("csv","pdf","jpg","png","JPG","PNG","jpeg","JPEG");
        $temp = explode(".", $_FILES["uploaded_file"]["name"]);
        $extension = end($temp);
        $mimes = array('application/vnd.ms-excel','text/plain','text/csv','text/tsv','application/jpg','image/jpg', 'image/jpeg', 'image/png','image/gif');

        if (in_array($_FILES['uploaded_file']['type'],$mimes )
        && ($_FILES["uploaded_file"]["size"] < 2000000)
        && in_array($extension, $allowedExts))
          {
          if ($_FILES["uploaded_file"]["error"] > 0)
            {
            echo "Return Code: " . $_FILES["uploaded_file"]["error"] . "<br>";
            }
          else
            {      
                sendMailAsAttachment($_FILES["uploaded_file"]["tmp_name"],$_FILES["uploaded_file"]["name"],$formData);         
            }
          }
        else
          {
          echo "Invalid file " . $extension . " {} " . $_FILES['uploaded_file']['type'];
          //echo in_array($_FILES['uploaded_file']['type'],$mimes );
          }  
    }

//This function accepts post data on form submissions and prepare the email message from the form data.

    function prepareEmail( $formData ) {

        // email fields: to, from, subject, and so on
        $to = "solimankhulna@gmail.com";
        $from = "solimankhulna@solimankhulna.com"; 
        $subject =""; 
        $message = "Uploaded File\n";
        $message .= "Name :". $formData['name']."\n";
        $message .= "Email Address :". $formData['email']."\n";
        $headers = "From: $from";

        // boundary 
        $semi_rand = md5(time()); 
        $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x"; 

        // headers for attachment 
        $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\""; 

        // multipart boundary 
        $message .= "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n"; 
        $message .= "--{$mime_boundary}\n";

        $emailData = array (
            'to' => $to,
            'from' => $from,
            'subject' => $subject,
            'headers' => $headers,
            'message' => $message
        );

        return $emailData;

    }

    function prepareAttachment( $filename ,$fileorgname) {
        $semi_rand = md5(time()); 
        $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";
        $attachContent = '';
        $file = fopen($filename,"rb");
        $data = fread($file,filesize($filename));
        fclose($file);
        $cvData = chunk_split(base64_encode($data));
        $attachContent .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$fileorgname\"\n" . 
        "Content-Disposition: attachment;\n" . " filename=\"$fileorgname\"\n" . 
        "Content-Transfer-Encoding: base64\n\n" . $cvData . "\n\n";
        $attachContent .= "--{$mime_boundary}\n"; 
        return $attachContent;

    }

    function sendMailAsAttachment( $filename, $fileorgname, $formData ) {

        $emailData = prepareEmail( $formData );
        $attachContent = prepareAttachment( $filename,$fileorgname );
        $message = $emailData['message'].$attachContent;
        $ok = @mail($emailData['to'], $emailData['subject'], $message, $emailData['headers']); 
        if ($ok) { 
                echo "<p>mail sent to " . $emailData['to'] . "!</p>"; 
        } else { 
                echo "<p>mail could not be sent!</p>"; 
        } 
    }

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-12T02:33:17.710

此功能将上传文件作为附件发送。请参阅教程获取html代码和逐步说明。

[http://www.pearlbells.co.uk/send-upload-file-email-attachment-php/](http://www.pearlbells.co.uk/send-upload-file-email-attachment-php/)

```
function pepareAttachment( $filename ,$fileorgname) {

   $attachContent = '';
   $file = fopen($filename,"rb");
   $data = fread($file,filesize($filename));
   fclose($file);
   $cvData = chunk_split(base64_encode($data));
   $attachContent .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$fileorgname\"\n" . 
"Content-Disposition: attachment;\n" . " filename=\"$fileorgname\"\n" . 
"Content-Transfer-Encoding: base64\n\n" . $cvData . "\n\n";
  $attachContent .= "--{$mime_boundary}\n"; 
  return $attachContent;

}

function sendMailAsAttachment( $filename, $fileorgname, $formData ) {

$emailData = prepareEmail( $formData );
$attachContent = prepareAttachment( $filename,$fileorgname );
$message = $emailData['message'].$attachContent;
$ok = @mail($emailData['to'], $emailData['subject'], $message, $emailData['headers']); 
if ($ok) { 
        echo "<p>mail sent to $to!</p>"; 
} else { 
        echo "<p>mail could not be sent!</p>"; 
} 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:28:17.433

如上所述，您没有得到任何附件处理`PHP`。本[教程](http://www.html-form-guide.com/email-form/php-email-form-attachment.html)可能会帮助您逐步完成这些步骤。

# memory-profiling - Windows Azure 的内存配置文件

> ID：12142464
> 
> 赞同：2
> 
> 时间：2012-08-27T12:57:56.250
> 
> 标签：memory-profiling, azure-diagnostics

如何在本地（模拟器）部署上为 Windows azure 应用程序（辅助角色）执行内存分配配置文件？

# javascript - 如何减少骨干路由器中的重复代码

> ID：12142474
> 
> 赞同：1
> 
> 时间：2012-08-27T12:58:53.293
> 
> 标签：javascript, inheritance, backbone.js, coffeescript, dry

在我的路由器中，初始化方法具有相同的代码（代码重复了 3 次！）。

我有 3 个路由器，所以如果我想重构代码（更改名称等），我将不得不跳转到 3 个单独的文件并在每个文件上应用更改。

代码如下：

```
initialize: =>
  # http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/
  @contentView = new Backbone.AppView(".js-content")
  @searchView = new Backbone.AppView(".js-searchbox")
  @sidebarView = new Backbone.AppView(".js-sidebar") 
```

是否有某种技术可以干燥此代码？

某种超类？

我使用咖啡脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:30:53.003

您需要创建一个抽象路由器来初始化所需的视图，然后您的特定路由器必须扩展它：

```
var BaseRouter = Backbone.Router.extend({
  initialize : function(){
    console.log('Native Router!');
    this.contentView = new Backbone.AppView(".js-content");
    this.searchView = new Backbone.AppView(".js-searchbox");
    this.sidebarView = new Backbone.AppView(".js-sidebar");
    }
});
var RouterOne = BaseRouter.extend({
  initialize : function(){
    BaseRouter.prototype.initialize.call(this);
    //specific stuff
  }
});
var RouterTwo = BaseRouter.extend({
  initialize : function(){
    BaseRouter.prototype.initialize.call(this);
    //specific stuff
  }
});

var router1 = new RouterOne();
var router2 = new RouterTwo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:31:26.880

看起来您在此处实例化的 DOM 部分都可以被视为“父视图”的“子视图”。通过这个令牌，您为什么不实例化@pageView = new BB.AppView(...) 然后在@pageView 的render() 方法中继续实例化这三个“子类”？

# javascript - 将 JavaScript 文件的内容输出为警报或登录控制台

> ID：12142475
> 
> 赞同：1
> 
> 时间：2012-08-27T12:59:06.890
> 
> 标签：javascript

> **可能重复：**
> [如何获取指定为 <script> 标签的“src”的文件内容？](https://stackoverflow.com/questions/148441/how-can-i-get-the-content-of-the-file-specified-as-the-src-of-a-script-tag)

这似乎是一个奇怪的问题，但它一直在我的脑海中。假设我有一个引用一个或多个 JavaScript 文件的 HTML 文件，这些文件是本地的，但可能是外部的。现在出于某种原因（我自己的好奇心），我希望将其中一个文件的内容像字符串一样输出，并将其写入控制台甚至`alert`内容。假设我有以下名为 jsFile.js 的 JS 文件：

```
// JavaScript Document
var testString = "I am just an output... or am I",
    testNumber = 1,
    testArray = [],
    testObject = {};

// random functionality, etc... etc...
if(testNumber > 100){
    // do something...
} 
```

我想在打开我的 HTML 页面时像这样输出：

![警报图像](../Images/2615533c720bf6e50c2036c3b9b9fcaf.png)

但是我不确定如何执行此操作，我可以`SCRIPT`在 dom 中找到标签并使用其上的方法来输出它的内容（见下文）还是我必须读取文件（以某种方式）然后循环遍历收集的每一行代码它在一个变量中，然后通过`alert`或输出它`console.log`

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Hello World</title>
</head>
<script type="text/javascript" src="jsFile.js"></script>
<script type="text/javascript">

// find the JS node...
window.onload = function(){

    var theFile = document.getElementsByTagName("script")[0];

    // none of these will work as the code within the jsFile.js is not a DOM object...
    console.log(theFile.text); // returns a zero length string
    console.log(theFile.innerHTML); // returns a zero length string
    console.log(theFile.textContent); // returns a zero length string   

}

</script>
<body>
I am just a HTML file... no more, no less...
</body>
</html> 
```

以上是我的第一次尝试，但是这些方法都不起作用，因为脚本的内容不是 DOM 对象。我不需要特定于代码的答案，只需证明概念、想法或指向正确方向即可。如果我没有意义，请这么说，我会改写我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:03:14.270

您需要向该脚本的 URL 发出 AJAX 请求，并在您想要的任何位置显示内容（只需抓取`responseText`），它是服务器端资源，返回的内容将是您的 javascript :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:16:31.613

虽然[epoch](https://stackoverflow.com/users/487524/epoch)基本上已经回答了这个问题，但我被这个挑战触发了，我编写了一个小片段，将所有脚本资源转储到控制台，前提是它们位于同一域（来源）上。我已经在 Chrome 中测试过了。

```
var f = function (src) {
   var origin = location.origin || (location.protocol+'//'+location.hostname);
   if (src.substr(0, origin.length) != origin) {
      return;
   }
   x = new XMLHttpRequest();
   x.open("GET", src.substr(origin.length), true);
   x.onreadystatechange = function () {
      if (x.readyState == 4 && x.status == 200) {
         console.log(x.responseText)
      }
   };
   x.send();
};
var s = document.getElementsByTagName('script');
for (var i = 0; i < s.length; ++i) {
   f(s[i].src);
} 
```

# c# - 写入文本文件并不总是有效/保存

> ID：12142478
> 
> 赞同：0
> 
> 时间：2012-08-27T12:59:19.790
> 
> 标签：c#, filewriter

我有这段代码可以比较两个文本文件并将差异写入日志文件，但由于某种原因，log.txt 文件有时是空白的，即使是用 * 开头的某些行进行测试，这些也不总是写我有吗完成写作后保存文本文件，尽管这并不能解释为什么有时它会起作用，但任何帮助都会很棒

```
private void compare()
{
  string FilePath = @"c:\snapshot\1.txt";
  string Filepath2 = @"c:\snapshot\2.txt";
  int counter = 0;
  string line;
  string line2;

  var dir = "c:\\snapshot\\log.txt";

  using (FileStream fs = File.Create(dir))
  {
    fs.Dispose();
  }

  StreamWriter dest = new StreamWriter(dir);

  if (File.Exists(FilePath) & File.Exists(Filepath2))
  {
    // Read the file and display it line by line.
    using (var file = File.OpenText(FilePath))
    using (var file2 = File.OpenText(Filepath2))
    {
      while (((line = file.ReadLine()) != null & (line2 = file2.ReadLine()) != null))
      {
        if (line.Contains("*"))
        {
          dest.WriteLine(line2);
        }
        else if (!line.Contains(line2))
        {
          dest.WriteLine(line2);
        }
        counter++;
      }
    }
  } 
  dest.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:08:48.347

一旦您在 StreamReader 上点击 close 语句，缓冲区中剩下的所有内容都应该被写出。如果你遗漏了一些东西，那么可能是因为某种原因你没有到达那条线（即你崩溃了）。此外，如果您在写入文件时（即程序仍在运行时）尝试查看文件，您不一定会看到所有内容（因为它还没有关闭）。

通常，最好在 StreamReader 中使用 using 语句。这应该确保它总是被关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:29:10.363

不确定我是否正确理解了您的比较逻辑，但只要我将比较与整个代码分开，您就可以根据自己的需要进行调整：

```
 public static void WriteDifferences(string sourcePath, string destinationPath, string differencesPath)
    {
        var sourceLines = File.ReadAllLines(sourcePath).ToList();
        var destinationLines = File.ReadAllLines(destinationPath).ToList();            

        // make lists equal size
        if (sourceLines.Count > destinationLines.Count)
        {
            destinationLines.AddRange(Enumerable.Range(0, sourceLines.Count - destinationLines.Count).Select(x => (string)null));
        } 
        else
        {
            sourceLines.AddRange(Enumerable.Range(0, destinationLines.Count - sourceLines.Count).Select(x => (string)null));
        }

        var differences = sourceLines.Zip(destinationLines, (source, destination) => Compare(source, destination));

        File.WriteAllLines(differencesPath, differences.Where(x => x != null));
    }

    private static string Compare(string source, string destination)
    {
        return !source.Contains(destination) || source.Contains("*") ? destination : null;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:14:11.313

```
private void compare()
{
  string FileName1 = @"c:\snapshot\1.txt";
  string FileName2 = @"c:\snapshot\2.txt";
  string FileNameOutput = @"c:\snapshot\log.txt"; //dir ???
  int counter = 0; // um what's this for you aren't using it.

  using (FileStream fso = new FileStream(FileNameOutput, FileMode.Create, FileAccess.Write))
  {
    TextWriter dest = new StreamWriter(fso);
    using(FileStream fs1 = new FileStream(FileName1, FileMode.Open, FileAccess.Read))
    {
      using (FileStream fs2 = new FileStream(FileName2, FileMode.Open, FileAccess.Read))
      {
        TextReader firstFile = new StreamReader(fs1);
        TextReader secondFile = new StreamReader(fs2);
        while (((line1 = firstFile.ReadLine()) != null & (line2 = secondFile.ReadLine()) != null))
        {
          if ((line1.Contains("*") || (!line1.Contains(line2)))
          {
            dest.Write(line2); // Writeline would give you an extra line?
          }
          counter++; // 
        }
      }
    }
  fso.Flush();
} 
```

我向您推荐 FileStream 的重载。按照我的方式进行操作，如果运行它的用户没有所有必需的权限，则代码将在您实例化流时崩溃。这是一个很好的方式来展示你想要什么，你不想要什么。

PS您知道包含区分大小写和文化吗？

# android - 想知道调用 WebChromeClient#onCreateWindow 时的目标 url

> ID：12142479
> 
> 赞同：15
> 
> 时间：2012-08-27T12:59:24.233
> 
> 标签：android

当我点击带有 , 的超链接时`target="_blank"` `attributes`，`WebChromeClient#onCreateWindow`会调用但我现在找不到新窗口将打开什么网址的方法？主机页面 url 是我唯一能知道的吗？

我想根据目标 url 更改应用程序行为。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:15:34.730

# 解决了

我可以通过如下调用来获得点击的网址

```
public boolean onCreateWindow(WebView view, boolean isDialog, boolean isUserGesture, Message resultMsg) {
    WebView.HitTestResult result = view.getHitTestResult();
    int type = result.getType();
    String data = result.getExtra();
    // do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-23T06:51:54.410

也许我迟到了，但上述解决方案都不适用于 Android 10。所以我是这样做的：

```
@Override
public boolean onCreateWindow(WebView view, boolean dialog, boolean userGesture, android.os.Message resultMsg) {
    WebView newWebView = new WebView(view.getContext());
    WebView.WebViewTransport transport = (WebView.WebViewTransport) resultMsg.obj;
    transport.setWebView(newWebView);
    resultMsg.sendToTarget();
    newWebView.setWebViewClient(new WebViewClient() {
        @SuppressLint("NewApi")
        public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) {
            return shouldOverrideUrlLoading(view, request.getUrl().toString());
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView View, String url) {
            if (url != null && !url.isEmpty()) {
               // HERE IS URL WHICH YOU WANT
            }
            return false;
        }
    });
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-04T17:30:46.773

我使用以下代码：

```
public boolean onCreateWindow(WebView view, boolean isDialog, boolean isUserGesture, Message resultMsg) {
    Message href = view.getHandler().obtainMessage();
    view.requestFocusNodeHref(href);           
    var url = href.getData()?.getString("url");

    // rest of your code
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-20T06:01:09.800

以下片段将完成工作。

```
@Override
    public boolean onCreateWindow (WebView view,boolean isDialog, boolean isUserGesture, Message resultMsg){
        //The default implementation
        //return super.onCreateWindow(view, isDialog, isUserGesture, resultMsg);
        //This way you can get the URL
        String url = null;
        if (webView.getHitTestResult().getType() == WebView.HitTestResult.SRC_ANCHOR_TYPE
               || webView.getHitTestResult().getType() == WebView.HitTestResult.SRC_IMAGE_ANCHOR_TYPE) {
            url = webView.getHitTestResult().getExtra();
        }
        return true;
    } 
```

[资源](https://www.programmersought.com/article/30814057230/)

# asp.net - 引用模块中的其他 aspx 控件事件

> ID：12142481
> 
> 赞同：0
> 
> 时间：2012-08-27T12:59:34.407
> 
> 标签：asp.net, .net, vb.net

对于使用 VB 的 ASP.Net 应用程序，我如何引用不在同一文件中的事件或文本框。

例如，当您在说 Default.aspx 上进行编码并在页面上放置一个文本框时，这可以引用它。

```
Dim username As String

username = Textbox1.Text 
```

好的，但现在我想在一个单独的模块中获取值和响应并处理它（在其他任务中），比如 security.vb。

我怎样才能有效地从 security.vb 调用它所以它说 username = "Default.aspx".Textbox1.Text 我已经尝试了很多版本来实现这一点并且 Google'd 但我不知道要搜索的正确术语所以不是取得好成绩。

最接近的堆栈问题是[来自模块的参考，](https://stackoverflow.com/questions/10286559/accessing-page-controls-events-from-within-a-module)但没有答案。我知道这一定很简单，但它让我难以理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:50:37.683

另一个“模块”？你不使用类？使用类会使这很容易：

在 Default.aspx.vb

```
username = Textbox1.Text
Dim security As New Security(username) 
```

在 Security.vb 中：

```
Public Sub New(ByVal username as String)
    Me.username = username
End Sub

Private username as String 
```

然后，您可以在需要时访问 Security 类中的用户名变量。（请注意，由于用户名变量未声明为 Shared，它仅对您在 Default.aspx.vb 中创建的 Security 类的当前实例有效。您可以将其设为 Shared，但这不是一个好主意一个网络服务器，因为如果你这样做了，那意味着一次只能登录一个用户，并且每当 Bob 登录时，Alice 的会话突然开始显示 Bob 的数据！）

# xpages - 渲染视图后如何执行部分更新？

> ID：12142483
> 
> 赞同：0
> 
> 时间：2012-08-27T12:59:40.130
> 
> 标签：xpages, xpages-ssjs

我不知道这是否是一个错误......但我插入了我的 Xpages 的 AfterRestoreView 事件

```
view.postScript("RefreshActionBar('')"); 
```

在函数 Javascript RefreshActionBar 中插入以下代码：

```
alert("before")
XSP.partialRefreshGet("#{id:divActBar}",{}); 
alert("after") 
```

似乎代码工作（显示警报消息......但 XSP.partialRefreshGet() 不执行......（使用萤火虫我看不到 GET）

是正常的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:45:40.200

试试这个代码。这对我有用。:)

```
 XSP.partialRefreshGet("#{id:divActBar}", {
    onComplete: function() {
        //
    }
} 
```

# asp.net-mvc-3 - 编译器错误消息：CS0103：当前上下文中不存在名称“ViewBag”

> ID：12142486
> 
> 赞同：0
> 
> 时间：2012-08-27T12:59:44.470
> 
> 标签：asp.net-mvc-3

我已经更换了服务提供商，从那时起，只要我转到 www.greptech.co.za，我就会收到上述错误。

服务提供商正在使用 .NET 4.0，并且确实安装了最新的 MVC3 并且是最新的。

还有什么问题？我已经用谷歌搜索了这个，我已经完成了上述检查。服务提供商不知道还有什么问题。

我没有更改我的 Web.config 文件，因为它正在使用我的旧服务提供商。

网站已经关闭了很长时间。请问谁能帮忙

这是我的 web.config 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!--
      For more information on how to configure your ASP.NET application, please visit
      http://go.microsoft.com/fwlink/?LinkId=152368
      -->
    <configuration>
      <connectionStrings>
        <add name="MySqlServer" connectionString="Datasource=431.186.904.538;Port=3306;Database=grep;uid=user;pwd='XXXX';Allow User Variables=true;check parameters=false;logging=true" providerName="MySql.Data.MySqlClient" />
      </connectionStrings>

      <system.net>
        <mailSettings>
          <smtp deliveryMethod="Network" from="support@greptech.co.za">
            <network host="mail.greptech.co.za" userName="support@greptech.co.za" password="XXXX" port="25" />
          </smtp>
        </mailSettings>
      </system.net>

      <appSettings>
        <add key="ENV" value="PROD"/>
        <add key="webpages:Version" value="1.0.0.0" />
        <add key="ClientValidationEnabled" value="true" />
        <add key="UnobtrusiveJavaScriptEnabled" value="true" />
      </appSettings>

      <system.web>
        <!--   <customErrors mode="On"/> -->
        <trace enabled="true" pageOutput="false" requestLimit="40" localOnly="false" />

        <compilation debug="true" targetFramework="4.0">

          <assemblies>
            <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
          </assemblies>
        </compilation>

        <authentication mode="Forms">
          <forms loginUrl="~/Account/LogOn" timeout="2880" />
        </authentication>

       <pages>
          <namespaces>
            <add namespace="System.Web.Helpers" />
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Routing" />
            <add namespace="System.Web.WebPages" />
          </namespaces>
        </pages>
        <customErrors mode="Off"/>
      </system.web>

      <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="true" />
            <directoryBrowse enabled="true" />
            <defaultDocument>
                <files>
                    <clear />
                    <add value="Default.htm" />
                    <add value="Default.asp" />
                    <add value="index.htm" />
                    <add value="index.html" />
                    <add value="iisstart.htm" />
                    <add value="default.aspx" />
                    <add value="index.php" />
                </files>
            </defaultDocument>
              </system.webServer>

      <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
          <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
          </dependentAssembly>
        </assemblyBinding>
      </runtime>
    </configuration> 
```

好的，感谢您的回复.. 这是 ~/Views/Web.config

```
 <?xml version="1.0"?>

    <configuration>
      <configSections>
        <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
          <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
        </sectionGroup>
      </configSections>

      <system.net >
        <mailSettings>
          <smtp deliveryMethod="Network" from="support@greptech.co.za">
            <network host="mail.greptech.co.za" userName="support@greptech.co.za" password="XXXX" port="25" />
          </smtp>
        </mailSettings>
      </system.net>

      <system.web.webPages.razor>
        <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <pages pageBaseType="System.Web.Mvc.WebViewPage">
          <namespaces>
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Routing" />
          </namespaces>
        </pages>
      </system.web.webPages.razor>

      <appSettings>
        <add key="webpages:Enabled" value="false" />
      </appSettings>

      <system.web>
        <httpHandlers>
          <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
        </httpHandlers>

        <!--
            Enabling request validation in view pages would cause validation to occur
            after the input has already been processed by the controller. By default
            MVC performs request validation before a controller processes the input.
            To change this behavior apply the ValidateInputAttribute to a
            controller or action.
        -->
        <pages
            validateRequest="false"
            pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
            pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
            userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <controls>
            <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
          </controls>
        </pages>
      </system.web>

      <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />

        <handlers>
          <remove name="BlockViewHandler"/>
          <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
        </handlers>
      </system.webServer>
    </configuration> 
```

我最终回到原来的服务提供商

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:27:45.207

我想我可能知道查看调试输出发生了什么 - 这部分看起来不正确：

```
Line 12:   namespace ASP {
Line 13:       using System;
Line 14:       using System.Collections.Generic;
Line 15:       using System.IO;
Line 16:       using System.Linq;
Line 17:       using System.Net;
Line 18:       using System.Web;
Line 19:       using System.Web.Helpers;
Line 20:       using System.Web.Security;
Line 21:       using System.Web.UI;
Line 22:       using System.Web.WebPages;
Line 23:       using System.Web.WebPages.Html;
Line 24:       using WebMatrix.Data;
Line 25:       using WebMatrix.WebData;
Line 26:       
Line 27:       
Line 28:       public class _Page_index_cshtml : System.Web.WebPages.WebPage { 
```

首先，您的页面继承了 WebPages.WebPage - 这是怎么发生的？然后上面..注意到缺少 System.Web.Mvc 吗？这就是缺少“BeginForm”和“Partial”方法的错误的原因，因为它们都是 System.Web.Mvc 命名空间的一部分。以下是新的 MVC 3 项目输出对我的看法：

```
Line 12:   namespace ASP {
Line 13:       using System;
Line 14:       using System.Collections.Generic;
Line 15:       using System.IO;
Line 16:       using System.Linq;
Line 17:       using System.Net;
Line 18:       using System.Web;
Line 19:       using System.Web.Helpers;
Line 20:       using System.Web.Security;
Line 21:       using System.Web.UI;
Line 22:       using System.Web.WebPages;
Line 23:       using System.Web.Mvc;
Line 24:       using System.Web.Mvc.Ajax;
Line 25:       using System.Web.Mvc.Html;
Line 26:       using System.Web.Routing;
Line 27:       
Line 28:       
Line 29:       public class _Page_Views_Home_Index_cshtml : System.Web.Mvc.WebViewPage<dynamic> { 
```

您上面列出的配置非常好。但是 /Views 中的配置会影响视图的生成，我最好的猜测是那里有问题。这是我注意到创建或破坏视图输出的一点（这里的命名空间直接反映在生成的代码中，类似于[在 asp.net mvc 3 razor 中识别 html 助手的问题](https://stackoverflow.com/questions/5808812/problem-recognizing-html-helpers-in-asp-net-mvc-3-razor)）：

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

此时，如果您还可以添加 ~/Views/Web.config 以防这不是问题，这似乎是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:08:41.883

最终回到原来的服务提供商

# drupal-7 - Drupal 7 如何在节点中显示 $user_picture

> ID：12142487
> 
> 赞同：0
> 
> 时间：2012-08-27T12:59:47.320
> 
> 标签：drupal-7, drupal-theming

我正在使用的主题（Plasma）在设置中有一个选项来显示用户的个人资料图片，但是当我选择它时，它只在评论中显示图片。

当我查看主题中的 node.tpl.php 时，它不会输出 $user_picture 变量。

因此，我尝试自己在标签下方添加此变量，就像`<header>`在 comment.tpl.php 中一样，但图像显示在帖子上方，而不是与左对齐内联。

我尝试将 $user_picture 包装进去，`<align=left> </align>`但这不起作用。

那么如何将图片显示为与围绕用户个人资料图片的帖子的标题和文本左对齐。

谢谢西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:03:29.860

如果您使用 Plasma 主题，这是解决方案，但它可能适用于大多数主题。

在 Theme 文件夹中编辑 CSS 文件并添加以下代码

```
.node .user-picture{
float: left;
padding: 4px;
border: 1px solid #d9d9d9;
margin-right: 7px;
margin-bottom: 7px;
}

.content .user-picture{
float: left;
padding: 4px;
border: 1px solid #d9d9d9;
margin-right: 7px;
margin-bottom: 7px;
} 
```

然后在您的 node.tpl.php 中添加以下内容 `print render($content);`

```
print $user_picture; 
```

这会将用户图片放在每个节点和预告片内容的左上角。您仍然可以在主题设置中关闭用户个人资料图片。

# java - 正确逐渐减小网格中的值

> ID：12142488
> 
> 赞同：0
> 
> 时间：2012-08-27T13:00:04.380
> 
> 标签：java, grid, minecraft

我正在制作一个在玩 Minecraft 时使用的程序，它是一个模拟地板的网格，我想要做的是能够点出障碍物和灯光，并计算哪些“块”可以获得足够的光。这是一个规划工具，因此您可以概览地板并通过足够的闪电制作漂亮的东西。

我可以点出障碍物和灯光，创建正确的传播，但我的问题在于我想用这个程序解决的问题的性质，我搞砸了很多，必须重做所有事情，所以我希望能够移除灯光当然，还有光会发出的光。

点出灯光时的灯光计算代码。

```
public void changeLightUp(int light)
    {           
        //no light left, return
        if(light == 0)
            return;

        //not a source or block, change light
        if(type == 0)
        {
            //light is greater, return
            if(lightLevel >= light)             
                return;
            lightLevel = light;
        }
        //solid block, ignore
        else if(type == 1)
            return;

        if(xCoord != main.gridSizeX - 1)
            main.grid[xCoord + 1][yCoord].changeLightUp(light-1);
        if(xCoord > 0)
            main.grid[xCoord - 1][yCoord].changeLightUp(light-1);
        if(yCoord != main.gridSizeY - 1)            
            main.grid[xCoord][yCoord + 1].changeLightUp(light-1);
        if(yCoord > 0)              
            main.grid[xCoord][yCoord - 1].changeLightUp(light-1);
    } 
```

所以它的作用是：我检查是否有剩余的光（该方法是递归的，所以我将光发送到下一个块，减 1），然后我检查它是否是一个“地板”块，只要新的光更大 - 更新。如果它不是障碍物，我将光（减 1）发送到四个相邻的块，直到一切都完成。

我想不出一个“倒退”的好方法，这不可能是这类问题的第一个问题，所以我相信答案就在那里！不知道要搜索什么。对不起，如果答案遍布整个网络:)

编辑：似乎我对实际问题还不够清楚。网格由“块”组成，每个块都有自己的光照级别。当一个源被添加到网格中时，它会向它的邻居“发射”光，这是通过代码片段中可以看到的递归方法完成的。问题是当我要删除一个块时，我不知道如何以正确的方式移除光，很容易简单地计算出被光源“击中”但不包含在内的块考虑到附近可能存在其他来源，因此如果我将所有内容都设置为 0，那么光照水平将是错误的。希望可以解决问题，再次感谢所有回答我问题的真棒人 <3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:06:49.153

我认为有两种解决方案：

*   您可以将`lightSourceId`属性添加到您的块类。这样，就可以找到刚刚关闭的光源所点亮的所有块
*   每次更改（添加/删除/移动）任何光源时，您都可以重新计算所有网格。

# android - 不理解 powertutor 中提供的常量

> ID：12142491
> 
> 赞同：0
> 
> 时间：2012-08-27T13:00:14.540
> 
> 标签：android, constants

我刚刚浏览了powertutor源代码，发现了许多与WiFi、CPU和LCD组件相关的常量。我可以理解流程但不了解这些常量。我很想知道这一点。这些常数是从哪里得出的？标准值是多少？等等。请指向我可以获得这些信息的链接。请回复。

更新：

以下方法在 dreamConstants 文件中。他们从哪里得到这些常数？他们从哪个文件中读取它？

```
public double wifiHighPower() {
    return 720;
  }

  public double wifiLowHighTransition() {
    return 15;
  }

  public double wifiHighLowTransition() {
    return 8;
  }

  private static final double[] arrayWifiLinkRatios = {
    47.122645, 46.354821, 43.667437, 43.283525, 40.980053, 39.44422, 38.676581,
    34.069637, 29.462693, 20.248805, 11.034917, 6.427122
  };

  private static final double[] arrayWifiLinkSpeeds = {
    1, 2, 5.5, 6, 9, 11, 12, 18, 24, 36, 48, 54
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:31:35.753

如果您引用从 Proc/文件系统中引出信息的常量，它们通常是特定于设备的。因此，您必须以艰难的方式去做。打开文件浏览器，在文件系统中搜索常量并将它们添加到应用程序中。

据我所知，这正是 PowerTutor 的开发人员所做的。其中一些约束是“常识”，但你不能依赖它。总是有另一个设备...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T02:11:46.560

那些常数；例如 wifiHighPower 函数中的 720 (mw) 是在 HTC G1 上测量的估计功耗。实际上，PowerTutor 最初只为 HTC G1 构建了一个电源模型，它会导致其他手机的错误率很高。因此，如果您想为您的手机应用 powertutor，您需要使用 PowerTutor 论文中描述的电源建模技术为您的手机构建一个新的电源模型。因此，您将获得适合您手机的常量。

# jquery - 传入 when() 的延迟函数是异步运行还是同步运行？

> ID：12142495
> 
> 赞同：1
> 
> 时间：2012-08-27T13:00:27.210
> 
> 标签：jquery

可以说我有以下代码：

```
$.when(func1(),funct2(),func3())
 .done(...)
 .fail(...); 
```

我想知道这些函数是否会立即被调用，如果 jQuery 会在它们被解析时连续调用它们。根据文档，它们似乎将异步运行：

> 在将多个 Deferred 对象传递给 jQuery.when 的情况下，该方法从一个新的“主” Deferred 对象返回 Promise，该对象跟踪它已传递的所有 Deferred 的聚合状态。
> 
> ...
> 
> 在多个 Deferred 的情况下，其中一个 Deferred 被拒绝，jQuery.when 立即为其主 Deferred 触发 failCallbacks。请注意，此时某些 Deferreds 可能仍未解决。

我读到的方式是 func1、func2 和 func3 都会立即被触发，并且返回的主延迟对象将处理调用正确的回调函数，但是每当检测到第一个拒绝（）时，失败（）回调将立即开火。我对此的理解是正确的还是有什么我遗漏的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:59:41.127

你的理解是正确的。

只有当*所有*对象都被解析时`done`才会调用回调。*`Deferred`*

 *另一方面，`fail`一旦*任何* `Deferred`对象被拒绝，回调就会被调用，而不管`Deferred`传递给的对象的状态如何`$.when()`。

换句话说，它就像一个短路`AND`运算符。*

# python - 在 Google App Engine 中的 for 循环中查询的有效方法？

> ID：12142496
> 
> 赞同：2
> 
> 时间：2012-08-27T13:00:35.413
> 
> 标签：python, google-app-engine, google-cloud-datastore

在 GAE 文档中，它指出：

> 因为每个 get() 或 put() 操作调用一个单独的远程过程调用 (RPC)，所以在循环内发出许多这样的调用是一次处理实体或键集合的低效方法。

谁知道我的代码中还有多少其他低效率，所以我想尽可能地减少。目前，我确实有一个 for 循环，其中每次迭代都有一个单独的查询。假设我有一个用户，一个用户有朋友。我想为用户的每个朋友获取最新的更新。所以我拥有的是该用户的朋友的数组：

```
for friend_dic in friends:
        email = friend_dic['email']
        lastUpdated = friend_dic['lastUpdated']
        userKey = Key('User', email)
        query = ndb.gql('SELECT * FROM StatusUpdates WHERE ANCESTOR IS :1 AND modifiedDate > :2', userKey, lastUpdated)
        qit = query.iter()
        while (yield qit.has_next_async()):
           status = qit.next()
           status_list.append(status.to_dict())
raise ndb.Return(status_list) 
```

有没有更有效的方法来做到这一点，也许以某种方式将所有这些批处理到一个查询中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T20:28:27.820

尝试查看 NDB 的地图功能：[https ://developers.google.com/appengine/docs/python/ndb/queryclass#Query_map_async](https://developers.google.com/appengine/docs/python/ndb/queryclass#Query_map_async)

示例（假设您将您的朋友关系保存在单独的模型中，对于这个示例，我假设了一个`Relationships`模型）：

```
@ndb.tasklet
def callback(entity):
  email = friend_dic['email']
  lastUpdated = friend_dic['lastUpdated']
  userKey = Key('User', email)
  query = ndb.gql('SELECT * FROM StatusUpdates WHERE ANCESTOR IS :1 AND modifiedDate > :2', userKey, lastUpdated)
  status_updates = yield query.fetch_async()
  raise ndb.Return(status_updates)

qry = ndb.gql("SELECT * FROM Relationships WHERE friend_to = :1", user.key)
updates = yield qry.map_async(callback)
#updates will now be a list of status updates 
```

# 更新：

更好地理解您的数据模型：

```
queries = []
status_list = []
for friend_dic in friends:
  email = friend_dic['email']
  lastUpdated = friend_dic['lastUpdated']
  userKey = Key('User', email)
  queries.append(ndb.gql('SELECT * FROM StatusUpdates WHERE ANCESTOR IS :1 AND modifiedDate > :2', userKey, lastUpdated).fetch_async())

for query in queries:
  statuses = yield query
  status_list.extend([x.to_dict() for x in statuses])

raise ndb.Return(status_list) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:39:51.607

您可以使用 ndb 异步方法同时执行这些查询：

```
from google.appengine.ext import ndb

class Bar(ndb.Model):
   pass

class Foo(ndb.Model):
   pass

bars = ndb.put_multi([Bar() for i in range(10)])
ndb.put_multi([Foo(parent=bar) for bar in bars])

futures = [Foo.query(ancestor=bar).fetch_async(10) for bar in bars]
for f in futures:
  print(f.get_result()) 
```

这会启动 10 个并发 Datastore Query RPC，总体延迟仅取决于最慢的一个，而不是所有延迟的总和

另请参阅官方[ndb 文档](https://developers.google.com/appengine/docs/python/ndb/async)以获取有关如何使用 ndb 异步 API 的更多详细信息。

# iphone - UIimageView 围绕另一个 UIImageView 的中心点旋转

> ID：12142498
> 
> 赞同：0
> 
> 时间：2012-08-27T13:00:49.400
> 
> 标签：iphone, objective-c, ios

我有两张图片。一个图像是矩形第二个是三角形我想使用一根手指或触摸事件从矩形图像的中心点旋转三角形图像。

![http://i.stack.imgur.com/6zilY.png](../Images/427a78c92763dfa24749e4aa57ff6495.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:08:18.883

好吧，如果您希望图像围绕矩形中心点在任意大小的圆圈中旋转，那么数学将变得相当复杂，但一个好的开始是定义三角形图像视图的锚点，例如

```
#import <QuartzCore/QuartzCore.h>
#define degreesToRadians(x) (M_PI * x / 180.0)

[[triangleImageView layer] setAnchorPoint:CGPointMake:(0.5,0.0)];
[UIView animateWithDuration:1.0 animations:^{
    [triangleImageView setTransform:CGAffineTransformMakeRotation(degreesToRadians(90))];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:15:37.293

最后我发现我必须使用`[view.layer setAnchorPoint:CGPointMake(0.5, 0.5)]` 它并解决了我的问题。

# java - Cascade.ALL 有效，但 CascadeType.PERSIST 不用于保存新实体

> ID：12142503
> 
> 赞同：1
> 
> 时间：2012-08-27T13:01:02.420
> 
> 标签：java, hibernate

我有以下实体：

```
Channel

@ManyToOne(cascade = { CascadeType.ALL })
@JoinColumn(name = "campaign_business_id")
private CampaignBusiness campaignBusiness;

@ManyToOne(cascade = { CascadeType.ALL })
@JoinColumn(name = "campaign_id")
private Campaign campaign;

Campaign

@ManyToOne(cascade = { CascadeType.ALL })
@JoinColumn(name = "event_id")
private Event event;

CampaignBusiness 
@ManyToOne
@JoinColumn(name = "campaign_id")
private Campaign campaign; 
```

我只想使用**Cascade.PERSIST** - 因为我希望在 casacde 时更新记录而不是删除。

但是，当我写*而不是*Cascade.ALL**时**，**Cascade.PERSIST**并使用以下代码：

```
Event event = new Event();
Campaign campaign = new Campaign();
campaign.setEvent(event);
CampaignBusiness campaignBusiness = new CampaignBusiness();
campaignBusiness.setCampaign(campaign);
Channel channel = new Channel();
channel.setCampaign(campaign);
channel.setCampaignBusiness(campaignBusiness);
channelDAO.save(channel); 
```

我得到一个例外

> org.hibernate.TransientObjectException：对象引用了一个未保存的瞬态实例 - 在刷新之前保存瞬态实例：

# cocoa - 我应该在我的 NSTableViewDataSource / NSOutlineViewDataSource 中缓存值吗

> ID：12142505
> 
> 赞同：1
> 
> 时间：2012-08-27T13:01:15.760
> 
> 标签：cocoa

我提供一个`NSOutlineViewDataSource`. 表的数据是从数据库中取出的。正在进行少量处理，但不多。

我正在计算`outlineView: objectValueForTableColumn: byItem:`调用的值，而不是存储在我返回的对象中，`outlineView: child: ofItem:`因为数据可能经常更改。

从最初的调查来看，`NSOutlineView`并没有做太多多余的回调（即两次要求同一行）。我了解表模型的工作原理，并且我确实希望当数据集达到一定大小时它会做一些这样的事情。

我应该期待大量的冗余调用（在这种情况下我应该尝试缓存数据）还是它本身会进行合理数量的缓存？*每次*一个单元格离开屏幕然后返回时它都会调用吗？

是否缓存或重新计算的决定是在我希望`objectValueForTableColumn`为给定单元调用的频率之间取得平衡。对于走哪条路是否有共识？或者是给定数据集的反复试验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:00:42.017

这是一个很好的问题，与我目前正在编码的领域相匹配。我自己的 tableview 从 sqlite3 数据库读取数据，所以我**选择**缓存数据（我的行数可以从 1 到几百万不等）。

我的缓存对象还包含*上次访问的时间*值，这样当缓存变得太大时，我可以清理缓存。

我面临的最大问题之一是我需要`SELECT`根据用户的搜索/排序要求来处理我的数据，`NSTableViewDataSource`并且没有向我提供有关当前可用行的信息。我想我需要子类化那个傻瓜来添加信息。

# ruby-on-rails - 未通过活跃商家收到贝宝通知

> ID：12142513
> 
> 赞同：0
> 
> 时间：2012-08-27T13:01:30.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal-ipn, activemerchant

我正在开发一个需要使用 ipn 的应用程序，但它似乎效果不佳。

我正在尝试在成功操作中获取通知，并在贝宝沙箱中指定了正确的 url。

```
def success
        topup = current_user.topups.last
        logger.debug "topup -------->"
        logger.debug topup.amount.to_i
        # raise request
        details = EXPRESS_GATEWAY.details_for(topup.express_token)
        logger.debug "details ------->"
        logger.debug details.payer_id
        # raise params[:payer_id]
        response = EXPRESS_GATEWAY.purchase(topup.price_in_cents,{
          :ip               => request.remote_ip,
          :token            => topup.express_token,
          :payer_id         => details.payer_id
        })

        logger.debug "Response starts here --------->"
        logger.debug response

        if response.success?
            amount = topup.amount.to_i
            current_user.credits = current_user.credits.to_i +  amount
            current_user.save!
            flash[:success] = "Thank you for the top up"
            # @account_history = current_user.account_histories.build
            # @account_history.update_attribute(:type => "Top Up", :details => "", :amount => amount, :user_id => current_user.id)
            redirect_to current_user

            notify = Paypal::Notification.new request.raw_post

            logger.info "Notifying --------->"
            logger.info notify
            logger.info notify.status
            logger.info "Notifying 2 --------->"
            logger.info notify.acknowledge

            logger.debug notify.status

            if notify.acknowledge
                logger.debug "Notifying --------->"
                logger.debug notify.mc_gross
                logger.debug notify.txn_id
            end

        else
            redirect_to root_url
        end

    end 
```

notify.acknowledge 不返回任何内容（为空白）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:28:34.410

在敲了很长时间之后，我能够解决这个问题。发布我的解决方案以防万一有人陷入类似情况：-

一件重要的事情是 IPN 将发布数据发送到 IPN 侦听器，因此请确保您为此定义了一个路由。

我也有一个`before_filter :authenticate_user!`，因此我得到了 html 代码 401。必须在过滤器之前跳过通知操作。

```
def pay_with_account
        topup = Topup.find(params[:id])
        response = EXPRESS_GATEWAY.setup_purchase(topup.price_in_cents,{
          :ip                => request.remote_ip,
          :currency_code     => 'GBP',
          :return_url        => topups_success_url(topup),
          :notify_url        => topups_notify_url(topup),
          :cancel_return_url => topups_cancel_url(topup),
          # :allow_guest_checkout => true,
          :items => [{:name => "Topup", :quantity => 1,:description => "Top up my account", :amount => topup.price_in_cents}]
        })
        topup.update_attribute :express_token, response.token
        redirect_to EXPRESS_GATEWAY.redirect_url_for(response.token)
    end 
```

这是返回网址：-

```
def success
        topup = current_user.topups.last
        details = EXPRESS_GATEWAY.details_for(topup.express_token)
        response = EXPRESS_GATEWAY.purchase(topup.price_in_cents,{
          :ip               => request.remote_ip,
          :currency_code    => 'GBP',
          :token            => topup.express_token,
          :payer_id         => details.payer_id
        })

        if response.success?
            amount = topup.amount.to_i
            current_user.credits = current_user.credits.to_i +  amount
            current_user.save!
            redirect_to user_payments_path(current_user)
            flash[:success] = "Your transaction was successfully completed"
        else
            flash[:error] = "Your transaction could not be compelted"
            redirect_to user_payments_path(current_user)
        end

    end 
```

这是通知网址：-

```
def notify
        notify = Paypal::Notification.new(request.raw_post) 

        if notify.acknowledge
            @account_history = topup.user.account_histories.build
            @account_history.update_attributes(:payment_type => "Top up",:status => notify.status, :amount => notify.gross)
            if params[:payer_status] == "verified"
                @account_history.update_attributes(:details => "Pay Pal #{@account_history.id}")
            elsif params[:payer_status] == "unverified"
                @account_history.update_attributes(:details => "Credit Card #{@account_history.id}")
            end
            @account_history.save
        end

         render :nothing => true
    end 
```

路线：-

```
 get "topups/pay_with_account"
  get "topups/pay_without_account"
  get "topups/success"
  get "topups/cancel"
  get "topups/notify"
  post "topups/notify 
```

# content-management-system - Silverstripe - 手动将模板分配给控制器

> ID：12142517
> 
> 赞同：0
> 
> 时间：2012-08-27T13:01:52.317
> 
> 标签：content-management-system, silverstripe

目前我正在使用带有 Director 规则的自定义 Silverstripe 控制器：

```
---
Name: myroutes
After: framework/routes#coreroutes
---
Director:
  rules:
    'category/$Action/$Slug': 'Category_Controller' 
```

控制器看起来像这样：

```
class Category_Controller extends Page_Controller {
    public function show($arguments) {
       echo "Slug: " . $arguments->param("Slug");
   }
} 
```

当我在浏览器中打开 URL [http://mysite.com/category/show/mobile](http://mysite.com/category/show/mobile) 时，输出看起来像这样：“Slug：mobile”。

我只是想知道如何使用文件夹“主题/模板/布局”中的 Category.ss 模板来呈现输出。然后当然也应该包含来自 Page.ss 的容器 html（带有页眉/页脚）。就像往常一样，当您在布局文件夹中有自定义页面控制器/类和相应的模板时。

我刚试过这个：

```
public function show($arguments) {
    echo $this->renderWith("Category");
} 
```

它使用 Category.ss 来呈现输出，但没有容器 html...

感谢您的帮助。问候，弗洛里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:32:13.620

您也可以将数组传递给`renderWith()`，它会尝试遍历数组，直到找到模板。

所以假设`$this->renderWith(array('Category', 'Page'));` 它会首先查找一个名为 的模板 `Category.ss`，但不会找到它（在模板文件夹中，而不是布局文件夹中），然后它会找到`Page.ss`并使用它。现在它进入`$Layout`内部`Page.ss`并再次检查 Layout 文件夹中的数组，它现在会找到`Category.ss`，如果我的问题正确，这正是您要寻找的东西。

如果您不想这样做，`return $this->renderWith();`您也可以这样做`return $this;`，silverstripe 将获取您调用的操作和 $this 的类层次结构，并将其用作数组`renderWith()`

因此，如果您的类是数组，则`Category_Controller > Page_Controller > ContentController`该数组将如下所示：

```
array(
    'Category_show', // because your action is show
    'Category',
    'Page_show',
    'Page',
    'ContentController_show',
    'ContentController',
) 
```

（我不是 100% 确定它是否还包括 Page_show 和 ContentController_show。）

# combobox - 组合框清除值问题

> ID：12142518
> 
> 赞同：23
> 
> 时间：2012-08-27T13:01:54.917
> 
> 标签：combobox, javafx-2, javafx-8, selectionmodel

我偶然发现了 javafx2.2 中 Comboboxes 的问题。这是场景：

*   用户单击“editFile”按钮。
*   另一个窗格变得可见（使用 setVisible 方法）。

此窗格包含 6 个组合框。其中三个有固定项目：cboReport、cboSales、cboSend。其中三个从 db (ObservableList) 获取数据并在窗格可见时填充：cboFile、cboCustomer、cboVet

*   用户从 cboFile 中选择一个文件号。其余的组合框正在设置正确的值。
*   用户按下保存按钮，文件按预期保存。
*   接下来，用户按下关闭按钮。

当窗口关闭时，窗格上的数据通过 resetGUI_editFilePane() 方法重置。有这样的行：

```
...
cboReport.getSelectionModel().clearSelection();
cboSales.getSelectionModel().clearSelection();
cboSend.getSelectionModel().clearSelection();
cboFile.getSelectionModel().clearSelection();
cboCustomer.getSelectionModel().clearSelection();
cboVet.getSelectionModel().clearSelection();

cboFile.getItems().clear();
cboCustomer.getItems().clear();
cboVet.getItems.clear();
... 
```

当用户通过按下“editFile”按钮再次打开窗格时，我注意到只有“固定项目”组合框已清除其选择，动态填充的组合框显示最后选择的项目，尽管选择本身的值为`null`. 这对我来说看起来像是一个图形错误，还是我做错了什么？

有没有办法解决这个问题或者重置组合框的最佳方法是什么？

**编辑 2014/08/27：**
这正式不是错误（clearSelection() 不清除值）：
[https ://bugs.openjdk.java.net/browse/JDK-8097244](https://bugs.openjdk.java.net/browse/JDK-8097244)

官方的“解决方法”是清除选择后清除ComboBox的值。

```
cb.getSelectionModel().clearSelection();
// Clear value of ComboBox because clearSelection() does not do it
cb.setValue(null); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-12-06T09:48:44.853

这很简单。您只需要使用 ComboBox 的 value 属性。干得好 ....

```
ComboBox c;
c.valueProperty().set(null); 
```

我希望这对你有用:-D

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-09T19:26:28.290

I ran into nearly the exact same situation and came across your question while looking for a solution. Fortunately, I came up with a workaround that forces the ComboBoxes to reset. When you reset the data on your pane, instead of doing something like:

```
cboVet.getSelectionModel().clearSelection();
cboVet.getItems.clear(); 
```

do something like this...

```
parentNode.getChildren().remove(cboVet);
cboVet = new ComboBox();  // do whatever else you need to format your ComboBox
parentNode.add(cboVet); 
```

You'll also need to do a setItems() again on your ComboBox so the new one will be populated. This is not an ideal solution but it seems to be working as I expect the provided clearSelection() method would.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-06T14:43:42.427

您可以检索这些项目并将它们全部删除：

```
cboVet.getItems().removeAll(cboVet.getItems()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T17:09:20.183

我刚刚使用 Java JDK 1.7.11 测试了一个可行的解决方案：

```
combobox.setSelectedItem(null);
combobox.setValue(null); 
```

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T15:39:56.630

我使用反射直接操作 ComboBox 皮肤中的 buttonCell 字段：

```
@SuppressWarnings({ "rawtypes", "unchecked" })
public static <T> void resetComboBox(ComboBox<T> combo) {
    Skin<?> skin = combo.getSkin();
    if(skin==null){
        return;
    }
    combo.setValue(null);
    Field buttonCellField;
    try {
        buttonCellField = skin.getClass().getDeclaredField("buttonCell");
        buttonCellField.setAccessible(true);
        ListCell buttonCell = (ListCell) buttonCellField.get(skin);
        if(buttonCell!=null){
            StringProperty text = buttonCell.textProperty();
            text.set("");
            buttonCell.setItem(null);
        }
    } catch (NoSuchFieldException 
            | SecurityException 
            | IllegalArgumentException 
            | IllegalAccessException e) {
        e.printStackTrace();
    }

} 
```

我认为也可以通过 buttonCellFactory 属性提供自己的 buttonCell 实现

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T16:17:46.713

我对组合框有同样的问题。当我更改 ComboBox 的项目时，ComboBox 的 buttonCell 未正确更新。这看起来像一个图形错误。

我使用 ComboBox 中 buttonCell 字段的直接操作。

```
combo.getButtonCell().setText("");
combo.getButtonCell().setItem(null); 
```

这是我在不重新创建 ComboBox 的情况下找到的最佳解决方案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-08T16:32:36.573

要清除 SelectionModel 我发现没有比创建 Combobox 的新实例更好的了（以前的答案更新）：

```
myParentNode.getChildren().remove(myCombobox);
myCombobox = new ComboBox();
myParentNode.add(myCombobox); 
```

但是这个解决方案会产生其他问题：如果你使用 fxml，这个组合框将被放置在错误的位置和错误的参数。一些 fxml 参数很难直接从您的控制器类代码中复制，每次您需要清除组合框时都这样做很糟糕。

解决方案是使用自定义组件，而不是直接在主控制器类代码中创建实例，即使这些组件是标准的。这也有助于释放主控制器类中的某些行，方法是将组件相关的事件方法和其他方法移动到单独的类文件中，在其中使用对主控制器类的引用。

如何在 JavaFX FXML 应用程序中创建自定义组件可以在[http://docs.oracle.com/javafx/2/fxml_get_started/custom_control.htm](http://docs.oracle.com/javafx/2/fxml_get_started/custom_control.htm)中找到，但请注意，如果您的应用程序中的每个自定义组件都不需要 CustomControlExample 类，则它已经有一个带有 start(Satge stage) 方法的入口点类。

如何解决从自定义组件控制器类到主控制器类的引用可能出现的错误可以在[JavaFx 中找到：如何从 CustomComponentController 类中引用主控制器类实例？](https://stackoverflow.com/questions/17550578/javafx-how-to-reference-main-controller-class-instance-from-customcomponentcont/17578461#17578461)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-03T19:20:04.287

我需要清除组合框的选择。这段代码对我有用：

```
 List<Object> list = new ArrayList<>(comboBox.getItems());
 comboBox.getItems().removeAll(list);
 comboBox.getItems().addAll(list); 
```

# opengl-es - 省略缓冲区中的顶点列表

> ID：12142526
> 
> 赞同：0
> 
> 时间：2012-08-27T13:02:19.227
> 
> 标签：opengl-es, opengl-es-2.0

我有一个缓冲区，其中包含我用于的顶点信息`glDrawArrays`。缓冲区中的三角形作为精灵在屏幕周围隔开。我想以某种方式省略绘制其中一些项目，而不必更新整个缓冲区。

有什么办法可以修改顶点，以便在遇到它们时不会绘制任何内容？我不希望完全删除它，因为这涉及再次更新整个缓冲区。

*我的目标是一些仅支持 OpenGL ES 2.0 的设备。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:20:48.353

您可以使用 glDrawElements 并提供索引缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:12:36.100

`glDrawArrays`有`offset`和`count`参数。您可以使用这些参数仅绘制缓冲区中可见的元素。这导致`glDrawArray`对单个缓冲区的多次调用。

另一种选择是使用`discard`片段着色器中的命令跳过着色器中的三角形。在这种情况下，您必须提供有关哪些三角形需要渲染到着色器的信息（例如通过制服）

# jquery - jquery“固定”鼠标位置

> ID：12142535
> 
> 赞同：2
> 
> 时间：2012-08-27T13:03:27.970
> 
> 标签：jquery, mouse

我正在使用以下代码来获取鼠标位置：

```
$(window).mousemove(function(e) { mouseY = e.pageY; }); 
```

我想要实现的是获得相对于窗口的 X 坐标，这意味着单击左上角，即使滚动，也应该给出 1 而不是滚动给出的任何其他更大的数字。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:08:38.567

如果您已经拥有相对于文档的 y 坐标，则只需[`$(window).scrollTop()`](http://api.jquery.com/scrollTop/)从中减去即可获得相对于窗口的 y 坐标。

```
$(window).mousemove(function(e) { 
    var mouseY = e.pageY - $(window).scrollTop();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:12:35.813

`pageY`给出事件相对于页面的位置，同时`clienty`给出它相对于视口的位置。因此，出于您的目的，您需要使用`e.clientY`. 看看[Ben Nadel](http://www.bennadel.com/blog/1869-jQuery-Mouse-Events-PageX-Y-vs-ClientX-Y.htm)的文章。

# html - 如何使输入类型=文件应该只接受pdf和xls

> ID：12142536
> 
> 赞同：135
> 
> 时间：2012-08-27T13:03:28.343
> 
> 标签：html, forms

我用了`<input type= "file" name="Upload" >`

现在我想通过只接受 .pdf 和 .xls 文件来限制这一点。

当我单击提交按钮时，它应该验证这一点。

当我点击网页上的文件（PDF/XLS）时，它应该会自动打开。

任何人都可以为此举一些例子吗？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-08-27T13:10:00.933

您可以通过使用该属性`accept`并向其添加允许的 mime 类型来做到这一点。但并非所有浏览器都尊重该属性，并且可以通过某些代码检查器轻松删除它。因此，无论哪种情况，您都需要检查服务器端的文件类型（您的第二个问题）。

例子：

```
<input type="file" name="upload" accept="application/pdf,application/vnd.ms-excel" /> 
```

对于您的第三个问题“当我单击网页上的文件（PDF/XLS）时，它应该会自动打开。”：

你无法做到这一点。如何在客户端计算机上打开 PDF 或 XLS 由用户设置。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2017-06-02T14:51:53.617

你可以使用这个：

**HTML**

```
<input name="userfile" type="file" accept="application/pdf, application/vnd.ms-excel" /> 
```

只支持。**PDF**和 . **XLS**文件

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-27T13:12:46.753

不幸的是，在选择时没有保证的方法。

*一些*浏览器支持标签的`accept`属性。`input`这是一个好的开始，但不能完全依赖。

> ```
> <input type="file" name="pic" id="pic" accept="image/gif, image/jpeg" /> 
> ```

您可以使用 a`cfinput`并运行验证来检查提交时的文件*扩展名*，但不能检查 mime 类型。这更好，但仍然不是万无一失的。OSX 上的文件通常没有文件扩展名，否则用户可能会恶意错误地标记文件类型。

ColdFusion可以使用结果 ( )`cffile`的属性检查 mime 类型，但这只能在上传*后完成。*这是您最好的选择，但仍然不是 100% 安全，因为 mime 类型仍然可能是错误的。`contentType``cffile.contentType`

 ** * *

## 回答 #4

> 赞同：14
> 
> 时间：2020-10-07T14:39:38.547

**您可以尝试以下方式**

```
<input type= "file" name="Upload" accept = "application/pdf,.csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"> 
```

**或（在 asp.net mvc 中）**

```
@Html.TextBoxFor(x => x.FileName, new { @id = "doc", @type = "file", @accept = "application/pdf,.csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" }) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-05-07T22:22:27.840

你可以使用 JavaScript。考虑到使用 JavaScript 执行此操作的最大问题是重置输入文件。好吧，这仅限于 JPG（对于 PDF，您必须更改[mime 类型](https://en.wikipedia.org/wiki/Internet_media_type)和[幻数](https://en.wikipedia.org/wiki/List_of_file_signatures)）：

```
<form id="form-id">
  <input type="file" id="input-id" accept="image/jpeg"/>
</form>

<script type="text/javascript">
    $(function(){
        $("#input-id").on('change', function(event) {
            var file = event.target.files[0];
            if(file.size>=2*1024*1024) {
                alert("JPG images of maximum 2MB");
                $("#form-id").get(0).reset(); //the tricky part is to "empty" the input file here I reset the form.
                return;
            }

            if(!file.type.match('image/jp.*')) {
                alert("only JPG images");
                $("#form-id").get(0).reset(); //the tricky part is to "empty" the input file here I reset the form.
                return;
            }

            var fileReader = new FileReader();
            fileReader.onload = function(e) {
                var int32View = new Uint8Array(e.target.result);
                //verify the magic number
                // for JPG is 0xFF 0xD8 0xFF 0xE0 (see https://en.wikipedia.org/wiki/List_of_file_signatures)
                if(int32View.length>4 && int32View[0]==0xFF && int32View[1]==0xD8 && int32View[2]==0xFF && int32View[3]==0xE0) {
                    alert("ok!");
                } else {
                    alert("only valid JPG images");
                    $("#form-id").get(0).reset(); //the tricky part is to "empty" the input file here I reset the form.
                    return;
                }
            };
            fileReader.readAsArrayBuffer(file);
        });
    });
</script> 
```

考虑到这是在最新版本的 Firefox 和 Chrome 以及 IExplore 10 上测试的。

[有关 mime 类型的完整列表，请参阅 Wikipedia](https://en.wikipedia.org/wiki/Internet_media_type)。

[有关幻数的完整列表，请参阅 Wikipedia](https://en.wikipedia.org/wiki/List_of_file_signatures)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-27T13:36:25.287

我会过滤服务器端的文件，因为有一些工具，例如 Firefox 上的 Live HTTP Headers，可以上传任何文件，包括 shell。人们可能会入侵您的网站。做它服务器站点，以确保安全。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-27T13:10:03.800

如果您希望文件上传控件限制用户可以通过单击按钮上传的文件类型，那么这就是方式..

```
<script type="text/JavaScript">
<!-- Begin
function TestFileType( fileName, fileTypes ) {
if (!fileName) return;

dots = fileName.split(".")
//get the part AFTER the LAST period.
fileType = "." + dots[dots.length-1];

return (fileTypes.join(".").indexOf(fileType) != -1) ?
alert('That file is OK!') : 
alert("Please only upload files that end in types: \n\n" + (fileTypes.join(" .")) + "\n\nPlease select a new file and try again.");
}
// -->
</script> 
```

然后，您可以从上述按钮的 onClick 之类的事件中调用该函数，如下所示：

> onClick="TestFileType(this.form.uploadfile.value, ['gif', 'jpg', 'png', 'jpeg']);"

您可以将其更改为：`PDF`和`XLS`

你可以在这里看到它的实现：[Demo](http://www.codestore.net/store.nsf/unid/DOMM-4Q8H9E/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-27T13:10:31.013

虽然此特定示例适用于多文件上传，但它提供了需要的一般信息：

[https://developer.mozilla.org/en-US/docs/DOM/File.type](https://developer.mozilla.org/en-US/docs/DOM/File.type)

至于在 /download/ 上对文件进行操作，这不是 Javascript 问题——而是服务器配置。如果用户没有安装任何东西来打开 PDF 或 XLS 文件，他们唯一的选择就是下载它们。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2020-11-10T10:33:48.423

试试这个： -

```
 <MyTextField
                id="originalFileName"
                type="file"
                inputProps={{ accept: '.xlsx, .xls, .pdf' }}
                required
                label="Document"
                name="originalFileName"
                onChange={e => this.handleFileRead(e)}
                size="small"
                variant="standard"
              /> 
```*

# magento - 如何在magento中创建一个仅在产品视图页面上可见的右侧边栏

> ID：12142540
> 
> 赞同：1
> 
> 时间：2012-08-27T13:03:49.810
> 
> 标签：magento

我是 magento 的新手。我想在产品视图页面上创建一个右侧边栏，使其仅在产品视图页面上可见，而在其他页面上不可见。

我该怎么做。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:43:26.977

要仅在产品页面上拥有右侧边栏，您需要做一些事情：

*   在管理面板中，将产品页面设置为 2 列和右侧边栏
*   创建一个块和模板文件（或只编辑一个可用的）
*   在catalog.xml（在您的主题的布局文件夹中）找到调用的句柄，并在该部分中找到您可以添加您的块/模板文件。

有关如何创建块和模板的更多信息，请参见[此处](http://alanstorm.com/layouts_blocks_and_templates)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:09:31.523

在magento中，几乎每个位置都由catalog.xml处理，（如果你走正确的方式）你可以放置任何静态块，在catalog.xml中你会发现每个页面的块位置（无论是类别、产品还是主页） ) 只是您需要将块放置在正确的参考中。

# android - Android：替换onclick的声音

> ID：12142541
> 
> 赞同：0
> 
> 时间：2012-08-27T13:03:53.080
> 
> 标签：android, onclick, android-mediaplayer

我有这个代码：

```
Button boton = (Button) findViewById(R.id.boton);
boton.setOnClickListener(new View.OnClickListener() {
 @Override
 public void onClick(View v) {

 }
}); 
```

当我按下按钮（在 Android 4.0.3 中）时，我会听到基本的声音（只需单击一下）；我可以用个人声音代替它吗？或者我只能使用 MediaPlayer 播放 costum 声音？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T13:07:40.413

试试这个：

```
public class MyActivity extends Activity {

public MyActivity(Bundle onSavedStateInstance) {
    MediaPlayer mp = MediaPlayer.create(this, R.raw.mamacita_zero);

    Button zero = (Button)this.findViewById(R.id.btnZero);
    zero.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mp.start();
        }
    });
} 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T13:08:31.427

您可以将声音添加到原始文件夹中，对其进行初始化

```
MediaPlayer mpSplash = MediaPlayer.create(this, R.raw.slow); 
```

并在需要的地方调用它

```
 mpSplash.start(); 
```

# dataset - 更新数据集命令

> ID：12142542
> 
> 赞同：0
> 
> 时间：2012-08-27T13:04:07.153
> 
> 标签：dataset

我有一个数据集，我正在添加新行，然后我使用以下命令更新数据集后面的数据库：

```
 DataSetReasons ds = new DataSetReasons();
      DataSetReasonsTableAdapters.Data_Tracker_RcodeTableAdapter dta = new DataSetReasonsTableAdapters.Data_Tracker_RcodeTableAdapter();

        DataSetReasons.Data_Tracker_RcodeDataTable GRX =
        new DataSetReasons.Data_Tracker_RcodeDataTable();

        DataRow rowx = GRX.NewRow();
        rowx[0] = 111;
        rowx[1] = 28;
        rowx[2] = "C";
        rowx[3] = 12;
        rowx[4] = "C";
        rowx[5] = 16;
        rowx[6] = TextBox2.Text;

        GRX.Rows.Add(rowx); //<--- adding the row

        dta.Update(GRX); //<-- updating the DB 
```

现在一切正常，除了我想将更新命令放在一个单独的按钮中。当我这样做时，数据库更新不会发生。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:13:50.557

解决了，在定义数据表之前我错过了“静态”字。

非常感谢通过这个问题的人。

# asp.net - “发布”模式下的自定义错误页面和“调试”模式下的默认错误页面

> ID：12142545
> 
> 赞同：5
> 
> 时间：2012-08-27T13:04:19.350
> 
> 标签：asp.net, asp.net-mvc, web-config

我想在项目处于生产状态（发布模式）时显示自定义错误页面，并在（调试模式）下运行页面时显示来自 asp.net 的默认错误页面。

我的项目中有三个 Web.config 文件。

*   网页配置
*   Web.Debug.config
*   Web.Release.config

这是我尝试过但没有运气的方法。

**网页配置**

```
<customErrors mode="On" defaultRedirect="~/Home/Error">
    <error statusCode="404" redirect="~/Home/Error" />
</customErrors> 
```

**Web.Debug.config**

```
<customErrors mode="Off" xdt:Transform="Replace"></customErrors> 
```

**Web.Release.config**

```
<customErrors mode="On" defaultRedirect="~/Home/Error">
    <error statusCode="404" redirect="~/Home/Error" />
</customErrors> 
```

有谁知道我该怎么做？

提前致谢 ：）

**编辑：** 阅读后，我认为这是一个已知的错误，但我无法找到解决此问题的错误。如果有人对此有更多了解，请分享。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T16:05:52.747

好的。所以我弄清楚出了什么问题。

**网页配置**

```
<customErrors mode="Off" defaultRedirect="~/Error.htm"></customErrors> 
```

**Web.Debug.config**

```
<compile debug="true" />
<customErrors mode="Off" xdt:Transform="Replace"></customErrors> 
```

**Web.Release.config**

```
<customErrors mode="On" defaultRedirect="~/Error.htm" xdt:Transform="Replace">
     <error statusCode="404" redirect="~/Error.htm" />
</customErrors> 
```

上述更改将默认禁用错误消息，并且每当项目部署在生产服务器上时，其中的设置`Web.Release.config`将覆盖默认值`Web.config`

以下是我发现有用的资源/链接列表：

*   [使用 Visual Studio web.config 转换进行调试](https://stackoverflow.com/questions/3922291/use-visual-studio-web-config-transform-for-debugging)
*   [http://sedodream.com/2010/10/21/ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx](http://sedodream.com/2010/10/21/ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx)

我希望这可以帮助其他试图完成同样事情的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:42:41.470

这是一个已知的错误。该功能现在只能作为部署过程的一部分使用。请检查下面的帖子

[如何在内置的 Visual Studio 调试器服务器中使用 Web.debug.config？](https://stackoverflow.com/questions/3305096/how-can-i-use-web-debug-config-in-the-built-in-visual-studio-debugger-server)

或者您可以只使用“默认”web.config 作为您的开发/调试版本，然后 web.release.config 当然会继续作为发布版本，因为它的转换是在您发布时应用的。

希望它会有所帮助。

# javascript - 骨干模型：保存时保持收藏

> ID：12142546
> 
> 赞同：3
> 
> 时间：2012-08-27T13:04:20.770
> 
> 标签：javascript, backbone.js

我有一个简单的 Backbone 模型，如下所示：

```
(function () {

    App.Company = Backbone.Model.extend({
        defaults: {},

        urlRoot: "/Contacts/Companies",

        initialize: function () {
            var contactPersons = this.get("ContactPersons") || [];

            this.set("ContactPersons", new App.ContactPersonCollection(contactPersons));
        }
    });

})(); 
```

每当我将模型保存到服务器时，`ContactPersons`集合都会重置为`Array`.

保存模型后，我真的有必要手动将其转换为集合吗？

**更新：这按预期工作 - 请参阅答案以获得更好的方法（恕我直言）**

```
(function () {

    App.Company = Backbone.Model.extend({
        defaults: {},

        urlRoot: "/Contacts/Companies",

        initialize: function () {
            var contactPersons = this.get("ContactPersons") || [];

            if (_.isArray(contactPersons)) {
                this.set("ContactPersons", new App.ContactPersonCollection(contactPersons));
            }
        },

        parse: function (response) {

            if (response.ContactPersons && _.isArray(response.ContactPersons)) {
                response.ContactPersons = new App.ContactPersonCollection(response.ContactPersons);
            }

            return response;
        }
    });

})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:10:06.593

当您从服务器发回数据时，您如何处理响应？例如，如果您只是发回 [{},{},{}]，我认为 Backbone 不会自动知道将其视为一个集合。因此，它将`ContactPersons`属性设置为它获得的属性，即您的香草数组。

您可以做的是在模型中覆盖您的 set 函数，该函数将传入传入的对象数组并正确写入集合。看这个例子：

```
set: function(attributes, options) {

    if (_.has(attributes, 'ContactPersons') && this.get("ContactPersons")) {
        this.get('ContactPersons').reset(attributes.ContactPersons);
        delete attributes.ContactPersons;
    }

    return Backbone.Model.prototype.set.call(this, attributes, options);
} 
```

因此，基本上只要您的服务器响应被正确命名空间（response.ContactPersons），那么在解析后它会将您的响应传递给 set 函数。集合数据被特别视为一个集合。在这里，我只是用新数据重置已经存在的集合。您的所有其他模型属性应继续传递给原始`set()`.

**更新 - 对自己的答案越来越怀疑**

我一直无法忘记这个问题/答案。它确实有效，但我越来越不相信使用修改后的`set()`内容与仅做事`parse()`会更好。`set()`如果有人对使用修改后的模型与嵌套模型之间的区别有一些评论`parse()`，我真的很欢迎输入。

# asp.net-ajax - 日历扩展器未正确显示

> ID：12142548
> 
> 赞同：8
> 
> 时间：2012-08-27T13:04:22.347
> 
> 标签：asp.net-ajax, calendarextender

我在我的页面上使用了 ajax 日历扩展器控件，虽然扩展器块显示正确，但它的内容却没有：

![CalendarExtender 截图](../Images/5008b49b535fbf8df31ec9393485e584.png)

这是我用来将其写入页面的代码：

```
<table class="tblForm">
    <tr>
        <td valign="top">
            <asp:TextBox runat="server" ID="txtPickupDate" AutoPostBack="true"></asp:TextBox>
            <aj:CalendarExtender runat="server" ID="calPickup" TargetControlID="txtPickupDate" Format="yyyy-MM-dd">
            </aj:CalendarExtender>
        </td>
    </tr>
</table> 
```

没有任何样式规则直接应用于 CalendarExtender，但我确实有这个可能相关的 css：

```
.tblForm
{
    display: block;
}
.tblForm td
{
    width: 245px;
    float: left;
} 
```

有没有人见过这个？有谁知道它可能是什么？

提前感谢您的帮助！

**编辑**
我试过删除浮动，虽然这修复了 CalendarExtender，但它也会使容器表中的每个单元格不对齐。我也尝试过设置`clear: both;`CalendarExtender，但这使它的背景消失了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:20:28.813

好的，我已经想通了：）

问题在于表格单元格的 CSS。修改单元格的宽度也修改了由日历扩展器写入的表格中的单元格的宽度。

为了解决这个问题，我删除了表格上的所有浮点数及其子元素，并声明了一个新类来设置宽度，然后我从包含日历的单元格中省略了该宽度：

```
.tblForm 
{
    display: block;
}
.tblForm tr.wider td, tblForm .wider
{
    width: 245px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T16:18:13.307

我在 ListView 对象内的日历扩展器上遇到了类似的问题。由于造型问题，它总是在周五和周六停课。我最终通过包装我的日历扩展器（包括文本框和图像）来解决它，并为它们分配一个覆盖我的表格 css 的样式。

```
#calendarContainerOverride table
{
    width:0px;
    height:0px;
}

#calendarContainerOverride table tr td
{
    padding:0;
    margin:0;
} 
```

然后在这里应用 id：

```
<tr id="calendarContainerOverride">
  <td style="padding-top:10px">    
    <asp:TextBox ID="txtStart" runat="server" %>' />
    <asp:CalendarExtender ID="extender" runat="server" Enabled="True" TargetControlID="txtStart" PopupButtonID="imgCalendarStart" />
    <asp:Image ID="imgCalendarStart" ImageUrl="~/Images/Calendar.png" runat="server"/>
  </td>
</td> 
```

使用这种方法，您不必更改所有表格的样式，只需专注于讨厌的日历即可。

# objective-c - Xcode 4.4 单元测试

> ID：12142551
> 
> 赞同：0
> 
> 时间：2012-08-27T13:04:48.970
> 
> 标签：objective-c, xcode, unit-testing, testing

第一次尝试将单元测试添加到我的 Xcode 项目中。我添加了一个测试（LogicTests.h、LogicTests.m），将它链接到 Target Dependencies 中的一个项目。之后，我创建了示例类 FDUnitTestClass，我想通过在其中添加一个简单的数学运算并将结果记录到调试控制台来对其进行测试。但我不明白这样做的正确方法。我是否需要在 FDUnitTestClass 的 .m 中定义一个方法，如果需要，我如何调用它来查看控制台的日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:44:29.707

一些可以帮助您的链接：

1.  [Xcode 单元测试指南](http://developer.apple.com/library/ios/#DOCUMENTATION/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html)
2.  [Xcode 4 快速入门指南中的单元测试](http://www.raywenderlich.com/3716/unit-testing-in-xcode-4-quick-start-guide)

# c# - 共享 EntityFramework 数据模型

> ID：12142554
> 
> 赞同：0
> 
> 时间：2012-08-27T13:05:01.393
> 
> 标签：c#, asp.net, wpf, entity-framework-4

我在我的 WPF 桌面应用程序（NS：MyCompany.MyProduct）中使用 EntityFramework 4。

现在我想在 ASP.NET (NS: MyCompany.MyProduct2) 中创建相同的应用程序，具有完全相同的功能......因此我需要使用与 WPF 应用程序完全相同的数据库。

此外，我想在我的主 WPF 项目之上创建一个新的可执行文件（因此是一个新的 wpf 项目），它也使用与 WPF / ASP.NET-Application 相同的 ConnectionString 来显示一些报告。

所以我发现我需要共享 .edmx-Model (NS: MyCompany.MyProduct.Models. *DBModel.edmx* ) 和已经在 WPF 应用程序的 app.config 或 web.config 中持久存在的 ConnectionString ASP.NET 应用程序。

最好或推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:29:44.017

> 最好或推荐的方法是什么？

创建一个类库项目并将 EF 模型放入其中并在您的 WPF/Web 项目之间共享它。库项目的 app.config 文件不会被父项目拾取，因此您必须手动更新 web.config 文件以添加该`ConnectionString`部分。

这种方法允许您在 WPF 应用程序和 Web 应用程序之间共享业务逻辑。如果它们本质上是相同的应用程序但在不同的平台上，那么您应该只重新实现 UI - 这是 MVC 模式的主要优势之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:57:44.860

在这里同意@James。不要害怕将库项目添加到您的解决方案中。因此，您将拥有一个名为 MyCompany.Model 的项目，其中包含您的 EDMX。（实际上，您稍后可能会发现您想使用 T4 生成将您的模型从 DbContext 或 ObjectContext 中分离出来，但这是[另一个讨论](http://blogs.msdn.com/b/adonet/archive/2009/05/21/poco-in-the-entity-framework-part-1-the-experience.aspx)。）

使用 Visual Studio，您实际上可以将一个项目（您的 EDMX 项目）添加到多个解决方案中。不过，在编辑一个解决方案会破坏另一个解决方案时，请注意不要对 EDMX 项目进行更改。

恕我直言，您可能会发现在这里使用 GAC 并不理想，尤其是当您的 EDMX 仍在发展时。

至于连接字符串，这些是您往往*不会*在项目之间共享的一件事。通常，它们位于可执行项目的 app.config（或 web.config）中。这可能是一个问题，因为如果您使用库项目来保存 EDMX，EF 将自动在库项目中创建一个 app.config，其中包含连接字符串。但是 .NET*从不*将 app.config 用于 DLL。它存在的唯一原因是为您提供一些可以复制/粘贴到可执行 (WPF) app.config 或 web.config 的真实 app.config 中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:27:35.027

如果您的目标是在一台机器上的所有三个应用程序之间共享单个 .edmx dll，实现此目的的最佳方法是签署 dll，然后将其添加到 GAC。如果 dll 将保留在不同的服务器上，则无需对 dll 进行 GAC，您可以在项目中引用它，并在相应的 .configs 中添加连接字符串条目。

GAC： http: [//msdn.microsoft.com/en-us/library/yf1d93sz (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yf1d93sz(v=vs.100).aspx)

将 DLL 安装到 GAC：http: [//msdn.microsoft.com/en-us/library/dkkx7f79.aspx](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)

# c# - 在终结器中处理 IDisposables 列表

> ID：12142559
> 
> 赞同：1
> 
> 时间：2012-08-27T13:05:22.313
> 
> 标签：c#, garbage-collection, unmanaged, idisposable, finalizer

我有几个用于与 c++ dll 通信的非托管内存结构。每个这样的结构都必须手动释放，所以我将它包装在`MyUnmanagedStructure`which implements`IDisposable`中。

我总是需要可变数量的这些结构，所以我有一个`MyUnmanagedStructureCollection`也实现 IDisposable 的集合。

*（请参阅下面的最小示例代码）*

只要我的图书馆的用户总是调用 Dispose() 或包装集合`using() {}`没有问题，但我不能保证。即使用户不手动处理集合，我也不想泄漏内存。

当`MyUnmanagedStructureCollection.Dispose()`垃圾收集通过终结器调用该方法时，据我所知，我不能确定我`private List<MyUnmanagedStructure>`的垃圾还没有被垃圾收集，那么在这种情况下如何处理每个结构？

在我的最终代码中，我是否应该尝试遍历列表，希望它还没有被垃圾收集？

在 try/catch 块中执行此操作并捕获 ObjectDisposedException 是否是一种好习惯？

或者我应该让每个非托管结构“自生自灭”，依靠各个终结器，而在我的集合的终结器中什么都不做？

```
public class MyUnmanagedStructureCollection : IDisposable
{
    private List<MyUnmanagedStructure> structures;
    private bool disposed = false;

    #region standard IDIsposable pattern
    public ~MyUnmanagedStructureCollection()
    {
        this.Dispose(false);
    }

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!disposed)
        {
            // Dispose unmanaged resources 
            // Should not access managed resources, 
            // the garbage collection may have claimed them already!

            // PROBLEM!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
            // this.structures is a List<MyUnmanagedStructure>; so is a managed resource!!!

            foreach (var structure in this.structures)
                 structure.Dispose(disposing)
            this.removeAllMemoryPressure();

            if (disposing) 
            {
                // Dispose managed resources.
                this.structures.Clear();
                this.structures = null;
            }

        }
        disposed = true;
    }
}

public class MyUnmanagedBuffer : IDisposable
{
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:11:19.167

GC 的工作方式是：

1.  查找所有可达对象
2.  使用终结器将所有无法访问的对象排入终结队列
3.  将所有可从终结队列中到达的对象标记为可到达
4.  释放剩余的不可达对象

从正在运行终结器的对象引用的对象还不能被垃圾回收。

唯一需要注意的是终结的顺序是未定义的。因此，列表中的元素可能尚未最终确定，但尚未收集。完成保证是单线程的，所以你也需要锁定。

人们通常会试图避免这种终结链，因为独立终结更简单。但是，如果某些对象需要在其他对象之前被处理，那么这样的构造是不可避免的。

您还应该考虑使用`SafeHandle`s.

* * *

> **可达性**
> 
> 完成的准则之一是 Finalize 方法不应触及其他对象。人们有时会错误地认为这是因为那些其他对象已被收集。然而，正如我已经解释过的，来自可终结对象的整个可达图都被提升了。
> 
> 该指南的真正原因是避免接触可能已经完成的对象。那是因为最终确定是无序的。

[克里斯布鲁姆谈定稿](http://blogs.msdn.com/b/cbrumme/archive/2004/02/20/77460.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:25:12.233

由于从`MyUnmanagedBuffer`班级的角度来看，您的班级是托管资源`MyUnmanagedStructureCollection`，因此我认为它应该这样处理。这意味着该`MyUnmanagedStructureCollection.Dispose(bool)`方法如下。

```
protected virtual void Dispose(bool disposing) {
    if (!disposed) {
        // Dispose unmanaged resources 
        // Should not access managed resources, 
        // the garbage collection may have claimed them already!

        if (disposing) {
            // Dispose managed resources.
            // This means that we try to dispose all items in the structures collection.
            if (this.structures != null) {
                foreach (var structure in this.structures) {
                    structure.Dispose(disposing);
                    this.removeAllMemoryPressure(); // What does this?
                }
                this.structures.Clear();
                this.structures = null;
            }
        }
    }

    disposed = true;
} 
```

# ruby-on-rails - 如何将数组从一个视图发送到下一个视图

> ID：12142561
> 
> 赞同：0
> 
> 时间：2012-08-27T13:05:26.660
> 
> 标签：ruby-on-rails, ruby, arrays, views, ruby-on-rails-3.2

我有一个带有 getAccounts 函数的控制器，我在其中查找某些帐户。我的想法是首先显示结果的数量，然后将结果数组发送到下一个名为 showAccounts 的函数，该函数会生成视图。首先，我将结果数组声明为实例变量。然后我尝试使用表单标签发送。它不起作用......有人有想法吗？

```
 def getAccounts
filter = '(uid='+params[:id]+')'
attrs = ['*']
@accounts=Array.new

conn = LDAP::Conn.new($HOST, $PORT)
conn.bind('cn=admin, dc=cippool-mb, dc=rwth-aachen, dc=de','DLPins!')
conn.perror("bind")

begin
  conn.search($base, $scope, filter, attrs) { |entry|
    setAttributes(entry)
  }
 rescue LDAP::ResultError
   conn.perror("search")
   exit

 end
 conn.perror("search")
 conn.unbind

end

def showAccounts

end 
```

我发送数据的视图。

```
Es wurden <%= @accounts.size %> Accounts gefunden.  

<%= form_tag :action => "showAccounts" do %>
  <%= hidden_field_tag "accounts", @accounts %>
<%= submit_tag "Anzeigen" %>

<% end %> 
```

我也可以将视图粘贴到我需要这个数组的地方，但我认为它与这个问题无关。我使用 Rails 3.2.7 和 Ruby 1.9.2p0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:16:45.533

如果你调试(@accounts) 你会看到它通过了什么——像 <#0x7187237 Array> 这不是你想要的！

如果您*真的*想传入帐户数组，则需要将其序列化为文本格式以放入隐藏字段。如果@accounts 很大，那可能是一大块数据。

也就是说，您可以将其转储为 YAML 或 JSON，或使用 Ruby 中的序列化函数之一，或将其放入您自己的自定义文本格式（不推荐）。请记住，在使用它之前，您需要在下一页上反序列化。

我假设希望将其传递到下一步的部分原因是避免昂贵的 LDAP 请求。您可能希望考虑放入一个轻量级缓存（例如 redis）来临时存储请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:44:26.370

如果您想在单独的请求之间传递大量数据，我建议您使用会话，它就是为此类事情而设计的。

# macos - 如何在 ffmpeg 库中交错音频视频

> ID：12142562
> 
> 赞同：1
> 
> 时间：2012-08-27T13:05:27.797
> 
> 标签：macos, ffmpeg, avi

我正在使用 ffmpeg 编写一个 .avi 文件。我有两个流，一个用于音频，另一个用于视频。视频的 fps 从 5 到 15 不等，音频的每秒采样数从 60 到 80 不等。

我正在使用 av_interleaved_write_frame() 来写入文件。但这太耗时了。所以我想用av_write_frame（）替换它。

但为此，我将不得不在我的代码中管理音频视频交错。我不明白我应该使用什么组合来正确交错音频视频。

任何人都可以请帮助或建议我一些示例代码。

# c# - 为什么代码从 ClassB 调用 Get()？

> ID：12142563
> 
> 赞同：2
> 
> 时间：2012-08-27T13:05:29.460
> 
> 标签：c#, oop

当我调用下面的代码行时，它从 ClassB 执行 Get()。

该对象被创建为`ClassC`，它作为带有`new`关键字的方法。理想情况下，它应该`Get()`从`ClassC`.

```
Main()
{
      ClassA obj = new ClassC();
      lbl.Text = obj.Get();
}

public class ClassA
{
  public virtual string Get()
  {
    return "from A";
  }
}

public class ClassB : ClassA
{
  public override string Get()
  {
    return "from B";
  }
}

public class ClassC : ClassB
{
  public new string Get()
  {
    return "from C";
  }
} 
```

谁能帮我找出原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:08:00.963

关键是 中的`new`关键字`ClassC`。如果对象被处理为 a ，编译器将使用它`ClassC`来掩盖原始`Get()`函数。

如果对象是`ClassA`引用，`Get()`则将作为原始对象处理`Get()`，从而导致在 中的`Get()`覆盖`ClassB`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:15:56.837

魔术称为虚拟调度。

`ClassB`覆盖`ClassA` `Get`，这意味着系统知道`ClassA`有一个具有不同实现的后代`Get`。当`Get`在 type 的引用上调用时`ClassA`，它将检查该引用是否为 fact`ClassB`或后代，并改为执行该代码。

当然，这是（有点）递归的，所以如果`ClassB`有任何后裔覆盖`Get`，那些`Get`'s 将被调用，等等......

这里的问题是`Get`定义的 in`ClassC`与and`Get`中引用的不同，而是一个全新的方法（因此是关键字），恰好具有相同的名称。`ClassA``ClassB``new`

因此，当`obj.Get()`被调用时，系统不会走得那么远，`ClassC`而只会起床`ClassB`并执行它。如果您想`ClassC.Get()`被执行，您可以将 更改`new`为`override`，或尝试通过`ClassC`引用调用它，例如`((ClassC)obj).Get()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:08:11.677

具有不同的`ClassC.Get`签名（新字符串）并且缺少覆盖，因此它不会覆盖`ClassA.Get`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:16:11.107

在这种情况下的`new`关键字是一个 hider..

这通常在您的**基类**有一个虚拟方法并且您希望与**基类**虚拟方法名称相同**而不覆盖它**的情况下使用。

如果您在派生类中声明此类方法而不覆盖基类方法和 new 关键字，编译器将生成**警告**

如果您不使用`new`修饰符，编译器会生成警告。

new 修饰符告诉编译器重复成员不是意外，因此编译器不会显示**警告**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T13:18:23.680

您可以先看看[**带有 override 和 new 的版本控制**](http://msdn.microsoft.com/en-us/library/6fawty39%28v=vs.80%29.aspx)。`ClassA`引用将从`Get()`原始类处理。由于此类型已被**覆盖**`ClassB`，因此将调用Get() of 。

`ClassC`reference 将`Get()`作为**新**方法处理，因此方法 in`ClassC`将被调用

```
static void Main(string[] args)
{
     ClassA obj = new ClassC(); 
     Console.WriteLine(obj.Get());  // will print out "from B"

     ClassC obj2 = new ClassC(); 
     Console.WriteLine(obj2.Get());  // will print out "from C"
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T13:09:21.137

仅当您不先将其转换为 ClassA 时，它才会从 ClassC 调用 Get()。Get() 的最后一个虚拟实现是来自 ClassB 的 Get()，当您从 A 调用虚拟 Get() 方法时会调用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T13:09:50.213

`new`关键字遮蔽了继承的方法。但是，只有当对象的编译时类型是 type 时，它​​才会这样做`ClassC`。在您的情况下，编译时类型会`ClassA`导致使用继承的版本。

`new`这就是为什么在使用关键字隐藏继承的成员之前应该仔细考虑的原因之一。根据持有实例的变量的声明类型，可能会调用不同的方法：

```
ClassA a = new ClassC();
ClassC c = (ClassC)a; // Note, this is the SAME instance as in a
Assert.AreSame(a, c);

Console.WriteLine(a.Get()); // prints "from B"
Console.WriteLine(c.Get()); // prints "from C" 
```

# javascript - 鼠标位置和偏移

> ID：12142566
> 
> 赞同：1
> 
> 时间：2012-08-27T13:05:38.820
> 
> 标签：javascript, jquery, mousemove

我在某些网页上获取鼠标坐标并保存它们。

```
$("div#container").mousemove( function(e) {
      client_x = e.pageX;
  client_y = e.pageY;

  // save x,y

}); 
```

现在其他人加载同一页面，我想向他们显示相同的坐标（x，x 位置）。

如果我必须考虑到 div#container 与浏览器中的位置不同（考虑屏幕分辨率和滚动），我怎么能得到相同的点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T13:12:48.950

我将使用父 div 容器的`$.offset().top`和`$.offset().left`，并计算与鼠标光标当前 X 和 Y 坐标的差异。

`.offset()`总是引用文档而不是元素的父元素。

例如：

```
$('#element').mousemove(function(e){
    var client_x = e.pageX;
    var client_y = e.pageY;
    var elementOffset = $(this).offset();
    client_x -= elementOffset.left;
    client_y -= elementOffset.top;

    // save x, y.
}); 
```

然后，在其他用户显示器上，将坐标添加到他的偏移后显示坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:15:24.703

在您的示例中，您可以使用返回的值`offset()`：

`$("div#container").offset().left` 和 `$("div#container").offset().top`

将它们减去`e.pageX`和`e.pageY`。

`offset()`函数为您提供匹配元素相对于文档的位置（请参阅[文档](http://api.jquery.com/offset/)），因此如果用户向下滚动则没有问题。

示例：http: [//jsfiddle.net/3jMRS/](http://jsfiddle.net/3jMRS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:14:48.390

由于您在问题中提到的变量，这似乎是不可能的。屏幕分辨率是主要原因，但也取决于他们的窗口有多大。起初，您可能认为您可以计算鼠标相对于固定点的位置，`div`如图所示（以 Stack Overflow 为例，站点的主容器不会随浏览器窗口调整大小）。但是如果他们的窗口比容器小，你就会对他们看到的东西做出一些错误的假设。

话虽如此，您始终可以只计算鼠标相对于您知道将在屏幕上显示的固定元素的位置，`$.offset()`并假设它们的屏幕显示所有内容（或检查`$(window)`大小）并使用“正常”查看条件。

# visual-c++ - 通过自定义 ICU 构建和使用 Boost for Windows Visual Studio

> ID：12142571
> 
> 赞同：4
> 
> 时间：2012-08-27T13:05:52.977
> 
> 标签：visual-c++, boost, icu, uima

几天来，我一直在尝试构建一个基于 UIMA C++ 框架（http://uima.apache.org/）的项目。我目前使用的是版本 2.4.0 候选版本 6，它带有 Linux 和 Windows 二进制文件，可以轻松捆绑所有依赖项。

特别是，它带有 ICU 的二进制库（我相信是 3.6）。

在我的项目中，我正在构建一个 C++ UIMA 注释器，并且我的代码使用了 Boost C++ 库 v1.51.0。

一切都编译得很好，但是在运行时，我在开始使用时遇到访问冲突异常，比如说 operator <<(ostream&, const icu::UnicodeString&)。可能是Boost和UIMA C++版本不兼容的问题。

所以，我试图在我的机器上重新编译 Boost，告诉它重用 UIMA C++ 附带的 ICU，但是 MSVC 工具集似乎有问题，因为我总是收到消息告诉我在构建时没有可用的 ICU促进：

```
c:\Users\Sylvain\boost_1_51_0>b2 toolset=msvc-10.0 variant=release -sICU_LINK=c:\users\sylvain\apache-uima\uimacpp

Building the Boost C++ Libraries.

Performing configuration checks

    - 32-bit                   : yes
    - x86                      : yes
    - has_icu builds           : no
warning: Graph library does not contain MPI-based parallel components.
note: to enable them, add "using mpi ;" to your user-config.jam
    - iconv (libc)             : no
    - iconv (separate)         : no
    - icu                      : no
    - icu (lib64)              : no
    - gcc visibility           : no
    - long double support      : yes 
```

有没有人设法使用 -sICU_PATH 选项和 MSVC 构建 Boost？

谢谢，西尔万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T12:50:47.257

只需使用 ICU 构建 Boost（并成功）。由于这个问题是谷歌上的第一个结果（现在没有太大帮助），我决定分享我学到的东西。

我正在使用 MSVC11 (Visual Studio 2012) 进行 Boost 1.56 的 x64 构建，链接到 ICU 4.8.1 的自定义构建。

首先，Boost 对 ICU 的目录检测似乎有点奇怪。这是我对 ICU 目录的最终布局：

```
my_icu_root
  +- bin
  +- bin64
  +- include
     +- layout
     +- unicode
  +- lib
  +- lib64 
```

我将所有 ICU dll（调试和发布版本）复制到. `bin`，所有库（再次调试和发布）`lib`和所有头文件复制到`include`. 为了`bjam`开心，我还必须分别将*完整* `bin`目录和`lib`目录复制到`bin64`和`lib64`。如果没有这两个目录，ICU 的检测或 Boost.Locale 的编译都会在我的机器上失败。

有了这个布局，我所要做的就是添加`-sICU_PATH=<my_icu_root>`到我常用的`bjam`命令行来构建它。

如果您同时获得两者，您就知道 Boost 成功检测到 ICU

```
 - has_icu builds           : yes
[...]
 - icu                      : yes 
```

在配置过程中。

如果由于某种原因它不能立即工作，这里有一些建议。

Bjam 将配置信息缓存到`bin.v2/project-cache.jam`. 如果您在配置失败后尝试重新运行 Bjam，请*务必先删除该文件*。否则 bjam 可能会决定完全跳过 ICU 检测（您会`(cached)`在控制台输出中看到很多内容）。

如果配置失败，请查看`bin.v2/config.log`以获取有关问题的详细信息。很可能，它无法在`libs/regex/build/has_icu_test.cpp`. 该日志包含构建命令的命令行，通常足以找出问题所在。如果日志看起来可疑为空，您可能忘记删除`project-cache.jam`.

最后，成功的配置运行并不能保证成功的构建。`lib`在我的机器上，我设法正确配置了所有内容，但由于缺少文件，Boost.locale 在构建过程中仍然失败。因此，请务必检查构建输出中是否存在失败或跳过的目标。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:28:39.780

我遇到了同样的问题。我选择解决它的方法是复制 icuin.lib 并将其命名为 icund.lib，其他库也是如此。然后 bjam 说它找到了 icu。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:55:18.017

也许 Boost 不适用于六岁的 ICU。你可以重建 UIMA 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T15:03:50.013

看看 boost/libs/regex/build/has_icu_test.cpp。我不记得我脑海中的修复/问题，但你应该能够作弊并简单地从 main() 那里返回 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T15:16:41.733

我的命令行如下：

```
bjam -sICU_PATH=c:\icu --toolset=msvc-10.0 variant=release stage 
```

只需查看 \bin.v2\config.log

它包含确切的错误。就我而言，缺少用于链接的特定库

```
...found 10 targets...
...found 3 targets...
...found 66 targets...
...updating 2 targets...
msvc.link bin.v2\libs\regex\build\msvc-10.0\debug\threading-multi\has_icu.exe
LINK : fatal error LNK1181: cannot open input file 'icuind.lib' 
```

问题是 - boost build 无论如何都会寻找调试库，即使在要求变体 = 发布时也是如此。

# events - 让 Ext JS 控制器订阅动态添加组件的事件的最佳方式

> ID：12142573
> 
> 赞同：1
> 
> 时间：2012-08-27T13:06:07.473
> 
> 标签：events, extjs, controller

第一个问：是

```
controller.init function () {
    this.control(
    { 
```

“居住”？以便以后通过 UI 事件添加的任何其他组件也在控制器的监视下？

我正在努力捕捉控制器动态添加的链接点击：

**控制器**

```
init: function () {
    this.control(
    {
      'component[cls=pfLink]': {
        click: this.onPfLinkClicked // NEVER GETS HERE 
      },
     'component': {
        click: this.onPfLinkClicked // DOESNT EVEN GET HERE 
      } 
```

**看法**

商店加载后：

```
 var cmp = Ext.create('Ext.Component', {
    autoEl: {
      tag: 'a',
      href: '#',
      cls: 'pfLink',
      html: ref
    }
  });
  this.add( {
    cellCls: 'question',
    xtype: 'container',
    items: cmp
  }); 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:17:26.167

默认情况下它们是动态的，您可以验证这一点：

```
Ext.define('MyApp.controller.Test', {
    extend: 'Ext.app.Controller',
    init: function() {
        this.control({
            'button[isOdd]': {
                click: function(btn) {
                    console.log('Odd', btn.text);
                }
            },
            'button[isEven]': {
                click: function(btn) {
                    console.log('Even', btn.text);
                }
            }
        });
    }
});

Ext.require('*');

Ext.application({
    name: 'MyApp',

    controllers: ['Test'],

    launch: function() {
        var vp = new Ext.container.Viewport(),
            i = 0,
            timer;

        timer = setInterval(function(){
            ++i;
            vp.add({
                xtype: 'button',
                text: 'Button ' + i,
                isOdd: i % 2 === 1,
                isEven: i % 2 === 0
            });
            if (i === 10) {
                clearInterval(timer);
            }
        }, 500);
    }
}); 
```

您的问题是该组件不会触发点击事件。相反，创建一个自定义组件：

```
Ext.define('MyApp.controller.Test', {
    extend: 'Ext.app.Controller',
    init: function() {
        this.control({
            'foo[isOdd]': {
                click: function(cmp) {
                    console.log('Odd', cmp.el.dom.innerHTML);
                }
            },
            'foo[isEven]': {
                click: function(cmp) {
                    console.log('Even', cmp.el.dom.innerHTML);
                }
            }
        });
    }
});

Ext.define('Foo', {
    extend: 'Ext.Component',
    alias: 'widget.foo',

    afterRender: function(){
        this.callParent();
        this.el.on('click', this.fireClick, this);
    },

    fireClick: function(e){
        this.fireEvent('click', this, e);
    }
})

Ext.require('*');

Ext.application({
    name: 'MyApp',

    controllers: ['Test'],

    launch: function() {
        var vp = new Ext.container.Viewport(),
            i = 0,
            timer;

        timer = setInterval(function(){
            ++i;
            vp.add({
                xtype: 'foo',
                html: 'Button ' + i,
                isOdd: i % 2 === 1,
                isEven: i % 2 === 0
            });
            if (i === 10) {
                clearInterval(timer);
            }
        }, 500);
    }
}); 
```

# iphone - 可以阻止 iOS AudioServicesPlaySystemSound 直到声音播放完毕？

> ID：12142574
> 
> 赞同：1
> 
> 时间：2012-08-27T13:06:08.490
> 
> 标签：iphone, ios

我需要我的软件等到声音完全播放后再继续。我有很多声音要开发，所以使用回调方法会花费很多开发时间。

有没有办法调用 AudioServicesPlaySystemSound 并让它阻塞直到它完成播放，而不使用回调方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:28:42.813

你不能——你实际上无法准确控制你的声音何时开始和结束。也不是声音是在**`AudioServicesPlaySystemSound`**API 的后台线程中播放的。我最近读了[这篇](http://www.devsrealm.com/objective-c/playing-audio-in-your-ios-app/)关于在 iOS 上播放声音的文章，看看它。您可能希望使用其他 API 来播放声音。

# android - 当我触摸搜索位置图标时出现此错误

> ID：12142575
> 
> 赞同：0
> 
> 时间：2012-08-27T13:06:08.147
> 
> 标签：android, android-layout, android-mapview, android-dialog

我在触摸地图中的搜索位置图标时收到此错误...我有 3 个位置。2 位置 r 我的位置和客户位置 & 我有搜索编辑框。当我搜索该位置时，它在正确的位置显示 d 图标，但我触摸该图标将强制关闭...我必须得到对话框。这是我的代码 [谁能指导我如何使用 JSON 在两个位置之间获取 Google 路线](https://stackoverflow.com/questions/12067454/can-anyone-guide-me-how-to-get-google-directions-between-two-locations-using-jso)

请帮助我提前谢谢

```
08-27 17:52:52.708: D/AndroidRuntime(3721): Shutting down VM
08-27 17:52:52.708: W/dalvikvm(3721): threadid=1: thread exiting with uncaught exception (group=0x40be71f8)
08-27 17:52:52.723: E/AndroidRuntime(3721): FATAL EXCEPTION: main
08-27 17:52:52.723: E/AndroidRuntime(3721): java.lang.NullPointerException
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:142)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.app.AlertDialog$Builder.<init>(AlertDialog.java:359)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.androidhive.googleplacesandmaps.AddItemizedOverlay.onTap(AddItemizedOverlay.java:74)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:356)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.View.dispatchTouchEvent(View.java:5588)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2060)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1398)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2008)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.View.dispatchPointerEvent(View.java:5768)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2911)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2485)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:852)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2494)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.os.Looper.loop(Looper.java:137)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at android.app.ActivityThread.main(ActivityThread.java:4514)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at java.lang.reflect.Method.invokeNative(Native Method)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at java.lang.reflect.Method.invoke(Method.java:511)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-27 17:52:52.723: E/AndroidRuntime(3721):     at dalvik.system.NativeStart.main(Native Method)
08-27 17:52:59.911: I/Process(3721): Sending signal. PID: 3721 SIG: 9 
```

Placesmapactivity.java

上面的 tr 是我的完整代码的链接，只需使用此方法以供快速参考..

```
 @Override
            public void onClick(View v) {           
                String usrLoc = autoCompletetextView.getText().toString();
                Geocoder gc = new Geocoder(PlacesMapActivity.this);

                try {
                    addr=gc.getFromLocationName(usrLoc, 3);//maximum 2 results
                    if(addr.size()>0){
                        address=addr.get(0);//get the first result
                        convertLongi=address.getLongitude();
                        convertLati=address.getLatitude();
                        geopointsearch = new GeoPoint((int)(convertLati * 1E6), (int)(convertLongi * 1E6));                                     

                     // Map geopointsearch overlay item
                        itemizedOverlay2 = new AddItemizedOverlay(drawable_client);     
                        overlayitem = new OverlayItem(geopointsearch, "Your Location2", "I am ur client!");
                        itemizedOverlay2.addOverlay(overlayitem);       
                        mapOverlays.add(itemizedOverlay2);
                        itemizedOverlay2.populateNow();
                        mc.animateTo(geopointsearch);   
                     //   mc.zoomIn();
                    }

                } catch (IOException e) {                   
                    e.printStackTrace();
                }
            }                                   
        });

    // Map overlay item
    itemizedOverlay = new AddItemizedOverlay(drawable_user, this);
    overlayitem = new OverlayItem(geoPoint, "Your Location","That is you!");
    itemizedOverlay.addOverlay(overlayitem);        
    mapOverlays.add(itemizedOverlay);
    itemizedOverlay.populateNow();      
    // Map client overlay item
    itemizedOverlay1 = new AddItemizedOverlay(drawable_client, this);       
    overlayitem1 = new OverlayItem(geoPoint1, "Your Location2", "I am ur client!");
    itemizedOverlay1.addOverlay(overlayitem1);              
    mapOverlays.add(itemizedOverlay1);
    itemizedOverlay1.populateNow();
    // Map near overlay item    
    itemizedOverlay = new AddItemizedOverlay(drawable, this);
    // Map geopointsearch overlay item
   /* itemizedOverlay2 = new AddItemizedOverlay(drawable_client, this);     
    overlayitem2 = new OverlayItem(geopointsearch, "Your Location3", "ur searching for me!");
    itemizedOverlay2.addOverlay(overlayitem2);      
    mapOverlays.add(itemizedOverlay2);
    itemizedOverlay2.populateNow();*/ 
```

AddItemizedOverlay.java

公共类 AddItemizedOverlay 扩展 ItemizedOverlay {

```
 private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

   private Context context;
   MapController mc;
Drawable drawable;

private GeoPoint geopoint;

public AddItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
   }

   public AddItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
   }

   @Override
   public boolean onTouchEvent(MotionEvent event, MapView mapView)
   {   
       if (event.getAction() == 1) {
           GeoPoint geopoint = mapView.getProjection().fromPixels(
               (int) event.getX(),
               (int) event.getY());
           // latitude
           double lat = geopoint.getLatitudeE6() / 1E6;
           // longitude
           double lon = geopoint.getLongitudeE6() / 1E6;

       //  Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();
       }     
       return false;
   } 

@Override
   protected OverlayItem createItem(int i) {
      return mapOverlays.get(i);
   }

   @Override
   public int size() {
      return mapOverlays.size();
   }

   @Override
   protected boolean onTap(int index) {
     OverlayItem item = mapOverlays.get(index);
     AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
     dialog.setTitle(item.getTitle());
     dialog.setMessage(item.getSnippet());
     dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
    });
     dialog.show();
     return true;
   }

   public void addOverlay(OverlayItem overlay) {
      mapOverlays.add(overlay);
   }

   public void populateNow(){
       this.populate();
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:12:06.053

尝试更改受保护的布尔 onTap(int index) 如下：

```
@Override
protected boolean onTap(int index) {
 OverlayItem item = mapOverlays.get(index);
 AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
 dialog.setTitle(item.getTitle());
 dialog.setMessage(item.getSnippet());
 dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
    }
});
 AlertDialog alertDialog=dialog.create();
 alertDialog.show();
 return true; 
```

}

您需要从 DialogBu​​ilder 创建 AlertDialog。

# sql-server - 连接到位于共享主机上的远程数据库时，这是正常行为吗？

> ID：12142577
> 
> 赞同：0
> 
> 时间：2012-08-27T13:06:12.437
> 
> 标签：sql-server, security, shared-hosting

所以我有一个 ASP.NET MVC3 的共享主机，我刚刚在 Plesk 上创建了一个新数据库。

接下来我想使用 Sql Manager 远程连接到数据库，我输入了服务器名称、用户名和密码。

到目前为止一切都很好，但是在我点击数据库名称后，它给了我一个我从未听说过的各种数据库的列表。我猜那些是其他人的数据库。

我想知道这是正常的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:17:46.373

*隐藏*您没有权限的数据库的权限有副作用

因此，您通常可以看到数据库，但您*根本无权*查看其中的任何数据，甚至是系统数据。也就是说，应该没有登录用户映射

# java - 在java中将字节字符串转换为字母数字字符数组？

> ID：12142582
> 
> 赞同：3
> 
> 时间：2012-08-27T13:06:32.623
> 
> 标签：java, string, byte, alphanumeric

我想我的问题很简单：

java - 如何在java中将字节转换为字母数字字符数组（字符串）？

我试过这个，但它给了我一个关于 netbeans 的错误：

```
 byte[] b = "test".getBytes("ASCII");
 String test = new String(b,"ASCII"); 
```

更新：我实际上正在使用此代码：

```
 byte[] b = "test".getBytes("ASCII");
    MessageDigest md = MessageDigest.getInstance("SHA-256");
    String bla = new String(md.digest(b), "ASCII"); 
```

但是，一旦我尝试用于其他需要带有 ASCII 的字符串的东西，我就会收到以下错误，例如“这不是 ASCII”。我真的不明白，其实。

当我尝试打印它时，我得到了一些奇怪的东西，比如“2Q�h/�k�����”

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:10:47.673

你很接近：

```
public static void main(String[] args) throws java.io.UnsupportedEncodingException { //you should throw or catch this exception
   byte[] b = "test".getBytes("ASCII"); // And you must declare a byte array
   String test = new String(b,"ASCII");

   System.out.println(test); // Will output "test"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:40:32.520

在您进行编辑后，我认为您想要生成`SHA-256`给定`String`.

```
try {
    byte[] b = "test".getBytes("ASCII");
    MessageDigest md = MessageDigest.getInstance("SHA-256");
    byte[] hashBytes = md.digest(b);
    StringBuffer hexString = new StringBuffer();
    for (int i = 0; i < hashBytes.length; i++) {
        hexString.append(Integer.toHexString(0xFF & hashBytes[i]));
    }
    System.out.println(hexString);
} catch (Exception e) {
    e.printStackTrace();
} 
```

# android - 无法控制从 android 中的另一个活动开始的新活动

> ID：12142584
> 
> 赞同：0
> 
> 时间：2012-08-27T13:06:47.707
> 
> 标签：android, android-intent, android-activity, textview, robotium

我正在使用以下代码启动设置页面

`Intent intent = new Intent(android.provider.Settings.ACTION_DATE_SETTINGS);`

然后尝试使用

`ArrayList<TextView> textLists = solo.getCurrentTextViews(this.getActivity().getCurrentFocus());`

但我正在获取以前活动的文本视图。

谁能告诉我如何在我的独奏中获得新活动

我什至尝试关注

`Solo newSolo = new Solo(null, this.activity);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:22:53.337

如果您的活动位于不同的包中，您将不会从 AUT 包之外的活动中获得响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:56:38.357

我不清楚您的问题，但如果您想从 Activity 中获得结果，请使用 startActivityForResult 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:17:49.243

您是否尝试在获取 TextViews 之前等待？只需添加一个 Solo.sleep(5000) 以确保新 Activity 已完全构建。

也可能是您获得以前活动的 TextViews 和新活动的 TextViews 的情况？

但是，您似乎不仅试图访问 application_under_test 中的另一个 Activity，而且还试图访问不在 application_under_test 中的另一个 Activity，即“设置”应用程序。正如大卫瓦瑟已经指出的那样，这不起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:24:41.843

使用 Robotium，您只能测试单个应用程序。如果您启动“设置”应用程序，则不能与您自己的应用程序同时检测它。

# postgresql - Postgis几何边界上的两个最近点

> ID：12142588
> 
> 赞同：29
> 
> 时间：2012-08-27T13:07:02.897
> 
> 标签：postgresql, postgis, plpgsql

我有一个`geofences`存储`geometry`多边形的表。

我还有一个`A`在几何内部的点。我要做的是找到距`A`多边形几何表面上的点最近的两个点。

PostGIS 中的功能：

```
CREATE OR REPLACE FUNCTION accuracyCheck(Polygon geometry
                                        ,decimal lat
                                        ,decimal lon)
  RETURNS VARCHAR AS
$BODY$

DECLARE height DECIMAL;
DECLARE accuracy VARCHAR(250);

BEGIN 

CREATE TEMPORARY TABLE closePointStorage AS
SELECT ST_AsText(ST_ClosestPoint(geometry
                                ,ST_GeomFromText('POINT(lat lon)',0)
                                )
                ) AS closestPoint
FROM  (
   SELECT ST_GeomFromText(geometry) as geometry
   FROM gfe_geofences
   WHERE is_active=true
   ) As tempName;

CREATE TEMPORARY TABLE areaStorage ON COMMIT DROP AS
SELECT ST_Area(ST_GeomFromText('Polygon((23.0808622876029 96.1304006624291
                                        ,28.0808622876029 99.1304006624291
                                        ,100              200
                                        ,23.0808622876029 96.1304006624291
                                        ))'
                              ,0)
              ) AS area;

CREATE TEMPORARY TABLE distanceStorage ON COMMIT DROP AS
SELECT ST_Distance(
          ST_GeomFromText('POINT(23.0808622876029 96.1304006624291)',-1)
         ,ST_GeomFromText('POINT(28.0808622876029 99.1304006624291)',-1)
         ) AS distance;

height = (SELECT area FROM areaStorage)
        /(0.5*(SELECT distance FROM distanceStorage));

IF height < (SELECT radius_meters
             FROM gfe_geofences Where is_active=true) THEN
   accuracy = "FullConfirm";
   RETURN accuracy;
ELSE
   accuracy = "PartiallyConfirm";
   RETURN accuracy;
END IF;

END;
$BODY$ LANGUAGE plpgsql; 
```

我只想在多边形几何的边界上找到两个点。就像我从查询中找到的一样：

```
CREATE TEMPORARY TABLE closePointStorage AS
SELECT ST_AsText(ST_ClosestPoint(geometry
                                ,ST_GeomFromText('POINT(lat lon)',0)
                                )
                ) AS closestPoint 
FROM  (
   SELECT ST_GeomFromText(geometry) as geometry
   FROM gfe_geofences
   WHERE is_active=true
   ) 
AS tempName; 
```

除了这一点之外，我必须再找到一个距离大于上面找到的点但小于其余点的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:40:16.100

我假设您想找到最接近相关点的多边形边缘

![距离问题](../Images/1394f60e3930fb72e792fcccb4e10ffa.png)

要获得点 'C' 到线 [A,B] 的距离 'd' 首先平移所有点，使 A 位于 0,0

```
B -= A  //vector subtraction
C -= A 
```

然后标准化 B 使其长度为 1.0

```
len = sqrt( B . B) //dotproduct of two vectors is the length squared
B /= len  //scalar divide by length 
```

求 A 与 C 成直角的长度

```
dotp = B . C  //dot product again
closestPointOnLine =  B * dotp  //scalar multiply 
```

现在获取距离

```
diff = (C - ClosestPointOnLine)
d = sqrt(diff . diff) 
```

不知道如何在 SQL 中做到这一点。您需要对多边形上的每条边执行上述操作，然后找到最小值“d”

顺便说一下，B 和 C 的叉积的符号现在将告诉您该点是否在多边形内部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:53:58.660

1）有点左场的想法，但是要找到离您的目的地最近的*第二*个点，为什么不找到离您已经找到的点最近的点呢？

2）或者，与您的具体问题更密切相关，

*   在点的某个合理范围内找到点的集合，
*   找到该集合与位于多边形边界上的点集合的交集（我猜这可能是另一个 PostGIS 函数；有一段时间没有使用 postG，所以我不确定）

3）进一步进入左侧字段，将一些数据集转储到 Mongo 并使用 $near 函数... [http://docs.mongodb.org/manual/reference/operator/near/](http://docs.mongodb.org/manual/reference/operator/near/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T01:53:04.823

如果包含线，边界多边形上通常没有第二最近点。就像没有第二个最接近零的实数一样。要么你只想考虑角落的点，就像马库斯建议的那样。或者你只有一个最近的点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T13:21:34.203

使用 ST_DumpPoints() 转储多边形的点，然后从 ST_Distance 到 A 限制 2 的顺序中选择。 ?

所以它就像

```
SELECT * from ST_DumpPoints(poly) order by ST_Distance(A,geom) asc limit 2; 
```

（假设这是一个内部选择，其中 poly 是多边形，A 是要比较的点，geom 是被比较的多边形中的一个点的几何列）

# process - 为什么在将 cpu 从一个进程切换到另一个进程时需要保留地址空间？

> ID：12142592
> 
> 赞同：0
> 
> 时间：2012-08-27T13:07:25.530
> 
> 标签：process, operating-system

我在Galvin的书中读到，将cpu从一个进程切换到另一个进程需要保留当前进程的地址空间。为什么需要保留这个地址空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:35:07.723

通过地址空间，我想你是想问为什么当有上下文切换时需要保存进程的页表。

那么想象一下，当一个进程在上下文切换时，虚拟页100映射到物理页400。这个信息保存在这个进程对应的页表中。如果在上下文切换时没有保存这个表，那么下一次这个进程是计划运行我们如何知道虚拟页 100 在物理空间中的映射位置。保存页表可为您提供有关虚拟到物理地址映射的信息。

实际上发生的情况是，当发生上下文切换时，x86 上的寄存器 (cr3) 保存一个指向页表的指针，当发生上下文切换时，它指向一个新表，因此新进程的虚拟到物理映射当我们进行地址翻译时可用。

# c# - 使用带有对象名称的 for 循环

> ID：12142597
> 
> 赞同：3
> 
> 时间：2012-08-27T13:08:11.250
> 
> 标签：c#, .net, windows

我有一个简单的 for 循环，如下所示：

```
for (int i = 0; i > 20; i++)
{

} 
```

现在我有 20 个标签（label1、label2、label3 等等..）

我想做类似的事情：

```
for (int i = 0; i > 20; i++)
{
    label[i].Text = String.Empty;
} 
```

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T13:11:13.970

如果您的标签放在一个容器上，例如`Form`，您可以执行以下操作：

```
foreach(Label l in this.Controls.OfType<Label>())
{
    l.Text = string.Empty;
} 
```

对任何其他容器都相同，例如，`Panel`或`GroupBox`，只需替换`this`为容器的名称（`panel1.Controls`等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:11:09.217

我将您的解决方案称为设计缺陷，但我会这样做：

```
var itemArray = this.Controls.OfType<Label>();

foreach(var item in itemArray)
{
    item.Text = string.Empty;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T13:10:53.540

创建一个数组或标签列表并遍历该列表以设置每个标签的属性

```
List<Label> labels = new List<Label>();
labels.Add(label1);

foreach(Label l in labels)
{
    l.Text = String.Empty;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T13:22:52.360

不知道是不是最简单，反正是最短的。。

```
this.Controls.OfType<Label>().ToList().ForEach(lbl => { lbl.Text = String.Empty; }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T13:14:30.497

也许您可以将 FindControl 与类似的东西一起使用

```
for(int i = 0; i < 5; i++)
{
   (FindControl("txt" + i.ToString())).Text = String.Emty;
} 
```

# iphone - iphone开发：碰撞检测不适用于动画

> ID：12142601
> 
> 赞同：0
> 
> 时间：2012-08-27T13:08:32.823
> 
> 标签：iphone, ios, animation, imageview, collision-detection

下面的代码只是从屏幕顶部创建小方块并移动到底部。我还有一个 UIImageView(player)，它由 x 轴上的加速度计控制。目标不是触摸动画对象。就像一个简单的赛车游戏。虽然我没有错误，但我无法检测到碰撞。我在我的代码中找不到错误。可能是什么问题？

```
-(void)printOut:(NSTimer*)timer1;
{

    for (int i = 0; i < 100; i++) {

        p = arc4random_uniform(320)%4+1;

        CGRect startFrame = CGRectMake(p*50, -50, 50, 50);
        CGRect endFrame   = CGRectMake(p*50, CGRectGetHeight(self.view.bounds) + 50,
                                       50,
                                       50);

        animatedView = [[UIView alloc] initWithFrame:startFrame];
        animatedView.backgroundColor = [UIColor redColor];

        [self.view addSubview:animatedView];

        [UIView animateWithDuration:2.f
                              delay:i * 0.5f
                            options:UIViewAnimationCurveLinear
                         animations:^{animatedView.frame = endFrame;}
                         completion:^(BOOL finished) {[animatedView removeFromSuperview];}];

        CGRect movingFrame = [[animatedView.layer presentationLayer] frame];

        if(CGRectIntersectsRect(player.frame, movingFrame)){
            [timer invalidate];
            NSLog(@"asdad");

            UIAlertView *alert =[[UIAlertView alloc] initWithTitle:@"You Lost" message:[NSString stringWithFormat:@"You were hit!"] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
            [alert show];
        }

    }

    [timer1 invalidate];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:16:21.023

您无法检测到碰撞，因为系统所知道的动画的唯一帧值是开始帧和结束帧。因此，除非您尝试检测碰撞的对象与第一个对象的开始或结束帧发生碰撞，否则您需要找到一种不同的方法来检测它。`UIView`动画是为美学而不是游戏逻辑而设计的。

# azure - LINQ to SQL 与 SQL Azure

> ID：12142608
> 
> 赞同：7
> 
> 时间：2012-08-27T13:08:59.680
> 
> 标签：azure, linq-to-sql, azure-sql-database

我们正在研究迁移到云模型和 Microsoft Azure PaaS 平台。

我们当前的数据层是使用 LINQ to SQL 编写的。它会与 SQL Azure 兼容吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T13:23:50.793

是的 LINQ to SQL 是兼容的。但是你必须记住两点：

*   SQL Azure 不是您一个人的专用机器。您的数据库将与其他客户一起在机器上运行。您可能会受到限制，您可能会遇到暂时的异常，......这就是您应该实施重试策略的原因。[TechNet 上](http://social.technet.microsoft.com/wiki/contents/articles/4235.retry-logic-for-transient-failures-in-windows-azure-sql-database-en-us.aspx)有一篇文章解释了如何使用 LINQ to SQL 执行此操作。
*   由于 SQL Azure 不是真正的 SQL Server，因此存在一些限制。在此处阅读有关这些限制的所有信息：[一般准则和限制（Windows Azure SQL 数据库）](http://msdn.microsoft.com/en-us/library/windowsazure/ee336245.aspx)。如果您计划将现有数据库（包含或不包含数据）移动到 SQL Azure，请考虑使用支持 SQL Azure 的工具，例如[SQL 数据库迁移向导 (SQLAzureMW)](http://sqlazuremw.codeplex.com/)。

# reporting-services - SSRS 打印预览在多页上打印

> ID：12142610
> 
> 赞同：0
> 
> 时间：2012-08-27T13:09:21.733
> 
> 标签：reporting-services, ssrs-2008

我为客户构建了一个 SSRS 报告，当我构建它时，似乎没问题。但是，当我打印或进行打印机预览时，报告及其内容打印在 4 页上，而不是全部打印在一页上。我可以使用一些帮助，因为我不怎么处理 SSRS。

谢谢

![在此处输入图像描述](../Images/27a6c160b851515d49d6f4ff092d8ec4.png)

![在此处输入图像描述](../Images/807dd2607e2e2166f772b0a01293253b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:45:28.073

在设计器中，您应该打开**Document Outline**视图。报告的基本结构大致如下：

```
Report
    -> Body
        -> Control / tablix / subreport 1
        -> Control / tablix / subreport 2
        -> etc
    -> Page Header
    -> Page Footer 
```

如果您选择**报告**项目，属性窗格将显示几个重要属性：

*   页面大小（用于打印和 pdf 渲染器）
*   交互式尺寸（适用于其他渲染器）
*   边距

这些属性决定了报告的打印尺寸。如果您选择**Body**项目，您还将看到一个`Size`属性。该大小可能会增长，具体取决于您的 tablix，因为它们可能会水平和垂直扩展。

基本上，如果您的正文尺寸大于页面尺寸（和边距）允许的尺寸，打印机将渲染额外的页面。我认为，您应该使用这些值来解决您的问题。查看您的示例屏幕，您可以从以下内容开始：

*   减少边距
*   更改页面大小，使其变为横向
*   在正文中进行定位以适应页面上的更多内容

# xslt - 添加此根匹配模板是否会干扰现有转换？

> ID：12142612
> 
> 赞同：1
> 
> 时间：2012-08-27T13:09:26.747
> 
> 标签：xslt, xslt-2.0

假设您有一个 XSLT，目前正在用于无数案例。鉴于它目前没有任何`<xsl:template match="/">`; 添加以下模板会干扰任何事情吗？

```
<xsl:template match="/">
    <xsl:choose>
        <xsl:when test="some condition which is only true for new cases"></xsl:when>
        <xsl:otherwise>
            <xsl:apply-templates />
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

我要问的原因是我们有一个巨大的 XSLT 文件，该文件当前正在使用并且不应该被破坏，但我们需要向它添加一些新的转换。在根上做出一些决定将使事情变得更容易和更清晰。

刚刚有人告诉我，如果没有模板匹配`/`，则将应用等效于的默认模板`<xsl:apply-templates />`。所以，只是想检查我的理解是否正确，然后（只要测试仅适用于新案例）不会破坏任何现有的转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:19:23.200

没错，您可以在根模板“/”中处理您的条件，只需应用模板进行“正常”处理。

但是检查与“/”匹配的现有根模板 - 也许它已经做的不仅仅是应用下一个模板。

# hibernate - Hibernate，Spring Data：@OneToMany 关系，反之亦然不起作用

> ID：12142623
> 
> 赞同：0
> 
> 时间：2012-08-27T13:10:17.093
> 
> 标签：hibernate, spring-data

使用 @OneToMany 或 @ManyToOne 关系时，我的测试失败。

实体：

```
@Entity
@Table(name = "CONTACTS")
public class Contact implements Serializable {

    private static final long serialVersionUID = 8841543709585000683L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "CONTACT_ID")
    private Long contactId;

    @Column(name = "CONT_NAME", nullable = false)
    private String name;

    @Column(name = "LAST_NAME")
    private String lastName;

    @Column(name = "NICK_NAME")
    private String nickName;

    @OneToMany(targetEntity = TelephoneNumber.class, fetch = FetchType.EAGER, mappedBy = TelephoneNumber.CONTACT_FIELD_NAME, cascade = CascadeType.ALL)
    private Set<TelephoneNumber> telephoneNumbers = new HashSet<TelephoneNumber>(0);

    getters();
    setters()   
}

@Entity
@Table(name = "TELEPHONE_NUMBERS")
public class TelephoneNumber implements Serializable {

    private static final long serialVersionUID = 4459049334214768290L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "NUMBER_ID")
    private Long telephoneNumberId;

    @Enumerated(EnumType.ORDINAL)
    @Column(name = "TELEPHONE_TYPE", nullable = false)
    private TelephoneType telephoneType;

    @Column(name = "TELEPHONE_NUMBER")
    private String telephoneNumber;

    @JoinColumn(name = "CONTACT_ID", nullable = false)
    @ManyToOne(targetEntity = Contact.class, fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private Contact contact;
    public final static String CONTACT_FIELD_NAME = "contact";

    getters();
    setters();
} 
```

春天上下文：

```
<import resource="classpath*:spring/dbs-repository-context.xml" />

<!-- Activates JPA's @PersistenceContext and @PersistenceUnit (if available) 
    annotations to be detected in bean classes. -->
<context:annotation-config />

<!-- Enable Transaction using @Transactional annotation -->
<tx:annotation-driven />

<bean id="daTM"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
    p:dataSource-ref="dataSource" />

<!-- Create local transaction manager -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
    p:entityManagerFactory-ref="entityManagerFactory" lazy-init="true"
    p:dataSource-ref="dataSource" />

<!-- Create EntityManagerFactory for injection into services. -->
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    p:dataSource-ref="dataSource" p:persistenceXmlLocation-ref="persistenceXmlLocation">
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
        </bean>
    </property>
</bean>

<!-- Database access configuration -->
<bean id="persistenceXmlLocation" class="java.lang.String">
    <constructor-arg value="classpath*:META-INF/persistence.xml"></constructor-arg>
</bean>

<context:property-placeholder
    location="classpath:spring/jdbc.properties" />

<!-- Dev's env DataSource -->
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${jdbc.driver}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean> 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="contactManagerPU">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <class>com.snp.cm.persistency.contact.Contact</class>
        <class>com.snp.cm.persistency.contact.TelephoneNumber</class>

        <exclude-unlisted-classes>false</exclude-unlisted-classes>

        <properties>
            <property name="hibernate.max_fetch_depth" value="3" />
        </properties>
    </persistence-unit>
</persistence> 
```

并且测试失败（最后一次断言失败导致 0 个电话但存在其他字段）：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath*:spring/dbs-application-context.xml" })
@Transactional
public class ContactRepositoryTest {

    @Autowired
    private ContactRepository contactRepository;
    @Autowired
    private TelephoneNumberRepository telephoneNumberRepository;

    @Test
    public void testRepositorySaveMethod() {
        Contact contact = new Contact();
        contact.setLastName("Carter");
        contact.setName("John");
        contact.setNickName(null);
        contact = this.contactRepository.save(contact);
        Assert.assertNotNull(contact.getContactId());

        TelephoneNumber telephoneNumber1 = new TelephoneNumber();
        telephoneNumber1.setTelephoneNumber("093 7674441");
        telephoneNumber1.setContact(contact);
        telephoneNumber1.setTelephoneType(TelephoneType.HOME);
        this.telephoneNumberRepository.save(telephoneNumber1);

        TelephoneNumber telephoneNumber2 = new TelephoneNumber();
        telephoneNumber2.setTelephoneNumber("093 7674441");
        telephoneNumber2.setContact(contact);
        telephoneNumber2.setTelephoneType(TelephoneType.MOBILE);
        this.telephoneNumberRepository.save(telephoneNumber2);

        contact = this.contactRepository.findOne(contact.getContactId());

        Assert.assertEquals(2, contact.getTelephoneNumbers().size());
    }
} 
```

可能是什么原因？我尝试更改 FetchType 但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:49:45.160

您在测试中有两个选择：

*   刷新以更新父实体（在“Assert.assertEquals (..”之前添加“session.flush()”）
*   通过父实体（contact.getTelephoneNumbers().Add(entity)）直接添加子实体，级联，自动关联。

问候，

# google-drive-api - 您如何使用 Google Drive SDK 获取文件列表

> ID：12142624
> 
> 赞同：1
> 
> 时间：2012-08-27T13:10:19.033
> 
> 标签：google-drive-api

我有一个文件 ID 列表，我想用最新的元数据进行刷新。我知道我可以为每个文件调用一个 file/get 方法，但如果我们有很多文件，这显然不是处理它的正确方法。

所以我寻找文件/列表及其“q”参数来进行搜索查询。不幸的是，它看起来不接受“id IN (?, ?)”格式。

那么有没有聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:25:35.810

您可以将所有这些文件添加到特定文件夹，然后使用`parents`搜索查询字段搜索它们，如下所示：

```
'1234567' in parents 
```

返回 ID 为 1234567 的文件夹中包含的所有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:54:03.200

您可以将所有 file/get/put 调用包装到一个批次中。 [https://developers.google.com/google-apps/documents-list/#batching_resource_operations_into_a_single_request](https://developers.google.com/google-apps/documents-list/#batching_resource_operations_into_a_single_request)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T04:05:07.233

您是否有理由需要在更新之前下载这些项目？

鉴于您有文件 ID，您可以简单地 PUT 您的更改。

# java - 当 db4o 数据库有 15000+ 个对象时导致 OutOfMemoryError

> ID：12142625
> 
> 赞同：1
> 
> 时间：2012-08-27T13:10:21.030
> 
> 标签：java, db4o

我正在使用 db4o 8.0。

我有一堂课

```
PostedMessage{
    @Indexed
    long receivedTime;
    @Indexed
    long sentTime;
    ...    
    //getter methods and setter methods for all the fields.
} 
```

我将 PostedMessage 对象持久保存到 db4o 数据库。我已经将 15000 多个对象保存到 db4o 数据库。现在，当我运行以下查询时，它会导致 OutOfMemoryError。

```
 //Query to get PostedMessages between "start" and "end" dates.
    Query q = db.query();
    q.constrain(PostedMessage.class);
    Constraint from = q.descend("receivedTime").constrain(new Long(start.getTimeInMillis())).greater().equal();
    q.descend("receivedTime").constrain(new Long(end.getTimeInMillis())).smaller().equal().and(from);
    q.execute();//results in OutOfMemoryError 
```

为了避免 OutOfMemoryError，我需要为 PostedMessage 类的字段添加索引。[读这个](http://community.versant.com/Forums/tabid/98/aft/5258/Default.aspx)。

我有一个服务器/客户端配置。在打开 ObjectContainer 之前，我无法控制它的预配置。

在 ObjectContainer 刚刚打开并提供给我之后，我将不得不应用/附加索引 CommonConfiguration。

我知道如何创建配置。

```
 EmbeddedConfiguration appendConfig = Db4oEmbedded.newConfiguration();
    appendConfig.common().objectClass(EmailMessage.class).objectField("receivedTime").indexed(true);
    appendConfig.common().objectClass(EmailMessage.class).objectField("sentTime").indexed(true); 
```

我无法弄清楚如何将此配置应用于已打开的 ObjectContainer。如何将索引添加到刚刚打开的 ObjectContainer？

**EmbeddedConfigurationItem 的 apply()**方法是答案吗？如果是，我可以获得一个示例代码来说明如何使用它吗？

已编辑：稍后在问题中添加了 @Indexed 注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:43:22.280

查看**[@Indexed](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/basics/indexing.htm?SearchType=Stem&Highlight=indexes%7Cindexing%7Cindex%7Cindexed%7CIndexed%7CIndex%7CIndexing%7CIndexes%7CINDEX%7Cindexer)** 的*[参考文档](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:31:45.497

cl-r 使用 TA/TP 的建议对我来说就像一个魅力。见他上面的评论。

> 您还必须安装透明激活/透明持久性以避免在内存中加载不必要的对象。看教程中的第10&11章（在下载的db4o[Version].zip的doc/tutorial目录下] - cl-r

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:41:08.903

在我的特殊情况下，我需要遍历查询返回的 ObjectSet。

发现使用 IMMEDIATE 和 SNAPSHOT 查询方式也解决了 OutOfMemoryError 问题。时机也同样好。LAZY 模式不是我的解决方案。

从 100000 条已保存的 PostedMessage 中检索任何 100 条 PostedMessage 大约需要 8000 到 9000 毫秒。例如 1 到 100、1001 到 1100、99899 到 99999。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:57:06.640

您应该为查询添加索引。否则 db4o 必须扫描所有对象。

您可以使用注释来做到这一点，如下所示：

```
import com.db4o.config.annotations.Indexed;

PostedMessage{
    @Indexed
    long receivedTime;
    long sentTime; 
```

或者像你一样，使用配置：

```
EmbeddedConfiguration config = Db4oEmbedded.newConfiguration();
config.common().objectClass(EmailMessage.class).objectField("receivedTime").indexed(true);
config.common().objectClass(EmailMessage.class).objectField("sentTime").indexed(true);
ObjectContainer container = Db4oEmbedded.openFile(config,"your-data.db4o"); 
```

当容器已在运行时，您无法添加此配置。只有打开的时候。当索引尚不存在时，将在打开数据库时添加它们。打开时，您需要控制它。或者使用上面的注释。

# asp.net-mvc-3 - 不等于/不包含 lambda 表达式中的操作

> ID：12142626
> 
> 赞同：4
> 
> 时间：2012-08-27T13:10:22.510
> 
> 标签：asp.net-mvc-3, visual-studio-2010, linq

我的查询是这样的：

```
var subQuery = contacts_requests.Where(i => i.requests_usr_id >= 1).Select          
           (i => i.Usr_contacts_requests_from_usr_id ).ToArray();
var query = biographic_details.Join(profiles_companies, i => i.usr_id, j => j.company_usr_id,
           (i,j)=>new{
                      Usr_bio_usr_id }).where(p=>subQuery.Contains(i.company_usr_id)).ToArray(); 
```

我想要 notcontains 操作代替 contains，我该如何实现？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T13:12:19.033

代替

```
p => subQuery.Contains(i.company_usr_id) 
```

利用

```
p => !subQuery.Contains(i.company_usr_id) 
```

注意`!`方法调用之前的。`!`运算符（又名[逻辑否定运算符](http://msdn.microsoft.com/en-us/library/f2kd6eb2)）只是否定以下表达式的结果。就这样`Contains`变成了`Not Contains`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:16:16.247

要实现不包含可以使用`!subQuery.Contains(i.company_usr_id)`.

# objective-c - Objective-C中的AbstractFactory模式

> ID：12142627
> 
> 赞同：4
> 
> 时间：2012-08-27T13:10:26.843
> 
> 标签：objective-c, abstract-factory

我只是想学习目标-c。

我已经看过不同语言的[AbstractFactory模式的维基百科示例。](http://en.wikipedia.org/wiki/Abstract_factory_pattern#Objective-C)

这是按钮定义：

```
@protocol Button
- (void)paint;
@end

@interface WinButton : NSObject <Button>
@end 
```

这是一个工厂：

```
@implementation WinFactory
- (id)createButton {
    return [[[WinButton alloc] init] autorelease];
}
@end 
```

据我所知，obj-c 的`id`关键字应该类似于 C#'s`var`或 C++11's `auto`，对吧？

所以我的问题是：

为什么让工厂返回一个未指定类型的通用对象？这是一个错误（让工厂返回其他不是按钮的东西）还是有任何理由这样做？

我会这样写一个工厂：

```
@implementation WinFactory
- (id<Button>)createButton {
    return [[[WinButton alloc] init] autorelease];
}
@end 
```

我错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T13:28:34.400

> 为什么让工厂返回一个未指定类型的通用对象？

在您看到返回的许多情况下`id`，这是因为它们的类型不一致（真正的抽象对象），或者是因为会引入隐式向上转换。

> 这是一个错误（让工厂返回其他不是按钮的东西）还是有任何理由这样做？

这不是错误。当然，您不应该返回不匹配的类型。

> 我会这样写工厂：……我错了吗？

```
@implementation WinFactory
- (id<Button>)createButton {
    return [[[WinButton alloc] init] autorelease];
}
@end 
```

在这种情况下，最大的问题是 ObjC 的类型非常松散，您应该**努力确保所有选择器的参数和返回类型都匹配**。也就是说，`createButton`所有翻译中的每一个都应该返回相同的类型并具有相同的参数类型。有时您必须选择一个更具描述性的名称，以避免编译器产生歧义。

这应该解释为什么`+[NSString string]`返回`id`- 如果它返回`NSString`，那么`+[NSMutableString string]`可能是警告的来源。这是因为编译器可能很难（不可能）将方法声明与动态实例匹配。这也可以帮助您理解选择器的“冗长”命名，例如在方法中也包含类型的便利构造函数（例如`+[NSDictionary dictionaryWithObject:]`，与 simple 相对`+[NSDictionary withObject:]`）。

但是要解决您的问题：`id<Button>`或者`NSObject<Button>*`其他一些合格的类型就可以了-*只要您可以使用该通用方法签名即可*。您正在引入类型限定，它可以帮助编译器帮助*您*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T13:29:06.723

这里更正确的返回类型是：

```
- (id<Button>)createButton; 
```

这意味着返回的类型是符合`<Button>`协议的对象。我可能会修复 WP 页面只是为了更清楚一点。该`<Button>`协议还应该从协议继承`<NSObject>`完整性（并简化实际使用）。

请注意，抽象工厂模式在 ObjC 中有些不寻常。我正在尝试考虑在 UIKit 或 Foundation 中使用它的情况。类在内部（例如 in `NSNumber`）处理这种情况更为常见，称为类集群。

尝试在 ObjC 中以 C++ 或 C# 风格编写代码时要非常小心。ObjC 不是一门静态语言，使用的模式往往大相径庭。（我并不是说 AF 是一种静态模式。它*可以*在 ObjC 中很好地使用。我只是说您在尝试学习 ObjC 时正在查看它的事实意味着您可能正在向后接近它，学习“我如何在 ObjC 中做这个 C++”而不是学习“我如何在 ObjC 中开发。”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T05:47:54.197

Objective-C 有类簇的概念，类簇是抽象工厂。 [看到这个答案。](https://stackoverflow.com/a/23094194/1059025)

# issue-tracking - 问题跟踪系统中问题状态的含义

> ID：12142633
> 
> 赞同：2
> 
> 时间：2012-08-27T13:10:54.733
> 
> 标签：issue-tracking

在几乎问题跟踪系统中有一些常规问题状态：

`New`, `In Progress`, `Resolved`,和. `Feedback`_`Closed``Rejected`

*   `New`: 一个新的问题要解决。
*   `In progress`: 有人正在研究这个问题。
*   `Resolved`：解决问题后，将状态设置为`Resolved`，验证后关闭问题（例如项目经理）。
*   `Feedback`: ???
*   `Closed`: 每个问题的最终状态。
*   `Rejected`: ???

我想知道在什么情况下我应该将问题的状态更改为`Feedback`or `Rejected`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:32:03.240

我无法找到描述“反馈”的有价值的内容。但是，我可以想象某个问题在解决之前的某个时间点或一旦解决后就会进入“反馈”状态。预解决，它可能表明被指派处理该问题的人正在寻求澄清问题的描述，或者可能报告该问题的人事后考虑实施是否会导致项目的某些其他方面中断并且正在寻找征求意见以支持或驳斥该问题。解决后，“反馈”可能是在关闭问题之前要求进行一些额外的调整，或者可能表明实施完全有缺陷！一般来说，我会说认为“反馈”状态表明某种形式的，嗯，

就“被拒绝”而言，我想人们会使用它的情况包括关闭一个实际上不是错误的错误。将其视为解决未解决问题的一种方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-02T13:39:47.460

`Resolved`: 当程序员修复问题并且问题要进行 CodeReview 或测试时使用。

`Rejected`: 当测试人员或代码审查失败并返回给程序员修复问题时使用。

`Invalid`：当错误无效时（缺少相关部分，不可复制，...）

`Feedback`：可以重新打开问题（恕我直言，但不确定）

# c# - 如何从 URI 下载图像并从中创建位图对象？

> ID：12142634
> 
> 赞同：14
> 
> 时间：2012-08-27T13:10:56.193
> 
> 标签：c#, windows-phone

我正在尝试从网站下载图像并基于该图像创建位图。它看起来像这样：

```
 public void test()
    {
            PostWebClient client = new PostWebClient(callback);
            cookieContainer = new CookieContainer();
            client.cookies = cookieContainer;
            client.download(new Uri("SITE"));
    }

    public void callback(bool error, string res)
    {
            byte[] byteArray = UnicodeEncoding.UTF8.GetBytes(res);

            MemoryStream stream = new MemoryStream( byteArray );
            var tmp = new BitmapImage();
            tmp.SetSource(stream);
    } 
```

我在回调方法的最后一行收到“未指定错误”。有趣的事实是，如果我使用 BitmapImage(new Uri("SITE")) 它工作得很好......（我不能这样做，因为我想从那个 URL 获取 cookie。图像是 jpg。PostWebClient 类-> [http://paste.org/53413](http://paste.org/53413)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-12-24T08:25:41.583

这是 Bitmap 类文档中最简单的代码。

```
 System.Net.WebRequest request = 
        System.Net.WebRequest.Create(
        "http://www.microsoft.com//h/en-us/r/ms_masthead_ltr.gif");
    System.Net.WebResponse response = request.GetResponse();
    System.IO.Stream responseStream = 
        response.GetResponseStream();
    Bitmap bitmap2 = new Bitmap(responseStream); 
```

[位图的 MSDN 链接](http://msdn.microsoft.com/en-us/library/z7ha67kw%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-17T07:30:09.690

最简单的方法是通过[WebClient](https://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)实例打开网络流并将其传递给Bitmap[类](https://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)的[构造函数：](https://msdn.microsoft.com/en-us/library/z7ha67kw.aspx)

```
using (WebClient wc = new WebClient())
{
    using (Stream s = wc.OpenRead("http://hell.com/leaders/cthulhu.jpg"))
    {
        using (Bitmap bmp = new Bitmap(s))
        {
            bmp.Save("C:\\temp\\octopus.jpg");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T10:03:53.533

你可以试试下面的代码：

```
 private Bitmap LoadPicture(string url)
        {
            HttpWebRequest wreq;
            HttpWebResponse wresp;
            Stream mystream;
            Bitmap bmp;

            bmp = null;
            mystream = null;
            wresp = null;
            try
            {
                wreq = (HttpWebRequest)WebRequest.Create(url);
                wreq.AllowWriteStreamBuffering = true;

                wresp = (HttpWebResponse)wreq.GetResponse();

                if ((mystream = wresp.GetResponseStream()) != null)
                    bmp = new Bitmap(mystream);
            }
            finally
            {
                if (mystream != null)
                    mystream.Close();

                if (wresp != null)
                    wresp.Close();
            }
            return (bmp);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T07:45:06.720

试试这个：

```
 string url ="http://www.google.ru/images/srpr/logo11w.png"
            PictureBox picbox = new PictureBox();
            picbox.Load(url);
            Bitmap bitmapRemote = (Bitmap) picbox.Image; 
```

url - 互联网图像，我们创建新的实例对象 PictureBox，然后调用**NOT ASYNC**过程从 url 加载图像，当图像检索到图像作为位图。您也可以使用**线程**处理表单，在其他线程中调用 load 并在完成时通过 deleate 方法检索图像。

# wpf - RadContextMenu 图标在动态绑定中不可见

> ID：12142639
> 
> 赞同：1
> 
> 时间：2012-08-27T13:11:17.567
> 
> 标签：wpf, data-binding, telerik, icons, contextmenu

我在显示`RadContextMenu`带有图标的上下文菜单时遇到问题，我正在使用动态绑定到包含上下文菜单项（文本和图标）的可观察集合，我正在关注本教程“[动态绑定](http://www.telerik.com/help/wpf/radcontextmenu-populating-with-data-binding-to-dynamic-data.html)”，以下是我的 XAML

```
<!-- Context Menu Resources Start-->
    <Style x:Key="MenuItemStyle" TargetType="{x:Type telerik:RadMenuItem}">
            <Setter Property="Icon">
                <Setter.Value>
                    <Image Source="{Binding IconPath, Converter={StaticResource pathtoimage}}" />
                </Setter.Value>
            </Setter>
        </Style>

        <HierarchicalDataTemplate x:Key="MenuItemTemplate">
            <telerik:RadButton Content="{Binding Title}" HorizontalContentAlignment="Left" Background="Transparent" BorderBrush="Transparent" />
        </HierarchicalDataTemplate>

<!-- Context Menu Resources End --> 
```

以下是放置上下文菜单的 RadGridView 的 XAML。

```
<telerik:RadGridView x:Name="myGridView" AutoGenerateColumns="False" ItemsSource="{Binding GridData}" VerticalAlignment="Top">
        <telerik:RadGridView.Columns>
            <telerik:GridViewDataColumn DataMemberBinding="{Binding Result}" Header="Result"/>
            <telerik:GridViewDataColumn DataMemberBinding="{Binding Category}" Header="Category"/>
        </telerik:RadGridView.Columns>
        <telerik:RadContextMenu.ContextMenu>
            <telerik:RadContextMenu ItemsSource="{Binding ContextMenuItems}" ItemContainerStyle="{StaticResource MenuItemStyle}" ItemTemplate="{StaticResource MenuItemTemplate}">                 
            </telerik:RadContextMenu> 
```

视图模型如下

```
class MainViewModel
{
    private ObservableCollection<MenuItemObj> menuitems_;
    public ObservableCollection<MenuItemObj> ContextMenuItems
    {
        get
        {
            return menuitems_;
        }
        set
        {
            menuitems_ = value;
        }
    }

    private ObservableCollection<GridRowDataObj> griddata_;
    public ObservableCollection<GridRowDataObj> GridData
    {
        get
        {
            return griddata_;
        }
        set
        {
            griddata_ = value;
        }
    }
}

public class MenuItemObj
{
    public string Title { get; set; }
    public string IconPath { get; set; }
}

public class GridRowDataObj
{
    public string Result { set; get; }
    public string Category { set; get; }
} 
```

并将 DataContext 设置为

```
//TODO
        ObservableCollection<GridRowDataObj> gd = new ObservableCollection<GridRowDataObj>();
        gd.Add(new GridRowDataObj() { Result = "Primary School", Category = "SSC" });
        gd.Add(new GridRowDataObj() { Result = "Higher School", Category = "HSSC" });
        gd.Add(new GridRowDataObj() { Result = "Higher School", Category = "HSSC" });

        //TODO
        ObservableCollection<MenuItemObj> mi = new ObservableCollection<MenuItemObj>();
        mi.Add(new MenuItemObj() { Title = "My Item 1", IconPath = "/Images/item1.png" });
        mi.Add(new MenuItemObj() { Title = "My Item 2", IconPath = "/Images/item2.png" });
        mi.Add(new MenuItemObj() { Title = "My Item 3", IconPath = "/Images/item3.png" });

        MainViewModel mvm = new MainViewModel();
        mvm.ContextMenuItems = mi;
        mvm.GridData = gd;

        this.DataContext = mvm; 
```

但是当我运行代码时，这就是我得到的

![代码输出](../Images/8ffe86ea8ae0b07377c19c282727ef04.png)

我不确定为什么不显示第一个和第二个菜单项的图标，我检查了该图标是否仅显示最后一个菜单项。我有完整的项目复制这个场景，如果有人需要他/她可以要求吗？请帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:58:52.463

我在 Telerik 支持论坛上发布了这个问题，并在这里得到了一个可行的解决方案，

[RadContextMenu 图标问题](http://www.telerik.com/community/forums/wpf/context-menu/radcontextmenu-items-icon-not-visible-with-dynamic-binding.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:51:29.017

在您的图像资源中添加 x:Shared="False" 以便为每个图标创建一个新图像。

```
<Setter.Value>
    <Image Source="{Binding IconPath, Converter={StaticResource pathtoimage}}" x:Shared="False" />
</Setter.Value> 
```

# javascript - History.js 和刷新

> ID：12142642
> 
> 赞同：0
> 
> 时间：2012-08-27T13:11:19.557
> 
> 标签：javascript, jquery, html

我正在构建一个文章列表，当访问者点击一篇文章时，我的网站在 ajax 的帮助下加载到完整文章中，并使用文章 url 生成 pushState 到 example article.php?id=55 所以当访问者刷新或访问他们将登陆“文章项目”页面而不是列表页面的 url。

但是现在我的问题是，当访问者在更改 url 时刷新我的页面时，他会像我不会那样登陆“文章项目”页面，但是如果他想通过按后退按钮返回到我的文章列表，没有任何反应，我有没有好主意来解决这个问题。

我知道当有人点击后退按钮时会触发 popState，所以我总是可以在那里设置一个正则表达式并重定向用户，但感觉不正确。

这里有人玩过history.js 或本地历史（html5）吗？我感谢所有的帮助，开枪吧！

例子：

```
$(".list-item a").click(function(e){
      e.preventDefault();
      History.pushState(null, $(this).text(), $(this).attr('href'));
      div = this;
}); 
```

活生生的例子。Githubs 树[https://github.com/blog/760-the-tree-slider](https://github.com/blog/760-the-tree-slider)。

编辑：现在已经测试了很多狗屎，但没有让它工作。一种解决方案是使用 History.replaceState(null, null, location.href); location.reload();

在我的“item.php”中，但是当我按下后退按钮时，这段代码应该会被触发。但是当我在 popstate 上 lissen 时，它会在 init 上触发。

# android - 是否可以使用我的联系人应用程序启动选项以在单击 Android 图标上进行选择？

> ID：12142646
> 
> 赞同：1
> 
> 时间：2012-08-27T13:11:28.157
> 
> 标签：android, android-intent, android-contacts, options

是否可以启动一个选项，例如在 Android 中单击要在联系人图标上打开的应用程序？因此，当我单击 Android 手机图标时，它应该会询问您是要启动 Android 默认应用程序还是我的应用程序。

基本上我已经开发了带有自定义功能的 Android 应用程序的通话记录模块，所以我想让用户在点击 Android 手机图标时选择任何选项。

那么有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:30:41.660

这是可能的，事实上，当您为所需操作安装了多个应用程序时，它会自然而然地发生。意图过滤器会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T05:28:12.043

有可能的。我尝试使用**Dail**图标将此代码放入您的 androidmenifest 文件中

```
<intent-filter>
    <category android:name="android.intent.category.LAUNCHER" />
    <category android:name="android.intent.category.DEFAULT" />

    <action android:name="android.intent.action.DIAL" />
</intent-filter> 
```

当单击呼叫图标然后使用列表打开选项完成操作时，我的应用程序在列表中。

我认为还有可用于**联系人**图标的操作标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:17:43.627

不，这是不可能的。当您单击启动器中的图标时，它只会启动单击的应用程序。您可以改为询问用户在某些情况下使用哪个应用程序，例如尝试打电话给某人时。我不太确定，但您可以询问用户在单击未接来电通知时使用哪个日志。

# extract - 从 100 个 .htm 文件中提取“http”字符串

> ID：12142647
> 
> 赞同：-1
> 
> 时间：2012-08-27T13:11:28.140
> 
> 标签：extract

我知道一点 php，一点 python，而且我在寻找工具方面非常精明，但是我找不到可以解析 htm 文件并返回所有包含“http”的字符串的工具或方法。

我知道有快速修复。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:15:41.003

你可以在python中试试这个：

```
def grepFileForLines(self, fileName = "", keepLinesWith = ""):
    fileObj = open(fileName, 'r')
    matches = []
    for line in fileObj:
        if line.find(keepLinesWith) > -1:
            matches.append(line)
    return matches 
```

# extjs - ExtJS4.1 网格更新：更改不会立即反映。需要再次搜索才能看到 IE9 中的更新值

> ID：12142648
> 
> 赞同：0
> 
> 时间：2012-08-27T13:11:29.237
> 
> 标签：extjs

我是 Extjs4.1 的新手。我需要编辑网格数据单元格并在按下网格工具栏中的保存按钮时保存的编辑值。它工作得很好。但变化不会立即反映出来。当我按下保存按钮时，更新的单元格具有旧值。我需要单击搜索按钮以查看更新的值。

我`store.load();`在 saveFunction() 内部调用，我可以将编辑的值存储在 DB 中。但是 Grid 不会立即在 IE9 中显示更新的值。

请有人帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:50:51.260

我终于得到答案了。我刚刚在 ajax 成功加载了商店 `success: function(response, options) { store.load(); }`。

谢谢大家。

# matlab - 如何在 Matlab 中绘制相互上方的图形？

> ID：12142650
> 
> 赞同：0
> 
> 时间：2012-08-27T13:11:30.593
> 
> 标签：matlab, graph, plot

我想在 Matlab 中绘制两个（或更多）图。我希望它们在第三个上方的第二个上方对齐，依此类推。但是子情节对我来说不是这样。我也不希望它们都以不同的颜色出现在同一张图上，只是为了一个在另一个之上。可能吗？我正在寻找这样的命令，但没有任何成功。提前感谢您的提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:46:09.283

如果您所说的“一个在另一个之上”是一个“在另一个之上”，那么我认为您需要使用的是*轴*命令。话虽如此，为了让你的情节更具可读性，我认为同一情节中有两个以上的比例会让人很难阅读。

[这个](http://www.mathworks.com/help/techdoc/creating_plots/f1-11215.html)Matlab 的帮助页面向您展示了如何做到这一点，它的要点显示在以下脚本中：

```
y2 = 1000.*rand(100,1);
x2 = 0:99;

% Plot the first data set
hl1 = line(x1,y1,'Color','r');
% Get the axes and configure it
ax1 = gca;
set(ax1,'XColor','r','YColor','r')

%Create the new axes
ax2 = axes('Position',get(ax1,'Position'),...
           'XAxisLocation','top',...
           'YAxisLocation','right',...
           'Color','none',...
           'XColor','k','YColor','k');
% Plot the second data set with the new axes
hl2 = line(x2,y2,'Color','k','Parent',ax2); 
```

上面的脚本创建了以下[绘图](https://img.skitch.com/20120827-crm7cq1dbbiq86xxfu4imtp1hp.png)，其中一组轴为红色，另一组轴为黑色。

![在此处输入图像描述](../Images/00d6b8a76daf8cfe3ac2defe21f70443.png)

希望这可以帮助。

# http - PUT 和 DELETE HTTP 请求方法有什么用处？

> ID：12142652
> 
> 赞同：102
> 
> 时间：2012-08-27T13:11:37.783
> 
> 标签：http, httprequest

我从未使用过 PUT 或 DELETE HTTP 请求方法。我倾向于在系统状态（我的应用程序或网站）可能不受影响（如产品列表）时使用 GET，并在受影响时（如下订单）使用 POST。这两个不是总是足够的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-27T13:20:41.597

DELETE 用于删除请求资源：

> DELETE 方法请求源服务器删除由 Request-URI 标识的资源。此方法可能会被源服务器上的人工干预（或其他方式）覆盖。客户端不能保证操作已经执行，即使源服务器返回的状态码表明操作已经成功完成……</p>

PUT 用于在服务器上放置或更新资源：

> PUT 方法请求将封闭的实体存储在提供的 Request-URI 下。如果 Request-URI 引用了一个已经存在的资源，封闭的实体应该被认为是在源服务器上的一个修改版本。如果 Request-URI 不指向现有资源，并且该 URI 能够被请求用户代理定义为新资源，则源服务器可以使用该 URI 创建资源……</p>

有关完整规格，请访问：

*   [http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

[由于当前的浏览器很遗憾不支持 HTML 表单中的 POST 和 GET 以外的任何其他动词](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1)，因此您通常无法充分利用 HTTP（尽管您仍然可以通过 JavaScript 劫持它们的提交）。HTML 表单中不支持这些方法导致 URI 包含动词，例如

```
POST http://example.com/order/1/delete 
```

甚至更糟

```
POST http://example.com/deleteOrder/id/1 
```

通过 HTTP 有效地隧道化 CRUD 语义。但是动词从来都不是 URI 的一部分。相反，HTTP 已经通过 HTTP 方法提供了对资源（例如订单）进行 CRUD 的机制和语义。HTTP 是一种协议，而不仅仅是一些数据隧道服务。

因此，要删除网络服务器上的资源，您可以调用

```
DELETE http://example.com/order/1 
```

并更新它你会打电话

```
PUT http://example.com/order/1 
```

并在 PUT 正文中提供更新的资源表示供网络服务器应用。

[因此，如果您正在为REST API](http://en.wikipedia.org/wiki/Representational_state_transfer)构建某种客户端，您可能会使其发送 PUT 和 DELETE 请求。这可能是内置在浏览器中的客户端，例如通过 JavaScript 发送请求，也可能是在服务器上运行的某个工具等。

有关更多详细信息，请访问：

*   [http://martinfowler.com/articles/richardsonMaturityModel.html](http://martinfowler.com/articles/richardsonMaturityModel.html)
*   [大多数 Web 浏览器中是否提供 PUT、DELETE、HEAD 等方法？](https://stackoverflow.com/questions/165779/are-the-put-delete-head-etc-methods-available-in-most-web-browsers)
*   [为什么 HTML 表单中没有 PUT 和 DELETE 方法](https://softwareengineering.stackexchange.com/questions/114156/why-there-are-no-put-and-delete-methods-in-html-forms)
*   [应该在表单中使用 PUT 和 DELETE 吗？](https://stackoverflow.com/questions/5162960/should-put-and-delete-be-used-in-forms)
*   [http://amundsen.com/examples/put-delete-forms/](http://amundsen.com/examples/put-delete-forms/)
*   [http://www.quora.com/HTTP/Why-are-PUT-and-DELETE-no-longer-supported-in-HTML5-forms](http://www.quora.com/HTTP/Why-are-PUT-and-DELETE-no-longer-supported-in-HTML5-forms)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-27T13:29:14.797

使用 HTTP 请求动词，例如 GET、POST、DELETE、PUT 等...使您能够构建 RESTful Web 应用程序。在这里阅读：[http ://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

从中受益的最简单方法是查看此示例。每个 MVC 框架都有一个`Router/Dispatcher`将 URL-s 映射到 actionControllers 的。所以像这样的 URL：`/blog/article/1`会调用`blogController::articleAction($id);` 现在这个路由器只知道 URL 或`/blog/article/1/`

但是，如果路由器知道整个 HTTP 请求对象而不仅仅是 URL，他就可以访问 HTTP 请求动词（GET、POST、PUT、DELETE...），以及有关当前 HTTP 请求的许多其他有用的东西。

这将使您能够配置应用程序，以便它可以接受相同的 URL 并根据 HTTP 请求动词将其映射到不同的 actionController。

例如：

如果你想检索第 1 条，你可以这样做：

```
GET /blog/article/1 HTTP/1.1 
```

但如果你想删除第 1 条，你会这样做：

```
DELETE /blog/article/1 HTTP/1.1 
```

请注意，两个 HTTP 请求具有相同的 URI，/blog/article/1，唯一的区别是 HTTP 请求动词。并且基于该动词，您的路由器可以调用不同的 actionController。这使您能够构建整洁的 URL-s。

阅读这两篇文章，它们可能会对您有所帮助：

[Symfony 2 - HTTP 基础](http://symfony.com/doc/current/book/http_fundamentals.html)

[Symfony 2 - 路由](http://symfony.com/doc/current/book/routing.html)

这些文章是关于 Symfony 2 框架的，但它们可以帮助您弄清楚 HTTP 请求和响应是如何工作的。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-05-14T11:10:09.120

虽然我冒着不受欢迎的风险，但我说**它们现在没用**了。

我认为它们在过去是很好用的，例如 DELETE 告诉服务器删除在提供的 URL 中找到的资源，而 PUT（及其同级 PATCH）告诉服务器以幂等方式进行更新。

事情发生了变化，URL 变得虚拟（例如，请参见**url 重写**）使资源失去了真实文件夹/子文件夹/文件的初始含义，因此 HTTP 协议方法（GET、POST、PUT/PATCH、DELETE）覆盖的 CRUD 动作动词失去了轨道.

举个例子：

*   **/api/entity/list/{id}**与**GET /api/entity/{id}**
*   **/api/entity/add/{id}**与**POST /api/entity**
*   **/api/entity/edit/{id}**与**PUT /api/entity/{id}**
*   **/api/entity/delete/{id}**与**删除 /api/entity/{id}**

左边没有写 HTTP 方法，本质上没关系（POST 和 GET 就够了），右边使用了适当的 HTTP 方法。

右侧看起来优雅、干净、专业。想象一下，现在您必须维护一个一直在使用优雅 API 的代码，并且您必须搜索删除调用的完成位置。您将搜索**“api/entity”**，在结果中您必须查看哪个正在执行 DELETE。或者更糟糕的是，你有一个初级程序员错误地将 PUT 切换为 DELETE 并且因为 URL 发生了同样的事情。

在我看来，将动作动词放在 URL 中比为该动作使用适当的 HTTP 方法具有优势，即使它不是那么优雅。如果您想查看删除调用的位置，您只需搜索**“api/entity/delete”**即可立即找到它。

在没有整个 HTTP 方法数组的情况下构建 API 可以更容易地在之后使用和维护

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-20T06:14:12.453

请参阅@Gordon 接受的答案，关键点很简单：

*PUT 和 DELETE 是具有含义的特定动词，指示服务器执行特定操作以及应如何处理指令。*

#### OK 标准和语义很好，但如果我只想以某种方式运行代码从数据库中删除某些内容，那么 DELETE 对我来说真正有用吗？

那么，如果我们说，“好吧，但我更容易通过向我的具有路径的 URI 发出 GET 来执行删除`/api/entity/delete/{id}`（正如@Bogdan 的回答中所建议的那样）。好吧，让我们看看 GET 的定义：

> GET 方法意味着检索由 Request-URI 标识的任何信息（以实体的形式）

来源 - W3C 标准 - [https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

如果您使用`GET`a`DELETE`您*显然是*根据其标准定义滥用该方法。

好吧，让我们进一步说'好的，但这并不重要，因为对于开发人员来说，在某处读取使用 GET 方法并读取的 URI 更实用，`/api/entity/delete/{id}`而不是使用删除与 GET 具有相同签名的资源的 DELETE 方法检索的方法，以便开发人员了解这是为了删除。让我们考虑一个结构良好的 DELETE 方法签名（示例适用于 .NET Core 5）：

```
// DELETE: api/TodoItems/5
[HttpDelete("{id}")]
public async Task<IActionResult> DeleteTodoItem(long id)
{ 
```

这不会响应获取请求，（例如，在调用 API 时意外删除而不是检索更受保护 - 开发人员必须*显式*执行对 API 的 DELETE 请求）。我们有一个非常清晰、结构良好和命名的 API 操作，开发人员甚至自动化工具都可以清楚地发现它（例如，开发人员现在可以专门搜索`DELETE`代码中的任何出现，或明确指示 DELETE 的方法名称） ）。更重要的是，这种模式符合“RESTFUL”API 的普遍接受标准，该标准*应该*使 API 更广泛地被开发人员（以及可能的任何自动化工具）识别和解释。

好的，这很好，但是将其设为 DELETE 的真正区别是什么？为什么还要使用 DELETE 而不是 GET？我的操作是从数据库中删除一些东西，我的网络服务器为什么要关心？OK，我们来思考一下DELETE的定义：

> 9.7 DELETE - DELETE 方法请求源服务器删除由 Request-URI 标识的资源。此方法可能会被源服务器上的人工干预（或其他方式）覆盖。

所以现在，如果我们指定删除，我们有可能在服务器上出现*特定行为*，这可能允许通过手动或自动干预来撤销删除操作。在特定用例中，这可能很重要。

#### OK 那么 DELETE 对我有用，但为什么要使用 PUT？例如，如果我只是创建一个使用 POST 的“upsert”方法，如果资源存在则更新资源，如果不存在则创建资源，这样会更方便

我个人通常在实现对数据库进行操作的 API 时执行此操作，尽管 PUT 再次具有特定含义，即它*专门指示资源的更新，而 POST 指示创建*，因此使用 POST 来创建和更新是反标准的。我自己的观点是，REST API 是一种情况，我通常认为 upsert 功能的实用性比严格使用正确的动词来添加和插入更重要，但我可能在这里遗漏了一些东西。

在 REST api 之外使用 PUT 对于实际目的可能更重要，例如，如果我们正在执行更新操作，其中服务器可以通过了解资源已更新来潜在地清除任何缓存（如果我们的资源更重要是一个完整的文档，例如）。在 RESTful API 中使用 PUT 进行更新操作时，可能有一些我没有考虑过的实际优势。

POST 的标准定义声明 POST 成功响应应该是 201（已创建），而不仅仅是通用的“200 OK”，以便我们能够正确解释资源创建显式成功。该响应不适用于更新操作，但标准中没有为响应代码指定“必须”。对于开发人员来说，使用 POST 进行 upsert 并在成功时返回 200（OK）当然很常见，无论是创建还是更新。

PUT 的标准更加严格，并指定在尝试更新时任何意外创建的资源必须通过 201 响应代码指示。如果指定 URI 中不存在现有资源，则可能发生这种情况。该标准解释说，如果我们使用 PUT，我们将获得更清晰的反馈，说明我们尝试更新操作的结果是否符合我们的预期。

来自 W3C 标准：

> [如果 put] 不指向现有资源，并且该 URI 能够被请求用户代理定义为新资源，则源服务器可以使用该 URI 创建资源。如果创建了新资源，源服务器必须通过 201 (Created) 响应通知用户代理。如果修改了现有资源，则应发送 200（OK）或 204（No Content）响应代码以指示请求成功完成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-08T10:58:13.930

**安全方法：**获取资源/不修改资源
**幂等：**如果多次请求，资源状态不会发生变化
**不安全方法：**创建或更新资源/修改资源
**非幂等：**如果多次请求，资源状态会发生变化

**根据您的要求：**

1) 对于安全和幂等操作 (Fetch Resource) 使用 --------- **GET METHOD**
2) 对于不安全和非幂等操作 (Insert Resource) 使用------ **POST METHOD**
3)对于不安全和幂等操作（更新资源）使用--------- **PUT METHOD**
3）对于不安全和幂等操作（删除资源）使用--------- **DELETE METHOD**

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2021-11-11T11:49:55.233

# 放

`PUT`每当您需要更改资源时，都会使用该方法。资源，它已经是资源集合的一部分。这里要注意的一件事是，`PUT`方法修改了整个资源，而`PATCH`方法用于修改资源或数据的必要部分。

# 删除

顾名思义，`DELETE`request方法用于删除指定的资源。它请求源服务器删除由 Request-URL 标识的资源。

我希望这个简单的定义有所帮助。

# ruby-on-rails - 从 rails 中的 url 获取控制器和操作信息

> ID：12142654
> 
> 赞同：9
> 
> 时间：2012-08-27T13:11:39.627
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如果有此路由规则，我如何获取有关任何（不仅是当前）url 的控制器和操作名称的信息？

例如：

```
function_i_need('/pages/5') 
```

返回

```
{:controller => 'page', :action => 'show', :id => 5} 
```

UPD：答案发现[Rails 将 url 解析为哈希（路由）](https://stackoverflow.com/questions/2733678/rails-parse-url-to-hashroutes)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-29T18:24:52.210

你可以这样做：

```
Rails.application.routes.recognize_path "/pages/5" 
```

# php - 静态方法 X mysql_real_escape_string()

> ID：12142655
> 
> 赞同：0
> 
> 时间：2012-08-27T13:11:42.020
> 
> 标签：php, oop, mysql-real-escape-string

我的班级中有以下静态方法。

```
public static function GETSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = ""){} 
```

在此方法中，我有以下说明：

```
if(function_exists("mysql_real_escape_string")){
    $theValue = mysql_real_escape_string($theValue);
    echo "a: " . $theValue;
} else {
    $theValue = mysql_escape_string($theValue);
    echo "b: " . $theValue;
} 
```

当我运行这个程序时，屏幕上会打印“a:”。这意味着 $theValue 失去了价值。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:26:34.083

出现问题是因为在调用`mysql_real_escape_string`函数之前我没有连接到数据库。

# sql-server - 如何在不在 SQL Server 中编辑的情况下运行 where 子句来存储过程？

> ID：12142656
> 
> 赞同：0
> 
> 时间：2012-08-27T13:11:44.977
> 
> 标签：sql-server, sql-server-2008

如果我有一个返回结果表的 SQL SERVER 2008 存储过程，是否可以在`WHERE`不编辑存储过程本身的情况下对结果表运行子句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:14:14.927

不是直接的。

将输出重定向到临时表。从中选择并过滤

```
CREATE TABLE #foo (...)

INSERT #foo EXEC bar @p1

SELECT * FROM @foo WHERE ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:15:12.353

我建议创建一个#temp 表以将存储过程的结果插入到该表中，然后使用该`WHERE`子句从中进行选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:20:41.597

您可以使用表值函数，并将其与此处的其他答案结合起来......即：创建一个 TVF，它创建一个连接本地临时表，用存储过程调用的结果填充该表并返回结果. 然后，您可以`SELECT`从该 TVF 应用所需的`WHERE`子句。

但是，对于大型数据集，这可能会非常慢！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:42:42.967

Openrowset 是我想到的一个选项，它的工作原理是这样的

```
SELECT  *
FROM    OPENROWSET ('SQLOLEDB','Server=(local);TRUSTED_CONNECTION=YES;','set fmtonly off      exec master.dbo.sp_who')
AS tbl 
```

您可以直接应用 where 子句。

# c# - LINQ with Entity Framework，得到计算的总和

> ID：12142659
> 
> 赞同：2
> 
> 时间：2012-08-27T13:11:53.543
> 
> 标签：c#, linq, entity-framework, linq-to-entities, sum

我有以下数据：

![在此处输入图像描述](../Images/e0fbfa9dce70fa8a33195eaf5ab68631.png)

数字可以为 NULL

我正在编写一个 LINQ 语句以获得以下数字：

*   100 与 110 是 110
*   200 系数 90 是 180

需要的结果：290

我的 LINQ 语句目前看起来像这样：

```
(from b in data
where b.Number.HasValue
select new
{
    Number = b.Number.Value,
    b.Factor
}).Sum(o => o.Number * (o.Factor / 100)); 
```

我收到以下错误：

> 转换为值类型“十进制”失败，因为具体化值为空。结果类型的泛型参数或查询必须使用可为空的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:11:53.543

这可以通过像这样转换 Sum 的内容来解决：

```
(from b in data
where b.Number.HasValue
select new
{
    Number = b.Number.Value,
    b.Factor
}).Sum(o => (decimal?)(o.Number * ((decimal)o.Factor / 100))) ?? 0; 
```

（注意：我在写问题时找到了答案，并认为我不妨制定一个答案并将其发布给其他人查找）

# ruby-on-rails - 为什么在有子句中带有小于运算符的 ActiveRecord 查询不返回预期的记录？

> ID：12142666
> 
> 赞同：1
> 
> 时间：2012-08-27T13:12:09.657
> 
> 标签：ruby-on-rails

这第一个 squeel 查询给了我我的期望：所有 QuoteStops 的给定报价具有最高序列。

```
QuoteStop.joins{quote}.group{quote.id}.having{sequence == max(sequence)}.pluck("quote_stops.sequence")

SELECT quote_stops.sequence FROM "quote_stops" INNER JOIN "quotes" ON "quotes"."id" = "quote_stops"."quote_id" GROUP BY "quotes"."id" HAVING "quote_stops"."sequence" = max("quote_stops"."sequence")

[2, 3 ... 2] 
```

但是，如果我将 having 子句中的比较更改为`<`SQL 看起来是正确的，但是当我想成为所有没有最高序列的 QuoteStops 时，结果是一个空列表。

```
QuoteStop.joins{quote}.group{quote.id}.having{ sequence < max(sequence) }.pluck("quote_stops.sequence")

SELECT quote_stops.sequence FROM "quote_stops" INNER JOIN "quotes" ON "quotes"."id" = "quote_stops"."quote_id" GROUP BY "quotes"."id" HAVING "quote_stops"."sequence" < max("quote_stops"."sequence")

[] 
```

我错过了什么？Squeel 或 ActiveRecord 的答案很好。

# javascript - jmrware linkify 不接受没有架构的 url (http)

> ID：12142672
> 
> 赞同：-2
> 
> 时间：2012-08-27T13:12:40.467
> 
> 标签：javascript, regex, string, url, linkify

我在使用 javascript 正则表达式将 url 链接到可点击链接时遇到了一个奇怪的问题。

在 so.com 上进行了大量挖掘之后，我开始使用[jmrware/LinkifyURL.js](https://github.com/jmrware/LinkifyURL)将 url 转换为可点击的链接。但是当尝试在没有架构的情况下转换 url ((htt|ft)ps) 时，它根本无法识别 url。

例子：

> [http://www.google.com](http://www.google.com)（接受）
> www.google.com（不接受）
> google.com（不接受）。

那里的任何人都可以帮我找出解决方案。

编辑：在我的场景中，我必须在用户可以输入任何 url 的文本区域中接受用户的输入。在网站上显示时，我必须链接在用户输入中找到的任何 url。

这是我试图链接的测试内容。

```
> http://example.com:80                                            (linkified)<br/>
> http://example.com:80/path/                                      (linkified)<br/>
> http://example.com:80/path/file.txt                              (linkified)<br/>
> http://example.com:80/path/file.txt?query=val&var2=val2          (linkified)<br/>
> http://example.com:80/path/file.txt?query=val&var2=val2#fragment (linkified)<br/>
> http://example.com/(file's_name.txt)                             (linkified)<br/>
> http://[2001:0db8:85a3:08d3:1319:8a2e:0370:7348]                 (linkified)<br/>
> http://[2001:0db8:85a3:08d3:1319:8a2e:0370:7348]/file.txt        (linkified)<br/>
> http://youtube.com:80/path/file.txt?query=val&var2=val2          (linkified)<br/>
> www.example.me                                                   (not linkified)<br/>
> example.me                                                       (not linkified)<br/> 
```

在上面的代码中，最后两个字符串没有链接我想要的链接。我在 JavaScript RegExp 中尝试了消极的向后看，即使这样也没有运气。

((?!(http|ftp|https|ftps)://)^[a-z0-9-]+(.[a-z0-9-]+)+([/?].*)?) - 消极的回顾

我是so.com的新手，如果我的问题不清楚，请原谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:16:48.850

我是相关[链接项目](https://github.com/jmrware/LinkifyURL)的作者。按照设计，该`linkify()`函数仅匹配具有方案元素的 URL。如果没有这个限制，就会有太多的误报。（几乎任何字符串或子字符串都是有效的 URI。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:21:22.240

添加此行以确保`url`字符串是链接：

```
url = url.replace(/^(?!(?:http|https|ftp):\/\/)/i, 'http://'); 
```

# ruby-on-rails - Watir::Exception::NoValueFoundException: 此选择元素中没有 :text、:label 或 :value 选项

> ID：12142673
> 
> 赞同：1
> 
> 时间：2012-08-27T13:12:41.947
> 
> 标签：ruby-on-rails, ruby, selenium, watir, watir-webdriver

Watir 自动化测试：我正在尝试从选择框中选择一个选项，但由于选择框中的选项是动态设置的，因此我无法正确执行此操作。

html看起来像：

```
 <select id="abc">
     <option>Select</option>
     <option>First</option>
     <option>Second</option>
     <option>Third</option>
     </select> 
```

我尝试使用的命令如下：

```
$browser.select_list(:id, "abc").select("Second"). 
```

`<option>Second</option>`由于选项是动态设置的，如果HTML 中不存在上述命令，则上述命令将失败。

错误 ：

```
Watir::Exception::NoValueFoundException: No option with :text, :label or :value in this select element 
```

实现这一点的最佳方法是什么？有没有使用索引/顺序进行选择的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:25:51.173

如果直接访问选项，则可以按索引设置选项。

尝试：

```
$browser.select_list(:id, "abc").option(:index, 2).select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:34:06.623

尝试仅使用 select 方法并添加 text 属性，如下所示：

```
browser.select(:id, 'abc').option(:text, 'Second').select 
```

要不就

```
browser.option(:text, 'Second').select 
```

让我知道这些对你有用。

# reporting-services - SSRS 报告 - 使用表达式格式化日期列

> ID：12142676
> 
> 赞同：1
> 
> 时间：2012-08-27T13:13:01.007
> 
> 标签：reporting-services, date-formatting

我正在使用 SSAS 多维数据集在我的报告中显示数据。多维数据集中的日期列可能为空。如果它是空白的，我需要显示空白，否则我需要将其格式化为“MM-yyyy”。我在列中使用下面提到的表达式。

```
=IIf(Trim(Fields!Chargeoff.Value) = "", "", 
     Format(CDate(Fields!Chargeoff.Value), "MM-yyyy")) 
```

具有日期值的行与显示正确格式的日期完美。但是对于空白行，它会显示错误消息

> textrun 'Chargeoff.Paragraphs[0].TextRuns[0]' 的值表达式包含错误：从字符串“”到类型“日期”的转换无效

我尝试了 IsNothing、Null 以及我想到的所有其他内容，但无法显示空白。

有人对如何做到这一点有任何建议吗？

**更新**

我实际上在 SSAS 而不是 SSRS 中格式化了我的日期。这对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:01:30.610

```
=IIF(CDATE(IIF(TRIM(Fields!RequiredStart.Value).ToString().Length = 0,
"1/1/0001",
Fields!RequiredStart.Value)).ToString() = CDATE("01/01/0001"),
"",
Format(CDATE(IIF(TRIM(Fields!RequiredStart.Value).ToString().Length = 0,
"1/1/0001",
Fields!RequiredStart.Value)), "dd-MMM-yyyy")) 
```

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:17:54.160

尝试将空日期放入输出而不是空字符串。`00-0000` 它正在寻找一个日期，你给它一个空字符串。我想你要么必须给它一个`empty date`或一个`Default Date`

# openlaszlo - 将代码从 Open Laszlo 3.3 迁移到 5.0：TypeError：错误 #1009：无法访问空对象引用的属性或方法

> ID：12142681
> 
> 赞同：1
> 
> 时间：2012-08-27T13:13:49.150
> 
> 标签：openlaszlo, lzx

我在 5.0 中运行此代码时遇到了问题，但在 3.3 中运行良好。我已经设置了所有东西，但仍然存在问题。我这样做是错误的吗？

```
<canvas width="1000" height="584">

      <drawview width="200" height="300" 
              x="12" 
              y="12">
        <handler name="onwidth">
            this.redraw();
        </handler>
        <handler name="onheight">
            this.redraw();
        </handler>
        <method name="redraw">
            this.clear();
            var roundness = 5;
            this.beginPath();
            this.moveTo(roundness, 0);
            this.lineTo(this.width - roundness, 0);
            this.quadraticCurveTo(this.width, 0, this.width, roundness);
            this.lineTo(this.width, this.height - roundness);
            this.quadraticCurveTo(this.width, this.height, this.width - roundness, this.height);
            this.lineTo(roundness, this.height);
            this.quadraticCurveTo(0, this.height, 0, this.height - roundness);
            this.lineTo(0, roundness);
            this.quadraticCurveTo(0, 0, roundness, 0);
            this.closePath();

            var g = this.createRadialGradient(-this.width * .5, -this.height *.5, .7, 1.5 * this.width, 1.5 * this.height, 0)
            this.globalAlpha = 0;
            g.addColorStop(0, 0x000000);
            this.globalAlpha = 0.8;
            g.addColorStop(1, 0xffffff);

            this.setAttribute("fillStyle", g);
            this.fill();
        </method>
    </drawview>
</canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:44:23.107

onwidth 和 onheight 处理程序在 drawview 的初始化期间被调用，此时组件初始化尚未完成。如果您检查组件的 isinited 属性，则可以确保仅在组件准备好时才调用重绘方法。我在这个例子中添加了一些调试输出来告诉你发生了什么：

```
<drawview id="dv" width="100%" height="100%" 
      x="12" 
      y="12">
  <attribute name="isready" value="false" type="boolean" />
  <handler name="oncontext">
    this.setAttribute("isready", true);
    this.redraw();
  </handler>
  <handler name="onwidth">
    Debug.write('onwidth: calling redraw()');
    this.redraw();
  </handler>
  <handler name="onheight">
    Debug.write('onheight: calling redraw()');
    this.redraw();
  </handler>
  <method name="redraw">
    Debug.info('redraw: this.ininited=' + this.isinited + ' / isready=' + this.isready);
    if (this.isready) {
      this.clear();
      var roundness = 5;
      this.beginPath();
      this.moveTo(roundness, 0);
      this.lineTo(this.width - roundness, 0);
      this.quadraticCurveTo(this.width, 0, this.width, roundness);
      this.lineTo(this.width, this.height - roundness);
      this.quadraticCurveTo(this.width, this.height, this.width - roundness, this.height);
      this.lineTo(roundness, this.height);
      this.quadraticCurveTo(0, this.height, 0, this.height - roundness);
      this.lineTo(0, roundness);
      this.quadraticCurveTo(0, 0, roundness, 0);
      this.closePath();

      var g = this.createRadialGradient(-this.width * .5, -this.height *.5, .7, 1.5 * this.width, 1.5 * this.height, 0);
      this.globalAlpha = 0;
      g.addColorStop(0, 0x000000);
      this.globalAlpha = 0.8;
      g.addColorStop(1, 0xffffff);

      this.setAttribute("fillStyle", g);
      this.fill();
    }
  </method>
</drawview> 
```

**编辑：更新了代码支持以使用 oncontext 事件而不是 isinited 值**

我检查了 drawview 文档，drawview 有一个特殊的事件，称为 oncontext 事件。从文档：

> oncontext 事件在上下文准备好使用时发送，这在 IE DHTML 中可能需要一些时间。

如果您查看 OpenLaszlo 参考中的 drawview 文档，您将看到示例使用 oncontext 事件处理程序来绘制到画布中。
我已经更新了我的解决方案以使用附加属性*isready*，一旦收到 oncontext 事件，该属性就会设置为 true。正如您在下面的调试输出中看到的那样，isinited 在 isready 设置为 true 之前设置为 true：

```
onwidth: calling redraw() 
INFO: redraw: this.ininited=true / isready=false 
onheight: calling redraw() 
INFO: redraw: this.ininited=true / isready=false 
INFO: redraw: this.ininited=true / isready=true 
```

如果您为 DHTML 运行时编译错误代码，您应该看到以下警告：

> 警告：this.context 尚未定义。请在使用绘图方法之前检查 context 属性的存在，和/或注册 oncontext 事件以了解该属性何时可用。

不幸的是，SWF 运行时没有显示这样的警告。

# android - Android 模拟器 - 屏幕方向无法正常工作

> ID：12142686
> 
> 赞同：5
> 
> 时间：2012-08-27T13:14:12.853
> 
> 标签：android, android-emulator, screen-orientation, avd

我创建了一个虚拟 Android 设备，`480x800`运行它，并且我已经找到了如何更改屏幕`orientation`（纵向-横向，/// ）`CTRL+F11`，我使用这些键来更改.`CTRL+F12``KP7``KP9``orientation`

但是当我尝试其中一个键时，虚拟屏幕旋转了 90 度，但方向没有改变。因此，按钮垂直放置在屏幕上，所有文本也是如此。就像一张旋转 90 度的图片。

如何获得虚拟度数以实际切换到其他布局文件`(/res/layout-land/activity_entry.xml)`？Eclipse 的图形查看器确实可以正确切换`landscape/portrait`。

**编辑**
我在此`onCreateOptionsMenu(Menu menu)` 方法下的活动中添加了这部分，但应用程序无法识别屏幕方向更改：

```
@Override
public void onConfigurationChanged(Configuration newConfig) { 
    super.onConfigurationChanged(newConfig);
    Context context = getApplicationContext();
    CharSequence text = "Orientation changed";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
} 
```

**编辑 2**
当我`this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE)`从`onCreate()`方法中调用时，它工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-10T07:35:06.373

如果启用了自动旋转，请检查设置选项卡，如果它已关闭，请将其打开，然后每当您单击旋转按钮时，它都会自行旋转

[![在此处输入图像描述](../Images/0570b65ebbc3832ba2db93fab008f076.png)](https://i.stack.imgur.com/w3UIx.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:18:00.613

检查您是否在该活动的清单文件中设置了任何 android:screenOrientation。如果是，请将其删除并检查。

如果不工作，这似乎是 android 问题论坛中报告的错误。[在这里](http://code.google.com/p/android/issues/detail?id=17963)检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:22:22.270

首先关闭数字锁定，然后按`7`或按`9`并检查模拟器的方向是否已更改，其他更改模拟器方向的方法是按`ctrl`+ `f12`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-04T19:47:54.717

您可能会发现，就像我所做的那样，方向更改实际上已经生效，但屏幕仅比您预期的晚了几秒钟。换句话说，答案可能是“耐心蚱蜢”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-04T00:11:31.370

我最近遇到了这个问题，这里提供的答案并没有解决它。但是我发现了这篇文章：

[Android模拟器不旋转到横向](https://stackoverflow.com/questions/17964833/android-emulator-not-rotating-to-landscape)

其中提到某些模拟器目标中存在错误（例如我使用的 19 个）。

只需将目标更改为 17 即可使旋转开始正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-09T13:36:20.427

首先需要检查您正在设置的清单文件，`android:screenOrientation="portrait"`如果是，则将其删除。它对我有用。

# generics - 泛型适用于安全类型？派生类型呢？

> ID：12142689
> 
> 赞同：0
> 
> 时间：2012-08-27T13:14:15.720
> 
> 标签：generics, c#-3.0

我正在使用 .net 3.5 框架。下面是我的代码。

```
class Base {}

class Derived : Base {}

class Program {
  static Main() {
    IList<Base> base_col = new List<Base>();
    base_col.Add(new Derived()); // Do you think this line code is good?
  }
} 
```

你认为泛型会是类型检查的好主意吗？

我会领先一步。

```
static Main() { 
  IList<Derived> base_col = new List<Derived>(); 
  Process(base_col); // error. 
} 
static Process(IEnumarable<Base> baseCollection) { } 
```

为什么代码在这里中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:17:15.653

由于`Derived`也是 a `Base`，所以显示的代码没有问题 - 它与泛型关系不大。

关于您的编辑：您提供的代码确实在`IEnumerable<>`接口是逆变的 .NET 4 中工作。之前的版本没有使用此功能（对于接口中的协变/逆变器的支持显然自 V2 以来已在 CLR 中，但直到 .NET Framework 的 V4 之前没有使用该功能的语言发出代码）。

对于这种特定情况，您可以`Cast<>`安全地使用 LINQ 函数：

```
static Main() { 
  IList<Derived> base_col = new List<Derived>(); 
  Process(base_col.Cast<Base>());
} 
```

# javascript - 如何在 php 中配置状态栏（就像linkedin状态栏一样）

> ID：12142690
> 
> 赞同：-5
> 
> 时间：2012-08-27T13:14:18.980
> 
> 标签：javascript, php, jquery, css

如何通过 Php. 并且用户完成他/她的个人资料，状态百分比（％增加）。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:31:50.017

要使进度条正常工作，您必须指定一些标准。例如，在 SO 上，如果你去[职业](http://careers.stackoverflow.com/)，你的个人资料上会有一个`completeness report`.

每个部分`completeness report`都有一定的积分或您可以获得的总积分的一定百分比。

根据您的`User Profile`标准，您可以制作该进度条。

例如：

```
$hasCompletedSkill = 10;
$hasCompletedBooks = 15;
$maximumPoints  = 100;
$percentage = ($hasCompletedSkill+$hasCompletedBooks)*$maximumPoints/100;

echo "
    <div style='width:100px; background-color:white; height:30px; border:1px solid #000;'>
    <div style='width:".$percentage."px; background-color:red; height:30px;'></div>
</div>"; 
```

它将输出：

![完成百分比](../Images/e918fdcea2fbe008b545ad89423d53ba.png)

# matlab - 谁能让我理解这个 MATLAB 代码？

> ID：12142696
> 
> 赞同：1
> 
> 时间：2012-08-27T13:14:30.697
> 
> 标签：matlab

这是一个文件： [http ://www.ee.columbia.edu/~dpwe/e6820/matlab/stft.m](http://www.ee.columbia.edu/~dpwe/e6820/matlab/stft.m)

和行：

```
else
  win = w;
  w = length(w);
end 
```

为什么在代码中不再使用if`w`分配？`length(w)``w`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:35:27.000

stft.m 的第三个输入可以是包含窗口大小的标量，也可以是窗口本身。在内部，窗口表示为`win`，窗口大小为`w`。

因此，如果窗口本身已被传递给函数，`win`则可以直接从输入中读取，并且`w`必须用其长度替换以保持一致。

`w`不需要用它的长度替换，因为`w`代码中不再使用它。但是，它有助于调试，因为变量被分配了一致的值，并且它有助于代码的扩展，如果将来以涉及窗口大小的方式改进算法`w`。

简而言之：目前不需要该行，但从长远来看可以提高代码的可维护性。

# sql - 在 SQL 语句中调用函数

> ID：12142704
> 
> 赞同：1
> 
> 时间：2012-08-27T13:15:01.070
> 
> 标签：sql, database, postgresql

我在 postgreSQL 中定义了一个名为 strip_tags 的函数，它可以去除给定字符串中的 HTML 标签。（我知道尝试在 db 级别去除 html 标签是不受欢迎的，但我必须这样做）。

我想从我的数据库中提取一些新闻，因此我正在执行一个查询：

```
SELECT description FROM news WHERE description ilike '%apple%' 
```

描述列中的数据是 html 和文本的混合，我想剥离 html，然后搜索它是否匹配 '%apple%'！有点像：

```
SELECT description FROM news WHERE (select strip_tags(description)) ilike '%apple%' 
```

这在postgreSQL中可能吗？我尝试执行此查询，但它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:20:46.870

您可以在您的`WHERE`情况下使用该功能。

```
SELECT description 
FROM news 
WHERE strip_tags(description) ilike '%apple%' 
```

# ember.js - Ember 数据延迟加载

> ID：12142707
> 
> 赞同：1
> 
> 时间：2012-08-27T13:15:10.723
> 
> 标签：ember.js, qunit, ember-data, sinon

我正在为 ember 控制器编写 qunit 测试。在我的真实应用程序中，我从另一个页面路由并获取数据。但是，在编写测试时，我无法从 Ember 数据存储中获取数据，因为它发送异步调用并且测试运行并失败，直到它获取数据。有什么方法可以强制 ember 商店在同一个运行循环中返回数据？或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T20:52:48.030

你使用[FixtureAdapter](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/fixture_adapter.js)吗？如果没有，您可以尝试一下，并将其`simulateRemoteResponse`属性设置为 false。您在测试中的商店可能就像

```
var store = DS.Store.create({
               revision: 4,
               adapter: DS.FixtureAdapter.create({simulateRemoteResponse: false}),
               // perhaps other custom properties
            }); 
```

# javascript - Node.js 定义文档对象

> ID：12142709
> 
> 赞同：6
> 
> 时间：2012-08-27T13:15:13.017
> 
> 标签：javascript, html, node.js

嗨，我正在尝试使用 node.js 在服务器端运行 js 函数，但出现了问题。该函数正在使用文档 dom 访问返回的 html 上的一些隐藏值，并且该文档在 node.js 上未定义，有没有办法定义文档对象？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />

  <title></title>
</head>

<body>
  <form id="sbb_KoNkmwM" method="post" style="display:none" name="sbb_KoNkmwM">
    <input name='sbb_BQGUL' type='checkbox' value='IbNlk' /><input name='sbb_BQGUL' type=
    'checkbox' value='huTi' /><input name='sbb_BQGUL' type='checkbox' checked="checked"
    value='qGx' /><input name='sbb_BQGUL' type='checkbox' value='WGrkKwxP' /><input name=
    'sbb_BQGUL' type='checkbox' value='tgQHP' /><input name='sbb_BQGUL' type='checkbox'
    value='dDrn' />
  </form>

 function sbb_kVnTj() {
    var data = 'ZmdiRlhjdQ==';
    var rEda = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
    ac = 0,
    dec = "",
    tmp_arr = [];
    do {
        h1 = rEda.indexOf(data.charAt(i++));
        h2 = rEda.indexOf(data.charAt(i++));
        h3 = rEda.indexOf(data.charAt(i++));
        h4 = rEda.indexOf(data.charAt(i++));
        bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;
        o1 = bits >> 16 & 0xff;
        o2 = bits >> 8 & 0xff;
        o3 = bits & 0xff;
        if (h3 == 64) {
            tmp_arr[ac++] = String.fromCharCode(o1);
        } else if (h4 == 64) {
            tmp_arr[ac++] = String.fromCharCode(o1, o2);
        } else {
            tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);
        }
    } while ( i < data . length );
    dec = tmp_arr.join('');
    return dec.substr(6, 1);

}
function sbb_MHVY() {
    function sbb_iSH(objArr) {
        var ts = '';
        for (i = 0;
.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:47:14.560

是的，有一些方法可以在 Node.js 中创建文档。例如，您可以查看`jsdom`：[https](https://github.com/tmpvar/jsdom) ://github.com/tmpvar/jsdom 。

# iphone - 如何显示自定义视图模式

> ID：12142711
> 
> 赞同：0
> 
> 时间：2012-08-27T13:15:12.363
> 
> 标签：iphone

我为 iPhone 编写了一个小型多人游戏。一旦其中一名球员获胜，我想向他显示“You Win”图像和一个按钮，以便他可以再次比赛。如何才能做到这一点？一种选择是对新的视图控制器使用 segue，但我认为这应该在游戏的背景中显示。您有什么建议，因为我很确定这是 iphone 游戏/应用程序的常见场景。

编辑：我最终使用了 Phillip Mills 的答案和 Selkie 的答案。这是关于 [如何使用 UIView transitionWithView?](https://stackoverflow.com/questions/12144929/how-to-animate-sliding-from-bottom)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:21:59.887

您可以创建自定义视图并将其作为一个单独的属性保存在您的主游戏视图控制器中。当有人获胜时，将其作为子视图添加到`view`控制器的属性中。它可以是具有透明度的全屏尺寸，因此它是有效的模态，但将游戏显示为背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:22:42.343

您可以将其作为视图，然后使用`UIView animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations`

动画块可以向上滑动、淡化或任何你想要的。

另一种方法是在开头添加它，但将其`hidden`属性设置为`YES`. 将其更改为`NO`需要时。

# java - 找不到类型的响应对象的 MessageBodyWriter：媒体类型的 java.util.LinkedHashMap：application/json

> ID：12142712
> 
> 赞同：4
> 
> 时间：2012-08-27T13:15:16.030
> 
> 标签：java, json, tomcat, jboss, resteasy

我有这个返回 JSON 代码的 REST 服务：

```
@GET
@Path("/mypath")
@Produces(MediaType.APPLICATION_JSON)
public Response getS() {
    Map<String, String> map = new LinkedHashMap<String, String>();

    map.put(key1, val1);
    map.put(key2, val2);

    return Response.ok(map, MediaType.APPLICATION_JSON).build();
} 
```

该服务部署在 Tomcat 服务器中。我正在使用 RESTeasy 作为框架。尝试访问该服务时，我遇到了这个：

> 找不到类型的响应对象的 MessageBodyWriter：媒体类型的 java.util.LinkedHashMap：application/json。

我不明白是什么问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-25T16:46:11.473

你如何部署你的应用程序？你用什么应用服务器？什么版本的 RestEasy？您指定了哪些 RestEasy 配置（在 web.xml 或 Application 类中）？Resteasy 依赖提供者来进行对象的序列化/反序列化。这些提供程序需要包含在您的 JAX-RS 应用程序的类路径中。根据您的构建、应用程序打包和运行时环境，这些提供程序可能会丢失。此外，可以配置提供者的发现，例如自动发现类路径中的所有提供者，或者仅使用 conf 中明确提到的那些。常用的具有 application/json 功能的提供程序是*resteasy-jackson-provider*，*resteasy-jettison-provider*。验证其中至少一个在您的类路径中可用。

# jquery - 在jquery中将两个以上的变量添加到一个变量中

> ID：12142713
> 
> 赞同：1
> 
> 时间：2012-08-27T13:15:17.040
> 
> 标签：jquery

嗨，我正在使用 jquery 函数获取所有 a 标签属性，现在我想将它们存储到一个并附加到正文中，但找不到完成它的方法。这是[小提琴](http://jsfiddle.net/cuyfK/)链接

```
<head>
<script type="text/javascript">
$(function(){
$('a').click(function(){
var name= $(this).attr('name');
var href= $(this).attr('href');
var jj= $(this).attr('class');
var user_id= $(this).attr('user_id');
var page_type= $(this).attr('page_type');
var price= $(this).attr('price');
var bonus= $(this).attr('bonus');
var wrapper= $(this).attr('wrapper');
var token= $(this).attr('token');
var own= $(this).attr('own');
$('body').append('<div>'+name+'<div>')
})})
</script>
</head>
<body>
<a id="profile_2902" name="b_now" href="#" class="big_now" user_id="152402569967" page_type="profile" price="292" bonus="0" wrapper="5972569967" token="e644ce48aa43dc3caa348745a" own="4100447132">
Click now!
</a>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:18:47.480

您可以使用原始 js 获取所有属性并使用 jquery 打印它们，如下所示：

```
var el = document.getElementById("someId");
var arr = [];
for (var i=0, attrs=el.attributes, l=attrs.length; i<l; i++){
    arr.push(attrs.item(i).nodeValue);
}
$('body').append('<div>'+arr.join(", ")+'<div>'); 
```

[在这里工作的小提琴示例](http://jsfiddle.net/cuyfK/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:18:55.203

您可以使用下面的此功能来读取所有属性并将它们推送到数组中。

**演示：http:** [//jsfiddle.net/cuyfK/1/](http://jsfiddle.net/cuyfK/1/)

```
 var el = this, arr = [], it;
    for (var i = 0, attrs = el.attributes, l = attrs.length; i < l; i++) {

        it = attrs.item(i);

        if (it.nodeName == 'id') {
            arr.push(it.nodeName + '="' + it.nodeValue + '_fixed"');
        } else {
            arr.push(it.nodeName + '="' + it.nodeValue + '"');
        }
    } 
```

或者您可能想在数组中推送特定的 attr 值.. 试试下面，

```
$(function() {
    $('a').click(function() {
        var attr = [];
        attr.push($(this).attr('name'));
        attr.push($(this).attr('href'));
        attr.push($(this).attr('class'));
        attr.push($(this).attr('user_id'));
        attr.push($(this).attr('page_type'));
        attr.push($(this).attr('price'));
        attr.push($(this).attr('bonus'));
        attr.push($(this).attr('wrapper'));
        attr.push($(this).attr('token'));
        attr.push($(this).attr('own'));

        $('body').append('<div>' + attr.join(' ') + '<div>')   
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:23:51.040

使用一个数组来存储您希望查找的属性，然后只需遍历该数组`$.each`以查找所有值并将它们集中到一个字符串中并一次性将它们全部附加以提高效率：

```
$(function(){
    var attributes = ['name', 'href', 'class', 'user_id', 'page_type',
                      'price', 'bonus', 'wrapper', 'token', 'own']

    $('a').on('click', function(){
        var html='', self=this;
        $.each(attributes, function(i,e) {
            html += '<br><div>'+e+' : '+$(self).attr(e);
        });
        $('body').append(html);
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/cuyfK/4/)

# css - 将 li 项目排成一行

> ID：12142718
> 
> 赞同：0
> 
> 时间：2012-08-27T13:15:33.160
> 
> 标签：css, html, scroll

这是 div 滚动条的[示例演示](http://jsfiddle.net/gwUyn/)。我需要将 li 项目对齐在同一行以获得水平滚动条。我已经使用了 white-space:nowrap 但它仍然无法正常工作。[http://jsfiddle.net/gwUyn/](http://jsfiddle.net/gwUyn/)

HTML

```
<div class="horizontalaccordion">
            <ul class="test">
                <li>
                    <h3>Heading  2</h3>
                    <div>test
                    </div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>

               <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>test</h3>
                    <div>Content For Panel sow</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>

               <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>test</h3>
                    <div>Content For Panel sow</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>

               <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>test</h3>
                    <div>Content For Panel sow</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>

               <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>test</h3>
                    <div>Content For Panel sow</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>

               <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>test</h3>
                    <div>Content For Panel sow</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>

               <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>test</h3>
                    <div>Content For Panel sow</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>

               <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 4</h3>
                    <div>Content For Panel 4</div>
                </li>
                <li>
                    <h3>Heading 1</h3>
                    <div>Content For Panel 1.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>Heading 2</h3>
                    <div>Content For Panel 2.</div>
                </li>
                <li>
                    <h3>Heading 3</h3>
                    <div>Content For Panel 3.</div>
                </li>
                <li>
                    <h3>test</h3>
                    <div>Content For Panel sow</div>
                </li>
            </ul>
        </div> 
```

CSS

```
 .horizontalaccordion{
      height:95px; width:1000px; white-space:nowrap; border-radius:4px !important; background-color: #b6b6b6; margin-right:15px; overflow:auto; position:relative  
}
.horizontalaccordion>ul {
    margin: 0;
    padding-left:0;
    list-style:none;
    height: 95px    ;  width:100%;  white-space:nowrap;
}

.horizontalaccordion>ul>li {
    display:block;
    overflow: hidden;
    float:left;
    margin: 0 !important;
    padding: 0 !important;
    list-style:none;
    width:38px;
    height: 95px; 

    /* CSS3 Transitions */
    transition: width 0.1s ease-in-out;
    -moz-transition: width 0.1s ease-in-out;
    -webkit-transition: width 0.1s ease-in-out;
    -o-transition: width 0.1s ease-in-out;
}

.horizontalaccordion>ul>li>h3 {
    display:block;
    margin: 5px 0 0 0;
    padding:10px;
    height:65px;
    width:72px;
    border-radius:6px;
    box-shadow: 0px -2px 2px #616161; 

    /* Decorative CSS */
    font-family: Arial, Helvetica, sans-serif;
    text-decoration:none;
    text-transform:uppercase;
    color: #000;
    background-color: #B3B3B3;
    background: -webkit-gradient(linear, 0% 0%, 0% 95%, from(#BEBEBE), to(#B3B3B3));
    background: -moz-linear-gradient(top, #BEBEBE 0%, #B3B3B3 95%);
    font:bold 12px Myriad Pro, Verdana, Geneva, sans-serif; color:#2c3e52;

    /* CSS3 Transform Rotate & Translate */
    white-space:nowrap;
    -moz-transform: rotate(-90.0deg);  /* FF3.5+ */
    -o-transform: rotate(-90.0deg);  /* Opera 10.5 */
    -webkit-transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */
    transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3.0)
            progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff999999, endColorstr=#ffcccccc);  /* IE6,IE7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3.0)"
                "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff999999, endColorstr=#ffcccccc)"; /* IE8 */
}

.horizontalaccordion>ul>li>div {
    display:none;
    float:left;
    overflow: auto;
    position:relative;
    top:-88px;
    left:40px; 
    *top:0px;       /* IE7 Hack */
    *left:0px;      /* IE7 Hack */
    margin:0;
    width:auto;
    height:68px;
    padding:10px 50px 10px 10px; white-space:nowrap;
    background:#f0f0f0; color:#000;
    border-radius:4px;
    -webkit-box-shadow: inset 0px 2px 2px #9b9b9b; box-shadow: inset 0px 2px 2px #9b9b9b;
}
.horizontalaccordion>ul>li.hover {
    overflow: hidden;
    width: auto;
}

.horizontalaccordion>ul>li.hover>div {
    display:block;
}

horizontalaccordion>ul>li.hover>h3 {
    /* Decorative CSS */
    color:#fff;
    background:#000000;

    /* CSS3 Gradient Effect */
    background: -moz-linear-gradient( top, #454545, #000000); /* FF, Flock */
    background: -webkit-gradient(linear, left top, left bottom, from(#454545), to(#000000)); /* Safari, Chrome */
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1.0)
            progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff454545, endColorstr=#ff000000); /* IE 5.5 - IE 7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1.0)"
                "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff454545, endColorstr=#ff000000)";   /* IE 8 */
}

.horizontalaccordion>ul>li>h3:hover {
    cursor:pointer;
    /* Decorative CSS */

} 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:17:28.413

在你的班级 .horizo​​ntalaccordion > ul > li

添加

```
display:inline-block 
```

删除

```
 display:block
    float:left 
```

你的代码会工作

# excel - 创建带有索引的组合框 - Excel VBA

> ID：12142720
> 
> 赞同：1
> 
> 时间：2012-08-27T13:15:43.070
> 
> 标签：excel, vba

我知道这很简单，但我就是不知道怎么做。

我想做的就是创建一个带有索引的组合框！我正在这样做：

```
combobox.AddItem "test", 1 
```

但我遇到了错误！如果我不放置索引，它会起作用！

我该怎么做？

对不起这个愚蠢的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:43:37.787

这里有一些代码可能有助于了解组合框：

```
Private Sub UserForm_Click()
ComboBox1.AddItem "Col-1 Item-" & ComboBox1.ListCount + 1
ComboBox1.List(ComboBox1.ListCount - 1, 1) = "Col-2 Item-" & ComboBox1.ListCount
End Sub 
```

# java - 多线程程序中的意外输出

> ID：12142721
> 
> 赞同：3
> 
> 时间：2012-08-27T13:15:44.020
> 
> 标签：java, multithreading

```
class ThreadSafe implements Runnable {
  int arr[]=new int[]{1,2,3,4,5};
  int sum=0;
  public void run() {
    int result=sum();
    System.out.println("for "+Thread.currentThread().getName()+"the value        is"+result);
  }

  public int sum() {
    for(int i=0;i<5;i++) {
      sum=sum+arr[i];
      System.out.println("calculating sum for      thread"+Thread.currentThread().getName()+"sum ="+sum);
      try {
        Thread.sleep(10);
      } catch(Exception e) {}
    }
    return sum;
  }

  public static void main(String...d) {
    ThreadSafe ts=new ThreadSafe();
    ThreadSafe ts1=new ThreadSafe();
    Thread t=new Thread(ts);
    Thread t1=new Thread(ts1);
    t1.start();
    t.start();
  }
} 
```

我原以为输出不会出现 15\. 因为 sum 方法不同步，所以一个线程可以同时执行 sum 方法

我所期望的是，因为 2 个线程将立即执行 sum 方法，所以输出不应该是 15，因为第一个线程会将 sum 的值更新为另一个线程将读取的某个值。

所以我的问题是为什么即使我没有同步 sum() 方法，程序的输出也会像我预期的那样出现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:19:04.760

您正在创建 的两个实例`ThreadSafe`，每个实例都有自己的`sum`实例变量。

如果您希望它们相互覆盖（我假设这只是在玩耍），`Thread`请在`ThreadSafe`. 此外，将您的`sum`变量标记为 volatile 以表明它可以被另一个线程更改（以避免在编译器检测到该值在方法中的其他地方没有更改时对值进行内部缓存）。

例如，将您的`main`方法更改为：

```
public static void main(String...d) {
    ThreadSafe ts=new ThreadSafe();
    Thread t=new Thread(ts);
    Thread t1=new Thread(ts);
    t1.start();
    t.start();
  } 
```

你的`ThreadSafe`类定义的开头是这样的：

```
class ThreadSafe implements Runnable {
  int arr[]=new int[]{1,2,3,4,5};
  volatile int sum=0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:20:53.250

`ThreadSafe`因为您有两个由不同线程处理的实例。为了产生您想要的结果，它应该像一个实例和多个线程在同一个实例上工作

# mysql - 如何使用like将表的一个字段与不同表中的另一个字段进行比较

> ID：12142725
> 
> 赞同：1
> 
> 时间：2012-08-27T13:16:08.227
> 
> 标签：mysql

一个以`keywords`关键字列命名。另一个`domains`具有列域的表。我想检查表中的任何关键字是否`keywords`出现在域中？

怎么办？我想使用`like`运算符进行比较。我试过这个查询

```
SELECT domain
FROM domains, keywords
WHERE keyword like concat('%',domain,'%') 
```

但我总是得到空集。例如，我有一个关键字`shop`和一个名为“www.dailyshop.com”的域。现在商店在上述域内。所以“www.dailyshop.com”应该显示在查询结果中。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:21:14.500

您需要交换搜索列。请参阅[模式匹配](http://dev.mysql.com/doc/refman/5.5/en/pattern-matching.html)

```
SELECT domain
FROM domains, keywords
WHERE domain like concat('%',keyword,'%'); 
```

例如

```
SELECT 'www.dailyshop.com' LIKE CONCAT('%','shop','%');
+-------------------------------------------------+
| 'www.dailyshop.com' LIKE CONCAT('%','shop','%') |
+-------------------------------------------------+
|                                               1 |
+-------------------------------------------------+ 
```

# c# - 如何在 NumericUpDown 中保留有效值而不是分配最大值？

> ID：12142727
> 
> 赞同：3
> 
> 时间：2012-08-27T13:16:12.253
> 
> 标签：c#, winforms, events, user-interface, numericupdown

假设我有 NumericUpDown`Maximum = 99`和`Minimum = -99`和初始值 = `23`。如果用户将焦点设置为此控件并输入`1`（即`123`现在），它会将其值更改为`99`. 我如何继续`23`将值更改为允许的最大值？

我试图捕捉 KeyDown 和 KeyPress，但在此事件期间值没有改变。我也尝试实施[这个问题](https://stackoverflow.com/questions/2316048/how-to-hold-the-invalid-value-for-numericupdown-after-it-loses-focus/2316219#2316219)中解释的解决方法，但没有成功。验证事件仅在离开控制权时发生。如果它大于最大值或小于最小值，我需要简单地忽略用户输入。

UPD。我正在使用**WinForms**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:22:17.580

使用外部全局属性，例如`private int iTextBox { get; set; }`并使用`OnTextChange event`来查看数字是大于 99 还是小于 -99。

`OnTextChange`：

```
{
       int newValue = int.Parse(textBox1.Text);
       if (newValue > Maximum)
              textBox1.Text = iTextBox;
       if (newValue < Minimum)
              textBox1.Text = iTextBox;

       iTextBox = int.Parse(textBox1.Text);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:12:37.333

好的，我找到了[这个问题](https://stackoverflow.com/questions/2316048/how-to-hold-the-invalid-value-for-numericupdown-after-it-loses-focus/2316219#2316219)帮助的解决方案。我尝试了很多组合，并找到了一个不太复杂的组合。我在 KeyDown 事件中保存旧值并在事件中检查它`textBox.TextChanged`。那时价值还没有改变。现在 numericUpDown 在视觉上丢弃不在最小...最大范围内的输入。我认为不是用户友好的，还有一些工作要做。

```
public partial class Form1
{
   private decimal _oldValue;
   private TextBox textBox;

   public Form1()
   {
      InitializeComponent();

      textBox = (TextBox)numericUpDown.Controls[1];
      textBox.TextChanged += TextBoxOnTextChanged;
   }

   private void TextBoxOnTextChanged(object sender, EventArgs eventArgs)
    {
        decimal newValue = Convert.ToDecimal(((TextBox) sender).Text);
        if (newValue > numericUpDown.Maximum || newValue < numericUpDown.Minimum)
            ((TextBox) sender).Text = _oldValue.ToString();
    }

   private void numericUpDown_KeyDown(object sender, KeyEventArgs e)
   {
      _oldValue = ((NumericUpDownCustom) sender).Value;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:23:47.553

如果您使用的是 WPF，请编写一个[转换器](http://wpftutorial.net/ValueConverters.html)，它将为您重新分配一个值。

```
public class BoolToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType,  object parameter, CultureInfo culture)
    {
        int i = int.Parse(value as string);
        // logic here
    }

    public object ConvertBack(object value, Type targetType,  object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T16:11:31.550

不能在 NumericUpDown 控件的 ValueChanged 事件中执行此操作吗？只需存储原始值，如果他们输入的值无效，则恢复保存的值。

# jquery - 防止塌陷

> ID：12142728
> 
> 赞同：1
> 
> 时间：2012-08-27T13:16:13.913
> 
> 标签：jquery, css, html, image

我试图通过首先删除然后`src`用jQuery添加回它的属性来刷新图像，但是不幸的是，这会导致它崩溃并在我重置它之后再次上下移动它下面的元素，这很烦人。我怎样才能避免这种行为？

相关HTML：

```
<figure>
    <figcaption>Result</figcaption>
    <img title="Result" id="result" src="http://example.com/image.bmp">
</figure> 
```

相关CSS：

```
.gallery figure {
    display: inline-block;
    margin: 0;
    padding: 0;
}

.gallery img {
    min-width: 160px;
    width: 65%;
} 
```

（该`<figure>`元素包含在`<section>`具有 class="gallery" 的元素中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:28:24.500

像这样的东西会起作用：

```
var res = $("#result");
res.attr("height", res.height()); //fix the image's height
res.attr("width", res.width()); //fix the image's width
var prev = res.attr("src"); //cache the image's src
res.attr("src", ""); //remove src
res.attr("src", prev); //reset src to refresh image 
```

如果有什么看起来含糊/可以理解，我很乐意解释。

**编辑：**另一种方法是用 a 包裹你的图像`div`并确保它`div`具有固定的高度/宽度。假设您的 HTML 如下所示：

```
<figure>
    <figcaption>Result</figcaption>
    <div id = "wrapper">
        <img title="Result" id="result" src="http://example.com/image.bmp">
    </div>
</figure> 
```

JavaScript：

```
var wrap = $("#wrapper");
wrap.css({"height": wrap.height(), "width": wrap.width()}); //fix height and width
var res = $("#result");
var prev = res.attr("src"); //cache the image's src
res.attr("src", ""); //remove src
res.attr("src", prev); //reset src to refresh image 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:19:14.463

您需要为图像标签设置一个`width`和`height`属性。

就像是：

```
<img title="Result" id="result" src="http://example.com/image.bmp" width="250" height="120"> 
```

这当然只有在您知道确切尺寸的情况下才有可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:19:26.683

您可以在图像上放置`width`和`height`属性，以便即使元素中没有图像，它也能保持其大小。

像这样：

```
<img src="" width="100" height="200"/> 
```

如果图像的尺寸发生变化，我会在 HTML 中省略`width`和`height`属性。取而代之的是，当你`src`在 jQuery 中更改属性时，首先将 width 和 height 属性添加到 img 标签中以获得图像的大小，以便元素保持其大小。然后在加载下一个图像时，删除这些属性，以便新图像以其全尺寸显示。

# python - 从脚本中休息python的内存

> ID：12142732
> 
> 赞同：0
> 
> 时间：2012-08-27T13:16:20.630
> 
> 标签：python

我正在运行一个需要大量内存的脚本...我可以`reset`用来清除所有变量，以便第二次运行时清除内存...但是我的问题是如何`reset`在每次运行后循环输入它它会自行清除内存。

谢谢赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:32:47.253

如果您有一个需要大量内存的脚本，我建议您在一个单独的进程中运行它（它会自动清理）。您可以通过以下方式执行此操作：

*   使用其他一些脚本来启动工作人员（例如`bash`）
*   使用 python[子](http://docs.python.org/library/subprocess.html#module-subprocess)进程启动工作进程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:18:38.090

Python 解释器利用垃圾收集来释放未使用对象的内存。通常，此过程不需要任何手动更正。*但是，您可以在使用gc*模块安排的时间之前收集垃圾。[http://docs.python.org/library/gc.html](http://docs.python.org/library/gc.html)

这将为您的脚本释放一些内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:28:25.433

如果您遇到[MemoryError](http://docs.python.org/library/exceptions.html#exceptions.MemoryError)异常，您可能会考虑重写脚本以写入数据库或文件，而不是将所有数据保存在内存中。一些不错的选择是[MySQL](http://pypi.python.org/pypi/MySQL-python)、[Redis](http://pypi.python.org/pypi/redis/)和[Mongo](http://pypi.python.org/pypi/pymongo/2.2.1)，等等。

当然，如果您可以在代码中找到内存使用效率低下或不必要的地方，也可以完全避免所有这些数据库内容。如果您发布您的代码，我相信人们会很乐意看一看！

例如，如果您有大型[列表](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)推导式，其中包含大量数据，一次处理一项，您可能可以通过切换到[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)来节省相当多的内存。

# html - Visual Basic 6 将多行文本插入到 html 文件中

> ID：12142734
> 
> 赞同：0
> 
> 时间：2012-08-27T13:16:36.340
> 
> 标签：html, vb6

假设我有一个具有该结构的 HTML 文件

```
<html>
<head>
</head>
<body>
<div class="nav mainnavs"></div>
<div class="nav askquestion"></div>
</body>
</html> 
```

我想插入这个文本

```
 <ul>
                    <li><a id="nav-questions" href="/questions">Questions</a></li>
                    <li><a id="nav-tags" href="/tags">Tags</a></li>
                    <li><a id="nav-users" href="/users">Users</a></li>

                    <li><a id="nav-badges" href="/badges">Badges</a></li>
                    <li><a id="nav-unanswered" href="/unanswered">Unanswered</a></li>
                </ul> 
```

**使用 vb6**在该文件中的两个层之间。

结果应该是这样的：

```
 <html>
<head>
</head>
<body>
<div class="nav mainnavs"></div>
 <ul>
                    <li><a id="nav-questions" href="/questions">Questions</a></li>
                    <li><a id="nav-tags" href="/tags">Tags</a></li>
                    <li><a id="nav-users" href="/users">Users</a></li>

                    <li><a id="nav-badges" href="/badges">Badges</a></li>
                    <li><a id="nav-unanswered" href="/unanswered">Unanswered</a></li>
                </ul>
<div class="nav askquestion"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:56:01.253

快速而肮脏的方法是进行一些字符串操作

```
Dim myHtmlFile As String
    Dim topPart As String
    Dim topSearch As String
    Dim bottomPart As String
    Dim bottomSearch As String
    Dim newPart As String

    'Load contents of file into string
    'You would do some I/O stuff here to get the file in a variable
    'Examples are pretty easy to find.  Google "vba read file into variable"
    myHtmlFile = "<html> " & vbCrLf & _
                "<head>" & vbCrLf & _
                "</head>" & vbCrLf & _
                "<body>" & vbCrLf & _
                "<div class=""nav mainnavs""></div>" & vbCrLf & _
                "<div class=""nav askquestion""></div>" & vbCrLf & _
                "</body>" & vbCrLf & _
                "</html>"

    topSearch = "<div class=""nav mainnavs""></div>" & vbCrLf
    bottomSearch = "<div class=""nav askquestion""></div>" & vbCrLf

    topPart = Left$(myHtmlFile, InStr(1, myHtmlFile, topSearch) + Len(topSearch) - 1)
    bottomPart = Mid$(myHtmlFile, InStrRev(myHtmlFile, bottomSearch))

    newPart = "<ul> " & vbCrLf & _
                    "<li><a id=""nav-questions"" href=""/questions"">Questions</a></li> " & vbCrLf & _
                    "<li><a id=""nav-tags"" href=""/tags"">Tags</a></li> " & vbCrLf & _
                    "<li><a id=""nav-users"" href=""/users"">Users</a></li> " & vbCrLf & _
                    "<li><a id=""nav-badges"" href=""/badges"">Badges</a></li> " & vbCrLf & _
                    "<li><a id=""nav-unanswered"" href=""/unanswered"">Unanswered</a></li> " & vbCrLf & _
                "</ul> "

    myHtmlFile = topPart & newPart & bottomPart

    'Now write the file back out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:32:21.543

我会尝试正则表达式。

起点： [如何在 Microsoft Visual Basic 6.0 中使用正则表达式](http://support.microsoft.com/kb/818802A)

我不知道你对正则表达式有多熟悉。但这是我对如何做你想做的事情的想法：你必须创建一个与该行匹配的表达式，`<div class="nav mainnavs"></div>`然后调用方法 match，获取匹配的字符串索引并在那里插入你创建的`<ul>...</ul>`字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:13:24.293

```
 Dim sFileText As String
    Dim iFileNo As Integer
      iFileNo = FreeFile
          'open the file for writing
    Open App.Path & "\" & "test.html" For Output As #iFileNo

    'please note, if this file already exists it will be overwritten!

          'write some example html to the file

Print #iFileNo, "<html>"
Print #iFileNo, "<head>"
Print #iFileNo, "</head>"
Print #iFileNo, "<body>"
Print #iFileNo, " "
Print #iFileNo, "<div class="&"nav mainnavs"&"></div>"
Print #iFileNo, " <ul>"
Print #iFileNo, "                    <li><a id="&"nav-questions" href="&"/questions"&">Questions</a></li>"
Print #iFileNo, "                    <li><a id="&"nav-tags"&" href="&"/tags"&">Tags</a></li>"
Print #iFileNo, "                    <li><a id="&"nav-users"&" href="&"/users"&">Users</a></li>"
Print #iFileNo, " "
Print #iFileNo, "                    <li><a id="&"nav-badges"&" href="&"/badges"&">Badges</a></li>"
Print #iFileNo, "         <li><a id="&"nav-unanswered"&" href="&"/unanswered"&">Unanswered</a></li>"
Print #iFileNo, "                </ul>"
Print #iFileNo, "<div class="&"nav askquestion"&"></div>"
Print #iFileNo, "</body>"
Print #iFileNo, "</html>"

MsgBox "Done, html file has been created."

          'close the file (if you dont do this, you wont be able to open it again!)
      Close #iFileNo
End Sub 
```

# android - 如何在 Android 中使用自定义日历视图以及如何设置提醒提醒？

> ID：12142737
> 
> 赞同：4
> 
> 时间：2012-08-27T13:16:47.737
> 
> 标签：android, android-calendar

我需要制作一个 Android 应用程序来显示日历控件。我试图在Android提供的默认小部件中找到这样的控件，但找不到。如何在 Android 应用程序中集成日历控件？

我还希望日历能够将事件和提醒添加到特定日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:26:00.257

[在计时器中同时播放 2 个声音时滞后](https://stackoverflow.com/questions/12012933/lags-while-playing-2-sounds-on-the-same-time-in-timer/12130048#12130048)

[http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html)

这可能会对您有所帮助。

**更新：**

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

[http://blog.blundellapps.com/notification-for-a-user-chosen-time/](http://blog.blundellapps.com/notification-for-a-user-chosen-time/)

[http://android.arnodenhond.com/tutorials/alarm-notification](http://android.arnodenhond.com/tutorials/alarm-notification)

也许这就是他要找的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:20:07.387

在应用程序中使用安卓`TimerTask`。

[安卓开发者](http://developer.android.com/reference/java/util/TimerTask.html)

如果您正在寻找其他东西，请尝试使您的问题更清楚。

以下是如何使用它： [Stackoverflow](https://stackoverflow.com/questions/12012933/lags-while-playing-2-sounds-on-the-same-time-in-timer/12130048#12130048)

**更新**

我相信这就是你要找的东西： [Stackoverflow](https://stackoverflow.com/questions/5976098/how-to-set-reminder-in-android/5976386#5976386)

# python - lxml忽略具有未定义命名空间前缀的元素

> ID：12142739
> 
> 赞同：0
> 
> 时间：2012-08-27T13:16:57.463
> 
> 标签：python, namespaces, iterator, lxml

我有一些简单的代码单步执行一个大型 XML 文件（包含 DTD 中定义的实体）：

```
from lxml import etree
tree = etree.parse(
    file('t.xml', 'r'), etree.XMLParser(dtd_validation=False, load_dtd=True))
for e in tree.iter('bla'):
    process(e)  # whatever to be done with it 
```

这适用于纯 XML 输入。

不幸的是，`iter`生成器不会为带有冒号的标签生成任何东西（命名空间前缀）。命名空间没有在任何地方定义，实际上我并不关心它。我只想遍历元素。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:29:33.173

好吧，这可能并不完全令人满意，但这是我发现的：

```
>>> root = tree.getroot()
>>> root.attrib
{'{http://www.w3.org/2001/XMLSchema-instance}schemaLocation': 'http://xmlns.oracle.com/weblogic/security/xacml'}
>>> root.nsmap
{None: 'http://xmlns.oracle.com/weblogic/domain', 'wls': 'http://xmlns.oracle.com/weblogic/security/wls', 'sec': 'http://xmlns.oracle.com/weblogic/security', 'xsi': 'http://www.w3.org/2001/XMLSchema-instance'}
>>> 
```

对于像这样的标签：

```
<domain xmlns="http://xmlns.oracle.com/weblogic/domain"
    xmlns:sec="http://xmlns.oracle.com/weblogic/security"
    xmlns:wls="http://xmlns.oracle.com/weblogic/security/wls"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.oracle.com/weblogic/security/xacml"> 
```

但这应该可以让你得到一切：

*   “标准”属性通过`attrib`
*   “命名空间”通过`nsmap`

# ant - 我们可以使用ant脚本生成excel格式的junit测试报告吗

> ID：12142740
> 
> 赞同：0
> 
> 时间：2012-08-27T13:16:59.897
> 
> 标签：ant, junit

我的应用程序有许多测试用例。我正在使用一个测试套件运行所有这些测试用例。我生成了 ant 脚本来构建它们以实现自动化。一切都很顺利。但是当我运行这个 build.xml 文件时，生成的测试结果以 HTML 文件格式表示。

有什么方法可以将我的测试结果写入 excel 文件？
每次测试用例执行后，excel 文件应更新测试用例名称和结果。
实际上，作为一名开发人员，我在测试方面的经验并没有那么远。
所以，任何人都可以找到我需要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:25:15.753

这是很有可能。您需要使用将传递给[ant junitreport](http://ant.apache.org/manual/Tasks/junitreport.html)任务的[这种技术创建一个样式表，如将 XML 文件转换为 Excel 电子表格。](http://www.techrepublic.com/article/convert-an-xml-file-into-an-excel-spreadsheet-with-this-technique/6163451)生成的文件扩展名应为“.xml”。您必须使用 excel 显式打开。确保您自定义样式表以匹配您的办公室版本。

您可以通过创建一个简单的 excel 工作表并选择 File -> Save As 来查看 excel 生成的 XML。选择文件类型为 xml。

# testing - 无法在 Sahi 中生成 junit 报告

> ID：12142742
> 
> 赞同：1
> 
> 时间：2012-08-27T13:17:08.357
> 
> 标签：testing, junit, junit4, automated-tests, sahi

我有一个包含 3 个测试用例（.xls 文件）的测试套件。使用 ant 脚本我正在运行测试套件，但 junit 报告使用 TEST-excelfw_firefox.xml(/temp/junit/..) 生成所有 xml。所以最后我只得到了一个 .xml 文件而不是 3 个。如何在 Sahi 中使用 ant 生成具有不同名称的 .xmls？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:16:15.843

我刚刚将 .\userdata\config\reports\junit\report.properties 文件中的 script_file.name=TEST-scriptName.xml 更改为 script_file.name=TEST-reportId.xml 。现在我的 xml 正在生成带有时间戳。

# jquery - blockUI 不工作

> ID：12142746
> 
> 赞同：0
> 
> 时间：2012-08-27T13:17:33.327
> 
> 标签：jquery, jquery-blockui

我在使用块 ui 的地方有以下代码，但它没有阻止页面。我正在使用 ajax 调用来获取用户控制结果（部分视图）以加载到页面中的 div。在 ajax 调用期间我想阻止整个页面使用布洛克伊。

```
 $('#btnGO').click(function() {

        if (validate()) {
            alert("loading");
            $.blockUI({ message: '<img src="/Content/images/ajax-loader.gif"/>' }); //this is not working

            $.ajax({

                type: "POST",
                url: "/Controller/action/", //to get the partial view
                async: false,
                cache: false,
                beforeSend: function() {

                },
                complete: function() {
                    alert("ajax complete event")
                    $.unblockUI(); 
                },

                data: $('#frmPassBook').serialize(),
                error: function(xhr, status, error) {
                    $('#ErrorMessage').html(xhr.responseText);
                    $("#ErrorMessage").stop().show('slow');
                    $('#ui-widget').show();
                    $.unblockUI();
                },
                success: function(data) {
                    $("#aCBDetails").parent().show();
                    $("#divCBDetails").hide("blind");
                    $("#aCBDetails span:first").removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");
                    $('#ui-widget').hide();
                   //loading html in div
                   $("#div").html(data);

if ($("#rbMain") != undefined) {

                        if ($("#rbMain").attr("checked")) {
                            $(".subTrId").hide();
                            $("#spSub").hide();
                            $("#spMain").show();

                        }
                        else {
                            $(".subTrId").show();
                            $("#spSub").show();
                            $("#spMain").hide();

                        }
                    } else {

                        $("#spSub").show();
                        $("#spMain").hide();
                    }

//unblocking after div is loaded with html
                   $.unblockUI();
                }
            });
        } else {

           $.unblockUI();

        }
        return false ;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:34:52.853

使用**baseZ**索引来阻止整个页面，例如。

```
$.blockUI({ 
                                            message: "<img src="/Content/images/ajax-loader.gif"/>",
                                            baseZ: 9000,
                                            css: { 
                                                top:  ($(window).height() - 400) /2 + "px", 
                                                left: ($(window).width() - 400) /2 + "px", 
                                                width: "400px"} 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:23:23.017

尝试使用jQuery 的`ajaxStart`和`ajaxStop`方法。这些将使您能够在 ajax 调用开始时应用加载器，并在它结束时将其删除。

# php - 从 mysql 表中获取记录的问题

> ID：12142749
> 
> 赞同：2
> 
> 时间：2012-08-27T13:17:45.780
> 
> 标签：php, mysql

例如，我在数据库中有一张表：

```
INSERT INTO `myintrest` (`id`, `intrest`, `memberId`) VALUES
(32, 'Exercise', 9),
(33, 'Adventure', 5),
(34, 'Exercise', 5),
(35, 'Art', 5),
(38, 'Adventure', 6),
(46, 'Adventure', 9),
(47, 'Astro-science', 9),
(48, 'Crafts', 9),
(49, 'Fashion & Designing ', 9),
(52, 'Art', 6),
(53, 'Art', 9); 
```

当前用户登录 ID 为“5”。如果我们根据这个用户 ID 从 myintrest 表中获取兴趣，我们会得到结果：

```
(33, 'Adventure', 5),
(34, 'Exercise', 5),
(35, 'Art', 5), 
```

但我的查询是如何获取在此表中具有相同兴趣的用户。在这种情况下，其他用户也有同样的兴趣，比如冒险、锻炼和艺术。

如果这三个兴趣有另一个用户，那么他将被获取。希望你能理解我的询问。

根据这张表，我想要 member_id=9 因为它有相同的兴趣。

请帮我取这个记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:22:07.323

尝试这样使用子查询，

```
SELECT `memberId` FROM `myintrest` where `intrest` in (SELECT
 `intrest` FROM `myintrest`  where `memberId` = $loginUserId ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:53:29.873

```
SELECT `intrest` FROM `myintrest`  where `memberId` = $loginUserId; 
```

这将赋予用户 $loginUserId 的所有兴趣。

```
//$arr_interests_loginUserId = array of all interests of user $loginUserId

Method 1:

    $condition='';
    foreach( $i=0; $i< count($arr_interests_loginUserId);$i++){
     $condtion.= $arr_interests_loginUserId[$i].' AND ';
    }

    $condtion.= $arr_interests_loginUserId[count($arr_interests_loginUserId)];

    "SELECT `memberId` FROM `myintrest` where $condtion ";

Method 2:

"SELECT `memberId` FROM `myintrest` where ".implode(' AND ', $arr_interests_loginUserId); 
```

这将使您的用户对用户 $loginUserId 感兴趣。

如果您需要至少一个共同兴趣，那么直接使用这个 sql（由 Rikesh Shah 建议）：

```
SELECT `memberId` FROM `myintrest` where `intrest` in (SELECT
 `intrest` FROM `myintrest`  where `memberId` = $loginUserId ); 
```

# algorithm - 范围最小查询基础

> ID：12142754
> 
> 赞同：0
> 
> 时间：2012-08-27T13:17:56.297
> 
> 标签：algorithm, graph, binary-tree, rmq

我阅读了有关 Range Minimum Queries 的维基百科链接，查看了更多教程（topcoder 和其他链接），但我有一个非常基本的问题：

RMQ 的正式定义是：给定一个从有序集合（例如数字）中取出的对象数组，范围最小查询（或 RMQ） from to 询问子数组中最小元素的位置。

我不明白的是，为什么我们不能通过线性搜索来解决问题？在数组 A[0...n] 中，如果我们需要 RMQ(i,j)

```
min = A[i]
index = i
for iter=i; iter <j; iter ++
if A[iter] <= min
min = A[iter]
index = iter; 
```

在循环结束时，我们知道最小值和最小值所在的索引。

我肯定在这里遗漏了一些东西......有人可以帮我理解为什么我们需要RMQ吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:23:20.537

RMQ 旨在解决您描述的问题，但比您的方法更快。有两种方法 - 一个静态版本，您可以在其中进行一些预计算（最优化的版本，真正复杂的需要线性预计算），然后为每个查询不断回答，以及动态方法，您有 log(n) 时间为每个查询。

在静态情况下，您不能更改初始数组，而在动态情况下，允许其值及时更改。

请注意，在这两种情况下，您都需要回答很多查询。这意味着在恒定或对数时间内回答会比你的线性方法快得多，因此在你的想法太慢的情况下会起作用。希望这能解释这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:21:37.380

**速度**。线性搜索很慢。

与我们使用[快速排序](http://en.wikipedia.org/wiki/Quicksort)（或合并排序，...）而不是简单的[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)来对大型数据库进行排序的原因相同。

假设您有一个庞大的数据库，并且您将查询 RMQ 数百万次。每个查询的线性搜索效率不高，它将需要数百万次线性搜索，而更高级的算法需要进行少量预处理，然后快速检索所需信息。

# iphone - 点击 tabBar 时转到 rootView

> ID：12142755
> 
> 赞同：5
> 
> 时间：2012-08-27T13:17:57.477
> 
> 标签：iphone, objective-c, ios, xcode, uitabbarcontroller

我使用了基于视图的应用程序，因为我以编程方式生成 TabBar。问题是：

I have an Iphone application in which i have 2 tabitems with a tabbarcontroller.Inside the tabbarcontroller each viewcontroller is a navigation controller.when selecting the second tab i have a view controller.when selecting a button on that i am pushing another view controller to the self.navigation 控制器。在那个视图控制器中，我正在推动并像那样前进。但问题是当我再次选择 tabitem 时，pushviewcotroller 显示在那里。但是当我选择选项卡时，我再次需要那个 rootview

我在 AppDelegate.m 中的代码是：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

 UINavigationController *nc1;
    nc1 = [[UINavigationController alloc] init];

UIViewController *viewController1 = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    nc1.viewControllers = [NSArray arrayWithObjects:viewController1, nil];

    UINavigationController *nc2;
    nc2 = [[UINavigationController alloc] init];

 UIViewController *viewController2 = [[[secondview alloc] initWithNibName:@"secondview" bundle:nil] autorelease];
    nc2.viewControllers = [NSArray arrayWithObjects:viewController2, nil];

    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
   self.tabBarController.viewControllers = [NSArray arrayWithObjects:nc1,nc2,nil];
  self.window.rootViewController=self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T13:27:17.020

也许你正在寻找这个：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{       
    int tabitem = tabBarController.selectedIndex;
    [[tabBarController.viewControllers objectAtIndex:tabitem] popToRootViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-13T10:08:26.907

迅速你可以在你的`UITabBarController`课堂上这样做：

```
override func tabBar(tabBar: UITabBar, didSelectItem item: UITabBarItem) {
    let rootView = self.viewControllers![self.selectedIndex] as! UINavigationController
    rootView.popToRootViewControllerAnimated(false)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:30:44.680

我相信您将需要使用这两种方法：

`UINavigationController`: - `popToRootViewControllerAnimated`:

```
UITabBarControllerDelegate: tabBarController:didSelectViewController: 
```

我在自己的程序中使用的方法是仅在屏幕上显示根视图控制器时显示选项卡栏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T17:10:50.103

添加`UITabBarControllerDelegate`到您的`AppDelegate`, 和`didFinishLaunchingWithOptions`方法中，将委托设置为`UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController; tabBarController.delegate = self;`. Then the delegate method `- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController`will be invoked when tabbar is selected.

# jquery-plugins - jQuery 媒体查询插件

> ID：12142761
> 
> 赞同：0
> 
> 时间：2012-08-27T13:18:08.657
> 
> 标签：jquery-plugins, media-queries

我找到了jQuery mediaquery 插件的[链接。](http://archive.plugins.jquery.com/project/MediaQueries)但是，当我尝试单击该页面上的[下载 (1.72)KB](http://archive.plugins.jquery.com/files/jquery.mediaqueries.js_.zip)时，它显示页面未找到。这里有什么问题？还是我点击了错误的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:23:06.137

```
Mahesh the pages already having the message 
```

“插件站点目前正在开发中。” 这意味着您需要等待更多时间，直到 mediaquery 插件的开发完成并且下载文件可用。

# c++ - 在 Python 和 C++ 中使用 ctypes 时出现 Seg 错误

> ID：12142766
> 
> 赞同：0
> 
> 时间：2012-08-27T13:18:28.883
> 
> 标签：c++, python, ctypes

我正在尝试使用 ctypes 在 Linux 机器上从 Python 2.7 调用 C++ 库来启动和运行。目前，我只是在尝试玩具示例。我阅读并能够复制此线程中给出的示例：[Calling C/C++ from python?](https://stackoverflow.com/questions/145270/calling-c-c-from-python) . 请注意，C++ 类函数不接受任何输入。

我正在尝试将这个示例扩展如下。

**foo.cpp**

```
#include <iostream>
#include <string>
using namespace std;

class Foo {
public:
  Foo(string name);
  void bar(void);
private:
  string myName;
};
Foo::Foo(string name) {
  std::cout << "Entered constructor in C++" << std::endl;
  myName = name;
}
void Foo::bar(void) {
  std::cout << "Hello, this is " << myName << std::endl;
}

extern "C" {
  Foo* Foo_new(string name) {return new Foo(name);}
  void Foo_bar(Foo* foo) {foo->bar();}
} 
```

`g++ -c -fPIC foo.cpp -o foo.o`代码使用然后干净地编译`g++ -shared -Wl,-soname,libfoo.so -o libfoo.so foo.o`。

然后我使用以下包装器，

**fooWrapper.py**

```
from ctypes import cdll, c_char_p
lib = cdll.LoadLibrary('./libfoo.so')

class Foo(object):
    def __init__(self,name):
        self.name = name
        self.obj = lib.Foo_new(c_char_p(name))
    def bar(self):
        lib.Foo_bar(self.obj) 
```

因为我将一个字符串传递给构造函数，所以我的印象是我需要使用`c_char_p`. 也许这是错误的。

当我在 Python 2.7 中执行代码时，出现分段错误，

```
Python 2.7.2 (default, Feb 27 2012, 18:28:19) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-48)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import fooWrapper as f
>>> foo = f.Foo('somename')
Segmentation fault 
```

所以我从来没有进入 C++ 构造函数。无论我是否`self.name = name`在 Python 代码的构造函数方法中包含该行，我都有同样的问题。

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:30:56.510

在您`extern "C"`声明`Foo_new`中接受一个`std::string`参数，但是要从 Python 调用代码，您必须使其成为真正的 C 函数，其中包括接收字符串和字符指针。特别是当您实际上告诉解释器将您的字符串转换为字符指针时（这就是`c_char_p`调用的作用）。

# stored-procedures - 查找调用存储过程

> ID：12142767
> 
> 赞同：1
> 
> 时间：2012-08-27T13:18:29.773
> 
> 标签：stored-procedures, sql-server-2008-r2

[dbo].[csp_Mapping] 使用以下语句调用存储过程 dbo.csp_Mapping_Step_003：

```
exec csp_Mapping_Step_003 WITH RECOMPILE 
```

当我尝试使用以下调用以编程方式确定调用过程时...

```
DECLARE @fullyQualifiedObjectname sysname = 'dbo.csp_Mapping_Step_003'

SELECT
    referencing_schema_name  AS ObjectSchema
    ,referencing_entity_name AS ObjectName
FROM
    sys.dm_sql_referencing_entities (@fullyQualifiedObjectname
                                     ,'OBJECT'); 
```

..不返回任何行。

我知道 SQL 依赖关系并不完美，但是有没有更可靠的方法来获取这些信息，或者“WITH RECOMPILE”选项会影响元数据吗？有没有办法让 SQL Server 重新分析依赖关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:49:48.930

将 exec csp_Mapping_Step_003 WITH RECOMPILE 更改为

执行 dbo.csp_Mapping_Step_003 WITH RECOMPILE

我认为@fullyQualifiedObjectname 中的'dbo' 正在抛弃它。

# php - Zend 安装

> ID：12142771
> 
> 赞同：1
> 
> 时间：2012-08-27T13:18:46.920
> 
> 标签：php, zend-framework, magento, magento-1.7

在 W7 上运行，php5.3.5。
我已经下载并安装了 Zend 框架文件。现在我正在尝试运行[此处推荐](https://developers.google.com/gdata/articles/php_client_lib?hl=es)的 PHP 安装检查器，但它返回错误：

```
Ran PHP Installation Checker on 2012-08-27T13:06:37+00:00
PHP Extension Errors          Tested
No errors found
Zend Framework Installation   Tested
Errors
0                             Exception thrown trying to access Zend/Loader.php
                              using 'use_include_path' = true.
                              Make sure you include Zend Framework in your
                              include_path which currently contains:
                              .;C:\php\pear
SSL Capabilities Errors       Not tested
YouTube API Connectivity      Not tested
Errors 
```

Here are similar question to mine [this question](https://stackoverflow.com/questions/9762866/youtube-api-strange-issue-with-zendgdata) and [this other](https://stackoverflow.com/questions/1877167/problems-with-setting-the-path-for-zend-framework-needed-for-youtube-api)

已经尝试过[此解决方案](http://forums.zend.com/viewtopic.php?f=69&t=5011)和其他类似解决方案，但错误不断出现。

**编辑 01：**
使用[这个](http://www.php.net/manual/en/function.set-include-path.php)和[这个](http://www.php.net/manual/en/configuration.changes.php)我试图包含路径但不工作。当我调用 a`get_include_path()`它再次返回`.;C:\php\pear`.

这是添加路径的php：

```
<?php
$path = '.C:\php\zend';
set_include_path(get_include_path() . PATH_SEPARATOR . $path);
?> 
```

**编辑02：**
找到`php.ini`，编辑和添加：`include_path = ".;c:\php\pear;.;c:\php\lib\Zend"`根据[谷歌开发者页面上的这个链接](https://developers.google.com/gdata/articles/php_client_lib?hl=es#appendix_phpini)。错误仍然出现，但现在添加`.;c:\php\lib\Zend`到路径中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:44:09.430

您应该编辑“[核心 php.ini 指令的描述](http://php.net/core.php#ini.include-path)`php.ini`”中提到的类似内容。

```
include_path=".:/php/includes" 
```

请记住，在大多数情况下，不同的 sapi 使用不同的`php.ini`文件。在 CLI 上使用`php --ini`找到合适的。

# ios - UINavigationBar + UIToolBar UIAppearance以及应用程序某些部分的半透明barStyle？

> ID：12142775
> 
> 赞同：4
> 
> 时间：2012-08-27T13:18:59.247
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uitoolbar, uiappearance

我正在为我设置自定义图像`UINavigationBar`并`UIToolbar`使用以下代码：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navigationBar"] forBarMetrics:UIBarMetricsDefault];
[[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"toolbar"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault]; 
```

我正在使用[PhotoViewer](https://github.com/enormego/PhotoViewer)并将其视图控制器推入视图。它应该有一个半透明的导航栏和工具栏，但它使用的是我提供的半透明图形。

问题是，稍后当我推入另一个视图控制器时（从 PhotoViewer 弹出回超级后），它的工具栏也是半透明的，这意味着内容位于它后面。

我没有运气就尝试了以下方法：

```
[[UINavigationBar appearanceWhenContainedIn:[EGOPhotoViewController class], nil] setBarStyle:UIBarStyleBlackTranslucent];
[[UINavigationBar appearanceWhenContainedIn:[EGOPhotoViewController class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault];
[[UIToolbar appearanceWhenContainedIn:[EGOPhotoViewController class], nil] setBarStyle:UIBarStyleBlackTranslucent];
[[UIToolbar appearanceWhenContainedIn:[EGOPhotoViewController class], nil] setBackgroundImage:nil forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault]; 
```

有什么想法可以为 PhotoViewer 实现黑色半透明 barStyle*并将*其他所有内容保留在我的自定义图形中吗？

**更新：**为了获得一些帮助，我将一个示例项目与导航栏的自定义图形放在一起，然后尝试在使用外观代理时显示带有半透明导航栏的推送视图控制器但没有成功：[EXAMPLE PROJECT](https://dl.dropbox.com/u/5445727/UIAppearanceTest.zip)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:35:00.420

我已经下载了您的示例项目并设法修复它。我会解释问题是什么。

首先，UINavigationBar 包含在 UINavigationController 中。因此，RootViewController 和 TranslucentViewController 使用相同的 UINavigationBar 实例。也许这会引起混乱。此外，这可能就是 +appearanceWhenContainedIn: 无法按预期工作的原因。

要在整个应用程序中设置导航栏的背景图像，您应该使用 +appearance。要在导航控制器中设置单个导航栏的背景图像，请使用 UINavigationBar 的 -setBackgroundImagE:forBarMetrics:。

代码：在-TranslucentViewController viewWillAppear：设置背景图片和条形样式。在 RootViewController 中，再次设置背景图片和条形样式。根据我的经验，最好在 -viewWillAppear: 而不是 -in viewWillDisappear: 中更改导航栏（或者您需要跟踪将其更改回的内容。）

在 RootViewController

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [self.navigationController.navigationBar setBarStyle:UIBarStyleDefault];
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"orangeNavigationBar.png"] forBarMetrics:UIBarMetricsDefault];
} 
```

在半透明视图控制器中

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];

    [self.navigationController.navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault];
    [self.navigationController.navigationBar setBarStyle:UIBarStyleBlackTranslucent];
} 
```

哦，而且：只在这些地方改变它。不是在推动视图控制器或任何东西时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:53:05.887

根据您是否也使用选项卡栏，您可以将您的 appDelegate 指定为导航栏的委托或 UINavigationController 的子类，这样您的代码就会知道对 viewController 堆栈的所有更改。然后，根据可见 viewController 的类设置 UINavigationBar 上的属性以使其透明或不透明。

# android - Android：ListFragment加载项目两次

> ID：12142779
> 
> 赞同：0
> 
> 时间：2012-08-27T13:19:17.213
> 
> 标签：android, android-listfragment

这是情况。

我目前正在使用操作栏在我的一个选项卡中使用列表片段。有 3 个标签；tab1，tab2，tab3 .. listfragment 在 tab2 上，只有一些 Fragment 在 tab1 上，所以当我启动我的应用程序时默认是 ont tab1 .. 当我点击 tab2 它从数据库中加载一些东西时，请**注意当前只有一行存储在数据库**中，所以当我在再次单击 tab2 后再次单击 tab1 den 时，突然我的列表已经有两个相同值的项目，它只是被复制或加载了两次。我的数据库中只有 1 个条目。

我如何防止我的片段加载列表两次，我的意思是当我第二次加载这个列表片段时，它只会加载数据库上的内容并删除列表片段上的先前值。我对这个问题的理论是，我第一次点击 tab2 没问题，当我在 tab2 之后点击 tab1 den 时，之前的项目没有被删除，并且在加载片段时它被附加到上一个项目..

我该如何防止这种情况发生..

![在此处输入图像描述](../Images/c39a9952ef57a3d33c203d600b000577.png)

这是一个示例图片，不要介意 UI 缺陷，只是想象一下由于两次加载片段而导致条目翻倍。

这是 onActivityCreated 的一个片段

```
public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        loadPatientList(0);
    } 
```

这是我的 loadPatientList()

```
Cursor c = dbHelper.retrieveAllData(PATIENT_TABLE);
c.moveToFirst();       
while(!c.isAfterLast())
{
    Patients p = new Patients();
    Log.d("patient id",Integer.toString(c.getInt(c.getColumnIndex("_id"))));
    p.setId(c.getString(c.getColumnIndex("_id")));
    p.setFname(c.getString(c.getColumnIndex("firstname")));
    p.setMi(c.getString(c.getColumnIndex("middlename")));
    p.setLname(c.getString(c.getColumnIndex("lastname")));
    p.setAddr(c.getString(c.getColumnIndex("address")));
    p.setHosp_name(c.getString(c.getColumnIndex("hosp_name")));
    p.setHosp_room(c.getString(c.getColumnIndex("hosp_room")));
    p.setAge(c.getInt(c.getColumnIndex("age")));
    p.setMed_history(c.getString(c.getColumnIndex("med_history")));
    p.setPat_status(c.getInt(c.getColumnIndex("status")));
    patient_list.add(p);

    c.moveToNext();
}

dbHelper.close();

Collections.sort(patient_list, new Comparator<Patients>() {
   public int compare(Patients o1, Patients o2) {
      return o1.getLname().compareToIgnoreCase(o2.getLname());
   }
});

PatientAdapter patientListAdapter = new PatientAdapter(getActivity(),R.layout.patient_list_item_fragment, patient_list);
setListAdapter(patientListAdapter);
registerForContextMenu(getListView()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:36:24.117

```
onActivityCreated() 
```

当您恢复“ `PatientFragment`”时调用。由于`List`, 允许重复，每次你回到“ ”，你一次又一次地`PatientFragment`填写。`patient_list`就在进入`while`循环之前，尝试清除你的`patient_list`，删除所有元素（`List`应该有`clear()`方法）。

# android - 重力和希伯来语的问题

> ID：12142784
> 
> 赞同：3
> 
> 时间：2012-08-27T13:19:33.473
> 
> 标签：android, hebrew, gravity

我们正在用希伯来语编写应用程序。

当我们在 2 部不同的手机上运行它时，我们会得到不同的对齐方式。即使我们将重力设置为向右 - 一个向左。两者都是三星，都是 2.3.3。

两者的语言环境（由 getDefault() 给出）都是“he”。

我们注意到的唯一区别是，在有效的版本中，当您进入设置屏幕时，文本是右对齐的（应该如此）。当你进入那个不好的地方时，在设置屏幕中也是错误的。

其他在希伯来语工作的人对这个问题有任何经验吗？

任何人的想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:06:21.243

这是一个已知问题，没有真正的解决方案。

如果文本是单行，则将其宽度设置为“wrap_content”并将字段本身向左对齐。

对于多行字段，请尝试将文本居中（如果您的设计师允许...）

最后，您可以执行 yNet 所做的事情 - 设置“如果希伯来语未正确对齐，请检查此内容”并相应地更改代码中的字段重力。

一般来说，我建议不要在场地上施加重力（除非你使用设置选项）——让系统决定正确的方向。（如果三星把文字方向搞砸了怎么办？！？！？）

# settings - 如何为规则设置 Fiddler2 首选文本编辑器？

> ID：12142791
> 
> 赞同：5
> 
> 时间：2012-08-27T13:19:58.413
> 
> 标签：settings, fiddler

我已阅读常见问题解答并将我的注册表项设置为使用自定义文本编辑器......它适用于标题面板上的“在记事本中查看”按钮。但是当我尝试编辑规则时（通过菜单`Rules`> `Customize rules`）我仍然得到记事本。

我是否需要编辑一些未在常见问题解答中提及的 reg 密钥？或者这是一个错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T13:22:47.923

**提琴手 v5**：`Tools -> Options -> Tools -> Text Editor`

**对于旧版本**，这可能是一个选项：

`Tools`> `Fiddler Options...`> `Extensions`> `Editor`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-29T13:42:23.143

看起来它在最新版本的 Fiddler 中发生了变化。现在可以通过以下方式找到该设置：

```
Tools > Telerik Fiddler Options... > Tools > Text Editor. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-06T13:53:56.350

适用于 .NET 4.6.1 的 Progress Telerik Fiddler Web Debugger v5.0.20182.28034 内置日期：2018 年 6 月 27 日，星期三

`Tools > Tools > Text Editor`

# apache - 如何只允许.htaccess 上的一个用户代理？

> ID：12142792
> 
> 赞同：6
> 
> 时间：2012-08-27T13:19:58.027
> 
> 标签：apache, .htaccess, user-agent

我一直在谷歌上搜索，我真的需要知道如何在 .htaccess 上只允许一个用户代理？

我发现的只是如何在专用或私人服务器上执行此操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T17:02:51.687

如果您要允许的用户代理是：`Lynx/2.8.8dev.12`

然后，您希望在要限制的目录的 htaccess 中使用这些规则：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} !Lynx/2\.8\.8dev\.12 [NC]
RewriteRule ^ - [F,L] 
```

使用 403 禁止所有其他用户代理。

# extjs - ExtJs - 在 extJs 3.4 中通过 itemId 获取元素

> ID：12142802
> 
> 赞同：0
> 
> 时间：2012-08-27T13:20:42.833
> 
> 标签：extjs, combobox

如何获得具有相同“itemId”的组件？使用 ExtJS 3.4。

我在具有相同 itemId 的不同 hbox 布局中有 4 个组合。我需要获取所有这些组合框的值。有没有可用的api？

```
 form1  
    row1 combo1
  form1
    row2 combo2
  form1
    row3 combo3
  form1
    row4 combo4 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:54:12.423

我通过对表单内的组件使用“hiddeName”来解决它。通过 Ext.query() 我们可以获得所有的 hbox 表单，并且从该 form.getValues() 将提供表单内组件的值。

```
 forms = Ext.query(#formId); 
   for (var i=0; i < forms.length; i ++) {
     formValues = new Ext.form.BasicForm(forms[i]).getValues();
   } 
```

# c# - 如何使用 C# 语言在数据库中插入记录？

> ID：12142806
> 
> 赞同：8
> 
> 时间：2012-08-27T13:20:57.260
> 
> 标签：c#, database, visual-studio-2008

我只是 C# 的初学者，所以我需要太多帮助。现在的问题是我设计了一个 Windows 表单，其中有很多字段，如名字、姓氏、地址等。现在我想做的是，当我填写表单并单击插入按钮时，所有信息都会进入数据库。有谁知道这是怎么做到的吗？

```
private void button1_Click(object sender, System.EventArgs e)
{
    string connetionString = null;
    SqlConnection cnn ;
    SqlDataAdapter adapter = new SqlDataAdapter();
    string sql = null;
    connetionString = "Data Source=UMAIR;Initial Catalog=Air; Trusted_Connection=True;" ;

    cnn = new SqlConnection(connetionString);
    sql = "insert into Main (Firt Name, Last Name) values(textbox2.Text,textbox3.Text)";

    try
    {
        cnn.Open();
        adapter.InsertCommand = new SqlCommand(sql, cnn);
        adapter.InsertCommand.ExecuteNonQuery();
         MessageBox.Show ("Row inserted !! ");
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-27T13:26:21.190

你的查询有很多问题。
这是您的代码的修改版本

```
string connetionString = null;
string sql = null;

// All the info required to reach your db. See connectionstrings.com
connetionString = "Data Source=UMAIR;Initial Catalog=Air; Trusted_Connection=True;" ;

// Prepare a proper parameterized query 
sql = "insert into Main ([Firt Name], [Last Name]) values(@first,@last)";

// Create the connection (and be sure to dispose it at the end)
using(SqlConnection cnn = new SqlConnection(connetionString))
{
    try
    {
       // Open the connection to the database. 
       // This is the first critical step in the process.
       // If we cannot reach the db then we have connectivity problems
       cnn.Open();

       // Prepare the command to be executed on the db
       using(SqlCommand cmd = new SqlCommand(sql, cnn))
       {
           // Create and set the parameters values 
           cmd.Parameters.Add("@first", SqlDbType.NVarChar).Value = textbox2.text;
           cmd.Parameters.Add("@last", SqlDbType.NVarChar).Value = textbox3.text;

           // Let's ask the db to execute the query
           int rowsAdded = cmd.ExecuteNonQuery();
           if(rowsAdded > 0) 
              MessageBox.Show ("Row inserted!!" + );
           else
              // Well this should never really happen
              MessageBox.Show ("No row inserted");

       }
    }
    catch(Exception ex)
    {
        // We should log the error somewhere, 
        // for this example let's just show a message
        MessageBox.Show("ERROR:" + ex.Message);
    }
} 
```

*   列名包含空格（应该避免），因此您需要在它们周围加上方括号
*   您需要使用该`using`语句来确保将关闭连接并释放资源
*   您将控件直接放在字符串中，但这不起作用
*   您需要使用参数化查询来避免引用问题和 sqlinjiection 攻击
*   无需使用 DataAdapter 进行简单的插入查询
*   不要使用 AddWithValue，因为它可能是错误的来源（请参阅下面的链接）

除此之外，还有其他潜在的问题。如果用户没有在文本框控件中输入任何内容怎么办？在尝试插入之前，您是否对此进行过任何检查？正如我所说，字段名称包含空格，这会给您的代码带来不便。尝试更改这些字段名称。

此代码假定您的数据库列的类型为 NVARCHAR，如果不是，则使用适当的[SqlDbType 枚举](https://docs.microsoft.com/en-us/dotnet/api/system.data.sqldbtype)值。

请计划尽快切换到 NET Framework 的更新版本。1.1 现在真的过时了。

而且，关于 AddWithValue 问题，这篇文章解释了为什么我们应该避免它。[我们可以停止使用 AddWithValue() 了吗？](https://blogs.msmvps.com/jcoehoorn/blog/2014/05/12/can-we-stop-using-addwithvalue-already/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T13:30:11.510

使用参数化查询来防止 Sql 注入（安全问题）

使用 using 语句，以便关闭连接并释放资源。

```
using(var connection = new SqlConnection("connectionString"))
{
    connection.Open();
    var sql = "INSERT INTO Main(FirstName, SecondName) VALUES(@FirstName, @SecondName)";
    using(var cmd = new SqlCommand(sql, connection))
    {
        cmd.Parameters.AddWithValue("@FirstName", txFirstName.Text);
        cmd.Parameters.AddWithValue("@SecondName", txSecondName.Text);

        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-27T13:31:32.717

您应该更改代码以使用[**SqlParameters**](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)并将您的插入语句调整为以下

```
string connetionString = "Data Source=UMAIR;Initial Catalog=Air; Trusted_Connection=True;" ;
// [ ] required as your fields contain spaces!!
string insStmt = "insert into Main ([First Name], [Last Name]) values (@firstName,@lastName)";

using (SqlConnection cnn = new SqlConnection(connetionString))
{
    cnn.Open();
    SqlCommand insCmd = new SqlCommand(insStmt, cnn);
    // use sqlParameters to prevent sql injection!
    insCmd.Parameters.AddWithValue("@firstName", textbox2.Text);
    insCmd.Parameters.AddWithValue("@lastName", textbox3.Text);
    int affectedRows = insCmd.ExecuteNonQuery();
    MessageBox.Show (affectedRows + " rows inserted!");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:30:36.160

```
sql = "insert into Main (Firt Name, Last Name) values(textbox2.Text,textbox3.Text)"; 
```

*（名字）*不是一个有效的字段。它应该是 FirstName 或 First_Name。这可能是你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-13T09:00:15.703

您应该使用文本框的内容形成命令：

```
sql = "insert into Main (Firt Name, Last Name) values(" + textbox2.Text + 
"," + textbox3.Text+ ")"; 
```

当然，前提是您设法正确打开连接。

了解您当前的代码发生了什么会很有帮助。如果您在该消息框中显示一些错误，那么很高兴知道它在说什么。

您还应该在实际运行命令之前验证输入（即确保它们不包含恶意代码）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-27T13:23:53.813

您应该使用文本框的内容形成命令：

```
sql = "insert into Main (Firt Name, Last Name) values(" + textbox2.Text + "," + textbox3.Text+ ")"; 
```

当然，前提是您设法正确打开连接。

了解您当前的代码发生了什么会很有帮助。如果您在该消息框中显示一些错误，那么很高兴知道它在说什么。

您还应该在实际运行命令之前验证输入（即确保它们不包含恶意代码......）。

# ruby - Ruby 通过链接避免“堆栈级别太深”

> ID：12142810
> 
> 赞同：0
> 
> 时间：2012-08-27T13:21:12.497
> 
> 标签：ruby

所以我有一个“堆栈级别太深”的错误，我很确定我知道是什么原因造成的。我正在开发一个基于图块的游戏，并且我拥有所有图块，并且为了方便（每次我需要使用寻路时省去查找它），每个图块都有一个包含 8 个邻居的“附近”数组。

但是，当我去打印一些对象进行调试时，我经常遇到“堆栈级别太深”的错误。我认为这是因为每个图块在“附近”数组中都有相邻的图块，然后它们引用原始图块，在尝试打印所有对象时创建一个循环。

我可以忍受这个，但如果我能把蛋糕也吃掉就更好了。我可以通过 id 或坐标引用图块来避免它，而不是直接引用对象。缺点是这意味着每次都要搜索对象。

那么，有没有办法维护我当前的代码，但防止“附近”数组在输出中打印，以便它正常停止？

希望这很清楚！当前代码：

```
class Tile
    attr_accessor :type, :x, :y, :z, :nearby, :t_id

    @type = 0

    @@count = 0

    def initialize(x, y, z, type)
        @x = x
        @y = y
        @z = z
        @t_id = @@count
        @@count += 1

        @nearby = [] 

        @type = type
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:36:42.043

当您将对象传递给[p](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-p)时，Ruby 会打印出对象的[检查](http://ruby-doc.org/core-1.9.3/Object.html#method-i-inspect)方法的返回值。您可以在您的类上覆盖检查，使其返回一个字符串，其中仅包含对您有用的信息。

例如：

```
class A
  def inspect
    "printing an instance of A"
  end
end 
```

打印时：

```
irb> a = A.new    
irb> p a    
printing an instance of A 
```

# java - 输入特定键时进入循环 - Java

> ID：12142811
> 
> 赞同：0
> 
> 时间：2012-08-27T13:21:13.460
> 
> 标签：java

嗨，我有一些代码供 Java 控制台在按下特定键时执行某些操作。系统输入密钥并将其存储为字符串，我可以打印出来以确认它是否有效。但是，代码从不进入条件语句，而是每次都跳转到 else。这是代码：

```
Scanner MenuChoice = new Scanner(System.in);
    Products.MenuCode = MenuChoice.next();

                if(Products.MenuCode=="F")
                {
                //Run subprogram for finding a product.
                Find.main();    

                }

                else{
                System.out.println("F - Find a Product");
                 System.out.println("p - Purchase a Product");
                  System.out.println("Q - Quit");
                  Scanner MenuChoice2 = new Scanner(System.in);
                  Products.MenuCode = MenuChoice2.next();
                }; 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:24:16.357

你可以这样做

```
Scanner MenuChoice = new Scanner(System.in);
Products.MenuCode = MenuChoice.next();

            if(Products.MenuCode.equals("F")) // use equals method 
            {
            //Run subprogram for finding a product.
            Find.main();    

            }

            else{
            System.out.println("F - Find a Product");
             System.out.println("p - Purchase a Product");
              System.out.println("Q - Quit");
              Scanner MenuChoice2 = new Scanner(System.in);
              Products.MenuCode = MenuChoice2.next();
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:26:37.923

您不能使用 == 比较字符串，您必须使用 equals 方法。

equals 方法的工作原理如下：

```
boolean b = string1.equals(string2); 
```

# django - 在 Pycharm 中调试表单验证

> ID：12142819
> 
> 赞同：7
> 
> 时间：2012-08-27T13:21:39.977
> 
> 标签：django, django-forms, pycharm

我正在尝试使用 Pycharm 在 Django 中调试表单验证。我通过 ImageField 上传的图像验证我的表单失败，我想找出它失败的原因。但是，每当我尝试调试验证过程并使用 POST 数据进入并完成表单初始化时，它甚至都不会尝试验证，并且在尝试将表单数据保存到数据库。这让我发疯......行为如何根据我是否观察各个步骤而改变？我还尝试设置几个断点，例如在 BaseForm 类的完全清理方法期间，但它似乎永远不会到达那里。

**编辑：**这是一些代码

我的模型和形式：

```
class Car(models.Model):
    ...
    image = models.ImageField(upload_to='car_images/',blank=True,null=True)

class CarForm(ModelForm):
    class Meta:
        model = Car 
```

我的观点：

```
def create_car(request):
    if request.method == 'POST':
        car_form = CarForm(request.POST,request.FILES)
        if car_form.is_valid():
            ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-26T20:56:39.960

这是一个真正的痛苦。我遇到过两次这个问题，仍然没有找到好的解决方案。

**`__init__`这是当您覆盖表单的方法时安全调试的示例。**

```
class MyForm(forms.ModelForm):

    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)

        # Disable form validation for debugging purposes unless the
        # object is fully initialized. Set breakpoints BELOW this line.
        del self._errors

        # Write some additional initializations here, debug safely.
        ...

        # Initialization is finished. Enable form validation.
        self._errors = None 
```

如果要调试基本表单类，请以相同的方式修补 Django 代码。

您可以在调试后保留或删除此附加代码 - 这没有显着差异。但最好留到将来需要这个的情况下。

**那么，这里到底发生了什么？**

（Django 项目网站上的错误报告：[https](https://code.djangoproject.com/ticket/24710) ://code.djangoproject.com/ticket/24710 ）

似乎问题在于 Django 的`BaseForm.errors`属性 getter（它实际上是一个带有`@property`装饰器的方法）做得太多了。它调用`full_clean()`更改`_errors`属性值的方法，以便`errors`getter 在重复调用时不会再次执行相同的工作。

```
class BaseForm(object):

    @property
    def errors(self):
        if self._errors is None:
            self.full_clean()
        return self._errors

    def full_clean(self):
        self._errors = ErrorDict()
        ... 
```

当然，PyCharm 调试器假定属性只是属性，它们不会对对象的内部状态进行关键更改。因此，当您调试方法时，调试器会调用`errors`getter 在“变量”窗口中显示它的值。`__ini__`这打破了正常的执行流程。

（这就是为什么你应该`get_error()`在这种情况下定义方法，而不是属性）

`__init__`一种可能的建议可能是避免在表单方法中设置断点和逐步执行。但是，如果您确实需要调试它，请修改代码，以便`_errors`在逐步执行期间不存在该属性。这将阻止对该`full_clean`方法的调用。PyCharm 调试器每次尝试访问该`errors`属性时都会收到错误消息。

**注意**：`errors`可以在暂停执行时的任何步骤上评估该属性，即使在`__init__`方法之外也是如此。如果所有字段都已完全初始化，这可能不会影响结果（请记住`__init__`仅在方法中执行此操作）。但是，您可能会发现您仍然无法调试表单验证过程，因为在您到达`is_valid`方法调用之前表单似乎已验证。在这种情况下，在`full_clean`方法内部设置一个断点，并且不要在表单实例化点和这个断点之间停止。

# javascript - 如何使用高图表创建半圆形仪表？

> ID：12142820
> 
> 赞同：0
> 
> 时间：2012-08-27T13:21:43.883
> 
> 标签：javascript, highcharts

我必须使用高图表创建一个半圆形仪表图表。我有[这个](http://jsfiddle.net/EjRLw/280)，但是这个有一个完整的圆形表盘。需要的是一个半圆形的表盘，即只包含表盘的上部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:42:32.007

您可以将中心参数添加到窗格部分，

```
pane : {
  center: ['50%', '100%']
   ...
} 
```

查看修改后的演示，[http://jsfiddle.net/EjRLw/524/](http://jsfiddle.net/EjRLw/524/)

参考高图API [http://api.highcharts.com/highcharts#pane.center](http://api.highcharts.com/highcharts#pane.center)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-15T11:00:19.230

```
 pane: {
        startAngle: -90,
        endAngle: 90,
        background:[]
    }, 
```

那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:27:05.610

像这样更改最后一个功能，您将拥有整个表盘的上部

```
 // Add some life
    function(chart) {
        setInterval(function() {
            var point = chart.series[0].points[0],
                newVal, inc = 100;

            newVal = inc;
            if (newVal < 0 || newVal > 100) {
                newVal = 50;
            }

            point.update(newVal);

        }, 3000);

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-07T15:19:38.553

您可以将背景形状设置为弧形，例如

```
pane:{
      background:{
        ...
        shape:'arc'
        ...
      }
    } 
```

然后使用此 CSS 删除半圆下方的空间

```
.chatcontainer > div {
   margin-bottom: -35% !important
}
.chatcontainer > div.highcharts-container > svg {
   margin-bottom: -35%; max-height: 65% !important;
} 
```

# jquery - Jquery UI 可排序，按钮不能用作句柄

> ID：12142827
> 
> 赞同：34
> 
> 时间：2012-08-27T13:22:13.923
> 
> 标签：jquery, jquery-ui, handle, jquery-ui-sortable

我正在尝试`tr's`在表格中进行排序。

**代码**

```
$("table tbody").sortable({
    handle: 'button'
    //handle: 'img'
}).disableSelection(); 
```

[现场小提琴](http://jsfiddle.net/uttara/22C2n/701/)

现在的问题是当使用`img`作为处理它的工作正常

但是当`button`用作手柄时它不起作用

我为我的 ans 检查了许多 jquery ui 可排序问题，但没有帮助

谁能解释一下为什么会这样

提前感谢

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-27T17:03:00.940

该`cancel`选项默认`:input,button`与您的句柄设置冲突。只需将其设置为空字符串即可。

```
$("table tbody").sortable({ 
    handle: 'button',
    cancel: ''
}) 
```

[http://jsfiddle.net/22C2n/705/](http://jsfiddle.net/22C2n/705/)

# javascript - val.replace(/[^a-zA-Z_-0-9]/g, '') 产生 SyntaxError: invalid range in character class

> ID：12142829
> 
> 赞同：9
> 
> 时间：2012-08-27T13:22:18.323
> 
> 标签：javascript, regex

我需要替换所有与 range 不匹配的字符`a-zA-Z_-0-9`。所以我这样做`val.replace(/[^a-zA-Z_-0-9]/g, '')`但得到错误。我怎么能咬这个？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T13:25:05.720

如果要在字符类中包含减号“-”，则必须将其放入范围的末尾：

```
val.replace(/[^a-zA-Z_0-9-]/g, '') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T13:24:35.730

您希望该`-`字符被解析为文字，但实际上它被解析为一个范围：`_-0`表示`_`to `0`，就像`a-z`表示`a`to一样`z`。但是，由于`_`具有比 更高的字符代码`0`，您会收到错误消息。

在你的情况下，只是逃避它：`\-`. 这被解析为`-`字符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T13:25:23.497

我更喜欢这个正则表达式：

```
val.replace(/[^\w-]+/gi, ""); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-27T13:27:54.780

[如果该字符是括号内的最后一个或第一个（在 之后）字符，则该`-`字符被视为文字字符。`^`](http://en.wikipedia.org/wiki/Regular_expression)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-27T13:24:14.847

您的范围不好，删除`-`中间`_`和数字范围并将其放在末尾或开头。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-27T13:25:18.507

试试这个：

```
val.replace(/[^a-zA-Z_0-9-]/g, ''); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-27T13:27:19.240

您需要转义“-”

```
val.replace(/[^a-zA-Z_\-0-9]/g, '') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-26T00:43:24.553

```
$(this).val($(this).val().replace(/[^a-zA-Z_0-9-]/g, '')); 
```

# mysql - 建议“优化 SQL 查询的响应时间”

> ID：12142832
> 
> 赞同：3
> 
> 时间：2012-08-27T13:22:25.420
> 
> 标签：mysql, ruby-on-rails, performance, view, query-optimization

我想知道对于包含超过 2.000.000 条记录的表优化 SQL 查询的响应时间的最佳解决方案是什么

作为解决方案，我想到了创建一个SQL视图的虚拟表（其实我更喜欢mysql在今年创建的行中早点搜索，因为这个应用程序的数据是基于季节的。）

有更好的解决方案或建议吗？

例如搜索租金 12 的所有租金行

before => select * fromrent_lines whererent_id = 12

现在 => 我创建了一个视图

```
CREATE VIEW v_rent_lines
AS SELECT rent_id, category_id, customer_id, amount ..
Where rent_lines FROM created_at > = (select starts_on from seasons where current = true)

select * from v_rent_lines Where rent_id = 12 
```

笔记：

*   正在使用数据库引擎 InnoDB

*   我添加了索引表（index_rent_lines_on_rent_id、index_rent_lines_on_category_id、index_rent_lines_on_customer_id）

*   租金有很多rent_lines

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:47:43.300

在这种情况下，这种观点并没有真正帮助任何事情。作为开发人员，视图主要通过让您按名称引用更复杂的查询而不是一直重复详细信息来帮助您。他们并没有真正帮助mysql。

你有很多选择。

1.  如果您还没有，请确保您有一个索引，其中rent_id 是索引中的唯一字段，或者是索引中的第一个字段。例如：

    ```
    create index rent_id_idx on rent_lines (rent_id) 
    ```

2.  可以考虑使用mysql的分区系统和rent_id上的分区

3.  您可以通过执行以下操作来创建具有较低基数的索引：

    ```
    alter table rent_lines add rent_id_bucket smallint unsigned not null after rent_id;
    update rent_lines set rent_id_bucket = rent_id>>16;
    alter table rent_lines add key rent_id_bucket_idx(rent_id_bucket); 
    ```

    这将让您执行如下查询：

    ```
    select * from rent_lines where rent_id_bucket = 16>>16 and rent_id=16 
    ```

# snmp - c++ 如何使用 snmp-net 将值写入 OID

> ID：12142835
> 
> 赞同：0
> 
> 时间：2012-08-27T13:22:32.367
> 
> 标签：snmp, net-snmp

我遵循本[教程](http://www.net-snmp.org/wiki/index.php/TUT%3aWriting_a_MIB_Module)。我成功地完成了所有工作，但我无法弄清楚如何从我的应用程序中更改 MIB 标量值。

我想将我的应用程序中的值写入这些 OID，以便能够通过 SNMP 监控我的应用程序。

本教程向您展示了如何注册 OID 并为其设置值，但是如何根据应用程序状态更改应用程序中的值？

我的目标：我有自己的应用程序（简单的业务应用程序）在 Ubuntu 机器上运行。我通过 SNMP 从远程客户端监控主机。我监视诸如 CPU、RAM 之类的东西。我通过将 snmp-get 发送到这些 OID 来做到这一点。

作为托管监控的一部分，我也想监控我的应用程序（例如 request_quoue_size），所以我认为这样做的方法是编写我自己的 MIB 模块并在此 OID 上从我的应用程序编写调用来设置，我正在寻找现在如何调用 set (c++) 以及是否是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:49:20.177

首先，MIB 只是一个接口（它指定了可以从 MIB 模块访问的所有 OID）。您的应用程序是 SNMP 代理还是 SNMP 消费者？

如果您在 SNMP 代理中，那么我假设您可以直接访问 OID 所在的内存。那么，您的问题到底是什么？

如果您在 SNMP 客户端中，则需要使用正确的 UDP 数据包向代理发送 snmp-set 请求...

请添加一些有关您要实现的目标的详细信息。

# c - C中的字符串错误

> ID：12142837
> 
> 赞同：-4
> 
> 时间：2012-08-27T13:22:36.930
> 
> 标签：c, string, syntax-error

```
 void mark(char arr[],int s[][50],int i,int j){
   if(j>i)
      arr = "("+mark(arr,s,i,s[i][j])+"*"+ mark(arr,s,s[i][j]+1,j)+ ")";
   else
      sprintf(arr, "%s%d", "M",i);

  } 
```

当我遵守这一点时，我得到一个错误： void value not ignored as it should be. 现在 arr 是一个足够大的字符数组，可以存储最终生成的括号和字母的值。我正在尝试在 C 中实现此代码，但我是一个完整的初学者。有人可以告诉我如何连接字符串（比如在 javascript 中使用 '+' 运算符）。任何关于从哪里开始学习 C（对于初学者）的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:35:08.610

除了字符串处理的问题外，您还可以`mark`在表达式内部递归调用函数，期望得到结果。但是，您将其声明为返回`void`，并且您实际上从未从函数中返回任何内容。

**编辑：**这样的事情怎么样（未经测试！）：

```
char *mark(char arr[], int s[][50], int i, int j)
{
    if (j > i)
    {
        sprintf(arr, "(%s * %s)",
            mark(arr, s, i, s[i][j]),
            mark(arr, s, s[i][j] + 1, j));
    }
    else
        sprintf(arr, "M%d", i);

    return arr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:35:43.033

您是正确的，您不能按照您尝试的方式添加字符串。这不会在 C 中运行。但是，这个错误：

```
error: void value not ignored as it ought to be 
```

与那个问题无关。那是因为您试图使用从不返回任何内容的函数的返回值。

```
 void mark(char arr[],int s[][50],int i,int j) //void means it returns nothing

    arr = "("+mark(arr,s,i,s[i][j])+      // This says store into arr "(" + nothing 
```

编译器不知道如何处理该语句，因此它会抛出您上面提到的错误。一旦你解决了这个问题（通过添加一个返回 mark() 或任何你想做的事情来解决它），你会得到一个像这样的错误：

```
error C2110: '+' : cannot add two pointers 
```

或者：

```
error: invalid operands to binary + (have ‘char *’ and ‘char *’) 
```

或类似的东西取决于你的编译器。那是因为，正如你所提到的，你不能在 C 中添加这样的字符串。为了连接你的字符串，你需要使用 strcat：

```
char str_one[1024] = "hello";  //something big enough for whatever your putting in it... size is up to you
char str_two[] = " world";
strcat(str_one, str_two);      //str_one now has "hello world" 
```

# twitter - 通过 url 参数获取 Twitter 消息

> ID：12142838
> 
> 赞同：0
> 
> 时间：2012-08-27T13:22:40.433
> 
> 标签：twitter

我尝试获取最后一条推文的 N 个数字并使用此 url

```
http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=cnn&count=20 
```

我猜这个参数`count`会给我最后一条推文的确切数量，但它显示了一些任意数量的推文。

任何线索我必须使用哪个参数来获得准确的推特数量？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:23:36.670

计数不一致的原因可能是您没有收到转发。我认为 Twitters 算法会抓取推文数量并将转发推文拉出。也许尝试添加参数“include_rts=true”。

# asp.net-mvc - 将 - Page.User.Identity.Name 传递给控制器

> ID：12142839
> 
> 赞同：-1
> 
> 时间：2012-08-27T13:22:40.840
> 
> 标签：asp.net-mvc

我有这个网址导航：

```
<telerik:RadMenuItem runat="server" Text="View All Employees" NavigateUrl= "../../Employee/ViewAll"  > 
```

我需要将导航 url 中的“Page.User.Identity.Name” - 员工/查看全部传递给下面的控制器：

```
public ActionResult ViewAll()employees
    {   

        return View(_emp.ViewAll());
    } 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:35:40.580

您不需要将它传递给控制器​​，因为它已经可以从那里访问。

```
var name = User.Identity.Name 
```

# css - IE浏览器模式和文档模式的问题

> ID：12142840
> 
> 赞同：0
> 
> 时间：2012-08-27T13:22:41.487
> 
> 标签：css, html, internet-explorer, internet-explorer-7

我在使用 IE 时遇到问题。我正在测试我的网站的 IE7 兼容性（我有 IE9）。

当我将浏览器模式和文档模式都更改为 IE7 时，它显示一切正常（我检查了另一台安装了 IE7 的计算机，它显示与此相同的效果）。

但每当我只将浏览器模式更改为 IE7 并保持文档模式为 IE8 时，样式就会变得奇怪。我浏览了一些博客，上面说，如果我将浏览器模式更改为 IE7，那么它会强制文档模式为 IE7 之一。但我认为这里的情况不一样。

我是否通过更改浏览器和文档模式进行正确测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:28:58.370

实际上，如果你有 doctype html4 那么你应该有相同的浏览器模式和文档模式是 quirk.for 例如

浏览器模式 - ie7 和文档模式 - 怪癖

如果您有 doctype xhtml 或 html5，那么您的浏览器模式和 doctype 也相同，例如：

浏览器模式 - ie7 和文档模式 ie7 标准

和 doctype 应该和浏览器一样。

# java - 无法使用 glassfish 创建正常运行的连接池

> ID：12142844
> 
> 赞同：0
> 
> 时间：2012-08-27T13:22:46.683
> 
> 标签：java, oracle, glassfish, connection-pooling

我正在尝试创建一个从 glassfish 到 Oracle 的连接池。当我使用命令行时，在创建过程中似乎一切正常，但应用程序因以下异常而崩溃：

``Caused by: java.sql.SQLException: Protocol violation at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450) at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186) at oracle.jdbc.driver.T4C7Ocommoncall.doOROLLBACK(T4C7Ocommoncall.java:68) at oracle.jdbc.driver.T4CConnection.doRollback(T4CConnection.java:642) at oracle.jdbc.driver.PhysicalConnection.rollback(PhysicalConnection.java:3716) at com.sun.gjc.spi.base.ConnectionHolder.rollback(ConnectionHolder.java:630) at org.hibernate.transaction.JDBCTransaction.rollbackAndResetAutoCommit(JDBCTransaction.java:217) at org.hibernate.transaction.JDBCTransaction.rollback(JDBCTransaction.java:196)``

**编辑**：当应用程序尝试使用 JPA 进行回滚时，会引发此异常。**结束编辑**

这是我用来创建 CP 的命令：
``asadmin> create-jdbc-connection-pool --restype javax.sql.DataSource --datasourceclassname oracle.jdbc.pool.OracleDataSource --property "user=myUser:password=myPw:url=jdbc\\:oracle\\:thin\\:@dbHostName\\:1521\\:mySID" My_CP``

我还尝试从管理员 gui 创建 CP（这将更加用户友好），但即使我在 /opt/glassfish3_old/glassfish/domains/domain1/lib 中复制了 ojdbc6.jar，当我必须选择驱动程序时classname 对应的选择列表为空！

**编辑**：我正在使用：Java 版本“1.7.0_06”Java(TM) SE 运行时环境（构建 1.7.0_06-b24）Java HotSpot(TM) 服务器 VM（构建 23.2-b09，混合模式）

和 glassfish 3.1.2.2 oracle 版本（但对于 3.1.2 开源版本，它的行为相同）
**结束编辑**

可能我在某个地方犯了一个愚蠢的错误。

任何人都可以有一个建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:52:43.047

代替：

```
url=jdbc\\:oracle\\:thin\\:@dbHostName\\:1521\\:mySID 
```

尝试以下模式？

```
jdbc:oracle:thin:@dbHostName:1521:mySID 
```

# java - Ajax 调用中的未定义错误

> ID：12142848
> 
> 赞同：1
> 
> 时间：2012-08-27T13:23:05.350
> 
> 标签：java, javascript, ajax, jsp, spring-mvc

我对 Ajax 很陌生，我正在尝试在 jsp 页面上显示已完成的任务和正在进行的任务。以下是我的ajax请求：

```
function checkProgress() {
  var uri="<%=request.getContextPath()%>/digitalObject/checkingProgress";
  $.ajax(
    {
      url: uri,
      type: 'GET',
      dataType: 'json',
      async:false,
      timeout: 100,
      success: function(data){
         updateUI(data);
      },
      error: function(xhr, ajaxOptions, thrownError) {
        alert("err"+thrownError+xhr.responseText);
      }
    });
}
function updateUI(data){
  // do something with "data"
  switch(data) {
    case "progress.Decompose":
      $("#decompose").removeClass("notStarted");
      $("#decompose").addClass("progress");
      $("#imgDecompose").html(htmlLoaderImage);
      break;
    case "Main object is decomposed":
      $("#decompose").removeClass("progress");
      $("#decompose").addClass("finished");
      $("#imgDecompose").html(htmlSuccessImage);
      break;
    case "started":
      alert(data);
  }
  checkProgress (uri);
} 
```

这是一个无限的 Ajax 请求，它将通过在控制器中调用此方法来检查进度。

```
@RequestMapping(value="/checkingProgress",method= RequestMethod.GET)
public String checkProgress() {
  System.out.println("In checking progress");
  return progress;
} 
```

但我收到一个未定义的错误。我正在使用 Spring MVC。我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:32:24.663

如果您的浏览器向 /checkingProgress 发送有效请求，首先使用例如 firebug 进行检查

那么既然你`datatype`是`JSON`你可能想要返回一个有效的`JSON`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:39:44.157

我可以建议一个更好的方法..

```
var updater = setInterval(function(){
   $.ajax(
   {
     url: uri,
     type: 'GET',
     dataType: 'json',
     async:false,      
     success: updateUI
   });
}, 5000), 

function updateUI(data){
   //switch - case and update accrodingly
} 
```

让回调完成执行比在回调中进行另一个调用更有意义`success`。

`setInterval`每隔一段时间执行你的代码块。允许执行其他功能。并且还保持调用堆栈干净！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:13:13.410

我认为您没有将请求发送到正确的路径。从您发布的控制器代码片段看来，您需要将请求映射更改为`@RequestMapping(value="/digitalObject/checkingProgress")`.

此外，正如@Michael Laffargue 指出的，您需要返回有效的 json。您可以通过在方法声明中添加 @ResponseBody 来做到这一点：

```
public @ResponseBody String checkProgress() {
    ...
} 
```

确保 MappingJacksonHttpMessageConverter 已启用。您还可以使用 Firebug、Chrome 开发工具或 Fiddler 来准确查看您的请求/响应发生了什么。

# android - Android 使用后退按钮

> ID：12142851
> 
> 赞同：-1
> 
> 时间：2012-08-27T13:23:15.420
> 
> 标签：android

我想使用手机本身的后退按钮来显示一个对话框，询问我是否确定要退出？

```
 public void onBackPressed() {
    // TODO Auto-generated method stub

    AlertDialog.Builder dialog=new AlertDialog.Builder(MainActivity.this);
    dialog.setTitle("Confirm");
    dialog.setMessage("Are you sure you want to exit?");
    return;
 }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    EditText text=(EditText)findViewById(R.id.Text);
    TextWatcher watch=new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            onBackPressed();
        }
    };
    text.addTextChangedListener(watch);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:25:11.087

正如我认为你`onBackPressed()`是处理android后退键的覆盖方法。

只需添加`dialog.create().show()`到您的`onBackPressed();`.

它将显示**AlertDialog** ..

也`onBackPressed();`从`afterTextChanged(Editable s)`else 中删除，每当用户尝试在`EditText`..中输入某些字符时，它都会调用它。

**更新：**

`onBackPressed()`你应该像的另一件事，

```
@Override
public void onBackPressed()
{
 super.onBackPressed();

 AlertDialog.Builder dialog = new AlertDialog.Builder(TestActivity.this);
 dialog.setTitle("Confirm");
 dialog.setMessage("Are you sure you want to exit?");
 dialog.create().show();
} 
```

不改就改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:25:19.523

将此代码用于后退按钮事件

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
   if (keyCode == KeyEvent.KEYCODE_BACK) {
     onBackPressed();
     return true;
   }
 return super.onKeyDown(keyCode, event);
} 
```

这是警报对话框

```
private void onBackPressed() {

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
    alertDialogBuilder.setTitle("Do you really want to exit?");
    alertDialogBuilder
            .setMessage("Click yes to exit!")
            .setCancelable(false)
            .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close
                    // current activity
                    ThisActivity.this.finish();
                }
              })
            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });             
            AlertDialog alertDialog = alertDialogBuilder.create(); 
            alertDialog.show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:25:21.023

尝试这个。

```
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) 
    {
        showDialogForCloseApplication();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

private void showDialogForCloseApplication()
    {
        try
        {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle(getResources().getString(R.string.name));
            builder.setMessage("Are you sure you want to exit?")
               .setCancelable(false)
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
               {
                   public void onClick(DialogInterface dialog, int id) 
                   {
                       finish();
                   }
               })
               .setNegativeButton("No", new DialogInterface.OnClickListener() 
               {
                   public void onClick(DialogInterface dialog, int id) 
                   {
                        dialog.cancel();
                   }
               });
            AlertDialog alert = builder.create();
            alert.show();
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:26:31.350

**第一种方式：*`onKeyDown` *尝试在当前活动中使用 @Override方法：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if (keyCode == event.KEYCODE_BACK) {
        showAlert("", "Do you really want to exit?");
    }
    return super.onKeyDown(keyCode, event);
}

private void showAlert(final String title, final String msg) {
    AlertDialog.Builder dialouge = new AlertDialog.Builder(CategoriesList.this);
    dialouge.setMessage(msg);
    dialouge.setPositiveButton(" Yes ", new DialogInterface.OnClickListener() {
        public void onClick( DialogInterface arg0, int arg1) {
            CurrentActivity.this.finish();
        }
    });
    dialouge.setNegativeButton(" No ", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
        }
    });
    dialouge.show();
} 
```

**第二种方式：** @Override `onBackPresed()`

```
public void onBackPresed(){

   Log.d(TAG,"inside onBackPressed()");
       showAlert("", "Do you really want to exit?");
} 
```

# sikuli - 确定应用程序是否与 Sikuli Automation 一起安装

> ID：12142860
> 
> 赞同：1
> 
> 时间：2012-08-27T13:23:52.110
> 
> 标签：sikuli

我想创建一个 Sikuli 脚本来确定应用程序或软件是否安装在 Mac、Linux 和 Windows 中。我怎样才能做到这一点？如果 Sikuli 不方便，请建议最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:49:34.583

不通过 Sikuli，但有一些方法可以使用 jython 搜索可执行文件。下面的链接将帮助您入门。

[测试 Python 中是否存在可执行文件？](https://stackoverflow.com/questions/377017/test-if-executable-exists-in-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:29:22.930

如果您正在寻找命令行程序，Spearson 的回答很好。如果您的意思是安装的程序不一定可以从命令行获得，我之前使用过 Sikuli 来执行此操作。

**Windows**：单击开始菜单，键入应用程序名称，查找它是否出现在结果中

**Mac OS**：键入`command-space`或单击 Spotlight 菜单，在此处搜索应用程序名称

**Linux**：最难，因为没有一个桌面。不过，它们中的大多数都有类似于 Windows 开始菜单的功能。

我喜欢这个解决方案，因为它在操作系统之间基本相同，但它也相当脆弱。一些失败案例是

*   Windows 主题不同或任务栏位于意外位置
*   该程序没有安装开始菜单快捷方式
*   Spotlight 尚未索引应用程序（因为它刚刚安装）
*   安装了另一个同名的版本或程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:49:36.653

斯库利虽然不方便，但如果非要用，可以这样：

**视窗**

*   打开控制面板并转到添加/删除应用程序
*   滚动列表并尝试 find() 您要查找的应用程序的图标

**操作系统**

*   打开 Finder 并转到 Applications 文件夹
*   滚动所有窗口并尝试 find() 您要查找的应用程序的图标

如果查找图标失败，请再次尝试通过文本查找，`find("My Application Name")`因为视觉引擎并非 100% 准确，因此即使显示图标也可能会失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-20T09:13:45.990

我检查是否安装了记事本的方法是：

```
zen = App.open('Notepad')
if (zen != 'None'):
    print('Program is installed!')
    wait(2)
    # Close Notepad again. 
    App.close('Notepad')
else:
    print('Program is not installed!') 
```

或者，如果您知道文件的安装路径：

```
import os
pathA = os.path.exists(r'C:\Program Files (x86)\Mozilla Firefox\firefox.exe')
print(pathA) 
```

# makefile - 使用 gdb 进行调试 - 正确使用带有多个文件的 -g 标志

> ID：12142865
> 
> 赞同：0
> 
> 时间：2012-08-27T13:24:07.210
> 
> 标签：makefile, gdb

我正在尝试使用通过 emacs 运行的 gdb 进行调试，但没有成功。我不断得到众所周知的“找不到调试符号”。我认为问题出在我使用 -g 标志编译的方式上，但我不知道我的错误在哪里。这是生成文件：

```
all: tree

tree: main.o OctTree.o my_vec.o runge_kutta.o initialize.o global.o
    g++ -g -o tree main.o OctTree.o my_vec.o runge_kutta.o initialize.o global.o -lm

main.o: main.cpp OctTree.h my_vec.h global.h
    g++ -g -o3 main.cpp -o main.o 

my_vec.o: my_vec.cpp my_vec.h
    g++ -g -o3 my_vec.cpp -o my_vec.o

OctTree.o: OctTree.cpp OctTree.h my_vec.h global.h
    g++ -g -o3 OctTree.cpp -o OctTree.o

runge_kutta.o: runge_kutta.cpp OctTree.h my_vec.h global.h
    g++ -g -o3 runge_kutta.cpp -o runge_kutta.o

initialize.o: initialize.cpp my_vec.h OctTree.h global.h
    g++ -g -o3 initialize.cpp -o initialize.o

global.o : global.cpp global.h
    g++ -g -o3 global.cpp -o global.o

clean: 
    rm main.o my_vec.o OctTree.o runge_kutta.o initialize.o global.o-f 
```

当我尝试运行 gdb 时，我收到此消息：Reading symbols from /home/alexander/physics with computer/final/tree...(no debugging symbols found)...done。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:21:01.103

> 当我尝试运行 gdb 时，我收到此消息：Reading symbols from /home/alexander/physics with computer/final/tree...(no debugging symbols found)...done。

很明显，您的构建实际上确实包含调试信息。因此，您*一定*是在调试您所构建的东西（*其他*副本`tree`）之外的东西。

你应该

1.  确认二进制文件有调试信息。例如：

    ```
     cd /home/alexander/physics/computer/final
     readelf -wl tree | grep 'runge_kutta\.cpp' 
    ```

    应该产生一些输出。和

    ```
     readelf -w tree 
    ```

    应该会产生*很多*输出。

2.  确认您可以在 emacs 之外调试此二进制文件：

    ```
    gdb ./tree 
    ```

    这不*应该*产生`no debugging symbols found`

3.  现在在 emacs 中调试这个二进制文件：

    ```
    M-x gdb 
    ```

    完成命令`gdb /home/alexander/physics/computer/final/tree`

    如果第 2 步有效，则第 3 步也不会产生`no debugging symbols found`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:51:34.170

您最好利用 make 的功能使您的 makefile 更容易更改。例如：

```
# all cpp files (add files here if you add more to your project)
SRC_FILES = main.cpp my_vec.cpp OctTree.cpp runge_kutta.cpp initialize.cpp global.cpp
OBJ_FILES = $(addsuffix .o,$(basename $(SRC_FILES))) # autogenerated

# flags, options, and other crap
OUTPUT = tree
CXX_FLAGS = -c -g # -O3 # disable optimization for now
CXX_FLAGS_LINK = -g
LIBS = -lm

# first target
all: tree

# tree target: requires all object files, links them into output executable
tree: $(OBJ_FILES)
    g++ $(CXX_FLAGS_LINK) -o $(OUTPUT) $(OBJFILES) $(LIBS)

# generic target for any cpp file
%.o: %.cpp
    g++ $(CXX_FLAGS) -o %.o %.cpp

# clean target
clean: 
    rm main.o my_vec.o OctTree.o runge_kutta.o initialize.o global.o -f

# specific dependencies for each file
# you can generate these with g++ -MM <filename.cpp>
main.o: main.cpp OctTree.h my_vec.h global.h
my_vec.o: my_vec.cpp my_vec.h
OctTree.o: OctTree.cpp OctTree.h my_vec.h global.h
runge_kutta.o: runge_kutta.cpp OctTree.h my_vec.h global.h
initialize.o: initialize.cpp my_vec.h OctTree.h global.h
global.o : global.cpp global.h 
```

我怀疑您遇到的问题与编译器要在 O3 上提高代码效率的长度有关。不进行优化再试一次，看看是否适合您。

我根本没有测试过这个makefile。

# 编辑：

好的，您已尝试禁用优化。您尝试过`make clean`并在优化关闭的情况下重新编译？你是如何启动调试器的？关闭优化，它与调试不协调，即使 GDB 现在有不同的抱怨。你忘了重建你的资源吗？

# javascript - 选择具有其他类名的附近表行并切换类

> ID：12142871
> 
> 赞同：2
> 
> 时间：2012-08-27T13:24:28.910
> 
> 标签：javascript, jquery, html, css

我有一个以 HTML 显示的表格，它有两种类

1 - 替代 2 - 选定行数据

最初，单击时将具有类“alt”，该类将更改为“SelectedrowData”。同时保留其类为“SelectedrowData”的剩余应保留为“alt”。

简单来说。**当我单击一行时，应切换类名**。当我单击其他行时也是如此。实际上在**整个表中只有 1 个“SelectedrowData”**

我的表如下

```
 <table>
    <thead></thead>
    <tbody>
    <tr class="alt">
        <td>72</td>
        <td>SALES DEPT. SALES STAFF</td>
        <td class="fieldHide">7018072</td>
        <td class="fieldHide">7018572</td>
        <td class="fieldHide">7018072</td>
        <td class="fieldHide">7018072</td>
        <td class="fieldHide">6</td>
        <td class="fieldHide"></td>
        <td>Default</td>
    </tr>
    <tr class="SelectedrowData">
        <td>73</td>
        <td>SALES DEPT. OFFICE ADMIN</td>
        <td class="fieldHide">7018073</td>
        <td class="fieldHide">7018573</td>
        <td class="fieldHide">7018073</td>
        <td class="fieldHide">7018073</td>
        <td class="fieldHide">7</td>
        <td class="fieldHide"></td>
        <td>Default</td>
    </tr>
    <tr class="alt">
        <td>72</td>
        <td>SALES</td>
        <td class="fieldHide">7018072</td>
        <td class="fieldHide">7018572</td>
        <td class="fieldHide">7018072</td>
        <td class="fieldHide">7018072</td>
        <td class="fieldHide">6</td>
        <td class="fieldHide"></td>
        <td>Default</td>
    </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:35:32.707

```
$('tr').click(function(){
       $(this).attr('class', 'SelectedrowData')
       .siblings().attr('class', 'alt');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:27:08.247

```
$('tbody tr').click(function(){
   // First, make all the tr's have the 'alt' class
   $('tbody tr').attr('class','alt');

   // Now make this tr the one with the unique class
   $(this).attr('class', 'SelectedrowData');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:33:19.903

如果是整张桌子，只需执行以下操作：

```
$('tr').on('click', function() {
    $(".SelectedrowData").add(this).toggleClass('alt SelectedrowData');
});​ 
```

[**小提琴**](http://jsfiddle.net/vtCqU/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:33:57.893

你可以试试这个

```
$('table').click(function(e){
    var $clickedRow;
    if(e.target.nodeName === 'TR') {
        $clickedRow = $(e.target);
    } else {
        if($(e.target).parents('tr').length > 0) {
            $clickedRow = $(e.target).parents('tr');
        } else {
            $clickedRow = undefined;
        }
    }

    if($clickedRow) {
        $('.SelectedrowData').removeClass('SelectedrowData');
        $clickedRow.removeClass('alt').addClass('SelectedrowData');
    } 
}); 
```

这将处理 tr 和 td 上的点击。

# java - java.lang.ClassFormatError：类文件 javax/mail/MessagingException 中非本机或抽象方法中的缺失代码属性

> ID：12142872
> 
> 赞同：26
> 
> 时间：2012-08-27T13:24:28.803
> 
> 标签：java, jakarta-ee, maven, java-ee-6

我对 javaee Bibliothek 有一个 Maven 依赖项。

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

我在某些类中得到了 Eclipse 中的错误。

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/MessagingException 
```

我添加了 javax.mail 依赖项。

```
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.5</version>
</dependency> 
```

它没有用。任何的想法？？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-27T13:40:38.510

它不起作用，因为`javax/javaee-api/provided`依赖项中的类是专门构造的。它们不是可用的运行时，因为缺少方法的实现。

简单地将`javax.mail/mail/1.4.5`依赖项中的类添加到类路径中没有帮助，因为来自的类`javax/javaee-api/provided`已经存在。仅靠`javax.mail/mail/1.4.5`依赖就可以解决您的问题，但很可能您还需要`javax/javaee-api/provided`.

您可以做的是摆脱`javax/javaee-api/provided`依赖关系并例如从目标应用程序服务器提供的依赖关系中获取这些类。您可以使用以下示例：

```
 <dependency>
        <groupId>org.jboss.spec</groupId>
        <artifactId>jboss-javaee-6.0</artifactId>
        <version>1.0.0.Final</version>
        <type>pom</type>
        <scope>provided</scope>
     </dependency> 
```

因为提供了范围，所以它不会影响要构建的工件。这就是为什么您可以将它与 JBoss 以外的其他应用程序服务器一起使用的原因。它与原始依赖项中的 API 相同，但包含*普通*类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-30T06:55:39.943

很奇怪，但以下顺序对我有用，

```
 <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency> 
```

反过来不行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T13:39:28.293

就我而言，只使用库：

```
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4</version>
</dependency> 
```

使用 JDK 6 和 Tomcat 运行没有问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-22T09:49:15.327

如果您按以下顺序将它们添加到您的 pom 中： javax.mail javaee-web-api 它会工作是非常合乎逻辑的，因为运行时首先从 javax.mail 找到必要的类（具有正确的实现），忽略任何类似的来自 javaee-web-api 的类（没有实现）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-02T16:30:31.643

就我而言，我使用以下顺序。与 JDK6 配合得很好。

```
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4</version>
    <scope>provided</scope>
    <exclusions>
        <exclusion>
            <groupId>javax.activation</groupId>
            <artifactId>activation</artifactId>
        </exclusion>
    </exclusions>
</dependency>

<dependency>
    <groupId>javaee</groupId>
    <artifactId>javaee-api</artifactId>
    <version>5</version>
    <scope>provided</scope>
</dependency> 
```

# python - 为什么在 python -c 中插入 unicode 字符会引发异常

> ID：12142874
> 
> 赞同：4
> 
> 时间：2012-08-27T13:24:47.187
> 
> 标签：python, linux, bash, shell, unicode

如果我在 python 控制台中输入这个

```
>>> ord(u'⚤') 
```

`python -c`它可以工作，但是当我尝试从 bash中放入它时

```
python -c "print ord(u'⚤')" 
```

它抛出：

```
 File "<string>", line 1
    print ord(u'⚤')
                     ^
SyntaxError: EOL while scanning string literal 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:51:18.387

# wordpress - 防止特定的 RSS 提要重定向到 feedburner，但让主要提要重定向

> ID：12142876
> 
> 赞同：0
> 
> 时间：2012-08-27T13:24:49.893
> 
> 标签：wordpress, rss, feedburner

在 wordpress 网站上：我试图阻止特定的“子”提要重定向到 feedburner，但我想允许主提要继续重定向。

我想阻止重定向的提要设置如下： [http ://website-example.org/feed?author=275](http://website-example.org/feed?author=275)

但保持[http://website-example.org/feed](http://website-example.org/feed)重定向到 feedburner。

目前我正在使用 PHP 来创建重定向。我的代码如下所示：

```
add_filter('feed_link','custom_feed_link', 1, 2);

function custom_feed_link($output, $feed) {
    $feed_url = 'http://feeds.feedburner.com/websitename/yaSQ';
    $feed_array = array('rss' => $feed_url, 'rss2' => $feed_url, 'atom' => $feed_url, 'rdf' => $feed_url, 'comments_rss2' => '');
    $feed_array[$feed] = $feed_url;
    $output = $feed_array[$feed];

return $output; 
```

}

我在这里找到了这个答案，但我不确定这是否是最好的方法。（另外，我并不完全理解它的代码。） [如何将主要的所有提要重定向到 feedburner，除了一些提要？](https://stackoverflow.com/questions/11697192/how-to-redirect-main-all-feed-to-feedburner-except-some-feeds)

有人可以告诉我我是否走在正确的轨道上，或者是否有一个简单的解决方案，或者上面链接中的 .htaccess 代码是什么意思。

谢谢你，伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:33:02.997

解决了。

我最终使用了一个自定义 RSS 模板和一个名为“feed wrangler”的旧插件。该解决方案效果很好。

这里有一些有用的链接： [http](http://wordpress.org/extend/plugins/feed-wrangler/) : //wordpress.org/extend/plugins/feed-wrangler/ http://kanevski.org/projects/feed-wrangler/

# java - 如何确定要使用的弹簧上下文？

> ID：12142880
> 
> 赞同：0
> 
> 时间：2012-08-27T13:25:05.363
> 
> 标签：java, spring, spring-mvc

使用 Spring/MVC，我经常很难确定应该定义哪个上下文 bean，`root-context.xml`或者`servlet-context.xml`. 造成混淆的原因是我没有看到关于该主题的任何文档关于将什么放在哪里，在 spring 示例代码中，我经常看到在示例之间的不同上下文中定义了相同的东西。

根据经验，我目前在根上下文中定义了任何服务或组件，并为 web 控制器、拦截器和任何只与 web 真正相关的东西保留了 servlet 上下文。

但是安全呢？我目前已将其定义为根上下文的包含，但这是正确的吗？

我对 Web 上下文实际上是应用程序根上下文的子上下文的理解是否正确？

为什么我们需要将 Web 上下文分开？

几年前我已经阅读了 3.0 的 spring 文档，但不记得任何具体的内容，我还阅读了 Spring in Action，第三版。我会喜欢围绕这个主题的任何材料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:32:26.833

默认情况下，它会检查您`<servlet-name>.context.xml`何时在 web.xml 中指定 DispatcherServlet。如果您指定 contextConfigLocation，则默认情况下检查`applicationContext.xml`您是否指定参数值，然后检查特定文件。

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/classes/applicationContext.xml</param-value>
</context-param> 
```

您必须首先指定侦听器才能指定文件，`<servlet-name>.context.xml`然后它会检查 applicationContext 如果您没有指定任何内容，如果您指定 contextConfigLocation 然后它会检查自定义配置元数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:41:12.850

> 为什么我们需要将 Web 上下文分开？

你没有。事实上，有几个官方的 Spring 示例只是将所有内容组合在一起。

*您可能*希望将它们分开有几个原因。也许最有效的是可维护性：源文件越小（配置文件就是源文件），就越容易理解。另一个原因是给定的后端可能被多个前端使用。

就个人而言，我喜欢通过分离前端和后端来组合应用程序上下文的想法，并简单地为我正在使用的后端导入上下文。这给您留下了一个“servlet”上下文文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T04:23:14.270

*可以*而且通常是有区别的。

基本上，您`applicationContext.xml`是您的根上下文，并且是您的服务和数据层 bean 所在的位置。

`*-servlet.xml`或`webmvc-config.xml`特别之处在于：

*   有`DispatcherServlet`关联
*   总是`WebApplicationContext`豆厂
*   是根上下文的子项（也可以是 a `WebApplicationContext`）

但人们这样做的最大原因是为了进行单元测试、将前端与后端解耦，以及单独的视图解析器和/或多个调度程序 servlet。

这对单元测试很有好处，因为您加载了更少的 bean 来测试您的服务层。正如我在下面的评论中所说，我通常会加载我的真实`applicationContext.xml`喜欢：

```
@ContextConfiguration(locations = "classpath:/META-INF/spring/applicationContext.xml") 
```

此外，因为 servlet 上下文需要一个调度程序 servlet，您需要将其注册为 servlet，如：

```
<servlet>
    <servlet-name>my-web</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/webmvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

因此，虽然您可能能够使用根上下文加载我们的 MVC 控制器 bean，但它们并没有真正注册，除非调度程序 servlet 正在控制该上下文。虽然理论上我认为`DispatcherServlet`可以在类路径中加载配置注意到 contextConfigLocation 值不在类路径中。

此外，有些人需要多个调度程序 servlet，因为您通常只能拥有一个解析器链（视图、区域设置、主题等）。

# android - kindle自动锁定后应用程序从头开始

> ID：12142881
> 
> 赞同：-1
> 
> 时间：2012-08-27T13:25:06.697
> 
> 标签：android, kindle-fire

我有一个必须在 kindle fire 中运行的应用程序。

应用程序运行良好，但在kindle自动锁定后，应用程序从头开始，而不是从应用程序在自动锁定之前的位置启动。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:33:12.317

尝试 ：

```
android:configChanges=["mcc", "mnc", "locale",
                             "touchscreen", "keyboard", "keyboardHidden",
                             "navigation", "screenLayout", "fontScale", "uiMode",
                             "orientation", "screenSize", "smallestScreenSize"] 
```

在清单中并为活动中的 onConfigChange 创建一个覆盖函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:37:16.230

确保您正在保存应用程序的状态。

Android 中的活动有一个非常特殊的生命周期。每当将应用程序置于后台时，它就会调用`onPause()`，当您将其重新显示时，它`onResume()`会被调用。

因此，您需要在调用`onPause()`或时保存状态并将状态`onStop()`加载到`onCreate()``onResume()`

有关状态的更多信息，请阅读[此处](http://developer.android.com/reference/android/app/Activity.html)

编辑：也看看[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T06:05:37.833

终于得到了一个代码，它在 kindle/galaxy tab 自动锁定后保存了片段的最后状态。@Override public void onActivityCreated(Bundle savedInstanceState) { super.onActivityCreated(savedInstanceState); 设置保留实例（真）；}

# algorithm - 所有可以用递归解决的问题都可以用循环解决吗？

> ID：12142890
> 
> 赞同：8
> 
> 时间：2012-08-27T13:25:27.437
> 
> 标签：algorithm, loops, language-agnostic, recursion

所有可以用递归解决的问题都可以用循环解决，反之亦然。

这种说法是正确的还是完全得到证实的？有时，使用递归会导致堆栈溢出。如果陈述是正确的。我们最好使用循环。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T13:27:40.587

是的。Loop + Stack 将解决所有递归问题。

毕竟，编译器在内部执行此操作。递归只不过是将数据推入堆栈，然后由编译器从堆栈中弹出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:28:04.833

通常，相应的迭代（循环）解决方案将需要同样多的存储空间，但需要明确管理它。

# django - Django - 在几个模板中“包含”一个块？模板标签？还有什么？

> ID：12142891
> 
> 赞同：13
> 
> 时间：2012-08-27T13:25:27.607
> 
> 标签：django, block, django-templates

我有一个小的统计数据块，我希望在几个地方都可以使用：用户的个人资料页面，以及带有用户列表的搜索页面。

继续重复此块的最佳方法是什么？我来自 PHP 背景，在 PHP 中，它会是一个简单的包含，并传递一些简单的参数。在 django 中，我基本上希望能够调用类似：

```
 {% stats_block user %} 
```

其中 user 是包含所有用户信息的对象。我在考虑一个简单的模板标签，但是块很大，我不想把所有东西放在模板标签的一行中。

非常感谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-27T13:32:16.033

## 包含模板标签

您可以[包含带有参数的模板](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)：

```
{% include "name_snippet.html" with person="Jane" greeting="Hello" %} 
```

## 模板继承

但是在所有模板中重复一个块的最好方法是有一个基本模板，比如 base.html：

```
<html>
...
    <div id="user-block">
        {% if request.user.is_authenticated %}
            hello {{ request.user }}
        {% else %}
            <a href="{% url acct_signup %}">Sign up!</a>
        {% endif %}
    </div>
 ...
    <div id="body">
        {% block body %}
        {% endblock %}
    </div>
 ...
 </html> 
```

例如，联系人模板可能很简单：

```
{% extends 'base.html' %}

{% block body %}
    Contact use: foo@example.com
{% endblock %} 
```

有关更多信息，请参阅[有关模板继承](https://docs.djangoproject.com/en/dev/topics/templates/)的文档。

## 包含标签

最后，另一个不错的选择是创建一个[contains_tag](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)，它允许在实际模板包含之前挂钩一些 python 上下文处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:32:41.260

您可以编写自定义模板标签，该标签可以呈现特定模板。请参阅[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)。

来自链接：*另一种常见的模板标签类型是通过渲染另一个模板来显示一些数据的类型。*

# c++ - 基类的虚拟朋友功能？

> ID：12142893
> 
> 赞同：14
> 
> 时间：2012-08-27T13:25:30.977
> 
> 标签：c++, class, function, virtual, friend

我正在学习语言，这是一个菜鸟怀疑。

可以使用虚拟好友功能吗？我不知道这是否可能，我什至没有测试它，但它在某些情况下可能很有用。例如，对于重载的运算符<<()。

```
DerivedClass dc;
BaseClass &rbc = dc;
cout << rbc; 
```

我的猜测是有可能，但我不确定，因为在类设计中没有实现友元函数，理论上不是它的一部分（尽管在这个例子中，从概念上讲， operator<<() 应该是方法，但由于语法限制，不可能将其作为一个实现）。

编辑：我的担忧与这个例子有关：

```
BaseClass bc;
DerivedClass dc;
BaseClass *pArr[2];
pArr[1] = bc;
pArr[2] = dc;
for (int i = 0; i < 2; i++)
    cout << pArr[i]; 
```

在这个混合对象数组中，我希望为每个对象调用正确的 operator<<()。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-27T13:28:25.713

不，`friend` `virtual`函数根本没有意义。

`friend`函数就是这样，它们不是方法（又名成员函数）并且有权访问`private`/`protected`的成员`class`。

`virtual`函数只能是成员函数。你不能有`virtual`非会员功能。

* * *

您`operator<<`可以引用基类，然后调用一些`virtual`成员函数。这样，您可以使`operator<<`“几乎虚拟”:)

* * *

例如

```
class A
{
public:
    virtual void f() const { std::cout << "base"; }
};
class B: public A
{
public:
    virtual void f() const { std::cout << "derived"; }
};

std::ostream& operator<<(std::ostream& os, const A& a )
{
     a.f();
     return os;
}

int main()
{
    B b;
    std::cout << b << std::endl;

    return 0;
} 
```

将打印`derived`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-27T13:30:35.157

[虚拟朋友功能成语](http://en.wikibooks.org/wiki/More_C++_Idioms/Virtual_Friend_Function)

> C++ 中的友元函数不能被声明为虚拟的，因此友元函数的动态绑定是不可能的。如果层次结构中的每个类都需要一个重载的友元函数，那么将友元函数应用于整个类层次结构会变得很尴尬。由于缺乏对动态绑定的支持，因此很难证明它实际上是类接口的扩展。虚拟朋友功能成语优雅地解决了这个问题。

您需要使用虚拟朋友功能习语。它的要点是在 Base 中保留一个虚函数，并让友元函数调用该函数。它将多态地调用派生类的函数

直接从链接复制示例

```
class Base {
  public:
    friend ostream& operator << (ostream& o, const Base& b);
  protected:
    virtual void print(ostream& o) const{ ... }
};
/* make sure to put this function into the header file */
inline std::ostream& operator<< (std::ostream& o, const Base& b){
  b.print(o); // delegate the work to a polymorphic member function.
  return o;
}

class Derived : public Base {
  protected:
    virtual void print(ostream& o) const{ ... }
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-27T13:34:00.947

你可以在没有友元函数的情况下解决这个问题，只使用公共虚拟方法：

```
struct BaseClass {
  virtual void print(std::ostream& os) const;
};

struct DerivedClass {
  virtual void print(std::ostream& os) const;
};

std::ostream& operator<<(std::ostream& os, const BaseClass& obj) {
  obj.print(os);
  return os;
} 
```

`print`如果公开的方法没有意义，那么`ostream& operator<<`可以声明为`friend`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T13:32:18.020

你不能既是朋友又是同一个类的虚函数。但是，友元运算符*可以*从它正在打印的对象中调用虚函数。

```
ostream& operator<<(ostream& stream, const BaseClass& rbc)
{
    rbc.print_on(stream);
    return stream;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T13:29:03.090

虚函数不是友元函数。虚函数仅用于在程序中使用继承，一个类作为基类，另一个作为派生类。虚函数用于对象的动态绑定。这意味着您可以将派生类的对象存储在基类的指针中，并且仍然可以调用该特定派生类的方法。这个概念被称为[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

友元函数用于访问类的私有接口。即使您的类中没有使用继承，也可以使用它们。

# asp.net - 如何获取命名空间？

> ID：12142894
> 
> 赞同：0
> 
> 时间：2012-08-27T13:25:31.053
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, telerik, telerik-grid

我正在使用 Telerik Grid 的 .cshtml 页面中未检测到命名空间。在 Model 中，我创建了一个名为 Student 的类。

```
namespace testRazorView.Models
{
    public class Student
    {
      ..
      ..
     }
} 
```

在 .cshtml 页面中，我需要获取学生类..所以我使用如下。

```
@(Html.Telerik().Grid<namespace> 
```

未检测到命名空间，即应在命名空间中替换 testRazorView.Models.Student，但未检测到。为此提供解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:29:58.930

我认为您也可以定义@model。这是 Scot Guthrie 先生本人的文章 - [http://weblogs.asp.net/scottgu/archive/2010/10/19/asp-net-mvc-3-new-model-directive-support-in-razor .aspx](http://weblogs.asp.net/scottgu/archive/2010/10/19/asp-net-mvc-3-new-model-directive-support-in-razor.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:13:57.367

问题已解决。我需要关闭大括号，然后，如果我键入，则会检测到命名空间。那是，

```
@(Html.Telerik().Grid<namespace>) 
```

现在我们必须在关闭大括号后输入命名空间。谢谢。

# mysql - 从 MySQL 中的 3 列中进行复杂选择

> ID：12142897
> 
> 赞同：1
> 
> 时间：2012-08-27T13:25:37.000
> 
> 标签：mysql, select, inner-join

我在 MySQL 数据库中有 3 个表。

表 1（说它被称为`client`）有一个客户的信息：`client_id and client_name` 表 2（说它被称为`user_to_client`）有与我系统的用户的每个客户相关的信息：`user_id, client_id and order_flag`。

在这个表中clients和users是重复的，order flag表示用户和client有未完成的业务。user_id 和 client_id 的组合在该表中只能找到一次，这意味着用户 5 和客户端 3 只注册了一次。

表 3（称为`orders`）保存有关订单基本信息的信息：`client_id, user_id, order_id`。它保留了两个不同的日期类型列：date_started 保留了他们开始构建订单的日期信息，而 date_sent 保留了订单发送到操作区域的日期。

我在两个表中重复信息的原因是因为在表 3 中，用户和客户可能有大量不再可用的未完成订单，但我需要保留公司记录。

所以，我需要做的是选择最后 4 个未完成订单的客户而不重复客户，以及最后一个未完成订单的 ID。基本上我需要从表 1 中选择客户端名称，如果该客户端在表 2 中激活了 order_flag（值 1），并且从表 3 中选择了属于该用户的最新 order_id。

我无法修改这些表，因为它们已经被用于另一项工作，那么，有人可以帮助我使用 MySQL 查询来完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:42:13.067

以下查询不会查询回答您的问题，因为客户可以重复。但是，它为确定要做什么提供了良好的基础：

```
select c.*, o.*
from client c join
     user_to_client uc
     on c.client_id = uc.client_id join
     orders o
     on o.client_id = uc.client_id and
        o.user_id = uc.user_id
where uc.order_flag = 1 and
      o.date_sent is null  -- does this make an order "unfinished"?
order by date_started desc
limit 4 
```

我不确定您如何找到“未完成”的订单。所以，我猜它是基于 date_sent 为 NULL。

你真正需要的是有点复杂。您需要每个客户最近的“未完成”订单。以下查询使用相关子查询来获取此信息：

```
select client_id, maxdate,
       (select max(order_id)
        from orders o
        where o.client_id = c.client_id and o.date_sent is null and o.date_started = c.maxdate) as orderid
from (select c.client_id, MAX(date_started) as maxdate
      from client c join
           user_to_client uc
           on c.client_id = uc.client_id join
           orders o
           on o.client_id = uc.client_id and
              o.user_id = uc.user_id
      where uc.order_flag = 1 and
            o.date_sent is null
      group by c.client_id
      order by 2 desc
      limit 4
     ) c 
```

这假设它可以根据客户 ID 和日期找到正确的订单。如果这不是真的，那么相关子查询必须引入其他表才能获得正确的过滤信息。

# security - 仅在 Firefox 中查看时出现错误“sec_error_revoked_certificate”

> ID：12142907
> 
> 赞同：15
> 
> 时间：2012-08-27T13:26:06.073
> 
> 标签：security, firefox, browser, ssl

我有一个 SSL 证书，当在 Chrome、Safari 或 Android 浏览器中查看时，它不会禁止加载客户端的站点。不幸的是，在 Firefox 中查看时，我遇到以下错误消息：

```
An error occurred during a connection to www.rzim.org.

Peer's Certificate has been revoked.

(Error code: sec_error_revoked_certificate) 
```

我在网上唯一的“线索”是关于中间证书的。任何想法都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-24T12:57:11.450

当 Firefox Web 浏览器检查安全证书时，它还会向颁发机构检查证书是否有效。似乎在证书到期日期附近，颁发机构可能会发布新证书。这两个证书有冲突的到期日期。

由于未知原因，这导致 Firefox 报告 sec_error_revoked_certificate 错误并拒绝允许您连接到该站点！

您可以执行以下步骤，但这会降低安全性。

1.  Firefox 主菜单 -> 编辑 -> 首选项
2.  单击高级选项卡
3.  选择证书
4.  点击验证
5.  取消选中选项“使用在线证书状态协议（OCSP）............”
6.  单击确定按钮

现在您可以看到没有错误的页面。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-12-12T02:06:02.107

[Arjun KP](https://stackoverflow.com/users/1862769/arjun-kp)在答案中提供的说明不适用于更新版本的 Firefox（在 v. 57.0.1 上测试）。相反，这就是我所做的：

1.  `about:config`在地址栏中输入，如果出现提示则接受风险。
2.  `security.OCSP.enabled`在搜索栏中输入。
3.  将该设置的值从 更改`1`为`0`。
4.  重新加载失败的页面。

完成此操作后，我的网站开始工作。

然而，正如 Arjun 所提到的，这将降低 Firefox 的安全性，因为它禁用了[在线证书状态协议](https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol)。`1`理想情况下，您应该在完成该站点后将设置重置为 ，并且在设置为时不要加载其他页面`0`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-07T15:07:22.037

ARJUN KP 的[答案](https://stackoverflow.com/a/24934346/9347679)更新，适用于 Firefox Quantum，v68：

*   打开 Firefox 选项
*   隐私与安全
*   在底部的证书下，取消选中：“查询 OCSP 响应服务器以确认证书的当前有效性

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-25T05:47:18.247

如果您遇到此问题，您可以检查原因是否是负面的 OSCP 服务器响应。在我的情况下，该网站有一个新的有效证书，但 OSCP 服务器没有更新，Firefox 拒绝显示该页面。OSCP 服务器仍然说证书已被吊销。

在这里您可以检查任何 URL： [https ://certificatetools.com/ocsp-checker](https://certificatetools.com/ocsp-checker)

[![OSCP 检查任何 URL](../Images/213b922f7cdc52b1f3825d302fe54023.png)](https://i.stack.imgur.com/Dkrgi.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-06T17:05:54.327

虽然我去过很多论坛并且经常提到它，但我还没有找到难以捉摸的“高级”按钮。此处的解决方案不起作用，因为“首选项”>“安全”>“证书”下不存在“使用在线证书协议”。QUERY OCSP 响应者存在，我没有选中它。

# hyperion - essbase中的页面文件和索引文件有什么区别？

> ID：12142912
> 
> 赞同：1
> 
> 时间：2012-08-27T13:26:27.123
> 
> 标签：hyperion, pagefile, essbase

.pag 文件和 .ind 文件有什么区别？

我知道页面文件包含实际数据意味着数据块和单元格和索引文件保存数据块的指针，即在页面文件中可用。

但还有其他区别吗？关于尺寸？

根据我的意见，页面文件的大小总是大于索引文件。是写吗？如果索引文件的大​​小大于页面文件，那么发生了什么？如果索引文件的大​​小大于页面文件，则写入？

如果我删除了页面文件，那么它对索引文件有影响吗？或者如果我从页面文件中删除了一些数据块，那么对索引文件有什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:30:10.980

您对包含多维数据集的实际数据的页面文件是正确的（尽管没有没有索引的数据，因此实际上它们都是*数据*）。

页面文件通常比索引大。它只是基于维度的数量以及它们是稀疏还是密集、维度中存储成员的数量、数据块的密度、数据块中使用的压缩方案以及数据库中的索引条目数.

不是要求一个比另一个大，它只取决于您如何使用立方体。我建议您不要真正担心它，除非您遇到特定的性能问题。此时，如果出于优化检索、计算或数据加载时间的目的，是否应该更改多维数据集的配置，则很有用。

如果您删除页面文件，它不一定会影响索引文件，但您会丢失多维数据集中的所有数据。如果您刚刚删除了所有索引文件，您也会丢失数据。正如我所提到的，虽然页面文件中包含数据，但实际上是页面文件和索引文件的组合构成了多维数据集中的数据。

在适当的情况下，您可以从数据库中删除数据（例如执行 CLEARDATA 操作），并且可以减小页面文件和/或索引的大小。例如，删除数据以清除某些稀疏成员的组合可能会稍微减小索引的大小以及与这些索引条目关联的任何数据块（即，那些稀疏维度的特定组合）。可能需要重组和压缩多维数据集以减小文件的大小。事实上，在某些情况下，您可以删除数据并且存储文件的大小可能会增加。

# javascript - 如何实时检查班级删除

> ID：12142916
> 
> 赞同：0
> 
> 时间：2012-08-27T13:26:37.943
> 
> 标签：javascript, jquery, dom

我有一个从特定块元素中删除 CSS 类的函数。在我添加另一个类之前，我将如何实时检查该块是否不再有任何 CSS 类？

这是我的代码：

```
$('#back_button_recipes').on('DOMSubtreeModified',function(){
    if ($(this).attr('class').length <= 0){
        $(this).addClass('main_menu')
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:38:37.937

对 $(this).attr('class') 的调用不返回数组，因此检查长度将不起作用。如果没有任何类，attr 返回 undefined，所以只需检查是否有错误：

```
var classes = $(this).attr('class');
if (!classes) {
  ...
} 
```

来自[jQuery 在线 attr 文档](http://api.jquery.com/attr/)

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:43:59.987

我会在 JavaScript 中做这个检查：

```
$('#back_button_recipes').on('DOMSubtreeModified',function(){
    if (!this.className.length > 0){
        this.className += 'main_menu';
    }
});​ 
```

**JSFiddle**
[http://jsfiddle.net/2pW3v/2/](http://jsfiddle.net/2pW3v/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:56:32.077

```
$('#back_button_recipes').on('DOMSubtreeModified',function(){
    if ($('.className').length > 0){
        $(this).addClass("main_menu");
    }
});​ 
```

# cvs - 无法从审查板中的 cvs commitinfo 触发器进行后审查

> ID：12142917
> 
> 赞同：1
> 
> 时间：2012-08-27T13:26:39.357
> 
> 标签：cvs, review-board

我正在尝试对每个 cvs 提交使用 post review。在 cvs commitinfo 文件中应用触发器如下 $>cat commitinfo /usr/bin/post-review --server=http://172.16.7.100:81 --username=admin --password=admin --submit-as= vineet --repository-url=svn:/opt/cvsroot [user@svn test]$ cat .reviewboardrc REPOSITORY = 'svn:/opt/cvsroot' REVIEWBOARD_URL = 'http://172.16.37.170:81'

```
Repository Information in reviewboard dashboard

Path=svn:/opt/cvsroot
Mirror Path=svn:/opt/cvsroot

What error i get  is -

[user@svn test]$ cvs -d :pserver:kapilap@svn:/opt/cvsroot ci -m "BugID:47300 update" document.txt
Post-review for /opt/cvsroot/test
No supported repository could be accessed at the supplied url.

If i remove "--repository-url=svn:/opt/cvsroot" from commitinfo file i
get this error-

[kapila.narang@svn test]$ cvs -d :pserver:kapilap@svn:/opt/cvsroot ci -m "BugID:47300 update" document.txt
Post-review for /opt/cvsroot/test
The current directory does not contain a checkout from a
supported source code repository.

to Add more details-

[kapila.narang@svn test]$ cvs -d :pserver:kapilap@svn:/opt/cvsroot ci -m "BugID:47300 update" document.txt
Post-review for /opt/cvsroot/test
RBTools 0.4.1
Home = /home/kapilacvs

No supported repository could be accessed at the supplied url. 
Need urgent help pls expert help meeeeeeeeeee :( 
```

# tcp - inode 列 (proc/net/tcp(6)) 中的值是什么意思？

> ID：12142925
> 
> 赞同：4
> 
> 时间：2012-08-27T13:27:23.787
> 
> 标签：tcp, inode, uid, proc

这是一段 /proc/net/tcp 文件：

> sl local_address rem_address st tx_queue rx_queue tr tm->when retrnsmt uid timeout inode
> 
> 6：1904A8C0：AC35 9603020A：1ED0 01 00000000：00000000 00 00：0000000000000000000000000055550555 0 8506 2 C1624900 129 0 10 10 -1
> 7：1904A8C0：E8C4 13A11C1F：E8C4 13A11C1F：0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000099性使00000000.00.州000000000000000000000000000000000000000000000000000000000000000来

谁能解释一下 inode 列中的值是什么意思？我对两种情况感兴趣。

> 8506 2 c1624900 129 0 0 10 -1
> 
> 0 3 d6267780

我只知道第一个值是 inode 号（唯一文件号）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-23T07:07:40.907

linux-2.6.35.6/net/ipv4/tcp_ipv4.c

```
2358     seq_printf(f, "%4d: %08X:%04X %08X:%04X %02X %08X:%08X %02X:%08lX "
2359             "%08X %5d %8d %lu %d %p %lu %lu %u %u %d%n",
2360         i, src, srcp, dest, destp, sk->sk_state,
2361         tp->write_seq - tp->snd_una,
2362         rx_queue,
2363         timer_active,
2364         jiffies_to_clock_t(timer_expires - jiffies),
2365         icsk->icsk_retransmits,
2366         sock_i_uid(sk),
2367         icsk->icsk_probes_out,
2368         sock_i_ino(sk),
2369         atomic_read(&sk->sk_refcnt), sk, 
2370         jiffies_to_clock_t(icsk->icsk_rto),
2371         jiffies_to_clock_t(icsk->icsk_ack.ato),
2372         (icsk->icsk_ack.quick << 1) | icsk->icsk_ack.pingpong,
2373         tp->snd_cwnd,
2374         tcp_in_initial_slowstart(tp) ? -1 : tp->snd_ssthresh,
2375         len); 
```

# java - 使用 java 小程序查看 .doc 文件

> ID：12142928
> 
> 赞同：5
> 
> 时间：2012-08-27T13:27:28.837
> 
> 标签：java, ms-word, applet

我有一个网络应用程序。我在服务器端生成了 xml 格式的 MS Word 文档（Word 2003 XML 文档）。我需要使用某种查看器向客户端的用户显示此文档。所以，问题是：我可以使用哪些库来解决这个问题？*我需要一个 API 来使用 java*在客户端查看 word 文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T20:53:57.850

您无法使用 Java（或任何其他简单技术）在网页中可靠地显示 Word 文档。有几个商业库可以渲染 Word，但您不会发现这些是简单、便宜或可靠的解决方案。

你应该做的是：

(1) 使用 .NET 程序在服务器上打开 Word 引擎 (2) 使用 Word 引擎将文档转换为富文本 (3) 使用 RTF Swing 小部件显示富文本，或转换为 HTML：

```
String rtf = [your document rich text];
BufferedReader input = new BufferedReader(new StringReader(rtf));

RTFEditorKit rtfKit = new RTFEditorKit();
StyledDocument doc = (StyledDocument) rtfKit.createDefaultDocument();
rtfEdtrKt.read( input, doc, 0 );
input.close();

HTMLEditorKit htmlKit = new HTMLEditorKit();       
StringWriter output = new StringWriter();
htmlKit.write( output, doc, 0, doc.getLength());

String html = output.toString(); 
```

这种方法的主要风险是 Word 引擎将崩溃或发生内存泄漏。出于这个原因，您必须有一种机制来定期重新启动它并对其进行测试以确保它可以正常工作并且不会占用内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:54:55.530

docx4all 是一个基于 Swing 的小程序，它执行我们几年前编写的 Word 2007 XML（即不是 Word 2003 XML）。

[从svn](http://www.docx4java.org/svn/docx4all/trunk/docx4all/)获取它。

这是一种可能的编辑方法。如果您想要的只是一个查看器，它不会转换为 HTML 或 PDF？您可以为此使用 docx4j。（披露：“我的”项目）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:03:44.160

您可能会查看[Apache POI - Java API to Handle Microsoft Word Files](http://poi.apache.org/hwpf/index.html)，它能够读取各种 Word 文档（OLE2 和 OOXML 格式，分别为 .doc 和 .docx 扩展名）。

读取 doc 文件可以很简单：

```
import java.io.*;
import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.extractor.WordExtractor;

public class ReadDocFile {
public static void main(String[] args) {
File file = null;
WordExtractor extractor = null ;
try {

file = new File("c:\\New.doc");
FileInputStream fis=new FileInputStream(file.getAbsolutePath());
HWPFDocument document=new HWPFDocument(fis);
extractor = new WordExtractor(document);
String [] fileData = extractor.getParagraphText();
for(int i=0;i<fileData.length;i++){
if(fileData[i] != null)
System.out.println(fileData[i]);
}
}
catch(Exception exep){}
}
} 
```

您可以在以下位置找到更多信息：[HWPF 快速指南](http://poi.apache.org/hwpf/quick-guide.html)（特别是[HWPF 单元测试](http://svn.apache.org/viewvc/poi/trunk/src/scratchpad/testcases/org/apache/poi/hwpf/)）

请注意，根据 POI 网站：

> HWPF 仍处于早期开发阶段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T07:54:16.663

我建议查看 openoffice 源代码并实现它。它应该是用java编写的。

# c# - 在 C# 中打开损坏的 Word 文档

> ID：12142935
> 
> 赞同：1
> 
> 时间：2012-08-27T13:28:12.690
> 
> 标签：c#, ms-word

我正在开发一个将word文档转换为pdf的应用程序。它工作正常，但万一 word 文档损坏并显示“文件正在使用中”并给出 3 个选择。在那个领域，应用程序失败了。

这就是我打开Word文档的方式。

```
wordDocument = wordApplication.Documents.Open(
                              ref paramSourceDocPath, ref paramMissing, ref paramMissing,
                              ref paramMissing, ref paramMissing, ref paramMissing,
                              ref paramMissing, ref paramMissing, ref paramMissing,
                              ref paramMissing, ref paramMissing, ref objWordVisible,
                              ref objOpenAndRepair, ref paramMissing, ref paramMissing,
                              ref paramMissing); 
```

这就是我导出为 PDF 的方式：

```
wordDocument.ExportAsFixedFormat(paramExportFilePath, paramExportFormat, paramOpenAfterExport, paramExportOptimizeFor, paramExportRange, paramStartPage, paramEndPage, paramExportItem, paramIncludeDocProps, paramKeepIRM, paramCreateBookmarks, paramDocStructureTags, paramBitmapMissingFonts, paramUseISO19005_1,ref paramMissing); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:54:52.110

如果该文档正在被其他应用程序使用，请制作该文件的[副本](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)，然后打开该副本。然后您应该能够以独占方式打开它并执行您的操作。

# c# - 我可以从我的 webconfig 文件访问程序集 GUID

> ID：12142938
> 
> 赞同：0
> 
> 时间：2012-08-27T13:28:20.197
> 
> 标签：c#, .net, vb.net

我的程序集信息中有一个 GUID，它是在创建项目时自动创建的。当前系统需要数据库上匹配的 GUID，以便识别解决方案。

（是的，它是 VB.net）

```
 <Assembly: Guid("43aca7cb-9360-4642-adc5-6d29b4732bed")> 
```

我正在做的是手动将此 GUID 复制到 webconfig 作为解决方案的设置，这会将其添加到 Settings.Designer.vb 文件中。

翼

```
 <setting name="ApplicationId" serializeAs="String">
    <value>43aca7cb-9360-4642-adc5-6d29b4732bed</value>
  </setting> 
```

从那里它被传递到数据库或任何地方。这样做并不麻烦，而且 GUID 不应该改变，但我不禁认为如果我不必在每个解决方案中复制 GUID 字符串会更整洁，但有一些引用直接装配值。

这可能吗？

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:51:30.330

就像是：

```
 var assemblyName = "System"; // assembly to get the guid

 var assembly = AppDomain.CurrentDomain
        .GetAssemblies()
        .FirstOrDefault(a => a.GetName().Name == assemblyName);

 var attr = assembly
        .GetCustomAttributes(false)
        .OfType<GuidAttribute>()
        .FirstOrDefault();

 var guid = attr.Value; 
```

但是 IMO 似乎最好将 guid 保留在 web.config 中，因为它在那里是“硬编码”的。

# asp.net - 在开发人员之间共享加密的 web.config

> ID：12142940
> 
> 赞同：2
> 
> 时间：2012-08-27T13:28:22.963
> 
> 标签：asp.net, .net, encryption

在这项工作中，我们正在开发一个 ASP.NET MVC 应用程序以进行概念验证。应用程序执行的某些操作需要传输凭据，因此我们将这些凭据存储在 web.config 的加密部分中。我们遇到的困难是，当一个开发人员加密数据并提交它时，下一个更新他的本地副本并尝试使用该 web.config 的开发人员会遇到异常，因为他们的机器无法解密配置以供使用。

我们应该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:59:58.307

过去，我将 machine.config 用于敏感凭据，即连接字符串等。它位于 C:\Windows\Microsoft.Net\Framework\V4.0.30319\Config

这将允许您完全省略提交中的凭据。只需确保每个开发人员和/或服务器都有自己的 machine.config 和所需的凭据设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:07:53.680

我假设您正在使用[aspnet_regiis.exe](http://msdn.microsoft.com/en-us/library/dtkwfdky%28v=vs.100%29.aspx)来加密该部分。如果是这种情况，您遇到问题的原因是机器上用于加密/解密的密钥不同。

您可以在所有机器上使用相同的密钥，从配置角度来看，这类似于场设置，因此您可以使用此[SO question](https://stackoverflow.com/questions/7998666/asp-net-encryption-aspnet-regiis-farm)中的信息。

或者，由于存在一个固有的假设，即开发人员可以访问凭据，因此在将应用程序部署到生产服务器然后加密该部分之前将其解密。当用户名/密码在 web.config 中指定为数据库连接的连接字符串的一部分时，这是一种常见的解决方案，连接将被更新以反映生产数据库服务器作为部署过程的一部分，就在加密之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-16T13:27:31.350

首先，当在 DevOps 最佳实践中有其他更好的方法来处理密钥机密时，不确定为什么选择此选项。这似乎是经典的方式。同样在调试期间，任何开发人员都可以查看实际值或在日志中吐出？

无论如何，如果你把整个交付生命周期作为这个问题的上下文，我可能会在这里做些什么来实现你试图保护密钥的秘密：

1.  不要存储任何团队不需要在本地运行的加密密钥，除了开发或本地环境。
2.  在 web.config 中有本地或远程密钥秘密
3.  在发布转换中，清理所有不小心使用到环境的密钥秘密
4.  在任何部署工具上使用非常常见的发布时间变量替换来选择，例如 Azure/TFS DevOps 部署以多种不同的方式支持它 - 部署定义级别、阶段级别、库变量甚至更好的密钥值存储与软件+硬件加密选项

希望这至少对您的设计方法有所帮助。

# android - 安卓。如何让 TimeZone 看起来像 GMT-0X:00？

> ID：12142945
> 
> 赞同：1
> 
> 时间：2012-08-27T13:28:29.687
> 
> 标签：android, timezone, gmt

如何输出“GMT -0X:00”（X - 一个数字）”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:37:10.433

```
Calendar cal = Calendar.getInstance(locale);
// or Calendar cal = Calendar.getInstance(timezone);
int zoneOffset = cal.get(Calendar.ZONE_OFFSET);

// eg: "-0700"
String timezoneStr = new SimpleDateFormat("Z").format( cal.getTime() ); 
```

# asp.net - 在 asp.net 中从 Gridview 生成 PDF

> ID：12142947
> 
> 赞同：0
> 
> 时间：2012-08-27T13:28:38.917
> 
> 标签：asp.net, pdf, gridview

我在我的页面上使用了 4 个网格视图。我需要生成一个 pdf 文件，该文件应该可以通过单击按钮访问，并且应该包含这 4 个网格。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:38:49.947

我们在 PDF 中使用了[WKHTMLTOPDF](http://code.google.com/p/wkhtmltopdf/)，效果非常好。您可以将它与 URL 一起使用，然后它将转换为 pdf，然后可以发送到用户浏览器。所以你可以用gridview给它你页面的url，然后它会返回一个pdf。有第三方提供商可以为您进行转换，例如[PDFCrowd](http://pdfcrowd.com/)，但是这是有代价的。如果我没记错的话，他们提供了一个 C# 包装器供您使用，所以它非常简单。还有[iText PDF](http://itextpdf.com/)，虽然我从未使用过它，所以无法评论它。

希望这能给你一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:15:03.403

您可以尝试使用[Amyuni WebkitPDF](http://www.amyuni.com/en/webkitpdf/)。它是用于 HTML 到 PDF 或 XAML/XPS 转换的免费工具。您可以将页面的 URL 传递给库，并获取一个 PDF 文件作为结果，您可以将其发送到浏览器。

*通常的免责声明适用。*

# macos - 如何使指向本地 index.html 文件的链接在 Mac 上正常工作？

> ID：12142963
> 
> 赞同：2
> 
> 时间：2012-08-27T13:29:22.887
> 
> 标签：macos, web, web-testing

我正在我的 Mac 上开发一个带有纯静态 html 页面的简单网站。在推送到服务器之前，我当然想在浏览器中查看本地的 html 文件。但是，烦人地单击目录的相关链接，例如`foo/`，不会`foo/index.html`在浏览器中打开相应的目录。相反，Mac 的 Finder 应用程序会启动到该`foo/`目录。这发生在 Safari、Chrome 和 Firefox 中，所以我猜这是 Mac 的问题。有没有可以控制这个的设置？

# jquery - jQuery - 如何按样式匹配最接近（）元素？

> ID：12142965
> 
> 赞同：1
> 
> 时间：2012-08-27T13:29:31.740
> 
> 标签：jquery, jquery-selectors

我成功地使用`closest()`（[http://api.jquery.com/closest/](http://api.jquery.com/closest/)）通过标签名称找到最接近的匹配元素。它基本上通过 DOM 树向上并返回元素（如果找到）或 false：

```
if(jQuery(".current_element").closest("p").length){ do something... }
//if above is TRUE then .current_element is nested within at least 1 "p" 
```

现在，我只在***应用了任何标签***（或者更确切地说是最接近元素的标签 - 生效的标签）时才尝试返回 TRUE `style="text-align:center;"`。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:36:06.153

它应该工作：

```
if(jQuery(".current_element").closest("p").length && jQuery(".current_element").closest("p").css("text-align") == "center" ){
  do something...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:37:44.707

如果您确定 'text-align: center" 确实是内联样式，则可以在调用最接近（）时将其直接添加到选择器中，例如：

```
jQuery(".current_element").closest("p[style*='text-align:center']") ... 
```

这将在 style 属性中的任何位置找到包含“text-align:center”的祖先 p 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:36:54.677

最好的做法是让`text-align: center;`班级申请，然后您可以轻松选择它。

否则，您可以进行基本的字符串搜索，但要使其正常工作，它必须是确切的字符串：

```
if ($('.current').closest('p').attr('style')=='text-align:center;')){ ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:37:00.913

```
jQuery('.curr').closest("[style*='text-align:center']").length ... 
```

# c# - 检测到 Protobuf-net 可能的递归：序列化孩子和父母

> ID：12142969
> 
> 赞同：4
> 
> 时间：2012-08-27T13:29:52.433
> 
> 标签：c#, protocol-buffers, protobuf-net

一般来说，我是序列化的新手，甚至对 protobuf 也比较陌生。这是我的问题，我有这些课程：

```
[ProtoContract]
class Controle
{
    [ProtoMember(1, AsReference=true)]
    public HashSet<Controle> ControlesInternes { get; set; }
    [ProtoMember(2)]
    public string TypeControle { get; set; }
    [ProtoMember(3)]
    public Dictionary<string, string> Attributs { get; set; }
    [ProtoMember(4)]
    public int Ligne { get; set; }
    [ProtoMember(5)]
    public string InnerText { get; set; }
    [ProtoMember(6)]
    public Controle Parent { get; set; }

    public Controle()
    {
        ControlesInternes = new HashSet<Controle>();
        Attributs = new Dictionary<string, string>();
    }
} 
```

* * *

```
[ProtoContract(SkipConstructor=true)]
class PageAspx
{

    [ProtoMember(1)]
    public string PrefixeControleOnilait { get; set; }
    [ProtoMember(2, AsReference = true)]
    public HashSet<Controle> Controles { get; set; }

    private string CheminTmp;

    private string nomFichier;

    [ProtoMember(3)]
    public string NomFichier
    {
        get { return nomFichier; }
        set { nomFichier = value; }
    }

    private string titre;
    [ProtoMember(4)]
    public string Titre
    {
        get { return titre; }
        set { titre = value; }
    }

    public PageAspx()
    { }

    public PageAspx(string pNomFichier)
    {
        this.NomFichier = pNomFichier;

        this.Controles = new HashSet<Controle>();
    }
} 
```

尝试序列化时，我收到“检测到可能的递归”错误。

但基本上，我的代码列出了一个 aspx 页面中的所有控件，以及它们的层次结构（子级、父级）。这意味着在创建我的“PageAspx”对象后，它包含页面的所有控件，并且对于每个控件，它的父级和子级（如果有的话）。当我不序列化成员`ControlesInternes`时，序列化很顺利。但我需要这些信息。

如何使用 protobuf 保存这些数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:38:32.143

我找到了一个解决方案：我不序列化父母，我在“Controle”类中反序列化后使用这个函数：

```
 [ProtoAfterDeserialization]
    protected void OnDeserialized()
    {
        if (ControlesInternes.Count > 0)
        {
            foreach (var ctl in ControlesInternes)
            {
                ctl.Parent = this;
            }
        }
    } 
```

# iphone - cv::matchShapes 方法实现给出错误

> ID：12142976
> 
> 赞同：0
> 
> 时间：2012-08-27T13:30:16.723
> 
> 标签：iphone, objective-c, image-processing, opencv

我的目标是找到从相机捕获的图像中的模式，为此我找到了`cv::matchShapes`opencv 的方法来实现它。

当我实现此方法时，它会使应用程序在 matchShapes 方法上崩溃。可能是我做错了什么：-

我完全不知道如何使用这种方法在我的查询图像中找到匹配的形状。这就是我尝试过的。

这是我的代码：-

```
 - (void)tryingMatchShapes:(cv::Mat)_image _image1:(cv::Mat)_image1
    {
        std::vector<std::vector<cv::Point> > squares;

        cv::Mat pyr, timg, gray0(_image.size(), CV_8U), gray;
        int thresh = 50, N = 11;
        cv::pyrDown(_image, pyr, cv::Size(_image.cols/2, _image.rows/2));
        cv::pyrUp(pyr, timg, _image.size());
        std::vector<std::vector<cv::Point> > contours;
        for( int c = 0; c < 3; c++ ) {
            int ch[] = {c, 0};
            mixChannels(&timg, 1, &gray0, 1, ch, 1);
            for( int l = 0; l < N; l++ ) {
                if( l == 0 ) {
                    cv::Canny(gray0, gray, 0, thresh, 5);
                    cv::dilate(gray, gray, cv::Mat(), cv::Point(-1,-1));
                }
                else {
                    gray = gray0 >= (l+1)*255/N;
                }
                cv::findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            }
        }
                cv::Mat pyr1, timg1, gray2(_image1.size(), CV_8U), gray1;
                cv::pyrDown(_image1, pyr1, cv::Size(_image1.cols/2, _image1.rows/2));
                cv::pyrUp(pyr1, timg1, _image1.size());
                std::vector<std::vector<cv::Point> > contours1;
                for( int c = 0; c < 3; c++ ) {
                    int ch[] = {c, 0};
                    mixChannels(&timg1, 1, &gray2, 1, ch, 1);
                    for( int l = 0; l < N; l++ ) {
                        if( l == 0 ) {
                            cv::Canny(gray2, gray1, 0, thresh, 5);
                            cv::dilate(gray1, gray1, cv::Mat(), cv::Point(-1,-1));
                        }
                        else {
                            gray1 = gray2 >= (l+1)*255/N;
                        }
                        cv::findContours(gray1, contours1, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

                    }
                }
for( size_t i = 0; i < contours.size(); i++ )
    {
  double value=  cv::matchShapes(contours[i], contours1[i], CV_CONTOURS_MATCH_I1, 0);
        NSLog(@"%f",value);

    }     
    }

    UIImage *testImage = [UIImage imageNamed:@"note_with_marks (1).png"];    
    [self.imageView setImage:testImage];
    cv::Mat forground = [testImage CVMat]; 
    UIImage *testImage2 = [UIImage imageNamed:@"1.png"];    
    cv::Mat forground2 = [testImage2 CVMat];
    [self tryingMatchShapes:forground _image1:forground2];

The app is getting crashed.

Error:-

  OpenCV Error: Assertion failed (contour1.checkVector(2) >= 0 && contour2.checkVector(2) >= 0 && (contour1.depth() == CV_32F || contour1.depth() == CV_32S) && contour1.depth() == contour2.depth()) in matchShapes, file /Users/Aziz/Documents/Projects/opencv_sources/trunk/modules/imgproc/src/contours.cpp, line 1705 
```

请一些人从编码的角度帮助我实施这种方法。请我需要一些编码帮助。我已经经历了很多理论概念。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:41:47.913

```
std::vector<std::vector<cv::Point> > contours1; 
```

你不能申请`matchShapes`这种类型。您可以将它应用于每个（一个）轮廓，而不是轮廓组（数组）。例如：

```
cv::matchShapes(contours[0], contours1[0], CV_CONTOURS_MATCH_I1, 0); 
```

# c# - 在 C# 中的 app.config 文件中存储 < 和 > 字符时出错

> ID：12142978
> 
> 赞同：5
> 
> 时间：2012-08-27T13:30:23.610
> 
> 标签：c#, configuration, app-config, configuration-files, configurationmanager

我想在 app.config 文件中存储一个 sql 查询，其中包含 < 和 > 字符，但文件显示错误 'expecting >'，你遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T13:35:25.943

只需将`<`and更改`>`为`&lt;`and`&gt;.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T13:35:59.453

如果您确实需要将该查询放在 app.config 中，则可以将其放在 CDATA 部分中，或者您可以使用`&lt;`和转义这些字符`&gt;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T13:36:08.610

首先，如果您在 app.config 中存储 SQL，您可能做错了什么。正如@ChrisBint 所说，您可能应该将其放在嵌入式资源文件中。

话虽如此，您应该能够通过用适当的实体替换任何特殊字符来纠正问题：

```
<  ... &lt;
>  ... &gt;

"  ... &quot; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T13:32:18.743

将 SQL 存储在资源文件而不是 app.config 中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T13:39:46.420

> （大于字符）使用“>”

必须用于属性值，但 > 可以作为元素的内容，只要 < 不在其前面。

<（小于字符）- 使用“<”

必须用于属性值，但只要不跟在 > 后面，< 就可以作为元素的内容。

来源 - [http://msdn.microsoft.com/en-us/library/ms748250.aspx](http://msdn.microsoft.com/en-us/library/ms748250.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T13:37:30.013

您必须使用 XML 编码字符。`&lt;`和分别`&gt;`为`<`和`>`

这应该确保在 xml 中正确处理任何特殊字符并按预期返回

# ms-word - 替换字段名称

> ID：12142979
> 
> 赞同：0
> 
> 时间：2012-08-27T13:30:24.430
> 
> 标签：ms-word, word-2007

我正在尝试使用查找和替换来更改字段名称的值。

```
1_FirstName
1_LastName

Find and replace 1_ with 2_

2_FirstName
2_LastName 
```

当我这样做并单击编辑字段时，该值仍然是 1_FirstName 和 1_LastName，但它显示 2_FirstName 和 2_LastName。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:55:43.073

如果这些是 MERGEFIELD 字段，粗略地说，替换的内容取决于执行查找/替换时可见的内容。有底层代码，例如 { MERGEFIELD 1_FirstName } 和“chevron”版本，例如 <<1_FirstName>> （除了真正的 V 形而不是加倍的 < 和 >）

如果您看到 chevron 版本并执行查找/替换，则 chevron 版本会更改，但没有任何有用的更改。如果您选择域代码和 F9 来更新它们，“V 形名称”将恢复。

如果您看到 { MERGEFIELD } 版本并进行查找/替换，则字段代码将正确更改，但在您选择并更新字段（或者可能向后/向前移动 1 条记录）之前，V 形显示不会改变预览或类似的东西——奥托姆我不记得了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:16:05.587

找到了！选择合并字段，打开“切换字段代码”，运行查找/替换，切换回“切换字段代码”并单击“更新字段”。像魅力宝贝一样工作！:)

# css - CSS三个从左到右对齐的内联元素，如何占据所有可用宽度

> ID：12142980
> 
> 赞同：0
> 
> 时间：2012-08-27T13:30:25.110
> 
> 标签：css, inline, text-align

我有一个滑块，其 div 包含上一个控件、开始/停止滑动、下一个控件。

我将“文本对齐”分别设置为左、中和右，并显示为“内联”。我现在不知道如何填充整个宽度。

这是标记：

```
<div id="external_promo_controls">
  <div id="promo_previous"></div>
  <div id="promo_auto_controls"></div>
  <div id="promo_next"></div>
</div> 
```

和CSS：

```
#external_promo_controls div{
    display: inline;
}
#promo_previous {text-align: left;}
#promo_auto_controls {text-align: center;}
#promo_next {text-align: right;} 
```

我想我可以用浮动元素来完成它，但是我试图将元素正确组合在一条线上并将元素居中放在中间时遇到了很多麻烦。我想避免使用像素值定位元素，因为一旦我更改文本、字体或大小或容器，它就会中断，这些都是最终会发生的事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:39:38.947

易于使用的浮动 - 这个小提琴应该让你走上正确的道路：

[http://jsfiddle.net/Q4paq/](http://jsfiddle.net/Q4paq/)

带有 DIV 的新示例包含带有悬停状态的链接。

[http://jsfiddle.net/Q4paq/1/](http://jsfiddle.net/Q4paq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:38:10.370

试试这个。我不确定它是否会起作用，但假设所有三个内部 div 都有`100px`各自的宽度

`outerDiv`将宽度指定为 300px，没有边距和填充

`innerDiv`width:100px 和 margin 和 padding 是 0px 和 float : left。

如果要指定边距和填充，则所有三个 innerDiv 的总和`width + padding + margin + border`* 3 应该是外部 div 的宽度。

# html - Ajax HtmlEditorExtender 图像未上传

> ID：12142981
> 
> 赞同：1
> 
> 时间：2012-08-27T13:30:30.830
> 
> 标签：html, ajax

在设计页面中，我在 ajax 弹出窗口中加载**HtmlEditorExtender 。**我想加载图像。但图像没有完全加载。我猜： **OnImageUploadComplete**没有触发。可能是什么问题呢？请建议我解决方案？

```
<ajax:HtmlEditorExtender ID="htmEdtior" DisplaySourceTab="true"  OnImageUploadComplete="htmEdtior_OnUploadComplete"
                                TargetControlID="txtWelcomenotes" runat="server">
                                <Toolbar>
                                    <ajax:Undo />
                                    <ajax:Redo />
                                    <ajax:Bold />
                                    <ajax:Italic />
                                    <ajax:Underline />
                                    <ajax:StrikeThrough />
                                    <ajax:Subscript />
                                    <ajax:Superscript />
                                    <ajax:JustifyLeft />
                                    <ajax:JustifyCenter />
                                    <ajax:JustifyRight />
                                    <ajax:JustifyFull />
                                    <ajax:InsertOrderedList />
                                    <ajax:InsertUnorderedList />
                                    <ajax:CreateLink />
                                    <ajax:UnLink />
                                    <ajax:RemoveFormat />
                                    <ajax:SelectAll />
                                    <ajax:UnSelect />
                                    <ajax:Delete />
                                    <ajax:Cut />
                                    <ajax:Copy />
                                    <ajax:Paste />
                                    <ajax:BackgroundColorSelector />
                                    <ajax:ForeColorSelector />
                                    <ajax:FontNameSelector />
                                    <ajax:FontSizeSelector />
                                    <ajax:Indent />
                                    <ajax:Outdent />
                                    <ajax:InsertHorizontalRule />
                                    <ajax:HorizontalSeparator />
                                    <ajax:InsertImage />
                                </Toolbar>
                            </ajax:HtmlEditorExtender> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:41:13.650

已将来自另一个页面的每个查询字符串更改为会话.....然后它工作了.....问题解决了......

# python - 使用 Tkinter 按钮从线程运行和停止函数

> ID：12142988
> 
> 赞同：0
> 
> 时间：2012-08-27T13:30:43.030
> 
> 标签：python, multithreading, tkinter

我希望该方法`tryme`仅在我按下 gui 中的“snackPlay”按钮时运行，但它会在我运行脚本后立即运行。我该怎么做才能`tryme`只在命令上运行？谢谢。

```
import threading
from Tkinter import *
from tkSnack import *

class MyThread ( threading.Thread ):

   def tryme ( self ):

      print 'up uP UP'                

root = Tk()
initializeSnack(root)

f = Frame(root)
f.pack()
Button(f, bitmap='snackPlay', command=MyThread().tryme()).pack(side='left')
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:34:37.860

我不太了解线程，但你应该尝试`command = MyThread().tryme`而不是`command = MyThread().tryme()`（在我删除所有`tkSnack`东西后它对我有用）。

Tkinter 回调期望*可调用对象*，而不是函数*结果*。