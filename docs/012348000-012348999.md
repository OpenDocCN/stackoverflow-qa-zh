# StackOverflow 问答 12348000-12348999

# java - 用于查找和替换所有 ArrayList 的正则表达式 在 Eclipse 中使用 ArrayList<>

> ID：12348000
> 
> 赞同：1
> 
> 时间：2012-09-10T08:38:23.823
> 
> 标签：java, regex, eclipse, java-7, replace

我最近开始使用 java 7，我想在现有代码中使用`<>` **菱形运算符。**谁能告诉如何查找 ArrayList 的所有实例并将其替换为 ArrayList<>。

例如：

```
List<Integer> list = new ArrayList<Integer>(); 
```

会成为

`List<Integer> list = new ArrayList<>();`

`Set`对于and ，我也可以遵循相同的模式`Map`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:09:55.173

寻找`([^\t (](List|Map|Set))<[^>]+>`（区分大小写+正则表达式）并替换为`$1<>`（正则表达式）对我有用。

**正则表达式：**

`([^\t (](List|Map|Set))`: 除空格、制表符或左括号外的任何字符，后跟 List、Map 或 Set（匹配任何类型的集合）

*   `ArrayList`将匹配（即`yList`）
*   `LinkedList`太（即`dList`）
*   但`List`不会（List 之前没有字符）

`<[^>]+>`: 以 开头，然后是除1 次或更多的`<`任何字符，然后`>``>`

`$1<>`: 括号之间的字符，后跟`<>`

**如何：**

1) `Ctrl`+`H`

2)![搜索](../Images/273386960a68e5a52519584d25370432.png)

3)![替换为](../Images/c24e602f83ead220b00675f416003117.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:11:09.140

在上述 regEx 中进行一些修改后，以下工作正常：

```
([^( |^\t](List|Map|Set))<[^>]+> 
```

sp00m 解决方案的问题是它会搜索

```
 access-modifier   return-type someFunction(List<something> list) 
```

还。

例如：

```
void fun(List<Integer> ints) 
```

所以我`^(`在初始比赛中添加了。

# mysql - Rails 应用程序返回不应该存在的 belongs_to 关联的记录

> ID：12348002
> 
> 赞同：0
> 
> 时间：2012-09-10T08:38:24.493
> 
> 标签：mysql, ruby-on-rails-3, activerecord

目前在带有 MySQL 数据库的 rails 3.2 应用程序中遇到两个非常奇怪的错误。

有一个模型“事物”属于“父事物”。这是一个可选的关联，大多数情况下预计为零。

在视图中有各种块，如下所示：

```
if thing.parent_thing then
- show part of the view specific to things with parents 
```

（我们也尝试过 if !thing.parent_thing.nil? 和许多其他变体，但似乎都不会影响以下行为）。

在本地开发模式和 Heroku 上的暂存环境中，这完全符合预期。在运行在 4 个 Dyno 上的 Heroku 生产中，它的工作时间约为 70%，但它似乎时不时地切换到调用 thing.parent_thing 将始终返回父级的模式，显然无论是否已设置。

这种行为在看似随机的时间发生，但一旦开始发生，它通常会在整个系统中持续数小时。然后系统最终将恢复到预期的行为。重新启动所有 Heroku dyno 并不能始终解决问题。使用 rails 控制台登录并检查相关的“事物”条目会产生完全正常的行为。

为了尝试理解这种行为，我们在生产中添加了日志记录，每当发生错误情况时，它都会向我们发送 thing.inspect 和 thing.parent_thing.inspect 的结果。这将 thing.parent_thing_id 显示为 nil （这是正确的），但 thing.parent_thing 无论如何都会返回父级。

除了上述之外，在尝试进行进一步调试时，我们还遇到了以下问题：

在视图的顶部，我们创建了一个变量lines_when_parent_thing_exists = []，这是一个我们用字符串填充的数组，这些字符串指示thing.parent_thing返回父对象的行号

随后调用我们的日志记录函数，如下所示：

```
send_log_event({:message => "Lines where parent is returned", 
    :data => lines_when_parent_thing_exists.to_s}) 
    unless lines_when_parent_thing_exists.empty? 
```

上面的 send_log_event 调用是不管数组是否为空的，所以我们有数百个日志条目，其中 data 是 []

这会持续发生，而不仅仅是在第一个问题发生时，我将其包括在内，因为我不确定它是否可以提供有关第一个问题的线索。

有人对可能导致上述情况的原因有任何建议吗？

# android - 不同环境中的 Android C2DM（暂存、生产、调试）

> ID：12348005
> 
> 赞同：0
> 
> 时间：2012-09-10T08:38:34.693
> 
> 标签：android, android-c2dm

我遇到的问题是我在所有环境中都收到了所有通知。所有构建当前具有相同的包名称。因此，只能在设备上同时安装一个版本。但是我会收到针对所有构建的通知（可以是正确的一个或其他一个）。

我查看了注册ID，它总是一样的。问题可能是所有应用程序共享相同的包名？

我看到的注册参数是：

1.  清单中的广播接收器：

    ```
    <receiver android:name="com.google.android.c2dm.C2DMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
          <action android:name="com.google.android.c2dm.intent.RECEIVE" />
          <category android:name="com.company.product" />
        </intent-filter>
        <intent-filter>
          <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
          <category android:name="com.company.product" />
      </intent-filter>
    </receiver> 
    ```

2.  权限：

    `<permission android:name="com.company.product.permission.C2D_MESSAGE"
    android:protectionLevel="signature"/> <uses-permission android:name="com.company.product.permission.C2D_MESSAGE"/>`

3.  报名方式：

    ```
    Intent registrationIntent = new Intent(REQUEST_REGISTRATION_INTENT);
    registrationIntent.setPackage(GSF_PACKAGE);
    registrationIntent.putExtra(EXTRA_APPLICATION_PENDING_INTENT,
            PendingIntent.getBroadcast(getApplicationContext(), 0, new Intent(), 0));
    registrationIntent.putExtra(EXTRA_SENDER, "app@company.com");
    context.startService(registrationIntent); 
    ```

为了仅接收针对正在运行的应用程序（环境）的通知，我究竟需要进行哪些更改？

此外，如果问题是包名称，我不明白为什么。假设我使用调试版本登录。使用包名 x 注册。现在我注册生产，也使用包名 x。我是否会收到来自调试的通知，因为它之前使用相同的包名称注册？这是否意味着如果我从未使用/注册过调试版本，我将永远不会使用生产应用程序收到来自调试环境的通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:42:08.970

目前，我刚刚为 DEBUG 环境重命名了包。所以就像我有其他应用程序一样，它变得很乱但是......我不知道是否有其他解决方案，但我会很高兴发现:)

编辑：也许它可以从第三方服务器方解决。我的意思是，在注册时，您可以向您的服务器发送一个值为 debug/staging/prod 的变量，它会将您的设备 ID 放入 3 个数据库之一中（一个带有为调试注册的应用程序，一个用于暂存，一个用于生产）请让我知道您对此有何看法！

# android - Google API 未收到任何报告

> ID：12348007
> 
> 赞同：0
> 
> 时间：2012-09-10T08:38:44.043
> 
> 标签：android, api, google-maps-api-3

我在我的新 Android 应用程序上使用 GCM 服务，我的代码做得很好，但是当我在我的手机上运行项目时，我遇到了项目意外停止的异常，但是当我评论这行代码时

```
 GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this); 
```

错误停止了，但是当我运行项目时发生错误，当我检查我的谷歌 API 以检查错误是否发送到我的谷歌 API 但我没有找到任何报告为什么？？？

GCMIntenetService 类

```
package com.example.elarabygroup;

import com.google.android.gcm.GCMBaseIntentService;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class GCMIntenetService extends GCMBaseIntentService {
    public static String TAG = "GCMIntentService";

    public GCMIntenetService(String senderId) {
        super(senderId);
        Log.d("GCMIntentService", senderId);
    }

    @Override
    protected void onError(Context arg0, String arg1) {
        Log.d("onError", arg1);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        Log.d("onRecoverableError", errorId);
        return false;
    }

    @Override
    /*
    protected void onMessage(Context arg0, Intent arg1) {
        Log.d("onMessage", String.valueOf(arg1));
    }
    */
    protected void onMessage(Context arg0, Intent arg1) {

        Log.d("GCM", "RECIEVED A MESSAGE");
        // Get the data from intent and send to notificaion bar
        generateNotification(arg0, arg1.getStringExtra("**notificaion**"));
    }

    private void generateNotification(Context arg0, String stringExtra) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onRegistered(Context arg0, String arg1) {
        Log.d("onRegistered", arg1);
    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        Log.d("onUnregistered", arg1);
    }
} 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.elarabygroup"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <permission
        android:name="com.example.elarabygroup.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.elarabygroup.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".ElarabyGroup"
            android:label="@string/title_activity_elaraby_group" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.example.elarabygroup" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

活动

```
package com.example.elarabygroup;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebView;
import com.google.android.gcm.GCMRegistrar;

public class ElarabyGroup extends Activity {
    private String TAG;
    private String SENDER_ID = "xxxxxxxx";
    private WebView webView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_elaraby_group);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);

        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
            GCMRegistrar.register(this, "xxxxxxxx");
        } else {
            Log.v(TAG, "Already registered");
        }

        try {

            ConnectivityManager con = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

            if (con.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED
                    && con.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED) {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);

                builder.setMessage("No Internet connection");
                AlertDialog alert = builder.create();
                alert.show();

            } else

            {

                webView = (WebView) findViewById(R.id.webView1);
                webView.getSettings().setJavaScriptEnabled(true);
                webView.loadUrl("http://m.elarabygroup.com");
            }

        } catch (Exception e) {

            AlertDialog.Builder builder = new AlertDialog.Builder(this);

            builder.setMessage(e.getMessage().toString());

            AlertDialog alert = builder.create();

            String url = "http://m.elarabygroup.com/";

            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(url));
            startActivity(i);

        }

    }

}
/*
 * @Override public boolean onCreateOptionsMenu(Menu menu) {
 * getMenuInflater().inflate(R.menu.activity_elaraby_group, menu); return true;
 * } }
 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:55:24.893

如果日志可用我们可以找到问题，因此尝试通过在您的手机中安装一些应用程序（如aLogCat）来获取日志。

如果你不能得到那个，参考这个教程

[http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)

# oracle - Oracle 10：INSERT 到视图中的难以理解的行为？

> ID：12348008
> 
> 赞同：5
> 
> 时间：2012-09-10T08:38:45.537
> 
> 标签：oracle, view, triggers, oracle10g

我们这里有一个奇怪的问题，我们无法向自己解释。

我们在 Oracle DB 版本 10.2.0.5.8 中有一个视图。该视图使用 INSTEAD OF 触发器。

这是触发器的代码：

```
CREATE OR REPLACE TRIGGER V1_T1_BIUD
  INSTEAD OF INSERT OR UPDATE OR DELETE
  ON V1_T1
  FOR EACH ROW
DECLARE
  AnyId   NUMBER;
BEGIN
  IF INSERTING THEN
    INSERT INTO Table T1 (
       F1, F2, F3, F4, F5
    ) VALUES (
       :new.F1, :new.F2, :new.F3, :new.F4, :new.F5
    );
  ELSIF UPDATING THEN
    UPDATE T1 SET F1 = :new.F1,
                  F2 = :new.F2,
                  F3 = :new.F3,
                  F4 = :new.F4,
                  F5 = :new.F5
    WHERE F1 = :old.F1;
  ELSIF DELETING THEN
    DELETE FROM T1
    WHERE F1 = :old.F1;
  END IF;
END;
/ 
```

这是一个示例 INSERT 语句：

```
INSERT INTO V_T1 (
  F1, F2, F3, F4, F5
)
SELECT A.V, A.S, A.F, A.T, A.Z
FROM (
  SELECT 'E' V, 'N' S, 'ABC' F, 'E' T, 'E' Z FROM DUAL UNION ALL 
  SELECT 'E',   'Y',   'QWE',   'O',   'E'   FROM DUAL UNION ALL
  SELECT 'I',   'Y',   'GHJ',   'I',   'I'   FROM DUAL           
) A
ORDER BY 1, 2, 3;
COMMIT; 
```

注意选择末尾的 ORDER BY 子句。这个 INSERT 语句的结果是这样的：

```
F1 F2 F3  F4 F5
---------------
E  N  ABC I  I 
E  Y  QWE I  I 
I  Y  GHJ I  I 
```

如您所见，第 4 列和第 5 列错误地填充了所有其他数据行中最后一个数据行的值。

如果我们像这样更改 INSERT 语句：

```
INSERT INTO V_T1 (
  F1, F2, F3, F4, F5
)
SELECT A.V, A.S, A.F, A.T, A.Z
FROM (
  SELECT 'E' V, 'N' S, 'ABC' F, 'E' T, 'E' Z FROM DUAL UNION ALL 
  SELECT 'E',   'Y',   'QWE',   'O',   'E'   FROM DUAL UNION ALL
  SELECT 'I',   'Y',   'GHJ',   'I',   'I'   FROM DUAL           
) A
ORDER BY 1, 2, 3, 4, 5;
COMMIT; 
```

结果是这样的：

```
F1 F2 F3  F4 F5
---------------
E  N  ABC E  E 
E  Y  QWE O  E 
I  Y  GHJ I  I 
```

再次注意 ORDER BY 子句，它现在对所有行进行排序，而不是第一个插入语句中的前三行。

编辑：如果您省略 ORDER BY 子句，结果也符合预期（例如示例 2）。

有人可以向我解释这种行为吗？

PS关于评论：

我今天没有时间调查或提供有关此主题的更多信息。我将在我们的数据库上创建一个完整的示例，并在接下来的几天内将其发布在这里。感谢您的耐心等待！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T11:45:57.340

这看起来确实像一个错误，但我在错误数据库中找不到明显的匹配项（一些看起来可能，例如 5842445，但模糊或不完全一致）。我只能通过触发器来实现（所以我假设您的插入是针对`T1`而不是`V1_T1`转录错误）；且仅当`F4`且`F5`不是`CHAR`：`VARCHAR2`

```
create table t1 (f1 varchar2(2), f2 varchar2(2), f3 varchar2(3),
    f4 char(2), f5 char(2));

create view v1_t1 as select * from t1; 
```

...和`instead of`触发器完全如问题所示。

`:NEW`根据，触发器中的值是错误的`DBMS_OUTPUT`，但是我认为只有 Oracle 才能弄清楚列数据类型对它的影响。

它也仍然发生在 11.2.0.3 (Linux) 中。有趣的是，如果我将其更改为`UNION ALL`，`UNION`我会得到稍微不同的结果；在 10g 中，这两列最终为空，在 11g 中它们有`x`：

```
insert into v1_t1 (
  F1, F2, F3, F4, F5
)
SELECT A.V, A.S, A.F, A.T, A.Z
FROM (
    SELECT 'E' V, 'N' S, 'ABC' F, 'E' T, 'E' Z FROM DUAL UNION
    SELECT 'E',   'Y',   'QWE',   'O',   'E'   FROM DUAL UNION
    SELECT 'I',   'Y',   'GHJ',   'I',   'I'   FROM DUAL
) A
ORDER BY 1, 2, 3;

3 rows created.

select * from v1_t1;

F1 F2 F3  F4 F5
-- -- --- -- --
E  N  ABC x  x
E  Y  QWE x  x
I  Y  GHJ x  x 
```

......这甚至更奇怪 - 看起来可能对其他一些错误的修复稍微影响了这个。

所以不是真正的答案；您需要向 Oracle 提出服务请求，我很确定他们只会告诉您删除`order by`，因为您已经知道它没有任何价值。

对于蒂洛；没有任何计划`order by`（11g）：

```
----------------------------------------------------------------------------------
| Id  | Operation                | Name  | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |       |     3 |    51 |     9  (34)| 00:00:01 |
|   1 |  LOAD TABLE CONVENTIONAL | V1_T1 |       |       |            |          |
|   2 |   VIEW                   |       |     3 |    51 |     9  (34)| 00:00:01 |
|   3 |    SORT UNIQUE           |       |     3 |       |     9  (78)| 00:00:01 |
|   4 |     UNION-ALL            |       |       |       |            |          |
|   5 |      FAST DUAL           |       |     1 |       |     2   (0)| 00:00:01 |
|   6 |      FAST DUAL           |       |     1 |       |     2   (0)| 00:00:01 |
|   7 |      FAST DUAL           |       |     1 |       |     2   (0)| 00:00:01 |
---------------------------------------------------------------------------------- 
```

并计划与`order by 1,2,3` *或* `1,2,3,4,5`- 相同的计划哈希值（11g）：

```
----------------------------------------------------------------------------------
| Id  | Operation                | Name  | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |       |     3 |    51 |    10  (40)| 00:00:01 |
|   1 |  LOAD TABLE CONVENTIONAL | V1_T1 |       |       |            |          |
|   2 |   SORT ORDER BY          |       |     3 |    51 |    10  (40)| 00:00:01 |
|   3 |    VIEW                  |       |     3 |    51 |     9  (34)| 00:00:01 |
|   4 |     SORT UNIQUE          |       |     3 |       |     9  (78)| 00:00:01 |
|   5 |      UNION-ALL           |       |       |       |            |          |
|   6 |       FAST DUAL          |       |     1 |       |     2   (0)| 00:00:01 |
|   7 |       FAST DUAL          |       |     1 |       |     2   (0)| 00:00:01 |
|   8 |       FAST DUAL          |       |     1 |       |     2   (0)| 00:00:01 |
---------------------------------------------------------------------------------- 
```

而且我看到从其他表中选择的相同类型的损坏，但前提是子查询中的结果在被排序之前是联合的；虽然那时我得到空值而不是`x`. （我短暂地想知道是否`x`来自`dual`它本身，但是`dummy`是大写的`X`，这显示的是小写`x`）。

* * *

在@Annjawn 的评论之后，将插入从更改`V1_T1`为直接插入`T1`可以正常工作（即插入正确的值），并且奇怪的是具有相同的计划哈希，即使它显示的是表名而不是`Name`列中的视图。在 10gR2 和 11gR2 中也可以使用`UNION`或。`UNION ALL`我猜这似乎是工会混淆的触发器。

* * *

更进一步的数据类型点......视图必须有`char`列，表不一定，这并不奇怪，因为视图上的触发器似乎是问题所在。如果我用列设置表格`char`但将它们投射到`varchar2`视图中，那么我看不到问题：

```
create table t1 (f1 varchar2(2), f2 varchar2(2), f3 varchar2(3),
    f4 char(2), f5 char(2));

create view v1_t1 as select f1, f2, f3, cast(f4 as varchar(2)) f4,
    cast(f5 as varchar(2)) f5
from t1; 
```

但如果我反过来做，它确实会出现问题：

```
create table t1 (f1 varchar2(2), f2 varchar2(2), f3 varchar2(3),
    f4 varchar(2), f5 varchar(2));

create view v1_t1 as select f1, f2, f3, cast(f4 as char(2)) f4,
    cast(f5 as char(2)) f5
from t1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:53:43.103

除非我遗漏了什么，否则整个过程都可以正常工作，并且`T1`在 Oracle 10g 和 11g 中都按预期将行插入到表中。

```
create table t1 (f1 varchar2(10),
f2 varchar2(10),
f3 varchar2(10),
f4 varchar2(10),
f5 varchar2(10));

create or replace view v_t1 as select * from t1;

CREATE OR REPLACE TRIGGER V1_T1_BIUD
  INSTEAD OF INSERT OR UPDATE OR DELETE
  ON v_t1
  FOR EACH ROW
DECLARE
  AnyId   NUMBER;
BEGIN
  IF INSERTING THEN
    INSERT INTO t1 (
       F1, F2, F3, F4, F5
    ) VALUES (
       :new.F1, :new.F2, :new.F3, :new.F4, :new.F5
    );
  ELSIF UPDATING THEN
    UPDATE t1 SET F1 = :new.F1,
                  F2 = :new.F2,
                  F3 = :new.F3,
                  F4 = :new.F4,
                  F5 = :new.F5
    WHERE F1 = :old.F1;
  ELSIF DELETING THEN
    DELETE FROM t1
    WHERE F1 = :old.F1;
  END IF;
END;

--With UNION ALL
INSERT INTO V_T1 (
  F1, F2, F3, F4, F5
)
SELECT A.V, A.S, A.F, A.T, A.Z
FROM (
  SELECT 'E' V, 'N' S, 'ABC' F, 'E' T, 'E' Z FROM DUAL UNION ALL 
  SELECT 'E',   'Y',   'QWE',   'O',   'E'   FROM DUAL UNION ALL
  SELECT 'I',   'Y',   'GHJ',   'I',   'I'   FROM DUAL           
) A
ORDER BY 1, 2, 3;

commit;

select * from t1;

F1         F2         F3         F4         F5       
---------- ---------- ---------- ---------- ----------
E          N          ABC        E          E          
E          Y          QWE        O          E          
I          Y          GHJ        I          I 

delete from t1;
commit;

--With UNION
INSERT INTO V_T1 (
  F1, F2, F3, F4, F5
)
SELECT A.V, A.S, A.F, A.T, A.Z
FROM (
  SELECT 'E' V, 'N' S, 'ABC' F, 'E' T, 'E' Z FROM DUAL UNION
  SELECT 'E',   'Y',   'QWE',   'O',   'E'   FROM DUAL UNION
  SELECT 'I',   'Y',   'GHJ',   'I',   'I'   FROM DUAL           
) A
ORDER BY 1, 2, 3; 
commit;

select * from t1;

F1         F2         F3         F4         F5       
---------- ---------- ---------- ---------- ----------
E          N          ABC        E          E          
E          Y          QWE        O          E          
I          Y          GHJ        I          I 
```

果然，当我更改`F4`和`F5`更改`char(10)`时`varchar2(10)`（如[Alex Poole](https://stackoverflow.com/users/266304/alex-poole)所述），我可以在 10g 和 11g 中重新创建您的问题。

# maven - SpringSourceTools | 转换 Maven 遗留项目错误

> ID：12348010
> 
> 赞同：1
> 
> 时间：2012-09-10T08:38:48.597
> 
> 标签：maven, m2eclipse, sts-springsourcetoolsuite, m2e

我在转换遗留 Maven 项目时遇到问题。

我试过了 ：-

**右键项目 --> 配置 --> 隐藏遗留的 Maven 项目**

它给了我一个错误

![在此处输入图像描述](../Images/a50957be66e80075223146d1704b0bc5.png)

为 SpringSourceTools IDE 使用 m2e (1.0.2) 插件

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:50:20.137

也许该项目是使用旧的 Eclipse M2Eclipse 插件创建的。看看[我对这个问题的回答](https://stackoverflow.com/questions/8916552/using-m2e-plugin-in-a-dynamic-web-project/8919049#8919049)，看看它是否对你有帮助。

# java - 是否可以让 Glassfish JAAS 领域与一个已安装的应用程序共享一些类？

> ID：12348019
> 
> 赞同：0
> 
> 时间：2012-09-10T08:39:19.423
> 
> 标签：java, jakarta-ee, glassfish, neo4j, jaas

[在我的公司，我们正在开发一个应用程序，它使用半自定义持久层](https://github.com/Riduidel/gaedo)将其数据存储在 Neo4j 数据库中。使用该持久层，我们使用经典类声明我们的安全层：`User`、、`Group`等等`Privilege`。

这些元素自然而然地保存在我们的 Neo4J DB 中。

不幸的是，我们现在想要声明我们的自定义 JAAS 领域，使用 Neo4J DB 作为后端。为了以尽可能快的方式编写该领域，我们决定在该领域中使用我们的应用程序代码（在 maven 的帮助下`<dependency/>`）。

不幸的是，我们发现，当我们部署 JAAS 领域时，应用程序代码无法加载各种

```
java.lang.RuntimeException: EJB Container initialization error 
Exception while loading the app : EJB Container initialization error 
```

也许这与我们在 JAAS 领域部署的事实有关`${domaindir}/lib`？

无论如何，有没有一种解决方案让一个 glassfish JAAS 领域与部署在域中的一个应用程序共享一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:21:22.810

您说 JAAS 类已部署到 /domain/lib （这对我来说似乎是正确的）。我假设您的应用程序类部署为 WAR 或 EAR。

如果您的 JAAS 领域的实现依赖于 WAR/EAR 中的类，那么由于类加载器层次结构，您会遇到类加载问题。/domain/lib 类加载器无法访问 WAR/EAR 中的类。

您应该将依赖的类提取到一个单独的 jar 中，并将它们也放入 /domain/lib 中。

有关类加载器层次结构的更多信息，请参见此处：http: [//docs.oracle.com/cd/E18930_01/html/821-2418/beadf.html](http://docs.oracle.com/cd/E18930_01/html/821-2418/beadf.html)

# xslt - 另一台计算机/服务器上文件的 document() 函数

> ID：12348024
> 
> 赞同：0
> 
> 时间：2012-09-10T08:39:34.977
> 
> 标签：xslt, xpath, xslt-1.0

我理解 document() 的用法如下。

```
<xsl:value-of select="document('path\to\docuemnt.xml')/RootElement/Element"/> 
```

这必须是父 XSL 文件的相对路径。但是，如果我需要引用托管在本地网络上另一台服务器上的文件怎么办？我试过这样的事情。

```
<xsl:value-of select="document('\\servername\path\to\document.xml')/RootElement/Element"/> 
```

但这会引发错误，因为它看起来

```
C:\path\to\xsl\\servername\path\to\document.xml 
```

这当然不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:57:34.223

您对 document() 的理解不正确。它需要一个 URI，而不是文件名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T13:31:41.597

此解决方案仅与 Windows 7 上控制台应用程序表单中的 Saxon-HE 9.4.0.3N XSLT 处理器有关。

在我的实验中，我发现 document() 函数将接受文件名或 URI。但是我会避免使用文件名，因为它们需要是短格式的。如果您使用长格式，文件名将被拒绝。

假设您的文档是...

```
c:\path\to\document.xml 
```

在映射到驱动器“j”的服务器“servername”上。

要从此使用作为 document() 参数值形成 URI...

```
file:///j:/path/to/document.xml 
```

关于 URI，我误认为撒克逊人不接受长格式。这仅适用于文件名。然而，有一些陷阱......

1.  注意正斜杠。反斜杠将不起作用。
2.  我还没有找到一种方法来构建一个可行的文件：只有 UNC 名称的 URI。您需要将驱动器映射到一个字母。
3.  任何因任何原因无法打开文档都将被报告为相同的错误。对于文件系统，有很多事情可能出错，如果您无法打开文件，则认为 URI 错误是不安全的。无法在特定时间打开文件的原因可能有很多。
4.  谨防防火墙问题。这些发挥作用。
5.  许多文本编辑器（例如 NotePad++）假定在没有 BOM 且未以两种 UTF-16 编码之一编码的情况下，文本文件在系统代码页中编码。Saxon 将默认假设该文件以 UTF-8 编码，因此如果您在 NotePad++ (ä) 中使用我的代码页有一个看起来像这样的字符，Saxon 将吐出假人，并报告它无法打开文件。（旁白：我不确定我的代码页是什么。我的操作系统是 Win7，当前系统区域设置是英语（澳大利亚）。它是系统本地决定系统代码页）。Saxon 不会打开文档的原因是某些代码页中编码的 (ä) 会导致字节序列不是有效的 UTF-8 序列。
6.  底层操作系统不支持不是 URL 路径的 URI 路径。Saxon 很可能会如实说它支持与 document() 函数相关的 URI，但这不会煮任何卷心菜，因为在实践中，您不能使用它们。- 至少不在 o/s 的 windows 系列上。
7.  请忽略文件协议上的[MSDN 页面。](http://msdn.microsoft.com/en-us/library/aa767731%28v=vs.85%29.aspx)Saxon document() 函数不接受该页面上建议的 URL 形式（带有 | 字符等）。使用我上面建议的表格。我已经对其进行了测试，并且可以正常工作。

# c# - 我需要用法语创建一个 .net 4.0 部署设置

> ID：12348026
> 
> 赞同：3
> 
> 时间：2012-09-10T08:39:56.160
> 
> 标签：c#, .net, prerequisites

我在 .net 4.0 中工作，我需要在 Visual Studio 2012 中创建部署设置，其中包含 .netframework 4.0、sqlite 等所有先决条件。

当我用英语（默认）创建设置时，它运行良好，这意味着它正在客户端机器上正确安装所有东西。但是当我将默认语言更改为法语时，它会出错

> 1：先决条件的安装位置未设置为“组件供应商的网站”，并且无法在磁盘上找到“Microsoft .NET Framework 4 (x86 and x64)”项中的文件“DotNetFX40\dotNetFx40LP_Full_x86_x64fr.exe”。有关详细信息，请参阅帮助。
> 
> 2：构建引导程序的一般故障
> 
> 3：不可恢复的构建错误

请帮助我，我怎样才能消除这个错误。

另一件事是，当我更改“从供应商网站下载先决条件”等先决条件的设置时，它不会出错。但我需要从本地磁盘/文件夹安装，包括安装文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:59:27.717

有必要**将文件放入正确的语言目录**。

在这里，您缺少`\fr`路径中的部分。

因此，您必须将文件放置`dotNetFx40LP_Full_x86_x64fr.exe`到`c:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\DotNetFX40\fr`64 位窗口或`c:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\DotNetFX40\fr`32 位窗口的目录中。

# sql - 子查询抛出错误

> ID：12348027
> 
> 赞同：0
> 
> 时间：2012-09-10T08:40:04.507
> 
> 标签：sql, mysqli

我有以下子查询，它们抛出错误

```
 select ts.id,(CONCAT(ts.first_name, ' ', ts.last_name),
 (    select SUM(hours*pay)

   from 
 PTAddedApp aa 
   where 
   aa.tutor_id = ts.id
   and year(aa.date) = year(now())
   and month(aa.date) = month(now())

 ),
 (select SUM(nt.hours*nt.rate)
   from PT_NT_Work_Hours nt 
   where 
   nt.tutor_id = ts.id
   and year(nt.date) = year(now())
   and month(nt.date) = month(now())
 ) 

 from PT_Tutors ts 
```

我收到以下错误消息。我假设我在做一些愚蠢的事情 - 1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 21 行的“来自 PT_Tutors ts”附近使用正确的语法

我发布了一个类似的问题，看看我是否应该使用联接，他们将我指向子查询，所以我希望有人能让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:44:21.740

您在 concat 函数附近打开 2 个括号，但只关闭 1 个。删除“CONCAT”之前的括号

```
select ts.id,CONCAT(ts.first_name, ' ', ts.last_name),
 (    select SUM(hours*pay)

   from 
 PTAddedApp aa 
   where 
   aa.tutor_id = ts.id
   and year(aa.date) = year(now())
   and month(aa.date) = month(now())

 ),
 (select SUM(nt.hours*nt.rate)
   from PT_NT_Work_Hours nt 
   where 
   nt.tutor_id = ts.id
   and year(nt.date) = year(now())
   and month(nt.date) = month(now())
 ) 

from PT_Tutors ts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:41:12.457

另一个解决方案是这样。

```
SELECT  ts.id,
        (CONCAT(ts.first_name, ' ', ts.last_name),
        aa.totalAddedApp.
        nt.totalNT
FROM    PT_Tutors ts
        LEFT JOIN
            (
                SELECT tutor_id, SUM(hours*pay) totalAddedApp
                FROM PTAddedApp
                WHERE  year(`date`) = year(now()) and 
                    month(`date`) = month(now())
                GROUP BY tutor_id
            ) aa ON aa.tutor_id = ts.id
        LEFT JOIN
            (
                select tutor_id, SUM(hours*rate) totalNT
                from PT_NT_Work_Hours
                where  year(`date`) = year(now()) and 
                    month(`date`) = month(now())
                GROUP BY tutor_id      
            ) nt ON nt. = ts.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:46:22.880

在 CONCAT 之前，您打开一个您没有关闭的括号：

```
select ts.id,(CONCAT(ts.first_name, ' ', ts.last_name), 
```

# objective-c - 如果我们使用故事板并使用外部 XIB，如何处理序列

> ID：12348031
> 
> 赞同：0
> 
> 时间：2012-09-10T08:40:25.923
> 
> 标签：objective-c, xcode4.2

在故事板中，我们只需将按钮拖动到它的目的地并创建一个序列。

如果我在情节提要中为所有这些 viewController 提供了外部 XIB 怎么办？我无法再次拖动按钮。该按钮位于外部 XIB 中，不再位于情节提要中。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:28:52.837

您应该为此按钮创建一个 IBOutlet。例如，它的名称为“buttonPressed”。然后实现这个方法。

```
- (IBOutlet)buttonPressed
{
    YourViewController *yourViewController = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];
   [self.navigationController pushViewController:yourViewController animated:YES]; 

} 
```

# tidesdk - 潮汐SDK | 捆绑包装

> ID：12348035
> 
> 赞同：0
> 
> 时间：2012-09-10T08:40:37.537
> 
> 标签：tidesdk

我已经开发了一个 TideSDK 应用程序，现在准备打包它，但是我遇到了网络类型安装程序的问题。

它总是在应用程序第一次运行时给我代码 404：

> 无法查询信息：HTTP 状态代码无效 (404)

我认为安装程序在到达正确的服务器和下载所需的运行时有困难，但我已经在这个论坛上运行了大多数解决方案，但没有一个有效。

所以我尝试了一个捆绑包，因为它应该包含这样的运行时，但我一定做错了，因为它没有捆绑在 MSI 中。我正在执行的代码如下：

> C:\TideSDK\sdk\win32\1.2.0.RC6d\tibuild.py -p --type=BUNDLE --os=win32 "C:\path_to_app\app_dir"

我也试过：

> C:\TideSDK\sdk\win32\1.2.0.RC6d\tibuild.py -p -t bundle --os=win32 "C:\path_to_app\app_dir"

以及所有的大写/小写组合。还尝试了 1.2.0.4 版，但没有成功。难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:01:04.330

网络类型的安装程序不再可用，因为 appcelerator 已经取消了他们的钛桌面服务。

所以只能做捆绑包装。尝试以下命令：

```
python tibuild.py --dest=. --type=bundle --package=. "c:\path\to\your\app\dir" 
```

这应该构建和打包您的应用程序并为其创建安装程序。将“dest”和“package”更改为您想要构建应用程序和安装包的目录。

您可以省略 OS 参数，因为构建器只能为当前操作系统生成构建。

# javascript - Javascript - 模板引擎

> ID：12348037
> 
> 赞同：18
> 
> 时间：2012-09-10T08:40:41.187
> 
> 标签：javascript, template-engine

如今，我们可以找到许多 JS 模板引擎，如 KnockOut、Mustache、Underscore ……您能告诉我基于这些引擎的架构有哪些优势吗？和/或何时使用它们？是否比从服务器端生成所有 HTML 更好（可维护性、开发成本、可靠性……）？

公开提要（json 中的休息服务）并在客户端做一些事情（微模板）是一个好的架构吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-10T08:47:38.937

Linkedin 做了很好的研究，[看看这个页面](http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-10T08:46:08.683

模板的主要优点是优化传递给客户端的数据量，从而加快响​​应速度、降低流量成本并提高服务器的吞吐量。

# html - mootools 使用功能加载内容

> ID：12348045
> 
> 赞同：0
> 
> 时间：2012-09-10T08:41:06.643
> 
> 标签：html, ajax, mootools

我正在使用 mootools，我想加载一个 div （命名`response`）内容。我在 javascript 中传递的 div 内容，`$('response').set('html', content)`其中内容是可变的。在内容变量中，我有一些*带有按钮的 html 代码，*并且想要创建一个事件句柄（单击）。

我使用 json 请求加载并传递给元素的内容：

```
<div id="undo">
  <ul>
    <li> <button value="1">foo</button> </li>
    <li> <button value="2">bar</button> </li>
  </ul>
</div> 
```

我的 javascript 看起来像

```
$('undo').addEvents({
    'click:relay(button)': function(ev, element){
         alert('a button clicked!');
    }
}); 
```

但我不知道为什么这个活动没有奏效。

我认为问题是`$('undo')`当 dom 对象准备好时不存在但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:04:03.997

将 dom 树进一步委托给在 domready 块运行时存在的元素。例如，如果你有`<div id=content>... </div>`（或者`response`如果它是静态的）

```
document.id('content').addEvents({
    'click:relay(#undo button)': function(event, element){
        event.stop();
        console.log(element.get('value'));
    }
}); 
```

鉴于您稍后将数据注入那里，这将正常工作。

# jqgrid - JQGrid 中的真正滚动数据不适用于 MVC 3

> ID：12348047
> 
> 赞同：1
> 
> 时间：2012-09-10T08:41:13.290
> 
> 标签：jqgrid

有人可以帮我解决这个问题吗？我有一个 jqgrid(4.4.0)，我想实现真正的滚动。问题是它只加载一次数据行，这意味着只加载第一页。所以当我滚动时，它不会获取其他页面。我已经检查了[这个问题](https://stackoverflow.com/questions/7290242/autoloading-data-when-scrolling-with-jqgrid-in-mvc)，但仍然无法正常工作。

这是jqgrid：

```
jQuery("#deptProjectsGrid").jqGrid({
        url: '@Url.Action("GetUserProjects", "TimesheetByWeek")',
        datatype: 'json',
        mtype: 'GET',
        colNames: ['Projekt', 'Oprettet af'],
        colModel: [
                    { name: 'project', index: 'project', sortable: true, align: 'left' },
                    { name: 'creator', index: 'creator', align: 'left' }
                  ],
        height: 300,
        width: 250,
        altRows: true,
        pager: '#pager1',
        scroll: 1,
        rowNum: 15,
        rownumbers: true,
        viewrecords: true,
        sortname: 'project',
        sortorder: 'desc',
        gridview: true,
        caption: "Projekter",
        onSelectRow: function (ids) {
            if (ids == null) {
                ids = 0;
                if ($taskgrid.jqGrid('getGridParam', 'records') > 0) {
                    $taskgrid.jqGrid('setGridParam', { url: '@Url.Action("GetProjectTasks", "TimesheetByWeek")/' + ids });
                    $taskgrid.jqGrid('setCaption', "No Tasks " + ids).trigger('reloadGrid');
                }
            } else {
                var data = $("#deptProjectsGrid").getRowData(ids);
                $taskgrid.jqGrid('setGridParam', { url: '@Url.Action("GetProjectTasks", "TimesheetByWeek")/' + ids });
                $taskgrid.jqGrid('setCaption', "Tasks for " + data.project).trigger('reloadGrid');
            }
        }
    }); 
```

控制器动作如下所示：

```
public JsonResult GetUserProjects(int page, int rows, string search, string sidx, string sord)
    {
        try
        {
            using (DanishEntities db = new DanishEntities()) 
            {

                int totalRecords = 0;
                var allProjectEntities = _projectRepository.GetProjectsPaged(page, rows, out totalRecords, db);
                var projects = Mapper.Map<List<Project>, List<ProjectModel>>(allProjectEntities);

                var totalPages = (int)Math.Ceiling(totalRecords / (float)rows);
                var jsonData = new
                {
                    total = rows,
                    page = page++,
                    records = totalRecords,
                    rows = (
                               from p in projects
                               select new
                               {
                                   id = p.ID,
                                   cell = new object[] { p.Name, "john doe" }
                               }).ToArray()
                };
                return Json(jsonData, JsonRequestBehavior.AllowGet);
            }
        }
        catch (Exception)
        {

            throw;
        }
    } 
```

查询是：

```
public List<Project> GetProjectsPaged(int page, int rows, out int totalCount, DanishEntities dbContext)
    {
        List<Project> pagedProjectEntities = new List<Project>();
        try
        {

            totalCount = dbContext.Projects.Count();
            pagedProjectEntities = dbContext.Projects
                    .OrderBy(p => p.ID)
                    .Skip((page-1) * rows)
                    .Take(rows)
                    .ToList();

        }
        catch (Exception)
        {
            throw;
        }

        return pagedProjectEntities;
    } 
```

我已经浪费了 4 个小时来试图解决这个问题，但我只是看不到问题所在。我什至在控制器操作中设置了“total = totalPages”，但没有任何效果。请帮忙！！关于 jqGrid 的另一个快速问题：如何在 jqGrid 中禁用“rowNum”，以便网格显示数据集中查询返回的所有可用行？

# android - 如何在屏幕上创建应用程序图标时防止吐司消息

> ID：12348055
> 
> 赞同：0
> 
> 时间：2012-09-10T05:54:40.990
> 
> 标签：android, toast

我想在手机屏幕上创建**应用程序图标**，但是当我这样做时，**应用程序会自动创建 toast 消息**，如何在创建应用程序图标或删除屏幕上的图标时防止此 toast 消息？谢谢。

**那是我如何做的代码**

```
private void addShortcut(){
Intent shortcutIntent = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");

// Shortcut name
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
shortcutIntent.putExtra("duplicate", false);

ComponentName comp = new ComponentName(this.getPackageName(), "."+this.getLocalClassName());
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(Intent.ACTION_MAIN).setComponent(comp));

// Shortcut icon
ShortcutIconResource iconRes = Intent.ShortcutIconResource.fromContext(this, R.drawable.icon);
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, iconRes);

sendBroadcast(shortcutIntent);
}

private void delShortcut(){
Intent shortcut = new Intent("com.android.launcher.action.UNINSTALL_SHORTCUT");

// Shortcut adı
shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));

String appClass = this.getPackageName() + "." +this.getLocalClassName();
ComponentName comp = new ComponentName(this.getPackageName(), appClass);
shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(Intent.ACTION_MAIN).setComponent(comp));

sendBroadcast(shortcut);
}

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
delShortcut();
addShortcut(); 
```

**添加快捷方式的权限**

```
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT"></uses-permission>
<uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T21:47:07.493

我认为你不能，因为 toast 是由启动器显示的，这是一个与你不同的应用程序。

我可能是错的。

无论如何，创建吐司的不是您的应用程序，因此您不太可能隐藏它。

# java - JNLP - application-desc vs applet-desc - 当不在浏览器中运行时比另一个更好？

> ID：12348062
> 
> 赞同：2
> 
> 时间：2012-09-10T08:42:35.753
> 
> 标签：java, swing, deployment, jnlp, java-web-start

我有一个小程序，我不再想在浏览器中运行，而是希望通过 JNLP 作为可下载、自动更新、可脱机的 Java 应用程序运行。

我不想保持将它作为小程序运行的能力。

将现有的小程序包装在 JFrame 和 main-menthod 中，或者简单地重写它并将 init() 和其他所有内容一起替换，我都没有问题。

但我的问题是：使用 application-desc 与 applet-desc 有什么优点或缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:43:23.737

转换为`JFrame`基于的第一个优点是您可以立即控制顶级容器，例如：

*   菜单
*   外观和感觉
*   默认关闭操作
*   地点
*   尺寸`pack()`（万岁！）
*   ..

进行`applicaton-desc`自由浮动部署。但是不要把applet放到frame里面，而是把applet的内容放到一个panel里面，把panel放到frame里面（或者applet，或者window，或者..）。

# c++ - 类似于 Google Test 的 C++ 单元测试工具？

> ID：12348063
> 
> 赞同：1
> 
> 时间：2012-09-10T08:42:41.293
> 
> 标签：c++, unit-testing, googletest

是否有任何类似于 GoogleTest 的工具用于 C++ 中的功能测试。我计划将它们作为单元测试的一部分进行，并且想知道其他可用的选项，以便我可以做出明智的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:38:55.213

如果您使用的是 Visual Studio，它会嵌入一个测试单元框架。
我刚刚尝试了[MSDN 网站](http://msdn.microsoft.com/en-us/library/hh270864.aspx)上提供的示例，效果很好。

这是语法：

```
#include <CppUnitTest.h>
#include "..\MyProjectUnderTest\MyCodeUnderTest.h"
using namespace Microsoft::VisualStudio::CppUnitTestFramework;
TEST_CLASS(TestClassName)
{
public:
  TEST_METHOD(TestMethodName)
  {
    // Run a function under test here.
    int actualValue   = MyProject::Multiply(2,3);
    int expectedValue = 6;

    Assert::AreEqual(expectedValue, actualValue, L"Error, the values do not match.", LINE_INFO());
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:00:42.150

看看这个。 [http://gamesfromwithin.com/exploring-the-c-unit-testing-framework-jungle](http://gamesfromwithin.com/exploring-the-c-unit-testing-framework-jungle)。而且我个人用这个，我觉得还不错。 [http://unittest-cpp.sourceforge.net/](http://unittest-cpp.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:35:08.060

您可以[查看 this](http://gamesfromwithin.com/exploring-the-c-unit-testing-framework-jungle)以获取您可以探索的框架的简短列表。

此外，这就是[为什么您应该使用](http://code.google.com/p/googletest/wiki/Primer#Introduction%3a_Why_Google_C++_Testing_Framework?)教程本身的 Google Test 。如果发现 GTest 易于使用，则测试足够详细并且文档清晰。

# java - 将表单添加到 Swing Menu 应用程序

> ID：12348064
> 
> 赞同：0
> 
> 时间：2012-09-10T08:42:46.127
> 
> 标签：java, swing, menu, jframe

我正在编写一个基于 Swing Menu 的应用程序。在菜单中，我有 File->New->Add Person Here Add Person 是一个表单，新选项将有许多其他表单。当我单击任何此表单时，必须将其添加到菜单显示区域。

我的问题是如何将它添加到显示区域。显示区域是否应该已经包含我可以添加表单的任何摆动容器？

另外，请注意，我创建的每个表单都是单独的 JFrame

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:39:56.150

> 另外，请注意，我创建的每个表单都是单独的 JFrame

*   永远不要使用很多`JFrames`，这是通往地狱的道路

> 我的问题是如何将它添加到显示区域。显示区域是否应该已经包含我可以添加表单的任何摆动容器？

*   如果您需要弹出窗口然后使用`JDialog`，只有一个`JDialog`并重新使用它来执行另一个操作

> 我正在编写一个基于 Swing Menu 的应用程序。在菜单中，我有 File->New->Add Person Here Add Person 是一个表单，新选项将有许多其他表单。当我单击任何此表单时，必须将其添加到菜单显示区域。

*   使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)在视图之间切换

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:19:14.097

您可以选择该`JInternalFrame`选项。它可以帮助您满足您的要求，参考链接，

[http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

另请参阅此链接以获取示例，

[http://www.java2s.com/Code/Java/Swing-JFC/InterestingthingsusingJInternalFramesJDesktopPaneandDesktopManager2.htm](http://www.java2s.com/Code/Java/Swing-JFC/InterestingthingsusingJInternalFramesJDesktopPaneandDesktopManager2.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:01:20.090

您可以在单击父窗口顶部的菜单时显示 JFrame 表单。
您可以通过禁用父表单来使其像对话框一样，当子表单再次退出时，我们可以启用父表单。

# xml - 如果结果文档已经存在，则跳过转换

> ID：12348065
> 
> 赞同：0
> 
> 时间：2012-09-10T08:42:50.790
> 
> 标签：xml, xslt, xpath, transform, xproc

我只想通过 XProc 执行我的转换，而不是使用批处理/shell 脚本。

我的转换过程是输入和输出文档的简单串联 - 所以转换 1 的输出是转换 2 的输入。转换 2 的输出是转换 3 的输入，依此类推。

此代码描述了一个示例转换：

```
<p:xslt name="Transformation1">
    <p:input port="source">
        <p:document href="input.xml"/>
    </p:input>
    <p:input port="stylesheet">
        <p:document href="trans1.xsl"/>
    </p:input>
    <p:input port="parameters">
        <p:empty/>
    </p:input>
</p:xslt>

<p:store href="output1.xml"/> 

<p:xslt name="Transformation2">
    <p:input port="source">
        <p:pipe step="Transformation1" port="result"/>
    </p:input>
    <p:input port="stylesheet">
        <p:document href="trans2.xsl"/>
    </p:input>
    <p:input port="parameters">
        <p:empty/>
    </p:input>
</p:xslt>

<p:store href="output2.xml"/> 
```

它起作用了，另外我得到了所有临时结果文档来仔细检查每个 XSLT 脚本的功能。处理复杂的多重转换会减慢速度——因为 XProc 脚本总是从头开始。但我只想在转换 4 处修复一些东西。通常（使用批处理/shell）我只是删除转换 4 的输出，修复 XSLT 脚本并代表 if-test 跳过所有先前的转换（例如，如果 output3.xml 存在转到转换4）。如何在 XProc 脚本中执行此操作？

XPath 模式是：`not(doc-available(‘output1.xml’))`- 与 xsl 结合使用：如果它在 XSLT 中工作。我尝试使用 ap:choose - 但我没有 p:otherwise 的输出管道，并且该过程总是失败。所以我猜使用 p:choose 不会提出所需的解决方案？

有任何想法吗？

亲切的问候奥利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:21:01.423

这有点尴尬，因为您想跳过第一个 xslt，但确实需要掌握它的输出。这样做的唯一方法是显式读取 output1.xml 以防它存在。你可以或多或少地这样做：

```
<p:choose name="Transformation1">
    <p:when test="doc-available('output1.xml')">
        <p:output port="result">
            <p:pipe step="Transformation1-a" port="result"/>
        </p:output>
        <p:identity name="Transformation1-a">
            <p:input port="source">
                <p:document href="output1.xml"/>
            </p:input>
        </p:identity>
    </p:when>
    <p:otherwise>
        <p:output port="result">
            <p:pipe step="Transformation1-b" port="result"/>
        </p:output>
        <p:xslt name="Transformation1-b">
            <p:input port="source">
                <p:document href="input.xml"/>
            </p:input>
            <p:input port="stylesheet">
                <p:document href="trans1.xsl"/>
            </p:input>
            <p:input port="parameters">
                <p:empty/>
            </p:input>
        </p:xslt>

        <p:store href="output1.xml"/> 
    </p:otherwise>
</p:choose>

<p:xslt name="Transformation2">
    <p:input port="source">
        <p:pipe step="Transformation1" port="result"/>
    </p:input>
    <p:input port="stylesheet">
        <p:document href="trans2.xsl"/>
    </p:input>
    <p:input port="parameters">
        <p:empty/>
    </p:input>
</p:xslt>

<p:store href="output2.xml"/> 
```

！

# c# - 由 Windows 服务托管的 .net WCF 使用情况

> ID：12348066
> 
> 赞同：0
> 
> 时间：2012-09-10T08:42:50.790
> 
> 标签：c#, wcf, windows-services

我对应用程序之间的通信比较陌生，我的目标是拥有一个 Windows 服务和一个管理应用程序，我可以在其中告诉服务要做什么，运行哪些方法（远程函数调用）。我偶然发现了“远程处理”，但很多人都说这种技术已被弃用，最好切换到称为 WCF 的东西。

通过这个，我根据这个 MSDN 文档构建我的服务：http: [//msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

我可以安装服务，运行它，关闭它。但是我如何与之交互呢？“WCF 客户端”应用程序的外观如何？似乎 WCF 与远程处理完全不同，没有服务器-客户端接口，没有编组对象。我有点困惑，希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:57:07.070

您需要一个 Proxy/ChannelFactory 供客户端与您的 WCF 服务进行交互。
在客户端，您需要一个 App.config/Web.config，您需要在其中配置客户端必须寻找服务的端点。
您也可以以编程方式执行此操作。只需了解 WCF 的基础知识，它比您想象的要容易。:)
[http://msdn.microsoft.com/en-us/library/ms731067.aspx](http://msdn.microsoft.com/en-us/library/ms731067.aspx)

# java - java数字超过long.max_value - 如何检测？

> ID：12348067
> 
> 赞同：8
> 
> 时间：2012-09-10T08:42:54.073
> 
> 标签：java, numbers

我在检测两个数字的和/乘是否超过长整数的最大值时遇到问题。
示例代码：

```
long a = 2 * Long.MAX_VALUE;
System.out.println("long.max * smth > long.max... or is it? a=" + a); 
```

这给了我`-2`，虽然我希望它会抛出一个`NumberFormatException`......

有没有一种简单的方法来完成这项工作？因为我有一些代码在嵌套的 IF 块中进行乘法运算或在循环中进行加法运算，我不想在每个 IF 或循环内添加更多的 IF。

编辑：哦，好吧，似乎另一个问题的答案最适合我的需要：[https](https://stackoverflow.com/a/9057367/540394)
: //stackoverflow.com/a/9057367/540394 我不想装箱/拆箱，因为它增加了不必要的开销，而且这条路很短，这对我来说是一个巨大的优势。我将编写两个简短的函数来进行这些检查并返回最小或最大长度。

Edit2：根据我上面链接的答案，这是将 long 限制为其最小值/最大值的函数：

```
/**
 * @param a : one of the two numbers added/multiplied
 * @param b : the other of the two numbers
 * @param c : the result of the addition/multiplication
 * @return the minimum or maximum value of a long integer if addition/multiplication of a and b is less than Long.MIN_VALUE or more than Long.MAX_VALUE
 */
public static long limitLong(long a, long b, long c)
{
    return (((a > 0) && (b > 0) && (c <= 0))
        ? Long.MAX_VALUE
        : (((a < 0) && (b < 0) && (c >= 0)) ? Long.MIN_VALUE : c));
} 
```

如果您认为这是错误的，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T08:50:03.553

超过 long 的最大值不会引发异常，而是会返回。如果你这样做：

`Long.MAX_VALUE + 1`

你会注意到结果等同于`Long.MIN_VALUE`

如果您希望它抛出异常，请检查它是否达到最大值并抛出异常

[编辑]

您还可以使用[Guava](http://code.google.com/p/guava-libraries/) Library 检查两个 long 相加时是否溢出；

```
long c = LongMath.checkedAdd(a, b); 
```

这会在发生溢出时引发异常。

[你可以在这里](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/math/LongMath.html)找到 javadoc

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T08:46:24.287

如果你不能确定结果会小于 9 万亿，我会使用`double`or `BigInteger`Getting an error 对你没有多大帮助，因为你仍然需要知道该怎么做。

更好的是，通过验证输入以确保它们在范围内并且结果的范围大于`long`使用可以处理此问题的类型，您首先不会遇到错误。

使用 BigInteger，您可以做到

```
BigInteger a = BigInteger.valueOf(2).multiply(BigInteger.valueOf(Long.MAX_VALUE));
long l = a.longValue();
if (a.compareTo(BigInteger.valueOf(l)) == 0) {
    // ok
} else {
    // error
} 
```

使用 double 你可以做到

```
double d = 2.0 * Long.MAX_VALUE;
long l = (long) Math.max(Long.MIN_VALUE, Math.min(Long.MAX_VALUE, d));
// or as a helper method.
long l = boundedCast(d); 
```

注意：使用`double`而不是 long 可能会导致一些精度损失。

我宁愿首先避免需要错误块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:53:15.130

`Long`超出的值`MAX_VALUE`不会引发任何异常。您需要手动检查和处理此类情况。

尽管@PeterLawrey 建议您应该考虑使用`double`and `BigInteger`。

# javascript - AJAX 更新面板不起作用。请帮我找出我错在哪里......？

> ID：12348072
> 
> 赞同：0
> 
> 时间：2012-09-10T08:43:24.310
> 
> 标签：javascript, asp.net, ajax, gridview, updatepanel

--------------Gridviews DataBound 事件 -----

```
protected void grdShowCallingList_DataBound(object sender, EventArgs e)
{
    if (grdShowCallingList.Rows.Count > 0)
    {
      foreach (GridViewRow row in grdShowCallingList.Rows)
        {
           LinkButton lnkCallHistorySummary = (LinkButton)row.FindControl("lnkCallHistorySummary");
            lnkCallHistorySummary.OnClientClick = "return getCallHistroySummary('" + lblPersonID.Text + "','" + lblDomainID.Text + "');";
        }
    }
} 
```

-------------Javascript 事件调用触发器------

```
function getCallHistroySummary(PID,DID)
{
document.getElementById("ctl00_cphContent_hfCHS").value = PID + "|" + DID;
document.getElementById("ctl00_cphContent_btnTrgCHS1").click();
return false;

}
function btnTrgCHS1Click() {
document.getElementById("ctl00_cphContent_btnTrgCHS_server").click();
return false;
} 
```

-------------要触发的按钮-------------

```
//------------Modal Popup Starts-------------
<div ID="pnlCallSumHistory" runat="server"  style="overflow: scroll; width: 710px; height: 400px;">
<asp:Button ID="btnTrgCHS_server" runat="server" OnClick="btnTrgCHS_Click" style="display:none;" />

<asp:UpdatePanel ID="updatePnlCallHistory" runat="server">
<ContentTemplate>
<asp:Literal ID="ltrCallHistory" runat="server"></asp:Literal>

</ContentTemplate>
<Triggers >
<asp:AsyncPostBackTrigger ControlID="btnTrgCHS_server" EventName="Click" />
</Triggers>
</asp:UpdatePanel>

</div>
//------------Modal Popup Panel Ends-------------
<asp:Button ID="btnTrgCHS1" runat="server"  style="display:none;"         onclientclick="btnTrgCHS1Click();"  /> 
```

我无法触发与**btnTrgCHS_server** *点击*事件相关的触发事件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:36:05.280

如果是这种情况，您需要使用 JavaScript 中的 __doPostback() 手动触发回发。

然后在 Page_Load() 中找到回发的元素。如果按钮的 ID 是您要查找的 ID，则使用空参数调用事件。这应该可以解决您的问题。

```
btnTrgCHS1Click(null,null) 
```

并且事件应该是 OnClick 而不是 onClientClick()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:58:09.093

看起来您`btnTrgCHS_server`是嵌套在 a 中的控件`GridView`它没有触发的原因是因为`UpdatePanel`将在页面上执行 a`FindControl()`来查找`btnTrgCHS_server`。该`FindControl()`方法不会查看嵌套控件。

最简单的做法是将另一个包裹`UpdatePanel`如下`GridView`：

```
 <asp:UpdatePanel ID="updPanelGridView" ChildrenAsTriggers="true" UpdateMode="Conditional" runat="server">
    <ContentTemplate>
      <asp:GridView ID="gvTest" runat="server" />
    </ContentTemplate>
  </asp:UpdatePanel>

  <%-- other code etc --%>

  <asp:UpdatePanel ID="updatePnlCallHistory" UpdateMode="Always" runat="server">
    <ContentTemplate>
      <asp:Literal ID="ltrCallHistory" runat="server"></asp:Literal>
    </ContentTemplate>
  </asp:UpdatePanel> 
```

`ChildrenAsTriggers`将意味着面板内的任何表单提交都会导致 AJAX 回发。

需要在您周围的上设置`UpdateMode`of ，以便在触发 AJAX 回发时更新。`Always``UpdatePanel``Literal``updPanelGridView`

唯一要记住的是，这将*始终*更新`updPanelGridView`。

我也不确定您的 中到底是什么`GridView`，因此它可能会导致冲突。

如果发生这种情况，您可以尝试将 Button 包装在`GridView`in 中`UpdatePanel`- 这可能会减少问题

注意 - 这也很可能会导致 ID`btnTrgCHS1`更改，因此您可能需要将调用`click()`事件的 JavaScript 更新为新 ID。

**编辑**

通过查看有关其他答案的更新问题/讨论，我想我知道问题所在。你需要修改两件事：

1 - 更改部分`ControlID`中`Triggers`的指向按钮本身 - 而不是您要调用的服务器方法。

IE

```
<Triggers >
<asp:AsyncPostBackTrigger ControlID="btnTrgCHS" EventName="Click" />
</Triggers> 
```

2 - 更改按钮以包含`OnClick`- 您尚未定义单击按钮时应调用的服务器端方法。这意味着 AJAX 在回发时不知道使用哪种方法。

IE

```
<asp:Button ID="btnTrgCHS1" OnClick="btnTrgCHS1_server" runat="server"  style="display:none;"         onclientclick="btnTrgCHS1Click();"  /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:20:27.767

不要对动态生成的 ID 进行硬编码。这些将随着您添加容器控件而改变。

改为使用[ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)属性来获取由 asp.net 生成的客户端 ID。

```
function getCallHistroySummary(PID,DID){
  document.getElementById("<%=hfCHS.ClientID%>").value = PID + "|" + DID;
  document.getElementById("<%=btnTrgCHS_server.ClientID%>").click();
  return false;
} 
```

您的 ClientID 似乎确实是错误的。更正它们并检查

# android - 它在Android中是什么样的语法？

> ID：12348074
> 
> 赞同：-2
> 
> 时间：2012-09-10T08:43:28.747
> 
> 标签：android

```
Dialog dialog = new AlertDialog.Builder(Activity01.this)
                .setTitle("Login hint")
                .setMessage("Here needs your login!")
                .setPositiveButton(...)
                .setNeutralButton(...
                ).create(); 
```

它是什么样的语法？我不明白为什么那些点是一个接一个？是`create()`for`Builder()`还是 for `setNeutralButton()`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:46:47.860

`Builder`是 的静态内部类`AlertDialog`。每个调用都返回`this`允许您链接方法。最后你调用`create()`来创建实际的对话框。这是基本的 Java，与 Android 几乎没有关系，除了 Android 大量使用这种模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:47:53.837

`setTitle`,`setMessage`是对话框的方法。

你也可以写

```
Dialog dialog = new AlertDialog.Builder(Activity01.this);
dialog.setTitle("Login hint")
dialog.setMessage("Here needs your login!")
dialog.setPositiveButton(...)
dialog.setNeutralButton(...)
dialog .create(); 
```

如果您想对此进行更多说明，可以访问[此](http://developer.android.com/reference/android/app/AlertDialog.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:50:06.473

.setPositiveButton(...) 是指您想要将文本传递给显示并编写点击事件的逻辑。

[参考这里：](http://developer.android.com/guide/topics/ui/dialogs.html#AddingButtons)

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Are you sure you want to exit?")
       .setCancelable(false)
       .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                MyActivity.this.finish();
           }
       })
       .setNegativeButton("No", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
           }
       });
AlertDialog alert = builder.create(); 
```

# hadoop - Oozie 协调器应用程序在开始和结束时间的差异超过一小时的情况下无法工作

> ID：12348080
> 
> 赞同：1
> 
> 时间：2012-09-10T08:44:01.777
> 
> 标签：hadoop, oozie

我的 oozie 协调器应用程序出现问题。
案例 1：
For -
**start** = "2012-09-07 13:00Z" **end** ="2012-09-07 16:00Z" **frequency** ="coord:hour(1)"
动作数：1（预期为 3）
名义时间 -
1) 2012-09-07 13:00Z (预计还有两个。2012-09-07 14:00Z,2012-09-07 15:00Z)
案例 2 :
For -
**start** = "2012-09-07 13 :00Z" **end** ="2012-09-07 16:00Z" **frequency** = "coord:minutes(10)"
动作次数：6（预计为 18）
标称时间：
1）2012-09-07 13:00Z
2） 2012-09-07 13:10Z
3) 2012-09-07 13:20Z
4) 2012-09-07 13:
5) 2012-09-07 13:40Z
6) 2012-09-07 13:50Z (预计还有 12 个。2012-09-07 14:00Z,2012-09-07 14:10Z 等等..)。

基于观察的概括：从**coord:minutes(1)**到**coord:minutes(59)**
的 任何频率，标称时间都可以完美计算，但只能到一小时。 如果我在这里遗漏任何东西，请提出建议。使用 oozie 2.0，尝试使用可以正常工作的基本协调器应用程序：**start** = "2012-09-07 13:00Z" **end** = "2012-09-07 13:30Z" **frequency** = "coord:minutes(10 )"

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:07:44.817

6个动作是否成功完成？在调用 1 个新操作之前，Oozie 协调器将检查 3 个条件：1) 数据依赖性 2) 频率 3) 并发限制。这 3 个条件中的任何一个都可能会阻止该操作的开始。如果您能向我们展示协调员的 xml 文件，将会很有帮助。******

# vhdl - VHDL 4 位乘法器：use_dsp48 和门控时钟

> ID：12348081
> 
> 赞同：1
> 
> 时间：2012-09-10T08:44:03.087
> 
> 标签：vhdl

任务是制作一个使用 FSM 的 4 位乘法器。步骤是 1) 乘 2) 移位 3) 加。

> ```
>  1011   (this is 11 in binary)
>  x 1110   (this is 14 in binary)
>  ======
>    0000   (this is 1011 x 0)
>   1011    (this is 1011 x 1, shifted 1 position to the left)
>  1011     (this is 1011 x 1, shifted 2 positions to the left)
> 1011      (this is 1011 x 1, shifted three positions to the left)
> ====== 
> ```
> 
> 10011010（这是二进制的 154）

[http://en.wikipedia.org/wiki/Binary_multiplier](http://en.wikipedia.org/wiki/Binary_multiplier)

这是我的代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

entity test is
    Port ( CLK : in  STD_LOGIC;
       RESET : in  STD_LOGIC;
       Input : in  STD_LOGIC_VECTOR (3 downto 0);
       Confirm : in  STD_LOGIC;
       Output : out  STD_LOGIC_VECTOR (7 downto 0));
end test;

architecture Behavioral of test is

type state is (R,S0,S1,S2,S3,S4);
signal pstate, nstate: state;
signal A_sig, B_sig: STD_LOGIC_VECTOR(3 downto 0);

begin
process(pstate,Confirm,Input)
variable temp_var: STD_LOGIC_VECTOR(3 downto 0);
variable tempMult_var,tempProd_var: STD_LOGIC_VECTOR(7 downto 0);
begin
    case pstate is
        when R =>
            nstate <= S0;
            tempMult_var := (others => '0');
            tempProd_var := (others => '0');

            A_sig <= (others => '0');
            B_sig <= (others => '0');

            Output <= (others => '0');
        when S0 =>
            nstate <= S0;

            if (Confirm = '1') then
                A_sig <= Input;
                nstate <= S1;
            end if;
        when S1 =>
            nstate <= S1;

            if (Confirm = '0') then
                nstate <= S2;
            end if;
        when S2 =>
            nstate <= S2;

            if (Confirm = '1') then
                B_sig <= Input;
                nstate <= S3;
            end if;
        when S3 =>
            nstate <= S3;

            if (Confirm = '0') then
                nstate <= S4;
            end if;
        when S4 =>
            nstate <= S0;

            for x in 0 to 3 loop
                temp_var := (A_sig AND (B_sig(x)&B_sig(x)&B_sig(x)&B_sig(x) ) );
                tempMult_var := "0000" & temp_var;
                if (x=0) then tempMult_var := tempMult_var;
                    elsif (x=1) then tempMult_var := tempMult_var(6 downto 0)&"0";
                    elsif (x=2) then tempMult_var := tempMult_var(5 downto 0)&"00";
                    elsif (x=3) then tempMult_var := tempMult_var(4 downto 0)&"000";        
                end if;
                tempProd_var := tempProd_var + tempMult_var;
            end loop;

            Output <= tempProd_var;
            tempProd_var := (others => '0');
    end case;
end process;

process(CLK,RESET)
begin
    if RESET = '1' then
        pstate <= R;
    elsif rising_edge(CLK) then
        pstate <= nstate;
    end if;
end process;
end Behavioral; 
```

这是警告

```
after "Synthesize - XST"
WARNING:Xst - Property "use_dsp48" is not applicable for this technology.
WARNING:Xst:737 - Found 4-bit latch for signal <B_sig>.
WARNING:Xst:737 - Found 8-bit latch for signal <Output>.
WARNING:Xst:737 - Found 4-bit latch for signal <A_sig>.

after "Implement Design"
WARNING:Route:447 - CLK Net:A_sig_not0001 may have excessive skew because 
WARNING:Route:447 - CLK Net:B_sig_not0001 may have excessive skew because 

after "Generate Programming File"
WARNING:PhysDesignRules:372 - Gated clock. Clock net A_sig_not0001 is sourced by
WARNING:PhysDesignRules:372 - Gated clock. Clock net B_sig_not0001 is sourced by
WARNING:PhysDesignRules:372 - Gated clock. Clock net Output_or0000 is sourced by 
```

模拟是正确的，但实际电路板没有正确的输出。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:58:26.990

我的谦虚建议：

> 将您的两个进程组合​​成一个时钟进程。

这样，您就可以避免一整类异步逻辑错误，这些错误对于初学者来说很容易造成痛苦的追查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:00:13.960

此外，每当您看到有关锁存器或门控时钟的警告时，请重新访问您的代码 - 两者都清楚地表明某些事情很可能是错误的。

锁存器通常来自组合过程，其中仅在某些情况下分配信号。例如`A_sig`，在 S0 中没有分配，如果`confirm = 0`，则将导致推断出一个锁存器。在这种情况下，只要确保`A_sig`始终设置为某个值，无论控制信号值的组合如何。

在这种情况下，门控时钟可能来自您相当复杂的组合过程，但主要来自为同步过程提供时钟的逻辑生成的信号。这可能会导致各种问题（高 FPGA 时钟线使用率和时序/路由问题），特别是如果您不知道您正在创建额外的时钟域。这可以通过在主（全局或本地）系统时钟上运行有问题的进程并在必要时使用时钟启用来缩小它来避免。

# c# - 将 WCF 服务从 WSDualHHTP 更改为 NETTCP 错误

> ID：12348082
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:05.043
> 
> 标签：c#, wcf, binding

我有一个 WCF 服务设置为 WSduallHTTP，使用它一切正常。我遇到的问题是我需要能够让服务作为非管理员程序运行。我知道我可以设置 WCF 服务，以便管理员只需授予该服务能够在某个端口范围上运行的权限，但如果我可以完全摆脱对管理员的需求，那就更好了。

因此，我读到 NETTCP 绑定既支持双工，也不需要管理员权限来托管服务。我的第一个问题是这是正确的吗？

此外，当我将 WSDualHTTP 绑定更改为 NETTCP 绑定时，我收到以下错误。

```
Could not find a base address that matches scheme net.tcp for the endpoint with binding NetTcpBinding. Registered base address schemes are [http]. 
```

这是失败的代码：

```
string WCFHost = string.Format(WCF_URL, MainConfiguration.WCFCommunicationsURL,
                MainConfiguration.WCFCommunicationsPort);

                this.serviceHost = new ServiceHost(typeof(GX3WCFServerService), new Uri(WCFHost));
                NetTcpBinding binding = new NetTcpBinding();
                binding.ReaderQuotas.MaxStringContentLength = int.MaxValue;
                this.serviceHost.AddServiceEndpoint(typeof(IGX3WCFServerService), binding, "");
                //the line above it the one throwing the exception 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:50:58.640

找出了问题所在。我的 WCFHost 字符串以 HTTP:\ 而不是 NET.TCP:\ ​​开头

# hibernate - 应用 resultTransformer 后检索属性中具有 null 的对象列表

> ID：12348088
> 
> 赞同：1
> 
> 时间：2012-09-10T08:44:20.790
> 
> 标签：hibernate

在条件查询中，我以正确的方式获得了结果列表。

因为我不想引入实体投影中的所有字段来指定这些字段。好的，投影工作正常，但不是实体列表，而是获取对象列表。

当我阅读时，我需要申请`setResultTransformer(ClassName.class)`。应用 resultTransformer 时，将检索类名列表，但对象的所有属性均为 NULL。我尝试了 resultTransformer 的不同参数，并且总是得到一个所有属性都为 null 的对象列表。

例如。：

```
criteria.setProjection(proList)
   .setResultTransformer( 
       new AliasToBeanResultTransformer(TramiteTrafico.class)); 
```

如果未应用 resultTransformer，则获取值是正确的。知道为什么吗？

谢谢大家！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:18:49.980

您需要使类的属性名称与投影列表中使用的别名匹配。

清单之类的东西

```
class CatVO {
  String getCatName()  { ..}
  void setCatName(String catName) {..}
  String getKitName()  { ..}
  void setKitName(String kitName) {..}
}

List results = session.createCriteria(Domestic.class, "cat")
    .createAlias("kittens", "kit")
    .setProjection( Projections.projectionList()
        .add( Projections.property("cat.name"), "catName" )
        .add( Projections.property("kit.name"), "kitName" )
    ).setResultTransformer( 
       new AliasToBeanResultTransformer(CatVO.class))
     .list(); 
```

# c# - 递归 InvokeOnMainThread 块

> ID：12348091
> 
> 赞同：1
> 
> 时间：2012-09-10T08:44:27.580
> 
> 标签：c#, delegates, xamarin.ios

我想知道处理递归调用 (Begin)InvokeOnMainThread 调用的情况的推荐方法是什么。

场景是这样的......我有一个 UI 按钮按下启动下载，下载启动音频播放，音频播放更改 UI。

代码看起来像这样：

```
void ButtonPressHandler(object sender, EventArgs args)
{
    BeginInvokeOnMainThread(()=> {
    StartDownload(CompletionHandler);
 });
}

void CompletionHandler()
{
 BeginInvokeOnMainThread(()=> {
    StartPlayback(PlaybackFinished);
 });
}

void PlaybackFinished()
{
 BeginInvokeOnMainThread(()=> {
    UpdateUI();
 });
} 
```

处理这种情况的推荐方法是什么？我的用户界面没有更新。我尝试了 BeginInvokeOnMainThread 和 InvokeOnMainThread。会不会出现死锁情况？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:10:30.353

这可能不是“递归” BeginOnMainThread 调用的问题，而是其他问题。以下是一些检查提示：

*   UpdateUI 真的被调用了吗？
*   如果您为流程中的每个步骤调用 UpdateUI，会发生什么？它在哪里停止工作？
*   如果您从 ButtonPressHandler 调用 UpdateUI，它是否真的有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:37:59.440

我能够让它工作。在下载完成时，我使用了 tableview 的 row.GetActiveCell 来更新 UI。与即使我执行 SetNeedsDisplay 也没有更改 UI 的 GetCell 相比，这似乎有效。不知道有什么区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T18:50:53.777

InvokeOnMainThread 将暂停线程的执行，并等待委托在主线程上执行。完成后，线程恢复执行。BeginInvokeOnMainThread 没有。

你有没有尝试过这样的事情？

```
void ButtonPressHandler(object sender, EventArgs args)
{
    if (NSThread.Current.IsMainThread)
        StartDownload(CompletionHandler);
    else
        BeginInvokeOnMainThread(() => StartDownload(CompletionHandler););        
} 
```

...等等其他方法。

# python - 如何在 django 中指定 python 标准库对象实例的全局 render() 方法

> ID：12348092
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:29.620
> 
> 标签：python, django, datetime, render

我想以某种方式呈现django 应用程序中**所有**`datetime`模板中的所有对象，使用可能一直传递给模板的所有日期时间对象的通用代码。

 **无需过多介绍细节，请注意**以下*不是*可行的选项。**：

*   在模板中使用过滤器或自定义模板标签
*   子类化日期时间
*   设置`DATETIME_FORMAT`为一个神奇的值
*   使用自定义时区和一些 TimeZoneMiddlWare

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:58:41.053

创建您自己的日期时间类并在应用程序设置的早期对日期时间模块进行猴子补丁。（也许您也需要对所有导入的模块进行修补，这取决于您可以多早执行此操作

```
 import datetime

 class mydatetime(object):
     ...
     def render(self):
         ...

 datetime.datetime = mydatetime 
```

如果您确定将 datetime 对象子类化会更容易，但您不必这样做。**

# java - 使用 HTTP POST 时获取连接超时

> ID：12348094
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:32.320
> 
> 标签：java

我正在尝试从我的 Java 客户端代码对 URL 进行 HTTP POST。它是一个标准的普通独立 java 类但我反复收到以下错误。我在网上搜索但找不到任何合适的解决方案。我已经提供了以下所有信息。

下面是我得到的错误。

```
PostMethod filePost = new PostMethod(targetURL); 

filePost.getParams().setBooleanParameter(HttpMethodParams.USE_EXPECT_CONTINUE, false);

Part[] parts = {new FilePart(targetFile.getName(), targetFile)};

filePost.setRequestEntity(new MultipartRequestEntity(parts, filePost.getParams()));

HttpClient client = new HttpClient(); 

client.getHttpConnectionManager().getParams().setConnectionTimeout(8000); 

int status = client.executeMethod(filePost) 
```

java.net.SocketException：连接重置

```
 at java.net.SocketInputStream.read(SocketInputStream.java:185)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) 
```

您能否请教代码有什么问题以及为什么我每次都遇到此连接超时。它非常严重地影响了我的工作，所以你们能帮我找到解决这个问题的方法吗？

感谢 Vikeng21

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:49:45.800

当您没有正确配置服务器（协议/IP/端口）时，通常会出现超时。你能从浏览器发出请求吗？有防火墙问题吗？

# mysql - mysql sql错误#1064

> ID：12348096
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:39.887
> 
> 标签：mysql, sql, triggers

> 检查与您的 MySQL 服务器版本相对应的手册，以获取在附近使用的正确语法：`'SELECT count(*) FROM capacity WHERE server=NEW.server AND feed'`在第 2 行

我的代码：

```
DROP TRIGGER IF EXISTS newsmonitoringrawdata.TNTInsertionTrigger;

CREATE TRIGGER TgtInsertionTrigger BEFORE INSERT ON tnews
  FOR EACH ROW BEGIN
SET @isRecordCreated = 
 SELECT count(*) FROM capacity
 WHERE
 server=NEW.server
 AND
 feed=NEW.Feed 
 AND 
 date_Format(streamdt,'%Y-%m-%d %H:%i')=date_Format(NEW.StreamDT,'%Y-%m-%d %H:%i');

 IF @isRecordCreated>0 THEN 
    UPDATE capacity 
    SET MsgNumber=MsgNumber+1, 
    size=size+NEW.MSize
    WHERE 
    server=NEW.server
    AND
     feed=NEW.feed
    and
     date_Format(streamdt,'%Y-%m-%d %H:%i')=date_Format(NEW.StreamDT,'%Y-%m-%d %H:%i');
 ELSE 
    INSERT INTO capacity(server, feed, streamdt, msgNumber, size) 
    VALUES
    (
        NEW.server,
        NEW.feed,
        date_Format(NEW.StreamDT,'%Y-%m-%d %H:%i:00'),
        1,
        NEW.size
    );  
 END IF; 

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:47:57.043

```
SET @isRecordCreated = (
SELECT count(*) FROM capacity
WHERE
server=NEW.server
AND
feed=NEW.Feed 
AND 
date_Format(streamdt,'%Y-%m-%d %H:%i')=date_Format(NEW.StreamDT,'%Y-%m-%d %H:%i')
); 
```

您必须`()`在查询周围添加括号。

# objective-c - 为什么在这种情况下 po 和 NSLog 的结果不一样？

> ID：12348099
> 
> 赞同：-4
> 
> 时间：2012-09-10T08:44:43.663
> 
> 标签：objective-c, ios, xcode, debugging

我在我的代码中插入了 NSLog() 调用，如下所示：

```
NSLog(@"error message = %@", strError); 
```

我期望打印结果如下：

```
error message = abcdefg 
```

但 NSLog() 打印这个：

```
error message = abcd 
```

它被修剪了。这似乎不对，所以我在调试控制台中输入了以下命令：

```
po strError 
```

结果与预期一致：

```
abcdefg 
```

为什么我不能从 NSLog() 和`po`这里得到相同的结果？我希望打印完整的字符串，例如 for `po`，但我的程序使用 NSLog() 并输出截断的字符串。

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-10T08:56:45.663

来自[技术说明 TN2124](https://developer.apple.com/library/mac/#technotes/tn2124/_index.html)

> print-object(PO)实际上调用了指定对象的debugDescription方法。NSObject 通过调用 description 方法来实现这个方法。因此，默认情况下，对象的调试描述与其描述相同。

`NSLog`调用`description`方法并`print-object(PO)`调用`debugDescription`方法。两者都是一样的。

# sql - Ms Sql 重复行

> ID：12348100
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:43.853
> 
> 标签：sql, sql-server, tsql

[http://postimage.org/delete/pwnan1ud4/](http://postimage.org/delete/pwnan1ud4/)

上面链接的图片中有重复的行**（列名称：aracId）**。如何修改唯一行的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:50:51.807

由于您的图像不可见，请尝试添加`DISTINCT`您的`SELECT`子句。例子，

```
SELECT DISTINCT *
FROM tableName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:51:05.253

尝试这个 ：

```
With Cte as 
(
Select row_number() over (partition by arac.aracID order by arac.aracID ) as row
-- other columns
left join ...
Where .... and 
tip.tipadi in ('Kamyon','Kamyonet','Tir')
)
Select cte.aracID, cte.Model, ..........
from cte where cte.row=1 
```

# php - 带有印地语字体数据的数组要在 php 中转换为 json

> ID：12348101
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:43.613
> 
> 标签：php, json

我使用 utf8_bin 在我的数据库中存储了印地语字体数据。我能够从数据库中获取它并在使用时显示它：

但是，我希望输出为 json 格式，清楚地显示印地语字体数据。我尝试使用 json_encode 但它返回的数据类似于：

{"标题":"\u0938\u0942\u0930\u094d\u092f\u094b\u0926\u092f","详细信息":"\u0938\u0941\u092c\u0939\u094d \u0915\u093e \u0938\u092e\u092f\ u094d"}1 {"标题":"\u0905\u0928\u094d\u0917\u094d\u0930\u0947\u095b\u0940 \u0938\u0947 \u0939\u093f\u0928\u094d\u0926\u0940","详情": "\u092a\u0930\u093f\u0935\u0930\u094d\u0924\u0928\u094d"}2 {"标题":"\u0932\u094b\u0915\u094d \u0938\u092d\u093e","详细信息":"\ "

相反，我希望它像

{“标题”：सूर्योदय，“详细信息”：सुबह् का समय्}

请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:50:50.940

这是我认为的默认行为。但是有两件事你可以尝试

1.  如果您使用的是 PHP 5.4，您可以设置 JSON_UNESCAPED_UNICODE 选项标志。
2.  如果您使用的是其他版本，请尝试以下解决方法：

    ```
    array_walk_recursive($array, function(&$item, $key) {
        if(is_string($item)) {
            $item = htmlentities($item);
        }
    });
    $json = json_encode($array);
    $rson = html_entity_decode($rson); 
    ```

# sql-server-2008 - Sql 查询抛出错误

> ID：12348102
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:51.413
> 
> 标签：sql-server-2008, tsql

```
SELECT pmc.[month]                                    AS 'Month',
       pmc.pd_name_of_project                         AS 'Name of Project',
       tbl_div.name                                   AS 'Name of Advisory Services Division',
       TBL_PMC_UNIT.UNIT_NAME                         AS 'Name of Unit',
       pmc.staff_engineers,
       pmc.staff_clerical,
       pmc.staff_peons,
       pmc.pd_project_type                            AS 'Project Type',
       pmc.accepted_tender_cost                       AS 'Accepted Tender Cost',
       pmc.work_order_date                            AS 'Work Order Date',
       pmc.tender_period_months                       AS 'Tender Period',
       pmc.project_completion_date                    AS 'Project Completion Date',
       pmc.per_pmc_charges                            AS '% Of PMC Charges',
       pmc.total_pmc_charges_scheme                   AS 'Total PMC amount   of the Scheme',
       pmc.bill_amount_certified_upto_previous_month  AS 'Bill amount certified upto previous Month',
       pmc.total_PMC_charges_upto_previous_month      AS 'Total PMC charges  upto previous Month',
       pmc.receipt_PMC_charges_upto_previous_month    AS 'Receipt of PMC Charges upto previous Month',
       pmc.balance_of_PMC_charges_upto_previous_month AS 'Balance of PMC charges upto previous Month',
       pmc.bill_amount_certified_current_month        AS 'Bill amount certified During Current Month',
       pmc.PMC_charges_for_current_month              AS ' PMC charges  During Current Month',
       pmc.receipt_PMC_charges_current_month          AS 'Receipt of PMC Charges During Current Monthh',
       pmc.balance_of_PMC_charges_current_month       AS 'Balance of PMC charges During Current Month',
       SUM(pmc.salary_allowance)                      AS 'Salary Allowance'
FROM   TBL_PMC pmc
       INNER JOIN TBL_DIV
         ON TBL_DIV.ID = pmc.DIV_ID
       LEFT OUTER JOIN TBL_PMC_UNIT
         ON TBL_PMC_UNIT.ID = pmc.UNIT_ID
WHERE  pmc.div_id = 17
GROUP  BY pmc.[month]; 
```

这个查询给了我错误：-

> 列“TBL_PMC.pd_name_of_project”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:48:28.483

您收到该错误的原因是，当您执行 SUM() 函数时，您必须按返回的任何列进行分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:48:42.333

由于`pmc.[month]`是 group by 子句中列出的查询中唯一的列名，因此它是唯一可能出现的列名，而无需在列列表中与聚合函数一起使用。很难说你想用你的查询做什么，从它的外观来看，分组可能不是这个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:08:02.890

使用 GROUP 语句，您可以使用 SELECT 中包含在 GROUP BY 中或具有聚合函数的列。- 正如错误消息所说。

在这种情况下，您可以尝试使用 SUM...OVER (PARTITION BY ...) 子句。检查[MSDN](http://msdn.microsoft.com/en-us/library/ms189461.aspx)。

因此，删除 Group By 行并像这样更改您的总和：

SUM(pmc.salary_allowance) OVER(PARTITION BY pmc.[month])

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:51:34.560

您必须对 select 语句中的所有列使用 MIN()、MAX()、AVG() 之类的聚合函数，除了 pmc.[month] 列，因为它在 group by 操作中使用

您的查询应该是这样的：

```
select pmc.[month] as 'Month',
max(pmc.pd_name_of_project) as 'Name of Project',
max(tbl_div.name) AS 'Name of Advisory Services Division',
max(TBL_PMC_UNIT.UNIT_NAME) AS 'Name of Unit',
.........
.........
SUM(pmc.salary_allowance) as 'Salary Allowance' 
FROM        TBL_PMC pmc 
INNER JOIN  TBL_DIV 
ON          TBL_DIV.ID = pmc.DIV_ID
LEFT OUTER JOIN TBL_PMC_UNIT 
ON          TBL_PMC_UNIT.ID=pmc.UNIT_ID  
WHERE       pmc.div_id= 17 
GROUP by    pmc.[month]; 
```

# ios - NSURLErrorDomain 错误

> ID：12348103
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:55.897
> 
> 标签：ios, cordova

我正在使用 phonegap 构建一个应用程序，并且正在使用 aviary 插件 (www.aviary.com)。当我尝试打开相机拍摄的照片时，aviary 插件关闭并且控制台日志中出现“NSURLErrorDomain error -999”。当我尝试打开 Web URL 文件 (http://...) 时没有出现此问题 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T05:51:18.217

您是否已将所有适当的 URL 列入白名单。

请参阅：[http ://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

# c# - 如何为多台机器中的调度程序锁定读取 sql server

> ID：12348104
> 
> 赞同：0
> 
> 时间：2012-09-10T08:44:55.047
> 
> 标签：c#, sql-server

我有一个调度程序（用 c# 创建）在多台机器上运行，访问一个数据库。桌子上有要做的工作清单。如下所示：

```
ID  JobDetail Flag
1   ---       1
2   ---       0
3   ---       0

Flag: 
0: open, 1: inprogress, 2: completed 
```

我的问题是我应该怎么做才能确保没有调度程序执行相同的工作。

对不起，这个问题应该很笼统，如果有欺骗请给我一个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:02:45.003

尝试这样的事情：

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
GO

DECLARE @CURR_JOBID int;

SELECT @CURR_JOBID=top 1 ID FROM JOB_TABLE WHERE Flag=0 and <other condtions>

BEGIN TRANSACTION

UPDATE JOB_TABLE set Flag=1 where ID=@CURR_JOBID 

COMMIT

SET TRANSACTION ISOLATION LEVEL READ COMMITED;
GO 
```

现在使用@CURR_JOBID 进行进一步处理

作业完成后，将 Flag 更新为 2

# ruby-on-rails - 按此顺序组合 2 个哈希的最佳方法

> ID：12348105
> 
> 赞同：1
> 
> 时间：2012-09-10T08:44:57.653
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我有 2 个哈希 list1 和 list2。键是用户 ID。这是一个例子

```
list1 = { '1' => [item1, item2],
          '2' => [item3]
        }

list2 = { '1' => [item 4],
          '3' => [item 5]
        } 
```

我需要将 2 合为一个列表.. 像这样的东西.. 或任何更好的表示赞赏。基本上，需要将每个用户的 list1 和 list2 项目组合成一个数组，其中第一个项目给我 list1 项目，第二个给我 list2 项目。

```
{ '1' => [[item 1, item 2], [item 4],
  '2' => [[item 3],[]],
  '3' => [[],[item 5]]
} 
```

我能够以老式的方式做到这一点，但想知道是否有最好的方法来做到这一点......想知道我是否可以最小化代码和处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:55:04.593

这个输出呢？

```
{ 
  '1' => [item 1, item 2, item 4],
  '2' => [item 3],
  '3' => [item 5]
} 
```

你可以得到它

```
ret = list1.merge(list2){ |key, old, new| old + new } 
```

# jboss - 使用 Fiddler 为 JBoss (ESB) 调试设置代理

> ID：12348107
> 
> 赞同：3
> 
> 时间：2012-09-10T08:45:02.770
> 
> 标签：jboss, proxy, fiddler, esb

在 Win 7 Professional 上安装 JBoss ESB 4.10 运行 JBoss 5.1.0GA。我想通过代理（Fiddler）从 ESB（org.jboss.soa.esb.actions.soap.SOAPClient）路由（SOAP）请求。

我尝试了以下设置，但在 Fiddler 中没有看到任何请求：

在 run.conf.bat 中：

```
set "JAVA_OPTS=%JAVA_OPTS% -Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=8888
 -Dhtttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=8888 -DproxySet=true 
```

在属性-service.xml 中：

```
<mbean code="org.jboss.varia.property.SystemPropertiesService" 
name="jboss:type=Service,name=SystemProperties">

<attribute name="Properties">
  http.proxyHost=127.0.0.1
  http.proxyPort=8888
  htttps.proxyHost=127.0.0.1
  https.proxyPort=8888
  proxySet=true
</attribute>

</mbean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-23T15:05:55.893

你可以`-Dhttp.proxyHost=localhost -Dhtttps.proxyHost=localhost`改用。

# .net - .Net 中的程序集版本检查

> ID：12348109
> 
> 赞同：4
> 
> 时间：2012-09-10T08:45:16.960
> 
> 标签：.net, assemblyversionattribute

我正在尝试完全了解 .NET 中的程序集版本和强名称

我发现[This Assembly Versioning Article](http://philippetruche.wordpress.com/2008/08/12/net-assembly-versioning-lifecycle/)指出只有 Major.Minor.Build 用于版本匹配。我找不到任何可以确认/否认这一点的东西。

> 程序集版本格式...修订版：
> 具有相同名称、主要和次要版本号但不同修订版的程序集旨在完全互换。这适用于修复先前发布的程序集中的安全漏洞。

[MS 文章](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute%28VS.71%29.aspx)说：

> 程序集版本号是程序集标识的一部分，在绑定到程序集和版本策略中起着关键作用……版本检查仅发生在强名称程序集上。

这是否意味着说 1.0.0.0 和 1.0.0.1 在强名称环境中可以互换，但 1.0.1.1 不是？

请问什么是确定的答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:56:11.050

在比较版本时，程序集的`AssemblyVersion`-attribute 正在被完全评估。这意味着更改版本号的一部分将导致不匹配的程序集。

解决此问题的一种方法是让 -`AssemblyVersion`属性始终保持不变，例如设置为`[AssemblyVersion("1.2.3.0")]`并使用- 属性来`AssemblyFileVersion`更改版本，例如修订版，例如`[AssemblyFileVersion("1.2.3.20120909")]`. 这使您可以在不更新所有引用的情况下更新强命名程序集的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:01:22.027

我在链接的文章中没有找到任何内容，说明只有 Major.Minor.Build 用于版本匹配。事实上，一个版本的所有四个组件都被使用了。

关键点是`intended to be interchangeable`。它们*是否*实际上可以互换取决于作者，谁可以自由地尊重或忽略 MS 指南。

安装在 GAC 中的共享程序集的供应商可以提供发布者策略文件以从旧版本的程序集重定向到新版本的程序集。只有当新版本向后兼容旧版本时，他才应该这样做。

# java - 在嵌入式 Tomcat 中运行 Ruby 脚本

> ID：12348114
> 
> 赞同：1
> 
> 时间：2012-09-10T08:45:25.177
> 
> 标签：java, ruby, tomcat, jruby

我有一个嵌入 Tomcat 的 Java Swing 应用程序。嵌入式 Tomcat 以编程方式配置；没有 xml。Tomcat 也使用 Groovy Servlets 进行配置：

```
StandardWrapper gspWrapper = new StandardWrapper();
gspWrapper.setName("groovy");
gspWrapper.setServletName("groovy");
gspWrapper.setServletClass(GroovyServlet.class.getName());
gspWrapper.addInitParameter("fork", "false");
gspWrapper.setLoadOnStartup(2); 
```

我也想要 Ruby 支持（jRuby 1.7）。所以我想以与 Groovy 支持相同的方式配置它：

```
StandardWrapper rubyWrapper = new StandardWrapper();
rubyWrapper.setName("rb");
rubyWrapper.setServletName("rb");
rubyWrapper.setServletClass(JRubyServlet.class.getName());
rubyWrapper.addInitParameter("fork", "false");
rubyWrapper.setLoadOnStartup(2); 
```

我尝试编写 JRubyServlet 类，但我不知道如何执行脚本并将输出写入响应。这是我当前的代码：

```
import java.io.IOException;
import java.util.ArrayList;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.jruby.Ruby;
import org.jruby.javasupport.JavaEmbedUtils;

public class JRubyServlet extends HttpServlet {

    private static final long serialVersionUID = -6913887886084787803L;
    private Ruby ruby;

  @Override public void init(ServletConfig config) throws ServletException {
      super.init(config);
      ruby = JavaEmbedUtils.initialize(new ArrayList<String> ());
  }

  @Override public void destroy() {
      JavaEmbedUtils.terminate(ruby);
      super.destroy();
  }

  @Override protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
      //How do you execute the script here?
  }

  @Override protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
      doGet(req, res);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:21:17.077

这是`JavaEmbedUtils`按照您的示例使用的一种方法。

您可以首先创建一个用 JRuby（在 此处`src/main/ruby/ruby_servlet.rb`）编写的 servlet，例如：

```
require 'java'

java_import 'javax.servlet.http.HttpServlet'

class RubyServlet < HttpServlet
  def init(config)
    puts "Configuring RubyServlet..."
  end

  def service(request, response)
    response.content_type = "text/html"
    out = response.writer

    out.println("Hi from JRuby.")
  end
end 
```

然后你可以使用 your`JRubyServlet`来调用这个 JRuby 脚本：

```
public class JRubyServlet extends HttpServlet {

    private static final long serialVersionUID = -6913887886084787803L;
    private Ruby ruby;
    private Servlet rubyServlet;

  @Override public void init(ServletConfig config) throws ServletException {
      super.init(config);
      // Add location of the script to load path
      ruby = JavaEmbedUtils.initialize(asList("src/main/ruby"));

      // Instantiate ruby servlet, and store it into instance variable rubyServlet
      rubyServlet = (Servlet)JavaEmbedUtils.rubyToJava(ruby.evalScriptlet("require 'ruby_servlet'; RubyServlet.new"));
      rubyServlet.init(config);
  }

  @Override public void destroy() {
      JavaEmbedUtils.terminate(ruby);
      super.destroy();
  }

  @Override protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {

      // Call JRuby servlet's service method!
      rubyServlet.service(req, res);
  }

  @Override protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
      doGet(req, res);
  } 
```

也看看[https://github.com/jruby/jruby/wiki/RedBridge](https://github.com/jruby/jruby/wiki/RedBridge)；使用 JRuby Embed 提供了控制并发模型等的方法。

# .net - 动态方法和函数 代表

> ID：12348116
> 
> 赞同：3
> 
> 时间：2012-09-10T08:45:39.457
> 
> 标签：.net, reflection.emit, dynamicmethod

我有一个看起来像这样的类：

```
public class ClassWithFuncConstructor
{
        public ClassWithFuncConstructor(Func<int> func)
    {

    }
} 
```

现在我想使用`DynamicMethod`该类来发出创建`ClassWithFuncConstructor`类实例所需的代码，如下所示：

```
public void DynamicMethodPrototype()
{   
    var instance = new ClassWithFuncConstructor(() => 42);
} 
```

如果我们看一下为这个原型编译的代码（来自 LinqPad），我们可以看到它创建了另一个方法，它是函数委托的主体，然后将指向该方法的指针作为构造函数参数传递。

```
DynamicMethodPrototype:
IL_0000:  nop         
IL_0001:  ldsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_0006:  brtrue.s    IL_001B
IL_0008:  ldnull      
IL_0009:  ldftn       UserQuery.<DynamicMethodPrototype>b__0
IL_000F:  newobj      System.Func<System.Int32>..ctor
IL_0014:  stsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_0019:  br.s        IL_001B
IL_001B:  ldsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_0020:  newobj      UserQuery+ClassWithFuncConstructor..ctor
IL_0025:  stloc.0     
IL_0026:  ret         

<DynamicMethodPrototype>b__0:
IL_0000:  ldc.i4.s    2A 
IL_0002:  stloc.0     
IL_0003:  br.s        IL_0005
IL_0005:  ldloc.0     
IL_0006:  ret 
```

问题是如何使用类来做到这一点`DynamicMethod`？我需要创建一个新的匿名方法，也`<DynamicMethodPrototype>b__0:`就是我可以将对该方法的引用传递给`ClassWithFuncConstructor`类的构造函数。

这甚至可能与`DynamicMethod`班级有关吗？

# database - access数据库和h2数据库的关系

> ID：12348117
> 
> 赞同：1
> 
> 时间：2012-09-10T08:45:39.867
> 
> 标签：database, csv, h2

我正在寻找一种方法来创建一种可以访问数据库并可以与 h2 文件相关联并检查特殊表中的数据的自动方式。

我实现的是通过`csv`文件导出数据并`csv`在访问中导入这些数据。但我想以一种自动的方式实现这一目标。背景：目前存在 2 个访问数据库，并且针对需要检查的数据相互关联（来自特殊表的 3 个数据）

一个 access 数据库正在更改为 h2，因此 access 数据库需要与 h2 文件相关联

我想访问读取 h2 文件并检查数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:05:15.843

根据this [other SO answer](https://stackoverflow.com/q/8496668/900626) h2可以使用PostgreSQL ODBC驱动程序。如果是这样，Access 可以通过 ODBC 使用链接表。

# java - 比较eclipse中的来源

> ID：12348126
> 
> 赞同：0
> 
> 时间：2012-09-10T08:45:59.390
> 
> 标签：java, eclipse

我经常遇到需要查看或手动比较两个 Eclipse 源的情况。当我扩展某些类并查看超类的当前实现并在子类中编写类似的实现时，可能会出现这种情况。以下是随着时间的推移想到的解决方案：

*   只需将原型类复制到另一个文件中并使用注释/取消注释对其进行编辑。这个解决方案对我来说似乎有点脏，并导致隐藏的“复制粘贴”错误。
*   在另一个编辑器中打开原型类并使其“始终可见”。这是一个棘手的问题。
*   具有原型和实际类按顺序访问的状态，因此我们可以使用 Back-Forward 热键`ALT+LEFT`并`ALT+RIGHT`在它们之间切换，但问题仍然存在 - 我们一次只有一个活动屏幕。

有没有更聪明的方法来获得我需要的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:20:22.660

我认为[@Nos 解释](https://stackoverflow.com/a/12348207/930271)了更准确的解决方案，但如果您需要同时拥有两个活动编辑器......您只需打开这两个文件，然后“分离”其中一个选项卡，或将其移动到另一位编辑。

要将选项卡移动到其他编辑器窗口，您只需单击[选项卡标题并将其拖动到另一个位置](http://www.tipstank.com/2010/06/03/open-multiple-editors-and-split-windows-in-eclipse/)。它将自动创建另一个编辑器窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:54:46.483

您可以单击源文件选项卡并右键单击->然后选择新编辑器。你会在那里得到重复的标签。之后单击它并拖动到任何方向，您将获得两个不同的文件帧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:50:59.707

我不确定您使用的是哪个版本的 Eclipse，但通常您只需选择要比较的两个文件（使用 ctrl 键 + 鼠标），然后右键单击所选文件之一，转到“比较”子菜单并选择“彼此”？

# android - 为什么当我更改位置时，Android手机的当前位置不会改变？

> ID：12348130
> 
> 赞同：1
> 
> 时间：2012-09-10T08:46:10.983
> 
> 标签：android

我得到android手机的位置：

```
android.location.Location locationA;
            LocationManager locationManager;
            Criteria cri = new Criteria();
            locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            String tower = locationManager.getBestProvider(cri, false);
            locationA = locationManager.getLastKnownLocation(tower);
            if (locationA != null) {
                // lat = (double) (locationA.getLatitude() * 1E6);
                // longi = (double) (locationA.getLongitude() * 1E6);
                double lat = locationA.getLatitude();
                double longi = locationA.getLongitude();

                TextView txt = (TextView) findViewById(R.id.textView1);
                String td = String.valueOf(lat) + "," + String.valueOf(longi);
                txt.setText(td);
            } 
```

为什么当我更改位置并再次获取当前位置时，Android手机的当前位置不会改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:50:53.453

使用 .检查您所在位置的时间`locationA.getTime()`。如果它不是最新的，请等待一个新的位置，然后停止。

```
private static Location currentLocation;
private static Location prevLocation;

public void yourMethod()
{
    locationManager.requestLocationUpdates(provider, MIN_TIME_REQUEST,
                            MIN_DISTANCE, locationListener);
}

private static LocationListener locationListener = new LocationListener() {

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onLocationChanged(Location location) {
            gotLocation(location);
    }
};

private static void gotLocation(Location location) {
        prevLocation = currentLocation == null ?
                null : new Location(currentLocation);
        currentLocation = location;

        if (isLocationNew()) {
            // do something

            locationManager.removeUpdates(locationListener);
        }

}

private static boolean isLocationNew() {
    if (currentLocation == null) {
        return false;
    } else if (prevLocation == null) {
        return false;
    } else if (currentLocation.getTime() == prevLocation.getTime()) {
        return false;
    } else {
        return true;
    }
} 
```

# php - PhpStorm 在项目中打开外部文件并进行检查和突出显示

> ID：12348132
> 
> 赞同：0
> 
> 时间：2012-09-10T08:46:15.130
> 
> 标签：php, ubuntu, syntax-highlighting, phpstorm, code-inspection

这可能是一个小问题，但我经常不得不与之抗争。

我的项目文件夹之外有许多没有扩展名的文件，我想将这些文件作为 PHP 文件打开。意味着缩进、语法高亮和补全是正确的。
我还没有找到可以强制将没有扩展名的文件视为 PHP 文件的设置。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:00:05.793

在|中为**PHP 文件**添加一个空扩展名 可能会有所帮助，但这可能很危险，因为所有没有扩展名的文件都将被视为 PHP 文件。`Settings``File Types`

# android - Stacktrace 引发异常，但在我的班级中找不到异常的行号

> ID：12348142
> 
> 赞同：0
> 
> 时间：2012-09-10T08:46:53.697
> 
> 标签：android, exception, expandablelistview, expandablelistadapter

```
> 09-10 11:38:07.166: E/AndroidRuntime(11497): FATAL EXCEPTION: main
>     09-10 11:38:07.166: E/AndroidRuntime(11497): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at java.util.ArrayList.get(ArrayList.java:311)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.widget.HeaderViewListAdapter.isEnabled(HeaderViewListAdapter.java:164)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.widget.ListView.dispatchDraw(ListView.java:3062)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.widget.ExpandableListView.dispatchDraw(ExpandableListView.java:233)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.View.draw(View.java:7093)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.widget.AbsListView.draw(AbsListView.java:2699)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.drawChild(ViewGroup.java:1739)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.drawChild(ViewGroup.java:1737)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.View.draw(View.java:6989)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.widget.FrameLayout.draw(FrameLayout.java:361)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.drawChild(ViewGroup.java:1739)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.drawChild(ViewGroup.java:1737)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.drawChild(ViewGroup.java:1737)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.drawChild(ViewGroup.java:1737)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.View.draw(View.java:6989)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.widget.FrameLayout.draw(FrameLayout.java:361)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.drawChild(ViewGroup.java:1739)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.View.draw(View.java:6989)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.widget.FrameLayout.draw(FrameLayout.java:361)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.drawChild(ViewGroup.java:1739)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.View.draw(View.java:6989)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.widget.FrameLayout.draw(FrameLayout.java:361)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1882)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewRoot.draw(ViewRoot.java:1544)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1280)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1882)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.os.Handler.dispatchMessage(Handler.java:99)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.os.Looper.loop(Looper.java:130)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at android.app.ActivityThread.main(ActivityThread.java:3701)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at java.lang.reflect.Method.invokeNative(Native Method)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at java.lang.reflect.Method.invoke(Method.java:507)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
>     09-10 11:38:07.166: E/AndroidRuntime(11497):  at dalvik.system.NativeStart.main(Native Method) 
```

我得到了例外，但没有行号来指向我的班级。那么我怎样才能找到异常呢？感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:50:10.023

HeaderViewListAdapter.java:164

它显示您在 HeaderViewListAdapter.java 类的第 164 行有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:50:25.073

这里可能发生的事情是其中之一：

*   您将数组传递给适配器，并在显示之前对其进行修改
*   您覆盖您的适配器以返回与您的数组大小不匹配的 getCount() 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:54:48.367

在应用程序启动时设置一个断点，例如在 onCreate() 中，并以调试模式启动。不过，`IndexOutOfBoundsException`应该给您一些指导，例如，您在代码中的什么位置访问`ArrayList`对象的值？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-10T08:58:03.650

**java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1** 这意味着你的数组大小是1，你尝试获取数组[1]而不是数组[0]

请发送代码。

# sql - 数据库中未找到日期的 SQL 填充天数

> ID：12348144
> 
> 赞同：0
> 
> 时间：2012-09-10T08:47:08.043
> 
> 标签：sql, sql-server, sql-server-2008, outer-join

我从我的函数中获取数据如下：

```
Date       |   Number
06-02-2012 |    2
06-05-2012 |    5
06-08-2012 |    5 
```

如果我想在以下问题中包含在 DB 中找不到的所有日期，我该怎么做？：

```
Date       |   Number
06-02-2012 |    2
06-03-2012 |    0
06-04-2012 |    0
06-05-2012 |    5
06-06-2012 |    0
06-07-2012 |    0
06-08-2012 |    5

SELECT convert(varchar, MIN(DATEADD(wk, DATEDIFF(wk, 0, person.date), 0)), 1), Count(person.ID) 
FROM [dbo].[Person] person
WHERE (DATEDIFF(D, person.date, @dateFrom) <=0 AND DATEDIFF(D, person.date, @dateTo) >=0) 
GROUP BY DATEPART(WK, person.date) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:48:51.893

您将创建一个临时表或子查询，其中包含所选范围内的所有日期，`left join`并对源数据使用 a

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:54:28.680

我建议您创建一个日期表——一个包含从 2000-01-01 到 2050-12-31 的日期的单列表。然后，您可以在 LEFT JOIN 查询的左侧使用该表，如下所示：

```
SELECT date_table.date AS [Date], COUNT(your_table.primary_key) AS [Number]
FROM date_table
LEFT JOIN your_table ON date_table.date = your_table.date
WHERE date_table.date BETWEEN '2012-01-01' AND '2012-06-30' 
```

明智地索引日期表，您将得到一个非常有效的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:02:44.117

如果您只需要一个小间隔，您可以尝试这样的功能：

```
DECLARE @minDate date
DECLARE @maxDate date

SET @minDate = '2012-09-01'
SELECT @maxDate = CAST( CONVERT( CHAR(8), GetDate(), 112) AS DATETIME)

DECLARE @Numbers TABLE(
  Date date,
  Number int)

WHILE @minDate < @maxDate
BEGIN
INSERT INTO @Numbers
SELECT @minDate, 0
WHERE NOT EXISTS( SELECT Number FROM Numbers WHERE [Date] = @minDate )

SET @minDate = DATEADD(day, 1, @minDate)

END

SELECT n.[Date], ISNULL(n.Number, 0) 
FROM @Numbers n
UNION ALL
SELECT Numbers.[Date], ISNULL(Numbers.Number, 0) 
FROM Numbers 
ORDER BY [Date] 
```

If you need more month and year, then I think the best way to make a prefilled permanent helper table with the dates what you need. And make only an easy join on them like it is posted in an other answer.

# c++ - 链接到库但直接传递 obj 文件的未解析名称可以正常工作吗？

> ID：12348156
> 
> 赞同：0
> 
> 时间：2012-09-10T08:48:05.390
> 
> 标签：c++, macos, ld

考虑以下 g++ 调用（Apple GCC 4.2.1，在 OSX 10.6.5 上运行），它工作得很好：

```
g++ -c util/warthog_cfg.cpp -o  util/obj/warthog_cfg.o -DOS_MAC -O0 -Wall -Wno-sign-compare -ansi -fmessage-length=0 -m32
g++ main.cpp -o main -I./util util/obj/warthog_cfg.o -m32 
```

请注意，我在第二行中传递了 warthog_cfg.o（必需的目标文件）作为参数。现在我想将 warthog_cfg.o 放入一个库文件并链接到它。我运行以下命令：

```
g++ -c util/warthog_cfg.cpp -o  util/obj/warthog_cfg.o -DOS_MAC -O0 -Wall -Wno-sign-compare -ansi -fmessage-length=0 -m32
ar -crs lib/libutil.a  util/obj/warthog_cfg.o
g++ main.cpp -o ./bin/main -DOS_MAC -O0 -Wall -Wno-sign-compare -ansi -fmessage-length=0 -m32 -L./lib -framework CoreServices -I./TransitC -I./cpd2012/ -I./util -lutil -lutil
Undefined symbols:
  "warthog::util::warthog_cfg::print(std::basic_ostream<char, std::char_traits<char> >&)", referenced from:
      _main in ccI5ycWY.o
  "warthog::util::warthog_cfg::warthog_cfg()", referenced from:
      _main in ccI5ycWY.o
  "warthog::util::warthog_cfg::parse_args(int, char**)", referenced from:
      _main in ccI5ycWY.o
  "warthog::util::warthog_cfg::~warthog_cfg()", referenced from:
      _main in ccI5ycWY.o
      _main in ccI5ycWY.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

这些调用看起来相同。我想也许问题在于 ar 没有将 .o 文件添加到存档中。但是， otool 似乎另有说明。文件大小似乎也差不多。

```
otool -I lib/libutil.a 
Archive : lib/libutil.a
lib/libutil.a(warthog_cfg.o):

-rw-r--r--  1 foo  staff  5908 10 Sep 18:39 warthog_cfg.o
-rw-r--r--  1 foo  staff  6800 10 Sep 18:35 lib/libutil.a 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:56:52.783

我实际上并没有看到您将库链接到主程序。

我通常不为此使用 -L （这会设置搜索路径，但我知道库在哪里）。只需在链接器调用中添加您的 lib/libutil.a，就像添加另一个目标文件一样。如果您想保留“搜索我的库”方案，请添加 -lutil 并希望没有其他 util 库妨碍。

# wordpress - 避免wordpress插件上的jquery冲突的防弹方法

> ID：12348168
> 
> 赞同：7
> 
> 时间：2012-09-10T08:49:27.807
> 
> 标签：wordpress, plugins, conflict, jquery

我一直在开发 wordpress 插件一段时间，我的所有插件似乎总是遇到以下问题 Jquery 冲突问题。

我已经尝试了很多不同的方法来避免这些，但我总是让用户联系我说当他们从我的插件中安装了一个插件时，它已经阻止了另一个插件的工作 aahhhhh。

我真的很想解决这个问题，因为我知道这对人们来说是多么令人沮丧。

我总是设置和选项或包含wordpresses jquery，下面只是一个不工作的代码示例。

```
add_action( 'init', array( $this, 'include_jquery' ) );

function include_jquery(){

                   wp_deregister_script('jquery');
                   wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"), false, '1.7.1');
                   wp_enqueue_script('jquery');

            } 
```

好的，所以在出现此问题后，我现在在插件管理员中有一个选择选项来切换是或否以包含 jquery 或不我知道它是自动安装的，但有些用户删除了它，这适用于某些人但不是全部。

如果您包含 wordpress jquery，我知道您必须使用以下内容运行您的 jquery。

```
jQuery(document).ready(function ($) { 
```

jQuery而不是美元符号$

我理解并使用过 jquery 没有冲突，并尝试并测试了一些（如果不是全部）这些 [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

```
$.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  }); 
```

这与其他人一样适用于某些但并非所有用户仍然与某些用户发生冲突。

我希望通过这篇文章，我们中的一些 wordpress 插件开发人员可以提供帮助并发布一种防弹方法，以便在我们的插件中使用 wordpress 和 jquery，而不会出现冲突问题。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T09:58:13.940

它不适用于闭包吗？

```
(function($){
    // your plugin code
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:07:55.183

阅读法典的这些部分：

*   [从非默认位置加载默认 WordPress 脚本](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#Load_a_default_WordPress_script_from_a_non-default_location)

*   [jQuery noConflict 包装器](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)

您应该使用`wp_enqueue_scripts`hook 而不是`init`.

你应该使用`jQuery.noConflict();`而不是`$.noConflict();`.

# java - 我的配置有什么问题？严重：加载持久会话时出现 IOException：java.io.EOFException

> ID：12348170
> 
> 赞同：29
> 
> 时间：2012-09-10T08:49:35.030
> 
> 标签：java, tomcat

我有一个使用 Tomcat 中运行的 struts2、spring3 和 hibernate 4 的 Web 程序。它可以工作，但 Tomcat 报告了`java.io.EOFException`.

以下是tomcat日志：

```
INFO: Deploying web application directory D:\apache-tomcat-7.0.29\webapps\manager
九月 10, 2012 4:27:02 下午 org.apache.catalina.session.StandardManager doLoad
SEVERE: IOException while loading persisted sessions: java.io.EOFException
java.io.EOFException
    at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2298)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2767)
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:798)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298)
    at org.apache.catalina.util.CustomObjectInputStream.<init>(CustomObjectInputStream.java:58)
    at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:246)
    at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:491)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1100)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1618)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

九月 10, 2012 4:27:02 下午 org.apache.catalina.session.StandardManager startInternal
SEVERE: Exception loading sessions from persistent storage
java.io.EOFException
    at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2298)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2767)
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:798)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298)
    at org.apache.catalina.util.CustomObjectInputStream.<init>(CustomObjectInputStream.java:58)
    at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:246)
    at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:491)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1100)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1618)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-21T10:42:07.923

您可以删除 ${catalina.home}/work/Catalina/localhost/<app>/SESSION.ser 其中 app 是您的应用程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-15T09:36:23.487

您可以删除 ${CATALINA_HOME}/work/Catalina/localhost/test

其中 test 是您的应用程序文件夹（战争名称）。

这解决了我的问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-31T04:52:17.820

尝试删除tomcat的Work文件夹，然后重启tomcat。它对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T06:34:53.600

我在 Eclipse 中有一个项目并使用 tomcat 插件运行它，我尝试了这个但没有帮助，所以我观察到在我的项目目录结构中还有一个工作目录，我删除了那个目录，一切都开始工作了。只是想为像我这样的其他人分享另一个可能的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-10T09:45:15.343

我尝试了上面的方法：${CATALINA_HOME}/work/Catalina/localhost 中的“删除工作目录”，${CATALINA_HOME}/conf/context.xml 中的“取消注释管理器路径名”。没有工作。

我发现在我的eclipse项目中，服务器项目也有一个名为“context.xml”的文件，必须在创建服务器项目时复制它。我在那里“取消注释管理器路径名”，它终于奏效了！

希望它会帮助别人！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-27T07:48:28.270

正如@GauravS 所说。我正在使用 Eclipse，所以当我右键单击 tomcat 服务器（在服务器窗口中）并清理它时，它可以工作......

有时我必须从 tomcat 中删除战争，清理而不是再次运行它。

有时我删除 tomcat 并右键单击 Servers 窗口， New ， Server 并使用我正在使用的相同端口并删除旧服务器。

PS：打开服务器窗口：

```
Window - Show View - Other - write "Servers" and choose it from the list - OK 
```

# android - 在自定义视图中水平滚动图表

> ID：12348171
> 
> 赞同：0
> 
> 时间：2012-09-10T08:49:39.413
> 
> 标签：android, graph, horizontalscrollview

我通过扩展 View 制作了一个图表并动态制作了图表我想要的是滚动该图表，因为我的移动屏幕很小它需要所有 xaxis 值所以我希望它水平滚动

我所做的是

```
 HorizontalScrollView hsv=new HorizontalScrollView(this);
            ll=new LinearLayout(this); //taking Linear Layout
            ll.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT,1.0f));
            ll.setOrientation(android.widget.LinearLayout.VERTICAL);
            ll.addView(graphView);//My Graph 
            hsv.addView(ll);
            setContentView(hsv); 
```

我想动态地这样做，因为我的整个代码都是动态的所以我需要帮助，当我实现它时它没有显示图表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:52:36.930

嗨，你可以做一件事，而不是尝试滚动图

水平尝试刷画线和点，很容易

我们只需要滑动画布视图

# php - 使用 DOM 获取动态表格数据但不跟随表格排序

> ID：12348178
> 
> 赞同：1
> 
> 时间：2012-09-10T08:50:05.987
> 
> 标签：php, dom, get, html-table, tablesorter

我有一个默认按数值按第二列升序排序的表格。

我正在尝试从该表中获取前 5 行，但我的脚本似乎不想遵循我拥有的 tablesorter 强制排序顺序，它只是采用默认的未排序数据。

那么如何让我的脚本获取已排序的表数据呢？我不想为这个脚本抓取所有数据并再次排序。

这是我的代码

```
<?php 
include("bestbrokers_array.php");
require('simple_html_dom.php'); 

$table = array(); 

$html = file_get_html('http://www.forexfbi.com/best-forex-brokers-comparison/'); 

$num=1;
foreach($html->find('tr') as $row) { 
    if($num <= 6)
{
$rating = $row->find('td',1)->innertext; 
    $name = $row->find('td',0)->plaintext; 

    $table[$name][$rating] = true; 
$num++;
}
} 

html_show_array($table);

?> 
```

和..

```
<?php
function do_offset($level){
    $offset = "";             // offset for subarry 
    for ($i=1; $i<$level;$i++){
    $offset = $offset . "<td></td>";
    }
    return $offset;
}

function show_array($array, $level, $sub){
    if (is_array($array) == 1){          // check if input is an array
       foreach($array as $key_val => $value) {
           $offset = "";
           if (is_array($value) == 1){   // array is multidimensional
           echo "<tr>";
           $offset = do_offset($level);
           echo $offset . "<td>" . $key_val . "</td>";
           show_array($value, $level+1, 1);
           }
           else{                        // (sub)array is not multidim
           if ($sub != 1){          // first entry for subarray
               echo "<tr nosub>";
               $offset = do_offset($level);
           }
           $sub = 0;
           echo $offset . "<td main ".$sub." width=\"120\">" . $key_val . 
               "</td>"; 
           echo "</tr>\n";
           }
       } //foreach $array
    }  
    else{ // argument $array is not an array
        return;
    }
}

function html_show_array($array){
  echo "<table cellspacing=\"0\" border=\"2\">\n";
  show_array($array, 1, 0);
  echo "</table>\n";
}
?> 
```

# ruby-on-rails - Rails 模型逻辑给出错误的结果

> ID：12348179
> 
> 赞同：-1
> 
> 时间：2012-09-10T08:50:06.560
> 
> 标签：ruby-on-rails, ruby

当我在复制到某个变量后对列值执行一些逻辑时，对象上的实际列值正在发生变化，我的模型方法是，

```
 def copy_configuration_values
    element_positions_dup = element_positions.dup
    cert_element.read_attribute(:field_names)["configuration_values"].each { |k, v|
      element_positions_dup["configuration_values"][k] = v if configuration_value_present?(k)
    }
    element_positions_dup
  end

  def configuration_value_present?(configuration)
    element_positions["configuration_values"] && element_positions["configuration_values"][configuration]
  end 
```

当我从控制台调用此方法时，如下所示，

```
1.9.3p194 :001 > t = CertTemplate.find 30
CertTemplate Load (0.3ms)  SELECT `cert_templates`.* FROM `cert_templates` WHERE `cert_templates`.`id` = 30 LIMIT 1
=> #<CertTemplate id: 30, name: "aaaaaaaaaaaq", cert_element_id: 22, element_positions: {"configuration_values"=>{"Program"=>"9.523810492621529,24.627720154437824"}, "custom_fields"=>{"college"=>"22.64550296843998,15.349369638973906", "code"=>"16.790123349144345,15.463920671915272"}, "custom_fields_for_rows"=>{"subject name"=>"30.68783230251736,16.609393247624034"}}, created_at: "2012-08-08 07:18:33", updated_at: "2012-08-16 08:03:52", image_file_name: "Marksheet_Updated.jpg", image_content_type: "image/jpeg", image_file_size: 2236497, image_updated_at: "2012-08-08 07:18:33"> 
1.9.3p194 :002 >
1.9.3p194 :003 >   t.copy_configuration_values
CertElement Load (0.2ms)  SELECT `cert_elements`.* FROM `cert_elements` WHERE `cert_elements`.`id` = 22 LIMIT 1
=> {"configuration_values"=>{"Program"=>"2"}, "custom_fields"=>{"college"=>"22.64550296843998,15.349369638973906", "code"=>"16.790123349144345,15.463920671915272"}, "custom_fields_for_rows"=>{"subject name"=>"30.68783230251736,16.609393247624034"}} 
1.9.3p194 :004 > 
1.9.3p194 :005 >   t
=> #<CertTemplate id: 30, name: "aaaaaaaaaaaq", cert_element_id: 22, element_positions: {"configuration_values"=>{"Program"=>"2"}, "custom_fields"=>{"college"=>"22.64550296843998,15.349369638973906", "code"=>"16.790123349144345,15.463920671915272"}, "custom_fields_for_rows"=>{"subject name"=>"30.68783230251736,16.609393247624034"}}, created_at: "2012-08-08 07:18:33", updated_at: "2012-08-16 08:03:52", image_file_name: "Marksheet_Updated.jpg", image_content_type: "image/jpeg", image_file_size: 2236497, image_updated_at: "2012-08-08 07:18:33"> 
1.9.3p194 :006 > 
```

我的实际列值正在改变，我做错了什么。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:03:11.320

看起来问题是当您遍历键值而不是副本时，您正在分配对嵌套哈希的引用。

具体而言，两者中的“custom_fields”键都将指向`element_positions`与`element_positions_dup`值相同的 Hash 对象，因为您分配它而不复制它。要修复它，请尝试

```
...
element_positions_dup["configuration_values"][k] = v.dup if configuration_value_present?(k)
... 
```

编辑：是的，你需要深拷贝

[使用 Marshal 序列化](https://stackoverflow.com/a/4157635/824377)

# ios - 如何在 mac leopard 中将 Xcode 3.2.5 更新到 4.4.1 版本？

> ID：12348180
> 
> 赞同：0
> 
> 时间：2012-09-10T08:50:06.767
> 
> 标签：ios, xcode, macos, operating-system

我正在运行 mac os X 10.6.8（最近更新）。其中已经安装了 Xcode 3.2.5。我喜欢安装 4.4.1（最新版本）。但我在 dmg 图标上得到一个十字符号，它不允许我安装最新版本的 xcode。请指导我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:58:58.057

这是因为Snow Leopard 下不支持Xcode 4.4.1（Leopard 是10.5，不是10.6）。您必须将 OS X 升级到 Lion 或 Mountain Lion 或坚持使用[Xcode 4.2](http://adcdownload.apple.com/Developer_Tools/xcode_4.2_for_snow_leopard/xcode_4.2_for_snow_leopard.dmg)（需要 Apple 开发者帐户）。

# sql-server-ce - 无法连接到 SSMS 中的 SQL Compact 数据库“不允许访问数据库文件”

> ID：12348181
> 
> 赞同：0
> 
> 时间：2012-09-10T08:50:08.853
> 
> 标签：sql-server-ce, ssms

我正在尝试在 SQL Management Studio 中打开一个 SQL Compact 数据库。如果该文件位于我的用户路径中，那么我可以正常打开它，如果它位于我的 C: 或 D: 驱动器的根文件夹中，那么我会收到以下错误：

无法连接到“不允许访问数据库文件”（SQL Server Compact ADO.NET 数据提供程序）

我有一种感觉，这可能是因为我没有某些权限，但不知道如何解决。谁能指导我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:24:27.430

我出现此错误的原因是因为我的 Windows 帐户没有正确的本地管理员权限。

# javascript - 无法拖放以使用本地存储

> ID：12348185
> 
> 赞同：4
> 
> 时间：2012-09-10T08:50:14.270
> 
> 标签：javascript, jquery, local-storage

我需要帮助来尝试获取拖放克隆以使用存储的文本区域版本。

即用户当前可以将文本区域拖放到右侧的字段中。但是，左侧的每个文本区域还允许用户在下次打开页面时编辑文本。

上述两项工作。

但是，我无法让拖放实用程序考虑到 textarea 的编辑版本。即，如果用户将“选项 1”中的文本更改为“你好”并稍后返回，由于本地存储，该文本区域现在将包含“你好”，但是当他们将此文本区域拖放到右侧的字段中时，复制原始的“选项 1”文本而不是存储的“你好”值

这是我的小提琴的链接：http: [//jsfiddle.net/hemang2/QkRpp/](http://jsfiddle.net/hemang2/QkRpp/)

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:55:07.920

在修复了你所有的错误之后，

这是小提琴的链接（更新）：http: [//jsfiddle.net/E8RHE/](http://jsfiddle.net/E8RHE/)

看看这个。

# java - 如何在 Spring 中向其他 bean 中的集合添加值

> ID：12348194
> 
> 赞同：0
> 
> 时间：2012-09-10T08:50:44.520
> 
> 标签：java, spring, servlets, spring-mvc, portlet

我在 Spring MVC Web 应用程序中有一个应用程序上下文和几个子上下文（每个 portlet 一个）。

在这种情况下，我有一个带有通用配置参数的属性 bean。如何从其他上下文向此 bean 添加一些属性？我知道我可以使用 MethodInvoker 之类的东西，但是不存在更强大的方法吗？

# jquery-mobile - 将行添加到 jqm 网格

> ID：12348196
> 
> 赞同：1
> 
> 时间：2012-09-10T08:50:46.327
> 
> 标签：jquery-mobile

我需要知道如何在网格中添加一行。我用 3 列声明了 ui-grid-b。我在页脚的这个网格中需要 8 个按钮。这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:54:00.877

你应该在 jQueryMobile 文档中阅读它。基本上“网格被设计为包装到多行项目。例如，如果您在具有九个子块的容器上指定一个 3 列网格 (ui-grid-b)，它将包装成 3 行，每行 3 个项目。” 您还应该阅读有关工具栏的信息。它可能对一个好的开始很有用。

有一个完整的解释：http: [//jquerymobile.com/demos/1.1.1/docs/content/content-grids.html](http://jquerymobile.com/demos/1.1.1/docs/content/content-grids.html)

# android - 在 android 的 Image View 内的画布上绘制正弦波

> ID：12348201
> 
> 赞同：0
> 
> 时间：2012-09-10T08:50:52.067
> 
> 标签：android, android-canvas

如何在 android 的图像视图内的画布上绘制正弦波，我需要将它绘制在图像视图的中心？

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:57:49.753

您可以使用[Canvas.drawPath](http://developer.android.com/reference/android/graphics/Canvas.html#drawPath%28android.graphics.Path,%20android.graphics.Paint%29)在画布上绘制任何路径。在这种情况下，路径就是您的正弦，因此您必须逐步遍历正弦的函数值，并使用小增量将每个点添加到路径中[Path.lineTo](http://developer.android.com/reference/android/graphics/Path.html#lineTo%28float,%20float%29)。

# c++ - C++ 创建一个类的实例？

> ID：12348204
> 
> 赞同：0
> 
> 时间：2012-09-10T08:50:56.587
> 
> 标签：c++, class, constructor, instance, default-parameters

> **可能重复：**
> [带空括号的默认构造函数](https://stackoverflow.com/questions/180172/default-constructor-with-empty-brackets)
> [实例化带或不带括号的类？](https://stackoverflow.com/questions/9490349/instantiate-class-with-or-without-parentheses)

程序：

```
class Foo
{
   public:
      Foo ( int bar = 1 )
      {
         cout << "bar=" << bar;
      }
};

int main() {

   cout << "0 - ";
   Foo foo_0 ( 0 ) ;
   cout << '\n';

   cout << "1 - ";
   Foo foo_1 ();
   cout << '\n';

   cout << "2 - ";
   Foo foo_4;
   cout << '\n';

   return 0;

} 
```

输出：

```
0 - bar=0
1 - 
2 - bar=1 
```

问题：为什么示例 #1 不起作用，而示例 #0 和 #2 可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T08:51:25.450

```
Foo foo_1 (); 
```

是一个函数声明，没有对象被创建。它是一个`foo_1`不带参数并返回一个`Foo`对象的函数。

构造对象的正确方法是

```
Foo foo1; 
```

这个概念被称为 C++ 的[vexing parse](http://en.wikipedia.org/wiki/Most_vexing_parse)。一个简短的描述是，任何可以被视为声明的东西都是。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-10T09:15:50.060

foo_1(); 换句话说，它被称为 Null Intialize，您必须知道对象创建和值初始化之间的区别。

# cakephp-2.1 - 蛋糕 PHP 重定向

> ID：12348211
> 
> 赞同：0
> 
> 时间：2012-09-10T08:51:07.050
> 
> 标签：cakephp-2.1

CakePHP 重定向 url 之类的 *.php
我的站点与其他 20 多个站点集成。他们有一个网址可以访问我的网站现在我用 CakePHP 重写我的代码。所以我想将旧网址重定向到相应的 cakePHP 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:38:37.677

您可以使用路由配置添加一些路径来解析您当前的 url，并将它们发送到适当的操作：

[http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration](http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration)

但是，我认为您应该直接在您的 Web 服务器中管理这种情况，无论它是什么（apache、nginx 等）。

# mysql - 在列中插入一个字符串，然后在另一列中分配一个关系

> ID：12348215
> 
> 赞同：0
> 
> 时间：2012-09-10T08:51:36.230
> 
> 标签：mysql, insert

我坚持一项我认为简单的任务，希望它实际上很简单:)

我必须在一个名为“images”的表中插入一个字符串（这是一个图像文件名）；我有另一个名为“项目”的表；还有第三个表，其中包含“images”和“projects”之间的关系，称为“imagesRel”；

我想在“images”中插入字符串，同时将其自动增量id分配给“imagesRel”中表“projects”的自动增量id（我之前知道）作为关系。

我必须使用哪个 MySql 命令？这个插入有 JOIN 吗？我被卡住了，因为在我插入时尚未分配 idImage 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:56:55.117

通过使用 LAST_INSERT_ID() 函数

```
INSERT INTO foo (auto,text)
    VALUES(NULL,'text');         # generate ID by inserting NULL

INSERT INTO foo2 (id,text)
    VALUES(LAST_INSERT_ID(),'text');  # use ID in second table 
```

在此处查看更多信息[http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:57:46.473

尝试使用 LAST_INSERT_ID() 获取最后插入的 ID

# php - 使用 XMLHttprequest 上传文件 - multipart/form-data 中缺少边界

> ID：12348216
> 
> 赞同：11
> 
> 时间：2012-09-10T08:51:40.357
> 
> 标签：php, javascript, xmlhttprequest, xmlhttprequest-level2

我正在使用 XMLHttprequest 上传文件。这是上传文件的JS函数：

```
var upload = function(file) {
    // Create form data
    var formData = new FormData();
    formData.append('file', file);

    var xhr = new XMLHttpRequest();

    // Open
    xhr.open('POST', this.options.action);

    // Set headers
    xhr.setRequestHeader("Cache-Control", "no-cache");
    xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    xhr.setRequestHeader("Content-Type", "multipart/form-data");
    xhr.setRequestHeader("X-File-Name", file.fileName);
    xhr.setRequestHeader("X-File-Size", file.fileSize);
    xhr.setRequestHeader("X-File-Type", file.type);

    // Send
    xhr.send(formData);
} 
```

在服务器端，在**upload.php**中，我以这种方式读取文件：

```
file_put_contents($filename, (file_get_contents('php://input'))); 
```

一切正常，除了我收到 PHP 警告：

`Missing boundary in multipart/form-data POST data in Unknown on line 0`.

如果我删除此行： `xhr.setRequestHeader("Content-Type", "multipart/form-data");`警告消失。

这里应该是什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-10T10:47:05.660

嗯，这对我来说有点奇怪，但这是有效的：

```
// Open
xhr.open('POST', this.options.action, true);

// !!! REMOVED ALL HEADERS

// Send
xhr.send(formData); 
```

在这种情况下，在服务器端我不读取通过发送的文件，`php://input`但文件将在`$_FILES`数组中。

这解决了我的问题，但我仍然很好奇为什么现在出现文件`$_FILES`？

在 Chrome、Mozilla、Safari 和 IE10 中测试。

# java - jndi.properties - 如何设置它？

> ID：12348217
> 
> 赞同：0
> 
> 时间：2012-09-10T08:51:48.483
> 
> 标签：java, properties, log4j, jndi

有没有办法`jndi.properties`在代码中设置文件或设置主题？现在我把这个文件放到`src`文件夹中，我真的需要在源代码中设置这个配置。

`jdni.properties:`

```
topic.logTopic=logTopic 
```

有什么方法类似于例如

```
PropertyConfigurator.configure("path") 
```

能否请你帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:54:38.627

只需在用于创建 InitialContext 的环境中设置属性。

# c++ - 如何确定流程的完整性级别？

> ID：12348220
> 
> 赞同：2
> 
> 时间：2012-09-10T08:51:52.843
> 
> 标签：c++, windows, winapi, process

我想启动一个具有高完整性级别的进程。父进程作为系统服务 LocalSystem 帐户运行。在一台 Windows 2008 机器中，子进程为高级，而在另一台 2008 机器中，该进程为“中”级。看起来`CreateProcessAsUser`在不同的机器上获得不同的级别。

```
if (!WTSQueryUserToken(sessionID, &hToken)) 
{//The admin user logged in the rdp session of "sessionID".
    return;
}
BOOL fSuccess = CreateProcessAsUser(hToken, NULL, cmdLine, NULL, NULL,
TRUE,CREATE_NEW_CONSOLE,NULL, workDir, &si, &pi); 
```

带来什么不同？有没有配置或程序的方法来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:57:54.687

不要指望用户的 ACL。当然，LocalSystem 帐户可能包含高完整性级别 ACL，但这不是获取该 IL ACL 的可靠方法。高 IL SID 是众所周知的 ( `SID: S-1-16-12288`)。将其放入安全描述符中，并将其传递给 CreateProcess。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T20:32:34.767

您应该能够在启动新进程之前更改检索到的令牌的完整性级别，方法是调用[SetTokenInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379591%28v=vs.85%29.aspx)并将`TOKEN_INFORMATION_CLASS`参数设置为`TokenIntegrityLevel`。

# sql - 清理 SDF 数据库文件

> ID：12348221
> 
> 赞同：2
> 
> 时间：2012-09-10T08:51:58.017
> 
> 标签：sql, sql-server-ce

我有一个填充的 SDF 数据库文件，我需要清理表的每条记录。但如果我手动操作，在表中添加记录后主键不会以 1 开头。并且将使用 id 创建记录（例如 4091+）。那么，如何删除所有数据并将所有主键设置为 1。

我的数据库太大并且有很多关联，因此我不能只删除所有表并创建新表。这需要很多时间。

对不起我的英语不好。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:55:39.410

你必须`truncate`上桌...

```
TRUNCATE TABLE tbl_name 
```

`Truncate`删除所有记录以及将 id 重置为 0。

如果 TRUNCATE 在您的数据库中不可用，您可以简单地删除记录

`DELETE from tbl_name`

并通过以下方式重置身份列：

```
ALTER TABLE tbl_name ALTER COLUMN id IDENTITY (1,1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:53:29.853

只需使用`DELETE`命令。

```
DELETE FROM tableName 
```

它将完全删除表上的所有行。

# c# - ',' 附近的动态查询出错。-.-

> ID：12348224
> 
> 赞同：0
> 
> 时间：2012-09-10T08:52:04.413
> 
> 标签：c#, dynamic-sql

我不知道为什么这不起作用。

我正在使用动态 SQL

这是我生成 SQL 语句的方式：

```
OLD: SET @dSQL = 'DBCC CHECKIDENT([' + @TableName + '], RESEED, 0); SET IDENTITY_INSERT ' +                                                            @TableName + ' ON; INSERT INTO ' + @thisTable +  '(' + @pkcolumns + ', '+  @columns + ')' + ' SELECT (' + @pkcolumns + ', '+  @columns + ') FROM ' + @oldTable +' GROUP BY ' + @pkcolumns + '; SET IDENTITY_INSERT ' + @TableName + ' OFF;'

NEW: SET @dSQL = 'DBCC CHECKIDENT([' + @TableName + '], RESEED, 0); SET IDENTITY_INSERT ' + @TableName + ' ON; INSERT INTO ' + @thisTable +  @pkcolumns + ', '+  @columns  + ' SELECT DISTINCT(' + @pkcolumns + '), '+  @columns + ' FROM ' + @oldTable + '; SET IDENTITY_INSERT ' + @TableName + ' OFF;' 
```

就像执行程序一样，变量是这样的。

```
@TableName DATA.HTI
@thisTable DATA.HTI
@oldTable [OR_JTU_2530].DATA.HTI

@columns [PARENT_HTI_ID], [OPERATION], [DISPLAY], [ACTIVE], [OFFSET]
@pkcolumns [HTI_ID]

@dSQL DBCC CHECKIDENT([DATA.HTI], RESEED, 0); SET IDENTITY_INSERT DATA.HTI ON; INSERT INTO DATA.HTI([HTI_ID], [PARENT_HTI_ID], [OPERATION], [DISPLAY], [ACTIVE], [OFFSET]) SELECT ([KPI_ID], [PARENT_KPI_ID], [OPERATION], [DISPLAY], [ACTIVE], [OFFSET]) FROM [OR_JTU_2530].DATA.HTI GROUP BY [HTI_ID]; SET IDENTITY_INSERT DATA.HTI OFF; 
```

更新： **按删除分组，插入不同**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:02:34.537

如果你打印出你的字符串，你会看到：

```
SELECT (' + @pkcolumns + ', '+  @columns + ') FROM 
```

生成类似的东西：

```
SELECT (column1,column2,column3) FROM 
```

这不是有效的语法。但是，一旦您解决了该问题（通过删除括号`()`），您仍然会遇到问题，因为您正在`GROUP BY`对.一个错误。`@pkcolumns``@columns``GROUP BY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:35:24.880

根据您在上面发布的新代码，尝试以下操作，看看它是否有效：

```
SET @dSQL = 'DBCC CHECKIDENT([' + @TableName + '], RESEED, 0); 
SET IDENTITY_INSERT ' + @TableName + ' ON; INSERT INTO ' + @thisTable + '(' + @pkcolumns + ', ' + @columns + ') SELECT DISTINCT ' + @pkcolumns + ', ' +  @columns + ' FROM ' + @oldTable + ' 
SET IDENTITY_INSERT ' + @TableName + ' OFF;' 
```

# netbeans - 恢复 Apache Derby 数据库

> ID：12348228
> 
> 赞同：0
> 
> 时间：2012-09-10T08:52:22.867
> 
> 标签：netbeans, derby

我使用 Netbeans 开发一个带有 JSF、JPA 和 Java 数据库的项目。我可以通过右键单击服务下的数据库连接并执行 CALL SYSCS_UTIL.SYSCS_BACKUP_DATABASE('c:/tem/2005-06-01') 命令来在线备份。但是如何从该备份恢复或创建数据库。

有几篇文章指出要在启动时连接 URL 中使用 jdbc:derby:sample;restoreFrom=c:\mybackups\sample。什么是启动时间连接？我尝试将它用作 Netbeans 新连接对话框中的连接字符串，但这并不成功。请告诉我如何恢复备份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:00:40.530

这里有大量关于备份和恢复 Derby 数据库的信息：http: [//db.apache.org/derby/docs/10.9/adminguide/cadminhubbkup98797.html](http://db.apache.org/derby/docs/10.9/adminguide/cadminhubbkup98797.html)

如果您不习惯在 Netbeans 环境之外使用 Derby，请从这里开始：http: [//db.apache.org/derby/docs/10.9/getstart/](http://db.apache.org/derby/docs/10.9/getstart/)

# python-3.2 - Python 2D 数组问题

> ID：12348236
> 
> 赞同：0
> 
> 时间：2012-09-10T08:52:59.123
> 
> 标签：python-3.2

我正在尝试将二维数组的特定值设置为 True。这是代码片段：

```
b [ [False] * 3] * 3
b[2][1] = True 
```

不幸的是，这会将整行设置为 True（因此`b[0][1]`将更改为 True）。关于发生了什么的任何想法？

编辑：

刚刚尝试了这段代码，它起作用了：

```
 b = []
 for i in range(3):
     b.append([False, False, False])
 b[1][2] = True 
```

为什么它会在这种情况下工作而不是前者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:06:43.037

`[[False]*3]*3`创建对同一`[False,False,False]`对象的三个引用，因此当您更改一项时，您的其他行/列也会更改。

`[False, False, False]`您的第二个版本通过为每一行/列创建一个新对象来避免这种情况。

# javascript - Javascript，从静态函数打印全局对象

> ID：12348237
> 
> 赞同：2
> 
> 时间：2012-09-10T08:53:04.300
> 
> 标签：javascript, methods, static-methods

使用以下代码，如何`my_method`调用该方法以打印全局对象（窗口）？

```
 MyClass = function() {
      this.my_method = function() {
         console.log(this);
      }
  }
  var myobject = new MyClass(); 
```

这不是一个家庭作业，而是我被问到的一个问题，我无法理解，因为我不了解深层 JavaScript。

所以，如果有人可以帮助我理解并给我一个解释清楚的答案，我会很高兴！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:57:51.863

您可以将函数[绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)到 null ：

```
MyClass = function() {
      this.my_method = function() {
         console.log(this);
      }
  }
  var myobject = new MyClass();
  myobject.my_method = myobject.my_method.bind(null);
  myobject.my_method(); // this will log the DomWindow object 
```

那是因为当函数的上下文为空或未定义时，`this`就是全局对象。

从[ECMAScript 参考](http://es5.github.com/#x10.4.3)：

> 1.  如果函数代码是严格代码，则将 ThisBinding 设置为 thisArg。
> 2.  否则，如果 thisArg 为 null 或未定义，则将 ThisBinding 设置为全局对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:01:53.227

您还可以使用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)和[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)更改函数的上下文。

```
var myobject = new MyClass();
myobject.my_method.call(this);
myobject.my_method.apply(this); 
```

如果您不需要永久绑定或想要动态更改上下文，这可能会很好地工作。

# java - eclipse中junit的等宽字体？

> ID：12348238
> 
> 赞同：4
> 
> 时间：2012-09-10T08:53:05.750
> 
> 标签：java, eclipse, junit

如何更改 JUnit 选项卡中的字体，以便它使用等宽字体显示结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:33:14.363

我正在使用 Groovy，我在[这里](http://code.google.com/p/spock/wiki/GettingStarted)找到了解决方案。您需要转到 Groovy>Preferences 并选中使用等宽字体复选框。

![在此处输入图像描述](../Images/1e32b27f6ef05be6c8a3c977ca207511.png)

# iphone - 如何更改 JDFlipNumberView 框架？

> ID：12348239
> 
> 赞同：0
> 
> 时间：2012-09-10T08:53:07.323
> 
> 标签：iphone, objective-c, ios, xcode, ipad

[我从这里](https://github.com/jaydee3/JDFlipNumberView)下载了 JDFlipNumberView 。

它可以工作，但框架有问题。要更改开发人员说要使用的框架：

```
flipNumberView.frame = CGRectMake(10,100,300,100); 
```

但是当我这样做时，它不会改变。

PS：当我把`NSLog(@"%@",flipNumberView.frame);`它返回`null`。

如何更改框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:08:05.420

"fram' 不是字符串，它是结构的对象。所以如果你想看到 frame。你可以使用它。

```
 NSLog(@"Width = %f",btn.frame.size.width);
  NSLog(@"height = %f",btn.frame.size.height);

  NSLog(@"x = %f",btn.frame.origin.x);
  NSLog(@"y = %f",btn.frame.origin.y); 
```

可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:49:57.910

如果您使用示例项目，您需要先停用该`layoutSubviews:`方法。它会在每次重新布局时重置帧。

否则只需设置一个新框架。

# python - 龙卷风的警告 [Errno 104] 对等方重置连接

> ID：12348240
> 
> 赞同：4
> 
> 时间：2012-09-10T08:53:08.623
> 
> 标签：python, tornado

开始龙卷风，稍等片刻，这个警告出来了。我不知道这个错误是什么。如何解决这个警告？

```
WARNING:root:Read error on 12: [Errno 104] Connection reset by peer
WARNING:root:error on read
Traceback (most recent call last):
  File "/usr/local/lib/python3.2/site-packages/tornado-2.4-py3.2.egg/tornado/iostream.py", line 355, in _handle_read
    if self._read_to_buffer() == 0:
  File "/usr/local/lib/python3.2/site-packages/tornado-2.4-py3.2.egg/tornado/iostream.py", line 422, in _read_to_buffer
    chunk = self._read_from_socket()
  File "/usr/local/lib/python3.2/site-packages/tornado-2.4-py3.2.egg/tornado/iostream.py", line 403, in _read_from_socket
    chunk = self.socket.recv(self.read_chunk_size)
socket.error: [Errno 104] Connection reset by peer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T07:49:59.070

可能有两个方面：

一：使用旧的tornado版本，bugfix是：[https ://github.com/facebook/tornado/commit/3258726fea5bcd1b401907653bc953ce63d5aeb2](https://github.com/facebook/tornado/commit/3258726fea5bcd1b401907653bc953ce63d5aeb2)

二：发送此请求的客户端有问题，RST 没有 ACK（可以按照 RFC 定义）

# http - 调试多个处置标头

> ID：12348242
> 
> 赞同：0
> 
> 时间：2012-09-10T08:53:13.683
> 
> 标签：http, google-chrome, http-headers

我正在使用 Java 开发一个 Web 应用程序，并在某些特定页面上的 Chrome 中不断收到此错误：

> 净::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION

因此，我检查了 WireShark 的相应 TCP 流，这是响应的标头：

```
HTTP/1.0 200 OK
Date: Mon, 10 Sep 2012 08:48:49 GMT
Server: Apache-Coyote/1.1
Content-Disposition: attachment; filename=KBM 80 U (50/60Hz,220/230V)_72703400230.pdf
Content-Type: application/pdf
Content-Length: 564449
X-Cache: MISS from my-company-proxy.local
X-Cache-Lookup: MISS from my-company-proxy.local:8080
Via: 1.0 host-of-application.com, 1.1 my-company-proxy.local:8080 (squid/2.7.STABLE5)
Connection: keep-alive
Proxy-Connection: keep-alive

%PDF-1.4
[PDF data ...] 
```

我在那里只看到**一个**内容处置标题。为什么chrome告诉我有几个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:40:00.067

因为 filename 参数是不带引号的，并且包含一个逗号字符（在不带引号的值中是不允许的，在这种情况下表示多个标头值已被折叠成一个）。

请参阅[http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.4.2.p.5](http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.4.2.p.5)和[http://greenbytes.de/tech/webdav/rfc6266.html](http://greenbytes.de/tech/webdav/rfc6266.html)

# ruby-on-rails - 简单的表单不加载动态创建的关联

> ID：12348246
> 
> 赞同：0
> 
> 时间：2012-09-10T08:53:34.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, metaprogramming, simple-form

我通过关联获得了多态性

```
# a/m/documnet.rb
class Document < ActiveRecord::Base
 has_many :possessions, as: :belonging
 has_many :clients, :through => :possessions, :source => :owner, :source_type => 'Client'
end 
```

在控制台中

```
Document.new.clients 
#=> [] 
```

在形式简单的视图中

```
= f.association :clients, as: :check_boxes, collection: Client.all 
```

它没有问题。

--

当我想动态关联有很多资源时，问题就开始了

```
class Document < ActiveRecord::Base
  has_many :possessions, as: :belonging

  def self.possession_owner_classes
     [Client, SomethingElse]
  end
  possession_owner_classes.each do |possession_class|
    has_many possession_class.model_name.underscore.pluralize, :through => :possessions,  :source => :owner, :source_type => possession_class.model_name
  end
end 
```

在控制台中

```
Document.new.clients 
#=> [] 
```

在形式简单的视图中

```
= f.association :clients, as: :check_boxes, collection: Client.all 
```

会抛出

```
Association :clients not found 
```

所以 Rails 知道这种关联，但简单的形式不知道：-/ 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:07:09.927

好的，我发现了错误，

```
has_many possession_class.model_name.underscore.pluralize, :through => :possessions,  :source => :owner, :source_type => possession_class.model_name 
```

应该

```
has_many possession_class.model_name.underscore.pluralize.to_sym, :through => :possessions,  :source => :owner, :source_type => possession_class.model_name 
```

所以关联名称必须是符号而不是字符串

```
 :clients   # ok
 'clients'  # will blow up 
```

呵呵：-\

# c# - 即使从复选框中选择了项目，列表视图中的选定项目计数 = 0

> ID：12348247
> 
> 赞同：0
> 
> 时间：2012-09-10T08:53:41.487
> 
> 标签：c#, listview

```
private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            int i=listView1.SelectedItems.Count;
            int j = listView1.SelectedIndices.Count;
            for (int k = 0; i < listView1.SelectedItems.Count; k++)
            {
                listView1.Items[k].Remove();
            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

当我从列表视图中选择值时，为什么它返回 count = 0 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:58:34.647

您正在修改您在 for 语句中使用的集合。看看从[集合](https://stackoverflow.com/questions/308466/how-to-modify-or-delete-items-from-an-enumerable-collection-while-iterating-thro)中删除项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:58:20.560

该属性`SelectedItems`返回被选中的项目，即通过单击文本进行标记（通常带有蓝色突出显示）。

要获取选中复选框的项目，请使用该`CheckedItems`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:00:40.200

您可以在以下位置调整您`DataBind`的 ListView：！IsPostBack 部分

你用 ViewState 持久化你的数据

```
If(! IsPostBack)
{
  //You don't pass by this section when you post => you don'y erase your selected values 

  //Bind your ListView
} 
```

您的数据被删除，因为当您通过单击发布时，您会重新构建您的 ListView 等删除选定的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:01:40.070

您可以使用 listview 的属性`CheckedItems`来检查所有已检查的项目。

# android - MediaScanner 在 sdcard 上运行，在 sdcard 被弹出后？

> ID：12348253
> 
> 赞同：0
> 
> 时间：2012-09-10T08:54:04.467
> 
> 标签：android, sd-card

下面的代码显示 MediaScanner 已*在 sdcard 上启动，它弹出后*为什么？发生了什么？

```
if(intent.getDataString().equals("file:///mnt/extsd"))
        {
            if(Intent.ACTION_MEDIA_SCANNER_STARTED.equals(intent.getAction()))
            {
                //Media scanner is started
            }
            else if(Intent.ACTION_MEDIA_SCANNER_FINISHED.equals(intent.getAction()))
            {
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:45:12.260

[可能这个问题会有所](https://stackoverflow.com/questions/11604220/cant-create-folder-in-extsd-card)帮助它关于`/mnt/extsd`以及如何正确使用SD卡（手段`Environment.getExternalStorageDirectory()`）。您还必须检查 SD 卡的状态。我的意思是：

```
boolean isExternalStorageWriteable = false, isExternalStorageReadable = false;
// Check SD Card for Read/Write
if (Environment.MEDIA_MOUNTED.equals(state)) {
    // We can read and write the media
    isExternalStorageWriteable = true;
    isExternalStorageReadable = true;
} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // We can only read the media
    isExternalStorageReadable = true;
} else {
    // Something else is wrong. It may be one of many other states, but
    // all we need
    // to know is we can neither read nor write
} 
```

# algorithm - 河内塔的二进制解决方案

> ID：12348254
> 
> 赞同：2
> 
> 时间：2012-09-10T08:54:15.953
> 
> 标签：algorithm, towers-of-hanoi

我正在阅读[Robert Sedgewick 的](http://books.google.co.in/books?id=pQRLfMngZ7sC)[*算法*](http://books.google.co.in/books?id=pQRLfMngZ7sC)

以下是第 213 页的摘录，涉及数字二进制表示中尾随零的数量。

> 对于 Hanoi 塔问题，与 n 位数对应的含义是该任务的简单算法。我们可以通过以下两个步骤将桩向右移动一个钉子，直到完成：
> 
> 1.  如果 n 为奇数，则将小圆盘向右移动（如果 n 为偶数，则向左）
> 2.  进行不涉及小磁盘的唯一合法移动。
> 
> 也就是说，在我们移动小 dsik 之后，另外两个 peg 包含两个磁盘，一个比另一个小。唯一不涉及小磁盘的合法移动是将较小的磁盘移动到较大的磁盘上。其他所有移动都涉及较小的磁盘，原因与其他所有数字都是奇数并且规则上的所有其他标记都是最短的相同。

上面的文字并没有进入我的脑海，即使在阅读了来自谷歌信息的各种参考资料之后。

请帮我举一个简单的例子，例如磁盘 N = 3。Disk3 最大，Disk1 最小，它们需要从 PegA 移动到 PegB。

```
Disk1
Disk2
Disk3
-------       ------------         ------------
Peg A            Peg B                 Peg C 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:29:38.273

这里首先要注意的是，在这个算法中，第一个 peg 被认为在最后一个 peg 的右边，最后一个 peg 被认为在第一个 peg 的左边。

重复应用列出的两个步骤将导致`n`磁盘塔被一个钉子向右移动。

在这种情况下`n = 3`,`n`是奇数，所以这两个动作是：

1.  向右移动`Disk1`一个钉子。
2.  做出唯一不涉及的合法举动`Disk1`。

通过重复这些动作给出以下解决方案：

1.  `Disk1: PegA -> PegB`（向右移动`Disk1`一个钉子）
2.  `Disk2: PegA -> PegC`（仅合法举动不涉及`Disk1`）
3.  `Disk1: PegB -> PegC`（向右移动`Disk1`一个钉子）
4.  `Disk3: PegA -> PegB`（仅合法举动不涉及`Disk1`）
5.  `Disk1: PegC -> PegA`（向右移动`Disk1`一个钉子）
6.  `Disk2: PegC -> PegB`（仅合法举动不涉及`Disk1`）
7.  `Disk1: PegA -> PegB`（向右移动`Disk1`一个钉子）

当他写*“与 n 位数字的对应关系”*时，Sedgewick 指的是这样一个事实，即您在`k`解决方案的步骤中移动的磁盘是对应`1`于二进制表示中的最低有效位的磁盘`k`。即`n = 3`：

```
step | bits | disk
------------------
  1  |  001 |  1
  2  |  010 |  2
  3  |  011 |  1
  4  |  100 |  3
  5  |  101 |  1
  6  |  110 |  2
  7  |  111 |  1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:59:18.827

那么这个特定问题的解决方案是：移动`Disk1`到`Peg B`，移动`Disk2`到`Peg C`，移动`Disk1`到`Peg C`，移动`Disk3`到`Peg B`，移动`Disk1`到`Peg A`，移动`Disk2`到`Peg B`，移动`Disk1`到`Peg B`。完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-13T11:22:35.317

如果这对任何人都有帮助，我在这里用 python 编写了一个完整的解决方案：[https ://github.com/goblinhack/towers-of-hanoi](https://github.com/goblinhack/towers-of-hanoi)

```
#!/usr/bin/env python
#
# The way to solve this is quite simple but does differ slightly for N = odd or even numbers of rings.
# 
# At each move you do either a) or b):
# 
# a) move the "1" value to the peg to the right, wrapping around to the first peg if needed
# 
# b) make the only other legal move
# 
# And then repeat either a) or b) for (2 ^ numrings) - 1.
# 
# So for N=3, you would do the above steps 7 times.
# 
# The catch that I alluded to earlier is that for N == odd (3,5,...), you will need to repeat this
# entire algorithm one more time as the above will only move the rings one peg to the right. 
#
import sys

#
# Print the tower so we can check our progress
#
def print_tower(pegs, nrings):
    npegs = len(pegs)
    for y in range(0, nrings):
        h = nrings - y
        for x in range(0, npegs):
            if len(pegs[x]) >= h:
                sys.stdout.write(str(pegs[x][len(pegs[x]) - h]) + " ")
            else:
                sys.stdout.write("| ")
        print("")
    print("-----")

def solve_tower(nrings, npegs):
    pegs = []
    for peg in range(0, npegs):
        pegs.append([])

    #
    # push the nrings on
    #
    for i in range(0, nrings):
        pegs[0].append(i + 1)

    #
    # For N == odd numbers we will need to repeat this twice
    #
    for tries in range(0, 1 + nrings % 2):
        print_tower(pegs, nrings)
        move_peg_one_right = True

        #
        # Repeat the steps a) or b) for 2^N-1 times
        #
        for moves in range(0, (1 << nrings) - 1):
            #
            # step a)
            #
            if move_peg_one_right:
                for peg in range(0, npegs):
                    if len(pegs[peg]):
                        if pegs[peg][0] == 1:
                            next_peg = (peg + 1) % npegs
                            pegs[next_peg].insert(0, pegs[peg].pop(0))
                            print("Moving value 1 from peg {} to peg {}\n".format(peg + 1, next_peg + 1))
                            break
            else:
                #
                # step b)
                #
                moved_a_ring = False
                for peg in range(0, npegs):
                    #
                    # Look for a ring on a peg to move
                    #
                    if len(pegs[peg]):
                        value = pegs[peg][0]
                        #
                        # Don't move the ring value "1" as we move that in a)
                        #
                        if value != 1:
                            for next_peg in range(0, npegs):
                                #
                                # The next peg is the one to the right of this peg. If we reach the last peg then we
                                # need to move to the first peg.
                                #
                                next_peg = (peg + next_peg) % npegs

                                #
                                # Don't move to the same peg; that would be silly
                                #
                                if next_peg == peg:
                                    continue

                                #
                                # If the destination peg is empty, move there
                                #
                                if not len(pegs[next_peg]):
                                    pegs[peg].pop(0)
                                    pegs[next_peg].insert(0, value)
                                    moved_a_ring = True
                                    print("Moving value {} from peg {} to empty peg {}\n".format(value, peg + 1, next_peg + 1))
                                    break
                                elif value < pegs[next_peg][0]:
                                    #
                                    # Else if the destination peg has a lower value, move there
                                    #
                                    pegs[peg].pop(0)
                                    pegs[next_peg].insert(0, value)
                                    moved_a_ring = True
                                    print("Moving < value {} from peg {} to peg {} dest {}\n".format(value, peg + 1, next_peg + 1, pegs[next_peg][0]))
                                    break
                    if moved_a_ring:
                        break

                if not moved_a_ring:
                    print("Error, failed to move")
                    sys.exit(1)

            print_tower(pegs, nrings)

            #
            # Alternate between a) and b)
            #
            move_peg_one_right = not move_peg_one_right

        print("Finished pass\n")

nrings = 3
npegs = 3
solve_tower(nrings, npegs) 
```

# php - 如何使用 PHP 数组表示图形数据结构

> ID：12348258
> 
> 赞同：3
> 
> 时间：2012-09-10T08:54:28.933
> 
> 标签：php, web-applications, graph

最近接到了一个小任务，就是以图数据结构为核心来做一个web应用。我从一个简单的路径优化问题的想法开始，它可以在几天内完成。问题是我无法为这项任务决定正确的框架。考虑到时间限制，我唯一能想到的就是只使用 PHP。

那么，如何使用 PHP 的自定义数据结构（数组）来表示图形数据结构。

此外，您能否建议一些其他框架，我可以在这些框架上完成这项任务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:42:49.763

您可以使用数组来保存邻接列表。

PHP 的数组有两种用途：它可以是对象*列表*，或者是*关联数组*，它将一个对象与另一个对象关联起来。您还可以将关联数组用作穷人的集合，方法是将集合中的数据用作关联数组中的键。由于通常将数据与顶点和边相关联，因此我们实际上可以自然地使用它。以下是无向图类的示例。

```
<?php

/**
 * Undirected graph implementation.
 */
class Graph
{
  /**
   * Adds an undirected edge between $u and $v in the graph.
   * 
   * $u,$v can be anything.
   *
   * Edge (u,v) and (v,u) are the same.
   * 
   * $data is the data to be associated with this edge.
   * If the edge (u,v) already exists, nothing will happen (the
   * new data will not be assigned).
   */
  public function add_edge($u,$v,$data=null)
  {
    assert($this->sanity_check());
    assert($u != $v);

    if ($this->has_edge($u,$v))
      return;

    //If u or v don't exist, create them.
    if (!$this->has_vertex($u))
      $this->add_vertex($u);
    if (!$this->has_vertex($v))
      $this->add_vertex($v);

    //Some sanity.
    assert(array_key_exists($u,$this->adjacency_list));
    assert(array_key_exists($v,$this->adjacency_list));

    //Associate (u,v) with data.
    $this->adjacency_list[$u][$v] = $data;
    //Associate (v,u) with data.
    $this->adjacency_list[$v][$u] = $data;

    //We just added two edges
    $this->edge_count += 2;

    assert($this->has_edge($u,$v));

    assert($this->sanity_check());
  }

  public function has_edge($u,$v)
  {
    assert($this->sanity_check());

    //If u or v do not exist, they surely do not make up an edge.
    if (!$this->has_vertex($u))
      return false;
    if (!$this->has_vertex($v))
      return false;

    //some extra sanity.
    assert(array_key_exists($u,$this->adjacency_list));
    assert(array_key_exists($v,$this->adjacency_list));

    //This is the return value; if v is a neighbor of u, then its true.
    $result = array_key_exists($v,$this->adjacency_list[$u]);

    //Make sure that iff v is a neighbor of u, then u is a neighbor of v
    assert($result == array_key_exists($u,$this->adjacency_list[$v]));

    return $result;
  }

  /**
   * Remove (u,v) and return data.
   */
  public function remove_edge($u,$v)
  {
    assert($this->sanity_check());

    if (!$this->has_edge($u,$v))
      return null;

    assert(array_key_exists($u,$this->adjacency_list));
    assert(array_key_exists($v,$this->adjacency_list));
    assert(array_key_exists($v,$this->adjacency_list[$u]));
    assert(array_key_exists($u,$this->adjacency_list[$v]));

    //remember data.
    $data = $this->adjacency_list[$u][$v];

    unset($this->adjacency_list[$u][$v]);
    unset($this->adjacency_list[$v][$u]);

    //We just removed two edges.
    $this->edge_count -= 2;

    assert($this->sanity_check());

    return $data;
  }

  //Return data associated with (u,v)
  public function get_edge_data($u,$v)
  {
    assert($this->sanity_check());

    //If no such edge, no data.
    if (!$this->has_edge($u,$v))
      return null;

    //some sanity.
    assert(array_key_exists($u,$this->adjacency_list));
    assert(array_key_exists($v,$this->adjacency_list[$u]));

    return $this->adjacency_list[$u][$v]; 
  }

  /**
   * Add a vertex. Vertex must not exist, assertion failure otherwise.
   */
  public function add_vertex($u,$data=null)
  {
    assert(!$this->has_vertex($u));

    //Associate data.
    $this->vertex_data[$u] = $data;
    //Create empty neighbor array.
    $this->adjacency_list[$u] = array();

    assert($this->has_vertex($u));
    assert($this->sanity_check());
  }

  public function has_vertex($u)
  {
    assert($this->sanity_check());
    assert(array_key_exists($u,$this->vertex_data) == array_key_exists($u,$this->adjacency_list));
    return array_key_exists($u,$this->vertex_data);
  }

  //Returns data associated with vertex, null if vertex does not exist.
  public function get_vertex_data($u)
  {
    assert($this->sanity_check());

    if (!array_key_exists($u,$this->vertex_data))
      return null;

    return $this->vertex_data[$u];
  }

  //Count the neighbors of a vertex.
  public function count_vertex_edges($u)
  {
    assert($this->sanity_check());

    if (!$this->has_vertex($u))
      return 0;

    //some sanity.    
    assert (array_key_exists($u,$this->adjacency_list));

    return count($this->adjacency_list[$u]);
  }

  /**
   * Return an array of neighbor vertices of u.
   * If $with_data == true, then it will return an associative array, like so:
   * {neighbor => data}.
   */
  public function get_edge_vertices($u,$with_data=false)
  {
    assert($this->sanity_check());

    if (!array_key_exists($u,$this->adjacency_list))
      return array();

    $result = array();

    if ($with_data) {
      foreach( $this->adjacency_list[$u] as $v=>$data)
      {
        $result[$v] = $data;
      }
    } else {

      foreach( $this->adjacency_list[$u] as $v=>$data)
      {
        array_push($result, $v);
      }
    }

    return $result;
  }

  //Removes a vertex if it exists, and returns its data, null otherwise.
  public function remove_vertex($u)
  {
    assert($this->sanity_check());

    //If the vertex does not exist,
    if (!$this->has_vertex($u)){
      //Sanity.
      assert(!array_key_exists($u,$this->vertex_data));
      assert(!array_key_exists($u,$this->adjacency_list));
      return null;
    }

    //We need to remove all edges that this vertex belongs to.
    foreach ($this->get_edge_vertices($u) as $v)
    {
      $this->remove_edge($u,$v);
    }

    //After removing all such edges, u should have no neighbors.
    assert($this->count_vertex_edges($u) == 0);

    //sanity.
    assert(array_key_exists($u,$this->vertex_data));
    assert(array_key_exists($u,$this->adjacency_list));

    //remember the data.
    $data = $this->vertex_data[$u];

    //remove the vertex from the data array.
    unset($this->vertex_data[$u]);
    //remove the vertex from the adjacency list.
    unset($this->adjacency_list[$u]);

    assert($this->sanity_check());

    return $data;
  }

  public function get_vertex_count()
  {
    assert($this->sanity_check());
    return count($this->vertex_data);
  }
  public function get_edge_count()
  {
    assert($this->sanity_check());

    //edge_count counts both (u,v) and (v,u)
    return $this->edge_count/2;
  }

  public function get_vertex_list($with_data=false)
  {
    $result = array();

    if ($with_data)
      foreach ($this->vertex_data as $u=>$data)
        $result[$u]=$data;
    else
      foreach ($this->vertex_data as $u=>$data)
        array_push($result,$u);

    return $result;
  }

  public function edge_list_str_array($ordered=true)
  {
    $result_strings = array();
    foreach($this->vertex_data as $u=>$udata)
    {
      foreach($this->adjacency_list[$u] as $v=>$uv_data)
      {
        if (!$ordered || ($u < $v))
          array_push($result_strings, '('.$u.','.$v.')');
      }
    }
    return $result_strings;
  }

  public function sanity_check()
  {
    if (count($this->vertex_data) != count($this->adjacency_list))
      return false;

    $edge_count = 0;

    foreach ($this->vertex_data as $v=>$data)
    {

      if (!array_key_exists($v,$this->adjacency_list))
        return false;

      $edge_count += count($this->adjacency_list[$v]);
    }

    if ($edge_count != $this->edge_count)
      return false;

    if (($this->edge_count % 2) != 0)
      return false;

    return true;
  }

  /**
   * This keeps an array that associates vertices with their neighbors like so:
   *
   * {<vertex> => {<neighbor> => <edge data>}}
   *
   * Thus, each $adjacency_list[$u] = array( $v1 => $u_v1_edge_data, $v2 => $u_v2_edge_data ...)
   *
   * The edge data can be null.
   */
  private $adjacency_list = array();

  /**
   * This associates each vertex with its data.
   *
   * {<vertex> => <data>}
   *
   * Thus each $vertex_data[$u] = $u_data
   */
  private $vertex_data = array();

  /**
   * This keeps tracks of the edge count so we can retrieve the count in constant time,
   * instead of recounting. In truth this counts both (u,v) and (v,u), so the actual count
   * is $edge_count/2.
   */
  private $edge_count = 0;
}

$G = new Graph();

for ($i=0; $i<5; ++$i)
{
  $G->add_vertex($i);
}

for ($i=5; $i<10; ++$i)
{
  $G->add_edge($i,$i-5);
}

print 'V: {'.join(', ',$G->get_vertex_list())."}\n";
print 'E: {'.join(', ',$G->edge_list_str_array())."}\n";

$G->remove_vertex(1);

print 'V: {'.join(', ',$G->get_vertex_list())."}\n";
print 'E: {'.join(', ',$G->edge_list_str_array())."}\n";

$G->remove_vertex(1);

print 'V: {'.join(', ',$G->get_vertex_list())."}\n";
print 'E: {'.join(', ',$G->edge_list_str_array())."}\n";
?> 
```

# android - 如何在android上动态截取屏幕截图

> ID：12348260
> 
> 赞同：0
> 
> 时间：2012-09-10T08:54:40.177
> 
> 标签：android, pdf, screenshot, jpeg

我正在eclipse上开发一个android应用程序。我想以编程方式截取模拟器的屏幕截图，作为 jpg 文件，当用户单击按钮时将其转换为 pdf。

我该如何获取，以及如何访问此保存的文件。

谢谢

* * *

我试过这个[答案](https://stackoverflow.com/a/5651242/1553955)，但我在这一行遇到了“ACCUWX 无法解析为变量”的问题：

```
String mPath = Environment.getExternalStorageDirectory().toString() + "/" + ACCUWX.IMAGE_APPEND; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:57:33.570

在日食中，

打开窗口 -> 打开透视图 -> DDMS

从 DDMS 的角度来看，

窗口 -> 显示视图 -> 设备

在设备视图中，您会在那里看到一个相机图标。那是快照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:52:40.397

如果您以编程方式拍摄快照（不使用设备视图），请查看[此答案。](https://stackoverflow.com/a/5651242/840669)

# java - HTTPUnit 代码中的错误

> ID：12348262
> 
> 赞同：1
> 
> 时间：2012-09-10T08:54:44.573
> 
> 标签：java, http-unit

我正在尝试学习 HTTPUnit 并阅读了[http://httpunit.sourceforge.net/doc/cookbook.html上提到的食谱](http://httpunit.sourceforge.net/doc/cookbook.html)

但是当我尝试这个非常简单的代码时

```
package httpUnit.test;    
import java.io.IOException;
import org.xml.sax.SAXException;
import com.meterware.httpunit.GetMethodWebRequest;
import com.meterware.httpunit.WebConversation;
import com.meterware.httpunit.WebLink;
import com.meterware.httpunit.WebRequest;
import com.meterware.httpunit.WebResponse;

/*** Hello world!**/

public class App{
    public static void main( String[] args ) throws IOException, SAXException {
        System.out.println( "Trying HTPUnit library");
        WebConversation wc = new WebConversation();
        WebRequest req = new GetMethodWebRequest("http://localhost:8080/proof/demo.html");
        WebResponse resp = wc.getResponse(req);

        /* WebLink[ ] link = resp.getLinks();
        for (int i=0; i<link.length; i++) {                                 
            System.out.println(link[i].getText());
        }
        System.out.println(link.length);
        */
    }
}; 
```

我收到以下错误：

```
TypeError: undefined is not a function. (httpunit; line 15)
at org.mozilla.javascript.NativeGlobal.constructError(NativeGlobal.java:597)
at org.mozilla.javascript.NativeGlobal.constructError(NativeGlobal.java:557)
Error continues..... 
```

和

```
Exception in thread "main" com.meterware.httpunit.ScriptException: Script '/*!
* jQuery JavaScript Library v1.6
* http://jquery.com/ 
```

有人可以弄清楚可能是什么问题。我无法理解。[我已经从http://mvnrepository.com/artifact/httpunit/httpunit/1.6.1](http://mvnrepository.com/artifact/httpunit/httpunit/1.6.1)创建了具有 maven 依赖项的 maven 项目

我在tomcat的证明文件夹中托管了demo.html，它在浏览器中打开得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:29:35.883

我认为问题仅出在javascript上。

结帐[http://httpunit.sourceforge.net/doc/faq.html#javascript](http://httpunit.sourceforge.net/doc/faq.html#javascript)

并使用 HttpUnitOptions.setScriptingEnabled(false);

我认为会的。

# c#-4.0 - 收集上的工作流关联

> ID：12348263
> 
> 赞同：0
> 
> 时间：2012-09-10T08:54:45.323
> 
> 标签：c#-4.0, workflow, workflow-foundation-4, workflow-foundation, workflowservice

我有以下工作流程

1.  接收活动

1a。创建文档集合

1.  发送活动（发送文档 ID 的集合）

2.  接收活动（CorrelationHandle-single document Id）

2.发送活动

我在第一个发送活动和第二个接收活动中发送相关句柄的集合，我希望相关句柄作为单个文档 ID。

目前，我已经实现了 1 个工作流与 1 个文档 ID 的关联，但现在我希望将 1 个工作流关联到多个文档 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:13:24.053

## 单键路径

好的，这不会像您目前拥有的那样工作，因为相关性仅靠一个键起作用。因此，除非您可以获取所有这些文档 ID 并构建一个可由后续调用者重建的密钥，否则您将不得不走另一条路。

## 儿童服务路径

我推荐的路径是有一个主要的工作流程，它遍历 id 并产生子工作流程，这些工作流程一旦开始就会持续存在——与传递给它们的文档 id 相关。此时，调用实体将调用可用的不同端点并托管许多实例（每个 id 一个），从而允许关联按预期工作。

# xcode - iPad：UIWebView 中的 PDF 有时首页空白（为什么以及如何解决？）

> ID：12348267
> 
> 赞同：0
> 
> 时间：2012-09-10T08:54:50.147
> 
> 标签：xcode, ipad, pdf, uiwebview

我的 iPad 应用程序使用 UIWebView 显示 PDF 文件。但是有时当我连续点击几个pdf时，pdf的第一页突然空白。当我第二次重新打开同一个pdf时，第一页又正常了。这种情况不时发生，并且不仅仅与特定的 pdf 文件相关联。

有什么想法或者你有类似的问题吗？解决方案？：/

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:04:51.553

在没有看到代码和 PDFS 的情况下，我敢打赌与内存相关的问题，因为您说这种情况发生在连续显示多个 PDF 时。事实上，`UIWebView`它在内存使用方面进行了高度优化，并且仅将页面的相关部分保存在内存中，因此可能以某种方式卸载了您的第一页。

您可以通过在您的应用程序委托中添加一些`NSLog`跟踪来检查是否是这种情况。`didReceiveMemoryWarning`如果您在空白页问题出现之前看到记录的跟踪，那么这将暗示它可能是内存问题。

如果我的假设是正确的，那么修复将强制网页刷新其内容。或者您可以尝试一种解决方法，只是为了使这个特定用例（快速连续浏览多个 PDF 文档）工作。在这两种情况下，我都需要更多细节来建议任何可能的实现。

# jquery - jquery自动完成选择用户并填充用户ID

> ID：12348268
> 
> 赞同：1
> 
> 时间：2012-09-10T08:54:50.540
> 
> 标签：jquery, modal-dialog, jquery-autocomplete

我有一个表单，用户键入名称并自动完成填充文本输入。它适用于以下代码：

```
var names = [<?php 
    $tmp = Array();
    foreach($usernames as $row) 
    $tmp[] = '"'.$row->firstname.' '.$row->lastname.'"'; 
    echo join(',', $tmp);
?>];

$( "#employee" ).focus().autocomplete(); 
```

和

```
<input type="text" name="employee" id="employee" class="required"/> 
```

我现在正试图更进一步，将用户 ID 填充到隐藏字段中，但我正在努力。names 数组很好，但它不再呈现自动完成，所以当你开始输入时，什么都不会出现。（这在模态中使用）。

这是我要使用的代码，有人知道为什么我不能让它工作吗？

```
<input type="text" name="employee" id="employee" class="required"/>
<input type="hidden" name="employee_id" id="employee_id" class="required"/> 
```

**JS**

```
 $(function() {
    var names = [<?php 
    $tmp = Array();
    foreach($usernames as $row) $tmp[] = 
    '{
                value: "'.$row->firstname.' '.$row->lastname.'",
                label: "'.$row->firstname.' '.$row->lastname.'",
                desc: "'.$row->id.'",
    }'; 
    echo join(',', $tmp);
?>];
    });

$(document).ready(dialogForms);
function dialogForms() {    
 $('a.menubutton').click(function() {
    var a = $(this);
    $.get(a.attr('href'),function(resp){
      var dialog = $('<div>').attr('id','formDialog').html($(resp).find('form:first').parent('div').html());
      $('body').append(dialog);
      dialog.find(':submit').hide();
      dialog.dialog({
        title: a.attr('title') ? a.attr('title') : '',
        modal: true,
        buttons: {
          'Save': function() {
                submitFormWithAjax($(this).find('form'));
                $(this).dialog('close');
                },
          'Cancel': function() {$(this).dialog('close');}
        },
        close: function() {$(this).remove();},
        width: 600,
        height: 500,        
        show: "fade",
        hide: "fade"
      });

        $( "#employee" ).autocomplete({
            minLength: 0,
            source: names,
            focus: function( event, ui ) {
                $( "#employee" ).val( ui.item.label );
                return false;
            },
            select: function( event, ui ) {
                $( "#employee" ).val( ui.item.label );
                $( "#employee_id" ).val( ui.item.desc );
                return false;
            }
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "</a>" )
                .appendTo( ul );
        };

var $ac_start_date = '<?php echo $ac_end_date ?>',
    $ac_start_date_flip = '<?php echo $ac_end_date_flip ?>',
    $ac_start_parsed = Date.parse($ac_start_date),
    _today = new Date().getTime();

// For Opera and older winXP IE n such
if (isNaN($ac_start_parsed)) { 
    $ac_start_parsed  = Date.parse($ac_start_date_flip);
}

var _aDayinMS = 1000 * 60 * 60 * 24; 

// Calculate the difference in milliseconds
var difference_ms = Math.abs($ac_start_parsed - _today);

// Convert back to days and return
var DAY_DIFFERENCE = Math.round(difference_ms/_aDayinMS);       
// do initialization here
$("#startdate").datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: '0:+100',
            minDate: '+1d',         
            maxDate: '+' + DAY_DIFFERENCE + 'd'
});

// do initialization here
$("#enddate").datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: '0:+100',
            minDate: '+1d',         
            maxDate: '+' + DAY_DIFFERENCE + 'd'
});

$("#doc").datepicker();

}, 'html');
return false;
});
}

function submitFormWithAjax(form) {
  form = $(form);
  $.ajax({
    url: form.attr('action'),
    data: form.serialize(),
    type: (form.attr('method')),
    dataType: 'script',
    success: function(data){
    $(this).dialog('close');
    // Refresh table
   }
  });
  return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:59:19.070

你可以使用 tagit 来做到这一点。我认为这是一个不错的选择，你可以实现你所需要的

检查这个 ->[我们如何使用 Jquery tagit 获取选定标签的 ID？](https://stackoverflow.com/questions/11665291/how-we-can-get-the-id-of-selected-tags-using-jquery-tagit/11925654#11925654)

# node.js - Node.js w/在回调中表达错误处理

> ID：12348274
> 
> 赞同：4
> 
> 时间：2012-09-10T08:55:16.753
> 
> 标签：node.js, express

我是 node.js 和 express 的新手。我的 app.js 文件中有以下内容作为最后的错误处理程序：

```
app.use(function(err, req, res, next){
  // we may use properties of the error object
  // here and next(err) appropriately, or if
  // we possibly recovered from the error, simply next().
  res.status(err.status || 500);

  console.log(err);

  var errMsg = "An internal error occurred. Please notify your system administrator.";

  // respond with json
  if (req.accepts('json')) {
    res.send({error: errMsg});
    return;
  }

  // respond with html page
  if (req.accepts('html')) {
    res.render('500', errMsg);
    return;
  }

  res.type('txt').send(errMsg);
}); 
```

当我终止数据库服务器或以其他方式引发“中间件”级别错误时，它在测试期间对我有用，但我不确定当回调收到错误时它是否也会启动？我一直在我的回调中使用这样的东西：

```
if(err) {
    console.log(err);
    res.send(500, {error: err});
} 
```

但我想更好地遵守 DRY 原则并找出一种方法来处理全局（跨模块）回调中的错误，而不是编写一堆相同的代码。如果中间件“catchall”不起作用，我是否坚持每个模块的全局函数？希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:33:53.227

For now I ended up just creating a global error handler module:

```
exports.globalErrorHandler = function(err, req, res) {
  if(!err || !req || !res) return;

  console.log(err);

  var errMsg = "An internal error occurred. Please notify your system administrator.";

  // respond with json
  if (req.accepts('json')) {
    res.send({error: errMsg});
    return;
  }

  // respond with html page
  if (req.accepts('html')) {
    res.render('500', errMsg);
    return;
  }

  res.type('txt').send(errMsg);
} 
```

and requiring it in the modules that need it:

```
var gh = require('../helpers/globalErrorHandler.js');

// Inside a callback
if(err) {
    gh.globalErrorHandler(err, req, res);
    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:14:31.687

查看[连接域](https://github.com/baryshev/connect-domain)中间件。它可以帮助您捕获异步回调、超时等内部的所有错误。仅适用于 node > 0.8.0。

# javascript - 客户端 RadioButtonList 验证

> ID：12348275
> 
> 赞同：0
> 
> 时间：2012-09-10T08:55:21.227
> 
> 标签：javascript, asp.net

```
 function IsChecked()
     {
    var rblActive = document.getElementById("<%=rblActive.ClientID %>");
    var item = rblActive.getElementsByTagName("input");
    var IsItemChecked = false;
    for (var i = 0; i < item.Length; i++)
     {
        if (item[i].checked) 
        {
        IsItemChecked = true;
        }

      }
        if (IsItemChecked == false) 
          {
          alert("Check Yes or No");
          rblActive.focus();
          return false;
           }
          return true;
      } 
```

这是我尝试过的代码。当控制进入for循环时，即使单选按钮列表中的项目被选中或不被选中，它也会直接出来而不做任何操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:09:43.553

你也可以用 jQuery 做同样的事情。

```
function ValidateControls() {
    var count = 0;
    $("input[type=radio]").each(function () {
        if ($(this).attr('checked')) {
            count++;
        }

    });

    if (count > 0) {
        return true;
    }
    else {
        alert("No Row Selected");
        return false;
    }
} 
```

# css - css 3 divs定位，两个左右浮动

> ID：12348277
> 
> 赞同：0
> 
> 时间：2012-09-10T08:55:24.747
> 
> 标签：css, html, css-float, alignment

我的html代码是

```
<div style="border:1px solid red; height:140px;">
    <div style="width:100px; float:left; border:1px solid blue;">
        left
    </div>
    <div style="width:100px;  float:right; border:1px solid blue; ">
        right
    </div>
    <div style="border:5px solid green;">
        middle
    </div>
</div> 
```

为什么绿色边框会扩展到 100% 的宽度并覆盖左右 div？如何修复它以覆盖唯一以“middle”开头并在“right”之前结束的块？刚试过`position:relative;`，但没有帮助。

代码示例在这里： [jsFiddle](http://jsfiddle.net/A6qWE/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:57:06.317

写**溢出：隐藏**到它。

```
<div style="border:5px solid green;overflow: hidden;">
            middle
</div> 
```

检查这个[http://jsfiddle.net/A6qWE/1/](http://jsfiddle.net/A6qWE/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:00:13.953

添加`overflow:auto`

[http://jsfiddle.net/A6qWE/7/](http://jsfiddle.net/A6qWE/7/)检查这个演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:58:05.647

添加`overflow:hidden`到包含单词 middle 的 div 的样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:01:12.940

向中间 div 添加边距`margin: 0 100px`

见代码示例[@jsFiddle](http://jsfiddle.net/A6qWE/8/)

# templates - Smarty 子模板块在更新时中断

> ID：12348279
> 
> 赞同：0
> 
> 时间：2012-09-10T08:55:38.057
> 
> 标签：templates, include, block, template-engine, smarty3

我正在尝试使用 Smarty for php 创建一个模板。我希望模板可重用，因此我继承它并使用块替换值。这很好用，除非我需要在子模板中访问这些块值。我使用 smarty 的 {include} 函数调用这些子模板。

例子：

模板父（template.tpl）：

```
<html>
     <head>
         {include file=sub_template.tpl}
     </head>

     <body>
         {block name=title}No Title Provided{/block}
     </body>
</html> 
```

子模板 (sub_template.tpl)

```
 <title>{block name=title}No Title Provided{/block}</title> 
```

模板-子 (template_child.tpl)

```
 {extends file="template.tpl"}
     {block name=title}My Website!{/block} 
```

当我查看该站点时，输出是：

```
<html>
     <head>
         <title>No Title Provided</title>
     </head>

     <body>
         My Website!
     </body>
</html> 
```

在做了一些研究之后，我确实在 smarty 的网站上看到了关于将 {include} 函数包含在虚拟 {block} 标记中的注释，但在使其工作方面取得了不同程度的成功。

> 注意：如果你有一个包含在 {include} 中的子模板并且它包含 {block} 区域，那么它只有在从周围的 {block} 中调用 {include} 本身时才有效。在最终的父模板中，您可能需要一个虚拟 {block}。（http://www.smarty.net/docs/en/advanced.features.template.inheritance.tpl）

因此，我尝试过：

```
<html>
     <head>
         {block name=dummy}{include file=sub_template.tpl}{/block}
     </head>

     <body>
         {block name=title}No Title Provided{/block}
     </body>
</html> 
```

在我对子模板进行任何更改之前，这似乎有效。一旦对子模板进行更改，它就会再次停止响应子模板中设置的块值。

我是否误解了通知所指的关于将 {include} 放置在虚拟块标签中的内容，或者这是 smarty 的错误？我目前没有使用缓存，但我的另一个想法是这可能是一个子模板缓存问题。

任何见解将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:27:53.303

确实，这些模板被编译并缓存到模板目录中。这就是为什么清除模板目录暂时解决了这个问题。模板缓存不同于 smarty 也支持的显式缓存。我发现模板缓存可以被覆盖：

```
$smarty->compile_check = true;
$smarty->force_compile = true; 
```

这允许对模板进行更改，而无需在开发过程中更改后删除缓存。

# mongodb - 如何获取当前在 mongoDB 分片集群中使用的分片服务器的大小

> ID：12348282
> 
> 赞同：0
> 
> 时间：2012-09-10T08:55:52.150
> 
> 标签：mongodb, sharding

我已经建立了一个分片集群，由于我的数据在无缝增长，我需要继续监控数据的大小并在集群中添加新的分片。

是否有一个命令可以让我知道在任何时间点每个分片服务器中使用了多少大小。

例如。假设我有一个数据库，mongos 控制台中的 show dbs 命令显示如下

```
mongos> show dbs
company 0.375GB
config  0.046875GB
test    0.0625GB 
```

我想知道每个分片服务器中使用了多少数据。用于公司数据库。

我实现的架构如下

我有一个单独的数据库分片，其中每个集合都是分片的。3 台运行 mongod 实例的分片服务器 1 台运行 mongos 的服务器 1 台运行配置实例的服务器

我的整个应用层直接与 mongos 对话。

我需要知道这一点，因为我计划构建一个 cron 来检查分片服务器的可用大小，如果它超过一定数量，它将向管理员发送通知以表示关注。

提前感谢您回复此帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:40:43.947

在 mongoDB 用户组中发布后，我得到了关于我们需要如何执行此操作以及可以使用哪些命令的解决方案

命令

要了解每个分片服务器中特定数据库的空间利用率，我们必须使用

```
db.stats() 
```

了解我们必须使用的每个分片服务器中特定集合的空间利用率

```
db.<collectionname>.stats() 
```

现在要在 php daemon/cron 中使用它，我可以使用 php mongo 驱动程序调用这些命令

```
$con= new Mongo()

$stats=$con->dbName->command(array('dbStats' => 1));  // for db.stats() 
```

`$stats=$con->dbName->command(array('collStats' => 'collection_name'));`

我仍然找不到从 Zend shanty mongo 执行此类命令的任何方法，但我可以使用默认的 PHP pecl mongo db 驱动程序来实现这一点

感谢大家对本帖的回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:08:33.110

有通用的监控解决方案（nagios、zabbix 等）。它们监控您机器的许多参数，并且可以设置为在某些情况下发送警报。你不需要重新发明轮子。

如果您的应用服务器空间不足（因为它的日志占用了所有空间），这种通用解决方案也可以警告您。您专门的 mongodb cron 作业将无法做到这一点。

# django-south - South，使用日期过滤器加载数据和迁移

> ID：12348287
> 
> 赞同：1
> 
> 时间：2012-09-10T08:56:05.920
> 
> 标签：django-south

有没有办法使用日期过滤器迁移所有应用程序？

我有几个来自我的 django 项目的几个状态的转储。它们是使用 dumpdata 命令生成的。我有一个加载其中一个转储的 testcaseinit 脚本。

问题是，loaddata 不会使用其结构重新创建数据库。我有下面的脚本，但它在一开始就迁移到了很多东西：

```
./drop.py                     # a home-made script that drops all tables from database
./manage.py migrate --all     # creates the whole database as the current version of the project
./manage.py loaddata $1       # loads the fixture 
```

但我需要类似的东西：

```
./drop.py
./manage.py migrate --all --until-date=creation_date_of_$1
./manage.py loaddata $1
./manage.py migrate --all 
```

# iphone - 使用 Qualcomm 库的 IOS 应用程序崩溃

> ID：12348289
> 
> 赞同：2
> 
> 时间：2012-09-10T08:56:22.043
> 
> 标签：iphone, ios5, opencv, augmented-reality, qcar-sdk

我正在为我的应用程序使用 Qualcomm 库。我的应用程序在 iPhone 4S 上运行良好，但是当我尝试在 iPhone 4 上安装时它崩溃了。相关代码为：

```
QCAR::Frame frame = state.getFrame();
int frame.getNumImages(); 
```

与应用程序崩溃就`getNumImages`行了。

我已经在带有泄漏选项的仪器上测试了该应用程序，它向我显示了泄漏：

```
NSInteger initSuccess = QCAR::init(); 
```

带有“Heavies Backtrace”消息。

我怎样才能防止它崩溃？

# html - IE9 字体不呈现

> ID：12348290
> 
> 赞同：0
> 
> 时间：2012-09-10T08:56:27.333
> 
> 标签：html, css, fonts, internet-explorer-9

我检查了搜索，发现了许多资源，但是没有一个有效。

Chrome、FF、IE7+8 都可以很好地加载字体“Gotham-Book”；但是在 IE 9 中它只显示默认浏览器。

在 css 中，这是我的 @font-face

```
@font-face {
font-family: "Gotham-Book";
src: url('../Fonts/Gotham-Book.eot?') format('embedded-opentype'), 
     url('../Fonts/Gotham-Book.otf') format("opentype"),
     url('../Fonts/Gotham-Book.ttf')  format('truetype');
} 
```

我拿到 ？在[此处](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax/)的网址中。

我将此添加到我的 httpd.conf 中（如堆栈中所建议的那样）

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "http://localhost"
</IfModule>
</FilesMatch> 
```

无济于事。有人对 IE 9 有任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:59:08.477

IE9 使用 woff 格式的字体。看起来你没有提供它。

# python - 如何使用正则表达式在 python 的命令行中将多个文件作为参数传递？

> ID：12348291
> 
> 赞同：0
> 
> 时间：2012-09-10T08:56:26.277
> 
> 标签：python, windows-7, command-line, tags, command-line-arguments

我无法做到这一点

> ptags.py *.py

或者

> 蟒蛇*.py

我收到一条错误消息“无法打开名为 *.py 的文件”

但我可以使用此命令在 vim 中打开所有 python 文件

> vim *.py

Windows 7 命令提示符中的 python 2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:04:24.563

我不确定当出现多个源文件时解释器的明智行为是什么 - 如果您只想让它执行`.py`当前目录中的所有文件，那么您应该明确。

（注意 - 有一段时间没有使用 Windows 命令行了，所以这是 OTTOMH）：

```
for %i in (*.py) do python %i 
```

另一方面 - 如果您只执行单个源文件，并且想要扩展匹配项 - 然后查看`glob`or `os.listdir`and co。并在您的代码循环中...类似于：

```
import sys
from glob import glob

in_pattern = sys.argv[1]
for filenames in glob(in_pattern):
    print filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:00:37.433

您不能使用标准的 Windows `cmd`shell。您可以使用 Cygwin 中的 bash 之类的东西，也许是 PowerShell。

如果你想像Python`*.py`一样从应用程序打开，那么你可以使用module.`vim``glob`

# android - Facebook登录一直失败

> ID：12348292
> 
> 赞同：0
> 
> 时间：2012-09-10T08:56:30.077
> 
> 标签：android, facebook

在开始之前，最近有人问了一个非常[相似的问题](https://stackoverflow.com/questions/12332909/cancel-url-url-is-not-correctly-formatted)，但我面临着其他几个问题，并想添加一些上下文。

基本上，很晚了，我目睹了我的 Android 应用程序中的 Facebook 功能登录对于新用户（之前没有授权该应用程序）会一直失败。然而，这不是一个反复出现的问题，所以我有点忽略了它。但现在这种情况似乎发生得太频繁了。

我绝对确定本地应用程序的设置或 FB 设置页面没有进行任何更改。

错误有两种变体-

一个简单的“发生错误。再试一次。” 另一个提供了更详细的输出。

![在此处输入图像描述](../Images/98379583d900a6ecf6153074d13ad25f.png)>>>>>![在此处输入图像描述](../Images/ecbfcadfe30de48290ccc3e2eff338f0.png)

但是，我不确定我需要进行哪些更改（如果有的话）。非常感谢您对此的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:08:32.507

在您的 facebook 开发人员帐户中，尝试转到您的应用程序设置-> 高级并在身份验证中选择本机/桌面。这应该至少消除第一个错误。

我今天创建了一个新应用程序，我也面临第二个错误。但是对于较旧的项目，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:06:01.143

已经提交了一个[错误报告](https://developers.facebook.com/bugs/280811108698311)，现在已经关闭。

# html - 仅使用 css 而不使用 javascript 将 html 表强制为单个堆叠列

> ID：12348294
> 
> 赞同：9
> 
> 时间：2012-09-10T08:56:35.690
> 
> 标签：html, css, html-table

我正在创建一个 html 模板，该模板包含用于布置表单的表格。我可以完全控制包装表格而不是表格本身的 html。该表在发送到客户端之前被注入到我的模板中。我无法控制这一切。我唯一可以控制的是包装表格和任何 CSS 的 html。

该表是一个两列的表，如下所示：

```
<table>
  <tr>
    <td>Column 1</td>
    <td>Column 2</td>
  </tr>
  <tr>
    <td>this is column 1</td>
    <td>this is column 2</td>
  </tr>
</table>

-------------------------------------------------
|Column 1                   |Column 2           |
-------------------------------------------------
|this is column 1           |this is  column 2  |
------------------------------------------------- 
```

但是，如果我们可以将其显示为一个堆叠的列，我会更喜欢。

```
----------------------------
|Column 1                   |
-----------------------------
|this is column 1           |
-----------------------------
|Column 2                   |
-----------------------------
| this is column 2          |
----------------------------- 
```

有没有办法只使用 CSS 而不是 Javascript 来实现这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-10T09:23:47.233

尝试将此添加到您的 CSS：

```
td {
  display: table-row;
} 
```

干杯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-27T06:13:35.023

我最近遇到了类似的问题，似乎找到了一个很好的解决方案。由于频繁的误用，表格的评价很差，但当需要在可变宽度的视口中显示*数据网格时，表格确实是最精简的选择。*

原始问题的答案仍然是**否定**的。为了在没有 JavaScript 的情况下解决这个问题，*必须*能够编辑表格标记。

桌子看起来……好吧……当被拉宽时，但被压扁时看起来很糟糕。`span.label`只有通过向每个单元格（例如&`span.data`元素）添加上下文标记，“响应式”表才有可能。默认情况下，我们可以轻松隐藏这个新的多余输出，并且仅在处于响应式视图状态时才显示它。

```
table.responsive td .label {
  display: none;
}
```

```
<table class="responsive">
    <thead>
        <tr>
            <th>Column Foo</th>
            <th>Column Bar</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="label">Column Foo</span><span class="data">Baz</span></td>
            <td><span class="label">Column Bar</span><span class="data">Qux</span></td>
        </tr>
    </tbody>
</table>
```

当处于响应视图状态时，隐藏`thead`元素并显示`.label`元素。

```
table.responsive {
  width: 100%;
}
table.responsive td .label {
  display: none;
}

table.responsive th {
  background-color: #ddd;
}

table.second {
  margin-top: 5em;
}

@media screen and (max-width:640px) {
  table.responsive thead {
    display: none;
  }
  table.responsive tbody th,
  table.responsive tbody td {
    display: block;
  }

  table.responsive td span {
    display: block;
  }
  table.responsive td .label {
    background-color: #ddd;
    font-weight: bold;
    text-align: center;
  }
}
```

我创建了一个更[详细](https://github.com/yesnoio/responsive-table)地涵盖解决方案的存储库。单击[此处](https://yesnoio.github.io/responsive-table/success.html)查看它的工作原理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T09:32:31.140

    简单地; 不可以。如果没有一些 JavaScript，您无法将行将 2 列的表转换为 1 列的表。
    要么告诉表格的编码人员以这种方式创建表格，要么简单地使用 JavaScript 重新构造表格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T09:13:43.023

不，如果不更改标记，这是不可能*的。*HTML 中的表格结构为*行*，而不是*列*。在您提供的示例中，**您正在重新排序内容**：

**原始订单：**
`Column 1 -> Column 2 -> this-is-col-1 -> this-is-col-2`

**新订单：**
`Column 1 -> this-is-col-1 -> Column 2 -> this-is-col-2`

为什么我说“*不可能*”？好吧，使用绝对定位和类似的技术，您也许可以一起破解您想要的布局 - 但是有一个 CSS 伤害的世界等待，因为我不希望这种方法在真实页面中发挥出色。

* * *

附加说明：为了添加“重新排序”问题，可能更容易完成的事情是这种布局，其中顺序保持不变：

```
----------------------------
|Column 1                   |
-----------------------------
|Column 2                   |
-----------------------------
|this is column 1           |
-----------------------------
| this is column 2          |
----------------------------- 
```

但这显然不是你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T09:43:52.427

您可以使用`display:block;`.

看到这个小提琴：http: [//jsfiddle.net/R53KH/](http://jsfiddle.net/R53KH/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T09:44:28.067

我能想到的唯一解决方案是更改您的标记。我会以这样的方式更改它，以获取一列并将其写为标记中的一行。这是我创建的小提琴：http: [//jsfiddle.net/MHsxU/](http://jsfiddle.net/MHsxU/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-11T17:17:38.423

**仍然有问题并且在 Chrome 中？**

对于那些仍然有问题的人（比如我），请检查您`<!DOCTYPE html>`的文档头部。如果您不这样做，Chrome 似乎会完全忽略您添加和保留的任何内容`display: table-cell`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-02T03:45:30.880

实际上，这非常简单（可以用 2 行 css 完成）：将 td 宽度设置为 100% 并设置溢出：自动。您的第二列将自动环绕。

# regex - Powershell -creplace 在行尾找不到表达式

> ID：12348299
> 
> 赞同：1
> 
> 时间：2012-09-10T08:56:47.157
> 
> 标签：regex, powershell, replace, newline, match

我正在尝试使用 Powershell 在行尾查找和替换一些文本。(ascii, txt, windows) 我需要使用给定的脚本来执行此操作，该脚本已用于字符串替换：

```
$inputText = [system.IO.File]::ReadAllText("Text.txt")

$regex = '\\DE$|\DE_02'

$regex > test.txt

$th = [system.IO.File]::ReadAllText("test.txt")

foreach($expression in $th) {

 if ($expression -eq 'EOF') { break }

 $parts = $expression.Split("|")

 if ($parts.Count -eq 2) {

     $inputText = $InputText -creplace $parts

     echo $inputText | out-file "Text_neu.txt" -enc ascii
 }
} 
```

到目前为止，该 cmdlet 工作正常，但无法匹配行尾 ($) -.- 我也尝试了 `r`n 而不是 $ 但没有奏效...

当我这样尝试时：

```
$inputText = [system.IO.File]::ReadAllText("Text.txt")

$inputText.Replace("\DE\`r\`n","\DE_02\`r\`n") | Out-File Text_neu.txt 
```

它已正确更换。

如何更改现有脚本以使其也可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:13:34.290

我不确定我是否正确理解了您的脚本，但我认为您的问题是，您正在替换整个文本而不是单行。

所以`$`不是一行的结尾（`\r\n`）**，它将默认匹配字符串的结尾！**

您可以使用 inline 修饰符来修改此行为`(?m)`。这将改变 的行为`$`以匹配行尾。

尝试

```
$regex = '(?m)\\DE$|\DE_02' 
```

作为你的正则表达式。

# mysql - 通过 ENUM 值检索 SUM(count)

> ID：12348300
> 
> 赞同：3
> 
> 时间：2012-09-10T08:56:47.803
> 
> 标签：mysql, sql

这是我的表的一个例子：

```
drug_id | route (enum) | count
------------------------------
1       | PO           | 2
1       | IV           | 4
1       | IV           | 6
2       | PO           | 1
2       | PO           | 5
2       | IV           | 2 
```

这就是我需要信息的方式。基本上它`SUM(count)`但在每个“路线”的列中：

```
drug_id | PO | IV 
-----------------
1       | 2  | 10
2       | 6  | 2 
```

我假设我需要一个支点，我试图了解它，但我不能为我的生活拼凑一个简洁的查询，这将是可行的。

我试过这样的事情：

```
SELECT drug_id, PO, IV 
FROM 
    (
        SELECT drug_id, SUM(count) as PO, '0' as IV FROM `core_reports_antiinfectives` WHERE route="PO"
        UNION
        SELECT drug_id, SUM(count) as IV, '0' as PO FROM `core_reports_antiinfectives` WHERE route="IV"
    ) aa 
```

然而，这给了我`0`所有的`IV`专栏，而且我不相信它是合适的——它需要“分组”`drug_id`并将这些专栏放在一起，我也坚持这一点。

有什么我想念的吗？还是有更好的方法来解决它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:01:15.147

尝试这个

```
SELECT drug_id,
        SUM(case route when 'po' then `count` else 0 end) totalPO,
        SUM(case route when 'iv' then `count` else 0 end) totalIV
FROM core_reports_antiinfectives
GROUP BY drug_id 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/25f2d/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:58:37.270

```
SELECT   drug_id,
         SUM(IF(route='PO',count,NULL)) AS PO,
         SUM(IF(route='IV',count,NULL)) AS IV
FROM     core_reports_antiinfectives
GROUP BY drug_id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/894146/1/0)上查看。

# android - 如何在顶部和底部栏显示 ActionBarSherlock 菜单项？

> ID：12348301
> 
> 赞同：3
> 
> 时间：2012-09-10T08:56:49.390
> 
> 标签：android, android-layout, contextmenu, actionbarsherlock, menuitem

我目前正在尝试使用 ActionBar Sherlock 实现“动作模式”。当“动作模式”启动时，我想让一些菜单项（其中 2 个）显示在顶部操作栏上，而其他一些（5 个项目）显示在底部操作栏上。

我已将此配置添加到我的 AndroidManifest.xml 文件中。

```
<activity
   android:name=".MyActivity"
   android:label="@string/myActivity"
   android:uiOptions="splitActionBarWhenNarrow" > 
```

这是我的 oncreateActionMode ：

```
 @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
      menu.add(getResources().getString(R.string.menu_1))
          .setIcon(getResources().getDrawable(R.drawable.ic_menu_1))
          .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

      menu.add(getResources().getString(R.string.menu_2))
          .setIcon(getResources().getDrawable(R.drawable.ic_menu_2))
          .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

      menu.add(getResources().getString(R.string.menu_3))
          .setIcon(
              getResources().getDrawable(R.drawable.ic_menu_3))
          .setShowAsAction(
              MenuItem.SHOW_AS_ACTION_IF_ROOM
                  | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

      menu.add(getResources().getString(R.string.menu_4))
          .setIcon(
              getResources().getDrawable(R.drawable.ic_menu_4))
          .setShowAsAction(
              MenuItem.SHOW_AS_ACTION_IF_ROOM
                  | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

      menu.add(getResources().getString(R.string.menu_5))
          .setIcon(
              getResources().getDrawable(R.drawable.ic_menu_5))
          .setShowAsAction(
              MenuItem.SHOW_AS_ACTION_IF_ROOM
                  | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

      menu.add(getResources().getString(R.string.menu_6))
          .setIcon(
              getResources().getDrawable(R.drawable.ic_menu_6))
          .setShowAsAction(
              MenuItem.SHOW_AS_ACTION_IF_ROOM
                  | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

      menu.add(getResources().getString(R.string.menu_7))
          .setIcon(
              getResources().getDrawable(R.drawable.ic_menu_7))
          .setShowAsAction(
              MenuItem.SHOW_AS_ACTION_IF_ROOM
                  | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

      return true;
    } 
```

使用此配置，我有顶部和底部操作栏，但**我的所有菜单项**都显示在底部操作栏上。问题是我想让前两个菜单项位于顶部操作栏上，其余 5 个位于底部操作栏上。可能吗 ？

你们对我应该如何进行有一些想法吗？

多谢 ...

# php - Uncaught SyntaxError: Unexpected token < in one host but not in another for the same applicaiton

> ID：12348306
> 
> 赞同：1
> 
> 时间：2012-09-10T08:56:56.567
> 
> 标签：php, jquery, mysql, autocomplete

在我们的应用程序中使用 JQuery Autcomplete 时，我们收到错误“Uncaught SyntaxError: Unexpected token <”。我们在一台主机中收到此错误，但在另一台主机中没有。两台主机都使用相同的代码托管相同的应用程序。

在 Chrome 控制台中，错误详情如下：

```
Uncaught SyntaxError: Unexpected token <           autocomplete.js:123
$.autocomplete.source.$.ajax.success               autocomplete.js:123
jQuery.Callbacks.fire                              jquery-1.7.2.js:1075
jQuery.Callbacks.self.fireWith                     jquery-1.7.2.js:1193
done                                               jquery-1.7.2.js:7538
jQuery.ajaxTransport.send.callback                 jquery-1.7.2.js:8324 
```

在这个问题上的任何帮助都将受到高度重视。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:58:19.283

从您的 php 代码看来，它正在使用 json 对象返回任何空格或错误消息。

*   检查 php 代码是否有错误。

*   检查您是否正确上传了文件

*   检查您的json是否有任何其他来自php代码的回显

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T06:38:23.803

更改您的 autcomplete_min_.js（替换为 jquery-ui.js）

# ios - 使用变量加载 WebView

> ID：12348311
> 
> 赞同：0
> 
> 时间：2012-09-10T08:57:27.630
> 
> 标签：ios, uiwebview, nsstring, nsurlrequest

我正在尝试完成一个非常简单的任务，即加载具有变量的 WebView。我希望将变量从objective-c 传递给远程PHP 文件。我使用的代码似乎不起作用。该变量有效，但我无法将其传递给 WebView 读取的 PHP 文件。任何帮助都会很棒！

```
 NSString *userId = [[NSUserDefaults standardUserDefaults]
                        stringForKey:@"userId"];

[webViewFirst loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.website.com/page.php?userId=%@",userId]]]; 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:02:12.130

尝试`+[NSString stringWithFormat]`构建 URL 字符串：

```
NSString *userId = <#whatever#>;
NSString *link = [NSString stringWithFormat:@"http://www.website.com/page.php?userId=%@", userId]
[webViewFirst loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:link]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:13:09.393

NSURL URLWithString 不支持字符串格式，所以你不能像你试图做的那样使用它。

相反，会发生的`,`是使用了 C 运算符，它只是对两个表达式进行排序：`@"http://www.website.com/page.php?userId=%@"`和`userId`，并计算为最后一个。

使用`stringWithFormat`它来做对：

```
[webViewFirst loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.website.com/page.php?userId=%@",userId]]]]; 
```

# objective-c - 什么是 __NSBlockVariable__ 以及为什么它会因无法识别的选择器发送到实例错误而崩溃？

> ID：12348312
> 
> 赞同：1
> 
> 时间：2012-09-10T08:57:30.707
> 
> 标签：objective-c

我有如下调用堆栈的崩溃报告。由于我无法重新生成错误，我必须猜测发生了什么。

```
NSInvalidArgumentException
---------------------
-[__NSBlockVariable__ profile_data]: unrecognized selector sent to instance 0xab2f620
---------------------
0 CoreFoundation 0x378688a7 __exceptionPreprocess + 186
1 libobjc.A.dylib 0x35d6e259 objc_exception_throw + 32
2 CoreFoundation 0x3786ba9b -[NSObject doesNotRecognizeSelector:] + 174
3 CoreFoundation 0x3786a915 ___forwarding___ + 300
4 CoreFoundation 0x377c5650 _CF_forwarding_prep_0 + 48
5 TouchPalDialer 0x0005096f -[InfoEditViewControllerNew textFieldDidEndEditing:] + 134 
```

引发崩溃的代码应该类似于

```
profile_data_manager.profile_data.name = [textField.text stringByTrimmingCharactersInSet:whitespace]; 
```

profile_data_manager 肯定是类类型 ProfileDataManager，并且肯定有 property@property(nonatomic, retain) ProfileModel *profile_data;

我不知道为什么 profile_data_manager 变成了**NSBlockVariable**，以及为什么它不能识别 profile_data。

我看到这篇文章[Calling delegate method, unrecognized selector because sent to wrong object](https://stackoverflow.com/questions/8369895/calling-delegate-method-unrecognized-selector-because-sending-to-wrong-object)说将非原子更改为原子解决了他的问题。

我不确定我的崩溃是否出于同样的原因。如果有人可以向我展示一些关于 NSBlockVariable 的资源解释，那就太好了，这样我就可以更好地理解原因。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T04:02:46.043

因为您的对象准备通过 ARC 发布。要解决此问题，请确保将变量放在全局变量中，因此，它仅在父对象释放时才释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:08:59.270

您的项目使用 ARC 吗？我假设不是。确保你没有过度释放`profile_data_manager`。

以我的经验，这种类型的错误意味着一个对象已过早释放，并且它的内存已被重用于保存新对象的实例。在这种情况下，一个`NSBlockVariable`.

您可以尝试对您的项目进行分析构建以查找可能的引用计数（保留/释放）错误。

您还可以尝试在打开僵尸的情况下运行您的项目...（请参阅 Instruments 中的分配工具并启用僵尸选项）。这可以跟踪引用计数错误。（假设这*是*一个引用计数错误）......但这似乎很可能。

# php - cURL - 使用 curl 时未下载文件

> ID：12348314
> 
> 赞同：0
> 
> 时间：2012-09-10T08:57:34.397
> 
> 标签：php, curl, youtube

对于我想要做的事情，我在 CLI 中使用 PHP5 和 cURL 扩展。我正在尝试从 youtube 的服务器下载文件，它适用于任何导航器，链接是这样的；

`http://youtube.com/get_video_info?video_id=VIDEO_ID

示例：http://youtube.com/get_video_info ?video_id= [9pQxmD6Bhd](http://youtube.com/get_video_info?video_id=9pQxmD6Bhd)

当我通过导航器访问此文件时，它会提示我提供文件“get_video_info”的下载框，下载文件内容时会显示一些数据，..

问题是使用 cURL 获取此文件，我不断收到此错误消息；

> status=fail&errorcode=2&reason=无效+参数。

这是代码（我试图更改一些选项，但我不熟悉 cURL，所以我被卡住了。

```
$c = curl_init();
curl_setopt($c, CURLOPT_URL, "http://youtube.com/get_video_info?video_id=9pQxmD6Bhd");
curl_setopt($c, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1");
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
curl_setopt($c, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($c, CURLOPT_HEADER, false);
$output = curl_exec($c);
if($output === false)
{
    trigger_error('Erreur curl : '.curl_error($c),E_USER_WARNING);
}
else
{
    var_dump($output);
}
curl_close($c); 
```

我尝试使用一些 curl_setopt 选项，例如 CURLOPT_TRANSFERTEXT ，但没有成功。我绝对需要帮助！

感谢您的回答，如果我做了不尊重这里规则的事情，我很抱歉，这是我的第一篇文章。

***编辑*** 这是在 cli 中使用 php 下载 youtube 视频 ( .ogg ) 的代码。

```
<?php 

/*Youtube URL and ID*/
$youtube_video = "http://www.youtube.com/watch?v=Ftud51NhY2I";
$yt_id = explode("=", $youtube_video);
$id = $yt_id[1];

/*
    Functions
*/
function get_link($raw){
    $url = rawurldecode(rawurldecode($raw));
    $url = explode("&qual", $url);      
    return $url[0];
}

/*
    Here we go

    Query video token
*/
$c = curl_init();
curl_setopt($c, CURLOPT_URL, $youtube_video);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
curl_setopt($c, CURLOPT_HEADER, false);
$output = curl_exec($c);
if($output === false)
{
    trigger_error('Erreur curl : '.curl_error($c),E_USER_WARNING);
}
else{}
curl_close($c);

/*
    Get Video infos
*/
$c = curl_init();
curl_setopt($c, CURLOPT_URL, "http://youtube.com/get_video_info?video_id=".$id);
curl_setopt($c, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1");
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
curl_setopt($c, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($c, CURLOPT_HEADER, false);
$output = curl_exec($c);
if($output === false){trigger_error('Erreur curl : '.curl_error($c),E_USER_WARNING);}
else{}
curl_close($c);
/*Get RAW link*/
$temp = explode("url_encoded_fmt_stream_map=url%3D", $output);
$url = explode("=", $temp[1]);
$url = get_link($url[0]);
/*Get Video name*/
$temp = "";
$temp = explode("title=", $output);
$title = explode("&", $temp[1]);
$title = rawurldecode(rawurldecode($title[0]));
$replace = array(':', '+', '\\', '/', '"', '<', '>', '|', '(', ')', '\'');
$title = str_replace($replace, ' ',$title);
//echo $title;
/*
    Download Video
*/
$url  = $url;
$path = $title.'.ogg';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$data = curl_exec($ch);
curl_close($ch);
file_put_contents($path, $data);

echo "Done... \r\n"; 
```

?>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:05:52.583

您收到错误消息，因为`video_id`参数无效。

尝试更改它`ID`，它应该可以正常工作。

`http://www.youtube.com/watch?v=9pQxmD6Bhd`- 不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T17:39:59.747

youtube 改变了他们的系统。现在它只适用于使用 get_video_info 系统的真实 IP。当您尝试使用 cURL 时，它会将服务器 IP 发送到 Youtube，然后您必须使用服务器 IP 下载视频，因为 youtube 系统会创建具有给定 IP 的直接视频下载 url。

# selenium - 拆卸后如何使用 Selenium RC 启动新的浏览器实例？

> ID：12348315
> 
> 赞同：2
> 
> 时间：2012-09-10T08:57:36.343
> 
> 标签：selenium, configuration, selenium-rc, testng

我的问题是我想运行两套测试。当第二套测试开始时，我得到错误： `Server Exception: sessionId should not be null; has this session been started yet?`

我的 Testng.xml 文件如下所示：

```
<suite name="Suite" parallel="false">
    <suite-files>
        <suite-file path="testng1.xml"/>
        <suite-file path="testng2.xml"/>
    </suite-files>
</suite> 
```

我应该提到 testng1 和 testng2 文件中的每个类都有一个`@BeforeSuite`调用 setUp 方法的注释，如下所示：

```
public void setUp() {
    String url = mySelSetter.url;
    String browser = mySelSetter.browser;
    if (selenium == null) {
        selenium = new DefaultSelenium("localhost", 4445, browser, url);
        selenium.start();
        selenium.open(url);
        System.out.println("A browser instance opens.");
    } else {
        System.out.println("A browser instance is already open.");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T13:20:28.630

您只需要创建一次 selenium 实例。之后，您必须在测试步骤之前`start()`和`stop()`之后使用硒。检查下面。

```
public void setUp() {
 String url = mySelSetter.url;
 String browser = mySelSetter.browser;
 if (selenium == null) 
 {
     selenium = new DefaultSelenium("localhost", 4445, browser, url);

 } else {
     System.out.println("A browser instance is already open.");
 }
 selenium.start();
 selenium.open(url);
 System.out.println("A browser instance opens.");
} 
```

我强烈建议您迁移到 WebDriver。RC现在是一个丢失的记忆。

# java - 到达图数据结构中的所有节点

> ID：12348316
> 
> 赞同：0
> 
> 时间：2012-09-10T08:57:39.160
> 
> 标签：java, algorithm, data-structures, graph, graph-algorithm

说，我有一个分别包含顶点和边列表的图形对象。G={V,E}

`G={[3, 4, 1, 2, 5, 6],[3->4, 1->2, 1->5, 5->4, 5->6]}`

假设图表是`unweighted and undirected`我需要找出是否所有的，`Vertices are interconnected with eachother`即没有单独的节点或互连的节点是孤立的。

```
1 -- 2

|

5 -- 4 -- 3

| 

6 
```

它与使用 DFS 或 BFS 遍历图形有关吗？请帮我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:50:30.930

1.  以一个verticle为起点
2.  从那个verticle启动BFS/DFS
3.  检查是否所有的verticles都被访问过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:45:48.937

是的，可以使用 BFS/DFS 解决问题。您可以在这两个和任何起始节点中选择任何搜索算法，如果通过搜索技术（DFS 或 BFS）您没有到达至少一个节点，则意味着存在一个或多个断开连接的组件以及一些单独的节点或互连节点被隔离。但这并不能告诉您存在多少断开连接的组件，为此您必须使用其他未访问的节点再次开始遍历。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:52:30.387

[在 Python 中计算图的连通分量的算法中](https://stackoverflow.com/questions/4005206/algorithm-for-counting-connected-components-of-a-graph-in-python)已经回答了一个类似的问题。

由于您询问图形是否已连接，因此您将以下函数添加到脚本中：

```
def isGraphConnected(graph):
    return get_connected_components_number(graph)==1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:22:48.123

[您也可以使用生成树](http://en.wikipedia.org/wiki/Spanning_tree)来实现此结果。在wiki中它被定义为：

`In the mathematical field of graph theory, a spanning tree T of a connected, undirected graph G is a tree composed of all the vertices and some (or perhaps all) of the edges of G.`

![生成树](../Images/280c63ebf36091d3307acf1e43f14554.png)

图片 : 生成树（来源：[维基百科](http://en.wikipedia.org/wiki/File:4x4_grid_spanning_tree.svg)）

如果你想找到[最小生成树](http://en.wikipedia.org/wiki/Minimum_spanning_tree) [Prim 的算法](http://en.wikipedia.org/wiki/Prim%27s_algorithm)可以是一个不错的选择。代码片段示例：

```
MST-Prim(G,r)
01 for each vertex u element of G.V
02    u.key :=infinity
03    u.parent := NIL
04 r.key := 0
05 init(Q, G.V)   // Q is a priority queue
06 while not isEmpty(Q)
07    u := extractMin(Q)   // add u to T
08    for each v element of u.adj do
09        if v element of Q and w(u,v) < v.key then
10        v.key := w(u,v)
11          modifyKey(Q,v)
12          v.parent := u 
```

更新：

Prim 算法的解释可以在[这里](http://datastructuresnotes.blogspot.com/2009/03/prim-jarniks-algorithm-for-extract.html)找到。

有关最小生成树的更多信息，请参见[此处](http://www.ics.uci.edu/~eppstein/161/960206.html)。

# android - 如何从 google play 返回到我的应用

> ID：12348321
> 
> 赞同：0
> 
> 时间：2012-09-10T08:57:47.057
> 
> 标签：android

我想从另一个应用程序调用一个应用程序，如果该应用程序未安装在设备上意味着我可以控制 google play 商店来安装应用程序（这些事情进展顺利）。但是一旦下载完成，我想删除 googleplay 活动并重新控制我的应用程序。我将如何做这个？提前谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:03:30.883

安装应用程序后，用户将按下设备的 BACK 按钮，以返回上一个活动，返回您的应用程序。

而且我不相信在从 Google Play 安装应用程序后，您可以触发自动返回您的应用程序的东西。

# matplotlib - matplotlib 子图 y 轴上奇怪的“零刻度”

> ID：12348328
> 
> 赞同：0
> 
> 时间：2012-09-10T08:58:05.677
> 
> 标签：matplotlib

我正在创建一个由 matplotlib 中的几个子图组成的图，如下所示： ![看我的情节](../Images/7e16a422cc60fdd55bebc3c317abb000.png)

但由于某种原因，我在 y 轴上得到了奇怪的零点（实际上在图的两侧）：它们似乎不是刻度，因为该`ax1.get_yaxis().set_ticks([])`语句不会影响它们。

**有什么想法为什么我会得到这些以及如何摆脱它们？**

```
import matplotlib.pyplot as plt
from pylab import *
import numpy as np

subplots_adjust(hspace=0.000)

groups = ['01', '03', '05', '07']

for i in range(len(groups)):
    x = np.linspace(0, 2*np.pi,400)
    y = np.sin(x**2)

    ax1 = subplot(len(groups),1,i+1) 
    ax1.scatter(x, y, s=20, c='b', marker='o')
    plt.xlim(xmin=0,xmax=1)
    ax1.get_yaxis().set_ticks([])

plt.show()
plt.close() 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:03:09.787

这些只是在和的`x`刻度的剩余部分：`0.0``1.0`

```
import matplotlib.pyplot as plt
#from pylab import *   # don't do it, btw
import numpy as np

groups = ['01' , '03', '05', '07']
fig = plt.figure()
ax = []
for i in range(len(groups)):
  ax.append( fig.add_subplot( len(groups), 1, i+1 ) )

fig.subplots_adjust(hspace=0.000)

for i in range(len(groups)):
    x = np.linspace(0, 2*np.pi,400)
    y = np.sin(x**2)

    ax[i] = plt.subplot(len(groups),1,i+1) 
    ax[i].scatter(x, y, s=20, c='b', marker='o')
    ax[i].get_yaxis().set_ticks([])
    ax[i].set_xlim([0.001,0.9999])     # <<<<========== here

plt.show() 
```

# java - 正则表达式自动完成

> ID：12348329
> 
> 赞同：1
> 
> 时间：2012-09-10T08:58:08.870
> 
> 标签：java, regex, autocomplete

我有一个文件中定义的句子列表。我想根据文件中定义的句子列表向 GUI 的用户提出一个自动完成功能。

如果我在文件中定义的句子是字符串，我会在文件上循环并检查每个字符串是否以用户开始键入的内容开头。

但是文件中的句子是正则表达式，以避免语法错误，例如（“a”/“an”）。

一个具体的例子：在我的文件中，我有列表

*   [Tt]这里（是一个|是）汽车产品吗？
*   [Tt]这里（是？|是）空气产品？

用户开始写“有”

我想回到他身边

*   有车产品
*   有空气产品

除了从正则表达式创建所有可能的字符串之外，我不知道如何实现这一点。欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:02:39.257

很难确定所有可能匹配正则表达式的字符串。尤其是你似乎允许的。

```
[Tt]here (is an?|are) air products? 
```

可能

```
There is an air product
There is an air products
There is a air product
There is a air products
There are air product
There are air products 
```

加上所有的变化`there`

我建议您使用不同的格式，因为您的正则表达式似乎可以过滤无效响应，但不仅仅定义有效响应。

# python - SQlachemy 设置不同数据库上的表的模型

> ID：12348331
> 
> 赞同：1
> 
> 时间：2012-09-10T08:58:11.043
> 
> 标签：python, mysql, sqlalchemy

我有两个表 (ta, tb) ta 在数据库 DA 上，而 tb 在数据库 DB 上。

如果我要使用原始 sql，我想做如下查询：

```
SELECT `da`.`ta`.x, `db`.`tb`.y FROM `da`.`ta`.x, `db`.`tb`.y 
WHERE `da`.`ta`.id = `db`.`tb`.ta_id 
```

当我运行它时，它按预期工作。

我希望能够使用声明性 Base 为上述表格设置 2 个模型。

```
class TA(Base):
    __tablename__ = ??????

    id = Column ....
    x = Column ...

class TB(Base):
    __tablename__ = ????

    id = Column ....
    y = Column ....
    ta_id = Column with Foreign key on ta.id 
```

我应该在表名中添加什么？我试图把 'da.ta' 和 'db.tb 放进去，但它不起作用。

我想提一下，我的引擎连接到 DA 数据库。

# asp.net - 使用单元测试时，Request.Querystring 为空

> ID：12348335
> 
> 赞同：3
> 
> 时间：2012-09-10T08:58:20.820
> 
> 标签：asp.net, unit-testing

我想为 ASP.NET MVC 应用程序创建 Nunit 测试用例。如果 ASP.NET 使用 Request.QueryString 或 Request.Url。那么单元测试用例将返回空引用异常，因为如果控件仅来自 UI，则 Request.querystring 将返回该值。

因此，您能否帮助创建一个使用 Httpcontext.Request 属性的 MVC 控制器的单元测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:06:30.340

您的单元测试在 HttpContext 之外运行，因此您需要模拟 HttpContext 或更改您的体系结构以解决该问题，示例如下所示：

[http://volaresystems.com/Blog/post/Dont-mock-HttpContext.aspx](http://volaresystems.com/Blog/post/Dont-mock-HttpContext.aspx)

# r - 涉及字符时的 data.matrix()

> ID：12348337
> 
> 赞同：3
> 
> 时间：2012-09-10T08:58:25.873
> 
> 标签：r, matrix, character, data.table

为了计算每个 ID 的行的最高贡献，我有一个漂亮的脚本，当 ID 是数字时它可以工作。然而，今天我发现 ID 也可能有字符（例如 ABC10101）。为了使函数起作用，数据集被转换为矩阵。但是`data.matrix(df)`不支持字符。是否可以更改代码以使函数与各种 ID（字符、数字等）一起使用？目前，我编写了一个快速解决方法，当 ID=character 时将 ID 转换为数字，但这会减慢大型数据集的处理速度。

代码示例（功能：提取贡献最高的第一个条目，因此如果 2 个条目具有相同的贡献，则选择第一个）：

注意：在此示例中，ID 被解释为一个因子，data.matrix() 将其转换为数值。在下面的代码中，ID 列的类型应为字符，输出应如底部所示。订单 ID 必须保持不变。

```
tc <- textConnection('
    ID   contribution   uniqID      
   ABCUD022221       40           101  
   ABCUD022221       40           102 
   ABCUD022222       20           103
   ABCUD022222       10           104
   ABCUD022222       90           105
   ABCUD022223       75           106
   ABCUD022223       15           107
   ABCUD022223       10           108        ')

df <- read.table(tc,header=TRUE)

#Function that needs to be altered
uniqueMaxContr <- function(m, ID = 1, contribution = 2) {
  t(
    vapply(
           split(1:nrow(m), m[,ID]), 
           function(i, x, contribution) x[i, , drop=FALSE]
           [which.max(x[i,contribution]),], m[1,], x=m, contribution=contribution
          )
  )
}

df<-data.matrix(df) #only works when ID is numeric
highestdf<-uniqueMaxContr(df)
highestdf<-as.data.frame(highestdf) 
```

在这种情况下，结果应该是：

```
 ID   contribution   uniqID      
   ABCUD022221       40           101  
   ABCUD022222       90           105
   ABCUD022223       75           106 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T09:52:00.857

其他人可能可以使它更简洁，但这是我对 data.table 解决方案的尝试：

```
tc <- textConnection('
    ID   contribution   uniqID      
   ABCUD022221       40           101  
   ABCUD022221       40           102 
   ABCUD022222       20           103
   ABCUD022222       10           104
   ABCUD022222       90           105
   ABCUD022223       75           106
   ABCUD022223       15           107
   ABCUD022223       10           108        ')

df <- read.table(tc,header=TRUE)

library(data.table)
dt <- as.data.table(df)
setkey(dt,uniqID)

dt2 <- dt[,list(contribution=max(contribution)),by=ID]

setkeyv(dt2,c("ID","contribution"))
setkeyv(dt,c("ID","contribution"))

dt[dt2,mult="first"]

##               ID contribution uniqID
## [1,] ABCUD022221           40    101
## [2,] ABCUD022222           90    105
## [3,] ABCUD022223           75    106 
```

## 编辑——更简洁的解决方案

*   您可以使用`.SD`which 是 data.table 的子集进行分组，然后使用它`which.max`来提取单行。

在一行中

```
dt[,.SD[which.max(contribution)],by=ID]

##               ID contribution uniqID
## [1,] ABCUD022221           40    101
## [2,] ABCUD022222           90    105
## [3,] ABCUD022223           75    106 
```

# ios - 锁定屏幕中的 AlertView 显示？

> ID：12348338
> 
> 赞同：0
> 
> 时间：2012-09-10T08:58:26.997
> 
> 标签：ios, uialertview

如果我为推送通知处理设置警报视图，它在锁定屏幕中会是什么样子？

是这样的吗？

![在此处输入图像描述](../Images/74cdaeb4bdd697fb0c0cec878a47d34f.png)

还有标题，是来自应用程序的名称吗？我不能动态改变它吗？

抱歉，由于仍在头脑风暴和设计过程中，我无法自己测试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:13:27.020

它的外观取决于用户的设备设置。你可以在下面找到它

设置 -> 通知 -> 您的应用 -> 警报样式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:16:41.493

是的，它看起来和这个完全一样，尽管它可以改变。用户可以选择他们想要的警报样式：横幅、警报或无。

对于标题，是的，它是应用程序的名称本身。你不能改变它。

希望这能回答你的问题！

# sql - SQL游标内表变量的范围

> ID：12348339
> 
> 赞同：5
> 
> 时间：2012-09-10T08:58:29.897
> 
> 标签：sql, scope, temp-tables, database-cursor, table-variable

如果我在 MS SQL 2008 R2 中运行以下命令，我会得到意想不到的结果。

```
create table #DataTable (someID varchar(5))
insert into #DataTable 
values ('ID1'),('ID2'),('ID3'),('ID4'),('ID5')

declare @data varchar(8);

declare myCursor cursor for
select someID from #DataTable

open myCursor
FETCH NEXT FROM myCursor INTO
@data

WHILE(@@Fetch_Status >=0)
BEGIN 

    declare @tempTable table (someValue varchar(10))

    insert into @tempTable select @data + '_ASDF'
    select * from @tempTable    

FETCH NEXT FROM myCursor INTO
@data

END

close myCursor
deallocate myCursor

drop table #DataTable 
```

最后一次迭代的结果：

```
someValue
ID1_ASDF
ID2_ASDF
ID3_ASDF
ID4_ASDF
ID5_ASDF 
```

我原以为只会看到

```
someValue
ID5_ASDF 
```

似乎表变量 @tempTable 在游标迭代之间保持在范围内 - 但是如何在每次迭代中重新声明变量？对我来说毫无意义。

我解决了

```
delete @tempTable 
```

在每次迭代中——这也支持了我关于它仍在范围内的假设。

谁能解释这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:06:08.057

是的，它确实 - 范围不是由`begin`/`end`语句定义的，而是由存储过程的末尾或`go`

> The scope of a variable is the range of Transact-SQL statements that can reference the variable. The scope of a variable lasts from the point it is declared until the end of the batch or stored procedure in which it is declared.

[http://msdn.microsoft.com/en-us/library/ms187953(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms187953(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:34:31.153

Variable declarations in T-SQL are a bit of an odd beast - variable declarations *ignore* control flow.

This produces an error:

```
set @a = 2 
```

This runs without issue, and doesn't print "Never":

```
if 1=0
begin
    print 'Never'
    declare @a int
end
set @a = 2 
```

The lifetime of a variable is from the point of declaration until the batch completes.

# android - NullPointException 仅在单个设备上（Samsung Galaxy Tab）

> ID：12348345
> 
> 赞同：0
> 
> 时间：2012-09-10T08:58:54.630
> 
> 标签：android, nullpointerexception, viewflipper, galaxy-tab, findviewbyid

所以我试图通过 findViewById() 获取视图。它在模拟器 4.0 和 41 和 android 2.3 智能手机上就像一个魅力，但在三星银河选项卡上尝试时 - 变量始终为空。

HomeActivity.java

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
    setContentView(R.layout.start_new_user);
    ViewFlipper vf = (ViewFlipper) findViewById(R.id.viewFlipper1_newuser); 
```

银河选项卡上的 vf 始终为空。如果我尝试用它做一些事情，比如 vf.getContext() 会得到一个 NPE。

start_new_user.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tV_new_user"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_margin="10dp"
        android:background="@drawable/roundedcorner"
        android:padding="15dp"
        android:text="@string/start_new_user" />

  <LinearLayout
      android:id="@+id/rl_calendar_newuser"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dp"
        android:orientation="vertical" >

        {...}
    </LinearLayout>

    <ViewFlipper
        android:id="@+id/viewFlipper1_newuser"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    </ViewFlipper>

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:04:40.803

检查是否在所有布局版本中都定义了该视图。

# c - 伯克利分贝部分匹配

> ID：12348346
> 
> 赞同：2
> 
> 时间：2012-09-10T08:58:57.470
> 
> 标签：c, berkeley-db

berkeley db 5.x C API 有什么方法可以获取与前缀匹配的键的所有记录？

（不扫描整个数据库）

也许使用 Btree 前缀比较自定义回调？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:17:49.673

解决方案有两个部分。首先，您需要使用自定义键比较功能。

```
dbp->set_bt_compare(dbp, cmp_fn); 
```

在比较功能中，使具有相同前缀的键在数据库中彼此相邻排序。这可能就像一堆小于比较一样简单，因此类似于`0x000000000000000000000001`is less than `0x000000000000000000000002`。

要进行搜索，请打开光标并`cursor->get()`使用`DB_SET_RANGE`标志执行 a。将起始键设置为前缀范围的开头。比如说，如果您正在寻找带有前缀 的键`0x1138`，您可以将键设置为`0x113800000000000000000000`. 然后继续调用`cursor->get()`。`DB_NEXT`当你看到一个没有`0x1138`前缀的键时，你就完成了。

这种技术不必扫描整个数据库，因为初始`DB_SET_RANGE`调用会在正确的位置启动游标，并且记录在树中彼此相邻。

# silverlight - 如何在 C#/XAML Metro 应用程序的弹出控件中有一个列表？

> ID：12348348
> 
> 赞同：0
> 
> 时间：2012-09-10T08:58:57.397
> 
> 标签：silverlight, xaml, microsoft-metro, winrt-xaml

我想知道 ：-

如何在 Metro 应用程序的弹出控件中包含一个列表？

请让我知道我该如何解决这个问题

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:58:08.783

```
<Popup x:Name="popup">
<Grid  >
       <ListBox x:Name="listBox" />
</Grid>
</Popup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:39:58.387

为什么不尝试在激活弹出窗口时折叠主网格的可见性，或者在主网格上调用 IsHitTestVisible=false 以使其处于非活动状态时将不透明度回退以在弹出窗口后面留下鬼影。

# java - 使用java的Hashtable互斥

> ID：12348349
> 
> 赞同：1
> 
> 时间：2012-09-10T08:59:00.247
> 
> 标签：java, multithreading

嗨，伙计，我班上有一个全局哈希表，还有两个线程 A 和 B 与她一起工作。A 从 HashTable 中读取，B 在 Hashtable 中写入。是否存在互斥问题？我需要同步它或 Hashtable 类是安全的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:00:03.723

`Hashtable`是`Map`接口的线程安全实现。

在常规的 put 和 get 操作中，您将是安全的。但是，当您在一个线程中对其进行迭代并从另一个线程修改其内容时，您将遇到`ConcurrentModificationException`问题。因此，在迭代时，请确保迭代原始`Hashtable`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:03:00.520

您应该改用[`ConcurrentHashMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)它，这是一个更好/更快的`java.util.Map`接口实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:00:44.380

使用 java 集合提供的同步 HashMap 很有用。这个类是一个简单的包装器并封装了 hashmap ：

```
Collections.synchronizedMap(new HashMap()); 
```

更多示例在 java 文档中： http: [//docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html) synchronizedMap

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:48:17.793

每个人都说了可以说的，但这只是对您所说的进行补充`mutual exclusion`。你问会不会有这样的问题。线程安全程序必须确保如果`threadA`正在使用一个代码块，`block1`则在线程完成之前没有其他线程可以访问它。所以，如果我理解你的意思`mutual exclusion`，是的，访问同一个同步（线程安全）共享资源的线程是互斥的，因为它们都不能同时访问它。如果您选择其中一种建议的安全实现
，Java 实际上会为您完成很多工作。`Map`现在，如果您的 Hashtable （或您喜欢的任何其他线程安全的 mao ）是共享资源，那么您唯一需要注意的是*happens-before*关系。如果一个线程正在读取数据而另一个线程正在写入数据，这一点很重要。
更多可以在[java并发教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)和[java并发包文档中找到](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T09:05:54.497

`HashTable`保证对其执行的任何操作都是原子的。但是如果你正在执行多个操作，你应该`synchronize`这样做。在下面的示例中，即使`contains`and`put`是原子的，但代码具有`check and act`引发条件，因此您需要额外`synchronization`的。

```
 if(!hashtable.contains(Object))
    {
        hashtable.put(key, value);
    } 
```

还要检查`Collections.synchronizedMap()`or`ConcurrentHashMap`而不是`HashTable`

# character-encoding - 多语言特色网站的字符集编码问题

> ID：12348350
> 
> 赞同：0
> 
> 时间：2012-09-10T08:59:01.177
> 
> 标签：character-encoding, meta-tags

我在这里遇到一个简单的常见问题。

我的网站具有多语言特色，内置 codeigniter 框架。

例如，我在这里使用了法语

```
$lang['login'] = 'ConnÈcter'; 
```

这随后在视图中显示为连接器。

然后我通过添加解决了这个问题

```
<meta charset="ISO-8859-1"> 
```

然后解决了这个问题。但是当内容加载了像这样的字符时

```
Sáenz-Mata & Jiménez-Bremont 
```

然后是改为

```
SÃ¡enz-Mata & JimÃ©nez-Bremont 
```

注意 é 更改为 Ã© 即使我使用

```
<meta charset="ISO-8859-1"> 
```

当上面的元被删除时，当语言转换为法语时，它会给我连接器。

所以请给我建议一些可以处理这两种情况的东西。

希望有人能理解。（描述得一团糟。）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:06:59.917

[如CodeIgniter 用户指南](http://codeigniter.com/user_guide/general/styleguide.html)中所述，对所有页面始终使用 UTF-8 。确保每个文件的编码与其声明的编码匹配。您现在遇到的情况是由混合编码（主要是 UTF-8 和 ISO-8859-1）引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:14:32.713

利用`<meta charset="utf-8">`

# c# - 无法将抽象类实例添加到列表

> ID：12348353
> 
> 赞同：0
> 
> 时间：2012-09-10T08:59:13.440
> 
> 标签：c#, wcf, abstract

我有以下对象 ValidationType、ValidationRule、ValidationProperty、ValidatorBase（抽象类）、NotNullValidatorRule（派生自 ValidatorBase 抽象类），如下所示。

```
public class ValidationType
{
    public ValidationType();

    public string AssemblyName { get; set; }
    public string DefaultRuleSet { get; set; }
    public long Id { get; set; }
    public string Name { get; set; }
    public long ProcessId { get; set; }
    public List<ValidationRule> RuleSet { get; set; }
    public long SubProcessId { get; set; }
    public DateTime ValidFrom { get; set; }
    public DateTime ValidTo { get; set; }
}

public class ValidationRule
{
    public ValidationRule();

    public long Id { get; set; }
    public string Name { get; set; }
    public List<ValidationProperty> Properties { get; set; }
    public long TypeId { get; set; }
}

public class ValidationProperty
{
    public ValidationProperty();

    public long Id { get; set; }
    public string Name { get; set; }
    public long RulesetId { get; set; }
    public List<ValidatorBase> Validators { get; set; }
}

public abstract class ValidatorBase
{
    protected ValidatorBase();

    public string MessageTemplate { get; set; }
    public string Name { get; set; }
    public bool Negated { get; set; }
    public string Tag { get; set; }
    public string TemplateResourceName { get; set; }
    public string TemplateResourceType { get; set; }
    public string Type { get; set; }

    public abstract XNode GetValidator();
}

public class NotNullValidatorRule : ValidatorBase
{

    public override XNode GetValidator()
    {
        try
        {
            XElement validation = new XElement("validator",
                    new XAttribute("type", this.Type),
                    new XAttribute("name", this.Name),
                    new XAttribute("messageTemplateResourceName", this.TemplateResourceName),
                    new XAttribute("messageTemplateResourceType", this.TemplateResourceType),
                    new XAttribute("messageTemplate", this.MessageTemplate),
                    new XAttribute("negated", this.Negated),
                    new XAttribute("tag", this.Tag));
            return (XNode)validation;
        }
        catch
        {
            throw;
        }
    }       
}

I have WCF Service to return a List<ValidationType>,

  public List<ValidationType> GetValidationRules(long processId)
    {
        try
        {
            List<ValidationType> ResultValidionTypesList = new List<ValidationType>();

            List<ValidationType> ValidationTypes = new List<ValidationType>();

            ValidatorBase CodeMandatory = new NotNullValidatorRule();
            CodeMandatory.Name = "CodeMandatory";
            CodeMandatory.TemplateResourceName = "";
            CodeMandatory.TemplateResourceType = "";
            CodeMandatory.Type = "Microsoft.Practices.EnterpriseLibrary.Validation.Validators.NotNullValidator,Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35";
            CodeMandatory.Tag = "display:none";
            CodeMandatory.Negated = true;
            CodeMandatory.MessageTemplate = "";
            CodeMandatory.GetValidator();
            ValidationProperty CodeProperty = new ValidationProperty();
            CodeProperty.Name = "Notes";
            CodeProperty.Validators.Add(CodeMandatory);

            ValidationRule CompanyTypeRules = new ValidationRule();
            CompanyTypeRules.Name = "CustomerGroupRuleset";
            CompanyTypeRules.Properties.Add(CodeProperty);

            ValidationType CompanyValidationsTypes = new ValidationType();
            CompanyValidationsTypes.Name = "iBoxV5.Model.CMS.Masters.CustomerGroup";
            CompanyValidationsTypes.DefaultRuleSet = "CustomerGroupRuleset";
            CompanyValidationsTypes.AssemblyName = "iBoxV5.Model.CMS.Masters, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null";
            CompanyValidationsTypes.RuleSet.Add(CompanyTypeRules);

            ResultValidionTypesList.Add(CompanyValidationsTypes);

            return ResultValidionTypesList;

        }
        catch (Exception ex)
        {
            RollBackTransaction();
            throw ex;
        }
        finally
        {
            CloseConnection();
        }

    } 
```

如果我没有添加，上面将返回值列表

//CodeProperty.Validators.Add(CodeMandatory);

陈述。如果我尝试添加 NotNullValidatorRule 的实例（它派生自 ValidatorBase（抽象类）），则会发生以下 WCF 服务错误。但是，相同的验证类型正在返回列表，包括控制台应用程序中的 NotNullValidaitonRule。

'调用服务失败。可能原因：服务离线或无法访问；客户端配置与代理不匹配；现有代理无效。有关更多详细信息，请参阅堆栈跟踪。您可以尝试通过启动新代理、恢复到默认配置或刷新服务来恢复。

基础连接已关闭：连接意外关闭。

内部异常：基础连接已关闭：连接意外关闭。在 System.Net.HttpWebRequest.GetResponse() 在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（时间跨度超时）

任何人都可以澄清出了什么问题..！

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:09:36.320

WCF 基础结构必须知道所有`ValidatorBase`被序列化/反序列化的后代以执行这些操作。您应该通过以下方式为您的数据合同提供此信息[`KnownTypeAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.knowntypeattribute%28v=vs.110%29.aspx)：

```
[DataContract]
public class ValidationType {}

[DataContract]
public class ValidationRule {}

[DataContract]
public class ValidationProperty {}

[DataContract]
[KnownType(typeof(NotNullValidatorRule))]
public abstract class ValidatorBase {}

[DataContract]
public class NotNullValidatorRule : ValidatorBase {} 
```

# r - 如何强制 R 按数字顺序阅读？

> ID：12348356
> 
> 赞同：1
> 
> 时间：2012-09-10T08:59:25.083
> 
> 标签：r

我在一个文件夹中有几个文件，我想重命名它们，我注意到 R 以字母顺序读取，所以我使用了该命令`mixedsort`并且它有效，但是当我检查结果时，我发现文件是以不同的顺序读取的，而不是数字. 第一个文件的名称`Daily_NPP1.bin` 最多为`Daily_NPP365.bin`

```
 a<- list.files("C:\\New folder (6)", "*.bin", full.names = TRUE)
         k<- mixedsort(a)#### load package feild
          b <- sprintf("C:carbonflux\\Daily_Rh%d.bin", seq(k))
          file.rename(a, b) 
```

如何强制 R 按数字顺序阅读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:47:55.713

这是一种无需重命名文件即可订购矢量的方法：

```
# Replication of data:
a <- sort(paste0("Daily_NPP",1:365,".bin"))

# Extract numbers and order:
a <- a[order(as.numeric(gsub("[^0-9]","",a)))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:18:14.130

如果您只想重命名，则可以执行以下操作，而不管排序如何。

```
b <- sub("^.*?([0-9]+)\\.bin$", "C:\\\\carbonflux\\\\Daily_Rh\\1.bin", a)
file.rename(a, b) 
```

第一个参数`sub`提取文件名末尾的数字，第二个参数将其粘贴到新的文件名模板中（在 的位置`\\1`）。所有这些`\\\\`都是正确转义反斜杠所必需的。

# php - 在 foreach 中显示一些值

> ID：12348357
> 
> 赞同：0
> 
> 时间：2012-09-10T08:59:40.997
> 
> 标签：php

我有这段代码，我用它来以表格格式显示我的数据

```
<style>
td{
border:1px solid orange;
}
table{
border:1px solid orange;
}
</style>
<?php
$arr = array(
    'one' => array(
        'sidebarname' => 'first',
        'sidebarid' => 'first1'
    ),
    'two' => array(
        'sidebarname' => 'oneaa',
        'sidebarid' => 'onebb'
    ),
    'three' => array(
        'sidebarname' => 'onecc',
        'sidebarid' => 'onedd'
    ),
    'four' => array(
        'sidebarname' => 'oneee',
        'sidebarid' => 'oneff'
    ),
    'five' => array(
        'sidebarname' => 'onegg',
        'sidebarid' => 'onehh'
    ),
    'six' => array(
        'sidebarname' => 'oneii',
        'sidebarid' => 'onejj'
    )
);
echo '<table>';
foreach ($arr as $key => $value) {
echo '<tr>'.'<td>'."<input type='text' value=$key />".'</td>';

foreach ($value as $keyed=> $newvalue) 
echo '<td>'."<input type='text' value=$newvalue />".'</td>';   
}

echo '</tr></table>';

?> 
```

我正在显示每个数组的主键以及第一个和第二个数组的值。例如

```
'five' => array(
            'sidebarname' => 'onegg',
            'sidebarid' => 'onehh'
        ), 
```

我正在显示五个，的值`sidebarname`和值。`sidebarid`这是我在 html 中所期望的。

[http://jsfiddle.net/83hNB/](http://jsfiddle.net/83hNB/)

我如何使用 foreach 显示`sidebarid`为文本区域而不是输入文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:18:44.570

您应该删除第二个循环并将每个键的第一个值显示为输入，将第二个值显示为文本区域。

你的代码应该看起来像这样我试过了，它会根据你的需要输出。

```
 <style>
 td{
 border:1px solid orange;
 }
 table{
  border:1px solid orange;
 }
 </style>
<?php
$arr = array(
'one' => array(
    'sidebarname' => 'first',
    'sidebarid' => 'first1'
),
'two' => array(
    'sidebarname' => 'oneaa',
    'sidebarid' => 'onebb'
),
'three' => array(
    'sidebarname' => 'onecc',
    'sidebarid' => 'onedd'
),
'four' => array(
    'sidebarname' => 'oneee',
    'sidebarid' => 'oneff'
),
'five' => array(
    'sidebarname' => 'onegg',
    'sidebarid' => 'onehh'
),
'six' => array(
    'sidebarname' => 'oneii',
    'sidebarid' => 'onejj'
)
);

echo '<table>';
  foreach ($arr as $key => $value) {
  echo "<tr><td><input type='text' value='".$key."' /></td>";
  echo "<td><input type='text' value='".$value['sidebarname']."' /></td>";   
  echo "<td><textarea>".$value['sidebarid']."</textarea></td>"; 
}
echo '</tr></table>';

?> 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:17:17.940

将您的内部循环更改为：

```
<?php
foreach ($value as $keyed=> $newvalue) {
    if ($keyed === 'sidebarid' ) {
        echo '<td><textarea>'.htmlspecialchars($newvalue).'</textarea></td>';   
    } else {
        echo '<td><input type="text" value="'.htmlspecialchars($newvalue).'" /></td>';   
    }
}
?> 
```

请注意属性`htmlspecialchars()`上的 " 和 "。在将`value=""`用户数据输出到 HTML 时，两者都非常重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:11:52.967

您应该删除第二个`foreach`，因为您已经知道密钥：

```
echo '<table>';
foreach ($arr as $key => $value) {
    echo "<tr><td><input type='text' value='".$key."' /></td>";
    echo "<td><input type='text' value='".$value['sidebarname']."' /></td>";   
    echo "<td><textarea>".$value['sidebarid']."</textarea></td>"; 
}
echo '</tr></table>'; 
```

# mysql - mysql中一个小表和一个非常大的表之间的左连接

> ID：12348360
> 
> 赞同：1
> 
> 时间：2012-09-10T08:59:47.927
> 
> 标签：mysql, left-join, indexing

我有两张桌子；一个有 50 条记录并包含一些城市名称，另一个有 3173958 条记录并具有城市到国家/地区代码信息：

```
+---------+-----------+
| country | city      |
+---------+-----------+
| gb      | sapiston  |
| gb      | sapperton |
| gb      | sarclet   |
| gb      | sarnau    |
| gb      | sarnau    |
+---------+-----------+ 
```

大表在`city`字段上建立索引，但此查询大约需要**5 分钟**才能执行：

```
SELECT small.* , c2c.country FROM small LEFT JOIN c2c ON ( lower( small.city ) = lower( c2c.city ) ); 
```

问题是什么？
我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:08:08.257

为了利用索引，您应该将`city`较低格式的值存储在同一列或不同的索引列中，因为在查询中应用较低的函数不能利用索引。

```
SELECT small.* , c2c.country 
FROM small 
     LEFT JOIN c2c 
         ON small.city = c2c.city; 
```

还要在表上添加以下索引和[覆盖索引](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)以获得更好的性能：

```
ALTER TABLE small ADD KEY ix1(city);
ALTER TABLE c2c ADD KEY ix1(city, country); 
```

[添加上述索引后，使用EXPLAIN](http://dev.mysql.com/doc/refman/5.5/en/explain.html)检查查询执行计划

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:17:31.867

在 WHERE 子句中对列名使用函数时，不能使用索引；因为 MySQL 必须先获取所有行的计算值，然后才能进行比较。相等比较通常不区分大小写（取决于列排序规则），因此您可以安全地省略 LOWER 函数。这是修改后的查询：

```
SELECT small.*, c2c.country
FROM small
LEFT JOIN c2c ON small.city = c2c.city 
```

接下来，您应该在 上添加一个覆盖索引`c2c`。索引应在`(city, country)`. 这样，MySQL 就不必查看表来检索国家/地区名称。它将在加入时查看索引，同时它可以从同一索引`city`中获取列。`country`

接下来，`small.*`仅更改为您需要的列。

接下来，`small.city`如果您还没有这样做，则创建一个索引 - 或者 - 如果您发现您只需要表中的两/三列，`small`然后创建一个覆盖索引。例如，如果您正在选择`small.somecolumn`（并`small.city`在 WHERE/ON 子句中使用）为`(city, somecolumn)`.

最后，确保`city`两个表中的列具有相同的数据类型、长度，最重要的是排序规则。当排序规则不同时，MySQL 必须在比较之前转换排序规则，这可能会减慢查询速度。

# java - 分布式事务.net java SAP

> ID：12348362
> 
> 赞同：2
> 
> 时间：2012-09-10T08:59:51.027
> 
> 标签：java, .net, transactions, soa, distributed

我使用了几个通过面向服务架构连接的系统，这些系统包括：.NET 技术、Java WebLogic Service 和 SAP RFC。

是否有可能跨这些不同的技术实现分布式事务？例如，当更新 SAP 失败时，我们需要确保 .NET 和 Java 事务根本不会发生。

真的很感谢您的意见，或者您可以指出我们可以在哪里学习如何做的基础知识？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:04:13.983

我不建议在系统之间使用分布式事务，因为它会在它们之间产生大量耦合并增加每个系统的负载，因为它为其他系统持有锁（你可以看到我写的一篇名为[“事务集成反模式”的文章"](http://arnon.me/wp-content/uploads/2010/10/TransactionalIntegration.pdf) )。正如 Vikdor 所建议的，通常更好的选择是使用[Saga](http://rgoarchitects.bit.ly/4xNwpp)，您可以手动或通过一些外部协调器（例如使用[Orchestration](http://arnon.me/soa-patterns/Orchestration/)）进行协调。

请注意，补偿逻辑可能无法完全撤消操作（例如，在零售场景中，如果订单导致您达到库存阈值并且从供应商处订购，则取消该订单不必从您的供应商。您也可能无法全额退款等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:14:14.933

我会这样做：

1.  与服务的每次交互都是一个[命令](http://en.wikipedia.org/wiki/Command_pattern)，其中定义了`execute()`方法`undo()`。
2.  维护一堆命令，每条命令成功就推送。
3.  当命令失败时，即与服务的交互失败，从堆栈中弹出每个命令并调用`undo()`.

不过，您可能会在 .NET 中寻找任何能够开箱即用地提供此功能的[分布式事务API。](http://en.wikipedia.org/wiki/Distributed_transaction)

# android - 加速 Android 应用程序构建 - 使用多个 CPU 内核的 Java 编译器

> ID：12348364
> 
> 赞同：9
> 
> 时间：2012-09-10T09:00:01.753
> 
> 标签：android, eclipse, compiler-construction, java

有没有办法让 Eclipse 或 JDK 1.7 在编译 Java 源代码时利用我的 CPU 的多个内核？

我看到只使用了 1 个 CPU 内核，这在我的源文件中的每个小更改后需要几秒钟。这限制了我的编程进度。

也许JDK有一些开关或设置可以利用更多的CPU并更快地编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:43:15.460

[这里](https://stackoverflow.com/questions/523575/is-there-a-way-to-improve-multicore-multiprocessor-performance-of-the-java-com)和[这里](https://stackoverflow.com/questions/3727493/using-multiple-cores-processors-when-compiling-java)有两个与此相关的 SO 问题。第一个提到[了这个](https://blogs.oracle.com/jjg/entry/towards_a_multi_threaded_javac)oracle source about making javac multithreaded，但似乎进展不大。第二个链接说你可以[告诉 ant](http://publib.boulder.ibm.com/infocenter/rtnlhelp/v6r0m0/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/JDTCompilerAdapter.html)使用 eclipse 编译器，它支持[多线程编译](https://bugs.eclipse.org/bugs/show_bug.cgi?id=142126)。

# asp.net - 中继器控制。找到表格单元格

> ID：12348366
> 
> 赞同：0
> 
> 时间：2012-09-10T09:00:04.577
> 
> 标签：asp.net, .net, vb.net, repeater

我在更新面板中保留了中继器控制。该控件有 4 列。根据我必须显示的值\隐藏第三列。列被放置在 table`<tr>`和内`<td>`。我可以找到第三列的控件并使其可见为假。但列的空白仍然存在。所以我需要隐藏`<td>`自己。但是`<td>`id不被识别。请帮帮我。

```
 Dim td As TableCell
                td = CType(e.Item.FindControl("tdcommwt"), TableCell)
                td.Visible = False 
```

注：（`td = nothing`如图所示）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:13:49.533

利用

```
 HtmlControl tc=e.Item.FindControl("tdcommwt") as HtmlControl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:04:22.193

设置边框折叠：折叠表格，以便当列的可见性为假时折叠

# objective-c - managedObjectModel：initWithContentOfURL 中的错误

> ID：12348369
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:00:19.903
> 
> 标签：objective-c, core-data, model, init, object-model

我试图重用一个使用数据核心的 xcodeproj。我将它导入到我的新项目中，当我尝试进行一些类初始化时，出现以下错误

'NSInvalidArgumentException'，原因：' *** -[NSURL initFileURLWithPath:]: nil string parameter' 设置 de managedObjectModel 时出错。

这是我的代码：

```
- (NSManagedObjectModel *)managedObjectModel {
    if (managedObjectModel == nil) {

        NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"DataModel" ofType:@"momd"];
        NSURL    *modelURL  = nil;

        if (modelPath == nil)
            modelPath = [[NSBundle mainBundle] pathForResource:@"DataModel" ofType:@"mom"];
        modelURL           = [NSURL fileURLWithPath:modelPath];
        managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    }

    return managedObjectModel;
} 
```

导致错误的行是

```
modelURL           = [NSURL fileURLWithPath:modelPath]; 
```

看起来我找不到DataModel。我的数据模型文件称为 DataModel.xcdatamodel

有什么问题？我错过了什么重要的东西吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:33:53.477

嗯，我解决了。

我必须在与我的 AppDelegate 相同的组中拥有我的 DataModel.xcdatamodel 的副本。所以我从另一个 xcodeproj 添加了它，最后它工作了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:19:35.050

你正在`nil`进入`fileURLWithPath`.

从您的代码中，这意味着

```
 modelPath = [[NSBundle mainBundle] pathForResource:@"DataModel" ofType:@"mom"]; 
```

分配`nil`给`modelPath`，因此您可以查看数据模型文件的正确名称。

还要检查数据模型文件是否包含在您的目标中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:23:17.623

您的文件类型`mom`应该是`momd`.

然后尝试像下面那样打印 modelPath 或 modelURL 并检查它是否为 nil.you 将 nil 传递给 `modelURL = [NSURL fileURLWithPath:modelPath];`

```
 NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"DataModel" ofType:@"momd"];
        NSLog(@"%@",modelPath);

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DataModel" withExtension:@"momd"];
    NSLog(@"%@",modelURL); 
```

# javascript - Javascript innerHTML 超出范围问题？

> ID：12348371
> 
> 赞同：0
> 
> 时间：2012-09-10T09:00:35.393
> 
> 标签：javascript, html, css

我想知道为什么下面的 jsfiddle 不起作用。如果无论如何它可以工作。任何想法，将不胜感激。我会认为，由于 html 当时会包含变量名，所以它会起作用......但它没有。诡异的。我正在使用最新版本的 Firefox。

应该发生什么：onclick 应该发出警报！

[http://jsfiddle.net/VqA9g/125/](http://jsfiddle.net/VqA9g/125/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:06:23.640

您的方法调用需要引用 list_name。

这是有效的编辑脚本：

```
function example() {
    for ( var i = 0; i < list.length ; i++ ) {   
        var list_name = list[i];
        var div = document.getElementById('testing');
        div.innerHTML += "<txt onClick=\"test('" + list_name + "');\">" + list_name + "</txt><br>";
    }
} 
```

通过这个小改动，我可以看到警报正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:50:57.050

您忘记将单词括在引号中。因此，对于您的代码，它作为变量传递，没有定义。这是一个更新的版本：

[http://jsfiddle.net/VqA9g/131/](http://jsfiddle.net/VqA9g/131/)

# php - 从非整数表示为分数的字符串中检索数字字符

> ID：12348377
> 
> 赞同：1
> 
> 时间：2012-09-10T09:01:08.220
> 
> 标签：php, regex

> **可能重复：**
> [从字符串中检索数字字符](https://stackoverflow.com/questions/11761967/retrieving-numeric-characters-from-a-string)

我有一个这样的字符串 -

```
[ [ -2, 1/2 ], // 1/2 represents one half 
```

我想检索数字字符并将它们放入一个最终看起来像这样的数组中：

```
array(
  [0] => -2,
  [1] => 1/2
) 
```

这样做的最佳方法是什么？

一个更彻底的例子 -

```
[ [ -2, 1/2, 4, 8 ],
  [ 5,  1/2, 1, -4/3 ],
  [ -2, 7/2, 4, 4 ],
  [ -2, 1/2, -3, 2 ] ] 
```

我正在逐行浏览这个矩阵，我想将每行的数字提取到一个数组中。

这个问题与我之前提出的问题非常相似 - [Retrieving numeric characters from a string](https://stackoverflow.com/questions/11761967/retrieving-numeric-characters-from-a-string)

不同之处在于数字中没有小数点。相反，非整数表示为分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:33:30.723

尝试处理 preg 语法。您的 preg 表达式很简单：`/(-?\d+(?:\/\d+)?)/`.

```
preg_match_all( '/(-?\d+(?:\/\d+)?)/', $string, $matches);

// given :
$str = '[ [ -2, 1/2, 4, 8 ],
  [ 5,  1/2, 1, -4/3 ],
  [ -2, 7/2, 4, 4 ],
  [ -2, 1/2, -3, 2 ] ]';

// outut :
$matches = array (
  0 => 
  array (
    0 => '-2',
    1 => '1/2',
    2 => '4',
    3 => '8',
    4 => '5',
    5 => '1/2',
    6 => '1',
    7 => '-4/3',
    8 => '-2',
    9 => '7/2',
    10 => '4',
    11 => '4',
    12 => '-2',
    13 => '1/2',
    14 => '-3',
    15 => '2',
  ),
  1 => 
  array (
    0 => '-2',
    1 => '1/2',
    2 => '4',
    3 => '8',
    4 => '5',
    5 => '1/2',
    6 => '1',
    7 => '-4/3',
    8 => '-2',
    9 => '7/2',
    10 => '4',
    11 => '4',
    12 => '-2',
    13 => '1/2',
    14 => '-3',
    15 => '2',
  ),
); 
```

# android - 使用RelativeLayout时对话框比预期大

> ID：12348405
> 
> 赞同：0
> 
> 时间：2012-09-10T09:02:53.973
> 
> 标签：android, android-layout

我想创建一个关于对话框。

我使用“wrap_content”作为对话框的高度，并通过代码设置文本框消息。

由于某种原因，对话框更大，顶部有一个空白的黑色空间。

该对话框不适合我的内容的大小。

这是我的对话框布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" > 

    <RelativeLayout
    android:id="@+id/titleLayout"
    android:layout_width="fill_parent"
    android:layout_height="40dip"
    android:background="#EBEBEB" > 

        <ImageView 
        android:id="@+id/ivAbout"
        android:layout_alignParentRight="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:src="@drawable/ic_dunk"
        android:layout_marginRight="10dip"
        android:layout_centerVertical="true"/>

        <TextView
        android:id="@+id/tvAboutTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#08BCBF"
        android:textSize="20sp"
        android:paddingRight="10dip"
        android:layout_toLeftOf="@+id/ivAboutDunk"
        android:layout_centerVertical="true"
        android:text="blabla" 
        />

    </RelativeLayout>    
    <View
        android:id="@+id/lineSeperator"
        android:layout_width="fill_parent"
        android:layout_height="2dip"
        android:background="#08BCBF"
        android:layout_below="@+id/titleLayout"
         />

    <RelativeLayout
    android:id="@+id/aboutStoryLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/lineSeperator"
    android:background="#FFFFFF" > 
    <TextView
        android:id="@+id/tvAboutStory"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:gravity="right"
        android:layout_marginRight="12dip"
        android:layout_marginTop="10dip"
        android:text="bla" 
        android:textSize="16sp"
        />    
    </RelativeLayout>

    <RelativeLayout
    android:id="@+id/aboutButtonsLayout"
    android:layout_width="fill_parent"
    android:layout_height="40dip"
    android:layout_below="@+id/aboutStoryLayout"
    android:background="#BDBDBD" >
     <Button
        android:id="@+id/dialogButtonOK"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="OK"
        android:layout_centerInParent="true"        
        />
    </RelativeLayout>      
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:47:52.377

如果您使用该布局通过 dialog.setContentView(View) 向对话框添加内容，那么我怀疑顶部的黑色空间是对话框未使用的标题。在这种情况下，您可以使用 dialog.requestWindowFeature(Window.FEATURE_NO_TITLE) 隐藏/删除标题区域

# python - 在python中按分隔符拆分字符串

> ID：12348407
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:02:56.517
> 
> 标签：python, regex

我有一个格式的字符串

```
s = "a, b, [c, d, ....]" 
```

我怎样才能把它分成一个数组

```
[c, d,, ..] 
```

干净地放入一个元素和 a 和 b 作为结果数组的另一个元素。如果我尝试使用

```
s.split(',') 
```

甚至 [c,d, ...] 也会分裂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:13:03.073

如果您使用的是 2.6+，那么`ast.literal_eval`就是要走的路......（假设您有文字 - 否则，可能`eval`要谨慎使用） - 或者，查看在[http](http://pyparsing.wikispaces.com/Examples)`pyparsing`上有一个“安全”评估示例的库： [//pyparsing.wikispaces.com/Examples](http://pyparsing.wikispaces.com/Examples)（查找 parsePythonValue.py）

literal_eval 解决方案：

```
from ast import literal_eval

s = "'a', 'b', ['c', 'd', 'z']"
print literal_eval(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:08:29.940

`eval()`可以做到。

```
>>> s = "'a', 'b', ['c', 'd', 'e', 'f']"
>>> a = eval(s)
>>> a
('a', 'b', ['c', 'd', 'e', 'f']) 
```

或者您可以对字符串进行一系列修改。

```
>>> s = "a, b, [c, d, e, f]"
>>> a = s.replace("[","").replace("]","").replace(" ","").split(",")
>>> a
['a', 'b', 'c', 'd', 'e', 'f'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:15:28.643

如果你需要它在两个系统之间交换数据，你可以使用 json：

```
>>> import json
>>> s = '[1, 2, [3, 4]]'
>>> json.loads(s)
[1, 2, [3, 4]] 
```

如果你需要文字，你必须引用它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T09:12:15.103

如果您打算采用字符串操作方法：

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

```
import re

text = "a, b, [c, d, ....]"
matches = re.split(r"\W+", text);
print matches 
```

否则我会直接使用评估方法。

# c++ - QtDataStream::writeRawData 重新排序我的字节

> ID：12348411
> 
> 赞同：0
> 
> 时间：2012-09-10T09:03:23.693
> 
> 标签：c++, qt

我正在尝试将原始字节数组保存到文件中：

```
mDataStream.writeRawData( ( (const char *)&testPacket), 188); 
```

测试数据包只是一个无符号字符数组，数据包以正确的大小复制，但字节被重新排序。即：0x47 0x00 0x10 0x20 ... 变为 0x00 0x47 ox20 0x10。

这看起来像一个字节序问题，但我尝试将字节顺序设置为小字节序但结果不成功。

# java - 如何将自定义数据附加到 ebean 实体？

> ID：12348416
> 
> 赞同：1
> 
> 时间：2012-09-10T09:03:34.910
> 
> 标签：java, database, orm, playframework-2.0, ebean

假设我有以下课程

```
@Entity
public class Customer extends Model {

    @Id
    public int id;
    public String email;
    @ManyToOne
    public List<Order> orders;
    public HashMap<String, Object> additionalData;

    public static Finder<String, Customer> find = new Finder<String, Customer>(String.class, Customer.class);

    public static List<Customer> getCustomersWithOpenOrders(){
        return find
                .fetch("orders")
                // with "order.state = 'open'" count > 0
                // add total sum of all orders to 'additionalData' collection
                .findList();
    }
} 
```

如何存储`additionalData`集合中所有订单的总和？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:14:27.303

也许你应该看看[公式注释](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/annotation/Formula.html)。

但是为了使用它，你必须创建一个新属性来存储这个值，然后你可以把这个值放在你的地图中：

```
@Entity
public class Customer extends Model {

    @Id
    public Integer id;
    public String email;
    @ManyToOne
    public List<Order> orders;

    @Transient
    @Formula(...) // write the query to compute the sum
    public Integer totalOrders;

    public HashMap<String, Object> additionalData;

    public static Finder<Integer, Customer> find = new Finder<Integer, Customer>(Integer.class, Customer.class);

    public static List<Customer> getCustomersWithOpenOrders(){
        ...// call the finder

        additionalData.put("sum", totalOrders);
        ...
    }
...
} 
```

# qt - 子类化时的QPushButton在图标周围绘制框

> ID：12348417
> 
> 赞同：2
> 
> 时间：2012-09-10T09:03:37.750
> 
> 标签：qt, qpushbutton

我正在尝试通过子类化并覆盖paintEvent来自定义QPUshButton。我正在写文本，然后是如下图标：

```
paintEvent(QPaintEvent *paint)
    {
         QStyleOption opt;
         opt.init(this);
         QPainter p(this);
        //Draw the base
         style()->drawPrimitive(QStyle::PE_Widget, &opt, &p, this);

        //Draw the text
         style()->drawItemText(&p,this->rect(),Qt::AlignCenter,(this->palette()), true, this->text());

         if(!this->icon().isNull())
            //Draw the icon at 75% button height
            style()->drawItemPixmap(&p, this->rect(),Qt::AlignRight|Qt::AlignVCenter, this->icon().pixmap(this->rect().height()  * 0.75));

    } 
```

但是，我得到的按钮如下：

![在此处输入图像描述](../Images/57d721824caa3e566250f0caacaa1a70.png)

如果可以看到，图标图像周围有一个框。我该如何删除它？（图标尺寸看起来更大，因为我在缩小尺寸之前拍摄了快照。但是，即使图像小得多并且适合图像，框也会出现）。

# python - Django过滤后只获取最新的对象

> ID：12348423
> 
> 赞同：0
> 
> 时间：2012-09-10T09:04:17.860
> 
> 标签：python, django, django-models

我正在为 Django 开发一个问卷类型的应用程序。当参与者完成调查问卷时，将创建一个 AnswerSet 对象，该对象将他们的用户对象链接到 QuestionAnswer 对象列表，他们回答的每个问题都有一个。

```
class AnswerSet(models.Model):

    user=models.ForeignKey(User)
    questionnaire=models.ForeignKey(Questionnaire)

class QuestionAnswer(models.Model):    

    question = models.ForeignKey(Question)
    answer = models.CharField(max_length=255)
    answer_set = models.ForeignKey(AnswerSet) 
```

该应用程序允许人们重新回答问卷，在这种情况下，使用他们现有的答案呈现表单，对于更新的答案，创建并保存一个新的 QuestionAnswer 对象。

因此，我的问题是：

为了在参与者编辑问卷时显示最新的答案，我希望能够获得一个 AnswerSet，然后过滤 QuestionAnswers 以便我为每个问题获得一个 QuestionAnswer，并且有多个 QuestionAnswer 用于任何问题，我只想看最近的一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:15:33.320

感谢@Rohan 的建议和这篇文章[Django query select distinct by field pairs](https://stackoverflow.com/questions/3483307/django-query-select-distinct-by-field-pairs)我找到了一个适合我的解决方案，希望其他人也会觉得它有用！我添加了一个新模型：

```
class LatestQuestionAnswer(models.Model):
    question = models.ForeignKey(Question)
    question_answer = models.ForeignKey(QuestionAnswer)
    answer_set = models.ForeignKey(AnswerSet)
    created = created = models.DateTimeField(auto_now_add=True) 
```

并覆盖了我的 QuestionAnswerModel 上的保存功能，所以它看起来像：

```
def save(self, force_insert=False, force_update=False, using=None):
        super(QuestionAnswer, self).save(force_insert=force_insert, force_update=force_update, using=using)

        try:
            record = LatestQuestionAnswer.objects.get(question=self.question, answer_set=self.answer_set)

            if record.question_answer == self:
                return#nothing to do no point updating the record as it is already correct

        except ObjectDoesNotExist:
            record = LatestQuestionAnswer(question=self.question, answer_set= self.answer_set)

        record.question_answer = self
        record.save() 
```

现在，每当我需要获取所有最新 QuestionAnswers 的列表时，我都可以执行以下操作：

```
most_recent_answers = [record.question_answer for record in LatestQuestionAnswer.objects.filter(answer_set=<an_answer_set>)] 
```

# javascript - 访问嵌套函数结构中的 JavaScript 父函数变量

> ID：12348429
> 
> 赞同：0
> 
> 时间：2012-09-10T09:04:59.537
> 
> 标签：javascript, cordova, web-sql

我的代码在 phonegap 应用程序中。在执行 SELECT SQL 语句时，我在将结果传递给父函数的变量时遇到了困难。代码如下所示：

```
function db_data(query) {
var result_out;
db.transaction(function (tx) {
    tx.executeSql(query, [], function (tx, results) {
        console.log("RETURNED SUCCESSFUL RESULTS"); // SUCCESSFULLY EXECUTING HERE.
        result_out = results.rows;
    }, function (){
        console.log("Error on executing sql");
        result_out = false;
    }); 
});
console.log(result_out); // NOTHING LOGGING HERE.
return result_out;
} 
```

这个函数是传递普通的 SELECT 语句。该函数不返回任何东西，返回的对象仅在 SQL 执行函数中成功记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:11:23.543

该操作是异步的。里面的操作`db.transaction`可能会在稍后生效。当您记录结果时，它还不存在。

如果您想在获取 的值后执行某些`result_out`操作，则需要将其放在回调中：

```
function db_data(query,callback) {
    var result_out;
    db.transaction(function (tx) {
        tx.executeSql(query, [], function (tx, results) {
            console.log("RETURNED SUCCESSFUL RESULTS"); // SUCCESSFULLY EXECUTING HERE.
            callback.call(this,results.rows);
        }, function (){
            console.log("Error on executing sql");
            callback.call(this,false);
        }); 
    });
} 
```

使用 db_data 时，而不是

```
var result = db_data('your query');
//do something with result 
```

改为这样做

```
db_data('your query',function(result){
   //do something with result here
   //result will either be a false or the result
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:11:15.840

那是因为数据库操作是异步的。`result_out`在执行 sql 之前打印该值。您应该为`db_data`.

```
function db_data(query, callback) {
  var result_out;
  db.transaction(function (tx) {
    tx.executeSql(query, [], function (tx, results) {
      console.log("RETURNED SUCCESSFUL RESULTS"); // SUCCESSFULLY EXECUTING HERE.
      callback(null, result.rows); // <<<<<<<<<<< 
    }, function (){
      callback(new Error('error executing sql')); // <<<<<<<<<<<<<
    }); 
  });
}

db_data('select * ....', function (err, rows) {
    // do something with rows
}) 
```

# java - 向 SWT/jface 表添加不可编辑的新行

> ID：12348430
> 
> 赞同：0
> 
> 时间：2012-09-10T09:05:03.753
> 
> 标签：java, swt

是否有一个选项可以使 swt 表中的一行在添加后不可编辑，（并且其他行仍然可编辑）

我正在以这种方式添加新行。

```
Table table = tableViewer.getTable();
tableViewer.add(rowElement);
table.setTopIndex(table.getItemCount());
table.select(table.getItemCount() - 1); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:09:34.063

我猜你正在使用你`TableViewer`的`EditingSupport`（如果没有，请阅读[此](http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html#jfacetable_editor)）。

有`EditingSupport`一个方法`canEdit(Object object)`。您可以使用以下内容来防止编辑给定的单元格：

```
@Override
protected boolean canEdit(Object element) {
    YourObject obj = (YourObject)element;
    if(IT_IS_THE_ELEMENT_YOU_SEEK)
        return false;
    else
        return true;
} 
```

# python - 如何在编译时从 C 扩展模块检查 python API 的版本？

> ID：12348433
> 
> 赞同：11
> 
> 时间：2012-09-10T09:05:17.230
> 
> 标签：python, c

我正在用 C 编写一个 python 模块。该模块需要针对 python 版本 2.4、2.5、2.6 和 2.7 进行编译。

现在我遇到了一个问题，他们在 python 2.5 中定义`Py_ssize_t`了列表的大小，但在 2.4 中他们只使用了`int`.

所以我的问题是：有没有一种简单的方法可以检查我在编译时使用的是 2.4 版还是 2.5 版的 API，以便我可以编写一个小宏？

例如：

```
#if PY_MINOR < 5
typedef int Py_ssize_t;
#endif 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T09:12:14.240

是的，[`patchlevel.h`](https://github.com/python/cpython/blob/master/Include/patchlevel.h)在 Python 中 include dir 定义了您要查找的内容：

```
#define PY_MAJOR_VERSION    2
#define PY_MINOR_VERSION    5
#define PY_MICRO_VERSION    2 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-10T09:11:16.493

我想你需要的是`PY_VERSION_HEX`

cython生成的c代码中有一行

`PY_VERSION_HEX < 0x02040000`

```
#ifndef Py_PYTHON_H
  #error Python headers needed to compile C extensions, please install development version of Python.
#elif PY_VERSION_HEX < 0x02040000
  #error Cython requires Python 2.4+.
#else 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-10T09:11:15.493

只需做类似的事情。

```
Import sys
if sys.version_info < (2, 4): //do something, typedef what you need
else // so on 
```

# validation - wso2 esb validate mediator 总是说请求无效

> ID：12348435
> 
> 赞同：0
> 
> 时间：2012-09-10T09:05:23.797
> 
> 标签：validation, wso2, esb, wso2esb, mediator

我正在使用 wso2 esb 4.0.3，但在使调解器工作时遇到了一些问题。

问题出在给定的模式上，即使我发送了正确的soap请求，验证调解器也会评估无效的请求，因此在失败时配置的序列总是被执行

```
<inSequence>   
    <validate source="$body/reg:RegistrationServiceRequest">
         <on-fail>
                <sequence key="registrationFaultSequence"/>
         </on-fail>
         <schema key="gov:com/testcompany/RegistrationWrapperAttributeTypes.xsd"/>
         <schema key="gov:com/testcompany/RegularRegistrationWrapperTypes.xsd"/>
    </validate>
    .....
</inSequence> 
```

我也通过SoapUI验证了soap请求的有效性，它说请求是有效的，但wso2认为它是无效的

有人可以建议上述配置有什么问题吗？

谢谢小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:15:30.017

在不知道触发此问题的确切原因的情况下，很难确定任何事情。但是，您只需按照下面描述的方式将“日志”调解器放在“on-fail”元素中，就可以找到更多信息，并了解真正出了什么问题。请发布日志调解器的“输出”，以便我们进一步深入研究。

```
<log level="custom">
   <property name="MESSAGE" expression="get-property('ERROR_MESSAGE')"/>
</log> 
```

干杯，普拉巴斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-22T09:53:15.643

您应该在失败之前声明架构，并同时提及资源。

```
<validate cache-schema="true" description="ValidateCustomerRequest" source="//Customer:Customer" xmlns:Customer="some namespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <schema key="gov:custom/Customer.xsd"/>
    <resource key="gov:custom/Customer.xsd" location="Customer.xsd"/>
    <on-fail>
        <makefault version="soap11">
            <code value="soap11Env:VersionMismatch" xmlns:soap11Env="http://schemas.xmlsoap.org/soap/envelope/"/>
            <reason value="Request is Invalid"/>
        </makefault>
    </on-fail>
</validate> 
```

# c# - 将 ListBox 的 ItemsSource 设置为其包含类的属性

> ID：12348436
> 
> 赞同：3
> 
> 时间：2012-09-10T09:05:32.630
> 
> 标签：c#, wpf, xaml, binding, itemssource

我有以下 xaml -

```
<Window x:Class="DataTemplateTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="400" Width="600" Loaded="Window_Loaded">    
    <Grid>
        <ListBox Height="380" Margin="10,12,0,0" Width="355"/>
    </Grid>
</Window> 
```

以及以下代码隐藏 -

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        _nameList = new List<string>
                        {
                            "X",
                            "Y",
                            "Z"
                        };
    }

    private List<string> _nameList;
    public List<string> NameList
    {
        get { return _nameList; }
    }
} 
```

我想将 设置`NameList`为`ItemsSource`来自 xaml 的 ListBox，*而不是*来自代码隐藏。我怎么做？

**编辑：**我知道这样做的 MVVM 方式。但这*不是*我要问的。

**编辑：**这不是我不喜欢 MVVM 左右。在进行一些快速测试时，我才意识到我不知道该怎么做。所以，想知道这是否可能，并尝试学习。无论如何可以使用`StaticResource`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:11:51.763

如果您的意思是“不使用 MVVM 方式”并且不想使用 ViewModel，那么您可以通过以下步骤将数据绑定到“代码隐藏”：

在 XAML 中设置绑定：

```
<ListBox ItemSource="{Binding NameList}"/> 
```

并在您填充列表后设置为，例如在`DataContext`事件中：`this``Window_Loaded`

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    _nameList = new List<string>
                    {
                        "X",
                        "Y",
                        "Z"
                    };
    DataContext = this;
} 
```

编辑：如果你不想设置`DataContext`你可以直接绑定到窗口：

```
<Window Name="window" ... />

  <ListBox  ItemsSource="{Binding NameList, ElementName=window}"/> 
```

或者您可以使用 AncestorBinding 作为

```
<ListBox ItemsSource="{Binding NameList, RelativeSource={RelativeSource AncestorType=Window}}"/> 
```

但是，在这两种情况下，列表都是空的，因为您在加载的事件中填充了列表这一事实不会通知视图。所以你需要使用INPC来通知`"NameList"`属性发生了变化。

# python - 如何检查ssh是否在python中询问密码？

> ID：12348442
> 
> 赞同：1
> 
> 时间：2012-09-10T09:06:05.080
> 
> 标签：python, ssh, expect

有一种方法可以使用 ssh-keygen 连接远程计算机而无需密码。（有关更多信息，请查看[此](http://www.linuxproblem.org/art_9.html)）

在我的问题中，有两台计算机（假设计算机 A 和 B）并且计算机 A 可以在没有 ssh 密码的情况下连接计算机 B。当计算机B的IP地址发生变化时（但我不知道新IP是否真的属于它。），我正在编辑known_host文件，用新IP替换旧IP。如果新的ip确实属于B机，A机可以不用密码继续连接，所以没有问题。但是如果新 ip 不属于计算机 B，则 ssh 会询问密码以连接计算机 B。

由于上述所有进度都是由 python 代码执行的，SSH 正在等待密码，如果我尝试连接计算机 B，我的程序将停止运行。我要做的是检查 ssh 是否在不输入密码的情况下询问密码。

是否有任何 ssh 选项或任何其他方式可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:13:36.543

您可以使用 python [pexpect](http://www.noah.org/python/pexpect/)模块执行此操作。

**例子：**

```
import pexpect

ssh_new_key = "Are you sure you want to continue connecting"

cmd_connect = "ssh -p22 %s@%s" % (account_name, host)

try:

    p = pexpect.spawn(cmd_connect)

    i = p.expect([ssh_new_key, 'asswor'])

    if i == 0:
        p.send('yes\r')
        i = p.expect([ssh_newkey, 'assword:'])

    if i == 1:
        p.send(account_pwd)

except Exception, exp:  
    print = "Could not connect to %s with account %s" % (host, account_name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:22:12.257

阅读 ssh 手册页后，我发现了**PasswordAuthentication**选项。它是这样使用的

```
import commands
ret,out = commands.getstatusoutput("ssh -n -o PasswordAuthentication=no "+username+"@"+ip)
if ret == 0:
   #success
else:
   #fail 
```

如果连接需要密码，则返回失败。

# batch-file - 在目录中搜索多个文件并提供反馈

> ID：12348446
> 
> 赞同：1
> 
> 时间：2012-09-10T09:06:20.493
> 
> 标签：batch-file

我正在尝试创建一个`.bat`文件，该文件将在单个目录中找到多个文件，并在它们存在与否时提供反馈。

怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:09:38.967

以最简单的形式：
`dir Pattern1,Pattern2,Pattern3 >nul 2>&1 && echo found`
`dir`将搜索与指定模式匹配的文件或目录（您可以使用通配符）。如果您只想要文件，`use dir /A-D`
`>nul 2>&1`则抑制它的输出
`&&`意味着仅在先前的命令成功时才执行（即 dir 找到具有该模式的文件/目录）。您也可以使用`||`相反的意思（如果以前失败）。

如果您需要检查所有模式是否存在，只需链式代替：
`(dir Pattern1 && dir Pattern2 && dir Pattern3) >nul 2>&1 && echo found`

如果您希望批次更具可读性（！），请改用`if errolevel`/ `if not errorlevel`。如果没有找到任何东西，则错误级别由 dir 设置为 1，如果找到匹配项，则设置为 0。

当然，您可以使用任何其他命令代替`echo`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T12:33:46.077

如果您想报告是否存在任何文件或所有文件是否存在，wmz 有一个很好的解决方案。但是，您可能需要报告列表中每个文件是否存在。

`IF EXIST "filename"`可用于测试文件或文件夹是否存在。如果你想确定它是一个文件而不是一个文件夹，那么你还需要`IF NOT EXIST "filename\"`.

另一种选择是使用`DIR /A-D`命令并测试成功或失败。

FOR 循环使代码更令人愉悦且更易于维护。不要忘记带有空格或特殊字符（如`&`or ）的文件名`|`必须被引用。

这是使用 DIR /AD 的解决方案；

```
@echo off
for %%F in (file1 file2 "file with space") do (
  1>nul 2>nul dir %%F&&echo %%F Found||echo %%F Not Found
) 
```

这是使用 IF EXIST 的解决方案。请注意如何将每个文件放在单独的行上，这样更容易阅读，尤其是在列表很长的情况下。

```
@echo off
setlocal
for %%F in (
  file1
  file2
  "file with space"
) do (
  set "found="
  if exist %%F if not exist %%F\ set found=1
  if defined found (echo %%F Found) else echo %%F Not Found
) 
```

# apache - inotifywait 对 apache 创建的文件没有反应

> ID：12348455
> 
> 赞同：2
> 
> 时间：2012-09-10T09:06:34.373
> 
> 标签：apache, bash, inotify, inotify-tools

我有一个脚本，它应该将管理员用户上传到我们网站的照片复制到另外两个后端服务器。为此，它执行以下操作：

```
while true; do                                                                                                                                                                                                                                     
    inotifywait -e create "$TRANSFER_FILES" && \                                                                                                                                                                                               
            sleep 20 && \                                                                                                                                                                                               
            copy_files "$SSH_SERVER_1" "$REMOTE_DIR_1"  && \                                                                                                                                                                                               
            copy_files "$SSH_SERVER_2" "$REMOTE_DIR_2"
    sleep 2
done 
```

sleep 20 是给 apache 时间来调整上传图像的大小。

问题：

如果我在 $TRANSFER_FILES 目录（位于本地文件系统上）中创建一个文件，无论是作为 root 用户还是 apache 用户，使用 touch 或 cat 或其他方式，inotifywait 都会收到 CREATE eventc 并调用 copy_files 函数（包装 rsync）。但是，当 apache 进程创建文件时，什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T09:40:24.853

不能直接回答您的问题，但您应该考虑使用[lsyncd](http://code.google.com/p/lsyncd/)。它完全符合您的要求：它通过 inotify 等待，然后运行同步（默认情况下由 rsync）。它是独立的守护进程，经过良好测试。

# asp.net - 多个上一页

> ID：12348456
> 
> 赞同：2
> 
> 时间：2012-09-10T09:06:36.297
> 
> 标签：asp.net, cross-page-posting

是否可以添加多个前一页标签，例如

```
<%@ PreviousPageType VirtualPath="~/Default3.aspx" %>
<%@ PreviousPageType VirtualPath="~/Default3.aspx" %> 
```

***默认3.aspx：***

```
 <asp:GridView ID="grdexample" runat="server" 
     AutoGenerateColumns="False"  onrowcommand="grdexample_RowCommand">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                **<asp:LinkButton ID="lnkbtn" runat="server" Text="Edit" PostBackUrl="~/Default4.aspx" />**
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderText="Name" DataField="ActMasNm" />
        <asp:BoundField HeaderText="ID" DataField="ActMasId" />
        <asp:TemplateField>
            <ItemTemplate>
                <asp:HiddenField ID="hdnso" runat="server" Value='<%# Eval("ActMasId") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

***默认3.cs：***

```
public string id { get; set; }
protected void grdexample_RowCommand(object sender, GridViewCommandEventArgs e)
{
    GridViewRow gvrw = (GridViewRow)((Control)e.CommandSource).Parent.Parent;<br>
    int rwIndex = gvrw.RowIndex;<br>
    HiddenField hdn = (HiddenField)gvrw.FindControl("hdnso");<br>
    id = hdn.Value;   
} 
```

***默认4.aspx：***

```
< PreviousPageType VirtualPath="~/Default3.aspx" > 
```

***Default4.cs***

```
TextBox1.Text = this.PreviousPage.id; 
```

上面的代码工作正常，我的问题是，如果`Default4.apsx`从`Default1.aspx`我如何获取 id 调用这个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:22:07.133

你应该使用

```
<%@ PreviousPageType TypeName 
```

代替

```
<%@ PreviousPageType VirtualPath= 
```

[在MSDN](http://msdn.microsoft.com/en-us/library/ms228169%28v=vs.90%29.aspx)上看到

**编辑：查看** 此[URL](http://www.developerscode.com/2011/03/cross-page-posting-of-form-contents-for.html)以获取有关访问类型的更多详细信息..

# java - 从 java 打开 URL

> ID：12348463
> 
> 赞同：1
> 
> 时间：2012-09-10T09:07:04.080
> 
> 标签：java, url

我们正在为 bigquery 编写一个开源 jdbc 驱动程序，并遇到了以下问题：

我们想授权我们的驱动程序使用 Oauth 2 作为已安装的应用程序。在 windows xp、windows 7 x64、windows 7 x64 + RDP 上运行良好。但是在 Windows Server 2008 R2 + RDP 的测试平台上它失败了。

基本上，我们打开一个网络浏览器，他登录，我们捕捉到回复，并对用户进行身份验证。

这是网址打开的代码：

```
 private static void browse(String url) {
    // first try the Java Desktop
    logger.debug("First try the Java Desktop");
    if (Desktop.isDesktopSupported()) {
        Desktop desktop = Desktop.getDesktop();
        if (desktop.isSupported(Action.BROWSE))
            try {
                desktop.browse(URI.create(url));
                return;
            } catch (IOException e) {
                // handled below
            }
    }
    // Next try rundll32 (only works on Windows)
    logger.debug("Try the rundll32");
    try {
        Runtime.getRuntime().exec(
                "rundll32 url.dll,FileProtocolHandler " + url);
        return;
    } catch (IOException e) {
        // handled below
    }
    // Next try browsers
    logger.debug("Try with browsers");
    BareBonesBrowserLaunch.openURL(url);
} 
```

我想出的是：Bar​​eBonesBrowserLaunch 没有打开链接，FileProtocolHandler 也没有。

URL 长度略低于 250 个字符。

任何援助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:10:20.870

使用`java.net.HttpURLConnection`

```
URL myURL = new URL("http://example.com/");
    URLConnection myURLConnection = myURL.openConnection();
    myURLConnection.connect(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T10:40:32.973

基本上听起来不错，但如果您想使用特定浏览器打开（如果系统中有多个浏览器），这是另一种方式

```
String url = "http:/devmain.blogspot.com/";
String[] browsers = { "firefox", "opera", "mozilla", "netscape" }; // common browser names
String browser = null;
for (int count = 0; count < browsers.length && browser == null; count++)
  if (Runtime.getRuntime().exec(new String[] { "which", browsers[count] }).waitFor() == 0)
    browser = browsers[count]; // have found a browser
Runtime.getRuntime().exec(new String[] { browser, url }) // open using a browser 
```

更多细节在这里：[http ://devmain.blogspot.com/2013/10/java-how-to-open-url-in-browser.html](http://devmain.blogspot.com/2013/10/java-how-to-open-url-in-browser.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:52:23.237

这是一个不同角度的建议。（不确定这是否适合您）

您要解决的问题是使用 Oauth 2 和身份验证机制。而不是打开浏览器捕获其响应。已经有可用的库，如[**Apache amber**](http://incubator.apache.org/amber/) **，它们纯粹在 java**中执行此操作。

这是您可以参考的官方[Amber 示例。](https://cwiki.apache.org/AMBER/oauth-20-client-quickstart.html)

# java - 如果我使用 SMTP 代码，则会出现 java.lang.ClassFormatError

> ID：12348468
> 
> 赞同：0
> 
> 时间：2012-09-10T09:07:48.943
> 
> 标签：java

我正在尝试通过 SMTP 从我的 java 代码中发送邮件。发生的问题非常独特，我不确定你们中是否有人遇到过同样的问题。我已经有一堆现有的代码，当我从 Maven 运行时运行良好，没有任何错误，而其中没有 SMTP 的代码。但是，当我在其中集成代码以通过 SMTP 发送邮件时，我开始遇到奇怪的异常，并且来自 Maven 的 jar 文件执行失败。下面是错误

```
Exception in thread "main" java.lang.ClassFormatError: Absent Code attribute in method     that is not native or abstract in class file javax/mail/Message
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266) 
```

我也搜索了网络，但无法得到任何适当的解决方案来解释为什么这个奇怪的异常会一次又一次地发生。您能否提供您对 sam 的评论，因为我已经被这个问题困扰了很长时间了。

# java - 标记“;”上的语法错误 - 真的出乎意料

> ID：12348469
> 
> 赞同：1
> 
> 时间：2012-09-10T09:07:50.617
> 
> 标签：java

我遇到了以下错误的问题：

令牌“;”上的语法错误，此令牌后应为 {
语法错误，插入“}”以完成 EnumBody

```
public enum ImpNoise {
  INSTANCE;

   private int p[] = new int[512];

   for(int i = 0; i < 256; i++) {

   }

} 
```

如您在上面看到的，我将整个班级减少到最低限度。我发现for循环导致了问题。但我真的不明白，它看起来还不错吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:09:10.673

您不能只在[类](http://docs.oracle.com/javase/tutorial/java/javaOO/classdecl.html)主体中、[方法](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)、[构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)或代码[块](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html)`for`之外放置一个语句（或任何其他语句）。如果您希望您的代码在创建类时运行，请将其放入构造函数中：

```
public enum ImpNoise {
  INSTANCE;

  private int p[] = new int[512];

  private ImpNoise() {
    for(int i = 0; i < 256; i++) {

    }
  }
} 
```

### 参考：

*   [声明类](http://docs.oracle.com/javase/tutorial/java/javaOO/classdecl.html)
*   [为您的类提供构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)
*   [定义方法](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:09:18.333

循环应该属于一个方法，但它不属于。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:13:08.410

您需要将代码放在代码块中。只有字段的初始化程序可以避免这种情况。

你可能想要的是

```
public enum ImpNoise {
   INSTANCE;

   private final int[] p = new int[512];

   // either
   {
       for(int i = 0; i < 256; i++) {

       }
   }
   // or
   private ImpNoise() {
       for(int i = 0; i < 256; i++) {

       }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:13:26.693

Java 枚举是成熟的类，它们允许您编写方法、实现接口等。但肯定不能编写这样的代码 :)

[您可以在此处](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)阅读有关枚举的更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T09:10:02.763

您可能希望将`for`循环放在方法或构造函数中。

# regex - Grep 所有行结束 - 不起作用

> ID：12348471
> 
> 赞同：0
> 
> 时间：2012-09-10T09:07:55.013
> 
> 标签：regex, grep

我使用 grep 命令 grep 所有以 com$ 结尾的行

> grep 'com$' 输入 > 输出

但结果 - 只有一行，匹配模式。

我想要，结果是所有符合 com$ 模式的行。

例子：

网站

网站2.com

site3.tv

site4.com

GNU grep 2.6.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:29:47.147

使用您的输入，它对我有用。但是，尾随空格会是一个问题吗？尝试：

```
grep 'com[ ]*$' input >output 
```

看到你的结果会很有帮助。

# c# - 从反射或硬编码字符串中提取方法名称作为字符串？

> ID：12348472
> 
> 赞同：2
> 
> 时间：2012-09-10T09:07:56.993
> 
> 标签：c#, .net

我正在从属性调用方法。我必须将属性名称作为该方法的属性传递。我的财产是

```
string lcl_name = string.Empty;

public string Name 
{
get { return lcl_name; }
set 
    {
        if (lcl_name != value) 
        {
            lcl_name = value;
            Foo_Method(GetCorrectPropertyName(MethodBase.GetCurrentMethod().Name));
        }
}
} 
```

方法是

```
public string GetCorrectPropertyName(string propertyName)
{
    return propertyName.StartsWith("set_") || propertyName.StartsWith("get_") ? 
           propertyName.Substring(4) : string.Empty;
} 
```

我的前辈说我不应该这样调用反射并将直接字符串传递给方法

```
Foo_Method("Name"); 
```

但在这种情况下，由于它是硬编码的，并且如果属性名称发生更改，则必须相应地更改方法调用。

所以我的问题是，其中哪一个在效率方面会更好？我的前辈们看到的还有什么我没有注意到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:21:10.823

也许[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)可以在这里为您提供帮助。

而不是`Foo_Method`将属性名称作为字符串

```
void Foo_Method(string name)
{

} 
```

使用类型参数`Expression`通过[MemberExpression](http://msdn.microsoft.com/en-us/library/system.linq.expressions.memberexpression.aspx)检索属性名称：

```
void Foo_Method(Expression<Func<NameOfYourClass, String>> exp)
{
    var propertyName = ((MemberExpression)exp.Body).Member.Name;
} 
```

并这样称呼它

```
public string Name 
{
    get { return lcl_name; }
    set 
    {
        if (lcl_name != value) 
        {
            lcl_name = value;
            // Foo_Method("Foo"); string is bad
            Foo_Method(x => x.Name);
        }
    }   
} 
```

这样，在重命名时`Name`，您不会破坏您的代码，因为它`Foo_Method(x => x.Name)`也会被重命名（当然，当使用您的 IDE 重构功能进行重命名时）。

* * *

**编辑：**

要回答您的评论：

如果你真的不能给 Foo_Method 添加一个重载，你当然可以只创建另一个方法：

```
if (lcl_name != value) 
{
    lcl_name = value;
    Foo_Method(GetPropName(x => x.Name));
}

...

string GetPropName(Expression<Func<NameOfYourClass, String>> exp)
{
    return ((MemberExpression)exp.Body).Member.Name;
} 
```

* * *

**编辑2：**

要回答您的其他评论：

您可以创建一个扩展方法

```
public static class Extensions
{
    public static string GetPropName<T>(this T t, Expression<Func<T, String>> exp)
    {
        return ((MemberExpression)exp.Body).Member.Name;
    }
}

var propertyName = yourInstace.GetPropName(y => y.Name); 
```

但您不必这样做，因为表达式无需任何实例即可正常工作。

```
public static class Extensions
{
    public static string GetPropName<T>(Expression<Func<T, String>> exp)
    {
        return ((MemberExpression)exp.Body).Member.Name;
    }
}

var propertyName  = Extensions.GetPropName<YourClass>(y => y.Name); 
```

诀窍是在这里使用泛型。

* * *

第一种方法在 VB.Net 中看起来像这样

```
Public Function GetPropName(Of TClass, TProperty)(exp As Expression(Of Func(Of TClass, TProperty))) as String
    Return DirectCast(exp.Body, MemberExpression).Member.Name
End Function

...

GetPropName(Function(x) x.Name) 
```

# php - 在 PHP 中使用命名空间前缀获取 XML 值

> ID：12348473
> 
> 赞同：0
> 
> 时间：2012-09-10T09:08:00.240
> 
> 标签：php, xml, namespaces

这是对此的后续问题： [Getting XML attributes in PHP](https://stackoverflow.com/questions/12325821/getting-xml-attributes-in-php)

我正在努力获取带有命名空间前缀的元素值。从这里查看这个例子：http: [//itunes.apple.com/us/rss/toppaidapplications/limit=10/genre=6014/xml](http://itunes.apple.com/us/rss/toppaidapplications/limit=10/genre=6014/xml)

```
<im:image height="53">http://a2.mzstatic.com/us/r1000/114/Purple/v4/bc/0e/86/bc0e8619-5d48-1efe-2ac3-662696fb9a34/mzl.bimldzcn.53x53-50.png</im:image>          
<im:image height="75">http://a3.mzstatic.com/us/r1000/114/Purple/v4/bc/0e/86/bc0e8619-5d48-1efe-2ac3-662696fb9a34/mzl.bimldzcn.75x75-65.png</im:image> 
```

如果我尝试使用 $e->im:image 引用元素，则会收到以下错误：

```
PHP Parse error:  syntax error, unexpected ':' 
```

$e->'im:image' 给了我：

```
PHP Parse error:  syntax error, unexpected T_CONSTANT_ENCAPSED_STRING, expecting T_STRING or T_VARIABLE or '{' or '$' 
```

有什么建议么？

更新：我编辑了具有误导性的问题标题。它实际上是我感兴趣的带有命名空间前缀（而不是属性）的元素值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:29:54.233

使用 SimpleXML 时（如[您之前的问题](https://stackoverflow.com/questions/12325821/getting-xml-attributes-in-php)所建议），您必须使用[children()](http://docs.php.net/manual/en/simplexmlelement.children.php)方法来获取某个命名空间的所有子元素，与[attributes()](http://docs.php.net/manual/en/simplexmlelement.attributes.php)相同。

例如

```
<?php
define('URI_RSS', 'http://itunes.apple.com/rss');
$feed = new SimpleXMLElement(getData());

foreach( $feed->entry as $entry ) {
    $attributes = $entry->id->attributes(URI_RSS);
    echo 'id[im:id]: ', $attributes['id'], "\n";

    $attributes = $entry->category->attributes(URI_RSS);
    echo 'category[im:id]: ', $attributes['id'], "\n";

    $imElements = $entry->children(URI_RSS);
    foreach( $imElements as $name=>$c ) {
        echo $name, '=', $c, "\n";
    }
}

function getData() {
    return <<< eot
<?xml version="1.0" encoding="utf-8"?>

    <feed xmlns:im="http://itunes.apple.com/rss" xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
        <id>someid</id><title>some title</title><updated>2012-09-10T02:12:06-07:00</updated><link rel="alternate" type="text/html" href="http://link1"/><link rel="self" href="http://link12"/><icon>http://iconlink1</icon><author><name>some name</name><uri>http://uri</uri></author><rights>all rights wronged</rights>

            <entry>
                <updated>2012-09-10T02:12:06-07:00</updated>

                    <id im:id="123456789" im:bundleId="a.bundle.id">http://id</id>

                    <title>some title</title>

                    <summary>This is the summary.

A short text summarizing the complete article
</summary>

                    <im:name>imname</im:name>

                    <link rel="alternate" type="text/html" href="http://alternate"/>

                    <im:contentType term="Application" label="Application"/>

                    <category im:id="7890" term="example" scheme="http://scheme" label="example"/>

                    <link title="Preview" rel="enclosure" type="image/jpeg" href="http://preview" im:assetType="preview"><im:duration>0</im:duration></link>

                    <im:artist href="http://artist">sample artist</im:artist>

                    <im:price amount="0.99000" currency="USD">$0.99</im:price>

                    <im:image height="53">http://1.png</im:image>

                    <im:image height="75">http://2.png</im:image>

                    <im:image height="100">http://3.png</im:image>

                    <rights>all rights wronged</rights>

                    <im:releaseDate label="August 28, 2012">2012-08-28T00:00:00-07:00</im:releaseDate>

                    <content type="html">content
                    content
                    content
</content>

            </entry>
        </feed>
eot;
} 
```

印刷

```
id[im:id]: 123456789
category[im:id]: 7890
name=imname
contentType=
artist=sample artist
price=$0.99
image=http://1.png
image=http://2.png
image=http://3.png
releaseDate=2012-08-28T00:00:00-07:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:43:37.760

好的，我知道了。

答案是指定命名空间。

例如查看前面的问题并使用：

```
$im = $e->children('http://itunes.apple.com/rss'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:12:33.230

--> [php domdocument](http://php.net/manual/en/class.domdocument.php)
-->[通过标签名和命名空间获取元素](http://php.net/manual/en/domdocument.getelementsbytagnamens.php)

# c# - .NET 权限异常中的网络数据包嗅探

> ID：12348475
> 
> 赞同：2
> 
> 时间：2012-09-10T09:08:04.720
> 
> 标签：c#, .net, network-programming, ip

我有一本书名为 .NET 中的网络编程，其中包含以下代码示例，用于在网络堆栈上嗅探 IP 数据包。我已经从书中复制了代码示例 WORD-FOR-WORD 所以请原谅缺乏文体约定等。

```
List<string> packets = new List<string>();

public void Run()
{
    int len_receive_buf = 4096;
    int len_send_buf = 4096;
    byte[] receive_buf = new byte[len_receive_buf];
    byte[] send_buf = new byte[len_send_buf];
    int cout_receive_bytes;
    Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);
    socket.Blocking = false;
    IPHostEntry IPHost = Dns.GetHostByName(Dns.GetHostName());
    socket.Bind(new IPEndPoint(IPAddress.Parse(IPHost.AddressList[0].ToString()), 0));
    socket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.HeaderIncluded, 1);
    byte[] IN = new byte[4] { 1, 0, 0, 0 };
    byte[] OUT = new byte[4];
    int SIO_RCVALL = unchecked((int)0x98000001);
    int ret_code = socket.IOControl(SIO_RCVALL, IN, OUT);
    while(true)
    {
        IAsyncResult ar = socket.BeginReceive(receive_buf, 0, len_receive_buf, SocketFlags.None, null, this);
        cout_receive_bytes = socket.EndReceive(ar);
        Receive(receive_buf, cout_receive_bytes);
    }
}

public void Receive(byte[] buf, int len)
{
    if(buf[9] == 6)
    {
        packets.Add(Encoding.ASCII.GetString(buf).Replace("\0", " "));
    }
} 
```

我第一次测试这个是几年前（甚至在 Vista 出现之前），我使用的机器是一个 32 位 Windows XP Professional 平台，带有一个在 IPv4 上运行的 NIC。

我现在正在尝试在 64 位 Windows 7 平台上使用运行 IPv6 的 NIC 进行测试，但它无法正常工作。我假设这与 IPv6 有关。谁能建议我如何有效地解决这个问题？

编辑：这是我尝试运行时遇到的异常......

![在此处输入图像描述](../Images/35589de73fa97d8739b393ad9891e4a9.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T09:17:11.730

[IPv4](http://en.wikipedia.org/wiki/IPv4#Header)和[IPv6](http://en.wikipedia.org/wiki/IPv6_packet)之间的标头有很大不同。

所以检查：

```
if(buf[9] == 6) 
```

它检查数据包是否是 TCP for IPv4 正在查询 IPv6 数据包的源地址字段的一部分。对于 IPv6，它应该检查偏移量 6* 处的“Next Header”。当然，现在您还必须先检查 IP 版本才能知道是检查偏移量 6 还是偏移量 9。

* * *

对于异常消息，您可能没有以管理员身份运行，您需要监听[原始套接字](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548%28v=vs.85%29.aspx)（本机文档，但仍然适用）：

> 要使用**SOCK_RAW**类型的套接字需要管理权限。运行使用原始套接字的 Winsock 应用程序的用户必须是本地计算机上管理员组的成员，否则原始套接字调用将失败，错误代码为[`WSAEACCES`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx#WSAEACCES). 在 Windows Vista 和更高版本上，对原始套接字的访问是在创建套接字时强制执行的。在早期版本的 Windows 中，对原始套接字的访问是在其他套接字操作期间强制执行的。

* * *

(*) 当然，在您发现它是 TCP 数据包之前，可能需要处理多个 IPv6 标头。

# html - 无法使用 CSS 设置 div 样式

> ID：12348478
> 
> 赞同：0
> 
> 时间：2012-09-10T09:08:11.313
> 
> 标签：html, css

我无法弄清楚为什么不应用我的 div 样式。这一定是非常简单明了的事情，但对我来说不是，不是今天。

这是一个非常简单的登录页面。

HTML：

```
<div id="form_wrap">
    <div id="logo">
        <a href="#" title="#" id="logg"> 
            <img src="./images/smaple.png" alt="sample" />
        </a>    
    </div>

    <form name="login-form" class="login-form" action="#" method="post">            
        <div class="form_content">
            <input name="username" type="text" class="input username" placeholder="Benutzername" /> 
            <input name="password" type="password" class="input password" placeholder="Passwort"  />        
            <input name="submit" type="submit" class="button" value="Anmelden"/> 
        </div>  
    </form>     
</div>

<div id="langchoice">
    <span id="triangle"></span>

    <select id ="langlist">
        <option value= "1">Deutsch</option>
        <option value = "2">Englisch</option>
    </select>
</div> 
```

和 CSS（一些小的背景渐变更改以避免代码意大利面条）：

```
 *{
margin:0;
padding:0;
border: none;
outline: none;

  }

 /* apply a natural box layout model to all elements */
 * { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

   html{

background:#193358 url('images/bckg.jpg') repeat;

/* Ensure the html element always takes up the full height of the browser window */
min-height:100%;
height: 100%;
}

   body{
/* Workaround for some mobile browsers */

height: 100%;
min-height:100%;  
    background: #333;

   }

    a, a:visited {
outline:none;
color:#1c4f64;
    }

    a:hover{
text-decoration:none;
    }

    section, footer, header{
display: block;
    }

    #logo {

    text-align: center;
    }

    #form_wrap {
/* Center wrapper perfectly */
width: 440px;
height:400px;
margin: 275px auto;
z-index:2;
clear:both;
    }

   header{

   background: #333;
   background-repeat: repeat-x;
   width: 100%;
   height:300px;
color: white;
z-index: -1;
position:fixed;
top: 0;
left: 0;
    }

    .login-form {
width: 435px;
height: 320px;
margin: 20px auto 0;
padding: 50px 110px 60px;
position: relative;

background: #f2f3e7;
border: 0.5px solid rgba(0, 0, 0, 0.4);
border-radius: 12px;

box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6) inset;
-moz-box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6) inset;
-webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6) inset;
     }

    /* Input field */
    .login-form .form_content .input {
width: 188px;
padding: 12px 25px 8px;
font-family: 'superficial_book';
font-weight: 400;
font-size: 14px;
color: #9d9e9e;
text-shadow: 1px 1px 0 rgba(256,256,256,1.0);

background: #dfdfde;
border: 1px solid #fff;
border-radius: 10px;

box-shadow: inset 0 1px 3px rgba(0,0,0,0.50);
-moz-box-shadow: inset 0 1px 3px rgba(0,0,0,0.50);
-webkit-box-shadow: inset 0 1px 3px rgba(0,0,0,0.50);
    }

    /* Second input field */
    .login-form .form_content .password, .login-form .form_content {
margin-top: 25px;
    }

    .login-form .form_content .input:hover {
background: #d3e3e4;
color: #416e75;
    }

    .login-form .form_content .input:focus {
background: #d3e3e4;
color: #416e75;

box-shadow: inset 0 1px 2px rgba(0,0,0,0.25);
-moz-box-shadow: inset 0 1px 2px rgba(0,0,0,0.25);
-webkit-box-shadow: inset 0 1px 2px rgba(0,0,0,0.25);
    }

    /* Animation */
    .input, .button, .langchoice {
transition: all 0.5s ease;
-moz-transition: all 0.5s ease;
-webkit-transition: all 0.5s ease;
-o-transition: all 0.5s ease;
-ms-transition: all 0.5s ease;
    }

    /* Login button */
    .login-form .button {

    position: relative;
padding: 8px 60px;
margin: 25px auto;
font-family: 'superficialbold';
font-weight: 300;
font-size: 14px;
color: #e3e3d5;
display: inline-block;
text-align: center;
text-shadow:1px -1.5px rgba(0, 0, 0, 0.5), 0 0px rgba(57, 128, 148, 0.5), 0 0 rgba(255, 255, 255, 0.2), 0 1px rgba(0, 0, 0, 0.3);
text-decoration: none;
background:#156785 url('images/button_bckg.gif') repeat-x ;
border-radius: 10px;
cursor: pointer;
box-shadow: 0 1px 2px #fff inset, 0 2px 0 0 #156785, 0 5px 3px #999;
-moz-box-shadow: 0 1px 2px #fff inset, 0 2px 0 0 #156785, 0 5px 3px #999;
-webkit-box-shadow: inset 0px 1px 0px #333, 0px 2px 0px 0px #156785, 0px 5px 3px #999;
     }

    .login-form .button:hover, .login-form .button:focus,.login-form .button:active {
border: 1px solid rgba(256,256,256,0.3);
box-shadow:  0 1px 0 #333 inset,0 1px 0 #333;
-moz-box-shadow:  inset 0px 1px 0px #333;
-webkit-box-shadow: inset 0px 1px 0px #333;
color: #f6f4e7;
padding: 7px 60px;
position: relative;
top:-1px;
text-shadow:1px -1.5px rgba(0, 0, 0, 0.5), 0 0px rgba(57, 128, 148, 0.5), 0 0 rgba(255, 255, 255, 0.2), 0 1px rgba(0, 0, 0, 0.3);
    }

    div#langchoice {

    position: absolute;
    top: 200px;
    left: 200px;
    width:140px;
    height:34px;
    background-color:#F1BD4B;
    margin-left: -8px;
    padding:2px 10px; 
    -webkit-border-radius: 1px 8px 8px 1px;
    border-radius: 1px 8px 8px 1px;
border:0;
    -webkit-box-shadow: 1px 2px 2px 0px rgba(23, 34, 23;)
    box-shadow: 1px 2px 2px 0px rgba(23, 34, 23;)

    z-index: 10;

    } 
```

在这里开玩笑：http: [//jsfiddle.net/yp5yw/](http://jsfiddle.net/yp5yw/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:42:05.110

错误

```
-webkit-box-shadow: 1px 2px 2px 0px rgba(23, 34, 23;)
box-shadow: 1px 2px 2px 0px rgba(23, 34, 23;)
                                           ^ the semicolon AND the alpha value. 
```

正确的：

```
div#langchoice {
    position: absolute;
    top: 200px;
    left: 200px;
    width:140px;
    height:34px;
    background-color: #F1BD4B;
    margin-left: -8px;
    padding:2px 10px;
    -webkit-border-radius: 1px 8px 8px 1px;
    border-radius: 1px 8px 8px 1px;
    border:0;
    -webkit-box-shadow: 1px 2px 2px 0px rgba(23, 34, 23, 1);
    box-shadow: 1px 2px 2px 0px rgba(23, 34, 23, 1);
    -moz-box-shadow: 1px 2px 2px 0px rgba(23, 34, 23, 1);
    z-index: 10;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-10T09:26:10.383

CSS3 样式不支持低版本浏览器。请参考链接[http://caniuse.com/](http://caniuse.com/)

# iphone - 异常代码：0x0000003d 处的 KERN_INVALID_ADDRESS

> ID：12348484
> 
> 赞同：0
> 
> 时间：2012-09-10T09:08:21.190
> 
> 标签：iphone, addressbook

我正在为我的应用程序使用地址簿框架，并且我在该代码上遇到了崩溃。该代码如下所示

```
+(NSMutableArray *)getcontactdetails
{
    [self current_function_name:@"Inside getcontactdetails"];
    NSMutableArray *list = [[NSMutableArray alloc] init];
    ABAddressBookRef addressBook;
    CFArrayRef allSources;
    addressBook = ABAddressBookCreate();
    ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);
    allSources = ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook,    source, kABPersonFirstNameProperty);
    CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

    if(nPeople != 0){
        for (CFIndex i = 0; i < nPeople; i++)
        {
            //common field
            NSString *basic_email =[[NSString alloc] init] ;
            NSString *basic_mobile =[[NSString alloc] init] ;
            //personal filed
            NSString *Home_email =[[NSString alloc] init] ;
            NSString*home_mobile =[[NSString alloc] init] ;
            NSString*home_address =[[NSString alloc] init];
            //business filed
            NSString *work_email =[[NSString alloc] init] ;
            NSString*work_mobile =[[NSString alloc] init] ;
            NSString *work_address =[[NSString alloc] init] ;

            contact_details *phone_book_data=[[contact_details alloc] init];
            ABRecordRef aSource = CFArrayGetValueAtIndex(allSources,i);

            // Fetch all groups included in the current source
            NSString *first_name = (NSString*)ABRecordCopyValue(aSource,   kABPersonFirstNameProperty);            
            if (![first_name isEqualToString:@"(null)"]){
                phone_book_data.FirstName=[NSString stringWithFormat:@"%@",first_name];
            }
            NSLog(@"last_name:-%@",first_name);

            NSString *last_name=(NSString*)ABRecordCopyValue(aSource, kABPersonLastNameProperty);
            if ([last_name isEqualToString:@"(null)"] || last_name == nil || last_name.length == 0) {
                phone_book_data.LastName=[NSString stringWithFormat:@""];
            }
            else{
                phone_book_data.LastName=[NSString stringWithFormat:@"%@",last_name];
            }
            NSLog(@"last_name:-%@",last_name);

            NSString *company_name=(NSString*)ABRecordCopyValue(aSource, kABPersonOrganizationProperty);
            NSLog(@"companyname:-%@",company_name);

            NSString *job_title=(NSString*)ABRecordCopyValue(aSource, kABPersonJobTitleProperty);
            NSLog(@"jobtitle:-%@",job_title);

            ABMultiValueRef address =(NSString*)ABRecordCopyValue(aSource, kABPersonAddressProperty);
            NSString* addLabel;
            for(CFIndex i = 0; i < ABMultiValueGetCount(address); i++) {
                addLabel=(NSString*)ABMultiValueCopyLabelAtIndex(address, i);
                if ([addLabel isEqualToString:(NSString*)kABWorkLabel])
                {
                    work_address=@"exist";
                }
                if ([addLabel isEqualToString:(NSString*)kABHomeLabel])
                {
                    home_address=@"exist";
                }
           }
           NSLog(@"work_address:-%@",work_address);
           NSLog(@"home_address:-%@",home_address);

        ABMultiValueRef phones =(NSString*)ABRecordCopyValue(aSource, kABPersonPhoneProperty);
        NSString* mobileLabel;
        for(CFIndex i = 0; i < ABMultiValueGetCount(phones); i++) {
            mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);

            if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
            {
                home_mobile = [(NSString*)ABMultiValueCopyValueAtIndex(phones, i) retain];
            }
            if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
            {
                basic_mobile = [(NSString*)ABMultiValueCopyValueAtIndex(phones, i)retain];
            }
            if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMainLabel])
            {
                work_mobile = [(NSString*)ABMultiValueCopyValueAtIndex(phones, i)retain];

            }
        }

        NSLog(@"home_mobile:-%@",home_mobile);
        NSLog(@"basic_mobile:-%@",basic_mobile);
        NSLog(@"work_mobile:-%@",work_mobile);

        ABMultiValueRef email = ABRecordCopyValue(aSource, kABPersonEmailProperty);
        NSString* email_lbl;
        for(CFIndex i = 0; i < ABMultiValueGetCount(email); i++) {
            email_lbl = (NSString*)ABMultiValueCopyLabelAtIndex(email, i);

            if([email_lbl isEqualToString:(NSString *)kABHomeLabel])
            {
                Home_email = [(NSString*)ABMultiValueCopyValueAtIndex(email, i)retain];
            }
            if([email_lbl isEqualToString:(NSString *)kABWorkLabel])
            {
                work_email = [(NSString*)ABMultiValueCopyValueAtIndex(email, i)retain];
            }
            if([email_lbl isEqualToString:(NSString *)kABOtherLabel]){
                basic_email = [(NSString*)ABMultiValueCopyValueAtIndex(email, i)retain];
            }

        }

        NSLog(@"Home_email:-%@",Home_email);
        NSLog(@"work_email:-%@",work_email);
        NSLog(@"basic_email:-%@",basic_email);

        if ([company_name isEqualToString:@""] || [company_name isEqualToString:@"(null)"] || company_name.length == 0) {
            if ([job_title isEqualToString:@""] || [job_title isEqualToString:@"(null)"] || job_title.length == 0) {
                if ([work_address isEqualToString:@""] || [work_address isEqualToString:@"(null)"] || work_address.length == 0) {
                    if ([work_mobile isEqualToString:@""] || [work_mobile isEqualToString:@"(null)"] || work_mobile.length == 0) {
                        if ([work_email isEqualToString:@""] || [work_email isEqualToString:@"(null)"] || work_email.length == 0) {
                            phone_book_data.Type=[NSString stringWithFormat:@"personal"];
                        }
                        else{
                            phone_book_data.Type=[NSString stringWithFormat:@"business"];
                        }
                    }
                    else{
                        phone_book_data.Type=[NSString stringWithFormat:@"business"];
                    }
                }
                else
                {
                    phone_book_data.Type=[NSString stringWithFormat:@"business"];
                }
            }
            else{
                phone_book_data.Type=[NSString stringWithFormat:@"business"];
            }
        }
        else{
            phone_book_data.Type=[NSString stringWithFormat:@"business"];
        }

        if ([phone_book_data.Type isEqualToString:@"business"])
        {

            if ([work_mobile isEqualToString:@"(null)"] ||[work_mobile isEqualToString:@""] || work_mobile == nil || work_mobile.length == 0) {
                if ([basic_mobile isEqualToString:@"(null)"] || basic_mobile == nil || basic_mobile.length == 0) {
                    phone_book_data.MobileNumber = @"";
                }
                else{
                    phone_book_data.MobileNumber=[NSString stringWithFormat:@"%@",basic_mobile];
                }

            }
            else{
                phone_book_data.MobileNumber=[NSString stringWithFormat:@"%@",work_mobile];
            }

            if ([work_email isEqualToString:@"(null)"] || work_email == nil || work_email.length == 0)
            {
                if ([basic_email isEqualToString:@"(null)"] || basic_email == nil || basic_email.length == 0) {
                    phone_book_data.emailaddress=@"";
                }
                else{
                    if ([basic_email rangeOfString:@"gmail"].location != NSNotFound || [basic_email rangeOfString:@"yahoo"].location != NSNotFound || [basic_email rangeOfString:@"hotmail"].location != NSNotFound ||[basic_email rangeOfString:@"aol"].location != NSNotFound) {
                        phone_book_data.emailaddress=basic_email;
                    }
                    else{
                        phone_book_data.emailaddress=@"";
                    }
                }
            }
            else{
                if ([work_email rangeOfString:@"gmail"].location == NSNotFound || [work_email rangeOfString:@"yahoo"].location == NSNotFound || [work_email rangeOfString:@"hotmail"].location == NSNotFound ||[work_email rangeOfString:@"aol"].location == NSNotFound) {
                    phone_book_data.emailaddress=@"";
                }
                else{
                    phone_book_data.emailaddress=work_email;

                }
            }
        }

        else{
            if ([home_mobile isEqualToString:@"(null)"] || home_mobile == nil || home_mobile.length == 0) {
                if (![basic_mobile isEqualToString:@"(null)"] || basic_mobile != nil || basic_mobile.length != 0) {
                    phone_book_data.MobileNumber=[NSString stringWithFormat:@"%@",basic_mobile];
                }
                else{
                    phone_book_data.MobileNumber = @"";
                }
            }
            else{
                phone_book_data.MobileNumber=[NSString stringWithFormat:@"%@",home_mobile];
            }
            if ([Home_email isEqualToString:@"(null)"] || Home_email == nil || Home_email.length == 0)
            {
                if ([basic_email isEqualToString:@"(null)"] || basic_email == nil || basic_email.length == 0) {
                    phone_book_data.emailaddress=@"";
                }
                else{
                    phone_book_data.emailaddress=basic_email;
                }
            }
            else{
                phone_book_data.emailaddress=Home_email;
            }

        }

        if(ABPersonHasImageData(aSource)){
            phone_book_data.contact_image = [UIImage imageWithData:(NSData *)ABPersonCopyImageData(aSource)];
        }else{
            phone_book_data.contact_image = [UIImage imageNamed:@"blank_image.png"];
        }

        phone_book_data.isselected=TRUE;
        [list addObject:phone_book_data];
        [phone_book_data release];
        phone_book_data=nil;

    }
}
    CFRelease(allSources);

    [self current_function_name:@"Finished getcontactdetails"];

    return list;
} 
```

现在我在崩溃报告中得到了这个错误。

> 事故标识符：C28DCEAD-5DCD-469B-9349-46F59A92B25E

CrashReporter 密钥：e1b5c8f591e28608a399ebe58d339df84ab3ae52

硬件型号：iPhone3,1

工艺：inoch [163]

路径：/var/mobile/Applications/CB8405B7-8B2A-4226-9134-D99AC5474776/intooch.app/intooch

标识符： inoch

版本： ？？？（？？？）

代码类型：ARM（本机）

父进程：launchd [1]

日期/时间：2012-09-09 22:45:57.023 -0700

操作系统版本：iPhone OS 5.1.1 (9B208)

报告版本：104

异常类型：EXC_BAD_ACCESS (SIGSEGV)

异常代码：0x0000003d 处的 KERN_INVALID_ADDRESS

崩溃的线程：4

线程 0 名称：调度队列：com.apple.main-thread

线程 0：

0 libsystem_kernel.dylib 0x365ef004 0x365ee000 + 4100

1 libsystem_kernel.dylib 0x365ef1fa 0x365ee000 + 4602

2 核心基础 0x369bd3ec 0x36930000 + 578540

3 核心基础 0x369bc0ea 0x36930000 + 573674

4 核心基础 0x3693f49e 0x36930000 + 62622

5 核心基础 0x3693f366 0x36930000 + 62310

6 图形服务 0x34b06432 0x34b02000 + 17458

7 UIKit 0x34be8cce 0x34bb7000 + 203982

8 进入 0x00049648 0x45000 + 17992

9 进入 0x00047138 0x45000 + 8504

线程 1 名称：调度队列：com.apple.libdispatch-manager

线程 1：

0 libsystem_kernel.dylib 0x365ef3a8 0x365ee000 + 5032

1 libdispatch.dylib 0x3741cea4 0x37410000 + 52900

2 libdispatch.dylib 0x3741cbc2 0x37410000 + 52162

线程 2 名称：WebThread

线程 2：

0 libsystem_kernel.dylib 0x365ef004 0x365ee000 + 4100

1 libsystem_kernel.dylib 0x365ef1fa 0x365ee000 + 4602

2 核心基础 0x369bd3ec 0x36930000 + 578540

3 核心基础 0x369bc124 0x36930000 + 573732

4 核心基础 0x3693f49e 0x36930000 + 62622

5 核心基础 0x3693f366 0x36930000 + 62310

6 网络核心 0x31932c9c 0x31889000 + 695452

7 libsystem_c.dylib 0x32f3772e 0x32f29000 + 59182

8 libsystem_c.dylib 0x32f375e8 0x32f29000 + 58856

线程 3：

0 libsystem_kernel.dylib 0x365ffcd4 0x365ee000 + 72916

1 libsystem_c.dylib 0x32f31f36 0x32f29000 + 36662

2 libsystem_c.dylib 0x32f31cc8 0x32f29000 + 36040

线程 4 崩溃：

0 应用支持 0x34937e8a 0x3492e000 + 40586

1 应用支持 0x3493806e 0x3492e000 + 41070

2 地址簿 0x315b8edc 0x315a7000 + 73436

3 个 0x00058618 0x45000 + 79384

4 inoch 0x0004a0b6 0x45000 + 20662

5 基础 0x32591a7a 0x32581000 + 68218

6 基础 0x3262558a 0x32581000 + 673162

7 libsystem_c.dylib 0x32f3772e 0x32f29000 + 59182

8 libsystem_c.dylib 0x32f375e8 0x32f29000 + 58856

线程 5：

0 libsystem_kernel.dylib 0x365ffcd4 0x365ee000 + 72916

1 libsystem_c.dylib 0x32f31f36 0x32f29000 + 36662

2 libsystem_c.dylib 0x32f31cc8 0x32f29000 + 36040

线程 6 名称：com.apple.NSURLConnectionLoader

线程 6：

0 libsystem_kernel.dylib 0x365ef004 0x365ee000 + 4100

1 libsystem_kernel.dylib 0x365ef1fa 0x365ee000 + 4602

2 核心基础 0x369bd3ec 0x36930000 + 578540

3 核心基础 0x369bc124 0x36930000 + 573732

4 核心基础 0x3693f49e 0x36930000 + 62622

5 核心基础 0x3693f366 0x36930000 + 62310

6 基础 0x32591bb2 0x32581000 + 68530

7 基础 0x32591a7a 0x32581000 + 68218

8 基础 0x3262558a 0x32581000 + 673162

9 libsystem_c.dylib 0x32f3772e 0x32f29000 + 59182

10 libsystem_c.dylib 0x32f375e8 0x32f29000 + 58856

线程 7 名称：com.apple.CFSocket.private

线程 7：

0 libsystem_kernel.dylib 0x365ff570 0x365ee000 + 71024

1 核心基础 0x369c163a 0x36930000 + 595514

2 libsystem_c.dylib 0x32f3772e 0x32f29000 + 59182

3 libsystem_c.dylib 0x32f375e8 0x32f29000 + 58856

线程 4 因 ARM 线程状态而崩溃：

```
r0: 0x00000015    r1: 0x00000000      r2: 0x00000002      r3: 0x002ec510

r4: 0x00000000    r5: 0x0000000a      r6: 0x0010a8e8      r7: 0x03f4ac9c

r8: 0x37cfef2f    r9: 0x00000009     r10: 0x002ec510     r11: 0x00000122

ip: 0x3e61d63c    sp: 0x03f4ac88      lr: 0x34938075      pc: 0x34937e8a 
```

cpsr: 0x00000030

我如何修复这个错误？

提前感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:36:12.713

找出问题原因的最佳方法取决于您是否仍在开发并拥有代码，或者这是否是来自 iTunes 的崩溃报告。

虽然这里有关于 ARM 寄存器的详细 Apple 文档[http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/iPhoneOSABIReference/Articles/ARMv6FunctionCallingConventions.html](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/iPhoneOSABIReference/Articles/ARMv6FunctionCallingConventions.html)它并没有真正帮助定位问题。

如果您有代码并且仍在开发中，我建议您需要将 NSLogs 放入代码中和/或进行一些调试。

[如果它是来自 iTunes 的崩溃报告，最好在http://developer.apple.com/library/ios/#technotes/tn2151/_index.html](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)遵循 Apple 关于崩溃报告的指南。

这是Apple描述的主要思想：

> 如果您通过 Xcode 的 Organizer 窗口从设备上获取崩溃日志，那么它们将在几秒钟后自动为您符号化。否则，您将需要通过将 .crash 文件导入到 Xcode Organizer 来自己符号化该文件。打开 Xcode Organizer，选择“Devices”选项卡，选择侧边栏顶部“LIBRARY”下的“Device Logs”，单击“Import”按钮并选择 .crash 文件。

基本上，在这种情况下，您需要做的就是将崩溃报告拖放到 xCode 中，但请确保您拥有 dSym 文件，以便 xCode 可以使用正确版本的应用程序构建来象征化崩溃报告。为此，您需要“构建和归档”每个分布式应用程序版本！ps描述所有细节的视频在会话317中......

# c# - BitArray 线程安全

> ID：12348489
> 
> 赞同：3
> 
> 时间：2012-09-10T09:08:44.873
> 
> 标签：c#, parallel-processing, thread-safety, bitarray

我正在寻找有关并发写入`System.Collections.BitArray`类的线程安全性的信息。

具体来说，考虑以下人为设计的示例：

```
BitArray bits = new BitArray(1000000);

Parallel.For(0, bits.Count, i =>
{
    bits[i] = i % 3 == 0;
}); 
```

**本能告诉我，如果两个线程尝试写入 bitarray 的相同底层整数值**，并发解锁访问会产生不正确的结果，但我找不到任何证据支持它，而且我在运行时没有遇到任何问题。

这是一个安全的操作吗？

如果没有，为什么我没有看到此代码失败或产生不正确的输出？

## 更新

经过进一步的测试，我认为下面的测试证明了`BitArray`在这个例子中使用 a**不是**线程安全的。

`bool[]`另一方面，使用 a似乎是安全的。

```
private static bool CompareBitArrays(BitArray a, BitArray b)
{
    if (a.Count != b.Count) return false;
    for (int i = 0; i < a.Count; i++)
    {
        if (a[i] != b[i]) return false;
    }
    return true;
}

static void Main(string[] args)
{
    int numElements = 1000000;

    //create single-threaded bitarray with certifiably correct values.
    BitArray controlGroup = new BitArray(numElements);
    for (int i = 0; i < numElements; i++)
    {
        controlGroup[i] = i % 3 == 0;
    }

    //create a BitArray and bool array of equal size and fill them using Parallel.For.
    BitArray bits = new BitArray(numElements);
    bool[] bools = new bool[numElements];

    Parallel.For(0, numElements, i =>
    {
        bits[i] = bools[i] = i % 3 == 0;
    });

    //Create a BitArray from the bool array
    BitArray boolBits = new BitArray(bools);

    //Check if they contain correct values
    bool isBitArrayCorrect = CompareBitArrays(controlGroup, bits); //FALSE
    bool isBoolArrayCorrect = CompareBitArrays(controlGroup, boolBits); //TRUE
} 
```

正如我所提到的，我怀疑原因是数组中的 32 个值`BitArray`共享相同的数组整数值。

这个逻辑正确吗？

*为了提问，请假设除了代码中显示的线程之外没有线程正在访问该集合。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:13:01.633

我认为 MSDN 在[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)下的这句话应该告诉你你想知道的一切：

> 此实现不为 BitArray 提供同步（线程安全）包装器。
> 
> **通过集合枚举本质上不是线程安全的过程**。即使一个集合被同步，其他线程仍然可以修改该集合，这会导致枚举器抛出异常。*为了保证枚举过程中的线程安全，您可以在整个枚举过程中锁定集合，也可以*捕获其他线程更改导致的异常。

我把重要的部分加粗了。通过集合的任何枚举都不是线程安全的，因此元素的任何更改也不是线程安全的，您应该锁定整个集合或使用线程安全的集合之一。（虽然我不确定 BitArray 是否存在）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:32:48.027

查看`BitArray.Set`方法代码：

```
public void Set(int index, bool value)
{
    if (index < 0 || index >= this.Length)
    {
        throw new ArgumentOutOfRangeException("index", Environment.GetResourceString("ArgumentOutOfRange_Index"));
    }
    if (value)
    {
        this.m_array[index / 32] |= 1 << index % 32;
    }
    else
    {
        this.m_array[index / 32] &= ~(1 << index % 32);
    }
    this._version++; // this is definitely thread-unsafe
} 
```

至于您通过索引访问集合成员，而不枚举它，我在那里看到的唯一线程不安全的代码行是最后一行`this._version++;`。

但它就在那里，因此，您可以将此代码视为线程不安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-12T00:03:35.597

我编写了一个 ThreadSafeBitArray 类，它比 BitArray 类上的常规锁执行得更好。也许有人会发现它很有用。

```
public class ThreadSafeBitArray
{
    private static int[] _cachedShifts;

    static ThreadSafeBitArray()
    {
        _cachedShifts = new int[32];

        for (int index = 0; index < 32; index++)
        {
            _cachedShifts[index] = ((int)1 << index);
        }
    }

    private int _length;
    private int[] _arr;

    public ThreadSafeBitArray(int length)
    {
        _length = length;
        _arr = new int[ToUnderlineLength(length)];
    }

    private int ToUnderlineLength(int length)
    {
        int underlineLength = length / 32;

        if (length % 32 != 0)
        {
            underlineLength++;
        }

        return underlineLength;
    }

    public int Length
    {
        get { return _length; }
    }

    public bool this[int index]
    {
        get
        {
            return (Interlocked.CompareExchange(ref _arr[index >> 5], 0, 0) & (_cachedShifts[index & 31])) != 0;
        }
        set
        {
            int prevValue;

            if (value)
            {
                do
                {
                    prevValue = Interlocked.CompareExchange(ref _arr[index >> 5], 0, 0);
                }
                while (Interlocked.CompareExchange(ref _arr[index >> 5], prevValue | (_cachedShifts[index & 31]), prevValue) != prevValue);
            }
            else
            {
                do
                {
                    prevValue = Interlocked.CompareExchange(ref _arr[index >> 5], 0, 0);
                }
                while (Interlocked.CompareExchange(ref _arr[index >> 5], prevValue & ~(_cachedShifts[index & 31]), prevValue) != prevValue);
            }
        }
    }
} 
```

# java - 无法使用弹簧数据功能绑定数据

> ID：12348491
> 
> 赞同：1
> 
> 时间：2012-09-10T09:09:00.113
> 
> 标签：java, spring, jsp, spring-mvc, jstl

线程正在继续[将数据发送回控制器-spring-mvc](https://stackoverflow.com/questions/12339013/sending-data-back-to-controller-spring-mvc)

我正在一个产品详细信息页面上工作，我需要向用户显示一些选项，用户将选择其中的几个选项，并且在提交按钮上的产品应该被添加到购物篮中。我的意图是将该数据对象传输到我的购物车控制器，以便我可以使用这些值，并且由于该对象包含动态值，因此无法定义预先确定的字段对象。这是我的数据对象

```
public class PrsData {
    private Map<String, List<PrsCDData>> prsCDData;

    public PrsData(){
        this.prsCDData = MapUtils.lazyMap(new HashMap<String, List<PrsCDData>>(),
        FactoryUtils.instantiateFactory(PrsCDData.class));
    }
} 

public class PrsCDData {
    private Map<String, List<ConfiguredDesignData>> configuredDesignData;
    // same lazy map initialization
} 
```

在我的产品详细信息页面控制器中，我将值设置为：

```
model.addAttribute("prsData", productData.getPrsData()); 
```

在我的产品详细信息页面 JSP 上，我的表单中有这个：

```
<form:form method="post" commandName="prsData" action="${addProductToCartAction}" >
    <form:hidden path="prsCDData[''${prsCDDataMap.key}'']
                    [${status.index}].configuredDesignData['${configuredDesignDataMap.key}']
                    [${configuredDesignDataStatus.index}].code" />
</form:form> 
```

但是当我单击提交按钮时，我收到以下异常

```
org.springframework.beans.InvalidPropertyException: 
    Invalid property 'prsCDData['Forced'][0]' of bean class [com.product.data.PrsData]: 
        Property referenced in indexed property path 'prsCDData['Forced'][0]' 
        is neither an array nor a List nor a Set nor a Map; 
        returned value was [com.product.data.PrsCDData@6164f07e] 
```

我不确定我在哪里做错了，因为在产品详细信息页面上，这些隐藏字段被正确绑定并且甚至分配了值，但是当提交表单时，我遇到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:19:50.210

LazyMap 工厂必须返回一个 LazyList。

给定的工厂**FactoryUtils.instantiateFactory(PrsCDData.class)**创建一个新的**PrsCDData**对象，而不是一个 PrsCDData 列表。

```
prsCDData['Forced'] -> if exists then return it else create instance of PrsCDData.class 
```

应该

```
prsCDData['Forced'] -> if exists then return it else create instance of LazyList<PrsCDData> 
```

使用 LazyList 因为您立即想要访问索引“0”，否则会导致 ArrayIndexOutOfBoundsExecption

编辑：简单的例子

```
public class Test {

@SuppressWarnings("unchecked")
public static void main(String[] args) throws UnsupportedEncodingException {

    Map<String, List<SimpleBean>> map = MapUtils.lazyMap(new HashMap<String,List<Object>>(),new Factory() {

        public Object create() {
            return LazyList.decorate(new ArrayList<SimpleBean>(), FactoryUtils.instantiateFactory(SimpleBean.class));
        }
    });

    System.out.println(map.get("test").get(0));
}

public static class SimpleBean {
    private String name;
}

} 
```

# c# - Bootstrap/KnockoutJS：img 标签不尊重其高度属性

> ID：12348495
> 
> 赞同：1
> 
> 时间：2012-09-10T09:09:16.713
> 
> 标签：c#, asp.net-mvc, twitter-bootstrap, knockout.js

我在 ASP.NET MVC4 中使用 KnockoutJS 和 Bootstrap 来显示图像缩略图。正如人们所期望的那样，我遇到的问题是图像尺寸不同。因此，设置`span3`元素`li`处理宽度问题，但是所有拇指的高度不相等，所以我尝试在`img`标签上设置它..但是，这不起作用，当我删除 span3`li`并添加宽度时到`img`标签，然后我看到宽度也没有得到尊重。这是非常奇怪的行为。有没有人有任何想法？

这是我的标记：

```
<ul class="thumbnails" data-bind="foreach: images">
                <li class="span3">
                    <div class="thumbnail">
                        <img data-bind="attr: { src: thumbnailUrl, alt: caption }" height="130px" />
                        <p data-bind="html: caption"></p>
                    </div>
                </li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:14:55.377

CSS`height`覆盖 HTML`height`属性。如果你想要一个固定的高度，`img`试试这个 CSS：

```
.your-img-selector {
    height: 130px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:54:00.087

height 属性只接受以像素或百分比为单位的整数。将其更改为`height="130"`或更好地使用 CSS。

# python - 如何对使用 gevent 的 wsgi 代码进行单元测试？

> ID：12348500
> 
> 赞同：1
> 
> 时间：2012-09-10T09:09:34.573
> 
> 标签：python, wsgi, gevent

我想用 gevent 的 WSGI 服务器测试我的 WSGI 库，以确保请求参数不会被来自另一个请求/greenlet 的参数泄漏/覆盖 - 在我的库`request`中是“全局的”，尽管它*应该*是线程安全的......这就是我想用 gevent 测试的。

我可以使用哪些方法？是否有任何已经具有单元测试的开源项目可以实现这一点，我可以从中学习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:32:12.473

如果您的库使用 threading.local 来提供线程隔离的“全局”请求变量，那么您只需在使用 threading.local 之前调用 gevent.monkey.patch_thread。这应该将所有 threading.local 对象变成“greenlet.local”对象。

# jquery - MVC2 EditorFor - 使用 jQuery 添加条目

> ID：12348503
> 
> 赞同：2
> 
> 时间：2012-09-10T09:09:46.343
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-2, editorfor

我有一个注册 IEnumerable 的模型。在我的页面上，您有机会通过 jQuery 添加或删除注册。我尝试使用部分视图进行新注册，但我的表单只发送了第一个条目。所以我读过使用`Html.EditorFor`. 但现在我找不到如何使用 jQuery 动态添加新条目。

你对我有什么暗示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:10:55.440

我建议您阅读[以下文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)，该文章说明了如何实现这一目标的分步指南。它使用一个自定义`BeginCollectionItem`帮助器，允许为每一行的输入字段生成正确的名称，以便在提交表单时正确绑定值。标准助手对集合使用整数索引，这在客户端上添加/删除行时会出现问题=>您将不得不重新同步这些索引。另一方面，本文中说明的方法使用 Guid 作为键。

# node.js - IDE cloud9 中的 HTTP 身份验证

> ID：12348507
> 
> 赞同：2
> 
> 时间：2012-09-10T09:10:13.333
> 
> 标签：node.js, ide, cloud9-ide

有谁知道如何设置 cloud9 IDE 的身份验证。我想要进行身份验证，以便源代码不会公开访问，并且应该在可以接触源代码之前登录。

PS 我已经拥有 cloud9 自己的网络，并且运行良好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T09:17:28.300

最简单的方法是插入 cloud9 中的 connect 插件并添加 connect auth 中间件以在那里进行基本身份验证。据我所知，没有可用的公共扩展可以为您执行此操作，但一些开发人员已将其添加到他们自己的项目中。

**编辑**如今 Cloud9 带有内置的基本身份验证（在提交[cf98892](https://github.com/ajaxorg/cloud9/commit/cf98892a8979709aa18f1b18df333bb827b783bf#README.md)中）

# cordova - 在移动应用程序中存储静态数据的最佳方式是什么？

> ID：12348517
> 
> 赞同：1
> 
> 时间：2012-09-10T09:10:59.037
> 
> 标签：cordova, jquery-mobile

我想使用 jQuery Mobile 构建一个移动应用程序。

该应用程序应该有一个附有图像的饮料食谱列表（1500 件）。

存储食谱和图像的最佳方式是什么？

我在想，recipies 应该被结构化并存储在一个大的 XML 文件中，并且图像应该在一个文件夹中。

计划使用 PhoneGap 将应用程序作为本机发布。

该应用程序应该能够离线工作。

对我的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:16:44.603

如果可能，请尝试设置 Web 服务并使用例如。JSONP 技术尝试下载数据。存储在文件夹中不会让您更新您的内容，这对于添加新配方或更改现有配方可能很有用。图像可以存储在文件夹中，并在 ajax 成功时由 javascript 访问。

将已经下载的食谱存储在 SQLite 数据库中是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:17:31.730

为此，我正在使用[BackboneJS 。](http://backbonejs.org/)我在这里推荐 Backbone，因为从一开始就使用它会让您更容易迁移到原生移动应用程序。

使用 Backbone，您可以定义一个模型：

```
window.RecipeModel = Backbone.Model.extend({}); 
```

然后定义一个食谱集合：

```
window.RecipeCollection = Backbone.Collection.extend({ model: RecipeModel }); 
```

最后，您可以发送您的食谱的 JSON 表示并用它初始化 RecipeCollection：

```
var recipesJSON = // Get JSON from server OR local HTML tag (explained below)
window.recipeCollection = new RecipeCollection(recipesJSON); 
```

编辑：

您还可以将 JSON 存储在 HTML 中，而不是使用 HTML 中的以下标记从服务器获取它：

```
<script id="recipes_data" type="application/json">{[ {name: "recipe1", type: "some_recipe_type", image_url: "recipe1_image.png"}, {name: "recipe2", type: "some_other_recipe_type", image_url: "recipe2_image.png"}...]}</script> 
```

然后你可以阅读它：

```
var data = JSON.parse($("#recipes_data").html()); 
```

至于图片位置：您可以将它们放在一个单独的文件夹中，并从您的 css 文件中相对引用它们。一旦你进入 phonegap，这些相对路径将被转换为本地文件，这样你的应用程序就可以离线工作。

# python - Python 字面量的安全阅读

> ID：12348519
> 
> 赞同：1
> 
> 时间：2012-09-10T09:11:07.287
> 
> 标签：python, serialization

简而言之，我想知道是否有某种安全的 Python 序列化程序，例如 JSON 用于 Javascript。我知道 Python 有一个 JSON 模块，但我想要一些更特定于 python 的东西，具有读取元组和可能集合的能力，如下所示：

```
 [ (3,7), (8,15), (17,21) ] 
```

无需求助于“评估”功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:20:51.430

你可能想看看`ast.literal_eval`你是否使用 2.6+

```
from ast import literal_eval

s = "[ (3,7), (8,15), (17,21) ]"
t = literal_eval(s)
# [(3, 7), (8, 15), (17, 21)]

type(t)
<type 'list'>
type(t[0])
<type 'tuple'> 
```

或者，或者查看[http://pyparsing.wikispaces.com/Examples](http://pyparsing.wikispaces.com/Examples)`pyparsing`上的 parsePythonValue.py 示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:22:46.200

[使用泡菜模块](http://docs.python.org/library/pickle.html)。从文档中引用：

> 警告 pickle 模块并非旨在防止错误或恶意构造的数据。永远不要取消从不受信任或未经身份验证的来源收到的数据。

[本文](http://nadiana.com/python-pickle-insecure)非常适合在 unpickling（从序列化数据中读取）时实现一些安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:28:06.960

如果您希望将数据序列化为二进制格式，则可以使用 pickle。如果您希望将数据序列化为文本格式，那么答案是否定的。

如果唯一缺少的区别是列表和元组（可能还有集合），那么最好的选择可能是使用自定义 json 编码器/解码器。有关一些示例，请参见[http://docs.python.org/library/json.html](http://docs.python.org/library/json.html)。

# python - web开发中使用python的正确方法

> ID：12348522
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:11:12.170
> 
> 标签：python, server-side

使用服务器端语言创建网站的正确方法是什么？我是否必须在 python 中编写每个网页（打印“”等），或者我应该在我想访问数据库时使用服务器端，例如，而不是通过 javascript 格式化输出？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:28:45.480

在选择服务器端的操作时，至少要考虑两件事：

**1\. 安全性：**您发送到客户端的任何内容都可以作为纯文本（也包括 javascript）被接收者访问。仅在您确定客户身份（即登录）后才发送数据。因此，任何安全敏感的事情都应该发生在服务器端。

**2\. 处理时间与网络负载：**如果很多用户对一个数据集进行大量不同的计算（即排序、汇总、小计等），则可以通过发送原始数据来卸载服务器 CPU（授予 pt . 1 被照顾），并让每个客户处理计算。另一方面，这可能会导致大量用户请求过多的数据，从而降低网络性能。

结果：如果不确定，尽可能在服务器端做。如果不确定，则问题无效:-)

至于您问题的另一部分，关于如何生成 HTML：考虑使用像[Django](https://www.djangoproject.com/)这样的网络框架。这将为您提供一个抽象层，它会产生很多功能。行代码。当然，这种方式很多事情都发生在“幕后”，这使您无法直接控制，但通常利大于弊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:16:56.190

有几种方法可以将 Python 用作 Web 语言。您可以通过 cgi 接口使用它，也可以使用更复杂的框架（如 Django）来完成它。

这个决定没有对错之分——如果它足以解决你的问题，只是一个衡量标准。

如果您是该主题的新手，我会敦促您看一下 Django - 因为它可能会在一定程度上指导您不仅解决您的问题，而且做得优雅。

# android - .wav 文件的输出不是 16000khz 16 位采样率

> ID：12348527
> 
> 赞同：0
> 
> 时间：2012-09-10T09:11:27.710
> 
> 标签：android, wav, audiorecord, android-mediarecorder, sphinx4

> **可能重复：**
> [如何以 16khz 16 位单声道小端格式转换或录制 .wav 文件？](https://stackoverflow.com/questions/12260476/how-to-convert-or-record-wav-file-in-16khz-16bit-mono-little-endian)

我曾尝试使用以下代码在 android 设备中录制声音。我可以成功录制，但文件质量不好......基本上我想要 16000khz 16 位单声道小端格式的 .wave 文件..请告诉我我在哪里做错了..我为此使用了 google.code androidrecorder2 源

```
package com.varma.samples.audiorecorder;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.Button;

public class RecorderActivity extends Activity {
    private static final int RECORDER_BPP = 16;
    private static final String AUDIO_RECORDER_FILE_EXT_WAV = ".wav";
    private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
    private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
    private static final int RECORDER_SAMPLERATE = 16000;
    private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_CONFIGURATION_MONO;
    private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

    private AudioRecord recorder = null;
    private int bufferSize = 0;
    private Thread recordingThread = null;
    private boolean isRecording = false;

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setButtonHandlers();
        enableButtons(false);

        bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING);
    }

    private void setButtonHandlers() {
        ((Button)findViewById(R.id.btnStart)).setOnClickListener(btnClick);
        ((Button)findViewById(R.id.btnStop)).setOnClickListener(btnClick);
    }

    private void enableButton(int id,boolean isEnable){
        ((Button)findViewById(id)).setEnabled(isEnable);
    }

    private void enableButtons(boolean isRecording) {
        enableButton(R.id.btnStart,!isRecording);
        enableButton(R.id.btnStop,isRecording);
    }

    private String getFilename(){
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath,AUDIO_RECORDER_FOLDER);

        if(!file.exists()){
            file.mkdirs();
        }

        return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + AUDIO_RECORDER_FILE_EXT_WAV);
    }

    private String getTempFilename(){
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath,AUDIO_RECORDER_FOLDER);

        if(!file.exists()){
            file.mkdirs();
        }

        File tempFile = new File(filepath,AUDIO_RECORDER_TEMP_FILE);

        if(tempFile.exists())
            tempFile.delete();

        return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_TEMP_FILE);
    }

    @SuppressLint({ "NewApi", "NewApi" })
    private void startRecording(){
        recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
                        RECORDER_SAMPLERATE, RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING, bufferSize);

        recorder.startRecording();

        isRecording = true;

        recordingThread = new Thread(new Runnable() {

            @Override
            public void run() {
                writeAudioDataToFile();
            }
        },"AudioRecorder Thread");

        recordingThread.start();
    }

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    private void writeAudioDataToFile(){
        byte data[] = new byte[bufferSize];
        String filename = getTempFilename();
        FileOutputStream os = null;

        try {
            os = new FileOutputStream(filename);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        int read = 0;

        if(null != os){
            while(isRecording){
                read = recorder.read(data, 0, bufferSize);

                if(AudioRecord.ERROR_INVALID_OPERATION != read){
                    try {
                        os.write(data);
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }

            try {
                os.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    @SuppressLint({ "NewApi", "NewApi" })
    private void stopRecording(){
        if(null != recorder){
            isRecording = false;

            recorder.stop();
            recorder.release();

            recorder = null;
            recordingThread = null;
        }

        copyWaveFile(getTempFilename(),getFilename());
        deleteTempFile();
    }

    private void deleteTempFile() {
        File file = new File(getTempFilename());

        file.delete();
    }

    private void copyWaveFile(String inFilename,String outFilename){
        FileInputStream in = null;
        FileOutputStream out = null;
        long totalAudioLen = 0;
        long totalDataLen = totalAudioLen + 36;
        long longSampleRate = RECORDER_SAMPLERATE;
        int channels = 2;
        long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels/8;

        byte[] data = new byte[bufferSize];

        try {
            in = new FileInputStream(inFilename);
            out = new FileOutputStream(outFilename);
            totalAudioLen = in.getChannel().size();
            totalDataLen = totalAudioLen + 36;

            AppLog.logString("File size: " + totalDataLen);

            WriteWaveFileHeader(out, totalAudioLen, totalDataLen,
                    longSampleRate, channels, byteRate);

            while(in.read(data) != -1){
                out.write(data);
            }

            in.close();
            out.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void WriteWaveFileHeader(
            FileOutputStream out, long totalAudioLen,
            long totalDataLen, long longSampleRate, int channels,
            long byteRate) throws IOException {

        byte[] header = new byte[44];

        header[0] = 'R';  // RIFF/WAVE header
        header[1] = 'I';
        header[2] = 'F';
        header[3] = 'F';
        header[4] = (byte) (totalDataLen & 0xff);
        header[5] = (byte) ((totalDataLen >> 8) & 0xff);
        header[6] = (byte) ((totalDataLen >> 16) & 0xff);
        header[7] = (byte) ((totalDataLen >> 24) & 0xff);
        header[8] = 'W';
        header[9] = 'A';
        header[10] = 'V';
        header[11] = 'E';
        header[12] = 'f';  // 'fmt ' chunk
        header[13] = 'm';
        header[14] = 't';
        header[15] = ' ';
        header[16] = 16;  // 4 bytes: size of 'fmt ' chunk
        header[17] = 0;
        header[18] = 0;
        header[19] = 0;
        header[20] = 1;  // format = 1
        header[21] = 0;
        header[22] = (byte) channels;
        header[23] = 0;
        header[24] = (byte) (longSampleRate & 0xff);
        header[25] = (byte) ((longSampleRate >> 8) & 0xff);
        header[26] = (byte) ((longSampleRate >> 16) & 0xff);
        header[27] = (byte) ((longSampleRate >> 24) & 0xff);
        header[28] = (byte) (byteRate & 0xff);
        header[29] = (byte) ((byteRate >> 8) & 0xff);
        header[30] = (byte) ((byteRate >> 16) & 0xff);
        header[31] = (byte) ((byteRate >> 24) & 0xff);
        header[32] = (byte) (2 * 16 / 8);  // block align
        header[33] = 0;
        header[34] = RECORDER_BPP;  // bits per sample
        header[35] = 0;
        header[36] = 'd';
        header[37] = 'a';
        header[38] = 't';
        header[39] = 'a';
        header[40] = (byte) (totalAudioLen & 0xff);
        header[41] = (byte) ((totalAudioLen >> 8) & 0xff);
        header[42] = (byte) ((totalAudioLen >> 16) & 0xff);
        header[43] = (byte) ((totalAudioLen >> 24) & 0xff);

        out.write(header, 0, 44);
    }

    private View.OnClickListener btnClick = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            switch(v.getId()){
                case R.id.btnStart:{
                    AppLog.logString("Start Recording");

                    enableButtons(true);
                    startRecording();

                    break;
                }
                case R.id.btnStop:{
                    AppLog.logString("Start Recording");

                    enableButtons(false);
                    stopRecording();

                    break;
                }
            }
        }
    }; 
} 
```

wav 文件的输出在此链接上..

[http://www.filefactory.com/file/20ibb9itlal1/n/1347267058768.wav](http://www.filefactory.com/file/20ibb9itlal1/n/1347267058768.wav)

我刚刚发现一个问题是输出文件仍然是立体声 foramt.i 有一个适用于 windows7 的 wav 转换器软件，当我添加我的输出文件时，它向我显示 foramt 是立体声 ...我从来没有给过选项的 channel_configuration_stereo 还是为什么？

请指导我。我已经有一个星期试图解决了。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:44:28.840

在您的 copyWaveFile 函数中，您设置`channels = 2;`

这被写入`WriteWaveFileHeader()`.

在播放 .WAV 文件时，我发现有两件事很有用：

*   用于查看标题的十六进制编辑器，
*   [这个页面](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)描述了它应该是什么样子。

# css - 本地存储的谷歌网络字体与在线源

> ID：12348529
> 
> 赞同：7
> 
> 时间：2012-09-10T09:11:35.493
> 
> 标签：css, fonts, import, font-face, google-webfonts

当我在我的 CSS 文件中使用 @import 规则添加谷歌网络字体时，它工作正常。

但是当我下载该字体并将其本地存储在我的服务器中，然后将@font-face 规则定向到我自己的机器时，它不起作用。

所以我所做的是在我的 css/fonts.css 文件中替换这一行：

```
@import url(http://fonts.googleapis.com/css?family=Michroma); 
```

有了这个：

```
@font-face {
font-family: 'Michroma';
font-style: normal;
font-weight: 400;
src: url(http://localhost/xampp/mysite/css/fonts/michroma/micrhoma.woff) format('woff');
} 
```

换句话说，我只是从 googleapi 中复制了该字体的代码。我将字体文件（.woff）保存在上面的路径中（我已经重新检查过，确实存在）。

我也尝试将网址编辑为此，但不好：

```
src: url(fonts/michroma/michroma.woff) format('woff'); 
```

如果我们在本地使用 Google 网络字体，我无法相信有任何理由无法使用它们，所以我所做的一定有问题。线索？这不就是我们如何定义自己的字体吗？（我以前从未尝试过）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:24:13.603

如评论中所述，问题的原因是 URL 中字体名称的拼写错误。

这是一种在本地使用 Google 字体的方法。正确的方法是使用相对 URL，例如 fonts/michroma/michroma.woff，而不是 http: 带有 localhost 的 URL（它们需要您在计算机上运行 HTTP 服务器）。

但是，它不适用于不支持 WOFF 格式的浏览器（在这种情况下）。一般来说，使用谷歌字体作为远程托管更好，因为他们知道如何为不同的浏览器提供不同的字体格式。参照。我[应该在本地存储由 Google Web Fonts API 生成的 CSS 吗？](https://stackoverflow.com/questions/9350876/should-i-locally-store-css-generated-by-the-google-web-fonts-api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:58:25.560

在单一字体中，不需要字体系列名称的引号。你应该删除并运行它会正常工作。字体系列：Michroma；

# java - 有没有一种快速的方法来找到异常的 catch 子句？

> ID：12348530
> 
> 赞同：0
> 
> 时间：2012-09-10T09:11:36.080
> 
> 标签：java, exception, exception-handling

例如，调用层次结构是methodA->methodB->methodC->methodD。

在methodD中，抛出一个检查异常。在methodB中，异常被捕获。

所以我的问题是，当我阅读代码并看到抛出异常时。有没有一种快速的方法可以找到捕获异常的代码？

顺便说一句，上下文是我正在重新构建应用程序中的所有异常。所以我在想如何获得更高的效率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:11:13.943

如果我对您的理解正确，那么您正在某处捕获并记录异常，并且您想（在日志中）查看哪个类/方法引发了异常。这里有一些想法：

1.  修改记录异常的代码以显式包含捕获异常的方法的名称。
2.  修改您的记录器，使其捕获并报告记录异常的代码的上下文（调用类和文件/行号）。调用堆栈可用于此目的。

选项 #2 更复杂，但对于更大的代码库来说肯定更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:15:21.013

您需要查看 IDE 中的调用层次结构，然后从方法 D 退回到顶部以查找捕获异常的位置。

或者，您可以在调试器中抛出异常的位置设置断点并跳到下一行。;)

或者您可以打印堆栈跟踪并选择 IDE 中的每一行以查看堆栈跟踪引用的代码，看看它是否会捕获您的异常。

# c++ - C++ 和双重检查锁定的风险：解决方法？

> ID：12348534
> 
> 赞同：1
> 
> 时间：2012-09-10T09:11:53.123
> 
> 标签：c++, c++03, double-checked-locking

我正在阅读一篇关于“Scott Meyers 的双重检查锁定的风险”的论文。[http://www.aristeia.com/Papers/DDJ_Jul_Aug_2004_revised.pdf](http://www.aristeia.com/Papers/DDJ_Jul_Aug_2004_revised.pdf)

作者给出了双重检查锁失败的原因（第3页，第4节）。我在想办法在不使用 C++11 的情况下解决这个问题。并不是我不想使用 C++ 11，只是想看看是否可以在不使用 std::call_once 等函数的情况下解决它

```
class Singleton {
public:
    static Singleton* instance();

private:
    static Singleton* pInstance;
    int someData_;
};

Singleton* Singleton::instance() 
{
    class SeqAssign{
    public:
        SeqAssign(Singleton*& pInst, Singleton* pNew):
        pInstance(pInst), pNewedInst(pNew){
        }
        ~SeqAssign(){
            pInstance = pNewedInst;
        }

    private:
        Singleton*& pInstance;
        Singleton*  pNewedInst;
    };

    if (pInstance == 0) { // 1st test
        Lock lock;
        if (pInstance == 0) { // 2nd test
            SeqAssign seq(pInstance, new Singleton);
        }
    }
    return pInstance;
} 
```

Singleton::instance() 中的代码是否会在多线程环境中工作，因为为 SeqAssign 类调用构造函数和析构函数的顺序是确定性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:20:30.540

不可以。该变量`pInstance`是从多个线程访问的。它被修改。代码具有未定义的行为。而且我不确定你`SeqAssign`会做什么，因为它没有引入任何额外的线程间排序。

没有办法在标准 C++ 中进行双重检查日志记录；所有解决方案都涉及原子变量（可能使用内联汇编器实现）或线程本地存储。

# css - 在 Firefox 中强制 CSS @media 查询

> ID：12348540
> 
> 赞同：0
> 
> 时间：2012-09-10T09:12:06.667
> 
> 标签：css, firefox, responsive-design

我正在使用**Twitter Bootstrap**构建一个移动网站，并且想知道。

有没有办法强制 Firefox（或其他浏览器，我不介意）使用特定`@media query`的移动设备，而不必将浏览器实际重新调整为例如 320x480px？

基本上，我希望浏览器的最大宽度为 320 像素，但要使其完全最大化（以便更容易使用 Firebug 等）。

我已经尝试寻找附加组件，但找不到任何东西。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:16:08.393

`<iframe height="480" width="320" src="mobilepage.html"></iframe>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:31:17.367

如果您使用的是 Firefox 15（应该是，因为这是受支持的版本），请参阅[http://www.webmonkey.com/2012/06/new-firefox-developer-tools-will-help-you-build -响应式网站/](http://www.webmonkey.com/2012/06/new-firefox-developer-tools-will-help-you-build-responsive-websites/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:56:16.200

您可以使用 chrome 开发人员工具来模拟设备的大小：

![chrome 开发者工具设备指标模拟](../Images/2baa15aae43877600c4c6c10e6b5eb06.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T09:18:09.887

我使用**Adob​​e 阴影**。这是一个很好的工具。

看看这里： http: [//labs.adobe.com/downloads/shadow.html](http://labs.adobe.com/downloads/shadow.html)

# java - @EJBs 注解有什么作用？

> ID：12348542
> 
> 赞同：41
> 
> 时间：2012-09-10T09:12:09.080
> 
> 标签：java, jakarta-ee, ejb

我大致知道这个构造的作用：它创建了一个 SomeType EJB 并将对象注入另一个 EJB。

```
 @EJB(name="name1")
 SomeType someVariable 
```

现在我有一个这样开始的类：（我给出了所有类级别的注释，即使我认为只有`@EJBs`相关）

```
@Remote(SomeClass.class)
@Stateless(name="someName")
@EJBs({@EJB(name="name1",beanInterface=Type1.class),
       @EJB(name="name2",beanInterface=Type2.class)})
@TransactionAttribute(TransactionAttributeType.REQUIRED)
@TransactionManagement(TransactionManagementType.CONTAINER)
public class X extends Y{ 
  //code 
```

s在这里做什么`@EJB`？他们可能从 JNDI 获取或创建“name1”...对象，但他们将结果放在哪里？我没有`.lookup`在附近看到任何电话，但代码库很大，所以我对此不太确定。

额外的问题：我认为这两个`@Transaction`注释只是重复默认值？

*更新：*此时多人声称这`@EJBs`是一个专有扩展。它不是。它是 java EE5 的核心部分。有关详细信息，请参阅[JavaDoc。](http://docs.oracle.com/javaee/5/api/javax/ejb/EJBs.html). 它只是单个`@EJB`注释的容器。

我相信声称这些 EJB 注释的每个人都会进行查找。我只想知道这个查找的结果会发生什么。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-12T14:09:52.727

`@EJB`注释（和`@Resource`,等）有`@WebServiceRef`两个目的：

1.  它在组件命名空间中声明一个引用。例如，`@EJB(name="myEJB")`创建一个引用`java:comp/env/myEJB`。如果您对字段进行注释但未指定名称，则它会创建一个引用`java:comp/env/com.example.MyClass/myField`。
2.  如果在字段或 setter 方法上声明了注解，则容器在创建组件时执行注入。

解析引用的方式各不相同，与解析引用是针对`lookup("java:comp/env/myEJB")`注入还是由于注入无关：

1.  如果使用 EE 6+，则该`lookup`属性需要 JNDI 查找来解析目标。
2.  一些应用程序服务器支持`mappedName`，这被指定为特定于供应商。这通常通过执行查找来实现。
3.  应用程序服务器在部署时支持绑定。这通常通过执行查找来实现。
4.  如果没有提供其他绑定信息并且 bean 接口（`beanInterface`或字段类型）仅由应用程序中的单个 EJB 实现，那么 EJB 规范要求它回退到那个。
5.  如果没有提供其他绑定信息并且#4 无法工作，一些应用程序服务器将尝试根据 ref 名称在服务器命名空间中执行查找（例如，`java:comp/env/myEJB`可能会导致`myEJB`在服务器命名空间中查找）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:38:48.703

根据此[链接](http://www.coderanch.com/t/545547/EJB-JEE/java/EJBs-annotation)，基本上此注释使 EJB 能够相对于其上下文查找外部 EJB。通常，有更优雅的方法可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T07:51:32.113

Miljen Mikic 的回答让我对可能的答案有所了解。如果任何了解 JNDI 的人读到这篇文章，请告诉我这是否理智，因为我基本上在这里猜测。

基本上，有两种方法可以查看 JNDI 树：通过全局路径 (/some/proprietary/path/my/bean) 和通过程序的环境 (java:comp/env/my/bean)。这个想法是您创建从全局路径到本地环境的引用，然后从那里查找组件。

所以@Ejb(name="java:comp/env/my/bean",mappedName="/some/proprietary/path/my/bean") 将从java代码创建这个引用（没有描述符xml文件）。

这意味着 @Ejb(name="java:comp/env/my/bean") 本身就是无操作的：它将引用复制到自身上。它可能具有副作用，即您的应用程序服务器现在在编译时知道此引用是必需的，但仅此而已。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-27T02:28:40.740

至于额外的问题：是的，关于事务的两个注释是重复默认值：默认 TransactionManagementType 是 CONTAINER (vs BEAN)，并且 - default - TransactionAttributeType REQUIRED 只是说明如果在事务上下文中调用 bean，则事务将继续，否则将启动一个新事务（而不是像 REQUIRES_NEW 那样总是创建一个新的 tx）。这实际上并不像听起来那么简单。EJB 3.1 规范：

"13.3.7 Bean 方法的事务属性规范

具有容器管理事务划分的企业 bean 的 Bean 提供者可以为企业 bean 的方法指定事务属性。默认情况下，具有容器管理事务分界的 bean 的方法的事务属性值是 REQUIRED 事务属性，在这种情况下不需要显式指定事务属性。[...]"

# sql-server - SSIS 脚本任务编辑器中的西里尔字符

> ID：12348548
> 
> 赞同：0
> 
> 时间：2012-09-10T09:12:16.500
> 
> 标签：sql-server, visual-studio, encoding, ssis

我在 SQL Server 集成服务脚本任务中编写了一些代码。我在该代码中使用了一些西里尔字符。它们在第一次编辑期间正常显示，但在关闭脚本任务编辑器、保存 SSIS 项目并再次打开编辑器后它们变得损坏。当我再次打开编辑器时，它们被一些垃圾字符取代。如果我不打开编辑器，我的代码可以正常工作并且西里尔字符串常量可以正确处理。我找不到任何允许在代码中使用西里尔字符串的项目或编辑器属性。是否有这样的设置，或者我应该编写一次代码并且不再打开编辑器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:13:00.170

最后我找到了解决方案：我在脚本任务编辑器菜单中打开了工具|选项，并在文本编辑器|常规中选中了“自动检测不带签名的 UTF-8 编码”复选框。之后，我在脚本任务编辑器中打开了项目属性并编辑了应用程序|程序集信息。我将中性语言组合框值更改为俄语。现在我可以保存脚本和包并且西里尔字符保持安全。

# symfony - 有没有更聪明的方法来禁用 Symfony2.1 中的 Doctrine2 过滤器？

> ID：12348549
> 
> 赞同：7
> 
> 时间：2012-09-10T09:12:16.663
> 
> 标签：symfony, doctrine-orm, symfony-forms, symfony-2.1

我正在使用[Gedmo Doctrine Extensions](https://github.com/l3pp4rd/DoctrineExtensions)，例如 SoftDeletable，并且在不同的时候我需要禁用此过滤器，以便用户可以与软删除实体或实体的软删除关系进行交互。

这包括但不限于一次在控制器中，然后再次在 SonataAdmin 的特定区域中。

到目前为止，我找到的解决方案是在 em 上调用 getFilters() 并禁用 softdeleteable，这很好。

然而，奏鸣曲管理类和控制器似乎都经历了多次执行，这会导致致命的尝试禁用已经禁用的过滤器，所以我必须这样做：

```
 if (array_key_exists('softdeleteable', $this->em->getFilters()->getEnabledFilters())) {
        $this->em->getFilters()->disable('softdeleteable');
    } 
```

至少可以这么说，这本身似乎很老套。

但是，还有其他问题，例如命令的范围。我还没有发现任何前端问题，但是在管理员中，多次执行，其中之一是构建导航（我认为）意味着过滤器始终处于禁用状态，并且只能直接在 em 上执行此操作在我看来，只要我不希望在后端某处禁用该功能，它就会导致大量问题。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T22:06:11.043

虽然在撰写本文时，答案是否定的，但现在已经添加了基于每个实体禁用过滤器的功能，如下所示：

```
// Enable / Disable filter filter, for specified entity (default is enabled for all)
$filter = $em->getFilters()->enable('soft-deleteable');
$filter->disableForEntity('Entity\Article');
$filter->enableForEntity('Entity\Article'); 
```

文档：[https ://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md)

# c# - 如何打开 Path 并标记文件而不是打开它？

> ID：12348551
> 
> 赞同：0
> 
> 时间：2012-09-10T09:12:19.097
> 
> 标签：c#, file, path

> **可能重复：**
> [打开文件夹并选择文件](https://stackoverflow.com/questions/334630/open-folder-and-select-the-file)

我有一个文件的路径。

我想打开它的目录并通过单击他在目录中标记他。

我试过这个：

```
System.Diagnostics.Process.Start(path); 
```

和这个：

```
System.Diagnostics.Process.Start(new FileInfo(Path).Directory.FullName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:18:48.543

怎么样

Process.Start("explorer.exe", @"c:\file.name");

# qt - 读取一个 file.img，一个 3D 二进制卷

> ID：12348552
> 
> 赞同：0
> 
> 时间：2012-09-10T09:12:24.213
> 
> 标签：qt, binary, image, vtk

我有一个 file.img，它是一个 3D 二进制文件。

我已经搜索过，但找不到在 vtk 中渲染它的方法，或者在 qt 上打开它，这样我就可以在 vtk 中使用它了。

我遇到了这个页面， http: [//forum.codecall.net/topic/51524-reading-and-writing-files-in-c/](http://forum.codecall.net/topic/51524-reading-and-writing-files-in-c/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:18:25.787

据此，可以将 .img 文件转换为 .vtk

> “第二个和第三个数据集可以从 BrainWeb (http://www.bic.mni.mcgill.ca/brainweb/) 下载，用于研究是免费的。“test.vtk”是从“brainweb”转换而来的.img”使用 Erik Vidholm 的程序 (http://www.cb.uu.se/~erik/vtk/rawToVTK.cpp)。”

[资源](http://www.vtk.org/Wiki/VTK/Examples/Cxx/Modelling/ExtractLargestIsosurface)

# java - Java密码套件

> ID：12348563
> 
> 赞同：2
> 
> 时间：2012-09-10T09:13:16.143
> 
> 标签：java, ssl, encryption

我编写了一个代码来生成服务器的密码套件。我得到了表单的输出`TLS_RSA_WITH_AES_128_CBC_SHA`。

是否有一个 API 可以为我提供解析形式的密码套件，例如输出形式。不对称算法使用 RSA，对称算法使用 AES，密钥大小=128，哈希算法是 SHA?。我本可以编写一个解析器来解析输出，但输出并不总是遵循相同的格式，就像有时缺少密钥大小一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:37:54.510

不幸的是，Java 密码套件命名模式遵循 TLS 规范命名模式，这并没有提供从名称中提取此信息的简单方法。例如，即使[TLS 1.1 附录 C](https://www.rfc-editor.org/rfc/rfc4346#appendix-C)中的表格也没有指明密钥大小`AES_128_CBC`（它在[TLS 1.2 规范](https://www.rfc-editor.org/rfc/rfc5246#appendix-C)的表格中）。此信息来自[AES 密码套件规范](https://www.rfc-editor.org/rfc/rfc3268)。

提取这些细节通常是半手动完成的。请参阅 Apache Tomcat [`JSSESupport`](http://geronimo.apache.org/maven/external/catalina/6.0.20.0/catalina/xref/org/apache/tomcat/util/net/jsse/JSSESupport.html)（例如`getKeySize`）和[`SSLSupport`](http://geronimo.apache.org/maven/external/catalina/6.0.20.0/catalina/xref/org/apache/tomcat/util/net/SSLSupport.html).

# memory-management - ARM 内存重映射

> ID：12348564
> 
> 赞同：3
> 
> 时间：2012-09-10T09:13:16.787
> 
> 标签：memory-management, linux-kernel, arm, embedded-linux, mmu

ARM 页表条目具有 TEX 重映射位。我已经读过类似 TEX remap 的内容与页表条目的 AP 位一起用于访问保护。

1.  有人帮我澄清一下这些位是什么以及它们的含义

2.  它与内存重新映射有关吗？

    一个。如果是这样，它与普通内存重映射寄存器和主内存重映射寄存器有什么关系。

3.  linux内核是否正在使用这些。

    一个。如果是这样，linux内核以哪种方式使用这些。请给我一些用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:43:20.737

简而言之，页表中的 TEX 位是类型扩展位。它们可用于控制细粒度级别的页面缓存，但通常用作硬件忽略的纯软件上下文。

看：

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0211k/Babgahdc.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0211k/Babgahdc.html)

Linux 使用这些位作为各种内存管理功能的软件上下文：

```
#define PMD_SECT_MINICACHE     (PMD_SECT_TEX(1) | PMD_SECT_CACHEABLE)
#define PMD_SECT_WBWA          (PMD_SECT_TEX(1) | PMD_SECT_CACHEABLE | PMD_SECT_BUFFERABLE)
#define PMD_SECT_NONSHARED_DEV (PMD_SECT_TEX(2)) 
```

见： http: [//lxr.free-electrons.com/source/arch/arm/include/asm/pgtable](http://lxr.free-electrons.com/source/arch/arm/include/asm/pgtable)

# c++ - 无法添加控制变量

> ID：12348565
> 
> 赞同：1
> 
> 时间：2012-09-10T09:13:17.207
> 
> 标签：c++, c, bitmap, atl, image

我有一个应用程序，我想添加一个图片控件并在其中显示一些位图图像。但是，我无法将控制变量添加到图片控件。

一开始，我什至无法添加变量。因为我的头文件中没有`enum {IDD = ID_OF_MY_DIALOG;}`一行。我修好了它。但是，现在，我无法添加控制变量。当我右键单击图片控件并单击添加变量行时，我无法选择控件变量复选框。

如何向我的项目添加控制变量，如何动态显示位图，或者我的错误是什么？

我测试了一些 MFC 应用程序并看到了控制变量部分。所以，我的项目中一定缺少一些东西——我猜。

这是我的截图：

[在我的 ATL 项目中添加变量屏幕](https://www.dropbox.com/s/prrq3xle2mvuelr/atlBased.PNG)

[在随机 MFC 项目中添加可变屏幕](https://www.dropbox.com/s/kbkyabh4kmcyo6x/mfcBased.PNG)

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:01:38.650

假设您将`STATIC`控件添加到对话框模板中。在模板编辑器中，您可以在控件属性中分配一个标识符，例如`IDC_PICTURE`. 从那里 - 控件已经在运行时为您创建。在代码中，您将添加`CWindow`变量，并在您的`OnInitDialog`处理程序中（我假设您已经拥有它 - AFAIR 它是默认创建的并且存在是各种示例）您将添加成员变量初始化，因此您的代码可以使用它来做更多事情比如消息处理。

```
class CMainDialog :
    public CDialogImpl<CMainDialog>
{
// ...
private:
    CWindow m_PictureStatic;
    HBITMAP m_hPictureBitmap;

// Window Message Handlers
    LRESULT OnInitDialog(UINT nMessage, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
    {
        m_PictureStatic = GetDlgItem(IDC_PICTURE);
        m_hPictureBitmap = LoadBitmap(_AtlBaseModule.GetResourceInstance(), MAKEINTRESOURCE(IDB_PICTURE));
        ATLASSERT(m_hPictureBitmap);
        m_PictureStatic.SendMessage(STM_SETIMAGE, IMAGE_BITMAP, (LPARAM) m_hPictureBitmap);
        // ...
    }
    LRESULT OnDestroy(UINT nMessage, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
    {
        ATLVERIFY(DeleteObject(m_hPictureBitmap));
        return 0;
    } 
```

图片本身（在此代码片段中，可能还有其他选项）带有标识符的位图资源`IDB_PICTURE`。代码从资源加载位图并将其传递给控件。

![在此处输入图像描述](../Images/8f2e22ea9c32d141c81eefe89cfcc62e.png)

[源代码](http://www.alax.info/trac/public/browser/trunk/Utilities/AtlDialogSample)+[添加图片静态之前](http://www.alax.info/trac/public/browser/trunk/Utilities/AtlDialogSample?rev=71)的源代码。

# mysql - 在mysql触发器中调用perl脚本期间出错

> ID：12348566
> 
> 赞同：0
> 
> 时间：2012-09-10T09:13:17.763
> 
> 标签：mysql, perl

我想在插入调用 Perl 脚本后编写触发器，如下代码：

```
create trigger example after insert on radacct 

for each row begin

set @rs=sys_exec(CONCAT('/usr/bin/perl','/usr/bin/p2.pl'));

end 
```

我的触发器成功运行，但我的 Perl 脚本没有运行，`@rs`插入后的值为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:18:13.617

这可能无法回答您的问题，但我将提供另一种方法，它不包括 UDF。

创建填充运行队列而不是调用 UDF 的触发器。让 perl 脚本轮询并清空该队列，而不是从触发器中调用。这使得系统更加健壮。

将 UDF 添加到触发器时，您会损害数据库并引入可能不会在与正常触发器相同的可预测时间内运行的外部部分。请注意，整个通话都在等待您的 sys_exec 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:03:35.853

首先，我同意安德烈亚斯上面的回答。

触发器通常在数据提交后触发。您可以通过在末尾添加 ("&") 来使其工作/运行，以便让触发器在后台运行它。就像是：

```
 set @rs=sys_exec(CONCAT('/usr/bin/perl','/usr/bin/p2.pl',' &')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-17T09:11:42.470

尝试这样做。这个对我有用。

```
create trigger example after insert on radacct 

for each row begin

set @rs=sys_exec(CONCAT('/usr/bin/perl /usr/bin/p2.pl &'));

end 
```

# java - 从eclipse中的方法定义跳转到方法调用[Java透视图]

> ID：12348567
> 
> 赞同：17
> 
> 时间：2012-09-10T09:13:21.623
> 
> 标签：java, eclipse, ide, keyboard-shortcuts

（在eclipse中）我们有一个快捷键可以从调用方法的地方跳转到方法定义，即使用F3。但是，如果我当前在方法定义中并且我想去调用或使用该方法的那个位置怎么办。这有什么捷径吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-10T09:16:58.000

您可以尝试`Ctrl+Shift+G`哪个等效于查找参考。

或者`Ctrl+Alt+H`它带来了调用层次结构。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T09:15:21.733

这是`Ctrl + Alt + H`为了调出调用层次结构。

# android - 如何创建以下表格

> ID：12348573
> 
> 赞同：0
> 
> 时间：2012-09-10T09:13:36.063
> 
> 标签：android

我是 Android 新手。我必须在 Android 中创建以下表单我搜索了很多并尝试如何将编辑框和按钮放在自定义视图中的指定位置但因此没有水果满。需要在表单下面创建的建议

![在此处输入图像描述](../Images/a9fa5c83319a4c17ddc24002c58fc0a8.png)

> 可以在这里查看表格：[https ://docs.google.com/open?id=0B24mKxvBKwivcGtNSWZIOHpiSnc](https://docs.google.com/open?id=0B24mKxvBKwivcGtNSWZIOHpiSnc)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:16:50.697

试试这个[Android 登录和注册屏幕设计](http://www.androidhive.info/2011/10/android-login-and-registration-screen-design/)

这与您的要求非常相似

# java - Android - 全局变量 - 应用程序错误

> ID：12348576
> 
> 赞同：0
> 
> 时间：2012-09-10T09:13:51.093
> 
> 标签：java, android, android-emulator

我试图通过在 android.app.Application 中创建一个子类来在我的应用程序中创建全局变量。我已经按照互联网上的一些教程，但我似乎无法让它工作。Eclipse 没有给我任何错误，但是当我启动应用程序时出现以下错误：不幸的是，应用程序已停止。

[另一个人在Stackoverflow](https://stackoverflow.com/questions/11954154/android-java-global-variables-through-subclass-cant-launch-app)上问了同样的问题，但这个解决方案似乎对我不起作用。

这是我的应用程序文件，任何帮助将不胜感激！

**MainActivity.java**

```
package com.app.app;

import org.apache.http.cookie.Cookie;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity {

TextView mTxtvName;

String cookie;
String username;
Cookie theRealCookie;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.overzichttablayout);

    mTxtvName = (TextView) findViewById(R.id.txtvName);

    Globals global = (Globals)getApplication();
    String username = global.getVariable("globUsername");
    String cookie = global.getVariable("globCookie");

    mTxtvName.setText(username);
}

} 
```

**Globals.java**

```
package com.app.app;

import android.app.Application;

public class Globals extends Application {

private String globCookie = "null";
private String globUsername = "null";

public String getVariable(String someName) {
    if(someName == "globCookie")
    {
        return globCookie;
    }
    else if(someName == "globUsername")
    {
        return globUsername;
    }
    else
    {
        return null;
    }
}

public void setVariable(String someName, String someVariable) {
    if(someName == "globCookie")
    {
        this.globCookie = someVariable;
    }
    else if(someName == "globUsername")
    {
        this.globUsername = someVariable;
    }
}
} 
```

**应用清单**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.app.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="11" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" 
         android:theme="@android:style/Theme.Light.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="OverviewActivity" android:theme="@android:style/Theme.Light.NoTitleBar"></activity>
</application>
<application android:name="Globals" android:icon="@drawable/ic_launcher" android:label="@string/app_name" />

</manifest> 
```

**原木猫**（缩短）

```
08:51:53.783: D/AndroidRuntime(1650): Shutting down VM
08:51:53.783: W/dalvikvm(1650): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08:51:53.863: E/AndroidRuntime(1650): FATAL EXCEPTION: main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:19:12.977

我怀疑错误是因为您声明了第二个`<application />`标签

您应该`Globals`在第一个`<application />`标签中声明

```
<application
    android:name="Globals" 
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" > 
```

而这一行，删除：

```
<application android:name="Globals" android:icon="@drawable/ic_launcher" android:label="@string/app_name" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:19:16.660

AFAIK 您不能在一个清单中创建两个应用程序。

而是添加`android:name="Globals"`到第一个`Application`标签本身。

如果这不是错误的原因，请发布整个 logcat 消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:18:05.690

我认为是因为您将 textview 设置为空值。你不能用 == 操作符比较两个字符串，你可以使用 equals() 函数。IE。someName.equals("globCookie")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:21:31.103

异常原因：在 Manifest 文件中找到两个应用程序标签。要纠正它，请替换 Manifest 行

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name" > 
```

和

```
<application 
android:name="Globals"
android:icon="@drawable/ic_launcher"
android:label="@string/app_name" > 
```

并删除这一行：

```
<application android:name="Globals" android:icon="@drawable/ic_launcher" android:label="@string/app_name" /> 
```

此外，您还试图在 globCookie 和 globUsername 初始化之前调用它们。您可能希望`onCreate()`在 Globals 中覆盖并将 globCookie 和 globUsername 设置为一些默认值。

# xml - 从架构 (XSD) 文件创建 XSLT

> ID：12348577
> 
> 赞同：0
> 
> 时间：2012-09-10T09:13:56.050
> 
> 标签：xml, xslt, xsd

我想从 XSD 文件创建 XSLT 文件，以便将 XML 文件转换为有效（针对 XSD）。我有 12 个 XSD 文件和一千多个使用它们的 XML 文件。如果我对 XSD 文件进行更改，我需要将所有 XML 文件更改为有效，这是无法手动完成的。我想这样做的本机方法是使用 XSLT 转换。我需要 XSLT 来进行转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:56:22.740

问题没有很好地说明。例如，如果您的架构需要包含整数的单个元素 foo，并且您的实例文档包含结构

```
<body>
  <x>London</x>
  <y>Paris</y>
</body> 
```

那么你希望转型做什么呢？

# magento - Magento：在单页结帐中获取当前活动步骤

> ID：12348578
> 
> 赞同：3
> 
> 时间：2012-09-10T09:13:57.347
> 
> 标签：magento

如何获得单页结帐中的活动步骤？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:04:12.143

活动步骤部分的 LI 标签将具有“活动”类。

它是通过 Accordion js 类 - 方法*openSection 完成*的（参见 js\varien\accordion.js）。Accordion 本身由 Checkout js 类触发 - 方法*gotoSection*（文件 \skin\frontend\base\default\js\opcheckout.js）。

Checkout 和 Accordion 类都在 onepage.phtml 模板中实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T19:58:23.103

如果您只是想在自己的 JS 文件中添加一些代码或内联在 onepage.phtml 中，您可以使用它来挂钩到`gotoSection()`.

```
Checkout.prototype.gotoSection = Checkout.prototype.gotoSection.wrap(
    function(parentMethod, section, reloadProgressBlock) {
        // Call parent method
        parentMethod(section, reloadProgressBlock);
        console.log(section);
    }
); 
```

注意：确保将其包装在 onload 包装器中。

# eclipse - 在 tycho 中从启动 SWTBot 测试中排除捆绑包

> ID：12348579
> 
> 赞同：3
> 
> 时间：2012-09-10T09:13:59.097
> 
> 标签：eclipse, maven, tycho, swtbot

我正在使用 SWTBot 为 RCP 应用程序运行 UI 测试，它在 eclipse IDE 中启动测试时运行良好。现在我想在 Maven 中运行测试，到目前为止它也有效。`org.eclipse.swtbot.eclipse.finder --> org.eclipse.ui.editors --> org.eclipse.ui.ide`不幸的是，通过依赖链`org.eclipse.ui.ide`也存在于运行测试的应用程序中。使用此捆绑包时，会出现一些意外的菜单项，并且应在测试运行时中排除该捆绑包。这怎么可能实现？

在 Eclipse 中运行测试时，我只是`org.eclipse.ui.ide`在 SWTBot 测试启动配置中排除了捆绑包，一切都按预期工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:28:03.380

依赖链`org.eclipse.swtbot.eclipse.finder --> org.eclipse.ui.editors --> org.eclipse.ui.ide`包含一个可选链接：第一个包只需要通过可选导入包的第二个包`org.eclipse.ui.texteditor`。这就是为什么您可以`o.e.ui.ide`从 Eclipse 启动的测试运行时中删除捆绑包，并且`o.e.swtbot.eclipse.finder`仍然可以工作的原因。

在正常情况下，您可以在 Tycho 的测试运行时中通过确保可选依赖项不在目标平台中来实现相同的目的：

```
<plugin>
   <groupId>org.eclipse.tycho</groupId>
   <artifactId>target-platform-configuration</artifactId>
   <version>${tycho-version}</version>
   <configuration>
      <filters>
         <filter>
            <type>eclipse-plugin</type>
            <id>org.eclipse.ui.ide</id>
            <removeAll />
         </filter>
      </filters>
   </configuration>
</plugin> 
```

但这就是为什么**这在您的特定情况下不起作用**的原因：当您使用 UI 测试工具 ( `useUIHarness=true`) 时，Tycho 无条件地将捆绑包`org.eclipse.ui.ide.application`作为额外要求添加到您的测试运行时。该捆绑包对 . 有一个非可选要求`org.eclipse.ui.ide`，因此使用上面的目标平台配置，您将收到“无法解决依赖关系”错误，抱怨`org.eclipse.ui.ide.application`.

所以，我认为你的情况没有解决方案——但我认为这是第谷中的一个错误。SWT bot 测试在 Eclipse 中运行，因此它们也应该在 Tycho 中运行。显然，Eclipse 不需要`org.eclipse.ui.ide.application`捆绑包（否则当您取消选择`org.eclipse.ui.ide`捆绑包时它会停止工作），因此 Tycho 也不应该需要它。请[为 Tycho 提交错误报告](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Tycho)并附上重现问题的最小示例项目，以便我可以解决此问题。

# c# - url 在页面名称和扩展名之间包含双点

> ID：12348582
> 
> 赞同：0
> 
> 时间：2012-09-10T09:14:10.963
> 
> 标签：c#

我通过包含页面 URL 的代码发送电子邮件。代码返回正确的 URL 文本和 href 值。但是在电子邮件中，我在登录名和 aspx 之间出现了双点，例如 (login..aspx)，但正如您所见，它在文本中是硬编码的。问题是我得到了（login..aspx）。PageName 不包含 . 在里面。任何帮助

生成网址的代码：

```
RedUrl = "<a href='" + domain + "/login.aspx?redurl=" + PageName + ".aspx&id=" + 
         id.EncodeString()'>" + domain + "/login.aspx?redurl=" + PageName + 
         ".aspx&id=" + id.EncodeString() "</a>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:00:35.203

也许`PageName`以一个点结尾，尝试修剪它：`PageName.TrimEnd(".".ToCharArray())`

# c++ - 父进程未完全从命名管道读取数据

> ID：12348584
> 
> 赞同：1
> 
> 时间：2012-09-10T09:14:13.870
> 
> 标签：c++, c

我正在尝试分叉一个进程并执行一个命令。我正在创建一个命名管道并尝试从将 STDOUT 写入管道的子进程执行命令。父进程将从管道中读取。我的问题是父进程没有完全从管道中读取数据。这是代码。

```
fifo_fd = mkfifo(MY_FIFO, 0666);
FILE *fp = fdopen(fifo_fd, "r");
childpid = fork();
if (childpid == 0)
{
   dup2(fifo_fd, STDOUT_FILENO);
   dup2(fifo_fd, STDERR_FILENO);
   close(fifo_fd);
   execv(arg_list[0], arg_list);
   _exit (127);
}
else
{
   //parent process
   if(waitpid(childpid, &status,WNOHANG ) == -1) {
     // now we kill the child and return failure.
   }

   fcntl(fd, F_SETFL, O_NONBLOCK);

   while((fgets(buf, sizeof(buf)-1,fp))) {
   strcat(result,buf); //we copy the buf to result
}
return success;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:15:37.633

您想使用管道，而不是 fifo，这样您就不需要创建文件系统条目。正如@Christian 所说，您还需要确保两个进程同时运行，否则管道/fifo 可能会阻塞并导致您的程序挂起。

尝试类似以下的操作。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main() {
    int pipe_fd[2];
    pipe(pipe_fd);

    if (fork() == 0) {
        dup2(pipe_fd[1], STDOUT_FILENO);
        dup2(pipe_fd[1], STDERR_FILENO);
        close(pipe_fd[0]);
        close(pipe_fd[1]);
        char *arg_list[] = {"/bin/echo", "hello", 0};
        execv(arg_list[0], arg_list);
        __builtin_unreachable();

    } else {
        close(pipe_fd[1]);
        char buf[32];
        int count;
        for (;;) {
            count = read(pipe_fd[0], buf, sizeof(buf));
            if (count <= 0) break;
            write(STDOUT_FILENO, buf, count);
        }
    }

    return 0;
} 
```

# c# - 如何将外部程序嵌入到 WPF 或 .net winform 程序中？

> ID：12348586
> 
> 赞同：1
> 
> 时间：2012-09-10T09:14:24.690
> 
> 标签：c#, .net, wpf, win32-process

比如嵌入“calc.exe”到wpf窗口，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:15:58.623

您可以使用[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)方法：

```
Process.Start("calc.exe"); 
```

但是您不能*将 exe 加载*到现有的 WPF 窗口中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T09:16:04.753

你没有。您可以通过使用[System.Diagnostics.Process.Start()调用它来](http://msdn.microsoft.com/en-us/library/e8zac0ca%28v=vs.100%29)**启动**另一个进程，但您不能“导入”一个进程。

# ruby-on-rails - 哪些记录受 ActiveRecord 依赖影响：销毁？

> ID：12348587
> 
> 赞同：4
> 
> 时间：2012-09-10T09:14:26.103
> 
> 标签：ruby-on-rails, activerecord

我有几个 ActiveRecord 对象的关联标记为`dependent: :destroy`. 当用户删除其中一个对象时，我想向他展示将（递归）删除的所有对象的列表。我如何获得这份清单？

我在[这里](https://stackoverflow.com/questions/791721/evaluating-dependent-destroy)[`affected_on_destroy`](https://github.com/murbanski/affected_on_destroy/)找到了gem ，但它并没有真正完成，似乎是 rails 2.2。Rails 中是否有更多最新的 gem 或某些功能可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:44:16.243

```
Class.reflect_on_all_associations.
  keep_if{ |assoc| assoc.options[:dependent] == :destroy }.map(&:name) 
```

这可能不是您想要的，但我认为`reflect_on_all_associations`应该可以得到您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:02:26.313

我写了一个gem `affected_by_destroy`，源代码可以在[这里](https://github.com/lucas-clemente/affected_by_destroy)找到。

# jqgrid - 重新加载网格的 API 调用不起作用

> ID：12348591
> 
> 赞同：1
> 
> 时间：2012-09-10T09:14:50.997
> 
> 标签：jqgrid

这个问题可能是一个重复的问题，但我将其添加为一个新问题，因为类似问题中提到的所有答案都不适合我。

```
jqGridObj.setGridParam({ datatype: "json"}).trigger("reloadGrid"); 
```

在这行执行中，我观察浏览器控制台，它确实正确地进行了新的 json 调用，并且这个新调用的响应也确实包含来自服务器的最新数据。但是，有些新记录没有填充到网格中。我需要手动刷新页面才能看到新记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T20:53:32.903

我用试试这个：

```
$("#NAME_GRID").trigger("reloadGrid"); 
```

请参阅包含示例的[链接](http://pastebin.com/tDCMgaNb)，其中包含 jqgrid 调用重新加载的代码。

# c - 无锁队列中的内存屏障使用

> ID：12348593
> 
> 赞同：16
> 
> 时间：2012-09-10T09:14:57.427
> 
> 标签：c, concurrency, 64-bit, lock-free, memory-barriers

我最近阅读了 Paul McKenney 的 2010 年白皮书[“内存屏障：软件黑客的硬件视图”](http://www.liblfds.org/mediawiki/images/a/a7/Michael%2C_Scott_-_Simple%2C_Fast%2C_and_Practical_Non-Blocking_and_Blocking_Concurrent_Queue_Algorithms.pdf)。

我非常感谢关于下面给出的一小部分 C 代码的反馈/评论/指导，这些代码实现了 M&S 队列入队功能，特别是在内存和编译器障碍方面。

这段代码使用指针-计数器对来处理[ABA](http://en.wikipedia.org/wiki/ABA_problem)，为了这篇文章，应该被认为是为 x86/x64 编写的，并且只为 x86/x64 编写。

内联评论现在都是为这篇文章写的，并且是这篇文章的一部分，因为它们表达了我目前的想法。

为简洁起见，我已经剥离了结构中的断言代码和缓存行填充等。

目前，我认为代码很糟糕，但我想确保我这样认为是出于正确的原因。

* * *

```
#define PAC_SIZE 2

struct lfds_queue_element
{
  struct lfds_queue_element
    *volatile next[PAC_SIZE];

  void
    *user_data;
};

struct lfds_queue_state
{
  struct lfds_queue_element
    *volatile enqueue[PAC_SIZE];

  struct lfds_queue_element
    *volatile dequeue[PAC_SIZE];

  atom_t volatile
    aba_counter;
};

void lfds_queue_internal_dcas_pac_enqueue( struct lfds_queue_state *lqs, struct lfds_queue_element *lqe )
{
  ALIGN(ALIGN_DOUBLE_POINTER) struct lfds_queue_element
    *local_lqe[PAC_SIZE], *enqueue[PAC_SIZE], *next[PAC_SIZE];
  unsigned char cas_result = 0;
  unsigned int backoff_iteration = 1;

  /* TRD : here we have been passed a new element to place
           into the queue; we initialize it and its next
           pointer/counter pair
  */

  local_lqe[POINTER] = lqe;
  local_lqe[COUNTER] = (struct lfds_queue_element *) lfds_abstraction_atomic_increment( &lqs->aba_counter );

  local_lqe[POINTER]->next[POINTER] = NULL;
  local_lqe[POINTER]->next[COUNTER] = (struct lfds_queue_element *) lfds_abstraction_atomic_increment( &lqs->aba_counter );

  /* TRD : now, I think there is a issue here, in that these values
           are by no means yet necessarily visible to other cores

           however, they only need to be visible once
           the element has entered the queue, and for that
           to happen, the contigious double-word CAS must
           have occurred - and on x86/x64, this carries
           with it an mfence

           however, that mfence will only act to empty our
           local store buffer - it will not cause other cores
           to flush their invalidation queues, so surely
           it can all still go horribly wrong?

           ah, but if all other cores are only accessing
           these variables using atomic operations, they
           too will be issuing mfences and so at that
           point flushing their invalidate queues
  */

  do
  {
    enqueue[COUNTER] = lqs->enqueue[COUNTER];
    enqueue[POINTER] = lqs->enqueue[POINTER];

    next[COUNTER] = enqueue[POINTER]->next[COUNTER];
    next[POINTER] = enqueue[POINTER]->next[POINTER];

    /* TRD : now, this is interesting

             we load the enqueue pointer and its next pointer
             we then (immediately below) check to see they're unchanged

             but this check is totally bogus!  we could be reading
             old values from our cache, where our invalidate queue
             has not been processed, so the initial read contains
             old data *and* we then go ahead and check from our cache
             the same old values a second time

             what's worse is that I think we could also read the correct
             values for enqueue but an incorrect (old) value for its
             next pointer...!

             so, in either case, we easily mistakenly pass the if()
             and then enter into code which does things to the queue

             now, in both cases, the CAS will mfence, which will
             cause us to see from the data structure the true
             values, but how much will that help us - we need
             to look to see what is actually being done

             the if() checks next[POINTER] is NULL

             if we have read a NULL for next, then we think
             the enqueue pointer is correcly placed (it's not
             lagging behind) so we don't need to help; we then
             try to add our element to the end of the queue

             now, it may be we have read enqueue properly but
             next improperly and so we now try to add our element
             where it will in fact truncate the queue!

             the CAS however will mfence and so at this point
             we will actually see the correct value for enqueue-next,
             and this will prevent that occurring

             if we look now at the else clause, here we have seen
             that enqueue->next is not NULL, so the enqueue pointer
             is out of place and we need to help, which we do by
             moving it down the queue

             here though we could have read enqueue correctly
             but next incorrectly; the CAS will mfence, which will
             update the cache, but since we're only comparing
             the enqueue pointer with our copy of the enqueue
             pointer, the fact our next pointer is wrong won't
             change!  so here, we move the enqueue pointer to
             some old element - which although it might be in the
             queue (so this would be an inefficiency, you'd have
             to do a bunch more queue walking to get the enqueue
             pointer to the final element) it might not be, too!
             it could in the meantime have been dequeued and
             that of course would be death
    */

    if( lqs->enqueue[POINTER] == enqueue[POINTER] and lqs->enqueue[COUNTER] == enqueue[COUNTER] )
    {
      if( next[POINTER] == NULL )
      {
        local_lqe[COUNTER] = next[COUNTER] + 1;
        cas_result = lfds_abstraction_atomic_dcas_with_backoff( (atom_t volatile *) enqueue[POINTER]->next, (atom_t *) local_lqe, (atom_t *) next, &backoff_iteration );
      }
      else
      {
        next[COUNTER] = enqueue[COUNTER] + 1;
        lfds_abstraction_atomic_dcas( (atom_t volatile *) lqs->enqueue, (atom_t *) next, (atom_t *) enqueue );
      }
    }
  }
  while( cas_result == 0 );

  local_lqe[COUNTER] = enqueue[COUNTER] + 1;

  lfds_abstraction_atomic_dcas( (atom_t volatile *) lqs->enqueue, (atom_t *) local_lqe, (atom_t *) enqueue );

  return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T00:24:41.650

CAS 是原子的，因此如果一个线程成功而另一个线程尝试，则另一个线程将失败并重试。

只有当所有线程都尝试使用相同的机制访问相同的内存时，它才有效，也就是说，它们都使用 CAS 访问。如果他们不这样做，与 CAS 相关的保证（在本例中为内存栅栏）就会消失。

# perl - 为什么 Perl say() 没有在 FCGI 模式下添加换行符？

> ID：12348594
> 
> 赞同：11
> 
> 时间：2012-09-10T09:15:02.433
> 
> 标签：perl, apache, cgi, fastcgi

我在 FCGI 模式下对 Perl 的 say 函数有一个奇怪的行为。不会追加换行符。为什么会这样？

示例代码：

```
#!/usr/bin/perl -wT
use strict;
use warnings;
use utf8;
use feature qw( say );
use FCGI ();
use CGI qw( header );
my $cnt = 0;
my $req = FCGI::Request();
while ( $req->Accept() >= 0 ) {
    $cnt++;
    print header( -type => 'text/plain', -charset => 'utf-8' );
    say "Hello, world #$cnt";
    print "\n";
    print "$$\n"
    print 'Test 1234';
} 
```

预期结果（以及通过控制台的实际结果）：

```
Content-Type: text/plain; charset=utf-8

Hello, world. #1

6712
Test 1234 
```

通过 Apache/FCGI 的实际结果：

```
Content-Type: text/plain; charset=utf-8

Hello, world. #3
6709
Test 1234 
```

一些软件信息...

> Debian Wheezy x86_64 Apache/2.2.22-11 mod_fcgid/1:2.3.6-1.1 Perl/5.14.2-12 FCGI.pm/0.75-1+b1

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T10:00:03.083

不幸的是 say() 函数的实现需要文件句柄来支持 $\ 变量。基本上说相当于写：

```
{ local $\ = "\n"; print LIST } 
```

使用 FCGI，您的 STDOUT 会被不支持 $\ 的绑定文件句柄替换。这意味着 say() 不能按预期工作。这是否是 FCGI 或 say() 中的错误似乎值得商榷。

# .net - 是否有 .net 等效于 apache commons.lang ReflectionToStringBuilder？

> ID：12348595
> 
> 赞同：2
> 
> 时间：2012-09-10T09:15:06.693
> 
> 标签：.net, tostring

这必须是某种常见问题解答。我想将对象的完整状态记录到日志文件中（使用 log4net，但这应该无关紧要），并且我不会`ToString`为我的每个类都覆盖。有什么现成的我应该使用的吗？我正在考虑类似于 java commons.lang 的东西`ReflectionToStringBuilder`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:24:09.027

为什么不尽可能尝试简单的序列化？[http://support.microsoft.com/kb/815813](http://support.microsoft.com/kb/815813)

# matlab - 如何在 Matlab 的单元格数组中搜索整数数组？

> ID：12348596
> 
> 赞同：4
> 
> 时间：2012-09-10T09:15:07.327
> 
> 标签：matlab

假设我有一个包含整数数组数组的元胞数组。在元胞数组中搜索特定数组并在存在时返回 true 否则返回 false 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:18:36.767

您可以`cellfun`结合使用`isequal`：

例如：

```
cellArr = {[1 2 3],'xcxc',magic(5),1:3};
element = [1 2 3];
indexes = cellfun( @(x)isequal(x,element),cellArr); 
```

这将为您提供一个数组，其中包含`true`该元素存在的单元格。为了检查元素是否至少存在一次，只需使用：

```
any(indexes) 
```

# javascript - Highcharts 动态烛台

> ID：12348597
> 
> 赞同：3
> 
> 时间：2012-09-10T09:15:11.263
> 
> 标签：javascript, jquery, highcharts

我想用`candlestick`type 制作一个动态图表，我尝试通过添加`type: 'candlestick'`到系列来编辑动态示例，但它不起作用。

[http://jsfiddle.net/hppyr/](http://jsfiddle.net/hppyr/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:00:23.507

那是因为您将线数据传递给烛台 OHLC 需要将其数据作为数组数组，内部数组上的每个元素都有 5 个值 `[x,o,h,l,c]`

```
series.addPoint([
    x,
    Math.random()*100,
    Math.random()*100,
    Math.random()*100,
    Math.random()*100
    ], true, true);

data.push([
    time + i * 1000,
    Math.random()*100,
    Math.random()*100,
    Math.random()*100,
    Math.random()*100
    ]); 
```

API 参考 @ [http://api.highcharts.com/highstock#series.data](http://api.highcharts.com/highstock#series.data) jsFiddle @ [http://jsfiddle.net/jugal/SykAf/](http://jsfiddle.net/jugal/SykAf/)

# .net - 为什么我需要用于 AspNetCompiler 任务的 VirtualPath 属性

> ID：12348598
> 
> 赞同：9
> 
> 时间：2012-09-10T09:15:15.440
> 
> 标签：.net, msdeploy, aspnet-compiler

我正在尝试为网站编写构建系统，以便我可以进行一键构建。我从源代码存储库中获取了一份干净的代码副本，然后使用 msbuild 运行 AspNetCompiler 任务来完成网站的所有预编译。

令我困惑的是我需要指定一个 VirtualPath 或 MetabasePath。我没有元数据库路径——我只想将它编译到本地目录中，然后可以将其部署到选择的任何服务器（即首先是开发服务器，然后是实时服务器）。

VirtualPath 很棘手，因为我希望将相同的代码部署到多个位置——代码使用一些上下文和配置细节来计算其 SiteID 以显示不同的信息——因此指定单个虚拟路径似乎并不明智。

沿着类似的路线还有其他各种问题（例如[AspNetCompiler MSBuild Task 中的 VirtualPath - 它是否必须等于最终部署的虚拟路径？](https://stackoverflow.com/questions/3333966/virtualpath-in-aspnetcompiler-msbuild-task-does-it-have-to-be-equal-to-the-fin)）但我发现的唯一答案似乎更具轶事 - 即他们只是说这似乎对他们的经历没有影响。

但是，我不敢相信它真的没有任何区别。必须在某些情况下使用它，否则它不会存在并且不需要。

那么有人知道（最好有参考）这是做什么的吗？将组成的虚拟路径传递给任务可能会导致什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T00:26:23.267

在 Visual Studio 中发布站点时，不需要输入此数据（事实上，我什至从未见过任何选项）。我很惊讶它在 MS-Build 配置中是强制性的。

你可能想对 Visual Studio 使用的任何东西进行“逆向工程”，但我猜它会是一个单斜杠“/”或类似的东西。

话虽如此，该要求可能与使用虚拟路径提供程序或资源提供程序的预编译网站有关的[问题有关。](http://codingarchitect.wordpress.com/2011/02/11/asp-net-pre-compilation-virtual-path-providers-and-resource-providers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-07T15:02:47.403

Visual Studio 对 VirtualPath 属性使用单个反斜杠。生成的完整命令行字符串如下所示。

```
C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\aspnet_compiler.exe -v \ -p C:\src\Web\WebApplication1\obj\Release\AspnetCompileMerge\Source C:\src\Web\WebApplication1\obj\Release\AspnetCompileMerge\TempBuildDir 
```

# c - Tcl 和 C 线程之间的共享变量

> ID：12348599
> 
> 赞同：1
> 
> 时间：2012-09-10T09:15:16.257
> 
> 标签：c, multithreading, tcl

我有一个 Tcl 主程序，我想从中创建一个 C 线程。然后我需要在两个线程之间共享信息： C 线程的进程经常更新输入/输出。我看到我的问题有两种可能的解决方案：(1) 将 Tcl 的线程共享变量移植到 C，但我在 TCL-C API 中没有看到任何关于它的信息。(2) 创建 Tcl-C 链接变量并将其用作 C 线程创建期间的参数。后一种想法似乎行不通。这是C代码：

```
#include <tcl.h>

/*
startRoutine
*/
static void startRoutine (ClientData clientData) {
 int *Var;
 Var= (int *) clientData;
 int locA=0;
 int j;
 int k;
 while (1) {    
     if (locA=!*Var) {
         // Modify Tcl-C shared variable
         locA=2 * *Var;
         *Var=locA;
         for (j=0; j<100; j++){}
     } else {
         for (k=0; k<100; k++){}
     }
  }
 }

static int
createThreadC_Cmd(
    ClientData cdata,
    Tcl_Interp *interp,
    int objc,
    Tcl_Obj *const objv[])
{

    // Contains the ID of the newly created thread
    Tcl_ThreadId id;    
    // Thread argument
    ClientData limitData;

    // Transfering global var argument to the created thread
    limitData=cdata;

    // Thread creation
    id=0;
    Tcl_CreateThread(&id, startRoutine, limitData, TCL_THREAD_STACK_DEFAULT, TCL_THREAD_NOFLAGS);

    // Wait thread process, before returning to TCL prog
    int i;
    int aa;
    for (i=0 ; i<10000000 ; i++){
        aa=i;
    }

    // Return thread ID to tcl prog to allow mutex use
    Tcl_SetObjResult(interp, Tcl_NewIntObj((int) id));
    return TCL_OK;  
}

int DLLEXPORT

Behavcextension_Init(Tcl_Interp *interp)
{

    if (Tcl_InitStubs(interp, TCL_VERSION, 0) == NULL) {
        return TCL_ERROR;
    }

    // Create global Var
    int *sharedPtr;
    int linkedVar=0;
    sharedPtr=&linkedVar;
    Tcl_LinkVar(interp, "linkedVar", (char *) sharedPtr, TCL_LINK_INT);

    Tcl_CreateObjCommand(interp, 
        "createThreadC", createThreadC_Cmd, sharedPtr, NULL);
    return TCL_OK;

} 
```

这是 Tcl 代码：

```
# linkedVar initial value in Tcl, will be overwritten by C Tcl_LinkVar() function
set linkedVar 98
puts "linkedVar: $linkedVar"

# Thread creation
#------------------
load [file join [pwd] libBehavCextension[info sharedlibextension]]
set threadId [createThreadC]
puts "Created thread $threadId, waiting"
# When Tcl_LinkVar() is called, initiate linkedVar at 2
puts "linkedVar: $linkedVar"

# Function inside thread should modify linkedVar into linkedVar*2
set linkedVar 98
after 5000
puts "linkedVar: $linkedVar" 
```

终端输出在这里：

```
Main thread ID: tid0xb779b6c0
linkedVar: 98
Created thread -1227252928, waiting
linkedVar: 2
linkedVar: 98 
```

最后的结果应该是 2*98=196。Tcl 和 C 之间的 LinkVar 创建是好的（我们在创建链接后得到 2），但是将 LinkVar 传递给 Thread 是 KO。欢迎任何关于它为什么不起作用/如何解决它的解决方案或解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:52:19.507

问题与另一个问题相同。您正在为 C 堆栈上 C 端的变量分配存储空间，该函数在不久后终止的函数中。在函数 ( ) 终止后引用该变量（位于`linkedVar`中）是未定义行为。实际发生的情况是，实际存储用于其他一些函数调用（谁知道做什么），因此包含的值是任意的，更改它可能会导致“令人兴奋”的行为。`Behavcextension_Init``Behavcextension_Init`

您正在寻找一个在完成后存在的变量`Behavcextension_Init`，因此*不得*在该函数的堆栈中分配它。最简单的方法是这样的：

```
int DLLEXPORT
Behavcextension_Init(Tcl_Interp *interp)
{
    int *sharedPtr;

    if (Tcl_InitStubs(interp, TCL_VERSION, 0) == NULL) {
        return TCL_ERROR;
    }

    sharedPtr = (int *) Tcl_Alloc(sizeof(int));  // Allocate
    *sharedPtr = 0;                              // Initialize
    Tcl_LinkVar(interp, "linkedVar", (char *) sharedPtr, TCL_LINK_INT);

    Tcl_CreateObjCommand(interp, 
        "createThreadC", createThreadC_Cmd, sharedPtr, NULL);
    return TCL_OK;
} 
```

## 注意事项

1.  这会泄漏内存，因为没有匹配`Tcl_Free`的`Tcl_Alloc`. 对于每个进程分配一次的内存，这不是什么大问题。毕竟，它只有几个字节，操作系统会在退出时回收它。
2.  从与写入变量不同的线程读取变量时，这是不安全的；根本无法保证它会起作用。它*可能会*起作用，因为它只是一个整数，但你依赖于硬件来合作。**正确的做法**是分配一个包含变量和合适互斥锁的结构，并用互斥锁保护对变量的访问（无论是读取还是写入）。这反过来又要求你不要使用`Tcl_LinkVar`——它对受互斥保护的内存一无所知——而`Tcl_LinkVar`只是一个包装轮`Tcl_TraceVar`，它提供了一个回调，用于在 Tcl 的变量之间进行耦合（参见`Tcl_GetVar`和`Tcl_SetVar`) 和 C 变量；编写自己的知道如何进行互斥保护处理的也*不难*。（如果您有兴趣，请获取[源代码`Tcl_LinkVar`](http://core.tcl.tk/tcl/raw/generic/tclLink.c?name=813f2e9bb55e3d19c45d765b2decb44dfa1b907d)并自行调整；它不使用任何私有 API 调用。）

# delphi - 我们的 COM 库的 Excel 2010 中的“不再支持文件格式”

> ID：12348608
> 
> 赞同：1
> 
> 时间：2012-09-10T09:15:47.360
> 
> 标签：delphi, com, excel, vba

问这个问题有点摸不着头脑，但不幸的是，我们已经用尽了所有其他选择。

我们软件包的 .exe 文件公开了一个 COM 库，许多客户通过其 Excel 电子表格中的 VBA 函数使用该库。

一位特定客户最近重新安装了 Windows，然后升级了我们的软件包版本，现在在尝试将我们的 exe 作为 COM 参考导入 Excel 时收到此错误消息：http: [//msdn.microsoft.com/en-us/library /office/gg264377.aspx](http://msdn.microsoft.com/en-us/library/office/gg264377.aspx)

有没有人见过这个？该软件是使用 Borland Delphi 7 制作的，但我不确定这是否有很大的不同。

在注册表中查看我们的 COM 库的 GUID，并具有正确的文件位置。我们已经用尽了所有常用的技巧来用我们的软件修复奇怪的症状。

如果有人有任何想法或以前在他们自己的环境中看到过，那么将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:19:51.390

作为一个疯狂的猜测，我推测客户端可能有 64 位 Excel。那将与您的 32 位 COM 服务器不兼容。

显然，这种疯狂的猜测被证明是准确的！

# ios - Cocos2d：有没有办法把音量改为CDSoundSource？

> ID：12348609
> 
> 赞同：1
> 
> 时间：2012-09-10T09:15:49.480
> 
> 标签：ios, audio, cocos2d-iphone

我正在试验 CDSoundSource 和 caf 文件。有没有办法将音量设置为背景音乐？通过使用 setGain，我可以将音量设置为 0，但无法真正调整它。

例如：

```
CDSoundSource *sound = [soundSources objectForKey:fn];
    [sound setGain:0.0f]; 
    sound.looping = NO;
    [sound play]; 
```

将使音量静音，但具有 [sound setGain:0.1f] 值的相同代码不会有太大区别。我找不到合适的参考。有人有什么建议吗？

# java - 需要布尔值 isTouched()

> ID：12348618
> 
> 赞同：0
> 
> 时间：2012-09-10T09:16:25.380
> 
> 标签：java, android

我需要检测何时触摸屏幕。onTouchEvent 方法仅检测手指何时移动。我需要返回布尔值 true 的方法，当手指触摸屏幕并返回 false 时，它​​不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:26:44.530

这是 onTouch 方法的一个非常基本的实现，它修改布尔值以了解屏幕是否被触摸。您可能需要对其进行调整以满足您的特定需求（并且可能处理多点触控）

```
private boolean mIsScreenTouched;

public boolean onTouch(View v, MotionEvent event) {

    switch (event.getAction()){
    case MotionEvent.ACTION_DOWN :
    case MotionEvent.ACTION_MOVE :
        mIsScreenTouched = true; 
        break; 
    case MotionEvent.ACTION_CANCEL :    
    case MotionEvent.ACTION_UP :
        mIsScreenTouched = false; 
        break; 
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:20:58.077

```
@Override
public boolean dispatchTouchEvent(MotionEvent e) {
    // TODO Auto-generated method stub
    super.dispatchTouchEvent(e);
    if(btn.onTouchEvent(e)){
        return btn.onTouchEvent(e);
    }else{
        return false;
    }
} 
```

# xml - 按 XML 属性过滤 for-each

> ID：12348619
> 
> 赞同：3
> 
> 时间：2012-09-10T09:16:26.360
> 
> 标签：xml, xslt

如果我有以下 XML：

```
<Results>
  <Option isDefault="true" value="1">
     <DisplayName>
        One
     </DisplayName>
  </Option>
  <Option value="2">
     <DisplayName>
        Two
     </DisplayName>
  </Option>
  <Option value="3">
     <DisplayName>
        Three
     </DisplayName>
  </Option>
</Results> 
```

如何访问`value`which `Option`has `isDefault="true"`？

到目前为止，我已经尝试过：

```
<xsl:variable name="varName">
   <xsl:for-each select="Results/Option[isDefault='true']">
      <xsl:value-of select="@value" />
   </xsl:for-each>
</xsl:variable> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:28:31.767

如果你知道只有一个这样的元素，或者你只对第一个这样的元素感兴趣，你可以简单地使用

```
<xsl:value-of select="Results/Option[@isDefault = 'true']/@value"/> 
```

不需要`for-each`. 这适用于 XSLT 1.0 和`value-of`2.0 以上将输出所有元素的`value`属性值。`Results/Option[@isDefault = 'true']`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T12:02:57.923

如果保证最多有一个`Option`元素的`isDefault`属性值为字符串`"true"`，

**然后使用这个 Xpath one-liner**：

```
/*/*[@isDefault='true']/@value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:02:00.843

```
<xsl:variable name="varName">
   <xsl:for-each select="Results/Option[@isDefault='true']">
      <xsl:value-of select="@value" />
   </xsl:for-each>
</xsl:variable> 
```

# joomla - 覆盖 Joomla 中的插件输出！2.5

> ID：12348625
> 
> 赞同：0
> 
> 时间：2012-09-10T09:16:45.707
> 
> 标签：joomla, joomla2.5

有没有办法覆盖插件输出？我想覆盖 Phoca Gallery 插件以使用`<ul><li>`而不是`<div>`'s.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:49:05.233

Phoca Gallery 输出（模板）是用 Joomla 编写的！MVC 模式，因此它可以被模板覆盖。

您需要在模板目录中复制 HTML 这个文件：phogagallery.php

然后编辑例如`$output .= '<div class="detail" style="text-align:right">';`

至`$output .= '<ul class="detail" style="text-align:right">';`

# java - 错误的 Parcelable 异常

> ID：12348627
> 
> 赞同：5
> 
> 时间：2012-09-10T09:16:55.550
> 
> 标签：java, android

首先我必须说我一直在这个网站上寻找我的问题的答案，我发现了几个关于这个异常的主题，但毕竟这些线程对我没有太大帮助，所以这就是我发布的原因这。

每次尝试从包裹中恢复信息时，我都会收到 Bad Parcelable 异常。这是我的课程代码。

```
public class Persona implements Parcelable {

private String nombre,email,tel;

public Persona() {
    nombre = "";
    email = "";
    tel = "";
}

public Persona(String nombre, String email, String tel) {
    this.nombre = nombre;
    this.email = email;
    this.tel = tel;
}

public Persona(Parcel p){
    setNombre(p.readString());
    setEmail(p.readString());
    setTel(p.readString());
}

public String getNombre() {
    return nombre;
}

public void setNombre(String nombre) {
    this.nombre = nombre;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public String getTel() {
    return tel;
}

public void setTel(String tel) {
    this.tel = tel;
}

@Override 
public String toString() {  
  return this.getNombre() + " " + this.getEmail() + " " + this.getTel();
}

public int describeContents() {
    return 0;
}

public void writeToParcel(Parcel des, int flags) {

    des.writeString(getNombre());
    des.writeString(getEmail());
    des.writeString(getTel());

}

public static final Parcelable.Creator<Persona> creator = new Creator<Persona>() {

    public Persona createFromParcel(Parcel source) {

        return new Persona(source);
    }

    public Persona[] newArray(int size) {

        return new Persona[size];
    }

}; 
```

}

还有我的活动代码（此活动检索带有我刚刚指定的类型的 ArrayList 的意图）

```
public class Contacts extends Activity {

private ArrayAdapter<String> names;
private Intent intent;
private ArrayList<String>nameList;
private ListView list;

public Contacts() {
    intent = new Intent();
    nameList = new ArrayList<String>();
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contacts);
    setIntent(getIntent());
    iterateContacts();
    names = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, getNameList());
    getList().setAdapter(getNames());
}

public void iterateContacts(){

    ArrayList<Persona> aux = GetIntent().getParcelableArrayListExtra("contactList");

    for(int i = 0; i<aux.size(); i++){

        String name = aux.get(i).getNombre();
        getNameList().add(name);
    }
}

public ArrayAdapter<String> getNames() {
    return names;
}

public void setNames(ArrayAdapter<String> names) {
    this.names = names;
}

public Intent GetIntent() {
    return intent;
}

public void setIntent(Intent intent) {
    this.intent = intent;
}

public ArrayList<String> getNameList() {
    return nameList;
}

public void setNameList(ArrayList<String> nameList) {
    this.nameList = nameList;
}

public ListView getList() {
    return list;
}

public void setList(ListView list) {
    this.list = list;
} 
```

}

日志猫：

```
E/AndroidRuntime(861): FATAL EXCEPTION: main
09-10 02:39:10.738: E/AndroidRuntime(861): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.take2/com.take2.Contacts}: android.os.BadParcelableException: Parcelable protocol requires a Parcelable.Creator object called  CREATOR on class com.take2.Persona
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.os.Looper.loop(Looper.java:137)
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-10 02:39:10.738: E/AndroidRuntime(861):  at java.lang.reflect.Method.invokeNative(Native Method)
09-10 02:39:10.738: E/AndroidRuntime(861):  at java.lang.reflect.Method.invoke(Method.java:511)
09-10 02:39:10.738: E/AndroidRuntime(861):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-10 02:39:10.738: E/AndroidRuntime(861):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-10 02:39:10.738: E/AndroidRuntime(861):  at dalvik.system.NativeStart.main(Native Method)
09-10 02:39:10.738: E/AndroidRuntime(861):  at com.take2.Contacts.onCreate(Contacts.java:28)
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.app.Activity.performCreate(Activity.java:5008)
09-10 02:39:10.738: E/AndroidRuntime(861):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T10:11:17.557

改变这个：

```
public static final Parcelable.Creator<Persona> creator = new Creator<Persona>() { 
```

对此：

```
public static final Parcelable.Creator<Persona> CREATOR = new Creator<Persona>() { 
```

编辑：

看起来您的 getList() 也返回 null，因为在 onCreate 结束之前未设置它：

```
getList().setAdapter(getNames()); 
```

没看到您是否对其进行了初始化，这可能是原因吗？

# android - 打开 tabhost 活动时出现 NullpointerException

> ID：12348632
> 
> 赞同：0
> 
> 时间：2012-09-10T09:17:02.980
> 
> 标签：android

我正在开发一个应用程序，我从列表菜单移动到 tabhost 活动，即

Menu.class -> Recharge.class 其中 Recharge.class 是一个 TabActivity 有一个名为 prepaid.class 的选项卡

我需要在下面的代码中将一个字符串从 menu.class 传递给 prepaid.class 我传递了字符串请在我的代码中找到错误并帮助我

菜单类

```
 if(s.equals("Recharge"))
        {
            Intent i = new Intent(menu.this,recharge.class);
            i.putExtra("app",app);
            startActivity(i);

        } 
```

充值班

```
Intent i = this.getIntent();            
    final String app=(String)i.getStringExtra("app");
   Resources res = getResources(); 
    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec; 
    Intent intent;

    intent = new Intent().setClass(this, prepaid.class);
    intent.putExtra("app", app);

    //Prepaid
    spec = tabHost.newTabSpec("PREPAID").setIndicator("",
                      res.getDrawable(R.drawable.prepaid))
                  .setContent(intent);
    tabHost.addTab(spec);
    tabHost.getTabWidget().getChildAt(0).setBackgroundResource(R.drawable.tabhost); 
```

预付费类

```
Intent i=this.getIntent();
final String app=(String)i.getStringExtra("app"); 
```

**这是日志中的错误：**

```
09-10 14:37:44.038: E/AndroidRuntime(1172): FATAL EXCEPTION: main
09-10 14:37:44.038: E/AndroidRuntime(1172): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ezerecharge/com.example.ezerecharge.recharge}: java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.ezerecharge/com.example.ezerecharge.prepaid}: java.lang.NullPointerException
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.os.Looper.loop(Looper.java:123)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread.main(ActivityThread.java:3683)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at java.lang.reflect.Method.invokeNative(Native Method)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at java.lang.reflect.Method.invoke(Method.java:507)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at dalvik.system.NativeStart.main(Native Method)
09-10 14:37:44.038: E/AndroidRuntime(1172): Caused by: java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.ezerecharge/com.example.ezerecharge.prepaid}: java.lang.NullPointerException
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1487)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.widget.TabHost.setCurrentTab(TabHost.java:326)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.widget.TabHost.addTab(TabHost.java:216)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at com.example.ezerecharge.recharge.onCreate(recharge.java:33)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-10 14:37:44.038: E/AndroidRuntime(1172):     ... 11 more
09-10 14:37:44.038: E/AndroidRuntime(1172): Caused by: java.lang.NullPointerException
09-10 14:37:44.038: E/AndroidRuntime(1172):     at com.example.ezerecharge.prepaid.<init>(prepaid.java:22)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at java.lang.Class.newInstanceImpl(Native Method)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at java.lang.Class.newInstance(Class.java:1409)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
09-10 14:37:44.038: E/AndroidRuntime(1172):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:45:18.583

您在构造函数中调用 getIntent 。在调用 onCreate 之前不能使用它。

将您的初始化代码从 prepaid.onCreate 中的 prepaid 移动。

并以大写字母开头您的班级名称。请。

# jsf - primefaces 单元内编辑控件不更新数据库中的数据

> ID：12348635
> 
> 赞同：0
> 
> 时间：2012-09-10T09:17:15.770
> 
> 标签：jsf, primefaces

```
@Named(value = "viewtable")
@ManagedBean
@ViewScoped
public final class viewtable implements Serializable {

    ArrayList<viewbean> dlist = new ArrayList<viewbean>();
    ArrayList<Master> mlist = new ArrayList<Master>();

    public ArrayList<viewbean> getDlist() {
        return dlist;
    }

    public viewtable()  {
        get();
    }

    public void get() {
        try
        {
            InitialContext ic = new InitialContext();
            DataSource ds = (DataSource) ic.lookup("jdbc/mydsn");
            Connection con = ds.getConnection();

            PreparedStatement ps=con.prepareStatement("select * from master");
            ResultSet rs=ps.executeQuery();

            while(rs.next())
            {
                dlist.add(new viewbean(rs.getString(1), rs.getString(2),rs.getString(3),rs.getString(4),rs.getDate(5), rs.getString(6), rs.getBytes(7), rs.getString(8),rs.getString(9),rs.getString(10),rs.getString(11),rs.getDate(12),rs.getDate(13),rs.getString(14),rs.getString(15), rs.getString(16)));
            }
        }catch(Exception ex)
        {
            System.out.println("Conncetion pool db error-> "+ex);
        }
    }

    public void onEdit(RowEditEvent event) {
    }
} 
```

上面的代码没有更新数据库中的数据，`get()`方法是我做错了什么以及如何使用PrimeFaces连接数据库。
我使用托管 bean 将数据库中的详细信息保存为名为`mlist`.

JSF：

```
<h:form id="dtform">
    <p:growl showDetail="true" id="mess"/>
    <p:dataTable id="dt1" scrollable="true" scrollWidth="700" var="mas"  value="#{viewtable.dlist}" editable="true">
        <f:facet name="header">
            Edit Here
        </f:facet>
        <p:column headerText="Regno" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText  value="#{mas.regno}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.regno}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Rollno" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.rollno}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.rollno}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Firstname" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.fname}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.fname}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Lastname" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.lname}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.lname}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="D.O.B" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.dob}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.dob}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Address" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.address}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.address}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Avatar" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.avatar}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.avatar}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Email" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.email}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.email}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Phno" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.phno}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.phno}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Dept" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.dept}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.dept}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Year" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.year}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.year}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Start" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.inidate}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.inidate}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="End" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.enddate}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.enddate}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Remarks" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.remarks}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.remarks}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Delivery" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.delivery}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.delivery}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Message" width="100">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{mas.messdelivery}"/>
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{mas.messdelivery}"/>
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Options" width="100">
            <p:rowEditor/>
        </p:column>
        <p:ajax event="rowEdit" listener="#{viewtable.onEdit}" update=":dtform:mess"/>
    </p:dataTable>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:02:58.277

我假设你已经在你的环境中配置了休眠，并将你的数据库映射到一个实体类。您可以相应地更新记录。

您可以访问行并更新记录，例如：

```
 public void onEdit(RowEditEvent event) {  
            YourHibernateEntity yourEntity = (YourHibernateEntity ) event.getObject());  
            SessionFactory sessFact = new AnnotationConfiguration().configure().buildSessionFactory();    
        Session sess = sessFact.openSession();
        Transaction  tran = sess.beginTransaction();
        sess.update(yourEntity );
        tran.commit();      

        } 
```

# c# - C# - 将 GridView 对象作为参数传递是一种好习惯吗？

> ID：12348640
> 
> 赞同：0
> 
> 时间：2012-09-10T09:17:49.827
> 
> 标签：c#, gridview, parameter-passing

目前，我几乎没有接受`GridView`对象作为参数的方法，并且`GridView`正在访问对象中的值以执行计算。

我的问题是这是否是一个好习惯？我注意到，当我需要更改结果显示时（即`GridView`最初将有 9 个单元格而不是 10 个单元格的结果），我需要更改所有使用它的方法，否则可能会`ArrayIndexOutOfBound`出错。

例子

```
public static string checkCount(GridView gr)
{
     //need to change the cell index if the sql to get the gridview is changed
     string name = gr.Rows[b].Cells[9].Text.ToUpper(); 
} 
```

对此有什么想法吗？

谢谢

**编辑**
最好有一种方法将 sql 结果映射到对象列表中，其中对象本身是数据行的表示。这样即使我删除了一个列，我只需要处理映射方法本身，其他的应该按照规范运行。

例子：

```
public class Profile{
    string name {get;set;}
    string icNo {get;set;}
}

public list getProfileList(){
    //run some query here and loop the result
    //while looping
    profile = new Profile(name=/*the name result*/, icNo=/*icNo from result*/ );
    //return the list
} 
```

页面加载

```
List profiles = getProfileList();
gv.DataSource = profiles;
gv.DataBind();

public string calculationMethod(List profiles){
    //when in need of the result, just get the object from profiles and process
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:37:53.560

> 对象作为参数，并且正在访问 GridView 对象中的值以执行计算

价值观从何而来？我认为更好的做法是直接在您的数据/业务对象或仅负责此特定计算的帮助对象上执行计算。然后你可以有另一个函数从这个帮助对象而不是你的 BO 或其他东西动态创建结果视图。

> 将有 9 个单元格而不是最初的 10 个单元格的结果

这正是您不应该直接使用单元格进行计算的原因。如果你真的需要这样做，那么你应该寻找另一种方法来找到计算的索引。它们可能取决于实际的结果对象。（其中您的值也可以出现在特定的数据类型中；仅用于可视化和用户输入，应转换为字符串或类似的）

一般来说，要解决这个问题，您应该清楚地分析您的需求是什么。保留一些东西，例如：

*   [http://en.wikipedia.org/wiki/Single_responsibility_principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)
*   [http://en.wikipedia.org/wiki/Separation_of_concerns](http://en.wikipedia.org/wiki/Separation_of_concerns)

也可以考虑为您的应用程序使用 n-Tier 模型

*   [http://en.wikipedia.org/wiki/Multitier_architecture](http://en.wikipedia.org/wiki/Multitier_architecture)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T21:40:58.453

转换`<asp:BoundField>`为`<asp:TemplateField>`：

```
<asp:TemplateField HeaderText="name" SortExpression="DateCreated">
      <ItemTemplate>
             <asp:label id="LbMyName" text="" runat="server">
      </ItemTemplate>
</asp:TemplateField> 
```

现在您可以从后面的代码中调用：

```
Label lb = GridView1.Rows[i].FindControl("LbMyName"); 
```

# html - 显示为按钮的Css 样式

> ID：12348643
> 
> 赞同：1
> 
> 时间：2012-09-10T09:18:05.630
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T09:26:22.917

采用;

```
a{
  appearance: button; /* CSS3 */    
  -webkit-appearance: button; /* Safari and Chrome */
  -moz-appearance: button; /* Firefox */
  -ms-appearance: button; /* Internet Explorer */
  -o-appearance: button; /* Opera */
  cursor: default;
} 
```

***[这](http://jsfiddle.net/blasteralfred/suw8R/5/)***是一个现场演示

这是一个 CSS3 属性。参考下表；

![桌子](../Images/d094fe6475beb14e44b1a03ff156aff7.png)

如果你想要一个看起来完全像一个按钮的 CSS 按钮，而不是使用 CSS3，这有点难以**[实现](http://www.oscaralexander.com/tutorials/how-to-make-sexy-buttons-with-css.html)**HTML 按钮，好吧，您可以使用看起来像这样的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:25:28.387

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:32:27.717

您可以将以下 CSS 用于锚点：

```
a {
     appearance:button; /* For Good Browsers */
     -moz-appearance:button; /* For Firefox */
     -webkit-appearance:button; /* For Safari and Chrome */

     padding: 5px 15px; 
     color: #000;
     text-decoration: none;
}​ 
```

[**看演示**](http://jsfiddle.net/akhurshid/zFnXn/)

# visual-studio - 通过 MSBuild 构建不同平台的 Visual Studio 项目

> ID：12348645
> 
> 赞同：4
> 
> 时间：2012-09-10T09:18:10.107
> 
> 标签：visual-studio, msbuild, platform

我有 3 个配置项目：

*   项目 A：调试|AnyCPU，发布|AnyCPU
*   项目 B：调试|AnyCPU，发布|AnyCPU
*   项目 C：调试|x86、调试|x64、发布|x86、发布|x64

项目 C 在依赖项中有 B，而 B 在依赖项中有 A。（A <- B <- C）

我使用 *.bat 文件从命令行构建它：

```
msbuild A.csproj /target:Build /property:Configuration=Debug;Platform=AnyCPU /verbosity:minimal
msbuild A.csproj /target:Build /property:Configuration=Release;Platform=AnyCPU /verbosity:minimal<br/>
msbuild B.csproj /target:Build /property:Configuration=Debug;Platform=AnyCPU /verbosity:minimal
msbuild B.csproj /target:Build /property:Configuration=Release;Platform=AnyCPU /verbosity:minimal
msbuild C.csproj /target:Build /property:Configuration=Debug;Platform=x86 /verbosity:minimal
msbuild C.csproj /target:Build /property:Configuration=Release;Platform=x86 /verbosity:minimal
msbuild C.csproj /target:Build /property:Configuration=Debug;Platform=x64 /verbosity:minimal
msbuild C.csproj /target:Build /property:Configuration=Release;Platform=x64 /verbosity:minimal 
```

并收到错误：

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(609,5)：错误：未为项目“A.csproj”设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='调试'平台='x86'。您可能会看到此消息，因为您正在尝试构建没有解决方案文件的项目，并且指定了该项目不存在的非默认配置或平台。[A.csproj] C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(609,5)：错误：未为项目“B.csproj”设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='调试' 平台='x86'。您可能会看到此消息，因为您正在尝试构建没有解决方案文件的项目，并且指定了该项目不存在的非默认配置或平台。[B.csproj]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:13:16.310

我找到了解决我的问题的方法。使用 *.csproj 文件中的选择元素通过 Visual Studio 或通过 MSBuild 检测构建，并为 MSBuild 使用 Reference（而不是 ProjectReference）。

```
<Choose>
  <When Condition="'$(BuildingInsideVisualStudio)' == 'true'">
    <ItemGroup>
      <ProjectReference Include="A.csproj">
        <Project>{AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA}</Project>
        <Name>A</Name>
        <Private>True</Private>
      </ProjectReference>
      <ProjectReference Include="B.csproj">
        <Project>{BBBBBBBB-BBBB-BBBB-BBBB-BBBBBBBBBBBB}</Project>
        <Name>B</Name>
        <Private>True</Private>
      </ProjectReference>
    </ItemGroup>
  </When>
  <Otherwise>
    <ItemGroup>
      <Reference Include="A, Version=1.0.0.0, Culture=neutral, PublicKeyToken=xxxxxxxxxxxxxxxx, processorArchitecture=MSIL">
        <HintPath>A.dll</HintPath>
        <Private>True</Private>
      </Reference>
      <Reference Include="B, Version=1.0.0.0, Culture=neutral, PublicKeyToken=xxxxxxxxxxxxxxxx, processorArchitecture=MSIL">
        <HintPath>B.dll</HintPath>
        <Private>True</Private>
      </Reference>
    </ItemGroup>
  </Otherwise>
</Choose> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T20:35:41.697

如果您在解决方案文件中定义自定义构建配置，则可以完成这项工作。

在 Visual Studio 中打开解决方案，然后打开解决方案的配置管理器。在活动解决方案平台下拉列表中，将有一个`<New...>`选项允许您为解决方案创建 x86 和 x64 平台。创建它们后，在同一个下拉列表中选择每一个，并确保在列表中您`Any CPU`的项目 A 和 B 以及项目 C 已相应选择 x86 或 x64。还要确保选中 Build 复选框。

现在将活动解决方案配置切换到发布，并以相同的方式定义这些额外的平台。

完成此操作后，您将能够构建所有 3 个项目，仅在 MSbuild 命令行中指定解决方案文件：

```
msbuild ABC.sln /target:Build /property:Configuration=Debug;Platform=x86 /verbosity:minimal
msbuild ABC.sln /target:Build /property:Configuration=Release;Platform=x86 /verbosity:minimal
msbuild ABC.sln /target:Build /property:Configuration=Debug;Platform=x64 /verbosity:minimal
msbuild ABC.sln /target:Build /property:Configuration=Release;Platform=x64 /verbosity:minimal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T07:25:24.637

您可以尝试从命令行使用[devenv.exe构建项目。](https://msdn.microsoft.com/en-us/library/xee0c8y7.aspx)我认为这不会有您遇到的问题，但我记得有关此构建选项的一些内容将被弃用，并且有时会无缘无故地挂起。我把它写成一个选项，只是因为其他两个对我也不好。

# internet-explorer - Internet Explorer Mobile 中的链接

> ID：12348649
> 
> 赞同：1
> 
> 时间：2012-09-10T09:18:16.753
> 
> 标签：internet-explorer, asp.net-mvc-2, jquery-mobile, windows-mobile

我正在使用 jQuery mobile 开发移动网站问题是链接在 Internet Explorer 移动中不起作用

```
<a rel="external" href="http://www.external-site.com" title="" class="ui-link" style="text-decoration: none; "> 
```

这就是我尝试过的链接的外观：

```
<a data-role="none" href="http://www.external-site.com" title="" class="ui-link" style="text-decoration: none; "> 
```

我想知道到外部域的链接应该如何在 Windows 移动 Internet Explorer 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:38:02.913

尝试像这样链接页面：

```
<a data-role="none" href="http://www.google.com" class="ui-link" rel="external"  style="text-decoration: none; ">Multi-page link</a> 
```

在 jQuery 移动文档中有一个关于链接页面的章节。你读过那些吗？
[http://jquerymobile.com/demos/1.0a4.1/docs/pages/link-formats.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/link-formats.html)

[http://jquerymobile.com/test/docs/pages/page-links.html](http://jquerymobile.com/test/docs/pages/page-links.html)

基于这个问题： [jquery Mobile urls add # tag which breaks forms in Internet Explorer](https://stackoverflow.com/questions/9737925/jquery-mobile-urls-add-tag-which-breaks-forms-in-internet-explorer)
Setting data-ajax="false" 应该会有所帮助。

# java - Java中有没有好的计数布隆过滤器实现？

> ID：12348651
> 
> 赞同：2
> 
> 时间：2012-09-10T09:18:27.003
> 
> 标签：java, bloom-filter

我正在寻找 Java 中的 Counting Bloom Filter 实现。我找到了[Hadoop 实现](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/util/bloom/CountingBloomFilter.html)，但据我所知，它缺乏增加和减少成员数量的功能。如果它也实现了 Java Set 接口，这将是一个不错的功能，但不是必须的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-25T00:15:50.360

找到这个[Apache Hadoop CountingBloomFilter](https://hadoop.apache.org/docs/current/api/org/apache/hadoop/util/bloom/CountingBloomFilter.html)。

我倾向于信任 Apache 的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:47:20.533

[来自谷歌项目的java Bloom过滤器](http://code.google.com/p/java-bloomfilter/)

# editor - 如果我想将/usr/share/vim/vim71 移动到其他路径，我可以更改 VIMRUNTIM 吗？

> ID：12348664
> 
> 赞同：0
> 
> 时间：2012-09-10T09:18:49.623
> 
> 标签：editor, vim, vim-plugin

如果是，如何更改此类变量？

我应该修改vimrc吗？但是 vimrc 在 $VIMTIME 中，如果我更改了它，vim 如何找到它？

我可能有很多 VIMRUNTIME 的副本，我希望我可以轻松地切换到不同的 VIMRUNTIME，如何做到这一点。

这里有人尝试过这样做吗？

顺便说一句，$VIMRUNTIME 中有很多 .vim 文件，它们都是 vim 插件吗？.vim 文件都是用 vimscript 编写的吗？vimscript 能做什么，不能做什么？为什么不是所有的 vim 插件都使用 .vim 实现？因为我发现一些 vim 插件也使用脚本语言，如 perl 或 python ......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:40:26.177

血淋淋的细节记录在下面`:help startup`，但您很少需要修改`$VIMRUNTIME`。你没有提到你为什么要这样做，但这可能是一个坏主意。

如果您不想`VIMRUNTIME`在启动 Vim 的 shell 中设置环境变量，您可以在特定用户`~/.vimrc`（通过`:let $VIMRUNTIME = '/path/to/it'`）中修改它，因为该变量在系统范围配置之前被读取。

运行时文件包含帮助文档、默认配置、文件类型检测和语法突出显示。您[可以](http://www.vim.org)在`~/.vim/...`. 正如我所说，没有必要搞乱系统范围的运行时；这是由系统的包管理管理的。

# jquery - 如何在 drupal 6 中将 jquery 更新到 v1.7.2

> ID：12348665
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:18:54.973
> 
> 标签：jquery, drupal

我想在我的 drupal v6 网站中使用需要 jquery v1.7.2 的 jquery 插件。我用这个版本的 jquery 替换了 drupal 的 jquery，但是网站的某些部分不能使用它。例如视图似乎有问题。有没有办法在 drupal 6 中升级 jquery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:20:33.557

您可以使用主题的 .info 文件链接 jquery 1.7（请参阅脚本部分下的[http://drupal.org/node/171205 ）。](http://drupal.org/node/171205)如果您使用官方 jquery，则可以使用 $ 访问它。Drupal 的 jquery 可以使用 jQuery 访问，因为它使用 .noConflict（请参阅[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)）

所以基本上把新的jquery放到你主题的.info文件中，它可以使用$访问，所有drupal仍然会使用“jQuery”函数使用旧的jquery。

我主要使用drupal 7，但我知道它也应该使用D6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:23:47.200

在 Drupal 官方页面中查看**[Using Newer Versions of jQuery](http://drupal.org/node/1058168)**。

# mysql - 计算从 2 个单独的内联选择语句中获取的值

> ID：12348668
> 
> 赞同：2
> 
> 时间：2012-09-10T09:19:07.703
> 
> 标签：mysql, sql

我有一个已简化并写在下面的查询。如何显示作为 2 个单独的内联选择语句计算的 2 个字段的时间差？

```
SELECT x.name ,
   ( SELECT data.ts 
     FROM data 
     WHERE prim_key = x.prim_key and roll_no ='1'  
 ) **starttime** ,
  ( SELECT data.ts 
    FROM woman_data 
    WHERE prim_key = x.prim_key and roll_no ='10'

) **endtime**
, **TIME_TO_SEC( TIMEDIFF( endtime , starttime)** as timediff // This line does not work.It cannot recognize endtime ans starttime
FROM data x 
     INNER JOIN  y 
ON x.prim_key = y.prim_key
ORDER BY x.prim_key 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:22:02.507

将查询更改为“外层”的最简单方法：

```
SELECT
name,
starttime,
endtime,
TIME_TO_SEC( TIMEDIFF( endtime , starttime)) as timediff
FROM(
 SELECT
 x.prim_key,
 x.name ,
   ( SELECT data.ts 
     FROM data 
     WHERE prim_key = x.prim_key and roll_no ='1'  
 ) starttime ,
  ( SELECT data.ts 
    FROM woman_data 
    WHERE prim_key = x.prim_key and roll_no ='10'

) endtime

FROM data x 
     INNER JOIN  y 
ON x.prim_key = y.prim_key
) n
ORDER BY n.prim_key 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:24:40.773

试试这个：

starttime 和 endtime 是派生列，您不能在同一个 select 语句中使用它。您必须创建派生表，然后在外部查询中使用这些列

```
select name,starttime,endtime,TIME_TO_SEC( TIMEDIFF( endtime , starttime) as timediff
from(
SELECT x.name ,
   ( SELECT data.ts 
     FROM data 
     WHERE prim_key = x.prim_key and roll_no ='1'  
 ) starttime ,
  ( SELECT data.ts 
    FROM woman_data 
    WHERE prim_key = x.prim_key and roll_no ='10'

) endtime

FROM data x 
     INNER JOIN  y 
ON x.prim_key = y.prim_key)a
ORDER BY x.prim_key 
```

# java - 使用 flex monkey 和 selenium 自动化 flex 应用程序的步骤

> ID：12348670
> 
> 赞同：1
> 
> 时间：2012-09-10T09:19:11.400
> 
> 标签：java, apache-flex, selenium, flex-monkey

我正在尝试使用 Flex Monkium 和 selenium 自动化示例 Flex 应用程序。步骤和示例应用程序（MonkeyContacts）在 gorilla logic 站点[http://www.gorillalogic.com/testing-tools/flexmonkium/flexmonkium-docs/using-flexmonkium](http://www.gorillalogic.com/testing-tools/flexmonkium/flexmonkium-docs/using-flexmonkium)中给出。完成上述应用程序中的步骤后，我能够使用 Selenium IDE 记录测试，并能够使用 Eclipse 和 TestNG 运行这些测试。

但是，当我尝试在其他应用程序（[http://learn.adobe.com/wiki/display/Flex/Download+Projects](http://learn.adobe.com/wiki/display/Flex/Download+Projects)）中执行相同的步骤时，无法记录测试。Flex Monkey 和 Selenium 之间没有交互。我添加了automation-monkey.swc 并添加了附加编译器参数。

如何使应用程序与硒交互..？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T10:29:53.780

大猩猩逻辑已经美化了flex猴子自动化的所有相关步骤，我会说你再看一遍。[Flex 猴子文档](http://www.gorillalogic.com/node/333)

除此之外，请始终确保

1.  Flex monkium 控制台图标变为绿色（如果未**正确**编译，请检查编译器参数。

2.  使用 Firefox 10 或更低版本。Selenium 与更高版本不兼容。

# java - String Arraylist 获取以该字符串开头的项目

> ID：12348673
> 
> 赞同：7
> 
> 时间：2012-09-10T09:19:13.523
> 
> 标签：java, android

我有一个绑定数据的数组列表 这是一个例子

```
MyStrings =new ArrayList<String>();
MyStrings.add("Dog");
MyStrings.add("Cat");
MyStrings.add("Can");
MyStrings.add("Ant");
MyStrings.add("Str"); 
```

现在我有一个字符串`String sweet="c";` 现在 OI 想要的是根据我的字符串（甜）过滤该 Arraylist，因此 MyStrings 的项目将只有 Cat 和 Can

**编辑** 我真的很抱歉给你带来麻烦，但我的主要问题是甜蜜是可编辑的，我尝试使用此代码

```
 public void onTextChanged(CharSequence s, int start, int before,int count) {  
        //adapter2.getFilter().filter(s);
        //int length = filterEditText.getText().length();
        filterME  = filterEditText.getText();
        List<String> MySortStrings =new ArrayList<String>();
        for(int i=0;i<MyStrings.size();i++)
        {
            String newString = MyStrings.get(i);
            if (newString.startsWith(filterME)){

            }
        }
        //adapter2 = new LazyAdapterGetFriends(MyFriends.this,x);
         //list.setAdapter(adapter2);
    } 
```

使用这个声明

```
 LazyAdapterGetFriends adapter2;
ArrayList<String> MyStrings;
//List<String> MyStrings;
EditText filterEditText; 
```

对不起我的错误问题..愚弄我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T09:23:32.840

```
List<String> MyStrings =new ArrayList<String>();
List<String> MySortStrings =new ArrayList<String>();
MyStrings.add("Dog");
MyStrings.add("Cat");
MyStrings.add("Can");
MyStrings.add("Ant");
MyStrings.add("Str");
String sweet="c";
for(int i=0;i<MyStrings.size();i++)
{
    if(MyStrings.get(i).startsWith(sweet.toUpperCase()))
    {
        MySortStrings.add(MyStrings.get(i));
    }
}

System.out.println(MySortStrings.size()); 
```

该列表`MySortStrings`包含**Cat & Can**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:24:09.823

天真的算法将是您只需像这样过滤掉所有内容：

```
ArrayList<String> filtered = new ArrayList<String>();
for(String s : MyStrings){
if(s.substring(0,1).toLowerCase().equals("c")){
filtered.add(s);
}
} 
```

但是你有 O(n) 的访问时间。

如果您需要更快的方法，您可能需要使用 Key,Value 结构，并将 Key 设置为您需要过滤的字符串。甚至是[http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)，您可以在其中轻松过滤字符串中的每个字符。但是你将需要额外的时间来建立这个东西。

好的，这应该是使用 TextWatcher Stuff 时的内容（未经测试...）

```
 private List<String> MySortStrings = new ArrayList<String>(); // assume that your data is in here!
  private List<String> MySortedStrings = new ArrayList<String>(); // this will be the list where your sorted strings are in. maybe you could also remove all strings which does not match, but that really depends on your situation!

  public void onTextChanged(CharSequence s, int start, int before,int count) {  
    for(String str : MySortStrings){
        if(str.startsWith(s.toString()){
            MySortedStrings.add(str);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:25:56.973

使用 str.startsWith(String, int index)

索引会告诉你应该从 str 中的哪个索引开始比较

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-10T12:05:33.417

如今，您还可以使用流轻松地做到这一点：

```
stringList.stream().filter(s -> s.contains("c")).collect(Collectors.toList()) 
```

当您只需要知道列表中是否有包含您的字母的字符串（不是问题的一部分但非常有用）时，您可以这样做：

```
stringList.stream().anyMatch(s -> s.contains("c")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T09:31:06.093

如果要删除不匹配的项目`MyStrings`而不是创建新项目，`ArrayList`则需要使用[an`Iterator`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)`ArrayList` ，因为这是在迭代它时修改 a 的唯一安全方法。

```
myStrings = new ArrayList<String>();
myStrings.add("Dog");
myStrings.add("Cat");
myStrings.add("Can");
myStrings.add("Ant");
myStrings.add("Str");
String sweet="c";

sweet = sweet.toLowerCase();
Iterator<String> i = myStrings.iterator();

while (i.hasNext()) {
  if (! i.next().toLowerCase().startsWith(sweet)) {
    i.remove();
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T14:24:38.080

您也可以使用 apache commons-collections 库：

```
CollectionUtils.filter(myStrings,
  new Predicate() {
    public boolean evaluate(Object o) {
       return !  ((String)o).startsWith("c");
    }
  }
}; 
```

Predicate 类的“evaluate”方法返回 false 的任何对象都将从集合中删除。请记住，就像上面使用迭代器的解决方案一样，这对给出的列表具有破坏性。如果这是一个问题，您总是可以先复制列表：

```
List<String> filtered = new ArrayList<String>(myStrings);
CollectionUtils.filter(filtered, ...); 
```

# php - 用正则表达式解析网站

> ID：12348675
> 
> 赞同：0
> 
> 时间：2012-09-10T09:19:24.393
> 
> 标签：php, regex

我有一个任务来解析[http://www.olx.in/cars-cat-378](http://www.olx.in/cars-cat-378)以使用正则表达式获取汽车、位置和价格。我看到很多帖子都暗示正则表达式不适合解析网页，但至少这次我仍然必须使用它。我已经尝试过如下所示的方式。但这不起作用。

```
<?php

 /**
 * Initialize the cURL session
 */
 $ch = curl_init();

 /**
 * Set the URL of the page or file to download.
 */
 curl_setopt($ch, CURLOPT_URL, 'http://www.olx.in/cars-cat-378');

 /**
 * Ask cURL to return the contents in a variable instead of simply echoing them to  the browser.
 */
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

 /**
 * Execute the cURL session
 */
 $contents = curl_exec($ch);
 /*
  print the $contents variable
 */
 $reg='/<div class="li .*?"><div class="row clearfix"><div class="c-1 table-cell"><div class="cropit">.*?<\/div><\/div><div class="second-column-container  table-cell"><h3><a .*?>(.*?)<\/a><\/h3><div class="c-4"><span>(.*?)<\/span> - <span>(.*?)<\/span> - <span>(.*?)<\/span> - <span>(.*?)<\/span><\/div><span class="itemlistinginfo clearfix"><a .*?>(.*?)<\/a><\/span><div .*?><\/div><\/div><div class="third-column-container table-cell">(.*?)<\/div><div class="fourth-column-container table-cell">(.*?)<\/div><\/div><\/div>/';

 preg_match($reg,$contents,$result);

 var_dump($result);

 /**
 * Close cURL session
 */
 curl_close ($ch);

?> 
```

页面每个列表项的html如下----

```
<div class="li even">
       <div class="row clearfix">
           <div class="c-1 table-cell">
                <div class="cropit">
                    <a class="pics-lnk" href="http://newdelhi.olx.in/honda-prelude-2-door-sports-car-for-sale-iid-437128570">
                        <img src="http://images04.olx-st.com/ui/14/85/70/t_1347220402_437128570_4.jpg" width="111"
                            alt="HONDA PRELUDE,,2 DOOR ,,SPORTS CAR FOR SALE." title="HONDA PRELUDE,,2 DOOR ,,SPORTS CAR FOR SALE. - India"
                            height="83" style="margin-top:0px;" />
                    </a>
                </div>
            </div>
            <div class="second-column-container  table-cell">
        <h3>
        <a href="http://newdelhi.olx.in/honda-prelude-2-door-sports-car-for-sale-iid-437128570"  title="HONDA PRELUDE,,2 DOOR ,,SPORTS CAR FOR SALE. - India">
        HONDA PRELUDE,,2 DOOR ,,SPORTS CAR FOR SALE.</a>
        </h3>

        <div class="c-4">
        <span>Year: 1996</span> - <span>Make: Honda</span> - <span>Model: Prelude</span> - <span>66,400.00 km</span>    </div>
        <span class="itemlistinginfo clearfix">
        <a href="http://newdelhi.olx.in/cars-cat-378">Cars - Delhi</a>    </span>

        <div style="display:none;" class="fbfriends_loadme" id="fbfriends_loadme_437128570" rel="5656149"></div>

            </div>            
            <div class="third-column-container table-cell">
                                    à¤° 2,65,000.00                              </div>
            <div class="fourth-column-container table-cell">
                                    Yesterday, 15:53                            </div>            
        </div>
    </div> 
```

我使用的正则表达式是-----

```
/<div class="li .*?"><div class="row clearfix"><div class="c-1 table-cell"><div class="cropit">.*?<\/div><\/div><div class="second-column-container  table-cell"><h3><a .*?>(.*?)<\/a><\/h3><div class="c-4"><span>(.*?)<\/span> - <span>(.*?)<\/span> - <span>(.*?)<\/span> - <span>(.*?)<\/span><\/div><span class="itemlistinginfo clearfix"><a .*?>(.*?)<\/a><\/span><div .*?><\/div><\/div><div class="third-column-container table-cell">(.*?)<\/div><div class="fourth-column-container table-cell">(.*?)<\/div><\/div><\/div>/' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:44:28.523

问题是如果您正在解析的源代码包含空格，您将无法匹配它。你应该时不时地洒`\s*?`。

这同样适用于您的`<a .*?>(.*?)<\/a>`街区。`.`匹配空格字符，但不匹配换行符。使用`<a .*?>\s*?(.*?)\s*?<\/a>`. 每当您跳过一个大块时，`.*?`都不会这样做。请改用`[\s\S]*?`（空白或非空白）。

第三，你正在使用`preg_match`，它只给你一个元素。你应该使用[`preg_match_all`](http://php.net/manual/en/function.preg-match-all.php)

# java - 获取压缩文件的输入流？

> ID：12348676
> 
> 赞同：0
> 
> 时间：2012-09-10T09:19:29.297
> 
> 标签：java

是否可以从压缩文件中获取文件作为 InputStream？我这里只知道这个：[如何从远程存档文件中提取单个文件？](https://stackoverflow.com/questions/3125841/how-to-extract-a-single-file-from-a-remote-archive-file)这给了我文件的字节。

那么是否有任何功能可以使用这样的方法：压缩文件中的路径在哪里`InputStream getFile(String path, File zipFile)`？`path`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:24:55.170

您可以使用[ByteArrayInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayInputStream.html)，它将字节数组作为构造函数中的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:26:39.590

试试这个：

```
ZipFile zf = new ZipFile(file);
try {
  InputStream in = zf.getInputStream(zf.getEntry("file.txt"));
  // ... read from 'in' as normal
} finally {
  zf.close();
} 
```

有关更多信息，请参阅[本教程](http://www.javamex.com/tutorials/compression/zip.shtml)。

# ruby-on-rails - TypeError：尝试输入谷歌驱动器的授权码时无法将字符串转换为整数

> ID：12348677
> 
> 赞同：0
> 
> 时间：2012-09-10T09:19:29.687
> 
> 标签：ruby-on-rails, google-drive-api

我正在使用rails3。我正在尝试将 google drive api 集成到我的 Web 应用程序中，为此，我从[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)获得了帮助，并提供了快速启动的步骤。通过运行上面链接上给出的代码，提示我输入“输入授权代码：”，当我浏览到链接后复制给定代码并将其粘贴到提示中时，会出现错误 -

irb(main):001:0> 加载“quickstart.rb”

输入授权码：4/-_vOHLDz41uMtZdUwX6hTMnU0cS5.kgigQXxSey4SgrKXntQAax1ih81ecwI

TypeError：无法将字符串转换为整数

我尝试将代码放入单/双引号但给出无效的授权代码。

任何人都可以帮助我吗？

比你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:35:13.677

API 客户端 0.4.5 有一个错误会破坏媒体上传，升级到 0.4.6 或降级到 0.4.4

# c# - 如何将 .evtx 事件日志转换为 csv

> ID：12348679
> 
> 赞同：6
> 
> 时间：2012-09-10T09:19:37.230
> 
> 标签：c#, event-log

我的 Windows 服务需要将一个事件日志的内容保存到一个文件中。这是由 EventLogSession.ClearLog 完成的。但是，我不能强制它直接将事件日志保存到 CSV。保存的格式为 EVTX。

```
 EventLogSession els = new EventLogSession();

            //stel de filename samen door het appdata pad te combinen met een tempfile name
            string tempData = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "templog.csv");
            // Clears all the events and archives them to the .evtx file

            els.ClearLog(eventLogName, tempData); //  Backup File Path 
```

我如何强制 EventlogSession 类直接保存到 CSV，或者，如果那是不可能的。如何将 EVTX 转换为 CSV（使用 C# 或 VB.net）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T21:03:38.630

使用 Log Parser 提供的 API 很容易做到这一点。

下载并安装[日志解析器 2.2](http://www.microsoft.com/en-us/download/details.aspx?id=24659)

添加对 COM 库“MS Utility 1.0 类型库 - LogParser 接口集合”的引用。搜索 Log 大大缩小了列表的范围。

![在此处输入图像描述](../Images/417ce2a868ffa4a50f5c0b1bd9bc9d05.png)

更改引用的属性，使其不嵌入互操作类型。如果你不这样做，你会得到这样的编译错误：Interop type 'MSUtil.COMCSVOutputContextClassClass' cannot be embedded。请改用适用的接口。

![MSUtil 互操作类型](../Images/41678df8b7d3e261d693be300ce75c18.png)

LogParser 帮助文件的内容对 API 有很好的参考，但我已将我使用的部分包含在代码中。

```
using System;
using MSUtil;

namespace LogParserTest
{
 using LogQuery = LogQueryClassClass;
 using EventLogInput = COMEventLogInputContextClassClass;
 using CSVOutput = COMCSVOutputContextClassClass;
 using XMLOutput = COMXMLOutputContextClassClass;

 class Program
 {
  static void Main(string[] args)
  {
   try
   {
    // Instantiate the LogQuery object
    LogQuery oLogQuery = new LogQuery();

    // Instantiate the Event Log Input Format object
    EventLogInput eventInputFormat = new EventLogInput();

    // When set to "FW", events are retrieved from the oldest to the 
    // newest. When set to "BW", events are retrieved from the newest 
    // to the oldest.
    eventInputFormat.direction = "FW"; 

    // Event text messages often span multiple lines. When this parameter
    // is set to "ON", the EVT input format preserves readability of the 
    // messages by removing carriage-return, line-feed, and multiple space
    // characters from the message text.
    // When this parameter is set to "OFF", the EVT input format returns
    // the original message text with no intervening post-processing. 
    eventInputFormat.formatMessage = true;

    eventInputFormat.binaryFormat = "ASC";
    eventInputFormat.stringsSep = ",";

    CSVOutput csvOutputFormat = new CSVOutput();

    // ON: always write the header; 
    // OFF: never write the header; 
    // AUTO: write the header only when not appending to an existing file. 
    csvOutputFormat.headers = "ON"; 

    // Setting this parameter to "ON" causes the CSV output format to write
    // a tab character after each comma field separator, in order to 
    // improve readability of the CSV output. Note that using tabs between
    // field values might generate output that is not compatible with 
    // certain spreadsheet applications. 
    csvOutputFormat.tabs = false;

    // ON: always enclose field values within double-quote characters; 
    // OFF: never enclose field values within double-quote characters; 
    // AUTO: enclose within double-quote characters only those field 
    //    values that contain comma (,) characters. 
    csvOutputFormat.oDQuotes = "AUTO";

    // This parameter specifies the date and/or time format to use when
    // formatting values of the TIMESTAMP data type.
    csvOutputFormat.oTsFormat = "yyyy-MM-dd";

    // 0 is the system codepage, -1 is UNICODE. 
    csvOutputFormat.oCodepage = -1;

    // 0: existing files are appended with the output; 
    // 1: existing files are overwritten with the output; 
    // 2: existing files are left intact, discarding the output. 
    csvOutputFormat.fileMode = 1;

    /*
    EventLog     STRING  Name of the Event Log or Event Log backup file 
    RecordNumber   INTEGER  Index of this event
    TimeGenerated   TIMESTAMP Event generated date/time (local time) 
    TimeWritten    TIMESTAMP Event logged date/time (local time) 
    EventID      INTEGER  The ID of the event 
    EventType     INTEGER  The numeric type of the event 
    EventTypeName   STRING  The descriptive type of the event 
    EventCategory   INTEGER  The numeric category of the event 
    EventCategoryName STRING  The descriptive category of the event 
    SourceName    STRING  The source that generated the event 
    Strings      STRING  The textual data
    ComputerName   STRING  The name of the computer  
    SID        STRING  The Security Identifier associated with the event 
    Message      STRING  The full event message 
    Data       STRING  The binary data associated with the event 
    */

    string query = @"SELECT TOP 10 EventLog, RecordNumber, Message INTO "
    // Enclose path in single ticks to handle spaces.
    query += "'" + FullPathToCsv + "' FROM "; 
    // Name of application Log, System, Security, Application, CustomLogName
    query += "System";     
    oLogQuery.ExecuteBatch(query, eventInputFormat, csvOutputFormat);
   }
   catch (System.Runtime.InteropServices.COMException ex)
   {
    Console.WriteLine("Unexpected error: " + ex.Message);
   }
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-12T18:50:40.820

这个 Powershell 函数是我能找到的最有效的。不是 C# 代码，但我认为它可能有用。它需要一个文件名 (evtx) 或 Powershell 中的文件名变量数组，如下所示：

[数组]$filelist = "file1", "file2", "file3"

```
Function Convert-Logs3 {
[cmdletbinding()]
Param(
$filelist=$NULL
)
$filelist | foreach-object {
Get-WinEvent -Path "$PSItem"| Select RecordID,ID,TimeCreated, Message | export-csv - ``notypeinformation -path $(write "$PSItem.csv");
[System.gc]::collect();

}} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-20T08:14:46.910

事实证明，所有现有的解决方案都不符合我的要求。我只是想要一个将 evtx 作为输入并导出 csv 的工具。不多不少。我自己建了一个，效果很好。它被称为 EVTX2CSV

您可以在这里下载：[http](http://essaver.net/evtxecsv) ://essaver.net/evtxecsv或直接通过[http://www.essaver.net/downloads/setupevtx2csv.exe](http://www.essaver.net/downloads/setupevtx2csv.exe)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-23T21:06:36.267

如果你只是想要一个将 EVTX 转换为 CSV 的工具，你可以直接使用 LogParser 工具：

```
C:\> logparser "SELECT TimeGenerated, SourceName, EventCategoryName, EventId, Message INTO C:\eventlog.csv FROM C:\eventlog.evtx" -i:EVT 
```

我能够使用它在大约 10 分钟内将 3 GB EVTX 文件转换为 CSV。

# objective-c - NSDateFormatter 和 NSString 到 NSDate 的转换

> ID：12348680
> 
> 赞同：1
> 
> 时间：2012-09-10T09:19:38.110
> 
> 标签：objective-c, ios5, nsstring, nsdate, nsdateformatter

美好的一天，我正在尝试将从服务器获取的 NSString 转换为 NSDate 对象。那是代码：

```
NSString *date = @"Sep 12 at 12:03 am";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MMM d 'at' H:m a"];
self.messageDateAndTime = [dateFormatter dateFromString:date];
NSLog(@"NSDate: %@", self.messageDateAndTime); 
```

我以**日期**字符串的格式获取日期。在我尝试为此日期格式创建自己的格式化程序之后。但无论如何，我得到了**null**！

**我做错了什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:29:57.387

我在上面的代码中调试你运行良好并给出`NSDate: 1970-09-11 18:33:00 +0000`这个日志。首先检查你的字符串。有关更多信息，您可以使用以下类别。

```
// NSString+Date.h
@interface NSString (Date)
+ (NSDate*)stringDateFromString:(NSString*)string;
+ (NSString*)stringDateFromDate:(NSDate*)date;
@end

// NSString+Date.m
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormat setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss ZZZ"];

NSDate *date = [dateFormatter dateFromString:stringDate ];
[dateFormatter release];
+ (NSDateFormatter*)stringDateFormatter
{
    static NSDateFormatter* formatter = nil;
    if (formatter == nil)
    {
        formatter = [NSDateFormatter alloc] init];
        [formatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss ZZZ"];
    }   
    return formatter;
}

+ (NSDate*)stringDateFromString:(NSString*)string
{
    return [[NSString stringDateFormatter] dateFromString:string];
}

+ (NSString*)stringDateFromDate:(NSDate*)date
{
    return [[NSString stringDateFormatter] stringFromDate:date];
}

// Usage (#import "NSString+Date.h")
NSString* string = [NSString stringDateFromDate:[NSDate date]];
NSDate* date = [NSString stringDateFromString:string]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:06:24.757

请在此处找到正确的`NSDateFormatter` [格式字符串](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:02:18.340

我自己找到了解决方案，它会返回 null，直到您自己设置语言环境。这是代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[dateFormatter setLocale:usLocale];
[dateFormatter setDateFormat:@"MMM d 'at' H:m a"];
self.messageDateAndTime =[dateFormatter dateFromString:messageDate]; 
```

# javascript - 带有 Django 的 jQuery/JavaScript 弹出窗口（从子项中选择，在父项上显示）

> ID：12348681
> 
> 赞同：2
> 
> 时间：2012-09-10T09:19:46.330
> 
> 标签：javascript, jquery, django, popup, window.open

我需要帮助的是，当用户单击链接（现有图像）时，它会打开一个窗口（我已经这样做了）。在这个窗口中，我有一个服务器上当前图像的列表，如果用户选择一个图像（通过单选按钮 - 然后提交），它会将 id 从子级传递给父级。

我尝试操作 js 日历弹出脚本，但没有运气。我不是一个好的 js/jQuery 编码器，我希望有人能帮我解决这个问题，又好又简单。

如果这有什么不同，我将使用 Django 作为我的后端代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:28:27.513

[本文](http://blog.yourlabs.org/post/20001556462/howto-javascript-popup-form-returning-value-for-select)剖析了 Django 制作“返回值的弹出窗口”的方式。

此外，这是一个[最近的实现](https://github.com/yourlabs/django-autocomplete-light/commit/599687fc71fe5ecf054afc47935626b81e6a8bf2)，它可以激发您的灵感。

# css - IE8 背景图片无法调整大小和偏移

> ID：12348683
> 
> 赞同：0
> 
> 时间：2012-09-10T09:20:07.797
> 
> 标签：css, internet-explorer-8, background-image

背景图片在IE9下正常，在IE8下不行。

URL 是[http://beta.ydfzxy.com](http://beta.ydfzxy.com)，默认 CSS 文件是[http://code.google.com/p/ydfzxy/source/browse/trunk/beta/wp-content/themes/pavo/css /screen/default.css](http://code.google.com/p/ydfzxy/source/browse/trunk/beta/wp-content/themes/pavo/css/screen/default.css)

谁能告诉我有什么问题并纠正它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:43:35.543

`background-size`IE8 及更早版本不支持。您需要一个 javascript 解决方案才能使其在 IE8 中运行。

我使用这种方法`<img>`定位在所有内容的后面： http: [//css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

# jquery - 动画文本阴影

> ID：12348686
> 
> 赞同：0
> 
> 时间：2012-09-10T09:20:10.217
> 
> 标签：jquery, jquery-ui, jquery-animate

我的网站标题中有一些关键字。每隔几秒钟，我就希望其中一个通过 CSS text-shadow 属性发光。

但是，JQuery 动画似乎并不能很好地支持 CSS text-shadow 属性。

[http://jsfiddle.net/VWBsU/](http://jsfiddle.net/VWBsU/)：这是我想要的结果，但辉光必须淡入淡出。

[http://jsfiddle.net/VWBsU/1/](http://jsfiddle.net/VWBsU/1/)使用更常见的 CSS 属性，如颜色，动画效果完美，红色淡入。

[http://jsfiddle.net/VWBsU/2/](http://jsfiddle.net/VWBsU/2/)但是在尝试对其进行动画处理时，CSS text-shadow 属性甚至不会出现。

有谁知道如何淡入和淡出 text-shadow 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:54:02.087

尝试这个

***JS代码***

```
var elements = jQuery("#top p").get();
setInterval(function() {
    var element = elements[Math.floor(Math.random() * elements.length)];
    $(element).toggleClass('glow').animate({
        textShadow: "rgba(255,255,255,1) 0 0 15px"
    },
    2000,
    function() {
        $(element).toggleClass('glow').animate({
            textShadow: "rgba(255,255,255,1) 0 0 0"
        });
    });
},
2000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:51:19.720

你可以在没有 jQuery 的情况下做到这一点。这是示例。

**HTML**

```
<div id="top">
  <p id="test1">Fading Text Shadow 1</p>
  <p id="test2">Fading Text Shadow 2</p>
  <p id="test3">Fading Text Shadow 3</p>
  <p id="test4">Fading Text Shadow 4</p>
  <p id="test5">Fading Text Shadow 5</p>
</div> 
```

**CSS**

```
#top p {
    text-shadow : 2px 2px 2px rgba(255, 0, 0, 0.05);
    /* Set shadow color by rgba() or rgb().
       Also, set alpha channel greater than 0 */
} 
```

**Javascript**

```
onload = function() {
    var randomElm = function() {
        for(var i = Math.floor(Math.random() * elements.length); locArr[i];) {
            i = Math.floor(Math.random() * elements.length);
        }
        locArr[i] = true;
        fadeInTextShadow(elements[i], i);
        setTimeout(function() { randomElm(); }, 5000);
    },
    fadeInTextShadow = function(elm, n) {
        var tShadow = document.defaultView.getComputedStyle(elm).textShadow;
        if(tShadow && tShadow.match(/rgba?\(([0-9\.%]+)\s*,\s*([0-9\.%]+)\s*,\s*([0-9\.%]+)(\s*,\s*[0-9\.]+)?\)/)) {
            var r = RegExp.$1, g = RegExp.$2, b = RegExp.$3, a = RegExp.$4 ? RegExp.$4.replace(/^\s*,\s*/, '') * 1 + 0.05 : 0.05, rgba = 'rgba(' + r + ',' + g + ',' + b + ',' + (a < 1 ? a : 1) + ')';
            elm.style.textShadow = tShadow.replace(/rgba?\(.+?\)/, rgba);
            a < 1 ? setTimeout(function() { fadeInTextShadow(elm, n) }, 100) : (a >= 1 && setTimeout(function() { fadeOutTextShadow(elm, n) }, 3000));
        }
    },
    fadeOutTextShadow = function(elm, n) {
        var tShadow = document.defaultView.getComputedStyle(elm).textShadow;
        if(tShadow && tShadow.match(/rgba?\(([0-9\.%]+)\s*,\s*([0-9\.%]+)\s*,\s*([0-9\.%]+)(\s*,\s*[0-9\.]+)?\)/)) {
            var r = RegExp.$1, g = RegExp.$2, b = RegExp.$3, a = RegExp.$4 ? RegExp.$4.replace(/^\s*,\s*/, '') * 1 - 0.05 : 0.95, rgba = 'rgba(' + r + ',' + g + ',' + b + ',' + (a > 0.05 ? a : 0.05) + ')';
            elm.style.textShadow = tShadow.replace(/rgba?\(.+?\)/, rgba);
            a > 0.05 ? setTimeout(function() { fadeOutTextShadow(elm, n) }, 100) : locArr[n] = false;
        }
    },
    elements = document.querySelectorAll('#top p'),
    locArr = [];
    for(var i = 0, l = elements.length; i < l; i++) {
        locArr[locArr.length] = false;
    }
    randomElm();
} 
```

活生生的例子

[http://asamuzak.jp/test/textshadow_fade_test](http://asamuzak.jp/test/textshadow_fade_test)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:37:16.623

jQuery 动画不支持文本阴影。但看起来你的问题已经在这里解决了：[Animating elements of text-shadow with jQuery](https://stackoverflow.com/questions/2226906/animating-elements-of-text-shadow-with-jquery)

您必须自己创建动画，最好的方法是扩展 jQuery 并创建自定义动画（如上面的链接中所示）。

# javascript - javascript: cloneNode 导致脚本在 IE 中执行

> ID：12348689
> 
> 赞同：3
> 
> 时间：2012-09-10T09:20:21.540
> 
> 标签：javascript, internet-explorer, ieaddon

我一直在浏览器本机实现的 DOM 对象上使用 cloneNode API。行为在 FF 和 chrome 中看起来不错，但在 IE 中，要克隆的节点内的脚本也会作为 cloneNode api 的副作用执行。

有没有办法摆脱它？

# python - 为什么函数会在 python 中以“return 0”而不是“return”结尾？

> ID：12348697
> 
> 赞同：7
> 
> 时间：2012-09-10T09:20:38.030
> 
> 标签：python, function, return

你能解释一下“return 0”和“return”之间的区别吗？例如：

```
do_1():
    for i in xrange(5):
        do_sth()
    return 0

do_2():
    for i in xrange(5):
        do_sth()
    return 
```

上面两个函数有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T11:51:59.090

取决于使用情况：

```
>>> def ret_Nothing():
...     return
... 
>>> def ret_None():
...     return None
... 
>>> def ret_0():
...     return 0
... 
>>> ret_Nothing() == None
True
>>> ret_Nothing() is None  # correct way to compare values with None
True
>>> ret_None() is None
True
>>> ret_0() is None
False
>>> ret_0() == 0
True
>>> # and...
>>> repr(ret_Nothing())
'None' 
```

而正如[提克多玛所说](https://stackoverflow.com/a/12348735/1431750)，`0`不等于`None`。但是，在**布尔上下文中**，它们都是`False`：

```
>>> if ret_0():
...     print 'this will not be printed'
... else:
...     print '0 is boolean False'
... 
0 is boolean False
>>> if ret_None():
...     print 'this will not be printed'
... else:
...     print 'None is also boolean False'
... 
None is also boolean False 
```

更多关于 Python 中的布尔上下文：[真值测试](https://docs.python.org/3/library/stdtypes.html#truth-value-testing)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T19:21:58.793

在 Python 中，**每个**函数都隐式或显式地返回一个返回值。

```
>>> def foo():
...     x = 42
... 
>>> def bar():
...     return
... 
>>> def qux():
...     return None
... 
>>> def zero():
...     return 0
... 
>>> print foo()
None
>>> print bar()
None
>>> print qux()
None
>>> print zero()
0 
```

如您所见，`foo`和`bar`返回`qux`完全相同的内置常量[**`None`**](http://docs.python.org/library/constants.html#None)。

*   `foo`返回`None`是因为`return`缺少语句，并且`None`如果函数没有显式返回值，则它是默认返回值。

*   `bar`返回`None`是因为它使用了`return`没有参数的语句，它也默认为`None`.

*   `qux`返回`None`，因为它明确地这样做了。

`zero`然而完全不同并返回[整数**`0`**](http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex)。

如果[评估为 booleans](http://docs.python.org/library/stdtypes.html#truth-value-testing)，`0`并且`None`两者都评估为`False`，但除此之外，它们是非常不同的（实际上是不同的类型`NoneType`和`int`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T09:22:26.000

```
def do_1():
    return 0

def do_2():
    return

# This is the difference
do_1 == 0 # => True
do_2 == 0 # => False 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T10:16:18.173

在 python 中，函数将`None`显式或隐式返回。

例如

```
# Explicit
def get_user(id):
    user = None
    try:
        user = get_user_from_some_rdbms_byId(id)
    except:
        # Our RDBMS raised an exception because the ID was not found.
        pass
    return user  # If it is None, the caller knows the id was not found.

# Implicit
def add_user_to_list(user):
    user_list.append(user)   # We don't return something, so implicitly we return None 
```

`0`由于某些计算，python 函数会返回：

```
def add_2_numbers(a,b):
    return a + b      # 1 -1 would return 0 
```

或者因为`magic`旗帜之类的东西，这是不受欢迎的。

但在 python 中，我们不用`0`来表示成功，因为：

```
if get_user(id): 
```

`True`如果我们返回，则不会评估，`0`因此该`if`分支将不会运行。

```
In [2]: bool(0)
Out[2]: False 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-10T09:25:35.737

它与python没有任何关系。

每当您执行一个函数时，您都可以选择返回一个值。

关键字是`return`通知函数是否应该返回值的信息。

如果没有给 the`return`赋值或没有分配要返回的变量，则返回值为`None`

如果您分配一个值，在这种情况下，`0`要返回，那么该值`0`将由函数返回，当`return`达到关键字和值时，函数将结束。

有关以下内容的更多信息`0`：使用 a 的原因`0`是因为返回`0`“成功”的函数和非零返回值要么只是要返回的值，要么有时是函数未正确执行时的错误代码，这是司空见惯的.

# javascript - javascript中的多线程

> ID：12348709
> 
> 赞同：-3
> 
> 时间：2012-09-10T09:21:04.877
> 
> 标签：javascript, multithreading

javascript中可以使用多线程吗？这是我的 JSP 页面的 javascript 部分。我有这 4 个 if 条件。4 if 条件中的 copde 将运行 4 次诊断测试。但我想同时运行它们。可能吗？

```
 if(document.getElementById("VoiceNode").style.display=="block" && document.getElementById("voiceTest-0").style.display=="none"){
                   alert("calling voice test");          
                    document.getElementById("voiceTest-0").style.display="block";
                    kbdOnnetVoiceTestAjaxCall.init('<%=contextPath%>','<%=Service.getServiceID()%>','<%=Service.getInventory().getTelephoneNumber()%>','<%=Service.getInventory().getPort()%>','<%=Service.getInventory().getDslam()%>','<%=Service.getInventory().getSlot()%>','${KBDResultsTimeout}','true')
                    document.getElementById("moreVoice").style.display="block";
                    alert("exiting voice test"); 
                }
                if(document.getElementById("sessionTest-0").style.display=="none"){
                                       document.getElementById("sessionTest-0").style.display="block";
                    kbdOnnetSessionTestAjaxCall.init('<%=contextPath%>','<%=Service.getServiceID()%>','<%=Service.getInventory().getTelephoneNumber()%>','<%=Service.getInventory().getPort()%>','<%=Service.getInventory().getDslam()%>','<%=Service.getInventory().getSlot()%>','${KBDResultsTimeout}','true')
                    document.getElementById("moreSession").style.display="block";  
                                    }
                if(document.getElementById("lineTest-0").style.display=="none"){

                    document.getElementById("lineTest-0").style.display="block";
                    kbdOnnetLineTestAjaxCall.init('<%=contextPath%>','<%=Service.getServiceID()%>','<%=Service.getInventory().getTelephoneNumber()%>','<%=Service.getInventory().getPort()%>','<%=Service.getInventory().getDslam()%>','<%=Service.getInventory().getSlot()%>','${KBDResultsTimeout}','true')
                    document.getElementById("moreLine").style.display="block";
                                     }
                if (document.getElementById("syncTest-0").style.display=="none"){

                    document.getElementById("syncTest-0").style.display="block";
                    kbdOnnetSyncTestAjaxCall.init('<%=contextPath%>','<%=Service.getServiceID()%>','<%=Service.getInventory().getTelephoneNumber()%>','<%=Service.getInventory().getPort()%>','<%=Service.getInventory().getDslam()%>','<%=Service.getInventory().getSlot()%>','${KBDResultsTimeout}','true')
                    document.getElementById("moreSync").style.display="block";
                                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:23:38.293

不

您可以重新排列事件循环中的执行顺序。但它们永远不可能同时发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:24:47.263

JavaScript 是单线程的。但

*   您可以[通过](http://www.kryogenix.org/days/2009/07/03/not-blocking-the-ui-in-tight-javascript-loops)使用`setTimeout`. 这通常用于防止密集操作期间的“UI 阻塞”。
*   或使用最近的[WebWorkers](http://www.html5rocks.com/en/tutorials/workers/basics/)

# java - 锚链接到文档附件

> ID：12348712
> 
> 赞同：0
> 
> 时间：2012-09-10T09:21:14.317
> 
> 标签：java, itext

如何使用 iText 为我的文档上的附件设置参考或 iText 锚点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:28:47.980

如果您希望 Anchor 打开任何类型的附件：忘记它，ISO-32000-1（如果您不知道，那是 PDF 参考）不支持它。如果您希望 Anchor 打开 PDF 附件：使用 GoToE 注释。我引用 ISO-32000-1 的第 12.6.4.4 节：

> 嵌入式 go-to 操作 (PDF 1.6) 类似于远程 go-to 操作，但允许跳转到嵌入在另一个 PDF 文件中的 PDF 文件或从该 PDF 文件跳转。嵌入文件可能与文件附件注释或 EmbeddedFiles 名称树中的条目相关联。

在 iText 中，PdfAction 类具有不同的 gotoEmbedded() 方法。阅读 iText in Action - Second Edition 的 p538 以了解如何使用这些方法。

# angularjs - ng-switch-when 来自 ng-repeat 的值不显示值

> ID：12348714
> 
> 赞同：1
> 
> 时间：2012-09-10T09:21:20.310
> 
> 标签：angularjs, javascript-framework

我有这个简单的代码。问题是`"ng-switch-when"`没有显示，这意味着`column.stage`没有正确呈现，尽管我尝试显示`{{column.stage}}`并且它显示了正确的值（1 OR 2 OR 3 ...）

```
<div class="column span3" ng-repeat="column in columns">
    <h1>{{column.title}}</h1>
    <div class="row" ng-repeat="shot in shots" ng-switch on="shot.stage">
        <h6 ng-switch-when="{{column.stage}}">{{shot.title}}</h6>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:10:52.573

您需要将 ng-switch on="shot.stage" 放在它自己的元素中，例如：

```
<div class="column span3" ng-repeat="column in columns">
    <h1>{{column.title}}</h1>
    <div class="row" ng-repeat="shot in shots">
        <div ng-switch on="shot.stage">
          <h6 ng-switch-when="{{column.stage}}">{{shot.title}}</h6>
        </div>
    </div>
</div> 
```

# php - 使用 PHP 调用未注册的 DLL

> ID：12348720
> 
> 赞同：4
> 
> 时间：2012-09-10T09:21:46.267
> 
> 标签：php, dll

我必须使用第三方开发的 DLL，并且我想从 PHP 代码中使用它。我已经将它与 C++ 代码一起使用，一切正常，但 DLL 显然无法在 Windows 下注册，因为它没有入口点。

在 C++ 中，我使用此代码调用 DLL 而不注册它：

`hinstLib = LoadLibrary(TEXT("C:\\Users\\blablabla\\Visual Studio 2010\\Projects\\blablabla\\blablabla.dll"));`

`FARPROC MainCommand = GetProcAddress(HMODULE (hinstLib),"blablaCommand");`

是否可以在 PHP 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:06:34.687

您需要编写一个 PHP 扩展，PHP 不使用 FFI，也没有本机接口。

# scala - 关闭钩子不会在 ^C (scala) 上启动

> ID：12348721
> 
> 赞同：1
> 
> 时间：2012-09-10T09:21:47.777
> 
> 标签：scala, shutdown-hook

我正在尝试进行干净而优雅的关机，但由于某种原因，它不会执行。我试过了：

```
sys addShutdownHook{
    logger.warn("SHUTTING DOWN...")
    // irrelevant logic here...
} 
```

并且：

```
Runtime.getRuntime.addShutdownHook(ThreadOperations.delayOnThread{
        logger.warn("SHUTTING DOWN...")
        // irrelevant logic here...
    }
) 
```

其中`ThreadOperations.delayOnThread`定义是：

```
object ThreadOperations {

    def startOnThread(body: =>Unit) : Thread = {
        onThread(true, body)
    }

    def delayOnThread(body: =>Unit) : Thread = {
        onThread(false, body)
    }

    private def onThread(runNow : Boolean, body: =>Unit) : Thread = {
        val t=new Thread {
            override def run=body
        }
        if(runNow){t.start}
        t
    }

    // more irrelevant operations...
} 
```

但是当我运行我的程序（可执行jar，双重激活）时，钩子没有启动。那我做错了什么？在 scala 中添加关闭挂钩的正确方法是什么？它与我使用双重激活的事实有任何关系吗？

双重激活是这样完成的：

```
object Gate extends App {
    val givenArgs = if(args.isEmpty){
                        Array("run")
                    }else{
                        args
                    }

    val jar = Main.getClass.getProtectionDomain().getCodeSource().getLocation().getFile;
    val dir = jar.dropRight(jar.split(System.getProperty("file.separator")).last.length + 1)
    val arguments = Seq("java", "-cp", jar, "boot.Main") ++ givenArgs.toSeq
    Process(arguments, new java.io.File(dir)).run();
} 
```

（scala 版本： 2.9.2 ）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:48:33.767

在您的第二次尝试中，您的关闭挂钩似乎只是创建了一个线程而从未启动它（因此它只是收集垃圾并且什么都不做）。我错过了什么？（编辑：是的，我做了，见评论。我的错）。

在第一次尝试中，问题可能只是底层日志有一些缓存，并且应用程序在日志刷新之前退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:58:56.287

解决了。

出于某种原因，我认为这`run`与`!`分离过程相反。它实际上会挂起，因为有开放的流留给`Process`，这是从返回的`run`（或者它可能只是因为另一个原因而挂起，因为`exec`没有挂起，而是返回一个`Process`带有开放流的子进程，就像`run`） . 由于这个原因，原来的进程还活着，我不小心给它发送了信号。当然，它不包含处理程序或关闭挂钩，所以什么也没发生。

解决方案是使用`Runtime.getRuntime.exec(arguments.toArray)`而不是`Process(arguments, new java.io.File(dir)).run();`，关闭`Gate`对象中的流，并将 ^C 信号发送到正确的进程。

# mysql - Mysql插入目标表中的值

> ID：12348722
> 
> 赞同：0
> 
> 时间：2012-09-10T09:21:55.377
> 
> 标签：mysql, insert, nested

所以我需要从我的表中选择一个值并稍微修改它以在插入时用作同一表中新行中的值。见下文：

```
INSERT INTO reservationbody(
    reservationid,
    driverid,
    tripnumber,
    fromlocation,
    tolocation
)
VALUES(
    1,
    2,
    (
        SELECT
           MAX(tripnumber) + 1
        FROM reservationbody
        WHERE reservationid = 1
    ),
    'here',
    'there'
) 
```

我收到以下错误：

> 您不能在 FROM 子句中指定目标表“reservationbody”进行更新

我查看了其他问题并发现了很多关于此错误的问题，但它们似乎都与更新和删除有关，并且都需要已经存在的 PK 值。没有处理插入。

基本上我在这里期望的是，如果`SELECT MAX(tripnumber) FROM reservationbody where reservationid = 1`返回值**4**，那么插入应该添加一个`tripnumber`值为**5的新行**

谁能建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:26:24.733

你试过吗（我知道你可以在 MS SQL 中做到这一点）：

```
INSERT INTO reservationbody(reservationid,driverid,tripnumber,
                                       fromlocation,tolocation)
SELECT 1, 2, MAX(tripnumber) + 1, 'here', 'there'
FROM reservationbody
WHERE reservationid = 1 
```

# sap-ase - 如何使用 DSN 或 RapidSQL 连接到没有端口号的 Sybase 服务器/数据库？或者如何找到端口号？

> ID：12348723
> 
> 赞同：3
> 
> 时间：2012-09-10T09:21:57.987
> 
> 标签：sap-ase, dsn, isql, rapidsql

我有一些 Sybase 服务器/数据库。我知道 1\. 服务器名称 2\. 数据库名称 3\. 用户名 4\. 密码。使用它我可以使用 ISQL 进行连接，但是在使用 RapidSQL 时它会要求端口。我有使用 DSN 的现有应用程序，在创建 DSN 时它也要求端口。我正在寻找使用 RapidSQL/Creating DSN without port 或 How to find port mumber 的 2 种可能性？

我没有 SQL.ini 文件。

![在此处输入图像描述](../Images/e357948e17ad85abd749e913492f582c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T06:44:58.300

试试这个：

1.  转到开始-> 运行-> 输入`dsedit`。将有一个 mneu “选择目录服务”
2.  点击确定`InterfacesDriver`。
3.  在左侧窗格中突出显示您的服务器名称。

您将在右侧窗格中看到其`IP/Hostname`和编号。`Port`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T09:55:25.033

如果 isql 工作，则 Sybase 客户端必须定义端口号。

在 Windows 上，我希望 %SYBASE%\ini\sql.ini 包含您服务器的记录，并且您会看到端口号。

（在 Unix 上，$SYBASE/interfaces 是等效文件。）

我不知道这是否可能，但 RapidSql 可以使用本机 Sybase 连接吗？听起来好像您正在为 ODBC 设置它？

# silverlight-4.0 - 在 Silverlight 弹出窗口中调整窗口大小

> ID：12348724
> 
> 赞同：1
> 
> 时间：2012-09-10T09:22:00.840
> 
> 标签：silverlight-4.0, resize, popup

我正在使用一个带有弹出元素的用户控件来创建某种通知系统。有些通知可能是不定时的，因此它们会保持打开状态，直到用户与之交互。这可以正常工作，但是当用户调整浏览器大小时，弹出控件的大小错误。

我已经尝试在 usercontrol 上捕获 sizechanged，但这并没有被调用（现在似乎很明显）。

我拥有的一个解决方案是在主窗口上捕获 sizechanged 并将其应用于用户控件。这个通知用户控件是单例的，所以我可以做一次，所有的通知都会有正确的大小。我只是觉得这不是正确的解决方案。

关于这个问题还有其他想法吗？

# c# - 将参数传递给应用程序的最佳方式是什么？

> ID：12348727
> 
> 赞同：2
> 
> 时间：2012-09-10T09:22:04.180
> 
> 标签：c#, software-design

我正在编写一个命令行应用程序，它将接受用户的大量输入。示例输入应包含：

*   到 RDB/Cube 的连接字符串
*   用于查询的参数
*   查询
*   XPath 刺痛
*   一些布尔值参数
*   WebService 项的路径

我想知道将它们全部传递给程序的最佳方法是什么。我确信查询、XPath 和参数应该存储在一个文件中，但它们应该包含在一个文件中吗？其余的呢，将它们作为命令行参数传递更好还是我也应该为它们准备一个文件？

对于这种情况，最好/最常见的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:26:27.503

当我做这种应用程序时，我从常用的命令行参数开始，并增加了从文件加载参数值的能力，例如：

```
 app.exe -ConnectionString "...." -Query file(query.xml) -AnotherQuery "SELECT * FROM Table" 
```

所以你可以让用户决定在哪里存储不同的参数。

# android - 从 Android 与 3g 调制解调器通信

> ID：12348733
> 
> 赞同：1
> 
> 时间：2012-09-10T09:22:16.250
> 
> 标签：android, serial-port, 3g, at-command

我正在 Android 中开发一个应用程序，它需要`AT commands`将一些发送到调制解调器。

这些命令包括提取 IMEI 号码、迭代可用网络和设置`APN`详细信息等内容。

我有这个软件的 Windows (c#) 版本，所以我熟悉我需要发送的命令，但在 Windows 中我可以简单地打开相关`Serial Port`并发送命令。

任何人都可以帮忙吗？

富有的。

`EDIT`

我发现调制解调器的某些功能是通过`TelephonyManager`API公开的

```
 TelephonyManager telMgr = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE); 
    String SerNum= telMgr.getSimSerialNumber();
    String IMEI= telMgr.getDeviceId();
    String Operator= telMgr.getSimOperatorName(); 
```

这有很大帮助，但似乎没有手动设置网络运营商/提供商的方法..这是我需要的主要内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:20:46.963

我在定制系统上工作并集成了一个 GSM 调制解调器。我建议您启用并使用 logcat 查看“无线电”日志。可以从中学到很多东西（至少我做到了）。有一个包含 APN 列表的配置文件，连接时，您会看到它查找“首选 APN”。在我的系统中，它是该文件中的 APN。由于几乎没有关于如何在 Android 中玩较低级别的信息（信息仅在应用程序级别可用），我使用（并牺牲）了一些“现成”系统来查看它是如何工作的，然后为我的定制一个。电话周围的区域似乎是不同制造商/运营商添加自己口味的地方之一，因为我可以注意到具有相同 Android 版本（Froyo、姜饼等）的每个系统的差异。很遗憾，

此外，关于尝试将 AT 命令直接发送到调制解调器的一点警告。RIL 不断与调制解调器交互并来回管理 AT 命令。它会因为收到一些它不知道已发送的命令的答案而感到不安。RIL 不断检查信号强度和一堆东西，并管理来自调制解调器的所有主动消息，这些消息可能需要 RIL 或 Android/连接管理器采取行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:57:52.020

根据[这个家伙的说法，没有公共 API 可以做你想做的事，根据我对 Android 中各种调制解调器的经验以及](https://stackoverflow.com/questions/2373727/programatically-connecting-to-another-network-operators)[TelephonyManager 页面](http://developer.android.com/reference/android/telephony/TelephonyManager.html)什么都没有的事实，我倾向于相信这一点。

您*可能*可以使用反射来访问非公共方法（类似于必须完成 WiMax 管理的方式，[此处](http://forum.xda-developers.com/showthread.php?t=909206)是一个示例），但这可能不适用于所有设备/操作系统版本，并且由于安全性原因目的，您可能还需要扎根才能使这样的事情起作用。

# c# - 从实体框架数据库生成接口首先自动生成的代码

> ID：12348734
> 
> 赞同：11
> 
> 时间：2012-09-10T09:22:21.057
> 
> 标签：c#, entity-framework, separation-of-concerns

我在 Visual Studio 2010 中使用 MVC3、C# 4.0 和实体框架。我正在从数据库生成我的 edmx 和设计的.cs 文件。然后，我从 Designer.cs 文件中的实体生成接口，作为我的 nLayer 结构的一部分。

原始代码是

```
public partial class DataEntrySummary : EntityObject 
```

然后变成

```
public partial class DataEntrySummary : EntityObject, Mb.Interface.IDataEntrySummary 
```

我担心的是，当数据库更改（它会）并且我重新生成 edmx 文件时，我将丢失所有接口定义。

有没有更好的方法来实现相同的结果而不必重新生成接口。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-10T09:42:54.810

EF 使用`partial`关键字生成类，以便您可以通过创建另一个文件并将接口特定的东西放在那里来为实体添加额外的功能。

```
public partial class DataEntrySummary : Mb.Interface.IDataEntrySummary
{
} 
```

EF 更新模型时，这些文件不会受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T15:04:18.527

你正朝着正确的方向前进。但是为了在每次 EDMX 刷新后保留接口，您需要自定义 T4 文件。

您可以查看来自[https://entityinterfacegenerator.codeplex.com/](https://entityinterfacegenerator.codeplex.com/)的自定义 T4 文件， 它们为您的每个类生成 1 个接口，以便您可以轻松地分别模拟和测试它们。

因此，每次添加新表或字段时，您都可以简单地执行其 T4 模板以及 Microsoft 提供的用于生成 EF 类型的模板。

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:25:19.860

我认为在模型更新时创建一个事件，以便每次模型更新时都会添加接口定义。

另一种选择是创建一个实现特定接口并从模型继承的代理类。

# javascript - 拖动链接后jQuery mouseup不触发

> ID：12348737
> 
> 赞同：7
> 
> 时间：2012-09-10T09:22:43.693
> 
> 标签：javascript, jquery, css, mouseup

看到这个jsfiddle：

[http://jsfiddle.net/CB87X/6/](http://jsfiddle.net/CB87X/6/)

单击并按住按钮，拖出按钮并释放。如您所见，如果释放鼠标按钮时鼠标不在元素上方，则不会触发 mouseup 事件。因此，我的示例中的样式永远不会变回原来的样式。如果鼠标按钮未在单击的元素上方时释放，您如何触发 mouseup 事件？

Edit1：顺便说一句，我在这个站点上查看了几个解决方案，实现了它们，但 mouseup 事件仍然没有触发。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T09:26:26.187

该`mouseup`事件与指针所在的位置相关，这是预期的行为。如果您希望您的按钮样式正确，请绑定`mouseleave`事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T20:38:51.870

这应该可以解决问题。如果您左键单击按钮 (.but) 并拖动，您可以`mouseup`在页面上的任何位置触发单击事件。如果您`mouseleave`的页面“正文”和`mouseup`，则`bind`ed`mouseleave`事件是`unbind`ed。

```
$('.but').mousedown( function(e) {
    if (e.which == 1) {
        var $this = $(this);
        $this.bind('mouseleave', function(){
            $('body').one('mouseup', function() {
                $this.click();
            });
        });
        $this.mouseup(function() {
            $(this).unbind('mouseleave');
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T11:23:21.173

分叉您的示例以提供一个工作示例：

[http://jsfiddle.net/67Rrs/2/](http://jsfiddle.net/67Rrs/2/)

一旦按钮被`mousedown`编辑，一个事件就会绑定到下一个`mouseup`，无论它发生在哪里，都会重置样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-19T22:23:08.960

只需使用 $(document).on('mouseup dragend', somefunc);

# sql - 在带有一个字段的sql server 2008中将值从一个表插入另一个表应该递增

> ID：12348740
> 
> 赞同：2
> 
> 时间：2012-09-10T09:22:53.173
> 
> 标签：sql, sql-server, sql-server-2008

```
declare @cid int

set @cid=(select ISNULL(MAX(cid),0)+1 from CustInfo)
insert into CustInfo(CID,CTypeId,CustNo,Regdate,
                     DOB,CCertID,CCertNo,CompId,PostedBy,PostedOn) 
(select @cid,1,0,'2012-9-10',
        dob,ccertid,ccertno,0,null,null 
 from updateCust3) 
```

我使用上面的代码将值从表 updateCust3 插入到表 UpdateCustInfo。在这种情况下，CID 字段应在每次插入时加一。我已经使用了上面的代码，但 cid 似乎没有增加，所以错误是主键的重复值。那么如何增加 cid 的值呢？由于不允许更改表属性，因此我无法使用身份属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:31:40.657

试试这个：

```
declare @cid int

set @cid=(select ISNULL(MAX(cid),0)+1 from CustInfo)
insert into CustInfo(CID,CTypeId,CustNo,Regdate,
                     DOB,CCertID,CCertNo,CompId,PostedBy,PostedOn) 
select @cid+row_number() over (order by (select 0)),1,0,'2012-9-10',
        dob,ccertid,ccertno,0,null,null 
 from updateCust3) 
```

**编辑：**正如 MikaelEriksson 在评论中提到的那样，这有风险，如果您的用户同时尝试更新表，它将出错..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:58:58.493

已使用临时表进行演示。这是在多个用户使用时避免错误的更好方法

```
DECLARE @Table TABLE               
        (               
           CTypeId INT identity (1,1)
           ,CustNo int
           ,DOB datetime           
         ,Regdate datetime
         ,CCertID int
              ,CCertNo int
       ,CompId int
    ,PostedBy varchar(100)
    ,PostedOn datetime
        )      

            INSERT @Table    
            select 1,0,'2012-9-10',
            dob,ccertid,ccertno,0,null,null 
     from updateCust3 
```

# java - 我的哈希图应该有多大？

> ID：12348741
> 
> 赞同：1
> 
> 时间：2012-09-10T09:22:53.880
> 
> 标签：java, data-structures, hashtable

我事先不知道我的`Hashmap`. 那么我的**容量**应该有多大`HashMap`呢？我应该在这里考虑哪些因素？我想尽可能减少重新散列的过程，因为它真的很昂贵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:27:38.370

您希望在空间需求和速度之间取得良好的折衷（如果发生许多冲突，速度会降低，如果减少空间分配，则更有可能）。

您可以定义负载因子，默认值可能很好。

但是您还想避免的是随着哈希表的增长而不得不重建和扩展哈希表。因此，您希望预先设置最大容量。不幸的是，为此，您需要大致知道要投入多少资金。

如果你能负担得起浪费一点内存，并且至少有一个合理的上限来控制它的大小，那么你可以将它用作初始容量。如果您保持在该容量以下，它将永远不会重新散列。内存需求与容量成线性关系（也许有人有数字）。**请记住，在默认加载因子为 0.75 的情况下，您需要将容量设置为略高于元素数量，因为它会在表格已满 75% 时扩展表格**。

如果您真的不知道，请使用默认值。不是因为它们在您的情况下是完美的，而是因为您没有任何替代设置的基础。

好消息是，即使您设置了次优值，它仍然可以正常工作，只是浪费一点内存和/或 CPU 周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:32:35.687

该[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)提供了您做出合理决定所需的最少必要信息。阅读介绍。我不知道你应该考虑的因素，因为你没有详细说明你的应用程序的性质，预期的负载，......我在这个阶段最好的建议，让它保持默认值 16，然后做一个负载测试（从用户的角度考虑应用程序），您将能够大致计算出您最初需要多少容量。

# php - 浏览器不要对 .php 文件使用 if-modified HTTP Request Header 字段

> ID：12348744
> 
> 赞同：0
> 
> 时间：2012-09-10T09:23:02.130
> 
> 标签：php, http, caching, if-modified-since

我将所有 css 文件合并到一个 .php 文件中，以减少每次访问我的网页的请求数。
我在我的 .php 文件请求后将过期日期标头设置为 1 天
问题是浏览器不使用 .php 文件的缓存。我的意思是它不会在请求时发送 IF-MODIFIED 标头字段，因此所有后续请求都将以 HTTP 响应代码 200（而不是 304）响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:20:23.457

您可以使用 mod_rewrite 设置重写规则，以将“假”css 路径的所有请求发送到服务器上的 php 文件。例如，将 all.css 的所有请求发送到 combine_css.php。

# css - 如何并排设置 3 个 div 以便中间 div 可以随着表单调整大小而拉伸

> ID：12348746
> 
> 赞同：4
> 
> 时间：2012-09-10T09:23:05.977
> 
> 标签：css

我知道这可能看起来像一个老问题，但我试图将 3 个 div 并排放置，但中间 div 应该随着表单大小的调整而伸​​展。我在[这里找到了这个](http://jsfiddle.net/TW4dn/)并使用了他们的代码，但它不起作用。正确的 div 仍然被推到 div 下方，而不是在它旁边。

[这](http://www.hydrocell.co/Huis.html)是我所拥有的一个示例，但就像我说的那样，正确的 div 被推到 div 下方而不是在它旁边。有人可以分享他们获得的知识！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:26:24.327

HTML：

```
<div class="mainDiv">
  <div class="left">Left</div>
  <div class="center">Center</div>
  <div class="right">Right</div>
</div> 
```

CSS：

```
.mainDiv{ position: relative;}
.left{ position: absolute; left: 0; top: 0; width: 100px; }
.right{ position: absolute; right: 0; top: 0; width: 100px; }
.center { margin: 0 100px; } 
```

[**JSFiddle**](http://jsfiddle.net/88Eff/1/)

[](http://jsfiddle.net/mrH9Y/)**根据您的新要求[**更新 Fiddle :)**](http://jsfiddle.net/mrH9Y/)**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:34:27.247

```
<div style="border:1px solid red; height:140px;">
<div style="width:100px; float:left; border:1px solid blue;">
    left
</div>
<div style="width:100px;  float:right; border:1px solid blue; ">
    right
</div>
<div style="border:5px solid green; overflow:hidden;">
    middle
</div> 
```

检查这个例子**

# c++ - 使用自动工具构建系统/在单独的“构建”目录中构建

> ID：12348749
> 
> 赞同：0
> 
> 时间：2012-09-10T09:23:08.123
> 
> 标签：c++, build-process, autotools, automake

我正在创建一个软件项目，我想使用 autotools 为我生成 makefile 等脚本，我手动创建了 Makefile.am 和 configure.in 文件，并且我正在使用来自[here](http://buildconf.brlcad.org/)的 autogen.sh 脚本。尝试在单独的“构建”目录中构建项目时出现问题，例如，如果我去：

```
mkdir build
cd build
../configure
make 
```

配置步骤工作正常，但运行 make 我得到：

```
make  all-recursive
Making all in src
/bin/sh: line 0: cd: src: No such file or directory
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

有什么技巧可以让它工作吗？或者我应该放弃并尝试一些更简单/不同的东西。我计划这是一个相当简单的 C++ 项目，我计划拥有的唯一依赖项是在 boost 单元测试框架上，并在 Eclipse IDE 中进行大部分开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:02:31.383

你的第 17 行有一个错误`src/Makefile.am`：

```
swin-adventure_SOURCES = src/main.cc 
```

真的应该读：

```
swin-adventure_SOURCES = main.cc 
```

因为您已经在 src/ 目录中（除非有 src/src/ 子文件夹）

还有另一个错误，因为您在 _SOURCES 变量中使用了特殊字符：`swin-adventure_SOURCES`具有禁止`-`字符；尝试将其标准化为`swin_adventure_SOURCES`

最后，您试图`bin_PROGRAMS`多次分配一个值（并且每次都是相同的值），尽量避免这种情况。

就像是：

```
## Additional flags to pass to aclocal when it is invoked automatically at
## make time. The ${ACLOCAL_FLAGS} variable is picked up from the environment
## to provide a way for the user to supply additional arguments.
ACLOCAL_AMFLAGS = ${ACLOCAL_FLAGS}

## Define an executable target "swin-adventure", which will be installed into the
## directory named by the predefined variable $(bindir).
bin_PROGRAMS = swin-adventure

## Define the list of source files for the "swin-adventure" target. The file 
## extension .cc is recognized by Automake, and causes it to produce rules 
## which invoke the C++ compiler to produce an object file (.o) from each 
## source file. The ## header files (.h) do not result in object files by 
## themselves, but will be included in distribution archives of the project.
swin_adventure_SOURCES = main.cc 
```

# symfony - Symfony 2.1 + 作曲家 + apc

> ID：12348751
> 
> 赞同：2
> 
> 时间：2012-09-10T09:23:16.940
> 
> 标签：symfony, symfony-2.1, composer-php

当我使用作曲家命令“安装”或“上传”时，我遇到了致命错误，例如：

> PHP致命错误：include（）：无法重新声明类...

我通过更改我的 apc.ini（或您的 php.ini）解决了这个问题：

```
apc.enable_cli = 1 
```

至

```
apc.enable_cli = 0 
```

我希望这可以帮助你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:57:58.480

[http://getcomposer.org/download/](http://getcomposer.org/download/)上的作曲家安装程序应该警告您 - 这是获取 composer.phar 并确保您的系统设置正确的最佳方式。

# c# - 您如何在多个项目之间共享属性/变量，同时能够在一个地方进行编辑？

> ID：12348757
> 
> 赞同：0
> 
> 时间：2012-09-10T09:23:33.067
> 
> 标签：c#, visual-studio-2010, msbuild, wix

目前我在多个项目中有这个：

```
<PropertyGroup>
    <InstallerMajorVersion>1</InstallerMajorVersion>
    <InstallerMinorVersion>09</InstallerMinorVersion>
    <InstallerBuildVersion>08</InstallerBuildVersion>
</PropertyGroup>
...
<PropertyGroup>
    <OutputName>Project-$(InstallerMajorVersion).$(InstallerMinorVersion).$(InstallerBuildVersion)</OutputName>
</PropertyGroup> 
```

我只想在一个文件中包含这些信息（第一个 PropertyGroup），所以我不必在多个地方编辑它。但是，我需要从每个项目文件中导入或以某种方式获取此信息，以便正确设置 OutputName。

您如何在多个项目之间共享属性/变量？

我的方法不太走运`<Import />`：[VS2010 - Using <Import /> to share properties between setup projects?](https://stackoverflow.com/questions/12325072/vs2010-using-import-to-share-properties-between-setup-projects)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:28:30.337

如何创建一个完全独立的项目来加载这些配置内容，并将其编译为一个单独的库/DLL？然后，您可以在需要导入这些设置的每个其他项目中使用该 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:53:13.647

它使用导入工作。我只是遇到了 VS2010 缓存的问题。有关更多详细信息，请参阅链接问题。

# php - 跨控制器时 Codeigniter 丢失会话

> ID：12348760
> 
> 赞同：0
> 
> 时间：2012-09-10T09:23:45.330
> 
> 标签：php, codeigniter

我在我的网站上创建了一个 Facebook 登录，然后当我获取登录用户的数据时，我创建了一个数组会话来将用户的信息存储在我的控制器中。

当我转到另一个页面时，我的会话有问题，我的会话丢失了，我不知道这会发生什么？

我这样设置会话：`$this->session->set_userdata('fb_user_info', $user_info);`

但是，我自己的帐户登录，我做同样的方式，它适用于所有页面。

我的问题是，为什么会话会丢失？

这是我在获取 user_info 时设置会话的代码

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Account extends CI_Controller {

public function __construct()
{       
    parent::__construct();
    //$this->authenticate();

    // Facebook constructor code
        $CI = & get_instance();
        $CI->config->load("facebook",TRUE);
        $config = $CI->config->item('facebook');
        $this->load->library('facebook', $config); 
    public function index() 
    {       
        $user = $this->facebook->getUser();

        if($user) {

            try {

                $user_info = $this->facebook->api('/me');

        // Set session

            $this->session->set_userdata('FB_SESSION_INFO', $user_info);

                    $args = $logout_url;

            $data['getLogoutUrl'] = $this->facebook->getLogoutUrl($args);

        } catch(FacebookApiException $e) {
                echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
                $user = null;
            }
        } else {

            $param = array('scope' => 'email','redirect_uri' => $mycurrent_url);

            $data['getURLLogin'] = "<a href=\"".$this->facebook->getLoginUrl($param)."\">Login with facebook</a>";

    }
} 
```

# python - 查找给定文件名的日期错误的文件

> ID：12348761
> 
> 赞同：2
> 
> 时间：2012-09-10T09:23:46.657
> 
> 标签：python, ruby, perl, bash, awk

我有一个目录，其中的文件名称与日期增加的后缀相同。

一个例子是：

```
REUTERS.FH_lbm_dump.20120905 
```

代表 9 月 5 日。

这些文件应该在第二天的前几分钟创建，例如上述文件应该在 9 月 6 日 00:01 创建。

但是，由于文件名的生成方式存在一些错误，应用程序一直在错误地保存它们。因此，在 9 月 5 日 00:16 创建的文件具有后缀 20120905，即文件名晚了 1 天。

`ls -h`显示错误命名的输出：

```
2012-09-05 00:16 FH_lbm_dump.20120905 
```

因此，检测这一点的逻辑将查看文件名，提取日期，如果它等于文件时间戳，则为正数。

我们如何在 Bash / Perl / Python 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:56:13.787

我不会解决你的全部问题，但我会给你一个开始的地方。其余的真的取决于你。

```
#!/bin/bash

# loop through all filenames in current dir
for filename in *; do

    # How to extract the date from the file name
    date_from_file=${filename:(-8)}

    # How to get the file's modification date in the same format
    date_modified=$(stat -c %y "$filename" | cut -d ' ' -f1 | sed 's/-//g')

    # test for inequality
    if [ $date_from_file -ne $date_modified ]; then

        ... # do your thing

    fi

done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:17:13.573

您应该使用它[`Time::Piece`](https://metacpan.org/module/Time%3a%3aPiece)来处理日期，以及[`File::stat`](https://metacpan.org/module/File%3a%3astat)方便地访问文件统计数据

该程序查找当前目录下所有后缀为八位的文件

它使用`mtime`每个文件的统计数据来构建一个`Time::Piece`对象，减去一天，并将日期格式化为`YYYYMMDD`

结果与实际文件后缀进行比较，如果不同则报告文件不正确

```
use strict;
use warnings;

use File::stat;
use Time::Piece ();
use Time::Seconds 'ONE_DAY';

for my $file (glob '*') {

  next unless -f $file;
  my ($suffix) = $file =~ /([^.]+)\z/;
  next unless $suffix =~ /\A\d{8}\z/;

  my $dt = Time::Piece->new(stat($file)->mtime);
  $dt -= ONE_DAY;
  $dt = $dt->strftime('%Y%m%d');

  printf "File %s NOT CORRECT\n", $file unless $suffix eq $dt;
} 
```

# c# - 如何解决“错误！请求的 URL 返回 500 - 内部服务器错误”

> ID：12348770
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:24:14.680
> 
> 标签：c#, javascript, asp.net-mvc-3, jquery

我正在使用数据绑定 Ajax 和 MVC 3 使用 Telerik Grid。我遇到的第一个问题是当我要在 Grid 中加载数据时，数据加载成功。但有时它会显示弹出错误消息“**错误！请求的 URL 返回 500 - 内部服务器错误**”。第二个是当我尝试过滤 grid 中的值时，我得到了同样的异常但并非总是如此。

谁能告诉我，为什么有时会发生此错误？以及如何解决此问题以及如何停止显示错误弹出窗口？请指导我。谢谢。

这是我的视图代码：

```
@(
Html.Telerik().Grid<ItemValueView>()
           .Name("ItemGrid")
           .Scrollable(scrollable => scrollable.Height("550px"))
           .ClientEvents(events => events
                                       .OnLoad("onLoad")                                                                                      .OnDataBound("onDataBound")
                                       .OnEdit("onEdit")
                                       //.OnSave("onSave")
           )
           .Editable(editing => editing.Mode(GridEditMode.InLine))
           .DataKeys(dataKeys => dataKeys.Add(i => i.ItemKey))
           .DataBinding(dataBinding => dataBinding
                                           //Ajax binding
                                           .Ajax()
                                           .OperationMode(GridOperationMode.Server)
                                           .Select("AjaxToolSelect", "SalesTool")

                                                                                         .Update("AjaxToolUpdate", "SalesTool")
           )

           .Columns(columns =>
                        {
                            columns.Bound(i => i.CustomerName).Title("Customer").ReadOnly();
                            columns.Bound(i => i.DisplayClassKey).Title("Sub Class").ReadOnly();
                            columns.Bound(i => i.Place).Visible(false);
}) 
                                    .Pageable(pager => pager.PageSize(50))
                                    .Sortable(sorting => sorting
                                    .SortMode(GridSortMode.MultipleColumn)
                                    .OrderBy(sortOrder =>
                                                 {
                                                     sortOrder.Add(i => i.CustomerName);
                                                     sortOrder.Add(i => i.DisplayClassKey);

                                                 }))
           .Groupable(grouping => grouping
                                      .Groups(groups => groups.Add(g => g.CustomerName))
           )
           .Filterable() 
```

**我的控制器是：**

```
 [HttpPost]
    [GridAction]
    public ActionResult AjaxToolSelect()
    {
        var items = DataProvider.GetAllItems(true);
        var grid = new GridModel(items);
        return View(grid);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:04:06.050

500 Internal Server Error 是一个非常普遍的错误。500 表示服务器出现问题（在这种情况下很可能在 C# 代码或视图中）。它并没有真正告诉我们发生了什么问题。

要追踪错误，您可以尝试一些方法。如果您在 Visual Studio 中运行，请检查输出日志并查看那里是否有任何错误消息。尝试在 C# 中设置断点并查看实际执行的代码。如果您在 Web 浏览器中访问开发人员工具，您可以找到返回 500 作为其状态代码的实际 Web 请求。因为它可能会为您提供一些额外的信息。在 Google Chrome 中，您可以按 F12 键，转到网络选项卡，选择请求，然后查看预览或响应选项卡。

# java - Java：字符串到 7 位散列

> ID：12348771
> 
> 赞同：1
> 
> 时间：2012-09-10T09:24:35.280
> 
> 标签：java, string, hash, code-coverage, bit-manipulation

我有一个要求，我有一组事先不知道的字符串（例如“phy”、“link”、“maca”）

我有 2 个程序，我只有 7 位可以发送来传达有关字符串的信息。

如果我事先知道字符串，我可以说 "phy"=1 "link"=2 等等，但我想自动化这个，因为我在两个程序中都有 2 个函数，有某种编码方式等。

```
 private int getHash(String agent) {        
      return 0;
    }
    private String getAgentIDfromHash(int hash) {
      // TODO Auto-generated method stub
      return null;
    } 
```

所以 int 将是一个 7 位的 int。我可以尝试对 String 中的所有字符进行异或运算，但我想知道是否有更好的方法？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:39:04.393

使用如此少的位数，您必须格外小心，以免发生冲突。最低限度是程序首先在内部检查它们是否不会与它们自己的（已知的）名称部分产生冲突。

理想的情况是两个程序都知道整个键集，以便它们可以生成 7 位 ID 到名称的映射，并且映射在双方都是相同的（无论键集是什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:27:13.690

标准的 String`hashCode`函数被设计为分布良好。

所以你可以简单地从`agent.hashCode()`（你想要的那些，但最好是低位）中取 7 位。

请注意，无论您做什么，7 位的冲突概率都不可能非常低。2⁷ 只有 128。您可能应该找到字符串集的一个属性，以提供更好的解决方案。

# java - Java：又是通配符

> ID：12348777
> 
> 赞同：16
> 
> 时间：2012-09-10T09:25:01.630
> 
> 标签：java, generics

在我的最后一个[问题](https://stackoverflow.com/questions/12340808/whats-the-difference-between-listobject-and-list)`List<Object>`中（感谢所有回答我的人），我了解了和之间的区别`List<?>`。

但是我仍然看不到通配符的用处。

我有两个`ArrayList`：

```
ArrayList<Integer> li = new ArrayList<Integer>(Arrays.asList(1,2,3));
ArrayList<String> ls = new ArrayList<String>(Arrays.asList("one","two","three")); 
```

现在，看看下面的两个代码块：

```
static void printList(ArrayList<?> list) 
{
    for (Object elem: list)
        System.out.print(elem + " ");
    System.out.println();
} 
```

和

```
static <T> void printList(ArrayList<T> list) 
{
    for (T elem: list)
        System.out.print(elem + " ");
    System.out.println();
} 
```

当我打电话时：

```
printList(li);
printList(ls); 
```

两种方法都返回输出：

```
1 2 3
one two three 
```

然而，第二个解决方案，在 for 循环中，`Object`我使用参数化类型而不是 s（我认为更优雅）。

所以，主要问题仍然存在：**为什么我们需要通配符**？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T11:36:03.753

如果问题是“通配符的用处”：

当只需要关于类型参数的部分知识时，通配符很有用。“部分知识”由上下界（?super T 或? extends T）实现；如果您只使用未绑定的通配符 (?)，则意味着根本没有任何知识，而且您看不到通配符真正有用的地方。

通配符可以与类型参数组合使用，以创建方法参数类型、返回类型和异常类型之间的关系。所以有用的通配符的一个例子是

```
 class ListManager<T> {
    public void add(T item, List<? super T> list) {
        [... some useful operation ...]
         list.add(item);
    }
}

public class Main {
    public static void main(String[] args) {
        List<Object> list = new ArrayList<Object>();
        Integer item = 10;
        ListManager<Integer> manager = new ListManager<Integer>();
        manager.add(item, list);
    }
} 
```

方法“ListManager.add()”在“列表”类型和“项目”类型之间创建关系。对“list”的操作始终是类型安全的，但是您可以使用方法“add”来处理不同参数类型的列表：我们对参数“list”使用了最小约束。

（[另见 jls7 文档](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-10T09:34:10.907

在[Java 泛型教程](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)中它说：

```
Collection<?> c = new ArrayList<String>();
c.add(new Object()); // Compile time error 
```

> 因为我们不知道 c 的元素类型代表什么，所以我们不能向它添加对象。add() 方法接受类型 E 的参数，即集合的元素类型。当实际类型参数为 ? 时，它代表某种未知类型。**我们传递给 add 的任何参数都必须是这种未知类型的子类型。因为我们不知道那是什么类型，所以我们不能传入任何东西。唯一的例外是 null，它是每个类型的成员。**
> 
> 另一方面，给定一个 List，我们可以调用 get() 并使用结果。结果类型是未知类型，但我们始终知道它是一个对象。因此，将 get() 的结果分配给 Object 类型的变量或将其作为参数传递给期望为 Object 类型的变量是安全的。

因此，拥有通配符类型可确保我们无法`add()`进入列表，但`null`. 如果您只是调用`get()`列表，您知道它至少是一个对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-10T11:41:13.800

根据[Item 28-USE BOUNDED WILDCARDS TO INCREASE API FLEXIBILITY](http://java.sun.com/docs/books/effective/generics.pdf) of Effective **java**

> 如果类型参数在方法声明中只出现一次，请将其替换为通配符。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-10T09:43:35.890

假设你有这个类层次结构：

```
Fruit
Apple extends Fruit
Orange extends Fruit 
```

...以及每种水果的一些清单：

`List<Apple> apples ;` 和`List<Orange> oranges ;`

现在你想要一个`List`可以引用这些列表中的任何一个的。

所以你声明`List<? extends Fruit> fruits ;`

您不能在此处使用类型变量。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-10T09:30:13.887

使用通配符，您的代码是类型安全的。在

```
List myList; 
```

你可以添加任何你想要的对象。但在：

```
List<?> myList; 
```

你只能添加一个**null**。

只有在需要类 (List.class) 或需要检查类型（List 的实例）时才应使用不带类型参数的 List。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-10T22:26:50.457

You're right. Technically, every time you see a wildcard at the first level in the type of a parameter, you could create a new type variable for it, and use that type variable in the place of that wildcard, and it would work the same.

However, I would argue that is much less elegant than using a wildcard. A type variable is useful for express establishing constraints between different expressions, like when there are two parameters with the same type variable, or between a parameter and return type. A type variable used in just one place in the parameter is kind of a waste -- that was exactly what wildcards are meant for -- an "anonymous" type variable that is not needed anywhere else. When you just need to express "some type", without needing to constrain it with something else, why clutter your method signature with bonus type variables?

There are also other uses of wildcards that cannot be replaced type variables. For example, consider a method `public List<?> foo()`. It returns some kind of list, but you don't know a list of what (and it is unsafe to add anything to it). There is no way to express that using type variables without wildcards.

Also, consider wildcards in nested type parameters: you could have a variable of type `List<List<?>>`, i.e. a heterogenous list whose elements can be lists of different things. This also cannot be expressed without using wildcards.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-10T09:31:25.950

因为

您可以在以下情况下修改列表`<T>` `list.add((T) new Object());`

但是您不能修改列表以`?`确保列表不会被修改。如果添加 null 以外的任何内容，编译器会生成错误。

```
Collection<?> c = new ArrayList<String>();
c.add(new Object()); // Compile time error 
```

> 因为我们不知道 c 的元素类型代表什么，所以我们不能向它添加对象。add() 方法接受类型 E 的参数，即集合的元素类型。当实际类型参数为 ? 时，它代表某种未知类型。我们传递给 add 的任何参数都必须是这种未知类型的子类型。因为我们不知道那是什么类型，所以我们不能传入任何东西。唯一的例外是 null，它是每个类型的成员。
> 
> 另一方面，给定 a `List<?>`，我们可以调用`get()`并使用结果。结果类型是未知类型，但我们始终知道它是一个对象。因此，将 get() 的结果分配给 Object 类型的变量或将其作为参数传递给 Object 类型的变量是安全的

有关[通配符的更多信息](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-13T13:26:39.677

我发现通配符的最佳用途之一是泛型类型的复杂嵌套。

一个带有 Pair<T,E> 列表的简单示例，通配符使代码更短且更具可读性，因为每个人都可以看到我只对布尔值感兴趣。

```
 ArrayList<Pair<Boolean, OneOrOtherLongClassName>> pairList = ...;
  for(Pair<Boolean,?> p:pairList)
  {
      if(p.first)count++;
  } 
```

# c# - OledDbDataAdapter“FROM 子句中的语法错误”异常

> ID：12348784
> 
> 赞同：0
> 
> 时间：2012-09-10T09:25:21.437
> 
> 标签：c#, oledbdataadapter

我正在使用 OleDB 从扩展名为“.K$$”的文本文件将数据导入网格。

这是一些示例代码：

```
FileInfo file = new FileInfo(filename);
string connectionString = "";
OleDbDataAdapter adapter;
OleDbConnection con;

connectionString = "Provider=Microsoft.Jet.OleDb.4.0;Data Source=" + file.DirectoryName + ";Extended Properties=\"Text;Format=TabDelimited;\"";

con = new OleDbConnection(connectionString);
con.Open();
adapter = new OleDbDataAdapter(String.Format("SELECT * FROM {0} ", file.Name), con);

adapter.Fill(MyDataTable); 
```

执行 Fill 方法时会引发异常。FROM 子句有什么问题？谢谢

* * *

编辑：

好的，经过一些测试，我发现问题出在“$”符号上。也许这是一些保留的符号？此外，如果我将扩展名重命名为“.txt”，则文件已加载到网格中，但它只有 1 列，这意味着它看不到行中有标签。

另一个问题是，当我将文件扩展名更改为不同于“.txt”（例如“.tx”）的扩展名时，Fill 方法会引发异常“无法更新。数据库或对象是只读的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:53:18.190

好的，我只是尝试创建一个 example.K$$，然后尝试使用与通过 Visual Studio 2010 中的服务器资源管理器所述相同的提供程序连接到它。它是一种无法识别的格式。

我认为这永远不会奏效。

您可能需要考虑通过不同的提供商或方法进行连接。

我认为您应该查看此链接：-

编辑 ：

[http://www.codeproject.com/Articles/6737/Fill-a-DataSet-from-delimited-text-files](http://www.codeproject.com/Articles/6737/Fill-a-DataSet-from-delimited-text-files)

它将允许您将 txt 文件正确读取到数据表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:29:10.830

尝试检查文件名的路径是否正确

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T09:35:52.193

检查目录和文件名是否包含空格。如果他们这样做，您将需要转义/引用它们。

如果文件名包含扩展名，您还需要引用文件名，因为在子句`.`中不是有效字符。`FROM`尝试`FROM [{0}]`（尽管这可能不是正确的引用字符`OleDbDataAdapter`）。

# javascript - JavaScript iFrame 到父 postMessage 问题

> ID：12348788
> 
> 赞同：1
> 
> 时间：2012-09-10T09:25:30.587
> 
> 标签：javascript, iframe, postmessage

我`postMessage`在 Firefox 和 Internet Explorer 中使用时遇到了问题，而 Google Chrome 每次都运行良好。

我想要做的是`postMessage`从 iFrame 到我的父母使用`closeForm`. iFrame URL 是父域的子域，iFrame 源本身也有`document.domain = document.domain`我认为应该对我的问题进行排序的。

目前 iFrame JavaScript 正在调用`window.top.postMessage('closeForm', '*')`，正如我所提到的，它在 Chrome 中是一种享受，但在 Firefox 中我得到了`ReferenceError: window is undefined`，所以我改为`window.top`但`parent.postMessage`我得到相同的东西只有`parent is not defined`.

同样的事情在 IE9 中也不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:50:05.850

您似乎在使用`postmessage`. 您可以使用 jQuery `postMessage`。这就是我在一些 iframe 跨域问题中使用的方法，并且有效。这是示例。

[jQuery postMessage](http://benalman.com/code/projects/jquery-postmessage/examples/iframe/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-10T09:43:00.260

`window.parent`在 OS X 上的 Firefox 中为我工作

# hp-ux - Purify: Error: Ran out of thread local data space in purify

> ID：12348793
> 
> 赞同：1
> 
> 时间：2012-09-10T09:25:36.620
> 
> 标签：hp-ux, rational-purify

我正在使用 aCC 3.85 在 Hp-UX 11.11B 上运行 purify 7.0。我将环境变量设置如下：export PURIFYOPTIONS="-max_threads=4000 -enable-thread-stack-change=yes"

但是我仍然收到以下错误，并且净化停止并出现以下错误消息：

净化：错误：线程本地数据空间不足。退出。当前最大线程数为 4000。要增加分配的线程数，请使用 (ksh) PURIFYOPTIONS="-max_threads=8000 $PURIFYOPTIONS"; 之类的命令 导出 PURIFYOPTIONS (csh) setenv PURIFYOPTIONS "-max_threads=8000 `printenv PURIFYOPTIONS`"

如果我输入 ="-max_threads=8000" 它再次要求将大小增加到 16000（将 PURIFYOPTIONS 变量中的任何内容加倍。

有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:46:06.277

我已经从运行繁重的多线程应用程序的客户那里听说过这种行为。底线是机器上没有足够的空间来运行 Purify。

# c# - 使用 Asp 生成 PDF

> ID：12348795
> 
> 赞同：0
> 
> 时间：2012-09-10T09:25:39.140
> 
> 标签：c#, asp.net, pdf-generation

这里的任何人都知道如何使用 ASP 生成 PDF？我的系统是关于在线汽车租赁的。当用户选择汽车、日期和提供的服务时，会有一个“确认”按钮，用户点击后会生成 PDF。我不要求你给我写代码，我只需要你提供一些帮助、提示和参考，因为我不熟悉这个。期待着听到您的意见。有一个好的。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:51:47.253

[您可以从这里http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)使用 ITextsharp，它将帮助您生成 pdf。

本教程将帮助你

[http://www.mikesdotnetting.com/Article/80/Create-PDFs-in-ASP.NET-getting-started-with-iTextSharp](http://www.mikesdotnetting.com/Article/80/Create-PDFs-in-ASP.NET-getting-started-with-iTextSharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:27:44.333

这是一个免费库列表，可帮助您在任何类型的应用程序（包括 ASP）中实现 PDF 生成。

需要阅读一些内容，但最终您将选择使用哪个：

[http://csharp-source.net/open-source/pdf-libraries](http://csharp-source.net/open-source/pdf-libraries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:51:41.777

根据个人经验，我可以推荐[ABCPdf.Net](http://www.websupergoo.com/abcpdf-1.htm)（付费）和[iTextSharp](http://itextpdf.com/)（免费）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:07:29.047

使用 EVO PDF

[http://www.evopdf.com/](http://www.evopdf.com/)

或者

使用 Winnovative

[http://www.winnovative-software.com](http://www.winnovative-software.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T11:15:40.473

使用以下内容生成 PDF，它适用于多语言，非常容易.. 这是我迄今为止使用过的最好的免费 dll

[WKhtmltopdf 将html文件转换为pdf](https://stackoverflow.com/questions/11342292/path-issue-with-wkhtmltopdf-exe-to-convert-html-file-to-pdf)

# scala - 类型作为 Scala 中委托类的模型

> ID：12348797
> 
> 赞同：2
> 
> 时间：2012-09-10T09:25:47.940
> 
> 标签：scala, generics, types

我在[ScalaFX](http://code.google.com/p/scalafx/)项目中工作。在这一刻，我正在改编课程`javafx.scene.control.cell`。在这个包中，具有相同签名的方法在许多类中重复。例如[`StringConverter<T> converter()`](http://docs.oracle.com/javafx/2/api/javafx/scene/control/cell/CheckBoxListCell.html#converterProperty)。为了避免不必要的代码重复（并了解如何使用存在类型），我创建了以下代码：

```
// Defined in scalafx.util package. All classes in scalafx use this trait
package scalafx.util

trait SFXDelegate[+D <: Object] extends AnyRef {
  def delegate: D

  override def toString = "[SFX]" + delegate.toString

  override def equals(ref: Any): Boolean = {
    ref match {
      case sfxd: SFXDelegate[_] => delegate.equals(sfxd.delegate)
      case _ => delegate.equals(ref)
    }
  }

  override def hashCode = delegate.hashCode
}

// Package Object
package scalafx.scene.control

import javafx.{ util => jfxu }
import javafx.beans.{ property => jfxbp }
import javafx.scene.{ control => jfxsc }
import scalafx.Includes._
import scalafx.beans.property.ObjectProperty
import scalafx.util.SFXDelegate
import scalafx.util.StringConverter

package object cell {

  type Convertable[T] = {
    def converterProperty: jfxbp.ObjectProperty[jfxu.StringConverter[T]]
  }

  type JfxConvertableCell[T] = jfxsc.Cell[T] with Convertable[T]

  trait ConvertableCell[C <: JfxConvertableCell[T], T]
    extends SFXDelegate[C] {
    def converter: ObjectProperty[StringConverter[T]] = ObjectProperty(delegate.converterProperty.getValue)
    def converter_=(v: StringConverter[T]) {
      converter() = v
    }
  }

} 
```

我`JfxConvertableCell`想说的类型

> 我的类型是一个`javafx.scene.control.Cell`类型`T`，它有一个调用的方法`converterProperty`返回一个`javafx.beans.property.ObjectProperty`类型`javafx.util.StringConverter[T]`。

在`ConvertableCell`trait 中，我的意图是说委托值（来自`SFXDelegate`trait）必须是 type `JfxConvertableCell`。我试图创建的第一个类是`CheckBoxListCell`：

```
package scalafx.scene.control.cell

import javafx.scene.control.{cell => jfxscc}
import scalafx.scene.control.ListCell
import scalafx.util.SFXDelegate

class CheckBoxListCell[T](override val delegate: jfxscc.CheckBoxListCell[T] = new jfxscc.CheckBoxListCell[T])
  extends ListCell[T](delegate)
  with ConvertableCell[jfxscc.CheckBoxListCell[T], T]
  with SFXDelegate[jfxscc.CheckBoxListCell[T]] {

} 
```

然而，此刻我从编译器收到了这条消息：

> 类型参数 [javafx.scene.control.cell.CheckBoxListCell[T],T] 不符合 trait ConvertableCell 的类型参数边界 [C <: scalafx.scene.control.cell.package.JfxConvertableCell[T],T]

我理解错了吗？`CheckBoxListCell`有`converterProperty`方法。我们不能使用类型和存在类型作为适合我们委托类的模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:04:47.867

问题在于您对`converterProperty`. 您将其定义为无参数方法，而 scala 将其视为具有空参数列表的方法。这样做可以使其正确编译：

```
type Convertable[T] = {
  def converterProperty(): jfxbp.ObjectProperty[jfxu.StringConverter[T]]
} 
```

虽然 scala 将无参数方法和具有空参数列表的方法视为基本相同的东西（参见 scala 规范 @ 5.1.4），但它们仍然是不同的实体。并且在与 java 代码（没有无参数方法的概念）进行交互时，空值方法被视为具有空参数列表的方法，而不是无参数方法，因此结构类型不匹配。

# javascript - 从 Backbone 中的表单更新模型

> ID：12348799
> 
> 赞同：5
> 
> 时间：2012-09-10T09:25:49.717
> 
> 标签：javascript, backbone.js, input, views, models

我正在使用 Backbone 和 Laravel 创建一个简单的应用程序来管理预订，并且我正在开发一个简单的表单来更新当前登录用户的用户数据。

我想知道，有没有比我所做的更好、更有效的方法来使用表单中的输入数据更新您的模型？

我在模型中创建了一个名为 update 的方法，它传递了一个表单的 DOM 对象。我认为这不是最好的方法。

任何帮助将不胜感激！

```
var Account = Backbone.Model.extend({

    url: "/settings/account",

    initialize: function()
    {

    },

    update: function(form)
    {
        this.set({
            first_name : form.find('#first-name').val(),
            last_name : form.find('#last-name').val(),
            email : form.find('#email').val(),
            landline: form.find('#landline').val(),
            mobile: form.find('#mobile').val()
        });

        return this.save();
    }

});

var user = new Account;

var AccountView = Backbone.View.extend({

    el: $("div.section"),

    template: _.template($("#account-template").html()),

    events: {
        "submit #account": "update"
    },

    initialize: function()
    {
        _.bindAll(this, 'render', 'update');
        this.render();
    },

    render: function()
    {
        $(this.el).html(this.template(this.model.toJSON()));
    },

    update: function()
    {
        var form = $(this.el).find('form#account');

        user.update(form);

        $(this.el).find('.alert-success').show();

        return false;
    }

});

var Router = Backbone.Router.extend({

    routes: {
        "account": "account"
    },

    account: function()
    {
        user.fetch({
            success: function()
            {
                return new AccountView({model:user});
            }
        });         
    }

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T09:33:21.660

当模型知道它的视图时，它被认为是糟糕的设计。我会更新由视图编排的模型。

我认为最简单的方法是在视图中执行此操作：

```
update: function()
{
    var form = $(this.el).find('form#account');
    user.set({
        first_name : form.find('#first-name').val(),
        last_name : form.find('#last-name').val(),
        email : form.find('#email').val(),
        landline: form.find('#landline').val(),
        mobile: form.find('#mobile').val()
    });

    user.save();
    $(this.el).find('.alert-success').show();
    return false;
} 
```

否则模型必须知道在哪里检索值。此外，当您有一天使用不同的视图时，您还必须更改模型类。

# android - 了解android中的数据库长度/大小

> ID：12348818
> 
> 赞同：0
> 
> 时间：2012-09-10T09:26:28.417
> 
> 标签：android, database

我搜索了android文档，但没有找到....

有什么方法可以知道有一列的元素数量吗？如果没有，我怎么能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:31:45.517

尝试一下：

```
DatabaseUtils.queryNumEntries(mDb,DATABASE_YOUR_TABLE); 
```

[queryNumEntries](http://developer.android.com/reference/android/database/DatabaseUtils.html#queryNumEntries%28android.database.sqlite.SQLiteDatabase,%20java.lang.String%29)

# javascript - 在 Google 地图上定位自定义标记

> ID：12348819
> 
> 赞同：4
> 
> 时间：2012-09-10T09:26:31.127
> 
> 标签：javascript, google-maps

我有以下谷歌地图测试应用程序： http: [//dev.driz.co.uk/googlemap/](http://dev.driz.co.uk/googlemap/)

如您所见，我使用地理位置来显示您（用户）在地图上的位置，然后使用一些 JSON 数据来使用其他标记填充地图。

**注意：根据您在世界的哪个位置，您可能看不到图钉（它们位于英国哈德斯菲尔德附近），如果您缩小，您应该会看到它们。**

我有以下问题：

* * *

~~1.）所有标记都有相同的标题，所以我假设在页面底部的 for 循环中的某个地方我犯了一个错误......但不确定是什么？~~

在下面的答案中修复。

* * *

2.)~~由于 z-index 以及一些标记具有相同的坐标，标记具有各种重叠问题。是否可以使标记在每个循环中偏移几个像素以使它们不重叠，并且每个循环的 z-index 会自动增加，因此它们高于前一个标记~~

需要这样做，以便当用户悬停标记时，它具有更高的 z-index 以使其位于顶部......如果这有意义吗？因此，在悬停事件中，我需要获取最新的偏移量，然后添加到它以使其最高！但是如何更改悬停时标记的 zindex？

* * *

3.) 最后一件事（可能也是最困难的）是，当移动地图时，工具提示在移动到标记的右侧时位置不均等。有什么想法可以改进吗？他们使用基于 JSON 的标记变得更糟，并从地图上滑落。

* * *

谁能帮我解决这些问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:49:25.853

我不知道这是否可行，但它遵循我共享的链接的模式，也许是这样的......

```
 function doToolTip(item) {
        return function () {                        
                        mTooltip = new Tooltip('<span class="name">' + item.User.Profile.firstname + ' asked:</span> <span class="title">' + item.Post.title + '</span>');                  
                        mTooltip.open(this.getMap(), this); 
                    };
        } 
```

...这是您的主要代码。我认为“项目需要”在循环范围之外初始化（但我可能错了）

```
 //other code etc...

var item;
    for (var i = 0; i < data.length; i++) {
        item = data[i];
        //other code etc....
        google.maps.event.addListener(marker, 'mouseover', doToolTip(item));
        //other code etc...
} 
```

好的。我在这里猜测，因为我没有代码的本地副本，但是，看起来你需要在执行绘图功能时更改 z-index ......

```
 //code fragment...
    // need to force redraw otherwise it will decide to draw after we show the Tooltip                      
    $(this).css('z-index', 9999);
    this.draw();
// show tooltip 
```

关于工具提示的位置，您将不得不尝试使用绘图功能，因为它似乎是根据标记计算位置。最好不要从谷歌地图坐标而是从页面上的实际位置来计算位置 - 我认为罪魁祸首是：

```
 pos = this.getProjection().fromLatLngToDivPixel(this.get('position'));
                // top offset
                top = pos.y - this.getAnchorHeight() / 2 - this.wdiv.outerHeight() / 2;
                // left offset
                if (this.getMap().getCenter().lng() > this.get('position').lng()) {
                    left = pos.x + this.wdiv.outerWidth();
                } else {
                    left = pos.x - this.wdiv.outerWidth();
                }
                // window position
                this.wdiv.css('top', top);
                this.wdiv.css('left', left); 
```

如果定位始终处于关闭状态，您可以对顶部和左侧的值进行更正，如果更复杂，则必须更改算法。

# uitableview - 表格单元格中的文本标签超出详细文本

> ID：12348826
> 
> 赞同：0
> 
> 时间：2012-09-10T09:27:01.190
> 
> 标签：uitableview, ios4

我创建了一个值为 1 单元格样式的表格。由于几乎所有（主要）文本标签都相当长，我做到了

```
cell.textLabel.numberOfLines = 2; 
```

在其所有单元格上并增加行的高度。现在，当（主要）文本超过*整*行的宽度时，它会换成 2 行并且没关系（请参见我的屏幕截图中的中间行）。但是，当文本较短时，它根本不会换行，即使它超出了它的区域并且为详细文本留下很少或没有空间（请参阅其他行 - 详细文本在*每个*行中设置为“12345 Kč”细胞）。我希望这些单元格中的文本被包装成 2 行，否则它们会为详细文本留下很小的空间。我不想调整字体大小或缩短文本 - 行中有*足够*的空间放置文本。你知道任何简单的解决方案吗？（如果没有必要，我不喜欢创建特殊标签等。）

![在此处输入图像描述](../Images/7e382b63dd953fe499de381e77a0b74f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:32:50.547

[不幸的是，即使在文档](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html)中，我也没有找到简单的解决方案（例如设置属性）。所以我不得不创建自己的标签，但我尽可能地利用了原始单元格（例如我使用`detailTextLabel`了 ），并尝试将我的标签设计得尽可能接近原始单元格。这是我的代码：

```
#define MASTER_LABEL_TAG 100

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UILabel *masterLabel;
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        masterLabel = [[UILabel alloc] initWithFrame:CGRectMake(10.0, 8.0, 195.0, 48.0)];
        masterLabel.tag = MASTER_LABEL_TAG;
        masterLabel.font = [UIFont boldSystemFontOfSize:17];
        masterLabel.backgroundColor = [UIColor colorWithWhite:1.0 alpha:0.0];
        masterLabel.numberOfLines = 2;
        [cell.contentView addSubview:masterLabel];
    }
    else
    {
        masterLabel = (UILabel *) [cell.contentView viewWithTag:MASTER_LABEL_TAG];
    }
    masterLabel.text = @"Something goes here";
    return cell;
} 
```

希望这对其他人也有帮助。

# email - 通过流程处理“发送电子邮件”步骤的可重用且健壮的模式

> ID：12348832
> 
> 赞同：2
> 
> 时间：2012-09-10T09:27:22.723
> 
> 标签：email, dialog, workflow, dynamics-crm-2011, dynamics-crm-online

## 背景

CRM 2011（和 CRM Online）中的工作流和对话过程允许我们向启用电子邮件的记录（例如联系人、帐户和用户）发送电子邮件。如果启用电子邮件的记录没有电子邮件地址，则该过程将失败并出现异常（工作流保持等待状态，对话框抛出异常）：

> 未处理的异常：System.ServiceModel.FaultException`1 [[Microsoft.Xrm.Sdk.OrganizationServiceFault，Microsoft.Xrm.Sdk，Version=5.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35]]：在聚会或聚会上找不到对象地址被标记为不可通过电子邮件发送

## 我的场景

在许多情况下，由于无法发送电子邮件而导致整个过程出错是很严厉的（同样我接受在许多情况下这种行为也是可取的）。例如，如果我正在创建和更新许多记录作为大型工作流程的一部分，并且只是希望在流程结束时发送一封简单、礼貌的确认电子邮件，我不希望整个流程仅仅因为最后一步而失败无法完成。我可以在我的工作流程中添加一个简单的条件语句，以在发送电子邮件步骤之前检查地址是否存在。这可行，但我（或更具体地说，我的用户）需要记住为*创建的每个电子邮件步骤*执行此操作。

## 理论解决方案

理想情况下，我会有一个子工作流程，它可以接受一个电子邮件对象作为输入，然后我会在发送电子邮件之前运行一个小检查以确认有一个发件人和收件人。如果数据丢失，我可以静默地使子流程失败或调用不同的逻辑，例如向原始用户发送电子邮件或编写错误记录。

但是，鉴于以下......

*   CRM Online 中仍然不支持自定义工作流程序集
*   工作流不接受传入参数
*   甚至对话框也不支持将“电子邮件对象”作为输入参数，也不支持将值数组（例如，对于收件人）作为输入参数
*   子对话框在完成后不会将控制权返回给调用者

...我正在努力构想一种模式或解决方案，它可以有效地让我避免用户必须记住在他们创建的每个工作流或对话框中进行硬编码检查（以检查是否存在收件人电子邮件地址）。

理想情况下，我想要一个类似于通用子工作流的东西，它接受电子邮件对象（或它的序列化或其他表示），进行检查并在可能的情况下发送电子邮件。

## 交给你

我试图设计一个自定义解决方案，但它很快就会过度设计（系统实体上的插件等）。否则，我看不到避免将责任推给用户的方法。有没有其他人遇到过类似的要求，更好的是，设计了一个解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:49:21.287

好吧，我可以想到一个非常简单的解决方案。

1.  电子邮件上的新字段 - “自动发送”，位，默认否

2.  新工作流程 - 创建电子邮件，如果“自动发送”== 是 && 发送包含数据 && 收件人包含数据 -> 在上下文中发送电子邮件

3.  在所有其他工作流程中，不要使用“发送电子邮件”操作，而是使用“创建记录”操作来创建电子邮件记录，正常填充电子邮件，同时填充“自动发送”字段。

通过这种方式，用户几乎可以像往常一样创建电子邮件，但您可以使用单个工作流程来执行验证逻辑并实际发送它。

# python - 如何使用 \b 或 ^ 以及模式来替换完整的单词？

> ID：12348834
> 
> 赞同：2
> 
> 时间：2012-09-10T09:27:25.890
> 
> 标签：python, regex

我正在尝试使用正则表达式来替换单词，但不是完整的单词，甚至句子之间的单词都被替换了。

```
prepos = ['has','had','have','is','you']
prepo = re.compile('|'.join(prepos))

# x["text"] - contains text with sentences in english

twete = re.sub(prepo,' ',x["text"])
print(twete) 
```

输出：也替换子词我只想替换完整的单词出现。我该如何使用`^`或`\b`在这种情况下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:31:45.913

```
import re
p = re.compile(r"\b(foo|bar|baz)\b")
p.sub("---", "foo XfooX bar YbarY baz ZbazZ")
# => '--- XfooX --- YbarY --- ZbazZ' 
```

**编辑：**

如果你想加入正则表达式：

```
prepos = ["foo", "bar", "baz"]
p = re.compile(r"\b(" + "|".join(prepos) + r")\b")
p.sub("---", "foo XfooX bar YbarY baz ZbazZ")
# => '--- XfooX --- YbarY --- ZbazZ' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:40:01.787

我想你自己给出了答案。

使用 \b 匹配单词开头或结尾的空字符串。此外，您必须在组周围添加大括号以确保整个组匹配。我还建议使用原始字符串。这样的事情应该可以解决问题：

```
prepos = [r'(\bhas\b)',r'(\bhad\b)',r'(\bhave\b)',r'(\bis\b)',r'(\byou\b)']
prepo = re.compile('|'.join(prepos))

twete = re.sub(prepo,'-',' '.join(sys.argv[1:]))
print twete 
```

# c++ - 通过类声明覆盖类属性

> ID：12348837
> 
> 赞同：0
> 
> 时间：2012-09-10T09:27:38.400
> 
> 标签：c++, oop

问题不容易用标题中的几个词来描述。所以，我有一个管理用户实现的某些类型对象的经理。对象可以是 2 种类型，例如 - 正面和负面。所以我想让用户通过类声明来设置这个选项。明显方式：

```
class Base;
class BasePositive : Base;
class BaseNegative : Base;

class UserObject1 : public BasePositive;
class UserObject2 : public BaseNegative; 
```

很好，效果很好。但是如果我们想使用继承：

```
class UserObjectBase : public BasePositive;
class UserObject3 : public UserObjectBase; 
```

操作，所有来自 UserObjectBase 的派生类只能是正数。我想获得用户可靠的机制来声明自己的类并设置正面或负面的类型（例如）。所以，我已经搜索了一些机制来覆盖基类中的一些字段/属性（不管它是什么——只要实现它）。

真的，我没有看到没有宏的任何解决方案。但可能是其他人知道吗？

C++11 - 不能使用扩展（我想要，但不能）。

**更新：**

通过虚拟继承，我取得了一些成功：

```
#include <iostream>

struct base {
    ~base() {}
    int value;

    bool isPositive;    
};

struct pos : virtual base {
    pos() {
        isPositive = true;
    }
};

struct neg : virtual base {
    neg() {
        isPositive = false;
    }
};

struct foobase : pos {};
struct fooNeg :  virtual foobase, virtual neg {};
struct fooPos : foobase {}; 

int main(int argc, char const *argv[])
{ 
    fooNeg f;
    std::cout << f.isPositive << "\n";
    fooPos p;
    std::cout << p.isPositive << "\n";
    return 0;
} 
```

但正如我所知，虚拟继承是不好的做法。看别的东西...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:30:41.083

难道你正在寻找纯虚函数？

```
class Base {
public:
  enum Polarity { POSITIVE, NEGATIVE };
  virtual Pole polarity() const = 0;
}; 
```

这迫使用户声明他们的类是正面的还是负面的，并且仍然会在层次结构的下方留下选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:44:28.697

是不是你想用“is-a”技术来表达“has-a”关系？

乍一看，似乎所有用户类都“有”极性。通过（单一）继承来表达这个属性很尴尬，并且确实会导致您遇到的问题：用户必须选择一个类是否包含正值或负值，尽管他的子类可能两者都包含。

[Joachim 建议的](https://stackoverflow.com/a/12348900/6610)多重继承可能是一种实现简洁方式来表达用户类极性的技术，但大多数时候我使用它，它带来的坏处多于好处。请阅读[Meyers 的文章](http://www.gotw.ca/publications/mill07.htm)；至少，将其设为私有！

也许继承并不是这个问题的干净解决方案。 [Pmr 的](https://stackoverflow.com/a/12348882/6610)暗示也指向了这个方向。想象一下当您添加另一个区分属性时出现的可扩展性问题，例如离散/连续、高/低、...

您的客户的代码可能会变得比您想要的更冗长，但至少，您不会被迫陷入类爆炸！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:32:24.063

请记住，C++ 可以处理多重继承，因此您可以使用单独的基类并将它们组合起来。就像是：

```
class PosNegBase;
class Positive : public PosNegBase;
class Negative : public PosNegBase;

class UserObjectBase;
class UserObject3 : public UserObjectBase, public Positive;
class UserObject4 : public UserObjectBase, public Negative; 
```

# java - 带有 JMS 和 Spring 的基于 HTTP 的 XML

> ID：12348845
> 
> 赞同：0
> 
> 时间：2012-09-10T09:28:18.807
> 
> 标签：java, web-services, spring, http, jms

我有一个旧的 HTTP 服务器，我需要使用（而不是浏览器）通过( )发送`XML`文件，服务器将在其. 它类似于 Web 服务，但没有 WSDL，我必须遵循现有的 XML 结构来构造要发送的 XML。`HTTP request``POST``Java``XML``HTTP response`

我进行了一项研究，并在[这里](http://www.java-tips.org/other-api-tips/httpclient/how-to-send-an-xml-document-to-a-remote-web-server-using-http-5.html)找到了一个符合我要求的示例。该示例使用`HttpClient`来自 Apache Commons。（我还发现了其他示例，但它们使用了`java.net`网络包（例如`URLConnection`），这很乏味，所以我不想使用它们）。

但这也是我使用`Spring`and的要求`JMS`。

我从`Spring`的[参考资料](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html)中知道可以组合`HttpClient`,`JMS`和`Spring`. 我的问题是，怎么做？

请注意，**`NOT`**我要求使用`HttpClient`. 如果你有更好的建议，我不客气。

欣赏它。

* * *

供您参考，这是我一直在谈论的 XML-over-HTTP 示例：

```
/*
 * $Header: 
 * $Revision$
 * $Date$
 * ====================================================================
 *
 *  Copyright 2002-2004 The Apache Software Foundation
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation.  For more
 * information on the Apache Software Foundation, please see
 * <http://www.apache.org/>.
 *
 * [Additional notices, if required by prior licensing conditions]
 *
 */

import java.io.File;
import java.io.FileInputStream;

import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.methods.InputStreamRequestEntity;
import org.apache.commons.httpclient.methods.PostMethod;

/**
 *
 * This is a sample application that demonstrates
 * how to use the Jakarta HttpClient API.
 *
 * This application sends an XML document
 * to a remote web server using HTTP POST
 *
 * @author Sean C. Sullivan
 * @author Ortwin Glück
 * @author Oleg Kalnichevski
 */
public class PostXML {

    /**
     *
     * Usage:
     *          java PostXML http://mywebserver:80/ c:\foo.xml
     *
     *  @param args command line arguments
     *                 Argument 0 is a URL to a web server
     *                 Argument 1 is a local filename
     *
     */
    public static void main(String[] args) throws Exception {

        if (args.length != 2) {
            System.out.println(
                "Usage: java -classpath <classpath> [-Dorg.apache.commons."+
                "logging.simplelog.defaultlog=<loglevel>]" +
                " PostXML <url> <filename>]");

            System.out.println("<classpath> - must contain the "+
                "commons-httpclient.jar and commons-logging.jar");

            System.out.println("<loglevel> - one of error, "+
                    "warn, info, debug, trace");

            System.out.println("<url> - the URL to post the file to");
            System.out.println("<filename> - file to post to the URL");
            System.out.println();
            System.exit(1);
        }

        // Get target URL
        String strURL = args[0];

        // Get file to be posted
        String strXMLFilename = args[1];
        File input = new File(strXMLFilename);

        // Prepare HTTP post
        PostMethod post = new PostMethod(strURL);

        // Request content will be retrieved directly
        // from the input stream
        // Per default, the request content needs to be buffered
        // in order to determine its length.
        // Request body buffering can be avoided when
        // content length is explicitly specified
        post.setRequestEntity(new InputStreamRequestEntity(
                new FileInputStream(input), input.length()));

        // Specify content type and encoding
        // If content encoding is not explicitly specified
        // ISO-8859-1 is assumed
        post.setRequestHeader(
                "Content-type", "text/xml; charset=ISO-8859-1");

        // Get HTTP client
        HttpClient httpclient = new HttpClient();

        // Execute request
        try {

            int result = httpclient.executeMethod(post);

            // Display status code
            System.out.println("Response status code: " + result);

            // Display response
            System.out.println("Response body: ");
            System.out.println(post.getResponseBodyAsString());

        } finally {
            // Release current connection to the connection pool 
            // once you are done
            post.releaseConnection();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:52:27.997

在这种情况下不需要 JMS，它是为异步消息而不是请求响应而设计的。

你需要的是 Spring 的`RestTemplate`. 它与 HttpClient 类似，但如果您有模式，它将为您处理编组。

# ruby - 嵌套收益或转换是否更快？

> ID：12348853
> 
> 赞同：3
> 
> 时间：2012-09-10T09:28:33.127
> 
> 标签：ruby, yield

在 Ruby 中，经常说这`yield`比将块转换为`Proc`.

例如：

```
def method
  yield
end 
```

比

```
def method &block
  block.call
end 
```

但是，如果需要将一个块作为参数传递几层深怎么办？`yield`无论您向下传递多少层，总是更快？它取决于多少层，还是取决于每个闭包中的变量数量？

我问的原因是因为`yield`多层深度涉及多次将其包装成一个块，而将其转换为 a`Proc`可能只需执行一次即可节省时间。我也想知道是否取决于`to_proc`方法中需要打包多少变量。

因此，哪个更快：

嵌套收益率？

```
def method1;method2 {yield};end
def method2;method3 {yield};end
  ...
def methodn;yield;end 
```

还是`&block`？

```
def method1 &block;method2 &block;end
def method2 &block;method3 &block;end
  ...
def methodn &block;block.call;end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:37:28.207

```
require "benchmark"

def test_yield
    yield
end

def test_block(&block)
    block.call
end

Benchmark.bm do |b|

    b.report("test_yield") {
        10000.times{ test_yield {1+1} }
    }

    b.report("test_block") {
        10000.times{ test_block {1+1} }
    }

end

      user     system      total        real
test_yield  0.000000   0.000000   0.000000 (  0.002623)
test_block  0.000000   0.000000   0.000000 (  0.009497) 
```

似乎 Yield 比 block.call 更快。我很想知道为什么。

# svn-merge - 颠覆：在已经合并的代码（对于 rev A）上使用 svn merge 命令（与 rev B）是否正确

> ID：12348857
> 
> 赞同：1
> 
> 时间：2012-09-10T09:28:56.360
> 
> 标签：svn-merge

我已经将我的代码与一个修订分支合并（比如 X），现在另一个分支中有提交，我想在合并的代码中进行这些更改（尚未提交）。现在我可以在已经修改过的文件上运行 svn merge 命令（比如版本 Y）。

假设在我的仓库中我有 src 文件（比如 tmp1.c. tm2.c）

代码 ：

```
 $>svn merge rev@branch_out : orig_rev@merge url/to/the/branch/that/is/being/merged/
    U tmp1.c
    A tmp3.c

    $>svn st
    M   tmp1.c
    A + tmp3.c 
```

现在的问题是我能再做一次吗

```
 $>svn merge rev@branch_out : new_rev@merge url/to/the/branch/that/is/being/merged/ 
```

# ghostscript - 如何更改 Ghostscript 输出文件（在打印机后台处理程序中）

> ID：12348864
> 
> 赞同：5
> 
> 时间：2012-09-10T09:29:30.900
> 
> 标签：ghostscript

我正在使用 Ghostscript 通过命令行参数打印 PDF。但它在打印机假脱机程序中将打印文档的名称显示为 Ghostscript 输出。我想将其更改为自定义名称（作为字母的名称）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:19:01.197

请参阅[http://www.ghostscript.com/doc/9.06/Devices.htm#Win中的文档](http://www.ghostscript.com/doc/9.06/Devices.htm#Win)

特别是第 10.2 节中有一个示例，其中解释了可以在第 10.3 节中指定的参数。只需更改文档名称即可：

```
mark /UserSettings <</DocumentName (MyDocName)>> (mswinpr2) finddevice putdeviceprops setdevice 
```

这可以像示例中那样放入文件中，也可以放在选项**后面**的命令行上的字符串中。`-c`如果您使用 -c 而不是将上述 PostScript 放入安装文件中，请将其作为之前的最后一个选项`-f`和输入文件名放入。

**注意：**您不应该**在**`-sDEVICE=mswinpr2`命令行上指定- **setdevice**会处理这个问题。我在笔记本电脑上使用命令行对此进行了测试：

```
gswin32c \
  -dNOPAUSE -dBATCH \
  -c "mark /UserSettings <</DocumentName (MyDocName)>> (mswinpr2) finddevice putdeviceprops setdevice" \
  -f examples/colorcir.ps 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-07T10:47:56.463

如果`sPAPERSIZE`忽略该开关，也许可以通过使用适当的开关来强制页面大小。

[如何使用 Ghostscript](https://www.ghostscript.com/doc/current/Use.htm)手册 在 [选择纸张大小](https://www.ghostscript.com/doc/current/Use.htm#Paper_size)部分中说：

```
Otherwise you can set the page size using the pair of switches

    -dDEVICEWIDTHPOINTS=w -dDEVICEHEIGHTPOINTS=h 

Where w be the desired paper width and h be the desired paper height in points (units of 1/72 of an inch). 
```

[附录：Ghostscript 已知的纸张尺寸](https://www.ghostscript.com/doc/current/Use.htm#Known_paper_sizes)部分 ，A4 尺寸定义为 w=595 和 h=842。

[![enter image description here](../Images/6e027b40218e7684d19485e6a119f4d8.png)](https://i.stack.imgur.com/DbvzZ.jpg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T04:30:08.517

为此，您必须使用[以下链接](http://ghostscript.com/doc/7.07/Devices.htm#BJC_PPD)`setup.ps`中的文件：6.2 支持的选项（设备属性）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-10T11:16:01.873

*这为该问题提供了部分解决方案，这对于您的需求可能是可以接受的。*

控制输出大小的选项是（markdown 插入空格，但应该没有）：

1.  `-dDEVICEWIDTHPOINTS=`*`w`*, `-dDEVICEHEIGHTPOINTS=`*`h`* (w,h=595,842 / 612,792 分别用于 A4 / letter), [Ref](https://www.ghostscript.com/doc/9.52/Use.htm#Paper_size) .

2.  `-sPAPERSIZE=`*`size`*，[参考](https://www.ghostscript.com/doc/9.52/Use.htm#Paper_size)。

3.  `-g`*`number1`*`x`*`number2`* (number1,number2=5953,8419 / 6120,7920 分别用于 A4 / letter), [Ref](https://www.ghostscript.com/doc/9.52/Use.htm#General_switches) .

4.  `-dDEVICEWIDTH=`*`number1`*, `-dDEVICEHEIGHT=`*`number2`* (number1,number2=5953,8419 / 6120,7920 分别用于 A4 / letter), [Ref](https://www.ghostscript.com/doc/9.52/Use.htm#General_switches) .

I have tested the four of them, printing a pdf file to pdf, trying to convert (letter -> A4) and (A4 -> letter). The command line I used is

```
gswin32c -dPDF -dBATCH -dNOPAUSE -dFIXEDMEDIA <size setting flags> -sDEVICE=pdfwrite -sOutputFile=output.pdf input.pdf 
```

A4 -> letter always worked well.
letter -> A4 only worked for the width, so `output.pdf` was always 210mm x 279.4mm.

Using, e.g., `-dDEVICEWIDTHPOINTS` alone for letter -> A4 produced the same result.

Adding flag `-dPDFFitPage` was also useful for partially adapting size (in cases I want to do that).

My conclusion is that there is some bug in Ghostscript specifically related to letter -> A4 conversion. Whether this could be handled via `gs_setpd.ps` (e.g., [this](https://ghostscript.com/pipermail/gs-devel/2008-May/007776.html); this would still be a bug), or a crafty combination of (`-dUseBleedBox`, `-dUseTrimBox`, `-dUseArtBox`, `-dUseCropBox`) I don't know.

# refactoring - 您如何使用 TDD 拆分课程？

> ID：12348867
> 
> 赞同：3
> 
> 时间：2012-09-10T09:29:46.167
> 
> 标签：refactoring, tdd

感觉自己对TDD很熟练，甚至被我公司认为是“TDD专家”，不过还是有一些情况我觉得不知道怎么处理好，想听听其他人的意见.

我的问题如下：尽管总体上 TDD 帮助我思考一个类的核心职责，并将所有其他职责提取到依赖类，但在某些情况下，一段时间后我意识到其中一个类有多个职责，并且它需要重构并将其拆分为 2 个类。这个结论通常是因为该类的测试开始变得复杂或重复。我可以很容易地进行重构，将这个类拆分为我想要的设计（我分小步进行，保持在绿色栏上）。我的问题是我最终得到了现在一起测试两个类的同样复杂和重复的测试，而我想对每个类进行单独的测试。我能想到的唯一（或多或少安全）的方式，

1.  复制测试用例
2.  将测试的一个副本更改为使用模拟而不是第一类，并将测试的另一个副本更改为使用模拟而不是第二类。
3.  然后，如果我发现其中一个副本已经存在相同的测试，我将其删除。

我认为有时可以执行以下操作：

1.  首先从头开始创建 2 个类（当然使用 TDD）
2.  更改旧测试以使用新类而不是旧类
3.  删除旧类
4.  删除旧测试

这两种技术看起来都非常麻烦和耗时，所以我想知道：“真正的专家”如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:44:08.517

没有一个实际的例子，我不能确定我知道你的意思。但听起来你试图孤立​​地测试每个类（甚至可能是每个方法）。

当我想要/必须将一个类拆分为多个类时，我仍然倾向于将生成的类集合视为一个单元并作为一个整体进行测试。只有当它们停止构建功能整体并开始成为独立单元时，我才会对它们进行独立测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T06:52:34.203

我首先问自己（就像你一样）一个班级的职责是什么。例如，假设您的班级负责*汇总天气数据* **并** *生成天气报告*。

在这一点上，我列出了三 (3) 个列表：

*   数据聚合成员（属性、行为）
*   报告生成成员
*   **共同**成员

前两个很容易，完全属于一个类的成员完全成为两个新类之一的一部分。我将保留原来的双重职责类作为**外观**，其成员是新类的传递，**因此在重构时不会破坏测试和功能**。根据情况，我最终可能会移除外观，并重构测试和依赖对象以使用新类。

至于两个职责共有的成员——我将把它们移到一个帮助类（通常范围为内部），新类（以及任何其他类可能使用）。该功能已被证明可以重复使用，并且可以再次重复使用。请注意，普通成员不一定都属于一个助手类；可以将帮助功能添加到一个新类、多个（当然取决于职责）类中，如果适合的话，可以将某些功能添加到现有帮助器类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T05:43:47.020

> 我可以很容易地进行重构，将这个类拆分为我想要的设计（我分小步进行，保持在绿色栏上）。我的问题是我最终得到了现在一起测试两个类的同样复杂和重复的测试，而我想对每个类进行单独的测试。

我也走到了这一步。在这里，我开始重构测试，使用与非测试代码相同的技术——将变量转换为字段、移动字段、提取方法、移动变量等。命名当然非常重要，并提供了很多设计指导。

例如[http://www.kdgregory.com/index.php?page=junit.refactoring](http://www.kdgregory.com/index.php?page=junit.refactoring) 例如[http://www.natpryce.com/articles/000686.html](http://www.natpryce.com/articles/000686.html) 例如[http://www-public.it-sudparis.eu /~gibson/Teaching/CSC7302/ReadingMaterial/vanDeursenMdenBK01.pdf](http://www-public.it-sudparis.eu/~gibson/Teaching/CSC7302/ReadingMaterial/vanDeursenMdenBK01.pdf)

最后一篇文章有​​一些示例气味和重构常见于重构测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:23:19.817

前段时间我想知道这个问题，并没有真正找到令人满意的答案。以下是我发现的关于该主题的一些讨论：

[http://tech.groups.yahoo.com/group/testdrivendevelopment/message/27199](http://tech.groups.yahoo.com/group/testdrivendevelopment/message/27199)

和

[http://tech.groups.yahoo.com/group/testdrivendevelopment/message/16227](http://tech.groups.yahoo.com/group/testdrivendevelopment/message/16227)

就个人而言，我采用了一种“一触即发”的方法来将责任转移到依赖关系中，虽然在明确需要新的依赖关系之前“剥离”它有点 YAGNI 的味道，但我发现重新吸收依赖关系事实证明，这太乏力了，不能保证成为一个单独的类，这比从已经为它编写了大量测试的类中分离出一个单独的类所涉及的繁琐工作要容易得多。

编辑：

哦-我可能应该指出我根本不是“真正的专家”；）

# android - 如何在 Android 应用中实现评分功能？

> ID：12348868
> 
> 赞同：4
> 
> 时间：2012-09-10T09:29:49.083
> 
> 标签：android, rating

我正在开发一个安卓应用程序。我想在 android 市场中实现费率功能？应用程序退出中有按钮。我希望当我单击退出时，应该打开一个弹出窗口，该页面重定向到 android 市场评级页面。如果已评级，则不应在 android 市场上重定向并显示您已评级 alreay 消息。我怎样才能实现 this.api 在添加评级后返回任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:32:02.003

要重定向到您的应用，您可以使用：

```
Uri marketUri = Uri.parse("market://details?id=" + packageName);
Intent marketIntent = new Intent(Intent.ACTION_VIEW, marketUri);
startActivity(marketIntent); 
```

此外，要检查是否已评级，请在 SharedPreferences 中保存一个布尔值并检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:32:37.780

在应用程序中对 Android 应用程序进行评级

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=com.test(package name)"));
startActivity(intent); 
```

# iphone - 根据所选国家/地区获取州列表

> ID：12348872
> 
> 赞同：5
> 
> 时间：2012-09-10T09:30:02.187
> 
> 标签：iphone, objective-c, ios, api, countries

我想检索从下拉菜单中选择的特定国家/地区的所有州列表的名称。

我知道如何通过苹果代码检索所有国家的列表，但现在我想要所有州的列表。

是否有任何代码数据库或 API 可用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T09:43:55.963

你可以[下载](https://dl.dropboxusercontent.com/s/37n3e5izecvccy4/Country.sqlite)这个 sqlite 文件。这是一个国家数据库及其各自的州。每次用户选择国家时，您都可以重新创建查询。

```
NSString *queryString = [NSString stringWithFormat:@"select zone_id , name from
                       zone where country_id = %d", countryID]; 
```

# iphone - 如何在iphone的Dropbox中上传文件？

> ID：12348877
> 
> 赞同：1
> 
> 时间：2012-09-10T09:30:22.693
> 
> 标签：iphone, dropbox

我已经编写了将图像从文档目录上传到 Dropbox 的示例相册的代码。但它并不像我想要的那样工作。

我的代码：

```
 -(NSString *)getDocumentPath{

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *path = [[paths objectAtIndex:0]stringByAppendingPathComponent:@"image1.jpg"];
NSLog(@"path:%@",path);
return path;
}

-(IBAction)uplaodingPhotos:(id)sender
{
  NSString *path = [self getDocumentPath];
    [[self restClient] uploadFile:@"splash.jpg" toPath:@"/Photos/Sample Album"
                withParentRev:nil fromPath:path]; 
```

}

在此代码中，我想将文档目录中的图像 image1 添加到 Dropbox 中的示例相册。但它不会复制图像。现在我该怎么办？

请帮忙。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:42:41.893

首先，您需要确保您已连接到 Dropbox 会话，并且您的休息客户端不是空的。

有关更多信息，请检查 URL：[https ://www.dropbox.com/developers/start/authentication#ios](https://www.dropbox.com/developers/start/authentication#ios)

# android - 从微调器读取输入

> ID：12348879
> 
> 赞同：1
> 
> 时间：2012-09-10T09:30:36.420
> 
> 标签：android, spinner

如何从微调器获取输入。我有三个选项，它们是单词。我想为每个人分配一个数字，以便我可以进行计算。像选项 hat = 5 和 toy = 10。然后让我的数学问题查看用户选择的内容并将其替换为数值。

编辑：1.查看微调器 1 输入。2\. 为字符串分配一个数值。3\. 在数学问题中插入字符串。

抱歉，希望这能更好地解释它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:01:45.343

您可以创建一个字符串数组，其中将存储帽子、玩具等，也可以创建另一个 int 数组，其中将存储与该字符串数组对应的值。现在在微调器中显示字符串数组，然后在该微调器上添加项目选择的侦听器，以获取从您获得项目编号的位置触摸哪个字符串名称，然后从 int 数组中获取值。我认为这会做。

```
String[] item_name  = {"hat","toy"};
int[] item_value  = {5,10};

spinner = (Spinner) findViewById(R.id.spnr);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            this, android.R.layout.simple_spinner_item, item_name);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter); 
```

事件监听器会像

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub

            Toast.makeText(getApplicationContext(), item_name[arg2]+"|"+item_value[arg2], Toast.LENGTH_SHORT).show();

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
        }
    }); 
```

# xcode - 在 Xcode 中更改提交者的名称

> ID：12348881
> 
> 赞同：1
> 
> 时间：2012-09-10T09:30:39.173
> 
> 标签：xcode, git

我正在与其他开发人员一起开发 iOS 应用程序，现在他不与我们合作，我正在使用他的计算机，但问题是当我推送我的代码时，我看到他的名字出现在 github 中。我怎样才能改变它并将我​​的名字出现在 github 中。谢谢你的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:36:19.307

你的项目目录中是否有 .gitconfig 文件，如果有，`cd`进入项目目录并运行以下命令将其设置为你的项目的 .gitconfig 文件中的姓名和电子邮件

```
git config user.name "Your Name"
git config user.email "your-email-address@email.com" 
```

如果您的项目目录中没有 .gitconfig 文件，则它可能使用位于主目录 ( `~/`) 中的全局 .gitconfig 文件。只需添加`--global`标志即可为所有项目在全局基础上设置它（注意，如果项目目录中有 .gitconfig 文件，它将使用该文件而不是主目录中的全局 .gitconfig ）

```
git config --global user.name "Your name"
git config --global user.email "your-email-address@email.com" 
```

# jquery - JQuery UI 可拖动元素在 Chrome 中留下奇怪的痕迹

> ID：12348884
> 
> 赞同：16
> 
> 时间：2012-09-10T09:30:43.550
> 
> 标签：jquery, css, jquery-ui, google-chrome

我正在尝试在这里制作我的第一个 chrome 扩展。这是一个便签板。但是，当我尝试使用 JQueryUI 拖动板上的第一个元素时，它会在 chrome 中留下水平线作为痕迹。

这是一个屏幕截图。

![截屏](../Images/9c31eb74eb79a08121737b5a46e6ea60.png)

这是代码。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Sticky notes using CSS3 and Google Fonts (Step 5)</title>
<link  href="http://fonts.googleapis.com/css?family=Reenie+Beanie:regular" rel="stylesheet" type="text/css"> 
<style type="text/css">

body{
  font-family:arial,sans-serif;
  font-size:100%;
  background:#666;
  color:#fff;
}
h2,p{
  font-size:100%;
  font-weight:normal;
}
ul,li{
  list-style:none;
}
ul{
  overflow:hidden;
  padding:3em;
}
ul li div{
  color:#000;
  background:#ffc;
  min-height:10em;
  min-width:10em;
  padding:1em;
  -moz-box-shadow:5px 5px 7px rgba(33,33,33,1);
  -webkit-box-shadow: 5px 5px 7px rgba(33,33,33,.7);
  box-shadow: 5px 5px 7px rgba(33,33,33,.7);
  -moz-transition:-moz-transform .15s linear;
  -o-transition:-o-transform .15s linear;
  -webkit-transition:-webkit-transform .15s linear;
}
ul li{
  margin:1em;
  float:left;
}
ul li h2{
  font-size:140%;
  font-weight:bold;
  padding-bottom:10px;
}
ul li p{
  font-family:"Reenie Beanie",arial,sans-serif;
  font-size:180%;
}
ul li div{
  -webkit-transform: rotate(-6deg);
  -o-transform: rotate(-6deg);
  -moz-transform:rotate(-6deg);
}
ul li:nth-child(even) div{
  -o-transform:rotate(4deg);
  -webkit-transform:rotate(4deg);
  -moz-transform:rotate(4deg);
  position:relative;
  top:5px;
  background:#cfc;
}
ul li:nth-child(3n) div{
  -o-transform:rotate(-3deg);
  -webkit-transform:rotate(-3deg);
  -moz-transform:rotate(-3deg);
  position:relative;
  top:-5px;
  background:#ccf;
}
ul li:nth-child(5n) div{
  -o-transform:rotate(5deg);
  -webkit-transform:rotate(5deg);
  -moz-transform:rotate(5deg);
  position:relative;
  top:-10px;
}
ul li div:hover,ul li div:focus{
  box-shadow:10px 10px 7px rgba(0,0,0,.7);
  -moz-box-shadow:10px 10px 7px rgba(0,0,0,.7);
  -webkit-box-shadow: 10px 10px 7px rgba(0,0,0,.7);
  -webkit-transform: scale(1.25);
  -moz-transform: scale(1.25);
  -o-transform: scale(1.25);
  position:relative;
  z-index:5;
}
ol{text-align:center;}
ol li{display:inline;padding-right:1em;}
ol li div{color:#fff;}
</style>
<script src="jquery-1.8.0.min.js"></script>
<script src="jquery-ui-1.8.23.custom.min.js"></script>
<script src="step.js"></script>
</head>
<body>
  <ol>
    <li><a href="step1.html">Step #1</a></li>
    <li><a href="step2.html">Step #2</a></li>
    <li><a href="step3.html">Step #3</a></li>
    <li><a href="step4.html">Step #4</a></li>
    <li><strong>Step #5</strong></li>
    <li><a href="#"></a></li>
  </ol>
  <ul>
    <li >
      <div class="dragable">
        <h2>Title #1</h2>
        <p >Text Content #1</p>

      </div>
    </li>
    <li>
      <div class="dragable">
        <h2>Title #2</h2>
        <p>Text Content #2</p>
      </div>
    </li>
    <li>
      <div class="dragable">
        <h2>Title #3</h2>
        <p>Text Content #3</p>
      </div>
    </li>
    <li>
      <div class="dragable">
        <h2>Title #4</h2>
        <p>Text Content #4</p>
      </div>
    </li>
    <li>
      <div class="dragable">
        <h2>Title #5</h2>
        <p>Text Content #5</p>
      </div>
    </li>
    <li>
      <div class="dragable">
        <h2>Title #6</h2>
        <p>Text Content #6</p>
      </div>
    </li>
    <li>
      <div class="dragable">
        <h2>Title #2</h2>
        <p>Text Content #2</p>
      </div>
    </li>
    <li>
      <div class="dragable">
        <h2>Title #7</h2>
        <p>Text Content #7</p>
      </div>
    </li>
    <li>
      <div class="dragable">
        <h2>Title #8</h2>
        <p>Text Content #8</p>
      </div>
    </li>
  </ul>
</body>
</html> 
```

和 javascript

```
$(document).ready(function() {
    $(function() {
        $(".dragable").draggable().bind('click', function(){
          $(this).focus();
        });
    });

    $('.dragable').bind('click', function() {
        $(this).attr('contenteditable', 'true');
    }).blur(
        function() {
            $(this).attr('contenteditable', 'false');
        });
}) 
```

注意：经过一些实验，我发现问题出在 -webkit-transform 如果我将它们注释掉，问题就不会出现。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-10T12:55:46.500

最后我有一个可行的解决方法。

只需 `outline: 1px solid transparent;` 在 div 上使用即可解决问题:)

这是一个抗锯齿问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:40:08.510

它是一个 crom 重绘错误

[http://blog.andrewcantino.com/blog/2012/02/15/fixing-the-chrome-background-refresh-bug/](http://blog.andrewcantino.com/blog/2012/02/15/fixing-the-chrome-background-refresh-bug/)

看看这个可能你会得到你的sloution。

# objective-c - iPad绘画应用程序上的递归洪水填充

> ID：12348890
> 
> 赞同：-2
> 
> 时间：2012-09-10T09:31:32.223
> 
> 标签：objective-c, ios, xcode, ipad

我在我的 ipad 绘画应用程序上使用递归洪水填充算法，我认为它会因堆栈溢出而崩溃。有人可以用示例代码或好的建议帮助我解决这个问题，因为我是菜鸟吗？

```
-(void)paintingBucket:(int)point point2:(int)point2 width:(int)width colorAtPoint:(UIColor *)color {

int offset = 0;
int x = point;
int y = point2;
offset = 4*((width*round(y))+round(x));

if (((x<1025 && y<705)||(x<1025) ||(y<705)) && (x>0 && y>0) && (offset<2887648)) {

    int alpha = data[offset];
    int red = data[offset + 1];
    int green = data[offset + 2];
    int blue = data[offset + 3];
    color1 = [UIColor colorWithRed:(green/255.0f) green:(red/255.0f) blue:(alpha/255.0f) alpha:(blue/255.0f)];

        if (![color1 isEqual: color] ) {
            return;
        } else {
            color3 = self.currentColor ;
            CGFloat r,g,b,a;
            [color3 getRed:&r green:&g blue: &b alpha: &a];
            int reda = (int)(255.0 * r);
            int greena = (int)(255.0 * g);
            int bluea = (int)(255.0 * b);
            int alphaa = (int)(255.0 * a);
            // NSLog(@" red: %u green: %u blue: %u alpha: %u", reda, greena, bluea, alphaa);

            data[offset + 3] = alphaa;
            data[offset + 2] = reda;
            data[offset + 1] = greena;
            data[offset] = bluea;
        }
    }

    [self paintingBucket:x+1 point2:y    width:width colorAtPoint:color];
    [self paintingBucket:x-1 point2:y    width:width colorAtPoint:color];
    [self paintingBucket:x   point2:y+1  width:width colorAtPoint:color];
    [self paintingBucket:x   point2:y-1  width:width colorAtPoint:color];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:53:30.913

这是一个幼稚的例子，它使它成为一个动态算法，而不是递归的。

```
NSMutableArray *pointsToRender = [NSMutableArray new];
[pointsToRender addObject:startingPoint];

while (pointsToRender.length>0) {

    // Get a point from the array and fill it
    MyPoint *point = [pointsToRender lastObject];
    [pointsToRender removeLastObject];
    [self drawColor:color atPoint:point];

    // Are any surrounding points needing to be filled?
    if (point 1px above) needs to be filled
        [pointsToRender addObject : point1Above];
    .. repeat for the other three points

} 
```

是的，这是半客观的 C 和半伪代码，对不起。但你明白了。在英语中是这样的：

*   制作一个需要填充的点数组，其中包含起点。
*   对于每个点
    *   填充
    *   从数组中删除它
    *   看看它的邻居。如果还需要填充每个邻居，则将其添加到数组中
    *   重复直到要填充的点数组为空

这将消耗堆，而不是堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:16:45.807

我用这两种方法解决了我的问题。它有点慢，但我正在努力优化这个解决方案。

```
-(void)fillRight:(int)x point2:(int)y witdh:(int)width {
int x1 = x;
int y1 = y;

int offset = 4*((width*round(y1))+round(x1));
int alpha = data[offset];
int red = data[offset + 1];
int green = data[offset + 2];
int blue = data[offset + 3];
color1 = [UIColor colorWithRed:(green/255.0f) green:(red/255.0f) blue:(alpha/255.0f) alpha:(blue/255.0f)];
// NSLog(@"%d %d %@ %@", x,y,color,color1);

if([color1 isEqual: color])
{
    color3 = self.currentColor ;
    CGFloat r,g,b,a;
    [color3 getRed:&r green:&g blue: &b alpha: &a];
    int reda = (int)(255.0 * r);
    int greena = (int)(255.0 * g);
    int bluea = (int)(255.0 * b);
    int alphaa = (int)(255.0 * a);
    // NSLog(@" red: %u green: %u blue: %u alpha: %u", reda, greena, bluea, alphaa);

    data[offset + 3] = alphaa;
    data[offset + 2] = reda;
    data[offset + 1] = greena;
    data[offset] = bluea;

    [self fillRight:++x1 point2:y1 witdh:width];
    x1 = x1 - 1 ;
    [self fillRight:x1 point2:y1-1 witdh:width];
    [self fillRight:x1 point2:y1+1 witdh:width];
}
}

-(void)fillLeft:(int)x point2:(int)y width:(int)width {
int x1 = x;
int y1 = y;

int offset = 4*((width*round(y1))+round(x1));
int alpha = data[offset];
int red = data[offset + 1];
int green = data[offset + 2];
int blue = data[offset + 3];
color1 = [UIColor colorWithRed:(green/255.0f) green:(red/255.0f) blue:(alpha/255.0f) alpha:(blue/255.0f)];
// NSLog(@"%d %d %@ %@", x,y,color,color1);

if([color1 isEqual: color])
{
    color3 = self.currentColor ;
    CGFloat r,g,b,a;
    [color3 getRed:&r green:&g blue: &b alpha: &a];
    int reda = (int)(255.0 * r);
    int greena = (int)(255.0 * g);
    int bluea = (int)(255.0 * b);
    int alphaa = (int)(255.0 * a);
    // NSLog(@" red: %u green: %u blue: %u alpha: %u", reda, greena, bluea, alphaa);

    data[offset + 3] = alphaa;
    data[offset + 2] = reda;
    data[offset + 1] = greena;
    data[offset] = bluea;

    [self fillLeft:--x1 point2:y1 width:width];
    x1 = x1 + 1 ;
    [self fillLeft:x1 point2:y1-1 width:width];
    [self fillLeft:x1 point2:y1+1 width:width];
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:36:14.523

我个人更喜欢使用 A* 算法进行洪水填充。基本上，您为访问的节点着色。在搜索已知位于填充区域之外的点的路径时。（-1，-1 可以解决问题）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:16:49.483

将函数分解为 fillRight 和 fillLeft 方法并不是长久之计，因为如果图像变大，可能会再次发生溢出。

我建议使用更快的洪水填充算法。Wikipedia 上描述的 4-Way 洪水填充很容易实现，但每个点都要经过四次。

我建议使用扫描线填充：请参阅[http://lodev.org/cgtutor/floodfill.html](http://lodev.org/cgtutor/floodfill.html) - Scanline Floodfill Algorithm With Stack。我在我的绘图应用程序中替换了我的 4 向洪水填充，现在它更快并且在不到一秒的时间内填充了 1024x768 像素的区域。当然，速度可能会因您的实施而异。

最后，一些注意事项：

1.您可以使用CGPoint将点存储在数组中。

```
CGPoint point=CGPointMake(100, 50); //Declare a point and put a value in it 
```

然后您可以使用 point.x 和 point.y 获取和设置 x 和 y 值

2.按照deanWombourne的建议，使用数组存储要检查的点。

```
NSMutableArray * pointsToCheck=[[NSMutableArray alloc]init];//Initialise the array
[pointsToCheck addObject:[NSValue valueWithCGPoint:start]];//Assuming you have a CGPoint start, you need to convert it to a NSValue before you put it into the array like [NSValue valueWithCGPoint:point]

while ([pointsToCheck count]>0){//While there are points to be checked:
    NSValue * pointValue=[pointsToCheck objectAtIndex:0];//Get the point: It doesn't matter if you get the first or last item
    [pointsToCheck removeObjectAtIndex:0];//Remove the point from the queue so we won't go through it again

    CGPoint point=[pointValue CGPointValue];//Get the CGPoint from the NSValue object

    //Implement your algorithm here: check for neighbour points, paint the current point or whatever. I'd recommend  using scanline fill - see above
    //When you need to add a point to the queue (If it was a recursive function, then you'd call the function from itself with different parameters) use:
    [pointsToCheck addObject:[NSValue valueWithCGPoint:newPoint];
} 
```

# c# - C# 我如何检索这些信息？

> ID：12348899
> 
> 赞同：0
> 
> 时间：2012-09-10T09:32:21.503
> 
> 标签：c#, html, winforms

在 HTML 页面上，我有类似的东西

```
<table class="information">
<tbody>
<tr>
<td class="name">Name:</td>
<td><a href="example.com">John</a></td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
....
</tbody>
</table> 
```

如何检索名称（还有其他信息，但在我的示例中我只写了名称）？

注意：HTML 有不止一张表

我试过这个

```
foreach (HtmlElement item in wb.Document.GetElementsByTagName("table"))
{
    if (item.OuterHtml.Contains("information"))
    {
        ... //Here i don't know how to continue
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:40:21.180

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var table = doc.DocumentNode.SelectSingleNode("//table[@class='information']");
var td = table.SelectSingleNode("//td[@class='name']");

Console.WriteLine(td.InnerText); 
```

或者

```
var text = doc.DocumentNode.Descendants("td")
    .First(td => td.Attributes["class"] != null && td.Attributes["class"].Value == "name")
    .InnerText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:47:30.987

```
HtmlElementCollection tData = wb.Document.GetElementsByTagName("td");

                foreach (HtmlElement td in tData)
                {
                    string name = "";
                    if (td.GetAttribute("classname") == "name")
                    {
                        name = td.InnerText;
                    }
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:34:18.573

查看[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/) - 它是免费且非常好的库，可用于处理 html 源代码。

# android - 获取图像到列表视图

> ID：12348902
> 
> 赞同：0
> 
> 时间：2012-09-10T09:32:28.447
> 
> 标签：android, listview

我正在使用图像+文本制作自定义列表视图，这是我的代码：

listDoctor.java

```
public void cek(){

           String url_select = "http://10.0.2.2/BloodGlucose/selectDoctor.php";

           HttpClient httpClient = new DefaultHttpClient();
           HttpPost httpPost = new HttpPost(url_select);

           //parameter
           ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

           try {
              //add parameter
               httpPost.setEntity(new UrlEncodedFormEntity(param));

             HttpResponse httpRespose = httpClient.execute(httpPost);
             HttpEntity httpEntity = httpRespose.getEntity();

             //read content
             InputStream in = httpEntity.getContent();
             BufferedReader read = new BufferedReader(new InputStreamReader(in));

             String content = "";
             String line = "";

             while((line = read.readLine())!=null){
                content += line;
             }

             Log.d("ADBUG", "content: "+content);

             //json
             if(!content.equals("null")){

                try {
                   JSONArray jArr = new JSONArray(content);
                   for(int i=0;i<jArr.length();i++){
                      JSONObject jObj = jArr.getJSONObject(i);
                      String id = jObj.getString("_id");
                      String name = jObj.getString("name");
                      String dateofbirth = jObj.getString("dateofbirth");
                      String phone = jObj.getString("telp");
                      String address = jObj.getString("clinicaddress");
                      String file = jObj.getString("file");
                      String uname = jObj.getString("username_doctor");
                      String lulusan = jObj.getString("lulusan");
                      String clinicname = jObj.getString("clinicname");

                      names.add(name);
                      date.add(dateofbirth);
                      telp.add(phone);      
                      clinic.add(address);
                      usernamedoctor.add(uname);
                      namaklinik.add(clinicname);
                      graduate.add(lulusan);

                   }

                   setListAdapter(new DoctorArrayAdapter(this, names));

                } catch (JSONException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
                }

             }else{
                Toast.makeText(this, "Error", Toast.LENGTH_LONG).show();
             }

          } catch (ClientProtocolException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
          } catch (IOException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
          }
       } 
```

DoctorArrayAddapter.java

```
package research.android.bloodglucose;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import research.android.bloodglucose.R;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class DoctorArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final ArrayList<String> values;
    private ImageView imageView;

    public DoctorArrayAdapter(Context context, ArrayList<String> names) {
        super(context, R.layout.list_row, names);
        this.context = context;
        this.values = names;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_row, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.DoctorName);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.list_image);
        textView.setText(values.get(position));

        // Change icon based on name
        String s = values.get(position);

        System.out.println(s);

        /*if (s.equals("WindowsMobile")) {
            imageView.setImageResource(R.drawable.windowsmobile_logo);
        } else if (s.equals("iOS")) {
            imageView.setImageResource(R.drawable.ios_logo);
        } else if (s.equals("Blackberry")) {
            imageView.setImageResource(R.drawable.blackberry_logo);
        } else {
            imageView.setImageResource(R.drawable.android_logo);
        }*/
 cek();
        return rowView;
    }

    public void cek(){

           String url_select = "http://10.0.2.2/BloodGlucose/selectDoctor.php";

           HttpClient httpClient = new DefaultHttpClient();
           HttpPost httpPost = new HttpPost(url_select);

           //parameter
           ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

           try {
              //add parameter
               httpPost.setEntity(new UrlEncodedFormEntity(param));

             HttpResponse httpRespose = httpClient.execute(httpPost);
             HttpEntity httpEntity = httpRespose.getEntity();

             //read content
             InputStream in = httpEntity.getContent();
             BufferedReader read = new BufferedReader(new InputStreamReader(in));

             String content = "";
             String line = "";

             while((line = read.readLine())!=null){
                content += line;
             }

             Log.d("ADBUG", "content: "+content);

             //json
             if(!content.equals("null")){

                try {
                   JSONArray jArr = new JSONArray(content);
                   for(int i=0;i<jArr.length();i++){
                      JSONObject jObj = jArr.getJSONObject(i);
                      String id = jObj.getString("_id");
                      String name = jObj.getString("name");
                      String dateofbirth = jObj.getString("dateofbirth");
                      String phone = jObj.getString("telp");
                      String address = jObj.getString("clinicaddress");
                      String file = jObj.getString("file");
                      String uname = jObj.getString("username_doctor");
                      String lulusan = jObj.getString("lulusan");
                      String clinicname = jObj.getString("clinicname");

                      String ed = "http://10.0.2.2/BloodGlucose/img/"+uname+".jpg";
                      URL aURL = new URL(ed); 
                      final URLConnection conn = aURL.openConnection(); 
                      conn.connect(); 
                      final BufferedInputStream bis = new BufferedInputStream( 
                              conn.getInputStream()); 
                      final Bitmap bm = BitmapFactory.decodeStream(bis); 
                      bis.close(); 

                      imageView.setImageBitmap(bm);

                   }

                } catch (JSONException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
                }

             }else{

             }

          } catch (ClientProtocolException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
          } catch (IOException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
          }
       }

    private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
          try {
           URL imageUrl = new URL(url);
           InputStream is = (InputStream) imageUrl.getContent();
           Drawable d = Drawable.createFromStream(is, "src");
           return d;
          } catch (MalformedURLException e) {
           e.printStackTrace();
           return null;
          } catch (IOException e) {
           e.printStackTrace();
           return null;
          }
         }

} 
```

问题是，当我运行模拟器时，图像没有显示，它只显示文本，任何人都可以帮助我吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:52:05.817

试试这种类型，我没有使用 JSON，而是通过 URL

```
 ImageView image = (ImageView) row.findViewById(R.id.ThumbImageView);
                if (image != null) {
                    Bitmap bitimage = null;
                    BitmapFactory.Options options = new BitmapFactory.Options();
                    options.inSampleSize = 1;
                    try {
                      //bitimage = BitmapFactory.decodeStream((InputStream) new URL(data.getThumbnail().toString().trim().toString()).getContent(), null, options);
                      bitimage = BitmapFactory.decodeStream((InputStream) new URL(ed).getContent(), null, options);
                        image.setImageBitmap(bitimage);
                    } catch (MalformedURLException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                } 
```

# arrays - CakePHP 无法访问嵌套模型中的数组

> ID：12348907
> 
> 赞同：0
> 
> 时间：2012-09-10T09:32:38.730
> 
> 标签：arrays, cakephp, model

我有一个基于的嵌套关联模型

```
Project=>ProjectDocument=>ProjectDocumentSection=>ProjectDocumentSectionVariable=>Codeset=>Code 
```

我正在使用可包含的行为来获取包含这些元素的特定数组（对于单个项目）。

我已经在它们各自的模型中为这些模型建立了关联。

使用 foreach 我可以查询所有数据，包括`ProjectDocumentSectionVariable level.`

但是，一旦我尝试进入 Codeset 级别，就会出现错误。

相关代码是：

```
foreach ($project['ProjectDocument'] as $project_document): 
if ($project_document['document_type'] == 1) 
{
    foreach ($project_document['ProjectDocumentSection'] as $project_document_section): 
        echo "<h4><a href=\"P4\">" .  $project_document_section['title']. "</a></h4><div><table><th>Variable</th><th>Full text</th><th>Type</th><th>Format</th><th>Codeset</th>" ;
        foreach ($project_document_section['ProjectDocumentSectionVariable'] as $project_document_section_var):
            echo "<tr><td>" . $project_document_section_var['variable_name'] 
                            . "</td><td>".$project_document_section_var['variable_description'] 
                            . "</td><td>".$project_document_section_var['variable_type'] 
                            ."</td><td>".$project_document_section_var['variable_format'] 
                            ."</td><td>".$project_document_section_var['codeset_id'] ;
            foreach($project_document_section_var['Codeset'] as $codeset):
                foreach($codeset['Code'] as $pcode):
                    echo $pcode['codevalue'].", ";
                endforeach;
            endforeach;
            echo "</td></tr>";
        endforeach;
        echo "</table></div>";
    endforeach;

}

  endforeach; 
```

`foreach()`但我得到非法字符串偏移“代码”，并且在回显行提供了无效参数`$pcode['codevalue'].", ";`

我查看了数组`$project_document_section_variable`，我认为代码集数组存在问题，但我无法弄清楚它为什么会这样做。

以下是数组的一些输出示例`$project_document_section_variable`：

```
array(
'id' => '32',
'project_id' => '05a',
'project_document_id' => '3',
'project_document_section_id' => '2',
'variable_id' => '2',
'variable_name' => 'Respondent Education',
'variable_description' => 'B1\. What is your highest level of education?',
'variable_type' => 'Categorical',
'variable_format' => 'Quantitive',
'codeset_id' => '43',
'Codeset' => array(
    'id' => '43',
    'title' => 'Educational level',
    'Code' => array(
        (int) 0 => array(
            'id' => '96',
            'codeset_id' => '43',
            'codevalue' => '1',
            'title' => 'No education'
        ),
        (int) 1 => array(
            'id' => '97',
            'codeset_id' => '43',
            'codevalue' => '2',
            'title' => 'Primary'
        ),
        (int) 2 => array(
            'id' => '98',
            'codeset_id' => '43',
            'codevalue' => '3',
            'title' => 'Secondary'
        ),
        (int) 3 => array(
            'id' => '99',
            'codeset_id' => '43',
            'codevalue' => '4',
            'title' => 'Tertiary'
        ),
        (int) 4 => array(
            'id' => '100',
            'codeset_id' => '43',
            'codevalue' => '7',
            'title' => 'Other (describe)'
        ),
        (int) 5 => array(
            'id' => '101',
            'codeset_id' => '43',
            'codevalue' => '8',
            'title' => 'Refuses to answer'
        ),
        (int) 6 => array(
            'id' => '102',
            'codeset_id' => '43',
            'codevalue' => '9',
            'title' => 'Don’t know'
        )
    )
)
 ) 
```

您可能会注意到代码集数组没有`(int) 0`. 也许这是因为只为代码集返回了一个数组（这是正确的，每个数组`project_document_section_variable`只有一个关联的代码集。

我在这里遗漏了什么明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:54:14.543

这一行 ->`foreach($project_document_section_var['Codeset'] as $codeset):`正在使 php assign `['id']`、`['title']`和`['Code']`to `$codeset`。

此行 ->`foreach($codeset['Code'] as $pcode):`正在使 php 查找`['id']['Code']`,`['title']['Code']`和`['Code']['Code']`不存在的并引发错误。

尝试替换这个：

```
 foreach($project_document_section_var['Codeset'] as $codeset):
            foreach($codeset['Code'] as $pcode):
                echo $pcode['codevalue'].", ";
            endforeach;
        endforeach; 
```

为了这：

```
 foreach($project_document_section_var['Codeset']['Code'] as $pcode):
             echo $pcode['codevalue'].", ";
        endforeach; 
```

# c++ - OO C++ - 虚拟方法

> ID：12348909
> 
> 赞同：0
> 
> 时间：2012-09-10T09:32:46.907
> 
> 标签：c++, oop

这里只是一个非常快速的问题。我正在使用虚拟函数从文本文件中读取。现在，它是虚拟的，因为一方面我希望将值标准化，另一方面我不希望它们标准化。我试图这样做：

```
bool readwav(string theFile, 'native'); 
```

所以理论上，如果使用'native'，则应该调用此方法，但是，如果调用'double'，则调用该方法的不同版本。如果值为空，则相同，它应该只执行本机选项。

第一个问题，为什么上面的声明不起作用？另外，这是最好的下山路线吗？或者，最好只有一个在选项之间切换的类方法。

谢谢 ：）

更新：

我哪里错了？

```
bool Wav::readwav(string theFile, ReadType type = NATIVE)
{
// Attempt to open the .wav file
ifstream file (theFile.c_str());

if(!this->readHeader(file))
{
    cerr << "Cannot read header file";
    return 0;
}

for(unsigned i=0; (i < this->dataSize); i++)
{
    float c = (unsigned)(unsigned char)data[i];

    this->rawData.push_back(c);
}

return true;
}

bool Wav::readwav(string theFile, ReadType type = DOUBLE)
{
  // Attempt to open the .wav file
  ifstream file (theFile.c_str());

  cout << "This is the double information";
  return true;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:35:34.073

因为`'native'`是多字符字符，而不是字符串。不过，我会使用该功能的多个版本：

```
bool readwavNative(string theFile);
bool readwavDouble(string theFile); 
```

或至少`enum`作为第二个参数：

```
enum ReadType
{
   ReadNative,
   ReadDouble
};

//...
bool readwav(string theFile, ReadType type); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:51:13.713

问题中有 oop，所以我假设需要一个 oop 答案。我认为[战略模式](http://en.wikipedia.org/wiki/Strategy_pattern)会适合您的目的。

```
class WavReader
{
public:
    WavReader(const std::string fileName)
    {
        //open file and prepare to read
    }

    virtual ~WavReader()
    {
        //close file
    }

    virtual bool read()=0;
};

class NativeWavReader: public WavReader
{
public:
    NativeWavReader(const std::string fileName): WavReader(fileName){}

    virtual bool read()
    {
        //native reading method
        std::cout<<"reading\n";
        return true;
    }
}; 
```

`NativeWavReader``read`从 strategy实现方法`WavReader`，如果您想要另一种方法，您可以创建一个`OtherWavReader`以不同方式读取文件的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:37:35.263

听起来你想要的是一个带有默认参数的枚举。

```
enum FileType
{
  NATIVE=0,
  DOUBLE      
};

bool readwav(string theFile, FileType type = NATIVE); 
```

默认参数存在于函数**声明**中，不要将它们放在**定义**中。

```
bool readwav(string theFile, FileType type)
{
  switch(type)
  {
    case NATIVE: { ... } break;
    case DOUBLE: { ... } break;
    default: { ... } break;
  }
} 
```

这样，`readwav`不带参数的调用将`NATIVE`默认使用该类型。

```
readwav("myfile.wav"); // Uses NATIVE type
readwav("myfile.wav", NATIVE); // Also uses NATIVE
readwav("myfile.wav", DOUBLE); // Uses DOUBLE type 
```

# django - Django mptt，类别和子类别系统 - 类别没有名为“父”的字段

> ID：12348911
> 
> 赞同：0
> 
> 时间：2012-09-10T09:32:53.000
> 
> 标签：django, django-mptt

我想使用 django mptt 创建类别和子类别系统。我的尝试：

```
from django.db import models
import mptt

class Category(models.Model):
    name = models.CharField(max_length=255)
    category = models.ForeignKey('self', null=True, blank=True, related_name='children')

mptt.register(Category, order_insertion_by=['name'])

class Post(models.Model):
    title = models.CharField(max_length=255)
    text = models.TextField()
    category = models.ManyToManyField(Category) 
```

我的管理员.py

```
from django.contrib import admin
from xxxx.xxx.models import *
from mptt.admin import MPTTModelAdmin

admin.site.register(Category, MPTTModelAdmin)
admin.site.register(Post) 
```

**我的错误：**

类别没有名为“父”的字段

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:38:12.120

Django-mptt 需要名称为 parent 且带有 ForeignKey('self') 的字段

[http://django-mptt.github.com/django-mptt/models.html#setting-up-a-django-model-for-mptt](http://django-mptt.github.com/django-mptt/models.html#setting-up-a-django-model-for-mptt)

您可以使用以下方法覆盖它：

```
class Category(models.Model):
    name = models.CharField(max_length=255)
    category = models.ForeignKey('self', null=True, blank=True, related_name='children')

    class MPTTMeta:
        order_insertion_by=['name']
        parent_attr = 'category' 
```

# mysql - Mysql查询花费太多时间

> ID：12348912
> 
> 赞同：1
> 
> 时间：2012-09-10T09:32:55.260
> 
> 标签：mysql

我有与mysql数据库有关的问题。我是 linux 网络服务器管理员，我面临 mysql 查询的问题。数据库非常小。我尝试在日志中进行跟踪，发现查询至少需要 5 秒才能响应。网站的第一页来自数据库。客户正在使用 cms。当服务器获得一定数量的命中时，数据库服务器开始非常缓慢地做出响应，等待时间从 5 秒增加到几秒。

我检查了慢查询日志

```
{
Query_time: 11.480138  Lock_time: 0.003837 Rows_sent: 921  Rows_examined: 3333

SET timestamp=1346656767;
SELECT `Tender`.`id`,
    `Tender`.`department_id`,
    `Tender`.`title_english`,
    `Tender`.`content_english`,
    `Tender`.`title_hindi`,
    `Tender`.`content_hindi`,
    `Tender`.`file_name`,
    `Tender`.`start_publish`,
    `Tender`.`end_publish`,
    `Tender`.`publish`,
    `Tender`.`status`,
    `Tender`.`createdBy`,
    `Tender`.`created`,
    `Tender`.`modifyBy`,
    `Tender`.`modified`
FROM `mcms_tenders` AS `Tender`
WHERE `Tender`.`department_id` IN ( 31, 33, 32, 30 );
} 
```

日志中的每一行都是相同的，只是查询时间有差异。有没有办法调整性能？

**更新：**结果如下`EXPLAIN`：

```
+----+-------------+--------+------+---------------+------+---------+------+-‌-----+-------------+
| id | select_type | table  | type | possible_keys | key  | key_len | ref  | rows | Extra       |
+----+-------------+--------+------+---------------+------+---------+------+----‌​--+-------------+
| 1  | SIMPLE      | Tender | ALL  | NULL          | NULL | NULL    | NULL | 3542 | Using where |
+----+-------------+--------+------+---------------+------+---------+------+----‌​--+-------------+
1 row in set, 1 warning (0.00 sec) 
```

客户说他们正在使用索引，所以我运行命令来检查索引。

我得到以下输出。这是否意味着他们正在使用索引。

+--------------+------------+----------+--------- ----+-------------+------------+------------+------ ----+--------+------+------------+---------+ | 表 | 非唯一 | 键名 | Seq_in_index | 列名 | 整理 | 基数| 子部分 | 包装 | 空 | 索引类型 | 评论 | +--------------+------------+----------+--------- ----+-------------+------------+-------------+-- -----+--------+------+------------+---------+ | mcms_tenders | 0 | 初级 | 1 | 编号 | 一个 | 4264 | 空 | 空 | | BTREE | | +--------------+------------+----------+--------- ----+-------------+------------+-------------+-- -----+--------+------+------------+---------+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:00:09.173

像这样调整查询性能的常规方法是在 department_id 上创建索引。

但是，这假定 Tenders 实际上是一个表而不是一个视图。您应该确认这一点，因为问题可能在视图中。

此外，根据您的描述，问题可能是从服务器到最终用户的连接。我会尝试在服务器上本地运行查询（或在服务器上严格检查执行时间）以查看查询是否真的需要那么长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:38:15.267

“*当服务器获得一定数量的命中时*”

定义“某个数字”。当使用更频繁时，读取数据库会更慢是有道理的。此外，MySQL 有一个查询缓存，当对数据进行更改时，它会完全失效。所以每次有人在这张表中插入、删除或修改一条记录时，接下来的查询都会变慢，因为该表的日期仍然是未缓存的。

但是像这样的查询需要 11 秒非常慢，所以要么负载太高，要么硬件不足或损坏，要么你的数据库缺少索引（我总是忘记一开始提到这一点，因为我假设添加索引是一秒钟任何使用数据库的人的性质）。

# javascript - AddThis Pinterest 按钮错误

> ID：12348913
> 
> 赞同：2
> 
> 时间：2012-09-10T09:32:56.193
> 
> 标签：javascript, pinterest

我对 Pinterest 按钮有疑问。第一次单击它可以工作，但是当页面重新加载时，我收到错误：

```
TypeError: a.split is not a function
[Break On This Error]   

...meo.com/%s"};if(w=="facebook"&&isNaN(d)){w="facebook_url";}return!d?null:((E[w]|... 
```

它的网站是 www.artfido.com

# iphone - iOS 中的通讯录同步

> ID：12348916
> 
> 赞同：23
> 
> 时间：2012-09-10T09:33:11.240
> 
> 标签：iphone, objective-c, ios, addressbook

自上次打开应用程序以来，iOS 中有什么方法可以获取有关地址簿更改的通知。

该应用程序将通讯录存储在内部数据库中，我不想在每次激活时都执行完全同步。

提前致谢。

澄清问题的小补充：我使用 ABAddressBookRegisterExternalChangeCallback 来观察应用程序暂停到后台时的变化，但据我所知，如果应用程序完全关闭并重新打开（例如：手机重启后或从任务列表中关闭），此方法将不起作用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:03:24.360

也许你正在寻找这个：

[ABAddressBook 参考 - ABAddressBookRegisterExternalChangeCallback](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABAddressBookRegisterExternalChangeCallback)

您应该注册该通知！

告诉我是否有效或您需要任何帮助

**马里奥**

# jquery - highchart中样条图中不同高度的不同颜色

> ID：12348917
> 
> 赞同：0
> 
> 时间：2012-09-10T09:33:12.073
> 
> 标签：jquery, highcharts, background-color

我在高图中有一个样条图。它的高度是零到一。我想让 y=0.5 线上方的所有点都具有红色背景色，而这条线下方的点具有绿色背景色。我怎样才能在highchart中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:11:22.207

您可以很好地创建一个实用方法，将您的[`series.data`](http://api.highcharts.com/highstock#series.data)from`[[x,y],...]`转换为`[{ x:xVal,y:yVal,color:color,...}...]`

这个函数可能看起来像这样

```
function groupDataByValue(data, threshold, aboveColor, belowColor) {
    var newData = [];
    $.each(data, function() {
        var dataPoint = {
            x: this[0],
            y: this[1],
            marker: {}
        };
        var color;
        if (dataPoint.y > threshold) {
            color = aboveColor;
        } else {
            color = belowColor;
        }
        dataPoint.color = color;
        dataPoint.marker.fillColor = color;
        newData.push(dataPoint);
    });
    return newData;
} 
```

在设置`series.data`属性之前将其传递给此方法并将结果值设置为`series.data`

[基于值的着色点@ jsFiddle](http://jsfiddle.net/jugal/DzUfw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:47:14.010

“此功能计划用于 Highcharts 3.0。我们编写了一个临时 hack，仅限于 SVG 浏览器。这意味着它在 IE6、7 和 8 中不起作用。请参阅[http://jsfiddle.net/highcharts/PMyHQ /](http://jsfiddle.net/highcharts/PMyHQ/) "
-@orstein Hønsi（管理员，Highcharts JS）-2011 年 11 月 14 日

资料来源：[http ://highcharts.uservoice.com/forums/55896-general/suggestions/787281-threshold-option-for-colors](http://highcharts.uservoice.com/forums/55896-general/suggestions/787281-threshold-option-for-colors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:39:34.303

像这样试试

```
$(document).ready(function(){
     $("#points").each(function(){
          if((this).val()>0.5)
              (this).css("background-color","red");
  });
}) 
```

考虑到您的所有点都必须具有 id“点”，并且它们的值必须是它们各自的高度（0.1,0.2,....像那样）

# wordpress - Tubepress 插件的缩略图问题

> ID：12348919
> 
> 赞同：1
> 
> 时间：2012-09-10T09:33:23.173
> 
> 标签：wordpress, tubepress

Tubepress 显示视频库，但是当我单击缩略图时，它不播放视频。它似乎是一个链接，但它不会播放/替换顶部的当前视频。我在 Wordpress 支持上搜索，似乎每个人在 Tubepress 缩略图上也有问题，但在我的上找不到任何支持。我在这里先向您的帮助表示感谢。顺便说一下，这里是网站。[http://www.ironwillfootball.ca/video-gallery](http://www.ironwillfootball.ca/video-gallery)

# android - 在我的开发 Android 应用程序上下载 DRM 文件

> ID：12348920
> 
> 赞同：0
> 
> 时间：2012-09-10T09:33:25.163
> 
> 标签：android, drm, dd, dm

我是android开发的新手。

我为自动下载器构建应用程序，

每次下载都可以正常工作并保存在我的 SD 卡上，但设备上没有打开 drm 文件。

我解释一下，我尝试下载扩展名为 dd\dm 的文件，如果常规浏览器下载 dd\dm 文件，设备会将它们解压缩为 dcf 扩展名。

我的应用程序没有这样做...我注意到如果我的设备重新启动，一切都是正确的，实际上设备将此文件的扩展名更改为 dcf，我可以播放这首歌，如果我没有发起者重新启动到设备，文件扩展名保留在 .dd.dm

mt 内容类型为：application/vnd.oma.drm.message

有人知道我需要怎么照顾吗？？

这是我的代码......

```
class DownloadFileFromURL extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread
     * Show Progress Bar Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(progress_bar_type);
    }

    /**
     * Downloading file in background thread
     * */
    @Override
    protected String doInBackground(String... f_url) {
        int count;
        try {

            URL url = new URL(f_url[0]);
            URLConnection conection = url.openConnection();
            conection.getContent();
            conection.connect();
            // getting file length
            int lenghtOfFile = conection.getContentLength();

            // Insert Information Of File to Array
            getCurrentArray()[index].setSizeOfFile(OrangeFile.convertToStringRepresentation(lenghtOfFile));
            getCurrentArray()[index].setMimeOfFile(conection.getContentType());

            // input stream to read file - with 8k buffer
            InputStream input = new BufferedInputStream(url.openStream(), 8192);

            // Output stream to write file
            OutputStream output = new FileOutputStream(mPath + getCurrentArray()[index].getNameOfFile() + "." + getCurrentArray()[index].getExtOfFile());

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;
                // publishing the progress....
                // After this onProgressUpdate will be called
                publishProgress(""+(int)((total*100)/lenghtOfFile));

                // writing data to file
                output.write(data, 0, count);
            }

            // flushing output
            output.flush();

            // closing streams
            output.close();
            input.close();

        } catch (Exception e) {
            Log.e("Error: ", e.getMessage());
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T06:42:47.233

虽然这是一个老问题，但不确定您是否已经得到任何答案。下面是如何克服这个问题。

首先，您无法通过文件连接 API 下载“.dm”和“.dd”文件，尽管您可以成功下载它们，但不能直接使用它。

检查此[http://www.developer.nokia.com/Community/Wiki/Saving_and_reading_DRM-protected_files_using_FileConnection_API_and_Mobile_Media_API](http://www.developer.nokia.com/Community/Wiki/Saving_and_reading_DRM-protected_files_using_FileConnection_API_and_Mobile_Media_API)

当您的设备操作系统对 sd 卡进行彻底的内存扫描时，“.dm”文件会自动转换为“.dcf”。如果您只是卸载 sd 卡并重新安装，那么文件也会被转换而无需重新启动设备。

那么如何实际下载这些文件以立即使用而无需重新启动设备。

如上述链接所述，您只能通过 HTTP（在浏览器中）或 MMS 下载受保护的内容。

因此，使用指向服务器上“.dm”文件的 url 创建一个 Intent 并触发它。下载完成后，浏览器将捕获 url 并下载文件并自动将其转换为“.dcf”。

希望这可以帮助。

编辑：通过文件连接 API 下载文件后，您可以通过使用“ [ACTION_MEDIA_SCANNER_SCAN_FILE](http://developer.android.com/reference/android/content/Intent.html#ACTION_MEDIA_SCANNER_SCAN_FILE) ”操作创建意图并发送广播来显式调用媒体扫描器。

# c# - 跳过 webbrowser 控制共享点身份验证

> ID：12348925
> 
> 赞同：1
> 
> 时间：2012-09-10T09:33:53.660
> 
> 标签：c#, sharepoint, webbrowser-control, office365

我已经验证了 SP ClientContext。有什么方法可以让我通过使用 SPClientContext.

```
 WebBrowser wb = new WebBrowser();
        wb.AllowNavigation = true;
        wb.ScriptErrorsSuppressed = true;
        wb.DocumentCompleted += wb_DocumentCompleted;
        wb.Navigate("https://URLofSPO/sites/testSol/_catalogs/solutions/Forms/AllItems.aspx"); 
```

# android - Android：无法使用 Json 将参数发送到 asmx Web 服务

> ID：12348927
> 
> 赞同：1
> 
> 时间：2012-09-10T09:34:04.363
> 
> 标签：android, json, web-services, asmx

我尝试使用 Json 从 android 向 asmx webservice 发送一个复杂对象，我可以发送其他复杂对象和数组，但我被困在这个对象中，整整两天我都在寻找问题出在哪里，但没有成功，这是我的代码

```
 JSONObject param = new JSONObject();
    JSONObject item = new JSONObject();

        try {

            Date D= new Date(2012,10,10);

                    item.put("id_s", 1);
            item.put("comp", 1);
            item.put("d", D);
            item.put("duration", 1);
            item.put("la", 0.0);
            item.put("lo", 0.0);
            item.put("id_u", 1);
            item.put("id_s", 1);
            item.put("c", 1);
            item.put("i", "1");
            item.put("o", "1");
            item.put("m", "1");
            item.put("p", 2);
            param.put("s", item);

            Jsonrequest jrequest=new Jsonrequest(); 
            JSONObject result = jrequest.sendJsonRequest("192.168.125.35", 80 , 
                      "http://192.168.125.35:80/Myapp/WebService1.asmx/method", param);

        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            Toast.makeText(context, String.valueOf(e1), Toast.LENGTH_LONG).show();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(context, String.valueOf(e), Toast.LENGTH_LONG).show();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(context, String.valueOf(e), Toast.LENGTH_LONG).show();
        } 
```

奇怪的是没有例外，我验证了我的参数名称与我的 Web 服务中的名称相同。感谢您的帮助。

# mysql - 如何使用mysql将行转换为随机列

> ID：12348928
> 
> 赞同：1
> 
> 时间：2012-09-10T09:34:03.993
> 
> 标签：mysql, random, rows, ifnull

如何使用mysql将行转换为随机列？不同的（image_url）

```
 select p.email , 
        image_url AS image_url_1,
        image_url AS image_url_2 ,
        image_url  AS image_url_3,
        image_url  AS image_url_4
    FROM
        poll p
    GROUP BY
        email
    ORDER by RAND() 
```

此外，在此查询中

```
select email,
    (select IFNULL((image_url from poll p1 order by rand() limit 1), NULL) as image_1,
    (select IFNULL((image_url from poll p2 order by rand() limit 1), NULL) as image_2,
    (select IFNULL((image_url from poll p3 order by rand() limit 1), NULL) as image_3,
    (select IFNULL((image_url from poll p4 order by rand() limit 1), NULL) as image_4
from poll
group by email 
```

`null`如果少于 4 个 image_url如何显示以及如何区分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:51:41.417

```
select email,
(select image_url from poll p1 order by rand() limit 1) as image_1,
(select image_url from poll p2 order by rand() limit 1) as image_2,
(select image_url from poll p3 order by rand() limit 1) as image_3,
(select image_url from poll p4 order by rand() limit 1) as image_4
from poll 
```

# java - 更改 JTable 中一个单元格的背景颜色

> ID：12348932
> 
> 赞同：1
> 
> 时间：2012-09-10T09:34:23.107
> 
> 标签：java, swing, jtable, tablecellrenderer

> **可能重复：**
> [更改 Swing JTable 单元格颜色](https://stackoverflow.com/questions/7181699/changing-swing-jtable-cell-colors)

我开发了一个显示 JTable 的摇摆应用程序。我希望当用户修改单元格值时，修改后的单元格会改变颜色。

这是我在用户修改单元格时运行的代码：

```
this.myTable.getColumnModel().getColumn(column).setCellRenderer(new StatusColumnCellRenderer()); 
```

这是我的单元格渲染类的代码：

```
public class StatusColumnCellRenderer extends DefaultTableCellRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int col) {

        //Cells are by default rendered as a JLabel.
        JLabel l = (JLabel) super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, col);

        //Get the status for the current row.
        TableModelLotti tableModel = (TableModelLotti) table.getModel();

        if(isSelected)
            l.setBackground(Color.GREEN);

        //Return the JLabel which renders the cell.
        return l;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T13:33:05.750

*当模型中的单元格被标记为已修改*时，您将需要一个自定义渲染器来显示绿色。

您还需要一个自定义编辑器来在您的实现中设置模型的*修改*状态，[此处](https://stackoverflow.com/a/1747140/230513)`stopCellEditing()`提到。

[此处](https://stackoverflow.com/a/10067560/230513)显示了自定义渲染器和编辑器的相关示例。

附录：这是所描述方法的一个示例。

![年龄](../Images/b7620101dbe6aa4acdb23d8d53772446.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.List;
import javax.swing.DefaultCellEditor;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;

/**
 * @see https://stackoverflow.com/a/12352838/230513
 */
public class ModifiedCells extends JPanel {

    public ModifiedCells() {
        final MyModel model = new MyModel();
        JTable table = new JTable(model);
        table.setDefaultRenderer(String.class, new MyRenderer());
        table.setDefaultEditor(String.class, new MyEditor(table));
        this.add(table);
    }

    private static class MyRenderer extends DefaultTableCellRenderer {

        Color backgroundColor = getBackground();

        @Override
        public Component getTableCellRendererComponent(
            JTable table, Object value, boolean isSelected,
            boolean hasFocus, int row, int column) {
            Component c = super.getTableCellRendererComponent(
                table, value, isSelected, hasFocus, row, column);
            MyModel model = (MyModel) table.getModel();
            if (model.getState(row)) {
                c.setBackground(Color.green.darker());
            } else if (!isSelected) {
                c.setBackground(backgroundColor);
            }
            return c;
        }
    }

    private static class MyEditor extends DefaultCellEditor {

        private JTable table;
        private MyModel model;

        public MyEditor(JTable table) {
            super(new JTextField());
            this.table = table;
            this.model = (MyModel) table.getModel();
        }

        @Override
        public boolean stopCellEditing() {
            model.setState(table.getEditingRow(), true);
            return super.stopCellEditing();
        }
    }

    private static class MyModel extends AbstractTableModel {

        private final List<Row> list = new ArrayList<Row>();

        public MyModel() {
            list.add(new Row("One", true));
            list.add(new Row("Two", false));
            list.add(new Row("Three", false));
        }

        public boolean getState(int row) {
            return list.get(row).state.booleanValue();
        }

        public void setState(int row, boolean state) {
            list.get(row).state = state;
        }

        @Override
        public int getRowCount() {
            return list.size();
        }

        @Override
        public int getColumnCount() {
            return 1;
        }

        @Override
        public Object getValueAt(int row, int col) {
            return list.get(row).name;
        }

        @Override
        public void setValueAt(Object aValue, int row, int col) {
            list.get(row).name = (String) aValue;
            fireTableCellUpdated(row, col);
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            return String.class;
        }

        private static class Row {

            private String name;
            private Boolean state;

            public Row(String name, Boolean state) {
                this.name = name;
                this.state = state;
            }
        }
    }

    private void display() {
        JFrame f = new JFrame("ModifiedCells");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ModifiedCells().display();
            }
        });
    }
} 
```

# paypal - 如果我有 paypal 企业账户，我是否需要商家账户才能使用 Chargify？

> ID：12348935
> 
> 赞同：1
> 
> 时间：2012-09-10T09:34:29.080
> 
> 标签：paypal, chargify, merchant-account

我正在研究使用 chargify.com 服务进行定期付款的选项。他们说我需要商家帐户和支付网关帐户。但是后来一些网站说贝宝既是商家账户又是支付网关。这是否意味着使用 chargify 我只能拥有 paypal 商业帐户而没有单独的商家帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:18:58.717

如果您要接受任何形式的付款，您需要某种商家帐户。多年来，事情变得更容易处理了。

过去，您必须设置单独的公司/帐户：1 个将充当您的商家处理器，另一个将作为您的网关。两者都有自己的一套费用。

当这些商业公司相互竞争时，他们开始提供自己的网关服务，这样他们的用户就不必从第 3 方获得。现在他们几乎都这样做了。

PayPal、PayLeap、Group ISO、Optimal Payments、Stripe、Intuit 等都是提供自己网关解决方案的商家服务提供商。

拥有特定于商家提供商的网关很棒，但也有一些缺点。例如，如果您将一个网关很好地集成到您的网站中，但随后您决定出于任何原因更改商家帐户提供商，则您必须将您在网站上所做的一切与该新提供商重新集成。

这可以通过使用仍然与流行的网关服务兼容的提供商来避免。PayFlow 和 Authorize.Net 是最受欢迎的。PayFlow 实际上是不久前被 PayPal 收购的，因此他们可以在 PayFlow 网关上提供商家服务……这是一个非常受欢迎的网关，可与许多其他提供商合作……并且仍然为您提供一体化解决方案。

PayFlow 和 Authorize.net 都与许多商家提供商兼容，因此如果您觉得您可能想在某个时候切换，那么坚持使用其中一个网关可能是明智的。

综上所述，我建议您使用 PayPal。除了直接信用卡之外，他们还有各种支付功能，如果您想要直接处理信用卡，他们也可以在他们的 PayFlow 网关（或他们自己的称为 DoDirectPayment 的 API）上提供这些功能。

我希望这有助于而不是令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:49:08.833

使用 PayPal，您不需要商家帐户。

资料来源：

*   [https://www.paypal.com/cgi-bin/webscr?cmd=_payflow-about-ima-outside](https://www.paypal.com/cgi-bin/webscr?cmd=_payflow-about-ima-outside)
*   [http://www.webtys.com/small_business/article_paypal_vs_merchantaccount.php3](http://www.webtys.com/small_business/article_paypal_vs_merchantaccount.php3)
*   [https://www.paypal.com/webapps/mpp/compare-business-products](https://www.paypal.com/webapps/mpp/compare-business-products)
*   [http://chargify.com/payment-gateways/](http://chargify.com/payment-gateways/)

# eclipse - eclipse 停止意外调试

> ID：12348940
> 
> 赞同：3
> 
> 时间：2012-09-10T09:34:47.023
> 
> 标签：eclipse, debugging, tomcat, servlets

我有一个tomcat servlet项目，它通常在eclipse中运行，除了一行，它总是在没有断点的情况下停止调试器。如果我通过按 2resume" 手动进行调试，一切都会正常工作。
是否有任何指令/注释来防止在没有断点的行上停止调试器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:37:42.233

清理并构建您的项目...我遇到了类似的问题...在完全清理和构建完成后它得到了解决。

# html - JqueryMobile 缓存 Ajax 问题

> ID：12348942
> 
> 赞同：1
> 
> 时间：2012-09-10T09:35:02.773
> 
> 标签：html, jquery, jquery-mobile, browser-cache

我的 jquery 移动应用程序有一个奇怪的问题。下面是 Chrome 开发者工具快照的屏幕截图。

![图片](../Images/869831238e7a467119902c105d77fa48.png)

为什么我的页面或脚本仍然被缓存已添加

```
 $.ajaxSetup ({
            cache: false
        }); 
```

同样在每个加载 my `ul`>的 ajax 调用中`li`都设置了`cache:false`.

请让我知道如何克服这种情况，因为我的移动缓存在每次点击时都会增长，让我发疯。

谢谢

**更新**：

每次我点击导航到另一个页面时，这个脚本都会被执行：

```
$('body').on('click', '.menuClass', function(e) {
e.preventDefault();
e.stopImmediatePropagation();
var menuid = $(this).attr('id');
if (menuid == '100001') {
    settings.get('setval', function(obj) {
        if(obj.value.tableMode == "1"){
        $.mobile.changePage('categories.html', {
            transition : "slide"
        });
        return false;
        }
        else{
         $.mobile.changePage('index.html', {
                        transition : "slide"
                    });
        }
     });
   }
 }); 
```

但由于某些原因，category.html 的 URL 会在每次点击时加载，将 url 更改为下面

```
 http://localhost:8080/categories?_=1347279588477
   http://localhost:8080/categories?_=1347279584203
   http://localhost:8080/categories?_=1347279688227 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:08:33.170

我不知道为什么 cache:false 不起作用，但我正在添加一个时间创建的字符串以防止缓存 ajax 页面。

通过添加`&ts="+ new Date().getTime()`到 url 的末尾来做到这一点。

这是我的用法；

```
$.ajax({
       type: "GET",
       url: "ajax.php?ajax_file=ajax_table_page&ts="+ new Date().getTime(),
       success: function(data){
       ..................
       }
}); 
```

我也用它来跟踪 ajax 错误（您可以在文档准备好后添加）

```
$.ajaxSetup({
  error:function(x,e){
       if(x.status==0){
       alert('You are offline!!\n Please Check Your Network.');
       }else if(x.status==404){
       alert('Requested URL not found.');
       }else if(x.status==500){
       alert('Internel Server Error.');
       }else if(e=='parsererror'){
       alert('Error.\nParsing JSON Request failed.');
       }else if(e=='timeout'){
       alert('Request Time out.');
       }else {
       alert('Unknow Error.\n'+x.responseText);
       }
  }
  }); 
```

# c# - 使用 WCF 正确标记 DataContract 以进行反序列化

> ID：12348944
> 
> 赞同：2
> 
> 时间：2012-09-10T09:35:26.260
> 
> 标签：c#, xml, wcf, xml-parsing

我在下面有这个对象，我正在尝试正确标记它以从 xml 反序列化。它正在使用 WCF。

```
[DataContract(Name="Task")]
    public partial class Task
    {
        [DataMember]
        public string prop1
        { get; set; }

        [DataMember]
        public ChildrenProps ChildProp1{ get; set; }

    }

    [DataContract]
    public partial class ChildrenProps 
    {
        [DataMember]
        public ConfigurationSettings Prop1
        { get; set; }

        [DataMember]
        public ConfigurationSettings Prop2
        { get; set; }
    }

    [DataContract]
    public partial class ConfigurationSettings
    {
        [DataMember]
        public string Value
        { get; set; }
    } 
```

这是 XML。

```
<Task>
  <prop1>aaaaa</prop1>
  <ChildProp1>
    <Prop1>bbbbbb</Prop1>
    <Prop2>cccccc</Prop2>
  </ChildProp1>
</Task> 
```

我正在使用这种方法进行反序列化

```
public T Deserialization<T>()
{
    var reader = new StringReader(configuration);
    var serializer = new XmlSerializer(typeof(T));
    var instance = (T)serializer.Deserialize(reader);
    return instance;
} 
```

它不适用于子元素并在对象中返回 null，但适用于其他所有元素。正确标记此内容的任何帮助将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:11:03.593

您的序列化 XML 不正确，根据您提供的类信息，这是序列化 XML

```
<?xml version="1.0" encoding="utf-8"?>
<Task xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <prop1>HelloWorld</prop1>
  <ChildProp1>
    <Prop1>
      <Value>propr1</Value>
    </Prop1>
    <Prop2>
      <Value>propr2</Value>
    </Prop2>
  </ChildProp1>
</Task> 
```

这就是你如何序​​列化一个对象

```
Task taskObj = new Task();
taskObj.prop1 = "HelloWorld";
taskObj.ChildProp1 = new ChildrenProps();
taskObj.ChildProp1.Prop1 = new ConfigurationSettings(){ Value = "propr1"};
taskObj.ChildProp1.Prop2 = new ConfigurationSettings() { Value = "propr2" };

XmlSerializer.Serialize(textWriter, taskObj); 
```

您可以使用此 XML 反序列化和测试您的代码。

# symfony-1.4 - Symfony 1.4。如何将字段的属性添加到嵌入式表单？

> ID：12348947
> 
> 赞同：0
> 
> 时间：2012-09-10T09:35:28.447
> 
> 标签：symfony-1.4, embed, symfony-forms

我将一种形式嵌入到另一种形式中。我需要将 HTML 属性添加到嵌入表单的字段中。尝试这样做：

```
$this->widgetschema['email'] = new sfWidgetFormInputText(array(), array('class' => 'email')); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:17:42.450

你试过这样吗？创建一个类

```
 class YourForm extends sfForm {
     $array= array('array');
     $this->setWidgets(array(
          'field1' => new sfWidgetFormSelect(array('choices' => $array), array('placeholder' => 'field1', 'required' => 'true', 'data-empty' => 'U did not enter field1!')),
          'email_address' => new sfWidgetFormInputText(array('type' => 'email'), array())
     ));   
 } 
```

您甚至可以更改第一个数组中的类型。然后通过调用它来将您的表单包含在操作中

```
 $this->form = new YourForm(); 
```

然后在模板中回显您的表单：

```
 <?php echo $form; ?> 
```

我希望这有帮助。我也这样使用它，以添加额外的属性以在 javascript 中使用。

# java - 在 SWT 中克隆一个“链接”

> ID：12348948
> 
> 赞同：0
> 
> 时间：2012-09-10T09:35:31.283
> 
> 标签：java, hyperlink, swt, clone

我有一个包含用户名、IP 地址和时间戳的信息表。

我想要做的是将 ip 地址包含在链接对象中，当单击链接时，它会利用 bgp.he.net 获取有关主机/IP 地址的信息。我曾尝试创建线程来解析 IP 地址，但它通常是大量的 IP 地址，而且我读到 InetAddress#getByName 不是非阻塞的，所以我认为拥有指向该站点的链接是下一个最好的事情。

问题是：是否可以在表中为我的每个 IP 地址提供链接，而无需为每一行创建新的链接对象？我不知道这对内存使用会有多糟糕，这就是为什么我要询问克隆 IP 实例并打开链接 bgp.he.net/link.getText()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:06:00.317

如果要在表格中使用链接小部件，则必须在单元格位置使用单独的小部件。如果表中有太多行显然会影响性能。

(1)：您可以在这里做的是仅创建/保留可见数量的链接并处理剩余的链接（内存性能得到优化），但其他副作用是您最终会在滚动/调整表格大小时创建和处理链接小部件。

(2) 使用 url 绘制您的单元格（模仿超链接）并在用户单击单元格边界时处理鼠标事件。（无需担心绘制性能，绘制事件将在表中需要时调用）。

# python - python过滤器无法输出

> ID：12348954
> 
> 赞同：0
> 
> 时间：2012-09-10T09:35:56.900
> 
> 标签：python

我通过python为日志文件创建过滤器，例如

```
 Sat Jun  2 03:32:13 2012 [pid 12461] CONNECT: Client "66.249.68.236"
    Sat Jun  2 03:32:13 2012 [pid 12460] [ftp] OK LOGIN: Client "66.249.68.236", anon     password "gxxglxxxxt@google.com"
    Sat Jun  2 03:32:14 2012 [pid 12462] [ftp] OK DOWNLOAD: Client "66.249.68.236",   "/pub/10.5524/100001_101000/100022/readme.txt", 451 bytes, 1.39Kbyte/sec 
```

脚本是

```
import time
f= open("/opt/CLiMB/Storage1/log/vsftp.log")
def OnlyRecent(line):
    if  time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y") < time.time()-(60*60*24*2):
       return True
    return False

for line in f:
      if OnlyRecent(line):
         print line

f.close() 
```

但是当我运行这个脚本时，它没有显示任何东西。为什么它不能显示 2 天内发生的记录。而且由于日志文件很大，而且记录是按时间排序的，那么如何加快查找记录的速度。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:40:36.203

由于最终连接，该脚本在完全处理内存中的整个文件之前不会打印任何内容。

如果要按原样打印，请使用循环并打印过滤器返回的每一行。

```
import time
f = open("/opt/CLiMB/Storage1/log/vsftp.log")
f.readline() # Not sure why you're doing this, but retained to replicate behaviour

def OnlyRecent(line):
    if time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y") < time.time()-(60*60*24*2):
       return True
    return False

for line in f:
    if OnlyRecent(line):
        print line

f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T03:22:50.440

您正在比较两种不同的数据结构。[time.strptime()](http://docs.python.org/library/time.html#time.strptime)返回一个结构时间。然而， time.time() 给出了自纪元以来的秒数。

您可以使用[time.gmtime](http://docs.python.org/library/time.html#time.gmtime)函数将自纪元以来的时间转换为时间结构，然后进行比较或使用[calendar.gmtime](http://docs.python.org/library/calendar.html#calendar.timegm)将结构时间转换为自纪元以来的时间，然后进行比较。

# algorithm - 算法，找到局部/全局最小值，2个变量的函数

> ID：12348962
> 
> 赞同：1
> 
> 时间：2012-09-10T09:36:19.277
> 
> 标签：algorithm, function, minimum

让我们有2个变量的函数：

```
 z=f(x,y) = .... 
```

你能告诉我任何合适的方法（简单的算法化，快速收敛）来计算某些区间的局部极值或全局极值吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:37:41.233

[**假设您可以计算梯度，梯度下降**](http://en.wikipedia.org/wiki/Gradient_descent)是寻找函数局部最小值的明智选择。

根据特定领域 - 有时还有其他解决方案。
例如，对于[Linear-Least-Squares](http://en.wikipedia.org/wiki/Linear_least_squares_%28mathematics%29)（用于机器学习领域的回归），您可以找到局部（和全局，在这种情况下的函数是凸的） - 您可以使用[正规方程](http://en.wikipedia.org/wiki/Linear_least_squares_%28mathematics%29#Inverting_the_matrix_of_the_normal_equations)

**编辑：**正如评论中所建议的：**如果您没有**关于该功能的任何信息，您可能可以使用[**爬山算法**](http://en.wikipedia.org/wiki/Hill_climbing)，在其中对候选人进行采样（您需要采样，因为有无限数量的如果函数是实数的方向） - 并选择最有希望的一个。
您还可以尝试使用[数值微分](http://en.wikipedia.org/wiki/Numerical_differentiation)**提取导数**，并使用梯度下降。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T09:40:16.290

如果您喜欢由热力学和冶金学的想法驱动的算法，您也可以研究[模拟退火。](http://mathworld.wolfram.com/SimulatedAnnealing.html)

或者您可能更愿意看[遗传算法，](http://www.mathworks.com/help/toolbox/gads/f6636.html)因为您喜欢当前生物学知识的爆炸式增长。

# linux - FFmpeg 0.11.1 rtmp mp4 流问题

> ID：12348968
> 
> 赞同：1
> 
> 时间：2012-09-10T09:37:09.580
> 
> 标签：linux, pandaboard

我在熊猫板上使用 ffmpeg 0.11.1 进行流式传输。Linux linaro-developer 3.4.0-1-linaro-lt-omap #1~120625232503-Ubuntu Sx Ubuntu 操作系统。

我想以 mp4 格式将原始视频从视频设备或摄像头实时流式传输到 rtmp 服务器，使用的命令：

```
./ffmpeg \
-f alsa -async 1   -ac 2 -i hw:2,0  \
-f video4linux2  -i /dev/video0  \
-acodec aac -b:a 40k \
-r 50 -s 320x240 -vcodec libx264 -strict -2  -b:v 320K -pass 1 \
-f flv  rtmp://...../mp4:demo101 
```

通过这个命令，我可以流式传输，但 fps 在 8 到 7 6 之间变化，依此类推。帮我弄清楚。

# c++ - 使用 openmp 创建共享锁

> ID：12348983
> 
> 赞同：1
> 
> 时间：2012-09-10T09:38:10.900
> 
> 标签：c++, locking, openmp, critical-section

我通常使用

```
#pragma omp critical(lock)
{ ... } 
```

当我需要确保只有一个线程正在执行一段给定的代码时使用指令。

所以我正在寻找的是一种使用类似的东西来实现共享锁和排他锁的方法。我有多个线程可以读取或写入变量。当一个线程正在写入时，它将阻止所有其他线程读取或写入。但是读取变量不应该阻塞任何东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:15:13.490

不幸的是，OpenMP 不支持读写锁。您可以改用其他提供[shared_lock](http://www.boost.org/doc/libs/1_35_0/doc/html/thread/synchronization.html#thread.synchronization.locks.shared_lock)的库，例如 Boost 。

# git - Git (assembla) - 引用提交消息中先前变更集的语法

> ID：12348987
> 
> 赞同：4
> 
> 时间：2012-09-10T09:38:18.240
> 
> 标签：git, version-control, commit, assembla

git 是否有任何官方语法可以插入到提交消息中以引用以前的变更集？例如：

```
Oops. Adding files accidentally missed out from #7557bd82e2d0c7335319392b4bcb178ce0b9620f 
```

还是 Git 不费心定义这些，而将其留给用于显示消息的工具（例如[Github](https://github.com/)或[Assembla](https://www.assembla.com)）？

在这种情况下，有谁知道 Assembla 是否有任何这样的语法，希望将引用转换为指向该变更集的链接？如果 GitHub 有这方面的语法，那么 Assembla 可能会复制它们......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:49:10.030

在 Git 中，没有“先前提交”之类的东西。在给定点有一个先前的提交，但是在合并之后，一个新的提交可能会来到分支并插入到“当前提交”和“先前的提交”之间。

但是，Assembla*可以*链接到 git 变更集日志中的特定提交。如果您知道要链接到的确切 sha 或 HEAD，则可以使用 Assembla 的标记：

这里有些例子：

```
[[r:c27dbd5d84dfa9302c47a26196221c921c7d8c12|link to sha]]
[[r:c27dbd5d84dfa9302c47a26196221c921c7d8c12]]
[[url:www.assembla.com/code/<:space>/git/nodes/master|link to head]] 
```

以下是这些示例：[https ://www.assembla.com/code/bobo-titas/git/nodes/867b914329](https://www.assembla.com/code/bobo-titas/git/nodes/867b914329)

有关 Assembla 链接的更多信息可以在“创建新的 wiki 页面”页面中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:05:46.597

没有预定义的标记来指定提交哈希。

Git 提交哈希只是十六进制数字，所以我猜你只是做正则表达式匹配`/\<[0-9a-fA-f]{4,40}\>/`（最少 4 位，最多 40 位）。您还可以检查匹配是否是有效的 Git 对象 ( `git rev-parse --verify "$match"`)。

* * *

似乎 GitHub 毕竟确实有一种特殊的语法。要在其他存储库中指定提交，请使用格式`<<username>>/<<repo>>@<<commitHash>>`（详细信息可以在问题[Github 提交消息链接](https://stackoverflow.com/a/4884507/112968)中找到）。尽管我个人会避免直接的跨项目提交引用。

# c# - 调试自己的方法时没有可用的源错误 (Nlog Logger.cs)

> ID：12348990
> 
> 赞同：0
> 
> 时间：2012-09-10T09:38:25.287
> 
> 标签：c#, visual-studio-2010, unit-testing, nlog

第一件事：

我在版本 2.0.0 中使用带有记录器 NLog 的 Visual Studio 2010。

当我在使用单元测试项目时尝试调试我的一种方法时，会发生一个特定错误：

```
`Locating source for 'c:\NLogBuild\src\NLog\Logger.cs'. (No checksum.)
The file 'c:\NLogBuild\src\NLog\Logger.cs' does not exist.
Looking in script documents for 'c:\NLogBuild\src\NLog\Logger.cs'...
Looking in the projects for 'c:\NLogBuild\src\NLog\Logger.cs'.
The file was not found in a project.
Looking in directory 'c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\crt\src\'...
Looking in directory 'c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\mfc\'...
Looking in directory 'c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\atl\'...
Looking in directory 'c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\'...
The debug source files settings for the active solution indicate that the debugger will not ask the user to find the file: c:\NLogBuild\src\NLog\Logger.cs.
The debugger could not locate the source file 'c:\NLogBuild\src\NLog\Logger.cs'` 
```

我试图在stackoverflow上找到这个错误，但找到的解决方案并没有解决它。我尝试了几件事：

*   重新安装记录器 NLog
*   更新对 Nlog.dll 和 NLogExtended.dll 的引用
*   排除引用并卸载 nlog 后重新启动我的操作系统
*   从项目中排除文件，再次包括它并重建项目，如这个问题中所说的[Stackoverflow 上的链接](https://stackoverflow.com/questions/6905012/visual-studio-2010-debugger-build-correctly-compiler-pdb-and-linker-pdb-not-in)

该错误并非发生在我的所有方法中。我可以调试某种方法，但如果我尝试使用其他方法，我会收到此错误。

**编辑：**当我尝试进入该方法`Check(outputPath, append)`时，会发生错误。在这种情况下，我必须使用记录器，并且我在其他一些方法中使用记录器，但我没有收到错误。

```
[TestMethod()]
   public void RunMethodCheckTest()
   {
       string[] cmdArgs = { };
       WebserviceReader.RunMethodCheck(cmdArgs);
   }

public static void RunMethodCheck(string [] cmdArgs)
    {
        string xmlPath = null;
        string outputPath = null;
        bool noRun = false;
        bool append = false;

        if (cmdArgs != null)
        {
            for (int i = 0; i < cmdArgs.Length; i++)
            {
                cmdArgs[i] = cmdArgs[i].ToLowerInvariant();

                if (cmdArgs[i].Equals("/?"))
                {
                    ShowHelpText();
                    return;
                }
                if (cmdArgs[i].Substring(0, 7).Equals("/output:"))
                {
                    outputPath = cmdArgs[i].Substring(cmdArgs[i].Length - 4).Equals(".xml") ? cmdArgs[i].Substring(8) : cmdArgs[i].Substring(8) + ".xml";
                }
                else if (cmdArgs[i].Substring(0, 7).Equals("/input:"))
                {
                    outputPath = cmdArgs[i].Substring(cmdArgs[i].Length - 4).Equals(".xml") ? cmdArgs[i].Substring(8) : cmdArgs[i].Substring(8) + ".xml";
                }
                else if (cmdArgs[i].Substring(0, 10).Equals("/changeout"))
                {
                    Properties.Settings.Default.OutputDefaultFileName = cmdArgs[i].Substring(cmdArgs[i].Length - 4).Equals(".xml") ? cmdArgs[i].Substring(11) : cmdArgs[i].Substring(11) + ".xml";
                    noRun = true;
                }
                else if (cmdArgs[i].Substring(0, 9).Equals("/changein"))
                {
                    Properties.Settings.Default.InputDefaultFileName = cmdArgs[i].Substring(cmdArgs[i].Length - 4).Equals(".xml") ? cmdArgs[i].Substring(10) : cmdArgs[i].Substring(10) + ".xml";
                    noRun = true;
                }
                else if (cmdArgs[i].Substring(0, 7).Equals("/append")) { append = true; }

            }
        }

        if (noRun) { return; }

        if (String.IsNullOrEmpty(xmlPath))
        {
            xmlPath = MethodCheck.WebserviceReader.GetApplicationFolderName() + "\\" + MethodCheck.Properties.Settings.Default.InputDefaultFileName;
        }
        if (String.IsNullOrEmpty(outputPath))
        {
            outputPath = MethodCheck.WebserviceReader.GetApplicationFolderName() + @"\" + MethodCheck.Properties.Settings.Default.OutputDefaultFileName;
        }

        MethodCheckType methodCheck = new MethodCheckType(xmlPath);

        methodCheck.Check(outputPath,append);
    }

public void Check(string outputPath, bool append)
{
    System.Diagnostics.Stopwatch watch = new System.Diagnostics.Stopwatch();
    double time;
    StringBuilder output = new StringBuilder();
    String valueExecute;
    String newLine = Environment.NewLine;

    for (int i = 0; i < this.WebService.Length; i++)
    {
        try
        {
            watch.Reset();

            watch.Start();
            valueExecute = this.WebService[i].Execute();
            watch.Stop();

            time = watch.ElapsedMilliseconds;

            output.Append("Executed:\n" + this.WebService[i].URL + newLine + "Time: " + time + " Milliseconds");

            Console.WriteLine(output.ToString());

            output.Append(newLine + "Expected:\t" + this.WebService[i].ReturnValue + newLine + "Got:");
            output.Append(newLine + valueExecute + newLine + newLine);
        }
        catch (Exception ex)
        {
            output.Append("Failed Webservice:\n" + this.WebService[i].URL + newLine);

            Console.WriteLine(output.ToString());

            logger.LogException(LogLevel.Error, "Failed Webservice:\t" + this.WebService[i].URL, ex);
            continue;
        }
    }

    MethodCheck.WebserviceReader.WriteToFile(output.ToString(),outputPath,append);
} 
```

如果我不在该方法`Check(string, bool)`中使用记录器，也会发生错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T09:04:06.397

我的问题的原因不是`NLog`调用，我不知道为什么它仍然会发生。

我有解决方法，但不令人满意： **在所有行中设置断点，我必须调试。**

# asp.net - Asp.net“allowDefinition=MachineToApplication”错误

> ID：12348991
> 
> 赞同：2
> 
> 时间：2012-09-10T09:38:32.630
> 
> 标签：asp.net

我已经在我的网络服务中编辑了相关的 .cs 文件。但在编辑后我得到以下错误：“使用注册为 allowDefinition='MachineToApplication' 的部分超出应用程序级别是错误的。此错误可能是由于虚拟目录未在 IIS 中配置为应用程序造成的。” 你能告诉我应该是什么问题吗？因为没有警告，没有问题，这只是一个错误。请帮我。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:41:45.487

这通常是在您有一个包含 Web.config 的 web aapp/virtual 目录时引起的，然后您在它下面的目录中添加了另一个 Web.config。下层目录需要在 IIS 中配置为虚拟目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:41:29.507

您的消息中提到了该错误。包含此网站的文件夹未配置为 IIS 中的应用程序。我建议您检查您的文件夹是否被标记为虚拟目录或 IIS 中的应用程序。

要将您的子目录配置为应用程序：

> 转到 IIS-
> 
> 在您拥有此文件夹的虚拟目录中，右键单击它并转到属性-
> 
> 你会发现创建选项-
> 
> 点击它。

现在您的文件夹是一个应用程序，您应该摆脱错误

**更新**：创建一个虚拟目录-

> 1.打开二
> 
> 2.双击网站
> 
> 3.右键点击默认网站
> 
> 4.New-Virtual Directory-Next-为别名命名-现在选择包含网站的文件夹-Next-Next-Finish。

现在运行您的网站。

# javascript - Javascript 中的 SetTimeout 和 clearTimeout

> ID：12348992
> 
> 赞同：2
> 
> 时间：2012-09-10T09:38:44.077
> 
> 标签：javascript, settimeout

我编写了这个 js 函数，用于每 15 秒调用一次 ajax。但应根据其他条件加以限制

```
 <script type="text/javascript">
  var disableReload = '<s:property value="#session[\'EXECUTOR\'] == null" />';
  var tId = window.setTimeout(function () { 
    location.reload(true);
   //alert(disableReload);
   if(disableReload){
       //alert("Clearing");
       clearTimeout(tId);
   }else{
    var url = 'my.action';
    var form = document.getElementById('myForm');
    var params = Form.serialize(form) + '&ms=' +  new Date().getTime();
    var myAjax = new Ajax.Request(url, {method: 'post', parameters: params, onComplete: showResponseAction} );
   }
 }, 15 * 1000);
</script> 
```

但是当 disableReload 为真时；clearTimeout 不是清除/删除重载功能。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:41:25.103

因为，查看您的代码，您的页面似乎在 clearTimeout 被调用之前被刷新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T09:42:10.477

我不知道你期望在这里发生什么。

您在*timeout 函数*`clearTimeout`中调用该方法- 也就是说，只有在 timeout 已经过去并且运行闭包时才会调用该代码。

 *clearTimeout 的目的是停止运行超时，这样注册的闭包就不会被调用。当（且仅当）超时刚刚触发时调用它不会有任何效果。

我只能建议您重新考虑在什么条件下要取消挂起的重新加载 - 并重新安排您的代码，以便`clearTimeout`在触发这些情况时调用，而不是*在*重新加载已经发生之后。

* * *

编辑：啊，您似乎不一定要取消*超时*本身，而是要根据变量的结果禁用重新加载。我看到有几种方法可以做到这一点：

1.  每当您设置时，请改为`disableReload = true`调用。`clearTimeout(tId)`只要`tId`具有相同的范围/可见性，`disableReload`这应该可以作为直接替代品。
2.  更改超时功能的逻辑，以便重新加载本身以`disableReload`.

前者可能是最干净的选择 - 保持超时运行没有什么意义，你知道它不会做任何事情，而且它还避免了如果`disableReload`在超时过去之前某些事情回到 false 会发生什么的问题。

但后者对您现有代码的影响较小，并且可能更容易掌握：

```
window.setTimeout(function () { 
   if (!disableReload) {
      location.reload(true); 

      // I think these are dependent on the disableReload variable too?
      // If not you can move them outside the if block
      var url = 'my.action';
      var form = document.getElementById('myForm');
      var params = Form.serialize(form) + '&ms=' +  new Date().getTime();
      var myAjax = new Ajax.Request(url, {method: 'post', parameters: params, onComplete: showResponseAction} );
   }
}, 15 * 1000); 
```

这样，如果`disableReload`为真，那么当超时关闭触发时不会发生任何事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T09:45:40.850

看起来您的`disableReload`变量是静态的（再也不会写入）。如果这是真的，你为什么要设置超时？只需将整个包裹`var tId = window.setTimeout...`在一个`if (!disableReload)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T09:40:48.557

如果我理解您的意图，那么您需要这样的东西：

```
var disableReload = false; // toggle this to false, on AJAX response(?) to stop repeats

var repeat = function()
{
    if(disableReload) 
    {
       clearInterval(intervalID);
    }
    else
    {
       var url = 'my.action';
       var form = document.getElementById('myForm');
       var params = Form.serialize(form) + '&ms=' +  new Date().getTime();
       var myAjax = new Ajax.Request(url, {method: 'post', parameters: params, onComplete: showResponseAction} );
    }
}

var intervalID = window.setInterval(repeat, 1000); 
```*

# c - fork()-parent 忽略除脚本的 execv()

> ID：12348997
> 
> 赞同：0
> 
> 时间：2012-09-10T09:39:08.443
> 
> 标签：c, linux, ubuntu-12.04

以下代码调用了一个 except 脚本，该脚本通过 ftp 将文件复制到服务器。

```
int status;
int child_pnr;  

if((child_pnr = fork())==0)
{
    printf("Childnr %i\n",child_pnr);
    execv("/home/..../ftptest.exp",NULL);

}
else if (child_pnr > 0)
{
    printf("Parent... childnr %i generated\n",child_pnr);
    sleep(7);
}
else
    perror("fork() error"); 
```

由于 execv() 将在执行后终止，我为此函数生成了一个子进程。如果我没有 sleep(7)，为什么 ftptest.exp 会从父级中断....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:44:52.377

通过“中断”，我认为您的意思是父母不会等待孩子完成操作，然后再执行下一步操作？

分叉后，父子节点将并行运行。如果您希望父母“挂起”直到孩子完成，那么您需要这样做`wait`。

在 Internet 上查看`man wait`并搜索 fork 示例。