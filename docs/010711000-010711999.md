# StackOverflow 问答 10711000-10711999

# python - 将文件向后移动多行（python）

> ID：10711007
> 
> 赞同：3
> 
> 时间：2012-05-22T22:21:38.737
> 
> 标签：python, seek

我正在使用 Python 读取以下格式的文件：

iter1
iter2
iter3
[n 行内容]
FLAG = value

iter1
iter2
iter3
iter4
iter5
[n 行内容]
FLAG = value
等....

我想搜索 FLAG，读取该值，然后倒退“n”行并读取最终迭代的值。请注意，迭代次数并不总是相同。每个文件中的行数“n”是一致的；但是，这些行可能包含不同数量的字节，因此我无法使用 seek 功能。

我想做这样的事情：

```
f = open(file)  
for i in f:  
    a = re.search('FLAG')  
    if a:  
          print a  
          spot=f.tell() #mark original spot  
          f.seek(-n,1)  #rewind by n lines  
          b = re.search('iter')  
          print b  
          f.seek(spot) #return to FLAG line, continue to next data set 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:40:48.290

假设您的“n 行内容”不包含任何以“iter”开头的行，那么您会使问题变得更加困难。您需要做的就是跟踪您看到的以“iter”开头的最后一行。然后，当您看到“FLAG=”时，您已经拥有该数据；无需“倒带”并寻找它。

```
lastiterline = None
with open(filename) as f:
    for line in f:
        line = line.strip()
        if line.startswith("iter"):
           lastiterline = line
        elif line.startswith("FLAG"):
           if lastiterline:
               print line
               print lastiterline
           lastiterline = None 
```

一般来说，最简单的方法是读取一次文件并记住以后需要的位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:42:25.530

对于一般此类问题，您可以逐块读取和处理文件：

```
def flagblocks(filename):
    with open(filename) as f:
        yieldlist = []
        for line in f:
            if not line.strip():
                continue
            if not line.startswith("FLAG"):
                yieldlist.append(line)
                continue
            yield yieldlist
            yieldlist = []
         yield yieldlist

for flagblock in flagblocks("filename"):
    process_flagblock_lines(flagblock) 
```

您的特殊情况下的处理功能仍然与 kindall 建议的基本相同。

函数中的逻辑`flagblocks`可能不是最优的，甚至是错误的。

# javascript - 谷歌地图。标记数组传递给函数

> ID：10711011
> 
> 赞同：0
> 
> 时间：2012-05-22T22:22:29.280
> 
> 标签：javascript, arrays, google-maps, google-maps-markers

我正在使用谷歌地图 API v3。我的代码从 MySql 数据库中获取对象（名称、纬度、lng 和类型）并在地图上标记它们。这对我来说很好。但我想根据它们的类型制作不同的标记。所以这是我的标记选项：

```
var iconBaznycios = new google.maps.MarkerImage('http://labs.google.com/ridefinder/images/mm_20_blue.png');

var iconMuziejai = new google.maps.MarkerImage('http://labs.google.com/ridefinder/images/mm_20_red.png');

var customIcons = [];
customIcons["Baznycios"] = iconBaznycios;
customIcons["Muziejai"] = iconMuziejai; 
```

这是我想传递我的标记数组的函数：

```
function addMarker(lat, lng, info, type) {

  var pt = new google.maps.LatLng(lat, lng);
  bounds.extend(pt);
  var marker = new google.maps.Marker({
             position: pt,
             icon: customIcons[type],
             map: map,

  }); 
```

也许这与php脚本中的这一行有关：

```
echo ("addMarker($lat, $lng,'<b>$name</b><br/> $type');\n"); 
```

任何想法如何使它按我的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:26:51.120

我认为需要更改此 PHP 行：看起来引号放错了位置并且缺少逗号。

```
echo ("addMarker($lat, $lng,'<b>$name</b><br/>', '$type');\n"); 
```

根据我的经验，`icon`里面`new google.maps.Marker`只需要 URL。它只是更短，MarkerImage 也应该工作。

```
var customIcons = [];
customIcons["Baznycios"] = 'http://labs.google.com/ridefinder/images/mm_20_blue.png'
customIcons["Muziejai"] = 'http://labs.google.com/ridefinder/images/mm_20_red.png' 
```

# c# - 我可以使用 Entity Framework 使用预定义的 sql 视图加载数据吗？

> ID：10711018
> 
> 赞同：0
> 
> 时间：2012-05-22T22:23:01.543
> 
> 标签：c#, entity-framework

是否可以在 Entity Framework 4.3.1 中使用 sql-view 加载数据？使用代码优先

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:49:25.927

`[Table("my_View")]`是的，如果您使用已定义视图的现有数据库，您可以简单地欺骗 EF，并通过使用实体类上的注释或`.ToTable("my_View")`流利映射中的方法让它假定视图实际上是一个表。

# java - 这些布局是什么

> ID：10711022
> 
> 赞同：2
> 
> 时间：2012-05-22T22:23:47.943
> 
> 标签：java, layout

我不知道这些布局是什么。

1.  首先图片如何使这组按钮位于 TextArea 的右侧（请发布一些代码示例，谢谢）

2.  如何使这个 JTextArea 如此大的图片。

3.  第二张图片如何在面板的左侧和右侧制作这些空字段。

4.  第二张图：如何获得 JTextArea 和 JTextField 的大小。

其他的很简单，所以我不问他们

[首先 http://img98.imageshack.us/img98/8504/84871015.png](http://img98.imageshack.us/img98/8504/84871015.png)

[第二个 http://img18.imageshack.us/img18/3372/93341349.png](http://img18.imageshack.us/img18/3372/93341349.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:40:10.740

虽然实现这些布局的方法不止一种，但我猜你正在看的[`GridBagLayout`](http://docs.oracle.com/javase/6/docs/api/java/awt/GridBagLayout.html)是最灵活但也是最难做到的。

您的第一张图片有六行四列。字段占据前三行的所有列；文本区域占据第四行到第六行的第一列；按钮占据单个单元格。

您的第二张图片有四行六列。文本区域为一列三行，文本字段为一行六列，按钮为每个单元格。

Oracle 提供了一个关于它的[教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)- 如果您通过他们的示例工作，您应该能够制作自己的布局，看起来像您图片中的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T22:56:31.933

仅通过查看图片就无法准确判断使用了哪种布局，因为您可以通过多种不同的方式实现这些布局。如果您考虑调整行为的大小，则尤其如此。

但是我怀疑答案是：

1.  可能是包含在 BorderLayout 中的 GridLayout（参见：[http ://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html）](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)

2.  可能使用 BorderLayout 或 GridLayout - 这两者都会扩展文本区域以填充屏幕的相关区域。

3.  可能是一个 BorderLayout，使用东和西面板作为文本字段。

4.  同样可能是一个边框布局，底部面板中有文本字段。

虽然您可以使用标准布局管理器清楚地完成所有这些工作，但如果我想复制这些布局，那么我可能会使用[MigLayout](http://www.miglayout.com/)，它是一个非常灵活的通用布局管理器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T22:46:03.440

这`JButtons`是按用途放置的，`GridBagLayout()`我给你一些类似的例子如何做到这一点。

```
controls = new JPanel();
controls.setLayout(new GridBagLayout());
GridBagConstraints d = new GridBagConstraints();
        d.fill = GridBagConstraints.BOTH;
        d.weightx = 1;
        d.weighty = 1;
        seven = new JButton("7");
        buttonsList.add(seven);
        d.gridx = 0;
        d.gridy = 2;
        d.insets = new Insets(0, 4, 4, 4);
        controls.add(seven, d);

        eight = new JButton("8");
        buttonsList.add(eight);
        d.gridx = 1;
        d.gridy = 2;
        d.insets = new Insets(0, 0, 4, 4);
        controls.add(eight, d);

        nine = new JButton("9");
        buttonsList.add(nine);
        d.gridx = 2;
        d.gridy = 2;
        d.insets = new Insets(0, 0, 4, 4);
        controls.add(nine, d);

        plus = new JButton("+");
        buttonsList.add(plus);
        d.gridx = 3;
        d.gridy = 2;
        controls.add(plus, d);

        four = new JButton("4");
        buttonsList.add(four);
        d.gridx = 0;
        d.gridy = 3;
        d.insets = new Insets(0, 4, 0, 4);
        controls.add(four, d); 
```

# xml - 使用 XSLT 删除节点后摆脱空行

> ID：10711023
> 
> 赞同：20
> 
> 时间：2012-05-22T22:24:11.090
> 
> 标签：xml, xslt

我正在使用 XSLT 在 XML 文档中进行非常简单的转换。我只想删除所有具有特定名称的元素节点。碰巧在我的源文档中，所有这些节点都位于文档的末尾，但是在转换之后，虽然节点已经按我的意图消失了，但它们的位置有很多空行。

这严格来说是一个表面问题，因为我完成了我想要的转换，但出于好奇：我怎样才能摆脱这些空行？这是我用于转换的 XSL 文件（我要删除的元素名为“relations”）：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" />

  <xsl:template match="*">
    <xsl:copy>
      <xsl:copy-of select="@*" />
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="relation"/>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-23T02:28:40.317

**原因在于作为已删除元素的直接兄弟的纯空白文本节点**。

**解决方案**：只需添加此 XSLT 指令即可删除任何仅包含空格的文本节点——甚至在转换开始之前：

```
 <xsl:strip-space elements="*"/> 
```

结果可能会丢失缩进 - 如果是这样，请添加：

```
 <xsl:output omit-xml-declaration="yes" indent="yes"/> 
```

**完整的转换变为**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

    <xsl:template match="*">
        <xsl:copy>
            <xsl:copy-of select="@*" />
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="relation"/>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**（未提供！）：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>

  <relation/>
  <relation/>
  <relation/>
  <relation/>
  <relation/>
  <relation/>
  <relation/>
  <relation/>
</nums> 
```

**产生了想要的正确结果（没有尾随空格）：**

```
<nums>
   <num>01</num>
   <num>02</num>
   <num>03</num>
   <num>04</num>
   <num>05</num>
   <num>06</num>
   <num>07</num>
   <num>08</num>
   <num>09</num>
   <num>10</num>
</nums> 
```

# java - 更新热情2中节点的标签/图标

> ID：10711024
> 
> 赞同：3
> 
> 时间：2012-05-22T22:24:11.807
> 
> 标签：java, eclipse-rcp, zest

我正在使用带有 SpaceTreeLayoutAlgorithm 的 GraphViewer，并在创建图形后尝试更新节点的标签/图标。

已经测试过的变种

```
viewer.refresh(node, true); 
```

和

```
viewer.refresh(viewer.getGraphModelNode(node), true); 
```

结合查看器或其图形控件的各种刷新/重绘方法，但没有成功。

有关查看器使用的更多详细信息：

```
GraphViewer viewer = new GraphViewer(parent, SWT.BORDER);
ArrayContentProvider content = new MyArrayContentProvider(..);

viewer.setContentProvider(content);
LabelProvider glp = new MyGraphLabelProvider(..);
viewer.setLabelProvider(glp);

List<MyNodeClass> nodes = .. //list of all node elements
viewer.setInput(nodes);

TriangleSubgraphFactory subGraphFactory = new TriangleSubgraphFactory();
SpaceTreeLayoutAlgorithm spaceTreeAlg = new SpaceTreeLayoutAlgorithm();

viewer.getGraphControl().setSubgraphFactory(subGraphFactory);
viewer.getGraphControl().setExpandCollapseManager(
    spaceTreeAlg.getExpandCollapseManager());
viewer.setLayoutAlgorithm(spaceTreeAlg, true); 
```

代码按预期工作，除了我上面提到的刷新。

我想我可能做错了什么，因为 Fabian 推荐的调用 viewer.setInput(..) 会导致错误。我也没有设法将 SpaceTreeLayoutAlgorithm(int direction) 与 TOP_DOWN 以外的任何方向一起使用，否则我会得到 NPE。

稍后调用 viewer.setInput 会导致：

```
Caused by: java.util.NoSuchElementException
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:813)
at java.util.HashMap$KeyIterator.next(HashMap.java:845)
at org.eclipse.zest.core.widgets.custom.TriangleSubgraph.updateFigure(TriangleSubgraph.java:169)
at org.eclipse.zest.core.widgets.custom.TriangleSubgraph$1.defaultHandle(TriangleSubgraph.java:147)
at org.eclipse.zest.layouts.algorithms.TreeLayoutObserver$TreeListener.nodeRemoved(TreeLayoutObserver.java:308)
at org.eclipse.zest.layouts.algorithms.TreeLayoutObserver$1.nodeRemoved(TreeLayoutObserver.java:344)
at org.eclipse.zest.core.widgets.InternalLayoutContext.fireNodeRemovedEvent(InternalLayoutContext.java:399)
at org.eclipse.zest.core.widgets.InternalNodeLayout.dispose(InternalNodeLayout.java:327)
at org.eclipse.zest.core.widgets.Graph.removeNode(Graph.java:977)
at org.eclipse.zest.core.widgets.GraphNode.dispose(GraphNode.java:188)
at org.eclipse.zest.core.viewers.AbstractStructuredGraphViewer.inputChanged(AbstractStructuredGraphViewer.java:494)
at org.eclipse.zest.core.viewers.GraphViewer.inputChanged(GraphViewer.java:136)
at org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:280)
at org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1690) 
```

以下用于刷新，但这不可能是预期的用途：

```
GraphLabelProvider glp
GraphNode n = viewer.getGraphModelNode(node);
n.setText(glp.getText(node));
n.setImage(glp.getImage(node)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:01:05.200

我不确定您是如何准确使用查看器的，但最简单的方法可能是将查看器的输入重置为您想要可视化的新数据（您在内容和标签提供程序中处理）。当您设置输入时，图表会自动更新：

```
viewer.setInput(myChangedDataToBeVisualized); 
```

# ios - 每次加载时停止 UIWebView 加载设置的 URL

> ID：10711027
> 
> 赞同：0
> 
> 时间：2012-05-22T22:24:39.343
> 
> 标签：ios, webview, uitabbarcontroller, uisegmentedcontrol

我有一个带有多个 UIWebView 的应用程序，当我按下按钮调出一个时，它会加载设置的 URL。

现在我希望第一次发生这种情况，因为网页需要加载，但是如果我想在不同的视图之间轻弹怎么办？我希望它留在我离开时的页面上。

现在我确实相信这可以使用 UITabBarController 来完成，但它占用了我想要实现的大量屏幕空间，因此我使用 UISegmentedController 实现了开关。

我有这段代码可以在我的 viewDidLoad 方法中加载网站：

```
NSString *urlAddress = @"http://google.com";  
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[_webView loadRequest:requestObj]; 
```

在这个[SO 问题](https://stackoverflow.com/a/1577557/892628)上，我发现您可以让网页停止加载：

```
UIWebView *webView = [self.view viewWithTag:10];
if(webView)
 {
  [webView stopLoading];
 } 
```

现在我知道我需要调整那个答案，但是我正在尝试做的事情是否可行，或者使用 SegmentedControl 总是会导致 UIWebView 重新加载并且我会被迫使用 TabBar？

干杯杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:13:14.380

使用 NSUserDefaults 记录是否是第一次并采取相应措施。

# python - NameError：未定义全局名称“RPyPException”

> ID：10711030
> 
> 赞同：0
> 
> 时间：2012-05-22T22:24:59.750
> 
> 标签：python, r, rpy2

第二个问题：非常感谢本！有用！我收到错误 13 消息，说我无法在 C:\Program Files 中创建临时文件，因此我移动了 ARSER 文件夹并将其放在我的用户名下。这解决了错误 13，但现在我得到 NameError: a global name 'RPyPException' is not defined。这是因为我将文件夹移出保存了 R、Python 和 rpy 的 Program Files 文件夹吗？谢谢！

* * *

第一个问题：我正在尝试使用名为 ARSER (http://bioinformatics.cau.edu.cn/ARSER/) 的程序分析生物节律数据，当我尝试运行它时出现错误：

文件“C:\Program Files\ARSER\arser.py”，第 9 行，从 rpy 导入 * 导入错误：没有名为 rpy 的模块

我正在运行 WINDOWS 7 并已下载：

1.  运行 Python 版本 2.7.2.3 的 Python(x,y)
2.  适用于 Python 2.7 的 windows 补丁 (pywin32-217.win32-py2.7.exe)
3.  R 版本 2.8.1
4.  rpy 版本 2.2.3

在我的电脑高级选项下，我将环境变量 PATH 更改为 C:\Program Files\R\R-2.8.1\bin 但这并没有解决上述错误。我正在阅读的帮助说明来自旧版本的 R，所以也许这就是问题所在？

我是所有这些程序的新手，我感谢您的任何建议！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:51:15.867

我怀疑您需要更改`PYTHONPATH`环境变量以包含包含`rpy`. 当您使用环境变量导入某些内容时，Python 知道在哪里搜索模块`PYTHONPATH`，就像 shell 知道在哪里查找您通过使用`PATH`环境变量键入名称的程序一样。

# javascript - 元素消失时未触发 onmouseout

> ID：10711031
> 
> 赞同：6
> 
> 时间：2012-05-22T22:25:00.793
> 
> 标签：javascript, javascript-events

我有一个触发工具提示的鼠标悬停事件；我希望这个工具提示在鼠标被移除时消失。onmouseout 效果很好，*除非*元素消失。

这是一个使用背景更改而不是工具提示的提炼示例（因此您可以轻松运行它）：

```
<div id="bar">
  <div onmouseover="document.bgColor='gray'" onmouseout="document.bgColor='white'" style="border:1px solid black;">
   <span onclick="document.getElementById('bar').innerHTML = ''">Remove me</span>
  </div>
</div> 
```

问题是这样的：当我单击“删除我”时，我的鼠标不再“在”div 上，但是 onmouseout 没有触发，因为它已经消失了。当我单击“删除我”时，我希望这个示例恢复为白色背景。

有一个明显的解决方案，我想避免。我不希望删除元素的 onclick 处理程序手动“修复”文档。这是因为可能有任意多个处理程序可以使用 onmouseout 删除 div。通常，所有的 mouseout 和删除处理程序都可能是动态生成的，并且需要相互了解。更复杂的是，我可能会遇到可移动元素相互嵌套的情况，并且它们中的任何一个都可以被删除。（我也许可以删除这个约束，但需要做一些工作。）

* * *

这是一个可行的解决方案示例：在鼠标悬停时，将模态对话注册为“活动”；然后每当删除元素时，遍历所有模态对话并查找不再在文档中的那些。但这需要我保持全局的对话存储，并且需要时间 O(n*m)，其中 n 是活动对话的数量，m 是对话在 DOM 中的嵌套深度。此外，每当我删除元素时，我都需要运行此操作，即使很明显没有任何影响。

这是另一种可行的解决方案：如果您可以实现 onremovedfromdocument 事件，那么我们只需将 onmouseout 处理程序复制为 onremovedfromdocument 事件，该示例也将正常工作。（我听说 jQuery 可能支持这一点，但我需要与非 jQuery 代码互操作。）

这是另一种可能的解决方案：让每个模态对话重复轮询以查看其父级是否在文档中。如果不是，让它提交 seppuku。但是民意调查真的很丑。（我想如果没有更好的方法，我会愿意这样做！）

这里还有一个思路：使用事件捕获让onmouseout元素先捕获click元素，并设置一个定时器来检查点击完成后它是否还在文档中。

* * *

作为参考，这就是我真正想做的事情：我有一个 JS 小部件，它构建了一个复杂的树结构。对小部件的许多编辑涉及单击树中的某个按钮，然后从树中添加或删除（可能会自行删除）。但是，某些节点需要更复杂的编辑过程，所以我想提出一个工具提示当用户将鼠标悬停在它们上时，带有说明和可能的更多按钮，或者如果用户单击它们，甚至可以保持对话。但是用户可能会改变主意并决定删除节点或节点的任何父节点，在这种情况下对话应该消失。[您可以在此处](http://logitext.ezyang.scripts.mit.edu/logitext.fcgi/proving/.28forall+x.2C+P.28x.29.29+.7C.2D+.28exists+x.2C+P.28x.29.29)查看我目前拥有的实现，其中对话是手动创建的。我想开始使用一个不错的工具提示库，但它们都有我上面描述的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:54:24.977

在现代浏览器上，有[`DOMNodeRemoved`](https://developer.mozilla.org/en/DOM_Events)事件。所以：

```
var div = document.getElementsByTagName('div')[0];
div.addEventListener('DOMNodeRemoved', function(e){
    document.bgColor='white';
});​ 
```

[http://jsfiddle.net/HX88L/](http://jsfiddle.net/HX88L/)

不好的是，那个事件已经被[弃用](https://developer.mozilla.org/en/DOM/Mutation_events)了。所谓的[突变事件](https://developer.mozilla.org/en/DOM/Mutation_events)的替代品看起来还没有准备好使用。MDN 文档页面仍然只是一个[存根](https://developer.mozilla.org/en/DOM/DOM_Mutation_Observers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:41:19.263

尝试：

```
 <script>
    var liveToolTip = new Array();
    function addLiveToolTip(elName){
        if(elName in liveToolTip){
        }else{
            liveToolTip[elName]=1;}
    }
    function removeLiveToolTip(elName){
        if(elName in liveToolTip){
            delete liveToolTip[elName];
        }
    }
    function runOnMouseOuts() {
        for(mouseOut in liveToolTip) {
            document.getElementById(mouseOut).onmouseout();
        }
    }
</script>
<div id="bar">
  <div onmouseover="addLiveToolTip(this.id);document.bgColor='gray'" 
        onmouseout="removeLiveToolTip(this.id);document.bgColor='white'" style="border:1px solid black;" id="foo">
      <span onclick="document.getElementById('bar').innerHTML = '';runOnMouseOuts()">
      Remove me</span>
  </div> 
```

# c# - 当我从另一个进程的标准输出中读取时，为什么我的事件处理程序不触发

> ID：10711033
> 
> 赞同：0
> 
> 时间：2012-05-22T22:25:18.813
> 
> 标签：c#, ipc

我有一个非常简单的 C# 项目，它有一个 UI 进程和一个工作进程。工作代码需要是一个进程（而不是线程），因为它可以由 UI 或 Windows 任务计划程序运行。

在 UI 代码中，我设置`ProcessStartInfo.RedirectStandardOutput`为`true`并注册事件处理程序。然后，我启动进程（使用`Process.Start()`并调用`Process.BeginOutputReadline()`。但是，我指定为 OutputDataReceived 事件处理程序的方法永远不会触发。当我运行工作进程而不重定向它的标准输出时，我会在控制台上看到预期的输出。当我打开输出重定向,我在控制台上看不到任何东西(如预期的那样),但事件处理程序也没有触发.还有什么我需要从另一个进程的标准输出流中异步读取的吗？

编辑：我已经设法用两个简单的控制台进程复制了这个问题。

首先是父母：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Diagnostics;

namespace OutputRedirectionEventHandlerTest
{
    class ParentProgram
    {
        static void Main(string[] args)
        {
            ProcessStartInfo processInfo = new ProcessStartInfo()
            {
                FileName = "OutputRedirectionWorker.exe",
                RedirectStandardOutput = true,
                UseShellExecute = false
            };
            Process subProcess = new Process()
            {
                StartInfo = processInfo
            };
            subProcess.OutputDataReceived += 
                new DataReceivedEventHandler(OutputHandler);
            subProcess.Start();
            subProcess.BeginOutputReadLine();

        }

        static void OutputHandler(object SendingProcess, 
            DataReceivedEventArgs args)
        {
            Console.Out.WriteLine("Received from subprocess: " + args.Data);
        }

    }
} 
```

然后，孩子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Threading;

namespace OutputRedirectionWorker
{
    class ChildProgram
    {
        static void Main(string[] args)
        {
            Console.Out.WriteLine("Output1");
            Console.Out.WriteLine("Output2");
            Console.Out.WriteLine("Output3");
            Thread.Sleep(10000);
        }

    }
} 
```

父级不会打印任何输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:46:17.427

您需要了解对的调用会*立即*`BeginOutputReadLine`返回。它启动了标准输出的异步读取。

 *您提供的示例中的问题是 Parent 程序在调用后立即退出`BeginOutputReadLine`。它永远没有机会读取输出 - 它甚至在 ChildProgram 启动之前就退出了。您需要使用某种循环保持父级运行，以便它读取标准输出。

尝试这样的事情：

```
static void Main(string[] args)
    {
        ProcessStartInfo processInfo = new ProcessStartInfo()
        {
            FileName = "OutputRedirectionWorker.exe",
            RedirectStandardOutput = true,
            UseShellExecute = false
        };
        Process subProcess = new Process()
        {
            StartInfo = processInfo
        };
        subProcess.OutputDataReceived += 
            new DataReceivedEventHandler(OutputHandler);
        subProcess.Start();
        subProcess.BeginOutputReadLine();

        while (Console.ReadLine().ToLower() != "quit") {
            // looping here waiting for the user to type quit
        }
    } 
```*

# android - 在哪里使用 SimpleAdapter 更新数据对象

> ID：10711038
> 
> 赞同：1
> 
> 时间：2012-05-22T22:25:45.770
> 
> 标签：android

下午好，

我正在访问一些记录的 XML 源。XML 被解析为一个数据对象，该对象又被解析为一个 HashMap，并且该映射被传递给一个提供 ListView 的 SimpleAdapter。这一切运作良好。现在我准备好让用户更改一些数据并点击提交。有几个屏幕，因此如果他们决定更改某些内容，他们可能希望从第 6 个屏幕返回到第 3 个屏幕。例如，用户更改屏幕 3-4-5-6。然后在 6 上发现一个错字并返回到 3 进行更正。

所以我的问题是如何实现这一目标？我是否获得了 HashMap / SimpleAdapter 的句柄并更新其中的值？这适用于 UI 立即更新（我认为），但幕后的数据对象仍然有旧数据....我的想法是使用数据对象提交更改。

我也可以更新数据对象，但随后我需要重建哈希图并“重新绑定”（正确的术语？）SimpleAdapter 到 ListView 以便 ui 获得更改......

任何方向都非常感谢。TIA JB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:23:10.720

我学到的是 SimpleAdapter 非常适合 STATIC 数据，但如果您的数据是可变的，请使用 ArrayAdapter 或其他东西。我重构为使用 ArrayAdapter 并且一切都适用于动态数据更改。

JB

# regex - RegEx 使用 Notepad++ 排除行

> ID：10711041
> 
> 赞同：4
> 
> 时间：2012-05-22T22:26:19.043
> 
> 标签：regex, notepad++

> **可能重复：**
> [notepad++ 逆正则表达式替换（除了字符串之外的所有内容）](https://stackoverflow.com/questions/8264391/notepad-inverse-regex-replace-all-but-string)

假设我有以下...

```
http://whateverurl.com/is-not-wanted-but-it-is-here-anyway
http://icantbelieveibeenonthisallday.com/i-want-to-shoot-myself
http://hereiswhatireallywant.net/hey-there-sweet-thang
http://howsithangingloser.org/i-hope-someone-helps-you
http://heresanotherbeauty.net/that-i-want-to-be-all-up-in 
```

我只想找到不包含“.net/”的行，所以我可以用任何内容替换它，因此删除。

我在网上和这个网站上搜索并找到了**(?!xxx)**字符串，所以我试图做**(?!.net/)** 但似乎 Notepad++ 不支持该字符串，或者我可能使用错误，因为我我是 RegEx 的新手。

谁能告诉我如何在 Notepad++ 中找到排除特定字符串的行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T22:32:55.873

~~据我所知，Notepad++ 的正则表达式支持并不能让您实际捕获换行符。你最好使用这个正则表达式：~~

 ~~```
^.*\.net.*$ 
```~~ 

~~将其替换为空行（现在它是一个空行），然后将搜索模式更改为扩展并替换`\r\n\r\n`为`\r\n`（或者如果使用 Unix 样式的行尾，则替换为）`\n\n`。`\n`~~

BoltClock 指出我落后于时代，版本 6 支持这一点。您可以使用此正则表达式查找这些行并将其删除：

```
^.*\.net.*(\r\n|$) 
```

**编辑**：

> 感谢您的回复，但您误解了我所说的。我试图找到不包含 .net/ 的行来删除它们。可以做到吗？

哎呀。如果要匹配其中*没有*的行，请`.net`使用以下表达式：

```
^(?!.*?\.net/).*\r\n 
```

在记事本++ 6 中工作。

# json - 在 Dispatch 和 Scala 中使用 JSON 的 POST 请求

> ID：10711042
> 
> 赞同：3
> 
> 时间：2012-05-22T22:26:24.487
> 
> 标签：json, scala, post, scala-dispatch

我在使用 Dispatch 和 Scala 使用 JSON 对象发出 POST 请求时遇到问题。

POST 请求肯定可以正常工作，因为我使用 curl 对其进行了测试：

```
~/workspace $ curl -vd 'tracker={"project":"campaign","event":"home","number":"100"}'  http://exampleurl:8145/test 
```

我得到了预期的 HTTP 200 响应

但是当我尝试使用 Dispatch 库（[http://dispatch.databinder.net/Dispatch.html](http://dispatch.databinder.net/Dispatch.html)）做同样的事情时：

```
scala> Http(url("http://exampleurl:8145/test") << "tracker={'project':'campaign','event':'home','number':'100'}" >|) 
```

这就是我得到的：

```
dispatch.StatusCode: Unexpected response code: 404
Paramerter missing: [tracker] not found
at dispatch.HttpExecutor$$anonfun$when$1.apply(executor.scala:53)
at dispatch.HttpExecutor$$anonfun$when$1.apply(executor.scala:50)
at dispatch.HttpExecutor$$anonfun$x$2.apply(executor.scala:41)
at dispatch.HttpExecutor$$anonfun$x$2.apply(executor.scala:36)
at dispatch.BlockingHttp$$anonfun$execute$1.apply(Http.scala:54)
at dispatch.Http.pack(Http.scala:25)
at dispatch.BlockingHttp$class.execute(Http.scala:53)
at dispatch.Http.execute(Http.scala:21)
at dispatch.HttpExecutor$class.x(executor.scala:36)
at dispatch.Http.x(Http.scala:21)
at dispatch.HttpExecutor$class.when(executor.scala:50)
at dispatch.Http.when(Http.scala:21)
at dispatch.HttpExecutor$class.apply(executor.scala:60)
at dispatch.Http.apply(Http.scala:21)
at .<init>(<console>:11)
at .<clinit>(<console>)
at .<init>(<console>:11)
at .<clinit>(<console>)
at $print(<console>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
at scala.tools.nsc.interpreter.IMain$Request.loadAndRun(IMain.scala:914)
at scala.tools.nsc.interpreter.IMain.loadAndRunReq$1(IMain.scala:546)
at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:577)
at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:543)
at scala.tools.nsc.interpreter.ILoop.reallyInterpret$1(ILoop.scala:694)
at scala.tools.nsc.interpreter.ILoop.interpretStartingWith(ILoop.scala:745)
at scala.tools.nsc.interpreter.ILoop.command(ILoop.scala:651)
at scala.tools.nsc.interpreter.ILoop.processLine$1(ILoop.scala:542)
at scala.tools.nsc.interpreter.ILoop.loop(ILoop.scala:550)
at scala.tools.nsc.interpreter.ILoop.process(ILoop.scala:822)
at scala.tools.nsc.interpreter.ILoop.main(ILoop.scala:851)
at xsbt.ConsoleInterface.run(ConsoleInterface.scala:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sbt.compiler.AnalyzingCompiler.call(AnalyzingCompiler.scala:57)
at sbt.compiler.AnalyzingCompiler.console(AnalyzingCompiler.scala:48)
at sbt.Console.console0$1(Console.scala:23)
at sbt.Console$$anonfun$apply$2$$anonfun$apply$1.apply$mcV$sp(Console.scala:24)
at sbt.TrapExit$.executeMain$1(TrapExit.scala:33)
at sbt.TrapExit$$anon$1.run(TrapExit.scala:42) 
```

我不确定为什么它缺少我试图通过的跟踪器参数。

有人想吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-17T23:33:30.213

不确定您的调度版本，但另一种方法（至少在 0.11.0 版本中）（特别是如果不方便将您的数据混合回地图）是显式设置内容类型，例如这：

```
Http(url("http://exampleurl:8145/test").setBody(
     "tracker={'project':'campaign','event':'home','number':'100'}").setHeader(
     "Content-Type", "application/json") OK as.String) 
```

注意：我删除了“>|” 运算符（来自 dispatch 0.8.x 并忽略响应）与“OK as.String”。随意忽略该响应字符串。

[如果您将lift-json](https://github.com/lift/lift/tree/master/framework/lift-base/lift-json/)与案例类一起使用（或者通常只是与 AST 一起使用），这很好。然后代替

```
Http(url("http://someplace.com") << someAwfulTransformer(
     myCaseClassOrBigASTbasedThing) OK as.String) 
```

你可以这样做

```
Http(url("http://someplace.com").setBody(
     write(myCaseClassOrBigASTbasedThing)).setHeader(
     "Content-Type", "application/json") OK as.String) 
```

随意用你的隐式或辅助函数来装饰它，以尽量减少打字。但关键是，如果您有直接实体到 JSON 字符串的映射，则无需担心将其转换回 Map。事实上，你*不应该*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T23:07:39.167

我认为您想将其发布为名称值对：

```
Http(url("http://exampleurl:8145/test") << 
  Map("tracker" -> "{'project':'campaign','event':'home','number':'100'}") >|) 
```

# c++ - C++字符串替换函数无限循环

> ID：10711046
> 
> 赞同：0
> 
> 时间：2012-05-22T22:26:57.320
> 
> 标签：c++, string

**该项目**

我想我会制作一个程序，该程序使用以下语法获取文件：`old_word:new_word`使语法更改更容易。我有其他计划，但现在该计划的核心无法正常工作。

**问题**

我很久没有使用 C++，所以我还在学习。我正在使用别人的字符串替换功能，但它陷入了无限循环。该函数包含一些我不熟悉的语法，所以我不知道它为什么会失败。所有其他函数都正确返回。

字符串替换函数如下：

```
//!Not my work
void replaceAll(std::string& str,  std::string& from,  std::string& to) {
size_t start_pos = 0;
while((start_pos = str.find(from, start_pos)) < std::string::npos) {
    str.replace(start_pos, from.length(), to);
    start_pos += to.length();
}
} 
```

程序在此循环中失败：

```
for(int secInd=0; secInd<members; secInd++)
    {
        replaceAll(line[index],toStrings[secInd],fromStrings[secInd]);
    } 
```

`line``getline`是从函数中获得的缓冲区。`toStrings`从语言定义文件中加载，fromStrings 也是如此。

谁能告诉我为什么这会进入无限循环并可能告诉我如何解决它？如果您需要，完整的源代码位于[http://pastebin.com/zXFFvUSm 。](http://pastebin.com/zXFFvUSm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:30:15.237

在调试器中运行它。初学者（或特定语言的初学者）程序员经常高估调试器的学习和使用难度。您可能已经学习了足够多的 dbx 来解决这个问题，并且在您提出这个问题并等待答案所花费的时间内完成了 - 是的，它们对于像这样的简单任务非常容易使用。

# android - 最全的 Cocos2d-x 教程指南列表

> ID：10711047
> 
> 赞同：70
> 
> 时间：2012-05-22T22:26:59.853
> 
> 标签：android, ios, cocos2d-x

我正在使用 Cocos2d-x 为 Android 和 iPhone 开发游戏。一开始我在开始使用这个库时遇到了很多问题，所以，在这个问题中，我想收集所有基础、中级和专家教程，因为有很多信息问题都犯了同样的错误。当我[开始](https://stackoverflow.com/questions/9979795/where-can-i-find-a-good-tutorial-to-start-programming-using-cocos2d-x)时，我不得不使用我的朋友谷歌在许多网站上查看很多内容。希望这可以帮助人们从现在开始。**全部在 c++**中。

**初学者**

*   官方维基[链接](http://www.cocos2d-x.org/projects/cocos2d-x/wiki)
*   如何在多平台中开始[HERE](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)最好的一个。太棒了，XCODE (MAC) 和 ECLIPSE (LINUX) 教程。
*   一个简单的入门[指南](http://developer.bada.com/library/BalloonRide)
*   另一个多平台[指南](http://gameit.ro/2012/01/creating-an-iphone-and-android-cocos2d-x-hybrid-project-updated/)
*   很棒的开始在[Eclipse + Android](http://blog.plicatibu.com/developing-with-cocos2d-x-for-android-on-linux/)和[DEBUG](http://blog.plicatibu.com/how-to-debug-cocos2d-x-and-java-code-using-eclipse/)上编程的指南，感谢[Marcio Andrey](https://stackoverflow.com/users/88211/marcio-andrey-oliveira)
*   Android上集成cocos2d-x的另一种[方式](http://jpsarda.tumblr.com/post/26000816688/integrate-cocos2d-x-c-into-an-android-application)
*   社交示例，iOS 和 Android 上的 Facebook + 电子邮件 + Twitter[这里](http://www.cocos2d-x.org/boards/6/topics/12492)

**中等的**

*   滚动场景。使用 CCParallaxNode。[太空游戏示例](http://www.raywenderlich.com/11338/cocos2d-x-for-ios-and-android-space-game)
*   InfiniteParadax Class [Here](https://github.com/jasonmarziani/CCParallaxScrollNode)，一直重复相同的背景。
*   [滑块代码](http://www.cocos2d-x.org/boards/6/topics/9803) [这里](https://www.youtube.com/watch?v=hvQOnk4RgmM)是视频。
*   [此处](http://blog.bigbunkerstudio.com/?p=154)使用 2 层分屏
*   锐化标签 TTF，[更好的标签](https://rombosblog.wordpress.com/2012/04/11/prevent-blurry-fonts-when-using-cclabelttf/)

**先进的**

*   将 OpenFeint 与 cocos2d-x 集成。我只找到了[这个例子](http://blog.molioapp.com/2011/11/openfeint-and-admob-integrated-with.html)，[这里](http://www.cocos2d-x.org/boards/10/topics/9191)有更多细节。
*   GameCenter 上的存档。[这里](http://www.cocos2d-x.org/boards/6/topics/6891)

**扩展**

*   我还没有测试所有，但工作正常[walzer 的扩展](https://github.com/cocos2d/cocos2d-x-extensions)
*   [MarkusPfundstein](https://github.com/MarkusPfundstein/Cocos2DX-Extensions)的扩展
*   DualFace[扩展](https://github.com/dualface/cocos2d-x-extensions)，实际上正在开发中

**代码示例**

*   *Clawoo 示例*
*   [简单游戏 1](https://github.com/clawoo/SimpleGameCocos2D-x)
*   [简单的游戏 1 - 一部分 2](https://github.com/clawoo/SimpleGamePart2Cocos2D-x)
*   [简单的游戏 1 - 一部分 3](https://github.com/clawoo/SimpleGamePart3Cocos2D-x)
*   [爆发](https://github.com/clawoo/BreakoutCocos2D-x)
*   [乒乓](https://github.com/clawoo/PongCocos2D-x)
*   [可爱的拉杆](https://github.com/clawoo/CuteAPultCocos2D-x)
*   [基于瓷砖的游戏](https://github.com/clawoo/TileBasedGameCocos2D-x)
*   [小行星](https://github.com/clawoo/AsteroidsCocos2D-x)
*   *八达网*
*   [气球骑行](http://developer.bada.com/library/BalloonRide)
*   *演示和链接集合*
*   [supersuraccoon-cocos2d 演示（并非所有 C++）](http://www.supersuraccoon-cocos2d.com/2011/09/17/sticky-demo-resource-list-keep-updating/)
*   [supersuraccoon-cocos2d 链接合集](http://www.supersuraccoon-cocos2d.com/2012/02/11/sticky-ios-cocos2d-develop-recommended-blog-list-keep-updating/)
*   另一个代码示例：[Tiny Wings Remake on Android using Cocos2d-X](https://github.com/diwu/Tiny-Wings-Remake-on-Android)

**尖端**

*   [支持的](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Audio_formats_supported_by_CocosDenshion_on_different_platforms)音频格式
*   如果你使用 Linux，请不要使用 cocos2d-android 或 cocos2d-android-1, **is decreated**。尝试使用 cocos2d-x

*   如果您使用 Linux，并且不知道如何使用本机代码，[请在开发中查看](http://developer.android.com/sdk/ndk/index.html)

*   CCLOG("字符串"); 不要在 Eclipse log cat 上工作，但 CCLog 可以！

*   最大纹理大小/分辨率[在这里](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Max_size_of_textures_in_cocos2d-x_depends_on_each_platform)

*   Iphone 使用 RETINA 绘制高清纹理，但在 Android 上不使用。我的解决方案是在 iphone 上使用 RETINA，并且只在 Android 中进行 setscale 编译。[多分辨率维基](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_does_cocos2d-x_support_multi-resolution)。在示例中：

```
    #if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID)
    this->setObjectScale(1);
    #endif // CC_PLATFORM_IOS

```

*   你的第一个例子一定是[WIKI上的官方](http://www.cocos2d-x.org/projects/cocos2d-x/wiki)

**[官方页面 COCOS2D-X](http://www.cocos2d-x.org/) **

什么需要这个问题？

*   XML 教程，我在这方面一无所知。实际上，我正在编写一些代码。我会做一个教程。可以使用的库是[libxml2](http://www.xmlsoft.org/)
*   创建菜单示例
*   滑块菜单示例
*   手势类尚未实现

如果你有问题，在 Stackoverflow 中使用标签 Cocos2d-x，我会尽力帮助你。

我已经阅读了[常见问题解答](https://stackoverflow.com/faq)，但 90% 的 cocos2d/android 相关问题都存在同样的问题，使用过时的库。我只是想帮助人们开始使用 cocos2d-x。欢迎所有其他信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T02:02:42.030

另一个代码示例：[Tiny Wings Remake on Android using Cocos2d-X](https://github.com/diwu/Tiny-Wings-Remake-on-Android)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T12:25:06.333

好清单。[Angry Ninjas Starter Kit](http://www.cartoonsmart.com/angry_ninjas_starterkit.php5)很快就会有 Cocos2d-X 更新。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-13T09:51:34.633

Cocos2d-x 内 uikit 教程[http://jpsarda.tumblr.com/post/24983791554/mixing-cocos2d-x-uikit](http://jpsarda.tumblr.com/post/24983791554/mixing-cocos2d-x-uikit)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-14T09:30:41.363

[https://github.com/dualface/cocos2d-x-extensions/blob/master/TODO.tasks](https://github.com/dualface/cocos2d-x-extensions/blob/master/TODO.tasks) ，他正在cocos2d-x上开发不错的功能

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-27T14:51:49.300

Cocos2d-x 在您的经典 Android (Java) 应用教程中[http://jpsarda.tumblr.com/post/26000816688/integrate-cocos2d-xc-into-an-android-application](http://jpsarda.tumblr.com/post/26000816688/integrate-cocos2d-x-c-into-an-android-application)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-28T11:45:53.360

在这里，您可以获得有关该主题的补充讨论，这可能很有趣。

[讨论1](https://stackoverflow.com/questions/8483877/cocos2d-x-vs-cocos2d-android-for-an-android-game)

[讨论2](https://stackoverflow.com/questions/6399341/cocos2d-for-iphone-vs-cocos2d-x)

# shell - 如何删除多个文件的尾随空格？

> ID：10711051
> 
> 赞同：67
> 
> 时间：2012-05-22T22:27:30.497
> 
> 标签：shell, find, whitespace, removing-whitespace, in-place

是否有任何工具/UNIX 单行可以**就地删除多个文件的**尾随空格。

例如，可以与*find*结合使用。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-05-22T22:51:29.800

你要

```
sed --in-place 's/[[:space:]]\+$//' file 
```

这将删除*所有*POSIX 标准定义的空白字符，包括垂直制表符和换页符。此外，它只会在尾随空格实际存在时进行替换，这与使用零个或多个匹配器 ( `*`) 的其他答案不同。

`--in-place`只是 的长形式`-i`。我更喜欢在脚本中使用长格式，因为它往往更能说明标志的实际作用。

它可以`find`像这样轻松集成：

```
find . -type f -name '*.txt' -exec sed --in-place 's/[[:space:]]\+$//' {} \+ 
```

### 如果您使用的是 Mac

正如评论中所指出的，如果您没有安装 gnu 工具，上述方法将不起作用。如果是这种情况，您可以使用以下方法：

```
find . -iname '*.txt' -type f -exec sed -i '' 's/[[:space:]]\{1,\}$//' {} \+ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-23T06:05:05.333

与其他都需要 GNU sed 的解决方案不同，这个解决方案应该适用于任何实现 POSIX 标准命令的 Unix 系统。

```
find . -type f -name "*.txt" -exec sh -c 'for i;do sed 's/[[:space:]]*$//' "$i">/tmp/.$$ && mv /tmp/.$$ "$i";done' arg0 {} + 
```

编辑：这个稍作修改的版本保留了文件权限：

```
find . -type f -name "*.txt" -exec sh -c 'for i;do sed 's/[[:space:]]*$//' "$i">/tmp/.$$ && cat /tmp/.$$ > "$i";done' arg0 {} + 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T12:35:19.563

我一直在使用[它](https://github.com/l0b0/tilde/blob/b1e40e291372767a1b34ef36ed06ae0909a6b88d/.bash_history#L1364)来修复空格：

```
while IFS= read -r -d '' -u 9
do
    if [[ "$(file -bs --mime-type -- "$REPLY")" = text/* ]]
    then
        sed -i -e 's/[ \t]\+\(\r\?\)$/\1/;$a\' -- "$REPLY"
    else
        echo "Skipping $REPLY" >&2
    fi
done 9< <(find . \( -type d -regex '^.*/\.\(git\|svn\|hg\)$' -prune -false \) -o -type f -print0) 
```

特征：

*   保留回车（与 不同`[:space:]`），因此它适用于 Windows/DOS 样式的文件。
*   只担心“正常”空白 - 如果您的文件中有垂直制表符等，则可能是故意的（测试代码或原始数据）。
*   跳过 .git 和 .svn VCS 目录。
*   只修改`file`认为是文本文件的文件。
*   报告所有被跳过的路径。
*   适用于*任何*文件名。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T22:33:08.193

这个怎么样：

```
sed -e -i 's/[ \t]*$//' 
```

顺便说一句，这是一个方便的网站：[http ://sed.sourceforge.net/sed1line.txt](http://sed.sourceforge.net/sed1line.txt)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-26T02:51:51.087

对于那些不是 sed 专家（包括我自己）的人，我创建了一个小脚本来使用 JavaScript 正则表达式来替换文件中的文本并进行替换：

[http://git.io/pofQnQ](http://git.io/pofQnQ)

要删除尾随空格，您可以这样使用它：

```
$ node sed.js "/^[\t ]*$/gm" "" file 
```

享受

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-20T12:29:29.570

### `ex`

尝试使用[Ex 编辑器](https://en.wikipedia.org/wiki/Ex_%28text_editor%29)（Vim 的一部分）：

```
$ ex +'bufdo!%s/\s\+$//e' -cxa *.* 
```

^(注意：对于递归（bash4 和 zsh），您可以使用[新的通配选项](http://www.linuxjournal.com/content/globstar-new-bash-globbing-option)( `**/*.*`)。通过 启用`shopt -s globstar`。)

### `perl`

```
find . -type f -name "*.java" -exec perl -p -i -e "s/[ \t]$//g" {} \; 
```

根据[Spring Framework Code Style](https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Code-Style#indentation)。

### `sed`

对于使用`sed`，请检查：[如何使用 sed 删除尾随空格？](https://stackoverflow.com/q/4438306/55075)

* * *

另请参阅：[如何递归删除所有文件的尾随空格？](https://stackoverflow.com/q/149057/55075)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-24T07:43:18.123

出于某种原因，sed 和 perl 命令对我不起作用。这做到了：

```
find ./ -type f | rename 's/ +$//g' 
```

感觉也是最直接的阅读

# jquery - 如何使用 Jquery、Jquery Mobile 和 RequireJS 设置 Google Analytics？

> ID：10711052
> 
> 赞同：0
> 
> 时间：2012-05-22T22:27:43.637
> 
> 标签：jquery, events, jquery-mobile, google-analytics, requirejs

这已经困扰我好几天了，我还没有找到让它工作的方法。我的网站正在使用 Jquery、Jquery-Mobile 和 RequireJS，我想将 Google Analytics 添加到组合中。

我的 Analytics 设置是这样的（另请参见[此处](https://stackoverflow.com/questions/7032450/how-to-do-mobile-analytics-using-jquery-mobile)）：

```
<script type="text/javascript">
    var _gaq = _gaq || [];
    (function() {
         ... regular stufff 
    })();
// bind to pageshow event
$(document).on('pageshow', 'div:jqmData(role="page").basePage', function (event, ui) {
try {
    _gaq.push(['_setAccount', 'ID';
    _gaq.push(['_gat._anonymizeIp']);
    var url = location.href;
        try  {
            if (location.hash) {
                url = location.hash;
                }
            _gaq.push(['_trackPageview', url]);
            } catch(err) {}
        }); 
    </script> 
```

所以我正在监听 JQM pageshow 事件以跟踪分析。此代码段粘贴到所有页面的末尾。

我已经像这样将 Analytics 放入 requireJS 中：

**主.js**：

```
require.config({ 
    baseUrl: "../js/",  
    paths: {
        "jquery":        "libs/jquery/jquery.min",
        "jqm":           "libs/jquery-mobile/jquery-mobile.min", 
        "analytics":     "https://www.google-analytics.com/ga"
        }

require(['order!jquery', 'order!jqm', 'order!analytics', 'app'],
    function(jquery, jqm, analytics, App){  
        App.start();        
        }); 
```

在**App.js**中：

```
var start = function() {
   require(['order!jquery', 'order!jqm', 'order!analytics'],function() {
    // do stuff
   }); 
```

问题是，Analytics 片段位于每个页面 HTML 标记的末尾，所以虽然我认为我之前在 requireJS 中使用 Jquery 和 Jquery Mobile 加载正确设置了它，但我仍然遇到错误：

```
 $ is not defined
  ....ocument).on('pageshow', 'div:jqmData(role="page").basePage', function (event, ui... 
```

当第一页加载时。

我猜是因为 HTML 标记超出了 require 的范围，并且在加载 JQM 之前被解析。不过，必须有一种方法来正确设置它。

**问题：**
知道为什么会弹出错误以及我能做些什么吗？

感谢帮助！

**编辑：**
好的。这样做是有效的：

在我的页眉中，我声明了第一部分：

```
<script type="text/javascript">
var _gaq = _gaq || [];

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';     
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

然后在我的 requirejs 启动函数中，我调用了第二个片段：

```
 var start = function() {
        require(['order!jquery', 'order!jqm'],function() {
            var analyticsHasBeenSet; 
            ...
            var analyize = function () {

                if ( analyticsHasBeenSet != true ){
                    analyticsHasBeenSet = true;
                    require(['https://www.google-analytics.com/ga.js'], function (App) {

                        $(document).on('pageshow', 'div:jqmData(role="page"), function() {
                            _gaq.push(['_setAccount', '']);
                            _gaq.push(['_gat._anonymizeIp']);
                            var url = location.href;
                            try  {
                                if (location.hash) {
                                    url = location.hash;
                                    }
                                _gaq.push(['_trackPageview', url]);
                                } catch(err) { // error catch }
                            });
                        });
                     }
                 }
            analyize(); 
```

这样第二个代码片段只会在 Jquery 和 Jquery Mobile 被加载后执行。通过设置一个全局变量（我希望），绑定只会被启动一次。到目前为止似乎工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:58:03.893

问题很可能出在您对命令的使用上！插入。这应该只用于标准的 .js 文件，而不是模块。

> 订单插件最好与传统脚本一起使用。使用 define() 定义模块的脚本不需要它。可以混合搭配“订单！” 具有常规依赖项的依赖项，但只有“顺序！” 将按照彼此的相对顺序进行评估。

[http://requirejs.org/docs/api.html#order](http://requirejs.org/docs/api.html#order)

您的分析路径应修改为传统的 js 文件（因为 ga.js 不会将自身注册为模块）

```
"analytics":     "https://www.google-analytics.com/ga.js" 
```

jQuery 和 jQuery mobile 确实将自己注册为模块，因此您的配置是正确的。

在您的 require 调用中，您只需要：

```
require(['jquery', 'jqm', 'analytics'],function($, jqm) {
    // analytics is not a module so _gaq will now exist as a global var.
   }); 
```

看到 ga.js 是唯一不是模块的文件，命令！插件可能用处不大，因为它仅在您有多个需要按特定顺序加载的传统脚本时才重要。

> 订单插件最好与传统脚本一起使用。使用 define() 定义模块的脚本不需要它。可以混合搭配“订单！” 具有常规依赖项的依赖项，但只有“顺序！” 将按照彼此的相对顺序进行评估。

但是，值得注意的是，Google 提供的用于使用 Google Analytics 的代码片段已经考虑了异步加载，因此可能根本不需要使用 Require。

# jquery - jquerycrop插件，不知道有没有这样的东西

> ID：10711055
> 
> 赞同：2
> 
> 时间：2012-05-22T22:28:16.767
> 
> 标签：jquery, plugins, crop

假设我有一个区域，例如 200 像素 x 100 像素。而不是在该字段内选择裁剪，我希望该字段本身成为裁剪区域，并且我拖动图像而不是裁剪字段。

![裁剪图像示例](../Images/6835f952f96d0fe9f2866feb91fa3b17.png)

因此您可以看到完整图像的边缘，但您只能看到裁剪区域内的图像。你拖动图像，你会看到里面的变化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:09:58.433

这是一个简单的小概念。它需要一些改进以确保您不能拖动到边界之外（如果您在红色边框的 div 上开始拖动它不会应用包含规则），但这应该提供概念证明。

[http://jsfiddle.net/foxwisp/G7cEP/1/](http://jsfiddle.net/foxwisp/G7cEP/1/)

基本上，您只需更新遮罩框的位置以使其隔离，然后更新背景图像位置使其看起来移动。

如果您需要我进一步解释，请告诉我。

# c++ - 如何过滤或“grep”一个 C++ 向量？

> ID：10711057
> 
> 赞同：8
> 
> 时间：2012-05-22T22:28:21.773
> 
> 标签：c++

我有一个`vector<MyType>`并且想要另一个`vector<MyType>`只包含满足一些简单标准的 MyTypes，例如某些数据成员等于某些东西。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T22:31:12.897

使用`copy_if`：

```
#include <algorithm>  // for copy_if
#include <iterator>   // for back_inserter

std::vector<MyType> v2;
std::copy_if(v1.begin(), v1.end(), std::back_inserter(v2),
             [](MyType const & x) { return simple_citerion(x); } ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T22:31:38.480

使用一点 Boost，您可以：

```
std::vector<int> v = {1,2,-9,3};

for (auto i : v | filtered(_arg1 >=0))
    std::cout << i << "\n"; 
```

此示例将 Phoenix 用于由表达式模板 ( `_arg1 >= 0`) 定义的隐式 lambda，但您可以将任何可调用的（C++03 或更高版本）与 Boost 适配器（fitlered、transformed、reverse 等）一起使用

有关更多展示材料和完整示例，请参见此处：

*   [是否可以使用 boost::filter_iterator 进行输出？](https://stackoverflow.com/questions/7254131/is-it-possible-to-use-boostfilter-iterator-for-output/7254598#7254598)

# php - 邮件程序无法正常工作

> ID：10711061
> 
> 赞同：0
> 
> 时间：2012-05-22T22:29:30.290
> 
> 标签：php, windows, mailer

所以我有一个有趣的问题。我们设置这个 PHP 脚本来发送电子邮件，问题是第一组电子邮件 Branch==0 根本不会发送。其余被选中的分支机构将发送电子邮件。我开始怀疑数字“0”是否有问题（我可能错了）

这是代码：

```
 <?php
   if(!$_POST){echo "Please go back"; exit();}

echo "<form action=\"confirm2.php\" METHOD=\"POST\">";

foreach ($_POST as $key => $value) {
   // echo $key.": ".$value. "<br> ";
    echo "<input type=\"hidden\" name=\"$key\" value=\"$value\">";
}

$message = '';
$DelMonth = $_POST['DelMonth'];
$DelDay = $_POST['DelDay'];
$DelYear = $_POST['DelYear'];
$Teller_Id = $_POST['Teller_Id'];
$First = $_POST['First'];
$Branch = $_POST['Branch'];
$Deposit_Ticket_Currency = $_POST['deposit_tickets_currency'];
$Deposit_Ticket_Coin = $_POST['deposit_tickets_coin'];
$Last = $_POST['Last'];
$FIT100 = $_POST['FIT100'];
$FIT50 = $_POST['FIT50'];
$FIT20 = $_POST['FIT20'];
$FIT10 = $_POST['FIT10'];
$FIT5 = $_POST['FIT5'];
$FIT2 = $_POST['FIT2'];
$FIT1 = $_POST['FIT1'];
$FITTOT=number_format($FIT100+$FIT50+$FIT20+$FIT10+$FIT5+$FIT2+$FIT1,0);
$New_Currency100 = $_POST['New_Currency100'];
$New_Currency50 = $_POST['New_Currency50'];
$New_Currency20 = $_POST['New_Currency20'];
$New_Currency10 = $_POST['New_Currency10'];
$New_Currency5 = $_POST['New_Currency5'];
$New_Currency2 = $_POST['New_Currency2'];
$New_Currency1 = $_POST['New_Currency1'];
$New_CurrencyTOT=number_format($New_Currency100+$New_Currency50+$New_Currency20+$New_Currency10+$New_Currency5+$New_Currency2+$New_Currency1,0);
$Rolled_CoinSusanb = $_POST['Rolled_CoinSusanb'];
$Rolled_CoinDollar = $_POST['Rolled_CoinDollar'];
$Rolled_CoinFifty = $_POST['Rolled_CoinFifty'];
$Rolled_CoinQuarter = $_POST['Rolled_CoinQuarter'];
$Rolled_CoinDimes = $_POST['Rolled_CoinDimes'];
$Rolled_CoinNickels = $_POST['Rolled_CoinNickels'];
$Rolled_CoinPennies = $_POST['Rolled_CoinPennies'];
$Rolled_CoinTOT=number_format($Rolled_CoinSusanb+$Rolled_CoinDollar+$Rolled_CoinFifty+$Rolled_CoinQuarter+$Rolled_CoinDimes+$Rolled_CoinNickels+$Rolled_CoinPennies,2);

$Grand_Tot=number_format($FIT100+$FIT50+$FIT20+$FIT10+$FIT5+$FIT2+$FIT1+$New_Currency100+$New_Currency50+$New_Currency20+$New_Currency10+$New_Currency5+$New_Currency2+$New_Currency1+$Rolled_CoinSusanb+$Rolled_CoinDollar+$Rolled_CoinFifty+$Rolled_CoinQuarter+$Rolled_CoinDimes+$Rolled_CoinNickels+$Rolled_CoinPennies,2);
$comments = $_POST['comments'];

$message .= "<table border=\"1\">";
$message .= "<tr><td>Requested Delivery Date:</td><td>$DelMonth/$DelDay/$DelYear</td></tr>";
$message .= "<tr><td>Requested By: </td><td><b>$Teller_Id</b> -- $First $Last</td></tr>";
$message .= "<tr><td>Branch</td><td>$Branch</td></tr>";
$message .= "<tr><td>Deposit Ticket -- Currency</td><td>$Deposit_Ticket_Currency</td></tr>";
$message .= "<tr><td>Deposit Ticket -- Coins</td><td>$Deposit_Ticket_Coin</td></tr>";
$message .= "<tr><td>Comments</td><td>$comments</td></tr></table>";

$message .= "<hr><table><tr><td colspan=\"2\"><b>For FIT</b></td></tr>";
$message .= "<tr><td>Ones</td><td>$$FIT1</td></tr>";
$message .= "<tr><td>Twos</td><td>$$FIT2</td></tr>";
$message .= "<tr><td>Fives</td><td>$$FIT5</td></tr>";
$message .= "<tr><td>Tens</td><td>$$FIT10</td></tr>";
$message .= "<tr><td>Twenties</td><td>$$FIT20</td></tr>";
$message .= "<tr><td>Fifties</td><td>$$FIT50</td></tr>";
$message .= "<tr><td>Hundreds</td><td>$$FIT100</td></tr>";

$message .= "<tr><td><b><font color=red>Total</font color></b></td><td><b><font color=red>$$FITTOT</font color></b></td></table>";

$message .= "<hr><table><tr><td colspan=\"2\"><b>For New Currency</b></td></tr>";
$message .= "<tr><td>Ones</td><td>$$New_Currency1</td></tr>";
$message .= "<tr><td>Twos</td><td>$$New_Currency2</td></tr>";
$message .= "<tr><td>Fives</td><td>$$New_Currency5</td></tr>";
$message .= "<tr><td>Tens</td><td>$$New_Currency10</td></tr>";
$message .= "<tr><td>Twenties</td><td>$$New_Currency20</td></tr>";
$message .= "<tr><td>Fifties</td><td>$$New_Currency50</td></tr>";
$message .= "<tr><td>Hundreds</td><td>$$New_Currency100</td></tr>";
$message .= "<tr><td><b><font color=red>Total</font color></b></td><td><b><font color=red>$$New_CurrencyTOT</font color></b></td></tr></table>";

$message .= "<hr><table><tr><td colspan=\"2\"><b>For Rolled Coin</b></td></tr>";
$message .= "<tr><td>Pennies</td><td>$$Rolled_CoinPennies</td></tr>";
$message .= "<tr><td>Nickels</td><td>$$Rolled_CoinNickels</td></tr>";
$message .= "<tr><td>Dimes</td><td>$$Rolled_CoinDimes</td></tr>";
$message .= "<tr><td>Quarters</td><td>$$Rolled_CoinQuarter</td></tr>";
$message .= "<tr><td>Fifty Cent Pieces</td><td>$$Rolled_CoinFifty</td></tr>";
$message .= "<tr><td>Susan B's</td><td>$$Rolled_CoinSusanb</td></tr>";
$message .= "<tr><td>Dollar Coins</td><td>$$Rolled_CoinDollar</td></tr>";
$message .= "<tr><td><font color=red><b>Total</b></font color></td><td><b><font color=red>$$Rolled_CoinTOT</font color></b></td></tr></table>";
$message .= "<table><tr><td><font color=red><b>GRAND TOTAL</b></font color></td><td><b><u><font color=green>$$Grand_Tot</font color></u></b></td></tr></table>";
//<font color=red>.</font color>
if($_POST['SendEmail']=='true'){
echo "<h2>Email has been sent!</h2> <a href=\"http://www.google.com\">Click here to exit</a>";
/*
if($Branch==0000){
$to1 ='robb@firstchoiceit.org';
$to1 .='robb@firstchoiceit.org';
}
*/
//Arvada
if($Branch==0){
 /*$to1 ='guilfords@eaglelegacy.org,';*/
 $to1 ='AccountingGroup@partnercoloradocu.org,';
 $to1 .=' guentherk@partnercoloradocu.org,';
 $to1 .=' sierram@partnercoloradocu.org';
 $to1 .=' blagonyal@partnercoloradocu.org';
 }
//Aurora
if($Branch==1){
 /*$to1 ='guilfords@eaglelegacy.org,';*/
 $to1 ='AccountingGroup@partnercoloradocu.org,';
 $to1 .=' nunezj@partnercoloradocu.org,';
 $to1 .=' bernharda@partnercoloradocu.org,';
 $to1 .=' suareza@partnercoloradocu.org';
}

//Littleton
if($Branch==4){
 /*$to1 ='guilfords@eaglelegacy.org,';*/
 $to1 ='AccountingGroup@partnercoloradocu.org,';
 /*$to1 .=' bilbyr@partnercoloradocu.org,';*/
 $to1 .=' gallardom@partnercoloradocu.org,';
 $to1 .=' woodsmallk@partnercoloradocu.org';
}

//Stapleton
if($Branch==5){
/*$to1 ='guilfords@eaglelegacy.org,';*/
$to1 ='AccountingGroup@partnercoloradocu.org,';
$to1 .='oliverj@partnercoloradocu.org,';
$to1 .='suareza@partnercoloradocu.org,';
$to1 .=' morgans@partnercoloradocu.org';
}
//Broomfield
if($Branch==8){
/*$to1 ='guilfords@eaglelegacy.org,';*/
$to1 ='AccountingGroup@partnercoloradocu.org,';
$to1 .=' schuttk@partnercoloradocu.org,';
$to1 .=' kellerm@partnercoloradocu.org';
}
//Denverwater
if($Branch==9){
/*$to1 ='guilfords@eaglelegacy.org,';*/
$to1 ='AccountingGroup@partnercoloradocu.org,';
$to1 .=' curtisc@partnercoloradocu.org,';
$to1 .=' chavezp@partnercoloradocu.org';
}

//Sending Actual Email
$subject1 = 'CASHORDER REQUEST';
$headers1 = 'From: Cash Order ' ."\r\n";
$headers1 .= 'Reply-To:' ."\r\n";
$headers1 .= 'MIME-Version: 1.0' . "\r\n";
$headers1 .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$mail_sent = @mail( $to1, $subject1, $message, $headers1 );

exit();
}
else { echo $message; }

echo "<table><h2>Please confirm the amounts are correct & hit the <u>Place Cash Order button</u><br>To make changes, hit the back button in your browser</h2>";
echo "<input type=\"submit\" value=\"Place Cash Order\" style=\"width: 150px; height: 100px;\">";
echo "<input type=\"hidden\" name=\"SendEmail\" value=\"true\">";
echo "</td></tr></table>"
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:42:14.813

```
if($Branch==0){
/*$to1 ='guilfords@eaglelegacy.org,';*/
$to1 ='AccountingGroup@partnercoloradocu.org,';
$to1 .=' guentherk@partnercoloradocu.org,';
$to1 .=' sierram@partnercoloradocu.org';
$to1 .=' blagonyal@partnercoloradocu.org';
} 
```

您在第三个电子邮件地址之后缺少逗号 - 我怀疑这会在您尝试发送电子邮件时产生错误，因为电子邮件地址的格式错误。

# database - 多个复选框的数据库模式

> ID：10711063
> 
> 赞同：0
> 
> 时间：2012-05-22T22:29:46.273
> 
> 标签：database, checkbox, schema, design-decisions

我目前有一个**用户**表，现在想为特定用户添加其他用户相关信息。接受此信息的表单具有**语言**和**操作系统**等字段，每个字段都有一个带有**复选框**的选项列表。

例如：

已知语言：复选框 PHP、Java、Ruby

操作系统知识：Windows、Linux、Mac

目前我的数据库表如下所示：

```
USER
----------------------------------------
|  ID  |  Name      |  
-----------------------
|   1  |    John    |    
-----------------------
|   2  |    Alice    |    
-----------------------

LANGUAGES
----------------------------------------
|  ID  | User_ID(FK)     | lang-name  | 
----------------------------------------
|   1  |    1            |   PHP      |
----------------------------------------
|   1  |    2            |   Java     |
----------------------------------------

OS
----------------------------------------
|  ID  | User_ID(FK)     | os-name  | 
----------------------------------------
|   1  |    1            | Windows  |
----------------------------------------
|   1  |    2            |  Windows |
---------------------------------------- 
```

这看起来像是一个很好的架构吗？还有更多这样的与用户相关的字段，每个字段都需要有自己的表，并且表中似乎有很多冗余，因为成千上万的用户会知道 PHP，因此将有数千行以 PHP 作为语言对于每个不同的用户。

**有没有更好的方法来组织架构？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:35:34.637

也许您可以使用自己的表在数据库`Language`中创建`OS`一流的实体，然后使用连接表与`User`. 像这样的东西：

```
User
---------
ID
Name
etc...

Language
---------
ID
Name

OS
---------
ID
Name

UserLanguage
---------
UserID
LanguageID

UserOS
---------
UserID
OSID 
```

这样，实际实体 ( `User`, `Language`, `OS`) 是自包含的，仅包含对它们有意义的数据，不会因为它们彼此之间的关系而受到污染或重复。并且这些关系包含在他们自己的简单数字表中，这些表本身不是实体，而只是实体之间的多对多链接。

没有数据是重复的（在您的示例数据中，`Language`每个`OS`只有三个记录，至少目前如此），如果您需要使用一个，它对 ORM 和其他框架会更友好。

**编辑：**根据您的评论，您可能会尝试这样的事情：

```
User
---------
ID
Name
etc...

Lookup
---------
ID
LookupTypeID
Value

LookupType
---------
ID
Value

UserLookup
---------
UserID
LookupID 
```

这为您提供了很大的灵活性。在您的示例数据中，`Language`并且`OS`将是`LookupType`. 所有语言和操作系统都将是`Lookup`链接回各自的`LookupType`. 所以仍然没有重复数据。该`UserLookup`表是唯一的多对多链接表。

不过要小心这种设计。绝对是灵活的。但是，当您将此表结构用作您的实际域模型时，您会遇到“查找”之类的术语变成业务术语的情况，而情况可能并非如此。“语言”和“操作系统”是实际模型。我建议使用视图或存储过程从代码中抽象出这种结构。因此代码将从语言视图或过程中提取语言，而不是直接从`Lookup`表中提取。

# javascript - Javascript：自己键的函数中的对象文字引用而不是“this”

> ID：10711064
> 
> 赞同：15
> 
> 时间：2012-05-22T22:30:03.530
> 
> 标签：javascript, object

在作为该字面量一部分的函数中引用对象字面量是否有问题？它似乎工作得很好，但我想确保没有其他影响。

这是我正在谈论的一个例子：

代替：

```
var obj = {
    key1: "it",
    key2: function(){return this.key1 + " works!"}
};
alert(obj.key2()); 
```

使用：

```
var obj = {
    key1: "it",
    key2: function(){return obj.key1 + " works!"}
};
alert(obj.key2()); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-22T22:42:30.770

两者都可能有问题。

```
var obj = {
    key1: "it",
    key2: function(){ return this.key1 + " works!" }
};
var func = obj.key2;
alert(func()); // error 
```

当`func`不作为 的方法调用时`obj`，[`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)可以引用其他东西（在这里：全局对象“ `window`”）。

```
var obj = {
    key1: "it",
    key2: function(){ return obj.key1 + " works!" }
};
var newref = obj;
obj = { key1: "something else"; };
alert(newref.key2()); // "something else works" 
```

在这里，我们从另一个引用访问对象，尽管`obj`函数中的现在可能指向其他对象。

因此，您将不得不选择哪种情况更有可能。如果您真的想使其安全，请防止`obj`被交换：

```
// ES6 - use `const`:
const obj = {
    key1: "it",
    key2: function(){ return obj.key1 + " works always!" }
};

// ES5: use a closure where the `obj` is stored in a local-scoped variable:
var obj = (function(){
    var local = {
        key1: "it",
        key2: function(){ return local.key1 + " works always!" }
    };
    return local;
})(); 
```

或者你[`bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)对对象的功能：

```
var obj = {
    key1: "it",
    key2: function(){ return this.key1 + " works always!" }
}
obj.key2 = obj.key2.bind(obj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T22:33:24.893

变量范围绑定会有所不同。如果后面修改obj，会修改key2的返回值：

```
var newobj = obj;
obj = { key1: "new" };
alert(newobj.key2()); 
```

现在它会提醒“新作品！”，因为即使您正在调用`key2()`原始对象（即 now `newobj`），对`obj.key1`now 的引用也会绑定到新`obj`实例的值。使用`this`可以防止这种情况发生。

演示：http: [//jsfiddle.net/m6CU3/](http://jsfiddle.net/m6CU3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T22:35:37.777

如果你不使用原型对象，你可以这样。因为您的对象的所有实例都将返回 obj 实例的值...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T22:42:51.173

视情况而定，可以应用这些技术中的一种或两种。

函数内的值`this`取决于函数的调用方式。如果您将函数称为对象的属性，如下所示：

```
obj.key2();
//or
obj["key2"](); 
```

然后`this`就是那个对象。对象是通过对象文字还是其他方式创建的并不相关。

但是您可以使用[`.call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)或`.apply()`调用一个函数并显式设置`this`为其他对象。

还要考虑：

```
var obj = {
    key1: "it",
    key2: function(){return this.key1 + " works!"}
};
alert(obj.key2()); // alerts "it works!"

var func = obj.key2;
alert(func())​;     // alerts "undefined works!" 
```

我正在设置`func`引用与 相同的函数`obj.key2`，但将其调用*为*`func()`不设置为。*`this``obj`*

 *有关更多信息，请查看[MDN 对`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T22:31:34.003

我不认为有任何影响。只要确保您在任何时候都不会意外地这样做：

```
var obj = {
    key1: "it",
    key2: key1 + " works!"
} 
```

因为这会导致错误。除此之外，你应该很高兴！*

# matlab - 为什么 100*0.07 等于 6.9999....？

> ID：10711068
> 
> 赞同：3
> 
> 时间：2012-05-22T22:30:27.123
> 
> 标签：matlab

我的一个朋友在 Matlab 中写了以下内容，输出有点奇怪：

```
for p=0.01:0.01:0.1
100*p 
end 
```

以下是输出：

```
1
2
3
4 
5
6.000000000000001
6.999999999999999
8
9
10 
```

我想知道为什么会有轻微的错误？这是否意味着，一般情况下的准确性也和这种情况一样差？

编辑：

我们比较了数字——`7==6.999999999999999`结果是`0`。所以，Matlab 自相矛盾！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T23:08:05.233

问题是 0.01 不能用二进制浮点数精确表示。0.07 也不行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T22:34:09.613

看起来像一个浮点精度“问题”：[http ://www.lahey.com/float.htm](http://www.lahey.com/float.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-17T13:41:08.223

尝试

```
x = ((0.07+1)*100) - 100 
```

;-)

# .net - Process.WaitForInputIdle() 可以返回 false 吗？

> ID：10711070
> 
> 赞同：1
> 
> 时间：2012-05-22T22:30:40.200
> 
> 标签：.net

我看不到 Process.WaitForInputIdle() 如何返回除 true 之外的任何内容或抛出异常，但在该方法的[文档](http://msdn.microsoft.com/en-us/library/8d7363e2)中说明：

> **返回值**
> 
> 类型：System.Boolean
> 
> **如果**关联进程已达到空闲状态，则为true 。

如果让我感到困惑，是否只有从具有等待参数的 for 方法的[重载版本](http://msdn.microsoft.com/en-us/library/kcdbkyt4)复制/粘贴的文档，或者我不理解某些东西？

**更新**

为了澄清我的问题，我知道 Process.WaitForInputIdle() 是如何工作的，只是好奇它是否可以在某些情况下返回 false。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T23:05:50.823

我认为这可能是操作系统兼容性问题。不确定，我不再有适用于 Windows 98 的可靠文档。关键问题是它调用本机 winapi [WaitForInputIdle() 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687022%28v=vs.85%29.aspx)，传递 int.MaxValue (0x7ffffffff) 而不是 INFINITE (-1)。所以这个调用实际上可以在 24.85 天后超时。

这个限制出现在不止一个地方，System.Windows.Automation.Provider.WaitForInputIdle(int) 方法也指定了一个最大值为 int.MaxValue。

所以是的，如果你弄错了，那么你的程序已经休眠了 25 天。是时候结束了：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T22:41:53.563

`WaitForInputIdle()`简单地调用`WaitForInputIdle(int milliseconds)`，然后调用`WaitForInputIdle`在 User32.dll 中实现的本机。如果由于超时间隔已过而终止等待，则[后者](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687022%28v=vs.85%29.aspx)返回，这会导致 .NET 实现返回。`WAIT_TIMEOUT``false`

**编辑：** `WaitForInputIdle()`将 0x7fffffff 传递给`WaitForInputIdle(int milliseconds)`，这**与**INFINITE 不同（在 WinBase.h 中定义为 0xffffffff）。因此，如果一个进程在大约 25 天内没有进入空闲状态，那么`WaitForInputIdle()` *将*返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T22:40:19.820

如果您提供非过载，您将无限期地等待，直到它变得空闲。

如果你提供`Process.WaitForInputIdle(0)`你基本上是在测试空闲的过程。

如果您提供`Process.WaitForInputIdle(-1)`与非重载版本相同的内容。

在 UI 启动期间，有很多消息进来。如果您在测试应用程序中覆盖 WndProc，您可以看到它们流过。

编辑：看到你编辑的问题。

如果您指定 WaitForInputIdle(0 或非无限超时)（即测试）并且应用程序在该时间内没有空闲，那么您将得到一个错误的 afaik。

# javascript - 从 Internet Explorer 错误对象中检索行号

> ID：10711072
> 
> 赞同：1
> 
> 时间：2012-05-22T22:30:44.620
> 
> 标签：javascript, internet-explorer

有没有办法从 Internet Explorer 7/8 错误对象中检索行号？

我只知道 .message、.description 和 .number 属性。

我搜索了一下，发现了一篇关于 .stack 的 MSDN 文章（[http://msdn.microsoft.com/en-us/library/hh699850(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/hh699850(v=vs.94).aspx)），但即使使用他们自己的例子代码不返回行号：

[http://jsfiddle.net/LWevS/](http://jsfiddle.net/LWevS/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T23:12:22.620

我又挖了一些，发现可以使用 window.onerror 在 IE 中检索行号。它不是来自 Error 对象本身，而是一个不错的解决方法：

```
function BadFunction(){
    This.badcode.willnot.work = 1000
}

function ForceError(msg, url, lno) {
  alert("Error Occurred! Handled by Generic Error Handler" + "\n" +
     "Error: " + msg + "\n" + "URL: " + url + "\n" +   
     "Line Number: " + lno);

  return true;
}

window.onerror = ForceError; 
```

此方法要求错误冒泡到窗口。如果您的代码中有 try/catch，则需要重新抛出错误，以便它可以冒泡。

在研究这个问题的解决方案时，我还在 GitHub 上遇到了 StackTraceJS。他们的堆栈跟踪脚本适用于除 Internet Explorer 之外的所有浏览器。如果您想记录客户端浏览器上产生的错误，这是一个很棒的运行时调试器。

[http://stacktracejs.com/](http://stacktracejs.com/)

# computer-science - 用于数字识别的 SVM

> ID：10711073
> 
> 赞同：0
> 
> 时间：2012-05-22T22:30:49.040
> 
> 标签：computer-science, classification, svm, image-recognition

我需要实现 SVM 数字分类器的概念教授。它应该是我在画布上写的对输入进行分类的简单方法。但我需要从头开始实现它。语言无所谓。

任何人都可以向我提供逐步说明如何做到这一点。任何材料链接都会有所帮助。但我需要一些与实践相关的东西，而不是理论。因为我已经阅读了一些关于它的理论文章。并且有基本的想法，它应该如何工作，但仍然有一些麻烦如何将这些想法转化为现实生活中的例子。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T17:41:20.073

您不会找到编写 SVM 的分步说明。理解它们背后的理论和数学很重要，因为它们在算法中扮演着重要的角色，如果没有这些背景，算法就很难理解。

最好的起点是 John Platt 的[顺序最小优化 (SMO)](http://research.microsoft.com/apps/pubs/default.aspx?id=69644)算法。我之前已经实现过这篇论文，但是 Platt 假设有大量的背景知识。一本很棒的入门书是 Lutz Hamel 的书[*Knowledge Discovery with Support Vector Machines*](http://www.wiley.com/WileyCDA/WileyTitle/productCd-0470371927,descCd-description.html)。这本书激发了一切，所以如果你想理解 SVM，你不必知道或了解统计和优化理论。

如果你真的只想变得超级简单，那么从 UNT 的这个[简化 SMO 算法](http://math.unt.edu/~hsp0009/smo.pdf)开始 ，让你的脚湿透。这是没有任何优化的 SMO 算法。

Platt 的 SMO 算法目前还不是最先进的，但它是许多当前使用的算法的基础。[LibSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)和SVMLight都可以在线获取源代码[。](http://svmlight.joachims.org/)它们基于 SMO 概念的两种不同优化。

如果您对更高级别没问题，您可以使用像[CVX](http://cvxr.com/cvx/)这样的凸优化包来实现 SVM ，它具有 MatLab 和其他语言的接口。在这种情况下，您只需在 SVM 的核心设置优化问题，并让求解器为您找到解决方案。我不建议尝试从头开始实施 QP 求解器。

如果您想使用现有库，并且当您说“从头开始”时，您指的是处理数据而不是 SVM 算法本身，您可以查看现有的实现，例如[R](http://www.r-project.org/)中可用的实现。[“R 中的支持向量机”](http://www.jstatsoft.org/v15/i09/paper)讨论了如何做到这一点。Hamel 的书也使用了 R。

手写数字识别数据集已在许多[SVM 论文](http://scholar.google.com/scholar?q=SVM%20MNIST&btnG=&hl=en&as_sdt=0,22)中使用，并用于[分类器比较](http://www.sciencedirect.com/science/article/pii/S0031320303000852)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T22:11:41.857

[这](http://www.tristanfletcher.co.uk/SVM%20Explained.pdf)是关于 SVM 的完美文章。他们提供了一些理论和分步指南 - 如何实施。

# android - 淡化 ListView 项目中的视图 - 有点扭曲

> ID：10711083
> 
> 赞同：0
> 
> 时间：2012-05-22T22:31:55.877
> 
> 标签：android, listview, user-interface, fade

我试图找到某种优雅的解决方案来淡入/淡出作为 ListView 中项目的一部分的 TextView。

为了给您一些背景信息，列表视图显示了篮球比赛中的球员列表。用户点击一个名字，并提供一个对话框来记录事件，例如该球员的射门或犯规。一旦对话框被关闭，用户就会被带回列表视图，在这里我想提供一些关于刚刚记录的事件的反馈。

我想做的方式是在刚刚被点击的项目（播放器）的视图中出现一个小字符串大约 5 秒钟。小字符串会显示类似“第 3 次犯规”或“4 次失误”的信息。

一个简单的实现很简单。将视图的文本更改为所需的字符串，然后开始在视图中淡入淡出的动画，将其保留一段时间然后淡出。但是，当同一玩家的第二个事件在第一个事件之后不久记录时，就会出现问题。理想情况下，应允许第一个反馈字符串保留分配的 5 秒，第二个字符串应在接下来的 5 秒内淡入/淡出。

这种基于每个玩家的动画和文本队列变化我不太确定如何实现。此外，我还关心动画和 Activity 生命周期之间的交互。当活动被发送到后台、停止甚至从内存中删除时，排队的动画会发生（或应该发生）什么？或者当一个项目从列表视图后面的 ArrayAdapter 中删除时？

想法？

马努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:01:31.493

不要担心活动的生命周期。不会有不良影响。但是，如果活动在动画期间进入后台，则动画将发生，您将看不到它。

至于让一个动画等待下一个，只需这样做：

```
// here we will keep track of any listView and when the last animation took place.
// The keys will be your listView identifiers. Here I assumed an integer, but use whatever is a good ID for your listView
private HashMap<Integer, Long> listViewLastAnimations;

// the length of the animation in milliseconds
private static long ANIMATION_LENGTH_MS = 5000;

// put this code where  you would start your animation
// get when the last event animation occurred
Long lastAnimation = listViewLastAnimations.get(YOUR_LIST_ITEM_IDENTIFIER);
Date new = new Date();
if (lastAnimation == null ||
   new.currentTimeMillis () - lastAnimation > ANIMATION_LENGTH_MS ){
listViewLastAnimations.put(YOUR_LIST_ITEM_IDENTIFIER, new.currentTimeMillis ());
// perform animation as normal
}else{
// set a delay to your animation with
long delay = ANIMATION_LENGTH_MS - (new.currentTimeMillis () - lastAnimation);
listViewLastAnimations.put(YOUR_LIST_ITEM_IDENTIFIER, new.currentTimeMillis () + delay);
setStartOffset(delay) ;
} 
```

# c++ - 如何在 OSX 上使用 C++ 中的 CGEventPost 按住按键？

> ID：10711095
> 
> 赞同：1
> 
> 时间：2012-05-22T22:33:04.997
> 
> 标签：c++, c, macos, keyboard, keypress

我在 OSX 上的 C++ 中使用 ApplicationServices 和 CGEventPost，我正在尝试查看是否可以按住一个键，但它不起作用。

这是我正在使用的方法：

```
void postKeyboardEvent( int keyCode, bool keyUp = false )
{

    CGEventSourceRef source = CGEventSourceCreate( kCGEventSourceStateHIDSystemState );

    CGEventRef keyEvent = CGEventCreateKeyboardEvent( source, (CGKeyCode) keyCode, !keyUp );
    CGEventPost( kCGAnnotatedSessionEventTap, keyEvent );
    CFRelease( keyEvent );

    CFRelease( source );

} 
```

这就是我测试它的方式：

```
postKeyboardEvent( kVK_Command );
postKeyboardEvent( kVK_Tab );
postKeyboardEvent( kVK_Tab, true );
postKeyboardEvent( kVK_Command, true ); 
```

据我了解，这应该将我切换到另一个窗口，但它只是“放开”命令键并键入一个制表符。

重要提示：我不想使用以下内容：

```
CGEventSetFlags( keyEvent, kCGEventFlagMaskCommand ); 
```

我需要发送按键和按键命令的“串行链”，*而*不必知道哪些键码是修饰键或用多少个来标记事件。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:45:11.260

这就是答案！[https://stackoverflow.com/a/8202467/877860](https://stackoverflow.com/a/8202467/877860)由[https://stackoverflow.com/users/314546/valexa发布](https://stackoverflow.com/users/314546/valexa)

> 最简单的方法就是将当前修饰符标志与所需修饰符的标志进行按位或运算，例如：
> 
> ```
> CGEventFlags flags = kCGEventFlagMaskShift;
> CGEventRef ev;
> CGEventSourceRef source = CGEventSourceCreate (kCGEventSourceStateCombinedSessionState);
> 
> //press down            
> ev = CGEventCreateKeyboardEvent (source, keyCode, true);    
> CGEventSetFlags(ev,flags | CGEventGetFlags(ev)); //combine flags                        
> CGEventPost(kCGHIDEventTap,ev);
> CFRelease(ev);              
> 
> //press up                                  
> ev = CGEventCreateKeyboardEvent (source, keyCode, false);                       
> CGEventSetFlags(ev,flags | CGEventGetFlags(ev)); //combine flags                        
> CGEventPost(kCGHIDEventTap,ev); 
> CFRelease(ev);              
> 
> CFRelease(source); 
> ```

**更新：** 这是我采用的方法，它可以进行一些清理，但对于我将一系列键码发送到系统并让它们可预测地发生的目的来说，它工作得很好。

这里一个非常重要的元素是按位操作，如果 shift 不向下，则使用`(& ~)`含义 AND NOT 删除 shift 键掩码。

```
int shiftKeyCode = 56;
bool shiftIsDown = false;

void postKeyboardEvent( int keyCode, bool keyUp = false )
{

    // Don't send keys while blocked.
    if( blockState == 1 ){

        return;

    }

    if( keyCode == shiftKeyCode ){

        if( keyUp ){

            shiftIsDown = false;

        }else{

            shiftIsDown = true;

        }

    }

    CGEventSourceRef source = CGEventSourceCreate( kCGEventSourceStateHIDSystemState );
    CGEventRef keyEvent = CGEventCreateKeyboardEvent( source, (CGKeyCode) keyCode, !keyUp );

    if( shiftIsDown ){

        // Use Shift flag
        CGEventSetFlags( keyEvent, CGEventGetFlags( keyEvent ) | kCGEventFlagMaskShift );

    }else{

        // Use all existing flag except Shift
        CGEventSetFlags( keyEvent, CGEventGetFlags( keyEvent ) & ~kCGEventFlagMaskShift );

    }

    CGEventPost( kCGHIDEventTap, keyEvent );

    CFRelease( keyEvent );
    CFRelease( source );

} 
```

# html - 在靠近中心的 css 中获得正确的位置？

> ID：10711104
> 
> 赞同：0
> 
> 时间：2012-05-22T22:34:59.370
> 
> 标签：html, css

嗨，我正在为即将推出的游戏制作一个即将推出的网站，我已经为此苦苦挣扎了好几个小时！[http://endlessreturn.com/](http://endlessreturn.com/)是该网站，基本上，无论如何我可以让“查看预告片”更接近实际预告片吗？

```
 IMG.logo {
    display: block;
    margin-left: auto;
    margin-right: auto }

IMG.copyright {
    display: block;
    margin-left: auto;
    margin-right: auto }

.center
{
margin-left:auto;
margin-right:auto;
width:100%;
display: block;
background-image:url('/images/trailer.png');
background-repeat:no-repeat;

background-position:right; 
}

img.floatLeft { 
    float: left; 
    margin: 4px; 
}

body
{
background-image:url('/images/bg.gif');
background-repeat:repeat-x;
}

#wrapper {
    width: 467px;
    margin: 29px auto;
    }
#logo {
    height: 397px;
    text-indent: -10000px;
    margin-bottom: -135px;
    }

#form {
    width: 700px;
    margin: 25px auto 15px auto;
    }
form {
    background: url(/images/newsletter.png) no-repeat;
    height: 90px;
    }
input {
    background: none;
    border: none;
    outline: 0;
}
input.text {
    width: 400px;
    height: 75px;
    padding: 0px 0px 30px 90px;
    color: #505050;
    font-size: 16px;
    float: left;
    }
input.submit {
    width: 165px;
    height: 60px;
    padding: 50px 0 13px 10px;
    float: right;
    cursor: pointer;
    }.center iframe {
    text-align: center;
    float: none;
}

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Endless Return - 2D MMORPG</title>
<LINK REL=StyleSheet HREF="style.css" TYPE="text/css" MEDIA=screen>
</head>
<body>

<IMG class="logo" src="/images/logo.png" alt="logo">
<div class="center">
<center><iframe src="http://www.youtube.com/embed/2IMOh6JAJkY" width="640" height="360" frameborder="0" allowfullscreen></iframe></center>

</div>
</div>
<IMG class="copyright" src="/images/copyright.png" alt="logo">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:55:27.287

你的形象，你`CSS`需要调整。

您需要将图像稍大一点，使其居中作为当前的背景，`div`并在视频旁边有箭头和文本。

**使用 1280 像素的图像查看此示例：** ![在此处输入图像描述](../Images/4bb208019975ebbe3dbaf6928d1224b9.png)

*此示例使用相对于视频宽度足够宽的图像。*

**更新的 CSS：**

```
.center {
    background-image: url("/images/trailer.png")
    background-position: center center;
    background-repeat: no-repeat;
    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
} 
```

**以及1280px[的图片](http://dl.dropbox.com/u/76169930/stackoverflow/question/10711104/trailer.png)**链接**`width`。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:57:20.403

代替右中心，使用 x% y% 第一个值是水平位置，第二个值是垂直位置。左上角是 0% 0%。右下角是 100% 100%。如果您只指定一个值，则另一个值为 50%。. 默认值为：0% 0%**

# objective-c - 如何在 iOS/ObjectiveC 中获取 TouchPoint 的坐标和 PixelColor

> ID：10711107
> 
> 赞同：1
> 
> 时间：2012-05-22T22:35:32.893
> 
> 标签：objective-c, ios, colors, touch, coordinates

我需要在 Objective-C 中获取 TouchPoint 的坐标和像素颜色。这甚至可能吗？如果是的话，我会对操作方法或正确方向的任何提示非常感兴趣。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:11:27.980

我使用 ivanzoid 发布的 UIView 类别方法获取鼠标单击点下的颜色（[如何获取 UIView 中像素的颜色？](https://stackoverflow.com/questions/1160229/how-to-get-the-color-of-a-pixel-in-an-uiview)）。我在自定义视图实现中这样使用它：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint loc = [touch locationInView:self];
    self.pickedColor = [self colorOfPoint:loc];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ColorPicked" object:self userInfo:nil];
} 
```

colorOfPoint 是 ivazoid 类中获取颜色的方法， loc 将包含触摸点的坐标。我发布了一个通知，以便我的视图控制器可以用这种颜色做一些事情。

# javascript - 在另一个函数中调用的未定义函数

> ID：10711109
> 
> 赞同：2
> 
> 时间：2012-05-22T22:35:36.047
> 
> 标签：javascript

我有一个简单的脚本，它调用一个在调用函数中设置的函数......

但我得到一个“未定义的函数”错误。

我的脚本是：

```
function messages_document(messages){
    messages = JSON.parse(messages);

    function del_msg(id){
        result = call_file('del.php',id);
        if(result){
            messages[id].length = 0;
        }
    }

    var output = [];
    output.push('<p align="center"><b><u>My Messages</u></b></p> <br/><br/>');

    for(var id in messages){
        output.push('<a href="#" onclick="del_msg('+id+')">Delete Message</a>');
    }

    document.getElementById('main').innerHTML = (output.join(''));
} 
```

我很好奇我是否误解了作用域的工作原理，因为我得到：

> del_msg 未定义

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T22:38:51.487

您在定义“del_msg”时存在范围问题：您需要该函数位于全局范围内，但您在函数“messages_document”（具有自己的范围）内创建它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T22:45:58.707

函数语句是在当前范围内定义的，而不是全局定义的。在这种情况下，这意味着`del_msg`它只存在于`messages_document`. 但是，您可以通过`onclick`属性调用它：这些属性是全局评估的。由于`del_msg`在全球范围内不存在，因此它不起作用。

你有两个选择。一种是`del_msg`通过在任何其他函数之外定义它来实现全局化。但是，这会污染全局命名空间，通常是一件坏事。最好将其应用于`a`范围内的元素。这将需要通过 DOM 方法而不是 HTML 来构建元素

```
var para = document.createElement('p'),
    id,
    link;
para.innerHTML = '<b><u>My Messages</u></b></p> <br/><br/>';
para.align = 'center';

for(id in messages){
    link = document.createElement('a');
    link.href = '';
    link.onclick = del_msg;
    link.innerHTML = "Delete message";
    para.appendChild(link );
}

document.getElementById('main').appendChild(para); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T22:40:41.970

尝试像这样声明

```
var del_msg = function(id)... 
```

* * *

抱歉糊涂了。您正在窗口范围内使用该函数，请从其他函数中声明它。

该函数在 onclick 全局范围内调用。

您在这里必须了解的是您正在创建 html 代码，但是 onclick 将在用户单击时调用，而不是在您创建 html 时调用。

# node.js - Jade 在“填充”猫鼬属性的模板中呈现意外值

> ID：10711114
> 
> 赞同：1
> 
> 时间：2012-05-22T22:36:15.073
> 
> 标签：node.js, express, mongoose, pug

我有一个玉模板，我正在从一个猫鼬对象中打印出属性。该对象具有通过 mongoose 的类似 dbref 的填充功能填充的属性。当模板呈现时，我会胡说八道。

简化示例：

在路线中

```
User.findById(req.params.user, function(err, user){
  res.render('training', {training:user.training});
}).populate('training.details'); 
```

在模板中：

```
a.training-link(href='/training/#{training.details.id}') ... 
```

在浏览器中：

```
<a href="/training/O &gt;°Cm5�" class="training-link">...</a> 
```

第一次加载页面时，我希望看到一个常规的 mongo 十六进制字符串 (4fac4e5f379cb0a68100015d)，我得到类似“O >°Cm5�”的内容。这只发生在服务器重新启动后的第一个页面加载时。所有后续页面加载都按预期呈现。

这里发生了什么，我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:12:16.293

# python - 去除空格/制表符/换行符 - python

> ID：10711116
> 
> 赞同：130
> 
> 时间：2012-05-22T22:37:01.053
> 
> 标签：python, string, python-2.7, strip

我正在尝试在 Linux 上删除 python 2.7 中的所有空格/制表符/换行符。

我写了这个，应该做的工作：

```
myString="I want to Remove all white \t spaces, new lines \n and tabs \t"
myString = myString.strip(' \n\t')
print myString 
```

输出：

```
I want to Remove all white   spaces, new lines 
 and tabs 
```

这似乎是一件简单的事情，但我在这里缺少一些东西。我应该进口一些东西吗？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-05-22T22:42:54.763

`str.split([sep[, maxsplit]])`与 no`sep`或一起使用`sep=None`：

来自[文档](http://docs.python.org/2/library/stdtypes.html#str.split)：

> 如果`sep`未指定或 is `None`，则应用不同的拆分算法：连续空格的运行被视为单个分隔符，如果字符串具有前导或尾随空格，则结果将在开头或结尾不包含空字符串。

**演示：**

```
>>> myString.split()
['I', 'want', 'to', 'Remove', 'all', 'white', 'spaces,', 'new', 'lines', 'and', 'tabs'] 
```

在返回的列表上使用`str.join`以获得此输出：

```
>>> ' '.join(myString.split())
'I want to Remove all white spaces, new lines and tabs' 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-05-22T22:40:43.157

如果要删除多个空白项并用单个空格替换它们，最简单的方法是使用如下正则表达式：

```
>>> import re
>>> myString="I want to Remove all white \t spaces, new lines \n and tabs \t"
>>> re.sub('\s+',' ',myString)
'I want to Remove all white spaces, new lines and tabs ' 
```

然后，您可以根据需要删除尾随空格`.strip()`。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-12-30T16:36:26.000

使用**re**库

```
import re
myString = "I want to Remove all white \t spaces, new lines \n and tabs \t"
myString = re.sub(r"[\n\t\s]*", "", myString)
print myString 
```

**输出：**

> 我想删除所有空格、换行符和制表符

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-12-31T11:32:23.070

```
import re

mystr = "I want to Remove all white \t spaces, new lines \n and tabs \t"
print re.sub(r"\W", "", mystr)

Output : IwanttoRemoveallwhitespacesnewlinesandtabs 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-12-12T09:49:51.490

> **这只会删除制表符、换行符、空格等。**

```
import re
myString = "I want to Remove all white \t spaces, new lines \n and tabs \t"
output   = re.sub(r"[\n\t\s]*", "", myString) 
```

***输出：***

> Iwanto 删除所有空格、换行符和制表符

再会！

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-05-01T20:09:55.150

上述建议使用正则表达式的解决方案并不理想，因为这是一项如此小的任务，并且正则表达式需要更多的资源开销，而不是任务的简单性所证明的合理性。

这就是我所做的：

`myString = myString.replace(' ', '').replace('\t', '').replace('\n', '')`

或者如果你有一堆东西要删除，这样单行解决方案就会无缘无故地长：

```
removal_list = [' ', '\t', '\n']
for s in removal_list:
  myString = myString.replace(s, '') 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-30T14:11:04.557

在连接中使用列表理解的单线如何？

```
>>> foobar = "aaa bbb\t\t\tccc\nddd"
>>> print(foobar)
aaa bbb                 ccc
ddd

>>> print(''.join([c for c in foobar if c not in [' ', '\t', '\n']]))
aaabbbcccddd 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-05-15T06:54:50.347

由于没有其他更复杂的东西，我想分享这个，因为它帮助了我。

这是我最初使用的：

```
import requests
import re

url = 'https://stackoverflow.com/questions/10711116/strip-spaces-tabs-newlines-python' # noqa
headers = {'user-agent': 'my-app/0.0.1'}
r = requests.get(url, headers=headers)
print("{}".format(r.content)) 
```

不希望的结果：

```
b'<!DOCTYPE html>\r\n\r\n\r\n    <html itemscope itemtype="http://schema.org/QAPage" class="html__responsive">\r\n\r\n    <head>\r\n\r\n        <title>string - Strip spaces/tabs/newlines - python - Stack Overflow</title>\r\n        <link 
```

这就是我将其更改为：

```
import requests
import re

url = 'https://stackoverflow.com/questions/10711116/strip-spaces-tabs-newlines-python' # noqa
headers = {'user-agent': 'my-app/0.0.1'}
r = requests.get(url, headers=headers)
regex = r'\s+'
print("CNT: {}".format(re.sub(regex, " ", r.content.decode('utf-8')))) 
```

期望的结果：

```
<!DOCTYPE html> <html itemscope itemtype="http://schema.org/QAPage" class="html__responsive"> <head> <title>string - Strip spaces/tabs/newlines - python - Stack Overflow</title> 
```

@MattH 提到的精确正则表达式对我来说是适合我的代码的。谢谢！

注意：这是`python3`

# wcf - 标准端点的使用

> ID：10711118
> 
> 赞同：0
> 
> 时间：2012-05-22T22:37:11.270
> 
> 标签：wcf

我正在尝试在我的 wcf 服务中使用 standardEndpoints，如下所示。我收到“serviceHostingEnvironment 的子元素无效”错误。

有任何想法吗？

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true">
  <standardEndpoints>
    <webscriptendpoint>
      <standardendpoint crossdomainscriptaccessenabled="true">
      </standardendpoint>
    </webscriptendpoint>
  </standardEndpoints>
</serviceHostingEnvironment> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:51:06.770

`<standardEndpoints>`是的孩子`<system.serviceModel>`，不是`<serviceHostingEnvironment>`你需要类似下面的配置：

```
<system.serviceModel>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true">
  </serviceHostingEnvironment>
  <standardEndpoints>
    <webscriptendpoint>
      <standardendpoint crossdomainscriptaccessenabled="true">
      </standardendpoint>
    </webscriptendpoint>
  </standardEndpoints>
</system.serviceModel> 
```

# rest - 对资源的其他 RESTful 操作

> ID：10711122
> 
> 赞同：10
> 
> 时间：2012-05-22T22:37:20.213
> 
> 标签：rest

假设我有代表图像的资源

PUT /images/[id] with path -> 如果已经存在，将创建一个新的图像资源更新我的资源

POST /images/[id] -> 更改或更新资源 例如，图像名称

DELETE /images/[id] -> 这将删除我的资源

GET /images/[id] -> 获取图像详细信息

现在是实际问题。如果我需要向图像添加其他操作怎么办？假设图像资源将响应减少红眼操作或任何其他类似裁剪、调整大小

那么如何考虑这些操作以及在 restful 接口中应该如何调用呢？

/images/[id]/remove_redeye

/images/[id]/crop

/images/[id]/调整大小

以上调用在restful接口中有效吗？我很困惑应该考虑这些行动（PUT POST）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T22:49:07.763

“删除红眼”、“裁剪”和“调整大小”听起来都像是“更改或更新资源”的操作。他们将属于 PUT 动作。（我认为您在问题中混淆了 PUT 和 POST，请参阅[w3c 中列出的动词](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)。）

您如何传达动作的性质取决于发布的内容。例如，如果我们谈论的是位于数据库记录之上的表单，那么 POST 就是该记录的数据。没有必要指定正在更改哪些字段，因为整个对象正在以新状态发布。

在这种情况下，整个对象是否以新状态发布？还是该对象仅存在于服务器端并且接口只是发送某种操作的请求？根据提供的信息，对我来说，这听起来像是后者。

在这种情况下，您可以在 POST 中包含有关该操作的更多信息。请记住，POST 可以在其数据中包含键/值对*和/或*更大、更复杂的 POST 正文。该主体可以包含 XML，例如，指定更多信息供服务器在处理请求时使用。也许是这样的：

```
<image id="123">
    <resize>
        <width>200</width>
        <height>200</height>
    </resize>
</image> 
```

这甚至可以允许在同一个请求中执行多个操作，允许用户在将它们全部提交到服务器端的单个工作单元之前尝试客户端的各种操作。当然，您将如何处理它或者它是否适用于这种情况取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T21:44:12.890

PUT /images/[id] 表示添加新资源或完全替换现有资源。

POST 意味着创建（/images）或修改资源（/images/[id]）。如果您创建资源，服务器可能会为您返回该资源。

对于同一资源 (POST) 上的多个修改操作，我倾向于使用自定义标头来定义修改类型。在这种情况下，您的资源

```
/images/[id]/remove_redeye
/images/[id]/crop
/images/[id]/resize 
```

将转化为：

```
POST /images/[id] HTTP/1.1
X-RESTAction [remove_redeye|crop|resize] 
```

# c++ - 抽象类中的静态数组

> ID：10711123
> 
> 赞同：0
> 
> 时间：2012-05-22T22:37:29.943
> 
> 标签：c++

我有一个抽象类，我想在该类上包含一个用于该类的指针数组作为静态变量。该数组稍后将由派生类使用。

```
class Base {
  public:
    virtual int someValue() = 0;
    static Base* Bases[100];

    void Startup() {
      Bases[2] = this; // just a test
    };
};

class Derived : public Base {
  public:
    virtual int someValue() {return 10};
}; 
```

然而，在编译时，我收到以下错误：`Undefined symbols for architecture i386 "Bases", referenced from: Base::Startup()`.

我怎样才能达到这个结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T22:39:18.853

你已经声明了你的数组`Bases`，但你还没有定义它。您需要在其他地方定义它，最好是在 cpp 文件中：

```
Base* Base::Bases[100]; 
```

# facebook-graph-api - 不同版本的 facebook 用于基于位置的开发？

> ID：10711126
> 
> 赞同：0
> 
> 时间：2012-05-22T22:38:04.540
> 
> 标签：facebook-graph-api, mobile, checkin, facebook-checkins, facebook-test-users

我正在开发一个使用 facebook 手机签到功能的应用程序。我在 facebook 上创建了多个版本的应用程序，这样我就可以将生产、测试​​和开发分开。都好。但是，我所有的签到（无论是测试、开发还是产品）都将进入实时 Facebook 平台，从而在实时 Facebook 页面上签到诸如“这是一个测试”或“等等等等”之类的签到。有没有办法可以在这些真实/实时页面上签到但不能签到？换句话说，是否有沙盒或开发版本可供开发者自由更新内容？

谢谢你们！

最好的，萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:00:07.480

所以，就像生活中的许多其他事情一样，用我的头来解决这个问题有点帮助。我发现我可以为我的应用程序创建测试用户——最多 500 个。该文档位于[http://developers.facebook.com/docs/test_users/](http://developers.facebook.com/docs/test_users/)。我能够为我的应用程序创建测试用户，使用这些测试用户登录 facebook，并验证我的操作没有显示在公共页面上。呼，现在我不需要再破坏这些公共财产了。:-) 这样做时，您需要使用应用程序访问令牌而不是普通用户访问令牌。为此，请点击以下链接：[https ://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/). 我遇到的最后一个问题是上面的第二个链接指出您应该在图形请求中有一个名为 grant_type=client_credentials 的参数。我一直在寻找可以替代我认为是名为“client_credentials”的占位符的客户端凭据类型。该术语需要逐字记录。（哥查）。此外，当我尝试创建用户两次时，facebook 以错误 json 响应，说“发生了未知错误”。我几乎准备放弃......但就像我之前所说的那样，猛烈抨击这个问题会有所帮助。在第三个请求之后，Facebook 以这样的 json 响应：

```
{
    "id":"*******1832",
    "access_token":"*****",
    "login_url":"https://www.facebook.com/platform/test_account_login.php?user_id=*****&n=*****",
    "email":"****",
    "password":"*****"
} 
```

希望这可以帮助其他可能也在寻找此信息的人。

# c# - 每次第一次访问时清除会话

> ID：10711129
> 
> 赞同：0
> 
> 时间：2012-05-22T22:38:13.797
> 
> 标签：c#, asp.net-mvc-3, session

我有一个基于会话的 facebook 应用程序。我有如下不良行为：如果用户正在使用该应用程序，则从 facebook 注销，而其他一些用户登录到 facebook 并登录该应用程序，他们会看到刚刚注销的用户数据。

基本上我想在每次访问者点击第一页时清除会话。

我有一个 HomeController，它在基本控制器中扩展 BaseController 我检查用户是否有会话。

我应该把 Session.clear() 放在哪里以防止用户访问旧用户会话？

在

```
HomeController{
   [authorize for facebook]
   indexAction{
      redirect to home action
   }

} 
```

我担心的是，当调用 indexaction 之前，将调用该基本控制器，我将得到一个无限循环。

注意：我正在使用一个 UserCookie，我在其中存储了用户 ID 和 cookie 的过期时间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:52:24.090

看起来您想检查 Facebook 用户 ID 是否与会话状态中的数据匹配。如果当前 facebookId 与 `Session["FBID"] 匹配，最简单的方法是`Session["FBID"]=facebookId`检查每个请求，如果不匹配 - 清除会话（无论当前位置如何）。

# sybase - Sybase：加载前踢掉所有连接

> ID：10711130
> 
> 赞同：1
> 
> 时间：2012-05-22T22:38:14.920
> 
> 标签：sybase

我们有一个自动化脚本来恢复 Sybase 数据库，然后针对它运行我们的自动化测试。我们经常有一个连接到这个数据库的网络服务器或交互式查询工具。这些连接通过“...必须独占使用数据库来运行负载”来阻止 Sybase 负载。

如何踢/杀死/终止所有连接？

我想要类似于 Sql Server 的 alter database single_user 并立即回滚。这是一个本地 Sybase 实例，因此我们拥有完全的管理员权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:17:56.647

在不知道脚本检查的确切条件的情况下，您需要做两件事来保证数据库的独占使用 (i) 运行 "master..sp_dboption 'your-db-name', 'single user', false" 以将其置于单用户模式，并且 (ii) 首先使用“kill”命令杀死所有现有用户。
这并不难放入存储过程中——杀死所有使用您的数据库作为当前数据库或在该数据库中锁定的连接，然后尝试将其设置为单用户模式。然后检查单用户模式是否成功——您应该允许重复尝试，因为当您将其设置为单用户模式时，新用户可能再次连接。

这一切都不难实现，但您需要对 ASE 系统表有所了解。但首先，我认为你需要弄清楚你的加载脚本假设的情况以及它检查的内容。

可能还有其他解决方案：例如，如果您可以锁定受加载脚本影响的表，那也可能是一个解决方案（并且是一个更简单的解决方案）。但这可能会也可能不会，这取决于加载脚本的确切作用和预期。所以这将是第一个问题要回答。

高温下，

罗布·V。

# c# - 为什么取消不取消，返回不返回，除非他们组队？

> ID：10711131
> 
> 赞同：-1
> 
> 时间：2012-05-22T22:38:16.090
> 
> 标签：c#, winforms, formclosing

使用此代码：

```
private void PlatypusMainForm_FormClosing(object sender, FormClosingEventArgs e) {
    if ((UnsavedChanges()) && (!(UserWantsToMoveOnWithoutSaving(CONFIRM_CLOSE_UNSAVED_CHANGES_LOST, "Close Without Saving?")))) {
        e.Cancel = true;
        return;
    }
    if (oracleConnectionMainForm.State == ConnectionState.Open) {
        oracleConnectionMainForm.Close();
        oracleConnectionMainForm.Dispose();
    }
} 
```

...如果*e.Cancel = true*被注释掉，表单无论如何都会关闭。

...如果*return*被注释掉，其余代码（关闭和处置）运行（因此，如果我尝试保存更改，我会收到连接未打开的错误消息）。

因此，我必须同时执行（取消和返回）以使代码能够像我认为的那样与任何一个一起工作。

这是正常的/如预期的那样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:42:05.030

是的，正如预期的那样。告诉框架您已经处理了`e.Cancel`事件，并且您不想要自动行为。没有它，在你的方法返回后，框架将继续处理事件，并关闭窗口。

中止当前方法的`return`执行，所以最后的东西不会执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T22:46:32.317

Cancel 默认为 false，因此如果您将其注释掉，它永远不会设置为 true。取出 return ，直到其余代码执行后才会返回，或者在您的情况下出现错误。

```
if (SomeCondition)
{
  e.Cancel = true;
}
else
{
  // Do Something
} 
```

会更清晰，并且稍微不那么复杂。

# vb.net - VB.NET DataGridView 不显示数据

> ID：10711134
> 
> 赞同：1
> 
> 时间：2012-05-22T22:38:54.960
> 
> 标签：vb.net, arrays, datagridview, multidimensional-array

我环顾四周，似乎没有什么特别回答我的问题。我有 DataGridView，在其中添加行和列，具体取决于 ArcGIS 中保存的地理空间数据的特定记录数。然后将数据传递到 gridview 进行编辑。

所以我不使用任何数据绑定方法，而是一个非常手动的过程。我将数据存储到一个二维数组中，这些数组的索引基于那些特定的数据记录计数。

循环完成后，数据应根据索引存储在每个单元格中。填充的最后一行被完美填充，但其他 72（左右）行是空白的。

这是代码如下：

**这会填充列标题（效果很好）：**

```
For i_FieldNum = 0 To pFields_1.FieldCount - 1

        str_FieldName = UCase(pFields_1.Field(i_FieldNum).Name)
        str_FieldAliasName = pFields_1.Field(i_FieldNum).AliasName

        ReDim Preserve m_array_str_FieldNames(i_FieldNum)
        ReDim Preserve m_array_str_FieldAliasNames(i_FieldNum)
        m_array_str_FieldNames(i_FieldNum) = str_FieldName
        m_array_str_FieldAliasNames(i_FieldNum) = str_FieldAliasName

        i_FieldCount = i_FieldCount + 1
        i_ColNum = i_FieldCount - 1

        'If this is the "SHAPE", "FID", or "OBJECTID" field, remember it:
        If (str_FieldName = "SHAPE") Then
            m_i_FieldNum_Shape = i_FieldCount - 1
        ElseIf (str_FieldName = "FID") Then
            m_i_FieldNum_FID = i_FieldCount - 1
        ElseIf (str_FieldName = "OBJECTID") Then
            m_i_FieldNum_OBJECTID = i_FieldCount - 1
        End If

        'Store the field name in the top row:
        grid_Data.ColumnCount = i_FieldCount
        grid_Data.Columns.Item(i_ColNum).HeaderText = str_FieldName

        ReDim Preserve m_array_l_FieldColLengths(i_ColNum)
        m_array_l_FieldColLengths(i_ColNum) = pFields_1.Field(i_FieldNum).Length

    Next i_FieldNum 
```

**这将填充二维数组：**

```
 Do Until pFeat_1 Is Nothing
        'Until we run out of features ...

        i_FeatCount = i_FeatCount + 1

        For i_FieldNum = 0 To pFields_1.FieldCount - 1

        'If the field is recorded as a shape
            If (i_FieldNum = m_i_FieldNum_Shape) Then
                array_Data(i_FeatCount - 1, i_FieldNum) = "<Shape>"
            Else

        'If the value of the field is null
                If IsNothing(pFeat_1.Value(i_FieldNum)) Or pFeat_1.Value(i_FieldNum).ToString = "" Then
                    array_Data(i_FeatCount - 1, i_FieldNum) = "<Null>"
                Else

                    array_Data(i_FeatCount - 1, i_FieldNum) = pFeat_1.Value(i_FieldNum).ToString
                End If
            End If

        Next i_FieldNum

        'End If

        'Move to the next feature (if any).
        pFeat_1 = pFeatCursor_1.NextFeature

    Loop 
```

**这是假设显示数据：**

```
 For i_RowNum = 0 To i_FeatCount - 1

        'Add a new row to the grid:
        grid_Data.RowCount = i_RowNum + 2

        For i_ColNum = 0 To pFields_1.FieldCount - 1

            grid_Data.Item(i_ColNum, i_RowNum + 1).Value = array_Data(i_RowNum, i_ColNum)

        Next i_ColNum

    Next i_RowNum 
```

一切都运行和编译完美，尽管正如我之前所说，只显示最后一行的数据（正确填充）。

如果有人可以帮助弄清楚为什么只填充了一行，那将不胜感激。

谢谢你，

洛根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:49:31.523

检查您更新的部分 -**这是假设显示数据：**如果您的数据设置正确，那么根据我的猜测，它会使网格显示错误的数据。根据您添加的网格中的列对其进行修改。或者您可以创建列名字符串数组以将数据放入特定单元格中。作为`dgvr.Cells(columnsArray[index]).Value = array[,]`

```
For i_RowNum = 0 To i_FeatCount - 1

        'Add a new row to the grid:
        DataGridViewRow dgvr = new System.Windows.Forms.DataGridViewRow();
        dgvr.CreateCells(grid_Data)

        For i_ColNum = 0 To pFields_1.FieldCount - 1
            dgvr.Cells(i_ColNum).Value = array_Data(i_RowNum, i_ColNum)
        Next i_ColNum
        grid_Data.Rows.Add(dgvr)
Next i_RowNum 
```

> **参考**：[向 DataGridView 添加新行](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/3cf35ca3-67de-462a-8096-ad8c55e2259f/)以及[如何：在 Windows 窗体 DataGridView 控件中操作行](http://msdn.microsoft.com/en-us/library/ddtce152.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:05:50.437

请参见此处，每次增加行数时都会清除数据：

```
DataGridView1.RowCount += 1
DataGridView1.Item(0, 0).Value = "a value"
DataGridView1.RowCount += 1
DataGridView1.Item(0, 1).Value = "the previous value has been wiped" 
```

要在不进行任何重大更改的情况下修复您的代码，只需使用此方法添加行：

```
grid_Data.Rows.Add(paramArray) 
```

甚至更容易将此行放在 for 循环上方并在填充之前设置行数：

```
grid_Data.RowCount = i_FeatCount - 1 
```

# netbeans - 如何对泽西 Web 服务进行单元测试？

> ID：10711135
> 
> 赞同：0
> 
> 时间：2012-05-22T22:39:13.993
> 
> 标签：netbeans, jersey

任何人都知道在netbeans中单元测试球衣网络服务的任何好的分步指南吗？我正在为球衣使用restlib_gfv3ee6 lib，它似乎不包括球衣测试框架。我试图遵循[http://jersey.java.net/nonav/documentation/latest/client-api.html#d4e759](http://jersey.java.net/nonav/documentation/latest/client-api.html#d4e759)但说明含糊不清，示例很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:30:46.580

您要遵循的是有关测试泽西岛客户的部分。您需要[第 7 章，泽西测试框架](http://jersey.java.net/nonav/documentation/1.12/test-framework.html)。

**更新：** “很高兴看到一些博客参考”...

你是说像[这样](https://blogs.oracle.com/naresh/entry/jersey_test_framework_makes_it)，[这样](https://blogs.oracle.com/naresh/entry/jersey_test_framework_re_visited)，[这样](http://www.hascode.com/2011/09/rest-assured-vs-jersey-test-framework-testing-your-restful-web-services/)，[这样](http://www.mentby.com/glassfish/jersey-test-framework-custom-messagebody-readerwriter.html)，还是[这样](http://shotgunsandpenguins.blogspot.com/2011/04/effective-testing-of-jersey-resource.html)？谷歌是一个了不起的东西，你知道的。

# javascript - 输入表单浏览并获取文件夹路径并保存在文本输入Javascript中

> ID：10711137
> 
> 赞同：1
> 
> 时间：2012-05-22T22:39:41.770
> 
> 标签：javascript, forms, input

是否可以在表单中使用文件输入来导航到文件夹，然后只选择该文件夹？我不想在其中选择文件，只是目录。我想这样做，而不是让人们输入目录的整个路径......

换句话说：

用户单击[浏览]导航到文件夹，单击[确定]，浏览输入保留文件夹路径。

我正在为用户创建一个表单，以便在他们需要授予访问权限的地方提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T22:41:31.397

不，那是不可能的。无论如何，用户没有理由想要提交到*Web应用程序的**本地*路径（除了一些晦涩的本地/内部网应用程序）。

# java - Spring 3 mvc如何将图像上传到Web应用程序资源

> ID：10711145
> 
> 赞同：1
> 
> 时间：2012-05-22T22:40:36.683
> 
> 标签：java, model-view-controller, image-uploading, spring-3, apache-commons-io

我在 spring 3 mvc 中上传图片时遇到问题。我搜索了几个小时，但找不到任何令人满意的解决方案。

我想做的事？

我只是想将图像上传到服务器并将其存储在我可以从我的 jsp 站点轻松访问它以显示图像等的位置。

我不知道，如果使用了错误的关键字，但我找不到一个好的解决方案，我是春天的新手，我自己想办法解决...

所以问题不在于将文件存储在服务器上，我已经解决了这个问题，但直到现在我只能将它保存到 ServletContext#getRealPath() 并且我认为我无法访问 jsp 站点中的图像。

有没有人知道如何解决这个问题或找到解决方案的任何提示？

非常感谢您的帮助，对我的英语感到非常抱歉...在德国已经很晚了-.-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:12:17.610

据我说，当您尝试访问 jsp 文件中的图像时，它会给您 404 错误。

您需要在 servlet.xml 文件中包含以下代码行。

```
<mvc:resources location="/assets/" mapping="/assets/**" /> 
```

您只需要替换存储上传图像的路径即可。然后一切正常。

希望这对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:47:27.850

感谢您的帮助，我的问题是如何获取将文件保存到其中的路径。

这是我现在如何做的代码片段（我在几个tuts中找到了这种方式，但我不知道这是否是保存图像的好方法）

```
ServletContext context = RequestContextUtils.getWebApplicationContext(request).getServletContext();
    try {
        if(!image.isEmpty()) {
            validateImage(image);
            sizeChart.setImgPath(saveImage(context.getRealPath("/") + "/images/" + image.getOriginalFilename(), image));
        } 
```

# asp.net-mvc-3 - 构造函数链接的 Ninject 绑定问题

> ID：10711154
> 
> 赞同：0
> 
> 时间：2012-05-22T22:41:15.513
> 
> 标签：asp.net-mvc-3, entity-framework, repository, ninject, unit-of-work

我有一个使用 Entity Framework 和 Ninject v2.2 的 MVC3 项目，并遵循工作单元模式，服务层包装了我的存储库。

在查看下面的代码之后，希望很明显 Ninject 正在使用构造函数链接来注入正确的类。它目前在我的应用程序中运行良好，但是我需要将 IDatabase 的实例绑定到具有不同范围的 MyDatabase，例如 InSingletonScope() 或 InNamedScope()，而不是 InRequestScope()。我知道我可以使用 [Named("MyDatabaseScope")] 属性来自定义注入哪个 IDatabase 对象，但是似乎对于我的代码结构，如果我想注入我的 SingletonScoped 实例，我将不得不重新创建一个新的 Abstract我的工作单元、我的服务和我的所有存储库的具体实现，然后将链接下来。

基本上我的应用程序目前正在

控制器 -> 工作单元 -> 数据库，（存储库 -> 数据库）

如果我必须更改我的数据库绑定，我现在必须在当前链之外创建另一个链：

Controller -> New Unit of Work -> SingletonDatabase, (New Repositories-> SingletonDatabase)

这似乎完全击败了 DRY 校长。有没有办法从 Controller Constructor 通知 Ninject 在进行构造函数链接时它应该使用我的单例（或命名绑定）而不是我的请求范围绑定，而不必使用命名属性或新的属性重新创建我的所有类界面？

抱歉，文字太长了，我不确定如果没有我的代码片段和我有些漫不经心的解释，我是否能理解这一点。

Ninject 模块加载功能：

```
..snip..
Bind<IUserServices>().To<UserServices>();
Bind<IBaseServices>().To<BaseServices>();
Bind<IUserRepository>().To<UserRepository>();
Bind(typeof (IRepository<>)).To(typeof (RepositoryBase<>));
Bind<IUnitOfWork>().To<UnitOfWork>();
Bind<IDatabase>().To<MyDatabase>().InRequestScope();

//This is my problem:
//Bind<IDatabase>().To<MySingletonDatabase>().InSingletonScope(); 
```

工作单元实施构造器：

```
public class UnitOfWork : IUnitOfWork
{
    private IDatabase _database;

    public UnitOfWork(IDatabase database,
                      IUserRepository userRepository,
                      IPeopleRepository peopleRepository,
        )
    {
        this._database = database;
        this.UserRepository = userRepository;
        this.PeopleRepository = peopleRepository;
    }

    protected IDatabase Database
    {
        get { return _database; }
    }

    ...snip...
} 
```

用户服务层实现构造器：

```
public class UserServices : BaseServices, IUserServices
{
    private IUnitOfWork _uow;

    public UserServices(IUnitOfWork uow)
        : base(uow)
    {
        _uow = uow;
    }
    ...snip...
} 
```

用户存储库构造函数：

```
public class UserRepository : RepositoryBase<User>, IUserRepository
{
    public UserRepository(IDatabase database)
        : base(database)
    {
    }
    ...snip...
} 
```

控制器构造函数：

```
public IUserServices _userServices { get; set; }

    public ActivityController(IUserServices userServices)
    {
        _userServices = userServices;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:18:02.887

使用 Ninject 3.0.0 你可以使用`WhenAnyAncestrorNamed("Some name")`但是如果你需要运行异步的东西你应该把你的应用程序分成一个 web 前端和一个服务器后端。这可以使许多事情变得更容易。

# javascript - 计算 gif 回放

> ID：10711158
> 
> 赞同：2
> 
> 时间：2012-05-22T22:42:04.517
> 
> 标签：javascript, jquery, animation, animated-gif

是否可以计算动画 gif 使用 javascript/jquery 播放了多少次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T22:43:25.530

不，那是不可能的。

`setInterval`但是，您可以使用动画的持续时间创建一个间隔，这会增加一个计数器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T22:51:39.097

正如@ThiefMaster 所说，你不能用 GIF 动画来做到这一点。

但是，您可以使用 javascript 动画来实现您想要的。

与其将动画的帧保存在 GIF 动画中，不如将它们保存在一个单独的 PNG 文件中，水平或垂直排列（即看起来像一卷胶片）。

`setInterval`在页面上的元素中显示图像，这样您一次只能看到一帧动画，然后使用 Javascript 使用或定期调整图像的 CSS 偏移量`setTimeout`。

这种技术被称为 CSS Sprite 动画。这很容易做到，而且它基本上是现在在网络上制作现场图形动画的标准方式（GIF 动画*太棒*了1998 年）。

Google 将为您提供大量资源来帮助您了解更多信息：[https ://www.google.com/search?q=css+sprite+animations](https://www.google.com/search?q=css+sprite+animations)

您可能还想阅读这个问题的公认答案：[为什么不使用动画 GIF 而不是动画 CSS 精灵？](https://stackoverflow.com/questions/10186257/why-not-animated-gif-instead-of-animated-css-sprites)

# java - 设置HashMap的Key为setter

> ID：10711162
> 
> 赞同：-1
> 
> 时间：2012-05-22T22:42:19.150
> 
> 标签：java

```
LinkedHashMap<String, Double> testMap = (LinkedHashMap<String, Double>) sortByValue(commands.get(commandWithMaxNegativeOffset).getDataUsageCriteria()); 
```

从上面看，`testMap`将包含类似`{New=30.0, Previous=70.0}`值升序排列的东西，所以我想要做的是 if/else 循环中的下面的东西，因为目前我现在已经硬编码只是为了更有意义，但我想使用 testMap 而不是硬编码. `key`如果条件匹配，我想设置为值`by using key/value pair from map`

```
double percent = r.nextDouble()*100;

if(percent > 1.0 && percent < 70.0(how can I use 70 from testMap instead of hardcoding)) {
//what to put below in place of Previous
    commands.get(commandWithMaxNegativeOffset).setDataCriteria(Use the Key of 70.0 i.e Previous);
} else if(percent > 71 && percent < 100){
    commands.get(commandWithMaxNegativeOffset).setDataCriteria(Use the Key of 30.0 i.e New);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:15:08.877

如果我理解正确，以下可能是您正在寻找的内容：

```
final LinkedHashMap<String, Double> testMap = new LinkedHashMap<String, Double>();
testMap.put("New", Double.valueOf(30.0));
testMap.put("Previous", Double.valueOf(70.0));

// The map contains two entries.
Set<Map.Entry<String, Double>> entries = testMap.entrySet();
Iterator<Map.Entry<String, Double>> it = entries.iterator();
Map.Entry<String, Double> firstEntry = it.next();
Map.Entry<String, Double> secondEntry = it.next();

Random r = new Random();
double percent = r.nextDouble() * 100;

// percent is a number between 0.0 and 100.0
if (percent < secondEntry.getValue().doubleValue()) // between 0.0 and 70.0 exclusive
{
    commands.get(commandWithMaxNegativeOffset).setDataCriteria(secondEntry.getKey());
}
else // between 70.0 inclusive to 100.0 (100.0 - 70.0 = 30.0)
{
    commands.get(commandWithMaxNegativeOffset).setDataCriteria(firstEntry.getKey());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:46:13.013

只是`if(percent > map.get("new") && percent < map.get("previous"))`？如果这实际上是您要问的，那么您应该在 javadoc 中停下来查看地图，然后再继续。

# mysql - 使用 JOIN 子句的 LIMIT 行为

> ID：10711167
> 
> 赞同：2
> 
> 时间：2012-05-22T22:42:55.417
> 
> 标签：mysql, sql, join, query-optimization, limit

在 mysql 中，当您有 3 个表（大量数据）通过 JOIN 子句连接时，在 SELECT 结束时您有一个 LIMIT 子句，sql 引擎生成表的笛卡尔积，然后应用 LIMIT，或者存在任何之前做过优化？

我问是因为如果我们使用大数据量，JOIN 操作是一项昂贵的操作。

在这种情况下，最好执行 JOIN 并提取所有数据，还是执行 SELECT with LIMIT 子句 N 次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:02:27.653

短版：取决于查询

更长的版本：当你有一个 LIMIT 子句时，它假设你有以某种方式排序的数据。如果您没有明确指定 ORDER BY 子句，您将看到，只要 MySQL 找到所需的行数，查询的执行就会停止。如果您有一个需要文件排序的排序，所有数据将在一个临时表中排序，MySQL 将输出您指定的前 N ​​行。

但是如果你强制特定的连接顺序和索引使用，MySQL 会很高兴地缩短执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:51:14.963

不，限制功能只是视觉上的事后效果。

1/ 计算 JOINS。

2/ 处理 WHERE 过滤器和 HAVING 过滤器

3/ LIMIT 减少了返回结果的数量。如果您指定了任何 ORDER BY 子句，订单仍将保留。

改进您的连接以减少计算开销。

# javascript - Telerik Scheduler 在客户端显示 24 小时/营业时间、日、周、月、时间线、左右箭头事件

> ID：10711170
> 
> 赞同：0
> 
> 时间：2012-05-22T22:43:20.943
> 
> 标签：javascript, jquery, asp.net-mvc, telerik, telerik-scheduler

Telerik Scheduler 如下链接所示 -
[http://demos.telerik.com/aspnet-ajax/scheduler/examples/clientsideevents/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/scheduler/examples/clientsideevents/defaultcs.aspx)

对于“显示 24 小时”和“显示营业时间”点击事件，我会在客户端 (javascript) 上调用什么方法？
对于日、周、月和时间线点击事件，我会在客户端 (javascript) 上调用什么方法？
我会在客户端（javascript）上调用什么方法来捕获左/右箭头事件？

提前致谢。

# asp.net - ASP.NET：生成订单 ID？

> ID：10711174
> 
> 赞同：-2
> 
> 时间：2012-05-22T22:43:38.850
> 
> 标签：asp.net, sql-server, random

我正准备启动我在 ASP.NET 中设计的网站。

问题是，我不希望我的客户拥有超低订单 ID（例如：#00000001）。

我将如何生成唯一（和随机）订单 ID，以便客户获得类似 K20434034 的订单号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:52:59.990

业务层和数据库都有多个选项：

## 考虑

*   随机数有可能发生冲突
*   最好不要公开内部 ID，尤其是顺序 ID
*   如果用户不得不输入或说出长值，他们会很烦

## 选项

*   生成一个密码随机数（`Int64`生成的`RNGCryptoServiceProvider`具有非常低的冲突或可预测性的机会）
*   开始一个自动递增的列，该列从零以外的任意数字开始
*   使用`UNIQUEIDENTIFIER`（或`System.Guid`）和 base 62 编码字节

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:56:01.563

将您的 OrderId 的身份种子设置为一个大数字。然后，当您向用户显示订单号时，您可以在订单 ID 前面添加一个常量（就像所有订单都以 K 开头），或者您可以生成一个随机字符串并将其存储在订单记录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T23:52:51.307

如果您只关心他们认为数字不低，我建议您以更高的数字开始身份种子。random 的问题是总是有可能发生冲突，并且随着现有订单 ID 的数量越来越多，检查重复项的成本越来越高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:24:12.253

将列数据类型设为 UNIQUEIDENTIFIER 。此数据类型将为您提供下面提到的格式的 ID。希望这能满足需求。

B85E62C3-DC56-40C0-852A-49F759AC68FB。

# css - 有没有更简单的方法来用 css 创建这个形状？（包括jsfiddle）

> ID：10711183
> 
> 赞同：0
> 
> 时间：2012-05-22T22:45:53.030
> 
> 标签：css, shapes

我正在尝试围绕广告处理这种形状，但仍然允许其中的正常文本流动。你可以看到它是一个引用，我一直在为曲线制作不同的 id 和 class。所以它实际上是 3 个元素的边界重叠，但我觉得它所做的工作比它需要的要多。

[http://jsfiddle.net/dUKQe/](http://jsfiddle.net/dUKQe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:56:16.700

这还不是 100% 完美（浏览器之间似乎有一些细微的像素差异需要敲定——我已经花了太长时间了），但总的来说，这非常接近您通过明智地使用伪元素。

[请参阅示例小提琴](http://jsfiddle.net/dUKQe/72/)。

**HTML**

```
<div id="text3" class="text">
    <h4>Bruce Lee</h4>
        <p><q>Be like water making its way through cracks. Do not be assertive, but adjust to the object, and you shall find a way around or through it. If nothing within you stays rigid, outward things will disclose themselves. Empty your mind, be formless. Shapeless, like water. If you put water into a cup, it becomes the cup. You put water into a bottle and it becomes the bottle. You put it in a teapot, it becomes the teapot. Now, water can flow or it can crash. Be water, my friend.</q>
        </p>
</div> 
```

**CSS**

```
#text3 {
    position: absolute;
    top: 5px;
    left: 5px;
    z-index: 0;
}

.text h4 {
    width: 228px;
    color: #ffffff;
    background-color: #012E40;
    margin: 5px 5px 0 5px;
    padding: 10px 10px 0 10px;
    border: 3px solid #000000;
    border-bottom-width: 0;
    -moz-border-radius: 5px 5px 0px 0px;
    border-radius: 5px 5px 0px 0px;
    position: relative;
}

.text h4:before {
    content: '';
    position: absolute;
    width: 3px;
    height: 3px;
    right: -3px;
    bottom: 0;
    background-color: #012E40;
}

.text h4:after { /*upper light blue bkg */
    content: '';
    display: block;
    background-color: #1B4E59;
    border: 2px solid #000000;
    width: 210px;
    height: 3em;
    padding: 5px;
    margin-top: -9px;
    margin-left: 2px;
    margin-bottom: -2px;
    border-bottom-width: 0;
    -moz-border-radius: 5px 5px 0px 0px;
    border-radius: 5px 5px 0px 0px;
    position: relative;
    top: 10px;
    z-index: 1;
}

.text p {
    color: #ffffff;
    margin: -3em 5px 5px 5px;
    padding: 0 5px 5px;
    width: 448px;
    position: relative;
}

.text p:before { /* inset border corner */
    content: '';
    display: block;
    width: 200px;
    height: 3em;
    float: right;
    margin: -3px 0px 3px 15px;
    border: 3px solid #000000;
    border-top-width: 0;
    border-right-width: 0;
    -moz-border-radius: 0px 0px 0px 5px;
    border-radius: 0px 0px 0px 5px;    
}

.text p:after { /* lower dark blue bkg */
    content: '';
    display: block;
    position: absolute;
    top: 3em;
    right: 0;
    bottom: 0;
    left: 0;
    margin-top: -3px;
    background-color: #012E40;
    border: 3px solid #000000;
    -moz-border-radius: 0px 5px 5px 5px;
    border-radius: 0px 5px 5px 5px;
    z-index: -1;
}

.text p q {
    display: block;
    margin: 0 10px 10px;
    padding: 5px;
    position: relative;
    z-index: 2;
}

.text p q:before { /* 2nd inset border corner */
    content: '';
    display: block;
    height: .5em;
    width: 202px;
    position: absolute;
    top: 3em;
    right: 3px;
    border: 2px solid #000000;
    border-top-width: 0;
    border-right-width: 0;
    -moz-border-radius: 0px 0px 0px 5px;
    border-radius: 0px 0px 0px 5px;
    z-index: 3;    
}

.text p q:after { /* lower light blue bkg */
    content: '';
    display: block;
    position: absolute;
    top: 3.5em;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: #1B4E59;
    border: 2px solid #000000;
    border-top-width: 0;
    -moz-border-radius: 0px 5px 5px 5px;
    border-radius: 0px 5px 5px 5px;
    z-index: -1;
} 
```

# perl - 搜索文件，找到匹配项时，存储它，然后打印出上面 4 行，下面 3 行

> ID：10711191
> 
> 赞同：2
> 
> 时间：2012-05-22T22:47:00.050
> 
> 标签：perl

我有一个简单的搜索脚本，它接受用户输入并跨目录和文件进行搜索，并且只列出找到它的文件。我想要做的是能够在找到匹配项时，抓住它上面的 4 行，然后它下面的3行并打印它。所以，可以说我有。

### 一些文件.html

```
"a;lskdj a;sdkjfa;klsjdf a aa;ksjd a;kjaf ;;jk;kj asdfjjasdjjfajsd  jdjd
jdjajsdf<blah></blah> ok ok okasdfa stes test tes tes test test<br>

blah blah blah ok, I vouch for the sincerity of my post all day long.
Even though I can sometimes be a little crass.

I would only know the blue moon of pandora if I saw it. I heard tales of long ago 
times in which .. blah blah

<some html>whatever some number 76854</some html>

running thru files of grass etc.. ===> more info
whatever more " 
```

假设我想找到“76854”，它将打印或存储在一个数组中，这样我就可以打印在 dirs/files 中找到的所有匹配项。

```
*Match found:*

**I would only know the blue moon of pandora if I saw it. I heard tales of long ago 
times in which .. blah blah
<some html>whatever whatever</some html>
running thru files of grass etc.. ===> more info
whatever more**

********************************** 
```

类似的东西。到目前为止，我有并且它正在通过打印出找到匹配项的文件来工作：

```
if ($args->{'keyword'}){
    if($keyword =~ /^\d+$/){
    print "Your Results are as Follows:\n";
        find( sub
            {
                local $/;
                return if ($_ =~ /^\./);
                return unless ($_ =~ /\.html$/i);
                stat $File::Find::name;
                return if -d; #is the current file a director?
                return unless -r; # is the file readable?
                open(FILE, "< $File::Find::name") or return;
                my $string = <FILE>;
                close (FILE);
                print "$keyword\n";
                if(grep /$keyword/, $string){
                    push(@resultholder, $File::Find::name);
                }else{
                   return;
                }
             },'/app/docs/');
    print "Results: @resultholder\n";
    }else{
        print "\n\n ERROR\n";
        print "*************************************\n\n";
        print "Seems Your Entry was in the wrong format \n\n";
        print "*************************************\n\n";
    }
exit;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T22:59:16.520

perl 是这里的先决条件吗？使用 grep 非常简单，您可以告诉它在匹配前后打印 N 行。

`grep <search-term> file.txt -B <# of lines before> -A <# of lines after>`

如果您真的想使用 perl，请忽略，只是扔掉一个替代方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T23:07:37.300

您使用的是 Windows 还是 Linux？

如果您在 Linux 上，您的脚本最好替换为：

```
grep -r -l 'search_string' path_to_search_directory 
```

它将列出所有包含 search_string 的文件。要在 match 行之前获得 4 行上下文，在行之后获得 3 行上下文，您需要运行：

```
grep -r -B 4 -A 3 'search_string' path_to_search_directory 
```

如果由于某种原因您不能或不想使用 grep，则需要改进您的脚本。

首先，通过这种结构，您只读取文件中的第一个字符串：

```
my $string = <FILE>; 
```

其次，您最好避免将所有文件读入内存，因为您可能会遇到几个 Gb 文件。甚至将一个字符串读入内存，因为你会遇到非常大的字符串。将其替换为对一些小缓冲区的顺序读取。

最后，要获得之前的 4 行和之后的 3 行，您需要从找到的匹配中执行反向读取（在匹配之前寻找到 buffer_size 的位置，读取该块并检查其中是否有足够的换行符） .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T23:06:25.983

因此，您需要存储至少 8 行，并在第 5 行与您的模式匹配时输出这 8 行。`shift`用于从数组前面删除元素的运算`push`符和用于将元素添加到列表末尾的运算符在这里可能会有所帮助。

```
find( sub {
    ...  # but don't set $\

    open( FILE, '<', $File::Find::name) or return;
    my @buffer = () x 8;
    while (<FILE>) {
        shift @buffer;
        push @buffer, $_;
        if ($buffer[4] =~ /\Q$keyword\E/) {
            print "--- Found in $File::Find::name ---\n";
            print @buffer;
            # return?
        }
    }
    close FILE;

    # handle the case where the keyword is in the last ~4 lines of the file.
    while (@buffer > 5) {
        shift @buffer;
        if ($buffer[4] =~ /\Q$keyword\E/) {
            print "--- Found in $File::Find::name ---\n";
            print @buffer;
        }
    }
} ); 
```

# c# - ControlTemplate 不显示网格

> ID：10711193
> 
> 赞同：1
> 
> 时间：2012-05-22T22:47:02.300
> 
> 标签：c#, wpf, xaml, controltemplate

我正在尝试创建一个`Button`包含网格的行，其中行包含某些文本。

将`Button`有两行，都有不同的文本。传递给 的文本`ControlTemplate`正在显示，但不是模板中指定的文本。

此外，没有显示 Grid 行的高度。我希望它扩大按钮的高度。事实上，我不确定 Grid 是否真的在显示。

```
<Window x:Class="MAQButtonTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="695" Width="996">        
    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="OverridesDefaultStyle" Value="True"/>
        </Style>
        <ControlTemplate TargetType="Control" x:Key="1">
            <Grid Width="444">
                <Grid.RowDefinitions>
                    <RowDefinition Height="51" />
                    <RowDefinition Height="36" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0" Background="#286c97">
                    <TextBlock>This is the first piece of text</TextBlock>
                </Grid>
                <Grid Grid.Row="1" Background="#5898c0">
                    <ContentPresenter Grid.Row="0" />
                </Grid>
            </Grid>
        </ControlTemplate>
    </Window.Resources>
    <Grid>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0" Background="#e9f1f6"></Grid>
        <Grid Grid.Column="1" Background="#d2e3ed">
            <StackPanel>
                <TextBlock FontFamily="Segoe UI" FontSize="22" FontWeight="Medium" Margin="52,58,0,0" Foreground="#0c3d5d">Your Quizzes <TextBlock FontFamily="Segoe UI" FontSize="18" FontWeight="Medium" Foreground="#0c3d5d">(7)</TextBlock></TextBlock>
                <Grid>
                    <Button Width="444" Background="{x:Null}" BorderThickness="0" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
                        <TextBlock>This is a second piece of text</TextBlock>
                    </Button>
                </Grid>
            </StackPanel>
        </Grid>

    </Grid>
</Window> 
```

这是它目前的显示方式，并粗略地说明了我作为按钮布局要实现的目标：

![当前与我想要的](../Images/8f39bfafcee38e8b6afaad53a7c09895.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:13:58.557

当您应该设置模板时，您正在设置按钮的样式

资源：

```
 <ControlTemplate TargetType="Button" x:Key="ButtonTemplate">
        <Grid Width="444">
            <Grid.RowDefinitions>
                <RowDefinition Height="51" />
                <RowDefinition Height="36" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0" Background="#286c97">
                <TextBlock>This is the first piece of text</TextBlock>
            </Grid>
            <Grid Grid.Row="1" Background="#5898c0">
                <ContentPresenter />
            </Grid>
        </Grid>
    </ControlTemplate> 
```

和按钮：

```
 <Button Template="{StaticResource ButtonTemplate}" >
        Text 2
    </Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:59:56.753

为什么使用 TargetType 作为“控件”，使用 Button。您将需要定义一个按钮。使用 Blend 来编辑按钮模板以从中去除所有不必要的内容。

# asp.net - Windows Phone：将文件上传到 ASP 服务器？

> ID：10711197
> 
> 赞同：0
> 
> 时间：2012-05-22T22:47:23.330
> 
> 标签：asp.net, silverlight, windows-phone-7, post, upload

我需要将文件上传到我的服务器。我没有服务器端编程的先验知识，需要一些我能理解的建议。我在我的 Windows Phone 应用程序中有一个字节数组中的文件（JPEG 图像）。我现在需要将它上传到我的服务器。我目前有一个使用 HttpWebRequest 和 post 的示例，但我不知道如何从 asp 页面处理该帖子中的数据。如果您能解释如何做到这一点，那就太好了，但我愿意接受任何替代方案，只要它们可以与 Windows Server 一起使用。

我目前使用的代码：（'b' 是文件的字节数组）

```
var uri = "http://www.masonbogert.info/mcode/default.aspx";
        var request = HttpWebRequest.Create(uri);
        request.Method = "POST";
        request.ContentType = "image/jpeg";  // Change to whatever you're uploading.
        request.BeginGetRequestStream((result1) =>
        {
            using (Stream stream = request.EndGetRequestStream(result1))
            {
                stream.Write(b, 0, b.Length);
            }

            request.BeginGetResponse((result2) =>
            {
                var response = request.EndGetResponse(result2);
                // Optionally handle the response.
                var responseStream = response.GetResponseStream();
                Dispatcher.BeginInvoke(new readstreamdelegate(readstream), responseStream);

            }, null);

        }, null); 
```

请记住，当谈到 ASP 和任何其他服务器端编程时，我没有先验知识，所以请解释一下！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:26:31.153

您可以尝试使用“WebClient”类来获取它。您可以在那里获得更多信息：“http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:19:58.510

请参阅此页面： http: [//nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/#more-234](http://nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/#more-234)

# apache-flex - Spark Datagrid 百分比宽度列

> ID：10711198
> 
> 赞同：2
> 
> 时间：2012-05-22T22:47:46.710
> 
> 标签：apache-flex, mxml

我想在使用 mx: datagrid 列之后为列应用百分比宽度。

我尝试了几个测试：

```
<s:DataGrid id="dgTuVous" fontWeight="normal" 
                                        dataProvider="{DP_PRAT_INIT}"
                                        width="100%" height="100%" 
                                        horizontalScrollPolicy="on"
                                        fontSize="10"

                                        >
                                <s:columns>
                                    <s:ArrayList>
                                        <s:GridColumn dataField="prInitiales" width="40%" headerText="Prat" />
                                        <s:GridColumn  width="60%" dataField="prTuVous"
                                                      headerText="Tu/Vous">
                                            <s:itemEditor>
                                                <fx:Component>
                                                    <s:ComboBoxGridItemEditor>
                                                        <s:dataProvider>
                                                            <s:ArrayList>

                                                                <fx:String>Tu</fx:String>
                                                                <fx:String>Vous</fx:String>
                                                            </s:ArrayList>
                                                        </s:dataProvider>
                                                    </s:ComboBoxGridItemEditor>
                                                </fx:Component>
                                            </s:itemEditor>
                                        </s:GridColumn>

                                    </s:ArrayList>
                                </s:columns>
                            </s:DataGrid> 
```

和

```
<s:DataGrid id="dgTuVous" fontWeight="normal" 
                                        dataProvider="{DP_PRAT_INIT}"
                                        width="100%" height="100%" 
                                        horizontalScrollPolicy="on"
                                        fontSize="10"

                                        >
                                <s:columns>
                                    <s:ArrayList>
                                        <s:GridColumn dataField="prInitiales" width=".4" headerText="Prat" />
                                        <s:GridColumn  width=".6" dataField="prTuVous"
                                                      headerText="Tu/Vous">
                                            <s:itemEditor>
                                                <fx:Component>
                                                    <s:ComboBoxGridItemEditor>
                                                        <s:dataProvider>
                                                            <s:ArrayList>

                                                                <fx:String>Tu</fx:String>
                                                                <fx:String>Vous</fx:String>
                                                            </s:ArrayList>
                                                        </s:dataProvider>
                                                    </s:ComboBoxGridItemEditor>
                                                </fx:Component>
                                            </s:itemEditor>
                                        </s:GridColumn>

                                    </s:ArrayList>
                                </s:columns>
                            </s:DataGrid> 
```

但任何工作。

第一个示例创建 flex 错误，第二个，第一列是不可见的。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T04:17:47.973

实际上您不能在 GridColumn 中使用百分比值，但是您可以使用数据绑定来根据 DataGrid 宽度动态计算列宽，如下所示。

```
<s:DataGrid id="_dg" width="500">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn width="{this._dg.width * 0.1}" headerText="Col 1" />
            <s:GridColumn width="{this._dg.width * 0.2}" headerText="Col 2" />
            <s:GridColumn width="{this._dg.width * 0.3}" headerText="Col 3" />
            <s:GridColumn headerText="Col 4" />
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

干杯维克

# iphone - Objective-c 中 BOOL 值的只读获取器

> ID：10711199
> 
> 赞同：2
> 
> 时间：2012-05-22T22:47:53.610
> 
> 标签：iphone

所以我不确定我在这里做错了什么。我的班级基本上有两个属性：

```
@property (nonatomic, retain) NSString *name;
@property (nonatomic, readonly) BOOL isValid; 
```

逻辑应该是如果名称不为nil，则isValid=YES，否则为NO。所以我把它写成：

```
- (BOOL)isValid {
    if (self.name)   // breakpoint was set here.
       return YES;
    else 
       return NO;
} 
```

当我打印出描述时，我得到了相反的效果。不知道为什么。我试图通过调试器来解决这个问题。当它停止在这个方法上并且我查看 self 中的值时，我查看`name`属性并且值为 nil。但是在我进入之后，当调试器处于 return NO 语句时，它的`name`属性填充了正确的值。

我想我可以在基于该条件创建对象时设置 isValid 标志，但我认为如果它可以读取 self.name 是否为零，我就不必这样做。有人对如何解决此问题有任何想法吗？谢谢。

编辑：我的超类是 NSObject。

在同一个类中，还有另外两个属性，我基本上具有相同类型的逻辑。

```
@property (nonatomic, retain) NSString *AA;
@property (nonatomic, readonly) BOOL isCodingRegion;

- (BOOL)isCodingRegion {
    if (self.AA) {
        return YES;
    }
    else {
        return NO;
    }
} 
```

这个逻辑确实有效。

# wordpress - 您如何根据引用类别显示自定义单个 wp 模板？

> ID：10711200
> 
> 赞同：0
> 
> 时间：2012-05-22T22:47:59.283
> 
> 标签：wordpress, templates

当一篇文章被交叉索引时，你如何控制 wordpress 显示哪个自定义（基于类别）模板？乍一看似乎无法控制，但我确信有办法。

您是否将参数放入生成帖子链接的查询中，还是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:18:16.500

如果您尝试为特定类别显示某个模板，Wordpress 可以满足您的要求。只需创建一个名为“category-%slug%.php”的模板，将其粘贴到您的主题目录中，当您查看该类别时，您将看到您创建的模板。

[有关 Wordpress 模板层次结构的更多信息](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)

# php - JQueryUI 模态对话框；与动态图像一起使用

> ID：10711202
> 
> 赞同：0
> 
> 时间：2012-05-22T22:48:03.440
> 
> 标签：php, jquery-ui, dynamic, modal-dialog

我正在使用这样的 jQueryUI 对话框模式：

```
<div id="dialog-modal" title="Basic modal dialog">
    <img src="#" alt="Pictures" />
</div> 
```

我有一个 PHP **foreach**循环，可以在任何给定时刻显示三个图像图标。图像 url 在 MySQL 数据库中。图像本身包含在锚标记内，并显示为缩略图。`<a>`包含一个名为“theLink”的类。当您单击“theLink”（实质上是单击图片）时，jQuery 知道会打开对话框。

我希望通过单击图像可以显示比缩略图大得多的图像。然后它将图像链接动态传输到将显示它的模式对话框。`<body>`同样，标签下方有一个模态对话框 div（如上所示） 。这就是我要找的：

当您单击“theLink”时，它将从 img 中获取 PHP 生成的图像链接，并使用它来替换模态 div 中的“#”。

```
<a> <img src="PHP GENERATED" /> </a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T23:40:59.970

我通过了解 jQuery 基础知识找到了答案。

我必须在 php 生成的图像中创建一个名为 ImageLink 的类。我必须使用一个类，而不是一个 ID，因为这个类会重复三次，因为我一次显示三个缩略图。

关键字“this”很重要，因此我可以指向特定的 imageLink 类。

```
 <a><img src="PHP GENERATED" class="imageLink" /></a> 
```

然后，在 jQuery 中：

```
 var realImage = $(this).find('.imageLink').attr("src");
    $('#popUpImage').attr('src', realImage);
    $('#dialog-modal').dialog('open'); 
```

# database - 如何检查隔离级别？

> ID：10711204
> 
> 赞同：2
> 
> 时间：2012-05-22T22:48:07.177
> 
> 标签：database, performance, isolation-level

如何检查我的 oracle DB 中设置的 IL。我该如何改变它？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T10:52:49.057

设置隔离级别

> 对于**只读事务**隔离级别

隔离级别可以设置为**事务级别：**

```
SET TRANSACTION ISOLATION LEVEL READONLY; 
```

对于**会话级别：**

```
ALTER SESSION SET ISOLATION_LEVEL READONLY; 
```

> 对于**Serializable Transaction** 隔离级别

**交易级别：**

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE; 
```

**会话级别：**

```
ALTER SESSION SET ISOLATION_LEVEL SERIALIZABLE; 
```

> 对于**已提交读事务** 隔离级别

**交易级别：**

```
SET TRANSACTION ISOLATION LEVEL READ COMMITTED; 
```

**会话级别：**

```
ALTER SESSION SET ISOLATION_LEVEL READ COMMITTED; 
```

**要查找隔离级别：**

交易进行时：

```
SELECT s.sid, s.serial#,
   CASE BITAND(t.flag, POWER(2, 28))
      WHEN 0 THEN 'READ COMMITTED'
      ELSE 'SERIALIZABLE'
   END AS isolation_level
FROM v$transaction t 
JOIN v$session s ON t.addr = s.taddr AND s.sid = sys_context('USERENV', 'SID'); 
```

交易未进行时

```
declare 
   trans_id Varchar2(100);
begin
   trans_id := dbms_transaction.local_transaction_id( TRUE );
end; 
```

# version-control - TFS：为不同用户映射到同一文件夹

> ID：10711208
> 
> 赞同：1
> 
> 时间：2012-05-22T22:48:44.043
> 
> 标签：version-control, tfs

我们的团队在虚拟机上工作。这些机器具有相同的名称和共同的位置（d:\Build），每个人都在使用它。我们如何将不同人的工作空间映射到 TFS 中的同一位置？“用户 2”获取路径“d:\Build”已映射到工作区；\ 尝试映射到同一位置时出错。一些论坛条目指向使用“连接点”，但这些条目似乎不是很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:19:11.003

这是[junction 实用程序](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)的链接（它是 Windows 用户的符号链接）。我理解您的设置的方式是，您需要为每个用户创建唯一的文件夹，然后创建一个与“D:\Build”的连接。

# php - 原则 2：错误：类“..\..”没有名为“...”的字段或关联

> ID：10711211
> 
> 赞同：4
> 
> 时间：2012-05-22T22:49:02.170
> 
> 标签：php, orm, doctrine-orm, dql

在搜索时，我想出了很多人有类似问题的结果，但它们总是与关联错误有关。我正在尝试将一个简单的文本字段添加到数据库中的表中，并且，对于我的生活，我无法弄清楚这次有什么不同 - 当我之前多次没有问题地完成它时。

我已经为 4 个不同的实体添加了一个“record_checksum”字段，但我将只使用一个，这里是为了简化示例。（所有 4 个都发生相同的错误）。

这是我的 Entity\Cloud.php 文件的示例，底部添加了“ **record_checksum ”字段：**

```
use Doctrine\ORM\Mapping as ORM;

namespace Entity;

/**
 * Entity\Cloud
 *
 * @orm:Table(name="cloud")
 * @orm:Entity
 * @orm:HasLifecycleCallbacks
 */
class Cloud
{
    /**
     * @var integer $id
     *
     * @orm:Column(name="id", type="integer", length="13")
     * @orm:Id
     * @orm:GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var float $position_x
     *
     * @orm:Column(name="position_x", type="float", length=9)
     */
    private $position_x;

    /**
     * @var float $position_y
     *
     * @orm:Column(name="position_y", type="float", length=9)
     */
    private $position_y;

    /**
     * @var string $commit_group
     *
     * @orm:Column(name="commit_group", type="string", length=32, nullable=true)
     */
    private $commit_group;

    /**
     * @var string $commit_key
     *
     * @orm:Column(name="commit_key", type="string", length=13, nullable=true)
     */
    private $commit_key;

    /**
     * @var string $record_checksum
     *
     * @orm:Column(name="record_checksum", type="string", length=32, nullable=true)
     */
    private $record_checksum; 
```

该类的其余部分是 getter/setter 方法，因此我将其省略。要查看整个实体文件，我将其放在 pastebin ( [http://pastebin.com/9LheZ6A1](http://pastebin.com/9LheZ6A1) ) 上。几周前我刚刚添加的“commit_key”，没有任何问题。

现在我更新架构：

```
$ doctrine orm:schema-tool:update --dump-sql
ALTER TABLE cloud ADD record_checksum VARCHAR(32) DEFAULT NULL;
$ doctrine orm:schema-tool:update --force
Updating database schema...
Database schema updated successfully! 
```

我验证了这个字段现在存在于数据库表中。

但是，当我像这样运行一个简单的 DQL 查询时：

```
$dql =  "SELECT c.id AS id, c.commit_key AS key, c.record_checksum AS checksum ".
                "FROM Entity\\Cloud c WHERE c.commit_group = :commit_group"; 
```

我得到错误：

```
 [Semantical Error] line 0, col 42 near 'record_checksum': Error: Class Entity\Cloud has no field or association named record_checksum, 
```

我已经把头撞在墙上有一段时间了。我确定我忽略了一些非常愚蠢的事情。任何帮助是极大的赞赏！-缺口

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:14:56.013

尝试：

1.  清除任何可能包含配置或 PHP 代码的缓存。
2.  如果第一个解决方案不起作用，请重命名字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T21:23:29.100

转到有`Entity`问题的并检查变量名称。如果它类似于`TESTVar`，并且您尝试`testVar`在查询中使用，它将给您错误，即变量不存在于`Entity`.

将查询更改为使用`TESTVar`而不是`testVar`，它将起作用。

# binding - 我可以在 Ninject 中对我的对象进行分段配置吗？

> ID：10711212
> 
> 赞同：0
> 
> 时间：2012-05-22T22:49:02.707
> 
> 标签：binding, configuration, scope, ninject, conventions

我们有几个案例，我们在代码库中提供服务，我们知道代码库中服务提供者的范围和生命周期规则。我们希望在库本身中配置该信息，而不必将该知识冒泡到组合根。

我一直无法弄清楚是否可以使用当前版本的 Ninject 来实现这一点。

```
using System;
using System.Diagnostics.CodeAnalysis;
using Ninject;
using Ninject.Extensions.Conventions;
using NUnit.Framework;
using Ninject.Modules;

[TestFixture]
public class Spike
{
    private IKernel kernel;

    [SetUp]
    public void SetUp()
    {
        this.kernel = new StandardKernel();

        this.kernel.Load(new Registry());

        this.kernel.Bind(x => x
            .FromThisAssembly()
            .SelectAllClasses()
            .BindAllInterfaces()
            );
    }

    [TearDown]
    public void TearDown()
    {
        Thing1.ResetCounts();
    }

    [Test]
    public void GetThing1AndThing2()
    {
        // arrange
        var thing1 = this.kernel.Get<Thing1>();
        var thing2 = this.kernel.Get<Thing1>();

        // act
        thing1.DoTheWork();
        thing2.DoTheWork();

        // assert
        Assert.AreEqual(1, Thing1.ConstructorCount, "wrong number of constructor invocations");
        Assert.AreEqual(2, Thing1.DoTheWorkCount, "wrong number of method invocations");
    }

    [Test]
    public void GetIThing1AndIThing2()
    {
        // arrange
        var thing1 = this.kernel.Get<IThing1>();
        var thing2 = this.kernel.Get<IThing1>();

        // act
        thing1.DoTheWork();
        thing2.DoTheWork();

        // assert
        Assert.AreEqual(1, Thing1.ConstructorCount, "wrong number of constructor invocations");
        Assert.AreEqual(2, Thing1.DoTheWorkCount, "wrong number of method invocations");
    }

    public class Registry : NinjectModule
    {
        public override void Load()
        {
            Bind<Thing1>().ToSelf().InSingletonScope();
        }
    }

    public interface IThing1
    {
        void DoTheWork();
    }

    public class Thing1 : IThing1
    {
        public static int ConstructorCount { get; set; }
        public static int DoTheWorkCount { get; set; }

        public Thing1()
        {
            Console.WriteLine("Thing1.ctor underway");
            ++Thing1.ConstructorCount;
        }

        public void DoTheWork()
        {
            Console.WriteLine("Thing1.DoTheWork underway");
            ++Thing1.DoTheWorkCount;
        }

        public static void ResetCounts()
        {
            Thing1.ConstructorCount = 0;
            Thing1.DoTheWorkCount = 0;
        }
    }
} 
```

在这个测试用例中，图书馆由`Registry`、`Thing1`和`IThing1`类表示。库的用户是测试夹具，该`Spike.SetUp()`方法显示了我们希望库用户编写的理想代码（他们将传递包含 dll 的路径而不是新建`Registry`对象）。

使用编写的代码，`Thing1`多次获取服务会`Spike.GetThing1AndThing2()`表现出所需的单例行为。`Thing1`通过其发布的接口多次获取服务`Spike.GetIThing1AndIThing2()`不会表现出单例行为，而是构造两个单独的`Thing1`对象。

那么是否可以按照我的要求做：在 DLL 本身中指定单例行为，同时在形成组合根时执行扫描？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:39:53.013

您需要引入约定。例如，添加一个指定范围的属性或使用命名约定，以便您可以从名称中识别范围。

然后正确设置绑定约定。例如

```
this.kernel.Bind(x => x
    .FromThisAssembly()
    .SelectAllClasses()
    .WithAttribute<SingletonAttribute>()
    .BindAllInterfaces()
    .Configure(binding => binding.InSingletonScope());

this.kernel.Bind(x => x
    .FromThisAssembly()
    .SelectAllClasses()
    .WithAttribute<TransientAttribute>()
    .BindAllInterfaces()); 
```

# java - 在 JPanel 上绘制字符串

> ID：10711214
> 
> 赞同：0
> 
> 时间：2012-05-22T22:49:23.237
> 
> 标签：java, constructor, applet, repaint, drawstring

我有点麻烦。我正在尝试从绘画方法（Graphics g）中绘制一个字符串（toString（）），我认为有两个主要问题：

1) 当调用 Repaint 时，它似乎没有响应。

2）当我尝试从 obj 调用时。在构造函数中制作，我得到一个“Applet”未初始化错误。

这可能是一个初学者的错误，但任何帮助都非常感谢..这是我第一次在这个网站上发帖。

这是我有问题的小程序的代码：

```
 import java.awt.*;
 import javax.swing.*;
 import javax.swing.event.*; 
 import java.awt.event.*;
 import java.util.*;
 import java.lang.*;

 /**
 *
 *
 */
public class GradeBookApp extends JApplet
implements ActionListener
{
private JRadioButton jrbadd,jrbdel,jrbupdate,jrbsortgrade,jrbsortname;
    private JPanel select,drawselect,infocore;
    private JButton operate;
    private JLabel nameprint;
    private int numstu;
    private Student[] list; // Not set in init..

   public void init(){

   JPanel select = new JPanel();
   select.setLayout(new GridLayout(2,3));

  JPanel drawselect = new JPanel();
  drawselect.setBackground(Color.pink);

  JPanel infocore = new JPanel();
  infocore.setBackground(Color.red);

  jrbadd = new JRadioButton("Add Student ");
  select.add(jrbadd);

  jrbdel = new JRadioButton("Delete Student ");
  select.add(jrbdel);

  jrbupdate = new JRadioButton("Update Student ");
  select.add(jrbupdate);

  jrbsortgrade = new JRadioButton("Sort: Grade");
  select.add(jrbsortgrade);

  jrbsortname = new JRadioButton("Sort: Name");
  select.add(jrbsortname);

  operate = new JButton("Start... ");
  operate.addActionListener(this);
  operate.setBackground(Color.magenta);
  select.add(operate);

  ButtonGroup gr = new ButtonGroup();
  gr.add(jrbadd);
  gr.add(jrbdel);
  gr.add(jrbupdate);
  gr.add(jrbsortgrade);
  gr.add(jrbsortname);

  Container c= getContentPane();

  c.add(select,BorderLayout.NORTH);   
  c.add(drawselect,BorderLayout.CENTER);
  c.add(infocore,BorderLayout.SOUTH);

}

public void actionPerformed(ActionEvent e){
   if(operate.isSelected()){
    repaint();
  }
}

public void StudentList(){

 list = new Student[30];

 numstu = 9;

 list[0] = new Student("Moba Fett",77.5,'M',1981);
 list[1] = new Student("Marion Silver",45.3,'F',2000);
 list[2] = new Student("Tom Highlander",99.1,'M',1986);
 list[3] = new Student("Ross Scott",74.2,'M',1971);
 list[4] = new Student("Jon Smith",53.1,'M',1945);
 list[5] = new Student("Jade Cerion",100.0,'F',2007);
 list[6] = new Student("Jorge Bush",0,'M',2008);
 list[7] = new Student("Tom Fulp",89.2,'M',1981);
 list[8] = new Student("Rose DimWitt",0.2,'F',1912);
 list[9] = new Student("Arya Stark",91.9,'F',8763);

}

public void delete(){

}

public void update(){

}

public void add(){

}

public void sortgrade(){

}

public void sortname(){

}

 public void paint (Graphics g){

    super.paint(g);

    int i = 0; // local
    int x = 100; // local
    int y = 100; // local

 // numstu called from private list...9

   for(i=0;i<=numstu;i++){

  if(list[i].GetGPA()>65){    
   g.setColor(Color.green);
   g.drawString(list[i].toStr(),x,y);

  }
 else if(list[i].GetGPA()<65){
    g.setColor(Color.red);
    g.drawString(list[i].toStr(),x,y);

    }

   y=y+10;

   }

 }

} 
```

这是构造函数：

```
public class Student
 {
private String name;
private double gpa;
private char gender;
private int year;

public Student(){
    name = "John Doe";
    gpa = 100;
    gender = 'u';
    year = 1972;
}

public Student(String n,double gp,char g,int y){
    name=n;
    gpa=gp;
    gender=g;
    year=y;

}

public String GetName(){
    return name;
}

public double GetGPA(){
    return gpa; 
}

public char GetGender(){
   return gender; 
}

public int GetYear(){
    return year;
}

public void ChangeName(String n){
    name = n;
}

public void ChangeGpa(double gp){
    gpa = gp;
}

public void ChangeGender(char g){
    gender = g;
}

public void ChangeYear(int y){
    year = y; 
}

  public String toStr(){
    String f = name.substring(0,name.indexOf(" "));
    String l = name.substring(name.indexOf(" "), name.length());

    String n =(l+","+f+" "+gender+" "+year+" "+gpa);

    return n;
}

private int find(int amountofstudents,Student[] list){

   return 1337; // unf.
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:51:36.163

这里有几个问题：

1.  学生列表永远不会初始化，因为您从未调用过您的方法`StudentList()`。例如，您可以在`init()`方法中调用它。顺便说一句，`initStudentList()`这将是一个更好的名字。

2.  变量`numstu`应该初始化为10，因为这里有十个学生（从索引0到9）

3.  for 循环应该是这样的（我们从 0 循环到 9）： `for(i=0;i<numstu;i++){`

完成这些操作后，学生将正确显示在 JPanel 上。

# sql - 输出完整的连续值范围

> ID：10711220
> 
> 赞同：0
> 
> 时间：2012-05-22T22:50:34.807
> 
> 标签：sql, sql-server, sql-server-2008

我有一个 sql 查询：

```
 SELECT
  TAT,
  SUM(CASE WHEN [Month Entered] = 1 THEN 1 ELSE 0 END) JAN,
   SUM(CASE WHEN [Month Entered] = 2 THEN 1 ELSE 0 END) FEB,
   SUM(CASE WHEN [Month Entered] = 3 THEN 1 ELSE 0 END) MAR,
   SUM(CASE WHEN [Month Entered] = 4 THEN 1 ELSE 0 END) APR,
   SUM(CASE WHEN [Month Entered] = 5 THEN 1 ELSE 0 END) MAY,
   SUM(CASE WHEN [Month Entered] = 6 THEN 1 ELSE 0 END) JUN,
   SUM(CASE WHEN [Month Entered] = 7 THEN 1 ELSE 0 END) JUL,
   SUM(CASE WHEN [Month Entered] = 8 THEN 1 ELSE 0 END) AUG,
   SUM(CASE WHEN [Month Entered] = 9 THEN 1 ELSE 0 END) SEP,
   SUM(CASE WHEN [Month Entered] = 10 THEN 1 ELSE 0 END) OCT,
   SUM(CASE WHEN [Month Entered] = 11 THEN 1 ELSE 0 END) NOV,
   SUM(CASE WHEN [Month Entered] = 12 THEN 1 ELSE 0 END) [DEC]

  FROM
  [SalesDWH].[dbo].[TurnAround]
  where DATEPART(yyyy,[datetime entered])=2010
  GROUP BY TAT
  ORDER BY 1; 
```

这是它返回的内容：

```
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
| TAT | JAN | FEB | MAR | APR | MAY | JUN | JUL | AUG | SEP | OCT | NOV | DEC |
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
|   0 |   0 |   0 |   0 |   3 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |
|   1 |   1 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |
|   7 |   0 |   0 |   0 |   0 |   1 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |
|  18 |  28 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |   0 |
|  19 |  39 |   0 |   0 |   0 |   0 |   1 |   0 |   0 |   0 |  53 |   0 |   0 |
|  20 | 106 |   0 |   0 |   0 |   0 |   0 |   2 |  17 |   0 |   1 |   2 |   0 |
|  21 | 113 |  12 |   0 |   0 |   0 |  22 |   1 |  81 | 137 |  27 |   1 | 110 |
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+ 
```

我希望输出为：

```
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
| TAT | JAN | FEB | MAR | APR | MAY | JUN | JUL | AUG | SEP | OCT | NOV | DEC |
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
|   0 |     |     |     |   3 |     |     |     |     |     |     |     |     |
|   1 |   1 |     |     |     |     |     |     |     |     |     |     |     |
|   2 |     |     |     |     |     |     |     |     |     |     |     |     |
|   3 |     |     |     |     |     |     |     |     |     |     |     |     |
|   4 |     |     |     |     |     |     |     |     |     |     |     |     |
|   5 |     |     |     |     |     |     |     |     |     |     |     |     |
|   6 |     |     |     |     |     |     |     |     |     |     |     |     |
|   7 |     |     |     |     |   1 |     |     |     |     |     |     |     |
|   8 |     |     |     |     |     |     |     |     |     |     |     |     |
|   9 |     |     |     |     |     |     |     |     |     |     |     |     |
|  10 |     |     |     |     |     |     |     |     |     |     |     |     |
|  11 |     |     |     |     |     |     |     |     |     |     |     |     |
|  12 |     |     |     |     |     |     |     |     |     |     |     |     |
|  13 |     |     |     |     |     |     |     |     |     |     |     |     |
|  14 |     |     |     |     |     |     |     |     |     |     |     |     |
|  15 |     |     |     |     |     |     |     |     |     |     |     |     |
|  16 |     |     |     |     |     |     |     |     |     |     |     |     |
|  17 |     |     |     |     |     |     |     |     |     |     |     |     |
|  18 |  28 |     |     |     |     |     |     |     |     |     |     |     |
|  19 |  39 |     |     |     |     |   1 |     |     |     |  53 |     |     |
|  20 | 106 |     |     |     |     |     |   2 |  17 |     |   1 |   2 |     |
|  21 | 113 |  12 |     |     |     |  22 |   1 |  81 | 137 |  27 |   1 | 110 |
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+ 
```

请注意，所有`0`' 都已被删除，并且该`TAT`列是连续的 0,1,2,3,4,......

**我如何强制这两个条件**？

对于 0 到 191 之间的 TAT 值，我需要这个。

**对于 192 和更大的值，我希望 192 处的 TAT 是 192 和更大的所有值的总和**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:12:33.243

**编辑**新信息

```
;WITH d AS ( SELECT TAT = CASE WHEN TAT > 191 THEN 192 ELSE TAT END,
   SUM(CASE WHEN [Month Entered] = 1  THEN 1 ELSE 0 END) AS JAN,
   SUM(CASE WHEN [Month Entered] = 2  THEN 1 ELSE 0 END) AS FEB,
   SUM(CASE WHEN [Month Entered] = 3  THEN 1 ELSE 0 END) AS MAR,
   SUM(CASE WHEN [Month Entered] = 4  THEN 1 ELSE 0 END) AS APR,
   SUM(CASE WHEN [Month Entered] = 5  THEN 1 ELSE 0 END) AS MAY,
   SUM(CASE WHEN [Month Entered] = 6  THEN 1 ELSE 0 END) AS JUN,
   SUM(CASE WHEN [Month Entered] = 7  THEN 1 ELSE 0 END) AS JUL,
   SUM(CASE WHEN [Month Entered] = 8  THEN 1 ELSE 0 END) AS AUG,
   SUM(CASE WHEN [Month Entered] = 9  THEN 1 ELSE 0 END) AS SEP,
   SUM(CASE WHEN [Month Entered] = 10 THEN 1 ELSE 0 END) AS OCT,
   SUM(CASE WHEN [Month Entered] = 11 THEN 1 ELSE 0 END) AS NOV,
   SUM(CASE WHEN [Month Entered] = 12 THEN 1 ELSE 0 END) AS DEC
  FROM [SalesDWH].[dbo].[TurnAround]
  WHERE [datetime entered] >= '20100101'
    AND [datetime entered] <  '20110101'
  GROUP BY CASE WHEN TAT > 191 THEN 192 ELSE TAT END
),
n AS ( SELECT TOP (193) n = ROW_NUMBER() OVER (ORDER BY [object_id]) - 1
  FROM sys.all_columns ORDER BY [object_id]
)
SELECT TAT = n.n,
  JAN = COALESCE(RTRIM(NULLIF(JAN, 0)), ''),
  FEB = COALESCE(RTRIM(NULLIF(FEB, 0)), ''),
  MAR = COALESCE(RTRIM(NULLIF(MAR, 0)), ''),
  APR = COALESCE(RTRIM(NULLIF(APR, 0)), ''),
  MAY = COALESCE(RTRIM(NULLIF(MAY, 0)), ''),
  JUN = COALESCE(RTRIM(NULLIF(JUN, 0)), ''),
  JUL = COALESCE(RTRIM(NULLIF(JUL, 0)), ''),
  AUG = COALESCE(RTRIM(NULLIF(AUG, 0)), ''),
  SEP = COALESCE(RTRIM(NULLIF(SEP, 0)), ''),
  OCT = COALESCE(RTRIM(NULLIF(OCT, 0)), ''),
  NOV = COALESCE(RTRIM(NULLIF(NOV, 0)), ''),
  DEC = COALESCE(RTRIM(NULLIF(DEC, 0)), '')
FROM n LEFT OUTER JOIN d ON n.n = d.TAT 
ORDER BY n.n; -- do not use ordinal numbers for ORDER BY! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:19:48.583

首先，您需要为第一列创建一个包含所有值的表，并将数据表与它连接起来

然后你在这个之上做另一个查询（所以这个是子查询），每个月列将是

```
 case jan when 0 then '' else cast(jan as nvarchar) end jan 
```

# iphone - 从短信中收到的网址打开我的 iPhone 应用程序

> ID：10711222
> 
> 赞同：0
> 
> 时间：2012-05-22T22:51:07.053
> 
> 标签：iphone, objective-c, ios, ipad, sms

我想从通过短信接收到用户的 url 启动我的应用程序。

我如何实现它？

我的网址格式为： [https ://companyname.net/productname/?some_parameters_for_user](https://companyname.net/productname/?some_parameters_for_user)

我想提示用户在 safari 或我的应用程序中打开 url，根据他的选择，该应用程序将在 safari 或直接在本机应用程序中启动。

url 在 safari 中打开，但如何调用本机应用程序？并将用户带到应用程序中的特定页面？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:57:37.703

查看自定义 URL 方案。它在几个地方都有描述。这是“[高级应用技巧](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)”的链接

它在那里进行了描述，以及许多其他有用的想法。

# jquery-ui - 动态填充选择框 + jQuery UI 可排序重置

> ID：10711231
> 
> 赞同：0
> 
> 时间：2012-05-22T22:52:03.167
> 
> 标签：jquery-ui, list, dynamic, jquery-ui-sortable, drop-down-menu

`<ul>`我有一个选择框，它从列表中获取其选项值。该列表可通过 jQuery UI 可排序功能进行更改，并且当您对项目进行不同排序时，选择框会动态更新。

我已经实现了这个功能，代码很脏，但它可以完成工作：http: [//jsfiddle.net/trunkadelic/TtnTf/2/](http://jsfiddle.net/trunkadelic/TtnTf/2/)

我需要的是一个“重置”功能，它将列表（以及选择框）恢复到原来的值。我不知道如何解决这个问题，即使是朝着正确的方向轻推也会不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:13:23.633

在页面加载时，我会将列表的初始状态存储在 JavaScript 变量中。然后，当单击重置链接时，我会将状态恢复`<ul>`到页面加载时的状态。从那里您可以使用您已经必须更新选择菜单以匹配的相同方法。

我分叉了你的 jsFiddle 来展示这个 - [http://jsfiddle.net/g8GLw/](http://jsfiddle.net/g8GLw/)

# php - 用于下载 MySQL 表的 PHP 页面

> ID：10711234
> 
> 赞同：0
> 
> 时间：2012-05-22T22:52:44.307
> 
> 标签：php, mysql

有没有办法将excel数据导入数据表？我的要求是，我想将数据表数据导出到 xls/csv，进行批量更改并将其导入回数据表（mysql 后端）。这个导入有插件吗？？请指教。提前致谢。

我想在我的 php 网页上进行此导入和导出，而不是直接从 mysql 进行。基本上，我想为用户提供批量下载和上传数据的选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:01:05.893

您可以导出为 CSV：

```
SELECT *
INTO OUTFILE 'filename.csv'
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
FROM tablename 
```

您可以从 CSV 导入：

```
LOAD DATA LOCAL 
INFILE 'filaneme.csv' INTO TABLE tablename
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
(col1, col2, col3,...) 
```

**更新** 这是一般的想法 - 编写一个标题，遍历行，用 text/csv MIME-TYPE 返回它

```
$rsResults = mysql_query($sql, $db) or die(mysql_error());
$out = '';

$fields = mysql_list_fields('database','table',$db);
$columns = mysql_num_fields($fields);

for ($i = 0; $i < $columns; $i++) {
    $l=mysql_field_name($fields, $i);
    $out .= '"'.$l.'",';
}

$out .="\n";

while ($l = mysql_fetch_array($rsResults)) {
    for ($i = 0; $i < $columns; $i++) {
        $out .='"'.$l["$i"].'",';
    }
    $out .="\n";
}

header("Content-Disposition: attachment; filename=table.csv");
header("Content-type: text/csv");

echo $out;

exit; 
```

# ruby - right_aws 和 RMagick/mini_magick：无法从从 s3 抓取的图像中创建图像对象

> ID：10711241
> 
> 赞同：1
> 
> 时间：2012-05-22T22:53:07.143
> 
> 标签：ruby, amazon-s3, rmagick, minimagick, right-aws

我正在尝试从 amazon s3 获取图像，用 Rmagick 做一些事情，然后将图像上传回 s3。我正在尝试使用 right_aws 和 RMagick/mini_magick 来做到这一点。到目前为止，我还没有运气。通过使用命令行对其进行测试，Imagemagick 似乎已正确安装。

这是我目前正在尝试做的事情：

使用 right_aws 抓取图像并存储为 RightAws::Key：

```
s3 = RightAws::S3.new(ID, Secret)
bucket = s3.bucket( 'baneling')
key = RightAws::S3::Key.create(bucket, 'flower.jpg') 
```

然后我试图将 key.data 转换为图像文件。**如果我尝试使用以下代码使用 mini_magick**：

```
image = MiniMagick::Image.read(key.data) 
```

或者

```
image = MiniMagick::Image.read(key.public_link)
#key.public_link is public s3 url to image. i.e. https://s3.amazonaws.com/bucket.flower.jpg 
```

我收到此错误：

```
MiniMagick::Invalid: MiniMagick::Invalid
from /home/adnan/.rvm/gems/ruby-1.9.3-p194/gems/mini_magick-3.4/lib/mini_magick.rb:164:in `create' 
```

**如果我尝试使用 RMagick：**

```
Magick::Image.from_blob(key.data) 
```

或者

```
image = Magick::ImageList.new  
urlimage = open(key.public_link, 'rb')
image.from_blob(urlimage.read) 
```

我收到此错误：

```
Magick::ImageMagickError: no decode delegate for this image format `' @ error/blob.c/BlobToImage/360 
```

有人知道我在做什么错吗？我尝试了各种图像，包括 jpg 和 png。我正在使用 rails 3.2.3、ruby 1.9.3p194、ubuntu 11.04、right_aws 3.0.4、rmagick 2.13.1、mini_magick 3.4。

# windows - Windows 上的检查点（快照/恢复）库？

> ID：10711243
> 
> 赞同：2
> 
> 时间：2012-05-22T22:53:10.097
> 
> 标签：windows, serialization, resume, checkpoint

引用 Wikipedia 的话，[检查点](http://en.wikipedia.org/wiki/Application_checkpointing)“基本上包括存储当前应用程序状态的快照，然后在出现故障时使用它来重新启动执行。”

我需要检查点并恢复**C++**科学应用程序（我们编写的）。该程序是**单线程的**，不依赖于其他正在运行的应用程序：**没有 GUI、没有网络、**没有管道、没有 fork 等。它所做的只是计算和文件 I/O。

在 Linux 上，[DMTCP](http://dmtcp.sourceforge.net/)非常适合我。它甚至不需要修改源代码或重新链接。BLCR 和 Condor 也支持 Linux 上的检查点。

在不久的将来，我将不得不在 Windows 上运行该应用程序。我四处搜索，找不到任何适用于 Windows 的检查点库。原则上，我可以修改应用程序，以便它根据请求将其状态转储到磁盘上，并在下次运行时重新加载数据。但是，由于应用程序的复杂性，即使在序列化库的帮助下，这也需要付出很多努力。

那么，**Windows 上是否有任何 C/C++ 检查点库？**如果库需要对我的代码进行修改，那就太好了。理想情况下，该库将允许我**根据请求**检查点（例如通过发送信号/消息），而不是只能在代码中的特定点保存状态。

（我知道[类似的问题](https://stackoverflow.com/questions/10498897/)说检查点通常是不可能的。但是，这对我来说是可能的，而且我一直在 Linux 上这样做。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:45:22.457

尝试将您的程序构建为共享库并从内部因子或 sbcl 调用它。然后使用其中任何一个的内置检查点功能。

# linq - 方法 'Boolean In[Int32](Int32, Int32[])' 不支持对 SQL 的转换

> ID：10711244
> 
> 赞同：0
> 
> 时间：2012-05-22T22:53:25.007
> 
> 标签：linq, c#-4.0

我有以下方法：

```
public List<Alert> GetMonthlyAlertsByAccountID(Int32 AccountID, params int[] alertTypes)
        {
            List<Alert> result = new List<Alert>();

            using (NeuroLabLinqDataContext dc = conn.GetContext())
            {
                IEnumerable<Alert> alerts = (from a in dc.Alerts
                                             where a.AccountID == AccountID &&
                                             a.AlertTypeID.In(alertTypes)
                                             orderby ((DateTime)a.CreateDate).Month ascending
                                             select a).ToList();
            }

            return result;
        } 
```

使用扩展方法：

```
public static bool In<T>(this T t, params T[] values)
        {
            foreach (T value in values)
            {
                if (t.Equals(value))
                {
                    return true;
                }
            }
            return false;
        } 
```

其目的是仅返回具有某些 AlertTypeID 的项目。

结果是：

> 方法 'Boolean In[Int32](Int32, Int32[])' 不支持对 SQL 的转换。

我确信不必使用扩展方法就可以解决问题。有人可以指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T22:54:43.150

采用：

```
alertTypes.Contains(a.AlertTypeID) 
```

反而。

```
IEnumerable<Alert> alerts = (from a in dc.Alerts
     where a.AccountID == AccountID &&
     alertTypes.Contains(a.AlertTypeID)
     orderby ((DateTime)a.CreateDate).Month ascending
     select a).ToList(); 
```

# c++ - Eclipse C++ - 无法解析字符串类型

> ID：10711245
> 
> 赞同：1
> 
> 时间：2012-05-22T22:53:44.627
> 
> 标签：c++, eclipse, string

我正在尝试构建一个头文件 prog1.h，它目前看起来如下：

```
#ifndef PROG1_H_
#define PROG1_H_

#include <fstream>
#include <string>
#include <cstdlib>
#include <iostream>

using namespace std;

const int NUMGRADES = 5;

struct StudentInfo{
    string id;
    double avGrade;
    int grades[NUMGRADES];
};

int ReadGrades(istream & input, StudentInfo Info[]);

void HighestAverage(StudentInfo Info[], int numStudents, string & id, double & maxAv);

#endif /* PROG1_H_ */ 
```

但是，字符串标识符带有下划线，并且 Eclipse 说“字符串无法解析为类型”。我包含了所有内容并且正在使用标准命名空间，那么问题是什么？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:40:30.023

尝试执行 std::string 并删除 using。

# c++ - 移动到线程会导致问题

> ID：10711246
> 
> 赞同：3
> 
> 时间：2012-05-22T22:53:47.943
> 
> 标签：c++, macos, qt

我最近在以下问题中遇到了问题，即线程中的对象在线程被杀死之前没有被删除：

[即使删除线程，线程数也会增加很多](https://stackoverflow.com/questions/10184411/thread-count-increases-a-lot-even-when-deleting-the-threads)

我决定在删除之前将对象移动到主线程，如下所示：

```
void WorkspaceBase::deleteFinishedUploader() {
    FileUploader *fileUploader = qobject_cast<FileUploader*>(sender());

    if(fileUploader != NULL) {
        fileUploader->moveToThread(this->thread());
        fileUploader->deleteLater();
    }
} 
```

在 Windows 中，我从来没有收到任何警告，它似乎工作正常。现在在 OSX 中，我每次完成都会收到以下警告：

```
On Mac OS X, you might be loading two sets of Qt binaries into the same process. Check that all plugins are compiled against the right Qt binaries. Export DYLD_PRINT_LIBRARIES=1 and check that only one set of binaries are being loaded.
QObject::moveToThread: Current thread (0x102a07180) is not the object's thread (0x116428090).
Cannot move to target thread (0x102a07180) 
```

我不太确定问题是什么，但会尽量描述我的项目。

首先，我有一个共享的 dylib，供我的其他 dylib 和应用程序使用。另一个 dylib 使用 Shared.dylib 并包含将内容上传到 Internet 时的所有功能（QNetworkAccessManager 等）。然后我有我的应用程序，其中包括这个 dylib，以及 shared.dylib（其中包含一些帮助方法和解析器）。这些库以及来自 boost 和 qjson.framework 的 date_time.dylib 被添加到 .app-package。

一切都完美地构建和运行，只有当我尝试将 Uploader 对象移动到主线程时才会出现此问题。Uploader 对象是 App 可执行文件的一部分，不位于 .dylib 中（但它使用库进行上传）。

这里可能是什么问题？不确定我以前是否遇到过这个问题，我也不太确定我做了什么。如果我提供的信息还不够，我很乐意添加更多信息。当我不知道问题是什么时，很难知道在哪里看。

谢谢！

**编辑：**

这些是我在运行时加载的库：

```
dyld: loaded: /Users/me/Documents/MyApp/MyApp.app/Contents/MacOS/./MyApp
dyld: loaded: /Users/me/Documents/MyApp/MyApp.app/Contents/MacOS/qjson.framework/Versions/0/qjson
dyld: loaded: /Users/me/Documents/MyApp/MyApp.app/Contents/MacOS/libboost_date_time.dylib
dyld: loaded: /Users/me/Documents/MyApp/MyApp.app/Contents/MacOS/libQt.Shared.1.dylib
dyld: loaded: /Users/me/Documents/MyApp/MyApp.app/Contents/MacOS/libQt.Framework.Network.1.dylib
dyld: loaded: /Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Versions/4/QtGui
dyld: loaded: /Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtCore.framework/Versions/4/QtCore
dyld: loaded: /Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtNetwork.framework/Versions/4/QtNetwork
dyld: loaded: /usr/lib/libstdc++.6.dylib
dyld: loaded: /usr/lib/libSystem.B.dylib
dyld: loaded: /usr/lib/libz.1.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
dyld: loaded: /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
dyld: loaded: /System/Library/Frameworks/Security.framework/Versions/A/Security
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
dyld: loaded: /usr/lib/system/libmathCommon.A.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
dyld: loaded: /usr/lib/libbsm.0.dylib
dyld: loaded: /usr/lib/libicucore.A.dylib
dyld: loaded: /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
dyld: loaded: /usr/lib/system/libkxld.dylib
dyld: loaded: /usr/lib/libauto.dylib
dyld: loaded: /usr/lib/libobjc.A.dylib
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
dyld: loaded: /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
dyld: loaded: /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS
dyld: loaded: /usr/lib/libsqlite3.dylib
dyld: loaded: /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
dyld: loaded: /usr/lib/libxslt.1.dylib
dyld: loaded: /usr/lib/libxml2.2.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
dyld: loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
dyld: loaded: /usr/lib/libcrypto.0.9.8.dylib
dyld: loaded: /System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib
dyld: loaded: /usr/lib/libcups.2.dylib
dyld: loaded: /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
dyld: loaded: /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
dyld: loaded: /usr/lib/libresolv.9.dylib
dyld: loaded: /Users/annatisch/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/lib/QtXml.framework/Versions/4/QtXml
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
dyld: loaded: /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/Versions/A/Help
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Print.framework/Versions/A/Print
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
dyld: loaded: /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
dyld: loaded: /System/Library/PrivateFrameworks/CoreUI.framework/Versions/A/CoreUI
dyld: loaded: /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
dyld: loaded: /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
dyld: loaded: /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
dyld: loaded: /System/Library/PrivateFrameworks/FamilyControls.framework/Versions/A/FamilyControls
dyld: loaded: /System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport
dyld: loaded: /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
dyld: loaded: /System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL
dyld: loaded: /System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLProgrammability.dylib
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib
dyld: loaded: /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
dyld: loaded: /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
dyld: loaded: /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
dyld: loaded: /System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation
dyld: loaded: /System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory
dyld: loaded: /System/Library/PrivateFrameworks/CommerceKit.framework/Versions/A/Frameworks/CommerceCore.framework/Versions/A/CommerceCore
dyld: loaded: /System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory
dyld: loaded: /System/Library/PrivateFrameworks/PasswordServer.framework/Versions/A/PasswordServer
dyld: loaded: /System/Library/Frameworks/DirectoryService.framework/Versions/A/DirectoryService
dyld: loaded: /usr/lib/libsasl2.2.dylib
dyld: loaded: /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
dyld: loaded: /usr/lib/liblangid.dylib
dyld: loaded: /usr/lib/libiconv.2.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ColorSync.framework/Versions/A/Resources/ColorSyncDeprecated.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXType.A.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libTrueTypeScaler.dylib
 QDir( 
dyld: loaded: /Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/plugins/bearer/libqcorewlanbearer.dylib
dyld: loaded: /System/Library/Frameworks/CoreWLAN.framework/Versions/A/CoreWLAN
dyld: loaded: /Users/me/QtSDK1.2.1/Desktop/Qt/4.8.1/gcc/plugins/bearer/libqgenericbearer.dylib
dyld: loaded: /usr/lib/libssl.0.9.8.dylib 
```

我看不到任何重复项，因此它必须与对象的移动有关。我如何能够将对象从主线程移动到主线程。我在某处读到出于安全原因这是不可能的，但我真的需要移动它以便可以完全删除它（这意味着它需要一个事件循环，而不是它当前的 QThread 会被杀死）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T00:08:56.360

从[QObject](http://qt-project.org/doc/qt-4.8/qobject.html#moveToThread)的文档中：

> 警告：这个函数不是线程安全的；当前线程必须与当前线程亲和性相同

所有者必须调用`moveToThread`以放弃对象的所有权，而不是另一个线程声称拥有该对象的所有权。也就是说，您必须从*拥有*`moveToThread`该对象的任何线程调用（默认情况下*创建*该对象）。另请注意，您不能移动具有父对象的对象。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-02T11:07:05.123

您还可以通过从对象的所有者线程执行它来将其移动到您的线程。

```
#include <thread>
#include <memory>
#include <condition_variable>
#include <QTimer>
#include <QThread>
#include <QApplication>

template <typename Func>
inline void runOnThread(QThread *qThread, Func &&func)
{
    QTimer *t = new QTimer();
    t->moveToThread(qThread);
    t->setSingleShot(true);
    QObject::connect(t, &QTimer::timeout, [=]()
    {
        func();
        t->deleteLater();
    });
    QMetaObject::invokeMethod(t, "start", Qt::QueuedConnection, Q_ARG(int, 0));
}

void moveToThread(QObject *ptr, QThread *targetThrd=QThread::currentThread())
{
    std::mutex mt;
    std::condition_variable_any cv;
    runOnThread(ptr->thread(),[&]
    {
        ptr->setParent(NULL);
        ptr->moveToThread(targetThrd);
        cv.notify_one();
    });
    cv.wait(mt);
} 
```

你只需要打电话

```
moveToThread( fileUploader, this->thread()); 
```**

# php - 中定义的变量 我有一个用户填写公司信息的表格。然后我使用 jquery 来验证地址，在 submitHandler 中我有以下脚本来获取已验证地址的 long/lat，但 long/lat 没有与表单一起提交。（我目前在链接中硬编码了用于测试目的的 long/lat 查找的地址。）另外请注意，您需要为 Google Maps API v3 提供您自己的 API 问问题 问问题 2012-05-22T22:54:51.123 80 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个用户填写公司信息的表格。然后我使用 jquery 来验证地址，在 submitHandler 中我有以下脚本来获取已验证地址的 long/lat，但 long/lat 没有与表单一起提交。（我目前在链接中硬编码了用于测试目的的 long/lat 查找的地址。）另外请注意，您需要为 Google Maps API v3 提供您自己的 API 密钥，您可以在此处获取。 注意：我在使用 Stack Overflow 的语法荧光笔时遇到困难，因此从 PastBin 链接代码。 这是 long/lat 的脚本 由于我可以发布的链接数量有限，我希望在这篇文章之后发布指向我其余代码的链接。 将两个隐藏的输入添加到 lat 和 lng 的表单中，然后在地理编码完成时填写这些输入的值。 phpjqueryhtmljquery-validategoogle-geocoding-api 4 1 回答 1 This answer is useful 0 将两个隐藏的输入添加到 lat 和 lng 的表单中，然后在地理编码完成时填写这些输入的值。 于 2012-05-22T23:11:26.717 回答 Related 2 php - 在 Laravel 4 中添加自定义字段/元数据以记录 1 libgdx - 如何将 libGdx 中的曲线墙添加到世界中？ 1 php - Phonegap + Facebook + PHP 后端：Facebook 用户登录 2 log4j - org.apache.log4j.RollingFileAppender 和 org.apache.log4j.rolling.RollingFileAppender 的区别 2 c# - 尝试设置本机属性时抛出 RunTimebinderException 的动态关键字 0 javascript - (storing jQuery Objects) How big is each jQuery object, is it a bad idea to store these objects? 1 php - MySQL 查找加入 3 个表 2 linux - how to kill processes on mac os x over ssh to linux 1 sql - 返回多个 SQL 表的行数列表 2 php - Make PHP variable have html link as its value Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10711250
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, jquery, html, jquery-validate, google-geocoding-api

我有一个用户填写公司信息的表格。然后我使用 jquery 来验证地址，在 submitHandler 中我有以下脚本来获取已验证地址的 long/lat，但 long/lat 没有与表单一起提交。（我目前在链接中硬编码了用于测试目的的 long/lat 查找的地址。）另外请注意，您需要为 Google Maps API v3 提供您自己的 API 密钥，您可以在[此处获取。](https://code.google.com/apis/console)

注意：我在使用 Stack Overflow 的语法荧光笔时遇到困难，因此从 PastBin 链接代码。

[这是 long/lat 的脚本](http://pastebin.com/zKTiqhAW)

* * *

由于我可以发布的链接数量有限，我*希望*在这篇文章之后发布指向我其余代码的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:11:26.717

将两个隐藏的输入添加到 lat 和 lng 的表单中，然后在地理编码完成时填写这些输入的值。

# javascript - 如何在 ASPX 页面后面的代码中使用 POST 设置图像的 url

> ID：10711251
> 
> 赞同：-1
> 
> 时间：2012-05-22T22:54:58.720
> 
> 标签：javascript, asp.net, forms, post, imageurl

```
private void DisplayImages(string imageFile)
{
        Image pImage = new Image();
        pImage.ImageUrl =  imageFile;
        this.Controls.Add(pImage);

} 
```

以上是当前代码，但图像未显示，我想检查 URL 值。我有一个 javascript 函数，它将检查 URL 并返回 URL。我需要做的就是使用所谓的 POST 将从 javascript 返回的 URL 分配给上面的图像。如何在上述函数的代码隐藏中实现这一点？

请建议。

更新 1：我忘了添加“this.Controls.Add(pImage);”。我已经在上面添加了。

更新 2：我在页面的 onLoad 期间创建图像控件（如代码所示）。此 URL 通常较长，并且来自 XML。我在分配给图像控件之前打印了 URL 值。

现在由于某种原因，图像不会在浏览器中呈现。刚才我发现即使是在单独的浏览器中呈现的那个 URL 也会给我 HTTP 403。构建那个 URL 并存储在 XML 中的人告诉我应该使用 Javascript 并通过发送这个 URL 来做一个 POST。我需要知道如何在下面的代码中执行 javascript，以便在 POST 方法之后分配图像 URL。希望这可以澄清。

**更新 3**：下面是 ASPX 页面中的 Javascript。

```
 <script type="text/javascript">
        // Open URL in new window with a a post instead of the get
        function posturl(url) {
            alert("I am here");
            var qsBegin = url.indexOf("?");
            var qsPattern = new RegExp("[?&]([^=]*)=([^&]*)", "ig");
            var match = qsPattern.exec(url);
            var params = new Array();

            while (match != null) {
                // matched text: match[0]
                // match start: match.index
                // capturing group n: match[n]
                var matchID = match[1];
                if ( matchID.charAt(0) == "&" ) {
                    matchID = matchID.substr(1);
                }

                if ( params[match[1]] != null && !(params[match[1]] instanceof Array) ) {
                    var subArray = new Array();
                    subArray.push(params[match[1]]);
                    subArray.push(unescape(match[2]));
                    params[match[1]] = subArray;
                } else if ( params[match[1]] != null && params[match[1]] instanceof Array ) {
                    params[match[1]].push(unescape(match[2]));
                } else {
                    params[match[1]]=unescape(match[2]);
                }   
                match = qsPattern.exec(url);
            }

            var myForm = document.createElement("form");
            //myForm.setAttribute("target", "_blank");
            myForm.method="post" ;
            myForm.action = url.substring(0,qsBegin) ;
            for (var k in params) {
                var myInput;
                // Check for params with the same name.
                if ( params[k] instanceof Array ) {
                    for ( var i=0; i<params[k].length; i++ ) {
                        myInput = createFormInput(k, params[k][i]);
                        myForm.appendChild(myInput) ;
                    }
                } else {
                    myInput = createFormInput(k, params[k]);
                    myForm.appendChild(myInput);
                }
            }

            document.body.appendChild(myForm) ;
            myForm.submit() ;
            document.body.removeChild(myForm) ;
            //return "did you get what you wanted";
        }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:56:20.040

您如何获取 URL 并将其设置为 Image 控件没有任何区别，使用 javascript 并回发 URL 没有任何意义，因为您已经在服务器端获得了该 URL，您应该将其设置为 Image 控件，假设网址有效。您应该做的第一件事是测试该 URL 是否有效，只需将其粘贴到浏览器中并查看它是否有效，否则您应该与为您提供该 URL 的人交谈。

顺便提一句。不要动态创建图像控件，在标记中创建它并在 DisplayImages 方法中分配 ImageUrl 属性，如果您必须在 OnInit 中动态地创建 ImageControls。

**更新 3 条评论：**

好吧，IMO 这太疯狂了，请不要冒犯:) 但是我可以看到这个 javascript 改变了你从 XML 获得的原始 URL，我认为你能做的最好的事情就是在 c# 中复制那个 Javascript 代码，例如。仅在服务器端使用 C# 对 URL 执行相同的操作。

问题在于您正在服务器上生成您的页面，其中包括用于图像控制的 URL，并且**在**您在服务器上生成整个页面之后，然后执行 javascript，然后更改图像控制的 Url 为时已晚。也许这个发布到服务器的方法对某些情况有好处，但对你的情况不太好。

**另一个更新**

好吧，Anirudh，在查看了更多该 javascript 之后，您似乎正在尝试使用**图像生成服务，您必须将参数发布到他们的服务，它会返回基于您在该 URL 中设置的参数生成的图像的 URL**，是吗？ ?

**如果是这样，您真的应该首先写下它**，您知道从您那里提取这些信息需要付出多少努力吗？请投入更多的精力来提问，最好删除这个问题并问另一个问题，但这次更好地描述你想要做什么。

# java - 如何向调用者线程发出 ExecutorService 已完成任务的信号

> ID：10711252
> 
> 赞同：4
> 
> 时间：2012-05-22T22:55:21.807
> 
> 标签：java, multithreading, concurrency, executorservice

从主线程：

```
executorService.submit(new Runnable() { ... }); 
```

现在，当 Runnable 完成执行时，是否有 Java 的标准方式来通知调用者线程它已完成执行，而无需创建新的接口/侦听器类？

如果信号可以从调用者线程发出，则加分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T23:00:09.200

`submit`返回一个[`Future`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)提交线程可以调用[`get`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#get%28%29)阻塞直到任务完成。

```
Future<?> future = executor.submit(new Runnable() { ... });
future.get(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T23:01:21.683

您可以阻止返回的 Future 对象的 get()，或对其进行轮询 isDone() 方法。或者，您可以使用具有[ListenableFuture](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/ListenableFuture.html)的 google guava 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T21:27:26.880

我不确定您的实现以及将同时运行多少线程，所以这可能行不通。您可以查看的一件事是通过调用知道如何更新所需的 UI 组件的方法来让 runnable 本身发出信号完成。

# objective-c - CGPDFPageRef 到 CGImageRef/NSBitmapImageRep 没有绘图

> ID：10711255
> 
> 赞同：0
> 
> 时间：2012-05-22T22:56:12.323
> 
> 标签：objective-c, cocoa, pdf, core-graphics, quartz-2d

我想在 Objective-C 中无损地将 PDF 转换为光栅图像。为此，不得将 PDF 绘制到上下文中。此外，我需要能够缩放 PDF。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:15:42.427

通过将 PDF 转换为光栅表示，您将其隐式绘制到位图图形上下文中。没有办法解决这个问题。为什么你认为你需要避免这样做？你在这里的最终目标是什么？

# semaphore - 实现一个信号量

> ID：10711258
> 
> 赞同：4
> 
> 时间：2012-05-22T22:56:19.797
> 
> 标签：semaphore, glib

似乎 glib 提供了互斥锁和条件作为线程同步原语，但是通用[信号量](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)呢（从某种意义上说它们支持原始的 P 和 V 操作？）我是否正确理解 a`GCond`等同于二进制信号量，`g_cond_signal`相当于`P`,`g_cond_wait`等价于`V`? 但是，不限于最大值 1 的信号量呢？

我想到了这样的事情：

```
struct semaphore {
  int n;
  GMutex sem_lock;
  GCond sem_cond;
} 
```

操作`P`现在看起来像这样：

```
void semaphore_P (struct semaphore *sem)
{
   g_mutex_lock(sem->sem_lock);
   while (sem->n == 0)
     g_cond_wait(sem->sem_cond, sem->sem_lock);
   --sem->n;
   g_mutex_unlock(sem->sem_lock);
} 
```

有没有更简单的方法可以从 glib中获取 pthreads 的功能`sem_wait`？`sem_post`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-31T16:19:50.560

[异步队列](https://developer.gnome.org/glib/stable/glib-Asynchronous-Queues.html)可以用作信号量：

*   初始化：GAsyncQueue *queue = g_async_queue_new();

*   V操作：g_async_queue_push(queue, GINT_TO_POINTER(1));

*   P操作：g_async_queue_pop(queue);

队列的大小用作信号量的计数器。g_async_queue_push 的第二个参数可以是除 NULL 之外的任何指针。但是，如果您想将信号量用于某些消费者/生产者任务，那么发送指向某些数据的指针将很有用。

在某些情况下，[线程池](https://developer.gnome.org/glib/stable/glib-Thread-Pools.html)可能更适合。

# java - 处理文档队列时在线程之间分配工作的最佳方法

> ID：10711264
> 
> 赞同：1
> 
> 时间：2012-05-22T22:57:02.853
> 
> 标签：java, multithreading

我们有一个应用程序处理一系列文档（基本上是在输入目录中找到的所有文档）。文件被一一读取，然后进行处理。该应用程序显然是线程的候选者，因为处理一个文档的结果完全独立于处理任何其他文档的结果。我的问题是如何划分工作。

拆分工作的一种明显方法是计算队列中的文档数量，除以可用处理器的数量并相应地拆分工作（例如，队列有 100 个文档，我有 4 个可用处理器，我创建 4 个线程和将队列中的 25 个文档提供给每个线程）。

但是，一位同事建议我可以为队列中的每个文档生成一个线程，然后让 java JVM 对其进行排序。我不明白这怎么可能。我确实知道第二种方法会产生更清晰的代码，但它是否与第一种方法一样有效（甚至更有效）？

任何想法将不胜感激。

艾略特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T23:01:21.790

> 我们有一个处理一系列文件的应用程序......如何划分工作？

你应该使用伟大的`ExecutorService`课程。像下面这样的东西会起作用。您将每个文件提交到线程池，它们将由 10 个工作线程处理。

```
 // create a pool with 10 threads
 ExecutorService threadPool = Executors.newFixedThreadPool(10);
 for (String file : files) {
     threadPool.submit(new MyFileProcessor(file));
 }
 // shutdown the pool once you've submitted your last job
 threadPool.shutdown();
 ...
 public class MyFileProcessor implements Runnable {
     private String file;
     public MyFileProcessor(String file) {
        this.file = file;
     }
     public run() {
        // process the file
     }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T23:09:06.387

一般来说，有三种方法可以在线程之间进行工作拆分。

首先，静态分区。这是您静态计算和划分文档的地方（即，不考虑处理每个文档需要多长时间）。这种方法非常有效（并且通常易于编码），但是，如果文档需要不同的时间来处理，它可能会导致性能下降。一个线程可能会意外地卡在所有长文档中，这意味着它将运行的时间最长，并且您的并行性将受到限制。

其次，动态分区（你没有提到这个）。产生固定数量的线程并让每个线程在一个简单的循环中工作：

```
While not done:
  Dequeue a document
  Process document 
```

通过这种方式，您可以避免负载不平衡。在处理每个文档之后，您会产生访问队列的开销，但只要每个文档的处理时间比队列访问时间长得多（因此，我认为您应该这样做），这将是可以忽略不计的。

第三，让 JVM 来安排你的工作。这是您跨越 N 个线程并让它们与之抗衡的地方。这种方法相当简单，但它的缺点是您将严重依赖 JVM 线程调度，如果 JVM 不能很好地完成它，它可能会非常慢。有太多的线程相互颠簸可能会非常慢。我希望 JVM 比这更好，所以这可能值得一试。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T23:01:04.833

不要为每个文档生成一个线程，而是在线程池中安排一个 Runnable 任务，该线程池具有与处理器一样多的线程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T23:01:52.587

您不需要以这种方式拆分文档。只需创建固定数量的工作线程（即使用 创建两个工作线程`Executors.newFixedThreadPool(2)`），每个工作线程一次只能处理一个文档。当它处理完一个文档后，它会从共享列表中获取一个新文档。

# python - 如何弄清楚为什么 cython-izing 代码会减慢它的速度？

> ID：10711266
> 
> 赞同：2
> 
> 时间：2012-05-22T22:57:20.700
> 
> 标签：python, optimization, cython

我们有一些用 python 编写的代码，它使用了一些实际上只是“结构”的类——这些类的实例只有一堆字段，没有方法。例子：

```
class ResProperties:
    def __init__(self):
        self.endDayUtilities = 0
        self.marginalUtilities = []
        self.held = 0
        self.idleResource = True
        self.experience = 0.0
        self.resSetAside = 0
        self.unitsGatheredToday = 0 
```

我们的主要代码使用了这个类的一堆实例。

为了加快代码速度，我想我会对这个类进行 cython 化：

```
cdef class ResProperties:

    cdef public float endDayUtilities
    cdef public list marginalUtilities
    cdef public int held
    cdef public int idleResource
    cdef public float experience
    cdef public int resSetAside
    cdef public int unitsGatheredToday

    def __init__(self):
        self.endDayUtilities = 0
        # etc: code just like above. 
```

但是，结果是代码现在运行速度慢了 25%！

我如何找出导致代码现在运行速度变慢的原因？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T23:06:47.903

您将这些类转换为 Cython，但仍在 Python 代码中使用它们？

将数据从 C 转换为 Python 并返回会产生开销。例如，您的`endDayUtilities`成员是 C 样式的浮点数。当您从 Python 访问它时，`float()`必须先构造一个对象，然后您的 Python 代码才能对其进行任何操作。当您从 Python 分配给该属性时，同样的事情必须反过来发生。

在我的脑海中，我估计这些数据转换的性能开销在......哦，大约 25%。:-)

在将一些使用该数据的*代码*移至 Cython之前，您不会看到性能提升。基本上，你在C-land停留的时间越长，你就会做得越好。来来回回会杀了你。

作为另一种更简单的方法，您可能想尝试 Psyco 或 PyPy 而不是 Cython。

# kohana - Kohana - $this->request->uri($params) 3.2 中的替代方案

> ID：10711268
> 
> 赞同：1
> 
> 时间：2012-05-22T22:57:47.520
> 
> 标签：kohana

在 KO 3.2 中是否有任何替代方法可以获取具有更改参数的 uri 作为 $this->request->uri($params) ？

例子：

```
//Kohana 3.1 ; current uri = articles/show/10 (<controller>/<action>/<id>)

$this->request->uri(array('id' => 11)); // return 'articles/show/11' 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:07:27.617

自 3.2 以来，没有“短”方法，因为现在`$this->request->uri()`返回当前 URI。`$this->request->route()->uri()`与您需要的所有参数一起使用：

```
$params  = array('id' => 11); // what params you want to change
$params += $this->request->param(); // current request params
$params += array(
    // note that $this->request->param() doesnt contain directory/controller/action values!
   'directory' => $this->request->directory(),
   'controller' => $this->request->controller(),
   'action' => $this->request->action(),
);
$uri = $this->request->route()->uri($params); 
```

当然，您可以为此创建一个特殊的方法（例如`$this->request->old_uri(array('id' => 11))`）。

这是该 API 更改的[问题链接](http://dev.kohanaframework.org/issues/3690)。

# jquery - Jquery - 插入新元素并制作动画

> ID：10711269
> 
> 赞同：1
> 
> 时间：2012-05-22T22:57:57.393
> 
> 标签：jquery, jquery-animate, element

例如。将元素插入 html，加载图像，（加载页面后！）内容

```
 $('.inner').append('<div class="class_name">blabla</div>');
 $('.class_name').animate('left += 30', 3000); // animate
 $('.class_name').remove(); 
```

我该如何解决这个问题。

现场直播对我没有帮助。（嗯，不好用吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:12:08.693

我不确定我是否理解您当前的问题，但您的代码存在一些问题：

请参阅此工作[小提琴示例！](http://jsfiddle.net/zuul/UvLKx/)

**查询**

```
// append
$('.inner').append('<div class="class_name">blabla</div>');

// animate the left
$('.class_name').animate({'left' : '+=30px'}, 3000, function() {

  // done animating, remove
  $('.class_name').remove();
}); 
```

# css - div 宽度不随内容增加

> ID：10711271
> 
> 赞同：1
> 
> 时间：2012-05-22T22:57:58.670
> 
> 标签：css, html, width

在我的应用程序中，我有 5 到 15 个字符的标签。由于这个原因，标签宽度不同，但周围的 div 会随着父母的宽度而不是内容的增加而增加。

我应该在 CSS 中添加什么以使 div 宽度适应其内容的宽度？

提前致谢！

**HTML**

```
<div class="tag">
    <a href="#">
        <span class="content">Test album</span>
    </a>
    <a href="#" class="album">X</a>
</div> 
```

**CSS**

```
div.tag {
    background: red;
} 
```

**测试用例**：http: [//jsfiddle.net/T4XJ3/1/](http://jsfiddle.net/T4XJ3/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:14:19.380

该`<div>`元素具有`display:block`，因此它将始终占据其容器的整个宽度。

您可以使用`display: inline-block`( [demo](http://jsfiddle.net/T4XJ3/5/) ) 使它们“灵活”。

这是你要找的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T23:19:28.397

内联块来救援！

```
div.tag {
  background: red;
  display: inline-block;
} 
```

来自 w3c 规范：

> 此值使元素生成内联级块容器。内联块的内部被格式化为块框，元素本身被格式化为原子内联级框。

简单来说，这意味着在您的 div 之外它的行为就像一个跨度（大小以适应内容、在内容中内联流动等），而在您的 div 内部它就像一个 div 通常会（用于定位、调整大小、填充， ETC。）。

# android - ListFragment 与兼容性库崩溃

> ID：10711272
> 
> 赞同：2
> 
> 时间：2012-05-22T22:58:01.260
> 
> 标签：android, android-fragments, android-listfragment

我正在使用面向 Android 2.2 的 Android 兼容性库。如果我将 ListFragment 与数组适配器一起使用，它可以正常工作，但如果我使用 simpleCursorAdapter，它会崩溃。这是我的 ListFragment 的代码：

```
public class Fragment1 extends ListFragment {

    private SQLiteDatabase db;
    private Cursor c;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
      super.onActivityCreated(savedInstanceState);
      DbManager dbm = new DbManager (getActivity(), "mainDb", null, 3);
      db = dbm.getWritableDatabase();
      c = db.rawQuery("SELECT * FROM navegacion", null);
      c.moveToFirst();

      ListAdapter adapter = new SimpleCursorAdapter( getActivity().getApplicationContext(), R.layout.list_item, c, new String[]{"texto"}, new int []{R.id.mainListText}, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
      setListAdapter(adapter);

    }
 } 
```

DbManager 是一个扩展 SqliteHelper 的类。我不明白为什么它不起作用。它曾经与 listActivity 一起使用。我什至将标志添加到构造函数中。当我实例化这个片段时，设备说应用程序已被中断并关闭它。有人知道我做错了什么吗？

先感谢您。

* * *

编辑。这是来自 logcat 的堆栈跟踪：

```
05-22 19:32:17.093: W/dalvikvm(12680): VFY: unable to resolve virtual method 4091: Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.onHoverEvent (Landroid/view/MotionEvent;)Z
05-22 19:32:17.103: W/dalvikvm(12680): VFY: unable to resolve virtual method 2878: Landroid/widget/FrameLayout;.getAlpha ()F
05-22 19:32:17.103: W/dalvikvm(12680): VFY: unable to resolve virtual method 2879: Landroid/widget/FrameLayout;.getTranslationY ()F
05-22 19:32:17.103: W/dalvikvm(12680): VFY: unable to resolve virtual method 2882: Landroid/widget/FrameLayout;.setAlpha (F)V
05-22 19:32:17.103: W/dalvikvm(12680): VFY: unable to resolve virtual method 2890: Landroid/widget/FrameLayout;.setTranslationY (F)V
05-22 19:32:17.123: W/dalvikvm(12680): VFY: unable to resolve virtual method 257: Landroid/content/pm/PackageManager;.getActivityLogo (Landroid/content/ComponentName;)Landroid/graphics/drawable/Drawable;
05-22 19:32:17.123: W/dalvikvm(12680): VFY: unable to resolve virtual method 254: Landroid/content/pm/ApplicationInfo;.loadLogo (Landroid/content/pm/PackageManager;)Landroid/graphics/drawable/Drawable;
05-22 19:32:17.173: W/dalvikvm(12680): VFY: unable to resolve virtual method 2660: Landroid/view/ViewGroup;.getAlpha ()F
05-22 19:32:17.173: W/dalvikvm(12680): VFY: unable to resolve virtual method 2666: Landroid/view/ViewGroup;.getTranslationX ()F
05-22 19:32:17.173: W/dalvikvm(12680): VFY: unable to resolve virtual method 2667: Landroid/view/ViewGroup;.getTranslationY ()F
05-22 19:32:17.173: W/dalvikvm(12680): VFY: unable to resolve virtual method 2682: Landroid/view/ViewGroup;.setAlpha (F)V
05-22 19:32:17.173: W/dalvikvm(12680): VFY: unable to resolve virtual method 2686: Landroid/view/ViewGroup;.setTranslationX (F)V
05-22 19:32:17.173: W/dalvikvm(12680): VFY: unable to resolve virtual method 2687: Landroid/view/ViewGroup;.setTranslationY (F)V
05-22 19:32:17.183: W/dalvikvm(12680): VFY: unable to resolve virtual method 5020: Lcom/actionbarsherlock/internal/widget/ActionBarView$HomeView;.onHoverEvent (Landroid/view/MotionEvent;)Z
05-22 19:32:17.183: W/dalvikvm(12680): VFY: unable to resolve virtual method 2881: Landroid/widget/FrameLayout;.onPopulateAccessibilityEvent (Landroid/view/accessibility/AccessibilityEvent;)V
05-22 19:32:17.223: W/dalvikvm(12680): VFY: unable to resolve virtual method 2893: Landroid/widget/HorizontalScrollView;.getAlpha ()F
05-22 19:32:17.223: W/dalvikvm(12680): VFY: unable to resolve virtual method 2894: Landroid/widget/HorizontalScrollView;.setAlpha (F)V
05-22 19:32:17.223: W/dalvikvm(12680): VFY: unable to resolve direct method 2924: Landroid/widget/LinearLayout;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;I)V
05-22 19:32:17.223: W/dalvikvm(12680): VFY: unable to resolve virtual method 2928: Landroid/widget/LinearLayout;.getAlpha ()F
05-22 19:32:17.223: W/dalvikvm(12680): VFY: unable to resolve virtual method 2931: Landroid/widget/LinearLayout;.getTranslationX ()F
05-22 19:32:17.223: W/dalvikvm(12680): VFY: unable to resolve virtual method 2938: Landroid/widget/LinearLayout;.setAlpha (F)V
05-22 19:32:17.223: W/dalvikvm(12680): VFY: unable to resolve virtual method 2944: Landroid/widget/LinearLayout;.setTranslationX (F)V
05-22 19:32:17.243: W/dalvikvm(12680): VFY: unable to resolve static field 2657 (ROOT) in Ljava/util/Locale;
05-22 19:32:17.303: W/dalvikvm(12680): VFY: unable to resolve virtual method 2592: Landroid/view/View;.jumpDrawablesToCurrentState ()V
05-22 19:32:21.583: W/dalvikvm(12680): threadid=1: thread exiting with uncaught exception (group=0x40020ac0)
05-22 19:32:21.593: E/AndroidRuntime(12680): FATAL EXCEPTION: main
05-22 19:32:21.593: E/AndroidRuntime(12680): java.lang.IllegalArgumentException: column '_id' does not exist
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:314)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.widget.CursorAdapter.init(CursorAdapter.java:174)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.widget.CursorAdapter.<init>(CursorAdapter.java:151)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.widget.ResourceCursorAdapter.<init>(ResourceCursorAdapter.java:93)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.widget.SimpleCursorAdapter.<init>(SimpleCursorAdapter.java:89)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at com.kinbit.abTest.Fragment1.onActivityCreated(Fragment1.java:66)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.os.Handler.handleCallback(Handler.java:587)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.os.Looper.loop(Looper.java:123)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at android.app.ActivityThread.main(ActivityThread.java:4627)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at java.lang.reflect.Method.invokeNative(Native Method)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at java.lang.reflect.Method.invoke(Method.java:521)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-22 19:32:21.593: E/AndroidRuntime(12680):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:02:59.900

它可以使用`ArrayAdapter`但不能使用**的**`SimpleCursorAdapter`原因是`SimpleCursorAdapter extends CursorAdapter`，如果您的游标不包含名为. 列中的值应该是绑定到.`CursorAdapter` **`_id``_id``ListView`**

 **此错误与兼容性库无关。**

# c - 从 C 中的文本文件中读取列

> ID：10711277
> 
> 赞同：2
> 
> 时间：2012-05-22T22:58:29.000
> 
> 标签：c

我有一个包含 100 行和 512 列的文本文件，每列由一个选项卡分隔：

```
row1    00  00  20  00  11  00  00  00  00  10
        00  11  00  55  77  00  00  70  21  00
        90  ... 
```

我想通读每一行并将值存储在数组的每一列中。

我不想使用`sscanf`和分离变量，因为它需要创建另外 500 个变量。
如果我使用`fgets`，我可以获得整行，但是如何用空格分隔列并将它们存储在数组中？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T23:03:57.997

您可以使用[`strtok_r`](http://www.mkssoftware.com/docs/man3/strtok_r.3.asp)的可重入版本[`strtok`](http://www.mkssoftware.com/docs/man3/strtok.3.asp)将字符串的元素分隔为*标记*。您可以`strtok_r`循环调用，调用[`atoi`](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)每个标记，并将标记添加到行的数组中。

`strtok_r`的使用模式几乎与 相同`strtok`，但它有一个额外的参数来表示分词器的当前状态。常规`strtok`将该状态保存在静态内存中，使函数不可重入。

```
const char *term = "\t\n\r "; // word terminators
char str[] = "quick brown fox jumps over the lazy dog";
char *state; // Invocation state of strtok_r
char *tok = strtok_r(str, term, &state); // First invocation is different
while (tok) {
        printf("%s\n", tok);
        tok = strtok_r(NULL, term, &state); // subsequent invocations call with NULL
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:03:37.950

我相信您可以使用带有制表符分隔符的字符串标记器。这是一个[例子](http://roseindia.net/c-tutorials/c-string-tokenizer.shtml)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T23:04:00.073

你可以使用 strtok

[http://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

并遍历每个单词

# .net - .NET 中的文本文件加密

> ID：10711279
> 
> 赞同：0
> 
> 时间：2012-05-22T22:58:45.443
> 
> 标签：.net, encryption

我需要在 C# 应用程序中以编程方式加密纯文本文件的部分，并确保数据在未加密时不会轻易在内存中被截获（这可能会带来挑战，因为总有一些地方原始数据会以解密形式处理）。

应该可以通过在文件中加密的密码或理想情况下通过私钥来解密数据。一个要求是允许每个加密块受到唯一密钥对的保护，以便私钥解密加密整体的子集。

我正在考虑使用 RSACryptoServiceProvider 或 .Net 4.0 中可用的其他一些非对称加密方案。我谨慎行事，因为该方案必须坚如磐石，如果有令人信服的理由，我不会反对使用外部库。

我还对维护内存中加密的既定技术感兴趣，以防止运行时堆遍历作为拦截未加密数据的一种手段。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:04:16.077

对于如何`RSACryptoServiceProvider`工作的示例，我只能将您引导到它的[MSDN 页面，该页面有一个非常完整的使用示例](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)。

对于内存中的安全存储`string`，您可以使用[System.Security.SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)：

> **SecureString 类**：表示应保密的文本。文本在使用时被加密以保护隐私，并在不再需要时从计算机内存中删除。

但是请记住，任何足够熟练和/或有动力的人*总是*会设法最终打破您设置的保护。

# python - 触摸板上的手指位置

> ID：10711281
> 
> 赞同：5
> 
> 时间：2012-05-22T22:59:32.243
> 
> 标签：python, touch, input-devices

我想在罗技无线触摸板上触摸 (x,y) 坐标。我正在用 Python 编程，并希望使用触摸板作为输入设备来驱动显微镜载物台。我不太确定如何访问触摸数据；我尝试通过 PySerial 访问设备的 USB 连接，但无法通过此模块连接到设备。这是一个多点触控板，因此我也对检测多点触控感兴趣。谢谢你的帮助。

# php - 将包含 iOS 数据的对象发布到 PHP

> ID：10711282
> 
> 赞同：0
> 
> 时间：2012-05-22T22:59:34.587
> 
> 标签：php, ios, ios5, post

我想传递这样的对象（JavaScript 示例）

```
var auth = new Object();
auth.method = "authenticateUser";
auth.data = new Object();
auth.data.email = "user11111@test.com";
auth.data.password = "123123"; 
```

当我发帖时到 php 脚本。

到目前为止，我只能通过附加到 url 来传递单个变量，但我希望能够传递嵌套对象 - 例如在上面的 javascript 示例中

```
NSString *post =[NSString stringWithFormat:@"username=%@&password=%@",usernameField.text, passwordField.text];
NSString *hostStr = @"{ANY URL}";
hostStr = [hostStr stringByAppendingString:post];
NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];    
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:02:54.957

现在，您使用的是 HTTP GET，它很难传输复杂的数据。你可以做的是[在 iOS 中发送一个 HTTP Post，](https://stackoverflow.com/questions/5537297/ios-how-to-perform-a-http-post-request)它使用 url 并将数据附加到消息正文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:05:22.710

你看过[AFNetworking](https://github.com/AFNetworking/AFNetworking)吗？这使得做你想做的事情变得更容易。几乎我所做的每个项目都涉及某种网络服务，而像 AFNetworking 这样的库使这个过程变得更加容易。一方面，您永远不想在 GET 请求中传递密码，并且您还想确保在传递凭据或类似的敏感数据时使用安全连接。

我编写了一个旨在与 AFNetworking 一起使用的网络类。 [这](https://stackoverflow.com/questions/10618056/how-to-post-more-parameters-with-image-upload-code-in-ios/10618557#10618557)是一篇详细介绍该课程的SO帖子。

# php - 如何使用 codeigniter 从表中导出某些行？

> ID：10711283
> 
> 赞同：1
> 
> 时间：2012-05-22T22:59:35.927
> 
> 标签：php, mysql, codeigniter, export, backup

我正在尝试创建一个函数，用户可以在其中将他们在我们系统中的条目导出到 sql 文件中。

[我在 codeigniter 文档http://codeigniter.com/user_guide/database/utilities.html](http://codeigniter.com/user_guide/database/utilities.html)中找到了这个页面

`$this->dbutil->backup()`几乎是我需要的，但我认为我不能运行类似的查询

```
SELECT id, name FROM mytable WHERE user = someuser 
```

使用该功能。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:56:36.463

如果您想使用该功能，您可以先使用您需要的数据创建一个临时表，然后运行该命令

```
CREATE TEMPORARY TABLE userexport_data AS 
    (SELECT id, name FROM mytable WHERE user = someuser) 
```

```
$prefs = array(
    'tables'      => array('userexport_data'),
    // Other options
    );

$this->dbutil->backup($prefs); 
```

# c# - TransactionScope 中的 NLog 导致 Transaction 无效

> ID：10711288
> 
> 赞同：3
> 
> 时间：2012-05-22T23:00:14.757
> 
> 标签：c#, .net, transactionscope, nlog

我在本地没有得到的生产环境中遇到问题。

我在 TransactionScope 中运行一些 LINQ to SQL 代码，如下所示：

```
 using (var scope = new TransactionScope())
        {
            uploadRepository.SubmitChanges();
            result = SubmitFileResult.Succeed();

            ScanForNewData(upload);

            scope.Complete();
        } 
```

ScanForNewData() 调用 GetSubmittedData()。如果 GetSubmitted() 发生异常，我们使用 Nlog 将错误写入文件、数据库并发送电子邮件：

```
 catch (Exception ex)
        {
            //MT - having to comment this out beause it is causing a problem with transactions on theproduction server
            logger.ErrorException(String.Format("Error reading txt file {0} into correct format", upload.DocumentStore.FileName), ex);
            return new UploadGetSubmittedDataResult { Exception = ex, Success = false, Message = String.Format("Error reading txt file {0} into correct format", upload.DocumentStore.FileName) };
        } 
```

然后在 ScanForNewData 中，我们调用 repository.SubmitChanges()。这会导致：

该操作对事务的状态无效。System.Transactions.TransactionException TransactionException System.Transactions.TransactionException：操作对于事务的状态无效。

我想出的最好的主意是，在生产环境中，这段代码在 Web 服务器上运行并调用单独的数据库服务器。DataContext 和 Nlog 都具有相同的连接字符串配置和 Sql 用户，但可能是因为服务器是远程的（而我在本地使用集成安全性）发生了一些奇怪的事情。

知道在这种情况下交易会发生什么吗？

更新 - 我刚刚在本地使用 SQL 用户进行了尝试，它仍然可以正常工作。应该跟制作环境有关系...

另一个更新 - 我撒谎。在开发机器上，永远不会写入 Nlog 数据库记录，发送电子邮件，并且不会发生 TransactionException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:16:09.657

在不知道 TransactionException 的内部异常是什么的情况下很难解决，但这里有一个想法：

如果您重构代码以在事务范围周围的 using 块结束**后**进行日志记录，则您可能会避免遇到的问题，因为事务范围将结束并且 DTC 将回滚事务。

我过去在处理事务时使用并看到过这种模式（直到事务结束并回滚后才记录）并且它运行良好。

始终建议在单独的数据库上进行日志记录以避免此类问题。如果你这样做了，这个问题也将被避免。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T00:17:41.737

如果没有异常的完整堆栈跟踪，很难猜测是什么问题，它可能取决于多种因素。

例如，我假设 NLog 我自己打开了一个到数据库的新连接，这可能会导致事务被提升为分布式事务，并且分布式事务协调器将启动。这可能导致行为之间的不对称您在生产和本地的应用程序。

您可能会通过其中的某些操作破坏事务，例如某些未处理的异常或非法访问某些数据。

提供完整的堆栈跟踪和更多涉及的代码以进行更深入的分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T12:48:22.663

看看这个..似乎是 Nlog 的一个错误。

[https://groups.google.com/forum/#!msg/nlog-users/I5UR-bISlTA/6RPtOZhR4NoJ](https://groups.google.com/forum/#!msg/nlog-users/I5UR-bISlTA/6RPtOZhR4NoJ)

建议的解决方案是使用异步目标进行 Db 日志记录。

# jquery - Blackberry 9800 OS 6.0.0.141 Simulator 崩溃的可能原因？

> ID：10711292
> 
> 赞同：2
> 
> 时间：2012-05-22T23:01:12.213
> 
> 标签：jquery, blackberry, jquery-mobile, cordova, blackberry-simulator

我正在开发一个黑莓项目，但在模拟器上遇到了一些问题，我不知道为什么会这样，也不知道如何调试这个问题。

我正在使用什么

1.  电话间隙 1.7
2.  科尔多瓦.1.7.0.js
3.  jquery.1.6.4.js , jquery.ui.1.8.18 , jquery.mobile.1.0.1.js

我也在使用其他一些 jquery 插件。

我遇到了一些问题

问题 1

```
 function onDeviceReady()
    {
      // do your thing!
      alert("PhoneGap is working");

    }

    $(document).ready(function() 
    {
        document.addEventListener("deviceready", onDeviceReady, false);

    }); 
```

我的 index.html 中有这个（这些是 html 5 页），当应用程序加载时，我看到这个警告框是预期的。但是，当我转到没有此代码的新 html 页面时，我再次看到此警告框，但我不知道为什么。

我不确定这是否只是一个错误的版本，或者如果我去使用“7.0+”模拟器我不会再收到这个错误了。

问题 2

当我在 6.0.0 中通过模拟器加载应用程序时，它会随机崩溃。有时它只会加载我的主页然后崩溃。有时我必须点击一下，它会崩溃。

我尝试使用工具-显示事件日志，但它没有记录任何内容，所以我不确定如何调试它。

如果我使用 OS 7.0+，这两个问题都会消失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:32:22.797

我遇到了你现在面临的同样问题。

首先我建议不要使用这个`$(document).ready(function()`

做这样的事情

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    document.addEventListener("pause", onPause, false);
}

function onPause() {
}

<body onload="onLoad()">
</body> 
```

其次，您面临的问题是因为 9800 模拟器有问题。从黑莓网站再次下载并重新安装。问题是当您更改页面时，总是会调用设备就绪。这是 Blackberry 9800 模拟器中的一个错误。尽管如果您尝试在任何 BB OS 7 模拟器中运行它，那么它将完美运行......

希望能帮助到你 ：）

# c# - 如何在 .NET 中使用 clearcanvas

> ID：10711302
> 
> 赞同：1
> 
> 时间：2012-05-22T23:02:24.050
> 
> 标签：c#, .net, dicom, clearcanvas

一般来说，我对 clearcanvas 和 DICOM 文件是全新的，所以现在我只是想让一个简单的桌面应用程序正常工作（.NET 和 C#）。我已将 clearcanvas dll 添加到我的项目中，但我只是不确定如何实际读取 DICOM 文件。理想情况下，我希望在读入文件后能够分别访问所有标签。

我真的很感激一些可以让我开始的初始代码。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:06:38.130

你应该能够做这样简单的事情：

```
string filename = "file.dcm";
DicomFile theFile = new DicomFile(filename);
theFile.Load(DicomReadOptions.Default);
foreach (DicomAttribute attribute in theFile.DataSet)
{
    Console.WriteLine("Tag: {0}, Value: {1}", attribute.Tag.Name, attribute.ToString());
} 
```

DicomFile 对象是操作 DICOM 文件的核心类。它具有 MetaInfo 和 DataSet 属性，它们是 DicomAttributeCollections 包含文件中的标签。DicomAttributeCollection 中的每个 DicomAttribute 都具有检索属性值的方法和属性。

# java - 如何在 Java 中运行 bash 脚本（下载文件）？

> ID：10711308
> 
> 赞同：-1
> 
> 时间：2012-05-22T23:02:53.257
> 
> 标签：java, bash, download, runtime

在 Mac OS X Lion 中运行，我需要使用命令行中的脚本从远程服务器检索文件。我试图在代码中使用的命令是“bash /my/path/here/myscript”，我已经使用下面的代码从命令行（atos）运行了另一个进程。

```
Process proc = Runtime.getRuntime().exec(cmd); 
```

但是在调试时，程序继续运行而没有错误，但脚本似乎确实已经运行了。此外，脚本检索文件时应该暂停几秒钟，但我的程序会立即继续执行。从终端运行时，脚本本身会按预期工作。我对如何让它工作感到有点困惑，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:22:52.830

让它与以下代码一起工作 -

```
Process proc = Runtime.getRuntime().exec(cmd);
BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));
proc.waitFor();

while (in.ready()) {
    System.out.println(in.readLine());
} 
```

另一个问题是脚本将下载到当前工作目录而不是脚本本身的位置（如预期的那样）。因此脚本将正确运行，而我的程序将继续无法找到下载的文件。希望这可以帮助。

# sql - 检测sql中何时运行重复查询

> ID：10711313
> 
> 赞同：0
> 
> 时间：2012-05-22T23:03:18.780
> 
> 标签：sql, sql-server-2008-r2

我有一个应用程序可以让用户一次搜索数百万条记录。当搜索没有及时返回时，用户退出应用程序，重新登录，然后重新提交搜索。

SQL 服务器不知道用户已注销并且它不应该仍在运行搜索，所以我最终会同时执行许多相同的查询。现在我只运行一个脚本，显示运行了 5 分钟或更长时间的内容（请注意，这些搜索很激烈，可以运行几个小时），我如何检测重复查询何时运行？

谢谢，

菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:07:07.997

您可以运行这段 SQL 并检查文本值：

```
SELECT sqltext.TEXT,
req.session_id,
req.status,
req.command,
req.cpu_time,
req.total_elapsed_time
FROM sys.dm_exec_requests req
CROSS APPLY sys.dm_exec_sql_text(sql_handle) AS sqltext 
```

归功于[Sql 授权](http://blog.sqlauthority.com/2009/01/07/sql-server-find-currently-running-query-t-sql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T23:47:54.390

正如@kell[提到](https://stackoverflow.com/a/10711345/1377943)的，通过该查询，您可以找到运行时间最长的查询，虽然它有一些问题，但如果您阅读[此信息](http://blog.sqlauthority.com/2009/01/23/sql-server-2008-2005-find-longest-running-query-tsql-part-2/)，您还可以修复已知问题。
顺便说一句，我想你为什么不把这份工作留给 sql-server。Sql server 具有查找查询重复、优化和缓存的内部能力。如果您缓存相同的 sql 查询的结果会更好。
Microsoft 已发布 sql-server-2008 缓存的最佳实践论文。[阅读它](http://msdn.microsoft.com/en-us/library/ee343986%28v=sql.100%29.aspx)。

# ruby-on-rails - 本教程中定义的方法“评论”在哪里？

> ID：10711315
> 
> 赞同：0
> 
> 时间：2012-05-22T23:03:29.557
> 
> 标签：ruby-on-rails

[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)。

我注意到他们在第 7.4 节中使用了三次，一次在评论控制器中，两次在 show.html.erb 中，但它在哪里定义？

你不需要一个

```
def comments
end 
```

某处？你能解释一下他们是如何定义它的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:07:40.837

Comments 不是方法，而是属于 Post 模型的模型。

当您调用 时`@post.comments.build`，这是创建与 Post 模型的特定实例相关的评论。

返回并再次准备好有关关联模型的 7.2。

# heroku - 无法在 Play 2.0 java 中从 heroku 连接到 mongohq？

> ID：10711318
> 
> 赞同：1
> 
> 时间：2012-05-22T23:03:45.987
> 
> 标签：heroku, playframework-2.0, mongohq

我正在使用 mongohq 作为 Heroku 插件，最近在本地主机上运行我的应用程序时遇到了一些问题。只要我的应用程序尝试访问数据库，我就会不断收到以下堆栈跟踪。

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[Network: can't call something : staff.mongohq.com/50.17.135.240:10050/app4620908]]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:82) [play_2.9.1.jar:2.0]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:63) [play_2.9.1.jar:2.0]
at akka.actor.Actor$class.apply(Actor.scala:290) [akka-actor.jar:2.0]
at play.core.ActionInvoker.apply(Invoker.scala:61) [play_2.9.1.jar:2.0]
at akka.actor.ActorCell.invoke(ActorCell.scala:617) [akka-actor.jar:2.0]
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:179) [akka-actor.jar:2.0]

Caused by: com.mongodb.MongoException$Network: can't call something : staff.mongohq.com/50.17.135.240:10050/app4620908
at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:227) ~[mongo-java-driver-2.7.3.jar:na]
at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305) ~[mongo-java-driver-2.7.3.jar:na]
at com.mongodb.DB.command(DB.java:160) ~[mongo-java-driver-2.7.3.jar:na]
at com.mongodb.DB.command(DB.java:183) ~[mongo-java-driver-2.7.3.jar:na]
at com.mongodb.DBCollection.getCount(DBCollection.java:864) ~[mongo-java-driver-2.7.3.jar:na]
at com.mongodb.DBCollection.getCount(DBCollection.java:835) ~[mongo-java-driver-2.7.3.jar:na]

Caused by: java.net.SocketException: Operation timed out
at java.net.SocketInputStream.socketRead0(Native Method) ~[na:1.6.0_31]
at java.net.SocketInputStream.read(SocketInputStream.java:129) ~[na:1.6.0_31]
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218) ~[na:1.6.0_31]
at java.io.BufferedInputStream.read1(BufferedInputStream.java:258) ~[na:1.6.0_31]
at java.io.BufferedInputStream.read(BufferedInputStream.java:317) ~[na:1.6.0_31]
at org.bson.io.Bits.readFully(Bits.java:35) ~[mongo-java-driver-2.7.3.jar:na] 
```

我直接使用 Mongo 驱动程序，并确保只创建一个单例 Mongo 实例，并且我已经验证它正在创建。据我所知，它仅在我请求数据时发生

在对用户进行身份验证时，它发生在以下两行中的第二行：

```
 DBCollection users = DBManager.getDB("mojulo").getCollection("users"); /*Get the Mongo singleton then get the "users" collection */
 DBObject user = users.findOne(new BasicDBObject("username", username)); /*find the user with the specified username */

 When trying to register a user, it occurs after I attempt the insert, and the insert is not successful. on the second of these two lines:

WriteResult result = users.insert(new_user); /* attempt to insert a new user */

if(result.getLastError().ok()){ /* make sure it worked, error occurs on this line */

... 
```

我在这里相当一无所知，我觉得可能存在线程问题？因为它随机工作一次，但随后停止工作。任何人都可以对此有所了解，将不胜感激

编辑：

希望我能更明确地说明我在这里遇到的问题，但它们非常零星。它似乎有 10% 的时间可以工作，然后停止工作。

# iphone - 修复 UIScrollView 之上的 UIButton

> ID：10711322
> 
> 赞同：5
> 
> 时间：2012-05-22T23:04:03.740
> 
> 标签：iphone, objective-c, xcode, ipad, uiscrollview

我试图弄清楚如何在 UIScrollView 上覆盖 UIButton。基本上用户将能够正常使用滚动视图。但是滚动视图右上角的按钮将保持在固定位置。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:08:20.327

不要将 UIButton 添加为 UIScrollView 的子视图，而是添加“self.view”

![您的层次结构应如下所示。 请注意按钮现在如何位于滚动视图的下拉列表中。 只需将按钮拖出](../Images/cd431ee4cc0faa0cbb306d8b1a5e9dfb.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T23:19:07.757

在 InterfaceBuilder 中将有一个层次结构的项目列表，您将其放入视图中，将按钮从属于 scrollView 的视图拖到属于包含子视图的视图。

您的视图层次结构将如下所示

```
mainView

|

----Button

|

----ScrollView 
```

代替

```
mainView

|

----ScrollView

  |

  ----Button 
```

basically It means both your button and your ScrollView will both be subViews of the exact same mainView. If your scrollView is the mainView put an empty UIView above the scrollView and insert the UIButton & UIScrollView into that

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T23:52:06.040

IB is a little finicky when dropping new views directly on the 'fake' interface. What you will need to do is go over to the left in the list of views and select your button view. Now drag it up to below the 'self.view' or whatever is your top level view.

YOu should notice as you raise it up and down in the list that a light blue line will appear. The width corresponds to 'subview' or 'parent' view connection. Play with it a bit to see the difference.

当您感觉舒适时，您应该能够将 Button 放在“self.view”中，而不是作为滚动视图的子视图。此外，如果您希望它出现在 TOP（物理“Z 级别”）上，则需要它位于列表中的滚动视图下方。（这指出了 CStreet 解决方案的一个微妙问题）

# javascript - Javascript正则表达式返回空格之间的文本

> ID：10711327
> 
> 赞同：0
> 
> 时间：2012-05-22T23:04:32.677
> 
> 标签：javascript, regex, string

我有一个这样的字符串：

```
snippet = "Paragraph: <p>The night sky is beautiful!</p> "; 
```

如何仅返回第一个和最后一个空格之间的文本？
因此只返回段落标签：

```
<p>The night sky is beautiful!</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:07:18.933

使用这个表达式：

```
snippet.match(/\s(.*)\s/) 
```

[http://jsfiddle.net/zerkms/Qhe8J/1/](http://jsfiddle.net/zerkms/Qhe8J/1/)

# c++ - 如何将部分 CString 复制到新的？

> ID：10711330
> 
> 赞同：1
> 
> 时间：2012-05-22T23:05:07.497
> 
> 标签：c++, mfc

我有一个`CString str`

我想复制`str[3]~ str[5]`到一个全新的。我试过 C++ char* 的方法，不兼容。

那么在 VC++ 中这样做的正确方法是什么

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:09:24.383

您是否尝试过使用[MID](http://msdn.microsoft.com/en-us/library/aa300543%28v=vs.60%29.aspx)功能？

str.Mid( 3, 3 ) 应该给你你正在寻找的子字符串。

更新参考： http: [//msdn.microsoft.com/en-us/library/b4c90k3d (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/b4c90k3d(v=vs.80).aspx)

# ruby-on-rails - 破坏嵌套资源的动作

> ID：10711335
> 
> 赞同：1
> 
> 时间：2012-05-22T23:06:11.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我试图在我的嵌套资源上添加一个销毁按钮并收到此错误：`No route matches [DELETE] "/users/1/2/4/5/holidays/7"`

这是我的视图、路由、模型和控制器的相关部分：

```
<% @user.holidays.each do |h| %>
  <td><%= h.name %></td>
  <td><%= h.date %></td>
  <td>
    <%= button_to('Destroy', user_holiday_path(@user.holidays), :method => 'delete', :class => 'btn btn-large btn-primary')  %>
  </td>
<% end %> 
```

路线

```
resources :users do
  resources :interests
  resources :holidays
end 
```

楷模

```
class User < ActiveRecord::Base
  has_many :holidays, :through => :user_holidays
end

class UserHoliday < ActiveRecord::Base
  attr_accessible :holiday_id, :user_id
  belongs_to :user
  belongs_to :holiday
end

class Holiday < ActiveRecord::Base
  attr_accessible :name, :date
  has_many :user_holidays
  has_many :users, :through => :user_holidays

end 
```

控制器

```
class HolidaysController < ApplicationController
  def index
    @user_holidays = Holiday.find(params[:user_id])
    @holidays = @user_holidays.holidays
  end

  def new
  end

  def show
    @holiday = Holiday.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @holiday }
    end
  end

  def destroy
    @holiday = Holiday.find(params[:id])
    @holiday.destroy
  end
end 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:20:36.773

将此：更改
`<%= button_to('Destroy', user_holiday_path(@user.holidays), :method => 'delete', :class => 'btn btn-large btn-primary') %>`
为：
`<%= button_to('Destroy', user_holiday_path(h), :method => 'delete', :class => 'btn btn-large btn-primary') %>`

**更新**

将您的销毁操作从 : 更改
`@holiday = Holiday.find(params[:id])`为
`@user_holiday = UserHoliday.find(params[:id])`

在您看来：
更改
`<% @user.holidays.each do |h| %>` 为

`<% @user.user_holidays.each do |h| %>`

您的关联需要一些更正，应如下所示：
`user has_many user_holidays`
`user_holiday has_one holiday`
`user_holidays belongs_to user`

您可以通过 h 对象访问名称和假期：
`h.holiday.name`
`h.holiday.date`

# node.js - 如何在带有 NodeJS 的 MongoDB 中为 mapReduce 使用变量

> ID：10711337
> 
> 赞同：2
> 
> 时间：2012-05-22T23:06:14.803
> 
> 标签：node.js, mongodb

我有一系列看起来像的事件

```
{
  _id: BSONID
  name: "event_name",
  values: {a: 10, b: 1000, c: 50}
} 
```

我正在尝试使用 mapReduce 他们使用

```
map = function() {
  return emit([this.name, this.values['a']], this.values['b']);
}

reduce = function(key, values) {
  // stuff
}

collection.mapReduce(map, reduce, { out: { inline: 1 } }, callback); 
```

但是，我希望能够动态更改我映射的值。本质上，我想拥有

```
var key = 'a';
var value = 'b';

map = function ()
{
  return emit([this.name, this.values[key]], this.values[value]);
} 
```

问题是执行上下文没有传递给 mongodb。任何不依赖于函数使用字符串的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:49:38.977

是的，您可以将“范围”变量传递给 MapReduce：

```
scope = {key : "a", value : "b"};
collection.mapReduce(map, reduce, {scope : scope, out: { inline: 1 } }, callback); 
```

# c# - 并发冲突：DeleteCommand 影响了预期的 1 条记录中的 0 条

> ID：10711342
> 
> 赞同：10
> 
> 时间：2012-05-22T23:06:53.050
> 
> 标签：c#, mysql

我正在尝试从 datagridview 中删除一条记录，然后将其更新到 mysql 服务器，但是我一直收到“并发冲突：DeleteCommand 影响了预期的 1 条记录中的 0 条。”。我已经用谷歌搜索并弄乱了它，无法找到解决爱情和金钱的方法。我哪里错了？

```
 private void Form1_Load(object sender, EventArgs e)
    {
        try
        {
            // create a connection to the server
            connection = new MySqlConnection("SERVER=" + Constants.SERVER + ";" + "DATABASE=" + Constants.DATABASE + ";UID=" + Constants.USERNAME + ";" + "PASSWORD=" + Constants.PASSWORD + ";");
            connection.Open();

            // create our default handler
            adapter = new MySqlDataAdapter();

            // set the default commands to do
            adapter.SelectCommand = new MySqlCommand("SELECT * FROM npc_drops", connection);
            MySqlCommand query = new MySqlCommand("DELETE FROM npc_drops WHERE id = @id", connection);
            query.Parameters.Add("@id", MySqlDbType.Int32, 10, "id");
            adapter.DeleteCommand = query;

            // create a table to put our data in and fill it with the results
            table = new DataTable();
            adapter.Fill(table);

            // bind both the data table and the datagridview togeather
            BindingSource source = new BindingSource();
            source.DataSource = table;
            dataGridView1.DataSource = source;
            dataGridView1.Columns["id"].Visible = false;
        }
        catch (MySqlException ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            table = table.GetChanges();
            adapter.Update(table);
        }
        catch (MySqlException ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

桌子：

```
CREATE TABLE `npc_drops` (
    `id` INT(10) NULL AUTO_INCREMENT,
    `npcs` VARCHAR(250) NULL DEFAULT NULL,
    `rate` INT(3) NULL DEFAULT NULL,
    `item` INT(5) NULL DEFAULT NULL,
    `amount` INT(10) NULL DEFAULT NULL,
    PRIMARY KEY (`id`)
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-08T18:53:19.757

我知道这是一个旧线程，但我遇到了同样的问题并找到了解决方案。也许其他人会在这里看到它。

使用 Visual Studio，在 .xsd 文件中，数据适配器中有一个 DELETE 命令。该命令采用 SQL “DELETE from table where column1 = @Original_column1 AND column2 = @Original_column2 AND...”的形式，默认情况下，它将所有列与您读取 db 时的值进行比较，并且不会删除记录，除非它们都匹配。这是为了避免在您阅读记录和尝试更改记录之间覆盖其他人所做的更改。

这就是问题所在。如果数据库中这些列中的任何一个为 NULL，则它不会像您描述的那样匹配并出错。

PS：在使用 VS db 库时，我在数据库中允许 NULL 时遇到了麻烦。LINQ2SQL 或任何它被称为...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-27T03:04:08.410

当您尝试删除实际数据库中不匹配的记录时，会发生并发异常，这发生在新添加的具有标识列的记录上，因为数据集不会在添加后立即检索标识列值。 **要解决这个问题，你需要**

1-通过执行 SQL 命令从数据库中检索标识列值，然后使用该值更新数据集中的记录。

**或**
2- 您可以通过调用接受对数据库数据表的更改：

```
table.AcceptChanges(); 
```

然后在通过调用重新填充您的数据表之后

```
Adapter.Fill(table); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:44:48.613

并发异常意味着更改的行数少于预期，这通常发生在更新/删除上有 where 子句阻止操作执行时。（这通常是并发的工作方式 - 您使用 where 检查 LastUpdateDate 没有更改，以验证没有人在您的读写操作之间进行）删除的唯一位置是“id = @id”，所以问题必须是执行DeleteCommand时该id在DB中不存在。

我可以看到您的代码有两个问题：

1.  不要重复使用“表”进行更改，而是使用新的 DataTable。
2.  更新后调用 table.AcceptChanges()，这将从 DataTable 中删除已删除的条目。

问题可能是由于删除的行被保留并再次删除，或者在删除之前删除条目的其他操作（在后一种情况下，您需要处理并发异常）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-30T23:28:09.263

由于上面提到的 NULL 问题，您可以尝试在数据集的生成方法上关闭“乐观并发”。

# php - 如何使用查询来执行语义搜索

> ID：10711360
> 
> 赞同：0
> 
> 时间：2012-05-22T23:08:30.977
> 
> 标签：php, sql, database

我在下面有一个基本查询，当用户在文本框中输入问题时，它会从数据库中搜索问题：

```
$questionquery = "SELECT QuestionContent FROM Question
  WHERE(QuestionContent = '".mysql_real_escape_string($questioncontent)."'); 
```

现在上面的查询实际上并不实用，因为要查找问题，用户必须正确输入整个问题才能找到问题。

现在我不想通过使用 LIKE 从数据库中查找问题中的单词来进行关键字搜索。相反，我想要做的是能够使用查询来执行语义搜索，以便能够找到在文本框中输入的短语的含义。

有人知道这是否可以在查询中执行，如果可以，有人知道如何实现吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:24:09.957

MySQL 中的自然语言全文搜索支持可能会提供一些帮助。但是您需要将要执行搜索的列索引为 FULLTEXT，并且您的数据库引擎必须是 MyISAM。

```
create index `question_content_fulltext` on Question FULLTEXT (`QuestionContent`); 
```

然后，您可以使用如下查询对该列执行自然语言搜索：

```
$questionquery = "SELECT * FROM Question WHERE MATCH (QuestionContent) AGAINST ('"mysql_real_escape_string($questioncontent)"')"; 
```

[有关更多信息，请参阅有关自然语言全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)的 MySQL 文档。

# ruby-on-rails - 引用 ID 但不使用嵌入文档的 Mongoid 查询

> ID：10711361
> 
> 赞同：0
> 
> 时间：2012-05-22T23:08:42.177
> 
> 标签：ruby-on-rails, mongodb, mongoid

我有一个 Mongo 集合，它只是将一个 ID 引用到另一个集合。假设我特别提到的集合可能被称为：

走。Walks 引用了 owner_id。主人每天带着他的许多宠物散步。我想要做的是查询 Walks 以获取 N 个 owner_ids 的列表，并仅获取他们为每个所有者和 group 按 owner_id 进行的最后一次步行。要通过所述列表获得所有步行的列表，我们会做类似的事情。

`Walk.any_in(:owner_id => list_of_ids)`

我的问题是，有没有办法查询 list_of_ids，每个 owner_id 只获得一次步行（他们采取的最后一次步行可以按字段排序`created_at`并以散列返回，其中每次步行都由 owner_id 指向，例如：

`{ 5 => {..walk data..}, 10 => {.. walk data ..}}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:51:01.963

这是一个使用 MongoDB 的 group 命令的答案。出于测试目的，我使用**walk_time**而不是**created_at**。希望这会有所帮助，并且您喜欢它。

```
class Owner
  include Mongoid::Document
  field :name, type: String
  has_many :walks
end

class Walk
  include Mongoid::Document
  field :pet_name, type: String
  field :walk_time, type: Time
  belongs_to :owner
end 
```

测试/单元/walk_test.rb

```
require 'test_helper'

class WalkTest < ActiveSupport::TestCase
  def setup
    Owner.delete_all
    Walk.delete_all
  end

  test "group in Ruby" do
    walks_input = {
        'George' => [ ['Fido',  2.days.ago], ['Fifi',  1.day.ago],  ['Fozzy',    3.days.ago] ],
        'Helen'  => [ ['Gerty', 4.days.ago], ['Gilly', 2.days.ago], ['Garfield', 3.days.ago] ],
        'Ivan'   => [ ['Happy', 2.days.ago], ['Harry', 6.days.ago], ['Hipster',  4.days.ago] ]
    }
    owners = walks_input.map do |owner_name, pet_walks|
      owner = Owner.create(name: owner_name)
      pet_walks.each do |pet_name, time|
        owner.walks << Walk.create(pet_name: pet_name, walk_time: time)
      end
      owner
    end
    assert_equal(3, Owner.count)
    assert_equal(9, Walk.count)
    condition = { owner_id: { '$in' => owners[0..1].map(&:id) } } # don't use all owners for testing
    reduce = <<-EOS
      function(doc, out) {
        if (out.last_walk == undefined || out.last_walk.walk_time < doc.walk_time)
          out.last_walk = doc;
      }
    EOS
    last_walk_via_group = Walk.collection.group(key: :owner_id, cond: condition, initial: {}, reduce: reduce)
    p last_walk_via_group.collect{|r|[Owner.find(r['owner_id']).name, r['last_walk']['pet_name']]}
    last_walk = last_walk_via_group.collect{|r|Walk.new(r['last_walk'])}
    p last_walk
  end
end 
```

测试输出

```
Run options: --name=test_group_in_Ruby

# Running tests:

[["George", "Fifi"], ["Helen", "Gilly"]]
[#<Walk _id: 4fbfa7a97f11ba53b3000003, _type: nil, pet_name: "Fifi", walk_time: 2012-05-24 15:39:21 UTC, owner_id: BSON::ObjectId('4fbfa7a97f11ba53b3000001')>, #<Walk _id: 4fbfa7a97f11ba53b3000007, _type: nil, pet_name: "Gilly", walk_time: 2012-05-23 15:39:21 UTC, owner_id: BSON::ObjectId('4fbfa7a97f11ba53b3000005')>]
.

Finished tests in 0.051868s, 19.2797 tests/s, 38.5594 assertions/s.

1 tests, 2 assertions, 0 failures, 0 errors, 0 skips 
```

# database - 在我的 Windows 程序中从 mdb 数据库文件中获取数据

> ID：10711364
> 
> 赞同：2
> 
> 时间：2012-05-22T23:09:14.673
> 
> 标签：database, windows, ms-access, export

我曾经帮助一位客户将 mdb 表数据导出到 csv 文件（然后进一步处理这些 csv 文件）。我用过 Ubuntu，所以我可以使用 mdbtools（mdb 查看器）。现在客户希望我以 Windows 程序的形式自动化我所做的工作。我遇到了两个问题：

1.  几个小时后，我仍然没有在 Windows 上找到可以以我可以合并到程序/脚本中的方式导出我的表数据的免费工具。Jackcess (jackcess.sourceforge.net) 看起来很有希望，但是当运行下载的 jar 时，会弹出一个完全不相关的诺基亚套件程序...

2.  我已经设法通过使用 pyodbc 模块在 python 程序中打开了两个表，但是由于“没有读取权限”，所有其他表都无法打开。直到现在我都认为对数据库没有访问限制，因为 Ubuntu 上的 mdb 查看器会打开所有表而没有任何 fuzz。没有其他可用的文件，只有 mdb 文件。一种可能性可能是这根本不是权限问题，而是列名中特殊字符的问题。我无法打开的所有表都至少有一个带有国家字符的列名，而我可以打开的两个表没有。我尝试在从 python 调用的 SQL 选择中使用方括号，如下所示： SQL = 'SELECT [colname] from SomeTable;' 但这没有什么区别。

如果确实是权限问题，我的程序也必须可以执行任何解决方案，不得有任何手动步骤。

编辑：生成 mdb 文件的程序的开发人员已确认对任何表都没有限制。因此，错误消息“没有读取权限”具有误导性。相反，我将专注于解决我认为的列名中国家字符的问题。我将从下面建议的 JSDB 方法开始。感谢大家！

编辑 2：我发现我觉得很重要：我可以使用 pyodbc 打开的所有表都有 Owner=Admin 而我无法打开的所有表都没有所有者（看起来是空字符串，“Owner =”）。

编辑 3：我给了 JDBC 一个机会。再次出现同样的错误，正如在编辑 2 中的发现所预期的那样。显然要解决的问题是表所有权（尽管 Linux 下的 MDB Viewer 似乎并不关心这一点......）。由于文件的创建者说他没有引入任何权限设置，我猜奇怪的表所有权可能是使用新程序（如 2010）读取旧程序（如 90 年代的某个时候）产生的数据的结果，或者是在旧程序的某些迁移过程中引入的。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:41:17.593

您也许可以使用 VBScript。VBScript 通常用于网页的 ASP 文件中，但也可以作为 Windows 程序单独使用。

VBScript 是免费的，因为它是您在记事本中编写的代码。

其他人可能会为您提供更好的答案。祝你好运。

# macos - 如何在 OSX Lion 上的 SWI-prolog 中安装开发工具（plld 等）

> ID：10711365
> 
> 赞同：0
> 
> 时间：2012-05-22T23:09:14.780
> 
> 标签：macos, prolog, osx-lion, swi-prolog, ffi

我试图让 SWI-prolog 和 C 互相交谈。我有一些在 C 中更快/更简单的动态编程问题，我希望能够从 prolog 中调用它们。

SWi 手册在[http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%279.2%27,swi%28%27/doc/Manual/foreignlink 提供了有关如何执行此操作的详细信息。 html%27%29%29](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%279.2%27,swi%28%27/doc/Manual/foreignlink.html%27%29%29)，但它要求您使用 plld 链接/加载您的程序。

我在我的机器上安装了 X-Code，然后重新安装了 SWI，但我找不到 plld 程序。我尝试通过 mac-ports 安装 swi-prolog-devel，但它失败了。我认为它失败了，因为 .pkg 中的 SWI 已经安装，并且它们发生冲突。

有人知道如何 1\. 安装 SWI 的开发人员工具吗？或 2\. 从他们网站上的 pkg 中卸载 SWI 版本，以便我可以使用 MacPorts 重新安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:34:03.757

对 port 命令使用 -f 选项。即键入类型“sudo port -f install swi-prolog-devel”。

# java - 如何在 Java 中更改现有 JFrame 窗口的 setAlwaysOnTop() 属性？

> ID：10711366
> 
> 赞同：0
> 
> 时间：2012-05-22T23:09:18.103
> 
> 标签：java, swing, user-interface, jframe

我有一个扩展 Jframe 并为我的程序设置 GUI 的方法 windowFrame()，实例是 main 方法中的 myFrame。默认情况下，它设置为 setAlwaysOnTop(false)。但是在 windowFrame() 方法中，我有一个 JCheckBox，我想用它来将“始终在顶部”属性设置为真或假。我的问题是如何对现有的 myFrame 窗口 GUI 执行此操作？

我有监听器和所有东西，但我只是不知道如何在 main 方法中引用 myFrame 窗口，因为 JCheckBox 和监听器在 windowFrame() 方法内，但实例当然在它们之外。我尝试使用 this.setAlwaysOnTop(true) 和 setAlwaysOnTop(true)，但这当然行不通。

附加信息：所有内容都包含在同一个主类中，我只需要该窗口的一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:55:06.767

*   没有肮脏的黑客， [JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)是不可能的，不要那样做

*   你必须使用正确的容器，然后你看看[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)，方法[JDialog#setAlwaysOnTop(boolean alwaysOnTop)](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setAlwaysOnTop%28boolean%29)

# c# - 替换字符串中的字符

> ID：10711370
> 
> 赞同：1
> 
> 时间：2012-05-22T23:09:49.150
> 
> 标签：c#, string, split

我创建了一个简单的程序，我想用字符串数组中的其他字符替换一些字符。我创建了一个包含一些单词的字符串数组，我想循环每个单词并检查一些字符是否包含，但是当我试图替换这里没有任何反应是我的代码

```
 string x = "";
            x = "Script friends above about type=text/javascript>BBC.adverts.writeleaderboardtrue) all </script>friends,eating,khaled,khaled,khaled";
 char[] delimiterChars = { ' ', ',', '.', ':', '\t', ':', '$', '=', ';', '<', '>', '!', ';', ']', '[', '"',
                                    '/','=','-','?'};
 string[] words = x.Split(delimiterChars);
            for (int j = 0; j < words.Length; j++)
            {
                words[j] = words[j].ToLower();
            }
 for (int i = 0; i < words.Length; i++)
            {
                for (int j = 0; j < words[j].Length; j++)
                {

                    if (words[i][j]=='a'||words[i][j]=='e'||words[i][j]=='i'||words[i][j]=='o'||words[i][j]=='u'
                        ||words[i][j]=='h'||words[i][j]=='w'||words[i][j]=='y')
                    {
                        words[i].Replace(words[i][j],'0');
                    }
                    else if (words[i][j] == 'b' || words[i][j] == 'f' || words[i][j] == 'p' || words[i][j] == 'v')
                    {
                        words[i].Replace(words[i][j], '1');
                    }

                     else if (words[i][j] == 'c' || words[i][j] == 'g' || words[i][j] == 'j' || words[i][j] == 'k'
                    || words[i][j] == 'q' || words[i][j] == 's' || words[i][j] == 'x' || words[i][j] == 'z')
                {
                    char xx = words[i][j];
                    words[i].Replace(xx, '2');
                    Console.WriteLine(words[i]);
                }
                else if (words[i][j] == 'd' || words[i][j] == 't')
                {
                    words[i].Replace(words[i][j], '3');
                }
                else if (words[i][j] == 'l')
                {
                    words[i].Replace(words[i][j], '4');
                }
                else if (words[i][j] == 'm' || words[i][j] == 'n')
                {
                    words[i].Replace(words[i][j], '5');
                }
                else if (words[i][j] == 'r')
                {
                    words[i].Replace(words[i][j], '6');
                }

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:11:56.863

您忘记了字符串是不可变的。

`words[i].Replace(words[i][j], '1')`返回具有替换值的新 String 实例。

您必须将引用分配回新生成的 String 对象：

```
words[i] = words[i].Replace(words[i][j], '1'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T23:12:04.000

该`.Replace`操作不会改变原始字符串。您必须将结果设置回源变量以应用更改。

```
words[i] = words[i].Replace(words[i][j], '0'); 
```

请注意，replace 适用于整个字符串，因此逐个字母搜索每个`a`,等并调用 replace 是多余的。`e`你可以这样做：

```
words[i] = words[i].Replace('a', '0');
words[i] = words[i].Replace('e', '0');
// etc.. 
```

或者更好的是，使用正则表达式：

```
words[i] = Regex.Replace(words[i], "[aeiouhwy]", "0");
words[i] = Regex.Replace(words[i], "[bfvp]", "1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T01:43:43.413

您可以使用[Regex.Replace](http://msdn.microsoft.com/es-es/library/xwewhkd1%28v=vs.80%29.aspx)以更紧凑和更有效的方式使相同的内容匹配。即，这个：

```
 for (int j = 0; j < words[j].Length; j++)
            {

                if (words[i][j]=='a'||words[i][j]=='e'||words[i][j]=='i'||words[i][j]=='o'||words[i][j]=='u'
                    ||words[i][j]=='h'||words[i][j]=='w'||words[i][j]=='y')
                {
                    words[i].Replace(words[i][j],'0');
                } 
```

可以用一个简单的正则表达式替换，如下所示：

```
 Regex re0 = new Regex("[aeiouhwy]"); // match any of this chras
  string changedWord = re0.Replace(word,"0"); 
```

你甚至可以`Replace`像这样链式调用方法：

```
 Regex re0 = new Regex("[aeiouhwy]"); // match any of this chras
  Regex re1 = new Regex("[bfpv]");
  string changedWord = re0.Replace(word,"0");
  changedWord = re1.Replace(changedWord,"1") 
```

等等。更容易书写和理解，也更高效。

# asp.net-mvc - 在 MVC Webgrid 中为 item.Quantity 实现文本框，并在回发时使用值

> ID：10711371
> 
> 赞同：2
> 
> 时间：2012-05-22T23:10:04.460
> 
> 标签：asp.net-mvc, textbox, postback, webgrid

我不确定这是否完全可能。

目前我已经设法为 webgrid 中的某个列显示一个文本框，但是当它被提交回控制器时，它是否有可能被更改为模型的一部分？

是否有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:21:58.437

是的，通过使其成为“文本”类型的输入，并将其放置在表单中。您可以在每一行中创建一个表单（在这种情况下，回发将是一条记录）；或者您可以将整个 Webgrid 放在一个表单中。后者更棘手，因为您必须为输入正确命名。例如，如果您的模型名为“mycollection”并且您的文本框以“prop1”为目标，那么您的行可能如下所示：

**第 1 行**

```
<input type="text" name="mycollection[0].prop1" value="@item.prop1" /> 
```

**第 2 行**

```
<input type="text" name="mycollection[1].prop1" value="@item.prop1" /> 
```

等等。

显然，这不是一个完整的答案，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:34:33.583

像这样的东西？

```
 var grid = new WebGrid(Model, canPage: true, rowsPerPage: 20);
    @grid.GetHtml(tableStyle: "table", alternatingRowStyle: "alternate", headerStyle: "header",
    columns: grid.Columns(
       grid.Column(columnName: "name", header: "Name", canSort: true),
       grid.Column(format: @<span>@Html.TextBox("Age",@item.age)</span>   ),              
       grid.Column(" ", " ", format: @<a href="@Url.Action("AddAge", "People", new { id = item.id, ag = age })">Add age</a>), 
```

然后你有

```
 public ActionResult AddAge(string id, int age = 1)
    {
        var peopleqry = db.People.Single(a => a.id== id);
        // do somehing with your age
        return RedirectToAction("Index");
    } 
```

不确定 Html.TextBox(... , *_* _) 是否有效。

我希望它有所帮助。

# java - 使用逗号分隔值构建字符串

> ID：10711374
> 
> 赞同：2
> 
> 时间：2012-05-22T23:10:34.873
> 
> 标签：java, sql, string, stringbuilder

为了构建数据库系统，我使用一个简单的构建器来生成基于用户选择的选择查询。它有几个布尔值，然后按如下方式进行

```
 StringBuilder builder = new StringBuilder();
    builder.append("SELECT ");
    if(addOpen)
        builder.append("Open ");
    if(addHigh)
        builder.append("High ");
    if(addLow)
        builder.append("Low ");
    if(addSettle)
        builder.append("Settle ");
    builder.append("FROM " + tableName); 
```

现在，我的问题是微不足道的 - 我需要包含逗号，但如果我包含逗号，那么它后面必须有一个值，所以我不能打开，或打开，关闭等。这个微不足道有没有一个巧妙的解决方案，但是对我来说出乎意料的困难？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T23:19:19.847

您是否正在寻找类似[Apache Commons 的 StringUtils.join()](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringUtils.html#join%28java.lang.Iterable,%20char%29)方法？IE：

```
Collection<String> selections = Arrays.asList("Open", "Low");
String clause = StringUtils.join(selections, ','); 
```

然后就

```
String sql = "SELECT " + clause + " FROM " + TableName; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T23:23:10.877

1）典型的情况是你先验地知道你有多少物品。因此，您只需循环“n-1”，然后不要在最后一项后附加逗号。

2）一种可能的解决方案：

```
 ArrayList<string> items = new ArrayList<String>();
  if(addOpen);
    items.add("Open ");
  if(addHigh)
    items.add("High ");
  if(addLow)
    items.add("Low ");
  if(addSettle)
    items.add("Settle ");

  StringBuilder builder = new StringBuilder();
  int i=0;
  for (i=0; i < items.size() - 1; i++) {
    builder.append(items[i] + ",");
  }
  builder.append(items[i] + "FROM " + tableName);
  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T23:19:19.050

有一个常见的技巧：始终选择一个您不感兴趣的常量：

```
builder.append ("SELECT 1 ");
if (addOpen)
    builder.append (", Open ");
if addHigh)
    builder.append (", High ");
if (addLow)
    builder.append (", Low ");
if (addSettle)
    builder.append (", Settle ");
builder.append ("FROM " + tableName); 
```

另一种方法在另一个方向上起作用，尾随逗号：

```
builder.append ("SELECT ");
if (addOpen)
    builder.append ("Open, ");
if (addHigh)
    builder.append ("High, ");
if (addLow)
    builder.append ("Low, ");
if (addSettle)
    builder.append ("Settle, ");
builder.append ("1 FROM " + tableName); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T23:20:59.900

有几种方法。第一个，这将是我的第一选择，根本不构建您的 SQL 语句，并且不显示字段。

第二个是构建字符串，然后删除最后一个逗号。

第三种是将每个字段名称放入一个数组中，并循环遍历数组，而不是将尾随逗号放在最后一个元素上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T06:32:54.860

在您的情况下，我使用类似于 Ryan Stewart 建议的解决方案，但我更喜欢 Google [Guava](http://code.google.com/p/guava-libraries/)而不是 Apache Commons。我更喜欢这个库，因为我觉得 Apache 库非常庞大且相互关联。下面是我将如何构建您的 SQL 字符串：

```
import com.google.common.base.Joiner;
import com.google.common.collect.Lists;
import com.google.common.base.Preconditions;
import com.google.common.base.Strings;
import java.util.List;

public class SqlJoiner {
    public String buildSql(
            boolean addOpen,
            boolean addHigh,
            boolean addLow,
            boolean addSettle,
            String tableName
    ) {
        Preconditions.checkArgument(!Strings.isNullOrEmpty(tableName));
        Preconditions.checkArgument(addOpen | addHigh | addLow | addSettle );

        final List<String> clauses = Lists.newArrayList();

        if (addOpen) clauses.add("Open");
        if (addHigh) clauses.add("High");
        if (addLow) clauses.add("Low");
        if (addSettle) clauses.add("Settle");

        StringBuilder builder = new StringBuilder();
        builder.append("SELECT ");
        builder.append(Joiner.on(',').join(clauses));
        builder.append(" FROM " + tableName);
        return builder.toString();
    }

} 
```

方法体开头的前提条件是确保至少有一个布尔选项始终为真，并且 tableName 不为 null 或为空。经常检查你的代码的前置条件，当你将来使用你的代码出错时，它会为你省去很多麻烦！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T23:20:11.360

我使用的技巧（在通用的半无类型伪代码中）是：

```
 pad = ""    # Empty string

 builder = "SELECT ";
 if (addOpen)
     builder += pad + "Open";   pad = ", ";
 if (addHigh)
     builder += pad + "High";   pad = ", ";
 if (addLow)
     builder += pad + "Low";    pad = ", ";
 if (addSettle)
     builder += pad + "Settle"; pad = ", ";
 builder += "FROM " + TableName; 
```

我见过的另一种方法是始终在条款之后包含逗号（或逗号空格），但在添加 FROM 子句之前将最后两个字符从值中删除。您的选择......即使您正在输出并且无法撤消追加，“pad”技术也有效。

# xml - XSLT 转换以添加多个不存在的子元素

> ID：10711376
> 
> 赞同：5
> 
> 时间：2012-05-22T23:10:59.697
> 
> 标签：xml, xslt

我有一个 xml 文档，如下所示：

```
<p>
  <c1 />
  <c2 />
</p> 
```

子元素 c1 和 c2 是可选的，但对于处理步骤，我需要它们存在。所以我正在尝试创建一个 xslt 样式表以将它们添加为空元素（子元素的顺序无关紧要）。

这是我的样式表：

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="p[not(c1)]">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
        <c1 />
    </xsl:copy>
</xsl:template>

<xsl:template match="p[not(c2)]">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
        <c2 />
    </xsl:copy>
</xsl:template> 
```

只要只缺少一个子元素，这就可以正常工作。但如果两者都缺失，则仅创建 c1。我如何防止这种情况并强制创建 c1 和 c2 （实际上是大约 10 个孩子）？

谢谢。约斯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:46:36.673

不太喜欢这种`xsl:if`方法。只要您不介意更改节点的顺序，这可能会更好：

```
<!--generic copy rule-->
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates" select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<!--copy rules specific to p-->
<xsl:template match="p">
    <xsl:copy>
        <xsl:apply-templates select="not(self::c1|self::c2)"/>
        <c1><xsl:apply-templates select="c1/*"/></c1>
        <c2><xsl:apply-templates select="c2/*"/></c2>
    </xsl:copy>
<xsl:template> 
```

基本思想是显式地生成 c1 和 c2 节点及其内容（如果存在，则不存在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T23:26:16.833

我会这样做：

```
<xsl:template match="p"> 
  <xsl:copy> 
    <xsl:apply-templates select="@*|node()"/> 
    <xsl:if test="not(c1)">
      <c1 /> 
    </xsl:if>
    <xsl:if test="not(c2)">
      <c2 /> 
    </xsl:if>
  </xsl:copy> 
</xsl:template> 
```

如果您有更长的可能子节点列表，则可以将它们放在变量中并使用 a`for-each`而不是 individual `if`：

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
  exclude-result-prefixes="msxsl">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:variable name="childrenFragment">
    <c1/>
    <c2/>
  </xsl:variable>

  <xsl:template match="p">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
      <xsl:variable name="this" select="."/>
      <xsl:for-each select="msxsl:node-set($childrenFragment)/*">
        <xsl:variable name="localName" select="local-name()"/>
        <xsl:if test="not($this/*[local-name()=$localName])">
          <xsl:element name="{$localName}"/>
        </xsl:if>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

只需在`childrenFragment`变量中添加您需要的所有元素。

（这些`msxsl:node-set`东西是微软特有的，如果你使用的是另一个 XSLT 处理器，你需要一些稍微不同的东西）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T03:56:35.877

**`xsl:element`这是一个不使用任何显式 XSLT 条件指令或任何指令的通用 XSLT 1.0 解决方案（可与 N 个待添加元素一起使用）**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vrtfNodesToAdd">
  <c1/><c2/>
</xsl:variable>

 <xsl:variable name="vNodesToAdd" select=
  "ext:node-set($vrtfNodesToAdd)/*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="p">
   <xsl:variable name="vCurrentP" select="."/>

   <xsl:copy>
    <xsl:apply-templates/>

    <xsl:for-each select="$vNodesToAdd">
       <xsl:copy-of select=
       "self::node()[not($vCurrentP/*[name() = name(current())])]"/>
    </xsl:for-each>
   </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
 <p>
 </p>
 <p>
  <c1/>
 </p>
 <p>
  <c2/>
 </p>
 <p>
  <c1/><c2/>
 </p>
</t> 
```

**产生了想要的正确结果：**

```
<t>
  <p>
    <c1 />
    <c2 />
  </p>
  <p>
    <c1 />
    <c2 />
  </p>
  <p>
    <c2 />
    <c1 />
  </p>
  <p>
    <c1 />
    <c2 />
  </p>
</t> 
```

# jquery - 如何在 html() 设置的 div 中选择 id

> ID：10711377
> 
> 赞同：0
> 
> 时间：2012-05-22T23:11:04.437
> 
> 标签：jquery, html

```
$('#somediv').html(' <div id="innerDiv"> Testing </div>'); 
```

从上面的语句中，我将#somediv 的 html 设置为

```
<div id="innerDiv"> Testing </div> 
```

我现在想选择 innnerDiv。我该怎么做？？

例如：$('#innnerDiv').html("Modified");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:12:32.423

就像你做的那样，一旦 html 在 DOM 上，你就可以选择它

```
$('#innnerDiv') 
```

如果你想要里面的html，你可以使用：

```
var htmlStr = $('#innnerDiv').html();
// in your case it will contain: Testing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:03:12.980

你说过什么 $('#innnerDiv').html("Modified"); 是访问#innerdiv 并修改其内容的正确方法

# iphone - Restkit 没有将对象保存到 CoreData sqlite 数据库

> ID：10711378
> 
> 赞同：0
> 
> 时间：2012-05-22T23:11:16.920
> 
> 标签：iphone, ios5, restkit

嗨，我已经在 RKManagedObject 存储和 RKObjectManager 方面设置了一个与 Restkit RKGithub 示例几乎相同的项目，并使用 RKFetchedResultsTableController 来驱动 tableview。

我有一个 Rails 后端，它发送一个在 Restkit 中映射的 JSON 有效负载。

我遇到的问题是，在 Rails 将 Json 发送回 iPhone 应用程序之后；我没有看到任何保存到 .sqlite 文件中的内容。我真的不明白这个。我的项目的设置几乎与 RKGithub 示例完全相同，但我没有得到相同的结果。

我正在使用 Restkit 10.0.0。这和这个有关系吗？我查看了代码，但我不明白数据何时存储到 sqlite 文件中。

如果我使用普通（苹果模板）核心数据 NSManagedObjectContext 等，这一切都有效，但当我使用 RKManagedObjectStore 时就不行了。

你能帮忙吗？我可以提供代码。只是不确定要复制粘贴代码的哪一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:22:02.403

好的。弄清楚了。我开始使用 RKFetchedResultsTableController 我意识到我无法使用该方法

[[RKObjectManager sharedManager].mappingProvider setMapping:ironmanClass forKeyPath:@"stark"];

要为我的 JSON 设置键路径，我必须使用 object mapping.rootkeypath 属性。

因此它没有映射任何东西，因为它不理解 JSON 格式

# google-apps-script - 用于为一个单元格提供多个超链接选择的谷歌电子表格脚本

> ID：10711379
> 
> 赞同：7
> 
> 时间：2012-05-22T23:11:19.797
> 
> 标签：google-apps-script, google-sheets

我有一个谷歌电子表格。在某些单元格中，它有多个名称（字符串），我想将它们与各个超链接相关联。

例如，如果我有一个像“Charles Darwin”这样的单元格，我很容易通过执行类似的操作从这个名称创建一个超链接 `=Hyperlink(VLOOKUP("Charles Darwin", People!$A$1:$B$738, 2, false), "Charles Darwin")` （请注意，我有一个“人物”表，我可以从中获取超链接）

但是，如果我碰巧在该单元格中有多个条目，请说“；” 或换行符分隔，例如“查尔斯达尔文；乔治华盛顿”，我不能这样做。我想让用户能够单击单元格，将单元格的内容（作为参数）发送到某种脚本，并让该脚本在我的“人物”表中找到超链接字符串，然后在该单元格旁边向用户显示一个小“弹出窗口”，可以单击所需的超链接。

我试图在这个网站上找到类似的东西，但似乎没有类似的东西出现。是否有人可以为我提供一两个链接（或基本示例代码），我可以开始尝试解决这个问题？（我假设这是可能的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:20:35.420

在同一个单元格上不可能有两个超链接。

可以将脚本写入 Google 电子表格，但我不确定它是否适合您的用例。我看到的解决方案是这样的：

*   用户单击所需的单元格，将其选中。
*   然后他点击自定义菜单并在那里选择一个条目，例如显示链接
*   将显示一个带有链接的弹出窗口（不是在单元格之外，而是在屏幕中央）。

你觉得这样好吗？代码看起来像这样（打开菜单工具 > 脚本编辑器）

```
function onOpen() {
  SpreadsheetApp.getActive().
    addMenu("Test", [{name: 'Show Links', functionName:'showLinks'}]);
}

function showLinks() {
  var values = SpreadsheetApp.getActiveRange().getValue().split(';');

  var app = UiApp.createApplication().setTitle('Links'); 
  var grid = app.createGrid(values.length, 2);

  for( var i = 0; i < values.length; ++i ) {
    var url = findLink(values[i]);
    grid.setWidget(
      i, 0, app.createLabel(values[i])).setWidget(
      i, 1, url ? app.createAnchor(url, url) : app.createLabel('Not Found'));
  }

  app.add(grid);
  SpreadsheetApp.getActive().show(app);
}

var mapName2Url = null;
function findLink(name) {
  if( mapName2Url == null ) { //lazy load
    mapName2Url = {};
    var data = SpreadsheetApp.getActive().getSheetByName('People').getDataRange().getValues();
    for( var i = 1; i < data.length; ++i ) //skipping the header
      mapName2Url[data[i][0]] = data[i][1];
  }
  return mapName2Url[name];
} 
```

将其粘贴到脚本编辑器后，运行两次 onOpen 函数以对其进行授权并为您创建菜单。下次打开电子表格时，应该会自动创建菜单。

顺便说一句，我没有测试过这段代码，所以它可能包含愚蠢的错误。

# mysql - 150 个 tinyint 还是一个 varchar(300)？

> ID：10711380
> 
> 赞同：0
> 
> 时间：2012-05-22T23:11:20.117
> 
> 标签：mysql, performance

我需要将 150 个不同的微小整数值（范围从 0 到 7）存储到 MySQL 数据库表行中。每次有 SELECT、INSERT 或 UPDATE 时，所有这些都会被一起读取和写入。该表将主要更新，将有 1 次插入，然后对行进行大约 1000 次更新。DELETES 和 SELECTS 很少发生，如果有的话。

性能方面，使用 150 个 tinyint 列还是 varchar(300) 更好？

我主要关心的是 MySQL 在准备好结果集时处理 150 个列定义所需的时间，而如果缓存则需要双倍 RAM。我希望有数十万行，所以每一点性能都很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:13:45.737

我会将它们存储在 BINARY 列中，每个字节一个。数据集应该很容易放入内存中，150b*500k = 75Mb。我认为后处理字节数组的开销不会超过使用列进行查询和选择的数据库开销。INSERTs 和 UPDATEs 将从数据库中解析时间，并且构造起来很丑陋。不过，差异可能在毫秒范围内，所以我会做对您的应用程序端解码有意义的事情。

# c++ - C++ 错误：没有从“mapped_type”到“int”的可行转换

> ID：10711384
> 
> 赞同：0
> 
> 时间：2012-05-22T23:11:31.593
> 
> 标签：c++, stl, map, casting

我正在尝试从 C++ STL 实现映射，如下所示：

```
#include <string>
#include <iostream>
#include <map>
using namespace std;
#include "assembler.h"

// This Class makes use of the Map Template from the Standart Template Library
// All addresses are stored as numerical (Dec) integers

SymbolTable::SymbolTable() { // Constructor
    map <string, int> symbolTable;
    int address = 0;
}

void SymbolTable::addEntry(string symbol, int address) {
symbolTable[symbol] = address;
address++;
}

// Returns true if symbolTable already contains symbol
bool SymbolTable::contains(string symbol) {
    if (symbolTable.find(symbol) == symbolTable.end()) { return true; }
    else { return false; }
}

int SymbolTable::getAddress(string symbol) {
    return symbolTable[symbol];
} 
```

我尝试用

```
c++ *.cpp -0 assembler.out 
```

我收到以下错误消息：

```
symboltable.cpp:57:9: error: no viable conversion from 'mapped_type' (aka 'std::basic_string<char>') to 'int'
    return symbolTable[symbol];
           ^~~~~~~~~~~~~~~~~~~
1 error generated. 
```

我在网上搜索了这个错误，我得到的只是与 STL 相关的错误报告，我无法弄清楚这些报告是否与我遇到的问题相同，如果是，如何解决它。难道我做错了什么？

我已经尝试（可能是愚蠢地）将违规行键入为

```
return (int) symbolTable[symbol]; 
```

感谢您的任何帮助。

我的头文件将类声明为：

```
class SymbolTable {
public:
    SymbolTable();
    void addEntry(string, int); 
    bool contains(string);
    int getAddress(string);
private:
    map <string, string> symbolTable;
    int address;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:15:43.547

这个：

```
SymbolTable::SymbolTable() { // Constructor
    map <string, int> symbolTable;
                        ^
                        ^ 
```

是函数局部变量，而不是成员变量。它与`symbolTable`您在 eg 中访问的不同`getAddress`，它可能**是**一个成员变量。您还没有显示类主体，但我的猜测是它的定义不同。

# asp.net - 即使在使用 IsDBNull 检查后也出现 NullReferenceException

> ID：10711386
> 
> 赞同：0
> 
> 时间：2012-05-22T23:11:53.610
> 
> 标签：asp.net, vb.net

我有以下代码：

```
Dim getProspect = (From p In dbContext.IRF_Prospects _
                   Where p.url = prospect_url _
                   Select p).FirstOrDefault
' If they have a record...
If Not IsDBNull(getProspect) Then
    If IsDBNull(getProspect.user_id) Then
        ' Prepopulate the form with their information.
        txtFirst.Text = getProspect.first_name
Else
        ' Redirect them to login.
        Response.Redirect("login.aspx")
End If 
```

当我执行它时，它会抛出一个未设置为对象错误实例的对象引用`getProspect.user_id`。为什么要这样做？我`IsDBNull`首先验证它是否存在的事实不应该防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:15:22.923

`DBNull``Nothing`和你所拥有的不一样`Nothing`。`FirstOrDefault`，顾名思义，返回第一项或默认值，`Nothing`用于引用类型 - never `DBNull`。

```
Dim getProspect = (From p In dbContext.IRF_Prospects _
                   Where p.url = prospect_url _
                   Select p).FirstOrDefault
' If they have a record...
If getProspect IsNot Nothing Then
    If IsDBNull(getProspect.user_id) Then
        ' Prepopulate the form with their information.
        txtFirst.Text = getProspect.first_name
    Else
        ' Redirect them to login.
        Response.Redirect("login.aspx")
    End If 
```

# sql-server - SQL Server 2008 R2 在开始几分钟后变慢

> ID：10711393
> 
> 赞同：0
> 
> 时间：2012-05-22T23:12:25.467
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我有一个带有数千行表的数据库的 sql server 2008R2。当我启动服务器时，快速执行此查询：

```
exec sp_executesql N'SELECT *, [t0].[distance] AS [Meters], @p4 AS [ToWhat]
FROM [dbo].[getEventsByRange](@p0, @p1, @p2, @p3) AS [t0]
LEFT JOIN [dbo].[Event] AS [t1] ON [t0].[idEvent] = [t1].[id]
ORDER BY [t0].[distance]',N'@p0 var 
```

其中 getEventsByRange 是这个函数：

```
SELECT idEvent, geography::STGeomFromText('POINT(' + @userLongitude + ' ' +       @userLatitude + ')', 4326).STDistance([Coordinates]) as distance
FROM EventCoords
INNER JOIN Event ON EventCoords.idEvent = Event.id
WHERE DAY(start_time)=DAY(@timeMax) AND MONTH(start_time)=MONTH(@timeMax)AND
YEAR(start_time)=YEAR(@timeMax) and 
geography::STGeomFromText('POINT(' + @userLongitude + ' ' + @userLatitude + ')', 4326).STDistance([Coordinates]) < @maxDistance 
```

几分钟后，此查询的执行速度变得非常慢。问题出在哪里？为什么当服务器没有查询缓存时会快速运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:18:46.237

难道是参数嗅探导致了次优缓存执行计划的重用？

要查看是否是这种情况并将 OPTION (RECOMPILE) 放在查询的末尾：

```
ORDER BY [t0].[distance]
OPTION (RECOMPILE) 
```

如果查询保持高性能（因此问题是参数嗅探），我们可以提出一些更好的建议

# r - 斯皮尔曼相关性和联系

> ID：10711395
> 
> 赞同：31
> 
> 时间：2012-05-22T23:12:26.693
> 
> 标签：r, correlation

我在小组配对排名上计算 Spearman 的 rho。斯皮尔曼以不正确处理领带而闻名。例如，取 2 组 8 的排名，即使两组中有 6 次是并列，相关性仍然很高：

```
> cor.test(c(1,2,3,4,5,6,7,8), c(0,0,0,0,0,0,7,8), method="spearman")

    Spearman's rank correlation rho

S = 19.8439, p-value = 0.0274

sample estimates:
      rho 
0.7637626 

Warning message:
 Cannot compute exact p-values with ties 
```

对于该数据，p 值 <.05 似乎具有相当高的统计意义。R中是否有Spearman的平局校正版本？迄今为止，用很多关系计算它的最佳公式是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-22T23:37:57.170

好吧，***Kendall tau 等级相关性***也是对两个序数（或等级转换）变量之间统计相关性的非参数检验——如 Spearman 的，但与 Spearman 的不同，**可以处理 tie**。

更具体地说，有*三个*Kendall tau 统计数据——tau-a、tau-b 和 tau-c。**tau-b 特别适用于处理关系。**

tau-b 统计量通过一个除数项处理*关系*（即，对的两个成员具有相同的序数值），该除数表示未绑定在 x 上的对数与未绑定在 y 上的数之间的几何平均值。

Kendall 的 tau 不是 Spearman 的——它们不一样，但也非常相似。您必须根据上下文决定两者是否足够相似，这样一个可以替代另一个。

例如，**tau-b**：

```
Kendall_tau_b = (P - Q) / ( (P + Q + Y0)*(P + Q + X0) )^0.5 
```

**P**：*一致对*的数量（“一致”是指数据点对中每个成员的行列一致）

**Q** :*不一致对的数量*

**X0** : 未绑定在 x 上的对数

**Y0** : 未绑定在 y 上的对数

事实上，Spearman 的 rho 有一个变体，它明确地解释了关系。在我需要非参数秩相关统计的情况下，我总是选择 tau 而不是 rho。原因是*rho 对**平方**误差*求和，而*tau 对绝对差异求和*。鉴于 tau 和 rho 都是有能力的统计数据，我们可以选择，对差异 (tau) 的线性惩罚在我看来一直是一种更自然的表达等级相关性的方式。这不是建议，您的上下文可能完全不同，并且另有规定。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-06-29T23:27:01.747

我认为`exact=FALSE`可以解决问题。

```
cor.test(c(1,2,3,4,5,6,7,8), c(0,0,0,0,0,0,7,8), method="spearman", exact=FALSE)

    Spearman's rank correlation rho

data:  c(1, 2, 3, 4, 5, 6, 7, 8) and c(0, 0, 0, 0, 0, 0, 7, 8)
S = 19.8439, p-value = 0.0274
alternative hypothesis: true rho is not equal to 0
sample estimates:
      rho 
0.7637626 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-05T12:27:46.047

cor.test with method="spearman" 实际上计算了针对平局校正的 Spearman 系数。我已经通过“手动”从 Zar 1984，生物统计分析中的方程式计算平局校正和平局未纠正的 Spearman 系数来检查它。这是代码 - 只需替换您自己的变量名称即可自行检查：

```
ym <- data.frame(lousy, dors) ## my data

## ranking variables
ym$l <- rank(ym$lousy)
ym$d <- rank(ym$dors)

## calculating squared differences between ranks
ym$d2d <- (ym$l-ym$d)^2

## calculating variables for equations 19.35 and 19.37 in Zar 1984

lice <- as.data.frame(table(ym$lousy))

lice$t <- lice$Freq^3-lice$Freq

dorsal <- as.data.frame(table(ym$dors))

dorsal$t <- dorsal$Freq^3-dorsal$Freq

n <- nrow(ym)
sum.d2 <- sum(ym$d2d)
Tx <- sum(lice$t)/12
Ty <-sum(dorsal$t)/12

## calculating the coefficients

rs1 <- 1 - (6*sum.d2/(n^3-n))  ## "standard" Spearman cor. coeff. (uncorrected for ties) - eq. 19.35

rs2 <- ((n^3-n)/6 - sum.d2 - Tx - Ty)/sqrt(((n^3-n)/6 - 2*Tx)*((n^3-n)/6 - 2*Ty)) ## Spearman cor.coeff. corrected for ties - eq.19.37

##comparing with cor.test function
cor.test(ym$lousy,ym$dors, method="spearman") ## cor.test gives tie-corrected coefficient! 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-18T14:21:24.533

*   平局校正的斯皮尔曼

    使用`method="spearman"`为您提供了平局校正的 Spearman。根据定义，Spearman 的 rho 只是针对样本数据**等级**计算的**Pearson 样本相关系数。**所以它在存在和不存在关系的情况下都有效。您可以看到，将原始数据替换为他们的等级（平局的中等级）并使用后，您将得到相同的结果：**`method="pearson"`**

     **```
    > cor.test(rank(c(1,2,3,4,5,6,7,8)), rank(c(0,0,0,0,0,0,7,8)), method="pearson")

    Pearson's product-moment correlation

    data:  rank(c(1, 2, 3, 4, 5, 6, 7, 8)) and rank(c(0, 0, 0, 0, 0, 0, 7, 8))
    t = 2.8983, df = 6, p-value = 0.0274
    alternative hypothesis: true correlation is not equal to 0
    95 percent confidence interval:
     0.1279559 0.9546436
    sample estimates:
      cor 
    0.7637626 
    ```

    注意，有一个简化的**no-ties Spearman 版本**，实际上是`cor.test()`在没有 ties 的情况下用于实现，但它相当于上面的定义。** 
***   P值

    如果数据存在关联，则既不会为 Spearman 也不会为 Kendall 度量（在实施中）计算精确的 p 值`cor.test()`，因此会发出警告。正如 Eduardo 的帖子中提到的，为了不收到警告，您应该设置`exact=FALSE`，** 

 *** * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-23T22:07:16.343

论文[“A new rank correlation coefficient with application to the consensus ranking problem”](https://onlinelibrary.wiley.com/doi/abs/10.1002/mcda.313)旨在解决带平局问题的排名问题。它还提到不应将 Tau-b 用作衡量弱排序之间一致性的排名相关性度量。

Emond, EJ 和 Mason, DW (2002)，一种新的等级相关系数，适用于共识等级问题。*J. Multi-Crit。决定。肛门，11*：17-28。doi:10.1002/mcda.313

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-11T17:27:29.787

我遇到了类似的问题，通过阅读此处的答案和 RI 上的帮助文件看到，当你有联系时，你必须将参数`exact = FALSE`) 添加到`cor.test()`函数中。通过添加这个，它不会尝试计算精确的 P 值，而是“测试统计量是缩放到零均值和单位方差的估计值，并且近似正态分布”。就我而言，结果完全一样，但没有关于关系的警告。

```
cor.test(x, y, method = "spearm", exact = FALSE) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-19T14:25:11.283

R 包[ConsRank](https://cran.r-project.org/web/packages/ConsRank/ConsRank.pdf)包含 Edmon 和 Mason 的 Tau_X 的实现。这似乎是（数学上）目前最知名的处理关系的方法。

请参阅[文档](https://rdrr.io/cran/ConsRank/man/Tau_X.html)，其中的用法为

```
Tau_X(X, Y=NULL) 
```

where`X`可以是一个矩阵。

正如@wibeasley 所指出的，Emond 和 Mason (2002) 提出了 Tau_X，这是一种似乎优于 Kendal 的 Tau-b 的新等级相关系数。NelsonGon 担心这篇论文是 2002 年的，比这个问题早了几年，但似乎忽略了 Spearman 的相关性可以追溯到 1904 年，而 Kendall 的 Tau 是 1938 年。**

# java - java - 插入具有自动增量字段的行

> ID：10711399
> 
> 赞同：2
> 
> 时间：2012-05-22T23:12:34.517
> 
> 标签：java, sql, auto-increment

我试图在表中插入一行，带有一个自动增量字段，但我遇到了错误。表的结构是：

*   id：自动递增
*   级别：文本
*   概念：文本

.

```
String sql = "INSERT INTO Contents (level,concept) VALUES ('"+string_value1+"','"+string_value2+"')";
pst = con.prepareStatement(sql);
pst.execute(); 
```

在 w3c 中，我读到要在表中插入一条新记录，我们不必为“自动增量”列指定一个值（将自动添加一个唯一值）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:51:39.647

我找到了。我收到错误的原因是我使用了“级别”这个词作为字段名称。显然它是一个保留字。我改变了它，我的代码有效。

谢谢大家的帮助。

-Sajmon，感谢 sql 注入技巧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:13:05.990

你是对的，我们不应该插入 Identity 列。你能发布你得到的错误吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T23:24:45.913

这是您需要做的：

```
// Make this private static final - no need to keep creating the String
private static final String INSERT_CONTENTS = "INSERT INTO Contents(level,concept) VALUES(?,?)";
pst = con.prepareStatement(INSERT_CONTENTS); 
pst.setString(1, levelValue); // bind the variables - this is what PreparedStatement is for
pst.setString(2, conceptValue);
int numRowsAffected = pst.executeUpdate(); 
```

由于我看不到您的代码还有哪些其他恶作剧，因此这是一个完整的工作示例，您应该能够轻松地为您的数据库和表进行修改：

```
package persistence;

import java.sql.*;
import java.util.*;

/**
 * util.DatabaseUtils
 * User: Michael
 * Date: Aug 17, 2010
 * Time: 7:58:02 PM
 */
public class DatabaseUtils {
    private static final String DEFAULT_DRIVER = "oracle.jdbc.driver.OracleDriver";
    private static final String DEFAULT_URL = "jdbc:oracle:thin:@host:1521:database";
    private static final String DEFAULT_USERNAME = "username";
    private static final String DEFAULT_PASSWORD = "password";
/*
    private static final String DEFAULT_DRIVER = "org.postgresql.Driver";
    private static final String DEFAULT_URL = "jdbc:postgresql://localhost:5432/party";
    private static final String DEFAULT_USERNAME = "pgsuper";
    private static final String DEFAULT_PASSWORD = "pgsuper";
*/
/*
    private static final String DEFAULT_DRIVER = "com.mysql.jdbc.Driver";
    private static final String DEFAULT_URL = "jdbc:mysql://localhost:3306/party";
    private static final String DEFAULT_USERNAME = "party";
    private static final String DEFAULT_PASSWORD = "party";
*/

    public static void main(String[] args) {
        long begTime = System.currentTimeMillis();

        String driver = ((args.length > 0) ? args[0] : DEFAULT_DRIVER);
        String url = ((args.length > 1) ? args[1] : DEFAULT_URL);
        String username = ((args.length > 2) ? args[2] : DEFAULT_USERNAME);
        String password = ((args.length > 3) ? args[3] : DEFAULT_PASSWORD);

        Connection connection = null;

        try {
            connection = createConnection(driver, url, username, password);
            DatabaseMetaData meta = connection.getMetaData();
            System.out.println(meta.getDatabaseProductName());
            System.out.println(meta.getDatabaseProductVersion());

            String sqlQuery = "SELECT PERSON_ID, FIRST_NAME, LAST_NAME FROM PERSON ORDER BY LAST_NAME";
            System.out.println("before insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));

            connection.setAutoCommit(false);
            String sqlUpdate = "INSERT INTO PERSON(FIRST_NAME, LAST_NAME) VALUES(?,?)";
            List parameters = Arrays.asList("Foo", "Bar");
            int numRowsUpdated = update(connection, sqlUpdate, parameters);
            connection.commit();

            System.out.println("# rows inserted: " + numRowsUpdated);
            System.out.println("after insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));
        } catch (Exception e) {
            rollback(connection);
            e.printStackTrace();
        } finally {
            close(connection);
            long endTime = System.currentTimeMillis();
            System.out.println("wall time: " + (endTime - begTime) + " ms");
        }
    }

    public static Connection createConnection(String driver, String url, String username, String password) throws ClassNotFoundException, SQLException {
        Class.forName(driver);
        if ((username == null) || (password == null) || (username.trim().length() == 0) || (password.trim().length() == 0)) {
            return DriverManager.getConnection(url);
        } else {
            return DriverManager.getConnection(url, username, password);
        }
    }

    public static void close(Connection connection) {
        try {
            if (connection != null) {
                connection.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(Statement st) {
        try {
            if (st != null) {
                st.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void rollback(Connection connection) {
        try {
            if (connection != null) {
                connection.rollback();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static List<Map<String, Object>> map(ResultSet rs) throws SQLException {
        List<Map<String, Object>> results = new ArrayList<Map<String, Object>>();
        try {
            if (rs != null) {
                ResultSetMetaData meta = rs.getMetaData();
                int numColumns = meta.getColumnCount();
                while (rs.next()) {
                    Map<String, Object> row = new HashMap<String, Object>();
                    for (int i = 1; i <= numColumns; ++i) {
                        String name = meta.getColumnName(i);
                        Object value = rs.getObject(i);
                        row.put(name, value);
                    }
                    results.add(row);
                }
            }
        } finally {
            close(rs);
        }
        return results;
    }

    public static List<Map<String, Object>> query(Connection connection, String sql, List<Object> parameters) throws SQLException {
        List<Map<String, Object>> results = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            rs = ps.executeQuery();
            results = map(rs);
        } finally {
            close(rs);
            close(ps);
        }
        return results;
    }

    public static int update(Connection connection, String sql, List<Object> parameters) throws SQLException {
        int numRowsUpdated = 0;
        PreparedStatement ps = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            numRowsUpdated = ps.executeUpdate();
        } finally {
            close(ps);
        }
        return numRowsUpdated;
    }
} 
```

# c# - 带有 C# 问题的 JSON 反序列化

> ID：10711400
> 
> 赞同：0
> 
> 时间：2012-05-22T23:13:11.597
> 
> 标签：c#, arrays, json, serialization, primitive

我在读取 C# 中的以下 JSON 输出时遇到问题。我对 JSON 语法不太熟悉，但它似乎没有正确格式化，或者我不清楚如何正确反序列化数据：

> 数组（ [label] => Column_Name [column] => column0 ）
> 
> 15 0
> 
> 数组 ( [0] => 0 [1] => 数组 ( )
> 
> ```
> [2] => 0 ) {"total":0,"entities":[],"page":0} 
> ```

C# 中使用的代码很简单：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = WebRequestMethods.Http.Get;
request.Accept = "application/json";
HttpWebResponse response = request.GetResponse() as HttpWebResponse;
Encoding enc = Encoding.GetEncoding(1252);
StreamReader configStream = new StreamReader(response.GetResponseStream(), enc);
var configuration = configStream.ReadToEnd();
JavaScriptSerializer jSerialize = new JavaScriptSerializer();
List[] operations = jSerialize.Deserialize<List[]>(configuration); 
```

我收到的错误是“数组”不是有效的 JSON 原语。假设 JSON 输出中的语法*是*正确的，我该如何反序列化数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:21:12.920

您的代码应该适用于正确的 JSON 输入。您的输入中唯一正确的 json 部分是：`{"total":0,"entities":[],"page":0}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T23:23:57.927

在我的 Silverlight 项目之一中，我这样做了：

```
using Newtonsoft.Json; //add this library to refferences

ObservableCollection<MyClass> list = JsonConvert.DeserializeObject<ObservableCollection<MyClass>>(json) 
```

希望这有帮助。

# android - 选项卡：膨胀选项卡背后的无法解释的视图

> ID：10711408
> 
> 赞同：1
> 
> 时间：2012-05-22T23:13:59.973
> 
> 标签：android, tabs

我有一个自定义选项卡活动，我在 SO 的大量帮助下组合在一起。但是，我遇到了几个问题，我在这里找不到答案。

首先，所有选项卡状态都来自我调整了颜色的 android apk 选项卡资源。未选择的标签九补丁图像显示在每个标签下方，我无法让它消失，有什么建议吗？

其次，当我第一次进入选项卡活动时，焦点选项卡的文本不会改变，但是当我按下选项卡，或者移动到另一个选项卡并返回时，文本会改变。如何让初始焦点文本显示为按下后显示的焦点文本？

这里有图片来说明我的意思；左侧初始加载，右侧按下，两个图像都显示未选择的选项卡图像，显示在选项卡后面：

我试图发布标签外观的图像，但我的代表还不够高。对不起！

这是我正在膨胀的选项卡布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="75dp"
    android:layout_weight="1"
    android:background="@drawable/custom_tab_selector"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/ivTabIicon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" />

    <TextView
        android:id="@+id/tvTabTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

这是我的选择器 XML

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Active tab -->
    <item 
        android:drawable="@drawable/tab_selected" 
        android:state_focused="false" 
        android:state_pressed="false" 
        android:state_selected="true"/>

    <!-- Inactive tab -->
    <item 
        android:drawable="@drawable/tab_unselected"
        android:state_focused="false" 
        android:state_pressed="false" 
        android:state_selected="false"/>

    <!-- Pressed tab -->
    <item 
        android:drawable="@drawable/tab_press" 
        android:state_pressed="true"/>

    <!-- Selected tab (using d-pad) -->
    <item 
        android:drawable="@drawable/tab_focus" 
        android:state_focused="true" 
        android:state_pressed="false" 
        android:state_selected="true"/>

</selector> 
```

这是我的活动 java 部分，它膨胀并显示每个选项卡

```
// Initialize a TabSpec for each tab and add it to the TabHost
// Team tab
View tabTeamIndicator = LayoutInflater.from(this).inflate(R.layout.tab_team_layout, getTabWidget(), false);
spec = tabHost.newTabSpec("teamTab");
title = (TextView) tabTeamIndicator.findViewById(R.id.tvTabTitle);
title.setText("Team Manager");
icon = (ImageView) tabTeamIndicator.findViewById(R.id.ivTabIicon);
icon.setImageResource(R.drawable.custom_teamtab_icon);

spec.setIndicator(tabTeamIndicator);
spec.setContent(intentTeam);
tabHost.addTab(spec); 
```

非常感谢您的帮助！顺便说一句，我正在尝试的手机上的颜色看起来比在模拟器中的要好得多！！！

编辑：更改线程标题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T23:44:09.800

这里是愚蠢的错误。包含选项卡小部件的 xml 布局具有

```
android:background="@drawable/custom_tab_selector" 
```

其中的属性导致选项卡的背景在背景中第二次绘制。

# c++ - 'C2504 基类未定义' 错误，尽管#include 和前向声明？

> ID：10711409
> 
> 赞同：1
> 
> 时间：2012-05-22T23:14:07.940
> 
> 标签：c++, compiler-errors

下面的代码怎么会产生`C2504: 'GameObject': base class undefined?!`错误：

```
#ifndef INCLUDED_PLAYER
#define INCLUDED_PLAYER
#include "GameObject.h"
#include "Game.h"
#include "Bullet.h"
#include <SFML/Window/Keyboard.hpp>

class GameObject;
class Player:
    public GameObject
{ <- Compiler Error 
```

编辑：发现问题，无论出于何种原因，我在 GameObject.h 中添加了不必要的包含。删除包括解决了我所有的问题。

# java - 使用 O(n log n) 复杂度按值对 java HashMap 进行排序

> ID：10711413
> 
> 赞同：1
> 
> 时间：2012-05-22T23:14:25.180
> 
> 标签：java, collections, hashmap

我知道这个问题已经被问过很多次了。但是几乎所有的解决方案都具有 O(n^2) 的计算复杂度。

我正在寻找具有 O(n log n) 复杂性的解决方案。有人可以建议吗？

非常感谢，柴坦亚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T23:19:21.283

将条目复制到 a `List`，按值排序`List`；复制回`LinkedHashMap`. 我认为甚至不可能有更好的解决方案。

```
List<Entry<K, V>> entries = new ArrayList<Entry<K, V>>(map.entrySet());
Collections.sort(entries, new Comparator<Entry<K, V>>() {
  public int compare(Entry<K, V> left, Entry<K, V> right) {
    return left.getValue().compareTo(right.getValue());
  }
}
Map<K, V> sortedMap = new LinkedHashMap<K, V>(entries.size());
for (Entry<K, V> entry : entries) {
  sortedMap.put(entry.getKey(), entry.getValue());
} 
```

# javascript - $.ajax 在此脚本中干扰 .hide() 和 .show() Jquery

> ID：10711415
> 
> 赞同：0
> 
> 时间：2012-05-22T23:15:06.473
> 
> 标签：javascript, jquery, html

（在 Firefox 和 IE9 中它不起作用。在 Chrome 中，这有效）

如果我删除 ajax，则隐藏/显示 JQuery 可以工作。有什么解决办法吗？

```
<form id="ppform" action="blah.asp" method="post">
<div id="saleload">Blah</div>
<button id="sendbutton">Send</button>
</form>

$(document).ready(function(){

    $('#saleload').hide();

    $('#sendbutton').click(function() {

        $('#saleload').show();

        $.ajax({
            type: "POST",
            url: /blah/blah.asp,
            data: reqBody,
            dataType: "json",
            success:function(data,textStatus){ 

                if (data.redirect) {
                   window.location.href = data.redirect;
                }else{
                    $("#ppform").replaceWith(data.form);
                }
             }
        });
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:31:35.003

这一行：

```
$("#ppform").replaceWith(data.form); 
```

正在用您的 Ajax 请求的响应替换整个表单内容。这意味着您设置的点击处理程序也将消失，因为`#sendbutton`将消失。即使您在内部有另一个具有相同 ID 的按钮`data.form`，它也不起作用。您必须改用事件委托：

```
$(document).ready(function(){
    $('#saleload').hide();
    $(document).on('click', '#sendbutton', function(){
        $('#saleload').show();
        $.ajax({
            type: "POST",
            url: "/blah/blah.asp",
            data: reqBody,
            dataType: "json",
            success:function(data,textStatus){ 
                if (data.redirect) {
                   window.location.href = data.redirect;
                } else {
                    $("#ppform").replaceWith(data.form);
                }
             }
        });
    }); 
}); 
```

另外：您似乎正在`reqBody`向您的服务器发布一个未定义的变量，并且正如 lonesomeday 上面所说的，您在 URL 周围缺少引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:22:55.600

显而易见的原因是您的 Javascript 存在错误，导致整个部分无法执行。快速浏览您的代码会显示这一行：

```
 url: /blah/blah.asp, 
```

字符串需要用引号引起来：

```
 url: "/blah/blah.asp", 
```

# python - 如何在 webapp2 中导入模型和处理程序以确保新应用实例的快速启动

> ID：10711421
> 
> 赞同：1
> 
> 时间：2012-05-22T23:15:38.923
> 
> 标签：python, google-app-engine, lazy-initialization, webapp2

我希望我的谷歌应用引擎 webapp2 应用尽快启动（创建一个新的应用实例）。我想知道我应该注意哪些明显的减速（我知道......过早的优化，但如果我能提供帮助，我不想在最后进行大规模的重构）

我有一个类似于这样的文件夹层次结构：

```
-root_folder
__init__.py
main.py
config.py
routes.py
models.py
gviz_api.py
... 20 more .py files
-web_folder
    __init__.py
    some_handlers.py
    more_handlers.py
    20 more.py files
    ..
-data_model_folder
    __init__.py
    some_models.py
    more_ndb_models.py
    10 more model files
-many more folders e.g. templates, simpleauth etc. 
```

在 main.py 中，我使用路由器创建了一个应用程序实例（路由器是从 routes.py 导入的）。routes.py 导入每个处理程序（为每个路由分配一个处理程序）。每个处理程序都会导入几乎所有数据模型。这是否意味着我的应用程序创建新应用程序实例的速度很慢？

我预计到我的项目结束时会有大约 100 个处理程序和 30 个数据模型，尽管其中许多将很少使用。

导入数据模型（从 some_handlers.py 内部）

以下内容是否足够快：

`from root_folder.data_model_folder.more_ndb_models import special_model`

我应该寻找使用配置/注册表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:22:04.107

Webapp2 支持[延迟导入的处理程序](http://webapp2.readthedocs.io/en/latest/guide/routing.html#guide-routing-lazy-handlers)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:52:12.477

通常，减速是由于导入大型框架，而不是大量的应用程序代码。所以我不会太担心这个，即使你有 100 个 .py 文件。（相信我，100 并没有那么多......）我也会研究热身请求。

我不是惰性导入技巧的忠实拥护者——它们会在极端情况下导致复杂的故障模式（即难以调试），并且它们不会从 App Engine 对加载请求的额外宽松中受益（检查您的日志以了解它认为是加载请求）。

特别是，如果您在开始时没有导入所有模型类，则可能会出现“No model class found for kind 'X'”错误的风险。

# iphone - Objective-c 或 C 中的位掩码枚举

> ID：10711424
> 
> 赞同：2
> 
> 时间：2012-05-22T23:15:54.553
> 
> 标签：iphone, c

我正在尝试画一条线，根据值分成几段。例如，如果有 5 个字段，并且所有 5 个字段都为真，那么我的 Line 看起来像

```
----- 
```

如果说第一个和最后一个字段为真，而其他一切都是假的，那么它将是

```
-   - 
```

我想我可以用某种掩码来做到这一点。首先，我以前从来没有做过一点面具，但我想我到处都看到过它们。我想知道如何解决这个问题，并使用枚举而不是 1/0 来提高可读性。据我从数据中可以看出，对于不同的属性，我只需要 1 或 0 的值。但是，最好知道如何将其中一个值设为三级或更高级别的枚举以供将来参考。谢谢！

试图做类似的事情：

```
enum CodingRegions {
    Coding = 0x01,
    NonCoding = 0x02
};

enum Substitution {
    Synonymous = 0x04,
    NonSynonmous = 0x05
}; 
```

然后根据对象的值，我可以做

```
bitmask???? = object.CodingRegion | object.Substitution; 
```

然后稍后，以某种方式检查位掩码的值，然后根据值相应地绘制线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:48:40.127

不确定您的具体要求是什么，但这是用 C 编写的一种方式：

```
#include <stdio.h>

typedef enum MyField_ {
  hasWombat        = 1 << 0,
  hasTrinket       = 1 << 1,
  hasTinRoof       = 1 << 2,
  hasThreeWheels   = 1 << 3,
  myFieldEnd       = 1 << 4,
} MyField;

void printMyField(MyField data) {
  MyField field = 1;
  while (field != myFieldEnd) {
    printf("%c", data & field ? '-' : ' ');
    field <<= 1;
  }
  printf("\n");
}

int main() {
  MyField data = hasTrinket | hasThreeWheels;
  printMyField(data);
  data |= hasWombat; // set a field
  data &= ~hasTrinket; // clear a field
  printMyField(data);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:53:26.470

不确定这是您想要的，但是：

```
// assumed Coding/NonCoding, Synonomous/NonSynonymous are opposites of each other. If not, add more bit fields

enum CodingRegions 
{
    Coding = 1 << 0
} ;

enum Substitution
{
    Synonymous = 1 << 1
}

void PrintBitmask( NSUInteger bitmask )
{
    printf( "%s", bitmask & Coding != 0 ? "-" : " " ) ;
    printf( "%s", bitmask & Substitution != 0 ? "-" : " " ) ;

    printf( "\n" ) ;
} 
```

你`PrintBitmask()`也可以是这样的：

```
void PrintBitmask( NSUInteger bitmask )
{
    printf( "%s", bitmask & Coding != 0 ? "Coding" : "Noncoding" ) ;
    printf( "|" ) ;
    printf( "%s", bitmask & Substitution != 0 ? "Synonymous-" : "Nonsynonymous" ) ;

    printf( "\n" ) ;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T23:29:43.307

```
/* I prefer macros over enums (at least for something this simple) */
#define SPACE 0x0
#define DASH  0x1

/* input fields */
int fields[5] = {DASH,SPACE,SPACE,SPACE,DASH};

/* create bitmask */
for (int i=0; i<5; i++) {
    mask |= (fields[i] << i);
}

/* interpret bitmask and print the line */
for (int i=0; i<5; i++) {
    if (mask & (fields[i] << i)) {
        printf("%c", '-');
    } else {
        printf("%c", ' ');
    }
} 
```

# linux - 查找抛出路径必须在脚本中的表达式之前

> ID：10711425
> 
> 赞同：5
> 
> 时间：2012-05-22T23:16:31.170
> 
> 标签：linux, bash, shell, find, grep

我正在尝试将 find 和 grep 别名为一行，如下所示

```
alias f='find . -name $1 -type f -exec grep -i $2 '{}' \;' 
```

我打算将其运行为

```
f *.php function 
```

但是当我将它添加到 .bash_profile 并运行它时，我被击中

```
[a@a ~]$ f ss s
find: paths must precede expression
Usage: find [-H] [-L] [-P] [path...] [expression] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T23:20:35.160

别名不接受位置参数。你需要使用一个函数。

```
f () { find . -name "$1" -type f -exec grep -i "$2" '{}' \; ; } 
```

你还需要引用你的一些论点。

```
f '*.php' function 
```

这推迟了 glob 的扩展，以便`find`执行它而不是 shell。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T00:00:57.677

扩展丹尼斯威廉姆森的解决方案：

```
f() { find . -name "$1" -type f -print0 | xargs -0 grep -i "$2"; } 
```

使用`xargs`而不是`-exec`使您免于为每个 grep 生成一个新进程...如果您有很多文件，则开销可能会有所不同。

# c++ - cpp show 结果取决于之前的结果

> ID：10711428
> 
> 赞同：0
> 
> 时间：2012-05-22T23:17:01.190
> 
> 标签：c++, random

我们有按钮。用户单击按钮并接收`action1`或`action2`依赖于变量`percent_to_action2`（从 0 到 100）。给他的最简单的方法`action1`是`action2`基于`rand() % 100`和比较`percent_to_action2`。

但问题是，如果例如。`perfect_to_action = 50`无法保证在第一个随机`action1`用户之后`action2`（通过 rand()）。我正在寻找避免许多重复动作的方法。请**建议考虑先前的事件/或所有事件如何更准确地计数。**有例子和评论。目标是避免 rund() 可以给出的重复动作过多。例如百分比 = 50 rand() 可以给出 10/10 action2！

附言。`perfect_to_action`可以随时更改。
pps。对不起我英语。

**我的代码：**

```
 int num_rand = (rand() % 100 ) + 1; // from 1 to 100
                if (  num_rand <= current_percent_to_action2 )
                {
                    // action 1
                } else {} // action2 
```

我想要的例子：

百分比 = 50：action1 比 action2 比 action1 比 action2 等。

百分比 = 33：（首先按 rand）如果第一个 action1 比 action1 比 action2 比 action1 比 action1 比 action2 等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:54:34.277

```
static unsigned num_action_1 = 1;
static unsigned num_action_2 = 1;
double bias = double(num_action_2)/num_action_1;
double randomchance = 1.0-current_percent_to_action2/100.0;
double action_1_cutoff = RAND_MAX*randomchance*bias;
if (  rand() <= action_1_cutoff ) {
    // action 1
    ++num_action_1;
} else {
    // action2
    ++num_action_2;
} 
```

这将使随机性偏向发生频率较低的选项。我还对其进行了更改，以便动作 2 将在大约`current_percent_to_action2`百分比的时间内发生，而不是像您的代码中那样的动作 1。正如您从这张图表中看到的那样，它增加了很多复杂性，但您获得不平衡数量的结果的可能性要小得多。从长远来看，这些最终将几乎相同，最终都会连续给出 10 个字符串，这段代码开始时会更加均匀。

```
times #1     Even distribution    Biased distribution
    1               50%                  50%
    2               25%                   8.3%
    3               12.5%                 3.125%
    4                6.25%                1.25%
    5                3.13%                0.52%
    6                1.56%                0.22%
    7                0.78%                0.09%
    8                0.39%                0.04%
    9                0.20%                0.02%
    10               0.10%                0.01% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T23:21:04.793

如果您不想重复操作，您可以 a) 从所有操作中选择但最后一个操作，或 b) 像现在一样选择，但继续重新选择，直到您获得除上一个操作之外的其他操作。后者更容易做到，但速度较慢（可能慢很多）。

# wordpress - Facebook 的不同开放图元，例如一页中的按钮

> ID：10711433
> 
> 赞同：1
> 
> 时间：2012-05-22T23:18:01.563
> 
> 标签：wordpress, facebook-like, facebook-opengraph

我正在为 Wordpress 中的一家餐厅开发一个页面。在菜单页面上，我需要菜单中每个项目的 Like 按钮（这些项目是帖子，但它们没有单个页面）。如何添加 Like 按钮（在循环中）以便能够为每个菜单项向 og 添加不同的图像和标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:20:27.087

以防万一有人遇到这个问题：如果您没有 single.php，则 wordpress 使用 index.php。在标题中检查 is_single() 是否可以创建 og 元标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T23:47:52.127

你不能！对于要使用 Like 按钮的每个项目（将表示为 Open Graph 对象），您应该有单独的页面（具有唯一的 URL）。

# php - URL 转发到索引页面

> ID：10711436
> 
> 赞同：-1
> 
> 时间：2012-05-22T23:18:38.037
> 
> 标签：php, html

好的，所以当用户输入 www.shareit.me/matt 我希望它把他们带到 www.shareit.me/index.html 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:34:52.553

This rule in your .htaccess file should be enough:

```
RewriteEngine on
RewriteRule ^matt/?$ index.html [NC,QSA] 
```

Place the file in the document root.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:21:13.043

这是`.htaccess`我常用的一个文件。我将其转发到`index.php`，但将其更改为`.html`并且它应该可以正常工作。

```
Options +FollowSymLinks
IndexIgnore */*
RewriteEngine on
# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# otherwise forward it to index.html
RewriteRule . index.html 
```

# java - 带有 PL SQL 表类型参数的 Oracle 存储过程的 JDBC 调用

> ID：10711446
> 
> 赞同：4
> 
> 时间：2012-05-22T23:19:35.167
> 
> 标签：java, oracle, jdbc, plsql, cursor

我需要使用 PL/SQL 表类型的参数对过程进行 JDBC 调用。我正在尝试使用结构对象。但我没有做一些正确的事情。我收到错误：ORA-04043：对象“scott”。“objListStruct”不存在。

这是代码片段：

```
conn = Application.getDBConnection();
                CallableStatement cStmt = null;
                cStmt= conn.prepareCall("{call package1.procedure1"+"(?)}");
                Struct objListStruct = conn.createStruct("objListStruct",
                                objNameArr.toArray());
                cStmt.setObject(1, objListStruct,Types.STRUCT); 
```

参数“？” 对于此过程，类型为：

```
TYPE t_name IS TABLE OF TABLE1.name%TYPE 
```

任何使这项工作的见解都受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:06:52.513

```
String[] varStrArr = varArr.toArray(new String[compNameArr.size()]);
OracleCallableStatement cStmt = (OracleCallableStatement) 
conn.prepareCall("BEGIN SCHEMA.PACKAGE.procedure(?);END;");
cStmt.setPlsqlIndexTable(1,varStrArr,varStrArr.length,varStrArr.length,
                        OracleTypes.VARCHAR, 50);
cStmt.execute(); 
```

上面的代码有效。更多参考资料可在以下位置获得： [绑定 IN 参数](http://docs.oracle.com/cd/B19306_01/java.102/b14355/oraint.htm#BABCHCGF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:59:07.427

两件事情：

1）最简单的方法是不向程序传递任何东西。创建一个全局临时表，插入所需的所有数据，然后调用从临时表中读取的 proc。请注意不要自动提交连接。

2）如果你*必须*传入一个数组，你需要下拉并使用Oracle Array 类型。Oracle 数组类型将绑定到表类型。所以类似于（注意：代码未测试！）与此类似：

```
Object[] arrayObject = { x, y };

ArrayDescriptor descriptor = ArrayDescriptor.createDescriptor(
        "MY_SCHEMA.MY_ARRAY_TYPE", conn);
ARRAY myArray = new ARRAY(descriptor, conn, arrayObject);

CallableStatement cs = conn
        .prepareCall("{ call package1.procedure1(?)}");
cs.setArray(1, myArray);
cs.execute();
conn.close(); 
```

# java - Is there a non-reentrant ReadWriteLock I can use?

> ID：10711447
> 
> 赞同：19
> 
> 时间：2012-05-22T23:19:39.630
> 
> 标签：java, concurrency, locking

I need a ReadWriteLock that is NOT reentrant, because the lock may be released by a different thread than the one that acquired it. (I realized this when I started to get IllegalMonitorStateException intermittently.)

I'm not sure if non-reentrant is the right term. A ReentrantLock allows the thread that currently holds to lock to acquire it again. I do NOT want this behaviour, therefore I'm calling it "non-reentrant".

The context is that I have a socket server using a thread pool. There is NOT a thread per connection. Requests may get handled by different threads. A client connection may need to lock in one request and unlock in another request. Since the requests may be handled by different threads, I need to be able to lock and unlock in different threads.

Assume for the sake of this question that I need to stay with this configuration and that I do really need to lock and unlock in different requests and therefore possibly different threads.

It's a ReadWriteLock because I need to allow multiple "readers" OR an exclusive "writer".

It looks like this could be written using AbstractQueuedSynchronizer but I'm afraid if I write it myself I'll make some subtle mistake. I can find various examples of using AbstractQueuedSynchronizer but not a ReadWriteLock.

I could take the OpenJDK ReentrantReadWriteLock source and try to remove the reentrant part but again I'm afraid I wouldn't get it quite right.

I've looked in Guava and Apache Commons but didn't find anything suitable. Apache Commons has RWLockManager which might do what I need but I'm not sure and it seems more complex than I need.

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-23T01:33:44.807

A Semaphore allows different threads to perform the acquire and release of permits. An exclusive write is equivalent to having all of the permits, as the thread waits until all have been released and no additional permits can be acquired by other threads.

```
final int PERMITS = Integer.MAX_VALUE;
Semaphore semaphore = new Semaphore(PERMITS);

// read
semaphore.acquire(1);
try { ... }
finally {
  semaphore.release(1);
}

// write
semaphore.acquire(PERMITS);
try { ... }
finally {
  semaphore.release(PERMITS);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T21:14:49.423

I know you've already accepted another answer. But I still think that you are going to create quite a nightmare for yourself. Eventually, a client is going to fail to come back and release those permits and you'll begin to wonder why the "writer" never writes.

If I were doing it, I would do it like this:

```
Client issues a request to start a transaction
The initial request creates a task (Runnable/Callable) and places it in an Executor for execution
The initial request also registers that task in a Map by transaction id

Client issues the second request to close the transaction
The close request finds the task by transaction id in a map
The close request calls a method on the task to indicate that it should close (probably a signal on a Condition or if data needs to be passed, placing an object in a BlockingQueue) 
```

Now, the transaction task would have code like this:

```
public void run() {
    readWriteLock.readLock().lock();
    try {
        //do stuff for initializing this transaction
        if (condition.await(someDurationAsLong, someTimeUnit)( {
            //do the rest of the transaction stuff
        } else {
            //do some other stuff to back out the transaction
        }
    } finally {
        readWriteLock.readLock.unlock();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T23:53:33.240

Not entirely sure what you need, esp. why it should be a read write lock, but if you have task that need to be handled by many threads, and you don't want it to be processesd/accessed concurrently, I'd use actually a ConcurrentMap ( etc.).

You can remove the task from the map or substitute it with a special "lock object" to indicate it's locked. You could return the task with an updated state to the map to let another thread take over, or alternatively you can pass the task directly to the next thread and let it return the task to the map instead.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-08T20:55:06.623

They seem to have dropped the ball on this one by deprecating com.sun.corba.se.impl.orbutil.concurrent.Mutex;

I mean who in his right mind thinks that we won't need non-reentrant locks. Here we are, wasting our times arguing over the definition of reentrant (can slighty change in meaning per framework btw). Yes I want to tryLock on the same thread is that such a bad thing? it won't deadlock because ill else out of it. A non-reentrant lock that locks in the same thread can be very usefull to prevent errors on GUI apps where the user presses on the same button rapidly and repeatedly. Been there, done that, QT was right...again.

# php - 代码点火器选择为

> ID：10711461
> 
> 赞同：4
> 
> 时间：2012-05-22T23:21:07.400
> 
> 标签：php, codeigniter, select

我们 `select table.value as table_value from table`在codeigniter中怎么做？
该`AS`部分不起作用，因为当我尝试访问该值时，这不起作用：

```
 $qry_inp =  'select table.value as table_value from table '
    $query = $this->db->query($qry_inp); 

    echo $query->row('table_value ');// this will be empty, but it shouldn`t be 
```

无论是在 AR 中还是在简单查询中

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-06T07:21:44.267

很简单的事情。

```
$this->db->select('COLUMN_ACTUAL_NAME as `COLUMN_NAME_YOU_WANT_TO_SHOW`'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T23:23:46.913

这种行为记录在哪里？`row`不将列名作为参数；它[可选地需要一个行号](http://codeigniter.com/user_guide/database/results.html)，就是这样。像访问任何其他字段一样访问它：

```
echo $query->row()->table_value; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-02T07:22:13.223

我正在加入两个列名相同的表，所以我使用 as 关键字分隔两个表列，这就是在 codeigniter 中使用 AS 的方式

```
$this->db->select("departments.name AS 'dname'");
$this->db->select('positions.name');
```

# c# - 正确使用返回关键字

> ID：10711464
> 
> 赞同：0
> 
> 时间：2012-05-22T23:21:26.070
> 
> 标签：c#

我对编程很陌生，我有一个问题。我想获取网络上的计算机列表，我已经成功地做到了，然后我已经能够通过使用 .Count() 来获取有多少台计算机......问题是，我有几个完整的地方我想在其中引用该数字的代码，并且每次我尝试使用 c 时，它都会告诉我该变量在其上下文中不存在。我试图制作自己的公共方法，但随后它要求我在搜索后输入适当的回报。我仍然无法弄清楚..有人能指出我正确的方向吗？谢谢你。

```
public void ComputersOnNetwork()
{
   List<string> list = new List<string>();
   using (DirectoryEntry root = new DirectoryEntry("WinNT:"))
   {
       foreach (DirectoryEntry computer in computers.Children)
       {
           if ((computer.Name != "Schema"))
           {
               list.Add(computer.Name);
           }
       }

       foreach (string s in list)
       {
          int c = list.Count();
          return c;
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:26:22.547

可能您在方法中遗漏了该`return`声明。您需要有一个返回类型（在这种情况下可能是整数类型作为您返回的计算机数量）

```
public int ComputersOnNetwork()
{        
  List<string> list = new List<string>();
  using (DirectoryEntry root = new DirectoryEntry("WinNT:"))
  {
       foreach (DirectoryEntry computer in computers.Children)
       {
          if ((computer.Name != "Schema"))
          {
             list.Add(computer.Name);
          }
       }
  }
  return list.Count;     
} 
```

现在你可以像这样在任何你想要的地方调用它

```
int totalInThisCase=ComputersOnNetwork(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:36:32.167

您必须有一个返回类型，并且您应该使用计数变量而不是添加到列表然后返回计数（另外，您为什么要这样迭代列表？您不需要这样做）。

始终从逻辑上阅读您的代码，并查看操作是否在逻辑上正确执行。

```
public int ComputersOnNetwork()
{
    int count = 0;

    using (DirectoryEntry root = new DirectoryEntry("WinNT:"))
    {
        foreach (DirectoryEntry computer in root.Children)
        {
            if ((computer.Name != "Schema"))
            {
                count++;
            }
        }

    return count;
} 
```

或者您可以使用 LINQ 来创建一个简短的版本：

```
public int ComputersOnNetwork()
{
    using (var root = new DirectoryEntry("WinNT:"))
    {
        return root.Children.Cast<DirectoryEntry>().Count(x => x.Name != "Schema");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T23:34:08.497

There is no need to that final loop - if list contains all of the computers then this should do it:

```
 public void ComputersOnNetwork()
  {
       List<string> list = new List<string>();
       using (DirectoryEntry root = new DirectoryEntry("WinNT:"))
       {
           foreach (DirectoryEntry computer in computers.Children)
           {
               if ((computer.Name != "Schema"))
               {
                   list.Add(computer.Name);
               }
           }
       }

      return list.Count();
  } 
```

Return statements will stop the execution of a function as soon as you hit them, so your final for loop would only have run once.

Even without the return statement you would have had problems because `c` was declared within the loop and it would have gone out of **scope**, which is why you weren't able to reference it later on in your code. You need to be careful about declaring variables inside loops, they'll get re-defined on each iteration and although your code may compile it can be tricky to trace such bugs.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T23:36:56.503

最后你不需要 foreach 循环。您从不使用变量“s”，因此它是浪费处理。

要获得您想要的内容，请更改您的方法以重新调整 int 而不是 void，然后在最后返回 list.Count。

```
public int ComputersOnNetwork()
{
   List<string> list = new List<string>();
   using (DirectoryEntry root = new DirectoryEntry("WinNT:"))
   {
       foreach (DirectoryEntry computer in computers.Children)
       {
           if ((computer.Name != "Schema"))
           {
               list.Add(computer.Name);
           }
       }

       int c = list.Count;
       return c;
   }
} 
```

然后，您可以在需要该值时调用您的方法：

```
Int computerCount = ComputersOnNetwork(); 
```

# c# - “非静态字段需要对象引用”重新访问

> ID：10711472
> 
> 赞同：-1
> 
> 时间：2012-05-22T23:22:17.177
> 
> 标签：c#, oop

[在上一个问题](https://stackoverflow.com/questions/10693626/c-sharp-vs2010-why-am-i-getting-the-message-an-object-reference-is-required-f)中，我询问了主题标题错误消息，答案几乎是显而易见的。

然而，那个“归结”的例子来自一些没有被稀释的代码，现在我的新肉汤中再次出现了原来的问题。

我怀疑我可能会对很多‘有趣’的评论敞开心扉，但是嘿……没有愚蠢的问题，只有愚蠢的程序员！”

无论如何，这里是原始代码的一个稍微简化的版本：

```
public partial class Form1 : Form
{
    public static Form1 mForm = new Form1();

    // define textbox parameter structure
    struct ParmStruct
    {
        public TextBox sTextBoxName;
        public double dMinValue;
        public double dMaxValue;

        public ParmStruct(TextBox sTextBoxName, double dMinValue, double dMaxValue)
        {
            this.sTextBoxName = sTextBoxName;
            this.dMinValue = dMinValue;
            this.dMaxValue = dMaxValue;
        }
    }

    // Create list of Parameters (name, min, max)
    static ParmStruct[] ParmList = new ParmStruct[]
    {
        new ParmStruct { sTextBoxName = mForm.textBox1, dMinValue = -99, dMaxValue = 99 },
        new ParmStruct { sTextBoxName = textBox2, dMinValue = 0, dMaxValue = 100 } 
    };

    public Form1()
    {
        InitializeComponent();

        this.textBox1.TextChanged += new System.EventHandler(this.textBox1_TextChanged); 
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        TextBox tb1;

        tb1 = mForm.textBox1;
        tb1 = textBox2;

        double x = ParmList[0].dMaxValue;
    }
} 
```

ParmList 初始化的第二行`(sTextBoxName = textBox2)`不会编译，除非我做`sTextBoxName = mForm.textBox2.`

但是，该行将`tb1 = textBox2`编译，并且不需要 mForm。字首。

这是最初引起混乱的实际情况（就我而言，仍然如此）。

不太确定为什么编译器（VS 2010）可以在一种情况下解决它，而在另一种情况下却不能。

哦......并且代码在编译时确实有效。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:37:57.017

这是个问题。

```
// Create list of Parameters (name, min, max)
static ParmStruct[] ParmList = new ParmStruct[]
{
    new ParmStruct { sTextBoxName = mForm.textBox1, dMinValue = -99, dMaxValue = 99 },
    new ParmStruct { sTextBoxName = textBox2, dMinValue = 0, dMaxValue = 100 } 
}; 
```

在 的所有实例之间共享此变量没有任何意义`Form1`（这是`static`关键字所做的），因为表单的每个实例都有自己唯一的`textBox2`. 此外，正如 Chris 建议的那样，简单地删除`static`关键字也不是解决办法。`textBox2`在它被创建之前你不能引用它，这发生在内部`InitializeComponent`（由`Form1`构造函数调用）。这会更好：

```
// list of Parameters (name, min, max)
ParmStruct[] ParmList;

public Form1()
{
    InitializeComponent();

    // now the textboxes exist and can be associated with the structure
    ParmList = new ParmStruct[] {
        new ParmStruct { sTextBoxName = textBox1, dMinValue = -99, dMaxValue = 99 },
        new ParmStruct { sTextBoxName = textBox2, dMinValue = 0, dMaxValue = 100 } 
    };

    this.textBox1.TextChanged += new System.EventHandler(this.textBox1_TextChanged); 
} 
```

在构造函数和`textBox1_TextChanged`方法中，您可以引用`textBox1`并且`textBox2`无需任何进一步的限定，编译器将找到属于该`this`对象的那些，就像您键入`this.textBox1`一样（例如，参见构造函数的最后一个类似）。编译器不会使用来自`mForm`. 事实上，静态`mForm`字段没有理由，因为没有代码可以显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T23:30:22.213

textBox2 是一个仅存在于 mForm 上下文中的对象，因此您必须将其限定为 mForm 的字段，因为它尚未在您的方法中声明或作为您的类中的 [静态] 对象。

# database - 是否可以更改视图中列的数据类型？

> ID：10711473
> 
> 赞同：18
> 
> 时间：2012-05-22T23:22:30.253
> 
> 标签：database, sql-server-2008, tsql, view, sqldatatypes

通常我运行这样的脚本：

```
ALTER TABLE [TABLE]
ALTER COLUMN [Column] NVARCHAR(40); 
```

结果是表中的字段被转换为 nvarchar。但是为视图做同样的事情的语法是什么？或者这甚至可能吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-22T23:24:33.657

当然

```
CREATE VIEW AView
AS
SELECT CAST(title AS char(50))
FROM titles 
```

因此，请查看 msdn 页面上的 CAST 和 CONVERT 以获取完整信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T04:52:44.940

是的..您可以尝试转换功能来做到这一点。

```
Convert (Desired datatype,column name) 
```

例如。`Convert(varchar(50),dbo.User_master.User_email)` 其中 User_email 以前的类型为 nvarchar(MAX)。

如果要将 nvarchar 数据转换为日期时间，则需要附加参数来转换函数，例如

```
CONVERT(data_type(length),expression,style) 
```

例如。 `Convert(Datetime,dbo.User_master.User_DOB,103)`

[SQL Server CONVERT() 函数](http://www.w3schools.com/sql/func_convert.asp)的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-30T13:27:08.750

如果您已更新表中的类型并且视图仍反映旧类型，则只需运行更改视图而不更改任何内容即可更新类型

# eclipse - 为什么在 Eclipse 中出现此错误 - 可能是 Java 运行时版本不兼容？

> ID：10711474
> 
> 赞同：0
> 
> 时间：2012-05-22T23:22:37.927
> 
> 标签：eclipse, compiler-errors

在 Eclipse（版本 3.6.2.M201102101200/Helios 服务版本 2）中。当我运行一个名为 ACE 工具包的大型 Java 项目时，我遇到了一个奇怪的错误。下面是一张图片：

![在此处输入图像描述](../Images/56abbf50e11046475d4fba0512414e5e.png)

它会这样做的可能原因是什么？

会不会是 Java 运行时版本不兼容？该项目是为 Java 1.5 构建的，但我运行的是 1.6。

我感谢任何提示或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:29:30.703

eclipse 崩溃的原因可能有很多，从内存不足到行为不端的插件。开始故障排除的第一个地方是`C:\path\to\your\workspace\.metadata\.log`文件。如果您在 eclipse 崩溃后不久检查此文件的结尾，您可能会发现一些有用的信息。

## 从[文档](http://www.eclipse.org/eclipse/platform-core/documents/3.1/debug.html)中：

> Eclipse 有一个记录问题的日志文件，通常这是 Eclipse 开发人员在您报告问题时要求的第一件事。日志文件可以在几个地方找到：
> 
> **工作区日志**- 这是日志文件最常见的位置，它存储在您工作区的元数据目录中。查看工作区/.metadata/.log。
> 
> **配置日志**- 有时信息会记录在配置日志文件中，而不是工作区日志中。（特别是如果工作区尚未创建，没有，或者无法创建）检查您的配置区域的配置日志文件。（配置/.log）
> 
> **启动**- 在工作区和配置区出现之前，系统中偶尔会出现问题。这意味着没有地方可以写入日志文件，因此信息被写入控制台，请参阅下面关于使用控制台运行以获取这些消息的注释。

# python - 在特定位置更新文本文件中的字符串

> ID：10711476
> 
> 赞同：3
> 
> 时间：2012-05-22T23:23:05.827
> 
> 标签：python, string, text, io

我想找到一个更好的解决方案来实现以下三个步骤：

1.  读取给定行的字符串
2.  更新字符串
3.  写回更新的字符串

下面是我的代码，但我想知道有没有更好（简单）的解决方案？

```
new='99999'

f=open('C:/Users/th/Dropbox/com/MS1Ctt-P-temp.INP','r+')
lines=f.readlines()
#the row number we want to update is given, so just load the content
x = lines[95]
print(x)
f.close()

#replace
f1=open('C:/Users/th/Dropbox/com/MS1Ctt-P-temp.INP')
con = f1.read()
print con
con1 = con.replace(x[2:8],new) #only certain columns in this row needs to be updated
print con1
f1.close()

#write
f2 = open('C:/Users/th/Dropbox/com/MS1Ctt-P-temp.INP', 'w')
f2.write(con1)
f2.close() 
```

谢谢！更新：这次从 jtmoulia 那里得到一个想法变得更容易了

```
def replace_line(file_name, line_num, col_s, col_e, text):
    lines = open(file_name, 'r').readlines()
    temp=lines[line_num]
    temp = temp.replace(temp[col_s:col_e],text)
    lines[line_num]=temp
    out = open(file_name, 'w')
    out.writelines(lines)
    out.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:06:40.857

文本数据的问题，即使是在表格中，字节偏移量也是不可预测的。例如，当用字符串表示数字时，每个数字都有一个字节，而当使用二进制（例如二进制补码）时，无论是小整数还是大整数，您总是需要四个或八个字节。

不过，如果您的文本格式足够严格，您可以通过替换字节而不改变文件大小来解决问题，您可以尝试使用[标准`mmap`模块](http://docs.python.org/library/mmap.html)。有了它，您将能够将文件视为**可变**字节字符串并就地修改其中的部分内容，并让内核为您保存文件。

否则，其他任何答案都更适合该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:38:55.253

好吧，首先，您不需要每次都重新打开和读取文件。该`r+`模式允许您读取和写入给定文件。

也许像

```
with open('C:/Users/th/Dropbox/com/MS1Ctt-P-temp.INP', 'r+') as f:
    lines = f.readlines()
    #... Perform whatever replacement you'd like on lines
    f.seek(0)
    f.writelines(lines) 
```

此外，[在 python 中编辑文本文件中的特定行](https://stackoverflow.com/questions/4719438/editing-specific-line-in-text-file-in-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T23:49:31.653

当我不得不做类似的事情时（对于 Webmin 定制），我完全在 PERL 中完成，因为这是 Webmin 框架使用的，而且我发现它很容易。我假设（但不确定）在 Python 中有等价的东西。首先将*整个*文件一次全部读入内存（PERL 执行此操作的方法可能称为“slurp”）。（这种将整个文件保存在内存中而不仅仅是一行的想法过去没有什么意义（甚至是不可能的）。但是现在 RAM 太大了，这是唯一的出路。）然后使用`split`运算符将文件分成几行，并将每一行放在一个巨型数组的不同元素中。然后，您可以使用所需的行号作为数组的索引（记住数组索引通常以 0 开头）。最后，使用“正则表达式”处理来改变行的文本。然后更改另一行，另一行，另一行（或对同一行进行另一次更改）。完成后，使用`join`将数组中的所有行重新组合成一个巨大的字符串。然后写出整个修改过的文件。

虽然我手头没有完整的代码，但这里有一些 PERL 代码的大致片段，因此您可以明白我的意思：

```
our @filelines = ();
our $lineno = 43;
our $oldstring = 'foobar';
our $newstring = 'fee fie fo fum';
$filelines[$lineno-1] =~ s/$oldstring/$newstring/ig; 
# "ig" modifiers for case-insensitivity and possible multiple occurences in the line
# use different modifiers at the end of the s/// construct as needed 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T23:35:51.180

```
FILENAME = 'C:/Users/th/Dropbox/com/MS1Ctt-P-temp.INP'
lines = list(open(FILENAME))
lines[95][2:8] = '99999'
open(FILENAME, 'w').write(''.join(lines)) 
```

# php - 如果存在codeigniter项目，如何通过浏览器访问文件夹？

> ID：10711479
> 
> 赞同：3
> 
> 时间：2012-05-22T23:23:23.917
> 
> 标签：php, codeigniter, vps

我有 codeigniter 项目让我们说 example.com。在我服务器上的 public_html 文件夹中，我创建了一个名为 test 的文件夹，我希望能够使用 example.com/test/somefile.php 通过 Web 访问某些文件

因为我在同一个 public_html 目录中也有一个 codeigniter 项目，所以当我尝试 example.com/test/somefile.php 时，我总是得到一个 codeigniter page not found 错误。

我如何基本上告诉我的服务器或 codeigniter 项目文件夹“test”不是 codeigniter 应用程序的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T03:33:26.340

在你`.htaccess`的根目录中`public_html`，你可能有类似这样的东西来通过 index.php 路由所有内容：

示例取自 CI 用户指南：[http ://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

```
RewriteEngine on
# If the path doesn't start with one of these...
RewriteCond $1 !^(index\.php|images|robots\.txt)
# ...send the request to index.php/REQUEST
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

只需将“test”添加到管道分隔组，或者您需要执行的任何操作以允许使用您的配置访问目录：

```
RewriteCond $1 !^(index\.php|test|images|robots\.txt)
#                            ^^^^ 
```

如果 URL 中没有这个 CI 要求`index.php`——实际上无法让您的 Codeigniter 应用程序本身重定向、重写 URL 或阻止对`/test`目录的访问，这通常都是通过`.htaccess`文件完成的。

# php - 使用 POST 将文件从 iOS 发送到 PHP

> ID：10711481
> 
> 赞同：4
> 
> 时间：2012-05-22T23:23:53.940
> 
> 标签：php, iphone, objective-c, xcode

我正在尝试将音频文件发送到 PHP 服务器。这是Objective-C代码：

```
NSData *data = [NSData dataWithContentsOfFile:filePath];

NSLog(@"File Size: %i",[data length]);

//set up request
NSMutableURLRequest *request= [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

//required xtra info
NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

//body of the post
NSMutableData *postbody = [NSMutableData data];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"thefile\"; filename=\"recording\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:data];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:postbody];
apiConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

这是PHP代码：

```
if (is_uploaded_file($_FILES['thefile']['tmp_name'])) {
    echo "FILE NAME: ".$_FILES['thefile']['name'];
} else {
    echo "Nothing";
} 
```

文件大小因录制的音频长度而异，但有数据。

我收到“无”的回应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T23:34:58.623

调试：在 PHP 端，尝试：

```
$file = $_POST['name'];
echo $file 
```

尝试使用以下代码段代替您当前的代码。将 url (www.yourWebAddress.com) 和脚本名称更改为适合您问题的值。

```
NSData *data = [NSData dataWithContentsOfFile:filePath];
NSMutableString *urlString = [[NSMutableString alloc] initWithFormat:@"name=thefile&&filename=recording"];
[urlString appendFormat:@"%@", data];
NSData *postData = [urlString dataUsingEncoding:NSASCIIStringEncoding 
                                   allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSString *baseurl = @"https://www.yourWebAddress.com/yourServerScript.php"; 

NSURL *url = [NSURL URLWithString:baseurl];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];
[urlRequest setHTTPMethod: @"POST"];
[urlRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
[urlRequest setValue:@"application/x-www-form-urlencoded" 
          forHTTPHeaderField:@"Content-Type"];
[urlRequest setHTTPBody:postData];

NSURLConnection *connection = [NSURLConnection connectionWithRequest:urlRequest delegate:self];
[connection start];

NSLog(@"Started!"); 
```

在服务器端，我有以下代码：

```
<?php

    $name  = $_POST['name'];
    $filename  = $_POST['filename'];
    echo "Name = '" . $name . "', filename = '" . $filename . "'.";

    error_log ( "Name = '" . $name . "', filename = '" . $filename . "'." );

?> 
```

我收到以下输出：

[2012 年 5 月 23 日 11:56:18] 名称 = 'thefile'，文件名 = 'recording'。

我不知道为什么它不适合你。您必须缺少步骤。尝试注释掉上面引用“数据”的 url POST 代码中的两行，以查看您至少可以将名称和文件名的纯文本发送到服务器端。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:32:36.817

Try encoding your *binary* data before you send it over the pipe (and then decode when it gets to the other end). See [this SO thread](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk) for ideas for Base64 encoding code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-23T04:56:27.023

迅速你可以像这样发布..

```
 func wsPostData(apiString: String, jsonData: String) -> Void
    {
         //apiString means base URL
        let postData = jsonData.dataUsingEncoding(NSASCIIStringEncoding, allowLossyConversion: true)
        let postLenth = "\(UInt((postData?.length)!))"
        let request = NSMutableURLRequest()
        request.URL = NSURL(string: apiString)
        request.HTTPMethod = "POST"
        request.setValue(postLenth, forHTTPHeaderField: "Content-Lenth")
        request.setValue("application/x-www-form-urlencoded", forHTTPHeaderField: "Content-Type")
        request.HTTPBody = postData
        NSURLConnection.sendAsynchronousRequest(request, queue: NSOperationQueue.mainQueue()) { (response: NSURLResponse?, data: NSData?, error:NSError?) in

            print("response\(response)")
            var dict:NSDictionary!
            do {
                dict = try NSJSONSerialization.JSONObjectWithData(data!, options: []) as? [String: AnyObject]
                print(" responce data is \(dict)")
            }
            catch let error as NSError
            {
                print("Something went wrong\(error)")
            }

        }
    } 
```

# prolog - 在 Prolog 中计算词频

> ID：10711483
> 
> 赞同：-2
> 
> 时间：2012-05-22T23:24:07.503
> 
> 标签：prolog

我用谷歌搜索无济于事。这里有人可以告诉我如何在 Prolog 中编码词频吗？越“逻辑”越好。给定一个文本文件，忽略非字母数字字符，检测单词，删除停用词（可能在外部文件中给出），计算文件中每个单词的出现次数并输出类似“word : freq”的内容，按频率递减排序。

谢谢！

（这不是作业，顺便说一句，这是我正在做的一个项目）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:23:34.450

我在此答案中使用 SWI-Prolog 广泛的库支持，因此在您的情况下可能不合适。

当然，您解决*任何*编程任务的方式很大程度上受您选择的语言中可用的内容*以及*您使用它的能力的影响。

这里我使用[library(assoc)](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.3%27,swi%28%27/doc/Manual/assoc.html%27%29%29)，如果您的系统错过了它，那么您可以使用列表进行模拟，或者使用 assert/retract。

这个片段只是展示了一种（惯用的）*计算*单词的方法，计算频率可以通过库（聚合）或一些算术轻松完成，也许你想尝试自己写下来练习语言......

```
/*  File:    frequency_of_words.pl
    Author:  Carlo,,,
    Created: May 23 2012
    Purpose: http://stackoverflow.com/questions/10711483/calculating-term-frequency-in-prolog
*/

:- module(frequency_of_words, [count_words/2, count_words/1]).
:- [library(assoc)].

count_words(File, Assoc) :-
    empty_assoc(Empty),
    open(File, read, Stream),
    frequency_of_words(Stream, Empty, Assoc, ""),
    close(Stream).
count_words(File) :-
    count_words(File, Assoc),
    assoc_to_list(Assoc, List),
    maplist(writeln, List).

frequency_of_words(Stream, SoFar, Words, CurrWord) :-
    get_code(Stream, Code),
    (   Code == -1
    ->  update_dictionary(SoFar, Words, CurrWord)
    ;   use_character(Code, SoFar, Updated, CurrWord, NextWord),
        frequency_of_words(Stream, Updated, Words, NextWord)
    ).

update_dictionary(SoFar, SoFar, Word) :-
    skip_word(Word).
update_dictionary(SoFar, Updated, Codes) :-
    atom_codes(Word, Codes),
    ( get_assoc(Word, SoFar, CountSoFar) ; CountSoFar = 0 ),
    WordCount is CountSoFar + 1,
    put_assoc(Word, SoFar, WordCount, Updated).

use_character(Code, SoFar, Updated, CurrWord, NextWord) :-
    (   word_character(Code)
    ->  Updated = SoFar,
        NextWord = [Code|CurrWord]
    ;   reverse(CurrWord, Forward),
        update_dictionary(SoFar, Updated, Forward),
        NextWord = ""
    ).

word_character(Code) :-
    [Code] @>= "A", [Code] @=< "Z" ;
    [Code] @>= "a", [Code] @=< "z" ;
    [Code] @>= "0", [Code] @=< "9" ;
    [Code] == "_".

skip_word(""). % a trick on EOF or consecutive blanks: not really a skipword
skip_word("is"). 
```

测试：

```
?- count_words('frequency_of_words.pl').
0-2
1-3
2012-1
23-1
9-1
A-1
Author-1
Carlo-1
Code-14
Codes-2
CountSoFar-3
Created-1
CurrWord-6
EOF-1
Empty-2
File-3
Forward-2
Full-2
List-2
May-1
NextWord-5
Purpose-1
SoFar-11
StackOverflow-1
Stream-6
Updated-7
Word-5
WordCount-2
Words-3
Z-1
_-1
a-3
answer-1
assoc-1
assoc_to_list-1
atom_codes-1
blanks-1
close-1
consecutive-1
count_words-2
empty_assoc-1
frequency_of_words-5
get_assoc-1
get_code-1
library-1
maplist-1
module-1
not-1
on-1
open-1
or-1
pl-1
put_assoc-1
read-1
really-1
reverse-1
skip_word-3
skipword-1
trick-1
update_dictionary-4
use_character-2
word_character-2
writeln-1
z-1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:02:35.757

这里有一些东西可以帮助你开始：

> 它假设每个单词都在输入文件的单独行上
> 
> 不处理“停用词”
> 
> 不实现排序

```
; Print the term frequency for words in file Path
print_freq_from_file(Path) :-
    open( Path, read, Stream ),
    read_file( Stream, Words ),
    calc_freq( Words, Freq ),
    sort_freq( Freq, SortedFreq ),
    print_freq( SortedFreq ).

; calc_freq(Words,Freq) Freq is the term frequency of the words in list Words
calc_freq( [], [] ).
calc_freq( [Word|Words], Freq ) :-
    calc_freq( Words, FreqRest ),
    add_word( Word, FreqRest, Freq ).

; add_word( Word, Freq1, Freq2 ) Freq2 is Freq1 with Word added
add_word( Word, [], [(Word,1)] ).
add_word( Word, [(Word,N)|Rest], [(Word,N1)|Rest] ) :-
    N1 is N+1.
add_word( Word, [Term|Rest], [Term|NewRest] ) :-
    add_word( Word, Rest, NewRest ).

; Print the given term frequency
print_freq( [] ).
print_freq( [(W,N)|Rest] ) :-
    write( W ), write( ' : ' ), write( N ), nl,
    print_freq( Rest ). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T05:35:26.310

对于过滤停用词，一个好方法是通过`assert`：

```
read_sw(Path) :-
    open( Path, read, Stream ),
    read_words_file( Stream, Words ),
    add_sw(Words).

add_sw([]).
add_sw([Word|Rest]) :-
    assertz(stop_word(Word)),
    add_sw(Rest). 
```

完成此操作后，您可以使用`stop_word/1`检查单词是否为停用词并忽略它。例如，如果您正在实施 Scott Hunter 的答案，则可以添加一个附加子句`calc_freq/2`来过滤掉这些词：

```
calc_freq( [], [] ).
calc_freq( [Word|Words], Freq ) :-
    stop_word(Word), !,
    calc_freq( Words, Freq ).
calc_freq( [Word|Words], Freq ) :-
    calc_freq( Words, FreqRest ),
    add_word( Word, FreqRest, Freq ). 
```

# javascript - AJAX/拒绝身份验证的 HTTP 标头？

> ID：10711487
> 
> 赞同：2
> 
> 时间：2012-05-22T23:24:51.733
> 
> 标签：javascript, jquery, basic-authentication

我想知道 AJAX 身份验证过程的最佳实践是什么。

当身份验证有效时，我返回 HTTP 标头 200，响应为“ok”如果身份验证无效，我需要从服务器发送什么 HTTP 标头。

1.  我是否需要将 HTTP 标头设置为代码 500（错误）
2.  还是将其保留在 200 并实施检查响应变量的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:33:43.133

您不想发送 500 错误，因为这意味着不是由用户引起的意外服务器端错误。

您需要阅读 rfc 规范以获取状态代码：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

4XX 状态代码用于客户端错误，这是您要查找的位置。在您的情况下，如果身份验证失败，您可以使用 401，如果不允许该用户查看资源，则可以使用 403。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:26:33.183

返回 HTTP401 怎么样？

如果需要，您可以在 AJAX 错误处理程序中处理并将整个页面重定向到登录屏幕。

```
$.ajax({
  statusCode: {
    401: function() {
      alert("User not logged in");
    }
  }
}); 
```

# xml - 为 API 描述找到合适的 WSDL 编辑器

> ID：10711488
> 
> 赞同：0
> 
> 时间：2012-05-22T23:24:59.703
> 
> 标签：xml, json, web-services, api, wsdl

我对 Web 服务和 XML 东西完全陌生，并且刚刚了解了 WSDL。我正在寻找可以在 Mac 上运行的 WSDL 编辑器，但令人惊讶的是我在网上找不到任何东西。显然，我错过了一些东西......它被称为别的东西吗？是否有 WSDL 的编辑器？

我正在尝试创建一个高级 API 行为，然后该编辑器将其转换为 XML。

如果我的要求没有意义，请提前道歉，这对我来说也是新的，我会很感激任何方向。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:31:38.857

Can you to edit WSDL on Esspreso. I don't know is shareware or freeware. I hope these helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T04:24:19.897

试试[http://apimatic.io](http://apimatic.io) 导入你的api描述，根据需要修改

# php - PHP在脚本之前加载常量

> ID：10711489
> 
> 赞同：0
> 
> 时间：2012-05-22T23:25:08.113
> 
> 标签：php, startup

我想知道是否可以在运行任何脚本之前向 php 添加常量，因此在启动时。如果这是可能的，它也可以用类等来完成吗？

我正在考虑为php创建插件的方向，但也许有一种更简单的方法。

我并不是说在每个脚本中都包含一个文件。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:30:33.397

据我所知，不是常数，但这没关系：

**.htaccess**

```
SetEnv MYVAR "hello" 
```

**一些文件.php**

```
echo $_SERVER['MYVAR']; 
```

有关更多信息，请参阅[SetEnv 上的 Apache 文档](http://httpd.apache.org/docs/2.2/mod/mod_env.html#setenv)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:32:54.157

To directly answer the question, there are two approaches:

1.  Use `auto_prepend_file` to auto include a PHP file that has `define` calls.

2.  Configure your web server to set server variables.

I think the second is a better approach. However, I don't see how either of them are very useful in the context of a plugin. Usually a class autoloader of some sort is the way to go there, or to require a single include file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T23:34:20.200

If I understand your question correctly, what I do is to `include` a file before all else on my `index.php`. That same file contains tons of `constants`, `control verifications`, `initialization for the DB object`, etc...

e.g.,

**INSIDE index.php**

```
<?php

$moduleRoot = dirname(__FILE__);
require_once($moduleRoot."/components/inc/inc.php");

// continue to render the web page and perform as usual

?> 
```

**INSIDE THE inc.php**

```
// When in development, all errors should be presented
// Comment this two lines when in production
error_reporting(E_ALL);
ini_set('display_errors', '1');

// Website id for this project
// the website must be present in the table site in order to get
// the configurations and records that belong to this website
define("CONF_SITE_ID",1);

// Domain path where the project is located
// Should be like the access used on the browser
$serverDomain = $_SERVER["HTTP_HOST"];
$serverAccess = (!empty($_SERVER['HTTPS'])) ? ('https://') : ('http://');
$serverRoot = dirname(__FILE__);
define("CONF_DOMAIN", $serverAccess.$serverDomain);

// etc ... 
```

* * *

## EDITED

Since you have multiple "startup" files and you need all of them to call `inc.php`, the best choise seems to be `.user.ini` as of PHP 5.3.0, you can read about [it here!](http://php.net/manual/en/configuration.file.per-user.php).

And an [article](http://www.untwistedvortex.com/php-configuration-files-reusable-code/) on the subject.

# android - 从应用程序列表中获取应用程序的uid

> ID：10711492
> 
> 赞同：1
> 
> 时间：2012-05-22T23:25:29.660
> 
> 标签：android

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListView internetapps= (ListView) findViewById(R.id.list);
    ArrayList myList = new ArrayList();
    PackageManager pm = this.getPackageManager();

    List<PackageInfo> applist= pm.getInstalledPackages(0);

    Iterator<PackageInfo> it= applist.iterator();

    while (it.hasNext()){
        PackageInfo pk= (PackageInfo)it.next();

        if(PackageManager.PERMISSION_GRANTED==(pm.checkPermission(Manifest.permission.INTERNET, pk.packageName))) //checking if the package is having INTERNET permission
        {
        myList.add(""+pk.applicationInfo.loadLabel(pm));
        }

    }

    internetapps.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, myList));
    final TextView text1 = (TextView) findViewById(R.id.text2);

    internetapps.setOnItemClickListener(new AdapterView.OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, View arg1, int list_position,long app_Uid) 
        {

            String app_selected=parent.getItemAtPosition(list_position).toString();

            final PackageManager pm = getPackageManager();
            //get a list of installed apps.
            List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);
            long UID;
            //loop through the list of installed packages and see if the selected
            //app is in the list
            for (ApplicationInfo packageInfo : packages) {
                if(packageInfo.packageName.equals(app_selected)){
                    //get the UID for the selected app
                    UID = packageInfo.uid;
                    text1.setText("Yeah");

                }
                else {
                    text1.setText("No");
                }

            }

        }
    });

} 
```

如何从列表中的应用程序中获取应用程序的 uid。我尝试使用上面的代码获取 uid，但它总是显示否定结果（我使用 setText 来跟踪它在 if..else 中运行的代码......在我点击一个项目后它总是显示“No”） . 我的代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:47:50.707

这**不是** 调试的好方法，您应该使用日志。将返回的 ID 将是应用程序的 ID。你的逻辑应该遵循这个假设。确保您从根本上检索您想要的所有内容。API没有错，更多的是用户错误。

*如果您不了解应该返回的内容，那么使用 API 也是无用的。**阅读**文档*。

此外，为了提示可能出现的问题，我的建议是确保您在列表中填写您想要的内容。了解应用程序和包之间的区别。

getInstalledApplications(int flags) getInstalledPackages(int flags)

阅读文档以了解标志的用途以及有效值。您将 0 传递到 getInstalledPackages 的参数的假设并未映射到文档中的任何内容。这当然是个问题。

我的最后一条建议不是假设您的价值观是正确的，而是检查正在比较的内容。测试代码时要多疑。

# wordpress - 如何插入 Wordpress 中帖子之间的标签，用于 Themantic 主题

> ID：10711493
> 
> 赞同：0
> 
> 时间：2012-05-22T23:25:33.323
> 
> 标签：wordpress, post, line, each

我一直在尝试`<hr/>`在 Wordpress 博客中插入标签帖子。我怎样才能做到这一点，以便在最后一个帖子之后没有`<hr/>`标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:19:31.800

```
<?php
$args = array('YOUR_QUERY_ARGS');
$query = new WP_Query($args);
$i=1;
if($query->have_posts()) : while($query->have_posts()) : $query->the_post();
?>
    <!-- YOUR POSTS HERE -->
<?php
    echo $i==$query->found_posts ? '' : '<hr/>';
    $i++;
endwhile;endif;
?> 
```

如果您还没有，我强烈建议您使用[WP Query代替 query_posts()。](http://codex.wordpress.org/Class_Reference/WP_Query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T23:48:51.440

尝试使用这样的检查：

```
$link = mysql_connect("localhost", "mysql_user", "mysql_password");
mysql_select_db("database", $link);

$result = mysql_query("SELECT * FROM users", $link);
$num_rows = mysql_num_rows($result);

$i=0;
while ($row = mysql_fetch_assoc($result)) {
$i++;
    echo $row["userid"];
    echo $row["fullname"];
    echo $row["userstatus"];

    if ($i == $num_rows)    
                break;

    echo '<hr>';
}

mysql_free_result($result); 
```

# java - 获取 TreeMap 中字符串键以模式开头的值

> ID：10711494
> 
> 赞同：1
> 
> 时间：2012-05-22T23:25:36.760
> 
> 标签：java, string, treemap

我有一个以字符串为键的树形图。我想获取其键以字符串搜索开头的所有值。

我认为我需要在这里做的是：

myTreeMap.subMap(search.concat(X1), true, search.concat(X2), true);

其中 X1 和 X2 是可能的最高和最低字符。

有更好的方法吗？如果不是，X1 和 X2 是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T23:06:04.793

由于我对上述答案的编辑因过于原创而被拒绝，因此我将在此处发布。这个答案修复了拼写错误并处理了原始没有的 int 溢出。

```
public <T> Map<String, T> subMapWithKeysThatAreSuffixes(String prefix, NavigableMap<String, T> map) {
    if ("".equals(prefix)) return map;
    String lastKey = createLexicographicallyNextStringOfTheSameLength(prefix);
    return map.subMap(prefix, true, lastKey, false);
}

String createLexicographicallyNextStringOfTheSameLength(String input) {
    final int lastCharPosition = input.length()-1;
    String inputWithoutLastChar = input.substring(0, lastCharPosition);
    char lastChar = input.charAt(lastCharPosition);
    char incrementedLastChar = (char) (lastChar + 1);
    // Handle int/char overflow.  This wasn't done above.
    if (incrementedLastChar == ((char) 0)) return input+incrementedLastChar;
    return inputWithoutLastChar+incrementedLastChar;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:07:21.443

基本上，您需要按字典顺序将 next 前缀作为第二个边界：

```
public <T> Map<String, T> subMapWithKeysThatAreSuffixes(String prefix, NavigableMap<String, T> map) {
    if ("".equals(prefix)) return map;
    String lastKey = createLexicographicallyNextStringOfTheSameLenght(prefix);
    return map.subMap(prefix, true, lastKey, false);
}

String createLexicographicallyNextStringOfTheSameLenght(String input) {
    final int lastCharPosition = input.length()-1;
    String inputWithoutLastChar = input.substring(0, lastCharPosition);
    char lastChar = input.charAt(lastCharPosition) ;
    char incrementedLastChar = (char) (lastChar + 1);
    return inputWithoutLastChar+incrementedLastChar;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:36:50.493

问题是您尝试执行的部分关键搜索。

```
myTreeMap.subMap(search.concat(X1), true, search.concat(X2), true); 
```

假设您有一些键/值对：

fooBar -> 一些值 fooBage -> 一些其他值 barBear -> 用尽价值想法 barTender -> 另一个值

现在您要查找所有“foo*”，在此示例中为 fooBar 和 fooBage。密钥被视为单个标记，在这种情况下恰好是一个字符串。无法将密钥视为部分密钥。即使通过“fooZ”说你想要“fooA”也不会让你得到 fooBar 或 fooBage。

如果您创建键类（我将其称为 FractionalKey）并覆盖 equals 方法，那么您可以将 equals 定义为“某个正则表达式”或“整个事物，或只是第一部分”等。问题与这就是如果equals返回true，那么哈希码也必须相等，这将打破我认为的规则。

我认为这是您唯一的选择，除了在键列表中搜索您想要的键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T23:29:31.747

嗯。我会说你应该`myTreeMap.subMap(search, true, search2, false)`在`search2`没有连接的地方做，而是“增加”。毕竟，如果`X2`只是一个字符，那么你的实现就会错过`search.concat(X2).concat(X2)`.

# asp.net - 如何在 32 位模式下运行 VS 2010 本地 IIS

> ID：10711498
> 
> 赞同：2
> 
> 时间：2012-05-22T23:26:00.193
> 
> 标签：asp.net, asp.net-mvc-3, iis-7.5

我在我的 ASP.NET MVC 3 项目中引用了一些 32 位和一些 64 位 DLL。

项目编译但我得到运行时错误。

这是因为我将 Web 项目作为 64 位运行。

如何在我的本地 IIS 中“启用 32 位”（我如何在 IIS 7.5 Pro 中做到这一点）？

我正在使用 .NET 4.0

我得到的错误是：

> 由于以下错误，检索具有 CLSID {A6775dfd2-1dfF-421C-A187-4D55F4DDFBFF} 的组件的 COM 类工厂失败：80040154 未注册类（来自 HRESULT 的异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:26:14.297

如果您不需要 64 位组件（不确定那里运行的是什么，或者是否可以排除它，因为您只是想知道如何在 32 位以上运行）

[http://learn.iis.net/page.aspx/201/32-bit-mode-worker-processes/](http://learn.iis.net/page.aspx/201/32-bit-mode-worker-processes/)

您可以通过以下方式在服务器级别设置它：%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.enable32BitAppOnWin64:true

或设置您的特定应用程序池（更推荐恕我直言）您可以尝试以下操作。抱歉，这个来自的页面似乎不再活跃，现在只有谷歌缓存显示它：

> 强制 IIS 创建 32 位应用程序池工作进程
> 
> 如果您的应用程序作为 Web 应用程序运行，这意味着它在 IIS 应用程序池工作进程中运行，您将希望该工作进程 (w3wp.exe) 是 32 位进程。这可以在应用程序池的高级设置中指定：
> 
> 为您的 Web 应用程序选择应用程序池。单击右侧编辑应用程序池下的高级设置...。将（常规）下的启用 32 位应用程序的值更改为 True。
> 
> 请注意，设置中的“启用”一词并不意味着“允许”，如“允许 32 位或 64 位应用程序”。它实际上意味着“强制”，如“强制工作进程以 32 位模式运行，以便支持 32 位应用程序”。这意味着当此设置的值为 True 时，应用程序池工作进程将始终作为 32 位进程启动。将其设置为 False 将启动 64 位应用程序池工作进程。
> 
> 请注意，当启动应用程序池工作进程时，它会在任务管理器的进程选项卡上的映像名称列中显示为 w3wp.exe。当启用 32 位应用程序设置的值为 True 时，它​​将被列为 w3wp.exe *32。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:48:43.930

IIS Express 7.5（如果您安装它，则由 Visual Studio 2010 使用）仅为 32 位：

> [http://learn.iis.net/page.aspx/1265/iis-75-express-readme/](http://learn.iis.net/page.aspx/1265/iis-75-express-readme/)

去引用：

> 支持 32 位和 64 位系统，**但仅存在 IIS 7.5 Express 的 32 位版本。**

因此，我无法想象您的问题与通常的 32 位 / 64 位池模式问题有关，如果您的所有 DLL 都是 32 位，则可能会出现这些问题。

但是，如果您尝试加载 64 位 COM DLL，那么这将失败；64 位二进制文​​件不能加载到 32 位进程中，反之亦然。

另一个问题是在选择要调试的 Web 服务器时**忘记勾选`Use IIS Express`复选框：**

![在此处输入图像描述](../Images/1c0448e34dfa6f9f2771628f2b96e313.png)

如果您不勾选该复选框，那么您将在Windows 附带的 IIS7 版本上的*DefaultWebSite中的子应用程序中运行您的站点。*

*DefaultWebSite*在*DefaultAppPool*中运行，它在 64 位版本的 Windows 中作为 64 位进程运行。因此，如果您想使用它并使用 32 位二进制文​​件，则需要将*DefaultAppPool更改为以 32 位运行。*

您需要使用 IIS7 的 MMC 管理单元或通过`appcmd.exe`从命令行运行该工具来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:19:56.767

将编译目标设置为 x86 而不是 AnyCPU 或 x64。您的 dll 将始终以 32 位运行，而无需弄乱 IIS 服务器设置。

# c# - 如何将数据从数据字典映射到datagridview？

> ID：10711499
> 
> 赞同：0
> 
> 时间：2012-05-22T23:26:07.790
> 
> 标签：c#, winforms

我有一个数据字典，如下所示：

```
Key  Value

1    ron k polito
2    Ryan s Winslate 
```

我正在尝试在 datagridview 中显示 Value 列，其中包含三个不同的列名、中名和姓氏。以下语句 names.getnames().ToList() 从数据字典中检索名称（值）。

```
datagridview1.DataSource = names.getnames().ToList(); 
```

通过将列表移动到 datagridview 中，创建的行数与数据字典检索到的总数完全相同，但它不显示任何内容。只出现空白行。

我是 C# 新手，有什么建议可以解决这个问题。

谢谢。

这是代码：

```
 List<localname> lname_list = new List<localname>();
             var l_names = names.getnames().ToList();
             foreach(var lcname in l_names)
             {
                 string[] wrd = lcname.Split(' ');
                 localname lv = new localname();
                 lv.mylocal(wrd[0], wrd[1], wrd[2]);
                 lname_list.Add(lv);
             }
             datagridview1.DataSource = lname_list;
             ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:45:19.993

您将需要用于填充 DataGrid 的指定 POCO 的列表。POCO 将包含代表您想要的每一列的属性..示例：

```
public class Name
{
    public string First { get; set; }
    public string Middle { get; set; }
    public string Last { get; set; }
} 
```

在您的表单中，您将根据您的 getNames 函数填充列表。

```
 public Form1()
    {
        InitializeComponent();

        List<Name> namesList = new List<Name>();

        dataGridView1.AutoGenerateColumns = false;
        DataGridViewTextBoxColumn firstNameColumn = new DataGridViewTextBoxColumn();
        makeColumn.DataPropertyName = "First";
        makeColumn.HeaderText = "First Name";

        DataGridViewTextBoxColumn middleNameColumn = new DataGridViewTextBoxColumn();
        modelColumn.DataPropertyName = "Middle";
        modelColumn.HeaderText = "Middle Name";

        DataGridViewTextBoxColumn lastNameColumn = new DataGridViewTextBoxColumn();
        yearColumn.DataPropertyName = "Last";
        yearColumn.HeaderText = "Last Name";

        dataGridView1.Columns.Add(firstNameColumn);
        dataGridView1.Columns.Add(middleNameColumn);
        dataGridView1.Columns.Add(lastNameColumn);

        for (int i = 0; i < names.getNames().Length; i++)
        {
            // TODO create new Name object. 
            // TODO set properties in new Name object accordingly.
            // TODO add name object to namesList once properties have been set.
        }

        dataGridView1.DataSource = namesList;
    } 
```

除了 List，您还可以使用 ObservableCollection 或 BindingList

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:14:29.800

使用 LINQ，您只需几行代码即可完成此操作。

如果您有一个自定义类，例如

```
class CustomerName
{
   public string FirstName { get; set;}
   public string MidName { get; set; }
   public string LastName { get; set; }
} 
```

你的字典值是第一个。中间名，姓氏（意味着该值应始终包含 3 个部分）；你可以这样做。

```
Dictionary<int, string> dic = new Dictionary<int, string>();
dic.Add(1, "ron k polito");
dic.Add(2, "Ryan s Winslate");

var dicNames = (from a in (dic.Select(b => b.Value).Select(c => c.Split(' ')).AsEnumerable()) select new CustomerName { FirstName = a[0], MidName = a[1], LastName = a[2] }).ToList();            

dataGridView1.DataSource = dicNames; 
```

**输出**

![在此处输入图像描述](../Images/a9a48a49bbb3dd5e0c13dc46fcddc249.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T05:46:59.830

它很简单，您不需要任何额外的编码。就这样做

**Grd.DataSource=null;**

**Grd.DataSource = DictionaryObject.Values.ToList();**

就是这样

# ruby-on-rails - 清理回形针错误消息

> ID：10711504
> 
> 赞同：3
> 
> 时间：2012-05-22T23:26:34.477
> 
> 标签：ruby-on-rails, activerecord, paperclip, validation

好的，所以我已经让回形针工作了，我正在尝试使用内置的验证器来确保上传的文件

1.  是图像
2.  不是太大

所以我在模型中有这个，根据文档：

```
validates_attachment :avatar,
:content_type => { :content_type => /image/ },
:size => { :in => 0..2.megabytes } 
```

然而，它在视图中显示的错误是这样的混乱：

![错误信息](../Images/05b8e1c837eccfb57e22efc509cc66ba.png)

我希望它更简单一些，例如“头像必须是小于 2 兆字节的图像”

但是，我看不到在哪里执行此操作，因为传递`:message => 'something'`会引发错误`Unknown validator: 'MessageValidator'`

我该如何清理这个？

请注意，上传小图像的快乐路径工作得很好。

一些进一步的测试表明，上传太大的图像（如桌面背景）或不是 .rb 文件的东西会更优雅地失败，但根本不会显示任何错误消息。仍然不是我想要的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-06T07:28:46.863

显然，您很久以前就为自己解决了这个问题，但是对于任何正在寻找答案的人来说，实际上有一种方法可以在提供的验证中做到这一点。

像这样简单地添加您的消息：

```
validates_attachment :avatar,
:content_type => { :content_type => /image/, :message => "Avatar must be an image" },
:size => { :in => 0..2.megabytes, :message => "Avatar must be less than 2 megabytes in size" } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T00:42:53.177

我最终编写了两个自定义验证器。确实，这些与回形针验证器做的事情相同，但它们更漂亮地失败了：

```
 def avatar_is_a_image
    if self.avatar?
      if !self.avatar.content_type.match(/image/)
        errors.add(:avatar, "Avatar must be an image")
      end
    end
  end

  def avatar_is_less_than_two_megabytes
    if self.avatar?
      if self.avatar.size > 5.megabytes
        errors.add(:avatar, "Avatar must be less than 5 megabytes in size")
      end
    end
  end 
```

# gwt - 带有 GWT 的 xtk：“未捕获的错误：找不到给定的容器或它的大小未定义。”

> ID：10711505
> 
> 赞同：0
> 
> 时间：2012-05-22T23:26:46.973
> 
> 标签：gwt, xtk

有人在 GWT 中使用过 XTK 吗？无论我做什么，我都会收到此错误“未捕获的错误：找不到给定的容器或它的大小未定义。”

我已经在基本 html（如下）中定义了容器元素，它可以通过其他方式（DOM、JQuery、GWT-JSNI）访问，但不能通过 XTK 库访问。

我的 GWT-JSNI 方法和容器 HTML 如下。

任何帮助或进一步调试的指示？

```
/* GWT JSNI method */
public native void initializeWebgl() /*-{

    alert('r ' + $doc.getElementById('r')); // works

    var r = new $wnd.X.renderer('r'); // fails ??????? why?
    alert("r is" + r);
    r.init(); }*-/ 
```

```
<iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>

<noscript>
  <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
    Your web browser must have JavaScript enabled
    in order for this application to display correctly.
  </div>
</noscript>

<div id="r" style="background-color: #000000; width: 100%; height: 100%;"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:40:22.760

1) 在某些情况下观察到此错误。使渲染器初始化失败的检查已被弃用，并已在“重构”分支中删除。所以，很快，这应该可以开箱即用。

2）目前，最简单的解决方法是将渲染器设置为固定高度（用于测试）：

```
<div id="r" style="background-color: #000000; width: 100%; height: 300px;"></div> 
```

3) 如果父元素的高度为 100%，则可以使用 CSS 在渲染器上定义最小高度。这里的信息：[http ://www.gn-webdesign.de/css-tutorials/css-div-height-100.html](http://www.gn-webdesign.de/css-tutorials/css-div-height-100.html)

# javascript - 如何在 video.js 上添加新组件（按钮）？

> ID：10711512
> 
> 赞同：1
> 
> 时间：2012-05-22T23:29:05.637
> 
> 标签：javascript, html5-video

我的问题是如何在 video.js 播放器上添加新组件（控制按钮）。

例如，添加一个按钮以允许更改视频播放速率。

举一个简单的例子会很有帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:38:22.537

它没有出现 VideoJS 直接支持播放速率，但据我了解，它只是 HTML5 视频元素的精美包装。

根据[这个堆栈溢出问题/答案，您可以直接在](https://stackoverflow.com/questions/3027707/how-to-change-the-playing-speed-of-videos-in-html5)[W3C HTML5 Video Wiki Entry](http://www.w3.org/wiki/HTML/Elements/video#IDL_Attributes_and_Methods)引用的 DOM 元素上更改 HTML5 视频的播放速率。

您可能不得不避开 VideoJS 来执行此操作，因为支持看起来并不成熟。此外，浏览器之间可能存在对该属性的支持的问题。

至于简单地添加控件，VideoJS 实现了一个[Javascript API](http://videojs.com/docs/api/)，您可以使用它来控制元素，但它似乎仅限于最基本的控件（播放/暂停/转到/全屏/等...）

播放器的默认控件似乎没有很大的可定制性，因此如果您希望提供更清晰的体验，您可以禁用视频内控件并在视频元素下的 html/dom/js 中重新实现您自己的控件。

## 例子：

使用一些非常简单的 html 和 Javascript，您可以连接一些简单的控件。

HTML：

```
<video id="Vid" ...>
</video>
<div id="Controls">
 <a id="Play" href="#Play">Play</a> - <a id="Pause" href="#Pause">Pause</a>
</div> 
```

JS：

```
_V_("Vid").ready(function() {
  var player = this;

  var playbutton = document.getElementById("Play");
  var pausebutton = document.getElementById("Pause");

  playbutton.onclick = function(event) {
    player.play();
  };

  pausebutton.onclick = function(event) {
    player.pause();
  };

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T19:53:18.480

在自己搜索后，我发现在tracks.js文件的最底部发生了类似的事情。

```
// Add Buttons to controlBar
_V_.merge(_V_.ControlBar.prototype.options.components, {
   "subtitlesButton": {},
   "captionsButton": {},
   "chaptersButton": {}
}); 
```

从tracks.js [https://github.com/videojs/video.js/blob/master/src/js/tracks.js](https://github.com/videojs/video.js/blob/master/src/js/tracks.js)

# c# - 命名空间的访问修饰符

> ID：10711513
> 
> 赞同：3
> 
> 时间：2012-05-22T23:29:21.450
> 
> 标签：c#, vb.net

一个函数或子例程可以被同一个命名空间访问，访问修饰符为private吗？

或者访问修饰符需要是公共的还是内部的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:42:07.980

在一个类中，您可以访问属于该类的所有方法和属性，以及由其基类公开的任何受保护成员（如果有的话）。

在同一~~命名空间~~程序集（或友元程序集）中的另一个类中，您只能引用第一个类的公共或内部成员。

来自其他~~命名空间~~程序集的类只能访问公共成员。

笔记：

*   命名空间是 C#/VB 提供的语法糖，访问内部方法的真正边界是在程序集级别。命名空间本身没有可见性规则，也不改变任何实体的可见性。
*   命名空间可以跨越多个程序集，并且多个命名空间可以在同一个程序集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T05:33:41.203

Clearifying MSDN content about [http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)

# php - 关闭php的错误报告

> ID：10711517
> 
> 赞同：29
> 
> 时间：2012-05-22T23:29:33.210
> 
> 标签：php

我想关闭网站上的错误报告。谷歌搜索我发现将下面提到的代码放在网站上可以阻止错误显示在屏幕上。我把它放到我的网站上，但它不起作用。请帮帮我。谢谢

```
<?php

error_reporting(0); // Turn off all error reporting

?> 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-22T23:36:45.937

试过了吗？

```
error_reporting(0);
@ini_set('display_errors', 0); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T23:38:03.583

这行得通吗？

```
display_errors = Off 
```

另外，你用的是什么版本的php？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-22T23:37:04.127

阅读[配置设置](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)（例如 , , `display_errors`）并更新您的or or文件，无论哪个是合适的。`display_startup_errors``log_errors``php.ini``.htaccess``.user.ini`

有用。

# java - 对象流与文本流 - 谁更快？爪哇

> ID：10711520
> 
> 赞同：3
> 
> 时间：2012-05-22T23:30:08.407
> 
> 标签：java

我正在做一项工作，我需要测量使用对象流和文本流进行读写的时间。我期待 Object Streams 比 Text Streams 快，但是，对于两种情况（读取和写入），我的结果完全相反。谁能告诉我哪个通常更快？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T23:34:22.853

Why did you think that Object streams would be faster? They have high overhead. Many people prefer other serialization mechanisms.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:27:57.817

对象流携带相当多的开销，因为它们需要序列化和反序列化类信息。它们对于唯一类的数量很少的大型对象图和数组可能相当有效，但对于小消息来说却是出了名的糟糕。对象序列化还必须做大量的记账工作（例如，检测对象图中的循环并确保每个对象在有多个引用时只发送一次）

另一方面，文本流非常简单，开销很小。它们在您的测试中更快也就不足为奇了。

尽管它在很大程度上取决于您如何将数据编码为文本：对象图的一些天真的文本表示实际上比常规的 Java 对象序列化要糟糕得多。基本上，尝试以文本形式重新发明 Java 对象序列化是一个坏主意......

如果您对对象的快速高效序列化感兴趣，您还应该考虑：

*   高级对象序列化库，例如 Goggle 的[Protocol Buffers](http://code.google.com/p/protobuf/)或[Kryo](http://code.google.com/p/kryo/)
*   高效的文本数据表示格式，如 JSON 或 Clojure s-expressions（两者都具有良好的库支持并已在该领域得到证明）

# wpf - Cannot set CommandParameter using ElementName

> ID：10711531
> 
> 赞同：0
> 
> 时间：2012-05-22T23:31:52.307
> 
> 标签：wpf, xaml

I have a TreeView with ContextMenu, and inside that menu I want to bind to a command on VIewModel

```
<TreeView x:Name="treeView"
          ItemTemplate="{StaticResource ItemTemplate}"
          ItemsSource="{Binding View}">

    <TreeView.ContextMenu>
        <ContextMenu>
            <telerik:RadMenuItem Header="Remove" Command="{Binding RemoveCommand}" CommandParameter="{Binding ElementName=treeView, Path=SelectedItem, Mode=OneWay}" />
        </ContextMenu>
    </TreeView.ContextMenu>
</TreeView> 
```

I receive an exception in Output window, like

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=treeView'. BindingExpression:Path=SelectedItem; DataItem=null; target element is 'RadMenuItem' (Name=''); target property is 'CommandParameter' (type 'Object') 
```

I am actually using RadTreeView, but the same applies for TreeView. Why I cannot bind to TreeView's SelectedItem property? I have tried with RelativeSource AncestorType, the same problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:21:53.267

问题是，就像 Popup 控件一样，它是一个不同的可视化树。该错误告诉您它正在尝试在“ `CommandParameter`”上查找名为“ ”的属性`RadMenuItem`，因为这是它在 ContextMenu 的可视化树中的 DataContext。

这将帮助您：[展示位置目标](http://msdn.microsoft.com/en-us/library/system.windows.controls.contextmenu.placementtarget.aspx)

我最终`CommandTarget`将 MenuItem 的属性设置为 ContextMenu 的`PlacementTarget`属性，但它看起来不像您正在采用的方法。即便如此，这`PlacementTarget`就是您正在寻找的东西。

# php - How to express an integer as the sum of powers-of-two?

> ID：10711534
> 
> 赞同：1
> 
> 时间：2012-05-22T23:32:23.200
> 
> 标签：php, math, logarithm

I have this number:

```
0101 
```

and I know it is the binary sum of

```
0100
0001 
```

How can I get those values from the first one?

**EDIT**

I have create a snippet of code based on the logic by JoeCortopassi. The snippet its this:

```
protected function _getSitesPublished($value) {
    static $bits = null;
    if (!$bits) {
        $bits = array ();
        $bit = 0;
        $x = 0;
        while ($bit < 4294967295) {
            $bit = pow (2, $x);
            $bits [$bit] = $bit;
                            ++ $x;
        }
    }
    $sites = array ();
    foreach ($bits as $bit) {
        if (($value & $bit) == $bit) {
            $sites [] = $bit;
        }
    }
    return $sites;
} 
```

It only create the bits the first time the method its called. I have to make the comprobation

```
if (($value & $bit) == $bit) 
```

since `$value & $bit` will return an int (may be other than 0, as in `6 & 3`) and because of that I can't use only `if ($value & $bit)`

Thanks to all for your help.

**EDIT 2** Oops! I had a little bug... forgot to increase the $x XD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:43:54.610

```
$values = bindec('0101');

$bar  = 1; // 0001
$fizz = 2; // 0010
$foo  = 4; // 0100
$baz  = 8; // 1000

if ( $values & $bar )
{
   //returns true
}

if ( $values & $fizz )
{
   //returns false
}

if ( $values & $foo )
{
   //returns true
}

if ( $values & $baz )
{
   //returns false
} 
```

**编辑：**

这是否是您正在寻找的更多内容？现在无法运行它进行测试，但它应该传达以下信息：

```
function bitCheck($original, $num, $return)
{
    if ( $num == 0 )
    {
        return $return;
    }

    if ($original & $num)
    {
        $return[] = $num;
    }

    return bitCheck($original, $num-1,$return);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:29:04.603

Mathematica 解决方案：

```
k[number_] := 
 ReplacePart[ConstantArray[0, Length@number], # -> 1] & /@ 
 (Position[number, 1] // Flatten) 
```

给出二进制输入的单个位分量的列表：

```
(* k[{1, 0, 1, 1, 0}] ->  {{1, 0, 0, 0, 0}, {0, 0, 1, 0, 0}, {0, 0, 0, 1, 0}} *) 
```

一个 Mathematica 解决方案，它采用二进制数字列表并返回数字值列表。

```
 Clear[s];
    Options[s] := {Base -> 2, Totalled -> False};
    s[number_, OptionsPattern[]] := 
     With[{digitVals = 
        Reverse@Flatten@
           NestList[# OptionValue@Base &, {1}, Length@number - 1] number},
       If[OptionValue@Totalled, Total@digitVals, digitVals]]

(* s[{1, 0, 1, 0, 1}] -> {16, 0, 4, 0, 1} *) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T00:13:51.733

使用 JoeCortopassi 的代码：

```
$value= bindec($binary);
$sums=array();
$counter=1;
while($counter<=$value){
    if($counter & value)
        $sums[]=$counter;
    $counter*=2;
}
print_r($sums); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T03:10:41.063

以下在java中有效，您可以在php或mathematica中使用类似的逻辑：

```
public class IntAsPowerOfTwo {

    public static void main(String[] args) {
        printIntAsSumPowerOf2(256);
        printIntAsSumPowerOf2(15);
        printIntAsSumPowerOf2(-1023);
    }

    /**
     * Prints an integer as sum of powers of 2.
     * 
     * @param valueToEvaluate
     */
    public static void printIntAsSumPowerOf2(int valueToEvaluate) {
        if (valueToEvaluate < 0) {
            System.out.println("Integer to evaluate must be non negative.");
        }

        int runningValue = valueToEvaluate;
        int currPower = 0;

        // Increase until larger than current value.
        while (Math.pow(2, currPower) < runningValue) {
            currPower++;
        }

        // Output sum of power of 2s.
        boolean firstOutput = true;
        while (currPower >= 0) {
            if (runningValue >= Math.pow(2, currPower)) {
                if (firstOutput) {
                    System.out.print(valueToEvaluate + " = 2^" + currPower);
                    firstOutput = false;
                } else {
                    System.out.print(" + 2^" + currPower);
                }
                runningValue = runningValue - (int) Math.pow(2, currPower);
            }
            currPower--;
        }
        System.out.print("\n");
    }
} 
```

# jquery - jquery 2 plugins breaking each other... which, and why?

> ID：10711541
> 
> 赞同：0
> 
> 时间：2012-05-22T23:33:09.997
> 
> 标签：jquery

I am new to jQuery and am using 2 plugins together.

[http://www.drewgreenwell.com/projects/metrojs](http://www.drewgreenwell.com/projects/metrojs) ^ For a flip effect when the page loads and mouseover flip effect.

And rcarousel, which I can't post a link to because I'm new.

Basically, the effect is this:

*   Page loads, all of the tiles should flip/animate.
*   Any mouseover should cause the tile to flip again (currently for testing purpose, they all flip at the same time, twice, then stop, and then flip on mouesover).
*   Carousel will be sitting in a header and requires user interaction to scroll through the rest of the tiles.

They work fine together when the page first loads ... but once you press Left or Right arrow on the carousel, the animation no longer functions, neither if I change the repeat back to infinite nor on mouseover.

[http://www.elevation24.com/newtiles](http://www.elevation24.com/newtiles)

Thanks for any assistance, please be gentle :) I realize everything is likely quite convoluted and messy... I have no idea what I am doing and am amazed I have gotten this far :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:36:47.657

当你加载新的'flipboxes'时，你必须再次调用'flip-script'......

如果你为他们做一个函数，那将是最简单的

```
function loadFlip(){
    $(".live-tile").hover(function(){
        $(this).liveTile("animate");
    });
} 
```

每次单击上一个或下一个链接时调用此函数.. :]

# android - Android Twitter4j - invalid Access Token format

> ID：10711544
> 
> 赞同：0
> 
> 时间：2012-05-22T23:34:00.030
> 
> 标签：android, twitter, twitter-oauth, twitter4j

I copied the example from [https://github.com/ddewaele/AndroidTwitterSample](https://github.com/ddewaele/AndroidTwitterSample). The only change I made was updating the jar files that were used (from 2.1.11 to 2.2.5). Apparantly that makes a difference.

When I run the following code

```
String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

AccessToken a = new AccessToken(token,secret); //Exception thrown here
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
twitter.setOAuthAccessToken(a); 
```

I get an exception when trying to create the AccessToken

```
java.lang.IllegalArgumentException: Invalid access token format. 
```

Since the user is trying to authenticate twitter for the first time, the token and secret strings are empty strings(""). Is there something obvious that I'm missing?

# macos - framework not found QGLViewer

> ID：10711549
> 
> 赞同：1
> 
> 时间：2012-05-22T23:34:23.493
> 
> 标签：macos, qt, frameworks, makefile

I am trying to install QGLViewer. When I compile it with QTcreator everything goes well, but when I try to build one of its examples, it gives me this error:

framework not found QGLViewer

I know that it is installed, because when I do

```
otool -D /Users/sara/Library/Frameworks/QGLViewer.framework/Versions/Current/QGLViewer 
```

the response is `QGLViewer`

I really want this library to work. What could be the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:15:07.977

这是一个错误。它已在上次更新中修复。

[http://www.libqglviewer.com/changeLog.html](http://www.libqglviewer.com/changeLog.html)

# javascript - navigate to somewhere else on page refresh

> ID：10711553
> 
> 赞同：0
> 
> 时间：2012-05-22T23:34:54.420
> 
> 标签：javascript, navigation

I have some web application at say www.somewebsite.com, when user refreshes the page, I want it to navigate to say www.google.com or anything else.

What I tried was attach event

```
window.onunload = function(){...} 
```

and

```
window.beforeunload = function(){...} 
```

I tried

```
window.location = "http://google.com" 
```

for some reason it is not working.

Anybody has idea how to solve this problem?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:46:40.547

它不能完成。浏览器不允许在 onunload 或 onbeforeunload 中更改窗口 url。所以，任何试图做同样事情的人都不要浪费你的时间。

# jquery - Slideshow plugin allowing animation between slideshow transitions

> ID：10711554
> 
> 赞同：0
> 
> 时间：2012-05-22T23:34:55.583
> 
> 标签：jquery, slideshow

Are there slideshow plugins allowing animation between slideshow transitions similar to the flash slideshow on this [page](http://www.ianwatt.ca/ActiveListings.php/Details/453/1280-richards-street-the-grace-residences-vancouver-bc#viewdetail "page")?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:40:38.793

我相信您正在寻找的东西被称为“肯伯恩斯”效应。[CrossSlide](http://tobia.github.com/CrossSlide/)是一个很棒的插件。

# python - Windows 上的这个基本 python 选择有什么问题？

> ID：10711557
> 
> 赞同：0
> 
> 时间：2012-05-22T23:35:05.643
> 
> 标签：python, windows, sockets, select

我在使用选择时遇到问题。我只是想知道哪些客户仍然在那里接收数据。有我的代码：

```
import socket, select

server = socket.socket()
server.bind(('localhost',80))
server.listen(1)

answer = "HTTP/1.1 200 OK\r\n"
answer+= "Content-type: text/plain\r\n"
answer+= "Connection: close\r\n"
body = "test msg"
answer+= "Content-length: %d\r\n\r\n" % len(body)
answer+= body

clients = []

while True:
  nextclient,addr = server.accept()
  clients.append(nextclient)
  clients = select.select([],clients,[],0.0)[1]
  for client in clients:
    client.send(answer) 
```

每次打开之前打开的所有套接字时，选择发送我，即使连接在另一端关闭，这也会导致 Errno1053 ：已建立的连接被主机中的软件中止。

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:42:53.707

您的选择永远不会阻塞。

> 超时值为零指定轮询并且从不阻塞。

此外，您的`listen`方法的论点绝对是极端的。

> socket.listen（积压）
> 
> 监听到套接字的连接。backlog 参数指定排队连接的最大数量，应至少为 0；最大值取决于系统（通常为 5）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:06:26.077

据我所知，您永远不会在写入套接字后关闭它，也不会将其从`clients`.

此外，您会覆盖`clients`以使您的客户列表丢失；有些客户永远不会被处理。

就像是

```
 clients_now = select.select([],clients,[],0.0)[1]
    for client in clients_now:
        client.send(answer)
        client.close()
        clients.remove(client) 
```

可能有帮助。

顺便说一句，只需 1 或 10 毫秒的一小段时间就可以让您的服务器保持响应，但可以防止由于空闲等待而导致的高 CPU 负载。

BTW2：也许你应该在选择过程中包括你的服务器套接字......

# android - 你能参数化一个意图创建函数吗？

> ID：10711560
> 
> 赞同：0
> 
> 时间：2012-05-22T23:35:17.003
> 
> 标签：android, function, android-activity, android-intent

为了简化一些代码，我想知道是否可以参数化在 android 应用程序中启动活动的代码，而不是 5

```
 public void showSettings(View view) {
    Intent SettingsActivity = new Intent(MainActivity.this, Settings.class);
    startActivity(SettingsActivity); 
```

我可以做如下的事情

```
 public void showActivity(View view, String ActivityName) {
        Intent ActivityName = new Intent(MainActivity.this, ActivityName.class);
        startActivity(ActivityName); 
```

然后，对于 UI 中的每个按钮，我只需将以下内容应用于“onclick”事件

> 显示活动（设置）；

或者

> 显示活动（域）；

这将在我的应用程序中节省大约 40-50 行代码。显然我知道上面的代码是不正确的，但我不确定是否可以做我想要完成的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:42:55.627

怎么样：

```
public <T> void showActivity(View view, Class<T> activity) {
    Intent activityName = new Intent(MainActivity.this, activity);
    startActivity(activityName);
} 
```

你可以调用它

```
showActivity(Settings.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:29:36.293

我建议使用 ACTIONs (String) 而不是准确指定上下文和类。这样你甚至可以在应用程序之间共享活动，如果你决定切换到不同的活动类，你可以只编辑android清单，而不是编辑所有调用这个活动的java源代码。

# node.js - 为什么在 node.js REPL 上执行时 require('underscore') 返回 undefined？

> ID：10711561
> 
> 赞同：14
> 
> 时间：2012-05-22T23:35:18.430
> 
> 标签：node.js, include, require, underscore.js

当我在控制台中运行 node 并键入`var _ = require('underscore');`时，`_`最终未定义。如果我将相同的代码放在一个文件中并执行它，则下划线库会按预期包含在内。

```
$ node
> var _ = require('underscore');
> console.log(_)
undefined // underscore library does not load
> var async = require('async');
undefined
> console.log(async) // async library does
{ noConflict: [Function],
  nextTick: [Function],
  forEach: [Function],
...
> 
```

但是 .js 文件中执行的相同代码`node test.js`显示两个库都按预期加载。这是怎么回事？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T01:01:08.940

Node repl 绑定`_`到最后评估的输入的值；这会覆盖您`_`在`var _ = ...;`. 另请参阅[repl 上的 node.js 文档](http://nodejs.org/api/repl.html#repl_repl_features)。

无论替换什么都是如此`...`，例如：

```
$ node
> var _ = "any value";
undefined
> _
undefined 
```

# string - 变量不在 Perl 字符串中扩展？

> ID：10711568
> 
> 赞同：2
> 
> 时间：2012-05-22T23:36:24.553
> 
> 标签：string, perl

我正在尝试使用下一个代码复制 png 文件

```
$cty2 = 'filename';
fwrite($fh, $stringData);
$old = 'images/bg_freeze.png';
$new = 'images/$cty2.png';
copy($old, $new) or die("Unable to copy $old to $new.");
fclose($fh); 
```

但是，结果是一个具有此名称 ( **$cty2.png** ) 的 png 文件，它应该是 ( **filename.png** )

我如何解决它以使新文件名（**filename.png**）不是（**$cty2.png**）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T23:38:15.627

您尚未指定哪种语言。但问题几乎可以肯定是您需要使用双引号 ( `"`)，而不是单引号 ( `'`)。否则变量将不会在字符串内展开。

# javascript - 如何使用变量来选择文档属性？

> ID：10711570
> 
> 赞同：0
> 
> 时间：2012-05-22T23:36:33.957
> 
> 标签：javascript

我希望有

```
document.body.innerHTML 
```

或者

```
document.head.innerHTML 
```

我尝试了明显的：

```
document.variable.innerHTML 
```

但不行。也希望它通过 jshint.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:37:06.250

尝试

```
document[variable].innerHTML 
```

该`.`表示法要求属性名称是一个有效的标识符和一个常量。但是，对象属性名称可以是任何字符串。因此，只要您有一个“丑陋”字符串的属性名称，或保存在变量中（或由某个表达式计算）的字符串，您就可以使用`[ ]`运算符来访问它。

# vb.net - 根据轴标签值格式化轴标签

> ID：10711588
> 
> 赞同：0
> 
> 时间：2012-05-22T23:38:22.677
> 
> 标签：vb.net, mschart

我有一个 P/L 图表，它的左刻度（Y 轴）从负值开始。我想格式化轴标签（主要刻度线标签），使负数为红色。就像是;

```
If cht.ChartAreas(chtarea).AxisX.MajorTickMark.Value < 0 Then
        cht.ChartAreas(chtarea).AxisY.LabelStyle.Font = New Font("Verdana", 9.0F, FontStyle.Bold, Color.Red)
    Else
        cht.ChartAreas(chtarea).AxisY.LabelStyle.Font = New Font("Verdana", 9.0F, FontStyle.Bold, Color.Black)
    End If 
```

当然这不起作用，因为 MajorTickMark 没有 value 属性。如何使这项工作？我已经在 VBA 中完成了，但这对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:37:49.190

我不知道如何更改多个标签的颜色，但是您可以`CustomLabels`从代码中将自己的颜色添加到适当的位置：

```
cht.ChartAreas(chtarea).AxisY.CustomLabels.Add(new CustomLabel(..., Color.Red)); 
```

# php - 在不更改 php 时区设置的情况下转换为 UTC

> ID：10711597
> 
> 赞同：4
> 
> 时间：2012-05-22T23:39:43.910
> 
> 标签：php, timezone, utc

如何在不更改默认时区的情况下转换 php 中日期字符串的时区。我想将其在本地转换为仅显示。不应修改 php 时区设置。

**编辑：** 我的源时间是 UTC 字符串，我想将其转换为不同的格式，将时区保留为 UTC，但 php 将其转换为本地时区。我使用的代码是：

```
date('Y-m-d H:i::s',strtotime($time_str)); 
```

如何保留时区？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T23:42:06.763

```
$src_tz = new DateTimeZone('America/Chicago');
$dest_tz = new DateTimeZone('America/New_York');

$dt = new DateTime("2000-01-01 12:00:00", $src_tz);
$dt->setTimeZone($dest_tz);

echo $dt->format('Y-m-d H:i:s'); 
```

请注意，如果源时间是 UTC，您可以将这一行更改为：

```
$dt = new DateTime("2000-01-01 12:00:00 UTC"); 
```

*编辑：看起来*你想去UTC。在这种情况下，只需将`"UTC"`其用作构造函数的参数`$dest_tz`，并使用原始代码块。（当然，`$src_tz`如果与默认时区相同，则可以省略该参数。）

# css - jqTree - css 在树中显示虚线

> ID：10711598
> 
> 赞同：2
> 
> 时间：2012-05-22T23:40:03.953
> 
> 标签：css, treeview

有没有人有一些 css 样式和图像可应用于 jqTree 以显示树的轮廓？像 YUI 树视图这样显示虚线边框的东西

[http://developer.yahoo.com/yui/examples/treeview/default_tree.html](http://developer.yahoo.com/yui/examples/treeview/default_tree.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:51:39.147

原来 YUI 树视图允许您使用现有的 html 来呈现。

```
 <script src="scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="scripts/tree.jquery.js" type="text/javascript"></script>    

    <!-- Required CSS -->
    <link type="text/css" rel="stylesheet" href="http://yui.yahooapis.com/2.9.0/build/treeview/assets/skins/sam/treeview.css">

    <!-- Dependency source file --> 
    <script src="http://yui.yahooapis.com/2.9.0/build/yahoo-dom-event/yahoo-dom-event.js" ></script>
    <!-- Optional dependency source file to decode contents of yuiConfig markup attribute--> 
    <script src="http://yui.yahooapis.com/2.9.0/build/json/json-min.js" ></script>

<!-- TreeView source file --> 
<script src="http://yui.yahooapis.com/2.9.0/build/treeview/treeview-min.js" ></script>

<script>
      var tree;
        function treeInit() {
            tree = new YAHOO.widget.TreeView("committeeTree");
            // if required, add nodes here
            tree.render();
        }

        $(function () {
              $("#myTree").tree({
                    data: source
                });

              treeInit();

        });

</script> 
```

# javascript - JQuery UI - 将 Draggable 附加到 Droppable

> ID：10711602
> 
> 赞同：13
> 
> 时间：2012-05-22T23:40:26.140
> 
> 标签：javascript, jquery

如何使用 jQueryUI 的 draggables/dropables 将被拖动的项目附加到放置的目标元素？看起来 jQuery UI 现在的工作方式是它只是通过绝对定位在屏幕上移动项目。不幸的是，此功能使表单提交毫无用处，因为您无法在提交时获得值的位置。

提前感谢任何项目/指针！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-23T00:09:54.103

如果我理解正确，您希望将拖动的元素与其当前父元素分离并附加到新元素，对吗？您可以使用助手进行拖动（因此原始元素不受影响），并在放置时将其分离并将其附加到目标（感谢@Oleg 和@Brian 改进了我的原始答案）。

```
$(myDraggable).draggable({
    helper:"clone",
    containment:"document"
});

$(myDroppable).droppable({
    drop:function(event, ui) {
        ui.draggable.detach().appendTo($(this));
    }
}); 
```

[​ jsFiddle](http://jsfiddle.net/mgibsonbr/PtLLf/)的工作示例

# java - Yomu 和 Heroku

> ID：10711605
> 
> 赞同：0
> 
> 时间：2012-05-22T23:40:35.297
> 
> 标签：java, ruby-on-rails-3, heroku

我刚刚在我的应用程序中安装了“yomu”gem（https://github.com/Erol/yomu）并部署到了heroku。在我的本地机器（Mac OS）上它运行良好。我在文档中注意到它声明它需要 JRE 才能工作。

当我在 Heroku 上运行应用程序时，出现以下错误：

```
Errno::ENOENT (No such file or directory - java -Djava.awt.headless=true -jar /app/.bundle/gems/ruby/1.9.1/gems/yomu-0.1.1/jar/tika-app-1.1.jar -t): 
```

我假设 yomu 在 Heroku 上找不到 java 编译器。我读对了吗？如果是，是否有我不考虑的附加组件？

顺便说一句，我使用 yomu 的原因是它可以从 doc 和 docx 文件中提取文本。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T21:55:27.577

如果您在 Cedar 堆栈上运行，则可以在以下位置使用 JDK：/usr/lib/jvm/java-6-openjdk

我不确定 Yomu 如何找到您的 Java 安装，但它可能在 JAVA_HOME 中查找。如果是这样，那么在 Heroku 上设置 JAVA_HOME 应该可以使它工作：

heroku 配置：添加 JAVA_HOME=/usr/lib/jvm/java-6-openjdk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:45:06.027

不是 java 编译器 - java 运行时（如文档所述，JRE）。Heroku 不（还？）支持将 JRE 作为插件安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-12T12:31:11.543

在新的 Heroku-16 堆栈中，您可以[将 jvm 添加为 buildpack](https://devcenter.heroku.com/articles/heroku-16-stack#testing-heroku-16-via-review-apps-apps-that-use-java-but-not-the-java-buildpack)，而无需配置路径或其他任何内容。只需确保将其设置为您的第一个 buildpack。我用 Yomu/Henkei 尝试过，它对我有用。

# clojure - Clojure 协议与类型

> ID：10711607
> 
> 赞同：4
> 
> 时间：2012-05-22T23:40:39.603
> 
> 标签：clojure

## 免责声明

尽管有标题，但这是一个真正的问题，而不是 Emacs/Vi 火焰大战的尝试。

## 语境

我已经使用 Haskell 几个月了，并编写了一个小型的 ~10K LOC 解释器。在过去的一年里，我切换到了 Clojure。有一段时间，我为 Clojure 缺乏类型而苦苦挣扎。然后我切换到在 Clojure 中使用 defrecords，现在切换到 Clojure 的 defprotocols。

我真的很喜欢defprotocols。其实不止种类。

我现在正处于我的 Clojure 函数的地步，因为它是文档字符串，我只是指定：

```
* the protocols of the inputs
* the protocols of the outputs 
```

使用它，我现在似乎有一个临时类型系统（不是编译器检查；而是人工检查）。

## 问题

我怀疑我缺少一些关于类型的东西。类型通过协议提供什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-11T07:34:04.220

# 质疑问题...

您的问题“类型通过协议提供什么？” 对我来说似乎很尴尬。类型和协议是垂直的；他们描述不同的事物。**类型/记录定义了*数据*的结构，而协议定义了某些*行为或功能*的结构。**这个问题对我来说很奇怪的部分原因是这些事情*并不是相互排斥*的！您可以让类型实现协议，从而为它们提供协议描述的任何行为/功能。事实上，由于您的上下文清楚地表明您*一直*在*使用*协议，我不得不想*知道*您是如何使用它们的。我的*猜测*是您一直在将它们与记录一起使用（或可能将它们具体化），但是您可以轻松地将协议和（def）类型一起使用。

所以对我来说，您似乎在这里将苹果与橙子进行了比较。为了帮助澄清，让我将苹果与苹果和橙子与橙子进行比较，并提出几个不同的问题：

## 协议解决了哪些问题，有哪些替代方案及其各自的优缺点？

协议允许您定义在不同类型上以不同方式运行的函数。唯一的其他方法是多方法和简单的函数逻辑：

*   多方法：具有极其灵活的价值。您可以通过`type`作为分派函数传递类型来分派行为，但您也可以使用任何其他任意函数进行分派。
*   内部函数逻辑：您也可以（当然）在函数定义中手动检查条件中的类型，以决定如何在给定不同类型的情况下进行不同的处理。这比多方法分派更原始，扩展性也更差。除了在简单的情况下，多方法是首选。

协议具有更高性能的优势，基于高度优化的 JVM 类/方法分派。此外，协议被设计用来解决[表达问题](http://www.ibm.com/developerworks/library/j-clojure-protocols/)（很好读），这使得它们成为制作漂亮、模块化、可扩展的 API 的真正强大工具。

## （def）记录或具体化（def）类型的优点/缺点是什么？

在我们如何指定**data 的结构方面**，我们有许多可用的选项：

*   (def)records：生成一个适合“表示应用程序域信息”的类型（来自[http://clojure.org/datatypes](http://clojure.org/datatypes)；值得一读）
*   (def)types：为创建“实现/编程域的工件”生成更轻量级的类型，例如标准集合类型
*   reify：构造一个一次性对象，其匿名类型实现一个或多个协议；适合...需要实现协议的一次性事物

实际上，记录的行为类似于 clojure 哈希映射，但具有能够实现协议和更快的属性查找的额外好处。方便的是，仍然可以通过 扩展`assoc`，尽管以这种方式添加的属性不共享编译后的查找性能。这就是使这些构造便于实现应用逻辑的原因。使用 deftype 对于实现/编程领域的各个方面是有利的，因为它们不会实现多余的包，使这些情况下的使用更清洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T23:48:47.260

协议创建接口，接口是一个类型的接口。它们描述了一种类型的某些方面，尽管比您在 Haskell 等语言中所期望的要严格得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T01:24:58.123

*   机器检查
*   类型推断（您的某些协议不会从其他人的文档中生成）
*   参数多态性（参数化协议/具有泛型的协议不存在）
*   高阶协议（返回协议的函数的协议是什么？）
*   自动生成代码/样板
*   与自动化工具的互操作

# .net - 用于 WCF 的独立 WPF 结构

> ID：10711617
> 
> 赞同：0
> 
> 时间：2012-05-22T23:42:38.463
> 
> 标签：.net, wcf

构建使用 MSSQL 后端的独立 WPF 应用程序。我想对其进行结构化，以便以后可以通过 WCF 将其转换为客户端服务器。有一组由客户端和服务器共享的类。我该如何构造它，以便稍后可以通过 WCF 将服务器部件移动到真正的服务器并保持各个类的整体（或尽可能整体）。现在，我在单个 .CS 中拥有业务和数据层，具有单个服务器类和一个客户端类和一组共享类。我觉得应该是三个 .CS 但不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:34:59.647

由于我没有收到任何回复，因此我构建了一个测试 WCF 应用程序来尝试回答自己。

显然我是 WCF 的新手。

客户端和服务器之间的 WCF 是 ServiceContracts 和 DataContracts。这些是在服务器端定义的。客户端发现这些合约并将它们作为类型公开。

ServiceContract 是一种方法。DataContract 是一个只有属性的类（好吧，它可以做更多，这只是一个简化）。

所以回答我的问题。

使用代表服务器端的方法创建一个类。

创建一些仅具有公共属性的简单类来表示 DataContacts。

对于代表服务器端的方法的输入和输出，只传递这些简单的类。

使用这些简单的类作为您的工作客户端类的构造函数的输入。

试金石是没有客户端类连接到 SQL。

在支持应用程序的某些情况下，我们让客户端类连接到具有循环并保持连接的 SQL，但留下需要为 WCF 重构的注释。我知道我会在这里得到一些安全评论。目前，客户端托管在 Citrix 中，端口 1433 未向公众开放。这个想法是定位产品以放弃思杰。

服务器方法是公开的接口，因此您可以在不更改合同的情况下更新实现。

DataContract 将支持继承。
[数据合约继承](https://stackoverflow.com/questions/8555089/datacontract-and-inheritance)

如果有人有更好的答案，我很乐意接受。

# jquery-ui - jquery UI 可拖动可调整大小与包含在 ie9 中不起作用？

> ID：10711620
> 
> 赞同：2
> 
> 时间：2012-05-22T23:43:05.467
> 
> 标签：jquery-ui, internet-explorer, jquery-ui-draggable, jquery-ui-resizable

该代码适用于 Chrome，我正在尝试让该代码在 ie9 上运行。它可以在没有包含的情况下与 draggable() 一起正常工作，但是当包含设置为父级时会严重破坏行为：

```
img = $("<img alt='Preview' id='preimg' src='" + data.result.url +"' />")
$('#preimage').append(img);
$('#preimage').resizable({
                    'aspectRatio':true,
                    'handles':"all",
                    'autoHide':true,
                     containment: "parent"
                }).draggable({
                            containment: "parent"
                        }); 
```

父位置设置为相对。我正在使用 jquery 1.7.2 和 jquery-ui 1.8.20 有什么解决方法吗？

**编辑**

经过大量测试 - 我发现 div 的容器大小计算工作不正常，我能够让它在启用可调整大小的情况下工作，但实际上没有调整 div 的大小。一旦我调整可拖动包含区域的大小，它的大小就会减小，多次调整大小会导致该区域变小，直到拖动选项停止工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T21:23:32.300

我发现 jquery ui 库有几个关于这些问题的错误报告 - [http://bugs.jqueryui.com/report/10?P=resizable](http://bugs.jqueryui.com/report/10?P=resizable)

我能够找到一个我广泛测试过的工作，并且在大多数情况下应该可以工作。这里的关键是您需要使用不浮动且具有相对位置的容器 div。如果您需要使用浮动/绝对 div，只需在其中创建一个 div 并将位置设置为相对。对于问题中的代码，html 如下所示：

```
<div class="outer"> 
    <div class="container">
         <div id="preimage"></div>
    </div>
</div> 
```

和CSS将是：

```
.outer{
position:absolute;
right:0;
}
.container{
position: relative; 
} 
```

由于在调整大小时不能拖动元素，反之亦然，因此使用 javascript 的更安全的方法（以避免某些问题）是：

```
$('#sqoutline2').resizable({
        'handles':"all",
        'autoHide':false,
        containment: "parent",
        start:function(){$('#sqoutline2').draggable('options','disabled','true');},
        stop:function(){$('#sqoutline2').draggable('options','disabled','false');}
    }).draggable({containment:"parent",
            start:function(){$('#sqoutline2').resizable('options','disabled','true');},
           stop:function(){$('#sqoutline2').resizable('options','disabled','false');}
       }); 
```

# iphone - 将 kABemailProperty 转换为 NSString

> ID：10711621
> 
> 赞同：0
> 
> 时间：2012-05-22T23:43:11.660
> 
> 标签：iphone, objective-c, ios, ipad, addressbookui

在我的地址簿应用程序中，当我获取联系人的电子邮件 ID 时，我设置了如下内容：

```
ABMultiValueRef 0x2994e0 with 1 value(s)
0: null (0x3f5655e0) - xyz@gmail.com (0x2994b0) 
```

如何获取字符串值，即仅

```
 xyz@gmail.com 
```

从上面的结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:59:39.360

```
// This is what you have currently (i.e. the multivalues)
ABMultiValueRef emailValues = ABRecordCopyValue(person, kABPersonEmailProperty);

// This is how you extract the first item from the multivalues:
CFStringRef cfEmailAddress = ABMultiValueCopyValueAtIndex(emailValues, 0);

// This is how you convert it to an NSString.
NSString *emailAddress = CFBridgingRelease(cfEmailAddress); 
```

# javascript - 庆祝罗伯特穆格的 Google Doodle 是如何产生声音的？

> ID：10711631
> 
> 赞同：6
> 
> 时间：2012-05-22T23:45:18.870
> 
> 标签：javascript

我正在查看今天[庆祝 Robert Moog 的 Google Doodle](http://www.google.com/doodles/robert-moogs-78th-birthday)。看起来都是 JavaScript。我知道如何使用 JavaScript 播放预制的声波文件并即时生成声音文件，但这似乎远不止于此。这个涂鸦是如何产生声音的？

# c# - 有没有办法抑制键盘蜂鸣声？

> ID：10711633
> 
> 赞同：0
> 
> 时间：2012-05-22T23:45:49.963
> 
> 标签：c#, winforms, beep

我想在我的应用程序中抑制键盘哔声，或者至少在特定事件处理程序中抑制。这可能吗？

## 更新

好的，你要求它（代码示例）：

预览键向下：

```
 private void textBoxDuckbill_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e) {
        switch (e.KeyCode) {
            case Keys.Down:
            case Keys.Up:
                e.IsInputKey = true;
                break;
        }
    } 
```

向下键：

```
 private void textBoxDuckbill_KeyDown(object sender, KeyEventArgs e) {
        TextBox tb = (TextBox)sender;

        if (e.KeyCode.Equals(Keys.Up)) {
            SetFocusOneRowUp(tb.Name);
            e.Handled = true;
            return;
        }
        if (e.KeyCode.Equals(Keys.Down)) {
            SetFocusOneRowDown(tb.Name);
            e.Handled = true;
            return;
        }

        if (e.KeyCode.Equals(Keys.Left)) {
            SetFocusOneColumnBack(tb.Name);
            e.Handled = true;
            return;
        }
        if (e.KeyCode.Equals(Keys.Right)) {
            SetFocusOneColumnForward(tb.Name);
            e.Handled = true;
            return;
        }
    } 
```

按键：

```
 private void textBoxDuckbill_KeyPress(object sender, KeyPressEventArgs e) {
        TextBox tb = (TextBox)sender;
        errorProviderCRLogins.SetError(tb, String.Empty);

        // If user presses "%" (37) move back/left one TextBox column; 
        // if user presses "'"(39) move forward/right one TextBox column.
        // Also now allowing navigational arrows to do the same thing (KeyDown event)
        if (e.KeyChar == '%') {
            SetFocusOneColumnBack(tb.Name);
            e.Handled = true;
            return;
        }
        if (e.KeyChar == Convert.ToChar(@"'")) {
            SetFocusOneColumnForward(tb.Name);
            e.Handled = true;
            return;
        }

        // Preclude values (1,2,3) that would normally be allowed (see below) but do 
        // not have a value in the corresponding PlatypusID TextBox
        if (((e.KeyChar == '1') && (String.IsNullOrWhiteSpace(textBoxPlatypusNum1.Text))) ||
            ((e.KeyChar == '2') && (String.IsNullOrWhiteSpace(textBoxPlatypusNum2.Text))) ||
            ((e.KeyChar == '3') && (String.IsNullOrWhiteSpace(textBoxPlatypusNum3.Text)))) {
            e.Handled = true;
            return;
        }

        // Now, having gotten to here, we can assume that 1, 2, and 3 are valid (as are
        // Space and Backspace all the time).
        if ((e.KeyChar != '1') &&
            (e.KeyChar != '2') &&
            (e.KeyChar != '3') &&
            (e.KeyChar != (char)Keys.Space) &&
            (e.KeyChar != (char)Keys.Back)) {
            e.Handled = true;
            return;
        }

        // Added Space as an allowable entry so user can delete a val with that key
        // (which will automatically happen on tabbing into the TextBox, as it is
        // now being highlighted)
        if ((e.KeyChar == (char)Keys.Space) || (e.KeyChar == (char)Keys.Back)) {
            tb.Text = String.Empty;
            buttonSave.Enabled = true;
            // Don't return here, as they might continue to hit Space to zero out 
            // subsequent cells
        }

        // Now, if there is already a value in the cell (this is a repeated val, as shown
        // by TextLength being 1 instead of 0), move it to the next cell and give it the 
        // value just entered (even if space for "delete")
        if ((tb.TextLength == 1) || (e.KeyChar == (char)Keys.Space)) {
            buttonSave.Enabled = true;
            MoveToNextCellAndEnterVal(e.KeyChar.ToString(), tb.Name);
        }
        // Although KeyChar has a val such as 49/("1"), TextLength == 0
        if ((e.KeyChar == '1') ||
        (e.KeyChar == '2') ||
            (e.KeyChar == '3')) {
            buttonSave.Enabled = true;
        }
    } 
```

文字更改：

```
 private void textBoxDuckbill_TextChanged(object sender, EventArgs e) {
        TextBox tb = (TextBox)sender;

        if (tb.Text == "1") {
            tb.BackColor = PlatypusID1_BACKCOLOR;
            tb.ForeColor = PlatypusID1_FORECOLOR;
            return;
        }

        if (tb.Text == "2") {
            tb.BackColor = PlatypusID2_BACKCOLOR;
            tb.ForeColor = PlatypusID2_FORECOLOR;
            return;
        }

        if (tb.Text == "3") {
            tb.BackColor = PlatypusID3_BACKCOLOR;
            tb.ForeColor = PlatypusID3_FORECOLOR;
            return;
        }

        tb.BackColor = System.Drawing.SystemColors.Window;
        tb.ForeColor = System.Drawing.SystemColors.WindowText;
    }

    private void MoveToNextCellAndEnterVal(string APlatypusID, string ATextBoxName) {
        String numericPortionOfTextBoxName = ATextBoxName.Remove(0, LENGTH_OF_TEXT_BOX_BASE);
        String sTextBoxToFind;
        int textBoxNumber = 0;
        int nextTextBoxNumber;

        int.TryParse(numericPortionOfTextBoxName, out textBoxNumber);
        nextTextBoxNumber = ++textBoxNumber;
        // "wrap around"
        if (nextTextBoxNumber > NUMBER_OF_QUARTER_HOURS) {
            nextTextBoxNumber = nextTextBoxNumber - NUMBER_OF_QUARTER_HOURS;
        }
        sTextBoxToFind = String.Format("textBoxDuckbill{0}", nextTextBoxNumber);
        TextBox tb = (TextBox)this.Controls.Find(sTextBoxToFind, true).First();
        tb.Focus();
        tb.Text = APlatypusID;
    }

    private void SetFocusOneRowDown(string ATextBoxName) {
        String numericPortionOfTextBoxName = ATextBoxName.Remove(0, LENGTH_OF_TEXT_BOX_BASE);
        String sTextBoxToFind;
        int textBoxNumber = 0;
        int nextTextBoxNumber;

        int.TryParse(numericPortionOfTextBoxName, out textBoxNumber);
        if (!(textBoxNumber == NUMBER_OF_QUARTER_HOURS)) {
            nextTextBoxNumber = ++textBoxNumber;
        } else {
            nextTextBoxNumber = 1;
        }
        sTextBoxToFind = String.Format("textBoxDuckbill{0}", nextTextBoxNumber);
        TextBox tb = (TextBox)this.Controls.Find(sTextBoxToFind, true).First();
        tb.Focus();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:56:45.740

~~我通过 .NET 4.0 Winforms 代码对 ReSharper 进行了一些挖掘，但我无法找到生成“哔”的位置。~~

~~这使我相信它超出了 .NET 的控制范围，并且无法阻止任何会导致哔哔声的键输入，我认为您无法抑制它。即使这样做可能还不够，因为您编写的任何处理程序来阻止它实际上可能最终在导致哔声的代码之后运行。~~

*（左以防有人点击这个寻找答案）*

此外，这感觉就像你在攻击错误的问题。我最好的猜测是你有一些操作导致你的应用程序发出很多哔声。与其抑制蜂鸣声，不如确定导致蜂鸣声的原因并从根本上消除问题？

编辑：

好的，我已经查看了背景颜色更改的代码。确实没有理由更改此属性会导致系统发出哔哔声。我能想象的*唯一事情是：*

1.  您在某处连接了一个处理程序`.BackColorChanged`，它会发出哔哔声。
2.  也许只是也许您的调试环境没有因可能发生的异常而中断。

    ```
     if (!value.Equals((object) System.Drawing.Color.Empty) && !this.GetStyle(ControlStyles.SupportsTransparentBackColor) && (int) value.A < (int) byte.MaxValue)
         throw new ArgumentException(System.Windows.Forms.SR.GetString("TransparentBackColorNotAllowed")); 
    ```

    这是`.BackColor`控件设置器中的第一个代码块。基本上，如果您使用的表单样式（主题）不支持透明度，并且您提供的颜色在 alpha 通道中具有 255 以外的任何颜色，则会引发异常。可能您的错误处理/调试环境的设置方式不会引发该异常，但会被吞下，并且系统蜂鸣声可能是一个指标。

这里的变量实在太多，无法给你一个明确的答案，但我强烈建议你从那里开始。**背景颜色确实没有理由引起系统蜂鸣声。**我几乎可以向你保证，这实际上是另一回事。

这是其他问题的症状，简单地抑制哔声实际上可以隐藏一个潜在的问题，该问题可能会导致其他地方的其他错误。

通常最好的做法是不隐藏错误/异常，除非您对特定的事情有明确的行动方案。这就是为什么不鼓励盲目尝试/捕获的原因，因为您会认为这是理所当然的，并且当另一个错误落入该陷阱时，您将无法获得必要的调试信息来查找/修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:00:27.207

您必须将密钥设置为已处理。

```
 e.Handled = true 
```

或在某些情况下：

```
 e.SuppressKeyPress = true 
```

编辑：没关系，OP已经声明这不是无效的按键蜂鸣声。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:36:25.990

一旦我在 KeyPress 事件的底部更改了此代码：

```
if ((e.KeyChar == '1') ||
    (e.KeyChar == '2') ||
    (e.KeyChar == '3')) {
    buttonSave.Enabled = true;
} 
```

..对此：

```
if ((e.KeyChar == '1') ||
    (e.KeyChar == '2') ||
    (e.KeyChar == '3')) {
    buttonSave.Enabled = true;
    e.Handled = true;
    tb.Text = e.KeyChar.ToString();
} 
```

..它就像众所周知的魅力手链一样工作。IOW，我不得不告诉它不允许输入密钥（尽管它是有效的），然后以编程方式将其放在那里。

为什么这行得通或“必须这样”我不知道，但它行得通，所以我或多或少地感到满意。

# java - 调整 JPanel 大小时的 Java drawImage() 调用

> ID：10711636
> 
> 赞同：2
> 
> 时间：2012-05-22T23:46:36.077
> 
> 标签：java, swing

我正在尝试使用 Java 6/7 编写可重用的 JPanel 图像查看器。**如果在调整大小期间不移动 JPanel的**左上角（视口原点），我可以使用 mouseDragged 实现图像拖动，也可以调整 JPanel 的大小以裁剪或显示图像。注意我不想调整图像大小以适应面板。我希望图像在调整面板大小以裁剪它时保持固定在屏幕上。

如果我拖动框架的左边缘并因此移动视口原点，即使我在调整大小期间动态重新计算图像原点，在调整大小操作期间也会出现相当大的图像抖动。这似乎是由于在调用paintComponent() 的时间和通过调用drawImage() 实际渲染图像的时间之间的视口原点发生了变化。关于如何消除所说的抖动的任何想法？提前致谢。

下面的两个类应该演示该行为：

```
/***** ImageViewer.java *****/
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.image.BufferedImage;
import javax.swing.*;
import java.awt.event.*;
import java.io.*;

import javax.imageio.ImageIO;

public class ImageViewer extends JFrame
{
    private ImagePanel      canvas;
    private BufferedImage   theImage;
    private JFileChooser    theChooser;

    public ImageViewer( BufferedImage bi )
    {
    canvas= new ImagePanel( );
    add( canvas, BorderLayout.CENTER );

    JPanel control= new JPanel();
    JButton loadBtn= new JButton( "Load Image" );
    control.add( loadBtn );
    add( control, BorderLayout.NORTH );
    loadBtn.addActionListener( new ActionListener() {
        public void actionPerformed( ActionEvent e )
        { doLoad(); }
    });

    theChooser= new JFileChooser();
    }

    public void doLoad()
    {
    File iFile = null;

    int retVal = theChooser.showOpenDialog(this);
    if (retVal == JFileChooser.APPROVE_OPTION) {
        iFile = theChooser.getSelectedFile();
        try {
        theImage = ImageIO.read(iFile);
        } catch (FileNotFoundException ie) {
        System.err.println("File not found");
        System.exit(1);
        } catch (IOException ie) {
        System.err.println("IOException");
        System.exit(1);
        }
        canvas.setImage( theImage );
        repaint();
    }
    }

    /**
     * @param args
     */
    public static void main(String[] args)
    {
    BufferedImage bImage= null;

    ImageViewer theApp= new ImageViewer( bImage );
    theApp.setDefaultCloseOperation(EXIT_ON_CLOSE);

    theApp.pack();
    theApp.setVisible( true );
    }
}

/***** ImagePanel.java *****/
import java.awt.Color;
import java.awt.Component;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.awt.event.*;
import java.awt.geom.*;

import javax.swing.JPanel;

public class ImagePanel extends JPanel
{
    private BufferedImage theImage;
    private Dimension preferredSize;
    private double scaleF = 1.0; // image scaling factor
    private Point2D.Double deltaLoc; // dx, dy in scaled units for image upper
                     // left corner from origin to current loc
                         // inside or outside viewport
    private Point panelLastLoc; // last location of upper left corner of the
                // viewport in screen coordinates
    private int lastX;
    private int lastY;
    private PanelState state = PanelState.IDLE;

    public enum PanelState
    {
    IDLE, RESIZING, PMOVING, IMOVING
    };

    public ImagePanel()
    {
    setBackground(Color.GRAY);
    preferredSize = new Dimension(400, 400);

    addHierarchyListener(new HierarchyListener() {
        public void hierarchyChanged(HierarchyEvent he)
        {
        doComponentChanged(he);
        }

    });

    addHierarchyBoundsListener(new HierarchyBoundsAdapter() {
        public void ancestorMoved(HierarchyEvent he)
        {
        doComponentMoved();
        }

        public void ancestorResized(HierarchyEvent he)
        {
        doAncestorResizing();
        }
    });

    addComponentListener(new ComponentAdapter() {
        public void componentResized(ComponentEvent ce)
        {
        doComponentResized();
        }
    });

    addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent me)
        {
        setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
        state = PanelState.IMOVING;
        lastX = me.getX();
        lastY = me.getY();
        }

        public void mouseReleased(MouseEvent me)
        {
        setCursor(Cursor.getDefaultCursor());
        state = PanelState.IDLE;
        }
    });

    addMouseMotionListener(new MouseMotionAdapter() {
        public void mouseDragged(MouseEvent me)
        {
        doImageMoved(me);
        }
    });
    }

    public ImagePanel(BufferedImage bi)
    {
    theImage = bi;
    preferredSize = new Dimension(theImage.getWidth(), theImage.getHeight());
    }

    public Dimension getPreferredSize()
    {
    return preferredSize;
    }

    private void doComponentChanged(HierarchyEvent he)
    {
    if (isShowing()) {
        panelLastLoc = getLocationOnScreen();
    }
    state = PanelState.IDLE;
    }

    private void doImageMoved(MouseEvent me)
    {
    if (!isShowing() || theImage == null)
        return;

    switch (state)
    {
        case RESIZING:
        error("IMOVING->RESIZING");
        break;
        case PMOVING:
        error("IMOVING->PMOVING");
        break;
        case IDLE:
        error("IMOVING->IDLE");
        break;
        case IMOVING:
        if (contains(me.getX(), me.getY())) {
            int dx = me.getX() - lastX;
            int dy = me.getY() - lastY;
            lastX = me.getX();
            lastY = me.getY();
            deltaLoc.x += dx;
            deltaLoc.y += dy;
            repaint();
        }
        return;
    }

    }

    private void doComponentMoved()
    {
    if (!isShowing() || theImage == null)
        return;

    switch (state)
    {
        case RESIZING:
        return;
        case IMOVING:
        error("IMOVING->PMOVING");
        break;
        case PMOVING:
        case IDLE:
        panelLastLoc = getLocationOnScreen();
        state = PanelState.PMOVING;
    }
    return;
    }

    private void doAncestorResizing()
    {
    if (!isShowing() || theImage == null)
        return;

    switch (state)
    {
        case IMOVING:
        error("IMOVING->RESIZING");
        return;
        case RESIZING:
        case PMOVING:
        case IDLE:
        Point cLoc = getLocationOnScreen();
        state = PanelState.RESIZING;
        if (theImage != null) {
            deltaLoc.x -= cLoc.x - panelLastLoc.x;
            deltaLoc.y -= cLoc.y - panelLastLoc.y;
        }
        panelLastLoc = cLoc;
    }
    }

    private void doComponentResized()
    {
    Point cLoc = getLocationOnScreen();
    switch (state)
    {
        case RESIZING:
        state = PanelState.IDLE;
        break;
        case IMOVING:
        error("IMOVING->RESIZED");
        break;
        case PMOVING:
        state = PanelState.IDLE;
        break;
        case IDLE:
        break;
    }

    if (theImage != null) {
        deltaLoc.x -= cLoc.x - panelLastLoc.x;
        deltaLoc.y -= cLoc.y - panelLastLoc.y;
    }
    panelLastLoc = cLoc;
    }

    public void setImage(BufferedImage nI)
    {
    theImage = nI;
    scaleF = 1.0;
    state = PanelState.IDLE;
    deltaLoc = new Point2D.Double(Math.round((getWidth() - theImage.getWidth()) / 2.0),
        Math.round((getHeight() - theImage.getHeight()) / 2.0));
    panelLastLoc = getLocationOnScreen();
    }

    private void error(String em)
    {
    System.err.println(em);
    System.exit(1);
    }

    public void paintComponent(Graphics g)
    {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;
    if (theImage == null)
        return;
    /*
     * Check if the viewport has resized or moved. The check below is
     * performed on every repaint.
     */

    Point cLoc = getLocationOnScreen();
    Dimension cDim = getSize();

    if (state == PanelState.RESIZING || state == PanelState.IDLE) {
        deltaLoc.x -= cLoc.x - panelLastLoc.x;
        deltaLoc.y -= cLoc.y - panelLastLoc.y;
    }
    /*
    System.err.println("image left edge= "
        + Math.round(cLoc.x + deltaLoc.x) + "; state= " + state
        + "; cDim= " + cDim + "; cLoc= " + cLoc + "; pLLoc= "
        + panelLastLoc + "; dLoc= " + deltaLoc);
        */
    // In all cases update panelLastLoc
    panelLastLoc = cLoc;

    g2.drawImage(theImage, (int) Math.round(deltaLoc.x),
        (int) Math.round(deltaLoc.y), null);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:52:26.143

您是否尝试过覆盖以在您的图像上`paintComponent`调用`repaint`（或可能）？`revalidate`这将确保`drawImage`在更改后在屏幕上显示任何内容之前调用。

另请参阅[此问题](https://stackoverflow.com/q/1097366/520779)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:45:26.277

不是答案，而是我认为我会分享的失败尝试。如果必须，请投反对票。

我以为我会很聪明，并尝试使用持有 JLabel/ImageIcon 的 JScrollPane 为我做运动，但它仍然没有用。例如，

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

@SuppressWarnings("serial")
public class ImageViewer2 extends JPanel {
   private static final int SP_WIDTH = 500;
   private static final int SP_HEIGHT = SP_WIDTH;
   private JLabel viewportView = new JLabel();
   private JViewport viewport = new JViewport();
   private JScrollPane scrollpane = new JScrollPane();
   private Point viewLocOnScrn = null;

   public ImageViewer2() {
      viewport.setView(viewportView);
      scrollpane.setViewport(viewport);
      viewport.setBackground(Color.gray);
      viewport.addComponentListener(new MyComponentListener());

      scrollpane.setPreferredSize(new Dimension(SP_WIDTH, SP_HEIGHT));
      scrollpane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
      scrollpane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);

      MyMouseAdapter mouseAdapter = new MyMouseAdapter();
      viewport.addMouseListener(mouseAdapter);
      viewport.addMouseMotionListener(mouseAdapter);

      JButton loadImageBtn = new JButton(new LoadImageAction("Load Image"));
      JPanel topPanel = new JPanel();
      topPanel.add(loadImageBtn);

      setLayout(new BorderLayout());
      add(scrollpane, BorderLayout.CENTER);
      add(topPanel, BorderLayout.PAGE_START);
   }

   private class MyComponentListener extends ComponentAdapter {

      @Override
      public void componentMoved(ComponentEvent compEvt) {
         compEvtOccurred(compEvt);
      }

      @Override
      public void componentResized(ComponentEvent compEvt) {
         compEvtOccurred(compEvt);
      }

      private void compEvtOccurred(ComponentEvent compEvt) {
         Point newViewLocOnScn = viewportView.getLocationOnScreen();
         if (viewLocOnScrn != null && !newViewLocOnScn.equals(viewLocOnScrn)) {
            Point scrollPaneLocOnScrn = scrollpane.getLocationOnScreen();
            int x = scrollPaneLocOnScrn.x - viewLocOnScrn.x;
            int y = scrollPaneLocOnScrn.y - viewLocOnScrn.y;
            viewport.setViewPosition(new Point(x, y));
         }
      }

   }

   private class MyMouseAdapter extends MouseAdapter {
      private Point delta;

      @Override
      public void mousePressed(MouseEvent mEvt) {
         Point mousePt = mEvt.getPoint();
         Point viewPos = viewport.getViewPosition();
         delta = new Point(viewPos.x + mousePt.x, viewPos.y + mousePt.y);
      }

      @Override
      public void mouseDragged(MouseEvent e) {
         if (delta ==  null ) {
            return;
         }

         Point p = e.getPoint();
         viewport.setViewPosition(new Point(delta.x - p.x, delta.y - p.y));
         viewLocOnScrn = viewportView.getLocationOnScreen();
      }

      @Override
      public void mouseReleased(MouseEvent e) {
         delta = null;
      }
   }

   private class LoadImageAction extends AbstractAction {
      public LoadImageAction(String text) {
         super(text);
      }

      @Override
      public void actionPerformed(ActionEvent actEvt) {
         JFileChooser jfc = new JFileChooser("img003.jpg");
         int jfcResult = jfc.showOpenDialog(ImageViewer2.this);
         if (jfcResult == JFileChooser.APPROVE_OPTION) {
            File file = jfc.getSelectedFile();
            try {
               BufferedImage bufImg = ImageIO.read(file);
               ImageIcon icon = new ImageIcon(bufImg);
               viewportView.setIcon(icon);
               Dimension vpSize = viewport.getSize();
               int vpX = (bufImg.getWidth() - vpSize.width) / 2;
               int vpY = (bufImg.getHeight() - vpSize.height) / 2;
               Point viewPos = new Point(vpX, vpY);
               viewport.setViewPosition(viewPos);
               viewLocOnScrn = viewportView.getLocationOnScreen();
            } catch (IOException e) {
               e.printStackTrace();
            }

         }

      }
   }

   private static void createAndShowGui() {
      ImageViewer2 mainPanel = new ImageViewer2();

      JFrame frame = new JFrame("Image Viewer 2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

欢迎评论和批评！

# c# - 是什么让 Entity Framework / Upshot 相信我的对象图“包含循环”？

> ID：10711637
> 
> 赞同：1
> 
> 时间：2012-05-22T23:46:47.697
> 
> 标签：c#, asp.net, entity-framework-4, knockout.js, upshot

我正在使用 Entity Framework 4.3（代码优先）测试 Knockout 2.1.0 和 Upshot 1.0.0.2，并遇到以下错误：

> {“类型 'System.Collections.Generic.HashSet`1[[KnockoutTest.Models.Person, KnockoutTest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 的对象图包含循环，如果引用则无法序列化跟踪已禁用。"}

我正在使用一个相当典型的模型来测试一些基本的父子实体。

```
public class Client
{
    public Client()
    {
        Projects = new HashSet<Project>();
        Persons = new HashSet<Person>();
    }

    [Key]
    public int ClientId { get; set; }

    [Required]
    [Display(Name = "Client Name", Description = "Client's name")]
    [StringLength(30)]
    public string Name { get; set; }

    public ICollection<Project> Projects { get; set; }
    public ICollection<Person> Persons { get; set; }

}

public class Project
{
    public Project()
    {

    }

    [Key]
    public int ProjectId { get; set; }

    [StringLength(40)]
    public string Name { get; set; }

    public int? ClientId { get; set; }
    public virtual Client Client { get; set; }
}

public class Person
{
    public Person()
    {
        PhoneNumbers=new HashSet<PhoneNumber>();    
    }

    [Key]
    public int PersonId { get; set; }

    [Required]
    [Display(Name="First Name", Description = "Person's first name")]
    [StringLength(15)]
    public string FirstName { get; set; }

    [Required]
    [Display(Name = "First Name", Description = "Person's last name")]
    [StringLength(15)]
    public string LastName { get; set; }

    [ForeignKey("HomeAddress")]
    public int? HomeAddressId { get; set; }
    public Address HomeAddress { get; set; }

    [ForeignKey("OfficeAddress")]
    public int? OfficeAddressId { get; set; }
    public Address OfficeAddress { get; set; }

    public ICollection<PhoneNumber> PhoneNumbers { get; set; }

    public int? ClientId { get; set; }
    public virtual Client Client { get; set; }
}

public class Address
{
    [Key]
    public int AddressId { get; set; }

    [Required]
    [StringLength(60)]
    public string StreetAddress { get; set; }

    [Required]
    [DefaultValue("Laurel")]
    [StringLength(20)]
    public string City { get; set; }

    [Required]
    [DefaultValue("MS")]
    [StringLength(2)]
    public string State { get; set; }

    [Required]
    [StringLength(10)]
    public string ZipCode { get; set; }
}

public class PhoneNumber
{
    public PhoneNumber()
    {

    }

    [Key]
    public int PhoneNumberId { get; set; }

    [Required]
    [Display(Name = "Phone Number", Description = "Person's phone number")]
    public string Number { get; set; }

    [Required]
    [Display(Name = "Phone Type", Description = "Type of phone")]
    [DefaultValue("Office")]
    public string PhoneType { get; set; }

    public int? PersonId { get; set; }
    public virtual Person Person { get; set; }
} 
```

我的上下文非常笼统。

```
public class KnockoutContext : DbContext

{
    public DbSet<Client> Clients { get; set; }
    public DbSet<Project> Projects { get; set; }
    public DbSet<Person> Persons { get; set; }
    public DbSet<Address> Addresses { get; set; }
    public DbSet<PhoneNumber> PhoneNumbers { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
    }
} 
```

我也有一些样本数据——尽管它不应该是相关的。

```
 protected override void Seed(KnockoutContext context)
        {
            base.Seed(context);

            context.Clients.Add(new Client
                                    {
                                        Name = "Muffed Up Manufacturing",
                                        Persons = new List<Person> { 
                                            new Person {FirstName = "Jack", LastName = "Johnson",
                                                PhoneNumbers = new List<PhoneNumber>
                                                    {
                                                        new PhoneNumber {Number="702-481-0283", PhoneType = "Office"}, 
                                                        new PhoneNumber {Number = "605-513-0381", PhoneType = "Home"}
                                                    }
                                            },
                                            new Person { FirstName = "Mary", LastName = "Maples", 
                                                PhoneNumbers = new List<PhoneNumber>
                                                    {
                                                        new PhoneNumber {Number="319-208-8181", PhoneType = "Office"}, 
                                                        new PhoneNumber {Number = "357-550-9888", PhoneType = "Home"}
                                                    }
                                            },
                                            new Person { FirstName = "Danny", LastName = "Doodley", 
                                                PhoneNumbers = new List<PhoneNumber>
                                                    {
                                                        new PhoneNumber {Number="637-090-5556", PhoneType = "Office"}, 
                                                        new PhoneNumber {Number = "218-876-7656", PhoneType = "Home"}
                                                    }
                                            }
                                        },
                                        Projects = new List<Project>
                                                       {
                                                           new Project {Name ="Muffed Up Assessment Project"},
                                                           new Project {Name ="New Product Design"},
                                                           new Project {Name ="Razor Thin Margins"},
                                                           new Project {Name ="Menial Managerial Support"}
                                                       }

                                    }
                );

            context.Clients.Add(new Client
                                    {
                                        Name = "Dings and Scrapes Carwash",
                                        Persons = new List<Person> { new Person {FirstName = "Fred", LastName = "Friday"},
                                            new Person { FirstName = "Larry", LastName = "Lipstick" },
                                            new Person { FirstName = "Kira", LastName = "Kwikwit" }
                                        },
                                        Projects = new List<Project>
                                                       {
                                                           new Project {Name ="Wild and Crazy Wax Job"},
                                                           new Project {Name ="Pimp Ride Detailing"},
                                                           new Project {Name ="Saturday Night Special"},
                                                           new Project {Name ="Soapy Suds Extra"}
                                                       }
                                    }
                );

            IEnumerable<DbEntityValidationResult> p = context.GetValidationErrors();

            if (p != null)
            {
                foreach (DbEntityValidationResult item in p)
                {
                    Console.WriteLine(item.ValidationErrors);
                }
            }
        }

    } 
```

基本上，每当我尝试使用来自客户、人员、项目等的“包含”时，我都会收到与上面列出的错误类似的错误。

```
namespace KnockoutTest.Controllers
{

    public class ClientController : DbDataController<KnockoutTest.Models.KnockoutContext>
    {
        public IQueryable<Client> GetClients()
        {
            return DbContext.Clients.Include("Persons").OrderBy(o => o.Name);
        }
    }

    public class ProjectController : DbDataController<KnockoutTest.Models.KnockoutContext>
    {
        public IQueryable<Project> GetProjects()
        {
            return DbContext.Projects.OrderBy(o => o.Name);
        }
    }

    public class PersonController : DbDataController<KnockoutTest.Models.KnockoutContext>
    {
        public IQueryable<Person> GetPersons()
        {
            return DbContext.Persons.Include("Client").OrderBy(o => o.LastName);
        }
    }

    public class AddressController : DbDataController<KnockoutTest.Models.KnockoutContext>
    {
        public IQueryable<Address> GetAddresses()
        {
            return DbContext.Addresses.OrderBy(o => o.ZipCode);
        }
    }

    public class PhoneNumberController : DbDataController<KnockoutTest.Models.KnockoutContext>
    {
        public IQueryable<PhoneNumber> GetPhoneNumbers()
        {
            return DbContext.PhoneNumbers.OrderBy(o => o.Number);
        }
    }
} 
```

你能看出 .NET 应该抱怨这个模型的任何原因吗？

无论如何，我必须解决哪些选项？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T01:59:06.287

简短的回答是，Steve Sanderson 对 Knockout、Upshot 和 Entity Framework 4.x Code-First 构建单页应用程序的演示（虽然很棒！！！）可能有点误导。这些工具并没有像乍一看那样完美地结合在一起。[剧透：我确实相信有一个合理的解决方法，但它涉及稍微走出微软领域。]

（关于 Steve 精彩的单页应用程序 (SPA) 演示，请访问[http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159)。非常值得一看。）

在大多数 Web 应用程序中，我们在概念上需要以下列方式移动和操作数据：

> 数据源（通常是数据库）-> Web 应用程序-> 浏览器客户端

和

> 浏览器客户端 -> Web 应用程序 -> 数据源（通常是数据库）

在过去，操作数据以从数据库接收数据并将其传输到数据库是一场真正的噩梦。如果您必须在 .NET 1.0/1.1 天左右，您可能会想起一个开发过程，其中包括以下步骤：

*   手动定义数据模型
*   创建所有表、设置关系、手动定义索引和约束等。
*   创建和测试存储过程以访问数据 - 通常手动指定要包含在每个过程中的每个字段。
*   创建 POCO（普通旧 CLR 对象）来保存数据
*   打开与数据库的连接并迭代递归返回的每条记录并将其映射到 POCO 对象的代码。

这只是为了将数据输入系统。以另一种方式返回，我们必须以相反的顺序重复其中的几个步骤。关键是数据库编码非常耗时（而且真的很无聊）。显然，出现了数字代码生成和其他工具并简化了事情。

真正的突破在于 NHibernate、Entity Framework 4（代码优先方法）和其他类似的 ORM 工具，它们（几乎）完全从开发人员那里抽象出数据库。这些工具不仅提高了开发速度，而且还提高了整体代码质量，因为它们错误地引入错误的机会更少。

现在，在许多应用程序中，与数据库的连接和交互（几乎）是事后才想到的，因为大多数数据库细节都被隐藏起来了。

微软还为 Upshot.js 和 WebAPI 提供了这样的想法，即当这两个工具相互结合使用时，将会以 NHibernate 和 Entity Framework 4 所做的相同方式彻底改变服务器和浏览器之间的通信。服务器和数据库之间。

这确实是一项非常有价值的成就——尤其是当客户正在推动更具交互性的 Web 应用程序时。

阻止开发人员将更多用户界面移至（浏览器）客户端的主要障碍之一是所需的大量编码。其中一些步骤包括：

*   将数据传输到客户端（通常为 JSON 格式）
*   将 .NET 对象的所有属性映射到 JavaScript 对象
*   重新创建有关对象及其属性的所有元数据
*   将该数据绑定到客户端浏览器中的元素
*   监控变化
*   修改后重新映射数据（用于发送回服务器）
*   将数据传回服务器

这看起来真的很像“似曾相识”，因为它在复杂性上与将数据输入和输出数据库的遗留过程非常相似。

根据 Web 应用程序的配置方式，在数据返回服务器后将数据映射到实际的数据库对象可能会带来更多乐趣。（这种情况通常会发生。）

这种服务器->客户端->服务器的数据传输需要大量的编码，并为意想不到的挑战提供了许多机会不要忘记调试 JavaScript 是多么有趣！（好吧，现在它不像几年前那么痛苦了，但它仍然不像在 Visual Studio 中调试 C# 代码那样对开发人员友好。）

Steve Sanderson 关于单页应用程序的演讲提供了一个完全不同（并且更好）的解决方案。

这个想法是 WebAPI、Upshot.js 和 Knockout 将能够无缝地向浏览器客户端传递数据和从浏览器客户端接收数据，同时提供高度交互的用户体验。哇！这不是让你只想伸出手拥抱某人吗？

虽然这个想法并不新鲜，但它是我认为在 .NET 中真正做到这一点的首批认真努力之一。

一旦数据通过 WebAPI 传递并到达客户端（通过 Upshot），那么像 Knockout 这样的框架将能够使用数据并提供尖端 Web 应用程序所需的非常高水平的交互性。（虽然可能不是很清楚，但我所描述的应用程序主要不是通过加载“页面”来运行，而是主要通过 AJAX 请求传递 JSON 格式的数据。）

任何减少所有这些编码的工具显然都会很快被开发人员社区所接受。

Upshot.js（RIA/JS 的重命名和升级版本）应该负责上面列出的几个普通任务。它应该是 WebAPI 和 Knockout 之间的粘合剂。它旨在动态映射从 .NET 以 JSON 或 XML 格式传输的对象，并公开相关的元数据，例如对象属性、必填字段、字段长度、显示名称、描述等。（元数据是什么允许映射并且可以访问以用于验证。）

*注意：我仍然不确定如何访问结果元数据并将其绑定到一个验证框架，如 jQuery 验证或 Knockout 验证插件之一。这是我要测试的待办事项列表。*

*注意：我不确定这些类型的元数据中的哪一种受支持。这是我要测试的待办事项列表。作为旁注，我还计划在 System.ComponentModel.DataAnnotations 之外尝试使用元数据，以查看是否支持 NHibernate 属性以及自定义属性。*

因此，考虑到所有这些，我开始使用 Steve 在他的演示中使用的同一组技术，用于真实世界的 Web 应用程序。其中包括：

*   Entity Framework 4.3 使用 Code-First 方法
*   带有 WebAPI 的 ASP.NET MVC4
*   Upshot.js
*   淘汰赛.js

期望所有这些技术能够很好地协同工作，因为 a) 它们是最新的 Microsoft 工具（开源 Knockout 除外），并且因为现任 Microsoft 的史蒂夫·桑德森 (Steve Sanderson) 在主要的 Microsoft 演示文稿中一起使用了它们来展示开发单页应用程序。

不幸的是，我在实践中发现 Entity Framework 4.x 和 Upshot.js 以非常不同的方式看待世界，并且它们的方向有些矛盾而不是互补。

如前所述，Entity Framework Code First 做得非常出色，它允许开发人员定义功能强大的对象模型，它几乎神奇地转换为功能数据库。

Entity Framework 4.x Code First 的一大特色是能够从父对象导航到子对象并从子对象导航回其父对象。这些双向关联是 EF 的基石。它们节省了大量时间并大大简化了开发。此外，微软一再吹捧此功能是使用实体框架的重要理由。

在 Scott Guthrie 的博客文章 ( [http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx) ) 中，他最初介绍并解释了 EF 4 Code First 方法，他用以下两个类演示了双向导航的概念：

```
public class Dinner
{
    public int DinnerID { get; set; }
    public string Title { get; set; }
    public DateTime EventDate { get; set; }
    public string Address { get; set; }
    public string HostedBy { get; set; }

    public virtual ICollection<RSVP> RSVPs { get; set; }
}

public class RSVP
{
    public int RsvpID { get; set; }
    public int DinnerID { get; set; }
    public string AttendeeEmail { get; set; }
    public virtual Dinner Dinner { get; set; }
} 
```

如您所见，Dinner 包含与 RSVP 的关联，并且 RSVP 包含与 Dinner 的关联。互联网上还有无数其他这样的例子，以多种形式出现。

因为这两种方式的关联是 Entity Framework 的核心功能，所以有理智的人可能会期望 Microsoft 会在库 (Upshot.js) 中支持此功能，它用于将数据从 .NET 服务器应用程序带到客户端。如果该功能不受支持，那么他们可能希望共享该功能，因为这将非常关键的架构决策，并且最不希望与任何设计合理的 EF 4 Code First 实现一起使用。

在我的测试代码（在上面的原始问题中列出）中，我自然假设支持正常的 EF Code-First 功能（如双向绑定/导航），因为这就是演示文稿所显示的内容。

但是，我立即开始收到令人讨厌的小运行时错误，例如：

> “类型 'System.Collections.Generic.HashSet`1[[KnockoutTest.Models.Person, KnockoutTest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 的对象图包含循环，如果引用跟踪则无法序列化被禁用。”

我尝试了许多不同的方法来尝试解决问题。根据我的想法和阅读，以下是我尝试的一些失败的解决方案。

*   从关系的一侧删除了关联。这不是一个好的解决方案，因为能够在父母和孩子之间的每个方向上导航非常方便。（这可能就是这些关联属性被称为导航属性的原因。）从任何一方删除关系都会产生副作用。当关系从父级中删除时，导航子级列表的能力也被删除。当关系从孩子身上删除时，.NET 给我提供了另一个友好的错误。

> “无法检索关联‘KnockoutTest.Models.Client_Persons’的关联信息。仅支持包含外键信息的模型。有关创建包含外键信息的模型的详细信息，请参阅实体框架文档。”

*   以防问题是系统对存在外键感到困惑的结果，我在子实体上明确指定了 [ForeignKey] 属性。一切都可以编译，但 .NET 返回“类型的对象图......包含循环并且无法序列化......”

*   我的一些阅读表明，在 WCF 中添加类似 [DataContract(IsReference = true)] 的属性可能会使 .NET 不会对循环引用感到困惑。就在那时，我得到了这种美丽。

> “'KnockoutTest.Models.Person' 类型无法序列化为 JSON，因为它的 IsReference 设置为 'True'。JSON 格式不支持引用，因为没有用于表示引用的标准化格式。要启用序列化，请禁用 IsReference 设置类型或该类型的适当父类。”

这个错误非常重要，因为它基本上告诉我们，我们不能在正常配置中同时使用 Upshot 和 Entity Framework Code-First。为什么？实体框架旨在利用双向绑定。然而，当实现双向绑定时，Upshot 说它不能处理循环引用。在管理循环引用时，Upshot 基本上说它无法处理父对象和子对象之间的引用，因为 JSON 不支持它。

当我观看史蒂夫的演示时，我记得他确实在客户和交付之间建立了关系。我决定回去仔细看看他的对象模型。

```
public class Customer
{
    public int CustomerId { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
}

public class Delivery
{
    // Primary key, and one-to-many relation with Customer
    public int DeliveryId { get; set; }
    public virtual int CustomerId { get; set; }
    public virtual Customer Customer { get; set; }

    // Properties for this delivery
    public string Description { get; set; }
    public bool IsDelivered { get; set; } // <-- This is what we're mainly interested in 
```

我们发现，在史蒂夫的演示中，他的关系只有一种方式，它将孩子与父母联系起来，而不是将父母与孩子联系起来。

在这个演示中，它有点工作。然而，在许多实际应用中，这种方法使数据访问变得不切实际。以我在原始问题中包含的演示场景为例。我们有：

```
Clients
    Projects
    Persons
        Addresses
        PhoneNumbers 
```

我认为大多数开发人员都不想从地址或电话号码开始查询。他们希望能够选择客户或项目或人员列表，然后导航到其后代列表。

我不是 100% 确定不可能使用启用了双向绑定的实体，但我不知道有任何配置可能仅使用 Microsoft 工具就可以成功。

幸运的是，我确实认为有一个解决方案（它可以解决循环依赖问题），我计划在接下来的几天内对其进行测试。该解决方案是... **JSON.Net**。

JSON.Net 支持循环依赖并维护对子对象的引用。如果它按预期工作，它将解决我在测试中遇到的两个错误。

*一旦我测试过，我会在这里报告结果。*

我认为史蒂夫的演示很棒，我喜欢他的演示。我相信淘汰赛是惊人的。我非常感谢微软的发展方向。如果该工具有值得注意的限制，我认为微软可能应该更愿意接受它们。

我并不是要过分批评微软（而且绝对不是批评史蒂夫），因为我认为他们做得很好。我喜欢最终的承诺，并期待看到它的发展方向。

我真的很想看到有人接受并重构它（和 WebAPI），以便它可以在不使用第三方工具的情况下与 Entity Framework 完全集成。

我不知道 NHibernate 是否存在类似的工具，但我什至希望看到有人扩展结果以与 NHibernate 集成（或为 NHibernate 开发类似的库）。通过扩展，我主要是在谈论使用 NHibernate 的元数据。

*当我测试 JSON.Net 时，我也计划测试 NHibernate。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:40:03.397

如果您在关系的两侧公开导航属性，您将获得一个循环。例如`Client`，实例包含相关`Project`实例的集合，并且这些`Project`实例包含返回其主体`Client`实例 = 循环的导航属性。

解决方法是仅在关系的一侧使用导航属性，使用可以解决开箱即用的循环的序列化，或者从序列化中排除一侧的导航属性（尝试用 标记它`IgnoreDataMemberAttribute`）。

# html - 如何动态调整电子邮件客户端中的图像大小？

> ID：10711638
> 
> 赞同：2
> 
> 时间：2012-05-22T23:47:12.953
> 
> 标签：html, image, email, email-client

*有没有办法在没有*javascript 和有限的 CSS 的情况下调整图像大小以适应正在查看图像的窗口？

我问是因为我发送了一个电子邮件活动，其中包含一个我想要尽可能大*而不*滚动的主要图像。我已经阅读了使用 javascript 和 jQuery 执行此操作的方法，但我没有看到大多数电子邮件客户端会阅读并正确响应的方法。这可能吗？如果是这样 - 如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-31T13:18:46.023

这是为 html 电子邮件执行此操作的正确方法：

```
<img alt="" src="" width="100%" style="margin: 0; border: 0; padding: 0; display: block;"> 
```

它将自动调整大小以匹配容器元素的宽度（应始终为 a `<td>`）。

请注意，在某些客户端（尤其是 Outlook '07、'10 和 '13）上，图像不会超过其最大尺寸。如果您使用的是最大宽度流体模板，只要您的图像宽度与最大宽度匹配，这将不是问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T01:14:10.557

这就是你应该能够做到的方式

* * *

```
 /****this is the Css****/
    .full {
     width:100%;
     height:auto;
     }
    /***end Css***/
   <!--Now the html--!>
   <section>
   <img src="image/main.png" class="full">
   </section> 
```

或者您可以采用简单的方式 *update

## 你可以这样做

```
 <img src="image/main.png" style="width:100%; height:auto; border:none;" /> 
```

并且如果他们可以选择将其作为 html 来执行它，因为它应该像那样正确呈现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-10T16:07:41.147

您需要尽可能地过时，以使 HTML 电子邮件适用于所有客户端。

内联样式和 HTML 4 代码应该可以解决问题。但请注意 - 最大宽度和最大高度适用于大多数客户端，但这不包括 Outlook 2007/2010/2013/365，它很可能超过一半的目标受众。宽度适用于所有客户端 - 但不适用于 Outlook 2007/2010/2013/365 中的 div 和 p 标签！始终使用表格而不是 div 来确定它会起作用。

基本上，总是假设某些东西不会起作用并设计尽可能小的错误余量 - 并且总是使用内联样式，否则它很可能会被剥离。

如果有疑问，请咨询神谕，我总是这样做:)

来源：[https ://www.campaignmonitor.com/css/b/](https://www.campaignmonitor.com/css/b/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T17:23:33.980

**如何在 GMAIL 中调整图像大小**

首先，这是我们将使用的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Image Resizer</title>
</head>
<body>
    <!-- Point to your image by placing the path in the source (src) attribute. -->
    <img src="http://yourImagePathHere.jpg" style="width:100%; background-repeat:no-repeat; background-size:100%;" />
</body>
</html> 
```

注意：注意读取“ [http://yourImagePathHere.jpg](http://yourImagePathHere.jpg) ”的部分。这是指向您要在 GMail 中调整大小的图像的路径。将您的图片的 URL 放在这里。为了在浏览器中运行此代码，您需要将其保存为 HTML 文档。您可以通过将上面的代码复制并粘贴到代码编辑器或文本编辑器（例如 PC 上的记事本或 MAC 上的 TextEdit）并使用扩展名“.html”保存它来完成此操作。

如果您在 MAC 上使用 TextEdit，则需要在粘贴代码之前切换到纯文本编辑。为此，请从“格式”菜单中选择“制作纯文本”。

对于此示例，我们假设您的文件名为“<strong>image_resizer.html”。如果需要更改图像，则需要使用代码或文本编辑器编辑 HTML 文档。为此，请右键单击 HTML 文档并选择“打开方式”并选择代码编辑器或文本编辑器。然后，换出图像源路径（在上面的示例中加粗），将其替换为指向更新图像的路径。然后保存，您的 HTML 文件应该准备就绪并更新以指向新图像。

如果您在 MAC 上使用 TextEdit，则需要启动一个新文档，切换到纯文本编辑，再次粘贴代码，然后更改图像的路径。

第 1 步：在浏览器中打开**image_resizer.html 。**为此，请双击它或右键单击它并从“打开方式”菜单中选择一个浏览器。

第 2 步：单击网页上的任意位置。您可以单击图像本身或网页上的空白区域。这里的想法是确保我们将指针的焦点放在窗口上，以验证页面是否已准备好被选中。

第 3 步：全选。通过在 PC 上使用“Ctrl + A”……或……在 MAC 上使用“Command + A”来执行此操作。页面内容将突出显示。

第四步：复制。通过在 PC 上使用“Ctrl + C”……或……在 MAC 上使用“Command + C”来执行此操作。页面内容将被复制到剪贴板。（这只是意味着计算机会记住它）。

第 5 步：现在内容已复制到剪贴板（由计算机存储），打开您的 Gmail 并单击撰写按钮。将光标放在内容区域（单击您键入消息的区域）。

第6步：粘贴。通过在 PC 上使用“Ctrl + V”……或……在 MAC 上使用“Command + V”来执行此操作。

步骤 7。 完成键入您的电子邮件并发送。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-21T16:49:35.260

我正在处理没有任何容器的非常大的图像。我通过使用来修复它`max-width`以确保图像不会太大。

```
 <img
        src=""
        width="100%"
        style="max-width: 80vw; margin: 0; border: 0; padding: 0; display: block;"
    /> 
```

同时使用 width 和 max-width 确保图像将占用全部可用空间，但不会太多。我使用`80vw`而不是`100`因为人们很少以全屏模式阅读您的电子邮件，通常更经常使用查看器（Gmail），这通常会占用一些可用空间。

# javascript - 每次单击按钮时如何创建新对象并将旧对象存储在数组中？面向对象的 JavaScript

> ID：10711648
> 
> 赞同：0
> 
> 时间：2012-05-22T23:48:33.687
> 
> 标签：javascript

如何每次单击“创建新多边形”按钮时，将最后一个对象存储在数组中并创建一个新的干净对象以在地图上绘制新的分离折线。我想保留旧折线的功能。现在无法清洁物体。简化示例如下所示。

HTML：

```
<button onclick="create()">Create New Poly</button>
<div id="map" style="width: 500px; height: 400px;"></div> 
```

JS：

```
var map;
var listener;

var polys = [],
    poly = {};

create = function() {
    poly = new Poly();

    if ( !! listener) google.maps.event.removeListener(listener);
    listener = google.maps.event.addListener(map, 'click', function(e) {
        poly.addPoint(e.latLng);
    });
}

function Poly() {
    this.markers = [];
    this.setMap(map);
    polys.push(this);
}
Poly.prototype = new google.maps.Polyline();

Poly.prototype.addPoint = function(p) {
    var m = poly.createMarker(p);
    poly.markers.push(m);
    poly.getPath().push(p);
}

Poly.prototype.createMarker = function(p) {
    var marker = new google.maps.Marker({
        position: p
    });
    marker.setMap(this.getMap());
    return marker;
}

$(function() {
    map = new google.maps.Map(document.getElementById('map'), {
        center: new google.maps.LatLng(48.864715, 10.546875),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
}); 
```

演示：[JSFIDDLE](http://jsfiddle.net/3Hzsg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:21:40.067

即使按照 Ben Davis 的建议[http://jsfiddle.net/LxGmR/](http://jsfiddle.net/LxGmR/)，它仍然存在问题。

我认为这是由于所有 Ploy 对象共享相同的原型：`Poly.prototype = new google.maps.Polyline();`. 我认为解决方法是每个新`Ploy`对象都需要自己的原型`google.maps.Polyline`实例。

经过测试，我发现这是真的：http: [//jsfiddle.net/uhZFE/](http://jsfiddle.net/uhZFE/)

然后我查找了如何在没有包装函数的情况下执行此操作，我使用了 SO 答案[https://stackoverflow.com/a/6519265/388787](https://stackoverflow.com/a/6519265/388787)中描述的方法（[http://javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)是也很有帮助）并制作了[http://jsfiddle.net/YgSwF/](http://jsfiddle.net/YgSwF/)，如下所示；它按您的要求工作：

```
var map;
var listener;

var polys = [];

create = function () {
  var poly = new Poly();

  if ( !! listener) google.maps.event.removeListener(listener);
  listener = google.maps.event.addListener(map, 'click', function (e) {
    poly.addPoint(e.latLng);
  });
  polys.push(poly);
}

function Poly() {
  google.maps.Polyline.call(this);
  this.markers = [];
  this.setMap(map);
}
Poly.prototype = Object.create(google.maps.Polyline.prototype);

Poly.prototype.addPoint = function (p) {
  var m = this.createMarker(p);
  this.markers.push(m);
  this.getPath().push(p);
}

Poly.prototype.createMarker = function (p) {
  var marker = new google.maps.Marker({
    position: p
  });
  marker.setMap(this.getMap());
  return marker;
}

$(function () {
  map = new google.maps.Map(document.getElementById('map'), {
    center: new google.maps.LatLng(48.864715, 10.546875),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:03:17.087

我相信您的问题与变量范围有关。您应该在 create() 函数中声明 poly。另外，我认为在 create() 函数中将创建的对象推送到数组中以遵守关注点分离会更有意义。

此外，在您的 addPoint() 函数中，当您应该使用“this”时，您指的是全局 poly 变量。

更新代码：

```
var map;
var listener;

var polys = [];

create = function() {
    var poly = new Poly();

    if ( !! listener) google.maps.event.removeListener(listener);
    listener = google.maps.event.addListener(map, 'click', function(e) {
        poly.addPoint(e.latLng);
    });
    polys.push(poly);
}

function Poly() {
    this.markers = [];
    this.setMap(map);
}
Poly.prototype = new google.maps.Polyline();

Poly.prototype.addPoint = function(p) {
    var m = this.createMarker(p);
    this.markers.push(m);
    this.getPath().push(p);
}

Poly.prototype.createMarker = function(p) {
    var marker = new google.maps.Marker({
        position: p
    });
    marker.setMap(this.getMap());
    return marker;
}

$(function() {
    map = new google.maps.Map(document.getElementById('map'), {
        center: new google.maps.LatLng(48.864715, 10.546875),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
});​ 
```

# c++ - 使用类参数编译错误

> ID：10711653
> 
> 赞同：0
> 
> 时间：2012-05-22T23:49:20.097
> 
> 标签：c++, g++

为什么我`l->set(new StateB);`进不去`StateA`？（此行在下面注释）

它说：

```
main.cpp: In member function ‘virtual void StateA::writeName(Lap*, char*)’:
main.cpp:19:4: error: invalid use of incomplete type ‘struct Lap’
main.cpp:3:7: error: forward declaration of ‘struct Lap’ 
```

但我无法解决:(

```
#include <stdio.h>

class Lap;
class State;
class StateB;
class StateA;

class State { public:
    virtual void writeName(Lap *l, char *str) = 0;
};
class StateB : public State { public:
    void writeName(Lap *l, char *str) {
        printf("%s B\n", str);
    }
};
class StateA : public State { public:
    void writeName(Lap *l, char *str) {
        printf("%s A\n", str);
        //l->set(new StateB);
    }
};
class Lap { public:
    State *ss;
    Lap(){
        printf("[Lap]\n");
        set(new StateA);
    }

    void set(State *s){
        ss = s;
    }

    void writeName(char *str){
        ss->writeName(this, str);
    }
};

int main()
{
    printf("\n\n");

    Lap lap;
    lap.writeName((char*)"Fulano");
    lap.writeName((char*)"Fulano");

    printf("\n\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:02:31.723

问题是前向声明

```
class Lap; 
```

仅告诉编译器存在这样的类并允许您声明指向 的指针`Lap`，但它没有为编译器提供足够的信息来处理任何`Lap`方法调用。

因此，您需要在尝试使用其方法之前进行`Lap` **完全声明。**

使用给定的代码，这不能在单个文件中完成，因为`Lap`while`new StateA`调用`StateA`了一个方法`Lap`- 循环依赖。

您需要将至少一个（最好是全部）的**声明移到头文件中，并在需要的地方包含头文件。**然后编译器将在任何一个类的**定义**尝试使用另一个类中的方法之前知道类的完整接口细节。

# asp.net - 在 ASP.NET 中的特定页面上显示 PDF 文档

> ID：10711655
> 
> 赞同：0
> 
> 时间：2012-05-22T23:49:37.203
> 
> 标签：asp.net, pdf

我正在使用以下 ASP.NET 代码打开 PDF 文档，

```
Response.BufferOutput = true;
Response.Clear();
Response.ContentType = "application/pdf";

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(documentURL);

using (HttpWebResponse responseDDRINT = (HttpWebResponse)request.GetResponse())
{
    using (Stream stream = responseDDRINT.GetResponseStream())
    {
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];
        int bytesRead;

        while ((bytesRead = stream.Read(buffer, 0, bufferSize)) > 0)
        {
            Response.OutputStream.Write(buffer, 0, bytesRead);
        }

        Response.Flush();                        
    }
} 
```

我的问题是有人知道如何从特定页面开始呈现 PDF。例如，如果 PDF 文档有 15 页，我们希望它以最初显示的第 10 页打开，而不是在第 1 页打开。

我通过添加此标头尝试了“#page =”打开参数，但它什么也没做。

```
Response.AddHeader("content-disposition", "inline; filename=test.pdf#page=3"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:19:54.780

1.  当前版本的 Adob​​e 就绪不再支持页面语法，但它们支持书签语法。
2.  为什么不通过常规链接或 HTTPHandler 使您的文档可访问？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:24:52.287

您可以使用[ItextSharp 之](http://sourceforge.net/projects/itextsharp/)类的 PDF 操作库来完成您的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T23:52:09.457

您必须即时操作 PDF 文件。[使用http://pdfsharp.com/PDFsharp/](http://pdfsharp.com/PDFsharp/)
之 类的东西从某个页面开始流出文件的副本。

# php - phpMyAdmin sql 面板正在将字符串插入为列

> ID：10711656
> 
> 赞同：0
> 
> 时间：2012-05-22T23:49:42.937
> 
> 标签：php, sql, phpmyadmin, syntax-error

我正在尝试在 youtube 上关注 The New Boston 的 mysql 教程。但是，我有一个问题，phpmyadmin 中的 sql 面板将引号中的文本解释为列。在我的phpMyadmin版本中，（服务器版本：5.1.55，协议版本：10，MySQL客户端版本：5.1.55）我没有看到关闭它的方法。请查看此链接中的图片[http://leobee.com/android/push/phpmyadminerrors.html](http://www.leobee.com/android/push/phpmyadminerrors.html)

在 phpMyAdmin 列中可以有引号或在 sql 查询中不带引号：参见图 1 和图 2

城市名称的错误 1054 未知列（这是一个字符串）：
参见图 3

转义字符串时出现语法错误 1064 错误：参见图 4

当从城市的字符串周围删除引号时，我也会出错（这是正确的）。

错误日志说这是一个语法错误，但事实并非如此。如何让应用程序仅对字符串使用引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:02:55.240

PhpMyAdmin，像 MySQL 一样使用引号和反引号。两者不同，不应互换使用。

反引号用于列或表：

```
SELECT * FROM `customers`
-OR-
SELECT `city` FROM `customers` 
```

使用单引号会引发错误：

```
SELECT * FROM 'customers'
-OR-
SELECT 'city' FROM 'customers' 
```

单引号应该用于字符串。内部的任何附加引号都应正确转义：

```
SELECT * FROM `customers` WHERE `city`='Raleigh'
-OR-
SELECT city FROM customers WHERE city='Lee\'s Summit' 
```

不正确地转义引号会引发错误：

```
SELECT * FROM `customers` WHERE `city`=\'Raleigh\'
-OR-
SELECT city FROM customers WHERE city='Lee's Summit' 
```

希望有帮助！

# jquery - Jquery错过了18个字符值

> ID：10711657
> 
> 赞同：0
> 
> 时间：2012-05-22T23:49:50.350
> 
> 标签：jquery, numbers

我正在尝试使用简单的 jq 操作编写一个简单的管理界面来验证帖子。在我的数据库中，帖子 ID 存储为“204906887878148096”（18 个字符），当我回显它是正常的，但是当我将它发送到警报框或脚本时，它就像“204906887878148100”是什么原因导致的？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
<script>
function setOnay(id,durum)
{
alert(id);
page = "admin_ajax.php?id="+id+"&durum="+durum;
alert(page);
$.post(page, function(data){
alert("Data Loaded: " + data);
if (data.trim() == "1") {
     document.getElementById("durum"+id).innerHTML="<b>ONAYLANDI</b>";
} else if (data.trim() == "2") {
     document.getElementById("durum"+id).innerHTML="<b>SİLİNDİ</b>";
//} else if (data.trim() == "3") {
 //      document.getElementById("durum"+id).innerHTML="<b>Silindi</b>";
    } else {
    alert("Onay mekanizmasında hata oluştu. Lütfen tekrar deneyiniz!");
}   
 },text);

}
</script> 
```

html部分；

```
<td width="" align="center"><span id="<?php echo 'durum'.$tweet_id; ?>">
<a href="#"      onclick="setOnay(<? echo $tweet_id; ?>,1)"><img src="admin/check.png"/>
</a>  <a href="#" onclick="setOnay(<? echo $tweet_id; ?>,2)"><img src="admin/delete.png"/></a></span></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:54:48.550

javascript 中允许的最大整数是 +/- 9007199254740992

[ECMA 第 8.5 节](http://ecma262-5.com/ELS5_HTML.htm#Section_8.5)

您可以将其作为字符串传递，这将解决您的问题。

# java - 实施推荐算法

> ID：10711660
> 
> 赞同：2
> 
> 时间：2012-05-22T23:50:40.347
> 
> 标签：java, recommendation-engine, collaborative-filtering

好的，所以我想在 Java 中实现一个协作过滤算法，类似于 Netflix 或 StumbleUpon 的推荐算法，但是我不确定我是否应该在数据库上进行所有计算（Pearson 相关性、预测计算等），或者是否我应该加载所有必要的数据并在 Java 中执行算法。

我认为在 java 中这样做的主要缺点是我必须加载所有数据，相反我认为在数据库中这样做会导致非常复杂、容易出错的查询。

每种可能性还有哪些其他优点或缺点？

我正在实施的算法可以在[这里](http://www.waset.org/journals/waset/v75/v75-90.pdf)找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:16:00.490

虽然我还没有阅读算法的所有细节，但出于几个原因，我倾向于在代码中进行实际的算法实现。首先，您可能会利用经过良好测试的这些算法的现有实现（或至少部分实现）。正如您所提到的，将此逻辑添加到数据库中可能会很复杂并且更难测试。此外，如果您更改存储引擎或格式，代码可能会与数据库紧密耦合，从而难以重用。

如果你在java中做算法，你将不得不从数据库中读取数据，这可能会导致内存中的大量数据。您需要确保这不会成为限制因素 - 您是否需要一次读取所有数据（这意味着在某些时候 RAM 将成为限制），或者您可以分块数据并并行化操作？如果您可以并行化部分算法，那么用 Java（或您选择的任何语言）编写代码将更容易拆分数据（如果问题适合该框架，您甚至可以考虑使用 Map/Reduce 框架 - 再次在这里我没有通读算法细节）。

一般来说，我会尽量将业务逻辑排除在数据库之外。

# c++ - C++ 处理意外错误

> ID：10711662
> 
> 赞同：3
> 
> 时间：2012-05-22T23:50:51.313
> 
> 标签：c++, arrays, exception

我需要为一个研究项目学习 C++ 基础知识，并且我正在尝试错误/异常处理。我确实`throw`成功地使用了该命令来预测可能发生的事件（例如除以零），但我不知道如何捕获意外异常。以这个示例代码为例：

```
#include <iostream>
#include <exception>
#include <stdexcept>
using namespace std;

void arrayOutOfBound()
{
    int a[3] = {1, 2, 3};

    try
    {
        cout << "This should not display: " << a[5] << endl;
    }
    catch(runtime_error &e)
    /* catch(exception &e)     // also does not work  */
    {
        cout << "Error: " << e.what() << endl;
    }
}

int main()
{
    arrayOutOfBound();
} 
```

我想我必须在`throw`某处使用语句，但假设我真的不知道那`a[5]`行不通（或者用户输入了这个索引并且我没有检查数组大小），那么我怎样才能防止程序崩溃呢？（这发生在 Visual C++ Express 2010 调试器中）

注意：如果我`try { int result = a[5]; }`先在块外做，然后尝试`cout << result`在最后使用，程序不会编译。编译器试图帮助我，但因此我无法尝试异常处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T23:54:22.810

> 假设我真的不知道 a[5] 不起作用（或者用户输入了这个索引并且我没有检查数组大小），那么我怎样才能防止程序崩溃呢？

你根本做不到。对数组的越界访问会导致 C++ 中的未定义行为，它不会引发异常。当你足够幸运时，你会撞车。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T23:58:38.970

对不起，忍不住引用了一个明显的模因“本机数组......这不是你做的！” :D

您上面编写的代码使用本机数组，它本质上是一个内存位置。所以说 a[5] 你是说我想使用地址 (a + 4 * sizeof(int)) 处的 4 个字节来解释为一个 int。这不会抛出异常。这是未定义的行为，可能会返回垃圾。如果您使用 -O2 或类似的编译器标志，它可能会返回 0 和 btw，这是缓冲区溢出的 A 级来源：D

这是一个可以解决您的问题的模板类：

```
#include <iostream>
#include <exception>
#include <stdexcept>
#include <vector>
using namespace std;

template<class T, size_t COUNT>
class CheckedArray
{
public:
    class OutOfBounds : public std::exception
    {
        public:
            virtual const char* what() const throw(){ return "Index is out of bounds"; }    
    };
    CheckedArray(){}
    virtual ~CheckedArray(){}
    const T& operator[] (size_t index) const
    {
        if(index >= COUNT){ throw OutOfBounds(); }
        return m_array[index];
    }
    T& operator[] (size_t index)    
    {
        if(index >= COUNT){ throw OutOfBounds(); }
        return m_array[index];
    }
private:
    T m_array[COUNT];
};
void arrayOutOfBound()
{
    //int a[3] = {1, 2, 3};

    CheckedArray<int,3> a;
    a[0] = 1;
    a[1] = 2;
    a[2] = 3;
    try
    {
        cout << "This should not display: " << a[5] << endl;
    }
    catch(std::exception& e)     // this will kick in
    {
        cout << "Error: " << e.what() << endl;
    }
}

int main()
{
    arrayOutOfBound();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T23:57:56.967

如果您想要这种行为，建议您编写一个类，例如“CheckedArray”，它包装一个数组并执行边界检查。如果您完全笼统地这样做，它将是一个模板类，您当然需要了解重载 operator[]。

或者，如果您对动态分配数组的开销感到满意，请使用`std::vector`，特别是其`at`成员函数会在超出范围的索引上引发异常。作为附带的好处，您的数组现在可以在运行时（重新）调整大小。

更好的是，使用`std::array`它也有投掷`at`功能（但不可调整大小。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-15T07:12:18.660

如果您使用`std::array`, 而不是 C 样式数组和`.at()`成员函数，您可能会发现数组绑定错误

```
std::array <int, 5> stdArray = {1, 2, 3, 4, 5};

//array boundary check

 try  {
        cout << "trying to access out of bound element " << endl;
        cout << stdArray.at(5) << endl;
 } catch(std::exception &e) {
        cout << "Error: " << e.what() << endl;
  } 
```

现在程序没有崩溃，相反，你会看到这个输出 `Error: array::at: __n (which is 5) >= _Nm (which is 5)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T00:02:18.530

如果您只是想要一个处理分段错误等的处理程序，您应该查看 signal.h

//约翰

# html - Safari 和 IE 的文本阴影

> ID：10711663
> 
> 赞同：2
> 
> 时间：2012-05-22T23:50:52.300
> 
> 标签：html, css

> **可能重复：**
> [相当于 IE 中的 text-shadow](https://stackoverflow.com/questions/8195948/equivalent-to-text-shadow-in-ie)

我有这个在 Safari 中运行良好的文本阴影。但它不在IE中。如何为 Safari 和 IE 获得相同的阴影效果？

```
<a class="feast_info" title="title">feast</a>

.feast_info {
    cursor: pointer;
    color: green;
    text-shadow: 2px 2px 2px #303030;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:58:40.700

旧版本的 Internet Explorer 不实现这些 CSS 结构。你可以在你的 CSS 中使用它：

**互联网浏览器 8：**

```
#text_block_id {
   -ms-filter: "progid:DXImageTransform.Microsoft.DropShadow(OffX=3, OffY=3, Color=#99cc99)";
} 
```

**互联网浏览器 5.5-7：**

```
#text_block_id {
   filter: progid:DXImageTransform.Microsoft.DropShadow(OffX=3, OffY=3, Color=#99cc99);
} 
```

将这两行添加到您的 CSS 中，您将获得对 Internet Explorer 5.5 到 8 的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:03:58.610

`text-shadow`IE 不支持，但是这里有一些[关于](http://www.howtocreate.co.uk/textshadow.html)模拟效果的建议。不过，公平地说，[结果并不令人印象深刻](http://jsfiddle.net/ovfiddle/fRNkT/2/)。

我强烈建议坚持优雅降级的概念，并在不支持它们的浏览器上丢弃非关键影响。如果它是绝对必须的（即品牌识别）并且如果其应用范围允许（即必须只出现在一个地方），您可以将预渲染的内容作为 png 图像提供给 IE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:11:32.010

这将适用`text-shadow`于最常见的浏览器*（请参阅下面的测试列表）*：

**CSS**

```
text-shadow: 1px 1px 2px #444444;
filter: dropshadow(color=#444444, offx=1, offy=1);
filter: shadow(color=#444444,direction=135,strength=2);
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(color=#444444,direction=135,strength=2)"; 
```

**测试：**

*   谷歌浏览器 19.0.1084.46 m
*   火狐 3.6.16
*   火狐12.0
*   歌剧 11.64
*   互联网浏览器 8.0.6001.18702
*   Internet Explorer 9.0.8112.16421IC

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-23T00:00:01.110

对于野生动物园尝试把这个

```
-webkit-text-shadow: 2px 2px 2px #303030; 
```

# git - 如何制作`git log --stat -- ` 在选定的提交中显示 *all* 文件？

> ID：10711664
> 
> 赞同：8
> 
> 时间：2012-05-22T23:51:00.613
> 
> 标签：git

当我使用`<path>`参数 with`git log --stat`将日志限制为提交修改`<path>`时，git`<path>`在显示所选提交时将列为唯一修改的文件。相反，我希望查看为每个选定提交列出的*所有修改路径。*

例如：

```
$ echo test > a.txt
$ echo test > b.txt
$ git add a.txt b.txt
$ git commit -m test
 [...]
 2 files changed, 2 insertions(+), 0 deletions(-)
 [...]
$ git log -n1 --stat
 [...]

 a.txt |    1 +
 b.txt |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)
$ git log -n1 --stat -- a.txt
 [...]

 a.txt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-) 
```

请注意`git log`，带有 path 参数的第二个`a.txt`表示“1 个文件已更改”，而实际上是“2 个文件已更改”。我希望 git 告诉我两者都`a.txt`发生了`b.txt`变化，即使我根据路径选择了提交`a.txt`。

更新：@jacknagel 回答了我的问题，但事实证明他的解决方案在我的实际用例中不起作用。在我的实际用例中，我正在寻找所有修改文件的提交，包括重命名，以防两个相关项目出现分歧。我需要弄清楚一个项目中的哪些更改意味着另一个项目中的相应更改（我需要进行）。不幸的是，`git`当我尝试同时使用时`--full-diff`抱怨`--follow`。

所以，在我的真实情况下，我正在尝试运行：

```
git log --stat --follow -- a.txt 
```

在这种情况下有效的解决方案是：

```
git log --format='%H' --follow -- a.txt | xargs git show --stat -C 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T05:29:01.907

`--full-diff`您可以使用以下选项获得此行为：

```
 --full-diff
       Without this flag, "git log -p <path>..." shows commits that touch
       the specified paths, and diffs about the same specified paths. With
       this, the full diff is shown for commits that touch the specified
       paths; this means that "<path>..." limits only commits, and doesn't
       limit diff for those commits.

       Note that this affects all diff-based output types, e.g. those
       produced by --stat etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T18:29:44.023

首先找到提交 id，然后将它们通过管道传输到`xargs`（或 gnu `parallel`）以将每个 id 提供给`git show`.

```
git log --format='%H' --follow -- a.txt | xargs git show --stat -C 
```

在带有 powershell 的 Windows 上，这样的东西应该可以工作（但我还没有测试过..）：

```
git log --format='%H' --follow -- a.txt | ForEach-Object { git show --stat -C $_ } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T05:25:42.593

您如何期望命令以不同于预期的方式运行？当您提供文件名时，您是在告诉 git 单独获取该文件的详细信息。如果您希望它显示两个文件，请使用命令

```
git log -n1 --stat . 
```

或者

```
git log -n1 --stat a.txt b.txt 
```

# entity-framework - 如果 ValidationErrors 不断上升，如何使用 DbContext 更新分离的实体？

> ID：10711666
> 
> 赞同：0
> 
> 时间：2012-05-22T23:51:14.480
> 
> 标签：entity-framework

得到这个工作：

```
public partial class User
{
public long ID;
public long Active;
[Required]
public string Name;
}

void ObjectContextDeactivateUser(User entity)
{
   /* entity instance has set ID = 3, other props are null */
   /* context is ObjectContext */
   context.Users.Attach(entity);
   entity.Active = 0;
   context.ApplyCurrentValues("Users", entity);
   context.SaveChanges();
} 
```

有没有办法使用**DbContext**更新该行 Active 列？无论我尝试什么方式，我都会得到 ValidationError 需要 Name 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:32:36.250

您必须关闭全局验证才能使这项工作：

```
void ObjectContextDeactivateUser(User entity)
{
   context.Configuration.ValidateOnSaveEnabled = false;
   context.Users.Attach(entity);
   entity.Active = 0;
   context.SaveChanges();
} 
```

全局验证不支持验证部分更改。

# asp.net - Page.RouteData 返回 WebResource.axd？

> ID：10711674
> 
> 赞同：2
> 
> 时间：2012-05-22T23:52:46.197
> 
> 标签：asp.net, vb.net, session, variables, webresource.axd

我的 Global.asax 中有一条规则，如下所示：

```
RouteTable.Routes.MapPageRoute("defaultRoute", "{*value}", "~/default.aspx") 
```

本质上，任何实际不存在的页面都会被重定向到 default.aspx。当该页面加载时，我在 Page_Load 子中使用以下内容，如下所示：

```
Dim prospect_url As String = Page.RouteData.Values("value") 
```

然后我将其转换为会话变量，如下所示：

```
Session("prospect_url") = prospect_url 
```

最终，个人被重定向到另一个页面......我需要再次访问这个值，但是当我执行以下操作时：

```
Dim prospect_url As String = CStr(Session("prospect_url")) 
```

我得到 WebResource.axd 作为前景 URL 的值。什么？！？那个是从哪里来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:17:07.323

试试下面的代码：

```
 protected void Application_Start(object sender, EventArgs e)
 {
     RegisterRoutes(RouteTable.Routes);

     ...
 }

 private static void RegisterRoutes(RouteCollection routes)
 {
    routes.Add(new Route("{resource}.axd/{*pathInfo}", new StopRoutingHandler()));

    ...
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:01:48.343

该全局规则适用于所请求的**任何**资源，包括图像文件、脚本文件和任何其他资源（例如您看到的**WebResource.axd ）。**
所以这里发生的事情是你的路由表规则导致它把每个请求保存到你的会话变量中，每次都覆盖最后一个值，当你自己查看会话变量时，它被留在了**WebResource.axd**（它可以在不同的实例上是别的东西）。

我在我的博客上有一种解决方案：
[http](http://beemerguy.net/blog/post/How-to-support-dynamic-URLs-in-ASPNET-(by-example).aspx)
://beemerguy.net/blog/post/How-to-support-dynamic-URLs-in-ASPNET-(by-example).aspx 但它在 C# 中，并且翻译成 VB.NET 应该很简单。

但本质上，您应该在同一请求中处理潜在客户 url 值，而不是依赖会话变量，因为其他同时请求可能会在您到达之前覆盖该值。

# r - 关于在 R 中使用 GAM 模型

> ID：10711683
> 
> 赞同：2
> 
> 时间：2012-05-22T23:53:46.487
> 
> 标签：r, statistics, addition, linear-regression, gam

目前，我正在使用 GAM 模型复制 Wood（2006 年）关于芝加哥空气污染与死亡率之间关系的练习。

因此，我遵循了他在书中使用的代码。该库称为“gamair”，数据框为“chicago”。

我把这个（就像这本书一样）：

```
gam(death~s(time,bs="cr",k=200)+pm10median+so2median+o3median+tmpd,data=chicago,family=poisson) 
```

但我得到一个错误：

```
Error in s(time, bs = "cr", k = 200) : 
  unused argument(s) (bs = "cr", k = 200) 
```

有人可以解释一下吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T00:13:41.337

您是否也加载了`mgcv`包裹`gamair`？

```
library(gamair)
library(mgcv)
data(chicago)
gam(death~s(time,bs="cr",k=200)+pm10median+so2median+o3median+tmpd,data=chicago,family=poisson) 
```

对我来说很好。

如果我将包`gam`不`mgcv`用于功能，我可以重现您的错误`gam`。

# linux - Git 分支默认组权限设置为用户而不是组

> ID：10711689
> 
> 赞同：0
> 
> 时间：2012-05-22T23:54:45.367
> 
> 标签：linux, git, permissions

我正在为我的公司开发团队设置 GIT 存储库，我似乎遇到了一个有趣的问题。

经常会出现多人必须在同一个分支上工作的情况，因此当创建一个分支并将其推送到暂存时，其他开发人员会将分支拉入他们的本地存储库并开始处理代码。然而，我们暂存服务器上的 .git/logs/refs/heads 中的分支具有为用户和组设置的权限，该权限设置为将分支推送到我们的暂存环境的用户。

有没有办法改变 GIT 中的这种默认行为？我们有一个用户组设置，当我们手动更改分支上的组权限时，我们可以推送，但我宁愿没有一个 cron 作业一直在运行更改权限。

在此处的图像中，您可以看到两个已手动更改权限的存储库，以及一个刚刚被推送的存储库。

![GIT 牧场和权限列表](../Images/efa1720c6d726f151bab854d1136692d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:20:27.930

这是由创建新文件的进程的凭据引起的，无论它们是在 git 存储库中还是在工作副本中。如果通过 SSH 推送，则可能的凭据可能从 SSH 会话中获取，如果通过自定义 git 协议推送，则可能由 git 服务器进程获取，等等。

除非您是 root，否则您无法更改文件的所有者。[但是您可以通过在目录上使用 SGID 位](http://www.library.yale.edu/wsg/docs/permissions/sgid.htm)来强制执行新创建的文件组。

# ruby-on-rails - Rails 中用于电子邮件模板的三元语句的问题：使用列表但不想要空白列表

> ID：10711692
> 
> 赞同：0
> 
> 时间：2012-05-22T23:54:59.363
> 
> 标签：ruby-on-rails, e-commerce, ternary-operator, conditional-statements

所以这与订单有关。如果用户确实输入了数据（在本例中为公司、电话号码、地址）……那么它会将其放入电子邮件模板中并以列表格式显示。如果不是，则什么都不会显示，但我们也不希望列表项目符号为空白！

三元甚至是最好的方法吗？

发誓我上周想通了，但画了一个空白。

```
%h3{ :style => "font-size: 14px; color: #848687; font-weight: bold;" } Shipping Details
%ul
  %li{ :style => "font-size: 13px; color: #848687;" }= [@bulk_order.shipping_company].empty? ? "" : 
  %li{ :style => "font-size: 13px; color: #848687;" }= "Company: #{@bulk_order.shipping_company}"
  %li{ :style => "font-size: 13px; color: #848687;" }= "Phone: #{@bulk_order.shipping_phone}"
  %li{ :style => "font-size: 13px; color: #848687;" }= "Address: #{@bulk_order.shipping_address}, #{@bulk_order.shipping_city}, #{@bulk_order.shipping_state}, #{@bulk_order.shipping_zip}" 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:59:39.110

您的陈述不完整：
`[@bulk_order.shipping_company].empty? ? "" :`
应该类似于：
`[@bulk_order.shipping_company].empty? ? "" : @bulk_order.shipping_company`

# python - /upload/ 处的 UnicodeEncodeError

> ID：10711693
> 
> 赞同：0
> 
> 时间：2012-05-22T23:55:10.713
> 
> 标签：python, django

对于 django 文件上传，我在 /upload/ 处收到一个 UnicodeEncodeError，详细信息为“latin-1'编解码器无法在位置编码字符”。

我以为python默认编解码器是ASCII？它可以从哪里挑选 latin-1？我的 postgres 使用的是 utf8。

视图.py：

```
 kind = Kind()
        kind.style = style
        kind.kind_file.save(request.FILES['file'].name,request.FILES['file'])
        kind.save() 
```

模型.py：

```
def get_upload_path(instance,filename):
    return u"tmp/%s" % filename

class Kind (models.Model):
    style = models.ForeignKey(Style)
    kind_file = models.FileField(upload_to=get_upload_path) 
```

追溯：

```
Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/home/vagrant/django_projects/frogtype/frogtype/font/views.py" in upload_file
  56\.                 kind.kind_file.save(request.FILES['file'].name,request.FILES['file'])
File "/usr/local/lib/python2.6/dist-packages/django/db/models/fields/files.py" in save
  86\.         self.name = self.storage.save(name, content)
File "/usr/local/lib/python2.6/dist-packages/django/core/files/storage.py" in save
  44\.         name = self.get_available_name(name)
File "/usr/local/lib/python2.6/dist-packages/django/core/files/storage.py" in get_available_name
  70\.         while self.exists(name):
File "/usr/local/lib/python2.6/dist-packages/django/core/files/storage.py" in exists
  230\.         return os.path.exists(self.path(name))
File "/usr/lib/python2.6/genericpath.py" in exists
  18\.         st = os.stat(path)

Exception Type: UnicodeEncodeError at /upload/
Exception Value: 'latin-1' codec can't encode characters in position 87-88: ordinal not in range(256) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:22:37.243

也许 latin-1 自带浏览器？（检查 django 中的默认编码和 http 标头）

# r - 保留大数

> ID：10711695
> 
> 赞同：14
> 
> 时间：2012-05-22T23:55:19.003
> 
> 标签：r, csv, import, precision, numeric

我正在尝试读取第一列中包含条形码的 CSV 文件，但是当 R 将其放入 data.frame 时，它​​会转换`1665535004661`为`1.67E+12`.

有没有办法以整数格式保存这个数字？我尝试分配一个 类`"double"`，但是没有用，也没有分配一个 类`"character"`。一旦它处于`1.67E+12`格式中，任何将其转换回整数的尝试都会返回`167000000000`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-23T03:17:00.810

它不是“1.67E+12 格式”，只是不会完全使用默认值打印。R 读得很好，整数就在那里。

```
x <- 1665535004661
> x
[1] 1.665535e+12
> print(x, digits = 16)
[1] 1665535004661 
```

看，数字一直都在那里。除非您有大量的数字，否则它们不会丢失。对您输入的内容进行排序将正常工作，您只需使用数字选项显式调用 print() 即可查看您的 data.frame，而不是通过键入名称来隐式调用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-23T00:39:31.773

根据您在评论中所说的内容，您可以通过指定`colClasses`in直接将文本导入为字符`read.table()`。例如：

```
num <- "1665535004661"
dat.char <- read.table(text = num, colClasses="character")
str(dat.char)
#------
'data.frame':   1 obs. of  1 variable:
 $ V1: chr "1665535004661"
dat.char
#------
             V1
1 1665535004661 
```

或者（以及其他用途），您可以`digits`在`options()`. 默认值为 7 位，可接受的范围为 1-22。需要明确的是，设置此选项绝不会更改或更改基础数据，它仅控制打印时它在屏幕上的显示方式。从帮助页面`?options`：

```
controls the number of digits to print when printing numeric values. It is a suggestion only.
Valid values are 1...22 with default 7\. See the note in print.default about values greater than
15. 
```

说明这一点的示例：

```
options(digits = 7)
dat<- read.table(text = num)

dat
#------
            V1
1 1.665535e+12

options(digits = 22)
dat
#------
             V1
1 1665535004661 
```

要完全充实这一点并考虑不宜设置全局设置的情况，您可以直接将数字指定为`print(foo, digits = bar)`. 您可以在 下阅读更多相关信息`?print.default`。这就是约翰在他的回答中所描述的，因此应该归功于他阐明了这种细微差别。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-23T00:31:59.063

尝试使用 colClasses="character"

```
read.csv("file.csv", colClasses = "character") 
```

[http://stat.ethz.ch/R-manual/R-devel/library/utils/html/read.table.html](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/read.table.html)

看看这个链接。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-23T02:06:04.353

从 ?is.integer 页面：

“请注意，R 的当前实现使用 32 位整数作为整数向量，因此可表示整数的范围被限制在大约 +/-2*10^9？

> 1665535004661L > 2*10^9 [1] 真

你想要包 Rmpfr。

```
library(Rmpfr)
x <- mpfr(15, precBits= 1024) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-23T00:03:27.580

看看这个`int64`包：[Bringing 64-bit data to R](http://google-opensource.blogspot.com/2011/11/bringing-64-bit-data-to-r.html)。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-04T11:02:39.953

你可以在做的时候使用数字参数 `read.csv`。例如：

```
read.csv(x, sep = ";", numerals = c("no.loss")) Where x is your data. 
```

这保留了长整数的值，并且在您导入数据时不会弄乱它们的表示。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-23T02:42:04.947

由于您没有对该值执行算术运算，因此字符是合适的。您可以使用 colClasses 参数为每​​列设置各种类，这可能比使用所有字符更好。

数据.csv：

```
a,b,c
1001002003003004,2,3 
```

读取字符，然后读取整数：

```
x <- read.csv('test.csv',colClasses=c('character','integer','integer'))
x
                 a b c
1 1001002003003004 2 3

mode(x$a)
[1] "character"

mode(x$b)
[1] "numeric" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-05T14:41:26.750

我倾向于`options(scipen = 9999999999)`在每个脚本的开头使用。将数字输出到大量小数位而不是科学格式。您可以将“9”的数量更改为要显示的小数位数。有一种方法可以在全局选项中设置它，但我不是 100% 确定如何。

# ruby-on-rails - Rails - 从控制台访问序列化数据

> ID：10711696
> 
> 赞同：1
> 
> 时间：2012-05-22T23:55:27.130
> 
> 标签：ruby-on-rails, serialization, console

出于某种原因，每当我从控制台访问序列化属性时，它都会将其视为普通字符串。当不从控制台访问时（例如从视图中），序列化/反序列化工作正常。我的代码如下：

```
class Foo < ActiveRecord::Base
  belongs_to :user
  serialize :serialized_data    # column type is text
  ...
end 
```

例如，如果我要`app/views/users/show.html.erb`输入以下内容：

```
<%= @user.foo.serialized_data.first %> 
```

它会正确打印出数据集中的第一个。当我从控制台运行以下命令时：

```
> User.first.foo.serialized_data.first 
```

它会简单地打印出`-`，这是 YAML 文件的第一个字符。此外，`User.first.foo.serialized_data`将打印出一个大字符串，而不是最初保存的数组/散列。

更新：
如果我生成数据`:serialized_data`并尝试在同一个控制台会话中访问它，它似乎工作正常。一旦我关闭控制台然后重新输入它，就会出现问题。

编辑：
为澄清起见，`:serialized_data`是以下形式的哈希数组：

```
[{"stuff" => {"name" => name, "qty" => 1}}, {"stuff" => {"name" => name2, "qty" => 3}}] 
```

并且可以这样访问：

```
user.foo.serialized_data[0]["stuff"]["qty"]
=> 1 
```

编辑 2：
还需要注意的是，我将模型对象存储在我的哈希中。正如下面评论中提到的，如果我们使用我给出的示例，`user.foo.serialized_data[0]["stuff"]["name"]`将返回一个`Name`带有属性的模型对象。所以，我可以跑步`user.foo.serialize_data[0]["stuff"]["name"].id`等等。也许该对象弄乱了 YAML 文件的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:46:16.110

问题是我将整个对象存储在哈希值中，如 EDIT 2 中所述。将其切换到对象`id`解决了这个问题。

# php - php.ini 是不存在的加载配置文件（无）

> ID：10711698
> 
> 赞同：28
> 
> 时间：2012-05-22T23:55:47.833
> 
> 标签：php, linux

我已经成功编译了 php 和 apache，没有指定 php 配置文件的目录。我想添加梨功能，但任何地方似乎都没有 php.ini。
在我的 phpinfo 中，它说

> 配置文件 (php.ini) 路径 /usr/local/apache2/php/lib
> 加载的配置文件 (无)
> 扫描此目录以获取其他 .ini 文件 (无)
> 解析的其他 .ini 文件 (无)

我去了 /usr/local/apache2/php/lib 目录，那里确实没有。我还搜索了 php.ini，但没有得到任何结果。我需要更改 php.ini 中的内容，我什至不知道 php 没有它是如何工作的。我只是想知道是否需要使用配置目录重新编译 php，以及如何查找/获取 php.ini 以便我可以修复一些问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-23T09:46:53.687

您必须`php.ini-dist`从 PHP 源复制文件。标准方法是将此类文件复制到`/usr/local/lib/php.ini`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-23T00:09:48.327

问题是您在没有 --with-config-file-path=PATH 选项的情况下编译了 php。

尝试使用此选项重新配置 php。然后按此顺序再次运行“make clean”、“make”和“make install”。您必须运行“make clean”才能使其正常工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-12T16:15:09.630

首先检查是否 `/etc/php.ini`存在，如果没有尝试复制它

```
sudo cp /etc/php.ini.default /etc/php.ini 
```

再次检查`php -i | grep 'Configuration File'`，如果仍然没有，请尝试

```
sudo cp /etc/php.ini.default /usr/local/lib/php.ini 
```

然后重新加载网络服务器并尝试查看结果

```
php --ini 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T11:36:07.917

`ini`文件必须以`.ini`and not结尾`php.ini-dist`。删除它，`-dist`因为它看起来像记事本文件（在 Windows 中）并且系统无法读取。重新启动 Apache 并检查 phpinfo() 输出。

# mysql - 如何使用 MySQL 中的正则表达式用随机数更新和替换字符串？

> ID：10711699
> 
> 赞同：0
> 
> 时间：2012-05-22T23:55:53.583
> 
> 标签：mysql, regex, wordpress

我正在尝试将使用 URL 内的两位数随机数介于 10 和 20 之间的 URL 的 Wordpress 表 (wp_posts) 更新为新 URL，以便移动到新的 CDN。这是我正在尝试做的一个例子：

```
UPDATE wp_posts SET post_content = REPLACE (post_content, 'http://media13.oldcdn.com', 'http://newcdn.com'); 
```

这很好，并且（我相信）可以很好地完成我想要完成的工作，除了上面示例中的数字 13 可以是 10 到 20 之间的任何数字。

我认为我想要这样的东西（但我对数据库的方式并不精通）：

```
UPDATE wp_posts SET post_content = REPLACE (post_content, 'http://media REGEXP '\d\d' .oldcdn.com', 'http://newcdn.com'); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:58:39.423

SQL 在 where 子句中的查询字符串中支持通配符 - 例如

```
LIKE 'http://media__.oldcdn.com' 
```

但不是`Replace`- 你可能需要一个脚本来完成你想要做的事情。我在这里找到了一个解决方案：[如何在 MySQL 替换命令中使用正则表达式？](https://stackoverflow.com/questions/1384796/how-to-use-regexp-in-mysql-replace-commands)

# python - 如何在 pygame 中有两个 key_input 方法？

> ID：10711704
> 
> 赞同：0
> 
> 时间：2012-05-22T23:56:29.497
> 
> 标签：python, pygame

我发现我只能有一种按键输入方法。贝娄我有两种方法（movementsprite和movementspritevert）我发现我只能做一个工作。如果我同时启动两者，第一个运行，第二个什么都不做。有没有解决的办法？难道我做错了什么？

## 原创节目

----运动档案-----

```
 import pygame
    import os, sys
    from itertools import *
    from oryxsprites import *
    from oryxdisplay import *
    spritex = 320
    spritey = 320

    screen = pygame.display.set_mode((640, 640))
    def movementsprite():   

        global spritex

        keys = pygame.key.get_pressed()

        for event in pygame.event.get():
             if event.type == pygame.QUIT:
                 running = False
             elif event.type == pygame.KEYDOWN:

                 if event.key == pygame.K_RIGHT:
                     if spritex == 576:
                         spritex += 0
                     else:
                         spritex += 32 

                 elif event.key == pygame.K_LEFT:              
                     if spritex == 32:
                         spritex -= 0
                     else:
                         spritex -= 32

        return spritex
    def movementspritevert():   

        global spritey

        keys = pygame.key.get_pressed()

        for event in pygame.event.get():
             if event.type == pygame.QUIT:
                 running = False
             elif event.type == pygame.KEYDOWN:

                 if event.key == pygame.K_DOWN:
                     if spritey == 576:
                         spritey += 0
                     else:
                         spritey += 32 

                 elif event.key == pygame.K_UP:              
                     if spritey == 32:
                         spritey -= 0
                     else:
                         spritey -= 32

        return spritey 
```

--------主文件------]

```
running = True

while running:

    backgroundmain()
    pygame.display.set_caption('OryxGame')
    #pygame.display.set_icon(grasstile)
    movementsprite()
    movementspritevert()

    pygame.display.flip()

    for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False
             pygame.quit() 
```

------显示文件----

```
def backgroundmain():
    spritex = movementsprite()
    spritey = movementspritevert()
    backdrop = pygame.Rect(0, 0, 640, 640) 
    screen.fill((50,50,50))
    playingfeildwidth = (32, 608)
    playingfeildheight = (32, 608)

    screen.blit(warrior1, (spritex, spritey)) 
```

## ------可能的解决方案 -------------

-主文件----

```
 while running:

    backgroundmain()
    pygame.display.set_caption('OryxGame')
    #pygame.display.set_icon(grasstile)
    movementsprite(events)
    movementspritevert(events)

    pygame.display.flip()

    for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False
             pygame.quit() 
```

------显示文件-----

```
def backgroundmain():
    events = pygame.event.get()
    spritex = movementsprite(events)
    spritey = movementspritevert(events)
    backdrop = pygame.Rect(0, 0, 640, 640) 
    screen.fill((50,50,50))
    playingfeildwidth = (32, 608)
    playingfeildheight = (32, 608) 
```

------键输入文件------------

```
spritex = 320
spritey = 320
screen = pygame.display.set_mode((640, 640))
def movementsprite(events):  
    global spritex
    keys = pygame.key.get_pressed()

    for event in events:
         if event.type == pygame.QUIT:
             running = False
         elif event.type == pygame.KEYDOWN:

             if event.key == pygame.K_RIGHT:
                 if spritex == 576:
                     spritex += 0
                 else:
                     spritex += 32 

             elif event.key == pygame.K_LEFT:              
                 if spritex == 32:
                     spritex -= 0
                 else:
                     spritex -= 32

    return spritex
def movementspritevert(events):   
    global spritey
    keys = pygame.key.get_pressed()

    for event in events:
         if event.type == pygame.QUIT:
             running = False
         elif event.type == pygame.KEYDOWN:

             if event.key == pygame.K_DOWN:
                 if spritey == 576:
                     spritey += 0
                 else:
                     spritey += 32 

             elif event.key == pygame.K_UP:              
                 if spritey == 32:
                     spritey -= 0
                 else:
                     spritey -= 32

    return spritey 
```

- -错误 - -

```
Traceback (most recent call last):
  File "C:\Users\Eric\Dropbox\oryxgame\oryxgame.py", line 12, in <module>
    backgroundmain()
  File "C:\Users\Eric\Dropbox\oryxgame\oryxdisplay.py", line 11, in backgroundmain
    spritey = movementspritevert(events)
TypeError: movementspritevert() takes no arguments (1 given) 
```

----[完整代码](https://www.dropbox.com/s/zv37rzk2vzhtvg8/oryxgame%20-%20Eric.zip)----

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:03:31.470

问题是 event.get() 从队列中删除事件（请参阅[文档](http://www.pygame.org/docs/ref/event.html#pygame.event.get)）。因此，当您的第二个函数使用 event.get() 时，队列中没有任何事件剩余，除非它们能够在调用之间极短的间隔内滑入。

要查看此问题的实际效果，请在第一个函数中 `print event` 调用 after `for event in pygame.event.get()`，然后在第二个函数中尝试。

解决此问题的一种方法是

```
 events = pygame.event.get()
    function1(events)
    function2(events) 
```

然后使用 for 循环`events`代替。

**编辑：**澄清如何实施

您的代码可能会抛出错误，因为`pygame.event.get()`在初始化 pygame. 你可以使用类似的东西，

```
def backgroundmain():
    events = pygame.event.get()                #save events
    spritex = movementsprite(events)           #added events arg
    spritey = movementspritevert(events)       #added events arg
    backdrop = pygame.Rect(0, 0, 640, 640) 
    screen.fill((50,50,50))
    playingfeildwidth = (32, 608)
    playingfeildheight = (32, 608)

    screen.blit(warrior1, (spritex, spritey)) 
```

然后，从此更改运动功能：

```
def movementspritevert():   

    #Do stuff ...

    for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False
         elif event.type == pygame.KEYDOWN: 
```

对此：

```
def movementspritevert(events):   

    #Do stuff ...

    for event in events:
        if event.type == pygame.QUIT:
            running = False
        elif event.type == pygame.KEYDOWN: 
```

关键是每次你使用 event.get() 时，它都会删除事件，所以你的下一次调用不会得到相同的事件。基本上，如果您希望所有运动功能都使用一个按键，则将事件保存为变量并将其传递给函数。

# javascript - 如何自定义 AddThis 照片分享工具

> ID：10711707
> 
> 赞同：0
> 
> 时间：2012-05-22T23:56:54.027
> 
> 标签：javascript, customization, addthis

我正在使用[AddThis 的照片共享工具](http://www.addthis.com/labs/photo-sharing)，我喜欢它，但我想对其进行一些自定义，但不知道该怎么做。

AddThis 表示将此代码放入您的站点：

```
<script type="text/javascript">
var addthis_config = {    
    services_overlay:'facebook,twitter,email,more'
}
</script>
<script type="text/javascript" 
  src="http://s7.addthis.com/js/300/addthis_widget.js"></script> 
```

您可以通过添加服务名称来添加服务。然后你添加`class="addthis_shareable"`到图像本身，你就可以开始了。但是我想自定义 AddThis 多一点，不知道如何做到这一点。

我想：

1.  将图标的大小从 32x32 减小到 16x16。
2.  更改将图像悬停在上方时项目的显示速度。
3.  如果可能，在淡出之前将图标显示半秒钟以向用户表明它们在那里。

任何有关上述内容的帮助将不胜感激。

这是[代码的 JSFiddle](http://jsfiddle.net/Lynda333/3dx9N/1/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:30:06.447

为了更好地控制按钮，您需要创建它们并使用可以驱动外观的属性进行配置。你会像这样添加按钮

```
<div class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook" addthis:ui_hover_delay="200" addthis:ui_delay="500"></></a>
  <a class="addthis_button_twitter" addthis:ui_hover_delay="200" addthis:ui_delay="500"></a>
  <a class="addthis_button_email" addthis:ui_hover_delay="200" addthis:ui_delay="500"></a>
</div> 
```

由于在服务配置中添加了“更多”，可能会出现打印菜单。如果删除不起作用，请尝试将配置对象中的“services_exclude”设置为“print”

# python - 仅获取电子邮件的内容

> ID：10711713
> 
> 赞同：0
> 
> 时间：2012-05-22T23:58:19.357
> 
> 标签：python, imaplib

我试图只返回从 IMAP 服务器获取的消息的消息内容。我觉得我在某个时候可以毫无问题地工作，但我目前正在退回一堆垃圾。这是我目前从服务器返回的内容（包括一堆我不想要的垃圾）。

我的代码如下所示：

```
server.select('INBOX')
status, ids = server.search(None, 'UnSeen')

latest_id = ids[0]
print 'latest id is', latest_id
status, msg_data = server.fetch(latest_id, '(RFC822)')
raw_data = msg_data[0][1]
print 'raw msg data: ', raw_data 
```

我的目标是从中分离出字符串“Abc”：

> 原始味精数据：传递至：接收：通过 SMTP id k5csp25808iba；2012 年 5 月 22 日星期二 16:52:37 -0700 (PDT) 返回路径：<3xSa8TyIUAIYBIBIEJFFGFA.BFFACICAAIB.dGgfq0IEl2373.5ysmo.qyyqvo.myw@grandcentral.bounces.google.com> 接收到的 SPF：通过 (google.com: 3xSa8TyIUAIYBIBIEJFFGFA.BFBACICAAIB.dGgfq0IEl2373.5ysmo.qyyqvo.myw@grandcentral.bounces.google.com 的域指定为允许的发件人）client-ip=10.52.24.68；身份验证结果：mr.google.com；spf=pass (google.com: domain of 3xSa8TyIUAIYBIBIEJFFGFA.BFBACICAAIB.dGgfq0IEl2373.5ysmo.qyyqvo.myw@grandcentral.bounces.google.com 指定为允许发件人) smtp.mail=3xSa8TyIUAIYBIBIEJFFGFA.BFBACICAAIB.dGgfq0IEl2373.myw@gfq0IEl2373.q5.yy. grandcentral.bounces.google.com；dkim=pass header.i=3xSa8TyIUAIYBIBIEJFFGFA.BFBACICAAIB.dGgfq0IEl2373.5ysmo.qyyqvo。myw@grandcentral.bounces.google.com 收到：来自 mr.google.com ([10.52.24.68]) 的 SMTP id 为 s4mr15641011vdf.3.1337730757212 (num_hops = 1)；2012 年 5 月 22 日星期二 16:52:37 -0700 (PDT) DKIM-签名：v=1；一个=rsa-sha256；c=放松/放松；d=google.com；s=20120113；h=mime-version:references:message-id:date:subject:from:to:content-type; bh=KIYz0SegimNSAAbGsi5167k+DIHSSlVjHp4RK92QeKo=; b=K2//5fPk82ocgnfM6iY4abv/RnxBzlbpnhSosuzkhf8cASjQmyLI0fshrY/xFWY1kh dQHWDqnpdPW5JhF8kODPkX6nDUCTmA81954ROjmqorUHqoqrqNgcJg17M5PPhfMCduhm HaavvpGomS8M29A2Yw81p6+BDSLHDOsVaqXKM1SuuBjslBYZZNEz3YNDsZWHWop64O6V STWCiuXhdAwxqD3Ruuh1ZTbxrmHMimKZfGtF5wahvy8prRQibdBd21eW05fk7PHwalg9 vrsKpGD/xYzpGzEc7nUzIvirUlHFebN3r7JqO463ZKpWgKX/zEdG/uO2OFdxsYdqThow EBDg== MIME-Version: 1.0 Received: by 10.52.24.68 with SMTP id s4mr10817316vdf.3.1337730757202; Tue, 22 May 2012 16:52:37 -0700 (PDT) References: <+18184955650.77d431b4360d0f0785312b85196039cf7bf69257@txt.voice.google.com> Message-ID: <+18184955650.d58cd371f90b1e89b989489c4752e917791953de@txt.voice.google.com> Date: 2012 年 5 月 22 日星期二 23:52:37 +0000 主题：来自发件人的短信：“”<.T6WVgq84bs@txt.voice.google。com> To: Content-Type: text/plain; 字符集=ISO-8859-1；格式=流动；delsp=是
> 
> 美国广播公司

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:47:33.613

[我可以在这里](http://www.devshed.com/c/a/Python/Python-Email-Libraries-part-2-IMAP/3/)找到传递给 server.fetch() 的字符串的引用（如上所述）。这回答了我的问题，因为我可以通过以下方式隔离我想要的字符串：

```
status, msg_data = server.fetch(some_id, '(UID BODY[TEXT])') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:08:20.220

[`email.parser.Parser().parse()`](http://docs.python.org/library/email.parser.html#email.parser.Parser.parse),[`email.parser.Parser().parsestr()`](http://docs.python.org/library/email.parser.html#email.parser.Parser.parsestr)

# fonts - 在inkscape中拉伸文本，然后将其包装到路径

> ID：10711714
> 
> 赞同：1
> 
> 时间：2012-05-22T23:58:25.037
> 
> 标签：fonts, inkscape

我有一小段文字，我想将其垂直拉伸，然后将其环绕一条路径。我可以拉伸文本，但是当我将其包装到路径时，它会跳回其默认大小。

之前：![在此处输入图像描述](../Images/b6721d87ee6c08a0fb196b21ce043c26.png) 之后： ![在此处输入图像描述](../Images/23b28fcd175ee0cb80773ab1aca6d690.png)

*（分配给路径后*垂直拉伸不会始终将拉伸应用于每个字形。例如，它使 T 更高，但使 g 更宽！）

将其应用于路径时，有没有办法保持拉伸的外观？或者有解决方法吗？

在 Inkscape 0.47 中创建它的步骤：

1.  写了一些文字
2.  拖动垂直箭头将其拉伸。
3.  使用圆形工具制作圆弧（将填充颜色设置为无）
4.  路径|弧上的对象到路径
5.  路径|反向（因此文本在内部而不是外部）
6.  选择了文本对象。Shift+单击路径，因此它们都被选中。
7.  文本|放置路径

（是的，我意识到字母重叠。然后我将插入空格并使用 Alt-left/right 来添加字距调整。但这对于这个问题并不重要。）

更新：还有几个值得注意的失败。（即使他们已经工作了，他们也不太理想，因为我不能像上面的解决方案那样沿着路径手动调整文本。）

这个遵循[http://inkscape-forum.andreas-s.net/topic/2576083上的说明（在](http://inkscape-forum.andreas-s.net/topic/2576083)[http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Paths-LivePathEffects](http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Paths-LivePathEffects.html)有更多关于 LPE 的解释[.html](http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Paths-LivePathEffects.html)）它是通过选择文本，ctrl-c，然后选择路径，然后路径|路径效果编辑器，然后选择沿路径的图案，单击添加，然后选择第四个图标，“链接到路径”。

![在此处输入图像描述](../Images/40f76d806012b4ec559112f440b6ad5a.png)

下一个是在[http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Extensions-GenerateFromPath.html](http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Extensions-GenerateFromPath.html)中描述的。选择文本，然后选择路径|对象到路径。然后一起选择文本和路径（使用 shift-click），扩展|从路径生成|沿路径的模式。我为这里显示的效果选择了“Single,stretched”和“Snake”。

![在此处输入图像描述](../Images/596650743501ff05e77d90f0871a956f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:04:03.147

你可以试试这个：

(1) 写一些文本
(2) 在文本下方画一条水平直线（使其成为路径）
(3) 选择文本对象。Shift+单击路径，因此它们都被选中。
(4) Text|Put On Path
(5) 选择文本对象。拖动垂直箭头将其拉伸（或水平箭头以减小文本宽度）。
（6）用路径工具选中直线，在中间拖动使其弯曲

给曲线赋予正确的形状以产生好看的文本有点棘手。请注意，您也可以向该行添加其他节点，这使其更容易一些。

# symfony - Symfony2 在保存时仍然存在错误

> ID：10711715
> 
> 赞同：1
> 
> 时间：2012-05-22T23:58:26.487
> 
> 标签：symfony

当我尝试使用 Doctrine 将表单中的数据保存到我的数据库时，我遇到了 symfony2 的问题。

这是错误

```
array
500 Internal Server Error - InvalidArgumentException 
```

当我展开调试时，错误似乎在**$em->persist($user);**

这是我的功能：

```
 public function saveAction() {
    $request = $this->getRequest();
    $form = $this->createForm(new PostType());

    if ($request->getMethod() == "POST") {
        $form->bindRequest($request);
        if ($form->isValid()) {

           // $user = new PostEntity();
            $user = $form->getData();
            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($user);
            $em->flush();

            $this->user = $user;
     } else {
            return new Response('Erro dados invalido');
        }

    }else {
        return new Response('Erro post');
    }
} 
```

有什么想法可以解决这个问题吗？

**编辑**

这是我的 PostType 类

```
<?php

namespace blog\PostBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class PostType extends AbstractType
{
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('title')
        ->add('description')
        ->add('date')
    ;
}

public function getName()
{
    return 'blog_postbundle_posttype';
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:18:29.567

你可以发布 PostType 类吗？

你在使用调试页面吗？(/app_dev.php)。

* * *

编辑

只需添加以下内容：

```
public function getDefaultOptions(array $options) {
    return array(
        'data_class' => 'blog\PostBundle\Entity\Post',
    );
} 
```

# kohana-orm - Kohana 3.2 has_one 模型未加载

> ID：10711719
> 
> 赞同：1
> 
> 时间：2012-05-22T23:58:43.603
> 
> 标签：kohana-orm, kohana-3.2

我有两张桌子：

```
Profiles
------
id

Stats
------
profile_id
v1
v2 
```

和2个模型：

```
Profile_Model
$_has_one = array( 'stat' => array() );

Stat_Model
$_belongs_to = array( 'profile' => array() ); 
```

我愿意：

```
$profile = ORM::Factory( 'profile', $id );
$profile->stat->v1 = 123;
$profile->stat->save(); 
```

我希望更新或创建具有 profile_id = $id 的 Stats 行。相反，它总是试图插入记录，即使它存在（因为它认为该记录没有加载）。

我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:41:07.597

您应该遵循 Kohana 方式并添加`id`到`Stats`表中或在定义中指定外键`Model_Profile`：

```
$_has_one = array('stat' => array('foreign_key' => 'profile_id')); 
```

# jquery - 为什么我的 jQuery :not() 选择器在 CSS 中不起作用？

> ID：10711730
> 
> 赞同：58
> 
> 时间：2012-05-23T00:00:58.830
> 
> 标签：jquery, css, jquery-selectors, css-selectors

我有这个布局：

```
<div id="sectors">
    <h1>Sectors</h1>
    <div id="s7-1103" class="alpha"></div>
    <div id="s8-1104" class="alpha"></div>
    <div id="s1-7605" class="beta"></div>
    <div id="s0-7479"></div>
    <div id="s2-6528" class="gamma"></div>
    <div id="s0-4444"></div>
</div> 
```

使用这些 CSS 规则：

```
#sectors {
    width: 584px;
    background-color: #ffd;
    margin: 1.5em;
    border: 4px dashed #000;
    padding: 16px;
    overflow: auto;
}

#sectors > h1 {
    font-size: 2em;
    font-weight: bold;
    text-align: center;
}

#sectors > div {
    float: left;
    position: relative;
    width: 180px;
    height: 240px;
    margin: 16px 0 0 16px;
    border-style: solid;
    border-width: 2px;
}

#sectors > div::after {
    display: block;
    position: absolute;
    width: 100%;
    bottom: 0;
    font-weight: bold;
    text-align: center;
    text-transform: capitalize;
    background-color: rgba(255, 255, 255, 0.8);
    border-top: 2px solid;
    content: attr(id) ' - ' attr(class);
}

#sectors > div:nth-of-type(3n+1) {
    margin-left: 0;
}

#sectors > div.alpha { color: #b00; background-color: #ffe0d9; }
#sectors > div.beta  { color: #05b; background-color: #c0edff; }
#sectors > div.gamma { color: #362; background-color: #d4f6c3; } 
```

我使用 jQuery 将`unassigned`类添加到没有其他类之一的扇区`alpha`，`beta`或者`gamma`：

```
$('#sectors > div:not(.alpha, .beta, .gamma)').addClass('unassigned'); 
```

然后我对该类应用一些不同的规则：

```
#sectors > div.unassigned {
    color: #808080;
    background-color: #e9e9e9;
    opacity: 0.5;
}

#sectors > div.unassigned::after {
    content: attr(id) ' - Unassigned';
}

#sectors > div.unassigned:hover {
    opacity: 1.0;
} 
```

一切都在现代浏览器中完美运行。

[交互式 jsFiddle 预览](http://jsfiddle.net/BoltClock/vJazE)

但是看到[`:not()`jQuery 中的选择器](http://api.jquery.com/not-selector)是基于[`:not()`CSS3 的](http://www.w3.org/TR/css3-selectors/#negation)，我想我可以将它直接移动到我的样式表中，这样我就不必依赖使用 jQuery 添加额外的类。此外，我对支持旧版本的 IE 并不感兴趣，其他浏览器对`:not()`选择器的支持非常好。

所以我尝试将`.unassigned`上面的部分更改为这个（知道我的布局中只有扇区 Α、Β 和 Γ）：

```
#sectors > div:not(.alpha, .beta, .gamma) {
    color: #808080;
    background-color: #e9e9e9;
    opacity: 0.5;
}

#sectors > div:not(.alpha, .beta, .gamma)::after {
    content: attr(id) ' - Unassigned';
}

#sectors > div:not(.alpha, .beta, .gamma):hover {
    opacity: 1.0;
} 
```

但是一旦我这样做，它就会停止工作 - 在*所有浏览器*中！我未分配的扇区不再变灰、淡出或标记为“未分配”。

[更新但不那么互动的 jsFiddle 预览](http://jsfiddle.net/BoltClock/vJazE/1)

为什么`:not()`选择器在 jQuery 中工作但在 CSS 中失败？既然 jQuery 声称“符合 CSS3 标准”，那么它在这两个地方的工作方式不应该相同，还是我遗漏了什么？

是否有一个纯 CSS 解决方法或者我必须依赖脚本？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-23T00:00:59.050

> 为什么`:not()`选择器在 jQuery 中工作但在 CSS 中失败？既然 jQuery 声称“符合 CSS3 标准”，那么它在这两个地方的工作方式不应该相同，还是我遗漏了什么？

也许*应该*，但事实证明它*没有*：jQuery 扩展了`:not()`选择器，以便[您可以将*任何选择器*传递给它](http://api.jquery.com/not-selector)，无论它可能多么复杂，*我怀疑*这样做的主要原因是为了与[`.not()`方法](http://api.jquery.com/not)，它也采用任意复杂的选择器和相应的过滤器。它确实在某种程度上保持了类似 CSS 的语法，但它扩展了标准中定义的内容。

作为另一个例子，这很好用（我知道与问题中给出的内容相比，这是一个非常荒谬的例子，但这只是为了说明目的）：

```
/* 
 * Select any section
 * that's neither a child of body with a class
 * nor a child of body having a descendant with a class.
 */
$('section:not(body > [class], body > :has([class]))') 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/FhYFr)

请记住，将逗号分隔的选择器列表传递给意味着过滤*与任何列出的选择器都不匹配的*`:not()`元素。

 *另一方面，现在[`:not()`Selectors level 3 中的伪类本身非常有限。](http://www.w3.org/TR/css3-selectors/#negation)您只能将*一个简单的选择器*作为参数传递给`:not()`. 这意味着您一次只能通过其中任何一项：

*   通用选择器 ( `*`)，可选择带有[命名空间](http://www.w3.org/TR/selectors/#univnmsp)
*   类型选择器（`a`, `div`, `span`, `ul`, `li`, 等），可选择使用[命名空间](http://www.w3.org/TR/selectors/#typenmsp)
*   属性选择器（`[att]`,`[att=val]`等），可选地带有[命名空间](http://www.w3.org/TR/selectors/#attrnmsp)
*   类选择器 ( `.class`)
*   ID 选择器 ( `#id`)
*   伪类 ( `:pseudo-class`)

[所以，这里是jQuery 的`:not()`选择器](http://api.jquery.com/not-selector)和[当前标准的`:not()`选择器](http://www.w3.org/TR/css3-selectors/#negation)之间的区别：

1.  首先，直接回答问题：**不能传递逗号分隔的选择器列表。**¹例如，虽然给定的选择器在 jQuery 中工作，如小提琴中所示，但它不是有效的 CSS：

    ```
    /* If it's not in the Α, Β or Γ sectors, it's unassigned */
    #sectors > div:not(.alpha, .beta, .gamma) 
    ```

    > 是否有一个纯 CSS 解决方法或者我必须依赖脚本？

    值得庆幸的是，在这种情况下，有。您只需`:not()`一个接一个地链接多个选择器，以使其成为有效的 CSS：

    ```
    #sectors > div:not(.alpha):not(.beta):not(.gamma) 
    ```

    它不会使选择器*更长*，但不一致和不便仍然很明显。

    [更新了交互式 jsFiddle 预览](http://jsfiddle.net/BoltClock/vJazE/2)

2.  **您不能将简单选择器组合成复合选择器以用于`:not()`.** 这适用于 jQuery，但 CSS 无效：

    ```
    /* Do not find divs that have all three classes together */
    #foo > div:not(.foo.bar.baz) 
    ```

    您需要将其拆分为多个否定（不仅仅是链接它们！）以使其成为有效的 CSS：

    ```
    #foo > div:not(.foo), #foo > div:not(.bar), #foo > div:not(.baz) 
    ```

    如您所见，这比第 1 点更不方便。

3.  **你不能使用组合器。**这适用于 jQuery，但不适用于 CSS：

    ```
    /* 
     * Grab everything that is neither #foo itself nor within #foo.
     * Notice the descendant combinator (the space) between #foo and *.
     */
    :not(#foo, #foo *) 
    ```

    这是一个特别糟糕的情况，主要是因为它没有适当的解决方法。有一些*松散*的解决方法（[1](https://stackoverflow.com/q/7084112)和[2](https://stackoverflow.com/a/8540726)），但它们几乎总是依赖于 HTML 结构，因此在实用性上非常有限。

4.  在实现`querySelectorAll()`和`:not()`选择器的浏览器中，`:not()`以使其成为有效 CSS 选择器的方式在选择器字符串中使用将导致方法直接返回结果，而不是回退到 Sizzle（实现`:not()`扩展的 jQuery 选择器引擎）。如果你是一个执着于表现的人，这是一个微不足道的奖励，你肯定会垂涎三尺。

好消息是[Selectors 4 增强了`:not()`选择器](http://www.w3.org/TR/selectors4/#negation)以允许使用逗号分隔的复杂选择器列表。一个复杂的选择器要么是一个单独的简单或复合选择器，要么是由组合器分隔的整个复合选择器链。简而言之，你在上面看到的一切。

这意味着上面的 jQuery 示例将成为有效的 4 级选择器，这将使伪类在未来几年 CSS 实现开始支持它时变得更加有用。

* * *

¹ [尽管[本文](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector)说您可以`:not()`在 Firefox 3 中传递一个以逗号分隔的选择器列表，但您不应该这样做。如果它像那篇文章声称的那样在 Firefox 3 中工作，那是因为 Firefox 3 中的一个错误，我再也找不到票了，但在未来的浏览器实现未来标准之前它不应该工作。看到这篇文章迄今为止被引用的频率，我对此发表了[评论](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/#comment-164654)，但也看到这篇文章有多老以及网站更新的频率有多低，我真的不指望作者回来修复它。]*

# batch-file - Trying to add all my specified registry files to the reigstry within a batch file

> ID：10711737
> 
> 赞同：0
> 
> 时间：2012-05-23T00:01:54.757
> 
> 标签：batch-file

As the questions says I am trying to call all my specified registry files (.reg) files with a simple batch file. When the user clicks on the batch file it will run and add .reg files to the registry, i also need this to run silently without a Administrative Privileges popup to make changes to the registry. So for example say Quicktime.Mov is the registry file i would like to call and add to the registry, when Quicktime.Mov.reg is called from mybatch.bat it runs a script and adds that specified .reg file to registry without the user knowing, I am not trying to make anything malicious its actually quite the opposite, I am trying to correct some errors people are having when installing quicktime. If your confused and i didn't explain this well then i will try my utter most best to help define it more without having a long run on sentence. Thanks again by helping me with this you will be helping others fix quicktime's installation error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:35:12.823

You can add `.reg` files to the registry silently with batch using this:

`regedit.exe /s regfile.reg`

If it requires admin rights to add to the registry i.e. in `HKLM` then it might error or just not work, but I think that's the best you can do with batch.

# c - 从指针数组中检索数组

> ID：10711740
> 
> 赞同：2
> 
> 时间：2012-05-23T00:02:13.383
> 
> 标签：c, arrays, pointers

我有以下代码

```
 int arr[5];
        printf("Input values:");
        for (i=0;i<5;i++)
        scanf("%d",&arr[i]);
        pthread_create(&thread1, NULL, &inputfunction, (void *)&arr);
        pthread_join(thread1,NULL);
        return 0;
}

void *inputfunction(void *ptr_value)
{
        int value= *((int *) ptr_value);
        printf("value=%d", value);
//      printf(&(ptr_value));
        return NULL;
} 
```

我想检索我在数组中输入的所有 5 个值，但在函数体中使用此代码仅返回第一个值。我对指针很困惑，无法弄清楚获取整个数组的方法。

请告诉我我需要在我的代码中进行哪些修改。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:04:27.987

试试这个：

```
pthread_create(&thread1, NULL, &inputfunction, &(arr[0]));

void *inputfunction(void *ptr_value)
{
    int *values = ptr_value;

    for (int i = 0; i < 5; i++)
         printf("value %i = %i\n", i, values[i]);

    return NULL;
} 
```

# php - function_exists 返回 false 但不能重新声明函数

> ID：10711742
> 
> 赞同：1
> 
> 时间：2012-05-23T00:02:30.967
> 
> 标签：php, dompdf

这类似于[function_exists 返回 false 但声明会引发错误](https://stackoverflow.com/questions/9316181/function-exists-returns-false-but-declaration-throws-error)，但我认为这不是命名空间的问题，因为它是内部函数，而不是用户函数，这给了我问题。

我在我的 php 应用程序中使用 dompdf，他们的 dompdf 类中的以下函数给我带来了问题....

```
if ( !function_exists('sys_get_temp_dir')) {
    /**
     * Find the current system temporary directory
     *
     * @link http://us.php.net/manual/en/function.sys-get-temp-dir.php#85261
     */
    function sys_get_temp_dir() {
        if (!empty($_ENV['TMP'])) { return realpath($_ENV['TMP']); }
        if (!empty($_ENV['TMPDIR'])) { return realpath( $_ENV['TMPDIR']); }
        if (!empty($_ENV['TEMP'])) { return realpath( $_ENV['TEMP']); }
        $tempfile=tempnam(uniqid(rand(),TRUE),'');
        if (file_exists($tempfile)) {
        unlink($tempfile);
        return realpath(dirname($tempfile));
        }
    }
} 
```

我得到的是

```
Fatal error: Cannot redeclare sys_get_temp_dir() on line 873 
```

当我使用 get_defined_functions() 方法回显时，它会在列表末尾显示函数 sys_get_temp_dir 所以它甚至不应该进入我没想到的 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-28T15:59:23.130

对于不想深入评论的人：

如果通过 php.ini 文件禁用某个函数，即在`disable_functions`指令中命名，该`function_exists`函数将返回`false`，但仍不允许重新声明该函数。只需从列表中删除该函数，`disable_functions`代码就会按预期工作。

您可以通过`phpinfo()`在测试页面上运行或通过在测试页面上运行该函数并查看错误日志来检查这是否是您的问题。实际运行该功能将在错误日志中显示该功能已出于安全原因禁用的消息。

# entity-framework - 如何在 EF 代码优先 4.3 中为 CreatedDate 列使用数据库默认值？

> ID：10711748
> 
> 赞同：5
> 
> 时间：2012-05-23T00:03:01.940
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.3

我想`CreatedDate`在我的表中有一个列`Accounts`，定义如下：

```
CreatedDate DATETIME NOT NULL DEFAULT GETUTCDATE() 
```

这将映射到类中的 CreatedDate 属性：

```
public class Account
{
    public DateTime? CreatedDate { get; private set; }
    // ... other properties ...
} 
```

创建新帐户时，我希望将 CreatedDate 设置为 NULL，并让数据库填充它。从数据库加载现有帐户时，我希望 EF 检索数据库生成的 CreatedDate。

我正在使用 EF 4.3 代码优先和显式迁移。当 EF 为 Accounts 表生成迁移时，我对其进行了如下修改：

```
CreatedDate = c.DateTime(nullable: false, defaultValueSql: "GETUTCDATE()"), 
```

不幸的是，当我尝试使用 EF 4.3 映射表时，EF 尝试在 CreatedDate 列中插入值 NULL。

我尝试[按照 Ladislav Mrnka 的建议](https://stackoverflow.com/questions/6564772/ef-code-first-readonly-column)为该属性设置 DatabaseGeneratedOption.Identity 。但是，这会从主键属性中删除标识选项。我尝试改用 DatabaseGeneratedOption.Computed，但它继续尝试插入 NULL。我恢复了所有迁移并重新运行它们 - 问题仍然存在。

这是我正在做的事情`OnModelCreating`：

```
modelBuilder.Entity<Account>().Property(a => a.CreatedDate)
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed); 
```

有没有人有什么建议？

谢谢你的帮助，
理查德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:26:49.960

使您的日期在您的实体中不可为空或在您的数据库中不可为空。仅当插入语句不发送显式值时才使用数据库默认值。在 EF 的情况下，仅当您`CreatedDate`使用标记时才会发生这种情况`DatabaseGeneratedOption.Identity`。如果它从您的主键中删除默认身份，则通过数据注释或流式 API 手动强制它。

# objective-c - 子类中的窄属性类型

> ID：10711755
> 
> 赞同：4
> 
> 时间：2012-05-23T00:04:08.953
> 
> 标签：objective-c, ios

今天我遇到了一个我没想到 Objective-C 编译器会允许的奇怪行为。

在 UITableViewCell 中，有一个 UIImageView 类型的名为 imageView 的属性。我继承了 UITableViewCell，并覆盖了 imageView，除了我将它设为 AWImageView 类型，其中 AWImageView 是 UIImageView 的子类。我以为它不会编译，但确实如此。一切正常。我对这种行为感到非常震惊。

是否正式允许缩小子类中的财产类型？或者这是使它工作的Objective-C编译器中的一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T04:44:22.080

您怀疑被允许这样做是有根据的，但是在这种*特殊*情况下，您可以...

在重写的严格子类型解释中，重写方法可以接受更通用类型的参数并返回更具体类型的值。

例如，使用 Objective-C，给出：

```
@interface A : NSObject { ... }
@interface B : A { ... }
@interface C : B { ... } 
```

和B中的方法M：

```
- (B *) M:(B *)arg { ... } 
```

然后在严格子类型下的 C 类中，这可以在 C 类中使用：

```
- (C *) M:(A *)arg { ... } 
```

这是安全的，因为如果你有一个明显 B 对象的引用：

```
B *bObj = ...; 
```

然后方法 M 调用：

```
B *anotherBObj = [bObj M:[B new]]; 
```

那么无论`bObj`实际上是 B 还是 C，调用的类型都是正确的 - 如果它是 C 对象，那么作为 B 的参数很好，因为它也是 A，结果是 C 很好，因为它也是 B。

这使我们*不完全*是您的财产；在 Objective-C 中，属性只是两种方法的简写：

```
@property B *myBvalue; 
```

是以下的简写：

```
- (void) setMyBvalue:(B *)value;
- (B *) myBvalue; 
```

如果该属性在 B 中声明，并且您在 C 类中使用 C 值属性覆盖它：

```
@property C *myBvalue; 
```

你得到：

```
- (void) setMyBvalue:(C *)value;
- (C *) myBvalue; 
```

并且该方法`setMyBvalue:`违反了严格的子类型化规则——将一个 C 实例转换为一个 B 实例，而类型化规则说你可以传递一个 B，该方法需要一个 C，然后就会出现混乱。

**但是**，在您的情况下，您要覆盖的属性是`readonly`，因此没有设置器，也没有危险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:05:43.210

如果 AWImageView 从 UIImageView 派生（子类），它是一个 UIImageView，所以对于编译器来说都是一样的。

[来自文档：](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-BAJCCBHC)

> [![在此处输入图像描述](../Images/31c22ba1613027897dc873513bbacb57.png)](https://i.stack.imgur.com/EjCwk.png)
> 
> 图 1-1 […] 这只是说 Square 类型的对象不仅仅是一个正方形，它还是一个矩形、一个形状、一个图形和一个 NSObject 类型的对象。

# javascript - JSDate - 正确解析 ddMMyyyy 格式的日期

> ID：10711756
> 
> 赞同：1
> 
> 时间：2012-05-23T00:04:19.560
> 
> 标签：javascript, parsing, date

我在使用 Javascript 解析用户输入时遇到问题，我无法让解析器正确接受 ddMMyyyy 中的日期。当有分隔符时，它会正确解析。

下面的示例使用的是[DateJS](http://www.datejs.com/)（新西兰本地化），我已经对较新的[MomentJs](http://momentjs.com/)进行了初步尝试（这对于输入验证来说并不理想）。如果他们要充分处理输入案例，我对其他框架持开放态度。

我的测试用例：

```
// Parses correct value
var dateWithHyphens = Date.parse('01-06-2012');

// Parses incorrectly, using MMddyyy, instead of ddMMyyyy
var dateWithoutHyphens = Date.parse('01062012');

// Parses incorrectly, using MMddyyy, instead of ddMMyyyy
var dateWithFormat = Date.parse('01062012', { format: 'ddMMyyyy'}); 
```

我为此创建了一个 JSFiddle：http: [//jsfiddle.net/ajwxs/1](http://jsfiddle.net/ajwxs/1)

测试用例应该返回 6 月 1 日，但不正确的会返回 1 月 6 日。（这是输入解析 - 输出格式为时已晚）。

关于是否可以更好地促使 JSDate 使用正确的格式来解析这些日期的任何建议？

## 更新

在这个应用程序中，我验证了许多可能的用户输入，包括：

```
01062012
01/06/2012
010612 
```

这将使 parseExact 样式的实现有点冗长......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:17:51.783

我不知道 DateJS，但是如果您发现它假设`MMddyyyy`您想要的位置，`ddMMyyyy`那么您可以`MMddyyyy`在解析之前对字符串进行快速替换以将其切换到：

```
Date.parse( '01062012'.replace(/^(\d\d)(\d\d)(\d\d\d\d)$/,"$2$1$3") ); 
```

或者做一个类似的替换来插入连字符并使它`dd-MM-yyyy`：

```
Date.parse( '01062012'.replace(/^(\d\d)(\d\d)(\d\d\d\d)$/,"$1-$2-$3") ); 
```

无论哪种方式，其中已经包含连字符的字符串都将保持不变，因此将根据您的第一个（成功的）测试用例进行解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:44:56.343

您想使用[Date.parseExact](http://code.google.com/p/datejs/wiki/APIDocumentation#parseExact)方法。出于某种原因，它可以正常工作，而普通解析则不能。此外，您不需要传递包装在对象中的格式选项。

根据规范 Date.parse 不应该采用格式选项，所以这可能就是原因。

```
// Parses correctly
var dateWithFormat = Date.parseExact('01062012', 'ddMMyyyy'); 
```

我还更新了[jsfiddle](http://jsfiddle.net/VBZJx/)以确保。

## 更新

我认为问题在于解析器[硬编码](http://code.google.com/p/datejs/source/browse/trunk/src/parser.js#921)了一堆简单的格式，并且在某些情况下，这些格式会覆盖日期、月份和年份顺序的本地化设置。如果您将以下内容放在使用 Date 的位置之前，它将解决您的问题。

```
Date.Grammar._formats = Date.Grammar.formats([
    "\"yyyy-MM-ddTHH:mm:ssZ\"",
    "yyyy-MM-ddTHH:mm:ssZ",
    "yyyy-MM-ddTHH:mm:ssz",
    "yyyy-MM-ddTHH:mm:ss",
    "yyyy-MM-ddTHH:mmZ",
    "yyyy-MM-ddTHH:mmz",
    "yyyy-MM-ddTHH:mm",
    "ddd, MMM dd, yyyy H:mm:ss tt",
    "ddd MMM d yyyy HH:mm:ss zzz",
    "ddMMyyyy",
    "MMddyyyy",
    "ddMyyyy",
    "Mddyyyy",
    "dMyyyy",
    "Mdyyyy",
    "yyyy",
    "dMyy",
    "Mdyy",
    "d"
]); 
```

这并不漂亮，但它肯定比列出所有可能的选项要短，即使只是一点点。如果你能找到一个不那么古怪的 Date 库，那可能是一个更好的选择。

# opencart - 在 opencart 中显示信息部分

> ID：10711766
> 
> 赞同：0
> 
> 时间：2012-05-23T00:05:44.957
> 
> 标签：opencart

我是 opencart 的新手。我创建了新主题并将以下代码从页脚文件复制到头文件。我使用以下代码在 mytheme 的标题中显示信息部分。

*   ">

问题是它显示错误“：未定义的变量：信息”。请帮助我解决这个问题。是什么导致了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:13:27.883

您是指 Opencart 在管理部分中的信息页面中的信息部分，还是要将信息放在标题中？你能举一个你的标题的例子吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T21:01:49.863

问题是您需要在控制器中`catalog/controller/common/header.php`从页脚加载页眉的信息`catalog/controller/common/footer.php`

```
 $this->load->model('catalog/information');

    $this->data['informations'] = array();

    foreach ($this->model_catalog_information->getInformations() as $result) {
        if ($result['bottom']) {
            $this->data['informations'][] = array(
                'title' => $result['title'],
                'href'  => $this->url->link('information/information', 'information_id=' . $result['information_id'])
            );
        }
    } 
```

一旦你这样做了，你应该很高兴

# javascript - selectedOptions 是否损坏或...？

> ID：10711767
> 
> 赞同：23
> 
> 时间：2012-05-23T00:06:15.897
> 
> 标签：javascript

注意：这个问题与 Knockout.js 无关，而是关于元素的`selectedOptions`属性。`<select>`这是参考：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-button-element.html#dom-select-selectedoptions](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-button-element.html#dom-select-selectedoptions)

我认为这对 Javascript 开发人员来说是一个不错的功能。支持非常有限，但无论如何它都在增长。Chrome、Opera 和 Safari 应该已经支持它。

问题是我无法弄清楚它是如何工作的。该行为应该非常简单，产生所选选项的实时集合，但事实并非如此。您会想象`selectedOptions`每次用户选择一个选项时都会发生变化，对吧？错误的。我准备了一个测试用例：

[http://jsfiddle.net/f39cC/5/](http://jsfiddle.net/f39cC/5/)

在这个例子中，Opera 11.64**总是**返回第一个选择的值，不管你之后做什么，而 Chrome 21 dev 和 19 stable 有一个奇怪的行为。执行以下步骤：

1.  选择“一个”。正如预期的那样，在输出和控制台中，您都会得到“一”。
2.  使用 Ctrl 也选择“两个”。在控制台中你得到“一，二”，在输出中它仍然是“一”。
3.  也选择“三”。在控制台中是“一，二，三”，在输出中是“一，二”。
4.  现在只选择“两个”。在控制台中，您在输出中获得“Two”，“Two,”（注意两个逗号）。

**但是**，如果您注释掉该`console.log`行，您总是会得到正确的输出。如果交换两条指令，或者将值存储在单独的字符串中，则可以在控制台和输出中获得预期的行为，如下所示：

[http://jsfiddle.net/f39cC/2/](http://jsfiddle.net/f39cC/2/)

那么，我错过了什么`selectedOptions`吗？依赖这个可能有错误实现的属性是否为时过早？是`console.log`在 Chrome 中创建问题吗？s有什么我不知道`HTMLCollection`的吗？

我没有安装 Safari，有人可以检查它的行为吗？

**2013 年 2 月 18 日更新**：我不知道什么时候发生了变化，但 Chrome 24.0.1312.57 和 Opera 12.14 现在似乎都可以正常工作。Firefox 18.0.2 和 Internet Explorer 10 仍然必须实现该属性。

**2013 年 9 月 17 日更新**：Firefox 24 和 IE 11 预览版仍然必须支持该属性。这是 Firefox 和 IE8-11 的简单解决方法：

```
Object.defineProperty(HTMLSelectElement.prototype, "selectedOptions", {
    get: (function() {
        try {
            document.querySelector(":checked");
            return function() {
                return this.querySelectorAll(":checked");
            };
        } catch (e) {
            return function() {
                if (!this.multiple) {
                    return this.selectedIndex >= 0
                            ? [this.options[this.selectedIndex]] : [];
                }
                for (var i = 0, a = []; i < this.options.length; i++)
                    if (this.options[i].selected) a.push(this.options[i]);
                return a;
            };
        }
    })()
}); 
```

但是，对于 IE8，它只返回 a`Array`而不是 a `NodeList`。

**28/5/2014 更新**：看起来 Firefox`selectedOptions`从 r25 开始实施。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T11:38:22.207

似乎这个问题比一个简单的错误要深一些。WebKit 和 Presto 都未能`selectedOptions`正确支持的事实给我们暗示，这取决于属性应该是`HTMLCollection`.

现在，`HTMLCollection`s 有了它们的实时行为，因为当 DOM 发生某些事情（类的更改、节点的删除等）时，它们会被渲染引擎失效。但是`selected`选项的属性**不会**触发集合的失效，从而使其完全不可靠。

我想这里的问题是创建一种使实时集合失效的新方法，它可能不是很简单，因为它可能会影响 DOM 的整个解释和处理方式。

目前，Chrome 21.0.1180.4 已删除该属性。

# batch-file - 如何在批处理文件中给出相对路径？

> ID：10711769
> 
> 赞同：2
> 
> 时间：2012-05-23T00:06:34.463
> 
> 标签：batch-file

我面临以下批处理脚本的问题，我必须在批处理文件中提供硬编码路径的相对路径。

下面是我的soapUI cmd 行执行文件，其中soapui-settings.xml 是包含我所有soap 设置的文件，project.xml 是包含我的测试用例的文件。我在这里有硬编码的路径。因为我要签入这个文件，如果任何其他人执行这个文件将不起作用，因为他们的机器上不存在该路径。我如何在 Windows 上实现这一点？有没有一种方法可以在我的批处理文件中使用相对路径来硬编码并运行它？

这是我的示例文件：

```
cd C:\soapui4.5\soapUI-Pro-4.5.0\bin  
testrunner.bat -tC:\Users\jvihol\soapui-settings.xml C:\Users\jvihol\Documents\April-RTM-soapui-project.xml 
```

任何帮助将非常感激。谢谢。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T03:09:12.797

这是我用来解决不断变化的路径的技巧。简而言之，

1.  使所有路径相对于批处理文件位置，并且
2.  使批处理文件更改其自己的工作目录。

如果您调用的工具位于路径中，或者位于由环境变量定义的位置，这将很有帮助。

像这样的东西：

```
@echo off

pushd %~dp0

REM Here you are executing in the same directory as the batch file
REM You can make your path relative to here

popd 
```

对于您的项目，您可以将其`%~dp0`用作绝对路径的占位符。

```
pushd C:\soapui4.5\soapUI-Pro-4.5.0\bin 
testrunner.bat -EDefault -I -t%~dp0soapui-settings.xml %~dp0April-RTM-soapui-project.xml
popd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:53:29.230

从相对路径获取绝对路径需要有人进行一些计算。我知道的三个选项是：i）一个只做路径计算的附加程序，ii）使用“当前目录”，以及 iii）将两条路径粉碎在一起。以下是方法 ii) 和 iii) 的粗略说明：

```
REM example "givens"
set DRIVE=C:
set ROOTPATH=\fee\fie\fo
set RELPATH=funky\stuff
set FILENAME=blarf.txt

REM method ii) using the "current directory" functionality
%DRIVE%
cd %ROOTPATH%
cd %RELPATH%
more %FILENAME%

REM method iii) using explicit concatenation
set FULLPATH=%DRIVE%%ROOTPATH%\%RELPATH%
set PATHFILENAME=%FULLPATH%\%FILENAME%
more %PATHFILENAME%

REM DOS/BAT handling of drive letter is odd (is it part of the path, or not?)
REM It may be necessary to use "cd /D ..."

REM Path calculations are easier 
REM so long as DOS/BAT understands that "\\" is the same as "\" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:39:19.647

也许你想要这个：

```
cd C:\soapui4.5\soapUI-Pro-4.5.0\bin  
testrunner.bat -t**%USERPROFILE%**\soapui-settings.xml **%USERPROFILE%**\Documents\April-RTM-soapui-project.xml 
```

`USERPROFILE`是一个系统环境变量，包含当前用户主目录的路径。在您的会话中，它将评估为

```
C:\Users\jvihol 
```

在别人的，到

```
C:\Users\*someone else's user name* 
```

# c++ - 静态成员的 C++ 链接器错误

> ID：10711772
> 
> 赞同：-6
> 
> 时间：2012-05-23T00:07:14.613
> 
> 标签：c++

```
class fairy 
    {
    protected:
        bool x;
        int points;
    public:
        fairy();
        void intro(string, int);
        void call_decision(int, int);
    };

    fairy::fairy()
    {
        x = true;
        points = 0;
    }

    void fairy::intro(string NAME, int case_type)
    {
        int decision = 0;
        cout << "Hello, my name is" << NAME << "." << endl << "What would you like to do" << endl;
        while(x)
        {
        cout << endl;
        cout << "(1) Ask for a wish." << endl;
        cout << "(2) Offer to help the fairy." << endl;
        cout << "(3) Say goodbye to the fairy." << endl;
        cin >> decision;
        call_decision(decision, case_type);
        }
    }

    class good : fairy
    {
    protected:
        int wish_num;
        bool HELP;
    public:a
        good();
        static string name;
        void wish();
        void help();
    };

    good::good()
    {
        name = "Sandy";
        wish_num = 0;   
        HELP = true;
    }

    void good::wish()
    {
        if (wish_num != 5)
        {
        cout << "Your wish has been granted" << endl;
        points += 10;
        wish_num++;
        }
        else
        {
            cout << "Sorry, I can not grant you another wish" << endl;
        }
    }

    void good::help()
    {
        if (HELP)
        {
            cout << "THANK YOU" << endl;
            points += 50;
            HELP = false;
        }
        else
        {
            cout << "Thank you but I don't need anymore help." << endl;
        }
    }

    class evil : fairy
    {
    protected:

    public:
        evil();
        static string name;
        void wish();
        void help();
    };

    evil::evil()
    {
        name = "Seth";
    }

    void evil::wish()
    {
        cout << "NO!!!! MUHHHHHAAAA!!!" << endl;
        points -= 10;
    }

    void evil::help()
    {
            cout << "Thanks... NOT, I don't even want your help!!" << endl;
            points -= 50;
    }

    class equivocal : fairy
    {
    protected:
        int wish_num;
    public:
        equivocal();
        static string name;
        void wish();
        void help();
    };

    equivocal::equivocal()
    {
        name = "Joe";
        wish_num = 0;
    }

    void equivocal::wish()
    {
        int random = (rand() % 2);
        if (random && wish_num != 3)
        {
        cout << "Your wish has been granted" << endl;
        points += 10;
        wish_num++;
        }
        else
        {
            cout << "Sorry, I can not grant you another wish" << endl;
            points -= 10;
        }
    }

    void equivocal::help()
    {
        cout << "I'll think about it" << endl;
    }

    void fairy::call_decision(int decision, int case_type)
    {
    good one;
    evil two;
    equivocal three;

        {
        switch(decision)
        {
        case'1':
            {
                switch (case_type)
                    {
                        case '0':
                            one.wish();
                        case '1':
                            two.wish();
                        case '2': 
                            three.wish();
                    }
            }
        case '2':
            {
                switch (case_type)
                    {
                        case '0':
                            one.help();
                        case '1':
                            two.help();
                        case '2': 
                            three.help();
                    }
            }
        case '3':
            {
                x = false;
            }
        }
        }
    }

int main()
{
    fairy game;
    good one;
    evil two;
    equivocal three;
    string NAME;
    int case_type = 0;
    int num = rand();
    for (int i = 0; i < 3; i++)
    {
    switch (num % 3)
        {
            case '0':
                NAME = one.name;
                case_type = 0;
            case '1':
                NAME = two.name;
                case_type = 1;
            case '2': 
                NAME = three.name;
                case_type = 2;
            default:
                case_type = -1;
        }

    game.intro(NAME, case_type);
    num++;
    }

} 
```

`fairy::call_decision`在所有派生类之后定义是否可以？（这允许我在派生类的基类中进行引用。）

如果是这样，为什么我在尝试编译时会出现 lnk 2001 错误？

如果没有，我怎样才能让它在`void fairy::call_decision`定义之后立即使用`void fairy::intro`定义进行编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:20:27.710

您遇到问题的原因是因为您都已`std::string name`声明`static`。您必须`static`在命名空间范围内定义类定义之外的成员，如下所示：`string good::name = "Sandy";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:13:31.890

大多数编译错误是因为您没有包含`string`类型或`cout`. 将以下内容放在文件顶部：

```
#include <iostream>
#include <string>
using namespace std; 
```

# wpf - 我可以在 xaml 中设置元素属性吗？

> ID：10711774
> 
> 赞同：0
> 
> 时间：2012-05-23T00:07:36.610
> 
> 标签：wpf, xaml

例如，我有一个用于 TextBox 的 ContextMenu，当用户单击 ContextMenu 中的菜单项时，我想将 TextBox 的 Text 属性设置为某个值。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:34:46.453

如果您特别询问是否可以在 XAML 中完成所有这些操作，则不能。允许您的命令和 UI 交互更新 View 的其余部分所依赖（绑定到）的 ViewModel 的值，是正确的方法。

没有看到代码：如果 TextBox 的 Text 属性已经绑定到各种 ViewModel（我只能猜测是），那么将该属性绑定/设置为`MenuItem`您在`ContextMenu`. 假设您`Binding`是正确的，则 TextBox 的值应相应更新。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:42:59.647

在 Blend SDK 中有一个[ChangePropertyAction](http://msdn.microsoft.com/en-us/library/ff723951%28v=expression.40%29.aspx)可用。

[本教程](http://asimsajjad.blogspot.com/2010/08/changepropertyaction-behavior-for.html)可能会有所帮助（本教程以 Silverlight 为目标，但在 WPF 中也是如此）

请注意，您不需要 Blend 来使用此操作；您也可以在 Visual Studio 中使用它，但您必须手动输入代码。

# javascript - 不能在“var temp = {'1':...}”上使用 JSON.parse？

> ID：10711777
> 
> 赞同：0
> 
> 时间：2012-05-23T00:08:16.440
> 
> 标签：javascript

我不断收到此错误：

```
SyntaxError: Unexpected token o 
```

对于一段简单的代码：

```
 var temp = {"1":["2","1","0000-00-00 00:00:00","testing once"],"2":["2","1","0000-00-00 00:00:00","testing twice :)"]};

   console.log(JSON.parse(temp)); //error is here 
```

var temp 是 json_encoded 数据.. 但我得到这个错误 =/ 这意味着我错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T00:11:04.190

这里的问题是那不是 JSON。那是一个 Javascript 对象。（JSON 的语法源自 Javascript 对象的语法。）它不需要解析为 Javascript 对象，因为它已经是一个对象。

只要做`console.log(temp)`，你就会看到这一点。

您收到此奇怪消息的原因是尝试对`JSON.parse`对象执行操作会使 Javascript 首先尝试将对象转换为字符串。结果的字符串没有帮助：`"[object Object]"`. `JSON.parse`试图解析这个。它处理`[`但落在了 first 上`o`，因为这是非法的 JSON 语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T00:11:45.257

您应该将字符串传递给 JSON.parse。在您的示例中，您正在传递一个对象。您可能正在寻找 JSON.stringify()：

```
var temp = {"1":["2","1","0000-00-00 00:00:00","testing once"],"2":["2","1","0000-00-00 00:00:00","testing twice :)"]}
console.log(JSON.stringify(temp)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T00:11:25.267

`JSON.parse()`期待一个字符串。您正在向它传递一个对象。如果您更改声明`temp`，使其实际上包含 JSON 字符串，那么您的代码应该可以工作：

```
var temp = '{"1":["2","1","0000-00-00 00:00:00","testing once"],"2":["2","1","0000-00-00 00:00:00","testing twice :)"]}'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T00:20:31.627

您可以通过两种方式转换 JSON 对象中的内容：

```
1\. from a string you can use JSON.parse that is faster than eval: 

  JSON.parse ('{"key":"value"}');

2\. from an object you can use JSON.stringify:

  JSON.stringify ({"key":"value"}); 
```

欲了解更多信息：

[JSON 文档](http://www.json.org/js.html)

# java - 运行应用程序时的库问题

> ID：10711782
> 
> 赞同：0
> 
> 时间：2012-05-23T00:09:03.993
> 
> 标签：java, android, augmented-reality

我正在编写一个应用程序来测试一个库。它编译得很好，但是当我在虚拟设备（2.3.3）上运行它时，我得到了这个错误：

*java.lang.RuntimeException: 无法实例化活动 ComponentInfo{nicolas.luque/nicolas.luque.MyARActivity}: java.lang.ClassNotFoundException: nicolas.luque.MyARActivity in loader dalvik.system.PathClassLoader[/data/app/nicolas. luque-2.apk]

引起：java.lang.ClassNotFoundException: nicolas.luque.MyARActivity in loader dalvik.system.PathClassLoader[/data/app/nicolas.luque-2.apk]*

这是活动代码：

```
import es.ucm.look.ar.LookAR;
import es.ucm.look.data.EntityData;
import es.ucm.look.data.LookData;
import android.os.Bundle;

public class MyARActivity extends LookAR 
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        EntityData data = new EntityData();
        data.setLocation(10, 0, 0);

        LookData.getInstance().getDataHandler().addEntity(data);

        LookData.getInstance().updateData();

    }

    public MyARActivity()
    {
        super(true, true, true, true, 100.0f, true);
    }
} 
```

这是清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="nicolas.luque"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.CAMERA"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MyARActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我不知道我做错了什么，似乎我的活动丢失了。任何人都可以帮助我吗？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:24:11.660

在 android 项目中创建 libs 文件夹，然后将库的 jar 拖放到 android 项目中的 libs 文件夹中。构建路径将自动添加，您可以轻松构建和部署。（蚀）

# c# - 确保在类成员/字段上调用 Dispose 的正确方法是什么？

> ID：10711785
> 
> 赞同：2
> 
> 时间：2012-05-23T00:09:56.203
> 
> 标签：c#, .net, idisposable

我有一个类 (myClass)，它有一个从 IDisposable 派生的类成员 (myDisposableMem)，因此有一个 Dispose() 方法。如果它是一个局部变量，我可以使用 using(...) {...} 来确保在这个对象上调用 Dispose()。但它是一个班级成员。确保对成员调用 Disposed 的正确方法是什么？我可以想到两种方法：

1）在类中添加一个finallize()，然后在里面调用myDisposableMem.Dispose()

或者

2) 让我的类从 IDisposible 继承：

```
public class myClass : IDisposable
{
 ...
  public void Dispose()
  {
    myDisposableMem.Dispose();
  }
}
void main ()
{
  using (myClass myObj = new MyClass())
  {
   .... 
  }
} 
```

或者也许有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:52:21.220

如果一个对象或一段代码`IDisposable`拥有一个引用，则称它“拥有” an，并且没有理由相信任何其他对象或一段代码会调用`Dispose`它。拥有本地变量中的 an 的代码`IDisposable`通常必须在放弃该变量之前调用`Dispose`它，或者将其交给期望获得所有权的其他代码或对象。拥有`IDisposable`存储在字段中的对象通常必须实现`IDisposable`自身；它的`Dispose`方法应该检查该字段是否为空，如果不是，则调用`Dispose`它。

请注意，仅持有对 an 的引用`IDisposable`并不意味着应该调用`Dispose`它。只有当人们合理预期没有其他代码会这样做时，才应该调用 one `Dispose`hold 。`IDisposable`

`Finalize`只有当对象能够以一种在未知线程上下文中既有用又安全的方式执行一些清理时，对象才应该覆盖。一般来说，一个对象不应该在一个方法中调用`Dispose`其他对象，因为尽管（与某些消息来源声称的相反）这些对象是保证存在的，但以下条件之一很可能适用：`IDisposable``Finalize`

1.  另一个对象可能仍在某处使用，在这种情况下，对其调用“Dispose”将是不安全的。
2.  另一个对象可能已经调用了它的 `Finalize` 方法，在这种情况下，`Dispose` 充其量是多余的，并且可能不安全。
3.  另一个对象可能已经计划运行其“Finalize”方法，在这种情况下，“Dispose”可能是安全的，但可能是多余的。
4.  另一个对象可能不支持线程安全清理，在这种情况下调用 `Dispose` 可能不是多余的，但会是不安全的。
5.  当 `Finalizer` 真正有资格运行时，它可能想做的任何事情都可能没有实际意义（这种情况可以提出事件订阅）。

简而言之，如果一个人拥有一个`IDisposable`，通常应该认为如果可以在终结器线程上下文中安全地清理它，它会自行处理，如果不能，则不应尝试强制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:24:48.303

您发布的代码用于不同的目的

```
public class myClass : IDisposable
{
  ...
  public void Dispose()
  {
    myDisposableMem.Dispose();
  }
} 
```

意味着当某人（您自己或其他任何人）调用您的类的 Dispose 方法时，它也会调用 dispose 方法，`myDisposableMem`这是正确的做法（我强烈建议您，如果您身上还有其他 Disposable 成员，`myClass`请在此处将它们包括为出色地...）

另一方面

```
void main ()
{
  using (myClass myObj = new MyClass())
  {
    .... 
  }
} 
```

意味着`myObj`ISN 还不是该类的成员，并且它仅在 using 语句中可用，稍后将被释放。

这是两种不同的情况，您必须确定哪一种适用于您。如果您已经拥有该类的成员，我强烈建议您在其本身被 Disposed 之前不要将其丢弃`myClass`，除非您绝对确定没有其他人会使用它并且将其留在那里需要大量资源。

对您的实际代码/场景的更多了解可能会帮助我们告诉您应该使用哪种方法。

还要考虑[Finalize](http://msdn.microsoft.com/en-us/library/system.object.finalize.aspx)的实际工作原理，[这个其他 SO question](https://stackoverflow.com/questions/732864/finalize-vs-dispose)可能会对您有所帮助。

在我看来，我不能保证我就在这里，Dispose() 方法确保实现对象在应用程序无法访问之前释放其使用的所有资源，但这不会将其从堆栈中删除，而 finalize 方法在垃圾收集期间被调用，当实现时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:27:15.307

最终确定和实施`IDisposable`不是两个单独的选项；它们应该始终一起完成。您应该始终在 中实施`IDisposable`和清理您的资源`Dispose()`，以便用户可以确保及时清理非托管资源。你`Dispose()`的方法应该总是通过调用[GC.SuppressFinalize(this)](http://msdn.microsoft.com/en-us/library/system.gc.suppressfinalize.aspx)来完成，以确保它的终结器不会被调用，原因将在稍后解释。

~~实施时应始终`~MyObject()`实施`IDisposable`。它的目的是为垃圾收集器提供一种方法，以确保您的对象始终被丢弃，以防使用它的人无法自行处理。如果您的终结器所做的不仅仅是调用`this.Dispose()`，那么您可能使用不正确。~~ *没有。请参阅下面的 Ilian Pinzon 的评论，我显然有一些文档可以尝试再次阅读。*

它实际上只是一个安全网。理想情况下，终结器实际上不应该被调用，因为对象总是被显式释放。当垃圾收集器调用它时，它被迫跳过收集该对象。这反过来意味着它会被传递到第二代垃圾收集器。这反过来意味着对象将在内存中停留更长时间，最终清理成本更高。

有关如何完成的更多信息，[请参见此处](http://msdn.microsoft.com/en-us/library/b1yfkh5e.aspx)和[此处。](https://stackoverflow.com/questions/574019/calling-null-on-a-class-vs-dispose/574659#574659)

也就是说，最好的选择是将这些一次性对象从类上下文中取出，并尽可能使它们成为方法变量。

例如，如果您有一个连接到数据库的类，请不要将主实例存储`SqlConnection`为字段。相反，让您的公共方法创建自己的连接，并根据需要将它们传递给私有方法。这有两个优点：首先，这意味着您可以声明您的`SqlConnections`in`using`块并完成它。其次，如果你需要的话，摆脱那块“全局”状态将有助于线程安全。（SqlConnection 还具有其他特定的优点，但这些都是一般性的。）

# parsing - MomentJS - 用于输入验证？

> ID：10711787
> 
> 赞同：9
> 
> 时间：2012-05-23T00:10:30.743
> 
> 标签：parsing, date, momentjs

MomentJS 是用于用户输入解析的吗？

我已经与简单的案例相当接近，让它接受 DDMMYYYY 顺序中的日期，并且它可以处理一些变化。

在指定格式时，它不能特别好地处理无效日期 - 包括日期值太高，或在 2 位和 4 位数字之间切换年份值。

年份解释示例：

```
var date1 = moment('30082012', 'DDMMYYYY');
var date2 = moment('30082012', 'DDMMYY'); // Gives wrong year - 2020
var date3 = moment('300812', 'DDMMYYYY'); // Gives wrong year - 1900
var date4 = moment('300812', 'DDMMYY'); 
```

希望是无效日期的示例：

```
var date5 = moment('08302012', 'DDMMYYYY'); // Gives Jun 08 2014
var date6 = moment('08302012', 'DDMMYY'); // Gives Jun 08 2022
var date7 = moment('083012', 'DDMMYYYY'); // Gives Jun 08 1902
var date8 = moment('083012', 'DDMMYY'); // Jun 08 2014 
```

我用这些例子创建了一个 JS Fiddle：http: [//jsfiddle.net/cHRfg/2/](http://jsfiddle.net/cHRfg/2/)

有没有办法让 moment 接受更广泛的用户输入，并拒绝无效日期？或者图书馆不是为此而设计的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-14T15:40:33.517

```
var parsed = moment(myStringDate, 'DD.MM.YYYY'); 
```

对于版本 >= 1.7.0 使用：

```
parsed.isValid() 
```

对于版本 < 1.7.0 创建您自己的 isValid() 函数：

```
function isValid(parsed) { 
    return (parsed.format() != 'Invalid date');
} 
```

查看文档：http: [//momentjs.com/docs/#/parsing/is-valid/](http://momentjs.com/docs/#/parsing/is-valid/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-31T04:43:51.900

您可以尝试解析多种格式。更新小提琴：http: [//jsfiddle.net/timrwood/cHRfg/3/](http://jsfiddle.net/timrwood/cHRfg/3/)

```
var formats = ['DDMMYYYY', 'DDMMYY'];
var date1 = moment('30082012', formats);
var date4 = moment('300812', formats); 
```

这是相关文档。[http://momentjs.com/docs/#/parsing/string-formats/](http://momentjs.com/docs/#/parsing/string-formats/)

有关于添加的开发，`moment.fn.isValid`这将允许您像示例 5-8 中那样进行验证。它将在 1.7.0 版本中添加。[https://github.com/timrwood/moment/pull/306](https://github.com/timrwood/moment/pull/306)

# c# - ASP.NET MVC 4 DropDownList SelectedValue 不起作用

> ID：10711799
> 
> 赞同：3
> 
> 时间：2012-05-23T00:11:34.573
> 
> 标签：c#, asp.net, razor, asp.net-mvc-4

我正在尝试使用 DropDownList 帮助器在 ASP.NET MVC 4 应用程序中构建一个带有 selectedvalue 的选择列表，但是当生成下拉列表时，它没有任何选择的值，即使作为源给出的 SelectList 有SelectedValue 集。

这是代码：

我的模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.ComponentModel.DataAnnotations;

namespace MvcApplication3.Models
{
    public class Conta
    {
        public long ContaId { get; set; }

        public string Nome { get; set; }

        public DateTime DataInicial { get; set; }

        public decimal SaldoInicial { get; set; }

        public string Owner;

        public override bool Equals(object obj)
        {
            if (obj == null)
                return false;

            if (obj.GetType() != typeof(Conta))
                return false;

            Conta conta = (Conta)obj;

            if ((this.ContaId == conta.ContaId) && (this.Owner.Equals(conta.Owner)) && (this.Nome.Equals(conta.Nome)))
                return true;

            return false;
        }

        public override int GetHashCode()
        {
            int hash = 13;

            hash = (hash * 7) + ContaId.GetHashCode();

            return hash;
        }
    }
} 
```

我的控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MvcApplication3.Models;

namespace MvcApplication3.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult View1()
        {
            Conta selecionada = new Conta()
            {
                ContaId = 3,
                Nome = "Ourocard VISA",
                Owner = "teste"
            };

            SelectList selectList = new SelectList(Contas(), "ContaId", "Nome", selecionada);

            ViewBag.ListaContas = selectList;

            return View();
        }

        IEnumerable<Conta> Contas()
        {
            yield return new Conta()
            {
                ContaId = 1,
                Nome = "Banco do Brasil",
                Owner = "teste"
            };

            yield return new Conta()
            {
                ContaId = 2,
                Nome = "Caixa Econômica",
                Owner = "teste"
            };

            yield return new Conta()
            {
            ContaId = 3,
                Nome = "Ourocard VISA",
                Owner = "teste"
            };

            yield return new Conta()
            {
                ContaId = 4,
                Nome = "American Express",
                Owner = "teste"
            };
        }
    }
} 
```

我的观点：

```
<h2>View1</h2>

@Html.DropDownList("teste", ViewBag.ListaContas as SelectList) 
```

下拉菜单是使用 Contas() 方法创建的四个选项构建的，但没有一个被选中。会是什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T00:55:17.057

您应该`3`作为最后一个参数传入 SelectList 构造函数，而不是对象。

此外，您的`GetHashCode`函数是半损坏的（提示：13*7 是一个常数）。

# c - C Linux stat() 以 nsec 精度获取 atime/mtime

> ID：10711801
> 
> 赞同：3
> 
> 时间：2012-05-23T00:11:41.990
> 
> 标签：c, linux, variables, stat

学习 C，我试图对`stat()`atime/mtime 属性和 nsec 精度值返回的变量类型和大小进行视觉比较。

我`stat()`在一个文件上运行，想从返回的 stat 结构中获取 mtime 和 mtime nsec 值，然后将这些值存储在单独的变量中（然后我想将其传递给`utimes()`......长篇大论！）。
根据[http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html#NOTES](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html#NOTES)我可以从`st_mtim.tv_nsec`或`st_mtimensec`取决于各种操作系统/构建条件获取值。在我的实际程序中，我将检查两者并使用设置的任何一个，或者只是回退到正常的秒精度`st_mtime`

为了存储返回的正常时间戳，我需要声明什么变量类型和大小`st_mtime`？

我需要声明什么变量类型和大小来存储来自`st_mtim.tv_nsec`or的 nsec 值`st_mtimensec`？
这些是小数吗，包括时间的整秒数？还是他们只是返回时间的 nsec 部分？

我是否需要根据我的系统架构为 nsecs 声明不同的变量大小？

最后，我需要什么转换说明符来输出这些变量`printf()`？

干杯，B

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T00:37:11.743

1.  `st_mtime`应该是一个`time_t`。
2.  根据 POSIX [`<time.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/time.h.html#tag_13_76)，类型`tv_nsec`是 just `long`。
3.  类似的字段`st_mtim.tv_nsec`将返回纳秒数。
4.  对于`long`，你需要`l`；因为`time_t`，它没有明确定义，AFAIK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T01:48:38.090

`st_mtim.tv_nsec`始终在 [0,999999999] 范围内。您需要从`tv_sec`. 从理论上讲，您可以将秒乘以 1000000000 并将它们一起存储为 64 位值，但它会在几百年左右的时间内溢出。

# jquery - 移动浏览器错误地将数字呈现为电话

> ID：10711802
> 
> 赞同：2
> 
> 时间：2012-05-23T00:11:43.160
> 
> 标签：jquery, css, html, jquery-mobile

我有一个包含一堆普通数字和电话的表格。

像这个人一样，[Mobile HTML 呈现数字](https://stackoverflow.com/questions/3712475/mobile-html-rendering-numbers) ，其中一些数字被呈现为电话。

有没有办法防止数字字段被点击并呈现为电话？我已经有一个电话：电话中的链接。我不想使用元标记来禁用所有渲染。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:22:02.343

在标题部分使用格式检测元标记：

```
<meta name="format-detection" content="telephone=no"> 
```

您也可以在数字之间使用“span”（不推荐。编码噩梦）：

```
<span>718</span><span>265</span><span>342</span> 
```

然后用于 iPhone 和 Android：

```
<a href="tel:1-408-555-5555">1-408-555-5555</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:17:33.363

使用元标记仅禁用电话号码的格式检测，然后在 href 属性中显式启用“tel:”链接。

```
<meta name="format-detection" content="telephone=no" /> 
```

...

```
<a href="tel:5555555555">555-555-5555</a> 
```

# ios - 核心情节 - 只有当范围不适合轴时，如何才能使 x 轴可滚动？

> ID：10711807
> 
> 赞同：0
> 
> 时间：2012-05-23T00:12:30.057
> 
> 标签：ios, core-plot

Core Plot - CPTXYAxis 是否具有定义 XAxis 上标签最小宽度的属性？当范围不适合定义的宽度时，我想避免重叠并使其可滚动。

即我正在寻找的是像 contentSize(UIScrollView) 这样的属性？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:50:02.053

您可以使用标签策略和相关属性来控制制作标签的数量以及它们的位置。但是，Core Plot 还没有自动控制轴标签重叠的方法。您可以创建一个启发式方法来决定如何标记轴以及何时允许它根据绘图范围和标签格式滚动。如果需要，您可以在`axisLabels`集合中走动，查看每个标签的内容层，并确定它们是否重叠并进行相应调整。

# mysql - 使用 INNER JOIN 更新 SET CASE？

> ID：10711808
> 
> 赞同：2
> 
> 时间：2012-05-23T00:12:52.880
> 
> 标签：mysql, sql

我正在尝试更新我们的一个关系表中的一个字段。有问题的表是一个用户技能关系表。我要更新的字段是熟练度字段。

我在 PHP 中有一个数组，其中技能名称为键，熟练度为值。

这是我正在运行的 SQL 语句。

```
UPDATE rus 
SET proficiency = CASE 
    WHEN ls.name = 'Objective-C' THEN 'Beginner' 
    END 
FROM rel_users_li_skills rus INNER JOIN li_skills ls ON ls.id = rus.skill_id 
WHERE rus.user_id = 3852 
```

枚举 PHP 数组以在 CASE 语句中添加额外`WHEN ls.name = 'skill-name' THEN 'proficiency'`的语句。

我遇到的问题如下：

检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“FROM rel_users_li_skills rus INNER JOIN li_skills ls ON ls.id = rus.skill_id WHE”附近使用正确的语法

我被这个难住了。我已经发现了一些似乎使用相同语法并且没有问题的 SO 帖子和论坛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:24:23.670

在`MySQL`中，与 不同`SQL Server`的是，您不需要在中引用目标表`FROM`：

```
UPDATE  rel_users_li_skills rus
JOIN    li_skills ls
ON      ls.id = rus.skill_id 
SET     proficiency = CASE WHEN ls.name = 'Objective-C' THEN 'Beginner' END 
WHERE   rus.user_id = 3852 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:29:55.217

我通常使用这种格式。

```
UPDATE  rel_users_li_skills rus INNER JOIN li_skills ls
           ON ls.id = rus.skill_id 
   SET  proficiency = (CASE WHEN ls.name = 'Objective-C' THEN 'Beginner' END)
 WHERE  rus.user_id = 3852 
```

# r - 在 R 中，无法获得 gam 模型的 regTermTest 的结果

> ID：10711811
> 
> 赞同：1
> 
> 时间：2012-05-23T00:12:59.383
> 
> 标签：r

我正在尝试使用 R 计算广义加法模型（mgcv 包中的 gam）中交互项的 Wald 测试。regTermTest 的[文档](http://faculty.washington.edu/tlumley/survey/html/regTermTest.html)说该函数采用具有 coef 和 vcov 方法的模型，但将 gam 模型放入没有t 似乎工作。我怎样才能让这个方法起作用？如果无法完成，是否有另一种简单的方法来计算 R 中的相同值？

lm模型作品

```
model <- lm(sysbp~pmper10*se_race4,data=mesa)
regTermTest(model,"pmper10:se_race4")
# Wald test for pmper10:se_race4
# in lm(formula = sysbp ~ pmper10 * se_race4, data = mesa)
# F =  3.940545  on  3  and  43621  df: p= 0.0080253 
```

但游戏模型没有

```
model <- gam(sysbp~pmper10*se_race4,data=mesa)
regTermTest(model,"pmper10:se_race4")
# Error in solve.default(V) : 'a' is 0-diml 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:29:31.067

如果您使用库`gam`而不是`mgcv`.

该`regTermTest`函数依赖于`'assign'`从给定模型的模型矩阵中提取属性。

`aa <- attr(model.matrix(model), "assign")[okbeta]`

该对象`aa`用于在创建时构造索引`V`

包中的`gam`对象`mgcv`没有此属性。使用来自的示例`survey::regTermTest`

```
data(esoph)
 model1 <- glm(cbind(ncases, ncontrols) ~ agegp + tobgp * 
   alcgp, data = esoph, family = binomial())

regTermTest(model1,"tobgp") 
```

如果我们使用包 gam

```
library(gam)
 model2 <- gam(cbind(ncases, ncontrols) ~ agegp + tobgp * 
   alcgp, data = esoph, family = binomial())

 regTermTest(model2,"tobgp") 
```

给出输出

```
Wald test for tobgp
   in gam(formula = cbind(ncases, ncontrols) ~ agegp + tobgp * alcgp, 
     family = binomial(), data = esoph)
  F =  3.961947  on  3  and  67  df: p= 0.011609 
```

尽管

```
library(mgcv)

model3 <- gam(cbind(ncases, ncontrols) ~ agegp + tobgp * 
   alcgp, data = esoph, family = binomial())

 regTermTest(model3,"tobgp") 
```

给出 OP 报告的错误。

# git - 如何使用 SSH 隧道转发 git 协议？

> ID：10711812
> 
> 赞同：2
> 
> 时间：2012-05-23T00:13:07.330
> 
> 标签：git, proxy

我知道类似的问题已经被问过很多次了。但我能找到的只是关于如何为 http 或 ssh 协议设置代理的答案。这是情况。出于某种原因，我需要克隆的 gitorious 上的 git 存储库不允许使用 http 或 ssh。当我使用“git clone [http://gitorious.org/](http://gitorious.org/) ....”时，我得到“.../refs not found: 你在服务器上运行了 git update-server-info 吗？” 错误。如果我使用“git clone ssh://git@gitorious.org/...”，我得到“致命：远程端意外挂断”错误。（可能我应该为此责备android“repo”，因为我可以直接执行git clone，但不能通过“repo sync”）。（以上测试都是在没有防火墙的情况下完成的。）

所以我的问题是如何设置 SSH 隧道以在防火墙后面使用 git 协议。具体来说，我需要在防火墙后面执行“git clone git://gitorious.org/...”（不是 ssh://，不是 http://）。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T00:31:48.037

该`git://`协议在端口 9418 上运行（在`git-daemon`手册页中记录，或 run `git daemon --help`）。要通过 SSH 隧道转发此内容，您可以执行以下操作：

```
ssh -L 9418:gitorious.org:9418 your.remote.host 
```

连接后，您将像这样克隆一个远程存储库：

```
git clone git://localhost/path/to/repository.git 
```

为了使其工作，您显然需要防火墙外的机器作为 ssh 命令的目标。

# xcode - 是否可以在应用程序委托之外注册和捕获通知 - iOS

> ID：10711814
> 
> 赞同：1
> 
> 时间：2012-05-23T00:13:19.200
> 
> 标签：xcode, cocoa-touch

是否可以在应用程序委托之外注册远程通知？

例如：是否可以在单独的表单中包含以下事件并且仍然能够捕获通知事件？

```
-(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken

-(void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error

-(void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo 
```

我问这个的原因是因为我正在为一个生成 Xcode 项目和 AFAIK 的程序开发一个“扩展”，现在我们不能直接与应用程序委托表单交谈。

我试过让单独的表单响应 UIApplicationDelegate 但它仍然没有成功。

最后，是否必须在完成加载事件中完成远程通知的注册，因为我在该事件之外有以下代码。

```
-(void) registerForRemoteNotificationsWithBadge:(BOOL)badge Sound:(BOOL)sound Alert:(BOOL)alert{

    UIRemoteNotificationType notif;
    if (badge)
        notif = UIRemoteNotificationTypeBadge;
    if (sound)
        notif = notif | UIRemoteNotificationTypeSound;
    if (alert)
        notif = notif | UIRemoteNotificationTypeAlert;

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes: notif];
} 
```

洞察力将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T14:48:42.937

Urban Airship 的[iOS sdk](https://github.com/urbanairship/ios-library)实际上做了类似的事情。UIAppDelegateProxyClass[代替](https://github.com/urbanairship/ios-library/blob/master/Airship/Common/UAAppDelegateProxy.h)默认应用程序委托并将消息转发给[代理委托](https://github.com/urbanairship/ios-library/blob/master/Airship/Common/UAAppDelegate.h)和原始委托

# ios - XCode IOS Apple LLVM 3.1 - Eigen NEON 中断

> ID：10711815
> 
> 赞同：2
> 
> 时间：2012-05-23T00:13:27.723
> 
> 标签：ios, xcode, clang, eigen, clang++

该问题可能涉及使用 Apple 的 LLVM 3.1 编译器，我确信可以通过禁用 NEON 来解决。但是，我们想使用 NEON。

我也很肯定这是我在 XCode 中设置的错误，但它可能与 Apple 有关。真的，我只是在寻求一些正确方向的提示。

```
/Eigen/src/Core/util/Macros.h
188:Unknown type name 'namespace'
188: Expected ';' after top level declarator

/Eigen/Core
144:'cerrno' file not found

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/3.1/include/arm_neon.h
55: Unknown type name 'float32_t' 
```

该文件中的每个实例都会出现此丢失的 float32_t 错误。即使第 33 行 typedef 显然已经完成。

**更新：** 如果我强制`#define EIGEN_NO_DEBUG`，那么剩下的唯一错误就是缺少 cerrno。事实上，似乎所有的 cXXX 库都丢失了（例如 cstdlib）。但是，如果我将它们包含在 Eigen 之外，它们就会起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:10:23.847

正如评论中提到的，问题在于源代码被编译为 Objective-C 而不是 Objective-C++。解决这个问题可以解决问题。

特别是由于文件 (main.m) 未重命名为 (main.mm)。如果您要将文件重命名为 .mm 以便它使用 ObjC++ (clang++)，那么请确保您获得了所有文件。

# iphone - iOS递归文件夹大小

> ID：10711819
> 
> 赞同：5
> 
> 时间：2012-05-23T00:14:02.987
> 
> 标签：iphone, objective-c, ios, file, size

我将文件存储在本地文档目录中，由文件夹分隔。**有没有一种简单的方法可以获取 iPhone 上文档目录和所有子目录内容的文件大小？**

我可以手动迭代文件夹并继续增加文件大小，但我希望有一些更清洁、更高效的东西。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T20:59:17.717

您可以递归地遍历所有文件夹并获取大小。像这样：

```
+(NSUInteger)getDirectoryFileSize:(NSURL *)directoryUrl
{
    NSUInteger result = 0;
    NSArray *properties = [NSArray arrayWithObjects: NSURLLocalizedNameKey,
                           NSURLCreationDateKey, NSURLLocalizedTypeDescriptionKey, nil];

    NSArray *array = [[NSFileManager defaultManager]
                      contentsOfDirectoryAtURL:directoryUrl
                      includingPropertiesForKeys:properties
                      options:(NSDirectoryEnumerationSkipsHiddenFiles)
                      error:nil];

    for (NSURL *fileSystemItem in array) {
        BOOL directory = NO;
        [[NSFileManager defaultManager] fileExistsAtPath:[fileSystemItem path] isDirectory:&directory];
        if (!directory) {
            result += [[[[NSFileManager defaultManager] attributesOfItemAtPath:[fileSystemItem path] error:nil] objectForKey:NSFileSize] unsignedIntegerValue];
        }
        else {
            result += [CacheManager getDirectoryFileSize:fileSystemItem];
        }
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T23:59:37.380

方法和效率因 iOS 版本而异。对于 iOS 4.0 及更高版本，您可以使用以下内容创建一个类别`NSFileManager`：

```
- (unsigned long long)contentSizeOfDirectoryAtURL:(NSURL *)directoryURL
{
    unsigned long long contentSize = 0;
    NSDirectoryEnumerator *enumerator = [self enumeratorAtURL:directoryURL includingPropertiesForKeys:[NSArray arrayWithObject:NSURLFileSizeKey] options:NSDirectoryEnumerationSkipsHiddenFiles errorHandler:NULL];
    NSNumber *value = nil;
    for (NSURL *itemURL in enumerator) {
        if ([itemURL getResourceValue:&value forKey:NSURLFileSizeKey error:NULL]) {
            contentSize += value.unsignedLongLongValue;
        }
    }
    return contentSize;
} 
```

# c# - 获取具有过滤内部实体的实体 - EF

> ID：10711821
> 
> 赞同：0
> 
> 时间：2012-05-23T00:14:14.160
> 
> 标签：c#, .net, database, entity-framework, linq-to-entities

我有实体：

```
Entry
{
    public virtual ICollection<Content> Contents { get; set; }
} 
```

我需要得到`Entry`包含过滤的`Contents`。

```
var entryWithFilteredContents = dbContext.Entry.Single(). ???
    /*Load(entry=>entry.Contents) Where(content=> content.Value > 10)*/ 
```

现在，当我写作时，`entryWithFilteredContents.Contents`我希望只收到 Value 大于 10 的内容。我知道我可以得到一个`var entry = db.Context.Entry.Single()`然后`var contents = entry.Contents.Where(content=> content.Value > 10)`，但这不能满足我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:02:12.297

这不是 EF 目前开箱即用的支持。

通常的解决方法是首先选择一个投影，如下所示：

```
var query = from e in dbContext.Entry
            select new { Entry = e, Related = e.Contents.Where(c => c.Value > 10) };
return query.Where(p => p.Related.Count > 0).Select(p => p.Entry); 
```

当然，您也可以直接返回任何投影（并可能节省一些数据库往返），但需要非匿名类型才能使结果转义当前方法。

# javascript - jQuery 与 DOM 性能

> ID：10711823
> 
> 赞同：3
> 
> 时间：2012-05-23T00:14:25.410
> 
> 标签：javascript, jquery, dom

我编写了这段代码来对 jQuery 与 DOM 性能进行基准测试。每个浏览器的性能都不同，性能最差的 Firefox X25 运行速度较慢 jQuery。这是预期的行为吗？我没想到 jQuery 会产生如此大的影响。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<script  type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script language="JavaScript" type="text/javascript">
$(function () {
    var i=0;
    var dtb = new Date();
    while(i < 1000000)
    {
        var index = Math.floor(Math.random()*30);
        i++;
        var elem = document.getElementById('d'+index);
    }
    var dte = new Date();
    alert(dte-dtb);

    i=0;
    var dtb2 = new Date();
    var body = document.getElementById('cog');
    while(i < 1000000)
    {
        var index = Math.floor(Math.random()*30);
        i++;
        var elem = body.childNodes[index];
    }
    var dte2 = new Date();
    alert(dte2-dtb2);

    i=0;
    var dtb3 = new Date();
    while(i < 1000000)
    {
        var index = Math.floor(Math.random()*30);
        i++;
        var $elem = $("#d"+index);
    }
    var dte3 = new Date();
    alert(dte3-dtb3);

    /////EDIT//////
    ///// Implemented an Array as suggested by Erik Reppen  ////////

    i = 0;
    var idNames=new Array(30);
    while(i<30){
        idNames[i] = $("#d"+i);
        i++;
    }

    i=0;
    var dtb4 = new Date();
    while(i < 1000000)
    {
        var index = Math.floor(Math.random()*30);
        i++;
        var $elem = idNames[index];
    }
    var dte4 = new Date();
    alert(dte4-dtb4);

    /////EDIT//////////////////////////////////////////////

});

</script>
</head>

<body id="cog">
<div id="d0">sdfkjjfgdfd@@@</div><div id="d1">sdffgdfd@@@</div><div id="d2">sddfgfd</div><div id="d3">sdasfd</div><div id="d4">swqedfd</div><div id="d5">sddfdsfd</div><div id="d6">sdfd</div><div id="d7">sdsdffd</div><div id="d8">sdfsdfd</div><div id="d9">sdfkjlkjd</div><div id="d10">sdm ,nfd</div><div id="d11">sdcxvfd</div><div id="d12">sdxzcmfd</div><div id="d13">shgjmdfd</div><div id="d14">sdfvcbd</div><div id="d15">sdf;k;d</div><div id="d16">sdjklfd</div><div id="d17">sd412fd</div><div id="d18">sdfkyhkd</div><div id="d19">sdasdfd</div><div id="d20">sdhdfgsfd</div><div id="d21">sdfdsad</div><div id="d22">sdasdfd</div><div id="d23">sddfgdffd</div><div id="d24">sdklugiffd</div><div id="d25">sddfsafd</div><div id="d26">sdfq21fd</div><div id="d27">42324sdfd</div><div id="d28">sdnhmjkgufksfd</div><div id="d29">sdqwefdLAST</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T00:52:39.467

这个：

```
$('#someId'); 
```

最终归结为 JQuery 函数说

```
document.getElementId('someId'); // and then wrap it in a JQuery object and return it 
```

但首先，它必须根据您发送的 arg 执行一系列逻辑来弄清楚您的意图是什么。类似的东西（我知道还有更多）：

它是一个字符串吗？是的。有空格吗？不，它是以“#”、“.”还是一些有效的标记名开头的？它以“#”开头。太好了，只需凭身份证抓取，打包并退回。

现在尝试对此进行测试：

```
$('#someId.active > .someClass:visible') 
```

比。无论您必须为 IE7 中的 DOM 编写什么糟糕的东西，您都会看到 JQuery 的全部意义。

一般来说，一遍又一遍地重复 DOM 选择是一件愚蠢的事情，无论您使用的是核心 DOM 方法还是特别是 JQuery。这就像在循环内没有使用任何函数时抱怨函数调用开销。尝试在缓存初始元素抓取之后比较一些 DOM 方法和 JQ 等效项。JQ 可能仍然较慢，但我怀疑任何事情都会慢 25 倍。

```
var $_someId = $('#someId');
dom_someId = document.getElementById('someId');
//now try looping a JQuery method vs an equivalent set of DOM methods for each 
```

===无关但有助于原始测试===

下面是每个评论的一些示例，并在您的问题上支持循环前要做的事情。

```
//caching ID names before loop
var i = 30,
idNames = [];
while(i--){ //confusing but tests as i, then inside i is i-=1
idNames[i] = 'd'+(i+1);
} 
```

注意：您将数组索引为 0-30，因此在循环中的随机索引构建语句之后终止 +1。事实上，我不确定为什么 1-31 不会炸毁你的 childNodes 循环，因为它永远不会碰到第一个元素并且应该尝试访问两个不存在的元素。删除 +1 并选择 0-30 . 上面的循环假设你想要 1-31，但我只是看到 HTML 只上升到 30 并以 1 开头。

```
//caching object/property lookup and DOM Access/HTMLCollection/obj instantiation
var bodyChildren = body.childNodes; //DOM object lookups cost performance

//caching JQ so you can use the exact same loop afterwards
var bodyChildren = $('body').children();

//inside loops
bodyChildren[index]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T00:21:42.390

这是因为`$("#d"+index);`不做与`document.getElementById('d'+index);`. 后者获得一个 DOM 对象。这是一种原生类型的对象，内置于浏览器中。

`$`但是，构建一个 jQuery 对象。首先，它必须解析选择器，因为 jQuery 可以通过类、属性、祖先等查找事物，而`document.getElementById`只能通过 ID 查找元素。jQuery 对象不是原生对象，因此创建速度较慢，而且还具有更大的潜力。例如，jQuery 对象（实际上是原生 DOM 对象的包装器）提供了、`next`和`val`方法。使用 jQuery 进行选择（或至少，进行如此简单的选择）比使用原生 DOM 对象要慢，但使用它进行编程更容易，并且通常使执行速度更快，因为 jQuery 的作者可能比你更擅长 Javascript。`bind``on`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T00:21:12.003

jQuery 是一个包装器，它以一种在每个主流浏览器中都能一致工作的方式规范化 DOM 操作。它执行比直接 DOM 操作慢 25 倍是完全合理的。性能损失是简洁代码的权衡。

JavaScript 通常是一种高度异步的语言。它的大部分用法涉及等待用户触发的回调或计时器。因为有很多时间，所以性能几乎不是问题。用户不会注意到运行时间为 1 毫秒的进程与运行时间为 25 毫秒的进程之间的差异。

如果您*的*某个脚本的性能受到严重影响，请使用工具分析代码在哪里花费的时间最多。

毕竟，过早的优化是万恶之源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T00:21:27.370

您正在使用 jQuery 像大锤一样杀死蚊子。每次你这样做`$("#d"+index)`时，你告诉 jQuery 解析你的选择器，将选择器应用到 DOM，然后将结果包装在一个消耗内存的对象中。这真的很耗时。

士气：在需要时使用 jQuery，而性能不是你的功能的主要主题。

# c - 在 C 中使用 strcmp() 函数

> ID：10711826
> 
> 赞同：-1
> 
> 时间：2012-05-23T00:14:58.187
> 
> 标签：c, ansi, strcmp

我正在编写一个应该从命令输入的程序，然后找到输入的词频。我在使用 strcmp() 函数比较字符串（字符数组）时遇到问题。我已经做了几个小时，但我仍然不明白我做错了什么。跟指针有关系吗？这是我的代码：

```
#include <stdio.h>
#include <string.h>

int main(){
    char Words[501][21];
    int FreqNumbers[500];
    char temp[21] = "zzzzz";
    char Frequency[5][21];
    int wordCount = 0;
    int numberCount = 0;
    int i = 0;
    int counter = 0;
    int end = 0;

    do {
        scanf("%20s",Words[wordCount]);
        for(counter = 0;counter < wordCount;counter++){
            if(wordCount > 0){
                if(strcmp(Words[wordCount], Words[counter]) == 0){
                    FreqNumbers[counter]++;
                    break;
                }
                FreqNumbers[wordCount]++;
            }
        }
        wordCount++;
        printf("%s", Words[wordCount - 1]);
        printf("%s", temp);
    } while(strcmp(Words[wordCount],&temp) != 0);

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:31:49.097

```
while(strcmp(Words[wordCount],&temp) != 0); 
```

`temp`已经是 const 了`char *`。不要使用`&`运算符。这会给你一个指向 const char 指针的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:56:01.227

该`strcmp`函数不是将用户输入的单词与“zzzzz”进行比较，而是使用“zzzzz”检查数组中的下一个条目，因此它没有终止，因为从来没有匹配。（就像你`wordCount++;`在`strcmp`函数之前所做的那样）

`char temp[10]``temp`-将指向的 10 个字符的数组。（不可变/恒定）。

您正在传递`strcmp`函数，即指向内存的变量的地址，而应该给它一个指向内存的指针。（有点混乱，但我希望你能明白）。所以理想情况下应该给出它。

`strcmp(Words[wordCount],temp);`或者`strcmp(Words[wordCount],&temp[0]);`

尽管我所说的可能有点令人困惑。我强烈建议您`KnR`尤其是查看和阅读数组`array of chars`

我对您的代码进行了一些更改。它现在按要求工作。如果可以接受，请查看并标记为答案

```
#include <stdio.h>
#include <string.h>

int main(){

    char Words[501][21]={{0}};          //zero initialized
    char *temp = "zzzzz";       //string literal
    int FreqNumbers[500],wordCount = 0,counter = 0;     //other variables

    do {

        scanf("%s",Words[wordCount]);

        for(counter = 0;counter < wordCount;counter++){

            if(wordCount > 0){
                if(strcmp(Words[wordCount], Words[counter]) == 0){
                    FreqNumbers[counter]++;
                    break;
                }
                FreqNumbers[wordCount]++;
            }
        }
        wordCount++;
        printf("%s\n", Words[wordCount - 1]);           //print if required
        printf("%s\n", temp);                           //print if required

    } while(strcmp(Words[wordCount-1],temp) != 0);      

    return(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:28:56.823

```
do {
    scanf("%20s",Words[wordCount]);
    wordCount++;

} while(strcmp(Words[wordCount],&temp) != 0); 
```

你只是在这里要求一个段错误。你到底为什么要在 do while 循环中这样做？

# android - 使用 OpenCv 处理 NDK 位图 蓝色是橙色吗？

> ID：10711830
> 
> 赞同：4
> 
> 时间：2012-05-23T00:16:05.620
> 
> 标签：android, opencv, android-ndk

我正在测试使用 OpenCv 在 JNI 层上操作位图像素的性能。

**两个选项：**
1\. 传递整数数组，操作像素并将像素写回位图。[41ms]
2\. 传递整个 Bitmap。[35毫秒]

我注意到传递 Bitmap 比传递像素数组并将数组分配给 Bitmap 快大约 5 毫秒。

问题是使用选项 2 我失去了蓝色并得到橙色代替我期望的蓝色。图像是 ARGB 并且似乎已更改为 RGBA？可能是什么问题？

**方法一：**
*Java*

```
Bitmap out = Bitmap.createBitmap(width, height, Config.ARGB_8888);

int[] rgba = new int[width*height];

mSmasher.loadImage(imagePath, rgba, 0);

out.setPixels(rgba, 0, width, 0, 0, width, height); 
```

*JNI*

```
JNIEXPORT void JNICALL Java_com_vblast_smasher_Smasher_loadImage
    (JNIEnv *pEnv, jobject obj, jstring jFilePath, jintArray jbgra, jint options)
{
    jint*  _bgra = pEnv->GetIntArrayElements(jbgra, 0);
    const char *filePath = pEnv->GetStringUTFChars(jFilePath, 0);

    if (NULL != filePath)
    {
        // init our output image
        Mat bgra(outputHeight, outputWidth, CV_8UC4, (unsigned char *)_bgra);

                // bgra image manipulations
    }

    pEnv->ReleaseIntArrayElements(jbgra, _bgra, 0);
    pEnv->ReleaseStringUTFChars(jFilePath, filePath);
} 
```

**方法二：**

```
JNIEXPORT void JNICALL Java_com_vblast_smasher_Smasher_getLayersBitmap
    (JNIEnv *pEnv, jobject obj, jobject bitmap)
{
    int ret;
    AndroidBitmapInfo  info;
    void*              pixels = 0;

    if ((ret = AndroidBitmap_getInfo(pEnv, bitmap, &info)) < 0) {
        LOGE("AndroidBitmap_getInfo() failed ! error=%d", ret);
        return;
    }

    if (info.format != ANDROID_BITMAP_FORMAT_RGBA_8888 )
    {
        LOGE("Bitmap format is not RGBA_8888!");
        return;
    }

    if ((ret = AndroidBitmap_lockPixels(pEnv, bitmap, &pixels)) < 0) {
        LOGE("AndroidBitmap_lockPixels() failed ! error=%d", ret);
    }

    // init our output image
    Mat mbgra(info.height, info.width, CV_8UC4, pixels);

    mLayers[0].copyTo(mbgra);

    AndroidBitmap_unlockPixels(pEnv, bitmap);
} 
```

**解决方案 05/23：**
问题是当使用整数数组并将其传递给 JNI 时，字节顺序从 ARGB (java) 更改为 BGRA(native)。这对于处理像素很好。但是，在锁定像素时传递实际的位图对象，字节顺序没有改变，因此需要在修改像素数据后进行更改。

```
cvtColor(mbgra, mbgra, COLOR_BGR2RGBA, 4); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:56:34.983

Opencv 的顺序是 BGR 而不是 RGB。我猜 A 在正确的位置（或者你会看到半透明的图像），但是蓝色和红色会交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-11T10:04:01.380

在 JNI 颜色值返回为 ARGB 而在 JAVA 中它是 RGBA 试试这个

```
alpha = (int) ((color & 0xFF000000) >> 24);
    blue = (int) ((color & 0xFF0000) >> 16);
    green = (int)((color & 0x00FF00) >> 8);
    red = (int) (color & 0x0000FF);
    blue = blue * alpha / 255;
    green = green * alpha / 255;
    red = red * alpha / 255;

    int tmp = 0;
    tmp = red;
    red = blue;
    blue = tmp;

    color =  ((alpha<< 24) & 0xFF000000) | ((blue<< 16) & 0xFF0000) |
                  ((green << 8) & 0x00FF00) |
                  (red & 0x0000FF); 
```

# mysql - MySQL左连接返回错误

> ID：10711831
> 
> 赞同：0
> 
> 时间：2012-05-23T00:16:19.837
> 
> 标签：mysql, left-join

也许我只是太久没有做 LEFT JOIN，但我很困惑。

这是我的表：

```
Table: user_phones

user    phone       carrier
----------------------------
danny   5045551234  Verizon
mom     5551234567  T-Mob
tony    5121234567  T-Mob

Table carriers

carrier    email_exchange
--------------------------
Verizon    vtext.com
T-Mob      tmomail.net 
```

这是我的查询：

```
SELECT user, CONCAT(phone, '@', email_exchange) AS sms
LEFT JOIN carriers ON (user_phones.carrier = carriers.carrier)
FROM user_phones 
```

我不断回来：

> '左加入运营商（user_phones.carrier =运营商.运营商）从user_phones'

我知道这是一个愚蠢的疏忽，但变化没有帮助（将`ON`条款放在括号中等）不起作用。

我在哪里滑倒？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:23:52.767

你错过了`FROM user_phones`

```
SELECT a.`user`, 
       CONCAT(a.`phone`, '@', b.`email_exchange`) AS sms
FROM user_phones a LEFT JOIN carriers b 
        ON a.carrier = b.carrier 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:19:42.393

把你的`FROM`条款放在你的前面`LEFT JOIN`

```
SELECT `user`, CONCAT(phone, '@', email_exchange) AS sms
FROM user_phones LEFT JOIN carriers ON user_phones.carrier = carriers.carrier 
```

一个小建议是`id`在表中使用自动增量字段`carriers`，更新`user_phones.carrier`以保存这些`id`s，然后加入。高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:19:53.503

尝试：

```
SELECT user, CONCAT(phone, '@', email_exchange) AS sms
FROM user_phones
LEFT JOIN carriers ON (user_phones.carrier = carriers.carrier) 
```

[w3schools - 左连接](http://www.w3schools.com/sql/sql_join_left.asp)

# c++ - 是否可以使用与 Python 中浮点变量的 int 值匹配的指针？

> ID：10711834
> 
> 赞同：0
> 
> 时间：2012-05-23T00:16:37.293
> 
> 标签：c++, python, pointers, floating-point, match

指针在 Python 中并不常见，var 声明类型也不常见。我正在尝试在 Python 中执行此操作。

C++：

```
 ...a function
 flt32 f;
 int32 sign, exp, man, *tms;
 tms = (int *) &f;
 ...(operations)
 *tms = sign | exp | man;
 return (f); 
```

如您所见，`tms`指向`f`数据，但只是（顺便说一句，此功能完美运行）的`int`一部分。`float`

使用 ctypes 我可以在 Python 中使用指针：

```
from ctypes import * 
f = c_float(12.3)
tms = pointer(f) # tms should be: tms = c_int32(value)
print tms.contents.value #12.3000001907 
```

这里的问题是`tms`立即变成 的类型`f`，所以两个变量都是 float (`tms`应该是`tms = c_int32(a_value))`。
可以使用与Python 中变量的`int`值匹配的指针吗？`float`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:55:21.533

如果您真的想在 Python 中执行此操作，您可以使用 ctypes.cast() 将浮点指针强制转换为 int 指针，或者您可以使用 struct 将浮点值打包为字符串并将其解包为 int。这是一个例子：

我使用 ctypes.cast() 将浮点值内存视为 int，并使用 struct 将其转换回：

```
In [5]: from ctypes import *
In [6]: f = c_float(12.3)
In [8]: tmp = cast(pointer(f), POINTER(c_int)) 
In [9]: tmp.contents
Out[9]: c_long(1095027917)
In [10]: tmp.contents.value
Out[10]: 1095027917
In [11]: hex(tmp.contents.value)
Out[11]: '0x4144cccd'

In [13]: import struct
In [16]: struct.unpack("f",struct.pack("I", 1095027917))
Out[16]: (12.300000190734863,) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:23:18.117

你需要什么来获得浮点数的整数部分？只需这样做，然后：

```
i = int(afloat) 
```

# iphone - NSPredicate 基于关系的内容

> ID：10711835
> 
> 赞同：1
> 
> 时间：2012-05-23T00:16:46.200
> 
> 标签：iphone, objective-c, ios, core-data, nspredicate

我有一个`MyEntity`具有`tags`多对多关系的实体，`tags`一个`NSSet`of 也是如此`MyEntity`。它是可选的，所以有些`MyEntity's`没有`tags`. 这是我正在尝试做的事情：

```
 predicate= [NSPredicate predicateWithFormat:
 @"(rootId == parentId AND NONE tags.tagName == %@)", @"badTag"]; 
```

所以我想得到所有的`MyEntitys`地方`rootId == parentId`，如果它的标签有一个名为`"badTag"`. 这样做的问题是，如果实体根本没有任何标签，则不会返回该实体。我尝试了上述的变体：

```
 @"(rootId == parentId AND ANY tags.tagName != %@)", @"badTag"]; 
```

但这给出了相同的结果。我怎样才能使这个谓词适用于实体根本没有任何标签的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:43:30.510

*您可以使用子查询*谓词解决此问题。一旦掌握了子查询，它们就会变得非常强大。可悲的是，他们没有很好的记录。

```
(rootId == parentId) AND (SUBQUERY(tag, $x, $x.tagName == %@).count() == 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:41:36.020

也许添加一个`OR COUNT(tags) == 0`会得到你想要的？

如果这是一个 SQL 存储，请尝试打开 CoreData SQL 调试并查看实际运行的内容。[XCode4 和 Core Data：如何启用 SQL 调试](https://stackoverflow.com/questions/6428630/xcode4-and-core-data-how-to-enable-sql-debugging)

# numbers - 如何为偶数十进制数构建有限自动机？

> ID：10711836
> 
> 赞同：0
> 
> 时间：2012-05-23T00:16:48.027
> 
> 标签：numbers, decimal, finite-automata, automata

我必须做这个练习，我完全不知道怎么做。我之前构建了一些 FA，但使用的是二进制数。除了十进制数字，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:34:28.000

这将是一个简单的。

2 个状态：q1、q2。

*   q1 是初始状态。
*   q2 是最终状态。
*   如果 q1 上的输入数字是任何偶数，则移动到 q2。
*   如果 q1 上的输入数字是任何奇数，则保留在 q1 上。
*   如果 q2 上的输入数字是任何偶数，则保留在 q2 上。
*   如果 q2 上的输入数字是任何奇数，请移回 q1。

# windows - 对 .bat 文件使用自定义 Tee 命令

> ID：10711839
> 
> 赞同：14
> 
> 时间：2012-05-23T00:17:43.687
> 
> 标签：windows, batch-file, cmd

我正在尝试使用为 bat 文件编写的[tee](http://www.robvanderwoude.com/unixports.php#TEE)代码，但在我的代码中实现它时遇到了麻烦。我不想使用任何第三方安装来解决 tee 问题，因为如果我在一年内格式化我的计算机并想再次运行该程序，我希望代码能够工作。

我以这种方式设置它：

```
mycommand.exe | tee.bat -a output.txt 
```

我尝试过使用单独的`.bat`文件，并尝试在原始文件中包含一个函数（首选）`.bat`但无济于事：

```
myprogram.exe | call tee -a output.txt
echo.
echo.
echo.
SET /P restart="Do you want to run again? (1=yes, 2=no): "
if "%restart%"=="1" GOTO LoopStart

::--------------------------------------------------------
::-- Function section starts below here
::--------------------------------------------------------
:tee
:: Check Windows version
IF NOT "%OS%"=="Windows_NT" GOTO Syntax
| 
:: Keep variables local
SETLOCAL

:: Check command line arguments
SET Append=0
IF /I [%1]==[-a] (
    SET Append=1
    SHIFT
)
IF     [%1]==[] GOTO Syntax
IF NOT [%2]==[] GOTO Syntax

:: Test for invalid wildcards
SET Counter=0
FOR /F %%A IN ('DIR /A /B %1 2^>NUL') DO CALL :Count "%%~fA"
IF %Counter% GTR 1 (
    SET Counter=
    GOTO Syntax
)

:: A valid filename seems to have been specified
SET File=%1

:: Check if a directory with the specified name exists
DIR /AD %File% >NUL 2>NUL
IF NOT ERRORLEVEL 1 (
    SET File=
    GOTO Syntax
)

:: Specify /Y switch for Windows 2000 / XP COPY command
SET Y=
VER | FIND "Windows NT" > NUL
IF ERRORLEVEL 1 SET Y=/Y

:: Flush existing file or create new one if -a wasn't specified
IF %Append%==0 (COPY %Y% NUL %File% > NUL 2>&1)

:: Actual TEE
FOR /F "tokens=1* delims=]" %%A IN ('FIND /N /V ""') DO (
    >  CON    ECHO.%%B
    >> %File% ECHO.%%B
)

:: Done
ENDLOCAL
GOTO:EOF

:Count
SET /A Counter += 1
SET File=%1
GOTO:EOF

:Syntax
ECHO.
ECHO Tee.bat,  Version 2.11a for Windows NT 4 / 2000 / XP
ECHO Display text on screen and redirect it to a file simultaneously
ECHO.
IF NOT "%OS%"=="Windows_NT" ECHO Usage:  some_command  ¦  TEE.BAT  [ -a ]  filename
IF NOT "%OS%"=="Windows_NT" GOTO Skip
ECHO Usage:  some_command  ^|  TEE.BAT  [ -a ]  filename
:Skip
ECHO.
ECHO Where:  "some_command" is the command whose output should be redirected
ECHO         "filename"     is the file the output should be redirected to
ECHO         -a             appends the output of the command to the file,
ECHO                        rather than overwriting the file
ECHO.
ECHO Written by Rob van der Woude
ECHO http://www.robvanderwoude.com
ECHO Modified by Kees Couprie
ECHO http://kees.couprie.org
ECHO and Andrew Cameron 
```

我正在尝试拆分输出，以便可以将控制台输出保存到文件中，同时仍然能够与正在运行的程序进行交互。

**如何让 Tee 命令与我的 .bat 一起正常工作，以便我可以将输出拆分到文件和控制台。**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-23T11:51:38.040

由于 Windows 管道的工作方式，您在管道中调用批处理函数的尝试总是会失败 - Windows 通过新的 CMD 外壳实例化管道的两侧。有关更多信息，请参阅[https://stackoverflow.com/a/8194279/1012053](https://stackoverflow.com/a/8194279/1012053)。

批处理 tee 的 Rob van der Woude 版本可能无法为您工作，因为它使用 a`FOR /F`来读取命令的结果 - 该命令必须在读取任何行之前执行完成。如果您在命令执行期间需要用户交互，那将不起作用。使用该版本的 tee，您还不如简单地将输出重定向到一个文件，然后`TYPE`在完成后重定向到该文件。显然不是你想要的。

有纯批处理的技巧可以让你更接近，但我认为还有一个问题是纯批处理无法解决的。您的可执行文件可能会在一行上显示提示而不发出新行。我相信纯原生批处理总是读取整行（流结束时除外）。我不知道逐个字符读取的批处理方法。

***轻微修正***-*`SET /P`可以读取管道输入的部分行，但它有一些限制，使其无法用于强大的批处理 tee 解决方案：无法确定每行何时结束。每“行”限制为 1021 个字符。它从每个“行”的末尾剥离控制字符。无法判断它何时到达输入流的末尾。*

但是有一个简单的解决方案 - JScript 或 VBScript 像冠军一样工作，并且不需要任何特殊安装。这是一个适合您的混合 JScript/批处理脚本。JScript 写得不好，还有很大的改进空间。例如，没有错误检查。

我将脚本另存为`tee.bat`. 第一个必需参数指定要写入的文件的名称。默认情况下，如果文件已经存在，则覆盖该文件。如果提供了第二个参数（值无关紧要），则将输出附加到文件中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::--- Batch section within JScript comment that calls the internal JScript ----
@echo off
cscript //E:JScript //nologo "%~f0" %*
exit /b

----- End of JScript comment, beginning of normal JScript  ------------------*/
var fso = new ActiveXObject("Scripting.FileSystemObject");
var mode=2;
if (WScript.Arguments.Count()==2) {mode=8;}
var out = fso.OpenTextFile(WScript.Arguments(0),mode,true);
var chr;
while( !WScript.StdIn.AtEndOfStream ) {
  chr=WScript.StdIn.Read(1);
  WScript.StdOut.Write(chr);
  out.Write(chr);
} 
```

用法与您预期的非常相似。

```
command.exe | tee.bat output.txt 1 
```

最后 1 个参数强制附加模式。它可以是除 1 之外的任何值

可以按照您的喜好将所有内容放在一个批处理脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::--- Batch section within JScript comment ----------------------------
@echo off

::This block of code handles the TEE by calling the internal JScript code
if "%~1"=="_TEE_" (
  cscript //E:JScript //nologo "%~f0" %2 %3
  exit /b
)

::The rest of your batch script goes here

::This pipes to TEE in append mode
mycommand.exe | "%~f0" _TEE_ output.txt 1

exit /b

----- End of JScript comment, beginning of normal JScript  ------------------*/
var fso = new ActiveXObject("Scripting.FileSystemObject");
var mode=2;
if (WScript.Arguments.Count()==2) {mode=8;}
var out = fso.OpenTextFile(WScript.Arguments(0),mode,true);
var chr;
while( !WScript.StdIn.AtEndOfStream ) {
  chr=WScript.StdIn.Read(1);
  WScript.StdOut.Write(chr);
  out.Write(chr);
} 
```

* * *

***更新***

For anyone with an academic interest in batch scripting, I've posted a pure native batch version of tee at [Asynchronous native batch tee script](http://www.dostips.com/forum/viewtopic.php?f=3&t=5386) over at DosTips. But this hybrid approach is my preferred scripting solution.

# jquery - Ajax 调用未及时更新变量

> ID：10711840
> 
> 赞同：0
> 
> 时间：2012-05-23T00:17:48.493
> 
> 标签：jquery, ajax, datepicker

我缩小了我之前提出的一个问题的范围，发现出了什么问题，但无法解决。

我有一个变量需要在下一个事件触发之前在一个事件函数中设置。

这不会发生，因为我通过 Ajax 调用检索变量。即使我认为我的所有 ajax 设置都正确（？） - 它不会发生。我在 Firebug 中使用控制台日志记录，其中包含“2”的控制台日志会在应首先创建的其他日志条目（其中包含“1”）之前记录。

它是 datepicker 实例的一部分，带有 ajax 调用。完整代码如下。顺便说一句——我已经取出了 ajax 调用，并插入了一个硬编码变量进行测试——它工作得很好。所以是 ajax 不能正常工作。

变量 'varDate' 在文档就绪函数之外声明：

```
<script type='text/javascript'>
 var varDate = 'toby';
$(document).ready(function(){ 
```

...以及这里的主要代码

```
$('.subject-date-pick').datetimepicker({
    timeFormat: 'hh:mm:ss',
    startDate:'01/01/1996',
    clickInput:true,
    beforeShow: function(input,inst) {

        var source = $("#" + inst.id).attr('source');
        var source_id = $("#" + inst.id).attr('source_id');
        var thing = $.ajax({
            type: 'GET', 
            url: 'ajax_get_unavailable_dates.php',
            dataType: 'text',
            async: 'false',
            global: 'false',
            data: {
                source_type: source,
                source_db_id: source_id
                  },
            success: function(msg) {

                console.log("1 - got the result");

                varDate = (msg)
            }
        });
        console.log("2 - ajax complete - logging console");     
        console.log("Post Ajax"+varDate);

    }, 
```

控制台在这里所做的是首先错误地记录变量（使用 SECOND 记录事件），然后触发 datepicker 的下一个事件。之后，变量 IS 更新 - 并且随后单击 datepicker 字段将设置正确的变量 - 但这为时已晚且没有好处。

所以：控制台结果：

Ajax 调用的 GET 请求

2 - ajax 完成 - 日志控制台

发布阿贾克斯托比

1 - 得到结果

...

有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:23:09.130

我猜这是因为`'false' == true`:)

再次尝试`async: false;`作为`$.ajax`ajax 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:22:04.017

尝试`async:false`代替`async:'false'`

# django - 如何对过滤后的外键计数进行排序和分页？

> ID：10711842
> 
> 赞同：0
> 
> 时间：2012-05-23T00:17:53.047
> 
> 标签：django, django-orm

`Entry`我有一个to的外键`Vote`，我想对在`Vote`某个日期之前创建的外键进行排序。我怎样才能以一种不错的方式去做呢？通常我会这样做：

```
entries = Entry.objects.annotate(
    num_votes = Count('votes')).order_by('-num_votes')

page = request.GET.get('page')
paginator = Paginator(entries, 12)
try:
    entries = paginator.page(page)
except PageNotAnInteger:
    entries = paginator.page(1)
except EmptyPage:
    entries = paginator.page(paginator.num_pages) 
```

如何对其进行排序以使其仅计算在某个日期之前创建的选票？我是查询数据库并遍历所有内容的唯一选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:32:27.407

如果您只是添加过滤器，它应该在聚合中包含该过滤器。您将使用外键的related_name 来过滤连接的那部分。

```
entries = Entry.objects.annotate(
    num_votes = Count('votes')).order_by('-num_votes')

entries = entries.filter(votes__created__lte=some_date) 
```

# regex - 元素位置更改时匹配的正则表达式

> ID：10711843
> 
> 赞同：1
> 
> 时间：2012-05-23T00:17:59.570
> 
> 标签：regex

我需要匹配它并从这些标签中提取值。问题是它们是动态生成的，并且有人决定在每次刷新页面时进行切换。

所以标签可能是这样的：

```
<input type="hidden" value="838218230" name="vstablepid_2717_1State"> 
```

或这个：

```
<input type="hidden" name="vstablepid_2717_1State" value="838218230" > 
```

我可以分别做每一个，像这样：

```
value="(.+?)".*"vstable 
```

有一种说法可以同时适用吗？

* * *

到目前为止的想法：

使用某种类型的可选语法，我可以说在值之前或之后找到“vstable”匹配项——但我仍然需要在线上找到至少一个“vstable”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:29:40.267

使用前瞻断言`vstable`，然后获取您的内容（从组中）：

```
<(?=[^>]*vstable[^>]*>)[^>]*value="(.*?)"[^>]*> 
```

正则表达式的前瞻部分`(?=...)`要求`vstable`出现在下一个之前`>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:26:25.670

你不能`or`把这两个陈述放在一起吗？

```
(?:value="(.+?)".*"vstable)|(?:"vstable.*?value="(.+?)") 
```

还是我错过了什么？

*编辑*：此方法有一个警告-有时该值会出现在第一个捕获组中，有时会出现在第二个捕获组中。在这方面，波希米亚人的回答（也）更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:31:22.403

您当前的正则表达式：

```
value="(.+?)".*"vstable 
```

`vstable`正在执行之后发生的事实`value`。

您可以简单地取出该部分并简单地让它成为：

```
value="(.+?)" 
```

对于大多数正则表达式编译器，`.+?`应该是非贪婪的，并且在到达结束引号时将停止匹配`"`。这样，无论`value`发生在哪里，都会被拾起。

但这取决于您的需要，以及您是否特别想`value`在发生的那一行选择`vstable`，但问题中没有指定，所以我给出了一个通用的答案。

# vb.net - 使用名称的变量访问多个表单控件

> ID：10711844
> 
> 赞同：2
> 
> 时间：2012-05-23T00:18:11.083
> 
> 标签：vb.net, winforms, vb.net-2010, vb6-migration

我正在尝试遍历一组组合框并使用连接的字符串和变量设置一个属性来表示控件的名称。但是，我无法让表单实例将 (String & Integer_Variable) 识别为其控件之一——因此它无法将任何适当的属性或子例程识别为 System.Windows.Forms 的成员。控制。

我[在 SO 上找到了 DirectCast 解决方案](https://stackoverflow.com/q/8015094/1411373)，它似乎可以工作（虽然我很怀疑），但这感觉像是一个非常笨拙的解决方案。有没有更清洁的方法来做到这一点？

```
For myTempCount = 1 To 6
    If tempValue < Me.("ComboBox" & myTempCount).Items.Count Then
        ComboBox.SelectedIndex = tempValue 'appears to work -- how?
        Me.ComboBox.SelectedIndex = tempValue 'appears to work

        Me.("ComboBox" & myTempCount).SelectedIndex = tempValue 'doesn't work
        Me.Controls.("ComboBox" & myTempCount).SelectedIndex = tempValue 'doesn't work

        DirectCast(Me.Controls.Find(("ComboBox" & myTempCount), True)(0), ComboBox).SelectedIndex = tempValue 'appears to work
        DirectCast(Me.Controls("ComboBox" & myTempCount), ComboBox).SelectedIndex = tempValue  'appears to work
Next 
```

这段代码最初是 VBA / VB6，我通过 ArtinSoft 的 Visual Basic Upgrade Companion (VBUC) 完成的。FWIW，我正在使用 Microsoft Visual Basic 2010 Express。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:46:08.933

要回答您的问题：

1.  `ComboBox1.SelectedIndex`有效，因为 ComboBox1 是表单的 ControlCollection 中存在的控件
2.  `Me.ComboBoxPrinter1.SelectedIndex`之所以有效，是因为 Me 是对您的 Form 类的引用，并且它正在引用控件。
3.  `Me.("ComboBoxPrinter" & myTempCount).SelectedIndex`不起作用，因为字符串`ComboBoxPrinter & myTempCount`是字符串而不是控件。
4.  `Me.Controls.("ComboBoxPrinter" & myTempCount).SelectedIndex`由于相同的原因不起作用。
5.  其他两个实例之所以有效，是因为您使用字符串作为键来查找并返回您转换为正确类型的控件并设置您的属性。

我个人通常使用 DirectCast 以外的 CType。根据此[链接](http://www.novicksoftware.com/TipsAndTricks/tip-visual-basic-ctype-directcast-dot-net.htm)，CType 和 DirectCast 之间的主要区别在于 DirectCast 必须是可用于缩小或扩大转换的确切类型。DirectCast 更有效，尽管更挑剔。

话虽这么说，你可以做这样的事情：

```
For myTempCount = 1 To 6
    If Controls.ContainsKey("ComboBox" & myTempCount) Then
        CType(Controls("ComboBox" & myTempCount), ComboBox).SelectedIndex = tempValue
    End If
Next 
```

我没有在 Controls 前面使用 Me，因为它指的是同一个集合，如果您的控件在另一个集合中，您将需要使用该 Container。即，如果您使用的是面板`Panel1.Controls.ContainsKey`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:23:42.940

我再次遇到了这个问题，不同类型的多个控件需要对公共属性（如`.Text`）执行相同的操作。由于您不能使用变量来表示 中的控件类型参数`CType()`，因此您必须使用条件命令和相应的硬编码`CType()`命令来获取控件。这就是我想出的：

```
Function getControl(ByVal controlName As String) As Control
    numCtrls = FrameMain.Controls.Count()
    For I As Integer = 0 To numCtrls - 1
        If FrameMain.Controls.Item(I).Name = controlName Then
            If TypeOf FrameMain.Controls.Item(I) Is ComboBox Then
                Return CType(FrameMain.Controls(controlName), ComboBox)
            End If
        End If
    Next
End Function 
```

`controlName`是连接的字符串名称。因此，您可以使用与先前答案几乎相同的方式使用此功能`CType()`：

```
getControl("TextBox" & myTempCount).Text = "whatever" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T01:22:08.853

也许你可以尝试这样的事情（C#）：

```
List<Control> comboBoxes = new List<Control>
{
   ComboBoxPrinter1,
   ComboBoxPrinter2,
   ComboBoxPrinter3,
   ComboBoxPrinter4,
   ComboBoxPrinter5,
   ComboBoxPrinter6
};

// loop through combo boxes collection by position
for (int = 0; i < comboBoxes.Length;i++)
{
    // put in your if logic here, and refer to current combo box using comboBoxes[i]
} 
```

以下是使用在线工具转换为 VB.NET 的上述代码：

```
将组合框作为新列表（控件）（）从 { _
    组合框打印机 1, _
    ComboBoxPrinter2, _
    ComboBoxPrinter3, _
    ComboBoxPrinter4, _
    ComboBoxPrinter5, _
    ComboBoxPrinter6 _
}

For i As Integer = 0 To comboBoxes.Count - 1
  // 你可以挂钩你的 if 逻辑并使用 comboBoxes[i] 引用每个组合框
下一个

```

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-26T09:12:23.030

像这样的东西：

```
Private Sub Button1_Click_1(sender As Object, e As EventArgs) Handles Button1.Click
    Dim control As Control = Me.Controls("Button1")
    Select Case control.GetType
        Case GetType(Button)
            Dim btn As Button = DirectCast(control, Button)
            With btn
                .Text = "hi"
            End With
        Case GetType(Label)
            Dim lbl As Label = DirectCast(control, Label)
            With lbl
                .Text = "hi"
            End With
        Case Else 'etc
    End Select
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T00:22:20.863

哎哟！！！我曾经和 Direct Cast 搞过一次。我记得那是一场噩梦。我的偏好是要么坚持使用服务器端控件，要么将它们作为客户端 Javascript/Ajax 编写。你上面的代码在哪里失败了？任何内部异常？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-13T17:50:50.923

Sub Button2Click(sender As Object, e As EventArgs) 'For i = 1 To 5 If textBox15_08_St.Text = "" Then MessageBox.Show("Bitte die Anzahl eintragen!","Info",MessageBoxButtons.OK,MessageBoxIcon.Information)退出子
结束如果

```
If dataGridView15_08.SelectedRows.Count = 0 And dataGridView15_08.SelectedCells.Count = 0 Then
    MessageBox.Show("Bitte eine Zeile auswählen","Info",MessageBoxButtons.OK,MessageBoxIcon.Information)
    Exit Sub    
End If

If dataGridView15_08.SelectedRows.Count > 1 Then
    MessageBox.Show("Bitte nur 1 Zeile auswählen!","Info",MessageBoxButtons.OK,MessageBoxIcon.Exclamation)
    Exit Sub    
End If  

If dataGridView15_08.Rows.Count = 0 Then
    MessageBox.Show("Bitte Filter überprüfen!","Info",MessageBoxButtons.OK,MessageBoxIcon.Information)
    Exit Sub    
End If 
```

将 i 调暗为整数 = 1

对于每个 c 作为 CheckBox 在 panelCheckBox.Controls

Dim BoxName As String = "checkBox15_08_" & Str(i) Dim CheckName As String = "checkBox15_08_" & Str(i)

BoxName = BoxName.Replace(" ", "")

```
If c.Name = BoxName Then

    If c.Checked = False Then

        c.Checked = True

    CType(Me.panelCheckBox.Controls(CheckName.Replace(" ","")), CheckBox).Enabled = True
    CType(Me.panelTextbox.Controls(BoxName.Replace("checkBox15_08","Hersteller15")), TextBox).Text = Convert.ToString(dataGridView15_08.Rows(dataGridView15_08.CurrentRow.Index).Cells(1).Value)
    CType(Me.panelTextbox.Controls(BoxName.Replace("checkBox15_08","Artikel15")), TextBox).Text = Convert.ToString(dataGridView15_08.Rows(dataGridView15_08.CurrentRow.Index).Cells(3).Value)
    CType(Me.panelTextbox.Controls(BoxName.Replace("checkBox15_08","Artikel_St_15")), TextBox).Text = Me.textBox15_08_St.Text
    textBox15_08_St.Text = ""
    Exit For
    Else
        If CType(Me.panelTextbox.Controls(BoxName.Replace("checkBox15_08","Hersteller15")), TextBox).Text = Convert.ToString(dataGridView15_08.Rows(dataGridView15_08.CurrentRow.Index).Cells(1).Value) _
            And CType(Me.panelTextbox.Controls(BoxName.Replace("checkBox15_08","Artikel15")), TextBox).Text = Convert.ToString(dataGridView15_08.Rows(dataGridView15_08.CurrentRow.Index).Cells(3).Value) Then

            MessageBox.Show("Dieser Artikel wurde bereits hinzugefügt","Info",MessageBoxButtons.OK,MessageBoxIcon.Information)
            Exit For    

        End If
    End If
End If
i = i+1
If i = 31 Then
    MessageBox.Show("Die maximale Anzahl wurde erreicht" & vbCrLf & "Bitte setze Dich mit dem Programierer in Verbindung" & vbCrLf & "Um ein Update Erweiterung zu planen","Info",MessageBoxButtons.OK,MessageBoxIcon.Error)
    Exit For    
End If 
```

下一个

'End For End Sub

Sub checkBox15_08_1Click(sender As Object, e As EventArgs) 处理 checkBox15_08_1.Click checkBox15_08_1.Checked = Me.getControl(1) End Sub

Sub checkBox15_08_2Click(sender As Object, e As EventArgs) Handles checkBox15_08_2.Click checkBox15_08_2.Checked = Me.getControl(2) End Sub

Sub checkBox15_08_3Click(sender As Object, e As EventArgs) Handles checkBox15_08_3.Click checkBox15_08_3.Checked = Me.getControl(3) End Sub

Sub checkBox15_08_4Click(sender As Object, e As EventArgs) Handles checkBox15_08_4.Click checkBox15_08_4.Checked = Me.getControl(4) End Sub

Sub checkBox15_08_5Click(sender As Object, e As EventArgs) Handles checkBox15_08_5.Click checkBox15_08_5.Checked = Me.getControl(5) End Sub

Sub checkBox15_08_6Click(sender As Object, e As EventArgs) Handles checkBox15_08_6.Click checkBox15_08_6.Checked = Me.getControl(6) End Sub

Sub checkBox15_08_7Click(sender As Object, e As EventArgs) Handles checkBox15_08_7.Click checkBox15_08_7.Checked = Me.getControl(7) End Sub

Sub checkBox15_08_8Click(sender As Object, e As EventArgs) Handles checkBox15_08_8.Click checkBox15_08_8.Checked = Me.getControl(8) End Sub

Sub checkBox15_08_9Click(sender As Object, e As EventArgs) Handles checkBox15_08_9.Click checkBox15_08_9.Checked = Me.getControl(9) End Sub

Sub checkBox15_08_10Click(sender As Object, e As EventArgs) Handles checkBox15_08_10.Click checkBox15_08_10.Checked = Me.getControl(10) End Sub

Sub checkBox15_08_11Click(sender As Object, e As EventArgs) Handles checkBox15_08_11.Click checkBox15_08_11.Checked = Me.getControl(11) End Sub

Sub checkBox15_08_12Click(sender As Object, e As EventArgs) 处理 checkBox15_08_12.Click checkBox15_08_12.Checked = Me.getControl(12) End Sub

Sub checkBox15_08_13Click(sender As Object, e As EventArgs) 处理 checkBox15_08_13.Click checkBox15_08_13.Checked = Me.getControl(13) End Sub

Sub checkBox15_08_14Click(sender As Object, e As EventArgs) Handles checkBox15_08_14.Click checkBox15_08_14.Checked = Me.getControl(14) End Sub

Sub checkBox15_08_15Click(sender As Object, e As EventArgs) 处理 checkBox15_08_15.Click checkBox15_08_15.Checked = Me.getControl(15) End Sub

Sub checkBox15_08_16Click(sender As Object, e As EventArgs) 处理 checkBox15_08_16.Click checkBox15_08_16.Checked = Me.getControl(16) End Sub

Sub checkBox15_08_17Click(sender As Object, e As EventArgs) Handles checkBox15_08_17.Click checkBox15_08_17.Checked = Me.getControl(17) End Sub

Sub checkBox15_08_18Click(sender As Object, e As EventArgs) Handles checkBox15_08_18.Click checkBox15_08_18.Checked = Me.getControl(18) End Sub

Sub checkBox15_08_19Click(sender As Object, e As EventArgs) Handles checkBox15_08_19.Click checkBox15_08_19.Checked = Me.getControl(19) End Sub

Sub checkBox15_08_20Click(sender As Object, e As EventArgs) Handles checkBox15_08_20.Click checkBox15_08_20.Checked = Me.getControl(20) End Sub

Sub checkBox15_08_21Click(sender As Object, e As EventArgs) Handles checkBox15_08_21.Click checkBox15_08_21.Checked = Me.getControl(21) End Sub

Sub checkBox15_08_22Click(sender As Object, e As EventArgs) Handles checkBox15_08_22.Click checkBox15_08_22.Checked = Me.getControl(22) End Sub

Sub checkBox15_08_23Click(sender As Object, e As EventArgs) 处理 checkBox15_08_23.Click checkBox15_08_23.Checked = Me.getControl(23) End Sub Sub checkBox15_08_24Click(sender As Object, e As EventArgs) 处理 checkBox15_08_24.Click checkBox15_08_24.Checked = Me.getControl( 24) 结束子

Sub checkBox15_08_25Click(sender As Object, e As EventArgs) Handles checkBox15_08_25.Click checkBox15_08_25.Checked = Me.getControl(24) End Sub

Sub checkBox15_08_26Click(sender As Object, e As EventArgs) 处理 checkBox15_08_26.Click checkBox15_08_26.Checked = Me.getControl(26) End Sub Sub checkBox15_08_27Click(sender As Object, e As EventArgs) 处理 checkBox15_08_27.Click checkBox15_08_27.Checked = Me.getControl( 27) 结束子

Sub checkBox15_08_28Click(sender As Object, e As EventArgs) Handles checkBox15_08_28.Click checkBox15_08_28.Checked = Me.getControl(28) End Sub

Sub checkBox15_08_29Click(sender As Object, e As EventArgs) Handles checkBox15_08_29.Click checkBox15_08_29.Checked = Me.getControl(29) End Sub

Sub checkBox15_08_30Click(sender As Object, e As EventArgs) Handles checkBox15_08_30.Click checkBox15_08_30.Checked = Me.getControl(30) End Sub

函数 getControl(ByVal controlName As Integer) As Boolean

```
Dim txt_Name1 As String = "Hersteller15_" & Str(controlName)
Dim txt_Name2 As String = "Artikel15_" & Str(controlName)
Dim txt_Name3 As String = "Artikel_St_15_" & Str(controlName)
Dim CheckName As String = "checkBox15_08_" & Str(controlName) 
```

If CType(Me.panelCheckBox.Controls(CheckName.Replace(" ","")), CheckBox).Enabled = True Then

```
CType(Me.panelCheckBox.Controls(CheckName.Replace(" ","")), CheckBox).Enabled = False
MessageBox.Show(txt_Name1)

CType(Me.panelTextbox.Controls(txt_Name1.Replace(" ", "")), TextBox).Text = ""
CType(Me.panelTextbox.Controls(txt_Name2.Replace(" ", "")), TextBox).Text = ""
CType(Me.panelTextbox.Controls(txt_Name3.Replace(" ", "")), TextBox).Text = ""

End If 
```

返回假

结束功能

'如果没有命令 Replace(" ", "")) 就不能工作 '那必须调整！'Me.Controls(txt_Name1.Replace(" ", "")), TextBox).Text = "whatever" 'Me.panelCheckBox.Controls(txt_Name1.Replace(" ", "")), TextBox).Text = "不管什么”'Me.GroupBox1.Controls(txt_Name1.Replace(" ", "")), TextBox).Text = "whatever"

# python - Python 解释器作为共享库

> ID：10711847
> 
> 赞同：-1
> 
> 时间：2012-05-23T00:18:55.963
> 
> 标签：python, embed, shared-libraries

我想将 python 嵌入到我的应用程序中。如何从源代码编译 python 作为共享库（.dll 或 .so）？默认配置仅生成 python 可执行文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:21:16.683

> 默认配置仅生成 python 可执行文件。

不正确。“可执行文件”是共享库的一个非常薄的包装器，它设置解释器对象并运行它。他们在那里；看起来更努力。

# eclipse-plugin - Perforce eclipse 插件：“获取最新版本”和“与仓库同步”之间的区别

> ID：10711848
> 
> 赞同：13
> 
> 时间：2012-05-23T00:19:04.517
> 
> 标签：eclipse-plugin, perforce

我有一个关于 Perforce Eclipse 插件的问题，在项目（右键单击）> 团队下，有“获取最新版本”和“与仓库同步”，它们两者有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T14:40:25.080

*如果有更新的版本可用，获取最新版本*会从 Perforce 获取文件的更新副本。

*Synchronize with depot*向您展示了 Perforce 中可以带入项目的任何新内容的预览。这是*获取最新修订版*实际功能的有用预览。

还有*检查一致性*，它向您显示 Perforce 不知道的本地修改的任何内容，有点像*状态*命令。

我同意这些术语令人困惑，但我认为这些在某种程度上是 Eclipse 标准。 *例如，与仓库同步*会打开 Eclipse 的同步视图。

# java - Calendar.getInstance() 返回与当前不同的 DayOfWeek 和 Dates

> ID：10711850
> 
> 赞同：0
> 
> 时间：2012-05-23T00:19:36.853
> 
> 标签：java, calendar

我已经让日历类在我的应用程序中工作，但日历没有正确返回当前日期和时间。例如，从此类返回的日期比实际时间更早（我在美国东海岸，所以我使用 EST）

我希望日历返回 EST，而 Calendar.getInstance 似乎返回不同时区的时间/日期。

有谁知道如何将日历设置为美国东海岸 (EST) 的日期和时间？

（也适用于星期几，1 是星期日，2 是星期一，依此类推吗？这与当前的星期几不匹配。我想我可以安排数字并假设 1 是星期三，2 是星期四使工作日正确显示在我的 textView 中，但默认情况下 1 ~ 7 数字是什么意思？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:34:26.397

您可以在创建日历实例时设置时区。

```
Calendar c = Calendar.getInstance(TimeZone.getTimeZone("EST")); 
```

# rest - CF10 RESTful API 能做什么，而 Coldbox RESTful API 不能做什么？反之亦然？

> ID：10711851
> 
> 赞同：4
> 
> 时间：2012-05-23T00:19:39.163
> 
> 标签：rest, coldfusion, coldbox, coldfusion-10

刚开始研究一些 MVC JS 框架/库，他们中的大多数都期望一个 RESTful API 端点，这让我开始思考......我可以使用 CF10 做什么，而使用 CF9 + ColdBox RESTful 支持无法完成，反之亦然？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T08:55:21.670

Restful webservices 是一个标准的概念，所有的实现最终都遵循这些规范。已经有[Taffy](http://taffy.riaforge.org)、[Powernap](http://powernap.riaforge.org/)等框架和 ColdBox 3、Mach II 等框架可以帮助在 ColdFusion 中创建安静的服务。我他们在为用户提供的完整性和授权方面做得非常好。不同之处在于它们启用它的方式，它们如何让您创建服务。一些遵循惯例，其他配置使用自己的 DSL 等，并且在某种程度上他们提供的功能。

ColdFusion 10 具有原生的 restful web 服务支持。它带来的是：

1.  您可以使用自己对组件的理解，并将它们扩展为 RESTful Web 服务
2.  基于标准 JAX-RS
    *   大量支持/应用程序可用于扩展（测试/自动化）......
    *   没有实施偏见，广泛可用/可接受
3.  更好的性能
4.  更好的支持和文档
5.  更少的配置
6.  应用 WADL 已实现（类似 WSDL）
7.  完整的 JSON/XML 支持并且易于扩展

正如您将看到的那样，其中大部分是让语言“本机”可用的好处，而不是相对于功能的比较，这就是我们实现它的原因。IMO根本没有任何比较。我希望看到所有框架都利用本机可用功能并在其之上构建。

拇指规则应该是 CF10 之前使用任何适合您口味的，用例/CF10 发布后使用本机可用的或任何使用相同的框架。

警告：每个框架作者都会偏向于他们自己的，所以在你采取飞跃之前进行判断。

ps 我已经在 ColdFusion10 中实现了 Rest 支持 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:53:57.343

As rest cfc would generally just be a wrapper for your model, and if your model was already created with a cf framework like coldbox, you may be better of using the frameworks implementation of a ReSTful webservice .

If you are starting off from scratch, the newly added functionality in CF10 ( and Railo 4) will give you the infrastructure without the overhead of the application framework.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T01:23:34.440

优秀资源：[https ://github.com/atuttle/CF-REST-Comparison/tree/master/CF10](https://github.com/atuttle/CF-REST-Comparison/tree/master/CF10)

> **要求/怪癖**
> 
> *   所有远程方法都必须指定 returnType="..." （其中 ... 是要返回的类型）。
> *   不要忘记 `<cfargument/>`用于 URI 令牌参数的标签的 restArgSource。restArgSource 的默认值是 body，如果您尝试从 URI 获取值，它将不起作用。
> *   不支持特定于应用程序的映射。请改用 server-mappings 或完全限定的 cfc 路径。
> *   每当刷新服务时，我总是遵循以下工作流程： 从日志文件屏幕中删除“exception.log” 刷新 REST 服务 检查“exception.log”是否回来了。（如果是这样，请阅读并解决问题。）

# amazon-ec2 - 如何基于每个客户端 IP 配置 EC2 负载均衡器？

> ID：10711854
> 
> 赞同：2
> 
> 时间：2012-05-23T00:19:48.337
> 
> 标签：amazon-ec2, amazon-web-services, load-balancing

如果我知道连接到我的 EC2 实例的客户端将始终具有相同的静态 IP，是否可以配置 EC2 弹性负载均衡器以将特定客户端（基于其 IP）重定向到特定实例？

所以：

```
123.22.31.11 ----> always goes to instance A
123.22.31.12 ----> always goes to instance B
123.22.31.13 ----> always goes to instance C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:33:54.667

结合基于延迟的 Route 53 DNS 记录，您可以使用 ELB 做一些有趣的事情，但据我所知，没有办法根据传入的 IP 进行负载平衡。

一些相关文档：

[http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/using-domain-names-with-elb.html](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/using-domain-names-with-elb.html)

[http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/CreatingLatencyRRSets.html](http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/CreatingLatencyRRSets.html)

[http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/HowToLatencyRRS.html](http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/HowToLatencyRRS.html)

# c# - 确保您签名的 XML 由您签名

> ID：10711859
> 
> 赞同：0
> 
> 时间：2012-05-23T00:20:31.130
> 
> 标签：c#, xml, cryptography, code-signing, digital-signature

我想签署一个我创建的 XML 文件，并按照本教程进行签名：

[http://msdn.microsoft.com/en-us/library/ms229745.aspx](http://msdn.microsoft.com/en-us/library/ms229950.aspx)

我还阅读了有关验证文件的本教程：

[http://msdn.microsoft.com/en-us/library/ms229950.aspx](http://msdn.microsoft.com/en-us/library/ms229950.aspx)

我能够正确编译两者而没有问题，但我不明白的是，使用它我能够生成一个 XML 是如何产生的，它保证是来自而不是伪造的。

我的想法（这是错误的，需要更正）：我制作了一个 XML 并使用这些教程中的代码对其进行签名。我还可以使用该代码对其进行验证。没问题，它可以工作并检测我何时修改了 XML。但是，其他人怎么不能只从教程中获取代码，制作自己的 XML，然后自己签名，然后在我的程序中使用呢？验证程序不会仍然验证它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:41:43.007

您需要了解两条背景信息才能理解这些教程的工作原理。

*   [什么是加密哈希](http://en.wikipedia.org/wiki/Cryptographic_hash_function)？
*   [RSA 消息签名会发生什么](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Signing_messages)？

稍微阅读这些文章后，请看一下此图：

![数字签名图](../Images/f85d9701f07b2a2addec955b31b36130.png) 图取自维基百科（特别是，[here](http://en.wikipedia.org/wiki/File:Digital_Signature_diagram.svg)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:35:50.823

本教程使用[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)签名密钥：

```
signedXml.SigningKey = Key; 
```

该[链接](http://msdn.microsoft.com/en-us/library/ms229745.aspx)指出：

> 使用 RSACryptoServiceProvider 类生成非对称密钥。当您将 CspParameters 对象传递给 RSACryptoServiceProvider 类的构造函数时，密钥会自动保存到密钥容器中。

运行此示例时会创建一个新的 RSA 密钥，并将其存储在本地计算机上的密钥容器中。RSA 密钥包含一个用于签名的*私钥*和一个用于验证签名的公钥*。**公钥*可以分发给任何需要验证您的签名消息的人。*公钥*通常使用[证书打包和分发](http://en.wikipedia.org/wiki/X509_certificate)

假设您是唯一拥有*Private Key*的人，收件人拥有*Public Key*（并假设实施是安全的），如果没有验证步骤检测到篡改，任何人都无法篡改该签名文档。

运行相同示例的任何其他人都应生成一个新的唯一 RSA 密钥，该密钥不能用于签署您的*公钥*将验证的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:29:23.900

这两个链接都指向显示验证的文章。您将从阅读非对称密钥的工作原理中受益。当您对 XML 进行签名时，您使用您的私钥对其进行签名，只有您可以访问该私钥，并且只有您的公钥可供所有人使用才能解密。没有人，但您将拥有您的私钥。

# objective-c - 能够在模拟器上的应用程序中显示 jpg 图像，但不能在我的 iPod 上显示？

> ID：10711863
> 
> 赞同：0
> 
> 时间：2012-05-23T00:21:03.343
> 
> 标签：objective-c, xcode, cocoa-touch

不知道为什么我可以在模拟器中显示 jpg 图像，但当我将应用程序加载到我的 iPod 时却不能？

```
uiivHelp = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"memoryB.jpg"]];
[self.view addSubview:uiivHelp];

[uiivHelp sizeToFit];
uiivHelp.frame = CGRectMake(0, 0, 320, 400);//460
uiivHelp.hidden = NO; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:38:50.730

太棒了...模拟器不区分大小写，因为 iPod 对文件加载区分大小写... memoryB.jpg vs memoryB.JPG

# javascript - javascript可以将异步代码合并为一个函数吗？

> ID：10711868
> 
> 赞同：1
> 
> 时间：2012-05-23T00:21:37.117
> 
> 标签：javascript, asynchronous

在异步编程中，我们使用了很多回调，如下所示：

```
var running = function(){
    do_sth();
    $.post("/xxx", function(data){
        do_sth2();
        $.get("/ttt", function(data){
            do_sth3();
        }
    }
} 
```

我认为事情应该是这样的：

```
var running = do_async(function(){
    do_sth();
    var data = $.post("/xxx");
    do_sth2();
    data = $.get("/ttt");
    do_sth3();
}); 
```

我怎样才能做到这一点？

并且有一个项目：[https ://github.com/JeffreyZhao/jscex](https://github.com/JeffreyZhao/jscex)

而且我认为这个项目不是那么容易使用（实现是通过解析源代码）

也许在未来，我们对此有原生的 javascript 支持？

* * *

我对此做了一些研究，在这里找到了一些讨论和图书馆供参考：

[https://github.com/JeffreyZhao/jscex](https://github.com/JeffreyZhao/jscex)

推迟咖啡脚本 [https://github.com/jashkenas/coffee-script/issues/350](https://github.com/jashkenas/coffee-script/issues/350)

合并到coffeescript： [https ://github.com/jashkenas/coffee-script/issues/350](https://github.com/jashkenas/coffee-script/issues/350)

tamejs 库 [http://tamejs.org/](http://tamejs.org/)

stratifiedjs [http://onilabs.com/stratifiedjs](http://onilabs.com/stratifiedjs)

咖啡因 [http://weepy.github.com/kaffeine/](http://weepy.github.com/kaffeine/)

维基页面： [http ://en.wikipedia.org/wiki/Continuation-passing_style](http://en.wikipedia.org/wiki/Continuation-passing_style)

* * *

添加一个库来支持它并不是很容易，

也许在未来，javascript 会添加一个“defer”关键字。

* * *

同样的问题：[Pattern for wrapping an Asynchronous JavaScript function to make it synchronous](https://stackoverflow.com/questions/214491/pattern-for-wrapping-an-asynchronous-javascript-function-to-make-it-synchronous)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:47:32.990

你可以看看[Promises](http://en.wikipedia.org/wiki/Promise_%28programming%29)。有一些可用的实现，请参阅[commonjs.org](http://wiki.commonjs.org/wiki/Promises)。它们都允许链接，因此您可以按如下方式编写代码：

```
function running(){
    return do_sth()
       .then($.post.bind($, "/xxx"))
       .then(do_sth2)
       .then($.get.bind($, "/ttt"))
       .then(do_sth3);
    // returns a Promise to run all these tasks
    // ...or:  a Promise for the result of the last of the chained tasks
} 
```

如果你使用 jQuery，它已经内置了[延迟功能](http://api.jquery.com/category/deferred-object/)（虽然不是我最喜欢的 Promise 实现）：

```
function running(){
    do_sth();
    return $.post("/xxx")
      .then(do_sth2)
      .then(function(){ 
        $.get("/ttt")
          .then(do_sth3);
      });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T01:19:10.517

我相信您会理解这种异步回调行为是设计使然，而不是一些不幸的疏忽。这在 Node.js 社区中出现了很多（Node 使用类似的事件循环），并且已经基于纤维、线程等开发了许多替代方案。最近的一些讨论在[这里](https://groups.google.com/d/topic/nodejs/JpMXLJbef1k/discussion)和[这里](https://groups.google.com/d/topic/nodejs/AiBJFuBMPls/discussion)，这也涵盖了其中一些替代方案。

**编辑： Node 论坛上关于异步库的** [另一个主题](https://groups.google.com/d/topic/nodejs/0yXj-hG_tco/discussion)，包括对

*   [async](https://github.com/caolan/async) - 异步控制流，一些功能性糖
*   [after](https://github.com/Raynos/after.js) - 异步控制流，一些功能性糖
*   [step](https://github.com/creationix/step/) - 简单的流控制

一些贡献者编写了这些/已经编写了其他流控制库，我绝对发现它值得一试。

我最近读过的其他东西

*   关于 JS 异步模式和[幻灯片](http://raynos.github.com/presentation/shower/controlflow.htm)的[Quora 问题](http://www.quora.com/JavaScript/What-are-known-JavaScript-design-patterns-for-asynchronous-programming)
*   一个[很好的采访和](http://www.infoq.com/articles/surviving-asynchronous-programming-in-javascript)几个流控制库的概述
*   Bruno Jouhier[对 Node 中的线程和纤维](http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/)的讨论，包括[node-fibers](https://github.com/laverdet/node-fibers)和[threads-a-gogo](https://github.com/xk/node-threads-a-gogo)

不过，我不确定这是一条我会走的路线，除非您对这种行为有特定需求（例如，@MaxArt 提到的浏览器中的工作人员，或者您的代码特别适合多线程（等等）。 ) 模型），因为这些解决方案中的大多数实际上都是下面的单线程循环。您可以通过传递/调用命名函数来避免过多讨厌的嵌套，例如

```
function a() {
  somethingAsync(function (val) { b(val); });
}

function b(val) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T00:28:25.977

回调是 Javascript 的重要组成部分。Javascript 旨在利用它们。我认为我们永远不会得到某种“同步器”。相反，我们正在获得越来越多的工具来异步执行操作，例如`Worker`s.

如果你对所有这些回调感到困惑，你最好尽快习惯它们。你会没事的，相信我。

无论如何，AJAX 请求可以同步完成，但请记住，这会暂停脚本的执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T01:45:49.340

由于 JavaScript 完全是单线程的，因此您绝对无法同步异步代码。

我建议你练习以掌握事情的窍门。也许你可以试试这个`setTimeout`功能。给它一个回调，也许让它显示`"Hello, World!"`在控制台上。此外，将数字 0 作为最后一个参数传入。

然而，话虽如此，您可以在库的帮助下“美化”异步代码。

有一个特别是我最喜欢的。它被称为 async.js。我一直使用它来保持深度嵌套的异步调用看起来更加同步（即 MongoDB 查询）。

```
async.waterfall([

  // Call to the first asynchronous call...
  function (callback) {
    setTimeout(function () {
      callback(null, "Hello, World!");
    }, 0);
  },

  // That needs to make another...
  function (callback, message) {
    console.log(message);
    setTimeout(function () {
      callback(null, "It's a nice day!");
    }, 0);
  },

  // Another...
  function (callback, message) {
    console.log(message);
    setTimeout(function () {
      callback(null, "Bye, now!");
    }, 0);
  },

  // And another.
  function (callback, message) {
    console.log(message);
  }

]);

// Without making the entire thing hopelessly nested deeply. 
```

# ruby-on-rails-3 - 无法在第 21 行第 0 列解析 YAML

> ID：10711871
> 
> 赞同：1
> 
> 时间：2012-05-23T00:21:42.190
> 
> 标签：ruby-on-rails-3, yaml

我正在尝试让 pg gem 在应用程序中工作。我已经在我的系统 MAC OSx Lion 上成功安装了 postgresql，我假设 /config/database.yml 是有问题的文件，因为我一直在破解它以获取数据库连接集，但它不起作用以前但现在是这样，我认为 database.yml 文件存在一些问题。在旁注中，我知道 posgresql 正在工作，因为我可以创建数据库，但我无法进入 rails db 控制台，错误如下

```
 development:
  adapter: postgresql
  encoding: unicode
  database: dbc2_development
  pool: 5
  username: dbc2
  password: password
  host: localhost
  port: 5432

  test:
  adapter: postgresql
  encoding: unicode
  database: dbc2_test
  pool: 5
  username: dbc2
  password: password
  host: localhost
  port: 5432 
```

当我尝试运行 rake db:create:all 时，我遇到了打击错误问题

```
rake aborted! (<unknown>): couldn't parse YAML at line 21 column 0 
```

我可以添加哪些其他细节以使其相关？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:56:42.143

我遇到了和你一样的问题。我关注了这条评论[https://groups.google.com/d/msg/spree-user/HitmdVxaYgI/Zepkg3wvSwkJ](https://groups.google.com/d/msg/spree-user/HitmdVxaYgI/Zepkg3wvSwkJ)并解决了我的问题

> `boot.rb`在我的文件顶部设置了另一个 YAML 解析器：
> 
> ```
> require 'yaml' 
> YAML::ENGINE.yamler= 'syck' 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T18:04:09.873

我尝试了此修复程序，但“syck”对复杂的 YAML 文件产生了错误的结果。我发现安装最新的 libyaml 修复了原始问题，没有任何错误。见[http://pyyaml.org/wiki/LibYAML](http://pyyaml.org/wiki/LibYAML)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T04:00:29.110

尝试将适当的制表符放在变量前面。

# c# - 传播更改通知的复合视图模型

> ID：10711873
> 
> 赞同：2
> 
> 时间：2012-05-23T00:22:00.893
> 
> 标签：c#, mvvm, inotifypropertychanged

我有一个名为**OperatingViewModel**的视图模型，其中包含对**LevelAListViewModel**的引用。每个级别视图模型都代表底层模型中的层次结构。**我的问题是，通知OperatingViewModel**任何 Level[*]ViewModels 更改的最佳方式是什么？

我已经尝试在父级中收听**PropertyChanged**事件，效果很好，但看起来不是很干净。

我还尝试将父级作为对子级的引用传递，然后调用一个方法，然后在链上调用它的父级，但同样，这似乎也很糟糕。

```
class OperatingViewModel : INotifyPropertyChanged
{
   LevelAListViewModel LevelACollection { get; set; }
}

class LevelAListViewModel : INotifyPropertyChanged
{
   LevelAList _model;
   LevelBListViewModel LevelBListViewModel { get; set; }
}

class LevelAViewModel : INotifyPropertyChanged
{
   LevelB _model;
   LevelBListViewModel LevelBListViewModel { get; set; }
}

class LevelBListViewModel : INotifyPropertyChanged
{
   LevelBList _model;
   ObservableCollection<LevelBViewModel> LevelBCollection { get; set; }
}

class LevelBViewModel : INotifyPropertyChanged
{
   LevelB _model;
   LevelCListViewModel LevelCListViewModel { get; set; }
}

class LevelCListViewModel : INotifyPropertyChanged
{
   LevelCList _model;
   ObservableCollection<LevelCViewModel> LevelCCollection { get; set; }
}

class LevelCViewModel : INotifyPropertyChanged
{
   LevelC _model;
   LevelDListViewModel LevelDListViewModel { get; set; }

   DateTime StartDate
   { 
       get { return _model.StartDate } 
       set 
       { 
           _model.StartDate = value; 
           OnPropertyChanged("StartDate"); 
       } 
   }

   DateTime EndDate 
   { 
       get { return _model.EndDate } 
       set 
       { 
           _model.EndDate = value;
           OnPropertyChanged("EndDate"); 
       } 
   }
}

class LevelDListViewModel : INotifyPropertyChanged
{
   LevelD _model;
   ObservableCollection<LevelDViewModel> LevelDCollection { get; set; }
}

class LevelDViewModel : INotifyPropertyChanged
{
   LevelD _model;    
   int Price
   { 
       get { return _model.Price} 
       set 
       { 
           _model.Price = value; 
           OnPropertyChanged("Price"); 
       } 
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:12:57.610

执行此操作的四种最常见方法是：

1.  监听孩子的 PropertyChanged 事件
2.  传递对父级的引用，然后在父级上调用方法
3.  将 lambda 传递给调用父级方法的子级
4.  使用松散耦合的 EventAggregator 在子级中发布 PropertyChanged 事件，父级订阅该事件。有关示例，请参见 Prism 的 EventAggregator。

我通常会选择 1 或 3，始终牢记两者都可能由于强引用而导致内存泄漏。如果父级实际上有对子级的引用，则 4 是矫枉过正的。

# objective-c - 为什么 removeObject 在删除空字符串的元素时会抛出异常？

> ID：10711876
> 
> 赞同：0
> 
> 时间：2012-05-23T00:22:14.233
> 
> 标签：objective-c, nsmutablearray

我正在尝试使用以下命令从包含 SPACE 的 NSMutableArray 对象中删除任何元素：

```
[searchCriteria removeObject:[NSString stringWithString:@" "]]; 
```

我收到异常“-[__NSArrayI removeObject:]: unrecognized selector sent to instance”。我究竟做错了什么？

编辑：好的，所以我尝试了以下

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"SELF NOT CONTAINS ' '"];
NSArray *nonEmptyElements = [searchCriteria filteredArrayUsingPredicate: predicate]; 
```

并得到错误 Unable to parse the format string "SELF NOT CONTAINS ' '"'

如何在 CONTAINS 之后指定一个空字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T00:57:49.000

你有一个普通的 NSArray 而不是 NSMutableArray。可能在某个时候，您认为您拥有的 NSMutableArray 被复制或序列化，从而产生了一个不可变数组。

顺便说一句，正如 Lefteris 所说，这将过滤掉仅包含单个空格的字符串。要过滤掉任何在其中有空格的字符串，您需要按照他所说的方式进行操作。而且，如果您确实想过滤掉单空格字符串，那么只需编写`@" "`而不是更简单`[NSString stringWithString:@" "]`- 它完全等效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:41:08.263

您应该使用 NSPredicate 过滤掉任何带有空格的项目。请参阅此处如何执行此操作：[https ://stackoverflow.com/a/1057202/312312](https://stackoverflow.com/a/1057202/312312)

不过，您应该使用 self contains 谓词，而不是示例使用的 self 开头。l

# c# - C# Parallel.For

> ID：10711882
> 
> 赞同：1
> 
> 时间：2012-05-23T00:22:53.827
> 
> 标签：c#, parallel-for

无论如何增加 Parallel.For 启动后将执行的循环数？下面的例子：

```
var start = 0;
var end = 5;
Parallel.For(start, end, i =>
{
    Console.WriteLine(i);
    end = 10;
}); 
```

谢谢你的帮助。

周杰伦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T00:31:14.787

不，该`end`变量（`toExclusive` [在文档中](http://msdn.microsoft.com/en-us/library/dd783299.aspx)列出）在 lambda 范围内不可用。

# sql - SQL 语句从提供的字符串的开头截断字段？

> ID：10711886
> 
> 赞同：2
> 
> 时间：2012-05-23T00:23:15.917
> 
> 标签：sql, sql-server

我在 SQL 中有一个大表；一个字段包含用户名，后面通常是我需要去掉的各种东西以获得他们的“普通”名称（不要问！）例如：

```
<pre>Mark Johnson
Joe Bloggs (DO NOT USE)
Mick Bronson (refer Jim Bloggs)
Jan Morrison
Jemima Thomson refer Joe harrison
Glen Grabs-Moffat try harry 
```

有大约 20 种后缀。我想创建一个 UPDATE 查询（我猜可能是 20），它将“修剪”我提供的字符串开头的值，例如“（DO”或“（ref”）以获取“Joe Bloggs”，只有没有后缀。最好是不区分大小写的。

有任何想法吗？

谢谢

编辑：

我使用的代码如下所示：

```
for (int count = 0; count < ExpenseItems.Count; count++)
            {
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("(DO NOT").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("(DON'T").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("(DONT ").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("(DONOT").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" DO NOT").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" DON'T").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" DONT ").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" DONOT").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("(pls").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("(please").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" pls").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" please").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("(refer").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" refer").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" (Re").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" (ref to").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" ref to").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" (refto").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" refto").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" use ").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" try ").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("(see ").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" see ").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf("director").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" never ").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.TruncateFromStartOf(" moved").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.Replace("DISABLED", "(D)").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.Replace("disabled", "(D)").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.Replace("Disabled", "(D)").Trim();
                ExpenseItems[count].Requester_Name = ExpenseItems[count].Requester_Name.Replace("DISALBED", "(D)").Trim();
            } 
```

截断执行它在锡上所说的：

```
 public static string TruncateFromStartOf(this string input, string splitString, bool caseSensitive = false, int offset = 0)
    {
        //Verify input
        if (string.IsNullOrEmpty(input))
            return string.Empty;

        if (string.IsNullOrEmpty(splitString))
            return input;

        int segmentIndex = -1;
        //the start of the segment in the input string
        if (caseSensitive)
        {
            segmentIndex = input.IndexOf(splitString, StringComparison.Ordinal);
        }
        else
        {
            segmentIndex = input.ToLower().IndexOf(splitString.ToLower(), StringComparison.Ordinal);
        }

        if (segmentIndex == -1)
            return input; //nothing to remove

        //Return the parts around the segment
        return input.Substring(0, segmentIndex + offset);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:53:15.583

将您的排除词放在一个表中，而不是将它们存储在代码中：

```
CREATE TABLE dbo.TruncationWords
(
       Word VARCHAR(32) NOT NULL UNIQUE
);

INSERT dbo.TruncationWords(Word) 
SELECT '(DO NOT'
UNION ALL SELECT '(DON''T'
UNION ALL SELECT '(DONT'
UNION ALL SELECT '(DONOT'
UNION ALL SELECT 'DO NOT'
UNION ALL SELECT 'DON''T'
UNION ALL SELECT 'DONT'
UNION ALL SELECT 'DONOT'
UNION ALL SELECT '(pls'
UNION ALL SELECT '(please'
UNION ALL SELECT 'pls'
UNION ALL SELECT 'please'
UNION ALL SELECT '(refer'
UNION ALL SELECT 'refer'
UNION ALL SELECT '(Re'
UNION ALL SELECT '(ref to'
UNION ALL SELECT 'ref to'
UNION ALL SELECT '(refto'
UNION ALL SELECT 'refto'
UNION ALL SELECT 'use'
UNION ALL SELECT 'try'
UNION ALL SELECT '(see'
UNION ALL SELECT 'see'
UNION ALL SELECT 'director'
UNION ALL SELECT 'never'
UNION ALL SELECT 'moved'
UNION ALL SELECT 'disabled'; 
```

现在，您可以轻松地将这些词与任何表格/列交叉引用。例如：

```
DECLARE @t TABLE (Name VARCHAR(255));

INSERT @t SELECT 'Mark Johnson'
UNION ALL SELECT 'Joe Bloggs (DO NOT USE)'
UNION ALL SELECT 'Mick Bronson (refer Jim Bloggs)'
UNION ALL SELECT 'Jan Morrison'
UNION ALL SELECT 'Jemima Thomson refer Joe harrison'
UNION ALL SELECT 'Glen Grabs-Moffat try harry'
UNION ALL SELECT 'Can''t touch this';

;WITH x AS
(
  SELECT 
    t.Name, 
    Trunc = LEFT(t.Name, CHARINDEX(' ' + w.Word, t.Name)),
    rn = ROW_NUMBER() OVER (PARTITION BY t.Name ORDER BY CHARINDEX(' ' + w.Word, t.Name))
   FROM @t AS t
   INNER JOIN dbo.TruncationWords AS w
   ON CHARINDEX(' ' + w.Word, t.Name) > 0
)
UPDATE src
  SET src.Name = x.Trunc
  FROM @t AS src
  INNER JOIN x 
  ON src.Name = x.Name
  WHERE x.rn = 1;

SELECT Name FROM @t; 
```

结果：

```
Name
--------------------------
Mark Johnson
Joe Bloggs
Mick Bronson
Jan Morrison
Jemima Thomson
Glen Grabs-Moffat
Can't touch this 
```

这个解决方案做了两个假设：

1.  您要截断的单词始终用空格分隔。
2.  排序规则不区分大小写。您可以使用该[`COLLATE`](http://msdn.microsoft.com/en-us/library/ms184391.aspx)子句来解决此问题。

我也认为像这样的词`'see'`是有问题的。如果有人有名字`'John Seek'`怎么办？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:58:34.837

尝试这个：

```
UPDATE tableName
   SET fieldName = RTRIM((CASE
                       WHEN CHARINDEX('(', NameList) = 0
                       THEN NameList
                       ELSE SUBSTRING(NameList, 1, CHARINDEX('(', NameList) - 1)
                     END)) 
```

**更新 1**

[](http://sqlfiddle.com/#!3/a33e5/4)**有关将用于更新[的示例 SELECT 语句，请](http://sqlfiddle.com/#!3/a33e5/4)[**参见 SQLFIDDLE 。**](http://sqlfiddle.com/#!3/a33e5/4)**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:53:23.440

假设您所有的后缀都以`(`. 你可以这样做：

```
Update SOMETABLE
   SET the_name_field = LEFT(the_name_field, CharIndex('(', the_name_field)-1 )
 Where [conditions are met]
; 
```**

# javascript - jQuery/Javascript 不能在我的服务器上运行，只能在本地机器上运行

> ID：10711889
> 
> 赞同：1
> 
> 时间：2012-05-23T00:23:35.150
> 
> 标签：javascript, jquery, html

我已经看到列出了很多这样的问题，但没有一个真正回答了这些问题。我在本地机器上做了一个词云，它就像一个魅力。我将它加载到服务器上，现在脚本将无法运行。我认为这可能与 src 链接有关，但我什至将完整路径放在那里，但这根本没有帮助。

这是我页面的链接：www.johnverber.com/wordcloud/wordcloud.html

任何想法或其他方式将不胜感激。以下是我的脚本链接的代码：

```
<link REL = "stylesheet" type = "text/css" href="styles.css">
    <script type="text/javascript"  src =     "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript"  src = "www.johnverber.com/home/johnverb/public_html/wordcloud/jquery.js"></script>
<script type="text/javascript"  src = "www.johnverber.com/home/johnverb/public_html/wordcloud/tagtools.js"></script>
<script type="text/javascript"  src = "www.johnverber.com/home/johnverb/public_html/wordcloud/openDocTools.js"></script>
<script type="text/javascript"  src = "www.johnverber.com/home/johnverb/public_html/wordcloud/executeTag.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:25:44.763

你需要让你的路径绝对。`http://`在所有脚本路径之前添加。服务器似乎也缺少大多数（如果不是全部）脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:26:40.890

查看浏览器中的 net 选项卡，您会发现您的 url 是错误的。

```
GET http://www.johnverber.com/wordcloud/www.johnverber.com/home/johnverb/public_html/wordcloud/jquery.js 404 (Not Found) wordcloud.html:6
GET http://www.johnverber.com/wordcloud/www.johnverber.com/home/johnverb/public_html/wordcloud/tagtools.js 404 (Not Found) wordcloud.html:6
GET http://www.johnverber.com/wordcloud/www.johnverber.com/home/johnverb/public_html/wordcloud/openDocTools.js 404 (Not Found) wordcloud.html:6
GET http://www.johnverber.com/wordcloud/www.johnverber.com/home/johnverb/public_html/wordcloud/executeTag.js 404 (Not Found) wordcloud.html:6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T00:27:21.593

您的脚本路径错误，请删除该`home/johnverb/public_html/`部分并包含协议，即`http://`如果您使用的是绝对路径

```
http://www.johnverber.com/wordcloud/jquery.js
http://www.johnverber.com/wordcloud/openDocTools.js
http://www.johnverber.com/wordcloud/executeTag.js
http://www.johnverber.com/wordcloud/tagtools.js[404 not found] 
```

# ruby-on-rails - Rails bootstrap：嵌套形式的 2 列

> ID：10711890
> 
> 赞同：0
> 
> 时间：2012-05-23T00:23:40.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, simple-form

我正在尝试在 2 列上表示嵌套表单。我正在使用 simple_form 和nested_form。问题是当我关闭第一列时，link_to_add 不起作用。这是我的看法：

```
<div class="row">
  <div class="span4">
    <%= simple_nested_form_for @object1, :html => { :class => 'form-vertical' } do |f| %>
      <%= f.input_field :name %>
      </div> <!-- This div is to close the first column -->
      <div class="span8">
      <%= f.link_to_add "Add a object2", :object2, :class => 'btn-primary' %>
      <%= f.simple_fields_for :object2,:html => { :class => 'span8 form-inline' } do |s| %>
        <%= s.input_field :name %>
      <% end %>
    <% end %> 
```

我愿意对要使用的插件进行任何更改。我只需要用两个以上的嵌套对象来表示一个嵌套表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:04:19.097

你错过了很多关闭的div。我不确定这段代码，但试试这个：

```
<%= simple_nested_form_for @object1, :html => { :class => 'form-vertical' } do |f| %>
  <div class="row">
    <div class="span4">
      <%= f.input :name %>
    </div>
    <div class="span8">
      <%= f.link_to_add "Add a object2", :object2, :class => 'btn btn-primary' %>
      <%= f.simple_fields_for :object2, :html => { :class => 'form-vertical' } do |s| %>
        <%= s.input :name %>
      <% end %>
    </div>
  </div>
  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

我也可以推荐类似于nested_forms：[https](https://github.com/nathanvda/cocoon) ://github.com/nathanvda/cocoon 。它得到了更多的维护。

# php - 呈现的html上的PHP子字符串和奇怪的图标

> ID：10711891
> 
> 赞同：6
> 
> 时间：2012-05-23T00:23:42.563
> 
> 标签：php, string, substring

我真的不知道为什么在西里尔字体上，子字符串用“？”替换一些字符

我的代码

```
$string1 = get_the_content();
$string = strip_tags($string1);
$stringcutted = substr($string,0,150);
$replacement = "...";
$final = substr($stringcutted, 0, -3).$replacement; 
```

看看它是如何在 html 上呈现的

![奇怪的图标1](../Images/cac3958ba090041fe71c0699b60702f9.png) ![奇怪的图标2](../Images/dc28d8d1e12f1080ad3613abab913568.png)

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:57:21.503

因为 PHP 的字符串函数是基于字节串的；他们对字符编码一无所知。所以在 UTF-8 之类的东西中，一个字符可以占用一个以上的字节，它不能按照你想要的方式工作：

```
<?php 
 $x = 'Подмосковные вечера';
 print(strlen($x)."\n");        # 37, not 19
 print(substr($x,0,1)."\n");    # �, not П
 print(substr($x,0,2)."\n");    # П, not По
?> 
```

如果要操作非 ASCII 文本，请查看[多字节字符串函数。](http://php.net/manual/en/ref.mbstring.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:50:00.497

您需要检查字符编码。基本上，您有一个以一种格式编码的字符串，并且您正在以另一种格式输出它。

对于国际内容（看起来您正在这样做），那么我将使用 UTF-8：-在您的 HTML 文件中添加头部（靠近顶部）-在您的 PHP 中，确保您将所有字符串处理为UTF-8 - 如果您还有一个数据库，请确保数据库、表和字段都配置为 UTF-8（警告：进行此更改可能会在没有导入/导出的情况下损坏现有数据！）。- 如果您正在阅读带有特殊字符的模板文件，还要确保它们是 UTF-8。（如果没有特殊字符，那么普通的 AscII 就可以了）

这就是简单的答案。有很多关于字符编码的内容 - 只需谷歌一下。

（替代解决方案，使用 ASCII，但将所有内容都转换为网络友好的字符代码。但是要正确获取所有代码更棘手，尤其是在处理用户输入时。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:52:26.383

您必须手动定义字符集。使用 mb_substr()。它应该有帮助。 [http://php.net/manual/en/function.mb-substr.php](http://php.net/manual/en/function.mb-substr.php)

# ravendb - 为什么 Raven/AnonymousUserAccessMode value="Get"？

> ID：10711893
> 
> 赞同：2
> 
> 时间：2012-05-23T00:23:59.270
> 
> 标签：ravendb

我试图了解通过设置 Raven/AnonymousUserAccessMode 值 =“Get”可以实现什么。如果该值设置为 "Get" ，这意味着匿名用户将只能使用 HTTP Get 获取数据。如果我有一个允许未注册用户在我的网站上提交反馈的网页怎么办？“获取”值是否会限制他们这样做？我应该将值更改为“全部”吗？？？

我问的原因是因为当值为“获取”时我无法保存示例文档。我的 Web 应用程序抛出“远程服务器返回错误：(403) Forbidden。” 错误。为了解决这个错误，我需要将“Raven/AnonymousUserAccessMode”设置为“All”。将值设置为 "All" 是否安全？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:32:58.653

我想我找到了答案。我可以将 Raven/AnonymousUserAccessMode 设置为“All”。我的数据库无法被外界访问，因为我的 8080 端口被防火墙了。

# magento - Magento 取消订单日志

> ID：10711895
> 
> 赞同：1
> 
> 时间：2012-05-23T00:24:07.757
> 
> 标签：magento

我们有多个用户在线管理客户订单。我需要一种方法来跟踪谁使用管理员取消了特定订单。有没有办法做到这一点？

我们正在使用 Magento Enterprise。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:21:33.357

Magento EE ^*有一个内置的功能`Admin Actions Logs`需要这种东西。

调用`Admin Actions Logs -> Report`，然后只需`adminhtml_sales_order_cancel`在“完整操作名称”过滤器框中键入并点击`Enter`键。给你^^

* * *

^(* 至少 EE 1.11（及更高版本）。不过，我不知道它最初是在哪个版本的 EE 中实现的。)

# scala - 使用 Actor 时在哪里定义案例类

> ID：10711897
> 
> 赞同：3
> 
> 时间：2012-05-23T00:24:20.703
> 
> 标签：scala, actor

我正在迈出第一步`scala`。

我创建了一个`PhotosLoaderActor`负责下载图像并将其保存到缓存中的程序。为此，我将拥有 a`CacheActor`和 a `DownloadActor`。

我的`PhotosLoaderActor`有这个：

```
override def act() {
  loop {
    react {
      case (caller : Actor, photoToLoad:String) => { // bla bla } 
```

我刚刚了解到我可以使用`case classes`这样的东西：

```
case class LoadImage(caller: Actor, photoToLoad: String)
override def act() {
  loop {
    react {
      case LoadImage(caller, photoToLoad) => { // bla bla } 
```

我的问题是：

我应该在哪里定义`case classes`？如果我`PhotosLoaderActor`从不同的包中调用，导入演员也会导入`case classes`? 哪个是最佳实践？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T02:17:30.183

我尝试了几种不同的方法，并决定将所有相关消息放入一个对象中，通常命名为 XyzProtocol 之类的东西。

例如：

```
object PhotoProtocol {
  case class LoadImage(caller: Actor, photoToLoad: String)
  case class UpdateCache(photoToLoad: String, photo: Photo)
  case object ClearCache
} 
```

我喜欢这种方法有几个原因：

1.  在 IDE 或 ScalaDoc 中扫描包含的包，仅显示 1 个或几个 XyzProtocol 对象，而不是散布着数十条消息。

2.  如果处理消息所需的参与者数量随时间变化（例如，引入参与者池或间接到另一个参与者子树），则消息不会受到影响。

3.  没有意外捕获参与者实例，就像在参与者类中定义案例类时那样。这种意外捕获足以让我永远不要在 actor 类中定义案例类。

注意：如果消息纯粹是一个actor的内部实现细节（例如，一个自己发送给自己的内部信号），我在actor类的伴生对象中定义消息。

PS。我还建议从标准库参与者迁移到 Akka。Akka 将被添加到 Scala 2.10 发行版中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T01:21:50.007

我经常将它们定义在使用它们的演员之上。或者如果多个参与者将在同一案例上匹配，则在专用于这些案例类的文件中。

```
package org.numbers
import akka.actor.Actor

sealed trait Numbers
case class Even(n: Int) extends Numbers
case class Odd(n: Int) extends Numbers

class NumberActor extends Actor {
  def receive = {
    case Even(n) => doEven(n)
    case Odd(n) => doOdd(n)
  }

  def doEven = ...
  def doOdd = ...
} 
```

使用 akka 而不是 scala 演员，但无论哪种方式。这样，导入包含 actor 的包也将导入可以发送给该 actor 的消息。如果案例类是在参与者“内部”定义的，那么其他想要向该参与者发送消息的类将无法使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T01:34:41.920

如果 Actor 是一个单例对象，那么我可能会将它放在对象本身中。

# java - 用于验证中缀并将中缀转换为前缀/后缀表示法的标准 java 库？

> ID：10711898
> 
> 赞同：-2
> 
> 时间：2012-05-23T00:24:22.640
> 
> 标签：java, parsing, infix-notation, postfix-notation, polish

是否有任何 java 实用程序来验证和/或将中缀转换为前缀/后缀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T00:26:18.613

仅仅为此而建立的库可能被视为矫枉过正。或者，正如[Louis Wasserman](https://stackoverflow.com/users/869736/louis-wasserman)所指出的，这不是一种常见的需求。

# css - 使用 CSS 创建柱状条（如图表）

> ID：10711900
> 
> 赞同：0
> 
> 时间：2012-05-23T00:24:33.637
> 
> 标签：css

我不是 CSS 专家。有人可以帮助是否可以使用纯 CSS 创建如下所示的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:55:45.723

当考虑描述时，这将成为一个更难的问题。这些条相对容易，并且可以使用一些语义标记来构建（尽管这可能会得到改进）：

```
<ul class="graph">

  <li class="height10">
    <h1>Category 1</h1>
    <div>
      <h2>Subtitle</h2>
      <p>More text</p>
    </div>
  </li>

  <li class="height9">
    <h1>Category 2</h1>
    <div>
      <h2>Subtitle</h2>
      <p>More text</p>
    </div>
  </li>

</ul> 
```

还有款式，

```
.height10 { height: 300px; }
.height9 { height: 270px }
/** add more through height1 **/

h1, h2, p { margin: 0; padding: 0; }
h1 { margin: 0.5em; }

li {
  margin-right: 0.5em;
  display: inline-block;
  background: #9f9;
  position: relative;
  vertical-align: bottom;
}

li div {
  margin: 1em;
  position: absolute;
  left: 0; bottom: 0;
} 
```

这是一个工作演示：http: [//jsbin.com/obexew](http://jsbin.com/obexew)

我添加了几个示例类，假设比例从 1 到 10，尽管手动将高度设置为内联样式或将其设置为数据属性并使用 JavaScript 更新高度可能更实用。我会留给你去弄清楚和决定。

将描述与栏保持在同一元素中可能会很棘手，因为它会造成列与每列中的任意点对齐的情况。无需更多地使用它，我将创建一个单独的描述列表，并对其进行样式设置，使其放置在图表下方，如下所示：

```
<ul class="graph bars">
    <li><!-- stuff here --></li>
</ul>

<ul class="graph descriptions">
    <li><!-- description here --></li>
</ul> 
```

然后修改样式，以便在 中应用颜色和位置`.bars`，还应用固定的 to`.graph li`来对齐条和描述。

复杂性完全取决于您希望布局的灵活性。我建议您深入了解您可以实现的目标，并使用选择器和规则，直到您获得所需的效果。我故意在其中一些点上含糊其辞，以便您有机会了解哪些有效，哪些无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:43:13.950

假设列可以是固定高度，您可以这样编码：http: [//jsfiddle.net/8S5xC/](http://jsfiddle.net/8S5xC/)

```
<style type="text/css">

.col {
    width: 100px;
    float: left;
    background: grey;
    margin-right: 10px;
    padding: 20px;
    position: relative;
}

.col.one {
    height: 200px;
}

.col.two {
    height: 180px;
    margin-top: 20px;
}

.col p.mid {
    position: absolute;
    bottom: 40px;
    border-bottom: 1px solid white;
    padding-bottom: 10px;
}
.col p.bottom {
    position: absolute;
    bottom: 10px;
}
</style>

<div class="col one">
    <p class="top">some text here</p>
    <p class="mid">some text here</p>
    <p class="bottom">some text here</p>
</div>
<div class="col two">
    <p class="top">some text here</p>
    <p class="mid">some text here</p>
    <p class="bottom">some text here</p>
</div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:46:27.877

也许这会给你一些想法： http: [//matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm](http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm) 我通常只使用 div 并通过 css 和/或 javascript 控制它们，这取决于你的列是否是动态的或静态的。更漂亮的方法是 SVG，为此可以在以下位置找到一个整洁的库： http: [//g.raphaeljs.com/](http://g.raphaeljs.com/)

祝你今天过得愉快！

# asp.net-mvc - ASP.NET MVC 4 - Twitter 引导渲染问题

> ID：10711905
> 
> 赞同：2
> 
> 时间：2012-05-23T00:25:58.270
> 
> 标签：asp.net-mvc, twitter-bootstrap, asp.net-mvc-4

我在 MVC 4 项目中使用 Twitter 的 Bootstrap，它基本上可以工作，但是样式已关闭。例如，这是一个弹出框的样子：

![在此处输入图像描述](../Images/58c76a9d316df9c2959ac650947aca13.png)

但是，按钮呈现不正确：

![在此处输入图像描述](../Images/5985b72e2049b4fc027a5aaf6cbf42c6.png)

并且弹出箭头未正确对齐：

![在此处输入图像描述](../Images/25d9c27c24b41487ae399961b3c9f25e.png)

对可能发生的事情有任何想法吗？这是我的 .cshtml 文件：

```
<link href="@Url.Content("~/Content/bootstrap.css")" rel="stylesheet" type="text/css"/>
<script src="@Url.Content("~/Scripts/bootstrap.js")"></script>

<div class="well">  
<a href="#" id="example" class="btn btn-danger" rel="popover" data-original-title="Twitter Bootstrap Popover">hover for popover</a>  
</div>  

<script>
    $(function () {
        $("#example").popover();
    });  
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:39:57.753

找到了答案.. 这是由于 CSS 与默认 Site.css 文件冲突。 `body`有一个 10 px 的顶部边框，这导致了弹出框的错位另外，我更改`<a`为 a`<button`并且按钮正确呈现。

# javascript - 使用 Kineticjs 查找可拖动形状的填充颜色

> ID：10711910
> 
> 赞同：0
> 
> 时间：2012-05-23T00:26:56.053
> 
> 标签：javascript, kineticjs

`dragend`我有两个不同颜色的圆圈，一旦用户使用事件放开对象，我想获得拖动圆圈的填充颜色。

```
shapes = new Kinetic.Layer();

circle1 = new Kinetic.Circle({
   x: stage.getWidth() / 3.2,
   y: stage.getHeight() / 3.2,
   radius: radius,
   fill: "blue",
   stroke: "black",
   strokeWidth: 4,
   name: "circle",
   draggable: true
});  

circle2 = new Kinetic.Circle({
   x: stage.getWidth() / 1.5,
   y: stage.getHeight() / 1.4,
   radius: radius,
   fill: "yellow",
   stroke: "black",
   strokeWidth: 4,
   name: "circle",
   draggable: true
 });  

 shapes.add(circle1);
 shapes.add(circle2);
 stage.add(shapes); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:36:20.217

您可以将处理程序添加到形状并使用[`getFill()`](http://www.kineticjs.com/docs/symbols/Kinetic.Shape.php#getFill)

```
function iGetFill(){
    var color = this.getFill();
}

circle1.on('dragend',function(){
    iGetFill.apply(this);
});

circle2.on('dragend',function(){
    iGetFill.apply(this);
}); 
```

# php - 如何将 __autoload 用于不同的文件夹？

> ID：10711917
> 
> 赞同：2
> 
> 时间：2012-05-23T00:27:38.707
> 
> 标签：php, oop

我正在尝试自动加载不同文件夹中的类。那可能吗？

```
 function __autoload($class){
            require $class.'.php';
            require 'libs/'.$class.'.php';
            //this won't work.
        } 
```

我想自动加载 libs 文件夹或根目录中的类。有什么想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:34:45.257

首先，我建议您查看`spl_autoload_register`，这是执行此操作的优势。

其次，您应该使用`is_file`测试文件是否存在，然后尝试加载它。如果您`require`的文件不存在，您的脚本将停止。

```
spl_autoload_register(function($class) {
    if (is_file($class . '.php')) {
        require $class . '.php';
    } elseif (is_file('libs/' . $class . '.php')) {
        require 'libs/' . $class . '.php';
    }
}); 
```

如果您有多个文件夹可以存放文件，则可以执行以下操作：

```
spl_autoload_register(function($class) {
    $folders = array ('.', 'libs', 'somewhere');

    foreach ($folders as $folder) {
        if (is_file($folder . '/' . $class . '.php')) {
            require $folder . '/' . $class . '.php';
        }
        if (class_exists($class)) break;
    }
}); 
```

# python - python reduce检查所有元素是否相等

> ID：10711918
> 
> 赞同：9
> 
> 时间：2012-05-23T00:27:50.390
> 
> 标签：python, reduce

假设`a = [[1,2,3],[1,2,3]]` `reduce(lambda x,y: x==y, a)`返回`True`

但如果`a = [[1,2,3],[1,2,3],[1,2,3]]` `reduce(lambda x,y: x==y, a)`返回`False`

为什么在第二种情况下，结果是`False`？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T00:34:13.057

试试这个，它适用于任何大小的列表：

```
all(e == a[0] for e in a) 
```

请注意，您提出的解决方案 using`reduce`不适用于两个以上的项目，因为第一次比较后的累积值为`True`，并且您将从那时`True`起与每个元素进行比较，显然这不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T00:35:42.707

您**没有**减少列表。lambda 的返回值为`True`or `False`，然后将其用作输入参数以进一步调用相同的 lambda 函数。因此，您最终会将布尔值与列表进行比较。因此，归约函数应该返回与其输入参数相同的类型。

您可能正在寻找其他建议的答案：使用`all()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-31T21:12:47.033

你仍然可以使用reduce！看看这个魔法：

```
bool(reduce(lambda x,y: (x==y)*x, a)) 
```

由于 lambda for 的返回值为`x==y`True 或 False，因此可以将其与输入相乘，然后用于下一次比较，因为`True*[1,2,3]`is `[1,2,3]`。它也适用于字符串，`True*"MyString"`is `"MyString"`。

试试看。但是，此方法不适用于零列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T00:37:28.407

因为第一次减少比较 [1,2,3] == [1, 2, 3] 并且下次比较 True 和 [1,2,3] 时它是真的，它是错误的。

> > > 帮助（减少）

```
Help on built-in function reduce in module __builtin__:

reduce(...)
    reduce(function, sequence[, initial]) -> value

    Apply a function of two arguments cumulatively to the items of a sequence,
    from left to right, so as to reduce the sequence to a single value.
    For example, reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) calculates
    ((((1+2)+3)+4)+5). 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T00:40:27.187

`a = [range(1, 4), range(1, 4), range(1, 4)]`

评估函数`reduce(operator.eq, a)`将`reduce`首先评估函数`operator.eq`的前两个元素`a`以获得`True`。然后它会`operator.eq`再次调用`True`和`range(1, 4)`作为两个参数，并获得`False`最终结果`reduce`。

也许你想要：

```
from functools import partial
import operator
allequal = reduce(partial(operator.eq, a[0]), a[1:]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T00:54:34.733

> 为什么在第二种情况下，结果是 False

因为`reduce(lambda x, y: x == y, (a, b, c, d))`不代表`(a == b) and (b == c) and (c == d)`；这意味着`(((a == b) == c) == d)`。`a == b`将产生`True`or `False`，然后将其与`c`.

# ios - 如何找到带有公司名称的位置？

> ID：10711923
> 
> 赞同：0
> 
> 时间：2012-05-23T00:28:15.697
> 
> 标签：ios, google-maps, geocoding, core-location, mapkit

我正在尝试构建一个 iphone 应用程序来查找带有公司名称的位置。例如，我想注释一家餐馆，我想用餐馆的名字找到它。我试图使用 CLGeocoder，但在这种情况下，地理编码器似乎没有帮助。我不知道该怎么做..有人可以给我一个提示吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:33:40.933

谷歌地图将采用企业名称和返回位置。听起来您需要一个 Web 服务，您只需要仔细考虑输入、输出，并弄清楚它们如何在逻辑上适合您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:31:57.390

“企业名称”是独立于地址的信息，不适用于`CLGeocoder`. 为此，您必须使用实际注册企业名称的外部服务。我建议使用[Google Places API](https://developers.google.com/maps/documentation/places/#PlaceSearches)，但搜索结果仍将仅限于那些在 Google 上注册的企业。

是的，你将不得不用“东西”弄脏你的手`NSURL`，并用“东西”处理结果`NSJSONSerialization`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T17:42:27.170

如果您愿意考虑使用`SDK-based solution`，Huq Industries 正是将其作为其[真实世界分析](http://huq.io/product.html)平台的一部分提供。他们`device location`通过结合`location`其他数据（包括`WiFi`. `business name`您可以通过和获取`category`业务事件`address`。

覆盖范围相当全球，而且大部分是免费的。查看[GitHub 上的 SDK 存储库](https://github.com/huq-industries/sourcekit-ios)。

* * *

***免责声明****：我为此做出了贡献。*

# css - 定位元素中的CSS问题

> ID：10711925
> 
> 赞同：0
> 
> 时间：2012-05-23T00:28:26.857
> 
> 标签：css, layout, html, positioning

我似乎无法让导航菜单顶部和底部的图形没有间隙。由于需要拉伸顶部和底部图像，因此不能将其作为背景图像。这 3 件需要接触。我尝试过使用表格，将所有内容的边距和填充设置为 0px，甚至尝试使用 css 清除文件，但我仍然无法让它们触动。

**jsFiddle ...** [http://jsfiddle.net/PerryCS/JXVGM/1/](http://jsfiddle.net/PerryCS/JXVGM/1/)

我是否试图强迫浏览器做一些它不能做的事情？额外的间距从何而来？

谢谢，麻烦您了！

我不介意尝试一下。我花了大约 11 个小时来摆弄这个，我对我对为什么还有空间缺乏理解感到非常沮丧。啊。

需要在IE7及更高版本上工作。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:31:50.873

添加`display: block`到`.navribbon img`：http: [//jsfiddle.net/thirtydot/JXVGM/2/](http://jsfiddle.net/thirtydot/JXVGM/2/)

# php - 带有数组的MongoDB语句

> ID：10711926
> 
> 赞同：1
> 
> 时间：2012-05-23T00:28:37.927
> 
> 标签：php, mongodb, codeigniter, database, nosql

我试图通过使用单个查询编译一段循环代码来保存一些数据库操作，在我只是在触发查询之前使用循环添加到类似的语句之前，但我无法在 Mongo 中得到相同的想法，id感谢任何想法....我基本上是在尝试做一个类似的事情，但是将值作为一个数组

（'app'，将 'mongodb' 替换为我的 CI 设置）

以下是我在 mongofication 之前的做法：

```
 foreach ($workids as $workid):
         $this->ci->app->or_like('work',$workid)    ;
    endforeach;
    $query = $this->ci->db->get("who_users");
    $results = $query->result();
    print_r($results); 
```

这就是我希望我能够让它工作的方式，但这里没有乐趣，该功能仅用于接受字符串

```
 $query = $this->ci->app->like('work',$workids,'.',TRUE,TRUE)->get("who_users");
    print_r($query); 
```

如果有人能想到任何狡猾的方法，我可以通过一次调用再次获得返回的数组，那就太好了，我还没有找到关于这种查询的任何文档，我能想到的唯一方法是循环查询并将其推送到新的结果数组中......但如果我的应用程序扩大规模，那真的会受到伤害。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:35:26.650

你在使用[codeigniter-mongodb-library](https://github.com/alexbilbie/codeigniter-mongodb-library)吗？根据现有的[or_like()](http://codeigniter.com/user_guide/database/active_record.html)文档，看起来 CI 用`%`通配符包装了每个匹配项。`$or`Mongo 中的等效查询将是子句中的一系列正则表达式匹配：

```
db.who_users.find({
    $or: [
    { work: /.*workIdA.*/ },
    { work: /.*workIdB.*/ },
    ...
]}); 
```

不幸的是，这将是非常低效的，除非（1）该`work`字段被索引并且（2）你的正则表达式被锚定了一些常数值（例如`/^workId.*/`）。[这在 Mongo 的正则表达式文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)中有更详细的描述。

根据您对 OP 的评论，您似乎在`work`字段中将多个 ID 存储为逗号分隔的字符串。要利用 Mongo 的模式，您应该将其建模为字符串数组。此后，当您查询该`work`字段时，Mongo 将考虑数组中的所有值（记录在[此处](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray)讨论）。

```
db.who_users.find({
    work: "workIdA"
}); 
```

此查询将匹配`work`值为的记录`["workIdA", "workIdB"]`。如果我们需要搜索一组 ID 中的一个（将其带回您的 OR 查询），我们可以使用[$in](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)运算符扩展此示例：

```
db.who_users.find({
    work: { $in: ["workIdA", "workIdB", ...] }
}); 
```

如果这满足您的需求，请确保也为该`work`字段编制索引。

# apache-flex - Flex 移动标签不工作

> ID：10711933
> 
> 赞同：1
> 
> 时间：2012-05-23T00:29:26.867
> 
> 标签：apache-flex, flex-mobile, flex4.6, tab-ordering

我正在尝试制作一个启用了标签顺序的移动弹性应用程序。我正在尝试以下简单的应用程序，但在模拟器和实际设备上都没有从 tab 键获得任何功能。

TabOrderTest.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                        xmlns:s="library://ns.adobe.com/flex/spark" 
                        firstView="views.TabTest"/> 
```

TabTest.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="TabTest">
    <s:layout>
        <s:VerticalLayout />
    </s:layout>
    <s:TextInput tabIndex="1" />
    <s:TextInput tabIndex="2" />
    <s:Button label="Submit" tabIndex="3"/>
</s:View> 
```

为什么tab键不起作用？

**编辑**我目前的目标是 Android 设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:41:58.043

事实证明，Flex 4 移动版默认为 stageText，它提供了一些很棒的功能，但不幸的是，它破坏了诸如能够被禁用和 Tab 键顺序之类的功能。要在移动应用程序中获得标签顺序，您必须使用以下内容将皮肤设置为移动应用程序：

```
skinClass="spark.skins.mobile.TextInputSkin" 
```

# java - Java的量化金融/数学库

> ID：10711941
> 
> 赞同：15
> 
> 时间：2012-05-23T00:30:58.720
> 
> 标签：java, math, statistics

我目前正在从事一个项目，该项目依赖于几个数学/统计/金融工具，理想情况下我希望将它们包含在一个（可能是多个）库中。我想要的是：

1.  统计测量 - 模式、方差等。
2.  概率分布+可用的抽样
3.  期权定价等金融模型

有谁知道哪些库可能有用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T00:40:27.903

我在 Java 和 Clojure 中做了很多数值工作，所以希望我的观点可以有用。

对于 1\. 和 2\. 以下是一些可供探索的选项：

*   [Parallel Colt](https://sites.google.com/site/piotrwendykier/software/parallelcolt) - 非常全面的高性能数学库。适用于您在金融应用程序中获得的大量矢量处理。
*   [Incanter](http://incanter.org/) - Clojure 的类似 R 的统计库（很容易嵌入到 Java 应用程序中）. 拥有几乎所有你想要的统计工具，而且如果你想创建自己的 DSL 也很容易扩展
*   [EJML](http://code.google.com/p/efficient-java-matrix-library/) - 可能是 Java 中最快的矩阵库
*   Apache [Commons Math](http://commons.apache.org/math/) - 数学和统计工具的便捷集合

对于 3.（财务模型），这些往往是针对您要解决的问题量身定制的。我怀疑您是否会想要使用现成的解决方案，即使它存在。我建议使用上面提到的工具包来开发自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:30:14.943

[IdylFin](https://github.com/charles-cooper/idylfin)可能正是您正在寻找的东西——受[quantmod](http://cran.r-project.org/web/packages/quantmod/index.html)的启发，它包含一些速度极快、数值稳定的统计方法、雅虎财经的 API 以及一些投资组合优化方法，并且正在积极扩展。

免责声明：我是图书馆的作者，如果你使用它，它会让我大吃一惊；）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T00:32:54.850

[QuantLib](http://quantlib.org/index.shtml)显然通过 SWIG 具有 Java 绑定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T12:59:21.120

[OpenGamma 的 Strata](https://strata.opengamma.io/)包含这些项目。是一个专业的量化金融库，用Java编写，开源。

量化金融部分包含利率、外汇和股票模型。它是由行业量化专家为银行和对冲基金开发的。我不知道您要使用哪种类型的财务模型；有大量模型和资产类别，您应该能够找到现成的专业类型实现。

# c# - 字符串中多次出现文本

> ID：10711944
> 
> 赞同：0
> 
> 时间：2012-05-23T00:31:22.450
> 
> 标签：c#, string, loops, for-loop, find

如何使用 for 循环遍历字符串中给定短语的每次迭代？例如，假设我有以下字符串：

嘿，这是一个示例字符串。字符串是字符的集合。

每次出现“is”时，我都想将它后面的三个字符分配给一个新字符串。我知道如何做到这一点，但我试图弄清楚如何使用 for 循环来遍历同一个单词的多个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:24:40.037

如果出于某种原因*必须*使用 for 循环，则可以将ja72[提供的代码的相关部分替换为：](https://stackoverflow.com/a/10711984/947484)

```
for (int i = 0; i < text.Length; i++)
{
    if (text[i] == 'i' && text[i+1] == 's')
        sb.Append(text.Substring(i + 2, 3));
} 
```

不幸的是，我没有足够的声誉在此处将其添加为评论，因此将其发布为答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:36:37.967

这是你想要的吗？

```
 static void Main(string[] args)
    {
        string text=@"Hey, this is an example string. A string is a collection of characters.";

        StringBuilder sb=new StringBuilder();
        int i=-1;
        while ((i=text.IndexOf("is", i+1))>=0)
        {
            sb.Append(text.Substring(i+2, 3));
        }
        string result=sb.ToString();
    }

//result " is an a " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T01:19:15.437

您可以使用这样的正则表达式：

```
 Regex re = new Regex("(?:is)(.{3})"); 
```

此正则表达式查找 is `(?:is)`，并采用接下来的三个字符`(.{3})`

然后使用正则表达式查找所有匹配项：[Regex.Matches()](http://msdn.microsoft.com/en-us/library/e7sf90t3.aspx)。这将为`is`在字符串中找到的每个返回一个匹配项，后跟 3 个字符。每场比赛有两组：

*   第 0 组：包括 is 和接下来的三个字符
*   第 1 组：包括下一个字符

    Matches matches = re.Matches("嘿，这是一个示例字符串。字符串是字符的集合。"); StringBuilder sb = new StringBuilder(); foreach（匹配 m 匹配）{ sb.Append(m.Groups [1](http://msdn.microsoft.com/en-us/library/e7sf90t3.aspx) .Value); }

使用 Regex 比遍历字符串的字符要快得多。如果您在您的正则表达式构造函数中使用[RegexOptions.Compiled](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)则更多：[Regex Constructor (String, RegexOptions)](http://msdn.microsoft.com/en-us/library/h5845fdz.aspx)

# jquery - jQuery禁用和启用滚动

> ID：10711949
> 
> 赞同：7
> 
> 时间：2012-05-23T00:32:03.070
> 
> 标签：jquery, scroll

```
$('.news-wrap').mouseenter(function(event) {
    $(window).mousewheel(function(event) {
        event.preventDefault();
    });
}); 
```

窗口滚动被禁用，每次我离开元素。如何使用 mouseleave 事件启用滚动？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-28T12:05:16.497

我编写了一个 jQuery 插件来处理这个问题：**[$.disablescroll](https://github.com/ultrapasty/jquery-disablescroll)**。

它停止从鼠标滚轮、touchmove 和按钮（例如`Page Down`.

```
$('.news-wrap').mouseenter(function() {

    $(window).disablescroll();

}).mouseleave(function() {

    $(window).disablescroll("undo");

}); 
```

希望有人觉得这很有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T00:37:11.397

像这样？

```
$('#abs').bind('mousewheel DOMMouseScroll', function(e) {
    var scrollTo = null;
    if (e.type == 'mousewheel') {
        scrollTo = (e.originalEvent.wheelDelta * -1);
    } else if (e.type == 'DOMMouseScroll') {
        scrollTo = 1000 * e.originalEvent.detail;
    }

    if (scrollTo) {
        e.preventDefault();
        $(this).scrollTop(scrollTo + $(this).scrollTop());
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-01T13:02:27.600

我目前在引导游览中使用插件，目标是在单击链接时禁用滚动，并在您单击游览中的“结束游览”按钮时启用它。

在 HTML 中，`div`通过以下方式创建链接`id`：

```
<div id='placeholder'><a href='#'>Placeholder link</a> </div> 
```

使用 click 函数实例化 jquery。

启动jquery：

```
$(document).ready(function() {
    /*click Function*/
    $('#placeholder').click(function(){
        /*Disables scrolling*/
        $('body').css('scroll', function(){
            window.scrollTo(0,0);
        });
    });  
}); 
```

结束弹出窗口时的插件选项引导程序：

```
/*This fire when clicking End Tour & placeholder would only work if that what you named the tour.*/
onEnd: function(placeholder) {
    /*Enable scroling*/
    $('body').css({ 'overflow': 'scroll' });
    $(document).off('scroll');
} 
```

# qt - QLabel 颜色和分隔符

> ID：10711950
> 
> 赞同：-1
> 
> 时间：2012-05-23T00:32:05.147
> 
> 标签：qt

```
IplImage *img_lb = cvCloneImage(img_orig);

         QImage qt_img = IplImage2QImage(img_lb);

             QLabel label_3;

             // display on label
             ui->label_3->setPixmap(QPixmap::fromImage(qt_img));
             // resize the label to fit the image
               ui->label_3->resize(ui->label_3->pixmap()->size());
            // ui->label_3->show(); 
```

`嗨，我使用 Qt 创建者我想以声明大小而不是他的大小播放视频，有人可以帮忙吗？这是我的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:08:56.553

如果您希望您的图像缩放到您的标签大小，请使用

```
ui->label_3->setPixmap(QPixmap::fromImage(qt_img).scaled(ui->label_3->size(), Qt::IgnoreAspectRatio)); 
```

这将使您的像素图完全适合标签，同时忽略纵横比。更多看[这里](http://qt-project.org/doc/qt-4.8/qpixmap.html#scaled)。

# android - 如何制作自定义的 EditText 工具栏？

> ID：10711951
> 
> 赞同：1
> 
> 时间：2012-05-23T00:32:17.923
> 
> 标签：android, android-edittext, text-editor

我目前正在尝试制作一个写作程序。我想要一个包含粗体、斜体、下划线等内容的编辑工具栏的功能。我看到它在字体下，但我正在努力弄清楚如何使其仅适用于选定的文本或仅适用于格式化文本。我已经有了 GUI 和按钮监听器。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:38:25.707

除了相当低的级别外，Android 中并没有真正内置于此。我有一个[`RichEditText`自定义小部件](https://github.com/commonsguy/cwac-richedit)的开始，作为一个`EditText`替代品，但它需要做一些工作，我将在 6 月晚些时候完成（我希望我希望我希望）。

简而言之，您需要从您的via中获取一个`Spannable`对象，然后调用它上面的方法来应用您的格式。`EditText``getText()``setSpan()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:41:02.523

我的朋友，两个词，“知识共享”。以我的经验，像日期/时间选择器、RTF 文本框等普通代码。它们的编码和思考都比你有时间更彻底。对于这样的事情，不要重新发明轮子，检查别人的代码，在上面构建，然后重新签入。

# c++ - 如何使用 SFINAE 检测类的存在？

> ID：10711952
> 
> 赞同：32
> 
> 时间：2012-05-23T00:32:25.523
> 
> 标签：c++, templates, sfinae

是否可以使用[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)检测 C++ 中是否存在一个类？如果可能，那怎么办？

假设我们有一个仅由某些版本的库提供的类。我想知道是否可以使用 SFINAE 来检测该类是否存在。检测结果是任意的，比如说一个枚举常量，如果存在则为 1，否则为 0。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-23T15:11:30.050

`T`如果我们要求编译器告诉我们关于一个甚至没有被声明的类类型的任何信息，我们一定会得到一个编译错误。没有办法解决这个问题。因此，如果我们想知道类是否`T`“存在”，`T` 甚至可能还没有声明，我们必须先声明`T`。

但这没关系，因为仅仅声明`T`不会使它“存在”，因为我们必须通过*`T`存在*的意思是*`T`已定义*。如果在声明`T`之后，您可以确定它是否已经*定义*，那么您不必感到困惑。

所以问题是判断是否`T`是定义的类类型。

`sizeof(T)`在这里没有帮助。如果`T`是未定义的，那么它会给出一个 `incomplete type T`错误。同样`typeid(T)`。对 type 进行 SFINAE 探测也没有任何好处`T *`，因为只要声明了`T *` *它就是*`T`定义的类型，即使`T`不是。而且由于我们有义务声明 class `T`，`std::is_class<T>`这也不是答案，因为该声明足以让它说“是”。

C++11`std::is_constructible<T ...Args>`在`<type_traits>`. 这可以提供现成的解决方案吗？- 如果`T`已定义，则它必须至少有一个构造函数。

恐怕不是。如果您知道至少一个公共构造函数的签名，`T`那么 GCC `<type_traits>`（从 4.6.3 开始）确实可以完成这项工作。假设一个已知的公共构造函数是`T::T(int)`. 然后：

```
std::is_constructible<T,int>::value 
```

`T`如果定义为真，如果`T`仅声明为假。

但这不是便携式的。`<type_traits>`在 VC++ 2010 中还没有提供，如果没有定义`std::is_constructible`它甚至会失败：很可能什么时候到达它会效仿。此外，如果只存在提供给GCC的私有构造函数，那么即使是 GCC 也会呕吐（这是令人震惊的）。`std::has_trivial_constructor<T>``T``std::is_constructible``T``std::is_constructible`

如果`T`定义了，它必须有一个*析构函数*，并且只有一个析构函数。并且该析构函数比任何其他可能的`T`. 有鉴于此，我们可以做的最简单和最强大的游戏就是为`T::~T`.

此 SFINAE 探针无法以常规方式制作以确定是否`T`具有普通成员函数`mf`- 使 SFINAE 探针函数的“是重载”采用*根据`&T::mf`*. 因为我们不允许获取析构函数（或构造函数）的地址。

然而，如果`T`定义了，则`T::~T`有一个类型`DT`- 必须由`decltype(dt)`只要`dt`是一个计算结果为`T::~T`;的表达式的表达式产生。因此也`DT *`将是一种类型，原则上可以作为函数重载的参数类型给出。因此我们可以这样编写探针（GCC 4.6.3）：

```
#ifndef HAS_DESTRUCTOR_H
#define HAS_DESTRUCTOR_H

#include <type_traits>

/*! The template `has_destructor<T>` exports a
    boolean constant `value that is true iff `T` has 
    a public destructor.

    N.B. A compile error will occur if T has non-public destructor.
*/ 
template< typename T>
struct has_destructor
{   
    /* Has destructor :) */
    template <typename A> 
    static std::true_type test(decltype(std::declval<A>().~A()) *) {
        return std::true_type();
    }

    /* Has no destructor :( */
    template<typename A>
    static std::false_type test(...) {
        return std::false_type(); 
    }

    /* This will be either `std::true_type` or `std::false_type` */
    typedef decltype(test<T>(0)) type;

    static const bool value = type::value; /* Which is it? */
};

#endif // EOF 
```

仅具有`T`必须具有*公共*析构函数才能在 的参数表达式中合法调用的限制`decltype(std::declval<A>().~A())`。（是对我[在此处](https://stackoverflow.com/a/10707822/1362568)`has_destructor<T>`提供的方法内省模板的简化改编。）

该参数表达式的含义`std::declval<A>().~A()`可能对某些人来说是模糊的，特别是`std::declval<A>()`。函数模板`std::declval<T>()`在中定义`<type_traits>`并返回一个`T&&`(rvalue-reference to `T`) - 尽管它只能在未计算的上下文中调用，例如`decltype`. 所以 的 意思`std::declval<A>().~A()`是*对某些给定**的调用`~A()``A`*。`std::declval<A>()`通过消除对 的任何公共构造函数的需要`T`或让我们知道它的需要，在这里为我们提供了很好的服务。

因此，“Yes 重载”的 SFINAE 探测器的参数类型是：*指向 的析构函数类型的指针`A`*，并且`test<T>(0)`将匹配该重载，以防万一存在, for =*的析构函数`A`*这样的类型。`A``T`

有了in hand - 并且牢记`has_destructor<T>`它对可公开破坏的值的限制- 您可以通过确保在提出问题之前*声明它来测试是否在代码中的某个位置定义了一个类。*这是一个测试程序。`T``T`

 *```
#include "has_destructor.h"
#include <iostream>

class bar {}; // Defined
template< 
    class CharT, 
    class Traits
> class basic_iostream; //Defined
template<typename T>
struct vector; //Undefined
class foo; // Undefined

int main()
{
    std::cout << has_destructor<bar>::value << std::endl;
    std::cout << has_destructor<std::basic_iostream<char>>::value 
        << std::endl;
    std::cout << has_destructor<foo>::value << std::endl;
    std::cout << has_destructor<vector<int>>::value << std::endl;
    std::cout << has_destructor<int>::value << std::endl;
    std::count << std::has_trivial_destructor<int>::value << std::endl;
    return 0;
} 
```

使用 GCC 4.6.3 构建，这将告诉您 2 个`// Defined`类具有析构函数，而 2 个`// Undefined`类没有。输出的第五行会说这`int`是可破坏的，最后一行会显示`std::has_trivial_destructor<int>`同意。如果我们想将字段缩小到类类型，`std::is_class<T>`可以在我们确定是`T`可破坏的之后应用。

Visual C++ 2010 不提供`std::declval()`. 要支持该编译器，您可以在顶部添加以下内容`has_destructor.h`：

```
#ifdef _MSC_VER
namespace std {
template <typename T>
typename add_rvalue_reference<T>::type declval();
}
#endif 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-08-09T15:04:16.750

在这篇文章中仍然没有找到令人满意的答案......

**迈克·金汉（ Mike Kinghan）**正确地开始了答案，并说了一件聪明的事：

> 所以问题是要判断 T 是否是一个已定义的类类型。

但

> sizeof(T) 在这里没有帮助

是不正确的...

这是您可以使用的方法`sizeof(T)`：

```
template <class T, class Enable = void>
struct is_defined
{
    static constexpr bool value = false;
};

template <class T>
struct is_defined<T, std::enable_if_t<(sizeof(T) > 0)>>
{
    static constexpr bool value = true;
}; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-11T23:04:27.257

有了 SFINAE，没有。我认为名称查找技巧是完成此任务的方法。如果您不害怕将名称注入库的命名空间：

```
namespace lib {
#if DEFINE_A
class A;
#endif
}

namespace {
    struct local_tag;
    using A = local_tag;
}

namespace lib {
    template <typename T = void>
    A is_a_defined();
}

constexpr bool A_is_defined =
  !std::is_same<local_tag, decltype(lib::is_a_defined())>::value; 
```

**[演示。](http://coliru.stacked-crooked.com/a/b2d7d8e4a05c69f9)**

如果`A`在全局命名空间中声明：

```
#if DEFINE_A
class A;
#endif

namespace {
    struct local_tag;
    using A = local_tag;
}

namespace foo {
    template <typename T = void>
    ::A is_a_defined();
}

constexpr bool A_is_defined =
  !std::is_same<local_tag, decltype(foo::is_a_defined())>::value; 
```

**[演示。](http://coliru.stacked-crooked.com/a/e24ae97d5507068b)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T01:45:54.910

好吧，我想我找到了一种方法来做到这一点，尽管可能有更好的方法。假设我们有类 A，它包含在库的某些实例中，而不包含在其他实例中。诀窍是在 A 中定义一个特殊的私有转换构造函数，然后使用 SFINAE 来检测转换构造函数。当包含A时，检测成功；如果不是，则检测失败。

这是一个具体的例子。首先是检测模板的标头，class_defined.hpp：

```
struct class_defined_helper { };

template< typename T >
struct class_defined {

  typedef char yes;
  typedef long no;

  static yes test( T const & );
  static no  test( ... );

  enum { value = sizeof( test( class_defined_helper( )) == sizeof( yes ) };
};

#define CLASS_DEFINED_CHECK( type )     \
  type( class_defined_helper const & ); \
                                        \
  friend struct class_defined< type >; 
```

现在是一个包含类定义 blah.hpp 的标头：

```
#include "class_defined.hpp"

#ifdef INCLUDE_BLAH
class blah {
  CLASS_DEFINED_CHECK( blah );
};
#else
class blah;
#endif 
```

现在是源文件 main.cpp：

```
#include "blah.hpp"

int main( ) {
  std::cout << class_defined< blah >::value << std::endl;
} 
```

使用 BLAH_INCLUDED 编译时定义了这个打印 1。没有定义 BLAH_INCLUDED 它打印 0。不幸的是，这仍然需要类的前向声明才能在两种情况下编译。我没有办法避免这种情况。*

# visual-c++ - 如何确保图形大小随窗口大小的变化而变化？

> ID：10711954
> 
> 赞同：1
> 
> 时间：2012-05-23T00:32:29.030
> 
> 标签：visual-c++, graphics, picturebox

我正在图片框中绘制一个矩形。当用户手动更改窗口大小时，矩形大小不会改变。我如何让它调整大小？我正在绘画活动中绘画 非常感谢

# iphone - Kindle iPhone 应用导航 - 如何

> ID：10711956
> 
> 赞同：0
> 
> 时间：2012-05-23T00:32:40.810
> 
> 标签：iphone, objective-c, xcode

我喜欢 iPhone 导航的 kindle——它可以让你在导航栏中滑动标题以从一个视图移动到另一个视图。（我附上图片）![iPhone Kindle 应用截图](../Images/24da29be29be678e80b815bcfa488f47.png)

但是，我昨天搜索了很长时间，但找不到任何做过类似事情的人。

你对如何做到这一点有任何想法吗？

更新：2012 年 5 月 24 日

所以现在我有代码了。感谢本教程[http://bit.ly/xNOiqd](http://bit.ly/xNOiqd)。（我只是复制了他的大部分代码。）但我仍然无法达到与kindle应用程序导航栏相同的效果。我现在可以查看左右项目，但我的滚动视图会跳过数组奇数索引上的标签。假设我有“收藏夹”、“所有产品”和“类别”。当我向左滑动时，我从“收藏夹”移动到“类别”并跳过“所有产品”

这是代码。

```
#pragma mark -

- (void)loadVisiblePages {
    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));

    // Update the page control
    self.pageControl.currentPage = page;

    // Work out which pages we want to load
    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }
    for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }
}

- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what we have to display, then do nothing
        return;
    }

    // Load an individual page, first seeing if we've already loaded it
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {
        CGRect frame = self.scrollView.bounds;

        //frame.origin.x = frame.size.width * page;
        frame.origin.x = (frame.size.width /2) * page;
        frame.origin.y = 0.0f;

        //
        frame = CGRectInset(frame, 10.0f, 0.0f);
        //self.scrollView.bounds = frame;

        /* == orig line
         UIImageView *newPageView = [[UIImageView alloc] initWithImage:[self.pageImages objectAtIndex:page]];
         newPageView.contentMode = UIViewContentModeScaleAspectFit;
         newPageView.frame = frame;
         */

        UILabel *newPageView = [[UILabel  alloc] init];
        newPageView.text = [self.pageImages objectAtIndex:page];
        newPageView.textColor = [UIColor whiteColor];
        //newPageView.textColor = [UIColor grayColor];
        newPageView.textAlignment = UITextAlignmentCenter;
        newPageView.font = [UIFont fontWithName:@"Helvetica-Bold" size:20];
        [newPageView setBackgroundColor:[UIColor clearColor]];

        newPageView.frame = frame;

        [self.scrollView addSubview:newPageView];
        [self.pageViews replaceObjectAtIndex:page withObject:newPageView];
    }
}

- (void)purgePage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what we have to display, then do nothing
        return;
    }

    // Remove a page from the scroll view and reset the container array
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        //[pageView removeFromSuperview];
        //[self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
//scroll view stuff
    self.scrollView.delegate = self;

    //attempt to make size of scrollview smaller
    //CGRect frame = self.scrollView.bounds;
    //frame = CGRectInset(frame, 10.0f, 0.0f);
    //CGFloat width = self.scrollView.frame.size.width/2.0f;

    self.pageImages = [NSArray arrayWithObjects:@"Favourites", @"All Products", @"Categories",@"Boo yah", nil];
    NSInteger pageCount = self.pageImages.count;

    // Set up the page control
    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = pageCount;

    // Set up the array to hold the views for each page
    self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    }

}
- (void) viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
CGSize pagesScrollViewSize = self.scrollView.frame.size;
    //self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * self.pageImages.count, pagesScrollViewSize.height);

//This modifies the size of the scroll view, I can't seem to get it right
    self.scrollView.contentSize = CGSizeMake((pagesScrollViewSize.width / 1.50f )* self.pageImages.count, self.scrollView.frame.size.height);

    // Load the initial set of pages that are on screen
    [self loadVisiblePages];

}
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Load the pages which are now on screen
    [self loadVisiblePages];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:49:19.207

[iCarousel](https://github.com/nicklockwood/iCarousel)是一个不错的开源项目，有很多滚动类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:42:22.540

分页滚动视图和[AQGridView](https://github.com/AlanQuatermain/AQGridView)最有可能。如果不是，无论如何这将是一种可接受的逆向工程尝试。

# gwt - GWT 码头 WebSockets 405 错误

> ID：10711957
> 
> 赞同：5
> 
> 时间：2012-05-23T00:32:46.430
> 
> 标签：gwt, jetty, websocket

我正在尝试修改标准 GWT [StockWatcher](https://developers.google.com/web-toolkit/doc/latest/tutorial/gettingstarted)演示应用程序，以通过 websocket 接收股票报价。我使用[gwt-ws](http://code.google.com/p/gwt-ws/)作为我的 websockets 实现，并且根据 gwt-ws 主页的[说明](http://code.google.com/p/gwt-jetty/)，我已经升级了 GWT 的嵌入式版本的 Jetty。

但是，当我尝试打开 websocket 连接时，出现以下 405 错误。有人有建议吗？

```
[WARN] 405 - GET /stockwatcher/webSocket (127.0.0.1) 1457 bytes
   Request headers
      Upgrade: websocket
      Connection: Upgrade
      Host: 127.0.0.1:8888
      Origin: http://127.0.0.1:8888
      Sec-WebSocket-Key: zlH08kgvDw3qHs+/OaQ9/w==
      Sec-WebSocket-Version: 13
      Sec-WebSocket-Extensions: x-webkit-deflate-frame
   Response headers
      Content-Type: text/html;charset=ISO-8859-1
      Cache-Control: must-revalidate,no-cache,no-store
      Content-Length: 1457 
```

这是我从 onModuleLoad() 调用的客户端 websocket 代码：

```
private void setupWebsocket() {
    if (!JavaScriptWebSocket.IsSupported())
        return;

    //webSocketURL looks like "ws://127.0.0.1:8888/de_csenk_gwtws_demo/webSocket"
    String webSocketURL = GWT.getModuleBaseURL().replace("http", "ws") + "webSocket";

    new JavaScriptWebSocketFactory().createWebSocket(webSocketURL, new WebSocketCallback() {

        public void onOpen(WebSocket webSocket) {
            log("Web Socket Connection Open");
            webSocket.send("Test Message");
        }

        public void onMessage(WebSocket webSocket, String message) {
            log("Web Socket Connection Message: " + message);
        }

        public void onError(WebSocket webSocket) {
            log("Web Socket Connection Error");
        }

        public void onClose(WebSocket webSocket) {
            log("Web Socket Connection Closed");
        }
    });
} 
```

我看到网页上记录了“Web Socket Connection Closed”。

这是我的 Servlet：

```
package com.google.gwt.sample.stockwatcher.StockWatcher.server;

import javax.servlet.http.HttpServletRequest;

import org.eclipse.jetty.websocket.WebSocket;

import de.csenk.gwt.ws.server.jetty.JettyWebSocketConnection;
import de.csenk.gwt.ws.shared.Connection;
import de.csenk.gwt.ws.shared.Handler;

public class MyWebSocketServlet extends org.eclipse.jetty.websocket.WebSocketServlet {

    public static final long serialVersionUID = 1;

    protected WebSocket doWebSocketConnect(HttpServletRequest arg0, String arg1) {
        return new JettyWebSocketConnection(new Handler() {
            public void onConnectionOpened(Connection connection) throws Throwable {
                System.out.println("Connection opened server side");
            }

            public void onConnectionClosed(Connection connection) throws Throwable {
                System.out.println("Connection closed server side");
            }

            public void onExceptionCaught(Connection connection, Throwable caught) {
                System.out.println("exception caught server side");
                caught.printStackTrace(System.out);
            }

            public void onMessageReceived(Connection connection, Object message) throws Throwable {
                System.out.println("Message Received! " + message);
            }
        });
    }
} 
```

这是 StockWatcher.gwt.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='stockwatcher'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>

  <!-- Inherit the default GWT style sheet.  You can change       -->
  <!-- the theme of your GWT application by uncommenting          -->
  <!-- any one of the following lines.                            -->
  <!-- <inherits name='com.google.gwt.user.theme.clean.Clean'/>   -->
  <inherits name='com.google.gwt.user.theme.standard.Standard'/>
  <!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

  <!-- Other module inherits                                      -->
  <inherits name='de.csenk.gwt.ws.WebSocket'/>

  <!-- Specify the app entry point class.                         -->
  <entry-point class='com.google.gwt.sample.stockwatcher.StockWatcher.client.StockWatcher'/>

  <!-- Specify the paths for translatable code                    -->
  <source path='client'/>
  <source path='shared'/>

</module> 
```

这是 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5"
         xmlns="http://java.sun.com/xml/ns/javaee">

  <!-- Servlets -->
  <servlet>
   <servlet-name>webSocket</servlet-name>
   <servlet-class>com.google.gwt.sample.stockwatcher.StockWatcher.server.MyWebSocketServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>webSocket</servlet-name>
    <url-pattern>/stockwatcher/webSocket</url-pattern>
  </servlet-mapping>

  <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>StockWatcher.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

# javascript - div内的滚动表在IE中不起作用

> ID：10711958
> 
> 赞同：2
> 
> 时间：2012-05-23T00:32:47.673
> 
> 标签：javascript, jquery, internet-explorer

我在容器内有一张桌子（溢出）。表的一些特点：

1 - 悬停行（突出显示）

2 - 单击行并将突出显示它

3 - 双击或输入打开的window.location

4 - 箭头键向下/向上导航到突出显示的行（保持在容器的中间）

5 - 滚动容器时，突出显示的行保持在容器的中间

**错误：**

*IE*

1 - 当滚动容器时，突出显示的行不显示/工作（使用箭头键和滚动）

错误信息

```
var row_top = $(box).find('table').find('.row-highlight').offset().top; it is null or not is a object
Line: 100
Character: 21
Code: 0 
```

*歌剧*

1 - 单击该行并使用箭头键跳转到中间容器，不保持导航顺序

2 - 按键箭头不起作用，只是在保持点击箭头工作时。

**[演示](http://jsfiddle.net/crazywebLOL/GFgZ6/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:18:47.733

这是一些在鼠标悬停时设置行突出显示的代码。这也使行突出显示与鼠标滚轮上的鼠标同步。您可能还必须扩展它以支持在箭头键之后进行同步。

[如何在鼠标悬停时突出显示表格中的行？](http://jqfaq.com/how-to-highlight-rows-in-a-table-on-mouse-hover/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:12:30.167

克里希南，这不是我需要的。我将解释：当我滚动时，我需要将中间行进入视图 div 将突出显示（选中）。例如，第 1,2,3,4,5 行进入视图，因此第 3 行将突出显示。再次向下滚动时将显示第 6、7、8、9、10 行，因此第 8 行将突出显示。当我说“突出显示”表示选中时

# numpy - 删除在 OS X 上使用 pip 安装的 numpy

> ID：10711960
> 
> 赞同：0
> 
> 时间：2012-05-23T00:33:06.140
> 
> 标签：numpy, pip, easy-install

我在我的 OS X 上安装了两个版本的 numpy。一个是通过 1.2.1 安装`pip`的版本，另一个是通过 1.6.1 安装的版本`easy_install`。

现在，我想使用`pip uninstall`命令删除旧版本。但这会影响安装的较新版本`easy_install`吗？如果是这样，我应该如何在删除旧版本的同时保留新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T00:18:13.983

`pip`并`easy_install`使用不同的方法来跟踪他们安装的模块。因此，运行`pip uninstall numpy` *不应该*影响您通过`easy_install`.

当然，这是假设它们没有安装在相同的目录中（尽管我不明白它们为什么或如何）。

# mysql - 共享列较小时使用连接或复制？

> ID：10711964
> 
> 赞同：1
> 
> 时间：2012-05-23T00:34:10.947
> 
> 标签：mysql, join

我正在为具有少量共享数据的垂直层次结构中的多个表寻找最佳实践。假设三个表：

```
Country {
   id 
}

State {
   id,
   country_id,
   FK_to_country_id,
}

City {
   id,
   state_id,
   FK_to_state_id,
} 
```

在上述状态属于国家，而城市属于国家，结果也属于国家。该模式看起来很干净，但是当您想查找一个城市属于哪个国家/地区时，您必须使用包含三个表的 JOIN。如果有另一个属于城市的称为县的层级，情况会变得更糟。

```
City {
   id,
   country_id,
   state_id,
   FK_to_country_id,
   FK_to_state_id,
} 
```

在 City 中添加另一列 'country_id' 可以让我们从繁琐的 JOIN 中解放出来，但数据库模式会有些重复。

现实世界的实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:45:08.200

这就是`JOIN`s 的用途；不要剥夺他们的职责。

在现实世界的实践中，像这样连接多个表是绝对正常的。

在您的示例中，是的，在城市表中包含国家/地区 ID 是多余的。

但情况并非总是如此。考虑一个例子，一个城市可以存在而不需要在一个州（许多第三世界国家没有“州”名称），那么你必须有那个外键国家 ID，因为该`State`表是可选的。

# php - 如何确保 PDO 的 lastInsertId() 不是另一个同时插入的？

> ID：10711966
> 
> 赞同：8
> 
> 时间：2012-05-23T00:34:22.057
> 
> 标签：php, mysql, pdo

我正在`INSERT`使用 PDO 做一个带有 SQL 查询的注册表单。在此 INSERT 之后，我想提取`userid`刚刚创建的（自动递增，主键），并将`INSERT`其提取到另一个表（“确认码”表）中

但是我如何确保这个用户 ID 不是第二个用户的用户 ID，该用户在第一个用户之后注册了 1/1000 秒？

我应该找到一些锁定桌子的方法吗？我应该使用交易吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T00:42:38.713

[`lastInsertId()`](http://php.net/manual/en/pdo.lastinsertid.php)*返回在该连接*上插入的最后一行的标识符，因此并发用户（与数据库的不同连接）不会干扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:38:11.807

您可以通过电子邮件或某些独特字段进行选择来避免这种情况。这将保证您获得正确的用户 ID。

例如：

```
select id from user_table where email = 'user@email.com' limit 1; 
```

# zend-framework - Zend 服务器部署

> ID：10711978
> 
> 赞同：2
> 
> 时间：2012-05-23T00:36:07.137
> 
> 标签：zend-framework, zend-server

我正在按照官方教程在 Zend 服务器上部署示例 Zend 应用程序。无论我部署什么，我唯一可以访问的是 hello world 页面（Hello world 说 hello）。

如何访问真实应用程序？

host/address/public 和 host/address/index.php 或其他排列不起作用...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:20:26.590

当您使用 Zend Studio 创建 zpk 文件时，会有一个**deployment.xml**文件指定一些 vhost 设置以及各种其他依赖项和触发器。

如果您在 Zend Studio 中双击此文件，您将看到一个帮助您创建此文件的 gui。

这个问题的两个重要字段是“**应用程序目录**”和“**文档根**目录”。如果您有 Zend Framework 应用程序，最可能的设置是：

*   应用目录：**数据**
*   文档根目录（主要公共目录）：**data/public**

文档根目录是最重要的部分，因为它定义了 apache 执行第一个文件的目录。

然后将项目导出到 zpk 并在 Zend Server 中上传。

上传后，您将看到“**设置安装详细信息**”屏幕。在那里您将定义虚拟主机目录名称。

对于到您的本地主机或服务器 IP 的简单部署，您可以拥有以下内容：

*   显示名称：**地址应用程序**
*   虚拟主机：**默认**
*   路径：**地址**

然后，这会将您的应用程序部署到：**http://localhost/address**或**http://192.168.0.*/address**

您还可以使用 url 部署它，例如：

*   显示名称：**地址应用程序**
*   虚拟主机：*单击“添加新”*，然后输入 URL，例如。**myaddressapp.com**
*   路径：*留空*

然后，这会将您的应用程序部署到： http: **//myaddressapp.com**。如果您没有部署到实时站点，您可以通过在[主机文件中输入记录来伪造 url](http://goo.gl/ATW9t)

或者，我不久前开始写一篇关于如何在 VM 中部署到 Zend Server 的博客文章。这会自动完成所有操作，因此您不必依赖导出和导入。这是帖子正在进行的工作：[https ://docs.google.com/document/pub?id=1bR58tXWpkezomGiv9cnkySrXxKItoEUQ6E6V9a8n46A](https://docs.google.com/document/pub?id=1bR58tXWpkezomGiv9cnkySrXxKItoEUQ6E6V9a8n46A)

# ruby-on-rails - 无法捆绑 rails app.sqlite3 失败

> ID：10711979
> 
> 赞同：1
> 
> 时间：2012-05-23T00:36:11.850
> 
> 标签：ruby-on-rails, sqlite, cygwin, bundle

它说

```
Building native extensions.  This could take a while...
ERROR:  Error installing sqlite3:
        ERROR: Failed to build gem native extension.

        /home/Fash/.rvm/rubies/ruby-1.9.3-p194/bin/ruby.exe extconf.rb --with-sqlite3-include=/usr/local/include
checking for sqlite3.h... no
sqlite3.h is missing. Try 'port install sqlite3 +universal'
or 'yum install sqlite-devel' and check your shared library search path (the
location where your sqlite3 shared library is located).
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/home/Fash/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
        --with-sqlite3-dir
        --without-sqlite3-dir
        --with-sqlite3-include=${sqlite3-dir}/include
        --with-sqlite3-lib
        --without-sqlite3-lib=${sqlite3-dir}/lib
        --enable-local
        --disable-local

Gem files will remain installed in /home/Fash/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/sqlite3-1.3.6 for inspection.
Results logged to /home/Fash/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out 
```

我正在使用 cygwin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:50:15.770

问题在于编译安装 sqlite3 所需的库。检查此[SO Question](https://stackoverflow.com/questions/421225/why-cant-i-install-the-sqlite-gem)以了解解决此问题的步骤。

# xslt-1.0 - 从 xml 中提取节点

> ID：10711980
> 
> 赞同：1
> 
> 时间：2012-05-23T00:36:16.547
> 
> 标签：xslt-1.0

我正在努力实现使用 XSLT1.0 应该非常简单的事情，所以请多多包涵。

这是我的原始 XML：

<adapter-response>
<status>success</status>
<data>
<inventory>
<servers>
....
....
</servers>
<routers>
....
....
</routers>
。 ..
...
</inventory>
</adapter-response>

它是一个包含大量数据的巨大 XML。我只想剥离与适配器相关的标签，并使用原始标签保留库存数据。所以最终的 XML 将是：

<inventory>
<servers>
....
....
</servers>
<routers>
....
....
</routers>
...
...
</inventory>

请帮忙！

问候， 拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:29:24.310

提供的 XML 文档的“草图”格式不正确，因此我对文档的重建可能不是问题中的意图：

```
<adapter-response>
    <status>success</status>
    <data>
        <inventory>
            <servers>
....
....
            </servers>
            <routers>
....
....
            </routers>
...
...
        </inventory>
    </data>
</adapter-response> 
```

**这种转变：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[contains(name(), 'adapter')]">
  <xsl:apply-templates/>
 </xsl:template>
</xsl:stylesheet> 
```

**仅复制到输出元素，其名称不包含 string `"adapter"`。上述文件的结果是**：

```
<status>success</status>
<data>
   <inventory>
      <servers>
....
....
            </servers>
      <routers>
....
....
            </routers>
...
...
        </inventory>
</data> 
```

# javascript - 无法滚动页面时隐藏div，当有滚动条需要滚动页面时显示div

> ID：10711985
> 
> 赞同：1
> 
> 时间：2012-05-23T00:36:39.233
> 
> 标签：javascript, jquery, css, html, hide

当页面填满屏幕并且不需要滚动条时，我想隐藏一个 div。但是当页面很大并且屏幕很小并且用户需要向下滚动以查看我想要显示 div 的所有页面时。

希望你能理解我的需要，谢谢你的帮助。

* * *

*编辑（这个似乎不起作用我做错了什么）

```
<script type="text/javascript">
if($(document).height() > $(window).height()){
$("#scrollTop").show();
}
else {
$("#scrollTop").hide();
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:59:51.513

```
$(document).ready(function() { 
    if($(document).height() > $(window).height()){
        $(".yourDiv").show();
    }
    else {
        $(".yourDiv").hide();
    }
}); 
```

# javascript - JavaScript：我应该为事件使用方法还是函数？

> ID：10711989
> 
> 赞同：1
> 
> 时间：2012-05-23T00:37:20.060
> 
> 标签：javascript, function, events, methods, mouse

我有一个正在开发的程序，而不是开始，用于我一直在制作的网站。该程序是一个带有 JavaScript（和 jQuery）的 HTML5 Canvas 游戏。为此，我必须能够分辨出用户在画布中点击的位置。我可以这样做：

```
mouse = new Object();
mouse = {
   //Assign Temp Values 
   x: 0,
   y: 0,
   click: function(event) {
       //Code to get location and assign to mouse.x and mouse.y then handle click
   }
};

$(document).ready(function() {
    $('#canvas').click(function(evt) {mouse.click(evt);}); 
}); 
```

或者我可以这样做：

```
mouse = new Object();
mouse = {
    x: 0,
    y: 0
}

$(document).ready(function() {
    $('#canvas').click(function(evt) {
        //Code here to get location and assign to mouse.x and mouse.y and then handle click
    });
}); 
```

我知道在这种情况下，后者的代码更少，并且我已经看到其他语言的类似问题，但我想知道在 JavaScript 中使用事件处理方法或单独的函数是否有任何优势。例如：一种是良好的编程习惯，或者更高效，甚至更容易阅读。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:47:52.507

我想到的唯一重要的事情是：如果您使用方法，则将`this`其设置为调用该方法的对象。但是，根据浏览器的不同，`this`可能会有更有用的值进入事件处理程序，这将是很好的保留。你总是可以将它传递给方法，但是如果你使用一个函数，`this`那么函数体内的值是不变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:04:10.813

性能方面，第二种方法稍微快一些，因为您少了一个方法调用，但没有显着差异。

[http://jsperf.com/method-vs-callback](http://jsperf.com/method-vs-callback)

# c++ - 程序结束时出现分段错误

> ID：10711992
> 
> 赞同：0
> 
> 时间：2012-05-23T00:37:39.153
> 
> 标签：c++, segmentation-fault

我在程序的最后出现了分段错误问题。除了唯一的错误消息外，一切都按预期工作。只有当我从我的菜单中选择第二个选项（参见下面的 menu.cpp）时，才会出现一个，它需要一个图形类方法（参见 Graf.cpp -“odszukaj_dfs”）。完成所有任务后，它会退出并出现上述错误。这意味着我的错误只有在我的会话期间使用此方法时才会发生，在我通过菜单选项 #4 安全退出会话之后，无论在这两个调用之间做了什么（调用了哪些菜单选项）。

我会很感激任何关于什么是错的提示。如果您需要我的更多代码来解决它，请告诉我，我没有发布所有代码，以免使我的帖子过于臃肿。其次，请原谅我的代码中没有使用英语——这个项目是为我的大学而设计的，我必须坚持我的母语。先感谢您。

至于程序本身要做什么 - 它是从文件中读取图形并能够对其执行深度优先搜索。做后者时会出现问题。

```
//main.cpp
#include <iostream>
#include "wczytywanie_grafu/wczytaj_nazwe_pliku.h"
#include "wczytywanie_grafu/wczytaj_graf.h"
#include "menu/menu.h"
#include "graf_struktura/Graf.h"

int main( int argc, char *argv[] )
{
    using namespace std;
    const char* npliku = wczytaj_nazwe_pliku( argc, argv );
    if( npliku != 0 )
    {
        Graf *g = poprosze_graf(npliku);
        while( menu(*g) );
        delete g;
    }
    cout << "Do widzenia.\n";
    return 0;
} 
```

这是问题发生的地方：

```
//menu.cpp
#include "menu.h"
#include <iostream>

  //wyswietla menu dostepnych operacji na poprawnie wczytanym grafie.
bool menu(Graf &g)
{
    using namespace std;
    int i;
    char *token;

    cout << endl;
    cout << "Jaka operacje wykonac na wczytanym grafie?\n";
    cout << endl;
    cout << "1) Wyswietlic schemat.\n";
    cout << "2) Wyszukac wierzcholek metoda DFS.\n";
    cout << "3) Wczytac inny graf.\n";
    cout << "4) Opuscic program.\n";
    cout << endl;
    cout << "Prosze o wybor jednej z powyzszych opcji. ";
    while( !(cin >> i) || i < 1 || i > 4 )
    {
        cin.clear();
        cin.ignore(1000, '\n');
        cout << "\nBlad. Prosze podac desygnujaca odpowiedz liczbe z podanego zakresu. ";
    }
    cout << endl;
    switch( i )
    {
        case 1 :
            g.wyswietl();
            break;
        case 2 :
            cout << "Prosze podac nazwe szukanego wierzcholka. ";
            cin >> token;
            cout << "Odwiedzone wierzcholki: ";
            if( g.odszukaj_dfs(token) == 0 )
                cout << "\nNie odnaleziono wierzcholka " << token << ".\n";
            else
                cout << "\nOdnaleziono wierzcholek " << token << ".\n";
            break;
//      case 3 :
//
//          break;
        case 4 :
            return false;
    }
    return true;
} 
```

这是图形定义（“Graf”用于图形，“Wierzcholek”用于其节点）

```
//Graf.cpp
#include "Graf.h"
#include "../lifo/TabDyn.h"
#include "../lifo/Stos.h"
#include <cstring>

/*###########################################################*/
/*####################### WIERZCHOLEK #######################*/
/*###########################################################*/

 /*konstruktory*/
Wierzcholek::Wierzcholek(void)
{
sasiedztwo = -1; 
nastepny = poprzedni = 0;
sasiedzi = new Wierzcholek* [1*sizeof(Wierzcholek*)];
}

Wierzcholek::Wierzcholek(char* k)
{
    klucz = k;
      //wierzcholek izolowany grafu.
    sasiedztwo = 0;
    nastepny = poprzedni = 0;
    sasiedzi = new Wierzcholek* [1*sizeof(Wierzcholek*)];
}    

Wierzcholek::Wierzcholek(char* k, int s)
{
    klucz = k; sasiedztwo = s;
    nastepny = poprzedni = 0;
      //przygotowanie tablicy sasiadow o stosownym rozmiarze
    sasiedzi = new Wierzcholek* [s*sizeof(Wierzcholek*)];
}

Wierzcholek::Wierzcholek(char* k, int s, Wierzcholek** &n)
{
      //typowy wierzcholek grafu.
    klucz = k; sasiedztwo = s; sasiedzi = n;
    nastepny = poprzedni = 0;
}

Wierzcholek::Wierzcholek(char* k, int s, Wierzcholek** &n, Wierzcholek* &nast , Wierzcholek* &poprz)
{
      //typowy wierzcholek grafu.
    klucz = k; sasiedztwo = s; sasiedzi = n;
    nastepny = nast; poprzedni = poprz;
}

 /*przeciazenia i metody*/
 //relacja rownowaznosci obiektow oparta na identycznosci kluczy
bool Wierzcholek::operator==(Wierzcholek const &prawy) const
{
    if ( klucz == prawy.klucz )
        return true;
    else
        return false;
}

void Wierzcholek::okresl_ilosc_sasiadow(int n)
{
    delete [] sasiedzi;
    sasiedzi = new Wierzcholek* [n*sizeof(Wierzcholek)];
    sasiedztwo = n;
}

/*###########################################################*/
/*########################### GRAF ##########################*/
/*###########################################################*/

 /*konstruktor*/
Graf::Graf(void)
{
    pierwszy = ostatni = 0;
    rozmiar = 0;
}

 /*metody*/
void Graf::dodaj(Wierzcholek* w)
{
    if ( pierwszy != 0 )
    {
        w->poprzedni = ostatni;
        ostatni = w;
        ostatni->poprzedni->nastepny = ostatni;
    }
    else 
        pierwszy = ostatni = w;
    ostatni->pozycja = rozmiar++;
}

void Graf::wyswietl(void)
{
    using namespace std;
    Wierzcholek *n = pierwszy;
    for( int j=0; j < rozmiar; n = n->nastepny)
    {
        cout << n->klucz << " :";
        for( int i=0; i < n->sasiedztwo; i++ )
            cout << " " << n->sasiedzi[i]->klucz;
        cout << " ;\n";
        j++;
    } 
    return;
}

int Graf::podaj_rozmiar(void)
{
    return rozmiar;
}

Wierzcholek* Graf::odszukaj_dfs(char* &klucz)
{
    using namespace std;

      //tablica przyporzadkowujaca kazdemu kolejnemu wierzcholkowi grafu
      //binarna wartosc oznaczajaca fakt odwiedzenia wierzcholka przez algorytm.
    TabDyn<bool> odwiedzony;
    for(int i=0; i < rozmiar; i++) 
        odwiedzony.dodaj(0);

      //stos wierzcholkow sasiadujacych z juz odwiedzonymi wierzcholkami.
    Stos< Wierzcholek* > stos;
      //wierzcholek zdjety ze stosu.
    Wierzcholek* biezacy = pierwszy;
      //kolejny wierzcholek ciagu wierzcholkow grafu,
      //uwzgledniony, aby nie pominac wierzcholkow izolowanych.
    Wierzcholek* numerowany = pierwszy;
      //zmienna pomocnicza stworzona dla przejrzystosci kodu
      //wierzcholek sasiadujacy z biezacym
      //dokladany na stos, jezeli nie zostal jeszcze odwiedzony.
    Wierzcholek* sasiad = 0;

      //elementow grafu jest dokladnie "rozmiar".
    for( int i=0; i < rozmiar; i++, numerowany=numerowany->nastepny )
    {
cout << "plus: " << numerowany->klucz << endl;
        if( odwiedzony[numerowany->pozycja] )
            continue;
        stos.doloz( numerowany );
        while( !stos.jest_pusty() )
        {
            biezacy = stos.zdejmij();
            if ( odwiedzony[biezacy->pozycja] )
                continue;
            else
                odwiedzony[biezacy->pozycja] = true;
            if( strcmp(biezacy->klucz, klucz) == 0 )
            {
                cout << endl;
                return biezacy;
            }
              //sasiadow jest dokladnie "sasiedztwo".
            for( int j=0; j < biezacy->sasiedztwo; j++)
            {
                sasiad = biezacy->sasiedzi[j];
                if( !odwiedzony[sasiad->pozycja] )
                    stos.doloz(sasiad);
            }
        }
    }
    cout << endl;
    return 0;
} 
```

以下是 Stack（此处为“Stos”）和动态分配表（此处为“TabDyn”）的文件

```
#ifndef STOS_H
#define STOS_H

template<typename T> class TabDyn;

template<typename T>
class Stos
{
private:
    /*pola*/
    TabDyn<T>* pula;

public:
    /*konstruktory*/
    Stos(void);
    Stos(int);
    ~Stos(void);
    /*metody*/
    void wyczysc(void);
    bool jest_pusty(void) const;
    T& top(void);
    T zdejmij(void);
    void doloz(const T&);
};

#include "Stos.tcc"

#endif

//Stos.tcc
#ifndef STOS_TCC
#define STOS_TCC

#include "TabDyn.h"

template<typename T>
Stos<T>::Stos(void)
{
    pula = new TabDyn<T>;
}

template<typename T>
Stos<T>::Stos(int rozmiar)
{
    pula = new TabDyn<T>(rozmiar);
}

template<typename T>
Stos<T>::~Stos(void)
{
    delete pula;
}

template<typename T>
void Stos<T>::wyczysc(void)
{
    pula->wyczysc();
}

template<typename T>
bool Stos<T>::jest_pusty(void) const
{
    return pula->jest_pusty();
}

template<typename T>
T& Stos<T>::top(void)
{
    return pula->koniec();
}

template<typename T>
T Stos<T>::zdejmij(void)
{
     //nalezy uprzednio sprawdzic czy stos nie jest pusty!
    T el = pula->koniec();
    pula->usun();
    return el;
}

template<typename T>
void Stos<T>::doloz(const T& el)
{
    pula->dodaj( el );    
}

#endif

//TabDyn.h
#ifndef TABDYN_H
#define TABDYN_H

using namespace std;

int const STD_ROZMIAR = 50;

/*###########################################################*/
template<typename T>
class TabDyn
{
private:
    /*pola*/
    int max_rozmiar;
    int akt_rozmiar;
    T *przydzial_pamieci;

public:
    /*metody*/
    TabDyn(int rozmiar = STD_ROZMIAR);
    T& operator[](int i);
     //usuwa stary przydzial pamieci i nadaje nowy
    bool zarezerwuj(int);
     //chyba: wyjebac stary przydzial i przydzielic nowy
    void wyczysc(void);
     //sprawdzic akt_rozmiar
    bool jest_pusty(void);
     //wskaznik na poczatek plus akt_rozmiar
    T& koniec(void);
    bool usun(void);        //!!! pop_back
     // void doloz_nkoniec( const T& ); //!!! push_back
    void dodaj( const T& ); //!!! push_back

};

#include "TabDyn.tcc"

#endif

//TabDyn.tcc
#ifndef TABDYN_TPP
#define TABDYN_TPP

#include <iostream>

/*###########################################################*/

template<typename T>
TabDyn<T>::TabDyn(int rozmiar)
{
    przydzial_pamieci = new T [rozmiar*sizeof(T)];
    max_rozmiar = rozmiar;
    akt_rozmiar = 0;
}

template<typename T>
T& TabDyn<T>::operator[](int i)
{
    if( i >= 0 && i < akt_rozmiar )
    {
        return *(przydzial_pamieci + i);
    }
    cout << "Blad: Zarzadano wartosci tablicy dynamicznej spoza zakresu. Podano wartosc ostatniego elementu.\n";
    return *(przydzial_pamieci + akt_rozmiar);

}

template<typename T>
bool TabDyn<T>::zarezerwuj(int wolumen)
{
    if ( max_rozmiar == wolumen )
        return true;
    if ( wolumen < akt_rozmiar )
    {
        cout << "Blad: Nowy zadany rozmiar tablicy dynamicznej nie jest w stanie pomiescic elementow, ktore juz sie w niej znajduja. Odmowa wykonania operacji. " << endl;
        return false;
    }
    T *npamiec = new T [wolumen*sizeof(T)];
    if ( ! jest_pusty() )
    {
        for( int i=0; i < akt_rozmiar; i++ )
        {
            *(npamiec + i) = *(przydzial_pamieci + i);
        }
    }

    max_rozmiar = wolumen;
    delete [] przydzial_pamieci;
    przydzial_pamieci = npamiec;
    return true;
}

template<typename T>
void TabDyn<T>::wyczysc(void)
{
    delete [] przydzial_pamieci;
    przydzial_pamieci = new T [max_rozmiar*sizeof(T)];
}

template<typename T>
bool TabDyn<T>::jest_pusty(void)
{
    return !akt_rozmiar;
}

  //zwraca ostatni element tablicy
template<typename T>
T& TabDyn<T>::koniec(void)
{
    T& ans = *(przydzial_pamieci + akt_rozmiar - 1);
    if( !akt_rozmiar )
        std::cout << "Blad, stos jest pusty.\n";
    return ans;
}

  //usuwa ostatni element tablicy
template<typename T>
bool TabDyn<T>::usun(void)
{
    if ( akt_rozmiar == 0 )
    {
        std::cout << "Blad: Nie mam co usunac.\n";
        return false;
    }
    akt_rozmiar--;
    return true;        
}

  //dodaje ostatni element tablicy
template<typename T>
void TabDyn<T>::dodaj( const T& el )
{
    if ( akt_rozmiar + 1 > max_rozmiar )
    {
        cout << "Uwaga: przekroczono rozmiar tablicy dynamicznej. Zostanie przydzielona nowa wielkosc." << endl;
        zarezerwuj(max_rozmiar+1);
    }
    *(przydzial_pamieci + akt_rozmiar++) = el;
}

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:46:41.757

在程序结束时，析构函数针对`static`全局对象运行。我在你的代码中看不到任何一个，当然除了`cin`你`cout`使用的。但是您继续成功地使用两者，这表明您没有用野指针破坏它们的内存。

我会检查您未显示的其他文件中是否有任何具有静态存储持续时间的变量，并查找影响这些对象的缓冲区溢出。

如果您有 Linux，请尝试`valgrind`. 它将捕获大多数指针错误。

# actionscript-3 - 数据网格内联项渲染更改数据提供者值

> ID：10711993
> 
> 赞同：1
> 
> 时间：2012-05-23T00:37:39.497
> 
> 标签：actionscript-3, apache-flex, flash-builder, mxml

我用内联 itemrenderer 创建了一个数据网格。渲染器是一个下拉列表。当 dropdowlist 值更改时，我想更新 dataprovider 但我没有找到如何做到这一点。你能帮助我吗？

谢谢

```
[Bindable] private var DP_PRAT_INIT:ArrayCollection;

<s:DataGrid id="dgTuVous" fontWeight="normal" 
                                        dataProvider="{DP_PRAT_INIT}"
                                        width="100%" height="100%" 
                                        horizontalScrollPolicy="on"
                                        fontSize="10"

                                        >
                                <s:columns>
                                    <s:ArrayList>
                                        <s:GridColumn dataField="prInitiales" width="40" headerText="Prat" />
                                        <s:GridColumn  width="75" dataField="prTuVous"
                                                      headerText="Tu/Vous" editable="true">
                                            <s:itemRenderer>
                                                <fx:Component>
                                                    <s:GridItemRenderer>
                                                        <fx:Script>
                                                            <![CDATA[
                                                                import spark.events.IndexChangeEvent;

                                                                protected function ddlTuVous_changeHandler(event:IndexChangeEvent):void
                                                                {

                                                                    DP_PRAT_INIT[ddlTuVous.selectedIndex].prTuVous=ddlTuVous.selectedItem;

                                                                    trace ("ddlTuVous.selectedItem" +ddlTuVous.selectedItem) ;

                                                                }

                                                            ]]>
                                                        </fx:Script>
                                                        <s:DropDownList width="100%" selectedIndex="1" id="ddlTuVous"
                                                                        change="ddlTuVous_changeHandler(event)">
                                                            <s:dataProvider>
                                                                <s:ArrayList>
                                                                    <fx:String>Tu</fx:String>
                                                                    <fx:String>Vous</fx:String>
                                                                </s:ArrayList>
                                                            </s:dataProvider>
                                                        </s:DropDownList>
                                                    </s:GridItemRenderer>
                                                </fx:Component>
                                            </s:itemRenderer>

                                        </s:GridColumn>

                                    </s:ArrayList>
                                </s:columns>
                            </s:DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:52:21.600

您使用属性引用主机控件`outerDocument`......所以`outerDocument.DP_PRAT_INIT`如果您想访问该数组，您可以调用。但是，该数组是私有的，因此您必须将其公开。或者，您可以创建一个可以调用的公共函数，`outerDocument`但是......糟糕。

如果我正确理解您的代码，您应该访问的`data`属性与`GridItemRenderer`它相同，`outerDocument.DP_PRAT_INIT[ddlTuVous.selectedIndex]`只是它更好，因为您没有可能的索引不匹配......

所以，你真正想要的是：

```
data.prTuVous = ddlTuVous.selectedItem; 
```

# git - 运行多个 jenkins 作业访问/提交同一个 repo 时出现 git 并发错误

> ID：10711994
> 
> 赞同：2
> 
> 时间：2012-05-23T00:37:41.643
> 
> 标签：git, continuous-integration, jenkins

我在 jenkins 中运行多个作业，它们都在同一个 repo 中但在不同的文件中工作，但有时在推送时似乎存在竞争条件错误。

当两个作业（或更多）同时运行时会发生这种情况。他们从 github repo 中提取，然后在每个作业中更改不同的文件，什么时候推送以及在第二个作业之前推送另一个作业，最终会出现推送问题。试图解决这个竞争条件我在提交之前做'git pull'，然后我再做一次'git pull'，以防在那段时间另一个工作更新了repo，然后我运行'git push'但有时另一个工作之前推送我可以推动导致推动失败

有没有办法只告诉 git 推送一个文件？（我不相信，但可能是我错了）或者有人遇到这种情况并有避免这种竞争条件的好方法？

这是我通常得到的错误：

```
git push 
Error reading response length from authentication socket.
To git@github.com:<my repo>.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:<my repo>.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details. 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:48:47.087

首先，如果你的 CI 系统提交并推送到 git 存储库，你可能做错了。但也许你有一个非常非常好的理由这样做。

解决此问题的唯一方法是防止提交和推送的作业同时运行。您可以通过使用像[https://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin)之类的插件或创建一个只有 1 个执行程序的从站并将此类作业限制为仅在该从站上运行来做到这一点.

# android - Android Activity 中的 LibGDX

> ID：10711995
> 
> 赞同：11
> 
> 时间：2012-05-23T00:37:53.320
> 
> 标签：android, android-intent, transition, libgdx

我正在为 Android 开发一个小型应用程序，使用 Android UI 和活​​动进行大部分交互，但是一个关键方面需要使用 LibGDX（使用 3D 模型和物理）。我希望能够在我的应用程序（我的“激活”类）中单击一个按钮，该按钮将打开初始化并运行所有 LibGDX 代码的“AndroidApplication”类（我的“Bobble”类）。

我的问题是我不能使用“Intent”来启动 AndroidApplication 类（据我所知只有一个 Activity）。我敢肯定，过去人们不得不解决这个问题，所以任何帮助都会很棒。

到目前为止，这是我的代码：

```
public class Activate extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try
        {
        setContentView(R.layout.activate_screen);

        Button b_Run = (Button) findViewById(id.bActiveRun);

        b_Run.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent to_Bobble = new Intent(v.getContext(), Bobble.class);
            startActivity(to_Bobble);
        }
    });
    }
    catch (Exception e) 
    {
        Log.e("Activate", "Error in activity", e);

        Toast.makeText(getApplicationContext(), 
                        e.getClass().getName() + " " + e.getMessage(), 
                        Toast.LENGTH_LONG).show();
    }
} 
```

}

```
public class Bobble extends AndroidApplication {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        LifeCycle loop = new LifeCycle();
        loop.ddgSettings = new ddgSystemSettings(this);
        initialize(loop, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T13:30:56.607

好的，我现在可以确认上面的代码完全没有问题。问题是我没有在 AndroidManifest 文件中声明我的“Bobble”类/文件，这导致了运行时错误。