# StackOverflow 问答 10434000-10434999

# node.js - 带有 express.js 的静态文件

> ID：10434001
> 
> 赞同：247
> 
> 时间：2012-05-03T14:58:12.227
> 
> 标签：node.js, express

我想将子目录作为静态文件`index.html`提供服务。`/media`索引文件应同时提供 at`/index.html`和`/`URL。

我有

```
web_server.use("/media", express.static(__dirname + '/media'));
web_server.use("/", express.static(__dirname)); 
```

但第二行显然服务于整个`__dirname`，包括其中的所有文件（不仅仅是`index.html`and `media`），这是我不想要的。

我也试过

```
web_server.use("/", express.static(__dirname + '/index.html')); 
```

但是访问基本 URL`/`然后会导致对`web_server/index.html/index.html`（双`index.html`组件）的请求，这当然会失败。

有任何想法吗？

* * *

顺便说一句，我在 Express 中完全找不到关于这个主题的文档（`static()`+ 它的参数）......令人沮丧。也欢迎提供文档链接。

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-05-04T07:57:30.223

如果你有这个设置

```
/app
   /public/index.html
   /media 
```

那么这应该得到你想要的

```
var express = require('express');
//var server = express.createServer();
// express.createServer()  is deprecated. 
var server = express(); // better instead
server.configure(function(){
  server.use('/media', express.static(__dirname + '/media'));
  server.use(express.static(__dirname + '/public'));
});

server.listen(3000); 
```

诀窍是将这条线作为最后的后备

```
 server.use(express.static(__dirname + '/public')); 
```

至于文档，由于 Express 使用连接中间件，我发现直接查看连接源代码更容易。

例如，这一行显示支持 index.html [https://github.com/senchalabs/connect/blob/2.3.3/lib/middleware/static.js#L140](https://github.com/senchalabs/connect/blob/2.3.3/lib/middleware/static.js#L140)

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2013-05-13T14:32:40.297

在 express 的最新版本中，“createServer”已被弃用。这个例子对我有用：

```
var express = require('express');
var app = express();
var path = require('path');

//app.use(express.static(__dirname)); // Current directory is root
app.use(express.static(path.join(__dirname, 'public'))); //  "public" off of current is root

app.listen(80);
console.log('Listening on port 80'); 
```

* * *

## 回答 #3

> 赞同：116
> 
> 时间：2012-05-03T22:25:51.280

`express.static()`期望第一个参数是目录的*路径*，而不是文件名。我建议创建另一个子目录来包含您`index.html`并使用它。

在 Express[文档](https://expressjs.com/en/starter/static-files.html)或[更详细的`serve-static`文档](https://expressjs.com/en/resources/middleware/serve-static.html)中提供静态文件，包括[服务的默认行为`index.html`](https://expressjs.com/en/resources/middleware/serve-static.html#index)：

> 默认情况下，此模块将发送“index.html”文件以响应对目录的请求。要禁用此设置 false 或提供新索引，请按首选顺序传递字符串或数组。

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2017-04-09T22:43:36.913

`res.sendFile`&`express.static`两者都将为此工作

```
var express = require('express');
var app = express();
var path = require('path');
var public = path.join(__dirname, 'public');

// viewed at http://localhost:8080
app.get('/', function(req, res) {
    res.sendFile(path.join(public, 'index.html'));
});

app.use('/', express.static(public));

app.listen(8080); 
```

`public`客户端代码所在的文件夹在哪里

正如@ATOzTOA所[建议](https://stackoverflow.com/questions/10434001/static-files-with-express-js/43312722?noredirect=1#comment87150340_43312722)和[@Vozzie所](https://stackoverflow.com/u/1729773)[阐明的](https://stackoverflow.com/questions/10434001/static-files-with-express-js/43312722?noredirect=1#comment87239542_43312722) [那样](https://stackoverflow.com/u/2178666/)，`path.join`将要加入的路径作为参数，`+`将单个参数传递给路径。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-04-02T05:35:52.073

```
const path = require('path');

const express = require('express');

const app = new express();
app.use(express.static('/media'));

app.get('/', (req, res) => {
    res.sendFile(path.resolve(__dirname, 'media/page/', 'index.html'));
});

app.listen(4000, () => {
    console.log('App listening on port 4000')
}) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-10-07T05:55:52.083

如果您有复杂的文件夹结构，例如

```
- application
     - assets
         - images
             - profile.jpg
     - web
     - server
        - index.js 
```

如果您想`assets/images`从`index.js`

```
app.use('/images', express.static(path.join(__dirname, '..', 'assets', 'images'))) 
```

从浏览器查看

```
http://localhost:4000/images/profile.jpg 
```

如果您需要更多澄清评论，我会详细说明。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-11T18:53:15.730

在你的 app.js 中使用下面

```
app.use(express.static('folderName')); 
```

（folderName 是包含文件的文件夹） - 请记住，这些资产是通过服务器路径直接访问的（即[http://localhost:3000/abc.png](http://localhost:3000/abc.png) （其中 abc.png 在 folderName 文件夹内）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-10-02T19:04:19.887

> npm 安装服务索引

```
var express    = require('express')
var serveIndex = require('serve-index')
var path = require('path')
var serveStatic = require('serve-static')
var app = express()
var port = process.env.PORT || 3000;
/**for files */
app.use(serveStatic(path.join(__dirname, 'public')));
/**for directory */
app.use('/', express.static('public'), serveIndex('public', {'icons': true}))

// Listen
app.listen(port,  function () {
  console.log('listening on port:',+ port );
}) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-06-29T09:52:52.390

我会在[express docs](https://expressjs.com/en/starter/static-files.html)上添加一些内容，但有时会在教程或其他内容中被误读。

```
app.use(mountpoint, middleware) 
```

**mountpoint**是一个虚拟路径，它不在文件系统中（即使它确实存在）。中间件的挂载点是`app.js`文件夹。

现在

```
app.use('/static', express.static('public')` 
```

将带有路径的文件发送`/static/hell/meow/a.js`到`/public/hell/meow/a.js`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-27T09:33:15.607

当我提供指向 HTML 文件的链接时，这是我的错误。

**前：**

```
<link rel="stylesheet" href="/public/style.css"> 
```

**后：**

```
<link rel="stylesheet" href="/style.css"> 
```

我刚刚从链接中删除了静态目录路径，错误就消失了。这解决了我的错误一件事，别忘了把这条线放在你正在创建服务器的地方。

```
var path = require('path');
app.use(serveStatic(path.join(__dirname, 'public'))); 
```

# parsing - 编写 Prolog 解析器

> ID：10434002
> 
> 赞同：1
> 
> 时间：2012-05-03T14:58:12.863
> 
> 标签：parsing, prolog, dcg

我正在尝试为语法编写一个简单的解析器。解析器不需要创建解析树，只识别句子是否与语法匹配。到目前为止，我有以下谓词，使用 DCG 表示法：

```
 program-->[].
    program-->stmt_list.
    stmt_list-->stmt,stmt_list.
    stmt-->[id,:=],expr;[read],[id];[write],expr.
    expr-->term, term_tail.
    term_tail-->add_op,term,term_tail.
    term_tail-->[].
    term-->factor, factor_tail.
    factor_tail-->mult_op, factor, factor_tail.
    factor_tail-->[].
    factor-->[(expr)].
    factor-->[id].
    factor-->[number].
    add_op-->[+].
    add_op-->[-].
    mult_op-->[*].
    mult_op-->[/]. 
```

使用诸如 program([read,id],[]) 之类的查询。我应该得到一个真实的回应，但我得到的是一个虚假的回应。造成这种情况的原因是什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:40:47.990

`stmt_list`也可以为空。添加`stmt_list --> []`解决问题。

# c++ - 对析构函数的怀疑

> ID：10434003
> 
> 赞同：1
> 
> 时间：2012-05-03T14:58:13.817
> 
> 标签：c++

假设我有一堂课：

```
class ClassX{
   private:
      int* p;
      int i;
   ....
} 
```

在我做的某处：

```
ClassX x;
.....
//and in a friend function or in a ClassX function
p = (int*) malloc (.....); 
```

然后当`x`退出它的作用域时，析构函数被调用；但它不会释放由`malloc`权利分配的内存？

如果我重新定义它：

```
ClassX::~ClassX(){ delete [] p; } 
```

它释放了分配的内存，`malloc`但没有释放为类的字段（即`i`和`p`）分配的内存？

我错过了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:06:34.187

首先，记住以下几点：

1.  分配的东西`malloc`需要释放`free`
2.  不要使用`malloc`
3.  分配的东西`new`必须由`delete`
4.  分配的东西`new[]`必须由`delete[]`
5.  一份`delete`一份，`new`一份一份`delete[]``new[]`
6.  不要使用上述任何一种

那么，你的想法是正确的，没有析构函数，分配的内存`malloc`将不会被释放。如果您遵循上述规则，那么您需要使用`free`( **not`delete[]`** ) 来释放它：

```
ClassX::~ClassX() { free(p); } 
```

但是，您首先不应该`malloc`在 C++ 中使用，因为它不调用对象的构造函数，您应该使用`new`：

```
ClassX::ClassX() : p(new int) { }

// NOW we use delete since we used new (not delete[] since we didn't use new[])
ClassX::~ClassX() { delete p; } 
```

但是，如果这样做，则必须编写复制构造函数、复制赋值运算符、移动构造函数和移动赋值运算符。那么让我们看一个更好的方法：

```
class ClassX{
private:
    ClassX();

    std::unique_ptr<int> p;
    int i;
    ....
};

// we have to break rule #6 here
ClassX::ClassX() : p(new int) { } 
```

现在您甚至不必编写析构函数，您只需让智能指针为您处理它，因为它会在调用析构函数时自动调用`delete`您使用的东西`new`。这导致我们...

## 你的另一个问题：

> 它释放了 malloc 分配的内存，但没有释放为类的字段（即 i 和 p）分配的内存？

**这大约是正确的 1/4。**因为`i`和`p`是类的成员，所以当封闭类被释放时，它们会自动被释放，如果它们本身是类，它们的析构函数将被调用。因此，如果您放入`delete`析构函数，它会处理由 分配的内存`new`，`i`并且`p`会自动清理，一切都很好。（你只正确了 1/4，因为你使用了错误的释放函数。）

这意味着，如果你使用智能指针，当你的对象被破坏时，智能指针的析构函数会被调用，它会自动释放你分配`new`给你的东西。所以你甚至不需要担心它。

这一切都假设你*真的想*在你的课程中加入动态`int`。如果可以的话，您更愿意存储`int`按值（而不是存储指向它的指针），这样您就不必弄乱智能指针、释放或任何其他东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:02:46.777

简单的规则是：每一个都`malloc`必须有一个`free`；对于每一个`new`，都必须有一个`delete`；每一个都`new[]`必须有一个`delete[]`。

要回答您的问题：

> [析构函数] 不会释放 malloc 分配的内存吧？

正确的。它不是。在这种情况下，您调用了`malloc`，但从未调用过`free`。

> [修改后的析构函数] 释放 malloc 分配的内存，而不是为类的字段分配的内存？

错误的。它不会释放内存（您必须使用`free`，而不是`delete[]`在这种情况下。`free`是`malloc`合作伙伴。`delete[]`是`new[]`合作伙伴。您不能切换合作伙伴。）

同样错误的是，它确实释放了为类的字段分配的内存（假设这些字段是非指针类型。）释放对象占用的内存发生*在*析构函数返回之后。

> 我错过了什么吗？

如果你打算使用原始指针，你还需要了解[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。但是，更好的是，永远不要使用原始指针。使用[智能指针](http://en.cppreference.com/w/cpp/memory/shared_ptr)或[容器](http://en.cppreference.com/w/cpp/container)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:04:08.337

如果您手动分配内存，则必须释放它，它不会自动为您释放。

如果你调用`malloc`(or `calloc`, or `realloc`) 你需要`free`那个记忆。同样，如果你`new`的东西`delete`它，并且`new[]`必须被匹配`delete[]`。

话虽如此，您正在使用 C++ 进行编程，并且很少有充分的理由手动管理内存。使用智能指针，[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)用于共享所有权，使用[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)否则。

然后你的班级看起来像这样：

```
#include <memory>

class ClassX{
   private:
      std::unique_ptr<int> p;
      int i;
      ....
};

ClassX::ClassX() : p( new int ) {} /* No need to deallocate p manually */ 
```

请注意，它`unique_ptr`也对数组有部分特化，因此如果`p`指向数组，您可以按如下方式分配内存：

```
class ClassX{
   private:
      std::unique_ptr<int[]> p;
      int i;
      ....
};

Class::ClassX() : p ( new int[10] ) {} 
```

您也可以完全忘记处理指针并使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)or [`std::array`](http://en.cppreference.com/w/cpp/container/array)，尤其是对于像整数数组这样简单的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T15:05:04.453

你的析构函数应该释放 p 是正确的，但是如果你分配`malloc`你应该释放内存`free`。或者，您可以使用以下方式分配内存：

`x.p = new int[size];`

这意味着您的`delete[] p`; 析构函数是正确的。

关于类的成员变量，您不必担心删除它们，如果您的对象是在堆栈上分配的，那么当堆栈展开时它们将被删除。如果你的类是在堆上分配的，那么当你`delete x;`. 无论哪种方式，它们的生命周期都与包含它们的对象相关联。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T15:06:20.183

为了简单起见，我总是告诉自己一个指针只是一个整数。（取决于系统，它可以是 16、32 或 64 位长）。它是一个特殊的整数，有助于定义地址，但**它只是一个整数**。

因此，当您构造 X 类时，它会为两个“整数”分配空间。一个叫p，另一个叫i。当类被销毁时，它会释放两个整数和一些东西的空间。

析构函数不会打扰您对特殊整数 p （表示地址）的值所做的事情。您可以像以前那样创建内存，或者创建一个随机数：在表示 X 类的内存中都是一样的：只是一个整数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T15:06:31.970

规则很简单：

*   分配的内存`new`应该用 释放`delete`。
*   分配的内存`new []`应该用 释放`delete []`。
*   分配的内存`malloc()`应该用 释放`free()`。

请注意，您需要将分配函数返回的完全相同的地址传递给解除分配函数。

**良好做法：**

*   除非您真的需要动态分配，否则避免动态分配始终是一个好习惯。
*   如果必须，您应该使用某种适合您要求的智能指针，使用哪个智能指针的决定取决于所有权和所涉及的生命周期语义。
*   在 C++ 中，很少有人需要使用`malloc`并且`free`不使用它们，除非你有充分的理由这样做，

此外，在您的情况下，您还需要遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**才能使您的程序正常工作。

# java - Java正则表达式查找方法的参数

> ID：10434004
> 
> 赞同：0
> 
> 时间：2012-05-03T14:58:14.520
> 
> 标签：java, regex

我正在尝试找到一个正则表达式来拆分对方法的调用

```
boo(a,b), c 
```

所以它会返回

```
boo(a,b) 
```

和

```
c 
```

被它分开后。可以用正则表达式来做吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:08:59.343

正则语言不能表达递归。当您意识到解决方案将涉及递归时，不可能在“纯”正则表达式引擎中表达这一点（实际上，大多数正则表达式引擎都有某种扩展以允许有限地违反此规则）。

既然您是在 Java 上下文中编写的 - 为什么不使用漂亮的*编程语言*来执行这个相当简单的字符串操作，而不是尝试将正则表达式[硬塞](http://regex.info/blog/2006-09-15/247#comment-3085)到解决方案中呢？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:16:08.147

我不确定你对你的问题真正想要什么，但在给定的情况下：

```
"boo(a,b), c".split("(?<=\\)),") //look for a ',' preceeded by ')' 
```

给你一个包含`["boo(a,b)","c"]`.

编辑 ：

对于这种情况：**boo(a(a,b),b),c**，使用：

```
"boo(a(a,b),b),c".split("(?<=\\)),(?!(\\w\\p{Punct}?)+\\))") 
```

`(?!(\\w\\p{Punct}?)+\\))`**表示如果后面跟着（一个单词和一个或零个标点符号）*n 次***和**一个右括号**，则您不接受匹配。

结果是一个包含`["boo(a(a,b),b)","c"]`.

# php - 在php中使用javascript验证复选框

> ID：10434005
> 
> 赞同：2
> 
> 时间：2012-05-03T14:58:18.353
> 
> 标签：php, javascript

我正在尝试验证表单中的复选框。

我的表格如下：

```
<form name="results" action=request_job.php method="post" 
onsubmit="return validateForm.apply(this)">
<td name='checkb'colspan='2' class="noborder" width='100%' align="center">
                <input type='checkbox' name='ModelArray[]' value='1'>m1
                                    <input type='checkbox' name='ModelArray[]' value='2'>m2
                                    <input type='checkbox' name='ModelArray[]' value='3'>m3
                                    <input type='checkbox' name='ModelArray[]' value='4'>m4
                                    <input type='checkbox' name='ModelArray[]' value='5'>m5
                                    <input type='checkbox' name='ModelArray[]' value='6'>m6
                                    <input type='checkbox' name='ModelArray[]' value='7'>m7 
```

如果没有选中复选框，我希望有一个警报。我该怎么做呢。我现在已经尝试了很长时间。

谢谢

解决了这个：

```
var wrap=doc.get("checkb");
ArrCB=wrap.getelementbyTagName('input');
ArrCB_l=ArrCB.lenght();
while(ArrCB_l--){
  var CB=ArrCB[ArrCB_l];
  CB.checked()==True;
return 1
}
return 0

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:20:28.617

你可以试试这个（不依赖于 jQuery，因为你没有指定）：

```
(function() {
    window.validateForm = {};
    window.validateForm.apply = function(o) {
        var inputs = document.getElementsByTagName("input");

        for(var i = 0; i < inputs.length; i++) {
            if(inputs[i].type == "checkbox" && inputs[i].checked) 
                return true;
        }
        alert('You must select at least 1');
        return false;
    };
})(); 
```

这将遍历页面中的*所有*输入。一旦找到一个选中的复选框，它将返回 true，如果没有找到，则返回 false。

我添加了`window.validateForm = {}`just 以便它可以工作，如果您已经定义了对象，您可能不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:30:10.187

我会按照以下（非常干净 - 纯浏览器 js）的方式来做（并在[jsfiddle](http://jsfiddle.net/G7b65/3/)上成功尝试过）

```
function validateForm() {
    var i, chks = document.getElementsByName('ModelArray[]');
    for (i = 0; i < chks.length; i++)
        if (chks[i].checked)
            return true;
    alert('No value selected');
    return false;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:21:11.190

从我可以从您的查询中收集到的任何信息中，我已经发布了一个解决方案。看看这是否适合你。

```
<form name="results" action="request_job.php" method="post" onsubmit="return validateForm()">
    <input type='checkbox' name='ModelArray[]' value='1'>m1
    <input type='checkbox' name='ModelArray[]' value='2'>m2
    <input type='checkbox' name='ModelArray[]' value='3'>m3
    <input type='checkbox' name='ModelArray[]' value='4'>m4
    <input type='checkbox' name='ModelArray[]' value='5'>m5
    <input type='checkbox' name='ModelArray[]' value='6'>m6
    <input type='checkbox' name='ModelArray[]' value='7'>m7
    <input type="submit" value="Submit">
</form>

<script type="text/javascript">
function validateForm()
{
    if( $('input[name="ModelArray[]"]:checked').length == 0 )
    {
        alert("You must check atleast one checkbox");
        return false;
    }
    else
        return true;
}
</script> 
```

如果这对你不起作用，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:47:40.820

```
var wrap=doc.get("checkb");
ArrCB=wrap.getelementbyTagName('input');
ArrCB_l=ArrCB.lenght();
while(ArrCB_l--){
  var CB=ArrCB[ArrCB_l];
  CB.checked()==True;
  return 1
 }
 return 0

 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T15:23:21.047

给他们一个独特的类，例如'chbValidate'，然后尝试`if($('.chbValidate:checked').length == 0)`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-03T15:08:14.540

尝试这个：

```
if($('input[name="ModelArray[]"]:checked').length == 0) {
    alert('No checkbox is checked');
} 
```

在您提交时的验证功能中。

# asp.net - 将字符串分钟转换为小时

> ID：10434013
> 
> 赞同：1
> 
> 时间：2012-05-03T14:58:47.487
> 
> 标签：asp.net

我将收到一串分钟，我想将其转换为花费的总时间。

如果是 90 分钟，我想将其转换为 1 小时 30 分钟。

如果是 150 分钟，我希望它转换为 2 小时 30 分钟。

这是我到目前为止所拥有的：

```
DataTable data = GeneralFunctions.GetData( query );
object sumObject;
sumObject = data.Compute( "Sum(Minutes_Spent)", "" );
if ( reportType == 1 )
{
    RepeaterPCBillable.DataSource = data;
    RepeaterPCBillable.DataBind();
    LabelPCBillable.Text = sumObject.ToString();
}
else 
```

我不确定是否有一些内置的时间函数会产生我需要的结果，或者我是否需要进行某种类型的除法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:00:30.513

没有内置任何东西。

您将需要为您的字符串编写自己的解析例程。

C# 中的示例：

```
// assumes input is valid for integer parsing
int totalMinutes = int.Parse(inputString);
int hours = totalMinuts / 60;
int minutes = totalMinutes % 60; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:01:45.660

您可以使用[TimeSpan.FromMinutes](http://msdn.microsoft.com/en-us/library/system.timespan.fromminutes.aspx)，然后从中检索小时和分钟。

```
var span = TimeSpan.FromMinutes(int.Parse(inputString));
var hours = span.Hours;
var minutes = span.Minutes; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:08:59.367

没有什么内置的，但并不难做到。让我们一步一步来。这是我们的示例输入：

```
var input = "130 minutes"; 
```

现在我们使用正则表达式来提取前面的数字`minutes`：

```
var match = Regex.Match(input, @"^(\d+) minutes$");
if (!match.Success)
    throw new Exception("Invalid input format"); 
```

然后，我们将带有分钟的字符串转换为整数：

```
var minutes = int.Parse(match.Groups[1].Value);    // now contains 130 
```

接下来，我们使用整数除法和模运算来分割小时和分钟：

```
var hours = minutes / 60;
minutes = minutes % 60; 
```

最后，我们可以再次将结果格式化为字符串：

```
var result = String.Format("{0} hours and {1} minutes", hours, minutes);  // 2 hours and 10 minutes 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T15:02:30.120

好吧，这是一个通用算法：

```
int hours=string_minutes/60;
int minutes=string_minutes%60; 
```

基本上第一个操作给你商数，然后第二个给你余数/

# c - C 编程错误：从 .txt 文件中读取

> ID：10434015
> 
> 赞同：0
> 
> 时间：2012-05-03T14:58:50.200
> 
> 标签：c, file, matrix, text-files

```
#include<stdlib.h>
#include<stdio.h>

/*

Content of Text FILE

5        // no_of_process   
4        // no_of_resource_type
6 3 4 2  // vector E matrix
3 0 1 1  // 5x4 matrix
0 1 0 0
1 1 1 0
1 1 0 1
0 0 0 0 

*/

int main()
{
    FILE *file;
    int no_of_process;
    int no_of_resource_type;
    int *vector_E;
    int **C;
    int counter = 1, i, k;
    char unwanted[50];

    file = fopen("file_path\\file.txt", "r");
    if(file == NULL){
        printf("NO SUCH A FILE EXISTS!!!");
        exit(1);
    }

    while(!feof(file))
    {
        if(counter == 1){
            fscanf(file, "%d", &no_of_process);           // The number of process is set
            fscanf(file, "100[^\n]", unwanted);           // put in "unwanted" the un wanted chars untill you get \n 
            counter++;                                    // counter for selecting operation type
            printf("\nProcess: %d", no_of_process);
        }

        else if(counter == 2){
             fscanf(file, "%d", &no_of_resource_type);    // The number of resource type is set
             fscanf(file, "100[^\n]", unwanted);          // put in "unwanted" the un wanted chars untill you get \n 
             counter++;                                   // counter for selecting operation type                                
             printf("\nType: %d\n", no_of_resource_type);
        }

        else if(counter == 3){
             vector_E = (int *)malloc(sizeof(int)*no_of_resource_type);  // Allocating memory for vector_E of size # of resource type

             for(i=0; i<no_of_resource_type; i++){                        // fillling vector_E array 
                 fscanf(file, "%d", &vector_E[i]);
                 printf("%d ", vector_E[i]);
             }                        
             fscanf(file, "100[^\n]", unwanted);                         // put in "unwanted" the un wanted chars untill you get \n
             counter++;                                                  // counter for selecting operation type
             printf("\n");                                                  
        }

        else if(counter == 4){
             C = (int**)malloc(sizeof(int *)*no_of_process);             // Allocating memory for Current Allocation Matrix "part1"

             for(i=0; i<no_of_resource_type; i++)                       // Allocating memory for Current Allocation Matrix "part2"
                 C[i] = (int *)malloc(sizeof(int)*no_of_resource_type);

             for(i=0; i<no_of_process; i++){                             // Filling the Current Allocation Matrix
                 for(k=0; k<no_of_resource_type; k++){
                     fscanf(file, "%d", &C[i][k]);
                     printf("%d ", C[i][k]);
                 }
                 printf("\n");

                 // -------------------------------------------------------------------- ???????????
                // Problem is here !!!!!
                // --------------------------------------------------------------------- ???????????

                 fscanf(file, "100[^\n]", unwanted);                     // put in "unwanted" the un wanted chars untill you get \n

             }
        }
    }

    printf("# of Process: %d\n", no_of_process);
    printf("# of Resource Type: %d\n", no_of_resource_type);

    printf("Vector E\n");
    for(i=0; i<no_of_resource_type; i++)
        printf("%d ", vector_E[i]);

    printf("\nCurrent Allocation Matrix\n");
    for(i=0; i<no_of_process; i++){
        for(k=0; k<no_of_resource_type; k++){
            printf("%d ", C[i][k]);
        }
        printf("\n");
    }

    system("pause");
    return 0;
} 
```

任务是从 txt 文件中读取数字。读取no_of_process、no_of_resource_type和vector_E矩阵没有问题。当程序读取“5x4 矩阵”的第 4 行并出现“程序中引发的访问冲突（分段错误）”错误时，就会出现问题。我将出现问题的行标记为“问题在这里！！！”。

有人可以解释这个问题的原因是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:05:11.053

```
 C = (int**)malloc(sizeof(int *)*no_of_process); 
         for(i=0; i<no_of_resource_type; i++) 
             C[i] = (int *)malloc(sizeof(int)*no_of_resource_type); 
```

好吧，您为 int 指针分配了“no_of_process”许多空间，但是在 for 循环中您只分配了“no_of_resource_type”行。所以将for循环更改为

```
 for(i=0; i<no_of_process; i++) 
```

# java - 证书仅受信任一次

> ID：10434018
> 
> 赞同：1
> 
> 时间：2012-05-03T14:59:11.273
> 
> 标签：java, certificate, lotus-notes, agent

我有由证书签名的 java 小程序。

首次执行小程序时，一切正常（服务器信任证书）并且代理运行。

但是当第二次执行小程序时，SAME 证书不受信任。并且不允许执行小程序。这当然很奇怪。

我真的不知道是什么导致了这种行为。因此，如果你们中的任何人遇到相同的行为，请给我一个提示。

环境是 Lotus Notes 8.5.3。在所有浏览器中都是一样的。

卢卡斯

* * *

感谢您的意见，这里是关于证书的更多信息

*   证书签名算法：带有 RSA 加密的 PKCS #1 MD5

*   发行人：（本公司）

*   主题公钥算法：PKCS #1 RSA 加密

*   证书密钥用法：关键、签名、密钥加密

*   扩展密钥用法：非关键、TLS Web 服务器身份验证、证书签名算法

*   发布日期：23.1.2012

*   过期时间：24.4.2017

Java 小程序是标准的 JApplet

我不知道，这里有什么用处。你能有更具体的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:48:21.223

签名证书需要“代码签名”OID：“1.3.6.1.5.5.7.3.3”，如[http://fernandokarnagi.wordpress.com/2009/01/29/extended-key-usage-issue-applet中所述-jar 签名者/](http://fernandokarnagi.wordpress.com/2009/01/29/extended-key-usage-issue-applet-jar-signer/)。有关其他信息，请参阅[错误：KeyUsage 不允许数字签名 - Java-applet + 相互 SSL](https://stackoverflow.com/questions/6458218/error-keyusage-does-not-allow-digital-signatures-java-applet-mutual-ssl)。

# ios - UITableView 在计数时崩溃？

> ID：10434020
> 
> 赞同：0
> 
> 时间：2012-05-03T14:59:12.573
> 
> 标签：ios, uitableview

我的应用程序有一个简单的 TableView，昨天一整天都在工作。现在，当我试图让它在选择某一行时加载另一个 ViewController 时，它甚至在 TableView 出现之前就崩溃了……所以我注释掉了我添加的任何新代码，它仍然在崩溃。据我所知，xcode 唯一说的是它的断点就在这个方法上

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [listOfSchools count];
} 
```

这是其余的重要内容。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Initialize the array.
    listOfSchools = [[NSMutableArray alloc] init];

    //Add items
    [listOfSchools addObject:@"CVHS"];
    [listOfSchools addObject:@"Elementary"];
    [listOfSchools addObject:@"Middle School"];
    [listOfSchools addObject:@"High School"];
    [listOfSchools addObject:@"All"];
    self.navigationItem.title = @"Select Type of School";
    } 
```

我不明白为什么它会破裂。不，这不是家庭作业，只是我在学校帮忙的一个项目。

一如既往，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:08:16.730

`-init`在方法而不是方法中初始化您的数组`-viewDidLoad`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:14:08.977

我想通了伙计们。

我以某种方式添加了手动断点来喜欢一半的应用程序？我不明白我是怎么做到的，但是一旦我找到它们并删除它们，应用程序现在就可以正常工作了。

不过感谢您的回答！

# ios - iOS Asihttprequest 自定义进度跟踪

> ID：10434021
> 
> 赞同：0
> 
> 时间：2012-05-03T14:59:16.113
> 
> 标签：ios, asihttprequest

我正在尝试使用 AsiHttpRequest 显示下载进度，如下所示：300 kb / 5 Mb 并不断更新第一个值。我知道如果我使用 -(void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data 我需要自己管理 nsdata 对象并自己编写下载的文件

我试过这个但不工作！可变数据为空！我使用带有 ARC 的 iOS 5。谢谢你的帮助！

**更新**

我用这段代码解决了，我已经将委托设置为 self 并且一切正常。只是我不明白是否以这种方式和使用 ARC 我需要清除代表

```
- (void)dealloc
{
   [request clearDelegatesAndCancel];
} 
```

感谢大家的帮助！！

**更新**

```
-(void)downloadFile: (NSString*) file {
           NSString* urlFilePdf = [NSString stringWithFormat:@"http://www.mywebsite.com/%@",file];

            myFileName = file;

            NSURL *url = [NSURL URLWithString:urlFilePdf];

            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDirectory = [paths objectAtIndex:0];
            NSString *filePath = [documentsDirectory stringByAppendingPathComponent:file];

            progressAlert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"DOWNLOADFILE",nil) message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil];

            progressView = [[UIProgressView alloc] initWithFrame:CGRectMake(30.0f, 80.0f, 225.0f, 90.0f)];
            [progressAlert addSubview:progressView];
            [progressView setProgressViewStyle: UIProgressViewStyleDefault];

            lblTotal = [[UILabel alloc] initWithFrame:CGRectMake(5, 50, 273, 20)];
            [lblTotal setTextAlignment:UITextAlignmentCenter];
            [lblTotal setFont:[UIFont fontWithName:@"HelveticaNeue-Medium" size:14.0]];
            [lblTotal setTextColor:[UIColor whiteColor]];
            [lblTotal setBackgroundColor:[UIColor clearColor]];
            [progressAlert addSubview:lblTotal];

            requestFile = [ASIHTTPRequest requestWithURL:url];
            [requestFile setDelegate:self];
            [requestFile setDownloadDestinationPath:filePath];
            [requestFile setDownloadProgressDelegate:self];
            [requestFile setShowAccurateProgress:YES];    
            [progressAlert show];

            [requestFile startAsynchronous];

}

- (void)request:(ASIHTTPRequest *)request incrementDownloadSizeBy:(long long)newLength
{
    NSLog(@"%@",[NSString stringWithFormat:@"incrementDownloadSizeBy %quKb", newLength/1024]);
}

- (void)request:(ASIHTTPRequest *)request didReceiveBytes:(long long)bytes
{
    NSLog(@"%@",[NSString stringWithFormat:@"didReceiveBytes %quKb", bytes/1024]);
    currentLength += bytes;
    [lblTotal setText:[NSString    stringWithFormat:@"%quKb/%@",currentLength/1024,self.TotalFileDimension]];
}

- (void)setProgress:(float)newProgress {
    NSLog(@"%f",newProgress);
    progressView.progress = newProgress;
}

-(void) requestFinished:(ASIHTTPRequest *)request
{
    // code ...
}

-(void) requestFailed:(ASIHTTPRequest *)request
{
    // code ...
}

- (void)dealloc
{
   [request clearDelegatesAndCancel];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:08:47.560

您应该实现该`request:incrementDownloadSizeBy:`方法。

请注意：您写的问题的标题是*iOS Asihttprequest custom progress tracking*。如果您查看[ASIHTTPRequest 文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use)，您将看到一个标题，该标题准确地描述了您所要求的内容 -[自定义进度跟踪](http://allseeing-i.com/ASIHTTPRequest/How-to-use#custom_progress_tracking)。

如果你不看这个，那是个大问题。在向人们寻求帮助之前，您应该始终检查文档。

# opencv - 如何将 sin() 应用于 opencv Mat 中的所有元素

> ID：10434025
> 
> 赞同：3
> 
> 时间：2012-05-03T14:59:28.607
> 
> 标签：opencv

我有一个 opencv Mat，如何将 sin() 应用于它的所有元素？是否需要使用循环来获取每个元素并逐个计算sin？问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:48:11.573

我正在使用 python 并使用 numpy 所以可以这样做：

```
>>> import cv
>>> import numpy as np
>>> im = cv.LoadImageM("aaa.jpg")
>>> np.sin(im)
array([[[ 0.36319944,  0.46771851,  0.99646664],
        [ 0.98024565, -0.49104786,  0.46771851],
        [ 0.69605851, -0.9983471 , -0.49104786],
        ..., 
        [-0.58777064, -0.79041475,  0.60906792],
        [-0.79041475, -0.94252455,  0.36319944],
        [ 0.08839871, -0.58777064, -0.94252455]],
  etc... 
```

否则，应该很容易适应以下 python 代码来创建和使用查找表[cv.LUT](http://opencv.willowgarage.com/documentation/python/core_operations_on_arrays.html#lut)：

```
import cv
import math

im = cv.LoadImageM("aaa.jpg")
dst = cv.CreateMat(im.height,im.width, cv.CV_32FC3)
lut_sin = cv.CreateMat(256, 1, cv.CV_32FC3)    

for i in xrange(256):     
    s = math.sin(i)
    cv.Set1D(lut_sin, i, (s,s,s,s))

cv.LUT(im,dst,lut_sin)

print cv.Get2D(dst,0,0)
#output, matches above:
(0.36319944262504578, 0.46771851181983948, 0.99646663665771484, 0.0) 
```

对于浮点数据，您可以使用[cv.PolarToCart](http://opencv.willowgarage.com/documentation/python/core_operations_on_arrays.html?highlight=polartocart#PolarToCart)：

```
>>> import cv
>>> im = cv.LoadImageM("aaa.jpg")
>>> im2 = cv.CreateMat(im.height, im.width, cv.CV_32FC3)
>>> cv.Convert(im,im2)
>>> sin_of_angle = cv.CreateMat(im.height, im.width, cv.CV_32FC3)
>>> cv.PolarToCart(None,im2,None,sin_of_angle,0)
>>> cv.Get1D(sin_of_angle,0)
(0.36319947242736816, 0.46771851181983948, 0.99646669626235962, 0.0)
>>> cv.Get1D(sin_of_angle,1)
(0.98024564981460571, -0.49104788899421692, 0.46771851181983948, 0.0) 
```

您也可以使用它来轻松获取 cos 值。您可以将最后一个参数切换`True`为弧度。

# java - 在android中通过http url调用意图

> ID：10434034
> 
> 赞同：0
> 
> 时间：2012-05-03T14:59:50.743
> 
> 标签：java, android, android-intent, webview, youtube

我目前在android中有一个webview。
但是 webview 无法显示某些包含 youtube/flash 视频、mp3、mp4、3gp 等的 url。

是否可以检查内部应用程序是否能够播放这些格式。
IE 如果 url 转发到 youtube 视频，那么它会启动 youtube 应用程序（如果可用），或者如果 url 转发到 mp3 视频，那么它会转发到音乐播放器。

将要处理的 url 是从外部 json 发送的，所以它是 variabel。

此外，如果 url 只是一个简单的网页（除了 webbrowser 之外没有应用程序可以处理它），那么它应该显示在 webview 中。

我浏览了 arround，我想出了这个开始：

```
String url = "url here for example youtube.com/watch?v=.....";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

我无法测试上面的这部分，但这个片段中缺少的东西是，如果 url 只是一个简单的网页，那么我不希望 webbrowser 启动，但我只是希望它显示在我的简单 webview .

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:14:23.357

您可以将[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)设置为您的 Web 视图和 ovveride`shouldOverrideUrlLoading`方法。如果 URL 以 .mp3（您的特定格式）结尾，则启动意图或覆盖`onReceivedError`方法并处理错误。

# lisp - 用于回文的小型 lisp 程序的困难

> ID：10434036
> 
> 赞同：2
> 
> 时间：2012-05-03T14:59:58.543
> 
> 标签：lisp, clisp

大家好，我正在尝试使用 clisp v2.47 编写一个 lisp 函数，该函数接受一个单词，如果它是回文则返回 true，否则将返回 false。顺便说一句，值得一提的是我是 lisp 新手，所以我没有编写 lisp 代码的经验。

这是我的代码：

```
(defun palindrome( L )   
    (cond 
        ((equal L '()) T  )    
        ((equal (car (L)) (last ( L ))) 
            (palindrome (cdr (reverse (cdr (L))))))
        (t nil))) 
```

当我将它粘贴到 clisp 中时它很好，但是当我开始运行它时，我得到了这个我不知道如何修复的错误：

```
[2]> (setq M '(bob))
(BOB)

[3]> (palindrome M)

*** - EVAL: undefined function L
The following restarts are available:
USE-VALUE      :R1      Input a value to be used instead of (FDEFINITION 'L).
RETRY          :R2      Retry
STORE-VALUE    :R3      Input a new value for (FDEFINITION 'L).
ABORT          :R4      Abort main loop
Break 1 [4]> 
```

任何帮助将不胜感激，因为我真的很急于完成这个程序。

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:24:19.683

该调用`(last ( L ))`不计算列表的最后一个元素`L`。它调用`L`没有任何参数的函数，期望得到一个列表作为返回值，并计算该列表的最后一个*单元格*。`(car (last L))`将计算列表的最后一个元素。

在 Lisp 中，括号不用于对代码语句进行分组。相反，它们表示功能应用程序。

```
(a b c d) 
```

意思是“调用`a`带参数的函数`b, c, d`”。

```
(a) 
```

意思是“调用一个函数`a`”。

因此，您的代码没有定义任何名为`L`. 它使用一个名为 的参数`L`，但在 Common LISP 中，函数名和值名是两个不同的命名空间。

```
[11]>
(defun palindrome( L )
    (cond
        ((null L) T  )
        ((equal (car L) (car (last L)))
            (palindrome (cdr (reverse (cdr L)))))))
PALINDROME
[12]> (palindrome '(bob))
T 
```

***编辑：***遵循*wvxvw*最好的想法，这里有一个更好的代码，它不会过多地遍历列表：

```
(defun palindrome (x) 
  (do ((x x (cdr x)) 
       (y x (cddr y)) 
       (z () (cons (car x) z)))
      ((null (cdr y)) 
       (equal z (if y (cdr x) x))))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:21:20.330

在评估列表时，您放入列表的第一个元素中的任何内容都会被视为函数。尝试删除一些多余的括号：

```
(defun palindrome( L )   
    (cond 
        ((equal L '()) T  ) 
        ((equal (car L) (last L)) 
            (palindrome (cdr (reverse (cdr L)))))
        nil)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:17:42.217

这不是你正在使用的一个很好的算法。您将多次反转并转到列表的最后一个元素（两者都`reverse`具有`last`O(n) 速度）。您将调用反向 n/2 次和最后 n/2 次，使整个函数时间为 O(n^2)。下面是一个做同样的算法

```
(defun palindrome-p (x)
  (let ((half-length (floor (/ (length x) 2))))
    (do ((i x (cdr x))
         (j 0 (1+ j)))
        (nil)
      (when (= j half-length)
        (labels ((compare (head tail)
                   (cond
                     ((or (null head) (null tail)) t)
                     ((not (equal (car head) (car tail))) nil)
                     (t (compare (cdr head) (cdr tail))))))
          (return (compare x (reverse i)))))))) 
```

但在 O(2n+n/2) 时间内，这是最坏的情况。我知道，这里在n旁边放一个常数不是很“科学”，但它是为了说明虽然时间是线性的，但您需要访问所有节点两次-第一次计算长度，第二次比较列表。n/2 是在比较之前调用 reverse 。

请注意，有一个非常直接的朴素回文函数：

```
(defun naive-palindrome-p (x)
  (equal x (reverse x))) 
```

但是如果我们同意我的反科学 O()，那么这个就是 O(2n)（一次我们查看整个列表来反转它，第二次我们查看整个列表来比较结果。这个函数将执行在最坏的情况下比第一个更好，但在最好的情况下，第一个会表现得更好。此外，Lisp 实现存储列表的长度而不是计算它并不少见，这可能会使您的速度降低近一半第一个功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:41:34.280

（defun回文（L）

（ 条件

(((等于 L '()) T )

((equal (car L) (car(last L))) (回文 (cdr (reverse (cdr L)))))

(无)

)

)

# javascript - Phonegap - 捕获请求的响应正文

> ID：10434037
> 
> 赞同：0
> 
> 时间：2012-05-03T15:00:05.800
> 
> 标签：javascript, android, html, cordova

我想知道是否有人知道使用PhoneGap 捕获请求响应正文的方法？我正在尝试上传文件，我需要查看正在发送/接收的内容。我正在努力解决这个问题。

```
 var ft = new FileTransfer();
    console.log("file transfer created...");
    ft.upload(imageURI, serverURI, function(r){console.log("Response = " + r.response);}, function(error){console.log(error);alert('Error uploading image')}, options); 
```

这是我从服务器打印到 weinre 控制台的响应：

```
bytesSent: 13148
response: "[]"
responseCode: 200 
```

我正在使用 weinre 检查任何日志和其他信息，但这还不够。我真的需要查看请求，类似于萤火虫的请求。任何帮助都是极好的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:30:15.520

您可能需要设置[Wireshark](https://www.wireshark.org/)或[Ethereal](http://www.ethereal.com/)以查看客户端和服务器之间发生了什么。响应是 serverURI 发送回设备的任何内容。它不会向您显示已发送的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T23:00:08.113

我遇到过同样的问题。原来上传 uri 重定向请求到登录页面。

# excel - Excel 中的高级筛选器

> ID：10434038
> 
> 赞同：0
> 
> 时间：2012-05-03T15:00:06.160
> 
> 标签：excel, vba

我正在尝试在 excel 中编写一个高级过滤器。要满足的两个条件在单元格 g2 和 h2 中。第一个条件是显示所有值`<=0.01`，第二个条件是显示所有值`<20`。我有以下 VBA 代码

```
Sub RefreshAdvancedFilter()
   Range("A6:M5000").AdvancedFilter Action:=xlFilterInPlace, CriteriaRange:= _
        Range("G1:H2"), Unique:=True
End Sub 
```

似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:47:19.483

如果 G1 和 H1 中的标题相同，并且 G2 <=0.01 并且 H2 <=20，那么唯一符合这两个标准的东西就是您所看到的。但是，您看到 <0.01 和 =20 的经验会起作用。

我认为这可能是 AND 而不是 OR 被评估的情况。

尝试将您的标准范围更改为 G1:G3

在 G1 中包含标题，在 G2 中包含 <=0.01，在 G3 中包含 <=20

# java - 当 TextView 很窄时，如何强制文本垂直居中？

> ID：10434044
> 
> 赞同：0
> 
> 时间：2012-05-03T15:00:19.093
> 
> 标签：java, android

我目前正在使用`setGravity(Gravity.CENTER_VERTICAL)`，当 TextView 足够高时效果很好。但是，如果 TextView 很窄，那么只有文本的底部被剪裁；我希望从上方和下方*平等地剪切文本。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:39:29.220

我找到了解决方案，

如果视图高度不够，则必须移动滚动值。您可以在 onlayout 函数中调用此函数，

```
protected void alignVerticalAlingment() {
    int fontSize = getLineCount() * getLineHeight();
    if (getHeight() > 0) {
            setPadding(getPaddingLeft(), 0, getPaddingBottom(), 0);
            int height = getHeight();
            int y = (fontSize - height + (int) getPaint()
                    .descent()) / 2;
            scrollTo(0, y);
    }
} 
```

# ruby-on-rails - 将未保存的模型传递给视图

> ID：10434047
> 
> 赞同：0
> 
> 时间：2012-05-03T15:00:26.627
> 
> 标签：ruby-on-rails

我有一个模型“用户”并且正在使用会话。

允许用户在未登录的情况下修改会话中的 User.new 对象，而无需实际保存用户。

我想让尚未登录的用户查看他们的 Users#Show 页面。

做这个的最好方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:55:16.330

上面的答案有效。我正在寻找“基于会话的模型”模式。有一个 [关于基于会话的模型的 Railscast](http://railscasts.com/episodes/119-session-based-model)，我发现它对使用这种模式非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:20:30.003

在您的控制器中，您可以执行以下操作：

```
def show
  @user = current_user || session[:current_user]
end 
```

因此，如果有，您将获得 current_user，如果没有，则从会话中读取。

不过，在会话中存储整个模型通常很糟糕。如果更改基础类，则会话中的对象将无法正确解组，因此请确保`reset_session`在更改 User 类后重置会话，否则会出现许多奇怪的错误。

# c++ - 将文本文件读入矩阵，然后将它们相乘

> ID：10434048
> 
> 赞同：0
> 
> 时间：2012-05-03T15:00:28.433
> 
> 标签：c++, file-io, matrix

我有一些 .txt 文件如下所示：

```
1050.00 68.13

1048.00 67.89

1046.00 67.62

1044.00 67.30

1042.00 66.91

[ ... ] 
```

**我想将它乘以另一个矩阵。**

我的问题是我不知道如何读取这些数据并将其存储在矩阵中。

有没有人有任何可以帮助我的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:18:29.867

我将数据存储在 a`vector<vector<double>>`中，并使用`std::getline`、`std::istringstream`和`operator>>`.

```
#include <vector>
#include <string>
#include <fstream>
#include <sstream>
#include <iostream>
#include <iterator>
#include <algorithm>
struct Matrix {
  std::vector<std::vector<double> > data;
  Matrix(const std::string& filename) {
    std::ifstream inFile(filename.c_str());
    std::string inLine;
    while(std::getline(inFile, inLine)) {
      std::istringstream inLineStream(inLine);
      std::vector<double> inLineData(
        (std::istream_iterator<double>(inLineStream)),
        std::istream_iterator<double>());
      data.push_back(inLineData);
    }
  }
  Matrix operator*(const Matrix& rhs) { ... };
};

int main () {
  Matrix a("a.txt");
  Matrix b("b.txt");
  Matrix c(a * b);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:14:26.917

你可以这样读：

```
char *fname = "matrix.txt";
ifstream infile(fname);

float f;
while (infile >> f) {
   //store f to matrix
} 
```

网上有很多maxtrix类的实现示例，有一个： http: [//www.codeproject.com/Articles/3613/A-generic-reusable-and-extendable-matrix-class](http://www.codeproject.com/Articles/3613/A-generic-reusable-and-extendable-matrix-class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:12:03.753

什么是“矩阵”？

如果您有某种“矩阵库”，只需使用它的功能。

如果您自己实现矩阵，请逐行读取文本文件 (fgets()) 并使用 sscanf() 读取项目。

希望这可以帮助。

# sitecore - 在 Sitecore 中，如何将 HTML 编辑器配置文件分配给用户或角色？

> ID：10434054
> 
> 赞同：0
> 
> 时间：2012-05-03T15:00:43.647
> 
> 标签：sitecore, rte, security-roles

我找到了大量关于分配**全局**RTE 配置文件（例如“Rich Text Default”）的文档，但没有关于将特定 RTE 配置文件分配给**特定用户角色**的文档。理想情况下，我正在寻找可以在桌面应用程序中访问的东西，但我会采用任何涉及更改 Web.config 文件的解决方案，甚至在必要时进行编程更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:22:50.267

我认为您可能需要做的是选择您需要的最自由的配置文件并将其设置为您的全球 RTE 配置文件。然后将权限分配给特定用户角色的配置文件的各个方面（例如，拒绝读取某些按钮或按钮组）。我自己没有尝试过，但 Sitecore 权限的粒度特性应该可以让您达到预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:26:30.753

SO的诅咒是只有在发布问题后才能找到自己的答案：

[http://sdn.sitecore.net/SDN5/Forum/ShowPost.aspx?postid=17458](http://sdn.sitecore.net/SDN5/Forum/ShowPost.aspx?postid=17458)

> 只需一个包含所有内容的配置文件，但拒绝每个人阅读或破坏安全继承。然后管理员拥有一切，而其他人则一无所有。根据需要为各种角色添加权限。

这涉及使用安全编辑器并深入核心数据库以：

`/sitecore/system/Settings/Html Editor Profiles/<your global profile>/Toolbar 1/` `/sitecore/system/Settings/Html Editor Profiles/<your global profile>/Toolbar 2/` `/sitecore/system/Settings/Html Editor Profiles/<your global profile>/Toolbar 3/`

...并拒绝用户角色的“读取”权限。

# visual-studio - 如何修复 Win 8 认证报告中的调试应用程序检查

> ID：10434055
> 
> 赞同：2
> 
> 时间：2012-05-03T15:00:45.397
> 
> 标签：visual-studio, windows-8, visual-studio-2012, app-certification-kit

当我使用 Windows 应用程序认证工具包测试我的应用程序时，我得到了带有以下错误的 xml 文件

* * *

Debug App Check FAILED 该应用不应安装任何调试二进制文件。

```
 Error: Following errors were encountered while running the Debug Binary Check test.
        Failed to extract imported API information for this application.
    Impact if not fixed:       Windows Store policies do not allow submission of debug binaries. Please ensure that all submitted binaries are configured as release to avoid rejecting your submission. 
```

## 如何修复：已知编译为调试的二进制文件无法通过此验证。请始终确保您的二进制文件是在发布配置而不是调试配置中编译的。

有人能帮我解决这个问题吗

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T20:05:48.540

在您的 Visual Studio 项目中，您可能通过按 F5 或单击工具栏中的“播放”箭头来运行应用程序？这会在调试模式下安装并运行应用程序。

通过在 Metro 开始屏幕上右键单击应用程序来卸载应用程序，然后选择卸载。然后，回到 Visual Studio，右键单击您的解决方案并选择配置管理器。活动解决方案配置可能设置为调试，您想将其更改为“发布”

# jquery - jQuery Mobile 选择所有页面中的所有标签

> ID：10434057
> 
> 赞同：0
> 
> 时间：2012-05-03T15:00:50.197
> 
> 标签：jquery, select, jquery-mobile

如果您有更多页面，如何选择`<a>`jQuery Mobile 中的所有标签？

我试过了`jQuery("a")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:48:05.633

根据您使用的 jQuery [Mobile] 版本，您应该能够使用[`live`](http://api.jquery.com/live/)or[`on`](http://api.jquery.com/on/)和 on 方法将事件绑定到页面上（尚）不存在的项目。

[live 方法](http://api.jquery.com/live/)将一个事件绑定到`document`并在与给定选择器匹配的元素上触发事件时执行它：

```
$("a").live('click', function () { /* do something on click with the 'a' element clicked */ }); 
```

[on 方法](http://api.jquery.com/on/)更好，因为它不依赖于在执行之前甚至冒泡到文档。

相反，您将事件放在将在将来创建但已经存在的元素的父对象上，并提供一个选择器来指定该选择器中的哪些元素“合格”以调用该事件。在您的情况下，选择页面上的所有“a”标签，执行与上述代码相同的操作：

```
$("body").on('click', 'a', function () { /* do something on click with the 'a' element clicked */ }); 
```

如果您想在通过 ajax 加载 a 标签后立即对其进行处理，您应该在加载它们的 ajax 请求的完整回调中执行此操作。这可以通过将 附加`.done(callback)`到您的`$.get()`or`$.ajax()`请求来完成。

请阅读[文档以获得关于`.done()`](http://api.jquery.com/deferred.done/)

*   [阅读更多关于甚至冒泡的信息](http://www.quirksmode.org/js/events_order.html)
*   [关于 live 方法的文档](http://api.jquery.com/live/)
*   [on 方法的文档](http://api.jquery.com/on/)

# uiscrollview - 以编程方式将 UILabel 和 UIImageViews 添加到 UIScrollView

> ID：10434059
> 
> 赞同：2
> 
> 时间：2012-05-03T15:00:54.657
> 
> 标签：uiscrollview, uiimageview, uilabel, addsubview

我知道这个问题在这里很多，但我似乎仍然无法让它发挥作用。我可能没有正确启动视图或其他什么...无论如何，我正在尝试以编程方式向 UIScrollView 添加几个标签和图像。这是我的 .h 文件的代码：

```
#import <UIKit/UIKit.h>

@interface DOR_HelpViewController : UIViewController <UIScrollViewDelegate> {
    IBOutlet UIScrollView *scrollView;
}

@property (nonatomic, retain) IBOutlet UIScrollView *scrollView;

@end 
```

还有我的 .m 文件：

```
#import "DOR_HelpViewController.h"

@implementation DOR_HelpViewController

@synthesize scrollView;

- (void)viewWillAppear:(BOOL)animated {     

    [super viewWillAppear:animated];

    scrollView = [[UIScrollView alloc] init];

    UILabel *pointsCouponLbl = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 20.0, 320.0, 15.0)];
    pointsCouponLbl.font = [UIFont boldSystemFontOfSize:14.0];
    pointsCouponLbl.textAlignment = UITextAlignmentCenter;
    pointsCouponLbl.textColor = [UIColor blackColor];
    pointsCouponLbl.backgroundColor = [UIColor clearColor];
    pointsCouponLbl.text = @"Points Earned Using a Coupon";
    [scrollView addSubview:pointsCouponLbl];

    UIImageView *pointsCouponImg = [[UIImageView alloc] initWithFrame:CGRectMake(72, 45, 175, 100)];
    pointsCouponImg.image = [UIImage imageNamed:@"couponpoints.png"];
    [scrollView addSubview:pointsCouponImg];

    UILabel *pointsCheckInLbl = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 165.0, 320.0, 15.0)];
    pointsCheckInLbl.font = [UIFont boldSystemFontOfSize:14.0];
    pointsCheckInLbl.textAlignment = UITextAlignmentCenter;
    pointsCheckInLbl.textColor = [UIColor blackColor];
    pointsCheckInLbl.backgroundColor = [UIColor clearColor];
    pointsCheckInLbl.text = @"Points Earned For Check-In";
    [scrollView addSubview:pointsCheckInLbl];
    pointsCheckInLbl = nil;

    UIImageView *pointsCheckInImg = [[UIImageView alloc] initWithFrame:CGRectMake(72, 190, 175, 100)];
    pointsCheckInImg.image = [UIImage imageNamed:@"checkinpoints.png"];
    [scrollView addSubview:pointsCheckInImg];
    pointsCheckInImg = nil;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

`scrollView`链接到我`UIScrollView`的故事板中的对象。我非常感谢有关我做错了什么的信息，以及如果您不介意的原因。先谢谢了~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:33:05.813

删除`scrollView = [[UIScrollView alloc] init];`使用 IB 时没有必要（甚至适得其反）。

（实际上这只是评论中的一个想法 - 见上文。但我会尽可能地赢得声誉;-)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T11:51:48.590

```
-(void)addImagesToScrollView:(NSMutableArray*)jsonArray{

if (!jsonArray || jsonArray.count ==0) {
    return;
}

int imageXPos=0;

int imageWidth=50;
int imageHeight=50;

for (int index=0; index<[jsonArray count]; index++)
{
    NSMutableDictionary *dict=[jsonArray objectAtIndex:index];
    NSString *thumbUrl=[JsonUtil getString:dict forKey:@"thumb"];

    UIImageView *imageView = [[UIImageView alloc] init ];
    [imageView setImageWithURL:[NSURL URLWithString:thumbUrl]
              placeholderImage:[UIImage imageNamed:@"place_image"]];
    imageView.contentMode = UIViewContentModeScaleToFill;
    imageView.clipsToBounds = YES;

    imageView.frame = CGRectMake(imageXPos,1, imageWidth, imageHeight);

    [self.placeImageScrollView addSubview:imageView];

    imageXPos = imageXPos + imageView.frame.size.width +2;//2 is padding

}
 self.placeImageScrollView.contentSize = CGSizeMake(imageXPos, self.placeImageScrollView.frame.size.height);
} 
```

# c++ - Qt - 编译时出现错误 2

> ID：10434064
> 
> 赞同：8
> 
> 时间：2012-05-03T15:01:25.623
> 
> 标签：c++, qt, compiler-errors, makefile

我刚刚下载了 Qt SDK 4.8.1，安装后，我只是尝试编译一个默认的 C++ 项目，但我得到了这个奇怪的错误。

> 16:50:24：运行项目测试的构建步骤...
> 16:50:24：配置未更改，跳过 qmake 步骤。
> 16:50:24：开始：“C:\QtSDK\QtCreator\bin\jom.exe”
> cl -c -nologo -Zm200 -Zc:wchar_t- -Zi -MDd -GR -EHsc -W3 -w34100 -w34189 -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_GUI_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -I"........\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtCore" -I"........\QtSDK\Desktop\Qt\4.8.1\ msvc2008\include\QtGui" -I"........\QtSDK\Desktop\Qt\4.8.1\msvc2008\include" -I"........\QtSDK\Desktop\Qt\ 4.8.1\msvc2008\include\ActiveQt"-I"调试"-I"。" -I"..\测试"-I"." -I"........\QtSDK\Desktop\Qt\4.8.1\msvc2008\mkspecs\win32-msvc2008" -Fodebug\ @C:\DOCUME~1\dfuser\IMPOST~1\Temp\main .obj.1464.0.jom
> cl -c -nologo -Zm200 -Zc:wchar_t- -Zi -MDd -GR -EHsc -W3 -w34100 -w34189 -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_GUI_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -I"........\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtCore" -I"........\QtSDK\Desktop\Qt\4.8.1\ msvc2008\include\QtGui" -I"........\QtSDK\Desktop\Qt\4.8.1\msvc2008\include" -I"........\QtSDK\Desktop\Qt\ 4.8.1\msvc2008\include\ActiveQt"-I"调试"-I"。" -I"..\测试"-I"." -I"........\QtSDK\Desktop\Qt\4.8.1\msvc2008\mkspecs\win32-msvc2008" -Fodebug\ @C:\DOCUME~1\dfuser\IMPOST~1\Temp\mainwindow .obj.1464.0.jom
> C:\QtSDK\QtCreator\bin\jom.exe -f Makefile.Debug
> jom: C:*MSVC2008* _Qt_SDK__Debug\Makefile.Debug [debug\main.obj] 错误 2
> 
> jom 1.0.8 - 增强你的核心
> 
> jom: C:\Documents and Settings\dfuser\Desktop\test-build-desktop-Qt_4_8_1_for_Desktop_- *MSVC2008* _Qt_SDK__Debug\Makefile [debug] Error 2
> 16:50:24: The process "C:\QtSDK\QtCreator\bin\jom. exe”退出并显示代码 2。
> 构建项目测试时出错（目标：桌面）
> 执行构建步骤“Make”时

有谁知道是什么原因？

我不知道它是否相关，但在收到此错误之前，我得到了关于`cl`未找到的常见错误；我解决了`cl`在项目设置中添加路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T20:10:56.957

我已经解决了：尝试直接执行 cl.exe (C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cl) 如果遇到 dll 错误，那是因为您的环境设置不正确。因此，您需要在午餐 QtCreator 之前调用 vcvarsall.bat。为此，您可以创建一个 .bat 文件，其中包含以下内容：

C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat

{QtCreator 的路径}\qtcreator

（如果您的配置不同，请更正路径）

您将需要执行此脚本以获取具有正确环境变量的 QtCreator，否则会出现 dll 错误但未报告，并且您会收到此“错误：2”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-12T19:27:12.060

我在 Qt 5.3 中遇到了一些类似的问题

```
21:22:03: Running steps for project Server...
21:22:03: Configuration unchanged, skipping qmake step.
21:22:03: Starting: "C:\Qt\Qt5.3.2\Tools\mingw482_32\bin\mingw32-make.exe" 
C:\make\bin; -f Makefile.Debug
Makefile:34: recipe for target 'debug' failed
process_begin: CreateProcess(NULL, C:\make\bin; -f Makefile.Debug, ...) failed.
make (e=2): The system cannot find the file specified.

mingw32-make: *** [debug] Error 2
21:22:05: The process "C:\Qt\Qt5.3.2\Tools\mingw482_32\bin\mingw32-make.exe" exited with code 2.
Error while building/deploying project Server (kit: Desktop Qt 5.3 MinGW 32bit)
When executing step "Make" 
```

我做了以下操作来消除错误。
从 Qt 的左窗格中，

```
Projects > Build > Build Environment:

Check the Clear System environment 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-01T17:51:52.230

在 Linux 终端中：

```
sudo apt-get install build-essential cmake libqt4-dev 
```

对不起，我不知道为什么这段代码有效，但我在 Linux 中遇到了同样的问题，我以这种方式解决了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T17:12:14.417

好的，你可以这样做。

转到*开始->选择 Qt 文件夹->minigw*

当您启动它时，您将加载 int cmd，然后找到您的项目。然后你可以输入：**qmake**，然后你就**可以**构建项目了

如果它不起作用，请尝试通过[文档](http://qt-project.org/doc/qt-4.8/gettingstartedqt.html)查看在使用 Qt 时如何使用 minigw。

如果您需要更多帮助，请告诉我，我很乐意为您提供帮助。

编辑：

还有一件事。在您的问题中，问题可能与环境变量有关。因为它们可能没有设置为显示到**make**命令。如果您不想打扰 minigw，您可以检查您的环境变量是否设置了路径：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-07T22:43:34.810

我在其他文件夹中创建了一个同名的新项目，复制除 <project_name>.pro.user 文件之外的内部文件。

这项工作形成了我，我不知道为什么，但从我的原始项目错误中删除 <project_name>.pro.user 文件仍在继续。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-27T10:17:22.047

我已经多次遇到这个问题，为我解决的只是重命名项目所在的文件夹。或者，您可以创建一个新项目并将所有头文件和源文件复制到该新项目中。

# java - 如何在 Java 程序中检索环境变量（外部修改）的修改值？

> ID：10434065
> 
> 赞同：2
> 
> 时间：2012-05-03T15:01:28.480
> 
> 标签：java, runtime, environment-variables

是否可以在 Java 程序中检索环境变量的修改值？

我尝试使用`System.getenv()`. 但新的价值并没有体现在程序中。场景是这样的：

1.  该程序检索环境变量的值。

2.  当程序仍在运行时，此变量的值会在外部更改。（甚至可以是手动过程，例如在 Windows 中，用户从“我的电脑”->“属性”中的“高级”选项卡更改值）

3.  程序再次检索环境变量的值。

第二次检索该值时，它应该获得修改后的值。我发现 using`System.getenv()`只给了我旧的价值。有什么可靠的方法吗？（此要求特定于**Windows**，但也很想听听通用解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:09:27.113

Afaik，进程可见的环境变量是在进程创建时设置的。

对 OS 变量的后续修改对除更改它们的进程之外的进程不可见。

但是，根据操作系统，可能有一些方法可以检索它们。例如，在 Windows 操作系统上，它们保存在注册表中，因此您可以从中读取。

尝试读取`HKCU\Environment`当前用户变量的密钥，以及密钥

```
HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment for system variables. 
```

有关读取注册表的有用类，请参阅[有关 Windows 注册表的这个问题。](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:09:28.693

没有进程监视来自父进程的环境变量。甚至 C 程序也不会“监视”环境变量，因为您需要在该过程中更改它。当一个进程启动时，它会从其父进程那里获得一份环境副本。因此，如果您修改父进程中的环境变量，它不会更改子进程版本。除非您启动一个新进程，它会获得更改的副本。我认为这就是 Java 看不到这些变化的最终原因，因为它的行为就像任何正常进程一样。这种行为是有充分理由的！如果 env 变量是可修改的，那么您将遇到围绕它们的并发问题，并且您需要定义一个进程何时会“看到”来自其他进程的这些更改。这都是关于锁定、可见性、

如果你想在两个进程之间共享数据，你必须使用 IPC（进程间通信）来做到这一点。在 C 语言中，有几种方法可以做到这一点：管道、共享内存、套接字。Java 将 IPC 简化为套接字，因为它是其他两个功能的超集以及远程和本地进程之间的透明性。您可以使用管道与 Java 进程共享数据，但它会通过标准输入。

底线在 Java 中启动套接字并从另一个进程向其发送数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:17:08.227

除了@Andrea Parodi (+1) 的回答之外，我真的可以建议您通过运行外部命令行来读取环境`echo %MYENV_VAR%`并读取输出或读取注册表。

请看一下[这篇文章](http://alexradzin.blogspot.com/2011/01/access-windows-registry-with-pure-java.html)，我展示了如何在没有任何外部库的情况下读取 Windows 注册表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T15:20:53.603

在 Win 7 上，这样的东西会得到环境变量：

```
Process p = Runtime.getRuntime().exec("cmd.exe /c set");
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
String line;
while( (line = br.readLine()) != null ) {
   String var = br.readLine();
   . . . . 
```

我怀疑它依赖于平台，所以你的代码的可移植性将是一个问题。

# internet-explorer - windows mobile中的浏览器位置共享

> ID：10434066
> 
> 赞同：0
> 
> 时间：2012-05-03T15:01:29.600
> 
> 标签：internet-explorer, windows-phone-7

我正在尝试创建我们网站的移动优化版本。当用户收到共享位置对话框提示时，我们的用户之一意外按下了否按钮。他刷新了很多次，甚至清除了地图和 Internet Explorer 浏览器的历史记录。他甚至重新启动了（经典的windows事情）手机，但从来没有让对话框重新出现。

我们的应用程序需要位置，否则它会显示一条错误消息，说“我们很抱歉我们需要您的位置”，旁边有一个刷新按钮。

我们在 iPhone、android 上尝试了同样的事情。一切都会提示用户，但 windows mobile 除外。

请让我知道有什么方法可以让我在 Internet Explorer 的第二次机会中再次分享我的位置？

例如，如果您在 Windows Mobile 中访问[http://maps.google.com](http://maps.google.com)，并在提示输入位置共享时按“否”。以后如何让我的手机使用该网站的任何设置共享位置。

我需要在我的网页中插入任何代码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:28:27.553

在**Windows Phone**（与 Windows Mobile 不同）上，浏览器对位置的使用（根据您描述的提示）是通过系统应用程序设置控制的。

从应用列表中，选择`settings`
滑动到`applications`项目
选择`Internet Explorer`
切换“允许访问我的位置”开关（确保它已打开）

现在重新访问该网站。

# html - 是否有一些 Html5/CSS3 技巧可以将单词“高于”3D 表面？

> ID：10434067
> 
> 赞同：0
> 
> 时间：2012-05-03T15:01:36.627
> 
> 标签：html, css, 3d

3D 表面是指带有地平线的平面（从第一人称视角显示深度）

文字应该看起来好像漂浮在表面之上；表面应该有阴影。此外，“更远”的词会比“更接近”观看者的词显得更小。最后，我认为这实际上是最难的部分（如果不是用当前的技术完全不可能的话），文字应该倾斜以显示 3D 效果，有点像一条笔直的道路是倾斜的，看起来好像道路的两侧最终会相遇在或超出地平线。

我正在寻找一种使用普通日常字体的方法。我不想在画布上绘制字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:11:19.953

你可能想要使用类似的东西：

`text-shadow: 12px 12px 12px #000;`

和

`transform: scale(0.9) rotate(0deg) translate(0px, 0px) skew(20deg, 40deg);`

[属性，在http://css3generator.com/](http://css3generator.com/)之类的地方玩一下

# php - PHP / SIP：如何通过 Asterix (SIP) 自动连接 2 个人？

> ID：10434072
> 
> 赞同：0
> 
> 时间：2012-05-03T15:02:20.747
> 
> 标签：php, sip, voip, asterisk

我正在尝试将我的 web 应用程序与我的 Asterisk 服务器链接起来。

当 webapp 的用户更改当前客户时，我希望调用新客户，并将用户连接到该客户。

但是，当我尝试使用“Originate”API 调用时，“Callerid”设计的用户从未被调用，因此该调用被挂起。

我怎样才能连接这两个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:48:38.760

发起命令不是立即直观的。该命令的工作方式是它会呼叫客户，然后，一旦呼叫被连接，它就会将他们桥接到另一个分机（您公司的人）。

这是一个使用 Asterisk.NET 的示例，我将其放在一起，但您使用的 AMI 接口实际上并不重要，因为步骤是相同的​​：[AMI Asterisk Manager Interface Originate Action](https://stackoverflow.com/questions/7933833/ami-asterisk-manager-interface-originate-action/7936060#7936060)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:56:17.687

查找 PHP-SIP 类： http: [//level7systems.co.uk/en/blog/Click+to+Call+with+PHP-SIP](http://level7systems.co.uk/en/blog/Click+to+Call+with+PHP-SIP)

用户提交带有呼叫方 (sip:user1@sip) 和被呼叫方 (sip:user2@si​​p) SIP URI 的表单。Web 服务器向 sip:user1@sip 发送 INVITE。一旦 INVITE 被 user1 接受，Web 服务器立即在“Refer-to”标头中发送带有 sip:user2@si​​p 的 REFER。Web 服务器通过向 user1 发送 BYE 来终止“呼叫”。根据web服务器发送的REFER请求，user1向sip:user2@si​​p发送INVITE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:21:59.917

这应该将 Channel 连接`SIP/10`到`+1 555 1234`

```
channel originate SIP/10 extension 00015551234 
```

# c# - 从网站提取实时信息并将其放入 Windows Phone 7 应用程序

> ID：10434083
> 
> 赞同：1
> 
> 时间：2012-05-03T15:02:48.090
> 
> 标签：c#, parsing, web-scraping, data-binding, windows-phone-7

我的问题是基于我非常陌生的一个领域，所以如果可能的话，我会很感激一些耐心/指向有用资源的指针。

我计划编写一系列 Windows Phone 应用程序。这些应用程序的总体思路是提取网站上可用的信息并将其放到手机上，以便更精简等。

这个想法是我完全陌生的。我以前写过程序来解析应用程序和 xml 文件，但从来没有从网站上删除信息。因此，我完全迷失了。

为了让这个问题变得不那么模糊，更具体 - 让我们举个例子；[http://www.luas.ie/](http://www.luas.ie/)。您可以看到该网站有一个“实时信息”部分，您可以在其中选择您的站点并查找下一趟电车的出发时间。

假设我想编写一个简单的 Windows Phone 7 应用程序，它只允许我选择一个车站，然后使用与该网站相同的查询来找出下一趟电车何时离开——我要做的就是提取，例如，“5 分钟”并将其打印到屏幕上。

我该怎么做呢？有哪些好的资源可以阅读以在这里学习良好的实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:48:39.433

如果相关网站没有提供 API，并且您已经检查了抓取其内容的[法律后果](http://www.galvanilegal.com/is-web-scraping-legal)- 我倾向于使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)来解析 HTML 并抓取网页内容。

# ruby-on-rails - Rails 3.2 Carrierwave 预编译错误

> ID：10434092
> 
> 赞同：2
> 
> 时间：2012-05-03T15:03:16.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, carrierwave, pre-compilation

我在目录中有一个`class AvatarUploader < Carrierwave::Uploader::Base`哪个商店的`User`头像`public/uploads`：

```
 def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :main do
     process :resize_to_limit => [128, 128]
  end 
```

我想在`production`启用资产预编译的模式下启动应用程序。除了头像之外的一切都很好。当我访问任何`User`个人资料时，我会得到：

```
Started GET "/users/1" for 127.0.0.1 at 2012-05-03 17:45:24 +0300
Processing by Users::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered users/users/show.html.erb within layouts/application (2.5ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error ( isn't precompiled):
    87:                     <%= image_tag @user.avatar_url(:main).to_s %>
  app/views/users/users/show.html.erb:87:in `_app_views_users_users_show_html_erb___538221278131396366_28399560' 
```

也许有一种方法可以关闭头像的预编译（因为它们可以在应用程序在生产环境中运行时重新上传）。请提供如何解决此问题的任何建议。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T15:06:20.727

> 当 image_tag 收到一个空白字符串时，它会尝试从资产管道中获取资源并返回
> 
> “未预编译”

[https://github.com/rails/rails/issues/3080](https://github.com/rails/rails/issues/3080)

打印`@user.avatar_url(:main).to_s`以仔细检查

# javascript - 从具有相同类的元素中使用 javascript 克隆内容

> ID：10434093
> 
> 赞同：0
> 
> 时间：2012-05-03T15:03:16.530
> 
> 标签：javascript, jquery, clone, code-duplication

我的 JavaScript 知识很少，我的任务是将 H2 和 P 从 DIV 复制到另一个悬停时显示的 DIV。请看看我在这里尝试做什么：http: [//dev.surgeryatnmc.org/surgical-services/](http://dev.surgeryatnmc.org/surgical-services/)。

我正在尝试从 .orig 克隆到 .hover，它有点工作，但在每个工具提示中显示所有三个活动项目，而不是单独显示。

这是我的清单项目：

```
<ul>
    <li class="lactrimal1">
                <div class="orig">
                    <h2>Lactrimal Duct Probe</h2>
                    <p>Helps patient regain use of their tear ducts in this quick procedure.</p>
                </div>                    
                <div class="img">
                    <div class="txt hover"></div>
                </div>
            </li>
            <li class="cataracts2">
                <div class="orig">
                    <h2>Cataracts</h2>
                    <p>We replace the eye's natural lens which has become clouded by cataract with an artificial lens.</p>
                </div>
                <div class="img">
                    <div class="txt hover"></div>
                </div>
            </li>
            <li class="sinus3">
                <div class="orig">
                    <h2>Endoscopic Sinus Surgery</h2>
                    <p>A procedure used to remove blockages in the sinuses to allow for efficient pain-free breathing.</p>
                </div>
                <div class="img">
                    <div class="txt hover"></div>
                </div>
            </li>
</ul> 
```

这是我的脚本：

```
$('div.orig', this).each(function() {
    $(this).clone().appendTo('div.hover');
}); 
```

我也试过这个，但它只克隆第一个项目：

```
$(".hover").html($('.orig').html()); 
```

任何帮助表示赞赏，谢谢大家！

**您的所有答案都有效，我没有意识到这个问题可以有这么多的解决方案。非常感谢您的帮助！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:10:17.917

```
$('div.orig').each(function() {
    $(this).parent().find('.txt').html( $(this).html() );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:07:51.623

尝试这样的事情

编辑：实际上你必须这样做才能到达元素

```
$('div.orig').each(function() {
    var jThis = $(this);
    jThis.parent().find('.hover').html(jThis.html());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:11:52.440

```
$('.orig', this).each(function() {
    $(this).next('.img').children('.hover').html($(this).html());
});
​ 
```

[小提琴](http://jsfiddle.net/S2Nhw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T15:14:20.223

另一种解决方案->

```
$(document).ready(function(){
$('div.orig', this).each(function(i,e) {
    $(this).clone().appendTo('div.hover:eq(' + i + ')');
});
})​ 
```

# windows - 如何检查 MIDI 设备是否也是 USB 设备？

> ID：10434095
> 
> 赞同：0
> 
> 时间：2012-05-03T15:03:20.690
> 
> 标签：windows, usb, midi, winmm

如何检查 MIDI 设备是否也是 USB 设备？

似乎一直在设备标识符中检查此字符串“\\?\\usb”是不够的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:33:51.447

使用`CM_Get_Parent`（递归）确定 MIDI 设备是否连接在 USB 根端口下。

# amazon-ec2 - 为什么数据库安全组中的 CIDR/IP 可能与实例弹性 IP 不同？

> ID：10434101
> 
> 赞同：7
> 
> 时间：2012-05-03T15:03:41.953
> 
> 标签：amazon-ec2, amazon-web-services, amazon-rds

我有一个 EC2 实例，它能够连接到我的 RDS 实例，但它的弹性 IP 没有出现在白名单 IP 的数据库安全组中。

这怎么可能？

我问是因为我创建了一个新实例，我也想将其列入白名单，并且仅输入其弹性 IP 似乎不是做事的方式，因为其他服务器都没有列出其弹性 IP。

提前致谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T16:34:41.853

这里可能有两个原因：

## 流量来源

[安全组规则](https://stackoverflow.com/a/8930548/45773)不一定将 IP 地址单独指定为流量来源，而是经常引用其他安全组：

> 源可以是单个 IP 地址 (203.0.113.1)、地址范围（例如 203.0.113.0/24）**或 EC2 安全组**。安全组可以是您的 AWS 账户中的另一个组、另一个 AWS 账户中的组或安全组本身。
> 
> 通过将安全组指定为源，**您允许来自属于源安全组的所有实例的传入流量**。[...] 如果您正在创建三层 Web 服务，您可以在您的帐户中指定另一个安全组（请参阅创建三层 Web 服务）。
> 
> *[强调我的]*

因此，您的[Amazon RDS](http://aws.amazon.com/rds/)实例的数据库安全组可能是指用于您的[Amazon EC2](http://aws.amazon.com/ec2/)实例的 EC2 安全组，这暗示了各自的访问权限。有关此概念/方法的更多详细信息，请参阅我对[AWS - 配置从 Beanstalk 应用程序访问 EC2 实例的](https://stackoverflow.com/a/8930548/45773)回答。

## 公共与私有 IP 地址

您可能会看到 AWS DNS 基础设施的一个鲜为人知但仍然很重要且非常有用的功能的效果，请参阅[使用实例 IP 地址](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-instance-addressing.html)页面上的[公共和私有地址](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-instance-addressing.html#concepts-instance-addressing)部分：

> Amazon EC2 还提供了一个内部 DNS 名称和一个公有 DNS 名称，它们分别映射到私有和公有 IP 地址。内部 DNS 名称只能在 Amazon EC2 内解析。**公共 DNS 名称解析为 Amazon EC2 网络外部的公共 IP 地址和 Amazon EC2 网络内的私有 IP 地址**。*[强调我的]*

也就是说，当您在 Amazon EC2 网络中使用它时，它将公共 DNS（例如 ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com）解析为私有 IP 地址，并解析为公共或弹性在 Amazon EC2 网络之外使用时的 IP 地址。

因此，出于各种原因，最重要的是网络速度和成本，各种 AWS 产品通常通过其私有 IP 地址而不是外部 IP 地址相互连接（请参阅我对[AWS EC2 弹性 IP 带宽使用和收费](https://stackoverflow.com/a/10056763)的回答）细节）。

因此，您的 Amazon RDS 实例的数据库安全组可能会引用您的 Amazon EC2 实例的私有 IP 地址，从而相应地暗示相应的访问权限。

# r - 将选定的行保留在 x 轴上，并在 Y 中的特定段处添加标签

> ID：10434108
> 
> 赞同：2
> 
> 时间：2012-05-03T15:04:07.717
> 
> 标签：r, formatting, ggplot2, axis

这是我的情节

```
dat <- data.frame(
  pos = c(1, 3, 5, 8, 10, 12),
  start = c(1,3, 6, 7, 10, 11),
  end = c(5, 6, 9, 9, 13, 12)
)

library(ggplot2)
p <- ggplot(dat) + geom_segment(aes(x=start, y=pos, xend=end, yend=pos), 
       color="blue", size=2) + ylab("Fragments)") +  xlab("Position")
    scale_y_reverse() + theme_bw()

p1 <- p + opts(legend.position="left",
        panel.background=theme_blank(),panel.border=theme_blank(),
        panel.grid.major=theme_blank(),
        panel.grid.minor=theme_blank(),plot.background=theme_blank())

p1 
```

![在此处输入图像描述](../Images/562c482c86c90a6ab9d13f4d39bab634.png)

位图所需的版本是，线段附近有轴线和标签。[只是额外注意：请注意，位图将行更改为圆形结束（看看我们是否可以在 ggplot2 中做会很有趣）]

![在此处输入图像描述](../Images/3ef8d0f04637b8acc99342be7ec99afb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:25:11.107

有趣的是，我实际上认为这在基本图形中更容易：

```
plot(c(0,13),c(1,12),type = "n",axes = FALSE,xlab = "Position",ylab = "")
segments(x0 = dat$start,
         y0 = dat$pos,
         x1 = dat$end,
         y1 = dat$pos,
         col = "blue",
         lwd = 6,
         lend = 2)
text(x = dat$start - 0.5,y = dat$pos,labels = dat$pos,font = 2)
axis(1)
axis(1,at = c(0,12),labels = FALSE,tcl = 0.5) 
```

**编辑**添加了额外`axis`的调用以在两个方向上获取最外层的刻度。

![在此处输入图像描述](../Images/ae059a3fc8182b97bb78698c764d9e11.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T22:30:01.687

**编辑：**更新`ggplot2`版本 0.9.3.1 的代码。

使用最新版本的 ggplot2，这项任务要容易得多。以下代码完成了所有工作：

```
# Load required packages
library(ggplot2)

# Your data
dat <- data.frame(
  pos = c(1, 3, 5, 8, 10, 12),
  start = c(1,3, 6, 7, 10, 11),
  end = c(5, 6, 9, 9, 13, 12) )

# Get the  plot
p <- ggplot(dat) + 
   geom_segment(aes(x=start, y=pos, xend=end, yend=pos), 
         color="blue", size=2, lineend = "round") + 
   ylab("Fragments") +  xlab("Position") + 
   theme_bw() +
   geom_text(aes(label = pos, x = start, y = pos), hjust = 1.7) +
   scale_x_continuous(breaks = seq(0,14,2), labels = seq(0,14,2), expand = c(0,0)) +
   scale_y_continuous(limits = c(-1, 14), expand = c(0,0))  +
   geom_hline(yintercept = -1) +
   geom_segment(aes(x = 0, y = -1, xend = 0, yend = -0.9)) +
   geom_segment(aes(x = 14, y = -1, xend = 14, yend = -0.9)) +
   theme(panel.grid.major=element_blank(),
       panel.grid.minor=element_blank(),
       panel.border=element_blank(),
       axis.ticks.y = element_blank(), 
       axis.title.y = element_blank(),
       axis.text.y = element_blank())
p 
```

**原答案：**

它可以完成`ggplot2`，有点摆弄。需要包中的函数`grid()`来删除 y 轴刻度线。

```
# Load required packages
library(ggplot2)
library(grid)

# Your data
dat <- data.frame(
  pos = c(1, 3, 5, 8, 10, 12),
  start = c(1,3, 6, 7, 10, 11),
  end = c(5, 6, 9, 9, 13, 12) )

# Get the base plot
p <- ggplot(dat) + 
   geom_segment(aes(x=start, y=pos, xend=end, yend=pos), 
   color="blue", size=2) + ylab("Fragments") +  xlab("Position") + theme_bw() +
   geom_text(aes(label = pos, x = start, y = pos), hjust = 1.7) +
   scale_x_continuous(breaks = seq(0,14,2), labels = seq(0,14,2), expand = c(0,0)) +
   scale_y_continuous(limits = c(-1, 14), expand = c(0,0))  +
   geom_hline(yintercept = -1) +
   geom_segment(aes(x = 0, y = -1, xend = 0, yend = -0.9)) +
   geom_segment(aes(x = 14, y = -1, xend = 14, yend = -0.9)) +
   opts(panel.grid.major=theme_blank(),
       panel.grid.minor=theme_blank(),
       panel.border=theme_blank(),
       axis.title.y = theme_blank(),
       axis.text.y = theme_blank())
p

# Remove the y-axis tick marks
g <- ggplotGrob(p)# Save plot as a grob
#grid.ls(g) 
grid.remove(grid.get("axis.ticks", grep=T, global = TRUE)[[1]]$name) 
```

结果：

![在此处输入图像描述](../Images/8b13266d06098f8567bbe2cbf426e31c.png)

通过更多的摆弄，您可以在线段上获得圆形末端。它需要`proto`安装软件包。然后运行从[这里](http://groups.google.com/group/ggplot2/browse_thread/thread/9a8befd1ffcc4ae6)获得的一些代码以启用一个新的几何图形`geom_segment2`，该几何图形采用“行结束”参数。

```
 # To create the new `geom_segment2`
library(proto)
GeomSegment2 <- proto(ggplot2:::GeomSegment, {
 objname <- "geom_segment2"
 draw <- function(., data, scales, coordinates, arrow=NULL, ...) {
   if (is.linear(coordinates)) {
     return(with(coord_transform(coordinates, data, scales),
       segmentsGrob(x, y, xend, yend, default.units="native",
       gp = gpar(col=alpha(colour, alpha), lwd=size * .pt,
         lty=linetype, lineend = "round"),
       arrow = arrow)
     ))
   }

}})

geom_segment2 <- function(mapping = NULL, data = NULL, stat =
"identity", position = "identity", arrow = NULL, ...)  {
  GeomSegment2$new(mapping = mapping, data = data, stat = stat,
        position = position, arrow = arrow, ...)
} 

    # The base plot
p <- ggplot(dat) + 
       geom_segment2(aes(x=start, y=pos, xend=end, yend=pos), 
       color="blue", size=2, lineend = "round") + ylab("Fragments") +  xlab("Position") + theme_bw() +
       geom_text(aes(label = pos, x = start, y = pos), hjust = 1.7) +
       scale_x_continuous(breaks = seq(0,14,2), labels = seq(0,14,2), expand = c(0,0)) +
       scale_y_continuous(limits = c(-1, 14), expand = c(0,0))  +
       geom_hline(yintercept = -1) +
       geom_segment(aes(x = 0, y = -1, xend = 0, yend = -0.9)) +
       geom_segment(aes(x = 14, y = -1, xend = 14, yend = -0.9)) +
       opts(panel.grid.major=theme_blank(),
           panel.grid.minor=theme_blank(),
           panel.border=theme_blank(),
           axis.title.y = theme_blank(),
           axis.text.y = theme_blank())
p

## Remove the y-axis tick marks
g <- ggplotGrob(p)
#grid.ls(g) 
grid.remove(grid.get("axis.ticks", grep=T, global = TRUE)[[1]]$name) 
```

结果：

![在此处输入图像描述](../Images/a8a82bd099cf21503eccfbb6de9f990a.png)

# sql - Sql 查询创建一个新表

> ID：10434110
> 
> 赞同：2
> 
> 时间：2012-05-03T15:04:21.910
> 
> 标签：sql

任何人都可以提供一个 sql 查询的语法，该查询需要一个已经创建的表并将一些数据插入到一个具有新 id（主键）的新表中？到目前为止我试过这个

```
SELECT ((ID INT IDENTITY(1,1) PRIMARY KEY), column1, column2, column3)
INTO table_name
FROM table_name 
```

我不断提出语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:15:50.897

```
SELECT column1, column2, column3
INTO table_name_new
FROM table_name_old 
```

像这样使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:07:56.357

```
INSERT INTO newtable (column1, column2, column3)
SELECT (column1, column2, column3) 
FROM table_name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T15:06:03.773

```
INSERT INTO new_table
(Column1, Column2 . . . )

SELECT Column1, Column2 FROM old_table 
```

不要在插入列表中包含标识列（具有自动生成的数字的主键）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T15:09:35.607

就像下面这样，插入记录时会自动创建一个新的id

```
insert into table1 (col1,col2,col3) select col1,col2,col3 from table2; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T15:18:45.430

根据[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/ms188029.aspx)，IDENTITY 属性将通过`SELECT INTO`子句传递，但约束不会。这意味着如果您包含源表中的原始 IDENTITY 列，则可以创建一个带有 IDENTITY 列的新表，但新表中的列不会是主键。

明智的做法是在创建表后使用 ALTER TABLE，正如@Kai 所建议的那样。

# spring - 在单元格中编辑未更新选择菜单的对象

> ID：10434112
> 
> 赞同：0
> 
> 时间：2012-05-03T15:04:25.670
> 
> 标签：spring, hibernate, jsf, jsf-2, primefaces

我在更新数据表中的对象时遇到问题，即使它与使用 incell edeting 的其他对象一起工作得很好：我有一个名为 Audit 的对象，其中包括一个对象Statu 和一个像这样的对象 utilisateur

```
 private int id;
private Statu statu;
private Utilisateur utilisateur;
private OrganismeAudite organismeAudite;
private String date;
private String personneRencontre; 
```

在数据表中我做：

```
<p:dataTable var="car" value="#{AuditBean.listAudit}" id="carList" editable="true">
       <p:ajax event="rowEdit" update="@this"
               listener="#{AuditBean.rowEditListener}" />
       <f:facet name="header">  
           Modification  
       </f:facet>

       <p:column headerText="ID" style="width:125px">
           <p:cellEditor>
               <f:facet name="output">
                   <h:outputText value="#{car.id}" />
               </f:facet>
               <f:facet name="input">
                   <p:inputText value="#{car.id}" style="width:100%" />
               </f:facet>
           </p:cellEditor>
       </p:column>

       <p:column headerText="Date" style="width:125px">
           <p:cellEditor>
               <f:facet name="output">
                   <h:outputText value="#{car.date}" />
               </f:facet>
               <f:facet name="input">
                   <p:inputText value="#{car.date}" style="width:100%" label="Year" />
               </f:facet>
           </p:cellEditor>
       </p:column>

       <p:column headerText="Personne Rencontre" style="width:125px">
           <p:cellEditor>
               <f:facet name="output">
                   <h:outputText value="#{car.personneRencontre}" />
               </f:facet>
               <f:facet name="input">
                   <h:inputText value="#{car.personneRencontre}" />
               </f:facet>
           </p:cellEditor>
       </p:column>

       <p:column headerText="Responsable Audit">
           <p:cellEditor>
               <f:facet name="output">
                   <h:outputText value="#{car.utilisateur.nom}" />
               </f:facet>
               <f:facet name="input">
                   <p:selectOneMenu id="idUtilisateur" value="#{car.utilisateur.idutilisateur}">
                       <f:selectItems value="#{UtilisateurBean.listUtilsa}"
                                      var="utilisateur" itemLabel="#{car.utilisateur.nom}"
                                      itemValue="#{car.utilisateur.idutilisateur}" />
                   </p:selectOneMenu>
               </f:facet>
           </p:cellEditor>
       </p:column>

       <p:column headerText="Statut Audit" style="width:125px">
           <p:cellEditor>
               <f:facet name="output">
                   <h:outputText value="#{car.statu.libelle}" />
               </f:facet>
               <f:facet name="input">
                   <p:selectOneMenu id="idStatut" value="#{car.statu.id}">

                       <f:selectItems var="statu" value="#{StatusBeane.listSta}"
                                      itemLabel="#{car.statu.libelle}"
                                      itemValue="#{car.statu.id}" />
                   </p:selectOneMenu>
               </f:facet>
           </p:cellEditor>
       </p:column>

       <p:column headerText="Organisme Audité" style="width:125px">
           <p:cellEditor>
               <f:facet name="output">
                   <h:outputText value="#{car.organismeAudite.nom}" />
               </f:facet>

               <f:facet name="input">
                   <p:selectOneMenu id="idOrganisme" value="#{AuditBean.idOrganisme}">
                       <f:selectItems var="orgStA" value="#{OrganismeAuditeBean.listOrga}" />
                   </p:selectOneMenu>
               </f:facet>
           </p:cellEditor>
       </p:column>

       <p:column headerText="Options" style="width:50px">
           <p:rowEditor />
       </p:column>

   </p:dataTable> 
```

负责任的审计列更新得很好，但它在状态审计列中不起作用。它们都是一对多的关系（我使用的是hibernate和spring ioc）

在 bean 中，rowlistener 是这样的：

```
 public void rowEditListener(RowEditEvent ev) {
    try {
        Audit userEdit = (Audit) ev.getObject();
        Utilisateur u= new Utilisateur();
        Statu sta=new Statu();
        System.out.println(userEdit.getStatu().getId());
        // getUserEJB().save(userEdit);
        System.out.println(userEdit.getDate() + " - " + userEdit.getId()+" - "+userEdit.getUtilisateur().getIdutilisateur()+" - "+userEdit.getStatu().getLibelle());
        resp.update(userEdit);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

现在，当我选择一个状态时，userEdit.getStatu().getLibelle() 会向我显示原始状态，而不是我从列表中选择的状态，但是如果我单击检查 incon，它每次只会保存一个值第二元素（状态）！！！！！！！！！！！！！！！！！！

我不知道我做错了什么提前谢谢:)

# json - 在 .NET 3.5 中未收到 REST WCF BadRequest 错误消息

> ID：10434114
> 
> 赞同：0
> 
> 时间：2012-05-03T15:04:43.413
> 
> 标签：json, wcf, .net-3.5, fiddler, bad-request

我有一个用 .NET 3.5 开发的 REST WCF 应用程序。

要检查无效的请求 URL，例如缺少参数等。我正在使用一个实现“IErrorHandler”接口的类。所以在那个类里面我有这段代码应该生成一个 BadRequest 错误代码和消息：

```
public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
        {
            ExceptionHelper.HandleException(error, Severity.Error);
            StatusResponseBE statusResponseEntity = new StatusResponseBE();
            statusResponseEntity.Code = STATUS_CODE_FAIL;
            statusResponseEntity.Message = "Failed to perform requested operation";
            statusResponseEntity.Errors = new ErrorResponseBECollection();

            if (error is SerializationException || error is InvalidOperationException)
            {
                statusResponseEntity.Errors.Add(new ErrorResponseBE()
                {
                    Code = EX_INVALID_REQUEST_CODE,
                    Description = "Invalid Request"
                });
                fault = Message.CreateMessage(version, string.Empty, statusResponseEntity, new DataContractJsonSerializer(typeof(StatusResponseBE)));
                fault.Properties.Add(WebBodyFormatMessageProperty.Name, new WebBodyFormatMessageProperty(WebContentFormat.Json));
                WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.BadRequest;
                return;
            }
            else
            {
                statusResponseEntity.Errors.Add(new ErrorResponseBE()
                {
                    Code = EX_INTERNAL_ERROR_CODE,
                    Description = "Internal Error"
                });
                fault = Message.CreateMessage(version, string.Empty, statusResponseEntity, new DataContractJsonSerializer(typeof(StatusResponseBE)));
                fault.Properties.Add(WebBodyFormatMessageProperty.Name, new WebBodyFormatMessageProperty(WebContentFormat.Json));
                WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.InternalServerError;
                return;

            }

        } 
```

但是，当我使用无效的请求 URL 访问 WCF 服务时，我收到 BadReqest 错误代码为 400，但响应 JSON 中没有消息，例如“代码：400；消息：无效请求”

```
HTTP/1.1 400 Bad Request
Cache-Control: private
Content-Type: application/xml; charset=utf-8
Server: Microsoft-IIS/7.0
Access-Control-Allow-Origin: *
X-AspNet-Version: 2.0.50727
Set-Cookie: ASP.NET_SessionId=xz412e35vruepr45qjrp5lyw; path=/; HttpOnly
X-Powered-By: ASP.NET
Date: Thu, 03 May 2012 14:47:15 GMT
Content-Length: 1165

<?xml version="1.0" encoding="utf-8"?><HTML><HEAD><STYLE type="text/css">#content{ FONT-SIZE: 0.7em; PADDING-BOTTOM: 2em; MARGIN-LEFT: 30px}BODY{MARGIN-TOP: 0px; MARGIN-LEFT: 0px; COLOR: #000000; FONT-FAMILY: Verdana; BACKGROUND-COLOR: white}P{MARGIN-TOP: 0px; MARGIN-BOTTOM: 12px; COLOR: #000000; FONT-FAMILY: Verdana}PRE{BORDER-RIGHT: #f0f0e0 1px solid; PADDING-RIGHT: 5px; BORDER-TOP: #f0f0e0 1px solid; MARGIN-TOP: -5px; PADDING-LEFT: 5px; FONT-SIZE: 1.2em; PADDING-BOTTOM: 5px; BORDER-LEFT: #f0f0e0 1px solid; PADDING-TOP: 5px; BORDER-BOTTOM: #f0f0e0 1px solid; FONT-FAMILY: Courier New; BACKGROUND-COLOR: #e5e5cc}.heading1{MARGIN-TOP: 0px; PADDING-LEFT: 15px; FONT-WEIGHT: normal; FONT-SIZE: 26px; MARGIN-BOTTOM: 0px; PADDING-BOTTOM: 3px; MARGIN-LEFT: -30px; WIDTH: 100%; COLOR: #ffffff; PADDING-TOP: 10px; FONT-FAMILY: Tahoma; BACKGROUND-COLOR: #003366}.intro{MARGIN-LEFT: -15px}</STYLE>
<TITLE>Request Error</TITLE></HEAD><BODY>
<DIV id="content">
<P class="heading1">Request Error</P>
<BR/>
<P class="intro">The server encountered an error processing the request. See server logs for more details.</P>
<P class="intro"></P>
</DIV>
</BODY></HTML> 
```

相反，我在 Fiddler 的 Raw 选项卡中得到了上述内容。

知道为什么会发生这种情况以及我能做些什么来解决它吗？它一直困扰着我很多，我已经尝试了所有方法，但它似乎并没有按应有的方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:23:37.693

这是我假设您用于该服务的 WebServiceHost 的问题。WCF Rest Starter Kit 2 中的 WebServiceHost2 应该允许您通过抛出 WebProtocolExceptions 为您的错误指定自定义 json 有效负载

您可以查看更多详细信息[http://www.robbagby.com/rest/effective-error-handling-with-wcf-rest/](http://www.robbagby.com/rest/effective-error-handling-with-wcf-rest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T18:37:58.557

尝试这个

```
var message = ex.GetOriginalMessage();
var statusCode = (ex is MyDomainException || ex.GetType().IsSubclassOf(typeof (MyDomainException)))
                        ? HttpStatusCode.BadRequest
                        : HttpStatusCode.InternalServerError;

var context = WebOperationContext.Current;

if (context == null || context.IncomingRequest.ContentType.ToLower().Contains("json"))
    throw new WebProtocolException(statusCode, statusCode.ToString(), message, null);

throw new WebProtocolException(statusCode, statusCode.ToString(), new XElement("Detail", message), false, null); 
```

# packaging - 在 Ada 中单独声明类型/包别名

> ID：10434117
> 
> 赞同：2
> 
> 时间：2012-05-03T15:04:55.947
> 
> 标签：packaging, ada

我想声明一些“用户定义的编译器常量”以使我的规范文件尽可能地保持“常量”。这在 C++ 中很常见，例如：

```
// misc/config.hh
namespace misc
{
  typedef std::shared_ptr<A> A_ptr; 
  namespace arch = ibmpc;
}

// misc/code.hh
#include "misc/config.hh"
namespace misc
{
  void function p(A_ptr a);
} 
```

这将在 Ada ：

```
-- misc.ads
package Misc is
  use Types; ----> forbidden !

  procedure P(A : A_Access);
end Misc;

-- misc-types.ads
package Misc.Types is
  type A_Access is A'Access;
end Misc.Types; 
```

当然这不起作用，因为`use`它是一个上下文关键字......因此我的问题是：如何在 Ada 中做一些具有相同结果的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:17:31.153

我认为这是从您的 C++ 原版到 Ada 的合理映射：

首先，我认为或多或少与您`namespace misc`的文件中的文件相对应`misc.ads`，

```
package Misc is
end Misc; 
```

然后，对应于`config.hh`，在文件中`misc-config.ads`，

```
package Misc.Config is
   type A is (For_Example, An_Enumeration);
   type A_Access is access A;
end Misc.Config; 
```

（当然，也可以引用 中的类型`Misc`）。然后，对应于`code.hh`，在文件中`misc-code.ads`，

```
with Misc.Config;
package Misc.Code is
   use Config;
   procedure P (A : A_Access);
end Misc.Code; 
```

就我个人而言，无论如何在规范中我都不会`use Config;`——这可能会让你很难弄清楚某些东西是在哪里定义的。请注意，您可以说`use Config;`或`use Misc.Config;`显示的地方，因为您是 ; 的`Misc`孩子 在上下文子句中，这也可以，你必须`use Misc.Config;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:34:12.853

您可以将子包规范放在父包规范中，如下所示：

```
package Misc is
   package Types is
      type A is private;
      type A_Access is access A;
      -- other stuff
   end Types;

   procedure P (A : Types.A_Access);
end Misc; 
```

你甚至可以`use Types;`在声明`Misc.Types`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T16:17:30.927

好的，虽然我看到你正在尝试做的事情，但你做错了。给定片段的问题是：循环依赖。

现在，Ada 有一种很好的方式来管理循环依赖，通过使用规范和主体使其非循环（在某种意义上）。由于两者是离散的，我们可以有两组规范/正文文件，其中正文引用另一个规范，因为规范是公开可见的。

举个例子，固然可笑；让我们使用钢笔和墨盒。

```
With Cartridge;
Package Pen is

  Subtype Model_Number is Positive Range 1000..3304;
  Type Fountain_pen is private;
  -- Pen procedures
private
  Type Fountain_pen is Record
 Model  : Model_Number;
     Ink    : Cartridge.Ink_Cartridge;
  end record;      
end Pen; 
```

和

```
With Pen;
Package Cartridge is
  Type Ink_Cartridge is private;
  -- Ink procedures
private
  Type Ink_Cartridge is record
     Color      : Integer; -- I'm being lazy.
     This_Pen   : Pen.Fountain_pen;
  end record;
end Cartridge; 
```

和

```
Package Body Pen is
  --- Pen Stuff
end Pen;

Package Body Cartridge is
  -- Ink stuff
end Cartridge; 
```

（未编译。）虽然我忘记了如何创建循环嵌套类型的组件......无论如何，你应该在那里得到一般的想法。但是您想要的与相互依赖的类型根本不同；您想要的是某种常量容器。

我建议使用子包。`Misc`和`Misc.Constants`;之类的东西 您将基本类型放入 Misc，将常量放入 Misc.Constants。如果您的类型依赖于您的常量，您可以为它们创建一个单独的子包`Misc.Types`并使用如上所示的相互关联。

# asp.net-mvc - MVC3 - '元素'链接'不能嵌套在元素'链接'' - 试图添加页面特定的CSS

> ID：10434120
> 
> 赞同：7
> 
> 时间：2012-05-03T15:05:09.247
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

因此我有一个布局页面

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/content/main_layout.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/content/menu.css")" rel="stylesheet" type="text/css" />
    @RenderSection("JS", required:false)
    @RenderSection("CSS", required:false)
</head>
<body>
    @RenderBody()
</body>
</html> 
```

然后是这样的视图

```
@{
    ViewBag.Title = "Home";
    Layout = "~/views/shared/_layout.cshtml";
}
@using RS.Common.HtmlHelpers;
@section JS
{
    <script src="@Url.Content("~/scripts/fue.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/scripts/jquery.flexslider-min.js")" type="text/javascript"></script>
}
@section CSS 
{
    <link href="@Url.Content("~/content/hp.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/content/hp_form.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/content/flexslider.css")" rel="stylesheet" type="text/css" />
}

<h4>Test!</h4> 
```

页面加载正常，如我所料。但是，我收到 3 个警告：

```
Validation (XHTML 1.0 Transitional): Element 'link' cannot be nested within element 'link' 
```

此错误针对视图上 CSS 部分中的每个`标记。`

 `在这个阶段这只是一个烦恼，但我想知道这个错误的原因（以及解决方案）可能是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T15:10:51.283

您已指定 HTML5 DOCTYPE 并尝试验证为`XHTML 1.0 Transitional`. 我想最终呈现的 HTML 如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <link href="/content/main_layout.css" rel="stylesheet" type="text/css" />
    <link href="/content/menu.css" rel="stylesheet" type="text/css" />

    <script src="/scripts/fue.js" type="text/javascript"></script>
    <script src="/scripts/jquery.flexslider-min.js" type="text/javascript"></script>

    <link href="/content/hp.css" rel="stylesheet" type="text/css" />
    <link href="/content/hp_form.css" rel="stylesheet" type="text/css" />
    <link href="/content/flexslider.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <h4>Test!</h4>
</body>
</html> 
```

您可能希望`RenderSection`在布局中颠倒两者的顺序，以便将链接和脚本组合在一起。或者您也可以考虑将脚本声明移到页面末尾：

像这样：

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/content/main_layout.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/content/menu.css")" rel="stylesheet" type="text/css" />
    @RenderSection("CSS", required:false)
</head>
<body>
    @RenderBody()

    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    @RenderSection("JS", required:false)
</body>
</html> 
````

# format - 我可以在 XForms 标签和提示上添加丰富的格式（粗体、斜体、下划线）吗？

> ID：10434125
> 
> 赞同：1
> 
> 时间：2012-05-03T15:05:43.540
> 
> 标签：format, xforms, text-formatting, odk, javarosa

我们正在开发一个基于 XForms 的调查系统。客户想要为标签和提示添加丰富的格式。

这可能吗？如果是这样，您如何定义 XForm xml 的格式？有没有我可以去的参考页面？

更新：我们目前正在为使用 JavaRosa 的 ODK 实施。我们计划稍后推出我们自己的移动应用程序，以保持与当前 ODK Collect 应用程序的兼容性。

更新 2：我们的客户实际上希望拥有以下形式的标签：

> *敏捷* 的**棕色**狐狸跳过了***懒惰***的狗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:42:44.900

ODK Collect 没有丰富的格式，但[您可以使用图像](http://opendatakit.org/help/image-based-forms/)。我整理了[一个文本渲染器](http://bit.ly/Nx17yR)，如果有帮助的话，它可以让你用 pango 标记格式化你的文本。

# objective-c - iOS webview 内容不适合横向模式

> ID：10434133
> 
> 赞同：0
> 
> 时间：2012-05-03T15:06:03.877
> 
> 标签：objective-c, ios, xcode, cocoa-touch, jquery-mobile

我正在使用 webview 来显示 google maps + jqmobile。Webview 可以在横向和纵向上正确调整大小，但是，它的内容不能完全适合纵向而不是横向。我发现了一些将其报告为错误的信息，但我无法解决它。谢谢你。

从 jquery mobile .html 我尝试了以下配置，

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0;" />
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0;" /> 
```

来自 xcode .m 文件，

```
webView1.scalesPageToFit = YES;

NSURLRequest *req = [[NSURLRequest alloc] initWithURL: [NSURL URLWithString:[urlBase stringByAppendingString:@".html"]] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:10]; 

[webView1 loadRequest:req]; 
```

![在此处输入图像描述](../Images/a45d659fd9942255dba7fd8cda905d6b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:13:20.503

当您旋转时，webview 不会重新加载其内容，因此您在横向中看到的是按纵向视口调整大小的内容。这也意味着它不像普通的 Mobile Safari 那样尊重旋转媒体查询。最好的解决方案是在旋转时重新加载 webview。

# iphone - 如何在 Asp 中从 iphone 的 http 帖子中获取所有节点？

> ID：10434135
> 
> 赞同：1
> 
> 时间：2012-05-03T15:06:04.920
> 
> 标签：iphone, asp.net, vb.net, http-post

我只想从 iphone 捕获 xml 帖子中的每个节点，例如这是我需要“获取”的 xml 文件

```
<Matchs>
   <owner>Me</owner>
   <typeAction>Me</typeAction>
   <match id=21>sept  3 2011 </match>
   <match id=22>sept  4 2011 </match>
   <match id=23>sept  5 2011 </match>

</Matchs> 
```

我能够获取每个节点，但是当有多个具有相同名称的节点时，我不知道该怎么做......

这是我获取值的代码：

```
Public Shared Function TryParse(ByVal value As String, ByRef notification As MatchModel) As Boolean
    Dim success As Boolean = False
    notification = Nothing
    Try
        Dim xReader As System.Xml.XmlReader = System.Xml.XmlReader.Create(New System.IO.StringReader(value))
        Dim element As System.Xml.Linq.XElement = System.Xml.Linq.XElement.Load(xReader)
        notification = New MatchModel()
        ' Populate the top XML elements values
        Dim wItem As System.Xml.Linq.XElement = Nothing
        Dim actual As matchAlone = Nothing

        While xReader.MoveToElement()
            If element IsNot Nothing Then
                wItem = element.Element("match")
                actual.Description = GetXElementValue(element, "match")
                actual.Id = GetWorkItemAttributeValue(wItem, "id")
            End If
        End While
        notification.Owner = GetXElementValue(element, "owner")
        notification.TypeAction = GetXElementValue(element, "typeAction")
        success = True
    Catch e As Exception
        Console.WriteLine(e.Message)
    End Try
    Return success
End Function

Public Shared Function GetXElementValue(ByVal element As System.Xml.Linq.XElement, ByVal name As System.Xml.Linq.XName) As String
    Dim value As String = Nothing
    If element IsNot Nothing Then
        value = element.Element(name).Value
    End If
    Return value
End Function

Public Shared Function GetWorkItemAttributeValue(ByVal element As System.Xml.Linq.XElement, ByVal name As System.Xml.Linq.XName) As String
    Dim value As String = Nothing
    If element IsNot Nothing Then
        value = element.Attribute(name).Value
    End If
    Return value
End Function 
```

请heeeeeelp :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:26:25.330

```
Dim doc as XmlDocument = New XmlDocument()
doc.LoadXml(value)
For Each node as XmlNode in doc.SelectNodes("/Matches/Match")
    'Do work
Next 
```

# ios - 如何使用导航控制器创建静态子视图？

> ID：10434137
> 
> 赞同：3
> 
> 时间：2012-05-03T15:06:13.253
> 
> 标签：ios, xcode, uiview, uinavigationcontroller, three20

我创建了一个带有一堆视图控制器的导航控制器。

我想在底部添加一个子视图，当用户在这堆视图之间导航时它保持静态（不移动）。

与某些应用程序一样，底部有一个“广告栏”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T16:09:23.940

如果我理解正确，这就是你想要的：

![UIView 在 UINavigationController 下方或 TabBar 下方](../Images/ce3c311894d7a9d7d091cdd44e254abf.png)

您可以通过创建一个包含 UINavigationController 的自定义 UIViewController 来实现这一点。创建一个名为“CustomViewController”的新类，并粘贴以下代码：

**界面**

```
#import <UIKit/UIKit.h>

@interface CustomViewController : UIViewController

- (id)initWithViewController:(UIViewController*)viewController bottomView:(UIView*)bottomView;

@end 
```

**执行：**

```
#import "CustomViewController.h"

@implementation CustomViewController

- (id)initWithViewController:(UIViewController*)viewController bottomView:(UIView*)bottomView
{
    self = [super init];
    if (self) {

        //  Set up view size for navigationController; use full bounds minus 60pt at the bottom
        CGRect navigationControllerFrame = self.view.bounds;
        navigationControllerFrame.size.height -= 60;
        viewController.view.frame = navigationControllerFrame;

        //  Set up view size for bottomView
        CGRect bottomViewFrame = CGRectMake(0, self.view.bounds.size.height-60, self.view.bounds.size.width, 60);
        bottomView.frame = bottomViewFrame;

        //  Enable autoresizing for both the navigationController and the bottomView
        viewController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        bottomView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;

        //  Add views as subviews to the current view
        [self.view addSubview:viewController.view];
        [self.view addSubview:bottomView];
    }
    return self;
}

@end 
```

现在使用 CustomViewController：

```
UIView *myBottomView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 100)];
myBottomView.backgroundColor = [UIColor redColor];

CustomViewController *customViewController = [[CustomViewController alloc] initWithViewController:<yourNavigationController> bottomView:myView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:18:53.527

为什么不将此静态子视图添加到与导航控制器视图相同的级别（通常在 UIWindow 附近）。只需将其添加到最上面即可。

# c++ - 任意类型的映射向量

> ID：10434144
> 
> 赞同：4
> 
> 时间：2012-05-03T15:06:25.360
> 
> 标签：c++, stdvector, stdmap, boost-any

我需要存储一个不同类型的列表向量，每个向量都由一个字符串标识符引用。现在，我使用`std::map`with`std::string`作为键和`boost::any`值（示例实现[在这里发布](https://gist.github.com/2587386)）。

尝试对所有存储的向量运行方法时，我遇到了困难，例如：

```
std::map<std::string, boost::any>::iterator it;
for (it = map_.begin(); it != map_.end(); ++it) {
  it->second.reserve(100);  // FAIL: refers to boost::any not std::vector
} 
```

我的问题：

*   是否可以转换`boost::any`为任意向量类型以便我可以执行它的方法？
*   有没有更好的方法来映射任意类型的向量，然后用正确的类型检索？

目前，我正在玩弄另一种实现，它替换`boost::any`为指向基础容器类的指针，如[this answer](https://stackoverflow.com/questions/3983814/pointer-to-stdvector-of-arbitrary-type-or-any-other-templated-class/3983859#3983859)中所建议的那样。这开辟了一个全新的蠕虫罐头，还有我需要解决的其他问题。如有必要，我很高兴沿着这条路线走下去，但我仍然想知道我是否可以使它与 一起工作`boost::any`，是否有其他更好的解决方案。

*PS 我是一个 C++ ~~n00b~~新手（并且已经被 Python 的动态类型宠坏了太久了），所以我很可能会以错误的方式解决这个问题。严厉的批评（最好是建议）是非常受欢迎的。*

* * *

### 大图：

正如评论中所指出的，这很可能是一个 XY 问题，所以这里是我想要实现的目标的概述。

我正在为管理任务执行的模拟框架编写任务调度程序；每个任务都是对一组数据向量的基本操作。例如，如果`task_A`在模型中定义为一个操作，`"x"(double), "y"(double), "scale"(int)`那么我们实际上试图模拟的是`task_A(double x[i], double y[i], int scale[i])`对所有值的执行`i`。

每个任务（函数）都对不同的数据子集进行操作，因此这些函数共享一个共同的函数签名，并且只能通过特定的 API 访问数据，例如`get_int("scale")`和`set_double("x", 0.2)`.

在框架的前一个化身（用 C 语言编写）中，任务是静态调度的，框架基于给定模型生成代码以运行模拟。任务的排序基于从模型定义中提取的依赖图。

我们现在正尝试为所有模型创建一个公共运行时，该运行时调度程序在满足它们的依赖关系时执行任务。从生成特定于模型的代码到生成通用代码的转变带来了各种各样的痛苦。本质上，我需要能够一般地处理异质向量并通过“名称”（也许还有`type_info`）访问它们，因此上述问题。

我愿意接受建议。任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:56:02.527

查看添加的细节，我的直接反应是将数据分成多个单独的地图，类型作为模板参数。例如，您将替换`get_int("scale")`为`get<int>("scale")`和`set_double("x", 0.2)``set<double>("x", 0.2);`

或者，使用`std::map`, 您可以很容易地将它（例如）更改为类似`doubles["x"] = 0.2;`or `int scale_factor = ints["scale"];`（尽管您可能需要对后者有点警惕——如果您尝试检索一个不存在的值，它将使用默认值创建它初始化而不是发出错误信号）。

无论哪种方式，您最终都会得到许多单独的集合，每个集合都是同质的，而不是试图将多个不同类型的集合放在一个大集合中。

如果你真的需要将它们放在一个整体集合中，我会认真考虑是否只使用一个结构，所以它会变成类似`vals.doubles["x"] = 0.2;`或`int scale_factor = vals.ints["scale"];`

至少临时来说，我认为这并没有损失太多东西，并且通过始终保留静态类型，它似乎更适合 C++ 的预期工作方式。

# .net - LINQ：查询返回空对象列表

> ID：10434148
> 
> 赞同：0
> 
> 时间：2012-05-03T15:06:36.943
> 
> 标签：.net, vb.net, linq, linq-to-dataset

我有一个“选择”类型对象的查询：

```
Dim l as IList(Of Foo) = (From dataRow As DataRow In table.Select()
                          Where CStr(dataRow("Column1")) = "A"
                          Select New Foo(CStr(dataRow("Column1")), _
                                         CStr(dataRow("Column2")))).ToList() 
```

发生的事情是，如果我为的构造函数设置断点`Foo`和步骤，构造函数被命中并且参数被加载参数。但是，`l`有空`Foo`对象（每个对象中的成员都是`Nothing`）。这里会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:11:31.270

将您的查询更改为：

```
Dim l as IList(Of Foo) = (From dataRow As DataRow In table..AsEnumerable()
                          Where datarow.Field(of String)("Column1") = "A" 
                          Select New Foo(datarow.Field(of String)("Column1"), _
                                         datarow.Field(of String)("Column1"))).ToList() 
```

有关更多信息，您可以访问[此处](http://msdn.microsoft.com/en-us/vstudio/bb688086)和[此处](http://www.codeproject.com/Articles/81417/Linq-To-Dataset-Display-the-Contents-of-Several-Ta)

# java - 如何将 PersistentBitmap 与位图调整一起使用？

> ID：10434154
> 
> 赞同：0
> 
> 时间：2012-05-03T15:06:51.100
> 
> 标签：java, blackberry, bitmap, resize

我目前使用这样的代码来为不同的屏幕尺寸重新调整位图：

```
A.back = GPATools.ResizeTransparentBitmap(A.back, 150, 37,
                    Bitmap.FILTER_LANCZOS, Bitmap.SCALE_TO_FIT); 
```

但是，每次我加载应用程序时，都需要花费一些时间来重新调整它的大小，所以我被告知要使用以下代码：

```
class PersistableBitmap implements Persistable {

    int width;
    int height;
    int[] argbData;

    public PersistableBitmap(Bitmap image){
        width = image.getWidth();
        height = image.getHeight();
        argbData =new int[width * height];
        image.getARGB(argbData,0, width,0,0, width, height);
    }

    public Bitmap getBitmapImage(){
        Bitmap image =new Bitmap(width, height);
        image.setARGB(argbData,0, width,0,0, width, height);
        return image;
    } 
```

我的问题是，我不知道如何同时实现这两者！请各位大侠帮忙，万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:17:21.150

以下链接可能会有所帮助：

*   [操作方法 - 在 BlackBerry 智能手机上存储持久数据](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800625/How_To_-_Store_persistent_data_on_the_BlackBerry_smartphone.html?nodeid=800530&vernum=0)

*   [持久存储对象](http://docs.blackberry.com/en/developers/deliverables/17952/Storing_objects_persistently_1219782_11.jsp)

*   [BlackBerry 上的持久性模型简介](http://supportforums.blackberry.com/t5/Java-Development/Introduction-to-Persistence-Models-on-BlackBerry/ta-p/446810)

*   [如何在 Persistent Store 中保存 BlackBerry 设置](http://miamicoder.com/2010/how-to-save-blackberry-settings-in-the-persistent-store/)

*   [黑莓持久存储](http://www.riccomini.name/Topics/Mobile/BlackBerry/BlackBerryPersistentStore/)

*   [持久存储 - StackOverflow 问题](https://stackoverflow.com/questions/4611817/persistent-store)

# android - 一个 MediaPlayer 的多个 VideoViews

> ID：10434156
> 
> 赞同：2
> 
> 时间：2012-05-03T15:07:11.020
> 
> 标签：android, android-mediaplayer

我想知道是否可以将多个 VideoViews 附加到一个 MediaPlayer 以便所有 VideoViews 播放相同的视频？

我查看了 VideoView、MediaPlayer、MediaController 等的来源，我认为它应该与某种“复合”-VideoView 一起使用，它包含对其他 VideoViews 的引用并将视频委托给它们？！

有没有人做过这样的事情，如果可能的话，可以给我一些建议吗？

# c++ - 顺序蒙特卡罗方法的实现（粒子过滤器）

> ID：10434170
> 
> 赞同：14
> 
> 时间：2012-05-03T15:07:52.057
> 
> 标签：c++, probability, montecarlo, inference, particle-filter

我对这里给出的粒子过滤器的简单算法感兴趣：[http](http://www.aiqus.com/upfiles/PFAlgo.png) ://www.aiqus.com/upfiles/PFAlgo.png看起来很简单，但我不知道如何实际操作。关于如何实现它的任何想法（只是为了更好地理解它是如何工作的）？

**编辑：** 这是一个很好的简单示例，解释了它是如何工作的：[http ://www.aiqus.com/questions/39942/very-simple-particle-filters-algorithm-sequential-monte-carlo-method-implementation?page= 1#39950](http://www.aiqus.com/questions/39942/very-simple-particle-filters-algorithm-sequential-monte-carlo-method-implementation?page=1#39950)

我尝试在 C++ 中实现它：http: [//pastebin.com/M1q1HcN4](http://pastebin.com/M1q1HcN4)但我确定我是否以正确的方式进行操作。你能检查一下我是否理解得很好，还是根据我的代码有一些误解？

```
#include <iostream>
#include <vector>
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/uniform_01.hpp>
#include <boost/random/uniform_int_distribution.hpp>

using namespace std;
using namespace boost;

double uniform_generator(void);

#define N 4 // number of particles

#define evolutionProba_A_A 1.0/3.0 // P(X_t = A | X_t-1 = A)
#define evolutionProba_A_B 1.0/3.0 // P(X_t = A | X_t-1 = B)
#define evolutionProba_B_B 2.0/3.0 // P(X_t = B | X_t-1 = B)
#define evolutionProba_B_A 2.0/3.0 // P(X_t = B | X_t-1 = A)

#define observationProba_A_A 4.0/5.0 // P(Y_t = A | X_t = A)
#define observationProba_A_B 1.0/5.0 // P(Y_t = A | X_t = B)
#define observationProba_B_B 4.0/5.0 // P(Y_t = B | X_t = B)
#define observationProba_B_A 1.0/5.0 // P(Y_t = A | X_t = A)

/// ===========================================================================

typedef struct distrib { float PA; float PB; } Distribution;

typedef struct particle
{
    Distribution distribution; // e.g. <0.5, 0.5>
    char state; // e.g. 'A' or 'B'
    float weight; // e.g. 0.8
}
Particle;

/// ===========================================================================

int main()
{
    vector<char> Y; // data observations
    Y.push_back('A'); Y.push_back('B'); Y.push_back('A'); Y.push_back('A'); Y.push_back('A'); Y.push_back('B');
    Y.push_back('A'); Y.push_back('A'); Y.push_back('B'); Y.push_back('A'); Y.push_back('B'); Y.push_back('A');
    Y.push_back('A'); Y.push_back('B'); Y.push_back('B'); Y.push_back('A'); Y.push_back('A'); Y.push_back('B');

    vector< vector<Particle> > Xall; // vector of all particles from time 0 to t

    /// Step (1) Initialisation
    vector<Particle> X; // a vector of N particles
    for(int i = 0; i < N; ++i)
    {
        Particle x;

        // sample particle Xi from initial distribution
        x.distribution.PA = 0.5; x.distribution.PB = 0.5;
        float r = uniform_generator();
        if( r <= x.distribution.PA ) x.state = 'A'; // r <= 0.5
        if( x.distribution.PA < r && r <= x.distribution.PA + x.distribution.PB ) x.state = 'B'; // 0.5 < r <= 1

        X.push_back(x);
    }

    Xall.push_back(X);
    X.clear();

    /// Observing data
    for(int t = 1; t <= 18; ++t)
    {
        char y = Y[t-1]; // current observation

        /// Step (2) Importance sampling
        float sumWeights = 0;
        vector<Particle> X; // a vector of N particles
        for(int i = 0; i < N; ++i)
        {
            Particle x;

            // P(X^i_t = A) = P(X^i_t = A | X^i_t-1 = A) * P(X^i_t-1 = A) + P(X^i_t = A | X^i_t-1 = B) * P(X^i_t-1 = B)
            x.distribution.PA = evolutionProba_A_A * Xall[t-1][i].distribution.PA + evolutionProba_A_B * Xall[t-1][i].distribution.PB;

            // P(X^i_t = B) = P(X^i_t = B | X^i_t-1 = A) * P(X^i_t-1 = A) + P(X^i_t = B | X^i_t-1 = B) * P(X^i_t-1 = B)
            x.distribution.PB = evolutionProba_B_A * Xall[t-1][i].distribution.PA + evolutionProba_B_B * Xall[t-1][i].distribution.PB;

            // sample the a particle from this distribution
            float r = uniform_generator();
            if( r <= x.distribution.PA ) x.state = 'A';
            if( x.distribution.PA < r && r <= x.distribution.PA + x.distribution.PB ) x.state = 'B';

            // compute weight of this particle according to the observation y
            if( y == 'A' )
            {
                if( x.state == 'A' ) x.weight = observationProba_A_A; // P(y = A | X^i_t = A)
                else if( x.state == 'B' ) x.weight = observationProba_A_B; // P(y = A | X^i_t = B)
            }
            else if( y == 'B' )
            {
                if( x.state == 'A' ) x.weight = observationProba_B_A; // P(y = B | X^i_t = A)
                else if( x.state == 'B' ) x.weight = observationProba_B_B; // P(y = B | X^i_t = B)
            }

            sumWeights += x.weight;

            X.push_back(x);
        }

        // normalise weights
        for(int i = 0; i < N; ++i)
            X[i].weight /= sumWeights;

        /// Step (3) resampling N particles according to weights
        float PA = 0, PB = 0;
        for(int i = 0; i < N; ++i)
        {
            if( X[i].state == 'A' ) PA += X[i].weight;
            else if( X[i].state == 'B' ) PB += X[i].weight;
        }

        vector<Particle> reX; // new vector of particles
        for(int i = 0; i < N; ++i)
        {
            Particle x;

            x.distribution.PA = PA;
            x.distribution.PB = PB;

            float r = uniform_generator();
            if( r <= x.distribution.PA ) x.state = 'A';
            if( x.distribution.PA < r && r <= x.distribution.PA + x.distribution.PB ) x.state = 'B';

            reX.push_back(x);
        }

        Xall.push_back(reX);
    }

    return 0;
}

/// ===========================================================================

double uniform_generator(void)
{
    mt19937 gen(55);
    static uniform_01< mt19937, double > uniform_gen(gen);
    return uniform_gen();
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-15T12:43:42.763

[这个在线课程](https://www.udacity.com/course/artificial-intelligence-for-robotics--cs373)非常容易理解，对我来说它很好地解释了粒子过滤器。

它被称为“编程机器人汽车”，它谈到了三种定位方法：蒙特卡洛定位、卡尔曼滤波器和粒子滤波器。

该课程完全免费（现已结束，因此您无法积极参与，但您仍然可以观看讲座），由斯坦福教授教授。这些“课程”对我来说非常容易上手，并且伴随着一些小练习——其中一些只是合乎逻辑的，但很多都是编程。此外，您可以玩的家庭作业。

它实际上让您在 python 中为所有过滤器编写自己的代码，它们也为您测试。在课程结束时，您应该已经在 python 中实现了所有 3 个过滤器。

强烈建议去看看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T20:48:07.837

以下是一些很好的来源链接：

Matlab：[http ://wiki.esl.fim.uni-passau.de/index.php/Filtering_III:_Kalman_and_Particle_Filter](http://wiki.esl.fim.uni-passau.de/index.php/Filtering_III:_Kalman_and_Particle_Filter)

C：[http](http://www.robots.ox.ac.uk/~misard/condensation.html) ://www.robots.ox.ac.uk/~misard/condensation.html （凝聚算法）

C++：[http ://robotics.usc.edu/~boyoon/particle.html](http://robotics.usc.edu/~boyoon/particle.html)

Java：[http ://www.oursland.net/projects/particlefilter/](http://www.oursland.net/projects/particlefilter/)

# python - 对数据库进行更改后重新评估 django 查询

> ID：10434172
> 
> 赞同：6
> 
> 时间：2012-05-03T15:07:55.283
> 
> 标签：python, django, dry, django-queryset

我在视图上得到了这个长查询集语句

```
 contributions = user_profile.contributions_chosen.all()\
    .filter(payed=False).filter(belongs_to=concert)\
    .filter(contribution_def__left__gt=0)\
    .filter(contribution_def__type_of='ticket') 
```

我在我的模板中使用

```
context['contributions'] = contributions 
```

稍后在该视图中，我对表contributions_chosen 进行更改（添加或删除记录），如果我想更新我的上下文['contributions']，我需要使用相同长度的查询重新查询数据库。

```
contributions = user_profile.contributions_chosen.all()\
.filter(payed=False).filter(belongs_to=concert)\
.filter(contribution_def__left__gt=0)\
.filter(contribution_def__type_of='ticket') 
```

然后再次更新我的上下文

```
context['contributions'] = contributions 
```

所以我想知道是否有任何方法可以避免重复我自己，重新评估贡献，使其真正反映数据库中的真实数据。理想情况下，我会修改查询集的贡献，它的值会被更新，同时数据库会反映这些变化，但我不知道该怎么做。

更新：这是我在两个上下文 ['contributions'] = 贡献之间所做的

我将一个新的贡献对象添加到贡献_选择（这是一个 m2m 关系），

```
contribution = Contribution.objects.create(kwarg=something,kwarg2=somethingelse)
user_profile.contributions_chosen.add(contribution) 
contribution.save()
user_profile.save() 
```

在某些情况下，我删除了一个贡献对象contribution = user_profile.contributions_chosen.get(id=1) user_profile.contributions_chosen.get(id=request.POST['con contributions.delete()

如您所见，我正在修改表contribution_chosen，因此我必须重新发出查询并更新上下文。我究竟做错了什么？

更新在看到您关于评估的评论后，我意识到我确实评估了我在 context['contribution'] 之间执行 len(contributions) 的查询集，这似乎是个问题。我会在数据库操作之后移动它，就是这样，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:25:28.050

*更新* 似乎您还没有评估查询集`contributions`，因此无需担心更新它，因为它仍然没有从数据库中获取数据。

你可以在两`context['contributions'] = contributions`行之间发布代码吗？通常在评估查询集之前`contributions`（例如通过迭代它或调用它`__len__()`），它不包含从 DB 读取的任何内容，因此您不必*更新*其内容。

要重新评估查询集，您可以

```
# make a clone
contribution._clone()
# or any op that makes clone, for example
contribution.filter()

# or clear its cache
contribution._result_cache = None

# you could even directly add new item to contribution._result_cache, 
# but its could cause unexpected behavior w/o carefulness 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:21:20.827

我不知道如何避免重新评估查询，但在代码中保存一些重复语句的一种方法是创建一个包含所有这些过滤器的dict 并将`filter`args 指定为 dict：

```
query_args = dict(
    payed=False,
    belongs_to=concert,
    contribution_def__left__gt=0,
    contribution_def__type_of='ticket',
) 
```

接着

```
contributions = user_profile.contributions_chosen.filter(**query_args) 
```

**这只是去除了一些重复的代码，但并没有解决重复的查询。**如果您需要更改 args，只需将其`query_args`作为普通 Python dict 处理，它毕竟是一个 :)

# java - 使用 Java 通过 Sharepoint Web 服务访问经常性日历事件

> ID：10434176
> 
> 赞同：1
> 
> 时间：2012-05-03T15:08:10.607
> 
> 标签：java, web-services, sharepoint

我正在为 iOS 移动应用程序开发 Web 服务（使用 Java），作为要求的一部分，需要获取 SharePoint 中所有已定义日历事件的所有重复。我能够为此生成所有存根，并使用该方法毫无问题`getListItems`地获取***日历事件列表。***但我无法使用这种方法来获取***循环***数据。我尝试了许多不同的查询和查询选项参数，每次失败时都使用`javax.xml.ws.soap.SOAPFaultException`.

使用该`getListItems`方法，我能够像这样检索日历事件列表，但不能检索***重复***：

```
<z:row ows_Created="2012-03-30 17:07:49"
    ows_EndDate="2012-06-04 16:30:00"
    ows_EventDate="2012-04-02 14:00:00"
    ows_FSObjType="881;#0"
    ows_FileRef="881;#teamsite/SCM/Lists/CIG ISTQA Build  Deployment Calender/881_.000"
    ows_ID="881" ows_MetaInfo="881;#"
    ows_Title="IST7 (COL + nJPMOL) - September PnT PH2 Early IST "
    ows_UniqueId="881;#{3F79DE4B-7609-4559-9176-3F8598CEC45B}"
    ows__Level="1" ows__ModerationStatus="0"
    ows_fAllDayEvent="0" ows_fRecurrence="1"
    ows_owshiddenversion="2"/> 
```

我也尝试了以下链接中的所有选项，但同样失败。

[通过 Web 服务从 Sharepoint 日历中展开重复事件](https://stackoverflow.com/questions/376142/expand-recurring-events-from-a-sharepoint-calendar-over-webservices)

我用以下方法尝试了所有这些查询`getListItems`：

```
 <Where><Or><And><Geq>
            <FieldRefName='EventDate'/>
            <ValueType='DateTime'StorageTZ='TRUE'>
            <Today/></Value></Geq><Leq>
            <FieldRefName='EventDate'/>
            <ValueType='DateTime'StorageTZ='TRUE'>
            <Today/></Value></Leq></And><And><Leq>
            <FieldRefName='EventDate'/>
            <ValueType='DateTime'StorageTZ='TRUE'><Today/>
            </Value></Leq><Geq><FieldRefName='EndDate'/>
            <ValueType='DateTime'StorageTZ='TRUE'>
            <Today/></Value></Geq></And></Or></Where>";

            <Where><DateRangesOverlap>
            <FieldRef Name=\"EventDate\" />
            <FieldRef Name=\"EndDate\" />
            <FieldRef Name=\"RecurrenceID\" />
            <Value Type='DateTime'><Year/></Value>
            </DateRangesOverlap></Where>";

            <Where><DateRangesOverlap>
            <FieldRef Name=\"EventDate\" />
            <FieldRef Name=\"EndDate\" />
            <FieldRef Name=\"RecurrenceID\" />
            <Value Type=\"DateTime\"><Month />
            </Value></DateRangesOverlap></Where>";

            <Where><DateRangesOverlap>
            <FieldRef Name=\"EventDate\" />
            <FieldRef Name=\"EndDate\" />
            <FieldRef Name=\"RecurrenceID\" />
            <Value Type=\"DateTime\"><Month/>
            </Value></DateRangesOverlap>
            </Where><OrderBy><FieldRef Name='ID' /></OrderBy>"; 
```

AND 查询选项：

```
 <ExpandRecurrence>TRUE</ExpandRecurrence> 
        <CalendarDate>2012-05-01T00:00:00Z</CalendarDate>
       <ViewAttributes Scope=\"RecursiveAll\" />";

        <IncludeMandatoryColumns>FALSE</IncludeMandatoryColumns>
        <DateInUtc>TRUE</DateInUtc><ViewAttributes Scope=\"Recursive \"/>
        <RecurrencePatternXMLVersion>v3</RecurrencePatternXMLVersion>   
        <ExpandRecurrence>True</ExpandRecurrence>
        <CalendarDate>2011-10-16T00:00:00Z</CalendarDate>
        <RecurrenceOrderBy>TRUE</RecurrenceOrderBy>
        <ViewAttributes Scope=\"RecursiveAll\"/>";

        <ExpandRecurrence>TRUE</ExpandRecurrence>"; 
```

但是他们都没有工作并且失败了`javax.xml.ws.soap.SOAPFaultException`。

任何人都可以帮我获取这些重复数据吗？还有其他方法吗？有可能使用Java获得它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:10:32.917

以下文章于上周发布，包含详细信息：

[https://www.nothingbutsharepoint.com/sites/eusp/Pages/Use-SPServices-to-Get-Recurring-Events-as-Distinct-Items.aspx](https://www.nothingbutsharepoint.com/sites/eusp/Pages/Use-SPServices-to-Get-Recurring-Events-as-Distinct-Items.aspx)

# ruby - Ruby + Windows + Timeouts + SerialPorts 不起作用

> ID：10434188
> 
> 赞同：2
> 
> 时间：2012-05-03T15:08:44.720
> 
> 标签：ruby, windows, timeout, serial-port

我正在开发一个应该通过 USB 连接到串行设备的多平台 Ruby 程序。首先我使用的是serialport gem（1.0.4），但后来我遇到了一些奇怪的问题，不得不放弃它。然后我继续通过 Ruby 的 IO 类进行通信，如下所示：

```
@port = IO.new IO.sysopen(path, mode), mode 
```

通过 syswrite 和 sysread 进行通信在 Linux 和 Windows 中都是完美的。

通信完成后，我尝试设置超时，以便在发生任何不同步时程序不会挂起。全部在 Linux 端使用 timeout.rb 完成，但在调用任何 IO 读取方法（sysread、getc、gets、getbyte ......我都试过了！）之后，Windows 不会让我再次控制解释器。

我尝试了终结者，但它甚至无法运行，抛出参数异常而不是超时——即使在 Linux 中！：

```
require 'terminator'
  Terminator.terminate 2 do
  sleep 4
end 
```

产生：

```
/var/lib/gems/1.9.1/gems/terminator-0.4.4/lib/terminator.rb:164: Use RbConfig instead of obsolete and deprecated Config.
ArgumentError: wrong number of arguments (1 for 0)
from /var/lib/gems/1.9.1/gems/terminator-0.4.4/lib/terminator.rb:127:in `block in terminate'
from (irb):12:in `call'
from (irb):12:in `sleep'
from (irb):12:in `block in irb_binding'
from /var/lib/gems/1.9.1/gems/terminator-0.4.4/lib/terminator.rb:134:in `call'
from /var/lib/gems/1.9.1/gems/terminator-0.4.4/lib/terminator.rb:134:in `terminate'
from (irb):11
from /usr/bin/irb:12:in `<main>' 
```

由于 SystemTimer 依赖于 UNIX 信号并且在 Windows 上不起作用（它只是包装 timeout.rb），我被一个多平台程序卡住了，它在 Windows 上运行时会永远挂起，尽管在 Linux 上很好。

有什么方法可以在 Windows 上设置串行端口读取超时？也许是一个 win32api 调用？

感谢您的时间。:)

**编辑：**

我相信我找到了解决这个问题的方法，虽然它真的很臭。

代替

```
Timeout::timeout 0.5 do
  gets
end 
```

我试过了

```
begin
  Timeout::timeout 0.5 do
    Thread.new do
      gets
    end.join
  end
rescue
  "Expired :)"
end 
```

在 IRB 上似乎很好。

我将实施并测试它，然后我会在这里发布结果。:)

但是，任何更漂亮的解决方案都非常受欢迎！

# android-activity - 无法将变量传递给第三个活动

> ID：10434189
> 
> 赞同：0
> 
> 时间：2012-05-03T15:08:45.730
> 
> 标签：android-activity

我有三个活动：
-login
-choice
-entry
我必须将 var“Name”从登录传递到选择（这很好用），然后，从选择到进入，这就是我遇到问题的地方：/ 我可以通过名称可供选择，但是当我尝试将其传递给条目时，我不能！这是从登录传递到选择的代码

```
 Intent intent;
            String pkg=getPackageName();                    
            intent=new Intent(getApplicationContext(), scelta.class);
            //inseriamo i dati nell'intent
            String parts[] = risp.split("/");
            intent.putExtra(pkg+".myNome", parts[0]); 
            intent.putExtra(pkg+".myId", parts[1]);
            startActivity(intent); 
```

这是选择（可能是错误）：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.scelta);        
     // l'intent di questa activity
    Intent intent=getIntent();
    String pkg=getPackageName(); 
    //prendiamo i dati   
    String nome=intent.getStringExtra(pkg+".myNome"); 
    String Id=intent.getStringExtra(pkg+".myId"); 
    intent.putExtra(pkg+".myNome", nome); 
    intent.putExtra(pkg+".myId", Id);  
    TextView tvNome =  (TextView) findViewById(R.id.txtNome); 
    tvNome.setText(nome);
}

//pulsante per il checkin
public void checkin (View v){
     // l'intent di questa activity
    Intent intent=getIntent();
    String pkg=getPackageName(); 
    //prendiamo i dati   
    String nome=intent.getStringExtra(pkg+".myNome"); 
    String Id=intent.getStringExtra(pkg+".myId"); 
    //li reinseriamo nell'intent
    intent.putExtra(pkg+".myNome", nome); 
    intent.putExtra(pkg+".myId", Id);
    intent=new Intent(getApplicationContext(), entrata.class);
    startActivity(intent);
} 
```

签入是我在点击按钮以从选择传递到条目时使用的方法。这就是我在条目中取名的地方：

```
Intent intent=getIntent(); // l'intent di questa activity
String pkg=getPackageName();   
String nome=intent.getStringExtra(pkg+".myNome");  //prendiamo i dati

TextView tvNome =  (TextView) findViewById(R.id.nome); 
tvNome.setText(nome); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:10:12.037

在您的`checkin()`方法中，您添加额外内容，然后创建一个新的 Intent 替换本地“意图”变量，从而再次有效地清除额外内容。像这样重新排序方法的最后 4 行`checkin()`：

```
intent=new Intent(getApplicationContext(), entrata.class);
intent.putExtra(pkg+".myNome", nome); 
intent.putExtra(pkg+".myId", Id);
startActivity(intent); 
```

# c# - 在 C# 中连续 3 个 '/' 有什么作用？

> ID：10434191
> 
> 赞同：20
> 
> 时间：2012-05-03T15:08:53.097
> 
> 标签：c#, comments

当我突然在评论中输入一个 3'd '/' 时，我正在 lala 土地上编码。最初的评论变为**绿色**，带有 2 '/'s **：**

![主题1](../Images/af3b5cd50946f34d026084fa6f94c7cd.png)

但随着第三个破折号，它变成**灰色**'///' **：**

![主题2](../Images/58a9733057da045aa8b6e7e7856647a9.png)

这有什么具体含义吗？还是只是改变了颜色？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-03T15:09:48.760

它表示一个 XmlComment，可以在[MSDN](http://msdn.microsoft.com/en-us/magazine/cc302121.aspx)上阅读更多内容。例如，

```
/// <summary>
/// Method summary  - a method that does something
/// </summary>
/// <param name="i">Description of param</param>
/// <param name="s">Description of param</param>
/// <returns>An object of some sort or other</returns>
public object AMethod(int i, string s)
{
} 
```

编辑：如下图所示，它还提供[IntelliSense](http://en.wikipedia.org/wiki/IntelliSense)指导，如下图所示。

![在此处输入图像描述](../Images/182435e9686c2efa8cf69100bc2c1e0f.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T15:10:03.213

三斜杠注释用于文档生成器。您可以直接从源代码生成 API 文档。你可以在你的源代码中记录你的 API 做了什么，它需要什么参数，它抛出什么异常等等。Microsoft 提供工具来验证您的文档是否与实际 API 同步。例如，如果您添加、删除或重命名参数，但忘记记录更改，您将收到警告。

这是您使用 Visual Studio 从这些标签生成文档的方式：[link](http://msdn.microsoft.com/en-us/library/x4sa0ak0.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:16:37.383

`///`用于 XML 注释。它提供了 XML 格式的注释。您还可以`/doc:`在编译时使用选项从中创建 XML 文档，例如

```
csc /doc:filedoc.xml program.cs 
```

# cocoa-touch - 从在线数据源更新 UILabel

> ID：10434194
> 
> 赞同：2
> 
> 时间：2012-05-03T15:09:02.143
> 
> 标签：cocoa-touch, uilabel

有哪些方法可以`UILabel`使用外部资源（例如在线数据库或网站）进行更新，任何人都可以提供任何链接或教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:10:09.510

在线数据库通常需要[Web](https://stackoverflow.com/questions/982622/consume-wcf-web-service-using-objective-c-on-iphone)服务调用。要从网站更新值，您需要进行标准[HTTP](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)调用。

用于调用 Restful API 的[Restkit 。](http://restkit.org/)

# xslt - 选择没有特定子节点的节点

> ID：10434196
> 
> 赞同：1
> 
> 时间：2012-05-03T15:09:12.427
> 
> 标签：xslt, xpath, lxml

例如，我有一个这样的 XML 示例

```
<a>
    <a1>A1</a1>
        <a11>A11</a11>
    <a2>A2</a2>
    Text <strong>text</strong> text...
<a> 
```

如何使用 XPath 选择`a`仅包含的节点

```
<a>
    <a2>A2</a2>
    Text <strong>text</strong> text...
<a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:28:32.867

不确定这对您来说是否足够灵活，但它应该可以帮助您入门

```
/a/a1 | a/text() | /a/*[not(starts-with(name(), 'a'))] 
```

您可以在这里轻松地使用它：[http ://www.xpathtester.com/test](http://www.xpathtester.com/test)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:57:54.970

XPath 是一种用于 XML 文档的查询语言。这意味着 XPath 表达式只能选择一组节点和/或提取数据。

**请记住**：XPath 表达式永远不会导致 XML 文档结构的修改（例如删除节点）。

**答案是**没有 XPath 表达式会选择您想要的节点，因为 XML 文档中没有这样的节点。

使用 XSLT 和（不那么容易）使用 XQuery 可以轻松实现您想要的：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[starts-with(name(), 'a1')]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<a>
    <a1>A1</a1>
    <a11>A11</a11>
    <a2>A2</a2>     Text 
    <strong>text</strong> text... 
</a> 
```

**产生了想要的正确结果：**

```
<a>
   <a2>A2</a2>     Text 
    <strong>text</strong> text... 
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:23:12.560

这个xpath：

```
//a[normalize-space(.)='A2 Text text text...'] 
```

只会选择：

```
<a>
    <a2>A2</a2>
    Text <strong>text</strong> text...
</a> 
```

* * *

XSLT 示例...

**XML 输入**

```
<doc>
  <a>
    <a1>A1</a1>
    <a11>A11</a11>
    <a2>A2</a2>
    Text <strong>text</strong> text...
  </a>
  <a>
    <a2>A2</a2>
    Text <strong>text</strong> text...
  </a>  
</doc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/">
    <xsl:copy-of select="//a[normalize-space(.)='A2 Text text text...']"/>
  </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
 <a>
   <a2>A2</a2>
    Text <strong>text</strong> text...
  </a> 
```

# asp.net-mvc-3 - 将 MVVM 与 Knockout.js 一起使用时在服务器端定义模型

> ID：10434203
> 
> 赞同：2
> 
> 时间：2012-05-03T15:09:43.047
> 
> 标签：asp.net-mvc-3, mvvm, knockout.js, singlepage

我计划在客户端为单页应用程序使用 knockout.js 和 MVVM 模式。所以模型，视图模型将在客户端定义。我对我们必须如何在服务器端进行结构感到困惑。

1.  现在，控制器会返回域模型本身吗？从域模型到 ViewModel 的所有映射是否只发生在客户端？

2.  在我的解决方案中，域模型和视图模型之间存在很大差距。所以上述方法会导致大量数据不必要地返回到客户端。虽然看起来有点矫枉过正，但我​​正在考虑在服务器端重复 ViewModel 和 InputViewModel 定义（前者代表呈现的数据，后者代表要回发到控制器操作的数据），并且还有一个映射层（基于 automapper）来映射域模型到服务器端的 ViewModels。这有意义吗？还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:56:15.370

我建议您计算出您的视图模型实际需要哪些数据，然后让控制器构建一个包含该数据的服务器端视图模型，并将其以 JSON 格式发送到客户端。

这样您就不会将不必要的数据发送到客户端（或返回），您仍然可以在服务器上完成大部分繁重的工作，并且淘汰视图模型可以完成它们的用途：呈现要使用的数据由视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:23:08.647

您在第 2 点中描述的实际上是我使用最多的解决方案，这对我来说很有意义：我在服务器端使用 Automapper 在特定于 View 且仅包含数据的域模型和 ViewModels（.Net 对象）之间进行映射查看需求。负责第一次加载 View 的 Controller Action 会将 View 数据绑定到 ViewModel 上，从而使页面快速初始化，无需进行 Ajax 调用。在视图本身中，我创建了淘汰视图模型，通过 Json 编码有界视图模型（例如，使用 Asp.Net MVC 我会做类似的事情）分配任何初始值（如果需要）

```
var boundedViewModel = @Html.Raw(Json.Encode(Model)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:51:20.410

这正是我处理这个问题的方式。如果这是一个直接的 MVC 应用程序，您仍然会创建视图模型。

有时对于复杂的数据集，我可以看到使用 Knockback 之类的用例，它采用了主干.js 的丰富数据模型并将其与 knockout.js 相结合 [http://kmalakoff.github.com/knockback/](http://kmalakoff.github.com/knockback/)

# c# - 当文件夹中没有 Default.aspx 时，不允许查看文件夹的文件

> ID：10434207
> 
> 赞同：1
> 
> 时间：2012-05-03T15:09:56.917
> 
> 标签：c#, file, hide

让“Project/”成为项目的主文件夹。例如，如果我有文件夹“Project/a”，但它不包含 Default.aspx 文件，我该如何隐藏其中的文件？

例如，当我有一个上述文件夹时，ASP.NET 会生成一个包含所有文件的列表。

C# ASP.NET Visual Web Developer 2008 速成版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:14:49.813

我认为您正在该文件夹的文件中寻找此选项`web.config`：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <directoryBrowse enabled="false" />
    </system.webServer>
</configuration> 
```

通过 IIS 7 管理器，这是在“目录浏览”选项下。

# javascript - 如何让 Firefox 在 JQuery UI 对话框中自动填写保存的密码？

> ID：10434210
> 
> 赞同：0
> 
> 时间：2012-05-03T15:09:59.613
> 
> 标签：javascript, jquery-ui, firefox

这是一个 JQuery UI 对话框，其中包含一个非常基本的登录表单：

```
var dlg = $('\
  <div>\
    <form action=/dummy>\
      <p><input name=username type=text></p>\
      <p><input name=password type=password></p>\
      <p><input type=submit value="Log in"></p>\
    </form>\
  </div>\
');

dlg.dialog({
    closeText: 'cancel',
    hide: 'fade',
    modal: true,
    close: function()
    {
        dlg.remove();
    }
}); 
```

( [jsFiddle](http://jsfiddle.net/nfhp9/) )

当我按下按钮时，Firefox 会提供保存详细信息，但以后不会以任何方式使用保存的详细信息。如何说服 Firefox 填写它们？

我尝试使用[这个问题](https://stackoverflow.com/questions/2382329/how-can-i-get-browser-to-prompt-to-save-password)中提到的技术，但它们似乎没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:15:56.547

我更新了你的 jsFiddle：http: [//jsfiddle.net/nfhp9/5/](http://jsfiddle.net/nfhp9/5/)

这基本上是因为表单在页面加载时不存在，并且 Firefox 在页面加载时输入信息。

# heroku - 捆绑安装工作 - 但 git push heroku master 给出错误

> ID：10434211
> 
> 赞同：1
> 
> 时间：2012-05-03T15:09:59.843
> 
> 标签：heroku, bundler

捆绑安装工作。但是当我 git push heroku master 时，我得到了这个：

```
C:\Sites\first_app>git push heroku master
Warning: Permanently added the RSA host key for IP address '50.19.85.132' t
list of known hosts.
Counting objects: 65, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (51/51), done.
Writing objects: 100% (65/65), 26.10 KiB, done.
Total 65 (delta 3), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.1.2
   Running: bundle install --without development:test --path vendor/bun
-binstubs bin/
   Fetching gem metadata from https://rubygems.org/.........
   Bundler could not find compatible versions for gem "railties":
   In Gemfile:
   rails (= 3.2.1) ruby depends on
   railties (= 3.2.1) ruby
   jquery-rails (= 2.0.0) ruby depends on
   railties (3.2.3)

Failed to install gems via Bundler.
Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:evening-frost-9408.git
[remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:evening-frost-9408.git' 
```

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
  gem 'sqlite3', '1.3.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

我基本上遵循 Ruby on Rails 教程。但是我的rails是3.2.1，但是网上书上说的是rails 3.2.3。我尝试将其更改为 3.2.3 和 ~>3.2.3，我仍然收到相同的错误消息

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T16:31:14.910

我遇到了同样的问题，尝试在 heroku 上部署时无法运行“捆绑安装”和同样的问题（我正在遵循相同的教程）。

[在这里](https://github.com/rails/rails/issues/4766)找到了一个很好的答案：rubygems.org 不提供 HTTPS，因此将 gemfile 的标头从 更改`https://rubygems.org`为`http://rubygems.org`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:25:09.573

我有一个类似的问题，并想我会添加我的解决方案。

最初我的主要项目被分离成包含在主要项目中的宝石。随着 gems 和项目之间的耦合增加，将 gems 的代码直接引入主 rails 项目的 /lib 是有意义的。在合并期间，.gitignore 文件被合并，没有任何冲突。不幸的是，gem 的 .gitignore 与独立项目的 .gitignore 非常不同。当我继续进行时，当我在本地更新一个 gem 时，它会在远程推送部署到 Heroku 时失败。事实证明，gem 中的 .gitignore 有类似`Gemfile.lock`的东西`*.gem`。

TLDR；确保你的 .gitignore 文件是健全的

# objective-c - 带有电子邮件/电话数据检测器的 iOS UITextView - 交换单击/长按功能

> ID：10434212
> 
> 赞同：2
> 
> 时间：2012-05-03T15:10:02.627
> 
> 标签：objective-c, ios, hyperlink, uitextview, gesture

默认情况下，当 UITextView 设置为检测电子邮件地址和电话号码时，它提供以下内置功能：

单击：电子邮件 - 在邮件应用程序中打开新消息；电话 - 取消或呼叫的警报对话框

长按：电子邮件 - 操作表菜单选项；电话 - 操作表菜单选项

我想做的是交换这些功能，以便单击提供操作表菜单选项，而不是长按。这可能吗？我该怎么办？

# android - Android 浏览器不使用 Cell-ID 通过 HTML5 API 进行地理定位（仅限 GPS）

> ID：10434214
> 
> 赞同：1
> 
> 时间：2012-05-03T15:10:07.207
> 
> 标签：android, html, geolocation, gps, cellid

我正在使用 HTML5 Geolocation API 做一个 Wep 应用程序。我正在使用这里给出的典型 W3C 代码[http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)和 getCurrentPosition 方法。

在 Android 浏览器上，它仅在启用 GPS 并获取位置时才有效。如果没有（例如在室内），API 将返回超时错误。在 web 视图中同上（具有正确的权限）。这意味着它不使用其他地理定位来源。

相反，在 Windows Mobile 或 Android 设备上使用 Opera 时，如果 GPS 无法到达其返回 Cell-ID 源位置（基于中继天线的源）的位置。

如何使它与 Android 浏览器一起使用？

谢谢你的帮助。

我正在使用的安卓版本：2.2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:53:08.350

实际上它来自权限。即使它在应用程序清单中指定，您也必须允许在移动设备上使用 Cell-ID 进行定位：转到移动参数/位置和安全性，然后选中“使用无线网络”（它包括 ID Cell）。不幸的是，这样做意味着您允许 Google 收集您的位置数据。

奇怪的是，它仍然可以在 Opera 浏览器上运行。

# actionscript-3 - 基于 MXML 和 AS3 的 OSMF Widget

> ID：10434216
> 
> 赞同：1
> 
> 时间：2012-05-03T15:10:11.117
> 
> 标签：actionscript-3, widget, mxml, sprite, osmf

几天来，我一直在寻找如何制作 OSMF Widget 的示例，该示例使用 MXML（至少是布局代码）和 AS3 中的一些代码编写一些代码。

这是我第一次使用这项技术。

我已经在 AS3 中为 OSMF 编写了一些小部件，但现在我有一个设计（用 MXML 编写），我需要在 OSMF ChromeApplication 中绘制它。

我一直在阅读一些 OSMF 源代码，似乎 ChromeApplication 扩展了 Sprite，所以我的问题可以简化为在 Sprite 中绘制 MXML。

所以我的问题是：

1.  是否可以使用 AS3 代码创建 MXML 元素并将其添加到 Sprite？
    1.  如果可能，我该怎么做？
    2.  如果没有，在 OSMF 中拥有一些 MXML 类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:57:28.877

如上述注释中所述，使用 UIComponent 和 s:VideoPlayer 进行 OSMF 集成。

# c - libevent 和信号处理（特别是 SIGCHLD）

> ID：10434218
> 
> 赞同：2
> 
> 时间：2012-05-03T15:10:14.860
> 
> 标签：c, libevent

[这在某种程度上是我在此处](https://stackoverflow.com/questions/8398298/handling-sigchld)找到的相关问题的后续行动 。

在链接的问题中，提到了`signalfd()`将 fd 与[libevent](http://libevent.org/)一起使用和使用。在那个问题中，OP 没有列出他使用`signalfd()`libevent 信号处理设施的原因。

在这两种方法中，您都将在信号处理程序之外处理回调。

[该文档](http://www.wangafu.net/~nickm/libevent-book/Ref4_event.html#_constructing_signal_events)似乎警告在信号事件回调中调度计时器。这似乎不对（因为我们将在信号处理程序上下文之外）。除了上述警告之外，我看不出使用`signalfd()`.

有关两种方法之间差异或警告的任何输入

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:12:50.170

来自 libevent 的源代码（v2.0.19-stable）

> /* 信号.c
> 
> 这是我们用于没有更好方法进行信号处理的后端的信号处理实现。它使用 sigaction() 或 signal() 来设置信号处理程序，并使用套接字对来告诉事件库何时
> 
> 请注意，我说的是“事件库”：一次只能设置一个事件库来使用它。由于历史原因和向后兼容性，如果您将信号的事件添加到 event_base A，然后将信号的事件（任何信号！）添加到 event_base B，event_base B 将收到有关信号的通知，但 event_base A 不会.
> 
> 在未来版本的 Libevent 中改变这种行为会很巧妙。kqueue 已经做了一些更明智的事情。 **我们可以使用 signalfd 使 Linux 上的所有后端都做合理的事情。** */

所以现在 libevent 使用 sigaction()（如果可用），如果没有，则使用 signal()。

如果您使用 signalfd() 您通常使用 sigprocmask 阻止信号，以便信号不会导致默认处理程序执行。然后，您可以使用 libevent 监视返回的文件句柄并安全地处理来自正常同步代码的信号，而不必担心内存安全或阻塞或中断其他系统调用。

在经典的异步信号处理程序（即使用 sigaction 注册的处理程序）中，您可以安全地做什么是有限制的。请参阅 man 信号中的“异步信号安全功能”。使用 signalfd 方法，这些限制大大减少。

关于注册计时器回调的警告很可能是一个问题，因为 libevent 支持这么多平台，并且至少有一个人报告了问题。请注意，如果您正在选择/轮询由 signalfd 注册的文件句柄，那么您无论如何都不必担心这个限制。

编辑：我重新阅读了您的问题，并意识到我并没有真正正确地回答它。注册一个 signalfd 然后在 libevent 中使用它的好处是它更快，但牺牲了可移植性。有计划（http://archives.seul.org/libevent/users/Mar-2010/msg00046.html）将signalfd包含到libevent中，但AFAIK还没有发生。

此外，一旦您收到 SIGCHLD 通知，您应该始终在循环中调用 waitpid，直到您获得 ENOCHLD，因为这两种方法都会折叠多次出现的信号。

# .net - System.Data.SQLite.dll - 哪个版本以及如何编译？

> ID：10434219
> 
> 赞同：2
> 
> 时间：2012-05-03T15:10:15.223
> 
> 标签：.net, sqlite, compilation, system.data.sqlite

我正在使用 x64 windows 编写一个 windows 应用程序。在开发机器上，我可以导出安装程序，安装应用程序，它工作得很好，无论我是为任何 CPU、x86 还是 x64 编译，似乎也不管我使用的是什么版本的 System.Data.SQLite.dll -混合模式，x64，x86，非混合模式...

将安装程序转移到另一台机器（也是 x64 Win7）时，无论应用程序如何编译，也无论我使用什么 System.Data.SQLite.dll。

根据我使用的组合，我会收到从 BadImageFormatException 到 UnsafeNativeMethods 的错误。

我应该使用 System.Data.SQLite.dll 和 CPU 编译的哪种组合？x64 / x64 似乎是合乎逻辑的选择，但肯定强制 x86 编译并使用 x86 dll 也应该有效吗？

还是我完全叫错了树？

谢谢

**编辑：**至少现在该应用程序在 x64 w7 上编译非常*重要。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:13:53.083

我遇到过同样的问题。我必须确保我使用的是 32 位版本并将其编译为 x86 应用程序（即使对于 Windows 7 x64 系统也是如此）。

如果有帮助，`system.data.sqlite.dll`文件大小为 866 KB（如果我没记错的话，使用版本 1.0.64）。

# unit-testing - 在 GIN 的帮助下模拟 GWT 应用程序展示

> ID：10434227
> 
> 赞同：2
> 
> 时间：2012-05-03T15:10:48.593
> 
> 标签：unit-testing, gwt, mocking, mvp, gwt-gin

我需要一个用最佳实践编写的结构良好的全栈 GWT 应用程序示例：使用 MVP 模式、GIN 模块（至少 2 个：生产模块和用于测试的模拟模块）、JRE 轻量级测试（扩展 TestCase 类）。这个请求的主要目标是找出如何在 GIN 的帮助下有效地测试 GWT 应用程序。

这个陈列柜不需要很大。对一位演示者进行几次简单的测试就足够了。我已经看过 Google 提供的“联系人”示例 - 但它不使用 GIN 库。

非常感谢任何提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:21:23.573

使用 GWT 构建的 apache Hupa 项目[http://james.apache.org/hupa/](http://james.apache.org/hupa/)使用 Gin/Guice、模拟和 MVP 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:03:28.977

试试这个链接： [http](http://www.aceevo.com/) : //www.aceevo.com/ 它确实使用 GIN，但对我来说它涵盖了很多需要考虑的事情。

我仍在研究整个 MVP 的东西，试图把所有东西放在一起。但是，在此示例可运行之前，需要进行一些调整。如果你有人认为这是值得的，我会发布这些调整。

# java - 将 SOAP Web 服务请求重定向/转发到另一个 Web 服务

> ID：10434230
> 
> 赞同：9
> 
> 时间：2012-05-03T15:10:59.203
> 
> 标签：java, web-services, soap, spring-ws

我有一个用例，如果 SOAP 请求没有针对 NewWebService 的 XSD 和 WSDL 进行验证，则需要将所有对 NewWebService 的调用都路由到 OldWebService。NewWebService 位于 ServerA 上，OldWebService 位于 ServerB 上。

抽象地说，我知道我需要一些机制来允许我接受一个命中 NewWebService 的 SOAP 请求，将其发送到 OldWebService，然后将 SOAP 结果返回给客户端。我对 spring-ws 的有限经验使我很难决定如何实现这一点。

我的第一个想法是在 NewWebService 中构建一个 SOAP 客户端，该客户端在无法验证有效负载时调用 OldWebService。这是最好的解决方案，还是有更好的方法让 NewWebService 充当某些请求的传递？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T15:02:11.830

我的解决方案是编写一个实现 javax.servlet.Filter 的自定义 SoapRequestFilter 和一个扩展 HttpServletRequestWrapper 的新类。由于 HttpServletRequestWrapper 实现了 HttpServletRequest 接口，因此扩展包装器允许您复制 HttpRequest 并对流进行操作，而不会消耗对象并导致下游问题。

一旦有了过滤器和包装器，我就能够从 HttpRequest 解析端点和有效负载。如果需要重定向请求，我为旧的 SOAP WebService 创建了一个新的 HttpUrlConnection，并将该响应的 InputStream 设置为 HttpResponse 的 OutputStream。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T09:15:08.917

我认为 Apache Camel 可以有效地帮助您。

您可以看一下它的代理示例，它很简单，很容易满足您的要求。

[http://camel.apache.org/cxf-proxy-example.html](http://camel.apache.org/cxf-proxy-example.html)

# c - 移位 2 个 32 位寄存器

> ID：10434237
> 
> 赞同：1
> 
> 时间：2012-05-03T15:11:20.857
> 
> 标签：c, assembly, x86

```
void rotate( unsigned long mask[], int rotateCnt ); 
```

此函数按位旋转当前的 64 位掩码 (mask[]) `rotateCnt`。如果`rotateCnt`为正，则向左旋转；如果`rotateCnt`是负数，向右旋转。`rotateCnt`仅应使用的低 6 位`rotateCnt`。

但我必须在模拟 1 个 64 位寄存器的 2 个 32 位寄存器中进行轮换，在两个 32 位寄存器之间逻辑执行 64 位操作。他们告诉我做 2 个循环，但我想不通？任何小时

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:20:27.020

当您使用 x86 时，请查看[shld 和 shrd](http://web.itu.edu.tr/kesgin/mul06/intel/instr/shld_shrd.html)。你不需要循环（为什么他们要求循环超出了我的范围）。

**更新**

这是一个 DevStudio 2005 风格的函数，它使用内联汇编器来做你想做的事。不要在没有完全理解它是如何工作的情况下将其作为解决方案提出（尤其是负数如何进行右旋转），因为您的老师很容易发现您在不知道它是如何工作的情况下复制了它（即老师：“这是如何工作的？”，你：“Errr ...” => FAIL）。

```
void Rotate
(
  unsigned *value, // pointer to two 32bit integers
  int count        // number of bits to rotate: >= 0 left, < 0 = right
)
{
  __asm
  {
    mov esi,value
    mov eax,[esi]
    mov edx,[esi+4]
    mov ecx,count
    mov ebx,eax
    shld eax,edx,cl
    shld edx,ebx,cl
    test cl,32
    jz noswap
    xchg edx,eax
noswap:
    mov [esi],eax
    mov [esi+4],edx
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:32:20.557

单个位循环只是一个位移位，其中一个字的进位被应用于下一个字，特殊情况是高位字的进位被应用于低位字。

它可以帮助您考虑在某些情况下需要发生什么。我将在下面使用 4 位字，并假设旋转在左侧；相同的概念适用于您可能使用的任何字长：

```
// Note '-' in the carry column means "don't care"
//
// starting value (in binary):

              'high'             'low'
     carry     word     carry     word

        -     1 0 0 0     -     1 0 0 1

//  after shift left of each word:

        1     0 0 0 0      1    0 0 1 0

//  apply the carry out of the low word
//      to the high word:

        1     0 0 0 1      -    0 0 1 0    

//  apply the carry out of the high word
//      to the low word

        -     0 0 0 1      -    0 0 1 1 
```

要使用这个基本操作来旋转多个位置，只需循环适当的次数。

请注意，这可以通过应用正确的位掩码和移位集来完成，而无需任何循环。基本上，您无需循环即可一次获得将执行单词的所有位。循环版本可能更容易实现 - 如果您决定将其改进为非循环版本，您可能会考虑先执行此操作并将其用作验证测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:22:42.603

可能有更快的说明，但这里的想法......如果你向左旋转：

1.  `rotateCnt`从高位寄存器中取出最高有效位，将它们右移`32-rotateCnt`，并将结果存储在某处

2.  将高位寄存器左移`rotateCnt`一位

3.  `rotateCnt`从低位寄存器中取出最高有效位，将它们左移`32-rotateCnt`，并将结果添加到高位寄存器

4.  将低位寄存器中的剩余位向左移动`rotateCnt`位并添加您在步骤 1 中保存的位

我相信您可以看到如何将此过程扩展到任意数量的寄存器。如果`rotateCnt`可以大于 32 位，您将不得不更加努力，尤其是在一般情况下（n 个寄存器而不是 2 个）。可能有帮助的一件事是注意左移 n 位与右移 (size-n) 位相同。

从您的评论中，我看到您应该使用循环。对于 rotateCnt 迭代，您始终可以一次应用上述旋转过程 1 位。在这种情况下，您显然`rotateCnt`会将上面的描述更改为`1`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:00:21.357

例如，考虑如何在 C 中执行此操作，然后将其转换为 asm。

例如，使用 32 位变量进行一次左移，假设 ra 是高 32 位，rb 是低位

```
if(rb&0x80000000) { ra<<=1; ra|=1; rb<<=1 }
else              { ra<<=1; rb<<=1; } 
```

对于旋转，您可能会按照这些方式做一些事情

```
if(rb&0x80000000)
{
  if(ra&0x80000000) { ra<<=1; ra|=1; rb<<=1: rb|=1; }
  else              { ra<<=1; ra|=1; rb<<=1; }
}
else
{
  if(ra&0x80000000) { ra<<=1; rb<<=1: rb|=1; }
  else              { ra<<=1; rb<<=1; }
} 
```

然后，您可以围绕其中一个循环并执行 N 次。

或者说左移 8 位

```
ra=(ra<<8)|(rb>>(32-8));
rb<<=8; 
```

或者说左移 N 位

```
ra=(ra<<=n)|(rb>>(32-n));
rb<<=n; 
```

或者 n 位向左旋转（这与 32-n 位向右旋转相同）（有些处理器只有向右旋转而左侧是虚拟的，反之亦然）。

```
temp=ra>>(32-n);
ra=(ra<<=n)|(rb>>(32-n));
rb=(rb<<<=n)|temp; 
```

然后查看指令集，看看哪些是可用的并且与你正在做的相匹配。

简而言之，要移位位，您需要将位放在一侧并将其放入下一位。如果您将自己对齐在变量或寄存器之类的某个边界上，那么您从一侧获取位并将其转移到另一侧没有区别，它可能需要更多代码，因为指令集或编程语言不直接支持它并不意味着您不能做。就像您可以在没有乘法指令的情况下在 8 位处理器上执行 2048 位乘法一样，只需要比其他处理器更多的代码，但它非常可行。

# combobox - Vaadin ComboBox 只读时不可见

> ID：10434240
> 
> 赞同：0
> 
> 时间：2012-05-03T15:11:31.247
> 
> 标签：combobox, vaadin, readonly, invisible

为什么在执行 setReadOnly(true) 时 Vaadin ComboBox 变得不可见？

**截图**

普通的 ![普通 ComboBox - 可见](../Images/77f3f2848cb89e8c80fff37e69a4e498.png)

无形的![带有 setReadOnly(true) 的 ComboBox - 不可见](../Images/02b1617c9316ef76595ebe32f2cb3b97.png)

**源代码**

```
import java.util.List;   
import com.vaadin.ui.ComboBox;

public class PropertyComboBox extends ComboBox
{
    public PropertyComboBox(List<String> properties)
    {
        super();
        for(String property: properties) {this.addItem(property);}
        this.setImmediate(true);
        this.setMultiSelect(false);

        this.setNewItemsAllowed(false);
        this.setInputPrompt("Property");
        this.setReadOnly(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:28:26.677

当您将它们设置为只读时，所有组件都会“不可见”。我找不到任何理由，也想知道。

我的建议（有点老套）：禁用组件并在 CSS 中更改它们的禁用外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:51:47.017

Nexus 是对的，当设置为只读时组件变得不可见。事实上，设置为只读添加“v-readonly”css 类名，其余的由 CSS 完成。

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:01:01.860

如果您尝试创建一个用户无法在其中写入任何内容的组合框，请查看[NativeSelect](https://vaadin.com/api/com/vaadin/ui/NativeSelect.html)组件。

从 API 文档：

> 这是一个简单的下拉选择，例如，不支持多选、新项目、延迟加载和其他高级功能。有时，没有 ComboBox 的所有花里胡哨的“本机”选择是更好的选择。

如果您不需要这些功能，那么您应该明确考虑使用 NativeSelect。

# android - 如何拦截用户从安卓手机发送的短信？

> ID：10434246
> 
> 赞同：0
> 
> 时间：2012-05-03T15:11:48.133
> 
> 标签：android, sms

我想在发送之前阅读用户在我的应用程序中发送的短信。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:14:12.730

这是不可能的。任何应用程序都可以`SmsManager`用来发送 SMS，并且此类消息不能被截获，除非可能通过自定义固件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:17:48.970

**您无法阻止发送的短信。您只能**在发送后才能了解它。当短信到达已发送框时，您可以通过为短信注册内容观察者来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:21:06.350

如果需要，您可以拦截传入的消息。

这是一个 SMS 拦截器的示例，如果它包含一些自定义定义的数据，它会“取消”SMS：

为了让您的应用程序在消息显示在手机中之前接收消息，您必须在清单中定义一个具有高优先级的接收器。例子：

```
 <receiver android:name=".SMSReceiver"> 
        <intent-filter android:priority="9999"> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver> 
```

然后，创建接收器：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver{

private static final String CRITICAL_MESSAGE = "critical";

@Override
public void onReceive(Context context, Intent intent) {

    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";            
    if (bundle != null){
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);  
            if (msgs[i].getMessageBody().toString().equals(CRITICAL_MESSAGE)){
                str = "Critical msg from " + msgs[i].getOriginatingAddress() + " !";
                Toast.makeText(context, str, Toast.LENGTH_LONG).show();
                abortBroadcast();
            }    
        }
    }
}

} 
```

*如果收到关键*字符串，上述接收器将取消 SMS（中止广播） 。

# linux - 在 Linux shell 脚本中通过 SFTP 的 ls 命令错误

> ID：10434249
> 
> 赞同：1
> 
> 时间：2012-05-03T15:11:55.553
> 
> 标签：linux, shell

我有下一个代码：

```
files=$(lftp -u mgtwrk35,Unix11! sftp://illin634<<EOF
cd some_dir
ls | tail -1
EOF) 
```

为什么上面的代码可以工作，但是如果我添加到 ls 函数 -tr 中，例如：

```
ls -tr | tail -1 
```

它不起作用并给我下一条消息：

```
ls: invalid option -- t
ls: invalid option -- r 
```

提前感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:14:25.257

`ls`in lftp 不是真的。它也被命名为“ls”，但不支持您可以在标准中找到的所有参数`ls`。

*   `find`让您递归地列出文件。
*   `cls --sort=date`让您按修改日期排序。

我不知道如何将两者结合起来。Nicolas Noble 提到了一种[解决](http://www.mail-archive.com/lftp@uniyar.ac.ru/msg01702.html)方法，用于`awk`对`find`.

# actionscript-3 - Actionscript 3通过索引访问孩子的孩子

> ID：10434253
> 
> 赞同：0
> 
> 时间：2012-05-03T15:12:12.233
> 
> 标签：actionscript-3, object, reference, indexing, movieclip

所以我在我的库中提供了一个movieclip，我已将其添加到舞台中，它包含更多组件，我能够使用以下方法获取有关这些组件的信息：

```
try
{
    for (i = 0; i < musicControls.numChildren; i++){
        trace ('\t|\t ' +i+'.\t name:' +  musicControls.getChildAt(i).name + '\t type:' + typeof ( musicControls.getChildAt(i))+ '\t' +  musicControls.getChildAt(i));      
    }
}
catch (error:Error)
{
    trace("Failed:", error.message);
} 
```

上面的脚本返回了下面的信息。我想问现在有没有办法通过索引访问这些孩子。例如，movieclip 中的组件之一是进度条我将如何引用它？我尝试使用 getChildByName 但它不起作用，在寻求帮助时，每个人都说使用它很慢。如果这是一个基本的问题，我很抱歉，我不太擅长 as3。

```
|    0\.  name:plyControl     type:object    [object Button]
|    1\.  name:stopControl    type:object    [object Button]
|    2\.  name:nextControl    type:object    [object Button]
|    3\.  name:prevControl    type:object    [object Button]
|    4\.  name:progressControl    type:object    [object ProgressBar]
|    5\.  name:volControl     type:object    [object Slider]
|    6\.  name:__id11_    type:object    [object MovieClip]
|    7\.  name:__id12_    type:object    [object TLFTextField]
|    8\.  name:instance71     type:object    [object MovieClip]
|    9\.  name:vizControl     type:object    [object ComboBox]
|    10\.     name:__id13_    type:object    [object MovieClip]
|    11\.     name:__id14_    type:object    [object TLFTextField]
|    12\.     name:instance74     type:object    [object MovieClip]
|    13\.     name:__id15_    type:object    [object MovieClip]
|    14\.     name:timeControl    type:object    [object TLFTextField]
|    15\.     name:instance75     type:object    [object MovieClip] 
```

编辑：或者看起来非常擅长语法和拼写....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:58:53.843

以下代码不起作用吗？

```
var progressBar:ProgressBar = musicControls.getChildByName("progressControl") as ProgressBar;
if(progressBar)
    //  doStuff 
```

您说 getChildByName 不起作用您收到什么错误消息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:11:29.623

您正朝着正确的方向前进，并且实际上已经通过您的演示证明了您可以。从库资产在舞台上实例化的任何对象都将始终具有相同的索引结构（毕竟它基本上是原始对象的代理）。因此，如果您知道进度条在哪一层，您的参考将如下所示：

`myPointer = musicControls.getChildAt(4);`

如果您想通过索引获取孩子的孩子，您可以这样做：

`musicControls.getChildAt(4).getChildAt(0);`

您可以在 dot.notation 语法中混合和匹配您的操作，因为（在每一步）代码都是从函数调用解析到它返回的对象中。

`this.getChildByName("musicControls").progressControl.getChildAt(0)`

我希望这能澄清事情。

# asp.net - 是否可以有效地从 ASP.Net 应用程序克隆 SQL 数据库？

> ID：10434255
> 
> 赞同：-1
> 
> 时间：2012-05-03T15:12:21.490
> 
> 标签：asp.net, sql, sql-server-2008, azure-sql-database, database-cloning

有很多数据库克隆工具，例如 SQL Data Compare。

但是，最终用户（使用 ASP.Net 应用程序）希望在内容准备好时自己将暂存 SQL Server 2008 数据库克隆到生产 SQL Azure 数据库。

我确信我可以使用 Entity Framework 比较每个表，并插入/更新/删除每一行。有没有更好的方法？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:15:06.137

为什么不备份数据库并恢复它呢？

您可以毫不费力地从您的 Web 应用程序运行备份和恢复。您可能应该编写代码来处理存储过程中的备份，而不是尝试在应用程序代码中编写逻辑。就像是：

```
CREATE PROCEDURE dbo.InitiateClone
  @DBName     SYSNAME
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @sql NVARCHAR(MAX);

  SET @sql = N'BACKUP DATABASE ' + QUOTENAME(@DBName)
     + ' TO DISK = ''\\Common_network_path\wherever\' + @DBName + '.BAK''
     + WITH INIT;';

  EXEC sp_executesql @sql;

  SET @sql = N'SELECT name, type_desc FROM sys.
END
GO 
```

现在请求备份的应用程序可以使用数据和日志文件名传递给另一台服务器上的过程：

```
CREATE PROCEDURE dbo.FinishClone
  @NewDBName    SYSNAME,
  @OldDBName    SYSNAME,
  @DataFileName VARCHAR(255),
  @LogFileName  VARCHAR(255)
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @sql NVARCHAR(MAX);

  SET @sql = N'RESTORE DATABASE ' + QUOTENAME(@NewDBName)
     + ' FROM DISK = ''\\Common_network_path\wherever\' + @OldDBName + '.BAK''
     + ' WITH MOVE ''' + @DataFileName + ''' TO ''D:\datapath\' 
     + @NewDBName + '_data.mdf'','
     + ' MOVE ''' + @LogFileName + ''' TO ''D:\logpath\'
     + @NewDBName + '_log.ldf'';';

  EXEC sp_executesql @sql;
END
GO 
```

您唯一需要担心的是，如果两个用户试图同时克隆同一个源数据库，那么您可能需要在其中放置某种排队或信号量控制。为简洁起见，我还省略了错误处理（例如，确保新名称不存在）。它还假设您有简单的数据库（一个数据文件和一个日志文件）。但这是一个开始。

**编辑**，因为我们知道目的地是 Azure：

对于 Azure，我认为您的选择是有限的。我认为您不能以这种方式执行还原。您将如何开始在 Azure 上创建新数据库？完成后，您仍然可以考虑使用一些第三方工具进行比较和同步。例如，Red Gate 的工具具有命令行界面，这意味着您当然可以调用它们来响应来自 Web 应用程序的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:17:54.060

您可以使用命名空间中的不同类 [`Microsoft.SqlServer.Management`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.aspx)来管理 SQL Server 的所有方面。

这包括从一台服务器进行备份并恢复到另一台服务器（包括更改日志文件名称和其他任何需要的内容）。

本质上，如果你可以在[SSMS](http://msdn.microsoft.com/en-us/library/hh213248.aspx)中做到这一点，你可以使用这些类来做同样的事情。

我过去曾用它做一些接近你所描述的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T00:16:39.327

备份数据库比读取表和记录要困难得多。还原的顺序至关重要，还原操作的性能方面也很重要，以尽可能避免限制。

您也许可以编写 DACPAC 操作脚本；我不知道该怎么做，但它可能是可能的。DACPAC 是用于备份和恢复数据库的官方 Microsoft 解决方案。这是 DACPAC 概述的链接；您可能会找到一种以编程方式使用它的方法：http: [//msdn.microsoft.com/en-us/library/dd193245.aspx](http://msdn.microsoft.com/en-us/library/dd193245.aspx)

使用第三方工具，Enzo 备份工具将很快提供 API 以编程方式备份​​/恢复数据库。该 API 将允许开发人员在针对 SQL Azure 数据库完成数据库备份和恢复操作后启动/停止/发送警报（对 SQL Server 的有限支持）。该 API 目前可根据私人请求提供；如果您决定尝试一下，请联系 info@bluesyntax.net 以获取有关 API 的信息。

[免责声明：我是备份工具的作者]

# python - Python：串行通信；睡眠功能

> ID：10434256
> 
> 赞同：1
> 
> 时间：2012-05-03T15:12:25.873
> 
> 标签：python, sleep, serial-communication

我一直在尝试将一些数据从 python 发送到 FPGA 进行处理。由于接收方的一些限制，我不得不引入睡眠。

代码如下：

```
for rowNum in range(640):  
    for colNum in range(480):  
        for depth in range(64):  
            x = ser.write(imageArray[depth][colNum][rowNum])  
            sleep(0.001) 
```

我发送的数据大小为 640*480*64，波特率为 115200bps。理想情况下，它应该花费（640*480*64 ms + 640*480*64*10/115200 秒，大约 6 小时）*10 是因为我的一个字节中的位数。

但是，我的转移需要超过 24 小时。知道为什么会这样吗？接收端没有问题。

谢谢！

# android - GeoCoder AsyncTask 不会在后台更新 TextView

> ID：10434257
> 
> 赞同：1
> 
> 时间：2012-05-03T15:12:27.707
> 
> 标签：android, android-asynctask, geocoding, android-maps

设想：

所以到目前为止我所做的是创建了一个 AsyncTask 来处理我的 GeoCoder，它每 3 分钟更新一次（用于测试目的）。然后我设置了一个 TimerTask，它每 4 分钟显示一条带有用户当前地址的 toast 消息。（TimerTasks 不包含在代码中）

那么问题来了：

当我在我的应用程序中时，一切都很好，但是当我的应用程序在后台运行时，Toast 消息停留在我退出应用程序之前应用程序最后设置的任何地址。我确定 AsyncTask 确实在后台运行（已检查 LogCats），而且似乎一切都在后台运行良好，我只是无法在我的 Toast 上显示当前地址。

所有的想法和意见将不胜感激！

这是我的代码：

```
 public class statuspage extends MapActivity {

LocationManager locationManager;
MapView mapView;
Criteria criteria;
Location location;
Geocoder gc;
Address address;

String bestProvider;
String LOCATION_SERVICE = "location";
String addressString = "Searching for Nearest Address";
StringBuilder sb;

private MapController mapController;
private MyLocationOverlay myLocation;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.statuspage);

    // Get Mapping Controllers etc //
    mapView = (MapView) findViewById(R.id.mapView);
    mapController = mapView.getController();
    mapController.setZoom(17);
    mapView.setBuiltInZoomControls(true);

    // Add the MyLocationOverlay //
    myLocation = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocation);
    myLocation.enableCompass();
    myLocation.enableMyLocation();

    // Animates the map to GPS Position //
    myLocation.runOnFirstFix(new Runnable() {
        @Override
        public void run() {
            mapController.animateTo(myLocation.getMyLocation());

        }
    });
}

@Override
protected boolean isRouteDisplayed() {

    // Location Manager Intiation
    locationManager = (LocationManager) statuspage.this
            .getSystemService(LOCATION_SERVICE);
    criteria = new Criteria();

    // More accurate, GPS fix.
    criteria.setAccuracy(Criteria.ACCURACY_FINE); // More accurate, GPS fix.
    bestProvider = locationManager.getBestProvider(criteria, true);

    location = locationManager.getLastKnownLocation(bestProvider);
    updateWithNewLocation(location);

    locationManager.requestLocationUpdates(bestProvider, 60000, 10,
            locationListener); // 1800000 = 30 Min

    return false;
}

class GeoCoder extends AsyncTask<Void, Void, Void> {

    String lat = "Acquiring";
    String lng = "Acquiring";

    @Override
    protected Void doInBackground(Void... params) {
        if (location != null) {

            /**
             * double latitude = myLocation.getMyLocation().getLatitudeE6();
             * double longitude =
             * myLocation.getMyLocation().getLongitudeE6();
             */

            double latitude = location.getLatitude();
            double longitude = location.getLongitude();

            lat = "" + latitude;
            lng = "" + longitude;

            // gc = new Geocoder(statuspage.this, Locale.getDefault());
            Geocoder gc = new Geocoder(getApplicationContext(),
                    Locale.getDefault());
            try {

                List<Address> addresses = gc.getFromLocation(latitude,
                        longitude, 1);

                sb = new StringBuilder();
                if (addresses != null && addresses.size() > 0) {
                    address = addresses.get(0);

                    int noOfMaxAddressLine = address
                            .getMaxAddressLineIndex();
                    if (noOfMaxAddressLine > 0) {
                        for (int i = 0; i < address
                                .getMaxAddressLineIndex(); i++) {
                            sb.append(address.getAddressLine(i)).append(
                                    "\n");
                        }
                        addressString = sb.toString();

                    }
                }
            } catch (Exception e) {

                addressString = "Sorry, we are trying to find information about this location";
            }

        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        TextView scrollview = (TextView) findViewById(R.id.scrollview);

        // Latitude and Longitude TextView
        TextView etlongitude = (TextView) findViewById(R.id.etlongitude);
        TextView etlatitude = (TextView) findViewById(R.id.etlatitude);

        // TextView to display GeoCoder Address
        scrollview.setGravity(Gravity.CENTER);
        scrollview.setText("Your location:" + "\n"
                + "(Accurate to 500 meters)" + "\n" + (addressString));

        Log.d("Address", (addressString));

        // Latitude and Longitude TextView Display Coordinates //
        etlongitude.setText(lng);
        etlatitude.setText(lat);

        // Log.d("GeoCoder", "In-Task");

        return;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:47:29.343

我有同样的问题。如果我留在当前活动上，没问题，但如果我在`doInBackgroud`运行时离开活动，`onPostExecute`将退出 Toast 行。

要解决问题，您必须使用处理程序：
在类中

```
private static final int TOAST  = 0;
private Handler mHandler = null; 
```

在`OnCreate()`

```
// Creation of the handler to display Toasts
if (mHandler == null) {
    mHandler = new Handler() {
        @Override
        public void handleMessage(Message _msg) {
            switch (_msg.what) {
            case TOAST:
            Toast.makeText(ServerTabHost.this, (String)_msg.obj, Toast.LENGTH_LONG).show();
            break;
            default : break;
        }
        super.handleMessage(_msg);
        }
    };
} 
```

在`onPostExecute()`

```
Message msg = new Message();
msg.what = TOAST;
msg.obj = "my toast message";
mHandler.sendMessage(msg); 
```

在您的代码中，它看起来像这样：

```
public class statuspage extends MapActivity {

// These two lines are for the handler
private static final int TOAST  = 0;
private Handler mHandler = null;

LocationManager locationManager;
MapView mapView;
Criteria criteria;
Location location;
Geocoder gc;
Address address;

String bestProvider;
String LOCATION_SERVICE = "location";
String addressString = "Searching for Nearest Address";
StringBuilder sb;

private MapController mapController;
private MyLocationOverlay myLocation;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.statuspage);

    // Get Mapping Controllers etc //
    mapView = (MapView) findViewById(R.id.mapView);
    mapController = mapView.getController();
    mapController.setZoom(17);
    mapView.setBuiltInZoomControls(true);

    // Add the MyLocationOverlay //
    myLocation = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocation);
    myLocation.enableCompass();
    myLocation.enableMyLocation();

    // Animates the map to GPS Position //
    myLocation.runOnFirstFix(new Runnable() {
        @Override
        public void run() {
            mapController.animateTo(myLocation.getMyLocation());

        }
    });

    // Creation of the handler to display Toasts
    if (mHandler == null) {
        mHandler = new Handler() {
        @Override
        public void handleMessage(Message _msg) {
            switch (_msg.what) {
                case TOAST:
                Toast.makeText(ServerTabHost.this, (String)_msg.obj, Toast.LENGTH_LONG).show();
                break;
                default : break;
            }
            super.handleMessage(_msg);
            }
        };
    }
}

@Override
protected boolean isRouteDisplayed() {

    // Location Manager Intiation
    locationManager = (LocationManager) statuspage.this
            .getSystemService(LOCATION_SERVICE);
    criteria = new Criteria();

    // More accurate, GPS fix.
    criteria.setAccuracy(Criteria.ACCURACY_FINE); // More accurate, GPS fix.
    bestProvider = locationManager.getBestProvider(criteria, true);

    location = locationManager.getLastKnownLocation(bestProvider);
    updateWithNewLocation(location);

    locationManager.requestLocationUpdates(bestProvider, 60000, 10,
            locationListener); // 1800000 = 30 Min

    return false;
}

class GeoCoder extends AsyncTask<Void, Void, Void> {

    String lat = "Acquiring";
    String lng = "Acquiring";

    @Override
    protected Void doInBackground(Void... params) {
        if (location != null) {

            /**
             * double latitude = myLocation.getMyLocation().getLatitudeE6();
             * double longitude =
             * myLocation.getMyLocation().getLongitudeE6();
             */

            double latitude = location.getLatitude();
            double longitude = location.getLongitude();

            lat = "" + latitude;
            lng = "" + longitude;

            // gc = new Geocoder(statuspage.this, Locale.getDefault());
            Geocoder gc = new Geocoder(getApplicationContext(),
                    Locale.getDefault());
            try {

                List<Address> addresses = gc.getFromLocation(latitude,
                        longitude, 1);

                sb = new StringBuilder();
                if (addresses != null && addresses.size() > 0) {
                    address = addresses.get(0);

                    int noOfMaxAddressLine = address
                            .getMaxAddressLineIndex();
                    if (noOfMaxAddressLine > 0) {
                        for (int i = 0; i < address
                                .getMaxAddressLineIndex(); i++) {
                            sb.append(address.getAddressLine(i)).append(
                                    "\n");
                        }
                        addressString = sb.toString();

                    }
                }
            } catch (Exception e) {

                addressString = "Sorry, we are trying to find information about this location";
            }

        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        // Sending the Toast message through the handler
        Message msg = new Message();
    msg.what = TOAST;
    msg.obj = "My toast message";
    mHandler.sendMessage(msg);

        TextView scrollview = (TextView) findViewById(R.id.scrollview);

        // Latitude and Longitude TextView
        TextView etlongitude = (TextView) findViewById(R.id.etlongitude);
        TextView etlatitude = (TextView) findViewById(R.id.etlatitude);

        // TextView to display GeoCoder Address
        scrollview.setGravity(Gravity.CENTER);
        scrollview.setText("Your location:" + "\n"
                + "(Accurate to 500 meters)" + "\n" + (addressString));

        Log.d("Address", (addressString));

        // Latitude and Longitude TextView Display Coordinates //
        etlongitude.setText(lng);
        etlatitude.setText(lat);

        // Log.d("GeoCoder", "In-Task");

        return;
    } 
```

就个人而言，我在一个片段中，所以我必须在宿主活动中创建处理程序，然后将它传递给片段构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:48:18.457

当您使用异步任务时，您无法在后台更新 UI。不可能从后台的内部线程连接 UI。连接 UI 的唯一方法是使用 onPostExecute()。并使用这个 onPostExecute() 函数更新 UI。尝试从后台发送消息，并通过检查消息在 postexecute 上执行 UI。这肯定会对您有所帮助。

# python - 如何使python3.2解释器成为debian中的默认解释器

> ID：10434260
> 
> 赞同：18
> 
> 时间：2012-05-03T15:12:33.430
> 
> 标签：python, linux, debian

我在我的 debian 机器上安装了 python2 和 python3。但是当我尝试通过在 bash 中键入“python”来调用 python 解释器时，弹出 python2 而不是 python3。由于我目前正在使用后者，因此只需键入 python 即可更轻松地调用 python3。请指导我完成这个。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-03T15:18:51.830

唯一安全的方法是在你的shell中使用别名，通过放置

```
alias python=python3 
```

进入你的`~/.profile`或`~/.bashrc`...

这样，依赖于 python 为 python2 的系统脚本将不会受到影响。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-06T07:28:09.947

好吧，您可以`virtualenv`使用以下命令简单地使用 python3.x 创建一个：

`virtualenv -p <path-to-python3.x> <virtualenvname>`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-21T00:21:51.820

顺便说一句，如果您使用 bash 或从 shell 运行，并且通常在文件顶部包含以下行：

`#!/usr/bin/python`

那么你可以将这一行改为：

`#!/usr/bin/python3`

这是让 python *X*运行而不是默认运行的另一种方式（其中*X*是 2 或 3）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-02T17:20:05.310

其他人就可能存在的缺点向您提出了建议，因此，在手头的问题上：

```
ln -s $(which python3) /usr/local/bin/python 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2015-02-15T10:59:20.833

使用命令：

```
 update-alternatives --config python 
```

可能在我的系统上工作（我也安装了 Python2 和 3）它给了我一个错误，说没有 Python 的替代品......

# python - 异常后继续

> ID：10434261
> 
> 赞同：0
> 
> 时间：2012-05-03T15:12:43.160
> 
> 标签：python, wmi

帮助我弄清楚当 WMI 无法连接到主机并转到列表中的下一台计算机时脚本将如何继续运行。我应该在 except 之后使用 continue 吗？

```
import wmi
MachineList = ["Computer1","Computer2","Computer3"]
try:
    for machines in MachineList:
        c = wmi.WMI(machines) # <---- Go to next in the for loop when connection fail???
        for os in c.Win32_OperatingSystem():
            print os.Caption
except:
    pass 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:18:02.777

```
import wmi
MachineList = ["Computer1","Computer2","Computer3"]
for machines in MachineList:
    try:
        c = wmi.WMI(machines) # <---- Go to next in the for loop when connection fail???
        for os in c.Win32_OperatingSystem():
            print os.Caption
    except Exception: #Intended Exception should be mentioned here
        print "Cannot Connect to {}".format(machines) 
```

一般来说，除非您将异常用于控制流，否则应尽快将其捕获以防止与其他异常混合。此外，您应该具体说明要捕获的异常，而不是捕获通用的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:16:25.683

```
for machine in MachineList:
    try:
        c = wmi.WMI(machine)
        for os in c.Win32_OperatingSystem():
            print os.caption
    except Exception:
        print "Failed on machine %s" % machine 
```

# java - android，从长字符串中提取值

> ID：10434264
> 
> 赞同：1
> 
> 时间：2012-05-03T15:13:04.597
> 
> 标签：java, android, search, design-patterns

我有一个长字符串，我想解析和检索一个值。我正在考虑使用模式，但我对此有点生疏。

这是我感兴趣的字符串部分：

> ...下沉将成功 44%...

“下沉”这个词是关键词。我正在寻找百分比值（在这种情况下为 44%）

什么是最好的方法？谢谢你。

**“将是”一词可能会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:30:06.580

这是一个正则表达式解决方案：

```
String str = "...sinking will be 44% successful...";
Pattern p = Pattern.compile( "sinking will be (\\S*) successful" );
Matcher m = p.matcher( str );
if ( m.find() ) {
    String percent = m.group( 1 );
} 
```

如果您只需要百分比的数值，请将您的模式更改为：

```
"sinking will be (\\d*)% successful" 
```

如果前面的任何文本都不相关，您只想获取一行中的百分比，请使用以下模式：

```
"(\\d*%)" 
```

编辑：如果您的关键字是“sinking”，并且您想要这个词之后的第一个百分比值，这将是您的模式：

```
"sinking(?:[\\w\\s]*) (\\d+%)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:19:10.593

如果它总是这种字符串，则简单的解决方案：

```
String splitMe = "...sinking will be 44% successful...";
String strPercents = splitMe.split(" ")[3];
System.out.println(strPercents);//test output 
```

否则：好的正则表达式资源 [http://www.vogella.com/articles/JavaRegularExpressions/article.html#examples](http://www.vogella.com/articles/JavaRegularExpressions/article.html#examples)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:26:36.523

只要您知道文本将始终以“sinking will be”开头，并且 % 将始终存在，无论它周围的文本如何，它都会起作用

```
String s = "more text more text sinking will be 44% successful more text";
String find = "sinking will be ";
int findIndex = s.indexOf(find) + find.length();
int pctIndex = s.indexOf("%", findIndex);

String result = s.substring(findIndex , pctIndex); 
```

# magento - magento升级后价格含税在详情页显示为0

> ID：10434265
> 
> 赞同：1
> 
> 时间：2012-05-03T15:13:04.963
> 
> 标签：magento

我将一个 magento 商店从 1.3.x 升级到 1.7.0.0。这导致了一些我现在正在修复的错误。

我被困在这一点：升级后添加的产品价格在类别页面中正确显示，但在详细信息页面上没有。由于某种原因，升级后添加的产品的详细信息页面上的含税价格始终为“0”。不含税价格显示正确。你可以在这里看到这个：http: [//www.stagefreaks.nl/gedore-scaffhamer.html](http://www.stagefreaks.nl/gedore-scaffhamer.html)

此外：购物车和结帐时的含税和不含税价格是正确的。

知道什么可能导致这个问题吗？我现在关闭了缓存，所以这不是缓存问题（现在已经有一个多星期了）。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:46:07.883

in order to solve a bug, the first step is to know where it comes from.
As you already have discarded a template issue, let's focus on the non-core code:

*   rename app/code/local/ to app/code/local_backup/: this will disable all local modules. Reload your page and check if the price is still wrong.
    *   if it's still wrong, rename app/code/community/ to app/code/community_backup/ and reload the product page
*   when you've find out which code pool is responsible, undo the folder name's change and disable one module at a time (putting the tag `<active>` as false in the app/etc/modules/module.xml file or renaming the folder)

Once you know which module is responsible, you'll have to review it to see how it messes with your product detail view.

Oh, also, edit your index.php file to show errors:

*   comment out the condition around `Mage::setIsDeveloperMode(true)`
*   uncomment `ini_set('display_errors', 1);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:06:13.537

这个问题的具体解决方案是......

如果您安装新的自定义模块并清除 magento 缓存，则会发生此错误。

magento 在安装您的模块时创建 Helper,Model,Controller,Adminahml。从这些文件中，magento 知道你的模块。

对于前。

我创建一个模块名称为 createform 模块文件夹是 Createform/Newform/etc/ /Helper/Data.php /controllers /Model /Block/Myform.php

安装此模块后，magento 将在 /includes/src/ 文件夹中创建一个名为 Createform_Newform_Helper_Data.php 的文件。

注意：- 如果此文件未在 /includes/src/ 文件夹中创建。

致命错误：在 546 的 /app/Mage.php 中找不到类 'Createform_Newform_Helper_Data' 然后会发生此错误。

要消除此错误，请在包含/src 文件夹中手动创建此文件。喜欢：- /includes/src/Createform_Newform_Helper_Data.php

并在 Createform_Newform_Helper_Data.php 文件中添加 Data.php 文件的代码。

然后刷新您的网站。此错误已从您的系统中删除，并且可以正常工作。

还要检查您的 system.log 文件是否有其他错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:56:45.710

只是一种预感，但这可能与新的增值税选项有关吗？您可以查看增值税计算选项。

# c# - 声音频率检测？

> ID：10434266
> 
> 赞同：2
> 
> 时间：2012-05-03T15:13:08.090
> 
> 标签：c#, php, audio, speech-recognition, frequency

从音频文件中检测特定单词的解决方案是什么？

我有很多音频文件（相同的编解码器），每个文件只有大约 15 秒长。（注：所有音频文件都是同一人/同一口音）

例如：

**test1.mp3**播放`Hello Tom, what are you doing today?`

**test2.mp3**播放`Hello Paul, what are you doing today?`

**test3.mp3**播放`Good morning John - It is lovely weather today`

我需要一种方法来检测**可爱的天气**或每个音频文件**中的**单词。

我可能有 100 个音频文件说“你今天在做什么”，而其他文件说“你今天在做什么？” - 我只需要知道每个文件的状态/类型是什么..

检查频率位是否存在而不是使用语音识别工具的解决方案是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:45:17.633

您本质上是在问“我怎样才能进行通用语音识别”？

解决方案是：

如果您的平台提供开箱即用的语音识别，请使用它。例如，Microsoft Windows 就是这样做的。 [http://msdn.microsoft.com/en-us/library/hh323805.aspx](http://msdn.microsoft.com/en-us/library/hh323805.aspx)

如果您的平台没有，那么您需要集成第三方语音识别包，例如 Lernaut & Hauspie（现为 Nuance）、Dragon 等。这可能需要付费。

**编辑：**我已将此标记为[文本到语音（语音生成）和语音到文本（语音识别）API 的副本？](https://stackoverflow.com/questions/6348770/text-to-speech-voice-generation-and-speech-to-text-voice-recognition-apis)，其中对“如何进行语音识别”有全面的回答。

# jquery-ui - jquery-ui：从可调整大小的内容拖动到输出 div

> ID：10434272
> 
> 赞同：0
> 
> 时间：2012-05-03T15:13:24.450
> 
> 标签：jquery-ui, overflow, jquery-ui-sortable, jquery-ui-resizable

嗨，我不知道如何解决这个问题，要调整 div 的大小，我使用“溢出：隐藏”，但如果我把它拖出 div（我可以但它是透明的），如果我退出它并调整大小div 不隐藏：

HTML

```
 <div class="region">
    dragg to me MADA FAKA
</div>
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">tab-1</a></li>
        <li><a href="#tabs-2">tab-2</a></li>        
        <li><a href="#tabs-3">tab-3</a></li>        
    </ul>
    <div id="tabs-1">
        <div class="destacado" title="destacado">
            DRAGGABLE TO MADAFAKA 1
        </div>
    </div>
    <div id="tabs-2">
        <div class="destacado" title="destacado">
            DRAGGABLE TO MADAFAKA 2
        </div>        
    </div>    
    <div id="tabs-3">
        <div class="destacado" title="destacado">
            DRAGGABLE TO MADAFAKA 3
        </div>        
    </div>    
</div> 
```

CSS

```
#tabs
{
    position: fixed;
    overflow: hidden;
    width: 320px;
    height: 150px;
    padding: 0.5em;
    border: 1px solid black;
    z-index: 2;
}

.destacado
{
    border: 2px solid black;
}

.region
{
    width: 200px;
    height: 200px;
    border: 2px solid red;
} 
```

JS：

```
$('#tabs').tabs();
$('#tabs').resizable();
$('#tabs').draggable();

$('.region').sortable(
{
    connectWith: '.region',
    items: 'div[title="destacado"]'
});

$('#tabs-1, #tabs-2, #tabs-3').sortable(
{
    connectWith: '.region',    
    items: 'div[title="destacado"]'       
}); 
```

没有溢出的jsFiddle：隐藏：http: [//jsfiddle.net/hq9Pw/2/](http://jsfiddle.net/hq9Pw/2/)

jsFiddle 溢出：隐藏：http: [//jsfiddle.net/hq9Pw/3/](http://jsfiddle.net/hq9Pw/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:54:20.357

终于解决了这个问题：

```
 connectWith: '.region',
    appendTo: 'body',
    containment: 'window',
    helper: 'clone' 
```

# c# - 将 ASP.net Web 服务中的 JSON 反序列化为 C# 对象

> ID：10434274
> 
> 赞同：0
> 
> 时间：2012-05-03T15:13:29.460
> 
> 标签：c#, asp.net, json

在花了一天时间阅读这里的帖子后，我仍然无法让它工作，所以希望这对这里的人有意义。

Web 服务返回这个简单的 JSON

```
{"d":{"__type":"TestWebServices.Person","Name":"Bob","FavoriteColor":"Green","ID":0}} 
```

然后我使用 C# 代码反序列化

```
DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(Person));
Person someone = (Person)jsonSerializer.ReadObject(responseStream); 
```

当我使用这个模型时，有人被创建但所有属性都是空的

```
[DataContract]
public class Person {
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string FavoriteColor { get; set; }
    [DataMember]
    public int ID { get; set; }
} 
```

我试着更直接地使用这个模型

```
[DataContract]
public class Person {
    [DataMember]
    public PersonItem d { get; set; }
}
[DataContract]
public class PersonItem {
    [DataMember]
    public string __Type { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string FavoriteColor { get; set; }
    [DataMember]
    public int ID { get; set; }
} 
```

并得到了这个错误，我什至不知道从哪里开始

元素“:d”包含映射到名称“:GEMiniWebServices.Person”的类型的数据。反序列化器不知道映射到此名称的任何类型。考虑使用 DataContractResolver 或将与“TestWebServices.Person”对应的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将其添加到传递给 DataContractSerializer 的已知类型列表中。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:34:03.893

__Type 永远不应成为您的对象的一部分。这是对序列化程序的提示。此外，您在 JSON 对象中的类型提示很糟糕。[独立的 JSON 序列化](http://msdn.microsoft.com/en-us/library/bb412170.aspx)说：

> 为了保留类型标识，在将复杂类型序列化为 JSON 时，可以添加“类型提示”，并且反序列化器会识别该提示并采取适当的行动。“类型提示”是一个 JSON 键/值对，键名为“__type”（两个下划线后跟单词“type”）。该值是“DataContractName:DataContractNamespace”形式的 JSON 字符串（直到第一个冒号都是名称）。
> 
> 类型提示与 XML Schema Instance 标准定义的 xsi:type 属性非常相似，并在序列化/反序列化 XML 时使用。
> 
> 由于与类型提示的潜在冲突，禁止名为“__type”的数据成员。

`__type`如果您将声明重写为`Person:#TestWebServices`或消除它，它适用于以下情况：

```
namespace TestWebServices
{
    [KnownType(typeof(Person))]
    [DataContract]
    public class PersonWrapper
    {
        [DataMember]
        public Person d { get; set; }
    }
    [DataContract]
    public class Person
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public string FavoriteColor { get; set; }
        [DataMember]
        public int ID { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:33:26.097

尝试添加（我在这里有点刺痛，所以确切的命名空间我不正确）

```
[DataContract(Namespace = "http://schemas.datacontract.org/2004/07/TestWebServices.Person")] 
```

到 Person 上的 DataContractAttribute。

```
[DataContract(Namespace = "http://schemas.datacontract.org/2004/07/TestWebServices.Person")]
public class Person {
    [DataMember]
    public PersonItem d { get; set; }
}
[DataContract]
public class PersonItem {
    [DataMember]
    public string __Type { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string FavoriteColor { get; set; }
    [DataMember]
    public int ID { get; set; }
} 
```

# sql - 连接参数名称以循环参数

> ID：10434279
> 
> 赞同：1
> 
> 时间：2012-05-03T15:13:48.443
> 
> 标签：sql, tsql, sql-server-2008-r2

我有一个接受多个 varchar(4000) 参数（其中 26 个）的过程。

它们中的每一个都是逗号分隔的值字符串。

一旦它们被传入，我想将每个字符串分开并将它们插入到临时表中，以便稍后在 proc 中使用。

我不想写一个单独处理每个参数的语句，而是写一个while循环，它依赖于一个计数器来循环每个参数并依次处理每个参数。目前，我已经尝试了以下方法，但它不正确。

```
CREATE PROCEDURE [dbo].[myproc] (
    @string1 varchar(4000) = null;
    @string2 varchar(4000) = null;
    @string3 varchar(4000) = null;
    ....declare @string4 -> @string25...
    @string26 varchar(4000) = null;)

CREATE TABLE #emails (
    address varchar(80)
     )

Set @counter = 1

WHILE @counter < 27
BEGIN
INSERT INTO #emails(address) SELECT element as address from FT_SPLIT_LIST(isNull('@string'+convert(varchar,@counter),''),',')
SET @counter = @counter +1
END

SELECT * FROM #emails 
```

目前，这不会返回包含来自 @string1 -> @string26 的所有 CSV 的表。

FT_SPLIT_LIST 有效——我在许多其他地方使用它。我只需要知道是否有一种方法可以动态声明正在传递给它的参数？

有没有什么方法可以在不为每个 @string1->@string27 参数编写语句的情况下完成我想要完成的工作？

谢谢， C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:42:14.703

SQL Server 2008 及更高版本具有[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)：

> 表值参数是使用用户定义的表类型声明的。您可以使用表值参数将多行数据发送到 Transact-SQL 语句或例程（例如存储过程或函数），而无需创建临时表或许多参数。

这些是比逗号分隔的 varchars 和`FT_SPLIT_LIST`.

我建议阅读Erland Sommarskog 的[使用表值参数的 SQL Server 2008 中的数组和列表，](http://www.sommarskog.se/arrays-in-sql-2008.html)以全面讨论该主题。

# .net - .Net 将 LinkBut ton 添加到用户控件中的占位符

> ID：10434281
> 
> 赞同：0
> 
> 时间：2012-05-03T15:13:51.220
> 
> 标签：.net, user-controls, linkbutton

我想为 Web 应用程序中的各种母版页创建一个通用标题用户控件。标头由大师共享，并具有徽标、导航和动态帐户按钮（例如我的帐户和注销）等常用项目。

我正在向表单添加动态链接按钮就好了，但是我想将它们移动到占位符位置。

问题是用户控件收到错误，当我将它添加到占位符时，“'LinkBut​​ton' 必须放在带有 runat=server 的表单标签内”。

uc_header.ascx.cs

```
LinkButton signout = new LinkButton();
signout.Text = "Sign-Out";
signout.ID = "SignOutLink";
signout.Click += new EventHandler(SignOutLink_Click);
//adding it to the form works but positions it at the bottom
this.Page.Form.Controls.Add(signout);
//I get an error when I try to add it to the placeholder 
SignOutHolder.Controls.Add(signout); 
```

uc_header.ascx（例如简化）

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="uc_header.ascx.cs" 
Inherits="Site.Masters.uc_header" %>

<asp:PlaceHolder ID="SignOutHolder" runat="server"></asp:PlaceHolder> 
```

如何使用 .Net 将“退出”按钮添加或定位到占位符？

我的目标是创建一种注销所有页面并仅管理一个通用头文件的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:44:10.600

听起来用户控件放置在表单之外。如错误消息所示，检查母版页并确保用户控件位于表单内。

# xcode - xcode：在catiledlayer中绘制对象

> ID：10434283
> 
> 赞同：0
> 
> 时间：2012-05-03T15:14:00.720
> 
> 标签：xcode, catiledlayer

我正在尝试将自己的对象绘制到 CATiledLayer，我只是不确定我应该如何将对象推送到 drawLayer 中使用的上下文。例如，我知道我可以通过在方法 drawLayer 中声明文本代码来添加我想在屏幕上绘制的文本，但是说我只想在获得用户输入时才绘制一些东西，然后我想创建这个新的文本对象并将其绘制到屏幕上，但我不确定如何在 drawLayer 方法之外执行此操作，因为我需要上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:46:31.823

如果您希望图层重绘其内容，请向其发送`setNeedsDisplay`消息。然后，您可以绘制其他对象。

# jquery - Jquery从ajax调用中获取变量的值并将其放入新函数

> ID：10434290
> 
> 赞同：0
> 
> 时间：2012-05-03T15:14:23.107
> 
> 标签：jquery, ajax, variables, transfer

**我在从 ajax 调用函数getRequest**获取变量值并将其放入函数**测试**时遇到问题，不确定它是如何工作的，感谢任何帮助！

```
function test() {
    var out = getRequest().name; //problem
    console.log(out);
};
function getRequest() {
    $.ajax({
        url: '/nextdocument',
        type: 'GET',
        async: true,
        cache: false,
        timeout: 11000, //vänta på svar från servern om ingen inläsning
        success: function(data) {
            var name = data.description;
            var price = data.price;
            console.log("read--> " + name + price);
            setTimeout(
                    'getRequest()',
                    1000
            );

        }
    })
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:25:50.950

```
function test() {
    var XHR = getRequest();
    XHR.done(function(data) {
       var out = data.description;
       console.log(out);
    });
}

function getRequest() {
    var XHR = $.ajax({
        url: '/nextdocument',
        type: 'GET',
        async: true,
        cache: false,
        timeout: 11000, //vänta på svar från servern om ingen inläsning
        setTimeout(getRequest, 1000);  //WHY
    });
    return XHR;
} 
```

# .net - 具有多个键的 EntityFramework 模型

> ID：10434291
> 
> 赞同：1
> 
> 时间：2012-05-03T15:14:24.960
> 
> 标签：.net, entity-framework, edmx, edmx-designer

我正在尝试为现有数据库创建 EDMX 模型，数据库具有以下架构（不是最好的，但这是我拥有的，我无法更改它）：

```
Table: ObjectTypes (ObjectTypeID "Identity", ObjectName)
Data: 1, Customer
Data: 2, Agent

Table: Customers (CustomerID "Identity", FName, LName, AgentID)
Data:  1, FTest, LTest, 1

Table: Agent (AgentID "Identity", AgentName, AgentCommission)
Data:  1, TestAgent, 10.0

Table: Contacts (ContactID "Identity", ObjectTypeID, ObjectID, ContactName)
Data:  1, 1, 1, CustomerTestContact
Data:  2, 1, 1, CustomerTestContact2
Data:  3, 2, 1, AgentTestContact
Data:  4, 2, 1, AgentTestContact2 
```

现在我需要为联系人创建具有导航属性的代理和客户实体。

```
For contacts of agents: Agents A JOIN Contacts C ON A.AgentID = C.objId AND C.objType = 2
For contacts of customers: Customers Cust A JOIN Contacts C ON Cust.CustomerID = C.objId AND C.objType = 1 
```

我怎样才能做到这一点？

我尝试使用继承（客户和代理从 ObjectTypes 继承），然后为每个类添加 ObjectTypeID 的条件（客户 = 1，代理 = 2），但我收到可以完成的错误，因为 ObjectTypes 中的 ObjectTypeID 定义为 Identity柱子。

我不确定我是否走正确的路，但我找不到另一条路。

实际上，我什至不知道是否可以使用 EF 实现这一点。

谢谢你。

# c# - 处理查询投影中的空值

> ID：10434294
> 
> 赞同：0
> 
> 时间：2012-05-03T15:14:27.880
> 
> 标签：c#, nhibernate, queryover

我有一个对应的地址，它有一个地址，可能分配了一个国家。

我该如何处理：

```
InvoiceAddress invoiceAddres = null;
Country InvoiceAddressCountry = null;
Counterpart counterpart = null;
CounterpartTabDTO result = null;

// projections for DTO-mapping
var projections = new[]
                      {
                          Projections.Property(() => counterpart.CounterpartId).WithAlias(() => result.InternalID),
                          Projections.Property(() => counterpart.GlobalCounterpartId).WithAlias(() => result.BasicInfo_GlobalCounterpartyID),
                          Projections.Property(() => counterpart.Name).WithAlias(() => result.BasicInfo_Name),
                          Projections.Property(() => counterpart.ShortName).WithAlias(() => result.BasicInfo_ShortName),
                          Projections.Property(() => counterpart.PhoneNumber).WithAlias(() => result.BasicInfo_Telephone),
                          Projections.Property(() => counterpart.Webpage).WithAlias(() => result.BasicInfo_WWW),
                          Projections.Property(() => counterpart.Language).WithAlias(() => result.BasicInfo_Language),
                          Projections.Property(() => counterpart.VAT).WithAlias(() => result.BasicInfo_VAT),
                          Projections.Property(() => counterpart.CompanyRegistrationNumber).WithAlias(() => result.BasicInfo_CompanyRegistationno),
                          Projections.Property(() => invoiceAddres.Name).WithAlias(() => result.BasicInfo_InvoiceAddressContactPerson),
                          Projections.Property(() => invoiceAddres.Street).WithAlias(() => result.BasicInfo_InvoiceAddressAddress),
                          Projections.Property(() => invoiceAddres.PostalCode).WithAlias(() => result.BasicInfo_InvoiceAddressPostalCode),
                          Projections.Property(() => invoiceAddres.City).WithAlias(() => result.BasicInfo_InvoiceAddressCity),
                          Projections.Property(() => invoiceAddres.Area).WithAlias(() => result.BasicInfo_InvoiceAddressArea),
                          Projections.Property(() => InvoiceAddressCountry.PrintableName).WithAlias(() => result.BasicInfo_InvoiceAddressCountry),
                          Projections.Property(() => invoiceAddres.Department).WithAlias(() => result.BasicInfo_InvoiceAddressDepartment),
                          Projections.Property(() => invoiceAddres.Fax).WithAlias(() => result.BasicInfo_InvoiceAddressFax),
                          Projections.Property(() => invoiceAddres.MainEmail).WithAlias(() => result.BasicInfo_InvoiceAddressEmail),
                      };
var query = Session.QueryOver(() => counterpart)
    .JoinQueryOver<InvoiceAddress>(x => x.InvoiceAddresses, () => invoiceAddres)
    .Where(x => x.IsDefault)
    .JoinQueryOver<Country>(() => invoiceAddres.Country, () => InvoiceAddressCountry)
    .Select(projections); 
```

问题是 InvoiceAddressCountry，它可能为空。如果发生这种情况，我希望 result.BasicInfo_InvoiceAddressCountry 属性保持为空。为了澄清，上面的代码不起作用。它无法处理空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:17:31.497

从你的话我可以假设你需要使用左连接：

```
.Left.JoinQueryOver(() => invoiceAddres.Country, () => InvoiceAddressCountry) 
```

# java - 将中缀表达式转换为后缀表达式

> ID：10434295
> 
> 赞同：0
> 
> 时间：2012-05-03T15:14:28.533
> 
> 标签：java

我有一个问题，我在这个函数中找不到错误，它有时可以很好地处理任何输入，但是当输入中有括号时它会被缓存{我想知道这段代码的错误在哪里以及如何修复它，并且有没有更好的方法来代替这种方式}

```
 public static String Converting_infix_expressions_to_postfix_expressions(String infix) throws Exception{
    StringTokenizer st = new StringTokenizer(infix);
    int numOF_tokens = st.countTokens();
    String postfix = "" ;
    for (int i = 1; i <= numOF_tokens; i++) {
        String term = st.nextToken();
        try {  // if it is an Float there is no problem will happen
            float x =  Float.parseFloat(term);
            postfix += x +" " ;
            System.out.println("term is number " + term);
        } catch (Exception e) {
            System.out.println("term is symbol " + term);
            if(stack.isEmpty())
                stack.push(term);
            else if(term == "(")
                stack.push(term);
            else if(term == ")"){
                while((String)stack.peek() != "(")
                    postfix += stack.pop() +" ";
                stack.pop();
            }

            else{
                int x = 0,y = 0;
                switch(term){
                case "+": x = 1; break;
                case "-": x = 1; break;
                case "*": x = 2; break;
                case "/": x = 2; break;
                }
                switch((String)stack.peek()){
                case "+": y = 1; break;
                case "-": y = 1; break;
                case "*": y = 2; break;
                case "/": y = 2; break;
                }
                if(x > y)
                    stack.push(term);
                else {
                    int x1 = x , y1 = y;
                    boolean puchedBefore = false;
                    while(x1 <= y1){
                        postfix += stack.pop() +" ";
                        if(stack.isEmpty() || stack.peek() == "(" ){
                            stack.push(term);
                            puchedBefore = true;
                            break;
                        }
                        else{
                            switch(term){
                            case "+": x1 = 1; break;
                            case "-": x1 = 1; break;
                            case "*": x1 = 2; break;
                            case "/": x1 = 2; break;
                            }
                            switch((String)stack.peek()){
                            case "+": y1 = 1; break;
                            case "-": y1 = 1; break;
                            case "*": y1 = 2; break;
                            case "/": y1 = 2; break;
                            }
                        }
                    }
                    if(!puchedBefore)
                        stack.push(term);
                }   
            }
        }
    }
    while(!stack.isEmpty()){
        postfix += stack.pop() +" ";
    }
    System.out.println("The postfix expression is : " + postfix);
    return postfix;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:42:55.530

您的代码有几个问题。

1.  您应该制作一个自定义字符串标记器，因为括号和数字之间可能没有空格。例如：（5 + 6）
2.  未正确使用 try-catch 块。考虑一下，首先检查该字段是否是符号，然后继续将其解析为浮点数。这样您就可以避免大部分代码出现在 catch 块中。
3.  您所指的错误可以通过对第 18 行的以下更改来修复。

    while(!stack.isEmpty() && (String)stack.peek() != "(")

# c# - 在 windows 窗体中向 datagridview 添加按钮

> ID：10434296
> 
> 赞同：1
> 
> 时间：2012-05-03T15:14:31.673
> 
> 标签：c#, winforms, data-binding, dataset

我想在 datagridview 上添加两个按钮。现在他们在右边。但我想在左边找到它们。

另一件事是我想为“编辑”按钮添加一个更新事件。是吗

```
private void Edit_Click(object sender, EventArgs e)
{

} 
```

表格代码：

```
private void Form1_Load(object sender, EventArgs e)
{
   // TODO: This line of code loads data into the 'qDataSet.Metric' table. 
   // You can move, or remove it, as needed.
   this.metricTableAdapter.Fill(this.qDataSet.Metric);
   DataGridViewButtonColumn EditColumn = new DataGridViewButtonColumn();
   EditColumn.Text = "Edit";
   EditColumn.Name = "Edit";
   EditColumn.DataPropertyName = "Edit";
   dataGridView1.Columns.Add(EditColumn);
   DataGridViewButtonColumn DelColumn = new DataGridViewButtonColumn();
   DelColumn.Text = "Delete";
   DelColumn.Name = "Delete";
   DelColumn.DataPropertyName = "Delete";
   dataGridView1.Columns.Add(DelColumn);
} 
```

图片喜欢： ![纽扣](../Images/757630eac414dae9c84ff604424f3130.png)

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:21:07.350

您似乎已经从设计师那里设计了 datagridview。

您可以使用允许编辑列的向导。您将在此处添加两列（一列用于编辑，另一列用于删除）。您可以选择要设置这些列的位置。按钮的文本使用属性“Text”定义，您也可以设置属性“UseColumnTextForButton”。

您可以在 CellContentClickEvent 中轻松管理被单击的列和行，然后执行该工作。

如果您想管理访问权限（例如允许某人编辑而其他人不编辑），您可以使用此列的显示/隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:19:18.470

看[`DisplayIndex`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.displayindex.aspx)

> 在关联的 DataGridView 中显示的列的从零开始的位置，如果带区不包含在控件中，则为 -1。

```
EditColumn.DisplayIndex = 0;
DelColumn.DisplayIndex = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:28:01.670

您不能直接订阅编辑按钮事件。因此，决定订阅`CellClick`事件并检查按下了哪些事件

是的，对于列位置集`DisplayIndex`属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-07T13:29:40.667

```
DataGridViewButtonColumn ButtonColumn = new DataGridViewButtonColumn();
ButtonColumn.Name = "Print";
ButtonColumn.HeaderText = "Print";

ButtonColumn.FlatStyle = FlatStyle.Popup;
ButtonColumn.DefaultCellStyle.ForeColor = Color.White;
ButtonColumn.DefaultCellStyle.BackColor = Color.CadetBlue;
ButtonColumn.Text = "Print";
ButtonColumn.UseColumnTextForButtonValue = true;
int columnIndex = 12; /*your column index number*/
if (dtGridTicket.Columns["Print"] == null)
{
    dtGridTicket.Columns.Insert(columnIndex, ButtonColumn);
} 
```

如果您加载页面列索引隐藏，那么您使用

```
dtGridTicket.Columns.RemoveAt(12); 
```

# path - 圆形路径上的 SVG 图像

> ID：10434298
> 
> 赞同：1
> 
> 时间：2012-05-03T15:14:39.567
> 
> 标签：path, svg, raphael, gif, geometry

我想创建一个圆形路径，沿路径具有动画 .gifs，但我希望它们都面向圆的中心。

如果圆形路径可以随窗口宽度和高度缩放，我也会非常喜欢它。这会在圆圈中添加或减去 .gifs。

这可能吗？

示例 jpg.. [http://oi48.tinypic.com/5nitt4.jpg](http://oi48.tinypic.com/5nitt4.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:21:01.470

我认为 SVG 不支持动画 .gif。但其他一切皆有可能——您只需要一点三角函数就可以按照您希望的显示方式定位和缩放元素！

*编辑*：根据下面的评论，实际上支持动画 gif。

# vb.net - 我应该在将文本流式传输到文件之前检查文件路径是否存在

> ID：10434302
> 
> 赞同：1
> 
> 时间：2012-05-03T15:15:19.253
> 
> 标签：vb.net, file-io

我有以下代码：

```
Dim fs As FileStream
fs = New FileStream(path, FileMode.Create)

Dim sw As StreamWriter
sw = New StreamWriter(os)
sw.Write(something)
sw.Flush() 
```

这是正确的方法吗？我是否需要进行一些检查以查看文件是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:20:01.530

> 我是否需要进行一些检查以查看文件是否存在？

这取决于你想要做什么。如果要覆盖文件，则不。`FileMode.Create`将始终覆盖现有文件，或者如果它不存在，则创建它：

> [**创造**](http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx)
> 
> 指定操作系统应该创建一个新文件。如果文件已经存在，它将被覆盖。此操作需要 FileIOPermissionAccess.Write 权限。System.IO.FileMode.Create相当于请求如果文件不存在就使用CreateNew；否则，使用截断。如果文件已经存在但为隐藏文件，则会抛出 UnauthorizedAccessException 异常。

如果您不想覆盖现有文件，那么是的，您应该检查它。像这样的东西：

```
If Not File.Exists(path) Then
    Using fs As New FileStream(path, FileMode.CreateNew), sw As New StreamWriter(fs)
        sw.Write("Something")
    End Using
End If 
```

您还会注意到我使用`CreateNew`而不是`Create`. 这是一项额外的安全检查，可确保永远不会覆盖现有文件。使用`CreateNew`时，如果文件已存在，则会引发异常。但是，您仍然应该检查它是否存在，因为我们不希望首先发生异常。

# php - 从浏览器问题中保存图像

> ID：10434304
> 
> 赞同：1
> 
> 时间：2012-05-03T15:15:21.567
> 
> 标签：php

我正在使用代码打印图像而不显示它的真实路径。但是当我想将该图像保存到我的计算机时遇到问题，因为它总是将 PHP 文件名显示为图像的名称。

```
$id = intval($_REQUEST["id"]);
$getimage = $db->query("select id,img from bbup where id='$id'");
$fetch_image = $db->fetch($getimage);
$filename = $fetch_image['img'];
if (!$id) {
    echo "Wrong Id";
    exit;
}
if (!file_exists($filename)) {
    echo "Image not found.";
    exit;
}
$aaa = SITE_URL . $filename;
$imginfo = getimagesize($aaa);
header("Content-type: " . $imginfo['mime']);
readfile($aaa); 
```

php 文件是`ppupload.php`，当我想在对话框中保存图像（假设它是 PNG 图像）时，文件的名称显示（ ppupload.php.png ），我希望它是图像本身。

存储到数据库中的图像路径如下：`folder/folder/filename.ext`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:26:16.897

您是否尝试过设置 Content Disposition 标头？

```
header('Content-Disposition: attachment; filename='.$filename);
header('Content-Type: application/octet-stream'); 
```

这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:25:55.413

您可以尝试添加类似这样的 header("Content-Disposition: inline; filename=\"myimg.png\"");

# regex - 用于匹配查询字符串的正则表达式

> ID：10434306
> 
> 赞同：0
> 
> 时间：2012-05-03T15:15:32.897
> 
> 标签：regex

我有一个日志文件，其中的日志与 Apache 日志非常相似

这是一个示例日志行

```
41.13.0.155 - - [03/May/2012:00:00:08 -0700] "GET /gameState?type=udid&udid=A100001837E58D4&game=TapFish HTTP/1.1" 200 38812 - "Dalvik/1.4.0 (Linux; U; Android 2.3.5; GT-B5510 Build/GINGERBREAD)" 
```

我能够将此字符串与日志行分开`"GET /gameState?type=udid&udid=A100001837E58D4&game=TapFish HTTP/1.1"`

我想迭代所有行以获取满足以下条件的所有日志行日志行应该有`"GET /gameState?type=[[anything]]"`但 [[anything]] 不应该`'neighbor'`

请建议一些可以在上述条件下匹配字符串的正则表达式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:22:31.530

您可以使用[否定前瞻](http://www.regular-expressions.info/lookaround.html)来匹配不包含子字符串的行：

```
.+GET /gameState\?type=(?!neighbor).+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:37:14.497

我不确定我是否了解您的所有限制，但这应该可行：

```
.+GET /gameState(?!.*type=neighbor\b).* 
```

`type=neighbor`如果它出现在 之后的任何地方`gameState`，并且只有`neighbor`在单词边界处（没问题），你基本上不匹配`type=neighborhood`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:22:08.350

使用负前瞻排除邻居：

```
for line in logfile:
    match = re.search("GET /gameState?type=(?!neighbor)", line") 
```

# bjam - 让 bjam 在编译前运行一个脚本

> ID：10434307
> 
> 赞同：1
> 
> 时间：2012-05-03T15:15:35.990
> 
> 标签：bjam

是否可以让 bjam 在构建之前运行脚本？如果是这样，怎么做？我想在编译之前对代码应用补丁，但不想改变开发人员的正常工作流程。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T18:45:23.137

这是我发现的一种快速的方法

```
Echo [ SHELL "./myscript" ] ; 
```

或者你可以使用[生成器](http://www.boost.org/boost-build2/doc/html/bbv2/extending/tools.html)

# php - 将 PHP 变量插入 mySQL 表

> ID：10434308
> 
> 赞同：0
> 
> 时间：2012-05-03T15:15:37.280
> 
> 标签：php, mysql, insert

我有一个预订系统，一旦用户预订了航班，他们的详细信息就会发送到一个名为`OABS_customers`.

它的结构如下：

```
名称 类型（长度） 空 默认

name varchar(60) 没有 noname
address1 varchar(60) 没有 noaddress
address2 varchar(60) 无 noaddress2
县 varchar(60) 无县
邮政编码 varchar(32) 无邮政编码
客户 tinyint(4) 否       
席位 varchar(11) 否 0
数字 tinyint(4) 否 0
类 varchar(11) 没有 noclass
用户名 varchar(60) 没有 nousername

```

现在，我的脚本毫无问题地添加了所有细节 - 除了一列 -`username`列。我正在使用此代码：（`$query = "INSERT INTO OABS_customers (username) VALUES ('$user')";`由 eggyal 提供）获取登录用户名（存储在 cookie ID_my_site 和`$user = $_COOKIE['ID_my_site']`- 我已经测试过，它确实包含登录用户的用户名）并添加它进入用户名表，但这似乎不起作用，而是显示默认值`nousername`.

如果有人可以帮助修改这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:39:17.337

您需要修改登录机制以跟踪会话的用户 ID。将 ID 存储在内存或 cookie 中。

一旦您现在可以存储用户 ID，您就可以将其保存到数据库中。

# c# - 引用的程序集中缺少命名空间

> ID：10434320
> 
> 赞同：4
> 
> 时间：2012-05-03T15:16:08.507
> 
> 标签：c#, reference, class-library

这只是一个信息帖子，因为我被这个咬过太多次了。

当您有一个包含大量相互引用的类库的大型解决方案时，您创建了一个新项目并引用了其中一个类库，但编译器抱怨它在您引用的程序集中看不到命名空间。

**确保两个项目使用相同的 Target 平台**

VS 中新 c# 项目的默认平台是 .net4 客户端配置文件。但是，如果您引用的程序集正在导入/使用在客户端配置文件版本中不可用的类库，则编译器将看不到使用该类库的命名空间部分。

希望这可以节省一些时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:18:15.383

我将添加注意 Visual Studio 2010 转换器（来自 Visual Studio 2008 的解决方案）的奇怪行为，当您切换到 .Net 4.0 时它会编辑目标平台。

你必须小心目标平台:)

# jquery - 有没有办法通过索引获取 jQueryUI 选项卡元素？

> ID：10434321
> 
> 赞同：1
> 
> 时间：2012-05-03T15:16:11.343
> 
> 标签：jquery, jquery-ui

我需要能够对选定的选项卡和它之前的选项卡执行操作。我可以像这样获取所选选项卡的索引：

```
var selectedIndex = $tabs.tabs('option', 'selected'); 
```

所以我想做类似的事情

```
$leftTab = $tabs.getTabByIndex(selectedIndex - 1); 
```

有什么近似的吗？还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:21:10.987

假设`$tabs`你的标签元素周围是容器`div`，试试这个：

```
$leftTab = $("div", $tabs).eq(selectedIndex - 1); 
```

# cherrypy - Cherrypy 和 SimpleDB 与 boto

> ID：10434324
> 
> 赞同：0
> 
> 时间：2012-05-03T15:16:25.820
> 
> 标签：cherrypy, amazon-simpledb, boto

有人用 Cherrypy 和 Boto 吗？有什么问题吗？线程？有什么简单的例子吗？

我想知道将初始 boto.connect_sdb 语句放在哪里以及是否可以保存域对象或在处理每个页面时必须调用 get_domain 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:33:33.190

我没有专门将 boto 与 CherryPy 一起使用，但肯定有一些示例（例如 botoweb）在类似的框架中使用它。SDBConnection 对象（或 boto 中的任何连接对象）的主要内容是它们在幕后使用 httplib，这不是线程安全的，因此您绝对可以重用和持久化连接和域对象，但要确保每个线程都有自己的。

希望有帮助。

# git - git中的哈希冲突

> ID：10434326
> 
> 赞同：210
> 
> 时间：2012-05-03T15:16:28.943
> 
> 标签：git, hash, sha1, hash-collision

如果我在使用 git 时发生哈希冲突，实际上会发生什么？

例如，我设法提交了两个具有相同 sha1 校验和的文件，git 会注意到它还是会损坏其中一个文件？

可以改进 git 以适应这种情况，还是我必须更改为新的哈希算法？

（请不要通过讨论不太可能来转移这个问题 - 谢谢）

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2014-04-23T19:09:30.457

# 在 10 个卫星上挑选原子

SHA-1 哈希是一个 40 十六进制字符串...即每个字符 4 位乘以 40...160 位。现在我们知道 10 位大约是 1000（准确地说是 1024），这意味着有 1 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 个不同的 SHA-1 哈希值... 10 ^(48)。

这相当于什么？那么月球是由大约 10 ^(47)个原子组成的。因此，如果我们有 10 个卫星……你在其中一个卫星上随机选择一个原子……然后继续在它们上再次选择一个随机原子……那么你会选择同一个原子两次的可能性, 是两个给定的 git 提交具有相同 SHA-1 哈希的可能性。

扩展这个我们可以问这个问题......

**在您开始担心冲突之前，您需要在存储库中提交多少次？**

这与所谓的“生日攻击”有关，后者又指“生日悖论”或“生日问题”，它指出当你从给定的集合中随机选择时，你需要的选择非常少，然后你更有可能选择了两次。但“令人惊讶的少数”在这里是一个非常相对的术语。

维基百科有[一张关于生日悖论碰撞概率的表格](https://en.wikipedia.org/wiki/Birthday_problem#Probability_table)。没有 40 个字符的哈希条目。但是 32 和 48 个字符的条目的插值使我们处于 5*10 ^(22)次git 提交的范围内，碰撞概率为 0.1%。那是 50,000 亿次不同的提交，或 50**个 Zettacommits**，在你达到甚至 0.1% 的机会发生碰撞之前。

仅这些提交的哈希字节总和将比地球上一年生成的所有数据更多的数据，也就是说，您需要比 YouTube 流式传输视频更快地生成代码。祝你好运。:D

**关键是除非有人故意造成碰撞，否则随机发生碰撞的概率非常小，你可以忽略这个问题**

# “但是当碰撞*确实*发生时，那么实际发生了什么？”

好吧，假设不可能的事情确实发生了，或者假设有人设法定制[了一个故意的 SHA-1 哈希冲突](https://www.theregister.co.uk/2017/02/23/google_first_sha1_collision/)。那会发生什么？

在这种情况下，有[一个很好的答案，有人对其进行了实验](https://stackoverflow.com/questions/9392365/how-would-git-handle-a-sha-1-collision-on-a-blob)。我将引用该答案：

> 1.  如果已存在具有相同哈希的 blob，则根本不会收到任何警告。一切似乎都很好，但是当你推送时，有人克隆，或者你恢复，你将丢失最新版本（与上面解释的一致）。
> 2.  如果树对象已经存在并且您使用相同的哈希创建了一个 blob：一切看起来都很正常，直到您尝试推送或有人克隆您的存储库。然后你会看到 repo 已经损坏了。
> 3.  如果提交对象已经存在并且您使用相同的哈希创建了一个 blob：与 #2 相同 - 已损坏
> 4.  如果一个 blob 已经存在并且您使用相同的哈希创建了一个提交对象，那么在更新“ref”时它将失败。
> 5.  如果 blob 已经存在，并且您使用相同的哈希创建树对象。创建提交时它将失败。
> 6.  如果树对象已经存在并且您使用相同的哈希创建提交对象，则更新“ref”时它将失败。
> 7.  如果一个树对象已经存在并且你创建了一个具有相同哈希的树对象，那么一切看起来都很好。但是当你提交时，所有的存储库都会引用错误的树。
> 8.  如果提交对象已经存在，并且您使用相同的哈希创建提交对象，那么一切看起来都很好。但是当您提交时，将永远不会创建提交，并且 HEAD 指针将移动到旧提交。
> 9.  如果提交对象已经存在并且您使用相同的哈希创建树对象，则在创建提交时它将失败。

如您所见，有些情况并不好。特别是案例 #2 和 #3 会弄乱您的存储库。但是，故障似乎确实存在于该存储库中，并且攻击或奇异的可能性不会传播到其他存储库。

此外，故意碰撞问题似乎被认为是一个真正的威胁，因此例如[GitHub 正在采取措施防止它](https://github.com/blog/2338-sha-1-collision-detection-on-github-com)。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-05-03T15:31:15.427

如果两个文件在 git 中具有相同的哈希和，它会将这些文件视为相同。在绝对不可能发生这种情况的情况下，您总是可以返回一个提交，并更改文件中的某些内容，这样它们就不会再发生冲突了......

请参阅[Linus Torvalds 在主题“开始考虑 sha-256？”中的帖子。在 git 邮件列表中](http://web.archive.org/web/20120701221418/http://kerneltrap.org/mailarchive/git/2006/8/28/211065)。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-06-30T00:03:42.863

如果不解释为什么这不是问题，就不可能用正确的“但是”来回答这个问题。如果没有真正掌握哈希的真正含义，就不可能做到这一点。它比您在 CS 程序中可能遇到的简单案例要复杂得多。

这里对信息论有一个基本的误解。如果您通过丢弃一些数量（即哈希）将大量信息减少为更少量的信息，则可能会发生与数据长度直接相关的冲突。数据越短，它就越不可能。现在，绝大多数碰撞都是乱码，使它们更有可能实际发生（你永远不会检查乱码......即使是二进制图像也有点结构化）。最后，机会很渺茫。要回答您的问题，是的，git 会将它们视为相同，更改哈希算法无济于事，需要进行某种“第二次检查”，但最终，您将需要尽可能多的“附加检查”数据因为数据的长度是 100% 确定的......请记住，您将是 99.99999.... 到一个非常长的数字......肯定像你描述的那样简单检查。SHA-x 是加密强哈希，这意味着通常不难故意创建两个彼此非常相似且具有相同哈希的源数据集。数据中的一点变化应该在散列输出中产生不止一个（最好尽可能多）位的变化，这也意味着从散列返回到完整的一组非常困难（但并非完全不可能）冲突，从而从那组冲突中提取出原始消息——除了少数之外，所有的都是乱码，如果消息长度足够长，那么在那些没有的消息中仍然有大量需要筛选。加密哈希的缺点是它们的计算速度很慢……一般来说。

那么，这对 Git 意味着什么呢？不多。哈希很少（相对于其他所有内容）完成，以至于它们的计算代价总体上对操作来说很低。发生一对碰撞的机会是如此之低，这不是一个现实的机会发生并且不会立即被检测到（即您的代码很可能会突然停止构建），允许用户解决问题（备份修订，并再次进行更改，由于时间更改，您几乎肯定会得到不同的哈希值，这也提供了 git 中的哈希值）。如果您在 git 中存储任意二进制文件，这对您来说更有可能是一个真正的问题，这并不是它的主要使用模型。如果你想这样做......你可能最好使用传统数据库。

考虑这一点并没有错——这是一个很好的问题，很多人只是把它当作“不太可能不值得考虑”——但实际上比这要复杂一些。如果它确实发生了，它应该很容易被检测到，它不会是正常工作流程中的无声损坏。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-04-11T20:46:38.617

[您可以在“ Git 如何处理 blob 上的 SHA-1 冲突？](https://stackoverflow.com/a/34599081/6309) ”中看到一个很好的研究。

由于现在可能发生 SHA1 冲突（正如我在[**shattered.io**](https://shattered.io/)[的答案](https://stackoverflow.com/a/42450327/6309)中引用的那样），知道 Git 2.13（2017 年第二季度）将通过[SHA-1 实现的“检测尝试创建冲突”变体改善/缓解当前情况](https://github.com/cr-marcstevens/sha1collisiondetection)[作者：Marc Stevens (CWI) 和 Dan Shumow (Microsoft)](https://github.com/cr-marcstevens/sha1collisiondetection)。[](https://shattered.io/)

 **请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 f5f5e7f](https://github.com/git/git/commit/f5f5e7f06c210e833632c8f4cb907d0af581f473)、[提交 8325e43](https://github.com/git/git/commit/8325e43b82dd0bd00c37abed45861bb8c155b022)、[提交 c0c2006](https://github.com/git/git/commit/c0c20060af3dfc55258e0b9168e0d9c564b5bdfd)、[提交 45a574e](https://github.com/git/git/commit/45a574eec82424ac11c4c5fe117725597309b9c9)、[提交 28dc98e](https://github.com/git/git/commit/28dc98e343ca4eb370a29ceec4c19beac9b5c01e)（2017 年 3 月 16 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 48b3693](https://github.com/git/git/commit/48b3693d3cec7bd7996b1394a8df901d1fc26320))^(中，2017 年 3 月 24 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `Makefile`: 设为`DC_SHA1`默认
> 
> 我们过去默认使用 OpenSSL 库中的 SHA1 实现。
> 由于我们在最近的“破碎”公告之后试图小心防止碰撞攻击，因此切换默认值以鼓励人们改用 DC_SHA1 实现。
> 那些想要使用 OpenSSL 实现的人可以`OPENSSL_SHA1=YesPlease`在运行“ `make`”时明确要求它。
> 
> 我们实际上没有 Git 对象冲突，所以我们能做的最好的事情就是通过 test-sha1 运行其中一个破碎的 PDF。这应该触发碰撞检查并死亡。

* * *

> 是否可以改进 Git 以适应这种情况，或者我是否必须更改为新的哈希算法？

**使用 Git 2.16（2018 年第一季度）更新 2017 年 12 月**：支持替代 SHA 的努力正在进行中：请参阅“[为什么 Git 不使用更现代的 SHA？](https://stackoverflow.com/a/47838703/6309) ”。

您将能够使用另一种哈希算法：SHA1 不再是 Git 的唯一算法。

* * *

Git 2.18（2018 年第二季度）记录了该过程。

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 5988eb6](https://github.com/git/git/commit/5988eb631a3a3a42f82c1442fae79001ad2b90e7)和[提交 45fa195](https://github.com/git/git/commit/45fa195ff0b7a440fae02da1d871f976afa32dff)（2018 年 3 月 26 日[）](https://github.com/avar)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([d877975 提交中](https://github.com/git/git/commit/d877975e129e85cde331fc776a2592a6f40f10df))^(，2018 年 4 月 11 日）)[`avar`](https://github.com/avar)
^([`gitster`](https://github.com/gitster))

> ## doc `hash-function-transition`: 阐明 SHAttered 的含义
> 
> 尝试澄清 SHAttered 攻击在实践中对 Git 意味着什么。
> 之前版本的文本没有提到 Git 已经针对这种特定攻击提供了缓解措施，SHAttered 研究人员声称这将检测到密码分析碰撞攻击。
> 
> 我可能弄错了一些细微差别，但据我所知，这篇新文本准确地总结了 git 中 SHA-1 的当前情况。即**git 不再真正使用 SHA-1，它使用 Hardened-SHA-1**（它们恰好在 99.99999999999...% 的时间内产生相同的输出）。
> 
> 因此，先前的文本断言以下内容是不正确的：
> 
> > [...]由于 [SHAttered]，SHA-1 不再被认为是加密安全的 [...]
> 
> 事实并非如此。我们有针对 SHAttered 的缓解措施，*但* 我们认为，`NewHash`如果未来出现 SHA-1 或 Hardened-SHA-1 中的漏洞，我们应该谨慎行事。

因此，[新文档](https://github.com/git/git/blob/5988eb631a3a3a42f82c1442fae79001ad2b90e7/Documentation/technical/hash-function-transition.txt#L30-L54)现在显示为：

> Git v2.13.0 和后来的默认情况下转移到强化的 SHA-1 实现，这不容易受到 SHAttered 攻击。
> 
> 因此，Git 实际上已经迁移到一个不是 SHA-1 并且不共享其漏洞的新哈希，它的新哈希函数恰好为所有已知输入产生完全相同的输出，除了 SHAttered 发布的两个 PDF研究人员和新的实现（由这些研究人员编写）声称可以检测未来的密码分析碰撞攻击。
> 
> 无论如何，将 SHA-1 的任何变体转移到新的哈希值都被认为是谨慎的。无法保证将来不会发布对 SHA-1 的攻击，并且这些攻击可能没有可行的缓解措施。
> 
> 如果要真正破解 SHA-1 及其变体，Git 的哈希函数就不能再被认为是加密安全的了。这将影响散列值的通信，因为我们不能相信给定的散列值代表说话者想要的已知良好版本的内容。

注意：同一份文档现在（2018 年第三季度，Git 2.19）明确将**“新哈希”引用为 SHA-256**：请参阅“[为什么 Git 不使用更现代的 SHA？](https://stackoverflow.com/a/47838703/6309) ”。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-05-03T15:26:45.637

> 可以改进 git 以适应这种情况，还是我必须更改为新的哈希算法？

任何散列算法都可能发生冲突，因此更改散列函数并不能排除问题，它只会降低发生的可能性。所以你应该选择一个非常好的哈希函数（SHA-1 已经是，但你要求不要被告知:)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-02-24T03:22:58.773

Google 现在声称在某些先决条件下可能发生 SHA-1 冲突： [https ://security.googleblog.com/2017/02/announcing-first-sha1-collision.html](https://security.googleblog.com/2017/02/announcing-first-sha1-collision.html)

由于 git 使用 SHA-1 来检查文件完整性，这意味着 git 中的文件完整性受到损害。

IMO，git 绝对应该使用更好的散列算法，因为现在可以进行故意碰撞。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-26T07:34:37.003

我最近在 BSD 讨论组中发现了 2013-04-29 的帖子

[http://openbsd-archive.7691.n7.nabble.com/Why-does-OpenBSD-use-CVS-td226952.html](http://openbsd-archive.7691.n7.nabble.com/Why-does-OpenBSD-use-CVS-td226952.html)

海报声称：

> 我曾经遇到过一次哈希冲突，使用 git rebase。

不幸的是，他没有为他的主张提供任何证据。但也许您想尝试联系他并询问他有关此假定事件的情况。

但在更一般的层面上，由于生日攻击，SHA-1 哈希冲突的机会是 1 in pow(2, 80)。

这听起来很多，而且肯定比世界上所有 Git 存储库中存在的单个文件版本的总数加起来还要多。

但是，这仅适用于实际保留在版本历史记录中的版本。

如果开发人员非常依赖 rebase，则每次为分支运行 rebase 时，该分支的所有版本（或分支的 rebase 部分）中的所有提交都会获得新的哈希值。每个使用“git filter-branch”修改的文件也是如此。因此，“rebase”和“filter-branch”可能是随时间生成的散列数量的大乘数，即使它们实际上并非全部保留：经常，在变基之后（特别是为了“清理”一个分支)，原来的分支被扔掉了。

但是如果在 rebase 或 filter-branch 期间发生冲突，它仍然会产生不利影响。

另一件事是估计 git 存储库中散列实体的总数，并查看它们与 pow(2, 80) 的距离。

假设我们有大约 80 亿人，他们所有人都将运行 git，并将他们的东西保存在每人 100 个 git 存储库中。让我们进一步假设平均存储库有 100 个提交和 10 个文件，每次提交只有一个文件更改。

对于每个修订，我们至少有一个树对象和提交对象本身的哈希。连同更改的文件，我们每个修订版有 3 个哈希值，因此每个存储库有 300 个哈希值。

对于 80 亿人的 100 个存储库，这给出的 pow(2, 47) 距离 pow(2, 80) 还很远。

但是，这不包括上面提到的假设乘法效应，因为我不确定如何将它包括在这个估计中。也许它可以大大增加发生碰撞的机会。特别是如果许多人对具有很长提交历史的非常大的存储库（如 Linux 内核）进行了微小的更改，从而为所有受影响的提交创建了不同的哈希值。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-19T13:50:20.620

哈希冲突的可能性极小，简直令人震惊！全世界的科学家都在努力实现这一目标，但还没有成功。不过，对于某些算法，例如 MD5，它们是成功的。

# 几率是多少？

**SHA-256**有 2^256 个可能的哈希值。那是大约**10^78**。或者更形象地说，碰撞的可能性大约是

1 : 100 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000

中彩票的几率约为**1：14** Mio。**与 SHA-256 发生碰撞的几率就像连续 11 天**中了彩票一样！

*数学解释：[14 000 000](http://en.wikipedia.org/wiki/Lottery_mathematics) ^ 11 ~ 2^256*

此外，[宇宙](http://en.wikipedia.org/wiki/Observable_universe#Matter_content_.E2.80.94_number_of_atoms)有大约 10^80 个原子。这只是 SHA-256 组合的 100 倍。

# MD5碰撞成功

即使对于**MD5**，机会也很小。不过，数学家设法创造了一个碰撞：

```
d131dd02c5e6eec4 693d9a0698aff95c 2fcab5 8 712467eab 4004583eb8fb7f89
55ad340609f4b302 83e4888325 7 1415a 085125e8f7cdc99f d91dbdf280373c5b
d8823e3156348f5b ae6dacd436c919c6 dd53e2 b 487da03fd 02396306d248cda0
e99f33420f577ee8 ce54b67080 a 80d1e c69821bcb6a88393 96f965 2 b6ff72a70
```

具有相同的 MD5

```
d131dd02c5e6eec4 693d9a0698aff95c 2fcab5 0 712467eab 4004583eb8fb7f89
55ad340609f4b302 83e4888325 f 1415a 085125e8f7cdc99f d91dbd7280373c5b
d8823e3156348f5b ae6dacd436c919c6 dd53e2 3 487da03fd 02396306d248cda0
e99f33420f577ee8 ce54b67080 2 80d1e c69821bcb6a88393 96f965 a b6ff72a70
```

这并不意味着 MD5 的算法被破解后安全性降低。可以故意创建MD5碰撞，但是意外MD5碰撞的几率还是2^128，还是很多的。

## 结论

您不必担心碰撞。散列算法是检查文件相同性的第二种最安全的方法。唯一更安全的方法是二进制比较。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-25T10:38:27.287

好吧，我想我们现在知道会发生什么——您应该期望您的存储库会损坏（[源](https://arstechnica.co.uk/security/2017/02/watershed-sha1-collision-just-broke-the-webkit-repository-others-may-follow/)）。**

# javascript - WebMatrix WebSecurity 不返回当前用户 ID

> ID：10434327
> 
> 赞同：1
> 
> 时间：2012-05-03T15:16:37.300
> 
> 标签：javascript, asp.net, cordova, razor, webmatrix

我有两个由同一个 $.ajax 请求创建的请求，但一个来自 Google Chrome，另一个来自 PhoneGap 应用程序。WebMatrix 应用程序应返回已提交其用户名和密码凭据的用户的 ID（PS：这不是应用程序的重点，但为了这个问题而简化了）。

基于浏览器的请求有效，但 PhoneGap 无效。你知道为什么吗？我已经包含了 Chrome 请求标头，但我无法获得完整的 PhoneGap 应用程序标头。

我已经找到了解决这个问题的方法，但它真的让我很烦恼，它不起作用。

WebMatrix 应用程序代码

```
if(IsPost){
        var username = Request.Form["username"];
        var password = Request.Form["password"];
        var rememberMe = Request.Form["rememberMe"].AsBool();
        var credentials = false;

        if(!username.IsEmpty() && !password.IsEmpty()){
            credentials = true;
        }

        if (credentials && WebSecurity.Login(username, password, rememberMe)) {

            Response.Write(WebSecurity.CurrentUserId);
        }
} 
```

Google Chrome 请求标头细分 -

```
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:105
Content-Type:application/x-www-form-urlencoded
Cookie:ASP.NET_SessionId=XXXXXXX
Host:xxxxxxxxxxx
Origin:file://
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19 
```

# sql - SQL Server 2008 数据库邮件

> ID：10434330
> 
> 赞同：0
> 
> 时间：2012-05-03T15:16:43.513
> 
> 标签：sql, database, email

任何人都可以帮助以下存储过程吗？我收到错误

> '@profile_name' 附近的语法不正确” SELECT distinct(EmailAddress) as RECIPIENTS, @body = Replace(@bodypre, "$Approver", Forename) FROM [STAS].[dbo].[NotifictationEmailID_View]

在查询中

```
SELECT distinct(EmailAddress) as RECIPIENTS,
      @body = Replace(@bodypre, "$Approver", Forename) 
FROM [STAS].[dbo].[NotifictationEmailID_View] 
```

这是此存储过程的一部分：

```
ALTER proc [dbo].[test]
as
begin
DECLARE @subject VARCHAR(500)
Declare @bodypre varchar(5000)
DECLARE @ProgramName VARCHAR(50)
DECLARE @FirstName VARCHAR(50)
DECLARE @body VARCHAR(5000)
DECLARE @email VARCHAR(500)
declare @recipients VARCHAR(5000)
DECLARE @CurrentRec AS INT
DECLARE @RecCount AS INT
Declare @emailStop  as int
SET @CurrentRec = 1
SET @RecCount = 0

select @subject=EmailMessageSubject,
        @bodypre = EmailMessageBody,
        @emailStop = EmailStop_Flag
from STAS.dbo.MC_STAS_EmailMessage where TimeSheetStatusID = 3 

SELECT @RecCount = COUNT(EmailAddress) FROM [STAS].[dbo].[NotifictationEmailID_View] 
if (@emailStop <> 1 AND @RecCount > 0)
    WHILE @RecCount >= @CurrentRec
    begin   
    EXEC msdb.dbo.sp_send_dbmail
    SELECT distinct(EmailAddress) as RECIPIENTS ,@body =Replace(@bodypre,"$Approver",Forename) from [STAS].[dbo].[NotifictationEmailID_View]                    
        @profile_name = "STAS Email User",
        @recipients = @RECIPIENTS,
        @subject = @SUBJECT,
        @body = @body

    SET @CurrentRec = @CurrentRec + 1
end
end 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:29:19.603

试试这个：

```
SELECT DISTINCT 
      EmailAddress as RECIPIENTS,
      @body = Replace(@bodypre, "$Approver", Forename) 
FROM [STAS].[dbo].[NotifictationEmailID_View] 
```

`DISTINCT`不是一个可以像以前那样调用的函数——它是一个 SQL 关键字。

# php - Imagemagick - 相对于另一个形状位置绘制形状

> ID：10434331
> 
> 赞同：0
> 
> 时间：2012-05-03T15:16:50.490
> 
> 标签：php, imagemagick, exec

在 Imagemagick 中是否可以绘制形状或文本并将其相对于另一个形状位置而不是画布相对位置放置。

我不知道每个形状的大小。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:29:24.413

你的意思是重新页面选项？[http://www.imagemagick.org/script/command-line-options.php?#repage](http://www.imagemagick.org/script/command-line-options.php?#repage)

# javascript - 无法在网页上显示的 HTML 段落上覆盖图像图标

> ID：10434332
> 
> 赞同：0
> 
> 时间：2012-05-03T15:16:51.847
> 
> 标签：javascript, jquery, html, css

我正在尝试在单击鼠标按钮时在 HTML 页面上插入图像。此图像指示用于打开便笺的标签。我能够弄清楚如何在鼠标诅咒位置插入图像。但是，我不确定是否可以在 HTML 页面的任何位置插入图像。我们可以在段落上叠加这张图片吗？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:22:36.803

```
.overlay_img {
   position: absolute;
   z-index: 9999;
}

$('body').on('click', function(e) {
  $(this).append($('<img/>', {
                      className: 'overlay_img'
                      style: 'left: '+ e.pageX +'px; top: '+ e.pageY +'px',
                      src: 'SOMETHING',
                      alt: 'SOMETHING'
                   })
                );
}); 
```

您还可以使用：

```
$('body').on('click', function(e) {
   $(this).append('<img src="" class="something" alt="some" style="left: '+ e.pageX +'px; top: '+ e.pageY +'px"/>');
}); 
```

例如，我将图像附加到`body`，您可以将其附加到任何目标。

# generics - 如何在“where”子句中给出表达式泛型类型？

> ID：10434333
> 
> 赞同：7
> 
> 时间：2012-05-03T15:16:59.017
> 
> 标签：generics, haskell, types, where-clause, type-declaration

[*（请原谅这个可怕的人为的例子）*]

我想要做的是在 where 子句中指定类型：

```
somemap :: (a -> b) -> [a] -> [b]
somemap f xs = ys
  where
    some = take 5 xs :: [a]
    ys = map f some :: [b] 
```

但这会导致错误：

```
*Main> :load file.hs 
[1 of 1] Compiling Main             ( file.hs, interpreted )

fil.hs:15:18:
    Couldn't match expected type `a1' against inferred type `a'
      `a1' is a rigid type variable bound by
           an expression type signature at file.hs:15:25
      `a' is a rigid type variable bound by
          the type signature for `somemap' at file.hs:12:12
      Expected type: [a1]
      Inferred type: [a]
    In the second argument of `take', namely `xs'
    In the expression: take 5 xs :: [a]

file.hs:16:13:
    Couldn't match expected type `b1' against inferred type `b'
      `b1' is a rigid type variable bound by
           an expression type signature at file.hs:16:24
      `b' is a rigid type variable bound by
          the type signature for `somemap' at file.hs:12:17
    In the first argument of `map', namely `f'
    In the expression: map f some :: [b]
    In the definition of `ys': ys = map f some :: [b]
Failed, modules loaded: none. 
```

而如果我只是指定具体类型，替换`Int`为`a`和`Bool`，`b`没问题：

```
somemap :: (Int -> Bool) -> [Int] -> [Bool]
somemap f xs = ys
  where
    some = take 5 xs :: [Int]
    ys = map f some :: [Bool] 
```

所以我的问题是：**如何在 where 子句中指定泛型类型和类型约束？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T15:18:51.933

在`where`子句内部，类型变量`a`和`b`是*新*的类型变量；类型变量没有作用域，因此每个类型签名都有新的供应，就像它们是在顶层定义的一样。

如果您打开`ScopedTypeVariables`扩展名（放在`{-# LANGUAGE ScopedTypeVariables #-}`文件顶部），并将`somemap`类型声明更改为：

```
somemap :: forall a b. (a -> b) -> [a] -> [b] 
```

那么`where`您指定的子句定义将正常工作。我认为`forall`s 仅用于向后兼容，因此在`where`子句中为多态值重用类型变量的代码不会中断。

如果您不想使用扩展，另一种方法是定义丑陋的辅助函数来统一类型，例如[`asTypeOf`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:asTypeOf).

# c++ - H 中的 C++/ 参数。文件

> ID：10434334
> 
> 赞同：0
> 
> 时间：2012-05-03T15:17:03.340
> 
> 标签：c++

我读了一本书，其中给出了 .h 文件的示例，它相当于 java 中的队列接口：

```
void InitQueue(Queue* pQueue, int iSize);
bool Insert(Queue* pQueue, const Item* pItem);
bool Extract(Queue* pQueue, Item** pItem);
bool GetFirst(const Queue* pQueue, Item** pItem);
bool IsFull(const Queue* pQueue);
bool IsEmpty(const Queue* pQueue); 
```

我不明白两件事：

1.  为什么在`Extract, GetFirst`第二个参数是类型`Item**`而不是`Item*`？当我们写这样的事情时是什么意思？
2.  为什么在某些函数 ( `IsFull, IsEmpty`, ..) 我们得到参数`const Queue*`而不是简单的`Queue*`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:26:43.480

IsFull() 和 IsEmpty() 采用 const 参数，因为这意味着它们不会更改 Queue 对象；它是恒定的，不会被修改。

Extract 和 GetFirst 使用 ** 是因为：

```
int a;           // Declares an int
a = 2;           // Sets a to 2
int *b = &a;     // Declares a pointer pointing to that int
*b = 4;          // Sets a to 4
int **c = &b;    // Declares a pointer pointing to that pointer to that int
**c = 6;         // Sets a to 6 
```

如果我要将 c 传递给函数：

```
int global_var;

int main() {
  modify_ptr(c);
}

void modify_ptr(int **ptr)
{
  *ptr = &global_var;
} 
```

我刚刚传入的指针本身就被修改了；**c 现在指向 global_var 而不是 a。

将这些指针传递给 getfirst 和 extract 的原因是因为它们是“getter”函数——您希望它们返回指向数据的指针。所以他们需要能够返回一个指针，并且他们采用的方法是将一个指针传递给一个指针，就像上面的例子一样，所以他们可以修改你传递给他们的内容以指向正确的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:21:36.783

**为什么在`Extract`，`GetFirst`第二个参数是类型`Item**`而不是`Item*`？我们写这样的东西是什么意思？**

这样就可以在函数内部更改指针。
最有可能的是，这意味着`Item`指针将由调用者传递，但将在函数内部分配。您不能只通过值传递指针来做到这一点，因为这会将内存分配给指针的副本，而不是传递的原始指针。

很难说程序员为什么使用调用者传递指针和分配它的函数的这种语义。理想情况下，人们会期望一种源-接收器机制。

**为什么在某些函数（`IsFull`, `IsEmpty`, ..）中我们得到参数`const Queue*`而不是简单的`Queue*`？**

为了**[const 正确性](http://www.parashift.com/c++-faq-lite/const-correctness.html)**！
它向函数的用户表明指向的数据在函数内部不会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:25:16.817

> 为什么在 Extract 中，GetFirst 第二个参数的类型是 Item** 而不是 Item*？当我们写这样的事情时是什么意思？

这些是输出。队列显然包含一堆指向项目的指针。因为它是一个指针，所以我会只使用一个参数`Extract`并`GetFirst`返回一个指针。空指针将指示失败。开发人员没有这样做。相反，他们使用了旧的 C 风格的范例。为什么？谁知道。这不是写这些的最好方法。

> 为什么在某些函数（IsFull、IsEmpty、..）中我们得到参数 const Queue* 而不仅仅是 Queue*？

将参数标记为`const`告诉代码的用户该函数不会对参数的内容做任何事情。将此类未受干扰的引用和指针参数标记为`const`良好的编程习惯。

# vba - VBA 中的文本文件：打开/查找替换/另存为/关闭文件

> ID：10434335
> 
> 赞同：11
> 
> 时间：2012-05-03T15:17:07.707
> 
> 标签：vba, text-files

这是我希望做的伪代码：

```
Open text File

Find "XXXXX" and Replace with "YYYY"

Save text File As

Close text file 
```

这是我到目前为止所拥有的

```
Private Sub CommandButton1_Click()

Dim sBuf As String
Dim sTemp As String
Dim iFileNum As Integer
Dim sFileName As String

' Edit as needed
sFileName = "C:\filelocation"

iFileNum = FreeFile
Open sFileName For Input As iFileNum

Do Until EOF(iFileNum)
Line Input #iFileNum, sBuf
sTemp = sTemp & sBuf & vbCrLf
Loop
Close iFileNum

sTemp = Replace(sTemp, "DIM A", "1.75")
sTemp = Replace(sTemp, "DIM B", "2.00")
sTemp = Replace(sTemp, "DIM C", "3.00")
sTemp = Replace(sTemp, "DIM D", "4.00")

'Save txt file as (if possible)

iFileNum = FreeFile
Open sFileName For Output As iFileNum

Print #iFileNum, sTemp

Close iFileNum

'Close Userform
Unload UserForm1

End Sub 
```

但我不想覆盖原始文本文件，而是想“另存为”到一个新文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-04-22T18:52:22.127

估计我来晚了...

今天遇到同样的问题；这是我的解决方案`FileSystemObject`：

```
Dim objFSO
Const ForReading = 1
Const ForWriting = 2
Dim objTS 'define a TextStream object
Dim strContents As String
Dim fileSpec As String

fileSpec = "C:\Temp\test.txt"
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTS = objFSO.OpenTextFile(fileSpec, ForReading)
strContents = objTS.ReadAll
strContents = Replace(strContents, "XXXXX", "YYYY")
objTS.Close

Set objTS = objFSO.OpenTextFile(fileSpec, ForWriting)
objTS.Write strContents
objTS.Close 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T15:50:06.483

为什么涉及记事本？

```
Sub ReplaceStringInFile()

Dim sBuf As String
Dim sTemp As String
Dim iFileNum As Integer
Dim sFileName As String

' Edit as needed
sFileName = "C:\Temp\test.txt"

iFileNum = FreeFile
Open sFileName For Input As iFileNum

Do Until EOF(iFileNum)
    Line Input #iFileNum, sBuf
    sTemp = sTemp & sBuf & vbCrLf
Loop
Close iFileNum

sTemp = Replace(sTemp, "THIS", "THAT")

iFileNum = FreeFile
Open sFileName For Output As iFileNum
Print #iFileNum, sTemp
Close iFileNum

End Sub 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-03T17:44:05.550

只需添加这一行

```
sFileName = "C:\someotherfilelocation" 
```

就在这条线之前

```
Open sFileName For Output As iFileNum 
```

这个想法是打开并写入与您之前阅读的文件*不同*的文件（`C:\filelocation`）。

如果您想花哨并显示一个真正的“另存为”对话框，您可以这样做：

```
sFileName = Application.GetSaveAsFilename() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-05T15:05:35.797

我遇到了同样的问题并遇到了这个网站。

只需在

...**输出为**... 命令非常简单且有用。

此外（在 Application.GetSaveAsFilename() 对话框之外）

设置一个**新文件名**非常简单，只需使用

**替换**命令，因此您可以更改文件名/扩展名

例如。（从第一篇文章开始）

```
sFileName = "C:\filelocation"
iFileNum = FreeFile

Open sFileName For Input As iFileNum
content = (...edit the content) 

Close iFileNum 
```

**现在只需设置：**

newFilename = replace(sFilename, ".txt", ".csv") *更改扩展名*

或者

newFilename = replace(sFilename, ".", "_edit.") *用于不同的文件名*

然后就像以前一样

```
iFileNum = FreeFile
Open newFileName For Output As iFileNum

Print #iFileNum, content
Close iFileNum 
```

我浏览了一个多小时来了解如何重命名 txt 文件，

有许多不同的解决方案，但这可能很容易:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T15:37:00.527

此代码将打开并读取完整文本文件的行该变量“ReadedData”将文本行保存在内存中

```
Open "C:\satheesh\myfile\Hello.txt" For Input As #1

do until EOF(1)   

       Input #1, ReadedData
loop** 
```

# wpf - 确定打开的 WPF 窗口是否在任何监视器上可见

> ID：10434338
> 
> 赞同：10
> 
> 时间：2012-05-03T15:17:13.670
> 
> 标签：wpf, interop, desktop, dpi

有没有办法确定打开的 WPF 窗口当前是否在任何桌面连接的监视器中可见？可见是指窗口的边界矩形与任何监视器的桌面矩形相交。

我需要此功能来确定是否需要重新定位窗口，因为监视器配置（工作区域边界，监视器计数）在我的应用程序重新启动（保存窗口位置）之间发生了变化。

我想出了下面的代码，它似乎工作，但它有几个问题：

1.  我需要参考 windows 窗体。
2.  我需要桌面的 DPI 设置并将窗口窗体实际像素转换为 WPF 虚拟像素。
3.  我需要一个已经渲染的实际 Visual 实例来执行转换。

您是否知道可以摆脱上述 3 个问题中的部分或全部的解决方案？

```
using System.Collections.Generic;
using System.Linq;
using System.Windows;
using System.Windows.Forms;
using System.Windows.Media;

internal static class Desktop
{
    private static Size dpiFactor = new Size(1.0, 1.0);
    private static bool isInitialized;

    public static IEnumerable<Rect> WorkingAreas
    {
        get
        {
            return
                Screen.AllScreens.Select(
                    screen =>
                    new Rect(
                        screen.WorkingArea.Left * dpiFactor.Width,
                        screen.WorkingArea.Top * dpiFactor.Height,
                        screen.WorkingArea.Width * dpiFactor.Width,
                        screen.WorkingArea.Height * dpiFactor.Height));
        }
    }

    public static void TryInitialize(Visual visual)
    {
        if (isInitialized)
        {
            return;
        }

        var ps = PresentationSource.FromVisual(visual);
        if (ps == null)
        {
            return;
        }

        var ct = ps.CompositionTarget;
        if (ct == null)
        {
            return;
        }

        var m = ct.TransformToDevice;
        dpiFactor = new Size(m.M11, m.M22);
        isInitialized = true;
    }
} 
```

`Desktop`（初始化的）类的用法：

```
 private bool IsLocationValid(Rect windowRectangle)
    {
        foreach (var workingArea in Desktop.WorkingAreas)
        {
            var intersection = Rect.Intersect(windowRectangle, workingArea);
            var minVisible = new Size(10.0, 10.0);
            if (intersection.Width >= minVisible.Width && 
                intersection.Height >= minVisible.Height)
            {
                return true;
            }
        }

        return false;
    } 
```

***更新***

使用虚拟屏幕 ( `SystemParameters.VirtualScreen*`) 不起作用，因为在使用多个显示器时，“桌面”不是一个简单的矩形。它可能是一个多边形。虚拟屏幕会有盲点，因为

1.  连接的屏幕可以有不同的分辨率
2.  您可以配置每个屏幕的位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T17:06:11.927

我们用来做类似事情的代码使用来自[SystemParameters](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.aspx)的信息，特别是 SystemParameter.VirtualScreenLeft、Top、Width 和 Height。

如果我们保存了位置和大小，那么我们确定窗口是否超出范围，如下所示：

```
bool outOfBounds =
    (location.X <= SystemParameters.VirtualScreenLeft - size.Width) ||
    (location.Y <= SystemParameters.VirtualScreenTop - size.Height) ||
    (SystemParameters.VirtualScreenLeft + 
        SystemParameters.VirtualScreenWidth <= location.X) ||
    (SystemParameters.VirtualScreenTop + 
        SystemParameters.VirtualScreenHeight <= location.Y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T13:35:50.317

我在启动时使用在我的 WPF 项目中剪断的这段代码；它是用 vb.net 编写的：

```
If My.Settings.RememberWindowPositionAndSize Then
    If My.Settings.winMainWinState > 2 Then My.Settings.winMainWinState = WindowState.Normal
    If My.Settings.winMainWinState = WindowState.Minimized Then My.Settings.winMainWinState = WindowState.Normal
    Me.WindowState = My.Settings.winMainWinState
    If My.Settings.winMainWinState = WindowState.Normal Then
        Dim winBounds As New System.Drawing.Rectangle(CInt(My.Settings.winMainPosX), CInt(My.Settings.winMainPosY),
                                                      CInt(My.Settings.winMainSizeB), CInt(My.Settings.winMainSizeH))
        For Each scr As System.Windows.Forms.Screen In System.Windows.Forms.Screen.AllScreens
            If winBounds.IntersectsWith(scr.Bounds) Then
                Me.Width = My.Settings.winMainSizeB
                Me.Height = My.Settings.winMainSizeH
                Me.Top = My.Settings.winMainPosY
                Me.Left = My.Settings.winMainPosX
                Exit For
            End If
        Next
    End If
End If 
```

这是 C# 中相同的（转换后的）代码

```
if (My.Settings.RememberWindowPositionAndSize) {
    if (My.Settings.winMainWinState > 2)
        My.Settings.winMainWinState = WindowState.Normal;
    if (My.Settings.winMainWinState == WindowState.Minimized)
        My.Settings.winMainWinState = WindowState.Normal;
    this.WindowState = My.Settings.winMainWinState;

    if (My.Settings.winMainWinState == WindowState.Normal) {
        System.Drawing.Rectangle winBounds = new System.Drawing.Rectangle(Convert.ToInt32(My.Settings.winMainPosX), Convert.ToInt32(My.Settings.winMainPosY), Convert.ToInt32(My.Settings.winMainSizeB), Convert.ToInt32(My.Settings.winMainSizeH));

        foreach (System.Windows.Forms.Screen scr in System.Windows.Forms.Screen.AllScreens) {
            if (winBounds.IntersectsWith(scr.Bounds)) {
                this.Width = My.Settings.winMainSizeB;
                this.Height = My.Settings.winMainSizeH;
                this.Top = My.Settings.winMainPosY;
                this.Left = My.Settings.winMainPosX;
                break;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-21T12:58:27.707

此代码检查窗口左上角是否位于虚拟屏幕框（包含所有可用屏幕的矩形）内。它还负责坐标可能为负的多显示器设置，例如右侧或底部的主显示器。

```
bool valid_position =
SystemParameters.VirtualScreenLeft <= saved_location.X &&
(SystemParameters.VirtualScreenLeft + SystemParameters.VirtualScreenWidth) >= saved_location.X &&
SystemParameters.VirtualScreenTop <= saved_location.Y &&
(SystemParameters.VirtualScreenTop + SystemParameters.VirtualScreenHeight) >= saved_location.Y; 
```

# jquery - Google Maps V2 到 V3 标记点击覆盖不起作用（JQuery）

> ID：10434339
> 
> 赞同：1
> 
> 时间：2012-05-03T15:17:20.703
> 
> 标签：jquery, google-maps, overlay

我一直在研究这个有一段时间了，我就是想不通。我有谷歌地图代码，我正试图从 V2 引入 V3。我有一切工作，但覆盖取代了正常的信息窗口。这一行：

```
$("#infoCallout").appendTo(map.getPane(G_MAP_FLOAT_SHADOW_PANE)); 
```

不再适用于 V3。$("#infoCallout") 是隐藏的 div。现在叠加层只显示在左上角......

看看我到目前为止有什么：http: [//empulseforum.com/brammoMapV3.php](http://empulseforum.com/brammoMapV3.php)

在 V2 中工作就好了：http: [//brammoforum.com/brammo-owners-map.php](http://brammoforum.com/brammo-owners-map.php)

我觉得我错过了一些简单的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:49:59.410

首先，当我在您的链接上查看新站点时，页面会抛出：**Uncaught ReferenceError: markerOffset is not defined** at line 73，即（重新格式化）：

```
$("#infoCallout").fadeIn('slow').css({
    top:  markerOffset.y + -107,
    left: markerOffset.x - 40 }); 
```

很容易看出，如果没有 ，这段代码将永远无法工作`markerOffset`，因为上一行（第 72 行）的代码被注释掉了，所以没有定义它：

```
//var markerOffset = map.fromLatLngToDivPixel(markers.getPosition()); 
```

因此，您必须取消注释第 72 行的代码并重构它以通过 v3 api 工作：

1.  内部调用：`markers.getPosition()`在 v3 中仍然有效；到目前为止，一切都很好
2.  外部调用：`map.fromLatLngToDivPixel()`在 v3 中不再存在；this 和相关的调用已移入类：`google.maps.MapCanvasProjection`. 投影可通过调用：`OverlayView.getProjection()`。

综合起来，我建议您尝试将`displayPoint`函数中的代码更改为：

```
function displayPoint( markers, index ) {
    map.panTo( markers.getPosition() );
    $("#infoCallout").hide();
    updateMemberInfo( pic[index], dN[index], bID[index], cS[index] );

    // Next 2 lines are new and replace the old line of code:
    var prjctn = overlay.getProjection();        
    var markerOffset = prjctn.fromLatLngToDivPixel( markers.getPosition() );

    $( "#infoCallout" ).fadeIn( 'slow' ).css({
        top:  markerOffset.y + -107,
        left: markerOffset.x -40
    });
} 
```

显然，这段代码未经测试，因此您可能需要进行一些调试，但我希望这段代码能让您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:16:07.720

使用[OverlayView](https://developers.google.com/maps/documentation/javascript/reference#OverlayView)的`fromLatLngToContainerPixel`方法。

# php - 实现不同类型的接口

> ID：10434342
> 
> 赞同：2
> 
> 时间：2012-05-03T15:17:35.273
> 
> 标签：php, oop

我想要一个允许泛型类型的接口

```
public function persist($object); 
```

但是我的具体实现有一个类型

```
public function persist(User $user); 
```

根据我对 PHP 的理解，这是不可能的。从面向对象设计的角度来看，有人可以向我解释为什么我所做的事情是被误导和错误的。

编辑：我应该澄清一下，我知道类型提示以及它是如何工作的，我的问题实际上是试图从 OO 的角度理解当我希望我的具体实现对接口采用不同类型时我会出错的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:42:03.527

接口的目的是成为类之间的契约。如果多个具体类实现了接口，那么接口将毫无用处，但都期望不同的输入。通过查看接口，您将不知道实现类期望什么类型的输入，从而使接口基本上无用。您不能互换都使用相同接口的不同具体类，因为它们都期望不同的输入（具有不同的接口）。

我不能用 classB 替换 classA 以保证它们都可以工作，因为它们都有相同的接口。这基本上会使接口对人类已知的每种 OOP 模式都无用。

**编辑示例**

```
class CommandList {

    public function addCommand(Command $command) {
        $this->commands[] = $command;
    }

    public function runCommands() {
        foreach ($this->commands as $command) $command->run($this);
    }
}

interface Command {
    public function run(CommandList $commandList);
}

class Hop implements Command {
    public function run(CommandList $commandList) {
        // hop here
    }
}

class Skip implements Command {
    public function run(CommandList $commandList) {
        // skip here
    }
} 
```

看看接口如何充当合同？如果你打破这种联系，那么实现 Command 的东西就不能互换。

# ember.js - 使用#each 更新和构建时，IE8 上的表搞砸了

> ID：10434343
> 
> 赞同：1
> 
> 时间：2012-05-03T15:17:38.347
> 
> 标签：ember.js

我想构建一个表，其中每一行都引用一个 Ember 对象，并使用它来填充每一列。

我构建了一个简单的 jsfiddle 来举例说明：

[http://jsfiddle.net/marklazz/yth8C/](http://jsfiddle.net/marklazz/yth8C/)

这适用于 Chrome、FF 和 IE9。

但正如您所注意到的，在 IE8 中，表格呈现在它开始的下方......就像它被推到底部......

通过检查最终的 HTML，在我看来它与 ember 插入的“害羞”元素有关，可能是这样吗？

# hadoop - hadoop 流在 hadoop 1.0.0 中因简单映射和减少作业（使用 nltk 代码）而失败

> ID：10434346
> 
> 赞同：0
> 
> 时间：2012-05-03T15:17:47.477
> 
> 标签：hadoop

我的执行代码和输出

```
[hduser@Janardhan hadoop]$ bin/hadoop jar contrib/streaming/hadoop-streaming-1.0.0.jar -file /home/hduser/mapper.py -mapper mapper.py -file /home/hduser/reducer.py -reducer reducer.py -input /user/hduser/input.txt -output /home/hduser/outpututttt

 Warning: $HADOOP_HOME is deprecated.

    packageJobJar: [/home/hduser/mapper.py, /home/hduser/reducer.py, /app/hadoop/tmp/hadoop-unjar2185859252991058106/] [] /tmp/streamjob2973484922110272968.jar tmpDir=null
    12/05/03 20:36:02 INFO mapred.FileInputFormat: Total input paths to process : 1
    12/05/03 20:36:03 INFO streaming.StreamJob: getLocalDirs(): [/app/hadoop/tmp/mapred/local]
    12/05/03 20:36:03 INFO streaming.StreamJob: Running job: job_201205032014_0003
    12/05/03 20:36:03 INFO streaming.StreamJob: To kill this job, run:
    12/05/03 20:36:03 INFO streaming.StreamJob: /usr/local/hadoop/libexec/../bin/hadoop job  -Dmapred.job.tracker=localhost:54311 -kill job_201205032014_0003
    12/05/03 20:36:03 INFO streaming.StreamJob: Tracking URL: http://localhost.localdomain:50030/jobdetails.jsp?jobid=job_201205032014_0003
    12/05/03 20:36:04 INFO streaming.StreamJob:  map 0%  reduce 0%
    12/05/03 20:36:21 INFO streaming.StreamJob:  map 100%  reduce 0%
    12/05/03 20:36:24 INFO streaming.StreamJob:  map 0%  reduce 0%
    12/05/03 20:37:00 INFO streaming.StreamJob:  map 100%  reduce 100%
    12/05/03 20:37:00 INFO streaming.StreamJob: To kill this job, run:
    12/05/03 20:37:00 INFO streaming.StreamJob: /usr/local/hadoop/libexec/../bin/hadoop job  -Dmapred.job.tracker=localhost:54311 -kill job_201205032014_0003
    12/05/03 20:37:00 INFO streaming.StreamJob: Tracking URL: http://localhost.localdomain:50030/jobdetails.jsp?jobid=job_201205032014_0003
    12/05/03 20:37:00 ERROR streaming.StreamJob: Job not successful. Error: # of failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201205032014_0003_m_000000
    12/05/03 20:37:00 INFO streaming.StreamJob: killJob...
    Streaming Job Failed! 
```

这是我从工作跟踪器得到的错误：

```
java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 1
    at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:311)
    at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:545)
    at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:132)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
    at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:36)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

它使用以下代码在本地工作：

```
 [hduser@Janardhan ~]$ cat input.txt | ./mapper.py | sort | ./reducer.py 
('be', 'VB')    1
('ceremony', 'NN')  1
('first', 'JJ')     2
('for', 'IN')   2
('hi', 'NN')    1
('place', 'NN')     1
('the', 'DT')   2
('welcome', 'VBD')  1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:27:56.583

您需要通过检查 map 和 reduce 任务失败的数据节点上的 stderr 日志来进行调试。当本地运行的作业在集群上失败时，这些通常会提供很多信息。

您应该能够通过 hadoop 集群的 jobtracker Web 界面访问日志，通常位于[http://master.node.ip.address:50030/jobtracker.jsp](http://master.node.ip.address:50030/jobtracker.jsp)。您的工作应显示在“失败的工作”下。单击作业 ID，然后单击“失败”列中的 map 或 reduce 任务，您应该会看到日志。

请注意，如果 mapper.py 和 reducer.py 不可执行（第一行 #!/usr/bin/python，文件属性设置正确），您可能需要将参数更改为“-mapper 'python mapper.py'”，等等

# c# - 为什么当控件没有进行完整的回发时动态创建的用户控件会消失？

> ID：10434350
> 
> 赞同：2
> 
> 时间：2012-05-03T15:17:54.093
> 
> 标签：c#, asp.net, user-controls, updatepanel

根据我目前的理解，当您拥有 UpdatePanel 控件时，没有完整的回发。因此，如果我动态添加自定义用户控件并且它们的代码中更新了 UpdatePanel，它们不应该从它们加载到的页面中消失，对吗？显然不是。我做了一个简单的项目来测试，但我的动态控件在单击时仍然消失，即使它们不应该触发完整的回发。我有一个加载控件的 aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TESTmultipleScriptManagerControls.aspx.cs" Inherits="myPlayground.TESTmultipleScriptManagerControls" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>

    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />

    <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
    </ContentTemplate>
    </asp:UpdatePanel>

</div>
</form>
</body>
</html> 
```

后面有以下代码：

```
protected void Button1_Click(object sender, EventArgs e)
    {

        TESTcontrol1 temp = LoadControl("TESTcontrol1.ascx") as TESTcontrol1;
        PlaceHolder1.Controls.Add(temp);
        TESTcontrol1 temp2 = LoadControl("TESTcontrol1.ascx") as TESTcontrol1;
        PlaceHolder1.Controls.Add(temp2);

    } 
```

和一个简单的用户控件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="TESTcontrol1.ascx.cs" Inherits="myPlayground.TESTcontrol1" %>
<asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server">
</asp:ScriptManagerProxy>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">

<ContentTemplate>
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</ContentTemplate>
</asp:UpdatePanel> 
```

后面有以下代码：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = System.DateTime.Now.ToString();
    } 
```

即使不应该触发回发，关于为什么控件消失的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:35:32.270

到**[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)**结束时，生成的所有控件都`Runtime/Compile Time`将是`Disposed`.

以下是页面事件。请`BreakPoint`在每个 Event 上设置，您可以发现在每个 Event 上`Asynchronous/Synchronous Request`，所有这些`Page Events`都在执行。

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
}

protected override void OnPreInit(EventArgs e)
{
    base.OnPreInit(e);
}

protected override void OnPreLoad(EventArgs e)
{
    base.OnPreLoad(e);
}
protected void Page_Load(object sender, EventArgs e)
{

}
protected override void OnLoadComplete(EventArgs e)
{
    base.OnLoadComplete(e);
}

protected override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);
}

protected override void Render(HtmlTextWriter writer)
{
    base.Render(writer);
}

protected override void OnUnload(EventArgs e)
{
    base.OnUnload(e);
} 
```

您需要在每个上填充它们`Page Init event`以保持不变`Viewstate`，在按钮单击期间添加到更新面板内的控件的事件似乎直到下一次才会注册`Postback`。我的建议是保留您动态添加的内容的列表，并将其存储在会话变量中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:53:41.787

> 好的，根据我目前的理解，当你有一个 UpdatePanel 控件时，没有完整的回发。

从 UpdatePanel 触发的回发始终执行整个页面生命周期。所有事件都正常触发。是否使用 UpdatePanel 没有区别。每次以编程方式添加控件时，您都需要在每次回发时重新添加它。

[阅读这篇文章](http://encosia.com/are-you-making-these-3-common-aspnet-ajax-mistakes/)，它可以帮助你更好地理解这里发生了什么。

# asp.net-mvc-3 - 使用 mvc 3 源代码进行调试

> ID：10434356
> 
> 赞同：-1
> 
> 时间：2012-05-03T15:18:06.960
> 
> 标签：asp.net-mvc-3, debugging, razor

我已经下载了 mvc3 源代码并尝试将其添加到现有项目中，以便我可以调试。我收到以下编译错误 - 未找到引用的程序集 System.Web.WebPages.dll。如果此程序集是由您的另一个项目生成的，请确保在构建该项目之前构建该项目。这些dll不附带源代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:26:38.157

在`mvc3-rtm-sources.zip`你下载的里面有2个文件夹：

*   mvc3
*   网页

它是`webpages`包含 WebMatrix 内容（System.Web.Helpers、System.Web.Razor、System.Web.WebPages，...）的文件夹。因此，请确保您首先编译了这些项目。

# jailbreak - 如何进行 Mobile Substrate 调整（从顶部滑动） 通知中心

> ID：10434358
> 
> 赞同：0
> 
> 时间：2012-05-03T15:18:15.747
> 
> 标签：jailbreak, tweak

我是一名 whited00r 开发人员，我正在为 iPhone 2g/3g WHITED00r 用户创建一个通知系统（NS），我已经制作了一个（NSCENTER），但这并不是一个真正的调整......

我想做一个移动基板调整，如果你从顶部滑动它会显示调整（激活器），但我不知道该怎么做。有人可以帮忙吗？或样品？或文字帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:35:35.803

假设我对您的理解正确，您基本上是在寻找替换通知中心滑动手势动作来展示您的调整，对吗？如果是这种情况，`SBBulletinListController`有您正在寻找的方法：

```
-(void)handleShowNotificationsGestureBeganWithTouchLocation:(CGPoint)touchLocation;
-(void)handleShowNotificationsGestureChangedWithTouchLocation:(CGPoint)touchLocation velocity:(CGPoint)velocity;
-(void)handleShowNotificationsGestureEndedWithVelocity:(CGPoint)velocity completion:(id)completion;
-(void)handleShowNotificationsGestureCanceled; 
```

您还可以尝试相应的方法`Springboard`：

```
-(void)handleShowNotificationsSystemGesture:(id)gesture;
-(void)handleHideNotificationsSystemGesture:(id)gesture;
-(void)_showNotificationsGestureBeganWithLocation:(CGPoint)location;
-(void)_showNotificationsGestureChangedWithLocation:(CGPoint)location velocity:(CGPoint)velocity;
-(void)_showNotificationsGestureEndedWithLocation:(CGPoint)location velocity:(CGPoint)velocity;
-(void)_showNotificationsGestureFailed;
-(void)_showNotificationsGestureCancelled;
-(void)_hideNotificationsGestureBegan:(float)began;
-(void)_hideNotificationsGestureChanged:(float)changed;
-(void)_hideNotificationsGestureEndedWithCompletionType:(int)completionType velocity:(CGPoint)velocity;
-(void)_hideNotificationsGestureCancelled; 
```

尝试使用 MobileSubstrate 连接那些。我自己没有尝试过，但它应该为您指明正确的方向。

# java - 使用 JavaScript 可视化 Java 程序

> ID：10434361
> 
> 赞同：0
> 
> 时间：2012-05-03T15:18:17.083
> 
> 标签：java, javascript, raphael, visualization

[我有一个程序允许脚本文件在Tic Tac Toe](http://en.wikipedia.org/wiki/Tic-tac-toe)等游戏中相互“竞争” 。

可视化是在控制台中进行的，看起来像这样：

```
|  XO |
| OX O|
|  X  |
- X is the winner! Meh.. 
```

不是很令人兴奋。

我正在考虑制作一个 Swing 可视化，但是在看到[Raphaël JavaScript 矢量图形库](http://raphaeljs.com/)的演示文稿后，我决定制作基于浏览器的可视化浏览器会很酷，即使所有东西都将在同一台计算机上运行。

我需要一个成熟的网络服务器来适应这个吗？JavaScript 如何与 Java 程序通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:21:28.033

> 我需要一个成熟的网络服务器来适应这个吗？JavaScript 如何与 Java 程序通信？

如果您要托管 JavaScript 并在浏览器中显示，那么是的，浏览器需要能够通过 HTTP 请求从 Java 请求数据。尽管浏览器可以通过`file:///`URI 加载数据，但动态处理这些请求是（相当）尴尬的。

不过，安装 Web 服务器很简单。[Tomcat](http://tomcat.apache.org/)易于安装，如果您愿意，还有其他几个选项，例如[TJWS](http://tjws.sourceforge.net/)（无关系）、[Winstone](http://winstone.sourceforge.net/)、[LiteWebServer](http://www.gefionsoftware.com/LiteWebServer/)、[Jetty](http://jetty.codehaus.org/jetty/) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:29:11.420

如果您被迫为游戏引擎运行 Java，我建议您使用[Jetty](http://docs.codehaus.org/display/JETTY/Jetty+Wiki)让您能够为来自浏览器的 HTTP 请求提供服务。这一切都嵌入在您的应用程序中，不必将您的应用程序打包为 WAR 并在您每次进行更改时部署它。

[编辑] 只需阅读有关[Tiny Java Web Sever](http://tjws.sourceforge.net/)的信息，如果您需要更小的占用空间，它也可以作为 Jetty 的替代品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T16:17:46.687

构建 Swing 界面将是最直接的解决方案，但这也可能是最混乱的解决方案。

如果您已经有一个 Web 服务器正在运行，那么 Web 浏览器解决方案可能是最令人满意的，但是设置和正确理解有很多开销。再说一次，你有不同的技术层可以使用并在（java、JSP、HTML、javascript、css 等）中感到困惑。

如今，有了 HTML5 和可用的 javascript 库，我认为 Web 界面是大多数界面的最佳选择，因此您不妨设置您的机器并将其用于下一个项目。

服务器 (Java) 和浏览器之间的任何通信都将通过来自浏览器的 HTTP 请求进行。

这可能以两种方式发生：

a) 通过按下浏览器 HTML 页面上的提交按钮并在服务器上呈现 HTML 页面作为响应（通常通过 JSP 之类的服务器端脚本，尽管您可以通过 java 代码生成整个页面）

b) 通过在 javascript 中使用 Ajax 对服务器进行异步调用，服务器将响应数据，然后您可以使用 javascript 解释和呈现这些数据（可能是您尝试做的最佳解决方案）。有许多现成的 javascript 库可以帮助您解决这个问题，包括 jQuery。

在方法 b 中，您实际上将在服务器端等待来自浏览器的帖子，然后您将使用 XML、json 甚至纯文本编写的页面进行响应。然后，您的 javascript 代码将解释数据并将其呈现在浏览器 HTML 页面上（您将在应用程序的起点加载该页面）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T16:19:52.907

[Javascript 可以与页面上的 Java 小程序通信](http://www.raditha.com/java/javascript.php)（至少在理论上）。Java 小程序在加载时会抛出警告，并要求在机器上安装 Java。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T15:21:43.247

是的，需要一个网络服务器。Javascript 可能会作为 html 表单的一部分运行。如果需要任何 Java 端处理，则需要 Web 服务器。由于 html/javascript 无法与独立的 java 程序进行通信。但是为什么需要一个 java 服务器端程序呢？逻辑不能完全用java脚本编写吗？

# iphone - phonegap 相机适用于 iPhone，但不适用于 iPad

> ID：10434363
> 
> 赞同：0
> 
> 时间：2012-05-03T15:18:21.360
> 
> 标签：iphone, ipad, jquery-mobile, cordova, camera

我是 PhoneGap 的新手，我正在使用 PhoneGap + JQuery Mobile (cordova-1.7.0rc1) 构建一个应用程序。

尝试使用相机 API，我在 iPhone 上运行该应用程序，一切正常。尝试连接我的 iPad 并测试应用程序，但我在日志中看到：

> 错误：在模块“cordova/plugin/ios/device”中执行模块函数“setInfo”。您是否包含了 iOS 版本的 cordova-1.7.0rc1.js 文件？

查看PhoneGap网站，他们只有一个适用于所有iOS设备的JS......我错过了什么？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:32:39.557

来自沙兹：

您可能将 www 项目添加为一个组，而不是文件夹引用。添加为文件夹参考。另外，iOS 5 有点挑剔，先试试干净。

请参阅此图片： [http](http://docs.phonegap.com/en/1.7.0/img/guide/getting-started/ios/create-folder-reference.png) ://docs.phonegap.com/en/1.7.0/img/guide/getting-started/ios/create-folder-reference.png 来自：[http ://docs.phonegap.com/en /1.7.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/1.7.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

# c# - 我怎样才能通过字典 到字典方法？

> ID：10434364
> 
> 赞同：4
> 
> 时间：2012-05-03T15:18:26.773
> 
> 标签：c#, .net

如何将字典传递给接收字典的方法？

```
Dictionary<string,string> dic = new Dictionary<string,string>();

//Call
MyMethod(dic);

public void MyMethod(Dictionary<object, object> dObject){
    .........
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T15:20:53.060

你不能按原样传递它，但你可以传递一个副本：

```
var copy = dict.ToDictionary(p => (object)p.Key, p => (object)p.Value); 
```

让您的 API 程序采用接口而不是类通常是个好主意，如下所示：

```
public void MyMethod(IDictionary<object, object> dObject) // <== Notice the "I" 
```

这个小改动让您可以将其他类型的字典传递[`SortedList<K,T>`](http://msdn.microsoft.com/en-us/library/ms132319.aspx)给您的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:28:18.517

如果您想将字典传递给只读目的，那么您可以使用 Linq：

```
MyMethod(dic.ToDictionary(x => (object)x.Key, x => (object)x.Value)); 
```

由于类型安全的限制，您当前的方法不起作用：

```
public void MyMethod(Dictionary<object, object> dObject){
    dObject[1] = 2; // the problem is here, as the strings in your sample are expected
} 
```

# mod-rewrite - Mod重写规则

> ID：10434366
> 
> 赞同：0
> 
> 时间：2012-05-03T15:18:28.427
> 
> 标签：mod-rewrite

嗨，任何人都可以帮我解决这个重写规则。

基本上我有一个网址[http://mydomain.com/http://somewhere.com/photo.gif](http://mydomain.com/http://somewhere.com/photo.gif)我希望它被转发到这个网址： http://mydomain.com/upload.php?url= [http ://somewhere.com/photo.gif](http://mydomain.com/upload.php?url=http://somewhere.com/photo.gif)

我尝试了以下方法，但它不起作用。

```
RewriteRule ^(.*)$ upload.php?code=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:35:13.300

您尚未添加`/` for`upload.php?...`

`RewriteRule ^(.*)$ /upload.php?code=$1 [L]`如果您可以在传递给时避免使用**http://** in 将起作用`http://somewhere.com``http://mydomain.com/http://somewhere.com/`

# jax-ws - 在 JDK 6 上安装最新的 JAX-WS

> ID：10434368
> 
> 赞同：12
> 
> 时间：2012-05-03T15:18:41.363
> 
> 标签：jax-ws

我按照[此处](http://jax-ws.java.net/nonav/2.2.6/docs/ch02.html#installation-instructions)的说明在我的 JDK v1.6.0_31 之上正确安装最新的 JAX-WS 版本（2.2.6）（即将 JAX-WS 版本中的 jaxws-api.jar 和 jaxb-api.jar 复制到我的 ${JAVA_HOME}/lib/endorsed 目录）。从 Eclipse 内部，我可以正确运行 wsimport ant 任务，并且生成的代码在以下注释中给出了版本标记：

```
/**
* This class was generated by the JAX-WS RI.
* JAX-WS RI 2.2.6b21 
* Generated source version: 2.2
* 
*/ 
```

我遇到的问题是生成的客户端代码显示错误，这使我相信编译器仍在使用 JAX-WS 2.1 版：

```
The constructor Service(URL, QName, WebServiceFeature[]) is undefined 
```

和

```
The attribute required is undefined for the annotation type XmlElementRef 
```

我尝试在启动 Eclipse 时显式设置 -Djava.endorsed.dir arg，并且我还尝试在 Eclipse->Preferences->Java->InstalledJREs 下设置此arg，但这些都没有帮助。我的 wsimport ant 任务类路径被定义为查看 JAX-WS 2.2.6 jar。我还尝试设置我的项目构建路径以拉入 2.2.6 jar。似乎没有任何效果。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T16:44:25.893

不知道为什么它没有把它放在前面，他认可了 lib（除了你放置你的 libs 的认可目录可能是用于 eclipse 正在使用的不同 JRE/JDK 吗？），但关于你尝试的最后一件事......添加罐子直接到构建路径....如果您订购构建路径条目以使您的 JAX-WS jar 位于 JDK 条目之上，这将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T22:10:28.170

您已经生成了需要 JAX-WS 2.1 的代码。2.0 版没有 WebServiceFeature 类，因此在 Service 中也没有具有这种参数类型的构造函数。

如您所见，在 Java SE 6 中没有这样的构造函数：javax.xml.ws.Service SE 6，但例如在 Java EE 6 中有：javax.xml.ws.Service EE 6

![在此处输入图像描述](../Images/78fa4dc69d6c29bdf2c8d949929edfcf.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-22T13:52:53.363

如果可能，一种解决方案可以用更高的 jdk（1.7 或 1.8）替换 jdk1.6。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-04T17:51:05.270

您可以使用以下命令生成存根 wsdl2java -p -client -frontend jaxws21

# php - Facebook 连接空白页

> ID：10434374
> 
> 赞同：0
> 
> 时间：2012-05-03T15:18:57.863
> 
> 标签：php, facebook, fbml

我在我的一个网站上遇到了一个奇怪的 Facebook Connect 问题。在今天早上之前它工作得很好。我检查了所有最近的更改，似乎与此问题无关。

注意：我正在使用 FBML，并在每次测试时为我的网站和 Facebook 删除 cookie。

当我单击 Facebook Connect 按钮时，登录表单正确显示。当 Facebook 检查此 URL 的权限时会出现空白页面：

https://www.facebook.com/dialog/permissions.request?[参数列表...]

我没有 Javascript 错误，也没有返回 HTML。

我尝试仅将所需权限设置为 perms="email"，以防过去几天权限发生变化，但我遇到了同样的问题。

有人知道这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:36:31.053

我们已经计划删除该站点上的所有 FBML 标签，并用 JS 替换它解决了我们遇到的问题！

因此，使用 FBML 的 Facebook Connect 似乎不再受支持，即使它应该支持。

# algorithm - memcached 使用什么散列算法来散列键？

> ID：10434375
> 
> 赞同：3
> 
> 时间：2012-05-03T15:19:02.033
> 
> 标签：algorithm, memcached, hash

Memcached 使用分布式一致性哈希来选择将密钥放在哪个服务器上，但它使用哪个哈希算法将字符串密钥映射到应用 Ketama 算法用于服务器选择的最终哈希。该算法在将相似的密钥传播到不同的服务器方面有多好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T15:29:56.093

根据[hash.c](https://github.com/memcached/memcached/blob/master/hash.c)中的源代码，memcached 使用以下算法：

> 这里使用的散列函数是 Bob Jenkins，1996 年的：
> 
> [http://burtleburtle.net/bob/hash/doobs.html](http://burtleburtle.net/bob/hash/doobs.html)
> 
> “作者 Bob Jenkins，1996 年。bob_jenkins@burtleburtle.net。您可以以任何您希望的方式使用此代码，私人的、教育的或商业的。它是免费的。”

来自鲍勃詹金斯的网站：

> 我为您提供了一种用于哈希表查找的新哈希函数，它比您现在使用的更快、更彻底。我还给你一种方法来验证它是否更彻底。

此外，他的要求是：

> *   键是未对齐的可变长度字节数组。
> *   有时键是几个这样的数组。
> *   有时需要一组独立的散列函数。
> *   平均密钥长度从 8 字节到 200 字节不等。
> *   键可能是字符串、数字、位数组或更奇怪的东西。
> *   表大小可以是任何值，包括 2 的幂。
> *   哈希必须比旧的更快。
> *   哈希必须做得很好。
> 
> ...
> 
> 那么真正的要求是一个好的散列函数应该为用户实际使用的键均匀地分配散列值。

回到你的另一个问题，他测量了算法均匀分布散列值的能力，所以我认为散列在将相似的密钥传播到不同的服务器方面做得很好。如果您有顾虑，代码是隔离的，因此您应该能够运行自己的测试。

# android - 光标在没有事先 close() Android 的情况下完成

> ID：10434378
> 
> 赞同：19
> 
> 时间：2012-05-03T15:19:14.763
> 
> 标签：android, sqlite, sqliteopenhelper

在我的应用程序中，我有一个列表视图。我通过 SQLiteDatabase 的查询获取数据。当我从数据库中获取数据时，我收到此错误： ![错误](../Images/d594233439bddc9d0b73d9ef9dd843e2.png)

它发生在我从第 20 行到第 21 行时。 ![发生](../Images/b5e4ea28b79f34444586d766d7fa2dcb.png)

我尝试将 cursor.deactivate() 和 cursor.close() 放在 regel 50 上。但没有结果。任何人都知道我为什么会收到此错误以及如何解决它？谢谢 ：）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-03T15:27:15.923

您必须在数据库之前关闭游标。将代码放在`try`/`catch`块和`finally`块中，关闭游标，然后关闭数据库：

```
try {
    db = ...
} catch(Exception ex) { 
    // Log the exception's message or whatever you like
} finally {
    try {
      if( cursor != null && !cursor.isClosed())
        cursor.close();
       if( db.isOpen() )
        db.close();
    } catch(Exception ex) {}
} 
```

在使用 DB 或 Content Provider 进行 IO 时，关闭顺序很重要。有关更多信息，请参阅[此链接](https://stackoverflow.com/questions/4195089/what-does-invalid-statement-in-fillwindow-in-android-cursor-mean/8325904#8325904)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-24T11:39:35.373

要查找此类问题，只需为调试版本启用 StrictMode，如下所示：

```
public void onCreate() {
     if (DEVELOPER_MODE) {
         StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                 .detectDiskReads()
                 .detectDiskWrites()
                 .detectNetwork()   // or .detectAll() for all detectable problems
                 .penaltyLog()
                 .build());
         StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
                 .detectLeakedSqlLiteObjects()
                 .detectLeakedClosableObjects()
                 .penaltyLog()
                 .penaltyDeath()
                 .build());
     }
     super.onCreate();
 } 
```

更多信息@http [://developer.android.com/reference/android/os/StrictMode.html](http://developer.android.com/reference/android/os/StrictMode.html)

一切顺利，

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T13:43:37.450

始终，请记住在关闭数据库之前通过调用 cursor.close() 来关闭游标。那应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T15:27:57.483

让活动通过使用管理游标生命周期，`startManagingCursor(c)`就可以了。

# python - Python：是否可以创建一个名称为字符串的全局变量？

> ID：10434380
> 
> 赞同：2
> 
> 时间：2012-05-03T15:19:16.850
> 
> 标签：python, scope

我可以在函数中创建一个全局变量：

```
def f():
    global x
    x=1

f()
print x 
```

但是，如果我在 f() 中只有该变量的名称，我可以这样做吗？

```
def f(varname):
    exec('global ' + varname)
    exec(varname + '=1')

f('x')
print x 
```

这不起作用 - “名称'x'未定义”。不要告诉我这是一种糟糕的编程风格——我知道。问题是这是否可以在 Python 中实现。

感谢您的回答，但为什么 exec 不起作用的问题仍然存在。是否以某种方式在不同的上下文中执行？它是不同模块的一部分，以便在不同模块中创建全局变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:22:06.270

```
In [1]: globals()['x'] = 42

In [2]: x
Out[2]: 42 
```

如果在函数内完成，它的工作方式相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T15:23:05.197

是的，您可以使用[globals()](http://docs.python.org/library/functions.html#globals)：

```
globals()['whatever'] = 123 
```

（很高兴你意识到这不是一个很好的风格）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T15:24:25.587

使用全局函数

```
globals()[varname] = value 
```

globals 函数返回一个包含模块全局变量的字典。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T15:31:18.687

你可以，看看其他答案。

但你真的不应该。

并不是说全局变量自然是个坏主意。更大的问题是，查看对`f()`or的简单调用`f(x)`，您不知道您只是修改了本地（即在本例中为全局）范围。

```
def f():
    return 1

x = f()
print x 
```

完全相同，但记录了该范围内的范围内发生的事情。

# c# - Outlook 2010 特殊文件夹加载项

> ID：10434384
> 
> 赞同：0
> 
> 时间：2012-05-03T15:19:33.853
> 
> 标签：c#, ms-office, outlook-2010, office-addins

目前我的目标是创建 Outlook 加载项，它将创建特定的存档文件夹。与常规的不同之处在于，我应该让我在搬入或搬出期间完全控制项目的内容。

简而言之，我应该能够在项目真正移动到我的文件夹或从我的文件夹中删除之前扫描项目的二进制内容。我打算将其中一些项目复制到网络位置。

请针对我的情况建议我正确的文件或样本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:52:19.950

假设您使用的是 Visual Studio 2010，您很可能首先创建一个 Visual Studio Tools for Office (VSTO) 项目来创建您的加载项。[在此处](http://msdn.microsoft.com/en-us/office/hh133430)查看有关 VSTO 和 Visual Studio 的详细信息。

启动并运行它后，您将拥有一个名为 ThisAddIn.cs 的源文件，其中包含加载项的“主入口点”。从那里，您可以连接到 Outlook 在某些事件发生时将引发的事件。您很可能会对以下活动感兴趣：

*   文件夹切换之前
*   文件夹开关

您的代码将如下所示：

```
private void ThisAddIn_Startup(object sender, EventArgs e)
{
    var explorer = this.Application.ActiveExplorer();
    explorer.BeforeFolderSwitch += new ExplorerEvents_10_BeforeFolderSwitchEventHandler(explorer_BeforeFolderSwitch);
    explorer.FolderSwitch += new ExplorerEvents_10_FolderSwitchEventHandler(explorer_FolderSwitch);
}

/// <summary>
/// Handler for Outlook's "BeforeFolderSwitch" event. This event fires before the explorer goes to
/// a new folder, either as a result of user action or through program code.
/// </summary>
/// <param name="NewlySelectedFolderAsObject">
/// The new folder to which navigation is taking place. If, for example, the user moves from "Inbox"
/// to "MyMailFolder", the new current folder is a reference to the "MyMailFolder" folder.
/// </param>
/// <param name="Cancel">
/// A Boolean describing whether or not the operation should be canceled.
/// </param>
void explorer_BeforeFolderSwitch(object NewlySelectedFolderAsObject, ref bool Cancel)
{
    if (NewlySelectedFolderAsObject == null)
        return;
    var newlySelectedFolderAsMapiFolder = NewlySelectedFolderAsObject as MAPIFolder; 
}

void explorer_FolderSwitch()
{
} 
```

您的代码应放置在这些事件处理程序中以执行您的工作。

# mysql - mysql：存储很多POI的经纬度，使用mysql空间，计算距离

> ID：10434386
> 
> 赞同：0
> 
> 时间：2012-05-03T15:19:38.627
> 
> 标签：mysql, distance, latitude-longitude, spatial-query

我必须在意大利（> 100000）创建很多餐馆的数据库，并且我想创建一个“靠近我”的功能。我想创建一个包含所有餐厅的纬度和经度的表，并且我想使用 mysql spatial。

您是否知道如何创建查询以查找我周围 10 公里半径内的所有餐馆（我的坐标将由 gps 获取）？

我试图了解距离，但谷歌搜索我没有发现任何有趣的东西。

你认为使用 mysql spatial 是个好主意吗？我可以使用浮点数吗？在这种情况下，如何创建查询以查找我周围 10 公里半径内的所有餐馆？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:58:49.563

MySQL 空间的 MBRIntersects 或 MBRContains 函数似乎是您需要熟悉的。

请参阅[此问题](https://stackoverflow.com/questions/1006654/fastest-distance-lookup-given-latitude-longitude)的已接受答案作为开始。

在 gis.stackexchange.com 上询问可能会专门针对 MySQL 空间给出更好的答案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-03T15:48:50.480

是的，您可以使用地理空间功能 - 但它相当复杂。仅根据纬度和经度（以及经度和纬度！）索引条目会简单得多。至于查询数据，我建议您运行查询以查找与以当前位置为中心的 20km X 20km 边界框匹配的行（可以使用索引），而不是尝试查询实际上在 10km 内的记录 - 您可以在查询中丢弃半径 eksewhere 之外的那些，例如

```
SELECT * FROM (
  SELECT p.id, p.description,
  SQRT((x.current_latitiude-p.latitude)*(x.current_latitiude-p.latitude)
      + (x.current_longitude-p.longitude)*(x.current_longitude-p.longitude)) 
      AS distance
  FROM places p
  WHERE p.latitude BETWEEN (x.current_latitiude - x.max_range) 
     AND (x.current_latitiude + x.max_range) 
  AND p.longitude BETWEEN (x.current_longitiude - x.max_range) 
     AND (x.current_longitiude - x.max_range)
) ilv
WHERE ilv.distance<x.max_range 
```

（您需要将 10km 转换为您用于经度/纬度的单位，并替换 x.max_range 的值）。

# java - 服务架构 - inputStream 正在丢失字节

> ID：10434388
> 
> 赞同：0
> 
> 时间：2012-05-03T15:19:40.890
> 
> 标签：java, inputstream, outputstream

我的服务器中有一种服务架构，侦听 TCP-IP-socked。

```
messageType = protocolHandler.getMessageType();
ITaskProtocol serviceProtocol = serverServices.get(messageType);
if (p != null) {
    String result = serviceProtocol.handleTask(protocolHandler);
} 
```

我将特定任务的协议存储在哈希图中。我的问题是，应该处理该任务的协议在 inputStream 中找不到任何字节。inputStream 和 socked 在“protocolHandler”内。

例子：

```
public class ProtocolHandler implements ITaskProtocolHandler {
    @Override
    public int getMessageType() throws IOException {
        return new DataInputStream(stream).readInt();
    } 
```

但是，我可以看到（由于调试）消息已发送。并且还在地图中找到了协议（服务），并调用了服务的“handleTask（...）”方法。但是，该服务没有收到任何消息，因为字节丢失并且协议正在相互等待。

我的猜测是搜索服务需要太长时间，同时消息丢失。

重要信息：有时它工作有时不工作。客户端和服务器在同一台电脑上运行，这可能是线程问题。

客户端协议：

```
clientWorker.send(ServerProtocol.MessageRequestType.JoinTopicRequest.getRequestNumber());
clientWorker.send("some xml-message"); 
```

服务器服务协议：

```
public String handleTask(ITaskProtocolHandler protocolHandler) throws Exception {
    Message m = protocolHandler.getMessage()); 
```

架构有什么问题？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:29:39.933

这是一个疯狂的猜测，但这可能是你的问题。您的线程是否被阻塞并等待数据？

如果是这样，那么您需要修复您在套接字上请求流的顺序，您需要首先从套接字获取 inputStream，然后请求 outputStream，否则您最终会遇到阻塞的线程并等待数据。

我希望这能解决你的问题。

请参阅这篇文章：[Stackoverflow java socket question](https://stackoverflow.com/questions/471342/java-socket-programming)以获得完整的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:28:27.833

* * *

问题解决了！我有一个阅读问题...“totalRead += nRead;” 失踪....

```
 int size = readInt();
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();

    int nRead = 0;
    int totalRead = 0;
    byte[] data = new byte[1024];

    while (totalRead < size) {
        int read;
        if (data.length <= (size - totalRead))
            read = data.length;
        else
            read = (size - totalRead);
        if ((nRead = inputStream.read(data, 0, read)) == -1)
            throw new IOException("End of stream");
        buffer.write(data, 0, nRead);
        totalRead += nRead;
    } 
```

# asp.net-web-api - WebApi 授权过滤器，带有 json 有效负载中的令牌

> ID：10434389
> 
> 赞同：4
> 
> 时间：2012-05-03T15:19:46.680
> 
> 标签：asp.net-web-api

我一直在研究 AspNetWebApi 的授权，关于这个主题的信息有点稀疏。

我有以下选择：

1.  在查询字符串上传递 API 令牌
2.  将 API 令牌作为标头传递
3.  使用基本身份验证传递 API 令牌
4.  将 API 令牌传递到 json 中的请求负载上。

一般推荐的方法是什么？

我也想知道第 4 点），我将如何检查 AuthorizationFilterAttribute 上的 OnAuthorization 方法中的 json 有效负载以检查 API 令牌是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:55:59.223

如果您想要一个真正安全的授权选项，那么 OAuth 之类的就是要走的路。这篇[博客文章](http://codebetter.com/howarddierking/2011/10/11/oauth-2-0-in-web-api/)提供了一个使用现已过时的 WCF Web API 的非常详尽的示例，但很多代码是可以挽救的。或者至少，使用本[博文](http://sixgun.co.uk/blog/2012/02/29/asp-net-web-api-basic-authentication/)中所示的 HTTP 基本身份验证。正如 Aliostad 所指出的，如果您使用基本身份验证路由，请确保您使用的是 HTTPS，以便令牌保持安全。

如果您决定要推出自己的（几乎总是比上述任何一个选项安全得多），那么下面是一个代码示例，如果您使用 HTTP 标头路由，您将需要 AuthorizationHanlder。请注意，Web API 类中处理 UserPrinicipal 的方式很有可能会发生变化，因此此代码仅适用于第一个预览版。您需要像这样连接 AuthorizationHandler：

```
 GlobalConfiguration.Configuration.MessageHandlers.Add(new AuthenticationHandler()); 
```

标头令牌代码：

```
public class AuthenticationHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(
        HttpRequestMessage request,
        CancellationToken cancellationToken)
    {
        var requestAuthTokenList = GetRequestAuthTokens(request);
        if (ValidAuthorization(requestAuthTokenList))
        {
            //TODO: implement a Prinicipal generator that works for you
            var principalHelper = GlobalConfiguration.Configuration
                .ServiceResolver
                    .GetService(typeof(IPrincipalHelper)) as IPrincipalHelper;

            request.Properties[HttpPropertyKeys.UserPrincipalKey] = 
                principalHelper.GetPrinicipal(request);

            return base.SendAsync(request, cancellationToken);
        }
        /*
        ** This will make the whole API protected by the API token.
        ** To only protect parts of the API then mark controllers/methods
        ** with the Authorize attribute and always return this:
        **
        ** return base.SendAsync(request, cancellationToken);
        */
        return Task<HttpResponseMessage>.Factory.StartNew(
            () => new HttpResponseMessage(HttpStatusCode.Unauthorized)
                {
                    Content = new StringContent("Authorization failed")
                });
    }

    private static bool ValidAuthorization(IEnumerable<string> requestAuthTokens)
    {
        //TODO: get your API from config or however makes sense for you
        var apiAuthorizationToken = "good token";
        var authorized = requestAuthTokens.Contains(apiAuthorizationToken);

        return authorized;
    }

    private static IEnumerable<string> GetRequestAuthTokens(HttpRequestMessage request)
    {
        IEnumerable<string> requestAuthTokens;
        if (!request.Headers.TryGetValues("SomeHeaderApiKey", out requestAuthTokens))
        {
            //Initialize list to contain a single not found token:
            requestAuthTokens = new[] {"No API token found"};
        }
        return requestAuthTokens;
    }
} 
```

# hibernate - 多个 Pojos 同一张表 Hibernate

> ID：10434392
> 
> 赞同：3
> 
> 时间：2012-05-03T15:20:02.810
> 
> 标签：hibernate, mapping, pojo

我有一张像这样的桌子：

```
╔════════════╗
║ table_test ║
╠════════════╣
║ id         ║
║ type       ║
║ message    ║
║ param_x    ║
║ param_y    ║
║ param_z    ║
║ result_a   ║
║ result_b   ║
║ result_c   ║
╚════════════╝ 
```

所以这是一个有一些参数并有一些结果的测试。我没有包含参数的表，因为它们不是预定义的。

所以我想将其映射到 3 个类：测试、参数和结果。

我如何在 Hibernate 中映射它？例如，我如何获取测试并拥有一个带有数据库信息的参数对象？

参数和结果将是测试类的字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:37:06.170

使用一个实体类（测试）和两个嵌入式对象类（参数和结果），如[Hibernate 文档中所述](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration-component)

```
@Entity
public class Test
    @Embedded
    private Parameters parameters;

    @Embedded
    private Results results;
}

@Embeddable
public class Parameters {
    ...
}

@Embeddable
public class Results {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:36:13.890

您可以将它们映射为嵌入对象，请参见[5.1.5。嵌入式对象（又名组件）](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-declaration-component)。

# javascript - 如何知道在 Javascript 中触发了哪个处理程序

> ID：10434393
> 
> 赞同：0
> 
> 时间：2012-05-03T15:20:08.643
> 
> 标签：javascript, debugging, dom-events

无论如何，当我单击一个元素时，我是否可以弄清楚被调用的函数的名称/主体是否可能使用萤火虫。

> 例如，我想知道当我按下推文按钮时触发的 Javascript 函数是什么。

请注意，我不是在谈论`eventLog`、断点或任何需要修改源代码的东西。

我发现[视觉事件](http://www.sprymedia.co.uk/article/Visual+Event+2)是一个了不起的工具，它可以帮助可视化所有与不同元素相关的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:23:45.067

我不了解 Firebug，但在 Webkit Inspector 中，在脚本选项卡下，在断点下，然后是事件侦听器断点下，您可以在分层结构中选择不同类型的事件（键盘、鼠标等，在这些下，每个人事件）。

当事件被触发时，调试器将中断。

# opengl - 创建视频 vom 渲染的 OpenGL 帧

> ID：10434398
> 
> 赞同：1
> 
> 时间：2012-05-03T15:20:25.853
> 
> 标签：opengl, video, ffmpeg, render, libavcodec

我正在寻找一种方法来从我用 OpenGL 渲染并使用 glGetTexImage 函数作为 int 数组传输到 ram 的一行帧创建视频。是否可以直接在 ram（约 10 秒视频）中实现这一点，还是我必须将每一帧保存到硬盘并在之后对视频进行编码？

我在另一个 SO 问题中找到了这个示例[http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/api-example_8c-source.html](http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/api-example_8c-source.html)但这仍然是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:08:07.013

今天我得到了使用这个例子的提示[http://git.videolan.org/?p=ffmpeg.git;a=blob;f=doc/examples/decoding_encoding.c;h=cb63294b142f007cf78436c5d81c08a49f3124be;hb=HEAD](http://git.videolan.org/?p=ffmpeg.git;a=blob;f=doc/examples/decoding_encoding.c;h=cb63294b142f007cf78436c5d81c08a49f3124be;hb=HEAD)看看​​如何可以实现h264。当你想对opengl渲染的帧进行编码时的问题是它们是RGB（A）并且大多数编解码器都需要YUV。对于转换，您可以使用 swscale (ffmpeg) - 可以在此处找到如何使用它的示例[http://web.me.com/dhoerl/Home/Tech_Blog/Entries/2009/1/22_Revised_avcodec_sample.c.html](http://web.me.com/dhoerl/Home/Tech_Blog/Entries/2009/1/22_Revised_avcodec_sample.c.html)

正如 ananthonline 所说，帧的直接编码非常占用 cpu，但您也可以使用 ffmpeg 将帧编写为支持 rgb24 像素格式的 rawvideo 格式，并使用 ffmpeg 的 cmd 命令将其离线转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:00:31.597

如果您想要一种跨平台的方式，您可能必须使用 ffmpeg/libavcodec，但在 Windows 上，您可以使用[此处](http://www.codeproject.com/Articles/1418/A-class-to-easily-generate-AVI-video-with-OpenGL-a)的资源非常简单地编写 AVI 。

# mysql - MAX() 未在 MySQL 中显示预期结果

> ID：10434404
> 
> 赞同：0
> 
> 时间：2012-05-03T15:20:36.550
> 
> 标签：mysql

在这里真的很难过，所以任何建议将不胜感激。

我在`clients`表中，我有`ID`= 257 的客户端的以下记录：

```
SELECT ref, ID, client_name, data_1 FROM clients WHERE ID = 257

+------+-----+-------------+--------+
| ref  | ID  | client_name | data_1 |
+------+-----+-------------+--------+
| 1123 | 257 | Client257   | 0      |
| 1124 | 257 | Client257   | 163    |
+------+-----+-------------+--------+ 
```

现在，如果我在字段中添加一个简单的 MAX() `ref`，我会得到：

```
SELECT MAX(ref), ID, client_name, data_1 FROM clients WHERE ID = 257

+------+-----+-------------+--------+
| ref  | ID  | client_name | data_1 |
+------+-----+-------------+--------+
| 1124 | 257 | Client257   | 0      |
+------+-----+-------------+--------+ 
```

我应该得到：

```
+------+-----+-------------+--------+
| ref  | ID  | client_name | data_1 |
+------+-----+-------------+--------+
| 1124 | 257 | Client257   | 163    |
+------+-----+-------------+--------+ 
```

任何人都可以解释一下吗？我应该怎么做才能得到想要的结果？

**编辑：**

`SHOW CREATE TABLE clients`根据@Ilion的要求添加了输出：

```
CREATE TABLE `clients` (
 `ref` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `ID` int(11) unsigned NOT NULL,
 `client_name` varchar(75) DEFAULT NULL,
 `data_1` int(11) unsigned NOT NULL DEFAULT '0',
 `last_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 UNIQUE KEY `ref` (`ref`)
) ENGINE=MyISAM AUTO_INCREMENT=1135 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:25:39.357

`SELECT ref, ID, client_name, data_1 FROM clients WHERE ID = 257 ORDER BY ref DESC LIMIT 1`

`MAX()`**将显示该列**的最大值。然后，Mysql 从第一行中提取其余数据。

相反，此查询将确保您获得最高的**行数据**`ref`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:25:11.807

这有帮助吗？

```
SELECT ref, ID, client_name, data_1 FROM clients WHERE ID = 257 and ref in
    (select max(ref) from clients WHERE ID = 257) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:28:41.160

你试过有条款吗？这应该有效：

```
SELECT ref, ID, client_name, data_1 FROM clients WHERE ID = 257 having max(ref); 
```

当您实际上不想要分组时，这是基于聚合结果进行选择的最佳方式。

# objective-c - OSX 捆绑架构

> ID：10434405
> 
> 赞同：3
> 
> 时间：2012-05-03T15:20:38.643
> 
> 标签：objective-c, macos, architecture, bundle

我需要比较捆绑包的架构并将其与安装程序的机器架构进行比较；如果它们匹配，则安装将继续，否则它将中止。使用宏很容易获得架构；我想知道是否有一种方法可以检查要安装的捆绑包的体系结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:31:55.960

从外壳，你可以做

```
otool -hv <path to mach-o image> 
```

图像通常在`Contents/MacOS`应用程序或`Versions/Current`框架中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:12:57.090

这将确定当前应用程序（或确定为 的任何捆绑包`mainBundle`）是否与目标捆绑包共享通用架构。[`executableArchitectures`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/doc/uid/20000214-SW32)NSBundle 的方法需要 Mac OS X 10.5 。

```
NSArray *targetArch = p[NSBundle bundleWithPath:@"/path/to/bundle.bundle"] executableArchitectures];
NSArray *thisArch = [[NSBundle mainBundle] executableArchitectures];

if ([targetArch firstObjectInCommonWithArray:thisArch])
{
    // target bundle has architecture which matches current application
} 
```

# jquery - jQuery Click()：在函数执行后更改函数的参数

> ID：10434409
> 
> 赞同：2
> 
> 时间：2012-05-03T15:20:49.113
> 
> 标签：jquery, function, arguments

假设我有这两个功能：

```
function z(a,b,c){
    $("#d").click(function(){
        var sum = a+b+c;
        x(sum)
    }

    function x(first){
        var second = first*(first+1);
        var third = second*(second+1);
        $("#e").animate({
            "left": "+=first%"
        },{
            complete:function(){
                z(first, second, third)
        }); 
```

**`function z`我希望用不同的参数触发第一个函数 [ ] 并`.click() event`在动画之后“解除绑定”它的前一个函数。**

* * *

*让第一次点击`#d`，`#e`动作`(a+b+c)%`。第二次点击`#d`，`#e`动作`(a+b+c)+(a+b+c)*(a+b+c+1)+(a+b+c)*(a+b+c+1)*((a+b+c)*(a+b+c+1)+1)%`。第三次...*

我试过使用`unbind`，但它似乎不适合这种情况。我最终写了越来越多的乱码。我不认为使用`unbind`是一种聪明的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:30:44.540

```
function z(a,b,c){
        x(a+b+c);
}

function x(first) {
    var second = first*(first+1);
    var third = second*(second+1);
    $("#e").animate({
    "left": "+=first%"
    },{
    complete:function(){
    z(first, second, third)
});

$(document).ready(function(){
    $("#d").one("click",function(){
        z(1,2,3);
    });
}); 
```

“one()”函数将确保您的“单击”事件在您第一次单击后未绑定。

参考：[http ://api.jquery.com/one/](http://api.jquery.com/one/)

# sql - sql select语句中的模糊计数

> ID：10434426
> 
> 赞同：9
> 
> 时间：2012-05-03T15:21:54.793
> 
> 标签：sql, oracle

我想这已经在网站上问过，但我找不到它。

我在一些网站上看到搜索结果的计数含糊不清。例如，在 stackoverflow 中，当您搜索问题时，它会显示 +5000 个结果（有时），在 gmail 中，当您按关键字搜索时，它会显示“数百个”，而在 google 中会显示 aprox X 结果。这只是向用户展示一个易于理解的巨大数字的一种方式吗？或者这实际上是一种快速计算可以在数据库中使用的结果的方法[我目前正在学习 Oracle 10g 版本]？像“嘿，如果你得到超过 1k 个结果，请停下来告诉我有超过 1k 个”。

谢谢

PS。我是数据库新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:31:46.520

通常这只是显示数字的好方法。

我不相信有一种方法可以在 SQL 中执行您所要求的操作 - count 在某个数字之前没有计数选项。

我也不认为这是来自 gmail 或 stackoverflow 中的 SQL。大多数搜索引擎会返回一个搜索的匹配总数，然后让您对结果进行分页。

至于使确切的数字更易于阅读，这里有一个来自 Rails 的示例：

[http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:39:36.467

使用 Oracle，您始终可以使用分析函数来计算即将返回的*确切行数。*这是此类查询的示例：

```
SELECT inner.*, MAX(ROWNUM) OVER(PARTITION BY 1) as TOTAL_ROWS
FROM (
  [... your own, sorted search query ...]
) inner 
```

这将为您提供特定子查询的总行数。当您还想应用分页时，您可以进一步包装这些 SQL 部分：

```
SELECT outer.* FROM (
  SELECT * FROM (
    SELECT inner.*,ROWNUM as RNUM, MAX(ROWNUM) OVER(PARTITION BY 1) as TOTAL_ROWS
    FROM (
      [... your own, sorted search query ...]
    ) inner
  ) 
  WHERE ROWNUM < :max_row
) outer
WHERE outer.RNUM > :min_row 
```

用有意义的值替换`min_row`和`max_row`。但请注意，当您不使用索引进行过滤或对索引进行相对较窄的操作时，计算*确切的行数可能会很昂贵。*在此处阅读有关此内容的更多信息：[Oracle 中分页查询的速度](https://stackoverflow.com/questions/6033080/speed-of-paged-queries-in-oracle)`UNIQUE SCAN``RANGE SCAN`

正如其他人所说，您始终可以有一个绝对上限，例如使用过滤器`5000`对您的查询进行`ROWNUM <= 5000`筛选，然后只表明有多个`5000+`结果。`ROWNUM`请注意，当您应用过滤时，Oracle 可以非常擅长优化查询。在此处查找有关该主题的一些信息：

[http://www.dba-oracle.com/t_sql_tuning_rownum_equals_one.htm](http://www.dba-oracle.com/t_sql_tuning_rownum_equals_one.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:49:46.920

[这个问题](http://ask.sqlservercentral.com/questions/1782/counting-the-number-of-rows-in-a-table.html)提供了一些很好的信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T15:29:57.217

Vague count 是一个缓冲区，会及时显示。如果用户想查看更多结果，那么他可以请求更多。

这是一个性能设施，在显示结果后，像谷歌这样的网站会继续搜索更多结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T15:27:54.630

我不知道这将运行多快，但您可以尝试：

```
SELECT NULL FROM your_tables WHERE your_condition AND ROWNUM <= 1001 
```

如果结果中的行数等于 1001，那么总记录数将 > 1000。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T15:31:46.590

当您执行 SQL 查询时，您可以设置一个

```
 LIMIT 0, 100 
```

例如，您只会得到前一百个答案。这样您就可以向您的查看器打印他们的请求有 100 多个答案。

对于谷歌，我不能说他们是否真的知道对请求的回答超过 27'000'000'000，但我相信他们确实知道。有一些标准请求存储了结果，并且在后台完成了更新。

# javascript - 如何将此变量传递给此函数？

> ID：10434440
> 
> 赞同：1
> 
> 时间：2012-05-03T15:22:47.913
> 
> 标签：javascript

我必须在 mitt 参数中将 aaa 传递**给****ehi** ( **)**函数。

 ****aaa**是一个数字数组，例如：29837,127365,5645,12323,47656564,2312,4534,2343

这是**ehi()**工作的正确方式：

```
 function ehi(aaa) {
      love({functionality: 'kiss',
            mess: 'yuhuuuuuu',
            mitt: '29837,127365,5645,12323,47656564,2312,4534,2343'
      });
   } 
```

我需要用 aaa 替换 29837,127365,5645,12323,47656564,2312,4534,2343。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:24:41.480

`Array`'s 有一个[`join()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)，它调用`toString()`每个元素的 并将它们与指定的连接器连接起来。

```
love({functionality: 'kiss',
      mess: 'yuhuuuuuu',
      mitt: aaa.join(",")
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:28:30.587

您的问题不够清楚，您`mitt`需要字符串还是数组？

如果`aaa`已经是一个真正的数组 ( `aaa = [...] // typeof(aaa) === "object"`) 并且`mitt`需要一个字符串，那么请执行以下操作：

```
mitt: aaa.join(',') 
```

如果您的手套需要一个数组，只需执行以下操作：

```
mitt: aaa 
```

但是，如果`aaa`是字符串，请执行以下任一操作：

```
mitt: aaa.split(',') //<- passes an array to mitt 
```

或者

```
mitt: aaa // <- passes aaa as a string to mitt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:24:35.777

```
love({functionality: 'kiss',
        mess: 'yuhuuuuuu',
        mitt: aaa.join(',')
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T15:24:44.163

尝试以下

```
 love({functionality: 'kiss',
        mess: 'yuhuuuuuu',
        mitt: aaa
  }); 
```**

# objective-c - 像 iOS 邮件应用一样缩放 UIWebView

> ID：10434444
> 
> 赞同：14
> 
> 时间：2012-05-03T15:23:05.473
> 
> 标签：objective-c, ios, uiwebview, uiscrollview, xamarin.ios

我想重新创建一个视图，您可以在查看电子邮件时像 iPhone/iPad Mail 应用程序或 Sparrow 一样缩放，顶部是信息块，然后是 UIWebView。我显然可以在界面构建器或代码中轻松地做到这一点，但我希望它的行为类似于邮件应用程序。

我所说的“像邮件应用程序”是指，当您捏缩放（视图中的任何位置）时，UIWebView 是唯一实际缩放的视图，并且顶部内容保持相同大小。当您缩小太多并看到背景时，整个视图会缩小（不仅仅是 UIWebview）并且整个视图也会滚动。

我已经做了一些试验并尝试了一些建议，比如在 UIWebView 的顶部插入顶视图，根据内容大小扩展 UIWebView 的高度，但这总是会导致顶视图也缩放，或者只是 UIWebView。

我希望这有点道理。这可能真的很简单，但我一直试图断断续续地对此进行分类，因为我再也看不到树木了。

这是一个 MonoTouch 应用程序，但如果有人有 Objective-C 示例或任何我可以转换并回发的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T15:46:44.010

我已经为我们的应用程序做到了这一点；它并不像听起来那么简单，但在 iOS 5 上它应该比 iOS 4 稍微简单一些。查看您希望保持不变的顶部部分。**当您的 Web 视图完成加载 HTML 并呈现它时**，获取`scrollView`Web 视图的 ，并将您的视图作为子视图添加到其中。将顶视图的框架高度添加到`contentSize.height`滚动视图的高度，并将高度添加到滚动视图`origin.y`的其余子视图（那些不是您的顶视图）。将您的视图控制器设置为 Web 视图的滚动视图的委托。每当用户滚动时：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{   
    CGRect frame = contentView.frame;

    if(scrollView.contentOffset.x < 0)
    {
        frame.origin.x = 0;
    }
    else if((scrollView.contentOffset.x + contentView.frame.size.width) > scrollView.contentSize.width)
    {
        frame.origin.x = scrollView.contentSize.width - contentView.frame.size.width;
    }
    else
    {
        frame.origin.x = scrollView.contentOffset.x;
    }

    [contentView setFrame:frame];
} 
```

这应该使它的行为与 mail.app 视图完全相同。

# iphone - iTunes U 风格的下载/进度/停止/播放按钮

> ID：10434449
> 
> 赞同：8
> 
> 时间：2012-05-03T15:23:27.703
> 
> 标签：iphone, ios, download, progress

iPhone 版 iTunes U 有这些美妙的按钮

*   下载进度
*   停止按钮和
*   播放按钮（嗯，“i”按钮）

在一个地方 - 请参阅随附的屏幕截图。这是一个可以通过代码调用的系统图标，还是开发人员无法使用的东西？

无论如何：如果有人有一个来源，描述如何获得这种按钮，我会很高兴。我很清楚，图标由视图控制器中的状态模式控制。

提前致谢。

![在此处输入图像描述](../Images/cb914151906fcc8f5fb24c52d5f56ffb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:30:28.710

github上有DACCircularProgress，它看起来就像Facebook应用程序上的圆形进度条，我想你可以把它修改为将停止按钮放在顶部并更改颜色并使用它。看看这个：

[DACCircularProgress](https://github.com/danielamitay/DACircularProgress)

# c# - 检查数组列表的大小

> ID：10434450
> 
> 赞同：3
> 
> 时间：2012-05-03T15:23:31.203
> 
> 标签：c#, list, indexoutofboundsexception

我有一个字符串数组列表：

```
List<string[]> parsedRaw = new List<string[]>(); 
```

此列表包含从 CSV 读取的行，其中 parsedRaw[3][5] 将是从 CSV 的第三行读取的第五个项目。

我知道我可以通过以下方式找到列表中的行数：

```
parsedRaw.Count 
```

但是，给定一行，我怎样才能找到该行中的元素数？我试图在进入循环以从列表中读取之前执行测试，以避免“索引超出数组范围”错误，其中循环是：

```
for (k = 0; k < nBytes; k++)
{
    TheseBytes[k] = (byte)parsedRaw[i][StartInt + k];
} 
```

我在 CSV 中的一行中遇到错误，该错误的元素比其他元素少。在进入这个循环之前，我需要检查 parsedRaw[i] 是否至少有“StartInt + nBytes”元素。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T15:26:51.453

行只是一个字符串数组`string[]`，因此您可以使用`Length`数组的属性找到它的大小。

```
foreach (string[] row in parsedRaw) {
    for (int i = 0 ; i != row.Length ; i++) {
        // do something with row[i]
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:28:12.337

给定行中的元素数由下式确定

```
parsedRaw[theRowIndex].Length 
```

要修复您的 for 循环，您需要将`StartInt + k`值限制为小于最小值`nBytes`和行长

```
for (k = 0; (k < nBytes) && (k + StartInt < parsedRaw[i].Length); k++)
{
    TheseBytes[k] = (byte)parsedRaw[i][StartInt + k];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:32:13.320

尝试

```
List<string[]> parsedRaw = new List<string[]>();
parsedRaw.Add(new string[] {"test1", "test2"});
parsedRaw.Add(new string[] { "test1", "test2", "test3" });
int totalSize = 0;
for (int i = 0; i < parsedRaw.Count(); i++)
{
    int rowSize = 0;
    for (int k = 0; k < parsedRaw[i].Count(); k++)
    {
        rowSize += parsedRaw[i][k].Length;    
    }                
    totalSize += rowSize;
} 
```

# c# - 当 DB 消失时，MySqlConnection Connect() 方法抛出异常的速度非常慢 C#

> ID：10434452
> 
> 赞同：1
> 
> 时间：2012-05-03T15:23:32.653
> 
> 标签：c#, mysql

我正在创建一个 C# 服务器，它打开一个命名管道并收集客户端发送给它的数据。基本上，我使用 .NET MySql 连接器和 MySqlConnection 类将收集到的信息存储在 mysql 数据库中。我还添加了一个回退规则，以防数据库无法访问，将客户端发送的信息缓冲在 SQL 文件中，并在再次可用时将其导入数据库。一切正常，除非数据库完全消失（例如，当运行数据库的服务器因为崩溃而不再在网络上时），Connect() 方法需要永远抛出异常。这是不可接受的，因为客户端发送了大量数据。有没有什么办法解决这一问题？如果查询因表不存在或类似原因而失败，它会立即返回错误。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using log4net;
using MySql.Data.MySqlClient;

namespace PipeServer
{
    class MySqlConnector
    {
        //register logger
        private static readonly ILog log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

        public delegate void MessageReceivedHandler(string message);
        public event MessageReceivedHandler MessageReceived;

        private string host;
        private string database;
        private string user;
        private string password;
        private MySqlConnection connection;
        private List<string> rows = new List<string>();

        public MySqlConnector()
        {
            this.host = Settings.Default.db_host;
            this.database = Settings.Default.db_schema;
            this.user = Settings.Default.db_user;
            this.password = Settings.Default.db_pw;
            string myConnectionString = "SERVER=" + this.host + ";" +
                        "DATABASE=" + this.database + ";" +
                        "UID=" + this.user + ";" +
                        "PASSWORD=" + this.password + ";";

            connection = new MySqlConnection(myConnectionString);

        }

        public bool Connect()
        {
            if (connection.State != System.Data.ConnectionState.Open)
            {
                try
                {
                    connection.Open();
                    this.MessageReceived("Connected to Database");
                    return true;
                }
                catch (MySqlException ex)
                {
                    log.Error("failed to connect! mysql error: " + ex);
                    this.MessageReceived("No Database connection - Error: "+ex);
                    return false;
                }

            }
            else
            {
                this.MessageReceived("Connected to Database");
                return true;
            }

        }
        .
        .
        .
    }
} 
```

任何提示都非常感谢！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:29:02.820

当您的意思是永远时，您的意思是 30 多岁？

您可能正在寻找将 TimeOut 设置添加到 ConnectionString 中。

[http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

# spring - 使用 Jaxb2Marshaller 解组 xml 并针对模式进行验证

> ID：10434454
> 
> 赞同：1
> 
> 时间：2012-05-03T15:23:35.787
> 
> 标签：spring, jaxb2

我正在使用 xml 作为有效负载实现 REST 服务，并具有以下配置以使用 Jaxb2Marshaller 解组我的 xml。这是我的弹簧上下文文件中的配置

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="classesToBeBound">
            <list>
                <value>com.my.examples.Product</value>
            </list>
        </property>
        <property name="schema" value="classpath:schemadefinitions/product.xsd" />
    </bean> 
```

在我的 bean**产品**上，我只有这个注释

@XmlRootElement(name="product") 公共类 ProductInfo {

问题是当我发出 REST 请求时，它会将 xml 正确解组为 bean，但不会对使用编组器配置的模式执行任何验证。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:09:00.123

我必须将一个validationeventhandler 作为jaxb2Mashaller.setValidationEventHandler(...) 附加到marshaller 上。一旦设置好，解组器就开始验证输入xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T11:28:44.860

使用**Java 8 和 JaxB 2.2.4**，我看不到原始设置有任何问题！*在applicationcontext.xml*中定义 schema 属性是您进行模式验证所需要做的**所有事情。**

如果`Jaxb2Marshaller`“手动”创建，则需要确保`afterPropertiesSet`在设置架构资源后调用该方法，因为它将架构资源加载到内存中。

# google-app-engine - 调试 GQL 查询

> ID：10434459
> 
> 赞同：0
> 
> 时间：2012-05-03T15:24:07.833
> 
> 标签：google-app-engine, gql

我一直在尝试运行此查询：

```
my_post = db.GqlQuery("SELECT * FROM Post where __key__ = KEY('Post', 1)")
self.render("showpost.html", my_post = my_post) 
```

我的模板`showpost.html`如下所示：

```
<div class="post">
  <h3 class="post-subject">{{ my_post.subject }}</h3>
  <div class="post-content">{{ my_post.content }}</div>
</div 
```

`id=1` 而不是得到一个空白页的帖子的详细信息。尽管存在 id=1 的帖子，但我不确定如何确认 GQLquery 是否确实返回了某些内容。有没有办法检查？在尝试以下操作时：

```
my_post = db.GqlQuery("SELECT * FROM Post where subject = 'hello_world')
self.render("showpost.html", my_post = my_post) 
```

我得到了同样的问题（空白页），即使有帖子的主题是`hello_world`

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:17:56.690

Bernie 是对的，您需要使用`.fetch`或`.get`实际从您创建的 GqlQuery 中检索结果，但对于第一个版本，您有一个键或一个 ID，您根本不想创建查询。而是使用为直接使用它们而提供的方法。

如果您有 id，请使用：

```
my_post = Post.get_by_id(id) 
```

这将比使用查询对象快得多。

如果您有完整的密钥，请使用：

```
my_post = Post.get(key) 
```

这是从数据库中取出实体的最快、最有效的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:30:19.717

[`GqlQuery`是一类](https://developers.google.com/appengine/docs/python/datastore/gqlqueryclass#GqlQuery)。
您的代码已经创建了`GqlQuery`该类的一个实例。
要从数据存储中返回某些内容，您需要使用以下任一实例方法：

```
.fetch() # requires number of entities as first argument
.get() 
```

例子：

```
my_query = db.GqlQuery("SELECT * FROM Post WHERE subject = :subject", 
                       subject="hello_world")
my_post = my_query.get() # the magic happens here
self.render("showpost.html", my_post = my_post) 
```

# php - CodeIgniter 验证逻辑

> ID：10434464
> 
> 赞同：1
> 
> 时间：2012-05-03T15:24:27.177
> 
> 标签：php, codeigniter, validation

我正在构建一个小型应用程序，它基本上会显示 3 种形式……第一个是可选的，第二个不是，第三个不是。我希望每个表单都是一个单独的 url（控制器）。在阅读 CodeIgniter form_validation 的文档时，该表单似乎只能提交给它自己进行验证。如果是这种情况，表格将继续显示在同一页面上......他基本上就是我所拥有的......并评论了我想做的事情......

```
class Index extends CI_Controller {

 function __construct()
    {
        parent::__construct();
    }

        function index()
        {
        //load front page that contains first form...
                $content['title'] = 'Home';
                $content['view'] = 'pages/index';
                $this->load->view('template/default',$content);

        }
        function step_two()
        {
           //recieve information from front page. validate form. If validation is 
           //successful continue to step_two(url) if it fails redirect 
           //to front page with error...

          $this->form_validation->set_rules('serial', 'Serial Number', 'required');

          if ($this->form_validation->run() == FALSE)
          {
           //return to front page...
          }else{
           //do necessary work and load step_two view   
          } 

        }

}

?> 
```

这是我的想法的一个片段。但我注意到的是，除非表单提交给它自己，否则你不能进行表单验证。有任何想法吗？我应该验证表单然后重定向到新的 url/函数吗？

多谢你们...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:28:33.437

这就是你的做法

控制器 -

```
public function step1()
{
        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('myform1');
        }
        else
        {
            //do something to post data
            redirect('/controller/step2');
        }
}

public function step2()
{
        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('myform2');
        }
        else
        {
            //do something to post data

            redirect('/controller/step3');
        }
} 
```

所以对您的问题的回答是肯定的，您将这些保留在相同的方法中并在成功验证时重定向。

# android - 如何在列表中获取应用程序的图标？

> ID：10434473
> 
> 赞同：3
> 
> 时间：2012-05-03T15:24:57.053
> 
> 标签：android, listview, icons, imageview, android-applicationinfo

我正在尝试为 android 手机上已安装的应用程序制作一个带有 chechboxes 的列表视图。我将图标放在 ArrayList 中，如下所示

```
packs = new ArrayList<String>(); // a list of all the packages
names = new ArrayList<String>(); // a list of all the apps names
icons = new ArrayList<Drawable>(); // a list of all apps drawable images
List<ApplicationInfo> packages = packageManager.getInstalledApplications(PackageManager.GET_META_DATA);
for (ApplicationInfo packageInfo : packages) {
    if ((packageInfo.flags & ApplicationInfo.FLAG_SYSTEM) !=1){ // 'if' is to remove all system applications
    packs.add((String) packageInfo.packageName);
    names.add((String) packageManager.getApplicationLabel(packageInfo));
    icons.add((Drawable) packageManager.getApplicationIcon(packageInfo)); 
```

然后把它放在listview上，我用这个。

```
icon = (ImageView) row.findViewById(R.id.appIcon);

icon.setImageDrawable(icons.get(position)); 
```

但是，它强制关闭，问题出在 icon.setImageDrawable(icons.get(position)); 我该如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T12:35:57.073

请查看我的解决方案以获取应用程序图标列表

在此获取`ResolveInfo`所有应用程序的列表

这是获取android中应用程序图标列表的方法，希望这个例子对你有所帮助。

导入 java.util.List；

```
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;

import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class IconListActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        loadApps();  

    }

    private void loadApps() {
        Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

        List<ResolveInfo> mApps = getPackageManager().queryIntentActivities(mainIntent, 0);

        ListView listView = getListView();
        listView.setAdapter(new AppsAdapter(this,mApps));
     }

    public class AppsAdapter extends BaseAdapter {
        private LayoutInflater inflater;
        private List<ResolveInfo> mApps;

        public AppsAdapter(Context context, List<ResolveInfo> mApps) {
            this.inflater = LayoutInflater.from(context);
            this.mApps = mApps;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            ViewHendler hendler;
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.row_view, null);
                hendler = new ViewHendler();
                hendler.textLable = (TextView)convertView.findViewById(R.id.textViewLable);
                hendler.iconImage = (ImageView)convertView.findViewById(R.id.imageViewIcon);
                convertView.setTag(hendler);
            } else {
                hendler = (ViewHendler)convertView.getTag();
            }
            ResolveInfo info = this.mApps.get(position);
            hendler.iconImage.setImageDrawable(info.loadIcon(getPackageManager()));
            hendler.textLable.setText(info.loadLabel(getPackageManager()));

            return convertView;

        }
        class ViewHendler{
            TextView textLable;
            ImageView iconImage;
        }

        public final int getCount() {
            return mApps.size();
        }

        public final Object getItem(int position) {
            return mApps.get(position);
        }

        public final long getItemId(int position) {
            return position;
        }
    }

} 
```

# plsql - DBMS_OUTPUT.PUT_LINE 不打印

> ID：10434474
> 
> 赞同：118
> 
> 时间：2012-05-03T15:24:57.210
> 
> 标签：plsql, oracle10g, sqlplus, dbms-output

执行以下代码时，它只是说程序已完成并且不打印我想要的信息（名字，姓氏），然后是下表中选择查询的其他值。

```
 CREATE OR REPLACE PROCEDURE PRINT_ACTOR_QUOTES (id_actor char)
AS
CURSOR quote_recs IS
SELECT a.firstName,a.lastName, m.title, m.year, r.roleName ,q.quotechar from quote q, role r,   
rolequote rq, actor a, movie m
where
rq.quoteID = q.quoteID
AND
rq.roleID = r.roleID
 AND
r.actorID = a.actorID
AND
r.movieID = m.movieID
AND
 a.actorID = id_actor;
BEGIN
FOR row IN quote_recs LOOP
DBMS_OUTPUT.PUT_LINE('a.firstName' || 'a.lastName');

end loop;
END PRINT_ACTOR_QUOTES;
/ 
```

设置服务器输出时，我得到

```
a.firstNamea.lastName
a.firstNamea.lastName
a.firstNamea.lastName
a.firstNamea.lastName 
```

多次！

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-05-03T15:30:51.320

“它只是说程序完成”语句中的“它”是什么？

默认情况下，大多数工具不会配置`dbms_output`要写入的缓冲区，并且不会在代码执行后尝试从该缓冲区读取。另一方面，大多数工具都有能力这样做。在 SQL*Plus 中，您需要使用命令`set serveroutput on [size N|unlimited]`. 所以你会做类似的事情

```
SQL> set serveroutput on size 30000;
SQL> exec print_actor_quotes( <<some value>> ); 
```

在 SQL Developer 中，您`View | DBMS Output`需要启用 DBMS 输出窗口，然后按绿色加号图标为特定会话启用 DBMS 输出。

此外，假设您不想为每一行打印文字“a.firstNamea.lastName”，您可能想要

```
FOR row IN quote_recs
LOOP
  DBMS_OUTPUT.PUT_LINE( row.firstName || ' ' || row.lastName );
END LOOP; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-05-23T07:29:10.620

1.  确保通过菜单栏中的视图选项打开了 Dbms 输出窗口。
2.  单击绿色的“+”号并添加您的数据库名称。
3.  写'DBMS_OUTPUT.ENABLE;' 在您的程序中作为第一行。希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-09-03T11:40:03.350

在第一行设置查询如下

```
SET SERVEROUTPUT ON 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-05-09T05:59:10.870

这个说法

> DBMS_OUTPUT.PUT_LINE('a.firstName' || 'a.lastName');

表示按原样打印字符串..**删除引号**以获取要打印的值。所以正确的语法是

```
DBMS_OUTPUT.PUT_LINE(a.firstName || a.lastName); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-12-31T10:12:43.007

对于 SQL 开发人员

您必须手动执行它

```
SET SERVEROUTPUT ON 
```

之后，如果您使用 DBMS_OUTPUT.PUT_LINE('info'); 执行任何过程；或直接。

这将打印该行

请不要尝试添加这个

```
 SET SERVEROUTPUT ON 
```

在函数和过程的定义中，它不会编译，也不会工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-01-25T05:21:45.537

我正在使用 Oracle SQL Developer，

在这个工具中，我必须**启用 DBMS 输出**才能查看 dbms_output.put_line 打印的结果

您可以在显示其他查询结果的结果窗格中找到此选项。所以，在结果窗格中，我有 7 个选项卡。第一个选项卡名为结果，下一个是脚本输出，依此类推。从中您可以找到一个名为“DBMS Output”的选项卡，选择此选项卡，然后第一个图标（看起来像一个对话图标）是**Enable DBMS Output**。单击此图标。然后执行 PL/SQL，然后选择“DBMS 输出”选项卡，您应该可以在那里看到结果。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2022-01-03T10:19:29.350

[![在此处输入图像描述](../Images/47a4726aecce65229b70abc2fe1ff1af.png)](https://i.stack.imgur.com/kCpa2.png)

在 Oracle SQL Developer 中，您可以按照下图的步骤进行操作：

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-02T07:25:55.193

他们都专注于 for 循环，但如果我们使用普通循环，那么我们必须使用游标记录变量。以下是修改后的代码

```
 CREATE OR REPLACE PROCEDURE PRINT_ACTOR_QUOTES (id_actor char)
    AS
    CURSOR quote_recs IS
    SELECT a.firstName,a.lastName, m.title, m.year, r.roleName ,q.quotechar from quote q, role r,   
    rolequote rq, actor a, movie m
    where
    rq.quoteID = q.quoteID
    AND
    rq.roleID = r.roleID
     AND
    r.actorID = a.actorID
    AND
    r.movieID = m.movieID
    AND
     a.actorID = id_actor;
    recd quote_recs%rowtype;
    BEGIN
    open quote_recs;
    LOOP
    fetch quote_recs into recs;
    exit when quote_recs%notfound;
    DBMS_OUTPUT.PUT_LINE(recd.firstName||recd.lastName);
    end loop;
    close quote_recs;
    END PRINT_ACTOR_QUOTES;
    / 
```

# python - 有没有不需要管理员安装的 Python IDE？

> ID：10434477
> 
> 赞同：10
> 
> 时间：2012-05-03T15:25:07.270
> 
> 标签：python

我们需要管理员来安装一些软件，他们需要将近一个月的时间才能为我们安装。所以我想找到一些无需管理员（Windows 7）即可安装的 Python IDE。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:31:49.620

考虑到 IDLE 可以被视为 IDE，您可以查看以下两个选项

[便携式 Python](http://www.portablepython.com/browser)

[可移动空闲](http://www.voidspace.org.uk/python/movpy/movableidle.html)

Netbeans 支持 Python 直到 6.9。您可以使用它的便携版本

[便携式 Netbeans](http://portableapps.com/node/24381)

如果您想使用 Eclipse 进行 Python 开发，这里有一个 Portable Version。您需要[PyDev](http://wiki.python.org/moin/PyDev)才能使用 Eclipse。

[便携式日食](http://sourceforge.net/projects/eclipseportable/)

[Anaconda](https://docs.continuum.io/anaconda/)作为 Python 发行版，[PyCharm](https://www.jetbrains.com/pycharm/)作为 IDE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T16:53:21.973

让我添加[惊人的编辑器](https://github.com/spyder-ide/spyder)spyderlib ！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T15:31:40.870

[http://www.portablepython.com/](http://www.portablepython.com/)

“一些最流行的免费 Python IDE 预装并预配置了 Portable Python。” - [http://www.portablepython.com/wiki/Documentation](http://www.portablepython.com/wiki/Documentation)

或者你可以使用：[http](http://www.voidspace.org.uk/python/movpy/movableidle.html) : //www.voidspace.org.uk/python/movpy/movableidle.html（空闲）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T16:03:37.440

或者你可以使用类似[https://www.pythonanywhere.com](https://www.pythonanywhere.com)的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-08T07:10:07.017

你也可以使用 Pyzo

[http://www.pyzo.org/](http://www.pyzo.org/)

它是一个可移植的、跨平台的 Python 发行版，带有一个名为 IEP 的编辑器。您甚至可以将其放入 USB 记忆棒中。它虽然面向科学用途。

![截屏](../Images/5579aeea11c4514abfd7f8087ffc9603.png)

# mysql - 从 MySQL 迁移到 MongoDB - 最佳实践

> ID：10434483
> 
> 赞同：5
> 
> 时间：2012-05-03T15:25:25.400
> 
> 标签：mysql, mongodb, database

因此，最好只是尝试一下并通过一些试验和错误来查看，但我正在尝试找出将非常简单的结构从 mysql 迁移到 mongodb 的最佳方法。假设我在 mysql 中有一个名为“articles”的主表，还有另外两个表，一个名为“categories”，另一个名为“category_linkage”。这些类别都有一个 ID 和一个名称。这些文章都有一个ID和其他数据。链接表将文章与类别相关联，因此您可以拥有与每篇文章相关的无限类别。

从 MongoDB 方法来看，将属于该文章的文章数据和类别 ID 存储在同一个集合中是否有意义，因此只有 2 个数据集合（一个用于文章，一个用于类别）？我的想法是，要从文章中添加/删除类别，您只需更新（$pull/$push）那个特定的文章文档，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T19:01:16.120

在我看来，一个好的模型应该是这样的：

```
{"article_name": "name",
 "category": ["category1_name", "category2_name", ...],
 "other_data": "other data value"
} 
```

因此，将类别名称直接嵌入到文章文档中。更新文章类别很容易，但完全删除一个类别需要修改属于该类别的所有文章。如果删除类别很频繁，那么将它们分开可能是一个好主意。

这种方法还可以轻松地对类别名称进行查询（无需使用单独的查询将名称映射到 id）。

因此，对数据建模的“正确”方式取决于假设的用例，就像 mongodb 和其他 nosql 数据库的典型情况一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T16:10:51.927

如果你有 Mac 电脑，你可以试试[MongoHub GUI](http://mongohub.todayclose.com/)。它具有“从 MySQL 导入”功能。

# java - 将 Java POJO 转换为 Drools DRL，反之亦然

> ID：10434498
> 
> 赞同：4
> 
> 时间：2012-05-03T15:26:02.777
> 
> 标签：java, drools, rule

我在构建到 Java POJO 的 UI 上有规则配置。我如何生成 Drools DRL（传递给将匹配事实等的其他组件，如果规则匹配则返回 true 或 false）。

我还从数据库接收 DRL 文件，为了在 UI 上显示规则，我需要转换回 Java POJO。

基本上是否有任何工具或脚本可以在 Java POJO 和 Drools DRL 文件之间进行转换？如果没有，最好的方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:17:00.457

我不确定您的 Java POJO 是什么？它们代表规则、模式、约束等吗？

如果是这样，Drools 有一个内部规范模型来表示所有类型的知识资产 [1]。我们不建议直接使用它，因为它是一个内部 API，可能会发生变化。

您的另一个选择是使用实际的规则描述符构建器 API [2] 动态生成规则 [3]。

最后，如果您有一个基于 Web 的 UI，并且您希望允许用户在其中编写您的规则，您可以选择将 guvnor 的规则编辑器嵌入到您自己的应用程序中 [4]。

希望这可以帮助。

[1] [https://github.com/droolsjbpm/drools/tree/master/drools-compiler/src/main/java/org/drools/lang/descr](https://github.com/droolsjbpm/drools/tree/master/drools-compiler/src/main/java/org/drools/lang/descr)

[2] [https://github.com/droolsjbpm/drools/tree/master/drools-compiler/src/main/java/org/drools/lang/api](https://github.com/droolsjbpm/drools/tree/master/drools-compiler/src/main/java/org/drools/lang/api)

[3] [https://github.com/droolsjbpm/drools/blob/master/drools-compiler/src/test/java/org/drools/lang/api/DescrBuilderTest.java](https://github.com/droolsjbpm/drools/blob/master/drools-compiler/src/test/java/org/drools/lang/api/DescrBuilderTest.java)

[4] [http://www.plugtree.com/guvnor-embed-asset%E2%80%99s-editor-in-your-application/](http://www.plugtree.com/guvnor-embed-asset%E2%80%99s-editor-in-your-application/)

# apache-flex - 在 Flex 4.5 中，DataGroup 是否可以为其所有单个项目启用 accessable？

> ID：10434499
> 
> 赞同：0
> 
> 时间：2012-05-03T15:26:08.607
> 
> 标签：apache-flex, accessibility, itemrenderer, section508

我正在构建一个必须可访问并符合第 508 节准则的 Flex 应用程序。一些预先构建的部分正在大量使用 DataGroup、DataGrid 和 ItemRenderers。我什至无法获得使用 ItemRenderers 创建的任何东西来接收键盘焦点，因此似乎不可能显示它们的可访问性属性。

有没有一个技巧可以让 ItemRenderer 获得焦点？或者我可以使用一些替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:58:13.983

**解决方案：**

我偶然发现了这一点，我不完全确定为什么会这样，但解决方案很简单。只需添加`implements="mx.managers.IFocusManagerComponent"`到自定义的根标签中`ItemRenderer`，然后列表中的每个项目都可以接收焦点并暴露其`accessibilityProperties`.

奇怪的是，如果自定义渲染器未能实现所需的`IFocusManagerComponent`方法，Flex 编译器不会抱怨。我不知道为什么，但我推测这些方法是在代码链的某处实现的，除非组件明确实现`IFocusManagerComponent`.

我现在遇到的唯一问题是只有可见项目显示它们`accessibilityProperties`，这是有道理的，因为`ItemRenderers`只为屏幕上的可见项目创建，但如果最后一个可见项目`ItemRenderer`失去焦点，我应该找到一些方法来自动滚动列表。

# git - 使用 Git Flow，成功的分支模型

> ID：10434501
> 
> 赞同：3
> 
> 时间：2012-05-03T15:26:11.447
> 
> 标签：git, version-control, branch, git-flow

我加入了一个项目，他们的代码测试和版本控制解决方案有点混乱，所以我负责实施这些以及更多。

我对 Git 比较陌生，我想知道我应该如何实现[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)？我的意思是：

*   我是否应该在 LAMP 服务器上设置 git 存储库`git flow init`（所有测试和版本控制都将在其中进行）？
*   如何将一些更改推送到远程存储库中的特定`feature_x`//分支`hotfix_y`？`releas_z`
*   我应该`git flow init`在我的本地克隆存储库上进行相同的设置吗？

我有 git 的基本知识，所以我很感激你的指导。

## 更新

如果您知道如何使用控制版本系统并能够从本地同步到实时和/或测试环境的更好解决方案，请告诉我......我愿意学习

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:46:27.840

git-flow 不是你通常在远程服务器上运行的东西，它只是一个帮助管理分支的工具。您只会`git flow init`在有人将进行开发工作的非裸结账处运行。所以，按顺序：

*   不，您只需创建一个裸 git repo（使用 git flow 不会从根本上改变如何使用 git）
*   使用`git push`（或者，第一次仅使用：`git push --set-upstream origin feature/name-of-current-feature`-这也在当前版本的 git 尝试推送不跟踪任何内容的分支中的错误消息中）
*   是的

# jquery - eq 选择器不工作

> ID：10434506
> 
> 赞同：0
> 
> 时间：2012-05-03T15:26:34.367
> 
> 标签：jquery, css

使用以下选择器选择两个 h3 元素：

```
$("#content div div ul h3").css("border","1px solid red"); 
```

我需要按如下方式替换这些元素：

```
$('#content div div ul h3:eq(0)').replaceWith('<div>Top 5 Photos </div>');      
$('#content div div ul h3:eq(1)').replaceWith('<div>Recent Photos</div>'); 
```

我遇到的问题是两个元素（ eq(0) 和 eq(1) ）都被“Top 5 Photos”取代，我不知道为什么以及如何解决这个问题。

对于解决此问题的任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:49:37.983

试试这个：

```
$('#content div div ul h3:eq(0)').replaceWith('<div>Top 5 Photos </div>');      
$('#content div div ul h3:eq(0)').replaceWith('<div>Recent Photos</div>'); 
```

这个答案似乎很危险，但我认为这是正确的，因为当你第一次替换 时`h3`，`div`第二个`h3`就变成了`first`ie `eq(0)`。因此，您永远无法获得索引为 2 的 h3 即`eq(2)`。

**[演示](http://jsfiddle.net/Pvgyt/)**

你也可以试试这个：

```
var replaces = ['<div>FIRET</div>', '<div>SECOND</div>'];
$('#content div div ul h3').each(function(index, val) {
    $(this).replaceWith(replaces[index]);
}); 
```

**[演示](http://jsfiddle.net/TRKJu/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:31:07.477

你错过了`li`

```
$('#content div div ul li:eq(0) h3').replaceWith('<div>Top 5 Photos </div>');      
$('#content div div ul li:eq(1) h3').replaceWith('<div>Recent Photos</div>'); ​ 
```

[例子](http://jsfiddle.net/YRJST/2/)

* * *

或者请记住，您只需替换一个 h3 标签：

```
$('#content div div ul h3:eq(0)').replaceWith('<div>Top 5 Photos </div>');      
$('#content div div ul h3:eq(0)').replaceWith('<div>Recent Photos</div>'); ​ 
```

[例子](http://jsfiddle.net/YRJST/3/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T15:31:15.637

试试这个;

```
$('#content div div ul h3').eq(0).replaceWith('<div>Top 5 Photos </div>'); 
```

还要检查数量；

```
console.log($('#content div div ul h3').size()); 
```

# c# - 条件变量

> ID：10434508
> 
> 赞同：0
> 
> 时间：2012-05-03T15:26:37.303
> 
> 标签：c#, asp.net

我错过了一些东西，我该怎么做？

```
var now = DateTime.Now;
string loadStartDate = Request.QueryString["sd"] == String.Empty ? now.AddMonths( -14 ).ToShortDateString();
string loadEndDate = Request.QueryString[ "ed" ] == String.Empty ? now.ToShortDateString(); 
```

基本上，如果 sd 和/或 ed 为空白，则当页面加载时，然后用我预定义的内容填充日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:29:04.197

你忘记了 a`:`和它之后的部分。

条件运算符包含三个部分：

*   谓词 ( `Request.QueryString["sd"] == String.Empty`)
*   真正的分支
*   假分支

您缺少错误的分支语法和值。

我会把它写成：

```
string loadStartDate = string.IsNullOrWhitespace(Request.QueryString["sd"])
                       ? now.AddMonths( -14 ).ToShortDateString()
                       : Request.QueryString["sd"]; 
```

笔记：

`string.IsNullOrWhitespace`是 .NET 4.0 的新功能，因此`string.IsNullOrEmpty`请用于以前的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:31:47.030

它应该是这样的：

```
string loadStartDate = Request.QueryString["sd"] == String.Empty ? now.AddMonths
( -14 ).ToShortDateString():SOME OTHER VALUE; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:33:57.823

条件运算符的语法是：

```
condition ? truevalue : falsevalue 
```

您缺少冒号和条件为假时的值。

您*可以*为此使用条件运算符，但它会变得有点重复。这样做：

```
DateTime now = DateTime.Now;
string loadStartDate = Request.QueryString["sd"];
if (String.IsNullOrEmpty(loadStartDate)) loadStartDate = now.AddMonths(-14).ToShortDateString();
string loadEndDate = Request.QueryString[ "ed" ];
if (String.IsNullOrEmpty(loadEndDate)) loadEndDate = now.ToShortDateString(); 
```

# c++ - 如何修改我的 boost::any like 类

> ID：10434514
> 
> 赞同：0
> 
> 时间：2012-05-03T15:27:00.200
> 
> 标签：c++, class, boost

我正在尝试实现`boost::any`类似的类：

```
struct any
{
private:
struct holderBase
{
    virtual ~holderBase(){}
};

template<typename T>
struct holder : public holderBase
{
    T content;
    holder(const T& value) : content(value){}
    holder(const holder<T>& other) : content(other.content){}
};

holderBase *hl;
public:
template<typename T>
any(const T& data = T()) { hl = new holder<T>(data); }
any(const any& other) { hl = other.hl; }

template<typename T>
T get()
{
    if(holder<T>* p_hl = dynamic_cast<holder<T>*>(hl))
        return p_hl->content;
    else
        throw std::runtime_error("std::runtime_error");
}
}; 
```

我使用持有者类（由 继承`holderBase`）来存储数据。如何修改`any::get()`函数（甚至修改整个代码）使其不需要模板参数（`get()`函数）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:33:47.527

你可以这样做：

```
template<typename T>
T get(T *ptr); 
```

与 C`time`函数类似，您将返回结果并将其存储在`ptr`.

编辑：您还可以覆盖铸造运算符：

```
template<typename T>
operator T()
{
   return get<T>();
} 
```

这将隐含地做你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:42:49.353

显而易见：如果您不想将 1 个特定类型返回给用户，则需要对其进行模板化。你对此无能为力。

# android - 形状可绘制尺寸不起作用

> ID：10434517
> 
> 赞同：52
> 
> 时间：2012-05-03T15:27:12.320
> 
> 标签：android, drawable, xml-layout, shapedrawable

我有一个非常简单的形状，我想设置它的宽度：

```
<shape android:shape="rectangle">
    <solid android:color="@color/orange"/>
    <size android:width="2dp"/>
</shape> 
```

但是，当我将其分配给 EditText 的背景时，它只显示橙色背景而不是宽度为 2dp 的矩形。为什么设置大小不起作用？我想在左侧创建一个带有橙色矩形的透明可绘制对象。我也有这个包装在一个选择器中：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true">
        <shape android:shape="rectangle">
            <solid android:color="@color/orange"/>
            <size android:width="2dp" android:height="6dp"/>
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@android:color/transparent"/>
        </shape>
    </item>
</selector> 
```

我试过增加高度只是为了看看它是否会改变大小。它没有。这就像它完全忽略了大小。怎么回事？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2018-07-09T17:37:25.093

对我来说，将项目的重力设置为“中心”解决了这个问题。例如：

```
<item android:id="@android:id/progress" android:gravity="center">
    <clip>
        <shape>
            <size android:height="2dp"/>
            <solid android:color="@color/my_color"/>
        </shape>
    </clip>
</item> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-11-14T06:36:51.527

它可以与`foreground`. 似乎您无法设置背景的重力。但是你可以在前台。我检查了 API 21、23 和 24（嗯，使用 Studio 设计预览），然后在 ImageView 上放置了一个实心圆点。

```
<shape android:shape="oval" xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@color/colorPrimary" />
    <size android:height="8dp" android:width="8dp" />
</shape> 
```

使用布局片段

```
 <ImageView
            android:foreground="@drawable/list_new_dot"
            android:foregroundGravity="right|center_vertical"
            tools:src="@drawable/model_1_sm"
            /> 
```

**更新**：虽然它在布局设计工具中似乎可以工作，但在模拟器中看起来并不相同。**更新 2**：由于这个答案有几票，您可能想检查我实际使用的内容以显示新的指示点： [https ://gist.github.com/CapnSpellcheck/4d4638aefd085c703b9d990a21ddc1eb](https://gist.github.com/CapnSpellcheck/4d4638aefd085c703b9d990a21ddc1eb)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-11T04:13:29.723

Just to specify the user983447's answer - the size attribute does really mean a proportion. You should set the size for all shapes in your layer-list and it'll be used a as a proportion when scaling - like the `layout_weight` attribute of `LinearLayout`. So it's better to name it not a `size` but a `weight`

Below is a work-around how to implement top and bottom white lines without using the `size` attribute:

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape>
            <solid android:color="#fff" />
        </shape>
    </item>
    <item android:top="1dp" android:bottom="1dp">
        <shape>
            <solid android:color="#888" />
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-20T16:18:31.593

由于以下原因，我发现第一次 Androider 的 layer-list 非常狡猾。乍一看，大多数人会认为项目的顶部、底部、右侧、左侧属性是来自顶部、底部、右侧、左侧。其中值如下：

```
<item android:top="10dp"> 
```

将从相应容器的顶部为您提供 10dp 的起点。不是这种情况。将其视为顶部，底部，右侧，左侧。`<item android:top="10dp">`仍然会为您提供离顶部 10dp 的起点，但是当您想设置底部时会发生什么？

```
<item android:bottom="20dp"> 
```

这不会让您在距 TOP 20dp 处的底部，而是距容器底部 20dp 的底部。

因此，例如对于 100dp 的容器，如果您想要一个顶部边缘从 20dp 开始，底部边缘从 40dp 开始的矩形：

```
<item android:top="20" android:bottom="60dp"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-21T08:19:48.643

shape 的 size 属性将提供 drawable.getIntrinsicWidth 和 getIntrinsicHeight 的值。

如果drawable的容器（例如ImageView，TextView）具有布局参数WRAP_CONTENT，那么如果drawable的drawingState改变，容器尺寸也会改变。

但是ImageView drawingState实现中的android框架中有一个错误

ImageView 仅通过 state_selected 上的可绘制尺寸更新/调整其尺寸，但不在 state_activated

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T11:08:25.860

我有类似的问题。

文档（[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)）说：

> <尺寸>
> 
> 形状的大小。(...)
> 
> 注意：默认情况下，形状缩放到容器视图的大小，与此处定义的尺寸成比例。在 ImageView 中使用形状时，可以通过将 android:scaleType 设置为“center”来限制缩放。

如果我理解正确，这意味着“尺寸”标签不是用于设置大小，而是用于设置比例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-03T14:26:58.123

当您将其用作背景时，形状的大小将被忽略`View`。当您通过以下方式显示它时，它将起作用`ImageView`：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="#FF7700" />
    <size android:width="20dp" android:height="20dp"/>
</shape> 
```

在您的布局 XML 中：

```
<!-- will have the size of 20dp x 20dp -->
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/my_shape"
    /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-11T04:29:14.267

用了这个。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<stroke
    android:color="@color/lgray"
    android:width="1dip" />

<corners
    android:bottomLeftRadius="0dip"
    android:bottomRightRadius="0.1dip"
    android:topLeftRadius="0dip"
    android:topRightRadius="0.1dip" />

<solid android:color="@color/White" />

</shape> 
```

把这个**rectangle.xml**放到 drawable.and 设置你的视图背景。

# ruby-on-rails-3 - 在 GET 请求中忽略 response_with 位置

> ID：10434521
> 
> 赞同：0
> 
> 时间：2012-05-03T15:27:20.577
> 
> 标签：ruby-on-rails-3

在我结账过程的每一步，订单都会通过`PUT`请求进行更新。但是，其中一个州有一个提交给第三方的表单，该表单重定向回我的站点，调用 update 方法`GET`（对此无法控制）。

为什么我的`respond_with`代码似乎被完全忽略并且出现`Missing Template checkout/update`错误？应该是打的`#edit`。

**CheckoutController.rb**

```
before_filter :load_order

def update
  if @order.update_attributes(params[:order])
    @order.next
  end
  respond_with(@order, :location => checkout_state_url(@order.state))
end 
```

**路线.rb**

```
match '/checkout/update/:state' => 'checkout#update', :as => :update_checkout
match '/checkout/:state' => 'checkout#edit', :as => :checkout_state
match '/checkout' => 'checkout#edit', :state => 'client_details', :as => :checkout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:17:16.740

`respond_with`根据 HTTP 动词和资源是否有错误，它看起来会做不同的事情。见[这里](http://blog.plataformatec.com.br/tag/http/)和[这里](http://api.rubyonrails.org/classes/ActionController/Responder.html)。

以下代码对我有用：

```
def update
    if @order.update_attributes(params[:order]) && @order.next
        respond_with(@order) { |format| format.html { redirect_to checkout_state_url(@order.state) } }
    else
        respond_with(@order) { |format| format.html { render :edit } }
    end
end 
```

# c# - c# 将类型传递给子类

> ID：10434522
> 
> 赞同：3
> 
> 时间：2012-05-03T15:27:22.107
> 
> 标签：c#, generics

我正在写一个 RESTFUL 客户端库，返回对象类型的一部分取决于请求的参数。

例如，客户端有一个名为 ExecuteCommand 的方法，它返回一个如下所示的响应对象：

```
public class MyResponse
{
   public MyResult Result{ get; set; }
   public MyResponseHeader ResponseHeader { get; set; }
} 
```

这是 MyResult 类：

```
public class MyResult
{
   public object[] DocumentList{ get; set; }
   public int NumRecords{ get; set; }
   public int Start{ get; set; }
} 
```

我想做的是将“文档类型”传递给 ExecuteCommand 方法，并让它返回带有 MyResult 对象的 MyResponse 对象，其中 IDocument 是传入的类型。

有这样的效果：
`MyResponse response = MyClient.ExecuteCommand<MyDocument>(request);`

在这种情况下，我想要返回的是带有 MyDocument 类型的 DocumentList 的 MyResult。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:33:10.680

你可以在你的类上使用泛型：

```
public class MyResponse<T>
{
   public MyResult<T> Result{ get; set; }
   public MyResponseHeader ResponseHeader { get; set; }
}

public class MyResult<T>
{
   public T[] DocumentList{ get; set; }
   public int NumRecords{ get; set; }
   public int Start{ get; set; }
} 
```

然后你可以使用它自己的（在这种情况下）`ExecuteCommand`创建你的，并且使用 var 将使它更容易和更具可读性：`MyResponse``T``MyDocument`

```
var response = MyClient.ExecuteCommand<MyDocument>(request); 
```

# mysql - 分组 SQL 查询

> ID：10434523
> 
> 赞同：0
> 
> 时间：2012-05-03T15:27:24.270
> 
> 标签：mysql, sql, mysql-python

有时，一个应用程序需要相当多的 SQL 查询才能执行任何有用的操作。我想知道是否有办法将它们作为批处理发送到数据库，以避免在客户端和服务器之间来回切换的开销？

如果没有标准方法，我使用 MySQL 的 python 绑定。

PS：我知道 MySQL 有一个 executemany() 函数，但这仅适用于使用不同参数多次执行的同一查询，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:34:17.310

此过程最适用于插入

*   将所有 SQL 查询放入存储过程。这些最终将成为子存储过程
*   创建主存储过程以运行所有其他存储过程。
*   修改主存储过程以接受子存储过程所需的值
*   修改主存储过程以接受使用“if”语句的命令，以了解要运行哪些子存储过程

如果您需要从数据库返回数据，请同时使用 1 个存储过程。

# c - c socket编程，一次只接收一行

> ID：10434525
> 
> 赞同：0
> 
> 时间：2012-05-03T15:27:29.843
> 
> 标签：c, sockets

我在客户端一次只接收一条线路的问题。我正在尝试一种方法来一次接收整个流。谁能纠正我对接收问题的看法？我已经包含了客户端代码和我认为相关的部分服务器端代码。

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netdb.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

int main(int argc, char *argv[])

{
    FILE *log;
    int opt;
    int count = 0;
    int sock, bytes_received;
    char send_data[2048],recv_data[2048];
    struct hostent *host;
    struct sockaddr_in server_addr;

    if(remove("client_log")) ;

    if(argc == 2)
    {
      if(strcmp(argv[1], "-v") == 0)
      {
        log = fopen("client_log", "a");
        opt = 1;
      }
      else if(strcmp(argv[1], "-V") == 0)
      {
        log = fopen("client_log", "a");
        opt = 2;
      }
    }

    }
    else
      opt = 0;

    host = gethostbyname("127.0.0.0");

    if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
        perror("Socket");
        exit(1);
    }

    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(noneya);
    server_addr.sin_addr = *((struct in_addr *)host->h_addr);
    bzero(&(server_addr.sin_zero),8);

    if (connect(sock, (struct sockaddr *)&server_addr,
                sizeof(struct sockaddr)) == -1)
    {
        perror("Connect");
        exit(1);
    }

    while(1)
    {

      bytes_received=recv(sock,recv_data,2048,0);
      recv_data[bytes_received] = '\0';

      if (strcmp(recv_data , "q") == 0 || strcmp(recv_data , "Q") == 0)
      {
       close(sock);
       break;
      }

       else
      {
        if(opt != 0)
          fprintf(log, "\n Received Data: %s \n", recv_data);
        if(opt == 2)
          printf("\nReceived Data: %s \n" , recv_data);
      }

       if(count == 0)
       {
         printf("Pick an option: \n");
         printf("1 - to search by Department only\n");
         printf("2 - to search by Department and Class Number\n");
         printf("3 - to search more specifically\n");
         printf("q or Q - to Quit");
       }
       printf("\nSEND: ");
       gets(send_data);
       if(count == 0)
       {
         count = (int)send_data;
         if(count == 3)
            count++;
       }
       else if(count > 0)
         count--;

        if(opt != 0)
          fprintf(log, "\n Sending Data: %s \n", send_data);
        if(opt == 2)
          printf("\n Sending Data: %s \n" , send_data);

      if (strcmp(send_data , "q") != 0 && strcmp(send_data , "Q") != 0)
       send(sock,send_data,strlen(send_data), 0);

       else
      {
       send(sock,send_data,strlen(send_data), 0);
       close(sock);
       break;
      }

    }
return 0;
} 
```

这是事物的客户端：

```
 case 1:

            fread(data, sizeof(sched_record), MAX_RECORD, filePointer);
            fclose(filePointer);
            char send_data[] = "Enter Department Name";
            send(connected, send_data, strlen(send_data), 0);
            bytes_received = recv(connected, recv_data, BUF, 0);
            recv_data[bytes_received] = '\0';
            strcpy(tempDept, recv_data);
            for (i=0; i<MAX_RECORD; i++){
                if ((strcmp(tempDept, data[i].Dept)==0) && tempCourse != data[i].course){
                        sprintf(send_data,"%s %d", data[i].Dept, data[i].course);
                        send(connected, send_data, strlen(send_data), 0);
                        tempCourse = data[i].course;

                }
            }
        break; 
```

如果需要，我可以提供更多信息。我相信服务器端没问题。我已经使用 -Wall 和 -Wextra 进行了编译，但没有收到任何警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:53:46.887

您一次接收一行数据，因为一次发送一行数据。不过，它最终以这种方式出现的事实纯属运气。TCP 流可以由客户端 TCP 堆栈或通过另一端的缓冲任意拆分和重组。您需要在流中使用某种形式的显式帧 - 例如，在每行之前发送的计数，或`\n`在行尾发送的计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:54:16.013

为了补充黄昏的回答，您在这里遇到的是需要使用基于*流的协议*。

因为 TCP 不是面向消息的（与 UDP 和其他更奇特的消息协议不同），所以您正在发送和接收单个字节流。基本上，如果您将客户端视为一本书的作者，将您的服务器视为其读者，那么在 TCP 的世界中，所有标点符号都将被删除:)。

作为程序员，您的工作是提供一种定义明确的方式来编码和/或嵌入一个消息/帧结束和下一个开始的位置。使用换行符是最简单的方法，但任何基于 TCP 的协议要么使用长度，要么使用分隔符，要么使用它们的组合（参见 HTTP）。

# android - 在android中制作标签菜单的最佳方法？

> ID：10434527
> 
> 赞同：-1
> 
> 时间：2012-05-03T15:27:39.453
> 
> 标签：android, android-layout, android-tabhost

我们有 4 个活动，我们希望能够使用菜单等选项卡在它们之间切换。但由于 TabsActivity 已被弃用，看起来唯一的方法是使用操作栏，并将活动转换为片段？
有没有一种更简单的方法来制作标签，我们可以让我们的活动保持原样，而不必重组很多东西来让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:40:31.620

没有简单的方法。但除非您的 TabsActivity 代码非常复杂，否则您可能不会觉得转换为 FragmentActivity 太痛苦。毕竟，困难的部分通常是活动在里面做什么。

# msbuild - 使用 MSBuild 和 TeamCity 部署问题

> ID：10434528
> 
> 赞同：4
> 
> 时间：2012-05-03T15:27:40.933
> 
> 标签：msbuild, teamcity, msdeploy, webdeploy

我正在尝试使用 MSBuild 和 TeamCity 构建和部署 Web 应用程序。我已经阅读了多个 SO 帖子并最终决定使用这些参数

```
/p:Configuration=Debug 
/p:OutputPath=bin 
/p:DeployOnBuild=True 
/p:DeployTarget=MSDeployPublish 
/p:username=BuildUser 
/p:password=Password1 
/p:AllowUntrustedCertificate=True 
/p:DeployIisAppPath=<siteName>
/p:MSDeployPublishMethod=WMSVC 
/p:MsDeployServiceUrl=http://<servername> 
```

但是，我收到以下错误：

> 无法完成对远程代理 URL 的请求。（无法完成对远程代理 URL 'https://10.10.10.42/MSDEPLOYAGENTSERVICE:8172/msdeploy.axd?site=CFS.Services.Hosting'的请求。）

出于某种原因，teamcity 或 msbuild 都假设我想通过 https 进行部署，而我并没有。如果我像在 Visual Studio 中那样设置 p:MsDeployServiceUrl = http:// ，则会收到以下错误：

> 无法完成对远程代理 URL“https://http//10.10.10.42:8172/msdeploy.axd?site=CFS.Services.Hosting”的请求。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:59:44.853

你试过使用`MSDeployPublishMethod=RemoteAgent`吗？根据 MSDeployServiceURL 的值（即使用 http 而不是 https 的 URL），我猜您正在使用远程代理服务，而不是通过 Web 管理服务调用 MSDeploy。如果这不正确，请告诉我，我可以尝试深入研究一下。

# jquery - 从数据库异步读取

> ID：10434543
> 
> 赞同：0
> 
> 时间：2012-05-03T15:28:19.293
> 
> 标签：jquery, ruby-on-rails, ruby

我正在尝试创建一个包含详细信息的模式窗口窗口。

```
# show.html.erb
<%= link_to 'Info', player_info_path, :remote => true %>

# Controller
def player_info
    @player = Player.find(1) # ignore the hard-coding
end

# player_info.js.erb
alert(<%= @player.name %> ); # alerts 'undefined'
$("#player_info").html("<%= escape_javascript(render("detailed_info"))%>"); 
```

javascript 已执行，但我如何从控制器获取详细信息到 javascript，或者我可以从 js.erb 执行 CRUD 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:07:08.513

如评论中所述，您缺少`alert("<%= @player.name %>");`. 您已经正确设置了其他所有内容 - 因此您可以访问 player_info.js.erb 中的 @player 属性，如下所示`@player.attribute`：

# javascript - 如何使用 Modernizr 和 YesNope Javascript 检查 FormData

> ID：10434544
> 
> 赞同：5
> 
> 时间：2012-05-03T15:28:22.320
> 
> 标签：javascript, modernizr, yepnope

如何使用[Modernizr](http://modernizr.com/)和[YepNope](http://yepnopejs.com/)检查 FormData 对象？

```
<script>
yepnope({  
  test : what.to.check,  
  yep  : 'normal.js',  
  nope : 'flashupload.js'  
});      
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T15:31:27.453

前几天我一直在寻找一种 Modernizer 方法来检查`FormData`，但找不到。

但是，没有 Modernizer 也很容易做到：

```
window.FormData // exists if it exists, undefined if it doesn't! 
```

所以：

```
yepnope({  
  test : "FormData" in window,
  yep  : 'normal.js',  
  nope : 'flashupload.js'  
}); 
```

FWIW，[MDC 兼容性`FormData`](https://developer.mozilla.org/en/XMLHttpRequest/FormData#Browser_compatibility)表示您的目标是：

*   铬 7+
*   火狐4.0
*   IE 10+
*   野生动物园 5+

... Opera 支持未知

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-21T16:34:06.907

您可以使用自定义测试扩展 Modernizr。只需将其放入 Modernizr 文件的末尾即可：

```
Modernizr.addTest('formdata', ('FormData' in window)); 
```

# iphone - UIImageView 底行像素缺失

> ID：10434546
> 
> 赞同：0
> 
> 时间：2012-05-03T15:28:28.310
> 
> 标签：iphone, uiimageview, uiimage, ios5.1

> **可能重复：**
> [带有 Xcode 4.3.1 的 iOS 5.1：[UIColor colorWithPatternImage:] 奇怪的行为仅在设备上](https://stackoverflow.com/questions/9630870/ios-5-1-with-xcode-4-3-1-uicolor-colorwithpatternimage-strange-behavior-only)

嗨，我这里有一个奇怪的（我想）。

我有一个应用程序，其中有一个运行良好的 uitableview。我一直在重新开发并将我的 iphone 更新到 IOS 5.1。这是否是红鲱鱼，我不知道。无论如何，我注意到我的背景/所选图像的底行像素丢失了！

```
((UIImageView *)cell.backgroundView).image = [UIImage imageNamed:@"myBg1.png"];
((UIImageView *)cell.selectedBackgroundView).image = [UIImage imageNamed:@"myBg2.png"]; 
```

我已将应用程序简化为屏幕顶部的简单 UIImageView ....

![在此处输入图像描述](../Images/514b2e1d4a6f03a92115494df4406e32.png)

紫色区域是一个 UIImageView。带有黄色边框的灰色区域是我的图像，最终将作为我的表格行的 b/g。在 IB 中一切看起来都不错。

现在，当我在 iPhone 上运行它时，我得到了这个......

![在此处输入图像描述](../Images/5726f481083585e7608a2b28473f7d6e.png)

缺少底行像素（黄色边框）。在代码中没有对此进行特殊的调整大小，就像 IB 放置它一样，除了 View Mode 更改为 Top 而不是 ScaleToFill。理论上，图像保持不变。

在 IB 中，一台 iPad(5.01)、一台 iPod (4.2.1) 和模拟器，一切正常，并显示了完整的图像！

任何人都可以对此有所了解，提供解决方案吗？我要拔头发了！

谢谢

适合

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:57:31.427

修复！我对用作图像的 png 进行了压缩。

通过此链接找到答案...

[带有 Xcode 4.3.1 的 iOS 5.1：[UIColor colorWithPatternImage:] 奇怪的行为仅在设备上](https://stackoverflow.com/questions/9630870/ios-5-1-with-xcode-4-3-1-uicolor-colorwithpatternimage-strange-behavior-only)

浪费了一天半的时间，但现在工作了一个梦想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:50:25.273

也许设置单元格的行高 + 启用“自定义”行高应该会有所帮助（在 Interface Builder 中 - 或在代码中相同）。或者只是您在 (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 中返回的高度不正确。这绝对是个身高问题。

![界面生成器中的 UITableViewCell 行高](../Images/5c2fe6fcf029d85258ba2999eec8d9a2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:46:50.610

另一件事可能是错误的：图像视图的“视图 - 模式”是什么？

我的意思是这个：

![Interface Builder 中的查看模式设置](../Images/f4f35b93fa6a5dc964c2f8bd10061167.png)

# azure - 具有不同 web.config 的一个 webrole 中的多个站点实例

> ID：10434553
> 
> 赞同：1
> 
> 时间：2012-05-03T15:28:59.970
> 
> 标签：azure

我想使用同一应用的多个物理站点将我的 MVC3 应用部署到 Azure。很高兴我可以使用 ServiceDefinition.csdef 中的站点元素来执行此操作。

但我希望每个站点都连接到不同的数据库。连接字符串在 web.config 中。除了登录虚拟机并手动更改之外，是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:53:18.280

[回答您的评论] - 使用 Windows Azure（实际上使用任何 PaaS 解决方案）第一条经验法则是，当角色启动时，所有配置都应该准备就绪，第二条经验法则是不应该通过 RDP 在 VM 中执行任何操作访问，因为更改不会持续存在。由于此必需的配置要么部署在 Azure 包中，要么直接从启动任务中修改。

[回答您的问题] 在 Windows Azure 中，您可以在一个 Web 角色中运行多个站点，但是它们都应该共享相同的主 web.config，因为多个站点在一个 Web 角色中运行。这是你可以做到的：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)

现在您的要求是拥有多个数据库，因此在您的 web.config 中您可以添加多个数据库连接字符串，如下所示： `$`

```
 <ConnectionString>
 <Add name="DB1" connectionString="Data Source=DS1.........."/>
 <Add name="DB2" connectionString="Data Source=DS2.........."/>
 </ConnectionString> 
```

完成上述操作后，您可以在 ASP.NET 代码中枚举这些连接字符串并与给定示例中描述的特定站点一起使用：

[http://www.dotnetspark.com/kb/780-how-to-use-multiple-database-connection.aspx](http://www.dotnetspark.com/kb/780-how-to-use-multiple-database-connection.aspx)

最后，您可以在开发过程中使用您的 Web 角色添加多个站点，并且还可以在 web.config 中指定特定的数据库连接，所以我认为根本不需要使用启动任务或在 VM 中执行某些操作，除非我遗漏了什么这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:02:51.733

您可以注册一个启动任务，以便在 VM 启动时去修改/移动 web.config 文件。这有点乱，但比手工更干净！

[http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)

# java - 为 Eclipse 安装 wro4j 插件

> ID：10434563
> 
> 赞同：1
> 
> 时间：2012-05-03T15:29:24.677
> 
> 标签：eclipse安装, wro4j, , java, eclipse, jakarta-ee, eclipse-plugin

我正在寻找为[eclipse安装](/questions/tagged/eclipse "显示标记为“日食”的问题")[wro4j](/questions/tagged/wro4j "显示标记为“wro4j”的问题")插件。有人可以告诉我如何安装它或指向一个可以告诉我如何安装它的页面。

eclipse 的具体版本是 Eclipse Java EE IDE for Web Developers。版本：Indigo Service Release 1 内部版本 ID：20110916-0149

该插件由 JBoss 创建/支持，位于此处。

[https://github.com/jbosstools/m2e-wro4j](https://github.com/jbosstools/m2e-wro4j)

我只是不熟悉安装过程。我通常在 Eclipse 中使用帮助/安装新软件，但这看起来不像这个插件的选项。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:02:49.390

在**安装新软件**窗口中，您需要在**使用**字段中添加 wro4j 更新站点。根据您上面链接的页面，wro4j 发布站点是[http://download.jboss.org/jbosstools/updates/m2e-wro4j/](http://download.jboss.org/jbosstools/updates/m2e-wro4j/)

添加该更新站点后，您应该能够看到可用的 wro4j 功能/插件。请注意，根据更新站点的结构，您可能必须取消选中**Group items by category**选项。

# php - 将 SELECT 语句编码为 JSON，iOS 问题

> ID：10434566
> 
> 赞同：0
> 
> 时间：2012-05-03T15:29:32.570
> 
> 标签：php, mysql, ios, arrays, json

我正在尝试使用 PHP 对我的 SQL SELECT 语句的结果进行 JSON 编码，并且不确定我在编码之前是否正确格式化了我的数组。

我的 PHP 代码是：

```
$stmt = $this->db->prepare('SELECT  CLINIC.clinic_name AS "clinicname" FROM CLINIC ORDER BY CLINIC.clinic_name ASC');

$stmt->execute();
$stmt->bind_result($clinicname);            
$test = array();                   
while($stmt->fetch()){
    $tempArray = array('clinicname' => $clinicname);
    array_push($test, $tempArray);
}
$stmt->close();

// Return clinics, encoded with JSON
header('Content-type: application/json');

$json = json_encode($test);
echo $json; 
```

这个数组创建和编码的结果是：

```
[{"clinicname":"Bangor"},{"clinicname":"Belfast"},{"clinicname":"Crumlin"},{"clinicname":"Londonderry"}] 
```

所以我有一个数组数组。

这可以作为 JSON 发送吗？我看到的所有示例似乎都是一个数组。到目前为止我是正确的吗？

然后，关于 iOS，接收到的对象是 NSDictionary 还是 NSArray？

任何关于上述内容的帮助或反馈都将受到极大的欢迎。

*   马特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:35:02.457

是的，您的 JSON 格式正确。下次您可以使用[JSON 验证器](http://jsonlint.com/)进行检查。

[另外，关于json_encoding](http://php.net/manual/en/function.json-encode.php)的一些细节。

[] 代表一个数组，{} 代表一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:35:05.783

在 iOS 中，如果这是来自 http 请求的结果，它将是 NSString 类型，然后需要通过以下方式解析：

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

然后将其转换为 NSArray、NSDictionary NSString 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:39:38.367

是的，您可以发送数组数组，并且可以通过以下方式访问：

```
$response = json_decode($response,true);

  foreach ($response as $resp)
  {
    echo "<br>";
    print_r($resp);
  } 
```

json 示例：

```
[{"id":"38","first_name":"prueba","second_name":"example","first_surname":"prueba","second_surname":"GONZALEZ","email":"x@x.net","network_login":"x.x","pos_name":"x x","position":"1","active":"1"},{"vhur":"292","first_name":"c","second_name":"example","first_surname":"example","second_surname":null,"email":"example@example.com","network_login":"example.example","pos_name":"example example","position":"2","active":"1"}] 
```

# windows-phone-7 - wp7 webbrowser中的变音符号显示不正确

> ID：10434568
> 
> 赞同：1
> 
> 时间：2012-05-03T15:29:47.157
> 
> 标签：windows-phone-7, browser, webbrowser-control

我在 windows phone 7 上遇到了 WebBrowser 内容的问题。需要在我的应用程序中显示多语言 Web 内容。此类页面具有 encoding="utf-8。变音符号显示为 Å,å,Ä,ä,Ö,ö 的另一个符号。同一页面在歌剧、chrome ff 和 ie 中显示良好。

非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:14:05.933

试试这个扩展方法

```
public static class StringExtensionMethods
{
    public static string ToExtendedASCII(this string html)
    {
        string retVal = "";
        char[] s = html.ToCharArray();

        foreach (char c in s)
        {
            if (Convert.ToInt32(c) > 127)
                retVal += "&#" + Convert.ToInt32(c) + ";";
            else
                retVal += c;
        }
        return retVal;
    }
} 
```

# ruby-on-rails - 在 FactoryGirl 中的关联设置属性中传递参数

> ID：10434572
> 
> 赞同：31
> 
> 时间：2012-05-03T15:29:51.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot

我想将一个参数传递给一个工厂，该工厂将用于设置关联模型的属性。关联模型是在工厂内创建的。

我有一个事务模型，它通过连接表 TxLink 与自身建立多对多链接。我想调用`link = FactoryGirl.create(:link_red_to_sub, sub: 10, red: 7)`它将创建两个 Transaction 对象和一个链接两者的 TxLink。

我在下面的关联行中收到错误，因为`units: sub`最后。错误是“未定义特征”。我试过`units: { sub }`（用括号），但没有骰子。

```
factory :tx_link do
    units "9.99"

    factory :link_red_to_sub do
      ignore do
        sub 0
        red 0
      end
      units { red }

      association :giver, factory: :transaction, units: sub
      association :taker, factory: :redemption, units: red
    end
  end 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-04T17:34:05.083

factory_girl 中的`association`助手不能接受动态属性参数，但您可以使用动态属性来实例化您想要的关联：

```
factory :tx_link do
  units "9.99"

  factory :link_red_to_sub do
    transient do
      sub 0
      red 0
    end
    units { red }

    giver { create(:transaction, units: sub) }
    taker { create(:redemption, units: red) }
  end
end 
```

唯一的缺点是`giver`and`taker`关联将使用 create 策略，无论您使用什么策略构建，`tx_link`这基本上意味着工厂无法正常工作。`attributes_for``build_stubbed``tx_link`

我提供的示例需要 4.5.0 版本。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-08-15T21:09:14.730

扩展乔的答案以允许区分构建和创建：

```
factory :tx_link do
  units "9.99"

  factory :link_red_to_sub do
    ignore do
      sub 0
      red 0
    end
    units { red }

    giver { build(:transaction, units: sub) }
    taker { build(:redemption, units: red) }

    after(:create) do |link_red_to_sub|
      link_red_to_sub.giver.save!
      link_red_to_sub.taker.save!
    end
  end
end 
```

# c# - 如何在 ASP.NET 的网格视图中访问动态创建的控件的值

> ID：10434579
> 
> 赞同：0
> 
> 时间：2012-05-03T15:30:10.263
> 
> 标签：c#, asp.net, gridview

我不知道如何在动态创建的网格视图中访问控件的值。问题是我不知道控件的名称。如果我知道控件的名称，我可以这样做：

```
string dropDownListText =((DropDownList).row.FindControl("DropDownList1")).SelectedItem.Value;` 
```

我知道控件的类型，并且知道它所在的单元格。有什么方法可以使用有关控件的信息来访问控件的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:49:29.190

如果你知道它是什么单元格，那么你可以做这样的事情；

```
TableCell tc = GridView1.Cells[indexOfCell]; 
// where GridView1 is the id of your GridView and indexOfCell is your index
foreach ( Control c in tc.Controls ){
    if ( c is YourControlTypeThatYouKnow ){
        YourControlTypeThatYouKnow myControl = (YourControlTypeThatYouKnow)c;
    }
} 
```

如果你不知道它到底是什么单元格，那么你总是可以遍历每个单元格。我确信在 Linq 中有更好的方法。

**使用 Linq（我认为这应该可行）**

```
var controls = GridView1.Cells[indexOfCell].Cast<Control>();
YourControlTypeThatYouKnow myControl = (YourControlTypeThatYouKnow) controls.Where( x => x is YourControlTypeThatYouKnow).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:41:37.903

在 GridView 的 ItemDataBound 事件处理程序上，按如下方式访问表格单元格。在单元格内，控件集合使您可以访问嵌入在单元格中的 ASP 控件

```
TableCell cell = e.Item.Cells[0];
if (cell.Controls.Count > 0)
{
   cell.Controls[0].Visible = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:50:20.883

我曾经也有过一样的问题。将命令名称添加到您的字段，例如 CommandName="ProjectClick"。然后添加一个 rowcommand 并在 row 命令中执行以下操作：

```
if (e.CommandName.Equals("ProjectClick")) {
} 
```

或者您可以使用以下文本：

```
if (e.CommandName.Equals("")) {
    if (((System.Web.UI.WebControls.LinkButton)(e.CommandSource)).Text.Equals("Projects")) {
    }
} 
```

# umbraco5 - 无法删除后台中的任何内容

> ID：10434583
> 
> 赞同：1
> 
> 时间：2012-05-03T15:30:25.223
> 
> 标签：umbraco5

在过去的 4 年里，我一直在使用 Sitecore 开发复杂的网站，但 Umbraco 对我来说是全新的。

我已经在我的机器上安装了 Umbraco 5（它的多个版本，包括最新版本）。我创建了一个名为**Test**的文档类型。当我右键单击它并选择**删除**时，没有任何反应。我尝试在后台删除的**任何内容**都是这种情况。

然后我尝试设置 Umbraco 4.7.2 并尝试在后台创建一些东西并删除。那行得通！只有在 Umbraco 5 中我无法删除任何内容。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:47:47.460

您可以保存、移动或重命名您的模板吗？

听起来像是权限问题。

尝试这两种方法：

1.  在根文件夹上为 IUSR 设置正确的权限。

2.  确保您在 ISS 中的应用程序在默认的 appPool 上运行

3.  使用命令提示符并导航到根文件夹并运行以下代码或将代码粘贴到根目录中的 .bat 文件并运行它。

    ```
    icacls App_Data /grant "IIS AppPool\DefaultAppPool":(OI)(CI)M icacls App_Plugins /grant "IIS AppPool\DefaultAppPool":(OI)(CI)M

    icacls Areas /grant "IIS AppPool\DefaultAppPool":(OI)(CI)R

    icacls bin /grant "IIS AppPool\DefaultAppPool":(OI)(CI)R

    icacls Content /grant "IIS AppPool\DefaultAppPool":(OI)(CI)M

    icacls Scripts /grant "IIS AppPool\DefaultAppPool":(OI)(CI)M

    icacls Views /grant "IIS AppPool\DefaultAppPool":(OI)(CI)M

    icacls web.config /grant "IIS AppPool\DefaultAppPool":(OI)(CI)M

    icacls web.config /grant "IIS AppPool\DefaultAppPool":M

    icacls packages.config /grant "IIS AppPool\DefaultAppPool":(OI)(CI)M

    icacls packages.config /grant "IIS AppPool\DefaultAppPool":M 
    ```

# xml - 如何使用 Ant 目标启动停止 JBoss 服务器？

> ID：10434588
> 
> 赞同：1
> 
> 时间：2012-05-03T15:30:46.057
> 
> 标签：xml, ant, jboss

使用 Ant 目标而不是 exec 开始停止 JBoss 服务器并传递运行脚本，即

## 构建.xml

```
<target="start-jboss" description="Starts JBoss instance" depends="prepare">
    <exec dir="${jboss.home}/bin" executable="cmd.exe" os="Windows07"> 
        <arg line="/c run.bat -S"/> 
        <env key="NOPAUSE" value="true"/> 
    </exec> 
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:02:15.507

看看[货运](http://cargo.codehaus.org/JBoss+7.1.x)。

还有一种方法可以通过[JMX 控制台](https://community.jboss.org/wiki/ShutDownJBossWithTheJMXConsole)甚至纯 JMX（需要自定义 ant 任务适配器）来停止 JBoss。

# android - 表格布局内按钮中的文本居中对齐

> ID：10434590
> 
> 赞同：0
> 
> 时间：2012-05-03T15:30:52.603
> 
> 标签：android, android-layout

我试图将屏幕上按钮中的文本居中对齐，但到目前为止，关于此问题的所有其他帖子都不起作用。关于如何实现这一点的任何猜测？

图片链接：http: [//i.stack.imgur.com/PH5Jc.jpg](http://i.stack.imgur.com/PH5Jc.jpg)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center_horizontal"
android:orientation="vertical" >

<TableLayout 
    android:id="@+id/play_grid"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_marginTop="@dimen/TopTableMarginSize">

    <TableRow 
        android:gravity="center_horizontal">

        <Button 
            android:id="@+id/one" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize" 
            android:text="@string/nr1"
            android:textSize="@dimen/FontSize" />

        <Button 
            android:id="@+id/two" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize" 
            android:text="@string/nr2"
            android:textSize="@dimen/FontSize" />

        <Button 
            android:id="@+id/three" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize"
            android:text="@string/nr3"
            android:textSize="@dimen/FontSize" />

    </TableRow>

    <TableRow 
        android:gravity="center_horizontal">

        <Button 
            android:id="@+id/four" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize" 
            android:text="@string/nr4"
            android:textSize="@dimen/FontSize"/>

        <Button 
            android:id="@+id/five" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize" 
            android:text="@string/nr5"
            android:textSize="@dimen/FontSize" />

        <Button 
            android:id="@+id/six" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize"
            android:text="@string/nr6"
            android:textSize="@dimen/FontSize" />

    </TableRow>

    <TableRow 
        android:gravity="center_horizontal">

        <Button 
            android:id="@+id/seven" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize" 
            android:text="@string/nr7"
            android:textSize="@dimen/FontSize" />

        <Button 
            android:id="@+id/eight" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize" 
            android:text="@string/nr8"
            android:textSize="@dimen/FontSize" />

        <Button 
            android:id="@+id/nine" 
            android:layout_width="@dimen/TileSize"
            android:layout_height="@dimen/TileSize"
            android:text="@string/nr9"
            android:textSize="@dimen/FontSize" />

    </TableRow>
</TableLayout>

<TextView 
    android:id="@+id/information" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="@string/info_label"
    android:gravity="center_horizontal" 
    android:layout_marginTop="@dimen/TopTextViewMarginSize"
    android:textSize="@dimen/TextFontSize" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:33:33.410

```
<LinearLayout android:layout_width="wrap_content"
android:layout_height="wrap_content"
        android:gravity="center_horizontal">
 <Button >
 <Button >
 <Button >
</LinearLayout> 
```

试试这个代码而不是你的表格行。

# python - Python 的 `futures` 的 `DummyExecutor`

> ID：10434593
> 
> 赞同：19
> 
> 时间：2012-05-03T15:31:08.933
> 
> 标签：python, debugging, concurrency, future, concurrent.futures

Python 的`futures`包让我们可以享受`ThreadPoolExecutor`并行`ProcessPoolExecutor`执行任务。

然而，为了调试，有时用一个虚拟的临时替换真正的并行是有用的，它在主线程中以串行方式执行任务，而不产生任何线程或进程。

有没有实现的地方`DummyExecutor`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T17:57:37.517

这样的事情应该这样做：

```
from concurrent.futures import Future, Executor
from threading import Lock

class DummyExecutor(Executor):

    def __init__(self):
        self._shutdown = False
        self._shutdownLock = Lock()

    def submit(self, fn, *args, **kwargs):
        with self._shutdownLock:
            if self._shutdown:
                raise RuntimeError('cannot schedule new futures after shutdown')

            f = Future()
            try:
                result = fn(*args, **kwargs)
            except BaseException as e:
                f.set_exception(e)
            else:
                f.set_result(result)

            return f

    def shutdown(self, wait=True):
        with self._shutdownLock:
            self._shutdown = True

if __name__ == '__main__':

    def fnc(err):
        if err:
            raise Exception("test")
        else:
            return "ok"

    ex = DummyExecutor()
    print(ex.submit(fnc, True))
    print(ex.submit(fnc, False))
    ex.shutdown()
    ex.submit(fnc, True) # raises exception 
```

在这种情况下可能不需要锁定，但拥有它不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-07T08:06:14.243

用它来模拟你的 ThreadPoolExecutor

```
class MockThreadPoolExecutor():
    def __init__(self, **kwargs):
        pass

    def __enter__(self):
        return self

    def __exit__(self, exc_type, exc_value, exc_traceback):
        pass

    def submit(self, fn, *args, **kwargs):
        # execute functions in series without creating threads
        # for easier unit testing
        result = fn(*args, **kwargs)
        return result

    def shutdown(self, wait=True):
        pass

if __name__ == "__main__":
    def sum(a, b):
        return a + b

    with MockThreadPoolExecutor(max_workers=3) as executor:
        future_result = list()
        for i in range(5):
            future_result.append(executor.submit(sum, i + 1, i + 2)) 
```

# python - 获取 Flask 请求中收到的数据

> ID：10434599
> 
> 赞同：1070
> 
> 时间：2012-05-03T15:31:26.760
> 
> 标签：python, flask, werkzeug

我希望能够将数据发送到我的 Flask 应用程序。我试过访问`request.data`，但它是一个空字符串。您如何访问请求数据？

```
from flask import request

@app.route('/', methods=['GET', 'POST'])
def parse_request():
    data = request.data  # data is empty
    # need posted data here 
```

* * *

这个问题的答案让我问[在 Python Flask 中获取原始 POST 正文，而不考虑接下来的 Content-Type 标头](https://stackoverflow.com/q/10999990)，这是关于获取原始数据而不是解析数据。

* * *

## 回答 #1

> 赞同：1893
> 
> 时间：2013-05-21T07:25:07.400

[文档](https://flask.palletsprojects.com/api/#flask.Request)描述了请求期间`request`对象 ( )上可用的属性。`from flask import request`在最常见的情况下`request.data`将是空的，因为它被用作后备：

> `request.data`包含传入的请求数据作为字符串，以防它带有 Flask 无法处理的 mimetype。

*   [`request.args`](https://flask.palletsprojects.com/api/#flask.Request.args): URL 查询字符串中的键/值对
*   [`request.form`](https://flask.palletsprojects.com/api/#flask.Request.form): 正文中的键/值对，来自 HTML 发布表单或非 JSON 编码的 JavaScript 请求
*   [`request.files`](https://flask.palletsprojects.com/api/#flask.Request.files): 正文中的文件，Flask 与`form`. 必须使用 HTML 表单`enctype=multipart/form-data`，否则将无法上传文件。
*   [`request.values`](https://flask.palletsprojects.com/api/#flask.Request.values): 组合`args`and `form`,`args`如果键重叠则优先
*   [`request.json`](https://flask.palletsprojects.com/api/#flask.Request.json): 解析 JSON 数据。请求必须具有`application/json`内容类型，或用于[`request.get_json(force=True)`](https://flask.palletsprojects.com/api/#flask.Request.get_json)忽略内容类型。

所有这些都是[`MultiDict`](https://werkzeug.palletsprojects.com/datastructures/#werkzeug.datastructures.MultiDict)实例（除了`json`）。您可以使用以下方式访问值：

*   `request.form['name']`：如果您知道密钥存在，请使用索引
*   `request.form.get('name')`：`get`如果密钥可能不存在，则使用
*   `request.form.getlist('name')`：`getlist`如果密钥被多次发送并且您想要一个值列表，请使用。`get`只返回第一个值。

* * *

## 回答 #2

> 赞同：257
> 
> 时间：2012-05-03T15:38:22.940

要获取原始数据，请使用[`request.data`](https://flask.palletsprojects.com/api/#flask.Request.data). 这仅在无法解析为表单数据时才有效，否则它将为空并`request.form`具有解析的数据。

```
from flask import request
request.data 
```

* * *

## 回答 #3

> 赞同：248
> 
> 时间：2014-08-12T15:22:24.467

对于 URL 查询参数，使用`request.args`.

```
search = request.args.get("search")
page = request.args.get("page") 
```

对于已发布的表单输入，请使用`request.form`.

```
email = request.form.get('email')
password = request.form.get('password') 
```

对于以内容类型发布的 JSON `application/json`，请使用[`request.get_json()`](https://flask.palletsprojects.com/api/#flask.Request.get_json).

```
data = request.get_json() 
```

* * *

## 回答 #4

> 赞同：146
> 
> 时间：2016-11-16T03:55:33.723

这是解析发布的 JSON 数据并将其回显的示例。

```
from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/foo', methods=['POST']) 
def foo():
    data = request.json
    return jsonify(data) 
```

使用 curl 发布 JSON：

```
curl -i -H "Content-Type: application/json" -X POST -d '{"userId":"1", "username": "fizz bizz"}' http://localhost:5000/foo 
```

或者使用邮递员：

[![使用邮递员发布 JSON](../Images/6f2cafcb1286a6d84cb96afa53697283.png)](https://i.stack.imgur.com/2CaoI.png)

* * *

## 回答 #5

> 赞同：57
> 
> 时间：2015-08-14T07:29:47.500

无论内容类型如何，要获取原始帖子正文，请使用`request.get_data()`. 如果您使用`request.data`，它会调用`request.get_data(parse_form_data=True)`，这将填充`request.form` `MultiDict`并`data`留空。

* * *

## 回答 #6

> 赞同：50
> 
> 时间：2015-07-27T13:06:14.713

如果您使用 content type 发布 JSON `application/json`，请使用`request.get_json()`在 Flask 中获取它。如果内容类型不正确，`None`则返回。如果数据不是 JSON，则会引发错误。

```
@app.route("/something", methods=["POST"])
def do_something():
    data = request.get_json() 
```

* * *

## 回答 #7

> 赞同：31
> 
> 时间：2018-06-06T19:54:19.423

要获取`request.form`普通字典，请使用`request.form.to_dict(flat=False)`.

要返回 API 的 JSON 数据，请将其传递给`jsonify`.

此示例将表单数据作为 JSON 数据返回。

```
@app.route('/form_to_json', methods=['POST'])
def form_to_json():
    data = request.form.to_dict(flat=False)
    return jsonify(data) 
```

这是一个使用 curl 的 POST 表单数据示例，以 JSON 形式返回：

```
$ curl http://127.0.0.1:5000/data -d "name=ivanleoncz&role=Software Developer"
{
  "name": "ivanleoncz", 
  "role": "Software Developer"
} 
```

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2019-03-10T07:32:28.593

用于`request.get_json()`获取发布的 JSON 数据。

```
data = request.get_json()
name = data.get('name', '') 
```

用于在使用`request.form`POST 方法提交表单时获取数据。

```
name = request.form.get('name', '') 
```

用于`request.args`获取在 URL 的查询字符串中传递的数据，例如使用 GET 方法提交表单时。

```
request.args.get("name", "") 
```

`request.form`等是类似dict的，`get`如果没有通过，则使用该方法获取具有默认值的值。

* * *

## 回答 #9

> 赞同：19
> 
> 时间：2018-03-25T14:45:06.980

要获取没有`application/json`内容类型的 JSON 发布，请使用`request.get_json(force=True)`.

```
@app.route('/process_data', methods=['POST'])
def process_data():
    req_data = request.get_json(force=True)
    language = req_data['language']
    return 'The language value is: {}'.format(language) 
```

* * *

## 回答 #10

> 赞同：17
> 
> 时间：2018-05-11T13:58:21.030

要在 JavaScript 中使用 jQuery 发布 JSON，请使用`JSON.stringify`转储数据，并将内容类型设置为`application/json`.

```
var value_data = [1, 2, 3, 4];

$.ajax({
    type: 'POST',
    url: '/process',
    data: JSON.stringify(value_data),
    contentType: 'application/json',
    success: function (response_data) {
        alert("success");
    }   
}); 
```

在 Flask 中用`request.get_json()`.

```
data = request.get_json() 
```

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2016-07-11T15:46:11.720

原始数据从 WSGI 服务器以`request.stream`. 流的长度在`Content-Length`标头中。

```
length = request.headers["Content-Length"]
data = request.stream.read(length) 
```

使用它通常更安全`request.get_data()`。

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2021-05-09T20:03:53.860

导入请求：

```
from flask import request 
```

网址查询参数：

```
name = request.args.get("name")
age = request.args.get("age") 
```

表单输入：

```
name = request.form.get('name')
age = request.form.get('age') 
```

或（如果您知道键存在，请使用索引，**指定输入字段的名称**）

```
name = request.form['name']
age = request.form['age'] 
```

JSON 数据（对于内容类型**application/json**）

```
data = request.get_json() 
```

* * *

## 回答 #13

> 赞同：14
> 
> 时间：2019-10-11T02:57:46.017

这是发布表单数据以将用户添加到数据库的示例。检查`request.method == "POST"`表单是否已提交。使用 key from`request.form`获取表单数据。使用 else 渲染 HTML 模板`<form>`。表单中的字段应具有`name`与 中的键匹配的属性`request.form`。

```
from flask import Flask, request, render_template

app = Flask(__name__)

@app.route("/user/add", methods=["GET", "POST"])
def add_user():
    if request.method == "POST":
        user = User(
            username=request.form["username"],
            email=request.form["email"],
        )
        db.session.add(user)
        db.session.commit()
        return redirect(url_for("index"))

    return render_template("add_user.html") 
```

```
<form method="post">
    <label for="username">Username</label>
    <input type="text" name="username" id="username">
    <label for="email">Email</label>
    <input type="email" name="email" id="email">
    <input type="submit">
</form> 
```

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2017-08-22T12:46:38.470

要解析 JSON，请使用`request.get_json()`.

```
@app.route("/something", methods=["POST"])
def do_something():
    result = handle(request.get_json())
    return jsonify(data=result) 
```

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2020-09-24T04:13:43.987

在编写一个应该发送 JSON 数据的 Slack 机器人时，我得到了一个有效`Content-Type`载荷`application/x-www-form-urlencoded`。

我试过`request.get_json()`了，但没有用。

```
@app.route('/process_data', methods=['POST'])
def process_data():
   req_data = request.get_json(force=True) 
```

相反，我曾经`request.form`获取*包含*JSON 的表单数据字段，然后加载它。

```
from flask import json

@ app.route('/slack/request_handler', methods=['POST'])
def request_handler():
   req_data = json.loads(request.form["payload"]) 
```

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2018-08-21T22:52:42.560

如果内容类型被识别为表单数据，`request.data`则将其解析为`request.form`并返回一个空字符串。

无论内容类型如何，要获取原始数据，请调用[`request.get_data()`](https://flask.palletsprojects.com/api/#flask.Request.get_data). `request.data`调用`get_data(parse_form_data=True)`，而默认情况下是`False`直接调用它。

* * *

## 回答 #17

> 赞同：9
> 
> 时间：2018-12-01T05:04:39.710

如果正文被识别为表单数据，它将在`request.form`. 如果是 JSON，它将在`request.get_json()`. 否则原始数据将在`request.data`. 如果您不确定如何提交数据，您可以使用`or`链来获取第一个带有数据的数据。

```
def get_request_data():
    return (
        request.args
        or request.form
        or request.get_json(force=True, silent=True)
        or request.data
    ) 
```

`request.args``get_request_data()`包含从查询字符串中解析的 args，无论正文中有什么，因此如果它和正文都应同时数据，您将从中删除它。

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2018-08-20T15:45:46.033

使用 HTML 表单发布表单数据时，请确保`input`标签具有`name`属性，否则它们将不会出现在`request.form`.

```
@app.route('/', methods=['GET', 'POST'])
def index():
    print(request.form)
    return """
<form method="post">
    <input type="text">
    <input type="text" id="txt2">
    <input type="text" name="txt3" id="txt3">  
    <input type="submit">
</form>
""" 
```

```
ImmutableMultiDict([('txt3', 'text 3')]) 
```

只有`txt3`输入有一个`name`，所以它是唯一存在的键`request.form`。

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2020-07-21T10:54:38.513

```
@app.route('/addData', methods=['POST'])
def add_data():
     data_in = mongo.db.Data
     id = request.values.get("id")
     name = request.values.get("name")
     newuser = {'id' : id, 'name' : name}
     if voter.find({'id' : id, 'name' : name}).count() > 0:
            return "Data Exists"
     else:
            data_in.insert(newuser)
            return "Data Added" 
```

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2021-11-12T10:45:01.990

您可以从

1.  `request.form`对于表单数据，这包括表单和文件数据，
2.  `request.json`对于JSON`request.get_json`数据
3.  `request.headers`用于标题
4.  `request.args`获取查询参数

它们都像字典，`request.form['name']`如果您知道密钥存在，或者`request.form.get('name')`如果它是可选的，请使用它们。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2021-12-27T13:10:56.113

我只是面临同样的需求。我必须保存信息以防出现任何意外情况。所以，我使用以下公式：

```
Info = "%s/%s/%s" % (request.remote_addr, repr(request), repr(session)) 
```

repr(request) 将给出基本信息的字符串表示。您可以使用以下命令添加用户代理数据： request.headers.get('User-Agent')

我还保存了会话大陆，因为它可能包含有价值的信息

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2021-10-13T14:11:39.483

试试——>

```
from flask import request

@app.route('/', methods=['GET', 'POST'])
def parse_request():
    if request.method == 'POST':
       data = request.form.get('data') 
```

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2020-10-09T08:29:43.233

```
request.data 
```

这很好用，但请记住它是以字符串形式出现的，需要迭代。

# c# - 没有 LIVE 的 C# XNA 网络游戏

> ID：10434608
> 
> 赞同：0
> 
> 时间：2012-05-03T15:31:47.700
> 
> 标签：c#, networking, xna, live

我用 XNA 用 C# 制作了一个游戏。我想让它可以在线播放。

我希望能够在一台机器上托管游戏并能够在其他机器上连接到该游戏。有点像半条命中的监听服务器。

这似乎是一个很常见的问题，应该解决一百万次。但我已经用谷歌搜索了我的屁股，我似乎真的找不到任何有用的信息。

**我想确切地知道我需要什么，关于网络的东西，为了用 XNA 创建一个在线游戏，而不使用 microsoft-Live 的东西。**

1.  图书馆？using-thing 位于类的顶部。
2.  初始化这些东西的代码
3.  如何寻找另一台玩这个游戏的电脑。
4.  如何在计算机之间获取/发送数据。
5.  在哪个客户上进行计算。如果一个人会发射一颗子弹，是否应该在两个客户端上都将这颗子弹创建为一个对象？还是一个拥有对象（检查碰撞等）而另一个只是获得绘制位置？

我希望制作过这样游戏的人来回答，什么是标准方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:48:56.730

内置的 XNA 库以 Live 为中心，因此您要么必须忍受它，要么使用不同的网络库。

.NET UdpClient 和 Socket 库非常简单。

或者，看看[Lindgren 开源网络库](http://code.google.com/p/lidgren-network-gen3/)。它包括一些用于发送 XNA 类型（如 Matrix、Vector3 等）的扩展方法，这在您开始使用时会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:07:01.017

如上所述，我写了一个关于使用 lidgren 制作 MMO 的问题的答案。它有一些资源链接，您可以使用它来学习如何使用它。我个人用它来制作一个小型测试应用程序，有 5 个用户一起跑来跑去，但我还没有比这更进一步。

[xna 中的大型多人游戏](https://stackoverflow.com/questions/10033094/massive-multiplayer-in-xna/10042968#10042968)

# c# - 如果使用挪威字母，则附件名称解码错误

> ID：10434610
> 
> 赞同：9
> 
> 时间：2012-05-03T15:31:51.760
> 
> 标签：c#, encoding, sendmail, attachment

我有这段代码可以创建附件并发送电子邮件。如果文件名包含 æ、ø 或 æ，则该文件名将被完全销毁。

![在此处输入图像描述](../Images/2dd699a6f99d26e1e96465f96504c895.png)

如果我删除挪威字母，一切正常

![在此处输入图像描述](../Images/09bc29eb480aead36aa1e78b47db22a9.png)

```
 var stream = new MemoryStream();
        doc.Save(stream, SaveFormat.Docx);

        mail.From = new MailAddress("no-replay@email.no");
        mail.To.Add("my@email.no");
        mail.IsBodyHtml = true;
        mail.Subject = "Attachments test";
        mail.Body = "Hei,<br /><br />";
        stream.Seek(0, SeekOrigin.Begin);

        var attachment = new Attachment(stream, "Name Å Æ Ø.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document");
        attachment.NameEncoding = Encoding.UTF8;
        mail.Attachments.Add(attachment);
        var smtp = new SmtpClient("smtp.server.com") {Port = 25};
        smtp.Send(mail); 
```

如何正确完成这项工作？

**解决方案**

我在这里找到了一个解决方案[http://social.msdn.microsoft.com/Forums/en-US/dotnetframeworkde/thread/b6c764f7-4697-4394-b45f-128a24306d55](http://social.msdn.microsoft.com/Forums/en-US/dotnetframeworkde/thread/b6c764f7-4697-4394-b45f-128a24306d55)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T04:59:25.723

这是 microsoft 为 .net framework 4 提供的解决方案

[http://support.microsoft.com/kb/2402064](http://support.microsoft.com/kb/2402064)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:34:30.443

尝试更改`attachment.NameEncoding = Encoding.UTF8;`为`attachment.NameEncoding = Encoding.Unicode;`.

# jquery - 我需要一个 jquery 手风琴来为每个部分的箭头图标使用不同的图像文件

> ID：10434612
> 
> 赞同：0
> 
> 时间：2012-05-03T15:31:58.840
> 
> 标签：jquery, css, jquery-ui, accordion

这是一个与之前问过的一两个类似的问题，不过我需要手风琴做一些稍微不同的事情。当手风琴处于非活动状态时，所有图标都是相同的，我只需要在它们处于悬停或活动状态时单独更改图标。

```
<div id="accordion">
<h3 class="acch1"><a class="acc1" href="#">Management and Analysis</a></h3>
<div>
</div>
<h3><a class="acc2" href="#">Communication Management</a></h3>
<div>
</div> 
```

CSS：

```
.ui-icon { width: 21px; height: 21px; background-image: url(../images/ui-icons_454545_256x240.png); }
.ui-widget-content .ui-icon {background-image: url(../images/ui-icons_454545_256x240.png); }
.ui-widget-header .ui-icon {background-image: url(../images/ui-icons_454545_256x240.png); }
.ui-state-default .ui-icon { background-image: url(../images/ui-icons_454545_256x240.png); }
.ui-state-hover .ui-icon, .ui-state-focus .ui-icon {background-image: url(../images/ui-icons_454545_256x240.png); }
.ui-state-active .ui-icon {background-image: url(../images/ui-icons_454545_256x240.png); }

.ui-accordion-header.acch1 .ui-state-hover .ui-icon {background-image: url(../images/ui-icons_669FC5_256x240.png); }
.ui-accordion-header.acch1 .ui-state-active .ui-icon {background-image: url(../images/ui-icons_669FC5_256x240.png); } 
```

底部的两个是我试图使用的，它们一直在工作，直到我添加了 .ui-state-hover 和 .ui-state-active。

这是 jsfiddle [jsfiddle](http://jsfiddle.net/w6NJp/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:42:11.047

我相信如果您从规则中删除 acch1 类并更改目标，那么它应该可以工作。对您的图像尝试以下操作：

```
h3.ui-accordion-header.ui-state-hover span.ui-icon {background-image: url(http://code.jquery.com/ui/1.8.20/themes/base/images/ui-icons_222222_256x240.png); }
h3.ui-accordion-header.ui-state-active span.ui-icon  {background-image: url(http://code.jquery.com/ui/1.8.20/themes/base/images/ui-icons_222222_256x240.png); }​ 
```

通过将 .acch1 类保留为规则的一部分，您将只定位特定的 H3 元素，而不是任何活动或悬停的元素。

# sql - 如何在 Windows Server 2003 的 Dynamics AX 服务器中提供“Project Web 访问”？

> ID：10434615
> 
> 赞同：0
> 
> 时间：2012-05-03T15:32:12.277
> 
> 标签：sql, sql-server-2008, sql-server-2005, axapta

我正在尝试在 Windows Server 2003 中安装 Dynamics AX Server 2009，但我遇到了这个问题。他们告诉我我必须提供“Project Web 访问权限”，但我不知道它是什么？你能帮助我吗？

![在此处输入图像描述](../Images/0bfa71bfcf5327a8f0d31158a50f8c8d.png)

我必须将什么作为项目 Web 访问 URL？

![在此处输入图像描述](../Images/6c5f3331d12927809dd4d3849c797fc3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:12:00.437

这可能正是错误所说的。

> “动态”不是有效的 Microsoft Office Project Server 数据库。

您缺少 MS Project Server，这是先决条件。这就是为什么您没有要输入的 URL 或要连接的数据库的原因。你根本没有安装它。实际错误是因为您没有连接到数据库。

![在此处输入图像描述](../Images/6959cf86fcf1dfc8472a19063cebd450.png)

# actionscript-3 - 我们如何让 systemManager 监听 TitleWindows Move 事件

> ID：10434620
> 
> 赞同：0
> 
> 时间：2012-05-03T15:32:37.670
> 
> 标签：actionscript-3, apache-flex, flex3

我试图找到一个通用解决方案来解决我限制 Popup 移动以使其不会离开应用程序屏幕的问题，我只是想确保我监听 Popup 的移动事件，以便这些事件可以在 SysmtemManager 中听到并获取我们有弹出窗口的 rawchildren 并检查条件以确保它们不会以这种方式离开屏幕我不需要为每个弹出移动事件编写代码来限制。

如果您在收听 PopUp 的移动事件之前做过，有人可以分享您的经验。

谢谢席德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:45:41.153

在 mouseDown 上，您可以检查是否单击了标题，如果是，则可以使用下面的代码来启动仅限于应用程序的拖动操作：

```
titleWindow.startDrag(false, new Rectangle(0, 0, Application.height, Application.width)) 
```

在 mouseUp 上，您需要调用以下方法：

```
titleWindow.stopDrag() 
```

# java - 当我将linkedin-j与javaloader一起使用时，cfdump util消失了

> ID：10434621
> 
> 赞同：3
> 
> 时间：2012-05-03T15:32:38.000
> 
> 标签：java, coldfusion, coldfusion-9, linkedin-j

我正在使用linkedin-j Java库和JavaLoader创建一个应用程序，我发现每当我将它放入运行ColdFusion 9.0.1的服务器时，我都会开始收到以下错误：

```
coldfusion.util.DumpHelper
(java.lang.ClassNotFoundException) 
```

我没有对图书馆做任何疯狂的事情。我已将其缩小为由以下代码引起的：

```
var l_user = api_client.getProfileForCurrentUser(); 
```

`api_client`[是linkedin-j 中客户端对象的](http://code.google.com/p/linkedin-j/source/browse/trunk/linkedin-j/core/src/main/java/com/google/code/linkedinapi/client/LinkedInApiClient.java)一个​​实例。我不太了解Java，但我看不出有什么会破坏ColdFusion 的实用程序。

经测试，使用 Railo 时似乎不会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:38:31.110

（来自评论......）

您可以在[实例化 javaLoader](http://www.compoundtheory.com/javaloader/docs/#Reference_19660699433994056_96)`loadColdFusionClassPath=true`时尝试设置。

# .net - 如何使用 Visual Studio 2008 但 TFS 2010 自定义工作项

> ID：10434622
> 
> 赞同：1
> 
> 时间：2012-05-03T15:32:38.340
> 
> 标签：.net, foundation

我有 Visual Studio 2008。我们最近将服务器升级到 TFS 2010。用于自定义工作项的实用程序与 TFS 2010 不同我不能再使用 witexport，因为 TFS2010 的命令是 witadmin。但是这个新命令似乎不适用于我的 Visual Studio 2008 命令行。

在这种情况下，除了升级到 VS2010 之外，还有什么方法可以自定义工作项？

# java - 如何在 2 场独立的战 争中构建 Spring 框架 Web 应用程序，一场用于前端（jsp），另一场用于业务逻辑？

> ID：10434631
> 
> 赞同：0
> 
> 时间：2012-05-03T15:33:27.933
> 
> 标签：java, spring, jsp, spring-mvc

由于安全原因，我们的遗留应用程序被拆分为 2 个 Web 应用程序，一个应用程序用于前端，另一个应用程序用于业务逻辑和数据库交互，即中间层。我现在正在使用带有 JSTL 的 Spring MVC 重新设计这个应用程序。教程示例适用于 1 个应用程序。

我应该怎么做才能配置这个在单独的战争中使用 JSP 的 Spring 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:48:16.920

两个主要选项：

*   以 jar 的形式提供业务逻辑并从控制器中使用它。
*   以 SOA 应用程序的形式提供业务逻辑。

我不清楚为什么业务逻辑和数据库交互需要是一个单独的*Web*应用程序，而不是库。如果它们被部署在同一台服务器上，那就更不清楚了。

如果它们被部署在不同的服务器上，那么您基本上是从“前端”应用程序向“API”应用程序进行服务调用。有很多方法可以做到这一点，甚至可能是 EJB-ish，尽管如果您使用 Spring，我怀疑您正试图避免这种情况（尽管使用 JEE6，这样做的理由要少得多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:01:49.977

Dave 建议的第一个选项也是我们通常这样做的方式：创建一个[Maven 多模块项目](http://docs.codehaus.org/display/MAVENUSER/Multi-modules+projects)，其中将业务服务构建为 Web 层所依赖的简单 jar 文件。通过这种方式，您可以在两个层之间进行清晰的分离，并可能使用不同的“顶部”重用业务逻辑，例如，使用 Swing 客户端而不是 Web 应用程序。

当然，这在不使用 Maven 时也是可能的——您可以将源文件保存在单独的文件夹中，并让 Ant（或任何您喜欢的工具）构建可交付成果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:32:17.580

我会这样走：

*   第一个 WAR 包含 JSP 和所有 Web 组件，包括图像、CSS 和 JavaScript。
*   第二个 WAR 包含 Spring MVC 控制器和服务/DAO 层。控制器负责调用服务对象并将响应解析为 JSON 或 XML。

使用该架构，您的第一个 WAR 通过 AJAX 调用访问第二个 WAR 服务。这意味着大量使用 JavaScript：也许您可以使用 JQuery 来帮助您。

此外，这种方法允许您在不同的容器中部署 WAR。甚至第一个 WAR 根本不可能是 WAR，它甚至可能是部署在 Apache 中的 PHP 应用程序或纯 HTML/JS 网页。

# jquery - jQuery 3 级幻灯片切换弹跳

> ID：10434632
> 
> 赞同：4
> 
> 时间：2012-05-03T15:33:29.633
> 
> 标签：jquery, html-lists, slidetoggle

我正在使用 jQuery 构建基于标准 ul>li 结构的下拉导航。

一切都运行良好，但是，当我进入三级项目时，slideToggle 函数会导致“反弹”并且永远不会显示子 UL

由于有相当多的代码我在这里发布：http: [//jsfiddle.net/ChGXt/2/](http://jsfiddle.net/ChGXt/2/)

我敢肯定这很简单，但我就是想不通。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:39:45.830

`li`当您下降到该级别时，您需要停止单击事件的传播备份您的结构。试试这个：

```
$('nav ul').delegate('.sub_nav', 'click', function(e) {
    e.stopPropagation();

    // rest of the code...
}); 
```

[**更新的小提琴**](http://jsfiddle.net/ChGXt/9/)

# c++ - 如何旋转粒子系统使其不绕世界轴旋转

> ID：10434635
> 
> 赞同：1
> 
> 时间：2012-05-03T15:33:34.080
> 
> 标签：c++, graphics, directx, particle-system

尝试旋转我的粒子系统时遇到问题。首先，我不想旋转每个粒子来尝试增强效果，我想做的是旋转发射器位置。因此，例如，如果我在 0,0,0 处有一个发射器位置，并且我在 x 和 z 轴上发射粒子 -5 和 5，我最终会以与世界轴一致的方形方式发射粒子。我想要的是旋转它，使其发射完全相同但围绕发射器点旋转。

```
 // Each particle point is converted to a quad (two triangles)
[maxvertexcount(4)]  
void mainGSDraw
(
point VS_VertIn                  inParticle[1], // One particle in, as a point
inout TriangleStream<GS_VertOut> outStrip       // Triangle stream output, a quad containing two triangles
)
{
// Camera-space offsets for the four corners of the quad from the particle centre
// Will be scaled depending on distance of the particle
const float3 Corners[4] =
{
    float3(-1,  1, 0),
    float3( 1,  1, 0),
    float3(-1, -1, 0),
    float3( 1, -1, 0),
};

// Texture coordinates for the four corners of the generated quad
const float2 UVs[4] = 
{ 
    float2(0,1), 
    float2(1,1),
    float2(0,0),
    float2(1,0),
};

const float3x3 RotY = 
{ 

    cos(rotationAngle),0,sin(rotationAngle), 
    0,1,0,
    -sin(rotationAngle),0,cos(rotationAngle)
};
GS_VertOut outVert; // Used to build output vertices

// Output the four corner vertices of a quad centred on the particle position
[unroll]
for (int i = 0; i < 4; ++i)
{
    // Use the corners defined above and the inverse camera matrix to calculate each world
    // space corner of the quad

    float3 corner = Corners[i] * inParticle[0].Scale;   // scale first
    float3 worldPosition;

worldPosition = mul(inParticle[0].Position + mul( corner, (float3x3)InvViewMatrix), RotY) ;   // face the camera
    // Transform to 2D position and output along with an appropriate UV
    outVert.ViewportPosition = mul( float4(worldPosition, 1.0f), ViewProjMatrix );
    outVert.TexCoord = UVs[i];
    outStrip.Append( outVert );
}
outStrip.RestartStrip(); 
```

上面是我的几何着色器绘制函数的代码，一个粒子作为一个点进来并扩展为一个四边形，缩放然后计算世界位置。如果粒子系统位于原点，则旋转计算是错误的不是世界零吗？代码已被删减，因此无需回复此代码可能不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:29:55.543

您可以将粒子从发射器原点的平移乘以旋转，然后添加发射器从世界原点的平移。

# java - 以编程方式指定要在 Hibernate 中加载的类

> ID：10434636
> 
> 赞同：2
> 
> 时间：2012-05-03T15:33:40.573
> 
> 标签：java, hibernate, class, load

抱歉，这个问题看起来有点简单，但是有没有办法通过将类指定为查询的变量来使用 Hibernate 从数据库中加载对象？

IE：

我有

克拉兹A、克拉兹B、克拉兹C

所有三个类都映射到数据库中的表 ClazzA、ClazzB 和 ClazzC

我想要一个像这样的变量：

类 clazz=obj.getClass();

然后能够通过将类指定为查询构造的一部分来填充查询：

列出 objs=session.createQuery(...) ... .list();

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:39:25.327

使用 HQL 查询没有优雅的方法，但您可以使用 Criteria API：

```
List objs = session.createCriteria(clazz).list(); 
```

**也可以看看：**

*   [第 17 章条件查询](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/querycriteria.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:38:42.037

```
String hql = "select o from " + clazz.getName() + " o where ..."; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:38:00.163

你可以试试这个：

```
String getQuery(Class class) {
   StringBuilder hql = new StringBuilder("from ");
   hql.append(class.getCanonicalName());
   ...
   //Here you complete the query.
   ...
   return hql.toString();
} 
```

# macros - Clojure 宏使用的好例子，展示了该语言相对于主流语言的优势？

> ID：10434638
> 
> 赞同：28
> 
> 时间：2012-05-03T15:33:51.837
> 
> 标签：macros, clojure

我正在考虑学习 Clojure，但是来自基于 c 语法（java、php、c#）的命令式语言世界，这将是一个挑战，所以自然会问自己，这真的值得吗？虽然这样的问题陈述可能非常主观且难以管理，但我一直在阅读 Clojure（更一般地说，lisps）的一个特定特征，这应该使它成为有史以来最灵活的语言：宏。

你有在 Clojure 中使用宏的任何好的例子吗，用于其他主流语言（考虑 C++、PHP、Perl、Python、Groovy/Java、C#、JavaScript 中的任何一种）需要更少优雅的解决方案/很多不必要的解决方案抽象/黑客/等。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-03T16:04:34.110

我发现宏对于定义新的语言特性非常有用。在大多数语言中，您需要等待语言的新版本才能获得新的语法 - 在 Lisp 中，您可以使用宏扩展核心语言并自己添加功能。

例如，Clojure 没有命令式 C 风格的`for(i=0 ;i<10; i++)`循环，但您可以使用宏轻松添加：

```
(defmacro for-loop [[sym init check change :as params] & steps]
  (cond
    (not (vector? params)) 
      (throw (Error. "Binding form must be a vector for for-loop"))
    (not= 4 (count params)) 
      (throw (Error. "Binding form must have exactly 4 arguments in for-loop"))
    :default
      `(loop [~sym ~init value# nil]
         (if ~check
           (let [new-value# (do ~@steps)]
             (recur ~change new-value#))
           value#)))) 
```

用法如下：

```
(for-loop [i 0, (< i 10), (inc i)]
  (println i)) 
```

在函数式语言中添加命令式循环是否是一个好主意是我们应该避免的争论:-)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-03T16:25:59.130

clojure 的基础中有很多你没有想到的宏......这是一个好的宏的标志，它们让你**以让生活更轻松的方式扩展语言。**如果没有宏，生活就不会那么令人兴奋了。例如，如果我们没有

```
(with-out-str (somebody else's code that prints to screen)) 
```

那么您将需要以您可能无法访问的方式修改他们的代码。

另一个很好的例子是

```
(with-open-file [fh (open-a-file-code ...)]
   (do (stuff assured that the file won't leak))) 
```

整个`with-something-do`宏模式确实添加到 clojure 生态系统中。

* * *

众所周知的宏硬币的另一面是，我基本上将所有（当前）专业的 Clojure 时间都花在了一个非常庞大的宏库上，因此我花了很多时间**来解决宏不能很好地组合并且不是头等舱**。这个库的作者将在下一个版本中竭尽全力使所有功能都可用，而无需通过宏来允许像我这样的人在更高阶的函数中使用它们，比如`map`和`reduce`.

当宏让生活更轻松时，它们会改善世界。当它们是库的唯一接口时，它们可能会产生相反的效果。**请不要使用宏作为接口**

通常很难让数据的形状真正正确。如果作为图书馆作者，您的数据结构很好，可以很好地了解您对图书馆使用方式的设想，那么很可能有一种方法可以重新构建事物，以允许用户以新的和难以想象的方式使用您的图书馆。在这种情况下，所讨论的奇妙库的结构确实非常好，它允许作者没有打算做的事情。不幸的是，一个很棒的库受到限制，因为它的接口是一组宏而不是一组函数。**图书馆比它的宏好，所以他们把它藏起来了**。这并不是说宏有任何责任，只是说编程很难，它们是另一种可以产生多种效果的工具，所有部分必须一起使用才能正常工作。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-04T08:15:37.610

对于我有时使用的宏，还有一个更深奥的用例：编写简洁易读的代码，这些代码也经过全面优化。这是一个简单的例子：

```
(defmacro str* [& ss] (apply str (map eval ss))) 
```

这样做是在编译时连接字符串（当然，它们必须是编译时常量）。Clojure 中的常规字符串连接函数在`str`紧循环代码中的任何地方都有一个长字符串，我想将它分解成几个字符串文字，我只需添加星`str`号并将运行时连接更改为编译时。用法：

```
(str* "I want to write some very lenghty string, most often it will be a complex"
      " SQL query. I'd hate if it meant allocating the string all over every time"
      " this is executed.") 
```

另一个不那么琐碎的例子：

```
(defmacro jprint [& xs] `(doto *out* ~@(for [x xs] `(.append ~x)))) 
```

这`&`意味着它接受可变数量的参数（可变参数、可变参数函数）。在 Clojure 中，可变参数函数调用利用堆分配的集合来传输参数（就像在 Java 中使用数组一样）。这不是很理想，但如果我使用像上面这样的宏，那么就没有函数调用。我这样使用它：

```
(jprint \" (json-escape item) \") 
```

它编译成三个调用`PrintWriter.append`（基本上是一个展开的循环）。

最后，我想向你们展示一些更完全不同的东西。您可以使用宏来帮助您定义类似函数的类，从而消除**大量**样板文件。举这个熟悉的例子：在 HTTP 客户端库中，我们希望每个 HTTP 方法都有一个单独的函数。每个函数定义都非常复杂，因为它有四个重载签名。此外，每个函数都涉及来自 Apache HttpClient 库的不同请求类，但所有 HTTP 方法的其他一切都完全相同。看看我需要多少代码来处理这个。

```
(defmacro- def-http-method [name]
  `(defn ~name
     ([~'url ~'headers ~'opts ~'body]
        (handle (~(symbol (str "Http" (s/capitalize name) ".")) ~'url) ~'headers ~'opts ~'body))
     ([~'url ~'headers ~'opts] (~name ~'url ~'headers ~'opts nil))
     ([~'url ~'headers] (~name ~'url ~'headers nil nil))
     ([~'url] (~name ~'url nil nil nil))))

(doseq [m ['GET 'POST 'PUT 'DELETE 'OPTIONS 'HEAD]]
  (eval `(def-http-method ~m))) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-09T01:40:09.460

我正在处理的项目中的一些实际代码——我想要使用未装箱整数的嵌套 for-esque 循环。

```
(defmacro dofor
  [[i begin end step & rest] & body]
  (when step
    `(let [end# (long ~end)
           step# (long ~step)
           comp# (if (< step# 0)
                   >
                   <)]
       (loop [~i ~begin]
         (when (comp# ~i end#)
           ~@(if rest
               `((dofor ~rest ~@body))
               body)
           (recur (unchecked-add ~i step#))))))) 
```

像这样使用

```
(dofor [i 2 6 2
        j i 6 1]
  (println i j)) 
```

哪个打印出来

```
2 2
2 3
2 4
2 5
4 4
4 5 
```

它编译成非常接近我最初手写的 raw `loop`/ s 的东西，因此基本上没有运行时性能损失，不像等效的`recur`

```
(doseq [i (range 2 6 2)
        j (range i 6 1)]
  (println i j)) 
```

我认为生成的代码与 java 等效代码相比相当有利：

```
for (int i = 2; i < 6; i+=2) {
    for (int j = i; j < 6; j++) {
        System.out.println(i+" "+j);
    }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-03T18:17:28.543

没有宏很难重新创建的有用宏的一个简单示例是`doto`. 它评估它的第一个参数，然后评估以下形式，将评估结果作为它们的第一个参数插入。这听起来可能不多，但是...

有了`doto`这个：

```
(let [tmpObject (produceObject)]
 (do
   (.setBackground tmpObject GREEN)
   (.setThis tmpObject foo)
   (.setThat tmpObject bar)
   (.outputTo tmpObject objectSink))) 
```

变成：

```
(doto (produceObject)
   (.setBackground GREEN)
   (.setThis foo)
   (.setThat bar)
   (.outputTo objectSink)) 
```

重要的是这`doto`不是魔法——你可以使用语言的标准特性自己（重新）构建它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-03T15:49:43.463

宏是 Clojure 的一部分，但恕我直言，它们不是您应该或不应该学习 Clojure 的原因。数据不变性、处理并发状态的良好构造以及它是一种 JVM 语言并且可以利用 Java 代码的事实是三个原因。如果您找不到其他学习 Clojure 的理由，请考虑这样一个事实，即函数式编程语言可能会对您使用任何语言处理问题的方式产生积极影响。

要查看宏，我建议你从 Clojure 的线程宏开始：thread-first 和 thread-last`->`分别`->>`为；访问[这个页面](http://clojure.org/macros)，以及许多[讨论 Clojure 的各种博客](http://planet.clojure.in)。

祝好运并玩得开心点。

# c++ - GCC：由于数据类型的范围有限，比较总是正确的——在模板参数中？

> ID：10434640
> 
> 赞同：9
> 
> 时间：2012-05-03T15:34:03.057
> 
> 标签：c++, templates, gcc, comparison, range

我想编写一个模板，它返回可以表示给定数字的最小有符号整数类型。这是我的解决方案：

```
/**
 * Helper for IntTypeThatFits.
 * Template parameters indicate whether the given number fits into 8, 16 or 32
 * bits. If neither of them is true, it is assumed that it fits 64 bits.
 */
template <bool fits8, bool fits16, bool fits32>
struct IntTypeThatFitsHelper { };

// specializations for picking the right type
// these are all valid combinations of the flags
template<> struct IntTypeThatFitsHelper<true, true, true> { typedef int8_t Result; };
template<> struct IntTypeThatFitsHelper<false, true, true> { typedef int16_t Result; };
template<> struct IntTypeThatFitsHelper<false, false, true> { typedef int32_t Result; };
template<> struct IntTypeThatFitsHelper<false, false, false> { typedef int64_t Result; };

/// Finds the smallest integer type that can represent the given number.
template <int64_t n>
struct IntTypeThatFits
{
    typedef typename IntTypeThatFitsHelper<
        (n <= numeric_limits<int8_t>::max()) && (n >= numeric_limits<int8_t>::min()), 
        (n <= numeric_limits<int16_t>::max()) && (n >= numeric_limits<int16_t>::min()), 
        (n <= numeric_limits<int32_t>::max()) && (n >= numeric_limits<int32_t>::min())
    >::Result Result;
}; 
```

但是，GCC 不接受此代码。我收到一个错误“由于数据类型 [-Werror=type-limits] 的范围有限，比较总是正确的”。为什么会这样？n 是一个有符号的 64 位整数，对于不同的 n 值，所有比较可能是真或假，还是我忽略了什么？

我会很高兴得到任何帮助。

编辑：我应该提到我正在使用 C++11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:54:26.583

这是 gcc 的一个问题，模板代码中的警告可能令人沮丧。您可以更改警告或使用其他方法。

您可能知道，模板化代码被分析了两次：

*   首次遇到时（解析）
*   为给定类型/值实例化一次

这里的问题是，在实例化时，检查是微不足道的（是`65`的，`int`谢谢），编译器没有意识到这个警告并不适用于所有实例化:(对于我们这些努力的人来说，这确实非常令人沮丧有警告的无警告编译*体验*。

您有 3 种可能性：

*   停用此警告，或将其降级为非错误
*   使用编译指示有选择地为此代码停用它
*   以另一种格式重新编写代码，使其不再触发警告

请注意，有时第三种可能性涉及巨大的变化和更复杂的解决方案。我建议不要使用复杂的代码来摆脱毫无头绪的警告*。*

**编辑**：

一种可能的解决方法：

```
template <int64_t n>
struct IntTypeThatFits {
    static int64_t const max8 = std::numeric_limits<int8_t>::max();
    static int64_t const min8 = std::numeric_limits<int8_t>::min();

    static int64_t const max16 = std::numeric_limits<int16_t>::max();
    static int64_t const min16 = std::numeric_limits<int16_t>::min();

    static int64_t const max32 = std::numeric_limits<int32_t>::max();
    static int64_t const min32 = std::numeric_limits<int32_t>::min();

    typedef typename IntTypeThatFitsHelper<
        (n <= max8 ) && (n >= min8 ), 
        (n <= max16) && (n >= min16), 
        (n <= max32) && (n >= min32)
    >::Result Result;
}; 
```

...通过更改比较中使用的数据类型，它应该使编译器警告静音。我想显式转换 ( `int64_t(std::numeric_limits<int8_t>::max())`) 也可以，但我发现这更具可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:45:55.343

发生错误是因为您要求 GCC 使用`-Werror=type-limits`. 如果您进行过比较，由于给定数据类型的范围将始终为真，该警告`-Wtype-limits`会给您一个警告，例如：

```
uint8_t x;
if(x >= 0) { ... }  // always true, unsigned integers are non-negative
if(x >= 256) { ... }  // always false

int32_t x;
if(x < 9223372036854775808LL) { ... }  // always true 
```

此警告有时可能很有用，但在包括此在内的许多情况下，它只是无用的迂腐，可以忽略。它通常是一个警告（作为 的一部分启用`-Wextra`，如果你使用它的话），但是使用`-Werror`or`-Werror=type-limits`时，GCC 会使其成为错误。

由于在这种情况下，它实际上并不表示您的代码存在潜在问题，因此只需使用 关闭警告，或者如果您不介意在编译器输出中看到这些警告，则`-Wno-type-limits`使其不是错误。`Werror=no-type-limits`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:42:19.770

```
 typedef typename IntTypeThatFitsHelper<
        (n <= numeric_limits<int8_t>::max()) && (n >= numeric_limits<int8_t>::min()), 
        (n <= numeric_limits<int16_t>::max()) && (n >= numeric_limits<int16_t>::min()), 
        (n <= numeric_limits<int32_t>::max()) && (n >= numeric_limits<int32_t>::min())
    >::Result Result; 
```

你不能在 C++ 中做到这一点（在 C++11 中你可以）——`numeric_limits<int8_t>::max()`不是编译时间常数。你在使用 C++11 吗？

顺便说一句，Boost 已经为您提供了这个：http: [//www.boost.org/doc/libs/1_49_0/libs/integer/doc/html/boost_integer/integer.html](http://www.boost.org/doc/libs/1_49_0/libs/integer/doc/html/boost_integer/integer.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T16:24:45.487

我认为问题所在的其他答案是错误的。我不相信这是一个过度渴望编译器的情况，但我相信这是一个编译器错误。此代码仍会触发警告：

```
template<int64_t n>
bool a() {
    return (n <= static_cast<int64_t>(std::numeric_limits<int8_t>::max()));
} 
```

调用时`a<500>();`，但此代码不会：

```
template<int64_t n>
bool a() {
    return (n <= static_cast<int64_t>(127));
} 
```

std::numeric_limits::max() 计算结果为 127。如果没有其他人这样做，我将在今天晚些时候为此提交一份 bugzilla 报告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T15:48:11.537

您会收到警告，因为对于一些`template <int64_t n> struct IntTypeThatFits`小的`n`（小于 2^32）的实例，由于*编译时*操作数的范围，一些比较总是正确的（原文如此！） 。

在这种情况下，这可能被视为虚假警告，因为您的代码依赖于它，OTOH 您明确要求使用或类似的命令行开关使其成为错误`-Werror`，您基本上得到了您在此处询问的内容。

# c# - 枚举 SSRS 报告中数据的结果视图

> ID：10434646
> 
> 赞同：0
> 
> 时间：2012-05-03T15:34:19.853
> 
> 标签：c#, xml

我必须盘点大约 400 份报告，我需要做的就是将所有 sql 从报告中提取出来。我能够 XmlDocument 加载结果并在 VS 中导航信息并找到我正在寻找的信息。

在每个报告中，我必须单击`Results View`

我必须深入研究以下元素的结果视图。

```
{Element, Name="Report"}
{Element, Name="DataSet"}
{Element, Name="Query"}
{Element, Name="Command Text"} 
```

我正在尝试获取基本命令文本，但我不确定如何枚举或访问该级别。这是我正在使用的代码：

```
 string[] Fil_Info = Directory.GetFiles(dir);
            foreach (string file in Fil_Info)
            {
                XmlDocument doc = new XmlDocument();
                doc.Load(file);
                //Console.WriteLine(doc.Value.ToString());
                XmlAttributeCollection attrColl =doc.DocumentElement.Attributes;
                foreach (XmlAttribute xmlAtt in attrColl)
                {
                    XmlAttributeCollection attrColl2 = xmlAtt.Attributes;
                    foreach (XmlAttribute xmlAtt2 in attrColl2)
                    {

                    }

                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:06:35.257

我真的不知道你在追求什么，我还没有看到你的 XML 结构，所以我在猜测，这可能不是最佳/功能性，但是如果你不需要调整它有什么乐趣对？

```
IEnumerable<XElement> GetCommandText(string file)
    {
    XDocument xdoc = XDocument.Load(file);
    return xdoc.Root.Elements().Where(r => (string)r.Attribute("Name") == "Command Text");
    } 
```

如果您需要更多帮助，请发布原始 XML 的示例 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:17:33.460

您可以让报表服务器报告报表。请参阅 jcoe 在主页上的 XML 查询上的论坛帖子 » 文章讨论 » 作者的文章讨论 » 讨论 Michael Davis 发布的内容 » 报告服务器诊断报告[第 9](http://www.sqlservercentral.com/Forums/Topic859325-2580-9.aspx)页和[第 10 页](http://www.sqlservercentral.com/Forums/Topic859325-2580-10.aspx)。

或者继续您当前的方法，这是一个 Linq 查询，它将从 rdl 文件中解析出您所追求的内容：

```
 XNamespace reportDefinition = "http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition";
        XNamespace reportDesigner = "http://schemas.microsoft.com/SQLServer/reporting/reportdesigner";

        XDocument reportXml = XDocument.Load(@"MyReport.rdl");

        var reportQueries = from XElement dataSetElement in reportXml.Element(reportDefinition + "Report").Element(reportDefinition + "DataSets").Elements(reportDefinition + "DataSet")
                            let dataSetName = dataSetElement.Attribute("Name").Value
                            let queryCommandText = dataSetElement.Element(reportDefinition + "Query").Element(reportDefinition + "CommandText").Value
                            let queryDataSourceName = dataSetElement.Element(reportDefinition + "Query").Element(reportDefinition + "DataSourceName").Value
                            select new { DataSetName = dataSetName, QueryCommandText = queryCommandText, QueryDataSourceName = queryDataSourceName }; 
```

# file - WSO2 如何转换文件

> ID：10434647
> 
> 赞同：0
> 
> 时间：2012-05-03T15:34:20.837
> 
> 标签：file, wso2, vfs

现在我有一个本地文件，就像：

```
<userCode>001</userCode><productCode>001</productCode><Fee>1.00</Fee>
<userCode>002</userCode><productCode>002</productCode><Fee>2.00</Fee>
<userCode>003</userCode><productCode>003</productCode><Fee>3.00</Fee>; 
```

我需要将此文件转换为：

```
<Fee>1.00</Fee><productCode>001</productCode>
<Fee>2.00</Fee><productCode>002</productCode>
<Fee>3.00</Fee><productCode>003</productCode> 
```

我想我需要先阅读，然后再写作。如何在 WSO2 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:28:29.800

我希望你有一个包装这些数据的顶级元素。使其成为适当的 xml。前任 ：

```
 <data><userCode>001</userCode><productCode>001</productCode><Fee>1.00</Fee>... </data> 
```

脚步

1）在axis2.xml中配置VFS传输发送者和接收者

2）为您的内容类型使用 ApplicationXML 消息生成器和格式化程序（这可以是任何前：文件/xml）

3) 配置 VFS 代理以在给定目录中侦听此内容类型。

4) 当消息到来时，使用 XSLT 中介进行转换

5) 使用 VFS sender 存储转换后的文件。

谢谢， 慈善机构

# math - 在基于时间的数据中寻找异常

> ID：10434648
> 
> 赞同：2
> 
> 时间：2012-05-03T15:34:26.233
> 
> 标签：math, variance

查看存储阵列的 IO 延迟数据。当驱动器即将发生故障时，一个迹象是 IO 操作“完成时间”增加。数组好心地以这种格式提供这些数据：

```
 Time                           Disk Channels
    seconds   A      B      C      D      E      F      G      H      P      S
      0.017 5e98bd 64008b 62a559 68eb45 676ccf 5d3a86 46242b 62dd2e 6976c9 6da51f
      0.033 1e821c 1be769 1c372a 185134 19a2c2 21802c 2fa2ba 1d91c4 17b3ca 14cea6
      0.050  6638e  3a93b  4b19f  258aa  28b64  4d3ae  d92dc  32899  26a5b  1290d
      0.067   2df3   1c17   1f1b   180f   1291   1f05   5201   15f4   1856   10d8
      0.083    365    293    2b9    296    269    291    3c4    26f    2ae    25d
      0.100     ce     ae     94     aa     92     86     ce     81     9f     91
    ... 
```

（时间迭代最多 2.00 秒，计数为十六进制）。

左列是 IO 完成的时间，其他列是针对给定主轴在该时间内完成的 IO 计数。

当驱动器即将发生故障时，该驱动器的“尾部”会明显“变宽”......大多数驱动器的 IO 数量很少 > 0.2 秒，故障驱动器可能会在 0.2 秒内获得大量 IO。例子 ：

```
 Time Disk channels
    seconds    A      B      C      D      E      F      G      H      P      S
    ...
    0.200      4    52d      2      7      3      2      1      6      1      8
    0.217      2    2a6      0      1      0      0      1      4      0      1
    0.233      0    1a1      0      1      0      0      0      1      1      0
    0.250      0     cb      0      1      0      0      1      1      0      1
    0.267      0     73      0      0      0      0      0      0      0      0
    0.283      0     44      0      0      0      0      0      0      0      0
    0.300      0     2d      0      0      0      0      0      0      0      0
    ... 
```

我可以在 0.2 秒内查找超过 10 个 IO，但我正在寻找一个可以更准确地识别故障的数学模型。我的第一个想法是计算每列的方差……任何一组方差太大的驱动器都会标记违规者。但是，这会错误地标记驱动器行为正常：

```
 min variance is 0.0000437, max is 0.0001250\.  <== a good set of drives
    min variance is 0.0000758, max is 0.0000939\.  <== a set with one bad drive. 
```

还有其他想法吗？

（这应该在 math.stackexchange.com 上而不是 stackoverflow 上吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:41:28.173

这只是一个建议，不涉及任何数学严谨性，但您能否将数据集缩减为仅包含 > 0.2 秒的操作。然后使用该数据集简单地计算每个驱动器的总计数 > 0.2 并计算出每个驱动器的总数比例。然后，如果您将这些比例相互（以及总数）进行比较，您应该能够识别出故障驱动器。例如，如果只有一个驱动器发生故障，它与其他驱动器的比率应该非常高，其值将略低于 100%（基于您上面的示例数据）。同样，如果有 2 个驱动器发生故障，则其他驱动器的比例应该非常小，而 2 个驱动器发生故障的比例将略低于 50%。

如果您正在寻找更严格的统计数据，可能值得一看 Kruskal-Wallis [http://en.wikipedia.org/wiki/Kruskal%E2%80%93Wallis_one-way_analysis_of_variance](http://en.wikipedia.org/wiki/Kruskal%E2%80%93Wallis_one-way_analysis_of_variance)，它用于测试是否有多个样本来自相同的统计分布。我提到这一点的原因是因为每个磁盘样本显然不是正态分布的，而且 Kruskal-Wallis 不需要正态性。它可能不适合，但可能是一个有用的起点，可以为您的数据研究正确的统计测试，或者直到您找到统计专家。

# css - Div 在 IE 中被推得比 margin-top-down 更远

> ID：10434650
> 
> 赞同：0
> 
> 时间：2012-05-03T15:34:31.053
> 
> 标签：css, internet-explorer, margins

我在 IE 中的布局有一些问题。

```
#dumpit {
    width:99%;
    min-height:330px;
    background-color: #FFF;
    border: 2px solid #74c9e4;
    border-radius:20px;
    margin-top:18.75%;
    padding:3px;
    overflow:hidden; 
```

我的标志在 Firefox 和 Chrome 中看起来不错，但在 IE 中，dumpit div 被推得比我想要的更远。

关于如何解决这个问题的任何建议？

谢谢

# c# - 如何在 Windows 窗体中打开进程

> ID：10434658
> 
> 赞同：3
> 
> 时间：2012-05-03T15:35:00.213
> 
> 标签：c#, winforms, process

我想在我的 Windows 窗体应用程序中打开进程。

例如，我希望当用户按下其中一个 Windows 窗体容器中的按钮时，mstsc.exe 将打开。

如果他按下按钮，它将在另一个容器上打开 IE，

```
[DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);
       private void button1_Click(object sender, EventArgs e)
    {
        Process p = Process.Start("mstsc.exe", @"c:\VPN4.rdp");
        Thread.Sleep(3000);
        p.StartInfo.CreateNoWindow = true;    // new
        SetParent(p.MainWindowHandle, this.panel1.Handle);
        p.StartInfo.WindowStyle = ProcessWindowStyle.Maximized;   //new

    } 
```

它打开进程，但不是以 Windows 形式，，，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T05:03:56.803

您可以启动另一个进程，并将它的窗口放在您自己的窗口中。

尝试使用您的表单句柄而不是面板。这是一个简短的例子

```
private void toolStripButton1_Click(object sender, EventArgs e)
{
  ProcessStartInfo info = new ProcessStartInfo();
  info.FileName = "notepad";
  info.UseShellExecute = true;
  var process = Process.Start(info);

  Thread.Sleep(2000);

  SetParent(process.MainWindowHandle, this.Handle);
} 
```

至于原始问题的具体问题，我猜这是由于远程桌面打开其他窗口以供应用程序工作，而 MainWindowHandle 不是您所追求的。

尝试在 windows API 中使用 FindWindowEx 来搜索正确的窗口。如果您按进程 ID 和标题搜索，您应该找到正确的。Stackoverflow 和 google 有大量的信息。只需搜索“C# FindWindowEx”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:41:25.387

```
ProcessStartInfo info = new ProcessStartInfo();
info.FileName = "notepad";
info.UseShellExecute = true;
Process.Start(info); 
```

# facebook-graph-api - 使用 restfb 检索当前用户的喜欢

> ID：10434659
> 
> 赞同：0
> 
> 时间：2012-05-03T15:35:01.817
> 
> 标签：facebook-graph-api, restfb

我正在使用 restfb 库来检索用户信息。我如何检索他喜欢的电影、音乐、书籍？

FB Graph API 说我们可以使用以下来检索这些信息

```
Movies: https://graph.facebook.com/me/movies?access_token=...
Music: https://graph.facebook.com/me/music?access_token=...
Books: https://graph.facebook.com/me/books?access_token=... 
```

但是，如果我在代码中使用以下内容，

```
facebookClient.fetchConnectionPage("me/movies", ...); 
```

我得到错误。

需要做什么？

谢谢阿杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T17:51:44.233

这可以帮助你：

```
 Connection<Page> fetchConnection = facebookClient.fetchConnection( "me/movies", Page.class );

    for ( Page page : fetchConnection.getData() )
    {
        System.out.println( page.getName() );
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:41:52.547

此函数中的第一个参数是完整的 URL，例如“https://graph.facebook.com/me/movies”。

# python - 使用csv文件中的python格式化从twitter api返回的数据？

> ID：10434669
> 
> 赞同：2
> 
> 时间：2012-05-03T15:35:17.683
> 
> 标签：python, csv, formatting, twitter

热心的小伙伴们好！我正在做一个项目，我正在利用 python 与 twitter api 进行交互。

目标：从“pprint.pprint(datares)”代码中返回的原始数据中提取推文的位置、文本、创建时间和用户 ID，并将其转换为 csv 文件中的指定格式。

问题：如何将我返回的信息返回到 csv 文件中，以便文件中的每一行显示如下：

行：推文文本、位置、创建时间、用户 ID

以下是我的代码，显示了到目前为止我能够返回的内容。

```
import urllib2, json, pprint, codecs, unicodedata

u = urllib2.urlopen('http://search.twitter.com/search.json?geocode=29.762778,-95.383056,25.0mi&page=1&rpp=20')
datares = json.load(u)
##raw data returned
pprint.pprint(datares)

##open csv file
with codecs.open('Geotweets.csv',mode='w', encoding='utf-8',errors='replace') as cache:
##need to save tweets,date,area,id to file
    for tweet in datares['results']:
        print tweet['text']
        archive=tweet['text']
        unicodedata.normalize('NFKD', archive).encode('ascii','ignore')
        cache.write(archive)

for date in datares['results']:
    print date['created_at']
for area in datares['results']:
    print area['location']
for id in datares['results']:
    print id['from_user'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:40:51.270

如果要制作 CSV 文件，请使用[该`csv`模块](http://docs.python.org/library/csv.html)！

例如：

```
with codecs.open('Geotweets.csv',mode='w', encoding='utf-8',errors='replace') as cache:
    writer = csv.writer(cache)
    for tweet in datares['results']:
        writer.writerow([tweet['text'], tweet['area'], tweet['date'], tweet['id']]) 
```

或者：

```
with codecs.open('Geotweets.csv',mode='w', encoding='utf-8',errors='replace') as cache:
    writer = csv.DictWriter(cache, ["text", "area", "date", "id"])
    for tweet in datares['results']:
        writer.writerow(tweet) 
```

显然，您还可以使用`writerows()`它来进一步简化：

```
with codecs.open('Geotweets.csv',mode='w', encoding='utf-8',errors='replace') as cache:
    writer = csv.DictWriter(cache, ["text", "area", "date", "id"])
    writer.writerows(datares['results']) 
```

# java - Java KeyEvent 比较 - arg0 是否等于特定键

> ID：10434670
> 
> 赞同：3
> 
> 时间：2012-05-03T15:35:18.663
> 
> 标签：java, comparison, keylistener, keyevent

我创建了一个新的 KeyListener，定义如下：

```
...
public void keyTyped(KeyEvent arg0) {
    if (arg0.equals(KeyEvent.VK_ENTER) || (arg0.equals(KeyEvent.VK_R))) {
        System.out.println("Enter or R key typed.");
        } else {
        System.out.println("Something else typed.");
    }
}
... 
```

我真正想做的是每次输入 Enter 键或“R”时调用一个方法。

我的问题：无论我输入什么，都不会触发 if 案例。它总是跳转到 else 情况。这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:38:53.160

要将输入与`KeyEvent.xxx`值进行比较，您需要使用[该`getKeyCode`方法](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getKeyCode%28%29)`int`，该方法在您捕获`keyPressed`或事件时返回一个`keyReleased`- 然后您可以将值与 a 进行比较`KeyEvent.xxx`。如果您想使用`keyTyped`事件，您可以使用该`getKeyChar`方法，但它不会捕获某些键（例如操作或修饰键） - 这应该适用于例如：

```
public void keyReleased(KeyEvent e) {
    if (e.getKeyCode() == KeyEvent.VK_ENTER || e.getKeyCode() == KeyEvent.VK_R) {
        System.out.println("Enter or R key typed.");
    } else {
        System.out.println("Something else typed.");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:41:39.357

keyTyped 仅适用于 JTextField 或 JTextArea 等控件，您可能正在寻找 keyPressed。如果不是这种情况，您可能需要提供更多上下文。

# php - PHP/MySQL 特殊字符无法正确显示

> ID：10434677
> 
> 赞同：1
> 
> 时间：2012-05-03T15:35:46.170
> 
> 标签：php, mysql, text

> **可能重复：**
> [PHP / MySQL 中的特殊字符](https://stackoverflow.com/questions/633762/special-characters-in-php-mysql)

我有个问题。我的数据库（MySQL 5.5.20）中有一段文本，其中包含 'é' 和“'”等字符，在执行 MySQL 查询并使用 echo($...) 显示后，这些字符无法正确显示。对于我在数据库中输入的每个特殊字符，它会在菱形内显示一个小问号。如果我查看数据库本身中的文本，它是一个 'é' 和 "'"，所以我认为问题不在于 MySQL。

我可以做的一件事是 str_replace 输入时像 " ' " --> "'" 这样的所有内容，但是我必须对每个字符都这样做。哦，我已经包括了

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

这没有用。

希望你有所有的信息来帮助我，如果不只是说:) 提前谢谢！

米兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:38:08.307

您需要在 utf-8 中包含所有内容：

*   数据库字段
*   数据库连接（`mysql_set_charset('utf8');`在经典 mysql 中，类似于`$db->exec('SET CHARACTER SET utf8');`PDO）
*   内容类型（就像您已经拥有的一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:50:40.447

`SET NAMES utf8`在成功连接到数据库多年后，我正在使用 SQL 查询。但是，当您将所有内容都使用相同的编码时，这不是必需的

*   源文件编码
*   表列排序规则
*   网页编码（在 PHP`header('Content-Type: text/html; charset=utf-8');`和 中`<header>` `<meta name="Content-Type" value="text/html; charset=utf-8" />`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:53:09.367

我通常用 str_replace 格式化所有输入文本，并用 &#xxx; 替换所有不常见的符号。等价的，这对于防止注入和糟糕的 html 渲染实际上很有用

即，如果有人输入 html 标签，他们将在您的页面中处于活动状态，依此类推。

# search - 将 libxml2 添加到 Xcode 错误

> ID：10434681
> 
> 赞同：0
> 
> 时间：2012-05-03T15:35:55.060
> 
> 标签：search, header, libxml2, kissxml

我已经看到了 10239218301 其他关于此的问题，但没有解决方案对我有用。

我试过“其他链接器标志”=`-lxml2`

我试过“搜索头文件”=`$(SDKROOT)/usr/include/libxml2`

我试过“搜索头文件”=`$(SDK_DIR)/usr/include/libxml2`

我试过“搜索头文件”=`/usr/include/libxml2`

我已经尝试了选中和未选中“始终搜索用户路径”的所有组合。

我正在尝试将其用于 xcode 以与 KissXML 一起使用，但我有一些 860 错误和 400 警告......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:56:30.807

万一其他人想要解决这个问题，我无法从 KissXML GitHub 上获取文件来工作，但我从以下链接下载了项目并复制了 KissXML 文件。它使用“$(SDK_DIR)/usr/include/libxml2”格式。

[http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

# php - WordPress wp_insert_post 未插入标签

> ID：10434686
> 
> 赞同：7
> 
> 时间：2012-05-03T15:36:21.147
> 
> 标签：php, wordpress

我正在尝试使用以下代码插入帖子：

```
$my_post = array(
                'post_type'    => "essays",
                'post_title'    => 'TEST 3',
                //'post_content'  => $content,
                'post_status'   => 'draft',
                'post_author'   => 1,
                //'post_category' => $cat,
                'tags_input'    => 'TQM,tag',
        );

$post_id = wp_insert_post($my_post); 
```

一切正常，除了标签，它不插入任何标签。任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-24T15:01:18.900

Use the `wp_set_object_terms()` function:

[http://codex.wordpress.org/Function_Reference/wp_set_object_terms](http://codex.wordpress.org/Function_Reference/wp_set_object_terms)

```
wp_set_object_terms($post_id , $arrayoftags, $name_of_tag_taxonomy, false); 
```

Good luck

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:49:30.630

您的帖子类型是`essays`。默认情况下，自定义帖子类型不支持标签。您必须`tags`为它们添加分类法。

[http://codex.wordpress.org/Taxonomies](http://codex.wordpress.org/Taxonomies)

[http://codex.wordpress.org/Function_Reference/register_taxonomy](http://codex.wordpress.org/Function_Reference/register_taxonomy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:50:22.060

嗨，我在某个地方找到了这个答案，这可能会对您有所帮助

```
//first get the term (I used slug, but  you can aslo use 'name'), see: http://codex.wordpress.org/Function_Reference/get_term_by
$term = get_term_by( 'slug', 'your custom term slug', 'your custom taxonomy' );
//then get the term_id
$term_id = $term->term_id;
//Use 'tax_input' instead of 'post_category' and provide the term_id:
'tax_input' => array( 'your taxonomy' => $term_id ) 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:20:26.077

要插入带有标签和类别的帖子，请执行此操作

```
$pid=wp_insert_post($new_post);
wp_set_post_terms( $pid, $arrayoftags);
wp_set_post_categories( $pid, $arrayofcategories ); 
```

所以 $pid 是帖子 id 基本上你首先插入没有标签或类别的帖子，函数返回帖子的 id，然后你可以使用它来插入标签和类别，每个标签和类别都有各自的功能，如果你查看 wp_insert_post 的源代码您会注意到该函数以不同的方式用于自定义帖子类型，我没有深入研究它，因为我不想破解代码，因为使用内置函数有更好的解决方案

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T17:15:28.333

标签和帖子类别应该作为一个数组输入，即使它只有一个。所以`'tags_input' => 'TQM,tag'` 应该是`'tags_input' => array('TQM,tag')`

# android - 带有 AspectJ 的 Android - Spinner 的下拉菜单不会显示

> ID：10434689
> 
> 赞同：1
> 
> 时间：2012-05-03T15:36:57.963
> 
> 标签：android, aspectj, android-spinner

由于monkeytalk（跨平台测试框架），我在我的Android项目中使用了aspectJ。但是由于我将我的项目转换为 aspectJ 项目，微调器的下拉列表消失/不可见......

如果我将项目转换回非aspectJ项目，一切都会正常运行（monkeytalk代理除外......）。

我还创建了自己的微调器并覆盖了 onTouch，以检查事件是否到达。触摸被识别，但下拉视图不会打开！

有没有其他人类似的问题或一些帮助？

编辑：我已经在运行 4.0.4 的 Galaxy nexus 和运行 2.1 的索尼 xperia 上对此进行了测试

提前致谢

弗洛

我的 onCreate 测试代码（如您所见，它非常简单）：

```
 Spinner sp = (Spinner)findViewById( R.id.spinner1 );

    List<String> list = new ArrayList<String>();
    list.add("list 1");
    list.add("list 2");
    list.add("list 3");

    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, list);

    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    sp.setAdapter(dataAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:27:42.847

monkeytalk 团队宣布这是他们代理中的一个错误。他们希望在本周发布一个固定版本。

不管怎么说，还是要谢谢你 ：）

# html - 网站的 CSS 问题

> ID：10434690
> 
> 赞同：0
> 
> 时间：2012-05-03T15:36:58.280
> 
> 标签：html, css, wordpress

我在小屏幕上渲染此站点时遇到问题。内容 div 被下推。有人对此有推荐的解决方案吗？我已经尝试了一些事情，我需要一个全新的视角。

[http://www.ab-mobile-apps.com/wp/rai/](http://www.ab-mobile-apps.com/wp/rai/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:41:29.650

尝试改变

```
#page {
    margin: auto;
    max-width: 1000px;
} 
```

至 ：

```
#page {
    margin: auto;
    width: 1000px;
} 
```

# c++ - 程序冻结/循环

> ID：10434694
> 
> 赞同：-1
> 
> 时间：2012-05-03T15:37:15.813
> 
> 标签：c++

我遇到了以下问题，我没有收到任何警告或错误，只是程序崩溃。

当我在初始化`printAll()`后在我的菜单中运行时。`dummyData()`我添加一个新学生的那一刻，它就开始循环`studentMenu()`.

域.h：

```
template <class T>
struct Array{
    int length;
    T * M;

    Array( int size ) : length(size), M(new T[size])
    {
    }
    ~Array()
    {
       delete[] M;
    }
};

template <class T>
struct Array{
    int length;
    T * M;

    Array( int size ) : length(size), M(new T[size])
    {
    }
    ~Array()
    {
       delete[] M;
    }
};

template <class T>
void addStudent(int a, int b, std::string c,Array <T> A){
    A.M[a].setStudent(a,b,c);
}

template <class T>
void DummyDataStudents(Array <T> A){
    for(int i=1; i<15; i++){
        A.M[i].setStudent(i, i,"student");
    }
    cout<<"Done Students"<<endl;
} 
```

控制器.h

```
template <class T>
void _addStudent(Array <T> &A){
    int a,b;
    string c;
    cout<<"Enter ID:"<<endl;
    cin>>a;
    cout<<"Enter Group:"<<endl;
    cin>>b;
    cout<<"Enter Name:"<<endl;
    cin>>c;

    addStudent(a,b,c,A);
} 
```

学生.cpp：

```
void Student::setStudent(int a,int b,string c){

this->ID = a;
this->group = b;
this->name = c;
} 
```

菜单.cpp：

```
void Menu::mainMenu(Array <Student> &DBst,Array <Assignment> &DBas){
showMainMenu();
int ret = Menu::intInputHandler();

switch(ret){
case 1:studentMenu(DBst,DBas);break;
case 2:assignmentMenu(DBst,DBas);break;
case 3:statsMenu(DBst,DBas);break;
case 4:_printAll(DBst,DBas);break;
case 0:break;
default:cout<<"Wrong option selected!";break;
}
Menu::mainMenu(DBst,DBas);
}

void Menu::studentMenu(Array <Student> &DBst,Array <Assignment> &DBas){
    showStudentMenu();
    int ret = Menu::intInputHandler();

    switch(ret){
    case 1:_addStudent(DBst);break;
    case 2:break;
    case 3:break;
    case 4:break;
    case 5:_printAllStud(DBst);break;
    case 6:break;
    case 0:mainMenu(DBst,DBas);break;
    default:cout<<"Wrong option selected!";break;
    }
    Menu::studentMenu(DBst,DBas);
} 
```

主要.cpp：

```
int main(){
//Main function of the program

    DummyDataStudents(DBst);

    DBst.M[10].setStudent(1,10,"sadasd");     //works just fine
    DBst.M[10].printStudent();cout<<endl;

    Menu main;      
    main.mainMenu(DBst,DBas);

    DBst.~Array();
    DBas.~Array();

    return 0;
} 
```

///我想这应该足够理解了。当我添加一个新学生时，我会循环打印菜单，直到它崩溃；如果我打电话`printall()`，我会直接崩溃。请帮助并为长代码感到抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:58:57.050

这是个问题：

```
template <class T> void addStudent(int a, int b, std::string c,Array <T> A){ 
```

是`Array` `A`按值传递的，所以它被复制意味着现在有两个实例`Array`指向同一个内部数组`M`，因为没有定义复制构造函数，`Array`因此生成了默认的复制构造函数。当`addStudent()`返回内部数组`M`被`Array`函数的本地实例删除时。这使剩余的实例`Array` `A`带有一个悬空指针。

要么实现复制构造函数和赋值运算符（我认为你不想这样做），要么使`Array`不可复制声明复制构造函数和赋值运算符`private`。

# java - 如何知道 ImageView 何时完成加载图像？

> ID：10434695
> 
> 赞同：1
> 
> 时间：2012-05-03T15:37:24.067
> 
> 标签：java, android, imageview, loading

我有一个加载自定义 ImageView 的活动（[https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java)）。在 onCreate 中，我使用 setImageBitmap 来显示一个巨大的图像（4Mb ...）。

问题是这个活动需要 4 秒才能显示，但是我没有可以在 AsyncTask 中放置的阻塞方法。我的意思是我的所有活动代码都已执行，但活动仅在图像加载时出现，我不知道它何时完成。

我想要做的是在 Activity 加载它时显示一个 ProgressDialog，并在它完成时显示它。

我该如何解决这个问题？这是一些代码。

希望你能理解我的问题，这很难解释。谢谢 ！

carte.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/parentLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<loki.test.lokitest.affichage.TouchImageView 
    android:id="@+id/image"
    android:src="@drawable/loading"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    />

<Button 
    android:id="@+id/bouton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/textBouton"/>

</RelativeLayout> 
```

CarteActivity.java（耗时 4 秒的那个）

```
public class CarteActivity extends Activity implements OnClickListener{

private Group groupe;
private String android_id;
private ConnexionServeur serveur;
private TouchImageView vue;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    Log.d("Loki","onCreate");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.carte);

    findViewById(R.id.bouton).setOnClickListener(this);

    vue = ((TouchImageView)findViewById(R.id.image));
    vue.setImageBitmap(Singleton.getInstance().getImage());

    groupe = Singleton.getInstance().getGroupe();
    android_id = Singleton.getInstance().getAndroid_id();
    serveur = Singleton.getInstance().getServeur();

    if(groupe != null)
            groupe.afficherGroupe(vue);

    }
} 
```

**编辑**：图像加载：

```
image = BitmapFactory.decodeResource(context.getResources(), R.drawable.myImage); 
```

但我不认为这是需要时间的代码，当我使用 setImageBitmap 时它已经完成。我不知道什么需要这么多时间，但我想知道这是否是我可以访问的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:49:12.990

*   使Layout xml顶部容器（Top RelativeLayout）携带两个元素

    1 进度条 - 可见性设置为可见。使它变大并在中心

    2 相对布局 - 整个内容正文。先让它不可见。它将在进度条下，并将在高度和宽度方面填满整个屏幕。

*   在 oncreate setContentView 中，然后启动一个 AysncTask，它在 doInBackground 中加载图像视图。在其 postExecute 中，使内容主体可见，进度条不可见。 **只有在加载完成后才会调用 Postexecute**

希望这能有所帮助，您可以用代码翻译所有这些内容。

# javascript - Farbtastic 多字段 - Wordpress

> ID：10434697
> 
> 赞同：1
> 
> 时间：2012-05-03T15:37:33.643
> 
> 标签：javascript, wordpress

我正在开发一个 wordpress 主题。我现在正在处理主题选项页面。我添加了 farbtastic（4 个字段），问题是每次单击输入时，颜色选择器也会出现在其他 3 个字段上。有人知道如何解决这个问题吗？谢谢！

```
<div> <br />
  <label for="<?php echo $colorPicker['ID']; ?>"><?php _e($colorPicker['label']); ?></label>
  <input type="text" class="color-picker" id="<?php echo $colorPicker['ID']; ?>" value="<?php echo get_option($colorPicker['ID']); ?>" name="<?php echo $colorPicker['ID']; ?>" />
  <div id="<?php echo $colorPicker['ID']; ?>_color" class="fabox"></div>            </div>          
<?php endforeach; ?>            
<p><input type="submit" name="update_options" value="Update Options" class="button-primary" /></p>
</form>
</div>

<script type="text/javascript">
jQuery(document).ready(function($) {
    var colorPickers = $('.color-picker');
    console.log(colorPickers);
    for (e in colorPickers) {
        if (colorPickers[e].id != undefined) {
            var colorPickerID = colorPickers[e].id;
            $('#' + colorPickerID + '_color').farbtastic('#' + colorPickerID);
        }
    }

    $('.fabox').hide();

    $('.color-picker').click(function() {
        $('.fabox').fadeIn();
    });

    $(document).mousedown(function() {
        $('.fabox').each(function() {
            var display = $(this).css('display');
            if (display == 'block') $(this).fadeOut();
        });
    });
});​
</script> 
```

HTML 输出：

```
<form method="POST" action="">  

                        <div>

            <br />

            <label for="color_1"><strong>Post Title</strong></label>

            <input type="text" class="color-picker" id="color_1" value="#273990" name="color_1" />

            <div id="color_1_color" class="fabox"></div>

            </div>

                        <div>

            <br />

            <label for="color_2"><strong>Paragraph Text</strong></label>

            <input type="text" class="color-picker" id="color_2" value="#840000" name="color_2" />

            <div id="color_2_color" class="fabox"></div>

            </div>

                        <div>

            <br />

            <label for="color_3"><strong>Example</strong></label>

            <input type="text" class="color-picker" id="color_3" value="#4377df" name="color_3" />

            <div id="color_3_color" class="fabox"></div>

            </div>

                        <div>

            <br />

            <label for="color_4"><strong>And Another Example</strong></label>

            <input type="text" class="color-picker" id="color_4" value="#3c8400" name="color_4" />

            <div id="color_4_color" class="fabox"></div>

            </div>

                        <p><input type="submit" name="update_options" value="Update Options" class="button-primary" /></p>

        </form>

    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:29:56.750

您使用 jQuery 选择器引用的元素范围太广。本质上，您的代码说每次单击该类的任何内容时`color-picker`，都会显示该类的任何内容`fabox`。

您应该使您的引用更具体到当前单击的`.color-picker`.

我建议更换这个：

```
$('.fabox').fadeIn(); 
```

有了这个：

```
$(this).parent().find('.fabox').fadeIn(); 
```

因此，您仅引用`.fabox`连接到`.color-picker`您刚刚单击的那个。

**编辑**：正如 gillesc 所指出的，实际上使用起来会更快：

```
$(this).next().fadeIn(); 
```

只要`.fabox`总是跟随着`.color-picker`。

如果在`.fabox`同一个容器内，但不是您可以使用的下一个元素：

```
$(this).next('.fabox').fadeIn(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:04:43.677

你不需要使用`for (e in foo)`using `jQuery.each()`，它更干净，这里你的 e 是一个非常糟糕的全局变量，每个错误都不会发生。

也使用它`$(function(){});`来代替`$(document).ready(function(){});`它，但你会得到更好的足迹，你的代码更容易阅读。

而在 dom 就绪函数中，您不需要 $ 作为参数，当您需要闭包时，这是一种保证 $ 是闭包内的 jQuery 的方法。

```
(function($) {
  // your code
})(jQuery); 
```

所以你的代码最终是这样的，而不是你所拥有的

```
$(function() {

    $('.color-picker').each(function() {
        if (this.id) {
            $('#' + this.id + '_color').farbtastic('#' + this.id);
        };
    }).click(function() {
        $(this).next().fadeIn();
    });

    $('.fabox').hide();

    $(document).mousedown(function() {
        $('.fabox:visible').fadeOut();
    });
});​ 
```

而且我认为您的问题可能是 idtencial IDs 所以它混淆了插件，但公平地说，如果您发布 HTML 输出而不是 PHP 代码会更容易，因为它是我们想要查看的 DOM，而且如果不知道是什么就很难猜测PHP 变量正在输出。

# mongodb - MongoDB 是否需要至少 2 个服务器实例来防止数据丢失？

> ID：10434698
> 
> 赞同：3
> 
> 时间：2012-05-03T15:37:36.763
> 
> 标签：mongodb

我决定在业余时间开始开发一个小的 Web 应用程序，这样我就可以了解 MongoDB。我计划获得一个 Amazon AWS 微型实例并在那里开始开发和 alpha 阶段。[但是，我在 Stack Overflow 上](https://stackoverflow.com/questions/3391586/mongodb-on-ec2-server-or-aws-simpledb)偶然发现了一个让我担心的问题：

> 但是为了持久性，您需要使用至少 2 个 mongodb 服务器实例作为主/从。否则，您可能会丢失最后一分钟的数据。

真的吗？我不能让我的盒子上安装了所有东西（Apache、PHP、MongoDB）并依赖于正确存储的数据吗？至少，MongoDB 中必须有一个配置选项，以使其即使安装在单个盒子上也能可靠运行——不是吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T16:13:03.580

您拥有的有关主/从设置的信息已过时。使用日志运行单服务器 MongoDB 是一种持久的数据存储，因此对于不需要副本集或处于开发阶段的用例，日志将运行良好。

但是，如果您在生产中，我们建议使用副本集。对于最低限度的设置，理想情况下，您将运行三个（或更多）mongod 实例，一个接收读取和写入的“主”，一个将来自主的写入复制到的“辅助”，以及一个仲裁器，一个mongod 的实例，它允许在主节点不可用时进行投票。这种“自动故障转移”意味着，如果您的主节点在给定时间无法接收来自您的应用程序的写入，则辅助节点将成为主节点并接管从您的应用程序接收数据。

[您可以在此处](http://www.mongodb.org/display/DOCS/Journaling)阅读有关日志和复制的更多[信息](http://docs.mongodb.org/manual/core/replication/)，并且您绝对应该熟悉一般[文档](http://docs.mongodb.org/manual/contents/)，以便更好地了解 MongoDB 的全部内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T06:03:42.330

复制提供冗余并提高数据可用性。由于不同数据库服务器上有多个数据副本，复制可以保护数据库免受单个服务器丢失的影响。复制还允许您从硬件故障和服务中断中恢复。有了额外的数据副本，您可以将其中的一份专门用于灾难恢复、报告或备份。

在某些情况下，您可以使用复制来增加读取容量。客户端可以向不同的服务器发送读写操作。您还可以在不同的数据中心维护副本，以增加分布式应用程序的数据的局部性和可用性。MongoDB 中的复制

副本集是一组托管相同数据集的 mongod 实例。一个 mongod，主要的，接收所有的写操作。所有其他实例（辅助实例）从主实例应用操作，以便它们具有相同的数据集。

主节点接受来自客户端的所有写操作。副本集只能有一个主副本。因为只有一个成员可以接受写操作，所以副本集提供了严格的一致性。为了支持复制，主节点在其 oplog 中记录对其数据集的所有更改。有关详细信息，请参阅主要内容。

# php - 发送多个域名的邮件

> ID：10434701
> 
> 赞同：0
> 
> 时间：2012-05-03T15:37:49.943
> 
> 标签：php, email, smtp, centos, sendmail

所以我有一台服务器，只有一个域名，比如说 domain1.com。在同一台服务器上，我有一个具有另一个域名的子服务器，比如说 domain2.com。它们都具有相同的 IP 地址。我的服务器是 CentOS，使用 sendmail 作为 SMTP 服务器。每当我从 domain2.com 发送电子邮件时，它仍然从 domain1.com 发送。有没有办法配置 sendmail 通过 domain2.com 发送电子邮件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:43:46.883

您只需将[sendmail 配置为使用虚拟用户/通用表](http://www.techrepublic.com/article/configure-it-quick-set-up-sendmail-to-host-multiple-domains/5033970)。

# javascript - 我可以在子窗口的上下文中执行书签吗？

> ID：10434705
> 
> 赞同：0
> 
> 时间：2012-05-03T15:38:00.223
> 
> 标签：javascript, popup, cross-domain, bookmarklet

我想在弹出窗口中打开一个外部站点，然后从父窗口的书签栏在该弹出窗口上执行一个小书签。但是，除了更改弹出窗口的 document.location 之类的简单任务之外，我无法弄清楚它是如何完成的。一开始有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:49:48.067

不，同源政策将发挥作用。浏览器不知道 JavaScript 来自小书签或页面上的脚本。

# javascript - 如何使用 jQuery 遍历表行并获取单元格值

> ID：10434711
> 
> 赞同：18
> 
> 时间：2012-05-03T15:38:34.670
> 
> 标签：javascript, jquery, ajax, html-table

我正在使用 jQuery 动态创建下表...执行我的代码后，我得到如下表：

```
<table id="TableView" width="800" style="margin-left: 60px">
<tbody>
 <tr>
 <th>Module</th>
 <th>Message</th>
</tr>
<tr class="item">
 <td> car</td>
 <td>
  <input class="name" type="text">
 </td>
 <td>
<input class="id" type="hidden" value="5">
</td>
   </tr>
<tr class="item">
 <td> bus</td>
 <td>
  <input class="name" type="text">
 </td>
 <td>
<input class="id" type="hidden" value="9">
</td>
  </tr> 
```

我曾经像这样迭代表：

```
 $("tr.item").each(function() {
            var quantity1 = $this.find("input.name").val();
        var quantity2 = $this.find("input.id").val();

            }); 
```

通过使用上面的查询，我只获得了第一行单元格的值...帮助我使用 jQuery，它将遍历表的整个行并在 和 中获取行单元格`quantity1`值`quantity2`。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-03T15:40:01.817

`$(this)`而不是 $this

```
$("tr.item").each(function() {
        var quantity1 = $(this).find("input.name").val(),
            quantity2 = $(this).find("input.id").val();
}); 
```

**[证明_1：](http://jsfiddle.net/3huUZ/)**

[**证明_2：**](http://jsfiddle.net/jcJAQ/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-06T22:01:58.683

使用 JQuery 和 DOM 逻辑循环遍历每行的表并读取第一列的值。

```
var i = 0;
var t = document.getElementById('flex1');

$("#flex1 tr").each(function() {
    var val1 = $(t.rows[i].cells[0]).text();
    alert(val1) ;
    i++;
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-04T04:35:25.497

大家好，感谢以下帮助是我问题的工作代码

```
$("#TableView tr.item").each(function() { 
    var quantity1=$(this).find("input.name").val(); 
    var quantity2=$(this).find("input.id").val(); 
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-03T15:47:04.487

您得到了答案，但是当您可以直接输入输入时，为什么要遍历 tr 呢？这样，您可以更轻松地将它们存储到数组中，并减少 CSS 查询的数量。当然，这取决于您要做什么，但是对于收集数据，这是一种更灵活的方法。

[http://jsfiddle.net/zqpgq/](http://jsfiddle.net/zqpgq/)

```
var array = [];

$("tr.item input").each(function() {
    array.push({
        name: $(this).attr('class'),
        value: $(this).val()
    });
});

console.log(array);​ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-27T12:49:11.823

**我明白了，并在下面解释：**

//这个表有两行包含每一行，一个选择在第一个td，一个输入标签在第二个td，第二个输入在第三个td；

```
<table id="tableID" class="table table-condensed">
       <thead>
          <tr>
             <th><label>From Group</lable></th>
             <th><label>To Group</lable></th>
             <th><label>Level</lable></th>

           </tr>
       </thead>
         <tbody>
           <tr id="rowCount">
             <td>
               <select >
                 <option value="">select</option>
                 <option value="G1">G1</option>
                 <option value="G2">G2</option>
                 <option value="G3">G3</option>
                 <option value="G4">G4</option>
               </select>
            </td>
            <td>
              <input type="text" id="" value="" readonly="readonly" />
            </td>
            <td>
              <input type="text" value=""  readonly="readonly" />
            </td>
         </tr>
         <tr id="rowCount">
          <td>
            <select >
              <option value="">select</option>
              <option value="G1">G1</option>
              <option value="G2">G2</option>
              <option value="G3">G3</option>
              <option value="G4">G4</option>
           </select>
         </td>
         <td>
           <input type="text" id="" value="" readonly="readonly" />
         </td>
         <td>
           <input type="text" value=""  readonly="readonly" />
         </td>
      </tr>
  </tbody>
</table>

  <button type="button" class="btn btn-default generate-btn search-btn white-font border-6 no-border" id="saveDtls">Save</button>

//call on click of Save button;
 $('#saveDtls').click(function(event) {

  var TableData = []; //initialize array;                           
  var data=""; //empty var;

  //Here traverse and  read input/select values present in each td of each tr, ;
  $("table#tableID > tbody > tr").each(function(row, tr) {

     TableData[row]={
        "fromGroup":  $('td:eq(0) select',this).val(),
        "toGroup": $('td:eq(1) input',this).val(),
        "level": $('td:eq(2) input',this).val()
 };

  //Convert tableData array to JsonData
  data=JSON.stringify(TableData)
  //alert('data'+data); 
  });
}); 
```

# objective-c - 自动续订 IAP：latest_receipt 字段

> ID：10434712
> 
> 赞同：3
> 
> 时间：2012-05-03T15:38:35.363
> 
> 标签：objective-c, ios, cocoa-touch, in-app-purchase

当用户购买订阅时，我将完成交易的收据与用于识别收据所属用户的密钥一起存储在服务器上。当应用程序需要检查订阅是否仍然有效时，它会查询服务器，服务器验证 Apple 的收据并将信息返回给我的应用程序，无论订阅是否过期。

现在的问题是：

当响应返回`latest_receipt`/`_info`字段时，服务器应获取该收据并替换旧收据以供将来验证。如果订阅期有间隔（例如用户订阅了 1 个月，然后取消，然后再次订阅）或用户更改了订阅类型（例如从 1 个月到 3 个月），会发生什么情况？

原始收据是否仍然有效，并返回`latest_receipt`/`_info`字段，还是我需要存储新交易的新收据？

我现在对这个自动更新的事情真的很困惑，所以我什至不确定我的验证过程是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:14:50.543

我不确定您必须验证收据的所有可能性，也许它可以按您的方式工作，但我们的做法略有不同，因此不会遇到您的问题。

我们将所有收据存储在设备端（请注意，自动更新也会产生新的收据）。每当需要验证时，我们会将设备存储的最新收据发布到服务器，并通过调用 iTunes 进行验证。之后，服务器向设备响应有关用户权限的信息。

我认为这是 Apple 推荐的方式（或者至少这是我理解[Apple 文档的](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html#//apple_ref/doc/uid/TP40008267-CH100-SW1)方式）。

# c++ - pthread_create() 如何工作？

> ID：10434717
> 
> 赞同：11
> 
> 时间：2012-05-03T15:38:43.470
> 
> 标签：c++, c, pthreads

鉴于以下情况：

```
pthread_t thread;
pthread_create(&thread, NULL, function, NULL); 
```

*   到底`pthread_create`做什么`thread`？

*   `thread`加入主线程并终止后会发生什么？

*   如果在`thread`加入后，你这样做会发生什么：

    ```
    pthread_create(&thread, NULL, another_function, NULL); 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T16:19:23.020

> pthread_create 到底对线程做了什么？

`thread`是一个对象，它可以保存一个值来标识一个线程。如果`pthread_create`成功，它会填写一个标识新创建线程的值。如果失败，则`thread`调用后的值未定义。（参考： http: [//pubs.opengroup.org/onlinepubs/009695399/functions/pthread_create.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_create.html)）

> 线程加入主线程并终止后会发生什么？

对象什么也没有发生，但它持有的值不再引用任何线程（例如，您不能再将它传递给采用 a 的函数，`pthread_t`如果您不小心这样做了，那么您可能会`ESRCH`返回错误）。

> 如果在线程加入后执行以下操作会发生什么：

和以前一样：如果`pthread_create`成功，则分配一个值来标识新创建的线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:11:18.643

pthread_create 将使用操作系统调用创建一个线程。抽象的美妙之处在于你不需要关心下面发生的事情。它将变量 thread 设置为可用于引用该线程的标识符。例如，如果您有多个线程并想取消其中一个，只需调用

pthread_cancel（线程）

使用正确的 pthread_t 标识符来指定您感兴趣的线程。

> 线程加入主线程并终止后会发生什么？

在线程终止之前，var 线程用作获取或标识线程的键/索引。线程终止后，键/索引指向的值不再有效。您可以保留它并尝试重用它，但这几乎肯定会导致错误。

> 如果在线程加入后执行以下操作会发生什么：

```
pthread_create(&thread, NULL, another_function, NULL); 
```

没问题，因为你给它一个对 thread 的引用，所以 thread 的值将被设置为刚刚创建的新线程的标识符。我怀疑它可能和以前一样，但我不会指望它。

# json - 缺少 Google JSON 详细信息

> ID：10434718
> 
> 赞同：1
> 
> 时间：2012-05-03T15:38:52.893
> 
> 标签：json, vb.net, google-maps-api-3, google-places-api

引用此[https://developers.google.com/maps/documentation/places/#PlaceDetails](https://developers.google.com/maps/documentation/places/#PlaceDetails) 我期望 JSON 结果始终包含所有`address_components`详细信息。但是，我的一项搜索最终丢失了 street_number、postal_code 和其他一项。在智能感知中查看显示，其中一名`address_components`返回的人持有行政区域级别 2。

这让我陷入了一个循环，因为我一直希望返回那些原始值，即使它们可能是空的。我也像这样对预期回报进行硬编码：

```
array.result.address_components(0).long_name 
```

由于我不能指望组件返回所有结果，因此我需要一种新方法来适当地访问它们并弄清楚当我丢失一些时该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:01:53.030

这是我用来处理这个问题的案例陈述。它有效，但不确定它是否是最优雅的解决方案。

```
Dim street As String = ""
Dim city As String = ""
Dim state As String = ""
Dim country As String = ""
Dim zip As String = ""
Dim phone As String = ""
Dim website As String = ""

' No guareentee to the order of even if the data will be there so we check each type. '
For j = 0 To array.result.address_components.Length - 1
    Select Case array.result.address_components(j).types(0)
        Case "street_number"
            street += array.result.address_components(j).long_name()
        Case "route"
            street += " " & array.result.address_components(j).long_name()
        Case "locality"
            city = array.result.address_components(j).long_name()
        Case "administrative_area_level_1"
            state = array.result.address_components(j).long_name()
        Case "country"
            country = array.result.address_components(j).long_name()
        Case "postal_code"
            zip = array.result.address_components(j).long_name()
    End Select
Next 
```

我基本上循环浏览 address_components 并检查它们的类型值。如果该值是我正在寻找的值，我会分配它。如果没有街道号码，我稍后会在街道上调用 Trim() 以删除我添加的空白区域。

# css - Wordpress 评论透明背景

> ID：10434720
> 
> 赞同：0
> 
> 时间：2012-05-03T15:38:55.720
> 
> 标签：css, wordpress, background-color

我刚开始为一个客户在这个网站上工作，这个网站是 www.kingcharltonmusic.com。它是由其他人建造的，所以也许我只是找不到我要找的东西。

本质上，某些页面末尾的评论部分（例如关于）具有透明背景，无论我如何更改 CSS，它似乎都不会影响它。

我不确定我是否需要比这更多的信息，但如果需要，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:06:46.610

根据规则的顺序，背景：可以覆盖背景颜色。

我做了一个小演示，以便您了解各种规则如何相互覆盖，您可以使用它：

[http://jsbin.com/ecohuk/edit#html,live](http://jsbin.com/ecohuk/edit#html,live)

您需要确定样式表中是否有另一个规则覆盖它，或者至少使用 background: 而不是 background-color

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:54:02.823

乍一看， div#comments 似乎没有明确设置背景。通过 firebug/webkit 工具，我可以成功地将背景更改为白色，所以我怀疑您所需要的只是使用您的 css 定位的正确元素。

![在此处输入图像描述](../Images/c24f09308228e7c76a5f69058b790e79.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:15:41.280

```
#comments {
  background-color: white;
  padding: 0.75em;
} 
```

上传新的 CSS 文件后，请确保清除缓存（服务器和客户端）。

# c# - ffmpeg 通过 c# asp.net 组合 2 个视频

> ID：10434722
> 
> 赞同：0
> 
> 时间：2012-05-03T15:39:03.483
> 
> 标签：c#, asp.net, ffmpeg

我需要使用 ffmpeg 组合两个视频文件。你能帮助我吗？我试过 cat 命令，它不会很好用。

```
 ProcessStartInfo info1 = new ProcessStartInfo(@"e:\ffmpeg\bin\ffmpeg.exe", 
 @"cat e:\cars1.mpg e:\cars2.mpg | ffmpeg -f mpeg -i - -vcodec copy -acodec copy e:\merged.mpg"); 
```

给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:19:35.837

好的，最后我找到了我自己问题的答案。

我只是设置了一个包含复制命令的批处理文件。

```
ProcessStartInfo info1 = new ProcessStartInfo("app.bat"); 
```

**应用程序.bat**

app.bat 文件包含以下命令。它仅适用于 Windows。

```
copy e:\cars1.mpg /b + e:\cars2.mpg /b e:\output.mpg /b 
```

它合并了两个视频文件。但唯一的问题是，它只需要第一个视频文件的运行时间。但是视频运行流畅。

# php - Kohana 3.2 中的外部 GET 请求通过工厂方法剥离

> ID：10434723
> 
> 赞同：2
> 
> 时间：2012-05-03T15:39:09.723
> 
> 标签：php, kohana-3.2

我正在尝试提出外部请求。我正在关注[Kohana Docs 中提供的](http://kohanaframework.org/3.2/guide/kohana/requests#external-requests)示例。

问题是，我正在尝试使用 GET 参数进行 GET。一旦我向工厂方法提供了一个带有 GET 参数的 URL，这些参数就会从 URL 中删除并放在`_get`Request 对象的属性中。

这是我这边的样子：

```
$request = Request::factory('http://www.example.com/api.php?param1=value1&param2=value2');
$response = $request->execute(); 
```

如果我`print_r`是`$request`对象，我可以看到这个（摘录）：

```
[_get:protected] => Array
    (
        [param1] => value1
        [param2] => value2
    ) 
```

但不幸的是，在执行请求时似乎并没有发送这些信息。

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T21:07:10.250

使用[`query()`](http://kohanaframework.org/3.2/guide/api/Request#query)方法设置 GET 数据。

```
$request = Request::factory('http://www.example.com/api.php')->query(array('param1' => 'value1', 'param2' => 'value2'));
$response = $request->execute(); 
```

# xml - 在 Magento 中添加到 local.xml 时不显示自定义块

> ID：10434729
> 
> 赞同：0
> 
> 时间：2012-05-03T15:39:29.867
> 
> 标签：xml, magento, layout, block

我有一个自定义块（选项卡式产品信息），我想在产品视图块本身的商店产品视图中显示它。我在 view.phtml 中正确调用了该块，并使用此代码将该块添加到我的 XML 中：

```
<block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs" template="catalog/product/view/tabs.phtml" > 
```

该块在放入catalog.xml时呈现，但每当我将它放入我的local.xml中时

```
<catalog_product_view translate="label">
 <label>Catalog Product View (Any)</label>
   <reference name="content">
    <block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs" template="catalog/product/view/tabs.phtml" >
   </reference>
</catalog_product_view> 
```

这没用。当我将 before 或 after 标记（例如 after="product.info.media"）添加到 local.xml 中的代码片段时，它会呈现但不在整个产品视图块中，而是始终在整个产品视图块之前或之后。在 catalog.xml 中，我只是将它放在其他块之间，它工作正常。

当我将整个产品视图部分的内容从 catalog.xml 复制到我的 local.xml 中时，它可以工作，但所有内容（图像、描述等）都会显示两次。

有没有办法通过 local.xml 做到这一点？也许通过setchild？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:38:05.910

当您谈论 local.xml 时，您是在谈论**/app/etc/local.xml**吗？此文件是配置文件，而不是布局更新文件。它不打算那样工作。

如果您正在谈论另一个布局文件（在 app/design/<package>/<theme>/layout/local.xml 中），那么您必须将声明此布局更新文件的模块的**依赖**项添加到声明原始内容的模块中页面（在您的情况下为 Mage_Catalog）。

之所以这样，是因为 Magento *after*或*before*属性仅与已声明的块进行比较，并且我认为您的 local.xml 在原始 catalog.xml 之前被解析

假设您有一个名为 StackOverflow_Local 的模块，该模块在其 config.xml (app/code/local/StackOverflow/Local/etc/config.xml) 中有以下声明：

```
<config>
  <frontend>
    <layout>
      <updates>
        <stackoverflow_local>
          <file>local.xml</file>
        </stackoverflow_local>
      </updates>
    </layout>
  </frontend>
</config> 
```

然后你应该在 app/etc/modules/StackOverflow_Local.xml 中声明你的模块，你应该在其中找到类似这样的内容：

```
<?xml version="1.0"?>
<config>
  <modules>
    <StackOverflow_Local>
      <active>true</active>
      <codePool>local</codePool>
    </StackOverflow_Local>
  </modules>
</config> 
```

要添加依赖项（如果 Mage_Catalog 被禁用/删除，您的模块不应该工作）将您的激活 XML 转换为：

```
<?xml version="1.0"?>
<config>
  <modules>
    <StackOverflow_Local>
      <active>true</active>
      <codePool>local</codePool>
      <depends>
        <Mage_Catalog />
      </depends>
    </StackOverflow_Local>
  </modules>
</config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:32:14.523

您正在将该块添加到**内容**块。将您的`reference` *名称*值更新为**product.info**。根据您的**info_tabs**别名，只要您的模板有

`echo $this->getChildHtml('info_tabs')`

你应该很高兴。

# php - php getimagesize 错误

> ID：10434735
> 
> 赞同：1
> 
> 时间：2012-05-03T15:39:48.870
> 
> 标签：php, getimagesize

我试图在我的服务器中获取图像的图像大小，并且数据在数据库中，或者我的 getimagesize 函数看起来像这样

```
$size = getimagesize(upload/$array['image']);
print_r($size); 
```

我得到了这些错误......

```
Warning: Division by zero in /home/content/44/8713044/html/view/home/home.html on line 81

Warning: getimagesize() [function.getimagesize]: Filename cannot be empty in /home/content/44/8713044/html/view/home/home.html on line 81 
```

图像在正确的位置......我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:43:25.383

您的路径不在引号中，因此它不是字符串。

```
$size = getimagesize(upload/$array['image']); 
```

它试图在数学上划分一个名为 的`upload`常数`$array['image']`。

使用引号并像这样连接：

```
$size = getimagesize('upload/' . $array['image']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:43:30.097

你应该像这样引用字符串：

```
getimagesize("upload/{$array['image']}"); 
```

否则，PHP 会将其视为数学表达式

这个网址可能会有所帮助：- [http://www.php.net/manual/en/language.expressions.php](http://www.php.net/manual/en/language.expressions.php)

# java - BufferedReader 和 BufferedInputStream 的区别

> ID：10434736
> 
> 赞同：29
> 
> 时间：2012-05-03T15:39:54.533
> 
> 标签：java, io, java.util.scanner, bufferedreader

和在java`BufferedReader`中有什么区别？阅读文本并阅读。除此之外还有什么不同吗？`BufferedInputStream``Scanner``BufferedReader``BufferedInputStream``byte`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-03T15:42:05.437

我想，阅读器和输入流之间的区别是一样的：一个是基于字符的，另一个是基于字节的。例如，阅读器通常支持编码...

**编辑：**检查这个问题：[读取多字节字符时 InputStream 和 InputStreamReader 的区别](https://stackoverflow.com/questions/5764065/inputstream-and-reader-in-java-io)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-11T06:23:46.450

`BufferedInputStream`使用 . 将缓冲区中的数据读取为字节`InputStream`。`BufferedReader`读取文本而不是字节，并且`BufferedReader`可以有效地读取字符、数组和行。

# php - ASP 到 PHP ... 简化 php 代码

> ID：10434739
> 
> 赞同：0
> 
> 时间：2012-05-03T15:40:04.650
> 
> 标签：php, asp-classic

我正在将一些 asp 编码转换为 php，从我在 php 中所做的事情来看，有没有更好的方法来简化事情，所以我不编写额外的代码行？

ASP

```
xFirstName = LCase(Replace(request.form("xFirstName"), "'", "''"))
xFirstName = UCase(Left(xFirstName,1))& Mid(xFirstName,2) 
```

php

```
$xFirstName = strtolower(str_replace("'","''",$_POST["xFirstName"]));
$xFirstName = strtoupper(substr($xFirstName,0,1)).substr($xFirstName,1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:52:43.627

```
strtoupper(substr($xFirstName,0,1)).substr($xFirstName,1); 
```

可以有效地替换为

```
ucfirst($xFirstName) 
```

至于第一行，仍然需要 - 首先使字符串全部小写。虽然我会让 str_replace 成为最终操作，因为它可能会稍微增加字符串的长度。) 所以它变成了......

```
$xFirstName = str_replace("'", "''", 
    ucfirst(strtolower($_POST['xFirstName']))
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:47:00.930

似乎您想用双引号替换单引号并将单词的第一个字母大写，您可以这样做：

```
ucwords(strtolower(str_replace("'","''", $_POST['xFirstName']))); 
```

这会将 $_POST 变量中传递的每个单词的第一个字母大写，因此如果您只想将第一个单词大写而不管 xFirstName 中有多少个单词，您应该使用`ucfirst()`而不是`ucwords()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:00:47.753

使用该功能时，问题将出在名称`Peter O'Hara`等方面，您最终会得到or 。`Peter Clayton-Moore``ucwords``Peter O'hara``Peter Clayton-moore`

更好的解决方案是编写自己的函数，如下所示：

```
public function my_ucwords($name) {
    $name = ucwords(str_replace('\'', '\' ', str_replace('-', '- ', $name)));
    return str_replace('\' ', '\'', str_replace('- ', '-', $name));
} 
```

然后继续这个：

```
$xFirstName = str_replace("'","''", my_ucwords(mb_strtolower($_POST["xFirstName"]))); 
```

别客气！

# asp.net-mvc-3 - 在 Extjs4 和 Asp.NET MVC3 上构建调试器 C#

> ID：10434742
> 
> 赞同：1
> 
> 时间：2012-05-03T15:40:35.053
> 
> 标签：asp.net-mvc-3, debugging, c#-4.0, extjs4

我正在构建一个接口 Extjs4，它允许编写代码 c#。我可以生成一个可执行文件，但我会允许诸如单步执行、单步执行等功能。该应用程序是使用 c# 在 Asp.NET MVC2 上构建的。

有人有想法吗？

我尝试使用 mindbg：[http](http://mindbg.codeplex.com/) ://mindbg.codeplex.com/ ，但不知道如何集成它。

我的想法是显示变量和值，调试器 VisualStudio.Net 也是如此

有什么建议吗？

谢谢

# .net - .NET 的日志框架，支持多个应用程序写入同一个滚动日志文件？

> ID：10434743
> 
> 赞同：0
> 
> 时间：2012-05-03T15:40:39.120
> 
> 标签：.net, logging

我有一个写入滚动日志文件的控制台应用程序。问题是应用程序可以被多个进程调用，并且有可能同时调用它。应用程序写入一个日志文件。我目前正在研究将 log4net 与 MinimalLock 设置一起使用：

```
<lockingModel type="log4net.Appender.RollingFileAppender+MinimalLock" /> 
```

但我已经读过，如果来自一个实例的日志消息导致翻转，而另一个实例试图写入同一个文件，则可能会出现问题。

是否有另一个框架支持这种行为，或者可能是一个合适的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:44:39.833

尝试`<lockingModel type="log4net.Appender.FileAppender+InterProcessLock"`

现在下面的代码将是线程安全的，因为您将创建一个记录器静态类来记录信息。

```
public static class Logger
{
    private static readonly Object obj = new Object();

    private static ILog _appLog = null;
    static Logger()
    {
        XmlConfigurator.Configure();
    }

    public static void Log(string loggername)
    {
        lock (obj)
        {
            _appLog = LogManager.GetLogger(loggername);
            _appLog.Error(....);
        }
    }
} 
```

# java - 同步和可见性

> ID：10434745
> 
> 赞同：2
> 
> 时间：2012-05-03T15:40:45.230
> 
> 标签：java, multithreading, thread-safety

```
// In Thread1  
x=5;  
synchronization(obj)  
{  
    // do something (no operations involving x)  
}

// In thread 2  
synchronization(obj)  
{  
    // do something(operations involving x)  
} 
```

是否有要求 JVM 在进入该块之前首先执行同步块之前的所有语句。在 Thread-1 中，由于同步块没有任何操作，`x`所以它可以先执行同步块，然后执行赋值操作`x=5`。

`x`Thread-2在其同步块中看到的值是什么。`x = 0`假设 Thread-1 首先执行，然后 Thread-2 执行，并且在创建 对象时它们都在同一个对象上运行。

我们可以说 Thread-1 中的同步块发生在 Thread-2 中的同步块之前。`x`那么Thread-2 在其同步块中的值应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:46:10.087

*是否有要求 jvm 在进入该块之前首先执行同步块之前的所有语句*

是的。[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)说：

> 线程中的每个动作都发生在该线程中的每个动作之前，这些动作按程序的顺序出现在后面。

假设对 x 的赋值*发生在*第一个同步块执行之前，并且第一个同步块执行*发生在*第二个同步块执行之前，那么在第一个线程中分配给 x 的值将对第二个线程可见。（*happens-before*是及物的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:07:36.147

您如何确保对 的更改`x`可见`Thread 2`？

`x`不在`Thread 1`同步块中，我认为您没有成功`volatile`，因此即使`x`之前发生分配`Thread 2`，`Thread 2`仍可能读取`x`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:00:25.367

在 Thread-2 中，`x`可能有几件事：

*   0，如果 Thread-2 的同步块在之前运行（它也可能实际上在它之后运行，但之前缓存的值为 0，它没有义务更新，因为和 Thread-2`x = 5`之间没有发生之前的边缘）`x = 5`
*   5，如果线程 2 的同步块在线程 1 的块之后`x = 5`（并且碰巧刷新了它的值）但在线程 1 的`synchronized`块之前运行
*   Thread-1 的`synchronized`块分配给的任何值`x`（在你的情况下不会发生，所以这个选项不可用）
*   完全是其他一些值，如果`x`是 a `long`or `double`，因为这些类型中的单词不必自动更新。（见[jls 17.7](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.7)）。请注意，在这种特定情况下，“其他值”将是 0 或 5（如果您分别只看到 的上半部分或下半部分`long`）。但是，如果您的两个词的值都不是 0，那么您可以看到这些词的潜在值的任意组合。

在 Thread-1 中，正如 JB Nizet 指出的那样，线程内语义意味着您不会看到`x`未初始化的 0——它要么是 5，要么是 Thread-2 设置的任何值（当然也可以是 0） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:03:24.707

1.  单个线程中的所有语句都按顺序执行。

2.  您在第二个问题中描述的是竞争条件。线程 #1 将 a 值分配给同步块之外的 x。根据执行顺序，线程#2 可以看到 x = 0 或 x = 5；

3.  对于您的第三个假设，x 将等于 5。

# c# - ASP.NET 会话在本地回发后变为空

> ID：10434746
> 
> 赞同：3
> 
> 时间：2012-05-03T15:40:46.240
> 
> 标签：c#, asp.net

这是我在页面加载时运行的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    DisableChaching();
    if (Request.Cookies["UserName"] == null)
    {
        if (Session["UserName"] == null)
        {
            Response.Redirect("~/Default.aspx");
        }
        else if (Session["AccessLevel"].ToString().Equals("2"))
        {
            Response.Redirect("~/Default.aspx");
        }
    }
    else if (Session["AccessLevel"].ToString().Equals("2"))
    {
        Response.Redirect("~/Default.aspx");
    }
    if (!IsPostBack)
    {
        LoadControls();
        BindGrid();
    }
} 
```

有时，当我尝试将一些数据保存到数据库并出现错误时，我尝试通过单击保存按钮*重新保存*数据，但出现此错误：

> 你调用的对象是空的

如果代码如下：

```
else if (Session["AccessLevel"].ToString().Equals("2")) 
```

为什么我会收到此错误？

这是我在登录用户控件中的代码，其中 ChR 是记住用户的复选框：

```
if (ChR.Checked == true)
            {
                Response.Cookies["UserName"].Value = txtUserName.Text.Trim();
                Response.Cookies["UserName"].Expires = DateTime.Now.AddMonths(2);
                Response.Cookies["AccessLevel"].Value = member.AccessLevel.ToString();
                Response.Cookies["AccessLevel"].Expires = DateTime.Now.AddMonths(2);
                Response.Cookies["FirstName"].Value = member.FirstName;
                Response.Cookies["FirstName"].Expires = DateTime.Now.AddMonths(2);
                Response.Cookies["LastName"].Value = member.LastName;
                Response.Cookies["LastName"].Expires = DateTime.Now.AddMonths(2);
                Session["UserName"] = txtUserName.Text.Trim();
                Session["AccessLevel"] = member.AccessLevel.ToString();
                Response.Redirect("~/Default.aspx");
            }
            else
            {
                Session["UserName"] = txtUserName.Text.Trim();
                Session["AccessLevel"] = member.AccessLevel.ToString();
                Session["FirstName"] = member.FirstName;
                Session["LastName"] = member.LastName;
                Response.Redirect("~/Default.aspx");
            } 
```

在我的母版页中，我在 page_Load 事件中以这种方式为会话分配值：

```
DisableChaching();
    FillInfo();
    if (Request.Cookies["UserName"] != null)
    {
        Session["UserName"] = Request.Cookies["UserName"].Value;
        Session["AccessLevel"] = Request.Cookies["AccessLevel"].Value;
        Session["FirstName"] = Request.Cookies["FirstName"].Value;
        Session["LastName"] = Request.Cookies["LastName"].Value;
        WellCome();
        if (Session["AccessLevel"].ToString() == "1")
        {
            RenderMenu(AcccessLevel.SiteManager);
        }
        else if (Session["AccessLevel"].ToString() == "2")
        {
            RenderMenu(AcccessLevel.Client);
        }
    }
    else if (Session["UserName"] != null)
    {
        WellCome();
        if (Session["AccessLevel"].ToString() == "1")
        {
            RenderMenu(AcccessLevel.SiteManager);
        }
        else if (Session["AccessLevel"].ToString() == "2")
        {
            RenderMenu(AcccessLevel.Client);
        }

    }
    else
    {
        WellGo();
        RenderMenu(AcccessLevel.LogedOutUser);
    }
enter code here 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T07:56:46.923

I think I found out why my sessions become null ! when I want to save info about a book in db and save an image file of the book in an app folder , I don't have the permission to save the file and my application throws an error and all my sessions become null !!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:51:17.303

替换您的代码，如下所示。

```
string val = Convert.ToString(Session["AccessLevel"]);
if (val == "2")
{

} 
```

`==`我希望你明白和之间的区别`Equals()`

```
public static String AccessLevel {
    get
    {
        return Convert.ToString(HttpContext.Current.Session["AccessLevel"]);
    }
    set
    {
        HttpContext.Current.Session["AccessLevel"] = value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:46:43.920

> 为什么我会收到此错误？

因为`Session["AccessLevel"]`是 Null 并且您正在尝试调用 Null 对象上的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T14:04:04.527

For other users, check your session timeout. may be it is the problem. you can change the default timeout using

```
<system.web>
   <authentication mode="Forms">
      <forms timeout="50"/>
   </authentication>

   <sessionState timeout="60"  />
</system.web> 
```

# android - 如何使我的列表视图具有交互性？

> ID：10434758
> 
> 赞同：-5
> 
> 时间：2012-05-03T15:41:36.793
> 
> 标签：android

> **可能重复：**
> [Android - ListView 点击 HOWTO？](https://stackoverflow.com/questions/2468100/android-listview-click-howto)

更具体地说，我在列表视图中有一个餐厅列表，我想单击列表中的一家餐厅，然后被定向到另一个包含该餐厅菜单的列表，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:44:26.727

连接`onItemClickListener`列表对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:49:18.783

试试这个：

```
 listView = (ListView) findViewById(R.id.my_list_view);
 listView.setAdapter(someAdapter);
 listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            switch(position) {
            case 0:
                 Intent intent = new Intent();
                 intent.setClassName("com.test", "com.test.SubMenuActivity");
                 startActivity(intent);             
                 break;
            case 1:
                 // Do something else ...
                 break;
            // ... 
        }
    }); 
```

# jakarta-ee - 将用 clojure 编写的 EJB 部署到独立应用程序服务器

> ID：10434775
> 
> 赞同：3
> 
> 时间：2012-05-03T15:42:35.380
> 
> 标签：jakarta-ee, clojure, ejb, websphere

有没有人将 Clojure 代码与现有的 JavaEE 基础设施结合起来（在我的例子中是 Webspehere Application Server 8）？

在创建`jar`要部署到应用程序服务器的应用程序服务器时，我放入（`(:aot [carina.stateless])`包括无状态 EJB 所需的类和两个接口）然后运行导致由所有依赖的 clojure 命名空间组成的庞大。`project.clj``carina.stateless``lein jar``jar`

我试图避免`lein uberjar`，因为我打算将更多应用程序部署到同一个应用程序服务器并使用共享 jar，但现在，大部分代码都已预编译。

如果我所做的只是实现`javax.ejb.Remote`和扩展，有没有办法避免这个 AOT 步骤产生一个巨大的 jar 文件`javax.ejb.Stateless`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:46:34.813

*简短的回答：*

不，没有办法做你想做的事。您也许可以挑选一些共享库并将它们移动到应用服务器中的类加载器层次结构中，但这“可能”不值得付出努力。

*但请注意这个空间：*

您的问题是您只需要（我希望）您的 EJB 使用的一些 clojure。

目前 clojure 不是模块化的，所以你不得不接受所有的 clojure.jar 和任何依赖项。

它目前对您没有帮助，但您需要的功能是“摇树”，您可以通过一些尚未指定的过程“摇动”您的依赖关系以及您不需要的所有位，让您一个小的运行时和 jar。

我相信在最近的 clojure conj 中提到了这一点，涉及在 android 等小型平台上的部署。

# http-streaming - 使用 WCF 的 OSB 11g 流式传输不起作用

> ID：10434776
> 
> 赞同：1
> 
> 时间：2012-05-03T15:42:39.423
> 
> 标签：http-streaming, osb, oracle-service-bus

我正在尝试使用 OSB 11g 将大数据流式传输到 .NET WCF。我使用 .NET 客户端和服务器来检查此功能。我创建了一个代理，它对 .NET 服务器上的 WCF 进行服务调用，但是在跟踪流时，我发现 OSB 将来自客户端的所有流缓冲到内存中，然后将其发送到 .NET WCF。我想我用内容流功能正确配置了代理。顺便说一句，我在 Linux Red Hat 5.5 上运行 OSB。任何人都可以分享使用 WCF 的经验吗？有人可以在代理/业务服务中分享他的流媒体定义吗？

# php - textarea 到数据库，包括

> ID：10434779
> 
> 赞同：0
> 
> 时间：2012-05-03T15:42:51.913
> 
> 标签：php

我在文本区域收到大量文本。通常分为几段。如何将这些段落包装在`<p>`标签中，以便当我再次从数据库中读取文本时，文本的格式将相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:51:23.037

输出呢？

```
<p><?=$content;?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:47:54.880

我不会将标签添加到数据库中，因为如果您想再次将文本放入文本区域（或文本邮件或其他任何东西......），您将不得不再次删除它们，我会在您输出时添加标签仅限于 html。

您可以使用新行或多个新行explode，并将您的标签添加到数组的每个非空元素。

# r - 在 data.frame 中按组识别案例

> ID：10434781
> 
> 赞同：1
> 
> 时间：2012-05-03T15:43:01.927
> 
> 标签：r, dataframe

我想通过比 avg plus sd 更大的组来确定案例。例如，在 iris 数据中使用 species 作为组，petal.wid 作为我的变量。

更好的方法是什么？创建一个函数？

我做了这个，但我无法与原始数据建立联系以识别案例。

```
data(iris)
library(plyr)
petal.wid.avg <- ddply(iris, .(Species), function(df)
  return(c(petal.wid.avg=mean(df$Petal.Width), petal.wid.sd=sd(df$Petal.Width)))
)
petal.wid.avg$avgsd <- petal.wid.avg$petal.wid.avg + petal.wid.avg$petal.wid.sd
petal.wid.avg 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:07:50.950

有很多方法可以做到这一点，但该`ave`功能可能是最简单的。

```
iris$big <- with(iris, 
  ave(Petal.Width, Species, FUN = function(x) x > mean(x) + sd(x))
) 
```

这是`plyr`解决方案：

```
iris <- ddply(
  datasets::iris, 
  .(Species), 
  transform, 
  big = Petal.Width > mean(Petal.Width) + sd(Petal.Width) 
) 
```

* * *

根据评论，这是解决方案的其余部分。

```
iris <- subset(iris, big)
iris <- ddply(
  iris,
  .(Species),
  transform,
  smallest = Petal.Width == min(Petal.Width)
)
(iris <- subset(iris, smallest)) 
```

请注意，在您有联系的地方（如在此数据集中），您不会得到唯一的“更大”行。

# visual-studio-2010 - html 文件中 Visual Studio 2010 中的自定义语法突出显示

> ID：10434784
> 
> 赞同：3
> 
> 时间：2012-05-03T15:43:29.620
> 
> 标签：visual-studio-2010

是否可以为已知文件类型中的自定义单词创建语法突出显示？

例如，当在 html 文件中查看时，我想让 VS 文本编辑器为标签`<@`和指定的颜色着色。`@>`

你能做到这一点，如果可以，那怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:24:28.173

是的，当然，这对于 C++ 文件和 Visual Studio 识别的文件是可能的；因此，如果 VS 设置为将您的 HTML 识别为 C++ 文件，那么您应该很好。

您需要创建一个**usertype.dat**文件并将其放在您的

```
C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE 
```

文件夹（或等效于 VS2010，这是 VS2008）

该文件应在每一行分别列出您想要的关键字；

例如; 我用 Qt 开发，我有一个**usertype.dat**文件：

```
signal
slots
Q_OBJECT 
```

（等等）

重新启动 VS，您的关键字将突出显示。

我从[这里](http://www.cumps.be/nl/blog/read/visual-studio-2008-and-php-coloring)获得了信息并在我的系统上进行了验证。

# java - 需要帮助解释继承代码中的 for 语句

> ID：10434787
> 
> 赞同：0
> 
> 时间：2012-05-03T15:43:43.753
> 
> 标签：java, file-io, for-loop

考虑`for(File file : files )`以下代码。我以前从未见过这种语法。我从上下文和行为中了解到，这是一个基于记录数量的 for 循环......类似于`(for x=0;x<length.foo;++x)`. 除此之外，我不确定。这是我还没有学过的 for 循环的简写吗？这是专门针对对象的循环吗？更重要的是......当我想在谷歌上搜索有关该特定语法的信息时，我该如何描述它？

澄清：第二个问题，我也很好奇这种递归文件列表方法如何将文件名列表存储在`file`. 这是一个数组吗？收藏？或者...？我想知道我需要如何读取结果文件。

```
public static void main(String... aArgs) throws FileNotFoundException
{
    File startingDirectory= new File("CGT");
    List<File> files = WorkingFileListing2.getFileListingNoSort(startingDirectory);
    for(File file : files )
    {
       System.out.println(file);  //print filenames
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:45:43.683

这就是所谓的[“for each”循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)。

> 我也很好奇这种方法如何将文件名列表存储在`file`.

它没有。它遍历 的元素`files`，依次将它们分配给`file`（一次一个！）。如果您运行代码，循环的每次迭代都将打印一个文件名。

> 当我想在谷歌上搜索有关该特定语法的信息时，我该如何描述它？

谷歌“java for-each”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:47:33.263

在我看来，它相当于 C# 中的“foreach”。在 Google 中搜索“Java foreach”得到了这个： [关于 Java For-Each 循环的详细信息](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T15:47:35.087

这称为[foreach 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)，仅在您不想从数组中删除对象时用于对象。

# c++ - 运算符重载<<错误

> ID：10434790
> 
> 赞同：3
> 
> 时间：2012-05-03T15:43:47.467
> 
> 标签：c++, overloading, operator-keyword

我试图重载运算符<<

```
const ostream & operator<<(const ostream& out, const animal& rhs){
    out << rhs.a;
    return out;
} 
```

似乎我得到了一个错误，因为我返回一个 const 并且因为第一个参数是对 ostream 对象的 const 引用。

```
cout << objectOfAnimal1 << objectOfAnimal2 ; 
```

如果我将返回类型和运算符签名更改为这个，它就可以正常工作：

```
ostream & operator<<(ostream& out, const animal& rhs) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:45:59.940

你需要有：

```
ostream & operator<<(ostream& out, const animal& rhs) 
```

在您的代码中您正在尝试修改一个`const` `ostream`对象，因此您会收到错误消息。
不应该`const`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:45:35.790

```
ostream & operator<<(ostream& out, const animal& rhs){
out << rhs.a;
return out;
} 
```

您已经解释了问题的可能原因，您真的没有尝试过吗？

# sql - SQL/Oracle 10g - 断言问题

> ID：10434793
> 
> 赞同：0
> 
> 时间：2012-05-03T15:44:02.230
> 
> 标签：sql, oracle, oracle10g

我目前在执行一项简单任务时遇到问题，在该任务中，现有客户的新工作在他们还清债务之前不会获得批准。我认为这会很简单，直到我发现 SQL-92 断言在 Oracle 中不起作用......

我环顾了网络，发现可以做同样的事情，但有触发器/检查约束。但是，我完全不知道如何实现这一目标。

我的数据库结构如下：

```
Table invoice is in a one-to-many relationship with jobs
Table jobs is in a many-to-one relationship with client 
```

目前我有：

```
CREATE TRIGGER check_debt
BEFORE UPDATE ON jobs
FOR EACH ROW
WHEN ((SELECT * FROM client WHERE clientNo =
(SELECT * FROM jobs WHERE jobNo =
(SELECT * FROM invoice WHERE status = 'Debt Owing'))))
COMMIT; 
```

如您所见，我不知道如何用触发器模拟断言......

任何帮助表示赞赏！

谢谢。

**注意：**我正在练习使用 SQL-92 和 SQL-99 标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:58:32.957

当您对作业进行更新时，包括查询以检查发票的状态。

```
update jobs
  set ...
where ... -- logic to select job to update
and   not exists (
        select *
        from   invoice
        where  ... -- insert join condition
        and    status = 'Debt Owing') 
```

然后检查是否更新了一行（方法取决于您使用的客户端）。

# java - Spring 注释 - 好还是坏？

> ID：10434798
> 
> 赞同：0
> 
> 时间：2012-05-03T15:44:18.137
> 
> 标签：java, spring, unit-testing, spring-annotations

我最近遇到了这样的课程：

```
public class SomeDao {
   @Inject
   private DataSource dataSource;

   @Value("#{someMap['someDao.sql']}")
   private String sql;

   private JdbcTemplate jdbcTemplate;

   @PostConstruct
   private void postConstruct() {
      jdbcTemplate = new JdbcTemplate(dataSource);
   }

   ...
} 
```

现在我想通过注入 DataSource 和 SQL 字符串来对这个类进行单元测试。据我所知，有两种选择：

1.  加载一个速度很慢的应用程序上下文，并且很可能会加载很多我不需要的测试内容
2.  使用反射设置私有属性并调用私有 postConstruct() 方法

在 spring 注释之前的日子里，这个类应该是这样写的：

```
public class SomeDao {
   private String sql;
   private JdbcTemplate jdbcTemplate;

   public SomeDao(DataSource dataSource, String sql) {
      this.jdbcTemplate = new JdbcTemplate(dataSource);
      this.sql = sql;
   }    
   ...
} 
```

而且我可以很容易地测试这个类，而不需要反射或弹簧。我的班级是一个纯粹的 pojo，没有 spring 依赖项。

那么，spring 注释是一件好事还是倒退了一步？是否有时我应该使用它们，有时我应该使用旧的 XML 应用程序上下文？

谢谢，兰斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:56:33.657

为什么不使用 bean 模拟声明一个测试上下文并从中注入您的班级所需的那些？这就是人们通常会做的事情，而且非常简单。

最轻量级的方法是在您的测试类中提供一个内部类，`@Configuration`并使用提供模拟的方法进行注释：

```
@Configuration
public class DataAccessConfiguration {

    @Bean
    public DataSource dataSource() {
        DataSource dataSource =  mock(Datasource.class);
        return dataSource;
    }

    @Bean
    public Map<String,String> someMap() {
        Map<String, String> map = new HashMap<>();
        map.put("someDao.sql", "somevalue");
        return map;
    }

} 
```

因此，您实际上可以利用它，而不是放弃自动装配。此外，您将加载的上下文限制为被测类所需的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:59:49.387

我想说的是，`private`即使对于所需的依赖项，也有一种不健康的倾向，即更喜欢 setter 注入（甚至注入到字段中）而不是构造函数注入。

请注意，由于此示例中的两个依赖项都是必需的，因此可以将其重写如下：

```
public class SomeDao {
    private String sql;
    private JdbcTemplate jdbcTemplate;

    @Inject  
    public SomeDao(
        DataSource dataSource, 
        @Value("#{someMap['someDao.sql']}") String sql) {

        this.jdbcTemplate = new JdbcTemplate(dataSource);
        this.sql = sql;
    }   
    ...
} 
```

所以，这不是 Spring 注解的问题，而是错误使用它们的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:46:48.210

您仍然可以在设置器和构造器上使用注释，我个人更喜欢它，因为它使依赖关系更加明显。那 50 个参数构造函数真的很突出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:11:15.583

虽然我同意 axtavt 的回答，但一个快速的解决方法是使用`ReflectionTestUtils`spring-test 工件中的类。它为此类场景提供了很好的单行代码：

```
ReflectionTestUtils.setField(dao, "dataSource", mydataSource); 
```

对于单元测试，这很简单。

看[`ReflectionTestUtils`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/test/util/ReflectionTestUtils.html)

# oracle - Oracle 查询自联接？

> ID：10434801
> 
> 赞同：2
> 
> 时间：2012-05-03T15:44:32.077
> 
> 标签：oracle

我已经简化了这个例子，但希望这个例子能提供足够的内容来解释。

如果我有如下表...

```
ITEM GROUP
---- ----- 
 A     1
 B     1
 C     1
 D     2
 E     2
 F     3
 G     4 
```

...并且为我提供了项目 A、B、D 和 F，我想构建一个查询，该查询将返回这些详细信息以及相关组 C 和 E 中的其他项目。

似乎我应该能够进行某种内部联接，但我不清楚如何做到这一点。由于环境的限制，最好在单个查询中完成。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:55:22.990

如果我理解正确，这将起作用。

```
SELECT item,
       group_num
  FROM table_name
 WHERE grroup_num IN (SELECT group_num
                        FROM table_name
                       WHERE item IN ('A', 'B', 'D', 'F')) 
```

你也可以把它写成`EXISTS`

```
SELECT item,
       group_num
  FROM table_name a
 WHERE EXISTS( SELECT 1
                 FROM table_name b
                WHERE a.group_num = b.group_num
                  AND b.item IN ('A','B','D','F') ) 
```

# python - 用于 Python 的 Git 支持的 ORM？

> ID：10434802
> 
> 赞同：15
> 
> 时间：2012-05-03T15:44:33.607
> 
> 标签：python, database, git

在寻找有关版本化数据库的信息时，我遇到了 Ruby 的[gitmodel](https://github.com/pauldowman/gitmodel)项目，它是 git 之上的版本化 ORM。

我参与的一些项目可以从某种版本的数据存储中受益，而 Git 在这个领域似乎是一个自然的解决方案。我们的团队已经熟悉 git 命令行工具和 git 编程接口的使用，例如[dulwich](http://www.samba.org/~jelmer/dulwich/)，所以像[gitmodel](https://github.com/pauldowman/gitmodel)这样的东西可以发挥我们现有的经验。

Python有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:17:04.643

Ignacio Vazquez-Abrams 向我介绍了 [django-versions](https://github.com/nowells/django-versions/)包，虽然它不是基于 git，*但它确实*为存储版本化数据提供了一个很好的模型。我以前没有机会使用 Django，但这看起来好像它可能是目前最好的选择。

根据文档，这可能不适用于最新版本的 Django（文档说它需要 1.1.x，而 Django 在我的分发包存储库中的 realz 和 1.3 最高为 1.4）。我想我会把它看作是一种学习体验，看看需要做多少工作才能将它与最近的 Django 版本集成......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T18:48:26.703

刚从烤箱里出来，但你可以看看[python-git-orm](https://github.com/natano/python-git-orm/)。

# javascript - 如何在奇特的 AJAX 中显示自刷新的“弹出”html GET 页面

> ID：10434805
> 
> 赞同：0
> 
> 时间：2012-05-03T15:44:51.950
> 
> 标签：javascript, html, ajax, web

许多年前，我有一个网络表单，它在表单提交时生成一个弹出 html 页面，该页面每 10 秒刷新一次，并使用从数据库中提取的最新数据。

现在许多浏览器都阻止了弹出，所以我认为我需要重新设计相同的 Web 表单以生成不受默认阻止弹出的浏览器安全设置影响的 AJAX 或 AJAX（如“弹出”）？否则请告知。

“弹出”应该是可移动的、自动刷新的并包括一个关闭按钮。我还需要从 html 链接链接到“弹出窗口”。

想听听网络专家的意见，我有什么选择？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:53:22.957

正如我在评论中所说，我的建议是专门围绕对话框查看 jQueryUI（例如：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)）

然后，您可以使用 javascript 计时器使用 jQuery Ajax 定期轮询您的服务器（如果您之前没有看过我强烈推荐） - 请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c++ - C++ 运行时类型与 Python 模块不匹配？

> ID：10434806
> 
> 赞同：0
> 
> 时间：2012-05-03T15:44:53.050
> 
> 标签：c++, python, linux, dlopen, dynamic-cast

不幸的是，我无法为此发布源代码，但我会尽我所能进行设置。

我有一个例子，dynamic_cast 无法转换为派生类类型，我知道它应该成功（即，我知道实例的实际类型）。堆分配对象的 typeid 也不等于堆栈分配对象的 typeid！IE，

```
Foo mstack;
Foo*mheap = new Foo();
typeid(mstack) == typeid(*mheap);  // returns FALSE!? 
```

因此，某处显然存在 RTTI 问题。类实现（对于基类和派生类）在一个共享库中，故障代码在第二个共享库中，该库作为 Python 解释器中的 Python 模块加载（全部在 linux 上，使用 gcc 4 或英特尔 C++ 编译器）。如果我编写一个简单的小测试可执行文件来链接两个共享库，那么一切正常。我在链接共享库时尝试过 --export-dynamic ，但没有成功（看起来它是为了与可执行文件一起使用）。有人对在哪里看有任何指示吗？Python 使用 dlopen() 的方式有什么特别之处会导致这种问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:19:20.550

这是由 Python 加载扩展模块引起的`RTLD_LOCAL`，解决方案是强制 Python 加载它`RTLD_GLOBAL`（参见 OP 的评论）。

# sql-server - SQL Server 2008：我应该在“短语”列上创建全文索引吗

> ID：10434808
> 
> 赞同：0
> 
> 时间：2012-05-03T15:44:59.930
> 
> 标签：sql-server, indexing, full-text-search

我有大约 100 000 条记录和一个包含 2-3 个单词短语的列。我想使用`like`功能或类似方式搜索此列。问题是：我应该在这个列上建立一个全文索引吗？另一个问题：在这个列上建立一个简单的非聚集索引会提高`like`速度吗？最后：这样的全文索引需要多少空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:52:17.470

> 我应该在这个列上建立一个全文索引吗？

对于 100,000 行，我不确定您是否会从中受益。您正确地处于测试它会更具决定性的区域。

> 在此列上构建一个简单的非聚集索引会提高 like 的速度吗？

`LIKE 'foo%'`? 是的。`LIKE '%foo%'`? 不。想想电话簿，它是由“姓氏，名字”索引的。很容易找到所有的史密斯，而不是很容易找到所有的约翰。

> 这样的全文索引需要多少空间？

投机性太强了。你将很难得到一个权威的答案。我再次建议您需要进行测试。

# c++ - AS3 到 C++ 的转换——可能吗？

> ID：10434816
> 
> 赞同：3
> 
> 时间：2012-05-03T15:45:37.303
> 
> 标签：c++, xcode, ipad, actionscript, haxe

我在 actionscript 中构建了一个 iPad 应用程序。一个潜在的合作伙伴想要将我的应用程序拉入他们的应用程序。他们使用 XCode 在本地构建了他们的应用程序。据我了解，如果我的应用程序是本地构建的，我可以简单地将代码导出为静态库（.a 文件）以供他们的应用程序使用。唉，我在动作脚本中构建了我的。所以...

1.  有没有办法将 ActionScript 3 转换为 C++？

2.  一种可能的解决方案是通过 AS3 到 Haxe 到 C++ 进行这种转换吗？

3.  我只是 SOL 并且需要使用 XCode 重建游戏吗？

提前致谢。

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:10:10.830

你可以考虑 Tamarin 项目或 Tamarin redux。 [http://www-archive.mozilla.org/projects/tamarin/](http://www-archive.mozilla.org/projects/tamarin/) 它也可以在 XCode 中编译。但是，如果您的应用程序严重依赖 Flash 运行时，您必须自己实现所有类，因为 AVM 只包含基本的 AS3 类。

# c - 强制加载 mmap 页面

> ID：10434818
> 
> 赞同：1
> 
> 时间：2012-05-03T15:45:44.300
> 
> 标签：c, linux, mmap

我已经使用`mmap`. 现在我想确保在访问该内存时不会出现页面错误，即我想强制系统实际从硬盘读取数据并将其存储在 RAM 中。我相信一旦数据在那里，我可以防止与`mlockall`. 但是让系统加载数据的*正确方法是什么？*

我显然可以对所有页面进行虚拟读取，但这似乎是一个丑陋的 hack。另外，我不想担心编译器太聪明并优化了虚拟读取。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:56:01.050

为什么你认为`mlock()`或`mlockall()`不会工作？保证受影响的页面在 RAM 中正是它的目的。从手册页引用：

> 调用成功返回时，保证所有包含指定地址范围的一部分的页面都驻留在 RAM 中；这些页面保证保留在 RAM 中，直到以后解锁。

您可以使用其他方法，例如*要求*`madvise()`将页面加载到 RAM 中，但不能保证内核会遵守这一点，并且即使内核确实将它们引入，也不能保证它们会留在 RAM 中。我相信也不会t 保证页面将保留在 RAM 中。*`mmap(MAP_POPULATE)`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T15:52:40.127

你正在寻找`MAP_POPULATE`.*

# google-bigquery - 加载数据时出错“操作：意外”

> ID：10434821
> 
> 赞同：0
> 
> 时间：2012-05-03T15:45:49.870
> 
> 标签：google-bigquery

这是在（现已不复存在的）bigquery 论坛上提出的问题的转贴。

从 bq 工具上传数据时，出现以下错误：

```
BigQuery error in load operation: Unexpected. Please try again. 
```

我试过运行几个文件，但每个文件都给出了相同的异常。

最近失败的工作是`job_5251c0bf5eb24436a350bdfbdbdb3cd8`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:48:29.303

看起来该作业遇到了 SECURITY_VIOLATION 错误。这可能是由于线路长度超过最大线路长度 (64k)。

在 BigQuery 的下一个版本中（可能会在下周上线）在这种情况下它会给你一个更好的错误——它会告诉你哪些行太长，而长行不会导致导入失败（主题到 maxBadRecords 限制）。

同时，您可以确保您的输入行短于 64k（请注意，可以引用换行符，因此杂散的引号会导致行看起来太长）。

# php - PHP Object，设置多个属性

> ID：10434829
> 
> 赞同：14
> 
> 时间：2012-05-03T15:46:12.563
> 
> 标签：php, oop, object

是否可以一次为 php 中的对象设置多个属性？而不是这样做：

```
$object->prop1 = $something;
$object->prop2 = $otherthing;
$object->prop3 = $morethings; 
```

做类似的事情：

```
$object = (object) array(
    'prop1' => $something,
    'prop2' => $otherthing,
    'prop3' => $morethings
); 
```

但**不覆盖对象**。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T15:53:36.483

不像你想要的那样。但这可以通过使用循环来完成。

```
$map =  array(
    'prop1' => $something,
    'prop2' => $otherthing,
    'prop3' => $morethings
);

foreach($map as $k => $v)
    $object->$k = $v; 
```

只看到 2 条额外的行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-03T16:04:13.940

您应该查看[面向对象的 PHP 最佳实践](https://stackoverflow.com/questions/2407807/object-oriented-php-best-practices/2408805#2408805)：

“由于 setter 函数返回 $this，您可以像这样链接它们：”

```
 $object->setName('Bob')
        ->setHairColor('green')
        ->setAddress('someplace'); 
```

顺便说一下，这被称为[流利界面](http://en.wikipedia.org/wiki/Fluent_interface)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T15:57:39.647

我建议你**不**要这样做。说真的，**不要**。

您的代码第一种方式要干净得多，它更清楚您的意图，并且您不会将您的代码混淆到将来某个时候有人会查看您的代码并思考“白痴到底在想什么”的程度？

如果你坚持做一些显然是错误的事情，你总是可以创建一个数组，迭代它并在一个循环中设置所有属性。不过我不会给你代码。这是邪恶的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T15:58:14.277

您可以为返回对象的对象编写一些设置器：

```
public function setSomething($something)
{
 $this->something = $something;
 return $this; //this will return the current object
} 
```

然后你可以这样做：

```
$object->setSomething("something")
       ->setSomethingelse("somethingelse")
       ->setMoreThings("some more things"); 
```

您需要为每个属性编写一个设置器，因为`__set`函数无法返回值。

或者，设置一个函数来接受一组属性 => 值并设置所有内容？

```
public function setProperties($array)
{
  foreach($array as $property => $value)
  {
    $this->{$property} = $value;
  }
  return $this;
} 
```

并传入数组：

```
$object->setProperties(array('something' => 'someText', 'somethingElse' => 'more text', 'moreThings'=>'a lot more text')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-08T13:18:03.153

我意识到这是一个老问题，但为了其他遇到它的人的利益，我最近自己解决了这个问题并想分享结果

```
<?php
    //Just some setup
    header('Content-Type: text/plain');
    $account = (object) array(
        'email' => 'foo',
        'dob'=>((object)array(
            'day'=>1,
            'month'=>1,
            'year'=>((object)array('century'=>1900,'decade'=>0))
        ))
    );
    var_dump($account);
    echo "\n\n==============\n\n";

    //The functions
    function &getObjRef(&$obj,$prop) {
        return $obj->{$prop};
    }

    function updateObjFromArray(&$obj,$array){
        foreach ($array as $key=>$value) {
            if(!is_array($value))
                $obj->{$key} = $value;
            else{
                $ref = getObjRef($obj,$key);
                updateObjFromArray($ref,$value);
            }
        }
    }

    //Test
    updateObjFromArray($account,array(
        'id' => '123',
        'email' => 'user@domain.com',
        'dob'=>array(
            'day'=>19,
            'month'=>11,
            'year'=>array('century'=>1900,'decade'=>80)
        )
    ));
    var_dump($account); 
```

显然没有内置保护措施。主要的警告是该`updateObjFromArray`函数假定对于 中的任何嵌套数组`$array`，相应的键 in`$obj`已经存在并且是一个对象，这必须是真的，否则将其视为对象会引发错误。

希望这可以帮助！:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T16:11:05.923

我实际上不会这样做....但为了好玩我会

```
$object = (object) ($props + (array) $object); 
```

你最终得到一个由 $objects 公共属性组成的 stdClass，所以它失去了它的类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-16T10:13:33.563

`objectThis()`将类数组属性或数组转换为 stdClass 的方法。使用直接 transtypage (object) 将删除数字索引，但使用此方法将保留数字索引。

```
public function objectThis($array = null) {
    if (!$array) {
        foreach ($this as $property_name => $property_values) {
            if (is_array($property_values) && !empty($property_values)) {
                $this->{$property_name} = $this->objectThis($property_values);
            } else if (is_array($property_values) && empty($property_values)) {
                $this->{$property_name} = new stdClass();
            }
        }
    } else {
        $object = new stdClass();
        foreach ($array as $index => $values) {
            if (is_array($values) && empty($values)) {
                $object->{$index} = new stdClass();
            } else if (is_array($values)) {
                $object->{$index} = $this->objectThis($values);
            } else if (is_object($values)) {
                $object->{$index} = $this->objectThis($values);
            } else {
                $object->{$index} = $values;
            }
        }
        return $object;
    }
} 
```

# c - 创建灵活（动态内存分配）数组的任务

> ID：10434832
> 
> 赞同：0
> 
> 时间：2012-05-03T15:46:21.990
> 
> 标签：c

我们被赋予了用 C 编写动态数据结构的任务。我对 C 语言仍然非常陌生，如果有人能给我一些关于我做错了什么/我做错了什么的指针（大声笑），我将不胜感激应该阅读更多。

这是我到目前为止所拥有的：

**弹性阵列.h**

```
#ifndef FLEXARRAY_H
#define FLEXARRAY_H

typedef struct flexarrayrec flexarray;

flexarray *flexarray_new();
extern void flexarray_add(flexarray *a, char item);
extern void flexarray_set(flexarray *a, char item, int index);
extern char flexarray_get(flexarray *a, int index);
extern void flexarray_trim(flexarray *a);
extern void flexarray_print(flexarray *a);

#endif  /* FLEXARRAY_H */ 
```

**flexarray.c**

```
#include "flexarray.h"
#include "mylib.h"

#define DEFAULT_CAPACITY 10

typedef struct flexarray{
    int size;
    int capacity;
    char *array;
};

flexarray *flexarray_new(){
    flexarray a;
    a->capacity = DEFAULT_CAPACITY;
    a->size = 0;
    a->array = (char*) erealloc (a ,a->capacity * sizeof(char)); 
    return a;
}

void grow(flexarray a){
    a->capacity = a->capacity * 2;
    a->array = (int*) erealloc (a ,a->capacity * sizeof(int)); 
}

void flexarray_add(flexarray a, char item){
    if(a->size == a->capacity) grow(a);
    a->array[a->size - 1] = item;
    a->size++;    
}

void set(flexarray a, char c, int index){
    if(index < 0 || index  > a->size) return;
    a->array[index] = c;
}

char get(flexarray a, int index){
    if(index < 0 || index  > a->size) return;
    return a->array[index];
}

void flexarray_trim(flexarray a){
    if(a->size == a->capacity) return;
    a->capacity = a->size;
    a->array = (char*) erealloc (a, a->capacity * sizeof(char)); 
}

void flexarray_print(flexarray a){
    int i;
    printf("[");
    for(i = 0; i < a->size - 1; i++){
        printf("%c,", a->array[i]);
    }
    printf("%c]\n", a->array[i + 1]);
} 
```

谢谢

**编辑**当前编译日志：

```
flexarray.c:10:1: warning: useless storage class specifier in empty declaration [enabled by default]
flexarray.c: In function 'flexarray_new':
flexarray.c:13:15: error: storage size of 'a' isn't known
flexarray.c: At top level:
flexarray.c:20:21: error: parameter 1 ('a') has incomplete type
flexarray.c:25:30: error: parameter 1 ('a') has incomplete type
flexarray.c:31:20: error: parameter 1 ('a') has incomplete type
make[2]: *** [build/Debug/MinGW_Actual-Windows/flexarray.o] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 1s) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:58:21.983

```
void flexarray_add(flexarray a, char item){
    if(a->size == a->capacity) grow(a);
    a->array[a->size - 1] = item;
    a->size++;    
} 
```

应该：

```
void flexarray_add(flexarray *a, char item){
    if(a->size == a->capacity) grow(a);
    a->array[a->size] = item;
    a->size++;    
} 
```

和：

```
void flexarray_print(flexarray a){
    int i;
    printf("[");
    for(i = 0; i < a->size - 1; i++){
        printf("%c,", a->array[i]);
    }
    printf("%c]\n", a->array[i + 1]);
} 
```

可能：

```
void flexarray_print(flexarray *a){
    int i;
    printf("[");
    for(i = 0; i < a->size; i++){
        printf("%c,", a->array[i]);
    }
    printf("]\n" );
} 
```

其他风格提示：对于大小和索引，尽量使用*无符号*类型。

```
struct buff {
     size_t size;
     size_t used;
     char *data;
     }; 
```

这样做的好处是尝试使用负索引`b->data[b->used - 1] = item;`（

另外：您应该测试 realloc() 的成功/失败

UPDATE2：似乎还缺少一些星号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:11:01.743

```
flexarray *flexarray_new(){
    flexarray a;
    return a; // not a flexarray *
} 
```

..和

```
a->array = (char*) erealloc (a ,a->capacity * sizeof(char)); 
```

'eralloc()' 有什么作用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:43:50.200

你`typedef`的 s 错了——你要么想写

```
typedef struct flexarray { ... } flexarray; 
```

并`typedef`从标题中删除，或

```
 struct flexarrayrec { ... }; // no typedef 
```

并保留`tyepdef struct flexarrayrec flexarray;`在标题中。

# c# - 获取图像中两点之间的像素数

> ID：10434833
> 
> 赞同：1
> 
> 时间：2012-05-03T15:46:26.520
> 
> 标签：c#, winforms

我正在做一个项目，该项目需要图像中水平的两点之间的多个像素。我在 Windows 应用程序表单中执行此操作。

基本上，当用户单击图像中的一个点然后单击另一点时，他应该以像素数的形式获得水平距离。

我没有任何想法去做。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:19:01.413

假设您的图像使用任何继承的控件显示，`Control`那么您将可以访问`Control.MouseClick`事件（[链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseclick.aspx)）。

此事件使用`MouseEventArgs`( [link](http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventargs.aspx) )，它具有属性 X。

从这一点上应该很清楚。

**编辑：**添加了这个非常简单的示例：

```
private int? x1;

private void MyImageControl_MouseClick(object sender, MouseEventArgs e)
{
    if (x1.HasValue)
    {
        MessageBox.Show("Difference of " + Math.Abs(e.X - x1.Value).ToString());
        x1 = null;
    }
    else
    {
        x1 = e.X;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:41:41.233

对于图像容器，我只使用了一个图片框，尽管它可以与标签或您想要的任何控件一起使用。

在任何功能之外：

```
private Boolean clicked_once = false;
private Point point1;
private Point point2; 
```

然后我添加了一个 MouseClick 事件（不是 Click 事件）：

```
private void pictureBox1_MouseClick(object sender, MouseEventArgs e)
{
    if (clicked_once == false)
    {
        clicked_once = true;
        point1 = e.Location;
    }
    else if (clicked_once == true)
    {
        clicked_once = false;
        point2 = e.Location;
        int distance = Math.Abs(point1.X - point2.X);
        MessageBox.Show("Distance of pixels horizontally: " + distance.ToString());
    }
} 
```

应该管用。

# cryptography - PIV 智能卡 - 一般认证 - 签署随机数

> ID：10434839
> 
> 赞同：2
> 
> 时间：2012-05-03T15:46:46.753
> 
> 标签：cryptography, rsa, smartcard, fips, nonce

我希望有人可以帮助我了解[PIV 智能卡标准](http://csrc.nist.gov/publications/nistpubs/800-73-3/sp800-73-3_PART2_piv-card-applic-card-common-interface.pdf)。

我想通过使用先前生成的 RSA 1024 位模数数字签名密钥 0x9C 对 PKCS#1 填充随机数进行签名来验证智能卡。这是我的测试应用程序的输出：

```
Requesting Signature
Sending: 0087069C867C84820081800001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00CB441C4A656E071F1FB9F31BC6AB1824324FB42780
Error: (6A80) Incorrect parameters in command data 
```

这是细分：

```
00 - Not chained (chaining not required because message does not exceed max length)
87 - GENERAL AUTHENTICATE
06 - RSA 1024 Algorithm
9C - Digital Signature Key
86 - Length of data field
  7C - Dynamic Authentication template identifier
  84 - Length of dynamic authentication template
    82 - Response
    00 - Response length 0 (Response requested)
    81 - Challenge
    80 - Challenge length 128
      0001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00CB441C4A656E071F1FB9F31BC6AB1824324FB427 - PKCS #1 padded 20-byte Nonce (Padded with OpenSSL RSA_padding_add_PKCS1_type_1)
80 - Expected response length (128 bytes) 
```

我还使用所有不同的密钥（已经成功生成所有密钥）并使用链式消息与单部分消息运行测试。查看更多[测试数据](http://www.fullercode.com/Archive/SC.txt)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:43:59.817

我的智能卡上加载的 PIV 卡小程序存在错误。它不会对任何以 0x00 开头的数据进行签名。如果您将 0x00 更改为其他任何值（只要整数形式的数据小于 RSA 算法要求的整数形式的模数），它将成功签名。所以当然这意味着这些卡不能签署任何标准的 PKCS1 填充数据:(

谢谢您的帮助

# c# - 最佳实践：MethodReturnsBoolean == true/false OR true/false == MethodReturnsBoolean

> ID：10434841
> 
> 赞同：5
> 
> 时间：2012-05-03T15:46:50.100
> 
> 标签：c#, performance, compiler-construction, clr

我一直在写：

```
if(Class.HasSomething() == true/false) 
{
  // do somthing
}
else
{
  // do something else
} 
```

但我也看到过相反的人：

```
if(true/false == Class.HasSomething())
{
  // do somthing
}
else
{
  // do something else
} 
```

在性能和速度方面做一个或另一个有什么优势吗？我不是在这里谈论编码风格。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T15:49:23.293

它们都是等价的，但我的偏好是

```
if(Class.HasSomething())
{
  // do something
}
else
{
  // do something else
} 
```

...为简单起见。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-03T15:53:16.100

某些老式 C 程序员更喜欢“Yoda 条件”，因为如果你不小心使用了单等号，你会得到一个关于赋值给常量的编译时错误：

```
if (true = Foo()) { ... }  /* Compile time error!  Stops typo-mistakes */
if (Foo() = true) { ... }  /* Will actually compile for certain Foo() */ 
```

尽管这个错误在 C# 中不再编译，但旧习惯很难改掉，许多程序员仍坚持用 C 开发的风格。

* * *

就个人而言，我喜欢 True 语句的非常简单的形式：

```
if (Foo()) { ... } 
```

但对于 False 陈述，我喜欢明确的比较。
如果我写的更短，以后在查看代码时`!Foo()`很容易忽略。`!`

```
if (false == Foo()) { ... }  /* Obvious intent */
if (!Foo())  { ... }         /* Easy to overlook or misunderstand */ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T15:48:47.677

第二个例子是我听说的“尤达条件”；“假，这个方法的返回值一定是”。这不是您用英语所说的方式，因此在说英语的程序员中，它通常被看不起。

性能方面，真的没有区别。第一个示例在语法上通常更好（因此为了可读性），但考虑到您的方法名称，所涉及的“语法”（以及您将 bool 与 bool 进行比较的事实）无论如何都会使相等检查变得多余。所以，对于一个真实的陈述，我会简单地写：

```
if(Class.HasSomething()) 
{
  // do somthing
}
else
{
  // do something else
} 
```

这会越来越快，因为 if() 块基本上有一个内置的相等比较，所以如果你编写代码`if(Class.HasSomething() == true)`，CLR 将评估`if((Class.HasSomething() == true) == true)`. 但是，我们在这里谈论的可能是几个时钟的增益（不是毫秒，不是滴答声，而是时钟；在现代处理器中每秒发生 20 亿次的时钟）。

对于 false 条件，在使用 not 运算符:`if(!Class.HasSomething())`和使用与 false: 的比较之间是一个折腾`if(Class.HasSomething() == false)`。第一个更简洁，但很容易错过复杂表达式中的那个小感叹号（特别是因为它出现在整个表达式之前），所以我会考虑将其等同于 false 以确保代码可读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T15:49:34.253

您不会看到任何性能差异。

正确的选项是

```
if (Whatever()) 
```

唯一应该写`== false`or`!= true`是在处理`bool?`s 时。（在这种情况下，所有四个选项都有不同的含义）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T15:49:39.110

您不会看到任何性能差异，任何比较都被转换为相同的 IL...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T15:50:58.350

```
if(Class.HasSomething()) 
{
  // do somthing
} 
```

是我的方式。但最好尽量避免`HasSomething()`. 更好地公开返回值一次并重用它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-03T15:51:14.243

你不应该写。

写

```
if(Class.HasSomething())
{
    // do something
}
else
{
    // do something else
} 
```

反而。如果`Class.HasSomething()`已经是一个布尔值，那么将它与另一个布尔值进行比较是没有意义的

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T15:51:18.053

这里没有性能优势。这种编码风格用于防止程序员键入 = 而不是 == 的情况。编译器会解决这个问题，因为 true/false 是常量，不能分配新值

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-03T16:02:02.760

对于布尔值，我不建议：只使用`if (method())`and `if (!method())`。对于布尔值以外的情况，使用 yoda-speak 的约定，例如，`if (1 == x)`是为了防止错误，因为`if (1 = x)`会抛出编译器错误而`if (x = 1)`不会（它是 C 中的有效代码，但可能不是你想要的）。在 C# 中，只有当变量是布尔值时，这样的语句才有效，从而减少了这样做的需要。

# css - 尝试使用带有 nodeJS 的构建脚本构建 LESS (less css)

> ID：10434843
> 
> 赞同：5
> 
> 时间：2012-05-03T15:46:53.383
> 
> 标签：css, node.js, less

我们正在使用 NodeJS 来构建我们的项目。我们已将 LESS CSS 集成为项目的一部分。我们正试图保持我们的构建干净，并希望能够调用 lessc 命令（或类似的命令）来构建我们的 LESS 文件。

LESS 文档不是很深入，但希望与社区联系以找到解决方案。谷歌在这个话题上对我帮助不大。

我们有一个 build.sh 文件，它调用各种其他 build.js 文件（在各自的目录中）。如何运行 LESSC 来编译我的 LESS 文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T17:20:04.487

使用 node.js

```
var less = require('less')
    ,fs = require('fs');

fs.readFile('style.less',function(error,data){
    data = data.toString();
    less.render(data, function (e, css) {
        fs.writeFile('style.css', css, function(err){
            console.log('done');
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-04T11:53:58.343

几年后... less@3.9.0 将输出返回为：

```
{
  css: 'rendered css',
  imports: ['source.css']
} 
```

更新后的代码如下所示：

```
const outputFile = 'style-iso.css';

const data = `.bootstrap-iso {
    @import (less) "style.css"; 
} `;

less.render(data, { strictMath: true }).then(
    output => {
        fs.writeFile(outputFile, output.css, err => {
            if (err) {
                throw err;
            }
            console.log(`${outputFile} saved!`);
        });
    },
    err => {
        console.error(err);
    }); 
```

小费

```
strictMath: true 
```

如果你想渲染**bootstrap.css是必要的**

# apache - 检测 url 并重定向到另一个如果相等 .htaccess

> ID：10434844
> 
> 赞同：0
> 
> 时间：2012-05-03T15:46:57.107
> 
> 标签：apache, .htaccess, redirect

可以使用子域和域访问该站点：

> 用户名.freesite.com

如何将*所有请求*重定向到`username.freesite.com`重定向到`mysite.com`？（两个 url 都指向同一个 A 地址）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:15:22.387

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^[^.]+\.(freesite\.com)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} R=302,L] 
```

PS：这也将重定向`www.freesite.com`到`freesite.com`. 让我知道您是否想要`www.freesite.com`.

# git - 如何使用 git 切换到“不稳定”分支？

> ID：10434845
> 
> 赞同：1
> 
> 时间：2012-05-03T15:46:58.887
> 
> 标签：git

我正在测试一个包（git clone git://guacamole.git.sourceforge.net/gitroot/guacamole/guacamole）

这个项目有两个分支：'master'和'unstable'

我怎样才能得到“不稳定”的分支？

很抱歉这个虚拟问题，但“git branch”只显示“master”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:50:53.160

您需要从 repo 中手动签出不稳定的分支。

`git checkout -b unstable origin/unstable`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:50:16.947

用于`git branch -a`列出所有分支并`git checkout unstable`获取不稳定的分支

编辑：这假设您已经克隆了 repo

# jquery - 单击时获取无序列表的索引和滚动位置（上下）

> ID：10434848
> 
> 赞同：0
> 
> 时间：2012-05-03T15:47:13.153
> 
> 标签：jquery

我有一个事件时间表，ul 有一个固定的高度和溢出隐藏，li 的也有一个固定的高度。一次只能看到四个。我需要弄清楚如何在单击相应按钮时上下滚动列表。

我确信有插件可以做到这一点，但为了更好地理解 jQuery/JS，我想自己做这件事——但需要一些帮助。HTML/CSS 在这里[http://jsfiddle.net/DirtyBirdDesign/BJdJ7/](http://jsfiddle.net/DirtyBirdDesign/BJdJ7/)

我将其分解为以下需求：

1.  循环并索引列表项的数量
2.  获取当前位置
3.  每次单击“向下”按钮时，移动位置 -41px
4.  每次单击“向上”按钮时，将位置移动 +41px
5.  动画过渡
6.  连续循环 - 当最后一个可见时从最后一个到第一个

我在上面遗漏了什么吗？我该怎么做？谢谢你的知识！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:03:28.517

你必须改变 position:relative CSS to your li

```
#PartnerSchedule ul#PartnerEvents li {
  position:relative;
  width:457px;
  height:41px;
  margin:0 0 2px 0;
  padding:0 10px;
  font:.9em/1.75em "Helvetica Neue", Arial, Helvetica, Genevea, sans-serif;
  overflow: hidden;
  } 
```

此脚本是您的解决方案，您可以添加控件以在达到限制时停止滚动。

```
​$('#up').click(function(){
    $('#PartnerEvents li').animate({top:'-=43'});
});
$('#down').click(function(){
    $('#PartnerEvents li').animate({top:'+=43'});
}); 
```

[演示](http://jsfiddle.net/BJdJ7/1/) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:38:53.790

```
<!-- language: lang-js -->  

var itemsToShow = 4;

$('#PartnerEvents>li').each(function(i,k) {
    var ele = $(this);
    $(ele).attr('id', 'PartnerEvents' + i);
    if (i >= itemsToShow) //i is zero indexed
    {
        $(ele).hide();
    }
});

$('#up').bind('click', function() {
    if ($('#PartnerEvents0:hidden').length > 0)
    {
        // This means we can go up
        var boundaryTop = $('#PartnerEvents li:visible:first').attr('id');
        var boundaryBottom = $('#PartnerEvents li:visible:last').attr('id');

        if ($('#PartnerEvents li#'+ boundaryTop).prev().length > 0)
        {
            $('#PartnerEvents li#'+ boundaryTop).prev().show();
            $('#PartnerEvents li#'+ boundaryBottom).hide();
        }
    }
});

$('#down').bind('click', function() {
    if ($('#PartnerEvents li:last:hidden').length > 0)
    {
        // This means we can go down
        var boundaryTop = $('#PartnerEvents li:visible:first').attr('id');
        var boundaryBottom = $('#PartnerEvents li:visible:last').attr('id');

        if ($('#PartnerEvents li#'+ boundaryBottom).next().length > 0)
        {
            $('#PartnerEvents li#'+ boundaryBottom).next().show();
            $('#PartnerEvents li#'+ boundaryTop).hide();
        }
}
}); 
```

# objective-c - 检查动画何时停止

> ID：10434849
> 
> 赞同：2
> 
> 时间：2012-05-03T15:47:16.310
> 
> 标签：objective-c, ios, animation, uiimageview

我正在制作一个简单的 UIImageView 动画。基本上我得到了一堆从 0-9 的图像编号，我正在使用这段代码为它们制作动画。

```
myAnimation.animationImages = myArray;
myAnimation.animationDuration = 0.7;
myAnimation.animationRepeatCount = 12;
[myAnimation startAnimating]; 
```

这里 myArray 是一个 uiimage 数组，即 0.png、1.png 等。

一切都很好，它的动画也很好。我需要知道的是我什么时候知道动画何时停止？我可以使用 NSTimer 但为此我需要一个秒表来检查动画何时开始和停止。有没有更好的方法，这意味着我可以找出 UIImageView 何时停止动画？

我把这个线程作为参考。

[UIImageView startAnimating：如何让它停在系列中的最后一张图片上？](https://stackoverflow.com/questions/3351857/uiimageview-startanimating-how-do-you-get-it-to-stop-on-the-last-image-in-the-s)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:52:28.183

使用动画DidStopSelector。这将在动画完成时触发：

```
[UIView setAnimationDidStopSelector:@selector(someMethod:finished:context:)]; 
```

然后实现选择器：

```
- (void)someMethod:(NSString*)animationID finished:(NSNumber*)finished context:(void*)context {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:52:46.787

是的，有比使用 NSTimers 更好的方法。如果您使用的是 iOS 4 或更高版本，最好开始使用块动画。尝试这个

```
 [UIView animateWithDuration:(your duration) delay:(your delay) options:UIViewAnimationCurveEaseInOut animations:^{

        // here you write the animations you want

    } completion:^(BOOL finished) {
        //anything that should happen after the animations are over

    }]; 
```

**编辑：**哎呀，我想我读错了你的问题。在 UIImageView 动画的情况下，我想不出比使用 NSTimers 或预定事件更好的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:54:43.070

你也可以试试这个：

```
[self performSelector:@selector(animationDone) withObject:nil afterDelay:2.0]; 
```

# .net - 使用 Windows 事件日志有哪些选项？

> ID：10434853
> 
> 赞同：1
> 
> 时间：2012-05-03T15:47:28.310
> 
> 标签：.net, windows, winapi, snmp, event-log

哪些 API 和端点可用于处理 Windows 事件日志？

在 Windows Vista 和更新版本中，哪些 APS 是新的/不同的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:51:33.587

LogParser：具有 COM API 以及命令行应用程序。受到推崇的。还读取许多其他类型的日志。

WMI：可用于读取事件日志。表现不佳。

Windows API：如果您使用 C 进行编程，这就是您要走的路。

C#：托管 API 也存在。

在此处查看 microsoft Windows 事件日志 API：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa385785(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385785(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:59:35.713

有[http://msdn.microsoft.com/en-us/library/dhacse28(v=vs.90).aspx](http://bit.ly/K4rSLr) 也许你可以提供一些标准（除了.net）来帮助人们集中他们的答案？

# xml - actionscript 3.0：从 get parent 和 child 组合图像 url

> ID：10434854
> 
> 赞同：0
> 
> 时间：2012-05-03T15:47:31.367
> 
> 标签：xml, actionscript-3

我正在制作一个 xml 图片库。我需要从父节点获取路径，从子节点获取图像名称。但是当我在 urlrequest 中结合这两个 url 时，它不会显示图像并返回“SecurityError：错误 #2000：没有活动的安全上下文”。在输出中。

这是我的xml代码：

```
<gallery name="Poster" path="gallery/graphic_design/1/">
    <image img="im1.jpg" thumb="thumb1.jpg"/>
    <image img="im2.jpg" thumb="thumb2.jpg"/>
    <image img="im3.jpg" thumb="thumb3.jpg"/>
</gallery> 
```

这是我的 as3 代码

```
var main_path = gallery_xml.gallery.@path;
var thumb_url = main_path + images[i].@thumb;
var thumb_loader = new Loader();
thumb_loader.load(new URLRequest(thumb_url)); 
```

在我追踪它之后。它显示了来自 5 个画廊的所有路径，而不是来自父画廊的路径。

```
gallery/graphic_design/1/gallery/graphic_design/2gallery/graphic_design/3gallery/graphic_design/3gallery/graphic_design/3gallery/graphic_design/3gallery/graphic_design/3thumb1.jpg 
```

我应该如何让它只加载来自父级的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:31:13.000

错误 #2000 通常是文件未找到错误。您可以通过运行 IOErrorEvent 获得更多信息，如下所示：

```
thumb_loader.addEventListener(IOErrorEvent.IO_ERROR, IOError)

function IOError(e:IOErrorEvent):void {
    trace(e.text);
} 
```

然而，眼前的事实是，AS3 使用的 XML 方法很愚蠢（恕我直言）。正如您所看到的，它不是提取路径的一个引用，而是提取路径的所有引用，然后是拇指的特定引用。

仅从阅读输出来看，您的 XML 似乎要长得多，包含上述代码的 3 个版本，每个版本都有一个递增的 graphics_design/ **#**。如果是这种情况，您的 dot.notation 语法中缺少对您正在寻找的特定版本的 @path 的引用。

在实践中，`gallery_xml.gallery.@path`变成`gallery_xml.gallery[0].@path`

这是因为，当一个元素在 XML 结构中的特定级别有多个条目时，它基本上是一个具有该名称的元素数组。

# wpf - GridViewColumnHeader.Click 通过单击 ListView 的滚动条轴和滚动箭头触发

> ID：10434857
> 
> 赞同：1
> 
> 时间：2012-05-03T15:47:38.280
> 
> 标签：wpf, wpf-controls

我正在使用附加行为来添加通过单击列标题对 ListView 进行排序的能力。该行为添加了以下处理程序来处理用户单击 GridViewColumnHeader：

```
listView.AddHandler(GridViewColumnHeader.ClickEvent, new RoutedEventHandler(ColumnHeader_Click)); 
```

处理程序看起来像这样：

```
static void ColumnHeader_Click(object sender, RoutedEventArgs e)
{
   var listView = sender as ListView;
   var header = e.OriginalSource as GridViewColumnHeader;
   var gridView = ((GridView)(listView.View));
   ...
} 
```

我刚刚注意到，如果 ListView 有一个滚动条，我点击滚动条的“轴”或滚动箭头（但不是拇指！）：

[![滚动条的剖析](../Images/e6987a55a34ec8b022f1f172fe21c8e6.png)](https://i.stack.imgur.com/GldRB.gif)
[（来源：[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC79322.gif)）]

然后触发 GridViewColumnHeader.ClickEvent，我的代码失败，因为 'header' 现在为空。显然这不是预期的行为，现在我必须确保 OriginalSource 是 GridViewColumnHeader。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:16:08.030

问题`GridViewColumnHeader.ClickEvent`实际上是`ButtonBase.ClickEvent`，这意味着您设置的处理程序将由用户单击ListView 中的*任何*按钮（或派生的：复选框、日期选择器、滚动条按钮等）触发，而不仅仅是列标题（这是从按钮派生的）。

请参阅[http://social.msdn.microsoft.com/Forums/en/wpf/thread/3595d153-4faa-4501-9c6f-2f074658e760](http://social.msdn.microsoft.com/Forums/en/wpf/thread/3595d153-4faa-4501-9c6f-2f074658e760)

我发现的唯一解决方案是`header != null`在执行任何其他操作之前检查是否在触发它的按钮 ( `e.OriginalSource`) 不是列标题时退出处理程序。

希望这可以帮助...

（PS：还要检查是否`header.Column != null`，以避免用户点击“最后一个额外的标题”时出错，所有“常规”标题右侧的空标题......）

# cocos2d-iphone - 你如何在它下面放置一个带有 cclabel 的 ccmenuitem？

> ID：10434858
> 
> 赞同：0
> 
> 时间：2012-05-03T15:47:40.490
> 
> 标签：cocos2d-iphone, ccmenuitem

在 cocos2d-iphone 中，我想为菜单按钮项使用一个精灵，我想在它下面放置一个标签来描述按钮。

但是，我不知道该怎么做。

如果我尝试制作更多按钮/标签然后使用

```
[menu alignItemsHorizontallyWithPadding:1.5f]; 
```

物品的位置不对。

无论如何，这是我的代码；

```
// Button
CCSprite *panel = [CCSprite spriteWithFile:@"panel.png"];        

// Menu
CCMenu *menu = [CCMenu menuWithItems:nil];

CCLabelBMFont *lblFont = [CCLabelBMFont labelWithString:@"Some text" fntFile:@"arial16.fnt"];

CCMenuItemLabel *mnuLabel = [CCMenuItemLabel itemWithLabel:lblFont];    

CCMenuItemSprite *mnuSprite = [CCMenuItemSprite itemFromNormalSprite:panel selectedSprite:nil disabledSprite:nil target:nil selector:nil];

[menu addChild:mnuSprite];
[menu addChild:mnuLabel];
[menu setPosition:ccp(winSize.width/2, winSize.height/2)];

[self addChild:menu z:1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:27:46.427

你确定，你需要在你的精灵下面贴上标签吗？如果我理解正确，您可以创建 CCMenuItemSprite 实例，然后将标签作为子项添加到它。之类的：

```
CCMenuItemSprite *mnuSprite = [CCMenuItemSprite itemFromNormalSprite:panel selectedSprite:nil disabledSprite:nil target:nil selector:nil];
CCLabelBMFont *lblFont = [CCLabelBMFont labelWithString:@"Some text" fntFile:@"arial16.fnt"];

[lblFont setAnchorPoint: ccp(0.f, 0.f)];
[mnuSprite addChild: lblFont]; 
```

# asp-classic - ASP 文件权限

> ID：10434859
> 
> 赞同：0
> 
> 时间：2012-05-03T15:47:40.600
> 
> 标签：asp-classic, permissions

我是一名 ASP.NET 开发人员，在有人告诉他们这是 ASP.NET 后，一位客户要求我对他们的网站进行一些更改。不是，这是经典的 ASP，但她似乎对此束手无策，所以我说我会试一试。但是，我对 Classic ASP 的经验很少。

我目前正在尝试更新表格。已将整个站点和数据库复制到我的本地计算机并启动并运行。我已将匿名用户设置为我的 windows 用户，以允许我使用 windows 身份验证连接到数据库。

我遇到的困难是，当我使用编辑表单编辑现有记录并单击本地计算机上的保存时，我收到以下错误：

```
Server object error 'ASP 0177 : 800401f3'

Server.CreateObject Failed

/xtpropertyedit.asp, line 200

800401f3 
```

但是，它在网站的托管版本上运行良好。我想这是一个权限问题。我尝试将具有完全权限的用户添加到本地计算机上站点的根文件夹，但这似乎没有什么区别。

```
Set Jpeg = Server.CreateObject("Persits.Jpeg")    '** Line 200 ** 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:16:02.603

[AspJpeg](http://www.aspjpeg.com/)是一个付费的第三方组件，它似乎没有安装在您的开发计算机上。它可以无限制地使用 30 天。

# android - Sencha Touch dataGrid - 可排序和可搜索

> ID：10434862
> 
> 赞同：0
> 
> 时间：2012-05-03T15:48:10.653
> 
> 标签：android, jquery-mobile, sencha-touch

您好我需要创建一个包含数据网格中项目的订单和目录系统。那就是网格需要可搜索和可排序。数据来自作为数据库导出的远程 xml 文件。然后我将它们转换为 json 表示。

我需要能够编辑（添加订单）而不仅仅是在数据视图中显示它们。sencha touch 能处理这么复杂的 UI 吗？

我可以在 jQuery Mobile 中做到这一点（主要是适应 jQuery UI 插件），但我想以可维护的方式开发它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:26:22.947

我在一些应用程序中使用了这个网格。它是可排序和可编辑的。我认为它不能开箱即用，但可以很容易地添加： [https ://github.com/mitchellsimoens/Ext.ux.touch.grid](https://github.com/mitchellsimoens/Ext.ux.touch.grid)

# c# - 如何通过自定义规则检测对 FxCop 中特定方法的调用——在 Check 方法中放入什么

> ID：10434865
> 
> 赞同：0
> 
> 时间：2012-05-03T15:48:12.483
> 
> 标签：c#, .net, visual-studio, code-analysis, fxcop

我想禁止通过自定义 FxCop 规则调用特定方法 (MessageBox.Show)。我知道如何获得自定义实现的 FxCop 规则的机制（XML 文件，继承自 BaseIntrospectionRule 等）。我的问题是我在“检查”方法中放入的内容。

以下是我在网络上大量浏览后得出的初稿，但我对在标有***?????的两个字段中实际填充的内容感到非常困惑。***以下。

我不确定即使这个解决方案，因为它存在，是否会奏效。确保我正在做我想做的事的万无一失的方法是什么——捕获所有对 MessageBox.Show 的调用？

```
public override ProblemCollection Check(Member member)
{
    Method method = member as Method;
    if (method == null)
    {
        return null;
    }
    MetadataCollection<Instruction>.Enumerator enumerator = method.Instructions.GetEnumerator();
    while (enumerator.MoveNext())
    {
        Instruction current = enumerator.Current;
        switch (current.OpCode)
        {
            case OpCode.Call:
            case OpCode.Callvirt:
            {
                Method method3 = current.Value as Method;
                if (method3 == **?????**)
                {
                    Problem item = new Problem(base.GetResolution(**?????**), current);
                    base.Problems.Add(item);
                }
                break;
            }
        }
    }
    return base.Problems;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:08:56.843

您可能想看看内置的 SpecifyMessageBoxOptions 规则是如何使用像 Reflector 这样的反编译器构建的。还有其他可能的方法，但名称比较通常没问题，除非您有理由相信它会导致过多的误报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T00:14:17.850

这样的事情怎么样？

```
 public override ProblemCollection Check(Member member)
    {
        Method method = member as Method;
        if (method != null) 
        {
            this.Visit(method.Body);
        }
        return this.Problems;
    }

    public override void VisitMethodCall(MethodCall call)
    {
        base.VisitMethodCall(call);
        Method targetMethod = (Method)((MemberBinding)call.Callee).BoundMember;
        if (targetMethod.Name.Name.Contains("MessageBox.Show"))
           this.Problems.Add(new Problem(this.GetResolution(), call));
    } 
```

# mysql - MySQL 从特定的相关记录中获取所有数据

> ID：10434868
> 
> 赞同：9
> 
> 时间：2012-05-03T15:48:22.233
> 
> 标签：mysql, join

我正在寻找一种方法来为 MySQL 表中的每条记录输出选定的相关记录。我会进一步解释...

我有 2 个表**currency**和**exchange_rates**。这些表由**currency_code**字段连接，每条货币记录有多个相关的汇率记录，每条汇率记录代表不同的一天。所以货币和 exchange_rates 之间存在 1:many 的关系。

我想从`exchange_rates`表中检索每种货币的完整记录，但能够定义选择哪个相关记录的特定标准。不仅是每种货币的最新 exchange_rate，还可能`exchange_rates`是具有该字段的每种货币的最新记录`criteria_x=NULL`。

很遗憾您不能`LIMIT`在派生表中使用，否则这样的东西将是一个简洁易读的解决方案......

```
SELECT `currencies`.`currency_code`, `currencies`.`country`, `exchange_rates`.`id`,
       FROM_UNIXTIME(`exchange_rates`.`datestamp`), `rate` 
FROM `currencies` 
INNER JOIN (
SELECT `id`, `currency_code`, `invoice_id`, `datestamp`, `rate` 
FROM `exchange_rates` 
WHERE `criteria_x`=NULL AND `criteria_y` LIKE 'A' 
ORDER BY `datestamp` DESC
LIMIT 0, 1
) AS `exchange_rates` ON `currencies`.`currency_code`=`exchange_rates`.`currency_code`
ORDER BY `currencies`.`country` 
```

该`LIMIT`子句应用于父查询而不是派生表。

这是我发现这样做的唯一方法......

```
SELECT `currencies`.`currency_code`, `currencies`.`country`, 
FROM_UNIXTIME( SUBSTRING_INDEX( SUBSTRING_INDEX(`exchange_rates`.`concat`, '-', 1), '-', -1)) AS `datestamp`,
SUBSTRING_INDEX( SUBSTRING_INDEX(`exchange_rates`.`concat`, '-', 2), '-', -1) AS `id`, 
SUBSTRING_INDEX( SUBSTRING_INDEX(`exchange_rates`.`concat`, '-', 3), '-', -1) AS `rate` 
FROM `currencies`
INNER JOIN (
SELECT `currency_code`, MAX(CONCAT_WS('-', `datestamp`, `id`, `rate`)) AS `concat`
FROM `exchange_rates` 
WHERE `criteria_x`=NULL AND `criteria_y` LIKE 'A' 
GROUP BY `exchange_rates`.`currency_code`
) AS `exchange_rates` ON `currencies`.`currency_code`=`exchange_rates`.`currency_code`
ORDER BY `currencies`.`country` 
```

因此，将一堆字段连接在一起并在`MAX()`其上运行 a 以获得我在组内的排序顺序，然后在父查询中使用`SUBSTRING_INDEX()`. 问题是这种方法仅在我可以使用 a `MIN()`or`MAX()`连接字段时才有效。如果我想对字符串进行排序或按多个条件排序但仅限于单个记录，那将是不理想的。

此外，我不得不求助于可怕的字符串操作来从关系数据库中获取我想要的数据，这也让我感到身体上的痛苦——必须有更好的方法！

有人对更好的方法有任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:39:01.090

在尝试提供答案之前，有一些一般性问题需要（简要）讨论。

您的第一个查询是：

```
SELECT `currencies`.`currency_code`, `currencies`.`country`, `exchange_rates`.`id`,
       FROM_UNIXTIME(`exchange_rates`.`datestamp`), `rate` 
FROM `currencies` 
INNER JOIN (
SELECT `id`, `currency_code`, `invoice_id`, `datestamp`, `rate` 
FROM `exchange_rates` 
WHERE `criteria_x`=NULL AND `criteria_y` LIKE 'A' 
ORDER BY `datestamp` DESC
LIMIT 0, 1
) AS `exchange_rates` ON `currencies`.`currency_code`=`exchange_rates`.`currency_code`
ORDER BY `currencies`.`country` 
```

1.  我认为您不需要使用尽可能多[的反引号](https://stackoverflow.com/questions/10573922/what-does-the-sql-standard-say-about-usage-of)。它们并没有完全错，但我不会在我的答案中输入它们。
2.  SQL 标准不认可这种`criteria_x = NULL`表示法；那应该写成`criteria_x IS NULL`。MySQL 可能允许它；只要你知道它是非标准的，你就可以使用。
3.  如果标准不包含元字符（或在标准 SQL 中），则该标准`LIKE 'A'`是不明智的。使用简单的相等会更好：.`%``_``= 'A'`

* * *

你的问题说：

> 我想从`exchange_rates`表中检索每种货币的完整记录，但能够定义选择哪个相关记录的特定标准。不仅是每种货币的最新汇率，还可能是具有该字段的每种货币的最新汇率`criteria_x IS NULL`。

因此，您希望为满足所需其他条件的每种货币选择最近的汇率记录。我们可以假设汇率表中`currency_code`和的组合存在唯一约束；`datestamp`这意味着总是最多有一个匹配的行。如果没有匹配的行，您没有指定应该显示的内容；当然，内部连接根本不会列出该货币。

对于 SQL 查询，我通常分步构建和测试整个查询，为之前开发的查询添加额外的材料，这些材料已知可以工作并产生正确的输出。如果它很简单和/或我收集了太多的狂妄自大，我会先尝试一个复杂的查询，但是当（克星）它不起作用时，我会回到构建和测试过程。将其视为测试驱动（查询）开发。

### 第 1 阶段：符合指定条件的汇率记录

```
SELECT id, currency_code, invoice_id, datestamp, rate 
  FROM exchange_rates 
 WHERE criteria_x IS NULL AND criteria_y = 'A' 
 ORDER BY currency_code, datestamp DESC 
```

### 第 2 阶段：符合指定条件的每种货币的最近汇率时间

```
SELECT currency_code, MAX(datestamp) 
  FROM exchange_rates 
 WHERE criteria_x IS NULL AND criteria_y = 'A' 
 GROUP BY currency_code 
```

### 第 3 阶段：符合指定条件的每种货币的最近汇率时间的汇率记录

```
SELECT x.id, x.currency_code, x.invoice_id, x.datestamp, x.rate 
  FROM exchange_rates AS x
  JOIN (SELECT currency_code, MAX(datestamp) AS datestamp
          FROM exchange_rates 
         WHERE criteria_x IS NULL AND criteria_y = 'A' 
         GROUP BY currency_code
       ) AS m
    ON x.currency_code = m.currency_code AND x.datestamp = m.datestamp 
```

### 第 4 阶段：货币信息和符合指定条件的每种货币的最近汇率时间的汇率记录

这需要将货币表与上一个查询的输出连接起来：

```
SELECT c.currency_code, c.country, r.id,
       FROM_UNIXTIME(r.datestamp), r.rate
  FROM currencies AS c 
  JOIN (SELECT x.id, x.currency_code, x.invoice_id, x.datestamp, x.rate 
          FROM exchange_rates AS x
          JOIN (SELECT currency_code, MAX(datestamp) AS datestamp
                  FROM exchange_rates 
                 WHERE criteria_x IS NULL AND criteria_y = 'A' 
                 GROUP BY currency_code
               ) AS m
            ON x.currency_code = m.currency_code AND x.datestamp = m.datestamp
       ) AS r
    ON c.currency_code = r.currency_code
 ORDER BY c.country 
```

除了 Oracle 只允许 ' `) r`' 而不是 ' `) AS r`' 用于表别名和使用之外`FROM_UNIXTIME()`，我相信它应该可以与您提到的几乎所有 SQL DBMS 的当前版本正常工作。

由于在最终查询中未返回发票 ID，我们可以将其从中间查询的选择列表中删除。一个好的优化器可能会自动执行此操作。

如果即使没有符合条件的汇率也想查看货币信息，则需要将最外层查询中的 JOIN 更改为 LEFT JOIN（又名 LEFT OUTER JOIN）。如果您只想查看货币的子集，您可以在最后（最外层）查询阶段应用该过滤器，或者（如果过滤器基于汇率表中可用的信息，例如货币代码）最里面的子查询（最有效）或中间子查询（效率不高，除非优化器意识到它可以将过滤器向下推到最里面的子查询）。

正确性通常是主要标准；性能是次要标准。但是，问题中提到了性能。第一条规则是衡量此处显示的“简单”查询。只有当这被证明太慢时，您才需要进一步担心。当您确实需要担心时，您可以检查查询计划，例如是否缺少关键索引。只有当查询仍然不够快时，您才开始尝试使用其他技巧。这些技巧往往是特定于特定 DBMS 的。例如，您可以使用优化器提示使 DBMS 以不同方式处理查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:45:52.763

如果我正确理解了您的问题，您需要做的就是自行加入`exchange_rates`以选择利率：

```
SELECT   currencies.currency_code,
         currencies.country,
         exchange_rates.id,
         FROM_UNIXTIME(exchange_rates.datestamp),
         exchange_rates.rate
FROM     currencies
  JOIN   (
    SELECT   currency_code, MAX(datestamp) AS datestamp
    FROM     exchange_rates
    WHERE    criteria_x IS NULL AND criteria_y LIKE 'A'
    GROUP BY currency_code
  )   AS exchange_wantd USING (currency_code)
  JOIN   exchange_rates USING (currency_code, datestamp)
ORDER BY currencies.country 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:11:21.363

试试这个查询。预计可以正常工作，但如果您提供一些数据，我将能够正确完成

```
SELECT  `currencies`.`currency_code` as `CurrencyCode`,
    `currencies`.`country`, 
    FROM_UNIXTIME( SUBSTRING_INDEX( SUBSTRING_INDEX(`exchange_rates`.`concat`, '-', 1), '-', -1)) AS `datestamp`,
    SUBSTRING_INDEX( SUBSTRING_INDEX(`exchange_rates`.`concat`, '-', 2), '-', -1) AS `id`, 
    SUBSTRING_INDEX( SUBSTRING_INDEX(`exchange_rates`.`concat`, '-', 3), '-', -1) AS `rate`,
    (SELECT 
            MAX(CONCAT_WS('-', `datestamp`, `id`, `rate`)) AS `concat` 
            FROM `exchange_rates` 
            WHERE `criteria_x`= NULL 
            AND `criteria_y` LIKE 'A' 
            GROUP BY `exchange_rates`.`currency_code`
            HAVING `exchange_rates`.`currency_code` =`CurrencyCode`
    ) as `Concat`
FROM    `currencies`
ORDER BY `currencies`.`country` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:34:17.393

如果我正确理解你，如果你不强迫数据库像人类一样思考，答案很简单。与 Jonathan Leffler 一样，我理解您的意图是“为每种货币选择符合其他所需标准的最新汇率记录”。

“最新”当然是问题所在，因为该信息并未明确存储在数据库中，因此我们首先确定该信息。

```
SELECT currency_code, MAX(datestamp) AS datestamp FROM exchange_rates GROUP BY currency_code 
```

我们将重用它，所以我们给结果一个名字

```
(SELECT currency_code, MAX(datestamp) AS datestamp FROM exchange_rates GROUP BY currency_code) AS dates_we_want 
```

包含我们可能想要的所有信息的域是 dates_we_want、货币和 exchange_rates 表的每个可能组合的记录

```
(SELECT currency_code, MAX(datestamp) AS datestamp FROM exchange_rates GROUP BY currency_code) AS dates_we_want, currencies AS c, exchange_rates AS er 
```

选择我们想要的记录：

*   匹配货币代码

    dates_we_want.currency_code=er.currency_core 和 dates_we_want.currency_code=c.currency_core

*   最近的费率

    dates_we_want.datesamp=er.datesamp

投影到结果中。你

> 想要从 exchange_rates 表中检索完整记录

简单地转化为

```
er.* 
```

将所有内容放在一个 SELECT 语句中，并为您提供更改以放置您的任意约束：

```
SELECT er.*
FROM
    (SELECT currency_code, MAX(datestamp) AS datestamp
       FROM exchange_rates GROUP BY currency_code
    ) AS dates_we_want,
    currencies AS c, exchange_rates AS er
WHERE
    dates_we_want.currency_code=er.currency_core
AND
    dates_we_want.currency_code=c.currency_core
AND
    dates_we_want.datestamp=er.datestamp
AND
    `criteria_x`=NULL AND `criteria_y` LIKE 'A' 
```

# python - 我从哪里获得 featx.py 模块？

> ID：10434869
> 
> 赞同：-1
> 
> 时间：2012-05-03T15:48:24.860
> 
> 标签：python, nlp, nltk

美好的一天，我正在尝试一些示例来对“NLTK 食谱”中的文本进行分类，并且书中引用了一个包含多个特征提取器的 featx.py 模块。问题是我在任何地方都找不到该 featx.py 模块。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:50:21.600

快速谷歌搜索指向[该站点](https://bitbucket.org/japerk/nltk-trainer/src/791a1abf26c4/nltk_trainer/classification/featx.py)。 `japerk`是那本书的作者，所以很合适。因此，我会下载该`nltk-trainer`软件包并尝试将其与 NLTK 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T01:04:28.830

您应该从 Packt 网站下载本书的代码包：http: [//www.packtpub.com/support/6164](http://www.packtpub.com/support/6164)。

# sorting - 如何按汇总组排序？

> ID：10434872
> 
> 赞同：0
> 
> 时间：2012-05-03T15:48:40.517
> 
> 标签：sorting, sql-server-2008-r2, grouping

假设我在 SQL Server 2008 R2 中有一个`Purchase`用两列调用的表：`Purchaser`和 `Expenditure`.

假设该表具有以下行：

```
Purchaser    Expenditure
---------    -----------
Alex         200
Alex         300
Alex         500
Bob          300
Bob          400
Charlie      200
Charlie      600
Derek        100
Derek        300 
```

现在我有这个查询：

`SELECT Purchaser, Expenditure, SUM(Expenditure) AS SumExpenditure FROM Purchase GROUP BY Purchaser, Expenditure WITH ROLLUP`

这将返回以下内容：

```
Purchaser    Expenditure    SumExpenditure
---------    -----------    --------------
Alex         200            200
Alex         300            300
Alex         500            500
--------------------------------
Alex         NULL           1000
--------------------------------
Bob          300            300
Bob          400            400
--------------------------------
Bob          NULL           700
--------------------------------
Charlie      200            200
Charlie      600            600
--------------------------------
Charlie      NULL           800
--------------------------------
Derek        100            100
Derek        300            300
--------------------------------
Derek        NULL           400
-------------------------------- 
```

（添加线条以强调汇总的金额。）

我希望能够按分组数量对组进行排序，以便最终得到如下结果集：

```
Purchaser    Expenditure    SumExpenditure
---------    -----------    --------------
Derek        100            100
Derek        300            300
--------------------------------
Derek        NULL           400
--------------------------------
Bob          300            300
Bob          400            400
--------------------------------
Bob          NULL           700
--------------------------------
Charlie      200            200
Charlie      600            600
--------------------------------
Charlie      NULL           800
--------------------------------
Alex         200            200
Alex         300            300
Alex         500            500
--------------------------------
Alex         NULL           1000
-------------------------------- 
```

换句话说，我正在对组进行排序，使用,`400`和在组行中按升序排列。`700``800``1000`

谁能建议什么查询会返回这个结果集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:21:31.527

```
;WITH x AS 
(
    SELECT Purchaser, Expenditure, s = SUM(Expenditure) 
    FROM dbo.Purchase 
    GROUP BY Purchaser, Expenditure WITH ROLLUP
),
y AS 
(
    SELECT Purchaser, s FROM x 
    WHERE Expenditure IS NULL
    AND Purchaser IS NOT NULL
),
z AS 
(
    SELECT Purchaser, s, rn = ROW_NUMBER() OVER (ORDER BY s)
    FROM y
)
SELECT x.Purchaser, x.Expenditure, x.s FROM x 
INNER JOIN z ON x.Purchaser = z.Purchaser
ORDER BY z.rn, CASE WHEN z.s IS NULL THEN 2 ELSE 1 END; 
```

# javascript - 更新的输入字段值未在 Webkit 中显示

> ID：10434879
> 
> 赞同：1
> 
> 时间：2012-05-03T15:49:12.163
> 
> 标签：javascript, dom, blackberry, browser, webkit

这个问题让我非常困惑，所以欢迎任何见解。

我正在尝试在 javascript 中创建一个输入掩码。输入的格式必须为 AA1111（其中 A=大写字母，1=数字）。本网站设计用于黑莓浏览器 (OS6 Webkit)。

我正在使用 onkeyup 事件触发一些 javascript，这将重写输入的内容。

```
<script>
function checkInput(x) {

    var y = document.getElementById(x).value;
    var c = y.slice(-1);
    var n = "";
    if (y.length < 3) n = c.toUpperCase();
    else if (y.length < 7) n = convertToNum(c.toUpperCase());

    document.getElementById(x).value = y.slice(0, y.length - 1) + n;
} 
```

```
Input:<input  type="text" id="search" class="big" OnKeyUp="checkInput(this.id);" autofocus="true" /> 
```

在 Firefox 和 IE 中，这可以按预期工作，但在 Blackberry（以及 Chrome）上，输入字段并不**总是**使用正确的字母和数字进行更新。它似乎在第一次加载时工作，然后在第一次刷新后停止。在 DOM 不工作时检查它表明 .value 属性**已**正确更新，但是这不会显示在浏览器窗口中。

我在这里设置了一个示例[http://aspspider.info/jessop](http://aspspider.info/jessop) 来说明我正在尝试做的事情。如果您在 webkit 浏览器中尝试此操作（最好是在 OS6 Blackberry 上！）那么希望您会看到我的问题。

这是 Webkit 中的错误还是我做错了什么？任何解决方法的想法？

非常感谢。

# jquery - 了解 .bind() JQuery

> ID：10434897
> 
> 赞同：2
> 
> 时间：2012-05-03T15:49:46.000
> 
> 标签：jquery

我正在使用此功能禁用超链接，但我不太了解该功能的真正作用，我的疑问是下一个，我有这个功能：

```
function bindPrevent(e)
 {
    e.preventDefault();
    return false;
 } 
```

当用户单击链接时，我会这样做：

```
function disableButton(f)
{
     if(f)
     {
    $('.btnOk[id!="link_lkDelete"]').each(function(){
            $(this).bind("click",bindPrevent);
        });
     }
     else
     {
    $('.btnOk[id!="link_lkDelete"]').each(function(){
            $(this).unbind("click",bindPrevent);

        });
      }
 } 
```

问题是，如果链接有另一个点击处理程序，并且我绑定了一个新的处理程序，那么调用哪个处理程序？？JQ 使用类似处理程序堆栈的东西并执行最上面的处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:56:27.913

> 问题是，如果链接有另一个点击处理程序，并且我绑定了一个新的处理程序，那么调用哪个处理程序？？JQ 使用类似处理程序堆栈的东西并执行最上面的处理程序？

简短的回答是它们都被调用。他们将按照分配的顺序被调用。

在皮下，jQuery 简单地使用 javascripts 的默认事件附加机制，并稍加调整以确保它在所有浏览器中都能正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:59:15.713

jquery 执行与事件相关的所有处理程序。

这是一个非常好的解释[http://jqfundamentals.com/#chapter-5](http://jqfundamentals.com/#chapter-5)

通过使用 preventDefault 您正在阻止事件执行其默认操作，在这种情况下，遵循超链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T16:03:59.773

首先，我建议使用 .on() 而不是 .bind()，因为 .on 旨在替换所有绑定方法（bind、live 等）

据我所知，bind 的作用是监视一个事件（例如“click”或“mouseenter”），然后在它发生时执行附加到它的任何函数。

此外，如果您使用 return false; 你不应该需要 preventDefault(); 因为 return false 既充当 preventDefault 又充当 stopPropagation。

您也可以将以上内容写为：

```
function disableButton(f)
{
     if(f)
$('.btnOk[id!="link_lkDelete"]').click(function(){
            return false;
        });
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T16:04:07.860

就像其他人所说的那样，两个处理程序都将被调用。这是一个说明它 的[小提琴。](http://jsfiddle.net/azizpunjani/JXht6/)

# constants - glsl 编译时除法 const

> ID：10434903
> 
> 赞同：3
> 
> 时间：2012-05-03T15:49:53.833
> 
> 标签：constants, glsl

此 GLSL 代码会从“oneSixth”和“twoThirds”创建编译时常量吗？

```
// GLSL TESSELLATION EVALUATION SHADER
#version 410

layout (isolines, equal_spacing) in;
in vec4 tessColor[];
out vec4 pointColor;

const float oneSixth = 1\. / 6.;
const float twoThirds = 2\. / 3.;

void main ()
{
    float s2 = gl_TessCoord.s * gl_TessCoord.s;
    float s3 = s2 * gl_TessCoord.s;
    float w0 = oneSixth - .5 * gl_TessCoord.s + .5 * s2 - oneSixth * s3;
    float w1 = twoThirds - s2 + .5 * s3;
    float w2 = oneSixth + .5 * gl_TessCoord.s + .5 * s2 - .5 * s3;
    float w3 = oneSixth * s3;

    gl_Position = w0 * gl_in[0].gl_Position + w1 * gl_in[1].gl_Position +
            w2 * gl_in[2].gl_Position + w3 * gl_in[3].gl_Position;
    pointColor = w0 * tessColor[0] + w1 * tessColor[1] +
            w2 * tessColor[2] + w3 * tessColor[3];
} 
```

我的一位同事认为这段代码效率低下，并说我应该对分区进行硬编码，否则它将在运行时发生。

```
const float oneSixth = .1666666667;
const float twoThirds = .6666666667; 
```

我是 GLSL 的新手，但我怀疑这是必要的。有什么想法吗？它依赖于供应商吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:52:24.993

它会在编译时发生。不需要硬编码这样的琐事。但是，GLSL 规范中没有提到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:06:44.897

如有疑问，请测量，但我会考虑在编译时未执行此操作的任何实现都已损坏。

# jquery-ui - 拖动元素而不移动鼠标时滚动div

> ID：10434906
> 
> 赞同：4
> 
> 时间：2012-05-03T15:50:02.973
> 
> 标签：jquery-ui, drag-and-drop, scroll, draggable

我开发了一个代码，其中包括一个表格，其所有单元格都是可放置的。表格容器是具有固定高度和滚动条的 div。

我想将一个元素（在我的示例中为黄色方块）拖到表格底部的最后一个表格单元格中。一切正常，但是要在拖动元素时激活 div 容器的滚动条，**我必须一直移动鼠标**。

**当我的元素在我的 div 容器底部附近拖动而不移动鼠标时，是否有可能自动向下滚动？**

这是我的例子：http: [//jsbin.com/upunek/19/edit](http://jsbin.com/upunek/19/edit)

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T11:55:19.550

我今天早上想通了。

**当拖动事件**位置位于边框的 70px时，我创建了`setInterval`函数

 **这是我制作的小提琴：http: [//jsfiddle.net/pPn3v/22/](http://jsfiddle.net/pPn3v/22/)

```
var yellow = $('#yellow');
var offset = yellow.offset();
var offsetWidth = offset.left + yellow.width();
var offsetHeight = offset.top + yellow.height();

var red = $('#red');

var intRightHandler = null;
var intLeftHandler = null;
var intTopHandler= null;
var intBottomHandler= null;
var distance = 70;
var timer = 100;
var step = 10;

function clearInetervals()
{
    clearInterval(intRightHandler);
    clearInterval(intLeftHandler);
    clearInterval(intTopHandler);
    clearInterval(intBottomHandler);    
}

red.draggable({
    start : function(){},
    stop: function(){clearInetervals(); },    
    drag : function(e){
        var isMoving = false;        
        //Left
        if((e.pageX - offset.left) <= distance)
        {
            isMoving = true;
            clearInetervals();            
            intLeftHandler= setInterval(function(){
                yellow.scrollLeft(yellow.scrollLeft() - step)
            },timer);
            console.log('left')
        }

        //Right
        if(e.pageX >= (offsetWidth - distance))
        {
            isMoving = true;
            clearInetervals();            
            intRightHandler = setInterval(function(){
                yellow.scrollLeft(yellow.scrollLeft() + step)
            },timer);
            console.log('right')
        }

        //Top
        if((e.pageY - offset.top) <= distance)
        {
            isMoving = true;
            clearInetervals();            
            intTopHandler= setInterval(function(){
                yellow.scrollTop(yellow.scrollTop() - step)
            },timer);
            console.log('top')
        }                          

        //Bottom
        if(e.pageY >= (offsetHeight - distance))
        {
            isMoving = true;
            clearInetervals();            
            intBottomHandler= setInterval(function(){
                yellow.scrollTop(yellow.scrollTop() + step)
            },timer);
            console.log('bottom')
        }     

        //No events
        if(!isMoving)
           clearInetervals();  
    }
}); 
```

​</p>**

# excel - 在打开我的查询的 Excel 工作簿中进行更改

> ID：10434910
> 
> 赞同：1
> 
> 时间：2012-05-03T15:50:20.333
> 
> 标签：excel

我是 TFS2010 用户。

我有自己的查询，名为“我当前的工作”，它向我展示了我现在必须做的用户故事和相关任务。

我已经在 excel 中打开了查询，并对工作簿进行了条件格式，以绿色显示已完成工作项的行。

有什么方法可以使这种条件格式（以及其他类似的更改）永久用于该查询？

我不是 teamproject 的唯一一个用户，所以我建议不要更改任何可能影响其他用户的东西，除非这是唯一的方法。

目前我已经完成了这项工作的 excel 宏，但我想知道它是否可以直接在 TFS 中完成。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:11:40.937

这应该可以通过使用任何 Excel 文档上的“团队”功能区来实现，只需单击任何单元格，然后选择“新列表”。
导航到您感兴趣的查询并在工作表中收集结果：

![在此处输入图像描述](../Images/2f957954dd1fb39e9b7245530b6c0282.png)

一旦您建立此链接，“发布”会将您的更改从 Excel 推送到 TFS，“刷新”将从 TFS 刷新您的结果

# php - 在 PHP 中访问大数组

> ID：10434913
> 
> 赞同：18
> 
> 时间：2012-05-03T15:50:21.673
> 
> 标签：php, arrays, performance

我一直在对 PHP 中访问大型（ish）数据数组的不同方法进行一些分析。用例非常简单：我们的一些工具将数据作为关联数组输出到 PHP 文件中，这些文件被应用程序视为静态数据。我们制作游戏，因此数据文件的一些示例将包括目录中的项目、用户必须完成的任务或地图的定义：

```
<?php
$some_data = array(
    ...lots and lots of stuff in here...
);
?> 
```

由于这些数组非常大（400K），而且我们的大部分代码都对这些数据感兴趣，因此有必要尽可能高效地访问这些数据。我决定使用 3 种不同的模式来执行此操作。在介绍了这些方法之后，我将在下面分享我的结果。

我正在寻找的是对这些方法及其时机以及任何其他尝试方法的基于经验的验证。

## 方法一：getter 函数

在该方法中，导出器实际上创建了一个如下所示的文件：

```
<?php
function getSomeData()
{
    $some_data = array(
        ...lots and lots of stuff here...
    );
    return $some_data;
}
?> 
```

然后，客户端代码可以在需要时通过简单地调用 getSomeData() 来获取数据。

## 方法#2：全局+包含

在这种方法中，数据文件看起来与上面的原始代码块相同，但是客户端代码必须跳过几圈才能将数据放入本地范围。这假设数组在一个名为“some_data.php”的文件中；

```
global $some_data; //must be the same name as the variable in the data file...
include 'some_data.php'; 
```

这会将 $some_data 数组带入范围，尽管对于客户端代码来说有点麻烦（我认为）。

## 方法#3：通过引用获取

此方法与方法#1 几乎相同，但是 getter 函数不返回值，而是设置对数据的引用。

```
<?php
function getSomeDataByRef($some_data)
{
    $some_data = array(
        ...lots and lots of stuff here...
    );
    return $some_data;
}
?> 
```

然后，客户端代码通过声明一个局部变量（称为任何东西）并通过引用将其传递给 getter 来检索数据：

```
$some_data_anyname = array();
getSomeDataByRef(&$some_data_anyname); 
```

## 结果

所以我运行了一个小脚本，运行这些方法中的每一种检索数据 1000 次，并平均运行时间（在开始和结束时由 microtime(true) 计算）。以下是我的结果（以毫秒为单位，在 MacBookPro 2GHz、8GB RAM、PHP 版本 5.3.4 上运行）：

### 方法#1：

> 平均：0.0031637034416199 最大值：0.0043289661407471 最小值：0.0025908946990967

### 方法#2：

> 平均值：0.01434082698822 最大值：0.018275022506714 最小值：0.012722969055176

### 方法#3：

> 平均：0.00335768699646 最大值：0.0043489933013916 最小值：0.0029017925262451

无论如何，从这些数据来看，似乎很清楚 global+include 方法不如其他两个方法，这是“可以忽略不计”的差异。

想法？我完全错过了什么吗？（大概...）

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T15:54:25.520

不确定这是否正是您想要的，但它应该有助于解决速度和内存问题。您可以使用固定的 spl 数组：

```
$startMemory = memory_get_usage();
$array = new SplFixedArray(100000);
for ($i = 0; $i < 100000; ++$i) {
    $array[$i] = $i;
}
echo memory_get_usage() - $startMemory, ' bytes'; 
```

在此处阅读有关大型 php 数组的更多信息：http: [//nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)

您是否还考虑过将数据存储在缓存/内存中？例如，您可以在第一次执行时将 mysqlite 与内存引擎一起使用，然后从那里访问数据：

```
$pdo = new PDO('sqlite::memory:');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
// .. Use PDO as normal 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-27T15:40:52.383

对于我的一个不能选择数据库的项目，我遇到了加载包含内存数组的大（我的意思是一系列 3 MB 文件）php 文件的相同问题，我正在寻找最大化性能的选项。我发现了一个非常简单的方法，它在第一次使用时将这些文件作为 json 缓存在磁盘上。我将加载时间除以 3，并将内存峰值消耗除以 30%。使用 json_decode() 加载本地 json 文件比包含一个包含数组的大 php 文件要快得多。它还具有成为大多数语言可以直接操作的格式的优点。希望有帮助。

# charts - Google Visualization 会将您的数据发送给 Google 吗？

> ID：10434919
> 
> 赞同：4
> 
> 时间：2012-05-03T15:50:39.740
> 
> 标签：charts, visualization

Google Visualization 在创建图表时是否会将您的数据（x 和 y 值和标签）发送回 Google？还是它在客户端使用 Javascript 创建图表？我的意思是用这个命令加载的 HTML5 Google API

```
google.load('visualization', '1.0', {'packages':['corechart']}); 
```

（[https://developers.google.com/chart/interactive/docs/quick_start](https://developers.google.com/chart/interactive/docs/quick_start)），而不是创建图像的旧 Chart API。

我担心我的数据的安全性，这是我只想在我们的 Intranet 上呈现的内部公司数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:55:40.777

[https://developers.google.com/chart/interactive/docs/security_privacy](https://developers.google.com/chart/interactive/docs/security_privacy)

他们声称数据只保留很短的时间用于调试目的，然后被删除。但是，如果这是 HIPA 或 SEC 法规下受法律保护的数据，则不太可能足够好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:17:17.547

进一步阅读后，我在 Google 上发现这些说对于许多图表，没有数据发送到 Google（甚至您自己的服务器）。

“所有 Google 创作的图表在开发时都考虑到了隐私和安全因素。所有 Google 图表文档页面都包含一个数据政策部分，该部分描述图表是否从页面发送任何图表数据。”

折线图：所有代码和数据都在浏览器中处理和呈现。没有数据发送到任何服务器。 [https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Data_Policy](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Data_Policy)

散点图 - 相同的面积图 - 相同

# mercurial - 这是正确的吗？使用 TortoiseHg 在 Mercurial 中的稳定分支和默认分支之间合并

> ID：10434921
> 
> 赞同：8
> 
> 时间：2012-05-03T15:50:47.563
> 
> 标签：mercurial, tortoisehg

我是 Mercurial 的新手，我使用的是稳定/默认分支系统。我们都在 Windows 上，我正在努力让其他人在这个系统中工作。我们都在使用 TortoiseHg。我正在尝试记录如何将更改合并到稳定版本和标签版本中，但我只使用 Mercurial 大约三周，所以我什至不确定我是否正确执行此操作。此外，TortoiseHg 似乎缺少一些命令行可用的选项。但是，我需要在 Windows shell 中完成这项工作，否则它不会在这里被采用。

我们所有的编程工作都是默认完成的，稳定分支仅用于软件的发布。让我相信我做错了什么的一件事是，每次合并后，我都必须重新制作稳定的分支。这正常吗？似乎违反直觉。

下面是我写的过程。请随时指出我的白痴或提出任何问题。并提前感谢您的任何评论。

在我的笔记本电脑上，每个项目都有两个目录。devel 目录存储默认分支的克隆，

================

合并分支并创建稳定版本 TortoiseHg

-- 在开发存储库中提交。

-- 打开devel本地目录。

-- 启动 HgWorkbench。

-- 单击稳定分支的最新稳定版本。

-- 选择与本地合并...

-- 同步并推送更改到远程存储库。

-- 转到本地稳定存储库。

-- 从远程存储库同步和拉取。

-- 更新到最新的默认分支。选择“更新到提示”应该是最好的。

-- TortoiseHg -> 提交。致力于分支“稳定”。您需要重新创建一个新分支。当它询问时，选择“重新启动分支”。

-- 打开 HgWorkbench 并为最新的稳定版本添加标签。示例“版本 XX”

-- 同步并推送到远程仓库。使用“同步”对话框中的“选项”按钮调出“同步选项”对话框。在标有“分支”的底部字段中，输入“稳定”

-- 返回本地“devel”存储库。

-- 从远程存储库同步和拉取。使用“同步”对话框中的“选项”按钮调出“同步选项”对话框。在标有“分支”的底部字段中，确保该字段为空白。否则，它将默认为“稳定”分支。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T16:55:57.830

第二个克隆不需要实现你想要的，我认为它在不需要的地方增加了复杂性。

这就是我要做的：

1.  拥有存储库的单个克隆
2.  在`default`分支中提交
3.  开始`HgWorkbench`
4.  右键单击`stable`分支上的最新变更集
5.  `Update...`在弹出菜单中选择并`Update`在弹出窗口中按下按钮（使用默认选项）
6.  右键单击`default`分支中的最新变更集
7.  选择`Merge with local...`
8.  如果工作目录状态显示为干净（应该是），则单击`Next`按钮
9.  如果没有合并冲突（同样，如果您不进行开发，则不应该存在`stable`）再次单击该`Next`按钮
10.  输入提交消息并单击`Commit`按钮并按下`Finish`下一步
11.  右键单击`stable`分支中的最后一个变更集并选择`Tag...`，输入标签名称并按下`Add`按钮。
12.  右键单击`default`分支中的最后一个变更集，然后`Update...`再次选择使用默认选项

您现在已经有了一个标记的`stable`分支，并回到`default`分支上继续开发。当您准备好发布新`stable`版本时，请从第 3 步开始重复上述步骤。

# css - 将一页分成 8 个完美的流体列？

> ID：10434923
> 
> 赞同：1
> 
> 时间：2012-05-03T15:50:54.530
> 
> 标签：css, less, fluid-layout

所以我试图将一个页面（实际上只是一个页脚）分成 8 个相等的流体列（我的目标是 6 个），我认为我能做到的唯一方法是使用百分比。

我为每个列设置了一个百分比`width: 12.5%;`（实际上是一些链接设置为`display: block; float: left;`），它应该可以工作，但它没有。我的意思是列或链接应该在页面中平均划分，但那里仍然有一些空间，大约`100px`（我的屏幕有`1366px`宽度）。

那么我该怎么办呢？如何划分链接/列是 8 个（最好是 6 个）相等的流体列？

```
<footer>
    <div class="footer-jigsaw"></div>
    <div class="footer-wrapper">
        <nav class="navigation">
            <a href=""></a>
            <a href=""></a>
            <a href=""></a>
            <a href=""></a>
            <a href=""></a>
            <a href=""></a>
        </nav>
    </div>
</footer>

footer {
    position:absolute;
    bottom:0;
    left:0;
    width:100%;
    height:50px;
    background-image:url(../gfx/background-light.png);
    background-position:center center;
    background-repeat:repeat;
    -webkit-opacity:0;
    -moz-opacity:0;
    opacity:0;
    filter:alpha(opacity=0);
}

footer .footer-jigsaw {
    position:absolute;
    top:0;
    width:100%;
    height:10px;
    background-image:url(../gfx/footer.png);
    background-position:0 center;
    background-repeat:repeat-x;
    z-index:5;
}

footer .footer-wrapper {
    position:relative;
    margin:0 auto;
    width:100%;
    height:50px;
}

footer .footer-wrapper .navigation {
    position:relative;
    margin:0 auto;
    width:100%;
    height:50px;
}

footer .footer-wrapper .navigation a {
    position:relative;
    float:left;
    display:block;
    cursor:pointer;
    width:12.5%;
    height:50px;
    padding-top:0;
    padding-left:10px;
    padding-right:10px;
    padding-bottom:0;
    font-family:good-times-bad-times;
    font-size:inherit;
    font-style:normal;
    font-weight:400;
    font-variant:normal;
    text-align:center;
    text-decoration:none;
    text-shadow:none;
    text-indent:inherit;
    text-transform:none;
    word-spacing:normal;
    line-height:58px;
    letter-spacing:normal;
    color:#fff;
    -webkit-transition:all .35s ease-in-out;
    -moz-transition:all .35s ease-in-out;
    -ms-transition:all .35s ease-in-out;
    -o-transition:all .35s ease-in-out;
    transition:all .35s ease-in-out;
}

footer .footer-wrapper .navigation a:first-child {
    border:none;
}

footer .footer-wrapper .navigation a:last-child {
    border:none;
}

footer .footer-wrapper .navigation a.jp-current {
    background-color:rgba(0,0,0,0.2);
    font-family:good-times-bad-times;
    font-size:inherit;
    font-style:normal;
    font-weight:400;
    font-variant:normal;
    text-align:center;
    text-decoration:none;
    text-shadow:none;
    text-indent:inherit;
    text-transform:none;
    word-spacing:normal;
    line-height:58px;
    letter-spacing:normal;
    color:#00b8f0;
}

footer .footer-wrapper .navigation a.jp-current:hover {
    background-color:rgba(0,0,0,0.2);
    font-family:good-times-bad-times;
    font-size:inherit;
    font-style:normal;
    font-weight:400;
    font-variant:normal;
    text-align:center;
    text-decoration:none;
    text-shadow:none;
    text-indent:inherit;
    text-transform:none;
    word-spacing:normal;
    line-height:58px;
    letter-spacing:normal;
    color:#00b8f0;
}

footer .footer-wrapper .navigation a:hover {
    background-color:rgba(0,0,0,0.2);
    font-family:good-times-bad-times;
    font-size:inherit;
    font-style:normal;
    font-weight:400;
    font-variant:normal;
    text-align:center;
    text-decoration:none;
    text-shadow:none;
    text-indent:inherit;
    text-transform:none;
    word-spacing:normal;
    line-height:58px;
    letter-spacing:normal;
    color:#00b8f0;
} 
```

以上是所有 CSS 的一部分，但我正在尝试做我刚才提到的事情。

**已解决的问题：块中添加了额外的填充；**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:18:39.820

> 不，我根本不会为 IE 提供支持

极好的。在这种情况下，您可以使用`display: table`(IE7 中不支持) 和`table-layout: fixed`([以确保](http://www.w3.org/TR/CSS2/tables.html#fixed-table-layout)列宽相等)。

自动支持任意数量的列，作为奖励，您可以免费获得等高的列。

这是您的 HTML 的演示：http: [//jsfiddle.net/thirtydot/KusjP/](http://jsfiddle.net/thirtydot/KusjP/)

```
.navigation {
    display: table;
    table-layout: fixed;
    width: 100%;
}
.navigation > a {
    display: table-cell;
    border: 1px solid #444;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:12:03.900

吻

[http://jsfiddle.net/QjsSA/1/](http://jsfiddle.net/QjsSA/1/)

使用他的原始代码：http: [//jsfiddle.net/QjsSA/2/](http://jsfiddle.net/QjsSA/2/)

```
<footer>
    <div class="footer-jigsaw"></div>
    <div class="footer-wrapper">
        <nav class="navigation">
            <a href="">Fluid Column Fluid Column Fluid Column Fluid Column Fluid Column</a>
            <a href="">Fluid Column</a>
            <a href="">Fluid Column Fluid Column Fluid Column Fluid Column</a>
            <a href="">Fluid Column</a>
            <a href="">Fluid Column Fluid Column Fluid Column</a>
            <a href="">Fluid Column</a>
        </nav>
    </div>
</footer> 
```

CSS

```
.navigation {
    overflow: auto;
    background: gray;   
}

.navigation a {
    width: 16.6%;
    float: left;
    display: block;
    border-bottom: 1px solid black;
}
​ 
```

​</p>

# actionscript-3 - 如何通过单击来控制蒙面的滚动窗格

> ID：10434925
> 
> 赞同：0
> 
> 时间：2012-05-03T15:51:01.430
> 
> 标签：actionscript-3, scroll

我有一点问题。我想创建这样的东西，但垂直而不是水平。我还想通过单击向上/向下按钮而不是滚动来控制滑块。

参考：[http ://active.tutsplus.com/tutorials/effects/create-a-responsive-xml-image-scroller-in-actionscript-3-0/](http://active.tutsplus.com/tutorials/effects/create-a-responsive-xml-image-scroller-in-actionscript-3-0/)

现在我有一个容器 mc 可以容纳我所有的拇指和一个遮盖该容器的面具。我也有我的按钮来触发这个向上/向下滚动功能。

我完全不知道如何为此编写函数。我已经使容器上下补间，但我需要一个限制，所以它希望补间到远处并超出界限。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:45:01.620

首先，为了防止遮罩随内容移动，请确保它与您的内容处于同一水平。

例如：

```
myContainer ¬
   - contentBox
   - maskShape 
```

和`contentBox.mask = maskShape`。

对于滚动，只需每次单击导航按钮时增加或减少 contentBox 的位置。

在向下按钮的情况下，在您的事件侦听器上，您会执行类似...

```
contentBox.y = contentBox.y + 25; 
```

当然，我们希望它顺利滑过，所以在[TweenLite](http://www.greensock.com/tweenlite/)的情况下......

```
TweenLite.to(contentBox, 0.5, {y:contentBox.y + 25}); 
```

“向上”按钮与此相反。

# jqplot - jqPlot - 当有很多图例项时，饼图图例太高了

> ID：10434927
> 
> 赞同：5
> 
> 时间：2012-05-03T15:51:11.023
> 
> 标签：jqplot

我正在使用 jqPlot 创建一个带有图例的饼图。我的 jqPlot 饼图选项的一部分如下所示：

```
seriesDefaults: {
    renderer: $.jqplot.PieRenderer,
    rendererOptions: {
        padding: 10,
        showDataLabels: true,
        dataLabelFormatString: '%.2f%%',
        sliceMargin: 2,
        startAngle: -90
    }
},
legend: {
    show: true,
    location: 'e',
    placement: 'outside',
    xoffset: 1,
    fontSize: '11px',
    rowSpacing: '10px',
    textColor: '#222222',
    fontFamily: 'Lucida Grande, Lucida Sans, Arial, sans-serif'
} 
```

最近我遇到了一个案例，其中有很多图例项目（例如，21），这使得我的图例框太高了。我想知道是否有办法

1.  在图例框中有一个垂直滚动条
2.  在多列中显示图例项（首选）

我尝试设置以下属性：

*   numberRows
*   数字列

我从这个页面找到的：

[$.jqplot.PieRenderer 选项](http://www.jqplot.com/docs/files/plugins/jqplot-pieRenderer-js.html#$.jqplot.PieLegendRenderer.numberRows)

但是他们似乎没有做出任何改变。

有人可以为我提供一个很好的解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T11:10:20.433

尝试使用提供的列/行设置。我亲自仔细检查了此设置是否有效。只需确保在图例中设置了`numberColumns`or `numberRows`inside `rendererOptions`，例如：

```
legend: { 
  show: true, 
  location: 'ne',
  rendererOptions: {numberColumns: 2}
} 
```

如果这不起作用，那么我必须说您的代码中一定隐藏了一些其他错误，然后让我们查看代码，以便我们一起找到并压缩错误:)

# java - 休眠xml文件问题

> ID：10434929
> 
> 赞同：2
> 
> 时间：2012-05-03T15:51:14.043
> 
> 标签：java, mysql, xml, hibernate, tapestry

我已经建立了 Tapestry 5 项目并且一切都很好，直到我部署了 Hibernate。我创建了 hibernate.xml 文件和

```
<hibernate-configuration>
<session-factory>

    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost/project</property>
    <property name="connection.username">root</property>
    <property name="connection.password">password12</property>
    <property name="connection.pool_size">5</property>

    <!-- Print SQL to stdout. -->
    <property name="show_sql">true</property>
    <property name="format_sql">true</property>
    <property name="use_sql_comments">true</property>
    <property name="generate_statistics">true</property>
            <property name="hibernate.archive.autodetection">class, hbm</property>

    <property name="hibernate.transaction.flush_before_completion">true</property>

    <!-- Mapping files TODO: Classify those mappings in exact order and define the relations between them in entities some time later on.-->
            <mapping class="rs.project.com.entities.Fruit"/>
            <mapping class="rs.project.com.entities.Article"/>

</session-factory> 
```

就其实施而言，它是可以的。但是，当我部署应用程序时，它为我定义了一些其他配置，可以在我的跟踪日志中看到，并使用其他一些 xml 文件，基于它在日志上显示的映射，它是关于我使用的一些完全不同的项目前一阵子。问题是我看不出是什么导致了这种行为，我真的很沮丧。我正在为休眠使用 Tomcat Apache Catalina 和 MySQL。另外，我做了一些研究，发现我的 project.properties 中使用了persistance.xml 文件，这有点奇怪。

```
 persistence.xml.dir=${conf.dir} 
```

将我的应用程序连接到 MySQL 的驱动程序是 jdbc.mysql.driver。所以我的目标是可能在这里与您一起定义导致这种行为的问题，并解决它。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:12:27.863

如果您的 tomcat 日志引用了不同的项目，那么您的上下文声明可能不正确？

检查您的 contexts 目录（对我来说是`$Tomcat_home\conf\Catalina\localhost`）或 Server.xml（如果您正在使用它）。确保上下文目录中的上下文文件指向正确的目录/项目。当以前的项目与我当前的项目具有相同的上下文名称时，这个错误发生在我身上。

# javascript - 当实际页面由 localhost 服务器提供时，如何使用 socket.io 与另一台服务器通信？

> ID：10434933
> 
> 赞同：9
> 
> 时间：2012-05-03T15:51:19.333
> 
> 标签：javascript, html, node.js, socket.io

我通过 localhost（XAMPP、Apache）为我的页面提供服务，在我朋友的物理服务器上，我运行了一个 node.js 服务器，用于与页面（游戏）进行通信。

这是 node.js 服务器代码：

```
var io = require('socket.io').listen(1235);

io.sockets.on('connection', function (socket)
{
    socket.on("start", function (data)
    {
        console.log(data);
    });
}); 
```

它运行没有任何错误，但我不知道如何将 socket.io 代码包含到我的网页中！我怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-03T16:00:38.880

在您的页面中包含一个脚本标签：

```
<script src="http://[YOUR IP]:1235/socket.io/socket.io.js"> 
```

它将由您的 node.js 服务器提供服务。

除此之外，您可以按照[socket.io](http://socket.io/)上的示例进行操作，例如：

```
var socket = io.connect("http://[YOUR IP]:1235");

socket.emit("start", "LET'S GO!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:03:05.070

2 选项。根据文档，您可以执行指向节点服务器的 JavaScript src：

```
<script src="http://url.to.node.com/socket.io/socket.io.js"></script> 
```

[或者您可以手动包含它，从https://github.com/LearnBoost/socket.io-client/blob/master/dist/socket.io.js](https://github.com/LearnBoost/socket.io-client/blob/master/dist/socket.io.js)的 Git 存储库中获取它

# c# - 需要更好地理解 FakeHttpContext

> ID：10434935
> 
> 赞同：0
> 
> 时间：2012-05-03T15:51:22.470
> 
> 标签：c#, asp.net-mvc, tdd, moq

我一直在查看[hanselman 的](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx)文章，我想真正深入了解以下代码的工作原理。它看起来像泛型和扩展方法？我应该熟悉哪些其他主题才能真正理解以下代码。为了理解文章中提到的整个代码库，我需要知道什么类型的主题（如泛型、扩展方法？？？）。谢谢

```
 public static HttpContextBase FakeHttpContext()
    {
        var context = new Mock<HttpContextBase>();
        var request = new Mock<HttpRequestBase>();
        var response = new Mock<HttpResponseBase>();
        var session = new Mock<HttpSessionStateBase>();
        var server = new Mock<HttpServerUtilityBase>();

        context.Setup(ctx => ctx.Request).Returns(request.Object);
        context.Setup(ctx => ctx.Response).Returns(response.Object);
        context.Setup(ctx => ctx.Session).Returns(session.Object);
        context.Setup(ctx => ctx.Server).Returns(server.Object);

        return context.Object;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:09:05.720

那篇文章中有很多好东西，但很难知道如何回答你的问题。正如你所说，使用了[泛型](http://msdn.microsoft.com/en-us/library/ms172192.aspx)、[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)、[lambda表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)，在幕后肯定会在那个模拟库( [moq )中进行一些](http://code.google.com/p/moq/)[反思](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.71%29.aspx)，当你开始写作时，你肯定会在某个时候遇到[linq](http://msdn.microsoft.com/en-us/library/bb308959.aspx)扩展。测试。所以所有这些可能都值得一读。

这篇文章最终都是关于单元测试的，所以了解什么是单元测试，为什么它是好的等等会很有用——[实用单元测试](http://pragprog.com/book/utc2/pragmatic-unit-testing-in-c-with-nunit)是一本很好的书作为对该主题的介绍。然后是整个[测试驱动的开发](http://en.wikipedia.org/wiki/Test-driven_development)方法，您首先编写测试并在进行过程中对其进行修复，以便您也可以阅读它（尽管我会说只是尝试一下，看看您是如何进行的）。

所以，试试吧，使用它，找点乐子，你会学到你需要知道的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:06:06.487

它还使用 lambda 表达式。

如果你不知道，他正在使用一个名为 Moq 的模拟库，所以你也应该去它的[主页](http://code.google.com/p/moq/)阅读更多关于它的信息。

# forms - Commonspot 表单隐藏字段值

> ID：10434936
> 
> 赞同：-1
> 
> 时间：2012-05-03T15:51:22.767
> 
> 标签：forms, coldfusion, commonspot

我在 commonspot 有一个表单，它使用隐藏字段将信息传递给下一个表单，它是从以前的表单中获取的，但我不确定隐藏字段的默认值的语法。我试过使用`form.fieldname`,`evaluate(form.fieldname)`和`#form.filedname#`.

谁能帮我这个 ？

谢谢，AA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:00:42.840

Ardash - 您应该粘贴一些实际代码以帮助我们理解您的意思。

通常，如果您想要一个“默认”值（对于该项目以前不存在的情况），您应该像这样使用 cfparam：

```
<cfparam name="form.myField" default="*some default value*"/> 
```

然后在您的隐藏字段中，您可以安全地执行此操作：

```
<input type="hidden" name="myField" value="<cfoutput>#form.myField#</cfoutput>"/> 
```

希望这可以帮助。粘贴一些代码以获得更好的响应:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:14:52.687

您可以使用此方法列出提交到页面的字段名称：

```
<cfoutput>#form.fieldnames#</cfoutput> 
```

或者，您可以获取字段名称和数据：

```
<cfdump var="#form#"> 
```

这可能会帮助您弄清楚发生了什么。

# sorting - Prolog 简单排序

> ID：10434938
> 
> 赞同：0
> 
> 时间：2012-05-03T15:51:24.010
> 
> 标签：sorting, prolog, structure

在 Prolog 中，我现在拥有的是，

```
:-dynamic listofPeople/2.
listofPeople(Mark,Name). 
```

它基本上包含每个学生的分数。

我想打印最好的 3 分。

为此，我相信我必须进行排序。如果我进行排序，我将失去学生姓名的顺序。

默认情况下，您可以理解，我想要的只是对标记进行排序，并根据标记对名称进行排序。

请帮忙。代码片段赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:33:56.770

您可以从创建键值对列表开始，对其进行排序并打印前 3 个等级。

```
go(G1,G2,G3) :- findall(Grade-Name, listofPeople(Grade,Name), List), 
                 keysort(List, [G1-_,G2-_,G3-_|SortedList]). 
```

如果您的成绩少于三个，则谓词失败。

如果除了成绩之外，您还想拥有姓名：

```
go(N1-G1,N2-G2,N3-G3) :- findall(Grade-Name, listofPeople(Grade,Name), List), 
                 keysort(List, [G1-N1,G2-N2,G3-N3|SortedList]). 
```

# bash - rbash shell 中的 GNU Octave

> ID：10434939
> 
> 赞同：1
> 
> 时间：2012-05-03T15:51:24.530
> 
> 标签：bash, octave

我想在受限的 bash shell 或 rbash 中启动一个 octave 会话，从而将用户限制在他们的主目录中。

rbash 按预期工作，用户无法使用 cd 命令。

```
>prompt:~/$ /bin/bash -r
>bash-3.2$ pwd
  /home/user1
>bash-3.2$ cd /
>bash: cd: restricted
>bash-3.2$ 
```

当 octave 启动时，用户可以 cd 到任何目录。

```
>bash-3.2$ octave --silent
octave-3.4.0:1> pwd
   ans = /home/user1
octave-3.4.0:2> cd /
octave-3.4.0:3> pwd
   ans = / 
```

有没有办法像 rbash 那样在八度范围内禁用用户帐户？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:50:11.490

最简单的可能是 Octave 的 chroot 环境（[chroot(2)](http://linux.die.net/man/2/chroot) / [chroot(1)](http://linux.die.net/man/1/chroot)），用于您的 Octave 子进程，以隔离用户访问 real `/`。

或者，您可以将链接的 libc Octave 替换为将`chdir(2)`库调用限制为允许的目录（请参阅[LD_PRELOAD](http://linux.die.net/man/8/ld.so)）。

# facebook-like - 向 Blogger 添加一个 fb like 按钮

> ID：10434940
> 
> 赞同：0
> 
> 时间：2012-05-03T15:51:31.227
> 
> 标签：facebook-like, blogger

案例 1：我使用此代码：（来自[http://www.mybloggertricks.com/2011/06/add-facebook-like-button-below-post.html](http://www.mybloggertricks.com/2011/06/add-facebook-like-button-below-post.html)）

```
<iframe allowTransparency='true' expr:src='&quot;http://www.facebook.com/plugins/like.php?href=&quot; + data:post.url + &quot;&amp;layout=button_count&amp;show_faces=false&amp;width=100&amp; action=like&amp;font=arial&amp;colorscheme=light&quot;' frameborder='0' scrolling='no' style='border:none; overflow:hidden; width:100px; height:20px;'/> 
```

当我点击“赞”时，会出现一个确认按钮，当我在出现的新弹出窗口中点击赞时，我会被重定向到[https://www.facebook.com/plugins/error/like/confirm](https://www.facebook.com/plugins/error/like/confirm)

案例 2\. 我使用来自 facebook 开发人员的 iframe，

```
<iframe src="//www.facebook.com/plugins/like.php?href=data:post.url&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=80&amp;appId=324750880918583" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe> 
```

href 下使用的“data:post.url”没有给我博客的 url，而是字符串本身。

案例 3\. 所以我从案例 2 的链接中尝试了 XFBML 版本，其中部分代码是：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=324750880918583";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

这是博主在我尝试保存模板时显示的错误。

> 解析 XML 时出错，第 1201 行，第 68 列：对实体“appId”的引用必须以“;”结尾 分隔符。

解决上述任何一个问题都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:28:04.827

您必须从 HTML 中剪切此脚本：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=324750880918583";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

然后去 Blogger **Layout**，**Add a Gadget**，**HTML/JavaScript**，然后把脚本放在那里。

这应该工作！:)

# hibernate - Hibernate Annotations 如何覆盖/忽略继承的 id 成员

> ID：10434946
> 
> 赞同：2
> 
> 时间：2012-05-03T15:51:43.630
> 
> 标签：hibernate, annotations, overriding, inherited

我正在从将 id 映射到列的实用程序基类扩展

```
@MappedSuperclass
public abstract class BaseDTO
{
     @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public int id;
    public int getId() {
        return id;}

    public void setId(int id) {
        this.id = id;}
} 
```

此类用于许多派生类，以提供对包含 id 列的表的简化访问和操作。IE

```
BaseDTO->DBAbstractClass1->DBAbstract2->MyClassDTO
BaseDTO->DBAbstractClass1->DBAbstract3->AnotherADTO
BaseDTO->DBAbstractClass2->DBAbstract4->AnotherBDTO 
```

等等

现在我发现我有一个映射到 MyClassDTO 的表，它没有“id”列（它有一个名为“标识符”的列），但由于架构限制，按正常原因扩展：

```
[org.hibernate.util.JDBCExceptionReporter] SQL Error: 1054, SQLState: 42S22
[org.hibernate.util.JDBCExceptionReporter] Unknown column 'this_.id' in 'field list' 
```

我尝试将 id 成员覆盖为@Transient，添加一个新的@Id 等，但总是得到上面的错误。

要么我找到一种“忽略”或替换继承 id 的方法，要么我需要复制我继承的类而不扩展 BaseDTO，这是一个好的程序员应该避免的事情。

我在 [Hibernate 看到过类似的东西：How override an attribute from mapped super class](https://stackoverflow.com/questions/5257921/hibernate-how-override-an-attribute-from-mapped-super-class) 但我不确定它是否能解决我的确切问题。

这可能是一个简单的覆盖，但要小心没有副作用。有接盘侠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:28:59.123

我没有找到简单优雅的解决方案。

我所做的是反转层次结构以创建两个 HelperDTO 类，一个扩展另一个类，第二个包含 id 属性。HelperDTO 没有 Id 成员，而 HelperWithIdDTO 有一个 Id 成员，即

```
HelperDTO->MyClassDTO (classes that do not use id) 
```

和

```
HelperDTO->HelperWithIdDTO->OtherDTO (classes that use id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:09:58.327

尝试在您的子类中覆盖对 super 的这些更改？

```
@MappedSuperclass
public abstract class BaseDTO
{

    public int id;
    public int getId() {
        return id;}

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public void setId(int id) {
        this.id = id;}
} 
```

# mysql - MySQL 会为这个用户表单分配什么默认权限：'user'@''

> ID：10434952
> 
> 赞同：0
> 
> 时间：2012-05-03T15:52:12.653
> 
> 标签：mysql

具体来说，这是一个具有空白（空）主机字段的用户。使用以下形式的 GRANT 创建：

```
GRANT ALL on *.database to 'username'@'' identified by 'password'; 
```

我试过阅读 GRANT 上的 MySQL 文档，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:04:33.063

除非您的网络上有一个以空字符串命名的主机（即您的 DNS 的根），否则该权限将永远不会匹配。

# .net - 抱歉，处理您的请求时出现了一个错误

> ID：10434959
> 
> 赞同：8
> 
> 时间：2012-05-03T15:52:29.190
> 
> 标签：.net, asp.net-mvc, azure

我在 windows azure 中发布了我的 asp.net mvc 3 应用程序，当我访问我的站点时，我看到错误“抱歉，处理您的请求时发生错误”。这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:47:45.373

正如其他人所暗示的那样，可能有很多事情出了问题，导致了这个问题。我建议您阅读以下帖子中给出的建议以开始调查您的问题：

[Webrole 没有启动并且总是很忙](https://stackoverflow.com/questions/10381345/webrole-is-not-starting-and-always-busy/10386637#10386637)

这是您需要添加到 web.config 以从 ASP.NET 应用程序连接 SQL Azure DB 的连接字符串

```
<connectionStrings>
<add name="SQLAzureConnection" connectionString="Data Source=<ProvideServerName>.database.windows.net;Initial Catalog=TestDb;User ID=<ProvideUserName>;Password=<ProvidePassword>;Encrypt=true;Trusted_Connection=false;"
providerName="System.Data.SqlClient" />
</connectionStrings> 
```

# arduino - Ubuntu 12.04 Precise Pangolin 的 Arduino 安装指南

> ID：10434961
> 
> 赞同：3
> 
> 时间：2012-05-03T15:52:39.690
> 
> 标签：arduino, installation, ubuntu-12.04

我正在关注[Arduino 的安装指南](http://www.pluggy.me.uk/arduino-ubuntu/)。我有 Arduino UNO rev3 和 ubuntu 64bit

该指南参考 Synaptic 软件包管理器来安装软件。但它似乎在 Ubuntu 12.04 Precise Pangolin 中不可用。

我应该通过 Ubuntu 软件中心安装软件组件列表吗？或者我应该安装 Synaptic 包管理器吗？（例如[http://www.jonathanmoeller.com/screed/?p=3610](http://www.jonathanmoeller.com/screed/?p=3610)）

这两个安装应用程序有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:19:29.177

我在 12.04 中同步处理和 arduino 时遇到了很多麻烦。我以各种可能的方式安装了 arduino：从网站、从突触/软件中心、从 apt-get... 等等，但它就是无法运行。

如果您在“运行”它时遇到问题，请转到终端并在那里运行它以查看问题。发布详细信息。

就我而言，我遇到了 java headlessexceptions 错误，我得出的结论是因为 12.04 没有安装任何 JAVA 东西？你相信吗！这让我感到震惊，但是哦，好吧：

转到 synaptic 并获取以下包：java-common、openjdk-7/6、java-wrappers、libjaxme-java、default-jre、defaul-jdk、libbsf-java、default-jre-headless、openjdk-6-jre -无头

如果其中一些与 arduino 无关，我很抱歉，我只是进行了一次“click-on-jdk”的狂欢并让它工作:) 处理和 Arduino 现在运行起来就像一个魅力！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:07:26.883

按照本教程在 Ubuntu 中设置 Arduino。我发现这个是最有帮助的。[在 Ubuntu 中安装 Arduino IDE。](http://blog.markloiseau.com/2012/05/install-arduino-ubuntu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:05:15.870

对于在 Precise 中安装 Arduino 1.0，使用 Synaptic 或 Software Center 没有区别，它们都将安装包括依赖项。最大的区别是用户界面和软件中心允许购买一些额外的软件，它们都使用您在 /etc/apt/sources 中定义的存储库。

[https://apps.ubuntu.com/cat/applications/precise/arduino/](https://apps.ubuntu.com/cat/applications/precise/arduino/) https://apps.ubuntu.com/cat/applications/synaptic/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T17:26:36.967

在 Linux 上安装 Arduino 比在 Windows 或 Mac 上安装要困难一些。[包含在 Linux 上安装 Arduino](http://www.intorobotics.com/resources-and-tutorials-to-start-working-with-arduino-boards/)的教程的广泛列表可能对您有很好的帮助。此外，您可以查看本指南以了解 arduino 安装[http://playground.arduino.cc//Learning/Linux](http://playground.arduino.cc//Learning/Linux)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T15:58:20.580

实际上，在 Linux 上获取 Arduino IDE 的最简单方法是从此页面[http://arduino.cc/en/Main/Software](http://arduino.cc/en/Main/Software)下载软件（取决于您的系统，32 位或 64 位 linux 版本）

下载后，您所要做的就是提取存档并运行名为“arduino”的可执行文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-27T22:17:55.910

为 ubuntu 安装 arduino 的最佳方法是使用终端。您必须编写的第一行命令是：

```
sudo apt-get update && sudo apt-get install arduino 
```

这将更新您的 ubuntu 包并安装 arduino 包。然后输入：

```
tar -xvzf filename.tar.xz 
```

然后你必须去目录下载（cd 下载），旁边的 arduino 目录（cd 文件名）。

最后运行 arduino，一旦你进入 arduino 目录，你输入：

```
./arduino 
```

它将运行程序。

# python - 如何在 Python + 任何成像库中获得基于 ROI 的工具提示

> ID：10434967
> 
> 赞同：0
> 
> 时间：2012-05-03T15:53:03.297
> 
> 标签：python, user-interface, image-processing, python-imaging-library

运行 Python，我有一个图像和一些针对不同 ROI（感兴趣区域）计算的数据。我想显示该图像，并且每当我在其中一个感兴趣的区域上时都会弹出一个工具提示。

这主要是为了调试目的——所以我不在乎事情会非常漂亮，或者集成到任何其他类型的 GUI 中——只是我可以很容易地理解我为图像的每个部分计算的值。

另外 - 我不介意为此目的使用哪个成像/显示库。我通常使用 PIL，或者直接使用 numpy 数组——但其他库对我来说也一样好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:27:18.090

如果是用于调试，您可以简单地获取鼠标点击的位置并打印相应 ROI 的值。我会使用 OpenCV，因为它具有[SetMouseCallback](http://opencv.itseez.com/modules/highgui/doc/user_interface.html?highlight=setmousecallback#cv.SetMouseCallback) ()，您可以通过多边形定义 ROI，然后测试哪个多边形获得点击，请参阅此[示例](http://opencv.itseez.com/doc/tutorials/imgproc/shapedescriptors/point_polygon_test/point_polygon_test.html)。如果您以前从未使用过 OpenCV，那么这可能不是最佳选择。

# objective-c - 可达性问题

> ID：10434974
> 
> 赞同：0
> 
> 时间：2012-05-03T15:53:23.207
> 
> 标签：objective-c, ios, mpmovieplayercontroller, reachability

当我单击按钮时，我在飞行模式下在 iPhone 上测试此代码显示一条消息，但是在我连接到互联网的状态下，播放按钮不起作用并且我的应用程序退出

这是代码：

```
-(void)playMovie {
    NSURL *url = [NSURL URLWithString:@"http://www.tvlaayoune.com/iphone/jt.mp4"];
    UIAlertView *errorView;
    if ([[Reachability sharedReachability]
            internetConnectionStatus] == NotReachable) {
        errorView = [[UIAlertView alloc]
                        initWithTitle: @"Unable To Connect To Server" 
                              message: @"Check your network connection and try again."
                             delegate: self
                        cancelButtonTitle: @"OK"
                        otherButtonTitles: nil];
    } else {
        moviePlayer = [[MPMoviePlayerController alloc]
                          initWithContentURL:url];
        [[NSNotificationCenter defaultCenter]
            addObserver:self
               selector:@selector(moviePlayBackDidFinish:)
                   name:MPMoviePlayerPlaybackDidFinishNotification
    object:moviePlayer];
        moviePlayer.controlStyle = MPMovieControlStyleDefault;
        moviePlayer.shouldAutoplay = YES;
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES animated:YES];
    } [errorView show];
} 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:59:22.583

如果我理解正确，当您有互联网并想要显示电影时，您的代码会崩溃。在这种情况下，最后一行代码将尝试显示`errorView`，但如果您有互联网，则不会分配。

在相同的 If 中移动该 show 调用：

```
-(void)playMovie {
    NSURL *url = [NSURL URLWithString:@"http://www.tvlaayoune.com/iphone/jt.mp4"];
    UIAlertView *errorView;
    if ([[Reachability sharedReachability]
            internetConnectionStatus] == NotReachable) {
        errorView = [[UIAlertView alloc]
                        initWithTitle: @"Unable To Connect To Server" 
                              message: @"Check your network connection and try again."
                             delegate: self
                        cancelButtonTitle: @"OK"
                        otherButtonTitles: nil];

         // Notice this line here:
         [errorView show];

     } else {
        moviePlayer = [[MPMoviePlayerController alloc]
                          initWithContentURL:url];
        [[NSNotificationCenter defaultCenter]
            addObserver:self
               selector:@selector(moviePlayBackDidFinish:)
                   name:MPMoviePlayerPlaybackDidFinishNotification
    object:moviePlayer];
        moviePlayer.controlStyle = MPMovieControlStyleDefault;
        moviePlayer.shouldAutoplay = YES;
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES animated:YES];
    } 

    // Removed the show call from here

} 
```

# android - 使用 ViewPager 的方式与它在 android 市场 (google play) 中的工作方式相同

> ID：10434977
> 
> 赞同：1
> 
> 时间：2012-05-03T15:53:39.517
> 
> 标签：android, google-play, android-viewpager

我收集了来自不同类别的产品，我想在不同的“页面”中显示每个类别的产品，并带有水平视图滑动功能，就像[这张图片](http://4.bp.blogspot.com/-T0ubrNZd4ro/TlOx2EZGnXI/AAAAAAAAAp0/p7PQWuJc8Ns/s400/MarketSwipe.png)一样。

[我尝试使用此处](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentPagerSupport.html)显示的示例，但我不知道是否必须使用 FragmentPagerAdapter 或简单的 PagerAdapter。每个页面都必须有相同的布局，唯一会改变的是数据的来源。

怎样才能做到这一点？哪个可能是最好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:56:12.813

使用 FragmentPagerAdapter。请在此处查看如何使用它的清晰示例。

[http://android-developers.blogspot.co.uk/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.co.uk/2011/08/horizontal-view-swiping-with-viewpager.html)

另请注意，有一个免费的附加库来指示用户在哪个页面上

[http://www.viewpagerindicator.com](http://www.viewpagerindicator.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T15:21:42.843

您可以使用[Github上提供的 PagerSlidingTabStrip 库](https://github.com/astuetz/PagerSlidingTabStrip) [https://github.com/astuetz/PagerSlidingTabStrip https://github.com/astuetz/PagerSlidingTabStrip](https://github.com/astuetz/PagerSlidingTabStriphttps://github.com/astuetz/PagerSlidingTabStrip) ![在此处输入图像描述](../Images/a6bab482436e44ffe3643b0c04a51986.png)

# git - 为什么 EC2 不通过接收后挂钩从 bitbucket/github 提取更新？

> ID：10434998
> 
> 赞同：4
> 
> 时间：2012-05-03T15:54:56.057
> 
> 标签：git, github, amazon-ec2, bitbucket, git-post-receive

在迁移到 EC2 之前，我会将提交推送到 bitbucket 存储库并有一个 post-receive 挂钩将它们拉到服务器：提交后，会调用URL [http://mywebsite.com/update.php](http://mywebsite.com/update.php) ，其中 update.php是：

```
 <?php `git pull`; ?> 
```

这曾经像一个魅力。但是，它不适用于 EC2，我不知道为什么。

我尝试了以下方法：

1.  `sudo chmod +x update.php`这应该使 update.php 可执行。

2.  将 update.php 更改为

    ```
     <?php `sudo git pull`; ?> 
    ```

3.  将 update.php 更改为

    ```
     <?php `sudo -s`; `git pull`; ?> 
    ```

4.  将 update.php 更改为

    ```
     <?php `sudo -s git pull`; ?> 
    ```

我认为这与权限有关，因为当我通过 ssh 在我的实例上时，我可以以 ec2-user 身份运行“git pull”。此外，当我是 root 用户时，“git pull”也有效。

我怎样才能让它工作？我认为这与权限有关。

## 更新

我做了一些故障排除（感谢@cyberx86 的提示）并发现以下内容：

我能够通过运行在命令行上执行更新挂钩`php update.php`，它为什么我是 root，但当我是 ec2-user 时却不行。错误日志显示

> 错误：无法打开 .git/FETCH_HEAD：权限被拒绝

所以我`chmod -R 777 .git`以root用户身份运行命令。

现在我可以通过命令行`git pull`和`php update.php`在命令行上提取更新，但是当我通过 post-receive 挂钩或将浏览器指向 url/update.php 时它不起作用。错误日志显示

> 主机密钥验证失败。^M
> 致命：远程端意外挂断

我认为这意味着无论哪个用户在通过浏览器访问该命令时运行该命令都没有设置 ssh 密钥，因此看起来 shell 命令正在运行，但远程存储库不允许该用户拉取。

根据@cyberx86 的建议，我检查了 /etc/passwd 中的用户，虽然没有 PHP 用户，但有一个名为 apache: 的用户`apache:x:48:48:Apache:/var/www:/sbin/nologin`，然后我运行`sudo -u apache php -q update.php`并收到以下消息

> 无法创建目录“/var/www/.ssh”。
> 
> 无法确定主机“bitbucket.org (207.223.240.181)”的真实性。
> 
> RSA 密钥指纹已编辑
> 
> 您确定要继续连接（是/否）？是的
> 
> 未能将主机添加到已知主机列表 (/var/www/.ssh/known_hosts)。
> 
> 权限被拒绝（公钥）。
> 
> 致命：远端意外挂断

因此，这似乎是为通过浏览器运行 shell 脚本的用户（可能是 apache）设置一个 ssh 密钥的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:05:18.030

1.  PHP 文件通常不需要可执行文件即可运行
2.  尝试直接运行您的 PHP 脚本（而不仅仅是运行`git pull`） - 更重要的是，尝试在用户 PHP 运行时运行您的 PHP 脚本（可能是`www-data`,`apache`等 - 不太可能`ec2-user`）类似于 (作为 root): `sudo -u php_user php -q /path/to/update.php`。
3.  增加你的`error_reporting`和`display_errors`- 也检查你的日志文件的详细程度。
4.  最后`sudo`（你在脚本中的内容）只有在 sudoers 中设置时才有效——它可能不适合 php 用户。

用户 php 将按如下方式运行：

1.  在 Apache 的 httpd.conf ( `User`,`Group`指令)
2.  在您的 VirtualHost 设置中（例如，如果使用 suExec - 查找`SuexecUserGroup`指令）
3.  `user`如果您使用 php-fpm 作为 php 进程管理器（池的and`group`指令），请在您的 PHP-FPM 池 (/etc/php-fpm.d/) 的配置中。

而不是更改权限（即`chmod`），您应该更改`chown`文件的所有权（）以匹配您的 php 用户的所有权。PHP 文件通常应该有 644 权限和目录 755 权限。除了测试（或有时是临时目录）之外，应避免使用 777 - 如果您修复了所有权，则不需要这种宽松的权限。

最后，似乎有两个问题：1.您没有设置 php 用户连接到 git 服务器的密钥，以及 2.您没有 git 服务器密钥的副本（即进行身份验证您正在连接到正确的服务器）。

要获得可以让您登录 git 服务器的密钥（我不熟悉 bitbucket），我认为需要以下其中一项（仅一项，不是全部）：

*   您已经有一个 SSH 密钥（用于 root 用户），您可以将其提供给您的 PHP 用户
*   您将在服务器上为 PHP 用户生成一个新密钥，并将其上传到 bitbucket
*   您将在 bitbucket 上生成一个新密钥，并将其下载到您的服务器，并将其添加到您的 PHP 用户密钥中。

获取 git 服务器的密钥应该更简单：

1.  使用正确的所有权和权限创建目录 /var/www/.ssh（以便 php 可以写入）。
2.  尝试以 php 的用户身份从您的服务器通过 SSH 连接到 git 存储库（或运行`git clone`——它可能也`git pull`可以工作）——并接受 git 服务器提供的密钥。

我假设您在最初设置服务器以使用 bitbucket 时做了与上述类似的事情（如果没有，请参阅[文档](http://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T09:50:57.737

（代表 OP 发布）

解决了。这就是我所做的。为了解决问题，我添加了

```
echo `whoami`; 
```

更新.php，当我通过浏览器运行它时，它显示了用户名（它不是用户 apache，而是在虚拟主机文件中设置的另一个用户）。我还注意到，在`/etc/passwd`该用户名中作为对 /bin/bash 的访问权限（与用户 apache 不同，它仅限于 /sbin/nologin），但该用户名对 shell 的访问权限在 sudoers 文件中受到限制。该文件包含`!SHELL`在用户的 sudo 权限末尾，所以我刚刚使用 visudo 删除了它，现在它可以工作了。

我在 Stack Overflow 和 Server Fault 上找到了一些相关的帖子：[一](https://stackoverflow.com/questions/5144039/shell-exec-and-git-pull)、[二](https://stackoverflow.com/questions/9370975/running-git-pull-from-a-php-script)和[三](https://serverfault.com/questions/362012/running-git-pull-from-a-php-script)。

我在第三个链接中使用了该方法的简化版本，但是我使用了 shell 命令而不是指向 shell 脚本。

我有点担心我是否留下了任何安全漏洞，因为我一直在摆弄文件权限，`/etc/sudoers`但在这一点上，我很高兴让它工作。理想情况下，我想让命令在没有 sudo 的情况下运行，因为这似乎会更安全，但这很可能是一旦找到足够好的问题解决方案就永远无法解决的事情之一.