# StackOverflow 问答 12073000-12073999

# c# - Entity Framework 在哪里存储属性名称和它在 SQL 中选择的列之间的映射？

> ID：12073001
> 
> 赞同：4
> 
> 时间：2012-08-22T12:19:38.583
> 
> 标签：c#, sql, linq, entity-framework

我正在尝试使用 ObjectQuery 的 ToTraceString() 在 EF (4.3) 上构建一些自定义扩展，以从 LINQ 代码生成原始 SQL。

我注意到，虽然在某些情况下 SQL 中的列名与查询元素类型的属性名相匹配，但在其他情况下，它们被命名为 C1、C2 等。这让我很难做任何事情使用生成的 SQL。有谁知道如何将这些列名映射回属性名（如果有帮助，我只关心能够对诸如匿名类型之类的平面元组执行此操作，我不需要任何分层）。

依赖私有/内部反射的解决方案是完全可以接受的。我了解我可能需要在未来的 EF 版本中对其进行调整。另外，如果有帮助，我只使用 MS SqlServer (2008+)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:39:49.473

我刚刚问并回答了一个类似的问题（您可以忽略所有 DataTable 的东西，但它可能很有用，因为它显示了如何使用映射）：

[实体框架 - IQueryable 到 DataTable](https://stackoverflow.com/questions/12083740/entity-framework-iqueryable-to-datatable)

显示如何获取对象属性位置和 SQL 语句列位置之间的映射的原始帖子可以在这里找到：

[Entity Framework 如何管理映射查询结果到匿名类型？](https://stackoverflow.com/questions/7808607/how-does-entity-framework-manage-mapping-query-result-to-anonymous-type)

**注意：**第二个链接仅提供对象属性和 SQL 语句列之间的**位置**映射（作为整数值）...您必须使用反射来获取实际的对象属性名称，然后执行某种操作对 SQL 语句进行字符串分析以获取 SQL 语句列名（您可以为此使用正则表达式，但这可能有点矫枉过正）。

# jquery - 使用选择元素对列进行排序将表格 DOM 从选择更改为 DataTables 的静态文本

> ID：12073003
> 
> 赞同：0
> 
> 时间：2012-08-22T12:19:42.657
> 
> 标签：jquery, jquery-plugins, datatables

我正在为我的表使用 DataTables 1.9.3。

我正在对带有选择元素的某些列使用带有自定义过滤插件的多重过滤。

我也有一个自定义（但接近你可以在 datatables.net 上找到的）。用于对我的选择列进行排序的插件。

我的问题是，当我首先对列进行排序然后对其进行过滤时，它不起作用。在排序之前分析过滤器函数中的aData，我可以看到它包含整个select（实际上是form）元素。在我执行第一次排序后，aData 仅包含选定的文本，而不是整个表单/选择。因此，我的自定义过滤功能第二次不起作用。

如何确保 aData 仍然包含整个选择/表单，以便我的自定义插件在第一次排序后工作？

我的过滤插件：

```
$.fn.dataTableExt.afnFiltering.push(
     function( oSettings, aData, iDataIndex ) {

     console.log(aData[1]);
     var ret = true;    

     //Loop through all input fields i tfoot that has class 'sl_filter' attached                                              
     $('tfoot .sl_filter').each(function(i, obj){                       

         //$(this) can be used. Get the index of this colum.
         var i2 = $("tfoot input").index($(this));                           
         i2 = oTable.fnVisibleToColumnIndex(i2);

         //Create regexp to math
         var r = new RegExp($(this).val(), "i");                                                

         //HTML does not get updated when changing value in select, hence searching for :selected return old value
         //DataTables stores the DOM object oSettings. Hence, get the object and extract the text for the selected value.
         var tr = oSettings.aoData[ iDataIndex ].nTr;                       
         var id = $(aData[i2]).attr('id');

         //Get the text
         var str = "";
         var value = "";
         if($(aData[i2]).is("form")){                           
             value = $("#" + id + " select", tr).val();
             str = $("#" + id + " select option[value='" + value + "']", tr).text();
         }else{                           
             value = $("#" + id, tr).val();
             str = $("#" + id + " option[value='" + value + "']", tr).text();
         }

         /*Test to see if there is a match or if the input value is the default 
            (the initial value of input before it has any fokus/text) */                           
         if(r.test(str) || $(this).val()=="Search"){
                 //Return true only exits this function
                 return true;
         }else{

                 /*Return false returns both function an .each. Retain 'false' in a variable scoped
                             to be reached outside the .each */                                
                 ret = false;
                 return false;
          }
      });
      //Return true or false
      return ret;                        

   }
 ); 
```

我的排序插件：

```
$.fn.dataTableExt.afnSortData['dom-select'] = function  ( oSettings, iColumn, iColumnVis){

    iColumn = oSettings.oApi._fnColumnIndexToVisible( oSettings, iColumn );
    var aData = [];
    $( 'td:eq('+iColumn+') select', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {    
           aData.push( $.trim($(":selected", this).text()));   
    } );

    return aData;
}; 
```

似乎排序插件不仅对表格进行排序，而且还在更新表格的实际 dom。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:49:59.313

必须像这样访问表的数据：

```
str = $('td:eq(' + i2 + ') option:selected', oSettings.aoData[ iDataIndex ].nTr).text(); 
```

原因是 aData 与 dom (aoData) 相比可能已经过时。

这样做时，我还可以使我的自定义过滤功能更轻松：

```
$.fn.dataTableExt.afnFiltering.push(
     function( oSettings, aData, iDataIndex ) {

           var ret = true;                     

           //Loop through all input fields i tfoot that has class 'sl_filter' attached                                              
           $('tfoot .sl_filter').each(function(i, obj){                       

           //$(this) can be used. Get the index of this colum.
           var i2 = $("tfoot input").index($(this));                           

           //Create regexp to math
           var r = new RegExp($(this).val(), "i");                                                

           //Get the text                       
           var str = $('td:eq(' + i2 + ') option:selected', oSettings.aoData[ iDataIndex ].nTr).text();

           /*Test to see if there is a match or if the input value is the default 
             (the initial value of input before it has any fokus/text) */                           
           if(r.test(str) || $(this).val()=="Search"){
                 //Return true only exits this function
                 return true;
           }else{

                 /*Return false returns both function an .each. Retain 'false' in a variable scoped
                 to be reached outside the .each */                                
                 ret = false;
                 return false;
           }
         });
         //Return true or false
         return ret;                        
       }
    ); 
```

# actionscript-3 - as3 裁剪图像加载为 MC

> ID：12073008
> 
> 赞同：0
> 
> 时间：2012-08-22T12:19:58.403
> 
> 标签：actionscript-3

嗨，这要了我的命:) 我正在使用 senocular 将 as3 移动、旋转、缩放、倾斜加载图像到 MC 中并且效果很好，但是花了很多时间，找不到很好的解决方案来裁剪这样的 MC（加载图像）老鼠。有人对此有解决方案（代码）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:02:51.950

要显示裁剪区域，您需要做的就是应用一个蒙版，这只是另一个显示对象。

我没有为此使用 Senocular 的代码，但是如果您将**蒙版**作为他的移动/缩放代码的目标，那么您可以轻松实现裁剪。Adobe 文档中有很多关于屏蔽的内容：http: //livedocs.adobe.com/flex/3/html/help.html?content= [05_Display_Programming_28.html](http://livedocs.adobe.com/flex/3/html/help.html?content=05_Display_Programming_28.html)

在实践中，您必须在裁剪时隐藏调整大小/移动控件，反之亦然，这就是 Flash 本身或 Photoshop 等工具具有单独的变换和裁剪模式的原因。

来自 Senocular 的文档：

```
// import for the Transform Tool classes used
import com.senocular.display.transform.*;

// create a box object to interact with
var box:Sprite = new Sprite();
addChild(box);
box.graphics.beginFill(0xAACCDD);
box.graphics.drawRect(-50, -50, 100, 100);
box.x = 100;
box.y = 100;

// create the Transform Tool
var tool:TransformTool = new TransformTool(new ControlSetStandard());
addChild(tool);

// select the box with the transform tool when clicked. 
// deselect when clicking on the stage
box.addEventListener(MouseEvent.MOUSE_DOWN, tool.select);
stage.addEventListener(MouseEvent.MOUSE_DOWN, tool.deselect); 
```

只需这样做，但**框**必须是影片剪辑的**蒙版**，这样当您调整它的大小时，您将裁剪影片剪辑。

# javascript - 在javascript中将百分之一转换为“分钟：秒.百分位”

> ID：12073010
> 
> 赞同：0
> 
> 时间：2012-08-22T12:20:00.543
> 
> 标签：javascript, jquery, time

在 Javascript 中，我需要帮助将具有百分之一的整数转换为“分钟：秒。百分位”。

因此，例如，我有这个：'10420'，并希望像这样显示它：01:44.20。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:23:25.017

```
function leading0(number){ return number < 10 ? "0" : "";}

mins = parseInt((hundredths / 100) / 60)
secs = parseInt((hundredths / 100) % 60)
huns = parseInt(hundredths % 100)
output = leading0(mins) + mins + ":" + leading0(secs) + secs + "." + leading0(huns) + huns; 
```

jsFiddle 示例：http: [//jsfiddle.net/cNu2t/](http://jsfiddle.net/cNu2t/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:21:19.613

[Moment.js](http://momentjs.com/)应该能够基于它提供的非常丰富的格式设置、解析等来处理这个问题。我不知道你是否会做足够多的额外日期和/或时间相关的东西来为你为一个页面下载的资源集添加一个 5K JavaScript 库，但如果你有其他地方可能值得一看你可以在哪里使用它。

我知道它以毫秒为单位，你可以将你的数字乘以 10 得到毫秒，然后通过他们的格式化函数来输出你想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:24:52.430

```
var hundredths = 10420;
var seconds = Math.floor(hundredths / 100);
var minutes = Math.floor(seconds / 60);
return minutes+":"+(seconds-minutes*60)+"."+("0"+(hundredths-seconds*100)).substr(-2); 
```

或者：

```
function leadingZero(n) { return ("00"+n).substr(-2); }
var hundredths = 10420;
var secs = ~~(hundreths/100);
var mins = ~~(secs/60);
return mins+":"+leadingZero(secs%60)+"."+leadingZero(hundredths%100); 
```

# c# - 使用 C# 将光标移动到 MsWord 中的选定行

> ID：12073012
> 
> 赞同：1
> 
> 时间：2012-08-22T12:20:03.450
> 
> 标签：c#, ms-word, office-interop

我在 C# 中进行 Word 自动化。我想将当前光标位置移动到选定的行号。

让我用一个例子来解释：

```
Line 1
Line 2
Line 3
Line 4

Line 6
Line 7 
```

现在我故意`Line 5`留空。之后`Line 7`，我想将光标移动到`Line 5`。我正在使用`oWord.Selection.Range`方法，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:39:55.787

好吧，似乎没有人发现任何东西。让我帮助我自己和其他可能面临这个问题的人

那么这里的逻辑是，每次你将光标移动到位置的顶部，这里是第 1 行

```
 WRange.Range Myrng = oDoc.Range(ref StartPos, ref Endpos);
                   Myrng.Select();

                   object Story = WdUnits.wdLine;
                   oWord.Selection.EndKey(ref Story, ref extend);

                   object NewEndPos = oWord.Selection.End - 1;
                   Myrng = oDoc.Range(ref NewEndPos, ref NewEndPos);
                   Myrng.Select(); 
```

在此之后，输出类似于**第 1 行，我** 现在将光标移动到第 5 行

```
 object Count=5;
                   oWord.Selection.MoveDown(ref unit, ref Count, ref oMissing); 
```

瞧，你在第 5 行

# c# - 如何在 c# , .asp.net 中动态创建 javascript 调用

> ID：12073021
> 
> 赞同：1
> 
> 时间：2012-08-22T12:20:44.373
> 
> 标签：c#, asp.net

网络，C#。我正在使用以下代码调用 javascript。`

```
<script type="text/javascript">
    $(function () {

       $("[src='/pinterest/portals/0/Images/about-person3.jpg']").pinit();
       $("[src='/pinterest/portals/0/Images/about-us-group.jpg']").pinit();
    });
    </script> 
```

`My c# code is`

```
<asp:Repeater ID="Repeater1" runat="server">
<ItemTemplate>
<br />
<img ID="ImageZoom" runat="server" src='<%# DataBinder.Eval(Container.DataItem, "ImageUrl") %> '  style="display: inline; height:auto; left: 0pt; top: 0pt; width:auto;" />
    <asp:CheckBox ID="CheckBox1" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "ImageId") %> '  /> 

</ItemTemplate>
</asp:Repeater>` 
```

如果我添加更多图像，我应该为所有图像调用 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:28:20.337

你的问题充其量是模糊的，但我认为这就是你要找的：

1.  为您要调用的图像分配一个类`pinit()`。
2.  使用 jQuery 的[类选择器](http://api.jquery.com/class-selector/)来检索适当的对象。

    ```
    <img ID="ImageZoom" class='pinitPlease' runat="server" ... />

    $(function () {
        $(".pinitPlease").pinit();
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:28:24.867

假设您要缩放位于 /pinterest/portals/0/Images/ 中的图像

您可以调整您的[jquery 选择器](http://api.jquery.com/attribute-starts-with-selector/)以选择以该路径开头的那些图像

$("[src^='/pinterest/portals/0/Images/']").pinit();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:29:48.523

您的所有图像的 ID 中都会包含“ImageZoom”一词，因此您可以通过它创建一个选择器并一起查找所有图像。

```
$("[id*='ImageZoom']").pinit(); 
```

# java - Mockito 和 Eclipse rcp

> ID：12073022
> 
> 赞同：0
> 
> 时间：2012-08-22T12:20:47.687
> 
> 标签：java, eclipse, mockito

我正在尝试在我的 eclipse rcp 项目中使用 mockito。出于某种原因，每次我要运行单元测试时都会收到此错误：

> java.lang.NoClassDefFoundError: org/mockito/Mockito 原因：java.lang.ClassNotFoundException: org.mockito.Mockito

我的代码与 mockito 示例中的代码类似：

```
@Test
public void testExecuteStep(){
  List test = mock(List.class); //here the exception will be thrown.
} 
```

谁能给我这个问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:32:52.277

在我看来，你的项目中没有正确设置 Mockito，你确定它在**类路径**上吗？

# c# - 从文本中提取一些文本

> ID：12073024
> 
> 赞同：-3
> 
> 时间：2012-08-22T12:20:51.737
> 
> 标签：c#, datetime, extract

我有一个字符串格式的日期（例如 01/01/2013）。如何获得年份（2013）？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:22:30.970

如何将其解析为 a `DateTime`？

```
var date = DateTime.Parse("01/01/2013");
var year = date.Year; 
```

如果您有其他/特殊格式，可以查看[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:22:21.340

`DateTime.ParseExact`您可以通过方法解析字符串。

```
string strDate="01/01/2013";
string format="MM/dd/yyyy";
DateTime date=DateTime.ParseExact(strDate,
                                  format,
                                  System.Globalization.CultureInfo.InvariantCulture);
int year=date.Year; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:24:47.993

您可以使用 Sting.Substing() 方法

```
string s = "01/01/2013";
string year = s.Substring(6,4); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T12:30:40.403

请在下面找到代码 " String s = "01/01/2013";

Datetime date= Datetime.parse(s);

日期。年份；

"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:23:55.690

您可以解析字符串以获取`DateTime`对象，然后获取年份：

```
string test = "01/01/2013";
DateTime theDate = DateTime.ParseExact(test, "dd/mm/yyyy", CultureInfo.CurrentCulture);
int theYear = theDate.Year; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:24:01.833

您始终可以尝试将字符串解析为日期。然后从日期中选择年份。例子：

```
string s = "01/01/2013";
var date = DateTime.Parse(s);
var year = date.Year; 
```

DateTime 可以在 System 命名空间中找到。

# gwt - GXT3 中的多重移动特效

> ID：12073025
> 
> 赞同：0
> 
> 时间：2012-08-22T12:20:54.820
> 
> 标签：gwt, gxt

当我按下按钮时，我希望容器朝一个方向移动，然后再进行另一次移动。问题是只执行了一个移动命令（第二个）。

```
centerContainer.getElement().<FxElement>cast().setXY(bounds.getX() - compWidth, bounds.getY(), new Fx(800));
centerContainer.getElement().<FxElement>cast().setXY(bounds.getX(), bounds.getY()+500, new Fx(800)); 
```

我怎样才能做两个动作，一个接一个？

谢谢你，霍拉修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:15:45.387

```
 Fx fx = new Fx(INTERVAL);
 fx.addAfterAnimateHandler(new AfterAnimateEvent.AfterAnimateHandler() {
 @Override
 public void onAfterAnimate(AfterAnimateEvent event) {
     //second move implementation
   }
 }); 
```

# .net - 使用小写的所有节点创建自定义 XMLSerializer

> ID：12073026
> 
> 赞同：5
> 
> 时间：2012-08-22T12:20:59.863
> 
> 标签：.net, xml

我正在使用 XmlSerializer 为我的班级生成 XML 输出。是否可以创建一个自定义 XMLSerializer，其中所有的 xml 节点都是小写的？我不想将属性添加到我的类中的每个字段字段以指定小写的节点。

谢谢你，安吉拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:31:16.587

这取决于你想做多少工作。添加属性是最简单的选择，但您说您不想这样做。您可以用小写名称命名这些类，但这是一种可怕的处理方式，IMO。

您*可以*通过使用 - 来告诉`XmlSerializer`运行时要做什么，`XmlAttributeOverrides`但是您需要使用反射来告诉它您想要调整的所有成员，但请注意：如果您这样做，您**必须**缓存并重新使用这样的序列化程序；如果您每次都创建一个新的`XmlSerializer`via ，您将泄漏程序集内存。`XmlAttributeOverrides`

[MSDN](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeoverrides.aspx)上有一个例子

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:31:48.877

多年来我见过的最好的例子是在[这里](http://weblogs.asp.net/cazzu/archive/2004/05/10/129106.aspx)找到，由 Daniel Cazzulino 编写。我发现它非常优雅，因为他重写了`XmlTextReader`and`XmlWriter`以使序列化**完全按照**他的意愿进行。希望你喜欢阅读他的博客！

# sql-server - 从插入语句中的表中获取下一个序列到另一个表

> ID：12073029
> 
> 赞同：2
> 
> 时间：2012-08-22T12:21:05.943
> 
> 标签：sql-server, sql-server-2008, stored-procedures, sequence

我有 3 张桌子

*   `Table_A`有一堆行
*   `Table_B`将使用来自的数据插入行的位置`Table_A`
*   `Table_C`保存一个数字（整数），称为`code_number`

我有一个存储过程（`sp_getNextCode`），它选择当前`code_number`from `Table_C`，创建并返回一个带有这个数字（比如或其他东西）的`varchar`代码字符串，并用下一个值（）更新`yyyyMMdd + cast(code_number as varchar)``Table_C` `code_number``code_number+1`

到目前为止，一切都很好。

现在我想在`Table_A`不`Table_B`使用光标的情况下使用

```
INSERT INTO TABLE_B 
    SELECT .... FROM TABLE_A 
```

到目前为止还不错

问题是上述插入语句中的值之一必须是存储过程的输出`sp_getNextCode`。

*   我不能在语句中使用存储过程
*   我无法创建与`sp_getNextCode`函数不能具有相同代码的函数`INSERT/UPDATE/DELETE`

我没有 SQL Server 2012 的选项（它有一个序列）只有 SQL Server 2008

有什么方法可以实现这一点，或者唯一的方法是使用游标（我真的想避免使用游标，因为我在谈论需要插入的数千行并且需要太长时间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:41:25.437

当然，有一种方法：创建一个从 table_A 读取的存储过程，插入 ino table_b 并更新 table_C：

```
BEGIN TRANSACTION

SELECT @last_value=last_vale FROM  Table_C;

SELECT @records_to_insert = COUNT(*) 
FROM Table_A
WHERE <Conditions>

INSERT INTO TABLE_A
SELECT <Fields>,...., @last_value + ROW_NUMBER() 
OVER(ORDER BY <some ordering criteria>)
FROM TABLE_A
WHERE <Conditions>

UPATE Table_C
SET last_value = @last_value + @records_to_insert +1

COMMIT TRANSACTION 
```

我省略了一些细节，如将数字转换为格式化代码、异常处理和回滚，但我希望你能明白。

诀窍是使用 ROW_NUMBER() OVER (ORDER BY...) 函数来获取每一行的唯一编号。

[http://msdn.microsoft.com/en-us/library/ms186734.aspx](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

# ios - 我可以使用 (Storyboards) 将 iphone 应用程序部署到在 xcode 4.3 中开发的 ios4 或更低版本吗？

> ID：12073031
> 
> 赞同：1
> 
> 时间：2012-08-22T12:21:12.820
> 
> 标签：ios, xcode, xcode4.3

我使用 Xcode 4.3 制作了一个应用程序。为此，我使用了故事板。现在我想将它部署在我的 iPod 上，它有 ios4。当我在**Xcode 4.3**中运行该应用程序时，它被部署在**iPhone 5.1 模拟器**中。

**它可以在iOS4**上运行吗？如何识别。如果没有，那么解决方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:35:03.157

如果我尝试使用 Storyboard 编译项目并将部署目标设置为 4.3，我会得到：

> 故事板在 iOS 4.3 及更早版本上不可用。

所以我会说不，不会工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:38:30.387

故事板是 iOS 5 或更高版本

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html#//apple_ref/occ/cl/UIStoryboard](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html#//apple_ref/occ/cl/UIStoryboard)

# javascript - 注入的javascript不执行

> ID：12073032
> 
> 赞同：4
> 
> 时间：2012-08-22T12:21:15.113
> 
> 标签：javascript, jquery

我正在尝试编写一段将网页与外部系统集成的javascript。目前，我所拥有的是将脚本元素动态插入页面的非常少量的代码。

```
$(document).ready(function() {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://example.com/example.php?arg1=1&arg2=2";
    document.body.appendChild(script);
}); 
```

外部系统返回的 JS 是一个大的单行 document.write 调用，它将表格写入页面。

```
document.write('<table><tr><td>blah</td></tr></table>'); 
```

当我将此脚本元素注入页面时，我可以使用 DOM 检查器看到它，但脚本似乎没有执行。如果我手动将脚本元素放入 HTML，则 javascript 执行得很好（所以它不是同源策略或格式错误的 html 错误......），但我希望它是动态的。

任何想法为什么javascript没有执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:25:07.100

在 DOM 准备好后使用`document.write`会将页面的内容替换为您正在编写的任何内容。

如果您想在页面中插入任何内容，我建议使用其中一种实际的 DOM 操作方法。

至于脚本没有执行，你确定它被正确连接了吗？您是否尝试在包含的脚本上设置一个 javascript 断点来验证是否是这种情况？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:24:09.480

~~因为你只是包含它，而不是执行。~~当您使用 jQuery 时，请查看该`$.getScript()`函数。

```
http://api.jquery.com/jQuery.getScript/ 
```

它将满足您的需求。这个函数是一个 Ajax 函数，所以要小心，因为它的行为是异步的。使用它的回调来执行基于加载脚本的代码。

**编辑：** Felix 纠正了我关于脚本执行的问题，但我仍然认为你可以试试这个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:53:25.777

尝试使用此代码（它与 google 用于分析或 facebook 的用途相同）。

将其放在页面底部；）

```
<script type="text/javascript">
    (function() {
        var script = document.createElement('script'); 
            script.type = 'text/javascript'; 
            script.async = true;
        script.src = '/example.php?arg1=1&arg2=2';
        var s = document.getElementsByTagName('script')[0]; 
            s.parentNode.insertBefore(script, s);
    })();
</script> 
```

或者正如[davidbuzatto](https://stackoverflow.com/users/469201/davidbuzatto)建议的那样，你必须使用 $.getScript() 这是一个简写的 $.ajax() 函数。

```
$(document).ready(function() {
    $.getScript("/example.php?arg1=1&arg2=2", function(data, textStatus, jqxhr) {
        console.log(data); //data returned
        console.log(textStatus); //success
        console.log(jqxhr.status); //200
        console.log('Load was performed.');
   });
}); 
```

**编辑：** 看到您可能有跨域限制，只需尝试使用相对 url "/example.php?arg1=1&arg2=2" 而不是包含的完整 url。或者，如果不是同一个 Web 服务器，请使用 cross-domain.xml 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:30:10.163

我认为您需要使用 JSONP 来实现这一点并使用回调函数将其附加到 body 标记

```
$(document).ready(function() {
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "http://example.com/example.php?arg1=1&arg2=2&callback=showit(data)";
document.body.appendChild(script);
});

 function showit(data){document.write(data);} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:45:52.060

我总是看到这样做更像：

```
document.write('<scr' + 'ipt>---scripthere---' + '</scr' + 'ipt>'); 
```

我假设它是出于类似的原因。试试这个，而不是创建一个“真实的”脚本元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:41:24.877

为什么不将 JS 粘贴在一个单独的窗口/iframe 中，它会在其中正确执行和显示表格，然后使用 AJAX 将该表格拉到该页面？

JQuery AJAX 是最容易使用的 IMO：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# iphone - 如何在不使用本地通知的情况下创建一个可以在一周内随机设置几天的自定义警报？

> ID：12073035
> 
> 赞同：2
> 
> 时间：2012-08-22T12:21:19.513
> 
> 标签：iphone, ios, xcode, alarm, repeatingalarm

我研究了以下一些问题，即：

1.)[如何在 iphone 中设置选定日期的闹钟？](https://stackoverflow.com/questions/10780517/how-to-set-alarm-for-selected-days-in-iphone)

2.) [iPhone 警报使用重复的本地通知](https://stackoverflow.com/questions/11336764/iphone-alarm-using-repeated-local-notifications)

3.)[如何在 iPhone 中设置闹钟并保存在本地通知中？](https://stackoverflow.com/questions/7185811/how-to-set-the-alarm-in-iphone-and-save-in-local-notification)

但他们都在使用本地通知。我在本地通知方面遇到问题，因为我必须在警报视图上使用三个按钮，它们是：贪睡、忽略和确定。我必须对每个按钮单击执行自定义操作。

请帮我解决这个问题。

建议接受。

提前致谢。

库尔迪普。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:10:37.430

在您的应用程序委托中...

```
- (void) presentWidget: (NSString*)theDisplayedText {
    BOOL widgetIspresent = [WidgetVC widgetIsCurrentlyPresented];

    if (!widgetIspresent) {
        WidgetVC *widgetVC = [[WidgetVC alloc] initWithNibName:@"WidgetVC" userInfoString:theDisplayedText bundle:nil];

        widgetVC.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        widgetVC.userInfoStr = theDisplayedText;
        [mainScreenManager presentViewController:widgetVC animated:YES completion:nil];
    }
}

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
        if (localNotif) {
            NSLog(@"Recieved Notification  didFinishLaunchingWithOptions %@",localNotif);
            NSString *theDisplaytext = [localNotif.userInfo valueForKey:@"someKey"];
            //here we have to handle whatever notification was pressed - that might also be an old aready passed one
            //this all is checked when the widget opens - it will show if the notification is OK or too old
            [self presentWidget: theDisplaytext ];
        } else {
            //so we started the app normally, not via local notification
            [self presentWidget];

        }

        return YES;
    }

// Handle the notificaton when the app is running
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)localNotif {
    // Handle the notificaton when the app is running
    NSLog(@"Recieved Notification didReceiveLocalNotification %@",localNotif);
    NSString *theDisplaytext = [localNotif.userInfo valueForKey:@"someKey"];
    [self presentWidget: theDisplaytext];
} 
```

您需要一种方法来启动小部件的 UIViewController，我刚刚创建了一个 mainScreenManager 助手。

所以在widgetVC上你有你的“Snooze”和“OK”，而“Ignore”只是忽略通知本身。

希望这能让你走上可用的轨道......

ps 我将我的应用程序从 Android 移植到 iPhone，这就是我为这个屏幕使用名称“widgetVC”的原因。在 Android 上，它被实现为一个小部件。希望没有 iPhone 爱好者感到被冒犯 :-)

# android - 从 Android 中的另一个 Activity 访问 TabHost

> ID：12073040
> 
> 赞同：2
> 
> 时间：2012-08-22T12:21:37.557
> 
> 标签：android, android-widget

我有一个带有两个选项卡的选项卡主机：一个用于图片库，另一个用于打开页面。TabHost 独立工作正常，但是当我想通过以前的活动访问它时，应用程序崩溃了。谁能告诉我问题是什么？我是否必须添加某些内容或我正在做的事情都是错误的。请告诉我是否有其他方法。我的代码如下：

```
public class DelhimapActivity extends TabActivity{

   TabHost tab;
   Intent intent;
   GridView grid;

   public void onCreate(Bundle savedInstanceState){
      super.onCreate(savedInstanceState);
      setContentView(R.layout.delhimap);
      tab = getTabHost();

      tab.addTab(tab.newTabSpec("tab1").setIndicator("Images").setContent(R.id.gridView1));
      tab.addTab(tab.newTabSpec("tab2").setIndicator("About").setContent(intent));
      grid = (GridView) findViewById(R.id.gridView1);
      grid.setAdapter(new ImageAdapter(this));
      intent.setClass(this, DelhiLay.class);
      startActivity(intent);

      tab.setCurrentTab(0);
   }

} 
```

我的图像适配器：

```
public class ImageAdapter extends BaseAdapter {
   private Context mContext;

   public ImageAdapter(Context c) {
      // TODO Auto-generated constructor stub
      mContext= c;
   }

   public int getCount() {
      // TODO Auto-generated method stub
      return mThumbIds.length;
   }

   public Object getItem(int position) {
      // TODO Auto-generated method stub
      return null;
   }

   public long getItemId(int position) {
      // TODO Auto-generated method stub
      return 0;
   }

   public View getView(int position, View convertView, ViewGroup parent) {
      // TODO Auto-generated method stub
      ImageView imageView;
      if (convertView == null) {  // if it's not recycled, initialize some attributes
         imageView = new ImageView(mContext);            

         imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
         imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
         imageView.setPadding(8, 8, 8, 8);

         //myButton.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT, Gravity.CENTER_HORIZONTAL));

      } else {
         imageView = (ImageView) convertView;
      }

      imageView.setImageResource(mThumbIds[position]);
      return imageView;
   }

  // references to our images
  private Integer[] mThumbIds = {
        R.drawable.ben, R.drawable.brent,
        R.drawable.cean,
        R.drawable.charters,
        R.drawable.lynn,
        R.drawable.mark,
        R.drawable.paul,
        R.drawable.philip
  };
} 
```

并从这样的另一个活动中访问它：

```
public void onEnter(View v){

      prg = ProgressDialog.show(this, "", "Loading...");
      new Handler().postDelayed(new Runnable() {

            public void run() {
      Intent inta = new Intent(NewActivity.this,DelhimapActivity.class);
      NewActivity.this.startActivity(inta);
      NewActivity.this.finish();
            }
      },3000
      );
} 
```

这是具有 TabHost 的 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"

            android:tabStripEnabled="true">
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <GridView
                android:id="@+id/gridView1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:numColumns="3" >
            </GridView>
            <LinearLayout 
                android:id="@+id/linear"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

            </LinearLayout>

        </FrameLayout>

    </LinearLayout> 
```

这是我用于此活动的 LogCat：

```
08-23 13:56:46.008: E/AndroidRuntime(365): FATAL EXCEPTION: main
**08-23 13:56:46.008: E/AndroidRuntime(365): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.delhicious.suryastra/com.delhicious.suryastra.DelhimapActivity}: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:14:02.847

Download Code example from below link, it may help you.

[Tab Sample](http://www.mediafire.com/file/u66hhp295s5wtjt/Tab_Sample.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:56:10.567

在您的布局文件中替换`@+id/tabhost`为。`@android:id/tabhost`

# iphone - 如何在 UIwebview 中维护和清除会话？

> ID：12073043
> 
> 赞同：3
> 
> 时间：2012-08-22T12:21:38.037
> 
> 标签：iphone, ios

如何在 iphone sdk 的 UIwebview 中维护和清除会话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:27:42.217

只需从应用程序中删除 cookie。我将它用于 FBGraph，因为我无法从 Facebook 注销。你可以使用这个。

```
 NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies])
    {
        NSString* domainName = [cookie domain];
        NSRange domainRange = [domainName rangeOfString:@“yourDomainName"];
        if(domainRange.length > 0)
        {
            [storage deleteCookie:cookie];
        }
    } 
```

# magento - 应用折扣代码的 Magento 小计/增值税错误 - PayPal 错误的付款明细

> ID：12073044
> 
> 赞同：2
> 
> 时间：2012-08-22T12:21:48.427
> 
> 标签：magento, paypal, checkout, subtotal, discount

我非常希望有人能够帮助解决我们的 magento（版本 1.6.2.0）结帐和应用折扣代码时似乎发生的这个错误。这不是最容易解释的，所以我附上了一张图片：

![在此处输入图像描述](../Images/f629b1ad4f60fe16e9b55dbc6a3e1e33.png)

[http://i.imgur.com/iX1Qh.png](https://i.imgur.com/iX1Qh.png)

非常感谢您的宝贵时间。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T15:26:31.500

这里的问题是，贝宝认为不包括增值税的商品总折扣，而在 magento 中，折扣是整体计算的。由于 Magento 没有将增值税金额传递给贝宝，因此贝宝会计算它。

如果您想解决如何纠正，请告诉我。

# assembly - 如何调用这个子程序？

> ID：12073050
> 
> 赞同：0
> 
> 时间：2012-08-22T12:22:04.463
> 
> 标签：assembly, mips, subroutine, nios

我正在 NIOS II IDE 中学习 MIPS 32 位汇编，我有一个完整的工作子例程，它将存储在 r4 和 r5 中的两个数字相乘并在 r2 中返回结果：

```
 .global muladd            # makes label "main" globally known

        .text                   # Instructions follow
        .align  2               # Align instructions to 4-byte words

muladd:
   movi r2, 0 # total = 0
   movi r8, 0 # i = 0
L1:   # if( i >= a ) goto L2
   bge r8, r4, L2 # a i r4
    # total = total + b
   add r2, r2, r5 # öka b med r5
   addi r8, r8, 1 # i = i + 1
   br L1 # goto L1
L2: # return( total )
ret 
```

如何调用子例程并从中打印一些内容以确保它按预期工作？这是我的第一个子程序，我以前从未调用过子程序，所以如果我不能马上理解所有内容，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T01:05:26.083

您可以像这样从 main 调用子例程：

```
main:
  ...
  li r4, 123    // load some test data into r4 and r5
  li r5, 1
  jal muladd    // call muladd. Return address is stored in r31
  nop           // branch delay slot
  // muladd returns to this address. 
  // If muladd worked correctly r2 should contain decimal 123+1, or 124
  // print subroutine call goes here
  ... 
```

Muladd 通过使用`jr r31`（跳转到寄存器 31 中包含的地址）返回。您的非标准环境可能将其拼写为`ret`.

# facebook-fql - Facebook FQL：如何获取专辑的位置 ID？

> ID：12073052
> 
> 赞同：0
> 
> 时间：2012-08-22T12:22:12.000
> 
> 标签：facebook-fql

获取有关专辑的信息时，我只能获取位置名称：

```
select aid, owner, location from album; 
```

但我还需要一个地点 ID 以进行进一步操作。

我不能只查询“地点”表来返回具有专辑位置名称的地点（“名称”列不是唯一的，也没有在地点表中编制索引）。

我怎样才能得到那个地方ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:51:08.860

用户可以将他们喜欢的*任何内容*放入此字段——因此您从那里获得的信息不一定要与 Facebook 上的任何特定位置相对应。

例如，我可以将我的相册命名为“Photos from my Holidays in 2012”，然后在字段中输入“New York, London, Berlin, Tokyo”——因此在这些情况下，您不能期望 API 返回特定的位置 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:46:25.477

找到了。在获取与该相册关联的照片时，可以从“照片”表中获取它：

```
select aid, place_id from photo where pid = (select cover_pid from album where aid = you_post_attachment_fb_object_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T10:26:51.980

这在 100% 的情况下是行不通的。因为相册可能是空的，或者相册/封面照片的位置可能不同。

# xpages - 仅显示未读文档当前视图？

> ID：12073054
> 
> 赞同：1
> 
> 时间：2012-08-22T12:22:22.113
> 
> 标签：xpages, xpages-ssjs

有人建议在 XPages ViewPanel 中实现 @Command([ViewShowOnlyUnread]) 吗？

是否可以实现“下一个未读”和“上一个未读”功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:23:38.773

不要将视图面板绑定到标准视图数据源，而是尝试将其 value 属性设置为以下表达式：

```
importPackage(com.ibm.xsp.model.domino);
var targetView = database.getView("Some View");
var unreadEntries = targetView.getAllUnreadEntries();
var unreadModel = new DominoViewEntryCollectionDataModel(unreadEntries);
return unreadModel; 
```

然后，视图面板的行为应与绑定到真实数据源时的行为完全相同，但仅显示未读条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:23:59.040

蒂姆的出色回答..

这是带有重复控件的其他版本-

```
 <xp:repeat id="repeatUnreadEntries" var="viewEntry" indexVar="index" rows="30">
    <xp:this.value><![CDATA[#{javascript: return database.getView('viewName').getAllUnreadEntries()}]]></xp:this.value>
    <xp:this.facets>
        <xp:panel id="repeatHeader" xp:key="header">
            <xp:text disableTheme="true" escape="false">
                <xp:this.value>
                    <![CDATA[<TABLE><THEAD><TH>Cell1</TH><TH>Cell2</TH></THEAD><TBODY>]]>
                </xp:this.value>
            </xp:text>
        </xp:panel>
        <xp:panel id="repeatFooter" xp:key="footer">
            <xp:text disableTheme="true" escape="false">
                <xp:this.value><![CDATA[</TBODY></TABLE>]]></xp:this.value>
            </xp:text>
        </xp:panel>
    </xp:this.facets>
    <TR>
        <xp:repeat var="entryColVal" indexVar="colIndex" value="#{javascript:viewEntry.getColumnValues()}">
            <TD>
                <xp:text value="#{entryColVal}" />
            </TD>
        </xp:repeat>
    </TR>
</xp:repeat> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:45:18.877

如果您将数据和值属性设置为视图面板，则 Tim Works 提供的代码，如下所示。

```
<xp:viewPanel rows="30" id="viewPanel1">
    <xp:this.facets>
        <xp:pager partialRefresh="true" layout="Previous Group Next" xp:key="headerPager" id="pager1"></xp:pager>
    </xp:this.facets>
    <xp:this.data>
        <xp:dominoView var="view1" viewName="vwSrc"></xp:dominoView>
    </xp:this.data>
    <xp:this.value><![CDATA[#{javascript:importPackage(com.ibm.xsp.model.domino);
var targetView = database.getView("vwSrc");
var unreadEntries = targetView.getAllUnreadEntries();
var unreadModel = new DominoViewEntryCollectionDataModel(unreadEntries);
return unreadModel();}]]></xp:this.value>
        <xp:viewColumn columnName="col1" id="viewColumn1">
            <xp:viewColumnHeader value="Column1" id="viewColumnHeader1"></xp:viewColumnHeader>
        </xp:viewColumn>
</xp:viewPanel> 
```

# javascript - JavaScript replace() 方法：删除字符串末尾和开头的空格

> ID：12073070
> 
> 赞同：6
> 
> 时间：2012-08-22T12:23:16.797
> 
> 标签：javascript, regex, replace

> **可能重复：**
> [如何在 javascript 中修剪字符串？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)

通过在 javascript 中使用 replace 方法，我试图删除字符串开头和结尾之间的空格：

这是我的代码：

知道我应该如何获得结果吗？

```
input  -> "   first second     ".replace(/[^\s|\s$]/g, ''); // " "
output -> "first second" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:29:26.497

这称为修剪。

您需要括号而不是正则表达式中的方括号，还需要空格说明符上的乘数以匹配多个空格：

```
var s = "   first second     ".replace(/(^\s+|\s+$)/g, ''); 
```

演示：http: [//jsfiddle.net/Guffa/N7xxt/](http://jsfiddle.net/Guffa/N7xxt/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:27:47.823

在脚本的开头添加：

```
// Add ECMA262-5 string trim if not supported natively
//
if (!('trim' in String.prototype)) {
    String.prototype.trim= function() {
        return this.replace(/^\s+/, '').replace(/\s+$/, '');
    };
} 
```

然后用于`yourString.trim()`删除字符串开头和结尾的空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:42:46.367

您应该使用括号 () 来指定要匹配管道“|”的左侧或右侧 符号，而不是方括号。方括号实际上匹配字符集（即，[grapes] 将匹配“g”、“r”、“a”、“p”、“e”或“s”的单个实例，而 (grapes|apples)将匹配“葡萄”或“苹果”）。

此外，您缺少的另一件事是“数量”的指示。换句话说，一旦你匹配了一个空格（\s），它应该寻找多少个空格？在您的示例中，它仅匹配单个空格字符。您可能希望匹配字符串左侧和右侧存在的尽可能多的连续空格。为此，您需要在字符 \s 之后立即附加 *（匹配零个或多个）或 +（匹配一个或多个）。

所以，要重写你的正则表达式：

```
var input = "      first second      ";
var trimmed = input.replace(/(^\s+|\s+$)/g, '');
console.log(trimmed); 
```

您可以将这些行复制并粘贴到 JavaScript 控制台中，以查看是否获得了所需的输出。这里的正则表达式字面意思是，“匹配字符串开头的一个或多个空格字符，或者一个或多个空格字符紧跟字符串结尾。” 然后 replace 函数获取该匹配项并将其替换为 ''。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:25:59.787

为什么要更换方法？只需使用修剪。IE。来自 jQuery 库

[http://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:29:43.887

您可以使用 jQuery 修剪。

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
        <pre id="original"></pre>
        <pre id="trimmed"></pre>
<script>
  var str = "         first second         ";
  $("#original").html("Original String: '" + str + "'");
  $("#trimmed").html("After trimed: '" + $.trim(str) + "'");
</script>

</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:30:16.397

对您的模式进行一点修改：

```
(^\s+|\s+$) 
```

进而

```
var string = "     test     ";
string.replace(/(^\s+|\s+$)/gm, ''); 
```

应该管用 ;-）

# asp.net - ASP.NET 菜单控件 - 无法单击远程服务器上的菜单项

> ID：12073075
> 
> 赞同：1
> 
> 时间：2012-08-22T12:23:39.243
> 
> 标签：asp.net, internet-explorer, menu, controls, compatibility

ASP.NET 控件在开发环境中运行良好，但在进入生产远程服务器后，它不允许单击菜单项链接。

我注意到，问题仅在 IE (9) 中。在 Chrome 和 Fireworks 上运行良好。在 IE 兼容模式下也可以，但谁愿意……；）

通常我会在 CSS 中做一些更改，但是在具有相同浏览器的本地机器上它工作得很好。

我应该寻找新的菜单控件还是开始编写新的？你有什么意见？有类似的问题吗？

在此先感谢您的帮助。

# zend-framework - Zend 选择元素不起作用

> ID：12073078
> 
> 赞同：0
> 
> 时间：2012-08-22T12:23:46.233
> 
> 标签：zend-framework, zend-form, zend-form-element, zend-form-select

我的 IndexController 中的专辑和类别有以下 Zend_Debug 值：

```
 array(4) {
  ["id"] => string(1) "1"
  ["artist"] => string(18) "Paula Abdul Rashid"
  ["title"] => string(13) "Sunny Side Up"
  ["category_id"] => NULL
}

array(10) {
  [0] => array(2) {
    ["id"] => string(1) "1"
    ["name"] => string(7) "Country"
  }
  [1] => array(2) {
    ["id"] => string(1) "2"
    ["name"] => string(7) "Hip Hop"
  }
  [2] => array(2) {
    ["id"] => string(1) "3"
    ["name"] => string(4) "Jazz"
  }
  [3] => array(2) {
    ["id"] => string(1) "4"
    ["name"] => string(14) "Latin American"
  }
  [4] => array(2) {
    ["id"] => string(1) "5"
    ["name"] => string(3) "Pop"
  }
  [5] => array(2) {
    ["id"] => string(1) "6"
    ["name"] => string(3) "R&B"
  }
  [6] => array(2) {
    ["id"] => string(1) "7"
    ["name"] => string(4) "Rock"
  }
  [7] => array(2) {
    ["id"] => string(1) "8"
    ["name"] => string(3) "Ska"
  }
  [8] => array(2) {
    ["id"] => string(1) "9"
    ["name"] => string(5) "Asian"
  }
  [9] => array(2) {
    ["id"] => string(2) "10"
    ["name"] => string(11) "Modern folk"
  }
} 
```

在我的 Form_Albums 中，我有以下表单元素：

```
$id = new Zend_Form_Element_Hidden('id');
        $id->addFilter('Int');

        $artist = new Zend_Form_Element_Text('artist');
        $artist->setLabel('Artist')
               ->setRequired(true)
               ->addFilter('StripTags')
               ->addFilter('StringTrim')
               ->addValidator('NotEmpty');

        $title = new Zend_Form_Element_Text('title');
        $title->setLabel('Title')
              ->setRequired(true)
              ->addFilter('StripTags')
              ->addFilter('StringTrim')
              ->addValidator('NotEmpty');

        $category = new Zend_Form_Element_Select('category');
        $category->setLabel('Category')
                ->setRequired(true);

        $submit = new Zend_Form_Element_Submit('submit');
        $submit->setAttrib('id', 'submitbutton');

        $this->addElements(array($id, $artist, $title, $category, $submit)); 
```

我无法使用 Zend_Form_Element_Select 获得下拉列表显示。

解决方案更新：

我现在使用以下方法让它工作：

```
$category = new Application_Model_DbTable_Category();
$category_list = $category->findForSelect();

foreach ($category_list as $cat) {     //$data is your array variable
    Zend_Debug::dump($cat['id']." :: ". $cat['name']);
    $form->category->addMultiOption($cat['id'], $cat['name']);      
} 
```

感谢 Rishi 提出这个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:42:56.070

你的控制器中这样的东西可能会帮助你..

```
$form = new Form_Albums();
foreach ($data as $c) {     //$data is your array variable
$form->category->addMultiOption($c->id, $c->name);      
} 
```

# html - 动态站点的应用缓存

> ID：12073080
> 
> 赞同：4
> 
> 时间：2012-08-22T12:23:55.197
> 
> 标签：html, caching, html5-appcache

我正在尝试使用 HTML5 Appcache 通过缓存图像和 css/JS 文件来加速我的网络移动应用程序。该应用程序基于动态网页。

众所周知——当使用 Appcache 时，调用的 html 页面总是被缓存 -> 对动态网站不利。

我的解决方案 - 创建第一个静态页面并在此页面中调用清单文件 (manifest="cache.appcache") 并加载我所有的缓存内容。然后，当用户被重定向到另一个动态页面时，资源将已经可用。（当然，这第二个动态页面不会有清单标签）。问题是，如果第二个页面被用户刷新，**资源并没有从缓存中加载；它们是直接从服务器加载的！**

*此解决方案与在第一个动态文件上使用 Iframe 非常相似。我发现 Iframe 解决方案有完全相同的问题。*

有什么解决办法吗？Appcache 真的可以用于动态内容吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-23T10:04:17.470

是的，如果您以不同方式处理 url 参数，则 appcache 可用于动态内容。

我通过使用本地存储解决了这个问题（我使用了 jquery localstorage 插件来帮助解决这个问题）。

过程是

1.  当您通常从锚点或重定向中引用时，在页面内部，而是调用一个函数为您重定向。该函数将参数从url存储到localstorage，然后只重定向到不带参数的url。
2.  在接收目标页面上。从本地存储中获取参数。

重定向代码

```
function redirectTo(url) {
    if (url.indexOf('?') === -1) {
        document.location = url;
    } else {
        var params = url.split('?')[1];
        $.localStorage.set("pageparams", params);
        document.location = url.split('?')[0];
    };
} 
```

目标页面代码

```
var myParams = GetPageParamsAsJson();
var page = myParams.page;

function GetPageParamsAsJson() {
    return convertUrlParamsToJson($.localStorage.get('pageparams'));
}

function convertUrlParamsToJson(params) {
    if (params) {
        var json = '{"' + decodeURI(params).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}';
        return JSON.parse(json);
    }
    return [];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:28:39.657

我花了很长时间弄清楚如何缓存由这样的 URI 方案访问的动态页面：

```
domain.com/admin/page/1
domain.com/admin/page/2
domain.com/admin/page/3 
```

现在的问题是 appcache 不会缓存每个单独的 admin/page/... 除非您访问它。

我所做的是使用离线页面来表示您可能希望允许用户离线访问的这些页面。

离线页面中的 JS 查找 URI 并抓取它以找出它应该显示的页面并从 localStorage 中获取数据个别页面。

我对其他解决方案持开放态度，但这就是我能想到的让一堆单独的页面脱机而只访问单个管理页面的方法。

# java - 检票口在第 x 页上显示 pdf？（爪哇）

> ID：12073086
> 
> 赞同：0
> 
> 时间：2012-08-22T12:24:12.313
> 
> 标签：java, wicket

我想添加一个在特定页面上显示 pdf 的功能。我的代码中有 pdf 作为文件。所以我无法从我的网络服务器获取它。

我也有页码。我已经看到 adobe 插件接受 #page=1 但我不知道如何在基于 Web 的应用程序中使用它。

我还发现了一些在 iframe 中显示它的教程。但这些用途：

```
 org.apache.wicket.markup.html.DynamicWebResource 
```

而这已经不存在了。

我发现它被替换为

```
 org.apache.wicket.request.resource.ByteArrayResource 
```

有没有关于如何做到这一点的教程/提示（Wicket 1.5 或更高版本）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:29:31.773

您可以将 ResourceLink 与 ByteArrayResource 一起使用，或者您可以使用任何链接/按钮并在其 onClick/onSubmit() 中执行以下操作：

```
getRequestCycle().scheduleRequestHandlerAfterCurrent(
    new ResourceRequestHandler(new ByteArrayResource(...))) 
```

在这两种情况下，您可能都需要通过覆盖`org.apache.wicket.request.resource.ByteArrayResource#configureResponse()`和调用来设置 content-disposition 标头`ResourceResponse#setContentDisposition(INLINE)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:50:27.553

当您从您的对象标签中修改数据时，传递一个页码。这会将页面传递给 adobe 插件并自动设置页面。（我只在 chrome 21 和 IE9 中测试过）

```
 <object wicket:id="myFile" data="" border="1" width="100%" height="600px"></object>

    WebMarkupContainer wmc = new WebMarkupContainer("myFile");
    wmc.add(new AttributeModifier("data", (String) urlFor(rr, null)+"#page="+ pageNmbr));
    add(wmc); 
```

# c# - 退货清单 从视图到 MVC 3 中的控制器

> ID：12073088
> 
> 赞同：4
> 
> 时间：2012-08-22T12:24:20.407
> 
> 标签：c#, asp.net-mvc-3

我目前有一个对象`Tag`定义如下：

```
public class Tag
{
    public string Name { get; set; }
} 
```

现在，这是一个**模型**的集合属性，我将其定义为：

```
public class MyModel
{
    public string Name { get; set; }
    public IList<Tag> Tags { get; set; }
} 
```

在我看来，我有以下代码：

```
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(m => m.Name)
        @Html.TextBoxFor(m => m.Name)
    </div>

    <div>
        <!--
        Here I'd like a collection of checkbox inputs, where the selected names
        get passed back to my controller via the IList<Tag> collection
        -->
    </div>

    <input type="submit" value="Submit" />
} 
```

如何通过模型的 IList 集合返回复选框组中的选定项目（在注释中指定）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T12:44:28.790

使用**编辑器模板**

要拥有复选框，请在您的类中添加另一个 Proeprty`Tag`以指定它是否被选中。

```
public class Tag
{
    public string Name { get; set; }
    public bool IsSelected { set; get; }
} 
```

现在从您的`GET`操作中，您可以在模型的`Tags`属性中设置标签列表并将其发送到视图。

```
public ActionResult AddTag()
{
    var vm = new MyModel();

    //The below code is hardcoded for demo. you mat replace with DB data.
    vm.Tags.Add(new Tag { Name = "Test1" });
    vm.Tags.Add(new Tag { Name = "Test2" });

    return View(vm);
} 
```

现在让我们创建一个编辑器模板，转到 The`View/YourControllerName`并创建一个名为的文件夹`EditorTemaplates`，并在那里创建一个与 Property 类型 ( ) 同名的新视图`Tag.cshtml`。

![在此处输入图像描述](../Images/f441654e357db91c564c4e50d9f7b83c.png)

现在将此内容添加到新的编辑器模板中。

```
@model Tag
<p>
  <b>@Model.Name</b>   :
  @Html.CheckBoxFor(x => x.IsSelected) <br />
  @Html.HiddenFor(x=>x.Name)
</p> 
```

`EditorFor`现在在您的主视图中，使用Html Helper 方法调用您的编辑器模板。

```
@model MyModel
<h2>AddTag</h2>
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(m => m.Name)
        @Html.TextBoxFor(m => m.Name)
    </div>    
    <div>  
      @Html.EditorFor(m=>m.Tags)         
    </div>    
    <input type="submit" value="Submit" />
} 
```

现在，当您发布表单时，您的模型将具有标签集合，其中选定的复选框将具有 True`IsSelected`属性值。

```
 [HttpPost]
public ActionResult AddTag(MyModel model)
{
   if(ModelState.IsValid)
   {
      //Check for model.Tags collection and Each items IsSelected property value.
      //Save and Redirect(PRG pattern)
   }
   return View(model);
} 
```

像这样

![在此处输入图像描述](../Images/7c5256cc5dbafbb07f9ec4003daae9b2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:38:39.077

这类似于我在我正在工作的网站上所做的事情。

我使用了这个扩展[@Html.CheckBoxListFor()](http://www.codeproject.com/Articles/292050/CheckBoxList-For-a-missing-MVC-extension)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:13:36.360

如果您可以将 bool IsChecked 属性添加到您的 Tag 模型，那么您可以在循环中使用 EditorFor（或 CheckBoxFor）。诀窍是使用带有索引器（而不是 foreach）的 for 循环，以便您通过视图主模型访问属性。然后，modelbinder 将为您完成其余的工作，因此您的 POST 操作将接收 MyModel，其 Tags IsChecked 属性设置为正确的状态。

楷模：

```
public class Tag
{
    public string Name { get; set; }
    public bool IsChecked { get; set; }
}

public class MyModel
{
    public string Name { get; set; }
    public List<Tag> Tags { get; set; }
} 
```

风景：

```
@model MyMvcApplication.Models.MyModel
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(m => m.Name)
        @Html.TextBoxFor(m => m.Name)
    </div>

    <div>
        @for (int i = 0; i < Model.Tags.Count; i++)
        {
            @Html.DisplayFor(x => Model.Tags[i].Name)
            @Html.EditorFor(x => Model.Tags[i].IsChecked)
        }
    </div>
    <input type="submit" value="Submit" />
} 
```

# blackberry - 在黑莓中将 byte[] 转换为 long

> ID：12073091
> 
> 赞同：2
> 
> 时间：2012-08-22T12:24:41.267
> 
> 标签：blackberry

我从 c.dot 网络服务获取

```
byte[] data = new byte[] {-33, -96,0, 0, 0,0,0,0}; 
```

我想把它转换成长值我试过这个

```
long result = (long)ByteBuffer.wrap(index).getInt(); 
```

我得到的结果是`-543162368`实际值是`41183`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:16:40.710

首先，您要调用`getLong()`而不是`getInt()`在缓冲区上调用。

但是，您收到的数据是 little-endian，这意味着它首先从低位字节开始。`ByteBuffers`默认构造为大端顺序。您需要将顺序设置为`LITTLE_ENDIAN`以获取正确的值。

```
ByteBuffer buffer = ByteBuffer.wrap(index)
buffer.order(ByteOrder.LITTLE_ENDIAN);
long result = buffer.getLong(); 
```

由于您显然无法设置字节顺序或使用 getLong，因此您需要这样做：

```
// Reverse array
for (int i = 0; i < 4; ++i)
{
   byte temp = data[i];
   data[i] = data[8-i];
   data[8-i] = temp;
}

// Get two ints and shift the first int into the high order bytes 
// of the result.
ByteBuffer buffer = ByteBuffer.wrap(data);
long result = ((long)buffer.getInt()) << 32;
result |= (long)buffer.getInt(); 
```

`result`现在应该包含该值。

# android - onBackPressed 上的 Android 片段 NullPointerException

> ID：12073092
> 
> 赞同：2
> 
> 时间：2012-08-22T12:24:45.237
> 
> 标签：android, nullpointerexception, fragment, back-button

再会。

我有一个应用程序，它有一个包含 3 个容器的主要活动。每个容器都有一个“注入”到其中的片段。在开始这个主要活动时，第一个容器和片段被强制显示，而其他两个被隐藏。单击按钮时，应用程序移动到第二个容器，其中包含另一个片段，依此类推。

这很有效，它会前进到最后一个容器，然后返回到第一个带有 android 后退按钮的容器。

问题是，如果我停在第二个片段，并尝试返回第一个片段，而不激活第三个片段，应用程序崩溃并出现以下错误：

```
 java.lang.NullPointerException at
 pl.oke.arshop.activities.ARShopActivity.onBackPressed(ARShopActivity.java:155)
 at android.app.Activity.onKeyUp(Activity.java:1895) at
 android.view.KeyEvent.dispatch(KeyEvent.java:1281) at
 android.app.Activity.dispatchKeyEvent(Activity.java:2075) at
 android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2463) at
 android.view.ViewRoot.handleMessage(ViewRoot.java:1752) ... etc 
```

其中 ARShopActivity.java:155 是：

```
@Override
    public void onBackPressed() {

        if (isVirtualRoomOpened) {
            isVirtualRoomOpened = false;
            showFurnitureFragments();
        } else if (isFurnitureFragmentOpened) {
            isFurnitureFragmentOpened = false;
            showMainFragment();
        }

        super.onBackPressed();
        Log.d("Dab", " " + isVirtualRoomOpened + " "
                + isFurnitureFragmentOpened + " " + isMainFragmentOpened);

    }
} 
```

有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:31:21.793

啊，人为错误，isVirtualRoomOpened 变量在创建最后一个片段时被初始化，所以当我尝试从第二个片段跳回第一个片段时，第一个条件的参数为空。

将所有关于片段的布尔变量设置为“false”解决了这个问题。

# asp.net - HttpContext.Current.Request.ServerVariables["HTTP_HOST"] 返回内部地址？

> ID：12073099
> 
> 赞同：1
> 
> 时间：2012-08-22T12:25:08.760
> 
> 标签：asp.net, request.servervariables

我有一个包含在标记中的 ascx 控件：

```
<a href="<%# GetName() %>"> 
```

在 ascx.cs 代码隐藏文件中，我有以下内容：

```
protected string GetName() {
    return HttpContext.Current.Request.ServerVariables["HTTP_HOST"];
} 
```

在代码隐藏中还有一个按钮处理程序，它调用此方法：

```
protected void myButtonClick(object sender, EventArgs e) 
{
    string server = GetName();
    ...
} 
```

当我请求包含诸如[https://my.site.com/test.aspx](https://my.site.com/test.aspx)之类的控件的页面时，该页面向我显示了外部名称（my.site.com），但是当我点击按钮时，处理程序中的调用codebehind 获取内部名称 (my123.test.local)。

任何人都可以向我解释为什么会有不同吗？以及如何在代码隐藏中获取外部域部分？

ps SERVER_NAME 和 HTTP_HOST 给出相同的结果。

此外，当我从 Internet (https://my.site.com/test.aspx) 访问包含以下内容的页面时：

```
Response.Write("SERVER_NAME 1: " + Request["SERVER_NAME"]);
Response.Write("SERVER_NAME 2: " + HttpContext.Current.Request.ServerVariables["SERVER_NAME"]); 
```

第一行显示内部名称，第二行显示外部地址，例如：

```
SERVER_NAME 1: my123.test.local
SERVER_NAME 2: my.site.com 
```

# c# - Microsoft JScript 运行时错误：由于错误 c00ce514 无法完成操作

> ID：12073100
> 
> 赞同：1
> 
> 时间：2012-08-22T12:25:10.757
> 
> 标签：c#, asp.net

我写了一个文件下载代码，但是当我在我的项目中启动它时出现这个错误。只有这段代码工作得很好。但是在复杂的项目中发生了这个错误。你能帮忙吗？这是下载代码

```
string fileUrl = @filePath + "\\" + _DownloadableProductFileName;
            string newFileName = _DownloadableProductFileName;
            FileStream fs = new FileStream(fileUrl, FileMode.Open, FileAccess.Read);
            byte[] buffer = new byte[(int)fs.Length];
            fs.Read(buffer, 0, (int)fs.Length);
            fs.Close();
            Response.Clear();
            Response.AddHeader("Content-Length", buffer.Length.ToString());
            Response.AddHeader("Content-Disposition", "attachment; filename=" + newFileName);
            Response.BinaryWrite(buffer);
            Response.End(); 
```

错误代码是

> Microsoft JScript 运行时错误：由于错误 c00ce514，无法完成操作。

这里发生错误。

```
get_responseData: function XMLHttpExecutor$get_responseData() {
    /// <value type="String" locid="P:J#Sys.Net.XMLHttpExecutor.responseData">The text of the response.</value>
    if (arguments.length !== 0) throw Error.parameterCount();
    if (!this._responseAvailable) {
        throw Error.invalidOperation(String.format(Sys.Res.cannotCallBeforeResponse, 'get_responseData'));
    }
    if (!this._xmlHttpRequest) {
        throw Error.invalidOperation(String.format(Sys.Res.cannotCallOutsideHandler, 'get_responseData'));
    }

    return this._xmlHttpRequest.responseText; //here throw error
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T05:29:53.917

只是为了协议（迟了两年；）。当您的下载代码放置在执行异步回发的更新面板中时，会发生错误。您必须确保传递二进制文件的请求始终执行同步回发，以便浏览器能够解释二进制结果文件（而不是预期 html 片段的 XMLHttpExecutor）。

**解决方案：**将 Button 的名称作为[PostBackTrigger](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)或注册按钮

```
ScriptManager.GetCurrent(Page).RegisterPostBackControl(yourButton) 
```

# php - 如何在 Zend Studio 中配置 PHPMD（PHP Mess Detection）

> ID：12073101
> 
> 赞同：0
> 
> 时间：2012-08-22T12:25:16.827
> 
> 标签：php, zend-studio

我已经在 Zend Studio 中安装了 PHP PTI 工具作为插件。我可以找到配置 PHP 版本的选项，并为 PHP Depend、PHP Copy Paste Detector 和 Code Sniffer 使用 PEAR 库。但不适用于 PHP Mess Detector。

有没有办法配置它？它始终使用 Zend Studio 9 的内置 PHP 5.4 版本，仅此而已。从上下文菜单中使用它的输出给出：

> /Applications/Zend Studio.app/Contents/Resources/Java/plugins/com.zend.php.debug.debugger.php54.macosx_5.4.0.v20120214/resources/php54/php-cgi -c /var/folders/9t/ z7lbvftx6m3gs9jfqqfw5v1r0000gp/T/zend_debug/session6059915200436834623.tmp -d asp_tags=off -d short_open_tag=on /Applications/Zend Studio.app/Contents/Resources/Java/plugins/org.phpsrc.eclipse.pti.tools.phpmd_0.1.00000010628 /php/tools/phpmd.php /Users/sebey/Sites/sb/customer/app/include/library/Customer/Cms/Definition xml /Applications/Zend Studio.app/Contents/Resources/Java/ZendStudio.app/Contents /MacOS/file:/Applications/Zend Studio.app/Contents/Resources/Java/plugins/org.phpsrc.eclipse.pti.library.pear_1.2.2.R20120127000000.jar!/php/library/PEAR/data/PHP_PMD/资源/rulesets/codesize.xml,/Applications/Zend Studio.app/Contents/Resources/Java/ZendStudio.app/Contents/MacOS/文件：/Applications/Zend Studio.app/Contents/Resources/Java/plugins/org.phpsrc.eclipse.pti.library.pear_1.2.2.R20120127000000.jar!/php/library/PEAR/data/PHP_PMD/resources/rulesets/naming .xml,/Applications/Zend Studio.app/Contents/Resources/Java/ZendStudio.app/Contents/MacOS/file:/Applications/Zend Studio.app/Contents/Resources/Java/plugins/org.phpsrc.eclipse.pti .library.pear_1.2.2.R20120127000000.jar!/php/library/PEAR/data/PHP_PMD/resources/rulesets/unusedcode.xml dyld：库未加载：/usr/local/zend/mysql/lib/mysql/libmysqlclient。 16.dylib 引用自：/Applications/Zend Studio.app/Contents/Resources/Java/plugins/com.zend.php.debug.debugger.php54.macosx_5.4.0.v20120214/resources/php54/php-cgi 原因：image未找到/php/library/PEAR/data/PHP_PMD/resources/rulesets/naming.xml,/Applications/Zend Studio.app/Contents/Resources/Java/ZendStudio.app/Contents/MacOS/file:/Applications/Zend Studio.app /Contents/Resources/Java/plugins/org.phpsrc.eclipse.pti.library.pear_1.2.2.R20120127000000.jar!/php/library/PEAR/data/PHP_PMD/resources/rulesets/unusedcode.xml dyld：库未加载：/usr/local/zend/mysql/lib/mysql/libmysqlclient.16.dylib 引用自：/Applications/Zend Studio.app/Contents/Resources/Java/plugins/com.zend.php.debug.debugger.php54。 macosx_5.4.0.v20120214/resources/php54/php-cgi 原因：找不到图像/php/library/PEAR/data/PHP_PMD/resources/rulesets/naming.xml,/Applications/Zend Studio.app/Contents/Resources/Java/ZendStudio.app/Contents/MacOS/file:/Applications/Zend Studio.app /Contents/Resources/Java/plugins/org.phpsrc.eclipse.pti.library.pear_1.2.2.R20120127000000.jar!/php/library/PEAR/data/PHP_PMD/resources/rulesets/unusedcode.xml dyld：库未加载：/usr/local/zend/mysql/lib/mysql/libmysqlclient.16.dylib 引用自：/Applications/Zend Studio.app/Contents/Resources/Java/plugins/com.zend.php.debug.debugger.php54。 macosx_5.4.0.v20120214/resources/php54/php-cgi 原因：找不到图像pear_1.2.2.R20120127000000.jar!/php/library/PEAR/data/PHP_PMD/resources/rulesets/unusedcode.xml dyld：库未加载：/usr/local/zend/mysql/lib/mysql/libmysqlclient.16.dylib引用自：/Applications/Zend Studio.app/Contents/Resources/Java/plugins/com.zend.php.debug.debugger.php54.macosx_5.4.0.v20120214/resources/php54/php-cgi 原因：找不到图像pear_1.2.2.R20120127000000.jar!/php/library/PEAR/data/PHP_PMD/resources/rulesets/unusedcode.xml dyld：库未加载：/usr/local/zend/mysql/lib/mysql/libmysqlclient.16.dylib引用自：/Applications/Zend Studio.app/Contents/Resources/Java/plugins/com.zend.php.debug.debugger.php54.macosx_5.4.0.v20120214/resources/php54/php-cgi 原因：找不到图像

要么我的项目没问题，没有缺陷....我有点怀疑.... ;-)

# c++ - 构建 cookie 到期日期字符串时的性能问题 (c++)

> ID：12073106
> 
> 赞同：0
> 
> 时间：2012-08-22T12:25:43.707
> 
> 标签：c++, performance, cookies, string-formatting

我有一个 c++ 代码，它为 cookie 构建一个过期日期字符串（类似于：） `"Thu, 31-Dec-2037 22:00:00 GMT"`我需要它从“现在”开始为 90。这是我的代码：

```
 ptime toDay(second_clock::universal_time());
    toDay += days(90);
    date d = toDay.date();
    string dayOfWeek = d.day_of_week().as_short_string();
    int dayOfMonth = d.day();
    string month = d.month().as_short_string();
    int year = (int)toDay.date().year();

    stringstream strs;
    strs << dayOfWeek << ", " << std::setfill('0') << std::setw(2) << dayOfMonth << "-" << month << "-" << year << " " << toDay.time_of_day() << " GMT";

    string defaultExpiration = strs.str(); 
```

这段代码的性能真的很差，我猜它的`stringstream`用途。
如果你们中的任何人有更快的替代方案，我很乐意对其进行测试。
谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:28:15.630

由于您使用的是 boost，我认为您应该尝试一下它的 date_time 输入/输出系统。它的作用是在您指定的布局中自动格式化日期和时间。[在这里](http://www.boost.org/doc/libs/1_50_0/doc/html/date_time/date_time_io.html)你可以看到关于那个的 boost 教程。

基本上，您需要为您想要的格式的时间输出设置一个提升方面 - 有许多[格式说明符](http://www.boost.org/doc/libs/1_50_0/doc/html/date_time/date_time_io.html#date_time.format_flags)，我相信您会弄明白的。

我不确定这会带来性能提升，但我相信值得一试。毕竟，这就是该子系统的目的——输出日期和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:50:18.460

[使用FastFormat](http://www.fastformat.org/)找到了一种更快的方法，现在看起来像这样：

```
ptime today(second_clock::universal_time());
today += days(90);
date d = today.date();
int dayOfMonth = d.day();
int hoursOfDay = today.time_of_day().hours();
int minutesOfDay = today.time_of_day().minutes();

//this function if from "FastFormat"
string defaultExpiration(StringFormatter::Format("{0}, {1}{2}-{3}-{4} {5}{6}:{7}{8}:00 GMT",
    d.day_of_week().as_short_string(),
    dayOfMonth < 10 ? "0" : "",
    dayOfMonth,
    d.month().as_short_string(),
    (int)d.year(),
    hoursOfDay < 10 ? "0" : "",
    hoursOfDay,
    minutesOfDay < 10 ? "0" : "",
    minutesOfDay
    )); 
```

# python - 在 python 中处理字节

> ID：12073115
> 
> 赞同：3
> 
> 时间：2012-08-22T12:26:14.160
> 
> 标签：python, bytearray

我必须获取字节数组并将其发送到套接字。

结构看起来像：1 字节 + 2 字节 + 2 字节。

第一个字节是数字'5'，第二个字节应该从变量中获取`first`，第三个字节应该从变量中获取`second`。在 python 中执行此操作的正确方法是什么？

```
id = 5      # Fill as 1 byte
first = 42  # Fill as 2 bytes
second = 58 # The same as first 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T12:30:53.240

使用[`struct`模块](http://docs.python.org/py3k/library/struct.html)：

```
>>> import struct
>>> id, first, second = 5, 42, 58
>>> struct.pack('>bhb', id, first, second)
b'\x05\x00*:' 
```

您可能想弄清楚您的数据是 a) 小端还是大端，b) 有符号还是无符号；上面的示例使用大端排序和有符号值。

结果（在 python 3 中）是一个`bytes`对象。

# jquery - 隐藏功能不起作用

> ID：12073116
> 
> 赞同：0
> 
> 时间：2012-08-22T12:26:15.467
> 
> 标签：jquery

我有简单的隐藏和显示功能，但它不起作用。任何帮助，将不胜感激

```
<head>
<script type="text/javascript">
$(function(){
$('a').click(function(){
var visible= false;         
if(visible){
$('div').hide('slow')           
}

else {
$('div').show('slow')           
}
visible=!visible;
})
})
</script>
</head>
<body>
<div style="background:#F00; width:500px; height:50px"></div>
<a href="#">hide</a>
<div class="append"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:30:03.283

在事件处理程序`visible` **之外**声明和初始化：

```
var visible= false;  
$('a').click(function(){
   if(visible){
       $('div').hide('slow')           
   }
   else {
       $('div').show('slow')           
   }
   visible=!visible;
}); 
```

否则，您*每次*执行事件处理程序时都会进行初始化，所以`visible`永远不会是真的。`false` *`if(visible)`*

 *但是，您也可以使用[`.toggle` *^([docs])*](http://api.jquery.com/toggle/)来避免使用额外的状态变量：

```
$('a').click(function(){
    $('div').toggle();         
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:30:29.790

jQuery 有一个内置的隐藏/显示方法：[.toggle()](http://api.jquery.com/toggle/)。它在隐藏时显示您的元素，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:29:51.623

问题是这些行：

```
var visible= false;         
if(visible){
    $('div').hide('slow')           
} 
```

`visible`在这种情况下将始终为假，因此您的 div 永远不会被隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:31:47.807

尝试`toggle`改用。在此处查看第二个示例：

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

这是示例：

```
<!DOCTYPE html>
<html>
<head>
  <style>
    p { background:#dad;
        font-weight:bold;
        font-size:16px;
    }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button>Toggle 'em</button>

  <p>Hiya</p>
  <p>Such interesting text, eh?</p>
  <script>
    $("button").click(function () {
      $("p").toggle("slow");
    });    
  </script>

</body>
</html> 
```*

# javascript - 如何更改使用 jquery 的类？

> ID：12073117
> 
> 赞同：0
> 
> 时间：2012-08-22T12:26:16.623
> 
> 标签：javascript, jquery, css

我的 JSP 页面中有以下 HTML 代码：

```
<label class="txt12Red">Label 1</label>
    <label class="txt12Red">Label 2</label>
<label class="txt12Red">Label 3</label> 
```

我需要用 to 更改所有标签的`class="txt12Red"`类`class="txt12"`。这将在一些 JavaScript 事件上完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T12:28:19.760

只是一个 onclick 事件的示例：

```
$("label").on("click", function() {
    $("label.txt12Red")
        .addClass("txt12")
        .removeClass("txt12Red");
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T12:33:09.213

您可以使用`toggleClass method`：

```
$("label").click(function() {
   $("label.txt12Red").toggleClass("txt12Red txt12");
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:33:08.320

您不能直接更改课程，但是您可以删除您不想要的课程，然后添加您想要的课程。

```
function changeClass(oldClassName,newClassName){
$("label."+oldClassName).removeClass(oldClassName).addClass(newClassName);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:36:38.513

试试这个[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)你可以找到更多细节

# javascript - Node.js - 组织代码和闭包 - SFTP/Inotify

> ID：12073118
> 
> 赞同：0
> 
> 时间：2012-08-22T12:26:17.477
> 
> 标签：javascript, node.js, ftp, sftp

我希望我能就为什么我的 nodejs 程序的行为方式得到一些建议。

我正在使用两个模块，node-sftp 和 node-inotify。我已经设置 node-inotify 来监视目录并在其中写入内容时调用函数，该函数是 sftp 上传。

现在我遇到的问题是一次处理一个文件很好，但是当我一次将 4 个文件放到那里时，该函数被调用了四次，但只有一个 sftp 上传通过。

我是否需要以特定方式订购我的代码以确保 sftp 上传发生 x 次，这可能与闭包有关吗？

这是我的代码的基本版本...

*   当“监视”目录发生某些事情时调用“event_handler”
*   “check_event”判断这种类型的事件是否是我们想要的，在这种情况下它是一个“写”
*   “ftp_to_server”准备连接细节
*   "do_ftp" 基本上使用 node-sftp 模块来执行 sftp 上传

    ```
    event_handler = function(event){
        var supplier;
        check_event(event, supplier, type, ftp_to_server);
    }; 
    ```

==================

```
 function check_event(event, handler)
    {
        if (event.type === 'xxxxxx') {
            var file_to_process_name = 'abc';
            var file_to_process_dir = 'abc';
            var remote_dir = 'abc';
            handler(file_to_process_name, file_to_process_dir, remote_dir);
        }
    }

    function ftp_to_server(file_to_process_name, file_to_process_dir, remote_dir) {
        var connection_details = conf.ftp.connections
        do_ftp(connection_details, file_to_process_name, file_to_process_dir, remote_dir);    
    }

    function do_ftp(connection_details, file_to_process_name, file_to_process_dir, remote_dir) {

        var credentials = {
            // FTP settings here
        };
        var local_file = file_to_process_dir + file_to_process_name;
        var remote_file = remote_dir + file_to_process_name;

        connection = new sftp(credentials, function(err) {
            if (err){
                throw err;
            }
            connection.writeFile(remote_file, fs.readFileSync(local_file, "utf8"), null, function(err) {
                if (err) {
                    throw err;
                }

                console.info('FTP PUT DONE');

            });
        });
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:23:02.787

你的“connection = new sftp(credentials, function(err) {”应该是 var connection = new sftp(credentials, function(err) {

您当前对其进行编码的方式，“连接”是一个全球性的，您正在重写它。

# javascript - 使用 splice(0) 复制数组

> ID：12073119
> 
> 赞同：24
> 
> 时间：2012-08-22T12:26:30.010
> 
> 标签：javascript

我有两个数组：ArrayA 和 ArrayB。我需要将 ArrayA 复制到 ArrayB 中（而不是创建引用）并且我一直在使用`.splice(0)`，但我注意到它似乎从初始数组中删除了元素。

在控制台中，当我运行此代码时：

```
var ArrayA = [];
var ArrayB = [];

ArrayA.push(1);
ArrayA.push(2);

ArrayB = ArrayA.splice(0);

alert(ArrayA.length); 
```

**警报显示 0**。我在做什么错`.splice(0)`？？

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-22T12:28:54.930

您想使用`slice()`（[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)）而不是`splice()`（[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)）！

```
ArrayB = ArrayA.slice(0); 
```

`slice()`保持原始数组不变，只创建一个副本。

`splice()`另一方面，只是通过插入或删除元素来修改原始数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T12:30:18.180

`splice(0)`从开始抓取所有项目`0`（即直到最后一个，即所有项目），**将**它们从原始数组中删除并返回它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T12:32:09.157

您正在寻找`slice`：

```
var a = [1,2,3,4,5]
   ,b = a.slice();
//=> a = [1,2,3,4,5], b = [1,2,3,4,5] 
```

你可以使用`splice`，但它会*破坏*你原来的数组：

```
var a = [1,2,3,4,5]
   ,b = a.splice(0);
//=> a = [], b = [1,2,3,4,5] 
```

# gwt - GWT MVP 在 Place 更改时更新 Activity 状态

> ID：12073123
> 
> 赞同：6
> 
> 时间：2012-08-22T12:26:42.537
> 
> 标签：gwt, mvp, gwt-mvp, gwt-places, gwt-activities

在地点更改时更新活动状态的最佳做法是什么？假设您有一个带有视图的活动，该视图显示类别列表和类别中的项目列表。如果选择了不同的类别，则应用程序将使用类别 ID 转到新位置。然后我想只刷新项目而不是创建也重新读取类别列表的新活动。

我目前的做法是这样的：

```
public class AppActivityMapper implements ActivityMapper {

    private ItemListActivity itemListActivity;

    ...

    public Activity getActivity(final Place place) {
        final Activity activity;

        if (place instanceof ItemListPlace) {
            if (itemListActivity == null) {
                itemListActivity = new ItemListActivity((ItemListPlace) place, clientFactory);
            } else {
                itemListActivity.refresh((ItemListPlace) place);
            }
            activity = itemListActivity;
        } else {
            itemListActivity = null;
        }

        ...
        return activity;
    }

    ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:44:49.410

替代方案是：

*   `PlaceChangeEvent`从活动中收听s （然后您可以使用`FilteredActivityMapper`and`CachingActivityMapper`来*缓存*活动中的活动`ActivityMapper`，以便在被询问时仅创建一个新活动）。†</p>

*   让一些组件监听`PlaceChangeEvent`s 并将它们*转换*为面向业务的事件，然后活动会监听这些事件而不是`PlaceChangeEvent`s，否则同上。

*   将活动与“屏幕”分离，使“屏幕”成为带有`reset()`方法的单例，并从活动中调用该方法`start`（在这种情况下可能将类别 ID 作为参数传递）。作为单例的“屏幕”可以确保只加载一次类别列表。

*   在您的情况下，您也可以简单地将类别列表放在共享缓存中，这样您就不必通过创建新的活动来重用您的活动，类别列表将被检索一次并放入缓存中，后续活动实例只会使用缓存中的内容。这与上面类似，但更简单，并且缓存可以被应用程序的其他部分使用。

我个人宁愿采用你的方法（有一个小例外，见下文），因为它是最简单/最容易的。将活动与“屏幕”分离也是一种选择；GWT 团队开始在 Expenses 示例中探索这种方法（使用 MVP 将活动责任与演示者责任分离），但遗憾的是从未完成。

除此之外，我认为目前还没有真正出现任何*最佳实践。*

* * *

†。我不喜欢将我的活动与它们使用的地方结合起来（我也不太喜欢`goTo`调用的结合，但还没有找到一个干净简单的替代方案），所以我宁愿不去使用此选项；同样，我不会`refresh`像您那样将位置传递给活动构造函数和方法，而是从该位置提取信息并将其传递给活动（例如，在您的情况下，仅将类别 ID 提供给活动，不是`ItemListPlace`实例；然后我会`setCategory`在所有情况下都简单地调用，甚至不将类别 ID 传递给构造函数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:11:04.350

在我看来，

*   the 的作用`ActivityMapper`是给你一个`Activity`from a `Place`。
*   的作用是从给定的返回`ActivityManager`开始，如果不同则停止当前的。在您的情况下，您想“更新/刷新”当前的.`Activity``ActivityMapper``Activity`

所以我会修改`ActivityMapper`它，因为它总是会给我返回`Activity`给定类型的相同实例`Place`。这样做的一个好方法是使用 GIN 并使用单例范围`...in(Singleton.class)`注入您的`Activity`.

如果您这样做，在更改 url 时，如果地点保持不变（意味着您的 url 在 # 之后和之前 :) 具有相同的单词，因此您的地点的类型保持不变，这`ActivityMapper`将给您返回相同的实例`Activity`所以`ActivityManager`就什么都不做了`Activity`。检查 l.126 的`ActivityManager`

```
if (currentActivity.equals(nextActivity)) {
  return;
} 
```

对我来说，你有两个选择。第一个，正如 Thomas 所说，是`PlaceChangeEvent`在你的`Activity`. 您将收到的新`Place`参数可以根据给定的新 url 在内部包含新参数，并且您可以“更新/刷新”您的`Activity`.

第二个，我发现更符合 Activity/Place 模式的方法是修改 ，`ActivityManager`以便它在返回`Activity`时调用 update(Place) 方法与 current 相同。`Activity``ActivityMapper``Activity`

我还没有尝试过这些解决方案中的任何一个，但我很快就会......我可能能够在那个时候更新那个帖子。

[您可以在我在我的博客上写的关于该主题的这篇文章中找到更多信息](http://wpamm.blogspot.fr/2013/03/gwt-activity-place-introduction.html)

这是我为帮助我理解模式而制作的一个小模式，希望它会有所帮助：

![在此处输入图像描述](../Images/3dd104224521ac12fd30aeb682a4e35f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T20:25:07.423

我不会在我的 ActiviyMapper 中执行任何逻辑，除了返回一个活动、创建一个新活动或提供前一个活动（或 null）。据我说，映射器不必知道 refresh() 或活动的作用。

如果是这样，那么“刷新（）”的逻辑将通过持有令牌的地方提供给活动。该令牌应该保存有关请求状态（新页面、重新加载、ID 等）的信息。

在活动中，首先，它请求与此活动相关的视图（提示：由“ClientFactory”提供的单例是很好的做法），然后它为该视图创建一个演示者，并将它们绑定在一起。

最后，活动将使用该地点的令牌向演示者提供有关状态的任何信息。然后，它在页面中添加视图。

很高兴知道默认情况下，对于地点和活动，去同一个地方不会做任何事情（不重新加载）。但是您可以使用令牌和活动映射器轻松处理它。

希望您能找到适合您情况的解决方案。祝你好运。

# html - 在 Rails 中使用视图

> ID：12073130
> 
> 赞同：0
> 
> 时间：2012-08-22T12:27:04.953
> 
> 标签：html, ruby-on-rails, ruby, views

所以，我现在有两个可以从数据库中检索的文件。它们包含如下：

1.  描述某些项目的信息表。本质上，键值对。像这样的东西：

    ```
     ----------------------------------------------------
    |   id     |    count     |        description       |
    |----------------------------------------------------|
    |    1     |    6         |        description       |
    |   43     |    0         |        description       |
    |   25     |    11        |        description       |
     ---------------------------------------------------- 
    ```

2.  从集合到 ID 的映射：

    ```
     -----------------------
    |   collection |   ids  |
    |-----------------------|
    |        a     |  1,10  |
    |        b     |  25,43 |
    |        c     |        |
     ----------------------- 
    ```

*（这几乎可以肯定是一个不清楚的标题，但我不确定我在这里缺少什么。）*

我想创建一个页面，这样我基本上可以查看第二个表中的内容（这相当简单）。我希望能够单击第二个表中的一个集合 ID，然后转到仅显示第一个表中相关行的页面。

也就是说，你点击 b，你会看到：

```
 ----------------------------------------------------
|   id     |    count     |        description       |
|----------------------------------------------------|
|   43     |    0         |        description       |
|   25     |    11        |        description       |
 ---------------------------------------------------- 
```

我不知道该怎么做，我想要一些指示。

数据当前存储在一些`yaml`文件中，但我可以以任何我想要的方式存储它，真的。我正在为这个项目使用 Rails。这感觉应该很容易，我只是没有正确理解 Rails 中的视图。

我可以创建某种适用于每个 id 并同时显示其中一组的模型吗？这感觉是最方便的解决方案，因为它可能允许我拥有指向 id 的硬链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:44:06.500

如果您可以使用 RoR 创建页面，则必须阅读[此](http://guides.rubyonrails.org/getting_started.html#the-mvc-architecture)内容。之后，您必须在控制器（控制器中的操作）中创建对象（例如：@data = Post.all）。该对象将具有来自数据库的数据。最后，您的视图文件使用此对象并显示您的 html 代码。例如 index.html.erb：

```
<h1>Index</h2>
<table>
 <thead>
   <th>ID</th>
   <th>Desc</th>
 </thead>
 <tbody>
  <% @data.each do |d| %>
    <tr>
      <td><%= d.id %></td>
      <td><%= d.desc %></td>
    </tr>
  <% end %>
 </tbody>
</table> 
```

如果我不明白你的问题很抱歉。

# visual-studio - VS 2012 帮助查看器中出现脚本错误

> ID：12073133
> 
> 赞同：1
> 
> 时间：2012-08-22T12:27:09.890
> 
> 标签：visual-studio, documentation

我正在使用 Sandcastle 帮助文件生成器 (1.9.4.0)、Sandcastle (2.7.0.0) 和 .NET Framework 4.0 程序集为 Visual Studio 生成类引用。

我在 Sandcastle 帮助文件生成器中使用的 Framework 版本是 .NET 4.0.30319，帮助文件格式是 MSHelpViewer，Presentation Style 是 vs2005。它在 VS 2010（帮助查看器 1.1）中运行良好。它在 VS 2012 (Help Viewer 2.0) 中显示脚本错误。我需要更改任何设置来解决此问题吗？ ![错误](../Images/f8ac9dd0bb13545aa4a11d92f8e6739a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:51:54.613

我随机收到此错误。网上有很多东西需要你弄乱注册表等等。我在某处找到的一个更简单的解决方案是选择管理内容图标，然后对您选择的帮助内容进行一些更改，例如添加一些当前不在的帮助主题，或删除一些主题。然后单击更新，之后通常就可以了！

# java - 如何使用 IText 在 PDF 的页面中间插入内容

> ID：12073135
> 
> 赞同：2
> 
> 时间：2012-08-22T12:27:12.550
> 
> 标签：java, pdf, itext, tiling

我需要将内容插入 PDF 的页面中间。

内容可以是动态表格或图像。

我的概念是首先将 PDF 分成两部分，然后通过替换占位符字段来获取要添加和附加的新内容。

* * *

根据 IText，拆分称为平铺，这是相同的示例。 [http://itextpdf.com/examples/iia.php?id=116](http://itextpdf.com/examples/iia.php?id=116)

上面的代码有两个缺点： 1\. 它将页面分成 16 个部分。但这是示例的一部分。我仍然无法想出将文件分成两部分的方法。2\. 其次，将拆分页面转换为完整页面，从而扰乱其比例。

* * *

重新排列代码是另一个问题。

其余内容应以附加模式重新排序。但到目前为止，我只找到了添加完整新页面的代码，而不仅仅是内容。

我找到了一个通过替换占位符来附加 PDF 内容的代码：

```
float[] fieldPosition= pdfTemplate.getAcroFields().getFieldPositions("tableField");
PdfPTable table = buildTable();
PdfContentByte cb = stamper.getOverContent(1);
table.writeSelectedRows(0, -1, fieldPosition[1],fieldPosition[4],cb); 
```

* * *

请帮我解决这个要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:44:00.933

PDF 是演示格式，而不是版本格式。换句话说，它不是为允许内容插入而设计的，原始内容会优雅地重排。因此，没有任何工具（至少，我所知道的，当然也不是 iText）能够让您实现您的要求。

我的建议 ：

*   拒绝分配，因为它不可行，或
*   获取原始文档，插入所需的额外内容，**然后**转换为 PDF。

# java - Java正则表达式从方括号中提取文本

> ID：12073137
> 
> 赞同：2
> 
> 时间：2012-08-22T12:27:19.423
> 
> 标签：java, regex

如果文本仅包含点而没有其他特殊字符，如何提取方括号中的文本？例如我想从中提取“com.package.file”

```
 "ERR|appLogger|[Manager|Request]RequestFailed[com.package.file]uploading[com.file_upload]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:31:59.833

```
String s = "ERR|appLogger|[Manager|Request]RequestFailed[com.package.file]uploading[com.file]";
Pattern pattern = Pattern.compile("\\[([A-Za-z0-9.]+)\\]");
Matcher m = pattern.matcher(s);
if (m.find()) {
    System.out.println(m.group(1)); // com.package.file
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:31:22.713

类似的东西：

```
^\w+\|\w+\|\[\w+\|\w+\]\w+\[([\w\.]+)\]\w+\[[\w\.\_]+\]$ 
```

会让你捕捉到它。

```
Pattern pattern = Pattern.compile("^\\w+\\|\\w+\\|\\[\\w+\\|\\w+\\]\\w+\\[([\\w\\.]+)\\]\\w+\\[[\\w\\.\\_]+\\]$", Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher("ERR|appLogger|[Manager|Request]RequestFailed[com.package.file]uploading[com.file_upload]");
System.out.println(matcher.group(1)); 
```

# python - 尝试按数字时出现Python小键盘错误

> ID：12073139
> 
> 赞同：1
> 
> 时间：2012-08-22T12:27:25.857
> 
> 标签：python, pygtk

嘿伙计们，我是 python 的初学者，我正在做一个在文本框中显示数字的数字键盘。

GUI 可以正常工作，但是当我想按下按钮时，我会收到以下消息：

回溯（最近一次通话最后）：

```
File "C:\Users\E-net\Documents\PythonT9\python.py", line 5, in press
    num = entry.Box.get_text()
AttributeError: 'gtk.Entry' object has no attribute 'Box' 
```

我不知道为什么:(

编码

```
import gtk

def press(widget):

    num = entry.box.get_text()
    pnum = widget.get_label()
    entry.set_text(num+pnum)

def send_press(widget):
    print "dialing:" + entry.get_text()

win = gtk.Window()
win.connect('destroy', lambda w: gtk.main_quit())

box = gtk.VBox()
win.add(box)

entry = gtk.Entry()
box.pack_start(entry,False)

table = gtk.Table(2,2, gtk.TRUE)

a = [1,2,3,4,5,6,7,8,9,"#",0,"*"]
x = 0
y = 0

for i in a: 
    button = gtk.Button(str(i))
    button.connect("clicked",press)
    table.attach(button,x,x+1,y,y+1 )

    x+=1
    if x > 2:
        x = 0
        y+=1

box.pack_start(table)

send = gtk.Button("SEND")
send.connect("clicked",send_press)
box.pack_start(send)
win.show_all()

gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:34:50.887

看起来很简单 - 只需更改：

`num = entry.box.get_text()`

到

`num = entry.get_text()`

顺便说一句，如果您只是查看 pygtk 文档，您可以在 cca 30 秒内解决这个“谜团”。

# java - Android 使用 cookie 保持登录状态以获取 json 数据

> ID：12073143
> 
> 赞同：1
> 
> 时间：2012-08-22T12:27:37.577
> 
> 标签：java, android, json, cookies

到目前为止，已经以不同的方式提出了这个问题，但我无法找到解决这个特定问题的方法。

**简短版：** 我正在寻找一种从需要身份验证的 URL 中获取 json 的方法。而不是每次都进行身份验证，我希望它存储接收到的 cookie，这样它就不必重新登录，并且在随后的连接中保持登录状态。

**长版：** 基本上，我希望应用程序存储用户的用户名和密码（作为具有共享首选项的内部私有字符串）。然后，它会调用登录 url 进行身份验证并保持登录状态（获取 cookie）。完成此操作后，我希望程序从不同的 url 获取 json 数据（例如，需要用户通过 cookie 登录）。即使在应用程序暂停或销毁后，我也希望它保持不变。它可以被认为是一个类似于 chrome 插件的想法，一旦登录就可以简单地从网站获取数据。

我认为这个解决方案对许多刚接触 android 的开发人员很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:32:21.107

试试这个，它将用户名传递和会话存储到共享首选项中

```
 app_preferences =    PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    userid=app_preferences.getLong("userid",0);
    username=app_preferences.getString("username", "");

    password=app_preferences.getString("password", "");

    session=app_preferences.getString("session", "");

class task extends AsyncTask<String, integer, Boolean>{
    //httpreqclass htrq= new httpreqclass();

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        showProgressDialog();
    }

    @Override
    protected Boolean doInBackground(String... params) {
        String usr=params[0];
        String p=params[1];
        String data[]=new String[2];
    String ur=  "http://192.168.1.45/Android.asmx/Login";

        // TODO Auto-generated method stub
    data=   postData(usr,p,ur);

    boolean sucess=false;
    try {
        JSONObject jso = new JSONObject(data[0]);
        sucess =jso.getBoolean("isSucceeded");
        if (sucess) {
              SharedPreferences.Editor editor = app_preferences.edit();

            JSONObject jsr=  jso.getJSONObject("result");
            Long a= jsr.getLong("Id");
            editor.putLong("userid", a);
                editor.putString("username", usr);
                editor.putString("password", p);
                editor.putString("session", data[1]);

             editor.commit(); // Very important

        }

    }catch (Exception e){

    }

        return sucess;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        // TODO Auto-generated method stub
    here put code what you want to do next

    }

}

public String[] postData(String u, String p,String url) {
    String asp = null,data = null;
    String[] rtrn=new String[2];

    //Log.e("i entrd here", "");

    try {
     HttpClient httpclient = new DefaultHttpClient(getHttpParams());
            HttpPost httppost = new HttpPost();
           HttpResponse response;
           List<NameValuePair> params = new ArrayList<NameValuePair>();                
           params.add(new BasicNameValuePair("EmailId", u));
           params.add(new BasicNameValuePair("PassWord", p));                    
           UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,HTTP.UTF_8);

    httppost.setEntity(ent);
            response = httpclient.execute(httppost);
            Header[] headers;
         headers = response.getHeaders("Set-Cookie");
            //Header atha= respone.getFirstHeader("PHPSESSID");
             List<Cookie> cookies = ((AbstractHttpClient) httpclient).getCookieStore().getCookies();

             if (cookies.isEmpty()) {
                Log.d("TAG","no cookies received");
             } else {
                for (int i = 0; i < cookies.size(); i++) {

                    if(cookies.get(i).getName().contentEquals("ASP.NET_SessionId")) {
                     asp = cookies.get(i).getValue();
                   }
                }
                Log.e("this is the cookiee", asp);
                }  

               HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                        StringBuilder sb = new StringBuilder();
                        String line = null;
                       while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                        }
                      is.close();
                      Log.e("", sb.toString());
                      rtrn[0]=sb.toString();
                      rtrn[1]=asp;

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    return rtrn;

 }

private HttpParams getHttpParams() {

        HttpParams htpp = new BasicHttpParams();

        HttpConnectionParams.setConnectionTimeout(htpp, 3000);
        HttpConnectionParams.setSoTimeout(htpp, 5000);

        return htpp;
    } 
```

您可以参考代码并按照您的逻辑制作应用程序

并注意下次向服务器发送请求时不要忘记在标头中添加会话/cookie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T04:24:54.223

只是为了不让问题得不到回答并解释我是如何解决问题的，这是我的答案。

我使用了[Loopj Android Async Http Client library](http://loopj.com/android-async-http/)，Instagram 和 Pinterest 等主要应用程序都在使用它。

以这种方式保持 cookie 的持久性非常简单。所有你需要的是：

```
AsyncHttpClient myClient = new AsyncHttpClient(); // a client instance

PersistentCookieStore myCookieStore = new PersistentCookieStore(this);
myClient.setCookieStore(myCookieStore); // setting the cookie store 
```

# excel - 单击按钮，工作表上的图像和文本框会闪烁

> ID：12073145
> 
> 赞同：1
> 
> 时间：2012-08-22T12:27:40.820
> 
> 标签：excel, vba

```
Application.ScreenUpdating = False
If ... something... Then
Range("calc02").EntireRow.Hidden = False // this is critical point
End If
Application.ScreenUpdating = True 
```

该行已经可见，因此无事可做，但工作表上的图像和文本框被重新绘制（它们闪烁）。我怎样才能防止这种闪烁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:39:05.863

添加

```
application.screenupdating = false
'your code here
application.screenupdating = true 
```

这应该可以解决大部分问题。

* * *

添加一个额外的 if 语句来检查该行是否需要设置为不隐藏，这样就不会不必要地这样做：

```
If ... something... Then
    if (Range("calc02").EntireRow.Hidden = true) then
        Range("calc02").EntireRow.Hidden = False // this is critical point
    end if
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:21:06.790

这是一个很好的记住 - 将行和列设置为隐藏或不隐藏真的很慢，特别是如果你必须重复这样做。因此，按照 enderland 的描述进行测试总是值得的。这应该有助于避免闪烁，并且应该运行得更快。

# java - Java Servlet 作为 HTTP 代理

> ID：12073147
> 
> 赞同：5
> 
> 时间：2012-08-22T12:27:47.353
> 
> 标签：java, servlets, proxy, http-headers

我已经阅读了数百篇 SO 帖子并研究了几个可用的 Java HTTP 代理源......但我找不到我的问题的解决方案。

我编写了一个代理 Http-Requests 的 WebApp。WebApp 正在运行，但链接和引用者被破坏，因为代理页面的“根”指向我的服务器的根，而不是我的 proxyservlet 的路径。

为了更清楚：

1.  我的 ProxyServlet 收到一个请求“ [http://myserver.com/proxy/ProxyServlet?foo=bar](http://myserver.com/proxy/ProxyServlet?foo=bar) ”

2.  ProxyServlet 现在从 ServerX 获取页面内容（例如“ [http://original.com/test.html](http://original.com/test.html) ”）

3.  只需从一个流读取和写入另一个流并复制标题，即可将页面内容传递给浏览器。

4.  浏览器显示页面，即浏览器显示的 URL 是原始请求（“ [http://myserver.com/proxy/ProxyServlet?foo=bar](http://myserver.com/proxy/ProxyServlet?foo=bar) ”），但所有相关链接现在都指向“ [http://myserver ” .com/XXX.html](http://myserver.com/XXX.html) ” 而不是“ [http://myserver.com/proxy/ProxyServlet/XXX.html](http://myserver.com/proxy/ProxyServlet/XXX.html) ”

是否有一个响应标头，我可以在其中更改“路径”，以便相关链接正确指向我的 ProxyServlet？

（重写页面内容和替换链接太难了，因为页面包含相对寻址的元素，如 javascript 代码和其他活动内容......）

（将我的 Servlet 的映射更改为“/*”也是不可能的...必须通过此路径访问...）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:34:33.290

您正在发明“反向代理”，却错过了“URL 重写”功能...在我的搜索结果顶部，这是一个开源代理 servlet：http: [//j2ep.sourceforge.net/docs/重写.html](http://j2ep.sourceforge.net/docs/rewrite.html)

此外，如果您必须这样做，您应该知道系统架构可能有问题。始终可以选择使用 Apache、nginex、Varnish 等独立代理，因为在开始扩展时您必须添加一个（或更多！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T22:17:56.110

听起来您正在代理的页面正在使用绝对链接，例如`<a href="/XXX.html">`，这意味着“无论在哪里找到此链接，都要相对于文档根目录查找它”。如果您可以控制它，最好的办法是让代理目标在链接时更加宽松，而不是使用`<a href="XXX.html">`. 如果你不能这样做，那么你需要使用 JSoup 重写这些 URL，一些示例代码：

```
Document doc = Jsoup.parse(rawBody, getDisplayUrl());

for(Element cssALink : doc.select("link[rel=stylesheet],a[href]"))
{
    cssALink.attr("href", cssALink.absUrl("href"));
}
for(Element imgJsLink : doc.select("script[src],img[src]"))
{
    imgJsLink.attr("src", imgJsLink.absUrl("src"));
}
return doc.toString(); 
```

# android - Android ViewFlipper 内容翻转后不可点击

> ID：12073149
> 
> 赞同：0
> 
> 时间：2012-08-22T12:27:50.520
> 
> 标签：android, viewflipper

我在使用 ViewFlipper 时遇到问题。在第一页我有一个 ListView，在第二页我有一个 WebView。

我可以单击第一页上的项目，翻到第二页，再翻到第一页。现在问题出现了:(我无法点击列表项。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:50:22.250

错误出现在动画中。

```
`android:fillAfter=false` 
```

解决了。

# java - ByteArrayOutputStream 在java声音中录制时出现内存不足错误

> ID：12073150
> 
> 赞同：3
> 
> 时间：2012-08-22T12:27:53.767
> 
> 标签：java

我遇到了一个很奇怪的问题。我正在编写下面的部分代码。

```
try {
    while (!stopCapture) {
        // Read data from the internal buffer of the data line.
        int cnt = this.recLine.read(tempBuffer, 0, tempBuffer.length);
        if (cnt > 0) {
            // Save data in output stream object.
            byteArrayOutputStream.write(tempBuffer, 0, cnt);
            // System.out.println(" bytes " + tempBuffer[0]);
        }// end if
    }// ends while

    // AudioSystem.write(myAIS, targetType, outputFile);
    byteToWave(byteArrayOutputStream);
    byteArrayOutputStream.close();
} catch (IOException e) {
    // TODO provide runtime exception to reach it to presentation layer
    e.printStackTrace();
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

recLine 是我将声音录制到 byteArrayOutputStream 的 TargetDataLine。在我的测试中，它可以正常工作到 40-48 秒，但是当它每次达到 49 秒时，它都会抛出以下异常：

```
Exception in thread "Thread-5" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2786)
    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)
    at com.actura.app.capture.ActuraRecorder.run(ActuraRecorder.java:109)
    at java.lang.Thread.run(Thread.java:619) 
```

我使用这种技术是因为我需要记录的字节，并且从这些字节中我成功地在 UI 上绘制了一个波形。

在测试期间，我知道当 byteArrayOutputStream 的大小仅为 7.3 mb 时会引发异常。

我可以将此 byteArrayOutputStream 写入随机访问文件，然后每次达到其限制时重置此 byteArrayOutputStream 吗？

我如何提前知道 byteArrayOutputStream 的限制？

我检查了 Integer.MAX_VALUE，但正如我所说，它只是在 7.3 mb 处引发了一个异常，所以我无法访问 Integer.MAX_VALUE。

这个小程序在互联网上运行，所以设置内存大小对我没有帮助。如何将其设置到我客户的计算机上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:35:23.220

您的问题是，JVM 内存不足，因为您将所有数据都保存在内存中。扩展堆空间暂时有帮助，直到您需要处理更长的音频。

一个想法可能是将`ByteArrayOutputStream`by交换`FileOutputStream`为临时`File`。这不需要将所有音频数据都保存在内存中。一个更好的解决方案是[Guavas](http://code.google.com/p/guava-libraries/) [`FileBackedOutputStream`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/FileBackedOutputStream.html)，它仅在数据超过某个阈值时将数据存储在临时文件中。

另一种解决方案是直接更新每个缓冲区的波形。通过创建一个方法，该方法只接收包含音频数据的缓冲区并将其应用于波形的当前状态。这样，您根本不需要存储音频数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:45:00.573

出现此问题是因为 Hotspot JVM 的堆在其大小上有一个固定的上限。默认限制取决于您的平台，但可能低至 40Mb。

您正在做的是从音频流中读取大量数据并将它们缓冲在内存中。鉴于堆有一个上限，您的应用程序最终会遇到该限制，结果将是`OutOfMemoryError`异常。

显而易见的解决方案是使用该`-Xmx`选项增加 JVM 的最大堆空间。（有关此选项的更多信息，请参阅 java 命令手册条目。）但是，您可以使 JVM 堆的大小有一个最终限制……取决于您的硬件、操作系统以及您是否使用 64位JVM。

您还可以将音频数据保存到文件中或尝试对其进行压缩或缩减，但这些都会使绘图变得更加复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:48:31.223

其他人讨论了问题的根源。

要解决它，要么：

1.  一次绘制一点字节，或者..
2.  存储一个`BufferedImage`，以小块的形式抓取字节，然后立即将它们绘制到图像上。

[第一种技术可能会导致类似You Tube Video](http://www.youtube.com/watch?v=B0O3lX1Idxg&list=UUgdkJu_ayEHk3yG9kEjdm-A&index=6&feature=plpp_video)中看到的内容

![声迹](../Images/ab380ae37d82ba4e1ff33b53ea54e716.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:29:33.207

您可以尝试增加`JVM`堆空间或尝试压缩声音数据以消耗更少的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:35:43.063

它肯定会填满你的记忆，并且在不同的计算机上它的行为会有所不同。您可以做的是使用一些`FileOutputStream`并将数据写入其中，一旦您的循环结束，从那里提取数据并将其转换为`wav`. 还将您的数据写入小字节包（最好是 4096）.. 确保您的长度`tempBuffer`不会增加超过 4096。

希望这可以帮助..

# c# - 实现 IList 门面，但 GetEnumerator 返回计数为 0

> ID：12073151
> 
> 赞同：1
> 
> 时间：2012-08-22T12:27:54.640
> 
> 标签：c#

我对 .NET 编程有点陌生，有一个问题让我非常困惑。

我正在尝试`IList<T>`在我的一个类中实现接口。我现在想保持简单，所以我只是使用了声明`List<T>`字段的功能来处理方法，并在两者之间添加了一些自定义数据处理。

大多数方法都运行良好，并且字段列表按预期添加。但是，当我尝试将类用作列表（例如`class.ForEach()`）时，它返回`Count`0。尽管内部`List<T>`计数为 25。

我确信这真的很简单，如果这个问题浪费了数据库空间，我深表歉意，但这确实让我退缩了。有大佬能帮我解决吗？

我将发布我当前的代码以显示我正在尝试做的事情：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Reflection;
using ClubEventsData;
using ClubEventsData.Attributes;
using ClubEventsDataHandling.System.Implementations.Conversion;
using Telerik.Sitefinity.DynamicModules.Model;

namespace ClubEventsDataHandling.System.Implementations
{
    public class DataRepository<T> : IDataRepository<T> where T : ClubEventData, new()
    {
        private readonly PropertyDictionaryBasedDynamicConverter<T> _converter;
        private readonly IDataHandler _dataHandler;
        private readonly List<T> _storageList;

        /// <summary>
        /// Initializes a new instance of the DataRepository class.
        /// </summary>
        public DataRepository()
        {
            _dataHandler = new SitefinityBasedDataHandler<T>();
            _converter = new PropertyDictionaryBasedDynamicConverter<T>();
            _storageList = new List<T>();

            // Populate the data repository.
            foreach (DynamicContent dynamicContent in _dataHandler.Get())
            {
                _storageList.Add(_converter.ConvertToModel(dynamicContent));
            }
        }

        #region Implementation of IEnumerable

        /// <summary>
        /// Returns an enumerator that iterates through the collection.
        /// </summary>
        /// <returns>
        /// A <see cref="T:System.Collections.Generic.IEnumerator`1"/> that can be used to iterate through the collection.
        /// </returns>
        /// <filterpriority>1</filterpriority>
        public IEnumerator<T> GetEnumerator()
        {
            return _storageList.GetEnumerator();
        }

        #endregion

        #region Implementation of ICollection<T>

        /// <summary>
        /// Adds an item to the <see cref="T:System.Collections.Generic.ICollection`1"/>.
        /// </summary>
        /// <param name="item">The object to add to the <see cref="T:System.Collections.Generic.ICollection`1"/>.</param><exception cref="T:System.NotSupportedException">The <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only.</exception>
        public void Add(T item)
        {
            // Create the data item.
            T modelItem = CreateDataItem(item);

            // Add the item to the list.
            _storageList.Add(modelItem);
        }

        /// <summary>
        /// Removes all items from the <see cref="T:System.Collections.Generic.ICollection`1"/>.
        /// </summary>
        /// <exception cref="T:System.NotSupportedException">The <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only. </exception>
        public void Clear()
        {
            throw new NotImplementedException();
        }

        /// <summary>
        /// Determines whether the <see cref="T:System.Collections.Generic.ICollection`1"/> contains a specific value.
        /// </summary>
        /// <returns>
        /// true if <paramref name="item"/> is found in the <see cref="T:System.Collections.Generic.ICollection`1"/>; otherwise, false.
        /// </returns>
        /// <param name="item">The object to locate in the <see cref="T:System.Collections.Generic.ICollection`1"/>.</param>
        public bool Contains(T item)
        {
            // Determine if the database contains the item.
            return _dataHandler.Get(item.MasterContentID) != null;
        }

        /// <summary>
        /// Copies the elements of the <see cref="T:System.Collections.Generic.ICollection`1"/> to an <see cref="T:System.Array"/>, starting at a particular <see cref="T:System.Array"/> index.
        /// </summary>
        /// <param name="array">The one-dimensional <see cref="T:System.Array"/> that is the destination of the elements copied from <see cref="T:System.Collections.Generic.ICollection`1"/>. The <see cref="T:System.Array"/> must have zero-based indexing.</param><param name="arrayIndex">The zero-based index in <paramref name="array"/> at which copying begins.</param><exception cref="T:System.ArgumentNullException"><paramref name="array"/> is null.</exception><exception cref="T:System.ArgumentOutOfRangeException"><paramref name="arrayIndex"/> is less than 0.</exception><exception cref="T:System.ArgumentException">The number of elements in the source <see cref="T:System.Collections.Generic.ICollection`1"/> is greater than the available space from <paramref name="arrayIndex"/> to the end of the destination <paramref name="array"/>.</exception>
        public void CopyTo(T[] array, int arrayIndex)
        {
            _storageList.CopyTo(array, arrayIndex);
        }

        /// <summary>
        /// Removes the first occurrence of a specific object from the <see cref="T:System.Collections.Generic.ICollection`1"/>.
        /// </summary>
        /// <returns>
        /// true if <paramref name="item"/> was successfully removed from the <see cref="T:System.Collections.Generic.ICollection`1"/>; otherwise, false. This method also returns false if <paramref name="item"/> is not found in the original <see cref="T:System.Collections.Generic.ICollection`1"/>.
        /// </returns>
        /// <param name="item">The object to remove from the <see cref="T:System.Collections.Generic.ICollection`1"/>.</param><exception cref="T:System.NotSupportedException">The <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only.</exception>
        public bool Remove(T item)
        {
            // Determine if the master content ID has been set.
            ValidateItem(item);

            // Delete the item from the database.
            _dataHandler.Delete(item.MasterContentID);

            // Remove the item from the database.
            return _storageList.Remove(item);
        }

        /// <summary>
        /// Gets the number of elements contained in the <see cref="T:System.Collections.Generic.ICollection`1"/>.
        /// </summary>
        /// <returns>
        /// The number of elements contained in the <see cref="T:System.Collections.Generic.ICollection`1"/>.
        /// </returns>
        public int Count { get; private set; }

        /// <summary>
        /// Gets a value indicating whether the <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only.
        /// </summary>
        /// <returns>
        /// true if the <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only; otherwise, false.
        /// </returns>
        public bool IsReadOnly { get; private set; }

        /// <summary>
        /// Determines whether the <see cref="T:System.Collections.Generic.ICollection`1"/> contains a specific value.
        /// </summary>
        /// <returns>
        /// true if <paramref name="itemID"/>'s item is found in the <see cref="T:System.Collections.Generic.ICollection`1"/>; otherwise, false.
        /// </returns>
        /// <param name="itemID">The ID of the object to locate in the <see cref="T:System.Collections.Generic.ICollection`1"/>.</param>
        public bool Contains(Guid itemID)
        {
            return _dataHandler.Get(itemID) != null;
        }

        ///<summary>Creates the data item in the database and returns the model version of it.</summary>
        private T CreateDataItem(T item)
        {
            // Get the properties of the item.
            Dictionary<string, object> propertyDictionary = GetItemProperties(item);

            // Create the data representation of the item.
            Guid createdItemID = _dataHandler.Create(propertyDictionary);

            // Convert a new model item from the dynamic content.
            DynamicContent dynamicContent = _dataHandler.Get(createdItemID);
            T modelItem = _converter.ConvertToModel(dynamicContent);
            return modelItem;
        }

        ///<summary>Gets the properties of the item as a dictionary that is ready to input into data handler methods.</summary>
        private static Dictionary<string, object> GetItemProperties(T item)
        {
            var propertyDictionary = new Dictionary<string, object>();

            // Filter  the properties according to the mapping attribute.
            foreach (PropertyInfo property in item.GetType().GetProperties())
            {
                // Get the mapping attribute.
                object[] customMappingAttributes = property.GetCustomAttributes(typeof (ClubEventDataMappingAttribute), true);
                var mappingAttribute = customMappingAttributes[0] as ClubEventDataMappingAttribute;

                // Apply the action, depending on the mapping attribute.
                if (mappingAttribute != null && mappingAttribute.MappingEnabled)
                {
                    string mappingValue = mappingAttribute.MappingName != null && string.IsNullOrEmpty(mappingAttribute.MappingName) ? property.Name : mappingAttribute.MappingName;
                    if (mappingValue != null)
                    {
                        propertyDictionary.Add(mappingValue, property.GetValue(item, null));
                    }
                }

                // Old code, in case didn't work.
                /*if ()
                {
                    propertyDictionary.Add(property.Name, property.GetValue(item, null));
                }*/
            }

            return propertyDictionary;
        }

        /// <summary>
        /// Performs validation operations on the item.
        /// </summary>
        private static void ValidateItem(T item)
        {
            // Check that the ID is present on the item.
            if (item.MasterContentID == Guid.Empty)
            {
                throw new ContentIDNotSetException("The master content ID was not set for this exception.");
            }
        }

        #endregion

        #region Implementation of IList<T>

        /// <summary>
        /// Determines the index of a specific item in the <see cref="T:System.Collections.Generic.IList`1"/>.
        /// </summary>
        /// <returns>
        /// The index of <paramref name="item"/> if found in the list; otherwise, -1.
        /// </returns>
        /// <param name="item">The object to locate in the <see cref="T:System.Collections.Generic.IList`1"/>.</param>
        public int IndexOf(T item)
        {
            return _storageList.IndexOf(item);
        }

        /// <summary>
        /// Inserts an item to the <see cref="T:System.Collections.Generic.IList`1"/> at the specified index.
        /// </summary>
        /// <param name="index">The zero-based index at which <paramref name="item"/> should be inserted.</param><param name="item">The object to insert into the <see cref="T:System.Collections.Generic.IList`1"/>.</param><exception cref="T:System.ArgumentOutOfRangeException"><paramref name="index"/> is not a valid index in the <see cref="T:System.Collections.Generic.IList`1"/>.</exception><exception cref="T:System.NotSupportedException">The <see cref="T:System.Collections.Generic.IList`1"/> is read-only.</exception>
        public void Insert(int index, T item)
        {
            // Create a new data item based off the properties of this one.
            T modelItem = CreateDataItem(item);

            // Insert the model item into the list.
            _storageList.Insert(index, modelItem);
        }

        /// <summary>
        /// Removes the <see cref="T:System.Collections.Generic.IList`1"/> item at the specified index.
        /// </summary>
        /// <param name="index">The zero-based index of the item to remove.</param><exception cref="T:System.ArgumentOutOfRangeException"><paramref name="index"/> is not a valid index in the <see cref="T:System.Collections.Generic.IList`1"/>.</exception><exception cref="T:System.NotSupportedException">The <see cref="T:System.Collections.Generic.IList`1"/> is read-only.</exception>
        public void RemoveAt(int index)
        {
            // Get the item at the index.
            T item = this[index];

            // Validate the item ID.
            ValidateItem(item);

            // Delete the item from the database.
            _dataHandler.Delete(item.MasterContentID);

            // Remove the item from the list.
            _storageList.RemoveAt(index);
        }

        /// <summary>
        /// Gets or sets the element at the specified index.
        /// </summary>
        /// <returns>
        /// The element at the specified index.
        /// </returns>
        /// <param name="index">The zero-based index of the element to get or set.</param><exception cref="T:System.ArgumentOutOfRangeException"><paramref name="index"/> is not a valid index in the <see cref="T:System.Collections.Generic.IList`1"/>.</exception><exception cref="T:System.NotSupportedException">The property is set and the <see cref="T:System.Collections.Generic.IList`1"/> is read-only.</exception>
        public T this[int index]
        {
            get { return _storageList[index]; }
            set
            {
                // Validate the specified content ID.
                ValidateItem(value);

                // Update the database instance with the item properties.
                _dataHandler.Update(value.MasterContentID, GetItemProperties(value));

                // Reflect the changes in the list.
                _storageList[index] = value;
            }
        }

        #endregion

        #region Implementation of IEnumerable

        /// <summary>
        /// Returns an enumerator that iterates through a collection.
        /// </summary>
        /// <returns>
        /// An <see cref="T:System.Collections.IEnumerator"/> object that can be used to iterate through the collection.
        /// </returns>
        /// <filterpriority>2</filterpriority>
        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }

        #endregion
    }
} 
```

这是我用来调用存储库的方法：

```
using System.Collections.Generic;
using ClubEventsData;
using System.Linq;
using System;

namespace ClubEventsDataHandling.System.Implementations.Controllers
{
    public class TicketDataController : IDataController
    {
        private DataRepository<Ticket> _repository;

        public TicketDataController()
        {
            _repository = new DataRepository<Ticket>();
        }

        public List<Ticket> GetDateTickets(Guid dateID)
        {
            return _repository.Where(ticket => ticket.EventDateBoughtFor.MasterContentID == dateID).ToList();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:49:09.443

为 0 的原因`_repository.Count`仅仅是您无法访问您`_storageList`的`Count`属性。您需要将其更改为：

```
public int Count
{ 
    get { return _storageList.Count; }
} 
```

# vba - 如何在 Excel 中打开特定版本的 Word 2007/2010

> ID：12073152
> 
> 赞同：10
> 
> 时间：2012-08-22T12:27:54.080
> 
> 标签：vba, excel, ms-word

我安装了 Word 2007 和 2010。我需要从 Excel 中打开 Word，但我需要指定需要在 VBA 中打开的版本。

我试过后期绑定

```
Dim wordApp2007 As Object
Dim wordApp2010 As Object

Set wordApp2007 = CreateObject("Word.Application.12")
wordApp2007.Visible = True
Set wordApp2010 = CreateObject("Word.Application.14")
wordApp2010.Visible = True 
```

但都打开 Word 2010

我也尝试过使用早期绑定

```
Dim wordApp As Word.Application
Set wordApp2007 = New Word.Application
wordApp2007.Visible = True 
```

并设置对 Word 12.0 对象模型的引用，但这仍然会打开 Word 2010 ![在此处输入图像描述](../Images/8006edd18a98bd67fea7525a913d74c1.png)

如果我使用注册每个版本的 Word

`"C:\Program Files\Microsoft Office\Office12\WINWORD.EXE" /regserver`

`"C:\Program Files\Microsoft Office\Office14\WINWORD.EXE" /regserver`

然后注册的版本打开，但我无法打开未注册的版本。

谁能帮助并告诉我如何使用 VBA 在 Excel 中打开特定版本的 Word？

谢谢

编辑：示例代码....

```
Option Explicit

Dim wordApp2007 As Word.Application

Sub Word_InfoEarly()
'early binding
Set wordApp2007 = New Word.Application
wordApp2007.Visible = True

    'other Stuff
    Stop

    wordApp2007.Quit
    Set wordApp2007 = Nothing

End Sub

Sub Word_InfoLate()
Dim wordApp2007 As Object
Dim wordApp2010 As Object

    Set wordApp2007 = CreateObject("Word.Application.12")
    wordApp2007.Visible = True
    Set wordApp2010 = CreateObject("Word.Application.14")
    wordApp2010.Visible = True

    'other Stuff
    Stop

    wordApp2007.Quit
    Set wordApp2007 = Nothing
    wordApp2010.Quit
    Set wordApp2010 = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:49:35.693

这是一个解决方法：

```
TaskID = Shell("C:\Program Files\Microsoft Office\Office12\WINWORD.EXE",vbHide) '2007
'TaskID = Shell("C:\Program Files\Microsoft Office\Office14\WINWORD.EXE",vbHide) '2010
GetObject(,"Word.Application") 
```

您还需要测试之前版本的 word 是否打开，或者使用除基本之外的其他东西`GetObject`来激活窗口，否则无法保证它会获得正确的版本。

另一种方法是在`Shell`命令中传递文档名称，然后`GetObject`可以使用文档名称调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T16:50:50.273

这可以进一步解释为什么代码在某些时候有效，而在其他时候无效。

我对指挥部情况的观察

```
'Set wordAppxxxx = CreateObject("Word.Application.xx")' 
```

在您的计算机上工作与否是因为它是您从 Microsoft 获得的最新更新的功能。

为什么我相信这一点：

我有一个将文本文件转换为 Word 文档的应用程序，以便与某些旧版应用程序向后兼容。最好的计划包括使用与旧应用程序的设计版本相似的 Word 版本。因此，我搜索了如何调用旧版 Word，而不是我计算机上的默认产品 Word 2010。

此讨论链中提到的解决方案为我的问题提供了答案。（感谢 Stack Overflow 的贡献者！）我想使用 Word XP，所以我查看了我的目录，发现 Word XP（又名 Word 2002）是 Office 10 的成员，所以我创建了命令

```
'Set wordApp2002 = CreateObject("Word.Application.10")' 
```

我的程序启动了 Word 2002，世界是一个快乐的地方。

整个周末，我对我的电脑进行了更新。我通过一个应用程序控制更新，该应用程序让我可以控制更新发生的时间，以便我可以观察到我的配置的变化。今天早上（2013 年 9 月 30 日）我打开了一台有 Word 更新的电脑。直到上周我运行了我的应用程序后，我才知道这一点。该应用程序运行良好，并按预期调用了 Word 2002。

但随后我得到了一个横幅页面，通知我正在安装自己的 Word 2010 更新。

之后，我运行了上周和今天一次运行良好的应用程序。现在，在 Word 更新之后（立即！），相同的代码现在启动 Word 2010，尽管调用 Word 2002 的命令行没有改变。

这似乎有力地证明了 Microsoft 更新调整了以前允许 VB 代码按预期工作的设置。这可能是一个引起微软注意的好项目，所以看看我们是否可以在后续的更新包中稳定这个项目，以便在未来的版本中保持一致的行为。

我希望这是有帮助的，

杰夫克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-12T08:27:19.793

我为此浪费了半天时间，并希望帮助防止其他人这样做！我在同一台笔记本电脑上运行 Windows 7 和 Office 2013 和 2010。我想让 Access VBA 打开旧版本的 Word，因为 Word 2013 标注打印时带有厚厚的黑色边框。

尝试了很多变体后，这是我的有效代码：

```
Sub GetWordReference()

'finally got Access to open old version of Word

'open Word 2010
Shell "C:\Program Files (x86)\Office 2010\Office14\winword.exe"

'open Word 2013
'Shell "C:\Program Files\Microsoft Office 15\root\office15\winword.exe"

TryAgain:

    On Error GoTo NoWord
    Set word2010 = GetObject(, "Word.Application")
    On Error GoTo 0

    word2010.Visible = True

    'word2010.Documents.Add
    'word2010.Selection.TypeText "This is Word " & word2010.Version

    Exit Sub

NoWord:
    Resume TryAgain

End Sub 
```

我无法让 SO 代码编辑器正确显示这一点，但复制和粘贴应该可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:14:37.860

这是一个 VB.NET 解决方案：

```
Sub Word_InfoLate()
Dim wordApp2007 As Object
Dim wordApp2010 As Object 
```

这对某些人来说有点吓人，但可能有一个注册表编辑可以解决这个问题。我无法测试，因为我只有一个版本的 MS Office 可供我使用，但是，以前的版本仍然有注册表项。

我在注册表中找到了 2007 版本的 Word，它的默认位置是 C:\program Files\Microsoft Office\Office14\WINWORD.EXE”，表明旧版本的 Word 已注册到最新版本的安装位置，因为它是新的默认位置。

您可以做的是导航到注册表位置

```
HKEY_CLASSES_ROOT\Word.Documet.12\shell\Open\Command 
```

将（默认）键更改为“C:\program Files\Microsoft Office\Office12\WINWORD.EXE”/n“%1”

理论上无论何时

```
Set wordApp2007 = CreateObject("Word.Application.12") 
```

调用它可能会在注册表中探测可执行文件的位置，并找到正确的路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-28T16:38:06.077

我有一个类似的问题，并认为我会为那些在未来偶然发现这个问题的人详细介绍我的经历。

在我的情况下，我有一个 Powerpoint 宏，它应该打开一个文件对话框，供用户选择一些 Excel 文件，然后从数据中创建表格；在我最近安装 Excel 2003 之前，我对它没有任何问题。现在 Powerpoint 正在打开一个 Excel 2003 文件对话框，在尝试选择 *.xlsx 文件时会引发错误。我是否使用`Excel.Application.10`或`Excel.Application.14`在我的代码中创建 Excel 对象并不重要，它始终是一个 Excel 2003 文件对话框。

我在资源管理器中注意到 *.xlsx 文件设置为在 Excel 2010 中打开，*.xls 文件设置为在 Excel 2003 中打开。我尝试以通常的方式重置要在 2010 年打开的 *.xls 文件无济于事. 我最终不得不删除注册表项并修复 Office 2010。现在所有 Excel 文件都在 2010 年打开，我的问题已得到解决。

我知道我的问题与您的问题有些不同，但我认为我的经验可以帮助您找到解决方案。我认为任何解决方案最终都会依赖于一些注册表编辑。

# concurrency - 为并发编程方法推荐一个好的资源？

> ID：12073155
> 
> 赞同：29
> 
> 时间：2012-08-22T12:28:10.583
> 
> 标签：concurrency

我已经阅读了有关并发的各种零碎文章，但希望找到一个详细说明和比较各种方法的资源。理想情况下，包括线程、协同程序、消息传递、演员、期货……任何我还不知道的新事物！

比起过于理论/数学的东西，更喜欢外行编码指南。

谢谢你。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T12:39:32.630

我推荐Pacheco[的 An Introduction to Parallel Programming](https://rads.stackoverflow.com/amzn/click/com/0123742609)。它写得很清楚，是并行编程的一个很好的介绍。

如果您不关心与语言相关的东西，那么[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601 "Java 并发实践")是一个很好的资源。

Oracle 的[在线教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)是免费的，但可能比您要查找的内容更简洁。

* * *

话虽如此，并发最好的老师可能是经验。我自己会尝试进行一些练习。首先模拟[餐饮哲学家问题](http://en.wikipedia.org/wiki/Dining_philosophers_problem)。这是一个经典。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-22T13:59:47.503

首先，让我们看看您是否对该主题感兴趣。要全面了解并发性，最佳实践是查看操作系统书籍，例如[Stalings 的操作系统内部](http://williamstallings.com/OS/OS5e.html)或[Tanenbaum 的现代操作系统](https://rads.stackoverflow.com/amzn/click/com/0136006639)。他们可以让您直观地了解这一切。
还有一本旧书，名为 Ben-Ari 的并发编程。如果你找到它，它会很有帮助。

除了阅读教科书之外，通过编写一些并发程序来弄脏你的手是件好事。如果您想开始使用线程，Python 是一个非常好的选择。每本 Python 书籍都有专门讨论这个主题的部分。也可以在网上简单搜索一下，你可以找到很多关于它的资源，但我给这两个更高的偏好：
[多线程编程（POSIX pthreads Tutorial）](http://randu.org/tutorials/threads/)，对并发和多线程的非常全面的介绍。主要是关于C多线程。
另一个是[Python 中的线程同步机制](http://effbot.org/zone/thread-synchronization.htm)。

现在，如果您仍然发现自己对并发编程感兴趣，那么是时候深入了解一下了。您几乎已经掌握了并发的基本知识，现在最好的方法是开始解决问题并熟悉模式。为了实现这个目标，您可以使用[The Little Book of Semaphores](http://greenteapress.com/semaphores/)。这是该领域最好的书籍之一，而且它也是免费的。这本书可以引导你精通并发编程。*如果您想接近*

，这些应该足够了*并发编程，但是如果你有足够的时间，并且你很热心，那么看看其他一些并发编程的范例是很好的，比如[Erlang](http://www.erlang.org/)中使用的演员。[我说七周内的七种语言](http://pragprog.com/book/btlang/seven-languages-in-seven-weeks)这本书的一些章节值得阅读，尤其是关于 Erlang 和 IO 的章节。乍一看，这可能既困难又陌生，但熟悉其他并发解决方案是件好事。*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-10T12:03:32.853

我会推荐Peter Van Roy 和 Seif Haridi[的《计算机编程的概念、技术和模型》 。](https://mitpress.mit.edu/books/concepts-techniques-and-models-computer-programming)所有主要的编程技术都有关于并发编程的后续部分。作者还从基础开始，定义了主要的并发编程概念、它们的缺点，并附有 Oz 编程语言的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T21:36:54.333

如果您碰巧是 C# 程序员，或者有一天，我强烈推荐Michal Habalcik 的[这个教程](http://www.c-sharpcorner.com/UploadFile/f9f215/parallel-programming-part-1-introducing-task-programming-l/)系列。*

# php - MySQL Full Text Search with utf8 (Persian/Arabic)

> ID：12073163
> 
> 赞同：4
> 
> 时间：2012-08-22T12:28:36.607
> 
> 标签：php, mysql, full-text-search

I have problem with full text search just on UTF8/Unicode Persian/Arabic Language (nothing found from querys).

*   Tables are set with utf8/utf8_persian_ci on encoding.
*   Using `mysql_query("SET NAMES 'UTF8'");` for Unicode Querys.
*   English strings work fine.

***Below is My search codes:***

```
<?php
mysql_connect("localhost", "user", "password");
mysql_select_db("search");
mysql_query("SET NAMES 'UTF8'"); 

$q = $_GET['q'];

?>
<form action="<?php $_SERVER['PHP_SELF']; ?>">
<input type="text" name="q" value="<?php echo $q; ?>">
<input type="submit" value="Search!">
</form>
<hr>
<?php
if (isset($q)) 
{
    $res = mysql_query("SELECT *, MATCH(name, description) AGAINST ('$q') AS score from search_test WHERE MATCH (name, description) AGAINST('$q') order by score desc");
    $ant = mysql_num_rows($res);
    if ($ant > 0) 
    { // query provided results – display results
        echo ("<br/><h2>Search results for \"$q\":</h2>");
        while ($result = mysql_fetch_array($res)) 
        {
            echo ("<h3>{$result['name']} ({$result['score']})</h3>{$result['description']}<br/><br/>");
        }
    }
    else 
    { // query provided 0 results – display 0 hit message
        echo ("<br/><h2>Nothing Found \"$q\" query</h2>");
    }
}
?> 
```

***where is the problem or how can I search with full-text on Unicode language ?***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:34:46.007

Indexed columns must <= 1000 byte encoding.

You cannot do a FULLTEXT search on Persian letters as the have > 1000 byte encoding. As it is stated [here](https://dev.mysql.com/doc/refman/5.5/en/fulltext-restrictions.html).

for example your `آزمایشی` has the following character encoding bytes map:

```
Array
(
    [0] => 1570
    [1] => 1586
    [2] => 1605
    [3] => 1575
    [4] => 1740
    [5] => 1588
    [6] => 1740
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T12:08:09.853

MySQL fulltext search works well for Persian. Just make sure of the following where needed:

1.  `COLLATION = utf8_persian_ci` & `CHARACTER SET = utf8`. (Databases, Tables, and Columns).
2.  Index words of 3 letters and more. This is Very Important for Arabic, `ft_min_word_len = 3` (see `show variables like "ft_%";`)
3.  Check the version of MySQL (5.5 or 5.6), and Engine (InnoDb or MyISAM)

# sql-server - 计算成员的 MDX，随时间层次结构具有两个度量

> ID：12073164
> 
> 赞同：1
> 
> 时间：2012-08-22T12:28:39.197
> 
> 标签：sql-server, ssas, mdx, business-intelligence

我有一个带有两个度量的多维数据集，比如说度量 A 和度量 B。我需要根据层次结构中任何级别的业务规则从这两个度量中创建一个度量 C，

1.  如果 A 在当前级别不为空（对于该级别的所有子节点都有值），则只需聚合 A。否则，在 A 存在的地方聚合 A，在 A 不存在的地方聚合 B，然后将两者相加得到 C。

它是这样的

```
Quarter    Month    A    B
Q1         Apr      2    3
Q1         May           4
Q1         Jun           4 
```

C 在季度级别应该是 10。此外，4 月 2 个，5 月 4 个，6 月 4 个 [月级别]

我使用了以下 MDX，它在月级别上运行良好。

```
IIF(IsEmpty([Measures].[A]), [Measures].[B], [Measures].[A]) 
```

但是，在四分之一级别，它只给我 2 而不是 10，我现在知道为什么了 :) 关于构建 MDX 以使其在任何级别上工作的任何指针

```
[Year - Semester - Quarter - Month] (Granularity is at Month level only) 
```

会有帮助的。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:29:57.433

你可以使用这个 Mdx

```
Sum(
   Descendants('current member on your time hierarchy', 'month level'),
   CoalesceEmpty([Measures].[A], [Measures].[B])
) 
```

`CoalesceEmpty([Measures].[A], [Measures].[B])`相当于`IIf(IsEmpty([Measures].[A]), [Measures].[B], [Measures].[A])`

# php - PHP中与复选框相关的文件上传

> ID：12073167
> 
> 赞同：0
> 
> 时间：2012-08-22T12:28:42.330
> 
> 标签：php, file, checkbox

如何将文件输入类型与复选框链接？

这是我到目前为止所拥有的：

```
<input type="file" name="file_upload[0]"  /> <input type="checkbox" name="checkbox[0]"> checkbox 1 <br />
<input type="file" name="file_upload[1]"  /> <input type="checkbox" name="checkbox[1]"> checkbox 2 <br />
<input type="file" name="file_upload[2]"  /> <input type="checkbox" name="checkbox[2]"> checkbox 3 <br />
<input type="file" name="file_upload[3]"  /> <input type="checkbox" name="checkbox[3]"> checkbox 4 <br /> 
```

现在我需要在上传文件时检查 PHP 对应的复选框已选中（最好使用循环），但我无法使其工作。

这就是我在 PHP 中所拥有的：

```
if (isset($_FILES['file_upload[1]']) && isset($_FILES['checkbox[1]']))  {
    //do something
} else {
    //do something else
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:30:50.520

您需要将您的复选框输入标签更改为 `<input type="checkbox" name="checkbox[3]" value="1" >`

即你需要添加缺失的`value=""`属性

正如评论中提到的

你需要`if(isset($_POST['checkbox'][0])) {` 检查`$_FILES`

尝试打印两者`print_r($_FILES)` `and print_r($_POST)`...这应该让您了解提交后收到的数据结构

您可以遍历 file_uploaded 数组，然后检查是否设置了相关的复选框索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:37:01.337

你需要的循环应该是这样组织的：'对于`$_FILES['file_upload']`数组的每个元素，检查对应的（具有相同索引的）元素`$_POST['checkbox']`。例如：

```
if (empty($_FILES['file_upload'])) { ... process 'no files sent' case ... }

$files_total = count($_FILES['file_upload']);

for ($i = 0; $i < $files_total; ++$i) {
  if ( $_FILES['file_upload'][$i] && !empty( $_POST['checkbox'][$i] ) ) {
    // .. do something
  }
  else {
    // .. do something else
  }
} 
```

# php - 为什么我需要 Zend 中的 Application_Model_User 和 Application_Model_DbTable_User？

> ID：12073171
> 
> 赞同：0
> 
> 时间：2012-08-22T12:28:49.250
> 
> 标签：php, zend-framework

两者兼得有什么意义吗？我遵循了 Zend 教程，该教程告诉我创建一个用户模型，但我不能只在 DB 模型类中为用户建模吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:42:49.667

它是“关注点分离”概念的一部分[http://en.wikipedia.org/wiki/Separation_of_concerns](http://en.wikipedia.org/wiki/Separation_of_concerns)

您的模型类负责业务逻辑、验证、变量操作等，而您的 db 模型类应该只处理数据库，这样如果您需要替换 db 模型，它不会对主模型产生太大影响，并且如果您替换只要将正确的参数传递给主模型，它就不会影响数据库模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:25:06.450

是的，您可以在 Application_Model_DbTable_User（DbTable 类）中为您的用户建模，只要您需要的所有数据都在该表中，它就可以正常工作。

在某些时候，您可能会开始使用应该在一个以上表格中表示的对象。这时你会发现需要一种不同的做事方式。

一个更好的简单示例，说明映射器和域对象可能很重要：

***mp3 文件。***
最简单的一个音乐文件应该由至少 3 个 db 表表示：

1.  **专辑**：代表歌曲来源专辑的表格
2.  **艺术家**：录制歌曲的艺术家
3.  **track**：关于轨道本身的信息

每个***艺术家***可以有多个***专辑***，每个***专辑***将有一个***艺术家***和多个***曲目***，每个***曲目***将属于一个***专辑***和一个***艺术家***（不同的版本将是不同的曲目）。

正如您所见，即使是简单的 mp3 集合的数据库结构也会很快变得非常复杂。在大多数情况下，即使是简单的用户记录也会分布在多个表中，具体取决于持久化数据的数量和类型。

对于理解如何以及为什么实现映射器和模型的一些帮助，我发现这些资源非常有用。

[构建域模型](http://phpmaster.com/building-a-domain-model/)，涵盖了域模型是什么以及如何在 PHP 中构建域模型。
[将映射器添加到域模型](http://phpmaster.com/integrating-the-data-mappers/)，将映射器功能添加到相同的域模型。
[Survive the Deepend](http://survivethedeepend.com/)，一个专注于模型和测试的 Zend 框架启动器。

前两个链接是用纯 PHP 完成的，但仍然非常有用。

# mysql - MYSQL多对多3表查询

> ID：12073177
> 
> 赞同：3
> 
> 时间：2012-08-22T12:29:01.927
> 
> 标签：mysql, database, join, many-to-many

编辑。我错过了我遇到的一个主要问题。我想显示所有唯一的“device_MAC”行。所以我希望这个查询输出 3 行（根据原始查询）。我遇到的问题是通过=将表连接到`data`表，其中表中的最大时间戳。`remote_node``dt_short``rn_short``dt_short``data`

我在 3 个表上运行查询时遇到问题（2 个表有多对多关系）。

我正在尝试做的事情：

1.  `rn_IEEE`从具有最大时间戳的表中获取每个不同`remotenodes`（在示例中，这将获得具有 3 个不同短地址的 3 行`rn_short`）
2.  加入`devicenames`device_IEEE 上的表
3.  `dt_short`从`data`具有最大时间戳的表中获取每个不同的
4.  `dt_short`从上面的`rn_short`查询中加入

现在我遇到的问题是我可以单独对上述内容进行查询，我什至已经将前 3 个一起放入一个查询中，但我似乎无法正确连接最后一点数据以获得我的结果想。

我一直在兜圈子试图解决这个问题。这是一个指向 SQL Fiddle 的链接，其中包含所有测试数据和查询，据我所知，它为第一行执行我想要的操作，但在第一行为 NULL 之后的表“数据”：

[看到这个 SQL 小提琴](http://sqlfiddle.com/#!2/ccbe1/64)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:00:34.927

After going through your requirements and the data, it looks like you just need to change your query to include an `INNER JOIN` on the `data` table instead of a `LEFT JOIN`

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/ccbe1/81)

```
select rn.*, dn.*, d.*
from remotenodes rn
inner join devicenames dn
  on rn.rn_IEEE = dn.device_IEEE
  and rn.rn_timestamp = (SELECT MAX(rn_timestamp) FROM remotenodes 
                              WHERE rn.rn_IEEE = rn_IEEE 
                              GROUP BY rn_IEEE)
inner join data d
  on rn.rn_short = d.dt_short
  AND d.dt_timestamp = (SELECT MAX(d2.dt_timestamp) AS ts
                        FROM data d2 
                        WHERE d.dt_short = d2.dt_short
                        GROUP BY d2.dt_short) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:53:58.677

试试这个查询，对我来说它返回一行：

```
SELECT rn_short, rn_IEEE, device_name
FROM 
(SELECT DISTINCTROW dt_short FROM (SELECT * FROM `data` ORDER BY `dt_timestamp` DESC) as data ) as a
JOIN 
(SELECT rn_IEEE, rn_short, device_name FROM devicenames dn JOIN (SELECT DISTINCTROW rn_IEEE, rn_short FROM (SELECT * FROM `remotenodes` ORDER BY `rn_timestamp` DESC) as remotenodes GROUP BY rn_IEEE) as rn ON dn.device_IEEE = rn.rn_IEEE) as b
ON a.dt_short = b.rn_short 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:33:02.887

您在 SQL 小提琴中所做的查询是正确的。不要使用左连接，而是使用内连接，这样它会给您第一行

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T07:22:58.273

Thanks for all your answers everyone. I managed to solve the problem by using views. It's not the most efficient way but I think it will do for now. Here is the SQL Fiddle link:

[http://sqlfiddle.com/#!2/4076e/8](http://sqlfiddle.com/#!2/4076e/8)

# initialization - 类内对象创建的责任

> ID：12073178
> 
> 赞同：1
> 
> 时间：2012-08-22T12:29:03.483
> 
> 标签：initialization, class-members, responsibility

这听起来像是一个菜鸟问题。

```
class MyClass
{
    public List<MyObjects> myObjects;

    public MyClass()
    {
        //...
    }
}

class UserClass
{
    public void SomeFunction()
    {
        MyClass obj = new MyClass();

        //Should this belong in constructor of MyClass?
        obj.myObjects = new List<MyObjects>;

        //Should 'SomeFunction' initialize obj.myObjects before using it, or 
        //should it assume it has been initialized and just use it?
        obj.myObjects.Add(..);
    }
} 
```

当调用默认构造函数时，谁负责**MyClass.myObjects的创建/初始化？**

1.  MyClass 的构造函数。
2.  MyClass 的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:35:50.947

通常，类的构造函数应该完成所有必要的工作，以使该类处于可用状态。在您的情况下，您可能应该为`myObjects`. OOP 的原则是封装数据。这意味着它`myObjects`应该是私有的。您应该只能通过访问器方法访问它。通过这样做，您可以构造对象并在实际需要时通过访问器方法懒惰地创建列表。

这是一篇关于[Constructors](http://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29)的 wiki 文章。它提到正确编写的构造函数将使对象处于有效状态。

编辑：用延迟初始化封装 myObjects （注意我假设 C# 因为你的代码示例看起来有点像那样）

```
class MyClass
{
    private List<MyObjects> myObjects;

    public MyClass()
    {
        //...
    }

    public void Add(MyObject object)
    {
        MyObjects.Add(object);
    }

    private List<MyObjects> MyObjects
    {
        get
        {
            if (myObjects == null)
            {
                myObjects = new List<MyObject>();
            }
            return myObjects;
        }
    }
} 
```

# jquery - 即使没有调用显示它的函数（在有 ajax 调用之后），Ajax 微调器也会显示

> ID：12073181
> 
> 赞同：0
> 
> 时间：2012-08-22T12:29:06.573
> 
> 标签：jquery, ajax

我在我的 AJAX 调用中使用微调器。我在一个函数中实现了绑定代码，因此我可以随时使用它，并避免某些 AJAX 调用使用微调器。例如，我有一个用户名和电子邮件存在检查 onkeyup ，显然我不希望微调器在按下键时显示。

我实现它的方式是有效的，但是如果客户端验证完成，例如在注册页面上触发一个 ajax 调用，并且发回一个错误，用户名和电子邮件将在按下键时开始显示微调器。

这是代码：

HTML

```
<div id="spinner" class="spinner hidden">
    <img id="img-spinner" src="<?php echo base_url(); ?>/images/spinner.gif" alt="Loading"/>
</div> 
```

遮罩功能

```
 function show_hide_loading_mask() {
        $("#spinner").bind("ajaxSend", function() {
            $(this).show();
            $.blockUI({ message: '' }); //Set message to empty to remove default Loading message and show spinner instead
        }).bind("ajaxStop", function() {
            $(this).hide();
            $.unblockUI();
        }).bind("ajaxError", function() {
            $(this).hide();
            $.unblockUI();
        });
    } 
```

表单提交调用

```
$('#frmMyForm').submit(function(){
      if (validate()) {
        show_hide_loading_mask();

        $.ajax({
            type: "POST",
            url: "ajax/path",
            data: $('#frmMyForm').serialize(),
            dataType: "json",

            success: function(data){
               if (data.response == "OK") {
                    console.log('OK');
               } else {
                console.log('NOT OK');
               }
            },
            error: function(xhr, textStatus, errorThrown) {
                console.log('Exception...');
            }
        });
    } else {
        console.log('client side validation failed');
    }
    return false; // do not actually submit
  }) 
```

验证功能：

```
function validate() {
    var param1 = $('#txtParam1').val();
    var param2 = $('#txtParam2').val();
    return param1.length >= 5 && param2.length >= 5 //return true when both are at least 5 chars long
} 
```

任何想法为什么会在访问服务器后发生这种情况？当有 ajaxStop 时，它应该再次被禁用。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:06:42.887

我找到了解决方案。问题是，一旦函数被调用，它就会继续与 ajax 函数绑定。

通过命名 ajax 函数可以解决这个问题。我现在有两个功能：

```
function show_loading_mask() {
    $(document).bind("ajaxStart.showSpinner", function() {
        $('#spinner').show();
        $.blockUI({ message: '' }); //Set message to empty to remove default Loading message and show spinner instead
    });

    $(document).bind("ajaxStop.showSpinner", function() {
        $('#spinner').hide();
        $.unblockUI();
    });

    $(document).bind("ajaxError.showSpinner", function() {
        $('#spinner').hide();
        $.unblockUI();
    });
}

function no_loading_mask() {
    $(document).unbind('.showSpinner');
} 
```

然后在每次 ajax 调用之前，我相应地调用上述方法。这样，我只为那些需要的 ajax 调用显示微调器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:33:33.073

我不确定您是否应该将`ajaxStop`事件绑定到微调器的 div 上。

您尝试做的事情可以通过使用[.ajaxError()](http://api.jquery.com/ajaxError/)和/或[.ajaxComplete()](http://api.jquery.com/ajaxComplete/)来完成。

# voip - 在这种情况下使用voiceXML作为工具是否正确

> ID：12073184
> 
> 赞同：0
> 
> 时间：2012-08-22T12:29:20.833
> 
> 标签：voip, voicexml

我有一个电话场景，其中会发生以下情况：

1.  客户呼叫语音网关

2.  TCL 脚本运行，代码取自客户

3.  身份验证通过 RADIUS 服务器完成

4.  客户将听到正确的语音菜单

问题是 RADIUS 服务器必须连接到 SQL 数据库并检查凭据。我目前使用 cisco 安全 ACS 并通过 MS SQL 服务器上的托管存储过程设计了解决方案。

**我的问题是：VoiceXML 是完成这项工作的更好工具吗？因为 .net 中存在 VoiceXML 的一些扩展和包装，它是否适合这个简单的场景？**

老实说，我对这项技术有点迷茫，并且也在寻找有关其功能的好教程。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:41:46.333

VoiceXML 在这种情况下可以正常工作。[有一个名为VoiceModel](http://voicemodel.codeplex.com/)的开源项目，它使用 ASP.NET MVC 来生成 VoiceXML，因此可以很好地与 .NET 堆栈集成。项目中有很多示例，讨论了如何使用[本博客](http://kevin-junghans.blogspot.com/)中的示例。这些示例使用[Voxeo Prophecy](http://www.voxeo.com/products/voicexml-ivr-platform.jsp)作为 VoiceXML 平台，该平台具有将与语音网关连接的 SIP 接口。您可以免费下载两个端口进行试用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:28:13.300

严格意义上来说，VoiceXML 只实现了第 4 步。其他方面由平台或外部代码处理。VoiceXML 是实现第 4 步的标准机制，但如果您要做的只是有限的音频输出和简单的输入，那么根据您可用的解决方案，这可能是矫枉过正。

以下只是解决您的问题的方法的一个示例，并且是相当虚构的，因为我对您的环境或约束一无所知。

给定大多数 VoiceXML 平台，在收到呼叫后，您的 VoiceXML 应用程序将被执行。如果这是一个基于 servlet/ASP 的解决方案，您可以执行第 2 步和第 3 步，然后生成/返回 VoiceXML 以播放菜单、收集输入并进行下一步。如果这是一个静态 VoiceXML 2.1 解决方案，您可以使用数据元素调用向可以执行这些操作的系统发出 HTTP 请求。系统将需要返回 VoiceXML 应用程序中的 Javascript/ECMAScript 可以解析的 XML，并提供正确的音频输出和输入处理。

由于您询问的是 VoiceXML，我假设您的挑战是问题的电话方面。除非您已经有可用的系统，否则选择和激活前提或托管解决方案远比涉及的呼叫流代码复杂得多。根据您的要求，有低至单线的解决方案，支持音频输出和 DTMF 输入的模拟调制解调器，可在本地进行大规模扩展，托管解决方案可处理实现 VoiceXML 的 10,000 个并发呼叫以及各种其他呼叫流技术。

# javascript - Bootstrap JS 和导航栏按钮

> ID：12073187
> 
> 赞同：2
> 
> 时间：2012-08-22T12:29:41.273
> 
> 标签：javascript, twitter-bootstrap

我通常使用 Ruby on rails 来开发我的工作，使用 sublime text 作为我的文本编辑器，但今天我只使用记事本并在本地创建一个站点。现在通常我所有的 js 和 css 都通过 rails 中的资产管道完美呈现，但我无法让 js 工作，特别是导航栏中的下拉按钮。

我在标题中调用 Jquery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

我正在调用我的 bootstrap.js 文件

```
<script src="js/bootstrap.js" type="text/javascript"></script> 
```

导航栏的css如下

```
 <div class="container">
  <div class="navbar">
    <div class="navbar-inner">
     <div class="container">

  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </a>

  <!-- Everything you want hidden at 940px or less, place within here -->
  <div class="nav-collapse">
    <ul class="nav">
  <li><a href="#">Home</a></li>
  <li><a href="#">About Us</a></li>
  <li><a href="#">Menu</a></li>
  <li><a href="#">Contact Us</a></li>
</ul>
  </div>

</div> 
```

我是否因为按钮没有响应而遗漏了一些显而易见的东西？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T12:37:53.653

您是否包含了所需的 bootstrap.css 样式表？

```
 <link href="css/bootstrap.min.css" rel="stylesheet"> 
```

**编辑1：**

这是一个带有 HTML/bootstrap的[jsBin 。](http://jsbin.com/uwoxan/1/edit)如果您没有看到相同的输出，那么确实有问题。如果您希望在单击导航栏按钮之一时出现某种行为，那么这实际上并不是一个错误：导航栏的单击没有附加任何 js 行为。

Bootstrap 将为您提供一个“美化”的导航栏，它改变了美学而不是行为，您仍然需要连接到各个点击并为它们定义自己的行为。

**编辑2：**

要连接到点击，您必须获取菜单项并使用 jQuery 来定义点击行为。一个例子是为每个导航栏项目定义唯一的 id

```
<li><a id="home" href="#">Home</a></li>
<li><a id="about" href="#">About Us</a></li> 
```

然后使用 jQuery 的选择器检索它们并附加点击处理程序：

```
$("#home").click(function() {
  alert('home clicked');
});

$("#about").click(function() {
  alert('about clicked');
}); 
```

我已经编辑了 jsbin 来添加这个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:11:55.437

CDN 没有拉 jquery，所以我现在在本地托管了文件，它工作正常

# php - 扔掉整个数组，但第一项

> ID：12073194
> 
> 赞同：2
> 
> 时间：2012-08-22T12:29:56.810
> 
> 标签：php

假设我有以下数组：

```
$array(
  '32' => array('name' => 'paul', 'age' => 43),
  '17' => array('name' => 'eric', 'age' => 19),
  '99' => array('name' => 'dave', 'age' => 65)
) 
```

我只对第一`$array`项感兴趣：

```
$array2 = array('key'=> 32, 'name' => 'paul', 'age' => 43) 
```

实现这一目标的最有效方法是什么？换句话说，我可以用一个命令扔掉 $array 的所有其他项目吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T12:32:00.307

使用**[`array_shift()`](http://il.php.net/manual/en/function.array-shift.php)**.

> `array_shift()`将数组的第一个值移开并返回，将数组缩短一个元素并将所有内容向下移动。所有数字数组键都将被修改为从零开始计数，而文字键不会被触摸。

```
$array2 = array_shift($array); 
```

这意味着`$array2`现在保存第一个元素，而`$array`保存其余元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:32:16.047

试试这个

```
 $array2 = array_shift($array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:32:14.117

```
$newArr = reset($array); 
```

我认为这没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:33:12.270

有2个选择，真的。您可以选择数组中的第一项

```
$array2 = $array[0]; 
```

或者你可以使用 array_slice 作为

```
$array2 = array_slice($array, 0, 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:37:26.750

`reset`数组也返回第一个元素（`end()`返回最后一个）：

```
$first = reset( $array ); 
```

[http://www.php.net/manual/en/function.reset.php](http://www.php.net/manual/en/function.reset.php)

但是要生成您想要的确切结果，您可以编写类似这样的内容

```
foreach( $array as $k => $first ){ // get first sub-array and its key
  $first['key'] = $k; // add the key
  break;              // we don't care about the other elements, goodbye
} 
```

Futuregeek 的方法已修复：

```
$first =

  // returns first element, and sets it as the current element for key()
  reset( $array )

  // instead of array_merge, (sometimes) you can use the + operator
  +

  // key() will return the appropriate key after reset()
  array('key' => key( $array )); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:41:24.627

Array_shift 可能是最好的方法。但这里只是为了好玩是另一种方式。

```
$first_element = end(array_reverse($array)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T12:42:24.283

```
$k = array_merge(array('key' => key($array)), array_shift($array)); 
```

以指定格式返回。

[key](http://php.net/manual/en/function.key.php)为您获取第一个键，[array_shift 为您获取第一个值，并使用](http://php.net/manual/en/function.array-shift.php)[array_merge](http://php.net/array_merge)合并

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-22T12:45:34.003

```
Try It : 

$arr = array(
  '32' => array('name' => 'paul', 'age' => 43),
  '17' => array('name' => 'eric', 'age' => 19),
  '99' => array('name' => 'dave', 'age' => 65)
);

foreach($arr as $key => $value)
{
    $result[$key] = $value;
    break;
}
print_r($result);

##-------Secount Way If you don't want Key 32--------------------------

$arr = array(
  '32' => array('name' => 'paul', 'age' => 43),
  '17' => array('name' => 'eric', 'age' => 19),
  '99' => array('name' => 'dave', 'age' => 65)
);

$arr = array_reverse($arr);
print_r(end($arr));

#------ Third Way If you don't want  Key 32 -------------

echo "<br>=======<br>";

$arr = array(
  '32' => array('name' => 'paul', 'age' => 43),
  '17' => array('name' => 'eric', 'age' => 19),
  '99' => array('name' => 'dave', 'age' => 65)
);

$array2 = array_shift($arr);
print_r($array2); 
```

# java - 正确的程序可能会错误地同步吗？

> ID：12073197
> 
> 赞同：3
> 
> 时间：2012-08-22T12:30:02.753
> 
> 标签：java, memory-model

在回答[*正确同步的程序是否仍然允许数据竞争？（第一部分）*](https://stackoverflow.com/questions/12006730/does-a-correctly-synchronized-program-still-allow-data-racepart-i/12008258#12008258)时，它给了我们一个很好的例子：一个程序的所有执行似乎都是顺序一致的，但它仍然存在数据竞争。[*它告诉我们为什么JLS*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3)中以下结论的另一个方向是不正确的：

> 如果一个程序没有数据竞争，那么程序的所有执行都将看起来是顺序一致的。

现在看看[*JLS*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)中的另一个结论：

> 当且仅当所有顺序一致的执行都没有数据竞争时，程序才能正确同步。

根据这个结论，上面的例子没有正确同步，那么一个正确的程序会不会被错误地同步呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:37:40.650

您可能需要首先定义什么是正确的程序（不容易）。JCiP 建议（在不同的背景下）：

> 如果一个程序符合它的规范，它就是正确的。

使用该定义，提供的示例是正确的。但是，它没有正确同步（在 上存在数据竞争`hash`）。

==> 如该示例所证明的，正确的程序可能会错误地同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:37:32.180

虽然这似乎没有回答 OP 的问题，但我保留它以供评论。

* * *

您可以使用同步集合获得许多竞争条件。例如

```
Vector<Integer> vector = ...
vector.add(1);

vector.set(0, 1 + vector.get(0)); 
```

每个方法都是同步的，但存在竞争条件。这是因为您可以让线程 T1 和 T2 执行。

```
T1: int tmp1 = vector.get(0);
T2: int tmp2 = vector.get(0);
T1: vector.set(0, 1 + tmp1);
T2: vector.set(0, 1 + tmp2); 
```

在这种情况下 tmp1 == tmp2 这通常不是这种情况。

要正确同步，您将执行以下操作以确保您始终保持锁定。

```
synchronized(vector) {
    vector.set(0, 1 + vector.get(0));
} 
```

# asp.net-mvc-3 - 使用数据库优先方法修改 Getter 和 Setter

> ID：12073200
> 
> 赞同：1
> 
> 时间：2012-08-22T12:30:10.003
> 
> 标签：asp.net-mvc-3, entity-framework, ef-database-first

我目前正在学习带有实体框架的 ASP.Net MVC 3，并想知道是否有办法修改使用数据库优先方法生成的模型类的 getter 和 setter。比如说，我想在模型的 getter 和 setter 中清理 HTML，以确保没有无效代码保存在数据库中。最好的方法是什么？

之前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:47:37.733

在 edmx 图中，您可以编辑一个属性的属性，其中之一是访问修饰符：

![在此处输入图像描述](../Images/19b5450322c687b53806184a7d75c62f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:37:28.997

您将需要使用您的自定义验证例程。该类将自动填充，由您决定它是否有效。

使用 IValidateableObject 或重写 ValidateEntity 方法来处理您自己的验证。

请参阅 Julie 的文章：http: [//msdn.microsoft.com/en-us/data/gg193959.aspx](http://msdn.microsoft.com/en-us/data/gg193959.aspx)

# php - MongoDB/PHP 每个类别一个

> ID：12073201
> 
> 赞同：0
> 
> 时间：2012-08-22T12:30:14.867
> 
> 标签：php, mongodb, database

我有一张这样的桌子：

```
# TABLE IN DB
| Cat | Date    | ... datas ... |
| 1   | 11-02   | data2
| 2   | 11-04   | data2
| 1   | 12-01   | data1
| 2   | 12-01   | data1
| 2   | 12-03   | data3
| 2   | 12-04   | data4 
```

我的挑战是为每个类别获取一个条目并选择一个特定的数据（这里我们选择 data1）。输出示例：

```
# TABLE RESULT
| Cat | Date    | ... datas ... |
| 1   | 11-02   | data2
| 2   | 11-04   | data2 
```

实际上我得到了一个数组中的所有类别编号和另一个数组中的所有数据。然后我创建两个循环“foreach”：

```
foreach ($array_cat as $cat){
   foreach($array_data as $data){
        MONGO_FIND_HERE...
   }
} 
```

因为集合非常大，并且有很多猫和数据，这可以进行大约 1000-5000 次查询，需要 10 到 20 秒才能完成。

我怎样才能让它更快，对不起，我是 MongoDB 的新手，但我喜欢它 :)

**编辑1：简单的例子**

```
| Cat | Date    | ... datas ... |
| 1   | 11-02   | data2
| 2   | 11-04   | data2
| 1   | 12-01   | data1
| 2   | 12-01   | data1
| 2   | 12-03   | data3
| 2   | 12-04   | data4 
```

我怎样才能每个类别只有一个具有最新日期和“data2”的条目？我应该使用什么结构/架构？

```
# TABLE RESULT
| Cat | Date    | ... datas ... |
| 1   | 12-04   | data2
| 2   | 12-04   | data2 
```

我应该使用什么机制？如何在不使用“for循环”的情况下做到这一点？我们有数组：array(1,2) 知道存在哪个类别。更好:=)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:53:04.713

> 我的挑战是为每个类别获取一个条目并选择一个特定的数据（这里我们选择 data1）。

听起来你想要[与众不同](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)：

```
> db.runCommand({distinct: "coll", key: "category", query : {datas: "data1"}}) 
```

有关 PHP 示例，请参阅[http://php.net/manual/en/mongodb.command.php](http://php.net/manual/en/mongodb.command.php)。

> 我怎样才能每个类别只有一个具有最新日期和“data2”的条目？

如果您知道最晚日期（例如，查询 12-04），您可以再次使用 distinct：

```
> db.runCommand({distinct: "coll", key: "category", query : {date: "12-04", datas: "data2"}}) 
```

如果最新日期可能因类别而异，则需要使用聚合框架：[http](http://docs.mongodb.org/manual/aggregation/) ://docs.mongodb.org/manual/aggregation/ 。

> 我应该使用什么结构/架构？

根据这些信息很难知道，我不太确定你在存储什么（什么是数据？），有多少（例如，每个数据有多少类别或每个数据的日期）或者如果这个是您的应用程序通常会执行的查询类型。

# java - 需要交互/验证的表单中的复合组件

> ID：12073211
> 
> 赞同：0
> 
> 时间：2012-08-22T12:30:37.910
> 
> 标签：java, forms, jsf-2, composite-component

快速背景：我在我的网站上使用 primefaces 自定义组件放置了验证码。负责人不喜欢它，因为它太难使用而且客户正在/正在抱怨。我决定我想创建一个简单的组件（即：4 + 9 = 并且用户输入答案）以避免一些垃圾邮件。无需使用图像显示问题，只需使用简单的文本即可。这让我开始研究自定义组件和复合组件（来自[这篇文章](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)和[这篇](https://stackoverflow.com/tags/composite-component/info)文章）。

现在，问题不在于临时的基本“验证码样式验证”。它更多的是关于复合组件和支持 bean 的组合。

我要做的是以这种风格创建一个支持 bean：

```
<cc:interface>

    <cc:attribute name="label" />
<!-- edited -->
    <cc:attribute name="required" />
<cc:attribute name="ident" />

</cc:interface>

<cc:implementation>

    <h:panelGrid columns="3">
        <h:outputText value="#{captcha.text}"/>
        <h:inputText id="#{cc.attrs.ident}" value="#{captcha.entered}" validator="#{captcha.validate}" required="#{cc.attrs.required eq 'true'}" label="#{cc.attrs.label}" />
        <h:message for="captchaAnswer" />
    </h:panelGrid>

    <h:inputHidden value="#{captcha.value}" />

</cc:implementation> 
```

然后我想以这种方式使用这个组件：

```
<h:form>
    ...
    <tr>
        <td>
            <my:captcha label="Captcha" ident="captcha" required="true"/> <!-- added after suggested comment -->
            <br/>
            <h:message for="captcha" class="error"/>
        </td>
    </tr>
    <tr>
        <td colspan="3" class="center">
            <h:commandButton class="button" value="#{msg['contact.label.send']}" action="#{contact.send}" >
        </h:commandButton>
        </td>
    </tr>
    ...
</h:form> 
```

如何确保在提交时我可以检查我的`{#captcha.entered}`值是否为所需值，如果不是，则在表单上返回验证消息并阻止它被提交？

`captcha`支持 bean 将很简单，并且具有值：`text`、、`answer`和，`entered`以及检查 if 的简单函数`answer == entered`。

**编辑：（尝试＃1）** 自定义验证器如下所示

```
public void validate(FacesContext context, UIComponent toValidate, Object value) {

    System.out.println("validating");

    String input = (String) value;

    //check to see if input is an integer
    //if not we know right away that the value is not good
    if(StringUtils.isNumeric(input)) {
        //if the input is numeric, convert to an integer
        int intValue = new Integer(input).intValue();
        if (intValue != answer) {
            ((UIInput) toValidate).setValid(false);

            FacesMessage message = new FacesMessage("Not a match!!");
            context.addMessage(toValidate.getClientId(context), message);
        }
    }
} 
```

在这种情况下，验证器甚至没有被调用，我也没有收到错误消息。

**编辑#2**

经过一些工作和评论的提示后，我得到了这个工作。为了获得`h:message`工作，我需要添加属性`ident`而不是`id`. 如果不是，我必须这样引用它：`<h:message for="captcha:captcha" />`这不是预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:11:41.810

这个问题的主要问题是我无法获得参考。

通过添加属性`ident`而不是`id`我让它工作。请参阅有问题的**编辑#2**。

# xpages - 通过自定义控件属性或自定义控件的自定义事件传递函数？

> ID：12073212
> 
> 赞同：4
> 
> 时间：2012-08-22T12:30:38.820
> 
> 标签：xpages

这就是我想要做的。我有一个带有按钮的自定义控件。如果我将它放在页面上，我希望最终用户程序员定义按下按钮时会发生什么。

我对如何实现这一点有三个想法，但不知道它们是否可能当然不知道该怎么做。

1.  通过自定义属性传递函数。该按钮会将该自定义属性作为函数调用。这可能吗？如果是这样，我会怎么做？我试过了，但它似乎没有用。

    复合数据.ssjs_clickOK("Hello World");

2.  为自定义控件定义自定义事件。这可能吗？会怎么做。

3.  让按钮调用需要由用户程序员定义的唯一函数名称。看起来有点乱，但它可能会起作用。我的按钮代码如何查看功能是否已定义？if (MySpecialFunction != null) 会起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:12:59.830

我在我的一个应用程序中使用以下内容将函数传递给自定义控件：

*1）在自定义控件中，添加一个属性，该属性将在我们的操作按钮中保存要执行的功能。我会打电话给我的'querySave'。属性类型必须是“javax.faces.el.MethodBinding”。编辑器必须是“方法绑定编辑器”。*

*2）。以下是此示例的自定义控件中操作按钮背后的代码：*

```
if (compositeData.querySave) if (!compositeData.querySave.call()) return;
currentDocument.save(); 
```

*这表示：如果在属性“querySave”中定义了一个函数，请调用它。如果函数返回 false，则不要保存文档。*

*3) 定义一个 SSJS 函数来执行您需要操作按钮执行的操作。我通常把我的放在一个 SSJS 库中。确保 XPage 可以访问该函数。*

*4) 在包含此控件的 XPage 中，使用我们在步骤 1 中创建的属性的编辑器（本示例中为 querySave）并输入您在步骤 3 中创建的函数的名称。重要提示：不要添加括号或参数当您输入函数名称时 - 如果输入，函数将在加载时执行，而不是在您单击操作按钮时执行。另外，不要将任何代码直接添加到编辑器中，只需添加函数名称即可。此编辑器中的任何代码也将在加载时执行。*

感谢[Bill Hanson 对专家交流的回答](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/Lotus_SmartSuite/Lotus_Notes/Q_27323733.html#a36586440)。

--

**更新：**

这是具有自定义属性的此类自定义控件的具体示例，其中所讨论的 SSJS 函数称为 validateDocument：

```
<xc:component_buttons>
    <xc:this.validateFunctionName><![CDATA[#{javascript:validateDocument}]]></xc:this.validateFunctionName>
</xc:component_buttons> 
```

下面是调用该函数的自定义控件中的按钮示例：

```
<xp:button id="submit" value="Save">
    <xp:eventHandler event="onclick" submit="true" refreshMode="complete">
        <xp:this.action>
            <xp:actionGroup>
                <xp:this.condition><![CDATA[#{javascript:
                if (compositeData.validateFunctionName) {
                    compositeData.validateFunctionName.call();
                }}]]>
                </xp:this.condition>
                <xp:save></xp:save>
            </xp:actionGroup>
        </xp:this.action>
    </xp:eventHandler>
</xp:button> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T12:47:04.177

看看这个问题：[Pass javascript code to Custom Control](https://stackoverflow.com/questions/10292363/pass-javascript-code-to-custom-control)

我的回答描述了如何通过方法绑定从自定义控件传递 SSJS 代码。

**编辑：**

1.  创建自定义控件*“ccSSJS”*
2.  将属性*ssjsCode*添加到您的 CC
    *   类型：*javax.faces.el.MethodBinding*
    *   编辑器：方法绑定编辑器
3.  这是CC的来源

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <xp:view xmlns:xp="http://www.ibm.com/xsp/core">

       <xp:button value="Label" id="button1">
         <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete">
            <xp:this.action>
               <![CDATA[#{javascript:
                  var args = new Array();
                  args["abc"] = "123";
                  args["cde"] = "456";
                  compositeData.ssjsCode.invoke( facesContext, null );
               }]]>
            </xp:this.action>
         </xp:eventHandler>
       </xp:button>
    </xp:view> 
    ```

4.  创建 XPage 并添加自定义控件

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xc="http://www.ibm.com/xsp/custom">

    <xc:ccSSJS>
          <xc:this.ssjsCode>
             <![CDATA[#{javascript:
                var app = facesContext.getApplication();
                app.createMethodBinding("#{javascript:print( args['abc'] )}", null); 
             }]]>
          </xc:this.ssjsCode>
       </xc:ccSSJS>

    </xp:view> 
    ```

如果单击自定义控件中的按钮，将调用方法*ssjsCode 。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:47:12.743

在包含自定义控件的页面上的任意位置定义任意事件处理程序，并确保给它一个 id：

```
<xp:eventHandler id="customEvent" event="customEvent">
<xp:this.action>
<![CDATA[#{javascript://your custom code}]]>
</xp:this.action>
</xp:eventHandler> 
```

然后，您可以将与该事件处理程序关联的方法绑定传递到接受 MethodBinding（或“对象”）的自定义控件的自定义属性中：

```
getComponent("customEvent").getAction(); 
```

然后，从您的自定义控件内部，您可以直接调用方法绑定：

```
var customMethod = compositeData.get("customEvent");
var customArguments = compositeData.get("customEventArguments");
customMethod.invoke(facesContext, customArguments); 
```

确保您的自定义控件的“customEventArguments”属性设置为允许多个...这会强制将该属性视为一个数组，这是调用方法所期望的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-19T09:35:49.280

这是第四个选项。不要在自定义控件上包含按钮。相反，添加一个可编辑区域，使用`id="actionButton"`. 您可以通过在自定义控件的设计定义中使用类似的内容来告诉开发人员他们需要添加按钮以及在何处添加：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" style="background-color:#4a4a4a;color:#fff;">
Add a button to the facet below.<br/>
<xp:callback facetName="actionButton" id="callback1"></xp:callback>
</xp:view> 
```

在设计定义中包含 xp:callback 将在运行时为开发人员提供一个放置区域以添加按钮。（该按钮可能需要在面板或其他容器控件中，我不确定）。如果您的客户控件上已经有其他可编辑区域，您还需要在设计定义中包含这些区域。

# blackberry - 黑莓删除应用程序时删除 SD 卡文件

> ID：12073214
> 
> 赞同：2
> 
> 时间：2012-08-22T12:30:42.783
> 
> 标签：blackberry

好的，这个黑莓应用程序在第一次安装和运行时创建了一个数据库。它安装在 SD 卡上。

当我删除应用程序时 - 这个文件仍然存在，我在删除应用程序时找不到任何删除它的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:29:02.693

不幸的是，没有关于应用程序卸载的事件。

您可以编写、打包到资源（或下载）并安装第二个后台应用程序来检查您的前台应用程序。如果删除前台应用程序，它将删除数据库并将自己从设备中删除。这是BB开发中非常高级的话题。

如果你想隐藏数据库中的数据，你可以加密它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:37:44.643

应用程序本身既不设备操作系统也不执行此类操作。卸载应用程序后，仅卸载 cod 文件并删除相关的持久对象。所有生成的数据文件（在设备内存/媒体卡中）保持不变。

作为解决您的任务的选项 - 实施和安装其他应用程序，即`uninstall watcher`监视`uninstaller`卸载事件并删除所有数据文件。

要利用此类功能，请查找[CodeModuleManager 类](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/system/CodeModuleManager.html)及其方法`addListener()`。

实现[CodeModuleListener](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/system/CodeModuleListener.html)并将其引用传递给`addListener()`CodeModuleManager 的方法。

并注意删除特定模块并采取相应措施。

# java - java.lang.Object 无法在 Eclipse 中解析

> ID：12073222
> 
> 赞同：38
> 
> 时间：2012-08-22T12:31:02.883
> 
> 标签：java, android, eclipse

当我在 Mac OSX 中安装最新版本 - Mountain Lion 时，我在让 Eclipse 工作时遇到了一些问题，我还丢失了大部分 Android 开发人员文件（但我仍然有我的项目）。我怀疑这是因为选择删除 /Developer 并移动 XCode 和其他 Apple 开发人员工具（我将我的 Android 工具放在这里）。

我现在已经安装了最新版本的 Eclipse，但问题似乎仍然存在。我的所有项目都有错误，我收到一条错误消息提示：

```
The type java.lang.Object cannot be resolved. It is indirectly referenced 
from required .class files 
```

我试图在 Eclipse 和我的终端中检查 Java 类路径，这些似乎没问题。java 和 javac 都在我的终端中运行，并且 Eclipse 中的 java 源文件有一个有效的路径（在 Preferences、Java、Installed JREs 下）。话虽这么说，我不是 Eclipse 方面的专家，所以我可能误解了应该如何解决这个问题。这里有类似问题或知道治疗方法的人吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-22T12:33:35.357

确保在项目的 Java 构建路径中定义了有效的 JRE 或 JDK。右键单击您的项目，选择 Properties...，然后选择 Java Build Path。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-01T14:27:27.100

我在将 Maven 项目从 Eclipse 移动到 RAD 时遇到了这个问题。我有一个在 Tomcat 和 JBoss 中工作的 JSP 文件，但在编译期间在 WebSphere 中的表单定义上抛出了 NullPointerException。

无论如何，将Maven项目转换为Ant项目（mvn ant：ant）后，我将Ant项目导入RAD并得到了这个错误。修复：

1.  打开 Java Build Path，选择 Libraries 选项卡。
2.  找到 JRE 系统库并将其删除。
3.  添加 JRE 系统库。

愚蠢的，但它的工作原理。它必须重置文件中的某些属性。我不知道问题是 Eclipse 还是 RAD 的旧版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T15:25:41.753

在更新我的 Android SDK 以使 Appcelerator Titanium 满意后，我开始在（非 Titanium）Eclipse 中为我的 Android 项目获取“java.lang.Object 无法解析”。

我更新了 Eclipse 中的所有依赖项，并且在重新启动 Eclipse 后错误得到了修复。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-11T20:03:36.327

几乎每次我第一次启动 Eclipse 时都会出现这个错误。如果我关闭然后重新打开 Eclipse，错误就消失了。

不过，我发现[此解决方案](https://bugs.eclipse.org/bugs/show_bug.cgi?id=255931#c5)很有用（我已在此处复制以保护链接，归功于原作者）：

> 1.  在 Eclipse 中，转到**Windows** -> **Preferences** -> **Java** -> **Installed JREs**。
> 2.  选择当前活动的 JRE/JDK 并按下**Edit**按钮。
> 3.  选择**rt.jar**并更改其在**JRE 系统库**列表中的位置（例如，按一次**向上**按钮）。
> 4.  确认所有更改，清理并重建工作区。
> 5.  下次遇到问题时，请再次重新定位**rt.jar**（或按“**恢复默认值”**按钮重置顺序）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T13:35:59.490

请从 java 构建路径中选择您安装的系统 jre 版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-24T15:26:34.120

尝试以下操作，问题就会消失

*   关闭项目并重新打开它。
*   清理项目（它将重建构建路径，因此重新配置 JDK 库）

    或者

*   删除并重新导入项目，如有必要，请再次执行上述步骤。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-15T12:53:09.867

这是一个恼人的 Eclipse 错误，它似乎时不时地咬人。有关可能的解决方案，请参阅[http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html](http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html)，否则请尝试以下操作；

关闭项目并重新打开它。清理项目（它将重建构建路径，因此重新配置 JDK 库）

或者

删除并重新导入项目，如有必要，请再次执行上述步骤。

更好的解决方法是尝试 NetBeans 而不是 Eclipse

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-30T08:34:50.323

我收到了这个错误，我必须做的是从 Window/Preferences/Java/Installed JREs 中删除 JRE 并重新添加它。这以某种方式清除了 eclipse 的缓存并成功地重建了项目。为了摆脱文件编辑器中的错误，我还必须关闭它并再次打开文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-25T05:05:07.370

我的问题是我在 Eclipse: Window / Preferences... 然后在左侧的树中 Java / Installed JREs: C:\Program Files\Java\jre7 我改为： c:\Program Files **(x86)** \ Java\jre7 它解决了我的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-27T04:25:51.737

我有同样的问题，上述解决方案都不适合我。然后我意识到项目中缺少库（libs）文件夹。一旦我添加了 libs 文件夹和相应的 Jar 文件，问题就解决了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-17T07:54:14.220

如果您的项目特定（或者如果不适用，工作区默认值）JDK/JRE 被正确引用并且您刚刚开始突然解决这个问题：重新启动 Eclipse。

不幸的是，当项目无法构建时，“重新启动 Eclipse”是标准故障排除步骤之一。Eclipse 甚至在 File 菜单下有一个专门的条目。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-20T20:45:55.927

我必须在构建路径下添加 JDK。添加正确的构建路径后，它起作用了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-10-26T21:29:51.487

我只需要重新启动eclipse，错误就消失了。奇怪的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-02-25T03:34:00.193

我通过将我的 Eclipse 指向 jdk 中可用的 jre 来解决这个问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-04-29T11:22:09.917

由无效 sdk 导致的此错误指向您项目的 project.properties 文件。project.properties -> 目标=android-19 。更改为安装在 Eclipse 中的版本。错误将消失。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-05-14T08:35:59.093

从 JRE7 迁移到 JDK7 后，我遇到了同样的问题。最后，我不得不从 Eclipse 首选项中删除 JRE7 配置，然后将以下两行添加到 eclipse.ini 文件中。

-vm C:\Program Files\Java\jdk1.7.0_55\bin\javaw.exe

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-05-15T08:03:00.647

我遇到了这个问题，我了解到 Eclipse 已经自动导入了核心引用，而不是我需要的项目的引用。

删除导入并重新排列，一切正常。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-03-17T06:51:08.290

我面临同样的问题 Project->properties->Android
并选择api级别并进入java构建路径并检查一些外部jar文件路径，如果我们已经添加它。更新jar文件路径

# javascript - .append 在 jQuery 中无法正常工作

> ID：12073226
> 
> 赞同：0
> 
> 时间：2012-08-22T12:31:19.867
> 
> 标签：javascript, jquery, html

我在现有 div 中追加 div，然后在追加 div 中追加一个 div，但它对我不起作用。我究竟做错了什么。请帮忙

```
<head>
<script type="text/javascript">
$(function(){
$('a').click(function(){
var cl=$('#free').clone();
var jj=$('.append')
var mm=jj.append('<div class="hii"></div>')
mm.append(cl)
})
})
</script>
</head>
<body>
<div style="background:#F00; width:500px; height:50px" id="free"></div>
<a href="#">hide</a>
<div class="append"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:36:08.680

`jj.append('<div class="hii"></div>')`return `jj`，而不是新的 div。所以使用这个：

```
$(function(){
  $('a').click(function(){
    var cl = $('#free').clone();
    var jj = $('.append');

    var mm = $('<div class="hii"></div>');

    jj.append(mm);
    mm.append(cl);
  });
}); 
```

# animation - 幻灯片动画多个 div 切换

> ID：12073227
> 
> 赞同：0
> 
> 时间：2012-08-22T12:31:22.000
> 
> 标签：animation, html, toggle, slide

我在页面底部有 3 个 div，每个 div 都有一个链接。

我想做什么

当我单击一个链接时，div 将向上滑动 400px，#maincontent 将淡出，如果其他 2 个打开，那么它们将向下滑动，因此一次只有 1 个完全可见，如果没有打开，#maincontent 将淡出早在。

我可以让他们在点击事件上上下动画，但我不能让其他人回到原来的位置。

任何帮助将非常感激。

html

```
 <div class="poolbox1"><a class="poolview1" href="#"></a>content</div>
    <div class="poolbox2"><a class="poolview2" href="#"></a>content</div>
    <div class="poolbox3"><a class="poolview3" href="#"></a>content</div> 
```

css

```
.poolview1{ float:right; margin-top:-25px; display:block; width:31px; height:31px; background-image:url(images/accept.png); background-repeat:no-repeat}
.poolbox2{width:300px; float:left; height:400px; background-color:#666666; margin-top:-20px;opacity: 0.9; filter: alpha(opacity=90);} 
```

jQuery

```
$(".poolview1").click(function(){
     $(".poolbox1").animate({
          marginTop: "-=400px",          
          height: "+=400px"
    }, 1000);
     $(".poolview1").fadeOut(1000);
     $("#maincontent").fadeOut(1000);
});

$(".poolview2").click(function(){
     $(".poolbox2").animate({
          marginTop: "-=400px",          
          height: "+=400px"
    }, 1000);
     $(".poolview2").fadeOut(1000);
     $("#maincontent").fadeOut(1000);
});

$(".poolview3").click(function(){
     $(".poolbox3").animate({
          marginTop: "-=400px",          
          height: "+=400px"
    }, 1000);
     $(".poolview3").fadeOut(1000);
     $("#maincontent").fadeOut(1000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:52:53.833

一个工作**[演示](http://jsfiddle.net/uttara/LcCkR/2/)**

html

```
<div id="poolbox1" class="poolbox"><a id="poolview1" class="poolview" href="#">poolview1</a>content</div>
<div id="poolbox2" class="poolbox"><a id="poolview2" class="poolview" href="#">poolview2</a>content</div>
<div id="poolbox3" class="poolbox"><a id="poolview3" class="poolview" href="#">poolview3</a>content</div>​ 
```

css

```
.poolview{float:right; display:block; width:31px; height:31px; }
.poolbox{width:150px; float:left; height:400px; background-color:#666666;opacity: 0.9; filter: alpha(opacity=90);} 
```

jQuery

```
$(".poolview").click(function(){
     $(".poolbox").animate({
          marginTop: "400px",          
          height: "0px"
     }, 1000);
     $(this).parent().animate({
          marginTop: "0px",          
          height: "400px"
     }, 1000);
     $(".poolview").fadeIn(1000);
     $(this).fadeOut(1000);
     $("#maincontent").fadeOut(1000);
});​ 
```

# c# - 像 asp 的下拉列表一样设置和检索微调器值 - 用于 android 的单声道

> ID：12073230
> 
> 赞同：2
> 
> 时间：2012-08-22T12:31:31.227
> 
> 标签：c#, spinner, xamarin.android

我真的不明白如何像 asp.net 的下拉列表那样使用微调器，其中您有一个为用户显示的值，以及一个可用于更改事件的隐藏自定义值。

就像在 asp.net 中一样，你可以这样做：

```
string value = "somevalue";
dropdownlistID.Items.Add(new ListItem("text",value)); 
```

如果我可以用`dropdownlistID.SelectedValue`

如果有人有可以向我解释这一点的链接或任何其他建议，请提供帮助！我正在使用适用于 android 的 mono 在 vs2010 中制作一个 android 应用程序。

问候， 马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:49:34.863

您需要创建一个 ArrayAdapter，就像填充 ListView 一样。

```
 spinTime = FindViewById<Spinner>(Resource.Id.spinTimeChoose);
 List<string> spinnerItems = new List<string>();
 ArrayAdapter adapter  new ArrayAdapter<string> (this,Android.Resource.Layout.SimpleSpinnerItem,spinnerItems);

 adapter.SetDropDownViewResource(Android.Resource.Layout.SimpleSpinnerDropDownItem);
 spinTime.Adapter = adapter;
 spinTime.ItemSelected += (s, e) =>
 { 
  Log.Debug("SpinnerItems", spinnerItems[e.Position]);           
 } 
```

希望能帮助到你

编辑：我想我现在得到了你的问题 :) 下面是一个自定义适配器的示例，用于清除列表。对硬编码的德语字符串感到抱歉。重要的部分是 getView 方法。每当一个新的列表项进入用户视图时，它就会被调用。您必须膨胀一个新视图，或者如果不是 null，则重用 convertView 并用列表中的值填充它。

```
class ClearanceListAdapter : BaseAdapter
{
    private readonly List<Clearance> _clearances;
    private readonly Activity _context;

    public ClearanceListAdapter(List<Clearance> Clearances, Activity context)
    {
        _clearances = Clearances;
        _context = context;
    }

    public override int Count
    {
        get { return _clearances.Count(); }
    }

    public override Java.Lang.Object GetItem(int position)
    {
        return null;
    }

    public override long GetItemId(int position)
    {
        return position;
    }

    public Clearance GetClearance (int position)
    {
        return _clearances.ElementAt(position);

    }

    public override Android.Views.View GetView(int position, Android.Views.View convertView, Android.Views.ViewGroup parent)
    {

        View view = (convertView ?? _context.LayoutInflater.Inflate(Resource.Layout.ClearanceListItem, parent, false));

        Clearance clearance = _clearances[position];

        view.FindViewById<TextView>(Resource.Id.txtClearanceDescription).Text = clearance.Description;
        view.FindViewById<TextView>(Resource.Id.txtStartDate).Text = clearance.Start.ToString("g");
        view.FindViewById<TextView>(Resource.Id.txtEndDate).Text = clearance.End.ToString("g");

        return view;
    }
} 
```

# jquery - 一个奇怪的包含 (*) jQuery 选择器

> ID：12073231
> 
> 赞同：1
> 
> 时间：2012-08-22T12:31:35.117
> 
> 标签：jquery

你好我有这个html结构。

```
<span class="radio" style="background-position: 0px 0px; "></span> 
```

我只想检查样式更改为时的状态

```
<span class="radio" style="background-position: 0px -50px; "></span> 
```

所以我猜这段代码会匹配：

```
var isChecked = $('.yleis span.radio[style*="-50"]')?true:false;

console.log(isChecked); 
```

但是为什么这总是返回 true？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:35:31.923

jQuery 调用总是返回一个 jQuery 对象，即使选择器匹配零个元素。

检查 jQuery 对象的长度以查看它是否匹配任何内容：

```
var isChecked = $('.yleis span.radio[style*="-50"]').length > 0; 
```

（正如 Plutor 所指出的，冒号不应该在选择器中。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:36:22.890

jQuery 选择器（`$('div)`等）的结果将始终是一个 jQuery 对象。要将其转换为是否存在任何结果的布尔值，请检查长度属性。0 以外的任何值都是正确的。

```
var isChecked = $('.yleis span.radio[style*="-50"]').length ? true : false; 
```

您也不需要 : 在收音机之后。

[http://jsfiddle.net/sfkkh/](http://jsfiddle.net/sfkkh/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:34:48.477

你假设一个空的 jQuery 对象（没有匹配的元素）会产生你`false`和一个非空的对象`true`。这不是真的 - 一个 jQuery 对象总是“某物”。您想检查它是否*为空*。改用`$(...).length > 0`（它给你一个布尔值 - 不需要三元运算符）。

# php - Zend Framework 一条路由到多个控制器

> ID：12073234
> 
> 赞同：0
> 
> 时间：2012-08-22T12:31:41.443
> 
> 标签：php, zend-framework

我是 Zend 框架的新手，我遇到了路由问题。
我想做这样的事情：

*   `http://localhost/category/`
    转到没有页面和城市参数的类别控制器

*   `http://localhost/category/page/`
    转到具有页面参数且没有城市参数的类别

*   `http://localhost/category/city/`
    转到具有城市参数且没有页面参数的类别控制器

*   `http://localhost/category/city/page/`
    使用城市和页面参数进入类别控制器

*   `http://localhost/city/`
    进入没有页面参数的城市控制器

*   `http://localhost/city/page/`
    使用页面参数进入城市控制器

ps page is paginator param 我想做的是这样的：

```
localhost/phones/new-york/2 gets second page products form category phones and city New York
localhost/phones/2 gets second page products form category from all cities
localhost/new-york/2 gets second page of all products form city New York and so on... 
```

我可以使用 Zend Framework 中的标准路由来实现这一点，还是编写自定义路由？

是否可以在符号后传递`$this->url`可选参数？`?`我的意思是这样的：

```
http://localhost/category/city?order_by=category-name&order_asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:50:55.277

URL 助手不会输出查询字符串参数，因为它们不是路由的一部分。您的选择是：

最后包括它们：

```
<a href="<?=$this->url(array('controller' => 'category', 'something' => 'city')?>?order_by=category-name&order_asc">Some link</a> 
```

或更改您的路线以使用键/值对：

```
http://localhost/:controller/:something/* 
```

然后，你可以这样做：

```
<a href="<?=$this->url(array('controller' => 'category', 'something' => 'city', 'order_by' => 'category-name', 'order_asc' => 1)?>">Some link</a> 
```

这将输出：

```
<a href="/category/city/order_by/category-name/order_asc/1">Some link</a> 
```

# asp.net - ASP.NET 4.0 中的多语言网站

> ID：12073245
> 
> 赞同：0
> 
> 时间：2012-08-22T12:32:19.937
> 
> 标签：asp.net, multilingual

我想开发一个支持瑞典语、荷兰语和阿拉伯语的多语言网站。我谷歌了很多，发现以下是开发这个的方法：

1.  使用资源文件（传统方式）：这似乎不是一个优雅的解决方案，因为我必须为每种语言和网站的每个页面维护单独的资源文件。

2.  使用谷歌翻译：我探索了以下代码，发现它工作正常，但并非在所有情况下，

公共字符串 TranslateText（字符串输入，字符串语言对）{ 字符串 url = String.Format（“http://www.google.com/translate_t?hl=en&ie=UTF8&text={0}&langpair={1}”，输入，语言对); WebClient webClient = new WebClient(); WebProxy proxyObj = new WebProxy("http://ipAddress:port");

```
 proxyObj.Credentials = CredentialCache.DefaultCredentials;
    webClient.Proxy = proxyObj;
    webClient.Encoding = System.Text.Encoding.UTF8;
      string result = webClient.DownloadString(url);
    int index = result.IndexOf("id=result_box");
    int startIndex = index + 33;

    result = result.Substring(startIndex, result.Length - startIndex);
    result = result.Substring(0, result.IndexOf("</div"));
    return result;
} 
```

1.  使用谷歌翻译栏：我在一些网站上看到过谷歌翻译栏，比如维基百科，它允许用户将网站的全部内容更改为他/她想要的语言。

我想知道有没有其他方法可以做到这一点，这是最好的专业方法。

# css - FB 赞按钮 Joomla

> ID：12073253
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:32:55.720
> 
> 标签：css, video, joomla, facebook-like, internet-explorer-9

我在 Joomla 中使用类似 FB 的按钮。这是我的网站[http://www.kaefiggefluester.de](http://www.kaefiggefluester.de)的地址。

对于类似 fb 的按钮，我使用带有 fb 社交插件代码的自定义 html 模块，然后将其加载到我自己在模板中定义的 user4 位置。

现在我面临三个不同的问题。

1.  在 IE 9 中，在加载类似 fb 的按钮之前，它会显示一条白线。加载按钮后它会消失。我在 Firefox 中没有遇到这个问题。
2.  此外，在 IE 中加载页面时，有时会扭曲页面。我知道一篇帖子说我应该寻找任何扭曲标签的脚本，但是只有当我启用了 facebook 插件时我才会遇到这个问题。如果我从自定义 Joomla 模块中删除类似 fb 的代码，它工作正常。
3.  我有一个来自 Videoflow 的组件。我不知道它是如何工作的，但是类似 fb 的按钮在示例页面上不能作为这个组件工作。但是它在 IE 中工作，但语言错误。也就是说，我为按钮定义的语言是 DE（德语），因此在其余页面中显示“Gefaellt mir”。但是，在 KG TV 中，它显示“Like”。...所以这表明加载脚本有问题。但是，这仅在 IE 中发生。在 Firefox 中，它根本没有加载。

如果您认为我应该分享一些代码，请告诉我，因为文件太多，我不知道要分享哪个。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:18:52.810

我建议为 Firefox 安装[firebug](https://getfirebug.com/)或使用 Chrome 等效版本来帮助您开发网站。然后您可以使用控制台查看是否有任何问题。例如，目前您的网站存在这些问题，这可能是您遇到您提到的问题的原因：

![在此处输入图像描述](../Images/7530497f7d323bd751cd66ae35f69515.png)

# javafx - javafx 2.1 中的 FX.defer() 方法的等价物是什么

> ID：12073255
> 
> 赞同：4
> 
> 时间：2012-08-22T12:32:58.073
> 
> 标签：javafx, javafx-2

```
 FX.deferAction(new Function0<Void>() {
       @Override public Void invoke() {
       //Some code here
         return null;
       }
    }); 
```

我将代码从 javafx 1.3 转换为 javafx 2.1，但我遇到了这个问题。javafx 2.1中这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:25:52.890

```
javafx.application.Platform.runLater(new Runnable() {
    public void run() {
        // some code here
    }
}); 
```

# c# - Obout Calender 控件上不显示时间？

> ID：12073261
> 
> 赞同：0
> 
> 时间：2012-08-22T12:33:18.173
> 
> 标签：c#, asp.net, textbox, toolbox, obout

我正在使用 c# 在 asp.net 中使用 obout 日历控件。我已经使用本教程 Obout [http://www.obout.com/calendar/tutorial_settime.aspx](http://www.obout.com/calendar/tutorial_settime.aspx.I)设置了控件的代码。我正在使用这个控件，因为我需要要从用户那里获得的时间和日期，但它只选择日期，它显示时间选择器并允许您设置它只是不显示在文本框中的时间。

我想要它做的是显示开始时间和日期，但到目前为止只有日期有效。

```
<td class="question">
   Start Date & Time
</td>
<td>
   <asp:TextBox runat="server" ID="txtDate" CssClass="answer" MaxLength="50" Width="100px"/>
   <span class="mandatory">*</span>
   <obout:Calendar ID="Calendar1" runat="server"
                   DatePickerMode="true"
                   TextBoxId="txtDate"
                   ShowTimeSelector="true"
                   TextSelectTime="Set Time">
   </obout:Calendar>
</td>
</tr>
<tr>
<td class="question">
   Finish Date and Time
</td>
<td>
   <asp:TextBox runat="server" ID="TxtFinish" CssClass="answer" MaxLength="50" Width="100px"/>
   <span class="mandatory">*</span>
   <obout:Calendar ID="Calendar2" runat="server"
                   DatePickerMode="true"
                   TextBoxId="TxtFinish"
                   ShowTimeSelector="true"
                   TextSelectTime="Set Time">
   </obout:Calendar> 
```

# javascript - 使用 jQuery 按字母顺序对选项元素进行排序

> ID：12073270
> 
> 赞同：87
> 
> 时间：2012-08-22T12:33:50.347
> 
> 标签：javascript, jquery, html, sorting

我正在尝试按字母顺序理解`option`元素中的排序元素`select`。理想情况下，我希望将其作为一个单独的函数，我可以在其中传入 select 元素，因为当用户单击某些按钮时需要对其进行排序。

我一直在寻找一种很好的方法来做到这一点，但找不到任何对我有用的东西。

选项元素应按文本的字母顺序排序，而不是按值排序。

这在某种程度上可能吗？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-08-22T12:40:00.230

我要做的是：

1.  将每个文本和值提取`<option>`到对象数组中；
2.  对数组进行排序；
3.  `<option>`按顺序使用数组内容更新元素。

要使用 jQuery 做到这一点，你可以这样做：

```
var options = $('select.whatever option');
var arr = options.map(function(_, o) { return { t: $(o).text(), v: o.value }; }).get();
arr.sort(function(o1, o2) { return o1.t > o2.t ? 1 : o1.t < o2.t ? -1 : 0; });
options.each(function(i, o) {
  o.value = arr[i].v;
  $(o).text(arr[i].t);
}); 
```

[这是一个工作的jsfiddle。](http://jsfiddle.net/Pointy/trELD/)

*编辑*——如果要排序以忽略字母大小写，可以在比较之前使用 JavaScript`.toUpperCase()`或`.toLowerCase()`函数：

```
arr.sort(function(o1, o2) {
  var t1 = o1.t.toLowerCase(), t2 = o2.t.toLowerCase();

  return t1 > t2 ? 1 : t1 < t2 ? -1 : 0;
}); 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-10-07T09:12:33.153

接受的答案并非在所有情况下都是最好的，因为有时您希望保留选项类别和不同的参数（例如 data-foo）。

我的解决方案是：

```
var sel = $('#select_id');
var selected = sel.val(); // cache selected value, before reordering
var opts_list = sel.find('option');
opts_list.sort(function(a, b) { return $(a).text() > $(b).text() ? 1 : -1; });
sel.html('').append(opts_list);
sel.val(selected); // set cached selected value 
```

//对于ie11或者得到空白选项的，替换html('') empty()

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2015-09-23T17:11:44.530

### html:

```
<select id="list">
    <option value="op3">option 3</option>
    <option value="op1">option 1</option>
    <option value="op2">option 2</option>
</select> 
```

### jQuery：

```
var options = $("#list option");                    // Collect options         
options.detach().sort(function(a,b) {               // Detach from select, then Sort
    var at = $(a).text();
    var bt = $(b).text();         
    return (at > bt)?1:((at < bt)?-1:0);            // Tell the sort function how to order
});
options.appendTo("#list");                          // Re-attach to select 
```

我使用了 tracevipin 的解决方案，效果非常好。我在这里为像我这样喜欢查找易于阅读的代码的人提供了一个稍微修改过的版本，并在理解*后对其进行压缩。*我还使用`.detach`而不是`.remove`保留选项 DOM 元素上的任何绑定。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-08-22T12:48:17.610

```
<select id="mSelect" >
    <option value="val1" > DEF </option>
    <option value="val4" > GRT </option>
    <option value="val2" > ABC </option>
    <option value="val3" > OPL </option>
    <option value="val5" > AWS </option>
    <option value="val9" > BTY </option>
</select> 
```

.

```
$("#mSelect").append($("#mSelect option").remove().sort(function(a, b) {
    var at = $(a).text(), bt = $(b).text();
    return (at > bt)?1:((at < bt)?-1:0);
})); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-04-14T12:35:40.183

这是我改进的[Pointy 解决方案](https://stackoverflow.com/a/12073377/2930272)：

```
function sortSelectOptions(selector, skip_first) {
    var options = (skip_first) ? $(selector + ' option:not(:first)') : $(selector + ' option');
    var arr = options.map(function(_, o) { return { t: $(o).text(), v: o.value, s: $(o).prop('selected') }; }).get();
    arr.sort(function(o1, o2) {
      var t1 = o1.t.toLowerCase(), t2 = o2.t.toLowerCase();
      return t1 > t2 ? 1 : t1 < t2 ? -1 : 0;
    }); 
    options.each(function(i, o) {
        o.value = arr[i].v;
        $(o).text(arr[i].t);
        if (arr[i].s) {
            $(o).attr('selected', 'selected').prop('selected', true);
        } else {
            $(o).removeAttr('selected');
            $(o).prop('selected', false);
        }
    }); 
} 
```

该函数具有`skip_first`参数，当您想将第一个选项保持在顶部时很有用，例如当它是“选择下方：”时。

它还跟踪先前选择的选项。

示例用法：

```
jQuery(document).ready(function($) {

  sortSelectOptions('#select-id', true);

}); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-10-16T12:17:40.807

我知道这个话题很老，但我认为我的回答可能对很多人有用。

这是使用 ES6由**Pointy的答案制作的 jQuery 插件：**

```
/**
 * Sort values alphabetically in select
 * source: http://stackoverflow.com/questions/12073270/sorting-options-elements-alphabetically-using-jquery
 */
$.fn.extend({
    sortSelect() {
        let options = this.find("option"),
            arr = options.map(function(_, o) { return { t: $(o).text(), v: o.value }; }).get();

        arr.sort((o1, o2) => { // sort select
            let t1 = o1.t.toLowerCase(), 
                t2 = o2.t.toLowerCase();
            return t1 > t2 ? 1 : t1 < t2 ? -1 : 0;
        });

        options.each((i, o) => {
            o.value = arr[i].v;
            $(o).text(arr[i].t);
        });
    }
}); 
```

使用非常简单

```
$("select").sortSelect(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-27T16:57:13.387

没有一个答案对我有用。出于某种奇怪的原因，在遍历选项时，每个选项在`text()`被调用时什么都不返回。相反，我被迫通过`attr('label')`

```
/**
 * Sort the options of the target select list
 * alphabetically by label. For some reason, when
 * we call detach(), the returned options have no
 * text() and instead we're forced to get the option's
 * label via the 'label' attribute.
 * @param select jQuery selector
 */
function sort_multi_select(select) {
    var options = select.find('option');
    options.detach().sort(function (a, b) {
        var at = $(a).attr('label'), //label, not text()
            bt = $(b).attr('label');
        return at > bt ? 1 : at < bt ? -1 : 0;
    });
    options.appendTo(select);
}

//example
sort_multi_select($('#my_select')); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-05-27T18:10:51.327

我结合了[marxin](https://stackoverflow.com/a/26232541/1430996)和[kuxa 的](https://stackoverflow.com/a/40070149/1430996)优秀答案的部分来创建一个 jQuery 自定义函数，

1.  按文本值对选项进行排序（不区分大小写），

2.  保持任何已经选择的值，**并且**

3.  返回执行函数的原始 jQuery 对象：

    ```
    $.fn.extend({
        sortSelect() {
            return this.each(function(){
                let $this = $(this),
                    original_selection = $this.val(),
                    $options = $this.find('option'),
                    arr = $options.map(function(_, o) { return { t: $(o).text(), v: o.value }; }).get();

                arr.sort((o1, o2) => {
                    // sort select
                    let t1 = o1.t.toLowerCase(), 
                        t2 = o2.t.toLowerCase();
                    return t1 > t2 ? 1 : t1 < t2 ? -1 : 0;
                });

                $options.each((i, o) => {
                    o.value = arr[i].v;
                    $(o).text(arr[i].t);
                });

                $this.val(original_selection); 
            })
        }
    }); 
    ```

[Working example on jsFiddle is available at https://jsfiddle.net/jhfrench/64och25e/](https://jsfiddle.net/jhfrench/64och25e/).

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-22T12:39:27.170

[jquery.selectboxes.js](http://marcj.github.io/jquery-selectBox/)插件有一个排序方法。您可以实现该插件，或深入研究代码以查看对选项进行排序的方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-15T07:17:25.800

是的，您可以按其文本对选项进行排序并将其附加回选择框。

```
 function NASort(a, b) {    
      if (a.innerHTML == 'NA') {
          return 1;   
      }
      else if (b.innerHTML == 'NA') {
          return -1;   
      }       
      return (a.innerHTML > b.innerHTML) ? 1 : -1;
  }; 
```

小提琴： [https ://jsfiddle.net/vaishali_ravisankar/5zfohf6v/](https://jsfiddle.net/vaishali_ravisankar/5zfohf6v/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-27T12:33:03.307

Malakgeorge 的回答很好，可以很容易地包装到一个 jQuery 函数中：

```
$.fn.sortSelectByText = function(){
    this.each(function(){
        var selected = $(this).val(); 
        var opts_list = $(this).find('option');
        opts_list.sort(function(a, b) { return $(a).text() > $(b).text() ? 1 : -1; });
        $(this).html('').append(opts_list);
        $(this).val(selected); 
    })
    return this;        
} 
```

# c++ - 从对话框项中获取资源 ID

> ID：12073276
> 
> 赞同：0
> 
> 时间：2012-08-22T12:34:11.200
> 
> 标签：c++, winapi, mfc

我把一个图片控件放到一个对话框中，并做了这个设置 Misc->Type->Bitmap Misc->Image->999

现在在对话框的 OnInitDialog 函数中，我捕获了图片控件的 CWnd*，我想获得分配给控制器的图像或图像 id（即 999）的句柄我该怎么做？

感谢您的帮助。

控制 65443，IDC_TRUSS_CTRL，“静态”，SS_BITMAP，13、13、517、212

为了更准确地解决这个问题，我想要数字 65443 我有对话框的句柄来保存这个控件，我也得到了 IDC_TRUSS_CTRL 的句柄

我所做的是：布尔错误；dialogWnd->GetDlgItemInt(controlWnd->GetDlgCtrlID(), &error, 0);

但是错误为 0，这意味着它遇到错误：\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:15:05.273

您可以从控制转换为 CStatic 而不是 CWnd 获取 CBitmap 指针：

```
CStatic *pPictureCtrl = (CStatic*)GetDlgItem( PICTURE_CONTROL_ID ); //Notice is the control resources ID not the Image resources ID
CBitmap *pBitmap = pPictureCtrl->GetBitmap(); 
```

但这不会有太大帮助，具体取决于您想用它做什么（？）。

# text-editor - 如何在 VS2012 文本编辑器中设置参考线（右边距标记）

> ID：12073277
> 
> 赞同：5
> 
> 时间：2012-08-22T12:34:13.923
> 
> 标签：text-editor, visual-studio-2012

是否可以在没有任何扩展名的 Visual Studio 2012 文本编辑器中设置指南（右边距标记）？

**编辑**：注册表项 HKCU\Software\Microsoft\VisualStudio\11.0\Text Editor 不起作用。任何可行的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:25:54.900

现在可以使用适用于 Visual Studio 2012 的[Paul Harrington 的编辑器指南扩展](http://visualstudiogallery.msdn.microsoft.com/da227a0b-0e31-4a11-8f6b-3a149cf2e459)。因此，您有一个扩展的上下文菜单，您可以在其中添加、删除或更改指南的颜色。

# objective-c - 复制属性在目标 c 中的作用

> ID：12073278
> 
> 赞同：-5
> 
> 时间：2012-08-22T12:34:15.730
> 
> 标签：objective-c

> **可能重复：**
> [Xcode 属性属性（非原子、复制、强、弱）](https://stackoverflow.com/questions/9859719/xcode-property-attributes-nonatomic-copy-strong-weak)

我想通过任何示例了解 Copy 属性的工作过程。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:37:52.780

复制 - “指定应使用对象的副本进行分配。......先前的值被发送释放消息。” 与retain基本相同，但发送-copy而不是-retain。

保留/复制概念来自引用计数内存管理系统。

本质上，当与 @synthesize 指令一起使用时（合成您将编写的属性访问器 - 例如 -person 或 -setPerson:），它决定了如何在 setter 中管理内存。

看看这个之前问[的问题的答案](https://stackoverflow.com/questions/5988629/objective-c-simple-question-about-copy-retain-nsstring)

# java - 即使在消化文件后返回的 MD5 也是相同的 - Java

> ID：12073280
> 
> 赞同：0
> 
> 时间：2012-08-22T12:34:33.000
> 
> 标签：java

我编写了以下`Java`方法来读取文件的所有条目并基于**FILE CONTENT ONLY**`ZipInputStream`处理它。在我的课堂上，我有：`MD5`**`Tczip`**

 **```
 public String digest( ZipInputStream entry ) throws IOException{

            byte[] digest = null;
            MessageDigest md5 = null;
            String mdEnc = "";
            ZipEntry current;

            try {
                md5 = MessageDigest.getInstance( "MD5" );
                if( entry != null ) {
                    while(( current = entry.getNextEntry() ) != null ) {
                        if( current.isDirectory() ) {
                            digest = this.encodeUTF8( current.getName() );
                            md5.update( digest );
                        }
                        else{
                            int size = ( int )current.getSize();
                            if(size > 0){
                                digest = new byte[ size ];
                                entry.read( digest, 0, size );
                                md5.update( digest );
                            }
                        }
                    }
                    digest = md5.digest();
                    mdEnc = new BigInteger( 1, md5.digest() ).toString( 16 );
                    entry.close();
                }
            }
            catch ( NoSuchAlgorithmException e ) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            catch (IllegalArgumentException ex){
                System.out.println("There is an illegal encoding.");
                //
                // The fix for Korean/Chinese/Japanese encodings goes here
                //
                Charset encoding = Charset.forName("utf-8");
                ZipInputStream zipinputstream = 
                        new ZipInputStream(new FileInputStream( this.filename ), encoding);
                digest = new byte[ 1024 ];
                current = zipinputstream.getNextEntry();
                while (current != null) { //for each entry to be extracted
                    String entryName = current.getName();
                    System.out.println("Processing: " + entryName);
                    int n;
                    FileOutputStream fileoutputstream = 
                            new FileOutputStream( this.filename );

                    while (( n = zipinputstream.read( digest, 0, 1024 )) > -1) {
                        fileoutputstream.write(digest, 0, n);
                    }

                    fileoutputstream.close(); 
                    zipinputstream.closeEntry();
                    current = zipinputstream.getNextEntry();
                }//while
                zipinputstream.close();
            }
            return mdEnc;
        }

        public byte[] encodeUTF8( String name ) {
            final Charset UTF8_CHARSET = Charset.forName( "UTF-8" );
            return name.getBytes( UTF8_CHARSET );
        } 
```

然后程序将遍历根目录（aka `C:\workspace\path\to\source\code`），遍历所有目录，寻找`.zip`要处理的文件。这些文件进入`File[] files`：

```
public void showFiles( File[] files ){
        for( File file : files ){
            if( file.isDirectory() ) {
                showFiles( file.listFiles( this.filter ) );
            }
            else {
                try {
                    String path = file.getCanonicalPath();
                    String relative = path.replace("tc10.0.0.2012080100_A", "tc10.0.0.2012080600_C" );
                    File b = new File(relative);
                    if( b.exists() ) {
                        System.out.println( "Processing :" + file.getName() );
                        this.zip_a = new Tczip( path );
                        this.zip_b = new Tczip( relative );
                        String md5_a = this.zip_a.digest();
                        String md5_b = this.zip_b.digest();
                        System.out.println("MD5 A: " + md5_a);
                        System.out.println("MD5 B: " + md5_b);

                        if( md5_a.equals( md5_b )){
                            System.out.println( "They Match" );
                        }
                        else {
                            System.out.println( "They don't Match" );
                        }
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    } 
```

所以我想处理`MD5`所有这些 zip 文件，并比较它们是否匹配：**两个 EQUAL(IN CONTENT) ZIP 文件预计具有相同的 MD5**。如果文件内容不一样，那就不`MD5`一样了。但是，当我执行程序时，我有：

```
Processing :web.zip
MD5 A: d41d8cd98f00b204e9800998ecf8427e
MD5 B: d41d8cd98f00b204e9800998ecf8427e
They Match
Processing :weldmgmt_icons.zip
MD5 A: d41d8cd98f00b204e9800998ecf8427e
MD5 B: d41d8cd98f00b204e9800998ecf8427e
They Match
Processing :weldmgmt_install.zip
MD5 A: d41d8cd98f00b204e9800998ecf8427e
MD5 B: d41d8cd98f00b204e9800998ecf8427e
They Match
Processing :weldmgmt_template.zip
MD5 A: d41d8cd98f00b204e9800998ecf8427e
MD5 B: d41d8cd98f00b204e9800998ecf8427e
They Match 
```

为什么它们相同`MD5`？我希望两个文件具有相同的`MD5`，但不是全部。有什么建议么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:45:15.280

我相信以下代码行：

```
while(( current = entry.getNextEntry() ) != null ) {
                    if( current.isDirectory() ) {
                        digest = this.encodeUTF8( current.getName() );
                        md5.update( digest );
                    }
                    else{
                        int size = ( int )current.getSize();
                        if(size > 0){
                            digest = new byte[ size ];
                            entry.read( digest, 0, size );
                            md5.update( digest );
                        }
                    }
                } 
```

是这个实现失败的地方。因此，查看[API](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipInputStream.html#getNextEntry%28%29) 调用 entry.getNextEntry() 将返回下一个要处理的文件。但是，如果该值不是`directory`. 因此，有理由认为哈希是相同的，因为您`entry.read`每次都在处理行中的同一个文件。

**更新**

要解决此问题，您应该能够按照`entry = entry.getNextEntry();` Or 的方式做一些事情，以减轻对其他人的痛苦，请执行以下操作：`currentEntry = entry.getNextEntry();`**

# c++ - 使用 OpenCV 写入 16 位未压缩图像

> ID：12073281
> 
> 赞同：7
> 
> 时间：2012-08-22T12:34:33.483
> 
> 标签：c++, image, opencv

如何在不进行任何压缩的情况下保存 16 位图像（PNG 或 TIFF）？语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-24T17:57:20.210

2 年后，OpenCV 可以通过压缩 (LZW) 保存 16 位 TIFF（2.4.x 版本）。但它也支持函数中未记录的参数 TIFFTAG_COMPRESSION

`bool imwrite(const string& filename, InputArray img, const vector<int>& params=vector<int>() )`

例如，它可以设置为 COMPRESSION_LZMA（并且工作正常）。

您可以使用 COMPRESSION_NONE 作为此参数的值（您还必须将 TIFFTAG_ROWSPERSTRIP 参数设置为图像高度）。

但是即使在 2.4.9 版本中，OpenCV 在这种情况下仍然会生成不正确的 TIFF（尝试将 TIFFTAG_COMPRESSION 设置为 COMPRESSION_NONE）。

在查看 OpenCV 源代码后，我发现了两种克服此限制的方法：

1.  使用“opencv/modules/imgcodecs/src/grfmt_tiff.cpp”中的更改重新编译 OpenCV——来自 OpenCV 的人添加了压缩参数，但忘记了如果我们不想要压缩，libtiff 无法在 TIFF 句柄中设置预测器这一事实。你应该找到这个代码

    `if ( !TIFFSetField(pTiffHandle, TIFFTAG_IMAGEWIDTH, width) || !TIFFSetField(pTiffHandle, TIFFTAG_IMAGELENGTH, height) || !TIFFSetField(pTiffHandle, TIFFTAG_BITSPERSAMPLE, bitsPerChannel) || !TIFFSetField(pTiffHandle, TIFFTAG_COMPRESSION, compression) || !TIFFSetField(pTiffHandle, TIFFTAG_PHOTOMETRIC, colorspace) || !TIFFSetField(pTiffHandle, TIFFTAG_SAMPLESPERPIXEL, channels) || !TIFFSetField(pTiffHandle, TIFFTAG_PLANARCONFIG, PLANARCONFIG_CONTIG) || !TIFFSetField(pTiffHandle, TIFFTAG_ROWSPERSTRIP, rowsPerStrip) || !TIFFSetField(pTiffHandle, TIFFTAG_PREDICTOR, predictor) ) { TIFFClose(pTiffHandle); return false; }`

    并将其更改为

    `if ( !TIFFSetField(pTiffHandle, TIFFTAG_IMAGEWIDTH, width) || !TIFFSetField(pTiffHandle, TIFFTAG_IMAGELENGTH, height) || !TIFFSetField(pTiffHandle, TIFFTAG_BITSPERSAMPLE, bitsPerChannel) || !TIFFSetField(pTiffHandle, TIFFTAG_COMPRESSION, compression) || !TIFFSetField(pTiffHandle, TIFFTAG_PHOTOMETRIC, colorspace) || !TIFFSetField(pTiffHandle, TIFFTAG_SAMPLESPERPIXEL, channels) || !TIFFSetField(pTiffHandle, TIFFTAG_PLANARCONFIG, PLANARCONFIG_CONTIG) || !TIFFSetField(pTiffHandle, TIFFTAG_ROWSPERSTRIP, rowsPerStrip) ) { TIFFClose(pTiffHandle); return false; } if (compression != COMPRESSION_NONE && !TIFFSetField(pTiffHandle, TIFFTAG_PREDICTOR, predictor) ) { TIFFClose(pTiffHandle); return false; }`

    在此之后 OpenCV 可以保存压缩和未压缩的 TIFF（取决于参数`imwrite`）。

2.  另一种方法是在您的应用程序中直接使用 libtiff 来保存 TIFF。当然在这种情况下你需要实现写功能。对于 Windows，您应该编译 libtiff，但这是一项相当简单的任务（libtiff 包含许多编译器的生成文件，并且可以在 32 位和 64 位的 MinGW 和 MSVC 中完美编译）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:32:51.827

At least from 2.1 (haven't used older versions) cvSaveImage saves a single channel 16b depth image without problems. I usualy use .png for this.

This would get you a 16b image with "somedata":

```
IplImage* image = cvCreateImage(cvSize(100,100),16,1);
memset(image->imageData,someData,image->width*image->height*2);
cvSaveImage("image.png",image); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:53:56.680

根据 OpenCV 文档，cvSaveImage 仅支持 8bit 单通道或 BGR 图像。[请参阅 2.0 文档。](http://opencv.willowgarage.com/documentation/reading_and_writing_images_and_video.html)

您应该使用 libpng、libMagick++ 或其他一些库以其他位深度和格式保存。

libpng 文档包含有关[如何编写 PNG 图像](http://www.libpng.org/pub/png/libpng-1.2.5-manual.html#section-4)的教程。要指定每通道数据为 16 位的 RGB，请使用 bit_depth = 16 和 color_type = PNG_COLOR_TYPE_RGB。

为了让你的生活（可能）更轻松一些，还有[png++](http://www.nongnu.org/pngpp/doc/0.2.1/)。

**编辑：** OpenCV 似乎支持在较新版本中编写 16bpc 图像。请参阅 p.streef 的答案。这是[相关文档的链接。](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=save#int%20cvSaveImage%28const%20char%2a%20filename,%20const%20CvArr%2a%20image,%20const%20int%2a%20params%29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-02T18:31:42.483

万一其他人遇到这个 avtomaton 的解决方案似乎是通过拉请求[https://github.com/opencv/opencv/pull/3744](https://github.com/opencv/opencv/pull/3744)添加的，

允许您执行以下操作（适用于 3.2）：

```
cv::Mat shorts(1024*cv::Mat::ones(100, 100, CV_16UC1));
vector<int> tags = {TIFFTAG_COMPRESSION, COMPRESSION_NONE};

bool success = cv::imwrite("uncompressed.tif", shorts, tags); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:23:34.193

我的经验是 OpenCV 将图像保存为 16 位（没有尝试使用 3 个通道）。pgm 格式绝对有效，它是一种真正的原始格式（没有运行长度压缩）。

# python - 如何使用 Jenkins“Selenium”插件运行我的 Python TestCase？

> ID：12073285
> 
> 赞同：0
> 
> 时间：2012-08-22T12:34:40.800
> 
> 标签：python, selenium, jenkins, headless

如何将 jenkins 与 Selenium-webdriver 集成。我正在为 Selenium TestCases 使用 Python 语言。我尝试了“pyvirtualdisplay”Python 模块来隐藏 Jenkins CLI 上的显示。目前我已经使用 ant 构建脚本来执行 Python 测试套件。

我想使用 Jenkins "Selenium" 插件来集成我的 Python 测试用例。但是“Selenium”插件只允许“HTMLSuite”文件。

如何使用 Jenkins“Selenium”插件运行我的 Python TestCase？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:01:15.567

我已经尝试下载 Selenium 插件（描述中显示 Grid 的插件），它的作用是在 Jenkins 上创建一个 Selenium 服务器。然后，如果您阅读插件的规范 (https://wiki.jenkins-ci.org/display/JENKINS/Selenium+Plugin)，您将看到您需要指示您的脚本以针对正在运行的 Jenkin 的 Selenium 服务器。

我可以在 Jenkins 之外运行我的测试，但没有启动浏览器（无头）并且没有执行一些可视命令（就像屏幕截图一样简单）。

然后我看到了这个视频，它有助于使用 Selenium 测试用例构建任务：

[http://www.dailymotion.com/video/xkw0zb_jenkins-running-a-selenium-job_tech](http://www.dailymotion.com/video/xkw0zb_jenkins-running-a-selenium-job_tech)

1.  Hudson 是 Jenkins 的旧版本
2.  他创建了一个基本上可以做所有事情的 build.xml。

我仍在研究如何创建该 build.xml 文件

希望这一切对你有所帮助。

祝你好运，

# android - 用于从网站检索图像和文本的 Android 应用

> ID：12073291
> 
> 赞同：-2
> 
> 时间：2012-08-22T12:34:59.020
> 
> 标签：android

我想制作一个 android 应用程序，从网站检索列表和图像，显示并获取更新，我精通 d 显示并了解 Java ..我需要知道什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:43:09.413

好的，所以您想从 Internet 检索信息并将其存储在 ListView 中？

您可以通过 XML Parsing 从 Internet 获取数据： 1\. 您可以使用 DOM Parsing 2\. SAX Parsing 3\. 或者最有效的方式，Pull Parsing

您可能需要自己更新它；或者你可以解析网站，这更困难，但它可能，如果你使用像[jSoup这样的东西](http://jsoup.org/)

在 Android Dev Site 上有一个很好的 PullParsing[教程](http://developer.android.com/training/basics/network-ops/index.html)。

还有很多关于 ListViews 和检索图像的教程。例如[这个](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

下次如果您希望有人回答，请提供更多信息以及您已经尝试过的内容。

# html - 防止浮动换行，直到元素达到最小宽度

> ID：12073292
> 
> 赞同：4
> 
> 时间：2012-08-22T12:35:00.090
> 
> 标签：html, css, css-float, variable-width

我有可变宽度的 HTML 布局，在可变宽度的内容左侧有一个固定宽度的菜单`<div>`（由 css 最大宽度和最小宽度设置）。对于非常狭窄的浏览器窗口，我希望将内容包裹在菜单下方，我目前正在通过设置`float:left`菜单和内容来实现这一点。

```
<html>
<head>
<title></title>
</head>
<body>
<div style="width: 200px; float: left; border: 1px black solid">Menu (200px wide)</div>
<div style="max-width: 800px; min-width: 300px; float:left; border: 1px black solid">Content div. This div has max-width: 800px; min-width 300px. It has enough text that it expands to its max-width if there is space available to do so.</div>
</body>
</html> 
```

在此示例中，`div`当前只要浏览器视口小于 1000 像素（菜单宽度 + 内容最大宽度），就会发生内容换行。我希望首先减小内容的宽度，并且仅当视口小于 500px 宽（菜单宽度 + 内容最小宽度）时才将内容包裹在菜单下方

有没有办法实现这一点，无论是我目前的 float `<div>`s 安排，还是其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:34:58.290

请检查这是否是您想要的行为。

**演示**

[JSFiddle](http://jsfiddle.net/wgmjX/)

**HTML**

```
<html>
<head>
<title></title>
</head>
<body>
<div class="menu">Menu (200px wide)</div>
<div class="content">Content div. This div has max-width: 800px; min-width 300px. It has enough text that it expands to its max-width if there is space available to do so.</div>
</body>
</html>​ 
```

**CSS**

```
.menu {
    width: 200px;
    float: left;
    border: 1px black solid
}

.content {
    max-width: 800px;
    min-width: 300px;
    margin-left: 200px;
    border: 1px black solid
}

@media all and (max-width: 500px) {

.menu {
    float: none;
}

.content {
    margin-left: 0;
}

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:35:57.137

我想这就是你想要的：http: [//jsfiddle.net/joplomacedo/WXFQz/](http://jsfiddle.net/joplomacedo/WXFQz/)

*解决方案是一个简单的媒体查询 - 在XYZpx*的屏幕宽度下执行*此*操作。如果您以前从未听说过它，这里有一篇关于它的文章[http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

对于那些看不到小提琴的人，这里是 html 和 css ：

HTML：

```
<div class="container"> <!-- it's possible to do it without this extra element. it's simply more intuitive this way -->
    <div class="menu"></div>
    <div class="content"></div>
</div> 
```

​</p>

CSS：

```
.container {
    max-width: 1000px; /* your self defined 800px max-width for the content-div + 200px from the .menu's width */
    min-width: 200px;
}

.menu,
.content {
    height: 200px;
}

.menu {
    float: left;
    width: 200px;
}

.content {
    margin-left: 200px; /* same as '.menu's width */
}

@media (max-width : 400px) {
    .menu {
        float: none;
        width: auto;
    }

    .content {
        margin-left: 0;
    }
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:43:01.110

有一个来自 css-tricks 的演示：

[http://css-tricks.com/examples/PerfectFluidWidthLayout/](http://css-tricks.com/examples/PerfectFluidWidthLayout/)

我希望这对你有好处。

# java - 如何改变视图的位置？

> ID：12073297
> 
> 赞同：0
> 
> 时间：2012-08-22T12:35:12.910
> 
> 标签：java, android, view, position

我有两个视图，`x and y`它们都是黑线（例如，我将 x 线的高度**设为 1dp**，宽度**设为 230dp**，背景填充为**黑色**）。

现在我想移动线条的位置`programmatically`（例如，我希望 y 线**50dp**位于原始位置的右侧）。

有人可以帮我怎么做吗？我已经尝试过诸如 setpadding 之类的东西，但这条线没有移动。提前致谢！

（ps：我的最小 sdk 设置为 7，所以我不能使用最新的 api）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:12:21.640

**旧答案**

> 看看[Absolute Layout](http://developer.android.com/reference/android/widget/AbsoluteLayout.html)，它允许您使用 x、y 坐标定位子元素。它*已被*弃用，但它是 Android 中进行真正 x,y 坐标定位的唯一方法。
> 
> 我会问你想要做的事情背后的主要观点是什么？听起来你从一个目标开始，沿着一条路走下去，现在正在询问如何到达这条路的尽头，而不是询问如何做你需要做的事情。

* * *

**已编辑**

要绘制图表，请查看[https://stackoverflow.com/questions/2271248/how-to-draw-charts-in-android](https://stackoverflow.com/questions/2271248/how-to-draw-charts-in-android)。

使用 Layout 类来绘制图表只会导致应用程序非常缓慢，因为布局类旨在创建相对静态的布局，而不是绘制完整的图形。

而是使用 Canvas 并自己绘制您的可绘制对象，或使用我上面链接的 SO 问题中列出的图形包。

# android - Android 布局 - 图像似乎被隐藏

> ID：12073299
> 
> 赞同：0
> 
> 时间：2012-08-22T12:35:21.800
> 
> 标签：android, layout, css, media-queries

好的，一些背景知识 - 这是一个我被要求为其创建快速移动样式表的网站。坦率地说，该网站的构建并未考虑到这一点——这是一场噩梦。表格，内联样式 - 整个 cahoona。

我目前遇到的主要问题是在网站的主页上 - 有一个由 6 个图像组成的面板，每行显示 2 个纵向和 3 个横向。在 iOS 中，这工作正常，但在每个 Android 浏览器中，这已经在消失的图像中进行了测试 - 尽管如果你有一个刺激，链接仍然存在。

任何人都能够发现这个问题？

谢谢你的帮助！

[http://www.dmls-ltd.com](http://www.dmls-ltd.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:41:19.393

尝试在图像的所有链接中使用 http://。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:13:08.683

我发现了这个问题，但无法准确指出它是什么。似乎是处理我应用于 td/li/a 元素的 % 宽度的方式的错误。一个快速而肮脏的固定像素宽度，它似乎工作正常。

尽管感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:08:53.357

我向您推荐这个工具来找出确切的问题。

[http://www.smartjava.org/content/remote-chrome-debugging-android](http://www.smartjava.org/content/remote-chrome-debugging-android)

用您的少量信息来回答它有点困难。

# html - 为什么我的 Spotify 应用程序中的分享按钮图标未对齐？

> ID：12073301
> 
> 赞同：0
> 
> 时间：2012-08-22T12:35:24.077
> 
> 标签：html, css, button, spotify

我正在开发的 Spotify 应用程序中有一个分享按钮。我正在使用[开发人员指南“按钮”部分](https://developer.spotify.com/technologies/apps/guidelines/#buttons)中提供的确切 html ，并且我还导入了标准 CSS 文件。

我的按钮呈现的图标未对齐（太低），例如

![未对齐的共享图标](../Images/619dd477537b1d9ecd968c59fb1e8587.png)

我注意到这也发生在其他 Spotify 应用程序中，例如 Pitchfork

![未对齐的共享图标](../Images/9ad0aa0d73c3b9a649186003a0b24d16.png)

在原生 Spotify 页面中，图标的位置正确，例如

![正确对齐的共享图标](../Images/a6da09f169479d36b83d830b5e7d5109.png)

这是标准 Spotify 应用程序 CSS 中的错误，还是我的应用程序有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:32:59.570

这绝对是 Spotify 的 CSS 的问题。图标的位置在 shared.css 第 135 行定义：

![share.css 问题的根源](../Images/1d652a02252bae700346d23d67d2b610.png)

我在样式表中添加了以下内容以将其放回正确的位置：

```
.button.icon .share::before {
    top: -15px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:39:20.133

试试`vertical-align: top`这个`middle`元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T19:53:11.053

我们正在努力在下一版本的 API 中解决此问题。感谢您的报告！

# python - 在 matplotlib 中自定义颜色条

> ID：12073306
> 
> 赞同：0
> 
> 时间：2012-08-22T12:35:41.317
> 
> 标签：python, matplotlib

我有一个正在绘制的二维数组，我`imshow`想根据数组中每个像素的值来设置颜色。我会用一个例子来解释它。

```
from pylab import *
from numpy import *

img = ones((5,5))
img[1][1] = 2

imshow(img,interpolation='nearest');colorbar() 
```

如果您运行此代码，您会看到蓝色背景中的红色方块。红色方块对应 中的像素`[1][1]`，`img`而另一个像素为蓝色，因为它们的值为 1。如果我希望红色方块使用自定义颜色着色怎么办？或者更一般地说，如果我有一个像`img`示例中那样的二维数组，我如何用我可以选择的颜色为具有相同值的像素着色。

我发现这个页面解释了如何生成自定义颜色条，但这没有用：[http ://www.scipy.org/Cookbook/Matplotlib/Show_colormaps](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:42:11.787

您发送的该链接具有以下内容：

> 但是，如果我认为这些颜色图很难看怎么办？好吧，只需使用 matplotlib.colors.LinearSegmentedColormap 自己制作。首先，创建一个脚本，将范围 (0,1) 映射到 RGB 光谱中的值。在这本字典中，您将有一系列元组，用于每种颜色“红色”、“绿色”和“蓝色”。每个颜色系列中的第一个元素需要从 0 到 1 排序，中间有任意间距。现在，考虑下面“红色”系列中​​的 (0.5, 1.0, 0.7)。该元组表示，在 (0,1) 范围内的 0.5 处，从下到 1.0 进行插值，从 0.7 开始插值。通常，每个元组中的后两个值是相同的，但使用不同的值有助于在颜色图中放置中断。这比听起来更容易理解，正如这个简单的脚本所示：

```
 1 from pylab import *
   2 cdict = {'red': ((0.0, 0.0, 0.0),
   3                  (0.5, 1.0, 0.7),
   4                  (1.0, 1.0, 1.0)),
   5          'green': ((0.0, 0.0, 0.0),
   6                    (0.5, 1.0, 0.0),
   7                    (1.0, 1.0, 1.0)),
   8          'blue': ((0.0, 0.0, 0.0),
   9                   (0.5, 1.0, 0.0),
  10                   (1.0, 0.5, 1.0))}
  11 my_cmap = matplotlib.colors.LinearSegmentedColormap('my_colormap',cdict,256)
  12 pcolor(rand(10,10),cmap=my_cmap)
  13 colorbar() 
```

这不正是你想要的吗？

这是如何使用您提供的图像执行此操作的示例：

```
import matplotlib
from matplotlib import pyplot as plt
from pylab import *

img = ones((5,5))
img[1][1] = 2

cdict = {'red': ((0.0, 0.0, 0.0),
                (0.5, 1.0, 0.7),
                     (1.0, 1.0, 1.0)),
             'green': ((0.0, 0.0, 0.0),
                       (0.5, 1.0, 0.0),
                       (1.0, 1.0, 1.0)),
             'blue': ((0.0, 0.0, 0.0),
                      (0.5, 1.0, 0.0),
                     (1.0, 0.5, 1.0))}

my_cmap = matplotlib.colors.LinearSegmentedColormap('my_colormap',cdict,256)
plt.pcolor(img,cmap=my_cmap)
plt.colorbar()
plt.show() 
```

此外，如果您真的想将数字映射到颜色，则可以使用您链接到的示例中指定的离散 cmap，这是 scipy 文档提供的示例方法：

```
def discrete_cmap(N=8):
    """create a colormap with N (N<15) discrete colors and register it"""
    # define individual colors as hex values
    cpool = [ '#bd2309', '#bbb12d', '#1480fa', '#14fa2f', '#000000',
              '#faf214', '#2edfea', '#ea2ec4', '#ea2e40', '#cdcdcd',
              '#577a4d', '#2e46c0', '#f59422', '#219774', '#8086d9' ]
    cmap3 = col.ListedColormap(cpool[0:N], 'indexed')
    cm.register_cmap(cmap=cmap3) 
```

# asp.net - asp.net 应用程序/站点模拟是否会影响池上的其他应用程序/站点

> ID：12073313
> 
> 赞同：1
> 
> 时间：2012-08-22T12:36:14.033
> 
> 标签：asp.net, identity, impersonation, application-pool, applicationpoolidentity

我在授权某些 sql server 数据库时遇到问题，因此为了临时修复它，我在我的 ASP.NET 应用程序中使用了模拟配置部分。

```
<identity impersonate="true" userName="abc" password="abc"/> 
```

一切都对我有用，这不是解决方法，它只是一种解决方法。但我想知道，这是否会影响在此应用程序池上运行的其他应用程序和服务？

另外我想知道它是否会显着影响性能问题？对此 ASP.NET 应用程序处理的每个请求都执行 AFAIK 模拟。

谢谢。

# objective-c - C语言。逻辑错误：“-”的左操作数是垃圾值

> ID：12073315
> 
> 赞同：3
> 
> 时间：2012-08-22T12:36:21.180
> 
> 标签：objective-c, c

我有以下代码，但是在这行代码中我有警告`x[i] = (rhs[i] - x[i - 1]) / b;`，编译器告诉我 rhs[i] 是一个垃圾值。为什么会发生？以及如何删除此警告？

```
double* getFirstControlPoints(double* rhs, const int n) {
    double *x;
    x = (double*)malloc(n * sizeof(double));
    double *tmp; // Temp workspace.
    tmp = (double*)malloc(n * sizeof(double));

    double b = 2.0;
    x[0] = rhs[0] / b;
    for (int i = 1; i < n; i++) // Decomposition and forward substitution.
    {
        tmp[i] = 1 / b;
        b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];
        x[i] = (rhs[i] - x[i - 1]) / b; //The left operand of '-' is a garbage value
    }
    for (int i = 1; i < n; i++) {
        x[n - i - 1] -= tmp[n - i] * x[n - i]; // Backsubstitution.
    }
    free(tmp);
    return x;
} 
```

![在此处输入图像描述](../Images/f06fdf9ba66a1bccd8dd6714fc13a246.png)

![在此处输入图像描述](../Images/ea794f8277acf3fb0a399efdba5323e4.png)

`getFirstControlPoints`您可能会在屏幕截图上看到所有编译器警告和调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:32:01.897

您需要检查以确保数组中至少有**4**个点，因为此循环（第 333 行）：`points`

```
for (NSInteger i = 1 ; i < n - 1 ; ++i) {
    // initialisation stuff
} 
```

对于 n = 0、1、2，根本不会执行。

假设其中`points`有 3 个对象，在第 311 行将 n 设置为计数 - 1 即`n == 2`

那么循环条件就是`i < 2 - 1`ie `i < 1`。

我认为你需要循环条件是`i < n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:10:46.383

如果 points.count 为 0 或 1，您将面临一些问题，因为那时 n 为 -1 或 0，并且您访问 rhs[n-1]; 你 malloc n* 字节；

也许这可能是问题所在。您在代码中添加了一些范围检查吗？

# javascript - JS中的站点加载结构

> ID：12073318
> 
> 赞同：3
> 
> 时间：2012-08-22T12:36:30.910
> 
> 标签：javascript, ajax, load

我有一个网页，其中显示了一个包含大量数据的图表。该图表是第 3 方 Flash 组件。

许多数据在初始页面加载后被延迟加载并输入到 AJAX 中的图表中。我的问题是，当发生这种情况时，页面会冻结几次，直到所有数据都加载完毕。这是一个问题，特别是因为页面加载时，似乎一切都准备好了，但是当使用 AJAX 加载数据时，页面冻结了。一个很好的例子是我有一个 setInterval，它每 1 秒增加一个时钟。该时钟在 AJAX 加载过程中视觉上冻结。

如何避免这种情况？你会推荐不同的装载结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:45:05.033

您的问题实际上非常简单，尽管解决方案有点棘手。您遇到“冻结”的原因是 JavaScript 是单线程的。页面的绘制发生在与数据处理相同的线程上。因此，如果您有一大块数据需要很长时间来处理，您将体验到用户界面冻结。

考虑以下示例：

[http://jsfiddle.net/VT4Rs/](http://jsfiddle.net/VT4Rs/)

**注意：**如果单击“停止”按钮时屏幕被冻结，您可能需要发送一些垃圾邮件。此外，如果您的计算机/浏览器不如我的出色，您可能需要调整“WEIGHT”变量以防止超长时间冻结，或者如果您的计算机/浏览器比我的更出色，则导致冻结发生。

无论如何，关键是您会注意到“时钟”在循环所有这些数字时会定期冻结。原因是时钟更新发生在与数据“处理”相同的线程上。这种方式`setInterval()`有效，它将每`X`毫秒将一个事件（以运行它传递的函数）添加到您的事件队列中。但是，为了防止在函数运行时间超过`X`毫秒的情况下出现一些严重问题，如果事件的先前迭代已经在队列中，它将跳过将新事件添加到事件队列中。

因此，如果您有一些随机处理占用了您的线程，那么您`setInterval`的 s 显然将无法正常工作。此外，由于浏览器界面在同一线程上更新，您也可能导致“冻结”。

我发现解决此问题的最佳方法是将数据处理分解为更易于管理的“块”，然后`setTimeout(fn, 0)`定期将这些块推送到事件队列中，同时允许一些浏览器绘画和其他 JavaScript 根据需要进行处理。所以看看这个更新的例子，看看有什么不同。我们仍在“处理”相同的数据，但我们将其分成更小的块：

[http://jsfiddle.net/Sjk29/](http://jsfiddle.net/Sjk29/)

诀窍在于决定制作块的大小。您会发现将块调整为太大会导致停顿和错过间隔。但是如果你把它做得太小，由于每个块的内置开销，处理数据需要很长时间。

好消息是您不限于指定的大小。在我的示例中，块大小由变量确定，您可能会注意到每个块都引用了该变量。这意味着您可以根据用户浏览器的*实际性能*调整该变量以调整块大小。你可能会做这样的事情：

```
var CHUNK_SCALE = 8;
var CHUNK_SIZE = function() { return Math.pow(10, CHUNK_SCALE); };

(function() {
    var lastTick = new Date();

    setInterval(function() {
        var now = new Date();
        if (now - lastTick > 1500) {
            CHUNK_SCALE--;
        }
        lastTick = now;
    }, 1000);
}()); 
```

（见：http: [//jsfiddle.net/ewP96/](http://jsfiddle.net/ewP96/)）

这样，如果块大小开始太大（以可能影响 UI 性能的方式），那么它将自动将其缩放回用户计算机可以处理的范围。

JavaScript 非常棒，是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:56:03.357

我建议您使用 html5 而不是 flash 进行绘图，这可能会解决您的冻结问题。你可以查一下：

1.  [http://g.raphaeljs.com/](http://g.raphaeljs.com/)
2.  [http://www.rgraph.net/](http://www.rgraph.net/)
3.  [http://www.zingchart.com/](http://www.zingchart.com/)
4.  [http://d3js.org/](http://d3js.org/)
5.  [http://processingjs.org/](http://processingjs.org/)

# iphone - 无法使用测试用户通过 Facebook iOS SDK 3 登录

> ID：12073319
> 
> 赞同：2
> 
> 时间：2012-08-22T12:36:34.563
> 
> 标签：iphone, ios, facebook, facebook-ios-sdk, facebook-test-users

拥有与普通 FB 用户（登录和发布）一起使用的代码。刚刚创建了测试用户，但无法登录。收到消息“我们无法识别您的电子邮件地址或电话号码”。致电[https://graph.facebook.com/362652477144946/accounts/test-users](https://graph.facebook.com/362652477144946/accounts/test-users)后？...我得到了：

```
{
  "id": "100004233554579",
  "access_token": "...",
  "login_url": "https://www.facebook.com/platform/test_account_login.php?user_id=100004233554579&n=Ffaa4FVusNloYGS",
  "email": "iosproject_gaxfjez_iosproject\u0040tfbnw.net",
  "password": "..."
} 
```

尝试在用户名处输入“100004233554579”、“Ffaa4FVusNloYGS”和“iosproject_gaxfjez_iosproject\u0040tfbnw.net”，但没有任何效果。有任何想法吗？

**UPDATE1**在电子邮件中注意到“\u0040”，因此将其更改为“@”。但随后得到“我们无法识别您的电子邮件”:)

**UPDATE2**注意到登录到 Facebook login_url 时还有另一封电子邮件“100004233554579@facebook.com”，但它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-30T00:01:19.763

我在通过移动设备测试 facebook 用户登录时遇到了同样的问题 - “我们无法识别您的电子邮件地址或电话号码”。

我做了什么：

*   去开发控制台并创建新的测试用户
*   在控制台中单击编辑和更改密码 -**这不是一个错误**

通过开发控制台更改密码后 - facebook 也会更改测试电子邮件。而且您只能在 facebook.com 网站（不是 android、iOs 或 m.facebook.com）上登录 - 因为您会收到电子邮件已更改的安全警告。您也不能使用像 qwerty 这样的简单电子邮件。

你需要做什么才能让它工作：

*   在控制台中创建新的测试用户（不要改变任何东西）
*   转到 Graph API，生成应用程序令牌，通过 {app_id}/accounts/test-users 获取测试用户（[详细信息](https://developers.facebook.com/docs/graph-api/reference/v2.0/app/accounts/test-users#delete)）
*   向测试用户 /{user_id} 发布新密码（仅密码）（[详细信息](https://developers.facebook.com/docs/graph-api/reference/v2.0/test-user)）
*   现在您可以使用 m.facebook.com、Android 或 iOS 应用程序登录

有点诡异

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:55:01.630

从您的回复来看，登录所需的电子邮件似乎应该是 `iosproject_gaxfjez_iosproject@tfbnw.net`.

使用生成的密码应该对您有用。[您可以在此处](https://developers.facebook.com/docs/test_users/)阅读有关创建测试用户的更多信息。

如果它仍然不能解决您的问题，请在 [http://developers.facebook.com/bugs](http://developers.facebook.com/bugs)创建一个错误报告，我们将非常乐意调查它。

# iphone - iOS标签栏不显示模态视图

> ID：12073324
> 
> 赞同：0
> 
> 时间：2012-08-22T12:36:43.147
> 
> 标签：iphone, ios, modalviewcontroller

我想在应用程序的开头显示模态视图，但它没有出现。这是我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self initDataBase];
    CustomerModel *customer = [[[CustomerPersistor alloc] init] getLoggedCustomer];

    self.window.rootViewController = self.tabBarController;

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.

    UIViewController *profileViewController = [[[ProfileViewController alloc] initWithNibName:@"ProfileViewController" bundle:nil] autorelease];
    profileViewController.title = @"Profile";
    UINavigationController *profileNavigation = [[[UINavigationController alloc] initWithRootViewController:profileViewController] autorelease];

    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:profileNavigation,  nil];
    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyAndVisible];

    if(customer == nil) { NSLog(@"HO");
        ViewController *login = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    //login.delegate = self.tabBarController.view;

        [self.viewController presentModalViewController:[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]  animated:YES];
    }
    return YES;

} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:46:38.750

首先，似乎没有设置 self.viewController 属性，并且您正在实例化相同的“ViewController”两次。这都是错误的：

```
ViewController *login = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
//login.delegate = self.tabBarController.view;
[self.viewController presentModalViewController:[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]  animated:YES]; 
```

尝试将此代码移动到 profileViewController 的 viewDidLoad 中...即让 TabBarController 与其第一个选项卡的视图控制器一起加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:49:16.830

从模型视图中启动实例，如下所示：

```
modelView = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

请遵循以下列表：

1.  设置 viewController 模型呈现样式

    ```
    [modelView setModalPresentationStyle:UIModalPresentationPageSheet]; 
    ```

2.  然后使用：

    ```
    [self.viewController presentModalViewController:floorView animated:YES]; 
    ```

3.  然后，像这样设置模型控制器的大小和位置：

    ```
    modelView.view.superview.bounds = CGRectMake(0, 0, 700, 550);//it's important to do this after presentModalViewController
    modelView.view.superview.center = self.view.superview.center;//self.view assumes the base view is doing the launching, if not you might need self.view.superview.center etc. 
    ```

希望这对您有所帮助。

# java - Java 数组与 C++ 数组的性能和内存使用情况

> ID：12073325
> 
> 赞同：15
> 
> 时间：2012-08-22T12:36:44.970
> 
> 标签：java, c++, database, arrays, performance

我在一家小公司工作，负责开发一些银行软件。现在，我必须构建一些数据结构，例如：

```
Array [Int-Max] [2] // Large 2D array 
```

将其保存到磁盘并在第二天加载以备将来工作。

现在，因为我只知道 Java（和一点点 C），他们总是坚持让我使用 C++ 或 C。根据他们的建议：

1.  他们已经看到，Java 中的 Array [Int-Max] [2] 占用的内存几乎是 C 的 1.5 倍，而 C++ 占用的内存比 Java 还要合理。

2.  C 和 C++ 可以处理 Java 无法处理的任意大文件。

根据他们的建议，随着数据库/数据结构变大，Java 变得不可行。由于我们必须处理如此大的数据库/数据结构，C/C++ 总是更可取的。

现在我的问题是，

1.  为什么 C 或 C++ 在大型数据库/数据结构上总是比 Java 更可取？因为，C 可能是，但 C++ 也是 OOP。那么，它如何获得优于 Java 的优势呢？

2.  我应该继续使用 Java 还是他们的建议（切换到 C++）将来在大型数据库/数据结构环境中会有所帮助？有什么建议吗？

抱歉，我对所有这些都知之甚少，刚刚开始从事一个项目，所以真的很困惑。因为直到现在我才建了一些学校项目，对比较大的项目一无所知。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T12:54:51.890

> 为什么 C/C++ 在大型数据库/数据结构上总是比 Java 更可取？因为，C 可能是，但 C++ 也是 OOP。那么，它如何获得优于 Java 的优势呢？

请记住，Java 数组（对象）¹实际上是一个引用数组。为简单起见，让我们看一下一维数组：

**爪哇：**

```
[ref1,ref2,ref3,...,refN]
ref1 -> object1
ref2 -> object2
...
refN -> objectN 
```

**C++：**

```
[object1,object2,...,objectN] 
```

**使用 C++ 版本时，数组中不需要引用**的开销，数组包含对象本身 - 而不仅仅是它们的引用。如果对象很小 - 这种开销可能确实很大。

另外，正如我在评论中已经说过的那样——在 C++ 中分配小对象时，还有另一个问题。在 C++ 中，您分配一个对象数组——它们在内存中是连续的，而在 java 中——对象本身不是。在某些情况下，它可能会导致 C++ 具有更好的性能，因为它比 java 程序的缓存效率更高。我曾经在[这个线程中解决过这个问题](https://stackoverflow.com/q/9632288/572670)

> 2）我应该继续使用 Java 还是他们的建议（切换到 C++）将来在大型数据库/数据结构环境中会有所帮助？有什么建议吗？

我不相信我们可以为你回答。您应该了解每个用于您的目的的所有优点和缺点（内存效率、可以使用的库、开发时间......）并做出决定。不要害怕从贵公司的资深开发人员那里获得建议，他们比我们拥有更多关于系统的信息。
**如果这个问题有一个简单而通用的答案——不需要我们工程师，不是吗？**

您还可以在实现核心之前使用预期的数组大小和存根算法对代码进行概要分析，并对其进行概要分析以查看预期的真正差异。（假设数组确实是预期的主要空间消费者）

* * *

**1：**我接下来要描述的开销与基元数组无关。在这些情况下（原语），数组是*值*数组，而不是*引用*数组，与 C++ 相同，数组本身的开销很小（`length`例如，字段）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-22T12:54:01.153

听起来您在新工作中是缺乏经验的程序员。很有可能“他们”已经在这个行业工作了很长时间，并且比您更了解（或至少认为他们知道）该领域及其编程要求。

我的建议是做他们坚持要你做的事情。如果他们想要 C 或 C++ 的代码，只需用 C 或 C++ 编写即可。如果你认为你会遇到困难，因为你不太了解 C / C++ ...提前警告他们。如果他们仍然坚持，他们可以承担任何问题的责任并拖延他们坚持的原因。只要确保你尽力而为......并尽量不要成为“吱吱作响的轮子”。

* * *

> 1) 他们已经看到，Java 中的 Array [Int-Max] [Int-Max] 占用的内存几乎是 C 的 1.5 倍，而 C++ 占用的内存比 Java 还要合理。

这是可行的，尽管它取决于数组中的内容。

*   Java 可以使用接近最佳的内存量来表示大多数原始类型的大型数组。

*   另一方面，Java 中的对象数组可能比 C/C++ 占用更多的空间。例如，在 C++ 中，您通常会分配一个大数组 using`new Foo[largeNumber]`以便所有 Foo 实例都是数组实例的一部分。在 Java 中，`new Foo[largeNumber]`实际上等价于`new Foo*[largeNumber]`; 即一个指针数组，其中每个指针通常指向不同的对象/堆节点。很容易看出这会占用更多空间。

> 2) C/C++ 可以处理任意大的文件，而 Java 不能。

单个一维 Java 数组中的元素数量有一个硬性限制... 2^31。（您可以绕过此限制，但它会使您的代码更加复杂。）

另一方面，如果您只是在谈论读取和写入文件，Java 最多可以处理 2^63 个字节的单个文件......这比您可能想要的要多。

> 1）为什么 C/C++ 在大型数据库/数据结构上总是比 Java 更可取？因为，C 可能是，但 C++ 也是 OOP。那么，它如何获得优于 Java 的优势呢？

因为硬限制。该限制是 JLS 和 JVM 规范的一部分。*这与 OOP本身*无关。

> 2）我应该继续使用 Java 还是他们的建议（切换到 C++）将来在大型数据库/数据结构环境中会有所帮助？有什么建议吗？

听从他们的建议。如果您正在处理那么大的内存数据集，那么他们的担忧是有效的。即使他们的担忧（假设）有点夸大其词，与你的上级/前辈作战也不是一件好事......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-22T13:09:40.697

> 1) 他们已经看到，Java 中的 Array [Int-Max] [Int-Max] 占用的内存几乎是 C 的 1.5 倍，而 C++ 占用的内存比 Java 还要合理。

这取决于情况。如果你创建一个`new int[1]`或`new int[1000]`几乎没有Java或C++的区别。如果您在堆栈上分配数据，它具有很大的相对差异，因为 Java 不会将堆栈用于此类数据。

我首先要确保这不是对应用程序进行微调。值得记住的是，您一天的时间值得（假设您获得最低工资）约为 2.5 GB。因此，除非您通过这样做每天节省 2.5 GB，否则怀疑它不值得追逐。

> 2) C/C++ 可以处理任意大的文件，而 Java 不能。

我在纯 Java 程序中映射了一个 8 TB 的文件，所以我不知道这是怎么回事。

有一个限制，您不能映射超过 2 GB 或在数组中拥有超过 20 亿个元素。您可以通过拥有多个（例如多达 20 亿个）来解决此问题

> 由于我们必须处理如此大的数据库/数据结构，C/C++ 总是更可取的。

我定期将 200 - 800 GB 的数据和超过 50 亿个条目加载到单个 Java 进程中（有时在同一台机器上一次不止一个）

> 1）为什么 C/C++ 在大型数据库/数据结构上总是比 Java 更可取？

在 C/C++ 中如何做到这一点的经验比在 Java 中的经验要多，而且他们对如何做到这一点的经验只有在 C/C++ 中。

> 因为，C 可能是，但 C++ 也是 OOP。那么，它如何获得优于 Java 的优势呢？

在使用大型数据集时，在 Java 世界中使用单独的数据库更为常见（嵌入式数据库相对较少）

Java 只是调用与 C 中相同的系统调用，因此在您可以做什么方面没有真正的区别。

> 2）我应该继续使用 Java 还是他们的建议（切换到 C++）将来在大型数据库/数据结构环境中会有所帮助？有什么建议吗？

归根结底，他们付钱给你，有时技术论点并不重要。;)

# iphone - 使用 Restkit iphone 映射

> ID：12073329
> 
> 赞同：1
> 
> 时间：2012-08-22T12:36:57.763
> 
> 标签：iphone, objective-c, xcode, mapping, restkit

我正在尝试使用 restkit 对象映射来映射和存储响应 json 数据。不幸的是，我无法映射响应数据。当我查看我的数据库时，数据正在存储，但我收到以下消息时崩溃.. **这个类与键的键值编码不兼容**

输出响应

```
{
    "users": [
        {
            "id": "123456",
            "ne": "JohnSmith",
            "el": "example@example.com",
            "dob": "1985/02/04",
            "profile": {
                "id": "654321",
                "ht": "170cm",
                "wt": "70kg"
            }
        }
    ]
} 
```

我正在使用这样的映射

```
 RKManagedObjectMapping *userProfileMapping = [RKManagedObjectMapping mappingForClass:[GHSUser class] inManagedObjectStore:manager.objectStore];
    [userProfileMapping mapKeyPath:@"id" toAttribute:@"userId"];
    [userProfileMapping mapKeyPath:@"ne" toAttribute:@"name"];    
    [userProfileMapping mapKeyPath:@"el" toAttribute:@"email"];
    [userProfileMapping mapKeyPath:@"dob" toAttribute:@"dob"];

 RKManagedObjectMapping *standardProfileMapping = [RKManagedObjectMapping mappingForClass:[GHSProfile class] inManagedObjectStore:manager.objectStore];

    [standardProfileMapping mapKeyPath:@"id" toAttribute:@"userId"];
    [standardProfileMapping mapKeyPath:@"ht" toAttribute:@"height"];
    [standardProfileMapping mapKeyPath:@"wt" toAttribute:@"weight"];

[manager.mappingProvider setMapping:standardProfileMapping forKeyPath:@"users.profile"]; 
```

//在keypath（users.profile）中我遇到了崩溃，但配置文件详细信息正在插入数据库中。当我将密钥路径更改为配置文件时，我没有遇到任何崩溃，但配置文件详细信息未插入到数据库中。

```
 [userProfileMapping mapRelationship:@"users" withMapping:standardProfileMapping]; 
```

错误信息：

***** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<_NSObjectID_48_2 0x888a8d0> setValue:forUndefinedKey:]：此类不符合密钥配置文件的密钥值编码。”****

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:58:15.437

这是因为您的`users`参数是 NSArray，而不是 NSDictionary。它不知道该`users.profile`使用哪个。

您想更改同一行：

```
[manager.mappingProvider setMapping:standardProfileMapping forKeyPath:@"users.profile"]; 
```

至：

```
[manager.mappingProvider setMapping:userProfileMapping forKeyPath:@"users"]; 
```

并将这一行添加到您的 userProfileMapping：

```
[userProfileMapping mapKeyPath: @"profile" toRelationship: @"profile" withMapping: standardProfileMapping] 
```**

# django - 使用 httpd 或 django-server 启动 django 站点

> ID：12073331
> 
> 赞同：0
> 
> 时间：2012-08-22T12:37:01.133
> 
> 标签：django, django-models, django-templates, django-views

如何使用 httpd 托管 Django 站点。我已阅读文档说`modpython`不再支持。

所以我的问题是什么更常见

1.使用 httpd 启动 django 或

2.使用自己的runserver.py启动django

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:43:08.743

请参阅文档中的[部署 Django](https://docs.djangoproject.com/en/1.4/howto/deployment/)。

# haskell - 在没有类型构造函数的情况下满足单子定律

> ID：12073336
> 
> 赞同：4
> 
> 时间：2012-08-22T12:37:26.563
> 
> 标签：haskell, monads, functor, category-theory

给定例如一个类型

```
data Tree a = Branch (Tree a) (Tree a)
            | Leaf a 
```

我可以轻松地为 Functor、Applicative、Monad 等编写实例。

但是如果“包含”类型是预先确定的，例如

```
data StringTree = Branch StringTree StringTree
                | Leaf String 
```

我失去了编写这些实例的能力。

如果我要为我的 StringTree 类型编写函数

```
stringTreeReturn :: String -> StringTree
stringTreeBind   :: String -> (String -> StringTree) -> StringTree
stringTreeFail   :: String -> StringTree
-- etc. 
```

满足单子定律，我还能说那`StringTree`是单子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T01:17:51.503

`Tree a`不是一个 monad，无论是一般的还是任何特定的`a`，`Tree` **它本身**都是一个 monad。monad 不是类型，它是*任何*类型与该类型的“monadic 版本”之间的对应关系。例如，`Integer`是整数`Maybe Integer`的类型， 是`Maybe`monad 中的整数类型。

因此，`StringTree`作为类型的 不能是单子。它只是不一样的东西。您可以尝试将其想象为 monad 中的字符串类型，但您的函数`stringTreeReturn`等与它们的 monadic 对应对象的类型不匹配。查看monad`>>=`中的类型：`Maybe`

```
Maybe a -> (a -> Maybe b) -> Maybe b 
```

第二个参数是monad ( )中从 some`a`到**任何**类型的函数。具有以下类型：`Maybe``Maybe b``stringTreeBind`

```
String -> (String -> StringTree) -> StringTree 
```

第二个参数只能是从`String`到 的单子版本的函数`String`，而不是到任何类型的单子版本的函数。

因此，您不能对任意一元类型的`StringTree`值做所有可以做的事情，这就是为什么不能将其作为实例的原因。即使您可以以某种方式将其视为 monad，但当通用 monadic 代码期望能够以对`StringTree`.

归根结底，如果你认为它“像”一个 monad，因为它`String`位于一个行为类似于 monad 容器的容器中，那么最简单的做法就是让它成为任何类型的通用容器 ( `Tree a`)。如果您需要具有专门依赖于它作为字符串树的辅助功能，那么您可以将该代码编写为仅对`Tree String`值进行操作，并且它将很高兴地与通常在`Tree a`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:16:36.277

不，您正在查看*type*和*kind*之间的区别。简单地说，a kind 是 Haskell 对类型进行分类的方式，因此它是类型之上的抽象级别。`ghci`可以帮忙。

```
:type stringReturn
stringReturn :: String -> StringTree
:type Functor
<interactive>:1:1: Not in scope: data constructor `Functor' 
```

所以马上，我们可以看到一个函数，它有一个类型，与一个类型完全不同，它有一个种类。

我们也可以询问`ghci`种类。

```
:kind Functor
Functor (* -> *) -> Constraint
:kind StringTree
StringTree :: *
:kind Tree
Tree :: * -> * 
```

种类`*`在其符号中用于变量。我们可以从上面的交互中看到，`Functor`期望通过一个参数参数化的类型。我们还可以看到，`StringTree`它不带任何参数，并且`Tree`只带一个。

这是表达和解开您的问题的漫长方式，但希望它能够显示类型和种类之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:05:07.520

不，那不会是一个单子。想一想，你能写一个`m`只有`m String`可能的单子吗？

# c - protobuf c 字符串解码

> ID：12073338
> 
> 赞同：2
> 
> 时间：2012-08-22T12:37:34.583
> 
> 标签：c, protocol-buffers

专家，我需要您的帮助来解码 protobuf-c 消息中的字符串值。说消息

```
m { optional string id =0 } 
```

该字符串使用值“test”存储，通过使用 C api`m.id = "test"`并使用`m__pack(&m,buf);`消息流将其打包将如下所示`0a 04 74 65 73 74`，其中我的字符串值采用`74 65 73 74`ascii 格式。`m__unpack(NULL,length,buf)`我尝试使用`buf`包含流的 api 来取回我的字符串值。现在，当我尝试打印字符串时，`printf("%s\n",msg->id)`我得到了段错误。它不应该打印 ascii 值（74 65 73 74）吗？你能帮忙获取字符串值吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:09:36.507

解决了..这是我的错误，我在*免费*的_unpack api之后打印了msg-> id，因此出现了问题。谢谢你的时间。

# .net - 如何在 .NET 中使用半透明 PNG 制作透明表单？

> ID：12073342
> 
> 赞同：0
> 
> 时间：2012-08-22T12:37:48.343
> 
> 标签：.net, transparency

我正在尝试制作一个小恶作剧程序，通过在其上绘制 PNG 叠加层来模拟“破碎的屏幕”。我正在尝试使用 Windows 窗体（因为这是我最熟悉的），但到目前为止 - 没有运气。`TransparencyKey`我可以通过/技巧使表单透明`BackgroundColor`，但可以预见的是，当需要绘制 PNG 时它会分崩离析。还有其他想法吗？

**更新：**

为了澄清，我想要这个：

[对 http://valts.21.lv/problem/CrackedRight.jpg](http://valts.21.lv/problem/CrackedRight.jpg)

但目前我只得到这个：

[错误 http://valts.21.lv/problem/CrackedWrong.jpg](http://valts.21.lv/problem/CrackedWrong.jpg)

**Update2：**我通过 Google 搜索从[DeviantArt获得了叠加图像：](https://www.deviantart.com/window7/art/Broken-Screen-Overlay-162224514)

[![覆盖](../Images/d49c0abd09da56d313dc8091fab2d267.png)](https://i.stack.imgur.com/k1rQ4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:47:04.953

我不确定您到底想要什么，但是您可以绘制完整的不透明 PNG，例如，您可以将表单的 opacity 属性设置为 %75。

编辑：如果上面的答案不是您想要的，您可以创建一个具有透明背景的 PictureBox，将其设置为填充并且不要将该控件放在前面。当你想显示图像时，你会把它带到前面。通过以下方式设置图像的不透明度（如果需要）：

```
 Public Function SetImgOpacity(ByRef imgPic As Image, ByVal imgOpac As Single) As Image

    Dim bmpPic As New Bitmap(imgPic.Width, imgPic.Height)
    Dim gfxPic As Graphics = Graphics.FromImage(bmpPic)
    Dim cmxPic As New ColorMatrix()
    Dim iaPic As New ImageAttributes()

    cmxPic.Matrix33 = imgOpac

    iaPic.SetColorMatrix(cmxPic, ColorMatrixFlag.[Default], ColorAdjustType.Bitmap)
    gfxPic.DrawImage(imgPic, New Rectangle(0, 0, bmpPic.Width, bmpPic.Height), 0, 0, imgPic.Width, imgPic.Height, GraphicsUnit.Pixel, iaPic)

    gfxPic.Dispose()
    iaPic.Dispose()

    Return bmpPic

    End Function 
```

现在您可以将 PictureBox 的图像设置为新的半透明图像。

编辑2：这是一个好技巧

使您的表单不可见并使用计时器使用它，其中资源中的“a”是您的图像：

```
 Dim x As Graphics = Graphics.FromHwnd(IntPtr.Zero)
    x.DrawImage(My.Resources.a, 0, 0) 
```

您可以在没有表格的情况下在屏幕上绘图。但是，您需要连续绘制，因为任何其他绘图都可能打破您的错觉。

# java - 最小化该算法的时间复杂度（选择提要中的公共子串）

> ID：12073350
> 
> 赞同：0
> 
> 时间：2012-08-22T12:38:24.877
> 
> 标签：java, string, value-of

我有一个非常大的提要文件，其中包含很多列。我将用字符串表示其中一个列，我想检查这些字符串...

让我们看看我们有这些字符串值（在一个列中），提要显然是功能性的:)：

```
"Gia Joe Black Viper"
"Street Fighter...Ken"
"Mortal Kombat, Scorpion"
"Gia Joe Desert Fox"
"Mortal Kombat, Sub Zero"
"Street Fighter...Ryu" 
```

我想在字符串中找到匹配项......所以为了简化任务是：在另一个字符串中找到一个字符串子字符串并将这些子字符串收集到一个 HashSet 中......

所以基本上结果标签是：

```
Gi Joe 
Mortal Kombat 
Street Fighter 
```

我写了一个简单的代码来测试算法，但我想最小化这个任务的时间复杂度，空间复杂度没有时间那么重要......（你可以认为像 10.000 行这样的提要，所以它是基本的时间复杂度低）你可以在我的代码下面找到并阅读：

```
 String[] stringArray = new String[6];
        stringArray[0] = "Mortal Kombat - Scorpion";
        stringArray[1] = "Street Fighter - Ken";
        stringArray[2] = "Mortal Kombat - Scorpion";
        stringArray[3] = "Gi Joe - Desert Fox";
        stringArray[4] = "Gi Joe - Desert Dog";
        stringArray[5] = "Street Fighter - Ryu";

        HashSet<String> commonStrings = new HashSet();

        for (int i = 0; i < stringArray.length; i++) {
            String[] splittedString = stringArray[i].split("[ ]");
            System.out.println("i"+i);
            for (int j = 0; j < stringArray.length; j++) {
                System.out.println("j"+j);
                String matchable = "";
                for (int k = 0; k < splittedString.length; k++) {
                    System.out.println("k"+k);
                    if(k==0)matchable=matchable;
                    else {matchable = matchable + " " + splittedString[k];}
                    if(j!=i){
                        System.out.println("StringArray["+j+"]("+stringArray[j]+")index.of("+matchable+")"+"is"+matchable.indexOf(stringArray[j]));
                        if (stringArray[j].indexOf(matchable) > 0) {
                            commonStrings.add(matchable);
                        }
                    }
                }
            } 
```

任何建议都可以使我的代码更好，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:49:09.760

您的复杂性是二次的，使用这样的哈希图可以是 O(n)：

```
Map<String, Integer> cout = new HashMap<String, Integer>();

for (String line : StringArray) {
  for (String s : line.split("-")) {
     Integer currentCount = counts.get(s);
     if (currentCount == null)
       counts.put(s, 1);
     else
       counts.put(s, currentCount + 1);
  }
}
//Look in currentCount all keys with a value larger than 1. 
```

`else`这仍然可以通过改进语句来优化（但不会降低复杂性） ；）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:50:16.783

您可以拆分和排序单词，而不是遍历这样的排序列表。结果应该是一样的。当然，这只是整个单词检查的解决方案。您可以使用一些专用的数据结构来代替排序。

# javascript - 使用 confirm() 作为 if? 的条件

> ID：12073352
> 
> 赞同：11
> 
> 时间：2012-08-22T12:38:30.900
> 
> 标签：javascript

我有这个功能：

```
function RemoveProduct() {
    if (confirm("Poista?") == return true) {
        return true;
    } else {
        return false;
    }
} 
```

当您单击页面上的“删除”按钮时，它应该询问是否应该删除产品，如果答案是肯定的，它将删除它。

但据我所知，我不能在 if 语句条件上使用另一个括号？这应该怎么做？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-22T12:48:13.380

当您将返回值与`true`您不应该使用的比较时`return true`，只需`true`：

```
function RemoveProduct() {
  if (confirm("Poista?") == true) {
    return true;
  } else {
    return false;
  }
} 
```

您甚至不需要进行比较，因为结果`confirm`是一个布尔值：

```
function RemoveProduct() {
  if (confirm("Poista?")) {
    return true;
  } else {
    return false;
  }
} 
```

而且您甚至不需要该`if`语句，您只需从以下位置返回结果`confirm`：

```
function RemoveProduct() {
  return confirm("Poista?");
} 
```

请记住`return`在事件中使用该功能时使用。例子：

```
<input type="submit" onclick="return RemoveProduct();" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T12:40:04.673

> 但据我所知，我不能在 if 语句条件上使用另一个括号？

没有什么可以阻止您在 if 条件下执行函数。也就是说，为了清晰和可读性，我总是在 if 之前解决我的条件的所有论点。

这是您的代码大大简化。

```
var confirmed = confirm('whatever');
return confirmed; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T12:40:56.553

`confirm()`返回一个布尔值，您可以返回它。像这样：

```
function RemoveProduct() {
    return confirm("Poista?");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T12:40:10.473

只需使用

```
<a onclick="return confirm('ARe sure want to remove');">remove</a> 
```

# .net - 发布网站：找不到资源错误

> ID：12073354
> 
> 赞同：0
> 
> 时间：2012-08-22T12:38:42.123
> 
> 标签：.net, asp.net-mvc-3, iis, error-handling, publishing

大家好，当我通过 ISS 发布我的网站时，我收到此错误，如下所示

```
Server Error in '/WebCity' Application.
--------------------------------------------------------------------------------

The resource cannot be found. 
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

Requested URL: /WebCity/Views/Home/Index.cshtml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:49:38.297

This bit:`Requested URL: /WebCity/Views/Home/Index.cshtml`表示它正在寻找不应该的特定 URL。

即看起来你已经导航到`http://domain.com/WebCity/Views/Home/Index.cshtml`而不是只是`http://domain.com/WebCity/`或任何它应该是。

您在浏览器中输入了错误的 URL，或者服务器上未安装 MVC 框架。

如果没有安装框架，请不要担心。请参阅此处了解 Phil Haack 的说明`bin deploy`：[http ://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)

# java - 强制 Java 在 Web 浏览器中打开 XML

> ID：12073356
> 
> 赞同：2
> 
> 时间：2012-08-22T12:38:42.957
> 
> 标签：java, xml, browser

我有一个程序（GUI = JavaFX），它扫描我的文件系统以查找特定的 XML 报告文件并将它们列出在一个表中。这些 XML 报告由 XSLT 在 Web 浏览器中呈现。现在我希望能够在我的 Java 应用程序中单击这样的报告并将其显示在浏览器中。我已经编写了处理程序并确定了正确的 URL。在我的 Windows 系统上，这是

```
file://localhost/C:/report.xml 
```

XML 不是问题。如果我在浏览器中手动打开它，一切正常。但是，如果我使用 Google 并询问如何在浏览器中打开文件，它总是会给我这个：

```
java.awt.Desktop.getDesktop().
    browse(new java.net.URI("file://localhost/C:/report.xml")); 
```

由于这是一个很好的 http URL（网站）解决方案，它总是在我的默认文本编辑器（例如 Notepad++）中打开我的 XML 文件。所以桌面的浏览方法并没有真正强制浏览，而只是退回到默认的打开操作。

所以问题是：如何强制 Java 在浏览器中打开 XML，类似于 Windows 函数“使用 > 打开”？

这里是一个 sscce（它应该尝试在浏览器中访问该文件，即使它不存在）：

```
public class XMLOpener {
  public static void main(String[] args) 
  {
    String fileURL = "file://localhost/C:/report.xml";
    try {
      java.awt.Desktop.getDesktop().browse(new java.net.URI(fileURL));
    } catch (Exception e) {}
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:55:51.343

如果浏览器无法处理 URI，则[浏览](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)器启动“为处理指定类型的 URI 而注册的应用程序被调用”。

检查您喜欢的浏览器是否存在（Chrome、Fx、O、IE 等）或通过其他方法获取，然后[执行自定义命令](https://stackoverflow.com/a/390785/1615483)。如果您知道您正在运行的操作系统（Windows），那么您只需要考虑 exec 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:24:07.200

awt Desktop.browse 方法的 JavaFX 替代品将是[HostServices.showDocument](http://docs.oracle.com/javafx/2/api/javafx/application/HostServices.html#showDocument%28java.lang.String%29)。您可以尝试一下，但它可能具有与 Desktop.browse 相同的效果。

另一种选择是加载 XML 并在 Java 中[执行 XSL 转换，然后使用](http://www.roseindia.net/xml/XMLwithXSLT.shtml)[webview.getEngine.loadContent(contentString, contentType)](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#loadContent%28java.lang.String,%20java.lang.String%29)在 JavaFX WebView 中显示结果文档，或者仅在 Label 或自定义 JavaFX 控件中显示结果文档。请注意，从 JavaFX 2.2 开始，JavaFX WebView 还没有用于漂亮打印 xml 内容类型的查看器，因此要在 webview 中获得漂亮打印的 xml，您可能需要使用 javascript/ 将 xml 解析并格式化为 html 文档css/html，类似于本文中演示的在[WebView 中显示格式化的 java 源代码的](https://gist.github.com/1463485)方法。

对我来说，虽然它需要更多的开发工作，但这种使用 JavaFX 处理显示的替代方法很好，因为结果文档的显示可以在 JavaFX 应用程序本身中封装和控制，并且您无需依赖任何浏览器和配置可能会或可能不会安装在主机环境中。

# c# - 十进制翻倍

> ID：12073357
> 
> 赞同：0
> 
> 时间：2012-08-22T12:38:48.323
> 
> 标签：c#, visual-studio-2010, double, decimal

我有这样的东西......

```
foreach (var pupilAvg in pupilsAvgs) {
    Report_TeachersPosition teacher = new Report_TeachersPosition();
    teacher.ORG_ID = pupilAvg.ORG_ID;
    teacher.Yearcode = pupilAvg.YearCode;
    teacher.Teacher_K5 = pupilAvg.PupilsAvg_K5 / ratio.ClassKto5;
    teacher.Teacher_6to8 = pupilAvg.PupilsAvg_6to8 / ratio.Class6to8;
    teacher.Teacher_9to12 = pupilAvg.PupilsAvg_9to12 / ratio.Class9to12;
    teacher.Teacher_EPSFTE = teacher.Teacher_K5 + teacher.Teacher_6to8 
                             + teacher.Teacher_9to12;
    teacher.Teacher_Adjusted_EPSSalary = teacher.Teacher_SAUEPSMatrix
                                         * teacher.Teacher_Ratio;
    teacher.Teacher_ElementarySalary = teacher.Teacher_Adjusted_EPSSalary 
                                       * entities.Report_Attending_Pupils_Avg.ToList()
                                       .Where(x => x.ORG_ID == pupilAvg.ORG_ID 
                                       && x.YearCode.Equals("" + yearCode))
                                       .FirstOrDefault().PupilsAvg_K8_Percentage;
    teacher.Teacher_SecondarySalary = teacher.Teacher_Adjusted_EPSSalary 
                                      * entities.Report_Attending_Pupils_Avg.ToList()
                                      .Where(x => x.ORG_ID == pupilAvg.ORG_ID 
                                      && x.YearCode.Equals("" + yearCode))
                                      .FirstOrDefault().PupilsAvg_9to12_Percentage;
} 
```

但这`class`是...

```
public partial class Report_TeachersPosition {
        public int ORG_ID { get; set; }
        public Nullable<int> Yearcode { get; set; }
        public Nullable<decimal> Teacher_K5 { get; set; }
        public Nullable<decimal> Teacher_6to8 { get; set; }
        public Nullable<decimal> Teacher_K8 { get; set; }
        public Nullable<decimal> Teacher_9to12 { get; set; }
        public Nullable<decimal> Teacher_EPSFTE { get; set; }
        public Nullable<decimal> Teacher_ActualFTE { get; set; }
        public Nullable<decimal> Teacher_Ratio { get; set; }
        public Nullable<decimal> Teacher_TotalSalary { get; set; }
        public Nullable<decimal> Teacher_ElementarySalary { get; set; }
        public Nullable<decimal> Teacher_SecondarySalary { get; set; }
        public Nullable<decimal> Teacher_SAUEPSMatrix { get; set; }
        public Nullable<decimal> Teacher_Adjusted_EPSSalary { get; set; }
} 
```

问题是......在 中`class Report_TeachersPosition`，我拥有`decimal`来自 的所有值`database`。我希望他们在`double`。所以我把它改成`double`并保存。但是当我再次打开它时，它又回到了`decimal`..我不知道为什么..有人可以帮忙吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:47:29.153

如果您的数据库将值存储为，`decimal`那么每次您从数据库中获取它们时，它们总是会以`decimal`.

更重要的问题是*为什么*你想要这些值`double`？如果是出于显示目的，那么我建议您使用适当的格式。请记住，当您从 转换为 时，您将失去`decimal`准确性`double`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:45:11.443

公共部分类 Report_TeachersPosition 是数据库生成的类吗？（我想是的）。您必须更改数据库表列的类型，然后重新生成模型类

# database-design - 查找表示相关身份的列集

> ID：12073359
> 
> 赞同：1
> 
> 时间：2012-08-22T12:38:53.133
> 
> 标签：database-design, identity, relational-algebra

让我们称*身份*集为关系中的此类属性子集，它们表示该关系中行的身份，同时，当从该身份集中排除任何属性时，生成的属性集将不是身份集，即在我们的主题领域中，不能同时存在两行具有属于特定身份集的所有属性的匹配值，但是如果它们具有至少一个属性的不同值，则它们可以存在。

例如，假设与属性 A、B、C、D 和身份集 {A，B} 的关系

```
A       B       C       D
--------------------------
1       2       3       4
1       3       2       4
2       2       4       6
1       3       4       6 
```

在这种关系中，第二行和第四行在身份集 {A,B} 中具有相同的值 (1,3)，因此它们是互斥的，并且这种关系在我们的主题区域中是不允许的。

是否存在一些形式化的技术来查找任意关系中的所有“身份集”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:59:43.817

根据我之前的评论，要做的是在“查找所有候选键”上进行谷歌搜索。

这是找到的一篇文章。

[http://csc.lsu.edu/~jianhua/fd_slide2_09.pdf](http://csc.lsu.edu/~jianhua/fd_slide2_09.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:07:09.317

多亏了 Walter Mitty ，我发现我的*“身份集”*实际上称为*候选键。*现在我可以用谷歌搜索我的问题了。

# python - 配置数据库的问题

> ID：12073363
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:38:59.183
> 
> 标签：python, mysql, django

当我编辑`backends/settings.py`文件以配置数据库时

```
> DATABASES = {
>     'default': {
>         'ENGINE': 'django.db.backends.mysql', 
```

它给出了以下错误

```
raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named MySQLdb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:40:16.440

需要单独安装[MySQLdb 模块](https://docs.djangoproject.com/en/stable/ref/databases/#mysqldb)；它不附带 Django 发行版本身。

与 Django 一样，它[在 PyPI 上可用](https://pypi.python.org/pypi/MySQL-python)`easy_install MySQL-python`，因此您可以使用或安装它`pip install MySQL-python`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:07:00.527

Neeraj 我无法对上述答案发表评论，所以我在这里写

正如马丁所说

使用安装 mysql-python `easy_install MySQL-python`

使用 python manage.py runserver 手动重启服务器

# javascript - 动态 OnClick 按钮事件

> ID：12073365
> 
> 赞同：0
> 
> 时间：2012-08-22T12:39:14.253
> 
> 标签：javascript, onclick, dynamic-data

我有一个动态创建的表，我想在每一行中放置一个带有 onclick 事件的 EDIT / DELETE 按钮。

但是，我不知道如何使用行的 id 使它们唯一，然后为每个创建一个 onclick 事件，以便我可以更新/删除行中的值。

我试过了：

```
<INPUT TYPE='BUTTON' NAME='EDIT_PRODUCT_FROM_SEARCH' ID=".$row['alpha_p_ID']." VALUE='Delete'> 
```

但我不知道如何讲述这个事件：

```
$('what to write here?').click(function() {

}); 
```

编辑：

按钮的创建有效，但 onclick 事件无效。下面的代码：

PHP按钮代码

```
results_table = "<table cellspacing='0' style='border: 1px solid #405D99'><tr bgcolor='#405D99' style='color: white'><th>Main Image</th><th>Gallery Image 1</th><th>Gallery Image 2</th><th>Name</th><th>Type</th><th>Manufacturer</th><th>Quantity</th><th>Price-Wholesale</th><th>Price-Retail</th><th>Options</th></tr>";
while($row = mysql_fetch_array($results)){
$results_table .= "<tr>";
$results_table .= "<td bgcolor='#dfe3ee'><a href='products/".$row['alpha_p_imglink_main']."' rel='lightbox'><img src='products/".$row['alpha_p_imglink_main']."' width='150px' height='150px'; border='0'/></a></td>";
$results_table .= "<td bgcolor='#dfe3ee'><a href='products/".$row['alpha_p_imglink_gal1']."' rel='lightbox'><img src='products/".$row['alpha_p_imglink_gal1']."' width='150px' height='150px'; border='0'/></a></td>";
$results_table .= "<td bgcolor='#dfe3ee'><a href='products/".$row['alpha_p_imglink_gal2']."' rel='lightbox'><img src='products/".$row['alpha_p_imglink_gal2']."' width='150px' height='150px'; border='0'/></a></td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_name_en]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_type]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_firm_owner]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_quantity]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_price_wholesale]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_price_retail]</td>";
$results_table .= "<td colspan='1' rowspan='1' bgcolor='#f7f7f7' align='center'>";
$results_table .= "<a href='#' NAME='EDIT_PRODUCT_FROM_SEARCH' ID=".$row['alpha_p_ID']." CLASS='EDIT_BUTTON_CLASS'>Edit</a>";
$results_table .= "<a href='#' NAME='DEL_PRODUCT_FROM_SEARCH' ID=".$row['alpha_p_ID']." CLASS='DELETE_BUTTON_CLASS'>Delete</a>";
$results_table .= "</tr>";
}
echo "Query: " . $query . "<br />";
$results_table .="</table>";
echo $results_table; 
```

点击：

```
 $('.EDIT_BUTTON_CLASS').on("click", function(event) {
                    var e_id = $(this).attr('id');
                    var p_edit_id = $('input[name=P_NAME_EDIT]');
                    (p_edit_id).val(e_id);
                    alert("aaa");
                    }); 
```

onclick 事件应使用 id 填充文本框并发布警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:45:49.573

一个想法是改变

```
<INPUT TYPE='BUTTON' NAME='EDIT_PRODUCT_FROM_SEARCH' ID="'.$row['alpha_p_ID'].'" VALUE='Delete'> 
```

至

```
echo '<INPUT TYPE="BUTTON" NAME="EDIT_PRODUCT_FROM_SEARCH" ID=".$row['alpha_p_ID']." 
onclick="your_js_delete_function('.$row['alpha_p_ID'].');" VALUE="Delete">' 
```

然后在 JS

```
function yourj_s_delete_function(id) {
  //do something
  // you could also id = $(this).attr('id');
} 
```

您还可以分配一个班级，以便您的

```
$('what to write here?').click(function() {

}); 
```

变成

```
$('.delete_button').click(function() {
   var id = $(this).attr('id');
   .... rest of the code
}); 
```

注意：如果您`$row['alpha_p_id']`返回一个数值，最好添加一个字符串值作为前缀，因为只有数字 ID 会导致标记验证失败

所以你会改变`ID="'.$row['alpha_p_ID'].'"`为`ID="btn_'.$row['alpha_p_ID'].'"`

你需要改变

```
var id_str = $(this).attr('id');
var id=id_str.split("_", 1); 
```

**更新**

正如您提到的，这些按钮是动态创建的 - 您需要使用`on()`方法而不是 `click -

```
$('.delete_button').on("click", function(event){
    alert("I am clicked!");
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:42:55.157

您可以将事件绑定到 all `input[type="button"]`，然后从另一个属性获取 ID 值。例如：

```
$('input[type="button"]').click(function() {
    $id = $(this).id;
    $action = $(this).val();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:46:31.200

```
$("#<?php print $row['alpha_p_ID'] ?>").click(function() {

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:44:49.390

您可以使用 jQuery 的 attr() 方法来访问生成事件的元素的 ID。

```
<input class='mybutton' type='button' name='edit_product_from_search' id=".$row['alpha_p_id']." value='delete'> 
```

在 jQuery 代码中：

```
$('.mybutton').click(function() {
    id = $(this).attr('id');
}); 
```

jQuery 中的 $(this) 指的是生成事件的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:45:08.747

如果你给输入一个类，你可以使用选择器

```
var buttons = $('.classname'); 
```

使用这一系列按钮，您应该能够：

```
$.each(buttons, function(){
    $(this).click(function(){
         // Click event here
    }
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-22T12:48:35.913

或将属性**class="delete"**添加到按钮

```
<INPUT TYPE='BUTTON' NAME='EDIT_PRODUCT_FROM_SEARCH' ID=".$row['alpha_p_ID']." class="delete" VALUE='Delete'> 
```

接着

```
$('.delete').click(function(){
  id = $(this).attr('ID');

  // delete code goes here...

}); 
```

# asp.net-mvc - 在 ASP.NET MVC 4 MemberShip-Provider 中使用 Ninject-Injection 发生错误

> ID：12073370
> 
> 赞同：0
> 
> 时间：2012-08-22T12:39:37.083
> 
> 标签：asp.net-mvc, dependency-injection, ninject, membership-provider

我有一个在 MVC 4 Web 应用程序中使用的自我实现的 MembershipProvider。在提供商中，我想使用服务来访问相关数据。服务实例应该由 Ninject 使用属性注入来注入。但是注射有问题。从 AccountController 调用了正确的成员资格提供程序，但实例变量为空。

成员资格提供程序是由 asp.net 生命周期创建的，是否存在问题？

# ruby-on-rails - rails rails3-jquery-autocomplete gem 呈现页面而不是显示自动完成

> ID：12073376
> 
> 赞同：0
> 
> 时间：2012-08-22T12:39:54.323
> 
> 标签：ruby-on-rails, autocomplete, render

我有一个控制器`Posts`，我尝试自动完成帖子类型，并在控制器的第一行下添加了这段代码

```
autocomplete :post, :post_type 
```

然后在路由文件夹中

```
 resources :posts do
    get :find_user_post_type, :on => :collection
  end

  resources :posts, :except => [:new, :create, :index] 
```

并且在视图中

```
<%= f.autocomplete_field :post_type, find_user_post_type_posts_path %> 
```

但是当我在该字段中输入内容时，它只会呈现整个页面，而不是显示自动完成的匹配项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:50:29.780

你是否正确安装了gem的JS，取决于它是Rails 3.0还是3.1？

根据 gem 的文档，您需要根据`autocomplete :post, :post_type`控制器中定义的设置操作名称，如下所示：

```
# routes.rb
resources :posts, :except => [:new, :create, :index] do
    get :autocomplete_post_type, :on => :collection
end 
```

# ruby-on-rails - rails in (?) sql - 删除自动排序

> ID：12073387
> 
> 赞同：1
> 
> 时间：2012-08-22T12:40:43.360
> 
> 标签：ruby-on-rails

我有以下代码：

```
@selected_authors = Author.find(:all, :conditions => ["AUT_OID in (?)",@selected_authors_array ]) 
```

@selected_authors_array 是作者 ID 的数组，例如：55 75 74

请注意，数组中的 id 不是按特定顺序排列的

当我做

```
<%@selected_authors.each do |author| %>
<%=author.AUT_OID  %> -- <%=author.AUT_NAME  %>
<% end %> 
```

它显示 55、74、75（它将 id 的顺序更改为升序）

我想保持@selected_author 中条目的顺序，因为它在数组'@selected_authors_array' 中。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:52:28.370

这是底层数据库的问题。

如果您对 AUT_OID 列进行搜索/比较，它将自动使用此索引（如果可用）或主要索引来遍历所有条目。如果比较返回“true”，则数据库只会将当前行弹出到结果列表中。因此，如果您在 AUT_OID 上有一个索引/主索引并对其进行搜索，您将获得一个 AUT_OID 有序列表。

如果您确实需要相同的 ID 顺序，我认为您需要手动使用它。

提示：在 mySQL 上，您可以使用 EXPLAIN 语法查看数据库使用的索引（以及顺序）：

```
EXPLAIN <select-statement> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:24:36.830

这是 sql 服务器的行为。

它从第一条记录开始搜索记录。哪个记录首先出现，这将添加到输出中。

```
1\. So in your database table records are in this order 55 74 75
2\. And your using IN, IN will check value is there or not. 
```

您可以手动安排。

# ajax - ajax 调用不是从内部进行的

> ID：12073388
> 
> 赞同：1
> 
> 时间：2012-08-22T12:40:53.473
> 
> 标签：ajax, jsf, datagrid, primefaces

**我也阅读了 BalusC 的帖子（[此处](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)），但仍然无法从 dataGrid 进行 ajax 调用。是dataGrid不支持ajax调用吗？或者我错过了什么？**

尝试了所有方法，该方法在 dataGrid 之外被击中，所以我假设与 dataGrid 有什么关系..？首先我的页面被包含在一个模板中，我删除了它，仍然没有运气。

**我的jsf：**

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Order select</title>
    </h:head>

    <h:body>

                    <p:layout style="min-width:400px;min-height:400px;" id="layout">  

                        <p:layoutUnit id="rightLayout" position="east" size="100" minSize="200" maxSize="200">  
                            right
                        </p:layoutUnit>  

                        <p:layoutUnit position="center" >  

                            <h:form id="imgForm" style="text-align: center">

                                <p:dataGrid var="img" 
                                            value="#{orderBean.userMedia.mediaList}" 
                                            columns="4"  
                                            rows="16" 
                                            paginator="true"  
                                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"  
                                            rowsPerPageTemplate="9,12,15">  

                                    <p:panel>
                                        <p:commandLink actionListener="#{orderBean.selectImage}" update="@form">
                                            <p:graphicImage value="#{img.thumbNail.getString('url')}"/>
                                        </p:commandLink>
                                    </p:panel>

                                </p:dataGrid> 

                            </h:form>  

                        </p:layoutUnit>  
                    </p:layout>  

    </h:body>
</html> 
```

**我的托管 bean(viewScoped) 方法：**

```
public void selectImage()
    {
        String methodName = "selectImage()";
        log.info("Entering :"+methodName);
    } 
```

**我正在使用：** primefaces：3.3.1（tomcat 7 + Java 1.6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:12:36.620

如 primefaces 文档中所述，您必须将所有内容`p:datagrid`放入`p:column`

```
<p:dataGrid var="img" 
            value="#{orderBean.userMedia.mediaList}" 
            columns="4"  
            rows="16" 
            paginator="true"  
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"  
            rowsPerPageTemplate="9,12,15">  
     <p:column>
         <p:panel>
             <p:commandLink actionListener="#{orderBean.selectImage}" update="@form">
                 <p:graphicImage value="#{img.thumbNail.getString('url')}"/>
              </p:commandLink>
         </p:panel>
    </p:column>
</p:dataGrid> 
```

从 primefaces 3.4 版开始，这不是必需的，但您使用的是 3.3.1 版

# excel - Excel中具有多个条件的SumIf公式

> ID：12073398
> 
> 赞同：2
> 
> 时间：2012-08-22T12:41:26.420
> 
> 标签：excel, formula, sumifs

对于看似基本的 Excel 问题，我深表歉意 - 我已经尝试过 Google，但找不到任何关于此的内容！

我想要做的就是根据之前的相应列是否符合某些标准来计算一列的总和。

例如，如果我有：

```
 Column A   Column B
    YY            20
    ZZ            4
    TT            8
    UU            15 
```

在一个单独的单元格中，我想总结 B 列，其中 A 列是 YY AND TT

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T12:48:48.743

```
 =SUM(SUMIF(A:A,{"YY","TT"},B:B)) 
```

# php - 无法插入 INTO 表

> ID：12073401
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:41:51.303
> 
> 标签：php, mysql

> **使用未定义的常量 ugDept - 假定为“ugDept”**

当我尝试执行下面的代码时出现此错误

```
$_10thPercentage=number_format($_POST['tenthPercentage'], 2, '.', ' ');
$query="
INSERT INTO academic 
    VALUES (
        '".$_SESSION['roll']."', 
        '".$_POST[tenthMedium]."',
        ".$_10thPercentage.",
        '".$_POST[twelthStudiedStatus]."',
        ".$_10thPercentage.",
        '".$_POST[techStudiedStatus]."',
        '".$_POST[techDept]."',
        '".$_POST[techPercentage]."',
        '".$_POST[appStudiedStatus]."',
        '".$_POST[appDept]."',
        '".$_POST[appPercentage]."',
        '".$_POST[ugStudiedStatus]."',
        '".$_POST[ugDept]."',
        '".$_POST[ugCgpa]."',
        '".$_POST[pgStudiedStatus]."',
        '".$_POST[pgDept]."',
        '".$_POST[pgCgpa]."')";

mysql_query($query); 
```

只有特定的值会传递给帖子。所以代码不起作用建议一些方法来解决它

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T12:43:47.897

您可能需要更改所有 $_POST 变量以使用引号（如果您不使用常量）。像这样：

```
$_POST['ugDept'] 
```

否则，PHP 会查找名为**ugDept**的常量值，该值可能不存在。如果您使用常量，请确保您已正确定义它。你可以这样做：

```
define('ugDept', 'someValueHere'); 
```

此外，正如其他人所建议的那样，**您需要清理您的输入**，并且**您应该使用[Mysqli 扩展](http://www.php.net/manual/en/book.mysqli.php)，而不是`mysql_*`**. 就像现在一样，您的数据库存在 SQL 注入的风险，这很糟糕。

**更新：**要确保您的`mysql_query`通话是否成功，请执行以下操作：

```
$result = mysql_query('{YOUR QUERY HERE}');
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

这将向您报告 SQL 错误。请注意，`die`在生产环境中，ing 不一定是最好的选择。但在开发中，它可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:45:39.183

还要考虑清理您的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:45:37.513

$_10thPercentage 不是从 post 数组中获取的，应该是吗？表的创建语句也会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:43:43.917

这意味着您的 constact`ugDept`未定义。只需像您必须完成的那样定义它，例如`tenthMedium`

# .net - 安装 VS2012（包括 MVC4）会破坏现有的 ASP.NET MVC 3 应用程序

> ID：12073414
> 
> 赞同：15
> 
> 时间：2012-08-22T12:42:46.630
> 
> 标签：.net, asp.net-mvc-3, visual-studio

在安装 VS2012 和特此 MVC 4 后，我有一个 MVC3 应用程序现在失败并出现以下运行时错误：

> 找不到方法：'System.Collections.Generic.Dictionary`2 System.Web.Razor.Parser.CSharpCodeParser.get_RazorKeywords()'。

如果我在 VS2010 中创建一个新的 ASP.NET MVC 3 项目，它可以与剃须刀视图一起使用。有没有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-22T18:28:54.283

@Levi 它位于项目根目录的 Web.config 中。

在我的 web.config 中，我注意到我现在已经注释掉的这个块，现在这个错误不再发生了：

```
<dependentAssembly> 
    <assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35"   
                      culture="neutral" /> 
    <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" /> 
</dependentAssembly> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T07:11:09.733

这是记录在案的行为。VS2012 安装 MVC4。[请阅读链接http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815)中的“安装 ASP.NET MVC 4 破坏 ASP.NET MVC 3 RTM 应用程序”部分

错误的具体原因是 ASP.NET MVC 3 中的项目模板没有指定使用哪个版本的 Razor，因此默认情况下它会选择最新版本的 Razor，即使 MVC 3 仅与 Razor v1 兼容。

*   MVC 3 仅与 Razor v1 兼容
*   MVC 4 仅与 Razor v2 兼容

因此，如 MVC4 发行说明中所述，修复方法是将 MVC 3 应用程序的 web.config 文件更改为使用 Razor v1。

所有新项目模板（包括 MVC3）都将正确设置此设置。只有较旧的应用程序没有此设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-02T08:20:39.650

一般来说，VS2010 之后不支持 Mvc3，我使用 VS2010SP1 顺便说一句。你可以让它工作，但它最终会咬你。所以我建议选择匹配的 VS 和 MVC 版本（检查官方微软网站的匹配）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T13:21:42.387

我正在使用Visual Studio 2015 中的**MVC 3处理一个旧项目。**

出于某种原因，安装了**Razor v2**并且我遇到了 OP 描述的错误：

> 找不到方法：'System.Collections.Generic.Dictionary`2 System.Web.Razor.Parser.CSharpCodeParser.get_RazorKeywords()'。

起初，我尝试了[OP 的答案](https://stackoverflow.com/a/12079223/771496)，并在我的`Web.Config`. 但它产生了这个错误：

> 无法加载文件或程序集“System.Web.WebPages.Razor，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。

然后，我在这篇文章中看到了另一个关于MVC 3 和 Razor v2 之间*可能不兼容的*[答案。](https://stackoverflow.com/a/12596405/771496)我只是在*包管理器控制台*中使用以下命令更新了*ASP.NET MVC*：

 ***```
Update-Package Microsoft.AspNet.Mvc 
```

...一切又开始工作了！***

# user-interface - wxpython boxsizer:problems with dynamically adding items

> ID：12073415
> 
> 赞同：1
> 
> 时间：2012-08-22T12:42:47.677
> 
> 标签：user-interface, wxpython, boxsizer

This is driving me nuts. I usually use Tkinter for gui stuff, but just felt like actually trying to learn wxpython.

I can't for the life of me figure out why when I add items like buttons or static text to a panel, using a boxsizer. It just seems to cram everything into position (0,0) on the panel called "side" heres my code.

```
 import wx

    def AddUser():
        ex = wx.App()
        Stylex = wx.SYSTEM_MENU|wx.CAPTION|wx.CLOSE_BOX
        window = wx.Frame(None, style=Stylex)

        splitter = wx.SplitterWindow(window, -1)
        vbox = wx.BoxSizer(wx.VERTICAL)
        """
        LEFT PANEL... Contains Navigation Tree
        """
        fgs = wx.FlexGridSizer(2,1,5,10) # fgs(int rows, int cols, int vgap, int hgap

        panel = wx.Panel(splitter, -1)
        panel.SetBackgroundColour('#ededed')

        side = wx.Panel(splitter, -1)
        side.SetBackgroundColour('#4f5049')

        multi_btn = wx.Button(panel, label="Batch User Mode")
        multi_btn.SetId(50)

        single_btn = wx.Button(panel, label="Single User Mode")
        single_btn.SetId(25)

        items = [multi_btn,single_btn]

        fgs.AddMany(items)
        vbox.Add(fgs)

        panel.SetSizer(vbox)
        splitter.SplitVertically(panel, side,100)

        """
        SIDE panel...  Contains all widgets
        """
        st = wx.StaticText(side, label="Select a Mode", pos=wx.Point(20,100))
        st.SetForegroundColour(wx.WHITE)

        def SetMode(event):
            """
            25 returned if Single user mode
            50 returned if Batch user mode
            """
            MODE = event.GetId()

            if MODE == 25:
                try:
                    side.DestroyChildren()
                except: pass

                """
                Problem adding items to the dynamnic changing 'SIDE' panel
                """
                vb = wx.BoxSizer(wx.VERTICAL)

                stFName = wx.StaticText(side, id=2,label="First Name:")
                stFName.SetForegroundColour(wx.WHITE)
                vb.Add(stFName)
                tcFName = wx.TextCtrl(side, id=4)
                vb.Add(tcFName)

                stLName = wx.StaticText(side,id=6, label="Last Name:")
                vb.Add(stLName)
                tcLName = wx.TextCtrl(side, id=8)
                vb.Add(tcLName)

                vb.Add(side, 1, flag=wx.EXPAND|wx.ALL, border=5)

                side.SetSizer(vb)

                """
                END Problem
                """
            if MODE == 50:
                try:
                    side.DestroyChildren()
                except: pass
                """
                do the same thing as single user creation, except adding listboxes instead of textctrl's
                """
            return

        multi_btn.Bind(wx.EVT_BUTTON, SetMode)
        single_btn.Bind(wx.EVT_BUTTON, SetMode)

        window.SetTitle('User Creation Process')
        window.Centre()
        window.Show(True)

        ex.MainLoop()

    if __name__=='__main__':
        AddUser() 
```

Thanks very much for any help... I'm sure its something small that I overlooked, but I would like to understand if its a fundamental problem.

Randy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:26:43.110

That's the default placement. Sizers are NOT for absolute positioning. If you want to, you can do that by passing a position in each widget. If you want your widgets centered on the left, then you'll need to but the vertical BoxSizer inside of a horizontal one and center it. Or you can use a couple of Spacers by using AddSpacer or by just adding a size:

```
mySizer.Add((10, 20), 0, wx.ALL, 5) 
```

You can also use the "border" parameter of the Sizer's Add method to control placement to some degree using wx.TOP, wx.BOTTOM, wx.RIGHT or wx.LEFT and giving it the appropriate amount of space. If you are seeing the widgets getting stacked, then you'll need to add a Layout call at the end (probably from the panel or the frame).

**UPDATE**: If you want to swap out panels, I would recommend just hiding and showing them or destroying and creating panels. I wrote up a tutorial on switching panels that might help: [http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/](http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/)

# c# - 将字符串转换为小数点后 2 位

> ID：12073416
> 
> 赞同：12
> 
> 时间：2012-08-22T12:42:49.090
> 
> 标签：c#

我有一个字符串（确认为十进制表达式）0.4351242134

我想转换成小数点后两位 0.44 的字符串

我应该在 C# 中怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T12:43:57.957

```
var probablyDecimalString = "0.4351242134";
decimal value;
if (Decimal.TryParse(probablyDecimalString , out value))
    Console.WriteLine ( value.ToString("0.##") );
else
    Console.WriteLine ("not a Decimal"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-22T12:49:41.830

```
var d = decimal.Parse("0.4351242134");
Console.WriteLine(decimal.Round(d, 2)); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-22T12:51:04.543

好吧，我会这样做：

```
var d = "0.4351242134";
Console.WriteLine(decimal.Parse(d).ToString("N2")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T12:46:58.407

```
float f = float.Parse("0.4351242134");
Console.WriteLine(string.Format("{0:0.00}", f)); 
```

有关string.Format，请参[见此内容。](http://www.csharp-examples.net/string-format-double/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-02-27T13:32:52.093

首先，您必须使用文化进行解析，否则您可能会丢失小数。接下来，您必须有一个文本结果才能具有固定的小数位数。最后，您四舍五入到小数点后两位，但`ToString()`可以为您做到这一点，因此：

```
string amount5 = "2.509"; // should be parsed as 2.51

decimal decimalValue = Decimal.Parse(amount5, System.Globalization.CultureInfo.InvariantCulture);
string textValue = decimalValue.ToString("0.00");

// 2.51 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T12:59:23.213

这有帮助吗

```
double ValBefore= 0.4351242134;
double ValAfter= Math.Round(ValBefore, 2, MidpointRounding.AwayFromZero); //Rounds"up" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-17T20:51:07.207

```
float myNumber = float.Parse("0.4351242134");
Console.WriteLine(string.Format("{0:f2}", myNumber )); 
```

[https://msdn.microsoft.com/en-us/library/s8s7t687.aspx](https://msdn.microsoft.com/en-us/library/s8s7t687.aspx)

# django - 如何混合查询集结果？

> ID：12073425
> 
> 赞同：16
> 
> 时间：2012-08-22T12:43:09.680
> 
> 标签：django

我有疑问：

```
items = MyModel.objects.all().order_by('nr')[:10] 
```

我得到了 10 个数量更高的项目。现在我必须混合这些结果。怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-08-25T15:11:52.287

奇怪的是，这个没有很好记录的功能有效：

```
Country.objects.order_by('?') 
```

来源：[http ://www.jpstacey.info/blog/2008/09/03/random-ordering-of-query-results-in-django](http://www.jpstacey.info/blog/2008/09/03/random-ordering-of-query-results-in-django)

> 令人惊讶[的是，现有文档](http://www.djangoproject.com/documentation/models/ordering/)几乎没有 Google 果汁，除非您搜索“随机”而不是“随机”。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-22T13:08:50.450

获取切片后，您无法重新排序查询，因此请使用不同的方法

```
import random
items = sorted(MyModel.objects.all().order_by('nr')[:10], key=lambda x: random.random()) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-22T13:10:12.500

好的，您无法在拉入查询集后对其重新排序，但您可以这样做

```
import random
items = list(MyModel.objects.all().order_by('nr')[:10])
random.shuffle(items) 
```

# jquery - 尝试在动态构建的下拉列表之前添加元素

> ID：12073430
> 
> 赞同：0
> 
> 时间：2012-08-22T12:43:34.393
> 
> 标签：jquery, json, drop-down-menu, dynamic-data

这是我的代码：

```
<script language="JavaScript" type="text/javascript">
            (function($) {
            $(document).ready(function(){
                    var path = "http://shop.vodafone.co.uk",
                        phoneList = $('#phoneList');
                    $.getJSON("phones.json", function(data){
                            var option = $('option').attr('value', data);
                            var phones = [];
                            for(var phone in data) {
                                //phones.push("<option value='"+data[phone].value+"'>"+data[phone].name+"</option>");
                                phones.push(data[phone]);
                            }

                            //console.log(phones);
                            phones.sort(function(a, b){
                                var aName = a.name.toLowerCase(),
                                    bName = b.name.toLowerCase();
                                if(aName < bName) {
                                    return -1;    
                                }
                                if(aName > bName){
                                    return 1;
                                };
                                return 0;
                            });
                            var select = $('<option value="Take your pick"></option>').val();
                            var htmlElements = [];
                            for(var i = 0; i<phones.length; i++) {
                                htmlElements.push("<option value='"+phones[i].value+"'>"+phones[i].name+"</option>");
                            }
                            //htmlElements.before(select);
                            $("#phoneList").before(select).html(htmlElements.join('\n'));
                            //val = $(this).find('option:selected').val(),

                    });
                    $('.phoneSelect').bind('change', function(){
                        var url = $("#phoneList option:selected").val();
                        window.location = path + url;
                    });
            });
            })(jQuery);
    </script> 
```

这是HTML：

```
<div>
 <form class="phoneSelect" action="#">
 <select style="width: 200px" name="phoneMake" id="phoneList">
    <option selected="selected" value="Take your pick">Take your pick</option>
 </select>
</form>
</div> 
```

问题是我试图在动态构建的下拉列表之前添加上述元素“选择”，并且所有元素都具有相同的表单元素。从 JSON 文件中检索下拉列表数据。

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:48:34.570

尝试在循环时附加数字：

```
for(var i=0; i<phones.length; i++){
    $("#phoneList").append($("<option value='"+phones[i].value+"'>"+phones[i].name+"</option>"));
} 
```

# blackberry - 黑莓应用程序未在黑莓应用商店注册时，能否使用 BIS（黑莓互联网服务）

> ID：12073431
> 
> 赞同：0
> 
> 时间：2012-08-22T12:43:35.003
> 
> 标签：blackberry

我开发了一个黑莓应用程序，它与 WIFI 配合使用。根据[文档](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879)，只有在应用商店获得批准后，应用才能访问 BIS。当黑莓设备不通过 Wi-Fi 连接，而是通过移动互联网连接时，是否有其他方法可以在黑莓设备上测试应用程序？

> BlackBerry Internet Service：应用程序也可以通过 BlackBerry Internet Service 建立连接。此连接路线可供第三方开发者使用，需经过申请审批流程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:04:16.783

我不知道你从哪里得到这个：

`an app gets access to BIS only if it is approved from their app store`

但事实并非如此。

应用程序只有在您申请并获得 RIM 批准后才能获得 BIS 访问权限。最简单的方法是申请[BlackBerry Push Services](https://developer.blackberry.com/services/push/)。通常需要几天时间。

您仍然可以在移动数据连接上测试您的应用，只是不能使用 BIS（这是建立连接的最可靠方式）。

# c# - 删除 int 数组中的重复项的程序

> ID：12073436
> 
> 赞同：8
> 
> 时间：2012-08-22T12:43:53.410
> 
> 标签：c#

我编写了一些代码来从整数数组中删除重复项。我不想使用任何内置的关键字/属性。

这是我的逻辑：

```
int[] iArray = {1,2,3,2,3,4,3};              
int t = 0;
int arraysize = iArray.Length;
for (int m = 0; m < arraysize; m++)
{
    if (iArray[m] != iArray[t])
    {
        t++;
        iArray[t] = iArray[m];
    }
}
arraysize = t + 1;
for (int m = 0; m < arraysize; m++)
{
    Console.WriteLine(iArray[m]);
} 
```

输出应该是：

> 1,2,3,4

它没有提供所需的输出。伙计们，这不是家常便饭。这是自学。没有 LINQ，请包含关键字。谢谢你的回复。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:51:16.627

由于这是作业，我不会修复您的代码，而是给您一些注释：

1.  您将无法使用单个循环且没有内置函数来做到这一点；你需要两个嵌套循环
2.  当发现重复值时，将数组项向前移动一位，并减小数组“活动区域”的大小；您需要另一个嵌套循环来进行移动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:56:34.100

这是一种使用两个嵌套 foreach 循环的方法：

```
var array = new int[] {1,2,3,2,3,4,3};  

var result = new List<int>();
foreach(var item in array)
{
    bool found = false;
    foreach(var resultItem in result)
    {
        if(resultItem == item) found = true;
    }

    if(!found)
    {
        result.Add(item);
    }
} 
```

如果您不想使用`List<int>`，则需要创建一个临时数组，其大小与第一个数组相同。然后，当它处理完毕后，您需要跟踪您真正找到了多少项目并将它们复制到一个新数组中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:51:08.573

问题是您只是将每个元素与前一个元素进行比较。由于这是一个自学练习，我只提供一个大纲，让你了解细节。

您需要两个嵌套循环：

*   第一个循环遍历每个元素。
*   第二个循环将当前元素与您迄今为止看到的所有其他元素进行比较。

请注意，这需要 O(n ² ) 时间。

* * *

您可以使用其他方法更快地做到这一点：

*   首先对输入进行排序：O(n log(n)) 时间
*   使用`HashSet`or `Enumerable.Distinct`: O(n) 时间。

但是后一种方法可能都被您不使用内置类/方法的要求所禁止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:54:48.297

实现您想要的算法的一种非常基本的形式：

```
 int[] iArray = {1,2,3,2,3,4,3};
        int[] newArray = new int[iArray.Length];          

        //initialize array with a marker
        for(int i = 0; i < newArray.length; i++){
          newArray = -1 //this shouldn't be a potential value in the original arr
        }

        bool contains = false;
        int curLength = 0;
        for (int m = 0; m < iArrayLength; m++)
        {
           contains = false;
           for(int k = 0; k < curLength; k++){
                 if(newArray[k] == iArray[m]){
                    contains = true;
                    break;
                 }
           }
           if(!contains) 
                 newArray[curLength++] = iArray[m];
        }
        for (int m = 0; m < curLength; m++)
        {
            Console.WriteLine(newArray[m]);
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:56:47.793

好的，你说你不想要任何内置的东西，所以让我们从头开始做所有事情。

有两种方法（我知道）可以做到这一点。一个复杂度为 O(n^2)，一个复杂度为 O(n + n*log(n))。第二个更快，但第一个更容易。

**较慢（但更容易）的解决方案：O(n^2)**

```
int[] iArray = {1,2,3,2,3,4,3};
List<int> unique = new List<int>(iArray.Length);

for(int i = 0; i<iArray.length; i++)
{
    bool found = false;
    for(int prev=0; prev<i; prev++)
    {
        if(iArray[prev] == iArray[i])
        {
            found = true;
            break;
        }
    }

    if(!found)
    {
        unique.Add(iArray[i]);
    }
}

iArray = unique.ToArray();

for(int i=0; i<iArray.Length; i++)
{
    Console.WriteLine(iArray[i]);
} 
```

**更快（但更复杂）的解决方案：O(n + n*log(n))**

```
int[] iArray = {1,2,3,2,3,4,3};
List<int> unique = new List<int>(iArray.Length);

// Sort the array here. Use your favorite algorithm. Sorting is so widely
// covered elsewhere that I will avoid typing it here. Complexity should 
// be O(n*log(n))

if( iArray.Length > 0)
{
    unique.Add(iArray[0]);
}

for(int i=1; i<iArray.length; i++)
{
    if(iArray[i] != iArray[i-1])
    {
        unique.Add(iArray[i]);
    }
}

iArray = unique.ToArray();

for(int i=0; i<iArray.Length; i++)
{
    Console.WriteLine(iArray[i]);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:58:08.240

只需填写 Dictionary 并使用 Keys 作为结果数组。

```
Dictionary<int, int> dict = new Dictionary<int, int>();
for(int i = 0; i < array.Length; i++) {
  dict[array[i]] = 0;
} 
```

dict.Keys - 结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T13:03:26.513

这是解决方案：

```
int[] iArray = { 1, 2, 3, 2, 3, 4, 3 };
int[] EachWords = { 1, 2, 3, 2, 3, 4, 3 };

for (int p = 0; p < EachWords.Length; p++)
{
    for (int j = 0; j < EachWords.Length; j++)
    {
        if (EachWords[p] == EachWords[j] && p != j)
        {
            List<int> tmp = new List<int>(EachWords);
            tmp.RemoveAt(j);
            EachWords = tmp.ToArray();
        }
    }
}

for (int j = 0; j < EachWords.Length; j++)
{
    Response.Write(EachWords[j].ToString() + "\n");
} 
```

现在，它将显示`1, 2, 3, 4`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-22T13:50:49.867

如果您先订购商品，然后与下一个比较，您将获得 nlogn 成本。

算法：

1.  顺序数组

2.  foreach elem if(has_next && next is equal) 删除元素；下一个

3.  打印数组

如果空间成本不是问题，您可以使用辅助哈希表结构。但我一直认为我的想法更简单。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-12T06:03:06.893

您还可以使用比 arrayList 更快的 Dictionary

```
 public Dictionary<string,int> removeDupUsingDictionary(int[] n)
    {

        Dictionary<string,int> numbers = new Dictionary<string,int>();

        for( int i = 0 ; i< n.Length; i ++)
        {
            try
            {
                numbers.Add("value" + n[i], n[i]);
            }
            catch (Exception e)
            {
                Console.WriteLine("Already the value" + n[i] + "present in the dictionary");
            }

        }

        return numbers;

    }

    static void Main(string[] args)
    {

        Program num = new Program();
        int[] n = { 6,5,1, 2, 3, 4, 5, 5, 6,6,6,6,6,6 };

        Dictionary<string, int> dictionary = new Dictionary<string, int>();

        int size = n.Length;

        ArrayList actual = num.removeDup(n);

        num.removeDupUsingDictionary(n);

    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-03T07:57:32.960

```
static void Main(string[] args)
        {
            int[] array = new int[] { 4, 8, 4, 1, 1, 4, 8 };            
            int numDups = 0, prevIndex = 0;

            for (int i = 0; i < array.Length; i++)
            {
                bool foundDup = false;
                for (int j = 0; j < i; j++)
                {
                    if (array[i] == array[j])
                    {
                        foundDup = true;
                        numDups++; // Increment means Count for Duplicate found in array.
                        break;
                    }                    
                }

                if (foundDup == false)
                {
                    array[prevIndex] = array[i];
                    prevIndex++;
                }
            }

            // Just Duplicate records replce by zero.
            for (int k = 1; k <= numDups; k++)
            {               
                array[array.Length - k] = '\0';             
            }

            Console.WriteLine("Console program for Remove duplicates from array.");
            Console.Read();
        } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-31T06:18:01.637

```
int[] iArray = { 1, 2, 3, 2, 3, 4, 3 };

        List<int> unique = new List<int>(iArray.Length);                      

        for (int i = 0; i < iArray.Length; i++)
        {
            int count=0;
            for (int j = i + 1; j < iArray.Length; j++)
            {
                if (iArray[i] == iArray[j])
                {
                    count++;
                }
            }
            if (count==0)
            {
                unique.Add(iArray[i]);
            }
        }

        iArray = unique.ToArray();

        for (int i = 0; i < iArray.Length; i++)
        {
            Console.WriteLine(iArray[i]);
        } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-31T06:23:15.303

您可以使用 .Distinct() 扩展方法，如下所示，

```
        int[] oldArray = { 1, 2, 3, 3, 4};
    int[] newArray = oldArray .Distinct().ToArray();

```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-31T07:18:36.340

你的答案是：

```
 int[] oldArray = {1, 2, 3, 2, 3, 4, 3 };
    int[] newArray = oldArray.Distinct().ToArray();

    String ans = "";
    for (int m = 0; m < newArray.Length; m++)
    {
        ans += newArray[m] +",";
    }
    Console.WriteLine(ans); 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-02-10T14:20:11.977

这个解决方案是在 javascript 中。

```
var myval = [1, 2,3, 4, 4, 5, 5, 6, 7];

var tempVal = [];
var l = myval.length;
for(var i=0; i<l; i++){
    if(tempVal.length === 0){
        tempVal.push(myval[i]);
    }
    else{
        var tempL = tempVal.length;
        var foundCount = 0;
        var lookedFor = myval[i];
        for(var t = 0; t<tempL; t++){
            if(tempVal[t] === lookedFor){
                foundCount++;
            }

        }
        if(foundCount === 0){
            tempVal.push(lookedFor);
        }
    }
} 
```

# javascript - 自定义 Facebook 提要 - 点赞按钮

> ID：12073437
> 
> 赞同：0
> 
> 时间：2012-08-22T12:43:56.123
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我已经编写了一个自定义的 facebook 提要，它最初使用 PHP SDK 来获取数据，然后循环通过提要并将其全部打印出来。工作正常，没有问题。

我现在需要为每个提要添加一个赞按钮，所以我完成了以下操作：

在 PHP Foreach 循环中：

```
$ids = explode('_', $value['id']);
$like_it = "https://www.facebook.com/". $ids[0] ."/posts/". $ids[1] ?>

...

<fb:like href="<?php echo $like_it; ?>" layout="button_count" 
    show_faces="true" width="160" height="40"
    action="like" colorscheme="light"></fb:like> 
```

我正在异步加载 JS SDK，并启用了正确的 App ID 和 XFBML

```
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=xxxxxxxxxxxxxxxx"; 
```

现在，like 按钮显示并确实链接到它们被分配到的新闻提要项目，尽管它们都没有发现实际上已经归因于提要项目的点赞数量。奇怪的是，有一个……我不能完全理解它。

我在这里做错了什么吗？

[这是有问题的页面](http://erebus.cashbackcard.com/blog)喜欢按钮尚未正确定位，因为我宁愿让它们先工作！

任何帮助，将不胜感激，

干杯，DB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:55:02.723

我发现这不再适用于 Facebook。还有其他 SO 答案详细介绍了该主题以及为什么这是不可能的。

# android - 从现有的 android 应用程序创建一个新的 android 应用程序

> ID：12073439
> 
> 赞同：1
> 
> 时间：2012-08-22T12:44:01.177
> 
> 标签：android, android-emulator

我是android开发的新手，但在iPhone开发方面有很好的经验。我有一个 android 应用程序的源代码，我想通过复制相同的代码并更改图像和 api 来制作另一个 android 应用程序。我也想用不同的包名在 android store 中介绍它。有人可以告诉我我需要遵循的步骤。我觉得我必须用新的包名创建一个新项目，但我将如何导入现有应用程序的所有资源？

问候
潘卡伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:56:04.143

与其创建一个新项目并复制所有内容，不如在现有项目中更改包名称会更容易（如果要保留现有项目，您可以制作副本）之后您必须主要更改包名称。

1.  您必须更改 AndroidManifest.xml 中的包名称，因为市场将使用该名称。还将版本重置为 1 并将版本代码重置为 1.0
2.  将所有代码移动到不同的包中。您可以使用 Eclipse IDE 重构功能来做到这一点。右键单击包资源管理器中的基本包，然后选择 Refactor | 改名。在对话框中，输入新的基础包名称并选中“重命名子包”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:05:06.153

确定 请按照下列步骤操作：

1）。创建新的 Android 项目（名称：MyProject）并定义包名称（如 pack.test.myproject）。

2）。现在只删除 src 文件夹新项目中的 .java 文件（不是包）。

3）。从新项目中删除 res 文件夹。

4）。删除新项目的 android.manifest 文件。

5）。现在将所有 .java 文件拖放到你想放入新项目的包名上。

6）。拖放旧项目的 res 文件夹和清单文件。

7）。现在更改 res drawable 文件夹中的图像并通过右键单击项目添加 api -> 转到属性 -> 转到构建路径，然后单击添加按钮。

并运行您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:51:45.723

复制源代码树，`(...)/myOldApp`->`(...)/myNewApp`

在副本上工作，您应该删除隐藏的项目设置文件（例如 Eclipse 中的 .project）并重命名资源，`(...)/myNewApp/com/pankaj/oldapp`例如`(...)/myNewApp/com/pankaj/newapp`

现在在您最喜欢的编辑器中按批次重命名所有出现的`oldapp`to 。`newapp`

现在创建一个新项目并选择使用现有位置作为您的工作区。将其指向您复制的位置，例如`(...)/myNewApp`。

# android - 寻找树列表视图库

> ID：12073442
> 
> 赞同：-2
> 
> 时间：2012-08-22T12:44:04.587
> 
> 标签：android

我想开发一个将信息显示为树视图的应用程序。每个叶子都应该包含一个按钮。

是否有提供树视图的android库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:50:30.683

您可以使用此来源[http://code.google.com/p/tree-view-list-android/](http://code.google.com/p/tree-view-list-android/)。我想很容易改变。

# c - 在 execvp() 之前将忽略的信号设置为 SIG_DFL

> ID：12073444
> 
> 赞同：0
> 
> 时间：2012-08-22T12:44:08.560
> 
> 标签：c, linux, signals, posix, execvp

我正在编写一个库，在其中我 fork() 和 execvp() 来启动另一个程序。据我了解， execvX() 将“自定义”信号处理程序重置为 SIG_DFL，但它没有将任何忽略的信号处理程序设置为 SIG_DFL。

请记住，它是一个库，我无法控制用户将如何处理信号，将忽略信号的信号处理程序设置为 SIG_DFL 是否是个好主意？

如果是，是否有某种方法可以一次将所有信号处理程序设置为 SIG_DFL？我是否必须遍历所有信号编号？在这种情况下，我怎样才能找到最后一个可能的信号编号？我在 bits/signum.h 中看到了 _NSIG。这是 POSIX 的不变部分还是特定于 Linux？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:01:43.220

根据[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)手册页，

> 任何被捕获的信号的配置都将重置为默认值 ( [signal(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html) )。

`signal(7)`手册页添加：

> 在 an 期间`execve(2)`，已处理信号的处置被重置为默认值；忽略信号的处置保持不变。

所以你需要一一重置你想要忽略或默认的信号，然后再`execve`

我看到一个`NSIG`常数`/usr/include/signal.h`

# msbuild - Teamcity MSBuild 发布输出目录

> ID：12073446
> 
> 赞同：5
> 
> 时间：2012-08-22T12:44:09.320
> 
> 标签：msbuild, teamcity, publish

我正在使用 Teamcity 发布我创建的 Web 应用程序，其中包含目标`Rebuild, ResolveReferences, _WPPCopyWebApplication, Package`和以下命令行参数

```
/p:Configuration=Release;PackageLocation="%system.teamcity.build.workingDir%/Publish"
/p:WebProjectOutputDir=publish
/p:OutDir=publish\bin\
/p:DebugSymbols=false 
/p:DebugType=None
/verbosity:diag 
```

包被正确创建，但最终在一个文件夹中

`%system.teamcity.build.workingDir%/Publish/Archive/Content/C_C/%system.teamcity.build.workingDir%/Web/obj/Release/Package/PackageTmp`

我希望它在其中任何一个中创建

`%system.teamcity.build.workingDir%/Publish`

或者

`%system.teamcity.build.workingDir%/Publish/Web`

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T15:53:47.070

添加`/p:PackageLocation="%system.teamcity.build.workingDir%/Publish/Web"`到构建步骤的参数中。

# android - Android GCM（推送通知）：如果应用程序停止，设备不会收到通知

> ID：12073449
> 
> 赞同：20
> 
> 时间：2012-08-22T12:44:18.377
> 
> 标签：android, broadcastreceiver, push-notification, google-cloud-messaging

我在我的 Android 项目中使用推送通知 (GCM)。

根据 GCM 教程，我实现了广播接收器并将其注册到`AndroidManifest.xml`.

即使我的应用程序关闭，这种广播接收器也应该接收消息（不仅当我的应用程序在后台，而且即使它被强制停止）。

但它不像我预期的那样工作。`onReceive()`如果应用程序关闭，则不会调用方法。看来我对广播接收器的理解是正确的，问题在于我对 GCM 的期望。

可能的原因之一是如果应用程序关闭，谷歌服务器甚至不会向设备发送通知。那么，仅当我的应用程序`onReceive()`正在运行或在后台（但未关闭）时，我的应用程序才能接收消息（并且将在广播接收器中调用方法）是否正确？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-22T12:57:26.400

> 即使我的应用程序关闭，这种广播接收器也应该接收消息（不仅当我的应用程序在后台，而且即使它被强制停止）。

如果用户从设置中强制停止您的应用程序，您的代码将**永远不会再次运行**，直到手动运行您的组件之一，通常是用户手动启动活动（从 Android 3.1 开始）。因此，如果用户从设置中强制停止您的应用程序，您将不会在较新的设备/模拟器上收到 GCM 消息。

> 那么，仅当我的应用程序正在运行或在后台（但未关闭）时，我的应用程序才能接收消息（并且将在广播接收器中调用 onReceive() 方法）是否正确？

从应用程序的角度来看，Android 中没有“关闭”的概念。如果“关闭”的意思是“没有正在运行的进程，最后一个进程正常终止”，那么是的，你应该收到 GCM 消息和其他广播。但是，同样，强制停止不是“正常终止”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T21:16:23.457

根据 Francesco Nerieri 在[这个 android-gcm 线程](https://groups.google.com/group/android-gcm/tree/browse_frm/month/2012-08/7e74aab31da818e1?rnum=11&lnk=nl&pli=1)中的说法：

> 因此，如果您强制停止应用程序，ICS 的预期行为是应用程序不会收到消息。在 JB 中，这意味着 GCM 也会取消注册应用程序，这是一种不幸的行为，我们正在努力改变这一点（JB 中的取消注册部分）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:49:16.500

在[文档](http://developer.android.com/guide/google/gcm/gcm.html)中它说：

> 无需运行 Android 设备上的 Android 应用程序即可接收消息。系统会在消息到达时通过 Intent 广播唤醒 Android 应用程序，只要应用程序设置了正确的广播接收器和权限。

检查您的广播接收器实现和权限。

# javascript - jQuery 手风琴问题

> ID：12073451
> 
> 赞同：1
> 
> 时间：2012-08-22T12:44:31.817
> 
> 标签：javascript, jquery, html, css

我的自制手风琴有问题。它可能以低效的方式完成。

[http://jsfiddle.net/arzEk/1](http://jsfiddle.net/arzEk/1)

html 和 jQ 在 jfiddle 上 ^^

**第一个问题：** 如果您单击一个项目然后快速单击另一个项目，当只有活动应该变蓝时，两者都会变蓝，这可能是我完成“动画”的方式有问题。

**第二个问题** 目前不是很明显，但在页面上（可能有更多内容时）它在向下滑动的末尾附近猛拉，只是没有应有的平滑。

代码：

```
$(document).ready(function(){                                                                                     
    $(".accordion").click(function () {
        $('.acc-content', this).removeClass("na");
        $('.na').slideUp("medium");    
        $('.acc-title', this).animate({"backgroundColor":"#00bff3"}, 1000);
        $('.acc-title').css("backgroundColor", "#77787B");                                                                         
        $('.acc-content', this).slideToggle("medium");                  
        $('.acc-content', this).addClass("na");                    
    });    
});​ 
```

HTML

```
<div class="accordion">
    <div class="acc-title">Test Title</div>
    <div class="acc-content">Lorem ipsum dolor sit amet</div>
</div>
<div class="accordion">
    <div class="acc-title">Test Title</div>
    <div class="acc-content">Lorem ipsum dolor sit amet</div>
</div>
<div class="accordion">
    <div class="acc-title">Test Title</div>
    <div class="acc-content">Lorem ipsum dolor sit amet</div>
</div>
<div class="accordion">
    <div class="acc-title">Test Title</div>
    <div class="acc-content">Lorem ipsum dolor sit amet</div>
</div>
<div class="accordion">
    <div class="acc-title">Test Title</div>
    <div class="acc-content">Lorem ipsum dolor sit amet</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:01:41.397

[`stop()`](http://api.jquery.com/stop/)在将背景颜色设置回原始颜色之前添加一个调用：

```
$(".accordion").click(function () {
    $('.acc-content', this).removeClass("na");
    $('.na').slideUp("medium");
    $('.acc-title').stop().css("backgroundColor", "#77787B");   // on this line     
    $('.acc-title', this).animate({"backgroundColor":"#00bff3"},1000);
    $('.acc-content', this).slideToggle("medium");
    $('.acc-content', this).addClass("na");           
}); 
```

[http://jsfiddle.net/arzEk/2/](http://jsfiddle.net/arzEk/2/)

这会取消任何正在运行的动画，因此不再继续以突出显示的颜色进行动画处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:49:30.817

因为动画会运行一秒钟，所以当您按下新标签时它仍在运行。

尝试在每次点击时停止动画：

```
$('.acc-title').css("backgroundColor", "#77787B");
$('.acc-title').stop(); // Stop the currently-running animation
$('.acc-title', this).animate({"backgroundColor":"#00bff3"}, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:13:22.683

是的，您应该使用 stop() 来停止任何正在进行的动画。如果您使用 CSS3 转换来代替动画，这将更简单且更易于维护。

[http://jsfiddle.net/spuCh/1/](http://jsfiddle.net/spuCh/1/)

```
$('.acc-title').click(function() {
    $('.acc-content.na')
        .stop()
        .slideUp()
        .removeClass('na')
            .prev() // The title
                .removeClass('selected');

    $(this)
        .stop()
        .addClass('selected')
        .next() // The content
            .stop()
            .slideDown()
            .addClass('na');
}); 
```

至于“锯齿状”部分......这是因为内容折叠和展开的速度略有不同。您只能通过将整个事物包装在具有固定高度的 div 中并隐藏溢出来解决它（溢出：隐藏；在 css 中）。

# grails - 在 grails 中为当前登录的用户创建

> ID：12073452
> 
> 赞同：1
> 
> 时间：2012-08-22T12:44:32.480
> 
> 标签：grails

我在用户域中有一个用户域和一个子域：

```
 static hasMany = [children:Child] 
```

我想为当前登录的用户创建一个子域的实例在用户控制器中我有：

```
 def createChild() {
    [userInstance: new Child(params)]

} 
```

这不起作用。我一直在努力解决这个问题，因为我处于死胡同，请有人帮忙。仅供参考，我正在使用弹簧安全核心

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:48:09.887

试试这个：

```
def child = new Child(params)
if (child.validate())
    userInstance.addToChildren(child) 
```

# .net - .Net 4.5 WebSocket 服务器在 Windows 7 上运行？

> ID：12073455
> 
> 赞同：28
> 
> 时间：2012-08-22T12:44:50.530
> 
> 标签：.net, windows-7, websocket, .net-4.5

我知道 Windows 7 不支持 .Net 4.5 的 ClientWebSocket 类，但是否可以使用 .Net 4.5 API 创建在 Windows 7 上运行的 WebSocket 服务器？

为了让自己更清楚，根据[here](http://msdn.microsoft.com/en-us/library/hh159274.aspx)和[here](http://msdn.microsoft.com/en-us/library/system.net.websockets.websocket.aspx)，看起来即使在Windows 7上也应该支持.Net 4.5 WebSocket实现的服务器端部分，但运行HttpListener并尝试使用开源WebSocket实现访问它给我一个“不支持 Portocol”的错误

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-22T12:52:21.020

对 websockets 的操作系统级 HTTP.SYS 支持仅限于 Win8 / Windows Server 2012 - 我同意这很愚蠢（它应该是 Windows 更新的一部分，或者最多是服务包，IMO）。

这意味着您不能直接使用来自`HttpListener`ASP.NET 或 ASP.NET 的框架支持。

但是：至于“是否可以创建 WebSocket 服务器”-当然……但前提是您自己处理 TCP/IP 通信，或者使用第 3 方库。这*有点烦*人，但并不像听起来那么糟糕。

编辑：经过一番检查，我可以确认此服务器端组件在 Windows 7（等）上不起作用**；****即使**它是带有和（等）标头的网络套接字请求（来自Chrome会话，因为它有帮助），也会`IsWebSocketRequest`返回。`false` **`Connection: Upgrade``Upgrade: websocket`**

 **然而，我***很惊讶***地发现客户端部分不起作用，因为：这更简单并且不（或至少*不需要*）涉及 HTTP.SYS。尝试使用它们会引发`PlatformNotSupportedException`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-19T09:24:30.437

正如 Marc 所说，Microsoft API 不适用于 Windows 7。但是，有几个开源库支持 Windows 7 上的 WebSockets，在某些情况下甚至通过 Mono 跨平台。

*   [https://github.com/statianzo/Fleck](https://github.com/statianzo/Fleck)
*   [http://vtortola.github.io/WebSocketListener/](http://vtortola.github.io/WebSocketListener/)
*   [http://superwebsocket.codeplex.com/](http://superwebsocket.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-14T23:47:56.680

引用[System.Net.WebSockets 文档](https://docs.microsoft.com/en-us/dotnet/api/system.net.websockets.websocket?redirectedfrom=MSDN&view=netframework-4.5)：

> Windows 7、Windows Vista SP2 和 Windows Server 2008 支持 System.Net.WebSockets 命名空间中的某些类。但是，Windows 8 和 Windows Server 2012 支持客户端和服务器 WebSocket 的唯一公共实现。这些类Windows 7、Windows Vista SP2 和 Windows Server 2008 支持的 System.Net.WebSockets 命名空间中的类元素是抽象类。这允许应用程序开发人员使用客户端 WebSocket 的实际实现来继承和扩展这些抽象类。

换句话说：DIY实际实现。**

# jquery - 使用 jquery mobile 禁用单选按钮活动样式

> ID：12073456
> 
> 赞同：0
> 
> 时间：2012-08-22T12:44:53.010
> 
> 标签：jquery, jquery-mobile, radio-button

单击单选按钮时如何禁用样式更改？单击事件时将**.ui-btn-active**添加到样式中（从 css 中删除它不是解决方案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:07:25.043

您需要覆盖 jQuery Mobile CSS，就这么简单。jQuery Mobile 动态地附加了很多类，因此您可能需要一些时间来跟踪所有选择器并修改它们。

# c - 代码更正以使 RASENUM 连接在 XP 中工作

> ID：12073460
> 
> 赞同：1
> 
> 时间：2012-08-22T12:45:06.933
> 
> 标签：c, winapi, ras

正如对[MSDN RasEnum 代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377284%28v=vs.85%29.aspx)的评论，我面临同样的问题：

> 注释部分中可能对 lpcb 参数不准确。调用 RasEnumConnections 并将 lprasconn 设置为 NULL 以确定所需的缓冲区大小，它似乎不适用于 Window ver < Vista。

我在调用 RasEnumConnections 之前添加了以下两行，它工作正常。这样对吗？如果我错了，请纠正我。

> lpRasConn = (LPRASCONN) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwCb); lpRasConn[0].dwSize = sizeof(RASCONN);

请添加您的建议。

```
#include <windows.h>
#include <stdio.h>
#include "ras.h"
#include "raserror.h"
#pragma comment(lib, "rasapi32.lib")

DWORD __cdecl wmain(){

    DWORD dwCb = 0;
    DWORD dwRet = ERROR_SUCCESS;
    DWORD dwConnections = 0;
    LPRASCONN lpRasConn = NULL;

    // Call RasEnumConnections with lpRasConn = NULL. dwCb is returned with the required buffer size and 
    // a return code of ERROR_BUFFER_TOO_SMALL
    /*I ADDED THE BELOW TWO LINES */

    lpRasConn = (LPRASCONN) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwCb);
    lpRasConn[0].dwSize = sizeof(RASCONN);

    dwRet = RasEnumConnections(lpRasConn, &dwCb, &dwConnections);

    if (dwRet == ERROR_BUFFER_TOO_SMALL){
        // Allocate the memory needed for the array of RAS structure(s).
        lpRasConn = (LPRASCONN) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwCb);
        if (lpRasConn == NULL){
            wprintf(L"HeapAlloc failed!\n");
            return 0;
        }
        // The first RASCONN structure in the array must contain the RASCONN structure size
        lpRasConn[0].dwSize = sizeof(RASCONN);

        // Call RasEnumConnections to enumerate active connections
        dwRet = RasEnumConnections(lpRasConn, &dwCb, &dwConnections);

        // If successful, print the names of the active connections.
        if (ERROR_SUCCESS == dwRet){
            wprintf(L"The following RAS connections are currently active:\n");
            for (DWORD i = 0; i < dwConnections; i++){
                         wprintf(L"%s\n", lpRasConn[i].szEntryName);
                  }
        }
        //Deallocate memory for the connection buffer
        HeapFree(GetProcessHeap(), 0, lpRasConn);
        lpRasConn = NULL;
        return 0;
    }

    // There was either a problem with RAS or there are no connections to enumerate    
    if(dwConnections >= 1){
        wprintf(L"The operation failed to acquire the buffer size.\n");
    }else{
        wprintf(L"There are no active RAS connections.\n");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:08:50.247

Psiphon 项目程序员已经解决了这个问题，请参见[源代码](https://bitbucket.org/psiphon/psiphon-circumvention-system/src/f2c6162132c9/Client/psiclient/vpnconnection.cpp)行[323](https://bitbucket.org/psiphon/psiphon-circumvention-system/src/f2c6162132c9/Client/psiclient/vpnconnection.cpp#cl-323) -394。

贝娄是源代码的第一行：

```
HRASCONN rasConnection = 0;
RASCONN conn;
memset(&conn, 0, sizeof(conn));
conn.dwSize = sizeof(conn);
LPRASCONN rasConnections = &conn;
DWORD bufferSize = sizeof(conn);
DWORD connections = 0;

DWORD returnCode = RasEnumConnections(rasConnections, &bufferSize, &connections);

// On Windows XP, we can't call RasEnumConnections with rasConnections = 0 because it
// fails with 632 ERROR_INVALID_SIZE.  So we set rasConnections to point to a single
// RASCONN, and we'll always reallocate, even if there is only one RASCONN and the
// first call succeeds.
if (ERROR_SUCCESS == returnCode)
{
    returnCode = ERROR_BUFFER_TOO_SMALL;
}

// NOTE: Race condition where a new connection is added between the buffersize check
//       and the second call.
if (ERROR_BUFFER_TOO_SMALL != returnCode && connections > 0)
{
    my_print(false, _T("RasEnumConnections failed (%d)"), returnCode);
}
else if (ERROR_BUFFER_TOO_SMALL == returnCode && connections > 0)
{
    // See "A fix to work with older versions of Windows"
    if (bufferSize < (connections * sizeof(RASCONN)))
    {
        bufferSize = connections * sizeof(RASCONN);
    }

    // Allocate the memory needed for the array of RAS structure(s).
    rasConnections = (LPRASCONN)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, bufferSize); 
```

# java - Java SE 中的 Spring 3 格式注释

> ID：12073462
> 
> 赞同：0
> 
> 时间：2012-08-22T12:45:09.097
> 
> 标签：java, spring, formatting

我可以在 Java SE 应用程序中使用**Spring 3**格式注释吗？
我的意思是`@NumberFormat`,`@DateFormat`或一些*自定义*格式。我有很多*Model 对象*，并希望以通用方式提取它们的格式化字段。我找不到为此设置正确配置的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:39:26.560

可以使用与 Spring Conversion Services 的集成来实现，您可以查看 `FormattingConversionService`但`FormattingConversionServiceFactoryBean`需要一些代码才能具有清晰的客户端 API。对我来说，这是太多的努力，我使用`@NumberFormat`了自己编写的简单注释 + 转换器。

# c# - 内联构造函数和 InjectFrom 调用返回 Object

> ID：12073472
> 
> 赞同：2
> 
> 时间：2012-08-22T12:45:21.707
> 
> 标签：c#, valueinjecter

使用 ValueInjecter，我经常发现自己在编写这样的代码：

```
var foo1 = new Foo().InjectFrom(foo2); 
```

但是，出乎意料的是，这会导致 foo1 的类型为 Object，而不是 Foo。与

```
var foo1 = (new Foo()).InjectFrom(foo2); 
```

和

```
Foo foo1 = new Foo().InjectFrom(foo2); 
```

不会编译。这没什么大不了的，因为我可以轻松做到

```
var foo1 = (Foo)new Foo().InjectFrom(foo2); 
```

或者

```
var foo1 = new Foo();
foo1.InjectFrom(foo2); 
```

并且它们都按预期工作，但我很好奇。为什么第一种方法不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:50:51.977

我没有使用 ValueInjecter，但我的假设是该`InjectFrom`方法返回对象值。和`var`糖语法一样，在编译期间自动定义变量类型，这个变量被定义为对象。这就是为什么您必须使用显式类型转换才能使其适合您的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:50:45.223

尝试添加自定义扩展方法：

```
public static T InjectFrom<T>(this T obj, T from) //May be from should be object type
{
    return (T) obj.InjectFrom(foo2);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-28T09:40:23.437

你也可以这样写：

```
var foo1 = new Foo().InjectFrom(foo2) as Foo; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-08T18:45:08.390

几个扩展：

```
public static class ValueInjecterExtentions
{
    public static T InjectIntoNew<T,TInjection>(this object from) 
        where T: new ()
        where TInjection : Omu.ValueInjecter.Injections.IValueInjection, new()
    {
        return (T) new T().InjectFrom<TInjection>(from);
    }

    public static T InjectIntoNew<T>(this object from)
        where T : new()
    {
        return (T)new T().InjectFrom(from);
    }
} 
```

用法：

```
var foo = foo2.InjectIntoNew<Foo>(); 
```

显然只能与默认构造函数一起使用，这通常是这种情况。

# views - 在 DXL 中编辑 DOORS 视图而不打开模块

> ID：12073473
> 
> 赞同：1
> 
> 时间：2012-08-22T12:45:29.777
> 
> 标签：views, ibm-doors

我有一个 DXL 脚本，它从输入源获取数据，并动态修改现有模块的视图。我已经想出了如何做到这一点，但我目前的方法要求我首先打开模块，修改视图定义，然后关闭模块。

批量完成时，会打开一堆窗口，将窗口焦点囤积在我的电脑上。我想做同样的事情——修改这些视图定义——但如果可能的话，我想避免打开模块。

这可能吗？如何在不打开模块的情况下修改视图数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:58:00.620

长时间的 DXL 程序员，据我所知，这是做不到的。要修改视图，您必须打开模块。抱歉，这可能不是您希望的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:44:23.663

```
Module  currentModule = read(Module1,false)
current = currentModule 
```

False 不会让代码打开模块。如果您将其设置为 true，它将打开模块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-07T14:11:36.240

有传言说它可能适用于以下方法：

*   使用批处理模式
*   打开模块（编辑）
*   记住用户当前的默认视图
*   修改模块，使要修改的视图为默认视图
*   关闭模块
*   再次打开它
*   现在视图应该处于活动状态并且应该可以修改列
*   以旧名称保存视图
*   恢复旧的默认视图
*   保存模块并关闭它

# javascript - 确定点击了哪个按钮 javascript/jquery

> ID：12073476
> 
> 赞同：1
> 
> 时间：2012-08-22T12:45:34.003
> 
> 标签：javascript, jquery, button

我的页面上有 10 多个完全相同的按钮，我的意思是一切都相同 - 标题、值等。

如何确定单击了哪个按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:47:23.200

这些按钮必须具有不同的 ID，以便您可以确定单击了哪个按钮。

```
$('button').click(function(e){
    alert(e.target.id);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:48:11.603

您可以使用 event.target 属性将这些按钮与唯一 ID 相关联，以确定单击了哪个按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:50:30.057

无论元素属性如何，DOM 元素仍将被归类为唯一元素。

```
$('button').click(function() {
    $(this).css('border','1px solid red');
}); 
```

应突出显示单击的按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:50:44.583

显然你想以某种方式枚举按钮。您可以使用[`.index` *^([docs])*](http://api.jquery.com/index/)来获取所选按钮中单击按钮的索引：

```
var $buttons = $('.theButtons');

$buttons.click(function() {
    var index = $buttons.index(this);
}); 
```

`this`总是指事件处理程序绑定到的元素，即总是指被点击的按钮。你可以用它做任何你想做的事。

# node.js - 在 Micro CloudFoundry 中启动 Node.js 应用程序期间缺少“以下日志”

> ID：12073483
> 
> 赞同：0
> 
> 时间：2012-08-22T12:46:06.437
> 
> 标签：node.js, cloud-foundry

我在本地有一个 Micro Cloud Foundry 实例。我部署了一个无法启动的 node.js 应用程序。

一切似乎都很好。vm player和micro cloudfoundry都可以。我将 vmc 连接到我的实例。

我创建（或共享）2 个服务：一个 redis 和一个 mongoDB。我链接到这个应用程序。

当我开始（或更新）时，我遇到了一个错误。

这个错误应该显示一些日志。（'下面'）但事实并非如此。

一个想法？谢谢

（标准答案（根据谷歌）是 /logs/sterr.log 或其他。但我没有。

此外，/logs/ 目录在哪里？

```
toto@toto:~/apps/myapp$ vmc update myapp
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (7K): OK   
Push Status: OK
Stopping Application 'myapp': OK
Staging Application 'myapp': OK                                            
Starting Application 'myapp': .
Error: Application [myapp] failed to start, logs information below.
toto@toto:~/apps/myapp$ 
```

# android - 从android中的webview获取文本

> ID：12073486
> 
> 赞同：1
> 
> 时间：2012-08-22T12:46:17.487
> 
> 标签：android, android-webview

我在 webview 中有一个 html 页面，现在当我触摸该页面上的任何内容时，它应该将该 div 的内容作为字符串提供给我。我知道它可以通过 javascript 完成，但我是 javascript 新手。请帮助我做到这一点。谢谢

# liferay - 如何隐藏 WebContent portlet 中的空白部分

> ID：12073490
> 
> 赞同：0
> 
> 时间：2012-08-22T12:46:27.067
> 
> 标签：liferay, portlet

我们正在创建一个 3 种语言的网站。我们有一些在框中显示的 Web 内容，使用“外观/高级样式”来提供边框。Portlet 标题在 Portlet 的外观中定义。

当没有一种语言的文本时，我们希望不显示这些框。

有人可以帮助我们吗？

提前致谢，

s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:05:34.040

如果您想在本文不涉及当前用户的语言时隐藏整个 WebContent-Portlet，那么您可以`html/portlet/journal_content/view.jsp`使用 Liferay-Hook 覆盖。您可以在 liferay 文档中找到 jsp 覆盖的教程：[http ://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/overriding-aj-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/overriding-a-j-4)

ps：要通过 JournalArticle 证明语言的存在，您可以使用 LanguageUtil 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:19:23.440

我相信[这个问题](https://stackoverflow.com/questions/1455112)非常接近您正在寻找的内容（除非您想隐藏元素服务器端）。

[转换为 AUI](http://deploy.alloyui.com/docs/)（因为它在 Liferay 而不是 jQuery 中可用）答案与此类似（包含简单的演示代码）：

```
 <div style="border:5px solid blue"></div>
 <div style="border:1px solid red">
    This is not empty
 </div>
 <script>
   AUI().use(function(A){
     A.all("div:empty").hide();
   });
 </script> 
```

一个更优雅的服务器端选项是创建一个结构和一个模板，并使用 Velocity 执行条件逻辑（例如 HTML 生成），这样空内容甚至不会生成标记（未显示，因为我不知道哪个您喜欢的选项，并且已经有一种解决方案）

# php - 我可以在 PHP 中发布数据，然后使用 Header 命令吗？

> ID：12073492
> 
> 赞同：0
> 
> 时间：2012-08-22T12:46:31.113
> 
> 标签：php, jquery, post

```
$bEmail=mysql_real_escape_string($_POST['bEmail']);
$bPassword=mysql_real_escape_string($_POST['bPassword']);
/webapp/wcs/stores/servlet/Do/LogonForm
header("Location: /cart/payment"); 
```

我想`/webapp/wcs/stores/servlet/Do/LogonForm`在 jQuery 中发布表单，你可以这样做：

```
$.post('/webapp/wcs/stores/servlet/Do/LogonForm', {
email: <?=$bEmail?>,
password: <?=$bPassword?>
},
window.location="cart/payment" 
```

我想在 PHP 中执行此操作，因此 PHP 运行一个脚本，此页面发送一个`POST`返回，而脚本在最后运行时它使用`Header`重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:05:13.887

是的你可以 ....

```
$bEmail=mysql_real_escape_string($_POST['bEmail']);
$bPassword=mysql_real_escape_string($_POST['bPassword']);

//set POST variables
$url = 'http://domain.com//webapp/wcs/stores/servlet/Do/LogonForm';
$fields = array(                
            'bEmail'=>urlencode($bEmail),
            'bPassword'=>urlencode($bPassword)
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

然后重定向

```
header("Location: /cart/payment");
exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:17:04.470

`header`只要没有输出发送到浏览器，您就可以随时调用该函数（即，没有 HTML 源代码或`echo`'s 可以在`header`调用之前出现）。

# javascript - 如何从浏览器控制台重新加载修改后的 .js 文件？

> ID：12073493
> 
> 赞同：1
> 
> 时间：2012-08-22T12:46:32.243
> 
> 标签：javascript, backbone.js, console, requirejs

我可以使用 RequireJS 2 重新加载最近更新的 .js 文件吗？这是我的用例：

1.  我有一个名为*Foo的**Backbone.js*对象，它的功能*Bar*只是做；**`alert("abc")`**
***   在网页中，我以某种方式调用`Foo.Bar()`并收到带有“abc”的警报*   在我的文本编辑器中，我更改了该函数的定义来代替`alert("def")`*   在同一个网页中，我打开控制台并运行一些更新功能*   当我再次打电话时`Foo.Bar()`，我会收到带有“def”的警报**

 **谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T12:49:59.180

您可以通过按以下方式访问 chome 控制台：Ctrl+Shift+J 并转到“控制台”选项卡。
输入以下内容：

```
var script = document.createElement("script");
script.src = "Path to Js File";
document.body.appendChild(script); 
```

它应该在不重新加载整个页面的情况下更新 JavaScript 文件。

> *   文件路径可以是：
>     1) http/s://yourdomain.com/path/jsfile.js
>     2) file://path/jsfile.js -（本地文件系统）

*注意：
上面使用的方法不需要 RequireJS 库。***

# sql-server - ExecuteNonQuery：返回正确的数字

> ID：12073495
> 
> 赞同：0
> 
> 时间：2012-08-22T12:46:42.073
> 
> 标签：sql-server, stored-procedures, ado.net

我有一个插入 N 条记录然后更新 N 条记录的过程。该过程的 ExecuteNonQuery 返回 2N。有没有办法只返回更新的记录数，即在最后运行的语句中受到影响？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:52:57.387

您可以尝试在存储过程中使用 SET NOCOUNT OFF/ON

在 sp 启动时放置 SET NOCOUNT ON，从而禁用插入记录的计数，在 sp 的更新部分之前应用 SET NOCOUNT OFF。

[这里参考MSDN](http://msdn.microsoft.com/en-us/library/ms189837.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:52:54.127

在存储过程调用开始时

`SET NOCOUNT ON`

, 在最后一个语句调用之前

`SET NOCOUNT OFF`

# zend-framework - 使用 zend_PDF 打开 Pdf 文档时出现错误消息

> ID：12073496
> 
> 赞同：0
> 
> 时间：2012-08-22T12:46:43.473
> 
> 标签：zend-framework, magento, zend-pdf, magento-1.7

我正在尝试在 magento 1.7 中使用 Zend_PDF 组件生成 PDF，并在我的自定义控制器中尝试了以下代码

```
 public function getPdf()
 {
 $pdf = new Zend_Pdf();
 $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
 $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);
 $page->setFont($font, 24)
   ->drawText('That which we call a rose,', 72, 720);
 $pdf->pages[0] = $page;
   $pdfString = $pdf->render();
header("Content-Disposition: attachment; filename=myfile.pdf");
header("Content-type: application/x-pdf");
echo $pdfString;
   } 
```

在 phtml 文件中调用此方法后。它成功地创建了 PDF 文档。但是当我尝试打开这个 PDF 文档时。它抛出错误说：Adobe阅读器无法打开myfile.pdf，因为它不是受支持的文件类型或文件已损坏............任何可以帮助我解决这个问题！ ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:56:00.457

之后`$pdfString = $pdf->render();`，您将需要保存此文件。

因此，在该行之后添加：

```
$pdf->save('myfile.pdf'); 
```

# javascript - kineticjs 性能变慢

> ID：12073497
> 
> 赞同：2
> 
> 时间：2012-08-22T12:46:43.777
> 
> 标签：javascript, canvas, kineticjs

抱歉，如果这个问题已经被问过，我试图找到它，但找不到。

我有一个画布，最终应该显示大约 400-500 个 20-30 像素高度/宽度的矩形。它们中的每一个都应该在鼠标上方和鼠标移出时向左和向上移动一个像素，以创建某种选定的行为。现在，我的代码适用于少量形状，但对于其中的 500 个形状，它开始显着减慢。从互联网上的一些示例中，我看到我可以创建“动画层”并将我需要动画的对象移动到那里。但是，这仍然需要我重新绘制主层以从之前的位置删除移动的项目......这是代码：

```
var seatMap = {};

seatMap.seatTypes = {
    economy: {
        width: 20,
        height: 20,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4,
        cornerRadius: 5
    },
    business: {
        width: 22,
        height: 22,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4,
        cornerRadius: 5
    },
    first: {
        width: 25,
        height: 25,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4,
        cornerRadius: 5
    }
};

seatMap.Map = function (params) {
    var stage = new Kinetic.Stage({
        container: params.container,
        width: params.width,
        height: params.height
    });

    var mainLayer = new Kinetic.Layer();
    var animationLayer = new Kinetic.Layer();

    stage.add(mainLayer);
    stage.add(animationLayer);

    var addSeat = function (object) {
        object.seat.mainLayerRef = mainLayer;
        object.seat.animationLayerRef = animationLayer;

        mainLayer.add(object.seat);
    };

    var refresh = function () {
        mainLayer.draw();
    }

    return {
        refresh: refresh,
        addSeat: addSeat
    }
}

seatMap.Seat = function (params) {

    var seatType = params.seatType == null ? seatMap.seatTypes.economy : params.seatType;

    var seat = new Kinetic.Rect({
        width: seatType.width,
        height: seatType.height,
        x: params.x,
        y: params.y,
        fill: seatType.fill,
        stroke: seatType.stroke,
        strokewidth: seatType.strokewidth,
        cornerRadius: seatType.cornerRadius,
        listening: true
    });
    seat.staticXPosition = params.x;
    seat.staticYPosition = params.y;

    seat.on('mouseover', function (event) {
        event.shape.moveTo(event.shape.animationLayerRef);
        event.shape.setX(event.shape.staticXPosition - 2);
        event.shape.setY(event.shape.staticYPosition - 2);
        event.shape.animationLayerRef.draw();
        event.shape.mainLayerRef.draw();
    });
    seat.on('mouseout', function (event) {
        event.shape.setX(event.shape.staticXPosition);
        event.shape.setY(event.shape.staticYPosition);
        event.shape.moveTo(event.shape.mainLayerRef);
        event.shape.animationLayerRef.draw();
        event.shape.mainLayerRef.draw();
    });

    return {
        seat: seat,
    }
} 
```

以及呈现画布的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="scripts/jquery-1.8.0.js"></script>
    <script type="text/javascript" src="scripts/kinetic-v3.10.5.min.js"></script>
    <script type="text/javascript" src="scripts/local/seatMapKineticExtender.js"></script>
    <!--<script type="text/javascript" src="scripts/local/app.js"></script>-->
    <script>
        $(function () {
            var map = new seatMap.Map({
                container: 'stage',
                width: 1000,
                height: 420
            });

            for (var i = 0; i < 800; i += 30) {
                for (var j = 0; j < 500; j+=30) {
                    var seat = new seatMap.Seat({
                        seatType: seatMap.seatTypes.business,
                        x: i,
                        y: j
                    });
                    map.addSeat(seat);
                }
            }
            //var seat = new seatMap.Seat({
            //    seatType: seatMap.seatTypes.business,
            //    x: 200,
            //    y: 200
            //});

            //map.addSeat(seat);
            map.refresh();
        });
    </script>
</head>
<body>
    <div id="stage" style="width: 1000px; height: 420px; margin: 0 auto; border: 1px solid black; position: relative">
        <div style="position: absolute; top: 0; z-index: 1000">
            <button id="zoomIn" type="button">Zoom In</button>
            <button id="zoomOut" type="button">Zoom Out</button>
        </div>

    </div>
</body>
</html> 
```

我觉得我在这里做的很不对，但是，不幸的是我对 kineticjs 还不够熟悉。谁能指出我正确的方向？

在此先感谢，丹尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T01:57:05.987

请查看 KineticJS v4.0.0，事件检测引擎已被重写，即使有数十万个形状，也会产生瞬时命中检测：

[http://kineticjs.com/](http://kineticjs.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T00:40:55.757

好吧，这是一个很好的挑战。我认为问题在于形状事件，但那里的改进是如此之小。

KineticJS 中的事件通过搜索模型的坐标来应用于特定的屏幕形状，直到与当前鼠标坐标匹配。因此，通过只有一层，我们增加了要搜索的数组的大小。

解决方法是使用许多层。我为每一行添加了一个图层。

以下代码中的其他一些更改是：

1.  不要在图层之间移动形状。它会导致数组拼接和索引移位。
2.  使用相对`move(x,y)`方法而不是`setX() setY()`小班次的方法。
3.  您在教程中阅读的动画层概念用于在定时帧间隔上执行实际动画。我们只是在一个事件上做一个正常的形状移动。
4.  小的 JS 改进；返回对象隐藏私有数据和方法时，不要`new`用于创建对象。

页

```
<script>
    $(function () {
        var map = seatMap.Map({
            container: 'stage',
            width: 1000,
            height: 420
        });

        for (var i = 0; i < 800; i += 30) {
            var layer = map.createLayer();
            for (var j = 0; j < 500; j+=30) {
                var seat = seatMap.Seat({
                    seatType: seatMap.seatTypes.business,
                    x: i,
                    y: j
                });
                map.addSeat(seat, layer);
            }
            layer.draw();
        }
        //var seat = new seatMap.Seat({
        //    seatType: seatMap.seatTypes.business,
        //    x: 200,
        //    y: 200
        //});

        //map.addSeat(seat);
        map.refresh();
    });
</script> 
```

代码

```
seatMap.Map = function (params) {
var stage = new Kinetic.Stage({
    container: params.container,
    width: params.width,
    height: params.height
});

var addSeat = function (object, layer) {
    object.seat.layer = layer;
    layer.add(object.seat);     
};

var refresh = function () {
    mainLayer.draw();
};

var createLayer = function() {
    var layer = new Kinetic.Layer();
    stage.add(layer);
    return layer;
};
return {
    createLayer : createLayer,
    refresh: refresh,
    addSeat: addSeat
};
}

seatMap.Seat = function (params) {

var seatType = params.seatType == null ? seatMap.seatTypes.economy : params.seatType;

var seat = new Kinetic.Rect({
    width: seatType.width,
    height: seatType.height,
    x: params.x,
    y: params.y,
    fill: seatType.fill,
    stroke: seatType.stroke,
    strokewidth: seatType.strokewidth,
    cornerRadius: seatType.cornerRadius,
    listening: true
});
seat.staticXPosition = params.x;
seat.staticYPosition = params.y;

seat.on('mouseover', function (event) {
    event.shape.move(-3,-3);
    event.shape.layer.draw();
});
seat.on('mouseout', function (event) {

    event.shape.move(3,3);
    event.shape.layer.draw();
});

return {
    seat: seat,
};
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T21:32:32.760

绘制 500 个形状就可以了。当然，性能还取决于计算机速度、浏览器（chrome 目前是最快的——但显然你需要在所有浏览器上都有可接受的性能）。

查看有关性能和改进方法的[链接。](http://www.html5rocks.com/en/tutorials/canvas/performance/)

# c# - 使用没有表单的输入 type=file

> ID：12073505
> 
> 赞同：5
> 
> 时间：2012-08-22T12:47:22.603
> 
> 标签：c#, html

我遇到的问题是在``<input type=file>``不使用 a的情况下从 a 获取文件信息``<form>``到代码隐藏方法中。当我尝试使用获取信息时，该文件始终在后面的代码中返回为 null，``Request.Files``我相信这是因为它实际上从未被发送到服务器。

有没有办法在不使用 a 的情况下将文件信息发送到服务器``<form>``？

这是我正在使用的html
``<input type="file" id="upload_file" name="upload_file" runat="server" accept="image/*" onchange="copyFile()" />``

这是背后的代码
`HttpPostedFile file = Request.Files["upload_file"];`

 ````
 if (file != null && file.ContentLength > 0)
    {
        string fname = Path.GetFileName(file.FileName);
        file.SaveAs(Server.MapPath(Path.Combine("~/App_Data/", fname)));
    } 
````  `由于网页的设置方式，我无法使用 a ``<form>``，它仅在 IE（甚至 IE9）中导致一些可怕的格式问题，我无法在 css 中修复。另外，我正在使用``<input type=file>``而不是，``<asp:FileUpload>``以便我可以访问该`onchange`事件。

**编辑！**
在隐藏在网站内的母版页上，有一个已经添加了 runat="server" 的表单。抱歉之前没有提到这一点，我只是在尝试将 runat="server" 添加到我尝试创建的新表单时才发现

任何帮助将不胜感激！谢谢！

**编辑！**
**最终代码**
感谢@bkwint 和@TrizZz，如果没有你的帮助，我仍然会努力解决这个问题。

html部分

``<asp:FileUpload id="upload_file" runat="server" OnLoad="upload_file_OnLoad" />``

后面的代码在 onchange 中添加到 asp:FileUpload

``protected void upload_file_OnLoad(object sender, EventArgs e) { ((System.Web.UI.WebControls.FileUpload)sender).Attributes.Add("onchange", "copyFile();"); }``

以及保存文件的代码

``if (Request.Files.Count > 0) { if (Request.Files[0].FileName.Length > 0) { Request.Files[0].SaveAs("~/App_Data/" + Request.Files[0].FileName); } }``

javascript 允许我使用母版页中的表单进行提交，其中添加了添加到 asp:FileUpload 的 onchange。id 'aspnetForm' 是母版页中的表单。

``document.getElementById('aspnetForm').submit();``

从我通过更多研究了解到的情况是，可能导致 css 不满意并且表单无法正确提交的原因是嵌套表单不好。由于母版页上有一个我不知道的表单，所以当我添加另一个表单时，网页只是有点忽略了我添加的那个。通过调用母版页上的提交，将上传的文件正确推送到服务器。

再次感谢所有回复/评论和帮助的人！

**注意**
这在 IE 中可能不起作用，具体取决于您的设置方式。当您尝试直接从文件上传提交表单时，IE 不喜欢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:14:40.020

你需要一个表单来使用表单控件。我知道你说你有一些 CSS 问题，但是如果它导致问题，你将能够处理你的 CSS。

* * *

HttmpPostedFile 仅在提交时发布，这就是您获得 NULL 文件的原因。需要表单来获取 post 方法。文件仅在邮寄期间发送，您需要这样做：

```
<form action="yourPage.aspx" method="post">
<input type="file" onchange="this.form.submit()" name="upload_file" id="upload_file"/>
</form> 
```

在 yourPage.aspx 的加载事件中：

```
HttpPostedFile file = Request.Files["upload_file"];
if (file != null && file.ContentLength > 0)
{
    string fname = Path.GetFileName(file.FileName);
    file.SaveAs(Server.MapPath(Path.Combine("~/App_Data/", fname)));
} 
```

使用这种方法，你应该没有问题，当然除了你的 CSS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:55:54.760

您的文件输入应放在表单中。据我所知，没有办法将其保留在表单标签之外并仍然发送数据......

至于使用标签而不是 dot net FileUpload 标签的原因。为什么不在后端添加 onchange javascript。

所以像这样定义你的标签

```
<asp:FileUpload ID="FlUpld_x" runat="server" OnLoad="FlUpld_x_OnLoad" /> 
```

并像这样定义你的代码

```
protected void FlUpld_x_OnLoad(object sender, EventArgs e)
{
  ((FileUpload)sender).Attributes.Add("onchange", "js_function();");
} 
````

# ruby-on-rails-3 - 需要将图像放入使用 wicked_pdf 导出的 PDF 的一页中

> ID：12073510
> 
> 赞同：0
> 
> 时间：2012-08-22T12:47:37.417
> 
> 标签：ruby-on-rails-3, wicked-pdf

我在 Rails(3.0) 应用程序中使用 wicked_pdf 生成 PDF（横向模式）。一切正常，但有一个小故障。我有一个按顺序排列的动态大小的数据（比如评论和图像）循环。图像有一个放置它们的框架。如果框架图像不适合当前页面的空间，我需要将框架图像移动到下一页。目前发生的情况是，如果不合适，框架的结尾部分会移动到下一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:15:12.220

可以尝试在您的内容周围包裹一个 div，并在您的 CSS 中包含以下内容。

```
div.page {
  width: 180mm;
  height: 277mm;
  overflow: hidden;
  page-break-after: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:10:58.933

我使用这个 css 样式来控制自动分页符：

```
img.auto-page-break { 
    page-break-before: auto;  
    page-break-inside: avoid;
} 
```

# mysql - 使用 LEFT JOIN 和 INNER JOIN 插入

> ID：12073513
> 
> 赞同：58
> 
> 时间：2012-08-22T12:47:47.710
> 
> 标签：mysql, left-join, inner-join

嘿，我想弄清楚如何使用以下查询插入新记录：

```
SELECT user.id, user.name, user.username, user.email, 
  IF(user.opted_in = 0, 'NO', 'YES') AS optedIn  
FROM 
  user
  LEFT JOIN user_permission AS userPerm ON user.id = userPerm.user_id
ORDER BY user.id; 
```

`INSERT`到目前为止，我的查询是这样的：

```
INSERT INTO user 
SELECT * 
FROM user 
  LEFT JOIN user_permission AS userPerm ON user.id = userPerm.user_id; 
```

但是，我不确定`VALUE('','','','', etc etc)`在使用左连接和内连接时该怎么做。

所以我想做的是：

`User`桌子：

```
id    | name       | username    | password                 | OptIn
--------------------------------------------------------------------
562     Bob Barker   bBarker       BBarker@priceisright.com   1 
```

还有`user_permission`桌子

```
user_id   | Permission_id
-------------------------
562         4 
```

**更新** 所以像这样？

```
INSERT INTO user (name, username, password, email, opted_in) VALUES ('Bbarker','Bbarker','blahblahblah','Bbarker@priceisright.com',0);
INSERT INTO user_permission (user_id, permission_id) VALUES (LAST_INSERT_ID(),4); 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-22T12:50:05.217

您必须具体说明您选择的列。如果您的`user`表有四列`id, name, username, opted_in`，则必须从查询中准确选择这四列。语法如下：

```
INSERT INTO user (id, name, username, opted_in)
  SELECT id, name, username, opted_in 
  FROM user LEFT JOIN user_permission AS userPerm ON user.id = userPerm.user_id 
```

但是，似乎没有任何理由在`user_permission`这里加入，因为该表中的任何列都不会插入到`user`. 事实上，这`INSERT`似乎必然会因违反主键唯一性而失败。

MySQL 不支持同时插入多个表。您需要在代码中执行两条语句，使用第一个查询中的最后一个插入 ID，或者在主表上`INSERT`创建触发器。`AFTER INSERT`

```
INSERT INTO user (name, username, email, opted_in) VALUES ('a','b','c',0);
/* Gets the id of the new row and inserts into the other table */
INSERT INTO user_permission (user_id, permission_id) VALUES (LAST_INSERT_ID(), 4) 
```

或使用[触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)：

```
CREATE TRIGGER creat_perms AFTER INSERT ON `user`
FOR EACH ROW
BEGIN
  INSERT INTO user_permission (user_id, permission_id) VALUES (NEW.id, 4)
END 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-22T12:50:22.647

使用另一个查询`VALUES`插入数据时不能使用子句。`SELECT`请参阅[插入语法](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)

```
INSERT INTO user
(
 id, name, username, email, opted_in
)
(
    SELECT id, name, username, email, opted_in
    FROM user
         LEFT JOIN user_permission AS userPerm
            ON user.id = userPerm.user_id
); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-20T05:58:04.307

```
INSERT INTO Test([col1],[col2]) (
    SELECT 
        a.Name AS [col1],
        b.sub AS [col2] 
    FROM IdTable b 
    INNER JOIN Nametable a ON b.no = a.no
) 
```

# c# - 突出显示到达日期到离开日期 Asp 日历

> ID：12073515
> 
> 赞同：0
> 
> 时间：2012-08-22T12:48:05.020
> 
> 标签：c#, asp.net

如何使用 asp Calendar C# 突出显示从 StartDate 到 EndDate 的日期

当我第一次单击日历的日期时，它将是第一个日期，当我单击另一个日期时，我将是最后一个日期并突出显示日期

从开始日期到结束日期

这是示例 [http://reservations.directwithhotels.com/reservation/selectDates/171](http://reservations.directwithhotels.com/reservation/selectDates/171)

当他首先单击时，它将是到达，然后当他再次单击一个日期时，它将是出发，并且突出显示到达和出发日期之间的所有日期

任何人都知道如何在 ASP 日历 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:57:30.093

您可以使用 DayRender 尝试使用此代码

```
protected void Calendar_DayRender(object sender, DayRenderEventArgs e)
    {
            if (e.Day.Date > startDate && 
                e.Day.Date < finishDate     ) //Adjust your condition on  e.Day.Date
            {
                e.Cell.BackColor = System.Drawing.Color.Green; //Highligth ; adjust your color
            }
        }
    }

protected void Calendar1_SelectionChanged(object sender, EventArgs e) 
{
   if(startDate == null)
     startDate = Calendar1.SelectedDate;
   else
     finishDate = Calendar1.SelectedDate;      
}

<asp:Calendar OnDayRender="Calendar_DayRender" /> 
```

# user-interface - photoshop 脚本：强制 UI 更新

> ID：12073516
> 
> 赞同：0
> 
> 时间：2012-08-22T12:48:07.827
> 
> 标签：user-interface, updates, flash-cs5, photoshop-script, adobe-scriptui

我已经让我的脚本工作了，我只想添加一个进度条来显示进度（呃！）。这是我制作的测试脚本，因为我在原始脚本中发现了问题。在原始脚本中，循环中有很多打开、保存、复制、粘贴和转换...

```
var StatusWindow = new Window("window","Production");

StatusWindow.size = [400,150];
StatusWindow.alignChildren = "left";
StatusWindow.TextProgress = StatusWindow.add("statictext",[0,0,200,0]);
StatusWindow.BarProgress = StatusWindow.add("progressbar",[0,0,200,12]);
StatusWindow.show();

for (n=0; n<100; n++) {
  StatusWindow.TextProgress.text = n;
  StatusWindow.BarProgress.value = n;
  $.sleep(100);
}
alert("Done!); 
```

脚本运行并显示窗口和进度条。然后 UI 中的任何内容都不会更新，直到出现警告框。如果我暂停脚本（whitin ExtendScript Toolkit CS5），UI 会更新为 xt 和正确的进度。我知道 UI 通常只有在系统中有“剩余”时间时才会更新，但这太荒谬了！！！

如何在我想要的时候强制 Photoshop 更新 UI？

//谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:44:00.903

（来自[JavaScript 工具指南](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/scripting/pdfs/javascript_tools_guide.pdf)）您可以使用 StatusWindow.update()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T08:35:34.827

您可能需要考虑使用 app.refresh() 或 waitForRedraw()。window.update() 似乎没有为我解决这个问题。

这是来源：[http ://www.davidebarranca.com/2012/10/scriptui-window-in-photoshop-palette-vs-dialog/](http://www.davidebarranca.com/2012/10/scriptui-window-in-photoshop-palette-vs-dialog/)

# .net - 通过 Cruise Control 更新 vdproj / 设置文件中的版本号

> ID：12073517
> 
> 赞同：2
> 
> 时间：2012-08-22T12:48:07.420
> 
> 标签：.net, cruisecontrol.net, vdproj

我们有一个使用 Cruise Control（和 msbuild 文件）的自动化构建解决方案，它允许我们使用“正常”可执行文件的内部版本号自动更新文件版本。

但是设置项目或更具体地说是 vdproj 文件呢？是否有任何方法可以自动更新 vdproj 文件的版本以及由此产生的安装项目的 msi 安装程序文件？

（澄清一下：使用 msi 安装程序安装的 exe 显示正确的版本号，但我现在特别想知道的是安装项目通过 vdproj 文件创建的 msi 安装程序的版本控制。）

如果重要的话，我们在构建服务器上安装了 VS2010。

感谢你的帮助！

# ios - CGRectMake 和retina 中的字面值

> ID：12073531
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:49:08.720
> 
> 标签：ios, retina-display, cgrectmake

如果我的应用程序中有这行代码，IOS 会自动翻译到视网膜吗？

所以：

```
self.cellView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]; 
```

在 iPad3 上会自动变成：

```
self.cellView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 2048, 1536)]; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:52:48.947

不会。这会创建一个屏幕大小的视图，而另一个视图是屏幕大小的两倍。Core Graphics 以点为单位处理测量，而不是像素。

# ant - 无法运行演示设置

> ID：12073535
> 
> 赞同：1
> 
> 时间：2012-08-22T12:49:16.107
> 
> 标签：ant, business-process-management, activiti

我已经下载了 Activity 5.10 zip 文件，然后我下载并配置了 Apache ANT，我对其进行了测试，它运行成功。但我无法运行此链接[http://activiti.org/userguide/#demo.setup中指定的演示文件](http://activiti.org/userguide/#demo.setup)

如果我使用 cmd 命令行键入以下内容：-

```
C:\activiti-5.10\activiti-5.10\setup>ant demo.start 
```

我会收到以下错误：-

```
'ant' is not recognized as an internal or external command, operable program or batch file. 
```

谁能帮我找出问题所在？BR

**：：：更新：：：**

感谢您的回复，我已经在活动的设置目录中复制了 ANT bin 文件，然后我再次运行 CMD 命令，但是我收到以下错误，我构建失败，如下所述：-

```
C:\Users\Desktop\activiti-5.10\activiti-5.10\setup>ant demo.start
Buildfile: C:\Users\Desktop\activiti-5.10\activiti-5.10\setup\build.xml

demo.install:

internal.cfg.create:
     [copy] Copying 1 file to C:\Users\Desktop\activiti-5.10\activiti-5.
10\setup\build\activiti-cfg
      [zip] Building zip: C:\Users\Desktop\activiti-5.10\activiti-5.10\s
etup\build\activiti-cfg.jar
     [echo] copying configuration to ../workspace/activiti-engine-examples/src/m
ain/config
    [unzip] Expanding: C:\Users\Desktop\activiti-5.10\activiti-5.10\setu
p\build\activiti-cfg.jar into C:\Users\Desktop\activiti-5.10\activiti-5.
10\workspace\activiti-engine-examples\src\main\config

internal.classpath.libs:

internal.taskdef.launch:

h2.start:
     [echo] starting H2 database...
   [launch] launching cmd 'C:\Users\Desktop\activiti-5.10\activiti-5.10\
apps\h2\h2.start.bat ' in dir 'C:\Users\Desktop\activiti-5.10\activiti-5
.10\apps\h2'
   [launch] waiting for launch completion msg 'TCP server running'...
   [launch]   'java' is not recognized as an internal or external command,
   [launch]   operable program or batch file.
   [launch] launched process completed
     [echo] H2 database started

tomcat.start:

BUILD FAILED
C:\Users\Desktop\activiti-5.10\activiti-5.10\setup\build.xml:330: couldn
't find executable for script C:\Users\Desktop\activiti-5.10\activiti-5.
10\apps\apache-tomcat-6.0.32\bin\startup

Total time: 0 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:20:38.850

看起来您没有在路径变量中设置 ant 目录。指定 ant 的整个路径或将其添加到路径变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:11:57.123

我输入`tomcat.install`并解决了问题，因为我需要在应用程序目录中下载 tomcat。

# sql-server - 在不锁定数据库的情况下保存 EF 中的许多更改的最佳方法

> ID：12073538
> 
> 赞同：1
> 
> 时间：2012-08-22T12:49:20.557
> 
> 标签：sql-server, entity-framework

我有几个服务使用实体框架来保存数据库中的许多更改。

当它们在 IIS 中执行时，它运行得非常快，但是当我处于调试模式并在我的开发计算机上运行它时，它需要几分钟，我看到所有其余查询都崩溃了（即使它们不是在我正在更新的同一张桌子上）。

所以我认为我没有按照我应该的方式这样做 8-)

我的代码是这样的：

```
public void CancelOrders(ObservableCollection<long> idOrders)
    {
        Model.Entities context = new Model.Entities();

        var query = from orders in context.ORDERS.Include("CUSTOMERS")
                    where idOrders.Contains(orders.id_order)
                    select orders;

        foreach (var order in query)
        {
            foreach (var customer in order.CUSTOMERS)
            {
                customer.served = false;
            }
            context.ORDERS.DeleteObject(order);
        }

        context.SaveChanges();

    } 
```

当它运行 context.SaveChanges() 时问题就来了...它曾经是大约 2000 行并且需要一段时间才能完成（同时 NOBODY 可以使用相同的数据库）。

我应该做一个更频繁的 context.SaveChanges() 吗？我可以使用不同的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:52:39.443

如果您不需要删除是事务性的，那么您可以`SaveChanges()`通过将其添加到外部`foreach`循环或内部和外部循环的末尾来更频繁地调用。

我怀疑您至少希望删除订单并将客户更新为事务性的，因此我建议仅将其放在外`foreach`循环中。

# java - 使用 java se 将 httpRequest 方法 post 提交到 apache 服务器

> ID：12073545
> 
> 赞同：0
> 
> 时间：2012-08-22T12:49:42.287
> 
> 标签：java, apache, post

我正在尝试通过我的浏览器使用我的 java 应用程序中的网站；这是我第一次尝试这样的事情，我担心我错过了一些东西。

我正在使用 apache httpcore 库使用 post 方法执行 http 请求，使用wireshark 我已经看到了 post 请求中的参数，并且我已经将它们添加到我使用 java 执行的请求中；标题相同。

如果我嗅探使用 java 发出的请求，我将无法捕获 http post 请求，而只能捕获 tcp 流量。

这就是我提出请求的方式：

```
HttpPost httpPost = new HttpPost("http://xxx.xxx");

httpPost.setHeader("Host", "xxx.xxx:xxxx");
.
.
.

HttpParams params = new BasicHttpParams();
params.setParameter("aaaa", "bbbb");
.
.
.

HttpResponse response = httpclient.execute(httpPost); 
```

我错过了什么吗？

我应该检查其他东西吗？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:36:49.680

您必须通过在 HttpPost 上调用 .setEntity(HttpEntity) 方法来为您的发布请求提供正文。

```
 private void sendToPostProxy(HttpServletRequest request,
          HttpServletResponse response) throws IOException {
      //the url to forward too
      String url = "http://127.0.0.1:"+proxyPort+request.getRequestURI()
              +(request.getQueryString()==null?"":"?"+request.getQueryString());
      HttpPost get = new HttpPost(url);
      //I am streaming requests straight through, but there are many Entity types you can use
      get.setEntity(new InputStreamEntity(request.getInputStream(), request.getContentLength()));
      sendToProxy(request, response, get);
  }
  private void sendToProxy(HttpServletRequest request,
          HttpServletResponse response,HttpRequestBase get) throws IOException {
    DefaultHttpClient client = new DefaultHttpClient();
    Enumeration headers = request.getHeaderNames();
    //copy headers
    while(headers.hasMoreElements()){
        String next = String.valueOf(headers.nextElement());
        String header = request.getHeader(next);
        if (!get.containsHeader(next)&&!"Content-Length".equalsIgnoreCase(next))
            get.addHeader(next, header);
    }
    try{
    //perform post
    HttpResponse proxied = client.execute(get);
    //set client headers
    for (Header h : proxied.getAllHeaders()){
        response.setHeader(h.getName(), h.getValue());
    }
    //stream to client
    HttpEntity body = proxied.getEntity();
    body.writeTo(response.getOutputStream());
    response.setStatus(HttpServletResponse.SC_OK);

    }catch(Exception e){
        e.printStackTrace();
        get.abort();
    }
} 
```

# java - Java Play 2 - 手动更新

> ID：12073546
> 
> 赞同：1
> 
> 时间：2012-08-22T12:49:45.950
> 
> 标签：java, twitter-bootstrap, playframework-2.0, updates

Twitter刚刚发布了bootstrap 2.1，我想更新play2的helpers。

当前规则是 [https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/twitterBootstrap/twitterBootstrapFieldConstructor.scala.html](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/twitterBootstrap/twitterBootstrapFieldConstructor.scala.html)

我去了`C:\play\framework\src\play\src\main\scala\views\helper\twitterBootstrap`

并将其更改为：（可以在此处找到规则：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)）

```
@(elements: views.html.helper.FieldElements)

@import play.api.i18n._
@import views.html.helper._

@**************************************************
* Generate input according twitter bootsrap rules *
**************************************************@

<div class="control-group error">
 <label class="control-label" for="@elements.id">@elements.label(elements.lang)</label>
 <div class="controls">
        @elements.input
        <span class="help-inline">@elements.errors(elements.lang).mkString(", ")</span>
        <span class="help-block">@elements.infos(elements.lang).mkString(", ")</span> 
    </div>
</div> 
```

但我不知道如何更新我的项目。

我做了

```
play
clean
run 
```

但它仍然使用旧规则，有什么想法吗？

编辑：

如何从视图中使用 twitter 助手？

```
@(signupForm: Form[User])

@import helper._

@title = {
    Sign Up
}

@main(title, nav = "signup") {

    @helper.form(action = routes.SignUp.submit) {

        <fieldset>
            <legend>Account informations</legend>

            @inputText(
                signupForm("username"), 
                '_label -> "Username", 
                '_help -> "Please choose a valid username.",
                '_error -> signupForm.globalError
            ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:13:25.603

我最近遇到了类似的问题，最终为此创建了自己的 Helper。

内容`app/views/Helpers/bootstrapInput.scala.html`：

```
@(elements: helper.FieldElements)

@*****************************************************
* Generate input according to twitter bootsrap rules *
******************************************************@
<div class="control-group @if(elements.hasErrors) {error}">
  <label class="control-label" for="@elements.id">@elements.label</label>
  <div class="controls">
    @elements.input
    <span class="help-inline">@elements.errors(elements.lang).mkString(", ")</span>
  </div>
</div> 
```

要使用它，请将其放在您的视图中（在顶部，直接在声明参数之后）：

```
@implicitField = @{ FieldConstructor(views.html.Helpers.bootstrapInput.f) } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:25:14.470

您更新了 Play！源代码，但你没有编译和打包它。

更改助手的最佳方法是在您自己的项目中使用它们：

1.  将新的助手放在`app/view`目录中
2.  直接在您的视图中使用它们而不添加任何导入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:52:44.450

Github 上也有[请求](https://github.com/playframework/Play20/pull/217)在 Play 框架中修复此问题。也许有人可以方便地使用[这个提交](https://github.com/tschundeee/Play20/commit/8f40a211413baf0ddf3262709621c9b5bcdfab77)。

# php - 用 mysql 数据按列填充 html 表

> ID：12073547
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:49:52.080
> 
> 标签：php, mysql, html-table

我有一个使用 PHP 返回数据的 MySQL 查询。我的问题是我需要用查询返回的数据填充我的 html 表（有 3 列），但数据应该按列填充。像第一列一样，应该填充第一列..然后是第二列，最后是第三列。

另外我想知道是否可以为无限的数据集这样做？

![在此处输入图像描述](../Images/3e2b6f8410a284cf961f2d548db3de8b.png)

按照所需布局的屏幕截图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:32:48.737

You need to check all the results returned, then print them as you won't print in order:

First get an array with all the results

```
<?php
 $sql= mysql_query('SELECT * FROM table');
 $num= mysql_affected_rows($sql);
 $items = array();
 $i=0;
 while($item=mysql_fetch_array($sql)){
  $items[++$i]=$item['data'];
 } 
```

Now start printing

```
 int $num_rows;
 $num_rows=$num%3;
 echo '<table>';
 for ($i=0;$i<$num_rows;$i++){
  echo '<tr>';
  for ($j=0;$j<2,$j++){
   $n=$i+1+($j*$num_rows);
   if($items[$n]!==null)
   echo '<td>'.$items[$n].'</td>';
   else
    echo '<td></td>';
  }echo '</tr>';

 }echo'</table>';
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:27:59.557

```
$data = array();
$result = mysql_query("SELECT * FROM your_table");
while ($row = mysql_fetch_array($result)) {
    $data[] = $row;
}

$itemsAmount = count($data);
$ceilAmount = ($itemsAmount - $itemsAmount % 3) / 3;
$lastAmount =  $itemsAmount % 3;
$firstArray = array_slice($data, 0, $itemsAmount);
$secondArray = array_slice($data, 0, $itemsAmount*2);
$thirdArray = array_slice($data, 0, $lastAmount);

$output = "<table>";

foreach ($data as $key => $value) {
    $output .= "<tr>";
    $output .= "<td>" . $firstArray[$key][0] . "</td>";
    $output .= "<td>" . $secondArray[$key][0] . "</td>";
    if (empty($thirdArray[$key])) {
        $str = '';
    } else {
        $str = $thirdArray[$key][0];
    }
    $output .= "<td>" . $str . "</td>";
    $output .= "</tr>";
}
$output .= "</table>";

echo $output; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:56:19.750

你可以使用while。

```
<table>
$sql=mysql_query("select * from table");

 while($s=mysql_fetch_array($sql))
 {

    $x=$s["x"];
    <tr>
     <td ><?php echo $x; ?></td>
     <td ><?php echo $y; ?></td>
     <td ><?php echo $z; ?></td>
    </tr>
}
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:10:26.540

Guybennet 的回答是正确的，但是如果您希望它适用于无限数量的列，您可以这样做：（为了便于阅读，我还添加了一些列标题）

```
echo '<table>';
$counter = 0;
$result = mysql_query("select * from table");
while($row = mysql_fetch_array($result)) {
    $counter++;
    if($counter == 1) {
        echo '<tr>';
        foreach($row as $key => $val) {
            echo "<th>$key</th>";
        }
        echo '</tr>';
    }
    echo '<tr>';
    foreach($row as $key => $val) {
        echo "<td>$val</td>";
    }
    echo '</tr>';
}
echo '</table>'; 
```

当然你也应该使用 mysqli 或 PDO 我只是展示一个简单的例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:13:09.640

如果你不关心它的组织方式，你可以尝试这样的事情：

```
echo "<table><tr>";
$i=0;
while($row = mysql_fetch_array($sql))
{
    echo "<td>".$row[0]."</td>\n";
    $i++;
    if($i==3)
    {
        echo "</tr>\n<tr>";
        $i=0;
    }
}
echo "</tr></table>"; 
```

否则，我建议将其全部放入一个数组中，然后将其放入表中。

# javascript - 无法创建 MozillaBrowserBot 对象

> ID：12073554
> 
> 赞同：0
> 
> 时间：2012-08-22T12:50:17.213
> 
> 标签：javascript, selenium, xul

我试图在 mozilla js 中获取 MozillaBrowserBot 对象。但它没有给出对象。我使用的代码如下：

```
function externalApplication(){
        var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"].getService(Components.interfaces.nsIWindowMediator);
        alert("wm: "+wm);
        var contentWindow=wm.getMostRecentWindow('navigator:browser').getBrowser().contentWindow;
        alert("contentWindow: "+contentWindow);

        //I am not gettting this pageBot object
        var pagebot=new MozillaBrowserBot(contentWindow);
        alert(pagebot);
} 
```

我想将 find 选项添加到 xpath 检查器。如果 MozillaBrowserBot 与 selenium IDE 相关，那么是否有可能获取 pagebot 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:48:30.097

从谷歌搜索结果来看，`MozillaBrowserBot`是由 Selenium IDE 定义的。此外，它显然是在您获得的内容页面中定义的，而不是在您的代码执行的上下文中。这意味着正确的调用将是：

```
var pagebot = new contentWindow.MozillaBrowserBot(contentWindow); 
```

这当然是基于一堆猜测，因为您的问题不提供任何上下文信息。

# c++ - C++ 11：是否声明了默认的复制构造函数用户？

> ID：12073556
> 
> 赞同：14
> 
> 时间：2012-08-22T12:50:26.563
> 
> 标签：c++, c++11

我想是这样，但我正在寻找 C++11 语言律师来确认我的印象。下面的课是真的吗

```
struct X{
X(){}
X(X const&)=default;
}; 
```

不会自动启用移动，即获取`X(X&&)`and `operator=(X&&)`，因为它的复制构造函数是“用户声明的”，即使它看起来等同于

```
struct X{
}; 
```

这将在使用时得到隐含声明`X(X const&)`和`X(X&&)`（平凡）定义的等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:42:29.587

从标准：

> ### 8.4.2 显式默认函数 [dcl.fct.def.default]
> 
> 4 - [...] 一个特殊的成员函数是用户提供的，如果它是用户声明的并且在其第一次声明时没有显式地默认或删除。[...]

显式默认值可以与其声明相结合，也可以分开：

```
struct S {
    S();
};
S::S() = default; 
```

在任何一种情况下，它的（第一个）声明都使它成为用户声明的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T14:23:12.513

是的，您的默认复制分配运算符排除了隐式移动 ctor。

BTW put`=default`实际上是一个*定义*。我记得[尝试实现](https://stackoverflow.com/questions/9020372/how-do-i-use-unique-ptr-for-pimpl)一个 pimpl 习惯用法，`std::unique_ptr`并且不得不`=default`从头文件中删除并将它们放入实现文件中，因为析构函数`unique_ptr`需要它试图清理的类的定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:52:17.547

`default`ed 复制构造函数确实*是*“用户声明的”；我认为添加`default`实际上是他们将术语从“用户定义”更改为“用户声明”的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T13:24:58.530

没错，§12.8 设置了隐式声明移动构造函数时的条件，并且用户声明的复制构造函数的存在排除了这种情况。你不能拥有

*   用户声明的复制构造函数
*   用户声明的复制赋值运算符
*   用户声明的移动赋值运算符
*   用户声明的析构函数

# git - 是否可以使用 git archive 仅下载提交/修订中更改的文件

> ID：12073559
> 
> 赞同：6
> 
> 时间：2012-08-22T12:50:29.803
> 
> 标签：git, bitbucket

使用 git archive 命令是否可以仅从存储库中下载特定提交 id 的更改/受影响的文件？是否可以使用网络界面@bitbucket？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-01-29T13:59:54.950

列出在提交中更改的文件，`git diff-tree`并将它们传递给`git archive`.

```
git archive --format=zip --output=commit_files.zip <tree-ish> `git diff-tree --no-commit-id --name-only -r <tree-ish> | sed ':a;N;$!ba;s/\n/ /g'` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:39:54.457

您可以创建一个专注于特定提交的存档文件，但它会存档整个 repo，而不仅仅是更改/受影响的文件。不过，您可能可以通过日志找出这些。

示例：如果您想要来自 bitbucket 的最新更改，它看起来像：

```
git archive -format=tar --remote=<PATH_TO_YOUR_REPO> HEAD 
```

# asp.net - 无法在我的视图中显示图像

> ID：12073561
> 
> 赞同：0
> 
> 时间：2012-08-22T12:50:37.467
> 
> 标签：asp.net, asp.net-mvc

我尝试显示图像（存储在我的数据库中），但遇到了一些问题。

在我看来，我有以下代码：

```
<img src="@Html.Action("DownloadLogo", new { logoID = item.Logo.Key })" alt="" width="60" height="60"> 
```

我的控制器中有以下代码：

```
 public FileContentResult DownloadLogo(int logoID)
    {
        LogoDTO logoDTO = _serviceClient.GetLogo(logoID);
        return File(logoDTO.LogoContent, logoDTO.LogoContentType);
    } 
```

到达我视图中的代码时出现以下错误：

**异常**

执行处理程序“System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper”的子请求时出错。

在离开控制器之前，我检查值：

logoDTO.LogoContent = {byte[50802]} logoDTO.LogoContentType = "image/png"

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:12:38.247

Html.Action 应该是 Url.Action。Html.Action 将在您的 href 属性中呈现一个标签。Url.Action 只会呈现 URL。

# hibernate - Hibernate + HSQLDB 模式未导出

> ID：12073563
> 
> 赞同：1
> 
> 时间：2012-08-22T12:50:43.773
> 
> 标签：hibernate, spring-mvc, schema, hsqldb

我有基于 Spring-MVC 的 Web 应用程序。我已经将它与 Hibernate 3.6.0 集成。当我尝试保存名为 User 的实体时，我得到：

> org.hsqldb.HsqlException：用户缺少权限或找不到对象：USER

我发现数据库中没有表 USER 但为什么呢？我的 springs ServletDispatcher 的配置文件片段：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver"></property>
        <property name="url" value="jdbc:hsqldb:file: db/autostop; shutdown=true"></property>
        <property name="username" value="SA"></property>
        <property name="password" value=""></property>
    </bean>
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="packagesToScan" value="prv.bladositto.autostop.persistance.hibernate.model"/>
        <property name="hibernateProperties">
            <props>
                <prop key="dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="show_sql">true</prop>
                <prop key="hbm2ddl.auto">create-drop</prop>
            </props>
        </property>
    </bean> 
```

根异常堆栈跟踪：

```
org.hsqldb.HsqlException: user lacks privilege or object not found: USER
    org.hsqldb.error.Error.error(Unknown Source)
    org.hsqldb.error.Error.error(Unknown Source)
    org.hsqldb.SchemaManager.getTable(Unknown Source)
    org.hsqldb.ParserDQL.readTableName(Unknown Source)
    org.hsqldb.ParserDQL.readSimpleRangeVariable(Unknown Source)
    org.hsqldb.ParserDML.compileInsertStatement(Unknown Source)
    org.hsqldb.ParserCommand.compilePart(Unknown Source)
    org.hsqldb.ParserCommand.compileStatement(Unknown Source)
    org.hsqldb.Session.compileStatement(Unknown Source)
    org.hsqldb.StatementManager.compile(Unknown Source)
    org.hsqldb.Session.execute(Unknown Source)
    org.hsqldb.jdbc.JDBCPreparedStatement.<init>(Unknown Source)
    org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source)
    org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:524)
    org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:116)
    org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.prepare(IdentityGenerator.java:90)
    org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:54)
    org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2327)
    org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2834)
    org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
    org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
    org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:320)
    org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:203)
    org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:129)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
    org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
    org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:713)
    org.hibernate.impl.SessionImpl.save(SessionImpl.java:701)
    org.hibernate.impl.SessionImpl.save(SessionImpl.java:697)
    org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:686)
    org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:1)
    org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
    org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:683)
    prv.bladositto.autostop.persistance.hibernate.UserServiceImpl.save(UserServiceImpl.java:23)
    prv.bladositto.autostop.controllers.UsersController.createUser(UsersController.java:40)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:800)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:757)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:74)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

**编辑**

我正在将我的应用程序部署到 JBoss AS 7。它位于 Ubuntu 上的 /usr/share/JBoss..7/ 上。也许这很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:55:29.473

USER 是一个特殊的函数名称，不应用于您的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:23:10.090

我解决了这个问题。Hibernate 中的属性应以“hibernate.”为前缀。以下更改成功了：

```
<property name="hibernateProperties">
  <props>
     <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
     <prop key="hibernate.show_sql">true</prop>
     <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
  </props>
</property> 
```

# groovy - groovy 使用属性更改 bean 变量

> ID：12073566
> 
> 赞同：0
> 
> 时间：2012-08-22T12:50:44.863
> 
> 标签：groovy

有没有办法在 groovy 中执行以下操作：

```
class Person{
    def name, surname
}
public void aMethod(anoherBean){
    def bean = retrieveMyBean()
    p.properties = anoherBean.properties
} 
```

属性*属性*是最终的，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:13:59.673

如果您没有任何特殊原因，则只需使用命名参数

```
def p = new Person(name: 'John', surname: 'Lennon') 
```

* * *

问题更新后

```
static copyProperties(from, to) {
    from.properties.each { key, value ->
        if (to.hasProperty(key) && !(key in ['class', 'metaClass']))
            to[key] = value
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:17:00.063

`properties`是虚拟财产；你必须打电话给个别的二传手。试试这个：

```
def values = [name: 'John', surname: 'Lennon']
for( def entry : values.entries() ) {
    p.setProperty( entry.getKey(), entry.getValue() );
} 
```

或者，使用 MOP：

```
Object.class.putAllProperties = { values -> 
    for( def entry : values.entries() ) {
        p.setProperty( entry.getKey(), entry.getValue() );
    }
}

Person p = new Person();
p.putAllProperties [name: 'John', surname: 'Lennon'] 
```

**[编辑]**要实现您想要的，您必须遍历属性。[这篇博客文章](https://lbroudoux.wordpress.com/2009/05/04/copying-groovy-object-properties-back-and-forth/)描述了如何做到这一点：

```
def copyProperties(def source, def target){
   target.metaClass.properties.each{
      if (source.metaClass.hasProperty(source, it.name) && it.name != 'metaClass' && it.name != 'class')
         it.setProperty(target, source.metaClass.getProperty(source, it.name))
   }
} 
```

# mercurial - 在分支提交中断后，Mercurial 中的两个默认分支被卡住了

> ID：12073576
> 
> 赞同：11
> 
> 时间：2012-08-22T12:51:12.053
> 
> 标签：mercurial, branching-and-merging

我在工作中遇到了困难（如下面的简化草图所示）。在创建分支期间，由于某种原因，默认值作为分支的父级卡住了，但仍然单独保留一个默认分支（这是我们未来使用的默认分支）。这给我们留下了两个默认分支。

有人误解了如何在分支之前提交更改，所以我们最终将在 branch1 中所做的更改合并到 branch2 中。

我一直在研究[Mercurial：权威指南](http://hgbook.red-bean.com/)，看看这是否是一个可解决的问题，但找不到有关退出或关闭的哪些命令会有所帮助。最简单的方法是如果有可能以某种方式重命名剩余的默认分支。

解决此问题的最佳和/或最简单的方法是什么？

我正在准备将开发分支合并到正确的默认分支中，并希望在我开始任何重大合并之前解决这个令人头疼的问题，这可能会使将来修复这个问题变得更加困难。

![分支问题](../Images/d3ba249441e6d882b42c77c49507f50c.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T13:43:29.060

请记住，分支名称只是提交上的标签——您的图表并没有真正损坏。分支名称不会影响合并时发生的情况，只有文件内容在合并时很重要。

话虽如此，您可以关闭额外的头`default`，下面的一个`branch1`：

```
$ hg update "min(heads(branch(default)))"
$ hg commit --close-branch -m "closing this head" 
```

这将在您的图表中留下一个悬空的关闭变更集，这很好。关闭的变更集将隐藏头部，`hg heads`并且`hg merge`不再建议与此头部合并的命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T03:45:14.817

老问题，但我虽然这可能对某人有用。

..这发生在单个分支发散时，通常是当有人执行`hg push -f`而不是拉取和更新时。在您的情况下，强制头部恰好也在另一个分支上，但这也可能发生在单个分支上。我的解决方案是让它静置直到分支合并——至少，如果有计划在某个时候合并它们。在我看来，这个解决方案比关闭错误的头部更干净。

但是，这样做`hg update default`会将您带到具有“默认”名称的最新提交。尽管我认为这个想法在您的情况下是正确的，但这是因为您真正想要的“默认”是具有“默认”分支名称的最新提交，所以应该没有问题。但是，如果错误的头部是较新的，`hg update default`则会将人们带到错误的头部，这可能会很混乱。

无论哪种情况，这都可以解决问题：

```
hg update <revision number of correct 'default' head>
hg merge <branch the erroneous 'default' head is on> 
```

所以在这种情况下，`hg update default`会更新到错误的头部：

```
1-2(default)
 \
  3(default)-4(branch1) 
```

你需要做：

```
hg update 2
hg merge branch1
# results in this graph:
# 1-2---5(default)
#  \   /
#   3-4(branch1) 
```

而在下面，`hg update default`无论如何都会更新为您真正想要的：

```
1-2------------5(default)
 \
  3(default)-4(branch1) 
```

..你可以忽略错误的默认值，因为它不会影响任何人。..那么，一旦有人做了`hg update default; hg merge branch1`，错误的头就会默默地消失，因为那时它是错误的“默认”的祖先。..这会导致这样的事情：

```
1-2-5----------11(default)
 \            /
  3-4-[...]-10(branch1) 
```

..你也可以在你想要的默认值上做一个无用的提交，然后它将是最新的，这将是人们在他们这样做时得到的`hg update default`，但我真的不喜欢在历史上出现垃圾提交。

# database - 如何从复选框选择中返回数据库字段？

> ID：12073577
> 
> 赞同：1
> 
> 时间：2012-08-22T12:51:11.433
> 
> 标签：database, visual-studio-2010, checkbox

下面的代码返回给定表（“Employee”）的字段，但我需要返回给定数据库中所有表的字段，这可能吗？我的假设是一个 For 循环，它循环数据库中的表并打印相应的字段，但我的努力似乎是徒劳的

```
Public Sub getDbFields()

    Dim i As Integer
    Dim dbcon As New System.Data.OleDb.OleDbConnection("PROVIDER=Microsoft.Jet.OLEDB.4.0;Data Source = " & dblocation & _
                                               "\" & dbname)
    Try

        dbcon.Open()
        dbDt = dbcon.GetOleDbSchemaTable(OleDb.OleDbSchemaGuid.Columns, New Object() _
                                         {Nothing, Nothing, "Employee", Nothing})

        For i = 0 To dbDt.Rows.Count - 1
            'compile lbtables with a list of available tables from the database
            newLine()
            frmMain.lstTables.Items.Add(dbDt.Rows(i)!COLUMN_NAME.ToString())
        Next

    Catch ex As Exception
        MessageBox.Show(ex.Message.ToString(), "Data Load Error", MessageBoxButtons.OK,
            MessageBoxIcon.Exclamation)
    End Try

End Sub 
```

该例程将从选择一个复选框中触发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:05:58.383

这将返回数据库中的所有列

```
Using con = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;" + 
                          "Data Source=" + dblocation + "\" + dbname)
    con.Open()
    Dim schema as DataTable = con.GetSchema("COLUMNS")
    Dim dr as DataRow
    For Each dr in schema.Rows
        Dim tablename as string = dr("TABLE_NAME").ToString()    
        if Not tablename.StartsWith("MSys") then
            Console.WriteLine(dr("TABLE_NAME").ToString() + " " + dr("COLUMN_NAME").ToString())
        End if        
    Next    
End Using 
```

请注意，在 vb.net 中不允许使用 bang (!) 语法。
如果您更改，您的代码也可以工作

```
 dbDt = dbcon.GetOleDbSchemaTable(OleDb.OleDbSchemaGuid.Columns, New Object() _ 
                                          {Nothing, Nothing, Nothing, Nothing}) 
```

这条线

```
frmMain.lstTables.Items.Add(dbDt.Rows(i)("COLUMN_NAME").ToString()) 
```

# java - 从 java 代码运行 jar 程序时，jar 程序的 gui 在直接输入时冻结

> ID：12073581
> 
> 赞同：2
> 
> 时间：2012-08-22T12:51:18.313
> 
> 标签：java, runtime.exec

为了理解这种情况，我尝试描述我想要实现的目标：我想创建一个 java 程序来启动另一个 java 程序（一个 minecraft 服务器），监控它的输出，并相应地向它的输入发送命令。

我能够从我的代码中启动 jar 程序，并且我还能够为它编写一个输出侦听器，目前仅将 jar 程序的输出打印到控制台。

我从我的代码运行的 jar 程序有一个带有文本输出面板的 gui，它在其中显示消息，以及一个输入字段 (textarea)，我可以在其中给出命令。我的问题是，当我启动代码并启动程序时，一切正常，直到我想直接写入程序的输入字段。如果我在输入字段中输入任何字母，gui 就会冻结。

我错了什么？

这是我的代码：

```
public static void main(String[] args) {
    try {
        System.out.println("Starting.");
        Runtime rt = Runtime.getRuntime();
        Process proc = rt.exec("java -jar \"D:\\Program Files\\mc\\minecraft_server.jar\"");
        // output both stdout and stderr data from proc to stdout of this process
        StreamGobbler errorGobbler = new StreamGobbler(proc.getErrorStream());
        StreamGobbler outputGobbler = new StreamGobbler(proc.getInputStream());
        errorGobbler.start();
        outputGobbler.start();

    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
} 
```

输出阅读器：

```
public class StreamGobbler extends Thread {
    InputStream is;

    // reads everything from is until empty.
    StreamGobbler(InputStream is) {
        this.is = is;
    }

    public void run() {
        try {
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            String line = null;
            while ((line = br.readLine()) != null)
                System.out.println(line);
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
} 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:52:27.570

首先，不要使用stream gobbler，而是继承进程的io：

```
final ProcessBuilder p1 = new ProcessBuilder(command).inheritIO();
p1.start(); 
```

如果您不关心标准输入/输出，请使用它来将所有内容定向到 NUL（/dev/null 的 Windows 版本）：

```
p1.redirectInput(Redirect.from(new File("NUL"))).redirectOutput(Redirect.to(new File("NUL")))
                        .redirectError(Redirect.to(new File("NUL"))); 
```

程序是否仍然崩溃？

# iphone - 由于 CIDetector 或 CIImage 导致 UIImage 倒置（转换问题）

> ID：12073583
> 
> 赞同：1
> 
> 时间：2012-08-22T12:51:24.130
> 
> 标签：iphone, ios, uiimagepickercontroller, core-image, face-detection

我正在做的是通过 CIDetector 检测面部，我的图像来自 UIImagePickerController（从后置摄像头捕获图像）。我可以检测到人脸..但我的问题是我的人脸图像倒置（从上到下）。这是我的[**代码**](http://codeviewer.org/view/code:2912)。

**我的问题**

![在此处输入图像描述](../Images/776111247d67851ab1760ab77c65414b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:57:41.250

在第 83 行和第 88 行之间。您正在翻转视图而不是将其翻转回来，因为您已将代码注释掉。

**编辑添加**

我看到您正在使用来自[http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/的示例项目](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)

您正在翻转图像视图，但您并没有翻转窗口来解释这种翻转。

**编辑再次添加**

好的 - 多看一下您正在使用的教程和示例代码，这是您不想要的窗口翻转。但是您需要以不同的方式编写代码。

[http://www.bobmccune.com/2012/03/22/ios-5-face-detection-with-core-image/](http://www.bobmccune.com/2012/03/22/ios-5-face-detection-with-core-image/)提供了一个更好的示例，该示例使用显示的图像`drawInRect:`和翻译的上下文以绘制面部特征。

# postgresql - pg_dump：[archiver (db)] 与数据库“testdb”的连接失败：致命：用户“katie”的密码验证失败

> ID：12073585
> 
> 赞同：1
> 
> 时间：2012-08-22T12:51:36.877
> 
> 标签：postgresql, pg-dump

1.  我登录到 PostgreSQL：`psql -U postgres`
2.  创建'testdb'：`CREATE DATABASE testdb;`
3.  登出: `\q`,
4.  登录到'testdb'：`psql -d testdb -U postgres`
5.  在“testdb”中创建了一些表和序列
6.  做过：`pg_dump: pg_dump testdb --no-owner`

得到了这个：

```
pg_dump: [archiver (db)] connection to database "testdb" failed: 
FATAL:  password authentication failed for user "katie" 
```

我的 pg_hba.conf 文件：

```
# PostgreSQL Client Authentication Configuration File
# ===================================================
#
# Refer to the "Client Authentication" section in the PostgreSQL
# documentation for a complete description of this file.  A short
# synopsis follows.
#
# This file controls: which hosts are allowed to connect, how clients
# are authenticated, which PostgreSQL user names they can use, which
# databases they can access.  Records take one of these forms:
#
# local      DATABASE  USER  METHOD  [OPTIONS]
# host       DATABASE  USER  ADDRESS  METHOD  [OPTIONS]
# hostssl    DATABASE  USER  ADDRESS  METHOD  [OPTIONS]
# hostnossl  DATABASE  USER  ADDRESS  METHOD  [OPTIONS]
#
# (The uppercase items must be replaced by actual values.)
#
# The first field is the connection type: "local" is a Unix-domain
# socket, "host" is either a plain or SSL-encrypted TCP/IP socket,
# "hostssl" is an SSL-encrypted TCP/IP socket, and "hostnossl" is a
# plain TCP/IP socket.
#
# DATABASE can be "all", "sameuser", "samerole", "replication", a
# database name, or a comma-separated list thereof. The "all"
# keyword does not match "replication". Access to replication
# must be enabled in a separate record (see example below).
#
# USER can be "all", a user name, a group name prefixed with "+", or a
# comma-separated list thereof.  In both the DATABASE and USER fields
# you can also write a file name prefixed with "@" to include names
# from a separate file.
#
# ADDRESS specifies the set of hosts the record matches.  It can be a
# host name, or it is made up of an IP address and a CIDR mask that is
# an integer (between 0 and 32 (IPv4) or 128 (IPv6) inclusive) that
# specifies the number of significant bits in the mask.  A host name
# that starts with a dot (.) matches a suffix of the actual host name.
# Alternatively, you can write an IP address and netmask in separate
# columns to specify the set of hosts.  Instead of a CIDR-address, you
# can write "samehost" to match any of the server's own IP addresses,
# or "samenet" to match any address in any subnet that the server is
# directly connected to.
#
# METHOD can be "trust", "reject", "md5", "password", "gss", "sspi",
# "krb5", "ident", "peer", "pam", "ldap", "radius" or "cert".  Note that
# "password" sends passwords in clear text; "md5" is preferred since
# it sends encrypted passwords.
#
# OPTIONS are a set of options for the authentication in the format
# NAME=VALUE.  The available options depend on the different
# authentication methods -- refer to the "Client Authentication"
# section in the documentation for a list of which options are
# available for which authentication methods.
#
# Database and user names containing spaces, commas, quotes and other
# special characters must be quoted.  Quoting one of the keywords
# "all", "sameuser", "samerole" or "replication" makes the name lose
# its special character, and just match a database or username with
# that name.
#
# This file is read on server startup and when the postmaster receives
# a SIGHUP signal.  If you edit the file on a running system, you have
# to SIGHUP the postmaster for the changes to take effect.  You can
# use "pg_ctl reload" to do that.

# Put your actual configuration here
# ----------------------------------
#
# If you want to allow non-local connections, you need to add more
# "host" records.  In that case you will also need to make PostgreSQL
# listen on a non-local interface via the listen_addresses
# configuration parameter, or via the -i or -h command line switches.

# DO NOT DISABLE!
# If you change this first entry you will need to make sure that the
# database superuser can access the database using some other method.
# Noninteractive access to all databases is required during automatic
# maintenance (custom daily cronjobs, replication, and similar tasks).
#
# Database administrative login by Unix domain socket
local   all             postgres                                password

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     md5
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
#host    replication     postgres        127.0.0.1/32            md5
#host    replication     postgres        ::1/128                 md5 
```

如何解决我能够做到的`pg_dump`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T01:44:41.727

当用户存在且密码认证失败时会出现此错误。这可能在某一时刻起作用但在另一时刻不起作用的原因可能是密码输入错误、密码已更改或 pg_hba.conf 中的密码错误。一般来说，通过按顺序检查这些原因来解决问题。

如果要在同一台计算机上本地运行它们，您可以选择将特定用户的本地连接设置为 ident（9.1 或更低版本）或 peer（9.2 或更高版本），然后使用相同的用户名。这将使用操作系统进程所有者作为身份验证检查并绕过密码身份验证的需要。

对 pg_hba.conf 的另一条评论是，使用“密码”身份验证通常是一种不好的做法。将其更改为 ident（或 peer，如果 9.2 或更高版本）或 md5。密码选项已过时且已弃用，它不必要地通过套接字以明文形式发送密码。

# ruby-on-rails - Rake 测试 - 创建 YAML 错误，我该如何解决？

> ID：12073587
> 
> 赞同：5
> 
> 时间：2012-08-22T12:51:44.327
> 
> 标签：ruby-on-rails, yaml, rake-test

运行 Rake 测试时，我收到一些关于 YAML 文件的错误。关于如何解决它的任何想法？

> 运行测试：EEEEEEEE
> 
> 在 0.070970 秒、112.7237 次测试/秒、0.0000 次断言/秒内完成测试。
> 
> 1) 错误：test_should_create_product(ProductsControllerTest): ActiveRecord::Fixture::FormatError: 解析 /Users/ka/src/ruby-test/depot/test/fixtures/products.yml 时出现 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看 yaml.org/faq.html 确切的错误是：Psych::SyntaxError: (): found character that cannot start any token while scanning for the next token at line 5 column 1 /Users/ka/.rvm /gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:43:in rows' /Users/ka/.rvm/gems/ruby-1.9.3- p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:29:ineach' /Users/ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/ lib/active_record/fixtures.rb:670：在 read_fixture_files'/Users/ka/ 中的块（2 级）中。
> 
> 2) 错误：test_should_destroy_product(ProductsControllerTest): ActiveRecord::Fixture::FormatError: 解析 /Users/ka/src/ruby-test/depot/test/fixtures/products.yml 时出现 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看://www.yaml.org/faq.html 确切的错误是：Psych::SyntaxError: (): found character that cannot start any token while scanning for the next token at line 5 column 1 /Users /ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:43:in rows' /Users/ka/.rvm/gems/ruby -1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:29:ineach' /Users/ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord -3.2.8/lib/active_record/fixtures.rb:670：在 read_fixture_files'/Users/ka/ 中的块（2 级）中。
> 
> 3) 错误：test_should_get_edit(ProductsControllerTest): ActiveRecord::Fixture::FormatError: 解析 /Users/ka/src/ruby-test/depot/test/fixtures/products.yml 时出现 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看://www.yaml.org/faq.html 确切的错误是：Psych::SyntaxError: (): found character that cannot start any token while scanning for the next token at line 5 column 1 /Users /ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:43:in rows' /Users/ka/.rvm/gems/ruby -1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:29:ineach' /Users/ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord -3.2.8/lib/active_record/fixtures.rb:670：在 read_fixture_files'/Users/ka/ 中的块（2 级）中。
> 
> 4) 错误：test_should_get_index(ProductsControllerTest): ActiveRecord::Fixture::FormatError: 解析 /Users/ka/src/ruby-test/depot/test/fixtures/products.yml 时出现 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看://www.yaml.org/faq.html 确切的错误是：Psych::SyntaxError: (): found character that cannot start any token while scanning for the next token at line 5 column 1 /Users /ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:43:in rows' /Users/ka/.rvm/gems/ruby -1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:29:ineach' /Users/ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord -3.2.8/lib/active_record/fixtures.rb:670：在 read_fixture_files'/Users/ka/ 中的块（2 级）中。
> 
> 5) 错误：test_should_get_new(ProductsControllerTest): ActiveRecord::Fixture::FormatError: 解析 /Users/ka/src/ruby-test/depot/test/fixtures/products.yml 时出现 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看://www.yaml.org/faq.html 确切的错误是：Psych::SyntaxError: (): found character that cannot start any token while scanning for the next token at line 5 column 1 /Users /ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:43:in rows' /Users/ka/.rvm/gems/ruby -1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:29:ineach' /Users/ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord -3.2.8/lib/active_record/fixtures.rb:670：在 read_fixture_files'/Users/ka/ 中的块（2 级）中。
> 
> 6) 错误：test_should_show_product(ProductsControllerTest): ActiveRecord::Fixture::FormatError: 解析 /Users/ka/src/ruby-test/depot/test/fixtures/products.yml 时出现 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看://www.yaml.org/faq.html 确切的错误是：Psych::SyntaxError: (): found character that cannot start any token while scanning for the next token at line 5 column 1 /Users /ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:43:in rows' /Users/ka/.rvm/gems/ruby -1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:29:ineach' /Users/ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord -3.2.8/lib/active_record/fixtures.rb:670：在 read_fixture_files'/Users/ka/ 中的块（2 级）中。
> 
> 7) 错误：test_should_update_product(ProductsControllerTest): ActiveRecord::Fixture::FormatError: 解析 /Users/ka/src/ruby-test/depot/test/fixtures/products.yml 时出现 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看://www.yaml.org/faq.html 确切的错误是：Psych::SyntaxError: (): found character that cannot start any token while scanning for the next token at line 5 column 1 /Users /ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:43:in rows' /Users/ka/.rvm/gems/ruby -1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:29:ineach' /Users/ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord -3.2.8/lib/active_record/fixtures.rb:670：在 read_fixture_files'/Users/ka/ 中的块（2 级）中。
> 
> 8) 错误：test_should_get_index(StoreControllerTest): ActiveRecord::Fixture::FormatError: 解析 /Users/ka/src/ruby-test/depot/test/fixtures/products.yml 时出现 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看://www.yaml.org/faq.html 确切的错误是：Psych::SyntaxError: (): found character that cannot start any token while scanning for the next token at line 5 column 1 /Users /ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:43:in rows' /Users/ka/.rvm/gems/ruby -1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/fixtures/file.rb:29:ineach' /Users/ka/.rvm/gems/ruby-1.9.3-p194/gems/activerecord -3.2.8/lib/active_record/fixtures.rb:670：在 read_fixture_files'/Users/ka/ 中的块（2 级）中。
> 
> 8 个测试，0 个断言，0 个失败，8 个错误，0 个跳过 Errors running test:units! # 错误运行测试：功能！#

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T12:31:57.043

打开您的`products.yml`文件，然后看到单词之前和之后没有多余的空格都在一行中：

```
 title: MyString
description: MyText
image_url: MyString
price: 9.99 
```

然后它给出错误“标题前没有空格”，它必须是一个：

```
title: MyString
description: MyText
image_url: MyString
price: 9.99 
```

# iphone - 如何调用iCarte SDK方法扫描RFID

> ID：12073588
> 
> 赞同：4
> 
> 时间：2012-08-22T12:51:55.667
> 
> 标签：iphone, objective-c, ios, nfc

我有用于读取 RFID 标签值的 iCarte Sdk，但我不知道如何从该 sdk 开始。我已经根据 iCarte Sdk 的要求设置了我的项目，并且我能够使用 iCarte Sdk 中提供的一些方法获取硬件详细信息。但我不知道如何开始扫描 RFID 标签。任何帮助，将不胜感激。提前致谢。

# sql - 没有子选择的 1 个 sql 查询中的多个计数语句

> ID：12073592
> 
> 赞同：0
> 
> 时间：2012-08-22T12:52:17.780
> 
> 标签：sql, join, count, group-by, multiple-tables

**是否可以在不使用 subselect 的**情况下执行此查询？

### 表

*   用户：
*   ID
*   姓名

### value_type_1

*   ID
*   用户身份
*   价值

### value_type_2

*   ID
*   用户身份
*   价值

我想要一个返回的 sql 查询：

```
编号 | 姓名 | 计数（value_type_1）| 计数（value_type_2）
1 富 5 2
2 巴 3 7
n等.. xy

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:55:51.437

是的。

您可以使用连接

```
select user.id, user.name, count(distinct value_type_1.id),count(distinct value_type_2.id)
from user
   left join value_type_1 on user.id = value_type_1.user_id
   left join value_type_2 on user.id = value_type_2.user_id
group by user.id, user.name 
```

# java - jmock，每次调用时返回新对象

> ID：12073594
> 
> 赞同：3
> 
> 时间：2012-08-22T12:52:25.280
> 
> 标签：java, jmock

我正在设置一个模拟对象，每次我在其上调用方法 f() 时都应该返回一个新的业务对象。如果我简单地说 returnValue(new BusinessObj())，它会在每次调用时返回相同的引用。如果我不知道 f() 会有多少次调用，即我不能使用 onConsecutiveCalls，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:43:40.783

您需要声明一个`CustomAction`实例来代替标准`returnValue`子句：

```
allowing(mockedObject).f();
will(new CustomAction("Returns new BusinessObj instance") {
  @Override
  public Object invoke(Invocation invocation) throws Throwable {
    return new BusinessObj();
  }
}); 
```

下面是一个独立的单元测试，它证明了这一点：

```
import org.jmock.Expectations;
import org.jmock.Mockery;
import org.jmock.api.Invocation;
import org.jmock.integration.junit4.JMock;
import org.jmock.integration.junit4.JUnit4Mockery;
import org.jmock.lib.action.CustomAction;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(JMock.class)
public class TestClass {

  Mockery context = new JUnit4Mockery();

  @Test
  public void testMethod() {
    final Foo foo = context.mock(Foo.class);

    context.checking(new Expectations() {
      {
        allowing(foo).f();
        will(new CustomAction("Returns new BusinessObj instance") {
          @Override
          public Object invoke(Invocation invocation) throws Throwable {
            return new BusinessObj();
          }
        });
      }
    });

    BusinessObj obj1 = foo.f();
    BusinessObj obj2 = foo.f();

    Assert.assertNotNull(obj1);
    Assert.assertNotNull(obj2);
    Assert.assertNotSame(obj1, obj2);
  }

  private interface Foo {
    BusinessObj f();
  }

  private static class BusinessObj {
  }
} 
```

# c# - 使用 IMultiValueConverter 绑定到 DataGridColumn 会遇到问题，而使用类似的 IValueConverter 不会

> ID：12073597
> 
> 赞同：1
> 
> 时间：2012-08-22T12:52:27.127
> 
> 标签：c#, .net, wpf, datagrid, imultivalueconverter

我有 2 个 Datagrid 复选框列，每个列都有一个绑定。

```
 <DataGrid ItemsSource="{Binding}" Name="DataGrid1" DataContext="{Binding Source={StaticResource TableViewSource}}">
        <DataGridCheckBoxColumn Header="Required" Width="50" MinWidth="50">
            <DataGridCheckBoxColumn.Binding>
                <Binding Path="Required" Converter="{StaticResource DateTimeToBooleanConverter}"/>
            </DataGridCheckBoxColumn.Binding>
        </DataGridCheckBoxColumn>
        <DataGridCheckBoxColumn Header="Required Test" Width="60" MinWidth="60">
            <DataGridCheckBoxColumn.Binding>
                <MultiBinding Converter="{StaticResource DateTimeToBooleanMultiverter}">
                    <Binding Path="Required_Date" />
                    <Binding Path="Required_Time" />
                </MultiBinding>
            </DataGridCheckBoxColumn.Binding>
        </DataGridCheckBoxColumn>
    </DataGrid> 
```

绑定只是将选中框的日期/时间写入 db 字段`"Required"`，未选中时为空。

在第一个复选框中，使用以下转换器一切正常：

```
public class DateTimeToBooleanConverter : IValueConverter
{

public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    if (value != null) {
        return true;
    } else {
        return false;
    }
}

public object ConvertBack(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    if (value == true) {
        return System.DateTime.Now.Date;
    } else {
        return null;
    }
}
} 
```

在最后一列中，我想将日期和时间保存到 2 个不同的字段`"Required_Date"`和`"Required_Time" (String)`. 创建以下内容`IMultiConverter`来处理它：

```
public class DateTimeToBooleanMultiverter : IMultiValueConverter
{

public object Convert(object[] values, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    if (values[0] != null) {
        return true;
    } else {
        return false;
    }
}

public object[] ConvertBack(object value, System.Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
{
    if (value != null) {
        if (value == true) {
            return {
                System.DateTime.Now.Date,
                System.DateTime.Now.TimeOfDay.ToString()
            };
        }
    }
    return {
        null,
        null
    };
}
} 
```

在初始加载时，该列看起来不错。该列已检查所有适当的单元格。但是，当检查值/未选中时，我会收到以下绑定错误。

```
System.Windows.Data Error: 5 : Value produced by BindingExpression is not valid for target property.; Value='True' MultiBindingExpression:target element is 'DataGridCell' (Name=''); target property is 'CellContent' (type 'String') 
```

此外，当我取消选中一个单元格时，它并没有正确取消选中，并且我通过转换器中的一些断点注意到值的出现`DependencyProperty.Unset`（可能是由于绑定警告）。

## (9-30-12)

我在 codeplex 评论中发现了一个更有希望的线索：

> “MultiBindings 不起作用的原因是 DataGridHelper.UpdateSource 使用 GetBindingExpression 而不是 GetBindingExpressionBase。如果更改此设置，则 multi 和优先级绑定应该可以工作。”

我试图将更新设置为`Explicit`并创建一个`DataGrid_EndCellEdit`调用`BindingBaseExpression`更新的事件，但我认为 DataGridColumn 忽略了更新选项。

## (10-12-12)

仍然没有运气，我尝试使用`BindingBaseExpression`无济于事。显然`IMultiValueCOnverter`绑定正在做一些奇怪的事情。

# asp.net-mvc-3 - 如何将 IEnumerable 对象或数据从视图传递到控制器？

> ID：12073602
> 
> 赞同：2
> 
> 时间：2012-08-22T12:52:35.873
> 
> 标签：asp.net-mvc-3, razor, radiobuttonfor

我创建了一个强类型视图。我想将 IEnumerable 对象或数据从视图传递到控制器。以下是我的**模型**、**控制器**、**视图**

我的**模型：**

```
public class UserDetailsClass
{
    public static FeedbackDatabaseDataContext context = new FeedbackDatabaseDataContext(); 
    public class Tablefields
    {
        [Key]
        public  int ID { get; set; }

        [Required(ErrorMessage = "Email is required")]            
        public  string EmailID { get; set; }

        [Required(ErrorMessage="Password is required")]
        public string Password { get; set; }

        [Required(ErrorMessage = "First Name is required")] 
        public  string FirstName { get; set; }

        [Required(ErrorMessage = "Last Name is required")] 
        public string  LastName { get; set; }
    }
    public static List<UserDetails> getalluser()
    {
        var lst = (from r in context.UserDetails select r);
        return lst.ToList();        
    }
 } 
```

我的**控制器**

```
 public ActionResult Test()
    {

        IList<UserDetailsClass.Tablefields> viewmodel = new List<UserDetailsClass.Tablefields>();
        var q = UserDetailsClass.getalluser().ToList();

        foreach (SQLOperation.Models.UserDetails item in q)
        {
            UserDetailsClass.Tablefields viewItem = new UserDetailsClass.Tablefields();

            viewItem.EmailID = item.Email;
            viewItem.FirstName = item.FirstName;
            viewItem.LastName = item.LastName;
            viewItem.Password = item.Password;

            viewmodel.Add(viewItem);
        }
        return View(viewmodel);
    }

    [HttpPost]
    public ActionResult Test(IEnumerable<UserDetailsClass.Tablefields> items)
    {
        return View();
    } 
```

我的**看法**：

```
@model  IEnumerable<SQLOperation.Models.UserDetailsClass.Tablefields>

@{
    ViewBag.Title = "Test";
 }

 <h2>Test</h2>

@using (Html.BeginForm())
{
<table>
<tr>
    <th>
        EmailID
    </th>
    <th>
        Password
    </th>
    <th>
        FirstName
    </th>
    <th>
        LastName
    </th>
    <th></th>
</tr>

@foreach (var item in Model)
{
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.EmailID)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Password)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.FirstName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.LastName)
    </td>
   </tr> 
   }
</table>
  <input  type="submit" value="submit" />     
} 
```

**我在items**中没有得到任何值。当我在它上面设置断点时，它在**items中显示****NULL** 我完全对如何将值传递给**控制器**​​感到困惑。

 ****谢谢你，阿莫尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:20:47.033

而不是`@Html.DisplayFor`use `@Html.EditorFor`，这种方式数据绑定将在您的表单中发生。

此外，由于您使用的是集合，因此您需要迭代您的字段（简化示例）：

```
 @for (int row = 0; row < Model.Count; row++)
                    {
                            @Html.EditorFor(x => x[row].FirstName )

                    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T18:47:39.547

```
 @for (int i = 0; i < Model.length; i ++)
 {
 <tr>
    <td>
        @Html.DisplayFor(model => Model[i].EmailID)
    </td>
     <td>
        @Html.DisplayFor(model => Model[i].Password)
     </td>
     <td>
          @Html.DisplayFor(model => Model[i].FirstName)
     </td>
     <td>
        @Html.DisplayFor(model => Model[i].LastName)
     </td>
     </tr> 
   }
 </table>
      <input  type="submit" value="submit" />     
 } 
```****

# ios - 从情节提要中读取视图的帧大小

> ID：12073606
> 
> 赞同：0
> 
> 时间：2012-08-22T12:52:47.227
> 
> 标签：ios, ios5, storyboard

我正在开发使用情节提要的应用程序，该应用程序需要在旋转后以弹簧和支柱无法实现的方式重新定位元素。

将其设置为旋转时我想要的位置很容易，我只需在 willAnimateRotationToInterfaceOrientation:duration: 方法中设置视图的框架。

但是，如果我想返回纵向模式，我需要将所有元素从情节提要中出来时放在它们所在的位置。

那么，有没有办法以编程方式读取这些值是什么，或者我需要对它们进行硬编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:00:51.403

您可以将控件的值存储在一些变量中，用于横向纵向，并根据您在`willAnimateRotationToInterfaceOrientation`方法中的方向，相应地定位它们。

这里的这篇文章对你有帮助：[查看调整大小和旋转](http://www.techotopia.com/index.php/IOS_4_iPad_Rotation,_View_Resizing_and_Layout_Handling_%28Xcode_4%29)

AFAIK，一旦您更改方向，代码就不会存储控件位置的值。

# c++ - 快速输入输出功能

> ID：12073617
> 
> 赞同：5
> 
> 时间：2012-08-22T12:53:16.183
> 
> 标签：c++, c, coding-style, operating-system

```
#define getcx getchar_unlocked
inline void inp( int &n )//fast input function
{
   n=0;
   int ch=getcx();int sign=1;
   while( ch < '0' || ch > '9' ){if(ch=='-')sign=-1; ch=getcx();}

   while(  ch >= '0' && ch <= '9' )
           n = (n<<3)+(n<<1) + ch-'0', ch=getcx();
   n=n*sign;
} 
```

嗨，我一直在各种编码竞赛中使用上述功能进行输入，但一直无法理解为什么它很快。我知道逻辑，但不知道它的牢度的概念。例如，这条线在做什么 "#define getcx getchar_unlocked" 。另外我不知道任何快速输出功能所以也有任何快速输出功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:02:37.897

使用`#define`预处理器制作`getcx`函数的简写`[getchar_unlocked()](http://linux.die.net/man/3/getchar_unlocked)`，它是一个非锁定字符读取函数。

你参加了几场编码比赛，却不了解这个非常基本的 C 语言，这真是太棒了。

我在上面链接到的手册页提到`putc_unlocked()`了这听起来几乎是一样的东西，但用于输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:02:55.370

[`getchar_unlocked()`](http://linux.about.com/library/cmd/blcmdl3_getchar_unlocked.htm)是线程*不安全*版本*看起来*`getchar()`更快的原因是它不检查输入流上的任何锁，它应该从那里获取字符。因此，如果另一个线程锁定了输入流，则该线程[应该等到锁定计数为零](http://linux.about.com/library/cmd/blcmdl3_flockfile.htm)。但是这个函数并不关心它，从而破坏了线程之间的同步。`getchar_unlocked()`

 *但是，如果您确定缺少同步不会对您造成伤害，那么此功能可能会帮助您更快一些。

此外，它[建议](http://www.qnx.com/developers/docs/6.5.0/index.jsp?topic=/com.qnx.doc.neutrino_lib_ref/g/getchar_unlocked.html)您只有在调用线程使用[flockfile（）](http://linux.about.com/library/cmd/blcmdl3_flockfile.htm)（或`ftrylockfile()`）锁定标准输入时才能安全地使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T13:03:58.090

定义一个宏`getcx`，这样在读取时不会使用锁。如果您不担心线程安全，这不是线程安全的，但速度更快：

```
#define getcx getchar_unlocked 
```

定义`inp`为 inline 以便更快：

```
inline void inp( int &n )//fast input function 
{
   n=0;
   int ch=getcx();int sign=1;
   while( ch < '0' || ch > '9' ){if(ch=='-')sign=-1; ch=getcx();} 
```

将 n 乘以 10（使用 shift 计算 8*n+2*n，这可能更快）：

```
 while(  ch >= '0' && ch <= '9' )
           n = (n<<3)+(n<<1) + ch-'0', ch=getcx();
   n=n*sign;
} 
```

当线程安全不是问题时，您可以使用[putchar_unlocked来获得更快的输出功能。](http://pubs.opengroup.org/onlinepubs/7908799/xsh/putchar_unlocked.html)*

# email - 根据复选框选择发送电子邮件

> ID：12073619
> 
> 赞同：0
> 
> 时间：2012-08-22T12:53:27.007
> 
> 标签：email, checkbox, oracle-apex

I have created checkboxes in a report and I would like to be able to create a process that when multiple checkboxes are selected, an email is sent to the corresponding emails that was selected.

# javascript - 如何在这种情况下使用 jQuery 延迟对象

> ID：12073622
> 
> 赞同：2
> 
> 时间：2012-08-22T12:53:37.547
> 
> 标签：javascript, jquery, backbone.js, jasmine

> **可能重复：**
> [如何使用 jasmine 测试完成和失败的延迟对象](https://stackoverflow.com/questions/12080087/how-to-test-the-done-and-fail-deferred-object-by-using-jasmine)

这个问题与我之前的问题[Fake Ajax request](https://stackoverflow.com/questions/12070152/fake-ajax-request)相关。

而不是使用代码 (1)
我想返回 a `jQuery deferred object`，然后解决它或拒绝它（需要 2 次测试）来测试服务器何时接受它以及何时服务器拒绝它的期望。

任何想法如何通过使用 jQuery 以一种好的方式完成这项任务？

(1)

```
describe('When Submit button handler fired', function () {
    beforeEach(function () {
        var fakeFunction = function () {
            this.done = function () {return this; };
            this.fail = function () {return this; };
            return this;
        };
        spyOn(backendController, 'submitRequest1').andCallFake(fakeFunction);
        this.view = new MyView({
            el: $('<div><form><input type="submit" value="Submit" /></form></div>')
        });
        this.view.$el.find('form').submit();
    });
    it('backendController.submitRequest1 should be called', function () {
        expect(backendController.submitRequest1).toHaveBeenCalled();
    });
}); 
```

# bash - 管道文件名从 grep 到 head

> ID：12073623
> 
> 赞同：1
> 
> 时间：2012-08-22T12:53:38.990
> 
> 标签：bash, grep, head

我正在重建一个已损坏的数据库，其中部分重建涉及通过我编写的一个简单的 bash 脚本使用 grep 来搜索长度约为四个单词的字符串。这将返回一个文件路径，我想将其直接导入 head 以便我可以查看 grep 找到的文件的前几行。

但是，虽然 running`sh search2.sh "these are some search terms"`只返回一个文件路径，但 running`sh search2.sh "these are some search terms" | head`不会在该文件上运行 head。我注意到 grep 返回的文件路径不会转义空格，但我不知道这是否会成为 head 的问题。有什么想法我接下来应该尝试什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:56:35.990

试试这个：

```
head "$(search2.sh 'these are some search terms')" 
```

这应该解决未引用空格的问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:57:19.080

将一些数据导入 head 将导致仅显示前几行数据。你想要做的是调用 head 来显示找到的每个文件的开头。您可以通过管道将数据`xargs`调用到其中，并将`head`这些行作为其命令行参数进行调用：

```
sh search2.sh "these are some search terms" | xargs head 
```

如果要处理路径中的空格，则必须告诉 grep 仅返回文件名 ( `-l`) 和零分隔路径 ( `-Z`)，然后使用`-0`xargs 上的开关解析零分隔路径，例如搜索包含 " TEST”从当前目录递归调用`head`它们：

```
grep -lZR "TEST" . | xargs -0 head 
```

# java - 返回菜单从 web 视图返回到应用程序

> ID：12073624
> 
> 赞同：0
> 
> 时间：2012-08-22T12:53:41.447
> 
> 标签：java, android

我有一个 Webview，当我单击操作栏项目时会打开它。所以我有积分和帮助，当我点击返回时，它会关闭应用程序。现在，我希望它不要关闭应用程序，而是返回主屏幕（如应用程序已启动）这是我的主要活动

```
package com.CPTeam.VselCalc;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

import crakeron.vsel.calctest.R;

import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.webkit.WebView;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.Toast;

    public class VselcalculatortestActivity extends SherlockActivity {
private EditText freqbox1;
private EditText freqbox2;
private EditText freqbox3;
private EditText freqbox4;
private EditText freqbox5;
private EditText voltbox1;
private EditText voltbox2;
private EditText voltbox3;
private EditText voltbox4;
private EditText voltbox5;
private Spinner spinner;

public int freq1;
public int freq2;
public int freq3;
public int freq4;
public int freq5;
public int volt1;
public int volt2;
public int volt3;
public int volt4;
public int volt5;

public boolean stop=false;
public boolean freq4ornot=false;
public boolean freq5ornot=false;

//public String path;

/** Called when the activity is first created. */

private AutoUpdateApk aua;  
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    aua = new AutoUpdateApk(getApplicationContext()); 

    ActionBar actionBar = getSupportActionBar();
    //could be used to modify actionbar if needed

    ChangeLog cl = new ChangeLog(this);
    if (cl.firstRun())
        cl.getLogDialog().show();

    //cl.getFullLogDialog().show(); for testing 

    freqbox1 = (EditText) findViewById(R.id.freq1);
    freqbox2 = (EditText) findViewById(R.id.freq2);
    freqbox3 = (EditText) findViewById(R.id.freq3);
    freqbox4 = (EditText) findViewById(R.id.freq4);
    freqbox5 = (EditText) findViewById(R.id.freq5);
    voltbox1 = (EditText) findViewById(R.id.volt1);
    voltbox2 = (EditText) findViewById(R.id.volt2);
    voltbox3 = (EditText) findViewById(R.id.volt3);
    voltbox4 = (EditText) findViewById(R.id.volt4);
    voltbox5 = (EditText) findViewById(R.id.volt5);

    spinner = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
    R.array.spinner_choices, android.R.layout.simple_spinner_item);
    // Specify the layout to use when the list of choices appears
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    spinner.setAdapter(adapter);

    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){
                public void onItemSelected(AdapterView <?> adapter, View v, int pos, long lng) {
                    if (pos==0){
                        freq4ornot=false;
                        freq5ornot=false;
                        hide_row4();
                        hide_row5();
                        }
                    if (pos==1){
                        freq4ornot=true;
                        freq5ornot=false;
                        show_row4();
                        hide_row5();
                        }   
                    if (pos==2){
                        freq4ornot=true;
                        freq5ornot=true;
                        show_row4();
                        show_row5();
                        }
                }

                public void onNothingSelected(AdapterView <?> arg0) {
                    //nothing FTM
                }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.menu, menu);   
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.Changelog:
        new ChangeLog(this).getFullLogDialog().show();;
        return true;

    case R.id.Help:
        WebView webview = new WebView(this);
         setContentView(webview);
         webview.loadUrl("file:///android_res/raw/help.html");  
    return true;

    case R.id.Credits:
        WebView webview1 = new WebView(this);
     setContentView(webview1);
    webview1.loadUrl("file:///android_res/raw/credits.html"); 
        return true;

    }
    return true;
}

public void show_row4(){
    freqbox4.setVisibility(View.VISIBLE);
    findViewById(R.id.textView8).setVisibility(View.VISIBLE);
    findViewById(R.id.TextView03).setVisibility(View.VISIBLE);
    voltbox4.setVisibility(View.VISIBLE);
    Log.d("VselCalc", "Showing row 4");

}

public void hide_row4(){
    freqbox4.setVisibility(View.INVISIBLE);
    findViewById(R.id.textView8).setVisibility(View.INVISIBLE);
    findViewById(R.id.TextView03).setVisibility(View.INVISIBLE);
    voltbox4.setVisibility(View.INVISIBLE);
    Log.d("VselCalc", "Hiding row 4");
}
public void show_row5(){
    freqbox5.setVisibility(View.VISIBLE);
    findViewById(R.id.textView9).setVisibility(View.VISIBLE);
    findViewById(R.id.TextView04).setVisibility(View.VISIBLE);
    voltbox5.setVisibility(View.VISIBLE);
    Log.d("VselCalc", "Showing row 5");

}

public void hide_row5(){
    freqbox5.setVisibility(View.INVISIBLE);
    findViewById(R.id.textView9).setVisibility(View.INVISIBLE);
    findViewById(R.id.TextView04).setVisibility(View.INVISIBLE);
    voltbox5.setVisibility(View.INVISIBLE);
    Log.d("VselCalc", "Hiding row 5");
}

public void button_pressed(View button) { 
    voltbox1.setText("");
    voltbox2.setText("");
    voltbox3.setText("");
    voltbox4.setText("");
    voltbox5.setText("");
    stop=false;
    // 1\. Grab values in textboxes freq1,2,3 (and 4 and 5, depending on Spinner value?) and store their values
    grab_values(freq4ornot, freq5ornot);
    // 2\. Call calculate function with 3 (or 5) arguments
    calculate(freq1, freq2, freq3, freq4, freq4ornot, freq5ornot);
    // 3\. call function to display each result in correct box, if stop=true, then all boxes will be displayed empty
    display_volt(freq4ornot, freq5ornot);
    if(stop==true) error_empty();
}

public void grab_values(boolean freq4ornot, boolean freq5ornot){
    String freq1Value = freqbox1.getText().toString();//fetch what's in edittextbox and store it in a string
    if(freq1Value.length()!=0){
        freq1 = Integer.parseInt(freq1Value);//transform the string into an int and store it in our variable
        }
    if(freq1Value.length()==0){
        stop=true;
        freq1=0;
        }

    String freq2Value = freqbox2.getText().toString();
    if(freq2Value.length()!=0){
        freq2 = Integer.parseInt(freq2Value);//transform the string into an int and store it in our variable
        }
        if(freq2Value.length()==0){//check if user entered a value in box, otherwise causes crash
        stop=true;                      
        freq2=0;
        }

    String freq3Value = freqbox3.getText().toString();
    if(freq3Value.length()!=0){
        freq3 = Integer.parseInt(freq3Value);
        }
        if(freq3Value.length()==0){
            stop=true;                      
            freq3=0;
        }

    if (freq4ornot==true){
        String freq4Value = freqbox4.getText().toString();
        if(freq4Value.length()!=0){
            freq4 = Integer.parseInt(freq4Value);
            }
            if(freq4Value.length()==0){
                stop=true;                                  
                freq4=0;
            }
    if (freq5ornot==true){
        String freq5Value = freqbox5.getText().toString();
        if(freq5Value.length()!=0){
            freq5 = Integer.parseInt(freq5Value);
            }
            if(freq5Value.length()==0){
                stop=true;                                  
                freq5=0;
            }

    }}

}

public void calculate(int freq1,int freq2, int freq3, int freq4, boolean freq4ornot, boolean freq5ornot){
    volt1 = formula(freq1);
    volt2 = formula(freq2);
    volt3 = formula(freq3);
    if (freq4ornot==true){volt4 = formula(freq4);}
    if (freq5ornot==true){volt5 = formula(freq5);}
}

public int formula(int freq){
    int volt = ((freq/20)+2);
    return volt;
}

public void display_volt (boolean freq4ornot,boolean freq5ornot){
    if(stop==false){
        voltbox1.setText(String.valueOf(volt1));
        voltbox2.setText(String.valueOf(volt2));
        voltbox3.setText(String.valueOf(volt3));
        if(freq4ornot==true){voltbox4.setText(String.valueOf(volt4));}
        if(freq5ornot==true){voltbox5.setText(String.valueOf(volt5));}
    }

}

public void error_empty(){
    Toast.makeText(getApplicationContext(), "Please enter a frequency in all the boxes", Toast.LENGTH_LONG).show();
    /* For debug purposes
    Toast.makeText(getApplicationContext(),"stop bool is " + stop, Toast.LENGTH_LONG).show();*/
}

                    //AUTODETECTION FUNCTIONS!!!

private int detected_freq1;
private int detected_freq2;
private int detected_freq3;
private int detected_freq4;
private int detected_freq5;
private String path;

public void auto_detect(View button){
    stop=false;
    freq4ornot=false;
    freq5ornot=false;
    //get the path string (for multiple device support) that leads to the cpu_freq file
        {get_path();}       
    //read and process the file specified by path() and extract the frequencies         
        detect();       
    //fill the 4/5 freq boxes with the frequencies found
        write_freq(detected_freq1,detected_freq2,detected_freq3,detected_freq4,detected_freq5);

        if (stop==true){error_device();}
    }

    private void get_path(){
        //find path for frequencies available
        // for Defy (and milestone, and many other android devices) it is /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
        // for multiple devices support, probably store the paths in a table in the future          
        path="/sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies";

        //for testing, put a file called "Test" in the root directory of your phone to test behavior on 4/5 freqs
        //path="/Test";
    }

    private void detect(){
        String[] segs;
        FileReader fstream;
        long Read;

        try {fstream = new FileReader(path);
        Log.d("VselCalc_AutoD", "Opened '" + path + "' file correctly");
        } 
        catch (FileNotFoundException e) {               
            Toast.makeText(getApplicationContext(), "Could not read " + path, Toast.LENGTH_LONG).show();
            stop=true;
            return;
        }

        BufferedReader in = new BufferedReader(fstream, 500);
        String line;
        try {
            while ((line = in.readLine()) != null) {

                    Log.d("VselCalc_AutoD", "line read:"+  line);
                    segs = line.trim().split(" ");
                    Log.d("VselCalc_AutoD", "segs length: " + segs.length);

                    Read = Long.parseLong(segs[0]);
                    Log.d("VselCalc_AutoD", "Auto-Detect freq. Read1: " + Read);  
                    detected_freq1= (int) Read/1000;

                    Read = Long.parseLong(segs[1]);
                    Log.d("VselCalc_AutoD", "Auto-Detect freq. Read2: " + Read);
                    detected_freq2= (int) Read/1000;

                    Read = Long.parseLong(segs[2]);
                    Log.d("VselCalc_AutoD", "Auto-Detect freq. Read3: " + Read);
                    detected_freq3= (int) Read/1000;

                    hide_row4();
                    hide_row5();
                    spinner.setSelection(0);

                    if(segs.length>=4){
                    Read = Long.parseLong(segs[3]);
                    Log.d("VselCalc_AutoD", "Freq4 exists. Auto-Detect freq. Read4: " + Read);
                    detected_freq4= (int) Read/1000;
                    freq4ornot=true;
                    spinner.setSelection(1);
                    Log.d("VselCalc_AutoD", "freq4ornot changed to true after auto-detect");
                    Log.d("VselCalc_AutoD", "freq5 or not: " + freq5ornot);
                    show_row4();
                    hide_row5();
                    }

                    if(segs.length>=5){
                    Read = Long.parseLong(segs[4]);
                    Log.d("VselCalc_AutoD", "Freq5 exists. Auto-Detect freq. Read5: " + Read);
                    detected_freq5= (int) Read/1000;
                    freq5ornot=true;
                    spinner.setSelection(2);
                    Log.d("VselCalc_AutoD", "freq5ornot changed to true after auto-detect");
                    show_row4();
                    show_row5();
                    }

            }               
        } catch (IOException e) {
            Log.e("readfile", e.toString());
        }
        return ;
    }                       

    public void write_freq(int fr1, int fr2, int fr3, int fr4, int fr5 ){
        if(stop==false){
            freqbox1.setText(String.valueOf(fr1));
            freqbox2.setText(String.valueOf(fr2));
            freqbox3.setText(String.valueOf(fr3));
            if(freq4ornot==true){freqbox4.setText(String.valueOf(fr4));}
            if(freq5ornot==true){freqbox5.setText(String.valueOf(fr5));}
            Toast.makeText(getApplicationContext(), "Auto-Detection successful!", Toast.LENGTH_LONG).show();
        }           
    }

    public void error_device(){
        Toast.makeText(getApplicationContext(), "Function may not be supported on your device. Please contact the developers", Toast.LENGTH_LONG).show();
    } 
```

}

我没有将 webview 添加到 layout/main.xml，因为当我单击所需的操作栏项目时它会打开。

```
case R.id.Help:
    WebView webview = new WebView(this);
     setContentView(webview);
     webview.loadUrl("file:///android_res/raw/help.html");  
return true; 
```

目标 Android 版本为 4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:55:53.573

您应该`onBackPressed()`在您的活动类中覆盖。

```
public void onBackPressed () 
```

> 自：API 级别 5 当活动检测到用户按下返回键时调用。默认实现只是完成当前活动，但您可以覆盖它来做任何您想做的事情。

将此代码复制到您的活动中，并在其中做任何您想做的事情。

```
@Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
            //this is where you start your activity
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:55:40.530

当按下后退按钮时，当前意图/活动关闭并返回到堆栈中的前一个意图/活动。在这里，您正在创建一个 webview 并将其设置为您**当前活动**的内容。因此，当您按下返回时，活动将关闭，这反过来又会关闭应用程序，因为您之前没有任何意图/活动。而是覆盖 onBackPressed 并在其中将 setContentView 作为主要布局。

```
@Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
            setContentView(R.layout.main);
            //Do other functions you want to do here  
    } 
```

# javascript - 为什么我不能让 jQuery UI 1.8.20 对话框在 JSFiddle 中工作？

> ID：12073625
> 
> 赞同：0
> 
> 时间：2012-08-22T12:53:49.737
> 
> 标签：javascript, jquery-ui, jquery-ui-dialog, jsfiddle

我正在尝试在 JSFiddle中使用[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)`Uncaught TypeError: Cannot read property '3' of undefined`，但是由于 jQuery UI 内部深处的错误，打开对话框始终失败： .

我正在使用 jQuery UI 1.8.20，但我发现如果我切换到例如 1.7.1，它可以正常工作。我创建了一个应该演示问题的[小提琴](http://jsfiddle.net/aknuds1/L5BPz/5/)，只需点击按钮说“点击我！” 并且您应该在浏览器的控制台（例如，在 Chrome 的开发人员工具中）看到 jQuery UI 引发了 TypeError。

这里出了什么问题？我是否看到 jQuery UI 1.8.20 和 JSFiddle 之间存在一些不兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:59:11.517

jQuery 1.8.0 和 jQuery UI 1.8.20 之间不兼容。升级到 jQuery UI 1.8.22 解决了这个问题。

# c# - 如何在 C# 表单应用程序的构造函数中停止加载表单

> ID：12073627
> 
> 赞同：0
> 
> 时间：2012-08-22T12:53:52.570
> 
> 标签：c#

我有 2 个表格。我在Form1中获取连接到数据库的请求数据，将其发送到Form2，显示Form2并在连接到数据库后在Form2的构造函数中填写datagridview。在这里，我检查 sdr (SqlDataReader) 中是否有任何行。如果没有，我想做的是停止加载 Form2 并返回到 Form1。

我尝试**了 this.close()**但在执行 Form2 的构造函数时它不起作用。

```
if (!sdr.HasRows)
   {
      MessageBox.Show("No Data!", "Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning);
      this.Close();
   } 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:56:09.057

数据的关闭和一般加载不必在 内部完成`ctor`，`Form`而是在[Form.Load](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)事件内部完成。

例如：

```
//Form2.cs 

 public class Form2 : Form
 {
    ..... 

    public override OnLoad(EventArgs e)
    { 
       ......
       if (!sdr.HasRows)
       {
          MessageBox.Show("No Data!", "Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning);
          this.Close();
        }
    }   

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:58:12.017

为什么不在显示表格之前简单地检查一下？Form1 具有做出决定所需的数据。

```
if(!sdr.HasRows)
  //show error
else    
  //show form2. 
```

# ios - 我应该如何让用户在 iOS 中选择小时和分钟？

> ID：12073628
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:53:54.403
> 
> 标签：ios, user-interface, time

我有一个 iOS 应用程序，我希望用户能够以干净的方式选择/输入一定数量的小时和分钟。我试过使用 UIDatePicker，但提供的格式都不适合我的需要。我没有让他们选择未来的某个时间，只是直接的小时和分钟。我该怎么做？某种形式的步进器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:00:07.020

一个自定义的 UIPickerView 应该足够了，你知道它只有几小时和几分钟所以填充两个组件，一个从 1 到 24，第二个从 00 到 59

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:03:18.293

使用 UIDatePicker 时

```
UIDatePicker datePicker = [[UIDatePicker alloc] initWithFrame:rect];
datePicker.datePickerMode = UIDatePickerModeTime; 
```

您可以通过设置语言环境来设置时间格式

```
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"de_DE"];
datePicker.locale = locale; 
datePicker.calendar = [locale objectForKey:NSLocaleCalendar]; 
```

有了这个，您应该能够获得您想要的确切时间格式

如果你想滚动到你可以使用的实际时间

```
[datePicker setDate:[NSDate date] animated:YES]; 
```

# c# - 如何在数据库中存储和访问会话

> ID：12073630
> 
> 赞同：3
> 
> 时间：2012-08-22T12:53:57.080
> 
> 标签：c#, asp.net, sql-server, database, session

我正在使用 ASP .NET Sessions 做一个高级项目，我想知道：

**A) 我应该在我的 web.config 中添加什么来启用对数据库服务器的完整会话写入。**

**B）一旦启用，会话将存储在哪个表中？到目前为止，我只知道默认值是“TempDB”。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:58:25.703

[您可以在此 MSDN](http://msdn.microsoft.com/en-us/library/ms178586.aspx)文章中找到所有配置详细信息。转到部分`SQL Server Mode`

这是必需的配置

```
<configuration>
  <system.web>
    <sessionState mode="StateServer"
      stateConnectionString="tcpip=SampleStateServer:42424"
      cookieless="false"
      timeout="20"/>
  </system.web>
</configuration> 
```

这里有一些关于会话信息的存储位置以及如何更改默认位置的详细信息。有关更多详细信息，请按照 Andre Calil 的建议查看[这篇文章。](http://www.developer.com/net/asp/article.php/3595766/Storing-Session-State-in-a-SQL-Server-Database.htm)

> 默认情况下，Aspnet_regsql.exe 工具将创建一个名为 ASPState 的数据库，其中包含支持 SQLServer 模式的存储过程。默认情况下，会话数据本身存储在 tempdb 数据库中。您可以选择使用 -sstype 选项来更改会话数据的存储位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:08:35.187

请按照以下链接中提到的步骤操作：http: [//support.microsoft.com/kb/308100](http://support.microsoft.com/kb/308100)

# java - 尝试向阵列添加 5 个不同的“卡”，但它正在添加 5 个相同的卡

> ID：12073633
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:54:02.057
> 
> 标签：java, arrays

请，任何帮助将**不胜感激**，我相信这应该是一个简单的问题。

我是一名大学生，对 Java 很陌生，正在尝试一些实验室课程。

要求是一个非常简单的扑克程序，它只需要： 按指定顺序生成一副 52 张牌（已经可以使用） 读取玩家数量和玩家姓名（已经可以使用） 向每 (2) 名玩家发 5 张牌和牌堆顶部的庄家（不确定是否有效）然后通过以下输出显示牌：

玩家人数：**2** 玩家 1：**本垒打** 玩家 2：**Marge**

Homer 有 AH 4H 7H 10H KH Marge 有 2H 5H 8H JH AD 庄家有 3H 6H 9H QH 2D

* * *

有几个类别 - 经销商，玩家，甲板，手，牌

现在我得到的输出是：

玩家人数：**2** 玩家 1：**本垒打** 玩家 2：**Marge**

荷马有 KH KH KH KH KH Marge 有 AD AD AD AD AD 经销商有 2D 2D 2D 2D 2D

* * *

**Dealer**类的相关代码：

```
public class Dealer {
    public static void main(String[] args)
    {   new Dealer();  }

    private Deck deck = new Deck();
    private Hand hand = new Hand();
    public ArrayList<Player> players = new ArrayList<Player>();

    ....

    private void deal()
    {
        for(int i = 0; i < 5; i ++) {
            for (Player player : players)
                player.add(next());
            add(next());  
        }
    }    //  deal five cards to each player and the dealer
         //  in the stated order

    private void add(Card card)
    {   hand.add(card);    }

    private Card next()
    {   return deck.next(); }

    private void show()
    {   
        for (Player player : players)
            System.out.println(player.getName() + " has " + player.showHand());
        System.out.println("Dealer has " + hand.toString());
    }
} 
```

以下是**Player**类中的相关代码：

```
public class Player{
    private String name;
    private int number;
    private Hand hand = new Hand();
    ....
    public void add(Card card)
    {   hand.add(card); }

    public String showHand()
    {
        String show = "" + hand.toString();
        return show;
    } 
```

以下是**Hand**类中的相关代码：

```
public class Hand {
    private Card[] cards = new Card[5];
    ....
    public void add(Card card)
    {
        for (int i = 0; i < cards.length; i++)
            cards[i] = new Card(card.valueReturn(), card.suitReturn());
    }

    public String toString()
    {
        String display = "";
        display = cards[0].toString() + cards[1].toString() + cards[2].toString() + cards[3].toString() + cards[4].toString();
        return display;
    }
} 
```

以下是**Deck**类的相关代码：

```
public class Deck{
    private Card[] cards = new Card[52];
    private int i = 0, deck = 0;
    private char[] suits = {'H', 'D', 'C', 'S'};

    public Deck()
    {
        for (int suit = 0; suit < 4; suit++){
            for(int value = 1; value <= 13; value++){
                 cards[deck++] = new Card(value, suits[suit]);
            } 
        }        
    }  // create the cards in the stated order and add them to the deck

    //  This function works by side effect
    //  It uses the standard "next" pattern you will see next week
    public Card next()
    {   return cards[i++];    }
} 
```

最后是**Card**类的相关代码：

```
public class Card{

    private int cardValue;
    private char suit;

    public Card(int cardValue, char suit)
    {   
        this.cardValue = cardValue;
        this.suit = suit;   
    }

    public String valueDisplay()
    {
        switch (cardValue)
        {
            case 1: return "A";
            case 11: return "J";
            case 12: return "Q";
            case 13: return "K";
            default: return "" + cardValue;
        }
    }

    public int valueReturn()
    {
        this.cardValue = cardValue;
        return cardValue;
    }

    public char suitReturn()
    {
        this.suit = suit;
        return suit;
    }

    public String toString()
    {
        return valueDisplay() + suit + " ";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:02:11.967

在`Hand.add()`：

```
for (int i = 0; i < cards.length; i++)
   cards[i] = new Card(card.valueReturn(), card.suitReturn());
} 
```

您正在创建五张具有完全相同值的新卡。

人们会期待类似的东西（丑陋但快速修复）：

```
for (int i = 0; i < cards.length; i++)
   if (cards[i] == null) {
     cards[i] = card;
     return;
   } 
} 
```

此外，对于这些情况，学习使用调试器并逐步观察系统状态非常有用。

# windows - golang：在 Windows 上为 pdf 文件运行默认应用程序

> ID：12073635
> 
> 赞同：7
> 
> 时间：2012-08-22T12:54:04.210
> 
> 标签：windows, go

我想使用默认应用程序在文件系统中打开一个 PDF 文件。我怎样才能做到这一点？从命令行我只写 pdf 文件的文件名，然后应用程序打开（使用请求的文件）。当我尝试使用时，`exec.Command()`我得到一个错误（并不奇怪）`exec: "foo.pdf": executable file not found in %PATH%`。

```
package main

import (
    "log"
    "os/exec"
)

func main() {
    cmd := exec.Command("foo.pdf")
    err := cmd.Start()
    if err != nil {
        log.Fatal(err)
    }
    err = cmd.Wait()
    if err != nil {
        log.Fatal(err)
    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T15:05:01.783

```
exec.Command("rundll32.exe", "url.dll,FileProtocolHandler", "path_to_foo.pdf") 
```

也应该处理它。

请注意，正确的做法仍然是在[`ShellExecute()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153)由 导出的 API 函数周围使用 C 包装器`shell32.dll`，并且[“w32”库](https://github.com/AllenDang/w32)似乎立即提供了这个包装器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:08:52.637

您必须启动`cmd /C start foo.pdf`. 这将使 start 命令为您找到正确的可执行文件。

```
cmd := exec.Command("cmd", "/C start path_to_foo.pdf") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-23T02:20:43.740

创建一个像这样的文件：

```
//go:generate mkwinsyscall -output zmain.go main.go
//sys shellExecute(hwnd int, oper string, file string, param string, dir string, show int) (err error) = shell32.ShellExecuteW
package main

const sw_shownormal = 1

func main() {
   shellExecute(0, "", "file.pdf", "", "", sw_shownormal)
} 
```

然后构建：

```
go mod init pdf
go generate
go mod tidy
go build 
```

[https://pkg.go.dev/golang.org/x/sys/windows/mkwinsyscall](https://pkg.go.dev/golang.org/x/sys/windows/mkwinsyscall)

# php - 表单处理不会传递值

> ID：12073638
> 
> 赞同：0
> 
> 时间：2012-08-22T12:54:38.827
> 
> 标签：php, mysql

我有这个代码，它允许我发出请求以进行查询！

现在处理的表单具有以下代码：

```
<form action="edit_images.php" method="post">
<input type="hidden" value="<? echo $gal_id1 ?>" name="img_id1"  />
<input type="submit" value="Edit All Images"  />
</form> 
```

虽然查询是这样的：

```
$img_id=$_REQUEST['img_id1'];
$sql="SELECT * FROM tbl_images WHERE Img_gal_id='$img_id'"; 
```

但它似乎不会取值......我的意思是，它不识别我之前打印过的 $img_id 并取确切的值。

让我向您展示我用来检索它的查询：

```
$sql = "SELECT gal_id,gal_title,gal_image FROM tbl_galleries where gal_id='" . $_REQUEST['gid'] ."';";
      $query = mysql_query($sql) or $myErrorsP = mysql_error();
      if(isset($myErrors) && $myErrorsP!=''){     
      } else {          
          $row = mysql_fetch_row($query);
          mysql_free_result($query);
          $gal_id    = $row[0];
          $gal_id1    = $row[0];
          $gal_title = $row[1];
          $gal_image = $row[2];                     
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:56:48.843

您`;`的末尾缺少 a `echo`，它没有按预期输出值。此外，您使用的是短标签，这可能会导致问题。你可能想自己改用`<?php`作为一个开场白`<?`。

```
<input type="hidden" value="<?php echo $gal_id1; ?>" name="img_id1"  /> 
```

最后，您正在使用针对注入攻击的*零保护。*请研究 PDO 中准备好的语句并更新您的代码。*你没有*的第一次注入攻击会感谢你。

编辑：当您遇到这样的问题时，`$sql`在执行之前回显通常是一个好习惯。

你将来可以这样做：

```
$sql = "SELECT gal_id,gal_title,gal_image FROM tbl_galleries where gal_id='" . $_REQUEST['gid'] ."';";
echo $sql."<br>\n";
$query = mysql_query($sql) or $myErrorsP = mysql_error(); 
```

这可能会给你一个很好的指示问题是什么。

# python - 获取序列的第一个和最后一个元素的 Pythonic 方法

> ID：12073639
> 
> 赞同：3
> 
> 时间：2012-08-22T12:54:39.060
> 
> 标签：python, python-3.x

获取序列的第一个和最后一个元素的最简单和最干净的方法是什么？例如，我有一个序列`[1, 2, 3, 4, 5]`，我想`[1, 5]`通过某种切片魔法来获得。到目前为止，我想出的是：

```
l = len(s)
result = s[0:l:l-1] 
```

我实际上需要这个来完成更复杂的任务。我有一个 3D numpy 数组，它是立方的（即大小为 NxNxN，其中 N 可能会有所不同）。我想要一种简单快捷的方法来获取一个 2x2x2 数组，其中包含来自源数组顶点的值。上面的示例是我的任务的过度简化的 1D 版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:56:40.720

用这个：

```
result = [s[0], s[-1]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T14:03:46.423

`(N,N,N)` `ndarray` `X`对于您提到的 a 的特殊情况，以下内容对您有用吗？

```
s = slice(0,N,N-1)
X[s,s,s] 
```

例子

```
>>> N = 3
>>> X = np.arange(N*N*N).reshape(N,N,N)
>>> s = slice(0,N,N-1)
>>> print X[s,s,s]
[[[ 0  2]
  [ 6  8]]
 [[18 20]
  [24 26]]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T12:57:11.763

这将为您提供序列中第一个和最后一个元素的*列表：*

```
 result = [s[0], s[-1]] 
```

或者，这会给你一个*元组*

```
 result = s[0], s[-1] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T13:04:33.673

由于您使用的是 numpy 数组，因此您可能需要使用精美的索引：

```
a = np.arange(27)
indices = [0, -1]
b = a[indices] # array([0, 26]) 
```

对于 3d 案例：

```
vertices = [(0,0,0),(0,0,-1),(0,-1,0),(0,-1,-1),(-1,-1,-1),(-1,-1,0),(-1,0,0),(-1,0,-1)]
indices = list(zip(*vertices))  #Can store this for later use.
a = np.arange(27).reshape((3,3,3)) #dummy array for testing.  Can be any shape size :)
vertex_values = a[indices].reshape((2,2,2)) 
```

我首先写下所有顶点（尽管我敢打赌有一种聪明的方法可以使用`itertools`它可以让您将其扩展到 N 维......）。您指定顶点的顺序是它们在输出数组中的顺序。然后我“转置”顶点列表（使用`zip`），以便所有 x 索引都在一起，所有 y 索引都在一起，等等（这就是 numpy 喜欢它的方式）。此时，您可以保存该索引数组，并在需要框角时使用它来索引您的数组。您可以轻松地将结果重塑为 2x2x2 数组（尽管我拥有的顺序可能不是您想要的顺序）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T12:58:24.773

```
>>> from operator import itemgetter
>>> first_and_last = itemgetter(0, -1)
>>> first_and_last([1, 2, 3, 4, 5])
(1, 5) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T12:58:30.503

为什么要使用切片？获取每个元素

```
result = [s[0], s[-1]] 
```

更好，更具可读性。

如果您*真的*需要使用切片，那么您的解决方案是我能想到的最简单的解决方案。

这也适用于您提到的 3D 案例。

# android - 如何使用 ORMan orm 执行以下 SQL 查询？

> ID：12073640
> 
> 赞同：1
> 
> 时间：2012-08-22T12:54:43.710
> 
> 标签：android, orm

我在我的 Android 项目中使用[ORMan](https://github.com/ahmetalpbalkan/orman/wiki) ORM 库。

如何执行以下查询：

```
SELECT * FROM table1 WHERE my_column is null 
```

难点在于**is null**部分。我想使用 lib 来构建查询，而不是手动放置 SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:08:07.480

你可以随时打电话

查询 q = new Query("SELECT * FROM table1 WHERE my_column is null")

否则，我认为 C.custom("my_column is null") 会做。

# jquery - jQuery to GWT - 增加和减少整个页面的字体大小

> ID：12073648
> 
> 赞同：0
> 
> 时间：2012-08-22T12:55:07.237
> 
> 标签：jquery, gwt

我有一个脚本可以减少和增加 HTML 页面中正文内容的字体大小。

我想做同样的事情，但在 GWT java 项目中。

这里的jQuery代码：

```
 $('#agrandir').click(function () {
                    $('body').stop().animate({fontSize: '+=1px'},300);
            });
            $('#diminuer').click(function () {
                    $('body').stop().animate({fontSize: '-=1px'},300);
            }); 
```

HTML 代码：

```
 <button id="diminuer">-</button>&nbsp;<button id="agrandir">+</button><br/> 
```

你知道是否可以在 GWT 中做同样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:15:29.520

是的，使用[gwtquery](http://code.google.com/p/gwtquery)

> **介绍**
> 
> GwtQuery 又名 GQuery 是一个用 GWT 编写的类似 jQuery 的 API，它允许 GWT 用于可能 GWT 小部件过于重量级的渐进增强场景。它还可用于查找和改进您的 GWT 小部件。
> 
> 对于使用 jQuery 的人来说，GwtQuery 很容易学习，因为它们共享相同的 api，此外，gquery 还添加了一些不错的功能，例如类型安全的 css、编译时间优化等。
> 
> 目前，几乎已经编写了 jQuery API，并且应该支持所有 CSS3 选择器。如果您发现任何不支持或尚未实施的内容，请打开一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:29:58.087

实际上，您可以使用 GwtQuery 在 GWT 中移植任何 jquery 代码

```
import static com.google.gwt.query.client.GQuery.$;
import static com.google.gwt.query.client.GQuery.body;
//...

$("#agrandir").click(new Function () {
      public void f(){
          $(body).stop().animate("{fontSize: '+=1px'}",300);
       }
});
$("#diminuer").click(new Function () {
      public void f(){
           $(body).stop().animate("{fontSize: '-=1px'}",300);
       }
}); 
```

您只需确保在查询时将元素 9with ids 'agrandir' 和 'diminuer') 附加到 dom

# ruby-on-rails - Rails 迁移和非标准数据类型？

> ID：12073656
> 
> 赞同：1
> 
> 时间：2012-08-22T12:55:38.067
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, rails-migrations

### 最初的问题

在我的 Rails 应用程序中，我需要处理来自遗留数据库的数据，并将大量数据作为主键。超出[MySQL](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)和[PostgreSQL](http://www.postgresql.org/docs/8.2/static/datatype-numeric.html)的 4 字节 INT 或 INTEGER 数据类型限制的数字。但这正是 Rails 的适配器将“ `integer`”翻译成的数据类型。

### 我的解决方法

这在开发中不是问题，因为 SQLite 只有一种接受大数的整数类型。但是对于暂存/生产（即用于除 SQLite 之外的任何东西*）*，我必须手动编辑`schema.rb`文件以替换`t.integer "id"`为`t.column "id", 'BIGINT'`. 然后加载模式，导入数据，它就可以工作了。

### 解决方法的问题

现在，每次我运行 Rails 迁移以对数据库架构进行细微更改时，`schema.rb`都会自动重新生成整个文件，并且我的所有`id`列都将重新生成`t.integer`。和以前一样，这在开发（SQLite）中不是问题，但它可能会在生产中，不是吗？我不想每次需要添加或重命名列时都必须删除数据库、加载架构并重新导入所有数据——我更愿意为此使用迁移。

到目前为止，我的解决方法是在迁移之前制作一个备份副本，`schema.rb`然后将迁移所做的添加与我自己的合并。有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:28:22.130

[这是](https://gist.github.com/1095974)破解 mysql2 和 postgresql 中的 bigint 主键的解决方案：

在 environment.rb 中：

```
 # Load the rails application
require File.expand_path('../application', __FILE__)

require 'active_record/connection_adapters/mysql2_adapter'
require 'active_record/connection_adapters/postgresql_adapter'

ActiveRecord::ConnectionAdapters::Mysql2Adapter::NATIVE_DATABASE_TYPES[:big_primary_key] = "BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY".freeze
ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::NATIVE_DATABASE_TYPES[:big_primary_key] = "bigserial primary key".freeze

# Initialize the rails application
YourAppName::Application.initialize! 
```

# iphone - 如何从 iphone 应用程序中检索 Plist 数据

> ID：12073663
> 
> 赞同：1
> 
> 时间：2012-08-22T12:55:53.237
> 
> 标签：iphone, objective-c, info.plist

嗨，我是 iPhone 新手。

我在 Plist 文件中存储了一些数据。一旦我点击应用程序中的上传按钮，所有数据都会发布到网络服务中。

在我编写的代码中，我**没有发布所有数据，而是错误地单独发布了最后一个数据**。我的项目也投入生产了。客户试图发布数据，但最后一个数据仅在 Web 服务中更新。

现在我解决了这个问题。如果我点击上传按钮，所有数据都将发布在 Web 服务中，并且我将发布用于生产的构建，但是**我可以从早期的生产构建中检索 plist 数据，这些数据是未发布在 Web 服务中的数据。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:59:57.530

您无法更新捆绑包中的任何内容。如果您希望能够更新它，请将 plist 保存在文档目录中。

```
NSArray *arrayPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
    NSUserDomainMask, YES);
NSString *documentsDirectory = [arrayPaths objectAtIndex:0]; 
```

使用商店更新应用程序时，不会删除文档目录中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:04:56.707

我不是 100% 理解你的问题。我的项目中有用于布局信息的 plist。这些 plists 已经包含在我的应用程序中。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"MapLayout" ofType:@"plist"];
NSURL *markerDataURL = [NSURL fileURLWithPath:path];

NSDictionary *data = [[NSDictionary alloc]initWithContentsOfURL:markerDataURL];
NSArray *array = [data allKeys]; 
```

这会将所有数据放入字典中，但接下来您要做什么取决于您的 plist 中的内容。

# asp.net - ASP.NET 控件和 AntiXss

> ID：12073666
> 
> 赞同：0
> 
> 时间：2012-08-22T12:56:07.690
> 
> 标签：asp.net, antixsslibrary

我正在做一些 AntiXSS 工作。用户输入一些文本，然后通过

```
Microsoft.Security.Application.Encoder.HtmlEncode(); 
```

并保存到数据库中。

然后可以在标签或文本框中显示此文本。

如果我将编码的文本放入标签的文本属性中，它会显示得很好。如果我将它分配给文本框的文本属性，它会以编码形式显示。

如何在文本框和标签中正确显示文本？该库是否提供任何解码机制？

由于项目要求，我无法更改库或它在输入上编码的事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:03:14.033

您可以使用`Server.HtmlDecode`或`HttpUtility.HtmlDecode`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-13T07:23:13.490

你这样做是错的。您不应该 HtmlEncode 输入并将其保存到数据库，因为没有支持的解码方式。相反，您应该保存原始信息并在显示时对其进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-20T13:48:01.023

我建议 `GetSafeHtmlFragment`用于删除不在白名单上的所有标签和属性。下面的链接会有所帮助。

*   [反XSS](https://stackoverflow.com/questions/2022289/why-use-microsoft-antixss-library/2326339#2326339)
*   [如何](http://www.c-sharpcorner.com/UploadFile/abhikumarvatsa/avoiding-cross-site-scripting-xss-attacks-with-antixss-in/)

# c# - 在 ASP 中继器中设置 CheckBox“已检查”属性

> ID：12073670
> 
> 赞同：3
> 
> 时间：2012-08-22T12:56:14.330
> 
> 标签：c#, asp.net, asprepeater

我想知道是否可以使用转发器数据源中的布尔变量来设置复选框的选中属性？

我尝试了几种方法，但没有任何成功......：

```
<asp:Repeater ID="rpt" runat="server">
    <itemTemplate> 
       <asp:CheckBox runat="server" CssClass="checkbox"
            Checked="<%#Eval("IsDefault").ToString().ToLower()%>"
            ID="isDefaultCheckBox"/>
    </itemTemplate>
</asp:Repeater>

<asp:Repeater ID="rpt" runat="server">
    <itemTemplate> 
       <asp:CheckBox runat="server" CssClass="checkbox" 
            Checked="<%# DataBinder.Eval(Container.DataItem, "IsDefault")%>" 
            ID="isDefaultCheckBox"/>
    </itemTemplate>
</asp:Repeater> 
```

IsDefault 是类视图中的一个字段：

```
public bool IsDefault 
```

中继器的DataSource 是List。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:20:28.430

另一种解决方案是处理 ItemDataBound 事件：

```
<asp:Repeater ID="rpt" runat="server" OnItemDataBound="rpt_ItemDataBound">
    <itemTemplate> 
       <asp:CheckBox runat="server" CssClass="checkbox" ID="isDefaultCheckBox"/>
    </itemTemplate>
</asp:Repeater> 
```

...

```
protected void rpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    RepeaterItem ri = e.Item;
    var dataItem = ri.DataItem as YourClassOrInterface;
    var isDefaultCheckBox = ri.FindControl("isDefaultCheckBox") as CheckBox;
    isDefaultCheckBox.Checked = dataItem.IsDefault;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:02:02.900

我相当确定它应该以这种方式工作：

```
Checked='<%# Bind("IsDefault") %>' 
```

顺便说一句，`<`您的第一种方法中缺少一个：

```
Checked="%#Eval... 
```

**编辑**：（[因为您还编辑了您的问题并更正了它）]

现在还有其他问题，您在这里有两个连续的引号：

```
Checked="<%#Eval(" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-24T20:51:21.620

老问题，但我在我的应用程序中使用更简单的方法解决了这个问题：

```
<asp:CheckBox ID="chkIncludePdf" runat="server" Checked='<%# Eval("DefaultInclude").ToString() == "True" %>' /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-21T16:24:39.340

代码的问题实际上是您嵌套了双引号

```
Checked="<%# DataBinder.Eval(Container.DataItem, "IsDefault")%>" 
```

应该

```
Checked='<%# DataBinder.Eval(Container.DataItem, "IsDefault")%>' 
```

# python - 每帧加载和blitting图像？

> ID：12073674
> 
> 赞同：0
> 
> 时间：2012-08-22T12:56:23.107
> 
> 标签：python, pygame, sprite

我有一个简单的自上而下的垂直射击游戏 la Galaga，我正在玩弄它。但是，在查看文档后，我对如何有效地加载图像以及是否每帧都进行 blit 处理感到有些困惑。所有的图像都是通过几个继承 pygame sprite 类的类加载的。目前，我正在将图像作为类级别属性加载，如下所示：

```
class Laser(pygame.sprite.Sprite):
    image = None

    def __init__(self, start_x, start_y):
        pygame.sprite.Sprite.__init__(self)

        self.pos_x = start_x
        self.pos_y = start_y

        if Laser.image is None:
            Laser.image = pygame.image.load('img/laser_single.png')
        self.image = Laser.image
        self.rect = self.image.get_rect()
        self.rect.topleft = [self.pos_x, self.pos_y] 
```

我希望这可以防止 Python 在我每次创建新的 Laser() 时将图像的新实例加载到内存中。但这会像我预期的那样工作吗？

第二个问题源于将所有活动的 sprite 放到 pygame 表面上。目前，我遍历了一系列 Laser()、Enemy() 和诸如此类的对象，并在调用 pygame.display.update() 之前分别对每个对象进行 blit。必须单独对每个对象进行 blit 似乎是多余的，所以我问这是否是 pygame 实现的最有效的方法。或者，有没有办法一次对每个对象进行 blit 并看到某种性能改进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:02:34.390

*   *我希望这可以防止 Python 在我每次创建新的 Laser() 时将图像的新实例加载到内存中。但这会像我预期的那样工作吗？*

是的。这不仅可以节省内存，因为每个实例都只会引用类变量，而且还可以提高性能，因为图像只加载一次。

*   *第二个问题来自于将所有活动精灵 blitting 到 pygame 表面上。*

这取决于。如果你的帧率没问题，那就坚持下去。如果您的帧率开始下降，请查看[`DirtySprite`](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.DirtySprite)，也许还有这篇[文章](http://dotfile.n0nick.net/quick-dirty-using-pygames-dirtysprite-layered)。

另一个派上用场的 Python 类是[`LayeredDirty`](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.LayeredDirty)sprite 组，它会自动处理脏 sprite 并为您只更新相关的屏幕部分而不是整个屏幕。

*   *必须单独对每个对象进行 blit 似乎是多余的*

使用精灵组，例如 the`LayeredDirty`或 simple [`Group`](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group)，您将精灵添加到组中一次，然后调用[`draw`](http://www.pygame.org/docs/ref/sprite.html#Group.draw)精灵组的方法。

```
sprites = pygame.sprite.LayeredDirty((sprite1, sprite2, sprite3))
sprites.add(sprite4)
...
sprites.draw(pygame_screen) 
```

* * *

使用精灵组还可以让您在组之间进行简单的碰撞检测，使用[`pygame.sprite.groupcollide`](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.groupcollide)和[`pygame.sprite.spritecollideany`](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.spritecollideany)

# jquery - jquery：如何隐藏第二个 div？

> ID：12073678
> 
> 赞同：0
> 
> 时间：2012-08-22T12:56:41.453
> 
> 标签：jquery

我有一个 jquery 问题，如何隐藏第一个/第二个 div，所以现在它显示搜索、搜索。我想要“搜索”：

```
<tbody>
    <tr>
        <td class="ui-pg-button ui-corner-all" title="Reload Grid" id="refresh_jqgProducts">
            <div class="ui-pg-div">
                <span class="ui-icon ui-icon-refresh"></span>
            </div>
        </td>
        <td class="ui-pg-button ui-corner-all" title="Search">
            <div class="ui-pg-div">
                <span class="ui-icon ui-icon-search"></span>Search</div>
        </td>
        <td class="ui-pg-button ui-corner-all" title="Search">
            <div class="ui-pg-div">
                <span class="ui-icon ui-icon-search"></span>Search</div>
        </td>
    </tr>
</tbody> 
```

我尝试了类似： $("td .ui-pg-div :nth-child(1)") 来检索它，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:58:06.163

```
$('td .ui-pg-button').gt(0).find('div').hide(); 
```

[http://api.jquery.com/gt](http://api.jquery.com/gt)
[http://api.jquery.com/eq](http://api.jquery.com/eq)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T00:38:53.743

我在你的帮助下找到了它：

```
$("div.ui-pg-div:eq(1)").hide() 
```

谢谢大家！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:06:10.290

```
$('td:gt(1)').hide();​ 
```

[看这个演示](http://jsfiddle.net/Ze2f5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:03:45.233

```
$(".ui-pg-button[title='Search']").gt(0).find('div').hide(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:04:37.220

在您的 javascript 中，当您在元素中即时工作时，您必须确保您的脚本中有 Document.Ready。

```
$(document).ready(){
    $('td[title="Search"]:first').remove();
} 
```

我将匹配任何`td`与“搜索”标题相匹配的内容，这样无论顺序如何，它都只会隐藏“搜索”项目的第一次出现。

我也在删除该项目，而不仅仅是隐藏它

# java - 找不到属性文件（FileNotfoundException）

> ID：12073683
> 
> 赞同：0
> 
> 时间：2012-08-22T12:57:00.157
> 
> 标签：java, ant, selenium, junit4

我正在使用 ant 任务运行 selenium 脚本..使用命令提示符可以正常工作..但是从 ant 任务中，它不起作用..如何解决这个问题？

```
 <testcase classname="junit.framework.TestSuite"    name="com.openbravo.test.integration.erp.testsuites.regression.MRC0000_Logging" time="0.0010">
  <error message="config/OpenbravoERPTest.properties (No such file or directory)"   type="java.io.FileNotFoundException">java.io.FileNotFoundException: config/OpenbravoERPTest.properties (No such file or directory)
  at java.io.FileInputStream.open(Native Method)
  at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:120)
  at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:79)
 at com.openbravo.test.integration.erp.testscripts.OpenbravoERPTest.loadProperties(OpenbravoERPTest.java:117)
 at com.openbravo.test.integration.erp.testscripts.OpenbravoERPTest.setUpBeforeClass(OpenbravoERPTest.java:105)
 at org.eclipse.ant.internal.launching.remote.EclipseSingleCheckExecutor.executeTargets(EclipseSingleCheckExecutor.java:30)
 at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
 at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:424)
 at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:138)
 </error>
 </testcase>
 <system-out><![CDATA[asd
 ]]></system-out>
<system-err><![CDATA[]]></system-err>
</testsuite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:02:07.047

路径名是相对的：`config/OpenbravoERPTest.properties`

您确定您正在从正确目录中的命令行执行脚本吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:33:59.667

确保包含配置目录的目录位于类路径中。

# mysql - 恢复数据库备份会导致坏字符

> ID：12073684
> 
> 赞同：0
> 
> 时间：2012-08-22T12:57:00.877
> 
> 标签：mysql, linux

是否有可能简单地使用`mysql -h [IP] -u root -p [DATABASE] < [FILE].sql`来恢复数据库会导致西班牙语字符丢失他们的“西班牙语”并显示所有时髦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:07:21.780

从此：[_](http://labs.leftcolumn.net/2009/09/how-to-prevent-weird-characters-after-mysql-export-and-import/)

> 该问题本质上与 MySQL 中的默认排序规则与 .sql 文件中指定的排序规则/字符集之间的不匹配有关。要解决此问题，请确保它们都匹配。如果您使用的是 MySQL 4+，则默认排序规则可能是 UTF-8，因此只需确保该文件也设置了默认排序规则。将以下行放在 .sql 的顶部似乎可以解决问题：
> 
> ```
> /*!40101 SET NAMES utf8 */; 
> ```
> 
> 原因似乎与导入器有关：即使在数据库和表上设置了默认排序规则，如果整个文件没有默认值，则每次插入都会被误解为 UTF-8 表，必须封装为 latin1 . 还要检查 .sql 文件中的表创建语句是否也是 UTF-8，如下所示：
> 
> ```
> CREATE TABLE `wp_comments` (
> ...
> ) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:02:44.013

这听起来像是 latin1 与 utf8 不匹配。旧数据库可能已转储为一种编码，而新数据库则使用不同的默认编码创建。尝试使用`--default-character-set=utf8`标志或用 latin1 替换 utf8 是行不通的。

# c++ - 整数类型的模板函数特化

> ID：12073689
> 
> 赞同：43
> 
> 时间：2012-08-22T12:57:15.803
> 
> 标签：c++, templates

假设我有一个模板函数：

```
template<typename T>
void f(T t)
{
    ...
} 
```

我想为所有原始整数类型编写一个特化。做这个的最好方式是什么？

我的意思是：

```
template<typename I where is_integral<I>::value is true>
void f(I i)
{
    ...
} 
```

并且编译器为整数类型选择第二个版本，而为其他所有类型选择第一个版本？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-22T13:09:48.210

使用[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)

```
// For all types except integral types:
template<typename T>
typename std::enable_if<!std::is_integral<T>::value>::type f(T t)
{
    // ...
}

// For integral types only:
template<typename T>
typename std::enable_if<std::is_integral<T>::value>::type f(T t)
{
    // ...
} 
```

请注意，即使是声明，您也必须包含完整的`std::enable_if`返回值。

C++17 更新：

```
// For all types except integral types:
template<typename T>
std::enable_if_t<!std::is_integral_v<T>> f(T t)
{
    // ...
}

// For integral types only:
template<typename T>
std::enable_if_t<std::is_integral_v<T>> f(T t)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-23T20:49:04.763

我会使用重载决议。这使您不必使用粗俗的 SFINAE hack。不幸的是，有很多领域是您无法避免的，但幸运的是，这不是其中之一。

```
template<typename T>
void f(T t)
{
  f(t, std::is_integral<T>());
}

template<typename T>
void f(T t, std::true_type)
{ 
  // ...
}

template<typename T>
void f(T t, std::false_type)
{ 
  // ...
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-22T13:04:03.757

使用 c++11，可以使用 std::enable_if ( [http://en.cppreference.com/w/cpp/types/enable_if](http://en.cppreference.com/w/cpp/types/enable_if) ) 来做到这一点：

```
template<typename T, class = typename std::enable_if<std::is_integral<T>::value>::type>
void f(T t) {...} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-22T13:13:19.657

您可以使用可以像这样专门化的帮助模板：

```
#include <string>
#include <iostream>
#include <type_traits>

template <typename T, bool = std::is_integral<T>::value>
struct Foo {
        static void bar(const T& t) { std::cout << "generic: " << t << "\n"; }
};
template <typename T>
struct Foo<T, true> {
        static void bar(const T& t) { std::cout << "integral: " << t << "\n"; }
};

template <typename T>
static void bar(const T& t) {
        return Foo<T>::bar(t);
}

int main() {
        std::string s = "string";
        bar(s);
        int i = 42;
        bar(i);
        return 0;
} 
```

输出：

```
generic: string
integral: 42 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-10-01T10:25:11.810

这是 C++20 解决方案

```
template<std::integral T>
void f(T v) {
   ...
} 
```

我认为它实际上是重载的功能，但工作方式相同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-05T12:16:01.863

通过在函数体内实现不同的版本来获得更直接、更易读的方式呢？

```
 template<typename T>
    void DoSomething(T inVal) {
        static_assert(std::is_floating_point<T>::value || std::is_integral<T>::value, "Only defined for float or integral types");
        if constexpr(std::is_floating_point<T>::value) {
            // Do something with a float
        } else if constexpr(std::is_integral<T>::value) {
            // Do something with an integral
        }
    } 
```

您不必担心性能。条件是编译时间常数，下降编译器会将它们优化掉。不幸的是，“如果 constexpr”是 c++17，但是当两个版本都编译且两种类型都没有错误时，您可以删除“constexpr”

# django - 在文件上传时获取“builtin_function_or_method 对象不可迭代”

> ID：12073692
> 
> 赞同：2
> 
> 时间：2012-08-22T12:57:25.103
> 
> 标签：django, file-upload

我无法上传文件。我正进入（状态

`Type error builtin_function_or_method' object is not iterable`

***模型.py***

```
class seeker(models.Model):
    user = models.OneToOneField(User)
    birthday = models.DateField()

class Upload(models.Model):
    user = models.ForeignKey(Seekers)
    resume = models.FileField(upload_to ='resume', blank = True, null = True) 
```

***表格.py***

```
class SeekersForm(forms.Form):
    resume = forms.FileField(label = 'Select a file',help_text = 'max.3 MB') 
```

***视图.py***

```
def List(request):

    # Handle file upload
    if request.method == 'POST':
        form = SeekersForm(request.POST, request.FILES)
        if form.is_valid():

            #id = User.object.get(id)
            newdoc = Seekers.objects.get(user_id)
            newdoc.resume =Upload(resume = request.FILES['resume'])
            newdoc.save()

            #seekers_edit = Seekers.objects.get(id) 
            #seekers_edit.resume = Seekers(resume = request.FILES['resume'])
            #seekers_edit.save()

            #Redirect to the document list after POST
            return HttpResponseRedirect('/profile/')
    else:
        form = SeekersForm() # A empty, unbound form

    #Load documents for the list page   
    seekers = Seekers.objects.all()

    #Render list page with the documents and the form
    return render_to_response('list.html',{'seekers':seekers,'form':form},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:15:14.277

您的代码中的问题：

*   您的表单定义复制了模型中的信息 - 只需使用[`forms.ModelForm`](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)(with`exclude`以免显示该`user`字段)
*   如当前粘贴的那样，`newdoc = Seekers.objects.get(user_id)`将引发`TypeError`( `'foo' object is not iterable`); [`.get()`接受关键字参数过滤器](https://docs.djangoproject.com/en/1.4/topics/db/queries/#retrieving-a-single-object-with-get)，而不是其他任何东西。
*   `request.FILES['resume']`不需要或不建议手动访问

所以，简而言之，你就快到了；让 Django 表单为您完成更多工作：

```
# forms.py
class SeekerForm(forms.ModelForm)
    class Meta:
        model = Seeker

# views.py    
def seeker_list(request):
    # Opinions are divided as to whether it's ever appropriate to 
    # modify the database like this on a GET request, but it seems
    # to make sense here
    seeker = Seekers.objects.get_or_create(user=request.user)
    if request.method == 'POST':
        form = SeekerForm(request.POST, request.FILES, instance=seeker)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/profile/')
    else:
        form = SeekerForm(instance=seeker)

    seekers = Seekers.objects.all()

    #Render list page with the documents and the form
    return render_to_response('list.html', {
        'seekers':seekers,
        'form':form
    }, context_instance=RequestContext(request)) 
```

不清楚代码中注释掉的部分的意义（如果有的话）是什么——我假设你总是想修改当前用户的`Seeker`，但如果不是，则酌情调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:48:36.357

很难说你的问题出在哪里，但我认为以下代码行是主要问题：

```
newdoc.resume =Upload(resume = request.FILES['resume']) 
```

在保存整个模型实例之前，您必须将文件显式保存在 FileField 中。此外，如果您的一个模型中有一个 ForeignKey 字段，并且您想为其分配另一个模型的实例，请在进行分配之前先保存该实例。在不知道你的`Seekers`模型的情况下，我所能做的就是猜测什么可能对你有帮助。类似以下内容可能会帮助您入门：

```
your_file = request.FILES['resume']
upload_instance = Upload()
upload_instance.resume.save(name=your_file.name, content=your_file, save=False)
upload_instance.user = ... # Here goes an instance of your Seekers model
upload_instance.save() # Here you save the whole instance of your Upload model 
```

另外，请注意以下事项：

1.  您的模型`Seekers`应该`Seeker`使用单数而不是复数来命名。这通常应该与您的所有模型一样。
2.  Python 函数应始终以小写字母开头，即，`list`而不是`List`. 然而，无论如何，这个名字在这里是一个不好的选择，因为`list`Python 的标准库中已经存在一个被调用的函数。

请仔细查看 Django 的文档。你需要知道的都在里面。我建议您特别阅读以下部分：

[https://docs.djangoproject.com/en/1.4/ref/models/fields/#filefield](https://docs.djangoproject.com/en/1.4/ref/models/fields/#filefield)

[https://docs.djangoproject.com/en/1.4/ref/files/file/](https://docs.djangoproject.com/en/1.4/ref/files/file/)

# java - Java Keystore 密码没意义？

> ID：12073702
> 
> 赞同：18
> 
> 时间：2012-08-22T12:57:50.273
> 
> 标签：java, android, keystore, keytool

密钥库密码背后的含义到底是什么，例如在 JKS/BKS 密钥库中？

这显然不是为了安全，因为我可以用编辑器打开文件并将所有条目复制到新文件中而无需密码检查。受密码保护的密钥库中的数据未加密！

这个密码保护什么？这似乎只是为了讨厌的开发人员oO ...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T13:07:18.013

假设您在密钥库中保存了一个名为“this is my sentence”的字符串，当您用记事本打开它时，您看到密文“blabla”，然后您将“blabla”复制到另一个文件并声称您找到了纯文本-text，它是“blabla”，这显然是不正确的，你仍然不知道原始的pliant-ext，直到通过密码恢复它。

==编辑==

对于 JKS 密钥库，密钥库密码用于验证完整性， [src](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/provider/JavaKeyStore.java#JavaKeyStore.engineLoad%28java.io.InputStream,char%5B%5D%29)

```
636   if (password != null) {
637       md = getPreKeyedHash(password);
638       dis = new DataInputStream(new DigestInputStream(stream, md));
639   } 
```

DigestInputStream 生成一个签名并将其与实际签名进行比较以查看是否被修改。

BouncyCastle 密钥库 UBER[更](http://grepcode.com/file/repo1.maven.org/maven2/com.madgag/scprov-jdk15on/1.47.0.2/org/spongycastle/jce/provider/JDKKeyStore.java#JDKKeyStore.BouncyCastleStore)安全，整个密钥库使用基于 SHA1 和 Twofish 的 PBE 加密 (PBEWithSHAAndTwofish-CBC)

```
 Cipher cipher = this.makePBECipher(cipherAlg, Cipher.DECRYPT_MODE, password, salt, iterationCount);
        CipherInputStream cIn = new CipherInputStream(dIn, cipher);

        Digest dig = new SHA1Digest();
        DigestInputStream  dgIn = new DigestInputStream(cIn, dig);

        this.loadStore(dgIn); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-05T16:04:25.093

在 JKS 或 BKS 密钥库上，密码并非毫无意义，但它也不会像您假设的那样。

它不会加密密钥库中的数据或以任何方式阻止对其的访问，但它会验证密钥库的完整性。在不知道密码的情况下，不可能在没有普通用户发现的情况下对密钥库进行更改（通常是因为他们的工具告诉他们“密钥库被篡改，或者密码不正确”）

在其他一些密钥库类型（例如 Keystore.BouncyCastle）中，密钥库密码可以防止检查和篡改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T13:30:30.683

JKS 密钥库是二进制存储，其内容使用密码作为密钥进行加密。没有密码，任何人都无法访问内容。密码用于保护商店的内容免受非法访问和操纵。您可以肯定地在某些编辑器中打开加密的内容，但无法理解它。

# c# - 定时器启动时调用 Tick 事件

> ID：12073703
> 
> 赞同：9
> 
> 时间：2012-08-22T12:57:51.730
> 
> 标签：c#, timer

我正在使用“System.Windows.Forms.Timer”来重复一项任务。但是当计时器启动时，我必须等待一个时间间隔才能开始任务。间隔设置为 10 秒，以给任务足够的时间来完成它的事情。但是有一个“尴尬的沉默”等待它第一次开始。启用计时器时有没有办法触发 Tick 事件？（我无法使用线程、回调或事件来重复任务）

```
private int counter;
Timer t = new Timer();

private void InitializeTimer()
{
    counter = 0;
    t.Interval = 750;
    t.Enabled = true;

    t.Tick += new EventHandler(timer1_Tick);
}

private void timer1_Tick(object sender, EventArgs e)
{
    if (counter >= 3)
    {
        t.Enabled = false;                
    }
    else
    {
        //do something here
        counter++;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T13:00:29.687

您始终可以手动调用您的方法：

```
private void InitializeTimer()
{
    counter = 0;
    t.Interval = 750;
    t.Enabled = true;
    timer1_Tick(null, null);

    t.Tick += new EventHandler(timer1_Tick);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-22T13:04:09.943

你可以使用一个`System.Threading.Timer`.

这有一个[构造函数](http://msdn.microsoft.com/en-us/library/saba8ksx)，它需要一个初始等待期。将此设置为零，计时器将立即触发回调，然后是您指定的每个间隔。

```
Timer stateTimer = new Timer(tcb, autoEvent, 0, 750); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T13:01:20.397

只需创建一个方法，然后在您的计时器内以及在您启动计时器之前调用它。

```
private int counter; 
Timer t = new Timer(); 

private void InitializeTimer() 
{ 
    counter = 0; 
    t.Interval = 750; 

    DoMything();
    t.Tick += new EventHandler(timer1_Tick); 
    t.Enabled = true; 
} 

private void timer1_Tick(object sender, EventArgs e) 
{ 
    if (counter >= 3) 
    { 
        t.Enabled = false;                 
    } 
    else 
    { 
        //do something here 
        counter++; 
        DoMything();
    } 
} 

private void DoMything()
{
   //Do you stuff here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T13:00:48.173

最简单的方法可能是最初将 设置`Interval`为非常小的值，然后在`Tick`处理程序或单独的处理程序中增加它。

这将确保第一个“滴答”以与后续滴答相同的方式发生，例如在其自己的线程上，而不是在初始化方法的上下文中。

# entity-framework - 选择所有选项——表、视图和存储过程

> ID：12073705
> 
> 赞同：0
> 
> 时间：2012-08-22T12:58:02.310
> 
> 标签：entity-framework

实体数据模型向导出现，您现在可以使用它来查询您的数据库并生成模型图。

我的问题是我应该选择所有选项——表、视图和存储过程吗？我不知道将使用哪些表/存储过程。如果我全选并且数据库很大，它如何影响性能？

在这种情况下，我将来可能会添加新的存储过程。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:28:06.893

选择你需要从什么开始。

如果您以后需要更多，您可以右键单击图表，然后选择从数据库中更新模型，然后添加更多、刷新现有或删除元素。

# iphone - 关于 NSRange 的内存泄漏

> ID：12073713
> 
> 赞同：0
> 
> 时间：2012-08-22T12:58:16.800
> 
> 标签：iphone, ios, memory-management, nsrange

```
NSString *mob = (__bridge_transfer NSString *)ABMultiValueCopyValueAtIndex(mobNum, emailCounter);
                mob = [ApplicationSingleton FindMobileNumber:mob];
                if ([favos rangeOfString:mob].location != NSNotFound) 
```

它在检查内存泄漏时给出以下消息...

消息“rangeOfString:”的接收者为 nil，并返回一个 NSRange 类型的值，该值将是垃圾

任何人都可以帮助我...提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:07:37.047

这似乎`favos`是零。确保在所有代码路径中都设置了变量，或者检查它是否为零。

# coldfusion - Railo 中的组件映射

> ID：12073714
> 
> 赞同：6
> 
> 时间：2012-08-22T12:58:18.677
> 
> 标签：coldfusion, cfc, railo

我想将我所有的 CFC 放入 /components 文件夹，并能够从应用程序中的不同位置调用它们，例如。来自 /forums/index.cfm。

我将如何设置映射？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T13:07:15.727

## 概括...

有多种方法可以设置映射，实际上有两种不同类型的映射：

*   传统映射是通过管理员创建的，并且可以在您的 CFML 代码中的任何位置使用。Railo 支持这种类型的每个上下文和每个服务器的映射。

*   还有一个每个应用程序的映射，在 Application.cfc 中或通过 cfapplication 标签创建，可以在*大多数*地方使用，但是是运行时构造，因此不能在编译时使用。

此外，如果您有全局组件，您可能希望避免使用映射并简单地告诉 Railo 您的组件在哪里，以便您可以直接访问它们。

## 创建每个上下文映射：

转到Railo Admin（即`http://domain/railo-context/admin/web.cfm`），在菜单的一半多一点处，您会找到“Archives & Resources”，其中是“Mappings”。

在 Virtual 列中输入`/components`并在 Resource 列中输入该目录的绝对路径（例如 /home/user/public_html/components ），然后按保存按钮。

您还可以使用带有操作“updateMapping”的[cfadmin 标记](http://www.getrailo.org/index.cfm/documentation/cfadmin-doc/)以编程方式创建每个上下文映射。

（此处的所有内容也适用于每个服务器的映射，除了使用服务器管理员而不是 Web 管理员。每个服务器的映射在 Web Admin 界面中是可见的但只读的。）

## 创建每个应用程序的映射：

要仅为特定应用程序创建映射，您可以在 Application.cfc 中执行此操作

只需创建一个名为的变量`this.mappings`，其中包含您的虚拟和资源值的结构，例如：

```
This.Mappings = { '/components' : '/home/user/public_html/components' } 
```

然后，此映射将仅适用于该应用程序，允许您为不同的应用程序将相同的映射点指向不同的位置。

Railo 还允许通过使用`cfapplication`标签在 Application.cfm 中创建每个应用程序的映射 - 如下所示：

```
<cfset MappingStruct = { '/components' : '/home/user/public_html/components' } />
<cfapplication mappings=#MappingStruct# /> 
```

**注意：**应用程序级映射有一些限制，因为它们存在于运行时，但不存在于编译时（因此，例如，它们不能用于自定义标签库，其中 taglib 属性在模板编译时评估）。

## 使用映射引用组件：

这些中的任何一个都将使您能够执行以下操作：

```
MyObj = createObject('component','components.NameOfFile').init() 
```

或者：

```
MyObj = new components.NameOfFile() 
```

（请注意，您不会`/component/nameoffile`像使用映射时那样使用。）

## 没有映射的全局组件：

如果您想在*没有*映射的情况下全局访问组件，请转到“组件”部分（就在菜单中的“映射”下方），然后在“其他资源”部分中输入您的绝对组件路径。（不要勾选受信任*。*）

然后你可以简单地创建你的对象而不`components.`需要映射：

```
MyObj = new NameOfFile() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:05:06.653

您应该在`Application.cfc`. 查看这些相关问题

[railo application.cfc this.mappings 不工作](https://stackoverflow.com/questions/6875621/railo-application-cfc-this-mappings-not-working)

[如何从外部属性文件将映射包含到 Application.cfc 中？](https://stackoverflow.com/questions/10551613/how-can-i-include-mappings-into-application-cfc-from-external-property-file)

# sql - 必须声明标量变量“@OUTSTANDINGSDATA”

> ID：12073719
> 
> 赞同：2
> 
> 时间：2012-08-22T12:58:49.407
> 
> 标签：sql, stored-procedures

我在 SQL SP 中有这段代码。

当我测试@OUTSTANDINGSDATA 是否不为空时，我收到“必须声明标量变量“@OUTSTANDINGSDATA””错误。其他变量不会发生这种情况。有任何想法吗？提前谢谢

```
USE [PantaRei]
GO
/****** Object:  StoredProcedure [dbo].[InsertDdrsData]    Script Date: 08/22/2012 14:29:28 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date,,>
-- Description: <Description,,>
-- =============================================
ALTER PROCEDURE [dbo].[InsertDdrsData] 
@RECEIVABLESDATA RECEIVABLESTABLE READONLY,
@DILUTIONSDATA DILUTIONSTABLE READONLY,
@ACCOUNTABLESDATA ACCOUNTABLESTABLE READONLY,
@OUTSTANDINGSDATA OUTSTANDINGSTABLE READONLY,
@TABLE1 VARCHAR(MAX),
@TABLE2 VARCHAR(MAX),
@TABLE3 VARCHAR(MAX),
@TABLE4 VARCHAR(MAX)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    DECLARE @CMD nvarchar(345)

    SET NOCOUNT ON

    SET @TABLE1 = RTRIM(@TABLE1)
    SET @TABLE2 = RTRIM(@TABLE2)
    SET @TABLE3 = RTRIM(@TABLE3)

    SELECT * INTO #t1 FROM @RECEIVABLESDATA

    SET @CMD =

        'INSERT INTO ' + QUOTENAME(@TABLE1) +
        'SELECT * FROM #t1'

    EXECUTE sp_executesql @CMD

    SELECT * INTO #t2 FROM @DILUTIONSDATA

    SET @CMD =

        'INSERT INTO ' + QUOTENAME(@TABLE2) +
        'SELECT * FROM #t2'

    EXECUTE sp_executesql @CMD

    SELECT * INTO #t3 FROM @ACCOUNTABLESDATA

    SET @CMD =

        'INSERT INTO ' + QUOTENAME(@TABLE3) +
        'SELECT * FROM #t3'

    EXECUTE sp_executesql @CMD

    IF @OUTSTANDINGSDATA IS NOT NULL
        BEGIN
            SELECT * INTO #t4 FROM @OUTSTANDINGSDATA

            SET @CMD =

                'INSERT INTO ' + QUOTENAME(@TABLE4) +
                'SELECT * FROM #t4'

            EXECUTE sp_executesql @CMD

        END 
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:03:23.953

`@OUTSTANDINGSDATA`是一个表值参数。

不`NULL`传入也不行。改为测试空表。

```
IF NOT EXISTS (SELECT * FROM @OUTSTANDINGSDATA) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:07:32.547

`NULL`作为表值参数的值传递是无效的。

也许您需要检查它是否为空？

* * *

例如：

```
CREATE TYPE LocationTableType AS TABLE 
( LocationName VARCHAR(50)
, CostRate INT );
GO
CREATE PROCEDURE dbo.usp_InsertProductionLocation
    @TVP LocationTableType READONLY
    AS 
    SET NOCOUNT ON
    SELECT *
        FROM  @TVP;
GO
EXEC dbo.usp_InsertProductionLocation NULL 
```

产生错误：

```
Msg 206, Level 16, State 2, Procedure usp_InsertProductionLocation, Line 0
Operand type clash: NULL is incompatible with LocationTableType 
```

* * *

糟糕 - 根据 Martin 的评论，您不必*提供*值作为参数 - 但它仍然不会`NULL`在存储过程中。将自动提供表的空实例。

# jquery - jQuery ajax 请求错误回调

> ID：12073720
> 
> 赞同：1
> 
> 时间：2012-08-22T12:59:11.257
> 
> 标签：jquery, ajax

我正在测试 jQuery ajax 请求的错误回调，我有一个问题。下面是我的ajax请求

```
$.ajax({
    type:'get',
    url:'non-existant-file.php',
    data: { newFile : $('#name').val() },
    beforeSend: function() {
        // make nice image to show the request is running
    },
    success: function() {
        // show results of successfull request
    },
    error: function(jq,status,message) {
        alert('A jQuery error has occurred. Status: ' + status + ' - Message: ' + message);
    }
}); 
```

该文件不存在，仅用于测试引发的错误。我希望它返回 404 作为状态，并返回“找不到文件”作为消息。至少，这就是我阅读[文档](http://api.jquery.com/jQuery.ajax/)时的理解：

> 第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。

但是，我收到的警报与我预期的完全不同：

```
A jQuery error has occurred. Status: error - Message: undefined 
```

我对文档的理解是错误的还是我做的不对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:09:57.130

我将以下内容用于 jQuery AJAX 的错误处理：

```
error       : function( xhr ) {
    var readyState = {
        1: "Loading",
        2: "Loaded",
        3: "Interactive",
        4: "Complete"
    };
    if(xhr.readyState !== 0 && xhr.status !== 0 && xhr.responseText !== undefined) {
        alert("readyState: " + readyState[xhr.readyState] + "\n status: " + xhr.status + "\n\n responseText: " + xhr.responseText);
    }
} 
```

也许这可以给你一些关于如何让它正常工作的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:10:03.760

我相信这与您的路由服务器如何响应访问不存在的路由有关。例如，JSFiddle 将返回一条更有帮助的消息：http: [//jsfiddle.net/dxSma/](http://jsfiddle.net/dxSma/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:15:15.050

您还可以使用“全局 Ajax 事件处理程序”

.ajaxError() 我在这里向您展示示例，您可以在此链接上找到更多信息。

[http://api.jquery.com/ajaxError/](http://api.jquery.com/ajaxError/)

当 Ajax 请求失败时显示一条消息。

```
jQuery("#msg").ajaxError(function(event, request, settings){
  jQuery(this).append("<li>Error requesting page " + settings.url + "</li>");
}); 
```

或者你也可以像以前那样工作:)

```
jQuery.ajax({
 ...,
complete: function(e, XHR, options) {
  if (XHR.status == 200) { // success
  } elseif (XHR.status == 500) { // Internal Server Error
  } elseif (XHR.status == 404) { // File Not found
 }
}); 
```

# winapi - 抑制 WM_ERASEBKGND 的正确方法是什么？

> ID：12073721
> 
> 赞同：4
> 
> 时间：2012-08-22T12:59:15.477
> 
> 标签：winapi, doublebuffered

如果我需要使用双缓冲，我需要抑制`WM_ERASEBKGND`消息。

我可以处理`WM_ERASEBKGND`并立即返回。但是我可以将`WNDCLASS`/设置为而不处理消息吗`WNDCLASSEX`？这是正确的方法吗？`hbrBackground``NULL``WM_ERASEBKGND`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:03:43.907

是的，设置`hbrBackground`为`NULL`是​​避免实现无操作`WM_ERASEBKGND`处理程序的适当方法。

当您传递`WM_ERASEBKGND`到 时`DefWindowProc`，它会检查窗口类中的背景画笔。如果有，它会用它填充脏区。如果背景画笔为空，则不执行任何操作并返回。这与拥有自己的无操作`WM_ERASEBKGND`处理程序基本相同。

处理程序的返回值`WM_ERASEBKGND`会影响您在调用时获得的`fErase`字段。处理程序应该检查以确定它是否需要自行擦除背景，或者它是否已经由. （虽然我实际上从未见过任何人检查它。）如果你让句柄它会返回，如果它有一个颜色编号或画笔，如果是.`PAINTSTRUCT``WM_PAINT``BeginPaint``WM_PAINT``fErase``WM_ERASEBKGND``DefWindowProc``WM_ERASEBKGND``TRUE``FALSE``hbrBackground``NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-07T23:38:01.983

我相信设置`hbrBackground = GetStockObject(HOLLOW_BRUSH)`比设置更正确`NULL`。

[关于 Raymond Chen 的 The Old New Thing 的一篇文章](https://blogs.msdn.microsoft.com/oldnewthing/20140305-00/?p=1593/)做出了区分：

> 如果您不想自动绘制背景，请通过空心画笔。如果您想要自定义背景绘图，则`NULL`作为画笔传递。

[`WNDCLASS`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633576.aspx)的成员[的 MSDN 文档](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633576.aspx)`hbrBackground`说：

> 当此成员为`NULL`时，应用程序必须在请求在其客户区绘制时绘制自己的背景。要确定是否必须绘制背景，应用程序可以处理`WM_ERASEBKGND`消息或测试由函数填充`fErase`的结构的成员。`PAINTSTRUCT``BeginPaint`

[MSDN 文档`WM_ERASEBKGND`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms648055.aspx)说：

> 该函数使用结构成员`DefWindowProc`指定的类背景画笔擦除背景。如果是，应用程序应该处理消息并清除背景。`hbrBackground``WNDCLASS``hbrBackground``NULL``WM_ERASEBKGND`

我的解释是，设置`hbrBackground`然后`NULL`忽略处理`WM_ERASEBKGND`并不意味着严格合法（但可能有效）；`hbrBackground = NULL`是一个承诺，你会处理`WM_ERASEBKGND`自己，而不是让`DefWindowProc`尝试使用空指针进行绘制。

# android - 如何找到设备中的键盘是否为默认键盘？

> ID：12073726
> 
> 赞同：1
> 
> 时间：2012-08-22T12:59:27.237
> 
> 标签：android, layout, keyboard, focus, scrollview

我在处理默认键盘以外的键盘时遇到问题。

我正在使用此代码使我的滚动视图布局滚动到完全结束。

```
scroller.fullScroll(ScrollView.FOCUS_DOWN); 
```

这段代码对我来说工作得很好，但是如果在设备中使用其他一些键盘，那么焦点就会从焦点对象中丢失。

你有什么解决方案来克服这个问题。或者你知道任何识别键盘类型的代码。

# javascript - ajax 不适用于歌剧

> ID：12073728
> 
> 赞同：0
> 
> 时间：2012-08-22T12:59:30.513
> 
> 标签：javascript, jquery, ajax, opera

我的 ajax 代码在 opera 中不起作用，但是，它适用于所有其他主要浏览器：

```
$(function() {  
$("a").on('click', function(e) {
    var href = $(this).attr('href');
    $.ajaxSetup({
        beforeSend:function(xhr) { $('div.imagePlace').animate({height:      '10px'}); },
    });
    $.ajax();
    e.preventDefault();

    setTimeout(function() {
    $.ajax({
        url: href,
        dataType: "html",
        success:function(result) {
            $('.imagePlace').html(result)
            $('.imagePlace').animate({height: '500px'})
        }
    });
        }, 400);
});

    }); 
```

谁能看到歌剧中的问题是什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:10:55.393

Opera 内置了一个名为 Dragonfly 的调试工具。进入工具菜单 -> 高级 ->Opera Dragonfly 如果没有文件菜单栏，点击菜单 -> 页面 -> 开发者工具 -> 打开 Opera Dragonfly

打开它后（在您正在处理的页面上打开它），单击“脚本”选项卡（它可能会要求您刷新页面，执行此操作）并下拉到您的外部 js 文件。找到代码后，您可以`$.ajax()`通过单击左侧的行号在该行上设置断点。现在，触发您的代码，您会看到它会在该 JavaScript 行上中断。然后，您可以使用检查选项卡（底部、中间）来确保所有变量都设置正确。您还可以单步调试和调试 JavaScript。

您要做的另一件事是添加一个错误函数，如下所示：

```
$(function() {  
$("a").on('click', function(e) {
    var href = $(this).attr('href');
    $.ajaxSetup({
        beforeSend:function(xhr) { $('div.imagePlace').animate({height:      '10px'}); },
    });
    e.preventDefault();
    setTimeout(function() {
    $.ajax({
        url: href,
        dataType: "html",
        success:function(result) {
            $('.imagePlace').html(result)
            $('.imagePlace').animate({height: '500px'})
        }
        error: function(xhr, textStatus, errorThrown) {
        alert(errorThrown);
        }
    });
        }, 400);
});

}); 
```

看看这是否为您提供了更多信息。

# winforms - onPaint 触发次数过多

> ID：12073729
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:59:40.040
> 
> 标签：winforms, wcf, winforms-interop

我有一个 winforms 用户控件，它使用户能够在面板上编辑工作流。工作流由构建块和连线组成，它们也是我的用户控件。

当我将应用程序从 winforms.exe 迁移为另一个 WCF 应用程序的 winform 控件时，我注意到 CPU 使用率攀升至 25%（=我的 4 核机器的单核的 100%）

CPU 在运行时立即回落到 0-1%：

我从任何现有控件中清除我的工作流面板，或者

我将屏幕焦点移动到另一个应用程序（并让它在后台运行），甚至是同一个应用程序中的不同选项卡。

重要的是，这不会发生在 Windows 窗体托管应用程序中，只会发生在 WCF 中。

我看到一个地方，他们覆盖了基本工作流块 UC 的 WndProc 方法，我也这样做了，但我仍然不明白是什么调用了 WndProc 方法这么多次，或者如何让它停止。

我的堆栈看起来像：

> BaseControls.dll!Ast.Admin.Controls.BaseControl.WndProc(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message}) 第 91 行 C# System.Windows.Forms.dll!System.Windows.Forms .Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m) + 0x1d 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m) + 0xaa 字节
> System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.Callback（System.IntPtr hWnd，int msg = 129，System.IntPtr wparam，System.IntPtr lparam）+ 0x6f 字节 System.Windows.Forms。 dll!System.Windows.Forms.NativeWindow.WindowClass.Callback(System.IntPtr hWnd, int msg, System.IntPtr wparam, System.IntPtr lparam) + 0x51 字节
> [原生到托管转换]
> [管理到本机转换]
> System.Windows.Forms.dll!System.Windows.Forms.UnsafeNativeMethods.CreateWindowEx(int dwExStyle, string lpszClassName, string lpszWindowName, int style, int x, int y, int width, int height, System. Runtime.InteropServices.HandleRef hWndParent、System.Runtime.InteropServices.HandleRef hMenu、System.Runtime.InteropServices.HandleRef hInst、对象 pvParam) + 0x3f 字节
> System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.CreateHandle(System .Windows.Forms.CreateParams cp) + 0x22d 字节 System.Windows.Forms.dll!System.Windows.Forms.Control.CreateHandle() + 0x12c 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control.CreateControl (bool fIgnoreVisible = false) + 0x89 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control.CreateControl() + 0x31 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control.ControlCollection.Add(System.Windows.Forms.Control 值= {Ast.Controls.AllianceEnterprise.DataSource}) + 0x1dd 字节
> AdminUC.dll!Ast.Admin.AdminUC.RuleBuilderUC.AddItem(object objData = "C:\Ast Alliance NextUI\Bin\Escalation\Controls\Actions\DataConnector.dll ;Ast.Controls.AllianceEnterprise.DataSource") + 0x510 字节 AdminUC.dll!Ast.Admin.AdminUC.RuleBuilderUC.drawingPanel_DragDrop(object sender = {System.Windows.Forms.Panel}, System.Windows.Forms.DragEventArgs e = { System.Windows.Forms.DragEventArgs}) + 0xa0 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control.OnDragDrop(System.Windows.Forms.DragEventArgs drgevent) + 0x73 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control.System.Windows。 Forms.IDropTarget.OnDragDrop(System.Windows.Forms.DragEventArgs drgEvent) + 0x15 字节 System.Windows.Forms.dll!System.Windows.Forms.DropTarget.System.Windows.Forms.UnsafeNativeMethods.IOleDropTarget.OleDrop(object pDataObj, int grfKeyState, long pt, ref int pdwEffect = 1) + 0x5d bytes [Native to Managed Transition]
> [Managed to Native Transition]
> System.Windows.Forms.dll!System.Windows.Forms.Control.DoDragDrop（对象数据，System.Windows.Forms.DragDropEffects allowedEffects）+ 0xed 字节 AdminUC.dll！Ast.Admin.AdminUC.RuleBuilderUC.listView_MouseDown（对象发件人 = {System.Windows.Forms.ListView}，System.Windows.Forms.MouseEventArgs e = {X = 16 Y = 6 按钮 = 左}) + 0x285 字节 System.Windows.Forms.dll!System.Windows.Forms.Control。 OnMouseDown(System.Windows.Forms.MouseEventArgs e) + 0x73 字节
> System.Windows.Forms.dll!System.Windows.Forms.ListView.WmMouseDown(参考 System.Windows.Forms.Message m = {System.Windows.Forms.Message }，System.Windows.Forms.MouseButtons 按钮，int 点击）+ 0x7a 字节
> System.Windows.Forms.dll!System.Windows.Forms.ListView.WndProc(ref System.Windows.Forms.Message m) + 0xf7 字节 System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.OnMessage （参考 System.Windows.Forms.Message m）+ 0x1d 字节
> System.Windows.Forms.dll！System.Windows.Forms.Control.ControlNativeWindow.WndProc（参考 System.Windows.Forms.Message m）+ 0xaa 字节
> System.Windows .Forms.dll!System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 513, System.IntPtr wparam, System.IntPtr lparam) + 0x6f 字节 [本地到托管转换]
> [托管到本地转换]
> WindowsBase.dll!System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame frame = {System.Windows.Threading.DispatcherFrame}) + 0xb5 字节 WindowsBase.dll!System.Windows.Threading.Dispatcher.PushFrame( System.Windows.Threading.DispatcherFrame 框架）+ 0x3c 字节
> PresentationFramework.dll！System.Windows.Application.RunDispatcher（对象忽略）+ 0x34 字节
> PresentationFramework.dll！System.Windows.Application.RunInternal（System.Windows.Window 窗口）+ 0x16f 字节
> PresentationFramework.dll!System.Windows.Application.Run(System.Windows.Window 窗口) + 0x33 字节 PresentationFramework.dll!System.Windows.Application.Run() + 0x69 字节 Ast Browser.exe!Ast.NextUI.GUI .Shell.App.StartApplication() + 0x75 字节
> Ast Browser.exe!Ast.NextUI.GUI.Shell.App.Main(string[] args) + 0x22b 字节

其中 basecontrol 是我的工作流块的基类。

从我把第一块放在面板上的那一刻起，这种情况就一直在发生，而且我并没有在屏幕上做任何事情来证明所有这些痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:53:49.643

这是在做什么：

```
[Managed to Native Transition]
 System.Windows.Forms.dll!System.Windows.Forms.UnsafeNativeMethods.CreateWindowEx(int dwExStyle, string lpszClassName, string lpszWindowName, int style, int x, int y, int width, int height, System.Runtime.InteropServices.HandleRef hWndParent, System.Runtime.InteropServices.HandleRef hMenu, System.Runtime.InteropServices.HandleRef hInst, object pvParam) + 0x3f bytes
System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.CreateHandle(System.Windows.Forms.CreateParams cp) + 0x22d bytes 
System.Windows.Forms.dll!System.Windows.Forms.Control.CreateHandle() + 0x12c bytes 
```

看起来 OnPaint 正在被调用，因为这是第一次创建窗口。

如果这是一个*典型的*调用堆栈，在拖放应用程序期间每秒被调用数百次，那么您真的需要找出原因并停止它......

# nant - 在 NAnt 中参数化外部 xml 文件

> ID：12073735
> 
> 赞同：1
> 
> 时间：2012-08-22T13:00:03.667
> 
> 标签：nant

在我的构建文件中，我使用的构建步骤之一如下：

```
 <target name="BuildMsDeployPackage" depends="StageForMsDeployPackaging">
    <exec program="${msdeploy.exe}"
          workingdir="${buildDirectory}"
          verbose="true"
          commandline="
           -verb:sync 
           -source:manifest=${currentWorkingDirectory}\${sourceManifest} 
           -dest:package=${publishDirectory}\${webapp.artifact.zip}"/> 
```

在这里，我使用 MSDeploy 创建一个可以稍后部署的包。源是清单文件的形式。清单文件的内容如下：

```
<MSDeploy.iisApp> 
    <iisapp path="C:\test" />
    <setAcl path="C:\test\dirOne" setAclAccess="Write" setAclUser="xyz"/>
    <setAcl path="C:\test\dirTwo" setAclAccess="Write" setAclUser="abc"/>
</MSDeploy.iisApp> 
```

显而易见，我用于 iisapp 和 setAcl 的路径是硬编码的。我希望能够根据我的构建文件所在的目录（当前工作目录）来指定这些。

是否可以通过 NAnt 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:00:15.567

据我了解您的问题，您想编辑清单文件。由于它是纯 XML，因此您可以使用 NAnt 的[`<xmlpoke>`](http://nant.sourceforge.net/release/latest/help/tasks/xmlpoke.html)任务。通过 XPath 指定适当的路径属性并将其设置为您的构建路径。您可以使用 NAnt 函数检索构建文件的路径[`project::get-buildfile-path`](http://nant.sourceforge.net/release/latest/help/functions/project.get-buildfile-path%28%29.html)。

# c# - 能否向我展示如何使用过程将数据添加到 2 个单独的表中，然后在另一个表中引用其中一个

> ID：12073739
> 
> 赞同：0
> 
> 时间：2012-08-22T13:00:23.757
> 
> 标签：c#, asp.net, sql-server

**我是 SQL Server 的新手-请原谅任何无知。**

我正在为用户信息和交互创建一个站点和数据库。

我有 2 个主要用户表，**tblSiteMember**和**tblSiteMemberDetail**。

tblSiteMember 包含：**id**、**refKey** tblSiteMemberDetail 包含**id**、**userId**、**username**、**password**等...

我想链接所有其他表以仅引用 tblSiteUser，而 tblSiteUserDetail 将包含对 tblSiteUser 的引用，并将存储其所有信息。

下图将说明：

![插画](../Images/f15754715d3ee503f36ac3d1bdccf48c.png)

不幸的是，由于我缺乏 SQL 知识，我不知道如何制作一个存储过程（例如 procAddMember）来将用户添加到**tblSiteMember**，然后将他们的详细信息添加到**tblSiteMemberDetail**，并在 tblSiteMemberDetail 上包含对**tblSiteMember**的**引用**。

有人能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:02:42.610

将所有这些都包装在事务中的单个存储过程是直接在数据库中确保数据一致性的相当标准的方法。

它还有一个额外的好处是对数据库的一次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:18:17.063

假设“id”是 tblSiteMember 中的标识列，您将在单个存储的 pro 中执行以下操作：

声明@siteMemberID int

插入到 tblSiteMember (_columns) 值 (_values)

设置@siteMemberID = @@Identity

插入 tblSiteMemberDetail（siteMemberID，_other 列）值（@siteMemberID，_other 值）

当然，这一切都可以包含在单个事务中。

# php - Yii 确认对话框扩展

> ID：12073741
> 
> 赞同：2
> 
> 时间：2012-08-22T13:00:31.573
> 
> 标签：php, yii

确认框有任何 Yii 扩展吗？

```
CHtml::link(Yii::t('VehicleModule.app', 'Cancel transfer of the vehicle'), array('/vehicle/vehicle/transfer', 'vehicleId'=>$data->id, 'cancel' => 1), array('confirm'=>Yii::t('VehicleModule.app', 'Are you sure you want to cancel the re-registering of the vehicle?'))) 
```

我想要它的风格。让它像 jqueryui 对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:05:34.350

Yii 有 CJuiDialog 小部件可以完成你的要求。

[Yii CJuiDialog 小部件](http://www.yiiframework.com/doc/api/1.1/CJuiDialog)

# asp.net-mvc - 由于 IIS 中托管的网站中的自定义 http 模块，Sql Server Reporting Services 导出失败

> ID：12073752
> 
> 赞同：2
> 
> 时间：2012-08-22T13:01:16.347
> 
> 标签：asp.net-mvc, iis, reporting-services

我在尝试将报告导出为 PDF（或任何格式）时遇到了一些问题。

我在 Windows Server 2008 R2 机器上的 IIS 7.5 上托管了一个 asp.net MVC 3 网站。

该网站允许通过 SQL Server Reporting Services 查看报告。

这一切正常，直到我尝试删除“服务器”响应标头条目，如 [删除服务器响应标头 IIS7中所述](https://stackoverflow.com/questions/1178831/remove-server-response-header-iis7)

报表在报表查看器控件中呈现良好，但是当您尝试导出报表时会引发异常，并且报表无法导出。

经过进一步调查，事实证明以下行导致自定义HTTP模块中的问题 - context.PreSendRequestHeaders += OnPreSendRequestHeaders;

```
namespace StrongNamespace.HttpModules
{
    public class CustomHeaderModule : IHttpModule
    { 
        public void Init(HttpApplication context)
        {
            context.PreSendRequestHeaders += OnPreSendRequestHeaders;
        } 

        public void Dispose() { } 

        void OnPreSendRequestHeaders(object sender, EventArgs e)
        {
            HttpContext.Current.Response.Headers.Set("Server", "Box of Bolts");
        }
    }
} 
```

即使该方法不执行任何操作，报告也无法导出。自定义模块与报告一起工作正常，如果事件没有附加任何内容，它们导出正常。

事件或 SQL 服务器日志中似乎没有任何用处。

返回的异常是：

```
远程主机关闭了连接。错误代码为 0x800704CD。
\r\n \r\n 在
System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError（Int32 结果，布尔 throwOnDisconnect）\r\n \r\n at
System.Web.Hosting.IIS7WorkerRequest.ExplicitFlush()\r\n \r\n 在
System.Web.HttpResponse.Flush(布尔 finalFlush)\r\n \r\n at
System.Web.HttpWriter.WriteFromStream(Byte[] data, Int32 offset, Int32 size)\r\n \r\n at
Microsoft.Reporting.WebForms.ReportDataOperation.StreamToResponse（流数据，HttpResponse 响应）\r\n \r\n at
Microsoft.Reporting.WebForms.ExportOperation.PerformOperation(NameValueCollection urlQuery, HttpResponse 响应)\r\n \r\n at
Microsoft.Reporting.WebForms.HttpHandler.ProcessRequest(HttpContext 上下文)\r\n \r\n at
System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\r\n \r\n at
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)\r\n", "ClientDetails": "{\"UserAgent\":\"Mozilla/5.0 (兼容; MSIE 9.0; Windows NT 6.1; WOW64; Trident /5.0)\",\"RawUrl\":\"/Reserved.ReportViewerWebControl.axd?ReportSession=l1lavh2yccrfzaexali5xe55&Culture=2057&CultureOverrides=True&UICulture=1033&UICultureOverrides=True&ReportStack=1&ControlID=24751adc9c9f47a387f0c486dc27fb48&OpType=Export&FileName=tp&ContentDisposition=OnlyHtmlInline&Format=PDF

```

Urlscan 似乎是唯一剩下的尝试选择，但我想我会看看是否有其他人遇到过类似的问题。

任何删除 Server 标头的建议或替代方法将不胜感激。

谢谢，马尔科姆

# wpf - 图像未以指定宽度呈现

> ID：12073755
> 
> 赞同：2
> 
> 时间：2012-08-22T13:01:28.173
> 
> 标签：wpf, wpf-controls

我在使用尺寸为 500*20 的图像时遇到了这个奇怪的问题。图像不是以 500 的宽度渲染的，而是以 50 的宽度渲染的。我尝试了这两种方法，但没有任何运气：

```
<Image Name="ImgSubTest" Height="20" Width="500" Canvas.Top="00" Canvas.Left="22">
    <Image.Source>
        <BitmapImage DecodePixelWidth="500"  
                     UriSource="/Path;component/Images/LightGreen.png" />
    </Image.Source>
</Image> 
```

&

```
<Image Name="ImgSubTest" Height="20" Width="500" Canvas.Top="00" Canvas.Left="22"
       HorizontalAlignment="Stretch"
       Source="/Path;component/Images/LightGreen.png" /> 
```

我项目中的所有其他图像都渲染得很好。我知道我在这里遗漏了一些东西，但我无法弄清楚是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:49:53.127

你看过图像的DPI设置吗？WPF 默认以 96DPI 渲染所有内容，如果 PNG 本身不是 96DPI，WPF 将根据其 DPI 设置将其渲染为更大或更小。

请参阅 Hanselman 关于 PNG 和 DPI 的文章：[http ://www.hanselman.com/blog/BeAwareOfDPIWithImagePNGsInWPFImagesScaleWe​​irdOrAreBlurry.aspx](http://www.hanselman.com/blog/BeAwareOfDPIWithImagePNGsInWPFImagesScaleWeirdOrAreBlurry.aspx)

# javascript - 类型为“text/html”的脚本标签会在任何浏览器中执行吗？

> ID：12073758
> 
> 赞同：4
> 
> 时间：2012-08-22T13:01:46.177
> 
> 标签：javascript, html, templates, cross-browser

我正在设置一个允许某些用户创建插件的 Web 应用程序。这些插件可能包含由 JavaScript 呈现的客户端模板。与[iCanHaz.js](http://icanhazjs.com/)模板一样，模板代码放置在带有 的`script`标签中。`type="text/html"`

我担心有人会尝试通过包含实际的 JavaScript 代码而不仅仅是模板代码来编写包含 XSS 攻击的插件。我知道在当前的浏览器上，`script`带有的标签`type="text/html"`不会作为 JavaScript 执行，所以它应该是安全的。所有浏览器都是这种情况吗？我担心的是，有些浏览器会在看到`script`标签时盲目地将代码作为 JavaScript 执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:10:08.287

这就是文档，这就是它应该如何工作。确定问题的最佳方法是对其进行测试，但所有主要浏览器的行为都正确。

# android - 无法使用 getListView()

> ID：12073761
> 
> 赞同：0
> 
> 时间：2012-08-22T13:01:59.480
> 
> 标签：android

```
 // TODO Auto-generated method stub
    super.onSaveInstanceState(outState);
    setContentView(R.layout.history);
    listView=(ListView)findViewById(R.id.listView1);

    readHistory();
    System.out.println("After history");
    //listView.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 , tokens));
    CustomAdapter adapter = new CustomAdapter(this, R.layout.firstlist,R.id.title, data);
    System.out.println("AfterCA");
    //ListView.

    /*getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    setListAdapter(adapter);

    getListView().setTextFilterEnabled(true);*/} 
```

我在 getListView() 遇到错误，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:03:42.277

`getListView()`将仅在扩展的类上可用[`ListActivity`](http://developer.android.com/reference/android/app/ListActivity.html)因此，您必须通过[`ListActivity`](http://developer.android.com/reference/android/app/ListActivity.html)如下扩展来使用您的类 -

```
public class myProject extends ListActivity
{
    // your stuff
} 
```

扩展的[getListView()](http://www.mkyong.com/android/android-listview-example/)的完美示例[`ListActivity`](http://developer.android.com/reference/android/app/ListActivity.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:03:59.670

为了使用`getListView()`，您需要扩展`ListActivity`. 其次，您已经有了带有 R.id.listView1 的 listView，只需使用它！

# wicket - Wicket - DropDownChoice POJO 到属性模型

> ID：12073764
> 
> 赞同：0
> 
> 时间：2012-08-22T13:02:08.283
> 
> 标签：wicket, dropdownchoice

DropDownChoice 的小问题。我用对象列表构建了一个 DropDownChoice。举个例子：

```
public MyClass 
  private String code;
  private String description;
[...] 
```

而不是拿另一个对象

```
public FormModelObject
   private String code; 
```

我可以使用 ChoiceRender 轻松构建 DropDownChoice，选择显示内容（描述属性）和获取内容（代码属性）。

不幸的是，DropDownChoice 返回整个对象（MyClass），我无法在 FormModelObject 中设置属性 Code（它只是在 MyClass 上启动一个 toString() 方法）。

我如何在不使用 Ajax 的情况下获得它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:02:21.400

尝试使用模型链接。您应该用这样构建的属性模型替换表单的变量代码：

```
//this is the model of your DropDownChoice
Model<MyClass> myModel = new Model<MyClass>();
//...

PropertModel myCode = new PropertModel(myModel, "code"); 
```

现在使用 myCode 代替表单中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:00:48.200

好吧，您可以覆盖 DropDownChoice 的 onModelChanged() 方法并使用新值更新 ResidenceZipCode。就像是 ：

```
DropDownChoice<City> drop = new DropDownChoice<City>("residenceZipCode",new Model(), cityList,new ChoiceRenderer<City>("name", "zipcode")){
     onModelChanged(){
       String newZipCode =  (String)PropertyResolver.getValue("zipCode",getModelObject());
       PropertyResolver.setValue("residenceZipCode", res, newZipCode, new  PropertyResolverConverter());
     }

}; 
```

DropDownChoice 必须有自己的模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:57:08.130

看一下 DDC 的类型参数：在您的情况下，它是 City，因此 DDC 与 City 对象一起使用。

如果您不希望这样，请更改类型，编译器将引导您：

```
DropDownChoice<String> drop = new DropDownChoice<String>("residenceZipCode",zipCodesList,new CityChoiceRenderer());

class CityChoiceRenderer implements IChoiceRenderer<String> {
  Object getDisplayValue(String zipCode) {
    return zipCodeToName(zipCode);
  }

  String getIdValue(String zipCode, int index) {
    return zipCode;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:25:01.223

最好写一些代码：

```
 class City {
      private String zipCode;
      private String name;
    }

    class Residence {
      private String residenceZipCode;
    }

protected Residence res;

public ResidenceForm() {
  super("form", new CompoundPropertyModel<Residence>(res));

  List<City> cityList = someManager().loadAllCity();

  DropDownChoice<City> drop = new DropDownChoice<City>("residenceZipCode",cityList,new ChoiceRenderer<City>("name", "zipcode"));
add(drop); 
```

现在。我无法更改居住地或城市，也无法在 onSubmit 按钮的方法中编写代码。

我想要的是住宅内的邮政编码。我现在得到的是相当于 City.toString()

# java - 懂 Java 的命令提示符？

> ID：12073765
> 
> 赞同：4
> 
> 时间：2012-08-22T13:02:10.687
> 
> 标签：java, command-prompt

> **可能重复：**
> [Java REPL shell](https://stackoverflow.com/questions/2636044/java-repl-shell)

是否有一个项目可以制作可以执行 Java 语句的命令提示符？为什么不？我正在寻找类似于 Python 的内置 shell 但适用于 Java 的东西。

我看到有[http://www.beanshell.org/](http://www.beanshell.org/)但那个项目似乎不是很活跃。但它似乎是我正在寻找的。还有其他类似的项目吗？

我希望能够做这样的事情

`$ import org.foobar.Bletch`

`$ new Bletch();`

或类似的。有人做过吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:08:40.307

你总是可以使用 Clojure REPL——我这样做是为了在运行时动态地玩​​ Java 对象。

```
(import 'my.package.SomeClass)

(def a (new SomeClass))

(.methodName a arg1 arg2) 
```

只要您了解 Clojure 语法，就可以很好地工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:10:36.620

看看[Groovy Shell](http://groovy.codehaus.org/Groovy+Shell) - 这不完全是 Java，但非常接近。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:37:28.953

您可以使用[http://www.beanshell.org/](http://www.beanshell.org/)

它已有 12 年多的历史，并在许多 IDE 的调试器中使用。

# soap - GroovyWS 坏了？

> ID：12073766
> 
> 赞同：0
> 
> 时间：2012-08-22T13:02:11.837
> 
> 标签：soap, groovy, client, groovyws

我正在尝试为 IIS-WS-Endpoint 实现 SOAP webservice-client。

我的客户语言很时髦。我尝试了以下示例： http: [//groovy.codehaus.org/GroovyWS](http://groovy.codehaus.org/GroovyWS)

但不知何故，葡萄似乎坏了。当我运行`grape -V install org.codehaus.groovy.modules groovyws`它时，它给了我一些错误，这似乎是未解决的依赖关系的结果。

这是控制台输出： :: 问题摘要 :: :::: WARNINGS [NOT FOUND ] org.springframework#spring-core;2.5.6!spring-core.jar (3ms)

```
 ==== localm2: tried

          file:C:\Users\username/.m2/repository/org/springframework/spring-core/2.5.6/spring-core-2.5.6.jar

                [NOT FOUND  ] org.springframework#spring-context;2.5.6!spring-context.jar (1ms)

        ==== localm2: tried

          file:C:\Users\username/.m2/repository/org/springframework/spring-context/2.5.6/spring-context-2.5.6.jar

                [NOT FOUND  ] org.springframework#spring-web;2.5.6!spring-web.jar (0ms)

        ==== localm2: tried

          file:C:\Users\username/.m2/repository/org/springframework/spring-web/2.5.6/spring-web-2.5.6.jar

:: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS 
```

有什么建议么？或者也许是使用 CXF 和 Groovy 的教程。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:17:35.827

好的......在再次阅读[http://groovy.codehaus.org/GroovyWS](http://groovy.codehaus.org/GroovyWS)后更加仔细地发现，它清楚地表示“确保拥有正确的 GroovyWS 葡萄配置文件”，[此处](http://groovy.codehaus.org/GroovyWS+grape+config+file)描述。

现在它起作用了。

# javascript - RequireJS：如果 CDN 失败，本地回退

> ID：12073768
> 
> 赞同：29
> 
> 时间：2012-08-22T13:02:15.240
> 
> 标签：javascript, requirejs, cdn

在我的主干应用程序中，我需要为每个所需文件提供后备，以防提供它们的 CDN 失败。

我试过`require.onError`这样覆盖：

```
require.onError = function (err) {
    if (err.requireType === 'timeout') {
        var url = err.requireModules;

        if (!!~url.indexOf("jquery/"))
            console.warn("CDN timed out, falling back to local jQuery.js")
            require(["libs/jquery"]);
            return;
        if (!!~url.indexOf("jqueryui/"))
            console.warn("CDN timed out, falling back to local jQueryUI.js")
            require(["libs/jqueryui"]);
            return;
        if (!!~url.indexOf("underscore"))
            console.warn("CDN timed out, falling back to local underscore.js")
            require(["libs/underscore"]);
            return;
        if (!!~url.indexOf("backbone"))
            console.warn("CDN timed out, falling back to local backbone.js")
            require(["libs/backbone"]);
            return;
    }
} 
```

问题是这将异步加载回退文件。我需要按顺序加载这些文件，就像我使用`order!`插件的原始 require 语句一样。

使用 overridden `onError`：当 CDN 加载失败时，会启动 fallback 加载，但不等待。这带来了一个问题，因为脚本是根据它们的依赖关系加载的。这是我的原始`require`声明，这取决于 CDN：

```
require([
    "order!http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",
    "order!http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js",
    "order!http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js",
    "order!http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js",
    "order!utils/date",
    "order!core/core",
    "order!core/errors",
    "order!core/constants"
], function() {
    ...
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-22T14:25:09.460

您使用的是哪个版本的 RequireJS？看来您可能希望将 jQuery 的后备配置为配置中的路径，然后将 jQuery 设置为对需要它的其他模块的依赖。如果您使用 ~> 2.0，则类似于（未经测试）：

```
// in your requirejs config
requirejs.config({
    //To get timely, correct error triggers in IE, force a define/shim exports 
    // check.
    enforceDefine: true,
    paths: {
        jquery: [
            'http://somecdn.com/jquery.min', // your cdn
            'lib/jquery' // your fallback
        ],
        jqueryui: "http://somecdn.com/jquery-ui.min.js"
    },
    shim: {
      jqueryui: ['jquery']
    }
});

// then in your requires
require([jquery, jqueryui, foo, bar], function($) {
    // stuff
}); 
```

[他们在 wiki 中](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-pathsfallbacks)讨论如何做到这一点。如果您不使用 v2.x，这里也有一种处理方法。

如果所有模块都配置为指定它们自己的依赖项，那么您也不必担心`order!`指令。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-22T14:25:41.830

我已经找到了 RequireJS 2.xx 中提供的问题的解决方案 有对这个解决方案的需求，所以反过来，RequireJS`paths`在他们的配置中添加了一个对象。如果 CDN 失败，这将为 CDN 提供回退功能。

还需要注意的是，该`order!`插件在 Require 2.0 中已被弃用，所以我还需要利用`shim`对象来定义依赖关系。这实际上是一个非常有趣的想法。

这是我的新require.config：

```
require.config({
    urlArgs: "ts="+new Date().getTime(), // disable caching - remove in production
    paths: {
        jquery: [
            "http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min",
            "libs/jquery"
        ],
        jqueryui: [
            "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min",
            "libs/jqueryui"
        ],
        underscore: [
            "http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min",
            "libs/underscore"
        ],
        backbone: [
            "http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min",
            "libs/backbone"
        ]
    },
    shim: {
        'jqueryui': ['jquery'],
        'underscore': ['jquery'],
        'backbone': ['underscore'],
        'core/core': ['underscore'],
        'core/errors': ['core/core'],
        'core/constants': ['core/core']
    }
}); 
```

# iphone - iPhone - 从 ISO 8859-1 (Latin-1) 编码转换文本

> ID：12073776
> 
> 赞同：0
> 
> 时间：2012-08-22T13:02:39.750
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, encoding

我从服务器获取文本，文本用`ISO 8859-1`. 如何将其转换为 UTF-8？

现在我只是替换这样的特殊字符：

```
text = [text stringByReplacingOccurrencesOfString:@"&Eacute;" withString:@"Ê"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:11:08.893

```
NSString* myString = [[NSString alloc] initWithData: theData 
                                           encoding: NSISOLatin1StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T06:06:13.193

对于斯威夫特 2.2

如果您的字符串是 HTML 编码的：

```
func replaceChars(htmlEncodedString: String) -> String {
    do {
        let encodedData = htmlEncodedString.dataUsingEncoding(NSUTF8StringEncoding)!
        let attributedOptions : [String: AnyObject] = [
            NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType,
            NSCharacterEncodingDocumentAttribute: NSUTF8StringEncoding
        ]
        let attributedString = try NSAttributedString(data: encodedData, options: attributedOptions, documentAttributes: nil)
        return attributedString.string
    } catch {
        fatalError("Unhandled error: \(error)")
    }
} 
```

如果您的字符串采用 ISO 8859-1 (Latin-1) 编码：

```
func decodeISO88591(str:String) -> String {
   if let utfData = str.dataUsingEncoding(NSISOLatin1StringEncoding) {
       if let utf = String(data: utfData, encoding: NSUTF8StringEncoding) {
           return utf
       }
    }
    return str
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T14:47:21.520

我遇到了同样的问题。即使你得到`data`你收到的格式为 ISO 拉丁字符串，

```
NSString* latin1String = [[NSString alloc] initWithData:data encoding:NSISOLatin1StringEncoding]; 
```

或者如果文本是来自 latin1 字符串的 NSString，

```
NSData *utfData = [latin1String dataUsingEncoding:NSUTF8StringEncoding];
NSString *utf = [[NSString alloc] initWithData:utfData encoding:NSUTF8StringEncoding]; 
```

这是 NSJSONSerialization 特别需要的，因为它只接受 utf8 编码的字符串。

# python - 在python中使用lxml解析HTML文档

> ID：12073781
> 
> 赞同：0
> 
> 时间：2012-08-22T13:03:01.643
> 
> 标签：python, lxml

我刚刚下载了 lxml 来解析损坏的 HTML 文档。我正在阅读 lxml 的文档，但找不到给定 HTML 文档，我们如何使用 lxml 检索文档中的文本。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:12:35.480

这很简单：

```
from lxml import html
html_document = ... #Get your document contents here from a file or whatever

tree = html.fromstring(html_document)
text_document = tree.text_content() 
```

如果您只想要特定块的内容（例如 body 块），那么您可以使用 xpath 表达式访问它们：

```
body_tags = tree.xpath('//body')
if body_tags:
  body = body_tags[0]
  text_document = body.text_content()
else:
  text_document = '' 
```

# php - 如何增加数据库条目？

> ID：12073783
> 
> 赞同：0
> 
> 时间：2012-08-22T13:03:11.573
> 
> 标签：php, mysql

主要问题是假设我现在有一个值存储在数据库 = 26 中，如果用户执行某些操作并且我必须将值增加 1，sql 中是否有任何预定义的方式来执行此操作。

现在我正在提取值然后添加 1 然后再次更新条目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T13:04:24.073

是的，运行如下 SQL：

```
update yourTableName 
    set theColumnYouWant=theColumnYouWant+1 
    where yourConditions=YourConditionCriteria 
```

更新语法的具体示例：

```
mysql> select * from first;
+------+-------+
| bob  | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    5 | eeee  |
+------+-------+
5 rows in set (0.00 sec)

mysql> update first set bob=bob+1 where title='eeee';
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from first;
+------+-------+
| bob  | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | eeee  |
+------+-------+
5 rows in set (0.00 sec) 
```

# jquery - jquery ajax setTimeout 0 毫秒

> ID：12073790
> 
> 赞同：1
> 
> 时间：2012-08-22T13:03:20.810
> 
> 标签：jquery, ajax

> **可能重复：**
> [为什么 setTimeout(fn, 0) 有时会有所帮助？](https://stackoverflow.com/questions/779379/why-does-settimeoutfn-0-sometimes-help)

阅读 jQuery 1.8 源码，

为什么它以 0 ms 延迟执行 setTimeout ？（而不仅仅是执行回调？）

[https://github.com/jquery/jquery/blob/1.8.0/src/ajax/xhr.js#L196](https://github.com/jquery/jquery/blob/1.8.0/src/ajax/xhr.js#L196)

```
 if ( !s.async ) {                       
                    callback();
                } else if ( xhr.readyState === 4 ) {

                    // (IE6 & IE7) if it's in cache and has been
                    // retrieved directly we need to fire the callback

         //-------->// WHY do setTimeout with 0 ms delay ?
                    setTimeout( callback, 0 );
                } else {
                    handle = ++xhrId; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:06:28.120

这是针对 IE6 和 IE7 的特性的一种解决方法，它可以从缓存中检索 AJAX 结果而无需触发`XMLHTTPRequest`回调，而是立即将其`readyState`属性设置为`4`。

然而，API 契约`$.ajax`要求它立即返回异步请求（即不调用程序员提供的回调）。

因此`$.ajax`，对这些缓存结果调用测试，然后使用`setTimeout`.

调用完成，`$.ajax`一旦浏览器重新进入它的事件处理循环，它就会找到（立即过期的）定时器事件并调用它的回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:05:34.583

原因是 setTimeout 将该函数添加到浏览器事件队列中，因此只有在队列中的前面事件处理完毕后才会调用它，从而允许设置超时的函数的其余部分完成执行。

# java - 是否有任何 Talend 组件来创建 ANSI X12 edi 文件？

> ID：12073794
> 
> 赞同：0
> 
> 时间：2012-08-22T13:03:32.173
> 
> 标签：java, jakarta-ee, ansi, edi, talend

是否有任何 Talend 组件来创建 ANSI X12 edi 文件？我需要处理以下 EDI 事务集：

```
*846 - Inventory Inquiry/Advice
*856 - Ship Notice/Manifest
*888 - Item Maintenance
*940 - Warehouse Shipping Order
*943 - Warehouse Stock Transfer Shipment Advice
*944 - Warehouse Stock Transfer Receipt Advice
*945 - Warehouse Shipping Advice
*947 - Warehouse Inventory Adjustment Advice
*204 - Motor Carrier Load Tender
*210 - Motor Carrier Freight Details and Invoice
*212 - Motor Carrier Delivery Trailer Manifest 
```

EDI 必须使用 AS2 标准来回发送。

由于我是 EDI 新手，甚至不知道如何使用 AS2 格式发送 EDI。

提前致谢。

更新于 2012 年 9 月 3 日。

我找到了 X12 解析器，它似乎正在工作。我能够解析 856 EDI 事务集。我还没有尝试其他格式。

以下是链接：

[http://x12-parser.googlecode.com/svn/trunk/](http://x12-parser.googlecode.com/svn/trunk/)

如果有人对 X12 解析器有任何宝贵的意见或建议，请在此处发布。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:49:28.483

您可能想查看 Altova 的[MapForce](http://www.altova.com/mapforce.html)。一个图形映射器（很好），但是转换是 Java 代码。

对于 AS2，我推荐[Cleo Lexicom](http://www.cleo.com/data-transfer-software/)或[Liaison ECS](http://liaison.com/products/integrate/ecs)。两者都是行之有效的、具有成本效益的商业软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:44:30.973

看看[奥克兰数据转换器](http://oaklandsoftware.com/data-transformer)。它处理包括 X12 在内的各种格式，并与 Talend ESB (Apache Camel) 很好地集成。许多 Talend 客户已使用此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T18:50:34.777

我们使用 Altova MapForce 和 Mendelson AS2 Opensource 来满足我们的 EDI 需求。

MapForce 使制图变得轻而易举，Mendelson AS2 服务器易于设置和使用。

MapForce 的一个好处是它允许您将映射导出到*免版税*的Java、C#、C++、XQuery 和 XSLT 1.0/2.0 代码，因此它是一个简单的产品。

我不是生成代码（空的 catch 语句等）的忠实粉丝，但它可以工作并且代码可供您编辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:32:00.853

也许您可以在 Talend 中集成机器人 (http://bots.sourceforge.net) 以进行这些 edi 翻译。对于 AS2： - [http://sourceforge.net/projects/openas2/](http://sourceforge.net/projects/openas2/) - [http://as2.mendelson-ec.com/](http://as2.mendelson-e-c.com/)

# php - PHP制作时间变量？5 小时然后回显？

> ID：12073800
> 
> 赞同：1
> 
> 时间：2012-08-22T13:03:59.757
> 
> 标签：php, date, time

只是一个简单的问题，我如何能够将以下日期/时间变量编辑为 PLUS(+) 小时数 5，此时它是美国时间，我需要将所有内容转换为英国时间。

`$tme = date('H:i : d F Y');`

有任何想法吗...？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T13:07:02.273

使用`DateTime`对象，它更健壮，并且会给您带来更少的麻烦：

```
$time = new DateTime("now", new DateTimeZone("America/New_York"));
$time->setTimezone(new DateTimeZone("Europe/London"));

echo $time->format("H:i:s Y-m-d"); 
```

另请注意，有了这个，您可以处理与时区相关的奇怪问题（例如某些时区在不同日期发生变化，有些时区取决于年份等），而无需进行任何类型的计算，DateTimeZone 对象会为您完成 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:07:07.797

将此添加到页面顶部：

```
date_default_timezone_set('Europe/London'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:07:21.423

使用 date_default_timezone_set 函数

```
date_default_timezone_set('Europe/London'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:07:25.170

```
$tme = date('H:i : d F Y', time() + 60*5); 
```

但您可能对[DateTime 对象感兴趣](http://php.net/manual/en/book.datetime.php)

或使用更改时区

```
date_default_timezone_set('Europe/London'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:07:52.970

使用`DateTime`and`DateTimeZone`代替：

```
// U.S. timezone (EST)
$tme = new DateTime('now', new DateTimeZone('America/New_York'));
echo $tme->format('H:i : d F Y');

// U.K. timezone
$tme->setTimeZone(new DateTimeZone('Europe/London'));
echo $tme->format('H:i : d F Y'); 
```

# c# - Wix 构建错误

> ID：12073801
> 
> 赞同：13
> 
> 时间：2012-08-22T13:04:02.030
> 
> 标签：c#, wix

运行 wix 时出现以下错误：

出现错误 MSB4019：未找到导入的项目“C:\Program Files\MSBuild\Microsoft\WiX\v3.x\Wix.targets。确认声明中的路径正确，并且该文件存在于磁盘上。

[![在此处输入图像描述](../Images/774ceb621fbe7d7f0054ed9e0065379a.png)](https://i.stack.imgur.com/JnoB6.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T13:04:02.030

不确定可能导致此问题的其他问题，但我不知道 Wix 没有与 ms build 一起安装。

我试图构建一个位于我们的构建服务器上的项目并遇到了这个问题。

您需要先从[http://wix.sourceforge.net/](http://wix.sourceforge.net/)下载并安装它。

另一个常用的包是 MSBuild 社区任务，可从

[https://github.com/loresoft/msbuildtasks](https://github.com/loresoft/msbuildtasks)

最后一个稳定版本可从名为 nightly builds 的位下载！

这将给出类似的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-17T05:52:38.147

检查您的 Visual Studio 版本

1.  VS 2017[下载](https://marketplace.visualstudio.com/items?itemName=WixToolset.WixToolsetVisualStudio2017Extension) [![在此处输入图像描述](../Images/ab6b616a6b224b39b703ff480874d58e.png)](https://i.stack.imgur.com/prAnb.png)
2.  VS 2019[下载](https://marketplace.visualstudio.com/items?itemName=WixToolset.WixToolsetVisualStudio2019Extension) [![在此处输入图像描述](../Images/4bc7a7b57b36cf8304800f6ae501e448.png)](https://i.stack.imgur.com/PCqqL.png)

# asp.net - ASP.NET WebForms：为什么我不能下载通过我的应用程序上传的某些文件？

> ID：12073807
> 
> 赞同：0
> 
> 时间：2012-08-22T13:04:25.863
> 
> 标签：asp.net, file-upload

我有一个简单的`asp:FileUpload`控件，可以将文件保存到服务器。它将文件保存到磁盘，然后在数据库中创建对它的路径引用。我们使用以下标记在 DataGrid 中显示这些文件：

```
<ItemTemplate>
    <a href='<%# MyApp.Global_asax.UploadPath + DataBinder.Eval(Container.DataItem, "FolderName") + "/" +  DataBinder.Eval(Container.DataItem, "FileName") %>' target="_blank">
        <%# DataBinder.Eval(Container.DataItem, "FileName") %>
    </a>
</ItemTemplate> 
```

所以，正如你所看到的，这没什么特别的。但是，尝试下载某些文件会导致 IE9 中出现此消息：

```
找不到页面
您要查找的页面可能已被删除、名称已更改或暂时不可用。
```

我在 FireFox 中收到了类似的消息。

到目前为止，这仅发生在`.DOTM`文件中。我认为它可能是文件名，所以我将名称更改为简单的名称`xxx.dotm`，但仍然无法下载。但是，当我将扩展名更改为`TXT`so it's`xxx.txt`时，我可以很好地下载文件。

有没有人能给我一个关于这里发生了什么的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:44:54.763

您需要在 IIS 中为该文件扩展名添加 MIME 类型。

对于 IIS 6.0：

[http://support.microsoft.com/kb/326965](http://support.microsoft.com/kb/326965)

对于 IIS 7.0：

[http://technet.microsoft.com/en-us/library/cc725608(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc725608(v=ws.10).aspx)

# python - 使用网格布局管理器发现元素大小？

> ID：12073814
> 
> 赞同：0
> 
> 时间：2012-08-22T13:04:51.253
> 
> 标签：python, tkinter

TkDocs网站是一个[很好](http://www.tkdocs.com/tutorial/grid.html)的资源，但它并不完整。[手册页](http://www.tcl.tk/man/tcl8.5/TkCmd/grid.htm)是完整的，但当然没有记录 Python 绑定。“[如何在 Tkinter 中获取屏幕大小？](https://stackoverflow.com/questions/3949844/python-calculate-the-screen-size/3949983) ”指出可以使用 root.winfo_screenwidth() / root.winfo_screenheight() 获取窗口大小，但这仅针对整个窗口，而不是网格中的单个单元格。

以 TkDocs 代码为例，我怎样才能找到例如第三行的高度，以便我可以设置一个最小尺寸来防止按钮被隐藏？我尝试使用 bbox() 或 grid_bbox() 没有返回 (0,0,0,0) 以外的任何内容。返回实际大小的正确语法是什么？

- - - 编辑 - - -

代码现在显示如何在从事件循环调用的例程中使用 bbox()，并返回正确的值。

```
from tkinter import *
from tkinter import ttk

# bbox() works after window has been rendered
def e_config(event):
    w, h = event.width, event.height
    print("Resize: content", w, "x", h)
    print("content bbox=", content.bbox())

def OK():
    print("OK: winfo, bbox:")
    print("    root: ", root.winfo_width(), root.winfo_height(), root.bbox())
    print(" content: ", content.winfo_width(), content.winfo_height(), content.bbox())
    print("   frame: ", frame.winfo_width(), frame.winfo_height(), frame.bbox())

root = Tk()

content = ttk.Frame(root, padding=(5,5,12,12))
content.bind("<Configure>", e_config)

frame = ttk.Frame(content, borderwidth=5, relief="sunken", width=200, height=100)
namelbl = ttk.Label(content, text="Name")
name = ttk.Entry(content)

onevar = BooleanVar()
twovar = BooleanVar()
onevar.set(True)
twovar.set(False)

one = ttk.Checkbutton(content, text="One", variable=onevar, onvalue=True)
two = ttk.Checkbutton(content, text="Two", variable=twovar, onvalue=True)
ok = ttk.Button(content, text="Okay", command=OK)
cancel = ttk.Button(content, text="Cancel")

content.grid(column=0, row=0, sticky=(E, W))    # Don't resize vertically
frame.grid(column=0, row=0, columnspan=3, rowspan=2)
namelbl.grid(column=3, row=0, columnspan=2)
name.grid(column=3, row=1, columnspan=2)
one.grid(column=0, row=3)
two.grid(column=1, row=3)
ok.grid(column=3, row=3)
cancel.grid(column=4, row=3)

root.configure(bg="#234")
root.columnconfigure(0, weight=1)
root.rowconfigure(0, weight=1)
content.columnconfigure(0, weight=1)
content.columnconfigure(1, weight=1)
content.columnconfigure(2, weight=1)
content.columnconfigure(3, weight=1)

# This doesn't work - screen hasn't been rendered yet
print("pre-init bbox ", content.bbox())

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:09:44.883

方法`winfo_width`和`winfo_height`将为您提供给定小部件的实际大小。

请注意，`bbox`在小部件实际呈现到屏幕之前，这些方法和 都不会为您提供任何有用的信息。如果你需要使用它们，你需要确保事件循环有机会更新显示。

另外，请注意，该方法返回小部件*内部*`bbox`从属小部件的边界框，而不是小部件本身的边界。这就是为什么 frame.grid_bbox() 的结果返回全零的原因——它里面什么都没有，所以边界框是 0,0,0,0。但是，您应该在渲染显示后查看数字。例如，在我的盒子上，我得到 (0, 0, 352, 125)*`content.box()`*

# android - 为什么应用程序在调用 onCreate() 之前就占用了这么多内存？

> ID：12073822
> 
> 赞同：0
> 
> 时间：2012-08-22T13:05:07.103
> 
> 标签：android, memory, memory-management, bitmap, oncreate

我注意到一件奇怪的事情，我想知道它是否一直都是这样：

在 android ICS 上，我在启动的`onCreate`第一个活动的第一行设置了一个断点（即使在 hello-world 应用程序上），我通过`DDMS`选项“ `update-heap`”选择了查看当前状态记忆 。

我注意到该应用程序使用了大约 10MB，9MB 很可能是位图类型。

到底是怎么回事？为什么即使是一个 hello-world 应用程序也会使用这么多内存？可能是为了优化（在使用之前预先分配内存）？

它是否也出现在预蜂窝版本上（无法监控位图，所以我看不到它在那里发生）？

# c++ - cuda 5.0支持的c++版本

> ID：12073828
> 
> 赞同：8
> 
> 时间：2012-08-22T13:05:13.923
> 
> 标签：c++, c++11, cuda

我找不到 CUDA 5.0 支持哪个版本/哪个 c++ 概念。我在 CUDA 5.0 RC 随附的编程指南或参考指南中找不到任何信息。特别是我想知道 CUDA 5.0 是否支持 C++11。有人可以指点我寻找这些信息的地方吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T09:45:20.533

显然 5.0 RC 中没有可用的 C++11 功能。nvcc 仍然不理解标准包括 gcc 4.6 中使用的 C++11 语法（请参阅[使用 CUDA 和 C++11 时出错](https://stackoverflow.com/questions/9057123/error-while-using-cuda-and-c11)）：

$ nvcc --版本

```
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2012 NVIDIA Corporation
Built on Tue_Jul_31_17:46:14_PDT_2012
Cuda compilation tools, release 5.0, V0.2.1221 
```

$ 猫 test.cu

```
int main()
{
} 
```

$ nvcc -Xcompiler "-std=c++0x" test.cu

```
/usr/include/c++/4.6/x86_64-linux-gnu/./bits/c++config.h(159): error: identifier "nullptr" is undefined

/usr/include/c++/4.6/x86_64-linux-gnu/./bits/c++config.h(159): error: expected a ";"

/usr/include/c++/4.6/bits/exception_ptr.h(93): error: incomplete type is not allowed 
```

...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T15:13:58.223

发行说明包含支持平台列表，包括支持的 GCC 版本，[5.0 候选版本发行说明](http://developer.download.nvidia.com/compute/cuda/5_0/rc/docs/CUDA_Toolkit_Release_Notes_And_Errata.txt)显示，某些发行版最新支持的 GCC 是 4.6（其他发行版更旧）。

一旦您知道支持哪个 GCC 版本，请与 GCC [C++0x/C++11 功能列表](http://gcc.gnu.org/projects/cxx0x.html)进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:16:50.647

它不支持 gcc 4.7，因此[某些 c++11 功能](http://gcc.gnu.org/projects/cxx0x.html)不可用：

```
- Non-static data member initializers
- Template aliases :(
- Delegating constructors
- User-defined literals
- Extended friend declarations
- Explicit virtual overrides 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:46:48.427

现在，如果您询问 Cuda/C++ 或 THRUST 库。在容器、迭代器和算法方面，thrust 库与 stl c++ 非常相似，但它不是 c++ 11。

nvcc 编译 gpu 代码。nvcc 支持（Cuda C 和 Cuda C++ /thrust） gcc 编译 cpu 代码。gcc（支持 C 和 C++）。

# android - 在 ListView 中打印数据而不是 toast

> ID：12073829
> 
> 赞同：0
> 
> 时间：2012-08-22T13:05:15.200
> 
> 标签：android, android-listview

我有问题，我从一项活动中获取我的数据。我想使用列表视图打印它。我该怎么做。？

```
 Intent intent = getIntent();
    ArrayList<String> fruitSelection = intent.getStringArrayListExtra("fruits");

    if (fruitSelection != null) {
        // use a toast to display selected fruits
        if (fruitSelection.size() > 0) {
            StringBuilder sb = new StringBuilder();
            sb.append("Your selection of fruits\n\n");
            for (String s : fruitSelection) {
                sb.append("* ").append(s).append("\n");
            }
            Toast toast = Toast.makeText(this, sb.toString().trim(), Toast.LENGTH_LONG);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
        } else {
            Toast toast = Toast.makeText(this, "Nothing selected", Toast.LENGTH_LONG);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();}
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:09:23.943

创建一个扩展[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)的类并在 ListView 上使用 .setAdapter()。

有关更多信息，请参见： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:11:24.527

假设您正在另一个活动中查看“水果”数据，请将第二个活动设置为扩展`ListActivity`并`Adapter`在 ListActivity 的 ListView 上设置以访问水果数组。

```
ListView listView = getListView();
listView.setAdapter(new ArrayAdapter<String>(this.getApplicationContext(), R.layout.list_view_item, fruitSelection); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:12:20.573

```
Intent intent = getIntent();
    ArrayList<String> fruitSelection = intent.getStringArrayListExtra("fruits");

ListView  listView = (ListView) findViewById(R.id.listView);

        ArrayAdapter<String> adapter; adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, android.R.id.text1, fruitSelection);

        listView.setAdapter(adapter); 

    listView = (ListView) findViewById(R.id.listView);

            adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, android.R.id.text1, values);

            listView.setAdapter(adapter); 
```

# android - 小部件的 Android 首选项

> ID：12073833
> 
> 赞同：0
> 
> 时间：2012-08-22T13:05:23.523
> 
> 标签：android, android-widget

假设，小部件使用登录名和密码来检索一些数据。我将登录名和密码存储在 sharedPreferences 中。

只要我有 1 个小部件，一切正常。当我在 sharedPreferences 中添加第二个小部件登录名和密码时，这两个小部件都被替换了。

这个问题的典型解决方案是什么>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:13:41.123

在通常情况下，AppWidget 的唯一标识符是 appWidgetId。因此，您可以通过这种方式组织您的偏好。

假设您有一个用于存储登录信息的密钥：

```
public static final String PREFS_LOGIN = "com.example.prefs.LOGIN"; 
```

以及两种存储值和检索值的方法：

```
public void setLogin(String login) {
    prefs.edit().putString(PREFS_LOGIN, login).commit();
}

public String getLogin() {
    return prefs.getString(PREFS_LOGIN, "");
} 
```

要确保首选项存储每个 appWidgetId 的登录值并检索正确的值，您可以将 appWidgetId 传递给这些方法：

```
public void setLogin(String login, int appWidgetId) {
    prefs.edit().putString(PREFS_LOGIN + appWidgetId, login).commit();
}

public String getLogin(int appWidgetId) {
    return prefs.getString(PREFS_LOGIN + appWidgetId, "");
} 
```

希望这可以帮助。

# c# - 使用 csla 和实体框架进行 Visual Studio 2012 测试

> ID：12073836
> 
> 赞同：14
> 
> 时间：2012-08-22T13:05:36.900
> 
> 标签：c#, mstest, visual-studio-2012, entity-framework-4.3, csla

在 VS2010 中，我的 MSTest 测试运行良好。

在 VS2012 中运行时出现错误。该测试使用自定义业务主体设置 Csla.ApplicationContext.User。当 EntityFramework 被要求提供一个新的 ObjectContext 时，我收到一个 SerializationException ，说找不到我的自定义业务主体类型。

通过 VS2012 的测试运行器或 Resharper7 的测试运行器运行时，所有使用 EntityFramework 的测试都会失败。我已经尝试过 NCrunch 的测试运行程序，它们都通过了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:47:24.917

我发现了我真正的问题。VS2012 在单独的 AppDomain 中运行测试，我们的数据访问层通过反射加载。仍然不确定为什么 EF 需要了解主体，但我们的解决方案是在访问 EF 之前将我们的主体重置为 GenericPrincipal，然后放回原始主体。我仍然在思考 IoC 容器可能会缓解这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:33:31.070

您还应该注意 .net 4.5 声明主体方法。`WindowsIdentity.GetCurrent().Name;`
我在 VS2012 上使用 EF5.0 目标 .net4.5 目标 .net4.5 测试和 之间的区别 `Thread.CurrentPrincipal`

我在 Forms auth 下使用了一个像这样的小程序。所以 Windows Auth 和 Forms Auth 可以一起玩。

不是完全相同的情况，但它确实突出了当一切正常时被忽略的重要区别。
值得快速阅读... [http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.current](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.current)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Security.Claims;
using System.Security.Principal;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Web;

namespace BosIdentityManager
{
public class BosPrincipal
{
    /// <summary>
    /// The current principal is set during FORMS authentication.  If WINDOWS auth mode is in use, Windows sets it.
    /// </summary>
    /// <returns> The Name from Thread.CurrentPrincipal.Identity.Name unless alternate delegate is configured</returns>  
    public static string GetCurrentUserName()
    {
    //   http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.current   
    //  with forms auth and windows integrated,ClaimsPrincipal.Current will be set.

        var prin = ClaimsPrincipal.Current;  //normally this reverts to Thread.CurrentPrincipal, but can chnage !
        return prin.Identity.Name;

    }

    public static string GetCurrentWindowsUserName()
    {
        return WindowsIdentity.GetCurrent().Name;   
    }

    public static void SetPrincipal(BosMasterModel.Membership memb)
   {
       var claims = new List<Claim>(){ new Claim(ClaimTypes.Name, memb.SystemUser.UserName),
                                       new Claim(ClaimTypes.NameIdentifier,memb.UserId.ToString()),
                                       new Claim(ClaimTypes.Role, "SystemUser") };

       var ClaimsId = new ClaimsIdentity(claims,"Forms");

       var prin = new ClaimsPrincipal(ClaimsId);
       Thread.CurrentPrincipal = prin;

   }
}
} 
```

# java - 如果 MySql 或 phpMyAdmin 包含特殊字符，则给出空指针

> ID：12073839
> 
> 赞同：1
> 
> 时间：2012-08-22T13:05:53.517
> 
> 标签：java, android, mysql, phpmyadmin, bufferedreader

我使用了本教程：[http](http://www.helloandroid.com/tutorials/connecting-mysql-database)
://www.helloandroid.com/tutorials/connecting-mysql-database 这表现很棒。但是我得到了这个名字`Eugène`，但是当我尝试从数据库中取出这个名字时，它给出了一个`nullPointer`，但是当我把它改成 时`Eugne`，它就会显示这个名字。
是否可以将“è”之类的字符从数据库显示/获取到android？
我读了一些教程，但我无法让它工作。

```
<?php

mysql_connect("127.0.0.1","root","root");

mysql_select_db("peopledata");

$q=mysql_query("SELECT * FROM people2 WHERE voornaam LIKE '%%'");
//$q=mysql_query("SELECT * FROM people WHERE voornaam ='""'");

while($e=mysql_fetch_assoc($q))

    $output[]=$e;

print(json_encode($output));

mysql_close();

?> 
```

这是我的 android java 部分：

```
try {

            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {

                sb.append(line + "\n");
            }

            is.close();
            result = sb.toString();
        } catch (Exception e) {
            android.util.Log.e("log_tag",
                    "Error converting result " + e.toString());
        } 
```

**编辑 1**

```
08-22 16:24:56.935: I/log_tag(14424): id: 3, name: null; 
```

但它没有显示错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:48:54.080

找到答案：在连接数据库之前输入这一行：`mysql_query("SET NAMES`utf8 。 所以从：`");`

```
mysql_connect("127.0.0.1","root","root");

mysql_select_db("peopledata"); 
```

至：

```
mysql_connect("127.0.0.1","root","root");
mysql_query("SET NAMES `utf8`");
mysql_select_db("peopledata"); 
```

# ruby - 使用 Clojure 的 gem 中提供的 JRuby 类

> ID：12073844
> 
> 赞同：9
> 
> 时间：2012-08-22T13:06:17.353
> 
> 标签：ruby, clojure, interop, gem, jruby

我非常简单地需要在 Clojure 中使用 Ruby 类。复杂的因素是该类是在 gem 中提供的。最佳方法是按照以下方式设置我的 Leiningein 项目文件：

```
(project foo ""
  ...
  :dependencies [[clojure ...]
                 [jruby ...  ]]) 
```

同样，我更愿意简单地将 gem 及其依赖项检查到本地 repo 目录中。因此，从我的理想用法来看，应该是：

```
(ns bar.baz
  (require [jruby.something :as jruby])

(def obj (jruby/CreateAnInstance "TheGemClass"))

(def result (jruby/CallAMethod obj "method_name" some args)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T18:06:05.947

[`hello-world`以下是使用 JRuby 和 Clojure 运行gem](http://rubygems.org/gems/hello-world)的简短步骤列表以及一些参考资料。事实上，这些步骤只是一个简短的草图，说明了参考资料中的材料如何组合在一起（带有一些`project.clj`条目）。第一个参考文献是 Yoko Harada (@yokolet's) 博客[上 Clojure Web App](http://yokolet.blogspot.com/2011/09/haml-on-clojure-web-app.html)上的 Haml，它实际上使用了一种稍微不同的方式来调用 JRuby，但其中包含关于如何编写`require("...")`用于 JRuby 和类路径上的 gem 的行的关键注释。

1.  添加`[org.jruby/jruby-complete "1.6.7.2"]`到您的`:dependencies`并让 Leiningen 获取依赖项。

2.  在项目根目录中创建一个`gems`目录并将其添加到`:resource-paths`您的`project.clj`这需要 Leiningen 2。请参阅[Leiningen 源代码](https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L254)以获取正确的格式。

3.  说

    ```
    # see reference 4
    GEM_HOME=gems GEM_PATH=gems java -jar ~/.m2/repository/org/jruby/jruby-complete/1.6.7.2/jruby-complete-1.6.7.2.jar -S gem install hello-world 
    ```

    在项目根目录中。

4.  启动您选择的 REPL 服务`GEM_HOME`并按`GEM_PATH`上述方式设置。（我用 . 测试了这个`lein2 swank`。）

5.  在 REPL 上说以下内容：

    ```
    ;;; see reference 2, first snippet
    (let [runtime (JavaEmbedUtils/initialize (list))
          evaler  (JavaEmbedUtils/newRuntimeAdapter)]
      (doseq [ruby-expr ["require('rubygems')"
                         "require('gems/hello-world-1.2.0/lib/hello-world')"]]
        (.eval evaler runtime ruby-expr))) 
    ```

6.  看看`nil`返回值，以及打印到启动 REPL 服务的终端的几行代码。

参考：

1.  Haml 在Yoko Harada (@yokolet's) 博客上的[Clojure Web 应用程序](http://yokolet.blogspot.com/2011/09/haml-on-clojure-web-app.html)
2.  [JRuby 1.1.6：](http://blog.nicksieger.com/articles/2009/01/10/jruby-1-1-6-gems-in-a-jar) Nick Sieger 博客上的Gems-in-a-jar
3.  在 Project Kenai 的 JRuby Wiki 上的[DirectJRubyEmbedding](http://kenai.com/projects/jruby/pages/DirectJRubyEmbedding)
4.  [在 SO 上使用 jruby-complete 中的宝石](https://stackoverflow.com/questions/8734279/consuming-gems-from-jruby-complete)（注意评论）

# asp.net - 如何在 ASP.NET 中重定向视频流

> ID：12073847
> 
> 赞同：9
> 
> 时间：2012-08-22T13:06:23.093
> 
> 标签：asp.net, video-streaming, windows-media-services, expression-encoder-4

假设有一个连续的 http 视频流（编码为 H.264）来自摄像头，其 URL 为

[http://xyz.com/videostream](http://xyz.com/videostream)

由于某些安全原因，我无法将此 URL 公开给我的用户（或假设只能在 Intranet 中访问）所以现在我想使用我的用户可以访问的 ASP.Net 应用程序将此流重定向到另一个 URL。

[http://abc.com/y](http://abc.com/y)

建议使用 ASP.NET 4.0 和 IIS 7.5 或任何其他开源插件或 Expression Encoder 实现此目的的方法。是否可以为此使用一些 URL 掩码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:21:11.587

仍在寻找最佳答案，但以下链接帮助了我：

[http://www.cctvcamerapros.com/Embedding-IP-Camera-Web-Page-s/326.htm](http://www.cctvcamerapros.com/Embedding-IP-Camera-Web-Page-s/326.htm)

[http://learn.iis.net/page.aspx/620/getting-started-with-iis-live-smooth-streaming/](http://learn.iis.net/page.aspx/620/getting-started-with-iis-live-smooth-streaming/)

[http://www.red5.org/](http://www.red5.org/)

# c# - 在 C# 中创建文件时可以指定文件版本吗？

> ID：12073848
> 
> 赞同：5
> 
> 时间：2012-08-22T13:06:24.733
> 
> 标签：c#, windows, fileversioninfo

我正在使用以下方法创建文件：

```
File.WriteAllText(FILEPATHNAME, "SOME VALUE"); 
```

创建文件时，是否可以通过编程方式指定版本？这样如果有人要使用 FileVersionInfo 对象，他们会得到我指定的版本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:09:41.750

FileVersionInfo 是可以存储在可执行文件中的二进制资源。但是，您正在编写一个文本文件，这些文件不能包含二进制资源。询问文本文件的版本（由 FileVersionInfo 定义）确实有意义

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:15:18.163

不幸的是，这是不可能的。版本信息是附加到文件的嵌入式资源，只有二进制文件才能具有嵌入式资源。

[有关详细信息，请参阅FileVersionInfo 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.aspx)的备注部分。

作为一种替代方法，您可以为正在编写的每个包含版本信息的文本文件创建一个附加文本文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T13:09:36.580

不，老实说，没有办法以*这种方式*编写文件版本，我也不知道。

可能的选项是：

在一些格式化数据中将文件版本写入文件本身。

我看到的最常见的方法是写入文件的开头或文件的第一行。因此，您可以快速访问该信息并决定是否阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T13:15:33.030

如果您**真的无法**将版本输入文件本身，则可以尝试将版本放入 NTFS“备用数据流”（ADS）中。

你需要知道你在做什么，因为它有它自己的陷阱。

# c# - GridView 的标题应该动态变化

> ID：12073851
> 
> 赞同：-1
> 
> 时间：2012-08-22T13:06:29.960
> 
> 标签：c#

我有一个`CheckBoxList`，其中有很少的项目。我希望这些项目成为`GridView`. `CheckBoxList`它应该随着“有人可以帮我解决这个问题吗？”中项目的变化而动态变化。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:12:30.587

```
 DataTable dt = new DataTable();
        for (int checked_items = 0; checked_items < checkedListBox1.CheckedItems.Count; checked_items++)
        {
            dt.Columns.Add(checkedListBox1.CheckedItems[checked_items].ToString());
        }
        dataGridView1.DataSource = dt; 
```

# java - Hangman - 隐藏字符串，如果猜对了则取消隐藏每个字符

> ID：12073860
> 
> 赞同：1
> 
> 时间：2012-08-22T13:07:10.253
> 
> 标签：java

首先，我不是要代码...我刚刚到了不知道如何进步的地步...有人可以向我解释如何开始刽子手的这一步吗？我已经有一系列按钮：

```
String  b[]={"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
for(i = 0; i < buttons.length; i++) {
    buttons[i] = new JButton(b[i]);        
    panel.add(buttons[i]);
} 
```

然后我试图隐藏的词来自一个列表：

```
public String readWord() {
  try {
    BufferedReader reader = new BufferedReader(new FileReader("Words.txt"));
    String line = reader.readLine();
    List<String> words = new ArrayList<String>();
    while(line != null) {
      String[] wordsLine = line.split(" ");
      boolean addAll = words.addAll(Arrays.asList(wordsLine));
      line = reader.readLine();
    }
    Random rand = new Random(System.currentTimeMillis());
    String randomWord = words.get(rand.nextInt(words.size()));
    return randomWord;
  } catch (Exception e) {
    return null;
  }
} 
```

现在有人可以指点我正确的方向来用“-”隐藏这个词。当用户点击正确的按钮时，字母必须出现......

如果它没有像以前那么清楚，我很抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T13:12:40.057

只需使用一个对象来解决这种情况：

```
public class HangmanWord {

    private static final char HIDECHAR = '_';

    private String original;     
    private String hidden;  

    public HangmanWord(String original) {
        this.original = original;
        this.hidden = this.createHidden();
    }

    private String createHidden() {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < this.original.length; i++) {
            sb.append(HIDECHAR);
        }
        return sb.toString();
    }

    public boolean check(char input) {
        boolean found = false;
        for (int i = 0; i < this.original.length; i++) {
            if (this.original[i].equals(input)) {
                found = true;
                this.hidden[i] = this.original[i];
            }
        }
        return found;
    }

    //getter and setter
} 
```

单击按钮时，您会检查原始单词是否包含您的字母。然后你把隐藏词中的字符变为可见。`hidden[i] = original[i]`. 我希望通过这种封装，解决方案应该更清晰。

可能的用途：

```
public class TestClass() {

    public static void main(String[] args) {
        String secret = "stackoverflow";
        int wrongGuesses = 0;
        HangmanWord hngm = new HangmanWord(secret);
        System.out.println(hngm.getHidden()); // _____________
        if (hngm.check('a')) {
            System.out.println(hngm.getHidden()); // __a_________
        }
        else {
           wrongGuesses++;
        }
        //... and so on...
    }
} 
```

如果您需要帮助理解这一点，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:20:28.303

我实际上不确定我是否解决了这个问题，但是如果您的问题是替换字符串中需要按下的字母的一个字段，我会在开始时创建两个字符串，原始单词和一个（下文中称为“隐藏字符串”）只要是原始单词，仅由“_”组成。然后你需要一些逻辑来检查按下的字母是否在单词中的位置（这应该不难，使用StringBuilder），然后将“隐藏字符串”中的相应字段更改为字母。为了在您的 GUI 上显示字符（我假设您有一个，因为您有按钮），您在其上使用某种 TextField/-View 来显示“隐藏字符串”，我只需删除 TextField 的先前内容，并且写出新的“隐藏字符串”。

希望有帮助...

编辑：实际上保存两个字符数组而不是两个字符串会更加优雅，并且也可以很容易地转换为要写出的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:13:45.197

保留 2 份字符串、单词和混淆的一份（包含“-”的一份）（最好作为 char 数组或字符串生成器）。当用户猜出一个字母时，在非混淆版本中搜索该字母的所有实例。每次找到匹配项时，将混淆字符串中该索引处的“-”更改为正确的字母。

# javascript - jQuery - 无限滚动

> ID：12073862
> 
> 赞同：1
> 
> 时间：2012-08-22T13:07:16.063
> 
> 标签：javascript, jquery, scroll, infinite

我正在尝试在我的页面上实现无限滚动，但有什么事情搞砸了，而不是在页面底部触发，而是在我滚动回顶部时触发。有谁知道是什么触发了这个？

```
$(window).scroll(function()
{
    if($(window).scrollTop() == $(document).height() - $(window).height())
    {
        alert("hello");
    }
}); 
```

我目前正在使用上面的代码，它在 jsfiddle 中工作得很好。我还尝试了一种替代方法-

```
if($(window).scrollTop() + $(window).height() == $(document).height()) 
```

注意：我正在使用 CodeIgniter（虽然我不确定这会导致问题吗？）

如果您想了解我的意思，您可以查看[http://carllawl.kwebserv.info/recent](http://carllawl.kwebserv.info/recent)上的测试页面（只需向下滚动然后返回即可查看我的意思）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:13:48.053

**用这个**

```
 $(window).scroll(function() {
    if ($(window).scrollTop() <= $(document).height() - $(window).height() && $(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
    yourfunctionhere()
  }
 }); 
```

# java - 无法在 Sonar 中显示自定义指标值

> ID：12073867
> 
> 赞同：1
> 
> 时间：2012-08-22T13:07:21.807
> 
> 标签：java, rest, sonarqube

我在 Sonar 中有一个名为 XMetObj 的自定义度量，位于域“复杂性”下。我已将“自定义措施”添加到项目中。现在，在尝试通过 java RESTful 客户端访问它时，应用程序无法检测到此措施。

```
 Sonar sonar = Sonar.create("http://localhost:9000", "admin", "admin");
    String prjKey = "sampletest:junit";
    Query<Resource> resourceQuery = ResourceQuery.createForMetrics(prjKey, "Custom Measures", "Complexity", "XMetObj");
    if(resourceQuery==null){
        return;
    }
    Resource metrics = sonar.find(resourceQuery);
    if(metrics==null){
        return;
    }
    List<Measure> measures = metrics.getMeasures();
    for(Measure m:measures){
        m.setData("metrics");
        System.out.println(m.getData());
    } 
```

我能够获得某些项目的指标，但指标列表仍然为空。我也在尝试将新数据插入到这个自定义指标中，但这也失败了。这是显示指标的正确方法吗？我没有使用插件，因为度量值已经存储在数据库中，我希望这些值是特定于项目的，但具有来自外部数据源的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:36:39.593

如果要检索指标的度量，则必须使用指标键，而不是指标名称：

`ResourceQuery.createForMetrics(String resourceKeyOrId, String... metricKeys)`

因此，要获得衡量标准，您必须执行以下操作：

`ResourceQuery.createForMetrics(prjKey, "your_metric_key")`

# javascript - 无法获取 SOAP 请求的响应文本

> ID：12073872
> 
> 赞同：1
> 
> 时间：2012-08-22T13:07:30.793
> 
> 标签：javascript, soap

这是不返回任何内容的代码。我在 SOAP UI 中使用了相同的 SOAP 请求，我得到了正确的响应，只是它没有出现在 javascript 中。

```
 var getmarket = new XMLHttpRequest();
    getmarket.open('POST', 'https://www.betfair.com/publicapi/', true);

    var m_request = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" '+
                    'xmlns:bfex="http://www.betfair.com/publicapi/v5/BFExchangeService/" '+
                    'xmlns:v5="http://www.betfair.com/publicapi/types/exchange/v5/">'+
                    ' <soapenv:Header/>'+
                    '<soapenv:Body>'+
                    '<bfex:getAllMarkets>'+
                    '<bfex:request>'+
                    '<header>'+
                       '<clientStamp>0</clientStamp>'+
                       '<sessionToken>Y9eTuEvlrTM55pbRB1kIj0As0bVvz3eFm+p1FY+svHk=</sessionToken>'+
                    '</header>'+
                    '<locale>en</locale>'+
                    '<eventTypeIds>'+
                       '<v5:int>1</v5:int>'+
                    '</eventTypeIds>'+
                    '<countries>'+
                       '<v5:Country>GBR</v5:Country>'+
                    '</countries>'+
                    '<fromDate>2012-08-23TO00:00:00.000Z</fromDate>'+
                    '<toDate>2012-08-24TO00:00:00.000Z</toDate>'+
                 '</bfex:request>'+
              '</bfex:getAllMarkets>'+
           '</soapenv:Body>'+
        '</soapenv:Envelope>';

    getmarket.setRequestHeader('Content-Type', 'text/xml');
    getmarket.send(m_request);
    document.write(getmarket.responseText); 
```

另外当我使用 document.write(m_request);//soap 信封时

我得到

0Y9eTuEvlrTM55pbRB1kIj0As0bVvz3eFm+p1FY+svHk= en1GBR2012-08-23TO00:00:00.000Z2012-08-24TO00:00:00.000Z

即必填字段之间的数据集

那么这可以吗，还是必须有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:13:10.877

正如我在评论中提到的那样`Ajax`是异步的，所以在你的`js`你必须做类似的事情：

```
getmarket.onreadystatechange = function (){
    if (getmarket.readyState == 4 && getmarket.status == 200)
         document.write(getmarket.responseText);
} 
```

`onreadystatechange`每次 readyState 更改时都会触发事件。

# git - 带有数据库的 Github 项目

> ID：12073875
> 
> 赞同：2
> 
> 时间：2012-08-22T13:07:38.520
> 
> 标签：git, github, yii

嗨（对不起，如果以前有人问过这个问题，但我找不到答案）

我正在考虑将 Git（可能是 Github）用于即将开展的项目。该项目将使用 Yii 框架，它需要一组数据库表等。在我们进行开发时，我们需要添加/编辑/删除表，但生产区将没有这些表。我们如何解决环境之间的差异？

我现在唯一的想法是以某种方式将包含数据的 SQL Schema 获取到 .sql 文件中，并使用一个脚本，该脚本将自动更新我们的数据库，成为我们项目的一部分（这将是 Github 的一部分） . 这是最好的主意吗？还是我缺少什么？

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:14:58.957

将所有数据库数据保存在源代码管理中通常不是一个好主意。我建议使用内置的[迁移工具](http://www.yiiframework.com/doc/guide/1.1/en/database.migration)来保持每个人的数据库都是最新的。如果你想避免一个空的生产数据库，我建议制作一个“种子”文件，预先填充一些最少的数据，如下所示：

```
INSERT INTO `tbl_user`
(`email`, `username`)
VALUES
('admin@example.com','admin'),
('guest@example.com','guest')
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:15:01.063

表必须在同一个 git 存储库中吗？您可以创建两个存储库（一个用于表，一个用于代码）并使用 Git 的[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)功能将它们分组到一个存储库下。

# django - django 多重继承

> ID：12073882
> 
> 赞同：3
> 
> 时间：2012-08-22T13:08:02.313
> 
> 标签：django, django-models, django-inheritance

我目前正在做一个 django 项目，我需要做多个遗留。该项目本身有一个拥有多个网站的管理员。在我的管理部分，我创建了一个 Member 类，其中包含成员的所有必需信息。然后，所有单个站点都有一个 MemberExtra 类，它是从管理员的 Member 类创建的，我在其中添加了所有补充信息。当我启动我的服务器（python manage.py runserver ...）时，我遇到了那个错误：

```
Error: One or more models did not validate:
programsite.memberextra: Accessor for field 'member_ptr' clashes with related field 'Member.memberextra'. Add a related_name argument to the definition for 'member_ptr'.
programsite.memberextra: Reverse query name for field 'member_ptr' clashes with related field 'Member.memberextra'. Add a related_name argument to the definition for 'member_ptr'.
gourmandiz.memberextra: Accessor for field 'member_ptr' clashes with related field 'Member.memberextra'. Add a related_name argument to the definition for 'member_ptr'.
gourmandiz.memberextra: Reverse query name for field 'member_ptr' clashes with related field 'Member.memberextra'. Add a related_name argument to the definition for 'member_ptr'. 
```

管理员/models.py：

```
class Member(models.Model):
    prog = models.ForeignKey(Program, verbose_name=_("Program"))
    status = models.CharField(_("Status"), m    status = models.CharField(_("Status"), max_length=1, choices=STATUS_CHOICE\
S)
    points_avai = models.BigIntegerField(_("
Current Points"), null=True)
    points_notavai = models.BigIntegerField(_("Future Points"), null=True)
    cn = models.CharField(_("Company name"), max_length=250)
    full_name = models.CharField(_("Full name"), max_length=250)
    b_add = models.CharField(_("Billing address"), max_length=250)
    b_city = models.CharField(_("Billing City"), max_length=250)
    b_zip = models.CharField(_("Billing ZIP code"), max_length=250)
    b_country = models.CharField(_("Billing country"), max_length=250)
    prog_start_date = models.DateField(_("Program start date"), null=True)
    prog_end_date = models.DateField(_("Program end date"), null=True)
    member_id = models.CharField(_("Member ID"), max_length=250, primary_key=T\
rue)
    client_id = models.CharField(_("Client ID"), max_length=250, help_text="Nu\
méro de client.")
    user = models.OneToOneField(User)

    def __unicode__(self):
        return self.full_name + " (" + str(self.member_id) + ")"

    class Meta:                                                     
        verbose_name = _("Member")
        verbose_name_plural = _("Members") 
```

程序站点/models.py：

```
class MemberExtra(Member):
 email = models.EmailField(_("Email"), max_length=100, null=True)
 tel = models.CharField(_("Tel"), max_length=100, null=True)
 patrick = models.CharField(_("Patrick"), max_length=100, null=True)
 test42 = models.CharField(_("Test42"), max_length=100, null=True) 
```

美食家/models.py：

```
class MemberExtra(Member):
     email = models.EmailField(_("Email"), max_length=100, null=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T05:59:00.587

这里的问题是您继承了您的模型两次，并且两个子模型具有相同的名称。这导致有两次相同的相关名称，这对 Django 来说是个问题。

您要添加的解决方案

```
member = models.OneToOneField(Member, related_name="%(app_label)s_%(class)s_related")" 
```

在你的`MemberExtra`模型中工作，但是你失去了 Django 所做的隐式继承魔法，让你可以同时访问你的两个模型：

使用您的解决方案，您必须执行以下操作：

```
from programsite.models import MemberExtra
m = MemberExtra.objects.get(member__full_name = "Foobar")
m.email # -> returns the email of your MemberExtra instance
m.member.b_add # -> returns the address of the inherited member instance 
```

在哪里，使用 Django 原生继承，您可以执行以下操作：

```
from programsite.models import MemberExtra
m = MemberExtra.objects.get(full_name = "Foobar")
m.email # -> returns the email of your MemberExtra instance
m.b_add # -> returns the address of the inherited member instance 
```

在我看来，这更清洁。

为了管理继承，Django 实际上创建了一个`OneToOneField`（[https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)）。在您的情况下`<parentclass>_ptr`，此字段称为。`member_ptr`

~~如果你手动创建一个`OneToOneField`named`<parentclass>_ptr`并给它一个 related_name，Django 仍然能够找到父模型，并且不会抱怨相同的 related_names。~~

在您的情况下，只需添加

```
member_ptr = models.OneToOneField(Member, related_name="%(app_label)s_%(class)s_related")" 
```

~~在您的两个`MemberExtra`模型定义中。~~

此解决方案有效，但不应该这样做。Django 提供了一个标志`parent_link`，当设置为 true 时，它​​将告诉 Django 这是将用于访问父类的字段。

所以你可以添加一个字段

```
member = models.OneToOneField(Member, parent_link=True, related_name="%(app_label)s_%(class)s_related")" 
```

如果出于某种原因，Django 需要重命名指向父级的默认指针，它仍然可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:35:48.557

FK的`related_name`必须是唯一的。当您有一个具有默认`related_name`（未指定）的 FK 时，该 FK 被多个其他模型继承，所有模型最终都具有相同的`related_name`. 请参阅 Django 文档中题为[“小心使用`related_name`](https://docs.djangoproject.com/en/1.3/topics/db/models/#be-careful-with-related-name).

解决方案是将`related_name`FK 的参数设置为：

```
prog = models.ForeignKey(Program, verbose_name=_("Program"), related_name="%(app_label)s_%(class)s_related") 
```

然后 Django 会将应用程序标签和模块名称分到字符串中，使`related_name`每个子类都是唯一的。

# android - 如何以编程方式选择特定的画廊项目？

> ID：12073883
> 
> 赞同：0
> 
> 时间：2012-08-22T13:08:05.957
> 
> 标签：android, scroll, gallery

我有一个 android 画廊，我有 100 个项目（其中 10 个可见）。但我的问题是如何以编程方式选择某些特定项目？

假设我有一个按钮，单击时我希望选择库项目编号 55。（成为焦点）

我怎样才能做到这一点 ？有可能吗

我看到画廊中有一个名为 scrollTo(x,y) 的方法，但它以像素为单位，不符合我的需要。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:10:53.380

您可以使用 ：

```
gallery.setSelection(position); 
```

或者

```
gallery.setSelection(position, animate) 
```

如果你想动画到那个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:31:14.250

正在处理 Gallery 应用程序中缩略图的详细信息...

旧版本的 CacheService 在[这里](http://www.java2s.com/Open-Source/Android/android-platform-apps/Gallery3D/com/cooliris/cache/CacheService.java.htm)

请参阅方法（ buildThumbs、queryThumbs ... ）以获取有关将 attr 列表用于拇指对象的提示...您可以使用一些公共方法来选择您的对象。您必须将此信息与较新版本的图库应用程序的 api 相关联。

# php - 通过 IMAP 删除 GMail 聊天

> ID：12073890
> 
> 赞同：2
> 
> 时间：2012-08-22T13:08:43.460
> 
> 标签：php, gmail, imap

我用 Zend_Mail_Storage_Imap 创建了一个小脚本来与 GMail 交互。到目前为止一切正常，但我无法删除我的聊天记录？所以我试着把它们移到'Bin'：

```
REQUEST: TAG18 COPY 1,2,3,4,5,6,7,8,9,10 "[Google Mail]/Bin"
RESPONSE: TAG18 NO [ALERT] Chats can only exist in the Chat folder (Failure) 
```

显然没有工作......比我尝试在他们身上设置删除的标志：

```
REQUEST: TAG19 STORE 1,2,3,4,5,6,7,8,9,10 +FLAGS (\Deleted)
RESPONSE: TAG19 NO STORE attempt on READ-ONLY folder (Failure) 
```

也没有成功。

我该怎么做才能将聊天移到垃圾箱？我可以在 GMail 界面中手动完成，但我想自动完成......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:52:59.150

[环顾四周](https://www.google.com/search?q=gmail%20imap%20chats%20read%20only)，发现其他程序员也遇到了同样的问题：聊天标签显示为只读。所有搜索结果都是其他程序员对问题提供自己的反馈并确认聊天标签确实是只读的。令人沮丧的是，我找不到谷歌专门关于这个主题的官方文档。

我能找到的关于该主题的最接近的“官方”帖子来自 Google 员工[Brandon Long](https://plus.google.com/112658633592720298303/posts)在[Google+ 帖子](https://plus.google.com/101174951617223562800/posts/LUFdweFDaCe)上发表的评论：[Gmail Liberates Recorded Chat Logs Via IMAP - Data Liberation](http://dataliberation.blogspot.com/2011/09/gmail-liberates-recorded-chat-logs-via.html)。重点补充。

**评论于 2011 年 9 月 15 日**

> 是的，当前聊天仅显示在聊天文件夹中。**Chats 文件夹目前也是只读的**，您只能从那里导出聊天...尽管您通常可以毫无问题地将这些聊天上传到另一个文件夹。这有一些技术原因，聊天在 Gmail 服务器中有一堆特殊处理，而不是“真正的”电子邮件。这意味着在某些情况下，聊天消息可能在消息不变性方面违反 IMAP 规范。将它们仅存储在 Chats 文件夹中被认为更安全，如果用户遇到客户端问题，最终可能会从 IMAP 取消订阅或完全隐藏。我们已经修复了一些与聊天曝光有关的错误，这就是它发布的原因，但我们仍然对可能破坏的东西持谨慎态度。历史记录，直到最初的 IMAP 发布前的最后几周，聊天才暴露出来，但是大量的错误让我们决定隐藏它们。DLF 团队一直致力于为您的解放乐趣揭露它们。
> 
> 请注意，您可以使用 X-GM-EXT1 扩展程序 [http://code.google.com/apis/gmail/imap/](http://code.google.com/apis/gmail/imap/)并使用 X-GM访问任何消息（聊天或其他）上的完整标签列表-LABELS 消息获取属性

# c# - 不刷新页面，改变值

> ID：12073891
> 
> 赞同：0
> 
> 时间：2012-08-22T13:08:44.047
> 
> 标签：c#, asp.net

我有一个 ASP.NET 页面，菜单来自 masterpage 中的 menu.ascx。

> 菜单包括以下项目：
> 
> *   请求(5)
>     
>     
> *   信息

在 menu.ascx.cs 中，我计算了 5。它来自一个 SQL 查询，例如

```
Select Count(*) From Request Where Id = 1; //returns 5 
```

例如; 在其他页面中，我编辑任何记录，查询结果将是 6。但不刷新页面它不会改变，仍然看起来是 5。

除了 Ajax 解决方案之外，还有什么方法可以在不刷新页面的情况下做到这一点？当我编辑任何记录时，我可以刷新所有页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:13:57.430

将要刷新的 HTML 包装在 中[`UpdatePanel`](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)，这将允许部分页面更新。它是一个基于 AJAX 的解决方案，但是*如果不使用 AJAX，就无法使用来自服务器的信息执行部分页面更新*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:14:46.760

如果不使用以下任一选项，则无法在浏览器中更新该内容：

*   **整页刷新**（回发）
*   **ajax**（通过提供的服务器控件，如 UpdatePanel 或通过普通的自写 javascript ajax 调用，ps：想想 jQuery 来平滑这个过程）

一种较新的方法是使用[**Websockets**](http://en.wikipedia.org/wiki/Websockets)，您可以在其中将数据从服务器推送到客户端。[**Microsoft 在SignalR**](http://www.nuget.org/packages/SignalR)中创建了一个很酷的库，其中包含各种回退方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:16:40.693

您还可以查看 JavaScript 中可用的[XmlHttpRequest](http://www.w3schools.com/xml/xml_http.asp)对象。您可以通过常用方法将脚本嵌入到您的网页中。

[一个例子可以在这里找到](http://www.hendricksongroup.com/code_call_web_service_javascript.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T14:04:18.810

我想说 AJAX 是一个众所周知的更新部分页面的选项。

# ruby - Ruby 1.9.3-p140 - 使用线程 - 如何等待所有结果从线程中出来？

> ID：12073892
> 
> 赞同：2
> 
> 时间：2012-08-22T13:08:47.100
> 
> 标签：ruby, multithreading, coding-style, mutex, fibers

我试图找出一种在主线程完成之前等待所有线程执行的好方法。

我怎样才能在下面的代码中做到这一点？

```
 threads = []

    counter = 1000

    lines = 0

    counter.times do |i|
      puts "This is index number #{i}."
    end

    puts "You've just seen the normal printing and serial programming.\n\n"

    counter.times do |i|
      Thread.new do
        some_number = Random.rand(counter)
        sleep 1
        puts "I'm thread number #{i}. My random number is #{some_number}.\n"
        lines += 1
      end
    end

    messaged = false
    while lines < 1000
      puts "\nWaiting to finish.\n" unless messaged
      print '.'
      puts "\n" if lines == 1000
      messaged = true
    end

    puts "\nI've printed #{lines} lines.\n"
    puts "This is end of the program." 
```

该程序将我的线程号 XXX。我的随机数是 YYY，几乎在主线程结束时与 while 循环中的点混合。如果我不使用 while 循环，程序会在线程完成之前完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:15:17.567

要让父母等待孩子完成，您可以使用 join

```
 threads = []
 counter.times do |i|
    thr = Thread.new do
            some_number = Random.rand(counter)
            sleep 1
            puts "I'm thread number #{i}. My random number is #{some_number}.\n"
            lines += 1
    end
    threads << thr
  end
  threads.each {|thread| thread.join } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:08:38.510

您需要保留对线程的引用，以便您可以“加入”它们。就像是：

```
counter.times.map do |i|
  Thread.new do
    # thread code here
  end
end.each{|t| t.join} 
```

# android - 监控 Android 上的应用程序使用情况

> ID：12073894
> 
> 赞同：0
> 
> 时间：2012-08-22T13:08:50.527
> 
> 标签：android, service, notifications, foreground

当应用程序在前台弹出时，有没有办法从服务应用程序获得通知？

我正在编写一个监视应用程序使用情况的服务，因此我希望每次应用程序具有前台时（而不仅仅是在它运行时）都会收到通知。我可以对正在运行的进程进行轮询，但这太耗电了。当 FG 出现问题时，您知道操作系统通知的任何其他方式吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:24:30.583

我不知道你的意思

> 轮询正在运行的进程

我想是这样的：

```
 public String getTopActivity(){

    List<ActivityManager.RunningTaskInfo> runningTasks = activityManager.getRunningTasks(4096); 
    return runningTasks.get(0).topActivity.getClassName();

} 
```

? 我不认为那是非常昂贵的电池。我想不出另一种可能。

# mozilla - Mozilla 1.7 - 从命令行一次打开多个 url

> ID：12073897
> 
> 赞同：0
> 
> 时间：2012-08-22T13:08:53.110
> 
> 标签：mozilla

我正在开发一个将报告输出为 HTML 的报告工具。不幸的是，有时需要在 Solaris 9 上仅运行 Mozilla 1.7 的机器上查看该报告。我的问题是我必须支持在单独的窗口（或选项卡，如果这是唯一的选项）中打开多个报告的选项。为了启动 Mozilla，我创建了一个新进程并在命令行上传递报告 url： `/path/to/mozilla-bin file:///path/to/report.html`

有没有一种方法可以在不为每个 URL 创建一个进程的情况下打开多个 URL？如果没有办法，如何打开多个 URL，每个进程一个，但使用相同的 Mozilla 配置文件？

感谢所有帮助

**编辑：**刚刚意识到这可能应该发布在超级用户上。Mod，如果可能的话，请把它移到那里。对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:05:08.823

幸运的是，Mozilla 一直有源代码档案。Mozilla 1.7 的命令行处理代码似乎将[命令行参数逐字传递给浏览器窗口](http://mxr.mozilla.org/aviarybranch/source/xpfe/bootstrap/nsAppRunner.cpp#635)。至于浏览器窗口，它将通过换行符 ( [) 字符](http://mxr.mozilla.org/aviarybranch/source/xpfe/browser/resources/content/navigator.js#561)[分割该参数`\n`](http://mxr.mozilla.org/aviarybranch/source/xpfe/browser/resources/content/navigator.js#561)以获取要加载的地址列表。所以我猜你的应用程序需要`"file:///path/to/report.html\nfile:///path/to/report2.html\nfile:///path/to/report3.html"`作为参数传递，这应该可以打开多个选项卡。

# asp.net - Asp.NET - 使用 CompareValidator 验证开始和结束日期

> ID：12073899
> 
> 赞同：1
> 
> 时间：2012-08-22T13:09:05.707
> 
> 标签：asp.net, visual-studio-2010, validation, datepicker, comparevalidator

我使用`CompareValidator`来确保不能在开始日期之前设置完成日期。到目前为止没有任何乐趣，即使输入的开始日期设置在结束日期之前，它也会显示错误消息？这是我的代码：

```
<td class="question">
   Finish Date and Time
</td>
<td>
   <asp:TextBox runat="server" ID="TxtFinish" CssClass="answer" MaxLength="50" Width="100px"/>
   <span class="mandatory">*</span>
   <obout:Calendar ID="Calendar2" runat="server"
                   DatePickerMode="true"
                   TextBoxId="TxtFinish"
                   ShowTimeSelector="true"
                   TextSelectTime="Set Time">
   </obout:Calendar>
   <asp:CompareValidator id="CompareValidator1" runat="server" 
   ControlToCompare="txtDate" cultureinvariantvalues="true" display="Dynamic" enableclientscript="true"  ControlToValidate="TxtFinish" 
   ErrorMessage="Start date must be earlier than finish date" type="Date" 
   setfocusonerror="true" Operator="GreaterThanEqual" text="The Start date must be set before the finish date"></asp:CompareValidator> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:55:21.497

问题是您使用的是有时喜怒无常的 obout 控件，使用普通的日历控件并执行与比较验证器相同的操作。这应该可以解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:13:41.027

你有 ControlToCompare 不匹配的问题，你必须输入 Calendar2

txtDate 未定义，

->`ControlToCompare="txtDate"`

# android - 可重复使用的活动

> ID：12073903
> 
> 赞同：1
> 
> 时间：2012-08-22T13:09:26.657
> 
> 标签：android

场景是这样的，我有一个媒体播放器，它播放播放列表中歌曲的 onClick 音乐。在我的情况下它工作正常。但问题是，我想在每个屏幕上都有一个按钮直接带到媒体播放器。如果我使用 startActivity(intent); 在按钮的 onClick 上，它会创建新的音乐播放器 Activity。我不想那样，我想重用我以前的媒体播放器 Activit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:28:23.953

我想象您在当前 Activity 堆栈的底部有该活动，并且您希望将该活动带到顶部。您需要使用`Intent.addFlags()`. 检查[Intent](http://developer.android.com/reference/android/content/Intent.html)和标志的文档[`FLAG_ACTIVITY_CLEAR_TOP`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)以及[`FLAG_ACTIVITY_REORDER_TO_FRONT`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT). 还要考虑 singleTop 和 singleInstance 活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:15:54.467

您可以使用后台服务获取您正在播放的歌曲并启动活动并从服务中获取当前播放进度并在活动中设置。

还要设置历史标志以启动并从历史开始活动。

# jquery - 使用 jQuery 旋转图像 onclick。通过单击交换/更改图像

> ID：12073908
> 
> 赞同：1
> 
> 时间：2012-08-22T13:09:37.007
> 
> 标签：jquery, image, rotation, swap

我总共有 2 张图片。我只希望显示第一个，隐藏第二个。

然后，当我单击图像时，它会将图像交换到第二个图像，然后我再次单击它会返回到第一个，循环，每次单击都会不断交换图像，例如 1、2、1、2、1 , 2 等等。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:13:37.023

html:

```
<img src="URL" id="image1" />
<img src="URL" id="image2" style='display:none;'/> 
```

jQuery：

```
 $("#image1").click(function ( event ) {
      $(this).hide();
      $("#image2").show();
    });
 $("#image2").click(function ( event ) {
      $(this).hide();
      $("#image1").show();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:25:03.250

你可以尝试使用 jQuery 的 CSS 函数，例如；

```
$('.image').toggle(
function() {
    $('#img1').css({ 'display':'none' });
    $('#img2').css({ 'display':'inline' });
}, function() {
    $('#img2').css({ 'display':'none' });
    $('#img1').css({ 'display':'inline' });
}); 
```

***[这](http://jsfiddle.net/blasteralfred/hnKpT/)***是一个有效的现场演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:11:54.043

也许你可以使用这个：[http ://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

# handlebars.js - 迭代车把模板中的值

> ID：12073909
> 
> 赞同：1
> 
> 时间：2012-08-22T13:09:37.370
> 
> 标签：handlebars.js

在我的 JSON 对象中，我有一个属性 say **i**，它指定了一个循环值。
我想要的是在我的 HTML 模板中迭代它并输出一个字符的许多实例，比如“-”。
我试图实现这样的目标：

```
<td>
for i = 1 to {{i}}: print "-"
{{name}}
</td> 
```

这甚至可能吗？
所以如果 JSON 对象有像 {i:5, name:"John"}
它应该输出 -----John

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:45:44.650

Handlebars 不提供开箱即用的类似功能。但是，您可以为此任务定义自己的助手：

```
Handlebars.registerHelper('character', function(character, times) {
  var out = "";

  for(var i=0, times; i<times; ++i) {
    out += character;
  }

  return out;
}); 
```

示例用法：

```
{{character "-" 5}}{{name}} 
```

# ruby-on-rails - 使用 RVM 获取最新的，ruby -v 仍然过时

> ID：12073914
> 
> 赞同：0
> 
> 时间：2012-08-22T13:09:47.147
> 
> 标签：ruby-on-rails, ruby, rubygems, rvm

很奇怪，我有一个 ruby​​ 应用程序在 1.9.3 中运行了几个星期，一台机器重新启动并且它失败了。我打了 ruby​​ -v 并被告知“1.8.7”，这就是它失败的原因。虽然不知道这是怎么发生的......

试过：

```
#rvm get stable
#rvm get 1.9.3-head 
```

但仍然，

```
#ruby -v
ruby 1.8.7 (2010-08-16 patchlevel 302) [x86_64-linux] 
```

为什么它没有得到更新？

```
#rvm list rubies
rvm rubies

   ruby-1.9.3-head [ x86_64 ]
=* ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

注意：所有答案/评论都没有解决问题......但它被否决了吗？无论如何，我什至不能在某些用户帐户上输入“rvm”！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:31:35.433

此命令会将 ruby​​ 1.9.3-head 设置为整个系统的默认值。

```
rvm use 1.9.3-head --default 
```

或使用您要设置为默认的 ruby​​ 版本，而不是`1.9.3-head` 在上面的命令中

如果您只想将其用于特定项目，请创建 .rvmrc 文件并指定详细信息，如下所示

进入应用目录

```
echo rvm use ruby-1.9.3-head@projectname --create > .rvmrc 
```

这将创建一个名为的 gemset `projectname`，每次访问此目录时都会使用它。

还可以查看备忘单。它以简单的方式解释了[rvm](http://cheat.errtheblog.com/s/rvm/)的用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:11:47.720

你可以输入

```
rvm use 1.9.3 --default 
```

所以它使 ruby​​ 1.9.3 作为默认的 ruby​​，你也可以在多个 ruby​​ 版本之间切换使用

```
rvm use version 
```

您可以在项目文件夹中创建一个 .rvmrc 文件并编写

```
rvm use 1.9.3 
```

因此，每次 cd 到项目文件夹时，都会使用 .rvmrc 文件中指定的 ruby​​ 版本。添加到这个创建一个 gemset 说 project_name 然后更新 .rvmrc 文件

```
rvm use 1.9.3@project_name 
```

当您进入项目文件夹时，这将使带有适当宝石的红宝石版本更清晰。

# linux - 这些数据是随机的还是意味着什么？

> ID：12073918
> 
> 赞同：3
> 
> 时间：2012-08-22T13:10:02.210
> 
> 标签：linux, crash, crash-reports, crash-dumps

![在此处输入图像描述](../Images/a93eb783f2aef4dddd7a6a1029039c48.png)

如果你看一下屏幕，它似乎从汇编程序中输出了一些东西。这就是我的 Linux 在它不想启动时试图告诉我的。是否有可能理解或只是随机的垃圾？

我真的不需要解决这个问题，因为它很旧，但我很好奇这是否是随机垃圾，或者一个知识渊博的人是否可以从显示的数据中理解某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:33:08.077

查看 yhyrcanus 提供的链接，但对我来说，它看起来像是某种 BIOS 错误。该表（我认为）是数据和代码段的转储。'ip' 可能是指令指针？祝你好运。

# xml - 使用 xslt 删除和提取文本节点中的字符串值

> ID：12073922
> 
> 赞同：2
> 
> 时间：2012-08-22T13:10:17.850
> 
> 标签：xml, xslt, xpath

我有这些 xml 数据集

```
<Address>
<Rowinfo>
<LocatorDesignator>Dwelling  (Part Of), Null</LocatorDesignator>
<LocatorName>Flat  - Buena Villa House</LocatorName>
<thoroughfare>James Passage</thoroughfare>
<AddressArea>Modakeke island</AddressArea>
</Rowinfo>
<Rowinfo>
<LocatorDesignator>Flat  - Buena Villa House, 1</LocatorDesignator>
<LocatorName>Flat  3a  Anderson's House</LocatorName>
<thoroughfare>Abesinia Passage</thoroughfare>
<AddressArea> Buena Villa Road</AddressArea>
</Rowinfo>
<Rowinfo>
<LocatorDesignator>Offices Unit 2a Funlife Building, 02a</LocatorDesignator>
<LocatorName>Offices Unit 2a   Funlife Building  <LocatorName>
<thoroughfare> Modakeke island</thoroughfare>
<AddressArea>Laguna Estate</AddressArea>
</Rowinfo>
</Address> 
```

我想把它们变成这个

```
<LocatorDesignator>Dwelling(Part Of)</LocatorDesignator>
<LocatorName>Buena Villa House</LocatorName>
<thoroughfare>James Passage </thoroughfare>
<AddressArea>Modakeke island</AddressArea>

<LocatorDesignator>Flat 1</LocatorDesignator>
<LocatorName> Anderson's House</LocatorName>
<thoroughfare>Abesinia Passage</thoroughfare>
<AddressArea> </AddressArea>

<LocatorDesignator>Offices Unit 2a</LocatorDesignator>
<LocatorName> Funlife Building  <LocatorName>
<thoroughfare> </thoroughfare>
<AddressArea>Laguna Estate</AddressArea> 
```

基本上在（addressarea）元素中，我想提取以房地产和岛屿为后缀的值。在通道元素中，我想删除以庄园和岛屿为后缀的值。在定位器名称中提取任何带有房屋或建筑物的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:29:36.230

**一、删除`AddressArea`不以 结尾的文本节点`"island"`：**

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match=
     "AddressArea/text()
       [substring(., string-length() -5) != 'island'
       and
        substring(., string-length() -5) != 'Estate'
       ]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**（更正为格式正确）：

```
<Address>
    <Rowinfo>
        <LocatorDesignator>Dwelling  (Part Of), Null</LocatorDesignator>
        <LocatorName>Flat  - Buena Villa House</LocatorName>
        <thoroughfare>James Passage</thoroughfare>
        <AddressArea>Modakeke island</AddressArea>
    </Rowinfo>
    <Rowinfo>
        <LocatorDesignator>Flat  - Buena Villa House, 1</LocatorDesignator>
        <LocatorName>Flat  3a  Anderson's House</LocatorName>
        <thoroughfare>Abesinia Passage</thoroughfare>
        <AddressArea></AddressArea>
    </Rowinfo>
    <Rowinfo>
        <LocatorDesignator>Offices Unit 2a Funlife Building, 02a</LocatorDesignator>
        <LocatorName>Offices Unit 2a   Funlife Building  </LocatorName>
        <thoroughfare> Modakeke island</thoroughfare>
        <AddressArea>Laguna Estate</AddressArea>
    </Rowinfo>
</Address> 
```

**二、处理`thoroughfare`**

只需将此模板添加到上面的代码中：

```
 <xsl:template match=
  "thoroughfare/text()
       [substring(., string-length() -5) = 'island']"/> 
```

**现在完整的代码变成了**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match=
     "AddressArea/text()
       [substring(., string-length() -5) != 'island'
       and
        substring(., string-length() -5) != 'Estate'
       ]"/>

     <xsl:template match=
     "thoroughfare/text()
       [substring(., string-length() -5) = 'island']"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档（上图）时，会产生所需的正确结果：**

```
<Address>
    <Rowinfo>
        <LocatorDesignator>Dwelling  (Part Of), Null</LocatorDesignator>
        <LocatorName>Flat  - Buena Villa House</LocatorName>
        <thoroughfare>James Passage</thoroughfare>
        <AddressArea>Modakeke island</AddressArea>
    </Rowinfo>
    <Rowinfo>
        <LocatorDesignator>Flat  - Buena Villa House, 1</LocatorDesignator>
        <LocatorName>Flat  3a  Anderson's House</LocatorName>
        <thoroughfare>Abesinia Passage</thoroughfare>
        <AddressArea/>
    </Rowinfo>
    <Rowinfo>
        <LocatorDesignator>Offices Unit 2a Funlife Building, 02a</LocatorDesignator>
        <LocatorName>Offices Unit 2a   Funlife Building  </LocatorName>
        <thoroughfare/>
        <AddressArea>Laguna Estate</AddressArea>
    </Rowinfo>
</Address> 
```

* * *

**三、XSLT 2.0 解决方案**

这更容易——只需在（XSLT 1.0 解决方案的）谓词中使用标准 XPath 2.0 函数**[`ends-with()`](http://www.w3.org/TR/xpath-functions/#func-ends-with)**。

# android - 在Android的自定义可扩展列表视图中更改某个位置的样式

> ID：12073923
> 
> 赞同：0
> 
> 时间：2012-08-22T13:10:19.597
> 
> 标签：android, android-widget, expandablelistview, expandablelistadapter

*我在Android*中实现了一个自定义的可扩展列表视图，其中包含 5 个组项。我想在单击展开时更改组项的样式。

例如，我想将字体样式更改为斜体以单击展开。

任何建议表示赞赏，谢谢！

# algorithm - 适合一个区域的最大矩形数 [竞争，不是硬件]

> ID：12073932
> 
> 赞同：2
> 
> 时间：2012-08-22T13:10:42.600
> 
> 标签：algorithm, 2d, dynamic-programming, area, knapsack-problem

我以前也遇到过这类问题，但一直没能解决。这次的问题陈述是：有给定数量的矩形（不同尺寸，给定），和一个固定大小的正方形区域。在最小化剩余空间的同时，可以放入正方形区域的矩形的最大数量是多少？

经过大量研究，我遇到了[背包问题](https://en.wikipedia.org/wiki/Knapsack_problem)，但无法将这个概念应用于这个问题。应该使用什么样的算法来解决这样的问题？?

# ios - 使用 UIImage 放大滚动视图

> ID：12073940
> 
> 赞同：0
> 
> 时间：2012-08-22T13:11:13.670
> 
> 标签：ios, uiscrollview, uiimageview, uiimage, zooming

我试图放大具有多个图像的滚动视图，滚动视图仅垂直滚动，我尝试实现多种方式，在许多示例中但没有一种工作。这是我用来创建图像和滚动视图的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    for (int i = 0; i < 6; i++)
    {
        UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"amap1%i.png",i+1]];
        // create imageView
        _imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, _scrollView.frame.size.height*i, _scrollView.frame.size.width, _scrollView.frame.size.height)];
        // set scale to fill
        _imageView.contentMode = UIViewContentModeScaleToFill;
        // set image
        [_imageView setImage:image];
        // add to scrollView
        [self.scrollView addSubview:_imageView];
    }

    _scrollView.contentSize = CGSizeMake(_scrollView.frame.size.width, _scrollView.frame.size.height * 6);
    _scrollView.bounces = NO;
    _scrollView.pagingEnabled = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:17:34.137

看起来您需要为每个图像（放大）使用 UIScrollView 做一个 UIScrollView （包含所有图像 - 水平滚动）。

有一个 WWDC 视频讨论了如何做到这一点（WWDC 2010 - Session 104；[链接到 iTunes](https://developer.apple.com/itunes/?destination=adc.apple.com.4092349126.04109539109.4144345585?i=1699219987)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:13:09.640

如果要在 UIScrollView 中实现缩放，则必须执行以下操作

1.  设置`zoomEnabled`为`YES`
2.  实现一个滚动视图委托

请查看[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)，其中说：

> 要使缩放和平移工作，代理必须同时实现 viewForZoomingInScrollView: 和 scrollViewDidEndZooming:withView:atScale:; 另外，最大（maximumZoomScale）和最小（minimumZoomScale）缩放比例必须不同。

# xcode - 打开指定页面的 PDF（例如：到第 3 页的方向）

> ID：12073942
> 
> 赞同：0
> 
> 时间：2012-08-22T13:11:23.000
> 
> 标签：xcode, ipad, pdf

目前，我在 webview 中显示我的 PDF。现在我的用户总是希望直接显示 pdf 的第三页。你能给我一些提示如何完成这项任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:32:28.727

您可以为“document-open”事件添加“go-to”PDF 操作。当文档在其中打开时，兼容的 PDF 查看器组件或应用程序将自动导航到指定页面。

以下是此类 PDF 的示例：[http ://www.gnostice.com/newsletters/downloads/2011_03/PDF_that_skips_to_page_3_by_default.pdf](http://www.gnostice.com/newsletters/downloads/2011_03/PDF_that_skips_to_page_3_by_default.pdf)

Adobe Reader 在打开时会正确打开本文档的第 3 页。您需要检查您的应用程序中的 PDF 查看器是否支持 PDF 的此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:41:09.940

Adobe（半官方）定义了这种通过 URI 直接访问 PDF 页面的方法：

```
http://www.example.com/path/to/file.pdf#page=3 
```

[**您可以在PDF 打开参数（PDF，第 7 页）**](http://partners.adobe.com/public/developer/en/acrobat/PDFOpenParameters.pdf#page=7)中阅读有关这些建议的更多信息。

不过，您的 iPad PDF 查看器是否会按照本指南操作是完全不同的问题……

# c# - 将应用程序移动到服务器 2008R2 64 位时出现 AccessViolationException

> ID：12073944
> 
> 赞同：1
> 
> 时间：2012-08-22T13:11:25.083
> 
> 标签：c#, .net, exception-handling, 64-bit, windows-server-2008

我们正在切换到 Windows Server 2008 R2 64 位服务器并且遇到了一些问题。我们的 Windows 服务在 Windows 事件日志中抛出“AccessViolationException”异常。我们在旧的 Windows 2003 32 位服务器上从未遇到过这个问题。唯一的应用程序更改是重新编译为 64 位应用程序。

不知道是代码问题，还是服务器设置问题。任何人都知道为什么会发生这种情况？

**更新：**

这是两个堆栈跟踪：

```
Application: MyApplication1.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.AccessViolationException
Stack:

   at Devart.Data.Oracle.OracleConnection.BeginTransaction(System.Data.IsolationLevel)
   at MyApplication.AlertWorkerBase.persistErrors(System.String, System.String, Char)
   at MyApplication.AlertWorkerBase.StartAlertWorker()
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart()

Application: MyApplication2.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.AccessViolationException

Stack:
   at System.Threading.Thread.InternalCrossContextCallback(System.Runtime.Remoting.Contexts.Context, IntPtr, Int32, System.Threading.InternalCrossContextDelegate, System.Object[])
   at System.Runtime.Remoting.Activation.ActivationServices.DoCrossContextActivation(System.Runtime.Remoting.Activation.IConstructionCallMessage)
   at System.Runtime.Remoting.Messaging.ClientContextTerminatorSink.SyncProcessMessage(System.Runtime.Remoting.Messaging.IMessage)
   at System.Runtime.Remoting.Activation.ActivationServices.Activate(System.Runtime.Remoting.Proxies.RemotingProxy, System.Runtime.Remoting.Activation.IConstructionCallMessage)
   at System.Runtime.Remoting.Proxies.RemotingProxy.Invoke(System.Runtime.Remoting.Messaging.IMessage)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(System.Runtime.Remoting.Proxies.MessageData ByRef, Int32)
   at MyApplication2.SessStatsLookup..ctor(Energy.VT.Common.ApplicationParameters)
   at MyApplication2.TCPConnection.ClientHandler.Initialize(MyApplication2.ApplicationParameters)
   at MyApplication2.TCPConnection.ClientHandler.ServeClient()
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:45:49.030

这篇文章：[http ://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/eacaf64d-09b8-4565-9cc1-91c918a31797/](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/eacaf64d-09b8-4565-9cc1-91c918a31797/)

讨论了由大于 40 字节的连接字符串引起的缓冲区溢出问题。我怀疑这是同一个问题，但是您可以尝试 OP 的解决方法来查看它是否相关：

> 作为解决方法，我不会解析连接字符串中的数据源（目标是在不使用 tnsnames.ora 的情况下分发 Oracle 应用程序）。

如果您的 conn 字符串小于 40 字节，并且您仍然看到异常，我会联系 oracle 并查看他们是否有更新的驱动程序。

# symfony - Symfony2 - 开发环境

> ID：12073945
> 
> 赞同：0
> 
> 时间：2012-08-22T13:11:27.143
> 
> 标签：symfony

我在开发环境中运行我的应用程序，然后我想在 prod 环境中查看它，**只是在 URL 中**`app_dev.php`替换它并且它工作。`app.php`

 **但现在我不能回到开发环境:(

我的**URL**带有`app_dev.php`，但是缺少调试工具栏，并且我得到的错误信息不多，调试它们非常困难，所以我认为我仍然处于 prod 环境中。

我怎样才能找回我的工具栏和漂亮的描述性错误？我真的很想念他们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:51:39.247

问题是某些 css 干扰了工具栏的样式。经过一番调查解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:13:03.607

只需根据您的版本恢复文件即可。从 Symfony2 存储库中挑选内容：

[https://github.com/symfony/symfony-standard/blob/master/web/app_dev.php](https://github.com/symfony/symfony-standard/blob/master/web/app_dev.php)

* * *

**更新**

您是否尝试过`app_dev.php`再次访问该应用程序？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T12:14:40.077

请再做一件事：

*   首先清除缓存（在命令行上： ./app/console cache:clear ）
*   并尝试访问您的网站 mysite.com/app_dev.php

欲了解更多信息，[请访问](http://symfony.com/doc/current/cookbook/configuration/environments.html)**

# php - 从 RSS 文件中删除标签和内容的正则表达式

> ID：12073946
> 
> 赞同：1
> 
> 时间：2012-08-22T13:11:26.203
> 
> 标签：php

这是我的 RSS 文件的示例结构：

```
<item>
 <title>My Title</title>
 <link>http://www.link.com</link>
 <description>The description</description>
 <author>Blah Blah</author>
 <pubDate>Thu, 26 Jul 2012 10:17:15 -0400</pubDate>
 <media:content url="myimage.jpg">
  <media:title>sdafsd</media:title>
 </media:content>
 <position>1</position>
</item> 
```

如何使用 PHP 正则表达式从文件中完全删除作者标签及其内容、整个 media:content 标签及其内容以及位置标签及其内容？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:30:24.547

不要使用 Regex 来解析 HTML/XML，那里有非常好的解析器：

```
<?php

$xml = <<<XML
<item>
    <title>My Title</title>
    <link>http://www.link.com</link>
    <description>The description</description>
    <author>Blah Blah</author>
    <pubDate>Thu, 26 Jul 2012 10:17:15 -0400</pubDate>
    <media:content url="myimage.jpg">
        <media:title>sdafsd</media:title>
    </media:content>
    <position>1</position>
</item>
XML;

$dom = new DOMDocument();
//DOMDocument throws warnings when the XML is invalid, we don't care.
//Though in this case, the media: namespace would be ignored because it's not defined.
@$dom->loadXML($xml);
$document = $dom->documentElement;

//Find the elements you want to remove
$author = $document->getElementsByTagName("author")->item(0);
$content = $document->getElementsByTagName("content")->item(0);

//And remove them.
$document->removeChild($author);
$document->removeChild($content);

//Output the resulting XML.
echo $dom->saveXML(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:40:49.513

我之前的回答被 - 理所当然地 - 删除了，我应该将其添加为评论。这是 DomDocument 做你想做的事情的另一种选择：

```
<?php

$xml = <<<XML
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
  <channel>
    <title>bla</title>
    <link>bla</link>
    <description>A description</description>
    <language>en-us</language>
    <item xmlns:media="http://search.yahoo.com/mrss/">
     <title>My Title</title>
     <link>http://www.link.com</link>
     <description>The description</description>
     <author>Blah Blah</author>
     <pubDate>Thu, 26 Jul 2012 10:17:15 -0400</pubDate>
     <media:content url="myimage.jpg">
      <media:title>sdafsd</media:title>
     </media:content>
     <position>1</position>
    </item>
  </channel>
</rss>
XML;

$doc = new DOMDocument();
$doc->loadXml( $xml );

foreach( $doc->getElementsByTagName( 'item' ) as $item ) {
    $item->removeChild( $item->getElementsByTagName( 'author' )->item( 0 ) );
    $item->removeChild( $item->getElementsByTagName( 'position' )->item( 0 ) );
            $item->removeChild( $item->getElementsByTagName( 'content' )->item( 0 ) );
}

var_dump( $doc->saveXml( ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:23:25.830

**免责声明：** 为了灵活性和可靠性，您应该始终使用适当的解析器，例如[`DOMDocument`](http://us3.php.net/manual/en/class.domdocument.php)处理 XML/HTML。话虽如此，如果您*确定*您的标记格式正确，不会更改结构，并且不会包含嵌套的重复标签，那么正则表达式*可以*解决此类问题。但是，只有在您知道自己在做什么的情况下，您才应该使用它们。

* * *

您将希望使用[`preg_replace()`](http://us3.php.net/manual/en/function.preg-replace.php)空字符串 ( `""`) 替换每个匹配项。以下是如何为`<author>...</author>`块完成的：

```
$markup = preg_replace('#<author>(.*?)</author>#is', '', $markup); 
```

基本上这匹配开始标签`<author>`，开始/结束标签之间的任何（或没有）和结束标签`</author>`。

其他标签可以以类似的方式删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:30:31.693

```
 $content = file_get_contents($file_name)

$xmlElem = 'author'
$content = preg_replace('#<' . $xmlElem . '(?:\s+[^>]+)?>(.*?)</' . $xmlElem . '>#s', '', $content)

$xmlElem = 'media:content'
$content = preg_replace('#<' . $xmlElem . '(?:\s+[^>]+)?>(.*?)</' . $xmlElem . '>#s', '', $content)

$xmlElem = 'position'
$content = preg_replace('#<' . $xmlElem . '(?:\s+[^>]+)?>(.*?)</' . $xmlElem . '>#s', '', $content) 
```

# html - CSS3动画中的left vs translateX

> ID：12073949
> 
> 赞同：1
> 
> 时间：2012-08-22T13:11:36.780
> 
> 标签：html, css, google-chrome, safari, css-transitions

我创造了[这个小提琴](http://jsfiddle.net/5sZ9y/3/)；红色框使用 CSS`left`属性进行动画处理，蓝色框使用 CSS Transform`TranslateX`属性进行动画处理。

在 Chrome 21 中，两个动画的性能相同，都运行流畅。

但是在 Safari（适用于 Windows）中，蓝色的动画流畅，而红色的动画则滞后。（似乎蓝色的是硬件加速的，而红色的不是）

第一个问题是，最好的选择是什么？哪一个整体上更好？（更多浏览器等支持）

接下来，没有任何方法可以硬件加速 Safari 中的动画`left`和`top`CSS 属性吗？（由于我想实际将 a`div`移到窗口外，我认为使用`left`属性更好。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:15:06.950

Translate 可以在不影响 DOM 中的位置的情况下移动对象。尽管它明显地移动到屏幕上的另一个位置，但 DOM 不受影响。这就是为什么翻译功能的性能通常更好的原因。

请注意，您不会在每个浏览器中看到相同的性能特征。

这是不同[翻译/移动](http://jsperf.com/translate3d-vs-xy/5)功能的 JSPerf 概述。滚动到底部以查看每个浏览器的统计信息。

它很可能会在未来发生变化。

# jsp - 如何在struts动作中更改url模式

> ID：12073951
> 
> 赞同：0
> 
> 时间：2012-08-22T13:11:50.283
> 
> 标签：jsp, url-rewriting, struts2

`domain/Forum_show.action?pg=2&forum=java`

我如何将其重写为：

`domain/forum/java/pg/2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:27:12.133

从一开始就使用您喜欢的 URL 结构。映射到任何 URL 结构的能力是 Servlet API 的一个特性。

此外，您不需要在 Struts2 中有操作扩展名（.action 部分）。在我看来，创建虚假的扩展从来没有意义。

这里有几页我谈到了使用命名变量模式匹配来提供更漂亮的 URL。我在我的所有 Struts2 应用程序中都使用了这种技术，它产生了与您的第二个示例类似的更好的 URL。

*   [命名变量模式匹配器](https://stackoverflow.com/questions/4772737/hidden-features-of-struts-2-framework/4837917#4837917)
*   [使用 Struts2 获得更好的 URL](http://www.struts2.info/displaycontent/content/better-urls-with-struts2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:54:36.947

您可能需要检查[Struts REST Plugin](http://struts.apache.org/2.0.12/docs/rest-plugin.html)，其目的是遵循 Ruby on Rails URL 样式（如您所愿）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T15:15:08.797

两者都是很好的答案，但您可以使用[UrlRewritefilter](http://code.google.com/p/urlrewritefilter/)。在此[链接](http://www.progbear.com/voice/2010/struts-2-create-friendly-url-with-urlrewritefilter)中有一个如何在 Struts2 应用程序中使用的示例。

# c# - 构建用于在任何两种类型的表格数据（从/到 XML、JSON、ADO.Net 数据集、CSV、Excel 等）之间转换的 API 的最佳模式

> ID：12073956
> 
> 赞同：2
> 
> 时间：2012-08-22T13:12:03.683
> 
> 标签：c#, design-patterns, converter, tabular

我正在编写 C# 代码来处理各种不同数据格式之间的转换，例如 XML、CSV、JSON 以及未来可能的更多格式。对于上述数据格式，我已经编写了代码来进行实际转换。

就转换 FROM => TO 而言，任何可能的组合都应该是可能的。根据上述格式，您将获得以下一组可能的转换可能性：

XML => CSV
XML => JSON
CSV => XML
CSV => JSON
JSON => CSV
JSON => XML

我的问题是如何最好地将我的转换代码包装在一个 API 中，该 API 允许以可扩展和可维护的方式添加更多转换（即 ADO.Net DataSet => CSV 和 CSV => ADO.Net DataSet）。有人可以指出适用的模式和/或最佳实践是否适用？或者更好的是，一些示例骨架代码？

# python - 如何快速阅读excel？

> ID：12073957
> 
> 赞同：3
> 
> 时间：2012-08-22T13:12:06.517
> 
> 标签：python, excel, sqlite

我有一个 67M,126000 行的 xls 文件，我想尽快将其导入 sqlite 数据库。

现在我有两个用 python 实现的解决方案：

1.  使用xlrd读取excel，使用sqlite3插入数据库；（*大约需要28s*）
2.  使用adodbapi读取excel，使用sqlite3插入数据库；（*花费大约 33 秒*）

我希望它可以在 20 秒内完成。您还有其他解决方案吗？编程语言必须是 Python 或 C/C++，因为我想将它集成到 Python 程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:24:32.467

使用[LibreOffice](http://www.libreoffice.org/)。它可以批量转换：

```
subprocess.call(['loffice', '--invisible', '--convert-to', 'csv', file]) 
```

也许值得一试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-14T07:54:27.073

使用熊猫来做到这一点。它非常快，这里涉及两个步骤。1\. 将 excel 文件作为数据框导入 2\. 将数据框导出到 sql

```
import pandas as pd
import numpy as np
import sqlite3

conn = sqlite3.connect('database.db')   #Connection to Database

df = pd.read_excel('excel_file.xlsx')   #Reading from excel file

df.to_sql(name='table_of_database', con=conn)  # Writing to SQL
conn.close() 
```

我知道它会很快。但请告诉我执行后经过的时间，因为我没有评估 67M 数据。

# c# - 如何在 C# 中使用反射访问类中每个字段的值？

> ID：12073958
> 
> 赞同：-1
> 
> 时间：2012-08-22T13:12:16.630
> 
> 标签：c#, reflection, dynamic-programming, generics

我得到了一个由 VS2010 的 XSD.exe 创建的类。

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

namespace ConsoleApplication1
{
    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
    [System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
    public partial class transfer
    {

        private string sourceGLNField;

        private string destinationGLNField;

        private string actionTypeField;

        private string shipToField;

        private string documentNumberField;

        private string documentDateField;

        private string noteField;

        private string versionField;

        private transferCarrier[] carrierField;

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string sourceGLN
        {
            get
            {
                return this.sourceGLNField;
            }
            set
            {
                this.sourceGLNField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string destinationGLN
        {
            get
            {
                return this.destinationGLNField;
            }
            set
            {
                this.destinationGLNField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string actionType
        {
            get
            {
                return this.actionTypeField;
            }
            set
            {
                this.actionTypeField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string shipTo
        {
            get
            {
                return this.shipToField;
            }
            set
            {
                this.shipToField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string documentNumber
        {
            get
            {
                return this.documentNumberField;
            }
            set
            {
                this.documentNumberField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string documentDate
        {
            get
            {
                return this.documentDateField;
            }
            set
            {
                this.documentDateField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string note
        {
            get
            {
                return this.noteField;
            }
            set
            {
                this.noteField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string version
        {
            get
            {
                return this.versionField;
            }
            set
            {
                this.versionField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute("carrier", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public transferCarrier[] carrier
        {
            get
            {
                return this.carrierField;
            }
            set
            {
                this.carrierField = value;
            }
        }
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
    public partial class transferCarrier
    {

        private transferCarrierProductList[] productListField;

        private string carrierLabelField;

        private string containerTypeField;

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute("productList", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public transferCarrierProductList[] productList
        {
            get
            {
                return this.productListField;
            }
            set
            {
                this.productListField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string carrierLabel
        {
            get
            {
                return this.carrierLabelField;
            }
            set
            {
                this.carrierLabelField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string containerType
        {
            get
            {
                return this.containerTypeField;
            }
            set
            {
                this.containerTypeField = value;
            }
        }
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
    public partial class transferCarrierProductList
    {

        private transferCarrierProductListSerialNumber[] serialNumberField;

        private string expirationDateField;

        private string lotNumberField;

        private string gTINField;

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute("serialNumber", Form = System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable = true)]
        public transferCarrierProductListSerialNumber[] serialNumber
        {
            get
            {
                return this.serialNumberField;
            }
            set
            {
                this.serialNumberField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string expirationDate
        {
            get
            {
                return this.expirationDateField;
            }
            set
            {
                this.expirationDateField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string lotNumber
        {
            get
            {
                return this.lotNumberField;
            }
            set
            {
                this.lotNumberField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string GTIN
        {
            get
            {
                return this.gTINField;
            }
            set
            {
                this.gTINField = value;
            }
        }
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
    public partial class transferCarrierProductListSerialNumber
    {

        private string valueField;

        /// <remarks/>
        [System.Xml.Serialization.XmlTextAttribute()]
        public string Value
        {
            get
            {
                return this.valueField;
            }
            set
            {
                this.valueField = value;
            }
        }
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
    [System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
    public partial class NewDataSet
    {

        private transfer[] itemsField;

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute("transfer")]
        public transfer[] Items
        {
            get
            {
                return this.itemsField;
            }
            set
            {
                this.itemsField = value;
            }
        }
    }

} 
```

我也有一个这样的控制台应用程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.IO;
using System.Xml.Serialization;
using System.Xml.Schema;
using System.Reflection;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            //Load xml file
            using (FileStream xmlStream = new FileStream("C:\\SaleReturn01.xml", FileMode.Open))
            {
                //Read xml file
                using (XmlReader xmlReader = XmlReader.Create(xmlStream))
                {
                    //Serialize xml with class which is created by XSD.exe in visual studio and set class with xmlfile
                    //In that case we don't need to xsd referenced validation
                    XmlSerializer serializer1 = new XmlSerializer(typeof(transfer));
                    transfer deserializedStudents = serializer1.Deserialize(xmlReader) as transfer;
                    showTransferClass(deserializedStudents);
                }
            }
        }

        public static void showTransferClass(transfer x)
        {
            try
            {
                FieldInfo[] myFields = typeof(transfer).GetFields(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.DeclaredOnly);
                foreach (FieldInfo field in myFields)
                {
                    if (!field.FieldType.IsArray)
                    {
                        Console.WriteLine("{0} : {1}", field.Name, field.GetValue(x));
                    }
                    else
                    {
                        Console.WriteLine("{0} : {1}", field.Name, "");
                        foreach (transferCarrier y in x.carrier)
                        {
                            showTransferCarierClass(y);
                        }
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("Exception : {0}", e.Message);
            }
        }

        public static void showTransferCarierClass(transferCarrier x)
        {
            try
            {
                FieldInfo[] myFields = typeof(transferCarrier).GetFields(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.DeclaredOnly);
                foreach (FieldInfo field in myFields)
                {
                    if (!field.FieldType.IsArray)
                    {
                        Console.WriteLine("  {0} : {1}", field.Name, field.GetValue(x));
                    }
                    else
                    {
                        Console.WriteLine("  {0} : {1}", field.Name, "");
                        foreach (transferCarrierProductList y in x.productList)
                        {
                            showTransferCarierProductListClass(y);
                        }
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("  Exception : {0}", e.Message);
            }
        }

        public static void showTransferCarierProductListClass(transferCarrierProductList x)
        {
            try
            {
                FieldInfo[] myFields = typeof(transferCarrierProductList).GetFields(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.DeclaredOnly);
                foreach (FieldInfo field in myFields)
                {
                    if (!field.FieldType.IsArray)
                    {
                        Console.WriteLine("    {0} : {1}", field.Name, field.GetValue(x));
                    }
                    else
                    {
                        Console.WriteLine("    {0} : {1}", field.Name, "");
                        foreach (transferCarrierProductListSerialNumber y in x.serialNumber)
                        {
                            showTransferCarierProductListSerialNumberClass(y);

                        }
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("    Exception : {0}", e.Message);
            }
        }

        public static void showTransferCarierProductListSerialNumberClass(transferCarrierProductListSerialNumber x)
        {
            try
            {
                FieldInfo[] myFields = typeof(transferCarrierProductListSerialNumber).GetFields(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.DeclaredOnly);
                foreach (FieldInfo field in myFields)
                {
                    if (!field.FieldType.IsArray)
                    {
                        Console.WriteLine("      {0} : {1}", field.Name, field.GetValue(x));
                    }
                    else
                    {
                        Console.WriteLine("      {0} : {1}", field.Name, "");
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("      Exception : {0}", e.Message);
            }
        }
    }
} 
```

总而言之，我可以获得字段的名称，但是每次我尝试获取字段的值时都会抛出这样的异常。现在我得到了真正的代码并且可以工作了。（谢谢 Jon Skeet）

你有什么想法来改进这段代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:16:29.597

嗯，是的......你打电话给：

```
temp = fld.GetValue(null); 
```

从文档中[`FieldInfo.GetValue`](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx)：

> 如果字段是静态的，则忽略 obj。对于非静态字段，obj 应该是继承或声明该字段的类的实例。

那么，您要显示的字段是什么类型的*实例？*将其作为参数传递给`GetValue`. 如果没有实例，“字段的值”的概念就没有任何意义。这就像在说“什么是价值`String.Length`？” 不引用特定的字符串。

（另请注意，如果您遵循 .NET 命名约定，并且仅在首次使用时声明变量，限制它们的范围，您的代码会更清晰。）

# javascript - JavaScript 无分号代码样式和缩小？

> ID：12073960
> 
> 赞同：20
> 
> 时间：2012-08-22T13:12:20.360
> 
> 标签：javascript, node.js

我正在尝试决定是否值得使用 JavaScript 无分号样式。

如果我有没有分号的 JavaScript 代码：

```
function(){
    var first = 1
    var second = 2
    sum = 1 + 2
    return sum
} 
```

它将在浏览器和[Node.js](http://en.wikipedia.org/wiki/Node.js)中运行。

但是缩小（通过 Uglify 或[Closure Compiler](https://en.wikipedia.org/wiki/Google_Closure_Tools#Closure_Compiler)）代码是否可以在浏览器和 Node.js 中工作？

我读过文章*[JavaScript 中的分号是可选的](http://mislav.uniqpath.com/2010/05/semicolons/)*。它说它应该工作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T20:52:37.330

我个人是一个支持分号的人，但是对于替代方案有一个令人信服的论据，通常没有[给出公平的声音](https://stackoverflow.com/questions/444080/do-you-recommend-using-semicolons-after-every-statement-in-javascript)。与所有编码风格的争论一样，这将是一场永无止境的辩论，没有合理的结论。做你和你的团队觉得更舒服的事情。

如果您确实采用节俭的分号方法，请确保您和您的团队正确理解[自动分号插入](https://en.wikipedia.org/wiki/JavaScript_syntax#Whitespace_and_semicolons)(ASI) 和语句终止规则。无论您做出什么决定，这绝对是一件好事。

关于缩小：如果你不想冒一个缩小器错误的潜在头痛以及报告和修复它（或等待修复）的相关负担，因为它没有正确执行 ASI，那么不要依赖ASI。

*   Isaacs（[Node.js](http://en.wikipedia.org/wiki/Node.js)维护者，因此对于这个问题的目的而言，缩小不可知论者）[关于这个主题](https://stackoverflow.com/questions/444080/do-you-recommend-using-semicolons-after-every-statement-in-javascript)
*   他推荐[对 ASI 规则进行出色的公正分析](http://blog.izs.me/post/2353458699/an-open-letter-to-javascript-leaders-regarding)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T13:44:58.420

尽管 JavaScript 中的分号是可选的，但强烈建议不要使用分号：

*   它使您的代码容易出现错误~~由于删除空格（用于缩小）：~~试试这个：

    变量 a = 1; 变量 b = 7; var sum = a+b (a + b)

~~它缩小到`var a=1,b=7,sum=a+b(a+b);`,~~这将导致错误`number is not a function`。还有[其他案例](http://www.howtocreate.co.uk/tutorials/javascript/semicolons)和[这个案例](http://robertnyman.com/2008/10/16/beware-of-javascript-semicolon-insertion/)。

**更新**：这个错误不是由缩小引起的，但是，下一个是：

*   它使您的代码容易受到缩小导致的错误的影响：尝试：

    ```
     var isTrue = true

      function doSomething() { return 'yeah' }

      function doSomethingElse() { return 'yes, dear' }

      doSomething()

      !isTrue && doSomethingElse() 
    ```

    缩小为：

    ```
     var isTrue=true;function doSomething(){return "yeah"}function doSomethingElse(){return "yes, dear"}doSomething()!isTrue&&doSomethingElse(); 
    ```

    这导致：

    ```
     SyntaxError: Unexpected token ! 
    ```

*   就方便性而言，它会降低您的代码的可读性和可维护性：使用分号已被正确地确立为良好的实践，训练有素的 JavaScript 开发人员会对试图规避约定的代码感到困惑。

另一件事是，您必须问自己：省略分号您真正获得了什么？

*   清洁代码？如果你想让 JavaScript 看起来不像 JavaScript，试试[CoffeeScript](http://en.wikipedia.org/wiki/CoffeeScript)。但也有[一些误导性的观念](http://mislav.uniqpath.com/2010/05/semicolons/)，他们认为“简单的解决方案：当一行以括号开头时，在其前面加上分号。”可以消除上述陷阱。这个干净的代码如何，它如何帮助任何人阅读你的代码？

底线：通过缩小，我肯定会尝试使用[JSLint](http://en.wikipedia.org/wiki/JSLint)的约定。我已经看到一些人在尝试修复一个未在未缩小但在缩小代码中发生的错误数小时后，终于对他们的 JavaScript 代码进行了 linting。不要让自己陷入这种痛苦；分号乍一看可能很难看，但它们可以阻止错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T13:18:34.560

编译器和缩小器可能足够智能，可以在需要时添加分号（并且如果它有助于缩小过程）。

然而！分号告诉解释器这是语句的结尾。如果它丢失，它必须查看下一行的开头，以确定该语句是否有意义继续。然后它将决定下一行是新语句（即缺少分号）还是实际上是上一行语句的延续。

没有分号，你会减慢速度！更不用说当解释器在执行我描述的算法时判断错误时，这可能会引入一些模糊的错误！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:14:57.913

不要这样做。[分号插入](https://en.wikipedia.org/wiki/JavaScript_syntax#Whitespace_and_semicolons)是一件非常危险的事情。增加规模不值得增加风险。

如果你这样做，Douglas Crockford 不会喜欢你 :) *[JavaScript: The Good Parts](https://www.youtube.com/watch?v=hQVTIJBZook)*

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-22T13:15:05.073

恕我直言，不要那样做。您并没有真正获得那么多，AFAIK 会自动将分号放置在那里，并且可以将其放置在会产生奇怪错误的地方。

# c - 如何从 debian 64 位上的 tcphdr (sk_buff) 结构访问数据/有效负载？

> ID：12073963
> 
> 赞同：4
> 
> 时间：2012-08-22T13:12:24.213
> 
> 标签：c, network-programming, kernel-module, netfilter

我正在开发一个小型防火墙，我必须从端口 80（http）的每个 tcp 数据包中检索数据以解析它们。此代码在 debian 32 位虚拟机上运行良好，我能够打印每个网页的标题，但是当我尝试加载我的内核模块并通过 http 端口传输一些数据时，它不会打印任何数据。

当我编译时，它只在我的 64 位计算机上显示这些警告：

```
/home/dev3/C/FIREWALL/firewall.c: In function ‘hook_func’:
/home/dev3/C/FIREWALL/firewall.c:179: warning: cast from pointer to integer of different size
/home/dev3/C/FIREWALL/firewall.c:179: warning: cast to pointer from integer of different size 
```

请问有人有什么想法吗？

谢谢。

代码 ：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/netfilter.h>

#undef __KERNEL__
#include <linux/netfilter_ipv4.h>
#define __KERNEL__

#include <linux/ip.h>
#include <linux/tcp.h>

static struct nf_hook_ops nfho;

unsigned int hook_func( unsigned int hooknum,
                    struct sk_buff * skb,
                    const struct net_device * in,
                    const struct net_device * out,
                    int (*okfn)(struct sk_buff *))
{
    struct iphdr    * iph;
    struct tcphdr   * tcph;
    unsigned char   * http_port = "\x00\x50";
    char            * data;

    if (skb)
    {
        iph = ip_hdr(skb);

        if (iph && iph->protocol && (iph->protocol == IPPROTO_TCP))
        {
            tcph = (struct tcphdr *)((__u32 *)iph + iph->ihl);

            if ((tcph->source) == *(unsigned short *)http_port)
            {
                data    = (char *)((int)tcph + (int)(tcph->doff * 4));

                printk(KERN_DEBUG "TCP source : %hu, TCP  dest : %hu\n", ntohs(tcph->source), ntohs(tcph->dest));
                printk(KERN_DEBUG "TCP seq : %u, TCP ack_seq : %u\n", ntohl(tcph->seq), ntohl(tcph->ack_seq));
                printk(KERN_DEBUG "TCP doff : %hu, TCP window : %hu\n", ntohs(tcph->doff), ntohs(tcph->window));
                printk(KERN_DEBUG "TCP check : 0x%hx, TCP urg_ptr : %hu\n", ntohs(tcph->check), ntohs(tcph->urg_ptr));
                printk(KERN_DEBUG "FLAGS=%c%c%c%c%c%c\n\n",
                        tcph->urg ? 'U' : '-',
                        tcph->ack ? 'A' : '-',
                        tcph->psh ? 'P' : '-',
                        tcph->rst ? 'R' : '-',
                        tcph->syn ? 'S' : '-',
                        tcph->fin ? 'F' : '-');
                //printk(KERN_DEBUG "sending packet to : %pI4\n", &iph->daddr);
                printk(KERN_DEBUG "data len : %d\ndata : \n", (int) strlen(data));
                printk(KERN_DEBUG "%s\n", data);
            }
        }
    }

    return NF_ACCEPT;
}

int init_module()
{
    int result;

    nfho.hook   = (nf_hookfn *) hook_func;
    nfho.hooknum    = NF_IP_POST_ROUTING;
    nfho.pf     = PF_INET;
    nfho.priority   = NF_IP_PRI_FIRST;

    result = nf_register_hook(&nfho);

    if(result)
    {
        printk(KERN_DEBUG "firewall : erreur nf_register_hook !\n");
        return 1;
    }

    printk(KERN_DEBUG "firewall : module charge.\n");

    return 0;
}

void cleanup_module()
{
    nf_unregister_hook(&nfho);
    printk(KERN_DEBUG "firewall : module decharge.\n");
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T09:19:16.350

`(char *)((int)tcph + (int)(tcph->doff * 4));`错了，应该是

```
(char *)((unsigned char *)tcph + (tcph->doff * 4)); 
```

请注意，这`printk(KERN_DEBUG "data len : %d\ndata : \n", (int) strlen(data));`根本不是一件安全的事情。您不知道数据是否包含文本，如果包含，则它可能不包含 strlen(data) 需要按预期工作的以 0 结尾的字符串。

在比较端口和可能的其他字段时，您可能还需要关心字节顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T06:32:22.433

更改此行：

数据 = (char *)((int)tcph + (int)(tcph->doff * 4));

至：

数据 = (char *)((void *)tcph + (int)(tcph->doff * 4));

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-06T09:13:13.503

利用

```
printk(KERN_INFO ...); 
```

而不是

```
printk(KERN_DEBUG ...); 
```

# security - HTTPS 和 TCP over SSL 有什么区别

> ID：12073970
> 
> 赞同：9
> 
> 时间：2012-08-22T13:12:46.530
> 
> 标签：security, sockets, tcp, https

我正在开发一个 DotNet 客户端应用程序，它将通过 HTTPS 向 Java 服务器发送消息。在此之前，我的一名团队成员开发了一个应用程序，它使用带有 ssl 的 tcp 客户端与服务器通信。如果我使用他现有的代码，请帮助我，而不是我需要为 Dot Net 中的 Https 通信做哪些更改。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T13:36:39.547

“TCP over SSL”不是你所拥有的——它是通过 TCP “运行”的 SSL。在 HTTPS 情况下，您可以通过 TCP 使用基于 SSL 的 HTTP。HTTP 在这里是一个应用层协议。如果只是“基于 TCP 的 SSL”，您有自定义应用程序级协议，而使用 HTTPS，您有标准 HTTP。

因此，您可以重用现有代码的一部分，但您需要用 HTTP 替换自定义协议（无论它是什么）。如果现有协议有效，那么替换它就没有多大意义（除非你知道你需要一个替换并且你知道你需要什么）。

# jquery - 使用 jQuery.parseXML( 数据 ) 进行 XML 验证

> ID：12073972
> 
> 赞同：1
> 
> 时间：2012-08-22T13:12:51.077
> 
> 标签：jquery, xml, xml-validation

我想问我是否可以使用[jQuery.parseXML(data)](http://api.jquery.com/jQuery.parseXML/)来验证 XML 字符串？

我的意思是我知道它是用来解析 XML 的，如果 XML 无效，我会收到一条错误消息，但是每次 XML 中甚至会出现小错误时，该函数都会失败吗？

我试过用谷歌搜索它，但我发现的只是解析，而不是验证。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:39:38.107

不，不是通过 jQuery（至少不是在 Mozilla 中，很可能是其他非 IE 浏览器）。

在 IE 的情况下，在[http://msdn.microsoft.com/en-us/library/windows/desktop/ms754585%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms754585%28v=vs.85%29.aspx)中声明，带有 loadXML，“你不能使用它根据模式验证 XML 文档。”，因此显然[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)中 jQuery 中使用的代码也不会验证。

[但是， http://www.stylusstudio.com/xsllist/200301/post50460.html](http://www.stylusstudio.com/xsllist/200301/post50460.html)上的一些代码似乎表明在 IE 中（仅）使用正确的 IE 是可能的——至少在 4.0 版本的 Msxml2.DOMDocument 中是可能的—— - 因为根据[http://msdn.microsoft.com/en-us/library/aa468547.aspx#beginner_failure](http://msdn.microsoft.com/en-us/library/aa468547.aspx#beginner_failure)，“如果文档中指定了任何一个，MSXML 解析器将根据 DTD 或架构验证您的文档”（除非validateOnParse 属性设置为 false）。

但是，对于 Mozilla 和其他浏览器，它们不执行验证（我认为在 Ajax 的 DOMParser() 的情况下它们已经加载了外部 DTD，但这似乎对我现在不起作用，无论如何，甚至实体没有在常规网站中加载）。

我不记得[http://code.google.com/p/jssaxparser/](http://code.google.com/p/jssaxparser/)或[http://debeissat.nicolas.free.fr/relaxng.php](http://debeissat.nicolas.free.fr/relaxng.php)是否支持外部验证，但我认为你需要去在这种方向。

您需要使用 XML 吗？也许 JSONSchema 可以满足您的需求？[http://json-schema.org/implementations.html](http://json-schema.org/implementations.html)。

# python - 用python删除文件中的一段文本

> ID：12073975
> 
> 赞同：1
> 
> 时间：2012-08-22T13:12:56.587
> 
> 标签：python

我正在尝试删除 apache 配置文件中的一段文本，特别是虚拟主机。我需要删除包含 < VirtualHost> 标记的虚拟主机容器。

```
Stuff

<VirtualHost   asdfalsdkf:*> 
asldkfjasl;dkfjasldkfj
asdfljasldjf;laksdfj
a;lsdkfj;laksjdfas
asldkfjasldfkj
3495034ijfgdl9)_*)(%$
more stuff
</VirtualHost>

stuff 
```

到目前为止，我已经尝试对其进行正则表达式。但它不会更改文件。我实际上是在尝试更新文件并删除代码。

这是我到目前为止没有工作的。

```
for line in fileinput.input('/etc/apache2/apache2.conf.replace',inplace=True):
    sys.stdout.write(re.sub(r'<VirtualHost.*?>.*?</VirtualHost>','',line)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:35:42.443

这里有两个问题。第一个是（正如 javex 指出的那样）您需要使用`re.DOTALL`.

但这还不够。您仍然一次只输入一行正则表达式，因此它永远不会同时看到开始和结束`VirtualHost`标签。AFAIK，没有办法使用 获取文件的全部内容`fileinput`，但假设您不需要接受来自 STDIN 的输入，并且文件足够小，可以一次全部读入内存（Apache 配置文件应该是这种情况)，这应该这样做：

```
import os
import sys
import re

for fn in sys.argv[1:]:
    os.rename(fn, fn + '.orig')
    with open(fn + '.orig', 'rb') as fin, open(fn, 'wb') as fout:
        data = fin.read()
        data = re.sub(r'<VirtualHost.*?>.*?</VirtualHost>', '', data,
                      flags=re.DOTALL)
        fout.write(data) 
```

（*这需要 Python 2.7，因为我在语句中使用了嵌套上下文的内置语法`with`，但您可以使用 . 获得与早期版本相同的功能`contextlib.nested`。*）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:18:28.643

除非指定，否则点字符`.`将不匹配换行符：`re.DOTALL`

```
for line in fileinput.input('/etc/apache2/apache2.conf.replace',inplace=True):
    sys.stdout.write(re.sub(r'<VirtualHost.*?>.*?</VirtualHost>','',line, flags=re.DOTALL)) 
```

（参见 pythons [re](http://docs.python.org/library/re.html#re.DOTALL)文档）

# java - 在 jsp 中调用 getServletContext 会产生 NullPointerException

> ID：12073983
> 
> 赞同：0
> 
> 时间：2012-08-22T13:13:25.877
> 
> 标签：java, jsp, servlets, nullpointerexception

以下行：

```
<%! ServletContext context = getServletContext(); %> 
```

在jsp页面中生成以下错误：

```
Uncaught exception from servlet
javax.servlet.UnavailableException: java.lang.NullPointerException
at org.mortbay.jetty.servlet.ServletHolder.makeUnavailable(ServletHolder.java:415)
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:458)
at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:452)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:458)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:698)
.
.
. 
```

Web 应用程序在 GAE (google appengine) 上运行。我收到此错误的原因可能是什么？当我在 jsp 中使用上述语句时，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:40:50.307

有了它，`<%! %>`你基本上是在声明一个实例变量，所以它在实例化期间被初始化，但是`ServletContext`只有在被调用`getServletContext()` *之后才可用。*[`init(ServletConfig)`](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html#init%28javax.servlet.ServletConfig%29)在实例化之前调用该实例方法是不可能的，因为在实例化之前没有实例的方法。

我不确定你为什么需要这个。也许您不知道*scriptlet*`application`范围内已经存在的隐式变量？这已经代表. 需要时直接使用即可。例如*`ServletContext`*

 *```
<% application.setAttribute("foo", "bar"); %> 
```

* * *

**与具体技术问题无关**，您有一个设计问题：[应该避免 JSP 文件中的 Java 代码](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)。*

# iphone - 如何初始化 UIImageViews 等并在屏幕上显示它们：iPhone

> ID：12073985
> 
> 赞同：0
> 
> 时间：2012-08-22T13:13:34.803
> 
> 标签：iphone, objective-c, xcode, uiimageview, declaration

好的，我是 XCode 和 Objective-C 编程的新手，有一个问题。

我可以使用 Storyboard Builder 中的拖放功能正常添加 UIImageView。然后我可以通过创建与相关 ViewController 的连接在代码中访问它，使用控件拖放，然后我可以创建一个插座。然后在带有@property 行的*.h 文件中声明它并在*.m 文件中合成。

但是，如果我有一个更复杂的视图，并且将所有内容拖放到屏幕上需要很长时间，如果我想在执行期间更改对象的位置怎么办？

我曾尝试在 ViewDidLoad 方法中使用它：

```
NSMutableArray *mutableArray = [NSMutableArray array];
UIImage * pic = [UIImage imageNamed: @"Blue.png"];
for (int x = 0;x<10;x++){
    for (int y =0;y<10;y++){
        UIImageView *imageView = [[UIImageView alloc] initWithImage:pic];
    imageView.frame =CGRectMake(x*23,y*41,32,41);
[mutableArray addObject:imageView];
    }
} 
```

这一点，我希望制作一个 UIImageView 网格并将它们保存在 NSMutableArray 中，但屏幕上什么也没有出现。您如何在代码中执行与拖放类似的过程？我意识到我没有合成任何东西，我只声明了一个实例 UIImageView，但我想如果我将声明放在 for 循环中，那么它会抱怨，因为它会创建多个具有相同名称的变量。无论如何使用循环在几行代码中创建大量 UIImageViews 吗？我虽然可能只是编辑用作指针变量标识符的字符串，例如“image1”、“image2”......但我不知道如何使用字符串类型变量作为标识符的名称。

PS - 我搜索了 CGRectMake 程序，参数是（x 坐标，y 坐标，宽度，高度）。

任何帮助将不胜感激 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:20:59.237

您需要将它们添加到子视图中。

```
[self.view addSubview:imageView]; 
```

您可以使用标签来识别个人，而不是将它们添加到数组中`UIImageView`，这完全取决于您喜欢什么。

```
UIImage * pic = [UIImage imageNamed: @"Blue.png"];
int tagInt=1;
for (int x = 0;x<10;x++){
    for (int y =0;y<10;y++){
        UIImageView *imageView = [[UIImageView alloc] initWithImage:pic];
        imageView.frame =CGRectMake(x*23,y*41,32,41);
        imageView.tag=tagInt;
        [self.view addSubview:imageView];
        tagInt++;
    }
} 
```

然后访问个人`UIImageView`

```
UIImageView *imageView = (UIImageView*)[self.view viewWithTag:1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:16:16.520

您将在 NSMutableArray 中创建的所有 imageView 对象。您需要将它们添加为视图的子视图（在这种情况下，我假设您的视图是 UIViewController 的视图）：

```
[self.view addSubview:imageView]; 
```

# javascript - 纯 Jquery Web 服务响应

> ID：12073990
> 
> 赞同：0
> 
> 时间：2012-08-22T13:13:42.107
> 
> 标签：javascript, jquery, json

我注意到许多调用返回 json 数据的 Web 服务的代码示例，但实现通常涉及 PHP 等后端语言。有谁知道所有 jQuery 解决方案的好方法？换句话说，例如使用 id 设置 div 标签，然后直接调用 Web 服务，获取 json 数据并填充页面？根本没有 PHP 或其他后端服务器端代码。

有些事情没有意义。这完美地工作：

```
<script type="text/javascript">
        jQuery(document).ready(function ($) {
            $.ajax({
                url: "http://api.wunderground.com/api/ac7e64a2f6e2d440/geolookup/conditions/q/IA/Cedar_Rapids.json",
                dataType: "jsonp",
                success: function (parsed_json) {
                    alert(parsed_json.location.city);
                    var location = parsed_json['location']['city'];
                    var temp_f = parsed_json['current_observation']['temp_f'];
                    alert("Current temperature in " + location + " is: " + temp_f);
                }
            });
        });
</script> 
```

但它不应该吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:18:20.927

WebService，意味着一个客户端和一个服务器。

客户端调用服务器并请求数据，然后等待以某种格式（JSON/XML 等等）从服务器接收数据。

服务器是使用后端技术实现的——即使您使用带有 node.js 作为服务器的 JavaScript，它仍然是后端技术。

构建没有后端的 WebService 意味着构建一个不调用 WebServices 的网站……它只是将本地数据设置为 JSON，并使用某种形式的模板（[Mustache](http://mustache.github.com/)？）构建数据的可视化呈现。

无论如何，这不是 WebService，而是 JavaScript/jQuery 驱动的网站建设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:20:26.837

通常，Web 浏览器会限制您的 javascript 在您自己的域以外的域上调用 Web 服务/后端（出于安全原因）。

在此处阅读更多信息：[http ://en.wikipedia.org/wiki/Same%5Forigin%5Fpolicy](http://en.wikipedia.org/wiki/Same%5Forigin%5Fpolicy)

这可能就是为什么您会看到所有使用 php 或类似东西编写的自定义后端（AKA 代理）的示例。

# android - 如果我想制作一个安卓应用来展示它的商品，我需要访问网站数据库吗

> ID：12073994
> 
> 赞同：-1
> 
> 时间：2012-08-22T13:13:53.417
> 
> 标签：android

如果我想编写一个 android 应用程序来显示来自商业网站的商品，我需要什么来访问它的数据库以及我将使用哪些服务来访问数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:24:31.683

是的，你需要访问这个数据库，这在 android 中是可能的，如果你搜索它，就会有这种事情的教程。

您可能需要征得网站所有者的许可才能获得访问权限，因为大多数大型商业网站的服务器都具有高度安全性。

还可以在上述网站上进行挖掘，因为他们可能只有您正在寻找的 API。

不幸的是，如果没有更多信息，我无法为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:01:28.723

您可能必须使用来自该网站的信息创建一个 json 对象，并在您的 Android 应用程序中对其进行解析。

它被称为网络服务，你应该谷歌它。有了它，您可以直接从您的应用程序更改网站数据库中的值。

# ios - 在 iPhone App 中显示大量（超过 40 个）PDF 文件的最佳方式是什么

> ID：12073995
> 
> 赞同：-1
> 
> 时间：2012-08-22T13:13:56.307
> 
> 标签：ios, xcode, pdf

我正在制作一个向用户显示人员列表的应用程序，当用户选择一个人时，我想显示一个包含有关此人的更多信息的 PDF 文件。

我知道我需要使用 UIWebView 但我不确定这是否是我拥有的人数的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:21:35.213

您可以像这样将它们加载到 WebView 中

```
NSString *pdfPath = [[NSBundle mainBundle] pathForResource:@"pdfName" ofType:@"pdf"];
NSURL *url = [NSURL URLWithString:pdfPath];
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
[webView loadRequest:urlRequest]; 
```

或者通过 CGPDFDocument 真正绘制它们。

阅读这个很短的教程[http://www.cocoanetics.com/2010/06/rendering-pdf-is-easier-than-you-thought/](http://www.cocoanetics.com/2010/06/rendering-pdf-is-easier-than-you-thought/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:22:06.287

使用 UITableView 显示您的人员列表。当一个人被选中时，推送一个新的视图控制器来显示细节（即你的 PDF）。因此，您将拥有一个基于导航的基本应用程序。在 iPad 上，这可以很好地与 SplitViewController 配合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:24:27.227

[请使用github](https://github.com/vfr/Reader)上提供的 PDFReader 的开源代码

# android - TextWatcher 的事件被调用了两次

> ID：12073998
> 
> 赞同：14
> 
> 时间：2012-08-22T13:13:59.540
> 
> 标签：android, textwatcher

在我的应用程序中，我将 TextWatcher 放在 EditText 上。当我更改 EditText 的文本时，TextWatcher 的事件被调用了两次。

我正在使用模拟器来运行应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T14:55:26.590

你的代码看起来如何？这是 TextWatcher 的正常行为。例子：

```
myInput.addTextChangedListener(new TextWatcher() {
        boolean mToggle = false;

        public void onTextChanged(CharSequence cs, int s, int b, int c) {}

        public void afterTextChanged(Editable editable) {
            if (mToggle) { 
                Toast.makeText(getBaseContext(), "HIT KEY",Toast.LENGTH_LONG).show();
            }
            mToggle = !mToggle;
        }

        public void beforeTextChanged(CharSequence cs, int i, int j, int k) {}
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-30T22:41:03.653

我的问题是我两次添加了 textWatcher `mEditText.addTextChangedListener(mTextWatcher)`，这导致调用它的回调两次！

我已经添加了 textWatcher 一次`onCreate()`和一次`onStart()`. 我应该只添加`onStart`和删除`onStop()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T18:15:22.373

如果您在侦听器`editText.setText("string")`内部调用`TextWatcher`（例如在`afterTextChanged`方法中），`TextWatcher`将检测到新的文本更改，最终可能会再次调用`setText`并创建一个循环。

一种替代方法`editText.setText("string")`可能是：

```
editText.getText().clear();
editText.append("string"); 
```

这不会引起`TextWatcher`听众的新检测。