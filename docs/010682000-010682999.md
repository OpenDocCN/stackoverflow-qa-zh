# StackOverflow 问答 10682000-10682999

# c# - 如何在 C# 中以特定频率（吉他和弦应用程序）生成声音

> ID：10682001
> 
> 赞同：0
> 
> 时间：2012-05-21T08:42:25.057
> 
> 标签：c#, guitar

我正在开发一个吉他工具箱应用程序，其中一个组件是和弦和音阶字典。

我的问题是：

1.  如果我知道给定音符的 khz 频率/音高，我如何才能在该音高上产生可接受的声音（可能是 midi）？

2.  我的第二个问题是和弦是由 2 个或更多音符组成的，我将如何在一个 appregio 中将 2 个或更多音符分层（一个接一个地演奏并保持形成和弦）？

如果有任何关于我搜索并错过的指示，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T15:07:01.007

首先，琶音是以八度音阶演奏的单个音符，或一次演奏一个音符的和弦。因此，双音符“琶音”的概念与独角兽在同一个地方。没有这样的事情。

你可能会看到所谓的“强力和弦”，它使用两个音符，通常在相邻的琴弦上，一个品格分开。

要生成您的音调，请使用免费应用程序“Audacity”，它可以为您提供所有标准音调，仅用于询问。我曾经为一个实验制作了一个只有 440Hz 的 2 小时长音，以确定吉他弦随时间的变化，以确定调音如何响应温度变化。

您可以轻松地以您喜欢的任何长度制作音调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:41:57.733

尝试看看这个，看看它是否有帮助：http: [//blogs.msdn.com/b/dawate/archive/2009/06/24/intro-to-audio-programming-part-3-synthesizing-simple-波音频使用 c.aspx](http://blogs.msdn.com/b/dawate/archive/2009/06/24/intro-to-audio-programming-part-3-synthesizing-simple-wave-audio-using-c.aspx)

# javascript - 谷歌地图 V3 javascript 上的多条路线

> ID：10682016
> 
> 赞同：2
> 
> 时间：2012-05-21T08:43:27.083
> 
> 标签：javascript, google-maps

我想在同一张地图上查看不同的路线。我将从文件中加载路线并将它们放在两个数组“start”和“end”中。calcRoute 将数组 start 和 end 作为路由的起点和终点。我迭代此函数（在本例中为两次）以创建两条路线。但它只能看到最后一个。我想查看数组内的所有路由。

```
var directionsDisplay;

var rendererOptions = {
            preserveViewport: true,
            draggable: false,
            suppressMarkers: true,
            polylineOptions: {
               map: map,
               strokeColor:'#FF0000',
               //strokeWidth: 3,
               strokeOpacity: 0.7}

};

var start = ['Trento, via belenzani 11', 'Trento, piazza duomo']
var end = ['Trento, via belenzani 50', 'Trento, piazza pasi']
var map;

function initialize() {

  var trento = new google.maps.LatLng(46.066712,11.119059);
  var myOptions = {
    zoom:12,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: trento
  }
  map = new google.maps.Map(document.getElementById("map"), myOptions);
  for (var i=0; i < 2; i++){
  calcRoute(start[i], end [i]);
}
directionsDisplay.setMap(map);
  }

function calcRoute(source,destination){
        // show route between the points
        directionsService = new google.maps.DirectionsService();
        directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
        directionsDisplay.setMap(map);
        var request = {
            origin:source, 
            destination:destination,
            travelMode: google.maps.DirectionsTravelMode.WALKING
        };
        directionsService.route(request, function(response, status) 
        {
            if (status == google.maps.DirectionsStatus.OK) 
            {
                directionsDisplay.setDirections(response);

            }
        });

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T09:45:58.043

```
 Display multiple routes on google map with waypoints and direction arrow
    ==============

Click [here](http://i.stack.imgur.com/yB4Tw.png )!

    ![In image u can see 2 routes with direction arrow][1]

     <style>
        html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
        </style>

         <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

        <script>

          var directionsService;
          var stepDisplay;

          var position;
          var marker = [];
          var polyline = [];
          var poly2 = [];
          var poly = null;
          var startLocation = [];
          var endLocation = [];
          var timerHandle = [];

          var stops_data = [[ {"Geometry":{"Latitude":23.05242,"Longitude":72.53375}},

                              {"Geometry":{"Latitude":23.03007,"Longitude":72.59664}}

                            ] ,[ {"Geometry":{"Latitude":23.00959,"Longitude":72.56189}},
                                 {"Geometry":{"Latitude":23.05754,"Longitude":72.55302}}
                               ]];

          var a,z,b;

          var add;

          var speed = 0.000005, wait = 1;
          var infowindow = null;

           infowindow = new google.maps.InfoWindow();

          var myPano;   
          var panoClient;
          var nextPanoId;

              var directionsDisplay = [];

              directionsDisplay[0] = new window.google.maps.DirectionsRenderer({
                  suppressMarkers: true

                });

              directionsDisplay[1] = new window.google.maps.DirectionsRenderer({
                  suppressMarkers: true

                });

              var map;
              var mapOptions = { center: new google.maps.LatLng(42.5584308, -70.8597732), zoom: 3,
                mapTypeId: google.maps.MapTypeId.ROADMAP };

              function initialize() 
              {
                map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

                directionsService = new google.maps.DirectionsService();

             //   Setroute(locations[0],locations[1],directionsDisplay[0]);

               // Setroute(locations2[0],locations2[1],directionsDisplay[1]);

                Tour_startUp(stops_data[0]);

                window.tour.loadMap(map, directionsDisplay[0]);
               window.tour.fitBounds(stops_data[0],map);

                if (stops_data[0].length > 1)
                    window.tour.calcRoute(stops_data[0],directionsService, directionsDisplay[0]);

                Tour_startUp(stops_data[1]);
                window.tour.loadMap(map, directionsDisplay[1]);
                window.tour.calcRoute(stops_data[1],directionsService, directionsDisplay[1]);
                window.tour.fitBounds(stops_data[1],map);

              }

        function fx(o)
        {
          if(o && o.legs)
          {
            for(l=0;l<o.legs.length;l++)
            {
              var leg=o.legs[l];
              for(var s=0;s<leg.steps.length;++s)
              {
                var step=leg.steps[s],
                    a=(step.lat_lngs.length)?step.lat_lngs[0]:step.start_point,
                    z=(step.lat_lngs.length)?step.lat_lngs[1]:step.end_point,
                    dir=((Math.atan2(z.lng()-a.lng(),z.lat()-a.lat())*180)/Math.PI)+360,
                    ico=((dir-(dir%3))%120);
                    new google.maps.Marker({
                      position: a,
                      icon: new google.maps.MarkerImage('http://maps.google.com/mapfiles/dir_'+ico+'.png',
                                                  new google.maps.Size(24,24),
                                                  new google.maps.Point(0,0),
                                                  new google.maps.Point(12,12)
                                                 ),
                map: map,
                title: Math.round((dir>360)?dir-360:dir)+'°'
              });

              }
            }
          }
        }

        function Tour_startUp(stops) {

            //  alert('first'+stops.length);     

            if (!window.tour) window.tour = {
                updateStops: function (newStops) {
                    stops = newStops;
                },

                // map: google map object
                // directionsDisplay: google directionsDisplay object (comes in empty)
                loadMap: function (map, dirdis) {
                    var myOptions = {
                        zoom: 15,
                        center: new window.google.maps.LatLng(51.507937, -0.076188), // default to London
                        mapTypeId: window.google.maps.MapTypeId.ROADMAP
                    };
                    map.setOptions(myOptions);
                    dirdis.setMap(map);
                },
             fitBounds: function (stops_data,map) {
                    var bounds = new window.google.maps.LatLngBounds();

                    // extend bounds for each record 
                    for( var x in stops_data) {
                        var myLatlng = new window.google.maps.LatLng(stops_data[x].Geometry.Latitude, stops_data[x].Geometry.Longitude);
                        bounds.extend(myLatlng);
                    }
                    map.fitBounds(bounds);
                },
                calcRoute: function (stops_new,directionsService, dirdis) {
                    var batches = [];
                    var itemsPerBatch = 10; // google API max = 10 - 1 start, 1 stop, and 8 waypoints
                    var itemsCounter = 0;
                    var wayptsExist = stops_new.length > 0;
                    var time= [];
                    while (wayptsExist) {
                        var subBatch = [];
                        var subitemsCounter = 0;

                       // alert('second'+stops_new.length);        
                //alert(stops_new[0].Geometry.Latitude +' ===== ' +stops_new[0].Geometry.Longitude);

                        for (var j = itemsCounter; j < stops_new.length; j++) {
                            subitemsCounter++;

                        //alert(stops[j].Geometry.Time);

                            subBatch.push({
                                location: new window.google.maps.LatLng(stops_new[j].Geometry.Latitude, stops_new[j].Geometry.Longitude),
                                stopover: true

                            });

                           //time.push(stops[j].Geometry.Time);

                            if (subitemsCounter == itemsPerBatch)
                                break;
                        }

                        itemsCounter += subitemsCounter;
                        batches.push(subBatch);
                        wayptsExist = itemsCounter < stops_new.length;
                        // If it runs again there are still points. Minus 1 before continuing to
                        // start up with end of previous tour leg
                        itemsCounter--;
                    }

                    // now we should have a 2 dimensional array with a list of a list of waypoints
                    var combinedResults;
                    var unsortedResults = [{}]; // to hold the counter and the results themselves as they come back, to later sort
                    var directionsResultsReturned = 0;

                    for (var k = 0; k < batches.length; k++) {
                        var lastIndex = batches[k].length - 1;
                        var start = batches[k][0].location;
                        var end = batches[k][lastIndex].location;

                        // trim first and last entry from array
                        var waypts = [];
                        waypts = batches[k];
                        waypts.splice(0, 1);
                        waypts.splice(waypts.length - 1, 1);

                        var request = 
                            {
                            origin: start,
                            destination: end,
                            waypoints: waypts,
                            travelMode: window.google.maps.TravelMode.WALKING
                        };

                      //  alert('start'+start);

                     //   alert('end'+end);

                        (function (kk) {
                            directionsService.route(request, function (result, status) {

                                if (status == window.google.maps.DirectionsStatus.OK) {

                                     fx(result.routes[0]);

                                     polyline[0] = new google.maps.Polyline({
                                         path: [],
                                         strokeColor: '#FFFF00',
                                         strokeWeight: 3
                                         });

                                     poly2[0] = new google.maps.Polyline({
                                         path: [],
                                         strokeColor: '#FFFF00',
                                         strokeWeight: 3
                                         });     

                                    var unsortedResult = { order: kk, result: result };
                                    unsortedResults.push(unsortedResult);

                                    directionsResultsReturned++;

                                    if (directionsResultsReturned == batches.length) // we've received all the results. put to map
                                    {
                                        // sort the returned values into their correct order
                                        unsortedResults.sort(function (a, b) { return parseFloat(a.order) - parseFloat(b.order); });
                                        var count = 0;
                                        for (var key in unsortedResults) {
                                            if (unsortedResults[key].result != null) {
                                                if (unsortedResults.hasOwnProperty(key)) {
                                                    if (count == 0) // first results. new up the combinedResults object
                                                        combinedResults = unsortedResults[key].result;
                                                    else {
                                                        // only building up legs, overview_path, and bounds in my consolidated object. This is not a complete
                                                        // directionResults object, but enough to draw a path on the map, which is all I need
                                                        combinedResults.routes[0].legs = combinedResults.routes[0].legs.concat(unsortedResults[key].result.routes[0].legs);
                                                        combinedResults.routes[0].overview_path = combinedResults.routes[0].overview_path.concat(unsortedResults[key].result.routes[0].overview_path);

                                                        combinedResults.routes[0].bounds = combinedResults.routes[0].bounds.extend(unsortedResults[key].result.routes[0].bounds.getNorthEast());
                                                        combinedResults.routes[0].bounds = combinedResults.routes[0].bounds.extend(unsortedResults[key].result.routes[0].bounds.getSouthWest());
                                                    }
                                                    count++;
                                                }
                                            }
                                        }
                                        dirdis.setDirections(combinedResults);

                                        var legs = combinedResults.routes[0].legs;

                                        var path = combinedResults.routes[0].overview_path;

                                        //alert(path.length);

                                     //  alert(legs.length);

                                      //setRoutes(legs[0].start_location,legs[legs.length-1].end_location);

                                        for (var i=0; i < legs.length;i++)
                                            {
                                                  var markerletter = "A".charCodeAt(0);
                                                  markerletter += i;
                                          markerletter = String.fromCharCode(markerletter);

                                          if (i == 0) { 

                                            //marker[0] = createMarker2(legs[i].start_location,"start",legs[i].start_address,"green");
                                          }

                                          var steps = legs[i].steps;

                                        //  alert('arrival time : '+legs[i].arrival_time.text);

                                    //  var duration = steps.duration_in_traffic;

                                      // alert(duration.text);

                                          for (j=0;j<steps.length;j++) 
                                          {

                                              var nextSegment = steps[j].path;

                                              for (k=0;k<nextSegment.length;k++) 
                                                  {
                                                  polyline[0].getPath().push(nextSegment[k]);
                                                  //bounds.extend(nextSegment[k]);
                                                     }
                                          }

                                        //  createMarker(directionsDisplay.getMap(),legs[i].start_location,"marker"+i,"some text for marker "+i+"<br>"+legs[i].start_address,markerletter);   
                                        }
                                            // Marker for start point 
                                        createMarker(dirdis.getMap(),legs[0].start_location,"marker"+0,"Start Point<br>"+legs[0].start_address,'A');

                                        var i=legs.length;
                                        var markerletter = "A".charCodeAt(0);
                                          markerletter += i;
                                        markerletter = String.fromCharCode(markerletter);

                                        // marker for End Point 
                                        createMarker(dirdis.getMap(),legs[legs.length-1].end_location,"marker"+i,"End Point <br>"+legs[legs.length-1].end_address,'B');

                                        polyline[0].setMap(map);

                                        //startAnimation(0);  
                                    }
                                }
                            });
                        })(k);
                    }
                }
            };
        }

        var icons = new Array();
        icons["red"] = new google.maps.MarkerImage("mapIcons/marker_red.png",
              // This marker is 20 pixels wide by 34 pixels tall.
              new google.maps.Size(20, 34),
              // The origin for this image is 0,0.
              new google.maps.Point(0,0),
              // The anchor for this image is at 9,34.
              new google.maps.Point(9, 34));

        function getMarkerImage(iconStr) {

        //alert(iconStr);

           if ((typeof(iconStr)=="undefined") || (iconStr==null)) { 
              iconStr = "red"; 
           }

        if(iconStr == 'A')
        {
           // for start point 

           if (!icons[iconStr]) {
              icons[iconStr] = new google.maps.MarkerImage("http://www.google.com/mapfiles/dd-start.png",
              // This marker is 20 pixels wide by 34 pixels tall.
              new google.maps.Size(20, 34),
              // The origin for this image is 0,0.
              new google.maps.Point(0,0),
              // The anchor for this image is at 6,20.
              new google.maps.Point(9, 34));
           } 

        }
        if (iconStr == 'B')
        {

            // for end point

            if (!icons[iconStr]) {
                  icons[iconStr] = new google.maps.MarkerImage("http://www.google.com/mapfiles/dd-end.png",
                  // This marker is 20 pixels wide by 34 pixels tall.
                  new google.maps.Size(20, 34),
                  // The origin for this image is 0,0.
                  new google.maps.Point(0,0),
                  // The anchor for this image is at 6,20.
                  new google.maps.Point(9, 34));
               } 

            }
        return icons[iconStr];
        }
          // Marker sizes are expressed as a Size of X,Y
          // where the origin of the image (0,0) is located
          // in the top left of the image.

          // Origins, anchor positions and coordinates of the marker
          // increase in the X direction to the right and in
          // the Y direction down.

          var iconImage = new google.maps.MarkerImage('mapIcons/marker_red.png',
              // This marker is 20 pixels wide by 34 pixels tall.
              new google.maps.Size(20, 34),
              // The origin for this image is 0,0.
              new google.maps.Point(0,0),
              // The anchor for this image is at 9,34.
              new google.maps.Point(9, 34));

          var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
              // The shadow image is larger in the horizontal dimension
              // while the position and offset are the same as for the main image.
              new google.maps.Size(37, 34),
              new google.maps.Point(0,0),
              new google.maps.Point(9, 34));
              // Shapes define the clickable region of the icon.
              // The type defines an HTML &lt;area&gt; element 'poly' which
              // traces out a polygon as a series of X,Y points. The final
              // coordinate closes the poly by connecting to the first
              // coordinate.
          var iconShape = {
              coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
              type: 'poly'
          };

        function createMarker(map, latlng, label, html, color) {

        //alert(color);
        //  alert("createMarker("+latlng+","+label+","+html+","+color+")");

            var contentString = '<b>'+label+'</b><br>'+html;

        //    alert('creatMarker'+contentString);

            var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                shadow: iconShadow,
                icon: getMarkerImage(color),
                shape: iconShape,
                title: label,
                zIndex: Math.round(latlng.lat()*-100000)<<5
                });
                marker.myname = label;

            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(contentString); 
                infowindow.open(map,marker);
                });

            return marker;
        }

              google.maps.event.addDomListener(window, 'load', initialize);

        </script>

        <div id="map_canvas"></div>

      [1]: http://i.stack.imgur.com/yB4Tw.png

  [1]: http://i.stack.imgur.com/ld0j7.png 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T08:58:55.433

首先，您的 for 循环不正确：

```
for (var k; k<0;k++){
  calcRoute(percorso[k], percorso[k+1]);
  k++;
} 
```

[这可能对你有用](https://developer.mozilla.org/en/A_re-introduction_to_JavaScript)

干杯

# adaboost - 如何用 AdaBoost 算法将几个弱分类器组合成一个强分类器？

> ID：10682017
> 
> 赞同：0
> 
> 时间：2012-05-21T08:43:31.467
> 
> 标签：adaboost

我对 AdaBoost 如何将每次迭代的弱分类器组合成一个强分类器有疑问。我使用 C4.5 算法作为弱分类器算法。并且对于每次迭代，它都会产生不同的决策树和 alpha。如何将这些模型组合成一个强大的分类器。在算法中被告知要结合它们，adaboost 使用公式 alpha*hyphotesis。我怎样才能将它们与该公式结合起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:00:54.160

这很简单。alpha 可以用不同的方式计算。维奥拉在他的论文中说：

```
alpha= log(1/beta).
beta= wr/(1-wr).
wr is weighted error. 
```

# android - Android Two finger rotation

> ID：10682019
> 
> 赞同：32
> 
> 时间：2012-05-21T08:43:35.993
> 
> 标签：android, rotation, gesture-recognition

I am trying to implement two finger rotation in android however, it is not quite working as expected. The goal is to implement rotation like Google Earth does (two-finger rotating the image around the focal point). Currently my rotation listener looks like this:

```
 private class RotationGestureListener {
    private static final int INVALID_POINTER_ID = -1;
    private float fX, fY, sX, sY, focalX, focalY;
    private int ptrID1, ptrID2;

    public RotationGestureListener(){
        ptrID1 = INVALID_POINTER_ID;
        ptrID2 = INVALID_POINTER_ID;
    }

    public boolean onTouchEvent(MotionEvent event){
        switch (event.getActionMasked()) {
            case MotionEvent.ACTION_DOWN:
                sX = event.getX();
                sY = event.getY();
                ptrID1 = event.getPointerId(0);
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                fX = event.getX();
                fY = event.getY();
                focalX = getMidpoint(fX, sX);
                focalY = getMidpoint(fY, sY);
                ptrID2 = event.getPointerId(event.getActionIndex());
                break;
            case MotionEvent.ACTION_MOVE:

                if(ptrID1 != INVALID_POINTER_ID && ptrID2 != INVALID_POINTER_ID){
                    float nfX, nfY, nsX, nsY;
                    nfX = event.getX(event.findPointerIndex(ptrID1));
                    nfY = event.getY(event.findPointerIndex(ptrID1));
                    nsX = event.getX(event.findPointerIndex(ptrID2));
                    nsY = event.getY(event.findPointerIndex(ptrID2));
                    float angle = angleBtwLines(fX, fY, nfX, nfY, sX, sY, nsX, nsY);
                    rotateImage(angle, focalX, focalY);
                    fX = nfX;
                    fY = nfY;
                    sX = nfX;
                    sY = nfY;
                }
                break;
            case MotionEvent.ACTION_UP:
                ptrID1 = INVALID_POINTER_ID;
                break;
            case MotionEvent.ACTION_POINTER_UP:
                ptrID2 = INVALID_POINTER_ID;
                break;
        }
        return false;
    }

    private float getMidpoint(float a, float b){
        return (a + b) / 2;
    }
    private float angleBtwLines (float fx1, float fy1, float fx2, float fy2, float sx1, float sy1, float sx2, float sy2){
        float angle1 = (float) Math.atan2(fy1 - fy2, fx1 - fx2);
        float angle2 = (float) Math.atan2(sy1 - sy2, sx1 - sx2);
        return (float) Math.toDegrees((angle1-angle2));
    }
} 
```

However whenever I rotate the angle of rotation is much larger and it sometimes it rotates to the wrong side. Any ideas on how to fix this?

By the way I am testing it on a Motorola Atrix, so it does not have the touchscreen bug.

Thanks

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-08-16T14:45:37.220

## Improvements of the class:

*   angle returned is total since rotation has begun
*   removing unnecessary functions
*   simplification
*   get position of first pointer only after second pointer is down

```
public class RotationGestureDetector {
    private static final int INVALID_POINTER_ID = -1;
    private float fX, fY, sX, sY;
    private int ptrID1, ptrID2;
    private float mAngle;

    private OnRotationGestureListener mListener;

    public float getAngle() {
        return mAngle;
    }

    public RotationGestureDetector(OnRotationGestureListener listener){
        mListener = listener;
        ptrID1 = INVALID_POINTER_ID;
        ptrID2 = INVALID_POINTER_ID;
    }

    public boolean onTouchEvent(MotionEvent event){
        switch (event.getActionMasked()) {
            case MotionEvent.ACTION_DOWN:
                ptrID1 = event.getPointerId(event.getActionIndex());
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                ptrID2 = event.getPointerId(event.getActionIndex());
                sX = event.getX(event.findPointerIndex(ptrID1));
                sY = event.getY(event.findPointerIndex(ptrID1));
                fX = event.getX(event.findPointerIndex(ptrID2));
                fY = event.getY(event.findPointerIndex(ptrID2));
                break;
            case MotionEvent.ACTION_MOVE:
                if(ptrID1 != INVALID_POINTER_ID && ptrID2 != INVALID_POINTER_ID){
                    float nfX, nfY, nsX, nsY;
                    nsX = event.getX(event.findPointerIndex(ptrID1));
                    nsY = event.getY(event.findPointerIndex(ptrID1));
                    nfX = event.getX(event.findPointerIndex(ptrID2));
                    nfY = event.getY(event.findPointerIndex(ptrID2));

                    mAngle = angleBetweenLines(fX, fY, sX, sY, nfX, nfY, nsX, nsY);

                    if (mListener != null) {
                        mListener.OnRotation(this);
                    }
                }
                break;
            case MotionEvent.ACTION_UP:
                ptrID1 = INVALID_POINTER_ID;
                break;
            case MotionEvent.ACTION_POINTER_UP:
                ptrID2 = INVALID_POINTER_ID;
                break;
            case MotionEvent.ACTION_CANCEL:
                ptrID1 = INVALID_POINTER_ID;
                ptrID2 = INVALID_POINTER_ID;
                break;
        }
        return true;
    }

    private float angleBetweenLines (float fX, float fY, float sX, float sY, float nfX, float nfY, float nsX, float nsY)
    {
        float angle1 = (float) Math.atan2( (fY - sY), (fX - sX) );
        float angle2 = (float) Math.atan2( (nfY - nsY), (nfX - nsX) );

        float angle = ((float)Math.toDegrees(angle1 - angle2)) % 360;
        if (angle < -180.f) angle += 360.0f;
        if (angle > 180.f) angle -= 360.0f;
        return angle;
    }

    public static interface OnRotationGestureListener {
        public void OnRotation(RotationGestureDetector rotationDetector);
    }
} 
```

## How to use it:

1.  Put the above class in a separate file `RotationGestureDetector.java`
2.  create a private field `mRotationDetector` of type `RotationGestureDetector` in your activity class and create a new instance of the detector during the initialization (`onCreate` method for example) and give as parameter a class implementing the `onRotation` method (here the `activity = this`).
3.  In the method `onTouchEvent`, send the touch events received to the gesture detector with '`mRotationDetector.onTouchEvent(event);`'
4.  Implements `RotationGestureDetector.OnRotationGestureListener` in your activity and add the method '`public void OnRotation(RotationGestureDetector rotationDetector)`' in the activity. In this method, get the angle with `rotationDetector.getAngle()`

## Example:

```
public class MyActivity extends Activity implements RotationGestureDetector.OnRotationGestureListener {
    private RotationGestureDetector mRotationDetector;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mRotationDetector = new RotationGestureDetector(this);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event){
        mRotationDetector.onTouchEvent(event);
        return super.onTouchEvent(event);
    }

    @Override
    public void OnRotation(RotationGestureDetector rotationDetector) {
        float angle = rotationDetector.getAngle();
        Log.d("RotationGestureDetector", "Rotation: " + Float.toString(angle));
    }

} 
```

## Note:

You can also use the `RotationGestureDetector` class in a `View` instead of an `Activity`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-13T14:01:39.613

Here's my improvement on Leszek's answer. I found that his didn't work for small views as when a touch went outside the view the angle calculation was wrong. The solution is to get the raw location instead of just getX/Y.

Credit to [this thread](https://stackoverflow.com/questions/6517494/get-motionevent-getrawx-getrawy-of-other-pointers) for getting the raw points on a rotatable view.

```
public class RotationGestureDetector {

    private static final int INVALID_POINTER_ID = -1;
    private PointF mFPoint = new PointF();
    private PointF mSPoint = new PointF();
    private int mPtrID1, mPtrID2;
    private float mAngle;
    private View mView;

    private OnRotationGestureListener mListener;

    public float getAngle() {
        return mAngle;
    }

    public RotationGestureDetector(OnRotationGestureListener listener, View v) {
        mListener = listener;
        mView = v;
        mPtrID1 = INVALID_POINTER_ID;
        mPtrID2 = INVALID_POINTER_ID;
    }

    public boolean onTouchEvent(MotionEvent event) {

        switch (event.getActionMasked()) {
            case MotionEvent.ACTION_OUTSIDE:
                Log.d(this, "ACTION_OUTSIDE");
                break;
            case MotionEvent.ACTION_DOWN:
                Log.v(this, "ACTION_DOWN");
                mPtrID1 = event.getPointerId(event.getActionIndex());
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                Log.v(this, "ACTION_POINTER_DOWN");
                mPtrID2 = event.getPointerId(event.getActionIndex());

                getRawPoint(event, mPtrID1, mSPoint);
                getRawPoint(event, mPtrID2, mFPoint);

                break;
            case MotionEvent.ACTION_MOVE:
                if (mPtrID1 != INVALID_POINTER_ID && mPtrID2 != INVALID_POINTER_ID) {
                    PointF nfPoint = new PointF();
                    PointF nsPoint = new PointF();

                    getRawPoint(event, mPtrID1, nsPoint);
                    getRawPoint(event, mPtrID2, nfPoint);

                    mAngle = angleBetweenLines(mFPoint, mSPoint, nfPoint, nsPoint);

                    if (mListener != null) {
                        mListener.onRotation(this);
                    }
                }
                break;
            case MotionEvent.ACTION_UP:
                mPtrID1 = INVALID_POINTER_ID;
                break;
            case MotionEvent.ACTION_POINTER_UP:
                mPtrID2 = INVALID_POINTER_ID;
                break;
            case MotionEvent.ACTION_CANCEL:
                mPtrID1 = INVALID_POINTER_ID;
                mPtrID2 = INVALID_POINTER_ID;
                break;
            default:
                break;
        }
        return true;
    }

    void getRawPoint(MotionEvent ev, int index, PointF point) {
        final int[] location = { 0, 0 };
        mView.getLocationOnScreen(location);

        float x = ev.getX(index);
        float y = ev.getY(index);

        double angle = Math.toDegrees(Math.atan2(y, x));
        angle += mView.getRotation();

        final float length = PointF.length(x, y);

        x = (float) (length * Math.cos(Math.toRadians(angle))) + location[0];
        y = (float) (length * Math.sin(Math.toRadians(angle))) + location[1];

        point.set(x, y);
    }

    private float angleBetweenLines(PointF fPoint, PointF sPoint, PointF nFpoint, PointF nSpoint) {
        float angle1 = (float) Math.atan2((fPoint.y - sPoint.y), (fPoint.x - sPoint.x));
        float angle2 = (float) Math.atan2((nFpoint.y - nSpoint.y), (nFpoint.x - nSpoint.x));

        float angle = ((float) Math.toDegrees(angle1 - angle2)) % 360;
        if (angle < -180.f) angle += 360.0f;
        if (angle > 180.f) angle -= 360.0f;
        return -angle;
    }

    public interface OnRotationGestureListener {
        void onRotation(RotationGestureDetector rotationDetector);
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-16T15:12:29.480

I tried a combination of answers that are here but it still didn't work perfectly so I had to modify it a little bit.

This code gives you the delta angle on each rotation, it works perfectly to me, I'm using it to rotate an object in OpenGL.

```
public class RotationGestureDetector {
private static final int INVALID_POINTER_ID = -1;
private float fX, fY, sX, sY, focalX, focalY;
private int ptrID1, ptrID2;
private float mAngle;
private boolean firstTouch;

private OnRotationGestureListener mListener;

public float getAngle() {
    return mAngle;
}

public RotationGestureDetector(OnRotationGestureListener listener){
    mListener = listener;
    ptrID1 = INVALID_POINTER_ID;
    ptrID2 = INVALID_POINTER_ID;
}

public boolean onTouchEvent(MotionEvent event){
    switch (event.getActionMasked()) {
        case MotionEvent.ACTION_DOWN:
            sX = event.getX();
            sY = event.getY();
            ptrID1 = event.getPointerId(0);
            mAngle = 0;
            firstTouch = true;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            fX = event.getX();
            fY = event.getY();
            focalX = getMidpoint(fX, sX);
            focalY = getMidpoint(fY, sY);
            ptrID2 = event.getPointerId(event.getActionIndex());
            mAngle = 0;
            firstTouch = true;
            break;
        case MotionEvent.ACTION_MOVE:

            if(ptrID1 != INVALID_POINTER_ID && ptrID2 != INVALID_POINTER_ID){
                float nfX, nfY, nsX, nsY;
                nsX = event.getX(event.findPointerIndex(ptrID1));
                nsY = event.getY(event.findPointerIndex(ptrID1));
                nfX = event.getX(event.findPointerIndex(ptrID2));
                nfY = event.getY(event.findPointerIndex(ptrID2));
                if (firstTouch) {
                    mAngle = 0;
                    firstTouch = false;
                } else {
                    mAngle = angleBetweenLines(fX, fY, sX, sY, nfX, nfY, nsX, nsY);
                }

                if (mListener != null) {
                    mListener.OnRotation(this);
                }
                fX = nfX;
                fY = nfY;
                sX = nsX;
                sY = nsY;
            }
            break;
        case MotionEvent.ACTION_UP:
            ptrID1 = INVALID_POINTER_ID;
            break;
        case MotionEvent.ACTION_POINTER_UP:
            ptrID2 = INVALID_POINTER_ID;
            break;
    }
    return true;
}

private float getMidpoint(float a, float b){
    return (a + b) / 2;
}

float findAngleDelta( float angle1, float angle2 )
{
    float From = ClipAngleTo0_360( angle2 );
    float To   = ClipAngleTo0_360( angle1 );

    float Dist  = To - From;

    if ( Dist < -180.0f )
    {
        Dist += 360.0f;
    }
    else if ( Dist > 180.0f )
    {
        Dist -= 360.0f;
    }

    return Dist;
}

float ClipAngleTo0_360( float Angle ) { 
    return Angle % 360.0f; 
}

private float angleBetweenLines (float fx1, float fy1, float fx2, float fy2, float sx1, float sy1, float sx2, float sy2)
{
       float angle1 = (float) Math.atan2( (fy1 - fy2), (fx1 - fx2) );
       float angle2 = (float) Math.atan2( (sy1 - sy2), (sx1 - sx2) );

       return findAngleDelta((float)Math.toDegrees(angle1),(float)Math.toDegrees(angle2));
}

public static interface OnRotationGestureListener {
    public boolean OnRotation(RotationGestureDetector rotationDetector);
}
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-15T16:26:02.797

There are still some mistakes, here is the solution that worked perfect for me...

instead of

```
float angle = angleBtwLines(fX, fY, nfX, nfY, sX, sY, nsX, nsY); 
```

you need to write

```
float angle = angleBtwLines(fX, fY, sX, sY, nfX, nfY, nsX, nsY); 
```

And angleBetweenLines should be

```
private float angleBetweenLines (float fx1, float fy1, float fx2, float fy2, float sx1, float sy1, float sx2, float sy2)
{
       float angle1 = (float) Math.atan2( (fy1 - fy2), (fx1 - fx2) );
       float angle2 = (float) Math.atan2( (sy1 - sy2), (sx1 - sx2) );

        return findAngleDelta((float)Math.toDegrees(angle1),(float)Math.toDegrees(angle2));
} 
```

Then the angle you get is the angle you should rotate the image by...

```
ImageAngle += angle... 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-21T08:57:34.997

You have a problem here:

```
private float angleBtwLines (float fx1, float fy1, float fx2, float fy2, float sx1, float sy1, float sx2, float sy2){
    float angle1 = (float) Math.atan2(fy1 - fy2, fx1 - fx2);
    float angle2 = (float) Math.atan2(sy1 - sy2, sx1 - sx2);
    return (float) Math.toDegrees((angle1-angle2));
} 
```

You must clip the angles to the [0..2*Pi] range and than carefully calculate the angular difference in the (-Pi..+Pi) range.

Here's the code for 0..360 angle range

```
float FindAngleDelta( float angle1, float angle2 )
{
    float From = ClipAngleTo0_360( angle2 );
    float To   = ClipAngleTo0_360( angle1 );

    float Dist  = To - From;

    if ( Dist < -180.0f )
    {
        Dist += 360.0f;
    }
    else if ( Dist > 180.0f )
    {
        Dist -= 360.0f;
    }

    return Dist;
} 
```

In C++ I would code the ClipAngleTo0_360 as

```
float ClipAngleTo0_360( float Angle ) { return std::fmod( Angle, 360.0f ); } 
```

where the std::fmod return the floating-point remainder.

In java you may use something like

```
float ClipAngleTo0_360( float Angle )
{
    float Res = Angle;
    while(Angle < 0) { Angle += 360.0; }
    while(Angle >= 360.0) { Angle -= 360.0; }
    return Res;
} 
```

Yeah, careful floating-point arithmetics is much better than the obvious while() loop.

As MeTTeO mentioned (java reference, 15.17.3), you can use the '%' operator instead of C++'s std::fmod:

```
float ClipAngleTo0_360( float Angle ) { return Angle % 360.0; } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-26T16:00:54.360

I tried a lot of examples. But only this one works good.:

```
public class RotationGestureDetector {

  public interface RotationListener {
    public void onRotate(float deltaAngle);
  }

  protected float mRotation;
  private RotationListener mListener;

  public RotationGestureDetector(RotationListener listener) {
    mListener = listener;
  }

  private float rotation(MotionEvent event) {
    double delta_x = (event.getX(0) - event.getX(1));
    double delta_y = (event.getY(0) - event.getY(1));
    double radians = Math.atan2(delta_y, delta_x);
    return (float) Math.toDegrees(radians);
  }

  public void onTouch(MotionEvent e) {
    if (e.getPointerCount() != 2) {
      return;
    }

    if (e.getActionMasked() == MotionEvent.ACTION_POINTER_DOWN) {
      mRotation = rotation(e);
    }

    float rotation = rotation(e);
    float delta = rotation - mRotation;
    mRotation += delta;

    if (mListener != null) {
      mListener.onRotate(delta);}
    }
  }
} 
```

In your callback:

```
view.setRotation(view.getRotation() + deltaAngle)); 
```

# c# - 通过我们的程序在我们的项目中添加新的 .aspx 项？

> ID：10682020
> 
> 赞同：0
> 
> 时间：2012-05-21T08:43:39.893
> 
> 标签：c#, asp.net, sql-server-2008

我的应用程序中有一个树视图。如果我添加一个节点（父节点或子节点），那么应该添加节点，并且相应的 .aspx 页面也应该添加到我们的项目中......例如

我的树包含“编程”作为父节点，“c”、“c++”、“C#”.. 作为子节点。以及一个用于添加更多节点的文本框。如果我插入“java”并单击添加按钮，那么应该将（java）添加为子节点，并且应该在我们的项目中添加“java.aspx”页面。

我们可以这样做吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:48:13.463

是的，您可以，还有其他基于 Web 的应用程序允许您将 aspx/ascx 添加到您的文件系统（例如 Sitecore），这样您就可以了。我想你可以用 StreamWriter 做到这一点：http: [//msdn.microsoft.com/en-us/library/aa287548 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287548(v=vs.71).aspx)

# cakephp - 在我将客户重定向到贝宝之前，是否可以先捕获表单的值并将其保存到我的数据库中？

> ID：10682028
> 
> 赞同：0
> 
> 时间：2012-05-21T08:44:01.307
> 
> 标签：cakephp, paypal

这就是我所拥有的。我想在将客户交给贝宝之前捕获这些价值。这是为了在我的表格中保存客户提供的送货地址和电子邮件：

```
<?php $countries = array(
       'af' => 'Afganistan', 
       'al' => 'Albania', 
       //... 
       'zm' => 'Zambia', 
       'zw' => 'Zimbabwe' 
); ?>

<div class="section">
    <h3>Customer Details</h3>
    <hr />
    <div class="user-form">
        <div class="user-header">Personal Info</div>
        <div class="user-section showBorder">
            <label>Full Name:</label>
            <?php echo $this->Form->input('fullname',array('label'=>false, 'class'=>'user-field'));?>
            <label>Contact Number:</label>
            <?php echo $this->Form->input('contactnumber',array('label'=>false, 'class'=>'user-field'));?>
            <label>Email:</label>
            <?php echo $this->Form->input('email',array('label'=>false, 'class'=>'user-field'));?>
        </div>
        <div class="user-header">Delivery Address</div>
        <div class="user-section showBorder">
            <label>Address Line 1</label>
            <?php echo $this->Form->input('address1',array('label'=>false, 'class'=>'user-field'));?>
            <label>Address Line 2</label>
            <?php echo $this->Form->input('address1',array('label'=>false, 'class'=>'user-field'));?>
            <label>City</label>
            <?php echo $this->Form->input('city',array('label'=>false, 'class'=>'user-field'));?>
            <label>State/Province/Region:</label>
            <?php echo $this->Form->input('state',array('label'=>false, 'class'=>'user-field'));?>
            <label>Zip Code:</label>
            <?php echo $this->Form->input('zip',array('label'=>false, 'class'=>'user-field'));?>
            <label>Country: </label>
            <div>
                <?php echo $this->Form->select('country',$countries,array('label'=>false, 'class'=>'user-select'));?>
            </div>
        </div>
        <div class="user-submit">
            <?php echo $this->Form->submit('Ship to other Address',array('class'=>'customButton'));?>
        </div>
    </div>
</div> 
```

是否可以这样做，或者 IPN 可以帮助我将这些数据保存在我的数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:43:28.437

您如何捕获 IPN 回调？

IPN 将返回客户提供的数据 - 我不是 100% 确定，但我相信如果您向用户询问运输信息，他们将在 PayPal 表单中再次被询问 - 您可能需要参考 PayPal 文档才能转离开这些领域？

如果您保存该表单数据，您没有理由不能从 IPN 返回数据中选择字段并更新您自己的记录吗？

我仍然会将完整的 IPN 回调保留在某个模型中，并将其链接到您的客户/订单记录，因为它本质上是交易数据。

# c# - 类型化数据集中的自动递增字段

> ID：10682029
> 
> 赞同：0
> 
> 时间：2012-05-21T08:44:04.760
> 
> 标签：c#, .net, visual-studio, ado.net, strongly-typed-dataset

我正在使用类型化数据集并尝试使用一个自动递增列更新表。问题是当我以以下方式更新此表时

```
 tableAdapter.DeleteAllQuery();//
            DataRow addedRow =  dataTable.Rows.Add(null,
                                                dev.No,
                                                dev.IdKat.ToString());
        string id = addedRow.[0].ToString();
        tableAdapter.Update(dataTable); 
```

自动增量字段`id`与数据库中的字段不同。例如`addedRow.[0].ToString()`返回`0`但在数据库中的值为`2`.

为了获得实际`id`价值，我正在做这个把戏

```
 tableAdapter.DeleteAllQuery();//
        DataRow addedRow =  dataTable.Rows.Add(null,
                                            dev.No,
                                            dev.IdKat.ToString());
    **tableAdapter.Update(dataTable);
    tableAdapter.Fill(dataTable);**     
    string id = addedRow.[0].ToString();
    tableAdapter.Update(dataTable); 
```

一切正常。但是在每次插入/更新操作后填充我的数据表是一项耗时的任务。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:03:29.870

好的，我在[文档中找到了](http://msdn.microsoft.com/en-us/library/ks9f57t0%28v=vs.80%29.aspx)

# css - 具有透明和半透明部分的图像

> ID：10682030
> 
> 赞同：0
> 
> 时间：2012-05-21T08:44:05.850
> 
> 标签：css, image, transparency

我想创建一个包含透明和半透明部分的图像，这样如果我给出颜色 x 作为背景，透明部分将显示 X 颜色，半透明部分将显示颜色 X 的渐变阴影.

我需要在模板中使用这样的图像，这些图像将被具有不同颜色主题的客户使用。

编辑：问题是如何在图像中创建透明和半透明部分？请任何指点。

编辑：我让我的问题更清楚。在附图中，有一个透明区域。想法是在图像中有一个透明区域和一个半透明区域（指向指针的区域，目前这不是半透明的），这样如果我给红色作为背景颜色，透明区域将显示红色和半透明区域将显示红色渐变阴影。我想知道如何使指针附近的区域在 gimp 中是半透明的。请有任何想法。

![在此处输入图像描述](../Images/87b08af18583effc277c1a7a0f44ffab.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:05:33.610

If you wanna do it in pure css you might break up the picture and then style it together like a pusle, And then give each brick a class which you style with different opacity

```
.test {
background-color: #6374AB;
width: 100%;
color: #ffffff;
}

.opaque1 {  // for all other browsers
    opacity: .5;
}

.opaque2 {  // for IE5-7
    filter: alpha(opacity=50);
}

.opaque3 {  // for IE8
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
} 
```

IE compatibility note

If you want opacity to work in all IE versions, the order should be:

```
.opaque {
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"; // first!
    filter: alpha(opacity=50);                  // second!
} 
```

***[Reference](http://www.quirksmode.org/css/opacity.html).***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:49:49.867

使用 PNG-24 图像并设置`background-color`保存它的元素：

```
<div id="header" style="background-color: #f00"></div>

<style>
    #header {
        background: transparent url("header-background.png") no-repeat 50% 0;
        height: 100px;
    }
</style> 
```

内联颜色将覆盖`transparent`CSS 中的颜色，而纯色将位于图像下方。

# android - Android Activity 切换不刷新

> ID：10682036
> 
> 赞同：0
> 
> 时间：2012-05-21T08:45:02.497
> 
> 标签：android, android-activity, switching

我试图从很多天开始（在多个活动之间切换）......最后我尝试使用意图标志来做到这一点

```
Intent intent = new Intent(getApplicationContext(),Act1.class);

if(a1)  // a1 is set true during oncreate of act1
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);

startActivity(intent) ; 
```

这行得通吗？？还是其他方式？？我不来这里。我到底需要什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T18:52:25.727

在相应的活动 xml 标记下在清单中声明为 android:launchMode="singleInstance"，例如

[这个]（[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html) “”）有效

# java - 更改已编译类中的字符串常量

> ID：10682042
> 
> 赞同：15
> 
> 时间：2012-05-21T08:45:30.180
> 
> 标签：java, constants, bytecode-manipulation, .class-file

我需要更改已部署的 Java 程序中的字符串常量，`.class`即已编译文件中的值。它可以重新启动，但不容易重新编译（尽管如果这个问题没有答案，这是一个不方便的选择）。这可能吗？

更新：我只是用十六进制编辑器查看了文件，看起来我可以轻松地更改那里的字符串。那会起作用吗，即不会使文件的某种签名无效吗？旧字符串和新字符串都是字母数字，如果需要，可以是相同的长度。

更新2：我修好了。因为我需要更改的特定类非常小，并且在新版本的项目中没有更改，所以我可以编译它并从那里获取新类。出于教育目的，仍然对不涉及编译的答案感兴趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T09:02:55.623

如果你有这个类的资源，那么我的方法是：

*   获取 JAR 文件
*   获取单个类的源代码
*   使用类路径上的 JAR 编译源代码（这样，您不必编译其他任何东西；JAR 已经包含二进制文件并没有什么坏处）。您可以为此使用最新的 Java 版本；`-source`只需使用and降级编译器`-target`。
*   将 JAR 中的类文件替换为新的 using`jar u`或 Ant 任务

Ant 任务示例：

```
 <jar destfile="${jar}"
            compress="true" update="true" duplicate="preserve" index="true"
            manifest="tmp/META-INF/MANIFEST.MF"
        >
            <fileset dir="build/classes">
                <filter />
            </fileset>
            <zipfileset src="${origJar}">
                <exclude name="META-INF/*"/>
            </zipfileset>
        </jar> 
```

在这里，我还更新了清单。首先放置新类，然后添加原始 JAR 中的所有文件。`duplicate="preserve"`将确保新代码不会被覆盖。

如果代码未签名，如果新字符串与旧字符串的长度完全相同，您也可以尝试替换字节。Java 对代码进行了一些检查，但[.class 文件中没有校验和](https://en.wikipedia.org/wiki/Java_class_file)。

您必须保留长度；否则类加载器会感到困惑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T01:02:16.137

修改常量池中的字符串（技术上是 Utf8 项）时唯一需要的额外数据是长度字段（数据前的 2 个字节大端序）。没有其他需要修改的校验和或偏移量。

有两个警告：

*   该字符串可以在其他地方使用。例如，“代码”用于方法代码属性，因此更改它会破坏文件。
*   该字符串以修改后的 Utf8 格式存储。因此，基本平面之外的空字节和 unicode 字符的编码方式不同。长度字段是字节数，而不是字符数，限制为 65535。

如果您打算经常这样做，最好获得一个类文件编辑器工具，但十六进制编辑器对于快速更改很有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-08T20:12:29.063

我最近编写了自己的 ConstantPool 映射器，因为 ASM 和 JarJar 存在以下问题：

*   放慢速度
*   不支持没有所有类依赖的重写
*   不支持流式传输
*   不支持 Tree API 模式下的 Remapper
*   不得不展开和折叠 StackMaps

我最终得到以下结果：

```
public void process(DataInputStream in, DataOutputStream out, Function mapper) throws IOException {
    int magic = in.readInt();
    if (magic != 0xcafebabe) throw new ClassFormatError("wrong magic: " + magic);
    out.writeInt(magic);

    copy(in, out, 4); // minor and major

    int size = in.readUnsignedShort();
    out.writeShort(size);

    for (int i = 1; i < size; i++) {
        int tag = in.readUnsignedByte();
        out.writeByte(tag);

        Constant constant = Constant.constant(tag);
        switch (constant) {
            case Utf8:
                out.writeUTF(mapper.apply(in.readUTF()));
                break;
            case Double:
            case Long:
                i++; // "In retrospect, making 8-byte constants take two constant pool entries was a poor choice."
                // See http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.5
            default:
                copy(in, out, constant.size);
                break;
        }
    }
    Streams.copyAndClose(in, out);
}

private final byte[] buffer = new byte[8];

private void copy(DataInputStream in, DataOutputStream out, int amount) throws IOException {
    in.readFully(buffer, 0, amount);
    out.write(buffer, 0, amount);
} 
```

接着

```
public enum Constant {
    Utf8(1, -1),
    Integer(3, 4),
    Float(4, 4),
    Long(5, 8),
    Double(6,8),
    Class(7, 2),
    String(8, 2),
    Field(9, 4),
    Method(10, 4),
    InterfaceMethod(11, 4),
    NameAndType(12, 4),
    MethodHandle(15, 3),
    MethodType(16, 2),
    InvokeDynamic(18, 4);

public final int tag, size;

Constant(int tag, int size) { this.tag = tag; this.size = size; }

private static final Constant[] constants;
static{
    constants = new Constant[19];
    for (Constant c : Constant.values()) constants[c.tag] = c;
}

public static Constant constant(int tag) {
    try {
        Constant constant = constants[tag];
        if(constant != null) return constant;
    } catch (IndexOutOfBoundsException ignored) { }
    throw new ClassFormatError("Unknown tag: " + tag);
} 
```

只是想我会展示没有库的替代方案，因为这是一个开始黑客攻击的好地方。我的代码受到[javap](http://www2.in.tum.de/funky/browser/javac/langtools/src/share/classes/sun/tools/javap/ClassData.java?rev=1)源代码的启发

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-21T09:54:35.670

您可以使用许多字节码工程库来修改 .class。例如，使用[javaassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)。

但是，如果您尝试替换静态 final 成员，它可能不会给您想要的效果，因为编译器会在使用该常量的任何地方内联该常量。

使用 javaassist.jar 的示例代码

//ConstantHolder.java

```
public class ConstantHolder {

 public static final String HELLO="hello";

 public static void main(String[] args) {
  System.out.println("Value:" + ConstantHolder.HELLO);
 }
} 
```

//修改Constant.java

```
import java.io.IOException;

import javassist.CannotCompileException;
import javassist.ClassPool;
import javassist.CtClass;
import javassist.CtField;
import javassist.NotFoundException;

//ModifyConstant.java
public class ModifyConstant {
 public static void main(String[] args) {
  modifyConstant();
 }

 private static void modifyConstant() {
  ClassPool pool = ClassPool.getDefault();
  try {
   CtClass pt = pool.get("ConstantHolder");
   CtField field = pt.getField("HELLO");
   pt.removeField(field);
   CtField newField = CtField.make("public static final String HELLO=\"hell\";", pt);
   pt.addField(newField);
   pt.writeFile();
  } catch (NotFoundException e) {
   e.printStackTrace();System.exit(-1);
  } catch (CannotCompileException e) {
   e.printStackTrace();System.exit(-1);
  } catch (IOException e) {
   e.printStackTrace();System.exit(-1);
  }
 }  
} 
```

在这种情况下，程序成功地将 HELLO 的值从“Hello”修改为“Hell”。但是，当您运行 ConstantHolder 类时，由于编译器的内联，它仍会打印“Value:Hello”。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-05T08:29:54.333

我过去也遇到过类似的问题。我的解决方案是使用上述字节码工程库之一。我找不到 javaassist，但是有一个很棒的工具叫做[dirtyJOE](http://dirty-joe.com/)，它允许你（在很多事情中）编辑你的.class 文件中的常量。

这是一个截图

[![您只需导入 .class 文件并单击常量](../Images/c6b20a8e78d6dfa8346cd66054464300.png)](https://i.stack.imgur.com/GJldD.png)

您只需导入 .class 文件并单击常量

# java - 干净利落地实现数据驱动的 Swing 组件

> ID：10682045
> 
> 赞同：2
> 
> 时间：2012-05-21T08:45:46.050
> 
> 标签：java, swing, data-driven

我继承了一个 Java Swing 数据维护应用程序。

在主 JPanel 上有一个用户管理模块，它具有主要的用户属性。在子公司 JTabbedPane 中维护着主从关系。例如，用户所属的组和用户可以关联的组织。我需要能够交叉验证，以便仅当用户是特定组的成员时才能访问组织窗格。

在不将 Swing UI 代码与数据访问和管理代码捆绑在一起的情况下，实现此目的的最佳方法是什么？

我可以看到需要更多这种数据驱动的组件管理，因此实现这一点的通用方法是我理想中所寻找的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:56:04.597

使用[依赖注入](https://en.wikipedia.org/wiki/Dependency_injection)和“服务”。其中一项服务是“canUserAccessOrgPane()”

UI 获得了实现服务注入的 bean，但不知道它来自何处。

bean 不知道它在代码的哪些部分使用。

DI 框架的配置将两者连接起来。

# .net - 如何将 LINQ to Entities 查询的结果转换为列表<>

> ID：10682047
> 
> 赞同：0
> 
> 时间：2012-05-21T08:45:48.237
> 
> 标签：.net, c#-4.0, combobox, listbox

```
 var term = from s in DB.Terms
                       select new { s.Term_ID, s.TermName };

            comboboxTerm.DataSource = term;
            combobox.DisplayMember = "Term_Name";
            combobox.ValueMember = "Term_ID"; 
```

我想将上述查询转换为列表<>，以便我可以将列表设置为组合框术语的数据源。这将使我能够在代码中访问 c​​omboboxTerm selectedValue。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:47:03.800

```
comboboxTerm.DataSource = term.ToList(); 
```

或者

```
term = term.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:47:19.033

将其更改为：

```
var term = (from s in DB.Terms
                   select new { s.Term_ID, s.TermName }).ToList(); 
```

这实际上也会解决您的查询，因为默认情况下您会返回一个`IQueryable`

**但是**对于组合框的数据源，您最好使用字典，如下所示：

```
var term = (from s in DB.Terms
                   select new { s.Term_ID, s.TermName })
           .ToDictionary(s => s.Term_ID, s => s.TermName); 
```

然后将以下内容添加到您的组合框中：

```
SelectedValuePath="Key" DisplayMemberPath="Value" 
```

# c# - 编码模板 - 代码文件顶部的自动属性

> ID：10682048
> 
> 赞同：4
> 
> 时间：2012-05-21T08:45:49.917
> 
> 标签：c#, visual-studio-2010, visual-studio

这似乎是一个小问题，但我想知道 Visual Studio 或 3rd 方应用程序是否支持配置 Visual Studio 放置某些自动生成的代码的位置。

当我编程时，我会尽量提高效率，并使用“Ctrl+”。很多要自动实现接口、字段、属性等。我遇到的一个问题是每次我想在类文件中创建一个属性（首先输入用法，然后按 Ctrl+。红色无效文本，提示时选择`Generate Property Stub`）是 Visual Studio 将代码放在类文件的最底部。

这不是我构建代码文件的方式，无论好坏，如果自动属性是在顶部生成的，我会更喜欢它。

所以而不是（就像自动生成那样）

```
public class ObjectProvider
{
    public ObjectProvider(Object o)
    {
        this.Object = o;
    }

    public object Object { get; private set; }
} 
```

我会比较喜欢

```
public class ObjectProvider
{
    public object Object { get; private set; }

    public ObjectProvider(Object o)
    {
        this.Object = o;
    }
} 
```

我知道一个小小的改变，但是当我每周编码（至少！）5天，大约40小时时 - 我认为这实际上会为我节省很多时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:01:17.497

At the company I work for, nearly all developers use ReSharper. Once you've learned some keyboard shortcuts, you can *really* improve your efficiency.

For example, the shortcut to cleanup a code file (Ctrl+E, C). Beside other cleanup actions, it reorders all members in a class (which might be what you want).

[http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:01:37.133

您可以使用[默认的`prop`代码片段](http://msdn.microsoft.com/en-us/library/z41h7fat%28VS.90%29.aspx)，它将格式化一个属性来代替您的插入符号并允许轻松编辑。键入“ `prop`”，然后按两次 Tab 以获取此信息：

```
public int MyProperty { get; set; } 
```

`int`将已突出显示，因此只需键入类型的名称，按两次 Tab，然后键入属性的名称。这一切都发生在插入符号的当前位置。

# android - Android GC 内存碎片失败。解决方法？

> ID：10682049
> 
> 赞同：19
> 
> 时间：2012-05-21T08:46:08.690
> 
> 标签：android, memory, memory-leaks, bitmap, garbage-collection

我在 android 3.1 上测试，大堆大小选项，大约 250M 可用内存。

我将以下代码设置为在我点击应用程序首选项中的测试按钮时运行：

```
float [][][]foo = new float[3][2048][2048];
Bitmap bm = Bitmap.createBitmap(2048, 2048, Bitmap.Config.ARGB_8888);
bm.recycle();
bm  = null;
foo = null; 
```

我对此有足够的记忆——我可以按几次按钮而没有问题。

但是，如果我继续按下按钮，最终（少于 20 次点击）它会因 OutOfMemory 而死。[通常在android.graphics.Bitmap.nativeCreate(Native Method)]

没有其他事情发生——我永远不必离开 PreferencesActivity。当我点击按钮时，还会显示一个小的 Toast，因此正在进行少量其他 UI 活动。

这是由于碎片，还是只是 android Bitmap 代码和/或 GC 中的一个可怕的错误？还是我只是在做一些愚蠢的事情？（请让它变得愚蠢......）

有人有解决方法吗？因为上面的内容相当代表了我的代码在每次用户调用它时必须执行的操作，而现在尽管仔细清除了变量，但它在几次使用后就死了。（这已经让我发疯了很长时间了！）

[更新]

我已经确认这是一个碎片问题或 gc 错误，因为堆转储显示我只使用 5.6M，而空闲（无泄漏）在处理期间达到约 26M 的峰值。（此外，本机堆保持在 4M 以下。）与此同时，Java 堆的范围一直增长到我的测试设备上的 280M 限制，此时我开始收到 OutOfMemory 异常。所以我在高峰期只使用了 10% 的可用堆，但得到了 OutOfMemory。

[不幸的是，添加对 System.gc() 的调用修复了我上面给出的简单测试用例。我说不幸是因为（A）它不应该有所作为，（B）因为我已经在我的真实代码中定期调用它，所以这意味着我上面的简单测试用例太简单了。]

有没有其他人遇到过这个？任何解决方法？有没有一种优雅的方式来重新启动我的应用程序？

[更新]

以下版本在 3 到 4 次调用（按下按钮）中可靠地导致 OutOfMemory：

```
float [][][]foo = new float[3][2048][2048];
Bitmap bm = Bitmap.createBitmap(2048, 2048, Bitmap.Config.ARGB_8888);
int []bar = new int[3*2048*2048];
bm.recycle();
bm = null;
System.gc();
foo = null;
System.gc();
bar = null;
System.gc(); 
```

内存跟踪显示堆在每次调用时稳定增长，直到达到限制并死亡。如果我删除三个分配中的任何一个，它就会达到平衡并无限期地存在。删除除最后一个 gc() 之外的所有内容会导致它稍早死亡。

我会说这是一个碎片问题，而不是 gc 本身的错误。如果有人知道如何解决它，请告诉我。int[] 分配用于编写位图，因此我没有将其分配为二维数组的选项（android 位图库的限制）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T14:30:16.933

这是另一个显然有解决此问题的方法的 SO 页面：

[将图像加载到 Bitmap 对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

具体来说，以法莲的回答（摘录）：

"1) 每次执行 BitmapFactory.decodeXYZ() 时，请确保传入 BitmapFactory.Options 并将 inPurgeable 设置为 true（最好将 inInputShareable 也设置为 true）。

"2) 永远不要使用 Bitmap.createBitmap(width, height, Config.ARGB_8888)。我的意思是永远不要！我从来没有让那东西在几次通过后不引发内存错误。没有多少 recycle()、System.gc()、有什么帮助。它总是引发异常。另一种实际可行的方法是在您的可绘制对象（或您使用上面的步骤 1 解码的另一个位图）中有一个虚拟图像，将其重新缩放为您想要的任何内容，然后操作生成的位图（例如将其传递给 Canvas 以获得更多乐趣）。因此，您应该使用的是：Bitmap.createScaledBitmap(srcBitmap, width, height, false)。如果出于某种原因您必须使用蛮力创建方法，那么在最少通过 Config.ARGB_4444。”

在评论中，有人说这解决了他们的问题，这与这里的 OP 非常相似。

我要补充一点，Diane Hackborn 评论说，从 3.0 开始，Android 不再从本机堆分配位图，而是直接从常规堆分配它们。这可能会使您的本机堆数据无关紧要。请参阅 hackbod 在此页面上的评论：

[Android 中的位图](https://stackoverflow.com/questions/1945142/bitmaps-in-android)

我想这意味着 Honeycomb 关于位图分配的一个相当大的变化，因此这可以解释为什么这种分配存在错误（如果有的话）。我不知道此更改对 recycle() 命令有什么影响，但根据 Ephraim 的上述评论，答案可能是“不是一个很好的答案”。

最后，

使用 largeHeap 来摄取巨大的位图可能会被视为与其他应用程序不兼容，尤其是当您接近设备的物理限制时。我不确定如何避免这种情况，但是当您的应用程序踩到其他应用程序时，请为大量的 onPause() / onResume() 活动做好准备，而他们又会退回到您的应用程序。这个 SO 答案包括对此的讨论：

[检测 Android 中的应用程序堆大小](https://stackoverflow.com/questions/2630158/detect-application-heap-size-in-android/9428660#9428660)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:51:54.083

为了防止碎片，您可以只分配一次大数组和位图并重用它。

对于 Android，有一些注意事项，因为 Android 试图在某种程度上管理您的应用程序的资源。例如，如果不可见， `Activity`'s 或`View`'s 可能会被卸载，如果它们再次可见，则稍后重新运行。所以大件的东西最好存放在一个`Application`物体或一个`static`地方。

如果这仅用于某些首选项对话框，则应在第一次使用时保留它，但以后保留它，以免在每次运行时使用那么多内存。如果它很少使用，您可能应该在离开首选项屏幕后重新启动您的应用程序。如果做得好，用户不需要注意它，您将再次获得一个新鲜且记忆友好的过程。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-28T07:39:21.757

android developer.android.com上有一篇关于管理位图内存的非常详细的文章：

[http://developer.android.com/training/displaying-bitmaps/manage-memory.html](http://developer.android.com/training/displaying-bitmaps/manage-memory.html)

基本上，他们建议使用 Bitmap.recycle() 以避免 Android 2.3.3 及更低版本的 OutOfMemoryError 错误。根据文档，它释放了与位图对象关联的本机对象。

# gcc - GCC 降级问题

> ID：10682050
> 
> 赞同：2
> 
> 时间：2012-05-21T08:46:13.620
> 
> 标签：gcc, ld, configure, downgrade, cyclone

我正在尝试从 Cyclone 编程语言的源编译器构建。我正在运行 32 位 Ubuntu 12.04，默认安装 GCC 4.6.3。

但是由于 bootstrap 实用程序崩溃，make 失败。为了解决这个问题，我正在尝试安装较旧的 GCC 版本。

我已经修补了 /etc/apt/sources.list 并使用 apt-get 安装了 gcc-3.3 和 g++-3.3。但是配置脚本在强制使用 GCC 3.3 时会失败：

```
$ export CC=gcc-3.3
$ export CXX=g++-3.3
$ ./configure
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking target system type... i686-pc-linux-gnu
checking for gcc... gcc-3.3
checking for C compiler default output file name... configure: error: C compiler cannot create executables
See `config.log' for more details. 
```

config.log 显示：

```
...
/usr/bin/ld: cannot find crt1.o: No such file or directory
/usr/bin/ld: cannot find crti.o: No such file or directory
/usr/bin/ld: cannot find -lgcc_s
... 
```

ld 的版本是 2.22

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:55:21.327

我也有同样的问题。libc6-dev 软件包提供了 crt1.o 文件，但它安装在 gcc 的非标准目录中。这是为了在同一主机上支持 32 位和 64 位程序。

为了解决这个问题，我设置了以下环境变量：

导出 LIBRARY_PATH=/usr/lib/i386-linux-gnu

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:51:46.223

`apt-file search crt1.o`显示哪些包包含此文件。如果它不打印任何内容，请运行`apt-file update`一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:39:53.993

正如 michel 所提到的，您可以这样做来让旧的 GCC 引导：

```
export LIBRARY_PATH=/usr/lib/i386-linux-gnu 
```

`crt1.o`无论文件在您的系统上的哪个位置——在我的系统上，它都在`/usr/lib32`.

然后，一旦你构建了一个工作的 GCC，你可以将`crt1.o`, `crti.o`, 和符号链接（或复制）`crtn.o`到新构建的编译器的目录中，并且在使用时`${prefix}/lib/gcc/...`不需要设置。`LIBRARY_PATH`寻找`crtstart.o`文件或类似的东西，这是放置符号链接的正确目录。

# google-analytics - Google Analytics utm_ 参数是否应该被视为只写？

> ID：10682051
> 
> 赞同：1
> 
> 时间：2012-05-21T08:46:49.353
> 
> 标签：google-analytics, user-tracking

我有一个简单的问题，我似乎无法找到正确的答案。

Google Analytics 的文档是否指定了是否可以在`utm_term`内部使用例如参数来跟踪和自定义页面？

在我看来，utm_ 参数是只写的，应该只用于谷歌分析中的跟踪和报告，如果你需要在访问期间跟踪网页上的上下文（为了显示用户相关内容），你应该此外设置您自己的 cookie 和/或存储会话数据。

如果您认为这个问题过于“假设”，那么我只是在问谷歌是否对此发表了任何看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:13:00.020

我相信你是对的，参数是只写的，如果你想自定义一些东西，你应该设置自己的数据。您可以看到这一点，因为没有多少*get*方法可用于 google 分析：

[https://developers.google.com/analytics/devguides/collection/gajs/methods/](https://developers.google.com/analytics/devguides/collection/gajs/methods/)

# php - 从多个文本输入框复制到一个文本区域：

> ID：10682056
> 
> 赞同：0
> 
> 时间：2012-05-21T08:47:11.123
> 
> 标签：php, javascript, html

我有 4 个输入文本字段，我想让它们复制到一个文本区域，我尝试将每个副本复制到一个单独的文本输入字段，但这不起作用。

我的代码如下：

```
<fieldset>
        <legend>Page Message:</legend>
        <div class="textarey">
        <input type="text" class="lookalike" id="message_text1" name="message_text1" onkeyup="copy_data(this);  if(this.value.length>=24) document.editPage.message_text2.focus()" style="text-decoration:ltr;" value="<?php echo $page['message_text']; ?>" size="38" maxlength="24"><br>

        <input type="text" id="message_text2" name="message_text2" maxlength="24" size="38" class="lookalike"  style="text-decoration:ltr;"  value="<?php echo $page['message_text']; ?>" onkeyup="copy_data(this); if(this.value.length>=24) document.editPage.message_text3.focus()"><br>

        <input type="text" id="message_text3" name="message_text3" maxlength="24" size="38" class="lookalike"  style="text-decoration:ltr;"   value="<?php echo $page['message_text']; ?>" onkeyup="copy_data(this);  if(this.value.length>=24) document.editPage.message_text4.focus()"><br>

        <input type="text" id="message_text4" name="message_text4" size="42" class="lookalike"  style="text-decoration:ltr;"  value="<?php echo $page['message_text']; ?>" onkeyup="copy_data(this)">
 </div>

      <textarea id="message" /><?php echo $page['message']; ?></textarea> 
```

从字段复制的 Javascript 在这里：

```
 function copy_data(val){ 
        var messageText = document.getElementById(val.id).value 
            document.getElementById('message').innerHTML = messageText;

} 
```

我的问题是，每次文本字段到达它的 maxchars 末尾时，它都会清除文本区域。有人在这里有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:49:19.530

```
function copy_data(val){ 
    var messageText = document.getElementById(val.id).value 
        document.getElementById('message').innerHTML += messageText;
} 
```

但我建议不要使用内联 js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:58:17.337

```
<script type="text/javascript">
var text = "";
  for(var x=1;x<=4;x++) {
     text += document.getElementById("message_text"+x).value;
     text += "\n";
  }
  document.getElementById("message").value = text;
</script> 
```

*   您可能会考虑制作一个函数，用于从您想要的任何输入复制到任何元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-21T09:04:52.433

> 我的问题是，每次文本字段到达它的 maxchars 末尾时，它都会清除文本区域。有人在这里有什么想法吗？

这是因为即使您到达 maxchar 的末尾，您仍然会继续输入。根据您的 javascript 函数，textarea 一次将仅显示来自 4 个文本字段之一的数据。因此，运动 field1 达到最大长度， field2 根据您的代码获得焦点。

```
onkeyup="copy_data(this);  if(this.value.length>=24) document.editPage.message_text2.focus()" 
```

因此，随着 field2 获得焦点，并且您继续输入，您的 textarea 变为空白并开始显示 field2 数据。

# java - 用JSON反序列化一个巨大的文件android

> ID：10682061
> 
> 赞同：0
> 
> 时间：2012-05-21T08:47:34.430
> 
> 标签：java, android, json, serialization, deserialization

我在 android 的 sdcard 上有一个 10M 的序列化文件。我需要用 jason 反序列化它。有人可以告诉我该怎么做吗？我可以反序列化 1024 字节的块或类似的东西写在 sdcard 上的文件吗？我正在一个 android 项目中工作，由于内存分配，该项目无法在一个流中处理大文件。

需要帮忙！我是 jason 和 android 处理大文件的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:07:44.040

你可以使用Android的标准Android实现来解析Json [http://android-pro.blogspot.com/search/label/JSON](http://android-pro.blogspot.com/search/label/JSON)

另一种选择是支持流媒体的 Google Gson 库[http://code.google.com/p/google-gson/ 。](http://code.google.com/p/google-gson/)

## 例子：

假设您要解析一大堆人的日期：

**首先：**创建一个将 json 响应映射到您的数据类型的类

```
class Person{
        @SerializedName("PersonName")
        public String name;
        @SerializedName("PersonAge")
        public String age;
        @SerializedName("PersonAddress")
        public String address;
    } 
```

**第二：* *用 Gson 反序列化（解析）Json 响应：

```
Gson gson=new Gson();
Type collectionType=new TypeToken<ArrayList<Person>>(){}.getType();
ArrayList<Person>persons=gson.fromJson(jsonResponse, collectionType); 
```

# eclipse - 在 Eclipse 中卸载功能时未删除相应的插件？

> ID：10682062
> 
> 赞同：0
> 
> 时间：2012-05-21T08:47:37.090
> 
> 标签：eclipse, eclipse-plugin

**1) 首先我通过 eclipse -> Help > Install New Software**从 eclipse 更新站点安装了一个特性

 ****2) 我从 eclipse -> Help > About Eclipse**中卸载了相同的

 **3) 在 /features 中卸载的功能被删除。但相应的插件存在于 /plugins 中。

为什么，我如何在卸载功能时删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:32:03.270

检查 \eclipse\configuration\org.eclipse.update 下的 plaform.xml 该功能应该已被删除。如果不是，则卸载时存在一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:09:13.923

您使用的是哪个 Eclipse 版本？

这是 eclipse 3.4 中的预期行为。当系统运行时，插件不会被删除，因为它们可能正在运行或者可能需要关闭。下次隐式或显式执行安装或卸载时会删除插件。以下是顺序：

```
- Install A
- Install B
- Uninstall A
- Uninstall B -> Now A is garbage collected
- Uninstall C -> Now B is garbage collected 
```

查看有关此行为的[Bug 232356 。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=232356)****

# python - 如何在 Flask 上使用 ImmutableMultiDict 获取嵌套字典的值？

> ID：10682068
> 
> 赞同：16
> 
> 时间：2012-05-21T08:48:08.830
> 
> 标签：python, flask, werkzeug

```
address_dict = {'address': {'US': 'San Francisco', 'US': 'New York', 'UK': 'London'}} 
```

当通过请求发送上述参数时，如何在 Flask 上使用 request.form 获取地址键中的值？

```
import requests
url =  'http://example.com'
params = {"address": {"US": "San Francisco", "UK": "London", "CH": "Shanghai"}}
requests.post(url, data=params) 
```

然后我在flask.request的上下文中得到了这个。

```
ImmutableMultiDict([('address', u'US'), ('address', 'US'), ('address', 'UK')]) 
```

如何获取每个地址键中的值？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-21T09:58:22.067

例如像这样：

```
from werkzeug.datastructures import ImmutableMultiDict
imd = ImmutableMultiDict([('address', u'US'), ('address', 'US'), ('address', 'UK')])
print imd.getlist('address') 
```

印刷：

```
[u'US', 'US', 'UK'] 
```

* * *

编辑：

您的 POST 请求已发送[`application/x-www-form-urlencoded`](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.4.1)，这意味着作为键/值对的组合。它不直接支持嵌套的 dict 结构。当我尝试你的 curl-request 时，我得到了这个：

```
ImmutableMultiDict([('address[US]', u'San Francisco'), ('address[US]', u'New York'), ('address[UK]', u'London')]) 
```

所以这里的键是按字面意思解释的。

并使用`urllib2`我得到这个结果：

```
>>> print urllib2.urlopen("http://localhost:5000/post", data=urllib.urlencode(address_dict)).read()
ImmutableMultiDict([('address', u"{'UK': 'London', 'US': 'New York'}")]) 
```

这里`urlencode`只是发送内部字典的字符串表示。

最后使用`requests`：

```
>>> print requests.post("http://localhost:5000/post", data=address_dict).content
ImmutableMultiDict([('address', u'UK'), ('address', u'US')]) 
```

在这里，数组被展平并消除了重复键。

根本没有定义的方式如何以 urlencoded 方式发送像您这样的嵌套字典，因此您必须找到另一个解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T19:22:37.433

你举了这个例子：

```
curl http://example.com -d "address[US]=San Francisco" -d "address[US]=New York" -d address[UK]=London" 
```

有了这样的请求，`request.form`看起来像这样：

```
>>> request.form
ImmutableMultiDict([('address[US]', u'San Francisco'), ('address[US]', u'New York'),
                    ('address[UK]', u'London')])
>>> request.form['address[US]']
u'San Francisco'
>>> request.form.getlist('address[US]')
[u'San Francisco', u'New York'] 
```

和字符并不特殊`[`，`]`它们只是键的一部分。[如文档](http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.MultiDict)所述，MultiDict 将每个键不仅映射到一个值，而且映射到一个值列表。使用 [] 的普通字典访问只会给你第一个键，但 getlist() 方法会给出一个键的整个列表。其他方法可用，请参阅文档。

如果您真的想要一个嵌套结构，请尝试使用 JSON 而不是平面表单数据。

# php - MYSQL/PHP 斯堪的纳维亚字母

> ID：10682071
> 
> 赞同：0
> 
> 时间：2012-05-21T08:48:22.260
> 
> 标签：php, mysql, character-encoding

我有一个 PHP 文件，它从 mysql 表中获取数据，然后 json 对其进行编码。一切正常，直到 mysql 中有一行包含斯堪的纳维亚字母。然后它只返回 null

```
 {"key":[{"Name":null}]} 
```

我怎样才能让它工作？问题出在 PHP 中还是 MYSQL 中？我试图放在`header('content-type: text/html; charset: utf-8');`php 文件的开头，但这没有用

```
<?php
header('content-type: text/html; charset: utf-8');
include 'config.php';

$sql = "Select * from table;

try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->query($sql);  
    $results = $stmt->fetchAll(PDO::FETCH_OBJ);
    $dbh = null;
    echo '{"key":'. json_encode($results) .'}'; 
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
}

?> 
```

当我使用此代码时：

```
<?php
$con = mysql_connect("localhost","adsasd","asdasd");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("table", $con);

$result = mysql_query("SELECT NAME from table where ID=1");

while($row = mysql_fetch_array($result))
  {
  echo $row['TABLE'];
  }

mysql_close($con);
?> 
```

它按原样显示字母：äöåäö

所以问题出在`json_encode()`零件上？为什么它让整行显示为空，而不是让斯堪的纳维亚字母显示为符号或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:59:17.820

在创建编码 JSON 字符串之前，您可能需要对值或数据进行 urlencode。

**还编辑**：您需要确保一切都是以 UTF8 为中心的、数据库连接、数据库表以及您对内容类型所做的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:01:03.857

我建议在您的 *.php 文件和 MySQL 数据库中使用 utf-8 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:42:34.450

我知道您说过排序规则是 UTF-8，但请尝试运行：

```
$dbh->query('SET NAMES UTF-8'); 
```

创建 PDO 对象后，我发现有时它默认为 ISO-8859-1，即使它应该使用 UTF-8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:37:35.147

而不是 SET NAMES 你应该使用`$dbh->query('SET CHARACTER SET utf8');`

# c# - 使用 SQL 添加大量行

> ID：10682072
> 
> 赞同：0
> 
> 时间：2012-05-21T08:48:23.363
> 
> 标签：c#, sql, insert, oledb

当我添加少于 30 行时，我的代码运行良好。但它不能处理更多。我该如何克服呢？

我收到此错误：`Unspecified error`当我尝试添加少于 30 行时，会添加所有行。当我尝试添加超过 30 个时，它不会添加任何内容，并且我得到的错误是行数。

这是代码：

```
 for (int i = 0; i < st1.Length; i++)
                {
                    UpdateDataBase(st1[i]);
                }

private void UpdateDataBase(char letter)
    {
        letter = char.ToUpper(letter);
        int serialPro = 0;
        string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;" +
                                  "Data Source=C:\\Projects_2012\\Project_Noam\\Access\\myProject.accdb";
        OleDbConnection connection = new OleDbConnection(connectionString);

        string sql = "SELECT tblProInfo.proInfoSerialNum FROM tblProInfo ";
        OleDbCommand command = new OleDbCommand(sql, connection);
        try
        {
        connection.Open();
        OleDbDataReader reader = command.ExecuteReader();
        //get the last!
        while (reader.Read())
            serialPro = reader.GetInt32(reader.Depth);

        sql = "INSERT INTO tblOrderAA (orderAASerialPro, orderAACodon1) "
           + " values (?, ?)";
        OleDbCommand command2 = new OleDbCommand(sql, connection);

        command2.CommandType = CommandType.Text;
        command2.Parameters.AddWithValue("orderAASerialPro", serialPro);
        command2.Parameters.AddWithValue("orderAACodon1", letter);
        command2.ExecuteNonQuery();
            }
        catch (Exception e)
        {
            MessageBox.Show("אירעה שגיאה ב: \n" + e.Message);
            this.Close();
        }
    }` 
```

***编辑：*** private void UpdateDataBase(char letter) { letter = char.ToUpper(letter); int serialPro = 0; string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;" + "数据源=C:\Projects_2012\Project_Noam\Access\myProject.accdb";

```
 try
        {
            using (OleDbConnection connection = new OleDbConnection(connectionString))
            {
                connection.Open();

                string sql = "SELECT tblProInfo.proInfoSerialNum FROM tblProInfo ";
                using (OleDbCommand command = new OleDbCommand(sql, connection))
                using (OleDbDataReader reader = command.ExecuteReader())
                {
                    //get the last!
                    while (reader.Read())
                        serialPro = reader.GetInt32(0);
                }

                sql = "INSERT INTO tblOrderAA (orderAASerialPro, orderAACodon1) "
       + " values (?, ?)";
                using (OleDbCommand command2 = new OleDbCommand(sql, connection))
                {
                    command2.CommandType = CommandType.Text;
                    command2.Parameters.AddWithValue("orderAASerialPro", serialPro);
                    command2.Parameters.AddWithValue("orderAACodon1", letter);
                    command2.ExecuteNonQuery();
                }
            }
        }
        catch (Exception e)
        {
            MessageBox.Show("אירעה שגיאה ב: \n" + e.Message);
        }
    }
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:53:22.597

我不确定，但是您的 OleDbConnection 永远不会关闭
尝试`using`保证关闭和处理您的连接的语句

```
using(OleDbConnection connection = new OleDbConnection(connectionString))
{
    string sql = "SELECT tblProInfo.proInfoSerialNum FROM tblProInfo ";         
    OleDbCommand command = new OleDbCommand(sql, connection);         
    try 
    {
     ......
    }
    catch(....)
} 
```

也不清楚你在这一行的意图是什么

```
serialPro = reader.GetInt32(reader.Depth); 
```

**GetInt32**接受一个 int，它是所需列的序号，而**reader.Depth**获取一个值，该值指示当前行的嵌套深度。
我不明白这两个值是如何相关的。

编辑：如果您正在寻找序列号的最大值，您可以通过这种方式更改代码

```
string sql = "SELECT MAX(proInfoSerialNum) AS maxSN FROM tblProInfo ";                 
using (OleDbCommand command = new OleDbCommand(sql, connection))                 
{                     
    serialPro = (int)command.ExecuteScalar();                 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:22:50.513

```
 void dataread()
    {
        query = "select * from nodes";
        cmd = new SqlCommand(query, con);
        dr = cmd.ExecuteReader();
        while (dr.Read())
        {

            comboBox1.Items.Add(dr[0].ToString());
        }
        dr.Close();
        cmd.Dispose();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:52:54.110

完成后，您可以先关闭数据库连接，这样您可能会得到更好的结果。使用该`using`语句执行此操作：

```
using (OleDbConnection connection = new OleDbConnection(connectionString))
{
    ...
} 
```

该`using`语句确保 - 对于实现`IDisposable`接口的对象 -`Dispose`调用该方法。

此外，您创建的阅读器始终保持打开状态。所以最后，如果重写，方法应该如下所示：

```
private void UpdateDataBase(char letter)
{
    letter = char.ToUpper(letter);
    int serialPro = 0;
    string connectionString = "...";

    try
    {
        using (OleDbConnection connection = new OleDbConnection(connectionString))
        {
            connection.Open();

            string sql = "SELECT tblProInfo.proInfoSerialNum FROM tblProInfo ";
            using (OleDbCommand command = new OleDbCommand(sql, connection))
            using (OleDbDataReader reader = command.ExecuteReader())
            {
                //get the last!
                while (reader.Read())
                    serialPro = reader.GetInt32(reader.Depth);
            }

            sql = "INSERT INTO ...";
            using (OleDbCommand command2 = new OleDbCommand(sql, connection))
            {
                command2.CommandType = CommandType.Text;
                command2.Parameters.AddWithValue("orderAASerialPro", serialPro);
                command2.Parameters.AddWithValue("orderAACodon1", letter);
                command2.ExecuteNonQuery();
            }
        }
    }
    catch (Exception e)
    {
        MessageBox.Show("אירעה שגיאה ב: \n" + e.Message);
    }
} 
```

加快速度：对于每次通话，您都选择所有序列号，然后遍历阅读器以获取最新的。有没有可以用来将这项工作放入数据库的索引？喜欢：按某个日期订购或选择`MAX(proInfoSerialNum)`？否则，当数据库中有更多序列号时，您的软件将*显着*变慢。

# asp.net-mvc - 将字符串作为对象路由值传递

> ID：10682073
> 
> 赞同：1
> 
> 时间：2012-05-21T08:48:33.020
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

嗨，我有这个视图，根据我选择的范围日期显示酒店中的所有免费房间：开始日期 - 结束日期。我想将“StartDate”和“EndDate”与房间 ID 一起作为对象路由值传递给 CreateReservation 操作。@Html.ActionLink("RezervaCamera", "CreateReservation", "Reservation", new {RoomID= room.RoomID }, “”）并且不知道如何。这是否可以将字符串作为路由对象传递。

这是我的看法：

```
 @using (Html.BeginForm("SearchFree", "Reservation", FormMethod.Get))
  {
   <div class="editor-label">
   <label for="StartDate">Select Start date:
    </label>@(Html.JQueryUI().Datepicker("StartDate").MinDate(DateTime.Today).ShowButtonPanel(true).ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))

     </div>
     <div class="editor-label">
      <label for="EndDate">Select End date:</label>@(Html.JQueryUI().Datepicker("EndDate").MinDate(DateTime.Today).ShowButtonPanel(true).ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))

</div>

<p>
    <input type="submit" value="Search" />
</p>

  }

          <div class="styler">
             <fieldset class="ui-widget">
<legend class="ui-state-legend-default ui-corner-top ui-corner-bottom">CamereleLibere

    <ul id="album-list">
        @foreach (var album in Model)
        {
             @Html.ActionLink("RezervaCamera", "CreateReservation", "Reservation", new {RoomID= room.RoomID }, "")

                     <div style="float:left;margin-right:20px"> 
                     <img title=CameraNumarul:@album.Room_number width="75" height="75" src="@Url.Action("GetImage", "Rooms",
                     new { album.RoomID})" />

                     <span>Numarul de locuri:@album.NumberofSpots</span>

                     </a>

            </li>
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:51:45.060

您似乎正在使用一些`Html.JQueryUI().Datepicker`不标准的自定义助手。查看生成的 HTML 代码源。我猜这个助手会生成一个文本输入：

```
<input type="text" name="StatrDate" ...> 
```

注意`name`属性。现在在您的控制器操作中使用相同的名称：

```
[HttpPost]
pubilc ActionResult SearchFree(int roomID, DateTime startDate, DateTime endDate)
{
    ...
} 
```

甚至更好地使用视图模型：

```
public class ReservationViewModel
{
    public int RoomID { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
} 
```

进而：

```
[HttpPost]
pubilc ActionResult SearchFree(ReservationViewModel model)
{
    ...
} 
```

另请查看[以下博客文章](http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx)，该文章讨论了解析 GET 和 POST 请求之间的 DateTimes 时默认模型绑定器使用的格式的差异。对于 GET 请求，预期格式如下：`yyyy-MM-dd`.

# python - 发生 HTMLParserError 时如何在 HTML 中查找错误行

> ID：10682074
> 
> 赞同：0
> 
> 时间：2012-05-21T08:48:33.377
> 
> 标签：python, html-parser

现在我正在使用 python 编写一个网络爬虫，但有时它会抛出 HTMLParserError：

`junk characters in start tag: u'\u201dTPL_password_1\u201d\r\n\t\t', at line 21285, column 6`

它说错误出现在第 21285 行，是否意味着错误出现在 HTML 源代码的第 21285 行？如果没有，我怎么知道当前产生错误的 HTML 代码是什么？当前的解析网址是什么？

我的解析类可以简化如下：

```
class ParsePage(HTMLParser):

    """Parse the given page content using HTMLParser"""

    def __init__(self):
        HTMLParser.__init__(self)

    def handle_starttag(self, tag, attrs):

        #Here i tried to add `try...expect` to inspect the current tag and attrs, but it seems python didnt enter the except at all, why? the error message said the error was found at start tag, why it didnt enter the except at all?

        try:
            Some codes doing with the start tag...
        except HTMLParser.HTMLParseError, e:
            print "e: ", e, '\n' 
            print 'tag: ', tag, '\n'
            print 'attrs: ', atts, '\n'
            exit(1) 

    def handle_endtag(self, tag):
        #Some codes doing with end tags...

geturl = ParsePage()

#Here i can catch the HTMLParseError if i add `try...except` in the following line, but i dont know how to get the useful information here when i catch the exception    
geturl.feed(cur_page) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:53:25.103

好吧，它告诉你发现错误的那一行。你还需要什么？

另外，URL 与此有什么关系？您将 HTML 页面作为字符串传递给`feed`-`HTMLParser`不知道它来自哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:59:25.433

**我怎么知道产生错误的当前 HTML 代码是什么？**

> 开始标签中的垃圾字符：u'\u201dTPL_password_1\u201d\r\n\t\t'，第 21285 行，第 6 列

当前 HTML 页面中的 html 行号 21285

**当前的解析网址是什么？**

你解析什么链接？

> geturl.feed(cur_page)

cur_page 是您的当前页面。

# java - 多个设备同时使用该功能时 HttpClient 的问题

> ID：10682078
> 
> 赞同：1
> 
> 时间：2012-05-21T08:48:41.663
> 
> 标签：java, android, httpclient, httpresponse

使用 httpclient（apache 凭据）连接下载各种设备的各种位图失败....其中一个工作正常，¿为什么？

**我正在正确关闭连接？我不确定，我正在盯着这些凭据 http 连接。**

我正在为 android (java) 开发一个应用程序，它连接到服务器以下载 50 个位图，并且我每次都使用此功能来下载每个位图：

```
public static Bitmap getRemoteBitmap(String url) {      
    Bitmap bm=null;
    HttpClient httpclient = new DefaultHttpClient(); 
    HttpResponse response; 
    try { 
         ((AbstractHttpClient) httpclient).getCredentialsProvider().setCredentials(
                new org.apache.http.auth.AuthScope(null,-1), 
                new org.apache.http.auth.UsernamePasswordCredentials(MagazineStatus._username, MagazineStatus._password)); 

        response = httpclient.execute(new HttpGet(url)); 
        StatusLine statusLine = response.getStatusLine(); 
        if(statusLine.getStatusCode() == HttpStatus.SC_OK) { 
            try {                   
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                bm=BitmapFactory.decodeStream(content );
            }catch(Exception ex) {Log.e("DBF Error",ex.toString());}                 
        }else { 
            response.getEntity().getContent().close(); 
            throw new IOException(statusLine.getReasonPhrase()); 
        } 
    }catch(ClientProtocolException cpe) {
        Log.e("ClientProtocolException @ at FPT",cpe.toString());
    } catch(Exception ex) {
        Log.e("Exception at FETCHPROJECTASK",ex.toString());
    } 
    return bm;
} 
```

如果我尝试用一​​个设备下载位图，它可以正常工作，但如果我尝试同时下载 3 或 4 个设备的位图，那么，这个功能会失败，因为这条线`bm=BitmapFactory.decodeStream(content );`给了我一个空位图，我不明白为什么，因为, 和`content`不`entity`为空。`statusLine``response`

这些是位图为空时这些变量的`bm`值：

回复：

```
"response"   (id=830078599368)  
    entity  BasicManagedEntity  (id=830078617768)   
    headergroup HeaderGroup  (id=830078599408)  
    locale  Locale  (id=830078292336)   
    params  ClientParamsStack  (id=830079041944)    
    reasonCatalog   EnglishReasonPhraseCatalog  (id=830004685872)   
    statusline  BasicStatusLine  (id=830078599344) 
```

状态线：

```
"statusLine"     (id=830078599344)  
    protoVersion    HttpVersion  (id=830004713800)  
    reasonPhrase    "OK" (id=830078599288)  
    statusCode  200 
```

实体：

```
"entity"     (id=830078617768)  
    attemptReuse    false   
    managedConn null    
    wrappedEntity   BasicHttpEntity  (id=830078612272) 
```

内容：

```
"content"    (id=830078617792)  
    skipBuf null    
    eofWatcher  BasicManagedEntity  (id=830078617768)   
    selfClosed  false 
```

**我做错了什么？连接是否正确关闭？这可以改善吗？任何帮助将不胜感激。**

谢谢

编辑：

关闭连接的正确方法是添加此代码？

```
content.close();
entity.consumeContent(); 
```

还是我必须添加更多内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:03:40.700

从阅读您的问题描述来看，问题似乎出在**backend-side**上。因为您正在添加更多彼此独立工作的客户端，这些客户端同时查询后端，所以您的后端似乎无法处理多个并发请求。
虽然，没有足够的信息来判断。我的结论是基于数据不足。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:12:19.967

试试下面的，

```
 HttpGet httpRequest = new HttpGet(URI.create(path) );
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
    HttpEntity entity = response.getEntity();
    BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
    bmp = BitmapFactory.decodeStream(bufHttpEntity.getContent());
    httpRequest.abort(); 
```

**注意：路径类型是字符串。**

问题在于，一旦您使用了来自 HttpUrlConnection 的 InputStream，您就不能倒带并再次使用相同的 InputStream。因此，您必须为图像的实际采样创建一个新的 InputStream。否则我们必须**中止 http 请求**。

# java - 是否使用休眠？

> ID：10682079
> 
> 赞同：2
> 
> 时间：2012-05-21T08:48:43.557
> 
> 标签：java, hibernate, jdbc

嗨，我有一个应用程序，我想从表中选择数据，如果找不到，则生成新值并插入数据库，然后再次循环统计检查下一个值等等。对于一个新请求，这将完成大约十亿次。

那么我应该使用`hibernate`还是简单`JDBC`？

我应该在休眠状态下使用

```
 session.saveOrUpdate(obj); 
```

或者

```
 session.save(obj); 
```

还有一件事我想问的是，对于每个插入，我是否必须初始化我的表类对象（`new Mytable`）？只设置值就行了？

喜欢

```
 MyTable obj=new Mytable();
    obj.setName("dasd");
    obj.set...

obj.save(); 
```

或者我可以只初始化一次吗

```
 `MyTable obj=new Mytable();`

and in a loop put
for(...
obj.setName("dasda");
obj.save

) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T09:03:38.083

1.  Hibernate 是一个[OR 映射工具](http://en.wikipedia.org/wiki/Object-relational_mapping)。简单来说，它使应用程序中**的数据层对象化，**这样您就不必处理复杂的数据库交互。

2.  话虽如此，在某些情况下，休眠可能不是好的选择。

3.  如果您**的模式非常简单**（少于 8-10 个表）并且它们之间没有非常复杂的关系，那么在这种情况下使用 hibernate 会稍微有点矫枉过正。

4.  如果您尝试处理**的数据**量非常大（按 mn/bn 的顺序），则不鼓励过度使用 hibernate。好的旧 JDBC 在这里更好

5.  如果您的应用程序使用大量**静态数据**，那么**缓存**将是一个不错的选择，并且 hibernate 透明地支持缓存。

所以这一切都取决于你有什么类型的场景。您也可以始终`saveOrUpdate(obj);`使用 JDBC 进行构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:03:09.393

我假设/希望这`around a billion times`是一个比喻，因为如果不是，那肯定有很多操作，所以你可能想重新检查你的设计。

话虽如此，至于您的第一个问题，我会推荐 Hibernate，因为它基本上建立在 JDBC 之上，并为您提供了一些更方便的东西，例如让您编写独立于数据库的查询，这意味着您不需要重新编写查询如果你改变你的数据库。

根据您的第二个问题，这实际上取决于您想要做什么：

根据这个API：

[保存或更新](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#saveOrUpdate%28java.lang.Object%29)

> void saveOrUpdate(Object object) 抛出 HibernateException
> 
> save(Object) 或 update(Object) 给定实例，取决于未保存值检查的解决方案（有关未保存值检查的讨论，请参阅手册）。如果关联映射为 cascade="save-update"，则此操作级联到关联实例。
> 
> 参数： object - 包含新状态或更新状态的瞬态或分离实例抛出：HibernateException 另请参见：save(java.lang.Object)、update(Object object)

[节省](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#save%28java.lang.Object%29)

> 节省
> 
> 可序列化保存（对象对象）抛出 HibernateException
> 
> 持久化给定的瞬态实例，首先分配一个生成的标识符。（或者如果使用分配的生成器，则使用标识符属性的当前值。）如果关联映射为 cascade="save-update"，则此操作级联到关联实例。参数：object - 持久类的瞬态实例返回：生成的标识符抛出：HibernateException

根据您的第三个问题，您应该提供更多信息。您可以设置值以避免将`null`值写入数据库，但这实际上取决于您的应用程序以及将在其中实现它的上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:44:50.640

As most of your questions has been answered above, let me answer your last question. Yes, you have to create a new object, each new object (ideally, if there is no associated dependency) will be a new row in db. So, you have to create a new object-->set values to it--> associate it with hibernate session--> and saves it in db.If you have want to insert different rows in db then yes, you have to create different objects.

Hope this helps.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T08:59:39.783

```
1) So should i use hibernate or simple JDBC ?? 
```

如果您知道如何使用 hibernate，我会说去尝试它，否则只有在您有足够的时间和资源来学习它时才使用它。事实是，如果你用得好，它可以成为你最好的朋友，否则它只会成为痛苦的源泉。

```
2) and in hibernate should i use

    session.saveOrUpdate(obj);
or

    session.save(obj); 
```

对于这个问题，您可能需要阅读[此处](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)找到的 JavaDoc 。一个片段：

```
save(Object object) 
Persist the given transient instance, first assigning a generated identifier. 
```

和

```
saveOrUpdate(Object object) 
    Either save(Object) or update(Object) the given instance, depending upon resolution of the unsaved-value checks (see the manual for discussion of unsaved-value checking). 
```

第三个问题我不太明白，请展开。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-28T17:38:12.573

还要注意 Hibernate 的底层技术方面。

1.  它构建反射模式来调用属性（getter 和 setter 或字段）
2.  Hibernate 无论如何都会生成 SQL 查询并从数据集中读取数据，然后调用反射方法以分配查询出的值。
3.  如果您填写了任何作为键的属性 - Hibernate 将首先将其用于查询形成（还有一个操作）

因此，hibernate 至少会执行两次附加操作——在加载和持久化对象时。真的 - 它做得更多。因此，一旦您在功能性而非工作流模式下使用数据库，您就可以从数据集中读取数据（Hibernate 也会这样做）并将其保存在局部变量中。使用变量比使用对象查找表更快。

还有一种情况：任何 JPA 都将一个类映射到表。很好，一旦您从头开始构建数据库或者数据库具有合适的设计。如果您需要合并 o 表中的字段怎么办？然而，Hibernate 有 @OneToOne 注释来插入和对应于另一个表的对象。然而，一旦 Hibernate 将为一对一链接对象执行循环工作，而您只需要几个字段。

简而言之，如果性能是最终标准，则计算操作：您必须且至少需要 2 次调用数据集。Hibernate 用于繁重的工作流操作，当您因为以下原因而受益时：

1.  您多次从对象而不是从数据集中读取字段
2.  最好发布比任何数据对象都重的数据集

# php - 使用 Dom 回显 Xpath

> ID：10682081
> 
> 赞同：0
> 
> 时间：2012-05-21T08:48:55.217
> 
> 标签：php, dom, xpath, curl

我知道有人问了一些类似的问题，但我有点卡在这里。我找不到任何好的教程来帮助我解决这个问题。但是我想做的应该是非常基础的。假设我想在 Stackoverflow.com 上获取 H1“热门问题”，使用 Chrome 获取 Xpath 我得到了这个：

`//*[@id="h-top-questions"]`

所以我的问题是；我现在如何回应这个？使用来自整个网络的代码片段，我得到了这个：

```
<?php
$curl = curl_init('http://stackoverflow.com/');
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.10 (KHTML, like Gecko) Chrome/8.0.552.224 Safari/534.10');
$html = curl_exec($curl);
curl_close($curl);

if (!$html) {
    die("something's wrong!");
}

//var_dump(strlen($data));

$dom = new DOMDocument();
@$dom->loadHTML($html);

$xpath = new DOMXPath($dom);

$headerh1 = $xpath->query('//*[@id="h-top-questions"]');

foreach($headerh1 as $match) {
    print_r($match);    
}
?> 
```

我以为这只会输出`<h1 id="h-top-questions">Top Questions</h1>`。但相反，我得到了 `DOMElement Object ( )` .

谁能帮帮我？我正在努力学习这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:53:00.333

您通过查询方法的结果获得一个 DOMNodeList 元素。[DOMNodeList](http://www.php.net/manual/en/class.domnodelist.php) 尝试通过 item($index) 方法访问节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:31:14.643

为了以这种方式查看对象的内容，您需要将其转换为字符串。如果你想这样做，你可以简单地`echo`/`print`它，或者把它转换成这样的字符串：

```
$string = (string) $object; 
```

当一个对象被转换为一个字符串时，PHP 调用它的`__toString()`方法。不幸的是，一个 DOMElement 对象没有定义一个，所以当你尝试将它转换为字符串时，你会得到以下错误：

> 可捕获的致命错误：DOMElement 类的对象无法在...中转换为字符串

在这个特定的场景中，有一个穷人的解决方法，它允许人们用少量代码做到这一点，那就是使用函数通过[SimpleXML](http://php.net/manual/en/book.simplexml.php)[`simplexml_import_dom()`](http://php.net/manual/en/function.simplexml-import-dom.php)反弹它——因为`SimpleXMLElement`该类确实定义了一个`asXML()`方法，它将它转换回XML 字符串。所以你可以这样做：

```
foreach($headerh1 as $match) {
  $xml = simplexml_import_dom($match);
  echo $xml->asXML();
} 
```

但是，在此特定情况下，这会导致以下输出：

```
<h1 id="h-top-questions">&#13;
        Top Questions    &#13;
     </h1> 
```

所以你看，有一些额外的 HTML 实体在其中泄漏，而这些实体不在原始源代码中。这发生在 DOM 和 SimpleXML 之间。

为了解决这个问题，可以：

*   将输出传递给[`html_entity_decode()`](http://php.net/manual/en/function.html-entity-decode.php). 这不是一个很好的选择，因为它可能会导致无效的 XML/HTML 输出。
*   滚动您自己的函数以将 DOMElement 转换为字符串。这也不是一个很好的选择，因为它会非常复杂，并且您可能需要通过许多级别递归才能成功检索完整节点列表。

但是，这里要记住的一件事是，除了测试和调试之外，您所做的事情并没有太多实际应用。人们永远不会真正想要输出部分文档。

# asp.net - 在 ASP.NET 中运行更新进度期间使网页变灰

> ID：10682086
> 
> 赞同：0
> 
> 时间：2012-05-21T08:49:30.977
> 
> 标签：asp.net, ajax

我有一个网页，我在其中放置了更新进度控件。我希望随着更新进度的开始，整个页面将变灰，完成后页面将恢复为原始状态。以下是我为更新进度添加的代码：-

```
<div class="divTextAlign">
            <asp:Updateprogress id="updProgress" runat="server" dynamiclayout="true" associatedupdatepanelid="updForgotPassword">
                <Progresstemplate>
                    <img src="App_Themes/Images/ajax-loader.gif" alt="" />
                </Progresstemplate>
        </asp:Updateprogress> 
```

请让我知道我是如何使页面变灰的，如果可能的话，请同时提供代码。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T09:14:52.973

一点css可以为你做到这一点 -

页面

```
<Progresstemplate>
    <div class="overlay"> 
        <img src="App_Themes/Images/ajax-loader.gif" alt="" />
    </div>
</Progresstemplate> 
```

css

```
.overlay 
{
 position: absolute;
 background-color: white;
 top: 0px;
 left: 0px;
 width: 100%;
 height: 100%;
 opacity: 0.8;
 -moz-opacity: 0.8;
 filter: alpha(opacity=80);
 -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
 z-index: 10000;
} 
```

您需要将位置设置为相对于容器，并给它一个高度，或者相应地设置溢出的高度。然后，您还可以将图像设置为居中等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T05:28:28.873

您可以使用一个简单的 div，然后使用 ajaxStart 和 ajaxStop 事件，如下所示

```
<div id="cover"></div>

$('#cover').hide().ajaxStart(function () {$(this).fadeIn(100);}).ajaxStop(function() {  $(this).fadeOut(100);}); 
```

# perl - 如何将控制台输出重定向到文本文件

> ID：10682087
> 
> 赞同：10
> 
> 时间：2012-05-21T08:49:39.477
> 
> 标签：perl, command-line

我正在执行一个 Perl 程序。无论在我的控制台上打印什么，我都想将它重定向到一个文本文件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-21T08:54:57.017

首选方法是通过命令行处理重定向，例如

```
perl -w my_program.pl > my_output.txt 
```

如果你还想包含 stderr 输出，那么你可以这样做（假设你的 shell 是 bash）：

```
perl -w my_program.pl &> my_output.txt 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-21T08:58:42.920

在 CLI 中，您可以使用`>`，如下所示：

```
perl <args> script_name.pl > path_to_your_file 
```

如果您想在 perl 脚本中执行此操作，请在打印任何内容之前添加此代码：

```
open(FH, '>', 'path_to_your_file') or die "cannot open file";
select FH;
# ...
# ... everything you print should be redirected to your file
# ...
close FH;  # in the end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-21T15:40:47.127

在 Unix 上，要捕获发送到终端的所有内容，您需要重定向标准输出和标准错误。

使用 bash，命令类似于

```
$ ./my-perl-program arg1 arg2 argn > output.txt 2>&1 
```

C shell、`csh`衍生工具如`tcsh`以及更新版本的 bash 理解

```
$ ./my-perl-program arg1 arg2 argn >& output.txt 
```

意思相同。

Windows 上命令 shell 的语法类似于 Bourne shell 的语法。

```
C:\> my-perl-program.pl args 1> output.txt 2>&1 
```

要在您的 Perl 代码中设置此重定向，请添加

```
open STDOUT, ">", "output.txt" or die "$0: open: $!";
open STDERR, ">&STDOUT"        or die "$0: dup: $!"; 
```

到程序可执行语句的开头。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-13T05:04:45.910

如果您希望在控制台和日志上打印输出，则将此行附加到您的代码中（例如，在任何打印语句之前）

```
open (STDOUT, "| tee -ai logs.txt");
print "It Works!"; 
```

在您的脚本中最后一次打印之后

```
close (STDOUT); 
```

仅对于错误消息，

```
open (STDERR, "| tee -ai errorlogs.txt"); 
```

# textures - 将osg纹理写入png缺少插件

> ID：10682089
> 
> 赞同：1
> 
> 时间：2012-05-21T08:49:41.050
> 
> 标签：textures, writetofile, openscenegraph

我们正在尝试将 a 写入`osg::Image`文件， `osgDB::writeImageFile`但不幸的是我们收到错误：

```
Could not find plugin to write to file 
```

我们在 Ubuntu 11.04 64 位下使用来自[http://www.alphapixel.com/osg/downloads/free-openscenegraph-binary-downloads的 osg 二进制文件。](http://www.alphapixel.com/osg/downloads/free-openscenegraph-binary-downloads)我们的应用程序构建为 32 位应用程序。

你知道如何解决这些插件问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:52:07.403

我找到的唯一解决方案是： 1\. 从[http://gnuwin32.sourceforge.net/packages/libpng.htm](http://gnuwin32.sourceforge.net/packages/libpng.htm)和 zlib.lib 下载 lipng 设置，以及 2\. 手动更改链接器中的依赖项：“libpng. lib”和“zlib.lib”

抱歉，这不是最佳解决方案。我希望它有帮助！

# php - Twig 中的舍入数字

> ID：10682091
> 
> 赞同：8
> 
> 时间：2012-05-21T08:50:16.200
> 
> 标签：php, symfony, twig

有人知道如何将 Twig 中的数字四舍五入到最接近的整数吗？

例如：2.6 => 2

我尝试使用`|number_format`，但它并没有将它们四舍五入。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-06T18:59:36.967

@olivierw 的答案是正确的，但是您可以使用另一个技巧。Twig 确实有[`//`](https://twig.symfony.com/doc/1.x/templates.html#math)操作员来降低除法的结果。您可以将其用作`{{ variable // 1 }}`which 等于`intval(floor(variable))`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-21T09:43:48.220

按照[此页面](https://twig.symfony.com/doc/1.x/advanced.html#filters)上的说明创建您自己的过滤器：

```
$twig = new Twig_Environment($loader);
$twig->addFilter('floor', new Twig_Filter_Function('floor')); 
```

然后在您的模板中：

```
{{ myNumber|floor }} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-15T13:44:25.780

从 twig 1.15 开始，您可以使用圆形过滤器。

```
{{ 2.6|round(0, 'floor') }} 
```

[https://twig.symfony.com/doc/1.x/filters/round.html](https://twig.symfony.com/doc/1.x/filters/round.html)

# php - 如果 XML 元素不存在，则通过 PHP 回显消息

> ID：10682095
> 
> 赞同：0
> 
> 时间：2012-05-21T08:50:33.883
> 
> 标签：php, xml, api, xpath, last.fm

在对这个主题进行了一些实质性的研究之后，很遗憾我没有找到答案。我想这对于这里的很多人来说是一个非常简单的问题。

我通过他们的 API（使用 PHP）连接到 Last.fm 的 XML 数据库。在输入存在的艺术家或空白字段时，我可以毫无问题地回显正确的信息。但是，如果用户输入不存在的艺术家，我无法回应任何内容。

我的问题是这个；如果该 XML 元素不存在，我如何回显我想要的任何消息？我的思路如下：

```
 foreach ($uk_events as $event){

$venue_city = (string) $event->venue->location->city;
$image = (string) $event->image[2];
$uk_street = (string) $event->venue->location->street;
$uk_postcode = (string) $event->venue->location->postalcode;
$startdate = (string) $event->startDate;
$starttime = (string) $event->startTime;
$uk_venues = (string) $event->venue->name; 
$uk_names = (string) $event->artists->artist;
$website = (string) $event->website;

        if (empty($uk_names)){

    echo "<p class='sorry'>Sorry, but it doesn't look like this artist exists. Either they're exceptionally obscure or they're from
    another realm. Try again, or have a look at the below suggestions.</p>";

    } 
```

经过一些试验和错误，我得到的最好的结果是回显上述内容，但无论搜索什么，它都会被回显。**仅当 XML 数据库中不存在艺术家时，我才需要显示上述内容。**

非常感谢任何能给我一个关于如何在这个方面取得进展的想法的人。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:35:56.200

如果您在调用中使用来自 GitHub 的 SDK

```
$uk_events = $artistClass->search($methodVars) 
```

然后你可以编辑你的代码来阅读

```
if ($uk_events === false) {
    echo "<p class='sorry'>Sorry, we couldn't contact the server. Try again later.</p>";             

} elseif (empty($uk_events)) {
    echo "<p class='sorry'>Sorry, but it doesn't look like this artist exists. Either they're exceptionally obscure or they're from another realm. Try again, or have a look at the below suggestions.</p>";             

} else {
   foreach ($uk_events as $event){             
       .... // print list
   }      
} 
```

* * *

如果您使用的是原始 API 调用，您将收到类似

```
// Response to http://ws.audioscrobbler.com/2.0/?method=artist.search&artist=NotARealArtist

<?xml version="1.0" encoding="UTF-8"?>
<lfm status="ok">
  <results xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" for="NotARealArtist">
    <opensearch:Query role="request" startPage="1" searchTerms="NotARealArtist"/>
    <opensearch:totalResults>0</opensearch:totalResults>
    <opensearch:startIndex>0</opensearch:startIndex>
    <opensearch:itemsPerPage>30</opensearch:itemsPerPage>
    <artistmatches>
    </artistmatches>
  </results>
</lfm> 
```

因此，您有两种方法可以确定您没有艺术家：

1.  “opensearch:totalResults”元素包含值“0”
2.  “artistmatches”中的子元素数量为零

所以解析这些值的 XML。

# php - 如何删除同一张表中存储的分层父子记录

> ID：10682096
> 
> 赞同：1
> 
> 时间：2012-05-21T08:50:43.673
> 
> 标签：php, mysql, hierarchical-data, moodle

```
id name      parentid
 1 category     0
 2 question1    1
 3 type1        2
 4 type2        2
 5 question2    0
 6 type2        5
 7 type2        5 
```

在哪里：

*   *类别*是父级
*   *question1*和*question2*是孩子
*   *type1*，*type2*，*type3*和*type4*是孙子

我想写一个 MySQL 语句来删除所有子记录的选定父级。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:57:16.573

MySQL 不支持递归查询...

如果您有预定的深度，您可以通过一些连接来完成。

否则，您将需要在应用程序中的代码中执行此操作，或者编写存储过程/函数来执行此操作。

编辑：快速递归函数删除...

```
function recursiveDelete($id) {
    $result=mysql_query("SELECT * FROM yourTable WHERE parentid='$id'");
    if (mysql_num_rows($result)>0) {
         while($current=mysql_fetch_array($result)) {
              recursiveDelete($current['id']);
         }
    }
    mysql_query("DELETE FROM yourTable WHERE id='$id'");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:02:35.077

您可以创建外键来支持这一点。

在 MySQL 中，此操作如下所示：

```
ALTER TABLE your_table_name ADD CONSTRAINT your_table_name_parentid_to_id
FOREIGN KEY (parentid)
REFERENCES your_table_name (id)
ON DELETE CASCADE ON UPDATE CASCADE; 
```

然后简单

```
DELETE FROM your_table_name WHERE id = 2; 
```

将删除 question1、type1 和 type2。

但在这种情况下，请确保对于每个 parentid 值都有相同的 id 值或 parentid 为 NULL：

```
   id 名称 parentid
   1 个类别 NULL
   2 问题 1 1
   3型1 2
   4型2 2
   5 题2 1
   6型2 5
   7型2 5

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:10:19.643

[`connect by`在 Oracle 中](http://psoug.org/reference/connectby.html)使用特性怎么样？

# visual-c++ - 我们应该安装什么来在我的 VC++ 代码中包含“D3dukmdt.h”？

> ID：10682101
> 
> 赞同：0
> 
> 时间：2012-05-21T08:50:53.793
> 
> 标签：visual-c++, directx, media, direct3d

我想在我的代码中使用 D3DDDIFormat 枚举。所以我在链接“ [D3DDDIFORMAT ”中包含了“D3dukmdt.h”](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544312%28v=vs.85%29.aspx)

但是当我在我的 C++ 文件中 #include "D3dukmdt.h" 时，我看到头文件 D3dukmdt.h 根本无法识别。

任何人都可以在这方面帮助我。我是否应该安装任何东西以包含此头文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:04:36.010

看起来您需要[Windows 驱动程序工具包 (WDK)](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)才能访问这些内容。在我看来，您似乎不太可能尝试编写驱动程序并且不理解您需要驱动程序套件，因此您最好解释一下您正在尝试做什么以获得可行的替代解释

# javascript - 如何从 TinyMCE 中删除 MenuItemTitle？

> ID：10682104
> 
> 赞同：1
> 
> 时间：2012-05-21T08:50:58.223
> 
> 标签：javascript, tinymce, drop-down-menu

我在 tinyMCE 中启用了“fontsizeselect”插件。我的问题是如何删除下拉菜单的标题（标题）？

![在此处输入图像描述](../Images/d728bb952d7a4e78523db870c48d68ea.png)

编辑：

我尝试使用 JQuery .remove() 删除它，但之后整个列表的高度计算错误。

我尝试的第二个选项是：

[http://www.tinymce.com/wiki.php/API3:method.tinymce.ui.DropMenu.remove](http://www.tinymce.com/wiki.php/API3:method.tinymce.ui.DropMenu.remove)

但这只是出错了，“fontsizeselect.remove(title)”（类似于 .add）对整个 tinyMCE 产生错误 - “缺少：在属性 id 之后”。这样做可能是完全糟糕的方法。

第三个选项是编辑 tiny_mce\themes\advanced\editor_template_src.js 第 467 行：

```
c = ed.controlManager.createListBox('fontsizeselect', {title : 'advanced.font_size', onselect : function(v) {...} 
```

但似乎 TinyMCE 开发人员认为，每个下拉菜单都必须有标题/标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:47:29.127

已解决：在 MCE 初始化之前，我们必须覆盖菜单渲染功能

```
(function(tinymce) {
var DOM = tinymce.DOM, Event = tinymce.dom.Event, each = tinymce.each, Dispatcher = tinymce.util.Dispatcher, undef;

tinymce.create('tinymce.ui.ListBoxNoTitle:tinymce.ui.ListBox', {
    renderMenu : function() {
        var t = this, m;

        m = t.settings.control_manager.createDropMenu(t.id + '_menu', {
            menu_line : 1,
            'class' : t.classPrefix + 'Menu mceNoIcons',
            max_width : 250,
            max_height : 150
        });

        m.onHideMenu.add(function() {
            t.hideMenu();
            t.focus();
        });

/*          m.add({
            title : t.settings.title,
            'class' : 'mceMenuItemTitle',
            onclick : function() {
                if (t.settings.onselect('') !== false)
                    t.select(''); // Must be runned after
            }
        });
*/
        each(t.items, function(o) {
            // No value then treat it as a title
            if (o.value === undef) {
                m.add({
                    title : o.title,
                    role : "option",
                    'class' : 'mceMenuItemTitle',
                    onclick : function() {
                        if (t.settings.onselect('') !== false)
                            t.select(''); // Must be runned after
                    }
                });
            } else {
                o.id = DOM.uniqueId();
                o.role= "option";
                o.onclick = function() {
                    if (t.settings.onselect(o.value) !== false)
                        t.select(o.value); // Must be runned after
                };

                m.add(o);
            }
        });

        t.onRenderMenu.dispatch(t, m);
        t.menu = m;
        }
    });
})(tinymce); 
```

有了这个关于“m.add”的评论，你只需要添加

```
tinyMCE.init({
        setup : function(ed) {
            ed.onBeforeRenderUI.add(function(ed){
        ed.controlManager.setControlType('listbox', tinymce.ui.ListBoxNoTitle);
            });
        }

}); 
```

此设置为 tinyMCE 的标准初始化。因此，它可以在不编辑源文件的情况下完成。

# java - 通过拖入 javafx 2 来移动节点的正确方法？

> ID：10682107
> 
> 赞同：26
> 
> 时间：2012-05-21T08:51:05.903
> 
> 标签：java, javafx

我正在将带有大量自定义绘画的 Swing/Graphics2D 应用程序转换为 JavaFX2 应用程序。尽管我非常喜欢新的 API，但在绘制椭圆时，我似乎遇到了性能问题，我想在鼠标移动的任何地方绘制我想在鼠标光标下方绘制的椭圆。当我以稳定的方式而不是快得离谱的方式移动鼠标时，我注意到椭圆总是在鼠标轨迹后面几厘米处绘制，并且只有在我停止移动光标时才会赶上。这在只有少数节点的场景图中。在我的 Swing 应用程序中，我没有这个问题。

我想知道这是否是在鼠标光标所在位置绘制形状的正确方法？

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.SceneBuilder;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Ellipse;
import javafx.scene.shape.EllipseBuilder;
import javafx.stage.Stage;

public class TestApp extends Application {
public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage primaryStage) throws Exception {
    Pane p = new Pane();

    final Ellipse ellipse = EllipseBuilder.create().radiusX(10).radiusY(10).fill(Color.RED).build();
    p.getChildren().add(ellipse);

    p.setOnMouseMoved(new EventHandler<MouseEvent>() {
        public void handle(MouseEvent event) {
            ellipse.setCenterX(event.getX());
            ellipse.setCenterY(event.getY());
        }
    });

    Scene scene = SceneBuilder.create().root(p).width(1024d).height(768d).build();
    primaryStage.setScene(scene);

    primaryStage.show();
}
} 
```

**小更新：**我升级到 JavaFX 2.2 和 Java7u6（在 Windows 7 64 位上），但似乎没有什么不同。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-21T17:05:26.740

这是我用来允许在[Pane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html)中拖动[Label](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Label.html)的一些代码。我没有注意到它的鼠标轨迹有任何明显的滞后。

```
// allow the label to be dragged around.
final Delta dragDelta = new Delta();
label.setOnMousePressed(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    // record a delta distance for the drag and drop operation.
    dragDelta.x = label.getLayoutX() - mouseEvent.getSceneX();
    dragDelta.y = label.getLayoutY() - mouseEvent.getSceneY();
    label.setCursor(Cursor.MOVE);
  }
});
label.setOnMouseReleased(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    label.setCursor(Cursor.HAND);
  }
});
label.setOnMouseDragged(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    label.setLayoutX(mouseEvent.getSceneX() + dragDelta.x);
    label.setLayoutY(mouseEvent.getSceneY() + dragDelta.y);
  }
});
label.setOnMouseEntered(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    label.setCursor(Cursor.HAND);
  }
});

. . .

// records relative x and y co-ordinates.
class Delta { double x, y; } 
```

这是一个使用上述代码的小型完整[示例应用程序。](https://gist.github.com/2724651)

**更新** 上面的例子，当被拖动的对象很小时，仍然会滞后于光标后面被拖动的对象。

另一种方法是使用由叠加在被拖动节点的图像表示上的 MousePointer 组成的[ImageCursor](http://docs.oracle.com/javafx/2/api/javafx/scene/ImageCursor.html)，然后在拖动开始和完成时隐藏并显示实际节点。这意味着节点拖动渲染不会滞后光标（因为节点的图像表示现在是光标）。但是这种方法确实有缺点 => ImageCursors 的大小和格式有限制，另外您需要将 Node 转换为 Image 以将其放置在 ImageCursor 中，为此您可能需要高级 Node => Image 转换操作仅在 JavaFX 2.2+ 中可用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-27T17:35:58.253

您所描述的延迟（在您的鼠标和拖动的形状之间）是一个已知的 JavaFX 错误：

[https://bugs.openjdk.java.net/browse/JDK-8087922](https://bugs.openjdk.java.net/browse/JDK-8087922)

您可以通过使用未记录的 JVM 标志来解决它（至少在 Windows 上）：

```
-Djavafx.animation.fullspeed=true 
```

这个标志通常用于内部性能测试，这就是它没有被记录的原因，但我们已经使用它几个月了，到目前为止还没有遇到任何问题。

编辑：

还有另一种类似的解决此错误的方法，可能会更容易使用 CPU。只需关闭 Prism 的垂直同步：

```
-Dprism.vsync=false 
```

在我们的应用程序中，这些解决方法中的任何一个都可以解决滞后问题；没有必要两者都做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T08:02:28.333

对我来说，这似乎不是绘画性能的问题，而是鼠标事件序列是如何生成的。这些事件不是实时生成的，当鼠标快速移动时，有些事件会被跳过。对于大多数应用程序，这将是足够的方式。鼠标指针实时移动，没有任何时滞。

如果您不想要这种效果，您将不得不直接听鼠标指针或找到一种方法来获得更高密度的事件。我不知道自己怎么样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T15:16:03.517

在所有节点上都有这个“cacheHint”属性，这可能会有所帮助吗？

[http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#cacheHintProperty](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#cacheHintProperty)

> 在某些情况下，例如渲染非常昂贵的动画节点，希望能够在节点上执行转换而不必重新生成缓存的位图。在这种情况下，一个选项是对缓存的位图本身执行转换。
> 
> 这种技术可以显着提高动画性能，但也可能导致视觉质量下降。cacheHint 变量向系统提供关于如何以及何时可以接受权衡（动画性能的视觉质量）的提示。

如果你的椭圆一直保持不变，但每次移动一个像素时都会重新绘制，这似乎是一个巨大的减速。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-30T15:58:47.170

我在尝试使图表上的节点可拖动时遇到了同样的问题。我通过调用来修复它`chart.setAnimated(false);`在我的情况下，延迟是由 JavaFX 对我的代码所做的更改应用漂亮的平滑动画引起的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-18T08:55:34.310

这是在 javafx 中使用鼠标拖放标签的代码

```
@FXML
public void lblDragMousePressed(MouseEvent m)
{
    System.out.println("Mouse is pressed");

    prevLblCordX= (int) lblDragTest.getLayoutX();
    prevLblCordY= (int) lblDragTest.getLayoutY();
    prevMouseCordX= (int) m.getX();
    prevMouseCordY= (int) m.getY();     
}
//set this method on mouse released event for lblDrag
@FXML
public void lblDragMouseReleased(MouseEvent m)
{       
    System.out.println("Label Dragged");    
}
// set this method on Mouse Drag event for lblDrag
@FXML
public void lblDragMouseDragged(MouseEvent m)
{   
    diffX= (int) (m.getX()- prevMouseCordX);
    diffY= (int) (m.getY()-prevMouseCordY );        
    int x = (int) (diffX+lblDragTest.getLayoutX()-rootAnchorPane.getLayoutX());
    int y = (int) (diffY+lblDragTest.getLayoutY()-rootAnchorPane.getLayoutY());     
    if (y > 0 && x > 0 && y < rootAnchorPane.getHeight() && x < rootAnchorPane.getWidth()) 
    { 
     lblDragTest.setLayoutX(x);
     lblDragTest.setLayoutY(y);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-23T12:35:21.523

你可以使用：Node.setCache(true); （我将它与具有许多子项的窗格一起使用，例如 TextField）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-14T11:28:45.193

拖动球体

```
@Override
public void initialize(URL location, ResourceBundle resources) {
    super.initialize(location, resources);
    labelTableName.setText("Table Categories");

    final PhongMaterial blueMaterial = new PhongMaterial();
    blueMaterial.setDiffuseColor(Color.BLUE);
    blueMaterial.setSpecularColor(Color.LIGHTBLUE);

    final Sphere sphere = new Sphere(50);
    sphere.setMaterial(blueMaterial);

    final Measure dragMeasure = new Measure();
    final Measure position = new Measure();
    sphere.setOnMousePressed(mouseEvent -> {
        dragMeasure.x = mouseEvent.getSceneX() - position.x;
        dragMeasure.y = mouseEvent.getSceneY() - position.y;
        sphere.setCursor(Cursor.MOVE);
    });
    sphere.setOnMouseDragged(mouseEvent -> {
        position.x = mouseEvent.getSceneX() - dragMeasure.x;
        position.y = mouseEvent.getSceneY() - dragMeasure.y;
        sphere.setTranslateX(position.x);
        sphere.setTranslateY(position.y);
    });
    sphere.setOnMouseReleased(mouseEvent -> sphere.setCursor(Cursor.HAND));
    sphere.setOnMouseEntered(mouseEvent -> sphere.setCursor(Cursor.HAND));

    bottomHeader.getChildren().addAll( sphere);

}

class Measure {
    double x, y;

    public Measure() {
        x = 0; y = 0;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-03T09:29:18.417

这是根据@jewelsea 的回答修改的 Kotlin 代码

```
 var dragDelta = Delta()
    var releasedDelta = Delta()

    scene.setOnMousePressed {
        if (releasedDelta.x > 0 && releasedDelta.y > 0) {
            val offsetX = it.sceneX - releasedDelta.x
            var offsetY = it.sceneY - releasedDelta.y
            dragDelta.x = dragDelta.x + offsetX
            dragDelta.y = dragDelta.y + offsetY
        } else {
            dragDelta.x = it.sceneX
            dragDelta.y = it.sceneY
        }
        scene.cursor = Cursor.MOVE;
        releasedDelta = Delta()
    }

    scene.setOnMouseReleased {
        releasedDelta.x = it.sceneX
        releasedDelta.y = it.sceneY
        scene.cursor = Cursor.HAND;
    }

    scene.setOnMouseDragged {
        scene.translateX = it.sceneX - dragDelta.x;
        scene.translateY = it.sceneY - dragDelta.y;
    }

    scene.setOnMouseEntered {
        scene.cursor = Cursor.HAND
    } 
```

# c# - 使用洋葱架构时将共享部分放在哪里？

> ID：10682109
> 
> 赞同：3
> 
> 时间：2012-05-21T08:51:22.817
> 
> 标签：c#, asp.net-mvc-2, onion-architecture

我正在尝试应用 J. Palermo 的洋葱架构，但我有一些事情正在努力解决。

我有一些零件，但我不知道该放在哪里。

*   我有一个插件引擎，它读取目录并确定要加载的内容
*   有一些在多个项目中使用的带有翻译的资源文件。我应该把这些文件放在哪里？
*   我有一些在整个系统中使用的属性。把这些放在哪里？
*   我还有两个“基本”控制器，一些默认结果和视图。我应该把这些放在哪里？

所有这些项目都在几个项目中使用，所以我想把这些项目放在一个中心点。

我当前的解决方案结构如下所示：

*   Project.Core（包含存储库的域对象和接口）
*   Project.Infrastructure（是实现的核心）

我正在使用 MVC2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:26:06.927

我不认为这是 Onion 架构可以自行解决的问题。我要做的是将所有这些项目放在一个或多个项目中，在另一个解决方案中并构建 Nuget 包，允许我将它们部署到我需要它们的任何地方。这样我就可以在 MVC 项目中部署基本控制器等项目，在基础设施项目中部署插件/翻译内容。

这样，每当您需要在新创建的项目中使用这些元素时，您只需再次部署包。

这些项目将变得独立，存储在一个中心点（一个新的 sln），并将有自己的发布周期！

# jquery - asp.net mvc，下拉列表，jquery

> ID：10682114
> 
> 赞同：0
> 
> 时间：2012-05-21T08:51:34.080
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, html-helper

嗨，大家好，有一个非常有趣的情况。

我有一个视图模型，它需要下拉列表中的媒体类型 *顺便说一下下拉列表的生成方式

```
@Html.DropDownListFor(m => m.MediaType, Model.MediaTypeList) 
```

当我手动填写表格时，表格的所有值都可以，并且功能按应有的方式工作。

但后来我实现了一个 jquery 函数来设置下拉列表的值，只要你上传一个文件，它就会自动检测它有什么媒体类型。

```
function setValueToDropDown(media){                                        
    $('#MediaType').attr('disabled','');   
    var value = media;
    $('#MediaType').val(value);   
} 
```

当我提交域验证时告诉我该字段是必需的，即使选择了下拉列表选项并且当我在控制台中执行一个函数来验证它的值不是空值时。

```
alert($('#MediaType').val()) 
```

所以我不明白为什么当我动态地将值分配给下拉列表时，mvc 无法识别它。我到处找，我找不到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:54:51.003

我不知道你运行的脚本是什么样子的，也不知道它做了什么。但也许脚本正在寻找`value` **属性**而不是`value` **属性**

尝试使用这个：

```
function setValueToDropDown(media){                                        
    $('#MediaType').attr('disabled','');   
    var value = media;                    // Why do you save media in value...?
    $('#MediaType').attr("value", value);   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:33:42.653

这应该足以启用和设置`<select>`元素的值。

```
var setValueToDropDown = function(media) {
  $('#MediaType').prop('disabled', false).val(media);
}; 
```

从 1.6 版开始，您应该使用[.prop()](http://api.jquery.com/prop/)来管理属性`disabled`。还要确保在 DOM 准备好等之后运行脚本。;)

# wpf - 从代码中刷新资源对象

> ID：10682118
> 
> 赞同：0
> 
> 时间：2012-05-21T08:51:47.783
> 
> 标签：wpf, binding, resources, refresh

我在窗口中有一个类的条目。在我创建的 window.Resources 中：

```
<local:ColorType x:Key="myClrData" /> 
```

在条目中，我有 11 个文本框/文本块，并且都绑定到 myClrData 的属性：

```
<TextBox Name="dfTxt" MinWidth="50" Grid.Column="1" Grid.Row="1" Style="{StaticResource numberTextStyle}" 
         Text="{Binding Source={StaticResource myClrData}, Path=D_F}" />
<TextBlock Name="dfPerc" Grid.Column="2" Grid.Row="1" Style="{StaticResource numberTBStyle}" 
           Text="{Binding Source={StaticResource myClrData}, Path=D_F_Percent}" /> 
```

当我想添加一个新条目时，这非常有效。我担心的是我想更新对象详细信息。为此，在我的窗口类中，我添加了：

```
public ColorTorWindow(ColorType ct)
    : this()
{
    this.Resources["myClrData"] = ct;

} 
```

但这不会刷新绑定到它的文本框/块。这里缺少什么？我如何强制再次刷新所有组件，或者我应该以其他方式工作。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:43:51.490

我正在使用 Datacontext，它解决了我的问题。

谢谢

# android - 如何在 Android 中检索 SIM 卡 IMSI？

> ID：10682124
> 
> 赞同：2
> 
> 时间：2012-05-21T08:52:14.710
> 
> 标签：android, telephonymanager

```
public String getSubscriberId(){
    operator = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
    String IMSI = operator.getSubscriberId();
    return IMSI;
}

simID = (TextView) findViewById(R.id.text2);
    simIMSI = getSubscriberId().toString();

    if (simIMSI.equals("")){
        simID.setText("No SIM card detected!");
    }
    else{
        simID.setText(simIMSI.toString());
        SaveUniqueId(simIMSI.toString());
    } 
```

我希望检索手机 SIM 卡 IMSI 并在布局中显示，我使用模拟器运行程序，即使我知道模拟器没有连接 SIM 卡但它应该有类似“未检测到 SIM 卡”的结果，对吗？但是为什么我得到这个编码错误或者我的“getSubscriberId（）”有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:58:18.670

```
String serviceName = Context.TELEPHONY_SERVICE;
TelephonyManager m_telephonyManager = (TelephonyManager) getSystemService(serviceName); 
```

现在让我们从实际的源代码开始检索信息：-

```
public String findDeviceID() {
     String deviceID = null;
     String serviceName = Context.TELEPHONY_SERVICE;
     TelephonyManager m_telephonyManager = (TelephonyManager) getSystemService(serviceName);
     int deviceType = m_telephonyManager.getPhoneType();
     switch (deviceType) {
           case (TelephonyManager.PHONE_TYPE_GSM):
           break;
  case (TelephonyManager.PHONE_TYPE_CDMA):
  break;
  case (TelephonyManager.PHONE_TYPE_NONE):
  break;
          default:
         break;
     }
     deviceID = m_telephonyManager.getDeviceId();
     return deviceID;
} 
```

有关更多详细信息，请参阅此站点[http://ashnatechnologies.blogspot.in/2010/10/how-to-get-imei-on-android-devices.html](http://ashnatechnologies.blogspot.in/2010/10/how-to-get-imei-on-android-devices.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:55:37.570

您可以访问此链接 [http://www.anddev.org/tinytut__-_getting_the_imsi_-_imei_sim-device_unique_ids-t446.html](http://www.anddev.org/tinytut_-_getting_the_imsi_-_imei_sim-device_unique_ids-t446.html)

对 IMSI 使用以下代码

```
String imsi = android.os.SystemProperties.get(android.telephony.TelephonyProperties.PROPERTY_IMSI); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T07:25:56.667

这段代码应该可以工作。

```
String myIMSI =
android.os.SystemProperties.get(android.telephony.TelephonyProperties.PROPERTY_IMSI); 
```

# function - 错误 '800a005e' 在 ASP Classic-VBScript 中使用函数时无效使用 Null: 'CDate'

> ID：10682127
> 
> 赞同：2
> 
> 时间：2012-05-21T08:52:25.223
> 
> 标签：function, asp-classic, error-handling, vbscript

我做了一个叫做 FormatDT 的函数，我把它放在`\include\basic_function.asp`

这是该函数的代码：

```
function FormatDT(ddate,format)
        ddate = cdate(ddate)
        Set re = New RegExp
        re.Pattern = "%."
        re.Global = True
        re.IgnoreCase = False
        're.MultiLine = True
        set matches = re.execute(format)
        hasil = ""
        tmp = format
        for each match in matches
            fmt = match.value
            select case fmt
                case "%d" hasil = day(ddate)
                case "%D" hasil = right("00" & day(ddate),2)
                case "%m" hasil = month(ddate)
                case "%M" hasil = right("00" & month(ddate),2)
                case "%b" hasil = left(MonthName(month(ddate)),3)
                case "%B" hasil = MonthName(month(ddate))
                case "%y" hasil = right(year(ddate),2)
                case "%Y" hasil = year(ddate)
                case "%h" hasil = hour(ddate)
                case "%H" hasil = right("00" & hour(ddate),2)
                case "%n" hasil = minute(ddate)
                case "%N" hasil = right("00" & minute(ddate),2)
                case "%s" hasil = second(ddate)
                case "%S" hasil = right("00" & second(ddate),2)
                case else hasil = replace(fmt,"%","")
            end select
            tmp = replace(tmp,fmt,hasil)
        next
        FormatDT = tmp
    end function 
```

我在这里使用这个功能：

```
<input style="text-align:center" class="label" style="width:6em;" type="text" id="txtDate" name="txtDate" size="12" value="<%=FormatDt(dtglvalid,"%M/%D/%Y")%>" > 
```

当我加载页面时，我收到如下错误消息：

> Microsoft VBScript 运行时错误“800a005e”无效使用 Null：“cDate”
> /include/basic_function.asp，第 234 行

第 234 行位于`ddate = cdate(ddate)`

如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:53:27.110

ASP 抱怨变量`ddate`是`NULL`. 查看您的代码，看起来变量`dtglvalid`是 NULL ，它被传递给函数并导致错误。您可以执行以下操作：

```
<input ... value="<% if not IsNull(dtglvalid) then Response.Write FormatDt(dtglvalid,"%M/%D/%Y") %>"> 
```

# java - 错误：使用 log4j 时出现“setFile(null,false) call failed”

> ID：10682130
> 
> 赞同：37
> 
> 时间：2012-05-21T08:52:33.040
> 
> 标签：java, file, logging, log4j

我已经`log4j.properties`在项目的源文件夹中添加了文件，但我仍然收到 log4j:error。

这是我的 Log4j.properties 文件：

```
 .rootCategory=DEBUG, R, O
    # Stdout
    log4j.appender.O=org.apache.log4j.ConsoleAppender
    log4j.appender.O=log44j.log
    # File
    log4j.appender.R=org.apache.log4j.RollingFileAppender
    log4j.appender.R.File=log4j.log

    # Control the maximum log file size
    log4j.appender.R.MaxFileSize=100KB

    # Archive log files (one backup file here)
    log4j.appender.R.MaxBackupIndex=1

    log4j.appender.R.layout=org.apache.log4j.PatternLayout
    log4j.appender.O.layout=org.apache.log4j.PatternLayout

    log4j.appender.R.layout.ConversionPattern=[%d{ISO8601}]%5p%6.6r[%t]%x - %C.%M(%F:%L) - %m%n
    log4j.appender.O.layout.ConversionPattern=[%d{ISO8601}]%5p%6.6r[%t]%x - %C.%M(%F:%L) - %m%n

    # Define the root logger with appender file
    logDir = ../logs
    log4j.rootLogger = DEBUG, FILE

    # Define the file appender
    log4j.appender.FILE=org.apache.log4j.FileAppender
    log4j.appender.FILE.File=logs/${file.name}
    log4j.appender.FILE.Append=false

    # Define the layout for file appender
    log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
    log4j.appender.FILE.layout.conversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

    log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout 
```

这是我得到的Java异常：

```
log4j:ERROR setFile(null,false) call failed.
java.io.FileNotFoundException: logs (Access is denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:194)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:116)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:294)
    at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165)
    at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:307)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:172)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:104)
    at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:809)
    at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:735)
    at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:615)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:502)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:547)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:483)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:127)
    at org.apache.log4j.Logger.getLogger(Logger.java:104)
    at lib.Dashboard.Reports.<init>(Reports.java:34)
    at testcases.AmazonDashboard.TC_DB17.main(TC_DB17.java:54)
AmazonDashboardTC_DB17Exception in thread "main" java.lang.NullPointerException
    at testcases.AmazonDashboard.TC_DB17.main(TC_DB17.java:131) 
```

请让我知道如何解决此异常，因为我尝试将我的属性文件放在根文件夹中，现在我已放置在源文件夹中，但在这两种情况下我都遇到了上述异常。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-27T20:21:26.787

我怀疑该变量`${file.name}`没有正确替换。结果， 的值`log4j.appender.FILE.File`变为`logs/`。因此，Java 尝试创建一个名为 的日志文件`logs/`，但它可能是一个现有目录，因此您会遇到异常。

作为快速补救措施，将`log4j.appender.FILE.File`设置更改为通过绝对路径指向文件，例如`/tmp/mytest.log`. 你不应该得到一个例外。

之后，您可以继续调试为什么`${file.name}`在您的运行时环境中没有正确替换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-27T09:04:49.797

我有同样的问题。这是对我有用的解决方案：只需以这种方式将您的属性文件路径放在 cmd 行中：

```
-Dlog4j.configuration=<FILE_PATH>  (ex: log4j.properties) 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-10T11:54:03.627

由于当前用户访问无法访问您提供的附加程序文件位置，因此出现此错误。

**快速解决方案**，将 log4j.appender.FILE.File 设置更改为使用您登录的当前用户可以访问的绝对路径指向文件，例如**/tmp/myapp.log**。现在你不应该得到一个错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-04T17:38:51.363

我只是将写权限添加到“日志”文件夹，它对我有用

[![添加写权限](../Images/91610c9325ae0f5787380d426dd89355.png)](https://i.stack.imgur.com/NdQLI.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-28T20:30:22.810

如果是window7（像我的），没有管理权限不能在C：驱动器写入文件

只需在 log4j.properties 文件中提供另一个文件夹

> 设置文件名

log4j.appender.FILE.File=C:\server\log.out 你可以用记事本++看到

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-14T13:35:41.760

这是你的配置：

```
log4j.appender.FILE.File=logs/${file.name} 
```

并且发生了这个错误：

```
java.io.FileNotFoundException: logs (Access is denied) 
```

所以看起来变量`file.name`没有设置，java尝试写入目录`logs`。

* * *

您可以使用此选项**-D****强制**`${file.name}`调用 maven的变量的值：

 **```
mvn clean test -Dfile.name=logfile.log 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-07T07:21:38.547

查看错误 - 'log4j:ERROR setFile(null,false) 调用失败。java.io.FileNotFoundException：日志（访问被拒绝）'

似乎有一个名为“日志”的日志文件被拒绝访问，即它没有足够的权限来写入日志。尝试通过授予“日志”日志文件的写入权限。希望能帮助到你。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-21T21:49:48.357

请将您的日志文件位置更改到另一个驱动器。它会起作用的。

这是创建日志文件的权限。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-23T19:56:21.687

为了防止这个问题，我将目录 ${kafka.logs.dir} 的 log4j.properties 文件中的所有值更改为我自己的目录。例如 D:/temp/...

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2015-03-23T05:13:29.503

尝试使用 sudo（超级用户）执行您的命令，这对我有用 :)
运行：$ sudo your_command
之后输入超级用户密码。就这样..**

# shell - Linux shell 列表文件 tmp/**/* 和 tmp/* 有什么区别

> ID：10682134
> 
> 赞同：0
> 
> 时间：2012-05-21T08:52:50.940
> 
> 标签：shell, unix

我在 shell 中遇到了一个关于文件系统的问题。`tmp/**/*`和有什么区别`tmp/*`？我在我的系统中进行实验，有这个目录 dir2

```
dir2
     -->dir1
         -->xx2
     -->ff.txt 
```

我跑`ls dir2/*`：

```
dir2/ff.txt

 dir2/dir1:
 xx2 
```

然后我运行`ls dir2/**/*`：

```
dir2/dir1/xx2 
```

所以这意味着`**`忽略这个目录（比如忽略dir1），有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:05:51.893

我认为题型测试存在格式问题，但我会根据题名和例子来回答。

在路径的任何单个级别上，单星号和双星号之间不应该有任何区别。任何一个表达式都匹配任何名称，除了以点开头的隐藏名称（这可以通过 shell 选项更改）。所以：

*   `tmp/**/*`（等价于`tmp/*/*`）被扩展为所有嵌套在`tmp`. 第一个星号仅扩展到目录而不是第一级的文件，因为它后跟一个斜杠。
*   `tmp/*`扩展到任何嵌套在内部深处的一层`tmp`。

为此，`ls`如果在其命令行上给出目录，则将列出目录的内容。这可以通过添加`-d`选项来覆盖`ls`。

# python - Python：用带有 alpha 像素的颜色替换 rgb 颜色。批量转换 400 张图像

> ID：10682136
> 
> 赞同：2
> 
> 时间：2012-05-21T08:52:54.967
> 
> 标签：python, image, colors, replace

如何在 python 中用另一种颜色替换多个图像中的颜色？我有一个包含 400 个精灵动画的文件夹。我想将块色阴影（111,79,51）更改为具有 alpha 透明度的阴影。我可以使用以下方法轻松进行批量转换：

```
img = glob.glob(filepath\*.bmp) 
```

但是我不知道如何更改像素颜色。如果有任何区别，图像都是 96x96，我不在乎这个过程需要多长时间。我正在使用 python 3.2.2，所以我不能真正使用 PIL（我认为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:41:35.370

Are your images in indexed mode (8 bit per pixel with a palette),or "truecolor" 32bpp images? If they are in indexed modes, it would not be hard to simply mark the palette entry for that color to be transparent across all files.

Otherwise, you will really have to process all pixel data. It also could be done by writting a Python script for GIMP - but that would require Python-2 nonetheless.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:19:06.427

BMP 是一种 windows 文件格式，所以你需要 PIL 或类似的东西；或者您可以推出自己的阅读器/作家。据我所知，基本模块无济于事。您可以使用作为标准分发的一部分的 Tk (PhotoImage()) 读取 PPM 和 GIF，并在该图像上使用 get() 和 put() 来更改像素值。请参阅在线参考，因为它不是直截了当的 - 像素来自 get() 作为 3 元组整数，但需要返回 put() 作为空格分隔的十六进制文本！

# java - 如何打印 LU 分解？

> ID：10682138
> 
> 赞同：0
> 
> 时间：2012-05-21T08:53:02.173
> 
> 标签：java

我正在开发一个关于矩阵的小应用程序，并且正在使用 class jama。我在打印LU分解时遇到了一个小问题，希望对您有所帮助。这是我的应用程序的代码我错过了显示 LU 分解的部分

```
import java.util.Scanner;
import Jama.*; 

public class autovalori {
public static void main(String[] args) {

    double[][] matrix;
int n;

    Scanner scanner = new Scanner(System.in);

System.out.println("Matrix size");
n = scanner.nextInt();

matrix = new double[n][n];

for (int i = 0; i < n; i++){
    for (int j = 0; j < n; j++){         

            System.out.printf("Value: " + i + " - " + j);
        System.out.printf("\n");
        matrix[i][j] = scanner.nextInt();

    }
}

Matrix A = new Matrix(matrix);
EigenvalueDecomposition E = new EigenvalueDecomposition(A);
double[] d = E.getRealEigenvalues();

    System.out.println("Rango " + A.rank());

for (int i = 0; i < n; i++){
    System.out.println("Eigenvalue " + d[i]);
}

LUDecomposition LU = new LUDecomposition(A);
Matrix L = LU.getL();
Matrix U = LU.getU();
int[] p = LU.getPivot();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:05:43.173

I checked the `Jama` website and there are several `print` functions available, which are specified in the [documentation](http://math.nist.gov/javanumerics/jama/doc/).

Edit: Then use either

```
double[][] Matrix::getArray(); 
double[][] Matrix::getArrayCopy(); 
```

# url - 从本地机器播放微软流畅的流媒体文件

> ID：10682140
> 
> 赞同：0
> 
> 时间：2012-05-21T08:53:07.640
> 
> 标签：url

我想在我没有服务器的本地计算机上使用流畅的流媒体示例播放器播放流畅的流媒体 (.ims) 文件。

我读到您应该`InitParams`在播放器的 html 的 param 部分中提供文件的 url。我尝试使用 URL 之类的`file://localhost/D:/SmoothStreamin/A_MSS_1280_720p_24fps_200kbps/A_MSS_1280_720p_24fps_200kbps.ism`，但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:57:02.897

file://localhost/D:/SmoothStreamin/A_MSS_1280_720p_24fps_200kbps/A_MSS_1280_720p_24fps_200kbps.ism **/Manifest**

不要忘记清单部分。

# php - PHP 生成的 .ics 文件加载然后立即在 iCal 中删除

> ID：10682142
> 
> 赞同：0
> 
> 时间：2012-05-21T08:53:14.357
> 
> 标签：php, gmail, icalendar

我正在使用 PHP 生成一个 .ics 日历文件以供下载。我可以双击该文件，iCal 似乎可以识别它，因为它询问我将其分配给哪个日历。一旦我选择了它，它似乎会将事件添加到日历中，但几乎立即它又被删除了。

仅当我选择将其分配给的 gmail 日历时才会发生这种情况。

这是文件，我错过了什么谷歌似乎是肛门的？

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN
METHOD:PUBLISH
BEGIN:VEVENT
UID:7ef5459b7f5c7b9a699e08c92153bed0alexcrooks.me
CLASS:PUBLIC
SEQUENCE:0
STATUS:CONFIRMED
DTSTAMP:20120521T091949Z
CREATED:20120521T091949Z
DTSTART;VALUE=DATE:20120823
DTEND;VALUE=DATE:20120823
SUMMARY:Some wedding or something?
DESCRIPTION:Some wedding or something?
LAST-MODIFIED:20120521T091949Z
TRANSP:TRANSPARENT
END:VEVENT
END:VCALENDAR 
```

我在这里验证了我的 .ics 文件：

[http://severinghaus.org/projects/icv/?url=http%3A%2F%2Falexcrooks.me%2Fdownload%2F9ef24337cf0dd90728039c1d097ddf59.ics](http://severinghaus.org/projects/icv/?url=http%3A%2F%2Falexcrooks.me%2Fdownload%2F9ef24337cf0dd90728039c1d097ddf59.ics)

和这里：

[http://icalvalid.cloudapp.net/?id=634731889258508106](http://icalvalid.cloudapp.net/?id=634731889258508106)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:30:55.133

好的，事实证明它工作正常，但是您需要手动按刷新（或等待自动刷新）才能重新出现事件！

# ruby-on-rails - 使用 active_model_serializers 时如何自定义集合渲染？

> ID：10682143
> 
> 赞同：1
> 
> 时间：2012-05-21T08:53:20.083
> 
> 标签：ruby-on-rails, json, ember-data

我正在使用 active_model_serializers 将集合呈现为 JSON 以供 ember 数据使用。渲染单个项目时一切正常，但集合渲染由项目数组组成。

```
render json: @scenarios, status: :ok 
```

给出：

```
[{"scenario":{"id":4,"name":"My sample scenario"}},{"scenario":{"id":5,"name":"Yet another sample scenario"}}] 
```

但我想获得：

```
{"scenarios": [{"id":4,"name":"My sample scenario"},{"id":5,"name":"Yet another sample scenario"}]} 
```

获取所有集合项、辅助数据等的根密钥的最先进方法是什么？（文档对此并不清楚）

**编辑**

场景序列化器目前如下：

```
class ScenarioSerializer < ActiveModel::Serializer
  attributes :id, :name
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:31:37.203

尝试最新版本。AMS 使用控制器名称作为数组的键。默认情况下，它应该像上面显示的那样呈现。

如果您的控制器未命名为 ScenariosController，您可以像这样强制数组的根元素：

```
render json: @scenarios, root: "scenarios", status: :ok 
```

# c++ - 使用 DAO 选择具有最高时间戳的给定 id 的记录

> ID：10682147
> 
> 赞同：0
> 
> 时间：2012-05-21T08:53:28.007
> 
> 标签：c++, ms-access, dao, recordset

如何在记录集上使用 DAO 执行以下操作

```
SELECT TOP 1 * FROM foo WHERE id = 10 ORDER BY timestamp DESC 
```

使用**SetCurrentIndex**您似乎只能使用一个索引，否则使用**id**和**时间戳**并选择第一个将起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:32:16.857

我不确定你想要什么。

```
Dim rs As DAO.Recordset
Dim db As Database

Set db = CurrentDB

sSQL = "SELECT TOP 1 * FROM foo WHERE id = 10 ORDER BY timestamp DESC"
Set rs = db.OpenRecordset(sSQL) 
```

查找不适用于所有记录集。这将起作用：

```
Set rs = CurrentDb.OpenRecordset("select * from table1")
rs.FindFirst "akey=1 and atext='b'"

If Not rs.EOF Then Debug.Print rs!AKey 
```

这不会：

```
Set rs = CurrentDb.OpenRecordset("table1")
rs.FindFirst "akey=1 and atext='b'" 
```

# jquery - 使用向上/向下箭头选择 div

> ID：10682152
> 
> 赞同：0
> 
> 时间：2012-05-21T08:54:11.457
> 
> 标签：jquery, html, css

我有文本输入，当我专注于它时 - '#number_list' 的第一个 '.option' 变成了 '.selected'。我想创建一个功能 - 当按下键盘上的 Up 或 Down 键而不是 'number_list' 的下一个或 prev 元素时，granding 'selected' 类和当前元素失去这个类。

```
<input type="text" name="number" id="number" maxlength="30" />

<div id="number_list">
  <div class='option selected'>aaa</div>
  <div class='option'>bbb</div>
  <div class='option'>ccc</div>
</div> 
```

[http://jsfiddle.net/YNyEr/](http://jsfiddle.net/YNyEr/)

我试图创建'.option'元素的数组并按索引获取当前元素，但我找不到任何方法来做到这一点。那么怎么做呢？我也在使用 jQuery 1.5.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:15:05.377

这个快速而肮脏的实现怎么样：http: [//jsfiddle.net/zerkms/YNyEr/2/](http://jsfiddle.net/zerkms/YNyEr/2/)

```
var $input = $('#some_number'),
    current_index = $('.selected').index(),
    $number_list = $('#number_list'),
    $options = $number_list.find('.option'),
    items_total = $options.length;

$input.val(current_index);

$input.bind('keyup', function(e) {
    if (e.keyCode == 40) {
        if (current_index + 1 < items_total) {
            current_index++;
            change_selection();
        }
    } else if (e.keyCode == 38) {
        if (current_index > 0) {
            current_index--;
            change_selection();
        }
    }
});

function change_selection()
{
    $options.removeClass('selected');
    $options.eq(current_index).addClass('selected');
    $input.val(current_index);
}​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T09:01:17.473

我认为你应该看看 javascript 事件 onkeyup 和 onkeydown。如果您使用 id 进行选择，那应该很容易，

例如

```
<div onkeydown='document.getElementById("nextid").className += "selected";this.className -= "selected";' class='option'>bbb</div> 
```

# blackberry - 如何以编程方式锁定 BLACKBERRY 设备（6.0）？

> ID：10682153
> 
> 赞同：0
> 
> 时间：2012-05-21T08:54:19.950
> 
> 标签：blackberry

如何以编程方式锁定黑莓设备 6.0？有一个名为 ApplicationManger.locksystem(true) 的 API，但在 6.0 中不推荐使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:57:13.637

根据[BlackBerry OS 7.1 API 文档](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/system/ApplicationManager.html#lockSystem%28boolean%29)，参数*force*已被弃用，API 调用应该仍然有效。你试过了吗？

# objective-c - tableview的垂直滚动条

> ID：10682155
> 
> 赞同：0
> 
> 时间：2012-05-21T08:54:27.250
> 
> 标签：objective-c, uitableview, xcode4.3

我有一个`UITableView`，我在其上放置了一个`UIImageView`，它在表格被拖动时垂直滚动，根据拖动方式向上或向下滚动。（图像是独立的，与表格视图的当前单元格无关。）

`UIScrollViewDelegate`已用于垂直滚动。

有没有什么办法可以在拖动表格的时候让图片随着垂直滚动条一起移动？如果是这样，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:41:38.463

我认为你想要实现的是类似于 Path.app 的滚动条的东西。看看这个控件： http: [//www.cocoacontrols.com/platforms/ios/controls/knpathtableviewcontroller](http://www.cocoacontrols.com/platforms/ios/controls/knpathtableviewcontroller) 它是开源的并实现了这一点。

# jquery - 简单的模型对话框无法正常工作

> ID：10682160
> 
> 赞同：0
> 
> 时间：2012-05-21T08:54:45.857
> 
> 标签：jquery, simplemodal

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src='jquery.simple.modal142.js'></script>
<script>
$('#viewwid').click(function()
{
    var scr='../displayproducts';
    $.model('<iframe src="' + src + '" height="450" width="830" style="border:0">',
        {   
            closeHTML:"",
            containerCss:
            {
                    backgroundColor:"#fff",
                    borderColor:"#fff",
                    height:450,
                    padding:0,
                    width:830
            },
            overlayClose:true
        });
}

</script> 
```

当用户单击 id 为“viewwid”的按钮时，我使用该代码片段来显示模型对话框。传入 iframe 的 url 是一个 cakephp 视图页面。单击按钮后什么都没有显示，请帮助？

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:10:12.877

你把`model`而不是`modal`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:11:39.607

您的脚本中有错误。您忘记关闭点击（

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
<script src='jquery.simple.modal142.js'></script> 
<script> 
$('#viewwid').click(function() 
{ 
    var scr='../displayproducts'; 
    $.model('<iframe src="' + src + '" height="450" width="830" style="border:0">', 
        {    
            closeHTML:"", 
            containerCss: 
            { 
                    backgroundColor:"#fff", 
                    borderColor:"#fff", 
                    height:450, 
                    padding:0, 
                    width:830 
            }, 
            overlayClose:true 
        }); 
} 

); //<<====
</script> 
```

# javascript - jQuery - 谁真正点击了我？

> ID：10682166
> 
> 赞同：3
> 
> 时间：2012-05-21T08:54:57.943
> 
> 标签：javascript, jquery

我有这个**[jsbin](http://jsbin.com/axaqer/5/edit)**（上一个[答案](https://stackoverflow.com/questions/2801729/passing-data-to-a-jquery-click-function)没有多大帮助）

```
<span id="mySpan" > click here </span>
  <br/> 
  <input id="myCb" type="checkbox"/> 
```

![在此处输入图像描述](../Images/611926bbe750dabb1601bc46bb811a33.png)

我有一个`checkbox`点击监听器`Alert`...

但是，单击`span`会*触发*的`click`事件`checkbox`。

我想检测 - 谁真正让复选框执行警报。

**但是**！

我想要：如果第一次点击跨度，提醒 `*i was originally pressed by mySpan*`

别的

如果第一次点击复选框，警告 `*i was originally pressed by myCb*`

```
$("#mySpan").on('click',function (e) 
  {
    $("#myCb").trigger('click');

  });

$("#myCb").on('click',function (e) 
  {
    doWork(e)
  });

function doWork(e)
{
  alert('i was originally pressed by '+$(e.delegateTarget).attr('id') );
 } 
```

ps 我可以使用全局字段或标志解决方案 - 我不想要。

我很高兴通过`e`参数解决方案“移动数据”。

谢谢。：）

## 编辑

jQuery 确实支持移动数据，但我无法编写正确的代码

![在此处输入图像描述](../Images/cd7e8f08d1b5b4eabdbd149e198d1b2a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:15:01.547

这对我有用，

```
<html>
<head>
<style>

</style>
<script src='jquery.js'></script>
<script type='text/javascript'>
    $(document).ready(function() {
        $("#mySpan").on('click',function (e){
            $("#myCb").trigger('click','span');
        });

        $("#myCb").on('click',function (e,span){
            var ele = span || 'cb'; 
            doWork(ele);
        });
        function doWork(ele){
          alert('i was originally pressed by ' + ele  );
         } 
    })

</script>
</head> 
<body>
  <span id="mySpan"   style="width:100px;height:100px;" > click here </span>
  <br/><br/><br/>
  <input id="myCb" type="checkbox"/>
</body>
</html> 
```

[小提琴](http://jsbin.com/elibid/edit#source/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:24:30.677

这个怎么样。

```
$("#mySpan").on('click',function (e) 
  {

    $("#myCb").trigger(e);

  });

$("#myCb").on('click',function (e) 
  {
    doWork(e);
  });

function doWork(e)
{
  alert('i was originally pressed by '+$(e.target).attr('id') );
 } 
```

它对我有用，并且最接近您的原始代码。

在行动[http://jsbin.com/ixanup/2/edit#javascript,html](http://jsbin.com/ixanup/2/edit#javascript,html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:02:04.797

```
$("#mySpan, #myCb").on('click', function (e) {
    alert('I was originally pressed by ' + e.target.id);
    console.log($(e.target)); /* jQuery reference to the clicked element */

    if (e.target.id === 'myCb') {
       /* do code only if checkbox was clicked */
    }
}); 
```

小提琴示例：http: [//jsfiddle.net/4AVZz/](http://jsfiddle.net/4AVZz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:26:54.470

也许这段代码对你有帮助：

```
 $("#mySpan").on('click',function (e) 
  {
    alert('i was originally pressed by '+$(e.delegateTarget).attr('id') );
    if($("#myCb").attr('checked')=="checked")
        $("#myCb").removeAttr('checked');
    else
        $("#myCb").attr('checked','checked');

  });

  $("#myCb").on('click',function (e) 
  {
    alert('i was originally pressed by '+$(e.delegateTarget).attr('id') );
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T09:51:31.763

```
$("#mySpan").on('click',function () {
        var cb = $("#myCb");
        if(cb.is(':checked')) {
            cb.removeAttr('checked');
        } else {
            cb.attr('checked', true);
        }
        doWork.apply($(this));
      });

    $("#myCb").on('click',function (e) {
        doWork.apply($(this));
    });
    function doWork(e) {
        console.log('i was originally pressed by '+$(this).attr('id') );
        alert('i was originally pressed by '+$(this).attr('id') );
    } 
```

我已根据您的要求修改了您的示例。并保存为新版本。

请看看这个。[http://jsbin.com/axaqer/7/edit](http://jsbin.com/axaqer/7/edit)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T10:27:21.153

我会做这样的事情：

```
$(function() {

  $('.row span, .row input[type="checkbox"]')
    .on('click', function (evt) {

      triggerCheckbox($(this), evt.currentTarget.tagName);
      doWork(evt.currentTarget.tagName);
  });

});

function doWork(elm) {
  // elm with either be INPUT or SPAN
  console.log('I was originally pressed by ' + elm);
}

function triggerCheckbox(elm, evt) {  
  // if it's a SPAN, let's change the checkbox value without
  //  triggering the click event
  if(evt.currentTarget.tagName === 'SPAN') {
    var ckb = $(elm).closest('.row').find('input[type="checkbox"]');
    $(ckb).prop('checked', !$(ckb).prop('checked'));
  }
} 
```

你拥有什么并不重要`ID`，它可以与所有人一起使用，只要你有一个将两者分组的包装器。

在 HTML 中，我添加了一个`<div>`来包装你的内容，所以它看起来像：

```
 <div class="row">

    <span id="mySpan">click here</span>
    <br/><br/><br/>
    <input id="myCb" type="checkbox"/>

  </div> 
```

现场示例也可以[在 JsBin](http://jsbin.com/efahek/edit#javascript,live)上找到。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-21T09:03:35.387

你为什么不使用，

```
e.currentTarget 
```

?

# javascript - 我如何制作一个函数，以便编程线等到它完成并移动到javascript中的下一行

> ID：10682169
> 
> 赞同：0
> 
> 时间：2012-05-21T08:55:24.043
> 
> 标签：javascript, html

我正在使用 Javascript 创建 HTML5，但有时代码在当前行完成之前执行下一行语句，

例如，我在 Javascript 中将图像传递给对象，但是在对象拥有图像之前已经执行了下一条语句，所以有时对象没有图像，但有时它有，

所以在两行之间我需要分配回调或等待函数之类的东西，但我不知道如何

```
var image=new Image();
ws.send("complete"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T08:59:57.163

Javascript（大部分）是异步的，这是一件好事。例如，您不想在等待图像时阻止 UI。

图像完成后，使用以下命令执行 ws.send：

```
var image = new Image();
image.onload = function()
{
 ws.send("complete");
}
image.src = 'image.jpg'; 
```

如果您要同步执行此操作，则整个程序将阻塞，而您不希望那样。

至于回调，您可以将一个函数作为参数传递给您的函数。例如：

```
function doSomething(callback)
{       
    callback();
}

doSomething(function()
{
 console.log('im done!');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:00:52.033

不确定您的问题是否是特定于图像的，但对于图像，您可以执行以下操作：加载图像后将触发 onload 事件。

```
var im = new Image();
im.onload = function() { ws.send('complete'); }
im.src = 'path/to/image.jpg' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:00:57.757

看看这个：[Javascript图像加载](https://stackoverflow.com/questions/5366967/javascript-image-onload#5368113)

本质上，您必须编写一个事件侦听器，以在加载图像时捕获事件。

# javascript - 截断/增加 div 中的字体大小，使其适合

> ID：10682171
> 
> 赞同：3
> 
> 时间：2012-05-21T08:55:25.777
> 
> 标签：javascript, jquery, html, css

假设我有一个`div`大小`100px x 20px`和其中的文本随机设置不同的长度，即一些文本部分很长，一些很短。

因此，当文本量较少时，div 内就会出现空白。如果有大量文本，它就会溢出。

### 我的目标

*   如果文本小于`div`容量，则该`font-size`文本的 将最大化以尽可能适应该容量，`div`而无需***剪切/剪切***。

*   但是，如果文本大小大于`div`容量，那么我想***截断***文本并附加`...`（仅 3 个点）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:00:51.710

对于第一部分，我建议将文本包装在 a 中`<span>`以便您可以获取它`offsetWidth`，然后您可以将其`font-size`样式属性设置为`200 / span.offsetWidth`. 但请记住，这是一个粗略的计算，做了一些近似，也许您希望使用 190 或 195 而不是 200 做得更好。

对于第二部分，只需设置`overflow: hidden; text-overflow: ellipsis; white-space: nowrap;`. 请记住，省略号不会出现在较旧的 Firefox 客户端中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:08:27.650

我认为您将需要另一个（内部）`<div>`才能检查文本的高度。

```
<div id="mainDiv">
    <div class="inner">
        <p>Some text</p>
    </div>
</div>

//css
#mainDiv
{
    width: 200px;
    height: 50px;
    overflow: hidden;
} 
```

然后你将需要一些简单的功能（像这样）：

```
//pseudocode

function doCheck()
{
    if (".inner".height > "#mainDiv".height) truncate()
    else increaseSize()
}

function truncate()
{
    for (i = 1; i <= ".inner".wordCount)
    while (".inner".height <= "#mainDiv".height)
    {
        addOneMoreWord() + " …";
        if (".inner".height > "#mainDiv".height) removeLastWord()
    }
}
//similar thing for increaseSize(); 
```

# backbone.js - 原型设计：最简单的带有 URL 路由的 HTTP 服务器（与 Backbone.Router 一起使用）？

> ID：10682172
> 
> 赞同：4
> 
> 时间：2012-05-21T08:55:27.947
> 
> 标签：backbone.js, prototyping, httpserver, simplehttpserver, backbone-routing

我们正在开发一个 Backbone.js 应用程序，我们可以通过键入来启动 HTTP 服务器这一事实`python -m SimpleHTTPServer`非常棒。

我们希望能够将任何 URL（例如`localhost:8000/path/to/something`）路由到我们的`index.html`，以便我们可以`Backbone.Router`使用 HTML5进行测试`pushState`。

实现这一目标最轻松的方法是什么？（出于快速原型制作的目的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:51:59.773

只需使用内置的 python 功能`BaseHTTPServer`

```
import BaseHTTPServer

class Handler( BaseHTTPServer.BaseHTTPRequestHandler ):
    def do_GET( self ):
        self.send_response(200)
        self.send_header( 'Content-type', 'text/html' )
        self.end_headers()
        self.wfile.write( open('index.html').read() )

httpd = BaseHTTPServer.HTTPServer( ('127.0.0.1', 8000), Handler )
httpd.serve_forever() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:43:30.090

1.  下载并安装[CherryPy](http://cherrypy.org/)

2.  创建以下 python 脚本（调用它`always_index.py`或类似的东西）并将 'c:\index.html' 替换为您要使用的实际文件的路径

    ```
    import cherrypy

    class Root:
        def __init__(self, content):
            self.content = content

        def default(self, *args):
            return self.content
        default.exposed = True

    cherrypy.quickstart(Root(open('c:\index.html', 'r').read())) 
    ```

3.  跑`python <path\to\always_index.py>`
4.  将您的浏览器指向`http://localhost:8080`，无论您请求什么 url，您总是会得到相同的内容。

# java - 在没有 Eclipse 的情况下将 Java EE 项目部署到 WebSphere 7

> ID：10682175
> 
> 赞同：1
> 
> 时间：2012-05-21T08:56:04.520
> 
> 标签：java, jakarta-ee, websphere, ibm-rad

我厌倦了**eclipse 和 m2eclipse 中的所有错误**，并想使用命令提示符使用 maven 构建，然后**启动服务器**，然后**将应用程序部署到服务器并使用****命令提示符**发布它。**通常我在 Eclipse 服务器选项卡中执行此操作。**

如果我对代码进行更改，那么我应该使用 maven 重建并重新发布。

我知道您可以在 Wepshere 管理 Web 控制台中部署 EAR，但我想的不是 EAR，至少我不这么认为。例如，我希望能够，一旦部署了应用程序，jRebel 应该能够重新加载 jvm 中的类，但我相信 ear 文件是独立的，因此无法正常工作。

所以，

**如何从命令提示符启动服务器，以及部署项目并发布它？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:21:56.773

您可以自动化构建，以便它也部署应用程序，至少使用 Maven。看看这篇文章：[Maven 2 和 WebSphere](http://sdudzin.blogspot.com/2007/09/maven-2-and-websphere-automated-build.html)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:00:44.043

WebSphere 有（有？）一个快速部署特性，您可以将其用于“热”部署。本质上，它为此启动了一个无头 Eclipse，但它比完整的 EAR 构建要快得多，并且与通过 WTP 一样动态。

当时，我们有一个 Ant 任务，用于将文件复制到 WRD 目录。我不确定这将如何与 Maven 一起使用，但我想可以安装一些东西。

# c# - 合并本地 .net 库文档

> ID：10682181
> 
> 赞同：1
> 
> 时间：2012-05-21T08:57:04.683
> 
> 标签：c#, code-documentation

当我在某个 .net 关键字上按 F1 时，它会将我带到该关键字的帮助。我有一个 .net 库及其文档。我正在使用这个库。当我在这个库中的某些功能上按 F1 时，如何使用 F1 获得库帮助？

一般来说，我们如何将本地文档与 .net 文档合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:37:44.497

你确定你需要那个吗？通常的方法是使用智能感知为您的库提供上下文帮助，生成 xml 文件。

请参阅[此](https://stackoverflow.com/questions/4200802/how-do-you-get-the-xml-documentation-to-show-for-a-referenced-c-sharp-library)和[此](https://stackoverflow.com/questions/1238871/how-do-i-add-context-help-to-an-assembly)相关条目。

还：

[.NET 程序集文件附带的 XML 文件是什么？](https://stackoverflow.com/questions/10564336/whats-the-xml-file-that-comes-together-with-a-net-assembly-file)

[http://msdn.microsoft.com/en-us/magazine/dd722812.aspx](http://msdn.microsoft.com/en-us/magazine/dd722812.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:57:49.550

查看[Sandcastle 帮助文件生成器](http://shfb.codeplex.com/)，它可以生成帮助 1 (.chm) 文件、MS 帮助 2 (.HxS) 文件、MS 帮助查看器 (.mshc) 和/或网站。

HTML Help 2.x 输出包括一组有效的集合文件和 H2Reg.exe 配置文件，以简化帮助文件的部署和集成到现有集合（例如 Visual Studio 使用的集合）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:43:39.363

除非该库提供帮助 2/3 文件，否则您将无法实现，

[http://en.wikipedia.org/wiki/Microsoft_Help_2](http://en.wikipedia.org/wiki/Microsoft_Help_2)

[http://en.wikipedia.org/wiki/Microsoft_Help_Viewer](http://en.wikipedia.org/wiki/Microsoft_Help_Viewer)

# maven - 在 Maven 中，配置文件可以覆盖模块（不包括任何模块）

> ID：10682186
> 
> 赞同：11
> 
> 时间：2012-05-21T08:57:33.453
> 
> 标签：maven, maven-3

在`maven`中，一旦您定义`modules`了您的`pom.xml`所有配置文件，就会聚合其中定义的模块：（仅相关部分）

```
<project>
    <modules>
        <module>module1</module>
    </modules>
    <profiles>
         <profile>
             <id>pr1</id>
             <modules>
                 <moudule>module2</module>
             </modules> 
```

如果您执行 a`mvn clean`它会将命令传递给`module1`.

如果您发出`mvn clean -Ppr1`，它将传递给`module1`and `module2`。

我想知道是否`maven 3`可以有一个`pom.xml`with 子模块并覆盖它。我的意思是执行一个配置文件，而不是将它们自己的模块添加到构建中，例如：

```
<project>
    <!-- omitted -->
    <modules>
        <!-- modules -->
    </modules>
    <build>
        <!-- build -->
    </build>
    <profiles>
        <profile>
             <!-- This profile with no modules -->
        </profile>
    </profiles>
</project> 
```

这个要求可能听起来很傻，但我只想知道是否有类似插件配置的机制。

```
<configuration self.combine="override" 
```

问候！

塞达诺

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T10:47:41.080

这是不可能的。配置文件配置始终与主配置合并，因此您只能在您的情况下添加模块。

但是，您可以做的是创建某种“默认”配置文件（按`<activeByDefault>true</activeByDefault>`部分`<activation>`），当没有调用其他配置文件时启用该配置文件并将您的默认模块列表放在那里。然后，当在 Maven 构建调用中未指定配置文件时，将使用此“默认”配置文件，但当您显式调用至少一个配置文件时，则不是，因此您可以通过这种方式从头开始定义模块列表。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-06-07T23:09:29.547

虽然这个问题很老，但谷歌仍然对其排名很高，所以添加一个新答案是有意义的。

您可以使用*没有属性技巧的激活*来实现您想要的。

```
<profiles>
        <!-- By default, include the modules -->
        <profile>
            <id>full-build</id>
            <activation>
                <!-- Activation by absence of a property. Run normally, without -Dskip-modules -->
                <property>
                    <name>!skip-modules</name>
                </property>
            </activation>
            <modules>
                <module>module1</module>
                <module>module2</module>
                <module>module3</module>
            </modules>
        </profile>

        <!-- No-modules build -->
        <profile>
            <id>no-modules</id>
            <activation>
                <!-- Activation by a property. Run with -Dskip-modules to activate -->
                <property>
                    <name>skip-modules</name>
                </property>
            </activation>
            <modules>
            </modules>
        </profile>
    </profiles> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:49:56.667

你可以这样做：

```
 <profiles>
    <profile>
      <id>run-xyz</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <modules>
        <module>www-ab</module>
        <module>www-cd</module>
      </modules>
    </profile>

    <profile>
      <id>run-its</id>
      <activation>
        <activeByDefault>false</activeByDefault>
      </activation>
      <modules>
        <module>www-db</module>
        <module>www-it</module>
      </modules>
    </profile>
  </profiles> 
```

如果你在谈论这样的事情。但我建议对这些事情要非常小心。

这只是您如何设置 activeByDefault 的问题。有了这个，可以创建或多或少的任何组合。

# algorithm - 数学库中的除法函数如何处理除法运算符无法做到的精度误差？

> ID：10682192
> 
> 赞同：2
> 
> 时间：2012-05-21T08:58:17.053
> 
> 标签：algorithm, math, floating-point, precision

在划分两个浮点值时，由于精度错误，我得到了不正确的答案。例如， 1001.05 / 5.0 应该等于 200.21 ，但我得到了 200.2099999999。

正确的结果是使用我们数学库中的除法函数而不是“/”获得的。那么这个库函数做了哪些额外的事情来纠正精度错误呢？您可以解释或指出有关用于纠正精度误差的标准算法的信息，该函数必须使用该算法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T09:09:14.093

Your math library is not using floats, or is rounding the result when you print it out. 200.21 cannot be precisely represented with standard floating point numbers.

# jquery - 有没有办法为 jQuery 中的一组命令定义上下文？

> ID：10682195
> 
> 赞同：1
> 
> 时间：2012-05-21T08:58:22.147
> 
> 标签：jquery

`jQuery.proxy()`具有我正在寻找的一些功能，但理想情况下我希望能够执行以下操作：

```
$('#some-id').context(function(){
    $('.some-class').show();
    $('li').css('background','red');
}); 
```

其效果与以下内容相同：

```
$('#some-id .some-class').show();
$('#some-id li').css('background','red'); 
```

jQuery 有没有像我`context`上面这样的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:01:06.950

最接近的方法是在`jQuery`调用中定义上下文：

```
var $el = $('#some-id');
$('.some-class', $el).show();
$('li', $el).css('background','red'); 
```

*   [jQuery 选择器上下文](http://api.jquery.com/jQuery/#selector-context)

您还可以使用链接：

```
$('#some-id')
    .find('.some-class').show().end()
    .find('li').css('background','red'); 
```

*   [`find()`](http://api.jquery.com/find/)
*   [`end()`](http://api.jquery.com/end/)

**在这两种情况下，**改进之处在于您只需为初始选择器查询一次 DOM（`'#some-id'`在本例中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:13:16.523

有一个名为 context 的方法，但它会返回上下文。在 jQuery 中，如果要设置上下文，则可以将其作为第二个参数可选地传递给 jQuery 选择器。这是一个示例`jQuery( selector [ , context ] )`，您可以像这样使用它`$("input:radio", document.forms[0]);`

要了解有关传递上下文的更多信息[http://api.jquery.com/context/](http://api.jquery.com/context/)

有关检索上下文的更多信息，请参阅[http://api.jquery.com/context/](http://api.jquery.com/context/)

# facebook - 如何在 Facebook 中生成通知？

> ID：10682196
> 
> 赞同：1
> 
> 时间：2012-05-21T08:58:27.243
> 
> 标签：facebook, notifications, facebook-php-sdk, facebook-wall

我想为订阅该通知的一小部分用户构建一个生成通知的应用程序（例如 SMS -> 移动用户将在他或她的手机上收到通知，就像在接收 SMS 时一样）。

我已经建立了一个应用程序和这样一个社区页面（我对 Facebook 不是很熟悉）。

这是我的代码：

```
//PHP SDK
require 'include/facebook.php';

//Instant Facebook-Object
$facebook = new Facebook(array(
  'appId'  => '...',
  'secret' => '...',
  'cookie' => true,
));

$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $userData = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// If a user haven't been loged in, so the user have to authorize
if (!$user) {
  $loginUrl = $facebook->getLoginUrl(
            array(
                'scope' => 'publish_stream',
                'redirect_uri' => 'http://my-hosting.url/'
            )
    );
    header('Location: '.$loginUrl);
    exit;
}

try {
    $publishStream = $facebook->api("/$testid/feed", 'post', array(
        'message' => 'Hello World',
        'link'  => 'http://www.example.org/',
        'name' => 'Test',
        'description' => 'Wohoo some great text.',
        )
    );
} catch (FacebookApiException $e) {
    var_dump($e);   
} 
```

我正在玩`$testid`它包含例如*$user*或*社区页面 ID*。

如果是用户 ID，我会在墙上收到消息，但没有任何通知，这很可悲。如果我将其更改为*社区页面*，我将收到一条异常消息：

> (#210) 用户不可见

这似乎不允许社区页面这样做。好吧，在我尝试获得该许可之前，我想问一下这种方式是否可行，或者我只是在浪费时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:14:43.950

我主要想到了两种使用图形 api 向用户发送通知的方法，然后每种方法分成两种。

1）请求[请求](http://developers.facebook.com/docs/requests/)是[社交渠道](http://developers.facebook.com/docs/channels/)的一部分，有两种类型：

*   用户请求 - 将显示在 facebook 标题的“地球”通知区域。
*   应用程序请求 - 将显示为书签菜单中应用程序名称附近的计数器

2) 私人消息 如果您发送私人消息，那么用户将像任何其他 PM 一样收到它，这意味着如果用户在他的手机上安装了 facebook 应用程序，那么他将在新的 PM 上收到通知。

您有两种使用 api 发送消息的方法：

*   [发送对话框](http://developers.facebook.com/docs/reference/dialogs/send/)- 问题是您需要使用 facebook 对话框（使用他们的 SDK 之一）。
*   [聊天 API](http://developers.facebook.com/docs/chat/) - 使用 xmpp，您可以代表登录用户发送消息。需要 xmpp_login 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:07:49.907

您可以使用通知 API 将通知发送给注册用户。

参考：
[https ://developers.facebook.com/docs/app_notifications/](https://developers.facebook.com/docs/app_notifications/)

但我不知道我们如何设置每天发送通知的时间。

# osgi - Apache ACE 可以使用的非 osgi 目标有哪些

> ID：10682198
> 
> 赞同：1
> 
> 时间：2012-05-21T08:58:40.243
> 
> 标签：osgi, target, apache-ace

Apache Ace 文档提到它可以对其他类型的目标“非 OSGi 容器或完全不同的目标”进行软件供应。但是没有关于非 OSGi 目标的文档。

我能否提供一些 Apache Ace 可以对其进行软件配置的非 OSGi 目标示例。此外，使用 Apache ACE 的目标的最低要求是什么。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:19:50.890

我见过人们创建的一些非 OSGi 目标示例是：

*   Android 应用程序到移动设备，使用可以以编程方式安装 .APK 文件的资源处理器。
*   Windows 桌面应用程序再次使用资源处理器安装在用户的桌面计算机上。
*   内核模块、配置和其他文件、数据库模式等。

所有这些都可以通过创建适当的资源处理器来实现。简而言之，资源处理器只是一个 OSGi 捆绑包，它与供应的资源一起提供。两者都到达目标，处理器用于以某种方式安装资源。该机制允许您使用新的文件类型扩展配置系统。

您可以使用的另一个非 OSGi 目标是 PojoSR。这有点不同。使用特殊的后处理器包，ACE 可以创建一个包含 PojoSR 框架和您配置的包的可执行 JAR 文件，而不是交付部署包。你可以在任何地方获取并运行这个 jar。主要适用于通常无法运行 OSGi 的环境。

我看到的另一件事是部署到 Apache Celix，这是一个用 C 语言实现的 OSGi。他们实际上已经实现了一个可以与 ACE 对话的概念验证管理代理，并且他们可以通过这种方式使用 C 代码提供捆绑包。

关于最低要求：

我们尝试保持管理代理与基本的 OSGi 执行环境兼容，这意味着我们避免使用任何 Java 5+ 功能。它确实需要一个兼容 R4 的 OSGi 实现，但 R3 太旧了，因为它不支持 DeploymentAdmin（这是我们使用的供应机制的基础）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T09:11:06.543

看看[远程接口](http://ace.apache.org/dev-doc/design/remote-interfaces.html)，但我认为 HTTP 是默认设置，请参阅此[链接](https://cwiki.apache.org/ACE/communication-gateway-and-server.html)- 作为最低要求，任何可以检查元数据和流式传输套接字的东西都可以访问相关（看起来很安静）的 URL，并从 Ace 发现/提供.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-25T10:14:49.240

我对 Apache ACE 没有太多经验，但如果您正在寻找一个主要针对 OSGi 客户端但也可以处理其他目标的远程供应系统，您可以查看 ProSyst [mPower Remote Manager](http://www.prosyst.com/index.php/de/html/content/98/Other-FOU-|-Products-|-Remote-Management-Server/) - 支持的目标是 OSGi-基于设备、OMA DM 设备和[TR-069 设备](http://dz.prosyst.com/pdoc/mPRM/um/index.html)。

# visual-studio-2010 - 如何跟踪 Visual Studio 2010 中的所有方法调用直到某个断点？

> ID：10682200
> 
> 赞同：2
> 
> 时间：2012-05-21T08:58:44.650
> 
> 标签：visual-studio-2010, trace, breakpoints

我目前正在处理一个**不是我写**的申请，而是我一年多前辞职的一位同事写的。他没有在他的代码中使用任何注释，也没有留下任何工作流、注释或任何东西来记录应用程序的流程。

我可以使用他创建的其中一个类，并且在该类中有一个我需要在当前应用程序中重用的方法。我花了一个多小时试图找出他在哪里引用了这个方法调用，但对于我的生活，我似乎找不到它。我已经看到他的应用程序中的这个方法确实可以运行，而且效果很好。

有什么方法可以跟踪从应用程序开始到我在 Visual Studio 2010 中插入此方法的断点的所有方法调用？到目前为止，我从来没有需要这样做。

**更新**

这是一个 ASP.NET MVC2 应用程序。我查看了所有视图和控制器，将搜索功能设置为整个解决方案，并关闭区分大小写。我很确定代码不会自发运行:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:07:09.323

From the last edit, I guess that `Find all references` button would suit your needs. Unfortunately, you can't set breakpoint on the function declaration; however, if you set a breakpoint in a function body, you can then use `Call Stack` to find out where it was called.

If you still can't find it with it, i suggest you double-check your standard search function.

# c++ - 线程本身终止时如何删除提升线程对象？

> ID：10682205
> 
> 赞同：5
> 
> 时间：2012-05-21T08:58:58.263
> 
> 标签：c++, boost, boost-thread

当线程被添加到 boost::thread_group 时，例如：

```
boost::thread_group my_threads;
boost::thread *t = new boost::thread( &someFunc );
my_threads.add_thread(th); 
```

`my_threads`只有当对象超出范围时，才会删除所有创建的 boost::thread 对象。但是我的程序主线程在执行时会产生很多线程。因此，如果已经完成了大约 50 个线程，则程序使用大约**1.5Gb**的内存，并且仅在主进程终止时才释放该内存。

问题是：**线程函数完成后如何删除这些 boost::thread 对象？！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T10:32:46.317

您可以这样做，但请注意同步（最好使用共享指针来 boost::thread_group 而不是引用，除非您确定该线程组将存活足够长的时间）：

```
void someFunc(..., boost::thread_group & thg, boost::thread * thisTh)
{
  // do sth

  thg.remove_thread(thisThr);
  delete thisTh; // we coud do this as thread of execution and boost::thread object are quite independent
}

void run()
{
  boost::thread_group my_threads;
  boost::thread *t = new boost::thread(); // invalid handle, but we need some memory placeholder, so we could pass it to someFunc
  *t = boot::thread(
    boost::bind(&someFunc, boost::ref(my_threads), t)
  );
  my_threads.add_thread(t);
  // do not call join
} 
```

您还可以检查 at_thread_exit() 函数。

无论如何， boost::thread 对象的重量不应为 30 MB。

# python - Python遍历月份，在查询之间使用月份

> ID：10682208
> 
> 赞同：1
> 
> 时间：2012-05-21T08:59:19.407
> 
> 标签：python, django

我有以下模型：

```
Deal(models.Model):
    start_date = models.DateTimeField()
    end_date = models.DateTimeField() 
```

我想遍历给定的年份

```
year = '2010' 
```

对于一年中的每个月，我想执行一个查询以查看该月是否在 start_date 和 end_date 之间。

如何迭代给定的年份？使用月份进行查询？

```
SELECT * FROM deals WHERE month BETWEEN start_date AND end_date 
```

结果将告诉我是否在 2010 年 1 月和/或 2010 年 2 月等进行了交易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:11:19.560

> 如何迭代给定的年份？

您可以使用[python-dateutil 的 rrule](http://labix.org/python-dateutil#head-470fa22b2db72000d7abe698a5783a46b0731b57)。使用命令安装`pip install python-dateutil`。

示例用法：

```
In [1]: from datetime import datetime

In [2]: from dateutil import rrule

In [3]: list(rrule.rrule(rrule.MONTHLY, dtstart=datetime(2010,01,01,00,01), count=12))  
Out[3]: 
[datetime.datetime(2010, 1, 1, 0, 1),
 datetime.datetime(2010, 2, 1, 0, 1),
 datetime.datetime(2010, 3, 1, 0, 1),
 datetime.datetime(2010, 4, 1, 0, 1),
 datetime.datetime(2010, 5, 1, 0, 1),
 datetime.datetime(2010, 6, 1, 0, 1),
 datetime.datetime(2010, 7, 1, 0, 1),
 datetime.datetime(2010, 8, 1, 0, 1),
 datetime.datetime(2010, 9, 1, 0, 1),
 datetime.datetime(2010, 10, 1, 0, 1),
 datetime.datetime(2010, 11, 1, 0, 1),
 datetime.datetime(2010, 12, 1, 0, 1)] 
```

> 使用月份进行查询？

你可以像这样迭代几个月：

```
In [1]: from dateutil import rrule

In [2]: from datetime import datetime

In [3]: months = list(rrule.rrule(rrule.MONTHLY, dtstart=datetime(2010,01,01,00,01), count=13))

In [4]: i = 0

In [5]: while i < len(months) - 1:
   ...:         print "start_date", months[i], "end_date", months[i+1]
   ...:         i += 1
   ...:     
start_date 2010-01-01 00:01:00 end_date 2010-02-01 00:01:00
start_date 2010-02-01 00:01:00 end_date 2010-03-01 00:01:00
start_date 2010-03-01 00:01:00 end_date 2010-04-01 00:01:00
start_date 2010-04-01 00:01:00 end_date 2010-05-01 00:01:00
start_date 2010-05-01 00:01:00 end_date 2010-06-01 00:01:00
start_date 2010-06-01 00:01:00 end_date 2010-07-01 00:01:00
start_date 2010-07-01 00:01:00 end_date 2010-08-01 00:01:00
start_date 2010-08-01 00:01:00 end_date 2010-09-01 00:01:00
start_date 2010-09-01 00:01:00 end_date 2010-10-01 00:01:00
start_date 2010-10-01 00:01:00 end_date 2010-11-01 00:01:00
start_date 2010-11-01 00:01:00 end_date 2010-12-01 00:01:00
start_date 2010-12-01 00:01:00 end_date 2011-01-01 00:01:00 
```

用查询替换“打印”语句。随意调整它以适应您的需求。

可能有更好的方法，但可以完成这项工作。

# c# - 如何将参数传递给进程

> ID：10682212
> 
> 赞同：1
> 
> 时间：2012-05-21T08:59:40.160
> 
> 标签：c#, .net-4.0, process, arguments, main

有没有办法将字符串参数传递给从我自己的进程产生的进程。

我在我的主要应用程序中有：

```
Process.Start(Path.Combine(Application.StartupPath, "wow.exe"); 
```

`wow.exe`是我创建的另一个应用程序。我需要将参数传递给这个 exe（一个字符串）。我通常如何做到这一点？

我尝试了什么：

```
 ProcessStartInfo i = new //........
 i.Argument = "cool string";
 i. FileName = Path.Combine(Application.StartupPath, "wow.exe");
 Process.Start(i); 
```

在`wow`应用程序的主要部分中，我写道：

```
static void Main()
{
    //print Process.GetCurrentProcess().StartInfo.Argument;
} 
```

但是我从来没有在第二个应用程序的 Main 中找到我的字符串。[这是一个问题](https://stackoverflow.com/questions/344056/why-is-startinfo-processstartinfo-always-empty)，`why`但没有`how to solve it`..

**编辑：** `Environment.GetCommandLineArgs()[1]`它必须是。尽管如此，让它工作。接受@Bali 的回答，因为他首先提出了这个答案。谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:04:38.137

要获得传递的参数，您可以使用`string[] args`in your `Main`，也可以使用`Environment.GetCommandLineArgs`.

例子：

```
Console.WriteLine(args[0]); 
```

或者

```
Console.WriteLine(Environment.GetCommandLineArgs[0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:05:08.143

这是一个如何将参数传递给 exe 的示例：

```
static void Main()
{
   string[] args = Environment.GetCommandLineArgs();

   string firstArgument = args[0];
   string secondArgument = args[1];
} 
```

或者稍微改变一下你的主要方法：

```
static void Main(string []args)
{} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T09:05:23.257

你可能想要一个

```
static void Main(string[] args)
{
} 
```

where`args`包含您传入的参数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T09:01:30.643

在你的`wow.exe`program.cs

```
static void Main()
{
     //Three Lines of code 
} 
```

将其更改为

```
static void Main(string[] args)
{
     //Three Lines of code 
} 
```

`string[] args.`现在将包含传递给您的 exe 的参数。

或者你可以使用

```
string[] arguments = Environment.GetCommandLineArgs(); 
```

你的论点被空格打断了`" "`。

# gwt - Google 帐户访问令牌

> ID：10682223
> 
> 赞同：0
> 
> 时间：2012-05-21T09:00:41.860
> 
> 标签：gwt, oauth

如何延长谷歌帐户访问令牌的生命周期我使用 gwt-oauth2-0.2 来获取访问令牌，但问题是它很快就会过期。我想获得一个生命周期延长的令牌，最好不会过期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:43:36.803

Since this is GWT code, it's executed in the client using client-side JavaScript. It is not possible to get a long-lived access token from within client-side JavaScript. The issued tokens last 60 minutes currently-- and you can always get another token later without any user interaction (as the user has already approved the OAuth grant request). This should be sufficient for all client-side access to a user's data.

If you're comfortable using server-side code instead, you could use the [OAuth 2.0 flow for server-side web applications](https://developers.google.com/accounts/docs/OAuth2WebServer), and specify [`access_type=offline`](https://developers.google.com/accounts/docs/OAuth2WebServer#offline). This gives you an authorization code passed as a query parameter-- you then make a server-to-server call to exchange the authorization code for an access token. The first time you exchange a code for a given user, you'll also get a refresh token. Although the access token will expire, the refresh token can be used indefinitely to obtain new access tokens for that user by simply making a server-to-server call.

# hyperlink - 如何在 tumblr 上仅制作链接主页与站点范围内的链接

> ID：10682225
> 
> 赞同：1
> 
> 时间：2012-05-21T09:00:43.857
> 
> 标签：hyperlink, tumblr, ads

我一直在到处寻找可以让我的网站上的横幅广告仅显示在主页上的代码。现在他们出现在整个网站上，广告商要求我改变它。我没有成功地尝试查找正确的代码，但到目前为止它已被证明是不可能的。我只是想修复 Blogger 和 Wordpress，我需要一些 tumblr 的东西。

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:10:55.330

1.  **`div`仅在主页上***输出***某些- 不。**
***   **`div`仅在主页上***显示***某些— 是的，使用 css 片段。****

 ****## 如何`div`仅在主页上输出某些内容？

Tumblr 只有两种主要类型的页面：

*   `PermalinkPage`
*   `IndexPage`

`IndexPage`包括3个子类型：

*   `TagPage`
*   `DayPage`
*   `SearchPage`

Tumblr 没有`else`关于`if`块的声明，这就是为什么不可能只在主页上输出横幅广告——它会在其他索引页面上输出。

## 如何`div`仅在主页上显示某些内容？

您可以使用此提示隐藏`#banner`广告：`css`

**第 1 步。**在您的[html](http://www.tumblr.com/customize)的 Tumblr 标记中，将您的标签更改`body`为以下代码段：

```
<body class="
    {block:IndexPage}  index-page  {/block:IndexPage}
    {block:TagPage}    tag-page    {/block:TagPage}
    {block:DayPage}    day-page    {/block:DayPage}
    {block:SearchPage} search-page {/block:SearchPage}
"> 
```

**第 2 步。**然后确保`#banner`只为索引页输出：

```
{block:IndexPage} <div id="banner">...</div> {/block:IndexPage} 
```

**第 3 步。**之后，您将有四个类用于`#banner`div 的控制演示（显示/隐藏），此`css`代码段必须添加到[自定义页面](http://www.tumblr.com/customize)`Custom CSS`上的字段：

```
.index-page #banner {
    /* not neccessable, only for tip's logic demonstration */
    display: block;
}

.tag-page #banner,
.day-page #banner,
.search-page #banner {
    /* hide on all index pages except home index-page */
    display: none;
} 
```

*注意*：这个提示只隐藏`div`，不输出。

我发布了[`Edit HTML`按钮和`Custom CSS`](http://www.tumblr.com/customize)字段的屏幕截图，以展示第二种方法的简单性并让您振作起来。
![编辑html按钮](../Images/efc6fee965e59c8e33e6bfd6e276c849.png)![自定义 CSS 字段](../Images/5cc4b13330186b687693220476a70e4b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:46:16.353

你能用javascript只在主页上的页面吗？****

# f# - 无法在 Visual Studio 11 beta 的 F# 项目中编辑 XSD

> ID：10682226
> 
> 赞同：1
> 
> 时间：2012-05-21T09:00:45.617
> 
> 标签：f#, xsd, visual-studio-2012

当我尝试在 VS2010 中编辑包含在 F# 项目中的 XSD 文档时，它可以正常打开。但是当我尝试在 VS11 中编辑它时，VS11**仅**在设计模式下打开它。即使我明确选择“查看代码”，它也会在设计模式下打开 XSD，它只是不允许我将其作为代码进行编辑。但是，如果 XSD 包含在 C# 项目中（在同一解决方案中），它将作为代码打开，一切正常。所以我必须切换到VS2010 :(

如何修复它，还是 VS11 Beta 的“功能”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:17:37.413

感谢您的错误报告。该错误仍然出现在 RC 版本中，但我们已经意识到了这一点，并将尝试针对 RTM 进行修复。同时，我希望您可以将辅助 C# 项目添加到解决方案中，并使用指向 F# 项目下的“链接项”等文件，并“从 C# 项目”编辑它们以解决此问题（我没有尝试过它，但我希望这会起作用）。

# objective-c - Cannot FulFill a Fault Error, Possibly ARC related

> ID：10682230
> 
> 赞同：0
> 
> 时间：2012-05-21T09:00:53.567
> 
> 标签：objective-c, automatic-ref-counting, xcode4.3, fault

I have a singleton that contains variable called currentBusiness

I wired the currentBusiness property like this

```
-(Business *) currentBusiness
{
    if ([[NSThread currentThread] isMainThread])
    {
        DLog(@"I am a main thread");
    }
    else
    {
        assert (false);
        DLog(@"I am not a main thread");
    }

    CLog(@"_currentBusiness %@ withObjectID: %@", _currentBusiness, _currentBusiness.objectID);

    if (IsEmpty(_currentBusiness))
    {
        //assert(false);
    }
    if (_currentBusiness.isFault)
    {
        assert(false); //This is reached
    }
    return _currentBusiness;
} 
```

In addition, I put a category for business to trap will turn fault

```
- (void)willTurnIntoFault
{
    if ([[NSThread currentThread] isMainThread])
    {
        CLog(@"Faulting: %@", self); //called sometimes and during time of interest never called
        if (self == [BNUtilitiesQuick currentBusiness])
        {
            CLog(@"Current Business is Faulting");//never called
        }
    }

    [super willTurnIntoFault];
} 
```

So, at first everything is fine. As expected [BNUtilities currentBusiness] supply the viewcontroller with necessary information. However, at random (though almost certain) location, if I change view, say I want to activate call (with simple code). Suddenly

```
 if (_currentBusiness.isFault)
    {
        assert(false); //This is reached
    } 
```

There is absolutely nothing that I know that would change _currentBusiness. The underlying business is not deleted.

I also put tripwire on

```
-(void) setCurrentBusiness:(Business *)currentBusiness
{
    if ([[NSThread currentThread] isMainThread])
    {
        DLog(@"I am a main thread");
    }
    else
    {
        assert (false);
        DLog(@"I am not a main thread");
    }
    _currentBusiness = currentBusiness;
} 
```

and notice it's not reached. So _currentBusiness, out of nowhere suddenly become fault

This is the "normal" content of _currentBusiness

```
2012-05-21 15:42:24.952 BadgerNew[2292:17003] <0x87909a0 UtilitiesQuick.m:(69)> _currentBusiness <Business: 0x96a8980> (entity: Business; id: 0x9683b30 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Business/p15> ; data: {
    Aliases = "<relationship fault: 0x96b8540 'Aliases'>";
    Bookmark = 0;
    Building = "0x9683b30 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Business/p15>";
    City = "0x9694880 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/City/p2>";
    Distance = "689.0068307560858";
    DistanceGrouping = "0x96b9b90 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/DistanceGrouping/p890>";
    Districts =     (
        "0x92a6450 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/District/p4>"
    );
    Email = nil;
    ID = "universitas-indonusa-esa-unggul__-6.19_106.78";
    Images =     (
        "0x93edb50 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Image/p20>"
    );
    InBuildingAddress = nil;
    LatitudeLongitude = "0x96bd6a0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/LatitudeLongitude/p15>";
    Like = 0;
    OpeningHour = nil;
    PeopleCount = 295;
    Phones =     (
        "0x92dcbf0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Phone/p4>"
    );
    Price = 0;
    Promotions = "<relationship fault: 0x9693480 'Promotions'>";
    Rating = "0x96a0f00 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Rating/p15>";
    RatingGroup = "0x9682bd0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/RatingGroup/p15>";
    Reviews =     (
    );
    Street = "Jl. Arjuna Utara";
    Tags =     (
        "0x92b5c10 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Tag/p12>"
    );
    Tenants = "<relationship fault: 0x96e6fd0 'Tenants'>";
    TimeStamp = nil;
    Title = "Universitas Indonusa Esa Unggul";
    URLs = "<relationship fault: 0x968d930 'URLs'>";
    Website = nil;
    Zip = 11510;
    checkIn = nil;
    pinAndLineNumber = 2;
    timeLike = nil;
    updated = 1;
}) 
```

When it's faulted and break at

```
 if (_currentBusiness.isFault)
    {
        assert(false); //This is reached
    } 
```

This is the result:

```
2012-05-21 15:42:36.782 BadgerNew[2292:17003] <0x87909a0 UtilitiesQuick.m:(69)> _currentBusiness <Business: 0x96a8980> (entity: Business; id: 0x9683b30 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Business/p15> ; data: <fault>) 
```

So yea I do some po and

```
(lldb) po [_currentBusiness objectID]
error: warning: couldn't get required object pointer (substituting NULL): Couldn't load 'self' because its type is unknown
warning: couldn't get object pointer (substituting NULL): Couldn't load '_cmd' because its type is unknown
Execution was interrupted, reason: Attempted to dereference an invalid pointer..
The process has been returned to the state before execution. 
```

It's as if the content of _currentBusiness is changed. current_Business is still there. It still have the same address.

What the hell is going on?

And no, it's not just fault. It's a fault it can't get out.

So I added further tripwire

```
-(Business *) currentBusiness
{
    if ([[NSThread currentThread] isMainThread])
    {
        DLog(@"I am a main thread");
    }
    else
    {
        assert (false);
        DLog(@"I am not a main thread");
    }

    CLog(@"_currentBusiness %@ withObjectID: %@", _currentBusiness, _currentBusiness.objectID); //add ObjectID

    if (IsEmpty(_currentBusiness))
    {
        //assert(false);
    }
    if (_currentBusiness.isFault)
    {
        CLog(@"_currentBusiness.Title %@", _currentBusiness.Title); //Try to unfault
        assert(false);
    }
    return _currentBusiness;
} 
```

I bet I can't unfault.

So this is the result:

```
2012-05-21 16:08:37.950 BadgerNew[2625:17003] <0x9510470 UtilitiesQuick.m:(69)> _currentBusiness <Business: 0x9589410> (entity: Business; id: 0x95889d0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Business/p15> ; data: {
    Aliases = "<relationship fault: 0x953cdf0 'Aliases'>";
    Bookmark = 0;
    Building = "0x95889d0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Business/p15>";
    City = "0x958dde0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/City/p2>";
    Distance = "689.0068307560858";
    DistanceGrouping = "0x9582f40 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/DistanceGrouping/p924>";
    Districts =     (
        "0x874b0d0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/District/p4>"
    );
    Email = nil;
    ID = "universitas-indonusa-esa-unggul__-6.19_106.78";
    Images =     (
        "0x95c4be0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Image/p20>"
    );
    InBuildingAddress = nil;
    LatitudeLongitude = "0x958f430 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/LatitudeLongitude/p15>";
    Like = 0;
    OpeningHour = nil;
    PeopleCount = 295;
    Phones =     (
        "0x9237680 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Phone/p4>"
    );
    Price = 0;
    Promotions = "<relationship fault: 0x954bae0 'Promotions'>";
    Rating = "0x9584b50 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Rating/p15>";
    RatingGroup = "0x9586970 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/RatingGroup/p15>";
    Reviews =     (
    );
    Street = "Jl. Arjuna Utara";
    Tags =     (
        "0x8769120 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Tag/p12>"
    );
    Tenants = "<relationship fault: 0x955fd90 'Tenants'>";
    TimeStamp = nil;
    Title = "Universitas Indonusa Esa Unggul";
    URLs = "<relationship fault: 0x955f620 'URLs'>";
    Website = nil;
    Zip = 11510;
    checkIn = nil;
    pinAndLineNumber = 2;
    timeLike = nil;
    updated = 1;
}) withObjectID: 0x95889d0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Business/p15> 
```

and then

```
2012-05-21 16:08:42.797 BadgerNew[2625:17003] <0x9510470 UtilitiesQuick.m:(69)> _currentBusiness <Business: 0x9589410> (entity: Business; id: 0x95889d0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Business/p15> ; data: <fault>) withObjectID: 0x95889d0 <x-coredata://3993C454-9EE9-4EDC-B1FD-7073A9CEC194/Business/p15>
2012-05-21 16:08:42.797 BadgerNew[2625:17003] <0x9510470 UtilitiesQuick.m:(77)> _currentBusiness.Title (null)
(lldb) po [_currentBusiness objectID]
error: warning: couldn't get required object pointer (substituting NULL): Couldn't load 'self' because its type is unknown
warning: couldn't get object pointer (substituting NULL): Couldn't load '_cmd' because its type is unknown
Execution was interrupted, reason: Attempted to dereference an invalid pointer..
The process has been returned to the state before execution. 
```

So the address of _currentBusiness doesn't change. The objectID doesn't change. Somehow it becomes fault. Also calling _currentBusiness.Title results in (null)

This doesn't seem to happen before ARC update though I am not sure if the ARC caused it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:26:56.600

我已经发现了问题。每次调用托管对象上下文时都会重新创建它。愚蠢的错误。我会把这个作为答案，所以如果有人有同样的问题，他们应该先查一下。

托管对象上下文通常是延迟加载的。

# asp.net - 如何从 c# 更改 DataTable 中列的格式 DateTime

> ID：10682236
> 
> 赞同：2
> 
> 时间：2012-05-21T09:01:08.050
> 
> 标签：asp.net, datetime, foreach, datatable

在 DataTable 我有这种格式 mm/dd/yyyy hh:mm:ss AM 我想将格式更改为“dd.MM.yyyy”

```
 foreach (DataRow dr in dt.Rows)
      {
          dr["birth_day"]= String.Format("{0:dd.MM.yyyy}",dr["birth_day"]);
      } 
```

它给了我这个错误：

字符串未被识别为有效的 DateTime。无法在birth_day 列中存储 <25.04.1988>。预期类型是 DateTime。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:07:20.960

字符串格式需要多个参数，一个用于字符串，1-n 用于字符串中的每个变量。

例如

```
dr["birth_day"]= DateTime.Parse(String.Format("{0}:dd.MM.yyyy",dr["birth_day"])); 
```

虽然我仍然不确定这会给你想要的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:08:16.030

这表示您没有为占位符 {0} 提供和参数，如

```
dr["birth_day"]= DateTime.Parse(String.Format("{0}:dd.MM.yyyy",SomeValuethatgoesbeforethe colon)); 
```

但是，您的代码根本没有意义，要解析的日期在哪里？

# android - 在新线程中从服务注册广播接收器

> ID：10682241
> 
> 赞同：5
> 
> 时间：2012-05-21T09:01:25.810
> 
> 标签：android, multithreading, broadcastreceiver, scheduler

我有一个广播接收器，它开始一个长时间的操作（上传过程）。在从 Activity 类启动的服务代码中，我需要在一个新线程中注册这个接收器。

我已经检查了这篇文章[Android 的广播接收器是在新线程中开始的吗？](https://stackoverflow.com/questions/5394950/are-android-broadcastreceiver-started-in-a-new-thread)但我需要一个关于使用 Context.registerReceiver(BroadcastReceiver receiver, IntentFilter filter, String broadcastPermission, Handler scheduler) 的更具体的例子

实际上我需要知道如何从服务创建一个新线程并注册接收器并附加到这个线程。

非常感谢你。类风湿关节炎

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-21T09:28:56.563

在您的服务中`onCreate()`：

```
private Handler handler; // Handler for the separate Thread

HandlerThread handlerThread = new HandlerThread("MyNewThread");
handlerThread.start();
// Now get the Looper from the HandlerThread so that we can create a Handler that is attached to
//  the HandlerThread
// NOTE: This call will block until the HandlerThread gets control and initializes its Looper
Looper looper = handlerThread.getLooper();
// Create a handler for the service
handler = new Handler(looper);
// Register the broadcast receiver to run on the separate Thread
registerReceiver (myReceiver, intentFilter, broadcastPermission, handler); 
```

# iphone - iPhone - 如何使用我的纹理背景自定义 UINavigationBar 后退按钮

> ID：10682247
> 
> 赞同：0
> 
> 时间：2012-05-21T09:01:45.187
> 
> 标签：iphone, objective-c, ios, uinavigationbar, back-button

我可以自定义导航栏上的后退按钮，但为了让我显示左箭头形状，我是否需要专门使用左箭头创建自定义图像？

或者有一种方法可以使用带有箭头形状的原始后退按钮，而只需将我的背景图像应用到它上面？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:05:01.473

使用左箭头将**yourButton设置为自定义图像**

```
self.navigationItem.leftBarButtonItem =  [[[UIBarButtonItem alloc] initWithCustomView:yourButton] autorelease]; 
```

您不能修改原来的 BACK 按钮。

# java - 首先是什么 - InjectableProvider(s) 或 ExceptionMapper(s)？

> ID：10682249
> 
> 赞同：1
> 
> 时间：2012-05-21T09:01:49.523
> 
> 标签：java, jersey, jax-rs

我还没有找到上述问题的答案。如何**从 InjectableProvider 抛出异常**，并**在 ExceptionMapper 中捕获**，以便提供自定义响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:13:50.483

**亚历克斯**，**帕维尔**，

我自己尝试过：

*   Joda`DateTime`可注射供应商：`PerRequestTypeInjectableProvider<PathParam, DateTime>`
*   一个映射器，它将异常转换为可序列化的对象，以客户端接受的格式（XML、JSON 等）：`ExceptionMapper<WebApplicationException>`

根据我的实验，似乎任何`WebApplicationException`抛出的东西都会`InjectableProvider` **绕过异常映射器**，因此格式不正确。

我也试过：

*   添加一个`ExceptionMapper<ParamException>`，
*   重命名类，希望它们的连接顺序遵循字母顺序，

但到目前为止还没有运气。

@ **Pavel** /来自泽西岛的任何人：欢迎任何建议！

谢谢，

马克。

* * *

**更新**

如果将逻辑包装在`InjectableProvider`/`try`块`catch`中，那么在`catch`块中，诀窍是：

1.  创建您的可序列化 POJO /您的自定义响应，
2.  `javax.ws.rs.core.Response`用适当的状态码和/或媒体类型将其包装成一个，
3.  `WebApplicationException`将其作为实体参数传递给,。

@ **Pavel** / 来自泽西岛的任何人：有什么替代方法可以避免这种额外的逻辑并使事情“正常工作”？

# wcf - 使用 MVVM 模式将 WPF 网格绑定到 WCF 服务

> ID：10682250
> 
> 赞同：0
> 
> 时间：2012-05-21T09:01:51.663
> 
> 标签：wcf, mvvm, wpfdatagrid

![在此处输入图像描述](../Images/311e4c918ecdbc6298a52ab06bd530cb.png)我正在尝试使用 MVVM 将从 WCF 服务返回的数据绑定到 WPF 中的网格。当我在视图模型中使用 WCF 服务的逻辑时也是如此。

**代码背后：**

```
this.DataContext = new SampleViewModel(); 
```

**查看/XAML：**

```
<Window x:Class="Sample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
 <Grid>
    <DataGrid ItemsSource="{Binding Students}" AutoGenerateColumns="False" >
        <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Binding="{Binding ID}" />
            <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
            <DataGridTextColumn Header="Address" Binding="{Binding Address}" />
        </DataGrid.Columns>
    </DataGrid>
 </Grid>
</Window> 
```

**查看型号：**

```
public List<Student> Students {
        get {
            var service = new StudentServiceClient();
            var students = new List<Student>(service.GetStudents());
            return students;
        }
    } 
```

**学生服务：**

```
[ServiceContract]
public interface IStudentService {
    [OperationContract]
    IEnumerable<Student> GetStudents();
}

[DataContract]
public class Student {
    public string Name { get; set; }

    public int ID { get; set; }

    public string Address { get; set; }
} 
```

**学生服务.svc：**

```
public class StudentService : IStudentService {
    public IEnumerable<Student> GetStudents() {
        var students = new List<Student>();

        for (int i = 0; i < 3; i++) {
            students.Add(new Student {
                Name = "Name" + i,
                ID = i,
                Address = "Address" + 1
            });
        }

        return students;
    }
} 
```

当我运行该应用程序时，我没有在网格中看到蚂蚁记录..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:26:34.647

```
public List<Student> Students {
    get {
        var service = new StudentServiceClient();
        var students = new List<Student>(service.GetStudents());
        return students;
    }
} 
```

每次使用/读取 Students 属性时，此代码都会连接到服务器并检索学生。那会太慢了。

在 ViewModel 的构造函数中（或在单独的方法/命令中）加载学生，并从 getter 中返回此集合。

您的解决方案不起作用的原因可能是：

1.  List 不会通知 View 集合的变化；改用 ObservableCollection。

2.  当 Students 属性更改 ( `var students = new List<Student>(service.GetStudents());`) 时，不会向 View 发出该属性已更改的信号；在 ViewModel 上实现 INotifyPropertyChanged。

3.  确保服务返回数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:16:52.770

Are there any binding errors? Or maybe there is a serviceside problem, and the service returns no entries. Did you debug / breakpoint the property's getter and check the result?

# google-maps - Google Maps API - 以不透明度覆盖特定海拔的多边形（以显示洪水区域）

> ID：10682251
> 
> 赞同：3
> 
> 时间：2012-05-21T09:01:59.650
> 
> 标签：google-maps, polygon, elevation

使用Google Maps API，我正在尝试解决如何使用不透明度在特定海拔的Google地图上绘制多边形，以便*低于*多边形海拔的任何土地质量显示为突出显示而*高于*土地它不会显示为突出显示（我希望能够使用不透明度为 40% 的多边形来执行此操作。）

因此，例如，如果我在 95m 到 105m 的陆地上绘制 100m 的多边形，多边形中*低于*100m 的所有土地都应突出显示，而其*上方*的所有土地不应突出显示。

这是为了让我们的承保人能够看到，在水源以上的不同洪水位，保险涵盖的一处或多处财产是否会被淹没。

这可以在 Google 地球和 GE API 中轻松完成，但不幸的是，我们正在通过 Citrix 客户端将此应用程序部署到瘦客户端，该客户端不允许我们安装或使用 Google 地球插件......谈论让生活变得艰难！ ！:-(

我已经用谷歌搜索了无数次和多种方式，但一无所获 - 几乎开始认为它无法完成 - 非常希望有人能帮助我并证明我错了！

# client-server - 在 Unity3d 中在课堂上调用 www

> ID：10682260
> 
> 赞同：1
> 
> 时间：2012-05-21T09:02:20.460
> 
> 标签：client-server, unity3d

我有一些与服务器共享的方法，但是当我在类中的函数中使用 www -> 它不运行时，要检查我是否像在类中使用的代码一样使用 www -> 它运行.. 我不知道发生了什么，请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:51:22.080

创建一个继承 MonoBehaviour 的新类，然后调用它。

Javascript(unity) 方式示例 // 从时代广场的“星期五”外获取最新的网络摄像头 var url = "http://images.earthcam.com/ec_metros/ourcams/fridays.jpg"; function Start () { // 开始下载给定的 URL var www : WWW = new WWW (url);

```
 // Wait for download to complete
    yield www;

    // assign texture
    renderer.material.mainTexture = www.texture;
} 
```

[编辑] C# 方式的示例

```
/// Gets the response.
/// 
/// <param name="StrURL">The URL.
/// HTML source
public string GetResponse(string StrURL)
{
    string strReturn = "";
    HttpWebRequest objRequest = null;
    IAsyncResult ar = null;
    HttpWebResponse objResponse = null;
    StreamReader objs = null;
    try
    {

        objRequest = (HttpWebRequest)WebRequest.Create(StrURL);
        ar = objRequest.BeginGetResponse(new AsyncCallback(GetScrapingResponse),     objRequest);

        //// Wait for request to complete
        ar.AsyncWaitHandle.WaitOne(1000 * 60, true);
        if (objRequest.HaveResponse == false)
        {
            throw new Exception("No Response!!!");
        }

        objResponse = (HttpWebResponse)objRequest.EndGetResponse(ar);
        objs = new StreamReader(objResponse.GetResponseStream());
        strReturn = objs.ReadToEnd();
    }
    catch (Exception exp)
    {
        throw exp;
    }
    finally
    {
        if (objResponse != null)
        objResponse.Close();
        objRequest = null;
        ar = null;
        objResponse = null;
        objs = null;
    }
    return strReturn;
}

/// Gets the scraping response.
///
/// <param name="result">The result.
protected void GetScrapingResponse(IAsyncResult result)
{
    //here you will need to cast/parse the response into what ever type you require e.g. a texture, an xml file, an asset bundle, ect.
} 
```

像这样打电话

```
GetResponse('http://images.earthcam.com/ec_metros/ourcams/fridays.jpg'); 
```

[编辑]

基本上，Unity 中的 Javascript 文件自动继承自 MonoBehavior。

如果您绝对确定您不能/不会只创建一个继承 monobehaviour（示例 #1）的类来为您完成工作，那么您将询问如何对 url 执行正常的 XMLHttpRequest。

此处的 Javascript 示例：

```
var xmlHttp = null;

function GetServerInfo()
{
    var Url = "http://localhost";

    xmlHttp = new XMLHttpRequest(); 
    xmlHttp.onreadystatechange = ProcessRequest;
    xmlHttp.open( "GET", Url, true );
    xmlHttp.send( null );
}

function ProcessRequest() 
{
    if ( xmlHttp.readyState == 4 && xmlHttp.status == 200 ) 
    {
        if ( xmlHttp.responseText == "Not found" ) 
        {

        }
        else
        {
            var info = eval ( "(" + xmlHttp.responseText + ")" );
            //Here is where it will get super tricky. You will need to parse these objects into unity objects.
        }                    
    }
} 
```

真正复杂的部分是您需要将您的 http 响应解析为统一对象...

# php - 后端和前端的站点根目录

> ID：10682268
> 
> 赞同：1
> 
> 时间：2012-05-21T09:02:56.420
> 
> 标签：php

假设我有这个网站文件根结构：

*   前端 /home/username/public_html/
*   后端 /home/username/public_html/admin/

在前端文件夹中有一个名为 config.php 的文件。在这个文件中，我得到了我的网站的站点根目录，如下所示：

```
define('ROOT', dirname(__FILE__)); 
```

该文件还包含在前端和后端的两个索引文件 (index.php) 中。但是对于后端，根是 /home/username/public_html/admin/，实际上应该是 /home/username/public_html/。我怎样才能做到这一点，在一行中，在 config.php 中？

**乐：**

演示代码[http://pastebin.com/LGrrJzaV](http://pastebin.com/LGrrJzaV)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:10:55.980

[**FILE**](http://php.net/manual/en/language.constants.predefined.php)为您提供文件的完整路径和文件名。

[dirname()](http://php.net/manual/en/function.dirname.php)返回父目录的路径。

**所以，如果你使用：**

```
define('ROOT', dirname(__FILE__)); 
```

它为您提供当前脚本所在位置的目录结构。

**进入`admin/`并返回上一个文件夹：**

```
$path = dirname(__FILE__);

define("ROOT", $path.'/../');

// Outputs:  /home/username/public_html/ 
```

**在里面的一行`admin/`：**

```
define("ROOT", dirname(__FILE__).'/../'); 
```

* * *

# 已编辑

在一行中的两个位置具有相同的路径：

```
define("ROOT", (strpos(dirname(__FILE__), "admin")>=0) ? (str_replace("admin", "", dirname(__FILE__))) : (dirname(__FILE__))); 
```

**这将在 index.php 上输出：**

*   **前端**/home/username/public_html/ ->`/home/username/public_html`
*   **后端**/home/username/public_html/admin/ ->`/home/username/public_html`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:14:36.320

你可以使用

```
define('ROOT', $_SERVER['DOCUMENT_ROOT']); 
```

# perl - 将参数传递给 Test::Class Setup 方法

> ID：10682276
> 
> 赞同：0
> 
> 时间：2012-05-21T09:03:16.690
> 
> 标签：perl, testing, automation

我需要动态调用 selenium 中的浏览器。

为此，我需要将浏览器名称作为参数发送到`Test::Class`. 我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:39:37.383

我认为您想获得一个浏览器，然后将其重新用于一些测试，然后再将其销毁？因此，只需使用全局来保存您创建的浏览器。例如：

```
my $browser = '';
sub b_connect : Test(startup) {
   $browser = WWW::Selenium->new( host => "localhost",
                              port => 4444,
                              browser => "*iexplore",
                              browser_url => "http://www.google.com",
                            );
};

sub b_disconnect : Test(shutdown) {
  $browser->close()
}; 
```

只需在您的测试中使用 $browser 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:30:26.773

```
sub startup : Test( startup ) {

    my ($self) = @_;
    my $arg = shift;

     $self->{browser_type} = $arg->{browser};

    -------------------------------#some other code for myself

    $self->{browser} =
        Test::WWW::Selenium->new(
            host        => $self->{host},
            port        => $self->{port},
            browser     => $self->{browser_type},
            browser_url => $self->{test_url},
    ); 
```

在我的测试脚本中，我需要使用以下命令调用它

```
my $t1 =  Test::Class::Selenium::TestCases->new(browser=>$browser,);
Test::Class->runtests($t1); 
```

# javascript - jquery .load() 函数多次

> ID：10682277
> 
> 赞同：2
> 
> 时间：2012-05-21T09:03:17.183
> 
> 标签：javascript, jquery, html

如何使用**jQuery**多次加载 test.html 。

```
function loadScreen()
{
  $('#result').load('test.html');
} 
```

**main.html**

```
<div id='result'></div>
<input type="button" value="click me" onclick="loadScreen()"> 
```

**测试.html**

```
<body>
<p>
testing
</p>
</body> 
```

**现在的情况**

当我点击按钮点击我。它将在 main.html 测试中加载一次

**我想做的事**

当我单击按钮两次时，我该怎么做？

```
testing
testing 
```

并具有不同的 div id

第一次按钮单击显示测试 `<div id="result1">testing</div>` 第二次按钮单击显示测试 `<div id="result2">testing</div>`

它将在 id 处附加增量 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T09:07:03.000

`load()`将替换目标元素的内容，这就是它无法按您想要的方式工作的原因。

试试这个：

```
function loadScreen() {
    var divId = $("#result > div").length + 1;
    $('#result').append("<div></div>").attr("id", "result" + divId).load('test.html');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:06:35.280

然后是你应该使用的时候[`$.get()`](http://api.jquery.com/jQuery.get/)了，然后通过创建一个div [`$()`](http://api.jquery.com/jQuery/#jQuery2)，使用添加内容[`.html()`](http://api.jquery.com/html/#html2)和[`.appendTo()`](http://api.jquery.com/appendTo/)结果div。

```
var result = $('#result'),            //cache result box
    i = 0;

function loadScreen(){
    $.get('test.html',function(data){ //initiate get
        $('<div>',{                   //create div for return data
            id : 'result'+(++i)       //add attributes
        })
        .html(data)                   //add data
        .appendTo(result);            //append to result
    });
} 
```

# php - 发送到垃圾邮件的 codeigniter 电子邮件

> ID：10682278
> 
> 赞同：0
> 
> 时间：2012-05-21T09:03:23.953
> 
> 标签：php, email, codeigniter, spam

我的模型：

```
<?php
class email_model extends CI_Model {

    function __construct()
    {
        // Call the Model constructor
        parent::__construct();
    }

        public function sendEmail($from = null, $to = null, $subject = null, $message = null){

            $this->load->library('email');

            $config['protocol'] = 'sendmail';
            $config['mailpath'] = '/usr/sbin/sendmail';
            $config['charset'] = 'utf-8';
            $config['mailtype'] = 'html';
            $config['wordwrap'] = TRUE;

            $this->email->initialize($config);

            $this->email->from('email@mydomain.com', 'Website name');

            $this->email->to($to);

            $this->email->subject($subject);

            $this->email->message($message);

            $this->email->send();

        }
} 
```

我的域托管在 GoDaddy 上，我还在那里创建了一封电子邮件并将其重定向到我的 gmail 电子邮件...

为什么我的电子邮件被发送到垃圾邮件文件夹而不是收件箱？

编辑：我的电子邮件内容基本上是欢迎邀请

```
Hello $email

$website has invited you to join the website

to join visit the following link

$link_goes_here

Thanks, the team 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-21T18:40:17.937

如果您使用 HTML 来显示您的邮件，您必须确保您的邮件使用有效的 html 发送。您可以在此处验证您的邮件：http: [//validator.w3.org/](http://validator.w3.org/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-11T08:29:22.613

如果是，请联系我们表格.. 也许您可以尝试通过 Amazon SES 发送电子邮件，所以 google / yahoo 不认为它是垃圾邮件

# ruby-on-rails-3 - 为具有另一个嵌套子项的嵌套子项提交 AJAX 表单 (AssociationTypeMismatch)

> ID：10682287
> 
> 赞同：0
> 
> 时间：2012-05-21T09:03:47.160
> 
> 标签：ruby-on-rails-3, forms, activerecord

## 我的模型

我正在尝试为*Annotation*创建一个表单。这个注解属于一个*Map*，每个注解应该有一个*Boundary*。一张地图可以有很多注解。

![](../Images/a9a4fe39ffcd8a3237efd0385f67229b.png)

我首先通过让*Annotation*和*Map* `has_one` *Boundary*来创建关联，但后来我切换到使用 polymorphic `boundary_object`。无论如何，错误都是一样的。

```
has_one :boundary, :as => :boundary_object         # <= Map
has_one :boundary, :as => :boundary_object         # <= Annotation
belongs_to :boundary_object, :polymorphic => true  # <= Boundary 
```

* * *

## 视图和控制器

事情是这样的：首先我`Boundary.new`在这里创建了一个新的边界对象，因为我没有预先设置的注释对象，因为表单可以多次提交。

### `maps/show.html.erb`

```
<%= form_for([@map, Annotation.new], :remote => true ) do |f| %>
    <%= f.text_area :body, :cols => 80, :rows => 10, :style => "width: 500px" %>
    <%= f.fields_for Boundary.new do |b| %>
      <%= b.text_field :ne_x, :style => "display:none" %>
      <%= b.text_field :ne_y, :style => "display:none" %>
      <%= b.text_field :sw_x, :style => "display:none" %>
      <%= b.text_field :sw_y, :style => "display:none" %>
    <% end %>
<% end %> 
```

我也可以使用`f.fields_for :boundary`，如果我有这个`maps_controller.rb`：

```
@annotation = @map.annotations.build
@annotation.boundary = Boundary.new 
```

但结果还是一样。

### `annotations_controller.rb`

```
def create
  @annotation = Annotation.new(params[:annotation])
  respond_to do |format|
    if @annotation.save
      format.js { }
  end
end 
```

* * *

## 错误

提交该表单时，这会导致该`create`方法的第一行出现以下错误。

> ActiveRecord::AssociationTypeMismatch (Boundary(#2158793660) 预期，得到 ActiveSupport::HashWithIndifferentAccess(#2165684420))

显然，表格在没有整个边界的情况下起作用。这些是提交的参数：

```
{
  "utf8"=>"✓",
  "authenticity_token"=>"6GDF6aDc6GMR3CMP+QzWKZW9IV9gSxfdkxipfg39q7U=",
  "annotation"=>
  {
    "body"=>"foo bar",
    "boundary"=>
    {
      "ne_x"=>"11312", 
      "ne_y"=>"5919", 
      "sw_x"=>"6176", 
      "sw_y"=>"1871"
    }
  }, 
 "map_id"=>"1"
} 
```

我需要做什么才能立即为此注释创建*边界对象？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:18:48.687

根据您的协会：

**首先**，您需要构建一个新的边界对象（有关更多信息，请参见[此处）：](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

```
def show
  @map = ...
  @annotation = @map.annotations.build
  @boundary = @annotation.build_boundary # build new boundary
end 
```

**其次**，您需要编辑您的视图：

```
<%= form_for([@map, @annotation], :remote => true ) do |f| %>
  <%= f.text_area :body, :cols => 80, :rows => 10, :style => "width: 500px" %>
  <%= f.fields_for :boundary do |b| %>
    ...
  <% end %>
<% end %> 
```

**第三**，检查您在 Annotation 模型中是否为您的 Boundary 设置了 accept_nested_attributes_for **。**

```
accepts_nested_attributes_for :boundary 
```

然后表格将如下所示 - 请注意关联的名称需要`_attributes`：

```
<input … name="annotation[boundary_attributes][ne_x]" … /> 
```

# java - 递归方法在每一步都返回一个字符串？

> ID：10682288
> 
> 赞同：3
> 
> 时间：2012-05-21T09:03:48.607
> 
> 标签：java, algorithm, recursion, tree

我有一个轻微的算法问题。我想我错过了一些东西，但不能完全弄清楚是什么。

我想走到一棵包含字符串的树上，然后拿出一个唯一的字符串。

这是我要解析的树的图形示例。

![树示例](../Images/c562d17921e64d1cc84bd307172ec329.png)

我的树将具有三种不同类型的元素：

*   布尔运算符（OR、NOT、AND）=> BE
*   其他运算符（如 =）=> QO
*   叶子（最后一个元素）=> LEAF

我想结束这样的事情：

```
"LEAF QO LEAF BE LEAF QO LEAF " 
```

现在，我使用递归方法：我检查树的当前元素，并根据我拥有的元素类型在其子元素上重新运行该方法。对于每一步，我都会填充我的最终字符串。

公共类 SingleTest { static String[] booleanElements = {"or", "and", "not"};

```
public static void main(String[] args) throws Exception {
    CommonTree tree = (CommonTree)parser.parse().getTree();

    if(true){
        String where = "";
        printWhere(tree, where);
        System.out.println(where);
    }       

}   

/*
 * Print to where tests
 */
public static boolean isBooleanElement(CommonTree t){
    return Arrays.asList(booleanElements).contains(t.toString().toLowerCase());
}

public static String printWhere(CommonTree t, String where){
    //---------------------
    // Checking node type
    //---------------------

    // Boolean Element 
    if (isBooleanElement(t)){
        // Continue parsing the tree                
        for ( int i = 0; i < t.getChildCount(); i++ ) {
            printWhere((CommonTree)t.getChild(i), where+ "BE");
        }               
    }

    // Last element of tree (LEAF)
    else if(t.getChildCount() == 0 ){
        where = where + "LEAF";
    }

    // query operator
    else{
        // Continue parsing the tree    
        for ( int i = 0; i < t.getChildCount(); i++ ) {
            printWhere((CommonTree)t.getChild(i), where + "QO");
        }                   
    }

    //---------------------
    return where;
} 
```

我的问题是这段代码：

```
 String where = "";
        System.out.println(printWhere(tree, where)); 
```

返回“”（由于我的实现，这是合乎逻辑的）。

所以我的问题是，我怎样才能将非 void 字符串作为最终输出？

希望这足够清楚谢谢您的帮助

*请注意，此类仅用于测试目的，我知道将 static 放在任何地方都是不好的做法 :)*

**编辑 ：**

问题是（如预期的那样）由于我缺乏递归经验。这是我的最终代码：

```
public static String printWhere(CommonTree t, String where){
    //---------------------
    // Checking node type
    //---------------------

    // Boolean Element 
    if (isBooleanElement(t)){
        // Continue parsing the tree                
        for ( int i = 0; i < t.getChildCount(); i++ ) {
            where = printWhere((CommonTree)t.getChild(i), where) + "BE";
        }               
    }

    // Last element of tree (LEAF)
    else if(t.getChildCount() == 0 ){
        where = where + "LEAF";
    }

    // query operator
    else{
        // Continue parsing the tree    
        for ( int i = 0; i < t.getChildCount(); i++ ) {
            where = printWhere((CommonTree)t.getChild(i), where ) + "QO";
        }                   
    }

    //---------------------
    return where;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:12:07.640

问题是你的方法`printWhere`没有返回任何东西！您将值附加到新`where`字符串，但由于 Java 按值传递参数，因此当您离开该方法时，这个新创建的字符串将被丢弃。

使此方法返回字符串并`where`在其末尾返回。然后，将递归调用的结果与上一级的字符串连接起来。这就是递归的工作原理。

# android - 如何知道 android textview 是用文本设置的

> ID：10682291
> 
> 赞同：0
> 
> 时间：2012-05-21T09:03:59.160
> 
> 标签：android, textview

如果使用文本设置了android textview，是否会调用任何回调

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T09:11:27.060

将 a 添加`TextWatcher`到 TextView 以查看 TextView 中的文本更改：

```
TextView textView=(TextView)findViewById(R.id.txtview);
    textView.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {

             //here you will get changed text in textview
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T04:12:14.990

另一种方法是：

```
if( TextView.getText().length() != 0) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:08:09.983

You can simply check if your TextView has any text using the following:

```
TextView yourTextView = (TextView)findViewById(R.id.textViewID);
if(yourTextview.getText().toString().equals(""))
     //it is blank
else
     //it has text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:09:13.140

the best way to do this in my opinion is:

```
if(TextView.getText == null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T09:09:39.743

否。在运行时判断用户是否从代码中设置文本的唯一方法是创建一个实例

```
TextView tv = (TextView)findViewById(R.id.your_id) 
```

并检查此文本是否具有带有`getText()`方法的文本，并查看您最初的 textView 是否有文本。

# java - 在java中打印阿拉伯字符串

> ID：10682292
> 
> 赞同：7
> 
> 时间：2012-05-21T09:04:21.537
> 
> 标签：java, eclipse

我正在尝试在 java 中显示阿拉伯语文本，但它显示垃圾字符（例如：¤[ïß¯[î），或者有时在我打印时只有问号。我如何使它打印阿拉伯语。我听说它与 unicode 和 UTF-8 有关。这是我第一次使用语言，所以不知道。我正在使用 Eclipse Indigo IDE。

编辑：如果我使用 UTF-8 编码，那么 "¤[ïß¯[î" 字符将变为 "????????" 人物。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T09:13:54.303

对于初学者，你可以看看[这里](http://www.mobilefish.com/developer/eclipse/eclipse_quickguide_display_unicode_in_console.html)。这应该允许您在其控制台中使 Eclipse 打印 unicode（我不知道它是否是 Eclipse 支持开箱即用的东西，无需任何额外的调整）

如果这不能解决您的问题，您很可能遇到程序使用的编码问题，因此您可能希望以类似于以下方式创建字符串：

`String str = new String("تعطي يونيكود رقما فريدا لكل حرف".getBytes(), "UTF-8");`

这至少对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:06:37.437

If you embed the text literally in the code make sure you set the encoding for your project correctly.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T01:29:49.933

这适用于 Java SE、Java EE 还是 Java ME？如果这是用于 Java ME，如果您使用 LWUIT，则必须制作自定义 GlyphUtils。下载此文件： [http](http://dl.dropbox.com/u/55295133/U0600.pdf) ://dl.dropbox.com/u/55295133/U0600.pdf 查看 unicode 编码列表。并查看此线程： [https](https://stackoverflow.com/a/9172732/1061371) ://stackoverflow.com/a/9172732/1061371 在答案中（帖子）由 bernama Alex Kliuchnikau 编辑的 Mohamed Nazar，“以下代码可用于在 J2ME 中显示阿拉伯文本，`String s=new String("\u0628\u06A9".getBytes(), "UTF-8");`其中`\u0628\u06A9`两个阿拉伯字母的 unicode”查看 U0600.pdf 文件，因此我们可以看到 Mohamed Nazar 和Alex Kliuchnikau 举例说明在阿拉伯语中创建“ba”和“kaf”字符。

那么您必须考虑的最后一点是：“确保您的 UI 支持 unicode（我的意思是阿拉伯语）字符。” 像 LWUIT 还不支持 unicode（我的意思是阿拉伯语）字符。如果您的应用程序正在使用 LWUIT，您应该制作自定义代码。

# c# - 绑定到 WPF DataGrid - 每列一个实体

> ID：10682298
> 
> 赞同：2
> 
> 时间：2012-05-21T09:04:47.777
> 
> 标签：c#, wpf, data-binding

我目前的任务是为 WPF 应用程序构建一个类似电子表格的 GUI，我遇到了一些问题。本质上，我想按列绑定到数据网格，以便一列包含某一年的数据。因此，鉴于 2006 年是开始年，而 2009 年是结束年，我希望有 4 列，每列以列为基础显示给定年份的值。

这就是我现在在代码隐藏中的内容：

```
private Years m_YearsList;

    public Years YearsList
    {
        get { return m_YearsList; }
        set { m_YearsList = value; }
    }

    public MainWindow()
    {
        InitializeComponent();

        YearsList = LoadData();

        TestGrid.DataContext = YearsList;
    }

    public Years LoadData()
    {
        var personer = new Years{
            new Year
                {
                    Taxed = new Taxed {TaxedField = 10},
                    NumBuildings = new BuildingsCollection {NumBuildings = 25},
                    Area = new Area{AreaField = "NoWhere"},
                    DisplayName = "Person1"
                },
            new Year
                {
                    Taxed = new Taxed{TaxedField = 2},
                    NumBuildings = new BuildingsCollection{NumBuildings = 8},
                    Area = new Area{AreaField = "SomeWhere"},
                    DisplayName = "Person2"
                },
                new Year
                {
                    Taxed = new Taxed{TaxedField = 18},
                    NumBuildings = new BuildingsCollection{NumBuildings = 20},
                    Area = new Area{AreaField = "UpThere"},
                    DisplayName = "Person3"
                }
        };

        return personer;
    }
} 
```

Year 对象只是简单地包装了两个 int 和一个字符串。Years 对象是我绝望的镜头，看起来像这样：

```
public class Years : List<Year>{} 
```

我的 XAML：

```
<DataGrid x:Name="TestGrid" ItemsSource="{Binding}" CanUserAddRows="False" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Path=NumBuildings}" />
        <DataGridTextColumn Binding="{Binding Path=Taxed}" />
        <DataGridTextColumn Binding="{Binding Path=Area}" />
    </DataGrid.Columns>
</DataGrid> 
```

此代码生成：

![结果视图](../Images/72e4b19bd2901040b4a7a89d5607779a.png)

如您所见，Year 对象每列绑定到一个属性，而我基本上希望将它们绑定到一个对象，所有属性都在一个列中。不幸的是，我的 WPF 技能在这里缺乏。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:30:52.340

我发现[**这篇文章**](http://codemaverick.blogspot.com/2008/02/transpose-datagrid-or-gridview-by.html)讨论了创建数据表并将其转置（即将行换成列），然后将该对象绑定到数据网格。因此，编写一个从您的集合创建转置数据表并将此表绑定到数据网格的方法。

问题是这不会真正更新，所以如果你的数据应该由用户在数据网格中编辑，那么你就有问题了。

您可以直接更改数据源，也可以编辑数据网格的 ControlTemplate。

# c# - StringSplitOptions.RemoveEmptyEntries doesn't work as advertised

> ID：10682301
> 
> 赞同：30
> 
> 时间：2012-05-21T09:04:53.917
> 
> 标签：c#, .net, string, split

I've come across this several times in the past and have finally decided to find out why.

`StringSplitOptions.RemoveEmptyEntries` would suggest that it *removes empty entries*.

So why does this test fail?

```
var tags = "One, Two, , Three,   Foo Bar, , Day    , ";

var tagsSplit = tags.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(s => s.Trim());

tagsSplit.ShouldEqual(new string[] {
    "One",
    "Two",
    "Three",
    "Foo Bar",
    "Day"
}); 
```

The result:

```
 Values differ at index [2]
  Expected string length 5 but was 0\. Strings differ at index 0.
  Expected: "Three"
  But was:  <string.Empty> 
```

So it fails because instead of `"Three"`, we have an empty string – exactly what `StringSplitOptions.RemoveEmptyEntries` should prevent.

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-21T09:07:12.713

Most likely because you change the string after the split. You trim the values after splitting them, `RemoveEmptyEntries` doesn't consider the string `" "` empty.

The following would achieve what you want, basically creating your own strip empty elements:

```
var tagsSplit = tags.Split(',').
                  Select(tag => tag.Trim()). 
                  Where( tag => !string.IsNullOrEmpty(tag)); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-21T09:18:03.480

> Adjacent delimiters yield an array element that contains an **empty string ("")**. The values of the StringSplitOptions enumeration specify whether an array element that contains an empty string is included in the returned array.

`" "` by definition *is not empty* (it is actually *whitespace*), so it is not removed from resulting array.

If you use .net framework 4, you could work around that by using [string.IsNullOrWhitespace method](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)

```
var tagsSplit = tags.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
                .Where(x => !string.IsNullOrWhiteSpace(x))
                .Select(s => s.Trim()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-21T10:00:42.250

RemoveEmptyEntries 并不意味着空间。
您的输入字符串包含许多“空格”。您应该注意到“空间”不是空的。在计算机中，空格是一种特殊的 ASCII 码。所以代码：

```
var tagsSplit = tags.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(s => s.Trim()); 
```

方法：

1.  用 ',' 分割输入并删除空条目，不包括空格。所以你得到了一个包含一些空间元素的数组。
2.  然后你对每个元素进行修剪。空间元素变为空。

这就是你得到它的原因。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-18T18:25:15.247

尝试

```
var tagsSplit = tags.Split(new[] { ',', ' ' }, StringSplitOptions.RemoveEmptyEntries); 
```

这将用逗号和空格吐出，并消除空字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-18T16:52:31.860

我还搜索了一种在拆分*期间*排除空白条目的干净方法，但由于所有选项似乎都是某种解决方法，因此我选择在遍历数组时排除它们。

```
string[] tagsSplit = tags.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
foreach (string tag in tagsSplit.Where(t => !string.IsNullOrWhiteSpace(t))) { } 
```

我认为这看起来更干净，并且 - 作为奖励 -`.Split(...).ToArray()`可能会被省略。当然，仅当您可以在拆分后循环并且不必存储条目以供以后使用时，它才是一个选项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-02T18:02:11.150

由于这是一个非常常见的需求，我继续将最流行的答案包装在字符串扩展方法中：

```
public static IEnumerable<string> Split_RemoveWhiteTokens(this string s, params char[] separator)
{
    return s.Split(separator).
          Select(tag => tag.Trim()).
          Where(tag => !string.IsNullOrEmpty(tag));
} 
```

要拆分 ',' 作为其他示例，请像这样使用：

```
var result = yourString.Split_RemoveWhiteTokens(',') 
```

请注意，返回类型是 IEnumerable，因此您可以直接对返回结果执行其他 LINQ 查询。如果要将结果转换为列表，请调用 .ToList()。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-12T10:29:42.790

`EmptyEntries`这意味着两个定界符彼此直接相邻且中间没有任何内容的情况。如果不使用此选项，它将打印一个空白行来表示此分隔符。如果您使用“RemoveEmptyEntries”选项，它不会显示分隔符，除非分隔符之间确实存在某些内容。空格算作分隔符之间的内容。如果您尝试过：

```
One, Two,, Three, 
```

您应该会发现`RemoveEmptyEntries`消除了两个逗号之间的分隔符，直接从二到三。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-21T09:16:43.870

```
var tagsSplit = tags.Split(',')
                    .Where(str => str != String.IsNullOrWhiteSpace(str))
                    .Select(s => s.Trim()); 
```

# ajax - Jsf2 ajax render id not found

> ID：10682302
> 
> 赞同：0
> 
> 时间：2012-05-21T09:04:59.633
> 
> 标签：ajax, jsf-2, render

Why i get " contains an unknown id ':commentTextArea' - cannot locate it in the context of the component commentLink" error?

majorra 2.1.7

How i can render commentTextArea.

```
<ui:repeat var="parentComment" value="#{commentTree.parentCommentsWrapper}"> ....
                          <h:form>

                            <h:commandLink id="commentLink" value="comment"
                                style="height:20px;width:20px;padding: 0; margin: 0;"
                                action="#{parentComment.changeEditable}">
                                **<f:ajax render=":commentTextArea"></f:ajax>**
                            </h:commandLink>

                            </h:form>        <h:panelGroup id="commentTextArea">
                                <br />
                                <h:panelGroup rendered="#{parentComment.editable}">
                                    <h:form >
                                    <h:inputTextarea rows="2" cols="20"
                                        value="#{commentTree.newCommentText}" 
                                        style="font-family:Arial,Helvetica;font-size:12px;width:365px;margin-right: 4px;margin-left: -1px;">
                                    </h:inputTextarea>
                                    <h:commandButton id="newCommentButton" value="+"
                                        style="height:20px;width:20px;padding: 0; margin: 0;"
                                        action="#{commentTree.saveChildComment(parentComment.comment)}" >
                                    </h:commandButton>
                                    </h:form>
                                </h:panelGroup>
                            </h:panelGroup>
</ui:repeat> 
```

'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:43:41.600

id`:commentTextArea`是绝对 id 并且相对于视图根。但是，`ui:repeat`它是一个 NamingContainer 并“包装”您的`commentTextArea`. （查看浏览器中的html源代码，看看生成了什么id）

一个简单的解决方案是在“ui:repeat”中只使用一种形式。然后是相对id

```
<f:ajax render="commentTextArea"> 
```

（没有`:`）会工作。

# html - Forcing horizontal list 100% width

> ID：10682310
> 
> 赞同：0
> 
> 时间：2012-05-21T09:05:25.683
> 
> 标签：html, css

I have custom slider sitting at the top of my page but I'm having some issues. I would like the list items to stretch to the width of the screen but I'm having issues forcing this because the list items display below one another. I have set them to float and I have a div surrounding the list with an overflow hidden but to no avail.

I want it so that the current slide is the width of the screen regardless of size, possibly with a min width of 960px

HTML

```
<div id="slider">
    <div class="slides">
        <ul>
            <li class="slide">
                one
            </li>
            <li class="slide">
                two
            </li>
            <li class="slide">
                three
            </li>
        </ul>
    </div>
</div> 
```

CSS

```
#slider {
    position:relative;
    margin:0 auto;
    top:85px;
    width:100% !important;
}

.slides {
    margin:0 auto;  
    overflow:hidden;
    text-align:center;
    position:relative;
    left:0;
}

.slide {
    height:630px;
    width:100%;
    float:left;
    position:relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:30:05.277

试试这个......
添加一个像下面这样的css类。

```
.ul_class {
    margin: 0;
    padding: 0;
    list-style: none;
    float: left;
} 
```

之后，将这个新类 ( `ul_class`) 分配给您`<ul>`喜欢的对象。

```
<ul class="ul_class">
    ...
    ...
    ...
</ul> 
```

希望这会帮助你。

# tridion - Whether Ribbon tool bar button will work in Home page tab of Tridion?

> ID：10682315
> 
> 赞同：6
> 
> 时间：2012-05-21T09:05:39.670
> 
> 标签：tridion, tridion-2011

I implemented a Ribbon tool bar button for Format page of Tridion 2011 sp1 version. Now my requirement is to move the Ribbon button to Home page - Edit Group and make it work. For that I changed pageid to "FormatPage" and groupid to "EditGroup". It is enabled in home page. For Format page RTFfield I used "FaCommand". For Home page simple text field which command need to be used? Config. Code:

```
<ext:extension assignid="EditGroup" pageid="HomePage" name="RTF Extensions">
  <ext:group/>
  <ext:apply>
    <ext:view name="ComponentView">
      <ext:control id="ItemToolbar"/>
    </ext:view>
  </ext:apply>
</ext:extension>      

<!-- BUTTONS -->
<ext:extension pageid="HomePage" groupid="EditGroup" 
               name="Ribbon&lt;br/&gt;Button" assignid="InsertAttribute">        
  <ext:command>InsertAttribute</ext:command>
  <ext:title>Ribbon Button</ext:title>
  <ext:dependencies>
    <cfg:dependency>InsertAttributeExtension.InsertAttribute.Commands</cfg:dependency>
  </ext:dependencies>
  <ext:apply>
    <ext:view name="ComponentView">
      <ext:control id="ItemToolbar"/>
    </ext:view>
  </ext:apply>
</ext:extension> 
```

My button javascript:

```
Type.registerNamespace("RTFExtension.Commands");
RTFExtension.Commands.IA = function Commands$IA(name) {
    Type.enableInterface(this, "RTFExtension.Commands.IA");    
    this.addInterface("Tridion.Cme.Command", [name || "IA"]);
    this.addInterface("Tridion.Cme.FaCommand", [name || "IA"]);
}; 
```

For FormatPage and RTF field I used

```
FACommand 
```

But for simple text field which command need to be used?
Please help in this issue. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:58:25.327

我通常使用 firebug 在 tridion 对话框的 html 源中查找特定组的 PageId。HomePage 似乎是正确的。我还想如果该值为空白，这就是按钮将显示的位置。

如果这在短期内没有帮助，我将很快用一个解决方案更新这个答案。

# c# - Asynchronous HttpWebRequest not functioning

> ID：10682321
> 
> 赞同：1
> 
> 时间：2012-05-21T09:05:57.410
> 
> 标签：c#, asynchronous, httpwebrequest

I have this code which is meant to make a async call but it is not, please have a look at it and let me know where is it going wrong.

```
try
{
    byte[] bytes;
    Stream objRequestStream = null;
    bytes = System.Text.Encoding.ASCII.GetBytes(GetJSONforGetMenuDetails(Id, MenuIds));
    wReq = (HttpWebRequest)WebRequest.Create(new Uri("http://" + MobileWLCUrl + urlCreateCacheAPI));
    wReq.ContentLength = bytes.Length;
    wReq.ContentType = "text/x-json";
    wReq.ServicePoint.Expect100Continue = false;
    wReq.Method = "POST";
    objRequestStream = wReq.GetRequestStream();
    objRequestStream.Write(bytes, 0, bytes.Length);
    objRequestStream.Close();
    wReq.BeginGetResponse(new AsyncCallback(FinishWebRequest), null);
    //resp = WebAccess.GetWebClient().UploadString("http://" + MobileWLCUrl + urlCreateCacheAPI, GetJSONforGetMenuDetails(Id, MenuIds));
    //EngineException.CreateLog("Cache Created (for Menus: " + MenuIds + ") in API for LocationId: " + Id);
}
catch (Exception ex) { EngineException.HandleException(ex); }

void FinishWebRequest(IAsyncResult result)
{
    WebResponse wResp = wReq.EndGetResponse(result) as WebResponse;
    StreamReader sr = new StreamReader(wResp.GetResponseStream());
    String res = sr.ReadToEnd();
    EngineException.CreateLog("Cache Created (for Menus: " + MenuIds + ") in API for LocationId: " + LocId);
} 
```

Where is it going wrong? When I debug it, it waits for the call to get over to continue, but that should not happen.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:46:17.003

[`BeginGetResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse)记录为包括同步部分：

> BeginGetResponse 方法需要在此方法变为异步之前完成一些同步设置任务（例如 DNS 解析、代理检测和 TCP 套接字连接）。因此，永远不应在用户界面 (UI) 线程上调用此方法，因为它可能需要一些时间，通常是几秒钟。在某些未正确配置 webproxy 脚本的环境中，这可能需要 60 秒或更长时间。

除此之外，如果您在请求有时间完成*之前*`FinishWebRequest`调用（从技术上讲，如果您调用`EndGetResponse`） ，将会阻塞。*`EndGetResponse`*

 *`EndGetResponse`这是意料之中的，因为*需要*向您返回一个可以从中获取响应数据的对象——但是如果请求尚未完成，它如何返回这样的对象呢？*

# java - Swing components misplaced on JFrame when using Singleton

> ID：10682323
> 
> 赞同：0
> 
> 时间：2012-05-21T09:06:11.727
> 
> 标签：java, swing, singleton, jframe

Let's say I have a `JFrame` that is created through a singleton pattern like this :

```
private static Dist2PuncteFrame instance = null;

public static Dist2PuncteFrame getInstance() {

    if (instance == null)
        instance = new Dist2PuncteFrame();
    return instance;
} 
```

I call it through a `JMenuItem` like this:

```
dist2PcteItem.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            dist2PcteFrame = Dist2PuncteFrame.getInstance();
            dist2PcteFrame.setSomeParameters(blablabla);
            dist2PcteFrame.init();
        }
    }); 
```

Nothing complicated. The problem occurs when I open the window the second time.
My close button and the 2 input labels seem to move (labels left/right, button up/down).

![](../Images/a891467ea0eb4aafb5b7dabdc4e35b4c.png)

I have frames that are called the exact same way and they don't have this problem.
Anyone knows what seems to be the problem? I am using NetBeans 7.1.

# android - Audio/Video Conferencing Application in Android

> ID：10682324
> 
> 赞同：0
> 
> 时间：2012-05-21T09:06:16.923
> 
> 标签：android, chat, sip

I have to develop an application in android for audio/video conferencing. Which is the most efficient way of implementing this? While my research, I came across Android's SIP API. Can it be used for implementing the audio as well as video conferencing ? And If yes, what shall I use to stream the videos in real time? Shall I use any RTSP library for this?

Please Guide me.

Thanks, Rupesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:16:59.980

Okz for my practical project i used Spydroid which use `rtsp` protocol sdp less. you can customize it for audio use only. i will prefer spydroid because it uses pure java in which it reads `camera packets` and right them to linux socket and read them from there by `rtsp` server.

on other hand if i am not wrong sip uses `c/c++` codes too

# php - Displaying data from database in table

> ID：10682325
> 
> 赞同：0
> 
> 时间：2012-05-21T09:06:21.073
> 
> 标签：php, html-table

I am trying to display data in table form with 3 columns. Each should have a main category with some drop down lists. I get all the information to display but all is in one column and the drop down information does not display with the correct heading.

```
echo "<table>";

while ($row = mysql_fetch_array($result)) {
    $count = 1;

    if ($count = 1) {
        $sCatID = ($row['CatID']);
        echo "<tr valign='top'><td><b><a href='#" . $sCatID . "'>" . $sCatID . "</a></b><br>";
        // column 1 categories

        $result2 = mysql_query("SELECT * FROM test_prefixSubCat WHERE CatID=$sCatID");
        // sub-cats
        while ($row2 = mysql_fetch_array($result2)) {
            $sSub = ($row2['CatID']);
            $sSubID = ($row2['SubID']);
            echo "<dd><a href='#'>" . $sSub . "</a><br>";
            echo "</td>";
        }
        $count = 2;
    } elseif ($count = 2) {

        $sCatID = ($row['CatID']);
        echo "<td><b><a href='.$sCatID.'>" . $sCatID . "</a></b><br>";
        // column 1 categories

        $result2 = mysql_query("SELECT * FROM test_prefixSubCat WHERE CatID=$sCatID");
        // sub-cats
        while ($row2 = mysql_fetch_array($result2)) {
            $sSub = ($row2['CatID']);
            $sSubID = ($row2['SubID']);
            echo "<dd><a href='#'>" . $row2['Sub'] . "</a><br>";
            echo "</td>";
        }
        $count = 3;
    } elseif ($count = 3) {

        $sCatID = ($row['CatID']);
        echo "<td><b><a href='.$sCatID.'>" . $sCatID . "</a></b><br>";
        // column 1 categories

        $result2 = mysql_query("SELECT * FROM test_prefixSubCat WHERE CatID=$sCatID");
        // sub-cats
        while ($row2 = mysql_fetch_array($result2)) {
            $sSub = ($row2['CatID']);
            $sSubID = ($row2['SubID']);
            echo "<dd><a href='.$sSub.'>" . $sSub . "</a><br>";
            echo "</td></tr>";
        }

        $count = 1;
    }
}
if ($count = 2) {
    echo "<td>&nbsp;</td><td>&nbsp;</td></tr>";
} elseif ($count = 3) {
    echo "<td>&nbsp;</td></tr>";
}
echo "</table>"; 
```

It doesn't seem to close the rows and table correctly... And it is also putting some of the drop down items before it displays the first heading.

If i display it in only one column it is working fine.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:41:49.273

您应该在 if 语句中使用`==`而不是 single `=`。否则它将每次都执行，因为该条件始终为真。

# android - Good in-app purchase SDK for non-Google Play markets

> ID：10682326
> 
> 赞同：1
> 
> 时间：2012-05-21T09:06:24.847
> 
> 标签：android, in-app-purchase, in-app-billing

Our game relies on in-app purchases. Currently they use the Google's own system for that. But we get many requests from smaller app markets around the world to put our game there. But not having in-app purchases would seriously cripple the game mechanics.

But from what I've searched, there doesn't seem to be good alternatives. Amazon has it's own, but it's in invite only beta phase. Samsung apparently has it's own.. I would love to find a simple micropayment SDK to use in all these smaller app markets.

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:16:00.570

PayPal should work, although you will need to do some work to implement managed items on your own server. Some of the major 'smaller' markets have their own API on top of PayPal.

BTW, Amazon's in-app purchase library has been publicly available for a while: [http://www.amazonappstoredev.com/2012/04/announcing-the-in-app-purchasing-api-for-kindle-fire-and-other-android-devices.html](http://www.amazonappstoredev.com/2012/04/announcing-the-in-app-purchasing-api-for-kindle-fire-and-other-android-devices.html)

# asp.net-mvc-3 - MVC3 Range validation when value is larger then zero

> ID：10682331
> 
> 赞同：1
> 
> 时间：2012-05-21T09:06:39.463
> 
> 标签：asp.net-mvc-3, validation

I have a product order page where the minimum order is 2500\. I want to use the Range annotation validation in the model to validate this, but I also need the user to be able to select 0 of this product if they don't want any.

Now I use:

```
[Display(Name = "Item1")]
[Range(1000, int.MaxValue, ErrorMessage = "You need to order minimum {1} of Item1")]
public int OrderedItem1{ get; set; } 
```

Is there an easy way to accomplish this without creating a custom validator?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:26:34.940

是的，您可以使用正则表达式验证属性。

```
[RegularExpression(@"SomeRegExpression", ErrorMessage = "Min order error")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:38:22.803

我发现我可以使用这个正则表达式验证属性来做到这一点：

```
[RegularExpression(@"^(?:0|\d{5,}|[1-9]\d\d\d)$", ErrorMessage = "You need to order minimum 1000 of Item1")] 
```

感谢瑞安·约翰逊的帮助。

# imagemagick - 透明 PNG 和 JPEG 在 ImageMagick 中结合

> ID：10682332
> 
> 赞同：2
> 
> 时间：2012-05-21T09:06:46.577
> 
> 标签：imagemagick

我有一个案例，我需要在 JPEG 文件的顶部组合两个透明层。

这是一个示例设置：

```
wget -O bg.jpg http://www.grahamowengallery.com/photography/Flowers/roadside-flowers.jpg
wget -O layer.png http://www2.picturepush.com/photo/a/6271450/640/TRANSPARENT-EMBELLISHMENTS/pink-flower-transparent-png.png
wget -O logo.png http://upload.wikimedia.org/wikipedia/commons/0/0d/Imagemagick-logo.png 
```

我可以使用命令获得所需的结果：

```
composite bg.jpg \( -compose Overlay layer.png \) bg2.jpg
composite bg2.jpg \( -compose Overlay logo.png \) result.jpg 
```

这很好，但我想避免将 bg2.png 写入驱动器。

我试过：

```
composite bg.jpg \( -compose Overlay layer.png \) \( -compose Overlay logo.png \) result2.jpg 
```

但这会导致黑色背景上的 layer.png 。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:23:36.497

我无法`composite`工作，但`convert`可以工作：

```
convert.exe bg.jpg layer.png -compose Overlay -composite logo.png -compose Overlay -composite result2.jpg 
```

进一步阅读：[http ://www.imagemagick.org/Usage/compose/](http://www.imagemagick.org/Usage/compose/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:47:21.373

我目前无法对此进行测试，但您可以使用图层合并，并且您应该可以在代码中使用 URL。

```
$cmd = "http://www.grahamowengallery.com/photography/Flowers/roadside-flowers.jpg ".
" http://www2.picturepush.com/photo/a/6271450/640/TRANSPARENT-EMBELLISHMENTS/pink-flower-transparent-png.png ".
" http://upload.wikimedia.org/wikipedia/commons/0/0d/Imagemagick-logo.png -layers merge ";
exec(" convert $cmd result.jpg "); 
```

您没有为您的图层使用任何定位 - 您稍后会介绍吗？如果是这样，您可以在每个图像前面添加 -page +0+0 以将它们定位到您想要的位置。+0+0 将更改为位置。

# jquery - How to add JSON string to the array in jquery

> ID：10682335
> 
> 赞同：1
> 
> 时间：2012-05-21T09:06:55.823
> 
> 标签：jquery, asp.net-mvc, json

I have retrieve JSON from my controller of asp.net mvc :

```
{"ja":
[
{"Name":"ABC1","PictureName1":"my image name1","ID":1},   
{"Name":"ABC2","PictureName2":"my image name2","ID":2},
.......
]} 
```

In my view, I create one array in jquery :

```
var list_lastpage = []; 
```

And I want to push all the element of my JSON to my new array that I just creat.

Could anyone tell me, how can I push and display the JSON(ja) to the array (list_lastpage)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:09:08.977

Try this in the `success` handler of your AJAX request:

```
success: function(json) {
    list_lastpage.push(json.ja);
} 
```

If you have multiple `ja` objects in your returned JSON, try this:

```
success: function(json) {
    $.each(json.ja, function(i, val) {
        list_lastpage.push(val);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:10:24.267

为了将`ja`数组中的所有项目推入 list_lastpage，请尝试以下操作：

```
for (var i = 0, length = ja.length; i < length; i++) {
  list_lastpage.push(ja[i]);
} 
```

**更新**

我不确定您希望如何显示数组，但也许以下内容会有所帮助：

```
$.each(list_lastpage, function(i, val) {
  var div = $('<div></div>');
  div.attr('id', val.ID);
  div.attr('name', val.Name);
  div.val(val.PictureName);
  $('#containerId').append(div);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T09:11:33.920

在您的 Ajax 调用成功后，循环遍历 Json 字符串并添加到数组中：

```
 success: function (ja) {
            $.each(jQuery.parseJSON(ja), function () {
                list_lastpage.push(this);
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T10:45:34.850

除了其他答案之外，如果您想在视图中显示数组，您可以试试这个

```
 $(document).ready(function () {
    $.getJSON("/Home/userid", function (data) {
        var items = [];

        $.each(data, function (key, users) {
            items.push('<li id="' + users.UserId + '">' + users.UserName + '</li>');
        });

                $('<ul/>', {
                    'class': 'Users-list',
                    html: items.join('')
                }).appendTo('p');
           });
   });
 <p></p> 
```

# xml - XSLT 平面到分层

> ID：10682339
> 
> 赞同：1
> 
> 时间：2012-05-21T09:07:07.633
> 
> 标签：xml, xslt

我有一个带有 xml 数据的平面文件，其中包含父子信息我需要一个 xslt 来转换

```
<?xml version="1.0" standalone="yes"?>
<NewDataSet>
  <CRStructure>
    <objid>CA0D2594-183B-4E80-B2CA-4F915A1E2D32</objid>
    <cr_id>87</cr_id>
    <cr_parent>14</cr_parent>
  </CRStructure>
  <CRStructure>
    <objid>23BD80FA-7ACE-4111-9607-8AC0857868AF</objid>
    <cr_id>172</cr_id>
    <cr_parent>128</cr_parent>
  </CRStructure>
  <CRStructure>
    <objid>E381DE99-AD82-428E-A82B-63EB965BA2F4</objid>
    <cr_id>247</cr_id>
    <cr_parent>138</cr_parent>
      </CRStructure>
  <CRStructure> ............ 
```

到

```
<CR  xmlns="http://ait.com/cr/">

  <CRItems>

    <CRItem ObjectId="69230491-BCB8-4CD5-9FC3-2113FFE832EC">
     <CrId>1</CrId> 

        <CRItems>

        <CRItem ObjectId="2D425940-B3B1-432E-BDA4-6778C9AE8391">
            <CrId>2</CrId>
             <CRItems>

            <CRItem ObjectId="3F2DF482-0485-42C9-A1D2-FCFE0EF6B4E3">
                <CrId>22</CrId>
              </CRItem> ......... 
```

层次结构始终是三个级别，任何可以指出我正确方向的人。

**编辑**

试过这个，它似乎工作，

```
 <xsl:template match="//NewDataSet">
     <CR>
       <CRItems>
     <xsl:for-each select="CRStructure[cr_parent='0']">
       <CRItem>
         <xsl:attribute name="ObjectId">
           <xsl:value-of select="objid" />
         </xsl:attribute>
         <CRItems>
         <xsl:variable name="cridequ" select="cr_id" />
         <xsl:for-each select="//NewDataSet/CRStructure[cr_parent=$cridequ]">
           <CRItem>
             <xsl:attribute name="ObjectId">
               <xsl:value-of select="objid" />
             </xsl:attribute>
             <CRItems>
               <xsl:variable name="cridsub" select="cr_id" />
               <xsl:for-each select="//NewDataSet/CRStructure[cr_parent=$cridsub]">
                 <CRItem>
                   <xsl:attribute name="ObjectId">
                     <xsl:value-of select="objid" />
                   </xsl:attribute>
                 </CRItem>
               </xsl:for-each>
             </CRItems>                          
           </CRItem>
         </xsl:for-each>
         </CRItems>
       </CRItem>   
    </xsl:for-each>
         </CRItems>
     </CR>
  </xsl:template> 
```

不确定这是否是解决它的正确方法，似乎我发现的大多数建议是使用一些组合 `<xsl:template match....`但不确定如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:34:04.200

您提出的建议是正确的，但可以概括和简化为：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://ait.com/cr/" version="1.0">

    <xsl:output indent="yes"/>

    <xsl:key name="sons" match="CRStructure" use="cr_parent"/>
    <xsl:param name="maxLevels">3</xsl:param>

    <xsl:template match="NewDataSet">
        <CR>
            <CRItems>
                <xsl:apply-templates select="key('sons', 0)"/>
            </CRItems>
        </CR>
    </xsl:template>

    <xsl:template match="CRStructure">
        <xsl:param name="level">1</xsl:param>
        <xsl:if test="$level &lt;= $maxLevels">
            <CRItem ObjectId="{objid}">
                <CrId>
                    <xsl:value-of select="cr_id"/>
                </CrId>
                <CRItems>
                    <xsl:apply-templates select="key('sons', cr_id)">
                        <xsl:with-param name="level" select="$level  + 1"/>
                    </xsl:apply-templates>
                </CRItems>
            </CRItem>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

引入变量 $index 是为了避免在输入文档中有错误时永远循环；) ...

# android - unfortunately my app has stopped in android emulator?

> ID：10682342
> 
> 赞同：0
> 
> 时间：2012-05-21T09:07:19.210
> 
> 标签：android

. - List item

I am doing an application to add and delete the datails of employees to and from database. when i run it ,i am getting the message"unfortunately my app has stopped". pls help me to solve this problem. my logcat shows the following details:

```
05-21 14:11:45.799: E/AndroidRuntime(527): FATAL EXCEPTION: main
05-21 14:11:45.799: E/AndroidRuntime(527): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.aswathy.nicemployee/com.aswathy.nicemployee.NICemployeeActivity}: java.lang.ClassCastException: com.aswathy.nicemployee.NICemployeeActivity cannot be cast to android.view.View$OnClickListener
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.os.Looper.loop(Looper.java:137)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-21 14:11:45.799: E/AndroidRuntime(527):  at java.lang.reflect.Method.invokeNative(Native Method)
05-21 14:11:45.799: E/AndroidRuntime(527):  at java.lang.reflect.Method.invoke(Method.java:511)
05-21 14:11:45.799: E/AndroidRuntime(527):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-21 14:11:45.799: E/AndroidRuntime(527):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-21 14:11:45.799: E/AndroidRuntime(527):  at dalvik.system.NativeStart.main(Native Method)
05-21 14:11:45.799: E/AndroidRuntime(527): Caused by: java.lang.ClassCastException: com.aswathy.nicemployee.NICemployeeActivity cannot be cast to android.view.View$OnClickListener
05-21 14:11:45.799: E/AndroidRuntime(527):  at com.aswathy.nicemployee.NICemployeeActivity.onCreate(NICemployeeActivity.java:31)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.app.Activity.performCreate(Activity.java:4465)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-21 14:11:45.799: E/AndroidRuntime(527):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-21 14:11:45.799: E/AndroidRuntime(527):  ... 11 more 
```

****code of NICemployeeActivity.java is as following:****

```
 package com.aswathy.nicemployee;
 import android.app.Activity;
 import android.app.Dialog;
 import android.content.DialogInterface;
 import android.content.DialogInterface.OnClickListener;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.TextView;
 public class NICemployeeActivity extends Activity implements OnClickListener  {
 Button sqlUpdate, sqlView;
 EditText sqlName, sqlDepartment;

/** Called when the activity is first created. */
@Override
 protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      sqlUpdate = (Button) findViewById(R.id.bSQLUpdate);
      sqlName = (EditText) findViewById(R.id.etSQLName);
      sqlDepartment = (EditText) findViewById(R.id.etSQLDepartment);
      sqlView = (Button) findViewById(R.id.bSQLopenView);
      sqlView.setOnClickListener(this);
      sqlUpdate.setOnClickListener(this);
     }
 public void onClick(View arg0) {
    // TODO Auto-generated method stub
      switch (arg0.getId()) {
         case R.id.bSQLUpdate:
         boolean didItWork = true;
         try{
             String name = sqlName.getText().toString();
             String department = sqlDepartment.getText().toString();

             DBemployee entry = new DBemployee(NICemployeeActivity.this);
             entry.open();
             entry.createEntry(name, department);
             entry.close();
        }catch (Exception e)
    {
        didItWork = false;
    }finally{
         if (didItWork){
             Dialog d = new Dialog(this);
             d.setTitle("Heck Yea!");
             TextView tv = new TextView(this);
             tv.setText("sucess");
             d.setContentView(tv);
             d.show();
        }
    }
         break;
         case R.id.bSQLopenView:
         Intent i = new Intent("com.aswathy.nicemployee.NICview");
         startActivity(i);
         break; 
} 
```

}

```
 public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:10:38.540

看这里

```
05-21 14:11:45.799: E/AndroidRuntime(527): Caused by: java.lang.ClassCastException: com.aswathy.nicemployee.NICemployeeActivity cannot be cast to android.view.View$OnClickListener
05-21 14:11:45.799: E/AndroidRuntime(527):  at com.aswathy.nicemployee.NICemployeeActivity.onCreate(NICemployeeActivity.java:31) 
```

现在打开您的`NICemployeeActivity.java`文件，并检查第 31 行。您正在将类型的对象转换`NICemployeeActivity`为`View`，但您不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T17:09:00.023

尝试导入

android.view.View.OnClickListener 而不是 import android.content.DialogInterface;& import android.content.DialogInterface.OnClickListener;

可能以上进口可能有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:28:09.940

您必须更改 RAM 大小，然后重新启动模拟器。

然后它将成功运行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-21T09:16:57.457

You need to add activity to manifest.xml file while you are creating new activity.

# javascript - emberjs bindings and jwysiwyg

> ID：10682345
> 
> 赞同：1
> 
> 时间：2012-05-21T09:07:37.980
> 
> 标签：javascript, ember.js, jwysiwyg

I would like to use jwysiwyg jQuery plugin [https://github.com/akzhan/jwysiwyg](https://github.com/akzhan/jwysiwyg) with a Ember.TextArea [http://emberjs.com/](http://emberjs.com/), but I can not seem to get the bindings to work :(

Consider the example below, I have used the runloop thingy to call the .jwysiwyg jQuery plugin after the bindings have fired (so it contains the correct data).

I am unsure how to describe my problem, but in simplistic terms, I can not get the data to flow the other way ... ie. when I update the data in the text area (now an html editor) the model does not get updated.

```
<script>
    App = Ember.Application.create();

    App.entry = Ember.Object.create({
      sometext: "some demo text in here"
    });

    App.HTMLField = Ember.TextArea.extend({ 
        valueBinding: "App.entry.sometext",
        didInsertElement: function() {
            this._super();
            Ember.run.schedule('actions', this, function(){
                this.$().wysiwyg();
            });
        }
    });
</script>

<!-- place view in page -->
<script type="text/x-handlebars">
    <p>
      {{App.entry.sometext}}
    </p>
    <p>
      {{view App.HTMLField}}
    </p>
</script> 
```

Does anyone know of a way around the problem? .. suggestions of a workaround? .. any pointers? ... anything that might help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:12:14.983

应该这样做：

```
App.HTMLField = Ember.TextArea.extend({
    didInsertElement: function() {

        this._super();

        var self = this;
        Ember.run.schedule('actions', this, function(){
            this.$().wysiwyg({
                events: {
                    save: function( ) {
                        var c = this.getContent();
                        self.set('value', this.getContent() );
                    },
                },
            });
        });
    }
}); 
```

# ruby-on-rails - Github 中的友好 URL

> ID：10682346
> 
> 赞同：2
> 
> 时间：2012-05-21T09:07:39.413
> 
> 标签：ruby-on-rails, url, rails-routing

Github 是如何设法获得代表用户存储库的友好 URL 的？`abc` 对于由 username调用的项目`foo`，他们如何使用如下 URL `http://github.com/foo/abc`：. 他们是否`abc`从 URL 中的标题中获取数据库的模型（这听起来不合理，因为他们正在修改标题）。`abc`他们如何传输可以获取并在视图中显示的存储库的唯一 ID ？

我问的原因是我面临着创建更友好的 URL 来查看资源的类似问题。MongoDB 的对象 ID 很长，使 URL 看起来很可怕。有解决方法吗？所有演示资源的 CRUD（或 REST）URL 的教程总是包含对象的唯一 ID（例如`http://mysite.org/post/1`，或`http://mysite.org/post/1/edit`. 有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T08:45:32.563

没有看过他们的代码，我无法确切地告诉你他们是如何做到的，但如果你使用的是 Rails，至少有两个 Ruby gem 会给你类似的结果：

看看[Slugged](https://github.com/Sutto/slugged)和[friendly_id](https://github.com/norman/friendly_id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T19:39:12.720

[http://github.com/foo/abc](http://github.com/foo/abc)是唯一的存储库标识符（用于该存储库的主分支）。我假设他们在某个地方有一张看起来像这样的桌子：

```
repository-id | user-id | project-id 
```

并且只是根据用户和项目而不是存储库ID进行查找。

您需要在内部和用户友好的 id 之间进行一些特定于域的映射，但您需要确保这是 1:1 映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:31:51.570

在修改应用程序以使用友好的 url 时，请参阅方法、gem 和常见问题的解决方案。

[http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)

（尽管 Ryan Bates 值得为此获得代表 +）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T14:37:46.713

我使用 FriendlyID 和[Nested Resources](http://guides.rubyonrails.org/routing.html#nested-resources)模拟了这样的结构。

本质上，使用友好的 ID 来获取`to_param`路由中的 -ish slug，然后设置嵌套资源。以 GitHub 为例：

*路线.rb*

```
resources :users do
  resources :repositories
end 
```

然后在您的控制器中，例如，对于存储库，您可以检查是否存在`params[:user_id]`并使用它来确定路由中的用户。我检查存在的原因是因为我做了类似（大致）的事情：

```
/myrepositories/:repository_id
/:user_id/:repository_id 
```

所以我的控制器会：

```
def show
  @user = params[:user_id] ? User.find(params[:user_id]) : current_user
end 
```

[我在这里](http://jasoncodes.com/posts/rails-3-nested-resource-slugs)按照本教程开始使用同一个项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T15:52:57.090

如果 Web 服务器执行此操作（例如 Apache），这称为*URL 重写*，而当它发生在 Web 应用程序框架（例如 Ruby on Rails）中时称为*路由。*

[http://www.sinatrarb.com/intro#Routes](http://www.sinatrarb.com/intro#Routes)
[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# c# - Double click event in a treeview

> ID：10682357
> 
> 赞同：0
> 
> 时间：2012-05-21T09:08:23.750
> 
> 标签：c#, asp.net, events, treeview, double-click

My client requirement is to use single click to select a node and then double click to transfer the node to another treeview. Is this possible with the .NET treeview control?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:38:08.687

恐怕asp.net树视图控件不支持吧。对于这类问题，我建议2个解决方案：

1.  使用第三控制。大多数商业控件提供更多功能。
2.  使用纯客户端控制。通常你可以在 jQuery 中找到它们。但是您需要为服务器端代码做一些映射工作。

# iphone - Sync Events to available mail accounts in iphone

> ID：10682365
> 
> 赞同：1
> 
> 时间：2012-05-21T09:08:50.663
> 
> 标签：iphone, ipad, ios5

I am trying to sync Events added by my code in calendar application to available mail accounts. I just wanted to confirm that, is it possible in ios5?? I am trying to search for it but not able to find good solution for this. Any one having idea about this??

And I have one more question to ask that is, I am using ios5 new function which create new calendar in iphone's calendar application. Whenever I creates calendar of type local, I am able to create it. But I cant see that calendar in calendar list. Because of some reason it gets hide. Any idea about this??

Thank you in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:57:11.503

首先在您的项目中添加 MessageUI 框架并将这两个导入您的文件中

```
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h> 
```

然后制作一个按钮以在 xid 中引用邮件并将其与 IBAction 链接（如下所示）：

```
-(IBAction)emailSettings:(id)sender{

Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
if (mailClass != nil)
{
    // check whether the current device is configured for sending emails
    if ([mailClass canSendMail])
    {
        [self displayComposerSheet];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"EMAIL" message:@"No Settings For Email" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
      }
    }

}

-(void)displayComposerSheet 
{
  MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];

    picker.mailComposeDelegate = self;
    [picker setSubject:@"StampedeBreakfast!"];

    // Set up recipients
    NSArray *toRecipients = [NSArray arrayWithObject:@"first@example.com"]; 
    NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com", nil]; 
    NSArray *bccRecipients = [NSArray arrayWithObject:@"third@example.com"]; 

    [picker setToRecipients:toRecipients];
    [picker setCcRecipients:ccRecipients];  
    [picker setBccRecipients:bccRecipients];

    // Fill out the email body text
    NSString *emailBody = [NSString stringWithFormat:@"Hey! This is my Email Body"];
    [picker setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:picker animated:YES];
 }

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   

switch (result)
{
    case MFMailComposeResultCancelled:
        NSLog( @"Result: canceled");
        break;
    case MFMailComposeResultSaved:
        NSLog(@"Result: saved");
        break;
    case MFMailComposeResultSent:
         NSLog(@"Result: sent");
        break;
    case MFMailComposeResultFailed:
        NSLog( @"Result: failed");
        break;
    default:
         NSLog(@"Result: not sent");
        break;
}

[self dismissModalViewControllerAnimated:YES];
} 
```

希望对你有帮助！！

# jquery - 回调函数和嵌套函数一样吗？

> ID：10682367
> 
> 赞同：4
> 
> 时间：2012-05-21T09:09:00.570
> 
> 标签：jquery, jquery-ui, callback, jquery-callback, nested-function

我一直在用不同的语言编程。最近，我有机会开始了解`jQuery`。我正在阅读回调函数，我理解它的含义（以一种特定的方式做事，一个接一个。）我有点困惑是否将它们与嵌套函数联系起来？不是一样的吗？请帮助清除概念。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:12:30.270

回调函数是在操作完成时调用的任何函数。它在哪里定义并不重要：你可以创建一个局部作用域的函数、一个全局作用域的函数等等。

以回调`$.ajax`为例，`success`回调在哪里：

```
function handleSuccess(data) {
   $(document.body).append(data);
}

function doAjaxCall() {
   $.ajax({url: 'some/path', success: handleSuccess });
} 
```

在功能上等同于：

```
function doAjaxCall() {
   var handleSuccess = function(data) {
       $(document.body).append(data);
   }

   $.ajax({ url: 'some/path', success: handleSuccess });
} 
```

在功能上等同于：

```
function doAjaxCall() { 
   $.ajax({ url: 'some/path', success: function(data) {
       $(document.body).append(data);
    }
   });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:21:10.820

回调函数只是一个执行回调的函数。:) 所以首先你需要调用，这实际上是任何操作。考虑这个例子：

```
$.ajax({
    url: '/test/'
}); 
```

这个方法调用我们的服务器。现在操作是异步的——我们不知道服务器什么时候响应。但我们确实知道它将给我们什么样的数据。所以你定义了回调——服务器响应后你要执行的操作。在这种情况下，您可以定义`success`回调：

```
$.ajax({
    url: '/test/',
    success: function(res) {
        console.log(res);
    }
}); 
```

回调不必是异步的。考虑这个例子

```
function test(data, callback) {
    if (callback && $.isFunction(callback))
        callback(data);
} 
```

jQuery 方法`isFunction`只检查是否`callback`是一个函数。现在你可以`test`这样打电话

```
test('test_string', function(str) {
   console.log(str);
}); 
```

作为第二个参数传递的函数是回调。

所以基本上回调只是一个作为参数传递给另一个函数的函数。主要用于异步操作，但不仅限于（生活示例：`forEach`Array 对象的方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T09:28:04.927

如果我错了，请纠正我，但我认为问题是：

```
$("#someDiv").fadeIn(200, function(){
        //do some stuff 
    });

vs

$("#someDiv").fadeIn(200, callbackFunction);
function callbackFunction()
{
    //do some stuff
} 
```

（很抱歉将此作为答案而不是评论发布，但评论没有代码格式）

# css - CSS颜色悬停错误

> ID：10682372
> 
> 赞同：0
> 
> 时间：2012-05-21T09:09:15.653
> 
> 标签：css, font-face, webfonts

我在顶部菜单中使用 Allegro 字体，**当我将鼠标悬停在它上面时出现问题，Chrome 和 Safari 中颜色不显示全宽**:( 您可以在此链接 [http://preview.86solutions.com/fairpart上进行测试](http://preview.86solutions.com/fairpart)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:00:39.547

我猜你的字体有问题。当您向元素添加更多 padding-right 时，它看起来很好。

```
.menu a {
color: black;
padding-right: 20px;
} 
```

自己看：
为元素添加边框，它将在右侧切断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:41:04.997

在 chrome 和 IE 中看起来都不错。我不知道你现在使用的是什么版本，我已经在 chrome 19.0.1084.82 和 IE8 和 IE9 中检查了这个演示。我看过你的代码，一切看起来都很好。

但是，IE 不支持 font-family 继承属性。如果你仍然有问题，你应该像这样修改你的 style.css：

```
 .menu a:hover,.menu a:active  {
                     font-family: "Allegro"; /* because IE doesn't suprort inherit */ 
                 text-decoration:none;
                  color:#c4c04d;
                      } 
```

希望能帮助到你 ！

# mercurial - 在 Mercurial repo 中更改修订版 0 的分支名称

> ID：10682373
> 
> 赞同：0
> 
> 时间：2012-05-21T09:09:15.707
> 
> 标签：mercurial, branch

Mercurial 存储库有两个源自修订版 0 的分支。分支名称是 2x 和 4x。Rev. 0 本身属于分支 4x。

如何将 Rev. 0 移动到分支 2x 以保持其他一切都相同？

PS。我认为这是完全可能的，因为 Rev. 0 对以前的版本没有任何依赖关系。聚苯乙烯。这种情况发生在从组织不正确的 SVN 转换整个存储库之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:38:44.963

如果不更改变更集哈希 (ID)，则无法更改分支名称。更改变更集哈希还需要更改所有**后代**变更集。因此，修订 0 没有任何祖先变更集也无济于事 - 使事情复杂化的是子变更集。

我的建议：保持原样。请务必阅读[有关命名分支的建议，以](http://mercurial.selenic.com/wiki/StandardBranching#What_not_to_do)获得一些好的工作流程建议。

# design-patterns - 我们如何将 OCP 与委托一起使用？

> ID：10682374
> 
> 赞同：0
> 
> 时间：2012-05-21T09:09:21.567
> 
> 标签：design-patterns, open-closed-principle

有很多在继承的帮助下使用 OCP 的示例。但我很困惑我们如何将 OCP 与委派一起使用。任何人都可以分享任何样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:13:17.477

[您可以像模板模式](http://en.wikipedia.org/wiki/Template_pattern)一样拥有一个委托给派生类的基类。这是通过允许派生类开放扩展，但基类仍将关闭修改。

这是 C++ 中的一个示例：

```
class BaseClass
{
public:
    void doStuff() {
        doStuff1(); // delegating to derived class

        // do base class stuff here

        doStuff2(); // delegating to derived class

        // do more base class stuff here

        doStuff3(); // delegating to derived class
    }

protected:
    virtual void doStuff1() = 0;
    virtual void doStuff2() = 0;
    virtual void doStuff3() = 0;
};

class DerivedClass1 : public BaseClass
{
protected:
    void doStuff1() { /* your impl here */ }
    void doStuff2() { /* your impl here */ }
    void doStuff3() { /* your impl here */ }
};

// Implement as many other derived classes as you wish 
```

请注意，您不必修改 BaseClass（它对 mods 关闭）并将其委托给派生类，并且可以实现更多派生类（对扩展开放）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T21:51:20.830

如果我正确获得“委托”，这可能看起来像这样（C#）：

```
class Product
{
    public decimal Price {get;set;}
}

class Basket
{
    IEnumerable<Product> _products;
    Func<Product, decimal> _taxCalculator;

    public Basket(IEnumerable<Product> products, Func<Product, decimal> taxCalculator)
    {
        _products = products;
        _taxCalculator = taxCalculator;
    }

    public decimal CalculateBasketValue()
    {
        decimal sum = 0;
        foreach (var product in _products)
        {
            sum += product.Price + _taxCalculator(product);
        }
        return sum;
    }
}

public static void Main()
{
    var products = new []
    {
        new Product { Price = 100 }
    };
    var twentyPercentTax = new Func<Product, decimal>(product => product.Price * 0.2m);
    var basket = new Basket(products, twentyPercentTax);
    Console.WriteLine(basket.CalculateBasketValue());
} 
```

该类已关闭计算篮子的价值。但是，它对计算税收的方式是开放的。计算税收委托给 taxCalculator。您可以轻松拥有一堆税收计算器，并根据国家或其他任何内容选择其中一个。

# javascript - 查询生成器的 Javascript 正则表达式

> ID：10682381
> 
> 赞同：1
> 
> 时间：2012-05-21T09:09:44.107
> 
> 标签：javascript

过去可能有人问过这个问题，但我找不到合适的答案。我正在寻找的是一种从 sql 查询中提取参数的方法，如下所示。查询将始终是一个 EXEC 语句，后跟查询名称和可能的参数。

这是我可能收到的示例

```
EXEC [dbo].[myProcedure] @Param1 
```

这也可以如下

```
EXEC [dbo].[myProcedure] @Param1, @Param2, @Param3 
```

这些是输入将采用的唯一查询类型。至于我为什么要这样做，那是另一个问题，我已经准备好沿着这条路走下去了。

我正在寻找的是能够获取上述字符串并生成一个值数组，例如

```
['@Param1','@Param2','@Param3',....] 
```

我最初尝试使用简单的 while 语句进行解析，但我似乎在那里遇到了很大的问题。

我希望这个问题是有道理的，

干杯，

尼科

**[编辑]**

使用以下语句对此进行排序

```
function eParams(e) {
    var i = e.indexOf('@');
    if (i <= 0)
        return;
    e = e.substring(i);
    var p = e.split(',');
    var eList = [];
    var s = '';
    for (var i = 0, j = p.length - 1; i <= j; i++) {
        var sP = p[i].trim();
        if (sP.indexOf('@') < 0)
            continue;
        eList.push(sP);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:14:43.747

```
var str = 'EXEC [dbo].[myProcedure] @Param1, @Param2, @Param3';
(str).match(/(@[^\s,]+)/g); 
```

将返回一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:12:45.307

```
var s = "EXEC [dbo].[myProcedure] @Param1, @Param2, @Param3";
var i = s.indexOf('@');
var a = s.substr(i).split(/\s*,\s*/); 
```

（省略错误检查）

# java - 获取小数点后的数字Java

> ID：10682382
> 
> 赞同：-1
> 
> 时间：2012-05-21T09:10:04.687
> 
> 标签：java, floating-point

> **可能重复：**
> [Java 程序中奇怪的浮点行为](https://stackoverflow.com/questions/327544/strange-floating-point-behaviour-in-a-java-program)
> [为什么 JSP/JSTL 除以 1000 有时会产生余数？](https://stackoverflow.com/questions/1002430/why-does-jsp-jstl-division-by-1000-sometimes-give-remainder)

我正在尝试获取小数点后的数字。例如：`60.`4 ->`0.4`

然而，什么时候做

```
double a = 60.4 % 1; 
```

结果是`0.3999999999999986`。

为什么是这样？它怎么能被修复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:13:52.320

使用定点类型

```
BigDecimal src = new BigDecimal("60.4");
BigDecimal a = src.remainder(BigDecimal.ONE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:18:48.347

您可以使用[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)来完成您想要的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:17:54.440

好的，您可以这样做：[如何获得小数点后的数字？（爪哇）](https://stackoverflow.com/questions/6166756/how-to-get-the-numbers-after-the-decimal-point-java)

我认为这正是您正在寻找的。所以基本上你可以使用：

```
double x = d - Math.floor(d); 
```

或者

[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)类，用于小数点后的精确数字。

# ios - iPad应用程序设计：与Excel文件同步

> ID：10682388
> 
> 赞同：0
> 
> 时间：2012-05-21T09:10:26.450
> 
> 标签：ios, ipad, excel

我正在为一家小公司设计一款适用于 iPad 的新应用程序。这个应用程序将使用 Core Data 来存储本地数据库以及产品和价格数据库。最后一个数据库需要始终保持最新，因为价格可能会发生变化。

这家公司有一个 Excel 文件来保存这个价格数据库。所以他们没有我可以从我的应用程序交互的 SQL 数据库。

一种选择是在 CVS 中导出 Excel 文件并将该文件放在他们的服务器中（可通过互联网访问）。然后我的应用程序应该解析文件。

不过，我不太喜欢这个主意。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T22:59:23.037

我和你有一个非常相似的问题。我最近参与了一个项目，客户希望将信息从 Excel 文件导入应用程序。我知道很多人说，只需将其转换为 CSV 并以这种方式解析即可，但我真的不希望客户端再经过一步并引入不同的文件格式 - 尽可能简单。

我也真的不喜欢云中的信息，尤其是谷歌。隐私对大多数公司来说都很重要，我怀疑他们是否会批准您使用 Google 来解析信息。

为了解析文件，我创建了 QZXLSReader。这是一个拖放解决方案，因此使用起来更容易。我不认为它的功能完整，但它对我有用。

它基本上是一个可以打开 XLS 文件并将它们解析为 Obj-C 类的库。一旦你有了这些类，就很容易将它们发送到 Core Data 或字典或你有的东西。

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:06:32.380

这里有几个选项供您选择：

1.  使用 Google Doc 作为中介。当有人更新定价 Excel 时，只需将更新后的 Excel 上传到 Google Docs。从您的 iPad 应用程序中，您可以通过 Goole API 读取最新数据。如果公司愿意，他们可以完全迁移到谷歌文档，直接修改在线谷歌电子表格。

2.  使用 StackMob 等服务作为中介。您必须编写一个工具来将定价 Excel 与 SrackMob 同步，但您可以通过 StackMob 的 iOS SDK 轻松访问数据。

# javascript - Chrome 扩展（回调/本地存储）

> ID：10682389
> 
> 赞同：0
> 
> 时间：2012-05-21T09:10:27.900
> 
> 标签：javascript, google-chrome, callback, google-chrome-extension

我想制作一个 Chrome 扩展来执行[此](http://userscripts.org/scripts/review/130081)操作（自动登录到网站，可能不是最好的方法，因为这是我第一次做 JS）并且有一个选项页面，用户可以在其中设置他的信息并保存它（localstorage ?) 以便内容脚本可以访问它以及选项页面。

这是我经过大量研究、查看示例等后得出的结论：http: [//pastebin.com/yTiXp4VY](http://pastebin.com/yTiXp4VY)（那里所有文件的源代码）。

最后我放弃了，只是使用了反复试验，所以那里有很多错误。出于安全原因，控制台报告它无法运行。请解释一下这个版本有什么问题。我不需要你修复我的代码，我只是在学习 JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:30:34.263

在大多数情况下，您的代码似乎是正确的。只有一点：您的选项页面可以`localStorage`直接访问，它不需要后台页面。但主要问题似乎是您的内容脚本的构建方式 - 它假设用户/密码数据将立即（同步）可用。这不是它的工作原理：您正在向后台页面发送消息，最终后台页面将回答并且您在内容脚本中的回调将被调用。最简单的方法是延迟所有操作，直到发生这种情况并且您拥有数据。将一条消息发送到将为您提供所有数据的后台页面应该更容易。像这样的东西：

```
var userName = null;
var passWord = null;

chrome.extension.sendRequest( { eventName: "getLogin" },
    function(response) {
        userName = response.user;
        passWord = response.pass;

        // Now we can continue doing whatever we are doing
        checkIfAutoUrl();
    }
); 
```

您的后台页面中的消息处理将如下所示：

```
function onRequest(request, sender, sendResponse) {
    if (request.eventName == "getLogin") {
        sendResponse({user: getStorage("user"), pass: getStorage("pass")});
    }
} 
```

请注意，响应是一个具有两个属性的对象，`user`并且`pass`在这里 - 这样内容脚本可以在收到响应后立即继续，它具有所有必要的数据并且不需要等待第二个响应。

**更新**：关于您收到的错误消息：[内容安全策略](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)旨在保护您的扩展程序不被恶意网站利用。这种保护的一部分是禁止在 HTML 中使用内联脚本`onload="load_options()"`。所有将要运行的脚本都需要放在您的 JavaScript 文件中。因此，`onload`您可以将以下内容放入`options.js`：

```
window.addEventListener("load", load_options, false); 
```

请参阅[`addEventListener`MDN 上的文档](https://developer.mozilla.org/en/DOM/element.addEventListener)。

# c++ - C++：将 LPTSTR 转换为 char 数组

> ID：10682394
> 
> 赞同：3
> 
> 时间：2012-05-21T09:10:39.747
> 
> 标签：c++, c, visual-studio, lptstr

> **可能重复：**
> [将 lptstr 转换为 char*](https://stackoverflow.com/questions/342772/convert-lptstr-to-char)

我需要将一个转换`LPTSTR p`为`CHAR ch[]`. 我是 C++ 新手。

```
#include "stdafx.h"
#define _WIN32_IE 0x500
#include <shlobj.h>
#include <atlstr.h>
#include <iostream>
#include <Strsafe.h>

using namespace std;

int main(){
    int a;
    string res;
    CString path;
    char ch[MAX_PATH];
    LPTSTR p = path.GetBuffer(MAX_PATH);
    HRESULT hr = SHGetFolderPath(NULL,CSIDL_APPDATA, NULL, SHGFP_TYPE_CURRENT, p);

/* some operation with P and CH */

    if(SUCCEEDED(hr))
    { /* succeeded */
        cout << ch;
    } /* succeeded */
    else
    { /* failed */
        cout << "error";
    } /* failed */
    cin >> a;
    return 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T09:26:01.850

LPTSTR 是一个（非常量）TCHAR 字符串。取决于它是否显示为 Unicode。如果不是 Unicode，LPTSTR 是 char*，如果是，则为 w_char*。

如果您使用的是非 Unicode 字符串 LPTSTR 只是一个 char*，否则请执行以下操作：

```
size_t size = wcstombs(NULL, p, 0);
char* CharStr = new char[size + 1];
wcstombs( CharStr, p, size + 1 ); 
```

此外，此链接可以提供帮助：

[将 lptstr 转换为 char*](https://stackoverflow.com/q/342772/1065190)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:14:26.017

首先，您定义`char* ch[MAX_PATH]`而不是`char ch[MAX_PATH]`.

关于您的问题，如果它是 unicode，则 LPTSTR ( *Long Pointer to TCHAR String* ) 等效于`LPWSTR`(which is `w_char*`)，如果不是，则等效于 LPSTR ( `char*`)。您可以使用[此链接](https://stackoverflow.com/questions/9782106/c-lpctstr-to-char)作为有关每种情况下转换的参考。

**编辑**：切入正题，这里有一些代码：

```
if (sizeof(TCHAR) == sizeof(char))  // String is non-unicode
    strcpy(ch, (char*)(p));       
else                                // String is unicode
    wcstombs(ch, p, MAX_PATH); 
```

**编辑 2**：在 Windows 中，我建议使用`TCHAR`而不是`char`. 它会为您省去一些头痛。

**编辑 3**：作为旁注，如果您想防止 Visual Studio 向您发出有关不安全函数的警告，您可以在代码的最开头添加如下内容：

```
#ifdef _MSC_VER
#define _CRT_SECURE_NO_WARNINGS
#endif 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T10:35:36.033

`LPTSTR`意思`TCHAR*`（扩展那些 Win32 首字母缩写词 typedef 可以更容易理解它们）。`TCHAR`扩展到`char`ANSI/MBCS 构建和`wchar_t`Unicode 构建（这应该是这些天的默认设置，以获得更好的国际化支持）。

下表总结了**`TCHAR`ANSI/MBCS 和 Unicode 构建中的扩展**：

```
 |   ANSI/MBCS    |     Unicode
  --------+----------------+-----------------
  TCHAR   |     char       |     wchar_t
  LPTSTR  |     char*      |     wchar_t*
  LPCTSTR |  const char*   |  const wchar_t* 
```

因此，在 ANSI/MBCS 构建中，`LPTSTR`扩展为`char*`; 在 Unicode 构建中，它扩展为`wchar_t*`.

`char ch[MAX_PATH]``char`是ANSI 和 Unicode 版本中的 '数组。

如果要从`TCHAR`字符串 ( `LPTSTR`) 转换为 ANSI/MBCS 字符串（`char`基于 -），可以使用**[ATL 字符串转换助手](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.80%29.aspx)**，例如：

```
LPTSTR psz;   // TCHAR* pointing to something valid    
CT2A ch(psz); // convert from TCHAR string to char string 
```

（另请注意，在您的原始代码中，您应该调用`CString::ReleaseBuffer()`which 是 的对称`CString::GetBuffer()`。）

**示例代码**如下：

```
// Include ATL headers to use string conversion helpers
#include <atlbase.h>
#include <atlconv.h>
...

LPTSTR psz = path.GetBuffer(MAX_PATH);
HRESULT hr = SHGetFolderPath(NULL,CSIDL_APPDATA, NULL, SHGFP_TYPE_CURRENT, psz);
path.ReleaseBuffer();
if (FAILED(hr))
{
  // handle error
  ...
}

// Convert from TCHAR string (CString path) to char string.
CT2A ch(path);

// Use ch...
cout << static_cast<const char*>(ch) << endl; 
```

另请注意，**从 Unicode 到 ANSI 的转换可能是有损**的。

# javascript - 如何在 onClick 事件之前调用 action 方法

> ID：10682398
> 
> 赞同：0
> 
> 时间：2012-05-21T09:10:53.890
> 
> 标签：javascript, java, dom-events, jsf-1.2

我遇到了这个 JSF 的麻烦。我喜欢先调用 action 方法，然后再调用 JavaScript OnClick 事件。

```
<input value="Select" jsfc="ft:commandButton" style="width: 70px;" type="button" onclick="setReturnValues(this,'memId');" action="#{eem1001.EEM1001FormBean.memberChange(line.memId)}"/> 
```

但是 JavaScript OnClick 事件是在操作方法之前调用的。

如何在 JavaScript OnClick 事件之前调用操作方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:35:26.567

为此，您可以在 event 上调用 action 方法`mouseDown`，然后在`mouseUp`event 上调用您的 2nd method `setReturnValues(this,'memId')`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:14:49.423

您可以在身体部位调用所需的方法。像这样

```
<body onload="methodName()" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:38:43.873

如果您可以使用 JBoss Richfaces，您可以添加`a4j:support`到您的按钮并使用它的属性，您可以在实际操作后 `oncomplete`调用您的 javascript ，例如 ：`setReturnValues(this,'memId')``eem1001.EEM1001FormBean.memberChange(line.memId)`

```
<input value="Select" jsfc="ft:commandButton" style="width: 70px;" type="button" >
  <a4j:support event="onclick" 
    action="#{eem1001.EEM1001FormBean.memberChange(line.memId)" 
    oncomplete="setReturnValues(this,'memId');"  
    disableDefault="true" />
</input> 
```

# iphone - 某些 iPhone 4s 和 iPod Touch 上的随机 img 保存错误

> ID：10682400
> 
> 赞同：1
> 
> 时间：2012-05-21T09:11:05.983
> 
> 标签：iphone, ios, xcode, uiimage

我遇到了一个奇怪的错误。我希望该应用程序将图像保存到相机胶卷中。

但少量设备给我错误保存味精。

编辑：错误日志

“无法为保存的照片编码图像。” UserInfo=0x3e7170 {NSUnderlyingError=0x389310 "无法为保存的照片编码图像。", NSLocalizedDescription=无法为保存的照片编码图像。

```
May 22 14:13:34 unknown assetsd[281] <Error>: ImageIO: CGImageDestinationAddImage image parameter is nil
May 22 14:13:34 unknown assetsd[281] <Error>: ImageIO: CGImageDestinationFinalize image destination does not have enough images
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextSetBaseCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextSaveGState: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextSetInterpolationQuality: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextFillRects: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextSetBaseCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextSaveGState: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextSetInterpolationQuality: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextFillRects: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextConcatCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextDrawImage: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextConcatCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextDrawImage: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextRestoreGState: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGBitmapContextCreateImage: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGContextRestoreGState: invalid context 0x0
May 22 14:13:34 unknown com.apple.assetsd[281] <Notice>: May 22 14:13:34 SLQ-iTouch assetsd[281] <Error>: CGBitmapContextCreateImage: invalid context 0x0
> 
```

下面是我用来保存图像的代码。

```
- (IBAction)saveImage:(id)sender {

    HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    HUD.dimBackground = YES;
    HUD.labelText = @"Its saving!";
    self.imageOverlay.alpha = 1;
    self.savedImage = [self maskImage:self.imgView withMask:self.baseImgView];

    UIImageWriteToSavedPhotosAlbum(self.savedImage, self, @selector(imageSavedToPhotosAlbum: didFinishSavingWithError: contextInfo:), nil);
}

- (void)imageSavedToPhotosAlbum:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo {

    NSString *message;
    NSString *title;

    if (!error) {
        title = NSLocalizedString(@"Save Success", @"");
        message = NSLocalizedString(@"Save Success Message", @"");
        HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Checkmark.png"]];
        HUD.mode = MBProgressHUDModeCustomView; 
        HUD.labelText = @"We’re saved - WooHoo!!";
        [HUD hide:YES afterDelay:1.5];
        saved =1;
        self.imageOverlay.alpha =0.85;
        [self performSelector:@selector(saveSuccess) withObject:nil afterDelay:1.5];

    } else 
    {
        title = NSLocalizedString(@"Save Failed", @"");
        message = [error description];

        HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sad_face.png"]];
        HUD.mode = MBProgressHUDModeCustomView;
        HUD.labelText = @"Error! Try saving photo again :p";
        [HUD hide:YES afterDelay:3];
    }
}

- (UIImage*) maskImage:(UIImageView *)maskImage withMask:(UIImageView *)cropImage
{

    UIImage *image = nil;
    UIImage *imagePNG = nil;

    CGSize newImageSize = CGSizeMake(cropImage.frame.size.width, cropImage.frame.size.height);

    UIGraphicsBeginImageContextWithOptions(newImageSize, NO, 0.0); //retina res
    [self.viewForImg.layer renderInContext:UIGraphicsGetCurrentContext()];

    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    

    NSData *imgData =  UIImagePNGRepresentation ( image ); // get PNG representation
    imagePNG = [UIImage imageWithData:imgData]; // wrap UIImage around PNG representation
    return imagePNG;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:26:20.513

```
- (UIImage*) maskImage:(UIImageView *)maskImage withMask:(UIImageView *)cropImage
{

    UIImage *image = nil;
    UIImage *imagePNG = nil;

    CGSize newImageSize = CGSizeMake(cropImage.frame.size.width, cropImage.frame.size.height);

    UIGraphicsBeginImageContextWithOptions(newImageSize, NO, 0.0); //retina res
    [self.viewForImg.layer renderInContext:UIGraphicsGetCurrentContext()];

    image = UIGraphicsGetImageFromCurrentImageContext();

    NSData *imgData =  UIImagePNGRepresentation ( image ); // get PNG representation
    imagePNG = [UIImage imageWithData:imgData]; // wrap UIImage around PNG representation
    UIGraphicsEndImageContext();    

    return imagePNG;
} 
```

# c - 将一个简单的c程序从linux移植到windows

> ID：10682407
> 
> 赞同：1
> 
> 时间：2012-05-21T09:11:24.953
> 
> 标签：c, windows, parallel-port

我想编写一个简单的 c 程序来执行以下操作。打开与并行端口的连接，使引脚 2 为高电平，使引脚 2 为低电平并关闭连接。我为此使用 JNI，所以我的 Java 源文件如下。

```
package meas;

public class Meas {

    public static native boolean open();

    public static native boolean on();

    public static native boolean off();

    public static native boolean close();

} 
```

请注意，Java 文件应控制并行端口，即决定何时应为高或低。然后，我使用 javah 提取了 ac 头文件。

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class meas_Meas */

#ifndef _Included_meas_Meas
#define _Included_meas_Meas
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     meas_Meas
 * Method:    open
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_meas_Meas_open
  (JNIEnv *, jclass);

/*
 * Class:     meas_Meas
 * Method:    on
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_meas_Meas_on
  (JNIEnv *, jclass);

/*
 * Class:     meas_Meas
 * Method:    off
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_meas_Meas_off
  (JNIEnv *, jclass);

/*
 * Class:     meas_Meas
 * Method:    close
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_meas_Meas_close
  (JNIEnv *, jclass);

#ifdef __cplusplus
}
#endif
#endif 
```

然后我为 Linux 实现了这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/io.h>
#include <sys/types.h>
#include <fcntl.h>
#include <meas_Meas.h>

#define BASEPORT 0x378 /* lp1 */

int tem;

/*
 * Class:     meas_Meas
 * Method:    open
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_meas_Meas_open(JNIEnv *env, jclass clz) {
    //set permissions to access port
    if (ioperm(BASEPORT, 3, 1)) {
        perror("ioperm");
        exit(1);
    }

    tem = fcntl(0, F_GETFL, 0);
    fcntl(0, F_SETFL, (tem | O_ASYNC));
}

/*
 * Class:     meas_Meas
 * Method:    on
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_meas_Meas_on(JNIEnv *env, jclass clz) {
    outb(255, BASEPORT);
}

/*
 * Class:     meas_Meas
 * Method:    off
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_meas_Meas_off(JNIEnv *env, jclass clz) {
    outb(0, BASEPORT);
}

/*
 * Class:     meas_Meas
 * Method:    close
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_meas_Meas_close(JNIEnv *env, jclass clz) {

    fcntl(0, F_SETFL, tem);
    outb(0, BASEPORT);

    //take away permissions to access port
    if (ioperm(BASEPORT, 3, 0)) {
        perror("ioperm");
        exit(1);
    }
} 
```

我不是 C 出口，所以上面的代码可能看起来很奇怪。但这并不重要。重要的是我也想为 Windows 实现这个。目标是获得一个 dll，就像我已经有一个用于 Linux 的 libMeas.so 一样。我已经让 MinGW 工作了，但问题是在 Windows 上你不能使用 sys/io.h。在 google 上搜索有关如何执行此操作的文档会得到有关如何在并行端口上写入数据的教程。我不想要这个，我只想让引脚 2 高或低。我的猜测是这应该相当简单。谁能指出我如何为 Windows 执行此操作（使用相同的头文件）的正确方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:17:58.137

To compile the C code on windows you should add the #ifdefs around all of the specifics (outb, fcntl).

Use the _inp/_outp intrinsics to access the ports directly. See MSDN for these.

[http://msdn.microsoft.com/en-us/library/y7ae61bc(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/y7ae61bc(v=vs.80).aspx)

To get the .dll file using MinGW (gcc/win32) just use the "-shared" command line switch.

```
gcc -o libMeas.dll -shared source.c <your_libraries_for_win32> 
```

i586-mingw32msvc-gcc also works on linux (the cross-compilation)

There are also issues with the x64 version.

Looks like you have to use the driver for that kind of stuff, because the _inp/_outp are accessible in the DDK (Driver DevKit), not "out-of-the-box".

Have a look here [http://www.highrez.co.uk/downloads/inpout32/default.htm](http://www.highrez.co.uk/downloads/inpout32/default.htm) for the 32/64 bit drivers.

There's a whole thread about reading the parallel ports in managed environment (.NET in that case, but JNI would do also, I guess): [http://www.vbforums.com/showthread.php?t=643913](http://www.vbforums.com/showthread.php?t=643913)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:14:58.803

[我使用从http://logix4u.net/parallel-port/16-inpout32dll-for-windows-982000ntxp](http://logix4u.net/parallel-port/16-inpout32dll-for-windows-982000ntxp)获得的 dll 来工作。有了这个 dll，还有一个只有两个函数的 ac 头文件。Inp32() 和 Out32()。可用于直接向并行端口读写字，与 conio.h 中已弃用的 _inp() 和 _out() 函数完全相同。所以这基本上意味着我可以在用户模式下直接访问并行端口。

顺便提一句。您必须深入挖掘才能在 logix4u.net 上找到二进制文件；它可以在这里找到：[http](http://logix4u.net/parallel-port/parallel-port/index.php?option=com_content&task=view&id=26&Itemid=1) ://logix4u.net/parallel-port/parallel-port/index.php?option=com_content&task=view&id=26&Itemid= 1 似乎也存在这个 dll 的 64 位版本，它支持 Windows vista 和希望是 windows 7。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T21:29:20.473

这有一个到并行端口的 JNI 接口 [http://www.hytherion.com/beattidp/comput/pport.htm](http://www.hytherion.com/beattidp/comput/pport.htm)

# javascript - node.js xml xsd 验证

> ID：10682411
> 
> 赞同：2
> 
> 时间：2012-05-21T09:11:35.893
> 
> 标签：javascript, xml, node.js, xsd

那么我可以在 Node.js 中使用 XSD 验证吗？我尝试搜索但没有得到结果。请帮忙。

我现在可以使用 xmllint 但我想使用一些模块。

所以我在一岁时看到了同样的问题，但我想可能一年都发生了一些变化。

# django - Django - 来自请求的用户代理模型

> ID：10682414
> 
> 赞同：6
> 
> 时间：2012-05-21T09:12:06.120
> 
> 标签：django, django-models

`User`我在like上使用代理模型

```
class Nuser(User):
    class Meta:
        proxy = True
    def __unicode__(self):
        return u'%s %s' % (self.first_name, self.last_name) 
```

我在整个视图中都使用它。
我想知道获取此对象实例的最佳方法`request.user`

每次我做

```
Nuser.objects.get(pk=request.user.pk) 
```

没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-21T09:20:21.587

您可以编写一个自定义身份验证后端，该后端返回代理模型的实例而不是`User`实例：

```
from django.contrib.auth.backends import ModelBackend

class ProxiedModelBackend(ModelBackend):
    def get_user(self, user_id):
        try:
            return Nuser.objects.get(pk=user_id)
        except Nuser.DoesNotExist:
            return None 
```

在你的`settings.py`

```
AUTHENTICATION_BACKENDS = ['my_project.auth_backends.ProxiedModelBackend',] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-20T10:12:51.470

`MyNurse`例如，当您查询对象时，没有办法让 Django 返回一个`Nurse`对象。对象的查询`Nurse`集将返回这些类型的对象。代理对象的全部意义在于依赖原始代码的代码`Nurse`将使用这些代码，而您自己的代码可以使用您包含的扩展（无论如何都没有其他代码依赖）。这不是一种`Nurse`用你自己创造的东西来代替任何地方的（或任何其他）模型的方法。

# c++ - 模板<>（<> 中没有任何类 T）是什么意思？

> ID：10682416
> 
> 赞同：5
> 
> 时间：2012-05-21T09:12:09.180
> 
> 标签：c++, templates

我正在阅读 stl_construct.h 中的一些源代码，在大多数情况下，它在 <> 中有一些东西，我看到一些只有“ `template<> ...`”的行。这是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T09:13:48.020

这意味着接下来是[模板专业化](http://www.gotw.ca/gotw/049.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:18:08.637

Guess, I completely misread the Q and answered something that was not being asked.
So here I answer the Q being asked:

It is an **[Explicit Specialization](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/explicit_specialization.htm) with an empty template argument list.**

When you instantiate a template with a given set of template arguments the compiler generates a new definition based on those template arguments. But there is a facility to override this behavior of definition generation. Instead of compiler generating the definition We can specify the definition the compiler should use for a given set of template arguments. This is called **explicit specialization**.

The `template<>` prefix indicates that the following template declaration takes no template parameters.

Explicit specialization can be applied to:

*   Function or class template
*   Member function of a class template
*   Static data member of a class template
*   Member class of a class template
*   Member function template of a class template &
*   Member class template of a class template

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:31:27.153

这是一个模板特化，其中所有模板参数都被完全指定，并且在`<>`.

例如：

```
template<class A, class B>   // base template
struct Something
{ 
    // do something here
};

template<class A>            // specialize for B = int
struct Something<A, int>
{ 
    // do something different here
};

template<>                   // specialize both parameters
struct Something<double, int>
{ 
    // do something here too
}; 
```

# windows - Communication between wcf and windows service?

> ID：10682417
> 
> 赞同：0
> 
> 时间：2012-05-21T09:12:13.087
> 
> 标签：windows, wcf, makefile

I have a situation where I want to establish communication between WCF service and Windows service.

1.  I want to pass messages from the Windows service to the WCF service
2.  I want to send array list from the Windows service to the WCF service

How can I achieve this?

Edit:WCF is hosted on IIS. if any code snippets it would very helpfull. Thanks in advance loke

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:20:13.940

是的，您可以，只需在您的 Windows 服务中添加对您的 wcf 服务的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:50:16.337

在 Visual Studio 中，右键单击您的项目并选择添加服务引用。输入您的 WCF 服务地址并选择命名空间名称。Visual Studio 将从您的 Web 服务下载 WSDL 并为您创建代理。

然后只需创建代理对象并调用 Web 服务方法：

```
YourNamespace.YourServiceClient client = new YourNamespace.YourServiceClient();
client.Open();
client.YourOperation();
client.Close(); 
```

# android - Android ListView - RSSPro 应用程序已停止工作？

> ID：10682428
> 
> 赞同：1
> 
> 时间：2012-05-21T09:12:46.657
> 
> 标签：android, android-emulator, rss, android-listview

我已经按照[本教程](http://androidresearch.wordpress.com/2012/01/21/creating-a-simple-rss-application-in-android/#comments)进行操作，但是当我尝试运行应用程序时，我得到“不幸的是 RSSPro 已停止”。

这是我的 RSSProActivity 代码：

```
package com.android.rss;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.ListActivity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class RSSProActivity extends ListActivity {

    ArrayList<String> headlines;
    ArrayList<String> links;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     // Initializing instance variables
        headlines = new ArrayList<String>();
        links = new ArrayList<String>();

        try {
            URL url = new URL("http://www.bom.gov.au/fwo/IDZ00059.warnings_vic.xml");

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

                // We will get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");

                /* We will parse the XML content looking for the "<title>" tag which appears inside the "<item>" tag.
                 * However, we should take in consideration that the rss feed name also is enclosed in a "<title>" tag.
                 * As we know, every feed begins with these lines: "<channel><title>Feed_Name</title>...."
                 * so we should skip the "<title>" tag which is a child of "<channel>" tag,
                 * and take in consideration only "<title>" tag which is a child of "<item>"
                 *
                 * In order to achieve this, we will make use of a boolean variable.
                 */
            boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem)
                            headlines.add(xpp.nextText()); //extract the headline
                    } else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem)
                            links.add(xpp.nextText()); //extract the link of article
                    }
                }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                    insideItem=false;
                }

                eventType = xpp.next(); //move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Binding data
        ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, headlines);
        setListAdapter(adapter);

    }

    public InputStream getInputStream(URL url) {
           try {
               return url.openConnection().getInputStream();
           } catch (IOException e) {
               return null;
             }
        }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        String positions = (String) links.get(position);
       Uri uri = Uri.parse(positions);
       Intent intent = new Intent(Intent.ACTION_VIEW, uri);
       startActivity(intent);
    }

} 
```

我的 main.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<ListView
android:id="@android:id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

LogCat 消息：

```
05-21 19:44:40.528: D/dalvikvm(528): Not late-enabling CheckJNI (already on)
05-21 19:44:41.716: I/dalvikvm(528): threadid=3: reacting to signal 3
05-21 19:44:41.726: I/dalvikvm(528): Wrote stack traces to '/data/anr/traces.txt'
05-21 19:44:41.946: D/dalvikvm(528): GC_FOR_ALLOC freed 87K, 3% free 9136K/9347K, paused 113ms
05-21 19:44:41.956: I/dalvikvm-heap(528): Grow heap (frag case) to 9.904MB for 960016-byte allocation
05-21 19:44:42.056: D/dalvikvm(528): GC_CONCURRENT freed 1K, 3% free 10072K/10311K, paused 6ms+14ms
05-21 19:44:42.176: D/dalvikvm(528): GC_FOR_ALLOC freed 0K, 3% free 10072K/10311K, paused 38ms
05-21 19:44:42.196: I/dalvikvm-heap(528): Grow heap (frag case) to 11.963MB for 2160016-byte allocation
05-21 19:44:42.217: I/dalvikvm(528): threadid=3: reacting to signal 3
05-21 19:44:42.306: I/dalvikvm(528): Wrote stack traces to '/data/anr/traces.txt'
05-21 19:44:42.316: D/dalvikvm(528): GC_CONCURRENT freed 0K, 2% free 12181K/12423K, paused 3ms+4ms
05-21 19:44:42.526: D/gralloc_goldfish(528): Emulator without GPU emulation detected.
05-21 19:44:48.076: I/dalvikvm(528): threadid=3: reacting to signal 3
05-21 19:44:48.206: D/AndroidRuntime(528): Shutting down VM
05-21 19:44:48.206: W/dalvikvm(528): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-21 19:44:48.216: I/dalvikvm(528): Wrote stack traces to '/data/anr/traces.txt'
05-21 19:44:48.396: E/AndroidRuntime(528): FATAL EXCEPTION: main
05-21 19:44:48.396: E/AndroidRuntime(528): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.rss/com.android.rss.RSSProActivity}: android.os.NetworkOnMainThreadException
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.os.Looper.loop(Looper.java:137)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-21 19:44:48.396: E/AndroidRuntime(528):  at java.lang.reflect.Method.invokeNative(Native Method)
05-21 19:44:48.396: E/AndroidRuntime(528):  at java.lang.reflect.Method.invoke(Method.java:511)
05-21 19:44:48.396: E/AndroidRuntime(528):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-21 19:44:48.396: E/AndroidRuntime(528):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-21 19:44:48.396: E/AndroidRuntime(528):  at dalvik.system.NativeStart.main(Native Method)
05-21 19:44:48.396: E/AndroidRuntime(528): Caused by: android.os.NetworkOnMainThreadException
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
05-21 19:44:48.396: E/AndroidRuntime(528):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
05-21 19:44:48.396: E/AndroidRuntime(528):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
05-21 19:44:48.396: E/AndroidRuntime(528):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
05-21 19:44:48.396: E/AndroidRuntime(528):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
05-21 19:44:48.396: E/AndroidRuntime(528):  at com.android.rss.RSSProActivity.getInputStream(RSSProActivity.java:92)
05-21 19:44:48.396: E/AndroidRuntime(528):  at com.android.rss.RSSProActivity.onCreate(RSSProActivity.java:48)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.app.Activity.performCreate(Activity.java:4465)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-21 19:44:48.396: E/AndroidRuntime(528):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-21 19:44:48.396: E/AndroidRuntime(528):  ... 11 more
05-21 19:44:48.616: I/dalvikvm(528): threadid=3: reacting to signal 3
05-21 19:44:48.708: I/dalvikvm(528): Wrote stack traces to '/data/anr/traces.txt'
05-21 19:44:49.116: I/dalvikvm(528): threadid=3: reacting to signal 3
05-21 19:44:49.206: I/dalvikvm(528): Wrote stack traces to '/data/anr/traces.txt'
05-21 19:44:49.436: I/dalvikvm(528): threadid=3: reacting to signal 3
05-21 19:44:49.476: I/dalvikvm(528): Wrote stack traces to '/data/anr/traces.txt'
05-21 19:44:56.997: I/Process(528): Sending signal. PID: 528 SIG: 9 
```

我目前正在使用 SDK 15 版本（Android 4.0.3）。我的代码可以在 Eclipse 中编译，但无法在模拟器上运行。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:19:58.073

您正面临[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)因为在主线程中检索 XML。用于[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)在后台执行 XML 的获取和解析。示例可以在：[Read RSS in background, using AsyncTask](http://android-er.blogspot.in/2010/07/read-rss-in-background-using-asynctask.html)

# c# - .net 合成器

> ID：10682430
> 
> 赞同：4
> 
> 时间：2012-05-21T09:12:56.937
> 
> 标签：c#, .net, audio, vst, synthesis

我正在寻找可以与我的 .NET 应用程序集成的合成器。那里有可用的 .NET 合成器吗？有没有办法将 VST 插件集成到您的 .NET 应用程序中？

我想创建基于 MIDI 输入的声音，最好是比正弦波/方波/锯齿波更吸引人的声音。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:13:45.017

您应该尝试[http://vstnet.codeplex.com/](http://vstnet.codeplex.com/)尚不清楚您是要编写插件还是托管已创建的插件（或两者兼而有之）。

# python - 从 Python 中的 html 代码中提取值的代码

> ID：10682431
> 
> 赞同：0
> 
> 时间：2012-05-21T09:12:58.887
> 
> 标签：python, html

对于下面描述的问题，我需要紧急帮助。我正在使用 selenium python 绑定自动化项目

场景：用头像创建一个新成员，并将该成员添加到群组中。然后检查在创建头像时给成员的头像在好友列表中出现时是否相同

为此，我想比较创建个人资料时和朋友列表中的图像 ID？

我已经使用 firebug 找到了图像 ID。图像 ID 在内部给出

```
<div><a class=........Imageid=234563453.....................> 
```

但是如何从 中提取此图像 ID？

```
print self.driver.find_element_by_xpath("")._getattribute_(ImageId) 
```

谁能提供我从中提取此 Imageid 的代码`<a class>`？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:37:12.790

您可以使用正则表达式。

```
s = "<a class=........Imageid=234563453.....................>"
m = re.search("Imageid=\d*",s)
print m.group().split('=')[1] 
```

# javascript - 使用 javascript 预加载图像不起作用

> ID：10682435
> 
> 赞同：2
> 
> 时间：2012-05-21T09:13:05.417
> 
> 标签：javascript, html

我正在尝试使用 javascript 预加载图像：

```
$(document).ready(function () {
    preloadImages(
        ['../../Content/Resources/close_mouse_over.png',
        '../../Content/Resources/close.png']);
});

function preloadImages(sources) {
        var image = new Array();
        for (var i = 0; i < sources.length; i++) {
            image[i] = new Image();
            image[i].src = sources[i];
        }
    }

function mouseOverForImage(imgId, imgSrcs) {
        document.getElementById(imgId).src = imgSrcs;
    } 
```

在 HTML 中：

```
<input type="image" src="../../Content/Resources/close.png" name="Action" value="Save" onmouseover="mouseOverForImage('close', '../../Content/Resources/close_mouse_over.png')" 
               onmouseout = "mouseOverForImage('close', '../../Content/Resources/close.png')" id="close" title = "Close" /> 
```

但是鼠标悬停后请求仍在发送到服务器。不仅在 chrome 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:22:54.267

正如我在评论中所指出的，您将数组数组传递给 preLoadImages 方法。

结果，您传递了一个数组，`image[i].src`这意味着它不会被加载。

尝试

```
$(document).ready(function () {
    preloadImages(
        ['../../Content/Resources/close_mouse_over.png', '../../Content/Resources/close.png']);
});

function preloadImages(sources) {
        var image = new Array();
        for (var i = 0; i < sources.length; i++) {
            image[i] = new Image();
            image[i].src = sources[i];
        }
    }

function mouseOverForImage(imgId, imgSrcs) {
        document.getElementById(imgId).src = imgSrcs;
    } 
```

或者，如果您想保留数组的数组，则使用

```
function preloadImages(sources) {
        var image = new Array();
        for (var i = 0; i < sources.length; i++) {
            image[i] = new Image();
            image[i].src = sources[i][0];
        }
    } 
```

编辑，在进一步调查中，一个可能的原因是在预加载图像后`preloadImages`破坏了`image`阵列。

试试这个：

```
function preloadImages(sources) {
    window.preloadedImages = new Array();
    for (var i = 0; i < sources.length; i++) {
        window.preloadedImages[i] = new Image();
        window.preloadedImages[i].src = sources[i];
    }
} 
```

这会将预加载的图像存储在窗口对象中，从而允许它们正确地预加载。

希望有帮助吗？

# html - jQuery UI 选择事件后无法将焦点设置在输入字段上

> ID：10682437
> 
> 赞同：0
> 
> 时间：2012-05-21T09:13:10.260
> 
> 标签：html, jquery-ui

我正在使用 jQuery UI 选项卡在某些表单之间切换。
现在我需要`focus()`在单击选项卡时添加第一个输入字段。

如果我单击索引为 2 的选项卡，则会触发警报，但`focus()`不会触发。

```
 jQuery("#newRegistration").tabs({
    fx: { opacity: 'toggle', speed: 'fast' },
    select: function(event, ui) {
      if(ui.index == 0) { jQuery('#form1_name').focus(); }
      if(ui.index == 1) { jQuery('#form2_name').focus(); }
      if(ui.index == 2) { alert('this shows'); jQuery('#form3_name').focus(); }
    }
  }); 
```

为什么焦点不起作用？

表单数据如下所示（短版）：

```
<div id="registrationforms">
  <form id="form1_data_form" class="ui-tabs-hide" action="" method="post"></form>
  <form id="form2_data_form" class="ui-tabs-hide" action="" method="post"></form>

  <form id="form3_data_form" class="" action="http://mysite.com/register/" method="post">
    <input type="text" value="" maxlength="40" name="form3_name" id="form3_name">
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:39:56.863

使用`show`事件而不是`select`事件。

```
jQuery("#newRegistration").tabs({
    fx: { opacity: 'toggle', speed: 'fast' },
    show: function(event, ui) {
      if(ui.index == 0) { jQuery('#form1_name').focus(); }
      if(ui.index == 1) { jQuery('#form2_name').focus(); }
      if(ui.index == 2) { alert('this shows'); jQuery('#form3_name').focus(); }
    }
}); 
```

现场示例 - [http://jsfiddle.net/HN9uK/](http://jsfiddle.net/HN9uK/)。

# mysql - Mysql通过外键连接表，取决于字段类型

> ID：10682443
> 
> 赞同：1
> 
> 时间：2012-05-21T09:13:27.963
> 
> 标签：mysql, database, foreign-key-relationship

mysql数据库问题。有对象（域）的系统。每个域都有自己的表。所有对象都有唯一的 16 个 varchar id - guid

```
CREATE TABLE `guid` (   
   `guid` varchar(16) NOT NULL,
   `obj_type` varchar(45) NOT NULL,
   `obj_id` varchar(45) NOT NULL,
 `actived` tinyint(4) NOT NULL DEFAULT '1',
   PRIMARY KEY (`guid`) 
)
ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `product` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `name` varchar(150) NOT NULL,    
    /*....*/ 
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE `catalog` (   
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `name` varchar(150) NOT NULL,
    /*....*/ 
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

我想通过外键连接表 guid(fields: obj_type, obj_id) 和域表(field:id)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:26:59.637

外键关系涉及一个包含中心数据值的父表，以及一个具有相同值的子表，它们指向其父表。FOREIGN KEY 子句在子表中指定。父表和子表必须都是 InnoDB 表。它们不能是 TEMPORARY 表。

```
CREATE TABLE product 
  ( 
     id   INT(11) NOT NULL auto_increment, 
     name VARCHAR(150) NOT NULL, 
     PRIMARY KEY (id), 
     FOREIGN KEY (id) REFERENCES guid (guid ) 
  ) 
engine=myisam 
DEFAULT charset=utf8; 
```

# jsf-2 - 如何对 ViewExpiredException 做出决定

> ID：10682450
> 
> 赞同：0
> 
> 时间：2012-05-21T09:13:52.390
> 
> 标签：jsf-2

我有两个用户。公开和登录。当用户是公开的并且会话超时时，我只需传递请求，例如

```
Cookie userCookie = getCookie(httpServletRequest, "userCookie");
if (userCookie != null) {
    String value = userCookie.getValue();
    if (value.equalsIgnoreCase("normal")) {
        session.setAttribute("logedin", "0");
        filterChain.doFilter(httpServletRequest, httpServletResponse);
    } else if (value.equalsIgnoreCase("loginUser")) {
        Cookie sessionCookie = getCookie(httpServletRequest, "WITSessionCookie");
        if (sessionCookie == null) {   //user 30 min timeout
            session.setAttribute("logedin", "0");
            Cookie changeUserCookie = new Cookie("userCookie", "normal");
            changeUserCookie.setPath("/");
            httpServletResponse.addCookie(changeUserCookie);

            //If user generate ajax request
            if ("partial/ajax".equals(httpServletRequest.getHeader("Faces-Request"))) {
                httpServletResponse.setContentType("text/xml");
            httpServletResponse.getWriter().append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>").printf("<partial-response><redirect url=\"%s\"></redirect></partial-response>", timeoutPage);

            } else {
                httpServletResponse.sendRedirect(timeoutPage);
            }
            filterChain.doFilter(httpServletRequest, httpServletResponse);
        } else {  //User was login but its session timeout not expire
            session.setAttribute("logedin", "0");
            filterChain.doFilter(httpServletRequest, httpServletResponse);
        }
    }
} //end of if (userCookie != null) 
```

首先，我在 web.xml 文件中使用了这些行

```
<session-config>
    <session-timeout>
       10
    </session-timeout>
</session-config>
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/faces/SessionExpire.xhtml</location>
</error-page> 
```

如果我保留该选项，那么当会话超时时，我会看到您的会话过期的消息。我不想要，因为公共用户与会话无关。

```
if (value.equalsIgnoreCase("normal")) {
    session.setAttribute("logedin", "0");
    filterChain.doFilter(httpServletRequest, httpServletResponse);
} 
```

但是，如果我注释掉该选项，那么我会得到 ViewExpiredException。喜欢

```
 <!-- 
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/faces/SessionExpire.xhtml</location>
</error-page>
-->
  WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
javax.faces.application.ViewExpiredException: viewId:/index.xhtml - View /index.xhtml could not be restored.
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:212) 
```

所以我想问是否有任何方法可以在普通用户的情况下选项不起作用并简单地传递请求并且在登录用户选项工作的情况下意味着将用户重定向到会话过期消息。谢谢

# file-upload - 我可以直接从文件输入中读取电子表格吗？

> ID：10682452
> 
> 赞同：1
> 
> 时间：2012-05-21T09:14:01.780
> 
> 标签：file-upload, coldfusion

我有一个表格，可以选择上传和处理电子表格。

```
<form method="post" action="">
    <input type="file" name="myFile" />
    <input type="submit" name="process" value="Process File" />
</form> 
```

在发布时，我想使用`cfspreadsheet action="read"`. 有什么方法可以直接从表单字段读取电子表格，还是我必须先使用上传它`cffile action="upload"`然后从新文件位置读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:35:04.407

使用以下代码直接从表单域/临时文件夹中读取文件：

```
<cfspreadsheet action="read" src="#form.myFile#" sheet="1" /> 
```

# magento - 导入带有待处理订单的 magmi 时产品库存错误

> ID：10682453
> 
> 赞同：1
> 
> 时间：2012-05-21T09:14:06.460
> 
> 标签：magento, magmi

我正在通过 Magmi 将 ERP 软件与 Magento 同步。

考虑以下情况：产品的所有可用单位都处于待处理订单中，因此该产品在商店中不可用。如果在订单待处理期间完成 Magmi 产品导入，产品的库存将恢复到原始数量并返回商店。这意味着在订单完成后从 ERP 软件再次导入之前，库存不会是正确的。

我错过了什么吗？如果不是，在导入时设置正确的产品可用性有多容易？

我想这“只是”将待定订单中的产品数量减去进口数量的问题。当然，最坏的情况可能是产品在 ERP 软件中已经缺货，因此最终出现负库存……更重要的是，客户不满意。

我可能可以通过更频繁地同步来最大限度地降低最终出现负库存的风险，但我仍然依赖于网站订单的完成速度。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:26:56.270

您要确保您的（库存）数据有 1 个真正的资源。因为库存更新是从 ERP 到 Magento，我们可以说 ERP 是领先的资源。在这种情况下，您可以考虑在订单设置为待处理时对 ERP 使用实时更新（在 sales_order_save_after 上使用观察者）。

这样，您将遇到以下情况：

1.  产品库存被导入到 magento。
2.  订单已下达且待处理。
3.  实时更新完成，ERP 接收更新的库存（减少）。
4.  现在你有两种情况：
    1.  订单被取消，ERP 收到更新的库存（增量）。
    2.  订单成功，无需更新 ERP。

这样，ERP 始终了解 Magento 如何感知您的库存，并且当您收到 Magento 的“完整”库存更新时不会有任何问题。

# c# - 使用 C# 创建的 NHibernate 从多个应用程序到 SQL Server 数据库的事务

> ID：10682454
> 
> 赞同：0
> 
> 时间：2012-05-21T09:14:08.653
> 
> 标签：c#, sql-server, nhibernate, ssms

我使用 NHibernate 创建了一个 C# 应用程序，用于选择并插入在 Database Design Studio Lite 中创建并使用 SQL Server Management Studio 管理的 SQL Server 数据库。

我的问题是，当我在多个工作站上运行应用程序时，数据库对于多个事务来说是不安全的，就像它不是“线程安全的”一样，不知道该怎么称呼这个问题。

使我的数据库免受多个事务影响的最简单方法是什么？我尝试将“限制访问”设置为 SINGLE_USER 模式，但这会将数据库锁定到连接到它的第一个应用程序，并使所有其他应用程序失败。

从 SQL Server Management Studio 我只创建表。我不选择、插入或更新数据库。所有这些都是通过应用程序完成的。

我希望我提供的这些信息足以帮助我。否则我会再发一些:)

**编辑**

发现 NHibernate 使用 SessionFactory 所以所有事务都是安全的:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:21:59.780

您在查询、添加和修改记录时是否使用实际事务？

```
using (var session = SessionFactory.OpenSession())
using (var tx = session.BeginTransaction())
{
   // query or submit changes to session here, calling tx.Commit() at the end if you make changes
} 
```

默认隔离应限制为已提交的读取，因此查询不应返回尚未完全提交的任何修改。

# java - 在 JXMapKit 中实现 closeButton 动作

> ID：10682458
> 
> 赞同：0
> 
> 时间：2012-05-21T09:14:19.230
> 
> 标签：java, swing, maps, swingx

我需要为扩展 JXMapKit 的类中的关闭按钮添加功能（例如保存位置和 *EXIT_ON_CLOSE* ）。main() 方法只是 JXMapKit 的原始 main 方法的复制粘贴。

我有以下简单的代码来使用 JXMapKit：

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

import org.jdesktop.swingx.mapviewer.DefaultTileFactory;
import org.jdesktop.swingx.mapviewer.GeoPosition;
import org.jdesktop.swingx.mapviewer.TileFactory;
import org.jdesktop.swingx.mapviewer.TileFactoryInfo;

@SuppressWarnings("serial")
public class MyMap extends JXMapKit{
public static void main(String ... args){
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            JXMapKit kit = new JXMapKit();
            kit.setDefaultProvider(DefaultProviders.OpenStreetMaps);

            final int max = 17;
            TileFactoryInfo info = new TileFactoryInfo(1,max-2,max,
                    256, true, true, // tile size is 256 and x/y orientation is normal
                    "http://tile.openstreetmap.org",//5/15/10.png",
                    "x","y","z") {
                public String getTileUrl(int x, int y, int zoom) {
                    zoom = max-zoom;
                    String url = this.baseURL +"/"+zoom+"/"+x+"/"+y+".png";
                    return url;
                }

            };
            TileFactory tf = new DefaultTileFactory(info);
            kit.setTileFactory(tf);
            kit.setZoom(14);
            kit.setAddressLocation(new GeoPosition(22.5697, 88.3697));//coordinates of Kolkata
            kit.getMainMap().setDrawTileBorders(true);
            kit.getMainMap().setRestrictOutsidePanning(true);
            kit.getMainMap().setHorizontalWrapped(false);

            ((DefaultTileFactory)kit.getMainMap().getTileFactory()).setThreadPoolSize(8);
            JFrame frame = new JFrame("JXMapKit test");
            frame.add(kit);
            frame.pack();
            frame.setSize(500,300);
            frame.setVisible(true);
        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:12:08.750

下面的代码解决了这个问题：

```
myFrame.addWindowListener(
    new WindowAdapter(){
         public void windowClosed(WindowEvent e) { System.exit(0); }
    }
); 
```

# .net - 使用 WCF 服务连接到数据库

> ID：10682459
> 
> 赞同：0
> 
> 时间：2012-05-21T09:14:20.370
> 
> 标签：.net, wcf, web-services, sql-server-2008-r2

我想将数据库（sql server 2008 R2）连接到我创建的示例 WCF 服务。

很明显，我直到现在还没有创建任何客户端，也不想创建客户端，我只使用 WCF 测试客户端测试我的 WCF 服务......

现在我的观点是，

1.  如何逐步将数据库连接到 WCF 服务...

2.  我们可以通过多少种方式将数据库连接到 WCF 服务..

给我任何有用的链接，并提前感谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:16:54.993

Use [SQLCLR](http://msdn.microsoft.com/en-us/library/ms254498.aspx):

*   [Enable SQLCLR](http://msdn.microsoft.com/en-us/library/ms131048.aspx)
*   [Load `System.ServiceModel` into the database](http://msdn.microsoft.com/en-us/library/ms345106.aspx)
*   [Create a function/stored proc](http://msdn.microsoft.com/en-us/library/ms131094.aspx)
*   Call the web service. There are tons of details and examples among the [Internets](https://www.google.com/search?q=sql+clr+wcf).

# html - 在 iOS Safari 上缩放时禁用表格单元格间距

> ID：10682460
> 
> 赞同：0
> 
> 时间：2012-05-21T09:14:22.343
> 
> 标签：html, ios, css, mobile-safari

在 iOS Safari 上缩放时，有没有办法禁用此表格单元格间距？

截屏：

[![http://tinypic.com/view.php?pic=2d2hml0&s=6](../Images/31f560dff4605ec3f1a9dc3e5121ef2c.png)](https://i.stack.imgur.com/Dx7NQ.png)

它发生在 iOS5 模拟器和带有 iOS5 的 iPad 1 中。

测试用例：[http ://dabblet.com/gist/2761189](http://dabblet.com/gist/2761189)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:56:16.130

我担心这是绘图的一些 iOS 错误。因为如果您放大到最大级别，则没有线条。

# javascript - 将方法设置为 Post 但当提交为 form.submit() 时，它发送 GET 请求而不是 POST

> ID：10682468
> 
> 赞同：1
> 
> 时间：2012-05-21T09:14:46.680
> 
> 标签：javascript, jsp, safari, cross-browser

代码看起来像：

```
<form name="abc" method="POST">
    <input type="hidden" name="x" id="x">
    <input type="hidden" name="y" id="y">
    <input type="button" onclick="fnSubmit();">
</form>

<script>
    function fnSubmit() {
        document.forms['abc'].action = "someUrl";
        document.forms['abc'].submit();
    }
</script> 
```

Safari 5.1.5 中出现问题。同样在 safari 5.0.1 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:19:17.503

这似乎在 Safari 5.1.7 (windows) 中作为帖子提交

```
<form name="abc" method="POST" onsubmit="fnSubmit();">
    <input type="hidden" name="x" id="x">
    <input type="hidden" name="y" id="y">
    <input type="submit" name="test">
</form>

<script>
    function fnSubmit() {
        document.forms['abc'].action = "http://www.foo.com/bar.php";
    }
</script> 
```

你能做这样的事情吗？

# opengl - 我无法在 OpenGL 中将线宽设置为 1 像素

> ID：10682472
> 
> 赞同：0
> 
> 时间：2012-05-21T09:15:03.007
> 
> 标签：opengl, width, line, jogl, antialiasing

我正在尝试将一些线循环设置为 1 像素宽度，但是当宽度数为奇数时，我总是会得到一些抗锯齿效果

这里有一些示例代码：

```
 gl2.glLineWidth(1.0f); 
                    gl2.glBegin(GL2.GL_LINES); 
                        gl2.glVertex2i(-10, 0); 
                        gl2.glVertex2i(-10, 10); 
                    gl2.glEnd(); 

                    gl2.glLineWidth(2.0f); 
                    gl2.glBegin(GL2.GL_LINES); 
                        gl2.glVertex2i(-10, -10); 
                        gl2.glVertex2i(-10, 0); 
                    gl2.glEnd(); 

                    gl2.glLineWidth(3.0f); 
                    gl2.glBegin(GL2.GL_LINES); 
                        gl2.glVertex2i(-10, -20); 
                        gl2.glVertex2i(-10, -10); 
                    gl2.glEnd(); 

                    gl2.glLineWidth(4.0f); 
                    gl2.glBegin(GL2.GL_LINES); 
                        gl2.glVertex2i(-10, -30); 
                        gl2.glVertex2i(-10, -20); 
                    gl2.glEnd(); 

                    gl2.glLineWidth(5.0f); 
                    gl2.glBegin(GL2.GL_LINES); 
                        gl2.glVertex2i(-10, -40); 
                        gl2.glVertex2i(-10, -30); 
                    gl2.glEnd(); 
```

产生这个（从上到下的顺序）：

[http://dl.dropbox.com/u/1401029/LineWidth.png](http://dl.dropbox.com/u/1401029/LineWidth.png)

gl2.glIsEnabled(GL2.GL_LINE_SMOOTH) 返回 false 并且 gl2.glhint 似乎根本没有影响它

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:44:24.740

根据[文档](http://download.java.net/media/jogl/jogl-2.x-docs/javax/media/opengl/GLCapabilities.html#setNumSamples%28int%29)，JOGL 默认为 MSAAx2。

`setNumSamples(1)`在初始化时应该可以解决问题，但是您将完全失去抗锯齿功能。用期望值的倍数调用 glLineWidth 怎么样`NumSamples`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:24:13.513

在需要澄清[OpenGL 规范不是像素精确](https://stackoverflow.com/questions/7922526/opengl-deterministic-rendering-between-gpu-vendor)之前。事实上，你不能假装在每个 OpenGL 实现上都有相同的结果。

然而，在大多数可控的输入值上，多边形光栅化在不同的实现上给出了稳定的结果。

根据您的评论，这就是您设置模型视图/投影矩阵的方式：

```
gl.glMatrixMode(GL2.GL_PROJECTION);
gl.glLoadIdentity(); // map a 2D bild width*height on OpenGL
glu.gluOrtho2D(-width/2, (width+1)/2, -(height+1)/2, height/2);
gl.glMatrixMode(GL2.GL_MODELVIEW);
gl.glLoadIdentity(); 
```

我不知道类型和值，`width`甚至不知道`height`视口...但是为了给您这个答案，我假设您有一个视口`width`x `height`，其中`width`和`height`是您在代码中使用的变量，并且它们的值已设置到`100`.

实际上，您会建议您以这种方式设置投影矩阵：

```
gl.glMatrixMode(GL2.GL_PROJECTION);
gl.glLoadIdentity(); // map a 2D bild width*height on OpenGL
glu.gluOrtho2D(-width/2, +width/2, -height/2, height/2);
gl.glMatrixMode(GL2.GL_MODELVIEW);
gl.glLoadIdentity(); 
```

为了获得最大的可扩展性，我建议您附加以下模型视图矩阵转换：

```
gl.glMatrixMode(GL2.GL_MODELVIEW);
gl.glLoadIdentity();
gl.glTranslate(0.376, 0.376, 0.0); 
```

我不知道 java OpenGL 绑定的细节，但也遵循*Calvin1602*所说的（禁用多重采样）。

# php - PHP，将许多不同的日期格式转换为日-月-年

> ID：10682474
> 
> 赞同：-2
> 
> 时间：2012-05-21T09:15:05.550
> 
> 标签：php, date-conversion

> **可能重复：**
> [如何将 php 日期格式转换为 GMT，反之亦然？](https://stackoverflow.com/questions/5454779/how-to-convert-php-date-formats-to-gmt-and-vice-versa)

在 PHP 中，我有一个这样的字符串日期：

```
May 21, 2012 07:23:15 GMT 
```

或这个

```
21 May 2012 07:23:15 GMT 
```

我需要将两个字符串都转换成这样的：`21-05-2012`. （日月年）

PHP 能否正确地将这两个字符串解析为日-月-年格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:23:47.713

试试这个 -

```
 $your_string = "21 May 2012 07:23:15 GMT";
 $dd = date("d-m-Y", strtotime($your_string));
 echo $dd; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:22:55.943

您是否尝试过 DateTime 类？

```
date_default_timezone_set('Europe/Stockholm');
$date = new DateTime("May 21, 2012 07:23:15 GMT");
print $date->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T09:17:47.193

你可以用[`strtotime()`](http://php.net/strtotime)这个。或者，如果您知道预期的格式，您可以使用[`strptime()`](http://php.net/strptime)它来解析它，这将是首选。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:26:44.410

试试这个

```
$str_date = "May 21, 2012 07:23:15 GMT";
$date = DateTime::createFromFormat('M d, Y H:i:s O', $str_date);
echo  $date->format('d-m-Y'); 
```

# struts2 - Struts2 struts.xml 配置文件——定义全局配置项

> ID：10682476
> 
> 赞同：1
> 
> 时间：2012-05-21T09:15:17.350
> 
> 标签：struts2

在我的 struts2 应用程序中，我想定义一个全局配置部分并希望在需要的地方使用它。为了澄清，让我在下面分享一个动作定义；

```
<action name="do_login" class="xxx.actions.AuthAction" method="doLogin">
        <result name="success" type="json">
            <param name="noCache">true</param>
            <param name="contentType">text/html</param>
            <param name="excludeProperties">actionErrors,actionMessages,errorMessages,errors,fieldErrors,locale,texts,action,username,password,errorCode,errorMessage,session</param>
            <param name="ignoreHierarchy">false</param>
        </result>

        <result name="error" type="json">
            <param name="noCache">true</param>
            <param name="contentType">text/html</param>
            <param name="excludeProperties">actionErrors,actionMessages,errorMessages,errors,fieldErrors,locale,texts,action,session</param>
            <param name="ignoreHierarchy">false</param>
        </result>
    </action> 
```

如您所见，在结果定义中有一些重复的部分；

```
<param name="noCache">true</param>
<param name="contentType">text/html</param>
<param name="excludeProperties">actionErrors,actionMessages,errorMessages,errors,fieldErrors,locale,texts,action,username,password,errorCode,errorMessage,session</param>
<param name="ignoreHierarchy">false</param> 
```

我想在 struts.xml 文件的开头全局定义这个重复部分，并在每个结果定义中使用它，例如；

```
<result name="success" type="json">
    {include global definition here}
</result> 
```

我知道可以通过包或操作拆分 struts.xml，但我想知道是否可以超出我的需要？

提前谢谢任何回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:19:57.273

Struts2 没有任何全局参数，尽管它们有全局结果类型，

所以你可以很好地将成功和错误作为全局结果并使用它们。

它们有一些称为[静态参数](http://struts.apache.org/2.0.11.1/docs/how-do-we-access-static-parameters-from-an-action.html)的东西，它适用于 Action 类，但不适用于您需要的结果类型。

# android - Clear data of an application in a other application

> ID：10682481
> 
> 赞同：-5
> 
> 时间：2012-05-21T09:15:28.763
> 
> 标签：android

i'm developing a android application, in this application i want to clear the data of an other application. how do you do this ? i already tried this.

[How to clear user data in your application](http://www.hrupin.com/2011/11/how-to-clear-user-data-in-your-android-application-programmatically)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:19:00.013

Android 上的安全性不允许这样做。

每个应用程序都被沙盒化，以这种直接方式从其他应用程序访问数据受到限制（这是可以理解的）。

从另一个应用程序中删除数据的唯一方法是，如果目标应用程序将其数据存储在可通过文件浏览器查看的任何可公开访问的区域（即）中。

# javascript - 将动态数据系列添加到高图表

> ID：10682484
> 
> 赞同：0
> 
> 时间：2012-05-21T09:15:46.513
> 
> 标签：javascript, dynamic, highcharts, updates, spline

×212414 ×123754

我在 codebehind.aspx.cs 文件中调用一个 PageMethod ，它在 aspx 页面的 javascript 代码中返回一个字符串数组 [] 手头的问题是字符串数组返回 Time(X axis-Value),Data/Name(Y轴值），类型（定义图表的类型（样条线或柱形））来自 WEB SERVICE。我正在使用该数据将系列动态添加到图表中。使用功能 chart.AddSeries() 但我无法这样做。

任何人都可以指导我如何做到这一点，并且在这样做时我想为特定系列添加积分。

请注意，我将在同一个图表上显示类型{Spline and Column}。

```
<script type="text/javascript">

     alert("Bingo");

     $(function () {
         $(document).ready(function () {

             Highcharts.setOptions({

                 global: {

                     useUTC: false

                 }

             });

             var chart;

             chart = new Highcharts.Chart({

                 chart: {

                     renderTo: 'ltrChart',

                     type: 'spline',

                     marginRight: 10,

                     events: {

                         load: function () {

                             PageMethods.GetSingleValue(function (result) {

                                 var Name = new Array();
                                 var Type = new Array();
                                 var Data = new Array();
                                 var Time = new Array();

                                 var Ser = chart.series;

                                 for (var i = 0; i < 6; i++) {
                                     Type[i] = result[i].split('-')[0];
                                     Name[i] = result[i].split('-')[1];
                                     Data[i] = result[i].split('-')[2];
                                     Time[i] = result[i].split('-')[3];

   chart.addSeries({ name :Name[i], data : [ [Time[i], Data[i]] ] }, true, true);

                                     /* Test Method To ensure data Fetching */
                                     // alert(Type[i] + Name[i] + Data[i] + Time[i]);
                                     // alert(result[i]);

                                 }

                             })

                             //console.log(typeof PageMethods.GetSingleValue);
                             // PageMethods.GetSingleValue();
                             setInterval("PageMethods.GetSingleValue()", 5000);

                         }

                     }

                 },

                 title: {

                     text: 'Live random data'

                 },

                 xAxis: {

                 //type: 'datetime',

                 //tickPixelInterval: 150

             },

             yAxis: {

                 title: {

                     text: 'Value'

                 },

                 plotLines: [{

                     value: 0,

                     width: 1,

                     color: '#808080'

                 }]

             },

             tooltip: {

                 formatter: function () {

                     return '<b>' + this.series.name + '</b><br/>' +

                        Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +

                        Highcharts.numberFormat(this.y, 2);

                 }

             },

             legend: {

                 enabled: false

             },

             exporting: {

                 enabled: false

             },

             series: [{

                 name: 'Test Data',

                 data: [[10, 50], [15, 55]]

             }]

         });

     });

 });  
   </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T23:33:09.457

这就是我所做的，就像一个魅力。顺便说一句，既然您提到了 aspx 页面，为什么不直接购买 dot net highcharts 库呢？如果你是一个点网迷，它会让生活变得更轻松！

我最初创建一个包含 5 个元素的图表，然后使用“迭代”JSON 序列化字符串将数据传递到客户端。遍历元素给了我一个动态的实时图表！

```
Highcharts chart = new Highcharts("livechart")
        .InitChart(new Chart
        {
            Events = new ChartEvents { Load = "ChartEventsLoad" }
        })
        .SetSeries(initialSeries)
        .SetXAxis(new XAxis { Categories = lsst.ToArray() })
        .AddJavascripVariable("iterated", iterateData.ToString())
        .AddJavascripVariable("index", "5")
        .AddJavascripFunction("ChartEventsLoad",
        @"// set up the updating of the chart each 5 seconds
        var result = iterated;
        var theseries = eval(result); // De-serializing the JSON object
        var loopseries = function() {
        var sseries = livechart.series[0]
           ,shift = sseries.data.length > 5; // shift if the series is longer than 5;
        sseries.addPoint(theseries[0].data[index], true, shift);
        var sseries1 = livechart.series[1]
        sseries1.addPoint(theseries[1].data[index], true, shift);
        index++; };
        setInterval(loopseries, 5000);") 
```

您可以添加任意数量的系列；如果需要，您可以使用循环，并且可以使用我作为函数添加的相同代码完全在 Javascript 中创建图表。

# javascript - JQuery return value from child window to parent

> ID：10682485
> 
> 赞同：0
> 
> 时间：2012-05-21T09:15:59.470
> 
> 标签：javascript, asp.net-mvc-3, jquery-ui-dialog

first I have a list of records that has an edit button for each row (Please see below image 1 parent window). Once I clicked the edit button, a pop-up will appear which shows the Answer field in the pop-up window (Please see image 2 child window). In the pop-up window, there is a text area which handles the answer value, from here the user can add/delete a value. once the user clicked the save button, the values should be save in the database and reflects the modified value of the answer field on the particular row that was choosen to edit in the parent window.

Here is my code so far, I didn't implement a Controller yet for this because I don't know how to, I don't know if the controller can be called here for saving the data in to the dadabase.

I am new to MVC, I am hoping that there is someone who can help and understand my problem.

**Controller:**

```
[HttpPost] 
       public ActionResult Sample(string answers, string question, string controlid, string eventid)
       {

           return View("CustomizedQuestion");
       } 
```

**Javascript:**

```
$(".editButton").live("click", function (e) {
                e.preventDefault();
                var $title = $(this).attr("title");
                var $answers = $(this).attr("answers");
                var $controlid = $(this).attr("id");
                dropdownlist($controlid, $title, $answers);
            });

 function dropdownlist(controlid, title, answers, eventid) {

var $answersreplaced = answers.replace(/\,/g, "&nbsp;\r");

var $deleteDialog = $('<div><textarea id="answerlist"  rows="10" cols="50">' + $answersreplaced + '</textarea><div><div style="font-size:9px">(To change back to an open answer field, delete all choices above and save)</div>');

$deleteDialog.dialog({

    resizable: false,

    height: 280,

    width: 350,

    title: title + " - Edit Choices",

    modal: true,

    buttons: {

        "Save": function () {
            $.ajax({
                url: '@Url.Action("Sample")',
                type: 'POST',
                dataType: 'json',
                data: { answers: $('#answerlist').val(),
                       question: title,
                       controlid: controlid,
                       eventid: eventid
                     },

                success: function (resp) {

                    $(this).dialog("close");
                },

                error: function () {
                    alert('there was a problem saving the new answers, please try again');
                   }
            });

        },

        Cancel: function () {

            $(this).dialog("close");

        }

    }

});

}; 
```

![enter image description here](../Images/55057abb2039356a737008cc0cd25179.png)

![enter image description here](../Images/c8c679efad84ec8ec03552493ed73b02.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:41:50.390

根据评论的要求：

```
$(".editButton").live("click", function (e) {
        e.preventDefault();
        var $title = $(this).attr("title");
        var $answers = $(this).attr("answers");
        var $controlid = $(this).attr("id");
        var questionID = $(this).attr('questionID');
        dropdownlist(this, questionID, $controlid, $title, $answers);
    });

function dropdownlist(el, questionID, controlid, title, answers) {
    var $answersreplaced = answers.replace( /\,/g , "&nbsp;\r");
    var $deleteDialog = $('<div><textarea id="answerlist"  rows="10" cols="50">' + $answersreplaced + '</textarea><div><div style="font-size:9px">(To change back to an open answer field, delete all choices above and save)</div>');
    $deleteDialog
        .dialog({
            resizable: false,
            height: 280,
            width: 350,
            title: title + " - Edit Choices",
            modal: true,
            buttons: {
                "Save": function () {
                    var dialog = $(this);
                    $.ajax(function()
                    {
                        url : 'controller-path',
                        type : 'POST',
                        dataType : 'json',
                        data : 
                        {
                            Answers : $("#answerlist").val(),
                            QuestionID : questionID
                        },
                        success : function(resp)
                        {
                            $(dialog).dialog("close");
                            var newanswers = $("#answerlist").val();
                            modifyanswers(controlid,newanswers);
                        },
                        error : function()
                        {
                            alert('there was a problem saving the new answers, please try again');
                        }
                    });
                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            }
        });
}; 
```

除此之外，您还需要添加一个名为的属性，该属性`questionID`存储与答案相关的行的 ID。

另外，我会避免以这种方式使用属性。您可以将标题存储在 title 中，因为这是一个有效的属性，尽管在我的示例中，answers 和 questionID 不是有效的属性，因此会导致 HTML 验证失败。

您可以/应该考虑以另一种方式存储它们。

# objective-c - how to perform double tap on imageView

> ID：10682491
> 
> 赞同：0
> 
> 时间：2012-05-21T09:16:37.263
> 
> 标签：objective-c

I have work on touch event but that would be not work because of I take imageView in ScrollView so,that when I touch the image that directly work scrollview but not work touch on image so give any suggestion and source code which is apply in my code.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:38:57.800

正如 frauen1 在他们的回答中[所说](https://stackoverflow.com/a/3042116/19679)：

> 1) 在 UIScrollView 类中，将 canCancelContentTouches 的值设置为 NO - 这告诉 UIScrollView 类允许在子视图中进行触摸（或者，在这种情况下，在子视图的子视图中）。
> 
> 2）在我的“卡片”类中，将 ExclusiveTouch 设置为 YES - 这告诉子视图它拥有其中的触摸。

现在它将允许使用以下代码双击 ImageView

```
 UITapGestureRecognizer *tapRecognizer;
    self.imgViewGVC.userInteractionEnabled = YES;
    tapRecognizer = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTapView:)];
    tapRecognizer.numberOfTapsRequired = 2;
    [self.ImageView addGestureRecognizer:tapRecognizer];
[tapRecognizer release]; 
```

# ios - 带有 allowEditing = YES 'Use' 按钮的 UIImagePickerController 视频不可点击

> ID：10682492
> 
> 赞同：0
> 
> 时间：2012-05-21T09:16:42.140
> 
> 标签：ios, uiimagepickercontroller

我正在捕获一个 maxDuration 为 1 分钟且allowEditing = YES 的视频。

当它进入具有修剪、播放和使用按钮的视频编辑步骤时，它会随机冻结。修剪菜单不会出现，点击使用按钮不会做任何事情。

似乎没有与冻结有关的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:04:24.860

UIImagePickerController 有一个已知的内存泄漏，由于内存不足导致冻结或崩溃，这是一个已知的错误，它几乎从一开始就存在。有多种方法可以帮助减少这种泄漏的影响，例如确保您只在应用程序中分配一次 UIImagePickerController 并始终使用它的相同实例。如果你用谷歌搜索 UIImagePickerController 内存泄漏，你会发现很多关于如何处理这个问题的文章。

希望这可以帮助！

# sitecore - Sitecore Handlers

> ID：10682503
> 
> 赞同：1
> 
> 时间：2012-05-21T09:17:34.877
> 
> 标签：sitecore, sitecore6

I am trying to create an event handler for sitecore .

I have done following steps.

1.  create a dll named "TestEventHandlers" and
2.  add its reference in bin folder of my website.
3.  Add following line in my web.config events --> event node: `<handler type="TestEventHandlers.EventHandler , TestEventHandlers" method="OnItemSaved"/>`

But i am getting following error:

```
Could not resolve type name: 
TestEventHandlers.EventHandler, TestEventHandlers.EventHandler 
(method: Sitecore.Configuration.Factory.CreateType(XmlNode configNode, String[] parameters, Boolean assert)). 
```

I am confused about assembly name in type attribute of handler.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T12:55:01.570

> 类型的程序集限定名称由类型名称（包括其命名空间）、逗号和程序集的显示名称组成。[> MSDN](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)

您的类的程序集限定名称可能如下所示：

```
TestEventHandlers.EventHandler, TestEventHandlers 
```

假设您的 dll（程序集）已命名`TestEventHandlers`，并且您编写的类`EventHandler`在`TestEventHandlers`命名空间中被调用。换句话说，您的 dll 中有此代码，`TestEventHandlers`并且该 dll 位于您的 Sitecore 网站的 bin 目录中。

```
namespace TestEventHandlers
{
    public class EventHandler
    {
        public void OnItemSaved(object sender, EventArgs args)
        {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T15:35:03.817

假设 dll 名称为 - TestEventHandlers.dll 和类描述为 - namespace TestEventHandlers.Events{ public class EventHandler{...}} 您的处理程序条目应该是 < handler type="TestEventHandlers.Events.EventHandler , TestEventHandlers" method="OnItemSaved "/>

# tomcat - 带有 DocBase 的 Tomcat 符号链接

> ID：10682505
> 
> 赞同：0
> 
> 时间：2012-05-21T09:17:42.433
> 
> 标签：tomcat, symlink

我需要在我的 webapp 之外上传文档，并有可能在浏览器之后提供它们。因此，在查看了许多帖子后，我决定创建一个符号链接。我有一个问题，因为我已经在`tomcat5/Catalina/loclahost/myApp.xml`. 我向它添加了属性 allowlinking = true 和 override = true。但是我无法使用浏览器访问我上传的文档。我认为这两个重定向不能一起工作，但我不知道如何以任何其他方式进行。所以任何想法都会受到欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:07:07.340

如果您需要一个安全的地方将文件上传到您的 web 应用程序，您需要将它们完全放在任何 web 应用程序的文档库之外——这包括使用符号链接将它们“挂载”到您的 URL 空间中，方法是利用 DefaultServlet 为这些位提供服务你。否则，您将面临在取消部署 web 应用程序时让 Tomcat 删除所有上传文件的风险。

如果您不必选择升级到 Tomcat 7.0（我强烈推荐），那么我建议您编写自己的 servlet，将其映射到 /myapp/files/*，然后让该 servlet 从上传目录并将这些位提供给客户端。有一些方法可以让 DefaultServlet 为您执行此操作（而不是本质上在您自己的 servlet 中复制其全部功能集），但它并不总是能很好地工作，并且可能在旧版本的 Tomcat 中根本无法工作，因为 DefaultServlet 假定它映射到“/”而不是“/files”之类的东西。

# asp.net - 在 Azure 中部署 .NET 应用程序

> ID：10682508
> 
> 赞同：0
> 
> 时间：2012-05-21T09:17:47.483
> 
> 标签：asp.net, azure, azure-sql-database

我有这个使用 SQl 服务器数据库的 .NET Web 表单应用程序，它在本地服务器上运行良好，但是一旦我将 windows azure 部署项目添加到它，它就无法访问数据库。我该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:52:18.273

要以广泛的答案回答您的广泛问题：您是否尝试使用连接到 SQL Azure 数据库的指南 (http://msdn.microsoft.com/en-us/library/windowsazure/ee336282.aspx) 进行故障排除？

# plone - 如何在 Plone 的查看页面中隐藏经过身份验证的用户的作者信息（署名）？

> ID：10682511
> 
> 赞同：2
> 
> 时间：2012-05-21T09:17:56.233
> 
> 标签：plone, author

Plone 4.1.4 我可以通过设置→安全→取消选中“允许任何人查看'关于'信息”来隐藏作者信息。如何隐藏经过身份验证的用户的作者信息（署名）？

最好的祝福。

雨果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:15:50.840

完全隐藏视图。添加`/@@manage-viewlets`到 URL 以访问 viewlet 管理视图，找到该`plone.belowcontenttitle.documentbyline`条目并单击“隐藏”链接。

或者，您可以`viewlets.xml`在您的保单产品的 GenericSetup 配置文件中包含一个文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<object>
  <hidden manager="plone.belowcontenttitle" skinname="[enter your site skin name here]">
    <viewlet name="plone.belowcontenttitle.documentbyline" />
  </hidden>
</object> 
```

对于给定的皮肤名称，这会将 viewlet 标记为隐藏。

对于文件夹视图，您必须单独自定义它们；例如，`folder_summary_view.pt`模板（“摘要”显示）有一个`<div class="documentByLine">`您必须调整的部分（它只显示新闻项目的作者）。

# mysql - Magento without InnoDB

> ID：10682516
> 
> 赞同：4
> 
> 时间：2012-05-21T09:18:09.557
> 
> 标签：mysql, magento, innodb, myisam

I'm trying to install Magento Community Edition for my latest project on our server, however, the hosting platform we are currently using doesn't, and won't let us, install or utilise InnoDB.

Is anyone aware of any configuration/changes that can be done to make it work any other way?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T10:11:45.693

Magento 是开发出来的，应该在*交易安全的*环境中使用。

您可以尝试切换到其他一些事务安全的数据库（如 Oracle），但是您需要自己为 Oracle 编写 PDO 适配器和资源模型（它们不是 Magento 的一部分）。但是，如果您的提供商甚至不支持`InnoDB`，我不相信他会支持 Oracle 或类似的^^

另一种可能性是让 Magento 能够与非事务性 mySQL 引擎（如`MyISAM`. 您需要重写许多流程、核心模型和控制器以将 Magento 从事务行为更改为非事务行为。

这不仅需要大量的工作，而且我几乎可以肯定，每次尝试升级 Magento 版本时都会获得很多乐趣。我强烈建议*不要*以这种方式改变核心。

唯一支持事务的 mySQL 引擎是`InnoDB`和`NDB`. Magento 仅提供`InnoDB`. 因此，如果您问我，如果您的提供商出于任何原因不允许`InnoDB`，我建议您转到另一个允许的提供商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T21:09:13.530

I was trying to install Magento 1.9 CE on my own development server. Eventually the Magento Downloader incorrectly stated that InnoDB is not the default database engine. This was the issue I had when installing Magento CE.

Yes, it is true that MariaDB, a binary compatible replacement for MySQL uses xtradb rather than innodb as its engine.

[https://mariadb.com/kb/en/mariadb/xtradb-and-innodb/](https://mariadb.com/kb/en/mariadb/xtradb-and-innodb/)

However, I am tempted to conclude the problem lies in Magento: [Magento install complains about missing InnoDB when it is available](https://stackoverflow.com/questions/15443448/magento-install-complains-about-missing-innodb-when-it-is-available)

# php - 每当单击按钮时触发Web服务时，数据都会在数据库中输入两次？

> ID：10682517
> 
> 赞同：1
> 
> 时间：2012-05-21T09:18:15.173
> 
> 标签：php, iphone, ios, xcode

我有一个 xcode 项目，我需要在单击按钮时输入数据，然后将其显示在 TableView 中。

**示例：Twitter（关注/取消关注）。**

1.点击好友图标，出现好友列表。

2.当我点击我的任何一个朋友时，他们的朋友列表会出现在tableview中，并带有对应的关注按钮（共同的朋友有取消关注按钮）。

3.现在，当我点击关注按钮并返回查看我的好友列表时，该特定好友已添加了两次。

**到目前为止我做了什么：**

检查 sql 数据库是否也存在于其他地方。

检查 web 服务是否被调用了两次。

一切安好。我也有 iMac 和 Macbook Pro，它们都有同样的问题。我已经重新安装了 Xampp 两次，但结果仍然相同。

供您参考，以下是我用于 Xcode 项目的 php。

```
<?php
 $id =  $_REQUEST['id'];
 $fid = $_REQUEST['fId'];
 $firstName = $_REQUEST['firstName'];
 $lastName = $_REQUEST['lastName'];

 $con = mysql_connect("localhost","root","");
 if(!$con)
 die("Connection failed"."<br/>");

 $db = mysql_select_db("db",$con);
 if(!$db) die("Database not found!"."<br/>");

 $query = "INSERT INTO $id(firstName,lastName,folks_id)     VALUES('$firstName','$lastName','$fid')";
 print  $query;
 mysql_query($query,$con);
 mysql_close($con);

?> 
```

**编辑：Xcode 部分供参考**

```
-(IBAction)followButtonClicked:(UIButton *)sender
    {

  NSMutableString *postString = [NSMutableString stringWithString:kFollowURL];
    [postString appendString: [NSString stringWithFormat:@"?%@=%@", kId, [user objectForKey:@"id"] ]];
    [postString appendString: [NSString stringWithFormat:@"&%@=%@", kfId, [fId objectForKey:@"fID"] ]];
    [postString appendString: [NSString stringWithFormat:@"&%@=%@", kfirstName, [firstNameDict objectForKey:@"firstName"] ]];
    [postString appendString: [NSString stringWithFormat:@"&%@=%@", klastName, [lastNameDict objectForKey:@"lastName"] ]];
    [postString appendString: [NSString stringWithFormat:@"&%@=%@", kprofileType, [profileTypeDict objectForKey:@"profileType"] ]];

    [postString setString: [postString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSLog(@"post string = %@", postString);

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString]];

    [request setHTTPMethod:@"POST"];

    followConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
    NSLog(@"postconnection: %@", followConnection);

    //Get JSON Response from server

    NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: postString ]];    
    NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

    NSLog(@"serverOutput = %@", serverOutput);

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:15:55.320

您的数据库表中是否有主键。

如果是这样，那么如何针对相同的 id 插入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:55:33.987

[已解决] 成功的原因是我将 fid 设置为独一无二的......所以现在每当我点击关注按钮时，它都会输入一次，而不是两次。

感谢大家的帮助和支持。

# php - 我的 php 表单不会将页面重定向到另一个页面

> ID：10682518
> 
> 赞同：1
> 
> 时间：2012-05-21T09:18:16.723
> 
> 标签：php, html

我有一个简单的页面。当我点击提交按钮时，我有一些 sql 代码，最后我需要将页面重定向到另一个页面（contact.php）。我的 sql 代码工作正常，它存储在数据库中，但是它不会重定向到另一个页面（到 index.php）并显示具有表单（contact.php）的同一页面。我使用以下代码重定向我的页面：

```
header('Location: index.php'); 
```

我的表单和php代码如下：

```
 <form  name="contact" action="contact.php"  id="contact_form" method="post" >
 <input  type="hidden" id="ID" name="ID" value="<?php echo $yid ?>" />

 <textarea  id="Reason" name="Remark" placeholder="Write your Reason here" class="required" cols="10" rows="10"></textarea>

  <input class="button altbutton" type="submit" name="submit" value="submit" />

 </form>

 if (isset($_POST['submit'])) {

       $Remark = @$_POST ['Remark'];
       $ID= @$_POST ['ID'];

$query=" my sql code";
$result = mysql_query($query);

header('Location: index.php');

} 
```

我该怎么办？或者我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:23:06.050

我想这是因为你把它放在页面上输出之后，但是没有看到你的代码，这只是在黑暗中刺伤。

要重定向到新页面，您应该使用：

```
header("Location: index.php");
exit(); 
```

另外，请确保将上述内容放在页面上的任何输出之前，否则它将不起作用。

执行上述操作后，如果您得到一个空白页面，则说明出现问题（检查您的错误日志或确保打开了错误报告）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:27:00.730

是否在标题之前发送了一些 html？甚至空格？

也试试这个（从[这里](http://php.net/manual/en/function.header.php)）

```
$host  = $_SERVER['HTTP_HOST'];
$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
$extra = 'mypage.php';
header("Location: http://$host$uri/$extra"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:22:16.343

HTTP 标头“位置”似乎并不总是在所有浏览器上都能正常工作（根据我的经验）。如果您在回显“Location”标头之前已经“回显”了一些 HTML（或文本，等等），则 PHP 函数“标头”将不起作用。

使用此代码：

```
<?php
$Js_Redirect = 
"<script>"+
"top.location = 'index.php';"+
"</script>";

echo $Js_Redirect;
exit();
?> 
```

代替

```
<?php
header('Location: index.php');
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:31:52.017

请记住，`header()`必须在发送任何实际输出之前调用它，无论是通过普通 HTML 标记、文件中的空白行还是通过 PHP。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

```
<html>
<?php
/* This will give an error. Note the output
 * above, which is before the header() call */
header('Location: http://www.example.com/');
?> 
```

[[参考](http://php.net/manual/en/function.header.php)]

* * *

**解决方案 1：**在您的文件中，将 PHP 代码移动到开头（即上面的标记），并且在使用函数`<html>`之前不要回显任何内容。`header()`

**解决方案2：**
如果您在重构代码时遇到问题，那么您需要使用输出缓冲。放在`ob_start()`您的 php 页面的第一行，并`ob_end_flush()`在`ob_end_clean()`使用`header()`. 这有效地缓冲了所有输出，允许您在实际打印任何输出之前调用标头函数。 ***注意：*** *请记住始终`exit`或`die()`在设置`Location`标题之后。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T09:24:54.770

```
 if(isset($your_set_values)
    {
         header("Location:index.php");
    } 
```

如果它似乎不起作用：-

首先尝试查找是否有任何错误？

使用 -

```
error_reporting(E_ALL & ~E_NOTICE); 
```

如果您没有发现任何错误.. 尝试打印您的查询以及什么..

# devexpress - 如何格式化列以在 xtragrid 中显示百分比 (%)

> ID：10682522
> 
> 赞同：8
> 
> 时间：2012-05-21T09:18:35.597
> 
> 标签：devexpress, xtragrid

我有一个带有存储过程值的 xtragrid。
我得到浮点数（0.23）的值，我想以百分比（23%）显示。
在 C# 中最好的方法是什么？

之前 ![前](../Images/b15bdce871531b306463d6da31e00546.png) 之后 ![后](../Images/2a4953b012e694ee0437bd87c90c8ae7.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T10:48:55.477

如果您只想以只读方式显示单元格，请使用 CustomDrawCell 事件。或者您也可以使用[CustomColumnDisplayText 事件](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_CustomColumnDisplayTexttopic)。

尝试这个：

```
private void gridView1_CustomDrawCell(object sender, DevExpress.XtraGrid.Views.Base.RowCellCustomDrawEventArgs e)
            {
                if (e.Column.FieldName == "Marks")
                {
                    e.DisplayText = (((int)(Convert.ToDecimal(e.CellValue) * 100))).ToString() + "%";
                }
            } 
```

另一种方法是使用 Editor EditFormat 和 DisplayFormat 属性。并在设置这些属性后将其添加到 gridview 列：参考：[如何格式化 XtraGrid 中显示的值](http://www.devexpress.com/Support/Center/kb/p/A125.aspx)

```
RepositoryItem textEdit;
        private void AddGridRepositoryItem()
        {
            textEdit = new RepositoryItemTextEdit();
            textEdit.AllowHtmlDraw = DevExpress.Utils.DefaultBoolean.True;
            textEdit.ReadOnly = true;
            gridControl1.RepositoryItems.Add(textEdit);

            textEdit.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
            textEdit.DisplayFormat.FormatString = "p";
            gridView1.Columns[0].ColumnEdit = textEdit;

        } 
```

最简单的方法是使用[GridColumn.DisplayFormat](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridColumnsGridColumn_DisplayFormattopic)属性。

```
colPayment.DisplayFormat.FormatType = FormatType.Numeric;
colPayment.DisplayFormat.FormatString = "p0"; 
```

希望这有帮助..

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-21T10:44:57.037

请使用以下方法：

```
colReabilitation.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
colReabilitation.DisplayFormat.FormatString = "p0"; 
```

相关链接：

*   [GridColumn.DisplayFormat](http://help.devexpress.com/#WindowsForms/DevExpressXtraGridColumnsGridColumn_DisplayFormattopic)
*   [格式化值](http://help.devexpress.com/#WindowsForms/CustomDocument2400)
*   [标准数字格式字符串 (MSDN)](http://msdn.microsoft.com/en-us/library/580e57eb-ac47-4ffd-bccd-3a1637c2f467%28v=vs.90%29)

# android - 如何获取安装在 Android 平台上的应用程序的更新历史记录

> ID：10682523
> 
> 赞同：3
> 
> 时间：2012-05-21T09:18:35.633
> 
> 标签：android

我想知道，有没有办法让最终用户通过 UI 知道，以下是安装在 Android 平台上的任何应用程序的信息：

1.  应用安装日期
2.  应用版本
3.  应用程序更新的安装日期
4.  应用程序更新的应用程序版本

谢谢和问候，文卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:24:46.603

1.  通过 UI，无法知道安装日期。
2.  是的，如果用户`Home -> Settings -> Applications -> Manage Applications -> Application Name`从下面的图像 导航，它是可见的![在此处输入图像描述](../Images/452c4038bdf90fe54ed6d8923bf573dd.png)
3.  无法得知App更新日期
4.  版本可以称为第 2 点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-01T02:17:53.873

您可以按照以下步骤操作：

1）打开 google play 商店
2）在 google play 商店中查看您的应用程序（抱歉，这一步不太具体）
3）单击“已安装”选项卡，以便显示您已安装的应用程序
4）单击过滤器按钮并选择按上次更新日期排序！！:)

# php - 如何识别sql查询是否执行？

> ID：10682527
> 
> 赞同：0
> 
> 时间：2012-05-21T09:18:56.327
> 
> 标签：php, sql, pdo

```
$sql='SELECT sender 
      FROM messages 
      WHERE message_id = :message_id';
$sender_result = $db->query($sql, array(':message_id'=>$message_id));
$sender = $sender_result->fetch(); 
```

我用它来执行上面的sql。如何`$sender`在`If`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:24:57.450

尝试使用 TRY-CATCH 作为：

```
try {
   $sql='SELECT sender 
      FROM messages 
      WHERE message_id = :message_id';
   $sender_result = $db->query($sql, array(':message_id'=>$message_id));
   $sender = $sender_result->fetch();

} catch(PDOException $ex) {
    // handle exception by using your own logic
    echo "An Error occured!"; //a custom error message
    your_logging_function($ex->getMessage());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:20:25.593

这是您可以测试的最简单的方法

```
$query = $DB->query(".....");

if($query) // will return true if succefull else it will return false
{
// code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T04:29:09.923

```
if(isset($sender[0]))){
            return TRUE;
        }
        else {
            return FALSE;
        } 
```

# hibernate - @Access 被 EclipseLink 忽略，在 Hibernate 中工作正常

> ID：10682528
> 
> 赞同：3
> 
> 时间：2012-05-21T09:18:57.050
> 
> 标签：hibernate, netbeans, jpa-2.0, eclipselink

我在字段上有一个实体`@EmbeddedId`，并且我覆盖了使其`Property`访问的字段的访问类型。但这被忽略了`EclipseLink`，`Hibernate`没关系。Netbeans也因此向我显示错误：

**该类必须使用一致的访问类型（字段或属性）。
没有为此实体层次结构定义 ID。**

```
@EmbeddedId
private OneId id;

@Transient
private String cosmin;

@Access(AccessType.PROPERTY) // ??
public String getCosmin() {
    return cosmin;
}

public void setCosmin(String cosmin) {
    this.cosmin = cosmin;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:21:45.307

问题是实体缺少以下类级别注释：

```
@Access(AccessType.FIELD) 
```

只需从@Entity 中添加下一个。当字段和方法都被注释时，你不知道实际使用的是哪种访问类型。在您的情况下，它似乎是方法访问​​，而 @EmbeddedId 只是被忽略了。

在 JPA 2.0 规范中，这是用以下词语来说明的：

> 在没有明确指定 Access 注释的情况下，将注释放置在实体层次结构中的字段和属性上混合的应用程序的行为是未定义的。
> ...
> 当 Access(FIELD) 应用于此类时，可以有选择地指定类中的各个属性以进行属性访问。要指定持久性提供程序运行时访问的持久性属性，该属性必须指定为 Access(PROPERTY)。

.

# c# - Spring.Net 从资源文件中获取上下文资源？

> ID：10682534
> 
> 赞同：1
> 
> 时间：2012-05-21T09:19:38.717
> 
> 标签：c#, dependency-injection, spring.net

在春天，你总是使用`web.config`/`app.config`来存储你的对象，如下所示：

```
<spring>
    <context>
        <resource uri="config://spring/objects"/>
    </context>
    <objects>
        <description>An  example that demonstrates simple IoC features.</description>
    </objects>
</spring> 
```

或者

```
<resource uri="~/config/objects.xml" /> 
```

有时我在一些没有此 web.config 的服务下运行，我想将我的对象添加到资源文件 ( `*.resx`) 中。

我该怎么做，所以我可以`IApplicationContext`像打电话一样得到一个完整的`IApplicationContext ctx = ContextRegistry.GetContext();`？

所以基本上我不想使用 web.config，而是想使用资源文件来存储我的对象并使用这些对象初始化我的应用程序上下文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:52:02.963

机制与在 RESX 文件中定义对象（根本不支持）并不完全相同，但您*可以**轻松*实现您的潜在目标：将您的配置内部化在您的程序集中而不是外部化到一个单独的文件中XML 文件（web.config、app.config，甚至只是一个独立的anything.xml 文件）。

您可以使用 Spring.NET 的`assembly://`资源前缀（例如，`assembly://MyAssembly/MyService/objects.xml`）/ 了解更多详细信息，请参阅[http://www.springframework.net/doc-latest/reference/html/objects.html#d4e412](http://www.springframework.net/doc-latest/reference/html/objects.html#d4e412)。

# cygwin - 将命令行参数传递给 cygwin (rsync)

> ID：10682535
> 
> 赞同：0
> 
> 时间：2012-05-21T09:19:54.050
> 
> 标签：cygwin

我需要将命令传递给 cygwin，为特定文件夹执行 rsync。我将如何通过 cygwin 启动 rsync？我知道`.bat`文件方法（如此[处](https://stackoverflow.com/questions/2053764/automating-cygwin-commands-in-windows-command-line-and-ultimately-in-msbuild)所述），但这对于多线程来说并不是很有效，也不是很整洁。

如果 cygwin 不支持这一点，是否有任何替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:15:36.197

我刚刚发现，在 cygwin 目录（标准：）中`C:\cygwin\bin\`有一个文件`rsync.exe`（如果通过 cygwin 安装程序安装）。这可以使用 rsync 的正常参数通过 cmd 运行。

# java - 由于以下错误，ant 文件构建失败

> ID：10682539
> 
> 赞同：0
> 
> 时间：2012-05-21T09:20:13.960
> 
> 标签：java, ant, build

当我尝试运行 ant 文件时，由于以下原因，构建将失败：

```
[projectBuild] null DN Jaxb Beans:Multiple output locations are disabled, cannot associate entry: 'DN Jaxb Beans/src' with a specific output.
[projectBuild] null DN Jaxb Beans:Unbound classpath container: 'JRE System Library [J2SE-1.5]'.
[projectBuild] null DN Jaxb Beans:Unbound classpath container: 'org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER'.
[projectBuild] null DN Jaxb Beans:Multiple output locations are disabled, cannot associate entry: 'DN Jaxb Beans/src' with a specific output.
[projectBuild] null DN Jaxb Beans:The project was not built since its classpath is incomplete. Cannot find the class file for java.lang.Object. Fix the classpath then try rebuilding this project.
[projectBuild] 1 JAXBVersion.java:This compilation unit indirectly references the missing type java.lang.Object (typically some required class file is referencing a type outside the classpath)
[projectBuild] Errors were detected after building DN Jaxb Beans
[projectBuild] ProjectBuild: DN Jaxb Beans Exception=Errors were detected after building DN Jaxb Beans
[projectBuild] BUILD FAILED: file:C:/workspace.May21/DN Ant Scripts/buildDev.xml:149: 

ProjectBuild: DN Jaxb Beans Exception=Errors were detected after building DN Jaxb Beans
Total time: 19 minutes 4 seconds 
```

你能解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:44:23.787

以下错误是一个很好的指示：

```
Cannot find the class file for java.lang.Object 
```

如果 java 找不到`java.lang.Object`，那么您的 java 安装存在配置问题。该消息`JRE System Library [J2SE-1.5]`看起来像一个 eclipse jre 配置名称，所以我假设您正在通过 eclipse 运行它。我会尝试在 Eclipse 的执行环境配置中删除并重新添加。

# lotus-notes - 富文本字段中的损坏图像

> ID：10682544
> 
> 赞同：0
> 
> 时间：2012-05-21T09:20:22.337
> 
> 标签：lotus-notes, xpages

在我的应用程序中，我有一个富文本字段，我在其中显示文本，我也想显示图像。图像在我的本地 PC 上完美显示，我的本地 PC 上还安装了一个测试服务器，它也可以工作。但是当我在生产服务器上创建文档时，图像不显示。Firefox 将其完全隐藏，Chrome 显示损坏的图像链接。

这是在本地机器上创建的 url：

```
http://localhost:86/Folder/Folder/myapp.nsf/xsp/.ibmmodres/persistence/DominoDoc-3-Body/_2_07B23E640790993000318CC8C1257A05.jpeg 
```

这是服务器上的网址：

```
http://domain.mk/Folder/myapp.nsf/xsp/.ibmmodres/persistence/DominoDoc-59-Body/_2_06176AD0070E4830003325DCC1257A05.jpeg 
```

我很感激帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:28:08.147

您的图像是否可供匿名用户使用？可能是对文件的访问是问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:36:34.540

好的，我终于解决了这个问题。它与缓存或其他有关。如果您在将文档保存到 Notes 后立即在浏览器中打开该文档，则其行为就像图像实际上并未上传一样。所以我在 1-2 分钟后刷新了页面，图像就在那里。

# silverlight - Silverlight mediaelement 删除了声音文件的一部分

> ID：10682546
> 
> 赞同：0
> 
> 时间：2012-05-21T09:20:35.873
> 
> 标签：silverlight, mediaelement

我正在使用 Silverlight mediaelement 播放叙事声音文件。有时它会丢失部分声音，例如：“Hallo this is something.....”听起来像“allo this is something.....”有时它发生在文件的开头、中间或结尾！ ！！有人有线索吗？这就是我向它提供声音文件的方式：

```
soundStream = new IsolatedStorageFileStream(mediaUri, FileMode.Open, FileAccess.Read, FilesAndFolders.isoStore);
mediaSound.SetSource(soundStream); 
```

这是 mediaelement 用来开始播放的事件：

```
void mediaSound_MediaOpened(object sender, RoutedEventArgs e)
{
    mediaSound.Play();
} 
```

# php - MySQL查询不插入行

> ID：10682547
> 
> 赞同：0
> 
> 时间：2012-05-21T09:20:42.090
> 
> 标签：php, mysql, forms, insert

我的处理程序中有一个表格：

```
<form action="../submitcomment.php" method="post">
                <input maxlength=100 size=60 type="text" name="IP" value="' . $ip . '" readonly="readonly" hidden="hidden">
                <input maxlength=100 size=60 type="text" name="BlogId" value="' . $blogId . '" readonly="readonly" hidden="hidden">
                <input maxlength=100 size=60 type="text" name="Date" value="' . $date . '" readonly="readonly" hidden="hidden">         
                <input maxlength=100 size=60 type="text" name="Name" placeholder="Enter Your Name">
                <input maxlength=100 size=60 type="text" name="Email" placeholder="Enter Your Email">
                <input maxlength=100 size=60 type="text" name="Comment" placeholder="Enter Your Comment">
                <br>
                <input type="submit" name="Submit" value="Submit Your Comment">
                </form> 
```

行动是`submitcomment.php`：

```
$ip = $_POST['IP'];
$BlogId = $_POST['BlogId'];
$Date = $_POST['Date'];
$Name = $_POST['Name'];
$Email = $_POST['Email'];
$Comment = $_POST['Comment'];

$blog = new Blogs();

if (isset($_POST['Submit'])) 
{
    $addComment = $blog->insertComment($ip, $BlogId, $Date, $Name, $Email, $Comment);
    header('Location: http://www.ryan.archi.dev.netsite.co.uk/Blog?success=1');
}else{
    header('Location: http://www.ryan.archi.dev.netsite.co.uk/Blog?fail=1');
} 
```

它引用了我班级中的一个函数：

```
function insertComment($ip, $BlogId, $Date, $Name, $Email, $Comment)
    {
        $query = "INSERT INTO BlogComments (Name, Comment, IPAddress, Email, BlogId, Date) VALUES ('$Name', '$Comment', '$ip', '$Email', '$BlogId', '$Date')";
        $oDatabase = new database;
        $connection = $oDatabase->Connect();
        $result = mysql_query ($query, $connection);
        return $result;
    } 
```

插入尝试不会返回或引发任何错误。据我所知，这应该有效，你能发现我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:27:16.903

问题在于名为`Date`-的列`date`是一个保留字（我猜是所有已知的 RDBMS）。

您必须在您的查询中转义这个词：

```
INSERT INTO BlogComments (Name, Comment, IPAddress, Email, BlogId, `Date`) VALUES ('$Name', '$Comment', '$ip', '$Email', '$BlogId', '$Date') 
```

此外，您的代码使任何人都有机会进行 SQL 注入攻击，因此您至少应该逃避任何用户输入或更好地使用 MySQLi 或 PDO。

您可以通过 php 函数[http://php.net/mysql_real_escape_string](http://php.net/mysql_real_escape_string)进行转义：

```
$ip = mysql_real_escape_string($_POST['IP']);
$BlogId = mysql_real_escape_string($_POST['BlogId']);
$Date = mysql_real_escape_string($_POST['Date']);
$Name = mysql_real_escape_string($_POST['Name']);
$Email = mysql_real_escape_string($_POST['Email']);
$Comment = mysql_real_escape_string($_POST['Comment']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:25:50.060

你调试了吗？与数据库的连接是否成功建立？您没有进行 mysql 转义，可能插入查询失败。

# mysql - 除了文本中的 SQL 查询之外，是否有任何内部 MySQL 协议？

> ID：10682550
> 
> 赞同：0
> 
> 时间：2012-05-21T09:20:47.800
> 
> 标签：mysql, sql, protocols

我想知道 MySQL 收到 SQL 文本后会发生什么？它如何跨不同节点处理它们？

是否可以创建使用二进制 MySQL 协议而不是纯文本 SQL 查询的驱动程序？

例如，在`JOIN`或任何其他转换之前直接访问表数据。

只是有点好奇，不是现实世界的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:29:52.787

现在 MySQL 5.6 有了 memcached 协议，你可以在 memcached 协议中写入数据，并在 SQL 中分析它们。这有点酷。

[http://dev.mysql.com/doc/refman/5.6/en/news-5-6-6.html](http://dev.mysql.com/doc/refman/5.6/en/news-5-6-6.html)

# php - 在php中触发脚本

> ID：10682552
> 
> 赞同：1
> 
> 时间：2012-05-21T09:20:58.033
> 
> 标签：php, file, include

首先，我有一个 php 文件的 cron 作业。其次，在cron作业调用的php文件中，我想调用一个带参数的文件。我怎么能在不改变 php.ini 的情况下做到这一点？

例子：

```
include('file.php?id='.$id.'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:25:39.293

包括 get-parameters 将不起作用，因为 php 的 CLI 版本不支持它。还包括基于文件系统的作品，而不是基于 url 的作品。include 将/应该搜索文件 file.php?id=1。您应该创建一个函数并默认包含该文件，然后调用该函数

包含带有 url 的远程文件是一种非常非常糟糕的做法。如果你认为你必须这样做，那么你的概念很简单。尝试使用 api/其他类型的接口与远程 URL 进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:23:46.183

您可以在其他文件中定义一个函数，并在原始文件中调用它。例如：

文件.php：

```
function someFunction($x)
{
 return $x*$x;
} 
```

cron.php：

```
require 'file.php';
echo someFunction(10); 
```

此外，在全局范围内定义的任何变量也将在其他文件中可用。例如，如果您在 cron.php 中定义 $foo，您可以在 file.php 中使用该值。虽然不推荐这样做，但是维护大量的全局变量确实很难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:39:25.633

根据包含文档，如果其他 php 文件配置为解析 .php 而不是 .txt 是可能的。试试这个代码：

```
/* This example assumes that www.example.com is configured to parse .php
* files and not .txt files. Also, 'Works' here means that the variables
* $foo and $bar are available within the included file. */

// Won't work; file.txt wasn't handled by www.example.com as PHP
include 'http://www.example.com/file.txt?foo=1&bar=2';

// Won't work; looks for a file named 'file.php?foo=1&bar=2' on the
// local filesystem.
include 'file.php?foo=1&bar=2';

// Works.
include 'http://www.example.com/file.php?foo=1&bar=2';

$foo = 1;
$bar = 2;
include 'file.txt';  // Works.
include 'file.php';  // Works. 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-21T09:22:37.777

最简单的方法是使用`file_get_contents()`：

```
file_get_contents('http://localhost/file.php?id='.$id.'); 
```

对于更复杂的情况，您可以查看 PHP Curl。

# sql - Labels in SSRS 2008

> ID：10682554
> 
> 赞同：0
> 
> 时间：2012-05-21T09:21:02.633
> 
> 标签：sql, sql-server-2008, ssrs-2008

I am facing a problem in development in MSBI.I have created a bar chart which Contains Year as its X-axis.I want to display a Label with the

Same name as the user click on the chart.

Eg-User clicks on 2008 bar in bar-chart.A message should get displayed that-Data is of …… year.

How do I achieve this in MSBI 2008.Plz tell me any work around for that…!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:20:30.560

如果您询问托管在 SSRS 中的报告，则无法通过鼠标单击向用户显示消息。

相反，您可以在用户将鼠标悬停在条上时显示工具提示。为此，请使用`Tooltip`数据系列的属性。

# string - Extract Date from text file

> ID：10682557
> 
> 赞同：-1
> 
> 时间：2012-05-21T09:21:08.453
> 
> 标签：string, file, date, text, extract

We have to identify and extract the date from given samplese

```
Oct  4 07:44:45  cli[1290]: PAPI_Send: To: 7f000001:8372 Type:0x4 Timed out. 

Oct  4 08:16:01  webui[1278]: USER:admin@192.168.100.205 COMMAND:<wlan ssid-profile "MFI-SSID" > -- command executed successfully 

Oct  4 08:16:01  webui[1278]: USER:admin@192.168.100.205 COMMAND:<wlan ssid-profile "MFI-SSID" opmode opensystem > -- command executed successfully 
```

Here the main problem is, Date format is versatile. it may be "oct 4 2004" or "oct/04/2004" etc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:21:29.890

解析是处理此类问题的最佳方法。所以学习解析技术，然后在你的项目中使用它们并享受。[事件日志解析器的适当设计模式？](https://stackoverflow.com/questions/94148/appropriate-design-pattern-for-an-event-log-parser)

# c# - DoubleClick 命令和 DoubleClick 事件处理程序的执行顺序

> ID：10682559
> 
> 赞同：0
> 
> 时间：2012-05-21T09:21:21.070
> 
> 标签：c#, wpf, xaml, datagrid, command

我想将 UI 与程序逻辑分开，因此为 DataGridRow 引入了 DoubleClick 命令。当双击一行时，我设法使我的 DataGrid 能够执行命令。在 xaml 中，我现在可以像这样使用我的 DataGrid：

```
<DataGrid h:Commands.DataGridRowDoubleClickCommand="{Binding SomeCommand}">
    ...
</DataGrid> 
```

该技术类似于[这篇文章](http://social.msdn.microsoft.com/Forums/uk/wpf/thread/632ea875-a5b8-4d47-85b3-b30f28e0b827 "到这个帖子")。

双击一行现在执行命令。现在，我想要一个 DataGridRow 的事件处理程序，它通过`ShowDialog()`.

现在的问题：事件处理程序在命令之前执行。有什么方法可以更改 MouseDoubleClick 等事件中处理程序的顺序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:23:09.620

在我看来，打开带有警告/信息/数据的对话框是程序逻辑的一部分。在事件处理程序中操作 ui 是 UI 逻辑，但不显示信息。

# iphone - NSJSONSerialization 是否比 JSONKit 更容错、更健壮？

> ID：10682562
> 
> 赞同：4
> 
> 时间：2012-05-21T09:21:39.903
> 
> 标签：iphone, ios, json, jsonkit, nsjsonserialization

虽然根据基准 JSONKit 更快，但 Github 自述文件充满了错误的 JSON 导致崩溃等的警告。

对我来说，更重要的是没有崩溃，并且 JSON 文件中格式不正确的 Unicode JSON 或其他细微错误不会导致崩溃。

也许速度的提高来自它对错误的严格和不宽容？NSJSONSerialization 在这方面是否更健壮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:58:50.020

这是一个有点主观的问题，因为它只能根据我自己和其他开发人员的经验来回答。

我都使用过`JSONKit`，`NSJSONSerialization`并且非常喜欢后者。无论基准测试表明什么，我都没有注意到日常使用中的速度差异。但是，我也习惯在后台线程中进行反序列化，因此速度差异在 UI 中可能并不明显。

# database - 从 ACL 插件访问数据库

> ID：10682563
> 
> 赞同：0
> 
> 时间：2012-05-21T09:21:44.337
> 
> 标签：database, zend-framework, plugins, acl

我想从 ACL 插件中的数据库加载资源

我这样做

```
 class My_ACL extends Zend_Acl {

protected $_role_id;
protected $_userResource;

public function __construct() {

    try {
        $db = Zend_Db_Table::getDefaultAdapter();
        $stmt = $db->query("CALL getUserPrivileges(?)", 998877445);

        //Returns an array containing all of the result set rows  
        $rows = $stmt->fetchAll();

        $stmt->closeCursor();
        print_r($rows);

        return $rows;
    } catch (Exception $e) {
        echo 'error ' . $e;
    }
} 
```

但这不起作用，因为呈现了白页并且没有打印出来！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:22:27.350

我发现了问题。问题是在初始化默认适配器之前调用默认数据适配器，诀窍是我必须在引导程序中获取数据适配器并将其传递给插件，所以我这样做

在引导文件中

```
protected function _initPlugins() {
    $this->bootstrap('db');
    $db = $this->getResource('db');
    $front = Zend_Controller_Front::getInstance();
    $front->registerPlugin(new Application_Plugin_Acl($db));
} 
```

在 Application_Plugin_Acl 中，我这样做

```
class Application_Plugin_Acl extends Zend_Controller_Plugin_Abstract {

 public function __construct($db) {
    $this->_acl = new My_ACL($db);
}
} 
```

这是 my_ACL

```
 class My_ACL extends Zend_Acl {

public function __construct($db) {

     try {

      $stmt = $db->query("CALL getUserPrivileges(?)", 998877445);

      //Returns an array containing all of the result set rows
      $rows = $stmt->fetchAll();

      $stmt->closeCursor();
      print_r($rows);

      return $rows;
      } catch (Exception $e) {
      echo 'error ' . $e;
      }

} 
```

# python - 注释掉嵌套的三引号

> ID：10682565
> 
> 赞同：7
> 
> 时间：2012-05-21T09:21:50.263
> 
> 标签：python, comments

在python中注释掉多行我们使用三引号

```
def x():
   """This code will 
      add 1 and 1 """
   a=1+1 
```

但是如果我必须注释掉已经包含许多其他注释块（三引号注释）的代码块怎么办。例如，如果我想完全注释掉这个函数..

```
"""
def x():
   """This code will 
      add 1 and 1 """
   a=1+1
""" 
```

这行不通。我怎样才能注释掉这样的代码块。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T09:24:12.177

> 在python中注释掉多行我们使用三重逗号

这只是*一种方法*，从技术上讲，您使用的是字符串文字，而不是注释。而且，尽管它已经相当成熟，但这种编写注释的方式存在您观察到的缺点：您不能注释掉嵌套块。¹

Python 没有嵌套多行注释，就这么简单。如果要注释掉允许嵌套注释的多行，唯一*安全的选择*是注释掉每一行。

大多数编辑器都有一些命令可以轻松注释掉或多行。

* * *

¹对于单层嵌套，您实际上可以使用`'''"""nested """'''`，反之亦然。但我不会推荐它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T11:24:08.020

我在简短的 hack&slay 情况下经常做的事情如下所示。这不是真正的评论，也没有涵盖所有情况（因为您需要有一个块），但也许它会有所帮助：

```
if 0:  # disabled because *some convincing reason*
  def x():
   """This code will 
      add 1 and 1 """
   a=1+1 
```

或者，如果您不能或不喜欢在典型级别之间引入缩进级别：

```
# disabled because *some convincing reason*
if 0:  # def x():
   """This code will 
      add 1 and 1 """
   a=1+1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T16:35:30.227

您应该`#`用于注释，并在每行的开头。如果您使用的是 eclipse + pydev，这非常容易。

只需选择要评论的代码块，然后按`Ctrl + \`。取消注释也是如此。

我相信其他编辑器中也有这样简单的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-03T00:00:42.287

我正在学习建立搜索引擎的 Udacity python 编程课程。他们使用三引号将网页的源代码作为字符串括在变量“page”中，以搜索所有链接。

page = '''网页源代码''' 用 page.find() 搜索

# python - 2.x、3.x iOS 静态构建：致命 Python 错误：异常引导错误

> ID：10682566
> 
> 赞同：0
> 
> 时间：2012-05-21T09:21:55.957
> 
> 标签：python, ios

我试图使 Python 的最小部分作为我的 iOS 应用程序的一部分（静态库）用于内部脚本。我在 Mac OS X(10.7) 下使用 configure 并且成功。然后我很快就得到了可编译和可链接的 XCode 项目。问题是，当我尝试使用 Python 时

```
Py_NoSiteFlag=1;
Py_Initialize(); 
```

它失败并出现错误“致命的 Python 错误：异常引导错误”。在 _PyExc_Init() 中。我试图调试它，但不幸的是我无法理解它为什么会失败。可能是因为我不熟悉 Python 源代码，但无论如何，我需要移植它。试过2.7.3，或者3.2.3，结果和上面一样。任何解决方案或提示都会非常有帮助。

调用堆栈：

```
#0        0x300cba1c in __pthread_kill ()
#1        0x362e43ba in pthread_kill ()
#2        0x362dcbfe in abort ()
#3        0x00127d96 in Py_FatalError at /Users/mac_user/Downloads/Python-3.2.3/IOS/pythoncore/../../Python/pythonrun.c:2169
#4        0x00155328 in _PyExc_Init at /Users/mac_user/Downloads/Python-3.2.3/IOS/pythoncore/../../Objects/exceptions.c:2042
#5        0x00127ad4 in Py_InitializeEx at /Users/mac_user/Downloads/Python-3.2.3/IOS/pythoncore/../../Python/pythonrun.c:272
#6        0x0012846a in Py_Initialize at /Users/mac_user/Downloads/Python-3.2.3/IOS/pythoncore/../../Python/pythonrun.c:332
#7        0x000d6242 in testpython at /Users/mac_user/Downloads/Python-3.2.3/IOS/test/test/testmac.c:15
#8        0x000d618e in -[ViewController viewDidLoad] at /Users/mac_user/Downloads/Python-3.2.3/IOS/test/test/ViewController.m:23
#9        0x3283ff0e in -[UIViewController view] ()
#10        0x3283e2b4 in -[UIWindow addRootViewControllerViewIfPossible] ()
#11        0x3283a332 in -[UIWindow _setHidden:forced:] ()
#12        0x3283e28e in -[UIWindow _orderFrontWithoutMakingKey] ()
#13        0x3284cc60 in -[UIWindow makeKeyAndVisible] ()
#14        0x000d5ffe in -[AppDelegate application:didFinishLaunchingWithOptions:] at /Users/mac_user/Downloads/Python-3.2.3/IOS/test/test/AppDelegate.m:35
#15        0x3283e820 in -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] ()
#16        0x32838b64 in -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] ()
#17        0x3280d7d6 in -[UIApplication handleEvent:withNewEvent:] ()
#18        0x3280d214 in -[UIApplication sendEvent:] ()
#19        0x3280cc52 in _UIApplicationHandleEvent ()
#20        0x322b7e76 in PurpleEventCallback ()
#21        0x3113ba96 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ ()
#22        0x3113d83e in __CFRunLoopDoSource1 () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:52:25.360

两个想法：

1.  您收到的错误是由于无法导入内置模块。

    来自[http://hg.python.org/releasing/3.2.3/file/86d1421a552c/Objects/exceptions.c](http://hg.python.org/releasing/3.2.3/file/86d1421a552c/Objects/exceptions.c)

    ```
    2040     bltinmod = PyImport_ImportModule("builtins");   
    2041     if (bltinmod == NULL)
    2042         Py_FatalError("exceptions bootstrapping error."); 
    ```

    您可以从那里跟踪代码，并且有很多原因导致此导入失败。如果您想知道实际出了什么问题，则需要逐步解决。

2.  或者，您可以检查一下：

    [https://github.com/cobbal/python-for-iphone](https://github.com/cobbal/python-for-iphone)

    《将python编译成可与官方SDK一起使用的静态库的构建脚本》

# windows-phone-7 - 检测和记录电话应答和电话掉线事件？

> ID：10682571
> 
> 赞同：0
> 
> 时间：2012-05-21T09:22:24.873
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我想知道是否可以检测和注册来电以及注册掉线？

在做了一些研究之后，我注意到很多关于使用模糊事件的评论。

但这里的问题是，此事件并非特定于电话呼叫，因此收集的数据将不准确。

有没有办法验证哪些被隐藏的事件是实际来电或掉线？

如果这是可能的，你能用示例代码回复吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T09:28:31.383

不，由于没有任何可用选项，因此无法插入与电话相关的事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:31:16.987

当前的 Windows Phone SDK（版本 7.1.1）不允许您访问任何有关接听/挂断电话的信息，也不允许您访问它们的日志信息...

我想你必须使用互操作访问来实现这样的事情，但这总是很棘手！

# java - java中哪种模式的耦合度较低：将对象传递给方法还是使用组合？

> ID：10682573
> 
> 赞同：3
> 
> 时间：2012-05-21T09:22:39.540
> 
> 标签：java, parameters, composition, coupling

```
//Ex1: (passing by object)
class A {
}

class B {
   void foo(A a) {
      <do something with a>
   }
}

//Ex2: (composition)
class C {
   A a
   void foo(){
      <do something with a>
   }
} 
```

我的问题是：哪种模式的耦合度较低？在现实世界中哪种模式更受欢迎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:43:00.827

I will try to explain loose-coupling.

1.  Program in interface, that gives use the possibility of passing objects of different type which implements the same interface during runtime, and here classes from different inheritance tree can implement the same interface.

eg:

```
 Animal is the Interface

    Dog class implements Animal
    Cat class implements Animal
    Lion class implements Animal

   /////////////////
   calling method
  /////////////////

   callAnimal(new Dog);

  /////////////////
   called method
  /////////////////

  public void (Animal a){

   // some code

  } 
```

Encapsulate the behaviour which keeps changing.... into Abstract classes, or Interfaces, so it will be easy when changes comes, and as it is loosely coupled, there are less chances for the code to break.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:39:14.297

我想说两者都没有真正的低耦合，它更依赖于实现。对耦合最好的简单解释是，如果 A 类的属性发生变化，那么 B 类需要更改多少。在这种情况下，方法`foo`很可能必须在两种情况下进行相同的更改。

至于现实世界，这完全取决于情况。A类只用于B类吗？它是一个网络应用程序，您需要注入或退出 A 类吗？A班会是单身吗？什么将使用 B 类？每个班级甚至做什么？！

总之，在您查看每个类的功能以及它们将如何使用（这就是凝聚力的所在）之前，您不能以任何一种方式提出论点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:22:53.663

恕我直言，第二个选项（组合）是首选，因为：

*   *调用者*不需要知道`A`
*   `B`可以自由更改其实现以使用其他类而不是`A`完成其工作（不影响/重新编译调用代码）

第一个选项（通过对象传递）在调用者和`A`（尽管`B`以任何一种方式耦合）之间创建了更大的耦合。

# php - 尝试对用户数据库表进行身份验证时出现 Yii 登录错误

> ID：10682574
> 
> 赞同：0
> 
> 时间：2012-05-21T09:22:44.053
> 
> 标签：php, login, yii

我是 Yii 的新手，我正在关注著名的博客教程。但是，我遇到了用户身份验证问题。用户身份验证在实现 [IUserIdentity] 接口的类中执行：

```
class UserIdentity extends CUserIdentity
{
private $_id;

/**
 * Authenticates a user.
 * @return boolean whether authentication succeeds.
 */
public function authenticate()
{
    $user=User::model()->find('LOWER(username)=?',array(strtolower($this->username)));

    if($user===null)
        $this->errorCode=self::ERROR_USERNAME_INVALID;
    else if(!$user->validatePassword($this->password))
        $this->errorCode=self::ERROR_PASSWORD_INVALID;
    else
    {
        $this->_id=$user->id;
        $this->username=$user->username;
        $this->errorCode=self::ERROR_NONE;
    }
    return $this->errorCode==self::ERROR_NONE;
}

/**
 * @return integer the ID of the user record
 */
public function getId()
{
    return $this->_id;
}
} 
```

我没有将普通密码存储在数据库中，而是存储了密码的哈希结果和随机生成的盐密钥。在验证用户输入的密码时，我会比较哈希结果。

```
class User extends CActiveRecord
{  ...
   public function validatePassword($password)
    {
     return $this->hashPassword($password,$this->salt)===$this->password; }
   public function hashPassword($password,$salt)
   {
     return md5($salt.$password); }
} 
```

这是标准的 Yii 登录：

```
/**
 * Logs in the user using the given username and password in the model.
 * @return boolean whether login is successful
 */
public function login()
{
    if($this->_identity===null)
    {
        $this->_identity=new UserIdentity($this->username,$this->password);
        $this->_identity->authenticate();
    }
    if($this->_identity->errorCode===UserIdentity::ERROR_NONE)
    {
        $duration=$this->rememberMe ? 3600*24*30 : 0; // 30 days
        Yii::app()->user->login($this->_identity,$duration);
        return true;
    }
    else
        return false;
} 
```

问题是，当我尝试使用演示/演示登录时，我得到

> *用户名或密码错误*

我检查了数据库，用户名和密码正确保存在表中。对不起，如果我的问题很愚蠢。任何帮助将不胜感激。

谢谢，玛莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:36:54.070

标准做法是

```
<?php
function createHash( $password ) {
    $salt = getRandomBytes(8);
    $hash = $salt . hash($salt . $password);
    return $hash; // $hash is what you would store in, for example, your database
}

function checkHash( $password, $hash ) {
    $salt = substr($hash, 0, 8);
    $ok = ($salt . hash($salt . $password) == $hash);
    return $ok;
} 
```

看起来您没有将`$salt`值添加到哈希结果中。

**注意：**
现在使用 md5（和 sha1）被认为是不安全的。查看[crypt 的 BCrypt Hash (CRYPT_BLOWFISH)](http://php.net/crypt)。

```
<?php
// Same as above, but will use BCrypt hash (if PHP >= 5.3)
function createHash( $password ) {
    $salt = '$2a$08$'.getRandomBytes(22);
    $hash = crypt($password, $salt);
    return $hash; // $hash is what you would store in, for example, your database
}

function checkHash( $password, $hash ) {
    $ok = (crypt($password, $hash) == $hash);
    return $ok;
} 
```

# android - 一个安装两个应用程序的 .apk 文件

> ID：10682576
> 
> 赞同：18
> 
> 时间：2012-05-21T09:22:49.527
> 
> 标签：android, android-layout, android-widget, apk

这是一个关于具有两个不同 .apk （或一个 .apk 文件中包含两个应用程序）的 android 应用程序的问题

我有两个应用程序，它们做完全不同但相关的事情，比如说一个是标准用户应用程序，一个是管理应用程序。但是用户既可以是用户也可以是管理员。我想知道我是否可以创建一个 .apk 文件来将两个应用程序安装到手机上？我该怎么办呢？

谢谢，马特

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-27T10:27:07.623

您可以在同一个清单文件中有两个活动元素，它们同时具有*action=MAIN*和*category=LAUNCHER*的意图过滤器。此外，您还必须对两个活动元素使用属性“ *android:taskAffinity* ”（另请参见[此处](https://groups.google.com/forum/#!msg/android-beginners/ATJI7beqYzs/oB6q2HmjvmsJ)）：

```
<application android:allowBackup="true"        
             android:icon="@drawable/main_icon"
             android:label="@string/main_name"
             android:theme="@style/AppTheme" >

    <activity android:name="com.foobar.MyActivity2"            
              android:taskAffinity="com.foobar.MyActivity2"
              android:icon="@drawable/icon1"
              android:label="@string/name1" >
        <intent-filter>
            <action   android:name="android.intent.action.MAIN"       />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>        

    <activity android:name="com.foobar.MyActivity2"
              android:taskAffinity="com.foobar.MyActivity2"
              android:icon="@drawable/icon1"
              android:label="@string/name2" >
        <intent-filter>
            <action   android:name="android.intent.action.MAIN"       />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>             

</application> 
```

当带有此清单的 APK 文件安装在设备上时，它将在主屏幕上创建两个图标。这些图标的标题将取自属性*android:label*，图标将取自属性*android:icon*。在*“设置|应用程序”*下的应用程序列表中，您将看到由应用程序标签的属性定义的名称和图标。当您在应用程序列表中为此条目选择“卸载”时，两个“应用程序”都将从设备中删除。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-21T09:36:18.143

这取决于您对“应用程序”的定义。如果您使用更官方的定义，则不能安装 2 个应用程序，因为您的应用程序中只能安装 1`<application>`个`manifest.xml`

您可以在您的`manifest.xml`.`APK`

只需定义多个活动并使用这些活动可以定义为一个选项，但这取决于您对“应用程序”的定义，但在这种情况下，我会说它会起作用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-09T18:07:24.323

是的，您只需安装一个应用程序即可安装多个应用程序。
在 Manifest.xml 中 [![在此处输入图像描述](../Images/30b2dfed3535b151d5af8d764704c032.png)](https://i.stack.imgur.com/w3iKL.png)

项目结构：

[![在此处输入图像描述](../Images/7606f2af71e2ded9e41938ab532c6f3a.png)](https://i.stack.imgur.com/oweiH.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T09:27:50.730

您应该构建**2 个**使用[APK 扩展文件](http://developer.android.com/guide/market/expansion-files.html)的 APK 。

顺便说一句，这是一项安全措施。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T09:26:49.857

不。

您可以做的是检查是否已经安装了第二个应用程序，如果答案是否定的，您可以使用[此](http://android-developers.blogspot.com/2009/01/can-i-use-this-intent.html)帖子提示安装第二个应用程序的请求。

# php - 列表框显示来自选择框的数据并将其显示为在 php 中选择

> ID：10682578
> 
> 赞同：0
> 
> 时间：2012-05-21T09:22:54.163
> 
> 标签：php, ajax

我有一个列表框，我选择了 2 个项目（1 和 5）并将这两个值连续插入（用逗号将这两个值插入单行，即 1、5）。现在我需要从数据库中显示这些值，并且需要显示（1 和 5）作为选择。但我不知道这个（因为它被插入单行）

我已经尝试了很多，首先我获取这个值并存储在一个数组中，但它不起作用

有人知道吗？

但我不知道如何

有谁知道请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:46:05.727

假设您在整个 php 变量中都有值

```
$value = "1,5";
$values = explode(",",$value);
echo "<select multiple>";
// list has 10 items in example
foreach($x=1;$x<10;$x++) {
   echo "<option ";
   if (in_array($x,$values)) {
      echo "selected";
   }
   echo ">the option ".$x."</option>";
}
echo "</select>"; 
```

假设值是一个 JS 变量并且想要一个 javascript 解决方案（通过 ajax 方法）

```
<script type="text/javascript">
   var value = "1,5";
   var d = document.getElementById("list");   // get multi-list box; change "list" name
   var values = value.split(",");
   for(var x=0,sz=d.length;x<sz;x++) {
      for(y in values) {
         if (x==values[y]) { d.options[x].selected = true; }
      }
   }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:46:57.683

```
$SQL_Item='SELECT
    CombinedColumns
    FROM
    Your_Table
    WHERE
    [Criteria];';
$RSLT_Item=mysql_query($SQL_Item);
if(mysql_num_rows($RSLT_Item)){
    $Item=mysql_fetch_assoc($RSLT_Item);
    list($Selection1, $Selection2) = explode(', ', $sqlCombinedColumns);
} 
```

# blackberry - ListField 项目背景颜色

> ID：10682581
> 
> 赞同：0
> 
> 时间：2012-05-21T09:22:57.230
> 
> 标签：blackberry

我只想知道如何更改`ListField`项目背景颜色。我有两件`ListField`像这样的东西。

|第一个|第二个........|

我需要更改第一个的背景颜色。

我的`drawListRow(..)`方法看起来像这样

```
public void drawListRow(ListField listField, Graphics graphics, 
                                    int index, int y, int width) {
    int oldColor = 0;
    try {
        oldColor = graphics.getColor();
        String txt = (vector.elementAt(index)).toString();
        int xPos = 15;
        int yPos = 5 + y;

        //graphics.clear();
        graphics.setColor(Color.GREEN);
        graphics.fillRect(0, y, (Display.getWidth()*10/100), yPos);

        graphics.drawText(txt, xPos, yPos);
        //graphics.fillRect(0,(index*Display.getHeight()/10),Display.getWidth(),Display.getHeight()/10);
    } finally {
        graphics.setColor(oldColor);
    }
} 
```

但这不起作用。

![在此处输入图像描述](../Images/91002329ef4fd95069829c88fa581764.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:54:36.783

尽管您附上了图片，但我仍然感到困惑。该图像没有回答某些问题，例如，它将如何集中显示在一行上（我实际上不明白）。

但是您可以检查以下输出和代码。如果您检查代码，我认为您可以根据需要自定义外观。

***生成的输出***

![在此处输入图像描述](../Images/56e4bf4fbff37071fd813f98a7672fc9.png)

***如何使用***

```
public class MyScreen extends MainScreen {
    private Vector listElements;

    public MyScreen() {
        setTitle("Custom ListField Demo");

        // data for the ListField
        listElements = new Vector();
        for (int i = 0; i < 4; i++) {
            listElements.addElement("Some text for row " + i);
        }
        ListField taskList = new ListField() {
            // disable default focus drawing
            protected void drawFocus(Graphics graphics, boolean on) {
            };
        };
        taskList.setCallback(new ListCallback(listElements));
        taskList.setSize(listElements.size());
        taskList.setRowHeight(40);
        add(taskList);
    }
} 
```

***ListCallback 实现***

```
class ListCallback implements ListFieldCallback {
    final int COLOR_INDEX_NORMAL_BG = 0x1D6789;
    final int COLOR_INDEX_FOCUSED_BG = 0x0E8CB3;
    final int COLOR_NORMAL_BG = 0x2A2A2A;
    final int COLOR_FOCUSED_BG = 0x1F1F1F;

    private Vector listElements;
    public ListCallback(Vector listElements) {
        this.listElements = listElements;
    }

    public void drawListRow(ListField list, Graphics graphics, int index, int y,
            int width) {
        int rowHeight = list.getRowHeight(index);
        boolean isSelectedRow = (list.getSelectedIndex() == index);
        int indexBgColor = isSelectedRow ? COLOR_INDEX_FOCUSED_BG : COLOR_INDEX_NORMAL_BG;
        int rowBgColor = isSelectedRow ? COLOR_FOCUSED_BG : COLOR_NORMAL_BG;

        final int indexWidth = width / 10;

        // draw row background
        fillRectangle(graphics, rowBgColor, 0, y, width, rowHeight);
        // draw index background
        fillRectangle(graphics, indexBgColor, 0, y, indexWidth, rowHeight);

        // set text color, draw text
        Font font = list.getFont();

        graphics.setColor(Color.WHITE );
        graphics.setFont(font);

        String indexText = "" + (index + 1);
        String textToDraw = "";
        try {
            textToDraw = (String) listElements.elementAt(index);
        } catch (Exception exc) {
        }

        int xText = (indexWidth - font.getAdvance(indexText)) / 2;
        int yText = (rowHeight - font.getHeight()) / 2;
        graphics.drawText(indexText, xText, y + yText, 0, indexWidth);

        final int margin = 5;
        int availableWidth = (width - indexWidth) - 2 * margin;
        xText = indexWidth + margin;
        yText = (rowHeight - font.getHeight()) / 2;
        graphics.drawText(textToDraw, xText, y + yText, DrawStyle.ELLIPSIS, availableWidth); 
    }

    private void fillRectangle(Graphics graphics, int color, int x, int y, int width, int height) {
        graphics.setColor(color);
        graphics.fillRect(x, y, width, height);
    }

    public Object get(ListField list, int index) {
        // not implemented
        return "";
    }

    public int indexOfList(ListField list, String prefix, int string) {
        // not implemented
        return 0;
    }

    public int getPreferredWidth(ListField list) {
        return Display.getWidth();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:48:28.177

如果您需要更改 onFocus 背景颜色而不是在 ListField 上添加 drwFocus 方法。

```
protected void drawFocus(Graphics graphics, boolean on) {
        //get the focus rect area
        XYRect focusRect = new XYRect();
        getFocusRect(focusRect);

    boolean oldDrawStyleFocus = graphics.isDrawingStyleSet(Graphics.DRAWSTYLE_FOCUS);
    try {
        if (on) {
            //set the style so the fields in the row will update its color accordingly
            graphics.setDrawingStyle(Graphics.DRAWSTYLE_FOCUS, true);
            int oldColour = graphics.getColor();
            try {
                graphics.setColor(0xc8d3db); //set the color and draw the color
                graphics.fillRect(focusRect.x, focusRect.y,
                        focusRect.width, focusRect.height);
            } finally {
                graphics.setColor(oldColour);
            }
            //to draw the row again
            drawListRow(this, graphics, getSelectedIndex(),
                    focusRect.y, focusRect.width);
            //              drawRow(graphics, focusRect.x,focusRect.y, focusRect.width,focusRect.height);
        }

    } finally {
        graphics.setDrawingStyle(Graphics.DRAWSTYLE_FOCUS, oldDrawStyleFocus);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:50:50.173

检查编辑的答案，

```
 protected void drawFocus(Graphics graphics, boolean on) {
    XYRect focusRect = new XYRect();
    getFocusRect(focusRect);

   boolean oldDrawStyleFocus = graphics.isDrawingStyleSet(Graphics.DRAWSTYLE_FOCUS);
     try { 
```

如果（开）{

```
 graphics.setDrawingStyle(Graphics.DRAWSTYLE_FOCUS, true);

        int oldColour = Color.BLACK;

     try {

        graphics.fillRect(focusRect.x, focusRect.y,
                              focusRect.width, focusRect.height);
        } finally {
            graphics.setColor(oldColour);
        }
        //to draw the row again
        drawListRow(this, graphics, getSelectedIndex(),
                    focusRect.y, focusRect.width);
    }

} finally {
  graphics.setDrawingStyle(Graphics.DRAWSTYLE_FOCUS, oldDrawStyleFocus);
} 
```

}

# macos - Mac OS X PackageMaker

> ID：10682583
> 
> 赞同：2
> 
> 时间：2012-05-21T09:23:05.580
> 
> 标签：macos, packagemaker

我正在尝试通过 PackageMaker 的命令行界面自动构建 Mac OS X 包。到目前为止，我设法构建包并运行安装后脚本。告诉我有没有办法在通过命令行构建时添加*选择？*因为我希望用户可以选择运行或不运行安装后脚本。PS：我不想使用“.pmdoc”。这个选项很糟糕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:30:56.507

正如我在评论中所说，PackageMaker 列出了我添加到项目中的文件并将其写入它的项目中。因此，如果我想添加一个文件，我需要打开项目，删除包含该文件的选项，最后，再次添加包含新文件的所有文件。或直接编辑项目的 XML 文件。使用 PackageMaker 自动构建我的项目的包是难以忍受的。所以我换了一个工具。一些谷歌搜索帮助我找到了 **[Packages](http://s.sudre.free.fr/Software/Packages/about.html)**。这个工具也不是很理想，但它比 Apple 的要好得多。Mojca 大致描述了到目前为止我使用 PackageMaker 所做的工作。在使用**包**时，我还必须使用项目文件。但该软件不会收集有关您添加到项目中的所有文件的信息，除非您明确告诉它这样做： ![这个屏幕很有帮助](../Images/71f864f0718a55637d4b81e232789129.png)

您可以在图片上看到我可以选择应该将哪些深度文件包含在项目中。*.app*文件夹下的所有文件夹都被手动扩展，以确保可以包含新文件的文件夹也没有被扩展。在这种情况下，它是**Java**文件夹。下一步也是最后一步是使用**Ant**组装包：

```
 <exec executable="/usr/local/bin/packagesbuild">
            <arg value="-v"/>
            <arg value="${basedir}/Installer/MyProject.pkgproj"/>
 </exec> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T14:59:28.223

在用 packagemaker 的命令行参数折腾了一阵子之后，我发现有更多最新的和相关的工具：[pkgbuild](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html)和[productbuild](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/productbuild.1.html#//apple_ref/doc/man/1/productbuild)。

我暂时没有使用它们，因为我找到了一种方法来做我想要折磨包装制造商的事情。

希望这会帮助一些不幸的 Mac 开发者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T10:24:02.773

这不完全是您问题的答案，但一位经验丰富的 Mac 开发人员最近花了很多时间测试和与 PackageMaker 斗争，给了我以下提示：

> 你可以从命令行调用PackageMaker，但看起来Apple并没有在这方面花费太多精力，而且很多事情都不起作用。因此，请改用 GUI 界面。

我决定接受他的教训。作为一个很好的折衷方案，对我有用的是一次只使用 GUI 来准备初始`.pmdoc`文件并手动对这些 xml 文件进行任何后续更改。然后我们在 Xcode 项目中有一个调用 packagemaker 的目标：

```
packagemaker --doc $SRCROOT/Project.pmdoc --out $BUILT_PRODUCTS_DIR/stage/ProjectInstaller.pkg
hdiutil create $BUILT_PRODUCTS_DIR/Project-$VERSION.dmg -volname \"Project-$VERSION\" -fs HFS+ -srcfolder \"$BUILT_PRODUCTS_DIR/stage 
```

所以我们现在需要做的（除了增加`.pmdoc`文件中的版本）就是调用

```
xcodebuild -target Package 
```

获取`.dmg`图像。

*`.pmdoc`尽管您明确要求不要在从头开始创建包时主要用于分享（其他人）对 CLI 的不良体验，但我还是决定发布此答案。而且因为我第一次没有意识到使用 GUI 创建一个包并不意味着我每次想要修改某些东西或构建一个包时都需要使用“奇怪的 GUI 工具”。*

# c# - nTier + 运行时解析中的依赖注入

> ID：10682585
> 
> 赞同：2
> 
> 时间：2012-05-21T09:23:10.553
> 
> 标签：c#, .net, wcf, dependency-injection

我一直在阅读依赖注入（[Mark Seemann：.NET 中的依赖注入](http://www.manning.com/seemann/)和各种文章），以帮助我的团队开发基于 EntityFramework、WCF 和 WPF 的新 3 层应用程序。

我假设我们的每一层都需要一个组合根，因为它们通过服务（**DAL** <-> WCF <-> **BL** <-> WCF <-> **PL / UI**）进行通信。

我们的要求之一是我们需要动态加载和配置 EF，以便我们可以在应用程序部署后更改/扩展我们的模型。

在不详细介绍我们的 BL --> PL/UI 实现的情况下，让我们关注我们的 DAL，它通过自定义 serviceHost 后面的 EntityService 公开。我们的项目以一个简单的例子进行了如下布局：

## 项目.数据模型

*   *单个组件*
*   *硬参考：无*
*   *运行时分辨率：无*
*   一个为抽象类提供数据建模接口的通用库。即EntityData抽象类

## Project.DataModel.[?]数据

*   *许多程序集：即 CityData、CustomerData 等*
*   *硬参考：Project.DataModel*
*   *运行时分辨率：无*
*   定义基于 EntityData 的单个或多个实体的组件

## Project.DataModel.[?]DataConfiguration

*   *许多程序集：即 CityDataConfiguration、CustomerDataConfiguration 等*
*   *硬引用：Project.DataModel.[?]Data、EntityFramework*
*   *运行时分辨率：无*
*   为上一个程序集中定义的实体定义 EntityTypeConfiguration 的组件。

## 项目.数据访问

*   *单个组件*
*   *硬引用：Project.DataModel、EntityFramework*
*   *运行时分辨率：Project.DataModel.[?]Data、Project.DataModel.[?]DataConfiguration*
*   通过 EntityManager（抽象）提供 DbContext 的数据访问库。在运行时，此程序集查看配置或目录，加载 EntityTypes 及其等效的 EntityTypeConfigurations 并动态创建模型。

## Project.ServiceModel.EntityDataService

*   *单个组件*
*   *硬引用：Project.DataModel、Project.DataAccess*
*   *运行时分辨率：无*
*   通过 EntityManager 类对 EntityData 对象提供 CRUD 操作的通用服务。

## Project.ServiceModel.EntityDataServiceContract

*   *单个组件*
*   *硬参考参考：Project.DataModel*
*   *运行时分辨率：Project.DataModel.[?]Data*
*   暴露服务契约并且需要定义 ServiceKnownTypes 所以我们需要 EntityTypes 的运行时解析。

## 项目.ServiceHost

*   *单个组件*
*   *硬引用：无*
*   *运行时解析：Project.ServiceModel.[?]Service、Project.ServiceModel.[?]ServiceContract*
*   一个自定义的 ServiceHost，它将在运行时（通过配置或目录扫描）解析和加载各种服务，例如 EntityDataService。

这感觉很像一个插件项目，我们在编译时了解不多，并且程序集之间没有太多硬引用。

在这种情况下，您将如何实施 DI。我真的无法确定如何以及在何处使用 DI 或 DI Container、Composition Root 等等。

非常感谢您的意见。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-07T03:12:23.500

人们有办法让依赖注入过于复杂。如果 FirstClass 需要一个 ISecondClass 来工作，那么只要确保没有它就不能构造它。组合根本质上是一个类，它的依赖关系你可以跟踪到其他所有东西。确保您的接口都已注册实例（单例生命周期通常可以很好地完成工作），实例化组合根并且大多数东西应该“正常工作”。如果没有，则涉及的内容比需要的要多。

WizBang 应用程序可能如下所示：

```
interface IThingDoerA
{
}

class ThingDoerA : IThingDoerA
{
}

interface IThingDoerB
{
}

class ThingDoerB : IThingDoerB
{
    private readonly IThingDoerA _tda;
    public ThingDoerB(IThingDoerA tda)
    {
        _tda = tda;
    }
}

interface IThingDoerC
{
}

class ThingDoerC : IThingDoerC
{
    private readonly IThingDoerA _tda;
    private readonly IThingDoerB _tdb;
    public ThingDoerC(IThingDoerA tda, IThingDoerB tdb)
    {
        _tda = tda;
        _tdb = tdb;
    }
}

// I am the composition root.
interface IWizBang
{
    public void StartApp();
}

class WizBang : IWizBang
{
    private readonly IThingDoerA _tda;
    private readonly IThingDoerC _tdc;
    public WizBang(IThingDoerA tda, IThingDoerC tdc)
    {
        _tda = tda;
        _tdc = tdc;
    }

    public void StartApp()
    {
        //TODO
        // _tda.Blah()
        // _tdc.Blah()
    }
} 
```

就 WPF 而言，您似乎可以在 System.Windows.Application 子类中执行一些轻量级方法调用来使您的应用程序运行。

# c# - wcf 与 Web 服务通信？

> ID：10682586
> 
> 赞同：-2
> 
> 时间：2012-05-21T09:23:21.773
> 
> 标签：c#, winforms, wcf, web-services, service

我想为 winforms 应用程序开发开发 Web 服务或 WCF .net 应用程序。哪个最适合 winforms 应用程序 Web 服务或 WCF，为什么？我的应用程序是客户端服务器应用程序，并且连接是持久的。我很困惑在这种情况下哪个最好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:26:07.507

WCF 应该是首选，如果不是因为它的功能，至少是因为它更现代并且支持时间更长。它还支持 net.tcp 连接，这可能适用于您提到的场景（Intranet suplex 通信）/

# jquery - Is there any way to change JUST the color of the textarea cursor without changing the font color?

> ID：10682587
> 
> 赞同：0
> 
> 时间：2012-05-21T09:23:24.457
> 
> 标签：jquery, css, textarea

I want to have a function for my website that lets users tag other users/articles. But, anchor tags are not supported inside textareas. So, I set the background to transparent for the textarea and places a div beneath it. On the keyup event, the div is populated with the value of the textarea. The only problem is that the user can't see the cursor since it's transparent. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:01:25.353

您可以通过 CSS 执行此操作...检查链接[http://beradrian.wordpress.com/2008/01/08/cross-browser-custom-css-cursors/](http://beradrian.wordpress.com/2008/01/08/cross-browser-custom-css-cursors/)

```
input, textarea {
    cursor: url(cursor.cur);
} 
```

# javascript - 在asp.net MVC中返回Jquery .ajax POST函数错误

> ID：10682588
> 
> 赞同：2
> 
> 时间：2012-05-21T09:23:30.570
> 
> 标签：javascript, jquery, asp.net-mvc, json

我有一个重定向到 Asp.net MVC 操作方法的 JavaScript 函数。

```
[AcceptVerbs(HttpVerbs.Post)]
    public ActionResult SupplierDetail(int SupplierID)
    {
        int test = SupplierID;
        return View();
    }

/// Java Script Code ...

$('#list .clsRowButtonClick').live('click', function () {
        var id = $(this).attr('RowID');
        var type = $(this).attr('ButtonType');
        alert("ID: " + id + " \nButtonType :" + type);

        var Supplier = {};
        Supplier.SupplierID = id;
        var jsonString = JSON.stringify(Supplier);

        $.ajax({
            type: "POST",
            url: "/Supplier/SupplierDetail/",
            dataType: "json",
            data: jsonString,
            contentType: "application/json; charset=utf-8",                
            success: function (response, textStatus, jqXHR) {
                alert("success");
            },
            error: function (jqXHR, textStatus, errorThrown) {
                //alert(jsonString);
                alert("jqXHR.responseText --> "+ jqXHR.responseText + "\njqXHR --> " + jqXHR + "\ntextStatus --> " + textStatus + " \nerrorThrown --> " + errorThrown);
            }
        });
    }); 
```

它按我的预期工作。`SupplierDetail`它通过提供更正的参数值来触发Action Method。

但是在调用名为`SupplierDetail`.

所以我使用`javascript alert function`.

```
jqXHR.responseText --> <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<title>SupplierDetail</title>
<link href="/Content/themes/Redtheme/theme.css" rel="stylesheet" type="text/css" />
<link href="/Content/themes/Redtheme/style.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/jquery-1.6.3.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
<script src="/Scripts/modernizr-2.0.6-development-only.js" type="text/javascript">    </script>
<link href="/Scripts/jqgrid_utils/css/cupertino/jquery-ui-1.8.18.custom.css" rel="stylesheet" type="text/css" />
<link href="/Scripts/jqgrid_utils/css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/jqgrid_utils/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.base.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.celledit.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.common.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.custom.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.filter.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.formedit.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.grouping.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.import.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.inlinedit.js" type="text/javascript">    </script>  
<script src="/Scripts/jqgrid_utils/grid.jqueryui.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.loader.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.subgrid.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.tbltogrid.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/grid.treegrid.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/jqDnR.js" type="text/javascript"></script>  
<script src="/Scripts/jqgrid_utils/jqModal.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/jquery.fmatter.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/JsonXml.js" type="text/javascript"></script>
<script src="/Scripts/jqgrid_utils/jquery.jqGrid.min.js" type="text/javascript">    </script>
</head>
<body>
<div id="container">
<div id="header">
    <div>
        <h2>POS 2012</h2>
    </div>
    <div id="topmenu">
        <ul>
            <li class="current"><a href="./MemberRegistration.jsp">Suppliers</a></li>
            <li><a href="./RetailerRegistration.jsp">Products</a></li>
            <li><a href="./Index.jsp">SupplierOrder</a></li>
            <li><a href="#">Contact us</a></li>
        </ul>
    </div>
</div>
<div id="wrapper">
<h2>SupplierDetail</h2>
<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript">    </script>
<form action="/Supplier/SupplierDetail/" method="post">    <fieldset>
    <legend>Supplier</legend>
    <div class="editor-label">
        <label for="SupplierName">SupplierName</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" id="SupplierName" name="SupplierName" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="SupplierName" data-valmsg-replace="true"></span>
    </div>
    <div class="editor-label">
        <label for="Address">Address</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" id="Address" name="Address" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>
    </div>
    <div class="editor-label">
        <label for="Phone">Phone</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" id="Phone" name="Phone" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="Phone" data-valmsg-replace="true"></span>
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
</form>
<div>
<a href="/">Back to List</a>
</div>
</div>
<div id="footer">
    <div id="credits">
        Copy right &copy; ....
    </div>
    <br />
</div>
</div>
</body>
</html>
jqXHR --> [object Object]
textStatus --> parsererror 
errorThrown --> SyntaxError: JSON.parse: unexpected character 
```

每一个建议都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:26:22.440

*看起来*您期待来自服务器的 HTML 响应 - 因此您需要将`dataType`选项的值更改为“html”，（或完全删除它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:04:17.867

```
[HttpPost]
public JsonResult SupplierDetailTest(int SupplierID)
{
    int test = SupplierID;
    return Json(true, JsonRequestBehavior.AllowGet);
}

$(document).ready(function () {
    $('#list .clsRowButtonClick').live('click', function () {
        var SupplierID = $(this).attr('RowID');

        $.ajax({
            url: "/Supplier/SupplierDetailTest/", type: "POST", dataType: "json",
            data: { SupplierID: SupplierID },
            //contentType: "application/json; charset=utf-8",
            success: function (data) {
                alert("success");
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("jqXHR.responseText --> " + jqXHR.responseText + "\njqXHR --> " + jqXHR + "\ntextStatus --> " + textStatus + " \nerrorThrown --> " + errorThrown);
            }
        });
    });
}); 
```

# oracle - Oracle DB - Select Multiple Columns As Alias

> ID：10682589
> 
> 赞同：1
> 
> 时间：2012-05-21T09:23:35.363
> 
> 标签：oracle, alias

When working with Oracle is it possible to select multiple columns at once and assign them each an alias? I have Googled around but can't seem to come up with a straight answer. An example of what I want to do would be something like:

```
SELECT prod_id, prod_name AS "Product ID", "Product Name" FROM tbl_products 
```

When I run this I get the error: ORA-00904: "Product Name": invalid identifier

Any advice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:25:27.763

我想你的意思是这样的：

```
SELECT prod_id AS "Product ID", prod_name AS "Product Name" FROM tbl_products 
```

# php - how to parse MAX(id) to number integer

> ID：10682590
> 
> 赞同：0
> 
> 时间：2012-05-21T09:23:36.857
> 
> 标签：php, mysql

when I run the method:

```
public function latest_idf() {
        global $database;
        $sql = "SELECT  FROM ".self::$table_name;
        $result_id=($database->query($sql));
            return ($result_id);

} 
```

the variable `$result_id` returns `resource (11) of type ("mysql result")` or `Resource id #5` which I need to parse to integer for max id number, how can I return the `$result_id` as a number integer ?

`Resource id #5` it is not my max row.

I have 6 row and in my table.

Did `max(id)` is beginning from 0 to 5 ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:28:11.207

`Resource id #5`表示您的 query() 方法实际上返回了指向结果的“指针”，而不是结果本身。

根据您在后台使用的库来访问 mysql，您需要从此资源中检索数据。如果您正在使用 mysql_* 函数，例如可以使用：

```
$row = mysql_fetch_array($resualt_id);
return $row[0]; 
```

# .net - EF Concurrency Handling with Timestamp attribute in Model First approach

> ID：10682591
> 
> 赞同：5
> 
> 时间：2012-05-21T09:23:37.750
> 
> 标签：.net, entity-framework-4, optimistic-concurrency

I am trying to implement the solution given in [Handling Concurrency with the Entity Framework in an ASP.NET MVC Application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application) .

The article says:

> ## Adding a Tracking Property to the Department Entity
> 
> In Models\Department.cs, add a tracking property:
> 
> ```
> [Timestamp] 
> public Byte[] Timestamp { get; set; } 
> ```
> 
> The Timestamp attribute specifies that this column will be included in the Where clause of Update and Delete commands sent to the database.

Since I'm using a **model first** approach, I followed steps 1 - 5 outlined in [Creating a Timestamp column with Entity Framework](http://www.undisciplinedbytes.com/2012/03/creating-a-timestamp-column-with-entity-framework/)

1.  Add a property named “Timestamp” to the entity in EF’s model
2.  Set the type to binary
3.  Set nullable to false
4.  Set StoreGeneratedPattern to Computed
5.  Set ConcurrencyMode to Fixed

When I update my code from the database model, the Models\Department.cs now contains

```
 public virtual byte[] Timestamp
    {
        get;
        set;
    } 
```

Then I used the metadata class to specify the Timestamp attribute:

```
// Metadata for Department entity
public class DepartmentMetadata
{
    [Timestamp]
    public byte Timestamp { get; set; }
} 
```

**Q1.** I tested whether the value of the `Timestamp` column is changing in case of row edits. It isn't.

**EDIT 1** The problem was caused because the SQL Server column type was `binary`, where it should have been of type `timestamp`. Changing the data type fixed the issue of the Timestamp column not getting updated.

**Q2.** I was trying to modify the same entity (using "Open in new tab") to see if an `OptimisticConcurrencyException` is thrown. It isn't. What am I doing wrong? Please help me understand, thanks.

![Screenshot of my <code>Timestamp</code> property](../Images/5897da91756cdea926b147ca742738de.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:37:14.310

问题是因为我每个 HTTP 会话都有一个 ObjectContext，因此打开一个新选项卡并对其进行测试**不会**导致并发异常。

# iphone - XCode / Git，更新文件的状态在源代码控制中没有更新

> ID：10682598
> 
> 赞同：5
> 
> 时间：2012-05-21T09:24:08.697
> 
> 标签：iphone, xcode, git

我想我也有很多人可能遇到的问题。我正在使用第三方库。自然，当供应商发布新版本时，我必须更新项目中的头文件等。但是 XCode 没有替换功能，所以必须删除！文件并将新文件再次复制到项目中。但是，因为我已经这样做了，所以我有一个头文件，它一直处于状态 A 添加和一个资源包（一个包含来自 SDK 的图像和声音文件的目录），它一直告诉我它不存在，当我想提交整个项目。

任何想法，我怎样才能清理那个烂摊子？我向 Apple 提交了增强请求，因为我发现替换项目中的文件是一项必须功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:08:53.970

哦，是的，颠覆问题……我最后的手段是：删除本地文件，拉取最新版本，然后再次应用更改。对我来说，这个问题通常是通过添加或删除文件夹来发生的。所以我首先在服务器上添加/删除相关文件（通常在这种情况下我使用第三方应用程序，例如[gitbox](http://itunes.apple.com/us/app/gitbox/id403388357)或[SourceTree](http://itunes.apple.com/de/app/sourcetree-git-hg/id411678673)）然后再次尝试同步。

通常应该可以在一个项目中拥有多个 git repo（将库签出到您的项目中），但我个人不喜欢这样。相反，我在另一个目录中有第二个 repo，并将这些文件添加为链接引用（添加新文件时可以选择的选项 -> uncheck `"copy items into destinations group folder"`）。每当库更改时，它将自动应用于您的项目。缺点是它不会自动检查是否有可用更新。另一方面，使用较旧的库可能比使用新库更安全（每次更新库时，理论上您都会测试整个应用程序的错误）

回到你的问题。在许多情况下，创建新的存储库结构更容易。备份当前状态并删除存储库（本地或远程）。然后将文件复制回存储库并同步。应该解决几乎所有情况。（......每次我尝试以其他方式解决它时，我最终都会浪费时间尝试不同的方法来最终重建整个仓库，就像我上面描述的那样-.-）

# php - 如何在（html 表的）底部显示 MySQL 数据库中的“null”值？

> ID：10682600
> 
> 赞同：2
> 
> 时间：2012-05-21T09:24:16.813
> 
> 标签：php, mysql

有来自 MySQL 的记录`PHP` `array`填充：`sorted``table`

```
 function recupererDroitCreateur($user_id, $isAdmin = null) {
        $ret    = array() ; // this will be the returned array

        // Requête de sélection de tous les menus
        $sSQL = "SELECT m.menu_code, m.menu_lib, m.menu_action, m.menu_titre, cm.class_menu_lib, cm.class_menu_code
                     FROM menu m
                     LEFT JOIN classe_menu cm
                     ON m.class_menu_code = cm.class_menu_code
                     WHERE m.menu_deleted = 0 AND m.menu_visible = 1
                     ORDER BY cm.class_menu_lib, m.menu_titre";
        $this->db->query($sSQL) ;
        $ret['cnt'] = $this->db->num_rows();
        $i = 0;
        while ( $this->db->next_record() ) {
            $ret[$i]["menu_code"]   = $this->db->f('menu_code');
            $ret[$i]["menu_lib"]    = stripslashes($this->db->f('menu_lib'));
            $ret[$i]["menu_action"] = stripslashes($this->db->f('menu_action'));
            $ret[$i]["menu_titre"]  = stripslashes($this->db->f('menu_titre'));
            $ret[$i]["class_menu_lib"]  = stripslashes($this->db->f('class_menu_lib'));
            $ret[$i]["class_menu_code"]     = stripslashes($this->db->f('class_menu_code'));
            $i++;
        }

        return ($ret);
    } 
```

“cm.class_menu_lib”列中有`null`值，它是查询的排序列。因此，当在 html 表中显示数组的内容时，首先显示空记录！如何最后显示空记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:32:16.227

```
SELECT m.menu_code, m.menu_lib, m.menu_action, m.menu_titre, cm.class_menu_lib, cm.class_menu_code
FROM menu m
LEFT JOIN classe_menu cm
ON m.class_menu_code = cm.class_menu_code
WHERE m.menu_deleted = 0 AND m.menu_visible = 1
ORDER BY cm.class_menu_lib IS NULL, cm.class_menu_lib, m.menu_titre 
```

基本上`NOT NULL < NULL`，因此您将其添加为第一个排序键。

实际操作：[http ://www.sqlfiddle.com/#!2/226a4/1](http://www.sqlfiddle.com/#!2/226a4/1)

# javascript - jquery - 捕获指定元素的负载

> ID：10682601
> 
> 赞同：1
> 
> 时间：2012-05-21T09:24:18.167
> 
> 标签：javascript, jquery

我想捕获/处理指定项目的负载（如果它是动态加载的）。

如果事件是`click`它工作正常：

```
$('#articles').on("click",".article",function(eo){
        //...               
    }); 
```

这是我尝试过的：

```
$(document).on("load","input",function(){
    alert(1);
});​ 
```

这就是我将如何使用它：

```
<input type=hidden name='size' value=1>
<select name='size'>
  <option value=0>A4</option>
  <option value=1>A3</option><!--this will be selected, that is indicated with the hidden input-->
</select> 
```

执行此操作的脚本：

```
$(document).on("load","input",function(e){
    var name = e.attr("name");
    var val = e.val(); 
    if(name!=""&& typeof(e)!="undefined")
    {
       e.parent().find('select[name='+name+']').val(val);               
    }       
});​ 
```

* * *

如果可能的话，我在问某种 on() 函数，因为手册说它是首选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:55:14.123

我建议如下：

```
$(document).on('DOMNodeInserted', 'input', function(e) {
    console.log($(this));
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/YuKxd/)。

如果您担心那些使用未实现的浏览器的体验`DomNodeInserted`，那么您当然可以在将元素附加到 DOM 时触发具有自定义事件名称的事件，然后监听使用以下方法处理*该*事件`on()`：

```
$(document).on('customEventName', 'input', function(e) {
    console.log($(this));
});

$('#add').click(
    function() {
        var i = $('input').length,
            input = $('<input />',{'id' : 'input_' + i});
        input.appendTo('body').trigger('customEventName');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/YuKxd/1/)。

* * *

参考：

*   [DOM 3 级事件，包括`DOMNodeInserted`](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents).
*   [`on()`](http://api.jquery.com/on/).
*   [`trigger()`](http://api.jquery.com/trigger/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:36:02.723

如果您正在查找特定元素，您可以使用`setTimeout`它定期查找与新选择器匹配的元素。

```
function findNew() {
   var $selected = $('.some-selector').filter(function() {
       return !$(this).data('filtered');
   });

   $(document).trigger({type: 'elementadded', elements:$selected });

   $selected.data('filtered', true);

   setTimeout(findNew, 500);
}

$(document).on('elementadded', function(e) {
  alert('found ' + e.elements.length + ' new elements.');
});

findNew(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:29:25.263

你可能想看看 jquery 的 livequery 插件：

[http://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery)

```
$('input') 
.livequery(function(){ 
alert(1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:29:45.877

如果它在动态加载的元素上 try `.live()`，它的工作方式就像`.bind()`只保持搜索打开动态添加的元素并在它们出现时绑定它们。

# javascript - 在 JavaScript 中正确使用 IndexOf

> ID：10682602
> 
> 赞同：3
> 
> 时间：2012-05-21T09:24:22.050
> 
> 标签：javascript, indexof

我有一个简单的 JavaScript 语句，它读取一个字符串并根据它包含的内容触发一个 URL，但我不确定我是否使用`IndexOf`正确，所以我只是想检查一下。

这是我的代码片段：

```
<script type="text/javascript"> 

var mc_u1 = "somevariable";

if (mc_u1.indexOf("1|Accept") > 0) {
document.writeln("<img src=\"https://www.someurl1.com\">");
}

if (mc_u1.indexOf("1|Refer") > 0) {
document.writeln("<img src=\"https://www.someurl2.com\">");

}

if (mc_u1.indexOf("2|Accept") > 0) {
document.writeln("<img src=\"https://www.someurl3.com\">");

}

if (mc_u1.indexOf("2|Refer") > 0) {
document.writeln("<img src=\"www.someurl4.com\">");

}

</script> 
```

正如您从上面的代码中看到的那样，我正在尝试做的是基于变量`mc_u1`触发 URL 的内容（尽管出于明显的原因我只是将它们屏蔽了，但它们是不同的）。

我的问题是，如果`mc_u1`变量以 say 开头，我`1|Accept`应该`> -1`在 Javascript 语句中使用还是`> 0`？

希望这是有道理的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:28:30.940

来自[**MDN**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)：

> `string.indexOf(searchValue[, fromIndex])`
> 
> `String`返回指定值第一次出现的调用对象内的索引，从 开始搜索，如果未找到该值则`fromIndex`返回。`-1`

因此，为了检查您的变量是否以您开头，`"1|Accept"`您应该检查是否`indexOf`返回`0`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T09:26:12.300

0 是第一个字母的索引，所以如果你的子字符串出现在字符串的开头，`> 0`将不匹配。所以`> -1`在字符串中的任何地方使用 for 并且`== 0`总是在字符串的开头使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:26:07.877

您应该`== 0`从一开始就使用，索引将为 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:30:03.567

`mc_u1.indexOf("1|Accept") > 0`如果字符串仅在某处包含子字符串，也将成立。如果`-1`找不到子字符串。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)

# doxygen - 使用 autotools 生成（和安装）doxygen 文档

> ID：10682603
> 
> 赞同：4
> 
> 时间：2012-05-21T09:24:24.020
> 
> 标签：doxygen, autotools, libtool

我正在编写一个库（使用 libtools），其中所有 API 文档都是使用 doxygen 完成的。

我想知道是否有一种简单的方法可以将生成的 doxygen 文档的安装集成到 autotools 中。

我认为构建文档应该很容易。但是一旦我运行了 doxygen，将生成的（例如）.html 文件放入 $(htmldir) 的正确方法是什么？

问题似乎是我不知道（我也不想知道）doxygen 将为我创建哪些文件，所以我不能真正将它们全部枚举到 html_DATA

我认为像 'html_DATA=html/*.*' 这样的东西是个**坏**主意

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-27T06:25:02.630

使用一些贡献的 MACRO 可能更紧凑。在这里，我根据 John Calcote 的 AUTOTOOLS 书 pg 246 中的示例找出了一个简单的方法。

将以下内容添加到 configure.ac 的正上方

```
AC_CONFIG_FILES([Makefile 
```

线

```
AC_CHECK_PROGS([DOXYGEN], [doxygen])
if test -z "$DOXYGEN"; then
   AC_MSG_WARN([Doxygen not found - continue without Doxygen support])
fi
AC_CHECK_PROGS([DOT], [dot])
if test -z "$DOT"; then
   AC_MSG_ERROR([Doxygen needs dot, please install dot first])
fi
AC_CHECK_PROGS([PDFLATEX], [pdflatex])
if test -z "$PDFLATEX"; then
   AC_MSG_ERROR([Doxygen needs pdflatex program, it is part of TeX http://www.tug.org/texlive/acquire-netinstall.html])
fi
AM_CONDITIONAL([HAVE_DOXYGEN], [test -n "$DOXYGEN"])
AM_COND_IF([HAVE_DOXYGEN], [AC_CONFIG_FILES([docs/Doxyfile])])
AM_COND_IF([HAVE_DOXYGEN], [AC_CONFIG_FILES([docs/Makefile])]) 
```

在 PROJECTDIR/docs 目录中

添加两个文件：Doxyfile.in 和 Makefile.am

使用替换变量例如：

```
PROJECT_NAME           = @PACKAGE_NAME@
PROJECT_NUMBER         = @PACKAGE_VERSION@
INPUT                  = @top_srcdir@ 
```

然后对其他 doxygen 配置字段进行适当的修改。

```
LATEX_OUTPUT           = latex
PDF_HYPERLINKS         = YES
USE_PDFLATEX           = YES 
```

这样，您将生成 pdf 文件。

Makefile.am 应该很简单：

```
if HAVE_DOXYGEN
directory = $(top_srcdir)/docs/man/man3

man_MANS = $(directory)

$(directory): doxyfile.stamp

doxyfile.stamp: Doxyfile
    $(DOXYGEN) $^
    cd latex && $(MAKE)
    echo Timestamp > $@

CLEANFILES = doxyfile.stamp

all-local: doxyfile.stamp
clean-local:
    -rm -rf $(top_srcdir)/docs/man

endif 
```

（确保在复制时尊重 Makefile 缩进。）

这似乎对我有用。生成的文档在 docs 文件夹中生成。如果我犯了任何错误，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:34:50.997

我使用 Oren Ben-Kiki 的宏，请参阅[http://www.ben-kiki.org/oren/doxample/](http://www.ben-kiki.org/oren/doxample/)或谷歌它。该脚本以 PDF/HTML/man（可配置）格式创建 doxygen 文档。

将您生成的帮助文件添加到 Makefile.am 中的 *dist_doc_DATA* 列表中，以安装它们。

# python - 将字典转换为字符串和字符串转换为字典

> ID：10682604
> 
> 赞同：0
> 
> 时间：2012-05-21T09:24:25.590
> 
> 标签：python

我有以下代码：

```
>>> word_array = defaultdict(list)
>>> word_array['first'].append(1)
>>> word_array['first'].append(2)
>>> word_array
defaultdict(<type 'list'>, {'first': [1, 2]}) 
```

我将它转换为字符串整个数据结构，但是当我尝试从字符串转换它时我不能，我得到以下信息：

```
>>> ast.literal_eval(str(word_array))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/ast.py", line 49, in literal_eval
    node_or_string = parse(node_or_string, mode='eval')
  File "/usr/lib/python2.7/ast.py", line 37, in parse
    return compile(source, filename, mode, PyCF_ONLY_AST)
  File "<unknown>", line 1
    defaultdict(<type 'list'>, {'first': [1, 2]})
                ^
SyntaxError: invalid syntax 
```

有没有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:30:50.707

您在这里要做的就是将数据结构*序列*化为字符串，然后将其*反序列*化回数据结构。不要`ast.literal_eval`在生产中使用类似的东西。只需使用`pickle`：

```
import pickle
from collections import defaultdict

word_array = defaultdict(list)
word_array['first'].append(1)
word_array['first'].append(2)

s = pickle.dumps(word_array)
other = pickle.loads(s)

print other 
```

给出：

```
defaultdict(<type 'list'>, {'first': [1, 2]}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:32:25.397

如果您不关心它是否处于`defaultdict`解码状态，请使用`json`. 如果您*确实*关心，那么也可以使用`json`，但通过传递一个用于对象解码的函数`object_hook`。

```
>>> d = collections.defaultdict(list)
>>> d['first'] = [1, 2]
>>> json.dumps(d)
'{"first": [1, 2]}'
>>> json.loads('{"first": [1, 2]}')
{u'first': [1, 2]}
>>> def ddoh(d):
...   res = collections.defaultdict(list)
...   res.update(d)
...   return res
... 
>>> json.loads('{"first": [1, 2]}', object_hook=ddoh)
defaultdict(<type 'list'>, {u'first': [1, 2]}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T09:33:54.470

你想序列化/反序列化对象吗？如果是这样，[Pickle python 模块](http://docs.python.org/library/pickle.html?highlight=pickle#pickle)就是为你准备的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-19T19:09:23.497

当无法以反序列化格式保存时，这是一个对我有用的解决方案：

```
from collections import defaultdict
import ast

teststring = "{'MATERIAL': ['a', 'b']}"
a = ast.literal_eval(teststring)
d = defaultdict(list,a)

print(d) 
```

给

```
>>> defaultdict(<class 'list'>, {'first': [1, 2]}) 
```

我将 defaultdict 作为字符串从 excel 文件导入，出于可读性原因，反序列化不是一个选项。

# java - HttpClient 多线程性能

> ID：10682612
> 
> 赞同：3
> 
> 时间：2012-05-21T09:24:57.027
> 
> 标签：java, multithreading, apache-httpclient-4.x

我有一个应用程序，它使用`HttpClient (4.1.3 or 4.2-beta)`. 它在 Windows 7 64 位上运行。处理器 - 酷睿 i7 2600K。网络带宽 - 54 Mb/s。

此时它使用这样的参数：

*   `DefaultHttpClient`和`PoolingClientConnectionManager`;
*   它也有`IdleConnectionMonitorThread`来自
    `http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html`;
*   最大总连接数 = 80；
*   每条路由的默认最大连接数 = 5；
*   对于线程管理，它使用`ForkJoinPool`并行
    级别 = 5（我是否正确理解它是多个工作
    线程？）

在这种情况下，我的网络使用率（在 Windows 任务管理器中）没有超过 2.5%。下载 4500 个页面需要 70 分钟。在 HttpClient 日志中，我有这样的事情：

> 调试 ForkJoinPool-2-worker-1 [org.apache.http.impl.conn.PoolingClientConnectionManager]：连接释放：[id：209][路由：{}->http://stackoverflow.com][总保持活动： 6；分配的路线：5 条中的 1 条；总分配：80 个中的 10 个]

分配的连接总数不会超过 10-12，尽管我已将其设置为 80 个连接。如果我尝试将并行度提高到 20 或 80，网络使用率保持不变，但会产生很多连接超时。

我已经阅读了 hc.apache.org 上的教程（[HttpClient Performance Optimization Guide](http://hc.apache.org/httpclient-3.x/performance.html)和[HttpClient Threading Guide](http://hc.apache.org/httpclient-3.x/threading.html)），但它们没有帮助。

任务的代码如下所示：

```
public class ContentDownloader extends RecursiveAction {
    private final HttpClient httpClient;
    private final HttpContext context;
    private List<Entry> entries;

    public ContentDownloader(HttpClient httpClient, List<Entry> entries){
        this.httpClient = httpClient;
        context = new BasicHttpContext();
        this.entries = entries;
    }

    private void computeDirectly(Entry entry){      
        final HttpGet get = new HttpGet(entry.getLink());
        try {
            HttpResponse response = httpClient.execute(get, context);
            int statusCode = response.getStatusLine().getStatusCode();

            if ( (statusCode >= 400) && (statusCode <= 600) ) {
                logger.error("Couldn't get content from " + get.getURI().toString() + "\n"  + response.toString());
            } else {        
                HttpEntity entity = response.getEntity();
                if (entity != null) {
                    String htmlContent = EntityUtils.toString(entity).trim();
                    entry.setHtml(htmlContent);
                    EntityUtils.consumeQuietly(entity);                             
                }
            }                           
        } catch (Exception e) {
        } finally {
            get.releaseConnection();
        }
    }

    @Override
    protected void compute() {
        if (entries.size() <= 1){           
            computeDirectly(entries.get(0));
            return;         
        }       
        int split = entries.size() / 2;     
        invokeAll(new ContentDownloader(httpClient, entries.subList(0, split)), 
                new ContentDownloader(httpClient, entries.subList(split, entries.size())));
    }
} 
```

问题是 - 使用多线程的最佳实践是什么，`HttpClient`可能有一些设置规则吗？如何使用全部 80 个连接并提高网络使用率？`ConnectionManager``HttpClient`

如有必要，我将提供更多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T21:16:27.993

我不确定您从多少个不同的主机中提取，但如果它是一个小数字（或只有 1 个），您希望增加每条路由的最大值。这将增加每台主机的并发性。

目前您已将其设置为 5。您观察到最大连接使用量高达 10-12，也许您只访问 2-3 个不同的主机，在这种情况下，数学加起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T08:11:52.130

远程站点可以限制来自一个 IP 的并行连接数。事实上，这是一种很好的做法，因为许多爬虫实施得很糟糕，给服务器带来了沉重的负担。

如果您抓取公共站点而不是您自己的站点，您至少应该尊重 robots.txt 并将您的请求限制为每个远程 ip 每秒一个。

除此之外，每条路由（即 http://www.example.com/[whatever]）的最大连接数为 5，因此您最多可以有 5 个并行连接到一个远程“站点” . （路径被忽略，只是方案、主机和端口。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:59:55.713

Apache HttpClient 绝对应该足够快，以使带宽饱和，即使是环回接口。我怀疑性能问题与内容处理的效率有关，而不是与内容检索的效率有关。您的应用程序只是花费更多时间处理 HTML 内容和提取链接，而不是下载新页面，从而导致带宽利用率不足。即使您的代码在处理之前将 HTML 内容转换为字符串这一事实也让我相信您的应用程序花费更多时间在内存中复制内容，而不是通过网络传输数据。

# c++ - 窗口化 DirectX 应用程序未在多显示器设置上绘图

> ID：10682615
> 
> 赞同：2
> 
> 时间：2012-05-21T09:25:02.017
> 
> 标签：c++, directx

我开发了一个简单的 2D directX 游戏引擎，可以创建任意大小的窗口。我希望能够开发在多显示器设置上运行的游戏。我尝试使用的设置是两台 1024 x 768 的显示器。我使用 Clanlib（即 OpenGL）开发了游戏，我所做的只是创建一个 2048 x 768 的大窗口并无边框运行，效果很好。

在我的引擎中，如果用户声明窗口应该是无边框的，我会使用以下样式：

*   dwStyle = WS_POPUP；
*   dwExStyle = WS_EX_APPWINDOW | WS_EX_WINDOWEDGE ;

我遇到的问题很奇怪。当我运行一个窗口大小为 2048 x 768 并且在我的开发计算机（即 Windows 7）上将其设置为更少边框的应用程序时，它的工作非常完美。

当我在另一台运行 XP 的机器上运行它时，左侧显示器会闪烁正常图形，然后只是变黑并且永远不会恢复。就像它丢失了设备上下文一样。我很困惑，因为它不会发生在我的开发计算机上。可能是显卡驱动还是其他什么的。任何帮助将不胜感激。谢谢。

# apache - .htaccess / apache 设置有什么问题？

> ID：10682616
> 
> 赞同：-1
> 
> 时间：2012-05-21T09:25:02.877
> 
> 标签：apache, .htaccess

我的 .htaccess 中有以下内容

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^([a-zA-Z0-9\-]+)?$ index.php?url=$1/ [PT] 
```

在一台机器（ubuntu，apache）上它工作得很好，在另一台机器（ubuntu，apache）上它会产生一个内部服务器错误。如果我将 3 行注释掉，服务器就可以工作。

服务器配置是

```
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
</Directory> 
```

任何解决问题的提示（显然是设置错误？）我觉得有点愚蠢:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:28:52.633

是否在第二台服务器上启用了 mod_rewrite？

在终端中运行以下两条命令：

```
sudo a2enmod rewrite
sudo /etc/init.d/apache2 restart 
```

# mysql - Redis 作为 MySQL 引擎？

> ID：10682618
> 
> 赞同：2
> 
> 时间：2012-05-21T09:25:25.660
> 
> 标签：mysql, redis, rdbms, mysql-proxy

是否有任何现有的努力将 Redis 服务器伪装成一种特殊类型的 MySQL 引擎？

例如：

```
CREATE TABLE key_value_pairs (
    id INT, 
    name VARCHAR(30), 
    VALUE VARCHAR(200)
) ENGINE = REDIS; 
```

所以数据可以直接`JOIN`'ed在一起，或者在SQL查询下进行各种计算和转换。

或者在 MySQL-Proxy 背后有什么行为？

是否存在类似的东西？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:33:23.230

不是我知道，但你有两种选择：

1.  有一个非常有趣的项目是 redis 的一个分支，它在顶部添加了一个 SQL 引擎，该引擎主要符合 SQL 并添加了一些 redis 好东西，它被称为 Alchemy DB： [http ://code.google.com/p/alchemydatabase/](http://code.google.com/p/alchemydatabase/)

    IIRC 我已经与该项目的作者讨论了使用 redis 编写 MySQL 后端的选项，但他有理由不这样做。

2.  有一些 ORM 框架支持将 redis 作为后端，因此您可以在 redis 之上为您的模式建模。我已经写了一个，但遗憾的是它还没有打开，它还支持在两者之间同步数据，如果你有反映 redis 中正在发生的事情的表。我希望它稳定后尽快打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:28:45.613

好的，

MySQL 5.6 现在有 memcached

[http://dev.mysql.com/doc/refman/5.6/en/news-5-6-6.html](http://dev.mysql.com/doc/refman/5.6/en/news-5-6-6.html)

可惜它不是redis。

# qt - 调用 clear() 时 QListWidget 的 itemSelectionChanged() 信号

> ID：10682621
> 
> 赞同：1
> 
> 时间：2012-05-21T09:25:35.953
> 
> 标签：qt, signals, qlistwidget

对不起，笨重的标题。

我有一个包含`QListWidget`. 我将它的`itemSelectionChanged()`信号连接到自定义插槽。

当我调用`QListWidget::clear()`时，插槽被调用（如预期的那样），但`QListWidget::count()`在此插槽中的调用返回`QListWidget`之前拥有的项目数。

调用 to`count()`之后的调用`clear()`（当信号按描述处理时）返回正确的 number `0`。

我准备[了一个完整的演示项目](http://astro.uni-tuebingen.de/~wende/ListWidgetTest.zip)。最重要的是这个源文件：

```
#include "ListWidgetTest.hpp"
#include "ui_ListWidgetTest.h"
#include <QDebug>

ListWidgetTest::ListWidgetTest(QWidget* parent)
    : QWidget(parent), ui(new Ui::ListWidgetTest)
{
    ui->setupUi(this);

    for (int i = 0; i < 5; ++i) {
        QListWidgetItem* item = new QListWidgetItem(QString("Item %1").arg(i));
        ui->listWidget->addItem(item);
    }

    QObject::connect(ui->pushButton, SIGNAL(clicked()),
                     this, SLOT(clearList()));

    QObject::connect(ui->listWidget, SIGNAL(itemSelectionChanged()),
                     this, SLOT(selectionChanged()));
}

ListWidgetTest::~ListWidgetTest()
{
    delete ui;
}

void ListWidgetTest::clearList()
{
    qDebug() << "void ListWidgetTest::clearList()";
    ui->listWidget->clear();
    qDebug() << "clearList: ui->listWidget->count() is " << ui->listWidget->count();
}

void ListWidgetTest::selectionChanged()
{
    qDebug() << "void ListWidgetTest::selectionChanged()";
    qDebug() << "selectionChanged: ui->listWidget->count() is " << ui->listWidget->count();
} 
```

**输出**

```
void ListWidgetTest::clearList() 
void ListWidgetTest::selectionChanged() 
selectionChanged: ui->listWidget->count() is  5
clearList: ui->listWidget->count() is  0 
```

**怎么了**

1.  该列表被填充。
2.  每次点击一个项目都会调用`selectionChanged()`
3.  单击按钮调用`clearList()`
4.  调用`QListWidget::clear()` *也发出信号*并且插槽被调用
5.  商品数量**没有变化**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-05T00:35:06.633

您可以将“Qt::QueuedConnection”添加到两个 QObject::connection。喜欢：

```
connect(ui->pushButton, SIGNAL(clicked()),
                 this, SLOT(clearList()), Qt::QueuedConnection);

connect(ui->listWidget, SIGNAL(itemSelectionChanged()),
                 this, SLOT(selectionChanged()), Qt::QueuedConnection); 
```

这是作品。但很抱歉，我不知道为什么。也许排队连接方法可以解决多信号顺序问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:53:37.680

首先`QListWidget::clear()`是 SLOT 而不是`SIGNAL`. 所以很明显它没有发出/触发信号`itemSelectionChanged()`。

您可能会`itemSelectionChanged()`在调用`clear()`. 在调用之前检查您是否正在触发`itemchanged()`或触发`selectionchanged()`任何其他事件。`itemSelectionChanged()``clear()`

```
 One possible solution is to declare a custom signal and emit this signal just 
 after calling clear(). And connect it to the custom slot you have defined.You
 will get the expected value in your SLOT 
```

# url-rewriting - 如何在 eXo 平台激活友好服务？

> ID：10682631
> 
> 赞同：0
> 
> 时间：2012-05-21T09:26:02.837
> 
> 标签：url-rewriting

我已经尝试了几天在[exo-platform 3.5.x 中激活](http://www.exoplatform.com/company/en/home)[FriendlyService](http://docs.exoplatform.com/PLF35/index.jsp?topic=/org.exoplatform.doc.35/ADM.Management.Friendly_service.html) ，但到目前为止还没有成功。

在该部分：

`administration > management`

有一个名为的服务`Friendly Service`允许 eXo 将请求 URL 重写为另一个 URL（以更易读的格式）。但是，此服务已停用。

谁能告诉我如何激活它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T03:14:42.827

1.启动服务器时，您需要启用配置文件'friendly'： 示例：`./start_eXo.sh -Dfriendly`

2.注册`FriendlyService`时，需要提供参数`enable`为`true`：

```
<component>
  <key>org.exoplatform.services.wcm.friendly.FriendlyService</key>
  <jmx-name>exo-service:type=FriendlyService</jmx-name>
  <type>org.exoplatform.services.wcm.friendly.impl.FriendlyServiceImpl</type>
  <init-params>
    <value-param>
      <name>enabled</name>
      <value>true</value>
    </value-param>
    </init-params>  
</component> 
```

希望能帮助到你..

# jquery - jQuery - 检索一个特定的类，同时有多个

> ID：10682633
> 
> 赞同：0
> 
> 时间：2012-05-21T09:26:05.480
> 
> 标签：jquery, css

我正在开发一个带有动画导航的项目。（Joomla 在后台工作）

我怎样才能检索`class="item-##"`唯一的，同时有多个类（如下所示）。

我的 jQuery

```
$(document).ready(function(){
    var timer;
    var hover;

    $('#nav li').hover(
        function() {
/*Here!>>*/ var id = $(this).attr('class').split('-')[1];
            $('.moduletable-subNav ul').slideUp();
            $('#submenu-'+id).slideDown();
        },
        function(){
            var id = $(this).attr('id').split('-')[1];
            timer = setTimeout(function() { $('#submenu-'+id).slideUp(); },1000);
        }
    );

    $('.moduletable-subNav ul').hover(
        function(){
            clearTimeout(timer);
        },
        function(){
            var id = $(this).attr('id');
            timer = setTimeout(function() { $('#'+id).slideUp(); },1000);
        }
    );
}); 
```

我的 HTML：

```
 <div class="moduletable">
    <ul class="menu" id="nav">
            <li class="item-109 current active parent"><a href="/tenc2012/burgerlijkrecht" >Burgerlijkrecht</a></li>
            <li class="item-110 parent"><a href="/tenc2012/strafrecht" >Strafrecht</a></li>
            <li class="item-108"><a href="/tenc2012/bestuursrecht" >Bestuursrecht</a></li>
    </ul>
    </div>
    <div class="moduletable-subNav">
            <ul class="menu" id="submenu-109">
                    <li class="item-114"><a href="/tenc2012/burgerlijkrecht/burgelijk-recht-deel-1" >Burgelijk recht deel 1</a></li>
            </ul>
            <ul class="menu" id="submenu-110">
                    <li class="item-117"><a href="/tenc2012/strafrecht/strafvordering" >Strafvordering</a></li>
            </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:30:22.797

我有时为此使用的一种技术是作弊并使用“rel”或其他未使用的属性来传递这样的东西。尝试设置：

```
<li ... rel="109"> 
```

然后得到：

```
$(this).attr('rel') 
```

有点hack，但做起来相当简单。

**编辑**

使用 karim79 的“数据编号”建议的示例：

```
<li ... data-number="109"> 
```

和 jQuery：

```
$(this).attr('data-number') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:32:02.170

这就是我想出的：

```
var classes = $('li[class^="item-]"').prop('class').split('\s');
var theClass;
$.each(classes, function(){
    if (this.match(/^item-/))
        theClass = this;            
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:31:03.183

不确定我是否关注你，但你想要：

```
$('#nav li[class="item-109"]') 
```

如果你想要这个号码，我想你可以做一个

```
$(this).attr('class').replace(/[^\d]/g, ""); 
```

或者也更安全一点

```
$(this).attr('class').replace(/^.*(item\-\d+)$/, "$1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:35:17.793

试试这个：

```
var classes = $('#my_element').attr('class').split(" ");

var item_class = $(classes).filter(function(a,i) {
  return i.match(/item\-[0-9]+/);
});

console.log(item_class); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T09:39:04.280

```
$(function(){
    $('li').each(function(){
        console.info($(this).attr('class').split(' ')[0]);
    });
}); 
```

# c++ - 将十进制转换为 32 位二进制？

> ID：10682634
> 
> 赞同：3
> 
> 时间：2012-05-21T09:26:06.020
> 
> 标签：c++, algorithm, binary, decimal

将 C++ 中的正整数（0 到 2,147,483,647）转换为 32 位二进制并显示。

我想以传统的“数学”方式（而不是使用**bitset**或使用**向量*** *.pushback* * 或递归函数或 C++ 中的一些特殊东西......），（一个原因是你可以用不同的语言实现它，也许）

所以我继续实现一个像这样的简单程序：

```
#include <iostream>
using namespace std;
int main()
{
    int dec,rem,i=1,sum=0;
    cout << "Enter the decimal to be converted: ";
    cin>>dec;
    do
    {
        rem=dec%2;
        sum=sum + (i*rem);
        dec=dec/2;
        i=i*10;
    } while(dec>0);

    cout <<"The binary of the given number is: " << sum << endl;

    system("pause");
    return 0;
} 
```

问题是当您输入一个大数字（例如 9999）时，结果将是一个负数或一些奇怪的数字，因为 sum 是整数并且它不能处理超过它的最大范围，所以您知道 32 位二进制将有 32 位所以对于 C++ 中的任何数字类型来说它都太大了吗？这里有什么建议以及关于显示 32 位数字的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T09:55:26.740

结果你得到`sum`的东西除了打印之外几乎不能用于任何东西。这是一个十进制数，*看起来*就像一个二进制数。

如果十进制-二进制转换本身没有结束，请注意计算机内存中的数字*已经以二进制表示*（这不是 C++ 的属性），您唯一需要的就是打印它的方法。一种可能的方法如下：

```
int size = 0;
for (int tmp = dec; tmp; tmp >>= 1)
    size++;
for (int i = size - 1; i >= 0; --i)
    cout << ((dec >> i) & 1); 
```

使用字符数组的另一个变体：

```
char repr[33] = { 0 };
int size = 0;
for (int tmp = dec; tmp; tmp >>= 1)
    size++;
for (int i = 0; i < size; ++i)
    repr[i] = ((dec >> (size - i - 1)) & 1) ? '1' : '0';
cout << repr << endl; 
```

`dec`请注意，如果为负数，这两种变体都不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T09:34:51.917

你有一个[*数字*](http://en.wikipedia.org/wiki/Number)并且想要它的二进制表示，即一个*字符串*。因此，使用字符串而不是数字类型来存储您的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T09:32:22.023

您可以使用无符号整数类型。但是，即使使用更大的类型，您最终也会用完存储二进制表示的空间。您最好将它们存储在`string`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-21T11:17:52.073

使用 for 循环和预定义的零字符数组：

```
#include <iostream>
using namespace std;
int main()
{
    int dec;
    cout << "Enter the decimal to be converted: ";
    cin >> dec;

    char bin32[]  = "00000000000000000000000000000000";
    for (int pos = 31; pos >= 0; --pos)
    {
        if (dec % 2) 
            bin32[pos] = '1';
        dec /= 2;
    }

    cout << "The binary of the given number is: " << bin32 << endl;
} 
```

出于性能原因，您可能会过早地暂停 for 循环：

```
 for (int pos = 31; pos >= 0 && dec; --pos) 
```

请注意，在 C++ 中，您可以将整数视为布尔值 - 一切 != 0 都被认为是真的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T10:34:16.423

正如其他人指出的那样，您需要在字符串中生成结果。执行此操作的经典方法（适用于 2 到 36 之间的任何基数）是：

```
std::string
toString( unsigned n, int precision, unsigned base )
{
    assert( base >= 2 && base <= 36 );
    static char const digits[] = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    std::string retval;
    while ( n != 0 ) {
        retval += digits[ n % base ];
        n /= base;
    }
    while ( retval.size() < precision ) {
        retval += ' ';
    }
    std::reverse( retval.begin(), retval.end() );
    return retval;
} 
```

然后，您可以显示它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T12:43:41.867

递归。在伪代码中：

```
function toBinary(integer num)
  if (num < 2) 
  then
    print(num)
  else
    toBinary(num DIV 2)
    print(num MOD 2)
  endif
endfunction 
```

这不处理前导零或负数。递归堆栈用于将二进制位反转为标准顺序。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-08-11T15:20:26.670

写吧：

```
long int dec,rem,i=1,sum=0 
```

代替：

```
int dec,rem,i=1,sum=0; 
```

那应该可以解决问题。

# ios - 游戏中心照片在沙盒中重置几分钟？

> ID：10682635
> 
> 赞同：2
> 
> 时间：2012-05-21T09:26:06.143
> 
> 标签：ios, photo, center

我遇到一个问题：游戏中心照片在沙盒中自动重置几分钟。有谁知道这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:35:44.490

不幸的是，沙盒服务器不记得你的照片。您的设备将在您设置后立即在本地缓存您的照片，但下次它从 Game Center 请求照片时，它将返回到默认沙盒照片之一（带有红色、绿色、黄色或蓝色文本的剪影）。

恐怕只是关于 Game Center 的许多、许多、许多、许多、许多糟糕的事情之一 :(

# c# - LinqPad，使用多个数据上下文 - DevForce

> ID：10682646
> 
> 赞同：0
> 
> 时间：2012-05-21T09:26:47.797
> 
> 标签：c#, linq, linqpad, devforce

我已经购买了 LINQPad 的高级版。我认为也可以使用 DevForce 模型执行跨数据库查询。

> 有两种方法可以做到这一点。最简单的是拖放方法：按住 Ctrl 键的同时将其他数据库从 Schema Explorer 拖到查询编辑器中。要在查询中访问这些附加数据库，请使用 database.table 表示法，例如 Northwind.Regions.Take(100)。您查询的数据库必须位于同一台服务器上。
> 
> 第二种方法是在连接属性对话框中列出要查询的额外数据库。此对话框还允许您从链接服务器中选择数据库。以下是如何进行：
> 
> 1.  添加新的 LINQ to SQL 连接。
> 2.  选择指定新数据库或现有数据库，然后选择要查询的主数据库。
> 3.  单击 Include Additional Databases 复选框，然后选择要包含的额外数据库。您还可以在此对话框中从链接服务器中选择数据库。

*[资源](http://www.linqpad.net/FAQ.aspx)*

但显然没有任何办法，不是吗？有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:51:30.920

跨数据库查询仅适用于标准 SQL Server 连接、同一服务器或链接服务器上的数据库。主要理由是确保服务器端加入（否则，无论何时加入，您最终都会将整个表拉回客户端）。

我考虑向 LINQPad 添加一个功能以允许任意跨数据库查询，因为有时即使在客户端加入时它也会很有用。然而，让它与自定义数据上下文（例如 DevForce 或实体框架）一起工作变得非常棘手，因此该功能最终进入了“太难的篮子”。一个主要问题是处理命名空间/程序集/app.config 冲突。

请记住，没有什么可以阻止您按 F4 并添加对包含附加数据上下文的程序集的引用。当然，您必须手动实例化第二个数据上下文，但这应该不是什么大问题。您仍然会获得自动完成功能，并且如果您为其创建单独的连接，您仍然可以在树视图中看到其架构。从功能上讲，如果 LINQPad 支持多连接查询，这就是你最终会得到的结果。

LINQPad 对 SQL Server 的跨数据库查询支持的特别之处在于，它可以通过添加对另一个程序集的引用来完成您原本无法做到的事情，即通过利用服务器端连接来实现*高效*的跨数据库查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-01T06:35:29.767

您可以根据需要实例化任意数量的上下文来分散 SQL 实例并执行伪跨数据库连接、复制数据等。注意，跨上下文连接是在本地执行的，因此您必须调用 ToList()、ToArray() 等来执行查询在加入之前单独使用各自的数据源。换句话说，如果您将来自 DB1.TABLE1 的 10 行与来自 DB2.TABLE2 的 20 行“内部”连接起来，则在 Linq 执行连接并返回相关/相交之前，必须将这两个集合（所有 30 行）都拉入本地计算机的内存中设置（每个示例最多 20 行）。

```
//EF6 context not selected in Linqpad Connection dropdown
var remoteContext = new YourContext();
remoteContext.Database.Connection.ConnectionString = "Server=[SERVER];Database="
+ "[DATABASE];Trusted_Connection=false;User ID=[SQLAUTHUSERID];Password=" 
+ "[SQLAUTHPASSWORD];Encrypt=True;";
remoteContext.Database.Connection.Open();
var DB1 = new Repository(remoteContext);

//EF6 connection to remote database
var remote = DB1.GetAll<Table1>()
    .Where(x=>x.Id==123)
    //note...depending on the default Linqpad connection you may get 
    //"EntityWrapperWithoutRelationships" results for 
    //results that include a complex type.  you can use a Select() projection 
    //to specify only simple type columns
    .Select(x=>new { x.Col1, x.Col1, etc... })
    .Take(1)
    .ToList().Dump();  // you must execute query by calling ToList(), ToArray(),
              // etc before joining

//Linq-to-SQL default connection selected in Linqpad Connection dropdown
Table2.Where(x=>x.Id = 123)
    .ToList() // you must execute query by calling ToList(), ToArray(),
              // etc before joining
    .Join(remote, a=> a.d, b=> (short?)b.Id, (a,b)=>new{b.Col1, b.Col2, a.Col1})
    .Dump();

localContext.Database.Connection.Close();
localContext = null; 
```

# php - mysql查询不会运行得更快

> ID：10682652
> 
> 赞同：0
> 
> 时间：2012-05-21T09:27:09.197
> 
> 标签：php, mysql, indexing, query-optimization

这是我的查询

```
 SELECT `tbl_user`.`file_id` , `tbl_user`.`folder_id` , `tbl_user`.`user_id` , `tbl_user`.`fathername` , `tbl_user`.`investor_type` , `tbl_user`.`user_name` , `account_id` , `user_witness_id` , `visible` , sum( tbl_user_payment.user_amount ) AS amt, `tbl_user_payment`.`trans_type`
FROM (
`tbl_user`
)
LEFT JOIN `tbl_user_payment` ON `tbl_user`.`user_id` = `tbl_user_payment`.`user_id`
LEFT JOIN `tbl_user_stamp` ON `tbl_user_stamp`.`user_id` = `tbl_user_payment`.`user_id`
WHERE `tbl_user`.`visible` = '1'
AND `tbl_user`.`user_name` LIKE '%1%'
OR `tbl_user`.`file_id` LIKE '%1%'
OR `tbl_user`.`folder_id` LIKE '%1%'
OR `tbl_user`.`fathername` LIKE '%1%'
OR `tbl_user`.`nic` LIKE '%1%'
OR `tbl_user`.`email` LIKE '%1%'
OR `tbl_user`.`city` LIKE '%1%'
OR `tbl_user`.`phone` LIKE '%1%'
OR `tbl_user`.`bank_account` LIKE '%1%'
GROUP BY `tbl_user`.`user_id` 
```

我已经索引了所有类似的值，但我的查询仍然需要大约 2 秒，我不知道它为什么这样做。

在我的本地系统上，第一次大约需要 2 秒，之后大约需要 0.002 秒

但在实时服务器上它不会少于 2 秒

有人可以帮我吗

并且记录仅在 user 表和 user_stamp 表中约为 1000，在 user_payment 表中约为 1200

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:29:00.510

我猜你的实时服务器上没有激活查询缓存。

您想检查您的 MySQL 实时服务器配置。

[手动的](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:29:40.643

这可能意味着缓存在您的机器上打开，并在实时机器上关闭。尝试在您的本地机器上进行不同的搜索，这些都应该花费大约相同的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:44:15.450

您可以在 MySQL 上创建 VIEW 以从表中收集数据，而不是使用 join 并仅从视图中选择，这将使您的数据显示得更快..

了解有关查看的更多信息，请[单击此处](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:17:42.173

以这种方式使用 LIKE 不会使用索引。要使用索引，您必须从字符串的开头搜索 ('1%')，或者如果您真的不需要它，就停止使用 LIKE。由于更好的规格或/和更少的负载，它可能在您的系统上运行得更快。

# c++ - 将 cv::Mat 矩阵保存到 .xml 文件中

> ID：10682653
> 
> 赞同：0
> 
> 时间：2012-05-21T09:27:11.690
> 
> 标签：c++, opencv

我正在尝试查找如何存储（保存）矩阵，我发现[如何从 XML 中保存和读取 OpenCV 中新的 C++ 样式矩阵对象？](https://stackoverflow.com/questions/2621768/how-can-i-save-and-read-from-xml-the-new-c-style-matrix-objects-in-opencv) 这里是示例代码，但我遇到了错误。我正在使用下面的代码

```
 cv::Mat featureVec;
    cv::FileStorage fs("FeatureVectFile.yml", cv::FileStorage::WRITE);
    if (!fs.IsOpen()) {std::cout << "unable to open file storage!" << std::endl; return;}
    fs << "my_FeatureVect" <<featureVec;
    fs.release(); 
```

我收到类似这样的 **错误 Opencv Error: Unspecified error in unknown function, file ......\ocv\opencv\src\cxcore\cxpersistance.cpp, line 4952**

任何人都可以建议我该代码有什么问题。我正在将**Opencv2.1**与**VS c++ 2008**速成版一起使用。

谢谢

# java - 在 4.0.3 之前的 Android 下运行时，本机库中的分段错误

> ID：10682658
> 
> 赞同：5
> 
> 时间：2012-05-21T09:27:38.350
> 
> 标签：java, android, java-native-interface, native-code, native-methods

`libFidoCore.so`是我的本机库，我在 ICS 4.0.3 版本的 Android 中从该库调用 java 函数，该库运行良好而不会崩溃，但在 Android 2.3.3 或 Android 2.3.4 上，我的应用程序崩溃并显示以下日志。为什么 ？

```
05-21 09:20:17.539: I/DEBUG(73): Build fingerprint: 'google/soju/crespo:2.3.3/GRI40/102588:user/release-keys'
05-21 09:20:17.539: I/DEBUG(73): pid: 725, tid: 756  >>> com.fido.android.framework.service <<<
05-21 09:20:17.539: I/DEBUG(73): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000043
05-21 09:20:17.539: I/DEBUG(73):  r0 00000033  r1 00000001  r2 00000000  r3 00000000
05-21 09:20:17.539: I/DEBUG(73):  r4 00000033  r5 002a8d90  r6 00000000  r7 4051a9c0
05-21 09:20:17.539: I/DEBUG(73):  r8 001dfb38  r9 0000002d  10 804cbc7c  fp 804b4108
05-21 09:20:17.539: I/DEBUG(73):  ip afa03108  sp 44b3bd20  lr 8004be0f  pc 80054a7c  cpsr 60000030
05-21 09:20:17.539: I/DEBUG(73):  d0  54454e3a303a655f  d1  006500640061004f
05-21 09:20:17.539: I/DEBUG(73):  d2  006800280020004b  d3  006500640061002e
05-21 09:20:17.539: I/DEBUG(73):  d4  766f72503a3a7265  d5  2d2d206e6f697369
05-21 09:20:17.539: I/DEBUG(73):  d6  2d2d2d2d2d2d2d2d  d7  2d2d2d2d2d2d2d2d
05-21 09:20:17.539: I/DEBUG(73):  d8  0000000000000000  d9  0000000000000000
05-21 09:20:17.539: I/DEBUG(73):  d10 0000000000000000  d11 0000000000000000
05-21 09:20:17.539: I/DEBUG(73):  d12 0000000000000000  d13 0000000000000000
05-21 09:20:17.539: I/DEBUG(73):  d14 0000000000000000  d15 0000000000000000
05-21 09:20:17.539: I/DEBUG(73):  d16 0000000700000033  d17 3fe0000000000000
05-21 09:20:17.539: I/DEBUG(73):  d18 42eccefa43de3400  d19 3fbc71c71c71c71c
05-21 09:20:17.539: I/DEBUG(73):  d20 4008000000000000  d21 3fd99a27ad32ddf5
05-21 09:20:17.539: I/DEBUG(73):  d22 3fd24998d6307188  d23 3fcc7288e957b53b
05-21 09:20:17.539: I/DEBUG(73):  d24 3fc74721cad6b0ed  d25 3fc39a09d078c69f
05-21 09:20:17.539: I/DEBUG(73):  d26 0000000000000000  d27 0000000000000000
05-21 09:20:17.539: I/DEBUG(73):  d28 0000000000000000  d29 0000000000000000
05-21 09:20:17.539: I/DEBUG(73):  d30 0000000000000000  d31 0000000000000000
05-21 09:20:17.539: I/DEBUG(73):  scr 80000012
05-21 09:20:17.617: I/DEBUG(73):          #00  pc 00054a7c  /system/lib/libdvm.so
05-21 09:20:17.617: I/DEBUG(73):          #01  pc 0004be0a  /system/lib/libdvm.so
05-21 09:20:17.621: I/DEBUG(73): code around pc:
05-21 09:20:17.621: I/DEBUG(73): 80054a5c 688b0010 0045eb00 0110f113 0144eb01 
05-21 09:20:17.621: I/DEBUG(73): 80054a6c ee98f7c2 bf00bd70 41f0e92d b3184604 
05-21 09:20:17.621: I/DEBUG(73): 80054a7c f2406903 688174ff f1116945 eb060610 
05-21 09:20:17.621: I/DEBUG(73): 80054a8c 23000643 4618462a 5af1e00b 2f7e1e4f 
05-21 09:20:17.621: I/DEBUG(73): 80054a9c 42a1d905 3003d901 3002e002 3001e000 
05-21 09:20:17.621: I/DEBUG(73): code around lr:
05-21 09:20:17.621: I/DEBUG(73): 8004bdec 000411e4 6905b570 2101460c 46164628 
05-21 09:20:17.621: I/DEBUG(73): 8004bdfc ff80f006 b10eb174 70332301 f0084620 
05-21 09:20:17.621: I/DEBUG(73): 8004be0c 4604fe33 4806b930 49064622 44794478 
05-21 09:20:17.621: I/DEBUG(73): 8004be1c fd8ef7f9 21074628 ff6cf006 bd704620 
05-21 09:20:17.621: I/DEBUG(73): 8004be2c 0003e892 00041175 6904b570 2101460d 
05-21 09:20:17.621: I/DEBUG(73): stack:
05-21 09:20:17.621: I/DEBUG(73):     44b3bce0  44b3bd14  
05-21 09:20:17.621: I/DEBUG(73):     44b3bce4  00000000  
05-21 09:20:17.621: I/DEBUG(73):     44b3bce8  00000019  
05-21 09:20:17.621: I/DEBUG(73):     44b3bcec  804e0138  
05-21 09:20:17.621: I/DEBUG(73):     44b3bcf0  44b3bd14  
05-21 09:20:17.621: I/DEBUG(73):     44b3bcf4  46636a61  
05-21 09:20:17.621: I/DEBUG(73):     44b3bcf8  804b429c  /data/data/com.fido.android.framework.service/lib/libFidoCore.so
05-21 09:20:17.621: I/DEBUG(73):     44b3bcfc  804cbc7c  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd00  00000033  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd04  80000000  /system/lib/libdvm.so
05-21 09:20:17.625: I/DEBUG(73):     44b3bd08  4051a9c0  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd0c  80468e60  /data/data/com.fido.android.framework.service/lib/libFidoCore.so
05-21 09:20:17.625: I/DEBUG(73):     44b3bd10  804d8138  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd14  804b42dc  /data/data/com.fido.android.framework.service/lib/libFidoCore.so
05-21 09:20:17.625: I/DEBUG(73):     44b3bd18  df002777  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd1c  e3a070ad  
05-21 09:20:17.625: I/DEBUG(73): #00 44b3bd20  00000033  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd24  002a8d90  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd28  00000000  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd2c  4051a9c0  
05-21 09:20:17.625: I/DEBUG(73):     44b3bd30  001dfb38  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd34  8004be0f  /system/lib/libdvm.so
05-21 09:20:17.628: I/DEBUG(73): #01 44b3bd38  00000001  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd3c  00000033  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd40  80000000  /system/lib/libdvm.so
05-21 09:20:17.628: I/DEBUG(73):     44b3bd44  80467009  /data/data/com.fido.android.framework.service/lib/libFidoCore.so
05-21 09:20:17.628: I/DEBUG(73):     44b3bd48  4058f7f0  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd4c  00000000  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd50  0000005c  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd54  4232a448  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd58  0000029c  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd5c  000003bc  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd60  000005c0  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd64  4051a7c8  
05-21 09:20:17.628: I/DEBUG(73):     44b3bd68  44b3bde0  
05-21 09:20:17.632: I/DEBUG(73):     44b3bd6c  44b3bddc  
05-21 09:20:17.632: I/DEBUG(73):     44b3bd70  4232a47c  
05-21 09:20:17.632: I/DEBUG(73):     44b3bd74  44b3bd84  
05-21 09:20:17.632: I/DEBUG(73):     44b3bd78  804d8138  
05-21 09:20:17.632: I/DEBUG(73):     44b3bd7c  002abaa4  
05-21 09:20:17.953: I/BootReceiver(108): Copying /data/tombstones/tombstone_02 to DropBox (SYSTEM_TOMBSTONE)
05-21 09:20:17.964: I/DEBUG(73): debuggerd committing suicide to free the zombie! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:31:31.977

ICS 中处理 JNI 引用的方式发生了变化。这篇博文对此进行了解释：[http ://android-developers.blogspot.ch/2011/11/jni-local-reference-changes-in-ics.html](http://android-developers.blogspot.ch/2011/11/jni-local-reference-changes-in-ics.html)

这取决于您的 targetSdkVersion，也许您可​​以尝试将其设置为较低以使用兼容模式。

# objective-c - @synchronized 是否阻塞了整个线程

> ID：10682661
> 
> 赞同：2
> 
> 时间：2012-05-21T09:27:42.790
> 
> 标签：objective-c, xcode4.3, grand-central-dispatch, synchronized

说你做

```
MyLock *lock = [[MyLock new] autorelease];
@synchronized(lock) {
    NSLog(@"Hello World");
//some very long process
} 
```

在主线程中。这是否意味着直到//一些非常长的过程完成，主线程被锁定？如果其他线程调用

```
 //Update on the main thread
    dispatch_sync(dispatch_get_main_queue(), ^{
        //Do some updates
    }); 
```

永远不会调用某些更新？我对么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T09:44:44.863

`@synchronized`如果第一个代码片段中的代码永远不会完成，那么无论语句如何，都不会调用第二个代码片段。该线程被您正在执行的代码阻塞。该`@synchronized`语句用于同步*多个*线程之间的数据访问并且有用，它要求所有参与的线程都实际使用该语句。它不会“神奇地”锁定对数据结构的访问，除非所有参与的线程都“同意”它。

您不`@synchronized`用于确保在给定（单个）线程上仅执行一种方法，无论如何都是这种情况。

为了给你一个具体的使用例子，假设你有一个`NSMutableArray`你想保护它不被同时从不同的线程修改（这可能导致数据损坏）。在这种情况下，您始终可以在`@synchronized`具有相同锁定令牌的块中访问它。

例子：

```
//Thread 1:
@synchronized (myArray) {
    [myArray addObject:@"foo"];
}

//Thread 2:
@synchronized (myArray) {
    [myArray removeObjectAtIndex:0];
} 
```

这将确保由 包围的代码块`@synchronized`永远不会同时执行。当一个线程进入块时，其他线程会一直等到它完成，但*前提是*它们也使用相同的`@synchronized`语句。如果您忘记在一个线程上使用它，那么如果您在另一个线程上使用它就没有任何帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:44:56.133

最简洁的答案是不。我认为您不了解锁定的概念。您应该阅读更多关于同步的信息，例如这里：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)

当您访问您试图保护的代码时，您必须在每种情况下使用相同的锁定对象（相同的实例！）进行同步。您可以将锁定对象存储为类的属性。

在你的情况下：

```
self.lock = [[MyLock new] autorelease]; //in init method initialize retain or strong lock property

...
@synchronized(self.lock) {
   NSLog(@"Hello World");
   //some very long process
}

//Update on the main thread
dispatch_sync(dispatch_get_main_queue(), ^{
   @synchronized(self.lock) {
      NSLog(@"Hello World");
      //some very long process
   }
}); 
```

如果您可以用作锁定对象，您正在尝试保护的对象。

# iphone - iOS 方向更改也不起作用 UIDeviceOrientationDidChangeNotification 未收到

> ID：10682663
> 
> 赞同：4
> 
> 时间：2012-05-21T09:27:49.763
> 
> 标签：iphone, ios, notifications, orientation, rotation

我对 iOS 很陌生，我正在拼命地尝试在我的应用程序中进行方向更改。经过研究，这是我所做的：

在我的应用程序中，我有一个 NavigationController 管理七个 UIViewController 子类。

在项目摘要选项卡中，我激活了所有 4 个设备方向。

每个 UIViewcontroller 子类都有一个 xib 文件，所有 xib 文件都激活了“autoresize subviews”。

UIViewController 子类都有：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || 
            interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
            interfaceOrientation == UIInterfaceOrientationLandscapeRight );
} 
```

他们也都有：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
```

和：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

用 NSLog(...) 语句实现（从不打印，调试器也从不进入这些方法）。

我也试图使用：

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

BOOL getOrientationUpdates = [[UIDevice currentDevice] isGeneratingDeviceOrientationNotifications];
NSLog(@"will receive orientation notifications: %@", getOrientationUpdates?@"YES":@"NO");

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(orientationChanged:)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:nil]; 
```

和

`-(void)orientationChanged: (NSNotification*) notification { NSLog(@"orientationChanged"); }`

和

`[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; [[NSNotificationCenter defaultCenter] removeObserver:self];` 分别。

当我`beginGeneratingDeviceOrientationNotifications`在 AppDelegate 的`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions` 方法中执行等操作时，orientationChanged: 在启动时被调用一次，但再也不会旋转设备，但当我在 UIViewController 子类之一中执行此操作时，它永远不会被调用！

到目前为止，我想要实现的只是获取方向通知以旋转 UIImageView 和 UIImage（在不同方向上没有任何布局更改）。

```
UIDeviceOrientation o = [UIDevice currentDevice].orientation; 
```

总是返回`UIDeviceOrientationPortrait`

可能是我错过了文档或 stackoverflow 中的某些内容，但我显然无法弄清楚我需要做什么/添加才能让它在我的设置中工作。我对stackoverflow也很陌生，所以我希望我的帖子没有违反任何平台约定。

非常感谢任何帮助/提示。太感谢了！

编辑：getOrientationUpdates 总是 YES，这对我来说很奇怪，因为当我旋转它时，通知回调选择器永远不会被调用！

编辑：在我的 AppDelegate 的 didFinishLaunchingWithOptions 中，我正在做：

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.regScreenController = [[RegistrationScreenController alloc] initWithNibName:@"RegistrationScreenController" bundle:nil];

navCtrl = [[UINavigationController alloc]initWithRootViewController:self.regScreenController];

[navCtrl setNavigationBarHidden:YES];
self.window.rootViewController = self.regScreenController;
[self.window addSubview:navCtrl.view];
[self.window makeKeyAndVisible];
return YES; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T09:35:19.227

查看您是否`self.window.rootViewController`在`AppDelegate's` `didFinishLaunchingWithOptions`: 方法中设置，因为如果您仅向窗口添加子视图，则不会触发方向更改通知。

# java - Google App Engine › 使用 JavaServer Pages 技术开发多语言 Web 应用程序

> ID：10682665
> 
> 赞同：0
> 
> 时间：2012-05-21T09:28:03.450
> 
> 标签：java, google-app-engine, jsp

我有一个网页，它有 3 种不同的语言，瑞典语、英语和俄语！在我的旧 java 页面中，我使用 WebTexts_en.properties、WebTexts_sv.properties 和 WebTexts_ry.properties 文件以及 LangSupport.jsp 来设置浏览器的语言环境。我所有的jsp页面都有UTF-8编码，所以我认为这应该是正确的。

现在我已将我的页面移至 Google APP Engine，我想知道是否有人对如何在此处进行此操作有一些意见？我试图按照我的旧设置，但它似乎不起作用，我的页面在那里，但我没有任何文字，[http://neptune-app-id.appspot.com/](http://neptune-app-id.appspot.com/) 所以我想知道是否有人对谷歌如何设置这个有一些意见吗？我需要有关整个设置的帮助，文件的放置位置，包含哪些内容才能使其正常工作，如何设置我的 LangSupport 文件以便它为浏览器选择正确的语言环境。

如果有人可以向我展示一些我在设置时可以遵循的文档，那也很好。我是一个安静的初学者，但我拥有旧页面中的大部分文件。Sp我只需要将所有这些转换为与谷歌应用引擎一起工作，请帮助！！！任何信息都会非常有帮助，因为我现在被卡住了，无法继续我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:06:06.997

您有语言环境并且依赖于语言环境，您应该从正确的属性文件中获取属性。您可以定义具有 messageId 和语言环境参数的 EL 函数。根据语言环境，您可以从需要的文件中加载属性，并且根据 messageId，您可以获得所需的消息。

将 ptoperties 文件放入 WEB-INF/ 以便您可以使用 java 核心属性加载它们。

就这样。

# html - 显示外部站点视频

> ID：10682668
> 
> 赞同：0
> 
> 时间：2012-05-21T09:28:09.250
> 
> 标签：html, video

我想显示其他网站视频（例如：DailyMotion、Youtube 和 Vimeo）。如何在我的 HTML 代码中执行此操作？

我想使用这样的东西：

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4" />
  <source src="movie.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:35:37.077

这三个网站在他们允许共享的每个视频附近都提供了一个“嵌入此视频”（或类似的）链接。用那个。

绕过他们的播放器将违反他们的条款（因为您将有效地吸收他们支付的带宽而不将他们的品牌/广告应用于视频）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:35:49.180

这是一个讨论您提到的所有上述视频网站的链接。

[http://www.onextrapixel.com/2012/02/29/top-10-ways-to-embed-video-into-a-web-page/](http://www.onextrapixel.com/2012/02/29/top-10-ways-to-embed-video-into-a-web-page/)

# php - simplemailer 和 yii 框架

> ID：10682670
> 
> 赞同：1
> 
> 时间：2012-05-21T09:28:15.080
> 
> 标签：php, email, yii

我在过去 2-3 天开始研究 yii 框架....我正在尝试按照本教程进行[简单的邮件发送](http://www.yiiframework.com/extension/simplemailer)....

将文件复制到扩展文件夹并将这些行写入配置文件后，当我打开测试应用程序的索引页面时，它给了我以下异常：

```
throw new CException(Yii::t('yii','Object configuration must be an array containing a "class" element.')); 
```

以下是堆栈跟踪的屏幕截图：

![在此处输入图像描述](../Images/37bbbb9284c356dce7ed09a4b9020b2c.png)

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:16:29.113

> 将文件复制到扩展文件夹后

您必须复制`simplemailer`到模块目录'/protected/modules/...

cp modules/SimpleMailer/commands/MailerCommand.php commands/

执行安装：

[http://www.yiiframework.com/extension/simplemailer#hh6](http://www.yiiframework.com/extension/simplemailer#hh6)

```
cd /your/app/directory/protected
./yiic migrate create add_simplemailer_tables
    --templateFile=application.modules.SimpleMailer.migrations.template
./yiic migrate up
cp modules/SimpleMailer/commands/MailerCommand.php commands/ 
```

# php - 查询在 php 文件中失败，但从未在 phpmyadmin 中

> ID：10682671
> 
> 赞同：0
> 
> 时间：2012-05-21T09:28:15.223
> 
> 标签：php, mysql, boolean

```
$query = "SELECT *, ((ACOS(SIN($lat * PI() / 180) * SIN(lat * PI() / 180) + COS($lat * PI() / 180) * COS(lat * PI() / 180) * COS(($lon - lon) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) AS distance 
            FROM average_temp 
            HAVING distance<=25 
            ORDER BY distance ASC limit 1"; 
```

我可以在 phpmyadmin 中运行上述查询而不会出现任何问题，但如果我通过我的 php 文件运行它，它大约有 20% 的时间会失败。

这是处理查询结果的代码：

```
if (!$query){
  die ("Query failed: " . mysql_error());
}
$result = mysqli_query($db, $query);
$num_results = mysqli_num_rows($result);
$row = mysqli_fetch_assoc($result);
$var = $row['id']; 
```

80% 的时间它运行良好，另外 20% 的时间它挂起 30 秒并抛出此错误：

> 警告：mysqli_fetch_assoc() 期望参数 1 为 mysqli_result，C:\wamp\w 中给出的布尔值

我正在做的是从另一个表中获取纬度和经度值并用这个表引用它们。该公式就像在给定距离内寻找位置的魅力一样。我将其设置为 25 英里，并且只想要最接近的匹配，但您可以更改它以提供最近的 # 个位置。[我在这里](http://zcentric.com/2010/03/11/calculate-distance-in-mysql-with-latitude-and-longitude/)找到了查询。

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:33:55.283

首先，您不是在测试查询的结果，而是在测试查询字符串本身。它应该是这样的：

```
$result = mysqli_query($db, $query);
if ($result === false){
    die ("Query failed: " . mysql_error());
}
$num_results = mysqli_num_rows($result);
$row = mysqli_fetch_assoc($result);
$var = $row['id']; 
```

这样你应该从 MySQL 得到正确的错误报告，我猜是超时，因为它挂了 30 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:11:50.100

如果 $lat 或 $lon 为空或未定义，则查询可能会失败。在发送查询之前检查它们。

# sql - SQL Server 数据库安全

> ID：10682681
> 
> 赞同：1
> 
> 时间：2012-05-21T09:29:01.633
> 
> 标签：sql, sql-server, security, tsql

我在 Windows 2008 Server 上安装了 SQL Server 2008。

我已禁用内置管理员密码并`sa`使用系统管理员权限创建。

问题是：有没有办法访问数据库，或者备份它。或重置（和/或）获取密码的方法`sa`？

我想保护我的数据库。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:45:22.830

> 我已禁用内置管理员密码...我想保护我的数据库。

如果您认为可以禁用对内置管理员的访问权限，那您就是在追逐幻想。内置管理员将**始终**能够访问您的数据库，获取访问权限的步骤在“[当系统管理员被锁定时连接到 SQL Server”](http://msdn.microsoft.com/en-us/library/dd207004.aspx)中清楚地记录了。您的数据库**必须**部署在您完全信任系统管理员的系统上，这个基本要求没有解决方法。

大多数情况下，这个问题被认为是保护数据库中感知到的 IP 的错误尝试。该问题的答案是您想要的称为 DRM，而 SQL Server 不提供 DRM。如果您害怕将数据库分发给您的用户，请使用[SQL Azure](http://www.windowsazure.com/en-us/home/features/sql-azure/)之类的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:33:20.217

必须有权访问`SQLCmd`提示的用户将能够运行执行此类命令。您可以访问数据库并在控制台重置密码并执行以下操作：

```
ALTER LOGIN sa WITH PASSWORD = ‘newpassword’ UNLOCK 
```

# gcc - 使用 GCC 导入 AIX 内核扩展文件

> ID：10682682
> 
> 赞同：0
> 
> 时间：2012-05-21T09:29:10.683
> 
> 标签：gcc, kernel, aix, kernel-extension

我正在 AIX 6.1 上使用内核扩展构建示例程序。

实际上，我做了一个扩展文件，但我不知道如何导入它。

通常使用 IBM C 编译器的人可以使用“-bI:test.esp”来导入它。当我将此选项用于测试程序时。我收到以下错误。

```
bash# gcc -o test_prog -bI:import test_prog.c
test_prog.c: In function 'main':
gcc: unrecognized option '-bI:question.esp'
ld: 0711-317 error: unrecognized symbol: .question
collect2: ld returned 8 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:32:49.987

这是一个链接器选项，因此告诉 GCC 将其转发给链接器使用`-Wl,-bI:question.esp`或`-Xlinker -bI:question.esp`

# c# - 如何在 LINQ 中将我的成绩“截断”到小数点后一位？

> ID：10682683
> 
> 赞同：1
> 
> 时间：2012-05-21T09:29:16.427
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, decimal

我有一个使用平均成绩的 LINQ 语句，但问题是有时

等级显示为 3.777777，但我希望它是 3.7 如何在我的 linq 语句中截断它？

这是我的 LINQ 声明：

```
public List<CoreValueAndAverageGrade> GetAverageGradeForAllCoreValues2()
{
    var answers = db.GoalCardQuestionAnswer
        .Where(answer => answer.Grade.HasValue
            && (answer.SelectedQuestion.Question is CoreValueQuestion
                && (answer.SelectedQuestion.Question as CoreValueQuestion).SubjectType.Ignored_Statistic == false));
    var groupedByCoreValue = answers.GroupBy(answer => (answer.SelectedQuestion.Question as CoreValueQuestion).CoreValue);

    return groupedByCoreValue
        .OrderBy(group => group.Key.Name)
        .Select(group => new CoreValueAndAverageGrade
        {
            CoreValue = group.Key,
            AverageGrade = group.Any() ? group.Average(answer => answer.Grade.Value) : 0
        }).ToList(); 
```

也许它可以在我的操作方法中的控制器内部进行吗？

```
var averageGrades = OfficeStatisticRepository.GetAverageGradeForAllCoreValues2();

var dataItems = (averageGrades.Select(averageGrade => averageGrade.AverageGrade).ToArray()); // here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:39:21.207

你在这里有三个选择。

1）在 Linq 查询中使用`Math.Truncate`就像您使用`Average`or一样`Aggregate`。作为 Linq->SQL 翻译的一部分。

```
...
... ? group.Average(answer => Math.Truncate(10 * answer.Grade.Value) / 10) : 0M
... 
```

有趣[的是，文档提到了一个`System.Math.Truncate(decimal, int)`方法](http://msdn.microsoft.com/en-us/library/bb738681.aspx)，但它实际上并不存在......幸运的是，你可以乘法和四舍五入。这适用于小数，但如果您的成绩是双倍，则可能会因为除法而导致新的舍入问题。

[2) 在使用decimal.Round](http://msdn.microsoft.com/en-us/library/9s0xa85y)调用 ToList 后，对 Linq 查询中的值进行四舍五入（确保选择正确的舍入方向，因为您不想使用银行家四舍五入的成绩。

```
 var groupedByCureValue = answers.GroupBy....ToList();
 /* then in the next query use Math.Truncate or Math.Round as you 
    would otherwise, you can now use MidPointRounding if you want to 
    no sql translation is done as this is all executed in memory, 
    so you're free to use any framework method available to you. */ 
```

3) 保持值不变，仅使用显示格式在 UI 中显示四舍五入的值，例如[`F1`](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)用于显示值的文本框/标签/绑定。如何设置取决于您使用的显示框架。如果组中有 3.77 和 3.76，这将不会合并值。

# android - 如何从 KML 文件中获取路线长度？

> ID：10682685
> 
> 赞同：0
> 
> 时间：2012-05-21T09:29:31.587
> 
> 标签：android, google-maps, kml

我有包含路线信息的 KML 文件。现在我需要知道这条路线的长度（以公里为单位）。我看到 tag 的 KML 文件中有这个长度，看起来像这样：

```
<description><![CDATA[Distance: 750&#160;m (about 2 mins)<br/>Map data ©2012 Google]]></description> 
```

但在我看来，解析这个字符串是错误的方式。将不胜感激任何替代和/或建议！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:35:12.260

我认为最好的解决方案是使用路线点的坐标来计算路线长度。这是我解决这个问题的代码：

```
ArrayList<GeoPoint> points;
private static final int EARTH_RADIUS = 6371;

.....
            for(int i = 0; i < (points.size() - 1); ++i) {
               final double lat1 = toRadians(points.get(i).getLatitudeE6() / LocationHelper.MILLION);
               final double lat2 = toRadians(points.get(i + 1).getLatitudeE6() / LocationHelper.MILLION);
               final double lon1 = toRadians(points.get(i).getLongitudeE6() / LocationHelper.MILLION);
               final double lon2 = toRadians(points.get(i + 1).getLongitudeE6() / LocationHelper.MILLION);

               length += acos(sin(lat1)*sin(lat2) + cos(lat1)*cos(lat2) * cos(lon2 - lon1)) * EARTH_RADIUS;
            }
        road.length = round(length, 2, BigDecimal.ROUND_HALF_UP);

....
private static double round(double unrounded, int precision, int roundingMode)
{
    final BigDecimal bd = new BigDecimal(unrounded);
    final BigDecimal rounded = bd.setScale(precision, roundingMode);
    return rounded.doubleValue();
} 
```

# ios - 将应用程序 (.ipa) 静默安装到 iPad

> ID：10682690
> 
> 赞同：3
> 
> 时间：2012-05-21T09:29:46.097
> 
> 标签：ios, command-line, installation, ipa, silent-installer

为了加快 iOS 开发速度，如果有一种方法可以自动在设备上安装 ipa，那就太好了。

TestFlightApp 在帮助 ipa 分发方面做得很好。我正在寻找允许将 ipa 放在设备上而无需用户操作的附加步骤。从命令行:-)。通过 USB 或 WiFi 没关系。

有什么输入吗？

斯坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:48:25.417

[Apple Configurator](http://itunes.apple.com/us/app/apple-configurator/id434433123?mt=12)需要 OS X 10.7.2，但它似乎具有您正在寻找的功能。它一次最多可以处理 30 个设备。

# java - Hibernate 获取列属性

> ID：10682691
> 
> 赞同：2
> 
> 时间：2012-05-21T09:29:57.713
> 
> 标签：java, hibernate

我有兴趣获取表列的“描述”属性。是否可以通过 Hibernate 进行操作？我正在使用 Sql Server 2008。

编辑：我正在尝试将 information_schema 中的列描述映射到相应的列（JPA 列实体）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:33:39.917

我认为最简单的解决方案是映射`informatio_schema`为列提供信息的方式。如果您使用注释，您可以轻松访问 和 之类的信息`Table name`，`Column name`这些信息可用于`Criteria`获取描述。

这可能是重新编码一些可用的功能和非平台依赖。但如果你不会在研究中取得成功，总有一些解决办法。

# dojo - Dojo 1.7 自定义构建 - 如何从发布文件夹中删除未使用的文件

> ID：10682699
> 
> 赞同：9
> 
> 时间：2012-05-21T09:30:32.063
> 
> 标签：dojo, dojo-build

我已使用以下 (1.7) 自定义构建配置文件来构建我的发布文件夹。

```
var profile = {
basePath: "..",
action: "release",
cssOptimize: "comments",
mini: true,
optimize: "closure",
layerOptimize: "closure",
stripConsole: "all",
selectorEngine: "acme",
packages:[
    {
        name: "dojo",
        location: "./../../dojo"
    },

    {
        name: "dijit",
        location: "./../../dijit"
    },

    {
        name: "dojox",
        location: "./../../dojox"
    }
],

layers: {
    "dojo/dojo": {
        include: [
                            "dojo/dojo",
                            "dijit/form/Button",
                            "dojox/form/TimeSpinner"
                    ],
        customBase: true,
        boot: true
    }
},

resourceTags: {
    amd: function (filename, mid) {
        return /\.js$/.test(filename);
    }
} }; 
```

在我的 Web 应用程序中，我只使用了两个组件，一个是来自“dijit”包的 Button，另一个是来自“dojox”的 TimeSpinner。因此，我已将这两个组件包含在“dojo/dojo.js”文件中，它按我预期的方式工作。

但发布文件夹包含文件夹“dojo”、“dijit”和“dojox”以及很多文件。

大多数组件没有在我的 Web 应用程序中使用，但它们的文件存在于发布文件夹中。**即使它们不会被加载到浏览器中（因为 AMD）**，我也不希望在我的发布文件夹中有这样的文件。

在我的颠覆中维护如此大量的文件是不必要的。

所以，我的问题如下：

1.  如何从发布文件夹中删除“.uncompressed.js”文件？
2.  如何从发布文件夹中删除未使用组件的文件、CSS、模板？

请帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T09:33:58.110

您可以在 build.sh 的底部添加以下行

```
find . -type f -name '*.uncompressed.js' -print0 | xargs -0 rm -rdf

find . -type f -name '*.consoleStripped.js' -print0 | xargs -0 rm -rdf 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:33:33.243

dojo 构建实用程序并不意味着分离文件子集，并且没有为此进行配置。

构建器进行压缩，它将遗留模块包装到 amd 样式的声明中，并以缓存模块加载方式组合层。

这意味着一旦您创建了 dojo/dojo，customBase（顺便说一句，这是非常高级的设置，小心使用）层 - 将构建一个依赖关系树。依赖树是一个文件列表，每个文件都被压缩并缝合在一起，如下所示；

```
// file: dojo/dojo.js
declare(
  {cache: 
     {
      "moduleDep_1": dojo.cache("moduleDep_1", {}),
      "moduleDep_2": dojo.cache("modu...", .. )
     }, "dojo/dojo", null, {

  dojo/dojo here

}); 
```

如果您的访问者有一个您遗漏的基本依赖项怎么办？

无论如何，较旧的构建实用程序有一个功能依赖列表，它在 1.7 构建实用程序中不存在。这会“拯救”你:)

如果您 100% 确定唯一需要的文件是您的 layerfile - 为什么不简单地将单个文件上传到您的 webhotel？

# asp.net - 使用 ASP.Net 中的 FileUpload 控件警告用户文件太大

> ID：10682700
> 
> 赞同：1
> 
> 时间：2012-05-21T09:30:34.403
> 
> 标签：asp.net, file-upload, filesize

我正在使用 FileUpload 控件来允许用户将文件上传到 SQL 数据库。

我有一个按钮，用于通过 C# 代码加载选定的文件。

但是，如果文件大小为一定大小，则上传失败。我在 C# 代码上有一个断点，当文件大小过大时它永远不会被击中，但当文件大小正常时它会被击中。这是我会检查但断点没有被击中的地方！？？！

实现这一点的最佳方法是什么？我应该使用 JavaScript 吗？

按钮后面的 C# 代码如下，但它从未被触发：

```
protected void buttonAddDocumentType_Click(object sender, EventArgs e)
{
    int size = fileUploadDocument.PostedFile.ContentLength;

    //This is where I'd like to perform the file size check 

    byte[] fileData = new byte[size];

    fileUploadDocument.PostedFile.InputStream.Read(fileData, 0, size);

    WebDataAccess.InsertDocument(Int32.Parse(Request.QueryString["ID"].ToString()), Int32.Parse(comboDocumentTypes.SelectedValue), fileUploadDocument.FileName, fileUploadDocument.PostedFile.ContentType,
                fileUploadDocument.FileBytes.Count(), fileData);

    comboDocumentTypes.SelectedIndex = -1;
} 
```

我正在使用 ASP.Net 4.0

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:32:58.823

Asp.Net 对文件上传有上限。您可以在 web.config 中配置此限制，并在文件上传事件开始之前验证此范围。

无法使用代码来捕获此错误，因为它发生在任何代码启动之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:16:01.830

首先，如果您有大于 4MB 的有效上传，您需要在 web.config 中增加 maxRequestLength，

假设您接受最大 10MB 的文件，将其更改为 16MB，现在您可以在代码中处理任何大于 10MB 的文件，并且任何大于 16MB 的文件都会被 asp.net 运行时拒绝。您不想将 maxRequestLength 更改为一个非常高的数字，因为人们可能会用大文件攻击您的服务器。

```
<system.web><httpRuntime maxRequestLength="16384" /> 
```

你可以检查

```
fileImageControl.PostedFile.InputStream.Length 
```

打电话之前的财产：

```
fileImageControl.PostedFile.SaveAs 
```

我总是将所有上传的文件保存到临时目录中，并在将它们保存到最终位置之前对其进行一些检查。您还可以将它们标记为“从 Internet 下载”，因此 Windows 会相应地处理它们（但如果将它们保存到数据库中则不起作用）。

# google-maps-api-3 - 如何在 GMap V3 中获取事件名称

> ID：10682701
> 
> 赞同：1
> 
> 时间：2012-05-21T09:30:35.040
> 
> 标签：google-maps-api-3

如何在 GMap V3 中获取事件名称。

试过，

```
function initialize(){

    -------------------
    google.maps.event.addListener(map, 'click',function(){handleViewUpdate();});

    google.maps.event.addListener(map, "dragend", function () {handleViewUpdate();});
    -------------------

}

function handleViewUpdate(){
    alert(map.getEvent()+' Event');
} 
```

但失败了。:(

请提供任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:44:12.103

为什么不使用一些标志变量将其作为参数发送给函数，例如：handleViewUpdate(1) 用于第一件事 handleViewUpdate(2) 用于其他。然后您可以获得事件名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:10:32.043

没有名为 map 的方法`getEvent`，但一些事件侦听器回调确实传递了参数（但不是全部）。例如，您可以将`click`事件侦听器定义更改为：

```
google.maps.event.addListener(map, 'click', function( event ) {
    //do something with the event parameter here
    handleViewUpdate();
}); 
```

相反，该`dragend`事件不会*将*任何内容传递给事件侦听器。如果您向下滚动到“**事件**”表，则`google.maps.Map`[^(api-doc包含完整的详细信息。)](https://developers.google.com/maps/documentation/javascript/reference#Map)

 **尽管如此，`google.maps.MouseEvent`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)不包含可用于解决您的特定问题的“名称”或“类型”属性。我检查了 Chrome 控制台中的传入事件，没有任何东西可以用来执行`switch`操作。当您定义事件侦听器时，回调函数是您唯一可以用来为您提供已触发事件的上下文的东西。所以@NejiHyuga's answer中的建议几乎是你最好的选择。**

# tkinter - tcl tk 重新运行应用程序而不重新启动解释器

> ID：10682716
> 
> 赞同：1
> 
> 时间：2012-05-21T09:31:37.127
> 
> 标签：tkinter, tcl, tk

我是 tcl/tk 的新手，需要在 cadence 的遭遇中运行一个脚本。为此，我在提供的解释器中获取我的文件并调用我的函数。在第一次运行时，它工作正常。但是，一旦我关闭使用 Tk 创建的主窗口并尝试重新运行我的方法，它就会告诉我它无法调用该`wm`命令，因为应用程序已被破坏。如何在不重新启动 tcl 解释器的情况下重新运行脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:58:47.620

关闭主窗口是问题所在，它将 Tk 置于不可恢复状态，只能退出。

尝试绑定到 WM_DELETE 消息，然后隐藏/图标化主窗口“。” 或使用额外的顶层窗口而不是默认的“。” 窗户。

根据您的脚本，您可能需要做更多的事情，因为一些小部件/名称在运行两次时可能已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:28:22.923

我曾经使用过这样的东西，暴露在调试菜单中：（警告未测试！）

```
proc Restart {} {
   foreach w [winfo children .] {
       destroy $w
   }
   source [info script]
} 
```

它（希望）销毁所有子小部件，然后通过资源脚本重新创建它们，假设这是当前脚本所做的。

但这将取决于你如何首先建造你的窗户，正如 schlenk 建议的那样

# python - 代码在 UNIX 中工作，但在 Windows 中不工作

> ID：10682719
> 
> 赞同：0
> 
> 时间：2012-05-21T09:31:56.133
> 
> 标签：python, wxpython

我在 wxpython 中编写了一小段代码，其中拆分器窗口用于拆分对话框，一个面板具有自定义树 ctrl，另一个具有静态框。此代码在 Fedora 和 ubuntu 中运行良好，但在 Windows 中，对话框显示为空。

主要代码：

```
wx.Dialog.__init__(self, None, 6, 'Filters',size = (500,600) )
    self.splitter = wx.SplitterWindow(self, -1)
    leftPanel = wx.Panel(self.splitter, -1)
    leftBox = wx.BoxSizer(wx.VERTICAL)
    self.__tree = TreeFilter(leftPanel, 1)
    leftBox.Add(self.__tree, -1, wx.GROW)
    self.__tree.Bind(CT.EVT_TREE_ITEM_CHECKED, self.checked)
    leftPanel.SetSizer(leftBox)

    rightPanel = wx.Panel(self.splitter, -1)
    rightBox = wx.BoxSizer(wx.VERTICAL)
    self.display = wx.StaticText(rightPanel, -1, '', style=wx.ALIGN_LEFT)
    rightBox.Add(self.display, -1, wx.GROW)

    btnsizer = wx.StdDialogButtonSizer()
    btn = wx.Button(rightPanel, wx.ID_OK)
    btn.SetDefault()
    btnsizer.AddButton(btn)

    btn = wx.Button(rightPanel, wx.ID_CANCEL)
    btnsizer.AddButton(btn)
    btnsizer.Realize()
    rightBox.Add(btnsizer, 0, wx.ALIGN_CENTER_VERTICAL|wx.ALL, 5)
    rightPanel.SetSizer(rightBox)

    self.splitter.SplitVertically(leftPanel, rightPanel)
    self.Centre() 
```

其中 TreeFilter 是自定义树 ctrl。请帮我解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:49:56.607

问题是您没有将拆分器本身放在设置为扩展的sizer中。在我的屏幕上，你可以看到一个小盒子在左手角全部蜷缩起来，所以我知道发生了类似的事情。

这是一个对我有用的例子：

```
import wx

########################################################################
class MyTreeCtrl(wx.TreeCtrl):

    #----------------------------------------------------------------------
    def __init__(self, parent, id):
        wx.TreeCtrl.__init__(self, parent, id)

########################################################################
class TestDlg(wx.Dialog):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""

        wx.Dialog.__init__(self, None, 6, 'Filters',size = (500,600) )
        mainSizer = wx.BoxSizer(wx.VERTICAL)

        self.splitter = wx.SplitterWindow(self, -1)
        leftPanel = wx.Panel(self.splitter, -1)
        leftBox = wx.BoxSizer(wx.VERTICAL)
        self.tree = MyTreeCtrl(leftPanel, 1)

        self.root = self.tree.AddRoot("The Root Item")
        self.tree.SetPyData(self.root, None)
        for x in range(15):
            child = self.tree.AppendItem(self.root, "Item %d" % x)
            self.tree.SetPyData(child, None)
        self.tree.Expand(self.root)

        leftBox.Add(self.tree, -1, wx.GROW)
        #self.__tree.Bind(CT.EVT_TREE_ITEM_CHECKED, self.checked)
        leftPanel.SetSizer(leftBox)

        rightPanel = wx.Panel(self.splitter, -1)
        rightBox = wx.BoxSizer(wx.VERTICAL)
        self.display = wx.StaticText(rightPanel, -1, '', style=wx.ALIGN_LEFT)
        rightBox.Add(self.display, -1, wx.GROW)

        btnsizer = wx.StdDialogButtonSizer()
        btn = wx.Button(rightPanel, wx.ID_OK)
        btn.SetDefault()
        btnsizer.AddButton(btn)

        btn = wx.Button(rightPanel, wx.ID_CANCEL)
        btnsizer.AddButton(btn)
        btnsizer.Realize()
        rightBox.Add(btnsizer, 0, wx.ALIGN_CENTER_VERTICAL|wx.ALL, 5)
        rightPanel.SetSizer(rightBox)

        self.splitter.SplitVertically(leftPanel, rightPanel)
        self.Centre()
        mainSizer.Add(self.splitter, 1, wx.EXPAND)
        self.SetSizer(mainSizer)

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = wx.App(False)
    dlg = TestDlg()
    dlg.Show()
    dlg.Destroy()
    app.MainLoop() 
```

# jquery - 漂亮的照片打开图像而不是灯箱

> ID：10682721
> 
> 赞同：1
> 
> 时间：2012-05-21T09:32:11.407
> 
> 标签：jquery, prettyphoto

在过去的几个小时里，我一直试图弄清楚我的代码出了什么问题。它让我头疼。我的漂亮照片不工作，我不知道出了什么问题。它不会作为灯箱打开，它只是在新窗口中打开？？

这是精简版的链接：

[http://v2.jrd.com.au/test.html](http://v2.jrd.com.au/test.html)

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:34:39.633

尝试这个：

```
$("a[rel='prettyPhoto']").prettyPhoto({
    ...
}); 
```

# android - 无尽的 ViewPager android

> ID：10682726
> 
> 赞同：6
> 
> 时间：2012-05-21T09:32:37.850
> 
> 标签：android, android-viewpager

假设我的 viewpager 中有两页，是否可以从第 2 页移动到第 1 页，但是这样做就像用户正在访问第 3 页（带有所有动画）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-19T15:02:17.010

您可以通过使用自定义的 FragmentPagerAdapter 来实现这一点，它一遍又一遍地提供相同的片段：

```
private class EndlessPagerAdapter extends FragmentPagerAdapter {

        private EndlessPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            if (position % 2 == 0) {
                return fragmentOne;
            } else {
                return fragmentTwo;
            }
        }

        @Override
        public int getCount() {
            return Integer.MAX_VALUE;
        }
    } 
```

为您的 ViewPager 设置适配器并从中间某处开始，以允许几乎无休止地向任一方向滑动：

```
mViewPager.setAdapter(new EndlessPagerAdapter(getChildFragmentManager()));
mViewPager.setCurrentItem(Integer.MAX_VALUE/2); 
```

# gwt - 在 tomcat 中检查的远程服务异常转换为 StatusCodeException

> ID：10682728
> 
> 赞同：2
> 
> 时间：2012-05-21T09:32:56.240
> 
> 标签：gwt, gwt-rpc

我有一个 GWT 应用程序，它对 RemoteService 进行常规 RPC 调用，其方法可能会引发 ServiceException：

```
public class ServiceException extends Exception implements java.io.Serializable {
    private static final long serialVersionUID = 1L;
    public ServiceException() {}
    public ServiceException(final Throwable cause) {
        super(cause);
    }
    public ServiceException(final String errorMsg) {
        super(errorMsg);
    }
} 
```

这在开发模式下工作得非常好，我在 onFailure 异步回调中获得预期的异常消息，但是当我编译应用程序并将其部署到 tomcat 时，我的异常被转换为

```
com.google.gwt.user.client.rpc.StatusCodeException: 500 The call failed on the server; see server log for details 
```

就像在开发模式下一样，我的服务器日志显示了我在抛出 ServiceException 之前记录自己的预期异常原因。

我在谷歌上查过这个，但找不到任何相关的东西。

（我正在使用 GWT 2.4、java 1.6 和 Tomcat 7.0.16 开发 Mac OS X Lion）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:52:28.593

愚蠢的错误。我终于发现问题出在我正在使用的 java 混淆器配置中的一个意外拼写错误。因此，在构建我在 tomcat 中部署的战争时，我的类名被重命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:47:20.570

您的 gwt-rpc servlet 似乎没有正确处理异常。然后你的 tomcat 容器通过发送 http-500 错误页面来处理异常。通常，异常应导致 http-200 响应和 gwt 编码答案末尾的“EX”。开发模式使用某种码头容器运行。也许开发模式的码头和tomcat之间存在一些差异，导致不同的行为。

请查看您的 gwt-rpc servlet 代码以查找原因。

顺便说一句：将错误原因放入异常字段是一个坏主意。您永远不会知道原因是否可序列化。

# extjs4 - ExtJS 面板的“工具”按钮可用的图标

> ID：10682734
> 
> 赞同：13
> 
> 时间：2012-05-21T09:33:20.657
> 
> 标签：extjs4

如何设置面板“标题栏”中使用的图标？也许我需要自己添加一个图像，但如果是这样我想我需要在某个地方定义或配置它？

```
{
    xtype: 'treepanel',
    title: 'Projects',
    width: 200,
    store: Ext.data.StoreManager.lookup('projects'),
    tools: [
        {
            type: 'add', // this doesn't appear to work, probably I need to use a valid class
            tooltip: 'Add project',
            handler: function() {
                console.log('TODO: Add project');
            }
        },
        ...
    ]
}, 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-21T10:28:34.447

可以使用 type config 指定一组 25 个图标。检查[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Tool-cfg-type](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Tool-cfg-type)

要获得添加符号使用

```
tools:[{
    type:'plus',
    tooltip: 'Add project',
    // hidden:true,
    handler: function(event, toolEl, panel){
        // Add logic
    }
}] 
```

指定的**类型：'add'**不在列表中

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-31T09:11:01.830

如果您想添加自己的工具类型并能够为其分配您自己的图像，您可以执行以下操作：

在您的 css 文件中添加一个 css 类：

```
.x-tool-mytool { background-image: url(path_to_your_image_file) !important; } 
```

然后在您的工具中，只需使用“mytool”作为类型：

```
 {
                type:'mytool',
                tooltip: 'This is my tool',
                handler: function(event, toolEl, panel){
                    // my tool logic
                }
            } 
```

确保在工具类型中使用与用于 css 类后缀的名称相同的名称。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-11T18:23:00.180

根据 ExtJS 文档，这些预定义类型可用：

```
collapse, expand, maximize, minimize, resize, restore, move, close 

minus, plus, prev, next, pin, unpin, search, toggle, refresh

save, print, gear, help

right, left, up, down 
```

可以输入任何想要的类型：

```
{type: 'YOURTYPE'} 
```

同时提供**15px**图标 - 或者最好是图标精灵

（背景位置当然不适用于单个图标，但图标精灵）：

```
.x-tool-img.x-tool-YOURTYPE{
   background: url('../images/custom_tool_sprites.png') no-repeat 0 0;
} 
```

来源：[Ext.panel.Tool-cfg-type](http://docs.sencha.com/extjs/4.2.3/#!/api/Ext.panel.Tool-cfg-type)，[codefx.biz](http://www.codefx.biz/2014/12/custom-icon-sets-extjs-tool-types)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T09:58:47.453

我认为您的意思是“设置面板标题栏中使用的按钮”，而不是“设置图标”。您可以使用`buttons`面板的配置，而不是`tools`：

```
buttons: [{ 
   text: 'Add',
   tooltip: 'Add project',
   handler: function() {
      console.log('TODO: Add project');
   }
}] 
```

您可以使用其他配置，如`bbar`（底栏）、`fbar`（页脚）、`tbar`（顶部）、`lbar`（左）、`rbar`（右）来定位工具栏。一个小通知是 config 对象`buttons`的默认值为`xtype`，`button`因此您无需显式指定它们。

# hibernate - JPA - 在 IN 运算符中使用长数组会引发强制转换异常

> ID：10682735
> 
> 赞同：2
> 
> 时间：2012-05-21T09:33:22.653
> 
> 标签：hibernate, jpa, jpa-2.0, jpql

我是 JPA 的新手并且能够快速获得它，我一直在尝试在查询中使用“IN”运算符进行选择查询，并且一直将错误视为错误。我所做的是，我从一个函数中获取一组（长）消息 ID，并使用它来根据这些 ID 选择记录。这是我的查询

```
select t from MessageTable t where t.messageId IN (:id)  
query.setParameter("id", id); 
```

我刚刚向您展示了部分代码，实体中的 messageId 很长，而在 Oracle DB 中它的编号。当我尝试与它一样长的变量时，它似乎在我传递长数组时不起作用。如果有人遇到这样的问题，可以有人帮忙。这是错误

> 14:24:49,428 INFO [LongType] 无法将值“[J@14f76da”绑定到参数：1；[J 不能强制转换为 java.lang.Long

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T18:41:26.640

当您想要检查 long/Long 时，数组`Long[]`和不是 IN 的有效参数类型 - 仅以下是：`long[]`

*   `Long`
*   `long`和
*   `Collection<Long>`(collection_valued_input_parameter)

如果您想坚持使用 JPA 而不是使用[Kshitij](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/Query.html#setParameterList%28java.lang.String,%20java.util.Collection%29)建议的 org.Hibernate.Query.setParameterList，则必须将参数转换为`Collections<Long>`.

转换很容易完成，可以通过自己滚动或例如在[ArrayUtil](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html#toObject%28long%5B%5D%29)的帮助下完成：

```
long[] id = {1L, 2L};
Long[] longs = ArrayUtils.toObject(id);
Collection<Long> list = Arrays.asList(longs); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:39:01.857

尝试这个：

```
query.setParameterList("id", ids); 
```

# knockout.js - Knockoutjs 将文本绑定与另一个元素结合起来

> ID：10682736
> 
> 赞同：0
> 
> 时间：2012-05-21T09:33:28.393
> 
> 标签：knockout.js

我想将内部文本和另一个元素放入一个 . 目前我正在做：

```
function menuItem(number, text) {
        this.text = text;
        this.html = '<span><font class="small">' + number + '.</font>' + text + '</span>';
    }

    function viewModelMenu() {
        // Data
        var self = this;
        self.menuItems = [new menuItem('1', 'First'),
            new menuItem('2', 'Second')];
} 
```

并查看：

```
<div data-bind="html:$data.html"></div> 
```

但是 html 编码[不安全](http://knockoutjs.com/documentation/html-binding.html)？

我可以使用敲除文本绑定或其他任何东西来构建文本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:35:21.760

正如评论所提到的，如果没有 html 绑定，您将无法执行此操作，而且您真的不应该这样做，因为它不安全。向菜单项模板添加一点额外标记有什么问题

```
<div>
    <span>
        <font class="small" data-bind="text: number"></font>
        <span data-bind="text: text"></span>
    </span>
</div> 
```

它是安全的，可以很容易地使其看起来相同，如果数字是可观察的并且发生变化，它不会重新渲染整个项目。

希望这可以帮助。

# c# - 正则表达式语句仅适用于 C# 中 0 到 255 之间的数字

> ID：10682737
> 
> 赞同：1
> 
> 时间：2012-05-21T09:33:34.413
> 
> 标签：c#, regex

我如何只为 0 到 255 之间的数字编写正则表达式语句？0 和 255 将对该语句有效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T09:36:35.820

您可以在此处找到一些数字范围：

[http://www.regular-expressions.info/numericranges.html](http://www.regular-expressions.info/numericranges.html)

你的例子是：

```
^([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T09:35:40.127

```
^([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])$ 
```

[这个工具](http://utilitymill.com/utility/Regex_For_Range)对这些事情很有帮助。一点点搜索也不会伤害任何人。

但是，如果您想允许前导零，则需要调整模式。例如：

```
^([01][0-9][0-9]|2[0-4][0-9]|25[0-5])$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T09:53:53.767

**尝试消极看待背后：**

```
(?<!\-)\b0*([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])\b 
```

**解释**

```
<!--
(?<!\-)\b0*([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])\b

Options: ^ and $ match at line breaks

Assert that it is impossible to match the regex below with the match ending at this position (negative lookbehind) «(?<!\-)»
   Match the character “-” literally «\-»
Assert position at a word boundary «\b»
Match the character “0” literally «0*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
Match the regular expression below and capture its match into backreference number 1 «([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])»
   Match either the regular expression below (attempting the next alternative only if this one fails) «[0-9]{1,2}»
      Match a single character in the range between “0” and “9” «[0-9]{1,2}»
         Between one and 2 times, as many times as possible, giving back as needed (greedy) «{1,2}»
   Or match regular expression number 2 below (attempting the next alternative only if this one fails) «1[0-9]{2}»
      Match the character “1” literally «1»
      Match a single character in the range between “0” and “9” «[0-9]{2}»
         Exactly 2 times «{2}»
   Or match regular expression number 3 below (attempting the next alternative only if this one fails) «2[0-4][0-9]»
      Match the character “2” literally «2»
      Match a single character in the range between “0” and “4” «[0-4]»
      Match a single character in the range between “0” and “9” «[0-9]»
   Or match regular expression number 4 below (the entire group fails if this one fails to match) «25[0-5]»
      Match the characters “25” literally «25»
      Match a single character in the range between “0” and “5” «[0-5]»
Assert position at a word boundary «\b»
--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:37:32.940

尝试

```
([01]?\d\d?|2[0-4]\d|25[0-5]) 
```

# android - 创建随机位置时距离错误

> ID：10682743
> 
> 赞同：2
> 
> 时间：2012-05-21T09:33:55.780
> 
> 标签：android, geolocation, range, distance

我正在尝试在我的位置附近创建随机位置。我想要的是在我所在位置周围 200 米的圆圈内创建随机纬度/经度对。在问了这个问题之后：[在我的位置附近生成随机位置](https://stackoverflow.com/questions/10530031/generate-random-locations-nearby-my-location)，这就是我想出的。

在 onLocationChanged 中，这就是我所做的：

```
private void updateWithNewLocation(Location location) {
    if (location != null) {
        this.myItemizedOverlay.clear();
        this.nonPlayerItemizedOverlay.clear();
        this.mapOverlays.clear();
        // Update my map location.
        Double latitude = location.getLatitude() * 1E6;
        Double longitude = location.getLongitude() * 1E6;
        GeoPoint geoPoint = new GeoPoint(latitude.intValue(),
                longitude.intValue());

        CustomOverlayItem pcOverlayItem = new CustomOverlayItem(geoPoint,
                "", "", "");

        this.mapController.animateTo(geoPoint);

        this.myItemizedOverlay.setLocation(location);
        this.myItemizedOverlay.addOverlay(pcOverlayItem);
        this.mapOverlays.add(this.myItemizedOverlay);

        // Everytime i get a new location i generate random non player
        // characters near my location
        int numberOfNonPlayers = new Random().nextInt(5);

        for (int i = 0; i < numberOfNonPlayers; i++) {
            int radius = (int) this.myMapView.getProjection()
                    .metersToEquatorPixels(200);
            double lowerLimit = -1;
            double upperLimit = 1;

            Double newLatitude = location.getLatitude()
                    * 1E6
                    + (radius * (lowerLimit + (Math.random() * ((upperLimit - lowerLimit) + 1))));
            Double newLongitude = location.getLongitude()
                    * 1E6
                    + (radius * (lowerLimit + (Math.random() * ((upperLimit - lowerLimit) + 1))));

            GeoPoint geoPoint2 = new GeoPoint(newLatitude.intValue(),
                    newLongitude.intValue());

            CustomOverlayItem npcOverlayItem = new CustomOverlayItem(
                    geoPoint2, "", "", "");

            Location newLocation = new Location("npc " + i);
            newLocation.setLatitude(newLatitude);
            newLocation.setLongitude(newLongitude);

            this.nonPlayerItemizedOverlay = new NonPlayerItemizedOverlay(
                    this.nonPlayerDrawable, this.myMapView);
            this.nonPlayerItemizedOverlay.setLocation(newLocation);
            this.nonPlayerItemizedOverlay.addOverlay(npcOverlayItem);
            this.mapOverlays.add(this.nonPlayerItemizedOverlay);
        }
    }
} 
```

这是我的 NonPlayerItemizedOverlay 类：

```
public class NonPlayerItemizedOverlay extends BaseItemizedOverlay {

public NonPlayerItemizedOverlay(Drawable defaultMarker, MapView mapView) {
    super(defaultMarker, mapView);
    // TODO Auto-generated constructor stub
}

private Location location;

public static int metersToRadius(float meters, MapView map, double latitude) {
    return (int) (map.getProjection().metersToEquatorPixels(meters) * (1 / Math
            .cos(Math.toRadians(latitude))));
}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    super.draw(canvas, mapView, shadow);

    if (shadow == false) {
        Projection projection = mapView.getProjection();

        // Get the current location
        Double latitude = location.getLatitude();
        Double longitude = location.getLongitude();
        GeoPoint geoPoint = new GeoPoint(latitude.intValue(),
                longitude.intValue());

        // Convert the location to screen pixels
        Point point = new Point();
        projection.toPixels(geoPoint, point);

        // int radius = metersToRadius(30, mapView, latitude);
        int radius = (int) mapView.getProjection()
                .metersToEquatorPixels(50);

        RectF oval = new RectF(point.x - radius, point.y - radius, point.x
                + radius, point.y + radius);

        // Setup the paint
        Paint paint = new Paint();
        paint.setAntiAlias(true);
        paint.setStrokeWidth(2.0f);

        paint.setColor(0xffE62020);
        paint.setStyle(Style.STROKE);
        canvas.drawOval(oval, paint);

        paint.setColor(0x18E62020);
        paint.setStyle(Style.FILL);
        canvas.drawOval(oval, paint);
    }
}

public Location getLocation() {
    return location;
}

public void setLocation(Location location) {
    this.location = location;
} 
```

还有我的 MyItemizedOverlay 类：

```
public class MyItemizedOverlay extends BaseItemizedOverlay {

public MyItemizedOverlay(Drawable defaultMarker, MapView mapView) {
    super(defaultMarker, mapView);
    // TODO Auto-generated constructor stub
}

private Location location;

public static int metersToRadius(float meters, MapView map, double latitude) {
    return (int) (map.getProjection().metersToEquatorPixels(meters) * (1 / Math
            .cos(Math.toRadians(latitude))));
}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    super.draw(canvas, mapView, shadow);

    if (shadow == false) {
        Projection projection = mapView.getProjection();

        // Get the current location
        Double latitude = location.getLatitude() * 1E6;
        Double longitude = location.getLongitude() * 1E6;
        GeoPoint geoPoint = new GeoPoint(latitude.intValue(),
                longitude.intValue());

        // Convert the location to screen pixels
        Point point = new Point();
        projection.toPixels(geoPoint, point);

        // int radius = metersToRadius(100, mapView, latitude);
        int radius = (int) mapView.getProjection().metersToEquatorPixels(
                200);

        RectF oval = new RectF(point.x - radius, point.y - radius, point.x
                + radius, point.y + radius);

        // Setup the paint
        Paint paint = new Paint();
        paint.setAntiAlias(true);
        paint.setStrokeWidth(2.0f);

        paint.setColor(0xff6666ff);
        paint.setStyle(Style.STROKE);
        canvas.drawOval(oval, paint);

        paint.setColor(0x186666ff);
        paint.setStyle(Style.FILL);
        canvas.drawOval(oval, paint);
    }
}

public Location getLocation() {
    return location;
}

public void setLocation(Location location) {
    this.location = location;
} 
```

事情是发生了一些奇怪的事情，因为所有随机位置都离我的位置中心太近了，似乎该公式没有涵盖整个半径，我认为距离不是真正的米。

知道我的公式有什么问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:41:08.453

有关**地图投影**和**坐标计算**的问题，此 SE 站点可能会有所帮助： http: [//gis.stackexchange.com](http://gis.stackexchange.com)（地理信息系统）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:54:02.477

确保使用 location 类的 distanceTo() 公式。你可以这样做：

```
double distance  = a.distanceTo(b); 
```

其中 a 和 b 是 Location 对象。

# objective-c - UIButton @selector 是如何工作的？

> ID：10682746
> 
> 赞同：1
> 
> 时间：2012-05-21T09:34:08.823
> 
> 标签：objective-c, ios, uibutton, selector

我是 iOS 开发的新手，我想知道这条线是如何工作的：

```
[myButton addTarget:self action:@selector(doSomething:) forControlEvents:UIControlEventTouchUpInside]; 
```

我只是尝试了这个：

```
- (void) doSomething : (id) sender
{
   NSLog(@"Test");
} 
```

但它不起作用。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T09:46:57.370

试试下面的代码，这对我有用：

```
[myButton addTarget:self action:@selector(doSomething) forControlEvents:UIControlEventTouchUpInside]; 
```

并尝试了这个

```
-(void)doSomething
{
    NSLog(@"Test");
} 
```

欢迎！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:56:12.010

![在此处输入图像描述](../Images/a3e33b92111cd6f4f67c7d00e42a7249.png)

.h 文件有

```
IBOutlet UIButton *myButton; 
```

在 .xib 中将按钮与 myButton 链接（即图像）

# iphone - 如何在 iOS 中使用 Dropbox API 用父版本覆盖文件？

> ID：10682749
> 
> 赞同：9
> 
> 时间：2012-05-21T09:34:20.533
> 
> 标签：iphone, ios, dropbox-api

我正在使用 Dropbox API 开发 iOS 应用程序。使用 Dropbox API 上传文件时，我只想覆盖现有的同名文件。如何设置父级转速和什么值？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:10:04.083

获取目录中的所有文件`[[self restclient] loadMetadata:@"/"]`

在委托中 -`(void)restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata` 您可以获得每个文件的所有详细信息。使用您感兴趣的文件名扫描所有文件，并使用 file.rev 获取 rev 详细信息并存储它。

当您要替换文件时，对于`parentrev`参数，请给出`nsstring`您使用 file.rev 存储的内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:05:05.780

[https://www.dropbox.com/developers/reference/api#files_put](https://www.dropbox.com/developers/reference/api#files_put)

参考 Dropbox API，您只需指定 parent_rev 参数。如果您不知道 parent_rev，只需调用文件的[https://www.dropbox.com/developers/reference/api#metadata](https://www.dropbox.com/developers/reference/api#metadata)。在该调用的响应中，您将找到 parent_rev

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:02:36.797

一种更有趣的方式是

```
[[self restclient] loadrevisionsforfile:@"/test.pdf"] 
```

这假设您知道您的 test.pdf 在根目录下

在代表

```
-(void) restclient:(DBRestClient *)client loadedRevisions:(NSArray *)revisions forfile:(NSString *)path 
```

revisions 数组保存 test.pdf 文件的所有修订历史，这意味着数组计数表示 test.pdf 已更新的次数

```
DBMetaData *y = [revisions objectatindex:0] 
```

在索引 0 处，修订号是最新更新的 test.pdf。

为了更新现有的 test.pdf，y.rev 可用于 parentrev 中的参数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T10:06:30.783

在 uploadFile 方法中，将 withParentRev 设置为 nil。

# perl - 在 Perl 中调用子例程的非标准方式

> ID：10682750
> 
> 赞同：3
> 
> 时间：2012-05-21T09:34:38.033
> 
> 标签：perl, subroutine

我正在尝试一种在 Perl 脚本中调用子例程的不同方式。

我有一组功能如下：

```
sub Testcase_CheckStatus {
    print "TestCase_CheckStatus called\n";
} 
```

然后我使用“CheckStatus”之类的键遍历 Perl 哈希：

```
while (my ($k, $v) = each %test_cases) {
    print "TestCase_$k","\n";
    Testcase_$k();
} 
```

基本上，我想在解析哈希键时调用上面的函数 Testcase_CheckStatus ，但是我收到了这个错误：

> 无法通过包“CheckStatus”找到对象方法“Testcase_”（也许您忘记加载“CheckStatus”？）在 ./main.pl 第 17 行

我能做些什么来纠正这个问题？有没有其他方法可以做同样的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T09:53:19.507

另一种方式：

```
use 5.010;
use warnings;
use strict;

my $testcases = {
    test_case_1 => sub {
        return 1 * shift();
    },
    test_case_2 => sub {
        return 3 * shift();
    },
    test_case_3 => \&SomeSub,
};

for (1 .. 3) {
    say $testcases->{ 'test_case_' . $_ }(7);
}

sub SomeSub {
    return 5 * shift();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T09:39:33.093

以下应该允许你做你想做的事：

```
while (my ($k, $v) = each %test_cases) {
    print "TestCase_$k","\n";
    &{"Testcase_$k"}();
} 
```

`strict`但是，如果正在使用中，这将不起作用。如果您正在使用`strict`，则需要`no strict`在 while 循环内部，例如：

```
while (my ($k, $v) = each %test_cases) {
    no strict 'refs';

    print "TestCase_$k","\n";
    &{"Testcase_$k"}();
} 
```

# javascript - 是否可以让浏览器在已打开的网站中打开链接？

> ID：10682752
> 
> 赞同：0
> 
> 时间：2012-05-21T09:34:48.690
> 
> 标签：javascript, html, browser

我有一个应用程序，其中有选项卡，每个选项卡代表一个特定的子应用程序。

我想拥有所有链接，例如`site.com/*`在已经存在的浏览器选项卡中打开，并且以某种方式可能会触发一个 JavaScript 事件，即接收/打开了一个新链接，以便我可以在我的应用程序中打开它。

所以基本上，我正在构建一个 Web 应用程序，我希望在同一个应用程序实例中打开链接，而不是创建我的应用程序的多个实例。

这可能吗？

**更新：**我说的是如果有人通过 Skype 或电子邮件发送链接，链接将在我的应用程序中打开。我知道大多数网络技术，我想不出任何方法，这就是为什么如果有人可能有想法，我会留下这个问题。或者一个插件，如果没有，有一天我们可能会得到一个，我会添加我自己/更新问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:38:46.123

是的。只需使用链接的[`target`属性](https://developer.mozilla.org/en/HTML/Element/a#attr-target)在其子应用程序浏览上下文（即选项卡、窗口）中打开它们。

打开链接时不会触发任何事件。您可以为所有链接添加点击事件处理程序，在 URL 匹配时执行您需要的操作。

* * *

如果您希望您的 Web 应用程序打开特定的协议或 mime 类型，即使使用 HTML5 也是可能的。您可以使用[`window.navigator.registerProtocolHandler()`](https://developer.mozilla.org/en/Web-based_protocol_handlers)和[`window.navigator.registerContentHandler()`](https://developer.mozilla.org/en/DOM/window.navigator.registerContentHandler)。请参阅[关于自定义方案和内容处理程序的 HTML5 草案](http://www.w3.org/TR/html5/system-state-and-capabilities.html#custom-handlers)。

如果用户为他通过电子邮件等收到的链接打开一个新选项卡/窗口，您通常无法捕捉和阻止这种情况。但是您可以使用[跨文档消息传递](http://www.whatwg.org/specs/web-apps/current-work/multipage/web-messaging.html#web-messaging)，例如`window.postMessage`，查看您的应用程序是否已经在浏览器中的某个位置打开，然后关闭一个选项卡并关注另一个选项卡。

# rest - 休息 API 返回

> ID：10682753
> 
> 赞同：2
> 
> 时间：2012-05-21T09:34:49.720
> 
> 标签：rest

我正在构建一个休息 api，并且想知道返回错误。目前，我的计划是使用 http 状态码，但也总是返回结果。如果发生错误，结果将如下所示。

```
{
"Data":[the data],"
Errors":[the errors]
} 
```

基本上，如果发生错误，将返回 4xx 或 5xx 的 Http 状态代码，并且返回的 JSON 中的 Errors 集合将包含有关错误的更多详细信息，其中 Data 部分为空。如果调用成功，将返回 200 的 Http 状态代码以及包含请求数据的数据元素，并且错误元素将为空。

这是返回带有错误信息的数据的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:52:22.070

在我的设计中，我没有在响应 JSON 对象中同时包含“数据”和“错误”属性。

如果 API 成功，我将只返回“数据”。http状态码是2XXX。

如果 API 失败，我将返回一个“错误”对象。http 状态遵循 RFC 2616 第 10 节中定义的规范。

我的错误对象的示例如下。

```
HTTP/1.1 404 Not Found
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 100
Date: Thu, 08 Nov 2012 07:07:05 GMT
Connection: keep-alive

{
  "type": "error",
  "status": 404,
  "message": "Not Found",
  "help_url": "/api/help.html"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-17T23:57:37.513

我也在使用这种方法。我知道这不符合标准约定。但是无所谓。我认为无论哪种方式都可以争论。就我个人而言，我的 API 不是公开可用的（它们都在我的应用程序内部使用）。所以我认为这是一种“视情况而定”的情况。

我所有的 API 都返回带有 T 模板有效负载的相同数据结构。数据结构本身很好，因为消费者拥有他们需要的一切（成功状态、错误代码、错误详细信息，当然还有数据负载本身）。

这样，我的表示层可以以友好的方式统一处理所有 http 响应。

# iphone - 即使应用程序在 iphone 中关闭，也要做一些事情

> ID：10682757
> 
> 赞同：1
> 
> 时间：2012-05-21T09:35:00.070
> 
> 标签：iphone, ios, notifications, uilocalnotification

我正在开发 iphone 应用程序，我想开发功能，即使应用程序完全关闭，每小时将应用程序内的文件备份到服务器上。

我尝试使用`NSLocalNotification`但它不是调用方法

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

在应用程序委托中。显示带有取消和查看按钮的警报框的通知程序，如果我在视图中单击它会打开应用程序但不调用该方法。即使用户说取消，它也应该调用这个方法。

所以它不会调用 Web 服务来备份文件。任何人都可以指导我链接哪个做同样的事情。

谢谢你，罗希特·扬卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:41:46.550

你真的不能为所欲为。由于 iOS 不允许应用程序在后台运行，除非它是`VOIP`客户端、AudioPlayer 或跟踪用户位置。

解决方案的问题`UILocalNotification`在于 iOS 处理通知。当用户单击取消时，您的应用不会收到有关此信息的通知。您只能处理视图按钮的点击。

仅当`-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification`您的应用程序正在运行或从后台运行恢复时才会调用。

如果您的应用程序在用户单击本地通知上的视图时由系统启动，您将需要检查方法中是否有通知`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`：

```
UILocalNotification *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey]; 

if (notification) {
    //handle the notification.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:10:36.833

> 我正在开发 iphone 应用程序，我想开发功能，即使应用程序完全关闭，每小时将应用程序内的文件备份到服务器上。

如果您正在谈论每隔几个小时将文件备份到您自己的服务器，那么真的没有办法做到这一点。另一方面，当应用程序没有运行时也应该不需要这样做——如果应用程序没有运行，它就不能修改其文件中的数据，也不应该有任何需要返回向上。*相反，只需确保在应用程序*运行时定期备份数据。

如果您只是想确保应用程序的数据在*某处*备份，请考虑使用[iCloud](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/iCloud/iCloud.html#//apple_ref/doc/uid/TP40007072-CH5-SW1)。将应用设置为使用 iCloud 后，每次更新时都会备份您的数据。

# lua - 与两个物体碰撞

> ID：10682758
> 
> 赞同：1
> 
> 时间：2012-05-21T09:35:00.210
> 
> 标签：lua, coronasdk

我在屏幕上有很多砖块（物理体）（不同 - 不同的 x 和 y 方向），一个球来自向上方向（y = 0）。在这个动作中，如果一个球与一块砖（从顶部）碰撞，那么它会获得一些速度。

到目前为止一切正常，但我希望当球与砖（从底部）碰撞时，球应该表现得像一个“非物理”的身体。这意味着当它从砖的顶部碰撞时，球必须是物理体，而当它在该运动中与底部碰撞时，球的行为必须像“非物理”体。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:57:41.160

只需检测球来的方向（例如，您可以使用球的垂直速度），如果球向上，您设置

```
bar.isSensor = true 
```

在物体上，然后在球不再与它碰撞或正在下降后将其恢复为假。

# css - CSS3 是否为“背景”提供“最小尺寸”属性？

> ID：10682765
> 
> 赞同：22
> 
> 时间：2012-05-21T09:35:29.027
> 
> 标签：css, background

我正在使用

```
background-size: 100%; 
```

使我的背景图像（在 body-tag 中）适合浏览器窗口。

但是是否有 CSS3 背景属性来设置最小尺寸？

还是我需要一些 div-“技巧”，例如：

```
<div id="bg">
    <img src="images/bg.jpg" alt="">
</div>

#bg {
    position:fixed;
    top:-50%;
    left:-50%;
    width:200%;
    height:200%;
}
#bg img {
    position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0;
    margin:auto;
    min-width:50%;
    min-height:50%;
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-21T09:45:05.410

我想你正在寻找

```
background-size: contain; 
```

或者

```
background-size: cover; 
```

不同之处在于`cover`指定背景图像应尽可能小，同时保持其纵横比。`contain`另一方面，指定背景图像应尽可能大。

[请参阅此处](https://developer.mozilla.org/en/CSS/background-size)的 MDN 文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-26T01:06:16.770

添加这个怎么样：

```
@media screen and (max-width:700px){
    #bg img { width: 500px; /* fixed width under 700px */ }
} 
```

# c# - 角色/权限 - 缓存会影响它吗？

> ID：10682777
> 
> 赞同：0
> 
> 时间：2012-05-21T09:36:00.803
> 
> 标签：c#, caching, asp.net-mvc-2

一旦通过身份验证，我将使用它`HttpContext.Current.User.Identity.Name;`来确保用户有权查看我的网站的一部分。

当我访问网站的某些部分时，我需要获取用户并获取他们登录的上下文（他们登录的组织），**url**类似于`settings/supercompany/profile`. 其中*supercompany*是当前上下文。

对于每个用户，我需要检查他们是该公司的管理员还是普通用户，如果是普通用户，那么他们看不到某些东西。

```
public class SettingsApi
{
    private readonly string _userId;
    private readonly string _contextId;

    public SettingsApi(string userId, string contextId)
    {
        _userId = userId;
        _contextId = contextId;
    }
} 
```

如果我从控制器（发布或获取）实例化上面的类，缓存会以某种方式搞砸吗？用户角色改变了，我不接？像下面这样的东西会很好用吗？

```
var settings = new SettingsApi(HttpContext.Current.User.Identity.Name, currentContextId);
settings.IsAdmin(); 
```

注意：我会使用属性进行授权，但我的要求是我需要从 URL 中挑选出 currentContext ，而且我需要在代码的其他地方使用上面的类。

**更新**

*AuthorizeAttribute*适用于缓存，但用于授权的方法即

```
 protected override bool AuthorizeCore(HttpContextBase httpContext) 
```

不会把我需要的类的实例交还给我......

**更新 2**我不希望此类或此类的实例被缓存，每次我要求一个新实例时，我都不介意从数据库中获取一个......

我的问题 - 我编码的方式好吗？我的用户和他的权限不会被缓存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:55:34.180

如果您不小心，有可能让 MVC 缓存经过身份验证的用户的第一个请求的输出。我使用 VaryByCustom 和当前身份的名称。

```
[OutputCache(VaryByCustom="user")]
public class SomeController : Controller
{
  // etc.
} 
```

在我的 Global.asax.cs 我定义：

```
public override string GetVaryByCustomString(HttpContext context, string custom)
{
    if (custom.Equals("user", StringComparison.OrdinalIgnoreCase))
    {
        return context.User.Identity.IsAuthenticated ? context.User.Identity.Name : string.Empty;
    }
    return base.GetVaryByCustomString(context, custom);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:58:47.963

如果您建议将 SettingsApi 的实例添加到缓存中，那么它肯定不会起作用，因为缓存是应用程序范围的，因此所有用户最终将共享相同的 SettingsApi。使用 OutputCache 应该没问题（只要您不执行诸如将 userid 放在隐藏字段中并使用 [OutputCache(VaryByCustom="user")] 或类似的操作）。

如果您希望缓存 SettingsApi，您应该通过每个用户/会话的 SessionState 来执行此操作，并且不会影响身份验证。

# unix - 运行同一 unix 服务的多个实例

> ID：10682779
> 
> 赞同：0
> 
> 时间：2012-05-21T09:36:08.837
> 
> 标签：unix

我们有一个想要作为 Unix/Linux 服务运行的服务器应用程序。

我们希望运行应用程序的多个实例以实现负载共享和故障转移。

我看到的问题是，应该启动应用程序的唯一实例作为 unix 服务。

因此，寻求有关此问题的最佳解决方案的建议，将应用程序的多个实例作为 Unix 服务运行的最佳方法是什么？

我不会详细介绍应用程序架构，因为问题是关于使用服务和服务器的多个实例的指导。

但是应用程序架构的概述是，它被设计成可以在一台服务器上一次运行多个实例。应用程序为在消息队列上接收到的请求提供服务，而消息传递代理处理多个共享同一请求队列的应用程序。此外，数据库处理许多实例更新和读取。

# google-app-engine - AppEngine（或其嵌入式服务器）如 何处理不同的 url

> ID：10682784
> 
> 赞同：1
> 
> 时间：2012-05-21T09:36:26.180
> 
> 标签：google-app-engine, jetty, http-status-code-404

[我创建了一个简单的 appengine 项目，该项目访问托管在http://commerce.qa.mycomp.com](http://commerce.qa.mycomp.com)中的 restful web服务（mycomp 应该替换为我的实际公司名称）。

我正在使用 Jersey Client 来发出客户端请求。我向上述网址发出 POST 请求。当我在本地运行应用程序时，它总是返回 404 Not Found 响应。为了进行实验，我向[http://www.bbc.co.uk/news/](http://www.bbc.co.uk/news/)发出了一个 POST 请求，这工作正常，并返回 200 作为状态。

我刚刚将我的应用程序与 appengine 解耦并在单独配置的 tomcat 服务器中运行它，它工作正常并返回 200 状态代码。我认为 appengine 使用 Jetty 作为服务器。Jetty 是否存在处理 commerce.qa.mycomp.com 等 URL 的错误。为什么我问这是以 www.any.com 开头的网址似乎工作正常。

下面显示的两个代码片段在本地 appengine 中运行时不起作用（即使我将它托管到 apppot 也不运行）。

```
Client client = Client.create();
WebResource service = client.resource("http://commerce.qa.mycomp.com/rest");
ClientResponse response = service
    .header("Content-Type", "text/xml; Charset=utf-8")
.header("Authorization", "Basic dwt3hkl553lsfsfssf3")
.post(ClientResponse.class, "does not need to be actual xml");

URL url = new URL("http://commerce.qa.mycomp.com/rest");
HttpURLConnection conn = (HttpURLConnection)url.openConnection();
conn.setDoOutput(true);
conn.setRequestMethod("POST");
conn.setRequestProperty("Content-Type", "text/xml; Charset=utf-8");
conn.addRequestProperty("Authorization", "Basic dwt3hkl553lsfsfssf3");
OutputStream os = conn.getOutputStream();
os.write("no need to be actual xml".getBytes());
os.flush();
System.out.println("Response Code: " + conn.getResponseCode()); 
```

但是当用tomcat运行时，它就可以工作了。

我的安装是：Google App Engine Java SDK 1.6.1 Google Plugin for Eclipse 3.7 jersey-client-1.12、jersey-core-1.12、jersey-json-1.8

请分享想法。

# asp.net-mvc-3 - 在不同的控制器中从 ActionResult 使用 ASP WebAPI

> ID：10682787
> 
> 赞同：2
> 
> 时间：2012-05-21T09:36:55.010
> 
> 标签：asp.net-mvc-3, asp.net-web-api

`ActionResult`从另一个控制器中使用 WebAPI 服务的最佳方式是什么？基本上我有一个返回数据的控制器。

```
public class MyApiController : ApiController
{
    public MyData Get()
    {
      //returns the data
    }

} 
```

我想从

```
public class MyConsumeController: Controller
{

    public ActionResult MyConsumeAction()
    {
       var something = //Call Get inside MyApiController 
    }
} 
```

有任何想法吗？

注意：我知道如何使用 HttpClient（不同的项目）或 jquery（来自视图）来使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:47:28.733

您可以使用[客户端 API](http://www.johnnycode.com/blog/2012/02/23/consuming-your-own-asp-net-web-api-rest-service/) - [HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)类。这是[另一个示例](http://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee)。

# php - 如何将有关我网站上阅读文章的信息添加到 facebook 近期活动？

> ID：10682788
> 
> 赞同：0
> 
> 时间：2012-05-21T09:36:59.720
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-javascript-sdk

如何将有关我网站上阅读文章的信息添加到 facebook 近期活动（如卫报）？

我使用 php 和代码：

```
$ret_obj = $facebook->api('/me/feed', 'POST',
                                    array(
                                      'link' => 'example.com',
                                      'message' => 'Test message'
                                 )); 
```

此代码在用户的时间线中发布消息，但我想在他最近的活动中发布消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:45:21.720

可能你不想使用 open graph api，而不是 graph api

[https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)

[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

[https://developers.facebook.com/docs/opengraph/opengraph-approval/](https://developers.facebook.com/docs/opengraph/opengraph-approval/)

# vb.net - VB 将数据从文本文件加载到列表框时出现问题

> ID：10682792
> 
> 赞同：0
> 
> 时间：2012-05-21T09:37:13.907
> 
> 标签：vb.net, list, text-files

我试图让我的应用程序将文本文件中的数据显示到具有视觉基础的列表框中。我让它适用于小型文本文件没问题，但它不适用于大小为 20mb 的文本文件。有什么理由不加载这样的或某种限制吗？

我忘了问，难道只是要等很久吗？该程序只是坐在那里，在它获取数据时我无法与之交互......我认为无论如何......

```
Sub OpenFiles()
    Dim myName As String = Dir(downloadTo + "*.TXT")
    Do While myName <> ""
        lstFiles.Items.Add(myName)
        myName = Dir()
    Loop
End Sub

Sub ReadFiles(textFile As String)

    Dim logReader As New System.IO.StreamReader(textFile)

    lstSrchTxt.Items.Clear()
    While logReader.EndOfStream <> True

        Dim stringx As String = logReader.ReadLine

        If stringx.Contains(searchText) Then
            lstSrchTxt.Items.Add(stringx)
        End If
    End While

    logReader.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T09:55:05.690

问题是我输入了太多数据，需要时间来处理所有字符。

# crystal-reports - 为什么 Crystal Reports 不将 String 类型的数据绑定到该报表？

> ID：10682793
> 
> 赞同：0
> 
> 时间：2012-05-21T09:37:21.700
> 
> 标签：crystal-reports

**查询**：

```
select acc.cust_no, surrogateTable.category as categoryCall, count(acc.calling_no) as totalCalls
from (select 'Completed' as category union all select 'Unanswered' as category) as surrogateTable
left join acc on surrogateTable.category = 'Completed' 
where acc.method = 'INVITE' AND acc.sip_code = '200' and 
(acc.cust_no = 'BIS00031' or acc.cust_no = 'BIS00031') 
UNION 
select missed_call.cust_no, surrogateTable.category as categoryCall, count(missed_call.calling_no) as totalCalls 
from (select 'Completed' as category union all select 'Unanswered' as category) as surrogateTable 
left join missed_call on surrogateTable.category = 'Unanswered' 
where missed_call.method = 'INVITE' AND missed_call.sip_code = '487' and 
(missed_call.cust_no = 'BIS00031' or missed_call.cust_no = 'BIS00031') 
order by categoryCall ASC 
```

**查询结果**：

![在此处输入图像描述](../Images/03d841847e821b6fa15623467d07feab.png)

**报告设计**：

![在此处输入图像描述](../Images/745c38a2e2aa642181df0a6921b7533b.png)

**报告结果**：

![在此处输入图像描述](../Images/5af48f248d88696ae87edee143424f42.png)

谁能告诉我为什么我没有`categoryCall`在 Crystal Report 结果中得到结果？（应该在报告的“类别”栏中显示“已完成”和“未答复”，根本不显示）

# jquery - 我在 $.post 中初始化了一个值，但无法在 $.post 之外访问它

> ID：10682794
> 
> 赞同：0
> 
> 时间：2012-05-21T09:37:27.410
> 
> 标签：jquery, post

以下是我的代码：

```
$.post(
    "index.php?component=static_content&action=rules_count", 
    { region:rname,page_url:page_url},
    function(data1) {
        alert(data1);
        var num = $(data1).find('.ruleNum').html();
    }
);
alert(num); 
```

但是网上`alert(num);`有错误`num is undefined`。知道我做错了什么吗？

非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:39:32.877

您在 post 回调中声明了变量`num`，因此在该函数之外，该变量显然未定义

但即使你在外面定义它，它的值也不会像你预期的那样显示，因为 ajax 是异步的（所以，当你提醒变量时，ajax 调用仍在运行）

如果您甚至需要在外部访问 num ，只需调用另一个传递变量的函数，例如

```
$.post(
    "index.php?component=static_content&action=rules_count", 
    { region:rname,page_url:page_url},
    function(data1) {
        alert(data1);
        continueProcess(data1);
    }
});

var continueProcess = function(num) {
   alert(num);
} 
```

或者使用`Deferred Objects`（因为ajax方法返回一个promise `jQuery 1.5`）你也可以这样做

```
$.when($.post(...).done(function(num) {
   alert(num)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:38:37.823

`num`是传递给的匿名函数中的局部变量`$.post()`。它不存在于函数的范围之外，但是您正在从完全不同的范围访问它。

除此之外，该变量将在以后定义，而不是在您使用它时。如果它是一个全局变量，那么在您使用它时它仍然不可用，因为它只会在 POST 操作完成*后定义。*

因此，您只能`num`在该函数内部使用。这是您可以执行的操作的示例：

```
function numWasReceived(num) {
    alert(num);
}

$.post(
    "index.php?component=static_content&action=rules_count", 
    { region:rname,page_url:page_url},
    function(data1) {
        alert(data1);
        var num = $(data1).find('.ruleNum').html();
        numWasReceived(num);
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:40:29.117

由于您`num`仅在其中声明，`$.post()`因此在全局范围内不可用。

这是对函数和范围的深入解释：[https ://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope)

# php - 写入 Amazon DynamoDB (PHP API) 的速度非常慢

> ID：10682797
> 
> 赞同：15
> 
> 时间：2012-05-21T09:37:42.013
> 
> 标签：php, amazon-web-services, amazon-dynamodb

这个问题已经发布在 AWS 论坛上，但仍未得到解答[https://forums.aws.amazon.com/thread.jspa?threadID=94589](https://forums.aws.amazon.com/thread.jspa?threadID=94589)

我正在尝试执行一长串短项目（大约 1.2 亿个）的初始上传，以便稍后通过唯一键检索它们，这似乎是 DynamoDb 的完美案例。

但是，我目前的写入速度非常慢（每 100 次写入大约需要 8-9 秒），这使得初始上传几乎不可能（按照目前的速度大约需要 3 个月）。

我已阅读 AWS 论坛以寻找答案，并且已经尝试了以下方法：

1.  我从单个“put_item”调用切换到批量写入 25 个项目（推荐的最大批量写入大小），并且我的每个项目都小于 1Kb（这也是推荐的）。即使我的 25 个项目也低于 1Kb，这也是非常典型的，但不能保证（并且无论如何都应该无关紧要，因为我理解只有单个项目的大小对 DynamoDB 很重要）。

2.  我使用最近引入的欧盟区域（我在英国）通过调用 set_region('dynamodb.eu-west-1.amazonaws.com') 直接指定其入口点，因为在 PHP 中显然没有其他方法可以做到这一点API。AWS 控制台显示该表位于适当的区域，因此可以正常工作。

3.  我通过调用 disable_ssl() 禁用了 SSL（每 100 条记录获得 1 秒）。

尽管如此，一个包含 100 个项目的测试集（25 个项目的 4 批写入调用）的索引时间永远不会少于 8 秒。每个批量写入请求大约需要 2 秒，所以它不像第一个是即时的，随后的请求就会很慢。

我的表配置吞吐量是 100 个写入和 100 个读取单元，到目前为止应该足够了（也尝试了更高的限制以防万一，没有效果）。

我也知道请求序列化有一些费用，所以我可以使用队列来“累积”我的请求，但这对于 batch_writes 真的那么重要吗？而且我认为这不是问题，因为即使是单个请求也需要很长时间。

我发现有些人修改了 API 中的 cURL 标头（特别是“期望：”）以加快请求速度，但我认为这不是正确的方法，而且自从该建议发布以来，API 已经更新。

我的应用程序运行的服务器也很好 - 我读过有时 CPU 负载会飙升，但在我的情况下一切都很好，只是网络请求需要太长时间。

我现在被困住了 - 我还有什么可以尝试的吗？如果我没有提供足够的信息，请随时询问更多信息。

还有其他最近的线程，显然是关于同样的问题，[here](https://forums.aws.amazon.com/thread.jspa?messageID=341508)（虽然到目前为止还没有答案）。

这项服务应该是超快的，所以我一开始就对这个问题感到困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T11:17:32.167

如果您从本地计算机上传，速度将受到您和服务器之间的各种流量/防火墙等的影响。如果我调用 DynamoDB，每个请求只需要 0.3 秒，因为往返澳大利亚的时间很长。

我的建议是使用 PHP 创建自己的 EC2 实例（服务器），将脚本和所有文件作为一个块上传到 EC2 服务器，然后从那里进行转储。EC2 服务器应该拥有 DynamoDB 服务器的极快速度。

如果您对自己使用 LAMP 设置 EC2 没有信心，那么他们有一项新服务“Elastic Beanstalk”可以为您完成这一切。完成上传后，只需烧录服务器 - 希望您可以在他们的“免费套餐”定价结构内完成所有这些工作:)

不能解决长期的连接问题，但会减少三个月的上传时间！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:10:09.050

我会尝试多线程上传以增加吞吐量。也许一次添加一个线程，看看吞吐量是否线性增加。作为测试，您可以同时运行两个当前的加载程序，看看它们是否都以您现在观察的速度运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:36:19.973

通过使用 AmazonDynamoDB 类上的批处理方法，我使用 php sdk 取得了很好的成功。我能够从 EC2 实例每秒运行大约 50 个项目。该方法通过对请求进行排队，直到您调用 send 方法，此时它使用 Curl 执行多个同时请求。这里有一些很好的参考：

[http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/LoadData_PHP.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/LoadData_PHP.html)

[http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/LowLevelPHPItemOperationsExample.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/LowLevelPHPItemOperationsExample.html)

我认为您还可以使用 Elastic Map Reduce 使用 HIVE sql 从 CSV 文件批量加载数据。EMR 可以使用多台机器来分散工作负载，实现高并发。

# sqlite - sqlite 中是否有任何类型的拦截器实现

> ID：10682804
> 
> 赞同：6
> 
> 时间：2012-05-21T09:38:13.937
> 
> 标签：sqlite, interceptor

我想知道，有没有办法在 sqlite 中拦截 DML 操作？我希望实现一个类似于审计系统的东西来获取数据库上的插入和更新并记录这些事件的更改。

我已经研究过使用触发器，但这还不够，因为（据我所知）没有办法定义全局触发器，并且手动管理 100 多个表的触发器听起来不是一个好主意……长期！

我愿意接受任何建议，所以请开火！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T11:06:23.537

也许，这就是您需要 [用于跟踪/记录查询语句的 SQLite 回调函数](https://stackoverflow.com/questions/1607368/sql-query-logging-for-sqlite)

如果您使用 C/C++ 编写应用程序，那么您可以通过提供一个回调函数来为 SQLite API 添加一个挂钩，该回调函数将调用 sqlite_trace 函数来记录查询语句。

# android - 如何在后台线程中反序列化 Activity 对象？

> ID：10682805
> 
> 赞同：1
> 
> 时间：2012-05-21T09:38:14.373
> 
> 标签：android, android-activity, deserialization, background-thread

> **可能重复：**
> [RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序](https://stackoverflow.com/questions/8583536/runtimeexception-cant-create-handler-inside-thread-that-has-not-called-looper)

我在 Android 中使用 Java 序列化机制时遇到问题。从 UI 线程调用时它运行良好，但是当我尝试从某个后台线程使用它时，我得到：

```
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

由于项目性质，我无法反序列化 UI 线程中的所有内容（也应该可以在后台进行，因此 UI 不会停止响应）。

顺便提一句。当我尝试使用 SimpleXML 在后台反序列化某些内容时，也会发生同样的事情。

所以现在我们从不能在任何地方使用的 UI 线程进行反序列化（XML 和 Java 序列化）。

任何人都可以对这个问题有所了解吗？

**编辑：**

我正在使用以下代码来反序列化一个对象，它在从 UI 线程调用时运行良好。

```
public Object getObject(String key) throws InvalidClassException {
    Object result;
    try {
        FileInputStream fileIn = context.openFileInput(getPath(key));
        ObjectInputStream in = new ObjectInputStream(fileIn);
        result = in.readObject();
        in.close();
        fileIn.close();
    } catch (InvalidClassException e) {
        throw new InvalidClassException(e.getMessage());
    } catch (IOException e) {
        throw new RuntimeException(e);
    } catch (ClassNotFoundException e) {
        throw new RuntimeException(e);
    }
    return result;
} 
```

**编辑 2**

正如下面的 EJP 评论中提到的，我正在反序列化一个 Activity 对象。所以我将我的问题更改为：如何在后台线程中反序列化 Activity 对象？由于性能问题（XML 反序列化大约需要 4 秒，而二进制反序列化少于 0.5 秒），我宁愿避免不反序列化这个对象。我知道重新设计我们的应用程序是可能的，但由于项目限制，而且它极端且不必要的复杂性，这不是一个真正的选择。每一次更大的改变都是极其痛苦的。

所以当问题不太清楚时 - 有没有人有一些想法？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:11:44.967

您不能在任何其他线程中执行 ui 操作所有 ui 操作都应该在主线程上

你可以用这个

```
 runOnUiThread(new Runnable() {

        @Override
        public void run() {
            code here

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:52:31.960

尝试`Loooper.Prepare();`在您的代码之前和 `Looper.Loop();`之后打电话，为我工作。

就像是 ：

```
Looper.Prepare();
//your code
Looper.Loop(); 
```

# python - 无法填充自我渴望加载的关系

> ID：10682806
> 
> 赞同：0
> 
> 时间：2012-05-21T09:38:19.873
> 
> 标签：python, sqlalchemy

我正在尝试使用 contains_eager 选项急切地加载一个自关系属性，以避免在使用关系列之一进行排序或搜索时出现两个连接。我的模型对象如下所示：

```
class Usuario(DeclarativeBase):
    __tablename__ = 'usuarios'
    __table_args__ = {'mysql_engine':'InnoDB'}

    id=Column(Integer, primary_key=True)
    usuario=Column(Text) 
    ...
    resellers_id=Column(Integer, ForeignKey('usuarios.id')) 
    ....
    reseller = relation('Usuario', remote_side = [id]) 
```

我用来获取数据：

```
u= DBSession.query(Usuario).options(contains_eager('reseller'))\
            .outerjoin(self.usuarios_padre, Usuario.resellers_id == self.usuarios_padre.id)\
            .filter(Usuario.id=1)\
            .order_by(self.usuarios_padre.usuario).one() 
```

其中**self.usuarios_padre**是 Usuario 的别名之一

如果我访问**u.reseller.usuario我会得到与****u.usuario**相同的结果，而不是从父级获取usuario

知道问题出在哪里吗？我尝试使用lazy="joined" 来定义关系，但没有结果。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:01:09.997

问题是您在一个查询中加载了两组`Usuario`对象，为了解决这个问题，您需要使用[别名](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.aliased)，然后在和中**明确**指定别名*父*级：`join``contains_eager`

```
qry = session.query(Usuario).filter(Usuario.id==1)

# join using the aliased. Use *outerjoin* in order to still get the result for those without a parent
res = aliased(Usuario)
qry = qry.outerjoin((res, Usuario.reseller))

# specify which table/alias represents the *contained* relationship
qry = qry.options(contains_eager(Usuario.reseller, alias=res)) 
```

# xslt - XSLT for-each 计数器 - 如何访问数据

> ID：10682808
> 
> 赞同：1
> 
> 时间：2012-05-21T09:38:29.580
> 
> 标签：xslt, foreach

出于性能测试的目的，我想使用一个小的 XML 文件并从中创建一个更大的文件 - 使用 XSLT。这里我打算把原始XML中的每个实体（下例中的Campaign节点）复制n次，只是改变它的ID。我能想到实现这一点的唯一方法是 xsl:for-each 选择“1 到 n”。但是当我这样做时，我似乎无法再访问实体节点（xsl:for-each select="campaigns/campaign" 在我的情况下不起作用）。我收到处理器错误：“不能在此处使用：上下文项是原子值”。似乎通过使用“1 到 n”循环，我失去了对我的实际实体的访问权限。是否有任何 XPath 表达式可以让我重新访问，或者是否有人对如何实现这一点有完全不同的想法？

这是我所做的：

原始 XML

```
<campaigns>    
<campaign id="1" name="test">
<campaign id="2" name="another name">
</cmpaigns> 
```

XSLT 我尝试使用

```
<xsl:template match="/">
 <xsl:element name="campaigns">
 <xsl:for-each select="1 to 10">
  <xsl:for-each select="campaigns/campaign">
   <xsl:element name="campaign">
   <xsl:copy-of select="@*[local-name() != 'id']" />
   <xsl:attribute name="id"><xsl:value-of select="@id" /></xsl:attribute>
   </xsl:element>
  </xsl:for-each>
 </xsl:for-each>
 </xsl:element>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:52:03.410

将变量定义为匹配中的第一件事，如下所示：

```
<xsl:variable name="foo" select="."/> 
```

这定义了一个节点集类型的变量`$foo`。然后像这样访问它

```
<xsl:for-each select="$foo/campaigns/campaign">
...
</xsl:for-each> 
```

# php - Smarty 模板引擎 - 文件获取内容

> ID：10682816
> 
> 赞同：0
> 
> 时间：2012-05-21T09:38:47.573
> 
> 标签：php, json, smarty

我尝试使用聪明的 file_get_contents 读取外部数据

但是，我收到此错误。

```
Fatal error: Smarty error: [in /opt/lampp/htdocs/blog/serendipity/templates/templates3/index.tpl line 107]: [plugin] (secure mode) modifier 'file_get_contents' is not allowed (Smarty_Compiler.class.php, line 1934) in /opt/lampp/htdocs/blog/serendipity/bundled-libs/Smarty/libs/Smarty.class.php on line 1093 
```

有没有其他方法来获取数据？或者我怎样才能让 smarty 使用这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:57:16.403

也许[{fetch}](http://www.smarty.net/docsv2/en/language.function.fetch.tpl)插件可以在这里提供帮助。无论如何，@shadyyx 没有错。您可能只想分配内容并使您的生活更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:55:08.930

您应该做的是配置 smarty 安全设置。

源代码如下：

```
if ($smarty->security && !in_array($_name, $smarty->security_settings['MODIFIER_FUNCS'])) {
    $_message = "(secure mode) modifier '$_name' is not allowed";
} else {
    if (!function_exists($_name)) {
        $_message = "modifier '$_name' is not implemented";
    } else {
        $_plugin_func = $_name;
        $_found = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:55:28.703

该错误表明您处于安全模式。这意味着 Smarty 不允许您运行 PHP 脚本（取决于安全模式级别）或调用许多 PHP 函数。

您可以关闭我不推荐的安全模式，或者您应该将 PHP 代码放入您的控制器并在 PHP 控制器中分配 var：

```
...
$data = file_get_contents('path_to_json');
$smarty->assign('data', $data);
... 
```

或者

```
$smarty->assign('data', file_get_contents('path_to_json')); 
```

# c# - 为什么是列表 .AddRange(IEnumerable ) 比新列表更快 (IEnumerable )

> ID：10682817
> 
> 赞同：-1
> 
> 时间：2012-05-21T09:38:48.423
> 
> 标签：c#, .net, performance, list, ienumerable

我听说 `List<T>.AddRange(IEnumerable<T>)`比`new List<T>(IEnumerable<T>)`. 在查看反射器后，我无法解释为什么在创建测试应用程序后会出现广告。确实，我发现它更快。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:42:26.390

抱歉，我无法证实您的假设。AddRange 总是比构造函数变体慢。

我为它做了一些测试代码：

一种）`var list = new List<T>(enumerable);`

比

b)`var list = new List<T>(); list.AddRange(enumerable);`

用不同的 IEnumerables 测试

> 列表：新：32ms addrange：47ms
> 
> LinkedList：新：58ms addrange：99ms
> 
> HashSet：新：56ms addrange：98ms
> 
> 队列：新：271ms addrange：516ms

# javascript - 添加查看网页的先决条件

> ID：10682826
> 
> 赞同：0
> 
> 时间：2012-05-21T09:39:14.520
> 
> 标签：javascript, html, moodle, scorm

我目前正在寻求开发一些符合 SCORM 的文档，以便在 Moodle 2.2 环境（学习管理系统）中使用，但是 SCORM 2004 不完全支持，这意味着页面排序是不可能的。

作为替代方案，我正在考虑摆脱 SCORM 并开发一组标准网页，它不会跟踪用户的进度，但会添加要在 Moodle 中使用的排序先决条件。

我想这可以通过 Javascript 实现，但是我不确定如何解决这个问题。任何人都可以建议可能提供此功能的脚本吗？

非常感谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:12:26.683

如果您考虑使用 SCORM 以外的其他模块，请查看以下内容：

*   预订[http://docs.moodle.org/22/en/Book_module](http://docs.moodle.org/22/en/Book_module)
*   课程[http://docs.moodle.org/22/en/Lesson_module](http://docs.moodle.org/22/en/Lesson_module)
*   问卷[http://docs.moodle.org/22/en/Questionnaire_module](http://docs.moodle.org/22/en/Questionnaire_module)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:43:28.363

您可以在 SCORM 1.2 中使用多 SCO 并使用 adlcp:prerequisites 执行此操作

# html - Html 5 重置 (html5reset.org) - X-UA 兼容不起作用

> ID：10682827
> 
> 赞同：9
> 
> 时间：2012-05-21T09:39:18.650
> 
> 标签：html, internet-explorer, html5boilerplate, x-ua-compatible

我在[html5reset.org](http://html5reset.org)上使用了出色的 HTML 5 重置模板，而我的 X-UA-Compatible 元标记似乎不起作用。这是我的标题的样子：

```
<!DOCTYPE html>

<!--[if lt IE 7 ]> <html class="ie ieNoHtml5 ie6 no-js" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ieNoHtml5 ie7 no-js" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ieNoHtml5 ie8 no-js" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Title of Page</title> 
```

显示在 IE 中使用兼容性视图模式的选项（URL 字段中的断页图标）。问题是我的一些客户将他们的 IE9 浏览器设置为“始终使用兼容性视图”模式，结果是网站看起来像 IE7，即使他们使用的是 IE9，并且假设 X-UA-Compatible 会覆盖这个.

现在，如果我删除有趣的标题内容：

```
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

...它突然开始正常工作。

我注意到[html5reset.org](http://html5reset.org)本身似乎显示了损坏的页面图标，因此它似乎也不起作用，但[html5boilerplate.com](http://html5boilerplate.com)确实有效，并且似乎使用了相同的方法。

通过网络服务器配置将 X-UA-Compatible 添加到响应标头中似乎可以修复它，但我宁愿不依赖这种方法。

* * *

**更新：如果**[html5boilerplate.com](http://html5boilerplate.com)检测到浏览器是 IE，它似乎只是在 HTTP 响应标头中发送 X-UA-Compatible。这似乎是要走的路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T00:09:07.727

HTML5 Boilerplate 推荐使用 webserver 配置。它更快并且解决了标记解决方案无法使用的一些边缘情况：[https ://github.com/h5bp/html5-boilerplate/blob/v4.0.0/doc/html.md#x-ua-compatible](https://github.com/h5bp/html5-boilerplate/blob/v4.0.0/doc/html.md#x-ua-compatible)

# asp.net - 使用数据网格外部的复选框来影响其内容

> ID：10682835
> 
> 赞同：2
> 
> 时间：2012-05-21T09:40:02.277
> 
> 标签：asp.net, vb.net, datagrid, checkbox

我在数据网格之外使用复选框。当我选择复选框自动回发为真时，这将显示图像，但我无法使用该脚本访问数据网格中的图像。如果我在数据网格之外使用单独的图像，则脚本可以工作。如何在检查DataGrid的复选框后，获取此脚本要查找，然后在DataGrid中显示图像？

我正在使用的脚本是

```
<script runat="server">

    Sub Check(sender As Object, e As EventArgs)
        If checkShowImages.Checked Then
                img.Visible = True

        Else
            img.Visible = False
        End If
    End Sub

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:23:26.547

试试这个（假设你`checkbox`的 id 是 "CheckBox1" &`DataGrid`的 ID 是 "Datagrid1"）...

```
Sub Check(sender As Object, e As EventArgs)
    For Each r As DataGridItem In Datagrid1.Items
        Try
            r.FindControl("img").Visible = CheckBox1.Checked
        Catch ex As Exception

        End Try
    Next
end sub 
```

希望这可以帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:21:36.727

如果我理解正确，您可以在选中外部复选框时要显示的GridView中的图像。为此，您需要像这样遍历 GridView 的行：

```
foreach (GridViewRow row in myGrid.Rows)
{
   Image myImage = row.FindControl("HiddenImage") as Image;

   //Hide or show image based on checkbox state
   myImage.Visible = checkShowImages.Checked;       
} 
```

VB（有点生疏）：

```
For Each row As GridViewRow In myGrid.Rows
    Dim myImage As Image = TryCast(row.FindControl("HiddenImage"), Image)

    'Hide or show image based on checkbox state
    myImage.Visible = checkShowImages.Checked
Next 
```

# cakephp - PaypalIpnConfig 给了我一个致命错误

> ID：10682837
> 
> 赞同：0
> 
> 时间：2012-05-21T09:40:05.943
> 
> 标签：cakephp, paypal

我的 C:\xampp\htdocs\wifidrivescanportal\app\Plugin\PaypalIpn\View\Helper\PaypalHelper.php 中有此代码：

```
<?php
/** Paypal Helper part of the PayPal IPN plugin.
  *
  * @author Nick Baker
  * @link http://www.webtechnick.com
  * @license MIT
  */
class PaypalHelper extends AppHelper {

  var $helpers = array('Html','Form');

  /**
    *  Setup the config based on the paypal_ipn_config in /Plugins/PaypalIpn/Config/paypal_ipn_config.php
    */
  function __construct(View $View, $settings = array()){
    //debug(APP_PATH);
    //if(App::import(array('type' => 'File', 'name' => 'PaypalIpn.PaypalIpnConfig', 'file' => APP_PATH . DS . 'Config' . DS . 'paypal_ipn_config.php'))) {
    //if(App::import(array('type' => 'File', 'name' => 'PaypalIpn.PaypalIpnConfig', 'file' => '/PaypalIpn/Config/paypal_ipn_config.php'))) {
    if(App::import(array('type' => 'File', 'name' => 'PaypalIpn.PaypalIpnConfig',  'file' => APP.'Plugin'.DS.'paypal_ipn'.DS.'libs'))) {
        $this->config =& new PaypalIpnConfig();
    }
    else {
        $this->config =& new PaypalIpnConfig();
    }

    parent::__construct($View, $settings);
  }

  /**
    *  function button will create a complete form button to Pay Now, Donate, Add to Cart, or Subscribe using the paypal service.
    *  Configuration for the button is in /config/paypal_ip_config.php
    *  
    *  for this to work the option 'item_name' and 'amount' must be set in the array options or default config options.
    *
    *  Example: 
    *     $paypal->button('Pay Now', array('amount' => '12.00', 'item_name' => 'test item'));
    *     $paypal->button('Subscribe', array('type' => 'subscribe', 'amount' => '60.00', 'term' => 'month', 'period' => '2'));
    *     $paypal->button('Donate', array('type' => 'donate', 'amount' => '60.00'));
    *     $paypal->button('Add To Cart', array('type' => 'addtocart', 'amount' => '15.00'));
    *     $paypal->button('View Cart', array('type' => 'viewcart'));
    *     $paypal->button('Unsubscribe', array('type' => 'unsubscribe'));
    *     $paypal->button('Checkout', array(
    *      'type' => 'cart',
    *      'items' => array(
    *         array('item_name' => 'Item 1', 'amount' => '120', 'quantity' => 2, 'item_number' => '1234'),
    *         array('item_name' => 'Item 2', 'amount' => '50'),
    *         array('item_name' => 'Item 3', 'amount' => '80', 'quantity' => 3),
    *       )
    *     ));
    *  Test Example:
    *     $paypal->button('Pay Now', array('test' => true, 'amount' => '12.00', 'item_name' => 'test item'));
    *
    * @access public
    * @param String $title takes the title of the paypal button (default "Pay Now" or "Subscribe" depending on option['type'])
    * @param Array $options takes an options array defaults to (configuration in /config/paypal_ipn_config.php)
    * 
    *   helper_options:  
    *      test: true|false switches default settings in /config/paypal_ipn_config.php between settings and testSettings
    *      type: 'paynow', 'addtocart', 'donate', 'unsubscribe', 'cart', or 'subscribe' (default 'paynow')
    *    
    *    You may pass in api name value pairs to be passed directly to the paypal form link.  Refer to paypal.com for a complete list.
    *    some paypal API examples: 
    *      amount: float value
    *      notify_url: string url
    *      item_name: string name of product.
    *      etc...
    */
  function button($title = null, $options = array()){
    if(is_array($title)){
      $options = $title;
      $title = isset($options['label']) ? $options['label'] : null;
    }    
    $defaults = (isset($options['test']) && $options['test']) ? $this->config->testSettings : $this->config->settings; 
    $options = array_merge($defaults, $options);
    $options['type'] = (isset($options['type'])) ? $options['type'] : "paynow";

    switch($options['type']){
      case 'subscribe': //Subscribe
        $options['cmd'] = '_xclick-subscriptions';
        $default_title = 'Subscribe';
        $options['no_note'] = 1;
        $options['no_shipping'] = 1;
        $options['src'] = 1;
        $options['sra'] = 1;
        $options = $this->__subscriptionOptions($options);
        break;
      case 'addtocart': //Add To Cart
        $options['cmd'] = '_cart';
        $options['add'] = '1';
        $default_title = 'Add To Cart';
        break;
      case 'viewcart': //View Cart
        $options['cmd'] = '_cart';
        $options['display'] = '1';
        $default_title = 'View Cart';
        break;
      case 'donate': //Doante
        $options['cmd'] = '_donations';
        $default_title = 'Donate';
        break;
      case 'unsubscribe': //Unsubscribe
        $options['cmd'] = '_subscr-find';
        $options['alias'] = $options['business'];
        $default_title = 'Unsubscribe';
        break;
      case 'cart': //upload cart
        $options['cmd'] = '_cart';
        $options['upload'] = 1;
        $default_title = 'Checkout';
        $options = $this->__uploadCartOptions($options);
        break;
      default: //Pay Now
        $options['cmd'] = '_xclick';
        $default_title = 'Pay Now';
        break;
    }

    $title = (empty($title)) ? $default_title : $title;
    $retval = "<form action='{$options['server']}/cgi-bin/webscr' method='post'><div class='paypal-form'>";
    unset($options['server']);
    foreach($options as $name => $value){
       $retval .= $this->__hiddenNameValue($name, $value);
    }
    $retval .= $this->__submitButton($title);

    return $retval;
  }

  /**
   *  __hiddenNameValue constructs the name value pair in a hidden input html tag
   * @access private
   * @param String name is the name of the hidden html element.
   * @param String value is the value of the hidden html element.
   * @access private
   * @return Html form button and close form
   */
  function __hiddenNameValue($name, $value){
    return "<input type='hidden' name='$name' value='$value' />";
  }

  /**
   *  __submitButton constructs the submit button from the provided text
   * @param String text | text is the label of the submit button.  Can use plain text or image url.
   * @access private
   * @return Html form button and close form
   */
  function __submitButton($text){
    return "</div>" . $this->Form->end(array('label' => $text));
  }

  /**
    * __subscriptionOptions conversts human readable subscription terms 
    * into paypal terms if need be
    *  @access private
    *  @param array options | human readable options into paypal API options
    *     INT period //paypal api period of term, 2, 3, 1
    *     String term //paypal API term //month, year, day, week
    *     Float amount //paypal API amount to charge for perioud of term.
    *  @return array options 
    */
  function __subscriptionOptions($options = array()){
    //Period... every 1, 2, 3, etc.. Term
    if(isset($options['period'])){
      $options['p3'] = $options['period'];
      unset($options['period']);
    }
    //Mount billed
    if(isset($options['amount'])){
      $options['a3'] = $options['amount'];
      unset($options['amount']);
    }
    //Terms, Month(s), Day(s), Week(s), Year(s)
    if(isset($options['term'])){
      switch($options['term']){
        case 'month': $options['t3'] = 'M'; break;
        case 'year': $options['t3'] = 'Y'; break;
        case 'day': $options['t3'] = 'D'; break;
        case 'week': $options['t3'] = 'W'; break;
        default: $options['t3'] = $options['term'];
      }
      unset($options['term']);
    }

    return $options;
  }

  /**
    * __uploadCartOptions converts an array of items into paypal friendly name/value pairs
    * @access private
    * @param array of options that will be returned with proper paypal friendly name/value pairs for items
    * @return array options
    */
    function __uploadCartOptions($options = array()){
      if(isset($options['items']) && is_array($options['items'])){
        $count = 1;
        foreach($options['items'] as $item){
          foreach($item as $key => $value){
            $options[$key.'_'.$count] = $value;
          }
          $count++;
        }
        unset($options['items']);
      }
      return $options;
    }
}
?> 
```

但我在浏览器中收到此错误：

```
Fatal error: Class 'PaypalIpnConfig' not found in C:\xampp\htdocs\wifidrivescanportal\app\Plugin\PaypalIpn\View\Helper\PaypalHelper.php on line 23 
```

第 23 行实际上是这一行：

```
$this->config = new PaypalIpnConfig(); 
```

我不知道发生了什么事。甚至谷歌也无法给我答案。

# html - 推特引导宽度

> ID：10682843
> 
> 赞同：2
> 
> 时间：2012-05-21T09:40:41.013
> 
> 标签：html, css, twitter-bootstrap

我的页面上表格单元格宽度的行为非常奇怪。我正在处理我的自定义小部件并有 4 列的表格。第一列和最后一列的宽度为 30 像素。如果我减小了页面大小，它的宽度等于 0px。为什么？

```
.TimelineWidget .move {
    width: 30px;
    background-color: red;
}

.TimelineWidget .rule {
    width: 60px;
    padding-top: 20px;
    vertical-align: top;
}

<table class="TimelineWidget">
    <tr class="inner">
        <td class="move left"></td>
        <td class="rule">
            bla bla
        </td>
        <td class="streams">
        bla bla
        </td>
        <td class="move right"></td>
    </tr>
</table> 
```

我使用了推特引导程序。这个框架是否打破了我的风格？

* * *

**我找到了解决方案，但我无法在 7 小时之前关闭这篇文章**。我所有列的宽度都是表格的宽度。我使用了表格布局：固定；为了正确计算它。

# c# - 如何在javascript调用中传递参数？

> ID：10682847
> 
> 赞同：-1
> 
> 时间：2012-05-21T09:40:52.233
> 
> 标签：c#, javascript

我试图从 JavaScript 调用 ac# 函数 - 我想将参数与该方法一起传递，但如何传递参数？

下面是aspx页面中的javascript：

```
function CallCodeBehind(id) {
    var a = '<%=CallFromJS(--parameter need pass here --)%>';
} 
```

以下方法在代码隐藏中

```
public string CallFromJS(id) {
    int id=id;
    getNames(id);    
    return null;
} 
```

按钮代码是：

```
<Button ID="Button1" runat="server" OnClientClick="CallCodeBehind(<%=(id)%>)"     Text="Upload" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:49:14.680

WebMethods 可以有参数，但方法必须是静态的。

服务器端（*.cs 代码后面）：

```
[WebMethod]
public static string Hello(string name)
{
  return "Hello " + name;
} 
```

然后像这样从javascript调用它：

```
<script type="text/javascript">
    function SayHelloToMe(param) {
      PageMethods.Hello(param, OnSuccess, OnError);
    }

    function OnSuccess(response) {
      alert(response);
    }

    function OnError(error) {
      alert(error);  
    }  
</script> 
```

和按钮：

```
<Button ID="Button1" runat="server" OnClientClick="SayHelloToMe('<%=(id)%>')"     Text="Upload" /> 
```

当然 id 必须是公开的，并且在该表单上，您必须启用 ScriptManager 并启用 PageMethods，如下所示：

```
<asp:ScriptManager ID="scMan" runat="server" EnablePageMethods="true"></asp:ScriptManager> 
```

# django - Django 在数据库日期之间选择

> ID：10682850
> 
> 赞同：7
> 
> 时间：2012-05-21T09:40:58.123
> 
> 标签：django

使用[_range](https://docs.djangoproject.com/en/1.2/ref/models/querysets/#range)你可以在查询之间进行

```
start_date = datetime.date(2005, 1, 1)
end_date = datetime.date(2005, 3, 31)
Entry.objects.filter(pub_date__range=(start_date, end_date)) 
```

如果您有 2 个日期并想检查 het DB 中的日期是否在这两个日期之间，则可以使用它

在我的情况下，我有 1 个日期，并想检查该日期是否在我在 db 中的 2 个日期字段之间

```
class Deals(models.Model):
    #stuff
    starting = models.DateField()
    ending = models.Datefield() 
```

如何进行查询以检查是否`month = '2010-01-01'`在开始和结束之间

**编辑**

我在 de Deals 表中有交易。我想知道2010年1月(2010-01-01)、2010年2月(2010-02-01)等是否有交易

像这样

```
SELECT * FROM deals WHERE '2010-01-01' BETWEEN starting AND ending 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T10:24:16.223

```
Deals.objects.filter(starting__gte=mydate, ending__lte=mydate) 
```

文档在[这里](https://docs.djangoproject.com/en/1.9/ref/models/querysets/#gte)

# php - Doctrine加入继承，存储库findall返回父子对象

> ID：10682852
> 
> 赞同：1
> 
> 时间：2012-05-21T09:41:02.730
> 
> 标签：php, doctrine, doctrine-orm

我对教义的 InheritanceType JOINED 有疑问，我有一个父实体“模板”和子实体“实现”，

```
/**
 * Netvlies\Bundle\MisBundle\Entity\ItemTemplate
 *
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discriminator", type="string")
 * @ORM\DiscriminatorMap({"template" = "ItemTemplate", "implementation" = "Item"})
 */
class ItemTemplate
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;
...

/**
 * Netvlies\Bundle\MisBundle\Entity\Item
 *
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class Item extends ItemTemplate
{    
    /**
     * @var \DateTime $created
     * 
     * @ORM\Column(name="created", type="datetime")
     */
    private $created;

    /**
     * @var \DateTime $updated
     * 
     * @ORM\Column(name="updated", type="datetime")
     */
    private $updated;
... 
```

我能够毫无问题地创建和保存这两个实体。我还可以使用它的存储库 findall() 函数来检索项目实体。但是，当我对父实体执行相同操作时，我会收到一个包含父类和子类的结果集。

# html - 文本之后没有移动到新行 标签

> ID：10682855
> 
> 赞同：0
> 
> 时间：2012-05-21T09:41:13.227
> 
> 标签：html, css, wordpress

我试图让段落文本在我用于 sybtitles 的标签之后的新行开始，但我无法让它们让步。我试过 display:block 并给它一个右边距以占据整个 div 宽度，但似乎没有任何效果！

您可以在此处查看示例帖子：http: [//vhbelvadi.com/2012/04/21/mozilla-boot-to-gecko-good-early-too-late/](http://vhbelvadi.com/2012/04/21/mozilla-boot-to-gecko-good-early-too-late/)

正如您在第一个副标题中看到的那样，它旁边有一些段落文本，看起来很破旧而且没有组织！我希望段落每次都自动从新行开始。

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:10:05.040

在我看来很好。您的样式表是否有可能被缓存而您只是没有看到更新？如果是这样，可能值得应用[此处](http://markjaquith.wordpress.com/2009/05/04/force-css-changes-to-go-live-immediately/)描述的技术以防万一。我在各种客户网站上使用它，它为我省去了一些麻烦。

# xml - 如何使用 d3.js 导入 XML 数据？

> ID：10682856
> 
> 赞同：14
> 
> 时间：2012-05-21T09:41:14.960
> 
> 标签：xml, d3.js

有人可以提供一个基本示例，如何使用 d3 从 XML 文件导入数据？

我的 XML 文件如下所示：

```
 <data>
        <value>71</value>
        <value>12</value>
        <value>44</value>
        <value>88</value>
    </data> 
```

如何将这些值添加到数据数组？这是我到目前为止所尝试的：

```
 d3.xml("values.xml", function(xml) {
     d3.select(xml).selectAll("data").each(function(data) {
        d3.select(data).selectAll("value");
        //add data to array?;
        };
});
    //use Array 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-23T01:19:46.200

传入回调的 XML 对象是 XML DOM 的根元素（请参阅[https://github.com/mbostock/d3/wiki/Requests#wiki-d3_xml](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_xml)），因此您需要使用 JavaScript 处理它XML/DOM 访问工具。

我写了一个小例子，展示了如何使用 d3.xml 创建条形图（基于原始 d3 条形图示例[http://mbostock.github.com/d3/tutorial/bar-1.html](http://mbostock.github.com/d3/tutorial/bar-1.html)）：

链接查看示例：[http ://bl.ocks.org/2772585](http://bl.ocks.org/2772585)

与 XML 代码链接：[https ://gist.github.com/lgrammel/2772585](https://gist.github.com/lgrammel/2772585)

# crystal-reports - 更改多个水晶报表的数据库位置

> ID：10682859
> 
> 赞同：1
> 
> 时间：2012-05-21T09:41:20.583
> 
> 标签：crystal-reports

我正在使用水晶报表 9.2.0.448。我在我的机器上创建了 50 多个水晶报表。并将数据库位置设置为**local_sql_server_name.database_name**。现在，我想在我的客户机器上安装所有报告。所以肯定的是，sql server 名称被改变了。所以我必须手动设置所有水晶报表的数据库位置。所以我想知道***有没有办法自动更改数据库位置？***

我还尝试了**通用数据链接 (.udl)**文件。我从该文件设置数据库位置。但是如果我修改 .udl 文件，那么它不会影响到水晶报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:17:36.660

```
Private Sub RecurseAndRemap(ByVal CR As Engine.ReportDocument)
        For Each DSC As CrystalDecisions.Shared.IConnectionInfo In CR.DataSourceConnections
            DSC.SetLogon("YourUserName", "YourPassword")
            DSC.SetConnection("YouServerName", "YourDatabaseName", False)
        Next

        CR.SetDatabaseLogon("YourUserName", "YourPassword")

        For Each Table As Engine.Table In CR.Database.Tables
            Table.LogOnInfo.ConnectionInfo.UserID = "YourUserName"
            Table.LogOnInfo.ConnectionInfo.Password = "YourPassword"
        Next

        If Not CR.IsSubreport Then
            For Each SR As Engine.ReportDocument In CR.Subreports
                RecurseAndRemap(SR)
            Next
        End If
    End Sub 
```

# python - pydev eclipse中谷歌应用引擎的pythonpath

> ID：10682860
> 
> 赞同：1
> 
> 时间：2012-05-21T09:41:27.587
> 
> 标签：python, google-app-engine, path

我已经 `google app engine`安装到 /home/mydev 文件夹，这样 dev_appserver.py 就在`/home/mydev/google_appengine`目录中。

在 eclipse helios 中，我有 pydev，对于我的项目的 PYTHONPATH，我`/home/mydev/google_appengine/lib`在外部库下添加了路径。

尽管如此，pydev 抱怨它无法解决

```
import webapp2 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:21:47.903

我正在使用 Eclipse Indigo 3.7.2、PyDev 2.2.3 和 GAE 1.6.5，通过将外部库指向`/home/mydev/google_appengine/lib`（或我的机器上的等效库）我遇到了同样的问题，但是当我将外部库指向时它会解决`/home/mydev/google_appengine`，父目录。

希望这会有所帮助（这是一个对我有用的经验性解决方案，并且没有具体的原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:33:59.737

您需要在 PYTHONPATH 中添加 /home/mydev/google_appengine/lib/webapp2。因为在这个目录中只有 webapp2 模块驻留。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T23:34:38.703

在 PyDev 中，您是否将项目创建为 google 应用程序引擎项目（这是 PyDev 具有的项目类型）...创建此类项目的向导应自动获取 google 应用程序库，以便您的导入工作。

请参阅： http: [//pydev.blogspot.com.br/2009/05/testing-on-pydev-146-google-app-engine.html](http://pydev.blogspot.com.br/2009/05/testing-on-pydev-146-google-app-engine.html)

# javascript - 如何使用自定义名称创建 javascript 对象？

> ID：10682861
> 
> 赞同：6
> 
> 时间：2012-05-21T09:41:34.217
> 
> 标签：javascript

解释我需要什么有点困难，所以我将使用一些非工作代码：

```
function createSimpleObjet(name, value){
    return {
        name: value
    };
}

//create it
var obj = createSimpleObject('Message', 'Hello World!');
//test it:
alert(ojb.Message); //should alert 'Hello World!' 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T09:42:41.153

为了做到这一点，请尝试[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)：

```
function createSimpleObject(name, value){
    var obj = {};
    obj[name] = value;
    return obj;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T09:42:40.050

您不能将变量用作对象文字中的属性名称。您必须创建对象，然后使用方括号表示法分配值。

```
var object = {};
object[name] = value; 
```

# facebook - facebook：预览发布操作时创建的新闻提要故事

> ID：10682862
> 
> 赞同：0
> 
> 时间：2012-05-21T09:41:43.537
> 
> 标签：facebook, logging, android-activity, facebook-timeline

我正在寻找一种简单的方法来向用户展示她使用我的应用程序生成的一些操作。

它应该看起来像时间线中显示的最近活动代码（RecentActivityUnit），但只有应用程序决定的某些特定操作，最重要的是，它应该允许删除操作（因此活动源插件不适合）

第一个想法是：

1.  查询 opengraph 以获得所需的操作，

2.  获取相关的开放图对象

3.  使用 facebook 国际化功能来显示动作。

facebook在构建活动日志（或）时真的是这样做的吗？有人知道更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:43:34.493

不幸的是，这是做这种事情的唯一方法。如果您预先知道操作 ID，则可以跳过第一步，只需在步骤 2 中搜索您需要的操作。

仅当您的站点支持多种语言时才需要国际化。如果它是针对 Facebook 内的应用程序，那么建议您这样做，因为用户可能会以其他语言使用您的应用程序。

# ssl - 它是如何工作的：找到一个 SSL 证书，两个不同的链和两个不同的根 CA

> ID：10682863
> 
> 赞同：1
> 
> 时间：2012-05-21T09:41:46.193
> 
> 标签：ssl, openssl, ssl-certificate, x509certificate, x509

我从 GeoTrust 购买了 SSL 证书。

在检查不同设备上的证书链时，我发现**了两个不同的链**。两条链都**有效！**

在 Root-CA **C=US, O=Equifax, OU=Equifax Secure Certificate Authority**的链上，另一个在 Root-CA **C=US, O=GeoTrust Inc., CN=GeoTrust Global CA**中。

这些链之间的不同之处在于第一个链“GeoTrust Global CA”由“Equifax Secure Certificate Authority”签名，而第二个“GeoTrust Global CA”是自签名的。但在两条链中，“GeoTrust Global CA”的指纹都是“C0:7A:98:68:8D:89:FB:AB:05:64:0C:11:7D:AA:7D:65:B8:CA: CC:4E"，只有序列号不同。

这怎么可能？我认为 ssl 证书，它们的指纹和证书是独一无二的！

* * *

链 1)

1a) **C=US, O=GeoTrust Inc., OU=Domain Validated SSL, CN=GeoTrust DV SSL CA** sign by **C=US, O=GeoTrust Inc., CN=GeoTrust Global CA**

```
Data:
    Version: 3 (0x2)
    Serial Number: 145106 (0x236d2)
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=US, O=GeoTrust Inc., CN=GeoTrust Global CA
    Validity
        Not Before: Feb 26 21:32:31 2010 GMT
        Not After : Feb 25 21:32:31 2020 GMT
    Subject: C=US, O=GeoTrust Inc., OU=Domain Validated SSL, CN=GeoTrust DV SSL CA
    X509v3 extensions:
        X509v3 Key Usage: critical
            Certificate Sign, CRL Sign
        X509v3 Subject Key Identifier:
            8C:F4:D9:93:0A:47:BC:00:A0:4A:CE:4B:75:6E:A0:B6:B0:B2:7E:FC
        X509v3 Authority Key Identifier:
            keyid:C0:7A:98:68:8D:89:FB:AB:05:64:0C:11:7D:AA:7D:65:B8:CA:CC:4E 
```

1b) **C=US, O=GeoTrust Inc., CN=GeoTrust Global CA** sign by **C=US, O=Equifax, OU=Equifax Secure Certificate Authority**

```
Data:
    Version: 3 (0x2)
    Serial Number: 1227750 (0x12bbe6)
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=US, O=Equifax, OU=Equifax Secure Certificate Authority
    Validity
        Not Before: May 21 04:00:00 2002 GMT
        Not After : Aug 21 04:00:00 2018 GMT
    Subject: C=US, O=GeoTrust Inc., CN=GeoTrust Global CA
    X509v3 extensions:
        X509v3 Authority Key Identifier:
            keyid:48:E6:68:F9:2B:D2:B2:95:D7:47:D8:23:20:10:4F:33:98:90:9F:D4

        X509v3 Subject Key Identifier:
            C0:7A:98:68:8D:89:FB:AB:05:64:0C:11:7D:AA:7D:65:B8:CA:CC:4E
        X509v3 Basic Constraints: critical
            CA:TRUE 
```

1c) 根-CA **C=US, O=Equifax, OU=Equifax 安全证书颁发机构**

```
Data:
    Version: 3 (0x2)
    Serial Number: 903804111 (0x35def4cf)
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=US, O=Equifax, OU=Equifax Secure Certificate Authority
    Validity
        Not Before: Aug 22 16:41:51 1998 GMT
        Not After : Aug 22 16:41:51 2018 GMT
    Subject: C=US, O=Equifax, OU=Equifax Secure Certificate Authority
    X509v3 extensions:
        X509v3 Private Key Usage Period:
            Not After: Aug 22 16:41:51 2018 GMT
        X509v3 Key Usage:
            Certificate Sign, CRL Sign
        X509v3 Authority Key Identifier:
            keyid:48:E6:68:F9:2B:D2:B2:95:D7:47:D8:23:20:10:4F:33:98:90:9F:D4

        X509v3 Subject Key Identifier:
            48:E6:68:F9:2B:D2:B2:95:D7:47:D8:23:20:10:4F:33:98:90:9F:D4 
```

* * *

链 2)

2a) **C=US, O=GeoTrust Inc., OU=Domain Validated SSL, CN=GeoTrust DV SSL CA** sign by **C=US, O=GeoTrust Inc., CN=GeoTrust Global CA**

```
Data:
    Version: 3 (0x2)
    Serial Number: 145106 (0x236d2)
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=US, O=GeoTrust Inc., CN=GeoTrust Global CA
    Validity
        Not Before: Feb 26 21:32:31 2010 GMT
        Not After : Feb 25 21:32:31 2020 GMT
    Subject: C=US, O=GeoTrust Inc., OU=Domain Validated SSL, CN=GeoTrust DV SSL CA
    X509v3 extensions:
        X509v3 Key Usage: critical
            Certificate Sign, CRL Sign
        X509v3 Subject Key Identifier:
            8C:F4:D9:93:0A:47:BC:00:A0:4A:CE:4B:75:6E:A0:B6:B0:B2:7E:FC
        X509v3 Authority Key Identifier:
            keyid:C0:7A:98:68:8D:89:FB:AB:05:64:0C:11:7D:AA:7D:65:B8:CA:CC:4E 
```

2b) 根 CA **C=US, O=GeoTrust Inc., CN=GeoTrust Global CA**

```
Data:
    Version: 3 (0x2)
    Serial Number: 144470 (0x23456)
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=US, O=GeoTrust Inc., CN=GeoTrust Global CA
    Validity
        Not Before: May 21 04:00:00 2002 GMT
        Not After : May 21 04:00:00 2022 GMT
    Subject: C=US, O=GeoTrust Inc., CN=GeoTrust Global CA
    X509v3 extensions:
        X509v3 Basic Constraints: critical
            CA:TRUE
        X509v3 Subject Key Identifier:
            C0:7A:98:68:8D:89:FB:AB:05:64:0C:11:7D:AA:7D:65:B8:CA:CC:4E
        X509v3 Authority Key Identifier:
            keyid:C0:7A:98:68:8D:89:FB:AB:05:64:0C:11:7D:AA:7D:65:B8:CA:CC:4E 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:53:50.267

1b是“交叉证书”；由 Equifax 颁发的 Geotrust 根证书。2b 是相同的密钥，但是是一个自签名的根。

交叉证书通常用于在根证书被 Mozilla/Microsoft/etc 根程序接受之前使根证书受信任。当根被这些程序接受时，它可以用作普通的自签名证书。

# amazon-web-services - 用于 asp.net 的 Amazon CloudFormation 模板是什么？

> ID：10682867
> 
> 赞同：2
> 
> 时间：2012-05-21T09:41:53.633
> 
> 标签：amazon-web-services, amazon-cloudformation

我使用 AWS Toolkit for Visual Studio 部署 CloudFormation 堆栈。我必须创建一个堆栈模板文件或选择一个示例模板。

哪个示例模板适合 asp.net？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:25:40.903

[AWS CloudFormation 示例模板](http://aws.amazon.com/cloudformation/aws-cloudformation-templates/)最近获得了专用的 Microsoft Windows Server 模板，其中包括[Windows_Roles_And_Features.template](https://s3.amazonaws.com/cloudformation-templates-us-east-1/Windows_Roles_And_Features.template)，这是一个相当通用的模板，用于创建*指定在 Microsoft Windows Server® 2008 R2 上运行的服务器角色的单个服务器*。

如果您检查模板，您将看到在堆栈创建/部署期间可供选择的所有角色和功能：

> **Roles**：您要在此实例上启用的以空格分隔的角色列表。有效值为 AD-Certificate、AD-Domain-Services、ADLDS、DHCP、DNS、Fax、File-Services、NPAS、Print-Services、Web-Server 和 WDS。[...]
> 
> **Features**：您希望在此实例上启用的功能的空格分隔列表。有效值为 NET-Framework、BITS、BitLocker、BranchCache、CMAK、Desktop-Experience、DAMC、Failover-Clustering、GPMC、Ink-Handwriting、Internet-Print-Client、ISNS、LPR-Port-Monitor、MSMQ、Multipath-IO , NLB, PNRP, qWave, Remote-Assistance, RDC, RPC-over-HTTP-Proxy, Simple-TCPIP, SMTP-Server, SNMP-Services, Storage-Mgr-SANS, Subsystem-UNIX-Apps, Telnet-Client, Telnet -服务器、TFTP-客户端、生物识别框架、Windows-Internal-DB、PowerShell-ISE、备份功能、迁移、WSRM、TIFF-IFilter、WinRM-IIS-Ext、WINS-服务器、无线网络和 XPS-查看器。[...]

这应该是您需要挑选的所有东西 - 祝您好运！

# php - php中的媒体库实现

> ID：10682868
> 
> 赞同：0
> 
> 时间：2012-05-21T09:41:57.083
> 
> 标签：php, jquery

需要为上传的图像提供“从现有添加”功能。这样做的基本方法是什么？想过显示一个模态窗口，但认为如果会有很多图像，它肯定会拉低性能。有人有类似的任务吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:59:44.097

我以前做过一次，最好的方法是为每张照片生成缩略图，以便在模态窗口中浏览。您最好尝试拥有某种文件夹架构，甚至具有排序功能（添加日期？）。

看看[jQuery File Tree](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/#demo)插件，您可能可以编写一些脚本（例如：每次单击图像时，它都会附加到页面上的 div 以进行预览）

# jquery - 使用 jquery css() 函数更改 'a' 属性也会更改 a:hover,a:acive,a:focus 属性

> ID：10682870
> 
> 赞同：0
> 
> 时间：2012-05-21T09:42:04.687
> 
> 标签：jquery, css, jquery-selectors

我最初使用 css 对链接进行样式设置（也是不同的状态），然后我使用 jquery css() 函数更改标签的 css 属性。问题是 - css() 函数似乎不仅影响 a ，而且影响它所声明的所有内容。
这意味着写“a”对应于“a”的所有状态。所以我们需要写一些类似于 a:link 的东西，并且只改变 'a:link' 而不是 'a'。

> 如何使用 jquery 编写此代码。

编码我正在做的事情：
**CSS：**

```
#topics_nav a {
    color:#000; 
}
#topics_nav a:visited{
    color:#c00;
}
#topics_nav a:hover,a:active,a:focus{
    color:#FFF;
} 
```

**jQuery：**

```
$("document").ready(function(e) {
    $('#topics_nav a').css('color','#300');
}); 
```

此 jQuery 将所有状态的颜色更改为`#300`.

*我不想只更改链接状态，也不想修改任何其他状态。*以下解决方案提供了一种仅影响悬停（或任何其他）状态的方法，但是否有任何其他方法而不是添加/删除类。

有一个[解决方案](https://stackoverflow.com/a/837779/742173)可以定义一些所需的类（类，如`class1:hover`），而不是更改 css，我们可以更改类。
但是呢`:link`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:46:23.857

```
#topics_nav a {
    color:#000; 
}
#topics_nav a:visited{
    color:#c00;
}
#topics_nav a:hover,a:active,a:focus{
    color:#FFF;
}
.myclass:hover {
    color: #300;
}

$("document").ready(function() {
    $('#topics_nav a').addClass('myclass');
}); 
```

我认为这是一种更好的方法。让 CSS 像这样设置元素的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:50:36.093

也许是因为您的代码不正确？

### 原始代码

```
$('#topics_nav' a).css('color','#300'); 
```

### 正确的代码

```
$('#topics_nav a').css('color','#300'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-21T09:46:18.083

使用此代码。它可以帮助你

```
$("document").ready(function(e) {
       $('#topics_nav a').hover(function(){
       $(this).css('color','#300');
  });
}); 
```

# ole - 创建 txt 文件并在 vfp 表单中的 Internet 浏览器中显示它

> ID：10682872
> 
> 赞同：0
> 
> 时间：2012-05-21T09:42:08.943
> 
> 标签：ole, visual-foxpro

在 vfp 中创建某种报告时，我遇到了困难。我创建了一个文本文件，使用了 ?/?? 命令写入文件，然后使用 Web 浏览器（vfp 形式的 OLE 对象）打开它。

```
Set Printer To 'C:\temp\test.txt'
set printer on
set console off

?? 'test' 
```

然后我打电话给我的prg：

```
PARAMETERS pUrl

lcURL = pUrl
PUBLIC oForm
oForm = CREATEOBJECT('IEForm')
oForm.SHOW()
oForm.oIE.Navigate2(m.lcURL)
READ events

DEFINE CLASS IEForm AS FORM

   CAPTION = 'Report Preview'   
   HEIGHT = 512
   WIDTH = 792
   AUTOCENTER = .t.
   ADD OBJECT oIE AS OLECONTROL WITH ;
      HEIGHT=512,WIDTH=792,OLECLASS="Shell.Explorer",ANCHOR=195

   PROCEDURE oIE.REFRESH
   NODEFAULT
   ENDPROC

ENDDEFINE 
```

并使用 C:\temp\test.txt 作为 url。

这工作正常。但是当我使用 fcreate 创建文本文件时出现问题（不使用已经存在的文本文件）

```
 lcfile ='C:\temp\'+SYS(2015)+'.txt'
 lchandle=FCREATE(lcfile)
 Set Printer To lcfile 
```

使用时有时会出现问题？（导致空白文档），有时浏览器无法导航到该文件。

第二个问题是：如果我在 IEform 中将 windowtype 属性设置为 modal，浏览器将无法导航到文本文件。我需要将其设置为模态，因为我必须延迟执行的其余部分，直到预览表单关闭。

我希望我描述的情况足够清楚。感谢你们对我的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:54:00.020

我会避免使用 SET PRINTER TO，而只使用 fcreate()、fwrite() 和 fclose()，尤其是在编写大量文本时。如果只写少量数据，我会通过将每个组件附加到先验并添加 cr/lf 而不是“？”来构建一个长字符串。对于新行，然后通过 StrToFile() 将整个结果写入文件 ONCE。这样，您不必担心事情是否真的关闭了（如果您不清除设置打印机关闭、设置打印机到或 fclose()。作为一个不完整的文件，浏览器将无法导航，因为文件句柄可能被“锁定”以阅读任何内容。

**选项 1 - 构建字符串**

```
lcCRLF = chr(13)+chr(10)
lcMyOutput = "Some Text to Start with" + lcCRLF ;
           + "Today is: " + dtoc( date() ) + lcCRLF

use SomeTable
scan
    lcMyOutput = lcMyOutput + "Some Field: " + SomeCharField;
       + "A numeric field: " + transform( SomeNumberField, "999,999.99" ) + lcCRLF
endscan

lcMyOutput = lcMyOutput + "All Done"

lcOutputFile = "C:\Temp\" + sys(2015) + ".txt"
StrToFile( lcMyOutput, lcOutputFile ) 
```

**选项 2——使用 fcreate()、fwrite()、fclose()**

```
lnHandle = 0
do while .t.
   lcOutputFile = "C:\Temp\" + sys(2015) + ".txt"
   lnHandle = fcreate( lcOutputFile )
   */ Only get out if we have a proper handle and thus
   */ we are exclusive to it for duration of our process
   if( lnHandle > 0 )
      exit
   endif
enddo

lcCRLF = chr(13)+chr(10)
fwrite( lnHandle, "Some Text to Start with" + lcCRLF ;
               + "Today is: " + dtoc( date() ) + lcCRLF )

use SomeTable
scan
    fwrite( lnHandle, "Some Field: " + SomeCharField;
           + "A numeric field: " + transform( SomeNumberField, "999,999.99" ) + lcCRLF )
endscan

fwrite( lnHandle, "All Done" )

fclose( lnHandle ) 
```

要使用 RUN 命令运行您的“批处理”文件尝试，请将您想要的内容构建为字符串，然后运行...例如：

```
lcCommandToRun = '"' + sys(5) + sys(2003) + '\Compress.tzs"'
run ( lcCommandToRun ) 
```

我不知道它是否由于 sys(2003) 结果路径中的空格将 RUN 转换为多参数解释而失败，它会失败。通过将整个文本包含在双引号中，可以防止此类“路径”问题。

***额外的反馈***

尝试使用“？”模拟点阵打印机的预览。到文本文件不是我会尝试的。我只会做一个标准报告，并用你用“？”手动做的所有数据来绘制它。如果用户想要预览报告，或者发送到激光打印机，让通过Windows处理的正常报告版本为您完成生成、字体等。使用您拥有的任何特定字体渲染代码将古老的代码留在点阵中。我只会将实际报告版本保持在您的“？”附近。版本。

# php - 带有 JS 选项的 Wordpress 小部件

> ID：10682873
> 
> 赞同：0
> 
> 时间：2012-05-21T09:42:14.143
> 
> 标签：php, javascript, wordpress, widget, themes

我想知道是否可以在下面的代码中的 JS 中添加一个可以从小部件设置的选项，当在 wordpress 后端时，我希望你明白我的意思。

更具体地说，我需要为幻灯片持续时间添加一个选项。在我使用的 jCarousel 中，该持续时间在 $('.slides_widget').jcarousel 中由“auto: 5”指定，因此我必须将“5”替换为包含在如您所见，下面的小部件。我该怎么做？

```
<?php 

/* Slides Widget */
class Slides_Widget extends WP_Widget {
    function Slides_Widget() {
        $widget_ops = array('classname' => 'widget_slides', 'description' => __('Create slides with this widget.'));
        $control_ops = array('width' => 400, 'height' => 350);
        parent::__construct('slides_widget', __('Slides_Widget'), $widget_ops, $control_ops);
    }
    function widget( $args, $instance ) {
        extract($args);
        $title = apply_filters( 'widget_title', empty( $instance['title'] ) ? '' : $instance['title'], $instance, $this->id_base );
        $slide_duration = $instance['slide_duration'];
        $text = apply_filters( 'widget_text', empty( $instance['text'] ) ? '' : $instance['text'], $instance );
        echo $before_widget;
        if ( !empty( $title ) ) { echo $before_title . $title . $after_title; } ?>
            <div class="textwidget">
                <ul id="slides_widget" class="slides_widget">
                    <?php echo !empty( $instance['filter'] ) ? wpautop( $text ) : $text; ?>
                </ul>
            </div>
        <?php
        echo $after_widget;
    }
    function update( $new_instance, $old_instance ) {
        $instance = $old_instance;
        $instance['title'] = strip_tags($new_instance['title']);
        $instance['slide_duration'] = absint($new_instance['slide_duration']);
        if (!$instance['slide_duration']) {
            $instance['slide_duration'] = "";
        }
        if ( current_user_can('unfiltered_html') )
            $instance['text'] =  $new_instance['text'];
        else
            $instance['text'] = stripslashes( wp_filter_post_kses( addslashes($new_instance['text']) ) );

        $instance['filter'] = isset($new_instance['filter']);
        return $instance;
    }
    function form( $instance ) {
        $defaults = array( 'filter' => true, 'title' => 'Create Your Slides', 'text' => '<li>Each slide must be in a "li" element, like this one.</li>
<li>Or like this one. Save it and check it.</li>' );
        $instance = wp_parse_args( (array) $instance, $defaults );
        $title = strip_tags($instance['title']);
        $text = esc_textarea($instance['text']);
        $slide_duration = strip_tags($instance['slide_duration']);
?>
        <p><label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title:'); ?></label>
        <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo esc_attr($title); ?>" /></p>

        <textarea class="widefat" rows="16" cols="20" id="<?php echo $this->get_field_id('text'); ?>" name="<?php echo $this->get_field_name('text'); ?>"><?php echo $text; ?></textarea>

        <p><label for="<?php echo $this->get_field_id('slide_duration'); ?>"><?php _e('Slide Duration:'); ?></label>
        <input class="widefat" id="<?php echo $this->get_field_id('slide_duration'); ?>" name="<?php echo $this->get_field_name('slide_duration'); ?>" type="text" value="<?php echo esc_attr($slide_duration); ?>" />
        </p>

        <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo esc_attr($title); ?>" /></p>     <p><input id="<?php echo $this->get_field_id('filter'); ?>" name="<?php echo $this->get_field_name('filter'); ?>" type="checkbox" <?php checked(isset($instance['filter']) ? $instance['filter'] : 0); ?> />&nbsp;<label for="<?php echo $this->get_field_id('filter'); ?>"><?php _e('Automatically add paragraphs'); ?></label></p>
<?php
    }
}
register_widget('Slides_Widget');

function pixy_asd() {
?>  
<script type='text/javascript'>
jQuery(document).ready(function($) {
    /* Slides Widget */
    function mycarousel_initCallback(carousel)
    {
        carousel.buttonNext.bind('click', function() {
            carousel.startAuto(0);
        });
        carousel.buttonPrev.bind('click', function() {
            carousel.startAuto(0);
        });
        carousel.clip.hover(function() {
            carousel.stopAuto();
        }, function() {
            carousel.startAuto();
        });
    };
    $('.slides_widget').jcarousel({
        auto: 5,
        wrap: 'last',
        visible: 1,
        scroll: 1,
        initCallback: mycarousel_initCallback
    });
});
</script>
<?php
}
add_action('wp_head', 'pixy_asd');

function pixy_slides_widget_script() {
    wp_enqueue_script('pixySlidesJS', get_stylesheet_directory_uri() . '/admin/include/theme-slides-widget/js/slides_widget.js', array('jquery'), true);
    wp_enqueue_style( 'pixySlidesCSS', get_stylesheet_directory_uri() . '/admin/include/theme-slides-widget/css/slides_widget.css', false, 1, 'screen' ); 
}
add_action('wp_enqueue_scripts', 'pixy_slides_widget_script');

?> 
```

如果您需要更多说明，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:32:31.137

在 form() 中添加：

```
<input type="hidden" id="slide_duration" value="<?php echo $slide_duration;?>"> 
```

然后使用而不是 auto: 5 这个：

```
auto: $("#widgets-right #slide_duration").val() 
```

php解决方案怎么样？在 pixy_asd() 中：

```
$options = get_option('Slides_Widget');
$slide_duration = $options['slide_duration'];
?>
...
$('.slides_widget').jcarousel({
    auto: <?php echo $slide_duration;?>,
    wrap: 'last', 
```

# c - 将局部变量传递给线程。是否可以？

> ID：10682879
> 
> 赞同：6
> 
> 时间：2012-05-21T09:42:35.507
> 
> 标签：c, multithreading, arguments, local-variables

我正在研究 gcc ，我想知道这是否可能：

我有一个函数（不是main，而是aLocalFn），我在其中声明了一个局部变量。然后我将此本地参数作为线程参数传递。可行吗？或者有可能（取决于首先运行的内容）aLocalVar 在 threadFunction 运行之前会丢失，并且引用 idxPtr 将指向无意义？

```
int *threadFunction(void *idxPtr){
    int rec_idx=(int) *idxPtr;

    //work in the thread with this variabel rec_idx
}

int aLocalFn(){
   int aLocalVar=returnsRecordIndex();

   pthread_create(&thread_id,&attr_detached,threadFunction, &aLocalVar)!=0)
   return 0;
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T09:49:40.720

此代码不正确。该函数`aLocalFn`可能在线程函数开始执行之前返回。因此，当线程函数读取局部变量时，该变量的作用域可能已经结束。

令人困惑的是，这段代码很可能看起来很有效，至少在某些时候。但是，这是不正确的，您应该改用堆分配的内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T10:13:24.677

这是可行的，但在您问题的代码中没有完成。您必须添加一个信号变量来指示新线程何时使用该变量完成。然后你的外部函数可以返回。

```
static pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;
static pthread_cond_t signal = PTHREAD_COND_INITIALIZER;
int done;

int *threadFunction(void *idxPtr){
    int rec_idx=(int) *idxPtr;

    pthread_mutex_lock(&lock);
    done = 1;
    pthread_cond_signal(&signal);
    pthread_mutex_unlock(&lock);

    //work in the thread with this variabel rec_idx
}

int aLocalFn(){
    int aLocalVar=returnsRecordIndex();

    done = 0;
    pthread_create(&thread_id,&attr_detached,threadFunction, &aLocalVar)!=0)
    pthread_mutex_lock(&lock);
    while (!done)
        pthread_cond_wait(&signal, &lock);
    pthread_mutex_unlock(&lock);
    return 0;
} 
```

请注意，此示例代码本身不是线程安全的（如果多个线程调用 aLocalFn）。

这确实使代码复杂化，并且锁定成本很高。因此，在大多数情况下，您最好将数据存储在堆中并让新线程或`pthread_join`代码释放它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-21T10:23:43.557

如果您只想传递一个整数，则您的代码与“aLocalVar”存在终身问题，这是一种不可移植的方法。它在某些平台上不起作用，但您不太可能遇到这些。

```
void threadFunction ( void * idxptr ) {
    int rec_idx = (int) idxptr;
    ....
}

int rec_idx = returnsRecordIndex();
pthread_create (&thread1, &attr_detached, (void *) &threadFunction, (void *)rec_idx); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T13:13:52.487

@pizza 的回答是我会做的。你这样做的另一种方法是使用 malloc/free 正如@David 暗示的那样。我当然会在此处的其他答案中提出的等待循环中执行此操作。

```
int *threadFunction(void *idxPtr){
    int rec_idx = *(int *)idxPtr;
    // free up our int buffer
    free(idxPtr);
    ...
}

int aLocalFn(){
    int aLocalVar = returnsRecordIndex();
    // allocate some space for our int
    int *intBuf = (int *)malloc(sizeof(int));
    *intBuf = aLocalVar;
    pthread_create(&thread_id,&attr_detached,threadFunction, intBuf)!=0)
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T09:51:53.190

每当您将变量传递给线程函数时，您的工作就是确保变量在线程函数完成使用之前保持有效和有效。

在您的情况下`aLocalFn()`，继续与新线程同时执行，甚至可能在线程之前完成执行，这会在线程函数中留下一个悬空指针（指向可能不存在的数据的指针），因为函数中的局部变量`aLocalVar`不再存在函数返回后。

# .net - 服务器上的企业库日志记录扩展属性失败

> ID：10682885
> 
> 赞同：1
> 
> 时间：2012-05-21T09:42:59.177
> 
> 标签：.net, enterprise-library, enterprise-library-5

我有一个标准的企业库文本格式化程序，具有默认格式。日志文件已正确创建，但仍为空。如果我删除最后一个格式选项，使用扩展属性（见下文）它开始工作。如果我把它放回去，日志仍然是空的，我不知道在哪里搜索错误。

```
template="Tim...&#xA;Extended Properties: {dictionary({key} - {value}{newline})}" 
```

（是的，我可以使用确切的缩写模板运行它来触发错误）。如果我删除`{dictionary({key} - {value}{newline})}`它开始记录的部分。该问题仅发生在测试服务器上，在我的本地开发机器上它按预期工作，输出我的扩展属性。

我尝试设置一个单独的日志记录错误目的地，但没有运气。那里没有任何记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:12:23.820

我认为@TimB 可能是对的。

有一个与此相关的[未解决问题](http://entlib.codeplex.com/workitem/31624)： *“未报告原始异常的原因是在报告异常时使用了另一个 TextFormatter 并引发了另一个异常，该异常被捕获并吞下（尽管触发了日志记录失败事件）。”*

解决方法是不在 ExtendedProperties 中填充空值。或者也许是自定义格式化程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:25:45.447

ExtendedProperties 字典不能包含空值。这会导致日志记录失败，因为 Enterprise Library 不希望此字典中有空对象。要诊断这是否是您的问题，您将“记录错误和警告”类别配置为在某处记录，然后您应该能够看到记录时发生的任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T17:06:45.493

我遇到的另一个导致缺少扩展属性的问题是某些重载`Logger.Write`不将对象视为异常，因此不记录扩展属性。

一种选择是将 exception.Data 转换为 Dictionary 并将其作为第三个`properties`参数传递。

第二个选项是`ExceptionPolicy.HandleException`用于记录异常（假设您的异常策略将异常发送到适当的日志类别）。

# android - EditText 框焦点

> ID：10682887
> 
> 赞同：0
> 
> 时间：2012-05-21T09:43:13.820
> 
> 标签：android, textbox

在我的应用程序中，我有 3 个编辑文本框，在前两个编辑框中，用户将输入输入。在第三个编辑文本框中，我必须将这两个值相乘，并且必须在用户触摸第三个编辑文本框时显示。

请任何人帮助我。

我为此尝试过：

```
total.setOnKeyListener(new View.OnKeyListener() {

                @Override
                public boolean onKey(View arg0, int arg1, KeyEvent arg2) {
                    // TODO Auto-generated method stub
                    System.out.println("insidefocus");
                    String tot=String.valueOf((Integer.parseInt(price.getText().toString()))*(Integer.parseInt(qty.getText().toString())));
                    System.out.println("tot="+tot);
                    total.setText(tot);
                    return false;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:54:24.547

使用可以使用**onClickListener**而不是**onKeyListener**并执行您的功能，例如添加两个文本框值并将结果设置在第三个文本框中。

```
total.setonClickListener (new View.onClickListener () {

            @Override
            public boolean onClick(View view) {
                // TODO Auto-generated method stub
                tot=txt1.getText.toSting()+txt2.getText.toString();
                total.setText(tot);

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:05:17.537

您可以结合使用 onclick 和 onfocus 增益侦听器：

```
total.setOnClickListener(new View.OnClickListener() {               
public void onClick(View arg0) {                            
    Calculate();                    
}
});

total.setOnFocusChangeListener(new View.OnFocusChangeListener() {
public void onFocusChange(View v, boolean hasFocus) {
if(hasFocus==true)
{
    Calculate();
}
}
});

Calculate(){
    String tot=String.valueOf((Integer.parseInt(price.getText().toString()))*(Integer.parseInt(qty.getText().toString())));
    total.setText(tot);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:05:46.170

试试这个

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final EditText mEditText = (EditText) findViewById(R.id.editText1);
        final EditText mEditText1 = (EditText) findViewById(R.id.editText2);
        final EditText mEditText2 = (EditText) findViewById(R.id.editText3);
            final Button result=(Button) findViewById(R.id.button1);
        result.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                String a, b;
                Integer vis;
                a = mEditText.getText().toString();
                b = mEditText1.getText().toString();
                vis = Integer.parseInt(a) + Integer.parseInt(b);
                mEditText2.setText(vis.toString());
                mEditText2.setEnabled(false);
            }
        });

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:08:42.770

第三个是你的第三个editbiox

```
 third.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            int one = Integer.parseInt(txt1.getText().toString());
            int two = Integer.parseInt(txt2.getText().toString());
            int result = one+two ;
            third.setText(String.valueOf(result));

        }
    }); 
```

# android - 在 aosp 中包含一个新 jar

> ID：10682891
> 
> 赞同：2
> 
> 时间：2012-05-21T09:43:25.240
> 
> 标签：android, android-source

除了已经存在的罐子外，我需要在 aosp 中添加一个新罐子，以便在我构建我的 rom 时可以使用这个罐子。

谁能告诉我把罐子放在哪里。我将它保存在 out/target/common/obj/JAVA_Libraries 中，但它不在构建路径中。

所以我想我需要在makefile中进行make更改或使新jar包含在构建路径中的东西。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:50:33.293

您应该修改`setup-makefile.sh`设备的脚本。

使用`PRODUCT_COPY_FILES`指令。

以这个文件为例：[cyanogenmod@github:android_device_htc_passion](https://github.com/CyanogenMod/android_device_htc_passion/blob/gingerbread/setup-makefiles.sh)

- 编辑 -

也许您甚至可以使用`PRODUCT_COPY_FILES`in `build/target/product/core.mk`，但我不确定。

# c# - 在位图控件上找到鼠标位置并在c#中显示一个矩形

> ID：10682892
> 
> 赞同：-1
> 
> 时间：2012-05-21T09:43:27.243
> 
> 标签：c#, winforms, positioning, mouse-cursor

我想找到面板显示矩形的确切鼠标位置。我有一个面板并在其上分配了位图图像。我搜索了很长时间，发现控制鼠标位置选项，但它不适合。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:45:53.647

您可以使用[MouseMove](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousemove%28v=vs.71%29.aspx)事件并利用 MouseEventArgs：

```
//panel.MouseMove += new MouseEventHandler(panel_MouseMove);
void panel_MouseMove(object sender, MouseEventArgs e)
{
    Point myLocation = e.Location;
    //Or e.X and e.Y
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:47:20.210

您可以使用`MouseMove`事件：

```
 private void panel1_MouseMove(object sender, MouseEventArgs e)
    {
        Text = String.Format("({0};{1})", e.X, e.Y);
    } 
```

您可以使用`e.Location`或拆分值`e.X`和`e.Y`.

# java - 休眠中本机查询的命名参数的奇怪异常

> ID：10682896
> 
> 赞同：0
> 
> 时间：2012-05-21T09:43:35.033
> 
> 标签：java, hibernate

我有一个查询

```
select ... from x join y on ..
where ... and :age between y.min and y.max 
```

但是当使用休眠执行查询时，我收到

> org.hibernate.QueryParameterException：找不到命名参数 [年龄]

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:56:14.437

由于您尚未发布实际查询，因此我从您的代码段中推断出您的 :age 参数位于查询中的错误位置。查询的 where 子句的语法是`column_name operator value`，您应该使用`:age`其中一个表的实际列名来代替。你可能想要做的是`y.min >= :age and y.max <=:age`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:48:28.543

如果您已正确通过“年龄”，请检查您的 Java 代码。可能你错过了它，或者拼写错误。

如果你也分享你的java端代码会很好。

# jquery - jQuery UI 自动完成 - 从 txt 文件中获取数据

> ID：10682901
> 
> 赞同：2
> 
> 时间：2012-05-21T09:43:46.407
> 
> 标签：jquery, user-interface, autocomplete

我是 jQuery 初学者，试图让 jQuery UI 自动完成从 txt 文件中获取数据。txt格式很简单：

> 用户1 用户 2
> 用户
> 3
> 等

代码是：

```
jQuery.get('users.txt', function(usersGet) {
    $( "#userLogin" ).autocomplete( {
        source: usersGet
    });
}); 
```

但不幸的是，这不起作用。你能帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-21T22:40:16.550

接受的解决方案对我不起作用。这就是我`.txt`为我的 jQuery 自动完成输入字段读取 a 的方式：

```
$.ajax({
    url: "foo/bar.txt",
    dataType: "text",
    success: function(data) {
        var autoCompleteData = data.split('\n');
        $("#input").autocomplete({
            source: function(request, response) {
                var results = $.ui.autocomplete.filter(autoCompleteData, request.term);
                response(results.slice(0, 10)); // Display the first 10 results
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T09:51:07.770

从文档中：

> **Source**
> 一个字符串数组：
> [ "Choice1", "Choice2" ]
> 
> 具有标签和值属性的对象数组：
> [ { label: "Choice1", value: "value1" }, ... ]

您需要将文本文件修改为以下格式：

```
["user1","user2","user3"] 
```

然后将您的 jQuery 更改为：

```
$( "#userLogin" ).autocomplete({
    source: 'users.txt'
}); 
```

# selenium - 在 selenium 中处理 javascript 警报

> ID：10682904
> 
> 赞同：5
> 
> 时间：2012-05-21T09:43:54.247
> 
> 标签：selenium

如何处理硒中的onload javascript警报？

它没有在 Selenium IDE 中被捕获，也没有被 getAlert() 函数处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T05:37:24.837

甚至我也面临同样的问题。在使用 selenium 几个小时后，找到了处理 java 脚本警报和弹出窗口的解决方案。

我们可以使用 selenium 的 keyPressNative 来处理来自 selenium RC 的 java 脚本警报。

以下是该`key*Native()`方法的使用方法：

```
 selenium.keyPressNative("27"); // Escape
    selenium.keyPressNative("10"); // Enter    
    selenium.keyDownNative("16"); // Press and do not relase the shift key, so that
    selenium.keyPressNative("79"); // this character will be capitals
    selenium.keyUpNative("16"); // Release the shift key, as we don't need it for the 
    selenium.keyPressNative("67"); 
```

It is not advisable but helped me in handling some of the selenium failures.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:01:22.807

这是不可能的。[如 Selenium 文档中所述](http://seleniumhq.org/docs/05_selenium_rc.html#handling-browser-popup-windows)：

> Selenium 尝试向您隐藏这些对话框（通过替换 window.alert、window.confirm 和 window.prompt），这样它们就不会停止执行您的页面。如果您看到一个警报弹出窗口，可能是因为它在页面加载过程中触发了，这对于我们来说保护页面通常还为时过早。

这是 Selenium RC（因此也是 Selenium IDE）的一个已知限制，也是开发 Selenium 2 (WebDriver) 的原因之一。如果要捕获`onload`JS 警报，则需要[使用 WebDriver](http://seleniumhq.org/docs/03_webdriver.html#popup-dialogs) [警报处理](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Alert.html)。

作为一种解决方法，您可以使用[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)填写任何文本并按 Enter 并盲目地确认对话框。这不是最干净的方法，但它可以工作。但是，您将无法收到该`alert`消息。

# core-plot - -(NSUInteger) numberOfRecordsForPlot:(CPTPlot *)plot 没有调用

> ID：10682910
> 
> 赞同：1
> 
> 时间：2012-05-21T09:44:10.293
> 
> 标签：core-plot, cppiechart

嗨我正在做`CPTPieChart`一些 iPhone 应用程序。我在我的部分中添加了`delegate`and 。`datasource``cptpiechart``@interface`

`-(NSUInteger) numberOfRecordsForPlot:(CPTPlot *)plot`方法没有调用..我可以从你们中的任何一个人那里知道任何可能的原因......提前谢谢..

# lua - LuaSocket：unconnected:sendto 函数返回什么？

> ID：10682911
> 
> 赞同：1
> 
> 时间：2012-05-21T09:44:11.353
> 
> 标签：lua, udp, udpclient, luasocket

文档说

> 如果成功，该方法返回 1。如果发生错误，该方法返回 nil，后跟一条错误消息。

我得到的返回值为 5。即使返回 nil，也不会返回任何错误消息...

“5”返回值是什么意思？发送的数据包数量还是什么？

**编辑**

这是代码的要点。

```
local UDPClient = socket.udp()
UDPClient:setsockname("*", 0) --bind on any availible port and localserver ip address.
UDPClient:settimeout(0)
UDPClient:sendto(json.encode{"a"},someIP,somePort) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:38:50.283

在我的计算机上，它返回调用中发送的字节数。确实，这很奇怪，因为规范说的是完全不同的东西。

# magento - magento的首页定制

> ID：10682915
> 
> 赞同：0
> 
> 时间：2012-05-21T09:44:19.147
> 
> 标签：magento

我正在使用 magento 开发一个电子商务网站。我有两个带有主商店的网上商店。我想在我的主页上添加一个弹出窗口，以便用户可以选择一个选项来访问任一站点。请在这方面帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:32:27.313

在 Magento 1.6.2 及更低版本中，（我没有签入 1.7，但它也应该在那里）查看文件夹 app/design/frontend/base/default/template/page/switch/，你会发现模板stores.phtml 可以满足您的需要。

您还会在 app/design/frontend/base/default/layout/page.xml 中找到 page.xml 布局文件，搜索该行`<block type="page/switch" name="store_language" as="store_language" template="page/switch/languages.phtml"/>`。

您将有两种解决方案：

*   对我来说，这不是最好的解决方案，但您可以复制 page.xml 并将其放入您的自定义模板文件夹中，并将其中的行替换为该行的语言切换 `<block type="page/switch" name="stores_switch" as="stores_switch" template="page/switch/stores.phtml"/>`
*   或创建一个新模块，并将其布局文件放置在您的自定义模板中，并将以下几行设置为 mymodulelayout.xml 布局：`<reference name="header"><block type="page/switch" name="store_switcher" as="store_switcher" template="page/switch/stores.phtml"/> </reference>`

这是使用这些信息调整模板的良好开端。我没有测试它。

# mysql - 使用JOIN参数sql转换fql查询

> ID：10682916
> 
> 赞同：0
> 
> 时间：2012-05-21T09:44:23.207
> 
> 标签：mysql, sql, facebook-fql

我在这里有这个代码，它允许我提取喜欢特定页面的朋友，但我需要提取不喜欢特定页面的朋友。

这是代码：

```
$users = $facebook->api(array('method' => 'fql.query',
        'query' => "SELECT uid, first_name, pic_small FROM user WHERE uid IN(
    SELECT uid FROM page_fan WHERE page_id='411133928921438' AND uid IN (
        SELECT uid2 FROM friend WHERE uid1 = me()
    ))")); 
```

我应该如何使用 OUTER JOIN 或 SMTH 得到这样的东西：

```
$users = $facebook->api(array('method' => 'fql.query',
            'query' => "SELECT uid, first_name, pic_small FROM user WHERE uid NOT IN(
        SELECT uid FROM page_fan WHERE page_id='411133928921438' AND uid IN (
            SELECT uid2 FROM friend WHERE uid1 = me()
        ))")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:47:55.977

看到它不支持 OUTER JOIN 或 NOT IN，请尝试这样做（不确定这是否是最好的方法，但应该可以）

```
$likes = $facebook->api(array('method' => 'fql.query',
    'query' => "SELECT uid, first_name, pic_small FROM user WHERE uid IN(
SELECT uid FROM page_fan WHERE page_id='411133928921438' AND uid IN (
    SELECT uid2 FROM friend WHERE uid1 = me()
))"));

$allfriends = $facebook->api(array('method' => 'fql.query',
    'query' => "SELECT uid, first_name, pic_small FROM user WHERE uid IN (
    SELECT uid2 FROM friend WHERE uid1 = me()
)"));

// Loop through the rows
// I think there is a page where you can test FQL at developers.facebook.com, I'll see if I can find it on my phone so I can see what the JSON response looks like and fix this code, in the mean while see if this works

// Yeah so the code does this:
// Loop through each item in the $allfriends result, (put the contents of the row into the $friend variable
foreach( $allfriends as $friend )
{  
   // This bit I need to change, this is supposed to look in the $likes array to see if the UID is present, but it will be comparing the uid against the whole object - need to tweak this
   if( !in_array($friend['uid'], $likes) ) 
   {
       // Each friend that doesn't like the page should hit this part of the loop
       echo $friend['uid'];
   }                 
} 
```

免责声明 - 我使用 PHP 已经有 5 年了，而且自从我接触 FQL 以来已经过了很长时间 - 让我知道是否有任何工作/不起作用（如果它起作用，我会感到惊讶：D）

# html - 一个应用两个 webview 但只有一个 localStorage

> ID：10682919
> 
> 赞同：1
> 
> 时间：2012-05-21T09:44:34.947
> 
> 标签：html, webview, local-storage

我有一个应用程序，在我的应用程序中有两个 webviews，我标记了 webview_One 和 webview_Two。

```
webview_One access "http://localhost:12345:/a/index.html"
webview_Two access "http://localhost:12345:/b/index.html" 
```

在 a/index.html 和 b/index.html 中，我使用 localStorage 来操作一个变量，它们都是 localStorage.test，但是，当我在 a/index.html 中更改 localStorage.test 时，在 b/index.html 中我得到的值是在 a/index.html 中进行了更改

为什么每个webview都不能存储localStorage？

我想知道如何让每个 webview 存储每个 webview 本身的 localStorage 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:12:24.390

WebKit 仅使用一个数据库进行本地存储 - 查看 WebSettings 的文档

另一方面 sessionStorage 可能会做你想做的事，但是当你离开页面时你会丢失数据

# php - 使用 PHP 强制下载 PDF - Windows 上的文件损坏

> ID：10682929
> 
> 赞同：0
> 
> 时间：2012-05-21T09:45:06.327
> 
> 标签：php, pdf, header

我有强制下载 PDF 的 PHP 代码。它适用于 Mac，但不适用于 Windows 机器。我想这可能与linux服务器读取代码并创建mac可以读取但windows不能读取的文件有关？

```
$filename = str_replace(' ', '%20', $_GET['brochure']);
header('Cache-Control: public');
header('Content-type: application/pdf');
header("Content-disposition: attachment; filename=\"$filename\"");
readfile('http://siteurl.com/media/download/'.$filename);
die(); 
```

关于如何让这个 PDF 下载 Windows 友好的任何建议？

错误信息是

> 无法打开“文件名..”，因为它不是受支持的文件类型或文件已损坏（例如，它作为电子邮件附件发送并且未正确解码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:47:18.217

也许您的浏览器正在缓存文件的旧版本。尝试将这些标头添加到您的代码中：

```
header("Cache-Control:  maxage=1");
header("Pragma: public"); 
```

另外的选择：

将文件保存在临时目录中，并使用以下代码将其发送到客户端：

```
$file = readfile('/tmp/'.$filename);
header('Content-Description: File Transfer');
header('Content-Type: application/pdf');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:57:53.250

可能是文件名最后需要 .pdf 以便 Windows 可以正确解释它。尝试下载文件并在末尾使用 .pdf 重命名，然后尝试打开它。

# blackberry - 黑莓 suporetd 泰卢固语字体

> ID：10682930
> 
> 赞同：0
> 
> 时间：2012-05-21T09:45:07.867
> 
> 标签：blackberry, fonts, truetype

我正在检查此条件以加载字体：

```
 if (FontManager.getInstance().load("/res/gautami.ttf", "MyFont", FontManager.APPLICATION_FONT) == FontManager.SUCCESS)
     try {
         FontFamily typeface = FontFamily.forName("MyFont");
         Font myFont = typeface.getFont(Font.PLAIN, 50);
         helloWorld.setFont(myFont); 
     } 
```

我的代码没有进入循环。

即使我尝试过：vemana2000、pothana、abteluhu、akaher 等......
我得到了[`NullPointerException`](http://www.blackberry.com/developers/docs/4.5.0api/java/lang/NullPointerException.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:21:17.843

您的字体文件大小应小于 60KB

# java - 获取注释值？

> ID：10682935
> 
> 赞同：7
> 
> 时间：2012-05-21T09:45:27.647
> 
> 标签：java, reflection, annotations

如何获取注释中设置的值？

我定义了以下注释：

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface JsonElement {
    int type();
} 
```

这是在 POJO 类中使用它的方法

```
@JsonElement(type=GETTER_METHOD)
public String getUsername{
........................
} 
```

使用反射检查此方法是否存在 JSonElement 注释并检查类型值是什么的 util 类。

```
Method methods[] = classObject.getClass().getDeclaredMethods();

        JSONObject jsonObject = new JSONObject();
        try {
            for (int i = 0; i < methods.length; i++) {
                String key = methods[i].getName();
                System.out.println(key);
                if (methods[i].isAnnotationPresent(JsonElement.class) && key.startsWith(GET_CHAR_SEQUENCE)) {
                    methods[i].getDeclaredAnnotations();
                    key = key.replaceFirst(GET_CHAR_SEQUENCE, "");
                    jsonObject.put(key, methods[i].invoke(classObject));
                }

            }
            return jsonObject;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        } 
```

我如何找出什么是`type()`价值？我可以找到注释是否存在，但我找不到一种方法来找出为`type()`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-21T09:55:06.817

```
JsonElement jsonElem = methods[i].getAnnotation(JsonElement.class);
int itsTypeIs = jsonElem.type(); 
```

请注意，您必须确保这`jsonElem`不是`null`由您的

```
isAnnotationPresent(JsonElement.class) 
```

或者一个简单的

```
if (jsonElem != null) {
} 
```

查看。

* * *

此外，如果您将注释更改为

```
public @interface JsonElement {
    int type() default -1;
} 
```

您不必在代码`type`中每次出现 时都声明该属性`@JsonElement`- 它默认为`-1`.

您还可以考虑使用`enum`for this 而不是一些整数标志，例如：

```
public enum JsonType {
    GETTER, SETTER, OTHER;
}

public @interface JsonElement {
    JsonType type() default JsonType.OTHER;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T09:51:28.830

您可以检查注释是否属于 JSonElement 如果是，您可以强制转换并调用您的方法

如果循环遍历所有注释，则

```
for(Annotation annotation : methods[i].getAnnotations()) {
    if(annotation instanceOf(JsonElement)){
       ((JsonElement)annotation).getType();
    }
} 
```

或者

```
JSonElement jSonElement = methods[i].getAnnotations(JSonElement.class);
jSonElement.getType(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T09:55:00.233

```
JsonElement jsonElement = methods[i].getAnnotation(JsonElement.class);

int type = jsonElement.type(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:06:16.840

解决方案：

```
 Method methods[] = classObject.getClass().getDeclaredMethods();

    JSONObject jsonObject = new JSONObject();
    try {
        for (int i = 0; i < methods.length; i++) {
            String key = methods[i].getName();
            System.out.println(key);
            if (methods[i].isAnnotationPresent(JsonElement.class)
                    && key.startsWith(GET_CHAR_SEQUENCE)
                    && (methods[i].getAnnotation(JsonElement.class).type() == GETTER_METHOD)) {

                key = key.replaceFirst(GET_CHAR_SEQUENCE, "");
                jsonObject.put(key, methods[i].invoke(classObject));

            }

        }
        return jsonObject;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T10:15:45.867

据我了解，您的代码会： - 遍历声明的方法 - 检查当前方法是否用 JsonElement.class 注释，它的名称以 GET_CHAR_SEQUENCE 开头，并且注释类型的值等于 GETTER_METHOD。- 你根据条件构建你的 json

我看不到您正在更改注释本身的类型成员的当前值。好像你不再需要它了。

但是有谁知道如何解决这个任务？

# android - 开机时比较 SIM 卡 IMSI

> ID：10682936
> 
> 赞同：0
> 
> 时间：2012-05-21T09:45:34.637
> 
> 标签：android, broadcastreceiver

服务等级

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class StartActivityAtBoot extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
        Intent i = new Intent(context, CompareIMSI.class);
        context.startService(i);
    }
} 
```

比较 SIM 卡 IMSI 类

```
public class CompareIMSI extends Service{

Context context;
TelephonyManager operator;

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    super.onCreate();
    Toast.makeText(this, "Service Created", Toast.LENGTH_LONG).show();
    compareSIM();
}

@Override
public void onDestroy() {
    super.onDestroy();
    Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
}

public void compareSIM(){

    final String STORAGE = "Storage";
    SharedPreferences unique = getSharedPreferences(STORAGE, 0);
    final String storedIMSI = unique.getString("simIMSI", "");
    final String currentIMSI = getSubscriberId().toString();

    if (!storedIMSI.equals(currentIMSI)){
        Intent i = new Intent(CompareIMSI.this, ScreenLockActivity.class);
        startActivity(i);
    }
}

public String getSubscriberId(){

    String IMSI = null;
    String serviceName = Context.TELEPHONY_SERVICE;
    TelephonyManager m_telephonyManager = (TelephonyManager) getSystemService(serviceName);
    int deviceType = m_telephonyManager.getPhoneType();
    switch (deviceType) {
        case (TelephonyManager.PHONE_TYPE_GSM):
            break;
        case (TelephonyManager.PHONE_TYPE_CDMA):
            break;
        case (TelephonyManager.PHONE_TYPE_NONE):
            break;
        default:
            break;
     }
     IMSI = m_telephonyManager.getDeviceId();
     return IMSI;
}
} 
```

我希望应用程序能够在启动时将存储的 SIM 卡 IMSI 与当前插入的 IMSI 进行比较，如果 IMSI 不同，那么应用程序将在启动后将用户带到另一个活动......我的编码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:27:43.737

是的，`getSubscriberId()`是正确的方法，顺便说一句，当您收到 boot_completed 广播时，“imsi”通常不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:55:57.363

您不是在比较 IMSI，而是在比较 IMEI（这是手机的 ID，它永远不会改变）。

要获得您需要的 IMSI：

```
IMSI = m_telephonyManager.getSubscriberId(); 
```

# delphi - GSM 调制解调器发送短信

> ID：10682943
> 
> 赞同：5
> 
> 时间：2012-05-21T09:46:07.833
> 
> 标签：delphi, serial-port, gsm

我有一个中兴通讯公司生产的 GSM 调制解调器。我想开发一个应用程序来通过这个设备发送 SMS 消息。问题是我无法连接到 COM 端口。我在设备管理器中看到的只有 COM22 上的 HSPADataCard 诊断接口和 COM24 上的 HSPADataCard NMEA 设备。我尝试在两个端口上使用腻子进行连接，但失败了。

我想知道是否可以使用 TAPI 发送短信。欢迎任何关于如何实现我的目标的想法。

另外，您知道 Delphi 的任何库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:13:09.317

[nrComm Lib](http://www.deepsoftware.ru/nrcomm/)提供了通过 GSM 调制解调器发送 SMS 消息的可能性。

许多其他串行通信选项和最新的 Delphi 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:10:40.880

TurboPower AsyncPro 有[SMS 组件](http://tpapro.sourceforge.net/ApdPager.html)。用代码发送 SMS 并不难，其中一些链接可能会对您有所帮助。但是，要使其正常工作，您需要通过某个 COM 端口（或 USB 虚拟 COM 端口）与您的 GSM 调制解调器建立通信，并接收在终端应用程序中键入的 AT 命令的回复。如果您的 GSM 调制解调器不提供此功能，那么所有建议的方法都将失败。

*   [我在哪里可以获得用于 delphi 或 python 的免费 G​​SM 库/组件？](https://stackoverflow.com/questions/657100/where-can-i-get-free-gsm-libraries-components-for-delphi-or-python)
*   [http://www.developershome.com/sms/howToSendSMSFromPC.asp](http://www.developershome.com/sms/howToSendSMSFromPC.asp)
*   [http://www.torry.net/quicksearchd.php?String=sms&Title=是](http://www.torry.net/quicksearchd.php?String=sms&Title=Yes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:28:12.610

Activexpert 是您的另一种解决方案。我使用过它，发现它比我尝试过的其他一些工具更容易实现。

# android - 如何使用适配器更新 List Activity 中的 ProgressBar

> ID：10682950
> 
> 赞同：2
> 
> 时间：2012-05-21T09:46:20.847
> 
> 标签：android, progress-bar, listactivity

```
public class ChallengesActivity extends ListActivity {

    private SimpleAdapter adapter;
    private ArrayList<HashMap<String,String>> list =  new ArrayList<HashMap<String,String>>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        printTripsToScreen(); 
        setContentView(R.layout.challenge_list);
        adapter = new SimpleAdapter(this, list, R.layout.challenge_row, 
                new String[] {"description","progress"},
                new int[] {R.id.ch_description, R.id.ch_progress});
        setListAdapter(adapter);
    }

    public void printTripsToScreen() {
           Log.d("Carbon","ChallengesActivity: printTripsToScreen() started");
           ChallengeManager chManager = new ChallengeManager();
           ArrayList<Challenge> challenges = chManager.getChallenges();
           HashMap<String,String> temp;

           for (int i=0; i<challenges.size();i++){
               temp = new HashMap<String,String>();
               temp.put("description","Hello");
               temp.put("progress", ""+challenges.get(i).getCompleted_percentage());
               list.add(temp);
           }
       }
} 
```

我需要更新进度条中的值。我正在使用适配器和 HashMap 来更新文本内容。如何更新进度条中的值？如果这不是方法，请让我知道该怎么做？该列表是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:40:26.213

如果您`Progressbar`在 的行中有 a`ListView`并且您想更新其进度（使用您已经拥有的值），您可以使用 a`SimpleAdapter.ViewBinder`来绑定 that 的值`ProgressBar`。Bellow 是一个将`ProgressBar`（从该行）重置为`0`单击`ListView`行时的示例：

```
 //...
    //I assumed that you have a ProgressBar in the ListView row with the id progressBar1
    // and you use the the value from the "progress" key as its progress.
    adapter = new SimpleAdapter(this, list,
                    R.layout.someclasses_challaenge_row, new String[] {
                            "description", "progress", "progress"}, new int[] {
                            R.id.ch_description, R.id.ch_progress, R.id.progressBar1});
            adapter.setViewBinder(new SimpleAdapter.ViewBinder() {

                @Override
                public boolean setViewValue(View view, Object data,
                        String textRepresentation) {
                    if (view.getId() == R.id.progressBar1) {
                        int value = Integer.parseInt(data.toString());
                        ((ProgressBar) view).setProgress(value);
                        return true;
                    }
                    return false;
                }
            });
            setListAdapter(adapter);

    @Override
        protected void onListItemClick(ListView l, View v, int position, long id) {
            HashMap<String, String> item = list.get(position);
            item.put("progress", "0");
            adapter.notifyDataSetChanged();
    } 
```

我不知道这是不是你想要的。

# ruby-on-rails - Ruby on rails 3.0 NoMethodError

> ID：10682952
> 
> 赞同：0
> 
> 时间：2012-05-21T09:46:27.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我的应用程序有错误。我有一个嵌套的 from，它在新页面中完美呈现，但不是在我想查看所有用户内容的页面中。这是错误：

```
NoMethodError in Resumes#index

Showing /Users/antonella/Desktop/resumin/resume/app/views/resumes/index.html.erb where line #10 raised:

undefined method `educations' for nil:NilClass

Extracted source (around line #10):

7:          <%= resume.personal_detail.address %>
8:          <%= resume.personal_detail.telephone %>
9:      </li>
10:         <% @resume.educations.each do |education| %>
11:         <li>
12:             <%= resume.education.school_name %>
13:             <%= resume.education.city %>

Rails.root: /Users/antonella/Desktop/resumin/resume 
```

## 简历.rb

```
class Resume < ActiveRecord::Base
    has_one :personal_detail
    has_many :educations, :dependent => :destroy
    accepts_nested_attributes_for :personal_detail
    attr_accessible :personal_detail_attributes 
    validates_associated :personal_detail 

    accepts_nested_attributes_for :educations, :reject_if => lambda { |a| a[:education].blank? }, :allow_destroy => true
    attr_accessible :education_attributes
    validates_associated :education
end 
```

## resumes_controller.rb

```
def index 
    @resumes = Resume.all
  end 
```

## 教育.rb

```
class Education &lsaquo; ActiveRecord::Base
    belongs_to :resume
    attr_accessible :school_name, :degree, :dates_attended, :type_of_study, :field_of_study, :city, :country
end 
```

## 索引.html

```
<h1>All resumes</h1>
<ul>
    <% @resumes.each do |resume| %>
        <li>
            <%= resume.personal_detail.firstname %>
            <%= resume.personal_detail.lastname %>
            <%= resume.personal_detail.address %>
            <%= resume.personal_detail.telephone %>
        </li>
        <% @resume.educations.each do |education| %>
        <li>
            <%= resume.education.school_name %>
            <%= resume.education.city %>
            <%= resume.education.country %>
            <%= resume.education.dates_attended %>
            <%= resume.education.degree %>
            <%= resume.education.type_of_study %>
            <%= resume.education.field_of_study %>
        </li>
        <% end %>
    <% end %>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:50:11.013

代替：

```
<% @resume.educations.each do |education| %> 
```

它应该是：

```
<% resume.educations.each do |education| %> 
```

请注意，该变量`@resume`不存在。你只有`@resumes`并且在你有的循环内`resume`。

您还必须更改此部分：

```
<li>
  <%= resume.education.school_name %>
  <%= resume.education.city %>
  <%= resume.education.country %>
  <%= resume.education.dates_attended %>
  <%= resume.education.degree %>
  <%= resume.education.type_of_study %>
  <%= resume.education.field_of_study %>
</li> 
```

到：

```
<li>
  <%= education.school_name %>
  <%= education.city %>
  <%= education.country %>
  <%= education.dates_attended %>
  <%= education.degree %>
  <%= education.type_of_study %>
  <%= education.field_of_study %>
</li> 
```

# c++ - 使用 Cron 运行 c++ 程序

> ID：10682953
> 
> 赞同：1
> 
> 时间：2012-05-21T09:46:29.957
> 
> 标签：c++, cron

我正在尝试在我的服务器上运行一个 c++ 程序，该程序目前正在更新 MySQL 数据库。我正在使用 Cron 运行它。该程序正在我自己的计算机（Ubuntu 10.10）上编译和运行，但我似乎可以在我的服务器上运行一些东西。

我检查了 cron 是否使用 PHP 脚本为我工作，但我不知道如何运行 c++ 程序。在 directAdmin 我使用命令：

```
/home/rogier/domains/ditiseenwinkel.nl/public_html/test/program &>/home/rogier/domains/ditiseenwinkel.nl/public_html/test/testsql2.log 
```

`program`我的编译程序在哪里。奇怪的事情：日志文件是空的。

我究竟做错了什么？我应该如何通过 Cron 运行 c++ 程序？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:53:41.570

程序是在同一台服务器上编译的吗？如果不是 - 您应该在同一台服务器上编译源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:57:37.010

C++ 程序应该被编译成可执行文件。一旦你走到那一步，它所用的语言就不再重要了！

给定的命令行是否在服务器上运行并产生输出（即通过命令行，而不是 cron）？如果是这样，该应用程序可能取决于 cron 没有的某些环境。

如果没有重定向运行它呢？

您对日志文件有写权限吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:26:43.400

对于 Cron，只要您可以从 shell 执行该命令，您正在运行哪种类型的程序 C++/PHP/Python/..etc 都没有关系。如果您在 shell 上编写的命令有效，它也应该适用于 cron。

但是请注意，cron 的环境变量可能完全不同。这是 cron 问题的第一大原因。即使您为自己的用户安装了 cron 脚本，您也可能会惊讶于 cron 环境没有任何 PATH。因此，您必须指定简单系统命令的完整路径，即 /bin 或 /usr/bin

Like other users said, there might be a case of access rights if the command is executed by other user than yours. I usually test my dump files with the safest path "/tmp" (except if the user is chrooted)

# python - 在列表中进行所有可能的列表组合

> ID：10682955
> 
> 赞同：1
> 
> 时间：2012-05-21T09:46:38.513
> 
> 标签：python, list, combinations

我已经找到了这个问题的几个答案，但这不是我打算做的。

当我有一个清单时：

```
[1,2,3],[4,5,6],[7,8,9] 
```

我想拥有所有可能的组合：

```
[1,2,3],[7,8,9],[4,5,6]
[1,2,3],[4,5,6],[7,8,9]
[7,8,9],[4,5,6],[1,2,3]
.... 
```

但是在python中有一个简单的解决方案吗？

谢谢，是否也可以创建 1 个列表而不是 3 个，例如：[7,8,9,4,5,6,1,2,3]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:51:32.520

`itertools.permutations`我想这就是你要找的东西。

```
>>> import itertools
>>> l = [1,2,3],[4,5,6],[7,8,9]
>>> list(itertools.permutations(l, len(l)))
[([1, 2, 3], [4, 5, 6], [7, 8, 9]), 
  ([1, 2, 3], [7, 8, 9], [4, 5, 6]),
  ([4, 5, 6], [1, 2, 3], [7, 8, 9]), 
  ([4, 5, 6], [7, 8, 9], [1, 2, 3]),
  ([7, 8, 9], [1, 2, 3], [4, 5, 6]),
  ([7, 8, 9], [4, 5, 6], [1, 2, 3])] 
```

并合并在一起：

```
>>> [list(itertools.chain(*x)) for x in itertools.permutations(l, len(l))]

[[1, 2, 3, 4, 5, 6, 7, 8, 9], 
[1, 2, 3, 7, 8, 9, 4, 5, 6], 
[4, 5, 6, 1, 2, 3, 7, 8, 9], 
[4, 5, 6, 7, 8, 9, 1, 2, 3], 
[7, 8, 9, 1, 2, 3, 4, 5, 6],
[7, 8, 9, 4, 5, 6, 1, 2, 3]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:51:40.567

```
>>> from itertools import permutations
>>> a = [[1,2,3],[4,5,6],[7,8,9]]
>>> for permu in permutations(a,3):
...   print permu
...
([1, 2, 3], [4, 5, 6], [7, 8, 9])
([1, 2, 3], [7, 8, 9], [4, 5, 6])
([4, 5, 6], [1, 2, 3], [7, 8, 9])
([4, 5, 6], [7, 8, 9], [1, 2, 3])
([7, 8, 9], [1, 2, 3], [4, 5, 6])
([7, 8, 9], [4, 5, 6], [1, 2, 3]) 
```

组合列表使用`reduce`：

```
>>> a = [[1,2,3],[4,5,6],[7,8,9]]
>>> for permu in permutations(a,3):
...   print reduce(lambda x,y: x+y,permu,[])
...
[1, 2, 3, 4, 5, 6, 7, 8, 9]
[1, 2, 3, 7, 8, 9, 4, 5, 6]
[4, 5, 6, 1, 2, 3, 7, 8, 9]
[4, 5, 6, 7, 8, 9, 1, 2, 3]
[7, 8, 9, 1, 2, 3, 4, 5, 6]
[7, 8, 9, 4, 5, 6, 1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T09:55:58.167

在 Python2.7 中，您不需要指定排列的长度

```
>>> T=[1,2,3],[4,5,6],[7,8,9]
>>> from itertools import permutations
>>> list(permutations(T))
[([1, 2, 3], [4, 5, 6], [7, 8, 9]), ([1, 2, 3], [7, 8, 9], [4, 5, 6]), ([4, 5, 6], [1, 2, 3], [7, 8, 9]), ([4, 5, 6], [7, 8, 9], [1, 2, 3]), ([7, 8, 9], [1, 2, 3], [4, 5, 6]), ([7, 8, 9], [4, 5, 6], [1, 2, 3])] 
```

# c# - 将泛型参数传递给非泛型方法

> ID：10682956
> 
> 赞同：3
> 
> 时间：2012-05-21T09:46:46.237
> 
> 标签：c#, .net, generics, overloading

我正在尝试创建一种将可空值四舍五入到给定小数位的方法。理想情况下，我希望这是一个通用的，以便我可以在`Math.Round()`允许的情况下将它与双精度和小数一起使用。

我在下面编写的代码将无法编译，因为无法（可以理解地）解析该方法，因为无法知道要调用哪个重载。这将如何实现？

```
internal static T? RoundNullable<T>(T? nullable, int decimals) where T : struct
{
    Type paramType = typeof (T);

    if (paramType != typeof(decimal?) && paramType != typeof(double?))
        throw new ArgumentException(string.Format("Type '{0}' is not valid", typeof(T)));

    return nullable.HasValue ? Math.Round(nullable.Value, decimals) : (T?)null; //Cannot resolve method 'Round(T, int)'
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T09:50:33.130

> 这将如何实现？

就个人而言，我会摆脱你的通用方法。无论如何，它仅对两个类型参数有效 - 将其拆分为具有两个重载的重载方法：

```
internal static double? RoundNullable(double? nullable, int decimals)
{
    return nullable.HasValue ? Math.Round(nullable.Value, decimals)
                             : (double?) null;
}

internal static decimal? RoundNullable(decimal? nullable, int decimals)
{
    return nullable.HasValue ? Math.Round(nullable.Value, decimals)
                             : (decimal?) null;
} 
```

如果您*必须*使用通用版本，请根据 Dave 的回答有条件地调用它，直接使用反射调用它，或者`dynamic`在使用 C# 4 和 .NET 4 时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T09:50:11.533

鉴于您已经在进行类型检查，只需在代码流中使用它：

```
if (paramType == typeof(decimal?))
...
    Math.Round((decimal)nullable.Value, decimals)
else if(paramType == typeof(double?))
    Math.Round((double)nullable.Value, decimals) 
```

# sql - 分别声明存储过程的头部和主体

> ID：10682957
> 
> 赞同：1
> 
> 时间：2012-05-21T09:46:48.303
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我正在 SQL Server 2008 中编写存储过程。我需要创建两个相互使用的过程。

过程 A 执行 B，B 执行 A。

所以我想我必须首先声明程序的标题。我在互联网上搜索过，但我找不到答案，我该怎么做。

所以，我的问题是：如何在 SQL Server 2008 中分别声明存储过程的标头和主体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:50:36.687

您不能将它们分开，但您可以创建一个调用另一个尚不存在的 SP 的 SP。

当你运行这个

```
create procedure TheFirst as
begin
  exec TheSecond
end 
```

并且 SP TheSecond 不存在，您将收到一条消息：

> 模块“TheFirst”依赖于缺失的对象“TheSecond”。该模块仍将被创建；但是，在对象存在之前，它无法成功运行。

更新：

为避免出现这些消息，您可以先创建一个空 proc，然后在脚本中添加代码。

```
create procedure ProcB as

go

create procedure ProcA as
begin
  exec ProcB
end

go

alter procedure ProcB as
begin
  exec ProcA
end 
```

# c# - 将面板添加到 Outlook 中的约会/日历项目窗口

> ID：10682961
> 
> 赞同：2
> 
> 时间：2012-05-21T09:46:58.287
> 
> 标签：c#, .net, vsto, outlook-addin

目标：C# .Net VSTO2010 我需要在 Outlook 的约会/日历项目窗口中添加一个面板。AppointmentItem 窗口是指当我们在 Outlook 中单击约会或创建新约会时打开的窗口。我需要在约会项目窗口（我更喜欢使用面板）中显示一些细节（与约会项目相关）。实际上，我在单独的选项卡中显示一些详细信息（插件相关详细信息）作为约会项目窗口中的表单，我想在约会项目的单个窗口（约会项目窗口）中显示这些详细信息

检查器：表示显示 Outlook 项目的窗口。但在 Inspector 中不支持添加面板

我可以在 Outlook 主窗口中添加面板或自定义任务窗格。但我无法在约会项目窗口中执行此操作。

我正在使用 .Net 4 框架，Visual Studio 2010。这必须在 Outlook 插件中完成，插件是 MS Office Outlook 2003、2007、2010 的目标（至少它应该支持 2007 和 2010）。

可以使用窗口句柄和窗口类将面板添加到 Outlook 主窗口，然后使用 User32.dll 中的函数。但是我无法在约会项目窗口上使用相同的技术。（我无法获得约会项目窗口的句柄）

可以使用一些代码将自定义任务窗格添加到 Outlook 主窗口，但我没有找到在约会项目窗口上执行此操作的功能。

寻求好的帮助或建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T12:41:32.390

您可以通过自定义任务窗格和新检查器事件处理程序添加侧面板。

步骤1：

```
 private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        inspectors = this.Application.Inspectors;
        inspectors.NewInspector +=
        new Microsoft.Office.Interop.Outlook.InspectorsEvents_NewInspectorEventHandler(NewInspectorHandler);
    } 
```

第2步：

```
 public void Inspectors_NewInspector(Microsoft.Office.Interop.Outlook.Inspector Inspector)
    {
        Microsoft.Office.Tools.CustomTaskPane myCustomTaskPane;

        if(Inspector.CurrentItem is  Microsoft.Office.Interop.Outlook.AppointmentItem ) {

            UserControl uc1 = MyUserControl();
            myCustomTaskPane = getAddIn().CustomTaskPanes.Add(uc1, "MyPanel",Inspector);
            myCustomTaskPane.DockPosition = Office.MsoCTPDockPosition.msoCTPDockPositionRight;
            myCustomTaskPane.DockPositionRestrict = Office.MsoCTPDockPositionRestrict.msoCTPDockPositionRestrictNoChange;
            myCustomTaskPane.Visible = true;

        }

        //Additionally You can add a property change listener to the current Item here
    } 
```

这将在约会项目中显示自定义侧面板

# ruby-on-rails - 向 a 中的直通表添加条目有许多直通关系

> ID：10682971
> 
> 赞同：0
> 
> 时间：2012-05-21T09:47:41.713
> 
> 标签：ruby-on-rails

我有一个用于创建样式的表单。创建样式时，用户还必须为样式选择一些特征。

这些功能已预先填充到表单内的多选框中。保存样式时，应使用表单上选择的每个特征的条目（带有 style_id 和 feature_id）更新直通表。

我的控制器中有：

```
def new
    @style = Style.new
    @style.stylefeatures.build
end

def create 
    @style = Style.new(params[:style])
    @style.stylefeatures.build
    @style.save
end 
```

...在我的风格模型中

```
 attr_accessible :stylefeatures_attributes
  has_many :stylefeatures
  has_many :features, :through => :stylefeatures, :foreign_key => :feature_id
  accepts_nested_attributes_for :stylefeatures 
```

...在我的风格特征模型中

```
 belongs_to :style
  belongs_to :feature
  accepts_nested_attributes_for :feature 
```

...在我的特征模型中

```
 attr_accessible :description, :fullname, :name
  has_many :stylefeatures
  has_many :styles, :through => :stylefeatures, :foreign_key => :style_id 
```

...并以我的创建形式

```
<%= m.simple_fields_for :stylefeatures do |p| %>
  <%= p.input :feature_id, :label => "Features", :collection => Feature.all, :input_html => { :multiple => true } %>
<% end %> 
```

现在，当我保存新样式时，stylefeatures 表将更新为适当的 style_id，但有两个无用的条目。第一个是一个数组，其中包含已在表单中选择的所有特征 ID。第二个是具有适当 style_id 的空白条目，而 feature_id 列中没有任何内容。

您是否知道我可能做错了什么，或者如何根据需要将收集到的 feature_id 散布到表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:43:05.187

在新操作中，您只构建了一个样式特征，因此只有一个将使用 feature_id = '1,3,45,563' 创建（ofc 取决于您选择的特征）第二个由`@style.stylefeatures.build`在创建操作中生成

您可以尝试删除 fields_for 并简单地使用 :feature_ids 而不是 :feature_id

```
<%= p.input :feature_ids, :label => "Features", :collection => @features, :input_html => { :multiple => true } %> 
```

或者

```
<%= input_tag "style[feature_ids][]" , :label => "Features", :collection => @features, :input_html => { :multiple => true } %> 
```

# android - 在 Android 上使用 Google 地图时又一个 INSTALL_FAILED_MISSING_SHARED_LIBRARY

> ID：10682972
> 
> 赞同：0
> 
> 时间：2012-05-21T09:47:50.883
> 
> 标签：android, google-maps

我浏览了 Google 地图项目中有关 INSTALL_FAILED_MISSING_SHARED_LIBRARY 问题的所有文章，但找不到与我类似的案例或解决方案，所以这是我的问题：

我有一个活动项目（com.example.googleMaps.AndroidGoogleMapsActivity），它继承自 MapView 以显示谷歌地图并做一些事情。我在三星 Galaxy S II 上运行它，它运行良好：它显示地图并完成它应该做的事情。

现在。我想将此项目用作另一个项目的库，并将该活动显示为另一个应用程序的第一个屏幕。

所以我选中了 Is Library 框，我创建了一个新的 android 项目，该项目针对 GoogleAPI 构建，并将该库包含在 Eclipse 的 Android 属性中，并带有以下清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="test.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <uses-library android:name="com.example.googleMaps" required="true" />
        <uses-library android:name="com.google.android.maps" required="true" />

        <activity android:name="com.example.googleMaps.AndroidGoogleMapsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

我在我的设备上运行这个新项目，我得到了臭名昭著的错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY 并且 LogCat 完全沉默。

我想指出图书馆内的活动是有效的，所以没有一个众所周知的问题应该适用。

在客户端项目中，我指定了两个*uses-library*标记（一个用于我的库，一个用于 Google 库），我针对 GoogleAPI 构建，将该库包含在 Eclipse 的 Android 属性中并在经过测试的设备上运行。

我还缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:45:44.420

我有同样的问题，只需删除该行：

```
 <uses-library android:name="com.example.googleMaps" required="true" /> 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:36:31.203

仅使用 com.google.android.maps。请删除另一个。

# iphone - 如何使用谓词编写复杂的核心数据查询

> ID：10682973
> 
> 赞同：1
> 
> 时间：2012-05-21T09:47:52.810
> 
> 标签：iphone, objective-c, core-data

我正在使用 Core Data，但是没有完成任何复杂的查询并且完全迷失了 - 来自 SQL 背景，因此需要帮助创建 NSPredicate。

**我的问题**

我需要检索直接属于特定 EntityManagedObject 的 Perspective 列表（具有唯一名称）。

**数据库概述**

如您所见，EntityManagedObject 可以有很多 EntityManagedObjects，也可以有很多 ObjectiveManagedObject。

因此，EntityManagedObject 有一个 EntityManagedObject 作为父级，ObjectiveManagedObjective 有一个 EntityManagedObject 作为父级。

ObjectiveManagedObject 有一个 Perspective。一个 Perspective 可以属于许多 ObjectiveManagedObjects。

![在此处输入图像描述](../Images/c5eba1b2a395135919dd542ab49d253a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:32:47.417

做一个方法，

```
-(NSArray *) getEntityManagedObjectsWithParentEntity:(EntityManagedObject *) parentObject; 
```

另一种方法，

```
-(NSArray *) getObjectiveManagedObjectsWithEntityManagedObjects:(NSArray *) entityManagedObjects; 
```

然后 ，

```
-(NSArray *) getPerspectivesWithEntityManagedObject:(EntityManagedObject *) entityObject
{
   NSArray *objectiveManagedObjects = [self  getObjectiveManagedObjectsWithEntityManagedObjects: [self getEntityManagedObjectsWithParentEntity:entityObject] ];

 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Objectives IN %@", objectiveManagedObjects];

} 
```

# ajax - Delphi Chromium - 单击按钮/链接时如何获取 Ajax 调用的数据

> ID：10682979
> 
> 赞同：2
> 
> 时间：2012-05-21T09:48:39.910
> 
> 标签：ajax, delphi, chromium

我在应用程序中使用 Delphi Chromium 组件来显示来自 Web 应用程序的网页。在这些页面中，我有一些按钮可以触发对 Web 服务器的选择性 Ajax 调用。我需要以下内容：单击其中一个按钮时，在将事件通知到“主机应用程序”之后，我应该希望从此通知中获取 Ajax 请求的数据（如果可能的话，还要进行响应......）进行一些处理从“主机应用程序”对它们进行处理。可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T20:23:00.940

> 扩展（TCefv8HandlerOwn 类）实际上只是一个 JavaScript 函数，当从脚本中的某个位置调用它时，它会触发 TCefv8HandlerOwn.Execute（您可以在其中获取或设置其参数）。

# html5-canvas - HTML5 画布是否渲染依赖于浏览器？

> ID：10682983
> 
> 赞同：2
> 
> 时间：2012-05-21T09:49:30.517
> 
> 标签：html5-canvas

如果说 2 个浏览器都符合 HTML5 画布标准，它们之间会有任何渲染差异吗？假设我在浏览器 1 和 2 中绘制形状，逐像素比较是否相等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:07:49.793

该规范没有详细说明以保证逐个像素的完美。浏览器使用非常不同的渲染库，IE 和 Opera 甚至卸载到 GPU，因此实现的差异无疑会在像素着色上产生细微的差异，甚至对线条和曲线进行一些轻微的对齐。我确信字体会增加它们自己的复杂性。

也就是说，根据我的经验，我没有看到任何不是由于缺少功能或错误而造成的重大差异。

# date - 识别文本文件中的日期

> ID：10682985
> 
> 赞同：3
> 
> 时间：2012-05-21T09:49:37.943
> 
> 标签：date, text-files, identify

我们如何识别或搜索，在给定的文本文件（包含大量数据）中是否有任何日期。考虑所有可能的日期格式

# ruby-on-rails - 在登录/向上重定向问题后与设计

> ID：10682989
> 
> 赞同：1
> 
> 时间：2012-05-21T09:49:55.967
> 
> 标签：ruby-on-rails, devise

我想在登录用户重定向到创建新表（网站）的页面后，所以我的 ApplicationController 中有功能：

```
def after_sign_in_path_for(resource)
 new_website_path 
end 
```

注册后我希望用户重定向到他的编辑页面：

```
def after_sign_up_path_for(resource)
 edit_user_registration_path
end 
```

所以问题是 - 为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:05:26.713

这是因为`after_sign_up_path_for(resource)`您可以[在控制器](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)中看到 Devise 注册控制器的受保护方法。注册后获得自定义重定向的唯一方法是自行覆盖设计注册控制器。[在Devise Wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29)上有关于这样做的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:59:00.567

所以我改变了这样的访问级别：

```
 class RegistrationsController < Devise::RegistrationsController
 protected
   def after_sign_up_path_for(resource)
    edit_user_registration_path
   end
 protected
  def after_sign_in_path_for(resource)
    new_website_path
   end
  end 
```

在此之前，它适用于 after_sign_in 和 after_sign_out，现在它根本不起作用。为什么 ？