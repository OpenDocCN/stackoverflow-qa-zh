# StackOverflow 问答 11056000-11056999

# google-chrome - 谷歌浏览器控制台

> ID：11056000
> 
> 赞同：1
> 
> 时间：2012-06-15T18:08:36.320
> 
> 标签：google-chrome, browser

我想在 Google Chrome Javascript 控制台中使用这些非常简单的功能，但我真的不知道如何（已经在官方文档、多个视频和帖子中搜索...）

1.  写的不仅仅是一个 javascript 行！（当前按回车后，前面的代码执行）。此外，有没有办法让控制台的“写入”区域更大？（多行）

2.  典型的撤消和重做编辑。目前 control+Z 什么都不做。

    真的很奇怪，

    提前致谢，

    佩雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:10:22.557

Javascript 控制台确实不打算在其中进行认真的开发，但它非常好。

Shift+enter 将让您编写多行代码，而不是立即执行代码。

# backbone.js - 如何在backbonejs和requirejs中触发从子视图到父视图的事件

> ID：11056001
> 
> 赞同：2
> 
> 时间：2012-06-15T18:08:40.410
> 
> 标签：backbone.js, requirejs

我有一个动态创建子视图的父视图，并且我已经触发了从子视图到父视图的事件，并且我正在将子视图的模型传递给具有某些属性集的父视图。现在在父视图中，我必须获取模型并添加到集合中。这是我的代码子视图触发代码

```
$(this.el).trigger('added', this.model); 
```

父视图事件

```
events: {
            "added": "addNewAttribute"
        },
    addNewAttribute: function (model) {
        console.log(model);
        this.collection.add(model);
        console.log(this.collection);
    } 
```

console.log 返回未定义。有人可以让我知道如何将模型传递回父视图吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:56:30.113

刚遇到同样的问题！

问题是父函数将事件作为第一个参数，而触发器函数将变量作为数组传递。所以代码应该是这样的：

```
$(this.el).trigger('added', [this.model]); 
```

父视图事件：

```
events: {
    "added": "addNewAttribute"
},
addNewAttribute: function (event,model) {
    console.log(model);
    this.collection.add(model);
    console.log(this.collection);
} 
```

这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:49:37.130

我可能不在基地，但我猜想子视图没有对包含此代码的函数进行绑定：

```
$(this.el).trigger('added', this.model); 
```

因此，当您进入代码所在的函数时，“this”并不指向子视图，而是指向某个 DOM 对象或其他东西。那么 this.model 并不指向你所期望的。

例如：

```
initialize : function () {
  _.bindAll(this, "addFunction");
}

addFunction : function () {
  $(this.el).trigger('added', this.model);
} 
```

# vb.net - VB.Net 编辑 CSV（或分隔文件）

> ID：11056006
> 
> 赞同：1
> 
> 时间：2012-06-15T18:09:13.880
> 
> 标签：vb.net, csv, delimited

我想知道一种编辑 csv 文件的方法（当然我想知道最好的方法），最好不必读取原始文件并将结果写入新文件。

示例1：我想将一列的内容分成两列123abc成123，abc

示例 2：我想将 AB123 列开头的字母删除为 123

澄清：我不需要帮助解决我的例子；我只需要指出阅读和编辑同一个文件的正确方向。

这是一个使用临时文件的代码示例，在我看来太慢了

```
 Dim currentLine as string()
tempFile.AutoFlush = True

Do Until origFile.EndOfData
    currentLine = origFile.ReadFields
    currentLine(1) = currentLine(1).Replace("ABC","") 'would convert ABC123 to 123
    For index as Integer = 0 to currentLine.Count - 2
        tempFile.Write(currentLine(index) & ",")
    Next
        tempFile.Write(currentLine(currentLine.Count - 1))
        tempFile.WriteLine()
Loop

tempFile.Flush()
tempFile.Dispose()
origFile.Dispose()
IO.File.Copy(tempFile,OrigFile,True)
IO.File.Delete(tempFile) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:11:52.490

你真的最好写一个新文件。您可以写入临时文件，删除旧文件并将新文件重命名为旧文件。

就像是：

```
Imports System.IO

Module Module1

    Sub Main()
        Dim tempfile = Path.GetTempFileName()
        Dim inputFile = "C:\Temp\input.txt"

        Using sw = New StreamWriter(tempfile)
            Using MyReader As New Microsoft.VisualBasic.FileIO.TextFieldParser(inputFile)
                MyReader.TextFieldType = Microsoft.VisualBasic.FileIO.FieldType.Delimited
                MyReader.Delimiters = New String() {","}
                Dim currentRow As String()
                While Not MyReader.EndOfData
                    Try
                        currentRow = MyReader.ReadFields()
                        If currentRow.Count >= 2 Then
                            currentRow(1) = currentRow(1).Replace("ABC", "")
                        End If
                        sw.WriteLine(String.Join(",", currentRow))
                    Catch ex As Microsoft.VisualBasic.FileIO.MalformedLineException
                        MsgBox("Line " & ex.Message & " is invalid.  Skipping")
                    End Try
                End While
            End Using
        End Using

        File.Delete(inputFile)
        File.Move(tempfile, inputFile)

    End Sub

End Module 
```

[（基本上从http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.readfields.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.readfields.aspx)复制 TextFieldParser 示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:18:53.743

您可以使用 ADO 连接到 CSV 文件。请参阅此处了解更多信息：

[如何将 CSV 文件读入 .NET 数据表](https://stackoverflow.com/questions/1050112/how-to-read-a-csv-file-into-a-net-datatable)

但是，我建议将其加载到数组中，然后使用简单的文件 IO 方法将其写回。它只是少了很多代码和开销：

```
For Each row As String In File.ReadAllLines("C:\test.csv")
    For Each column As String In row.Split(New String() {","}, StringSplitOptions.None)
        ' Do work
    Next
Next 
```

然后像这样保存文件：

```
File.WriteAllLines(rows) 
```

# matlab - GUI中的累积数据

> ID：11056008
> 
> 赞同：1
> 
> 时间：2012-06-15T18:09:21.403
> 
> 标签：matlab, sum

我有一个从matlab的分析判别产生的数据类型单元格，我想在GUI中使用它。

分析判别的结果我们可以这样说：如果我有图片然后我使用图像处理，那么我可以这样说每个对象：

```
A : 'good'
B : 'bad'
C : 'good'
D : 'bad'
E : 'good' 
```

首先，我如何计算有多少“好”和多少“坏”？

第二，当我浏览另一张图片时，如何从图1和图2中累积“好”和“坏”的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:24:55.000

您的问题不是很清楚...要回答第一部分，请使用 TABULATE：

```
>> ratings = {'good','bad','good','bad','good'};
>> tabulate(ratings)
  Value    Count   Percent
   good        3     60.00%
    bad        2     40.00% 
```

# c++ - Linux 堆栈跟踪转储

> ID：11056013
> 
> 赞同：0
> 
> 时间：2012-06-15T18:09:39.670
> 
> 标签：c++, g++

我正在编写一个程序，并在执行过程中的某个时刻崩溃并打印此堆栈跟踪：

```
pure virtual method called
terminate called without an active exception
0  prog            0x08f04a98
1  prog            0x08f05147
2                  0xb7802400 __kernel_sigreturn + 0
3  libc.so.6       0xb758fbb2 abort + 386
4  libstdc++.so.6  0xb778653f __gnu_cxx::__verbose_terminate_handler() + 335
5  libstdc++.so.6  0xb7784405
6  libstdc++.so.6  0xb7784442
7  libstdc++.so.6  0xb77850f5
8  prog            0x08f2cb1f proj::raw_ostream::write(char const*, unsigned int) + 159
9  prog            0x081df8fe
10 prog            0x081d079b
11 prog            0x08e8ac02 proj::Value::~Value() + 130
12 prog            0x082749ad
13 prog            0x08e1cd62 proj::Tiny::~Tiny() + 178
14 prog            0x08e1fc86 proj::Alloca::~Alloca() + 38
15 prog            0x08e252ac proj::Alloca::~Alloca() + 44
16 prog            0x088e9bbc
17 prog            0x088e9b64
18 prog            0x08d3782e
19 prog            0x08d36a46
20 prog            0x08d34e95 proj::Medium::~Medium() + 485
21 prog            0x08d34c9c proj::Medium::~Medium() + 44
22 prog            0x08d3753c
23 prog            0x08d36da4
24 prog            0x08d350ed proj::Medium::eraseFromParent() + 109
25 prog            0x08dc780d proj::Big::dropAllReferences() + 253
26 prog            0x08e530b9 proj::Module::dropAllReferences() + 137
27 prog            0x08e52ea0 proj::Module::~Module() + 64
28 prog            0x08c602cb proj::Engine::~Engine() + 155
29 prog            0x08743e00 proj::Controller::~Controller() + 192
30 prog            0x08743d2c proj::Controller::~Controller() + 44
31 prog            0x081cdee9
32 libc.so.6       0xb75912df
33 libc.so.6       0xb759134f
34 libc.so.6       0xb7578cae __libc_start_main + 238
35 prog            0x081cc501 
```

第三列的地址是什么？我猜它们是函数地址，但它们是吗？似乎在某个时候正在调用一些虚函数，我怎么知道正在调用什么虚函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:18:31.590

第三列是堆栈中记录的程序计数器，因此它将是代码地址。

你需要看看你是否在你的析构函数中调用了纯虚函数；最有可能`proj::Value::~Value()`是调用一个纯 in 的虚拟`proj::Value`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:19:13.930

是的，它们是函数地址。如果您有该转储的相应核心文件，并且已使用调试符号进行编译，则可以在 中加载核心和可执行文件`gdb`，并使用命令`list *<address>`。它将显示与该地址对应的代码行。

没有看到任何代码，我猜想`write`是`raw_ostream`一个虚拟方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:19:47.750

第三列是在函数堆栈上执行的实际内存地址（应该等于第四列，它给出了从命名函数开头的偏移量）。

函数堆栈显示为越来越大：前面显示的行在调用堆栈中嵌套得更深。换句话说：你`main`的靠近列表的底部

虚函数调用自`proj::Value::~Value()`，调用`proj::raw_ostream::write(char const*, unsigned int)`，导致异常

# c++ - 如何将 std::set 的元素添加到另一个非空集？

> ID：11056017
> 
> 赞同：3
> 
> 时间：2012-06-15T18:09:42.527
> 
> 标签：c++

```
 set<int> A, B;
  for (int i = 0; i < 100; i++) A.insert(i);
  for (int i = 50; i < 150; i++) B.insert(i); 
```

如何将集合的元素添加`B`到集合中`A`？
换句话说，如何实现`A`= Union( `A`, `B`)？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T18:14:22.727

默认情况下，集合仅是唯一值并已排序，因此插入迭代器范围应该可以工作：

```
A.insert(B.begin(), B.end()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T18:13:00.540

```
A.insert(B.begin(), B.end());      // done 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T18:13:09.717

您可以使用另一个重载，`insert`其中需要一对迭代器：

```
A.insert(B.begin(), B.end()); 
```

上面的代码将元素（其中**不**存在`A`）从复制`B`到`A`（这意味着您不需要手动处理重复项）。

看看`insert`这里的所有重载：

*   [std::set::insert 的所有重载](http://en.cppreference.com/w/cpp/container/set/insert)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-15T18:14:05.990

采用

```
template <class InputIterator>
void std::set::insert( InputIterator first, InputIterator last ); 
```

# iphone - 无法加载笔尖错误消息

> ID：11056018
> 
> 赞同：1
> 
> 时间：2012-06-15T18:09:50.353
> 
> 标签：iphone, objective-c, ios, ipad

我收到一条非常烦人的错误消息：

'无法在包中加载NIB：'NSBundle（已加载）'，名称为'SingleStoryViewController''

知道为什么吗？SingleStoryViewController nib 在项目中可用。

我不确定要发布哪个代码，但这就是我所拥有的：

```
if ([viewType isEqualToString:kSingleStoryView]){
                viewController = [[SingleStoryViewController alloc] initWithNibName:@"SingleStoryViewController" bundle:nil];
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:51:20.667

请检查以下几点：

1) 您正确拼写了 nib 文件名。

2) 您已将“SingleStoryViewController”指定为 nib 文件中文件所有者对象的父类。

3) 您已将 nib 文件中的视图插座连接到 UIView。

如果有任何疑问，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:39:00.887

1.  NIB 的名称是否正是 SingleStoryViewController.xib
2.  是否标记为要复制到捆绑包
3.  是否在资源文件夹中
4.  打开 .app 包——它在那里吗？在资源文件夹中？

# ruby - render_to_string 来自另一个控制器的操作。

> ID：11056019
> 
> 赞同：1
> 
> 时间：2012-06-15T18:09:53.553
> 
> 标签：ruby, ruby-on-rails-3

我用了：

```
render_to_string(:controller=>:controllerName,:action=>:actionName) 
```

但这只会给我页眉和页脚的内容，而不是该特定页面的实际内容。

还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:32:53.200

我用过

```
@var = render_to_string(:file => "view_folder/index", :layout => false).to_json 
```

从render_to_string获取数据，它工作正常..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-28T02:51:22.780

`@var = render_to_string(:template => "controller/action", :layout => false)`

# android - 在不使用 Intent 的情况下切换活动

> ID：11056020
> 
> 赞同：3
> 
> 时间：2012-06-15T18:09:54.443
> 
> 标签：android, android-intent, singleton

我正在做一个项目，并让我的活动通过 Intents 相互传递信息。但是，我最近决定切换并使用 Singleton 方法，并有一个 Application 类来保存我的所有数据。

我现在有点困惑：我如何在没有 Intents 的情况下开始我的活动？这是我换手机前的电话...

```
 public boolean onOptionsItemSelected( MenuItem item ) {
    switch( item.getItemId() ) {
    case R.id.connect:
        startActivityForResult( new Intent( this, DeviceList.class ), REQUEST_CONNECT_DEVICE  );
        return true; 
```

在不使用意图的情况下，我将如何更改它以启动 DeviceList 类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T18:15:26.923

你没有。使用意图开始您的活动。这就是Android的设计方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T18:58:07.310

是的你可以。首先，您需要扩展[`ActivityGroup`](http://developer.android.com/reference/android/app/ActivityGroup.html)

```
public class Activity1 extends ActivityGroup 
```

然后，您需要在该类中创建一个方法来替换内容视图，在本例中为`Activity1`

```
public void replaceContentView(String id, Intent newIntent) {
    View view = getLocalActivityManager().startActivity(id,newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)) .getDecorView(); 
    setContentView(view);   
} 
```

当你想从 Activity1 启动 Activity2 时，

```
Intent activity2 = new Intent(this, Activity2.class);
replaceContentView(Activity2.class.getName(), activity2 ); 
```

您甚至可以从 Activity2 启动 Activity3

```
Intent activity3 = new Intent(getParent().getApplicationContext(), Activity3.class);
Activity1 parent = (activity3 ) getParent();
parent.replaceContentView(Activity3.class.getName(), activity3 ); 
```

希望这可以帮助

PS：你可以参考[这个链接](http://www.gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:25:50.967

在两个活动之间传递数据不仅是意图的滚动。它还传递了其他必须要求的信息，这是创建活动（如`Context`包信息等 ）所必须的

根据[链接的定义](http://developer.android.com/reference/android/content/Intent.html)

意图是 a `bstract description of an operation to be performed`。

# html - CSS 下拉菜单淡入淡出过渡和显示

> ID：11056030
> 
> 赞同：-1
> 
> 时间：2012-06-15T18:10:52.727
> 
> 标签：html, css, menu, fading

我一直在做我的功课，看来你不能在你正在使用的地方使用 CSS 过渡效果`display:none;`等等`display:inline;`。

我想在我的 CSS 下拉菜单中添加悬停时的淡入和淡出，使其看起来更干净。使用我发现的显示元素时这是不可能的。

我尝试`display`从我的 CSS 中删除，但是当我这样做时，元素就在那里（尽管不可见）并且当你将鼠标悬停在它上面时会淡入。我阅读了添加“指针事件：无”的建议；对此，这不是跨浏览器兼容的。如果您再次将鼠标移到它上面，它还会导致褪色元素闪烁。

我还使用了 CSS 关键帧动画建议在使用显示元素时淡入，但是当鼠标离开时无法让它淡出。:(

我知道这是可能的，因为我在许多网站上都看到过它，但我无法让它适合我的工作。

这是我的代码：

[http://pastebin.com/zVQapUNz](http://pastebin.com/zVQapUNz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:33:23.460

我已经在 jsfiddle.net 中编写了您的代码

[http://jsfiddle.net/3PD7D/1/](http://jsfiddle.net/3PD7D/1/)

当鼠标移到它上面时这确实有效，您可以使用相同的概念来更改不透明度

```
from {opacity:1;}
to {opacity:0;} 
```

隐藏菜单。但是，这将使其透明，后面的任何东西都是可见的，但不可点击。如果将 display:none 添加到结束动画帧，我还没有尝试过会发生什么。

# flex-lexer - 在 flex 中切换 lex 状态？

> ID：11056031
> 
> 赞同：0
> 
> 时间：2012-06-15T18:10:56.750
> 
> 标签：flex-lexer

有人可以指点我参考，或者发布一个关于如何在 flex 中切换词汇状态的简短示例？一个快速的谷歌搜索并没有给我太多的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:45:57.523

我认为你想要切换的灵活流行语是[“开始条件”。](http://westes.github.io/flex/manual/Start-Conditions.html)[`BEGIN`](http://westes.github.io/flex/manual/Actions.html#index-BEGIN)您可以使用和 切换开始条件`yy_push_state()`。

# r - 尝试将 ggplot2 图表包含在 Rook 中的错误消息

> ID：11056032
> 
> 赞同：1
> 
> 时间：2012-06-15T18:10:58.390
> 
> 标签：r, ggplot2, r-rook-package

以下代码用于`Rook`构建一个非常简单的 web 应用程序，用于绘制使用`ggplot2`. 它遵循与Jeff Horner的[原始示例](http://www.road2stat.com/cn/r_language/rook.html)相同的模式。

执行脚本时我在 RStudio 中收到的错误消息是：

```
Warning Message: In Multipart$parse(env) : bad content body 
```

有什么想法会出错并丢失网页的图像吗？

（更新为分配`my.plot <- ggplot`）

（更新为包括`ggplot(plot=my.plot, ...)`）

```
require(Rook)  # for web functionality
require(ggplot2)  # for graphing
require(tseries) # used to grab time series from yahoo for stock symbols
require(plyr) # data tweaks

# define the web page form
newapp = function(env) {
  req = Rook::Request$new(env)
  res = Rook::Response$new()
  res$write('What stock ticker would you like to see:\n')
  res$write('<BR/>')
  res$write('Stock Symbol:\n')
  res$write('<form method="POST">\n')
  res$write('<input type="text" name="stock.symbol" value="AAPL">      \n')
  res$write('<form method="POST">\n')
  res$write('<input type="radio" name="day.window" value="30">30 Days \n')
  res$write('<input type="radio" name="day.window" value="60" checked>60 Days \n')
  res$write('<input type="radio" name="day.window" value="90">90 Days \n')
  res$write('<input type="submit" name="Go!">\n</form>\n<br>')
  myNormalize = function (target) {
    return((target - min(target))/(max(target) - min(target)))
  }

  if (!is.null(req$POST())) {
    stock.symbol <- req$POST()[["stock.symbol"]]
    day.window <- req$POST()[["day.window"]]

    # get the stock data as a data frame
    df <- as.data.frame(get.hist.quote(stock.symbol,start=as.character(Sys.Date() -  as.numeric(day.window)),quote=c("Open", "High", "Low", "Close")))

    # add an average and the top/bottom for the candle
    df <- mutate(df, Average =(High + Low + Close)/3, Bottom = pmin(Open, Close), Top = pmax(Open, Close), Open.to.Close = ifelse(sign(Open - Close) == 1,'Increase','Decrease'), Date = row.names(df), Date.Label = ifelse(weekdays(as.Date(row.names(df))) == 'Friday',row.names(df),'')) # this gets the date from row.names into a column

    # create a box plot
    my.plot <- ggplot(data=df, aes(x=Date, lower=Bottom, upper=Top, middle=Average,  ymin=Low,  ymax=High, color=Open.to.Close, fill=Open.to.Close), xlab='Date', ylab='Price') +
    geom_boxplot(stat='identity') +
    # add the line for average price from HCL
    geom_line(data=df, aes(x=Date,y=Average, group=0), color='black') +
    # tweak the labeling
    opts(axis.text.x = theme_text(angle=270), legend.position = 'top', legend.direction='horizontal') +
    scale_x_discrete(labels=df$Date.Label)
    ggsave(plot=my.plot, paste("/tmp/pic", stock.symbol, day.window, ".png", sep = ""))

    res$write(paste(day.window,' days stock price trend for ',stock.symbol,'<BR/>', sep=''))
    res$write(paste("<img src='", s$full_url("pic"), stock.symbol, day.window, ".png'", " />", sep = ""))
  }
  res$finish()
}
s = Rhttpd$new()
s$add(app = newapp, name = "visbin")
s$add(app = File$new("/tmp"), name = "pic")
s$start()
s$browse("visbin") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:47:50.827

`pic`经过多次试验和错误，我已经解决了这个问题，方法是在脚本的同一级别设置一个名为的目录`R`并将图像保存到其中，然后从该位置检索图表。我不确定问题是`/tmp`目录上的权限问题还是只是`img src`属性构造方式的结果，但无论如何下面的解决方案都没有这些问题。

## 结果截图

![股价走势图检索截图](../Images/69cc0a50e018c2fe643bf3527977d3ee.png)

## 编码

虽然下面的代码有效，`Warning`但内容仍然出现，但它似乎并没有阻止脚本工作，仍然允许连续进行新的查询，并查看新的图像。

```
library(Rook) # for web functionality
library(ggplot2) # for graphing
library(tseries) # used to grab time series from yahoo for stock symbols
library(plyr) # data tweaks

PIC.DIR = paste(getwd(), 'pic', sep='/')

# define the web page form
newapp = function(env) {
    req = Rook::Request$new(env)
    res = Rook::Response$new()

    if (!is.null(req$POST())) {
        stock.symbol <- req$POST()[["stock.symbol"]]
        day.window <- req$POST()[["day.window"]]
    } else {
        stock.symbol <- 'AAPL'
        day.window <- 60
    }
    res$write('What stock ticker would you like to see:\n')
    res$write('<BR/>')
    res$write('Stock Symbol:\n')
    res$write('<form method="POST">\n')
    stock.input <- paste('<input type="text" name="stock.symbol" value="',
                         stock.symbol,
                         '">\n', sep='')
    res$write( stock.input ) 
    res$write('<form method="POST">\n')
    res$write('<input type="radio" name="day.window" value="30">30 Days \n')
    res$write('<input type="radio" name="day.window" value="60" checked>60 Days \n')
    res$write('<input type="radio" name="day.window" value="90">90 Days \n')
    res$write('<input type="submit" name="Go!">\n</form>\n<br>')
    myNormalize = function (target) {
        return((target - min(target))/(max(target) - min(target)))
    }

    if (!is.null(req$POST())) {
        # get the stock data as a data frame
        df <- as.data.frame(get.hist.quote(stock.symbol,start=as.character(Sys.Date() -  as.numeric(day.window)),quote=c("Open", "High", "Low", "Close")))

        # add an average and the top/bottom for the candle
        df <- mutate(df, Average =(High + Low + Close)/3, Bottom = pmin(Open, Close), Top = pmax(Open, Close), Open.to.Close = ifelse(sign(Open - Close) == 1,'Increase','Decrease'), Date = row.names(df), Date.Label = ifelse(weekdays(as.Date(row.names(df))) == 'Friday',row.names(df),'')) # this gets the date from row.names into a column

        # create a box plot
        my.plot <- ggplot(data=df, aes(x=Date, lower=Bottom, upper=Top, middle=Average,  ymin=Low,  ymax=High, color=Open.to.Close, fill=Open.to.Close), xlab='Date', ylab='Price') +
            geom_boxplot(stat='identity') +
            # add the line for average price from HCL
            geom_line(data=df, aes(x=Date,y=Average, group=0), color='black') +
            # tweak the labeling
            opts(axis.text.x = theme_text(angle=270), legend.position = 'top', legend.direction='horizontal') +
            scale_x_discrete(labels=df$Date.Label)
        ggsave(plot=my.plot, paste(PIC.DIR, "/pic", stock.symbol, day.window, ".png", sep = ""))

        res$write(paste(day.window,' days stock price trend for ',stock.symbol,'<BR/>', sep=''))
        res$write(paste("<img src='", 
                        s$full_url("pic"), 
                        '/pic', stock.symbol, day.window, ".png'", 
                        "width='650 px' height='650 px' />", sep = ""))
    }
    res$finish()
}
s = Rhttpd$new()
s$add(app = newapp, name = "visbin")
s$add(app = File$new(PIC.DIR), name = "pic")
s$start()
s$browse("visbin") 
```

我希望这会有所帮助，也许有人可以弄清楚警告的含义。我的理论是，它与`Rook`被拉出的 HTML 无效的事实或事实有关。既然解决了核心问题，我就莫名失去了追逐那些理论的精力……

# php - 使用 php 创建和下载文本文件

> ID：11056033
> 
> 赞同：3
> 
> 时间：2012-06-15T18:11:01.140
> 
> 标签：php, download, createfile

这就是我想要做的。我有一系列报告，他们也希望能够以逗号分隔的文本文件的形式下载。我已经阅读了很多页面，人们说只是简单地回显结果而不是创建文件，但是当我尝试它只是输出到他们所在的页面时。

我在每份报告中都有这个

```
Export File<input type="checkbox" name="export" value="1" /> 
```

所以在帖子上我可以检查他们是否正在尝试导出文件。如果他们是我试图这样做：

```
if($_POST['export'] == '1')
{
    $filename = date("Instructors by DOB - ".$month) . '.txt';

    $content = "";

    # Titlte of the CSV
    $content = "Name,Address,City,State,Zip,DOB\n";

    for($i=0;$i<count($instructors);$i++)
        $content .= ""; //fill content

    fwrite($filename, $content);

    header("Cache-Control: public");
    header("Content-Description: File Transfer");
    header("Content-Length: ". filesize("$filename").";");
    header("Content-Disposition: attachment; filename=$filename");
    header("Content-Type: application/octet-stream; "); 
    header("Content-Transfer-Encoding: binary");

    readfile($filename);
} 
```

基本上页面刷新，但没有文件被推送下载。谁能指出我错过了什么？

**编辑** 我想我并不完全清楚。这不是在仅创建和下载文件的页面上，而是在也显示报告的页面上。所以当我放一个 exit(); 在读取文件之后，页面的其余部分加载为空白。我还需要在此页面上显示报告。我认为这也可能与为什么它不下载有关，因为这个页面已经发送了标题信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T18:23:24.840

在要求您尝试关闭文件之前，我忽略了您写出内容的方式。

在此处查看 fwrite 手册：http: [//php.net/manual/en/function.fwrite.php](http://php.net/manual/en/function.fwrite.php)

你需要做的是：

```
$filename = "yourfile.txt";
#...
$f = fopen($filename, 'w');
fwrite($f, $content);
fclose($f); 
```

关闭文件后，您现在可以安全地发送它以供下载。

```
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Length: ". filesize("$filename").";");
header("Content-Disposition: attachment; filename=$filename");
header("Content-Type: application/octet-stream; "); 
header("Content-Transfer-Encoding: binary");

readfile($filename); 
```

有几件事：

*   您真的不需要将内容类型设置为`application/octet-stream`. 为什么不将更真实的类型设置为`text/plain`？
*   我真的不明白你想如何使用日期功能。请参阅此处的手册：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)
*   正如@nickb 正确指出的那样，您必须在完成后退出脚本`readfile(..)`

# php - ini_set('memory_limit', '512M'); 之后的内部服务器错误

> ID：11056035
> 
> 赞同：0
> 
> 时间：2012-06-15T18:11:02.387
> 
> 标签：php

用 php 设置 memory_limit 后，我​​总是收到 500 内部服务器错误。我不知道为什么，但如果我不这样做，我的脚本会给我

`Fatal error: Allowed memory size of X bytes exhausted (tried to allocate Y bytes)`

任何想法如何解决这个问题？

我正在使用的脚本是圆角图像（透明角）

```
<?php

function imageCreateCorners($sourceImageFile, $radius) {
    # test source image
    if (file_exists($sourceImageFile)) {
      $res = is_array($info = getimagesize($sourceImageFile));
      } 
    else $res = false;

    # open image
    if ($res) {
      $w = $info[0];
      $h = $info[1];
      switch ($info['mime']) {
        case 'image/jpeg': $src = imagecreatefromjpeg($sourceImageFile);
          break;
        case 'image/gif': $src = imagecreatefromgif($sourceImageFile);
          break;
        case 'image/png': $src = imagecreatefrompng($sourceImageFile);
          break;
        default: 
          $res = false;
        }
      }

    # create corners
    if ($res) {

      $q = 10; # change this if you want
      $radius *= $q;

      # find unique color
      do {
        $r = rand(0, 255);
        $g = rand(0, 255);
        $b = rand(0, 255);
        }
      while (imagecolorexact($src, $r, $g, $b) < 0);

      $nw = $w*$q;
      $nh = $h*$q;

      $img = imagecreatetruecolor($nw, $nh);
      $alphacolor = imagecolorallocatealpha($img, $r, $g, $b, 127);
      imagealphablending($img, false);
      imagesavealpha($img, true);
      imagefilledrectangle($img, 0, 0, $nw, $nh, $alphacolor);

      imagefill($img, 0, 0, $alphacolor);
      imagecopyresampled($img, $src, 0, 0, 0, 0, $nw, $nh, $w, $h);

      imagearc($img, $radius-1, $radius-1, $radius*2, $radius*2, 180, 270, $alphacolor);
      imagefilltoborder($img, 0, 0, $alphacolor, $alphacolor);
      imagearc($img, $nw-$radius, $radius-1, $radius*2, $radius*2, 270, 0, $alphacolor);
      imagefilltoborder($img, $nw-1, 0, $alphacolor, $alphacolor);
      imagearc($img, $radius-1, $nh-$radius, $radius*2, $radius*2, 90, 180, $alphacolor);
      imagefilltoborder($img, 0, $nh-1, $alphacolor, $alphacolor);
      imagearc($img, $nw-$radius, $nh-$radius, $radius*2, $radius*2, 0, 90, $alphacolor);
      imagefilltoborder($img, $nw-1, $nh-1, $alphacolor, $alphacolor);
      imagealphablending($img, true);
      imagecolortransparent($img, $alphacolor);

      # resize image down
      $dest = imagecreatetruecolor($w, $h);
      imagealphablending($dest, false);
      imagesavealpha($dest, true);
      imagefilledrectangle($dest, 0, 0, $w, $h, $alphacolor);
      imagecopyresampled($dest, $img, 0, 0, 0, 0, $w, $h, $nw, $nh);

      # output image
      $res = $dest;
      imagedestroy($src);
      imagedestroy($img);
      }

    return $res;
}

imagepng(imageCreateCorners('img.jpg', 13), 'test.png');
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:12:33.940

您正在尝试分配过多的内存。尝试将其切成两半，直到您停止出现服务器错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T22:23:01.563

我同意@DaveRandom 我在 10 时遇到了与 $q 相同的错误，当我放置一个 1024x768 图像时，它试图创建 10240x7680，它等于一个大小为 78 兆像素的图像，RGB 几乎变成了 240MB

当我将 $q 设置为 1 时，代码运行良好，生成的图像可以很好地切角。

# silverlight - 在 Silverlight 中，如何使 TextChanged 发生在 TextBox 的复制/粘贴中？

> ID：11056039
> 
> 赞同：1
> 
> 时间：2012-06-15T18:11:19.013
> 
> 标签：silverlight, silverlight-4.0

对于 silverlight 控件 TextBox，当复制/粘贴 TextBox Text 属性的内容时，TextChanged 事件不会发生。

如何使粘贴与在 TextBox 中键入文本相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:30:14.537

抱歉，我无法重现此内容。

我使用了以下 XAML

```
<StackPanel>
    <TextBox TextChanged="TextBox_TextChanged" />
    <TextBlock x:Name="tbk" />
</StackPanel> 
```

和以下事件处理程序

```
 private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        tbk.Text += "X";
    } 
```

每次我在 TextBox 中输入或粘贴文本时，TextBlock 都会获得另一个`X`.

# php - 用于保存分数的 PHP SQL 数据库

> ID：11056040
> 
> 赞同：0
> 
> 时间：2012-06-15T18:11:20.607
> 
> 标签：php, sql, database

我有一个分数数据库设置，每个分数都是 100 分，我需要能够保存多个值并输出它以便用户可以看到它。但是我不知道如何保存分数；我对php的了解有限，我只知道如何保存一个值。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:34:20.970

在这种情况下，一个好的做法是有 2 个表：一个用于名称，一个用于分数。然后将它们与连接表相关联。这样，您的数据库就会“标准化”，并且只要“John”多次输入他的“95”分数，就不会出现重复数据。您的两个表将需要一个 ID 字段（ID、Name）和（ID、Score），第三个表称为“Names_Scores”（Name_ID、Score_ID）。然后使用加入查询来匹配什么 Name ID 和什么 Score ID，并在用户登录时列出它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:03:16.497

使用 PHP，您需要与数据库建立连接，然后对所需数据发起 SQL（或 MySQL）调用，并将检索到的数据放入您可以在其他地方使用的变量/数组中，然后关闭连接。

例子：

```
<?php
$con = mysql_connect("[hostname]", "[username]", "[password]");
mysql_select_db("db_name") or die(mysql_error());

$result = mysql_query("SELECT Users.UID, Users.Name, Scores.Score FROM Users, Scores WHERE Users.UID = Scores.UID GROUP BY Users.UID, Scores.Score") or die(mysql_error());

echo $result;

mysql_close($con);
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T19:23:54.797

根据您的评论，我认为您可以通过以下方式解决：

```
 mysql_query("INSERT INTO scores(name, score) VALUES ('John', 100),('John', 75),('Bob', 68)"); 
```

或者

```
 mysql_query("INSERT INTO scores(name, score) VALUES ('John', 100)");
 mysql_query("INSERT INTO scores(name, score) VALUES ('John', 75)");
 mysql_query("INSERT INTO scores(name, score) VALUES ('Bob', 68)"); 
```

如果你想要一个特定的用户分数，你可以这样做：

```
 mysql_query("SELECT score FROM scores WHERE name='John'"); 
```

如果您想要用户列表：

```
 mysql_query("SELECT name FROM scores GROUP BY name"); 
```

# asp.net - 使用框架使用 ASP.NET 进行开发

> ID：11056042
> 
> 赞同：3
> 
> 时间：2012-06-15T18:05:47.910
> 
> 标签：asp.net, .net, asp.net-mvc

我作为一名 PHP 开发人员已经工作了 4 年，目前正在转移到 ASP.NET（因为我也有 4 年的 C# 经验，并且由于特定条件而选择了 PHP - 现在我希望使用我的 C# 知识和.NET Framework 令人印象深刻）。

使用 PHP 开发时，我总是使用框架 - 或者我自己编写的东西（我正在作为软件架构师工作......）或 Zend Framework / Yii 等 - 原因是 PHP 中缺少类、工具和 OOP （如MVC、ACL、Cache等）

在使用 ASP.NET MVC 3 时，我看到结合 MVC 框架和通用 .NET 框架我有很多工具，这里是我的观点：在 ASP.NET 中开发时，是否需要使用除 .NET 之外的任何其他框架。网？（就像在 PHP 中我使用 Zend 一样）。如果是这样，有什么推荐的框架吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:54:24.393

在 .Net 世界中，您面前有很多选择。见下文受欢迎的供应商；

```
www.devexpress.com
www.telerik.com
www.comonentone.com
www.infragistics.com 
```

但大多数时候，asp.net 本身就是完美的。当你在谈论 mvc3 时。您可以使用其他视图引擎而不是使用 Razor（默认的），例如 spark。所以，我的意思是 asp.net 本身可以根据您的需要进行扩展。当您使用 mvc3 时，您最好选择哪个实体框架。这个框架有很多支持。祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T19:03:00.657

Yes, there are other frameworks that you can choose to use alongside .NET MVC - but I myself haven't chosen to utilize them in any recent projects. Here are a few examples aside from what others have already pointed out:

*   [http://www.springframework.net/](http://www.springframework.net/)
*   [http://sparkviewengine.com/](http://sparkviewengine.com/)

That said, while I don't personally use frameworks like I mentioned above here in no particular order are a few tools that I have found that I have come to rely on while developing applications within ASP.net MVC:

*   [Fluent Nhibernate](http://www.fluentnhibernate.org/) - If you choose to use Nhibernate as your ORM
*   [Ninject](http://www.ninject.org/) - Dependency Injector
*   [AutoMapper](http://automapper.org/) - object - object mapper
*   [ELMAH](http://code.google.com/p/elmah/) - error logging facility
*   [lg4net](http://logging.apache.org/log4net/) - logging etc

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T18:47:31.930

查看 Telerik [http://www.telerik.com/](http://www.telerik.com/)他们有一些很棒的工具，比如他们的 RadGrids 和特定的输入文本框，一旦你习惯了这些工具，它们会节省大量时间并增加更多的灵活性。绝对值得一看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T19:41:47.650

没有 THE 框架拥有您通常需要的一切。但是可用的工具数量是巨大的！我们使用 asp.net 4.0，但我们选择 DevExpress 控件来获得漂亮的外观和感觉以及功能，而这将花费我自己构建。

在过去的 10 年中，我们与几乎所有的组件制造商合作，但 DevExpress 是我们最喜欢的，原因很简单。超快速的支持！我同意上述关于 Infragistics 非常令人失望的支持的评论！

但同样，那些供应商或其他社区框架也让我们的生活更加简单。THE 框架本身可以解决核心库中的几乎所有问题。

祝你好运再次切换到我最喜欢的语言 C#！

# c# - 如何识别线程是否已中止或完成

> ID：11056049
> 
> 赞同：0
> 
> 时间：2012-06-15T18:11:57.363
> 
> 标签：c#, .net, multithreading

在中止和完成的情况下，`ThreadState`将是`Stopped`.

如何区分它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:24:36.270

你原来的断言是不正确的。考虑：

```
public static void TestThreadAbort()
{
    var t = new Thread(() => Thread.Sleep(50000));
    t.Start();
    t.Abort();
    Thread.Sleep(50);
    // Prints "Aborted"
    Console.WriteLine(t.ThreadState);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:35:48.953

注意`ThreadState`枚举是如何声明的：

```
[FlagsAttribute]
public enum ThreadState { ... } 
```

...因为它是一个`[Flag]`这意味着一个线程可以处于多个状态。

[MSDN，ThreadState Enumeration](http://msdn.microsoft.com/en-us/library/system.threading.threadstate.aspx)（重点由我添加）：

> ThreadState 为线程定义了一组所有可能的执行状态。创建线程后，它至少处于其中一种状态，直到终止。在公共语言运行库中创建的线程最初处于未启动状态，而进入运行库的外部线程已经处于运行状态。Unstarted 线程通过调用 Start 转换为 Running 状态。**并非所有 ThreadState 值的组合都是有效的；例如，一个线程不能同时处于 Aborted 和 Unstarted 状态**。

...然后继续说：

> **一个线程在给定时间可以处于多个状态。**例如，如果一个线程在调用 Wait 时被阻塞，而另一个线程在被阻塞的线程上调用 Abort，则被阻塞的线程将同时处于 WaitSleepJoin 和 AbortRequested 状态。在这种情况下，一旦线程从 Wait 调用返回或被中断，它将收到 ThreadAbortException 以开始中止。
> 
> 线程的 Thread.ThreadState 属性提供线程的当前状态。应用程序必须使用位掩码来确定线程是否正在运行。由于 Running 的值为零 (0)，因此使用 C# 代码测试线程是否正在运行，例如

```
(myThread.ThreadState & (ThreadState.Stopped | ThreadState.Unstarted)) == 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:14:57.517

我能想到的唯一方法是将“已完成”标志设置为线程中的最后一个操作。如果未设置该标志，您可以假设它已中止。正如@Chris Shain 在下面指出的那样，你必须小心你把它放在哪里，因为在线程中止的情况下，你会`ThreadAbortException`在你的线程中得到 a ，所以如果你把它放在`finally`子句中，它会得到即使在线程中止的情况下也设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:16:39.693

当一个线程被中止时。您在线程上获得 ThreadAbortException。这可以帮助您区分。

# c# - 在 WPF 中调用 Command 时从 CheckBox 获取 Checked 属性

> ID：11056050
> 
> 赞同：0
> 
> 时间：2012-06-15T18:11:57.237
> 
> 标签：c#, wpf, xaml

我在 WPF C# 项目中有一个复选框网格。每个 CheckBox 的`Command`属性都绑定到`CheckBoxChangedCommand`我的 WView.xaml 文件中的一个，如下所示：

```
<CheckBox Grid.Row="0" IsChecked="true" x:Name ="CheckBox0" 
          Command="{Binding CheckBoxChangedCommand}" />
<CheckBox Grid.Row="1" IsChecked="true" x:Name="CheckBox1" 
          Command="{Binding CheckBoxChangedCommand}" /> 
```

每次选中或未选中其中一个 CheckBox 时，我都会调用`CheckBoxChanged`. 我将如何显示一个弹出窗口，其中显示 1\. CheckBox 网格中的行号和 CheckBox 的名称（例如“CheckBox0”）和 2\. Checked 值（true/false）复选框？

我的 CheckBoxChangedCommand，在 WViewModel.cs 文件中，如下所示：

```
public ICommand CheckBoxChangedCommand
{
    get
    {
        return new RelayCommand(param =>
        {
            MessageBox.Show("CheckBoxChanged!"); 
        });
    }
} 
```

如何访问从内部`IsChecked`触发的 CheckBox 的属性和行号？如何将数据从我的视图传递到我的视图模型？`CheckBoxChanged``CheckBoxChanged`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:32:50.083

你肯定需要在这里做更多的绑定。

首先，您可能应该将 Checkboxes 的 IsChecked 属性绑定到视图模型上的属性。

其次，根据您关于需要知道已选中复选框的行号的评论，我想说您可能需要通过数据绑定生成包括 CheckBox 在内的“行”，以便您可以传递代表的对象该行作为 CheckBoxChangedCommand 的 CommandParameter。

所以像：

```
<ListBox ItemsSource="{Binding MyItems}" /> 
```

然后在您的资源中：

```
<DataTemplate DataType="{x:Type local:MyItemType}">
    <CheckBox IsChecked="{Binding IsChecked}" 
              Command="{Binding CheckChangedCommand}" 
              CommandParameter="{Binding}" />
</DataTemplate> 
```

*注意：您的 CheckChangedCommand 可能在主 ViewModel 上，而不是项目级 ViewModel，因此您可能需要执行一些其他类型的查找以使其找到它 - 这个示例只是为了简单起见*

# c# - 尾部斜线混淆 AJAX

> ID：11056051
> 
> 赞同：1
> 
> 时间：2012-06-15T18:12:01.747
> 
> 标签：c#, ajax

我有一个页面，上面有几个更新面板。该页面的网址是：http://[domainnamehere]/stores/

如果我省略斜杠，一切正常。如果我包含它，当页面执行异步回发时，它会转到 http://[domainnamehere]/stores/ **stores**

不知道为什么会这样，但它肯定是一个痛苦的屁股！任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:15:50.777

您的问题出在服务器端。您需要配置到资源的路由以接受尾部斜杠。如果您使用的是 MVC，您应该能够在该路由中添加一个斜杠，否则将需要在 IIS 级别重写 URL。

# asp.net-mvc - 在页面源中淘汰asp.net mvc viewmodel json

> ID：11056055
> 
> 赞同：2
> 
> 时间：2012-06-15T18:12:26.750
> 
> 标签：asp.net-mvc, json, knockout.js

在开始之前，我想明确说明我的代码工作正常，这更像是一个“一般最佳实践”问题。我正在使用 knockout.js 将我的 ASP.NET MVC2 模型加载到 Knockout 的 viewModel 中。

在我的 aspx 页面中，我有：

```
<script>
var model = <%= new JavaScriptSerializer().serialize(Model) %>; 
// the above line will display in my page's "View Source". Is this bad? slow? 
</script> 
```

然后在顶部的 JavaScript 包含文件中，我有：

```
$(document).ready(function() {
    var viewModel = new MyViewModel();
    ko.applyBindings(viewModel);

    viewModel.modelProp(model);
}); 
```

代码完全可以正常工作，但我担心的是 JSON 输出可以在 HTML 输出的浏览器的“查看源代码”选项中查看。我很好奇两件事：

1.  这是否也发生在 ASP.NET MVC3 中？我正在使用 ASP.NET MVC2，因此我不能使用 @Html.Raw(Json.Encode(Model)); -- 但是 MVC3 方法会导致同样的问题吗？

2.  这是我应该关心的事情吗？是安全问题吗？是性能问题吗？页面的源会更大，因为我将 JSON 输出到 JavaScript 变量中，不是吗？同样，也许这在 MVC3 中不是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:17:37.020

如果我没听错的话，如果您担心人们可以看到您的 json，那么您现在就想这样做。我不会担心这一点。事实上，他们不仅可以通过查看源代码来查看 json，还可以通过网络嗅探器（如 fiddler、httpwatch 或浏览器开发工具 (F12)）来查看它。我不确定您为什么关心 json 是否可见，因为一旦将数据绑定到 UI，它也会在那里。

附带说明一下，通过从 MVC 加载您的 KO 视图模型，这意味着您的视图模型只会在您发布时刷新其模型数据。如果您通过 ajax 调用加载它（可能是 MVC 操作，因为您使用 asp.net mvc），您可以避免该页面刷新。只是另一种选择。

# asp.net - Asp.Net MVC3，在 Linq 中更新查询

> ID：11056056
> 
> 赞同：0
> 
> 时间：2012-06-15T18:12:30.093
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, linq

我想知道如何以 Linq 方式运行此查询。

```
UPDATE orders SET shipDate = '6/15/2012' WHERE orderId IN ('123123','4986948','23947439') 
```

我的代码，

```
[HttpGet]
public void test()
{
    EFOrdersRepository ordersRepository = new EFOrdersRepository();
    var query = ordersRepository.Orders;

    // How to run this query in LINQ
    // Query : UPDATE orders SET shipDate = '6/15/2012' WHERE orderId IN ('123123','4986948','23947439')
} 
```

EFOrdersRepository.cs

```
public class EFOrdersRepository
{
    private EFMysqlContext context = new EFMysqlContext();

    public IQueryable<Order> Orders
    {
        get { return context.orders; }
    }
} 
```

EFMysqlContext.cs

```
class EFMysqlContext : DbContext
{
     public DbSet<Order> orders { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:24:34.830

实际上很容易检查以下代码

```
EFOrdersRepository db = new EFOrdersRepository();
int[] ids= new string[] { "123123", "4986948", "23947439"};
//this linq give's the orders with the numbers
List<Order> orders = db.Order().ToList()
                        .Where( x => ids.Contains(x.orderId.Contains));

foreach(var order in orders)
{
    order.ShipDate = '06/15/2012';
    db.Entry(usuario).State = EntityState.Modified;
}

  db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:23:46.473

像这样的东西应该可以工作（提前警告伪代码！！）

**编辑**我喜欢使用 Jorge 更好地检索订单的方法（使用包含），但将其留在这里作为另一种选择。但是，代码示例下方的陈述仍然适用。

```
[HttpGet]
    public void test()
    {
        EFOrdersRepository ordersRepository = new EFOrdersRepository();
        var query = ordersRepository.Orders.Where(x=>x.orderId == '123123' || 
x.orderId == '4986948' || x.orderId = '23947439').ToList();
            foreach(var order in query){
               var localOrder = order; 
               order.ShipDate = '06/15/2012';
            }
            ordersRepository.SaveChanges();
        } 
```

基本上，LINQ 不能很好地进行“批量更新”。您要么必须获取并循环遍历您的订单，要么编写一个存储过程，该过程可以采用一组 id 并以这种方式批量更新它们。如果你一次只做几个，上面的就可以了。如果您有大量订单需要更新，那么 ORM 可能不是最佳选择。我期待着看看其他人是否有更好的方法。

免责声明：该`var localOrder = order`行是为了确保没有[修改关闭问题](https://stackoverflow.com/questions/304258/access-to-modified-closure-2)。此外，ReSharper 和其他工具可能有一种不那么冗长的方式来编写上述内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:40:39.067

`SaveChanges`注意：您需要`DBContext`在最后打电话

简短的回答：

```
var f = new[] { 123123, 4986948, 23947439 };
var matchingOrders = orders.Where(x => f.Contains(x.ID)).ToList();
matchingOrders.ForEach(x => x.ShipDate = newDate); 
```

完整测试：

```
 // new date value
    var newDate = new DateTime(2012, 6, 15);
    // id's
    var f = new[] { 123123, 4986948, 23947439 };
    // simpulating the orders from the db
    var orders = Builder<Order2>.CreateListOfSize(10).Build().ToList();
    orders.Add(new Order2 { ID = 123123 });
    orders.Add(new Order2 { ID = 4986948 });
    orders.Add(new Order2 { ID = 23947439 });

    // selecting only the matching orders
    var matchingOrders = orders.Where(x => f.Contains(x.ID)).ToList();

    matchingOrders.ForEach(x => Console.WriteLine("ID: " +  x.ID + " Date: " + x.ShipDate.ToShortDateString()));
    // setting the new value to all the results
    matchingOrders.ForEach(x => x.ShipDate = newDate);
    matchingOrders.ForEach(x => Console.WriteLine("ID: " + x.ID + " Date: " + x.ShipDate.ToShortDateString())); 
```

输出：

```
ID: 123123 Date: 1/1/0001
ID: 4986948 Date: 1/1/0001
ID: 23947439 Date: 1/1/0001
ID: 123123 Date: 6/15/2012
ID: 4986948 Date: 6/15/2012
ID: 23947439 Date: 6/15/2012 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:28:37.887

在 ORM 中，您必须先获取记录对记录进行更改，然后再将其保存回来。为此，我将像这样向我的存储库添加一个 UpdateOrder 方法

```
public bool UpdateOrder(Order order)
{
   int result=false;
   int n=0;
   context.Orders.Attach(order);
   context.Entry(order).State=EntityState.Modified;
   try
   {
      n=context.SaveChanges();
      result=true;
   }
   catch (DbUpdateConcurrencyException ex)
   {
      ex.Entries.Single().Reload();
      n= context.SaveChanges();        
      result= true;
   }
  catch (Exception ex2) 
  {
    //log error or propogate to parent 
  }
  return result;
} 
```

我会像这样从我的 Action 方法中调用它

```
int orderId=123232;
var orders=ordersRepository.Orders.Where(x=> x.orderId.Contains(orderId)).ToList();
if(orders!=null)
{
   foreach(var order in orders)
   {
     order.ShipDate=DateTime.Parse('12/12/2012);
     var result= ordersRepository.UpdateOrder();     
   }
} 
```

在这种方法中，如果您必须更新许多记录，则您正在对数据库执行许多更新语句。在这种特殊情况下，我想使用该`Database.SqlQuery`方法仅使用一个查询来执行原始 SQL 语句

```
string yourQry="UPDATE orders SET shipDate = '6/15/2012' 
                     WHERE orderId IN ('123123','4986948','23947439')";
var reslt=context.Database.SqlQuery<int>(yourQry); 
```

# javascript - PHPJS' array_diff returns undefined

> ID：11056058
> 
> 赞同：0
> 
> 时间：2012-06-15T18:12:35.957
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, phpjs

**Example:**

> [http://jsfiddle.net/7Cwbn/60/](http://jsfiddle.net/7Cwbn/60/)

I'm trying to use `array_diff` function from **PHPJS** to check if all of the elements inside `selectedFeatures` are found inside `elem.features`, but instead I receive `undefined`. What gives?

```
$(markers.houses).each(function(index, elem) {
        //first filter by selected features
        console.log(array_diff(elem.features, selectedFeatures).length);
        if (array_diff(selectedFeatures, elem.features).length == 0) {
            if (!markers.houseMarkers[index].visible) {
                markers.houseMarkers[index].setVisible(true);
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:31:46.217

**Solution:**

Inside `array_diff()` definition change the `retVal` to equal `[]` instead of `{}`.

# jquery - 在 jQuery 中突出显示变量和关键字

> ID：11056059
> 
> 赞同：0
> 
> 时间：2012-06-15T18:12:36.690
> 
> 标签：jquery

我正在尝试使用 jQuery 突出显示代码片段中的变量和关键字。假设，我有一个这样的 java 片段，

```
public class abc { 
  public static void main(String args[]) { 
    int count = 0; 

}
} 
```

我对变量使用名为“变量”的按钮，对保留关键字使用“关键字”按钮。有什么方法吗？还是我应该使用正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:08:34.077

这是一个基于将段落中的一些html替换为的解决方案`id=test`

```
/* array of words to highlight */
var words = ['dummy', 'survived', 'desktop'];

$(function() {
    /* get html containing words to highlight*/    
    var wordsHtml = $('#test').html();
    $.each(words, function(idx, word) {
        var reg = new RegExp(word, 'g');
        /* replace word with a span containing word ,use css to "highlight" class*/
        wordsHtml = wordsHtml.replace(reg, '<span class="highlight">' + word + '</span>');
    });
    /* replace old html with new*/
    $('#test').html(wordsHtml);

}) 
```

演示：http: [//jsfiddle.net/pjBuY/](http://jsfiddle.net/pjBuY/)

# asp.net - Web 应用程序渲染方法？

> ID：11056060
> 
> 赞同：1
> 
> 时间：2012-06-15T18:12:40.513
> 
> 标签：asp.net, .net

我有一个站点渲染引擎（嗯……好吧，一个 CMS，还有更多……），效果非常好。然而，我开始认为我可以让它更有效率。

现在，整个应用程序通过一个 /Default.aspx 文件呈现网站，该文件接受路由值，并呈现正确的页面。

我想知道的是，如果我可以摆脱那一页，而改用 HttpHandler 或 HttpModule ，它会使初始加载更有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:46:59.410

果然！它将导致性能改进。基本上在 ASP.NET 页面生命周期中，IIS 无论如何都会调用 HTTPModule 和 HTTPHandlers 来确定文件的类型/extn，然后它会到达您的 Default.aspx。从那里你正在重定向。如果您可以直接从 Default.aspx 之上的层路由您的请求，它将提高应用程序的性能。顺便说一句，[这](http://www.codeproject.com/Articles/335968/Implementing-HTTPHandler-and-HTTPModule-in-ASP-NET)是我找到的一个很好的示例，希望你喜欢调整你的代码。

急切地等待你的结果...请分享

# javascript - 使用 Javascript RegExp 匹配“{CHARACTERS}”

> ID：11056061
> 
> 赞同：1
> 
> 时间：2012-06-15T18:12:42.787
> 
> 标签：javascript, regex, pattern-matching

尽管知道如何用 C# 和 PHP 等其他语言进行匹配，但我确实在 Javascript 版本的正则表达式匹配方面苦苦挣扎。

我希望匹配`{ANYCHARACTERS}`。

它必须有：

*   一`{`开始
*   `}`最后一个
*   之间有 1 个或多个字符（任何字符、符号等）

到目前为止，我有以下内容：

```
<script type="text/javascript">

// The string that I want to perform a match on
var str = "{ASTRINGINHERE£$%^&*éáó}";

// Mt Matching expression
var patt1 = ^/{(.*){1,*}/}$/i;

// Write the matched result
document.write(str.match(patt1));

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T18:16:01.980

如所写，您当前的模式应该会导致 javascript 语法错误。以下是我看到的问题：

*   您的`^`角色超出了实际的正则表达式。
*   您有两个正则表达式结束字符 ( `/`)。
*   请参阅@kopischke 关于我删除该`{1,}`部分的原因的回答。

这应该可以解决您的问题：

```
/^{(.+)}$/i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T18:21:00.563

字符串开始/字符串结束代码属于正则表达式。此外，您的重复代码过于复杂。最后，当您匹配任何字符时，无需指明大小写无关。这应该这样做：

```
patt1 = /^{.+}$/ 
```

# php - Magento - 在 Toplinks 中显示购物车图像而不是“我的购物车”？

> ID：11056062
> 
> 赞同：0
> 
> 时间：2012-06-15T18:12:51.367
> 
> 标签：php, css, magento

我正在尝试显示购物车图像而不是“我的购物车”-短语。购物车图像上方仅显示购物车中要显示的商品数量。

要更改文本，必须编辑 mage/checkout/block/links.php 和这部分：

```
public function addCartLink()
{
    $parentBlock = $this->getParentBlock();
    if ($parentBlock && Mage::helper('core')->isModuleOutputEnabled('Mage_Checkout')) {
        $count = $this->getSummaryQty() ? $this->getSummaryQty()
            : $this->helper('checkout/cart')->getSummaryCount();
        if ($count == 1) {
            $text = $this->__('My Cart (%s item)', $count);
        } elseif ($count > 0) {
            $text = $this->__('My Cart (%s items)', $count);
        } else {
            $text = $this->__('My Cart (0 items)');
        } 
```

至

```
public function addCartLink()
{
    $parentBlock = $this->getParentBlock();
    if ($parentBlock && Mage::helper('core')->isModuleOutputEnabled('Mage_Checkout')) {
        $count = $this->getSummaryQty() ? $this->getSummaryQty()
            : $this->helper('checkout/cart')->getSummaryCount();
        if ($count == 1) {
            $text = $this->__('</span></span>%s</span></span>', $count);
        } elseif ($count > 0) {
            $text = $this->__('<span><span>%s</span></span>', $count);
        } else {
            $text = $this->__('<span><span>0'</span></span>);
        } 
```

因此，现在商品编号显示在购物车图像的内部/上方。就像我想要的那样。问题是：通过将鼠标悬停在链接上，它现在显示项目编号前后的跨度跨度标签。

知道如何在那里更改链接标题吗？或者也许有更好的方法在顶部链接中显示购物车图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:52:24.970

在您在 Magento 源代码中引用的块下方，我看到了这一行：

```
$parentBlock->addLink($text, 'checkout/cart', $text, true, array(), 50, null, 'class="top-link-cart"'); 
```

尝试为 $text 给出的两个值提供不同的值 - 我敢打赌其中一个是链接的 HTML，另一个是工具提示文本。（您可能也应该使用`$this->__()`新文本，以保持一致性 - 尽管它不太可能产生任何影响，因为它的作用是允许 Magento 将该文本翻译成另一种语言。）然后您可以在 HTML 版本中使用跨度，而将它们排除在工具提示之外。

# java - 来自 HashMap 的 ListAdapter

> ID：11056063
> 
> 赞同：0
> 
> 时间：2012-06-15T18:12:56.827
> 
> 标签：java, android, xml

我正在尝试获取 HashMaps 的 ArrayList 以尝试获取有效的 ListAdapter。当我运行这个时，我得到一个

```
java.lang.RuntimeException: Your content must have a ListView whose id attribute is android.R.id.list 
```

错误。这是我所拥有的：

gameList 是我从中获取数据的地方：

```
gameList.toString() returns: [{turn=1, opponent=UserTwo, streak=4, hintX=1234, player=UserOne, solution=MySolution, hintY=5678}, {turn=0, opponent=UserThree, streak=12, hintX=1344, player=UserOne, solution=SolutionTwo, hintY=5428}] 
```

我的 ListActivity 类：

```
public class GameListActivity extends ListActivity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game_list);

    String GAME_ITEM = "game";
    String PLAYER_ITEM = "player";
    String OPPONENT_ITEM = "opponent";
    String SOLUTION_ITEM = "solution";
    String HINTX_ITEM = "hintX";
    String HINTY_ITEM = "hintY";
    String STREAK_ITEM = "streak";
    String TURN_ITEM = "turn";

ArrayList<HashMap<String, String>> gameList = new ArrayList<HashMap<String, String>>();
AppVars gameVars = ((AppVars) getApplicationContext());
gameList = gameVars.getState();

String[] keyList = new String[] { OPPONENT_ITEM, STREAK_ITEM, TURN_ITEM };

ListAdapter adapter = new SimpleAdapter(this, gameList, R.layout.game_list_item, 
                        keyList, 
                        new int[] {R.id.opponent, R.id.streak, R.id.turn});
setListAdapter(adapter);        

} 
```

XML:

game_list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/thumbnail"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentTop="true"
        android:src="@android:drawable/alert_dark_frame" />

    <TextView
        android:id="@+id/opponent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_centerHorizontal="true"
        android:text="Entry"
        android:textSize="30sp" />

    <TextView
        android:id="@+id/streak"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/thumbnail"
        android:layout_centerHorizontal="true"
        android:text="Streak"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/turn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/streak"
        android:layout_centerHorizontal="true"
        android:text="Your turn!"
        android:textSize="20sp" />

</RelativeLayout> 
```

游戏列表.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/blackboard" >

    <ListView
        android:id="@+id/gameList"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:14:16.723

> java.lang.RuntimeException: 你的内容必须有一个 id 属性为 android.R.id.list 的 ListView

所以错误日志告诉你一切

您需要添加到您的`XML`文件`ListView` `android.R.id.list`

```
<ListView
   android:id="@android:id/list"
   // next attributes
/> 
```

正是当您`Activity`从 扩展时`ListActivity`，您应该使用它。

这是来自文档的信息

> ListActivity 有一个默认布局，它由屏幕中央的单个全屏列表组成。但是，如果您愿意，您可以通过在 onCreate() 中使用 setContentView() 设置您自己的视图布局来自定义屏幕布局。为此，您自己的视图必须包含一个 ID 为“@android:id/list”的 ListView 对象（如果它在代码中，则为列表）

因此，有关更多信息，请查看[ListActivity](http://developer.android.com/reference/android/app/ListActivity.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:17:27.290

列表的 id 是“@+id/gameList”应该是“ `@android:id/list`”，因为你正在使用`ListActivity...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:16:27.760

*   请注意，当你`extends ListActivity Then your xml file must have listview which id is` `@android:id/list`.

利用`@android:id/list`

```
 <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ListView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T18:16:44.007

您正在扩展`ListActivity`，因此您的视图应该具有使用 id "list" 定义的列表

有关工作示例，请参见此[链接。](http://windrealm.org/tutorials/android/android-listview.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T18:34:55.980

从您的代码中删除以下行：

```
setContentView(...) 
```

ListActivity`ListView`为您处理 ，因此您可以访问`ListView`using `this`。如果您需要更复杂的布局子类`Activity`。

# c# - 求建议 - Excel Addin - C# Services

> ID：11056069
> 
> 赞同：3
> 
> 时间：2012-06-15T18:13:10.280
> 
> 标签：c#, excel, vsto, add-in

我们目前可以使用具有特定接口的 WCF DataService。该服务基本上根据传递给服务的 DataRequest 对象提供所需的数据。此服务已被其他 .net 前端使用...

现在我想在 Excel 中公开这个服务；以便用户可以直接通过该服务获取数据。我知道我需要在 excel 中开发某种插件。在技​​术方面我有什么选择。此添加将分发给他们安装的不同业务用户，并将此插件包含在 excel 中并查询他们的数据。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:04:33.400

> 在技​​术方面我有哪些选择？

您已决定使用带有 C# 的 Excel 插件来使用您的 WCF 服务。所以这对开发应该没问题。

要将此插件分发给不同的用户，您应该能够使用[Click once deployment](http://msdn.microsoft.com/en-us/library/bb386095.aspx)

# ruby - 使用 webrat 对 sinatra 应用程序的验收测试失败

> ID：11056071
> 
> 赞同：0
> 
> 时间：2012-06-15T18:13:17.270
> 
> 标签：ruby, sinatra, webrat, acceptance-testing, minitest

我正在尝试使用 minitest 和 webrat 测试 ruby​​ 身份验证应用程序，但出现错误。

测试`visit '/'`失败并出现错误`Status 200 expected but was 404.`

包含类似代码的测试`fill_in :email, :with => "first@company.com"`失败并出现错误`Could not find field: :email`。

我阅读了几个 sinatra、testing 和 webrat 文档和论坛。其中一些是旧的，建议使用 Sinatra::Default 之类的东西，但是[github.com/brynary/webrat/wiki/sinatra](https://github.com/brynary/webrat/wiki/sinatra)，[构建由 Webrat 测试驱动的 Sinatra 应用程序](https://github.com/cowmanifestation/learning-testing/wiki/Building-a-Sinatra-App-Driven-By-Webrat-Tests)和[向大师学习：Sinatra 内部](http://patshaughnessy.net/2012/3/7/learning-from-the-masters-sinatra-internals)是新的，但它们仍然失败.

基本上，我不喜欢 rspec、cucumber 等类似句子的语法，但我确实想做行为驱动的开发。我真的很喜欢 minitest 语法，包括测试和输出，这就是我选择 webrat 做 BDD 的原因。如果我对期望 webrat 满足验收测试要求有误，请简单地告诉我应该使用这个框架还是那个框架。

除此之外，主文件和测试文件的第一部分如下。我希望有人能解释我，我错过了什么？

# 测试文件

```
require "test/unit"
require "minitest/autorun"
require "rack/test"
require 'webrat'
require_relative "../lib/kimsin.rb"

Webrat.configure do |config|
  config.mode = :rack
end

ENV["RACK_ENV"] = "test"

class KimsinTests < Test::Unit::TestCase
  include Rack::Test::Methods
  include Webrat::Methods
  include Webrat::Matchers

  def app
    Sinatra::Application.new
  end

  def test_create_user
    visit "/user/new"
    fill_in :username, :with => "first@company.com"
    fill_in :password, :with => "abC123?*"
    fill_in :confirm_password, :with => "abC123?*"
    click_link "Register"
    assert 201, last_response.status, "Status 201 expected but was #{last_response.status}.\n#{error}"
    assert_contain /Logged in as first@company.com./, "No user created"
    assert_contain /Logout/, "Logout link not present"
  end 
```

# 主文件

```
require "sinatra"
require "erb"
require_relative "../lib/kimsin/version"
require_relative "../lib/kimsin/user"

class Kimsin < Sinatra::Application
  use Rack::Session::Pool, :expire_after => 2592000
  set :session_secret, BCrypt::Engine.generate_salt

  configure :development do  
    DataMapper.auto_migrate!  
  end

  get "/" do
    if session[:user_id]
      user = User.get session[:user_id]
      email = user.email
      erb :index, :locals => { :email => email }
    else
      email = nil
      erb :index, :locals => { :email => email }
    end      
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:11:49.280

将 Sinatra 与 Webrat 一起使用应该可以正常工作。我认为您看到的错误是由以下方法引起的（大约在您的测试文件中的第 18 行）：

```
def app
  Sinatra::Application.new
end 
```

这是设置 Sinatra::Application 基类以在您确实需要设置自己的子类时运行测试`Kimsin`（因为您正在创建模块化风格的 Sinatra 应用程序），即

```
def app
  Kimsin.new
end 
```

发生 404 错误和缺少字段是因为 Sinatra::Application 没有定义您正在测试的任何路由。

如果您正在寻找 Webrat 的类似替代品，您可能还想看看[Capybara 。](https://github.com/jnicklas/capybara)

# makefile - rm -f 和生成文件

> ID：11056077
> 
> 赞同：1
> 
> 时间：2012-06-15T18:13:57.143
> 
> 标签：makefile, gnu-make, vxworks

即使使用了 -f 标志，当没有要删除的文件时，我的项目中的许多 makefile 之一也会在错误控制台中显示错误。这是makefile中的违规行

`-rm -f *.o`

如果我删除该行开头的破折号，它会停止在其轨道上 - 所以我知道这是产生错误的行。

这是一个包含十几个 makefile 的大项目。我不明白的是，其他一些人没有这个问题。

这是嵌入式编程世界——我使用的是 WindRiver 2.6（所以 rm 实用程序是“rm.EXE”，虽然它似乎有通常的选项）。

有谁知道如果没有要删除的内容，为什么“rm -f”调用仍会产生错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:23:07.647

`make`我不熟悉 WindRiver 工具，但这里有一个基于典型 Unix shell 和工具行为的有根据的猜测。

运行`rm -f *.o`时，会发生以下情况：

*   外壳尝试扩展`*.o`，如果没有匹配的文件，则保持原样（尝试`echo *.o`在不包含此类文件的目录中发出，并在包含此类文件的目录中发出）
*   扩展的结果被传递给`rm`，因此如果没有匹配的文件，`rm`则使用文字字符串`*.o`作为其参数调用
*   `rm`将参数解释为路径名，而不扩展模式（因为这是 shell 的工作）；`-f`如果找不到文件，则将其关闭

从错误消息来看，您的设备似乎`rm`已损坏，因为当找不到调用的文件时它仍然会抱怨`*.o`。您可以通过首先检查是否有任何文件与该模式匹配来解决此问题。我必须承认，我不知道如何在您的环境中做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-24T09:52:44.993

在 Windows 环境中，它不能扩展“*.o”并将其按原样发送到`rm`命令，实际上`rm.exe`来自`cygwin`例如，然后失败并出现错误退出代码。`rm.exe`从 Windows 的命令提示符运行时很难看到，`cmd`因为它似乎使用相同的参数完成 OK。

解决方案是`$(wildcard *.o)`在makefile中使用。有“*”很重要，否则即使文件存在也不会扩展任何内容。

因此，make 文件中的行将类似于以下内容：

```
rm -f $(wildcard *.o) $(wildcard *.elf) $(wildcard *.lst) $(wildcard *.map) $(wildcard *.sym) $(wildcard *.lss) $(wildcard *.eep) $(wildcard *.srec) $(wildcard *.bin) $(wildcard *.hex) $(wildcard *.tmp.sh) 
```

# c# - 无法在 C# 中捕获 0xC0000005 异常

> ID：11056080
> 
> 赞同：2
> 
> 时间：2012-06-15T18:14:10.023
> 
> 标签：c#, .net, exception, try-catch

我的 C#.Net 程序中出现以下异常：

> System.Data.dll 中发生了“System.Data.SqlClient.SqlException”类型的第一次机会异常 myapp.exe 中 0x000007feff75121b 的第一次机会异常：0xC0000005：访问冲突读取位置 0x0000000000000000。CustomMarshalers.dll 中出现“System.AccessViolationException”类型的第一次机会异常 CustomMarshalers.dll 中出现“System.AccessViolationException”类型的未处理异常附加信息：尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

我在 try/catch(Exception) 块中得到它，但它从未被捕获。

我正在尝试调试它以了解它发生的原因，但如果不抓住它就很难做到这一点。

是否可以在 C#.Net 中捕获 0xC0000005 异常？（Windows 2008 R2 上的框架 4.0）。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T18:19:42.040

默认情况下，您无法捕获 AccessViolationException，因为它表示尝试读取或写入受保护的内存。但是，您可以将[`[HandleProcessCorruptedStateExceptions]`](http://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.handleprocesscorruptedstateexceptionsattribute.aspx)属性添加到它发生的方法中：

> 默认情况下，公共语言运行时 (CLR) 不会将这些异常传递给托管代码，并且不会为它们调用**try** /* *catch * 块（和其他异常处理子句）。*如果您绝对确定要保持对这些异常的处理，则必须将**HandleProcessCorruptedStateExceptionsAttribute**属性应用于要执行其异常处理子句的方法。**CLR 仅在同时具有HandleProcessCorruptedStateExceptionsAttribute**和[SecurityCriticalAttribute](http://msdn.microsoft.com/en-us/library/system.security.securitycriticalattribute.aspx)属性的方法中将损坏的进程状态异常传递给适用的异常子句。

# alignment - Photoshop 将像素完美对齐到毫米

> ID：11056081
> 
> 赞同：0
> 
> 时间：2012-06-15T18:14:10.267
> 
> 标签：alignment, photoshop, pixel, pixel-perfect

您好，从下图中您会看到一些相距 1 毫米的参考线，但我绘制的像素线未对齐，也无法将它们与毫米对齐。使用锚点工具移动线条会导致它们失去坚固性并渗入其他像素。有谁知道让像素与毫米对齐？

可能只是我想念的东西

示例图片 [http://img401.imageshack.us/img401/51/ruleo.jpg](http://img401.imageshack.us/img401/51/ruleo.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:40:00.173

我建议您转到“查看”菜单下的“对齐”设置，然后查看其中打开或关闭的内容。

您绝对可以关闭捕捉并手动将元素匹配到线条。

# c# - 在 nLog 中禁用 .info 日志记录

> ID：11056082
> 
> 赞同：5
> 
> 时间：2012-06-15T18:14:14.110
> 
> 标签：c#, nlog

在我的 .net 应用程序中，我使用 nLog 进行日志记录，现在我想禁用 .info 日志记录（即应该启用 .error 和 .fatal 日志功能）是否存在任何选项？请帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T18:28:44.893

您可以在 app.config 文件的 nlog 配置的规则部分设置最低日志级别。因此，例如，以下将配置 nlog，以便仅将警告及以上（包括错误和致命，但不包括信息或跟踪）记录到名为“文件”的目标：

```
<nlog>
  <rules>
    <logger name="*" minlevel="Warn" writeTo="file" />
  </rules>
</nlog> 
```

# jquery - 用ajax填充的jquerytools工具提示

> ID：11056085
> 
> 赞同：1
> 
> 时间：2012-06-15T18:14:21.133
> 
> 标签：jquery, tooltip, jquery-tools

我正在尝试将一些内容加载到 jQueryTools 工具提示中，具体取决于触发器父级的元素。现在我坚持这个：

```
 <div id="id-1">
      <div>
        <div>
          Bla <a class="trigger">trigger</a>
        </div>
        <div class="tooltip">empty</div>
      </div>
 </div>
 <div id="id-2">
      <div>
        <div>
          Bla <a class="trigger">trigger</a>
        </div>
        <div class="tooltip">empty</div>
      </div>
 </div> 
```

注意：默认情况下，插件会在触发器元素之后加载带有类“工具提示”的 DIV 中的扩展 HTML。

现在，JS 应该告诉我父 DIV ID 的名称并将内容加载到工具提示中，具体取决于该 ID 名称。

```
jQuery(".tooltip").tooltip({
    onShow: function() {
        var foundId = jQuery(this).parent().parent().attr("id");
                    // generate a url from the result, e.g. exmpl.com/id-1.html
                    // put the url content in the tooltip container
    }
}); 
```

我在 JS 上很垃圾 - 有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:27:30.580

这应该有效：

```
jQuery(".tooltip").tooltip({
    onShow: function() {
        var foundId = jQuery(this).parent().parent().attr("id");
        $.get('/some-url/' + foundId, function(data){
          $(this).html(data);
        });
    }
}); 
```

您应该考虑放置一个加载图形或其他东西，让用户知道当他们悬停时正在检索数据。这将使客户端有时间访问服务器以获取您想要的内容。

# xcode - 窗口未显示在窗口菜单中

> ID：11056087
> 
> 赞同：3
> 
> 时间：2012-06-15T18:14:34.883
> 
> 标签：xcode, macos, cocoa

我正在创建一个具有多个窗口的 OS X 应用程序。主窗口按预期出现在“窗口”菜单中。

我正在使用 initWithWindowNibName 创建第二个 NSWindow。当我调用 showWindow 时，它按预期显示。但是，该窗口不会显示在“窗口”菜单中（在“全部显示在前面”和主窗口的名称下）。

我试过：

```
[[NSApplication sharedApplication] addWindowsItem:[winController window] 
                                                title:@"The Window" 
                                                filename:NO];    } 
```

我也试过：

```
[[winController window] setExcludedFromWindowsMenu:NO]; 
```

这些似乎都没有帮助。

如果你不知道，我是 OS X 的新手（但我对 Obj-C 比较了解）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:43:12.730

我想到了。我在 NSResponder 的 init 函数中创建了窗口。不知何故，它发生得太早了，sharedApplication 还没有准备好。当我将窗口创建移动到 awakeFromNib 时，一切都按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:48:31.423

窗口编程指南说“这个菜单会自动列出具有标题栏和可调整大小并且可以成为主窗口的窗口”。这个窗口不能成为主窗口是否有原因，例如，它是一个`NSPanel`？

# android - 使用完毕后是否需要调用 HttpURLConnection.disconnect

> ID：11056088
> 
> 赞同：29
> 
> 时间：2012-06-15T18:14:42.520
> 
> 标签：android

以下代码基本上按预期工作。但是，要偏执，我想知道，为了避免资源泄漏，

1.  `HttpURLConnection.disconnect`使用完毕后需要打电话吗？
2.  我需要打电话`InputStream.close`吗？
3.  我需要打电话`InputStreamReader.close`吗？
4.  我是否需要有以下 2 行代码：`httpUrlConnection.setDoInput(true)`并且`httpUrlConnection.setDoOutput(false)`，在构建 httpUrlConnection 之后？

我之所以这么问，是因为我看到的大多数示例都没有进行此类清理。[http://www.exampledepot.com/egs/java.net/post.html](http://www.exampledepot.com/egs/java.net/post.html)和[http://www.vogella.com/articles/AndroidNetworking/article.html](http://www.vogella.com/articles/AndroidNetworking/article.html)。我只是想确保这些示例也是正确的。

* * *

```
public static String getResponseBodyAsString(String request) {
    BufferedReader bufferedReader = null;
    try {
        URL url = new URL(request);
        HttpURLConnection httpUrlConnection = (HttpURLConnection)url.openConnection();
        InputStream inputStream = httpUrlConnection.getInputStream();
        bufferedReader = new BufferedReader(new InputStreamReader(inputStream));

        int charRead = 0;
        char[] buffer = new char[1024];
        StringBuffer stringBuffer = new StringBuffer();
        while ((charRead = bufferedReader.read(buffer)) > 0) {
            stringBuffer.append(buffer, 0, charRead);
        }
        return stringBuffer.toString();
    } catch (MalformedURLException e) {
        Log.e(TAG, "", e);
    } catch (IOException e) {
        Log.e(TAG, "", e);
    } finally {
        close(bufferedReader);
    }
    return null;
}

private static void close(Reader reader) {
    if (reader != null) {
        try {
            reader.close();
        } catch (IOException exp) {
            Log.e(TAG, "", exp);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-15T18:23:57.810

是的，您需要先关闭输入流，然后再关闭 httpconnection。根据[javadoc](http://developer.android.com/reference/java/net/HttpURLConnection.html)。

> 每个 HttpURLConnection 实例用于发出单个请求，但到 HTTP 服务器的底层网络连接可能会被其他实例透明地共享。在请求之后对 HttpURLConnection 的 InputStream 或 OutputStream 调用 close() 方法可能会释放与此实例关联的网络资源，但不会影响任何共享的持久连接。如果持续连接当时处于空闲状态，则调用 disconnect() 方法可能会关闭底层套接字。

接下来两个问题的答案取决于您的连接目的。阅读此[链接](http://developer.android.com/reference/java/net/URLConnection.html#setDoInput%28boolean%29)了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:30:31.307

我相信调用 setDoInput() 或 setDoOutput() 的要求是确保在向连接上的流写入或读取任何内容之前调用它们。除此之外，我不确定何时调用这些方法是否重要。

# salesforce - 批处理 Apex 冲突和设计？

> ID：11056095
> 
> 赞同：0
> 
> 时间：2012-06-15T18:15:11.310
> 
> 标签：salesforce, apex-code

我需要有关设计问题的帮助以及 Batch Apex 中发生的情况。

这是我们的场景：我们有一个区域对象，然后当您更新单个字段时需要更新多达数百个联系人上的字段。为此，我正在使用 Batch Apex。并在更新之前在区域记录上调用它。

问题：

1.  假设用户将区域从 A 更新到 B，然后单击保存。这会导致大量联系人更新并需要一段时间。然后，他将 B 更改为 C。我们是否保证所有受影响记录的最终更新都是 C？怎么会？

2.  或者，有没有办法安排你的批处理作业？我正在研究 asyncApexJob 并将其用作框架……</p>

3.  有更好的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:36:34.663

1.  Batch Apex 的工作方式与触发器的工作方式不同。问题 1 中描述的情况发生的唯一方法是，如果您要从触发器调用/执行批处理，我强烈建议您避免这种情况，如果可能的话。
2.  [（和 3.）批次通常使用Apex Scheduler 安排](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_scheduler.htm)在夜间或下班时间运行。这是推荐的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T17:42:02.003

首先，您需要将逻辑放在 Territory 对象的 AFTER UPDATE 触发器中，而不是 BEFORE UPDATE 部分。作为一般规则，如果您需要更新触发器操作所针对的记录/对象上的字段或值（即在您的情况下为 Territory 对象），那么您使用 BEFORE UPDATE 或 BEFORE INSERT 部分，如果您想创建/更新/删除其他记录/对象（即您的情况下的联系人），您使用更新后或插入后部分。

其次，我认为从触发器启动批处理顶点过程没有任何问题。

例如，假设您有一个名为“BatchUpdateContactsBasedOnTerritory”的批处理类。该课程具有三 (3) 个关键功能：

1.  除了“Database.Batchable”之外，它还实现了“Database.Stateful”
2.  它有一个构造方法，该方法将地区列表作为参数/参数
3.  它有一个成员变量来保存传入的地区列表

**您的批处理课程的一部分**：

```
global list<Territory> TerritoryList;

global BatchUpdateContactsBasedOnTerritory(list<Territory> updatedTerritories){
    TerritoryList = updatedTerritories;
} 
```

**你的触发器**：

```
trigger TerritoryTrigger on Territory (after delete, after insert, after undelete, after update, before delete, before insert, before update)
{
    if(trigger.isInsert)
    {
        if(Trigger.isBefore){
            // before insert event not implemented 
        }
        else if(Trigger.isAfter){
            // after insert event not implemented 
        }
    }else if(trigger.isUpdate){
        if(Trigger.isBefore){
            // before update event not implemented 
        }
        else if(Trigger.isAfter){
            // after update event - call batch class to process 1000 records at a time
            Database.ExecuteBatch(new BatchUpdateContactsBasedOnTerritory(trigger.new),1000);
        }
    }else if(trigger.isDelete){
        if(Trigger.isBefore){
            // before delete event not implemented 
        }
        else if(Trigger.isAfter){ 
            // after delete event not implemented 
        }
    }
    else if(Trigger.isUnDelete){ 
        // undelete event not implemented
    }
} 
```

# php - 如何使用 MySQL 查询中的行创建 HTML 表格布局？

> ID：11056100
> 
> 赞同：1
> 
> 时间：2012-06-15T18:15:28.917
> 
> 标签：php, mysql, html-table

在我的“流行标签”页面上，我使用这个 PHP 和 SQL 从数据库中获取所有标签，从最流行到最不流行：

```
$sql = "SELECT t.tagid, t.name, t.desc, COUNT(qt.id) AS total
        FROM tags t
        LEFT JOIN question_tags qt ON t.tagid=qt.tag_id
        GROUP BY t.tagid, t.name
        ORDER BY total DESC";

$result = mysql_query($sql) or die(mysql_error());

while($row=mysql_fetch_assoc($result)) {
  echo '<div class="tag-list-box" id="tag-'.$row['tagid'].'">
        <a href="/tags/'.strtolower($row['name']).'" class="tag">
        <span class="label label-inverse label-tag">'.strtolower($row['name']).'</span>
        </a> <strong>&times; '.$row['total'].'</strong><br />
        <p>'.($row['desc']!==null ? $row['desc'] : '<em>This tag has no description.</em>').'</p>
        </div>';
} 
```

我现在没有将它放在 HTML 表格中，因为我认为我可以使用 div 和 CSS 以*更“现代的方式”*来完成它，但正如您在下面的屏幕截图中看到的那样，当标签有描述因为盒子的高度比其他的大：

![在此处输入图像描述](../Images/a2b3c237d6867eed34769ecce40a1b04.png)

我的盒子 CSS 是：

```
.tag-list-box {
  width: 20%;
  padding: 5px;
  background-color: #f0f0f0;
  border: 1px solid #ccc;
  float: left;
  margin-right: 2%;
  margin-bottom: 10px;
} 
```

我想我应该把它放在一个应该解决问题的表中，但我的问题是我**如何让查询中的每 4 行都有自己的`<tr>`，这样每个表行中可以有 4 行？**

我想不通——我试着做一个计数并在`while`循环中增加它，但我就是不知道从那里去哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:17:03.727

使用模运算符查看您的计数是否可以被 4 整除：

```
if($count % 4 == 0) 
```

如果您想保留您的 css 解决方案，您还可以为您的 div 设置一个高度，然后将溢出设置为隐藏以处理太长的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:47:55.473

是的，我会检查你是否像斯科特所说的那样连续有 4 个。您可以使用 div。在每 4 之后添加一个清除左浮动的 div。我不会使用设定的高度，因为您永远不知道物品会变得多高。我会做的例子：

```
$count = 0;
while($row=mysql_fetch_assoc($result)) {
  echo '...'; //YOUR CURRENT ECHO STATEMENT HERE
  $count++;
  if($count % 4 == 0) echo "<div style='clear: left;'></div>";
} 
```

# javascript - 为什么这个 for 循环返回一个字符的索引而不是整个属性？

> ID：11056104
> 
> 赞同：0
> 
> 时间：2012-06-15T18:15:38.890
> 
> 标签：javascript, jquery, loops, for-loop

```
var options = {
fieldsToValidate : {},  
slideDowns : {
    0: '#address-phone-block',
    1: '#zip-dob-block',
    2: '#nextButton'
},
continueButton: "#continue-button",
landingForm: '#landingForm'
}

for (var slider in options.slideDowns[]){
    console.log('did this work?' , slider , options.continueButton[slider])
    $(options.continueButton[slider]).slideDown();  
} 
```

当控制台记录我得到这个输出，然后在 jQuery 选择器上出现这个错误：

```
did this work? 0 #
"Syntax error, unrecognized expression: #" 
```

我知道滑块是 0/1/2 那么为什么这给了我第一个属性的第一个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:19:43.117

与' ' 值一样，`options.continueButton`它的第一个字符也是 ' '。`String``#continue-button``options.continueButton[0]``#`

可能您需要使用`options.slideDowns`而不是`options.continueButton`，因为您正在循环其属性：

```
for (var slider in options.slideDowns){
    console.log('did this work?' , slider , options.slideDowns[slider])
    $(options.slideDowns[slider]).slideDown();  
} 
```

# jquery - 在颜色框中显示 div 的问题

> ID：11056107
> 
> 赞同：0
> 
> 时间：2012-06-15T18:15:49.530
> 
> 标签：jquery, colorbox

我试图在颜色框中显示特定的 div，但整个页面都在颜色框中。这是我的html代码

```
<div id="right">
    <div id="photo_preview">
        <a rel="example1" href="#photo_preview"><img class="photo_preview_image" src="female.png"></img></a>
        <label class="photo_preview_caption">Caption</label>
        <input class="photo_preview_caption_input" type="text" name="caption_" size="30" value=""></input>
        <input class="photo_preview_album_art" type="radio" name="album_art" title="Album Art" value=""></input>
        <img class="photo_preview_delete_image" src="Dustbin.PNG" title="Click To Delete Pic"></img>
    </div>
</div> 
```

这是彩盒功能

```
 $(document).ready(function(){
    //Examples of how to assign the ColorBox event to elements
    $("a[rel='example1']").colorbox(

    );

    //Example of preserving a JavaScript event for inline calls.
    $("#click").click(function(){ 
        $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:28:07.577

在颜色框中设置一个选项，例如

```
$("a[rel='example1']").colorbox({inline:true}); 
```

# ruby-on-rails - Rails_admin 新模型配置

> ID：11056108
> 
> 赞同：2
> 
> 时间：2012-06-15T18:15:50.403
> 
> 标签：ruby-on-rails, model, rails-admin

我刚刚安装了 Rails Admin，我想要一个名为“Business”的模型。通过Rails Admin，我希望能够创建新业务，编辑它们等。我已经编写了模型的代码，但是我不知道如何使用rails_admin.rb文件来配置模型。这是我到目前为止所拥有的。

商务.rb

```
class Business < ActiveRecord::Base
  #attr_accessible :title, :body

  attr_accessible :name, :website, :phone, :manager, :email, :type, :mobile,
  :foursquare, :facebook, :yelp, :google

  validates_presence_of :name, :website, :phone, :manager, :email, :type, :mobile,
  :foursquare, :facebook, :yelp, :google

  def type_enum
    ['Agencies', 'Automotive', 'Contractor', 'Country Club', 'Entertainment',
    'Restaurant and Bar', 'Funeral', 'Furniture', 'Healthcare', 'Laundry', 'Legal',
    'Office', 'Other', 'Personal Trainer', 'Real Estate', 'Religious', 'Retail',
    'Salon', 'Wedding Hall']
  end

  def mobile_enum
    ['Yes', 'No']
  end

  def foursquare_enum
    ['Yes', 'No']
  end

  def facebook_enum
    ['Yes', 'No']
  end

  def yelp_enum
    ['Yes', 'No']
  end

  def google_enum
    ['Yes', 'No']
  end
end 
```

我应该在 rails_admin.rb 中包含什么？理想情况下，我希望有文本字段来输入所有字段的数据，除了我为其创建“枚举”方法的那些——这些应该是下拉菜单。我是 Rails Admin 的新手，对 Rails 也比较陌生，所以非常感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:32:27.153

您的配置将如下所示：

```
RailsAdmin.config do |config|
  config.model Business do
    list do
      field :name
      field :website
    end
    show do
      # e.g. include_all_fields
    end
    edit do
      # e.g. include_all_fields
      # exclude_fields :website
    end
  end
end 
```

您可以[在 RailsAdmin 字段配置 wiki 页面上](https://github.com/sferik/rails_admin/wiki/Railsadmin-DSL)阅读其他字段配置。

# c# - 依赖注入的类似单例的行为

> ID：11056111
> 
> 赞同：8
> 
> 时间：2012-06-15T18:15:59.263
> 
> 标签：c#, multithreading, dependency-injection, mef, extensibility

在对 MEF 进行了一些研究之后，我发现了**CreationPolicy.Shared**属性，根据 MSDN：

> 指定关联 ComposablePart 的单个共享实例将由 CompositionContainer 创建并由所有请求者共享。

只要我始终确保只有一个容器访问我使用此策略导出的类，这听起来不错。那么我该如何确保只有一个容器能够访问我导出的类型呢？这是我的场景：

我有一个 Windows 服务，它需要为一些内存中的数据利用类似单例的类。数据是非持久的，所以我希望在服务启动时重新创建它，但一旦服务停止，它就没有任何用处。我的服务中的多个线程需要以线程安全的方式读取和写入此对象，因此我最初的计划是从[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)继承以确保针对它的线程安全操作。

将要利用这个类的线程都继承自一个抽象基类，那么有没有办法让这个类（并且只有这个类）从 MEF 导入它并按照我想要的方式进行这项工作？

感谢您提供的任何提示，我对 MEF 很陌生，所以我仍在学习细节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:30:52.923

如果它绝对必须是不同容器之间的单例，则可以使用私有构造函数并公开静态`Instance`属性，就好像它是“经典”非容器管理的单例一样。然后在组合根中，使用[ComposeExportedValue](http://msdn.microsoft.com/en-us/library/dd986608.aspx)将其注册到容器中：

```
container.ComposeExportedValue(MySingleton.Instance); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:47:46.790

您始终可以使用 Lazy 类型，因为它会阻塞其他线程，如本博文所述：http: [//geekswithblogs.net/BlackRabbitCoder/archive/2010/05/19/c-system.lazylttgt-and-the-singleton-design -pattern.aspx](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/05/19/c-system.lazylttgt-and-the-singleton-design-pattern.aspx)

# ruby-on-rails - 为什么在 Rails 3.2 中“cupertino”主题需要显式链接指令，即使我们预编译了该资产？

> ID：11056116
> 
> 赞同：1
> 
> 时间：2012-06-15T18:16:42.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-ui, asset-pipeline

我正在运行 Rails 3.2。我已经集成了 ThemeRoller 画廊 (http://jqueryui.com/themeroller/) 中的“cupertino”主题。由于 Rails 3.2 中尚不支持可变主题，我只是将 cupertino 图像复制到`./app/assets/images/images`，并将 cupertino CSS 样式表放入`./app/assets/stylesheets/cupertino.css.scss`.

我没有向 application.css 添加任何内容。我的理解是资产管道将简单地预编译位于`./app/assets/stylesheets`. 到现在为止还挺好。在`application.rb`中，我将正确的属性设置为 true：

```
config.assets.enabled = true 
```

这就是事情变得有趣的地方。例如，如果我弹出 jQuery 日期选择器，我不会得到 Cupertino 主题！行。这很容易处理。我只是明确声明了一个指向 cupertino 样式的链接：

```
<%= stylesheet_link_tag "cupertino" %> 
```

对于我的开发环境，这行得通！我再次举起 jQuery datepicker，cupertino 主题出现了！如果我打开 HTML 视图，您可以看到选择 Cupertino 样式的相应链接指令：

```
<link href="/assets/cupertino.css" media="screen" rel="stylesheet" type="text/css" /> 
```

在我的生产环境中，`stylesheet_link_tag`不起作用！我相信这是因为资产是在生产环境中预编译的，而 Rails 无法找到 cupertino.css 的“键控”版本。也就是说，如果`stylesheet_link_tag`工作正常，我会期待这样的事情：

```
<link href="/assets/cupertino-40e24d89d5768c02a1373032957ebd02.css" media="all" rel="stylesheet" type="text/css" /> 
```

所以，然后我会查看我预编译资产的生产日志。你猜怎么了？库比蒂诺是预编译的！

```
$ tail -100 log/production.log
...
Compiled cupertino.css  (729ms)  (pid 5325)
... 
```

我`<%= stylesheet_link_tag "cupertino" %>`用一个显式链接指令替换该指令，该指令加载库比蒂诺样式表的未键入版本：

```
<link href="/assets/cupertino.css" media="screen" rel="stylesheet" type="text/css" /> 
```

这样可行！在开发和生产上。但谜团愈演愈烈。在生产中，我打开 的键控版本`applications.css`，即所有预编译的样式。我搜索`cupertino`. 你猜怎么了？库比蒂诺风格是预编译的；这是我从压缩的预编译资源中解开的一种风格：

```
.ui-icon {
    width:16px;
    height:16px;
    background-image:url("/assets/jquery-ui/cupertino/ui-icons_72a7cf_256x240-cd87f27304052bb2d63abd3680bb2bbd.png")
} 
```

我们立即看到一个与路径相关的问题。根据我看到的其他评论，这并不奇怪。我将图像从 移动`./app/assets/images/images`到`./app/assets/images/jquery-ui/cupertino`. 同样的问题再次出现。相同的分辨率解决了问题。

**问题**：为什么`cupertino.css`在生产中没有找到指纹版本，即使所有证据都表明资源是预编译的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:26:01.047

您必须将文件名添加到预编译数组中，以告诉 Rails 您想在生产中使用它。这是在 production.rb 中：

```
config.assets.precompile += %w(cupertino.css) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:57:29.580

所以，这里是缺少的魔法。根据 Richard Hulse 的建议，我转到清单文件`application.css`，并添加以下行：

```
 *= require cupertino 
```

wola!，cupertino 是预编译的：

```
$ ls -c1 ./public/assets/cupertino*
./public/assets/cupertino-3235459a735b4f142b96270d04b2626e.css
./public/assets/cupertino-3235459a735b4f142b96270d04b2626e.css.gz
./public/assets/cupertino.css
./public/assets/cupertino.css.gz 
```

部署我的 webapp 后，该指令在生产和开发环境中都能正常工作：

```
<%= stylesheet_link_tag "cupertino" %> 
```

# java - Sql时间戳到Java日期？

> ID：11056119
> 
> 赞同：0
> 
> 时间：2012-06-15T18:16:48.353
> 
> 标签：java, mysql, date, jdbc

我有一个数据库，它将具有标准 sql 格式的 UMT 时间戳。如何提取该数据并使用它设置一个 java 日期对象？

据我所知，mysql 是`yyyy-mm-dd hh:mm:ss` 至于 java，日期/时间的东西一直让我望而却步。

如果有人知道一个好的图书馆，我愿意接受建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:18:24.827

为什么不直接读为`Date`

```
Date date = resultSet.getTimestamp("date_field");

Timestamp timestamp = resultSet.getTimestamp("date_time_field"); 
```

**看**

*   [`ResultSet.getTimeStamp()`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getTimestamp%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:32:23.740

Timestamp 是 Date 的子类，这意味着它可以在 Date 所在的任何地方使用。唯一的区别是，Timestamp 比 Date 更精确（由于 SQL 规范）。

只需使用：

```
Timestamp t = resultSet.getTimestamp("columnname");
Date d = t; 
```

话虽如此，将 JDBC 返回的时间戳转换为适当的日期值有一些好处，省略纳秒。当您在应用程序的某个远程部分比较时间戳和日期时，时间戳和日期将不相等，即使它们看起来“大致”相同的时间值。因此，如果这可能导致问题，请仅使用 Timestamp 返回的 .getTime() 值创建一个新的 Date 实例）

在我的博客中了解更多信息：[使用 Hibernate 时的时间戳和日期相等](http://www.istvandevai.com/2012/05/timestamp-and-date-equality-when-using.html)

（即使博客条目是关于 Hibernate 的，它也适用于您的情况）

# c#-4.0 - 将 IEnumerable 转换为 System.Data.Objects.ObjectSet 时出错

> ID：11056121
> 
> 赞同：-2
> 
> 时间：2012-06-15T18:16:53.067
> 
> 标签：c#-4.0, entity-framework-4.1

我正在使用 mvc4.0，enityframework 4.2.1，c#，在生成 .EDMX 文件后，我尝试通过以下代码将上下文对象转换为 IEnumerable

```
 IEnumerable<TransactionsModel> pro = (IEnumerable<TransactionsModel>) x.ToList(); 
```

但我收到以下错误

```
 Unable to cast object of type 'System.Data.Objects.ObjectSet`1[MCLInventory.Models.Projects]' 
    to type 'System.Collections.Generic.IList`1[System.String]'. 
```

感谢 Bhanu Prakash Inturi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:45:26.143

看起来您在 ToList() 调用本身而不是演员表上失败了。几个建议...

*   你知道你希望从`ToList()`电话中得到什么样的名单吗？如果是这样，请将其放在与演员表不同的行上`IEnumerable<TransactionsModel>`。

*   如果您需要先将 x 转换为其他内容，我不会感到惊讶。就此而言， x*是*什么类型的对象？这与问题有关，并且该错误似乎向我暗示您认为它是什么和程序认为它是什么是不一样的。

# php - Magento - 加载产品时属性不好？

> ID：11056126
> 
> 赞同：0
> 
> 时间：2012-06-15T18:17:30.117
> 
> 标签：php, magento

我正在创建自定义规则以自动将产品添加到类别中。以下代码来自我的观察者。我遇到的问题是，在运行此代码时，没有属性（例如'shirt_color'）的产品被添加到我的类别中。

任何人都可以解释为什么会这样吗？出于某种原因，带有“shirt_color”的产品仍会附加“炭灰色”。比较时（'charcoal gray' == 'charcoal gray'）它解析为'true'，这就是为什么 $r == 1;

谢谢。

示例输出：

```
#product w/ a 'shirt_color' attribute
productEntityId=628
productName=Rogue GRAY International Shirt XXL
productSKU=HW0003-XXL
string ==
product attributeSTRTOLOWER='charcoal grey'
value STRTOLOWER='charcoal grey'
r=1

#product w/o a 'shirt_color' attribute
productEntityId=629
productName=O'Neill Hyperfreak White
productSKU=
string ==
product attributeSTRTOLOWER='charcoal grey'
value STRTOLOWER='charcoal grey'
r=1 
```

代码：

```
public function onCategoryRuleSave($observe)
{
    $model = Mage::getModel('catalog/product');
    $collection =
        $model->getCollection()
            ->addAttributeToSelect('entity_id');
    $write = Mage::getSingleton('core/resource')->getConnection('core_write');

    foreach ($collection as $product) {
echo "productEntityId=" . $product->getId() . "<br>";
        $product = $product->load($product->getId());
        $productAttributeValue =
            $model->load($product->getId())
                ->getAttributeText( $observe['attribute_code'] );
        $r = 0;

echo "productName=" . $product->getName() . "<br>";
echo "productSKU=" . $product->getSku() . "<br>";
        if ( is_numeric($observe['value']) ) {
echo "operator= " . $observe['operator'] . "<br>";
            switch($observe['operator']) {
                case "<":
echo "numeric <<br>";
                    $r = ($productAttributeValue < $observe['value']) ? 1 : 0;
                    break;
                case ">":
echo "numeric ><br>";
                    $r = ($productAttributeValue > $observe['value']) ? 1 : 0;
                    break;
                case "<=":
echo "numeric <=<br>";
                    $r = ($productAttributeValue <= $observe['value']) ? 1 : 0;
                    break;
                case ">=":
echo "numeric >=<br>";
                    $r = ($productAttributeValue >= $observe['value']) ? 1 : 0;
                    break;
                case "==":
echo "numeric ==<br>";
                    $r = ($productAttributeValue == $observe['value']) ? 1 : 0;
                    break;
                case "!=":
echo "numeric !=<br>";
                    $r = ($productAttributeValue != $observe['value']) ? 1 : 0;
                    break;
            }
        }
        else {
            switch($observe['operator']) {
                case "==":
echo "string ==<br>";
echo "product attributeSTRTOLOWER='" . strtolower($productAttributeValue) . "'<br>";
echo "value STRTOLOWER='" . strtolower($observe['value']) . "'<br>";
                    $r = (
                        strtolower($productAttributeValue) == strtolower($observe['value'])
                    ) ? 1 : 0;
echo "r=" . $r . "<br>";
                    break;
                case "!=":
echo "string !=<br>";
echo "product attributeSTRTOLOWER='" . strtolower($productAttributeValue) . "'<br>";
echo "value STRTOLOWER='" . strtolower($observe['value']) . "'<br>";
                    $r = (
                        strtolower($productAttributeValue) != strtolower($observe['value'])
                    ) ? 1 : 0;
echo "r=" . $r . "<br>";
                    break;
            }
        }
echo "<br>";
        if ($r==1) {
            $write->query(
                "REPLACE INTO `catalog_category_product` (`category_id`, `product_id`)
                    VALUES (" . $observe['category_id'] . "," . $product->getId() . ")"
            );
        }
    }
die();

} 
```

从控制器传递：

```
Mage::dispatchEvent(
    'category_rule_save',
    array(
        'rule_id'        => $id,
        'attribute_code' => $data['attribute_code'],
        'operator'       => $data['operator'],
        'value'          => $data['value'],
        'category_id'    => $data['category'],
        'store_id'       => $data['store_id']
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:18:16.327

想通了问题。因为我早些时候声明`$model = Mage::getModel('catalog/product');`过，后来有些事情搞砸了。代替

`$model->load($product->getId())`

我现在有

`Mage::getModel('catalog/product')->load($product->getId())`.

我对`Mage::getModel('catalog/product')->getCollection()`.

# sqlite - 如何在 ac 应用程序中导入 SQLITE3 .import 命令等数据？

> ID：11056128
> 
> 赞同：0
> 
> 时间：2012-06-15T18:17:37.253
> 
> 标签：sqlite

我知道 .import 命令适用于 Sqlite3 shell，而不适用于我的程序中使用的 C API，并且可以在我从应用程序连接之前创建和填充 db。但是，我想在我的程序中创建一个 Sqlite 数据库，并将数据从文本文件（例如 Windows 中的 data.txt）导入其表之一。有没有办法做到这一点，还是我必须在我的程序中编写类似于 .import 命令的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:02:17.270

你必须要么

*   将 SQLite 语句作为字符串包含在您的应用程序中并[`sqlite3_exec`](http://www.sqlite.org/c3ref/exec.html)在字符串上使用
*   或编写类似于`.import`命令的代码

由于 sqlite.c shell 程序是公共领域的，您可以简单地将`.import`代码复制到您的应用程序中。

# opencart - opencart移动的问题

> ID：11056129
> 
> 赞同：0
> 
> 时间：2012-06-15T18:17:46.457
> 
> 标签：opencart

我在本地主机上构建了我的 opencart 商店，然后我尝试将它移到我的公共主机上。我在我的服务器上创建了新的数据库，我将数据库从我的计算机导入到我的服务器。我将我所有的 opencart 站点从计算机复制到虚拟主机。我更正了两个 config.php 文件。一切似乎都很好，但我无法访问最重要的部分，管理面板 - 设置 - 编辑商店它给了我这个消息：

注意：错误：“订单子句”中的未知列“名称”错误编号：1054 SELECT * FROM customer_group ORDER BY name ASC in /homepages/32/d367271145/htdocs/opencart/system/database/mysql.php 第 49 行

有人知道我做错了什么？

谢谢 marekova@alumni.uv.es

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:26:21.673

检查您的数据库并确保您在 customer_group 中的“名称”下有条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:08:10.903

听起来您试图使用错误版本的数据库。确保您的 opencart 版本相同。

如果是这样，那么它对一个而不是另一个起作用的唯一可能方法是，如果像cleverbot 所说的那样，数据库表不包含“名称”列。您可以在 phpMyAdmin 或您用来上传数据库的任何其他数据库管理工具中进行检查。最简单的解决方案是简单地从您的本地主机导出 customer_group 并将其重新导入您的实时版本

# jquery - 如何从多维json数组迭代

> ID：11056130
> 
> 赞同：0
> 
> 时间：2012-06-15T18:17:57.627
> 
> 标签：jquery, json

如何通过 jQuery 遍历 JSON 返回并返回每个对象的索引？

我的一些代码示例如下：

```
 foreach ( x = somevalue  ; x < length of array ; x +++
{
            that x must be the index 
         [0] => Array

          $('#actual_'+x).text(data.actual+" hrs.");
          $('#total_'+x).text(data.total+" hrs.");
          $('#regular_'+x).text(data.regular+" hrs.");

}

  (
[0] => Array
    (
        [actual] => 9
        [total] => 10
        [regular] => 0
        [over] => 11
        [total_h] => 11
        [eng_pay] => 148.5
        [rate] => 9
    )

[1] => Array
    (
        [actual] => -1
        [total] => 0
        [regular] => -1
        [over] => 2
        [total_h] => 1
        [eng_pay] => 18
        [rate] => 9
    ) 
```

)

我想遍历这个 jQuery ajax 小部件的成功函数：

```
 $.ajax({
  type:'POST',
  url: 'cal_grid.php',
  dataType: 'json',
     cache: false,

      data:$('#grid_frm').serialize(),
      success: function(data) 

      {

        alert(data);

      }  // response call back ends

    });//ajax call ends 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:10:36.000

未经测试，但应该做的伎俩。把它扔到你的成功函数中。

```
$.each($(data), function(i, obj){
   console.log(i); //spits out your index into console
}); 
```

# php - 我的 Windows 2008 服务器上的 PHP 正在锁定一些文件夹。我无法更新 wordpress 插件，因为文件夹正在使用中

> ID：11056131
> 
> 赞同：0
> 
> 时间：2012-06-15T18:18:15.717
> 
> 标签：php, wordpress, windows-server-2008

我的意思是，如果我尝试更新插件，wordpress 会删除旧文件，但无法写入文件夹。我必须去服务器，打开 Process Explorer（我下载的一个程序）并找到锁定文件夹的内容。它总是 php.exe，然后我只关闭该文件夹的进程，然后我可以写入它。

PHP如何锁定文件夹以使服务器无法修改内容？我需要阻止这种情况发生。

# android - 适用于 Android 的 Teechart（单声道）：饼图未显示

> ID：11056132
> 
> 赞同：0
> 
> 时间：2012-06-15T18:18:20.973
> 
> 标签：android, xamarin.android, teechart

我一直在玩 TeeChart for Android (Mono) 的演示，但我一直无法显示饼图。每次我使用饼图运行演示时，我都会看到一个没有饼图的屏幕，但图例包含添加的点的有效列表。

饼图不适用于测试版吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:28:06.320

这里有几个选项：

1.  您有可见的标记，并且它们没有为绘制饼圈/椭圆留下空间。尝试禁用它们：

    `pie1.Marks.Visible = false;`

2.  您的设备/模拟器屏幕很小或正常，请参阅[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)，并且*ZoomStyles.InChart*在较小的屏幕中不受支持。您可以尝试设置一个大屏幕的模拟器来进行试验。您也可以尝试将*Zoom.Style*设置为*FullChart*：

    `tChart1.Zoom.Style = Steema.TeeChart.ZoomStyles.FullChart;`

3.  测试包随附的 MonodroidTabDemo 中的 Pie2D.cs 示例是否适合您？如果是这样，您可以将该示例用作饼图的指南。

如果问题仍然存在，我们将需要有关您正在使用的设备或模拟器的更多详细信息以及我们可以“按原样”运行以重现问题的简单代码片段。您可以通过[http://www.steema.net/upload/](http://www.steema.net/upload/)向我们发送文件。

# c# - 使用 C# 有效地从更改源代码的网页中提取数据？

> ID：11056133
> 
> 赞同：3
> 
> 时间：2012-06-15T18:18:23.437
> 
> 标签：c#, http, web, system.net

我已经使用 System.net.Webclient 类将代码放在一起从网页中提取源代码，然后我使用字符串搜索来获取特定信息。这本身可以正常工作，但我的问题是源代码每隔几秒就会更改一次，我希望收到的数据也相应更改。我知道我可以简单地设置一个循环来重复这个过程，但不幸的是，我当前的代码需要整整 2.7 秒才能完成，我想避免这么大的延迟时间。另外，如果可能的话，我想避免向网页发送垃圾邮件。我正在考虑一个保持打开状态的流读取，这样就不必发送多个请求，但我不完全确定如何去做......

总而言之，有没有一种方法可以让我使用 System.Net 命名空间以既快速又避免向网站发送请求的垃圾邮件的方式从网站中提取更新信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:45:40.250

恐怕HTTP协议不适应您的实时数据刷新要求。除了定期轮询 HTTP 请求之外，您无法知道服务器上的数据是否更改并获取这些新数据。

例如，[WebSocket](http://en.wikipedia.org/wiki/WebSocket)技术更适合那些场景。当然，数据提供者必须实现它，以便客户端可以订阅此实时提要。

还有另一种通过 HTTP 协议实现此功能的方法。它使用 iframe 来实现[长轮询](http://en.wikipedia.org/wiki/Comet_%28programming%29#Hidden_iframe)。这是一个[例子](https://stackoverflow.com/a/8896980/29407)。这个想法是服务器使用分块传输编码并将连续的数据流发送到套接字。客户端订阅此流，并且能够在服务器上发生更改时收到通知。再一次，它是一项必须由服务器端实现的技术，以便您作为客户端可以利用它。

如果服务器提供的只是通过 HTML 页面提供的数据，那么您注定要通过 HTTP 请求敲击该服务器来进行屏幕抓取，直到您的 IP 地址被列入黑名单并拒绝访问。

# python - Pygame 地面碰撞检测和位置重置

> ID：11056135
> 
> 赞同：1
> 
> 时间：2012-06-15T18:18:25.630
> 
> 标签：python, position, pygame, reset, collision

假设我的角色正在下落，并朝着某个精灵平台前进，并且一旦检测到碰撞，我就会标记我的角色已经着陆，那么重置我的角色位置的最佳方法是什么 - 让他在平台的矩形上方左右他还在剪吗？

我担心的是，如果我的角色在平台的矩形上方，那么我的函数 fall() 将被调用，因为他没有触摸任何东西，如果我的角色正在剪裁平台的矩形，那么我的 jump() 函数可能会受到阻碍，因为它可能认为他一起飞就降落。显然，两者都有解决方法，但我真的只是在寻找约定，如果有的话。

（如有必要，我可以发布代码，但代码不是问题。我真的只是在寻找正确的方法）

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:17:16.443

我会让他触摸平台，这样`fall()`就不会再次被调用。

> 如果我的角色正在剪裁平台的矩形，那么我的 jump() 函数可能会受到阻碍，因为它可能会认为他一起飞就降落了。

在 jump() 函数中，当它移动字符时，使它不能停止，直到它移动最少 x 个像素。

您可以通过`False`在开头设置一个布尔值并在遍历 x 个像素后`jump()`设置一个计数器来实现此目的。`True`确保 x 足以让角色停止剪裁平台，而不是太多，以免与其他物体发生碰撞。

一旦它移动了 x 个像素，则允许开始碰撞测试，以查看角色何时再次撞到某物。

例如：

```
MINIMUM_DISTANCE = x 
# ^ how many pixels you want to move to stop clipping

count = 0 #used for counting

def jump():
    global count
    in_air = False
    #do your movements here, and increase count each time you move a pixel
    if count >= MINIMUM_DISTANCE: in_air=True
    if in_air:
        #collision detection here
        #once there is a collision:
        if collision:
            count = 0
    return 
```

并且只是为了将来参考，最好发布您拥有的代码，即使它不是与代码相关的错误。只是为了让我们可以看到并感受你的方法

希望我能帮上忙

# visual-studio-2010 - 如何使用 Dapper 从数据库生成模型？

> ID：11056141
> 
> 赞同：20
> 
> 时间：2012-06-15T18:18:41.450
> 
> 标签：visual-studio-2010, dapper, micro-orm

我来自 PetaPoco 营地。PetaPoco 有一个从数据库生成模型的 T4 模板。Dapper 有类似的东西吗？

我使用 NuGet 安装了 Dapper 并添加了 SqlHelper.cs，但我没有找到任何从数据库生成模型的东西。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-24T23:41:00.053

我最近刚刚编写了一个 sql 查询来为自己完成这项工作。并在我需要时用额外的类型更新它。只需将表名替换为@@@@ 即可。

为了制作很多表，我创建了一个临时存储过程来调用。例如。 `exec createTablePOCO(@tableName)`

```
SELECT 
    'public ' + a1.NewType + ' ' + a1.COLUMN_NAME + ' {get;set;}'
    ,*
FROM (
    /*using top because i'm putting an order by ordinal_position on it. 
    putting a top on it is the only way for a subquery to be ordered*/
    SELECT TOP 100 PERCENT
    COLUMN_NAME,
    DATA_TYPE,
    IS_NULLABLE,
    CASE 
        WHEN DATA_TYPE = 'varchar' THEN 'string'
        WHEN DATA_TYPE = 'datetime' AND IS_NULLABLE = 'NO' THEN 'DateTime'
        WHEN DATA_TYPE = 'datetime' AND IS_NULLABLE = 'YES' THEN 'DateTime?'
        WHEN DATA_TYPE = 'int' AND IS_NULLABLE = 'YES' THEN 'int?'
        WHEN DATA_TYPE = 'int' AND IS_NULLABLE = 'NO' THEN 'int'
        WHEN DATA_TYPE = 'smallint' AND IS_NULLABLE = 'NO' THEN 'Int16'
        WHEN DATA_TYPE = 'smallint' AND IS_NULLABLE = 'YES' THEN 'Int16?'
        WHEN DATA_TYPE = 'decimal' AND IS_NULLABLE = 'NO' THEN 'decimal'
        WHEN DATA_TYPE = 'decimal' AND IS_NULLABLE = 'YES' THEN 'decimal?'
        WHEN DATA_TYPE = 'numeric' AND IS_NULLABLE = 'NO' THEN 'decimal'
        WHEN DATA_TYPE = 'numeric' AND IS_NULLABLE = 'YES' THEN 'decimal?'
        WHEN DATA_TYPE = 'money' AND IS_NULLABLE = 'NO' THEN 'decimal'
        WHEN DATA_TYPE = 'money' AND IS_NULLABLE = 'YES' THEN 'decimal?'
        WHEN DATA_TYPE = 'bigint' AND IS_NULLABLE = 'NO' THEN 'long'
        WHEN DATA_TYPE = 'bigint' AND IS_NULLABLE = 'YES' THEN 'long?'
        WHEN DATA_TYPE = 'tinyint' AND IS_NULLABLE = 'NO' THEN 'byte'
        WHEN DATA_TYPE = 'tinyint' AND IS_NULLABLE = 'YES' THEN 'byte?'
        WHEN DATA_TYPE = 'char' THEN 'string'
        WHEN DATA_TYPE = 'timestamp' THEN 'byte[]'
        WHEN DATA_TYPE = 'varbinary' THEN 'byte[]'
        WHEN DATA_TYPE = 'bit' AND IS_NULLABLE = 'NO' THEN 'bool'
        WHEN DATA_TYPE = 'bit' AND IS_NULLABLE = 'YES' THEN 'bool?'
        WHEN DATA_TYPE = 'xml' THEN 'string'
    END AS NewType
    FROM INFORMATION_SCHEMA.COLUMNS 
    WHERE TABLE_NAME = '@@@@'
    ORDER BY ORDINAL_POSITION
) as a1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T19:03:57.800

### 从游标调用存储过程

如果您结合提到的 sp matritchies（参见上面的答案）并从游标调用它，您可以为数据库中的每个表生成 poco 类

```
USE YourDataBaseName
GO 
    DECLARE @field1 nvarchar(400)
    DECLARE cur CURSOR LOCAL for

    SELECT TABLE_NAME FROM information_schema.tables
    OPEN cur
    FETCH NEXT FROM cur INTO @field1 --, @field2
    WHILE @@FETCH_STATUS = 0 BEGIN          
        exec Helper_CreatePocoFromTableName @field1 -- , @field2            
        fetch next from cur into @field1 -- , @field2
    END

close cur
deallocate cur 
```

### 提到的存储过程matritchies

我从 mattritchies 答案（见上文）中获取了 sql，并创建了他提到的存储过程并对其进行了一些修改，以便它也添加了类名。如果您将 Management Studio 置于 Text-Output-Mode 并删除列名的输出，您将获得所有类的复制粘贴文本：

```
CREATE PROCEDURE [dbo].[Helper_CreatePocoFromTableName]    
    @tableName varchar(100)
AS
BEGIN
SET NOCOUNT ON;

-- Subquery to return only the copy paste text
Select PropertyColumn from (
    SELECT 1 as rowNr, 'public class ' + @tableName + ' {' as PropertyColumn
    UNION
    SELECT 2 as rowNr, 'public ' + a1.NewType + ' ' + a1.COLUMN_NAME + ' {get;set;}' as PropertyColumn
    -- ,* comment added so that i get copy pasteable output
     FROM 
    (
        /*using top because i'm putting an order by ordinal_position on it. 
        putting a top on it is the only way for a subquery to be ordered*/
        SELECT TOP 100 PERCENT
        COLUMN_NAME,
        DATA_TYPE,
        IS_NULLABLE,
        CASE 
            WHEN DATA_TYPE = 'varchar' THEN 'string'
            WHEN DATA_TYPE = 'nvarchar' THEN 'string' 
            WHEN DATA_TYPE = 'datetime' AND IS_NULLABLE = 'NO' THEN 'DateTime'
            WHEN DATA_TYPE = 'datetime' AND IS_NULLABLE = 'YES' THEN 'DateTime?'
            WHEN DATA_TYPE = 'smalldatetime' AND IS_NULLABLE = 'NO' THEN 'DateTime'
            WHEN DATA_TYPE = 'datetime2' AND IS_NULLABLE = 'NO' THEN 'DateTime'
            WHEN DATA_TYPE = 'smalldatetime' AND IS_NULLABLE = 'YES' THEN 'DateTime?'
            WHEN DATA_TYPE = 'datetime2' AND IS_NULLABLE = 'YES' THEN 'DateTime?'
            WHEN DATA_TYPE = 'int' AND IS_NULLABLE = 'YES' THEN 'int?'
            WHEN DATA_TYPE = 'int' AND IS_NULLABLE = 'NO' THEN 'int'
            WHEN DATA_TYPE = 'smallint' AND IS_NULLABLE = 'NO' THEN 'Int16'
            WHEN DATA_TYPE = 'smallint' AND IS_NULLABLE = 'YES' THEN 'Int16?'
            WHEN DATA_TYPE = 'decimal' AND IS_NULLABLE = 'NO' THEN 'decimal'
            WHEN DATA_TYPE = 'decimal' AND IS_NULLABLE = 'YES' THEN 'decimal?'
            WHEN DATA_TYPE = 'numeric' AND IS_NULLABLE = 'NO' THEN 'decimal'
            WHEN DATA_TYPE = 'numeric' AND IS_NULLABLE = 'YES' THEN 'decimal?'
            WHEN DATA_TYPE = 'money' AND IS_NULLABLE = 'NO' THEN 'decimal'
            WHEN DATA_TYPE = 'money' AND IS_NULLABLE = 'YES' THEN 'decimal?'
            WHEN DATA_TYPE = 'bigint' AND IS_NULLABLE = 'NO' THEN 'long'
            WHEN DATA_TYPE = 'bigint' AND IS_NULLABLE = 'YES' THEN 'long?'
            WHEN DATA_TYPE = 'tinyint' AND IS_NULLABLE = 'NO' THEN 'byte'
            WHEN DATA_TYPE = 'tinyint' AND IS_NULLABLE = 'YES' THEN 'byte?'
            WHEN DATA_TYPE = 'char' THEN 'string'                       
            WHEN DATA_TYPE = 'timestamp' THEN 'byte[]'
            WHEN DATA_TYPE = 'varbinary' THEN 'byte[]'
            WHEN DATA_TYPE = 'bit' AND IS_NULLABLE = 'NO' THEN 'bool'
            WHEN DATA_TYPE = 'bit' AND IS_NULLABLE = 'YES' THEN 'bool?'
            WHEN DATA_TYPE = 'xml' THEN 'string'
        END AS NewType
        FROM INFORMATION_SCHEMA.COLUMNS 
        WHERE TABLE_NAME = @tableName
        ORDER BY ORDINAL_POSITION
        ) AS a1 
    UNION 
    SELECT 3 as rowNr,  '} // class ' + @tableName
    ) as t Order By rowNr asc
END 
```

PS：我会这样做作为对他的答案的编辑建议，但我的经验是编辑建议经常被拒绝。

### 更新

用户[chris-w-mclean](https://stackoverflow.com/users/56740/chris-w-mclean)建议了以下我自己没有尝试过的更改（请参阅[他的建议编辑）：](https://stackoverflow.com/review/suggested-edits/8197066)

*   替换`SELECT 1 as rowNr, 'public class '`为`SELECT 1.0 as rowNr, 'public class '`
*   替换 `SELECT 2 as rowNr, 'public '`为`SELECT 2 + a1.ORDINAL_POSITION/1000 as rowNr, 'public '`
*   替换 `SELECT TOP 100 PERCENT COLUMN_NAME,`为`SELECT COLUMN_NAME,`
*   `IS_NULLABLE, CASE`在此行之间添加`cast(ORDINAL_POSITION as float) as ORDINAL_POSITION,`
*   消除`ORDER BY ORDINAL_POSITION`
*   更改`SELECT 3 as`为`SELECT 3.0 as`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-01T01:48:27.537

试试这个我优化了一点的版本，这样结果就不需要通过管道传输到文本输出。相反，PRINT 语句允许轻松复制/粘贴输出。我还删除了子查询并添加了 nvarchar/ntext 类型的声明。

这是针对单个表的，但可以将其转换为存储过程以使用上面的游标建议之一。

```
SET NOCOUNT ON
DECLARE @tbl as varchar(255)
SET @tbl = '@@@@'

DECLARE @flds as varchar(8000)
SET @flds=''

SELECT -1 as f0, 'public class ' + @tbl + ' {' as f1 into #tmp

INSERT #tmp
SELECT 
    ORDINAL_POSITION, 
    '    public ' + 
    CASE 
        WHEN DATA_TYPE = 'varchar' THEN 'string'
        WHEN DATA_TYPE = 'nvarchar' THEN 'string'
        WHEN DATA_TYPE = 'text' THEN 'string'
        WHEN DATA_TYPE = 'ntext' THEN 'string'
        WHEN DATA_TYPE = 'char' THEN 'string'
        WHEN DATA_TYPE = 'xml' THEN 'string'
        WHEN DATA_TYPE = 'datetime' AND IS_NULLABLE = 'NO' THEN 'DateTime'
        WHEN DATA_TYPE = 'datetime' AND IS_NULLABLE = 'YES' THEN 'DateTime?'
        WHEN DATA_TYPE = 'int' AND IS_NULLABLE = 'YES' THEN 'int?'
        WHEN DATA_TYPE = 'int' AND IS_NULLABLE = 'NO' THEN 'int'
        WHEN DATA_TYPE = 'smallint' AND IS_NULLABLE = 'NO' THEN 'Int16'
        WHEN DATA_TYPE = 'smallint' AND IS_NULLABLE = 'YES' THEN 'Int16?'
        WHEN DATA_TYPE = 'decimal' AND IS_NULLABLE = 'NO' THEN 'decimal'
        WHEN DATA_TYPE = 'decimal' AND IS_NULLABLE = 'YES' THEN 'decimal?'
        WHEN DATA_TYPE = 'numeric' AND IS_NULLABLE = 'NO' THEN 'decimal'
        WHEN DATA_TYPE = 'numeric' AND IS_NULLABLE = 'YES' THEN 'decimal?'
        WHEN DATA_TYPE = 'money' AND IS_NULLABLE = 'NO' THEN 'decimal'
        WHEN DATA_TYPE = 'money' AND IS_NULLABLE = 'YES' THEN 'decimal?'
        WHEN DATA_TYPE = 'bigint' AND IS_NULLABLE = 'NO' THEN 'long'
        WHEN DATA_TYPE = 'bigint' AND IS_NULLABLE = 'YES' THEN 'long?'
        WHEN DATA_TYPE = 'tinyint' AND IS_NULLABLE = 'NO' THEN 'byte'
        WHEN DATA_TYPE = 'tinyint' AND IS_NULLABLE = 'YES' THEN 'byte?'
        WHEN DATA_TYPE = 'timestamp' THEN 'byte[]'
        WHEN DATA_TYPE = 'varbinary' THEN 'byte[]'
        WHEN DATA_TYPE = 'bit' AND IS_NULLABLE = 'NO' THEN 'bool'
        WHEN DATA_TYPE = 'bit' AND IS_NULLABLE = 'YES' THEN 'bool?'
    END + ' ' + COLUMN_NAME + ' {get;set;}'
FROM INFORMATION_SCHEMA.COLUMNS 
        WHERE TABLE_NAME = @tbl

INSERT #tmp SELECT 999, '}'

SELECT @flds=@flds + f1 +'
' from #tmp order by f0

DROP TABLE #tmp

PRINT @flds 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-15T18:47:30.933

Dapper 本身为连接对象提供了很少的扩展方法（Query、Execute），并且没有“模型生成器”。也许可以使用其他一些框架来生成基于 db 模式的 POCO。

**更新：**

[数据库表到 C# POCO 类 T4 模板](http://teamyudin.blogspot.com/2012/06/database-tables-to-c-poco-classes-t4.html)

> ```
> <#@ template language="C#" debug="True" #>
> 
> <#@ assembly name="System" #>
> <#@ assembly name="System.Data" #>
> <#@ assembly name="System.Core" #>
> <#@ assembly name="System.Xml" #>
> 
> <#@ assembly name="Microsoft.SqlServer.ConnectionInfo" #>
> <#@ assembly name="Microsoft.SqlServer.Management.Sdk.Sfc" #>
> <#@ assembly name="Microsoft.SqlServer.Smo" #>
> 
> <#@ import namespace="System" #>
> <#@ import namespace="System.Text" #>
> <#@ import namespace="System.Xml" #>
> <#@ import namespace="Microsoft.SqlServer.Management.Smo" #>
> <#@ import namespace="System.Data.SqlClient" #>
> <#@ import namespace="Microsoft.SqlServer.Management.Common" #>
> 
> namespace Namespace
> {
> 
> <#         
>    var databaseName = "testDb";
>             var serverConnection = new SqlConnection(
>                     @"Data Source=.\SQLEXPRESS; Integrated Security=true; Initial Catalog=" + databaseName);
>             var svrConnection = new ServerConnection(serverConnection);
> 
>    Server srv = new Server(svrConnection);
>             foreach (Table table in srv.Databases[databaseName].Tables)
>             {
> 
> #>
>         class <#= table.Name #>
>         {
>             <#
>                 foreach (Column col in table.Columns)
>                 {
>                 #>
>                     public <#= GetNetDataType(col.DataType.Name) #> <#= col.Name #> { get; set; }
>                 <#
>                 }
>              #>
>         }
> 
> <#            }
> #>
> }
> 
> <#+
>         public static string GetNetDataType(string sqlDataTypeName)
>         {
> 
>             switch (sqlDataTypeName.ToLower())
>             {
>                 case "bigint":
>                     return "Int64";
>                 case "binary":
>                     return "Byte[]";
>                 case "bit":
>                     return "bool";
>                 case "char":
>                     return "char";
>                 case "cursor":
>                     return string.Empty;
>                 case "datetime":
>                     return "DateTime";
>                 case "decimal":
>                     return "Decimal";
>                 case "float":
>                     return "Double";
>                 case "int":
>                     return "int";
>                 case "money":
>                     return "Decimal";
>                 case "nchar":
>                     return "string";
>                 case "numeric":
>                     return "Decimal";
>                 case "nvarchar":
>                     return "string";
>                 case "real":
>                     return "single";
>                 case "smallint":
>                     return "Int16";
>                 case "text":
>                     return "string";
>                 case "tinyint":
>                     return "Byte";
>                 case "varbinary":
>                     return "Byte[]";
>                 case "xml":
>                     return "string";
>                 case "varchar":
>                     return "string";
>                 case "smalldatetime":
>                     return "DateTime";
>                 case "image":
>                     return "byte[]";
> 
>                 default:
>                     return string.Empty;
>             }
> 
>         }
> #> 
> ```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-07T20:46:43.067

这是我为 Dapper 生成 POCO 而制作的[dapper-pocos 。](https://github.com/mcdon-ron/dapper-pocos)该解决方案使用 SQL Server 的“ [sp_HELP](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-help-transact-sql) ”和“ [sp_describe_first_result_set](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-describe-first-result-set-transact-sql) ”。给它一个存储过程的名称，或者给它一个 select 语句，它会生成相关的 POCO 用于 Dapper。应用程序只是将存储过程或 select 语句传递给 sp_Help 和 sp_describe_first_result_set，并将结果映射到 C# 数据类型。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-15T18:07:18.727

我的方法是：

1.  用于`<dynamic>`获取一些没有类型的行
2.  将这些行序列化为 JSON
3.  从控制台复制 JSON 字符串（或使用调试器）
4.  将其粘贴到 JSON 到 C# 模型生成器中（例如[https://app.quicktype.io/](https://app.quicktype.io/)）。

IE：

```
var persons = connection.Query<dynamic>("SELECT * FROM Persons");
var serializedPerson = JsonConvert.Serialize(persons.First());
Console.WriteLine(serializedPerson); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-07-06T20:06:44.220

这个是给甲骨文的。它可能不完整，但到目前为止它对我有用。

```
SELECT 
'public ' || A.NewType || ' ' || REPLACE(INITCAP(REPLACE(A.COLUMN_NAME, '_', ' ')), ' ', '') || ' {get;set;}' GET_SET
, A.*
 FROM 
(
SELECT
COLUMN_NAME,
DATA_TYPE,
NULLABLE,
CASE 
    WHEN DATA_TYPE = 'VARCHAR2' THEN 'string'
    WHEN DATA_TYPE = 'VARCHAR' THEN 'string'
    WHEN DATA_TYPE = 'DATE' AND NULLABLE = 'N' THEN 'DateTime'
    WHEN DATA_TYPE = 'DATE' AND NULLABLE = 'Y' THEN 'DateTime?'
    WHEN DATA_TYPE = 'INT' AND NULLABLE = 'N' THEN 'int?'
    WHEN DATA_TYPE = 'INT' AND NULLABLE = 'Y' THEN 'int'
    WHEN DATA_TYPE = 'DECIMAL' AND NULLABLE = 'N' THEN 'decimal'
    WHEN DATA_TYPE = 'DECIMAL' AND NULLABLE = 'Y' THEN 'decimal?'
    WHEN DATA_TYPE = 'NUMBER' AND NULLABLE = 'N' THEN 'decimal'
    WHEN DATA_TYPE = 'NUMBER' AND NULLABLE = 'Y' THEN 'decimal?'
    WHEN DATA_TYPE = 'NUMBER2' AND NULLABLE = 'N' THEN 'decimal'
    WHEN DATA_TYPE = 'NUMBER2' AND NULLABLE = 'Y' THEN 'decimal?'
    WHEN DATA_TYPE = 'CHAR' THEN 'string'
    WHEN DATA_TYPE = 'CHAR2' THEN 'string'
    WHEN DATA_TYPE = 'timestamp' THEN 'byte[]'
    WHEN DATA_TYPE = 'CLOB' THEN 'byte[]'
    ELSE '??'
END AS NewType
FROM USER_TAB_COLUMNS
WHERE TABLE_NAME = 'FIN_GLOBAL_CR_NUM_A'
ORDER BY COLUMN_ID
) A 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-01-07T02:04:15.920

我知道这是一个老话题，但还有另一个简单的选项可以选择。

可以使用[PocoClassGenerator：Mini Dapper 的 POCO 类生成器（支持 Dapper Contrib）](https://github.com/shps951023/PocoClassGenerator)

*   支持当前DataBase所有表和视图生成POCO类代码
*   支持[Dapper.Contrib](https://github.com/StackExchange/Dapper/tree/master/Dapper.Contrib)
*   支持多种关系型数据库：`sqlserver,oracle,mysql,postgresql`
*   迷你和更快（仅在 5 秒内生成 100 表代码）
*   为每个数据库查询使用适当的方言模式表 SQL

### 演示

*   [POCOGenerator 通过动态 SQL 生成类 | .NET 小提琴](https://dotnetfiddle.net/bDdSCA) ![20191009102303.png](../Images/d79e20dfb5ec42b0d3b445acf51a8c6e.png)
*   [POCO 类生成器 GenerateAllTables | .NET 小提琴](https://dotnetfiddle.net/GkdqsU)
*   [数据表 POCO 类生成器 | .NET 小提琴](https://dotnetfiddle.net/vVeYwA)

![20190430141947-image.png](../Images/33c1eeeb52d374b503ffd7f7ec23b228.png)

### 开始

首先：将 PocoClassGenerator.cs 代码复制并粘贴到您的项目或 LINQPad 中。
或从[NuGet安装](https://www.nuget.org/packages/PocoClassGenerator/)

```
PM> install-package PocoClassGenerator 
```

第二：使用Connection调用`GenerateAllTables`然后打印。

```
using (var connection = Connection)
{
    Console.WriteLine(connection.GenerateAllTables());
} 
```

支持 Dapper Contrib POCO 类

*   只需调用方法`GeneratorBehavior.DapperContrib`

```
using (var conn = GetConnection())
{
    var result = conn.GenerateAllTables(GeneratorBehavior.DapperContrib);
    Console.WriteLine(result);
} 
```

**在线演示：[POCO Dapper Contrib 类生成器 GenerateAllTables | .NET 小提琴](https://dotnetfiddle.net/yeuK1E) ![20190502132948-image.png](../Images/b66d565a09c499cbe00553fac926bc85.png)**

生成评论

```
using (var conn = GetConnection())
{
    var result = conn.GenerateAllTables(GeneratorBehavior.Comment);
    Console.WriteLine(result);
} 
```

生成视图

```
using (var conn = GetConnection())
{
    var result = conn.GenerateAllTables(GeneratorBehavior.View);
    Console.WriteLine(result);
} 
```

生成视图和评论以及 Dapper.Contrib

```
using (var conn = GetConnection())
{
    var result = conn.GenerateAllTables(GeneratorBehavior.View | GeneratorBehavior.Comment | GeneratorBehavior.DapperContrib);
    Console.WriteLine(result);
} 
```

通过sql生成一个类

1.  生成一个类

```
using (var connection = Connection)
{
    var classCode = connection.GenerateClass("select * from Table");
    Console.WriteLine(classCode);
} 
```

2.  指定类名

```
using (var connection = Connection)
{
    var classCode = connection.GenerateClass("with EMP as (select 1 ID,'WeiHan' Name,25 Age) select * from EMP", className: "EMP");
    Console.WriteLine(classCode);
} 
```

数据表PocoClass

[DataTablePocoClassGenerator.cs 中](https://github.com/shps951023/PocoClassGenerator/blob/master/PocoClassGenerator/PocoClassGenerator/DataTablePocoClassGenerator.cs)的代码

```
var dt = new DataTable();
dt.TableName = "TestTable";
dt.Columns.Add(new DataColumn() { ColumnName = "ID", DataType = typeof(string) });

var result = dt.GenerateClass();
var expect =
@"public class TestTable
{
public string ID { get; set; }
}";
Assert.Equal(expect, result); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-20T02:19:34.187

我是名为**[CodegenCS.POCO](https://github.com/Drizin/CodegenCS/tree/master/src/CodegenCS.POCO)**的 POCO-Generator 模板的作者。

上面的链接包含 C# 和 PowerShell 脚本，它们允许您构建完整的 POCO（准备在 Dapper 中使用），其中还包括`override bool Equals()`、、`override int GetHashCode()`和（对于喜欢它的人）它包括完整的**ActiveRecord** CRUD 查询（插入/更新）。

**查看 Northwind 数据库中的这个[示例 POCO](https://github.com/Drizin/CodegenCS/blob/master/src/CodegenCS.POCO/POCOs/Product.cs)**。如果你喜欢它，使用模板非常容易：

*   [编辑RefreshSqlServerSchema.csx](https://github.com/Drizin/CodegenCS/blob/master/src/CodegenCS.POCO/RefreshSqlServerSchema.ps1)中的连接字符串和路径，并通过 PowerShell 脚本 RefreshSqlServerSchema.ps1 调用它，[这](https://github.com/Drizin/CodegenCS/blob/master/src/CodegenCS.POCO/RefreshSqlServerSchema.csx)**会将 SQL Server 数据库的 Schema 提取到 JSON 文件中**
***   [在GenerateSimplePOCOs.csx](https://github.com/Drizin/CodegenCS/blob/master/src/CodegenCS.POCO/GenerateSimplePOCOs.csx)中编辑路径和 POCO 命名空间，并通过 PowerShell 脚本[GenerateSimplePOCOs.ps1调用它。](https://github.com/Drizin/CodegenCS/blob/master/src/CodegenCS.POCO/GenerateSimplePOCOs.ps1) **这将读取 JSON Schema 并构建 POCO。****

 **生成器[脚本](https://github.com/Drizin/CodegenCS/blob/master/src/CodegenCS.POCO/SimplePOCOGenerator.cs)非常易于理解和自定义。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-17T19:11:18.797

我有完全相同的要求从数据库生成对象，同时在 Dapper 中可靠有效地处理 CRUD，并采用不同的方法准备替换 Dapper 自己的 Dapper.Contrib 并支持实体框架模式定义，以便搭建数据库（模型，关系，键）可以使用实体框架工具来完成，例如[此处](https://www.learnentityframeworkcore.com/walkthroughs/existing-database)描述的示例，示例如下：

```
dotnet add package Microsoft.EntityFrameworkCore.SqlServer
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet ef dbcontext scaffold "Server=.\;Database=AdventureWorksLT2012;Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -o Model 
```

搭建脚手架后，可以从项目中删除以上依赖项。

目前[Dapper.SqlGenerator](https://github.com/t00/Dapper.SqlGenerator)已成功在生产中工作。就性能而言，它不会比 Dapper 产生任何开销，有时会减少通过其他方式生成查询的时间。

请记住，有 2 个单独的 nuget 包 - Dapper.SqlGenerator 用于从 EF（核心）脚手架模型生成纯 SQL 代码，Dapper.SqlGenerator.Async 用于使用 Dapper 对数据库运行 CRUD 查询。

TLDR；您可以使用 Entity Framework (Core) 从数据库构建模型，并使用 Dapper.SqlGenerator 在生成的对象上生成 CRUD 查询。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-13T18:31:57.533

我已经看到人们在哪里使用混合项目，使用 EF 来搭建数据库，但我不得不对输出进行修饰。对于推荐的工具，我确信它们很好，但我避免安装特殊软件，直到我尝试编写自己的解决方案。

也就是说，这是一个可能有用的小型 CLI 程序（满足我的需要）。免责声明，我不是一个经验丰富的 C# 程序员，所以请原谅任何可能不正常的事情。

```
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.IO;
using System.Linq;
using Dapper;

namespace Pocos
{
    public class TAB {
        public string TABLE_NAME { get; set; }
    }
    public class COL {
        public string COLUMN_NAME { get; set; }
        public int? ORIDINAL_POSITIONS { set; get; }
        public string DATA_TYPE { get; set; }
        public string CHARACTER_MAXIMUM_LENGTH { get; set; }
        public string NUMERIC_PRECISION { get; set; }
        public string NUMERIC_SCALE { get; set; }
    }
    class Program {
        static void Main(string[] args) {
            string sConnect = "Server=LT6-MARKL;Database=PKDEM815;UID=PKDEM815;Password=PKDEM815";
            IEnumerable tables;
            IEnumerable columns;
            List lines;
            using ( var conn = new SqlConnection(sConnect))
                tables = conn.Query("SELECT * FROM INFORMATION_SCHEMA.TABLES ORDER BY TABLE_NAME");
            // Roll through each table of the database and generate an .cs file, as a POCO
            foreach (TAB t in tables.OrderBy(t => t.TABLE_NAME)) {
                lines = new List();
                lines.Add("using System;");
                lines.Add("using System.Collections.Generic;");
                lines.Add("using System.Configuration;");
                lines.Add("using System.Data.SqlClient;");
                lines.Add("using Dapper;"); 
                lines.Add("using Dapper.Contrib.Extensions;");
                lines.Add("");
                lines.Add("namespace PKDataLayer.Models  {");
                lines.Add("");
                lines.Add("\t[Table(\"" + t.TABLE_NAME + "\")]");
                lines.Add("\tpublic class " + t.TABLE_NAME + " {");
                lines.Add("");
                using (var conn2 = new SqlConnection(sConnect)) {
                    columns = conn2.Query("SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '"+ t.TABLE_NAME +"' ORDER BY ORDINAL_POSITION");
                    foreach( COL c in columns) {
                        if (t.TABLE_NAME + "_KEY" == c.COLUMN_NAME || t.TABLE_NAME + "_SEQNUM" == c.COLUMN_NAME)
                            lines.Add("\t\t[Key]");
                        // SELECT DISTINCT DATA_TYPE FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME IN ( SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES )
                        if (c.DATA_TYPE == "char" || c.DATA_TYPE == "varchar")
                            lines.Add("\t\tpublic string " + c.COLUMN_NAME + " { get; set; }");
                        if (c.DATA_TYPE == "int")
                            lines.Add("\t\tpublic int " + c.COLUMN_NAME + " { get; set; }");
                        if (c.DATA_TYPE == "datetime")
                            lines.Add("\t\tpublic DateTime? " + c.COLUMN_NAME + " { get; set; }");
                        if (c.DATA_TYPE == "decimal" || c.DATA_TYPE == "numeric")
                            lines.Add("\t\tpublic decimal? " + c.COLUMN_NAME + " { get; set; }");
                    }
                }
                lines.Add("\t}");
                lines.Add("}");
                Console.WriteLine("Creating POCO for " + t.TABLE_NAME);
                using (TextWriter tw = new StreamWriter( t.TABLE_NAME + ".cs" ))
                    foreach (String s in lines)
                        tw.WriteLine(s);
            }
        }
    }
}
```**

# ios - UiImagePicker 视频反向播放

> ID：11056142
> 
> 赞同：1
> 
> 时间：2012-06-15T18:18:50.607
> 
> 标签：ios, uiimagepickercontroller, mpmovieplayercontroller

我正在尝试为自己创建一个愚蠢的小应用程序来学习 UIImagePicker 和可能的 AV Foundation（如果需要）的来龙去脉。我想要做的是允许用户录制视频并反向播放（从结尾开始到开头）。

到目前为止，我正在研究使用 UIImagePicker 录制视频，然后使用 MPMoviePlayerController 播放视频。任何人都可以提供有关此过程的反馈吗？我担心 UIImagePicker 不是正确使用的类，或者使用 setCurrentPlaybackRate:-1.0 反向视频播放会非常不稳定

# jquery - jQuery qTip：禁用隐藏元素

> ID：11056143
> 
> 赞同：0
> 
> 时间：2012-06-15T18:18:51.153
> 
> 标签：jquery, mouseover, hidden, qtip

我正在使用 jQuery qTip 在一组按钮上提供工具提示，但这些按钮最初默认是隐藏的，直到页面上的另一个操作触发它们显示。但是，如果您将鼠标悬停在页面上隐藏按钮所在的位置，我的 qTip 工具提示仍然会出现。

由于我正在淡入按钮，因此我需要为它们设置动画`opacity`from `0`to `1`，所以我不能完全隐藏按钮`display: none`（我相信这就是为什么它们仍在对`mouseover`事件做出反应）。有什么方法可以在`opacity`is时禁用工具提示`0`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:58:03.320

我发现 qTip 提示不会在带有 的元素上触发`visibility: hidden`，所以我通过在按钮容器上设置`opacity`和 来解决这个问题：`visibility`

```
#button-container {
    opacity: 0;
    visibility: hidden;
} 
```

`visibility`然后在动画之前切换`opacity`：

```
$('#button-container').css({visibility: 'visible'}).animate({opacity: 1}, 300); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:37:43.287

您可以禁用 qTips：

`$('*').qtip('disable')` // 或者指定选择器

还有一个启用：

`$('*').qtip('enable')`

基本上在您的淡入回调中，启用 qtips。

# javascript - jquery单击透明div不起作用

> ID：11056150
> 
> 赞同：0
> 
> 时间：2012-06-15T18:19:20.480
> 
> 标签：javascript, jquery, html, css

我必须在图像上箭头以导航到上一个或下一个图像。箭头的 div 没有背景颜色。当我单击该框时，会显示一个警报。这在整个 div 上都是可能的。当图像显示在带有箭头的 div 下时，单击在 Internet Explorer 中不起作用，但在 Firefox 和 Chrome 中起作用。用户无法导航到下一个或上一个图像。当您为带有箭头的框提供背景颜色时，它确实有效，但您将无法看到图像。

有人能帮帮我吗？下面是一个可以立即运行的示例项目。

谢谢！

```
<div id="photoViewer">     
        <div id="photoViewerDialog" class="photoViewerWindow">
            <div id="photoViewerImageCon">
                <img src="../../Content/ShowImage.jpg" class="image" alt="photo" />
                <div id="navigationBar">
                    <div id="navigationLeft"><span><</span></div>
                    <div id="navigationRight"><span>></span></div>
                </div>
            </div>
        </div>

        <div id="photoViewerMask"></div>    
    </div>

<script type="text/javascript">
        $(document).ready(function () {
            //transition effect     
            $('#photoViewerMask').fadeIn();
            $('#photoViewerMask').fadeTo("slow", 0.8);

            //Get the window height and width
            var winH = $(window).height();
            var winW = $(window).width();

            var borderSpace = 200;
            var minimumSize = 520;

            //Set width and height of photoviewer
            if (winW > minimumSize) {
                if ((winW - borderSpace) > minimumSize) {
                    $('#photoViewer .photoViewerWindow').css('width', winW - borderSpace);
                }
                else {
                    $('#photoViewer .photoViewerWindow').css('width', minimumSize);
                }
            }
            if (winH > minimumSize) {
                if ((winH - borderSpace) > minimumSize) {
                    $('#photoViewer .photoViewerWindow').css('height', winH - borderSpace);
                }
                else {
                    $('#photoViewer .photoViewerWindow').css('height', minimumSize);
                }
            }

            var photoViewerWindow = $('#photoViewer .photoViewerWindow');
            var imageCon = $('#photoViewer .photoViewerWindow #photoViewerImageCon');
            var infoCon = $('#photoViewer .photoViewerWindow #photoViewerInfoCon');
            var infoHeader = $('#photoViewer .photoViewerWindow #photoViewerInfoCon #photoViewerInfoHeader');
            var InfoThumbs = $('#photoViewer .photoViewerWindow #photoViewerInfoCon #photoViewerInfoThumbs');

            //Set width and line-height of photo to show
            $(imageCon).width($(photoViewerWindow).width() - $(infoCon).width());
            $(imageCon).css('line-height', $(photoViewerWindow).height() + 'px');

            //Set the popup window to center
            $('#photoViewerDialog').css('top', winH / 2 - $('#photoViewerDialog').height() / 2);
            $('#photoViewerDialog').css('left', winW / 2 - $('#photoViewerDialog').width() / 2);

            //transition effect
            $('#photoViewerDialog').fadeIn();
        });

        $('#navigationLeft').click(function () {
            alert('left');
        });

        $('#navigationRight').click(function () {
            alert('right');
        });

    </script> 
```

CSS

```
 #photoViewerMask {
    position:absolute;
    z-index:9000;
    background-color:#000000;
    top: 0;
    width: 100%;
    height: 100%;
    }

   #photoViewer .photoViewerWindow {
    position:fixed;
    min-width:520px;
    min-height:520px;
    max-height: 2048px;    
    z-index:9001;
    }

   #photoViewer .photoViewerWindow #photoViewerImageCon {
    display: block;
    float: left;
    height: 100%;
    max-height: 2048px;
    position: relative;
    z-index: 9003;
    text-align: center;
    background-color: Black;
    }

   #photoViewer .photoViewerWindow #photoViewerImageCon .image {
    vertical-align: middle;
    z-index: 9003;
    }

   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationBar {
    position: absolute;
    top: 0;    
    left: 0;
    width: 100%;
    height: 100%;
    }

   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationLeft,
   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationRight {
    color: rgb(255, 255, 255);
    color: rgba(255, 255, 255, 0.5);
    font-weight: bold;
    font-size: 4em;
    position: absolute;
    z-index: 9910;
    top: 0;
    height: 100%;
    cursor: pointer;
    }

   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationLeft:hover,
   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationRight:hover {
    color: rgb(255, 255, 255);
   }

   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationLeft
   {
    /*background-color:Aqua;*/
    width: 20%;
    left: 0px;
   }

   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationLeft span
   {
    position: absolute;
    left: 20px;
   }

   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationRight
   {
    /*background-color:Fuchsia;*/
    width: 80%;
    right: 0px;
   }

   #photoViewer .photoViewerWindow #photoViewerImageCon #navigationRight span
   {
    position: absolute;
    right: 20px;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T00:31:36.787

您似乎使用了很多 z-index，这可能是您的问题。尝试更改您的#navigationRight 跨度和#navigationLeft 跨度以获得更好的z-index，因为您的“跨度”可能会阻止该区域的“点击”功能。

这让我在不同的情况下多次陷入困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:08:58.470

不需要透明图像的解决方案：使用足够大以至于在您的 div 中不可见的文本 - 这是一个示例：

```
.my_clickable_div:after {
   content: '____________________________';
   font-size: 1000px;
   overflow: hidden;

   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
} 
```

因为这个问题已经在 IE9 中解决了，所以你可以把它放在一个条件 CSS 中，它将为旧的 IE 版本加载，如下所示：

```
<!--[if lt IE 9]><link rel='stylesheet' type='text/css' href='ie_old.css'/><![endif]--> 
```

我希望这有帮助 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:16:05.050

可以肯定的是，制作一个 1x1 透明 gif 并将其用作 div 的背景图像。这个技巧（是吗？）来自过去。

# python - 使用 zip 构建字典

> ID：11056152
> 
> 赞同：1
> 
> 时间：2012-06-15T18:19:28.670
> 
> 标签：python

我有一个名字列表：

```
['john smith', 'sally jones', 'bob jones'] 
```

我想以以下格式构建一个字典：

```
{'john smith': [], 'sally jones': [], 'bob jones': []} 
```

这就是我尝试使用 zip 时发生的情况

```
zip((all_crew_names, [[] for item in all_crew_names]))
[(['john smith', 'sally jones', 'bob jones'],), ([[], [], []],)] 
```

我在这里做错了什么，我该如何正确压缩它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T18:21:04.600

这里最简单的解决方案是字典理解：

```
names = ['john smith', 'sally jones', 'bob jones']
d = {name: [] for name in names} 
```

请注意，使用 可能很诱人`dict.fromkeys(names, [])`，但这会导致所有键使用*相同*的列表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T18:20:49.047

你不需要`zip`。

```
{name: [] for name in all_crew_names} 
```

在旧版本的 Python 中没有这样的字典理解，因此可以使用以下代码：

```
dict((name, []) for name in all_crew_names) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T18:24:03.090

您需要实际使用`dict`构造函数，并且括号太多：

```
dict(zip(all_crew_names, [[] for item in all_crew_names]) 
```

# python - python .os.path.walk 与直接文件

> ID：11056166
> 
> 赞同：0
> 
> 时间：2012-06-15T18:20:52.413
> 
> 标签：python

目录中的所有内容`/home/username/main/books/`都会被写入并返回，但`/home/username/main/index.html`不会被写入，因为“index.html”不是目录，因此无法遍历。我将如何修改脚本以说明它是否是一个目录，遍历它然后编写它找到的所有内容，如果它是直接文件，则编写它。

Python

```
def zipit (request):
  file_paths = ['/home/username/main/books/', '/home/username/main/index.html']
  buffer= StringIO.StringIO()
  z= zipfile.ZipFile( buffer, "w" )
  for p in file_paths:
    for dir, subdirs, files in os.walk(p):
      for f in files:
        filename = os.path.join(dir, f)
        z.write(filename, arcname = filename[15:])
  z.close()
  buffer.seek(0)
  final = HttpResponse(buffer.read())
  final['Content-Disposition'] = 'attachment; filename=dbs_custom_library.zip'
  final['Content-Type'] = 'application/x-zip'
  return final 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:27:46.577

您需要`p`在步行前检查。

*   如果是目录 => 走进去。
*   如果不是 => 只需将此文件添加到存档中。

修改后的代码：

```
def zipit (request):
  file_paths = ['/home/username/main/books/', '/home/username/main/index.html']
  buffer= StringIO.StringIO()
  z= zipfile.ZipFile( buffer, "w" )
  for p in file_paths:
    if os.path.isdir(p):
      for dir, subdirs, files in os.walk(p):
        for f in files:
          filename = os.path.join(dir, f)
          z.write(filename, arcname = filename[15:])
     else:
          z.write(p, arcname = p)
  z.close()
  buffer.seek(0)
  final = HttpResponse(buffer.read())
  final['Content-Disposition'] = 'attachment; filename=dbs_custom_library.zip'
  final['Content-Type'] = 'application/x-zip'
  return final 
```

# ios - 我的图像没有被裁剪

> ID：11056167
> 
> 赞同：0
> 
> 时间：2012-06-15T18:20:53.990
> 
> 标签：ios, uiimage

我有以下主要从 SO 获得的代码，但我的图像仍然没有被裁剪，我做错了什么？

```
@synthesize TopImage;
@synthesize BottomImage;
@synthesize RotaterImage;

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    TopImage = [UIImage imageNamed:@"zero.png"];
    [TopImage drawAtPoint:CGPointMake(0, 0)];
    [self cropImage:TopImage:0];
    [self addSubview:[[UIImageView alloc] initWithImage:TopImage]];
//        BottomImage = [UIImage imageNamed:@"zero.png"];
//        [BottomImage drawAtPoint:CGPointMake(0, 55)];
//        [self cropImage:BottomImage:50];
//        [self addSubview:[[[UIImageView alloc] initWithImage:BottomImage]retain]];
//        RotaterImage = [UIImage imageNamed:@"zero.png"];
//        [RotaterImage drawAtPoint:CGPointMake(0, 0) blendMode:kCGBlendModeNormal alpha:0];
//        [self addSubview:[[[UIImageView alloc] initWithImage:RotaterImage]retain]];
//        [self cropImage:RotaterImage:50];
    }
    return self;
}

-(void)cropImage:(UIImage *)image:(int)startCroppingPosition{
  CGRect tempRect = CGRectMake(0, startCroppingPosition, 23, 40);
  CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], tempRect);
  // or use the UIImage wherever you like
  image = [UIImage imageWithCGImage:imageRef]; 
  CGImageRelease(imageRef);
} 
```

我对 IOS 很陌生，因此感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:51:39.977

您正在创建一个新的裁剪图像，但没有告诉`init`方法:)

试试这个改变：

```
-(UIImage *)cropImage:(UIImage *)image:(int)startCroppingPosition{
  CGRect tempRect = CGRectMake(0, startCroppingPosition, 23, 40);
  CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], tempRect);
  // or use the UIImage wherever you like
  UIImage *newImage = [UIImage imageWithCGImage:imageRef]; 
  CGImageRelease(imageRef);
  return newImage;
} 
```

并且，在 中`init`，替换

```
[TopImage drawAtPoint:CGPointMake(0, 0)]; 
```

和

```
UIImageView* topImageView = [[UIImageView alloc] initWithImage:topImage];
topImageView.frame = CGRectMake(x,y,width,height); 
```

您的 crop 方法现在返回新裁剪的图像并将其存储在`TopImage`.

* * *

其他建议：

类名以大写字母开头，变量以小写字母开头。`TopImage`应该是真的`topImage`。

另外，我总是在你的方法中使用命名参数，所以

```
-(void)cropImage:(UIImage *)image:(int)startCroppingPosition 
```

应该是这样的

```
-(void)cropImage:(UIImage *)image startPosition:(int)startCroppingPosition 
```

当您在一个月后重新使用它时，这将使您的代码更具可读性（我在过去很难学到这一点！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:51:18.977

您只是更改图像而不是 UIImageView 的图像，

我要做的是替换：

```
[self addSubview:[[UIImageView alloc] initWithImage:TopImage]]; 
```

和

```
UIImageView *iv = [[UIImageView alloc] initWithImage:TopImage]];
iv.tag = 1000 //number does not matter 
[self.view addSubview:iv];
[iv release]; 
```

然后在裁剪图像中添加：

```
UIImageView *iv = [self.vief viewWithTag:1000];
iv.image = [UIImage imageWithCGImage:imageRef]; 
```

这应该可以按预期工作！

# php - Jquery File Upload plugin：动态更改上传路径？

> ID：11056171
> 
> 赞同：2
> 
> 时间：2012-06-15T18:21:02.150
> 
> 标签：php, jquery, ajax, plugins

我正在尝试为我目前正在处理的项目使用 blueimp [Jquery File Upload 插件。](http://blueimp.github.com/jQuery-File-Upload/)它完全符合我的需求，但有一个问题：我需要能够根据包含插件的页面上的 GET 变量来更改上传的路径。基本上，我将它用作车辆集合的图像管理器，并且我希望它连接到每辆车的单独文件夹。

我一直在查看文档和谷歌搜索，我找到了更改默认目录的方法（通过修改upload.class.php），但是因为我需要它是动态的，所以这不起作用。

我认为必须有一种方法可以将 POST 变量添加到激活 php 脚本的 ajax 调用中，但我什至无法找出这些 ajax 调用在哪里。我什至在整个代码中都找不到对任何一个 php 文件（index.php 和 upload.class.php）的引用。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T18:25:51.620

在您的表单中，添加如下字段：

```
<input type="hidden" name="path" value="<?echo $_GET['path'];?>"> 
```

在您上传文件的 PHP 中，只需使用以下命令提取路径：

```
$path = $_POST['path']; 
```

只需将路径放在 PHP 脚本中指定的位置即可。

# c# - 代码生成的按钮

> ID：11056173
> 
> 赞同：0
> 
> 时间：2012-06-15T18:21:10.433
> 
> 标签：c#, asp.net, visual-studio-2008

关于页面加载时代码生成按钮与设计视图中手动添加按钮的大问题。

不能手动添加 140 个按钮，所以我更喜欢代码。所有按钮**在单击按钮时的行为都相似**（它们会改变颜色）。我显然无法编写 140 个点击事件方法，那么我怎样才能制作**一个适用于所有人的通用事件**呢？

我想过这样做：

```
protected void btn_Click(object sender, EventArgs e)
        {
            Button btn1 = Panel2.FindControl("btn") as Button;
            btn1.BackColor = Color.Red;
         } 
```

因为所有的按钮都叫btn。

这就是我添加按钮的方式：

```
for (int a = 1; a <= 10; a++)
            {
                for (char b = 'A'; b <= 'N'; b++)
                {
                    btn = new Button();
                    btn.Text = "";
                    btn.Height = 20; btn.Width = 20;
                    btn.ToolTip = a + " " + b;
                    Panel2.Controls.Add(btn);
                }
                Panel2.Controls.Add(new LiteralControl("<br/>")); // this inserts a paragraph

            } 
```

我不知道是否`btn_Click(object sender, EventArgs e)`有效，因为在我单击一个按钮后全部消失。**我该如何解决？**

最后，我需要计算**有多少个按钮是红色的**。我的以下想法实用吗？我们知道如何找到名为“btn”的 Button 控件，**但如何找到“具有特定属性的按钮，例如查找名为 btn 且 tooltip=1A 的按钮。**我将浏览所有工具提示（1A，... 10N）并检查每个按钮（考虑到它们有独特的工具提示），每次检查颜色。对于每个红色，我计算一个按钮。

问题是它们都被称为“btn”吗？现在我可以通过工具提示来区分它们：1A、1B、...10N，正如我所说。非常感谢。

**编辑**>>>>>>> 我尝试了 Ben 的建议，但现在的问题是，当我单击其中任何一个按钮时，所有按钮都会消失。谢谢你的耐心。

```
public partial class Seatalloc2 : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                PopulateControls();
            }
        }

        protected void PopulateControls()
        {

            Panel1.Visible = true;
            Button btn;

            Panel2.Visible = true;
            DropDownList nrbileteddl = Panel1.FindControl("nrBileteddl") as DropDownList;
            nrbileteddl.Visible = true;

            for (int i = 1; i <= 5; i++)
            {
                nrbileteddl.Items.Add(i + "");
            }

            for (int a = 1; a <= 10; a++)
            {
                for (char b = 'A'; b <= 'N'; b++)
                {
                    btn = new Button();
                    btn.Text = "";
                    btn.Height = 20;
                    btn.Width = 20;
                    btn.ToolTip = a + " " + b;
                    btn.BackColor = Color.Green;
                    btn.Click += new EventHandler(btn_Click);
                    Panel2.Controls.Add(btn);
                }
                Panel2.Controls.Add(new LiteralControl("<br/>"));
            }
        }

        protected void btn_Click(object sender, EventArgs e)
        {
            Button btn = sender as Button;
            btn.BackColor = Color.Red;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:30:08.057

你在这里问了几个不同的问题。
您可以创建动态按钮（或任何其他控件），但为了使它们与页面生命周期、事件和视图状态保持同步，您需要在页面生命周期的初始化阶段创建它们（我无法理解）你的代码，如果这是你正在做的）
你把你的变量称为“btn”，但这不是在 ASP.NET 中识别控件的方式。它们每个都有一个 ID（和一个 UniqueID），并且这些 ID 应该是唯一的。如果将相同的事件处理程序附加到按钮，则不需要在事件处理程序中找到触发按钮，它是作为事件处理方法的一部分接收的发送者对象。

我强烈建议您阅读[这个 msdn 页面](http://msdn.microsoft.com/en-us/library/ms178472.aspx)，它解释了您所询问的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:53:59.997

为 ASP.NET 控件提供相同的 ID 不会获取所需的结果。如果更改按钮的颜色是唯一的要求，我强烈建议使用 JQuery，原因如下：

1.  易于实现，因为它会在客户端运行，所以速度非常快
2.  通过使用适当的选择器轻松获取单击按钮的计数（您可以使用按钮的任何属性，例如 ID、CSSClass 甚至是按钮的名称。

我的建议：

1.  在 JQuery 中，在文档加载时添加具有不同 ID 但名称相同的输入（类型=按钮）（例如“btn”）。
2.  在 JQuery 中编写另一个事件，该事件将监听所有名称为“btn”的按钮的按钮单击。在该函数中，使用 Style 属性更改按钮的颜色。
3.  最后，如果您想找出有多少按钮是红色的，也可以通过使用 JQuery 并使用适当的样式选择器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:29:31.230

您需要做的就是在每个 Button.Click 上挂接一个事件处理程序。这将使 Sender 作为 Button，因此您可以将其转换为 Button，并将其颜色设置为红色。并且用同样的方法你会增加一些局部字段来增加红色按钮的数量。

像这样的伪代码：

```
 int red_ = 0;
    void Method()
    {
        for(int i=0; i< 100; i++)
        {

            Button btn = new Button();
            btn.Click += new EventHandler(btn_Click);
        }
    }

    void btn_Click(object sender, RoutedEventArgs e)
    {
        Button btn = sender as Button;
        // set btn to red
        red_++;
    } 
```

# python - Python多处理：如何限制等待进程的数量？

> ID：11056176
> 
> 赞同：9
> 
> 时间：2012-06-15T18:21:20.123
> 
> 标签：python, multiprocessing, pool

当使用 Pool.apply_async 运行大量任务（大参数）时，进程被分配并进入等待状态，等待进程的数量没有限制。这可能最终会吃掉所有内存，如下例所示：

```
import multiprocessing
import numpy as np

def f(a,b):
    return np.linalg.solve(a,b)

def test():

    p = multiprocessing.Pool()
    for _ in range(1000):
        p.apply_async(f, (np.random.rand(1000,1000),np.random.rand(1000)))
    p.close()
    p.join()

if __name__ == '__main__':
    test() 
```

我正在寻找一种限制等待队列的方法，即只有有限数量的等待进程，并且 Pool.apply_async 在等待队列已满时被阻塞。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T18:36:37.570

`multiprocessing.Pool`有一个`_taskqueue`type 的成员`multiprocessing.Queue`，它接受一个可选`maxsize`参数；`maxsize`不幸的是，它在没有参数集的情况下构造它。

我建议使用传递给构造函数`multiprocessing.Pool`的复制粘贴进行子类化。`multiprocessing.Pool.__init__``maxsize``_taskqueue`

猴子修补对象（池或队列）也可以，但你必须猴子修补`pool._taskqueue._maxsize`，`pool._taskqueue._sem`所以它会很脆弱：

```
pool._taskqueue._maxsize = maxsize
pool._taskqueue._sem = BoundedSemaphore(maxsize) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-25T20:26:13.410

等待是否`pool._taskqueue`超过所需大小：

```
import multiprocessing
import time

import numpy as np

def f(a,b):
    return np.linalg.solve(a,b)

def test(max_apply_size=100):
    p = multiprocessing.Pool()
    for _ in range(1000):
        p.apply_async(f, (np.random.rand(1000,1000),np.random.rand(1000)))

        while p._taskqueue.qsize() > max_apply_size:
            time.sleep(1)

    p.close()
    p.join()

if __name__ == '__main__':
    test() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-27T19:11:54.463

这是最佳答案的猴子修补替代方案：

```
import queue
from multiprocessing.pool import ThreadPool as Pool

class PatchedQueue():
  """
  Wrap stdlib queue and return a Queue(maxsize=...)
  when queue.SimpleQueue is accessed
  """

  def __init__(self, simple_queue_max_size=5000):
    self.simple_max = simple_queue_max_size  

  def __getattr__(self, attr):
    if attr == "SimpleQueue":
      return lambda: queue.Queue(maxsize=self.simple_max)
    return getattr(queue, attr)

class BoundedPool(Pool):
  # Override queue in this scope to use the patcher above
  queue = PatchedQueue()

pool = BoundedPool()
pool.apply_async(print, ("something",)) 
```

这在 Python 3.8 中按预期工作，其中多处理池`queue.SimpleQueue`用于设置任务队列。听起来`multiprocessing.Pool`自 2.7 以来的实现可能已经改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T22:45:45.433

在这种情况下，您可以使用 maxsize 参数添加显式队列并使用`queue.put()`而不是。`pool.apply_async()`然后工作进程可以：

```
for a, b in iter(queue.get, sentinel):
    # process it 
```

如果您想将内存中创建的输入参数/结果的数量限制为大约活动工作进程的数量，那么您可以使用`pool.imap*()`以下方法：

```
#!/usr/bin/env python
import multiprocessing
import numpy as np

def f(a_b):
    return np.linalg.solve(*a_b)

def main():
    args = ((np.random.rand(1000,1000), np.random.rand(1000))
            for _ in range(1000))
    p = multiprocessing.Pool()
    for result in p.imap_unordered(f, args, chunksize=1):
        pass
    p.close()
    p.join()

if __name__ == '__main__':
    main() 
```

# apache - RJDBC 未作为 Rapache 中的库加载

> ID：11056180
> 
> 赞同：0
> 
> 时间：2012-06-15T18:21:44.817
> 
> 标签：apache, r, rjava, rapache

所以我需要在我的 Rapache 程序中访问 MSSQL 服务器，当我尝试在我的 Rapache 代码中将 RJDBC 作为库加载时，我得到服务器错误。在日志中它看起来像这样：

```
 referer: http://10.21.8.145/
    Error : .onLoad failed in loadNamespace() for 'rJava', details:
      call: dyn.load(file, DLLpath = DLLpath, ...)
      error: unable to load shared object '/usr/lib/R/site-library/rJava/libs/rJava.so':
      libjvm.so: cannot open shared object file: No such file or directory
    Error: package/namespace load failed for 'rJava'
 Traceback:
    5: stop(gettextf("package/namespace load failed for %s", sQuote(package)), 
   call. = FALSE, domain = NA)
    4: library(rJava)
    3: eval.with.vis(expr, envir, enclos)
    2: eval.with.vis(ei, envir)
    1: source("/var/www/brew/optimization.R")
    [Fri Jun 15 13:57:29 2012] [error] [client 10.21.2.79] File does not exist:  /var/www/favicon.ico 
```

我还检查了 rJava.so 存在于该目录中。它与 libjvm.so 有关吗？

问题是当我在 R 中运行这个库（RJDBC）时，它说：

```
 Loading required package: DBI
    Loading required package: rJava
    Warning message:
    replacing previous import 'show' when loading 'rJava' 
```

然后我所有的 RJDBC 代码都可以正常工作。那么这是某些 Java 配置的问题，还是 rApache 由于警告消息而无法运行库的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:44:23.300

是的，它与 libjvm.so 相关；) rjava.so 找不到它！

各种 linux 发行版（我想你正在运行 linux？）将在受限环境中启动 apache，从而限制进程在哪里可以找到共享库。我建议查看 shell 脚本以查看是否发生这种情况。

我还将调查您的动态链接器运行时绑定配置，例如 /etc/ld.so.* 文件以及 ldconfig 命令。

尝试从您的个人 R 会话中运行您的代码。如果它没有在那里运行，那么您需要先修复您的 java/rJava 安装。如果它确实在那里运行，那么探索我上面讨论的主题。

哦，我刚记起来：rJava 可能在一些 java 特定的环境变量中，位于 rJava 包安装中。看看你的本地会话中是否发生了这种情况。如果是这种情况，那么在运行 apache/rApache 时您很可能需要这些设置。

正如我上面提到的，如果您的发行版正在限制 apache 的环境，那么您必须将这些 Java 环境变量填充到该限制过程中。

干杯!

杰夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:48:45.293

我遇到了同样的问题，并确定原因是 rApache 没有设置`LD_LIBRARY_PATH`环境变量。这需要在为（或依赖于它的任何包）创建 R 环境之前进行设置，`rJava`以正确初始化（即能够找到 的路径`libjvm.so`）。

你可以用一个简单的测试脚本来检查：

```
setContentType('text/text')
cat(Sys.getenv()['LD_LIBRARY_PATH'], '\n')
DONE 
```

不幸的是，使用 Apache 指令的简单修复`SetEnv`不起作用。相反，您需要执行以下操作：

（注意以下是在 64 位 RHEL5 服务器上完成的）

添加一个文件来`/etc/ld.so.conf.d`调用`rApache_rJava.conf`，内容如下：

```
/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/amd64/server/ 
```

（上面的行是`libjvm.so`我服务器上父目录的路径）

作为根：

```
$ /sbin/ldconfig 
```

然后重新启动Apache

在 Apache 重新启动后，您*应该*能够通过 rApache 运行依赖于 的 R 脚本`rJava`，例如：

```
library(rJava) 
```

在我的博客上还概述了上述过程以及其他参考链接：http: [//oddhypothesis.blogspot.com/2012/06/making-rapache-load-rjava.html](http://oddhypothesis.blogspot.com/2012/06/making-rapache-load-rjava.html)

## 编辑：全面披露

上面链接的博客是我自己的

# mod-rewrite - Mod重写app.php lighttpd

> ID：11056182
> 
> 赞同：3
> 
> 时间：2012-06-15T18:21:57.897
> 
> 标签：mod-rewrite, symfony, lighttpd

我想重写我的 Symfony 2 URL，而不是显示

> www.example.com/app.php/path

表明

> www.example.com/path

如何使用 lighttpd 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T18:06:32.733

就如此容易：

```
url.rewrite-if-not-file = (
    "(.+)" => "/app.php$1"
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T07:30:15.233

这是一篇关于[如何使用 Lighttpd 配置 Symfony 2](https://web.archive.org/web/20160409212824/http://henrik.bjrnskov.dk/symfony2-lighttpd/)的新文章：

```
$HTTP["host"] =~ "myhost\.tld" {
    server.document-root = "/home/user/www/myhost/web"

    url.rewrite-if-not-file = (
        "^/$" => "$0",
        "^(?!app_dev\.php/)[^\?]+(\?.*)?" => "app.php/$1$2",
    )
} 
```

# javascript - 使用 Mocha 进行 DOM 测试

> ID：11056183
> 
> 赞同：0
> 
> 时间：2012-06-15T18:22:00.777
> 
> 标签：javascript, unit-testing, mocha.js

是否可以用 Mocha 测试一个 JS 函数是否打开了一个窗口？

例如，测试的一部分是查看是否打开了一个窗口，比如 Facebook，以便用户共享当前应用程序，那么 Mocha 是否有可能在我调用时检测到一个窗口已打开`window.open(url, target)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:30:00.230

当然。[`window.open`](https://developer.mozilla.org/en/DOM/window.open)如果调用失败则返回`null`，因此只要您可以访问 Mocha 中的返回值，您就可以测试它是否成功。

# java - 如何读取注释文件？

> ID：11056189
> 
> 赞同：0
> 
> 时间：2012-06-15T18:22:43.363
> 
> 标签：java, file, class, annotations

我不知道，我怎样才能读取文件。我想阅读 FK.java 文件，但给我一个类未找到异常。FK 是注解 java 文件。（我试过“src/annotations/FK.java”但没有用。

```
private static String clazz = "src/annotations/FK";

public static List<Object> GetAnnotations() throws ClassNotFoundException{

    Class<?> c;
    c = Class.forName(clazz);

    List<Object> result = new ArrayList();

    Field[] fields = c.getDeclaredFields();
    for (int j = 0; j < fields.length; j++)
    {
        Annotation[] annot = fields[j].getAnnotations();
        for (int k = 0; k < annot.length; k++)
        {
            result.add(annot[k].annotationType());
        }
    }
    return result;
}

public static void main(String[] args) throws ClassNotFoundException {
    System.out.println(GetAnnotations());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:26:16.753

类的名称应包含点 ( `.`) 而不是斜线 ( `'/`')

```
private static String clazz = "annotations.FK"; 
```

然后

```
Class.forName(clazz); 
```

将尝试从提供的类路径加载*类* `annotations/FK.class`。如果您只有 .java 文件，则需要先编译它。

编辑：基于评论的固定路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:41:00.450

您的问题是，您试图使用错误的语法为带注释的类获取 Class 对象。

-`Class.forName(String)`方法将完全限定的 Java 类名作为参数。这是包含在您的 Java 文件中声明的类的包的名称，后跟您的类名。在您的情况下，可能是`"annotations.FK"`.

另一个注意事项是，仅仅拥有该类的 Java 源代码文件是行不通的。您将需要在类路径中包含已编译的类。

这是一个简单的例子：

```
// mytoplevelpackage/mypackage/MyClass.java

package mytoplevelpackage.mypackage;

public class MyClass {}

// mytoplevelpackage/OtherClass.java

package mytoplevelpackage;

public class OtherClass {
  public static void main(String[] args) throws ClassNotFoundException {
    Class c = Class.forName("mytoplevelpackage.mypackage.MyClass");
  }
} 
```

# c# - 用户控件中的条件

> ID：11056192
> 
> 赞同：1
> 
> 时间：2012-06-15T18:23:03.290
> 
> 标签：c#, asp.net, vb.net, user-controls

假设我有一个带有下拉菜单/文本框/网格视图等的用户控件。所有这些都由一个参数（或多个参数）控制

假设我将我的用户控件添加到页面并设置如下：

```
userControl1.Type = Advanced; 
```

或者

```
userControl1.Type = Regular; 
```

然后在我的多个地方的用户控件中，我有类似的东西：

```
 if Type ==Advanced
    gridview.DataSource=dataTableAdvanced;
    else if Type==Regular
    gridview.DataSource = dataTableRegular; 
```

或类似的东西：

```
if Type==Advanced
dropdown1.Visible=true
else
dropdown1.Visible=false 
```

如果我有参数，控制会很快变得混乱，假设有五个不同的值可用。有没有更好的技术来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:27:03.413

您的高级控件可以从您的常规控件派生并覆盖设置依赖对象的方法。

```
class RegularControl
{
   public virtual void SetStuff() { //visible, data source, etc }
}
class AdvancedControl: RegularControl
{
   public override void SetStuff() { // same deal }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:25:56.120

听起来你真的应该有 2 个控件，一个 Advanced 和一个 Regular。

# jquery - jQuery colorbox 库混合图像和视频

> ID：11056195
> 
> 赞同：0
> 
> 时间：2012-06-15T18:23:11.420
> 
> 标签：jquery, jquery-plugins, colorbox

我正在使用彩盒插件，我想在画廊中包含一些视频，请参阅此代码：http: [//jsfiddle.net/29Bb4/](http://jsfiddle.net/29Bb4/)基本上视频在下一个项目加载时没有加载任何想法？

当我这样使用时：

`$(".group1").colorbox({rel:'group1', iframe:true, width:"80%", height:"80%"});`它破坏了画廊效果：

*   或者有什么好的弹出插件可以同时使用图像和视频吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T02:51:52.653

好吧，您对两种内容类型（图像和 iframe）有不同的设置。将它们显示为同一组很容易，但您必须分别定义它们的设置：

```
$(".group1").colorbox({rel:'group1'});
$(".iframe").colorbox({rel:'group1', iframe:true, width:"80%", height:"80%"}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T19:05:24.487

**由于在您的问题中您允许使用替代解决方案/插件**，因此我建议您使用 fancybox。这是您的示例 html 的演示。

[http://jsfiddle.net/lucuma/Skpyw/3/](http://jsfiddle.net/lucuma/Skpyw/3/)

[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

```
<p><a class="group1" rel="group1" href="http://www.jacklmoore.com/colorbox/content/ohoopee1.jpg" title="Me and my grandfather on the Ohoopee.">Grouped Photo 1</a></p>
        <p><a class="group1" rel="group1" href="http://www.jacklmoore.com/colorbox/content/ohoopee2.jpg" title="On the Ohoopee as a child">Grouped Photo 2</a></p>
        <p><a class="group1" rel="group1" href="http://www.jacklmoore.com/colorbox/content/ohoopee3.jpg" title="On the Ohoopee as an adult">Grouped Photo 3</a></p>

        <p><a class='group1 fancybox.iframe' rel="group1" href="http://www.youtube.com/embed/KHy7DGLTt8g?rel=0" title="video">Video (Iframe/Direct Link To YouTube)</a></p>

$(".group1").fancybox({
       maxWidth    : 800,
        maxHeight    : 600,
        fitToView    : false,
        width        : '70%',
        height        : '70%',
        autoSize    : false,
        closeClick    : false,
        openEffect    : 'none',
        closeEffect    : 'none' 
});

$('#btnOpen').click(function(e) {
   e.preventDefault();
    $('.fancybox:eq(0)').click();
}); 
```

# c# - wpf 组合框绑定

> ID：11056196
> 
> 赞同：8
> 
> 时间：2012-06-15T18:23:24.050
> 
> 标签：c#, wpf, list, binding, combobox

嗨，我正在尝试将 List<> 绑定到组合框。

```
<ComboBox Margin="131,242,275,33" x:Name="customer" Width="194" Height="25"/>

public OfferEditPage()
    {
        InitializeComponent();
        cusmo = new CustomerViewModel();
        DataContext = this;
        Cusco = cusmo.Customer.ToList<Customer>();
        customer.ItemsSource = Cusco;
        customer.DisplayMemberPath = "name";
        customer.SelectedValuePath = "customerID";
        customer.SelectedValue = "1";
    } 
```

我没有错误，但组合框总是空的。库斯科是我名单的财产。我不知道这段代码有什么问题。你能帮助我吗？

问候

```
 public class Customer
{
    public int customerID { get; set; }
    public string name { get; set; }
    public string surname { get; set; }
    public string telnr { get; set; }
    public string email { get; set; }
    public string adress { get; set; }
} 
```

这是我的模型的客户类。

```
public class CustomerViewModel
{
    private ObservableCollection<Customer> _customer;

    public ObservableCollection<Customer> Customer
    {
        get { return _customer; }
        set { _customer = value; }
    }

    public CustomerViewModel()
    {
        GetCustomerCollection();
    }

    private void GetCustomerCollection()
    {
        Customer = new ObservableCollection<Customer>(BusinessLayer.getCustomerDataSet());
    }

} 
```

这就是 ViewModel。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-15T18:35:38.290

尝试使用实际的 Binding 对象设置 ItemsSource 属性

XAML 方法（推荐）：

```
<ComboBox
    ItemsSource="{Binding Customer}"
    SelectedValue="{Binding someViewModelProperty}"
    DisplayMemberPath="name"
    SelectedValuePath="customerID"/> 
```

程序化方法：

```
Binding myBinding = new Binding("Name");
myBinding.Source = cusmo.Customer; // data source from your example

customer.DisplayMemberPath = "name";
customer.SelectedValuePath = "customerID";
customer.SetBinding(ComboBox.ItemsSourceProperty, myBinding); 
```

此外，您的 Customer 属性上的设置器应该引发 PropertyChanged 事件

```
public ObservableCollection<Customer> Customer
{
    get { return _customer; }
    set
    {
        _customer = value;
        RaisePropertyChanged("Customer");
    }
} 
```

如果上述方法不起作用，请尝试将绑定部分从构造函数移至 OnLoaded 覆盖方法。当页面加载时，它可能会重置您的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:55:35.103

作为史蒂夫答案的扩展，

您需要设置表单的数据上下文。

目前你有这个：

```
InitializeComponent();
cusmo = new CustomerViewModel();
DataContext = this; 
```

应该改成这样：

```
InitializeComponent();
cusmo = new CustomerViewModel();
DataContext = cusmo; 
```

然后正如史蒂夫指出的那样，您将需要视图模型上的另一个属性来存储所选项目。

# c# - MVC 3 覆盖表单后操作方法

> ID：11056198
> 
> 赞同：0
> 
> 时间：2012-06-15T18:23:25.113
> 
> 标签：c#, asp.net-mvc-3

缠绕在这个轴上。所以我在表单中有几个按钮

```
@using (Html.BeginForm("Edit", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" }))
{

<input id="create" class="art-button" type="submit" value="Save" />
<input id="create" class="art-button" type="submit" value="Cancel" />    
} 
```

我想要做的是当用户点击取消按钮时，它应该点击一个不同的操作方法，这与开始表单中的不同。我可以在表单之外有取消按钮，但这不是一个选项，因为它的物理位置需要靠近表单的其余控件。或者我应该使用链接按钮而不是提交类型？对此有任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:28:50.870

如果您不需要在“取消”上发布任何数据，那么只需使用带有[Html.ActionLink](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)方法的链接按钮，例如：

```
@Html.ActionLink("Link Text", "MyAction", "MyController") 
```

* * *

您还可以使用 javascript 来更改表单的操作：

```
document.myform.action ="/MyController/MyAction"; 
```

...这当然需要您使用 javascript 处理取消按钮的单击事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:33:11.347

正如musefan所说，您可以将其设为链接

如果你想保留你的按钮，你将不得不在这个按钮上使用一些 jQuery。

第一个解决方法是将“取消”按钮的 ID 更改为“取消”而不是“创建”（每个元素都应该有一个唯一的 ID）。

```
<input id="cancel" class="art-button" type="submit" value="Cancel" /> 
```

然后您需要将单独的单击事件绑定到“取消”按钮以调用不同的操作。

```
$("#cancel").click(function(e) {
    e.preventDefault(); //Keep form from posting
    window.location.href = "REDIRECT URL";

    //If I want to post
    $.post("URL", data { ... });
}); 
```

# php - 在数据库服务器上存储大量表

> ID：11056199
> 
> 赞同：1
> 
> 时间：2012-06-15T18:23:28.513
> 
> 标签：php, mysql, performance, hosting, mybb

MySQL/PHP：我有以下情况：我将在一台服务器上多次安装一个包含大约 70 个表的软件（要明确：这是一个 MyBB 论坛）。比如说，我将安装 500 次（例如，500 个不同的论坛，例如 10 个不同的主题和 5 种不同的语言）。

我正在查看以下选项：

1.  将所有论坛存储在一个模式中，并更改每个论坛的前缀。
2.  将每个论坛存储在不同的模式、相同的前缀中。
3.  只创建一组 70 个表，并为每个表附加一个“forumID”以供选择。
4.  创建多组 70 个表，为每个表附加一个 forumID，并将一组表用于约 10-100 个论坛。

对于 1 和 2，我不必更改大部分 MyBB 代码（易于维护），对于 3 和 4，我必须编写某种搜索模式以用于每个查询以检测所有选定的表和附加 WHERE 子句（或者如果不存在则创建它）也考虑 forumID（难以维护）。

如果我要通过 MyBB 维护来判断这一点，它将是前两个选项之一。但我还应该考虑：对于 MySQL 服务器来说，什么性能更高、速度更快？

谢谢，克里斯

/edit：所有论坛都将使用相同的代码。我不想维护这个东西的500个不同的安装......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:04:49.473

我只是复制架构公关。论坛。

论据：

1.  这是一个易于自动化的过程，自动化它可能比重写所有 SQL 语句以使用“forumid”列更快。
2.  该解决方案将允许您轻松扩展到新硬件。扩展数据库总是复杂且昂贵的（与扩展实例网络服务器相比）。
3.  将每个论坛分开还可以让您将前 5 个论坛转移到单独的机器上。如果这是您从中赚钱的东西，您可以拥有“高级论坛”（每台服务器 10 个，x$/月）和“免费增值论坛”（免费，但它们都在一台服务器上，没有性能保证）
4.  如果您有 500 个不同的论坛，那么每个论坛的利用率都会有很大差异。任何允许您为每个论坛使用不同表的解决方案都将导致数据库服务器上的缓存命中率更高，因为它能够更有效地缓存（而缓存命中率是高数据库性能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:13:52.307

我认为您应该忘记选项 3 和 4，因为：

*   表演

你的表会变大，它们的索引也会变大。较大的索引意味着较慢的插入。选择可能不会受到太大影响。

据我所知，所有缓冲区和缓存都是实例范围的，因此在这方面，所有选项都是等效的。

*   行政

重构代码的麻烦，加上每次升级后需要重做工作（对我来说）足以放弃这个想法。此外，即使是升级程序也可能需要调整以适应您的自定义布局。

您可能希望单独备份和恢复您的论坛。然后你需要自己编写备份脚本，`mysqldump`在这种情况下无能为力。并在每次添加新表时更新备份脚本（可能在升级期间发生）。

在升级过程中，数据库结构可能会发生变化。一口气改变整个结构可能听起来令人震惊。但是您将需要同时关闭所有 500 个论坛，并进行非常长的结构更改，而不是 500 个更小、更快的更改。

*   可扩展性

（主要适用于选项 4）如果需要，将一个单独的论坛数据库移动到另一台服务器似乎更困难。

*   安全

如果入侵者破坏了您的应用程序，我相信她更容易访问所有论坛，但这只是一个疯狂的猜测。

* * *

选项 1 和 2 的性能一样好，表是否在同一个数据库上只是语法问题。

我偏爱选项 2，因为它更容易在每个数据库的基础上授予访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:52:11.363

我会选择替代方案 3（在其他表上创建一个论坛表和一个 forumID 列）。

通过这种方式，您可以从您的应用程序创建新论坛，而无需管理不同的模式或表。

在我看来，进行模式更改比在论坛表中创建新行要差一个数量级。

# jquery - jquery在两个类之间动画背景图像

> ID：11056202
> 
> 赞同：1
> 
> 时间：2012-06-15T18:23:32.200
> 
> 标签：jquery, html, css, user-interface

我已经有一段时间没有编程了，对此我不太了解。

我有一个 div，有两个类。悬停时，我想切换背景图像，使用 CSS 轻松完成。

但我希望它具有淡化效果。我虽然这与使用`toggleClass`jQuery UI 一样简单，但它并没有达到预期的效果。

```
$(".clicker").hover( function() {
    $(this).parent().toggleClass("anim", 500);
});​ 
```

如何获得两个类之间的淡入淡出效果？

[现场示例在这里](http://jsfiddle.net/Kyle_Sevenoaks/VfqLA/)。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:30:23.470

但是 jQuery UI 可以制作切换动画`background-image`吗？

我更喜欢使用简单的褪色效果：

```
$(".clicker").hover(function() {
    $(this).parent().fadeOut(500, function() {
        $(this).toggleClass("anim").fadeIn(500);
    });
});​ 
```

**演示：http:** [//jsfiddle.net/VfqLA/2/](http://jsfiddle.net/VfqLA/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:56:12.890

## *[jsBin 演示](http://jsbin.com/udezuh/edit#javascript,html,live)*

使用两个 DIV，并切换内部 DIV 的可见性 ( `#lighter_2`)

```
<div id="lighter">     
    <div id="lighter_2"></div>     
    <p class="clicker">Darkspore</p>
</div> 
```

CSS：

```
#lighter{
    position:relative;
    background: url(http://placehold.it/250x250/f0f);
    width: 100%;
    height: 400px;
}

#lighter_2{
    display:none;
    position:absolute;
    background: url(http://placehold.it/250x250/cf5);
    width: 100%;
    height: 400px;
}

.clicker{
    position:relative;
    z-index:2;
    background: #fff;
    cursor:pointer;
} 
```

只需打开那个 div`hover`

```
$('.clicker').hover(function(){
  $('#lighter_2').stop().fadeTo(800,1);
},function(){
  $('#lighter_2').stop().fadeTo(800,0);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:28:52.147

您将使用 .fadeIn() 和 .fadeOut() 参见：[http ://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

**注意** 您可以使用 fadeOut() 旧的，然后在下一个调用中使用新的 fadeIn()，如果这就是您想要的，这应该转换两者。

# jquery - 从按钮类文本而不是图像链接打开 Fancybox

> ID：11056209
> 
> 赞同：1
> 
> 时间：2012-06-15T18:24:03.253
> 
> 标签：jquery, fancybox

这可能是一个简单的修复，但它肯定难倒我！无论如何，我正在尝试使用按钮类链接到缩略图库。例如：

这是我的fancybox初始化代码：

```
 $(document).ready(function() {
    $(".fancybox-thumb").fancybox({
        beforeShow: function(){ 
            $("body").css({"overflow":"hidden"}); 
        }, 
        afterClose: function(){ 
            $("body").css({"overflow":"visible"}); 
        }, 
        padding : 2,
        modal : false,
        prevEffect  : 'fade',
        nextEffect  : 'fade',
        nextSpeed   : 'slow',
        prevSpeed   : 'slow',
        openSpeed   : 'slow',
        closeSpeed  : 'slow',
        helpers : {
            title   : {
                type: 'outside'
            },
            overlay : {
                opacity : 0.8,
                css : {
                    'background-color' : '#000'
                }
            },
            thumbs  : {
                width   : 50,
                height  : 50
            }
        }
    });
}); 
```

在我的 HTML 中，我有以下内容：

```
<a class="fancybox-thumb" rel="fancybox-thumb" href="images/weddings/PienkosWed-1649.jpg" title="Image 1 Text">
                    <img src="images/weddings/PienkosWed-1649.jpg" alt="" width="150" /></a>
                <a class="fancybox-thumb" rel="fancybox-thumb" href="images/weddings/PienkosWed-1653.jpg" title="Image 2 Text"></a>
                <a class="fancybox-thumb" rel="fancybox-thumb" href="images/weddings/PienkosWed-1655.jpg" title="Image 3 Text"></a>
                <a class="fancybox-thumb" rel="fancybox-thumb" href="images/weddings/PienkosWed-1657.jpg" title="Image 4 Text"></a>
                <a class="fancybox-thumb" rel="fancybox-thumb" href="images/weddings/PienkosWed-1661.jpg" title="Image 5 Text"></a>
                <a class="fancybox-thumb" rel="fancybox-thumb" href="images/weddings/PienkosWed-1667.jpg" title="Image 6 Text"></a> 
```

这很好用，除了我想从一个按钮类打开fancybox，比如：

```
<a href="OPEN FANCYBOX" class="button1"><span></span><strong>Launch Picture Gallery</strong></a> 
```

我不知道该怎么做，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:34:31.133

尝试这个：

```
$('.button1').click(function(e) {
   e.preventDefault();
    $('.fancybox-thumb:eq(0)').click();
});
​ 
```

演示：http: [//jsfiddle.net/lucuma/Skpyw/2/](http://jsfiddle.net/lucuma/Skpyw/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:50:58.777

在文档就绪时添加以下点击事件。

```
$("a.button1").click(function(){
  $(".fancybox-thumb").trigger("click");
}); 
```

# nhibernate - 新的身份生成

> ID：11056210
> 
> 赞同：0
> 
> 时间：2012-06-15T18:24:04.303
> 
> 标签：nhibernate, fluent-nhibernate

我有一个问题，当我创建一些新实体时，ID 序列类似于 1001、2002、3003，......有时没有任何规则，如 1003 等等。

我希望每个表都有这样的顺序：1,2,3,4,5,...

我觉得问题始于新的 1.9.0.0 S#arp 项目。从 1.6.0.0 开发的项目或从 1.6.0.0 开始然后转换为 1.9.0.0 的项目都可以并且具有良好的顺序。

你知道哪里有问题吗？

我认为我必须在某个地方进行某些操作，但我不知道 S#arp 这么好我不知道，哪里可能是个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:58:03.457

从它的外观看来，您目前正在使用 POID 生成器生成 ID。您可以在这篇文章中阅读所有相关信息：http: [//nhforge.org/blogs/nhibernate/archive/2009/03/20 /nhibernate-poid-generators-revealed.aspx](http://nhforge.org/blogs/nhibernate/archive/2009/03/20/nhibernate-poid-generators-revealed.aspx)

现在从您提供的 ID 来看，它看起来像是在使用 HiLo 生成器，请阅读相同的内容.. 为您提供一个要点，每个 sessionFactory 都保留一个保留的 ID 集（可以定义），它可以分配和当它遍历所有 id 时，它会得到一个新集，并且下一个高值存储在相同 dB 的表中。因此，每次重新创建 sessionFactory 时，它都会得到一个新集，这就是为什么在你的 ids 中增加如果这个值为 1000 .. 我在Sharp Architecture wiki 中找到了一个参考：[https](https://github.com/sharparchitecture/Sharp-Architecture/wiki/HiLoGenerator) ://github.com/sharparchitecture/Sharp-Architecture/wiki/HiLoGenerator并且看起来他们将它设置为 1000 ..

我猜你定义了一个类似的约定，这就是你看到这个的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T09:21:50.330

如果您想要一个不错的序列，那么我建议您将`Id`策略更改为身份。然而，这些类型的生成器有一些缺点，例如不允许批处理和破坏工作单元策略。

正如您所指出的， s#arp 使用的`HILO`策略不会受到上述缺点的影响。然而，一个缺点（实际上它不是一个缺点）是您`Id's`不是连续的（1001、1002、2001、2002、3003 等），因为每次构建会话工厂时都会`HI`从`hilo`表中获取一个新的。当您多次构建项目时，这在您的开发机器上更为明显。在生产服务器上，随着会话工厂的重建更少，差距也更小。您也可以将 lo 减少到`10`而不是`100`减少差距！

IMO 内部 ID 是连续的并不重要，毕竟它们是内部的，对吗？此外，如果您删除记录，则无论如何都会出现间隙！

如果您的表`id`依赖于业务逻辑，那么 internal`id's`不是您的答案，也许您需要一个内部 id，然后是一个为您的业务逻辑提供唯一索引的列`Id`。

我会问自己为什么您认为顺序内部 ID 很重要？希望您会意识到 if 实际上还不够重要而不必担心。

# android - Android：更改启动器活动时权限被拒绝错误

> ID：11056214
> 
> 赞同：3
> 
> 时间：2012-06-15T18:24:31.850
> 
> 标签：android, android-intent, android-manifest, android-activity, android-xml

我有一个我正在尝试启动的 android 应用程序，它给了我错误

```
java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.hoosierag/.MainActivity } from null (pid=32395, uid=2000) not exported from uid 10125 
```

当我尝试更改清单中的启动器活动时出现此错误。当我在模拟器上启动它时，我也没有收到此错误，但是当我尝试在设备上启动它时。我已经在 3 种不同的 android 设备上尝试过，它都给出了同样的错误 3 次。这是我的清单代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.hoosierag"
      android:versionName="1.11" android:versionCode="4">
        <uses-sdk android:minSdkVersion="3"/>
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
        <uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>
        <uses-permission android:name="android.permission.DISABLE_KEYGUARD"></uses-permission>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>

    <application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar">
        <activity android:name=".MainActivity" android:screenOrientation="portrait"
                  android:label="MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="Main" android:screenOrientation="portrait"/>
        <activity android:name="News" android:screenOrientation="portrait"/>
        <activity android:name="Audio" android:screenOrientation="portrait"/> 
```

最初，Launcher Activity 是名为 Main 的 Activity。然后我创建了一个名为 MainActivity 的新活动并将其作为启动器类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T18:33:42.337

正如[乔米亚所说](https://stackoverflow.com/a/6015331/19679)：

> 您看到的`java.lang.SecurityException`是因为您可以输入两个指向相同活动的条目。删除第二个，你应该很高兴。

最后在清单中将 Main Activity 更改为 MainActivity 之后 Clean your Project from ***Project->Clean...***在设备上运行之前

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-01T19:25:20.060

您应该尝试使用导出的属性在 AndroidManifest.xml 中标记 MainActivity。像这样：

```
<activity android:exported="true" android:name=".MainActivity" android:screenOrientation="portrait" android:label="MainActivity"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:41:00.853

通常，要求`null`不`SecurityException`导出组件。有可能不是您的问题。Activity 有`<intent-filter>`标签时会自动导出。我建议

*   清理项目
*   建造
*   从设备完全卸载应用程序
*   重新安装

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-16T10:31:23.650

**如果您使用的是 GIT：**
删除整个存储库文件夹并将其与您的 git-server 重新同步。

# java - 如何阅读测试日志

> ID：11056217
> 
> 赞同：-1
> 
> 时间：2012-06-15T18:24:35.210
> 
> 标签：java, maven

我已经运行了一个 maven 测试，现在我有它的日志，但是在那个大日志文件中的确切位置可以找到它所指出的错误。我在底部看到的所有内容都说失败，异常消息为空，而不是功能类测试名称和其他 id 名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:56:21.930

失败的测试会记录在各自的测试报告文件中。

当有错误`mvn test`时会导致：（ ^(*假设典型的万无一失的用法）*)

```
[ERROR] Please refer to .../project/target/surefire-reports for the individual test results. 
```

如果您查看该目录，您会看到如下内容：（^(*特定于您的项目）*)

```
some.rnd.pkg.AnyGivenTest.txt 
```

^(*（根据您的配置，您可能有 XML 代替，或另外，等等。XML 也有重要的其他信息，如类路径和属性信息 - 它有时会非常方便，虽然通常堆栈跟踪就足够了。）*)

堆栈跟踪在那里。

# javascript - 从网页打开 Office Communicator

> ID：11056221
> 
> 赞同：0
> 
> 时间：2012-06-15T18:24:51.143
> 
> 标签：javascript, outlook, lync, office-communicator

有没有办法（首选 html 或 JavaScript，但 VBScript、Flash、Silverlight 也可以...）直接从网页打开应用程序，如 Office Outlook、Office Communicator 或 Lync？

我不需要启动电子邮件或打开与特定用户的聊天，而是访问应用程序的常规菜单。

当然，用户可以直接从他/她的桌面菜单打开应用程序。但目的是让网页提供一些上下文并根据需要引导用户使用正确的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:54:25.770

Lync 确实有一些您可以调用的命令行参数，这些参数将激活 Lync，前提是它已安装在计算机上。

TechNet 在[此处](http://technet.microsoft.com/en-us/library/gg398376.aspx)提供了完整列表- 但是，它们都执行了一些操作，没有一个只是激活 Lync。

我能找到的最接近的东西是该`callto`功能 - 它不会发起呼叫，但会打开对话框。这似乎是“做最少”的电话：

`callto:sip:user@domain.com`

我已经测试过您可以从“开始”>“运行”窗口调用它。因此，我认为您应该可以将其包含为 HREF 链接：特别是如果您在受信任区域中运行该页面（因为我假设这是一个 Intranet 应用程序）。

# iphone - 触摸由两层处理

> ID：11056222
> 
> 赞同：1
> 
> 时间：2012-06-15T18:24:58.003
> 
> 标签：iphone, ios, cocos2d-iphone, cclayer

我有一个`CCLayer`包含许多其他`CCLayer`s （如文本项目等）。我`CCLayer`在左侧有另一个我想显示这些“场景”的缩略图。

左手`CCScrollLayer`应响应其范围内的触摸，而右手层中的元素应响应其各自范围内的触摸。

我看到的问题是，当我在右侧拖动一个图层时，`CCScrollLayer`左侧的响应和滚动。当我滚动滚动层时，右侧的元素不受影响。好像`CCScrollLayer`' 的边界太大了，这不是因为我什至故意将它们设置为 100 像素宽。在这里工作是否有无法解释的行为？

效果可见[http://imageshack.us/photo/my-images/210/dragd.png/](http://imageshack.us/photo/my-images/210/dragd.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:33:58.450

默认情况下，CCLayer 注册为标准触摸代理。您必须将其注册为目标代表。在这种情况下，CCLayer 可以声明触摸，而其他可触摸元素将不会收到它。您可以通过覆盖 CCLayer 方法来做到这一点

```
-(void) registerWithTouchDispatcher
{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority: self.priority swallowsTouches:YES];
} 
```

在此之后，您必须用这些方法替换您的委托方法

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event;
@optional
// touch updates:
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event;
- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event;
- (void)ccTouchCancelled:(UITouch *)touch withEvent:(UIEvent *)event; 
```

你的`ccTouchBegan:withEvent:`方法应该是这样的

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    BOOL shouldClaimTouch = NO;
    BOOL layerContainsPoint = // check if current layer contains UITouch position
    if( layerContainsPoint )
    {
        shouldClaimTouch = YES;
    }

    // do anything you want

    return shouldClaimTouch;
} 
```

只是不要忘记将触摸的 UI 坐标转换为 GL。如果此方法返回 YES，则任何其他层都不会收到此触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:21:04.113

谢谢@Morion，就是这样。我的检测方法是这样的。

```
 StoryElementLayer *newLayer = nil;
   for (StoryElementLayer *elementLayer in self.children) {
        if (CGRectContainsPoint(elementLayer.boundingBox, touchLocation)) {            
            newLayer = elementLayer;
            break;
        }
    } 
```

# r - 具有奇异性模型的稳健标准误差的 aprstable

> ID：11056223
> 
> 赞同：2
> 
> 时间：2012-06-15T18:24:59.480
> 
> 标签：r

我正在尝试使用该`aprstable`包创建一个具有稳健标准误差的估计结果表。但是，由于我的模型具有不易避免的奇点（它们来自具有数百个级别的重叠因素），`aprstable`因此拒绝提供我正在尝试生成的表格。这是一个工作示例（改编自[相关线程](https://stackoverflow.com/questions/9335621/r-calculate-robust-standard-errors-vcovhc-for-lm-model-with-singularities)）：

```
library(sandwich)
set.seed(101)
dat<-data.frame(one=c(sample(1000:1239)),
                two=c(sample(200:439)),
                three=c(sample(600:839)),
                Jan=c(rep(1,20),rep(0,220)),
                Feb=c(rep(0,20),rep(1,20),rep(0,200)),
                Mar=c(rep(0,40),rep(1,20),rep(0,180)),
                Apr=c(rep(0,60),rep(1,20),rep(0,160)),
                May=c(rep(0,80),rep(1,20),rep(0,140)),
                Jun=c(rep(0,100),rep(1,20),rep(0,120)),
                Jul=c(rep(0,120),rep(1,20),rep(0,100)),
                Aug=c(rep(0,140),rep(1,20),rep(0,80)),
                Sep=c(rep(0,160),rep(1,20),rep(0,60)),
                Oct=c(rep(0,180),rep(1,20),rep(0,40)),
                Nov=c(rep(0,200),rep(1,20),rep(0,20)),
                Dec=c(rep(0,220),rep(1,20))) 
model <- lm(one ~ two + three + Jan + Feb + Mar + Apr + May + Jun + Jul + Aug + Sep + Oct + Nov + Dec, data=dat)
summary(model)
model$se <- vcovHC(model)

library('apsrtable')
apsrtable(model, se='robust') 
```

执行此代码会产生

```
> apsrtable(model, se='robust')
Error in s$coefficients[, 3] <- tval <- est/x$se : 
  number of items to replace is not a multiple of replacement length
In addition: Warning message:
In est/x$se :
  longer object length is not a multiple of shorter object length 
```

据我所知，发生此错误是因为`length(sqrt(diag(model$se)))`14 而`length(coefficients(model))`为 15，即在其方差 - 协方差矩阵的对角线上存在的系数比标准误差多（另请参见[包](https://r-forge.r-project.org/scm/viewvc.php/pkg/R/apsrtable.R?view=markup&revision=17&root=apsrtable&pathrev=17)[中源代码的相关位`aprstable`](https://r-forge.r-project.org/scm/viewvc.php/pkg/R/apsrtable.R?view=markup&revision=17&root=apsrtable&pathrev=17)）。

有什么简单的方法可以解决这个问题吗？将 NA 行和列插入到适当位置的方差-协方差矩阵中，然后再将其传递给`apsrtable()`？更优雅的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T01:37:27.633

这是一个简单的解决方法—— coef(model) 返回带有 NA 的事物，但 coef(summary(model)) 返回摘要的 coef。我会尽快向 cran 提交更新，但[https://github.com/malecki/apsrtable](https://github.com/malecki/apsrtable)上的包已更新。

# c++ - 无法使用 opencv 库运行 C++ 程序

> ID：11056226
> 
> 赞同：1
> 
> 时间：2012-06-15T18:25:13.633
> 
> 标签：c++, visual-studio-2010, opencv

在 Visual Studio 2010 Pro 中编译 OpenCV 2.4 后，我为 opencv 编写了一个简单的测试程序，看看它是否正常工作。

程序是这样的：

```
#include "StdAfx.h"    
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main()
{
    Mat im = imread("c:/full/path/to/lena.jpg");
    if (im.empty()) 
    {
        cout << "Cannot load image!" << endl;
        return -1;
    }
    imshow("Image", im);
    waitKey(0);
} 
```

问题是程序编译没有问题（我已经在visual studio中设置了所有的lib路径和包含路径），但是当我尝试运行它时，它给了我以下错误消息winow：“程序无法启动因为您的计算机中缺少 opencv_core240d.dll。请尝试重新安装程序以解决此问题”

现在，我读到可以通过执行 cmd 命令将 Windows PATH 变量设置为实际 .dll 文件所在的目录来解决此问题：

```
SET PATH="C:\Program Files (x86)\OpenCV\opencv\build\bin\Debug" 
```

指定的路径确实是 .dll 文件所在的路径，但是我仍然收到错误消息。

非常感谢您的帮助，因为我花了太多时间来解决这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:30:52.337

您必须从设置 PATH 的同一命令行运行程序（当然，在设置路径之后）。

如果你试图从其他地方运行它，你应该设置 PATH 环境。控制面板中的变量 -> 系统优先（*），然后重新启动命令行/IDE 以使新 PATH 生效

(*) 控制面板 -> 系统 -> 高级系统设置 -> Windows 7 上的环境变量

# sql - 在多列中查找具有相同值的行

> ID：11056235
> 
> 赞同：38
> 
> 时间：2012-06-15T18:25:57.043
> 
> 标签：sql, sql-server

我正在尝试查找具有重复值的行，但仅基于选择的列数，而不是单列或整行。例如，如果我的表如下所示：

```
ID     Address    State    Name
-------------------------------
0      7 Brown    NY       John
1      3 Red      WX       Jane
2      7 Brown    WX       Ted
3      7 Brown    NY       Fred 
```

我的问题是：

> 查找行的地址和状态字段与另一行的地址和状态字段匹配的行的所有 ID。

这个查询的答案是：

```
ID    Address    State    Name
------------------------------
0     7 Brown    NY       John
3     7 Brown    NY       Fred 
```

有任何想法吗？

建议： [如何从单个表中选择多个列值相同的行](https://stackoverflow.com/questions/8661794/how-to-select-multiple-columns-values-same-rows-from-single-table)

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-15T18:30:52.977

尝试以下操作：

```
SELECT A.*
FROM YourTable A
INNER JOIN (SELECT Address, State
            FROM YourTable
            GROUP BY Address, State
            HAVING COUNT(*) > 1) B
ON A.Address = B.Address AND A.State = B.State 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T18:41:57.707

```
select *
from #table1
where Addr + St in (select Addr + St as FullAddr
             from #table1
             group by Addr + St
             having count(Addr+St) > 1) 
```

# c - 从自定义 USB 设备读取值

> ID：11056236
> 
> 赞同：1
> 
> 时间：2012-06-15T18:25:58.857
> 
> 标签：c, macos, iokit

我有一个 USB 设备（自行车电脑）并想通过 USB 端口从中读取值（里程表值、平均速度等）。经过一些步骤后，我设法检测到计算机并读取了一些参数（如`vendorId`、`sessionId`等`deviceName`），但我不知道如何读取自行车值。

没有此设备的文档。我正在寻找关于 IOKit 框架的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:22:13.943

你可以安装usbview。这很好，它可以让您阅读所有描述符 [http://www.kroah.com/linux/usb/](http://www.kroah.com/linux/usb/)

另一个线程（[USB编程](https://stackoverflow.com/questions/4241207/usb-programming)）也给出了 [http://www.signal11.us/oss/hidapi/的链接](http://www.signal11.us/oss/hidapi/)

提供的示例允许使用 HID API 读取和写入设备。Hopw 将帮助您了解在设备上进行操作

# ironworker - 如何使用 ActiveRecord 连接到 IronWorker 中的数据库？

> ID：11056243
> 
> 赞同：5
> 
> 时间：2012-06-15T18:26:30.930
> 
> 标签：ironworker, iron.io

我有一个使用 IronWorker 的 Rails 应用程序，我需要从工作程序连接到我的数据库。我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T18:26:31.333

工作人员需要显式建立与数据库的连接，因为它没有在您的应用程序中运行，因此您需要将连接信息传递给工作人员。您可以在工作负载中执行此操作，如下所示：

```
client = IronWorkerNG::Client.new
task = client.tasks.create('MyWorker', 'database' => Rails.configuration.database_configuration[Rails.env]) 
```

然后在你的工人里面：

```
ActiveRecord::Base.establish_connection(params['database']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-16T17:50:45.493

我为此写了[一篇博](https://labs.chie.do/using-iron-worker-with-active-record-and-your-rails-models?utm_source=Stack%20Overflow&utm_medium=Answering%20a%20question&utm_campaign=stackoverflow-answers)文。希望它有帮助！

简而言之，将数据库配置存储在环境变量中很容易。

# python - PyQt 使用 QLineEdit 作为 QTableWidget 中的 cellWidget

> ID：11056245
> 
> 赞同：0
> 
> 时间：2012-06-15T18:26:51.877
> 
> 标签：python, pyqt4

所以我创建了一个 QTableWidget，里面装满了 QComboBoxes 和 QLineEdits。我的 QComboBoxes 工作得很好，但我的 QLineEdits 出于某种原因不能正确显示文本。

```
self.table = QtGui.QTableWidget()  
tableItem = QtGui.QLineEdit(  )
tableItem.setText( "Testing" )
self.table.setCellWidget(row, 1, tableItem ) 
```

现在我尝试测试它以查看该值是否存在于表中......并且如果我使用 tableItem.text() 肯定会得到“测试”。我只是不确定为什么我运行 UI 时 lineEdit 什么都不显示。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T21:27:57.520

这是一个简单的例子，QLineEdit 工作得很好。

```
from PyQt4 import QtCore, QtGui
import sys

app = QtGui.QApplication([])
table = QtGui.QTableWidget(2,2)

tableItem = QtGui.QLineEdit()
tableItem.setText( "Testing" )
table.setCellWidget(0, 0, tableItem )

comboBox = QtGui.QComboBox()
table.setCellWidget(1,1, comboBox)

table.show()
sys.exit(app.exec_()) 
```

基本上，我所做的只是给桌子一个尺寸。您可以像我一样在创建时执行此操作，也可以使用`table.setRowCount()`.

当然，对于有 r 行的表，请确保不要*在*第 r 行插入任何内容。它从 0 到 r-1。

# java - JOOQ：返回自动递增的键？

> ID：11056246
> 
> 赞同：3
> 
> 时间：2012-06-15T18:26:58.890
> 
> 标签：java, mysql, sql, jooq

鉴于：

`CREATE TABLE foo (id BIGINT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id));`

我想调用：`INSERT INTO foo VALUES()`并取回生成的密钥。我尝试遵循在[jOOQ 插入查询中找到的建议并返回生成的密钥](https://stackoverflow.com/questions/8127378/jooq-insert-query-with-returning-generated-keys)，但是当我调用时：

`RoomsRecord record = db.insertInto(foo, Collections<Field<?>>emptyList()).returning(foo.ID).fetchOne();`

JOOQ 返回 null 而不是生成的密钥。这是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:34:35.800

这似乎是 FieldMapsForInsert.isExecutable() 中的错误。它将上述查询标记为不可执行，但在 MySQL 下是合法的。我提交了[https://github.com/jOOQ/jOOQ/issues/20](https://github.com/jOOQ/jOOQ/issues/20)

您可以插入`NULL`作为[解决方法](https://stackoverflow.com/a/7878416/14731)。此外，您必须配置 JOOQ 以生成表“关系”，否则`returning()`将看不到主键的存在并返回 null。

```
<configuration>
  <generator>
    <generate>
      <relations>true</relations>
    </generate>
  </generator>
</configuration> 
```

# python - Python Cookie 库不支持过期格式

> ID：11056248
> 
> 赞同：0
> 
> 时间：2012-06-15T18:27:22.677
> 
> 标签：python, cookies

我正在尝试使用 Python Cookie 库，但它似乎不支持 expire 属性的标准日期格式（RFC 822）。例如，在 Python 提示符中：

```
>>> import Cookie
>>> cookie = Cookie.SimpleCookie('bcookie="123"; Expires=Sat, 14-Jun-2014 23:03:13 GMT;')
>>> cookie['bcookie']['expires']
'Sat,' 
```

这是一个标准标题，但它处理日期到第一个空格。难道我做错了什么？我需要完整的 expire 属性，如果不需要的话，我不想编写自己的 cookie 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:46:09.807

根据 Doug Hellman 的优秀[Python Module of the Week 网站，](http://blog.doughellmann.com/2008/06/pymotw-cookie.html)正确用法是

```
c = Cookie.SimpleCookie()
expires = datetime.datetime.now() + datetime.timedelta(hours=1)
c['bcookie']['expires'] = expires.strftime('%a, %d %b %Y %H:%M:%S') # Wdy, DD-Mon-YY HH:MM:SS GMT 
```

我什至无法弄清楚您的论点`SimpleCookie`试图做什么，但 PyMOTW 是一个很好的辅助资源，因为主要文档可能有点密集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:20:58.623

我在同样的问题上苦苦挣扎。我只是在使用`headers['set-cookie']`并创建一个`Cookie.SimpleCookie`.

过了一会儿，我意识到我正在消费的网站没有引用日期。

这是我尝试过的解决方案：

```
cookie = Cookie.SimpleCookie('bcookie="123"; Expires="Sat, 14-Jun-2014 23:03:13 GMT";') 
```

不幸的是，这并不能解决我的核心问题。但是，至少我明白为什么。

# xml - 为什么解组 json 比 xml 更容易

> ID：11056256
> 
> 赞同：1
> 
> 时间：2012-06-15T18:27:51.723
> 
> 标签：xml, json, marshalling

它只是内置工具吗？从根本上说，该格式不会妨碍自动编组 xml。

xml 和 json 之间的唯一区别是 [tag]HI World[/tag] 到 {tag:HI World}，分别..所以 JSON obj 是大小的一半

正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:02:01.840

JSON has its roots in Javascript, which is a dynamic language with loose typing. Every data item is "loosely typed", which means the runtime system doesn't much care whether the thing is a string of characters, or an array, or an integer, or an object or a function. Variables hold "something", and the type is determined when you try to do something with them.

Therefore de-serializing a JSON packet is pretty simple. The representation to be deserialized is either a string or a number.

With XML on the other hand, the XML Schema standard set out a number of specific data types, including basic things like integers, floats, strings, but also dateTime, date, and then more complex derived types, like ordered sequences of those things, arrays of those things, and "unions". When this XML stuff was being defined, there was a great deal of effort around guaranteeing that xml documents were a.) well formed, and b.) valid according to one of these fairly specific schema definitions. Most xml serializers use some portion of the typing magic.

In XML schema you can also specify references, so that one item in an XML document can refer to another item.

As an illustration, right now when I use the stackexchange API to query a list of "question answers" a particular user has posted, I get back a list of items, each of which contains a repeated block for the same user. They all look like this (pseudo code):

```
{ answers: [ 
  { answer_id: 98393398398
    question_id 28282828
    owner: {
     name: Cheeso
     user_id 48082
     reputation: 3093
     date_created: 110101010}
   },
  { answer_id: 28783398398
    question_id 111128828
    owner: {
     name: Cheeso
     user_id 48082
     reputation: 3093
     date_created: 110101010}
   },
   ...
] } 
```

But XML allows me to refer to other places in the document, so I'd get back something like this (again, pseudo code):

```
{ users: [ ["#user1", "Cheeso", "48082", 3093 ]] ,
  answers: [ 
   { answer_id: 98393398398
    question_id 28282828
    owner: #user1 },
  { answer_id: 28783398398
    question_id 111128828
    owner: #user1},
   ...
] } 
```

Of course you could structure your json applications to understand and use "in-document references". But the point is, with XML, that is already part of the model.

All of which means serializing and de-serializing XML can be more involved, in practice, than doing the same with JSON.

It's my opinion that people are finding the looser json approach to be preferable because it is more flexible and adaptable, and easier to use. On the other hand some documents are large enough that the rigidity and formality of XML schema is super valuable, and json is just too loose. I'm thinking of an OOXML document, for example.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:21:30.840

JSON 提供了 Javascript 中使用的数据结构的序列化，这与许多编程语言中的数据结构非常相似。XML 是为文档标记而设计的。因此 JSON 旨在匹配编程语言擅长的领域，XML 旨在满足文档创作的需求。

> *人们发现更宽松的 json 方法更可取，因为它更灵活*

相反。人们发现 JSON 更可取，因为它不太灵活。它只做像 Javascript 这样的语言很容易处理的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:43:02.587

这不一定更容易。一个完整的 JSON 解析器实现可能与 XML 文档的实现一样复杂。诚然，由于显而易见的原因，JSON 字符串的大小几乎总是小于其等效的 XML。

但是，在 XML 中的 JSON 作为数据传输格式之间进行选择取决于底层技术（JavaScript 到 JavaScript 或服务器，或相反）。在其他情况下，例如当您的数据已经作为 XML 存在时，将其转换为 JSON 以便您可以将其发送到某个地方（到 REST 服务或其他任何地方）并不是很有效。

因此，这是一个简单的选择：选择您正在使用的技术最能支持的内容。JSON 用于处理 JavaScript 和 XML 用于 SOAP Web 服务或当您的数据已经在 XML 中时。

# java - 我需要帮助来理解客户端证书身份验证和使用 jetty 嵌入的登录服务之间的关系

> ID：11056262
> 
> 赞同：3
> 
> 时间：2012-06-15T18:28:09.763
> 
> 标签：java, jetty, embedded-jetty, client-certificates

我正在使用嵌入在我的 Java WebApp 项目中的 jetty 7。

我已经设置了 SSL，下一步是处理客户端证书身份验证。在我指定的 web.xml 中：

```
<login-config>
<auth-method>CLIENT-CERT</auth-method>
<realm-name>Test Realm</realm-name>
</login-config>
<security-constraint>
<web-resource-collection>
    <web-resource-name>EntireApp</web-resource-name>
    <url-pattern>/*</url-pattern>
    <http-method>GET</http-method>
    <http-method>POST</http-method>
</web-resource-collection>
<auth-constraint>
    <role-name>allAuthenticated</role-name>
</auth-constraint>
<user-data-constraint>
    <transport-guarantee>CONFIDENTIAL</transport-guarantee>
</user-data-constraint>
</security-constraint> 
```

下面是 startserver 例程中的代码：

```
SslSelectChannelConnector ssl_connector = new SslSelectChannelConnector();
    ssl_connector.setPort(Integer.valueOf(httpPort1));
    SslContextFactory cf = ssl_connector.getSslContextFactory();
    cf.setKeyStore(sslProperties.getKeyStore());
    cf.setKeyStorePassword(sslProperties.getKeyPassword());
    cf.setTrustStore(sslProperties.getTrustStore());
    cf.setTrustStorePassword(sslProperties.getTrustStorePassword());
    cf.setNeedClientAuth(true);

    server.setConnectors(new Connector[]{ connector0,  ssl_connector });

    WebAppContext context = new WebAppContext();
    context.setDescriptor("WebContent/WEB-INF/web.xml");
    context.setResourceBase("WebContent");
    context.setContextPath("/");
    context.setParentLoaderPriority(true);

    SecurityHandler secHandler = new ConstraintSecurityHandler();

    //Authenticator authenticator = new ClientCertAuthenticator();
    Authenticator authenticator = new DummyAuthenticator();

  //probably I need something different, but what ? 
    LoginService loginService = new HashLoginService("Test Realm", "d:/downloads/test.properties");

    secHandler.setRealmName("Test Realm");
    secHandler.setLoginService(loginService);

    secHandler.setAuthenticator(authenticator);

    context.setSecurityHandler(secHandler);

    server.setHandler(context);

    try {
        server.start();
        server.join();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我的问题是我应该将什么 loginservice 与 ClientCertAuthenticator 结合使用？或者，如果这不可能，实现我自己的 (DummyAuthenticator) 的最佳方法是什么？

在上面的代码中，我使用了 DummyAuthenticator，它只实现了 Authenticator 接口，但是 validateRequest 方法中的 servletRequest 总是在我期望的地方有一个空的 parameterMap

# c# - Ajax Json 传递正确的数据，但方法获取具有空属性的对象

> ID：11056268
> 
> 赞同：1
> 
> 时间：2012-06-15T18:28:27.593
> 
> 标签：c#, jquery, ajax, json, asp.net-mvc-2

我有一个 Ajax 调用，它将对象列表发送到控制器中的方法。
我查看了它发送的 json，一切似乎都井井有条。但是当它到达控制器时，列表就在那里，具有正确数量的对象，但它们的所有属性都是空的，即使值在 json 中正确设置。

示例：我有一个包含 10 个对象的列表，所有对象的属性都设置了特定值。我执行了调用，但是当列表到达控制器时，它有 10 个对象，它们的所有属性都设置为空。

有人知道为什么会这样吗？

这是电话：
由于大量数据，我不得不使用 post 而不是 get。

```
$("#testeFA").click(function()
{
    <% JavaScriptSerializer serializador = new JavaScriptSerializer(); %>

    var models = <%: MvcHtmlString.Create(serializador.Serialize(apontamentos)) %>
    //"apontamentos" is the name of the List<ApontamentoModel>

    $.post('<%: Url.Action("GeraFA") %>', { models: models }, function (sucesso)
    {
        //do whatever
    }, 'json');
}); 
```

这是方法：

```
public JsonResult GeraFA(List<ApontamentoModel> models) <- this is where the list shows all the objects' properties as null
{
    JsonResult result = new JsonResult();

    //do whatever

    result.JsonRequestBehavior = JsonRequestBehavior.AllowGet;
    return result;
 } 
```

这是json的一部分，所以你可以看到结构：

```
[{"DocEntry":1,
  "LineID":5,
  "Data":"01/06/2012",
  "HoraInicial":
      {"Ticks":288000000000,
       "Days":0,
       "Hours":8,
       "Milliseconds":0,
       "Minutes":0,
       "Seconds":0,
       "TotalDays":0.33333333333333331,
       "TotalHours":8,
       "TotalMilliseconds":28800000,
       "TotalMinutes":480,
       "TotalSeconds":28800},
  "CodigoCliente":"C00013",
  "Cliente":"Client Name",
  "CodigoProjeto":283,
  "Projeto":"Project Name",
  "CodigoServico":18,
  "TipoServico":"",
  "CodigoDespesa":0,
  "Despesa":"",
  "Quantidade":0,
  "NumeroChamado":0,
  "NumeroFA":10,
  "Apropria":true,
  "Narrativa":"teste",
  "NomeConsultor":"Name"},
 {"DocEntry":1,
  "LineID":13 //and so on to all the other elements 
```

我正在使用 MVC2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:59:55.423

ASP.NET MVC 2 doesn't support JSON requests out of the box. This functionality has been built-in ASP.NET MVC 3\. You could though write a custom `JsonValueProviderFactory` to achieve that. Phil Haack wrote an [excellent blog post](http://haacked.com/archive/2010/04/15/sending-json-to-an-asp-net-mvc-action-method-argument.aspx) on this topic. You also need to use `$.ajax` instead of `$.post` as illustrated by Phil in order to be able to set the `application/json` request `Content-Type` header.

So once you download and register the `JsonValueProviderFactory` in your application you could:

```
$('#testeFA').click(function() {
    <% JavaScriptSerializer serializador = new JavaScriptSerializer(); %>
    //"apontamentos" is the name of the List<ApontamentoModel>
    var models = <%= serializador.Serialize(apontamentos) %>;
    $.ajax({
        url: '<%= Url.Action("GeraFA") %>',
        type: 'post',
        contentType: 'application/json;charset=utf-8',
        data: JSON.stringify({ models: models }),
        success: function(result) {
            //do whatever
        }
    });
}); 
```

Also notice the usage of the `JSON.stringify` method which converts the javascript `models` variable into a JSON string to be sent to the server as specified by the `contentType` parameter. This method is natively built-in all modern browsers. If you need to support some legacy browsers you could include the [json2.js](https://github.com/douglascrockford/JSON-js) script to your page.

# c# - 奇怪的 C# Directory.GetFiles 错误

> ID：11056270
> 
> 赞同：0
> 
> 时间：2012-06-15T18:28:41.680
> 
> 标签：c#, .net, xna, xna-3.0

今天我遇到了一个非常奇怪的 c# 错误。

我写了一个小方法，它应该搜索和处理任何给定目录中的所有 XNA 的 xnb 文件。在大多数计算机中，它工作得很好——在某些情况下（两个 XP 的人报告了问题）。

我只能在 win7 上重现此错误一次（当然，在 VC# 之外）

这是方法：

```
files = Directory.GetFiles("Content\\Textures\\Houses\\Roof");

for (int i = 0; i < files.Length; i++)
{
    string path = files[i].Substring(BasicUtils.FindsubString(files[i], "Textures")).Replace(".xnb", "");

    roofTextures.Add(DataCenter.AddTexture(DataCenter.Content.Load<Texture2D>(path)));
} 
```

此方法获取给定目录中的所有文件，在本例中为“Content\Textures\Houses\Roof”。错误出现了：这个目录中有三个文件（都带有 .xnb 扩展名）。在我的装有 win7 的 PC 上（以及其他四台装有 win7 的 PC）上，这项工作就像它应该的那样工作。

但是，当使用 win XP 的人尝试运行此方法时，操作系统会返回 4 个文件 - 以及三个真正退出的文件，以及上次使用 OpenFileDialog 打开的一个文件（即使文件位于完全不同的目录中，Directory.Getfiles在那个目录中把它还给它）。

当我想打开它时，该方法找不到文件，并抛出异常。

通过检查给定的后备文件是否具有 .XNB 扩展名，我能够克服这个错误，但这个错误真的让我感到奇怪。

知道我在哪里犯了错误吗？

winform区域中的openfiledialog，而文件搜索和打开另一个DLL，一个完全不同的类，在一个私有的，无法访问的方法中 - 他们甚至不应该以任何方式进行通信！我不知道我到底是怎么找回那个文件名的。

编辑：

我想我没有把我的问题说清楚（很抱歉:)。

因此，方法中的问题：当我使用 Directory.GetFiles(...) 时，它会返回三个真正位于目录中的文件（三个 .xnb 文件）。但是对于某些用户（使用 Windows XP），这种方法会返回一个 .sbm 扩展名（我的程序使用的文件类型），它在目录中是 ISNT 的。我搜索了很长时间，直到我发现：这个问题只有在他们使用 Openfiledialog 时才会弹出——当他们这样做时，Directory.GetFiles(...) 将返回之前打开的文件——但实际上它不是。我能够解决这个问题，但仍然无法理解为什么会发生这种情况。我搜索了 MSDN 数据库，但我没有发现任何关于这样的错误的信息。我试图在 VS 中重新创建错误，希望它能提供线索 - 但我无法做到。有一次我也出现了这个问题（来自win7），但由于它在VS之外，我无法调试。目前只有两个win XP用户报告，而它适用于所有使用win7的人。

哦，我仔细检查了 - 该目录中没有隐藏文件（尤其是以前打开的文件）。里面只有三个想要的文件。）

编辑2：

这是问题的链接，以及创建问题的步骤：

[https://www.dropbox.com/s/4uv1hbvzkhpwprw/House%20Creator%20V2%20With%20error.zip](https://www.dropbox.com/s/4uv1hbvzkhpwprw/House%20Creator%20V2%20With%20error.zip)

启动 Housecreator.exe 单击“加载”按钮。选择“郊区房屋1.sbm”

加载后，单击“3D 渲染”按钮。

这是应该弹出错误的步骤。该程序将在 (Content)\Textures\Houses\OuterWall 中搜索“Suburb house 1.sbm”文件（有时。主要针对 xp 用户，但有时也发生在我身上。但仅限于 Visual Studio 之外） .

将需要 XNA 框架 3.1，以及 .NET 3.5 来试用该程序。只有当用户使用“加载”选项时才会弹出错误。

编辑3：我连续三次收到错误。给定目录中没有额外的文件。现在它再次工作，没有任何可见的变化 Oo

我想不出为什么会发生这种情况。

编辑4：

我放弃了。我很确定我在某个地方犯了错误（我不认为这可能是这个巨大的错误，并且没有其他人注意到）但无法抓住它在哪里。我过滤了文件，这应该可以工作。感谢大家的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:38:05.460

如果 Directory.GetFiles() 返回 4 个文件，则您指定为参数的目录中有 4 个文件。

如果它们是隐藏的、受保护的系统文件等，您可能无法在 Windows 资源管理器中看到它们。

无论如何，您的应用程序不应期望在给定文件夹中仅看到其关注的文件，您无法控制它。

您的问题的解决方案是过滤掉您不关心的文件并忽略它们。

```
for (int i = 0; i < files.Length; i++) 
{ 
    if(files[i].EndsWith(".xnb"))
    {
        string path = files[i].Substring(BasicUtils.FindsubString(files[i], "Textures")).Replace(".xnb", ""); 

        roofTextures.Add(DataCenter.AddTexture(DataCenter.Content.Load<Texture2D>(path))); 
    }
} 
```

# meteor - 我可以让模板助手在 Meteor 中只运行一次吗？

> ID：11056274
> 
> 赞同：2
> 
> 时间：2012-06-15T18:28:56.600
> 
> 标签：meteor, handlebars.js

我有一个看起来像这样的模板：

```
<template name="foo">
  <div id="wrapper" style="overflow: hidden">
    <div id="content" style="margin-top: -{{contentHeight}}px">
      {{content}}
    </div>
    <button id="toggle">Show/Hide Content</button>
  </div>
</template> 
```

where`{{contentHeight}}`是计算 高度的助手，`#content`单击切换按钮会`#content`通过为其边距设置动画来向上/向下滑动。

问题是，当我对 进行数据库更新时`foo`，`#content`的`style`属性被重置为新`contentHeight`值，将其隐藏。我不希望 Meteor 在渲染后触摸元素，但即使给它一个唯一的 ID 也不能阻止它；正如文档所说：

> Meteor 将保留 [具有唯一名称/ID 的元素]，即使它们的封闭模板被重新渲染，但仍会更新其子级*并复制任何属性更改。*

（强调我的。）那么最好的方法是什么？如何在`style`渲染模板时设置元素，然后防止 Meteor 修改属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:57:54.210

您是否尝试过类似的方法：

```
<div id="content" {{contentHeightStyle}}>

Template.foo.contentHeightStyle = function() {
  if (!this._contentHeightStyleCalculated) {
    this._contentHeightStyleCalculated = true;
    return 'style="..."';
  }
} 
```

# ruby-on-rails - 捆绑安装/更新不起作用

> ID：11056276
> 
> 赞同：1
> 
> 时间：2012-06-15T18:29:09.010
> 
> 标签：ruby-on-rails, rubygems, bundle

参加 Rails 教程，我遇到了以下我无法解决的问题。我正在创建一个应该使用以下 gemfile 的示例应用程序：

```
source 'https://rubygems.org'

gem 'rails', '3.2.5'

group :development, :test do
    gem 'sqlite3', '1.3.5'
    gem 'rspec-rails', '2.10.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', '~> 3.2.4'
  gem 'coffee-rails', '~> 3.2.2'
  gem 'uglifier', '1.2.3'
 end

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

gem 'jquery-rails', '2.0.0'

group :test do
    gem 'capybara', '1.1.2'
end 

group :production do
    gem 'pg', '0.12.2'
end 
```

但是，当我尝试按照说明“捆绑安装 -- 不生产”时，我得到了这个

> Bundler 找不到 gem "activesupport" 的兼容版本：在快照中 (Gemfile.lock): activesupport (3.2.3)
> 
> 在 Gemfile 中：rails (= 3.2.5) ruby​​ 依赖于 activesupport (= 3.2.5) ruby
> 
> 运行`bundle update`将只使用 Gemfile 中的 gem 从头开始​​重建快照，这可能会解决冲突。

所以我尝试更新，但有人告诉我：

> Bundler 找不到 gem“railties”的兼容版本：在 Gemfile 中：rails (= 3.2.5) ruby​​ 依赖于 railties (= 3.2.5) ruby
> 
> jquery-rails (= 2.0.0) ruby​​ 依赖于 railties (3.2.6)

所以我尝试通过 rvm 更新我的 gems，认为这就是问题所在。（做了“rvm ruby​​gems current”）。但这似乎并没有解决任何问题。

帮助？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:36:01.003

尝试更改此行：

```
gem 'rails', '3.2.5' 
```

到

```
gem 'rails', '3.2.6' 
```

# python - 拆分数组时的索引错误

> ID：11056278
> 
> 赞同：0
> 
> 时间：2012-06-15T18:29:11.917
> 
> 标签：python

我有以下数组（在python中）：

```
arr= ['\n', ' a#B\n', ' c#D\n'] 
```

现在我试图拆分“#”，我正在为此编写下面给出的代码：

```
 for i in arr:
 g=i.split("#")[1] 
```

我收到以下错误：

```
 g=i.split("#")[1]
 IndexError: list index out of range 
```

我不明白为什么会出现错误。有人可以帮助纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:32:06.763

当列表的第一个元素`'\n'`被分配给`i`它时，它不包含`"#"`，因此结果列表只有一个元素长，而不是两个。尝试检索索引`1`失败，但`0`会存在索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:38:32.773

其他人已经解释了为什么你会得到那个例外。这是一种可能对您有用的不同方法的想法。

从 Python 2.5 开始，字符串对象产生了一种新`partition`方法：

`str.partition(sep)`

> 在第一次出现 sep 时拆分字符串，并返回一个 3 元组，其中包含分隔符之前的部分、分隔符本身和分隔符之后的部分。如果未找到分隔符，则返回一个包含字符串本身的 3 元组，后跟两个空字符串。

```
>>> arr= ['\n', ' a#B\n', ' c#D\n'] 
>>> for s in arr:
...     print s.partition('#')
... 
('\n', '', '')
(' a', '#', 'B\n')
(' c', '#', 'D\n') 
```

无论是否找到分隔符，您都可以将字符串拉开而不会遇到异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:31:57.713

导致该错误的原因是第一次拆分导致列表仅包含 1 个元素`['\n']`，因此 的索引值`[1]`超出范围。

看：

```
for i in arr:
   g = i.split("#")
   print g 
```

输出：

```
['\n']
[' a', 'B\n']
[' c', 'D\n'] 
```

解决它的一种快速方法是：

```
[i.split('#')[1] for i in arr if len(i.split('#')) > 1] 
```

尽管它包含对`split()`.

下面的有点冗长，但只调用`split()`一次。

```
for i in arr:
    g = i.split('#')
    if len(g) > 1:
       g = g[1] 
```

正如@kindall 在下面的评论中建议的那样，使用`partition()`也是此处的替代方法`split()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:33:01.337

您遍历的数组中的第一个元素没有散列`#`，因此当您对其调用 split 时，它仅返回列表中的一项，`['\n']`因此当您尝试访问第二项时`[1]`它找不到它给您错误。

请记住，在 Python 中，索引从 0 开始，而不是 1。

# django - iFrame 在 Facebook Canvas 应用程序中显示为空白

> ID：11056283
> 
> 赞同：2
> 
> 时间：2012-06-15T18:29:27.833
> 
> 标签：django, iframe, nginx, facebook-canvas, uwsgi

我有一个非常简单的页面，我试图在 Facebook iframe 中查看。这是一个 Django 视图，但它不依赖于请求是通过 POST 还是 GET 提交的。它所做的只是返回一些简单的 HTML。

如果我们直接点击链接，它会正确显示。如果在 Firefox 中，我右键单击 iframe 并选择仅显示该框架的选项 - 那么它会正确显示。但是，在查看 Facebook 应用程序时，什么都没有显示。

这是应用程序链接：[http](http://apps.facebook.com/fireflietest/) ://apps.facebook.com/fireflietest/ 指向[http://www.fireflie.com/facebook/](http://www.fireflie.com/facebook/)

这是我非常简单的视图的代码：

```
from django.http import HttpResponse
from django.views.decorators.csrf import csrf_exempt, csrf_protect

@csrf_exempt
def facebook(request):
    body = """
    <html>
        <head><title>Fireflie on Facebook</title></head>
        <body>Hello, Facebook!</body>
    </html>
    """
    return HttpResponse(body) 
```

仅出于测试目的，我创建了一个可以 POST 到该页面的小型 HTML 表单。它工作正常。我还运行了 Facebook 调试工具，“scraper”显示它正确地提取了我们的内容。

这是服务器日志，显示它两次都返回 200 OK：

```
24.210.144.32 - - [15/Jun/2012:18:27:18 +0000] "POST /facebook/ HTTP/1.1" 200 31 "http://apps.facebook.com/fireflietest/" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19"

24.210.144.32 - - [15/Jun/2012:18:27:26 +0000] "GET /facebook/ HTTP/1.1" 200 67 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19" 
```

最后，我尝试使用 Chrome 的开发人员工具深入研究响应对象，但在查看 iframe 版本时，看起来返回的只是内容标头。

有人知道这里发生了什么吗？或者关于如何进一步调试这个问题的任何想法？谢谢。

编辑：我将 Facebook 应用程序的 URL 复制并粘贴到同一个位置。我将在这里再次复制它，以防我做错了什么。我不确定它为什么会抛出 404。

直接从地址栏复制粘贴：http: [//apps.facebook.com/fireflietest/](http://apps.facebook.com/fireflietest/)

**更新：**原来我不得不关闭沙盒模式。不应该再有 404。当然，我仍然遇到原始问题，即我的 iFrame 显示为空。谢谢！

**更新2：（**从我的Django用户组thead复制并粘贴）

我一直在尝试诊断这个问题。不过，我不知道发生了什么。

1.  我尝试在 Nginx 上提供一个简单的 .html 页面，看看是否是问题所在。它没有正确服务（通过错误），但它确实显示了错误。存在的问题是，您无法在 NGINX 中发布到静态页面。没什么大不了的，无论如何我都不想加载静态页面。

2.  我查看了我的日志文件。事实证明，我的应用程序正在超时。这没有任何意义，因为它不会在其他任何地方超时。

3.  这里有一些日志显示发生了一些奇怪的事情。我不确定如何调试问题。从我正在阅读的内容来看——这就是我所描绘的。

Nginx 正确接收请求。Nginx 将请求推送到 uWSGI 应用程序（django）。Django 成功获取请求。Django 尝试响应，但这一定是它中断的地方。

我不确定问题是什么——但它与在 facebook iframe 中有关。（我一般还没有检查远程 iframe，接下来我会这样做）

```
uWSGI Logs:
[pid: 11059|app: 0|req: 3/4] 24.210.144.32 () {52 vars in 1170 bytes} [Tue Jun 19            14:24:03 2012] POST /facebook/ => generated 0 bytes in 444 msecs (HTTP/1.1 500) 0 headers in 0 bytes (0 switches on core 0)
[pid: 11345|app: 0|req: 1/1] 24.210.144.32 () {52 vars in 1170 bytes} [Tue Jun 19 14:24:31 2012] POST /facebook/ => generated 2970 bytes in 333 msecs (HTTP/1.1 200) 4 headers in 128 bytes (1 switches on core 0)
[pid: 11353|app: 0|req: 3/31] 24.210.144.32 () {52 vars in 1172 bytes} [Tue Jun 19 14:31:04 2012] POST /facebook/ => generated 2970 bytes in 3 msecs (HTTP/1.1 200) 4 headers in 128 bytes (1 switches on core 0)
[pid: 11954|app: 0|req: 1/14] 24.210.144.32 () {52 vars in 1216 bytes} [Tue Jun 19 14:35:04 2012] POST /facebook/ => generated 2970 bytes in 343 msecs (HTTP/1.1 200) 4 headers in 128 bytes (1 switches on core 0)
[pid: 11950|app: 0|req: 2/31] 24.210.144.32 () {52 vars in 1211 bytes} [Tue Jun 19 14:48:57 2012] POST /facebook/ => generated 2970 bytes in 3 msecs (HTTP/1.1 200) 4 headers in 128 bytes (1 switches on core 0)
[pid: 11962|app: 0|req: 4/57] 24.210.144.32 () {52 vars in 1216 bytes} [Tue Jun 19 14:53:43 2012] POST /facebook/ => generated 2970 bytes in 2 msecs (HTTP/1.1 200) 4 headers in 128 bytes (1 switches on core 0)

Nginx Error Logs:
2012/06/19 20:02:30 [error] 11164#0: *29617 readv() failed (104: Connection reset by peer) while reading upstream, client: 24.210.144.32, server: fireflie.com, request: "POST /facebook/ HTTP/1.1", upstream: "uwsgi://<commented out for security>", host:     "www.fireflie.com", referrer: "http://apps.facebook.com/253156011452899/"

Nginx Access Log:
24.210.144.32 - - [19/Jun/2012:20:02:30 +0000] "POST /facebook/ HTTP/1.1" 200 31 "http://apps.facebook.com/253156011452899/" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19"
24.210.144.32 - - [19/Jun/2012:20:03:29 +0000] "-" 408 0 "-" "-"
24.210.144.32 - - [19/Jun/2012:20:03:29 +0000] "-" 408 0 "-" "-" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:47:23.583

**解决方案**

问题出在 uWSGI 上。我不确定为什么它不起作用——但我相信这可能与 Facebook 的 Canvas 应用发布的数据太少有关。无论如何，这是对我有用的修复程序。

我修改了我的 uWSGI 配置选项。我添加了以下三个选项，即使第一个选项可能是无操作的，而最后一个选项可能只是为了保证良好的安全性（如果没有它，它可以在我的暂存站点上工作）。

```
<pep3333-input/>
<post-buffering>4096</post-buffering>
<buffer-size>32768</buffer-size> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:32:07.723

以前没有安装flash的IE有问题。我不知道他们是否修复了它。

CSRF 也是候选人。尝试删除 csrf 装饰器并停用 csrf 视图中间件。

您也可以在本地机器上试用。在 Facebook 应用程序设置中将站点 URL 设置为 localhost.local:8000，或使用这些设置创建一个新应用程序）并将 localhost.local 添加到您的主机文件。这允许您拥有 DEBUG=True 和日志记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:36:01.577

我今天使用 Flask 遇到了我认为同样的问题。GET 工作正常，POST 失败，但 Flask 没有报告任何错误，Firebug / Chrome 开发工具除了“连接已重置”之外没有报告任何内容。

然后我发现了 Flask 的创造者 Armin Ronacher 的这个片段：

[http://flask.pocoo.org/snippets/47/](http://flask.pocoo.org/snippets/47/)

它解释了问题并包含对我有用的修复程序。鉴于您摆弄了缓冲区参数，我怀疑这可能是同一个问题。

希望它至少可以帮助您找出问题的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:55:58.963

看起来这是一个已知问题。[这种](https://developers.facebook.com/bugs/325223977546904)解决方法将是一个好的开始。

# c - Matlab R2007b 未解决的外部与引擎实用程序

> ID：11056285
> 
> 赞同：0
> 
> 时间：2012-06-15T18:29:38.963
> 
> 标签：c, matlab, matlab-deployment, unresolved-external, matlab-engine

我正在尝试运行大多数 matlab 副本（我的是 Matlab R2007b）提供的 matlabdemo.c，尽管我尽了最大努力，但当我尝试通过 Visual Studio 命令提示符编译程序时，我仍然遇到“未解决的外部”错误。

我编译时使用： "cl -I"C:\Program Files\MATLAB\R2007b\extern\include" matlabdemo.c -link -dll -LIBPATH:"../lib/win64/microsoft/"labeng.lib"

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:41:10.807

您需要在 MATLAB 引擎库中进行链接。在 Windows 上，它们被称为`libeng.dll`and `libmx.dll`，它们位于 MATLAB 路径中的某个位置。或者，使用`mex`编译器脚本来构建您的引擎程序。以下是描述这两个选项的两个文档链接：

在 IDE 中编译引擎应用程序：http: [//www.mathworks.com/help/techdoc/matlab_external/bsru965.html](http://www.mathworks.com/help/techdoc/matlab_external/bsru965.html)

使用 MEX 命令编译引擎应用程序：http: [//www.mathworks.com/help/techdoc/matlab_external/bsq776w-1.html](http://www.mathworks.com/help/techdoc/matlab_external/bsq776w-1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:24:14.197

这是一个用于编译`engdemo.c`程序的示例批处理脚本。

显然，您必须调整路径以指向您的 MATLAB 安装（也正确选择 32/64 位版本）

### 编译.bat

```
call vcvarsall.bat
set MATLABROOT=C:\Program Files\MATLAB\R2012a
cl.exe engdemo.c libeng.lib libmx.lib /Fe"engdemo" /I"%MATLABROOT%\extern\include" /link /libpath:"%MATLABROOT%\extern\lib\win32\microsoft" 
```

运行时，您可能需要将 MATLAB`bin`目录放在路径上：

```
set PATH=%MATLABROOT%\bin\win32;%PATH% 
```

# html - 如何将div对齐到垂直和水平的中心

> ID：11056297
> 
> 赞同：0
> 
> 时间：2012-06-15T18:30:24.050
> 
> 标签：html, css

我想将 div 对齐到中心。

像这样

![在此处输入图像描述](../Images/7e6461b8f342cd6748c247ca514acf0c.png)

我试过margin-top，vertical-align

但它们也不起作用。

我也设置了左边小于0px

但内部 div 仍然是左边的 0px

如果我想要上图的 div

如何修改css使其如上图？

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
div
{
    border:solid;
}
#outer
{
    position:absolute;
    height:100px;
    width:50px;
    left:50px;
    top:50px;
}
#inner
{
    background:white;
    height:20%;
    width:120%;
    left:-10px;
    margin-top:auto;
    margin-buttom:auto;
    vertical-align:middle;
}
</style>
</head>
<body>

<div id="outer">
    <div id="inner">abc</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:34:17.657

试试这个 - [http://jsfiddle.net/vn6Wx/](http://jsfiddle.net/vn6Wx/)

```
#inner
{
    background:white;
    height:40%;
    width:200%;
    position: relative;
    left:-50%;
    top: 25%;
    margin-top:auto;
    margin-buttom:auto;
    vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:59:53.940

在不使用 JavaScript 的情况下垂直对齐元素的唯一灵活方法是将其放入表格单元格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:36:49.653

检查这个..

[http://jsfiddle.net/dmvcs/](http://jsfiddle.net/dmvcs/)

```
#outer{
  position:absolute;
  height:100px;
  width:50px;
  left:50px;
  top:50px;
  border:2px solid red;
}

#inner{
  background:white;
  position:absolute;
  height:50px;
  width:100px;
  top:50%;
  left:50%;
  margin-top:-25px;
  margin-left:-50px;
  border:2px solid green;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:31:40.183

你可以试试这个：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <style>
            html { height:100%; width:100%; }
            body { background-color: yellow; margin:0; padding:0; }
            #outer { width:100%; min-height:100%; background-color:red; position:absolute; }
            #inner { width:500px; height:500px; background-color:blue; position:relative; margin:10% auto; }
        </style>
    </head>
    <body>
        <div id="outer">
            <div id="inner">
            </div>
        </div>
    </body>
</html> 
```

祝你好运！

# r - 如何使用非标准格式的不规则时间序列制作直方图

> ID：11056298
> 
> 赞同：0
> 
> 时间：2012-06-15T18:22:47.603
> 
> 标签：r, excel, histogram

我在一天中有一个不规则（？）时间序列数据点，如下所示

```
Jun 5, 2012 10:58 AM
Jun 5, 2012 10:58 AM
Jun 5, 2012 11:59 AM
Jun 5, 2012 12:25 PM
Jun 5, 2012 1:07 PM
Jun 5, 2012 1:07 PM
Jun 5, 2012 1:17 PM
... 
```

我想制作一个直方图，其中 x 是从 0 小时到 23 小时的时间间隔，y 是每个 bin 中数据点的计数。

我试图通过将上面的数据转换为小时：分钟格式，然后绘制直方图，在 R 和 Excel 中做到这一点。

我面临的两个挑战：

1.  如何将上述数据转换为 Excel 或 R 等应用程序可以处理的标准时间格式？每个程序都有这样的功能吗？
2.  你如何用这种转换后的数据制作直方图？

我尝试使用 zoo 包，as.POSITlt 函数，但我迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:47:06.943

看看 chron 和 lubridate 包

```
Time <- c("Jun 5, 2012 10:58 AM",
"Jun 5, 2012 10:58 AM",
"Jun 5, 2012 11:59 AM",
"Jun 5, 2012 12:25 PM",
"Jun 5, 2012 1:07 PM",
"Jun 5, 2012 1:07 PM",
"Jun 5, 2012 1:17 PM")
library(chron)
Time2 <- as.chron(Time, format = "%b %d, %Y %I:%M %p")
library(lubridate)
x <- hours(Time2) + minutes(Time2) / 60
hist(x) 
```

# javascript - 反转数学公式

> ID：11056301
> 
> 赞同：-6
> 
> 时间：2012-06-15T18:30:41.447
> 
> 标签：javascript, math, algebra

我找到了这个公式来计算抵押贷款付款

利率是**IntRate**，**Pa**代表还款，**PrValue**是贷款的现值，**Period**是借钱的年数。

```
Pa = (PrValue * IntRate) / (1 - Math.pow (1 + IntRate, - (Period * PPay))) 
```

我想做的是获取**isPrValue的值**

```
isPrValue = ? 
```

[来源](http://www.1stop-mortgagecalculator.com/mortgage-calculator-code.htm#Canadian-Mortgage-Formula)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:34:18.120

你学过代数吗？

```
PrValue = (Pa * (1-Math.pow(1+IntRate, - (Period*PPay))))/IntRate 
```

# iphone - 更改 IOS Facebook 照片帖子的帖子标题

> ID：11056302
> 
> 赞同：1
> 
> 时间：2012-06-15T18:30:42.177
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我可以从我的 iphone 应用程序将照片发布到 Facebook：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               _imageView.image,         @"picture",_facebookcomment.textView.text, @"message",
                               nil]; 
[appDelegate.facebookRequest requestWithGraphPath:@"me/photos/"
                                        andParams:params
                                    andHttpMethod:@"POST"
                                      andDelegate:appDelegate]; 
```

但是，我想更改帖子的标题字段并在您拥有的每张照片上方添加参数，例如像 instagram 那样：

[姓名] 与 [instagram] 拍了一张 [照片]。姓名、照片和 instgram 都是相关联的。

我搜索并浏览了[http://developers.facebook.com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/)中的字段，例如“来自”和“标题”，但无法更改照片标题。任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:52:29.437

> [姓名] 与 [instagram] 拍了一张 [照片]。

我觉得你在这里寻找[Open Graph 操作](https://developers.facebook.com/docs/opengraph/)……</p>

# php - 在 Codeigniter 中组合 mysql AND OR 查询

> ID：11056303
> 
> 赞同：33
> 
> 时间：2012-06-15T18:30:42.817
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我想在 CI 中组合 AND OR mysql 查询。我已经看过这个帖子：[http](http://codeigniter.com/forums/viewthread/92818/) ://codeigniter.com/forums/viewthread/92818/ 。但他们没有在那里提供确切的解决方案。

**如何严格使用 CI 框架创建以下查询？**（我可以在没有括号的情况下轻松创建查询，但它不是同一个查询。）

```
SELECT * FROM `Persons` WHERE
LastName='Svendson' AND Age="12" AND
(FirstName='Tove' OR FirstName='Ola' OR Gender="M" OR Country="India") 
```

PS：这只是一个示例查询，即使它没有意义也不建议将查询的整个 OR 部分写在单个`where()`.

**编辑：**基本上我想要实现以下简单查询：

```
SELECT * FROM `table` WHERE field1='value1' AND (field2='value2' OR field3='value3') 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-07-17T20:31:30.350

在 CodeIgniter 3 中有新的方法[group_start() 和 group_end()](https://codeigniter.com/user_guide/database/query_builder.html#query-grouping)正是为此目的。

```
return $this->db
     ->where('LastName', 'Svendson');
     ->where('Age', 12);
     ->group_start()
         ->where('FirstName','Tove')
         ->or_where('FirstName','Ola')
         ->or_where('Gender','M')
         ->or_where('Country','India')
     ->group_end()
     ->get('Persons')
     ->result(); 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-15T19:17:14.680

这行得通吗？

```
$this->db->where('LastName', 'Svendson');
$this->db->where('Age', 12);
$this->db->where("(FirstName='Tove' OR FirstName='Ola' OR Gender='M' OR Country='India')", NULL, FALSE);
$query = $this->db->get('Persons');
return $query->result(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-22T16:52:44.837

使用codeigniter 3.0框架，有新功能可用于单独或在哪里和在哪里操作。即分组和分组结束

像这样的代码，

```
$this->db->where('LastName', 'Svendson');
$this->db->where('Age', 12);
$this->db->group_start();
$this->db->or_where('FirstName','Tove');
$this->db->or_where('FirstName','Ola');
$this->db->or_where('Gender','M');
$this->db->or_where('Country','India');
$this->db->group_end();
$query = $this->db->get('Persons');
return $query->result(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-15T03:13:36.900

在 Codeigniter 中我们可以像这样使用它很容易理解。

```
$sql = "SELECT
            *
        FROM
            `Persons`
        WHERE
            LastName = 'Svendson'
        AND Age = '12'
        AND (
            FirstName = 'Tove'
            OR FirstName = 'Ola'
            OR Gender = 'M'
            OR Country = 'India'
        )";

$query = $this->db->query($sql);

return $query->result(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-08T19:49:03.400

您可以简单地使用它

```
$this->db->where("status","live")->or_where("status","dead"); 
```

你也可以使用

```
$this->db->where("(status='live' OR status='dead')"); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-16T05:50:14.093

尝试使用`Query grouping`

给它链接

[http://www.codeigniter.com/userguide3/database/query_builder.html#query-grouping](http://www.codeigniter.com/userguide3/database/query_builder.html#query-grouping)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-30T17:01:24.860

目前使用 CI2，如果不扩展 Database 类并将方法的访问类型从私有更改为公共/受保护，则无法访问 Database 类的查询生成器方法 ($this->db->_compile_select() )，这会破坏该能力构建子查询就像您尝试使用 ActiveRecord 类构建一样。制作像您尝试构建的子查询的唯一方法是仅使用 db 查询方法

```
$table = $this->db->dbprefix('tablename');

$sql = "SELECT * FROM `{$table}` WHERE field1='?' AND (field2='?' OR field3='?') ";
$this->db->query($sql,array($field1,$field2,$field3)); 
```

[在CI Subquerys](http://shawnmccool.com/2009/09/18/using-code-igniters-active-record-class-to-create-subqueries/)上有一篇关于这样做的博客文章，但它已经过时了，只适用于 CI 1.7 希望能有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-15T17:50:09.443

CodeIgniter 2 我需要这个，但我需要的值仍然被转义，所以[csotelo 的答案](https://stackoverflow.com/a/12663185/5503625)对我不利，我不想像[Shawn C 的答案](https://stackoverflow.com/a/12663185/5503625)那样重写整个查询，所以我最终这样做了：

```
$this->db->where('LastName', $lastName);
$this->db->where('Age', $age, false);
$this->db->where('1 AND ( 0', null, false); // This one starts the group
  $this->db->or_where('FirstName', $firstName1);
  $this->db->or_where('FirstName', $firstName2);
  $this->db->or_where('Gender', $gender);
  $this->db->or_where('Country', $country);
$this->db->or_where('0 )', null, false); // This one ends the group
$query = $this->db->get('Persons'); 
```

这会生成以下查询：

```
SELECT *
FROM (`Persons`)
WHERE `LastName` =  'Svendson'
AND Age = 12
AND 1 AND ( 0 -- This one starts the group
OR `FirstName` =  'Tove'
OR `FirstName` =  'Ola'
OR `Gender` =  'M'
OR `Country` =  'India'
OR 0 ) -- This one ends the group 
```

这将与此相同：

```
SELECT * FROM (`Persons`) WHERE
`LastName` = 'Svendson' AND Age = 12 AND 1 AND
(0 OR `FirstName` = 'Tove' OR `FirstName` = 'Ola' OR `Gender` = 'M' OR `Country` = 'India' OR 0) 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-06-15T18:47:38.293

查询本身没有意义，您正在选择：

*   托芙·斯文森，12 岁
*   奥拉·斯文森，12 岁
*   任何名叫斯文森的男性，12 岁
*   任何 12 岁的印度人 Svendson

Tove 看起来像一个男人的名字，所以选择性别是不必要的。Ola 看起来像一个女孩的名字，所以选择性别不仅没有必要，而且没有任何意义。您的查询将返回任何名为 Svendson 的 12 岁男性、任何来自印度的名为 Svenson 的 12 岁男性以及 Tove 和 Ola Svendson（如果他们 12 岁）。

你为什么不想把它放在 () 括号之间？出于某种原因，您想通过活动记录来完成它吗？

# android - 为什么我的数据库在添加新列后会崩溃？

> ID：11056304
> 
> 赞同：0
> 
> 时间：2012-06-15T18:30:49.180
> 
> 标签：android, database, sqlite

我正在尝试将一个新列添加到一个中，`SQLiteDatabase`但每次我尝试使用新列运行代码时它都会崩溃。如果我只是添加新列，那么它运行正常，但是当我尝试在代码中使用它时它会崩溃。有问题的值是`KEY_END_TIME`任何带有“end”字样的值。我尝试将与 相同的确切值传递给它`KEY_DATE_TIME`，或多或少地在完全相同的上下文中使用它们以试图让它运行，但它每次都会立即崩溃。任何帮助或建议将不胜感激。

```
/**
 * Simple reminder database access helper class. 
 * Defines the basic CRUD operations (Create, Read, Update, Delete)
 * for the example, and gives the ability to list all reminders as well as
 * retrieve or modify a specific reminder.
 * 
 */
public class RemindersDbAdapter {

//
// Databsae Related Constants
//
private static final String DATABASE_NAME = "data";
private static final String DATABASE_TABLE = "reminders";
private static final int DATABASE_VERSION = 4;

public static final String KEY_TITLE = "title";
public static final String KEY_CUSTOMER = "body";
public static final String KEY_DATE_TIME = "reminder_date_time"; 
public static final String KEY_END_TIME = "reminder_end_time"; 
public static final String KEY_ROWID = "_id";

private static final String TAG = "ReminderDbAdapter";
private DatabaseHelper mDbHelper;
private SQLiteDatabase mDb;

/**
 * Database creation SQL statement
 */
private static final String DATABASE_CREATE =
        "create table " + DATABASE_TABLE + " ("
                + KEY_ROWID + " integer primary key autoincrement, "
                + KEY_TITLE + " text not null, " 
                + KEY_CUSTOMER + " text not null, " 
                + KEY_DATE_TIME + " text not null);"
                + KEY_END_TIME + " text not null);"; 

private final Context mCtx;

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");

        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }
}

/**
 * Constructor - takes the context to allow the database to be
 * opened/created
 * 
 * @param ctx the Context within which to work
 */
public RemindersDbAdapter(Context ctx) {
    this.mCtx = ctx;
}

/**
 * Open the database. If it cannot be opened, try to create a new
 * instance of the database. If it cannot be created, throw an exception to
 * signal the failure
 * 
 * @return this (self reference, allowing this to be chained in an
 *         initialization call)
 * @throws SQLException if the database could be neither opened or created
 */
public RemindersDbAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
}

public void close() {
    mDbHelper.close();
}

/**
 * Create a new reminder using the title, body and reminder date time provided. 
 * If the reminder is  successfully created return the new rowId
 * for that reminder, otherwise return a -1 to indicate failure.
 * 
 * @param title the title of the reminder
 * @param body the body of the reminder
 * @param reminderDateTime the date and time the reminder should remind the user
 * @return rowId or -1 if failed
 */
public long createReminder(String title, String body, String reminderDateTime, String        reminderEndTime) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_TITLE, title);
    initialValues.put(KEY_CUSTOMER, body);
    initialValues.put(KEY_DATE_TIME, reminderDateTime);
    initialValues.put(KEY_END_TIME, reminderDateTime); 

    return mDb.insert(DATABASE_TABLE, null, initialValues);
}

/**
 * Delete the reminder with the given rowId
 * 
 * @param rowId id of reminder to delete
 * @return true if deleted, false otherwise
 */
public boolean deleteReminder(long rowId) {

    return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
}

/**
 * Return a Cursor over the list of all reminders in the database
 * 
 * @return Cursor over all reminders
 */
public Cursor fetchAllReminders() {

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_CUSTOMER, KEY_DATE_TIME, KEY_END_TIME}, null, null, null, null, null);
}

/**
 * Return a Cursor positioned at the reminder that matches the given rowId
 * 
 * @param rowId id of reminder to retrieve
 * @return Cursor positioned to matching reminder, if found
 * @throws SQLException if reminder could not be found/retrieved
 */
public Cursor fetchReminder(long rowId) throws SQLException {

    Cursor mCursor =

            mDb.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                    KEY_TITLE, KEY_CUSTOMER, KEY_DATE_TIME, KEY_END_TIME}, KEY_ROWID +     "=" + rowId, null,
                    null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

/**
 * Update the reminder using the details provided. The reminder to be updated is
 * specified using the rowId, and it is altered to use the title, body and reminder     date time
 * values passed in
 * 
 * @param rowId id of reminder to update
 * @param title value to set reminder title to
 * @param body value to set reminder body to
 * @param reminderDateTime value to set the reminder time. 
 * @return true if the reminder was successfully updated, false otherwise
 */
public boolean updateReminder(long rowId, String title, String body, String reminderDateTime, String reminderEndTime) {
    ContentValues args = new ContentValues();
    args.put(KEY_TITLE, title);
    args.put(KEY_CUSTOMER, body);
    args.put(KEY_DATE_TIME, reminderDateTime);
    args.put(KEY_END_TIME, reminderEndTime);

    return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
} 
```

}

```
06-15 18:11:12.356: E/AndroidRuntime(790): FATAL EXCEPTION: main
06-15 18:11:12.356: E/AndroidRuntime(790): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dummies.android.TaskReminder/com.dummies.android.TaskReminder.TaskReminderActivity}: android.database.sqlite.SQLiteException: no such column: reminder_end_time: , while compiling: SELECT _id, title, body, reminder_date_time, reminder_end_time FROM reminders
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.os.Looper.loop(Looper.java:137)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-15 18:11:12.356: E/AndroidRuntime(790):  at java.lang.reflect.Method.invokeNative(Native Method)
06-15 18:11:12.356: E/AndroidRuntime(790):  at java.lang.reflect.Method.invoke(Method.java:511)
06-15 18:11:12.356: E/AndroidRuntime(790):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-15 18:11:12.356: E/AndroidRuntime(790):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-15 18:11:12.356: E/AndroidRuntime(790):  at dalvik.system.NativeStart.main(Native Method)
06-15 18:11:12.356: E/AndroidRuntime(790): Caused by: android.database.sqlite.SQLiteException: no such column: reminder_end_time: , while compiling: SELECT _id, title, body, reminder_date_time, reminder_end_time FROM reminders
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1485)
06-15 18:11:12.356: E/AndroidRuntime(790):  at com.dummies.android.TaskReminder.RemindersDbAdapter.fetchAllReminders(RemindersDbAdapter.java:144)
06-15 18:11:12.356: E/AndroidRuntime(790):  at com.dummies.android.TaskReminder.TaskReminderActivity.fillData(TaskReminderActivity.java:40)
06-15 18:11:12.356: E/AndroidRuntime(790):  at com.dummies.android.TaskReminder.TaskReminderActivity.onCreate(TaskReminderActivity.java:33)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.app.Activity.performCreate(Activity.java:4465)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-15 18:11:12.356: E/AndroidRuntime(790):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:39:58.253

我认为问题在

```
"create table " + DATABASE_TABLE + " ("
        + KEY_ROWID + " integer primary key autoincrement, "
        + KEY_TITLE + " text not null, " 
        + KEY_CUSTOMER + " text not null, " 
        + KEY_DATE_TIME + " text not null);"
        + KEY_END_TIME + " text not null);"; 
```

");" 得到两次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:41:43.723

您的 create 语句格式错误：

```
 + KEY_DATE_TIME + " text not null);"
            + KEY_END_TIME + " text not null);"; 
```

你有关闭“）;” 两次，因此添加 KEY_END_TIME 的行在 create 语句之外并且不被执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:41:57.017

您的 sql 创建字符串是错误的。像这样修改它：

```
...+ KEY_DATE_TIME + " text not null, "
                + KEY_END_TIME + " text not null);"; 
```

请记住卸载然后重新安装您的应用程序，以便`onCreate`再次调用该方法并重新创建数据库。

# jquery - 带有 IE8 的 jQuery AJAX

> ID：11056310
> 
> 赞同：6
> 
> 时间：2012-06-15T18:31:35.553
> 
> 标签：jquery, ajax, internet-explorer-8

我正在尝试通过`$.ajax`用户提交表单来实现获取请求。

我不确定我正在做的是否是最有效的方法（将单击绑定到表单按钮）所以如果有更有效的方法（或标准方法），请提出建议！

我的结果是内容 div 在 FF/Chrome 中正确填充，但 IE 不是。IE 似乎正在提交表单并完全重新加载页面。

此外，我确实认为我需要“提交”表单，因为我想利用 jQuery `validate();`，它不适用于以下实现（即使在 FF/Chrome 中）。

**Javascript**：

```
$(document).ready(function(){

   $("#theForm").submit(function(){
       // build our data to send in our request
       var mydata = {method: "search", color: $('#color').val()};

       $.ajax({
           url: 'foo.php',
           data: mydata,
           type: 'get',
           dataType: 'json',
           success: function(data){
              $("#content").html(data);
           }
           error: function(e){
             console.log(e.message);
           }
       });
    return false;
   });
}); 
```

**HTML**：

```
<form id="search">
       <input type="submit" />
</form>

<div id="content"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:34:07.587

您应该将提交按钮更改为按钮类型。submit 类型的输入会自动发布页面，在您的情况下，这不是必需的。

```
<input type="button" id="search-button"> 
```

[否则，您可以使用event.preventDefault()](http://api.jquery.com/event.preventDefault/)阻止按钮的默认操作。

```
$("#search-button").click(function(event){
    event.preventDefault();

    $.ajax({
        url: 'foo.php',
        data: mydata,
        type: 'get',
        dataType: 'json',
        contentType: 'application/json',
        success: function(data){
            $("#content").html(data);
        }
    });
}); 
```

由于您期望从服务器返回 html，因此最好指定`dataType`您期望的实际上是 html。请注意，您之前将 json 设置为`dataType`. 您还可以指定传递给服务器的数据类型`contentType`，在您的情况下是 json，因此您应该使用`application/json`.

根据您的评论，您的 dataType 应该是 json。

我刚刚注意到您的`$(document).ready(function() {});`似乎没有关闭。你似乎忘记了`);`. 这是复制粘贴问题吗？

在您最近的代码编辑之后，您似乎在成功和错误之间缺少逗号。

```
$.ajax({
    url: 'foo.php',
    data: mydata,
    type: 'get',
    dataType: 'json',
    success: function(data){
        $("#content").html(data);
    }, // <---
    error: function(e){
         console.log(e.message);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T17:40:11.513

我终于尝试调用一个独立的函数：

```
$.ajax({
    ...
    ,success: function(data){
        updCont(data)
    }
...
});
function updCont(htm){
    $("#content").html(htm);
} 
```

我在这个问题上失去了**几天**！噩梦结束。也许 IE8 不信任外来内容，因此不允许从 AJAX 插入新内容，而现有的功能具有更强大的功能和更少的浏览器安全问题？

哦，是的，还要检查`event.preventDefault()`以防止`submit()`操作接管

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:35:27.230

您应该绑定表单的提交事件，并取消默认事件 - 提交表单（通过[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)或简单地`return false;`，这[也将停止传播](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)）。

```
<form id="theForm">
<input type="submit" id="search-button">
</form>

$("#theForm").submit(function(){

 $.ajax({
    url: 'foo.php',
    data: mydata,
    type: 'get',
    dataType: 'json',
    success: function(data){
          $("#content").html(data);
      }
  });

  return false;
}); 
```

还要注意`json`应该`'json'`是`dataType`. 您也可以考虑使用[`getJSON()`](http://api.jquery.com/jQuery.getJSON/). 我还从代码中清除了一些不必要的字符。

# java - hapi - 此元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc

> ID：11056314
> 
> 赞同：0
> 
> 时间：2012-06-15T18:32:03.423
> 
> 标签：java, eclipse, api, hapi

我正在使用 JSF 在 Eclipse 中构建 webApp

[我最近从hapi page](http://sourceforge.net/projects/hl7api/files/hl7api/)下载了 hapi api ，并下载了 1.2V 并将 jars 添加到我项目中的 lib 文件夹中。并开始尝试在[他们的示例页面](http://hl7api.sourceforge.net/xref/ca/uhn/hl7v2/examples/ExampleParseMessages.html)中遵循示例，但随后我 import *import ca.uhn.hl7v2.parser.GenericParser;* 例如，我收到一条消息说

> 此元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc

.

![在此处输入图像描述](../Images/b5afef6461796164acdf5be20c9e9a59.png)

这意味着什么？我没有正确添加罐子吗？我该怎么办？

**编辑：**

我的 java 类看起来像这样：

```
package com.bravo.patient;

import ca.uhn.hl7v2.parser.GenericParser;
import ca.uhn.hl7v2.HL7Exception;
import ca.uhn.hl7v2.app.Application;
import ca.uhn.hl7v2.app.Connection;
import ca.uhn.hl7v2.app.ConnectionHub;
import ca.uhn.hl7v2.app.Initiator;
import ca.uhn.hl7v2.app.SimpleServer;
import ca.uhn.hl7v2.llp.LLPException;
import ca.uhn.hl7v2.llp.LowerLayerProtocol;
import ca.uhn.hl7v2.llp.MinLowerLayerProtocol;
import ca.uhn.hl7v2.model.Message;
import ca.uhn.hl7v2.parser.EncodingNotSupportedException;
import ca.uhn.hl7v2.parser.Parser;
import ca.uhn.hl7v2.parser.PipeParser;

import com.bravo.SecuredPage;
import org.apache.commons.io.IOUtils;
import org.apache.log4j.Logger;
import java.io.InputStream;
import org.apache.myfaces.custom.fileupload.UploadedFile;

public class HL7Test extends SecuredPage{

static final Logger logger = Logger.getLogger(HL7Test.class);

private UploadedFile uploadedFile;
private String today = "";

public HL7Test(){
    initialize();
    secure();       
}

private void secure(){
    /** Assign the required permission elements to the any pages using this Backing Bean **/ 
    registerSecurePageId("patient");
    registerSecurePageAction("");
    registerSecurePageComponent("");
}

public void initialize(){       

}

public UploadedFile getUploadedFile(){
    return this.uploadedFile;
}

public void setUploadedFile(UploadedFile uploadedFile){
    this.uploadedFile = uploadedFile;
}

/**********************
ACTIONS
**********************/

public String actionTest(){
    try{

        String message = "n";
        InputStream is = uploadedFile.getInputStream();         
        message = IOUtils.toString(is, "UTF-8");              

        Parser p = new GenericParser();
        Message adt = p.parse(message);

    }catch (Exception e) {
        e.printStackTrace();
    }
    return "";
}

public String getToday(){
    return this.today;
}

public void setToday(String today){
    this.today = today;
} 
```

}

我正在测试这个页面。我上传了一条 hl7 消息并尝试解析它，但一旦我到达解析，我就会收到一个错误。当我尝试调试它时。它给了我这个错误

> 严重：java.lang.NoClassDefFoundError：org/apache/xerces/xni/parser/XMLParserConfiguration javax.faces.el.E​​valuationException：java.lang.NoClassDefFoundError：org/apache/xerces/xni/parser/XMLParserConfiguration

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:50:29.883

您想查看某个项目的文档 (javadoc)。那个项目

1) 来自一个 jar 文件，其中 2) 没有包含附加到该 jar 的 javadoc html 页面的预处理 jar 文件，并且没有 3) 附加到该 jar 的源 zip（因此 Eclipse 可以自己生成 javadoc） .

这不是错误。您的代码很可能运行良好。要修复它，请右键单击包含该项目的 jar 并附加 javadoc zip 文件或源 zip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:41:23.107

这意味着您下载的jar 不包含javadoc。我不知道您使用的是哪个版本的 Hapi，但这里有一个指向带有其他 Hapi jar 的 Maven 存储库的链接，其中一些包含 javadoc - [Hapi。](http://search.maven.org/#search%7Cga%7C1%7Chapi)

# c# - 在 Windows 服务中以特定时间间隔发送电子邮件

> ID：11056315
> 
> 赞同：0
> 
> 时间：2012-06-15T18:32:05.940
> 
> 标签：c#, visual-studio-2010, windows-services, window

我正在使用 Visual Studio 2010 和 Database Sql Server 2010。

我创建了一个窗口服务，它必须在时间间隔发生时发送电子邮件（EMAIL_SENT_TIME）

我的数据库包含此列

```
 Tracker_Id bigint 
,EMAIL_SENT_TIME bigint --this contains interval in which the email must be fired 1800,3600,7200 etc, 
    Last_check datetime --the previous check datetime,
    next_check datetime --the next check datetime 
```

假设表包含此日期 tracker_Id | EMAIL_SENT_TIME | 最后检查 | next_check
100097 1800 日期时间 nextdatetime
100098 3600 日期时间 nextdatetime
100099 7200 日期时间 nextdatetime
100100 1800 日期时间 nextdatetime

1800 表示 30 分钟，3600 表示 1 小时等。

我想在 30 分钟后发送电子邮件，那些 EMAIL_SENT_TIME 是 1800 等等。

如何解决这个问题呢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:39:47.647

每条记录的 EMAIL_SENT_TIME 列可以更改还是常量？在间隔上做某事的最简单方法之一是 System.Threading.Timer 类。第一个参数是回调函数（在这种情况下，每次间隔过去时发送一封电子邮件），然后是状态数据（这可能包含您要插入到每封电子邮件中的信息，偏移时间，最后一个是间隔。这个如果您的数据库 EMA​​IL_SENT_TIME 值发生更改，该类还允许您在 Timer 运行时更改间隔。

```
Timer timer = new Timer((x) => SendEmail(), null, 0, EMAIL_SENT_TIME * 1000). 
```

在 SendEmail() 函数中，您可以在 Last_Check 时间列中记录当前的 DateTime.Now。您实际上并不需要 Next_Check，因为您始终可以添加最后一次检查加上间隔来获得该值。

[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

# string - 从字符串中删除两个子字符串

> ID：11056320
> 
> 赞同：5
> 
> 时间：2012-06-15T18:32:31.100
> 
> 标签：string, bash

我有一个这样的文件列表：

```
wgEncodeCaltechRnaSeqGm12878R1x75dFastqRep1.fastq.trim.tags.sam
wgEncodeCaltechRnaSeqGm12878R1x75dFastqRep2.fastq.trim.tags.sam
wgEncodeCshlLongRnaSeqGm12878CellPapFastqRd1Rep1.fastq.trim00.tags.sam
wgEncodeCshlLongRnaSeqGm12878CellPapFastqRd1Rep1.fastq.trim01.tags.sam
wgEncodeCshlLongRnaSeqGm12878CellPapFastqRd1Rep1.fastq.trim02.tags.sam
wgEncodeCshlLongRnaSeqGm12878CellPapFastqRd1Rep2.fastq.trim00.tags.sam
wgEncodeCshlLongRnaSeqGm12878CellPapFastqRd1Rep2.fastq.trim01.tags.sam
wgEncodeCshlLongRnaSeqGm12878CellPapFastqRd1Rep2.fastq.trim02.tags.sam
wgEncodeCshlLongRnaSeqGm12878CellPapFastqRd2Rep1.fastq.trim00.tags.sam
wgEncodeCshlLongRnaSeqGm12878CellPapFastqRd2Rep1.fastq.trim01.tags.sam 
```

我想从文件名中删除 Rd1、Rd2 和 .sam 字符串。使用以下 bash 脚本，我可以使用两个命令删除 Rd1、Rd2 和 .sam 字符串....

```
for i in $(ls)

do

echo "${i/Rd?/}"
echo "${i/.sam/}"

done 
```

但是我想知道如何一步完成两个替换你知道怎么做吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T19:07:20.507

您可以使用扩展模式在`bash`.

```
shopt -s extglob
echo ${i//@(Rd?|.sam)} 
```

这是细分：

1.  用于`//`替换所有出现的模式，而不仅仅是第一个。
2.  `@(Rd?|.sam)`是一个扩展模式，它匹配*或* 。管道将两个子模式分开。`Rd?``.sam`

从技术上讲，您希望能够避免从单词中间删除“.sam”，但看起来这对您的用例来说是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:38:17.460

我们当然知道！

```
for i in *
do
   echo $i | sed 's/Rd.//;s/\.sam$//'
done 
```

当你想重命名这些文件时：

```
for i in *
do
   mv "$i" "$(echo $i | sed 's/Rd.//;s/\.sam$//')"
done 
```

# c# - 如何在 wpf 中获取默认选定打印机的端口名称

> ID：11056322
> 
> 赞同：1
> 
> 时间：2012-06-15T18:32:33.813
> 
> 标签：c#, wpf

我编写了代码来获取安装在我的系统中的打印机的名称。但我不知道要获取该打印机端口名称。这里是我写的代码。

```
public MainWindow()
    {
        this.InitializeComponent();

        PrintServer server = new PrintServer();

        foreach (PrintQueue queue in server.GetPrintQueues())
        {
            cboPrinters.Items.Add(queue.FullName);
        }

        var DefaultPrinter = new LocalPrintServer().DefaultPrintQueue;
        string default_name=DefaultPrinter.FullName;

        txxt_default.Text = "The default printe is "+" "+default_name;
    } 
```

结果会是这样

![打印机](../Images/0f4a9d7fa7b7d43ce2ddd102e7a3739d.png)

![在此处输入图像描述](../Images/087292ab9fa9426039f4c0f75f97e3c4.png)

我必须得到选定打印机的端口名称“DOP7”（下图提到）。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T22:04:32.337

您是否尝试过[PrintQueue.QueuePort 属性](http://msdn.microsoft.com/en-us/library/system.printing.printqueue.queueport.aspx)？

```
string default_port = DefaultPrinter.QueuePort.Name; 
```

**更新：**

然后我建议将`PrintQueue`对象添加到`ComboBox`

```
public MainWindow()
{
   InitializeComponent();

   PrintServer server = new PrintServer();

   foreach (PrintQueue queue in server.GetPrintQueues())
   {
      cboPrinters.Items.Add(queue);
   }
} 
```

并`DisplayMemberPath`用于显示`FullName`：

```
<ComboBox Name="cboPrinters"
          DisplayMemberPath="FullName"
          SelectionChanged="cboPrinters_SelectionChanged" /> 
```

在 EventHandler 中，您可以获得如下端口名称：

```
private void cboPrinters_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
   PrintQueue printer = cboPrinters.SelectedItem as PrintQueue;
   string portname = printer.QueuePort.Name;
} 
```

# gwt - 如果 GWT RPC 请求失败，如何重新发送（或如何创建持久性 RPC 请求）？

> ID：11056324
> 
> 赞同：5
> 
> 时间：2012-06-15T18:32:40.193
> 
> 标签：gwt

如果失败（除 HTTP 200 之外的任何响应代码），我需要重试发送 GWT RPC 请求。原因很复杂，我就不细说了。到目前为止，我将所有请求响应都放在同一个地方，如下所示：

```
 // We override the RpcRequestBuilder.doSetCallback method and force your service to use it
    // With this we can read the response headers if we need to.
    ((ServiceDefTarget)serviceRPC).setRpcRequestBuilder(new RpcRequestBuilder() {

        @Override
        protected void doSetCallback(RequestBuilder rb, final RequestCallback callback) {
            super.doSetCallback(rb, new RequestCallback() {

                @Override
                public void onResponseReceived(Request request,
                        Response response) {
                    httpResponseOkHandler(callback, request, response);
                }

                @Override
                public void onError(Request request, Throwable exception) {
                    httpResponseErrorHandler(callback, request, exception);
                }
            });
        }
    }); 
```

因此，使用***httpResponseOkHandler***方法，我可以捕获 HTTP 故障。但是，有没有办法“重新抛出”请求，即再试一次？我不想存储 RPC 请求的高级参数，我更愿意使用已经流式传输并准备重新发送的请求内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T22:16:12.807

好吧，我自己找到了答案。所以它毕竟很整洁。在负载重的医院环境中工作，网络往往不可靠。所以这就是为什么我需要在放弃之前重新发送几次 rpc 请求。这是解决方案：

1-为您设置特殊请求构建器以捕获所有请求响应但保留请求构建器。

```
 ((ServiceDefTarget)serviceRPC).setRpcRequestBuilder(new RpcRequestBuilder() {

        @Override
        protected void doSetCallback(RequestBuilder rb, final RequestCallback callback) {
            final RequestBuilder requestBuilder = rb;
            super.doSetCallback(rb, new RequestCallback() {

                @Override
                public void onResponseReceived(Request request,
                        Response response) {
                    httpResponseOkHandler(requestBuilder, callback, request, response);
                }

                @Override
                public void onError(Request request, Throwable exception) {
                    httpResponseErrorHandler(requestBuilder, callback, request, exception);
                }
            });
        }
    }); 
```

2-现在使用请求生成器发送请求任意多次。一件好事是已经设置了请求构建器并且数据被序列化，这避免了存储 POJO 未序列化的数据。

```
 // We had some server HTTP error response (we only expect code 200 from server when using RPC)
    if (response.getStatusCode() != Response.SC_OK) {
        Integer requestTry = requestValidation.get(requestBuilder.getRequestData());
        if (requestTry == null) {
            requestValidation.put(requestBuilder.getRequestData(), 1);
            sendRequest(requestBuilder, callback, request);
        }
        else if (requestTry < MAX_RESEND_RETRY) {
            requestTry += 1;
            requestValidation.put(requestBuilder.getRequestData(), requestTry);
            sendRequest(requestBuilder, callback, request);
        } else {
            InvocationException iex = new InvocationException("Unable to initiate the asynchronous service invocation -- check the network connection", null);
            callback.onError(request, iex);
        }
    } else {
        callback.onResponseReceived(request, response);         
    } 
```

这对我来说很好，使用它需要您自担风险！

# android - Android 启动活动，使其对您的活动透明

> ID：11056325
> 
> 赞同：0
> 
> 时间：2012-06-15T18:32:41.733
> 
> 标签：android, view, android-activity, transparency

基本上我想做与此[相反的事情](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)：在我自己的之上运行另一个活动（我没有编写），并使该活动透明。所以它就像运行另一个应用程序（无论它可能是什么），但具有自定义背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:34:34.363

您不能影响其他活动的背景。

因此，除非您未编写的其他活动已经是透明的，或者为其他人提供某种类型的 API 以请求将其透明（可能但不太可能）。你真的没有办法做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T07:38:06.903

对不起我的英语不好，但我尽我所能。

我需要反过来。我有一个活动，然后我调用了另一个应用程序。但有时我会为用户提供一些信息。所以我将在另一个应用程序上混合一个透明的活动。

我仍然。我做了一个透明背景的活动。当我调用此活动时，它将被打开。但不在其他App面前。我的主 Activity 将被打开，透明的 Activity 将在此之前启动。

但我喜欢在另一个 App 前面看到我的透明 Activity。这可能吗？

我的代码：

```
 public class MsgDialog extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.msg_dialog);

    }
} 
```

这是迄今为止没有功能的活动，但这并不重要。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" android:background="@color/transparent ">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

布局只有 2 个按钮，但透明背景。

```
<activity android:name=".MsgDialog" android:theme="@style/Theme.Transparent"></activity> 
```

此活动的清单行：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">true</item>
  </style>
</resources> 
```

我自己的主题资源

所以它有效但只在我自己的应用程序前面而不是在外国应用程序前面。有什么想法可以解决我的问题吗？

谢谢 Oner

# jpanel - jpanel图形在调整大小等时不会重新绘制

> ID：11056327
> 
> 赞同：0
> 
> 时间：2012-06-15T18:32:46.013
> 
> 标签：jpanel, repaint

现在我有一个函数，在一个用于监听我的服务器的类中，它根据管道文件绘制我的游戏地图：

```
String[] mapSplit = map.split("\\|");

mapWidth = Integer.parseInt(mapSplit[0]);
mapHeight = Integer.parseInt(mapSplit[1]);
String[] groundLayer = mapSplit[2].split(", ");
String[] buildingLayer = mapSplit[3].split(", ");
String[] objectLayer = mapSplit[4].split(", ");
int count = 0;

logger.info("Drawing started.");
for (int x=0; x<mapWidth; x++){
    xDraw = 0;
    for (int y=0; y<mapHeight; y++){
        if (!groundLayer[count].equals("0")){ //don't draw full transparent tiles
            SpriteStore.get().getSprite("images/tiles/" + groundLayer[count] + ".png").draw(m.gamePanel.getGraphics(), xDraw, yDraw);
        }
        if (!buildingLayer[count].equals("0")){ //don't draw full transparent tiles
            SpriteStore.get().getSprite("images/tiles/" + buildingLayer[count] + ".png").draw(m.gamePanel.getGraphics(), xDraw, yDraw);
        }
        if (!objectLayer[count].equals("0")){ //don't draw full transparent tiles
            SpriteStore.get().getSprite("images/tiles/" + objectLayer[count] + ".png").draw(m.gamePanel.getGraphics(), xDraw, yDraw);
        }
        xDraw += 32;
        count++;
    }
    yDraw += 32;
}
logger.info("Drawing done."); 
```

这一切都很好，花花公子。Right now I don't have a gameloop as I am working on a client/server protocol so it only draws once(when the character is selected and login is done). 当 jpanel 所在的 jrame 被调整大小时，或者当我的任何 jinternal 框架在 jpanel 上移动时，我的问题就出现了。

当 JFrame 调整大小时，整个地图就会消失。

当 JInternalFrames 在 JPanel 上移动时，地图会在发生重叠的位置被移除。

我很确定这是由于 AWT 调用了重绘（从我在此处发布之前所做的一些环顾四周），但我无法获得解决方案。

除非我选择更新它，否则我几乎不希望我的 JPanel(map) 被清除/擦除/编辑。这应该包括在其上拖动其他组件、最小化窗口、覆盖部分/全部 JFrame 的另一个（窗口）应用程序等。对此的任何帮助将不胜感激。

![JInternalFrame 遮挡地图](../Images/c04a77c48959dd943ed654659be8153f.png)

^^上面是一个例子，我的意思是拖动 JInternalFrame 会删除你拖动的部分^^

**编辑** 我想发布 Stefan Haustein 帮助我找到的解决方案！！！

在我的主课中，我制作了图像： gamePanelImage = new BufferedImage(gamePanelWidth, gamePanelHeight, BufferedImage.TYPE_INT_ARGB); 游戏面板 = 新地图游戏面板（）；

在我的服务器命令侦听器中：

```
logger.info("Drawing started.");
for (int x=0; x<mapWidth; x++){
    xDraw = 0;
    for (int y=0; y<mapHeight; y++){
        //m.gamePanel.getGraphics()
        if (!groundLayer[count].equals("0")){ //don't draw full transparent tiles
            SpriteStore.get().getSprite("images/tiles/" + groundLayer[count] + ".png").draw(MyClient.getGamePanelImage(), xDraw, yDraw);
        }
        if (!buildingLayer[count].equals("0")){ //don't draw full transparent tiles
            SpriteStore.get().getSprite("images/tiles/" + buildingLayer[count] + ".png").draw(MyClient.getGamePanelImage(), xDraw, yDraw);
        }
        if (!objectLayer[count].equals("0")){ //don't draw full transparent tiles
            SpriteStore.get().getSprite("images/tiles/" + objectLayer[count] + ".png").draw(MyClient.getGamePanelImage(), xDraw, yDraw);
        }
        xDraw += 32;
        count++;
    }
    yDraw += 32;
}
logger.info("Drawing done."); 
```

最后是我用来覆盖 JPanel 的类：

```
package com.jayavon.game.graphics;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;

import javax.swing.BorderFactory;
import javax.swing.JPanel;

import com.jayavon.game.client.MyClient;

public class MapGamePanel extends JPanel {
    private static final long serialVersionUID = 1L;

    public MapGamePanel() {
        super();
        setLayout(new BorderLayout());
        setBorder(BorderFactory.createLineBorder(Color.black));
    }

    protected void paintComponent(Graphics g) {
        g.drawImage(MyClient.getGamePanelImage(), 0, 0, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:05:05.637

您是否覆盖绘画（图形）并在绘画（图形）中进行绘图？如果不是，那可能就是问题所在。

请参阅此处的“绘制方法”：http: [//java.sun.com/products/jfc/tsc/articles/painting/index.html](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)

如果您想避免在paint()（或paintComponent()）中重新绘制地图，请在收到服务器数据时将地图绘制到BufferedImage（在图像上使用getGraphics）。在paint() 中，只需绘制您的缓冲图像。

# sql-server-2005 - 事实表上覆盖索引的用处

> ID：11056330
> 
> 赞同：1
> 
> 时间：2012-06-15T18:33:01.660
> 
> 标签：sql-server-2005, indexing, data-warehouse, olap, star-schema

考虑以下形式的事实表：

```
CREATE TABLE Fact1
(
    Dim1 int NOT NULL,
    Dim2 int NOT NULL,
    Dim3 int NOT NULL,
    Data1 int NOT NULL,
    Data2 int NOT NULL
    ...
) 
```

`Fact1`在每个维度上都有一个列索引。`Dim1`假定为时间维度，粒度细至小时范围（例如，2011 年 3 月 12 日下午 2 点到 6 点之间）。在 Dim1中包含`Dim2`和`Dim3`覆盖列是否有用？或者同样在其中任何一个上？

更一般地说，将其他维度表 FK 列作为给定维度的索引上的覆盖列包含在内是否有用？

*注意：对于事实表，我们假设不需要唯一标识给定的事实。因此，缺少主键或代理键。(Dim1, Dim2, Dim3) 始终是唯一的元组来保证唯一性。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:08:10.707

我将尝试回答更一般的问题 - “将其他维度表 FK 列作为给定维度的索引上的覆盖列包含在内是否有用？”

是的。如果您有大量执行 COUNT() 之类的操作的查询，其中覆盖索引允许您扫描较小的数据集，那么添加这些其他维度可能很有价值。

```
SELECT Dim1, Dim2, count(*)
from Fact1
group by Dim1, Dim2 
```

只有 Dim1 或 Dim2 上的索引，您最终不得不做一个 FTS 来做这个计数。*这可能完全没问题。全面扫描并不总是坏事。*但是，如果你想加快这类查询的速度（比如事实表很宽），那么在 Dim1 上添加一个 B-tree 索引，Dim2 将允许 DBMS 去索引进行计数，而不必去到表数。请注意，它仍然会对索引进行全盘扫描，这可能只比全表扫描快一点。

一般来说，我怀疑您是否会看到这么多的性能提升，因为无论如何您仍在扫描索引的所有行，除非索引明显小于表，否则您可能不会得到很大的改进。

由于它是一个事实表，因此在维度上覆盖索引会有所帮助的唯一查询是仅查询维度本身时。任何使用事实的东西都需要进行索引扫描，然后在表中查找实际数据。

我可能只是在 dims 上为使用键（和连接）的查询构建 B-tree 索引，然后在系统运行一段时间并识别出常见查询时根据需要添加其他索引。

我能想到的另一种情况是，像这样的“覆盖”索引可能有助于加快查询速度，即当您有关注特定维度组合的查询时，您只需要那些特定的行。

```
SELECT Dim1, Dim2, Data1, Data2
  FROM Fact1 
 WHERE Dim1 = @A and Dim2 = @B; 
```

如果您有一个 b-tree 索引，`Dim1, Dim2`而不仅仅是，您可能会看到非常轻微的性能提升`Dim1`，因为您扫描索引以查找 WHERE 子句中的所有项目，然后获取您的事实数据。

# c# - WPF ComboBox 绑定未正确更新

> ID：11056331
> 
> 赞同：5
> 
> 时间：2012-06-15T18:33:02.243
> 
> 标签：c#, wpf, data-binding, binding, combobox

![在此处输入图像描述](../Images/981c14867d9c7356d56caf005320e13b.png)

我的 ComboBox 中的 Binding 存在更新问题。我创建了一个简化的示例来说明这个问题。我将在下面粘贴所有相关代码。

所以在上图中，我有一个 TextBlock（黑色），它显示了 SelectedPerson 的“SelectedPerson.FullName”属性。SelectedPerson 的 FirstName 和 LastName 属性显示在 FullName 下方的 2 个文本框中。ComboBox DisplayMemberPath 绑定到“FullName”，并且组合框包含一个 Person 对象列表。

TextBlock、ComboBox 和 ComboBox 下拉列表中的“FullName”属性应该相同。

但是，它仅在 TextBlock 中正确更新。组合框下拉菜单仅在第一次打开时更新，之后不再更新。因此，如果我在文本框中编辑 FirstName 并单击下拉列表，然后对其进行更多编辑并再次单击下拉列表，我们最终会为 SelectedPerson 显示 3 个不同的“FullName”值。

我在后面的代码中使用 INotifyPropertyChanged 来通知“SelectedPerson”何时更改。这似乎可以很好地更新 TextBlock，但由于某种原因，ComboBox 没有使用新的“FullName”进行更新。

当我发送“SelectedPerson”通知时，我尝试发送“FullName”通知，但它也无法正常工作。

谁能告诉我为什么当我更改 FirstName 文本时 ComboBox 没有更新？

谢谢。

MainWindow.xaml：

```
<Window x:Class="ComboBoxBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <StackPanel Margin="50" Width="150">
        <TextBlock Margin="0,0,0,10" Height="30" Padding="8" Background="Black" Foreground="White" Text="{Binding SelectedPerson.FullName}"/>
        <TextBox Text="{Binding SelectedPerson.FirstName, UpdateSourceTrigger=PropertyChanged}"/>
        <TextBox Text="{Binding SelectedPerson.LastName, UpdateSourceTrigger=PropertyChanged}"/>
        <ComboBox Margin="0,16,0,0"
                  ItemsSource="{Binding People}"
                  DisplayMemberPath="FullName"
                  SelectedItem="{Binding SelectedPerson, UpdateSourceTrigger=PropertyChanged}">
        </ComboBox>
    </StackPanel>
</Window> 
```

MainWindow.xaml.cs：

```
using System.Collections.Generic;
using System.ComponentModel;

namespace ComboBoxBinding
{
    public partial class MainWindow : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        public void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        private List<Person> _people = new List<Person>();

        public List<Person> People 
        {
            get { return _people; }
        }

        private Person _selectedPerson;

        public Person SelectedPerson
        {
            get { return _selectedPerson; }
            set 
            {
                _selectedPerson = value;
                OnPropertyChanged("SelectedPerson");
            }
        }

        public MainWindow()
        {
            GenerateLaneConfigurations();
            InitializeComponent();
        }

        private void GenerateLaneConfigurations()
        {
            People.Add(new Person("Elmer", "Fudd"));
            People.Add(new Person("Bugs", "Bunny"));
            People.Add(new Person("Donald", "Duck"));

            foreach (Person person in _people)
            {
                person.Changed += person_Changed;
            }

            SelectedPerson = People[0];
        }

        void person_Changed()
        {
            OnPropertyChanged("SelectedPerson");
        }
    }
} 
```

个人.cs：

```
namespace ComboBoxBinding
{
    public class Person
    {
        private string _firstName;
        public string FirstName
        {
            get { return _firstName; }
            set { _firstName = value; OnChanged(); }
        }

        private string _lastName;
        public string LastName
        {
            get { return _lastName; }
            set { _lastName = value; OnChanged(); }
        }

        public string FullName
        {
            get { return string.Format("{0} {1}", FirstName, LastName);}
        }

        public Person(string firstName, string lastName)
        {
            FirstName = firstName;
            LastName = lastName;
        }

        public delegate void ChangedEventHandler();
        public event ChangedEventHandler Changed;

        protected void OnChanged()
        {
            if (Changed != null)
            {
                Changed();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T18:40:03.200

您还需要在您的 Person 对象中实现通知系统。说`SelectedPerson`改得不够好。只需像您已经在您的和引发事件而不是您的自定义事件一样实施`INotifyPropertyChanged`，它应该可以工作。`Person``MainWindow``PropertyChanged``Changed`

# android - 小部件没有响应

> ID：11056332
> 
> 赞同：1
> 
> 时间：2012-06-15T18:33:03.447
> 
> 标签：android, android-widget

我有使用服务进行更新的小部件。它上面有一个按钮来打开活动。它完美地工作。但是，有时我单击小部件以打开活动，但它无法工作或更新。

是什么杀死了应用小部件？如果小部件死了，为什么它仍然显示在屏幕上？有没有办法在不创建另一个小部件的情况下重温该特定小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:55:12.897

当它面临内存不足的情况时，Android 将停止您的小部件。然后它会在自动清理 RAM 后重新启动您的家庭小部件。但是这一次，你的 home 小部件将获得与上一个不同的 pid，因此它无法响应广播。

[使用 AlarmManager 更新应用小部件](https://stackoverflow.com/questions/5476867/updating-app-widget-using-alarmmanager)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T15:57:24.233

我必须将此代码包含在我的服务类中。基本上，它将更新发送到每个小部件。现在已经一年多了；我的小部件上的按钮始终有效，并且小部件更新没有任何问题。

```
int[] arrayOfInt = AppWidgetManager.getInstance(getBaseContext())
                     .getAppWidgetIds(new ComponentName(this, mywidget.class));

AppWidgetManager localAppWidgetManager = AppWidgetManager.getInstance(this);

new WebView().onUpdate(getBaseContext(), localAppWidgetManager, arrayOfInt);

int i = arrayOfInt.length;
for (int j = 0;; j++) {
    if (j >= i)
        return;
    int k = arrayOfInt[j];
    RemoteViews localRemoteViews = new RemoteViews(getBaseContext()
                                       .getPackageName(), R.layout.xx);
    localRemoteViews.setTextViewText(R.id.tv, tv_text);

    localRemoteViews.setOnClickPendingIntent(
        R.id.Button01,
        PendingIntent.getActivity(getBaseContext(), 0, new Intent(
            getBaseContext(), LicenseCheck.class), 1));
    localAppWidgetManager.updateAppWidget(k, localRemoteViews);
} 
```

# php - 使用 readdir 选择文件

> ID：11056333
> 
> 赞同：1
> 
> 时间：2012-06-15T18:33:10.507
> 
> 标签：php, readdir

```
<?php
// open the current directory
$dhandle = opendir('.');
// define an array to hold the files
$files = array();

if ($dhandle) {
   // loop through all of the files
   while (false !== ($fname = readdir($dhandle))) {

      if (($fname != 'other') && ($fname != 'dd') && ($fname != 'index.htm') && ($fname != 'torcache.php')&& ($fname != 'error_log') && 
          ($fname != basename($_SERVER['PHP_SELF']))) {
          // store the filename
          $files[] = (is_dir( "./$fname" )) ? "(Dir) {$fname}" : $fname;
      }
   }
   // close the directory
   closedir($dhandle);
} 
```

我想做的是，如果文件以“其他”或“dd”开头，那么不要将其包含在循环 $files 中；如果没有在 != 中命名整个文件名，我该怎么做才能排除这些文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:36:32.033

将此添加到您的支票中：

```
(substr($fname, 0, 5) != 'other') && (substr($fname, 0, 2) != 'dd') 
```

请参阅[PHP substr](http://php.net/manual/en/function.substr.php)。它接受一个字符串并返回一个子字符串，该子字符串从给定的第一个数字（`0`表示字符串的开头）开始，长度由第二个数字（`5`对于“other”和`2`“dd”）给出。

所以你的完整陈述是：

```
if (
    (substr($fname, 0, 5) != 'other') &&
    (substr($fname, 0, 2) != 'dd') &&
    ($fname != 'index.htm') &&
    ($fname != 'torcache.php') &&
    ($fname != 'error_log') &&
    ($fname != basename($_SERVER['PHP_SELF']))
) { ... } 
```

# php - XAMPP：VC6 VC9 的优缺点

> ID：11056337
> 
> 赞同：0
> 
> 时间：2012-06-15T18:33:27.813
> 
> 标签：php, xampp

与使用 VC6 编译的 XAMPP 相比，使用 VC9 编译的 XAMPP 有什么优势吗？

我注意到 XAMPP 在其官方下载页面上提供了 VC6，但是如果您使用以前的版本，则可以下载 VC9 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:42:15.183

VC6 编译器不再维护，如果我没记错的话，VC9 将需要 VC9 运行时 DLL。VC6 早于 .NET

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:36:33.517

不，这只限制了必须使用哪个编译器/ABI 来构建第三方模块（例如 mod_wsgi）。

# iphone - 设备方向将改变而不是已经改变

> ID：11056341
> 
> 赞同：2
> 
> 时间：2012-06-15T18:33:55.140
> 
> 标签：iphone, xcode, ipad, uideviceorientation

有什么方法可以在设备方向动画完成之前执行代码？

现在我将自己添加为 UIDeviceOrientationDidChangeNotification 的观察者

但是，我需要在更改实际发生之前完成我的代码，而不是之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:38:50.830

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T06:38:59.970

尝试用这种方法改变它：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# java - 如何自动调整 JTextArea 中的字体大小以填充所有分配的空间？

> ID：11056346
> 
> 赞同：0
> 
> 时间：2012-06-15T18:34:17.633
> 
> 标签：java, fonts, jtextarea

我不知道要显示多少文本，并且`JTextAreas`大小是固定的。我希望字体调整大小以适合整个`JTextArea`，并确保没有文本被截断。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:22:24.677

使用[`FontMetrics`](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html)类。它将允许您获取给定字体大小的文本的像素宽度。

示例使用：

```
Font font = myTextArea.getFont();
FontMetrics fontMetrics = myTextArea.getFontMetrics(font);

int width = fontMetrics.stringWidth("my awesome string"); 
```

现在，您要做的就是将上面的代码包装在一个循环中，增加或减少字体大小，直到您*或多或少*`width`等于. 完成后，只需将字体设置为.*`myTextArea.getWidth()``myTextArea.setFont(font)`*

 *另请注意，这`myTextArea.getWidth()`将返回组件的宽度，包括边框、滚动条等，而不仅仅是渲染文本的区域，因此您必须首先计算渲染区域的“真实”宽度。*

# c# - 更改系统语言 C#

> ID：11056353
> 
> 赞同：10
> 
> 时间：2012-06-15T18:34:45.440
> 
> 标签：c#, .net, windows

**我正在编写一个应用程序，当应用程序本身不是 FOCUSED**时，我需要更改系统的语言。恐怕唯一的方法是使用我目前无法完全理解的 windows 钩子。有什么想法吗？

**编辑：解决方案**

```
[DllImport("user32.dll")]
private static extern bool PostMessage(int hhwnd, uint msg, IntPtr wparam, IntPtr lparam);

[DllImport("user32.dll")]
private static extern IntPtr LoadKeyboardLayout(string pwszKLID, uint Flags);

private static uint WM_INPUTLANGCHANGEREQUEST = 0x0050;
private static int HWND_BROADCAST = 0xffff;
private static string en_US = "00000409";
private static uint KLF_ACTIVATE = 1;

private static void ChangeLanguage()
{
    PostMessage(HWND_BROADCAST,WM_INPUTLANGCHANGEREQUEST, IntPtr.Zero ,LoadKeyboardLayout(en_US,KLF_ACTIVATE));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:48:11.397

我认为映射另一个键盘布局和“翻译”输入而不是更改窗口设置会容易得多，尤其是在没有用户竞争的情况下。

在我完成答案之前，ahmadali shafiee 发布了我想到的代码。优雅，随它去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:45:32.613

要更改输入语言，您可以使用以下代码：

```
private void ChangeKeboardLayout(System.Globalization.CultureInfo CultureInfo)
    {
        InputLanguage c = InputLanguage.FromCulture(CultureInfo);
        InputLanguage.CurrentInputLanguage = c;
    } 
```

并且您可以在您的应用程序（或您的线程）打开时执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:44:00.020

你可以试试[这个答案](https://stackoverflow.com/a/2691040/573218)，它使用 Windows API 调用。

# xcode - Xcode 4.2 和 git - 无法提交

> ID：11056359
> 
> 赞同：0
> 
> 时间：2012-06-15T18:35:00.483
> 
> 标签：xcode, git

我有一个 git 存储库 - 包括不同的技术。安卓和 iPhone。文件夹是这样的：

```
.git
Android
iPhone 
```

我认为有可能出现这种情况——也就是说，让 eclipse 处理 Android 和 Xcode 处理 iPhone。

Eclipse(Egit) 处理这个没有问题，另一方面 Xcode 不能处理这个？

我确实已经在 Organizer 中设置了 reprository。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:13:34.507

Xcode 在您的 iPhone 案例中需要项目文件夹中的 .git。如果你想保持这个项目结构。那么只有一种解决方案。启动终端并手动输入 git 命令。

# java - 哪个是从 BufferedReader 获取字符串的更好方法

> ID：11056360
> 
> 赞同：4
> 
> 时间：2012-06-15T18:35:07.837
> 
> 标签：java, android

我`BufferedReader`从以下网络代码中获得。

```
 URL url = new URL(request);
    HttpURLConnection httpUrlConnection = (HttpURLConnection)url.openConnection();
    InputStream inputStream = httpUrlConnection.getInputStream();
    bufferedReader = new BufferedReader(new InputStreamReader(inputStream)); 
```

1.  我想知道，哪种方式在执行速度方面效率更高？
2.  1024尺寸是Android的好选择吗？或者，我可以使用任何系统常量值吗？

    ```
     int charRead = 0;
        char[] buffer = new char[1024];
        StringBuffer stringBuffer = new StringBuffer();
        while ((charRead = bufferedReader.read(buffer)) > 0) {
            stringBuffer.append(buffer, 0, charRead);
        } 
    ```

* * *

```
 String line = "";
        StringBuffer stringBuffer = new StringBuffer();
        while ((line = bufferedReader.readLine()) != null) {
            stringBuffer.append(line);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:08:03.557

除非您需要使用 synchronized 的开销，否则using`StringBuilder`被认为是更好的选择。（是替代品的下降）`StringBuffer``StringBuffer``StringBuilder`

至于性能，我会采用第一种方法并避免使用`readLine()`，除非您需要将该行作为一行文本处理。此外，`readLine()`不会返回实际的换行符，因此您在第二个示例中创建的数据将缺少换行符，因此可能与从服务器传输的数据不完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:44:07.157

我认为第一种方法更有效，但我宁愿设置更高的缓冲区大小。8*1024。这是 HttpClient 中的默认 CoreConnectionPNames.SOCKET_BUFFER_SIZE。我宁愿说低于 8*1024 的东西是不合理的，因为大多数 HTTP 缓冲区都设置为 8*1024。

在第二种方法中，您假设流中有换行符。如果以没有换行符的方式优化 20MB json 怎么办？这会炸毁你的应用程序。

> 一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。

在我看来，最好的选择是使用 8*1024 的乘法。上限受限于内存大小和连接速度相对于流的缓冲区处理时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:40:22.327

可以设置更高的缓冲区限制将是最好的选择。

根据 java 文档

> 可以指定缓冲区大小，也可以使用默认大小。对于大多数用途，默认值足够大。

缓冲是更好的方法。再次按照文档

> 如果没有缓冲，每次调用 read() 或 readLine() 都可能导致从文件中读取字节，转换为字符，然后返回，这可能非常低效。

# java - 如何在不覆盖之前数据的情况下创建多个 java txt 文件？

> ID：11056361
> 
> 赞同：0
> 
> 时间：2012-06-15T18:35:20.007
> 
> 标签：java

> **可能重复：**
> [写入文件而不覆盖或附加](https://stackoverflow.com/questions/11055695/writing-to-a-file-without-overwriting-or-appending)

您好我正在创建一个执行数据并打印到 txt 文件的程序。我遇到的问题是每次运行程序时都会覆盖我以前的 txt 文件。我不想让它覆盖，也不想附加数据。我想每次让它产生一个创建日期或时间时创建一个新的 txt 文件。有人可以帮助我吗？

这是我的代码：

```
private static PrintWriter outFile;
    /**
     * @param args
     */
    //Main Method
     public static void main(String[] args) throws IOException
        {

         //creates the new file to be saved
        outFile = new PrintWriter(new FileWriter("trilogy.txt"));
        //Create a generator object to create random numbers
         Random gen = new Random ();

        //Create a scanner object to scan user input.
         Scanner scan = new Scanner(System.in);

         DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");
         //get current date time with Date()
         Date date = new Date();
         outFile.println(dateFormat.format(date));
         outFile.println();

        //Prompts the user to input how many lock combinations he/she wants generated.
         System.out.print ("Enter quantity: "); 
         int quantity = scan.nextInt();

        int count = 1;
        //Loop - Only numbers 1 - 5 are used
        //       Only five numbers are generated per one lock combination 
         for (int i = 0; i < quantity; i++)
         {

                int n1 = gen.nextInt(5)+1;
                int n2 = gen.nextInt(5)+1;
                int n3 = gen.nextInt(5)+1;
                int n4 = gen.nextInt(5)+1;
                int n5 = gen.nextInt(5)+1;

    //While loop making sure that NO numbers are repeated
        while (n2==n1)
         {
            n2 = gen.nextInt(5)+1;
         }

               while (n3==n2 || n3 == n1 || n3==n4||n3==n5)
               {
                   n3 = gen.nextInt(5)+1;
               }

                    while (n4 == n3 || n4 == n2 || n4 == n1||n4==n5)
                    {
                        n4 = gen.nextInt(5)+1;
                    }

                        while (n5== n1 || n5==n2 || n5==n3 || n5==n4)
                        {
                            n5 = gen.nextInt(5)+1;
                        }

            //If statements that output the random lock combinations in different formats.
                        if (n1==1){
                            outFile.println ("(" + count +") "  +   (n1*10 +n2) +"-"+ (n3*10+n4)+"-"+n5);}
                        else if (n2==2){
                            outFile.println ("(" + count +") "  +   n2 + "-" + (n1*10 + n3)+ "-" + (n4*10+ n5));}
                        else if (n3==3){
                            outFile.println ("(" + count +") "  +   (n3*10 +n2) +"-"+ n1+ "-" +(n4*10+n5));}
                        else if (n4 == 4){
                            outFile.println ("(" + count +") "  +   (n4 +"-"+ (n2*100 +n3*10+n1)+"-"+n5));}
                        else
                            outFile.println ("(" + count +") "  +   (n5) +"-"+ (n2) +"-"+ (n3) + "-"+ (n4) +"-" +(n1));

                        count++;

            //Spaces one line in between each lock combination
            outFile.println();

         }
         outFile.close();
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:06:26.497

尝试改变这个：

```
 outFile = new PrintWriter(new FileWriter("trilogy.txt")); 
```

为此附加文本：

```
 outFile = new PrintWriter(new FileWriter("trilogy.txt",true)); 
```

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:40:19.763

您需要更改以下行：

```
 outFile = new PrintWriter(new FileWriter("trilogy.txt")); 
```

对于上面有时间/日期的东西：

```
 outFile = new PrintWriter(new FileWriter("trilogy" + DATE_TIME + ".txt")); 
```

# ruby-on-rails - 独角兽：使用多少个工作进程？

> ID：11056362
> 
> 赞同：29
> 
> 时间：2012-06-15T18:35:21.003
> 
> 标签：ruby-on-rails, performance, optimization, memory-management, unicorn

我在一个上限为 1GB RAM 的虚拟 Linux 服务器上运行 Ruby on Rails 应用程序。目前，我不断达到极限，并希望优化内存利用率。我正在考虑的一种选择是减少独角兽工人的数量。

**那么确定使用的独角兽工人数量的最佳方法是什么？**

当前设置是 10 个工作人员，但我在 Google Analytics Real-Time 上看到的每秒最大请求数是 3（在高峰时间只得分一次；在 99% 的时间里不超过每秒 1 个请求）。

那么，我现在可以 - 与 4 名工人一起去，为意外数量的请求留出空间，这是一个节省的假设吗？**我应该看看哪些指标来确定工人的数量，以及我可以在我的 Ubuntu 机器上使用哪些工具？**

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-16T22:32:36.267

您应该使用的工作人员数量很大程度上取决于您的应用程序本身在做什么以及它执行这些事情的频率。不幸的是，实际上并没有一个完美的比率公式适用于每个测试用例。当您考虑到您必须保持服务器运行的 RAM 数量有限这一事实时，这一点变得更加真实。

许多人会建议 CPU Core Count + 1 但这也不正确。您将不得不在存在不同数量的工人的情况下进行测试用例，然后看看事情进展如何。请务必定期检查日志。

在我们的团队中，我们使用一个名为 Nagios 的程序：http: [//www.nagios.org](http://www.nagios.org)

它运行良好，可以检查您的服务器是否有可能发生的许多不同事情，甚至可以提醒您注意它们。当您试图找到完美的平衡时，这可以帮助您很多。

此外，有时您的服务器除了简单地运行您的 rails 实例外，还正在做一些事情，它可能正在运行脚本或处理不必要的信息。确保您的服务器没有做它不需要做的事情，这样您就可以尽可能节省许多 cpu 周期和 RAM。

此外，请确保您正在实现 Unicorn 拥有的这个功能，我们在我们的项目中这样做，它是无价的：

> **内存增长**当一个worker使用太多内存时，god或monit可以向它发送一个QUIT信号。这告诉工人在完成当前请求后死亡。一旦工人死亡，主人就会分叉一个新的，它可以立即为请求提供服务。通过这种方式，我们不必在请求中终止您的连接或受到启动惩罚。-- 取自：[https ://github.com/blog/517-unicorn](https://github.com/blog/517-unicorn)

我还发现了这个类似的问题，可以为您提供一些见解：

[https://serverfault.com/q/369811/110682](https://serverfault.com/q/369811/110682)

我希望这会有所帮助。

# android - 使用单点登录并避免额外对话框的正确方法 (Android)

> ID：11056363
> 
> 赞同：0
> 
> 时间：2012-06-15T18:35:23.647
> 
> 标签：android, facebook, login

当我通过我的 Android 应用程序登录到 FB 时，我向 Facebook 对象（在不到 5 分钟前创建）提供了最后一个有效的身份验证密钥和到期日期，期望能够登录。

相反，我收到一个对话框，指出“您已授权此应用程序”。这显然是一种糟糕的用户体验，我想尽我所能让用户在没有这个的情况下登录。

我的登录流程是

*   设置最后一个有效的身份验证密钥和过期时间
*   调用授权（）
*   成功后，我将此身份验证密钥发送到服务器，服务器会通过 FB 图形 API 验证该密钥是否有效。

这是我如何称呼它的简化：

```
Facebook m_facebook;
int ACTIVITY_CODE_FACEBOOK_AUTH = 1;
// auth key and expiration are set from a previous login
m_facebook.setAccessToken(accessToken);
m_facebook.setAccessExpires(expirationTime);
// permissions contains publish_stream, publish_actions, email and does not change.
m_facebook.authorize(m_activity, permissions, ACTIVITY_CODE_FACEBOOK_AUTH, new AppLoginListener()); 
```

一种可能的解决方法是首先使用 auth 密钥调用 Graph API 以确保其有效。如果它无效，请按上述方法调用 authorize()。如果它是有效的，就假装我们调用了授权并继续。这感觉就像是一个 hack，我认为我应该能够授权（）（并使用 SSO），而无需使用任何姊妹的 Graph API 变通方法。

*   我正在使用 FB SDK rom 2012/4/4。从那时起，似乎没有任何相关的变化。
*   一年前我看到过与此类似的问题，但我还没有看到解决我的问题的具体答案，也没有看到与我已经在做的不同的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T06:39:17.520

老实说，我不知道最近流程是否发生了变化，我只能说我使用它的方式不同，这对我有用。

*   检查是否存在授权令牌（我将我的存储在首选项中）
*   检查它是否仍然有效
*   只有当两个条件之一不满足时，才需要（再次）授权

    ```
    private SharedPreferences prefs = getSharedPreferences("APP_Preferences", MODE_PRIVATE); 
    Facebook facebook = new Facebook("app_number");

    if (!facebook.isSessionValid() || !prefs.contains("fb_access_token")){
        loginToFacebook();              
    }else{
        //do something else
    } 
    ```

此外，我确保令牌在后台扩展，因此通过调用几乎所有时间都可以使用有效令牌：

```
 facebook.extendAccessTokenIfNeeded(context, null); 
```

在我的应用程序的后台服务中。这可以确保即使用户几天没有打开我的应用程序，令牌也始终有效且最新，因此当用户在一段时间后打开应用程序时不会发生烦人的授权请求。我认为此流程将帮助您解决问题。

无论如何，我在应用程序中使用服务用于其他更合乎逻辑的目的，所以我可以这样做作为额外的好处，但在你的应用程序中实现服务只是为了扩展令牌可能不是一个好主意......

# javascript - jQuery UI 可排序链接元素

> ID：11056370
> 
> 赞同：1
> 
> 时间：2012-06-15T18:35:56.193
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我有两列，每列都有很多行/div。我试图让 jQuery UI Sortable 以某种方式工作，如果我在左列中拖动一个 div，右列中的关联行/div 也将被排序。

例如，

```
<html><body>
  <div class='left-column'>
    <div class='field' id='left_1'>content 1</div>
    <div class='field' id='left_2'>content 2</div>
    <div class='field' id='left_3'>content 3</div>
  </div>
  <div class='right-column'>
    <div class='field' id='right_1'>content 1</div>
    <div class='field' id='right_2'>content 2</div>
    <div class='field' id='right_3'>content 3</div>
  </div>
</body></html> 
```

至于 jQuery，现在我有，

```
function linkedSort() {
  $('.left-column').sortable({ 
    axis: 'y',
    stop: function(event, ui) {
      $('.left-column .field').each(function(i, field) {
        var fieldName = $(field).attr('id');
        var fieldNumber = fieldName.substr(fieldName.indexOf('_')+1);
        // do something here to place it in the right area
      });
    }
  });
}; 
```

如果我将 .left-column .field_2 拖到 .field_3 下方，则 .right-column 中的各个 div 也应该重新排列。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:03:46.163

我认为这可能是您正在寻找的：

```
<div class='left-column'>
    <div name='field_1'>content 1</div>
    <div name='field_2'>content 2</div>
    <div name='field_3'>content 3</div>
  </div>
  <div class='right-column'>
    <div name='field_1'>content 1</div>
    <div name='field_2'>content 2</div>
    <div name='field_3'>content 3</div>
</div>

$('.left-column').sortable({
    axis: 'y',
    stop: function(event, ui) {
        $('.left-column div[name^=field_]').each(function(i, v) {
            $('.right-column').find("[name=" + $(v).attr('name') + "]").appendTo($('.right-column'));
        });
    }
});
$('.right-column').disableSelection(); 
```

# php - Instagram 最近的标签

> ID：11056372
> 
> 赞同：1
> 
> 时间：2012-06-15T18:36:07.803
> 
> 标签：php, mysql, tags, instagram

所以我正在使用 Instagram API 并使用最近的标签调用。问题是我只想要今天的照片。我查看了文档，您可以传递给 api 的唯一参数是 max_tag_id 和 min_tag_id。什么是最好的方法来确保我只从今天开始获取照片而不必保存每个 max_id 以在下次通话时参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:43:00.807

如果我正确理解您的问题，您可以根据[API 文档](http://instagr.am/developer/endpoints/media/#get_media_search)提供时间戳范围。或者，您可以只接受 API 调用返回的所有内容，并在您端使用一些逻辑来过滤结果。您能否向我们展示您的代码以及 API 回复的样子，以便我们提供更好的指导？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:45:00.670

我解决这个问题的方法是不提供最小或最大 ID。提供这些 ID 将遍历最新标签的“分页”，不提供它们将带回最近的标签。

[http://www.instagram.com/developer/endpoints/tags/#get_tags_media_recent](http://www.instagram.com/developer/endpoints/tags/#get_tags_media_recent)

# android - 合并两个具有透明渐变的图像

> ID：11056373
> 
> 赞同：1
> 
> 时间：2012-06-15T18:36:19.270
> 
> 标签：android, image, image-processing, mask, blur

我正在尝试将渐变蒙版应用于 Android 中的模糊层。像这样的东西：

![在此处输入图像描述](../Images/16edede2fbdfca2bda40c7f4fd082545.png)

我正在尝试使用此代码：

```
Bitmap mutable = Bitmap.createBitmap(lebg.getWidth(), lebg.getHeight(), Bitmap.Config.ARGB_8888);  
Canvas canvas = new Canvas(mutable);  
Paint paint = new Paint();  
paint.setFilterBitmap(false);   
canvas.drawBitmap(lebg, 0, 0, paint);  
canvas.drawBitmap(leblur, 0, 0, paint);  
paint.setXfermode(new PorterDuffXfermode(Mode.DST_OUT));  
canvas.drawBitmap(mask, 0, 0, paint); 
```

任何想法？

谢谢！

第一个图像是模糊层。第二个图像是原始图层。第三张图片是遮罩层。最后一个图像是结果图像。

# google-apps-script - range.copyTo 不能作为预期的应用程序脚本工作

> ID：11056388
> 
> 赞同：0
> 
> 时间：2012-06-15T18:37:24.223
> 
> 标签：google-apps-script

当我使用`range.copyTo(`) 方法将范围从一个电子表格复制到另一个电子表格时，我通常会`sheet.getLastRow()+1`在我指定目标范围时使用。例子：

```
 var oldRange = sheet.getRange(1, 1, 1, sheet.getLastColumn());

 var newRange = destSheet.getRange(destSheet.getLastRow()+1, 1, 1, sheet.getLastColumn()); 
```

如果 destSheet 在底部没有任何附加或“空白”行，则该`range.copyTo()`方法不会复制数据并且不会引发错误消息。如果我使用相同的逻辑并使用`.getValues()`and `.setValues()`，新行将自动添加到我的 destSheet 中。

如果需要，我还期望`range.copyTo()`创建额外的行。这是作为例外还是这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:25:39.777

如果您将 .setValue('') 添加到 newRange 语句，您将看到一条错误消息**，并且** 更多行将自动添加到目标工作表中**，并且**数据将被复制。请注意，您不应该定义整个 dest.range，只有左上角的单元格是相关的，如[文档中所述](https://developers.google.com/apps-script/class_range?hl=fr-FR#copyTo)

像这样 ：

```
 var newRange = sh.getRange(ss.getLastRow()+1, 1).setValue('');
  oldRange.copyTo(newRange) 
```

无论如何，这并不是最好的解决方法，因为错误消息（*我们很抱歉。服务器遇到错误。请按“确定”刷新工作表*。）。我想人们可以合理地认为这是一个错误，你可以在[这里提出一个问题](http://code.google.com/p/google-apps-script-issues/issues/entry)

编辑：实际上有一个很好的解决方法，我没有立即想到：你可以`insertRowAfter(ss.getLastRow())`在 copyTo() 之前使用，一切正常。例子 ：

```
 var oldRange = sh.getRange(1, 1, 1, ss.getLastColumn());
  var newRange = sh.getRange(ss.getLastRow()+1, 1);
  ss.insertRowAfter(ss.getLastRow())
  oldRange.copyTo(newRange) 
```

当然，如果需要多于 1 行，请根据需要重复，如本例所示：

```
function copyToTest() {
  var oldRange = sh.getRange(1, 1, 5, ss.getLastColumn());// 5 rows in this example
  var newRange = sh.getRange(ss.getLastRow()+1, 1);
  for(n=0;n<oldRange.getLastRow();++n){ss.insertRowAfter(ss.getLastRow())}
  oldRange.copyTo(newRange)
} 
```

# ios - 如何使用 GLKMathUnproject

> ID：11056391
> 
> 赞同：3
> 
> 时间：2012-06-15T18:37:37.140
> 
> 标签：ios, linear-algebra, glkit

我使用 GLKit 创建了一个简单的 3D 世界。我正在尝试根据屏幕点击在我的 3D 世界中找到一个特定点。看来我想使用 GLKMathUnproject。该方法的签名是：

```
GLKVector3 GLKMathUnproject (
   GLKVector3 window,
   GLKMatrix4 model,
   GLKMatrix4 projection,
   int *viewport,
   bool *success
); 
```

有些事情让我对它所需的参数感到困惑。首先窗口坐标不应该是 GLKVector2 吗？最重要的是，不会将屏幕上的点投影到 3D 空间中创建射线而不是单个点。当您将 3D 空间中的点投影到 2D 平面（也称为屏幕）上时，您会丢失有关该点的一维信息。那么如何将 2D 屏幕点转换为 3D 世界点而不指定您希望将点“取消投影”到什么深度？互联网上的任何地方都绝对没有评论这种方法（除了苹果文档）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T04:48:17.087

第一个参数是 GLKVector3，因为 z 分量存储了所需的 z 深度。

所以窗口 x,y 是屏幕坐标，窗口 z 是所需的深度。

例如，当z=0 时，GLKMathUnproject 将给出物体在z=1 的近平面的坐标，GLKMathUnproject 将给出物体在远平面的坐标。

这是必要的，因为 GLKMathUnproject 从平面映射到由投影平截头体形成的 3d 空间中的一条线。平截头体的 z 边界受近平面和远平面的约束。

因此，假设您想将未投影的鼠标点映射到平截头体中的 z=0（对象空间）平面。

然后用窗口 z=0 和窗口 z =1 取消投影 2 个点。使用这些点在对象空间中形成一条线。将此线与平面 z=0 相交以确定最终目标点。

希望这可以帮助某人-

你可以在这里阅读更多[内容 CasualDistraction 博客](http://casualdistractiongames.wordpress.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:35:31.320

你有一个“眼睛方向”，但你不知道深度。然后你计算你必须缩放这个向量多少才能达到与你想要测试的每个对象相同的深度。完成此操作后，请检查扩展矢量是否最终位于目标对象的合理接近范围内。它被称为“光线投射”。

# c# - C# DirectoryEntry 对象安全属性引发空引用异常

> ID：11056393
> 
> 赞同：0
> 
> 时间：2012-06-15T18:37:49.013
> 
> 标签：c#, active-directory

我正在尝试跟踪应用程序错误，但我不是 WinNT 提供程序方面的专家。这是我正在调试的代码：

```
 public string GetCurrentRequesterIdentity()
    {
        var a = HttpContext.Current.User.Identity.Name.Split('\\');

        using (var adEntry = new DirectoryEntry("WinNT://" + a[0] + "/" + a[1]))
        {
            return adEntry.Properties["FullName"].Value.ToString();
        }
    } 
```

当我调试此代码并运行“？New DirectoryEntry("WinNT://DOMAIN/User")”时，其中 DOMAIN 和 User 是（假定）有效条目，窗口为 ObjectSecurity 行返回以下内容：

ObjectSecurity: 'new DirectoryEntry("WinNT://[DOMAIN]/[USER]").ObjectSecurity' 抛出类型为 'System.NullReferenceException' 的异常

我看到应用程序抛出“找不到网络路径”的错误。我只能复制一次这个错误，不能再复制一次。不幸的是，对于 2 个生产用户来说，几乎每次都会发生这种情况，但在测试环境中从未发生过。

有没有人见过这种情况？或者知道去哪里寻找它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:48:18.623

看起来 a[0] 或 a[1] 的值为空。您是否验证了这些值是否正确以及域和用户是否存在？您应该调试或记录 a[0] 或 a[1] 的值并尝试找出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:09:58.763

这最终通过删除 DirectoryEntry 行并仅引用用户名的 HttpContext.Current.User.Identity.Name.Split('\') 来解决。它只返回用户名而不是登录用户的全名并不重要。显然它与我们的系统管理员不愿处理的 AD 权限问题有关，因此删除代码最终提供了最简单的解决方案。

# java - 使用 LiveConnect 调用 JS 的小程序 - 在 init() 之外不起作用

> ID：11056398
> 
> 赞同：0
> 
> 时间：2012-06-15T18:38:28.990
> 
> 标签：java, javascript, gwt, applet, liveconnect

我有一个在 GWT 中运行的小程序，我可以从小程序的 init() 访问 JS 函数。但我无法在 init() 之外使用 JSObject.call() 或 JSObject.eval。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:05:28.660

也许你必须使用**AccessController.doPrivileged()**

请阅读[何时应该使用 AccessController.doPrivileged()？](https://stackoverflow.com/questions/2233761/when-should-accesscontroller-doprivileged-be-used)

# actionscript-3 - 在 AS3 中使用接受不同类型参数的方法创建子类

> ID：11056400
> 
> 赞同：0
> 
> 时间：2012-06-15T18:38:34.013
> 
> 标签：actionscript-3, flash, oop, polymorphism, abstract-class

我有一个类，Pawn，它是游戏中所有“角色”的基类，具有诸如健康、可以移动、死亡或说话等属性。扩展它的一个类是“男孩”类。“男孩”类是本游戏中玩家控制的角色。

为了控制字符“状态”，创建了状态类。这些有 onEnterState、onStateTick 和 onLeaveState 等方法。一个状态可以用来表示蹲伏、行走、跳跃，并且将发送诸如“keyPressed”“<-”之类的消息来处理或忽略它的选择。

我的问题是我的基本“状态”类具有如下方法：

```
function onEnter ( pawn:Pawn ) :void;
function onLeave ( pawn:Pawn ) :void;       
function onGameTick ( pawn:Pawn ) :void;        
function onAnimEnd ( pawn:Pawn ) :void; 
```

如您所见，这实际上是一个接口，但我确实首先尝试了基类，直到发现 ActionScript3 不太喜欢抽象类。

所以无论如何，一个类“BoyJumpState”显然需要扩展/实现这个类/接口以确保公共方法在那里进行交互，但是这受到了 ActionScript 不允许我扩展的事实的阻碍，比如说，这个：

```
public override function onEnter ( boy:Boy) :void { trace("Hey"); } 
```

这在编译时被拒绝，因为它与蓝图不匹配（即它不接受 Pawn）。但是，我需要它来接受一个男孩，因为该类特定的方法需要在方法体中使用！

我认为我的原始界面是问题所在，并且我应该指定参数应该改为*扩展*pawn 而实际上不需要是一个，但是我没有看到任何在 ActionScript 中实现它的方法。

...或者我可能完全走错了路，在这种情况下，我们将不胜感激地接受建议！

我意识到我无法继续进行继承，但我正在制作的游戏更多的是面向对象编程的实践，因为它比我习惯的更大规模。然而，我已经摆脱了我的舒适语言（Java），我真的超出了我自己在这里做什么。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:44:24.537

您不需要覆盖被覆盖方法的签名来匹配协变类型。如果您需要子类的方法中的特定类型，则必须在覆盖的方法中检查/强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:55:13.890

在 AS3 中实现接口时，签名必须完全匹配。

您可以在运行时检查类型，如下所示：

```
public override function onEnter ( pawn:Pawn ) :void
{
    var boy:Boy = pawn as Boy;
    if(boy)
    {
        trace("Hey");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T10:08:14.110

```
public override function onEnter ( pawn:Pawn ) :void
{
  if(pawn is Boy)
  {
    //do something else
  }
  else
  {
    //do the normal
    super.onEnter(pawn);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T18:35:04.333

我想我会通过在每个具体类中向上转换为我需要的类型来解决这个问题，所以按照你的例子：

```
public override function onEnter ( boy:Boy) :void { trace("Hey"); } 
```

我会将其更改为：

```
public override function onEnter ( pawn:Pawn) :void 
{  
     // do something all pawns can do!
     pawn.move();

     // do something only a boy can do!
     Boy(pawn).doSomething();
} 
```

我肯定会使用基类，是的，Actionscript 3 确实不像 Java 那样支持抽象类，但这并不能阻止您创建基类并覆盖方法，我仍然会键入无论如何，接口的基类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T17:08:06.253

我认为您需要一个由`Boy`and实现的接口，`Pawn`比如说`IPlayer`。

```
public class Boy extends Sprite implements IPlayer 
```

和

```
public class Pawn extends Sprite implements IPlayer 
```

您创建一个名为的接口，该接口`IPlayer`具有所有匹配的公共函数和 getter/setter。

```
package
{
   public interface IPlayer
   {
      function destroy():void;
      function get x():Number;
      function get y():Number;
   }
 } 
```

现在，您可以像这样更新您的功能

```
function onEnter ( player:IPlayer ) :void;
function onLeave ( player:IPlayer ) :void;       
function onGameTick ( player:IPlayer ) :void;        
function onAnimEnd ( player:IPlayer ) :void; 
```

如果您扩展该类，则覆盖参数的类型不会有问题，因为该类型有点抽象为两个类都扩展的接口。

# visual-studio-2012 - Visual Studio 2012 RC 中缺少 MVC4 的“运行配方”菜单选项

> ID：11056409
> 
> 赞同：2
> 
> 时间：2012-06-15T18:39:04.870
> 
> 标签：visual-studio-2012, recipe

Visual Studio 2012 RC 中缺少 MVC4 的“运行配方”菜单选项。

有没有其他人面临类似的问题，还是只有我一个人？

谢谢 Mk

# c - 得到一个奇怪的指针错误，虽然不使用指针

> ID：11056411
> 
> 赞同：1
> 
> 时间：2012-06-15T18:39:15.020
> 
> 标签：c

我编写了一个获取字符串的程序，然后计算字符串的总值 togheder ... 例如：

```
char data[256] = "1$0.83331333333333334$false$false"; // the data 
```

这里我需要计算 1 + 0.83331333333333334 所以这就是我写的：

```
char data[256] = "1$0.83331333333333334$false$false"; // the data
double grade = 0;
int i = 0;
int times = 0;
char temp[256] = "";

int flag = 0;

while (flag == 0)
{
      times = 0;

      if (isdigit(data[i])) // if it's a number
      {
                           if (data[i + 1] == '.') // if it's a double number
                           {
                                      i = i + 2;
                              while (isdigit(data[i])) // putting it into a temp array
                              {
                                  temp[i] = data[i];
                                  i++;
                                  times++;
                              }
                              grade = grade + (double)temp / (times * 10);
                           }
                           grade = grade + (int)data[i]; // if it's an int number, putting it into grade right away
      }

      if (data[i] == '\0')
      {
                  flag = 1;
      }

      i++;
}

printf ("%f\n", grade); 
```

问题在于：

```
grade = grade + (double)temp / (times * 10); 
```

它说“在预期浮点值的地方使用了指针值”。我真的无法理解这是什么问题......

谢谢 ：）

编辑：

谢谢你的帮助！我已经能够将数字转换为字符串.. 例如，现在如果我在数据中有大字符串，其中有几个双精度数，我可以在每次双精度数转换为新字符串时循环。我已经使用 atof 将其转换为双精度，尽管双精度似乎太小了。例如：我在字符串 temp 中有：“83331333333333334”，我在其上使用了 atof -> 新的双精度有 8333313只是......其余的就像不进入双重......我猜这个数字对于双重数字来说太大了......那我该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:41:10.017

您不能简单地将`char`数组转换为`double`并期望编译器将其视为`double`. 您需要`temp`通过合适的函数进行转换，例如`strtod`然后在计算中使用该值。

请注意，它`strod`需要一个 C 风格的字符串，即以空字符结尾的字符数组。所以，进来`temp`是不够的。您需要空终止，`temp`即一旦您完成插入数字，添加一个`temp[ i ] = 0;`.

这是一个小程序，可能会帮助您修复错误并帮助您使用`strtod`：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main() {
 char data[256] = "1$0.83331333333333334$false$false"; // the data
 char *p = strtok( &data[ 0 ], "$" ); 
 while (p) {
    double d = strtod( p, NULL );
    printf( "extracted value = %.10f\n", d );
    p = strtok( NULL, "$" );
 }
} 
```

由于OP想要比以下更简单的东西`strtod`：

您可以使用`double atof(const char *nptr);`. 在我的示例源代码中替换`strtod( p, NULL );`by `atof( p );`，这应该可以帮助您入门。和朋友的问题`atof`是错误处理很困难，如果无法表示该值，您将默默地调用未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:41:27.397

`temp`是一个数组，当在表达式中求值时，它被转换为指向其第一个元素的指针。用于`strtod`将字符串转换为`double`.

# sql - LinqPad 类似操作员错误

> ID：11056413
> 
> 赞同：3
> 
> 时间：2012-06-15T18:39:17.100
> 
> 标签：sql, operator-keyword, sql-like, linqpad

我是 linqpad 和 C# 的新手。我希望在 odata 中获取以“ic”开头的 id 列表。我尝试了 SqlMethods.like 并得到了这个错误。“当前上下文中不存在名称‘SqlMethods’”

下面是查询

```
from id in Products

where SqlMethods.Like(id.ProductId, "IC%")

select id 
```

请帮忙。找不到解决办法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-28T20:09:46.917

另一种选择是使用 Contains 方法：

```
from id in Products
where id.ProductId.Contains("IC")
select id; 
```

这实际上会在 SQL 中生成一个 LIKE 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T21:12:29.920

OData 不支持 Like 运算符。所以即使你得到上面的编译它仍然不能正常工作。如果您只想查找所有 id 以 IC 开头的产品，您可以使用 StartsWith 方法：

```
from id in Products
where id.ProductId.StartsWith("IC")
select id; 
```

# vba - 如何使用数据输入表格填写不同的 Excel 表格？

> ID：11056414
> 
> 赞同：0
> 
> 时间：2012-06-15T18:39:21.273
> 
> 标签：vba, excel

我需要创建一个 Excel 解决方案来记录有关家庭的数据。

1.  表单应生成唯一代码（自动数字）来识别该记录。在这里，我询问父母的姓名、姓氏和出生日期。这记录在一张纸上（称为`Parents`）。
2.  一个家庭可以包含多个孩子，所以我认为这必须记录在另一张纸（称为`Children`）上，以保持与父母的关系。

我能够将每个不同的字段保存到其相应​​的单元格（映射）。这是我用来获取它的代码：

```
Private Sub cmdSave_Click()
ActiveWorkbook.Sheets("Parents").Activate
Range("B2").Select
Do
If IsEmpty(ActiveCell) = False Then
    ActiveCell.Offset(1, 0).Select
End If
Loop Until IsEmpty(ActiveCell) = True

'Father
ActiveCell.Value = txtFatherFN.Text
ActiveCell.Offset(0, 1) = txtFatherSN.Text
ActiveCell.Offset(0, 2) = txtFatherLN.Text
ActiveCell.Offset(0, 3) = txtFatherBirthDay.Text
'Mother
ActiveCell.Offset(0, 4) = txtMotherFN.Text
ActiveCell.Offset(0, 5) = txtMotherSN.Text
ActiveCell.Offset(0, 6) = txtMotherLN.Text
ActiveCell.Offset(0, 7) = txtMotherBirthDay.Text
Range("B2").Select
End Sub 
```

所以，我需要一种方法来生成代码并保持与孩子的关系。欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:27:27.983

好的。对我来说缓慢的一天。这是为您编写的代码。我还稍微清理了您的原始代码以提高效率。

```
Option Explicit

Private Sub cmdSave_Click()

Dim wks As Worksheet

Set wks = Sheets("Parents")

'assumes headers in First Row, ID is Column A
With wks

    'find next empty row
    Dim lngRow As Long
    lngRow = .Cells(Rows.Count, 1).End(xlUp).Offset(1).Row

    'find next unique Id
    Dim lngID As Long
    lngID = Application.WorksheetFunction.Max("A:A") + 1

    'id
    .Cells(lngRow, 1) = lngID
    'Father
    .Cells(lngRow, 2) = txtFatherFN.Text
    .Cells(lngRow, 3) = txtFatherSN.Text
    .Cells(lngRow, 4) = txtFatherLN.Text
    .Cells(lngRow, 5) = txtFatherBirthDay.Text
    'Mother
    .Cells(lngRow, 6) = txtFatherFN.Text
    .Cells(lngRow, 7) = txtFatherSN.Text
    .Cells(lngRow, 8) = txtFatherLN.Text
    .Cells(lngRow, 9) = txtFatherBirthDay.Text
End With

Set wks = Sheets("Children")

With wks

    'find next empty row
    lngRow = .Cells(Rows.Count, 1).End(xlUp).Offset(1).Row

    'need to adjust the for statement for however you collect your children in your form
    For Each Child In Children 'this is an example only to illustrate. You will need to change Child / Children to the objects used to collect the children info.
        .Cells(lngRow, 1) = Child
        lngRow = lngRow + 1
    Next

End With

End Sub 
```

# perl - 使用 perl 脚本从目录中读取文件

> ID：11056416
> 
> 赞同：0
> 
> 时间：2012-06-15T18:39:37.023
> 
> 标签：perl, file-read

我有一个包含多个文件的目录。文件命名如下：A11111、A22222、A33333、B11111、B22222、B33333 等。我想读取这些文件，对内容执行某些格式化选项并将其写入输出文件。但是对于所有以 A 开头的文件，我只想要一个输出文件，对于所有以 B 开头的文件，我想要一个输出文件，依此类推。是否可以使用 perl 脚本执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:01:47.433

以下示例对您来说应该是一个好的开始：

```
#!/usr/bin/perl

use strict;
use warnings;

my $dir = '.';

opendir my $dh, $dir or die "Cannot open $dir: $!";
my @files = sort grep { ! -d } readdir $dh;
closedir $dh;

$dir =~ s/\/$//;

foreach my $file (@files) {
  next if $file !~ /^[A-Z](\d)\1{4}$/;

  my $output = substr($file, 0, 1);
  open(my $ih, '<',  "$dir/$file")   or die "Could not open file '$file' $!";
  open(my $oh, '>>', "$dir/$output") or die "Could not open file '$output' $!";

  $_ = <$ih>;
  # perform certain formating with $_ here
  print $oh $_;

  close($ih);
  close($oh);
} 
```

* * *

在行`next if $file !~ /^[A-Z](\d)\1{4}$/;`它跳过所有不是必需格式的文件名，即第一个字符是大写字母，第二个是数字，另外 4 个字符与第一个数字相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T22:13:02.850

如果您在 linux 上工作，请使用 `cat file1 file2 ... > bigfile

否则这里有一个小脚本可以帮助你

```
use strict;
use warnings;

# get the directory from the commandline
# and clean ending /
my $dirname = $ARGV[0];
$dirname =~ s/\/$//;

# get a list of all files in directory; ignore all files beginning with a .
opendir(my $dh, $dirname) || die "can't opendir $dirname: $!";
my @files = grep { /^[^\.]/ && -f "$dirname/$_" } readdir($dh);
closedir $dh;

# loop through the files and write all beginning with 
# A to file A, B to file B, etc. extent the regex to fit your needs 
foreach my $file (@files) {
    if ($file =~ /([AB])\d+/) {
        open(IN,  "< $dirname/$file") or die "cant open $dirname/$file for reading";
        open(OUT, ">> $dirname/$1") or die "cant open $dirname/$1 for appending";
        print OUT <IN>;
        close(OUT);
        close(IN); 
    } else {
        print "$file didn't match\n";
    }
} 
```

# iphone - dequeueReusableCellWithIdentifier: 在我的 UITableViewCell 子类中调用初始化程序吗？

> ID：11056420
> 
> 赞同：13
> 
> 时间：2012-06-15T18:39:56.687
> 
> 标签：iphone, objective-c, uitableview

我有一个 UITableViewController 子类，它的原型单元在情节提要中模拟。

`cellForRowAtIndexPath`在设置单元的委托方法中有相当多的代码。问题是，如果单元格刚刚从重用池中出列，我不需要其中的大部分内容，因为当单元格第一次出列时，它已经完成了。我不能在情节提要中这样做，因为有些属性我只能以编程方式访问。

当 UITableViewController 从情节提要中获取原型单元格时，它是否会在我的 UITableViewCell 子类中调用初始化程序？我试过`(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier`了，但这似乎不是这个过程的一部分。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T19:00:17.413

当 UITableView 实例调用时`dequeueReusableTileWithIdentifier:`，单元格不会重新初始化。相反，在该调用中，出队的 UITableViewCell 将调用`-(void)prepareForReuse`. 这是因为重新初始化单元的成本很高，如果我们可以提供一种更简单的方法来准备它的重用（嗯，嗯，明白了吗？），它可以节省大量的 CPU 工作。

因此，如果您使用自定义单元格，请覆盖 UITableViewCell `prepareForReuse`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T02:08:27.227

我可能没有正确地表达我的问题，但我实际上是在这里寻找`(void)awakeFromNib`。

当单元格出列而不是重用时调用一次。允许我以编程方式进行一些在情节提要中没有意义的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-20T17:32:43.250

因为您正在加载（反序列化）故事板（笔尖文件）`-[UITableViewCell initWithCoder:]`方法中的单元格。

# c# - 如何在 Asp.net 中使用中等信任

> ID：11056421
> 
> 赞同：1
> 
> 时间：2012-06-15T18:39:57.250
> 
> 标签：c#, asp.net, asp.net-mvc, security, configuration

我有一个应用程序，它在本地运行良好，当我远程部署它时，它会出错，在联系托管公司后，据说我将信任级别设置为中等在将信任级别设置为中等后，它会给出*** *“解析器错误消息：此配置部分不能在此路径中使用。当站点管理员使用继承的配置文件锁定对此部分的访问权限时，会发生这种情况。****

```
 **<trust level="Medium" > is where error comes in web.config** 
```

该错误仅出现在设置为中等的线路信任级别中，并且配置错误仅出现在托管服务器而非本地服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:27:02.880

他们希望您将本地 IIS 设置为中等信任以找出问题所在。从 IIS 管理器中，选择站点\默认网站，然后在中心窗格中，选择 .NET 信任级别。将其从 Full(internal) 更改为 Medium (web_mediumtrust.config)。

# python - 从 Visual C++ 代码运行 Python（嵌入式 Python）

> ID：11056424
> 
> 赞同：2
> 
> 时间：2012-06-15T18:40:03.100
> 
> 标签：python, visual-c++, python-c-api, python-embedding

我有这个 Visual C++ 代码，加上嵌入的 Python，当我尝试使用以下代码运行外部 Python 代码时，我在调试模式下收到错误：

```
Unhandled exception at 0x77cf15de in CMLAir.exe (my code): 
access violation writing location 0x00000014. 
```

当 PyRun_File 函数通过 c++ 代码调用时，就会发生错误。
这是 C++ 函数：

```
 void CRailtestDoc::OnPreprocessorRunscript()
  {

  #ifdef USE_PYTHON

//for now, pull up Open dialog for user to specify script
CString strPythonScriptPath;
CString strTitle = "Run Python Script";
CFileDialog dlg(TRUE, ".py", NULL);
dlg.m_ofn.Flags |= OFN_PATHMUSTEXIST;
dlg.m_ofn.lpstrTitle = (LPCTSTR)strTitle;
if (dlg.DoModal() == IDOK)
{
    strPythonScriptPath = dlg.GetFileName( );
}
else
{
    return;
}

FILE* fp;
fp = fopen((LPCSTR)strPythonScriptPath, "r+");
if (fp == NULL)
{
    CString strErrMsg;
    strErrMsg.Format("troble opening python file: %s", (LPCSTR)strPythonScriptPath);
    AfxMessageBox(strErrMsg);
    return;
}

//
// TODO: we need to make sure that we don't call Py_Initialize more than once
// see Python/C API Reference Manual section 1.4
//
m_bRunningScript = TRUE;
Py_Initialize();

PycString_IMPORT; //Macro for importing cStringIO objects

//start up our own modules?  Is this needed here?
initcml();
initresults();

PyObject* localDict;
PyObject* mainModule;
PyObject* mainModuleDict;
mainModule = PyImport_AddModule("__main__");
//mainModule = PyImport_AddModule("__builtins__");

if(mainModule==NULL)
{
    AfxMessageBox("Problems running script");
    m_bRunningScript = FALSE;
    return;
}
mainModuleDict = PyModule_GetDict(mainModule);
localDict = PyDict_New();

//Now run the selected script
PyObject* tempPyResult = 
PyRun_File(fp, strPythonScriptPath, Py_file_input, mainModuleDict, mainModuleDict); 
//<=== where the code exit with unhandled  exception at 0x77cf15de
UNREFERENCED_PARAMETER(tempPyResult);

// See if an exception was raised and not handled.
// If so, return traceback to user as MsgBox

} 
```

这是我试图从 C++ 代码运行的外部 Python 脚本：

```
 import cml, results 

  def main():
  baseCase = "C:\\Program Files\\CMLAir32\\Examples\\Quick4_Example.cml" 
  outFile = "c:\\output.txt"
  f = open(outFile, "w") 

  #open our .cml case
  if cml.OpenCase(baseCase) == 0:
    return 

  #set initial mesh size 
  meshSize = 177
  cml.SetGridSizeX(meshSize)
  cml.SetGridSizeY(meshSize)
  cml.SaveCaseNoWarn()
  while meshSize < 400:
    #run it 
    cml.RunCaseNoWarn()
    #get results
    res = results.Results()
    res.GetResults() 
    if res.HasResults() == 0: 
        cml.MsgBox("error getting results, aborting") 
        return 
    #pull out minimum fly height 
    singleResult = res[0]
    fh = singleResult.minFH
    #output current mesh size and minimum fly height 
    dataStr = str(meshSize) + ' ' + str(fh)
    f.write(dataStr) 
    #increment mesh size 
    meshSize += 16
    cml.SetGridSizeX(meshSize) 
    cml.SetGridSizeY(meshSize) 
    cml.SaveCaseNoWarn()

    main() 
```

为什么 PyRun_File 函数会报错？

我对在 C++ 代码中嵌入 Python 了解不多，所以我非常感谢这里的一些指针。请记住，我对 Python 还比较陌生。我的大部分编程经验都在 Visual C++ 中。在这种情况下，将两者结合在一起的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:43:21.320

`fp`错误是由于C++ 和 python 版本之间的误解或混淆`fp`，所以，我所做的是我注释掉了这一`fp`行，而不是我使用：

```
PyObject* PyFileObject; PyFileObject = PyFile_FromString(strPythonScriptPath, "r"); 
```

效果非常好！

# android - sqlite 返回：错误代码 = 1，msg = “file_theme_column”附近：语法错误

> ID：11056425
> 
> 赞同：1
> 
> 时间：2012-06-15T18:40:11.510
> 
> 标签：android, database, sqlite

这是我创建数据库表的代码

```
String sqlQueryToCreateFileTable = "create table if not exists " + TABLE_FILE + " ( " + BaseColumns._ID + " integer primary key autoincrement, " 
+ COLUMN_NAME_FILE_NAME + " text not null, "
+ COLUMN_NAME_FILE_CATEGORY+ " integer not null , FOREIGN KEY ("+COLUMN_NAME_FILE_CATEGORY+") REFERENCES "+TABLE_CATEGORY+" ("+BaseColumns._ID+"), " 
+ COLLUMN_NAME_FILE_THEME+ " integer not null , FOREIGN KEY ("+COLLUMN_NAME_FILE_THEME+") REFERENCES "+TABLE_THEME+" ("+BaseColumns._ID+"), " 
+ COLLUMN_NAME_FILE_DATE_CREATING+ " integer not null , FOREIGN KEY ("+COLLUMN_NAME_FILE_DATE_CREATING +") REFERENCES "+TABLE_DATE+" ("+BaseColumns._ID+"), " 
+ COLLUMN_NAME_FILE_CLOUD + " text default null,"
+ COLLUMN_NAME_FILE_DATE_UPLOADING + " text default null);";

db.execSQL(sqlQueryToCreateFileTable); 
```

但我在logcat中有那个

```
06-15 18:24:09.177: I/Process(9075): Sending signal. PID: 9075 SIG: 9
06-15 18:31:01.428: I/Database(10559): sqlite returned: error code = 1, msg = near "file_theme_column": syntax error
06-15 18:31:01.428: E/Database(10559): Failure 1 (near "file_theme_column": syntax error) on 0x5882f8 when preparing 'create table if not exists file_table ( _id integer primary key autoincrement, file_name_column text not null, file_category_column integer not null , FOREIGN KEY (file_category_column) REFERENCES category_table (_id), file_theme_column integer not null , FOREIGN KEY (file_theme_column) REFERENCES theme_table (_id), file_date_creating_column integer not null , FOREIGN KEY (file_date_creating_column) REFERENCES date_table (_id), file_cloud_column text default null,file_date_upload_column text default null);'.
06-15 18:31:01.468: D/AndroidRuntime(10559): Shutting down VM
06-15 18:31:01.468: W/dalvikvm(10559): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-15 18:31:01.488: E/AndroidRuntime(10559): FATAL EXCEPTION: main
06-15 18:31:01.488: E/AndroidRuntime(10559): android.database.sqlite.SQLiteException: near "file_theme_column": syntax error: create table if not exists file_table ( _id integer primary key autoincrement, file_name_column text not null, file_category_column integer not null , FOREIGN KEY (file_category_column) REFERENCES category_table (_id), file_theme_column integer not null , FOREIGN KEY (file_theme_column) REFERENCES theme_table (_id), file_date_creating_column integer not null , FOREIGN KEY (file_date_creating_column) REFERENCES date_table (_id), file_cloud_column text default null,file_date_upload_column text default null);
06-15 18:31:01.488: E/AndroidRuntime(10559):    at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
06-15 18:31:01.488: E/AndroidRuntime(10559):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1763)
06-15 18:31:01.488: E/AndroidRuntime(10559):    at com.app.pfe.AndroidOpenDbHelper.onCreate(AndroidOpenDbHelper.java:95)
06-15 18:31:01.488: E/AndroidRuntime(10559):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:126)
 how can I fix this error? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:50:19.247

表约束应该到最后：

[http://www.sqlite.org/lang_createtable.html](http://www.sqlite.org/lang_createtable.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:59:40.540

就像 pawelzieba 说的，你应该尝试重新格式化

```
create table if not exists file_table ( 
    _id integer primary key autoincrement, 
    file_name_column text not null, 
    file_category_column integer not null, 
    file_theme_column integer not null, 
    file_date_creating_column integer not null, 
    file_cloud_column text default null,
    file_date_upload_column text default null,
    FOREIGN KEY (file_category_column) REFERENCES category_table (_id), 
    FOREIGN KEY (file_theme_column) REFERENCES theme_table (_id), 
    FOREIGN KEY (file_date_creating_column) REFERENCES date_table (_id)
); 
```

# multithreading - 当 1 个作者进入读写器锁时，如何抢占所有读者？

> ID：11056427
> 
> 赞同：-2
> 
> 时间：2012-06-15T18:40:18.247
> 
> 标签：multithreading, mutex, semaphore, data-synchronization, readerwriterlock

![在此处输入图像描述](../Images/bfb78b156be01e788bafd6511d9ab305.png)

以上是作者优先于读者的读者写问题解决方案。

假设最初有 1000 个读取器开始执行代码来读取数据（假设读取数据代码很大，每个线程需要 1 秒），然后 1 个写入器尝试写入数据。所以作者必须等待 1000 个读者首先完成（即 1000 秒）。

例如，在一个应用程序中，1 个 writer 更新时间，许多 reader 读取时间，writer 必须等待 1000 秒，这是巨大的。

是否有任何解决方案，当作者尝试写入时，所有读者都将被抢占，直到作者完成其任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:52:44.480

“抢占”究竟是什么意思？你不能把它们从 CPU 上取下来，因为这并不能解决问题。读者希望他们正在阅读的状态是稳定的。如果你“暂停”阅读器，获取写锁，修改状态，释放锁并恢复阅读器，他们将看到改变的状态和故障。

读锁的目的是确保读取器执行时数据不会改变。如果您删除该属性，则此锁定策略将不再有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-09T20:43:07.430

由于读者的数量远多于作者，因此您最终可能会饿死作者线程。您可以引入的一个简单策略是，如果写入者正在等待写入，您可以停止向即将到来的读取请求授予更多读取锁。这至少可以确保作者不会饿死。writer 的延迟取决于实际用例。

# python - python中的复杂排序

> ID：11056431
> 
> 赞同：0
> 
> 时间：2012-06-15T18:40:33.710
> 
> 标签：python

我有以下元组列表：

```
items = [
    ('john jones', ['Director', 'Screenwriter', 'Producer']), 
    ('eric smith', ['Screenwriter']), 
    ('anne smith', ['Producer']), 
    ('emily smith', ['Director']), 
    ('steven jones', ['Director', 'Screenwriter'])
] 
```

我需要对其进行排序，以使“导演”出现在“编剧”出现在“制片人”之前。其中的实际订购无关紧要。例如，这将是一个有效的结果：

```
items = [
    ('john jones', ['Director', 'Screenwriter', 'Producer']), 
    ('emily smith', ['Director']), 
    ('steven jones', ['Director', 'Screenwriter'])
    ('anne smith', ['Producer']), 
    ('eric smith', ['Screenwriter']), 
] 
```

有没有办法做这种排序`sorted(items, key=lambda x: ?)`，还是我必须迭代列表中的每个项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:45:12.060

当然，有一种方法：

```
$ cat sort.py
order = ['Director', 'Screenwriter', 'Producer']
items = [
    ('john jones', ['Director', 'Screenwriter', 'Producer']), 
    ('eric smith', ['Screenwriter']), 
    ('anne smith', ['Producer']), 
    ('emily smith', ['Director']), 
    ('steven jones', ['Director', 'Screenwriter'])
]

for i in sorted(items, key = lambda x: order.index(x[1][0])):
    print i 
```

让我们尝试一下：

```
$ python sort.py
('john jones', ['Director', 'Screenwriter', 'Producer'])
('emily smith', ['Director'])
('steven jones', ['Director', 'Screenwriter'])
('eric smith', ['Screenwriter'])
('anne smith', ['Producer']) 
```

当您想按名称对相等的 eintries 进行排序时，您只需要一个元组（Lattyware 的想法）：

```
for i in sorted(items, key = lambda x: (order.index(x[1][0]), x[0])):
    print i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:02:12.433

这是我认为最好的整体解决方案，主要是其他答案的混搭：

```
import collections

items = collections.OrderedDict([
    ('john jones', ['Director', 'Screenwriter', 'Producer']),
    ('emily smith', ['Director']),
    ('steven jones', ['Director', 'Screenwriter']),
    ('anne smith', ['Producer']),
    ('eric smith', ['Screenwriter']),
])

ordering = {'Director': 1, 'Screenwriter': 2, 'Producer': 3}

def order(item):
    name, values = item
    return ordering.get(values[0], float("inf")), name

print(sorted(items.items(), key=order)) 
```

给我们：

```
[('emily smith', ['Director']), ('john jones', ['Director', 'Screenwriter', 'Producer']), ('steven jones', ['Director', 'Screenwriter']), ('eric smith', ['Screenwriter']), ('anne smith', ['Producer'])] 
```

不在`ordering`字典中的角色将放在最后。它们将首先按角色排序，然后按名称排序。

这假定子列表是预先排序的。如果没有，很[容易先对它们进行排序](https://stackoverflow.com/a/11056490/722121)。

# iphone - UIView 类别 - 自定义方法不返回 UIView

> ID：11056435
> 
> 赞同：2
> 
> 时间：2012-06-15T18:40:40.220
> 
> 标签：iphone, uitableview, uiview, categories

我在 UIView 上创建了一个 Category 方法，该方法旨在创建和返回 UIView 对象。它运行没有错误，但返回一个空的 UIView。这是代码：

```
#import <UIKit/UIKit.h>

@interface UIView (makeTableHeader)

 -(UIView *) makeTableHeader:(NSString *)ImageName
                  withTitle:(NSString *)headerTitle
                  usingFont:(NSString *)fontName 
                andFontSize:(CGFloat)fontSize;

@end 
```

这是实现：

```
-(UIView *) makeTableHeader: (NSString *)ImageName 
              withTitle:(NSString *)headerTitle 
              usingFont:(NSString *)fontName 
            andFontSize:(CGFloat)fontSize {

     // Create a master-view:
     UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 34)];

     // Create the Image:
     UIImageView *headerImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:ImageName]];
     headerImageView.frame = CGRectMake(0, 0, 320, 34);

     // Now create the Header LABEL:
     UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, 320, 34)];
     headerLabel.text = headerTitle;
     headerLabel.font = [UIFont fontWithName:fontName size:fontSize];
     headerLabel.backgroundColor = [UIColor clearColor];
     headerLabel.textColor = [UIColor whiteColor];
     headerLabel.shadowColor = [UIColor blackColor];
     headerLabel.shadowOffset = CGSizeMake(1.0, 1.0);

     // Finally add both both Header and Label as subview to the main Header-view:
     [headerView addSubview:headerImageView];
     [headerView addSubview:headerLabel];

     return headerView;
} 
```

现在这是我如何称呼这个类别方法：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *hView = [[UIView alloc] init];
    [hView makeTableHeader:@"redGradientHeader5@2x.jpg"
                 withTitle:@"Test Banner"
                 usingFont:@"boldSystemFont"
               andFontSize:18];

    return hView; 
```

}

代码运行良好 - 但我得到一个空视图。有趣的是，它确实正确调整了视图的*大小*——给它我要求的 CGRect 坐标——但视图内没有图像或标签。

任何人都看到有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T18:42:04.643

您需要使该方法成为`class`方法，并像这样分配它：

```
UIView *hView = [UIView makeTableHeader:@"redGradientHeader5@2x.jpg"
             withTitle:@"Test Banner"
             usingFont:@"boldSystemFont"
           andFontSize:18]; 
```

您正在制作两个视图 - 一个使用 alloc/init，一个使用您的自定义函数。但是，您只会将*第*一个分配给`hView`. 这是因为在该`makeTableHeader`方法中，您`hView`用于**创建***第二个*UIView ，并将子视图/修改应用于该 UIView，*而*不是修改`hView`. 这个视图然后由方法返回，然后立即丢弃，因为它没有分配给任何东西。

或者，如果您坚持*将*其保留为实例方法并*修改*视图，则只需这样做（尽管我**强烈**不建议这样做）：

```
-(void) makeTableHeader: (NSString *)ImageName 
              withTitle:(NSString *)headerTitle 
              usingFont:(NSString *)fontName 
            andFontSize:(CGFloat)fontSize {
     //you may want to remove all subviews here or something
     // Create the Image:
     self.frame = CGRectMake(0, 0, 320, 34);
     UIImageView *headerImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:ImageName]];
     headerImageView.frame = CGRectMake(0, 0, 320, 34);

     // Now create the Header LABEL:
     UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, 320, 34)];
     headerLabel.text = headerTitle;
     headerLabel.font = [UIFont fontWithName:fontName size:fontSize];
     headerLabel.backgroundColor = [UIColor clearColor];
     headerLabel.textColor = [UIColor whiteColor];
     headerLabel.shadowColor = [UIColor blackColor];
     headerLabel.shadowOffset = CGSizeMake(1.0, 1.0);

     // Finally add both both Header and Label as subview to the main Header-view:
     [self addSubview:headerImageView];
     [self addSubview:headerLabel];

} 
```

# node.js - 使用 node.js 将文件流式传输到 mongodb

> ID：11056437
> 
> 赞同：1
> 
> 时间：2012-06-15T18:40:44.120
> 
> 标签：node.js, mongodb

我正在尝试创建一个 node.js 程序，该程序通过 http POST 接受文件并将其写入 mongodb。为了降低内存使用率，我使用 req.on('data') 以块的形式接收数据。

问题是，无论我如何解决这个问题，我都无法绕过数据事件在 mongo 编写文档之前被触发的事实。

这是我试图做的：

1.  收到连接后，在 mongo 中创建文档，存储来自 mongo 的 _id。
2.  然后每个数据事件都会更新文档（使用_id）
3.  当收到结束事件时，我会更新文档设置一些完整的标志。

但是，在 mongo 在步骤 1 中返回之前，数据事件开始被触发。

有没有正确的方法来做到这一点？我宁愿不必诉诸于写入文件。

谢谢，凯夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:50:48.450

一旦 Mongo 完成存储，您始终可以[暂停请求并取消暂停。](http://nodejs.org/api/http.html#http_request_pause)

# r - 用另一个因子的最接近的水平替换一个因子的水平

> ID：11056438
> 
> 赞同：1
> 
> 时间：2012-06-15T18:40:44.760
> 
> 标签：r

假设我在 R 中有以下数据。

```
training = factor(c(1,1,3,2,1,3,2,34,67,34))
test = factor(c(1,1,2,30,65,30)) 
```

（我的数据要复杂得多，这是一个简化）

我想检查测试集中的级别是否存在于训练集中，如果不存在，则将其替换为训练集中最接近的值。例如，训练集中不存在测试集中的 30 和 65 级，所以我想分别用 34 和 67 替换它们。

目前，我创建了以下代码。

```
replacefactor <- function(dat,new_factor,near_factor) {
if (!(near_factor %in% levels(dat))){
    levels(dat) <- c(levels(dat),near_factor)
}
dat[dat==new_factor] <- near_factor
dat <- factor(dat)
}

test <- replacefactor(test,30,34)
test <- replacefactor(test,65,67) 
```

它有效，但我需要手动指定级别。由于我的数据量很大，这对我来说是不切实际的。

我不确定如何在训练集中找到最接近的值。然后我可以使用 for 循环来自动化它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:52:33.907

首先获取不匹配的级别：

```
test.missing <- levels(test)[!levels(test) %in% levels(training)] 
```

然后编写一个函数来沿着它们运行并找到最近的匹配：

```
myfun <- function(x, y) {
  levels(y)[which.min(abs(as.integer(levels(y)) - as.integer(x)))]
}

> unlist(lapply(test.missing, myfun, training))
[1] "34" "67" 
```

然后可以将其分配给正确的级别：

```
levels(test)[!levels(test) %in% levels(training)] <- unlist(lapply(test.missing, myfun, training))

> levels(test)
[1] "1"  "2"  "34" "67" 
```

# java - 如何将 Java 1.5 类与 Java 1.6 类链接？

> ID：11056439
> 
> 赞同：0
> 
> 时间：2012-06-15T18:40:55.533
> 
> 标签：java, java-6, java-5

使用 Java 1.5 编译器，当我尝试编译依赖于使用 Java 1.6 编译的类的 java 类时，我收到此错误：

```
in/javac Java15.java
Java15.java:5: cannot access Java16
bad class file: ./Java16.class
class file has wrong version 50.0, should be 49.0
Please remove or make sure it appears in the correct subdirectory of the classpath.
        String java16result = Java16.test();
                              ^
1 error 
```

反向工作（使用 Java 1.6 编译器，我可以链接到 Java 1.5 类。）

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:44:14.363

“解决方法”就是不这样做——如果你想用 Java 1.5 编译某些东西，那么也用 Java 1.5 编译它的所有依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T18:43:24.300

我认为您尝试做的事情是不可能的。Java 1.6 具有 Java 1.5 不知道的特性，因此不知道如何执行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:46:39.873

使用 java 1.6 编译器和运行时。

您还可以反编译 1.6 代码并使用 1.5 编译器重新编译它。

我相信 1.5 和 1.6 的类文件之间只有一点点区别。您可能可以将 .class 文件开头的魔术字节更改为 1.5 并让它工作。虽然不能保证，但我不会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T21:36:24.027

对我有用的解决方案是使用`java.lang.Runtime.exec`从 Java 1.5 程序执行 Java 1.6 程序。

我意识到在大多数情况下这可能不是最好的解决方案，但在我的情况下（我需要使用 Java 1.5 从 Oracle 数据库调用 Java 1.6 程序），它运行良好，并且不需要对我当前的数据库安装。

# html - 您可以在 Windows 8 Metro 应用程序中混合 HTML 和 XAML 吗？

> ID：11056446
> 
> 赞同：5
> 
> 时间：2012-06-15T18:41:17.203
> 
> 标签：html, xaml, microsoft-metro

无论如何在 Windows 8 Metro App 中混合 HTML UI 和 XAML UI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:02:23.940

我相信不，当涉及到表示层时， **XAML**和**HTML/CSS**是单独的路径，你不能混合它们（除了XAML 中的*WebView*控件之类的“肮脏技巧”，但它对组件的可重用性没有用处）。

[Windows 8 体系结构图](http://community.devexpress.com/blogs/ctodx/Windows8Architecture_485458D4.png)可能有助于了解 XAML/HTML/WinRT 之间的关系。HTML/JS 中的应用程序在 Internet Explorer 10 Metro 中呈现，只是在另一个上下文中（具有扩展的 API、不同的安全规则等），而 XAML 具有不同的机制。WinRT 位于表示层之下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:22:58.263

这是不可能的。HTML 独立于 CSS 和 Javascript。为什么需要这样做？我相信使用 HTML5，您将不需要 XAML。

# cakephp - CakePHP 和所见即所得编辑器

> ID：11056450
> 
> 赞同：0
> 
> 时间：2012-06-15T18:41:28.287
> 
> 标签：cakephp, cakephp-1.3

我有一个关于在 CakePHP 中实现所见即所得编辑器的问题。我正在为我工​​作的员工开发一个内部网。我目前正在使用 CakePHP 1.3。我找到了这个存储库

[https://github.com/josegonzalez/cakephp-wysiwyg-helper/tree/1.3](https://github.com/josegonzalez/cakephp-wysiwyg-helper/tree/1.3)

其中包含捆绑在一起的几个不同的所见即所得编辑器。我按照说明进行操作，并确保我下载了 NicEdit 的 JS 发行版（连同 TinyMCE，在我与 NicEdit 斗争之后，仍然没有一个工作）。

我跑

```
echo $this->Nicedit->input('content'); 
```

在我看来。当我在浏览器中加载页面时，输入框会正确显示，但是没有用于文本编辑的工具栏。在页面运行时检查脚本，在此代码块下

```
<div class="input textarea required"><label for="AnnouncementContent">Content</label><textarea name="data[Announcement][content]" cols="30" rows="6" id="AnnouncementContent" ></textarea></div><script type="text/javascript">
        var area1;
        function makePanel() {
            area1 = new nicEditor({fullPanel : true}).panelInstance(
                'AnnouncementContent',
                {hasPanel : true}
            );
        }
        bkLib.onDomLoaded(function() { makePanel(); });</script> 
```

我收到此错误：Uncaught ReferenceError: bkLib is not defined

我花了几个小时试图解决这个问题无济于事。有没有人对解决这个问题有一些见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:56:13.810

这是我在最近的 1.3 项目中设置 TinyMCE 的方法，而不使用该插件：

从我使用 TinyMCE 编辑器的观点来看：

```
//tell template to include the tinyMCE javascript file
<?php  
if(isset($javascript)): 
    echo $javascript->link('tiny_mce/tiny_mce.js'); 
endif; 
?>

//Build the form I need
<div class="responses form">
<?php echo $this->Form->create(null, array('controller' => 'Responses', 'action' => 'add')); ?>
    <fieldset>
        <legend>Add Response</legend>
    <?php
        echo $form->hidden('listing_id', array('value' => $tempid));
        echo $this->Form->input('content');
    ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit', true));?>
</div>

//set up the editor
<script type="text/javascript"> 
    tinyMCE.init({ 
        theme : "simple", 
        mode : "textareas", 
        convert_urls : false 
    });
</script> 
```

我知道如果您真的想使用该插件，这并不能真正回答您的问题，但如果您只使用 TinyMCE 没问题，您可以通过这种方式轻松设置它。最好的部分是，它会自动转换为 HTML，因此您可以将其保存到数据库中。当您从数据库中检索数据时，它将采用格式正确的 html，因此您可以轻松地显示它。

您还可以在 init 方法中更具体地说明您希望它使用哪个文本区域。我很难让它只在特定的文本区域上激活，但你可能会有不同的运气。文档在[这里](http://www.tinymce.com/wiki.php/Configuration)。您还可以打开更高级的主题。该文档描述了这些选项。

# jquery - 如何通过 jquery ajax 按需加载巨大的 html 数据

> ID：11056452
> 
> 赞同：0
> 
> 时间：2012-06-15T18:41:31.720
> 
> 标签：jquery, asp.net, pagination

我已经开发了我们的公司网站，我们在其中显示一个产品详细信息意味着在 aspx 页面中的一条记录。有时我们的 html 数据很大，用户必须多次滚动页面才能阅读整个内容。我知道如何通过 jquery ajax 调用 asp.net 服务器端方法并解析 json 以填充 UI 来获取和显示页面中固定数量的记录。问题是，在我的情况下，记录是我每页显示的记录，记录来自数据库。每条记录都是我正在展示的巨大 html 数据。在这里，我给出了我们网站的示例 url，我们在其中显示巨大的 html 数据。[http://www.bba-reman.com/content.aspx?content=bba_reman_diagnostics_tools](http://www.bba-reman.com/content.aspx?content=bba_reman_diagnostics_tools)

我想知道一种好的技术，通过它我可以在我的页面中显示部分数据，当用户向下滚动时，将获取并显示下一组数据。所以建议我如何从整个 html 中提取部分 html 并显示在页面中，当用户向下滚动时，然后提取下一部分 html 并显示在页面中。所以简而言之，我需要知道如何将巨大的 html 数据分成几部分。请帮助我的概念。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:12:11.283

我在我的一个项目中遇到了类似的情况，我通过使用 JQuery .Scroll Event 解决了它。这是滚动事件的[官方链接](http://api.jquery.com/scroll/)。您需要做的就是：

1.  确定一次要向用户显示的 HTML 字符大小的限制。说它是 X。如果您的总 HTML 字符数超过 X，那么您只需从 DB 中返回 X（或从 CS 文件中的业务逻辑返回，以防您想避免使用多个 DB 调用）

2.  捕获用户的滚动事件并通过将文本附加到标签来获取+绑定下一组数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:25:28.643

如果您所说的是您提供的链接上的所有产品内容都存储在 db 中的一个字段中，您可以使用 wrap() 之类的方法使每个产品像一行并根据用户交互显示某些行。

这是通过在浏览器控制台中运行在您的页面上测试的一些示例代码。它在顶部创建了一个非常简单的寻呼机，也可以在底部克隆。可以通过添加一些更好的 ID 来改进页面中的标记以更有效地使用 jQuery，并且还会发生一些不寻常的嵌套

```
$(function(){
/* wrap each pair of picture and description in a div*/
$('.diagnostic_picture').each(function(){
   $(this).next('.diagnostic_information').andSelf().wrapAll('<div class="product_row" style="clear:both">');
});
/* cache rows to variable */
var $products=$('.product_row');
var total_products=$products.length;
/* hide all but first 5 "rows" */
$products.slice(5).hide();
/* create  a pager based on qty of products and 5 per page */
var pager='<ul class="pager" style="height:1.5em; margin: 10px 0;">';
var pager_length=Math.round( total_products/5);

for( i=0; i< pager_length; i++){
    pager+='<li style="float:left"><a href="#" style="padding:5px;color:blue; background: #CCC; margin-right:5px; display:block" data-pager_start="'+(i*5)+'">'+(i+1)+'</a></li>';
}
pager+='</ul>';
/* insert pager before first "row" */
$products.eq(0).before( pager);
/* pager click handler */
$('.pager a').click(function(){
    var start=$(this).data('pager_start');
    $products.hide().slice(start, (start+5)).show();
    return false;
});

}); 
```

我创建了一个寻呼机作为示例，您也可以基于滚动显示更多行。您应该可以将此代码直接放入您的页面中进行尝试

# git - git-tfs 克隆失败，错误代码 128

> ID：11056453
> 
> 赞同：5
> 
> 时间：2012-06-15T18:41:37.373
> 
> 标签：git, tfs, git-tfs

我正在使用 git-tfs 克隆 TFS 存储库，这是我过去能够成功完成的。但是在我运行命令时使用当前版本，就像这样......

`git tfs clone http://NameOfOurTfsServer:8080/ $/NameOfMyProject -d`

...我收到错误代码 128，例如：

> `System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> Sep.Git.Tfs.Core.GitCommandException: Command exited with error code: 128 at Sep.Git.Tfs.Core.GitHelpers.Close(Process process) in c:\Users\matt\dev\github\git-tfs\GitTfs\Core\GitHelpers.cs:line 205 at Sep.Git.Tfs.Core.GitHelpers.<>c__DisplayClass8.<CommandOutputPipe>b__7() in c:\Users\matt\dev\github\git-tfs\GitTfs\Core\GitHelpers.cs:line 59 [etc.]`

这是在 git-tfs 14.0 上。我已经尝试了几个以前版本的 git-tfs，但每个版本都出现相同或相似的错误。

有没有人遇到过这个？你知道修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:02:16.627

我遇到过这样的问题，尤其是当 TFS 服务器*断开*连接时。我的**解决方法**是删除文件夹并再次运行相同的命令。

您可以尝试[快速克隆](https://github.com/git-tfs/git-tfs/wiki/Clone)而不是[克隆](https://github.com/git-tfs/git-tfs/wiki/Clone)，因为它会更快地完成。我假设您不需要完整的历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-28T16:50:32.810

这可能为时已晚，但为了将来参考，这很重要：转到 Windows 凭据并删除绑定到 TFS Git 的所有凭据。它对我有用。

# php - 查询缓存 yii 框架

> ID：11056459
> 
> 赞同：2
> 
> 时间：2012-06-15T18:42:01.883
> 
> 标签：php, caching, yii

我想找到登录用户的总分并想缓存它。我的代码是：

```
$dependency = new CDbCacheDependency('SELECT MAX(id) FROM tbl_points_log where user_id='.Yii::app()->user->id);    
$sql='SELECT SUM( point) as user_point FROM tbl_points_log left join tbl_action on tbl_action.id = tbl_points_log.action_type_id where user_id='.Yii::app()->user->id;
$user_point = Yii::app()->db->cache(1000, $dependency)->createCommand($sql)->queryAll(); 
```

上面的代码正确吗？我是否必须在配置文件中进行一些更改才能使查询缓存正常工作？我刚刚添加

```
'cache' => array(
     'class' => 'CDbCache'
 ), 
```

在组件下

`var_dump($dependency->getHasChanged());`总是评估为真，即使我没有对数据库进行任何更改，那为什么呢？

PS 不要为 SQL 语句烦恼。它的工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:57:57.110

找出查询结果来自缓存或数据库的最佳方法是如下打开日志记录并查看结果

```
 'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                array(
                    'class'=>'CFileLogRoute',
                    'levels'=>'error, warning',
                ), 
                array(
                    'class'=>'CWebLogRoute',
                ), 

            ),
        ), 
```

# html - 用 CSS 显示两列，一列固定宽度，另一列占用剩余空间

> ID：11056461
> 
> 赞同：2
> 
> 时间：2012-06-15T18:42:04.473
> 
> 标签：html, css, css-tables

我只是想了解使用 CSS 与表格的好处，但到目前为止我并不相信。我可以在一分钟内用表格做的事情似乎对 CSS 来说并不那么容易（至少在这一点上对我来说）。所以，这个问题不是关于使用 CSS 与表格的优点。我需要知道如何使用 CSS 执行以下操作：

说，我有一个包含元素需要分成两列，可以这么说：

```
<div id="idOuter">
 <div id="idLeft"></div>
 <div id="idRight"></div>
<div> 
```

idLeft 元素必须具有固定宽度。例如，100 像素。它将包含一个带有边距的文本标签。但是 idRight 必须占据 idOuter div 中剩余的任何宽度。它将包含一个带有边距的文本输入元素。idOuter 还应该反映 idLeft 和 idRight 的高度，并有自己的边距。

你是怎么做到的？我一直在搞乱浮动、内联块和宽度，但是当我调整浏览器窗口的大小时它总是搞砸了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:51:38.013

这相对容易 - [http://jsfiddle.net/bWuQB/5/](http://jsfiddle.net/bWuQB/5/)

```
#idOuter {
    width: 100%;
    overflow: hidden;
    position: relative;
}

#idLeft {
    height: 100%;
    width: 100px;
    background: orange;
    position: absolute;
}

#idRight {
    margin-left: 100px;
    height: 100%;
    background: beige;
} 
```

而且您必须忘记使用表格进行布局和任何东西，但表格数据除外。当您习惯无表布局时，您会喜欢它们。从语义上讲，这是正确的解决方案。

**编辑：删除了不必要的 float 语句并更新了 Fiddle**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T22:27:34.327

据我所见（并且我已经做了一些查看），最好的实现（*不使用 javascript*）使用浮动和边距的组合来实现您想要的固定流体布局。然而，即使在这个实现中，**包含的 div 仍然不会 100% 地反映正确的高度。**

[小提琴示范](http://jsfiddle.net/eHGBX/)

[[来源]](http://www.dynamicdrive.com/style/layouts/item/css-liquid-layout-21-fixed-fluid/)

# android - 上传照片

> ID：11056464
> 
> 赞同：-2
> 
> 时间：2012-06-15T18:42:28.020
> 
> 标签：android

我是这个 android 应用程序开发的新手，如果你们指导我制作一个 android 应用程序，允许我从我的设备上传照片到我当前的页面，就像我们提前在 Facebook Thanx 中上传个人资料图片一样，我将非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:05:45.363

客户端代码

```
try
        {
            HttpURLConnection httpUrlConnection = (HttpURLConnection)new URL("/upload.php").openConnection();
            httpUrlConnection.setDoOutput(true);
            httpUrlConnection.setRequestMethod("POST");
            OutputStream os = httpUrlConnection.getOutputStream();

            BufferedInputStream fis = new BufferedInputStream(new FileInputStream("/mnt/sdcard/"+fileName));

            for (int i = 0; i < 100000; i++) {
                os.write(fis.read());

            }

                os.close();
                BufferedReader in = new BufferedReader(new InputStreamReader(httpUrlConnection.getInputStream()));

                String s = null;
                while ((s = in.readLine()) != null) {
                    System.out.println(s);
                }
                in.close();
                fis.close();
         }
         catch(Exception ex)
            {
                ex.printStackTrace();
            } 
```

您可以在 php 中使用此服务器端代码

```
$filename = "name.jpg";
$fileData = file_get_contents('php://input');
$fhandle = fopen($filename, 'wb');
fwrite($fhandle, $fileData);
fclose($fhandle);
echo "success"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:38:40.547

正如 kcoppock 在评论中发布的那样，这是一个非常广泛的问题。我想建议你准备一些关于这些主题的东西：

1.  [HttpMime](http://hc.apache.org/httpcomponents-client-ga/httpmime/) ;
2.  [多部分上传](http://www.caucho.com/resin-3.0/jsp/tutorial/multipart.xtp)；
3.  [Android中的文件上传](https://stackoverflow.com/questions/2017414/post-multipart-request-with-android-sdk)；

通过这些链接，您可以开始一些研究...... ;-)

# c++ - 优先队列，重载少操作

> ID：11056465
> 
> 赞同：1
> 
> 时间：2012-06-15T18:42:31.407
> 
> 标签：c++, operator-overloading, priority-queue

我已经像这样声明了 std::priority_queue 。

```
priority_queue < Aircraft, vector<Aircraft>, less<Aircraft> > *q; 
```

我像这样重载了 less 运算符。

```
bool Aircraft::operator<(const Aircraft &rhs) const
{
    return (m_dep_time < rhs.m_dep_time);
} 
```

我打印出优先级队列，并且按降序获取元素（最大的 dep_time 首先）。我不得不改变`m_dep_time < rhs.m_dep_time`它`m_dep_time > rhs.m_dep_time`并且它起作用了。我能够按预期获得最低的 dep_time。

我认为在逻辑上使用`m_dep_time < rhs.m_dep_time`是正确的，而不是按`m_dep_time > rhs.m_dep_time`升序从队列中获取元素，最低值在前。

你能解释一下我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:46:52.713

看看这个[参考](http://en.cppreference.com/w/cpp/container/priority_queue)。默认情况下，顶部元素是最大的元素。如果你想要相反的行为，你必须使用不同的比较函数，就像你所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:46:40.790

`<`队列中的 描述了*优先级上*的较少关系。因此，如果您希望时间值最低的元素成为第一个（最高优先级），则必须将时间比较为`m_dep_time > rhs.m_dep_time`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:47:21.447

[优先队列的设计使其第一个元素始终是其包含的**最大**元素。](http://www.cplusplus.com/reference/stl/priority_queue/)

# silverlight - 如何在 Silverlight 中为 TextBox 设置样式？

> ID：11056466
> 
> 赞同：4
> 
> 时间：2012-06-15T18:42:36.833
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

在 Xaml 中，我可以为文本框设置自定义行为，例如：

```
<TextBox>
   <i:Interaction.Behaviors>
       <My:TextBoxNewBehavior/>
   </i:Interaction.Behaviors>
</TextBox> 
```

我希望所有 TextBox 都具有这种行为，那么如何将这种行为以隐式风格呈现呢？

```
<Style TargetType="TextBox">
    <Setter Property="BorderThickness" Value="1"/>
    ....
</Style> 
```

更新：感谢您的信息。尝试以下建议的方式，应用程序崩溃：

```
<Setter Property="i:Interaction.Behaviors">
    <Setter.Value>
        <My:TextBoxNewBehavior/>
    </Setter.Value>
</Setter> 
```

我的行为是这样的：

```
 public class TextBoxMyBehavior : Behavior<TextBox>
    {
        public TextBoxMyBehavior()
        {
        }

        protected override void OnAttached()
        {
            base.OnAttached();
            AssociatedObject.KeyUp += new System.Windows.Input.KeyEventHandler(AssociatedObject_KeyUp);
        }

        void AssociatedObject_KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
        {
            if (e.Key == Key.Enter)
            {
                //....
            }
        }

        protected override void OnDetaching()
        {
            base.OnDetaching();
            AssociatedObject.KeyUp -= new System.Windows.Input.KeyEventHandler(AssociatedObject_KeyUp);
        }
    } 
```

TextBoxMyBehavior 看起来不像是智能出来的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:22:13.160

**运行时错误的解释**

```
<Setter Property="i:Interaction.Behaviors">
    <Setter.Value>
        <My:TextBoxNewBehavior/>
    </Setter.Value>
</Setter> 
```

1.  您不能同时将行为附加到不同的对象。
2.  Interaction.Behaviors 是您无法设置的只读集合。

写作

```
<i:Interaction.Behaviors>
     <My:TextBoxNewBehavior/>
</i:Interaction.Behaviors> 
```

意味着使用 XAML 中的隐式集合语法，它在 Behaviors 集合上调用 Add()。

**解决方案**

编写您自己的附加属性，使用样式设置器设置，如下所示：

```
<Setter Property="my:TextBoxOptions.UseMyBehavior" Value="true" /> 
```

然后您可以在附加的属性代码中创建和设置行为：

```
private static void OnUseMyBehaviorPropertyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
{
    if (e.NewValue.Equals(true))
        Interaction.GetBehaviors(dependencyObject).Add(new TextBoxNewBehavior());
    else { /*remove from behaviors if needed*/ }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T14:53:05.780

我已经在 Windows 10 项目中解决了它，但它应该与 SL 兼容。

```
<Page.Resources>
    <i:BehaviorCollection x:Key="behaviors">
        <core:EventTriggerBehavior EventName="Tapped">
            <core:InvokeCommandAction Command="{Binding SetModeToAll}" />
        </core:EventTriggerBehavior>
    </i:BehaviorCollection>

    <Style TargetType="TextBlock" x:Key="textblockstyle">
        <Setter Property="i:Interaction.Behaviors" Value="{StaticResource behaviors}">
        </Setter>
    </Style>
</Page.Resources>

<Grid x:Name="LayoutRoot" Background="Transparent">
    <TextBlock Text="Testing" Foreground="Red" FontSize="20" Style="{StaticResource textblockstyle}">
    </TextBlock >
</Grid> 
```

如果我以任何其他方式写作，它就不起作用，但作为一种资源，这个集合是有效的！

# django - 在 django 中使用布尔值作为过滤器时遇到问题

> ID：11056468
> 
> 赞同：1
> 
> 时间：2012-06-15T18:42:43.853
> 
> 标签：django, postgresql

我最近将一个 django 项目从 mysql 迁移到 postgresql，并在此过程中破坏了正在使用的过滤器。旧过滤器如下所示：

```
return (model_class.objects.filter(status='0',ir=1).count() * 2) +
model_class.objects.filter(status='1',ir=1).count() 
```

但是，现在会产生一个错误，指出：

```
 DatabaseError at /report/trip/publication
 operator does not exist: integer = boolean
 LINE 1: ...AND "publication"."ir" = true )
                               ^
 HINT:  No operator matches the given name and argument type(s). 
 You might need to add explicit type casts. 
```

我尝试设置 ir = '1'，甚至尝试将其设置为 '3'（为什么不设置？），但无论我将其设置为什么，它都会不断抛出相同的错误消息，这似乎暗示有别的东西正在把它搞砸。我确实将它设置为“返回无”，这给了我一个未经过滤的列表。我能看到的唯一可能的冲突是顶部有一个声明，但这不应该是一个问题（以前不是）：

```
 class Publication(Unit):  
    ir = models.BooleanField(default=False,null=False,verbose_name="Is IR") 
```

我的 postgres 数据库具有以下数据类型的字段：

```
 status  | character varying
 ir      | integer 
```

不用说，我非常困惑。我没有设置它 - 我只是想修复它（并在此过程中学习一些东西）。过滤这个的正确方法是什么？对于任何反馈，我们都表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:19:47.410

在 Postgres 中，BooleanField 是“布尔”类型。

快速修复是更改 Postgres 中的列。

# r - 如何处理这些数据框中的这些数据并进行二元逻辑回归？

> ID：11056470
> 
> 赞同：1
> 
> 时间：2012-06-15T18:42:53.507
> 
> 标签：r

数据保存在`.txt`. 同一文本中保存了 200 个单词。如何将这些原材料输入 R 并进行二元物流回归`each of these words`？

```
num 0 0.010752688172
num 0 0.003300330033

thanksgiving 0 0.0123456790123
thanksgiving 0 0.0016339869281
thanksgiving 0 0.00338983050847

off 0 0.00431034482759
off 0 0.00302114803625
off 1 0.001100110011
off 0 0.00377358490566
off 1 0.00166112956811
off 1 0.00281690140845
off 0 0.00564971751412
off 0 0.00112994350282
off 0 0.003300330033
off 0 0.0042735042735
off 1 0.00326797385621
off 0 0.00159489633174
off 0 0.00378787878788 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:29:07.807

好吧，我很懒，所以：

```
allwords <- unique(dataframe[,1])
firstword <- dataframe[dataframe[,1]==allwords[1],] 
```

等将按单词分解您的数据。但是您不需要创建`firstword`, , ... 因为使用其中一个函数来为每个值执行回归函数`secondword`同样容易`apply``allwords`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:50:13.790

这是我如何使用`plyr`包：

```
# Load the plyr library
library(plyr)

# Read in the data
allwords <- read.table("words.txt")

# Name the variables more meaningfully than this
names(allwords) <- c("word", "y", "x")

# dlply iterates over the data.frame, splitting by "word", 
# and running a glm with the arguments formula = y ~ x and family = binomial
# and returns a list of the resulting glm objects
models <- dlply(allwords,
                .var = "word",
                .fun = glm, formula = y ~ x, family = binomial)

# It's then easy to iterate over that list using lapply, llply, ldply, etc.
# (depending on what you want back out)
# Summarize:
llply(models, summary)

# Get all the coefficients
ldply(models, coef)

# Get AICs
# Not that you can compare these among word-models, but you get the idea.
ldply(models, AIC)

# Or, if you want to work with a particular model
models$num 
```

# dojo - dojoAttachpoint 和 id 有什么区别。

> ID：11056477
> 
> 赞同：0
> 
> 时间：2012-06-15T18:43:12.557
> 
> 标签：dojo

```
<div dojoType="dojo.Dialog" id="alarmCatDialog" bgColor="#FFFFFF" 
     bgOpacity="0.4" toggle="standard">
   <div class='dijitInline'>
       <input type='input' class='dateWidgetInput' 
        dojoAttachPoint='numberOfDateNode' selected="true" />
</div> 
```

如何显示我试过的这个对话框`dijit.byId('alarmCatDialog').show();`

上面的代码是一个模板，我`dijit.byId('alarmCatDialog').show()`从 .js 文件中调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:04:10.483

`dojoAttachPoint`在模板中使用，并且可以使用属性的值在小部件中访问。

因此，如果您发布的 html 用于小部件模板，那么您应该使用`dojoAttachPoint`. 在小部件的 js 文件中：

```
dojo.declare("MyWidget", [dijit._Widget, dijit._Templated], {

  alarmCatDialog: null, // the dialog widget will be attached to this field.

  templateString: dojo.cache(...), 

  widgetsInTemplate: true,

  postCreate: function() {
    this.inherited(arguments);

    this.alarmCatDialog.show();
  }
}); 
```

您不应该在小部件中使用 id，因为 id 在所有 dom 节点中必须是唯一的。在小部件中使用它会将小部件的使用限制为在页面上一次。

此外，由于您的模板中有小部件，您应该使用`widgetsInTemplate: true`

[http://dojotoolkit.org/reference-guide/1.7/dijit/_Templated.html#widgetsintemplate](http://dojotoolkit.org/reference-guide/1.7/dijit/_Templated.html#widgetsintemplate)

# c# - 如何将 DebuggerHidden 与迭代器块方法结合使用？

> ID：11056478
> 
> 赞同：5
> 
> 时间：2012-06-15T18:43:21.633
> 
> 标签：c#, visual-studio-2010, debugging, visual-studio-debugging

`DebuggerHidden`标记辅助方法非常方便，确保未处理的异常在方便的地方停止调试器：

                  ![在此处输入图像描述](../Images/b6c9ca21920d0d23eacb10b425a6b88a.png)

不幸的是，这似乎不适用于迭代器块：

          ![在此处输入图像描述](../Images/fe62cc6f3690b44d766b5da93d3d6a80.png)

（如果是这样，调试器将`in`在第二个示例中显示为当前语句）。

虽然这显然是 Visual Studio 的一个限制（我已经为此[提交了一份报告](https://connect.microsoft.com/VisualStudio/feedback/details/749328/debuggerhidden-has-no-effect-on-methods-that-are-iterator-blocks)），但有没有什么方法可以在仍然使用迭代器块的同时解决这个问题？

我猜这是因为编译器生成的实现迭代器的代码没有用`[DebuggerHidden]`. 也许有一些方法可以说服编译器这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:43:17.313

也许不是您希望的答案，但作为一种解决方法，它可以获得一些分数......不确定您是否已经梦想过这一点。

有一个帮助类来解开您的迭代器，然后使用扩展方法使包装器在您的迭代器上发挥作用。我处理异常并重新抛出。在 VS2010 中，我不得不奇怪地取消选中调试选项“仅启用我的代码”以获得接近 OP 要求的行为。选中该选项仍然会使您进入实际的迭代器，但 ik 看起来像一行太远了。

这使得这个答案更像是一个实验，以证明和支持场景工作需要更好的编译器支持。

扩展方法助手类：

```
public static class HiddenHelper
{
    public static HiddenEnumerator<T> Hide<T>(this IEnumerable<T> enu )
    {
        return HiddenEnumerator<T>.Enumerable(enu);
    }
} 
```

包装：

```
public class HiddenEnumerator<T> : IEnumerable<T>, IEnumerator<T>
    {
        IEnumerator<T> _actual;
        private HiddenEnumerator(IEnumerable<T> enu)
        {
            _actual = enu.GetEnumerator();
        }

        public static HiddenEnumerator<T> Enumerable(IEnumerable<T> enu )
        {
            return new HiddenEnumerator<T>(enu);
        }

        public T Current
        {
            [DebuggerHidden]
            get 
            { 
                T someThing = default(T);
                try
                {
                   someThing = _actual.Current;
                }
                catch
                {
                   throw new Exception();
                }
                return someThing; 
            }
        }

        public IEnumerator<T> GetEnumerator()
        {
            return this;
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            throw new NotImplementedException();
        }

        public void Dispose()
        {
            _actual.Dispose();
        }

        object IEnumerator.Current
        {
            get { return _actual.Current; }
        }

        [DebuggerHidden]
        public bool MoveNext()
        {
                bool move = false;
                try
                {
                    move = _actual.MoveNext();
                }
                catch
                {
                     throw new IndexOutOfRangeException();
                }
               return move;
        }

        public void Reset()
        {
            _actual.Reset();
        }
   } 
```

用法：

```
 public IEnumerable<int> Power(int number, int exponent)
        {
            int counter = 0;
            int result = 1;
            while (counter++ < exponent)
            {
                if (result>Int16.MaxValue) throw new Exception();
                result = result * number;
                yield return result;
            }
        }

        public void UseIt()
        {
            foreach(var i in Power(Int32.MaxValue-1,5).Hide())
            {
                Debug.WriteLine(i);
            }
        } 
```

# sharepoint - 自定义 SharePoint 保存按钮

> ID：11056481
> 
> 赞同：0
> 
> 时间：2012-06-15T18:43:35.190
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-api

帮助..

我有一个自定义的新列表项 ASPX 表单。该表单运行良好，但我需要在列表项名称周围添加自定义功能。我想在用户单击保存按钮时以编程方式命名该项目。我已经阅读了一些想法，但没有一个符合要求。

1.  我已经阅读了许多关于从 SharePoint.WebControls.SaveButton 继承以及在覆盖的 SaveItem 函数中插入代码的文章。但是，由于我的 List Name 字段超出了 SaveButton 控件的范围，我可以使用它来修改 List Item 名称。

2.  我尝试编写自己的保存按钮。Click 事件在调用 SaveButton.SaveItem 函数之前保存 ListItem 名称。这可行，但我必须仍然必须在页面上有 Name SharePoint:FormField。如果有人在 FormField 中输入值，它会覆盖我的自定义名称。我还需要研究一种方法来关闭新项目表单并刷新我的列表，SharePoint:SaveButton 可以很好地形成我。

想法，通过，建议？？？

如果 Microsoft 没有保护 SaveItem 调用，这将非常容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:40:35.303

只创建一个处理 OnItemAdding 事件的事件接收器会更容易。您可以将字段值注入到属性中，它们将保存在项目中。

# php - 为什么 phpmyadmin 的 alter table 语句需要这么长时间

> ID：11056482
> 
> 赞同：0
> 
> 时间：2012-06-15T18:43:44.473
> 
> 标签：php, google-maps-markers

已经一个小时了，我有一张有 400 万行的表格。我忘了添加一列；因此，我编写了一个 alter table 语句来添加该列。

```
ALTER TABLE gblah
ADD zipcode varchar(5) 
```

我不知道为什么这需要永远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:17:54.867

如果您通过 phpMyAdmin 查看 MySQL 进程，您会看到整个表被复制、更改，然后复制回来。一张大桌子需要一段时间。此外，如果您没有制作副本的硬盘空间，ALTER 查询将失败。我了解到尝试在小型服务器上更改 2GB 表的艰难方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:48:12.333

MySQL 中的任何 alter 语句所花费的时间都与表中的行数成正比。每当您修改表时，它都需要将该列添加到每条记录中，因此它必须触及每条记录。这不是 PHPMyAdmin 的功能。此外，任何时候添加列时，都应该在应用程序脱机的情况下进行，如果有任何锁争用会阻碍 alter 语句。

虽然，4M 的行数并不多，但存在争用，并且取决于您的结构和数据库引擎，这可能需要一段时间（我认为 MyISAM 更改需要比 innodb 更长的时间，因为 MyISAM 需要整个表锁并且处理并发性不太好）。

# perl - 我使用哪个模块来获取 HTML 元素的内容？

> ID：11056483
> 
> 赞同：0
> 
> 时间：2012-06-15T18:44:04.037
> 
> 标签：perl, web-scraping

我有一个 Internet Explorer 导航到一个页面，并且能够以数组的形式获取该页面。我想要做的是获取 div 文件的内容，例如页面返回

```
<div class="someClass">Text in div</div> 
```

我想得到那个文本，我该怎么做？我想试试

```
->content("someClass"); 
```

但这行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:50:31.680

使用[Web::Query](http://p3rl.org/Web%3a%3aQuery)：

```
use Web::Query qw();
use WWW::Mechanize qw();
my $mech = WWW::Mechanize->new;
$mech->get('file:///tmp/so11056483.html');
Web::Query
    ->new_from_html($mech->content)
    ->find('div.someClass')
    ->text 
```

表达式返回字符串`Text in div`

# wordpress - Wordpress SEO插件问题

> ID：11056486
> 
> 赞同：0
> 
> 时间：2012-06-15T18:44:21.267
> 
> 标签：wordpress

我在我正在处理的 WordPress 主题上使用 Wordpress SEO 插件，但在安装和设置之后，它仍然不会生成元标记。任何想法可能是什么问题。我的标头代码如下所示

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" <?php language_attributes() ?>>

<title><?php bloginfo('name'); ?> <?php wp_title(); ?></title>

<meta http-equiv="Content-Type" content="<?php bloginfo('html_type'); ?>; charset=<?php bloginfo('charset'); ?>" />

<link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" type="text/css" media="screen,projection" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/s3Slider.js"></script>

<script  type="text/javascript" src="<?php bloginfo('template_directory'); ?>/SpryAssets/SpryValidationTextField.js" ></script>

<script  type="text/javascript" src="<?php bloginfo('template_directory'); ?>/SpryAssets/SpryValidationTextarea.js"></script>

<script  type="text/javascript" src="<?php bloginfo('template_directory'); ?>/SpryAssets/SpryValidationConfirm.js"></script>

<script type="text/javascript">

    $(document).ready(function() {

        $('#slider').s3Slider({

            timeOut: 8000

        });

    });

</script>

<script type="text/javascript">

   $("#navbar li a").find("a[href='"+window.location.href+"']").each(function(){

$(this).addClass("current")

</script>

</head>

<div id="rack">

   <div id="header">

    <div id="lonum">

    <div id="logo"><a href="http://www.southjerseydentures.com"><img src="<?php bloginfo('stylesheet_directory'); ?>/images/Logo.png" height="176" alt="South Jersey Dentures" border="0"></a></div><!-- End Logo -->

    <div id="number"><img src="<?php bloginfo('stylesheet_directory'); ?>/images/number.png" alt="South Jersey Dentures Phone Number" border="0"></div><!-- End Number -->

    </div><!-- End Lonum -->

     <div id="navbar">

    <?php wp_nav_menu (array('menu'=>'custom_menu'

    ,'menu_class' => 'nav'));?>

     </div><!-- End NavBar -->

   </div><!-- End Header --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T22:10:15.220

放入`<?php wp_head(); ?>`_`<head>...</head>`

# c# - 您可以在 Windows 8 Metro 中混合语言堆栈吗？

> ID：11056488
> 
> 赞同：3
> 
> 时间：2012-06-15T18:44:30.230
> 
> 标签：c#, javascript, windows-8, microsoft-metro

您可以在 Windows 8 Metro 中执行 HTML/C#、HTML/C++ 或 XAML/Javascript 吗？

我知道我可以拥有一个 HTML/JS，其中可能包含一个恰好是 C# 或 C++ 的 WinRT .winMD“DLL”，并从 JS 调用它，但还有其他方法吗？

我还认为我可以制作一个包含 Javascript 函数的 WinMD Dll 并从 XAML/C# 或 XAML/C++ 调用它，但这些是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:02:27.793

winmd 是在 javascript 中使用 c#/c++ 的唯一方法。c#/c++ 中不支持 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:09:31.757

语言/渲染技术的 3x3 矩阵中并非所有组合都允许。

*   HTML/JS/CSS 只能使用 JS。
*   XAML 只能使用 .NET (C#/VB) 和 C++。
*   DirectX 只能使用 C++。

您可以使用 C++ 或 .NET (C#/VB) 而不是 JavaScript 创建 Win RT 组件。您可以在 JavaScript 应用程序以及 .NET 或 C++ 应用程序中使用这些组件。

[请参阅此处](http://msdn.microsoft.com/en-us/library/windows/apps/br230301%28v=vs.110%29.aspx)创建 C#/VB 模块的文档。

# cocos2d-iphone - Cocos2D 2.0 - 重置 CCSprite 旋转、缩放、倾斜等

> ID：11056491
> 
> 赞同：0
> 
> 时间：2012-06-15T18:44:41.670
> 
> 标签：cocos2d-iphone

我有一个修改了所有属性的 CCSprite：旋转、缩放、skewX、skewY、位置等。

如何将该层重置为初始状态（创建时）？

我试过用

```
[mySprite setTransform:CGAffineTransformIdentity]; 
```

但 Xcode 抱怨这在 CCNode/CCSprite 中不存在

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:48:59.540

您可以获取 Steffen 的代码并将其包装在一个类别中，这样您就可以有效地`resetTransform`为所有节点提供一个方法。

```
@interface CCNode (ResetTransform)
-(void) resetTransform;
@end

@implementation CCNode (ResetTransform)
-(void) resetTransform
{
    self.rotation = 0.0f;
    self.scale = 1.0f;
    self.skewX = 0.0f;
    self.skewY = 0.0f;
    self.position = CGPointZero;
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:57:26.130

为什么不这样做？

```
mySprite.rotation = 0.0f;
mySprite.scale = 1.0f;
mySprite.skewX = 0.0f;
mySprite.skewY = 0.0f;
mySprite.position = CGPointZero; 
```

# scheme - 如何将此方案代码转换为 Racket

> ID：11056493
> 
> 赞同：3
> 
> 时间：2012-06-15T18:44:45.597
> 
> 标签：scheme, racket

我是新来的计划。这是麻省理工学院 SICP 课程的代码示例。

```
 (define (+ x y)
  (if (= x 0)
      y
      (+ (-1+ x) (1+ y)))) 
```

如何将其转换为球拍代码？我想转换为 Racket，因为我使用 DrRacket 来运行代码，我喜欢这样。它一直工作到现在，但抱怨方案的增量运算符。

我得到的错误是：

1.  `define-values: cannot change constant variable: +`
2.  `reference to undefined identifier: -1+`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T18:58:29.993

这将在球拍中正常工作：

```
(define (add x y)
  (if (= x 0)
      y
      (add (sub1 x) (add1 y)))) 
```

一些评论：

*   该过程的名称`+`会很麻烦，因为它会与Scheme中的原始添加操作发生冲突；如果您使用不同的名称会更简单，例如`add`（这将修复第一个错误）
*   `-1+`不是 Racket 中的程序，将其替换为`sub1`（这将修复第二个错误）。或者，您可以为此过程定义一个别名，如下所示：`(define -1+ sub1)`
*   `1+`不是 Racket 中的程序，请将其替换为`add1`. 或者，您可以为此过程定义一个别名，如下所示：`(define 1+ add1)`
*   可选：而不是`(= x 0)`你可以写`(zero? x)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:55:44.973

要修复第二个错误，请更改`(-1+ x)`为`(- x 1)`和。[这个答案](https://stackoverflow.com/a/624878/777929)应该可以帮助您解决第一个错误。`(1+ y)``(+ y 1)`

如果你想使用`-1+`and `1+`，你可以自己定义它们：

```
(define (1+ x) (+ x 1))
(define (-1+ x) (- x 1)) 
```

# sql-server - 可选列中的空值

> ID：11056494
> 
> 赞同：2
> 
> 时间：2012-06-15T18:44:48.513
> 
> 标签：sql-server, database-design

假设我有一个 Table1，包含三列：ID（主键、身份）、A 和 B

现在，假设我有 3 种方法，假设它们在列方面没有任何共同之处：

方法一：C、D、E

方法 2：F、G、H、I

方法3：J

我可以制作一张表：ID、A、B、C、D、E、F、G、H、I、J、M

其中 M 是方法的名称（或方法 ID）。

但是，如果 90% 的时间使用方法 3，则会有很多空值。
这是一个问题吗？如果是这样，有没有更好的方法来设置它？

如果我让每个方法都有自己的表实体，我如何确保每个 ID 都有一个与之匹配的方法？

如果我将其保留为一张表，如果 M 为 1，我如何确保仅填写 C、D、E 并且 F 到 J 为 NULL？

* * *

好的，似乎有些人很难抽象地思考，所以我将创建一个随机的具体示例来应用上述内容：

假设我有人们进行锻炼的记录。
每条记录总是有一个 ID（用于唯一标识事件）、一个 TIME_STARTED 和 TIME_ENDED。

但是，根据他们进行的练习，需要不同的属性。假设只有三个练习：

椭圆机：INCLINE、LEVEL、SPEED

仰卧起坐：User_Weight、Reps、Delay、Extra_Weight

硬拉：Weight_Lifted

对于每个 ID，可能只有一个“方法”。应用这一点，请参阅上述问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:04:12.100

It sounds like you have a [supertype/subtype](http://technet.microsoft.com/en-us/library/cc505839.aspx) situation here. In this case, Table1 holds your supertype, and you would want to create a different table to hold each of your subtypes. The PK on these subtype tables would also be an FK to the supertype table. So you would have something like this:

```
Supertype_table
|    ID(PK)   |  A  |  B  |

Subtype1_table
|  ID(PK&FK)  |  C  |  D  |  E  |

Subtype2_table
|  ID(PK&FK)  |  F  |  G  |  H  |  I  |

Subtype3_table
|  ID(PK&FK)  |  J  | 
```

The point of this schema is to make sure that you don't have a bunch of rows which are mostly nulls. For each method, you would have to write a separate query that would insert/update the appropriate table. With SQL Server, you can make a view which combines all these tables and abstracts away any joins:

```
CREATE VIEW MyView
SELECT Super.ID, Super.A, Super.B, 
Sub1.C, Sub1.D, Sub1.E, 
Sub2.F, Sub2.G, Sub2.H, Sub2.I, 
Sub3.J
FROM Supertype_table as Super
LEFT OUTER JOIN Subtype1_table as Sub1 on Super.ID = Sub1.ID
LEFT OUTER JOIN Subtype2_table as Sub2 on Super.ID = Sub2.ID
LEFT OUTER JOIN Subtype3_table as Sub3 on Super.ID = Sub3.ID 
```

So then you could just write something like:

```
SELECT ID, A, B, J
FROM MyView
WHERE J is not null 
```

**EDIT : For OP's comment**

In order to ensure that each ID is in one and only one table, you need some kind of identifier on the supertype table. So if you had a column called TypeID, you would create the function:

```
CREATE FUNCTION [dbo].[SubtypeofSuperID](@ID int)
RETURNS int
AS
BEGIN
  DECLARE @TypeID int;

    SELECT @TypeID = TypeID 
    FROM Supertype_table
    WHERE ID = @ID

  RETURN @TypeID 
END 
```

Then, using that, you can create a check on each of the subtype tables:

```
ALTER TABLE Subtype1_table CONSTRAINT [CK_CorrectSubtype1]
CHECK ( [dbo].[SubtypeofSuperID]([ID]) = 1 )
ALTER TABLE Subtype2_table CONSTRAINT [CK_CorrectSubtype2]
CHECK ( [dbo].[SubtypeofSuperID]([ID]) = 2 )
ALTER TABLE Subtype3_table CONSTRAINT [CK_CorrectSubtype3]
CHECK ( [dbo].[SubtypeofSuperID]([ID]) = 3 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:36:16.897

有几种方法...

首先，Jason 的回答是其中之一——将你的设计分成多个表——这对于大多数事情来说都是一个很好的方法。（又名更“标准化”的方法）

备择方案...

1）您可以在最后一个字段中包含一串名称-值对。例如：

```
ID   Method   DateTimeStart   DateTimeEnd   ValueString
1    1        2012-01-01...   2012-01-01... C:value,D:value,E:value
2    2        2012-01-01...   2012-01-01... F:value,G:value,H:value,I:value 
```

因此，在您无法提前计划值类型的情况下，这可能会很方便。例如，也许您需要能够即时决定开始为方法 1 记录“W”值，而像在更规范化的设计中那样进行结构模型是不可行的。

这是我们的电子签名表单开发人员使用的常用方法。您可以想象一个网络表单，例如“部门休假申请”，有人将填写并以电子方式发送以供批准。然后出现了一个客户，他希望他们构建一个“采购订单”网络表单，该表单将具有必须记录的不同字段和值。他们没有为此创建一个全新的表（或向现有表添加列等），而是使用名称-值-对模型将所有表单数据存储在同一个表中，无论它是哪种形式。

2）如果您不信任在单个大表上运行插入的人员/进程，您可以使用表触发器来强制执行完整性。例如，更新前触发器可以检查方法编号，然后通过取消任何不适当的数据值来修改人员或进程试图插入的数据。

FWIW

# visual-studio-2008 - Visual Studio 2008 - StarTeam 集成

> ID：11056497
> 
> 赞同：0
> 
> 时间：2012-06-15T18:45:09.543
> 
> 标签：visual-studio-2008, version-control, starteam

我想知道 VS 2008 中是否有任何用于 StarTeam 集成的插件？我安装了 StarTeam Client 2009，但项目文件的准确性非常差。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:59:39.527

StarTeam 拥有一整套适用于 VS 2008、2010 和 2012 的集成工具，可以从以下位置找到并下载这些工具，

[http://supportline.microfocus.com/websync/StarTeam2009EA.aspx](http://supportline.microfocus.com/websync/StarTeam2009EA.aspx)

并浏览到 Visual Studio 集成部分。

谢谢。

# gradle - 如果存储库中不存在工件，我该如何选择构建它？

> ID：11056498
> 
> 赞同：2
> 
> 时间：2012-06-15T18:45:11.900
> 
> 标签：gradle, dependency-management

我正在使用 Gradle 编写构建脚本。

我们公司有多个项目，其中一些项目相互依赖。

过去，每个项目都会查看我们的存储库以解决依赖关系。如果存储库中不存在依赖项，或者我们知道存储库已过期，我们希望提供构建依赖项的选项。

比如说，我们有项目 A 和项目 B。项目 B 依赖于 A。

当我们修改项目 A 时，我们会将其工件部署到我们的存储库中。然后，每当我们构建项目 B 时，我们都会拉下 A 以满足我们的依赖关系。

但是，B 上的一些工作可能需要同时对 A 进行一些更新。我们*可以*构建和部署 A，然后构建 B。我们想做*的*是将 A 构建为 B 的一部分，并避免（或至少推迟）A 的部署，并将其作为构建 B 的必要性而删除。

换句话说，由于构建 A 意味着我们的工件已经在本地机器上，通过我们的存储库部署和检索 A 以满足 B 似乎过度，有时是不方便的。

我们对 Gradle 的理解还处于早期阶段；我们正在从 Maven 迁移。

是否有任何 Gradle 专家 (;o)) 可以提供建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:04:29.463

灵活的项目依赖关系将是 Gradle 1.2 及更高版本的主要关注点。从 Gradle 1.0 开始，您必须自己实现它。这是可行的（无需接触 Gradle 代码库），但可能需要大量的工作和 Gradle 技能。

# sql - 仅当设置了变量时，是否可以在 select 语句中返回列？

> ID：11056501
> 
> 赞同：0
> 
> 时间：2012-06-15T18:45:20.963
> 
> 标签：sql, sql-server, tsql

基本上，我想知道是否可以接受这个

```
IF @Value = 1
    SELECT col1, col2 FROM MyTable
ELSE
    SELECT col2 FROM MyTable 
```

并在一个声明中做到这一点？就像是

```
SELECT IF(@Value = 1 col1), col2 FROM MyTable 
```

我试过这个

```
SELECT case @Value when 1 then col1 end, col2 FROM MyTable 
```

它总是返回 2 列，但当 @Value 不为 1 时，第一列将为空。我希望它仅在 @Value 为 1 时返回 2 列，其余时间为 1 列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:50:10.760

使用动态 SQL，是的。

```
DECLARE @sql NVARCHAR(MAX);
SELECT @sql = N'SELECT ' + CASE WHEN @Value = 1 THEN
  'col1, ' ELSE '' END + 'col2 FROM dbo.MyTable;';
PRINT @sql;
--EXEC sp_executesql @sql; 
```

如果没有动态 SQL，您将无法真正改变结果集的形状。

# css - joomla 多类别中的不同 CSS

> ID：11056507
> 
> 赞同：-1
> 
> 时间：2012-06-15T18:46:09.683
> 
> 标签：css, joomla

我有一个 joomla 网站，但我的类别有问题。特定类别具有不同的外观。

当我比较 html 时，这个类别没有一些 div/class`.art-postcontent`等。

为什么有些类别没有相同的 div？

### 编辑

如果我更改项目顺序，我会修复 CSS 问题，但我需要`most recent first`

[![ss](../Images/704cdfe13381dbeb78d36a75190e6ed8.png)](https://i.stack.imgur.com/rkBbJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:36:35.297

Joomla 是一个复杂的 CMS，能够根据大量事物（组件、模块、插件等）生成不同的 HTML。

如果您不熟悉 PHP，最好的办法是从管理界面查看可能影响您感兴趣的类别的任何模块/组件/插件、文章等，并查看是否有任何原因导致冲突。

如果您没有在那里发现它，那么只需开始一个一个地禁用模块/组件/插件，直到罪魁祸首出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T00:11:26.290

问题不在于该类别，问题`<div>`在于该类别的一篇文章中。

我删除了这个 div 并解决了这个问题。

# mysql - 没有键的mysql连接表

> ID：11056509
> 
> 赞同：1
> 
> 时间：2012-06-15T18:46:10.260
> 
> 标签：mysql, join

基本问题：如何加入 2 个表以获得以下输出？

```
Table1:
"type"
red
blue
big
small 
```

===

```
Table2:
"object"
cat
person
chair 
```

===

```
Output:
red cat 
blue cat
big cat
small cat
red person
blue person
big person
small person
red chair
blue chair
big chair
small chair 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T18:47:52.693

```
SELECT * FROM Table1 CROSS JOIN Table2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:19:37.893

```
SELECT CONCAT(t1.type,' ',t2.object) as `Output:`
  FROM table1 t1 CROSS JOIN table2 t2 
```

（该关键字`CROSS`在 mysql 中是可选的，但它确实用于记录您打算使用笛卡尔积，这对于阅读此语句的人来说可能是有用的信息，他们通常希望看到一个连接谓词。

如果您需要按特定顺序返回的结果集，请包含一个`ORDER BY`子句。按照显示的顺序对其进行排序是一个相对复杂的表达式，但可以做到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:48:55.487

```
array_combine(table1, table2); 
```

[这](http://us3.php.net/manual/en/function.array-combine.php)是更多信息的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T18:49:00.140

我猜笛卡尔积：

```
SELECT t1.type, t2.object FROM Table1 t1, Table2 t2 
```

# ruby-on-rails - 在条件路由期间未在 Rails 3 中设置 request.subdomain

> ID：11056511
> 
> 赞同：6
> 
> 时间：2012-06-15T18:46:20.463
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, subdomain

我正在尝试根据[Ryan Bates 在 subdomains 上的截屏视频](http://railscasts.com/episodes/221-subdomains-in-rails-3)在 Rails 3 中设置子域。但是它对我不起作用。我有以下设置：

```
# routes.rb
constraints(Subdomain) do
  get 'devices' => 'devices#all'
end

# lib/subdomain.rb
class Subdomain
  def self.matches?(request)
    # binding.pry
    request.subdomain.present? && request.subdomain == "admin"
  end
end 
```

加载 url`admin.localhost:3000/devices`应该将我路由到`devices#all`，但是我收到路由错误`Routing Error No route matches [GET] "/devices"`显然我的路由不起作用。

我在上面的注释设置了一个`pry`调试会话，它被命中，所以我的约束正在工作，但我得到以下输出：

```
[1] pry(Subdomain)> request.subdomain
=> ""
[2] pry(Subdomain)> request.subdomains
=> []
[3] pry(Subdomain)> request.host
=> "admin.localhost" 
```

因此，rails 没有获取 url 的管理部分并将其放入子域变量中。虽然我可以轻松地使用主机值来过滤到管理路由，但我想保持干净和正确。

为什么 rails 没有设置子域值？

* * *

**编辑**

[jdoe](https://stackoverflow.com/a/11056789/33226)和coreyward的[答案](https://stackoverflow.com/a/11056793/33226)都是正确的。让我失望的是，我也在使用`pow`并`xip.io`访问该网站并遇到同样的错误。这很奇怪，因为`http://admin.app_name.192.168.1.68.xip.io/devices`tld > 1。发生的事情是 was 的子域`xip`，`admin.app_name.192.168.1.68`考虑到匹配逻辑，它也会失败并且不会路由。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T19:10:27.890

**因为 Rails 认为没有子域。**

Rails expects you to provide a [Top-Level Domain](https://en.wikipedia.org/wiki/Top-level_domain) (TLD) length for TLDs with more than 1 dot. For example, if you had `bbc.co.uk` it would pickup "bbc" as the subdomain unless you specified the TLD length is 2, in which case the subdomain would be blank:

```
request.subdomain(2) #=> "" 
```

This is also why you're seeing `subdomains` return an empty array: the last two segments are being discarded automatically. You could specify `0` as the TLD length to get back "admin", but that code will break in production with a real domain name, so I don't recommend it.

I recommend using a domain like admin.yourapp.dev that is routed back to your computer via localhost to make your app properly detect a subdomain. Just edit /etc/hosts to do it simply.

If you're curious, [here is the Rails source for the `subdomain` method](https://github.com/rails/rails/blob/5f67cfeda116f2b932ef72781420aa37e62437ca/actionpack/lib/action_dispatch/http/url.rb#L169).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T19:10:08.850

尝试使用特殊地址：[http ://admin.lvh.me:3000/devices](http://admin.lvh.me:3000/devices)

或设置：

```
config.action_dispatch.tld_length = 0 
```

在你的 development.rb 中并重新启动你的应用程序。

# vba - Microsoft Excel 宏在运行时更改单元格的值

> ID：11056513
> 
> 赞同：1
> 
> 时间：2012-06-15T18:46:28.887
> 
> 标签：vba, excel

所以，我必须创建一个宏来运行报告，并将所有具有相同发票编号的记录放在一行中，其中包含日期、销售对象、同一张发票的所有行的总和编号的扩展定价、订单运费（如果适用）以及扩展定价和订单运费的总和。

它将采用这些值并将它们放入新表中。

这是我遇到问题的地方。在大多数情况下，宏似乎可以工作，但是一旦到达某个记录，它实际上将编号的发票（即（123456）更改为下一行的发票（即 123457）因此，123456 的发票不再是存在，而是与 123457 组合在一起。

我逐步完成了它，单元格应该没有理由改变值，因为它没有对任何其他单元格进行更改。有没有人有理由解释这样做的原因？

这是我的代码。提前致谢。

```
 Sub CombineInvoice()

    Dim InvoiceNum As String, InvoiceDate As String, SoldToAcct As String
    Dim ExtPrice As Double, OrderFreight As Double, OrderTotal As Double
    Dim WS2 As Worksheet

    Application.ScreenUpdating = False

    Set WS2 = Sheets.Add

    With Sheet1.Range("A1,C1,D1,BB1,BD1")
        .Copy Destination:=Sheet2.Range("A1:F1")
    End With

    Sheet1.Select

    InvoiceNum = Range("A2").Value
    InvoiceDate = Range("C2").Value
    SoldToAcct = Range("D2").Value

    Sheet2.Select
    Selection.Offset(0, 5).Value = "Order Total"
    Range("A2").Select
    Sheet1.Select
    Range("A2").Select

    Do
        'Set order freight
        OrderFreight = OrderFreight + Selection.Offset(0, 55)
        'Set invoice date
        InvoiceDate = Selection.Offset(0, 2)
        'Set Sold to account
        SoldToAcct = Selection.Offset(0, 3)
        'Get extended price
        Do Until Selection.Value <> InvoiceNum
            ExtPrice = ExtPrice + Selection.Offset(0, 53)
            'Make sure orderFreight is the same
            If (OrderFreight <> OrderFreight Or OrderFreight = 0) Then
                OrderFreight = OrderFreight + Selection.Offset(0, 55)
            Else
                OrderFreight = OrderFreight
            End If

            Selection.Offset(1, 0).Select
        Loop
        'Add Extended Price to Order Freight
        OrderTotal = ExtPrice + OrderFreight
        'Populate Sheet 2 with data
        Sheet2.Select
        With Selection
             .Value = InvoiceNum
             .Offset(0, 1).Value = InvoiceDate
             .Offset(0, 2).Value = SoldToAcct
             .Offset(0, 3).Value = ExtPrice
             .Offset(0, 4).Value = OrderFreight
             .Offset(0, 5).Value = OrderTotal
             .Offset(1, 0).Select
        End With
        'Return to sheet 1 for next invoice number
        Sheet1.Select
        Selection.Value = Selection.Offset(1, 0)
        InvoiceNum = Selection.Value
        ExtPrice = 0
        OrderFreight = 0
        If (Selection.Value = "") Then Exit Do

    Loop

    Application.ScreenUpdating = True

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:17:30.010

在第一个/外循环结束时，我们有这些代码行：

```
Sheet1.Select
Selection.Value = Selection.Offset(1, 0)
InvoiceNum = Selection.Value
ExtPrice = 0
OrderFreight = 0
If (Selection.Value = "") Then Exit Do 
```

OP 在评论中指出删除此行有效：

```
Selection.Value = Selection.Offset(1, 0) 
```

但是，由于`Selection.Value`在下一行使用，我也建议对下一行进行以下更改（@Scott 在评论中也建议了这一点）。

```
InvoiceNum = Selection.Offset(1, 0).Value 
```

# c++ - Metro Windows 8 C++ 应用程序可以包含内联汇编程序吗？

> ID：11056517
> 
> 赞同：7
> 
> 时间：2012-06-15T18:46:41.150
> 
> 标签：c++, windows-8, windows-runtime, inline-assembly, microsoft-metro

Metro Windows 8 应用程序可以包含内联汇编程序吗？Metro C++ 是本机的还是托管的，或者您可以像 C++/CLI 一样将它们混合使用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T19:45:59.567

Metro 风格的应用程序使用 WinRT，它是基于 COM 的旧 WinAPI 的替代品。您可以创建自己的 WinRT 组件，这些组件可以从 .NET 甚至 JavaScript 中使用——而且您无需付出额外的努力。至于现有的 C++ 代码，请注意 WinRT 中只提供了 Win32 的子集。

![在此处输入图像描述](../Images/a5e90d5f0514309349f4c5cc15d34604.png)

无论您是用 C/C++、C# 还是 JS 编写代码，当您使用 WinRT 时，您都不会直接调用 WinRT，但它会通过一个名为**projection**的绑定来处理您的 WinRT 组件适当地接触另一种语言。

![在此处输入图像描述](../Images/82bb7553669eae7fc2fd714167944ad8.png)

***“Metro Windows 8 应用程序可以包含内联汇编程序吗？”***
您可以*将汇编语言指令直接嵌入到您的 C 和 C++*代码中，因为您的编译器允许您这样做。将 Inline Assembler 视为一组编写为内联函数的汇编指令，这些指令**内置于编译器中**。您使用 WinRT 的事实在这里无关紧要。

可以帮助您的问题：
[为什么 WinRT 不受管理？](https://stackoverflow.com/q/7457371/1168156)
[WinRT 上的C++、C# 和 JavaScript](https://stackoverflow.com/q/7466303/1168156)
[什么是 WinRT 语言预测？](https://stackoverflow.com/q/7432905/1168156)

# objective-c - Objective C 或 C 中的线性回归

> ID：11056521
> 
> 赞同：1
> 
> 时间：2012-06-15T18:47:04.817
> 
> 标签：objective-c, c, linear-regression

我希望通过 Objective C 或 C 中的线性回归找到两个向量之间的斜率（它用于 xcode）。我试图反映的方程是在 matlab 中实现的。（这里的信息：http: [//www.mathworks.com/help/techdoc/data_analysis/f1-5937.html](http://www.mathworks.com/help/techdoc/data_analysis/f1-5937.html)）

在 matlab 中，代码看起来像这样（来自文档）：

x =

```
11
 7
14
11
43
38
61
75
38
28
12
18
18
17
19
32
42
57
44
114
35
11
13
10 
```

y =

```
11
13
17
13
51
46
132
135
88
36
12
27
19
15
36
47
65
66
55
145
58
12
9
9 
```

使用 polyfit 计算从 x 预测 y 的线性回归：

```
p = polyfit(x,y,1)

p =
    1.5229   -2.1911

p(1) is the slope and p(2) is the intercept of the linear predictor. 
```

我只需要与此类似的等式中的“p(1)”部分。

是否有来自某个框架的消息/方法可以用 C 语言计算类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:44:26.057

此外，对于这个和其他数学问题以及算法设计挑战，请查看 nr.com 上的 Numerical [Recipies](http://www.nr.com)。非常好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:51:32.523

您可以直接从此处的公式中对数据中的截距和梯度进行编码：在 C 中实现它们一点也不难

[http://en.wikipedia.org/wiki/Simple_linear_regression#Fitting_the_regression_line](http://en.wikipedia.org/wiki/Simple_linear_regression#Fitting_the_regression_line)

# java - 阅读偏好值

> ID：11056522
> 
> 赞同：-2
> 
> 时间：2012-06-15T18:47:15.243
> 
> 标签：java, android

我正在使用 android 并尝试从我的首选项文件中读取一个值。但是当我运行时，模拟器 **中出现一条消息。应用程序意外停止** 这里是我的首选项文件名 pref。它是 inres/xml

```
<?xml version="1.0" encoding="utf-8"?>
    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <CheckBoxPreference android:defaultValue="false"
             android:key="@string/first"/>
    </PreferenceScreen> 
```

这是我正在减少价值的主要活动。

```
package code.finalwork;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.EditText;

public class FinalWorkActivity extends Activity {
    private String pref_file="pref.xml";
EditText text=(EditText) findViewById(R.id.editText1);
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        SharedPreferences pref=getSharedPreferences(pref_file,Context.MODE_PRIVATE);
       Boolean val= pref.getBoolean("firstuse", true);
       if(val)
       {
            text.setText("first use");
       }
       else
       {
           text.setText("Not first use");
       }

    }
} 
```

请有人找出问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:50:49.603

在 setContentView 之后初始化 onCreate 函数中的文本（即 EditText ）。

把这条线放在后面`setContentView(R.layout.main);`

```
EditText text=(EditText) findViewById(R.id.editText1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:02:14.047

Here is how you could discover the answer to something like this yourself. Go to window->showview->logcat

Click on the line in red:

> E/AndroidRuntime(333): at com.test.testing.YourActivityName.(TesterActivity.java:11) 06-15 11:59:05.616:

You would see in red:

```
06-15 11:59:05.526: W/dalvikvm(333): threadid=1: thread exiting with uncaught exception     (group=0x40015560)
06-15 11:59:05.616: E/AndroidRuntime(333): FATAL EXCEPTION: main
06-15 11:59:05.616: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.test.testing/com.test.testing.TesterActivity}: java.lang.NullPointerException
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-15 11:59:05.616: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
06-15 11:59:05.616: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
06-15 11:59:05.616: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-15 11:59:05.616: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-15 11:59:05.616: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
06-15 11:59:05.616: E/AndroidRuntime(333): Caused by: java.lang.NullPointerException
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.app.Activity.findViewById(Activity.java:1647)
06-15 11:59:05.616: E/AndroidRuntime(333):  at com.test.testing.TesterActivity.<init>(TesterActivity.java:11)
06-15 11:59:05.616: E/AndroidRuntime(333):  at java.lang.Class.newInstanceImpl(Native Method)
06-15 11:59:05.616: E/AndroidRuntime(333):  at java.lang.Class.newInstance(Class.java:1409)
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
06-15 11:59:05.616: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
06-15 11:59:05.616: E/AndroidRuntime(333):  ... 11 more 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:55:09.027

尝试这个：

```
public class FinalWorkActivity extends Activity {
    private String pref_file="pref.xml";
    EditText text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        text = (EditText) findViewById(R.id.editText1);
        SharedPreferences pref=getSharedPreferences(pref_file,Context.MODE_PRIVATE);
        Boolean val= pref.getBoolean("firstuse", true);
        if(val) {
        text.setText("first use");
        } else {
        text.setText("Not first use");
        }
    }
} 
```

如果它没有修复，请发布错误日志。

编辑：请记住，保存您需要做的首选项：

```
SharedPreferences pref = getSharedPreferences(pref_file,Context.MODE_PRIVATE);
SharedPreferences.Editor editor = pref.edit();          
editor.putBoolean("firstuse", authToken);
editor.commit(); 
```

# bash - 如何选择性地不使用 .bashrc 中定义的别名

> ID：11056528
> 
> 赞同：1
> 
> 时间：2012-06-15T18:47:34.397
> 
> 标签：bash, alias

我在**.bashrc**中定义了许多别名。例如：

```
 alias ls='ls -la --color' 
```

问题是有时我想选择性地**不使用**扩展。例如，这样我就可以做一个：

```
ls -a 
```

我发现的一种解决方案是：

```
`which ls` -a 
```

当我不想**使用**别名时。但我想知道是否还有另一个既定的习惯用法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T18:48:50.733

转义用作别名的命令。

```
\ls -a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T18:58:54.907

使用内置*命令。*Bash 手册对此内置函数的描述如下：

> 使用 args 运行命令会抑制正常的 shell 函数查找。仅执行内置命令或在 PATH 中找到的命令。

# c# - 获取对象创建的当前对象

> ID：11056530
> 
> 赞同：0
> 
> 时间：2012-06-15T18:47:43.150
> 
> 标签：c#, object, parent

让我们假设

```
public abstract class Game
{
    // Base
}

public class Poker : Game
{
    // Lobby Object
    // NUMBER OF PLAYERS ( Max )   ----------
}                                            '
                                             '
public class Lobby                           '
{                                            '
    // List<Tables>                          '
}                                            '
                                             '
public class Table                           '
{                                            '
    // List<Player>                <---------'
} 
```

**如何**从*表*对象访问**NUMBER OF PLAYERS**而无需冗余传递**？**

 **** * *

**编辑我**
你误解了我的问题，对不起。
我想从它的游戏类型中访问可以加入这个表的最大数量。
所以如果这是一张扑克牌桌，我想得到 NUMBER OF PLAYERS 等于 10

* * *

**EDIT II**
不同的游戏类型：红心、黑桃、扑克、估计等
最大玩家人数分别为：4、4、10、4 等。

* * *

**编辑 III**
再次误解了我的问题，我希望能够执行以下操作：

> 当玩家尝试加入一个表时，我会比较目标表当前玩家数与其游戏类型最大玩家数，因此我决定玩家是否可以加入它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:24:25.360

我认为需要建模以下关系：

```
public abstract class Game
{
    // force all Game descendants to implement the property
    public abstract int MaxPlayers { get; } 
}

public class Poker : Game
{
    // Lobby Object
    public List<Lobby> Lobbies { get; set; }

    // NUMBER OF PLAYERS ( Max )
    // the abstract prop needs to be overridden here
    public override int MaxPlayers 
    { 
       get { return 4; } 
    }
}   

public class Lobby
{
    public List<Table> Tables { get; set; }
}

public class Table                           
{                    
    public Game CurrentGame { get; set; }
    public List<Player> Players { get; set; }

    // force the Game instance to be provided as ctor param.
    public Table(Game gameToStart)
    {
        CurrentGame = gameToStart;
    }
} 
```

实例化时注入`Game`正在播放的内容：`Table`

```
var pokerGame = new Poker();
// more code here, etc etc

var myTable = new Table(pokerGame); 
```

要获得`Table`实例中允许的最大玩家数：

```
var maxAllowed = Table.CurrentGame.MaxPlayers; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:52:04.847

使用 LINQ to 对象可以很容易地做到这一点。

```
public abstract class Game
{

}

public class Poker : Game
{
    private Lobby lobby = new Lobby();

    public int MaxPlayers         
    { 
        get
        {           
           int count = lobby.tableList.Sum(t => t.playerList.Sum(c => t.playerList.Count));
           return count;
        }                 
    }

public class Lobby
{
    public List<Table> tableList { get; set; }
}

public class Table
{
    public List<Player> playerList { get; set; }
}

public class Player
{

} 
```***

# mysql - 由于条件，SQL JOINING 5 个表

> ID：11056531
> 
> 赞同：1
> 
> 时间：2012-06-15T18:47:46.737
> 
> 标签：mysql, sql

我在 MySQL 中有 5 个表，但我相信这是一个 SQL 问题

**用户**

![在此处输入图像描述](../Images/fddc9044d0150e935870fcd2bc4fc9f9.png)

**用户信息**

![在此处输入图像描述](../Images/26d72d9bab92a099027f9d47c5528c93.png)

**USER_RIGHTS**

![在此处输入图像描述](../Images/56084857975a37d633cc0ffead34b430.png)

101 = 正确读取

102 = 正确写入

**组**

![在此处输入图像描述](../Images/70ecfb372485af4e0390a44dda28e3d5.png)

**帖子**

![在此处输入图像描述](../Images/4ea77e3f9db47b1b602816b68a82598d.png)

现在我想为用户 2 选择例如，用户 2 在该组中具有读取权限 101 的任何用户发布的所有帖子

例如我有 3 个帖子

帖子 1 发布在第 1 组中 帖子 2 发布在第 1 组中 帖子 3 发布在第 2 组中 帖子 4 发布在第 1 组中

和

```
WHERE user2 has 101 right in group 1 ==> SHOW post1 2 3 
```

或者

```
WHERE user2 has 101 right in group 2 ==> SHOW post2 
```

或者

```
WHERE user2 has 101 right in both group 1 and group 2 ==> SHOW post2 
```

到目前为止我所拥有的是

```
SELECT * FROM posts
INNER
    JOIN user_info
    ON posts.posted_by = user_info.user_id  
INNER
    JOIN groups
    ON posts.posted_in = groups.group_id
INNER
    JOIN user_rights
    ON user_rights.user_id = user_info.user_id
WHERE user_rights.right = '101' AND user_info.user_id = ".$UserId." ORDER BY id DESC; 
```

这段代码将所有帖子返回给我 2 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:04:40.757

我非常相信这一点

```
select * from posts 
inner join 
(select group from user_rights where right = 101 and user_id = 1) as rights
on posts.posted_in = rights.group 
```

可以在 SQL Server 中工作（这里没有一个可以检查语法）。
一方面，我选择了 ID 为 1 的用户具有读取权限
的所有组，另一方面，我选择了帖子。
剩下的就是它们之间的内部连接。

# c# - 使用 Visual Studio 2010 进入 asp.net 中的类库

> ID：11056544
> 
> 赞同：0
> 
> 时间：2012-06-15T18:49:10.697
> 
> 标签：c#, asp.net, visual-studio-2010, class-library, breakpoints

我首先要说我已经搜索过 SO 并没有找到我的问题的答案。

我想在我的asp.net代码后面放置一个断点，当调用类库的方法或函数时，我希望能够单步执行类库代码。

我已将类库代码文件添加到我的 asp.net 解决方案文件中。

附加到进程不起作用（后面的类库代码没有出现）。我还确认 pdb 文件存在于 \bin 文件夹中......根据这篇文章[ASP.NET Class Library not hit break points](https://stackoverflow.com/q/8792122/165694)

这是我的过程截图： ![在此处输入图像描述](../Images/7d6c9e467eba04388e56e8e91f5b18f7.png)

任何想法如何进入类库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:51:36.033

你必须附加到 w3wp，asp 网站的工作进程，dll 应该在那里。

但是，如果直接引用代码，那么内置的 VS 调试器应该可以工作。你确定你在调试中运行吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:15:04.833

如果您从调试中运行，您应该会在输出窗口中看到加载的类库和符号。查找如下所示的内容：

'WebDev.WebServer40.EXE'（托管 (v4.0.30319)）：加载 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b2719ea1\480fba3f\assembly\dl3\c439d1ec \8c571aed_7e45cd01\MyClassLibrary.DLL'，已加载符号。

如果您看到您的类库正在加载，但最后没有说“符号已加载”，那么由于某种原因它没有找到 .pdb 文件。

此外，如果您从调试运行，您可以从“附加到进程”框中附加到 WebDev.WebServer40.exe。但您不应该这样做 - 如果符号已加载并且您在调试模式下运行，您应该能够在不明确附加到进程的情况下达到你的断点。

你能在你的类库中没有的代码中打断点吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:52:20.100

确保选中“显示所有用户的进程”，然后附加到您网站的 w3wp 进程。

# apache - 如何在与另一个 php 应用程序相同的域中设置 rails 应用程序？

> ID：11056545
> 
> 赞同：0
> 
> 时间：2012-06-15T18:49:27.577
> 
> 标签：apache, passenger, virtualhost

我有使用默认虚拟主机 apache 的网络服务器

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www

    <Directory />
            Options FollowSymLinks
            AllowOverride all
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride all
            Order allow,deny
            allow from all
    </Directory>
</VirtualHost> 
```

我的 PHP 应用程序在子文件夹中运行良好，我可以像下面这样访问

domain.com/phpapp1

domain.com/phpapp2

domain.com/phpapp3

但是如何使用 domain.com/railsapp1 之类的乘客来运行 rails 应用程序？我想为所有应用程序使用相同的域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:33:04.413

我不确定这是否是最好的方法，但我让它工作添加以下行来配置 redmine 和一个主应用程序，例如在同一个域上

```
<VirtualHost *:80>
 ServerAdmin webmaster@localhost

 DocumentRoot /var/www

 <Directory />
        Options FollowSymLinks
        AllowOverride all
 </Directory>
 <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride all
        Order allow,deny
        allow from all
 </Directory>

 <Directory /var/www/redmine>
        RailsBaseURI /redmine
        PassengerResolveSymlinksInDocumentRoot on
        PassengerAppRoot /var/www/redmine
 </Directory>

</VirtualHost> 
```

# postgresql - 从 pgsql 触发器输出到文件

> ID：11056546
> 
> 赞同：4
> 
> 时间：2012-06-15T18:49:42.400
> 
> 标签：postgresql, triggers, plpgsql

**是否可以从用plpgsql**编写的 PostgreSQL 触发器将一些文本输出到文件（实际上是一个 fifo）？

我知道我可以为此创建一个 C 触发器，我想知道它是否可以在 plpgsql 中完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:12:10.013

如果您不需要附加到文件（即始终创建一个新文件）[`COPY`](http://www.postgresql.org/docs/current/static/sql-copy.html)可能是一个选项

# xcode - 如何更改目标的输出目录

> ID：11056547
> 
> 赞同：64
> 
> 时间：2012-06-15T18:49:58.823
> 
> 标签：xcode, xcode4

我正在使用一个工作区，其中有一个主应用程序项目，然后是一个由主应用程序使用的静态库项目。我希望静态库项目将 libX.a 吐出到主应用程序项目目录中，因为我想将此 libX.a 推送到我的 Git 存储库中。

静态库项目的构建路径设置的更改应该推送到它自己的 git 存储库，这样其他人就不必一次又一次地处理这个更改。

我尝试将 mt 静态库目标的“构建产品路径”更改为“$(SRCROOT)/../SharedData”，但它没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-25T20:13:33.753

1.  转到文件-> 项目设置。

2.  单击派生数据位置下的高级按钮。在构建位置下选择自定义并选择您的输出目录。这会将变量 $(BUILD_DIR) 更改为您在该字段中设置的任何内容。

3.  单击完成并转到您的目标设置。在 Build Location 下，您现在可以根据 $(BUILD_DIR) 宏指定目标的输出位置。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-03-14T15:12:23.143

更新了 Xcode 5 到 6.3 的说明。

1.  转到`File`->`Project settings`
2.  点击`Advanced`按钮
3.  单击`Done`，然后`Done`再次单击。

你完成了！

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2015-10-17T22:21:30.503

这是一个您可以检查源代码控制的解决方案，我已经验证它适用于 Xcode 6.2。

1.  将 .xcconfig 文件添加到您的项目中 -[有关详细信息，请参阅此 SO 问题。](https://stackoverflow.com/questions/6208224/how-can-i-use-xcconfig-files-in-xcode-4)
2.  在 .xcconfig 文件中，指定 Xcode 标准环境变量 PROJECT_TEMP_DIR、CONFIGURATION_BUILD_DIR 和 BUILT_PRODUCTS_DIR 以指向您希望文件结束的位置。

阅读 Apple 的[xcconfig 格式参考](http://help.apple.com/xcode/mac/8.3/#/dev745c5c974)，似乎只需在 .xcconfig 文件中覆盖 OBJROOT 和 SYMROOT 就可以了——但在我对 Xcode 6.2 的测试中，更改它们没有任何效果。您必须更改上面列出的这三个特定环境变量。

这是我放入 Xcode 6.2 .xcconfig 文件的内容，因此中间文件和可执行文件进入它们的“传统”位置：

```
// Intermediate build files go here
PROJECT_TEMP_DIR = $(SRCROOT)/build/$(PROJECT_NAME).build

// Build-related files for the active build configuration go here
CONFIGURATION_BUILD_DIR = $(SRCROOT)/build/$CONFIGURATION

// The final product executables and other build products go here
BUILT_PRODUCTS_DIR = $(SRCROOT)/build/$CONFIGURATION 
```

* * *

不要忘记将 xcconfig 文件添加到部署目标 -> 配置以使其工作（单击项目，在信息下，在配置下的部署目标部分

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-11-10T08:38:30.010

根据@gp-coder，xcode 9 的场景将如下所示。* **按照图片中给出的步骤进行操作**

[![在此处输入图像描述](../Images/9d543657c1b22905cbb76a83ee724a5e.png)](https://i.stack.imgur.com/EHcZS.png) [![在此处输入图像描述](../Images/be355622e799ee59ab116f1534643e7c.png)](https://i.stack.imgur.com/f2aDY.png)[![在此处输入图像描述](../Images/cd3496c8e35cd73ed4e940633e522385.png)](https://i.stack.imgur.com/3zWPq.png)

**做完**_

 **就这些，多谢

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-11-17T15:42:49.400

另一种方法是在目标的 Build Settings中编辑**Build Locations > Per-configuration Build Products Path 。**[![在此处输入图像描述](../Images/d90ba1ddf31193e5254badd7039a7395.png)](https://i.stack.imgur.com/l8hrq.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-18T11:15:04.270

**如果要更改项目的构建路径，可以使用以下步骤进行更改。**

1) 选择 Xcode > Preferences，然后单击 Locations。

2) 单击派生数据设置的高级按钮。

3) 从可用选项中选择构建位置，然后单击完成。

前任。**如果您从“构建位置**”选项中选择“自定义”，您的构建将在**“/Users/XYZ/Desktop/Build/Products”**位置生成

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-09-28T20:52:41.347

在 Xcode 8.x 中，我在构建项目的 .sh 文件中使用命令行选项设置了 derivedData 目录。开发人员可以在他们的用户目录中构建（默认 Xcode 首选项），而官方构建在传统区域创建构建：

SCRIPT_DIR="$( cd "$( 目录名 "${BASH_SOURCE[0]}" )" && pwd )"

xcodebuild -workspace 'my project.xcworkspace' -scheme '我的项目' -configuration Release -derivedDataPath '$SCRIPT_DIR/build'**

# asp.net-mvc-3 - T4MVC - 具有模型绑定的操作 - 如何将完全限定的强类型 URL 字符串获取到另一个控制器？

> ID：11056548
> 
> 赞同：2
> 
> 时间：2012-06-15T18:50:08.793
> 
> 标签：asp.net-mvc-3, visual-studio-2010, strong-typing, t4mvc

我正在使用带有 T4MVC 的 .Net 4.5 位运行 Visual Studio 2012 RC。

我在我的 Action 方法中`AccountController`，我想为另一个看起来像这样的控制器生成一个完全限定的 URL；

```
public partial class ConfirmEmailController : Controller
{
    // ...

    [AllowAnonymous]
    [HttpPost]
    public virtual ActionResult Confirm(ConfirmEmailModel model)
    {
         //...
    }
    // ...
} 
```

所以我想调用一个函数（当在我的 AccountController Action 方法中创建一个我可以通过电子邮件发送的链接时；

```
 private string GetEmailConfirmationUrl(MembershipUser aUser, bool confirm)
    {
        string code = aUser.ProviderUserKey.ToString();
        var model = new ConfirmEmailModel() { Code = code, Confirm = confirm };

        Url.Action(MVC.ConfirmEmail.Confirm(model); // very typesafe but doesn't work
    } 
```

不过和这个其他成员的经历类似[强类型的T4MVC Action/ActionLink](https://stackoverflow.com/questions/2381455/strongly-typed-t4mvc-action-actionlink)我只是简单的拿到模型类的名字`"www.Models.ConfirmEmail"`

我正在使用最新的 T4MVC 位，但自那篇帖子以来，这里似乎没有任何变化。

我不一定希望能够构造和传递这样的模型，我想要的只是以强类型、类型安全的方式构造一个完整的 URL。

我知道这行得通；

```
Url.Action(MVC.ConfirmEmail.Confirm().AddRouteValues(new ConfirmEmailModel() { Code = code, Confirm = confirm })); 
```

但这不好，因为它不能验证我传入的模型参数是否对该控制器有效，我可以将它们传递给任何控制器（我已经犯了那个错误）。

有没有其他方法可以实现这一点，或者我必须在我的`Confirm()`操作中添加一个参数列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:00:40.550

我不认为你能做到这一点。

如果您查看 T4MVC 生成的代码，您会发现没有任何东西可以从您的模型绑定器中“反转”逻辑。基本上 T4MVC 不知道正在使用模型绑定器。

**编辑：**

您可以使用 T4MVC 生成 URL，但您需要使用 T4 生成的重载。所以在你的情况下

`Url.Action(MVC.ConfirmEmail.Confirm());`

That is enough to generate URL. The actual value of the parameter will be created at runtime based on your model binding.

# javascript - 如何使用非零索引初始化 Javascript 数组

> ID：11056562
> 
> 赞同：2
> 
> 时间：2012-06-15T18:51:02.083
> 
> 标签：javascript

我正在将一个数组传递给一个函数，我很好奇是否有一种快速的方法可以使用 json 样式的数组初始值设定项来传递一个匿名数组：

例如：

```
myfunction([1,2,3,4]); 
```

javascript 中是否有一些特殊的语法允许使用非零索引初始化数组？

例如，而不是

```
myfunction([,,,,4321]);

//array[4] == 4321 here 
```

但如果您有一个未定义前 100 个位置的数组，则必须有 100 个逗号。[,,....,4321]

基本上是在寻找一个简短的形式：

```
var a = new Array(); a[100] = 4321; 
```

您可以将其用作函数参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T18:59:32.067

就像是：

```
var a = new Array(100).concat([4321]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T18:57:14.753

可能最短的方法（但非常不可读）是

```
(a = [])[100] = 4321; 
```

但是您仍然不能直接将其用作函数参数，因为它返回添加的元素，而不是整个数组。你仍然需要调用 as `myFunction(a)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T18:58:02.913

传递这样的东西：

```
myfunction({100: "foo", 101: "bar"}); 
```

这有效：

```
function testArray(arr) {
    alert(arr[4]);
}

testArray({4: "foo"}); //alerts "foo" 
```

# jquery - 使用带有淡出效果的 jquery 动画

> ID：11056563
> 
> 赞同：0
> 
> 时间：2012-06-15T18:51:10.243
> 
> 标签：jquery

我创建了一些 jQuery，它应该执行以下操作：当您将鼠标悬停在 . 内时`div`，其内容将动画到左侧或顶部，然后在 mouseout 时它会回到 0px 并淡出。

我能够做到这一点，但它在鼠标悬停时运行不顺畅。

这是我的小提琴：http: [//jsfiddle.net/AufTr/](http://jsfiddle.net/AufTr/)

这是我的代码：

```
$(document).ready(function() {
    $(".button").hover(function() {
        $(this).find(".le").css("display", "block");
        $(this).find('.h1').animate({
            left: '-300px',
            top: '130px'
        }, {
            queue: false,
            duration: 500
        });
        $(this).find('.h2').animate({
            left: '80px'
        }, {
            queue: false,
            duration: 500
        });
        $(this).find('.h3').animate({
            top: '130px'
        }, {
            queue: false,
            duration: 500
        });
    },
    function() {
        $(this).find('.h2').animate({
            left: '0px'
        }, {
            queue: false,
            duration: 500
        });
        $(this).find('.h3').animate({
            top: '0px'
        }, {
            queue: false,
            duration: 500
        });
        $(this).find(".h1").animate({
            left: '0px',
            top: '0'
        }, "normal", function() {
            setTimeout(function() {
                $('.le').fadeOut('fast');
            }, 0, {
                queue: false,
                duration: 500
            });
        });
    });
});​ 
```

**HTML**

```
<div style="background:#98bf21;height:200px;width:200px; margin:0 auto;" class="button">
<div class="h1 le" style="background:#CCCCCC; display:none; position:relative">
<img src="http://b.vimeocdn.com/ps/797/797108_300.jpg" width="300" height="300" border="0" alt="" /></div>
<div class="h2 le" style="background:#FF0000; display:none; position:relative">Responsive</div>
<div class="h3 le" style="background:#00FF00; display:none; position:relative">View</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:03:43.373

这似乎是由`.button`背景色-绿色-和图像的背景色-白色-之间的对比引起的视觉效果。

考虑到浏览器不是动画渲染引擎。Firefox 甚至比 Chrome 还要慢。因此，即使您在 Chrome 中流畅地运行动画，也不能保证它在其他浏览器或速度较慢的机器上也能流畅运行。

请尝试将`.button`'更改`background-color`为白色。您会注意到动画看起来更流畅。

我已经分叉了你的代码。我的代码在返回到原始位置时基本上淡出微笑的 div。我的眼睛看起来更光滑。但我不确定这种效果是否是你想要的。

链接：[我在 jsFiddle 上的 fork](http://jsfiddle.net/chrRamirez/2877S/)。

PD.：我为类添加了`pointer-events: none;`CSS 规则。`.le`此规则避免动画元素在鼠标指针下方通过时中止动画。

# ios - audioInpuStream 崩溃 - 我不清楚实际发生了什么

> ID：11056575
> 
> 赞同：1
> 
> 时间：2012-06-15T18:51:42.960
> 
> 标签：ios, crittercism

我刚从 Crittercism 得到这个崩溃日志。现在我怀疑它可能是由我正在使用的基于云的语音的第 3 方库引起的（iSpeech），但我真的不知道。我所知道的是，我自己的代码没有调用任何上述方法，也没有 MyAudioQueueInputCallback。

线索？

SIGSEGV -[audioInputStream setCurrentBuffer:] (audioInputStream.m:15)

```
0    libobjc.A.dylib 0x31331f7a objc_retain + 9
1    libobjc.A.dylib 0x31332ead objc_setProperty_non_gc + 44
2    libobjc.A.dylib 0x3133a82f objc_setProperty + 18
3    TypOHD 0x000c6c15 -[audioInputStream setCurrentBuffer:] (audioInputStream.m:15)
4    TypOHD 0x000c60f5 -[audioInputStream pushData:final:] (audioInputStream.m:457)
5    TypOHD 0x000c531d -[audioInputStream handleInput:] (audioInputStream.m:89)
6    TypOHD 0x000c54c1 MyAudioQueueInputCallback (audioInputStream.m:122)
7    AudioToolbox 0x36277375 _ZN20ClientMessageHandler19InputBufferCompleteEjjRK15XAudioTimeStampjPK28AudioStreamPacketDescription + 192
8    AudioToolbox 0x36278f01 _ZN29AQClientCallbackMessageReader17DispatchCallbacksEPhjPvj + 344
9    AudioToolbox 0x3627717b AQCallbackReceiver_CallbackNotificationsAvailable + 370
10   AudioToolbox 0x36224ea1 _XCallbackNotificationsAvailable + 60
11   AudioToolbox 0x3621ace3 mshMIGPerform + 374
12   CoreFoundation 0x314be523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
13   CoreFoundation 0x314be4c5 __CFRunLoopDoSource1 + 140
14   CoreFoundation 0x314bd313 __CFRunLoopRun + 1370
15   CoreFoundation 0x314404a5 CFRunLoopRunSpecific + 300
16   CoreFoundation 0x3144036d CFRunLoopRunInMode + 104
17   AudioToolbox 0x36273b2f _ZN20GenericRunLoopThread5EntryEPv + 122
18   AudioToolbox 0x361faca3 _ZN9CAPThread5EntryEPS_ + 214
19   libsystem_c.dylib 0x33cb6735 _pthread_start + 320 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:21:19.673

这原来是 iSpeech 库中的一个错误。它已经被修复了，所以去那里升级你的库开发者吧！

# php - PhpExcel FILENAME 字符编码

> ID：11056583
> 
> 赞同：1
> 
> 时间：2012-06-15T18:52:27.183
> 
> 标签：php, encoding, utf-8, phpexcel

我正在使用 PHPExcel 编写一个 html/xls/csv 输出，并且所有内容都是 UTF-8，所以当文件名没有任何特殊的非英文字符时，一切看起来都很好（包括具有特殊非英文字符的 DATA 本身英文字符）。

但是 PHPExcel 不接受我的带有特殊字符的文件名，那是怎么回事？

```
<?php
$output = "MySpecialFileÁÉP.csv";
$output = mb_convert_encoding($fileName,'UTF-8'); //Just to make sure
$objWriter->save($output);
?> 
```

任何想法？我读到 PHPExcel 使用 UTF-16LE 编码，但在当前文档中，他们清楚地声明一切都使用 UTF-8。我错过了什么？我的版本是 1.7.6，所以它是最新的。

# grails - 来自外部项目目录的命令 grails 战争

> ID：11056587
> 
> 赞同：0
> 
> 时间：2012-06-15T18:52:38.743
> 
> 标签：grails, deployment, ant

有没有办法从项目目录之外调用 grails 战争？我的项目路径是“d:/deploy/project”。我想要一些如何将我的项目目录传递给编译器。像这样：grails d:/deploy/project war。

我构建了从批处理文件调用的 ant ant 脚本，因此批处理从 d: 开始。所以当ant任务执行时

我收到一个错误。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:33:53.800

AFAIK，不。文档没有指出我找到的方法，并且“grails”命令的输出表明项目外部不支持“war”，即使您尝试传入 grails.project 也是如此。类.dir

```
>grails dev war /tmp/foo.war -Dgrails.project.class.dir=/tmp/MyGrailsProject
Configuring classpath
Error /home/someuser does not appear to be part of a Grails application.
Error The following commands are supported outside of a project:
    add-proxy
    clear-proxy
    create-app
    create-plugin
    help
    list-plugins
    package-plugin
    plugin-info
    remove-proxy
    set-proxy 
```

因此，作为构建过程的一部分，您需要一些方法来更改当前的工作目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:10:28.680

我不得不做一个工作。我修改了我的蚂蚁脚本。脚本应该做的第一件事是创建一个临时目录并将所需的所有内容复制到该文件夹​​中。Grails 项目、flex 项目和 build.xml ant 文件本身。在这个初始过程之后，我在临时目录中调用 ant 文件。由于我需要的一切都在同一个文件夹中（包括 ant 脚本），我可以成功调用 grails war 命令。我对这样的工作不感到高兴或自豪，但它似乎是唯一的。

# c#-4.0 - 优化器，一种方法如何知道另一种方法中有多少参数

> ID：11056593
> 
> 赞同：0
> 
> 时间：2012-06-15T18:53:39.887
> 
> 标签：c#-4.0

**信息：**提前道歉，因为我不确定我的解释是否足够。我试图弄清楚如何编写遗传算法。下面的解释是一般部分，我不确定哪个具有合理 c# 经验的人应该能够回答，因为它不是 GA 特定知识。

**问题：** 我需要编写一个方法（Manager_Method），其主要目的是将不同的参数组合传递给第二种方法（Computation_Method），该方法使用这些输入值返回结果。

棘手的部分在于 Manager_Method 需要能够确定所选 Computation_Method 所需的参数（将有几个 Computation_Methods，每个都有不同数量/类型的输入）。

所以我想知道是否有人知道一些巧妙的方法来解决这个问题，除非必须硬编码到一个数组中，每个 Computation_Method 的输入是什么。每次我添加一个新的 Computation_Method 时都需要重新编译。

提前致谢。

编辑：XML 可能是一个想法。我试图摆脱的是参数中的硬编码。我试图避免的是在我添加了一个新的 Computation_Method 并且还以某种方式让 Manager 方法知道每个 Computation_Method 需要哪些参数的情况下重新编译。我想会有一些方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:03:52.743

好吧，我不知道这些参数可以是什么，但是您提供的信息有限。我认为您可以在 ManagerMethod 中填充字典并将其传递给 Computation_Method ，您可以在其中检查键/值对。键是您的参数名称，值是您要传入的参数值。

例如：

```
private vioid ManagerMethod()
{
   Dictionary<string,string>  params = new Dictionary<string,string>();
   params.Add("param1","Value1");
    params.Add("param2","Value2");
    params.Add("param3","Value3");

   ComputationMethod(params);
}
private void ComputationMethod(Dictionary<string,string> param)
{ 
   //Iterate through the Dictioanry
   // Check for your Key/Value and performa accoudringly.
} 
```

基于同样的想法。现在您也可以将参数放入 XML 文件中。阅读并通过它们。您还可以创建一个对象列表并将其传递给您的方法。

我认为这可以帮助你想出一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:20:57.590

不确定我是否理解您的问题，但看起来您可以在此处使用反射。特别是[MethodInfo](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)类及其[GetParameters](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getparameters.aspx)方法。这是我的做法：

```
public class A
{
    public void MyMethod(int integer, string str)
    {
    }
}

void Main()
{
    System.Reflection.MethodInfo method = typeof(A).GetMethod("MyMethod");
    ParameterInfo[] pars = method.GetParameters();
    foreach (ParameterInfo p in pars) 
    {
        Console.WriteLine(p.Name + ": " + p.ParameterType);
    }
} 
```

# c# - 如何向 DevExpress GridView 控件中的自定义新行按钮添加功能

> ID：11056601
> 
> 赞同：0
> 
> 时间：2012-06-15T18:54:39.007
> 
> 标签：c#, asp.net, devexpress

我正在尝试模拟此处其他开发人员创建的另一种形式。在 DevExpress 网格视图中，他向筛选行添加了一个新的行按钮，而不是添加到每一行。我想出了如何通过将自定义按钮复制到过滤器行中的适当位置来做到这一点。

我的问题是如何向它添加功能？我在文档中找到了 addnewrow() 方法，但它需要一个我不知道如何获取的 DataTable() 类。你能帮助我吗？我今天刚开始使用您的 ASPxGridView 控件，所以这对我来说是全新的。

这是我发现的一些用于在 DevExpress 的 gridview 上添加新行的代码。但感觉就像我走错了路。我的第一个问题是在哪里可以找到 DataTable 类？有没有更简单的方法来做到这一点？

```
DataTable GetTable()
    {
        //You can store a DataTable in the session state
        DataTable table = Session["Table"] as DataTable;
        if (table == null)
        {
            table = new DataTable();

            DataColumn colid = table.Columns.Add("ID", typeof(Int32));
            DataColumn nameid = table.Columns.Add("Name", typeof(String));
            table.PrimaryKey = new DataColumn[] { colid };
            colid.ReadOnly = true;

            for (int i = 0; i < 23; i++)
            {
                DataRow aRow = table.NewRow();
                aRow["ID"] = i;
                aRow["Name"] = String.Format("Name{0}", i);

                table.Rows.Add(aRow);
            }
            Session["Table"] = table;
        }
        return table;
    }
    protected void grid_RowInserting(object sender, DevExpress.Web.Data.ASPxDataInsertingEventArgs e)
    {
        ASPxGridView grid = sender as ASPxGridView;

        DataTable table = GetTable();
        table.Rows.Add(new Object[] { e.NewValues["ID"], e.NewValues["Name"] });

        Session["Table"] = table;

        e.Cancel = true;
        grid.CancelEdit();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:21:54.993

在执行此操作之前，您应该了解一些一般知识。[在此处](http://documentation.devexpress.com/#AspNet/CustomDocument5828)查看数据绑定说明，并在此处查看[ASPxGridView 编辑演示](http://demos.devexpress.com/ASPxGridViewDemos/GridEditing/EditModes.aspx)。在会话中存储数据（如您找到的示例中）很少是一种方法。
至于添加新行，您可以使用[ASPxClientGridView.AddNewRow](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewScriptsASPxClientGridView_AddNewRowtopic)客户端方法。因此，将[ClientInstanceName](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_ClientInstanceNametopic)分配给您的[ASPxGridView](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxGridViewASPxGridViewtopic)（例如`grid1`）并调用`grid1.AddNewRow()`按钮单击事件 - [ASPxButton.ClientSideEvents.Click](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsASPxButton_ClientSideEventstopic)。

# sorting - extjs 问题扩展 Ext.grid.header.Container

> ID：11056604
> 
> 赞同：0
> 
> 时间：2012-06-15T18:55:06.730
> 
> 标签：sorting, extjs, extend

我正在尝试创建远程多排序。

字段用逗号分隔。

MINUS 代表 DESC

示例 localhost:8080/api/?sort=id,-externalId&page=1&start=0&limit=200

当我在网格列配置中编写它时，headerclick 工作正常。

但是当我尝试创建 MultisortHeader 组件并使用 Ext.require 加载它时，我只看到白页。

没有错误，什么都没有。

请给我一个线索。谢谢。

控制器前

```
Ext.require([
'Ext.grid.*',
'Ext.data.*',
'Ext.util.*',
'Ext.ux.grid.header.MultisortHeader'

]); 
```

零件

```
Ext.define('Ext.grid.header.MultisortHeader', 
{    extend:'Ext.grid.header.Container',
alias:'widget.MultisortHeader',
requires: [
'Ext.grid.ColumnLayout',
'Ext.grid.column.Column',
'Ext.menu.Menu',
'Ext.menu.CheckItem',
'Ext.menu.Separator',
'Ext.grid.plugin.HeaderResizer',
'Ext.grid.plugin.HeaderReorderer'
],

initComponent:function () {
var me = this;
this.callParent(arguments);
},
listeners:{
headerclick:function (ct, column, e, el, opts) {

var dataIndex = column.dataIndex,
    grid = this.up('grid'),
    item,
    sortline = '';
grid.remoteSorters = grid.remoteSorters || {};
grid.remoteSorters[dataIndex] = Ext.String.toggle(grid.remoteSorters[dataIndex], 'ASC', 'DESC');
for (item in grid.remoteSorters) {
    if (grid.remoteSorters[item] == 'DESC') {
        sortline += '-';
    }
    sortline += item;
    sortline += ',';
}
if (sortline.charAt(sortline.length - 1) == ',') {
    var sortlineTrim = sortline.substring(0, sortline.length - 1);

} else {
    sortlineTrim = sortline;
}

var store = grid.getStore();
var proxy = store.getProxy();
proxy.extraParams.sort = sortlineTrim;
store.load();

}
}

}); 
```

# c# - 包括来自 ASP.NET 中其他文件的页眉和页脚

> ID：11056605
> 
> 赞同：4
> 
> 时间：2012-06-15T18:55:07.297
> 
> 标签：c#, php, asp.net, include

我是 ASP.NET 的新手，我想使用一种简单的技术，我曾经在网站上使用 PHP。也就是说，包含文件以呈现页眉和页脚。例如，

```
<?php
    include "header.php";
    echo "Hello, world!";
    include "footer.php";
?> 
```

做这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T18:57:50.213

Webforms - 你会想要使用[用户控件](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)。

ASP.NET MVC - 你会想要使用[局部视图](http://highoncoding.com/Articles/638_Understanding_Partial_Views_in_ASP_NET_MVC_Application.aspx)。

基于其他答案之一的快速说明 - 如果您使用网络表单并严格使用它来为您网站上的许多页面使用通用页眉和页脚，那么在我看来，[母版页](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)实际上是最好的方法。但是，如果您通常询问如何在 ASP.NET Web 应用程序中呈现可重用的代码块，类似于您`includes`在 php 中的使用方式，那么您正在寻找用户控件/部分视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T19:52:24.200

在母版页中注册控件：

```
<%@ Register src="~/Controls/Header.ascx" tagname="Header" tagprefix="abc" %>
<%@ Register src="~/Controls/Footer.ascx" tagname="Footer" tagprefix="abc" %> 
```

在母版页的正文中：

```
<body>
        <form id="form1" runat="server">
            <div id="header">
                <abc:Header ID="abcHeader" runat="server" />
            </div> 

            <div id="footer">
                <abc:Footer ID="abcFooter" runat="server" />           
            </div> 
        </form>
</body> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T18:58:42.677

在 php 中您必须使用 include() 功能，但在 asp.net 中您使用母版页的概念。使用母版页，您不需要这样做。观看此 [http://www.youtube.com/watch?v=epaavQsb950](http://www.youtube.com/watch?v=epaavQsb950)

并查看此 [http://www.youtube.com/watch?v=RHoyxLjcSYA](http://www.youtube.com/watch?v=RHoyxLjcSYA)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T19:00:28.200

在普通的 ASP.NET 网站中，我们通过使用用户控件来实现。用户控件不过是可以在许多屏幕中重复使用的部分控件集。*页眉*和*页脚*就是最好的例子。请通过*[ASP.NET 用户控件](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)*(MSDN) 了解有关用户控件的更多信息，这里有[一个很棒的演练](http://msdn.microsoft.com/en-us/library/3457w616.aspx)，详细解释了它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T19:01:49.940

您是否已创建页眉和页脚？

如果是这样，它们是什么格式的？

如果您是从头开始，我建议您使用 Master Pages。 *[使用母版页 (C#) 创建站点范围的布局可](http://www.asp.net/web-forms/tutorials/master-pages/creating-a-site-wide-layout-using-master-pages-cs)*让您快速开始使用母版页。

# php - 在 PHP 中创建 DAO 的正确方法

> ID：11056611
> 
> 赞同：5
> 
> 时间：2012-06-15T18:55:26.937
> 
> 标签：php, mysql, dao

从 OOP 的角度来看，在 php 中创建 DAO（数据访问对象）的正确方法是什么？

例如（以Account作为基本示例），我的AccountDAO将具有以下一些功能：

*   `GetAllAccounts`
*   `GetAccountByID`
*   `UpdateAccount`
*   `DeleteAccount`
*   `InsertAccount`

因此，一旦我获取数据库中的所有帐户，我应该将它们作为帐户对象数组返回给调用者吗？我应该只返回 mysql 结果集吗？

你知道任何 DAO 的好例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:06:11.550

您在构建 DAO 的正确轨道上：您列出的方法绝对应该是 DAO 的一部分。

为了回答您的具体问题，DAO 不应该泄漏任何数据库特定对象，它可以泄漏一些数据库概念，只要它们不是特定于数据库供应商的。

所以不，你不应该返回 MySQL 结果集。但是您可以创建一个包含 MySQL 结果集的通用结果集，并且可以使用更高级别的概念（提取整个对象而不是提取列）。

编辑：我的目的不是引导您实际构建结果集包装器，您也可以像最初建议的那样简单地返回一个对象数组。这只是一个例子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T18:57:00.727

为此，您可以创建一个包含 3 个方法的类，一个是创建与数据库的连接，第二个是关闭连接，第三个是执行 SQL 查询

```
<?php
class Database{

    public function con_open(){
        $con = mysql_connect("domain","username","password");
            if (!$con)
            {
                die('Could not connect: ' . mysql_error());
            }
        mysql_select_db("db_name", $con);
    }

    public function query($sql){
        $result = mysql_query($sql);
            if(!$result){

            }else{      
                    return $result;
                }
    }

    public function fetch($result){
        $row = mysql_fetch_array($result);
        return $row;
    }

    public function con_close(){
         mysql_close($con);
    }
}

$db = new Database();

?> 
```

希望这对你有帮助

# javascript - 在循环中使用 HTML/Javascript drawImage

> ID：11056612
> 
> 赞同：0
> 
> 时间：2012-06-15T18:55:27.437
> 
> 标签：javascript, jquery, html, canvas

我正在使用 HTML5 画布构建纸牌游戏，并且在循环中遇到了 drawImage 的问题。这似乎是闭包的问题，​​但我不确定闭包将如何适用于我的情况。

```
for (var i = 0; i < length; i++) {  
    var x = start + i * cardWidth
    var y = start
    $(anObject.image).load(function() {
        context.drawImage(anObject.image, x, y);
    });
} 
```

此函数的输出只是将最后一个图像对象写入画布，尽管它在循环中使用了 30 多次迭代。我将如何对这个函数应用闭包并编写我的所有图像？

**编辑**

抱歉，我应该发布更多关于 x 和 y 更新的详细信息。我已经相应地更新了代码。我知道 x 和 y 值正在正确更新，因为我还将它们输出到画布旁边的调试 DIV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:10:11.473

您每次都需要更改您正在绘制画布的 x 和 y，请为上述情况找到以下伪代码

```
 charcterIndentifier = {
                 C1: { X: 0, Y: 0, ImgId: "00", adjacentId: ["c2", "c9", "c10"],color:"B" },
                 C2: { X: 1, Y: 0, ImgId: "10", adjacentId: ["c1", "c9", "c10", "c11", "c3"], color: "B" },
                 C3: { X: 2, Y: 0, ImgId: "20", adjacentId: ["c2", "c4", "c10", "c11", "c12"], color: "B" },
                 C4: { X: 3, Y: 0, ImgId: "30", adjacentId: ["c3", "c5", "c13", "c11", "c12"], color: "B" },
                 C5: { X: 4, Y: 0, ImgId: "40", adjacentId: ["c4", "c6", "c13", "c14", "c12"], color: "B" },
                 C6: { X: 5, Y: 0, ImgId: "50", adjacentId: ["c5", "c7", "c13", "c14", "c15"], color: "B" },
                 C7: { X: 6, Y: 0, ImgId: "60", adjacentId: ["c6", "c8", "c16", "c14", "c15"], color: "B" },
                 C8: { X: 7, Y: 0, ImgId: "70", adjacentId: ["c7", "c16", "c15"], color: "B" },
                 C9: { X: 0, Y: 1, ImgId: "11", adjacentId: "BlackSoldier", color: "B" },
                 C10: { X: 1, Y: 1, ImgId: "11", adjacentId: "BlackSoldier", color: "B" },
                 C11: { X: 2, Y: 1, ImgId: "11", adjacentId: "BlackSoldier", color: "B" },
                 C12: { X: 3, Y: 1, ImgId: "11", adjacentId: "BlackSoldier", color: "B" },
                 C13: { X: 4, Y: 1, ImgId: "11", adjacentId: "BlackSoldier", color: "B" },
                 C14: { X: 5, Y: 1, ImgId: "11", adjacentId: "BlackSoldier", color: "B" },
                 C15: { X: 6, Y: 1, ImgId: "11", adjacentId: "BlackSoldier", color: "B" },
                 C16: { X: 7, Y: 1, ImgId: "11", adjacentId: "BlackSoldier", color: "B" },
                 C17: { X: 0, Y: 6, ImgId: "66", adjacentId: "WhiteSoldier", color: "W" },
                 C18: { X: 1, Y: 6, ImgId: "66", adjacentId: "WhiteSoldier", color: "W" },
                 C19: { X: 2, Y: 6, ImgId: "66", adjacentId: "WhiteSoldier", color: "W" },
                 C20: { X: 3, Y: 6, ImgId: "66", adjacentId: "WhiteSoldier", color: "W" },
                 C21: { X: 4, Y: 6, ImgId: "66", adjacentId: "WhiteSoldier", color: "W" },
                 C22: { X: 5, Y: 6, ImgId: "66", adjacentId: "WhiteSoldier", color: "W" },
                 C23: { X: 6, Y: 6, ImgId: "66", adjacentId: "WhiteSoldier", color: "W" },
                 C24: { X: 7, Y: 6, ImgId: "66", adjacentId: "WhiteSoldier", color: "W" },
                 C25: { X: 0, Y: 7, ImgId: "07", adjacentId: ["c2", "c9", "c10"], color: "W" },
                 C26: { X: 1, Y: 7, ImgId: "17", adjacentId: ["c2", "c9", "c10"], color: "W" },
                 C27: { X: 2, Y: 7, ImgId: "27", adjacentId: ["c2", "c9", "c10"], color: "W" },
                 C28: { X: 3, Y: 7, ImgId: "37", adjacentId: ["c2", "c9", "c10"], color: "W" },
                 C29: { X: 4, Y: 7, ImgId: "47", adjacentId: ["c2", "c9", "c10"], color: "W" },
                 C30: { X: 5, Y: 7, ImgId: "57", adjacentId: ["c2", "c9", "c10"], color: "W" },
                 C31: { X: 6, Y: 7, ImgId: "67", adjacentId: ["c2", "c9", "c10"], color: "W" },
                 C32: { X: 7, Y: 7, ImgId: "77", adjacentId: ["c2", "c9", "c10"], color: "W" },
                 id: "one"
             };

 var canvas = document.getElementById(canvasId);
            var ctx = canvas.getContext('2d');
            var width = canvas.offsetWidth;
            var height = canvas.offsetHeight;
            var xwidth = width / 8;
            var yheight = height / 8;
            var xposition, yposition;
 for (var key in charcterIndentifier) {
                if (key.toString() != "id") {
                    xposition = charcterIndentifier[key].X * xwidth;
                    yposition = charcterIndentifier[key].Y * yheight;
                    ctx.save();
                    ctx.translate(xposition, yposition);
                    ctx.drawImage(document.getElementById(charcterIndentifier[key].ImgId), 14, 5);
                    ctx.restore();
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:35:29.240

Var <- 是 JS 中的函数作用域。

闭包函数中使用的 x 和 y 将是它们收到的最后一个值。

为了克服这个问题，您需要一个返回函数的函数。

```
for (var i = 0; i < length; i++) {  
    var x = start + i * cardWidth
    var y = start
    $(anObject.image).load((function(a, b) {
        return function() {
            context.drawImage(anObject.image, a, b);
        };
    })(x, y));
} 
```

# php - 通过 PHP 转义保留的 SQL Server 关键字

> ID：11056616
> 
> 赞同：2
> 
> 时间：2012-06-15T18:55:51.257
> 
> 标签：php, sql, sql-server

我在 PHP 中为 SQL Server 数据库编写的查询遇到了一个单词未被识别为表名的问题。我将 SQL Server 用于 PHP 2.0 (VC6)。以下查询`Order`在 SQL Server Management Studio 中执行时有效并返回表中的所有订单。

```
SELECT * FROM "db_name"."dbo"."Order" (also tried using brakets [] around table name) 
```

在 PHP 中，我收到以下错误：

```
[0] => Array
    (
        [0] => IMSSP
        [SQLSTATE] => IMSSP
        [1] => -35
        [code] => -35
        [2] => Invalid type
        [message] => Invalid type
    ) 
```

此查询适用于数据库中所有其他表的 PHP 代码，`db_name`.. 它只是不适用于 table `Order`，这是正确的表名。我尝试了双引号、方括号、无引号/括号等，但均无济于事。有谁知道如何解决这个问题？

* ***更新：

我找到了解决方案。请查看修复或解决方法的答案之一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T19:45:04.840

PHP 或您的驱动程序中一定发生了某些事情。您应该能够使用 SQL Server Profiler 查看正在提交的实际查询。

无论如何，如果您无法找出它在做什么。您可以将此视为一种解决方法：

```
CREATE VIEW dbo.MyOrder
AS
SELECT * FROM [Order] 
```

继续前进——生命太短暂了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:02:58.957

好吧，我找到了解决问题的方法。这是我的规格：

*   Windows 7 64 位
*   PHP 5.3 VC9 编译（在尝试解决此问题时从 VC^ 版本更新）
*   驱动程序：SQL for PHP 2.0 (VC9)
*   我试图从中提取数据的表名：`[Order]`
*   我正在使用的查询：`SELECT * FROM [db_name].[dbo].[Order] WHERE ...`

上面的查询根本不适用于`Order`PHP 中的表，而它在 SSMS 中运行良好。查询中的所有其他表`db_name`也很好。我尝试创建视图或使用别名，但没有一个适用于`Order`.

我应该从一开始就想到这一点，但我最终尝试只查询一列，比如`[OrderID]`，你知道什么？只要您一一列出查询中的列名，它就可以工作。我相信 MySQL 不支持 MSSQL 中的列之一。所以，

`SELECT [OrderID],[OrderNumber],... FROM [db_name].[dbo].[Order] WHERE ...`

工作得很好！我希望这将在未来为某人节省一些痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-01T09:19:51.797

当查询返回 PDO 无法处理的列类型时，会发生此错误。例如，当您尝试

```
SELECT default_value FROM sys.parameters 
```

因为该列是 sql_variant 类型。如果有意义，不如将该列转换为 varchar 或其他内容，或者从查询中删除它。

可能在您的情况下发生的事情是该表上有一个奇怪类型的列，当您明确命名所需的列时，该列被消除了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:57:07.047

表不能命名为“order”：这是[SQL 中的保留字](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)

在很多情况下，您可以在引号（或反引号）之间使用此名称，但您总是会遇到无法处理的情况。重命名此表。

如果你不能尝试别名它：

```
SELECT * FROM "db_name"."dbo"."Order" as ord 
```

# php - php 会话仅适用于谷歌浏览器

> ID：11056620
> 
> 赞同：0
> 
> 时间：2012-06-15T18:56:15.720
> 
> 标签：php, session, browser

我的 php 会话仅适用于 Google Chrome。他们不会出现的所有其他浏览器。有谁知道为什么？这是我第一页的代码...

```
 <?php 
 // this starts the session 
 session_start(); 

 // this sets variables in the session 
 $_SESSION['color']='red'; 
 $_SESSION['size']='small'; 
 $_SESSION['shape']='round'; 
 print "Done";
 ?> 
```

这是我的第二页代码...

```
 <?php 
 // this starts the session 
 session_start(); 

 // echo variable from the session, we set this on our other page 
 echo "Our color value is ".$_SESSION['color']; 
 echo "Our size value is ".$_SESSION['size']; 
 echo "Our shape value is ".$_SESSION['shape']; 
 ?> 
```

在第二页上，它不会在 Chrome 以外的任何浏览器中显示会话变量。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:17:47.807

也许您的测试浏览器上没有启用 cookie，或者安全级别设置得太高（对于 IE）。

尝试启用它们以确保它们设置正确。

# r - 如何在 nlmer 中为四参数逻辑模型添加固定效应

> ID：11056625
> 
> 赞同：5
> 
> 时间：2012-06-15T18:56:51.940
> 
> 标签：r, lme4

我正在尝试使用`nlmer`with`SSfpl`来拟合一些具有四参数逻辑函数的数据。我可以使用以下方法很好地拟合整体数据：

```
nm.fpl <- nlmer(meanFix ~ SSfpl(Time, A, B, xmid, scal) ~ (scal | Subject), 
          data = dataSubset, start = c(A = 0.2, B = 0.7, xmid = 600, scal = 100)) 
```

现在我想添加一个固定的效果`Condition`，它有 2 个主题内级别。我想评估这两个条件是否在 4 个参数（A、B、xmid、scal）中的任何一个方面有所不同，但我不知道如何在这个公式中指定它。我可以将模型分别拟合到两个子集（条件 A 和条件 B），然后比较参数，但这似乎不是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:33:48.177

您是否尝试过添加交互？

```
nm.fpl <- nlmer(meanFix ~ SSfpl(Time, A * Condition, B, xmid, scal) ~ (scal | Subject), 
          data = dataSubset, start = c(A = 0.2, B = 0.7, xmid = 600, scal = 100))
nm.fpl <- nlmer(meanFix ~ SSfpl(Time, A : Condition, B, xmid, scal) ~ (scal | Subject), 
          data = dataSubset, start = c(A = 0.2, B = 0.7, xmid = 600, scal = 100)) 
```

# c# - 为 Bing 搜索 API 添加分页功能到 DataServiceQuery

> ID：11056628
> 
> 赞同：2
> 
> 时间：2012-06-15T18:57:12.897
> 
> 标签：c#, azure, bing-api

我正在尝试添加到 Bing 搜索（仅限 Web 结果）代理，以便我可以转到不同的结果页面。我知道我应该使用参数 $skip，但因为它有一个美元符号，我无法让它正确输出 URL。

我只能让它显示不正确（它需要在 & 之后使用美元符号：

[https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Web()?Query='xbox'&Page=2](https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Web()?Query=) _

...或者给我以下错误：

{将 Linq 表达式转换为 URI 时出错：无法添加查询选项“$Page”，因为它以保留字符“$”开头。}

这是我的代码（我的补充在底部）。任何帮助将不胜感激。谢谢！

```
 public BingSearchContainer(Uri serviceRoot) : 
            base(serviceRoot) {
    }

    /// <summary>
    /// </summary>
    /// <param name="Query">Bing search query Sample Values : xbox</param>
    /// <param name="Market">Market. Note: Not all Sources support all markets. Sample Values : en-US</param>
    /// <param name="Adult">Adult setting is used for filtering sexually explicit content Sample Values : Moderate</param>
    /// <param name="Latitude">Latitude Sample Values : 47.603450</param>
    /// <param name="Longitude">Longitude Sample Values : -122.329696</param>
    /// <param name="WebFileType">File extensions to return Sample Values : XLS</param>
    public DataServiceQuery<WebResult> Web(String Query, String Market, String Adult, Double? Latitude, Double? Longitude, String WebFileType, String Page) {
        if ((Query == null)) {
            throw new System.ArgumentNullException("Query", "Query value cannot be null");
        }
        DataServiceQuery<WebResult> query;
        query = base.CreateQuery<WebResult>("Web");
        if ((Query != null)) {
            query = query.AddQueryOption("Query", string.Concat("\'", System.Uri.EscapeDataString(Query), "\'"));
        }
        if ((Market != null)) {
            query = query.AddQueryOption("Market", string.Concat("\'", System.Uri.EscapeDataString(Market), "\'"));
        }
        if ((Adult != null)) {
            query = query.AddQueryOption("Adult", string.Concat("\'", System.Uri.EscapeDataString(Adult), "\'"));
        }
        if (((Latitude != null) 
                    && (Latitude.HasValue == true))) {
            query = query.AddQueryOption("Latitude", Latitude.Value);
        }
        if (((Longitude != null) 
                    && (Longitude.HasValue == true))) {
            query = query.AddQueryOption("Longitude", Longitude.Value);
        }
        if ((WebFileType != null)) {
            query = query.AddQueryOption("WebFileType", string.Concat("\'", System.Uri.EscapeDataString(WebFileType), "\'"));
        }
        if ((Page != null))
        {
            query = query.AddQueryOption("Page", Page);
        }
        return query;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T15:11:33.417

解决方案相当简单。

*   保持 BingSearchContainer 不变
*   并使用 AddQueryOption 函数添加分页和跳过选项

使用以下代码调用您的 searchcontainer。

```
 var imageQuery = bingContainer.Image("XBOX" , null, null, null, null, null, null);
            imageQuery = imageQuery.AddQueryOption("$top", 20);
            imageQuery = imageQuery.AddQueryOption("$skip", 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:50:27.650

出于某种原因，markwilde 的回答并没有直接对我有用，但它让我知道了如何解决类似的问题：使用最新版本的 BingSearchContainer/API，选项*$top*和*$skip*没有使用上述技术添加，这让我很惊讶，但我没有时间调查，所以我使用了以下更残酷的技术。

就我而言，我将一些非空参数传递给*bingContainter.Image(...)*方法，这些参数添加得很好，但是当我尝试使用*AddQueryOption*方法添加*$top*和*$skip*时，没有添加这些选项。所以，我所做的只是修改*bingContainer.Image(...)*，将*$top*和*$skip*值传递给它，然后将它们添加到该方法中：

```
public DataServiceQuery<ImageResult> Image(String Query, String Options, String Market, String Adult, Double? Latitude, Double? Longitude, String ImageFilters, int? top, int? skip ) {
        if ((Query == null)) {
            throw new System.ArgumentNullException("Query", "Query value cannot be null");
        }
        DataServiceQuery<ImageResult> query;
        query = base.CreateQuery<ImageResult>("Image");
        if ((Query != null)) {
            query = query.AddQueryOption("Query", string.Concat("\'", System.Uri.EscapeDataString(Query), "\'"));
        }
        if ((Options != null)) {
            query = query.AddQueryOption("Options", string.Concat("\'", System.Uri.EscapeDataString(Options), "\'"));
        }
        if ((Market != null)) {
            query = query.AddQueryOption("Market", string.Concat("\'", System.Uri.EscapeDataString(Market), "\'"));
        }
        if ((Adult != null)) {
            query = query.AddQueryOption("Adult", string.Concat("\'", System.Uri.EscapeDataString(Adult), "\'"));
        }
        if (((Latitude != null) 
                    && (Latitude.HasValue == true))) {
            query = query.AddQueryOption("Latitude", Latitude.Value);
        }
        if (((Longitude != null) 
                    && (Longitude.HasValue == true))) {
            query = query.AddQueryOption("Longitude", Longitude.Value);
        }
        if ((ImageFilters != null)) {
            query = query.AddQueryOption("ImageFilters", string.Concat("\'", System.Uri.EscapeDataString(ImageFilters), "\'"));
        }
        if (((top != null)
                    && (top.HasValue == true)))
        {
            query = query.AddQueryOption("$top", top.Value);
        }
        if (((skip != null)
                    && (skip.HasValue == true)))
        {
            query = query.AddQueryOption("$skip", skip.Value);
        }
        return query;
    } 
```

由于 Microsoft 似乎经常更改此类，因此将来这可能会或可能不会对您有用。

# mongodb - 2个文档在MongoDB中合并

> ID：11056632
> 
> 赞同：2
> 
> 时间：2012-06-15T18:57:31.663
> 
> 标签：mongodb

我需要从 MongoDB 中不同集合的两个文档中获取数据（其中 1 个公共字段，对 db 没有更改）。我是新手，请帮助我

```
a = db.users.find(username:'abc@xyz.com')
b = db.tasks.find(username:'abc@xyz.com') 
```

如何获得 a 和 b 合并的变量 c？

请帮忙。这可能是微不足道的，但帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:32:57.567

Hey if the user is unique in both collections use function findOne(), because find() returns a cursor. So to achieve a merge of two objects in the mongoDB console you can use the bellow code:

```
function mergeObjects(a,b) {
    res = new Object();

    for (attr in a) 
          res[attr] = a[attr];
    for (attr in b)
          res[attr] = b[attr];

    // only if you wanna save it in a document again
    delete res["_id"];
    return res;
 }

a = db.users.findOne({"username" : 'abc@xyz.com'})
b = db.tasks.findOne({"username" : 'abc@xyz.com'})
c = mergeObjects(a,b) 
```

Hopefully this solve your problems.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:12:15.280

您可以使用 BSON Api 中的[`merge()`方法](http://api.mongodb.org/csharp/1.1/html/7a32344b-3262-09f8-ff64-b0178ed46a00.htm)。它会给你 b 和 a 的组合并将结果存储在 b 中。在执行此操作之前，您可能希望将 b 复制到 c 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:07:57.090

对于数据聚合，您最好熟悉 MongoDB 的 map/reduce 功能。[你可以在这里](http://www.mongodb.org/display/DOCS/MapReduce)阅读更多关于它的信息。

一旦你弄清楚了，编写 Map（检索数据）和 Reduce（聚合数据）函数就不难了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T21:46:03.440

您必须在您的应用程序中执行此操作。不必担心必须运行两个查询，因为它不一定比运行一个复杂的查询要慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-15T10:23:52.007

我知道这可能不是你的情况，但如果你使用 clojure，一个优雅的解决方案是在`merge-with`从 mongo 检索文档后使用该函数。

```
(def a {
        :scA {:a [1, 2]}
        :scB {:b [3, 4]}
})
; {:scA {:a [1 2]}, :scB {:b [3 4]}}

(def b {
        :scA {:c [5, 6]}
        :scC {:d [7, 8]}
})
; {:scA {:c [5 6]}, :scC {:d [7 8]}}

(merge-with into a b)
; {:scA {:a [1 2], :c [5 6]}, :scB {:b [3 4]}, :scC {:d [7 8]}} 
```

# iphone - 从 iOS 应用程序开始下载 Kindle Book

> ID：11056634
> 
> 赞同：-1
> 
> 时间：2012-06-15T18:57:33.700
> 
> 标签：iphone, ios, amazon

如果设备上存在 Kindle 应用程序，是否可以从我的 iOS 应用程序开始下载 Kindle Book？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:18:58.263

如果您在 iPhone 或 iPad 上在 Amazon.com 上购买书籍，它会给您一个标题为“Go to Kindle for iPhone”的按钮

如果您按住按钮，Mobile Safari 将显示链接是

```
 kindle:///home 
```

复制它，然后粘贴到 Safari 的地址栏中，您会看到 Kindle 应用程序将启动。你不能开始下载，但是当亚马逊这样做时，你买的书就会开始下载——我认为因为这是在你购买时在服务器上启动的（在下一个应用程序启动时推送下载）。

您可以在代码中执行此操作：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"kindle:///home"]]; 
```

这可能是你能做的最好的了。

# php - 要求或包含在 facebook 应用程序中不起作用但在本地正常工作的语句

> ID：11056645
> 
> 赞同：-1
> 
> 时间：2012-06-15T18:58:10.470
> 
> 标签：php, facebook

我刚开始使用 facebook 应用程序开发。

问题是 require 语句不起作用。即使我尝试了 2 个带有 include 和 require 语句的不同简单 php 脚本，它也不能正确地在 wamp 服务器上本地，但不能作为 facebook 应用程序。

我应该怎么做才能完成这项工作？代码：

```
<?php
require 'facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
'appId'  => 'YOUR_APP_ID',
'secret' => 'YOUR_APP_SECRET',
));

// Get User ID
$user = $facebook->getUser();
echo "your id id".$user;
?> 
```

它只是打印您的 id。即使 facebook.php 和其他文件都在正确的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:12:40.507

`require`如果无法找到/访问文件，则会引发错误。如果您没有看到类似的内容，请首先确保您已正确设置`error_reporting`并`display_errors`在您的 PHP 开发环境中。如果仍然没有消息出现，那么*嵌入*SDK 没有真正的问题；更有可能 getUser 只是返回`null`or `false`，因此在回显它时您什么也看不到。请`var_dump`在这种情况下使用，它会准确地告诉您变量真正具有的类型和值。

这些是 PHP 调试的绝对*基础*——在继续为 Facebook 开发 PHP 应用程序之前，请稍微习惯这一点，也许可以通过一些教程来解决这个问题。

# c++ - C++ 向量迭代器错误

> ID：11056646
> 
> 赞同：2
> 
> 时间：2012-06-15T18:58:12.583
> 
> 标签：c++, vector, iterator, erase

我只是在学习如何在向量上使用迭代器，并且遇到了一些运行时错误的问题。这是代码部分：

```
vector<int> nums;
for (int i=0; i<N; i++) { nums.push_back(i+1); }
vector<int>::iterator it = nums.begin();

while(nums.size() > 1)
{
    //cout << *it << " ";
    it = nums.erase(it);                
    for (int i=0; i<m-1; i++)
    {
        if (it == nums.end()) 
            it = nums.begin();
        else 
            ++it;       
    }
} 
```

注释掉的行给了我一个“vector iterator is not dereferencable”错误，我认为这与迭代器到达末尾有关，而且我也得到一个“vector erase iterator outside range”错误，虽然我试过了用声明解释这一点

```
if (it == nums.end()) it = nums.begin(); 
```

无济于事。我还遇到了一些“向量迭代器不可递增”错误，我发现这与使用擦除函数有关，但我使用了

```
it = nums.erase(it); 
```

解释无效的迭代器，这是我在网上任何地方都能找到的唯一建议。

我试图让迭代器多次扫描向量，在每次传递时擦除特定值，直到只剩下一个（我发布的代码实际上循环了几次）。如果你们有任何建议来消除这些错误或者可以解释它们的来源，我真的很感激:)

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T19:05:09.700

当您使用：

```
it = nums.erase(it); 
```

`it`设置为擦除后的元素。如果删除 中的最后一个元素`nums`，`it`将指向`nums.end()`。您没有验证它`it`没有指向，`end()`所以您会收到错误消息。

由于您没有解释您要实现的逻辑，因此我不会深入研究。我只是建议您在擦除元素之前添加一个迭代器验证，即：

```
if (it != nums.end())
    it = nums.erase(it); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T19:07:07.130

在最后一个`for`循环中，您检查`it == end()`，*然后*递增。这意味着在某些情况下，`it`可以指向最终元素（不等于`end()`），然后递增，使其现在等于，这*就是*`end()`下`while`一次迭代的开始方式。

在 for 循环之后添加另一个`end()`带有 reset的检查。`begin()`

我必须补充一点，迭代器的这种使用有点奇怪。可能有比重复增加 m 更好的方法。你想做什么？

# perl - 从哈希引用中提取值

> ID：11056647
> 
> 赞同：0
> 
> 时间：2012-06-15T18:58:14.347
> 
> 标签：perl, soaplite

我正在使用 Perl 并[`SOAP::Lite`](https://metacpan.org/module/SOAP::Lite)从名为 OTRS 的系统中提取票证信息。

目前，我们在 OTRS 上设置了一个名为 GetTicket 的 Web 服务。

我们已成功`SOAP:Lite`连接到 Web 服务并提取票证信息。票证信息作为哈希参考返回。

我没有在代码中创建哈希引用，这正是返回的内容。如果我还没有创建哈希引用，我该如何拆分它？

在这一点上，我们正在尝试使用`foreach`. 我会在完成过程中发布我的进度，但像往常一样，任何建议都会受到赞赏。

**Perl 脚本**

```
#!perl -w

use SOAP::Lite;
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}=0;

use Data::Dumper;
print Dumper(SOAP::Lite
    -> proxy('https://ost-otrstest.ostusa.com/otrs/nph-genericinterface.pl/Webservice/Test/GetTicket')
    -> GetTicket()
    -> result); 
```

**输出**

```
$VAR1 = {
         'ErrorCode' => 'TicketGet.AuthFail'
         'ErrorMessage' => 'TicketGet: Authorization failing!'
        };
Press any key to continue... 
```

编辑：添加转储程序并收到授权错误。我们确实有用户名和密码，在这一点上我只是不知道把它放在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:39:03.953

`SOAP::Lite`依赖于`LWP::UserAgent`它的许多`http`功能，包括请求授权时的行为。

的文档`LWP::UserAgent`说这个

> [get_basic_credentials] 应该返回用户名和密码。它应该返回一个空列表以中止身份验证解析尝试。子类可以重写此方法以提示用户输入信息。

因此，您需要`LWP::UserAgent::get_basic_credentials`通过编写新的`SOAP::Transport::HTTP::Client::get_basic_credentials`.

文档中描述了重载此方法[`SOAP::Transport`](https://metacpan.org/module/SOAP%3a%3aTransport#HTTP-BASIC-AUTHENTICATION)。你需要写这个

```
BEGIN {
  sub SOAP::Transport::HTTP::Client::get_basic_credentials {
    return ('username', 'password');
  }
} 
```

程序中的任何位置。顶部可能是最整洁的。（该`BEGIN`块强制在执行开始之前实现新方法定义，无论其在程序中的位置如何。）

我希望有一个更好的解决方案，因为我对这个解决方案不太满意：它是 Perl 编程的一个丑陋的部分。您最好`SOAP::Lite`完全继承子类以使界面更整洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:50:18.810

```
my $result = SOAP::Lite
    -> proxy('https://ost-otrstest.ostusa.com/otrs/nph-genericinterface.pl/Webservice/Test/GetTicket')
    -> GetTicket()
    -> result; 
```

要获得一个哈希值：

```
my $errorcode = $result->{ErrorCode}; # TicketGet.AuthFail 
```

要遍历它们：

```
foreach my $key (keys %$result) {
     print "$key: " . $result->{$key};
} 
```

# c - C在多线程程序中在哪里定义互斥锁？

> ID：11056648
> 
> 赞同：6
> 
> 时间：2012-06-15T18:58:22.657
> 
> 标签：c, multithreading, unix, mutex, semaphore

我正在开发一个多线程程序，并且有一个关于在哪里定义互斥锁的问题。

相关信息：程序有一个`main.c`我们根据用户输入确定具体动作的地方。main 调用一个 master_function，它位于一个名为`master.c`. 在`master.c`文件中，我们创建了 N 个线程以及其他一些操作（不相关）。线程调用位于`son.c`文件中的名为 son_threads 的函数，当它们进入关键区域时需要使用互斥锁（编辑多个全局变量以防止竞争条件）。我拥有的另一个文件是`type.h`我定义了几个需要使用的全局变量的地方。

互斥量的声明是：

```
 pthread_mutex_t mutex1 = PTHREAD_MUTEX_INITIALIZER; 
```

所以我试图在我`type.h`的文件中定义互斥锁，以便它对`son.c`文件可见。当我尝试编译时，它给了我错误。这是正确的，因为我在几个文件中定义了该互斥锁。

但我很确定我无法在`son.c`文件中定义互斥锁，因为每次创建该线程时，互斥锁都会被初始化为其默认设置，不允许我正确使用它。不确定这一点。

互斥锁必须是一个全局变量，N 个线程可以访问它。那么我应该把它放在哪里呢？

我不知道我是否正确地解释了自己。尽我所能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T19:28:30.037

只需在文件中*声明*您的变量`.h`

```
extern pthread_mutex_t mutex1; 
```

并将*定义*与 C 文件中的初始化一起保留。这与 C 标准的含义相同。

对于 POSIX，使用静态存储初始化互斥锁非常重要。因此该定义不能存在于`.h`文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:24:16.297

> 但是我很确定我不能在son.c文件中定义互斥锁，因为每次我创建那个线程时，互斥锁都会被初始化为其默认设置，不允许我正确使用它。不确定这一点。

这是不正确的。将互斥锁定义放在该文件中，但在线程函数之外。它将在程序启动时初始化，但不是在每个新线程上。您可以放入`extern pthread_mutex_t mutex1;`其中一个头文件，以便任何`son.c`不了解互斥锁的互斥锁用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:04:22.643

如果您必须有一个全局变量并在“C”中的模块之间共享它，我认为通常在包含文件中声明它。在过去，我们会在 .h 文件中使用像“GLOBAL”这样的魔术宏作为“extern”，而在 main 中，我们会将 GLOBAL 重新定义为什么都没有，这样它就会在 main 中声明。

```
#ifndef _TYPES_H
#define _TYPES_H

    // types.h

    #ifndef GLOBAL
    #   define GLOBAL extern
    #endif

    GLOBAL my_global mutex;

#endif 
```

# ruby-on-rails - Rails has_many：通过关联表中的不同列名

> ID：11056657
> 
> 赞同：9
> 
> 时间：2012-06-15T18:58:54.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有两种不同的模型：`User`和`Project`. 该`User`模型具有三种类型的用户——所有者、承包商和客户。我想为一个项目分配多个承包商。我正在与一个`has_many :through`协会一起尝试这个，就像这样：

```
Class User
   has_many :assignments
   has_many :projects, :through => :assignments 

Class Project
   has_many :assignments
   has_many :contractors, :through => :assignments

Class Assignment
   belongs_to :user
   belongs_to :project 
```

我的问题是在表中使用`contractor_id`而`assignments`不是`user_id`.

在我的`assignments`表中，我目前有列`contractor_id`和`project_id`. 如果我改用它，一切似乎都可以正常工作`user_id`，但这会导致我认为以后的事情变得非常混乱。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-15T19:13:49.067

您应该使用 中的[`:foreign_key`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)选项`Assignment`，例如：

```
class Assignment
  belongs_to :user, :foreign_key => :contractor_id
  belongs_to :project 
```

# ios - 可可触摸/UIKit 中的可编辑列表

> ID：11056659
> 
> 赞同：1
> 
> 时间：2012-06-15T18:59:13.893
> 
> 标签：ios, cocoa-touch

我是可可触摸编程的新手。

可可触摸中是否有一个小部件/控件可以让我显示字符串列表：

苹果
芒果
木瓜
...

并让用户：

*   就地编辑字符串
*   在列表中的现有项目之间添加字符串。
*   删除现有字符串
*   将琴弦向上/向下移动一排。

是否有一个小部件可以让我做一些项目 1 到 4，如果不是全部的话？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:06:45.563

没有控制可以做到这一点。

但是你可以通过继承 UITableViewController 来实现你的控制

您将有权访问列表。通过一些设置，您将能够移动、添加和删除项目。

您应该阅读[有关使用 Table View 的 Apple 指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451):-)

# http - 哪种服务器类型最适合“验证服务器”？

> ID：11056664
> 
> 赞同：2
> 
> 时间：2012-06-15T18:59:46.063
> 
> 标签：http, tcp, udp, twisted

我正在用 python 编写服务器和客户端系统。该系统的目的是检查客户端是否在线。

客户端将定期向中央服务器发出“签入”请求。如果服务器在指定的时间段内没有收到该请求，它会提醒人。

我是网络编程的新手，所以我不确定哪种技术最适合我正在尝试做的事情。

我一直在看：

*   扭曲的
*   UDP 或 TCP 套接字
*   HTTP 请求

我还没有决定服务器是否会回复客户的请求。如果它确实回复了，那么它只会向客户端程序保证它已被“签入”。不过，这似乎有点多余。

我倾向于 TCP 套接字服务器模型，因为它似乎是最简单可靠的解决方案。

所以总而言之，我有两个问题：

1.  最适合我的网络的网络技术是什么？
2.  建立双向连接有意义吗？还是应该从客户端到服务器的单向连接就足够了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:40:09.390

据我了解，这当然不是很好，Twisted 只是一个用于实现协议的框架。你可以用twisted实现http，它不是http的替代品。

1：如果我这样做，并且我没有任何具体要求，那么 http（或 https）将在我的列表中很高。它可以通过您想要通过的任何防火墙而无需重新配置，您将在两端使用大量工具集（服务器和应用程序开发），并且它适用于一切。只需 GET 'http://server.com/checkin?id=12345&status=OK' 之类的就很容易了。请记住，如果担心安全问题，外人可以看到它。某种基于时间+ID 的令牌（想想公钥加密字符串）和 https 可用于防止外人使用重放攻击。（可能看起来像：'https://server.com/checkin?token=7d71905f039f67bedcaec2fe5ccc6783'，其中十六进制字符串将在服务器上解密为 '$ID:$STATUS:$TIME' 或类似内容。）

使用 http 的另一个好处是上面的“checkin”几乎可以是任何平台上的任何东西，从 java 到 .net 到 python、perl、ruby、php 等，在 windows、solaris、linux、bsd 的任何组合上运行，或真的是别的什么。负载平衡很简单（因为当您将您的“SuperCheckIn”应用程序授权给所有财富 1000 强时，您赚了数十亿美元）并且实际上没有上限和很少的下限。该设备将享受类似的软件自由，因为您可以使用花哨的自定义 Windows 服务，或 *nix 上的“低级”wget 和 cron。（注意：那里没有反对 wget 或 cron 的东西，它们是我最喜欢的东西）

如果您需要超轻量级，例如嵌入在设备中的 arm（或更小）处理器，UDP 可能是一个不错的答案，但如果签入至关重要，您将不得不想出一些更可靠的方法。带有接收数据的基本校验和的简单 ACK 响应可以工作并且易于实现。

刚刚实现了一个 UDP 服务器来通过蜂窝网络监听 ARM 设备，我不得不说，它并没有比 UDP 简单得多。

2：这实际上取决于您是否有另一种确保数据传输的方法。使用 UDP，是的，您可能希望在特定时间段内使用所述数据的校验和来确认收到数据。使用 http，它是内置的（响应代码）。

请记住：亲吻。http 在本质上兼容的同时实现了这一点。扭曲，恕我直言，这种情况有点复杂。

# php - AJAX xmlhttp.open 未运行脚本

> ID：11056667
> 
> 赞同：0
> 
> 时间：2012-06-15T18:59:59.103
> 
> 标签：php, javascript, html, xml, ajax

我正在修改此处找到的教程：[http](http://www.w3schools.com/ajax/ajax_aspphp.asp) ://www.w3schools.com/ajax/ajax_aspphp.asp ，以便将自动完成名称库存储在数据库中。我添加了一个按钮，如果该名称尚未在数据库中，则该按钮允许用户将名称添加到数据库中。当我单击按钮时，该方法会触发，但是 addName() 方法中指定的 php 脚本不会执行。这很奇怪，因为 showHint() 方法中定义的脚本确实会执行。这是我的javascript（这是所有需要显示的内容）。我省略了脚本：

```
 <!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
        function showHint(str)
        {
            var xmlhttp;
            if (str.length==0)
            {
                document.getElementById("txtHint").innerHTML="";
                return;
            }
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","gethint.php?q="+str,true);
            xmlhttp.send();
        }

        function addName(str){
            var xmlhttp;
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.open("GET","addName.php?q="+str,true);
            xmlhttp.send();
        }
    </script>
</head>
<body>

<h3>Start typing a name in the input field below:</h3>
<form action="">
    First name: <input type="text" id="txt1" onkeyup="showHint(this.value)" />
</form>
<p>Suggestions: <span id="txtHint"></span></p>
<button type="button" onclick="addName(document.getElementById('txt1').value)">Add Name</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:07:27.493

添加一个onreadystatechange，查看http状态调用，看看是不是报错。

使用 Fiddler 或 Firebug 之类的工具来查看请求是否发出。

你应该是 url 编码的`str`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:07:37.577

请以这种方式更改您的代码

```
<form action="">
    First name: <input type="text" id="txt1" value="ABC-XYZ" onkeyup="showHint(this.value)" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:09:35.577

像这样：

```
 function getXhr() {
      var xmlhttp;
      if (window.XMLHttpRequest) {// code for IE7+, FF, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
      }
      else { // code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      return xmlhttp;
  }

  function showHint(str) {
      var xmlhttp;
      if (str.length==0) {
          document.getElementById("txtHint").innerHTML="";
          return;
      }
      xmlhttp = getXhr();
      xmlhttp.onreadystatechange= function() {
          if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
          }
      };
      xmlhttp.open("GET","gethint.php?q="+str,true);
      xmlhttp.send();
  }

  function addName(str) {
      var xmlhttp = getXhr();
      xmlhttp.onreadystatechange= function() {
         ...your logic here...
      };
      xmlhttp.open("GET","addName.php?q="+str, true);
      xmlhttp.send();
  } 
```

# c - 搜索文件夹会显示内部和外部的所有内容

> ID：11056669
> 
> 赞同：0
> 
> 时间：2012-06-15T19:00:00.487
> 
> 标签：c, file, ubuntu, io, directory

我正在从 Ubuntu 的终端运行我的代码，以搜索特定文件，但搜索会在该文件夹内部以及外部生成文件夹和文件。这是代码：

（编译和运行）

```
#include <stdio.h>     // For perror
#include <stdlib.h>
#include <sys/types.h> // For stat, opendir, readdir
#include <sys/stat.h>  // For stat
#include <unistd.h>    // For stat
#include <dirent.h>    // For opendir, readdir

int displayAllFiles(char * directory)
{

    DIR *dir;
    struct dirent *ent;
        dir = opendir (directory);
    if (dir != NULL) {

      /* print all the files and directories within directory */
      while ((ent = readdir (dir)) != NULL) {
        printf ("%s\n", ent->d_name);
      }
      closedir (dir);
    } else {
      /* could not open directory */
      perror ("");
      return EXIT_FAILURE;
    }

    return 1;

}

int main(int argc , char * argv[])
{

    DIR *dir;
    struct dirent *entry;
    int result;
    struct stat status;
    char path[PATH_MAX];

    dir = opendir(argv[1]);
    if (!dir)
    {
        perror("opendir");
        exit(1);
    }

    entry = readdir(dir);
    while (entry)
    {
        result = snprintf(path, sizeof(path), "%s", argv[1]);
        snprintf(&path[result], sizeof(path) - result, "/%s", entry->d_name);

        int out = displayAllFiles(path);
        printf("%s", path);

        result = lstat(path, &status);
        if (-1 == result)
        {
            printf("\n");
            perror("stat");
            exit(2);
        }

        if (S_ISLNK(status.st_mode))
        {
            printf("%s", " is a symbolic link");
        }

        printf("\n");

        entry = readdir(dir);
    }

    return(0);
} 
```

我从终端打`./exer4 check`，那个文件夹`check`是父文件夹，然后：

*   `insideCheck`在里面`check`
*   `moreInside`在里面`insideCheck`
*   并且`david.txt`在里面`moreInside`

但是，我得到的是：

```
a@ubuntu:~/Desktop$ ./exer4 check
check
..
Link to workspace2
eclipse 4 linux
fol
.
basherFolder
Link to eclipse
test
eclipse
exer4
doc.txt~
check/..
..
.
insideCheck
check/.
..
moreInside
.
david.txt~
check/insideCheck 
```

出了点问题，我可以看到，但不知道是什么。

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:08:51.473

这是因为`.`和`..`也列在当前目录中，这里的`..`意思是父目录。

回答您的评论：将路径与`.`or进行比较`..`不起作用，因为如您所见，路径是`Directory/.`并且`Directory/..`

```
while (entry)
{
    result = snprintf(path, sizeof(path), "%s", argv[1]);
    snprintf(&path[result], sizeof(path) - result, "/%s", entry->d_name);

    char cur_str[80];
    char par_str[80];
    strcpy ( cur_str , argv[1] );
    strcat ( cur_str , "/." );

    strcpy ( par_str , argv[1] );
    strcat ( par_str , "/.." );

    if (strcmp(path,cur_str) == 0 || strcmp(path ,par_str) == 0) {
     break;
    }
    int out = displayAllFiles(path);
    printf("%s", path);

    result = lstat(path, &status);
    if (-1 == result)
    {
        printf("\n");
        perror("stat");
        exit(2);
    }
    if (S_ISLNK(status.st_mode))
    {
        printf("%s", " is a symbolic link");
    }

    printf("\n");

    entry = readdir(dir);
} 
```

上面的代码有效。（虽然它在不是目录的文件上打印“不是目录”错误）。

# actionscript-3 - 在 BitmapData 中保留 PNG 透明度

> ID：11056671
> 
> 赞同：0
> 
> 时间：2012-06-15T19:00:10.353
> 
> 标签：actionscript-3, flash

我正在尝试从具有透明度的 PNG 的 MovieClip 存储 BitmapData。当我`copyPixels()`将存储的 BitmapData 存储到舞台位图的 BitmapData 时，透明度已被替换为纯白色。

我已经在谷歌上搜索了一个多小时，并自己尝试了一些东西。

这是 BitmapData 存储代码：

```
//for all block types
for(var block_type_properties in this.block_types)
{

    //block_types[i][3] = bitmapdata
    this.block_types[block_type_properties].push(new BitmapData(this.block_size,this.block_size,true,0x000000));

    //block_types[i][4] = scale 
    this.block_types[block_type_properties].push(new Number(this.block_size/ this.block_types[block_type_properties][2].width));

    //block_types[i][5] = matrix
    this.block_types[block_type_properties].push(this.block_types[block_type_properties][2].transform.matrix);

    //scale the matrix
    this.block_types[block_type_properties][5].scale(this.block_types[block_type_properties][4],this.block_types[block_type_properties][4]);

    //apply the matrix to the movieclip
    this.block_types[block_type_properties][2].transform.matrix = this.block_types[block_type_properties][5];

    //draw the scaled movieclip into the bitmapdata
    this.block_types[block_type_properties][3].draw(this.block_types[block_type_properties][2],this.block_types[block_type_properties][5]);

} 
```

这是实际将像素粘贴到舞台位图上的部分：

```
this.stage_background_bitmap_data.copyPixels(this.block_types[1][3],new Rectangle(0,0,this.block_size,this.block_size),new Point(blocks_array[block_count]['block'].x,blocks_array[block_count]['block'].y)); 
```

有谁知道为什么 PNG 中的透明度被替换为白色？

## 编辑：

这是构造函数中的两行代码：

```
this.stage_background_bitmap_data = new BitmapData(this.level_width,this.level_height,true,0x00000000);         
this.stage_background_bitmap = new Bitmap(this.stage_background_bitmap_data); 
```

我已经排除了矩阵缩放的问题。我删除了它，对透明度没有影响，或者缺乏透明度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:39:49.663

指定`mergeAlpha`参数。从文档中[`BitmapData.copyPixels()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29)：

> mergeAlpha 属性控制将透明图像复制到另一个透明图像时是否使用 Alpha 通道。要使用 Alpha 通道数据复制像素，请将 mergeAlpha 属性设置为 true。默认情况下，mergeAlpha 属性为 false。

# php - mysql fulltext columns priority

> ID：11056675
> 
> 赞同：3
> 
> 时间：2012-06-15T19:00:29.953
> 
> 标签：php, mysql, search, full-text-search

How can I set priority for multiple columns in mysql fulltext search ?

```
SELECT ID, POSITION, DATA, DATE_FORMAT(DATA, '%Y-%m-%d') AS DATE 
FROM VACANCIES 
WHERE VACANCIES.VISIBLE = '1' 
AND MATCH(POSITION, REQUITEMENST) AGAINST('mysql') 
AND MATCH(POSITION, REQUITEMENST) AGAINST('php') 
ORDER BY DATE(DATA) DESC 
LIMIT 1000 
```

I need to get first results matched column POSITION, then REQUITEMENST

# ruby - Test Ruby multi dimensional hash

> ID：11056680
> 
> 赞同：0
> 
> 时间：2012-06-15T19:00:50.477
> 
> 标签：ruby

> **Possible Duplicate:**
> [Is there a clean way to avoid calling a method on nil in a nested params hash?](https://stackoverflow.com/questions/5429790/is-there-a-clean-way-to-avoid-calling-a-method-on-nil-in-a-nested-params-hash)

Is there an easy way to check if a value in a multi dimensional hash is set without catching the NoMethodException?

Ex.:

```
do_x if cat['level1']['level2']['level3'] != 'value' 
```

The problem is, that 'level2' might not even exist, so the receiver is nil.

In PHP you can just put an '@' in front to suppress the error.

In Ruby I would have to wrap the check in a begin-rescue block.

Is there a quick solution like in PHP?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:05:41.913

```
do_x if cat['level1']['level2']['level3'] != 'value' rescue nil 
```

这是内联`rescue`。问题是它可以隐藏错误，因为它可以从*任何* `RuntimeError`. 你真的应该使用正确的`begin`-`rescue`块来代替：

```
begin
  do_x if cat['level1']['level2']['level3'] != 'value'
rescue NoMethodError => error
  puts error.message
end 
```

话虽如此，为什么不消除嵌套并完全避免这个问题呢？

```
do_x if cat['level1.level2.level3'] != 'value' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:03:36.087

```
class MyHash < Hash
  def initialize(levels=0)
    super()
    self.default = MyHash.new(levels-1) if levels > 1
  end
end

cat = MyHash.new(3)

cat['level1']                     #=> {}
cat['level1']['level2']           #=> {}
cat['level1']['level2']['level3'] #=> nil 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:36:25.750

我会使用尝试方法而不是救援。 `do_x if cat['level1'].try(:[], 'level2').try(:[], 'level3')`因此，如果 do_x 引发异常，它将不会被救出，您实际上会看到 do_x 内部是否出现问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:15:02.293

您可以在 nil 上重新定义 [] ，使其在运行代码之前表现得像您想要的那样：

```
class NilClass
  def[](key)
    nil
  end
end 
```

# php - the top option option in a selected list is being loaded as one of the dynamic drop down options

> ID：11056681
> 
> 赞同：-1
> 
> 时间：2012-06-15T19:01:01.023
> 
> 标签：php

I have a dynamic drop down menu which is hooked up to a query_string to send to the next screen, how can I validate the information from the drop down menu before it gets sent to the next page? I just don't know how to indentify the dynamic drop down. Thanks again!! This is through the server also. here is the code I have so far.

```
<tr><td id="giftCardSelectTd">Choose a Gift Card</td></tr><tr><td id="two"> <select name="productId" id="input1">
    <option value="0">Select Card</option><? while($rows=mysql_fetch_array($result)) {$productId=$rows['productId'];$productPrice=$rows['price'];if($productId == '0'){
    $error="Please select a Gift Card."; header('Location: convenientgiftcardpage.php');}if($productPrice < 0){
    $anchor='<td><a id="addtocartbtn" href="convenientcartpage.php?add='. $productId . '">Add to Cart</a></td>';
}
else{
    $anchor='<td><a id="addtocartbtn" href="convenientcartpage.php?add='. $productId . '">Add to Cart</a></td>';
}

    ?>
    <option value="<?php echo $productId;?>">$<?=number_format($productPrice,2);?></option>
    <? } ?></select></td><?php echo $anchor;?>

    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:07:06.217

感谢您的帮助，但我想通了！当我使用 GET 方法将代码放入表单时，我可以将下拉列表值发送到购物车，并使用在代码的购物车页面上设置的 Select name""。再次感谢你的帮助。PS我试图将代码放在问题的原始帖子中，但没有成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:17:33.340

```
<form name="myform" method="POST" action="" >

<select name="productId" id="input1"> 
<option value="Select Card">Select Card</option>

<?php while($rows=mysql_fetch_array($result)) {
   $productId=$rows['productId'];$productPrice=$rows['price'];
   if ($productPrice < 0) { 
      $anchor='<td><a id="addtocartbtn" href="convenientcartpage.php?add='. $productId . '">Add to Cart</a></td>'; } 
   else {
      $anchor='<td><a id="addtocartbtn" href="convenientcartpage.php?add='. $productId . '">Add to Cart</a></td>';
   }
?> 

<option value="<?php echo $productId;?>">$<?=number_format($productPrice,2);?>
</option> <?php } ?>
</select></td>

<input type="submit" value="Continue" class="btn"/>

<?//php echo $anchor;?>
</form>

<?php
   if((strcmp($_SERVER['REQUEST_METHOD'],'POST')==0) {
      $products = $_POST["productId"] ;
      // validate it
      if (everything is fine) {
         header("location:".$anchor)
      }
   }
?> 
```

希望这可以帮助

# java - Autowiring a DAO into a domain object

> ID：11056693
> 
> 赞同：4
> 
> 时间：2012-06-15T19:02:08.697
> 
> 标签：java, spring, spring-mvc, dao, autowired

I am coding a ribbon/achievements system for a website and I have to write some logic for each ribbon in my system. For example, you could earn a ribbon if you're in the first 2,000 people registering to the website or after 1,000 post in the forum. The idea is very similar to stackoverflow's badges, really.

So, every ribbon is obviously in the database but they also need a bit of logic to determine when a user has earned the ribbon.

In the way I coded it, `Ribbon` is a simple abstract class:

```
@Entity
@Table(name = "ribbon")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "ribbon_type")
public abstract class Ribbon
{
    @Id
    @Column(name = "id", nullable = false, length = 8)
    private int id;

    @Column(name = "title", nullable = false, length = 64)
    private String title;

    public Ribbon()
    {
    }

    public abstract boolean isEarned(User user);

    // ... getters/setters...
} 
```

You can see I define the inheritance strategy as `SINGLE_TABLE` (since I have to code like 50 ribbons and I don't need additional columns for any of them).

Now, a specific ribbon will be implemented like this, for example:

```
@Entity
public class First2000UsersRibbon extends Ribbon
{
    @Autowired
    @Transient
    private UserHasRibbonDao userHasRibbonDao;

    public First2000UsersRibbon()
    {
        super.setId(1);
        super.setTitle("Between the first 2,000 users who registered to the website");
    }

    @Override
    public boolean isEarned(User user)
    {
        if(!userHasRibbonDao.userHasRibbon(user, this))
        {
            // TODO
            // All the logic to determine whether the user earned the ribbon
            // i.e. check whether the user is between the first 2000 users who registered to the website
            // Other autowired DAOs are needed
        }
        else
        {
            return true;
        }

        return false;
    }
} 
```

The problem is that `userHasRibbonDao` is null inside the `isEarned()` method, so a `NullPointerException` is thrown.

I thought that having DAOs autowired into domain objects was wrong, but in [this topic](https://stackoverflow.com/questions/10676539/business-logic-in-domain-objects) they told me that it's the correct approach (Domain-Driven Design).

I shared a non-working very simple example on GitHub: [https://github.com/MintTwist/TestApp](https://github.com/MintTwist/TestApp) (remember to change the connection details in /WEB-INF/properties/jdbc.properties and to import the test_app.sql script)

Any help very appreciated.

Thank you!

**Update** - Reading the first answers, it seems like my approach is completely wrong. How would you ideally structure the code given that there may be 50-70 different ribbons? Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T19:47:40.677

我并不是说我同意将 DAO 注入到域实例中……但是

您可以将您的 DAO 连接到您的域对象中。但是你必须在你的 spring 应用程序上下文中声明你的域对象，并从 Spring 中获取新实例，而**不是**使用`new`. 确保您使用原型范围！您不想每次都获得相同的单例实例！

实际上，您想要实现的这个逻辑属于一个注入了它需要的 DAO 的服务。

也许你可以有这样的服务：

```
@Service
public class RibbonServiceImpl implements RibbonService

  @Autowired
  private RibbonDAO ribbonDAO;

  public boolean isEarned(Ribbon ribbon, User user) {
   if(!userHasRibbonDao.userHasRibbon(user, this))
        {
            // TODO
            // All the logic to determine whether the user earned the ribbon
            // i.e. check whether the user is between the first 2000 users who registered to the website
            // Other autowired DAOs are needed
        }
        else
        {
            return true;
        }

        return false;
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T20:40:57.257

将其标记为`@Configurable`- [@Configurable](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/Configurable.html)注释将确保即使 bean 是在 Spring 之外创建的，也会注入依赖项

您还需要`<context:spring-configured/>`在您的上下文中添加。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T11:02:10.283

缺少一个答案，它并不漂亮，但它有效。您可以从 WebApplicationContext 中查找它，而不是连接 Dao：

```
RibbonDao dao = ContextLoader.getCurrentWebApplicationContext.getBean(RibbonDao.class); 
```

这与依赖注入所代表的一切相反（我喜欢将此模式称为“控制反转反转”:-)），但是：将服务注入域对象也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:26:45.120

从我可以看到你的休眠类的设计，以及获得的丝带的持久性，都很好。我认为问题在于您何时以及如何确定用户是否获得了新丝带。

假设一个新请求来自登录用户。User 对象由 Hibernate 创建和填充，我们现在知道该用户已经在 userHasRibbonSet 中获得的所有 Ribbon。我们可能需要在 User 中使用这样的方法：

```
public boolean hasEarnedRibbon(Ribbon ribbon) {
    for (UserHasRibbon userHasRibbon : userHasRibbonSet) {
        if (userHasRibbon.getRibbon().equals(ribbon) {
            return true;
        }
    }
    return false;
} 
```

（这可能可以通过将功能区本身缓存在 Set 中并进行恒定时间查找来优化，但这不是关键）

请求被处理，用户对象被更新以反映发生了什么。然后，在出去的路上，你检查用户现在获得了什么丝带，像这样：

```
public class RibbonAwardingInterceptor extends HandlerInterceptorAdapter {

    @Resource
    private SessionFactory sessionFactory;
    @Resource // assuming it's a request-scoped bean; you can inject it one way or another
    private User user;

    public void postHandle(HttpServletRequest request, HttpServletResponse response, 
       Object handler, ModelAndView modelAndView) throws Exception {

        List<Ribbon> allRibbons = sessionFactory.getCurrentSession().createQuery("from Ribbon").list();

        for (Ribbon ribbon : allRibbons()  {
            if (!user.hasEarnedRibbon(ribbon)) {
                // The user has not previously earned this ribbon - lets see if they have now
                if (ribbon.isEarned(user)) {
                    user.getUserHasRibbonSet().add(new UserHasRibbon(user, ribbon));
                }
            }
        }
    }
} 
```

如果您想使用这种确切的模式，请确保此拦截器在任何以与功能区相关的方式更新用户的拦截器之后，但在关闭事务的拦截器之前（假设您使用的是每请求事务模型）。然后刷新 Hibernate Session 将自动更新 UserHasRibbon 表，因此不需要专门的 DAO。

这是一种简单的方法，显然可以改进。一个明显的改进是对您正在检查的功能区更具选择性。也许每个 Controller 方法都可以通过检查是否有任何相关的 Ribbons 现在适用来完成 - Controller 应该知道在其操作之后可以授予哪些 Ribbons。

希望对您有所帮助，如果我完全错过了重点，请告诉我，我会再试一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T03:50:45.333

Why use DAO in the DomainObject? I suggest to decouple DAO and DomainObject, because (IMHO) the method isEarned(User user) is not relevant for First2000UsersRibbon.

```
class UserHasRibbonDao {
    public boolean isEarned(User user){
        if(!userHasRibbonDao.userHasRibbon(user, this)) {
        // TODO
        // All the logic to determine whether the user earned the ribbon
        // i.e. check whether the user is between the first 2000 users who registered to the website
        // Other autowired DAOs are needed
        } else {
           return true;
        }

        return false;}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T07:32:09.723

您还可以尝试在**First2000UsersRibbon**类上使用`@Component`注释声明以及 @Entity 注释。并确保具有此类的包在. 除此之外，您还需要确保该类的对象不是使用运算符创建的。**`<context:component-scan base-package="" />``new`**

 **希望这对您有所帮助。干杯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T16:05:05.377

我认为你需要调整你的设计。我的第一个问题是“你的 Ribbon 类为什么能够检查哪个用户拥有它？” 这就像说厨房的桌子应该有一个名为`boolean doesThisKitchenHaveMe(Kitchen k)`.

对我来说，您需要将功能区映射到用户的第三个定位器服务似乎更合乎逻辑

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-20T02:07:13.423

正如 Alex 已经提到的，将应用程序实体作为 bean 在您的上下文中并不是一个好习惯。有很多麻烦的事情会发生，看起来不像是一个好的设计。

代码将如下所示：

```
public abstract class Ribbon{

    public abstract boolean checkUser(User user);
}

public class NewUserRibbon extends Ribbon{

    @Override
    public boolean checkUser(User user){
        // your logic here
    }
} 
```

在您的服务中，您可以拥有系统中所有功能区的缓存集合（除非它们是动态的），我建议甚至按事件触发器（新用户、答案、投票等）对功能区进行分类，这样您就可以通过与当前用户一起迭代适用的功能区列表，只为适当的功能区（而不是所有功能区）检查您的服务。**

# c# - CA2000 警告可以通过注释掉看似无关的代码来删除

> ID：11056694
> 
> 赞同：5
> 
> 时间：2012-06-15T19:02:12.147
> 
> 标签：c#, .net, code-analysis, idisposable

问题是 VS2010 代码分析针对特定功能返回两个 CA2000 警告。我没有成功地用较小的代码块重现警告，所以我已经完整地发布了原始函数。

```
public int SaveTransaction( Transaction tx, UserAccount account ) {

        if ( tx == null ) {
            throw new ArgumentNullException( "tx" );
        }

        if ( account == null ) {
            throw new ArgumentNullException( "account" );
        }

        bool isRefund = tx.TransactionType == LevelUpTransaction.TransactionTypes.Refund;

        int pnRef = 0;

        using ( SqlConnection conn = new SqlConnection( DatabaseConfiguration.ConnectionString ) ) {

            using ( SqlCommand cmd = new SqlCommand( "dbo.SaveTransaction", conn ) ) {

                cmd.CommandType = CommandType.StoredProcedure;

                cmd.Parameters.Add( "@InvoiceId", SqlDbType.VarChar, 100 ).Value = tx.InvoiceNumber;
                cmd.Parameters.Add( "@TxStartDate", SqlDbType.DateTime ).Value = tx.TransactionBeginDate;
                cmd.Parameters.Add( "@AuthDate", SqlDbType.DateTime ).Value = tx.AuthenticationDate;
                cmd.Parameters.Add( "@MerchantKey", SqlDbType.Int ).Value = account.MerchantKey;
                cmd.Parameters.Add( "@UserName", SqlDbType.Char, 25 ).Value = account.UserName;
                cmd.Parameters.Add( "@RegisterNumber", SqlDbType.Char, 10 ).Value = tx.RegisterNumber;
                cmd.Parameters.Add( "@ResellerKey", SqlDbType.Int ).Value = account.ResellerKey;
                cmd.Parameters.Add( "@TxEndDate", SqlDbType.DateTime ).Value = tx.TransactionEndDate;
                cmd.Parameters.Add( "@IpAddress", SqlDbType.VarChar, 15 ).Value = account.IPAddress;
                cmd.Parameters.Add( "@CustomerId", SqlDbType.VarChar, 50 ).Value = tx.CustomerId;
                cmd.Parameters.Add( "@TransactionId", SqlDbType.VarChar, 50 ).Value = tx.TransactionId;
                cmd.Parameters.Add( "@ProcStartDate", SqlDbType.DateTime ).Value = tx.ProcessorBeginDate;
                cmd.Parameters.Add( "@ProcEndDate", SqlDbType.DateTime ).Value = tx.ProcessorEndDate;
                cmd.Parameters.Add( "@AuthAmount", SqlDbType.Money ).Value = StringParser.ParseDecimal( tx.OriginalAmount );
                cmd.Parameters.Add( "@ResultCode", SqlDbType.VarChar, 50 ).Value = tx.ResultCode;
                cmd.Parameters.Add( "@ResultMessage", SqlDbType.VarChar, 150 ).Value = tx.ResultMessage;
                cmd.Parameters.Add( "@PONumber", SqlDbType.VarChar, 100 ).Value = tx.PurchaseOrderNumber;
                cmd.Parameters.Add( "@TaxAmount", SqlDbType.Money ).Value = StringParser.ParseDecimal( tx.TaxAmount );
                cmd.Parameters.Add( "@Refund", SqlDbType.Bit ).Value = isRefund;

                if ( tx.Order != null ) {
                    cmd.Parameters.Add( "@HostDate", SqlDbType.VarChar, 50 ).Value = tx.Order.HostTime.ToString();
                    cmd.Parameters.Add( "@ApprovalCode", SqlDbType.VarChar, 50 ).Value = tx.Order.TransactionId.ToString( CultureInfo.InvariantCulture );
                    cmd.Parameters.Add( "@NameOnCard", SqlDbType.VarChar, 200 ).Value = tx.Order.UserFirstName + " " + tx.Order.UserLastNameInitial;
                    cmd.Parameters.Add( "@TipAmount", SqlDbType.Money ).Value = StringParser.ParseDecimal( tx.Order.Tip.FormattedAmount );
                    cmd.Parameters.Add( "@TotalAmount", SqlDbType.Money ).Value = StringParser.ParseDecimal( tx.Order.TotalAmount.FormattedAmount );
                    cmd.Parameters.Add( "@DiscountAmount", SqlDbType.Money ).Value = StringParser.ParseDecimal( tx.Order.CreditAmount.FormattedAmount );
                }

                else  {
                    cmd.Parameters.Add( "@NameOnCard", SqlDbType.VarChar, 200 ).Value = DBNull.Value;
                    cmd.Parameters.Add( "@HostDate", SqlDbType.VarChar, 50 ).Value = DBNull.Value;
                    cmd.Parameters.Add( "@ApprovalCode", SqlDbType.VarChar, 50 ).Value = DBNull.Value;
                    cmd.Parameters.Add( "@TipAmount", SqlDbType.Money ).Value = 0;
                    cmd.Parameters.Add( "@TotalAmount", SqlDbType.Money ).Value = 0;
                    cmd.Parameters.Add( "@DiscountAmount", SqlDbType.Money ).Value = 0;
                }

                if ( isRefund ) {
                    cmd.Parameters.Add( "@OriginalPnRef", SqlDbType.Int ).Value = tx.OriginalToken;
                }

                conn.Open();

                using ( SqlDataReader dr = cmd.ExecuteReader() ) {

                    while ( dr.Read() ) {
                        pnRef = SqlNull.Integer( dr["TRX_HD_Key"] );
                    }
                }
            }

        }

        return pnRef;
    } 
```

两个 CA2000 警告与包含`SqlConnection`and的 using 语句有关`SqlCommand`。

我在代码本身中找不到任何问题，但我发现随意注释行会使错误消失。例如，注释掉`else`块中设置为 0 的三个货币字段将删除警告。相反，在最后用 DBNull.Value 注释掉这三行也将消除错误。我无法理解结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T08:08:42.577

这已在[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/521027/i-am-seeing-a-ca200-warning-call-dispose-on-a-variable-declared-within-a-using-statement)上报告为分析器中可能存在的错误。显然，如果`using`语句包含大量代码，则会错误地报告此消息。

可以通过以下方式抑制它：

```
[System.Diagnostics.CodeAnalysis.SuppressMessage( "Microsoft.Reliability", "CA2000:Dispose objects before losing scope" )] 
```

# php - 缺少链接：使用 google PHP 移动脚本打开跟踪电子邮件

> ID：11056697
> 
> 赞同：1
> 
> 时间：2012-06-15T19:02:17.210
> 
> 标签：php, google-analytics, html-email

*免责声明：我知道有更好的方法来跟踪电子邮件打开率，无论如何这确实是一个二等指标，但是对于这个问题，我需要以这种方式解决这个问题，这是一次性问题。*

问题：**我需要一种快速而肮脏的方式来跟踪电子邮件的打开情况。** 它来自我们的本地邮件服务器，因此没有可用的灵活邮件服务功能。我发现很多文章和想法主要围绕 1x1 gif 展开。这很好，因为我正在跟踪的电子邮件主要是图像。我进行了很多研究，但没有找到确凿的帮助——其中一些方法显然容易受到 SQL 注入攻击，具有死链接的资源，而另一些方法对我来说只是模糊，无法完全理解如何实现。

我从谷歌找到了最有希望的解决方案（天哪，我喜欢那些家伙（和女孩））

**Google 提供了一个方便的 PHP 小脚本，用于跟踪**移动网站上打开的页面： [https ://developers.google.com/analytics/devguides/collection/other/mobileWebsites](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)

这个 PHP 看起来解决了 90% 的问题。**对于如何实施将跟踪图像/链接嵌入到我的外发电子邮件中的解决方法，我只是有点模糊。** 我是否应该只嵌入图像链接并使用 mod 重写来查找该图像，然后重定向到对 google php 脚本的 http 请求？我可以标记图像并从该标记运行脚本吗？或者....它必须来自打开电子邮件（并加载图像）而不是单击链接。

预先感谢您的意见。越详细越好，因为我还在学习。

祝一切顺利！

——克里斯·M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:34:23.507

克里斯的基本前提是您有一个不是正常`.jpg`或图像的跟踪`.gif`图像。

例如，您的 html 电子邮件中会有这样的图像

```
<img src="trackerpage.php" width="1" height="1" /> 
```

然后在您的跟踪页面上，您可以从用户那里获取一些信息，也许可以通过将查询字符串添加到`trackerpage.php?id=1000`. 一旦你掌握了细节，你就需要将图像实际发送回给用户。

为此，我建议您阅读此页面：[http ://www.ehow.com/how_7280601_send-php-image-file.html](http://www.ehow.com/how_7280601_send-php-image-file.html)

如果您想扩展任何内容，请发表评论:)

# twitter-bootstrap - 如何为 tablesorter 和 bootstrap 设置 css？

> ID：11056699
> 
> 赞同：5
> 
> 时间：2012-06-15T19:02:25.923
> 
> 标签：twitter-bootstrap, tablesorter

Tablesorter 可以在引导程序 2 中正确排序，但我不知道如何设置表头的颜色和插入符号。

[我在这里](http://joshmcarthur.com/2012/05/14/bootstrap-tablesorter-styles.html)找到的最有可能的 CSS是：

```
table .header {
    cursor: pointer;
}

table .header:after {
  content: "";
  float: right;
  margin-top: 7px;
  border-width: 0 4px 4px;
  border-style: solid;
  border-color: #000000 transparent;
  visibility: hidden;
}

table .headerSortUp, table .headerSortDown {
  background-color: #f7f7f9;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
}

table .header:hover:after {
  visibility: visible;
}

table .headerSortDown:after, table .headerSortDown:hover:after {
  visibility: visible;
  filter: alpha(opacity=60);
  -moz-opacity: 0.6;
  opacity: 0.6;
}

table .headerSortUp:after {
  border-bottom: none;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid #000000;
  visibility: visible;
  -webkit-box-shadow: none;
  -moz-box-shadow: none;
  box-shadow: none;
  filter: alpha(opacity=60);
  -moz-opacity: 0.6;
  opacity: 0.6;
} 
```

但没有运气。

有人能分享一下成功的故事吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T02:15:04.513

也许它应该被添加到原始 style.css 文件（[demo](http://jsfiddle.net/Mottie/eY8uH/10/)）中：

```
/* tables */
table.tablesorter {
    font-family:arial;
    background-color: #CDCDCD;
    margin:10px 0pt 15px;
    font-size: 8pt;
    width: 100%;
    text-align: left;
}
table.tablesorter thead tr th, table.tablesorter tfoot tr th {
    background-color: #e6EEEE;
    border: 1px solid #FFF;
    font-size: 8pt;
    padding: 4px;
}
table.tablesorter thead tr .header {
    background-image: url(bg.gif);
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
}
table.tablesorter tbody td {
    color: #3D3D3D;
    padding: 4px;
    background-color: #FFF;
    vertical-align: top;
}
table.tablesorter tbody tr.odd td {
    background-color:#F0F0F6;
}
table.tablesorter thead tr .headerSortUp {
    background-image: url(asc.gif);
}
table.tablesorter thead tr .headerSortDown {
    background-image: url(desc.gif);
}
table.tablesorter thead tr .headerSortDown, table.tablesorter thead tr .headerSortUp {
    background-color: #8dbdd8;
}
table .header {
    cursor: pointer;
}

/* bootstrap */
table.tablesorter .header:after {
    content: "";
    float: right;
    margin-top: 7px;
    border-width: 0 4px 4px;
    border-style: solid;
    border-color: #000000 transparent;
    visibility: hidden;
}
table.tablesorter .headerSortUp, table .headerSortDown {
    background-color: #f7f7f9;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
}
table.tablesorter .header:hover:after {
    visibility: visible;
}
table.tablesorter .headerSortDown:after, table .headerSortDown:hover:after {
    visibility: visible;
    filter: alpha(opacity=60);
    -moz-opacity: 0.6;
    opacity: 0.6;
}
table.tablesorter .headerSortUp:after {
    border-bottom: none;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-top: 4px solid #000000;
    visibility: visible;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    filter: alpha(opacity=60);
    -moz-opacity: 0.6;
    opacity: 0.6;
} 
```

此外，如果您想在标题中添加任何其他 HTML，则`onRenderHeader`可以使用一个未记录的选项来添加，例如，在每个标题 ( [ref](http://wowmotty.blogspot.com/2011/06/jquery-tablesorter-missing-docs.html#onRenderHeader) ) 中添加一个跨度：

```
$(function(){
  $("table").tablesorter({
    onRenderHeader: function(){
      this.prepend('<span class="icon"></span>');
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:49:31.293

我遇到了同样的问题，并找到了一个非常简单的解决方案：

```
table.tablesorter thead tr .header {
    background-image: url(../img/tablesorter-bg-grey.gif);
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
    min-width: 30px;
}
table.tablesorter thead tr .headerSortUp {
    background-image: url(../img/tablesorter-asc-grey.gif);
}
table.tablesorter thead tr .headerSortDown {
    background-image: url(../img/tablesorter-desc-grey.gif);
} 
```

当然，您必须将“tablesorter”类添加到可排序表中。我已经更改了图像，您应该将图像文件名调整为包含的标准图像。

# javascript - Is there a way to blur/highlight the text of a radio button?

> ID：11056700
> 
> 赞同：0
> 
> 时间：2012-06-15T19:02:32.613
> 
> 标签：javascript, css, radio-button

I have a form. When the user clicks "disable" I want to disable all the radio button and also blur/highlight the text so that it looks more "disabled".

How can I do that?

I tried adding a class to that element and using the blur function but it doesn't work. If editing the text CSS is impossible, is it possible to change the color of the button or put a border around the text?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:11:20.387

我不确定你的问题是什么，任务看起来很简单。只要您想支持旧版本的 Internet Explorer，就没有真正的 CSS 方式来模糊文本，但改变它的颜色应该没问题。这是一个简单的例子：

```
$(function() {
    $('#disable').on('click', function() {
        $('#myradio').attr('disabled', 'disabled').parent().addClass('disabled');
    });
}) 
```

现场演示 - [http://jsfiddle.net/Pharaon/ggzjF/](http://jsfiddle.net/Pharaon/ggzjF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:07:03.190

该`blur`功能实际上并没有（视觉上）模糊任何东西。它从元素中移除焦点。没有任何代码很难为您提供帮助，但这应该可以帮助您：

[如何使用 CSS3 模糊文本](http://www.sitepoint.com/css3-blurred-text-effect/#fbid=0mDjvjgZP21)

要禁用单选按钮的单击，请设置`disabled`属性。

```
<input type="radio" disabled> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:25:12.770

演示：http: [//jsfiddle.net/RXs8B/1/](http://jsfiddle.net/RXs8B/1/)

HTML

```
<input type="radio" id="radio" value="1" />
<label for="one" id="forRadion">First Item</label>
​&lt;button id="blur">blur it</button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

jQuery

```
​$(function(){

    $("#blur").click(function()
                     {
                        $("#forRadion").css("color","#F00"); 
                         $("#radio").attr("disabled","true");//apply you own blur color
                     });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:19:36.413

```
$(function() {
    $('#disableBtn').on('click', function() {
        $('#formId input').attr('disabled', 'disabled').addClass('disabledClass');
    });
}) 
```

# javascript - 更改刻度标签的颜色

> ID：11056702
> 
> 赞同：1
> 
> 时间：2012-06-15T19:02:39.400
> 
> 标签：javascript, openlayers

我正在尝试更改我的 openlayers 地图上的刻度标签的颜色，但我无法使其工作。这是我正在做的事情：

```
this.Graticule = new OpenLayers.Control.Graticule({
        numPoints: 2,
        labelled: true,
        lineSymbolizer:{strokeColor: "#ffffff", strokeWidth: 1, strokeOpacity: 0.2},
        labelSymbolizer:{strokeColor: "#ffffff", strokeWidth: 1, strokeOpacity: 0.7}
    }); 
```

颜色线在变化，但我总是得到黑色标签。

有人可以在这里帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:40:13.900

为了更改文本标签，您需要定义字体属性：

```
labelSymbolizer: {
    fontColor: "#ffffff",
    fontSize: "12px"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:28:36.560

我没有使用 OpenLayers 的经验，但从我所见应该可以工作。但是，我也无法让它工作。另一种方法是使用 CSS，例如：

```
tspan{
    stroke: green;
} 
```

但是，这将使所有标签变为绿色，这可能不是有意的。正如我所说，我没有使用 OpenLayers 的经验，但也许有一些方法可以将 CSS 规则锁定为仅使用刻度文本？

# javascript - Backbone Marionette: Marionette.Application causing Require.js module load error, "'Error: Module name 'App' has not been loaded yet for context: _"

> ID：11056703
> 
> 赞同：0
> 
> 时间：2012-06-15T19:02:49.413
> 
> 标签：javascript, backbone.js, requirejs, js-amd, marionette

I'm trying to include the App instance to use it's event aggregator as shown [here](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.application.md)

I get an error when I include the instance in a view.

Kicking things off in the Requirejs config file, from App.Bootloader.js:

```
require(['App'], function (App){
      App.start();
      }); 
```

from App.js:

```
define(function (require){

  //...requisite includes $, _, Backbone, Marionette ...

var Layout = require('Layout');

  var App = new Marionette.Application();

        App.addRegions({
            main: '#view_content'
        });

        App.addInitializer(function (){

                App.main.show(new Layout());
                //... adding router etc ...    

                Backbone.Marionette.TemplateCache.loadTemplate = function (template, callback){
                   callback.call(this, Handlebars.compile(template));
                };
                Backbone.history.start();

        });

    return App;
}); 
```

From Layout.js:

```
define(function(require){
   var View = require('folder/folder/View');
   //template contains #sub div
   var template = require('text!template.html');

   return Marionette.Layout.extend({
      template: template,
      regions: {
         sub: '#sub'
      },
      initialize: function(){
         //wait till template is rendered in dom
         _.defer(function(region){
             region.sub.show(new View());
          }, this)
      }

   });

}); 
```

From /folder/folder/View.js:

```
define(function (require){

      //...requisite includes $, _, Backbone, Marionette ...

     var App = require('App');
     return Marionette.ItemView.extend({});
}); 
```

Where I get the error "'Error: Module name 'App' has not been loaded yet for context: _"

Any ideas? Lemme know if you need more information.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T02:04:09.093

我也在寻找一种使用 marionette 和 require.js 处理这种情况的好方法

我已经研究了一个解决方案，但我不知道这是否是最好的方法，这是我的想法：

*   应用程序在不了解视图的情况下将操作附加到事件
*   在视图中，我们使用触发器将动作附加到事件
*   视图和应用程序之间的动作连接在视图内部进行

这是一个可能的解决方案：

应用程序.js

```
define( [ 'underscore', 'jquery', 'backbone', 'marionette' , 'view'], 
    function( _, $, Backbone, Marionette, View  ) {

    var app = new Marionette.Application();
    app.addRegions({ content: '#content'})

    app.on( "initialize:after", function(){

        console.log( 'after init', app)

        var view = new View();
        app.content.show( view );

    });

    // this is the action that we would like to call from the view      
    app.vent.on( 'viewClick', function(){ console.log( 'clicked on view' )})

    return app;
}); 
```

视图.js

```
define( [ 'underscore', 'jquery', 'backbone', 'marionette' ], 
    function( _, $, Backbone, Marionette ) {

    var View = Marionette.ItemView.extend({
        template: '#view',

        triggers: {
            'click': 'clicked'
        },

        initialize: function(){

            // thisView will be referring to the view instance
            var thisView = this;

            // we require the app because we need access to the event aggregator 
            require(['app'], function( app ){

                // when our event is triggered on our view
                thisView.on( 'clicked', function(){ 
                    // we trigger an event on the application event aggregator
                    app.vent.trigger( 'viewClick' )
                });
            });
       }
    })

    return View
}); 
```

重要的是要记住 require 是异步的，所以当我们这样使用它时，它不会立即执行：

```
require( ['some-module'], function( someModule ){ 
   // do something, but only as soon as someModule is loaded 
}); 
```

我们可以准备指向外部上下文的对象，如下所示：

```
var thisName = this;
require( ['some-module'], function( someModule ){ 
   // access to external this using thisName
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T00:25:49.930

我猜你有[循环依赖](http://requirejs.org/docs/api.html#circular)的问题。`App`需要`View`和`View`需要`App`。嗯……但为什么`View`需要`App`？我无法从您的代码中计算出来。最后，你确定`View`需要`App`吗？顺便说一句，我认为你打错了。第一个`From /folder/folder/View.js`大概应该是`From Layout.js`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T15:48:53.657

user1248256 是正确的。我有同样的问题。我的应用需要一个控制器，而我的控制器需要应用。

通过将控制器（代码视图）作为选项的一部分传递，我不必将其添加到 require.js 定义中。

```
//data-main:
define(function(require) {
    var   $                 = require("jquery"),
        _                   = require("underscore"),
        App                 = require("app/App"),
        PublicRouter        = require("routers/DesktopRouter"),
        PublicController    = require("routers/publicController");

    var options = {
        publicController  :   PublicController,
        publicRouter      :   PublicRouter

    }

    App.start(options);
}); 
```

现在在应用程序中，我不必“要求” PublicController

```
//App:
define(['jquery', 'backbone', 'marionette', 'underscore'],
function ($, Backbone, Marionette, _) {
    var App = new Marionette.Application();
    ...snip...
        console.log("Creating Routers");
        App.Routers = {};
        // Connect controllers to its router via options
        // init router's router/controller
        App.Routers.publicRouter = new options.publicRouter.Router({
            controller: options.publicController
        });
    }); 
```

希望有帮助。

安德鲁

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-21T20:17:14.967

我通常认为在使用 requireJS 时使用应用程序的 EventAggregator 是一种不好的做法，如果没有其他原因，只是很容易以循环引用结束。

只需定义一个单独的 EventAggregator 模块，App、View 和 Layout 都可能需要它，然后将其添加到任何需要它的模块的依赖项中。

# xcode - How to avoid Xcode 4 adding a width constraint to an NSPopUpButton?

> ID：11056705
> 
> 赞同：2
> 
> 时间：2012-06-15T19:02:54.470
> 
> 标签：xcode, cocoa, autolayout, nspopupbutton

The problem here is how to add an `NSPopUpButton` in Xcode 4's Interface Builder pane without IB also adding an (unwanted) width constraint.

In Interface Builder in Xcode 4.3 on Lion using Auto Layout, if you add a normal button to a view, Xcode will add constraints that pin the button to one of the vertical borders and one of the horizontal borders of the view. The width is determined by by the button's intrinsic content size.

If I do the same thing with an `NSPopUpButton`, Interface Builder adds a width constraint to the button, that I can't find a way to get rid of in IB.

I have tried to change the priority of the width constraint (which would suit my intent, as long as I can make it lower than my content compression resistance), but it adds a new one at 1000 immediately.

Any ideas about how to do it in Interface Builder, or do I have to do it programmatically?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T11:08:49.670

事实证明，有一个简单的解决方案：

在编辑器菜单下，选择`Size to Fit Content`(Cmd-=)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T04:40:15.190

使用 Xcode 4，您需要添加足以满足布局的约束，然后删除不需要的约束。

在 Xcode 5 中，它一开始是没有的，所以你可以随时添加。

# eclipse - In Eclipse, how do I use Navigator to look at files outside my workspace?

> ID：11056710
> 
> 赞同：0
> 
> 时间：2012-06-15T19:03:22.887
> 
> 标签：eclipse

I'd like to use Eclipe's handy Navigator panel to browse files -- e.g. library files -- outside of my workspace. Is that possible? If so, how? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:46:58.507

您可以通过以下两种方式之一进行操作，尽管这些方式有点杂乱：

1.  创建一个新的常规项目。当您输入项目名称（组成一个）时，取消选中“使用默认位置”复选框。使用浏览按钮导航到包含您要浏览的文件的目录（或父目录）并选择该目录。当您单击完成时，项目将出现在您的导航器视图中，目录中的文件将出现在项目中。您现在可以使用可用的 Eclipse 工具对这些文件进行操作。请注意，当您操作此目录中的文件时，您是在操作原始文件，而不是副本。

2.  您可以将一些文件导入（导入 --> 文件系统）到现有的 Eclipse 目录中。请注意，与上述方法不同，这会将这些文件复制到项目中，无论何时发生。但是，您可以在这些副本上使用可用的 Eclipse 工具。

# mysql - 是否可以及时将 MySQL 数据库恢复到以前的状态？

> ID：11056712
> 
> 赞同：3
> 
> 时间：2012-06-15T19:03:24.677
> 
> 标签：mysql, database-restore

我刚刚意识到 MySQLWorkBench 在执行同步模型时会破坏目标（进行替换）。在同步之间对源和模型进行更改会使您成为一个奇怪的混蛋。那么是否有可能及时返回到给定的快照？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:06:57.827

使用 mysqldmp 对数据库进行的最近备份应该足以让您将数据库恢复到上次备份的时间。

还原后，可以将更改从二进制日志前滚到特定时间点。 [http://dev.mysql.com/doc/refman/5.1/en/point-in-time-recovery.html](http://dev.mysql.com/doc/refman/5.1/en/point-in-time-recovery.html)

除此之外，MySQL 中没有回滚到“及时快照”和“闪回查询”功能（至少在 MySQL 5.1 社区版中没有。）

# c++ - C++ type traits to extract template parameter class

> ID：11056714
> 
> 赞同：10
> 
> 时间：2012-06-15T19:03:35.937
> 
> 标签：c++, templates, metaprogramming, typetraits

In a template, I want to drill down the template parameter to the real non-templated type. So:

```
template <typename T>
struct MyTemplate
{
    // sadly there's no extract_Base
    typedef typename extract_base<T>::MyType WorkType;
};
struct X {};
template <typename T> struct Templ {};
//MyTemplate<Templ<X>>::WorkType is X;
//MyTemplate<X>::WorkType is X; 
```

The only solution I see is to define real base type like std::vector<X>::value_type is X. But I am curious if there's a way to do this without defining auxiliary types inside each destination template.

I saw something like [http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2965.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2965.html) but this is draft? and I don't quite get it.

Yes I know there's multiple inheritance, but even for simple case this would be nice.

UPDATE: Nawaz solution works for me very well, and it is easy to extend to specific cases, e.g.

```
template<template<typename, typename> class X, typename T1, typename T2>
struct extract_base <X<T1, T2>>   //specialization
{
    typedef T1 base;
}; 
```

I can even apply is_base_of or other filters to T1/T2 and so on. So it *does* work for X<T,U> - at least with g++ 4.6.7.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T19:11:06.013

首先，我们将其称为`value_type`而不是`base`，因为`value_type`似乎更适合描述您要提取的类型的术语。

你可以使用这个：

```
template<typename T>
struct extract_value_type //lets call it extract_value_type
{
    typedef T value_type;
};

template<template<typename> class X, typename T>
struct extract_value_type<X<T>>   //specialization
{
    typedef T value_type;
}; 
```

只要模板参数`extract_value_type`的形式为`T`or ，它就应该起作用`X<T>`。但是，它不适用于`X<T,U>`。但是使用可变参数模板在 C++11 中很容易实现它。

将其用作：

```
template <typename T>
struct MyTemplate
{
    typedef typename extract_value_type<T>::value_type value_type;
}; 
```

在线演示：http: [//ideone.com/mbyvj](http://ideone.com/mbyvj)

* * *

现在在 C++11 中，您可以使用可变参数模板来`extract_value_type`处理带有多个模板参数的类模板，例如`std::vector`,`std::set`等`std::list`。

```
template<template<typename, typename ...> class X, typename T, typename ...Args>
struct extract_value_type<X<T, Args...>>   //specialization
{
    typedef T value_type;
}; 
```

演示：http: [//ideone.com/SDEgq](http://ideone.com/SDEgq)

# ios - 在我的纹理上绘制形状时，OpenGL 使我的纹理半透明

> ID：11056719
> 
> 赞同：0
> 
> 时间：2012-06-15T19:03:51.803
> 
> 标签：ios, opengl-es, textures, alpha, glkit

## 概述

我正在尝试通过组合一些图像和渐变在我的游戏中构建图形。我开始使用 Core Graphics，它工作得非常好，但速度非常慢。我现在尝试使用 GLKit 将其移植到 OpenGL，我非常接近，但还有最后一个问题：

我已经在屏幕上将纹理绘制成三角形。现在，在它的顶部，我想画一个渐变。要绘制渐变，我认为最简单的方法是在其中两个顶点绘制黑色，在第三个顶点绘制完全透明（alpha=0）颜色的三角形。渐变本身渲染得很好，但是当它渲染到纹理的顶部时，它看起来好像纹理的 alpha 也受到影响，并导致背景显示出来。

我想要的是：

![在此处输入图像描述](../Images/72411211738f160afaeb25da11b07696.png)

我得到的是：

![在此处输入图像描述](../Images/9ade3ee01b6b1dea8d1e902239dd6a4b.png)

我承认我对 OpenGL 或 GLKit 不太熟悉。我怀疑三角形上每个点的纹理 alpha 是（1 - 渐变 alpha），这可以解释为什么纹理在角落是完全不透明的，以及为什么纹理和渐变似乎在中间都有部分透明度。

我可以用 GLKit 完成我想要的吗？它甚至与 GLKit 和 GLKBaseEffect 相关，还是我只是在 OpenGL 中做一些我可以关闭的时髦的多纹理操作？

## 代码片段

我的精灵类中的渲染函数，用于绘制纹理：

```
typedef struct {
    CGPoint geometryVertex;
    CGPoint textureVertex;
} TexturedVertex;

- (void)renderTriangleStrip:(TexturedVertex *)coordinates ofSize:(NSInteger)size {
    self.effect.texture2d0.envMode = GLKTextureEnvModeReplace;
    self.effect.texture2d0.name = self.textureInfo.name;
    self.effect.texture2d0.enabled = YES;

    self.effect.transform.modelviewMatrix = self.transform;

    [self.effect prepareToDraw];

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

    long offset = (long)coordinates;        
    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));

    glDrawArrays(GL_TRIANGLE_STRIP, 0, size);

    glDisableVertexAttribArray(GLKVertexAttribPosition);
    glDisableVertexAttribArray(GLKVertexAttribTexCoord0);
} 
```

在我的形状类中渲染函数，用于绘制带渐变的三角形：

```
typedef struct {
    CGPoint position;
    GLKVector4 color;
} ColoredVertex;

- (void)renderVertices:(ColoredVertex *)vertices ofSize:(NSInteger)size {
    self.effect.texture2d0.envMode = GLKTextureEnvModeDecal;
    self.effect.texture2d0.enabled = NO;

    self.effect.useConstantColor = NO;

    self.effect.transform.modelviewMatrix = self.transform;

    [self.effect prepareToDraw];

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribColor);

    long offset = (long)vertices;
    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(ColoredVertex), (void *) (offset + offsetof(ColoredVertex, position)));
    glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, sizeof(ColoredVertex), (void *) (offset + offsetof(ColoredVertex, color)));

    glDrawArrays(GL_TRIANGLE_FAN, 0, size);

    glDisableVertexAttribArray(GLKVertexAttribPosition);
    glDisableVertexAttribArray(GLKVertexAttribColor);
} 
```

在此先感谢您的帮助！

**编辑**：看起来 glBlendFunc(...) 可能包含我的答案。但我不明白不同的模式。我在正确的轨道上吗？

**编辑**：仍然没有解决方案，但我已经更新了我在问题中的假设。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:11:55.943

我不确定是否理解你的问题，所以我会在我得到它时尝试重述它。

1.  你画你的棋子背景
2.  您使用嘈杂的纹理绘制不透明的三角形纹理
3.  您绘制一个带有颜色渐变的三角形，您想要影响它下面的颜色。

我知道是通过 3 导致您出现问题。

如果是这样，您需要做的是使用适当的混合模式和适当的顶点颜色绘制渐变三角形来获取参考图像。在你的情况下，两种黑色和一种白色。

对于您的情况，将使用以下方式设置混合：

```
glEnable(GL_BLEND);
glBlendFunc(GL_ZERO, GL_SRC_COLOR); 
```

这将指示 OpenGL 为您绘制三角形，以便生成的像素颜色由 给出`dst = 0 * src + src * dst`，即`dst = dst * src`。

# c++ - 霍夫曼算法

> ID：11056722
> 
> 赞同：0
> 
> 时间：2012-06-15T19:04:02.387
> 
> 标签：c++, class, huffman-code

我正在HUFFMAN **ALGORITHM**上编写一个程序，其中我有一类节点（*hnode*）来包含符号（*name*）及其出现频率（*freq*）；和其他用于形成**树**以获取符号代码的类 ( *pq )。*我只写了课程的相关部分。现在，当我尝试运行该程序时，当它第二次进入*while 循环*时，它总是卡在 while 循环中（*在 main() 中*） 。我已经尝试了一切，但仍然无法弄清楚为什么......有人可以帮助让这段代码运行！

 ****```
#define NPTR hnode*
class pq;
class hnode
{
    string name;
    int freq;
    friend class pq;

    public:

    NPTR phnode;
    void show () 
    { cout << "name = " << name << endl << ", freq= " << freq <<endl ; }

    hnode (string x, int fr): name(x), freq(fr)
    {
        phnode = this;
    }

    friend hnode operator + (hnode p, hnode q)
    {
        string s = q.name + p.name;
        int f = q.freq + p.freq ;
        hnode foo (s,f);
        return foo;
    }
};

class pq /// ascending priority queue
{
    struct node
    {
    NPTR data;
    node* next;
    node (NPTR p) : data(p), next(0) {}
    };
    public:
    int count;
    node* getnode (NPTR p) { return new node(p); }
    node* listptr;
    void place (NPTR );
    NPTR mindelete();
    pq() : listptr(0), count(0) {}
};

void pq::place (NPTR p)
{
    if(count == 0)
    {
        listptr = getnode(p);
    }

    else
    {
        node* foo = listptr, *bar = NULL;
        while( (foo!= NULL) && (p->freq >= foo->data->freq) )
        {
            bar = foo;
            foo = foo->next;
        }
        node* ptr = getnode(p);
        ptr->next = bar->next;
        bar->next = ptr;
    }
    ++count;
}

NPTR pq::mindelete()
{
    if(count==0) { cout<<"invalid\n"; exit(1);}
    NPTR val = listptr->data;
    listptr = listptr->next;
    --count;
    return val;
}

void main ()
{
    pq list;
    for ( int i=0; i<3; ++i)
    {
        string s;
        int f;
        cin>>s>>f;
        NPTR p = new hnode(s,f);
        list.place(p);
    }
    while(list.count>1)
    {
        NPTR p1 = list.mindelete();
        NPTR p2 = list.mindelete();
        hnode po = (*p1)+(*p2); // overloaded operator
        NPTR p = &po;
        p->show();
        list.place(p);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:36:47.027

我建议在这里看看：

[NIST 自适应霍夫曼](http://xlinux.nist.gov/dads/HTML/adaptiveHuffman.html)

还有这里：

[NIST 霍夫曼](http://xlinux.nist.gov/dads/HTML/huffmanCoding.html)

代码示例也可以在那里找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:35:44.197

您的代码在这里创建了一个本地范围`hnode po`：

```
while(list.count > 1)
{
    NPTR p1 = list.mindelete();
    NPTR p2 = list.mindelete();
    hnode po = (*p1)+(*p2); // overloaded operator
    NPTR p = &po;
    p->show();
    list.place(p);
} 
```

然后你通过地址传递它并且你`pq::node`抓住它。听起来是一个非常糟糕的主意，因为在每次迭代的 while 循环结束时`hnode po` *都会超出范围。*

通常，您希望使用智能点和 RAII 进行自动内存管理，而不是到处进行新的和删除的操作。****

# iphone - App Store：仅适用于 iPhone/iPod，不适用于 iPad

> ID：11056725
> 
> 赞同：4
> 
> 时间：2012-06-15T19:04:22.377
> 
> 标签：iphone, ios, ipad, app-store

如何在 App Store 上只为 iPhone/iPod 而非 iPad 启动我的应用程序？我似乎在我的 .plist 文件和 iTunesConnect 中都找不到任何设置。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T01:46:35.407

你不能。Apple 的 App Store 指南似乎明确不允许在 iPad 上在 (1X/2X) 兼容模式下无法运行或崩溃的 iPhone 应用程序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-15T19:06:28.703

只需检查`Build Settings`并找到密钥：`Targeted device family`

你有`iPhone`，`iPad`或`iPhone/iPad`选择的选项

当您构建应用程序并将其发送给 Apple 时，它​​只会检查那里的值并使其可用于指定的设备。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-28T10:49:03.313

这是一个老问题，但答案可能对其他开发人员有用：

*   如果您希望您的应用程序同时在 iPhone 和 iPod 上运行，我看不出阻止它在 (1X/2X) 兼容模式下在 iPad 上运行的意义。你可能会白白失去一些消费者。
*   如果你想让你的应用程序在 iPhone 上运行只是因为你需要一些功能，比如电话。好的方法是使用 UIRequiredDeviceCapabilities 并设置“短信”和“电话”。有关更多详细信息，请参阅 Apple 文档：[https ://developer.apple.com/library/ios/qa/qa1397/_index.html](https://developer.apple.com/library/ios/qa/qa1397/_index.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T19:10:40.460

我可以看到这个工作的一种方式是这样的：

```
-(BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     if (UIDevice.currentDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad)
          return NO;

     // rest of launching code
     return YES;
} 
```

# objective-c - UITextView 返回 null

> ID：11056732
> 
> 赞同：0
> 
> 时间：2012-06-15T19:04:44.857
> 
> 标签：objective-c, ios, xcode

我正在尝试手动创建一个仅包含用户电子邮件地址、主题和电子邮件内容的迷你邮件模块。它只是为我的应用程序提供快速的客户支持。我还想隐藏我的电子邮件地址，因为我只是使用我的 gmail 帐户而不是我公司的电子邮件帐户。这是为了确保良好和及时的服务，因为 gmail 以它而闻名。

问题是当我使用以下命令将“电子邮件”内容发送到我的 PHP 服务器时：

```
- (void)sendMail{
    NSString *rawStr = [NSString stringWithFormat:@"http://www.somedomain.com/iosuser.php?id=%@__%@__%@__%@",[self getMacAddress],emailAdd.text,subject.text,content.text;];

    NSLog(@"%@",rawStr);
    NSURL *url = [NSURL URLWithString:rawStr];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    NSURLResponse *response;
    NSError *err;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
    NSLog(@"responseData: %@", responseData);
} 
```

NSLog`rawStr`工作正常，显示 url、电子邮件地址、主题和内容的所有内容：

```
http://www.somedomain.com/iosuser.php?id=C8:2A:14:22:92:E2__test@test.com__SubjectTest__ContentTestContentTestContentTestContentTestContentTestContentTestContentTestContentTestContentTestContentTest 
```

但是返回的 NSLog `responseData`： `responseData: (null)`所以实际上没有发送任何内容。

emailAdd 和主题是 UITextField 输入，而内容来自 UITextView 输入。我想知道 UITextView 是否是问题所在。如果这是一个愚蠢的问题，真的很感激任何指示并道歉。

注意：我尝试使用`rawStr`浏览器上的 NSLog 输出来手动测试脚本并且它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:17:20.787

我认为 UITextView 不是问题。因为您通过`NSLog(@"%@",rawStr);`. 您没有从服务器得到正确的响应，我对此不是 100% 确定的。所以请检查以下链接：

[-[NSURLRequest sendSynchronousRequest:returningResponse:error:] 取回 HTTP 标头](https://stackoverflow.com/questions/530590/nsurlrequest-sendsynchronousrequestreturningresponseerror-getting-back-htt)

[使用 NSURLConnection sendSynchronousRequest 处理错误](https://stackoverflow.com/questions/2069039/error-handling-with-nsurlconnection-sendsynchronousrequest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:56:07.290

我认为您的问题是`@`URL 中的符号（除非指定我相信的用户名，否则不允许这样做）

您应该先转义所有字符串，然后再将它们放入网址中

```
NSString *rawStr = [NSString stringWithFormat:@"http://www.somedomain.com/iosuser.php?id=%@__%@__%@__%@",
                    [[self getMacAddress] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                    [emailAdd.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                    [subject.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                    [content.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:49:41.143

它实际上属于 iOS 采用的最基本的 URL 语法……没有空格。我用下划线替换了所有空格

```
rawStr = [rawStr stringByReplacingOccurrencesOfString:@" " withString:@"_"]; 
```

为了更好的处理，我从同步改为异步。

# linux - Httpd 配置——访问文件夹

> ID：11056735
> 
> 赞同：0
> 
> 时间：2012-06-15T19:05:16.997
> 
> 标签：linux, apache

所以我有以下情况。我的根文件夹是/var/www/html。如果我在那里有一个名为 test 的文件，我会做一个

```
wget ip-address/test 
```

一切都是好的。但是，如果我在 html 中添加一个名为 bla 的文件夹并执行以下操作

```
wget ip-address/bla/test 
```

我收到 500 错误。如果我只是做一个

```
wget ip-address/bla 
```

我得到一个 403 权限被拒绝。我尝试进入 httpd.conf 文件并添加目录如下：

```
<Directory "/var/www/html/bla">
   Options None
   AllowOverride None
   Order allow,deny
   Allow from all
</Directory> 
```

这并没有改变任何东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:27:30.880

如果要访问目录列表，您需要：

```
<Directory "/var/www/html/bla">
Options Indexes
...
</Directory> 
```

目录列表仅在未定义“DirectoryIndex”指令时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:19:07.917

检查您添加的文件夹“bla”是否具有 httpd 进程所有者的读取权限？使用 chmod/chown 创建访问权限，然后重试。

# r - 使用 OpenStreetMap 从 data.frame 绘制点

> ID：11056738
> 
> 赞同：8
> 
> 时间：2012-06-15T19:05:39.997
> 
> 标签：r, openstreetmap, ggmap

我是空间数据的新手。我有以下代码可以成功绘制有界地图。我想补充一点，data.frame 存储的点。对于无法从 OpenStreetMap 文档中弄清楚这一点，我提前道歉......下面的代码：

```
library(OpenStreetMap)
stores <- data.frame(name=c("Commercial","Union","Bedford"),
                 longitude=c(-70.25042295455933,-70.26050806045532,-70.27726650238037),
                 latitude=c(43.657471302616806,43.65663299041943,43.66091757424481))
lat <- c(43.68093,43.64278)
lon <- c(-70.29548,-70.24097)
portland <- openmap(c(lat[1],lon[1]),c(lat[2],lon[2]),zoom=15,'osm')
plot(portland,raster=TRUE)
#can't figure out what to put here. 
```

我怀疑商店的格式不适合空间数据。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T23:23:02.417

我不知道`OpenStreetMap`包裹。但我提供了一个仍然绘制 OpenStreet 地图的替代方案，但使用`ggmap`包来获取和绘制地图。该`get_map`功能可以从多种来源获取地图：osm、google、stamen和cloudmade；设置为`source`。此外，源具有不同的样式，设置为`maptype`. 地图的边界在位置向量中给出。或者，位置矢量可以给地图中心设置适当的缩放级别。地图是用 绘制的`ggplot2`，因此可以将点和标签添加到地图中，就像它们被添加到任何 ggplot 对象一样。要运行以下命令，需要安装`ggmap`和包。`ggplot2`

```
library(ggmap)

stores <- data.frame(name=c("Commercial","Union","Bedford"),
        longitude=c(-70.25042295455933,-70.26050806045532,-70.27726650238037),
        latitude=c(43.657471302616806,43.65663299041943,43.66091757424481))
location = c(-70.2954, 43.64278, -70.2350, 43.68093)

# Fetch the map
portland = get_map(location = location, source = "osm")

# Draw the map
portlandMap = ggmap(portland)

# Add the points layer
portlandMap = portlandMap + geom_point(data = stores, aes(x = longitude, y = latitude), size = 5)

# Add the labels
portlandMap + geom_text(data = stores, aes(label = name, x = longitude+.001, y = latitude), hjust = 0) 
```

结果是：

![在此处输入图像描述](../Images/7ff393dbb39f81fc61b53edfd9c2a959.png)

标签可能会在后台丢失。在这种情况下，这样的事情可能是合适的。它使用[此处](https://stackoverflow.com/questions/10686054/outlined-text-with-ggplot2)的代码为文本提供大纲。

```
portlandMap = ggmap(portland) + geom_point(data = stores, aes(x = longitude, y = latitude), size = 5)

theta <- seq(pi/16, 2*pi, length.out=32)
xo <- diff(location[c(1,3)])/250
yo <- diff(location[c(2,4)])/250

for(i in theta) {
    portlandMap <- portlandMap + geom_text(data = stores,  
    aes_(x = stores$longitude + .001 + cos(i) * xo, 
         y = stores$latitude + sin(i) * yo, 
         label = stores$name), 
    size = 5, colour = 'black', hjust = 0)
 }

portlandMap + 
   geom_text(data = stores, aes(x = longitude + .001, y = latitude, label=name), 
     size = 5, colour = 'white', hjust = 0) 
```

![在此处输入图像描述](../Images/56079d9d66cb33fe16a99eee391be863.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-05T14:53:11.130

由于 google startend 需要使用他们的 api 的计费信息，这里是一个仅使用 OpenStreetMaps 的解决方案。

**样本数据**

```
library( OpenStreetMap )
library( ggplot2 )
stores <- data.frame(name=c("Commercial","Union","Bedford"),
                     longitude=c(-70.25042295455933,-70.26050806045532,-70.27726650238037),
                     latitude=c(43.657471302616806,43.65663299041943,43.66091757424481))
lat <- c(43.68093,43.64278)
lon <- c(-70.29548,-70.24097)

portland <- OpenStreetMap::openmap( c( lat[1], lon[1] ), c( lat[2], lon[2] ),zoom = 15, 'osm') 
```

OSM-map在墨卡托，存储坐标是经纬度，所以：
方法1：将地图转换为纬度
方法2：将坐标转换为墨卡托

**方法 1 - 将地图转换为纬度**

```
autoplot( OpenStreetMap::openproj( portland ) ) +
  geom_point( data = stores, aes( x = longitude, y = latitude, size = 5 ) ) +
  geom_text( data = stores, aes( x = longitude + .001, y = latitude, label = name ), hjust = 0 ) +
  theme( legend.position = "none" ) 
```

[![在此处输入图像描述](../Images/9967530e703c3b0ed0ca137490f1a102.png)](https://i.stack.imgur.com/hOEZY.png)

**方法 2 - 将点转换为墨卡托**

```
stores2 <- as.data.frame( 
  OpenStreetMap::projectMercator( lat = stores$latitude, 
                                  long = stores$longitude ) 
  )
stores2 <- cbind( stores, stores2)
autoplot( portland ) +
  geom_point( data = stores2, aes( x = x, y = y, size = 5 ) ) +
  geom_text( data = stores2, aes( x = x + 100, y = y, label = name ), hjust = 0 ) +
  theme( legend.position = "none" ) 
```

[![在此处输入图像描述](../Images/1866bba38cf1424cd41fea5bdbee8700.png)](https://i.stack.imgur.com/eNSRY.png)

# wix - Wix 修改现有控件

> ID：11056743
> 
> 赞同：0
> 
> 时间：2012-06-15T19:06:13.613
> 
> 标签：wix, wix3.5, wix-extension

我今天刚开始使用 Wix，我想修改“LicenseAgreementDlg”（我相信它是一个内置对话框）。我想用单选按钮替换复选框。

我做了一些研究，我想我已经创建了一个带有单选按钮的新 wxs 文件。

这个对吗？我做对了吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:04:44.150

您可以在标准对话框的基础上创建一个新对话框并在 UI 序列中替换它。

有关更多详细信息，请参阅[WiX 教程](https://www.firegiant.com/wix/tutorial/)中的[Legalese](https://www.firegiant.com/wix/tutorial/user-interface-revisited/legalese/)。

# java - 如何遍历对象的arrayList并在对象属性中查找重复项？

> ID：11056752
> 
> 赞同：2
> 
> 时间：2012-06-15T19:07:06.457
> 
> 标签：java, collections, arraylist, duplicates, iteration

我有以下课程：

```
class A {
    ArrayList<String> s = new ArrayList<>();
    double d = Double.MAX_VALUE;
} 
```

我有一个 A 类的数组列表，比如`ArrayList<A> alist = new ArrayList<>();` In`alist`我有一些元素，如下所示：

```
[[b  c]  1.3]
[[c  d]  0.2]
[[c  b  o]  0.9]
[[x  o  j]  1.8]
[[c  d]  1.7]
[[b  c  o]  2.2]
[[f  p  n]  1.1]
and so on... 
```

我所需要的只是遍历它并检查对象`alist`的字符串列表中是否有任何重复项。`class A`如果是这样，则仅保留一个元素并使用其 d 值添加其他 d 值，并从中删除`alist`具有相同字符串列表的其他元素。例如：
从上面的列表中，我们可以看到第 2 和第 5 个元素具有重复的字符串列表，因此添加它们的值并仅保留其中一个具有该附加值的值并删除其他元素。同样，元素 3rd 和 6th 具有相同的字符串列表（字符串顺序在内部字符串列表中并不重要）。所以对于上面的列表，预期的输出将是：

```
[[b  c]  1.3]
[[c  d]  1.9]
[[b  c  o]  3.1]
[[x  o  j]  1.8]
[[f  p  n]  1.1] 
```

有人可以通过提供一些示例代码来帮助我吗？我在Java中不是那么好。所以如果我犯了任何错误请原谅我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:19:28.860

一个好的起点是定义 .equals() 方法在类 A 中的作用。然后它就像迭代你的集合一样简单，并询问是否 a.eqauls(b)。

# php - cakephp2.1 中的数据获取问题

> ID：11056753
> 
> 赞同：0
> 
> 时间：2012-06-15T19:07:06.887
> 
> 标签：php, mysql, cakephp, cakephp-2.0

我有简单的播放列表数据库结构......它是这种格式

```
sr.no |    album_id |    song_id |    artist_id |    user_id 
```

* * *

```
1\.    |    160      |    85      |    40        |    5
2\.    |    160      |    85      |    45        |    5
3\.    |    160      |    85      |    41        |    6
4\.    |    160      |    85      |    44        |    5 
```

表示album_id、song_id 和artist_id 的组合使完整的记录独一无二。我想使用 CAKEPHP 条件获取组中的记录。例如。我想要这种格式的数据。假设我想在特定部分显示它。

```
album_id | song_id | artist_id
160      |      85 | 40, 45, 41, 44 
```

我的试用码是这个..

```
 $playlist_condition = array('Tracklist.album_id' => $album_id, 'OR'=> array('Tracklist.status'=> 1, 'Tracklist.user_id'=>$user_id));
        $trackdetails = $this->Tracklist->find('all', array('conditions' => $playlist_condition ));
        $this->set("trackdetails", $trackdetails); 
```

**递归注意**我也想找到相关的模型..

我目前的输出是..

```
Array
(
[0] => Array
    (
        [Tracklist] => Array
            (
                [id] => 140
                [album_id] => 1
                [song_id] => 185
                [artist_id] => 33
                [video_link] => 
                [status] => 1
                [user_id] => 
                [created] => 2012-05-25 10:08:50
                [modified_by] => 
                [modified] => 2012-05-25 10:08:50
            )

        [Album] => Array
            (
                [id] => 1
                [name] => Om, Namah Shivay
                [photo] => 
                [genre] => Devotional
                [copyrights] => 
                [year] => 0000
                [source] => 
                [description] => Its' an devotional Album.
                [download_link] => 
                [status] => 2
                [user_id] => 1
                [created] => 2012-04-06 00:00:00
                [modified_by] => 0
                [modified] => 2012-04-22 09:11:35
            )

        [Song] => Array
            (
                [id] => 185
                [name] => Shad.aab
                [hindi] => अ
                [roman] => a
                [category] => Qawwalli
                [poet_id] => 148
                [status] => 7
                [user_id] => 1
                [created] => 
                [modified_by] => 
                [modified] => 2012-04-22 09:07:48
            )

        [Artist] => Array
            (
                [id] => 33
                [name] => Suresh Vadekar
                [photo] => 
                [description] =>  Suresh Vadekar.
                [status] => 1
                [user_id] => 1
                [created] => 2012-05-20 18:12:38
                [modified_by] => 
                [modified] => 2012-05-20 18:12:39
            )

    )

[1] => Array
    (
        [Tracklist] => Array
            (
                [id] => 138
                [album_id] => 1
                [song_id] => 185
                [artist_id] => 31
                [video_link] => 
                [status] => 1
                [user_id] => 
                [created] => 2012-05-25 10:04:55
                [modified_by] => 
                [modified] => 2012-05-25 10:04:55
            )

        [Album] => Array
            (
                [id] => 1
                [name] => Om, Namah Shivay
                [photo] => 
                [genre] => Devotional
                [copyrights] => 
                [year] => 0000
                [source] => 
                [description] => Its' an devotional Album.
                [download_link] => 
                [status] => 2
                [user_id] => 1
                [created] => 2012-04-06 00:00:00
                [modified_by] => 0
                [modified] => 2012-04-22 09:11:35
            )

        [Song] => Array
            (
                [id] => 185
                [name] => Shad.aab
                [hindi] => अ
                [roman] => a
                [category] => Qawwalli
                [poet_id] => 148
                [status] => 7
                [user_id] => 1
                [created] => 
                [modified_by] => 
                [modified] => 2012-04-22 09:07:48
            )

        [Artist] => Array
            (
                [id] => 31
                [name] => Mehdi Hassan
                [photo] => 
                [description] => Mehdi Hassan Sahaab one of the prominiet singer of Asia...
                [status] => 1
                [user_id] => 1
                [created] => 2012-05-20 18:07:20
                [modified_by] => 
                [modified] => 2012-05-20 18:07:20
            )

    )

[2] => Array
    (
        [Tracklist] => Array
            (
                [id] => 139
                [album_id] => 1
                [song_id] => 185
                [artist_id] => 32
                [video_link] => 
                [status] => 1
                [user_id] => 
                [created] => 2012-05-25 10:04:55
                [modified_by] => 
                [modified] => 2012-05-25 10:04:55
            )

        [Album] => Array
            (
                [id] => 1
                [name] => Om, Namah Shivay
                [photo] => 
                [genre] => Devotional
                [copyrights] => 
                [year] => 0000
                [source] => 
                [description] => Its' an devotional Album.
                [download_link] => 
                [status] => 2
                [user_id] => 1
                [created] => 2012-04-06 00:00:00
                [modified_by] => 0
                [modified] => 2012-04-22 09:11:35
            )

        [Song] => Array
            (
                [id] => 185
                [name] => Shad.aab
                [hindi] => अ
                [roman] => a
                [category] => Qawwalli
                [poet_id] => 148
                [status] => 7
                [user_id] => 1
                [created] => 
                [modified_by] => 
                [modified] => 2012-04-22 09:07:48
            )

        [Artist] => Array
            (
                [id] => 32
                [name] => Jagjit Singh
                [photo] => 
                [description] => Jagjit Singh Sahab my favorite Sahab.
                [status] => 1
                [user_id] => 1
                [created] => 2012-05-20 18:11:07
                [modified_by] => 
                [modified] => 2012-05-20 18:11:07
            )

    ) 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:12:11.150

在 MySQL 中使用 GROUP_CONCAT 怎么样？

```
SELECT album_id, artist_id, GROUP_CONCAT(song_id) FROM my_table GROUP BY album_id, artist_id 
```

# python - 访问字典python中列表中的项目

> ID：11056757
> 
> 赞同：15
> 
> 时间：2012-06-15T19:07:25.997
> 
> 标签：python, list, dictionary

我有一个字典，其中包含与列表关联的键。

```
mydict = {'fruits': ['banana', 'apple', 'orange'],
         'vegetables': ['pepper', 'carrot'], 
         'cheese': ['swiss', 'cheddar', 'brie']} 
```

我想要做的是使用 if 语句，如果我在字典中的任何列表中搜索 item 及其它将返回键。这就是我正在尝试的：

```
item = cheddar
if item in mydict.values():
    print key 
```

但它什么也没做，输出应该是：

```
cheese 
```

这似乎是一件简单的事情，但我就是想不通。任何帮助都很棒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T19:37:00.537

您必须使用 a `for`，一个简单`if`的不足以检查一组未知的列表：

```
for key in mydict.keys():
    if item in mydict[key]:
        print key 
```

没有明确`for`声明的方法可能是这样的：

```
foundItems = (key for key, vals in mydict.items() if item in vals) 
```

它返回与关联的所有键`item`。但在内部，仍然存在某种迭代。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T19:22:03.080

```
mydict = {'fruits': ['banana', 'apple', 'orange'],
     'vegetables': ['pepper', 'carrot'], 
     'cheese': ['swiss', 'cheddar', 'brie']}

item = "cheddar"
if item in mydict['cheese']:
    print ("true") 
```

这行得通，但是由于您制作字典的方式，您必须参考字典中的键，例如奶酪，蔬菜等，希望这会有所帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T02:29:58.070

```
mydict = {'fruits': ['banana', 'apple', 'orange'],
     'vegetables': ['pepper', 'carrot'], 
     'cheese': ['swiss', 'cheddar', 'brie']}

item = "cheddar"

for key, values in mydict.iteritems():
    if item in values:
        print key 
```

如果您要进行大量此类搜索，我认为您可以为原始索引创建一个反向索引`mydict`以加快查询速度：

```
reverse_index = {}

for k, values in mydict.iteritems():
     for v in values:
         reverse_index[v] = k

print reverse_index.get("cheddar")
print reverse_index.get("banana") 
```

这样您就不必`values`每次都遍历列表来查找项目。

# sql - Oracle中的分页而不指定所有列

> ID：11056768
> 
> 赞同：0
> 
> 时间：2012-06-15T19:08:18.273
> 
> 标签：sql, oracle, sqlplus

我见过很多分页示例，如下所示。但是，我想对许多不同的表使用相同的查询。有没有办法使用这种技术而不必指定列名。理想情况下，某种方式来选择 * 以及添加的 row_number 列？

```
SELECT * FROM (
   SELECT
   ROW_NUMBER() OVER (ORDER BY ColumnName1 ASC) AS rownumber, ColumnName1, ColumnName2
   FROM TableName
   ) AS foo
WHERE rownumber BETWEEN 10 AND 20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:12:13.567

您需要在分析函数中指定要排序的列。但是，除此之外，您还可以

```
SELECT *
  FROM (SELECT t.*,
               row_number() over (order by column1 ASC) rnk
          FROM tableName t)
 WHERE rnk BETWEEN 10 and 20 
```

# vb.net - 'TryAction()' 方法是邪恶的吗？

> ID：11056770
> 
> 赞同：4
> 
> 时间：2012-06-15T19:08:32.287
> 
> 标签：vb.net, pass-by-reference, fxcop

我正在尝试改进我的代码中的 FxCop 合规性（有史以来第一次），但我有点陷入道德问题。我有一个`GetText()`从远程服务器返回字符串的方法，但在某些情况下会抛出异常。这就是为什么我还有一个方法`TryGetText(ByRef text As String)`可以返回一个布尔值来指示调用是否成功。如果为真，则将返回值分配给文本变量。

我认为这种结构是完全可以接受的，考虑到即使是微软也这样做（例如`Integer.TryParse`）。不过，FxCop 对我嗤之以鼻，口述“你不能通过引用传递！”

为了规避这个警告（其中有很多），我用 StringBuilder 替换了参数。但是尽管现在符合要求，但我认为它并没有以任何方式真正改进我的代码。

前：

```
 Public Function TryGetText(ByRef text As String) As Boolean
        Dim command As New GetTextCommand(Me)
        Dim result As CommandResult = ProcessCommand(command, True)
        If result.CommandStatus <> Constants.Status.Failed Then
            text = result.Text
            Return True
        Else
            Return False
        End If
    End Function 
```

后：

```
 Public Function TryGetText(builder As Text.StringBuilder) As Boolean
        Dim command As New GetTextCommand(Me)
        Dim result As CommandResult = ProcessCommand(command, True)
        If result.CommandStatus <> Constants.Status.Failed Then
            builder.Clear()
            builder.Length = result.Text.Length
            builder.Append(result.Text)
            Return True
        Else
            Return False
        End If
    End Function 
```

这是可接受的 ByRef 用法，还是我应该使用 stringbuilder 替代方法？对于使用此构造的每种方法，我都对抑制此警告感到不舒服。我也不觉得 stringbuilder 变体提高了代码可用性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:28:29.023

TryAction 方法在创建诸如线程安全类之类的东西时非常有用。它将测试和操作这两个步骤组合成一个原子操作。Microsoft 在并发集合类中大量使用它。例如[http://msdn.microsoft.com/en-us/library/dd287191.aspx#Y0](http://msdn.microsoft.com/en-us/library/dd287191.aspx#Y0)

所以我认为是“你不能通过引用传递”的笼统声明。不应该在所有情况下都被视为福音。有合法用途。在您的具体情况下， ByRef 似乎没有 StringBuilder 版本那么笨拙。但是，如果`string GetText()`在您当前返回 false 的情况下返回 null/Nothing 的简单是等效的，那似乎是最好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:23:40.523

这可能是一个很好的用途`ByRef`，所以我倾向于为这种情况添加一个例外。如果您使用 Visual Studio 中的代码分析功能，您只需将以下属性添加到方法中：

```
<System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Design", "CA1045:DoNotPassTypesByReference", MessageId = "1#")> _
Public Function TryGetText(ByRef text As String) As Boolean 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:40:47.483

当您尝试以函数式样式使用您的方法时，通过引用传递会使事情变得复杂。您可能会考虑使用可为空的类型或元组或您自己的 Option 类型。

由于我对 VB 不太熟悉，这里有一个 C# 示例：

```
struct Option<T> {
   public bool ContainsElement { get; private set; }
   private T element;
   public T Element {
      get {
         if (!ContainsElement) throw new NoElementException ();
         return element;
      }
      set {
         element = value;
         ContainsElement = true;
      }
   }
   public T GetElementOrDefault (T defaultValue) {
      return ContainsElement ? element : defaultValue;
   }
}

Option<string> GetText () {
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:24:33.643

好吧，我认为每个人都讨厌太多的byrefs。两个已经太多了。尽管在您的情况下有许多方法并且它们都遵循相同的模式，但这听起来并不是一个真正的问题。您可以选择不遵循 Microsoft 的 Try* 方法模式。

为什么不返回布尔值，如果成功则不返回字符串，如果失败则返回 Nothing/Empty？然后您可以使用 String.IsNullOrEmpty(resultText) 测试您的 TryGetText 输出。

它确实是更多的代码，但它确实解决了警告（如果这真的是你所追求的）。

# java - Java从URL挂起读取图像

> ID：11056772
> 
> 赞同：6
> 
> 时间：2012-06-15T19:08:43.580
> 
> 标签：java, url, javax.imageio

我正在尝试从 java 中的 URL 从 Internet 上获取图像。我正在使用以下代码。

```
URL url = new URL(webAddress);
image = ImageIO.read(url); 
```

有时它可以工作，有时它只是无限期地挂起，这取决于 WebAddress 是什么。没有错误消息，它只是继续运行并且什么都不做。

在它永远挂起的地址上肯定有图像，通过将它们复制并粘贴到网络浏览器中来确认。似乎没有哪些模式可以工作，哪些不工作 - 它们都是 jpeg。我已经进行了一些搜索，并找到了一些从 URL 获取图像的其他方法，但是所有这些方法都发生了同样的事情——它们处理一些图像并挂起其他图像。

您是否知道可能导致此问题的原因以及如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T19:18:45.437

嗯，我不确定试试这个，看看是否有任何更改或错误。我还认为也许您将 setRedirects(boolean b) 设置为 false 这也可能会出现问题，但请先尝试以下操作：

```
 URLConnection con = null;
    InputStream in = null;
    try {
        String webadd="urls go here try the two you have had probelms with and success";
        URL url = new URL(webadd);

        con = url.openConnection();
        con.setConnectTimeout(10000);
        con.setReadTimeout(10000);
        in = con.getInputStream();
        Image img = ImageIO.read(in);
        if (img != null) {
            System.out.println("Loaded");
        } else {
            System.out.println("Could not load");

        }
    } catch (IOException ex) {
        ex.printStackTrace();
    } finally {
        if(is != null) {
            try {
                 is.close();
            } catch(IOException ex) {
                 // handle close failure
            }
        }

        if(con != null) {
            con.disconnect();
        }
    }
} 
```

编辑：或者可能是一个错误？： http://bugs.sun.com/view_bug.do;jsessionid=2bc7386e2f8b4e2550f8b10122f?bug_id= [6309072](http://bugs.sun.com/view_bug.do;jsessionid=2bc7386e2f8b4e2550f8b10122f?bug_id=6309072)检查是否仍然出现上述代码尝试：

```
 Image img=new ImageIcon(url).getImage(); 
```

# android - Android：不同分辨率屏幕上的位图缩放

> ID：11056775
> 
> 赞同：0
> 
> 时间：2012-06-15T19:09:14.627
> 
> 标签：android, android-canvas

在我的游戏中，我有一个surfaceView，我使用分辨率为400 x 320 像素的位图作为它的背景。当我在手机上运行我的游戏时，我看到画布大小是 600 x 400，而我加载的位图报告的大小是 500 x 400（我不记得确切的数字）。当我在分辨率低于手机的模拟器上运行游戏时，我看到画布的大小为 533 x 380（不准确），但位图*仍*报告为 500 x 400 的大小（因此最终剪辑）。

这怎么可能？首先，bitmap.getWidth()/getHeight() 报告的大小是否以像素为单位？其次，位图的大小如何在两个分辨率屏幕上最终相同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:34:27.400

是的，`getWidth`并`getHeight`返回像素大小。位图不根据屏幕分辨率进行缩放。它们根据屏幕密度进行缩放。在这种情况下，您的手机和模拟器似乎具有相同的密度。另请注意，位图有时根本不缩放。这取决于它们是如何创建或加载的。

# java - 将字符串从 EBCDIC 转换为 Unicode / UTF8

> ID：11056776
> 
> 赞同：2
> 
> 时间：2012-06-15T19:09:19.063
> 
> 标签：java, windows, encode, ibm-mq, ebcdic

我能够从`Java`到`Websphere MQ`on发送消息`AS400`。如果我从 发送消息，如果我使用任何可访问的，包括完整的语言本地化，`WinXP`没有区别；`Locale`英文也没有问题`Locale`。正确编码的重要之处只有以下代码行：

```
msgId.characterSet = 1208; 
```

不幸的是，它是无效的。我想从中获取消息的情况有所不同`MQ Queue`。

*   如果我`MQ Queue`从 Windows 操作系统（没有任何语言包的英语）收到消息，我可以从表单`MQ Queue`中获取消息。`String`

*   如果 Windows 操作系统使用某些语言包完全本地化，我会收到异常

```
消息缓冲区发生异常：
    java.io.UnsupportedEncodingException: Cp870

```

来自代码（从 try - catch - finally 块中删除了镇流器）

```
try {
    Class.forName("com.ibm.mq.MQEnvironment");
    MQEnvironment.hostname = hostname;
    MQEnvironment.port = port1;
    MQEnvironment.channel = channel;
    MQEnvironment.userID = userID;
    MQEnvironment.properties.put(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES);
    try {
        qmgr1 = new MQQueueManager(qmanager);
        MQGetMessageOptions gmo = new MQGetMessageOptions();
        int openOptions2 = MQC.MQOO_INPUT_SHARED;
        gmo.options = MQC.MQGMO_NO_SYNCPOINT; //Set no sync point
        gmo.options = MQC.MQGMO_CONVERT; //Handles ASCII/EBCDIC
        gmo.options = MQC.MQGMO_WAIT; //Wait until message arrives
        gmo.waitInterval = 3000;
        getq = qmgr1.accessQueue(responseQueue, openOptions2);
        while (true) {
            try {
                responseFromQUEUE = "";
                MQMessage msgId = new MQMessage();
                //putmsg.characterSet = 437;// Set code page to ASCII
                //putmsg.characterSet = 1200;// Set code page to UNICODE
                msgId.characterSet = 1208;
                getq.get(msgId, gmo);
                String str = msgId.readLine();
                //responseFromQUEUE = CpConv.tf870to1250(msgId.readLine());
                //own EncodePage doesn't works too
                if (responseFromQUEUE.length() == 0) {
                    break;
                }
            } catch (MQException mqx) {
                if (mqx.reasonCode == EMPTY_QUEUE) {
                } else {
                }
            }
        }
    } catch (MQException mqx) {
    } finally {
    }
} catch (IOException ex) {
} catch (ClassNotFoundException e) {
} 
```

请

*   是否有一些参数，我想念那里的`String`东西`MQMessage#readLine()`

*   我的问题只是关于`String`转换，

*   `Encode`我对from没有任何问题`MQMessage#getBytes`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:46:28.457

CP870 是 EBCDIC 主机代码页。发生异常时，您要将 Windows 更改为什么语言环境？`msgId.characterSet = 1208;`改本地后还用吗？看起来 Java 库无法将 CP870 中的传入消息转换为您当前的语言环境。

更改区域设置时检查 Windows 代码页是什么，并查看[msgId.characterSet](http://www-304.ibm.com/support/docview.wss?uid=swg27005729&aid=1)的 1208 是否正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T14:58:18.090

```
 gmo.options = MQC.MQGMO_NO_SYNCPOINT; //Set no sync point
 gmo.options = MQC.MQGMO_CONVERT; //Handles ASCII/EBCDIC
 gmo.options = MQC.MQGMO_WAIT; //Wait until message arrives 
```

此代码错误，您正在覆盖该选项，您需要`|`它们。

# android - 在android中充气

> ID：11056777
> 
> 赞同：-2
> 
> 时间：2012-06-15T19:09:20.170
> 
> 标签：android

我已经看了很多关于什么是 android 的通货膨胀的帖子，但我仍然不明白。有人可以详细描述它是什么以及我为什么需要它吗？他们说它用 XML 代码创建了一个对象，并且可以使用什么的。我几乎了解其他所有内容，但这对我来说没有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:12:52.060

基本上是为了使您的逻辑部分与您的 UI 部分不同，XML 的概念出现了。

1- 在 XML 中创建 UI 非常简单且非常清晰。

2-通过这种隔离，我们可以选择为陆地/肖像/小/正常/较大模式创建不同的用户界面......

在运行时，XML 只是被解析并从中创建对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:51:49.750

在使用 MVP 的 Android 程序结构中，即视图处理演示者和设计，即布局 xml。所以我们需要通过定义其他布局来定义xml的逻辑，并且经常用于维护UI操作，即改变UI行为。因此，它使我们通过膨胀将布局 xml 加载到其相应的视图对象中进行操作变得容易。

通过膨胀它我们可以访问相应的 UI 到视图对象。这个大家都知道。考虑活动课中的场景

```
class Activity1 extends Activity{
    setContentView(R.layout.Mainlayout);
    //here we are inflating the 
    //view   into objects actually 
    //its is defined in earlier version as 
    //setContentView(getInflater().inflater(R.layout.MainLayout)
    Button b=(Button)findViewById(R.id.button1);
} 
```

但是如果你写

```
class Activity1 extends Activity{
    Button b=(Button)findViewById(R.id.button1);//if called then there will be no errror but form runtimeexception Because of absence of setContext()
} 
```

因此，为了派生类中的每个ui，我们需要通货膨胀但事实是android制造商已经在setContentView（），addview等中加入了通货膨胀，因此初学者无法理解通货膨胀这很简单但需要理解我们可以简单地编写if按钮。 xml 只有按钮

```
Button b=(Button)getInflater().inflate(R.layout.button); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:15:51.507

在 Android 中，[LayoutInflator](http://developer.android.com/reference/android/view/LayoutInflater.html)负责解释这样的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"

  android:gravity="center"  
  >

  <WebView 
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:id="@+id/ticketWeb"
/>

</RelativeLayout> 
```

并且根据 xml 中的属性，它将“膨胀”或实例化 xml 布局中每个项目的 java 对象表示。因此，如果您有一个包含此 xml 文件的项目，inflator 将创建您可以使用 findViewById() 检索的 java 对象。一旦您检索到对这些对象的引用，您就可以调用它们的各种方法来影响关于它们的不同事物。

# php - 以 ET 而非 EST 或 EDT 显示时间

> ID：11056778
> 
> 赞同：2
> 
> 时间：2012-06-15T19:09:25.610
> 
> 标签：php, datetime, date, time

我有一个小片段，它为这样的时间戳格式化日期：`(YYYY-MM-DD H:M:S T ) Ex: 2011-09-29 17:00:46 EST or 2011-09-29 17:00:46 EDT`

我想将 EST 和 EDT 转换为 ET 并改为显示 ET，这样用户就不用担心 Dayligt 的节省。我怎么做？

```
 $timeZone = new DateTimeZone('America/New_York');
    $processedDate = str_replace(".000000", "", $timestamp);
    $dateTime = new DateTime($processedDate, new DateTimeZone('GMT'));
    $dateTime->setTimezone($timeZone);
    $processedDate = $dateTime->format('Y-m-d H:i:s') . ' ' . $dateTime->format('T');
    echo processedDate; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T19:11:22.987

你想做的事情是不切实际的，会导致你的用户讨厌你。

命名时区背后的全部原因是为了准确地表示当地时间。当当地在 DST 内时，将“标准”时间表示为当地时间在客观上是不正确的。在那个时区内读取时间的任何人都会被误导。

如果您需要存储和使用忽略时区的日期和时间，请为此目的使用 UTC，即存储和普通数学。值得记住的是，即使是好的旧 Unix 时间戳也是“UTC 1970 年 1 月 1 日午夜过后的秒数”。

如果您需要向用户表示本地时间，那么您应该允许他们选择他们的本地时区，并将其转换为显示。现代 PHP 的 DateTime 和 DateTimeZone 使这变得非常简单。从交互式提示中：

```
php > $utc = new DateTimeZone('UTC');
php > $amla = new DateTimeZone('America/Los_Angeles');
php >
php > $two_past_midnight = new DateTime('2011-04-05 00:02', $utc);
php > $two_past_midnight->setTimeZone($amla);
php > echo $two_past_midnight->format('Y-m-d H:i:s');
2011-04-04 17:02:00 
```

没有混乱，没有大惊小怪。当我们切换时区时，它为我们处理了数学问题。

或者，如果您真的、真的、真的想要展平 DST 时区，请结合各种时区 date() 格式查看 getTransitions 和 getOffset，尤其是我。您可以戳戳结果信息，以查找任何 DST 区域的“标准”版本下一次转换的时间并相应地进行调整。请记住，不同的区域在不同的时间过渡，并不是所有的区域都以相同的量过渡……有些根本不过渡。我想有人已经提到了印第安纳州。

通常我也会在这里提供示例代码，但是日期数学让我对暴力充满了永不满足的渴望。谁认为 60、60、24、7、4-6、12 和 52 是可以接受的思考时间和日期的方式，都是邪恶的、邪恶的人。值得庆幸的是，他们都已经死了几百到几千年。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:20:21.730

没有名为 ET 的时区——它是`EST (Eastern Standard Time)`或`EDT (Eastern Daylight Time)`。如果您想要没有夏令时的东部时间，请使用 EST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-03T22:41:50.257

```
$date = str_replace(array('EST', 'EDT'), 'ET', $date); 
```

# iphone - UITableView 在滚动时移动单元格内容

> ID：11056779
> 
> 赞同：1
> 
> 时间：2012-06-15T19:09:30.793
> 
> 标签：iphone, objective-c, ios, xcode

我在这里看到了与此相关的其他问题，但我有他们的解决方案，当我滚动时，事情仍然会发生变化。

基本上，我有一个数据表，我希望第一行也是唯一的第一行有一个 UITableViewCellAccessoryDisclosureIndicator。问题是，当我滚动时，指示器会复制、删除并移动到其他单元格。这是我的代码..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }    

    if(indexPath.row == 0) {      
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;           
    }

    cell.textLabel.text = [tabledata objectAtIndex:indexPath.row];

    return cell;
} 
```

问题出在 indexPath.row 变量上。它以某种方式在不是第一个的其他单元格中返回 0（在显示单元格时）。但是......数据总是来自我的数组（这意味着值必须是正确的）并且在我的

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{ 
```

方法，我只希望在单击第 0 行时更改屏幕.. 无论我滚动到哪里，除了第一个单元格之外，没有单元格触发。所以看起来那个检查总是正确的，而 cellForRowAtIndexPath 里面的那个不是......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:13:56.070

最有可能的是，您正在重新使用已经拥有该`accessoryType`集合的单元格。您需要将其显式设置为不显示在不应显示的单元格上。

```
if(indexPath.row == 0){      
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;       
} else {
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

# javascript - 如何使用 jQuery 预先格式化电话号码字段？

> ID：11056781
> 
> 赞同：3
> 
> 时间：2012-06-15T19:09:37.867
> 
> 标签：javascript, jquery, user-interface, field

我想要一个电话号码文本字段预先格式化为 10 位数字，就像这样（不包括管道，只是分隔字段）：

```
|(   )    -    | 
```

并让用户输入的数字正确填写

```
|(804) 479-1832| 
```

我找到了一个很好的脚本，可以在[此处](http://www.tutorialdash.com/tutorial/javascript/basics/view/How-to-Auto-Format-And-Mask-Telephone-Numbers-with-Javascript_44084)输入数字时正确格式化，但还没有提供预格式化的结构。

是否有一个简单的库或链接？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T19:12:31.520

检查[这个](http://digitalbush.com/projects/masked-input-plugin/)屏蔽输入插件。这似乎是您正在寻找的东西。

# drop-down-menu - 如果下拉列表选择的值 = 特定值，我正在寻找一个示例 javascript 来显示不同的隐藏输入。有人有什么吗？

> ID：11056782
> 
> 赞同：0
> 
> 时间：2012-06-15T19:09:49.930
> 
> 标签：drop-down-menu, input, onchange, hidden-field

我将从什么代码开始？我知道 onChange 不适用于 input=hidden。最好写一些东西来重命名隐藏字段，然后将其构建到下拉列表的现有 onchange 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:23:41.547

不是 100% 确定你想要做什么。我不相信它可以`<input type="hidden"`在浏览器上制作带有 show 的标签，除非你改变它的类型。

刚刚在[W3Schools](http://www.w3schools.com)测试过这个并在 Chrome 上工作

```
<input type="hidden" value="OK">

<p id="demo">Click the button below to set the type attribute of the button above.</p>

<button onclick="myFunction()">Try it</button>

<script type="text/javascript">

function myFunction()
{
  document.getElementsByTagName("INPUT")[0].setAttribute("type","button"); 
};

</script>

<p>Internet Explorer 8 and earlier does not support the setAttribute method.</p> 
```

授予此代码显然声明它不适用于 IE8 或更早版本，并且为您想要的每个隐藏字段设置 id 属性可能会更好，并且可能使用类似`document.getElementById(IDVALUE).setAttribute("type", "text")`虽然这将允许用户更改值标签。

现在剩下的就是提供一个带有 onChange 函数的下拉列表，该函数根据所选内容运行上述语句。

# css - 使用 CSS 媒体查询在其他容器之间拉出 2 个容器

> ID：11056783
> 
> 赞同：0
> 
> 时间：2012-06-15T19:09:52.727
> 
> 标签：css, media-queries

我需要使用 CSS 媒体查询来拉出右侧的第二个和第四个框。当浏览器变宽时，框 2 和框 4 需要向右移动，框 2 需要在框 1 下方保持齐平。框的顺序需要。

我想出的解决方案很接近，但是当框 2 的文本太长时，它会将框 3 向下推。重要的是，方框 3 与方框 1 保持齐平。

这是 JsFiddle 中的一个示例：http: [//jsfiddle.net/FJswg/](http://jsfiddle.net/FJswg/)

```
<html>
  <style>
    body {
      margin:0;
      padding:0;
    }
    div {
      padding:10px;
    }
    #box1 {
      color:#fff;
      background-color:#00f;
    }
    #box2 {
      background-color:#0f0;
    }
    #box3 {
      background-color:#f00;
    }
    #box4 {
      color:#fff;
      background-color:#000;
    }
    @media screen and (min-width: 500px) {
      #box1 {
        float:left;
        clear:left;
        width:150px;
      }
      #box2 {
        margin-left:170px;
      }
      #box3 {
        float:left;
        clear:left;
        width:150px;
      }
      #box4 {
        margin-left:170px;
      }
    }
  </style>
  <body>
    <div id="box1">Box 1</div>
    <div id="box2">Box 2, Consectetur gentrify gluten-free fanny pack, bespoke enim ethical letterpress pitchfork ullamco pickled.</div>
    <div id="box3">Box 3</div>
    <div id="box4">Box 4, 8-bit mumblecore excepteur readymade single-origin coffee fingerstache mlkshk. Sint fanny pack raw denim quinoa. Ennui vero photo booth magna.</div>
  </body>
</html> 
```

## 更新

如果我必须使用 JavaScript，这是最干净的方法吗？[http://jsfiddle.net/FJswg/8/](http://jsfiddle.net/FJswg/8/)

```
var size = 0;
$(window).resize(function() {
    checkWidth();
});
$(document).ready(function() {
    checkWidth();
});

function checkWidth() {
    var newWidth = $(window).width();
    var newSize = 0;
    if (newWidth >= 500) {
        newSize = 1;
    }
    if (newSize != size) {
        size = newSize;
        $moveElement = (size < 0) ? $("#box2") : $("#box3");
        $("#box1").after($moveElement);
    }
}? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:28:59.133

一种选择是使用相对+绝对定位。在此处查看[演示](http://jsfiddle.net/FJswg/6/)。

```
@media screen and (min-width: 500px) {
      #box1 {
        float:left;
        clear:left;
        width:150px;
      }
      #box2 {
        margin-left:170px;
      }
      #box3 {
        top: 50px;            
        clear:left;
        width:150px;
        position: absolute;
      }
      #box4 {
        margin-left:170px;
      } 
```

您可能还需要使用 javascript 动态设置`top`高度`box1`。

# javascript - 正则表达式在javascript中跨越-9.99到0的范围

> ID：11056786
> 
> 赞同：2
> 
> 时间：2012-06-15T19:10:02.333
> 
> 标签：javascript, regex

我觉得我非常接近我的正则表达式 -9.99 到 0。

我有

```
/^[-][0-9]?(\.[0-9][0-9]?)?$/ // does not get the 0 :/ 
```

如果我添加 |0 那么它允许 20 30 等...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:15:55.773

您需要括号才能`|0`正确使用`^`and `$`。也`[-]`与文字相同`-`，并且`\d`是`[0-9]`:)的简写

```
/^(-\d?(\.\d\d?)?|0)$/ 
```

如果您使用 Javascript，尽管将字符串转换为数字并从那里开始会更简单（更快）（假设您也可以允许数字`-3.21312`，否则您也可以去掉多余的数字）：

```
var str = "-8.57";
if(-10 < +str && +str <= 0){
    // Condition passed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:16:23.417

不确定您到底在追求什么，但既然您处理数字，为什么不这样做（`x`您的数字在哪里）：

```
if(x <= 0 && x >= -9.99)
   console.log("OK"); 
```

# design-patterns - 使用 protobuf 进行部分反序列化

> ID：11056787
> 
> 赞同：2
> 
> 时间：2012-06-15T19:10:03.873
> 
> 标签：design-patterns, serialization, architecture, protobuf-net

对 marc 或任何有 protobuf-net 经验的人：

我有一个架构，其中服务器保持与客户端的终生持久连接（通过 TCP）。因为连接层/服务器应该有很高的正常运行时间，所以它只会反序列化消息并将它们传递给应用服务器/层。它本身不包含商业逻辑。

```
 clients -> connection layer (deserialization) -> app layer (business logic) 
```

问题是，虽然我现在可以更改 biz 逻辑，但我无法更改应用层和客户端共享的模型，因为连接层依赖于模型进行反序列化。

有没有办法让连接层仅将消息部分反序列化到基类，以用于转发/路由目的？

否则，我想我必须在基类中创建一个二进制字段，按原样传递并由应用层反序列化。一级序列化，二级反序列化。

**编辑：充实**

```
class Message
{
  User user;
  // not much else in here, potentially routing information
}

class RequestType1: Message
{
 // lots of fields 
 // which are specific to this type of request/reply 
}

class RequestType2: Message
{

} 
```

连接层不应该关心特定请求类型的结构。这样我就可以随意更改它们，只要客​​户端和应用层都同意。但目前连接层进行反序列化，因此它确实需要知道模型，并且任何更改都会迫使我重新启动连接服务器。

我只需要它反序列化足以路由，这意味着“用户信息”+“子类型名称/编号”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T13:03:56.810

首先：您不应该直接通过网络发送 protobuf 序列化消息，因为 TCP 是基于流的。您永远无法判断何时收到完整的消息。

`WithLengthPrefix`仅用于此目的。用二进制长度为所有消息添加前缀，以便您可以判断完整消息何时到达。

如果我是你，我会创建一个包含足够路由信息的标题。长度是强制性的，但您也可以包括传输消息的类型等。这意味着您只需检查每条消息的标头，而不是调用代价高昂的反序列化。

示例请求标头：

*   标题版本 ( `byte`)
*   内容类型 ( `byte`) （您需要在某处创建映射）
*   内容长度 ( `int`)

我目前正在为我的 Griffin.Networking ( [http://github.com/jgauffin/griffin.networking](http://github.com/jgauffin/griffin.networking) ) 编写一个小插件，它将有一个小标题并使用 protobuf 来处理消息。观看项目以在提交时获取更新。

# matlab - 如何在 MATLAB 中可视化 3D 矩阵

> ID：11056796
> 
> 赞同：2
> 
> 时间：2012-06-15T19:10:44.673
> 
> 标签：matlab, memory-management, matrix, plot, visualization

我试图在 MATLAB 中可视化包含 3D 数组的数据。

该数组的维度为 20*20*40，除了一些元素为零之外，其他所有元素都为零。

我正在寻找一种在散点图中绘制这些非零点的方法，以便非零点相互连接。

这是我到目前为止所做的：

```
b=zeros(6,6,3);
a=[1 1 1;2 2 1;2 1 1;1 2 1;
1 1 2;1 2 2;2 1 2;2 2 2;
6 6 3;6 5 3;5 6 3;5 5 3;
6 6 2;6 5 2;5 6 2;5 5 2];
[r c]=size(a);
for i = 1:r
 b(a(i,c-2),a(i,c-1),a(i,c)) = 1;
end
[m n o]=size(b);
figure (1)
[x,y,z] = meshgrid(1:m,1:n,1:o);
scatter3(x(:),y(:),z(:),90,b(:),'filled') 
```

所以，我所追求的是能够将八点二中的每一个连接到立方晶格。任何想法都非常感谢。 ![在此处输入图像描述](../Images/a0698b4eb5809e7dc02bd2a7ca4577b6.png)

**编辑：** 非常感谢所有提供了很多帮助的专家。现在，我面临另一个记忆问题。

我真实案例的 b 矩阵是 1000*1000*2000 ，我有大小为 4,4700,000*3 的“a”矩阵。“a”矩阵的所有元素都是整数值。虽然我有高达 48GB 的​​内存可用。但是，在上面的“for 循环”中，程序弹回了“内存不足”错误。

非常感谢任何提高内存效率的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:51:02.107

考虑以下（基于[先前的答案](https://stackoverflow.com/a/6700846/97160)）：

```
%# adjacency matrix
adj = false(numel(b));

%# extract first cube, and connect all its points
bb = b;
bb(:,1:3,:) = false;
idx = find(bb);
adj(idx,idx) = true;

%# extract second cube, and connect all its points
bb = b;
bb(:,4:6,:) = false;
idx = find(bb);
adj(idx,idx) = true;

%# points indices
[r c] = find(adj);
p = [r c]';

%# plot
plot3(x(p), y(p), z(p), 'LineWidth',2, 'Color',[.4 .4 1], ...
    'Marker','o', 'MarkerSize',6, ...
    'MarkerFaceColor','g', 'MarkerEdgeColor','g')
axis equal, axis vis3d, grid on, view(3)
xlabel x, ylabel y, zlabel z 
```

![在此处输入图像描述](../Images/b2095b81d812354ce27878303842cff7.png)

* * *

## 编辑：

手动连接点会更容易：

```
%# edges: connecting points indices
p = [
    1 2; 2 8; 8 7; 7 1;
    37 38; 38 44; 44 43; 43 37;
    1 37; 2 38; 7 43; 8 44;
    65 66; 66 72; 72 71; 71 65;
    101 102; 102 108; 108 107; 107 101;
    65 101; 66 102; 71 107; 72 108
]';

%# plot
figure
plot3(x(p), y(p), z(p), 'LineWidth',2, 'Color',[.4 .4 1], ...
    'Marker','o', 'MarkerSize',6, ...
    'MarkerFaceColor','g', 'MarkerEdgeColor','g')
axis equal, axis vis3d, grid on, view(3)
xlabel x, ylabel y, zlabel z

%# label points
labels = strtrim(cellstr( num2str((1:numel(b))','%d') ));
idx = find(b);
text(x(idx(:)), y(idx(:)), z(idx(:)), labels(idx(:)), ...
    'Color','m', ...
    'VerticalAlignment','bottom', 'HorizontalAlignment','left') 
```

![截屏](../Images/d0d86a418e8141551bb8d9d2ac6ad477.png)

* * *

## 编辑#2：（归功于@tmpearce）

您可以半自动化构建边列表的过程。`p`只需将上述代码中手动构造的 matrx 替换为以下内容：

```
%# compute edges: pairs of vertex indices 
yIdx = {1:3 4:6};           %# hack to separate each cube points
p = cell(numel(yIdx),1);
for i=1:numel(yIdx)         %# for each cube
    %# find indices of vertices in this cube
    bb = b;
    bb(:,yIdx{i},:) = false;
    idx = find(bb);

    %# compute L1-distance between all pairs of vertices,
    %# and find pairs which are unit length apart
    [r,c] = find(triu(squareform(pdist([x(idx) y(idx) z(idx)],'cityblock'))==1));

    %# store the edges
    p{i} = [idx(r) idx(c)]';
end
p = cat(2,p{:});            %# merge all edges found 
```

这个想法是，对于每个立方体，我们计算所有顶点之间的[城市街区距离。](http://en.wikipedia.org/wiki/Taxicab_geometry)“侧”边的距离为`1`，而对角线的距离大于或等于`2`。

这个过程仍然假设属于每个立方体的顶点列表提供给我们，或者像我们在上面的代码中那样轻松提取......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:14:42.190

我想我会回答 Amro 的回答，并展示如何自动连接沿三次矩阵的边。此答案旨在作为 Amro 的补充，我建议将其合并到该解决方案中，以便将来的观众更容易阅读。

这`idx`从 Amro 的解决方案开始，其中包含立方体角的线性索引。下面我只用一个立方体完成了它，所以矩阵不是很大，我们可以在这里看到它们。

```
>> idx' %# transposed to save space in the printed output
ans =
 1     2     7     8    37    38    43    44 '

%# now get the subindex of each point in 3D
>> [sx sy sz] = ind2sub([6 6 3],idx);
%# calculate the "edge distance" between each corner (not euclidean distance)
>> dist = abs(bsxfun(@minus,sx,sx')) +...
          abs(bsxfun(@minus,sy,sy')) +...
          abs(bsxfun(@minus,sz,sz'))
dist =

 0     1     1     2     1     2     2     3
 1     0     2     1     2     1     3     2
 1     2     0     1     2     3     1     2
 2     1     1     0     3     2     2     1
 1     2     2     3     0     1     1     2
 2     1     3     2     1     0     2     1
 2     3     1     2     1     2     0     1
 3     2     2     1     2     1     1     0 '

%# find row and column index of points one edge apart
>> [r c]=find(triu(dist==1)); %# triu means don't duplicate edges

%# create 'p' matrix like in Amro's answer
>> p = [idx(r) idx(c)]'
p =
 1     1     2     7     1     2    37     7    37     8    38    43
 2     7     8     8    37    38    38    43    43    44    44    44 
```

为了可视化，您可以像 Amro 的答案一样绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T11:26:59.763

这是你需要的吗？

```
b=logical(b);                                  
scatter3(x(b(:)),y(b(:)),z(b(:)),90,'filled') 
```

![在此处输入图像描述](../Images/cbd065ddf364b1c893782b8d4d5780e5.png)

# c# - 运行我的 c# Selenium WebDriver 代码的 NUnit 错误

> ID：11056797
> 
> 赞同：7
> 
> 时间：2012-06-15T19:10:47.897
> 
> 标签：c#, visual-studio, selenium, selenium-webdriver, nunit

我正在使用 Visual Studio 用 C# 编写 Selenium WebDriver 代码，然后将其传递给 NUnit 以运行我的测试。

当我第一次构建和调试我的代码时，它会传递给 NUnit，我可以从那里成功运行（加载正确的浏览器加载正确的网页）

直到最近，每当我尝试在 NUnit 中运行它时，都会发生运行错误：

```
FirstSeleniumTest.SeleniumTest.TestGoogle:
SetUp : OpenQA.Selenium.WebDriverException : You will need to use add InternetExplorerDriver.UseLegacyInternalServer to the desired capabilities to use the internal native code server library. This functionality will be deprecated in favor of the standalone IEDriverServer.exe server.
  ----> OpenQA.Selenium.DriverServiceNotFoundException : The file C:\Users\lbrown\Documents\Visual Studio 2010\Projects\ClassLibrary15\ClassLibrary15\bin\Debug\IEDriverServer.exe does not exist. The driver can be downloaded at http://code.google.com/p/selenium/downloads/list
TearDown : System.NullReferenceException : Object reference not set to an instance of an object. 
```

我下载了它告诉我的驱动程序，但我不确定下一步该做什么或将它放在我的代码中的什么位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T22:33:29.393

解压缩驱动程序，并将其放在与运行测试相同的文件夹中。将其添加到 Visual Studio 中的项目中，确保其构建属性设置为“始终复制”。这将确保它始终复制到与包含测试的已编译 .DLL 文件相同的构建目录。

您可以稍后移动它，但当它与测试位于同一文件夹中时，它会正常工作。

# dynamics-ax-2009 - 查找/搜索 AOT 以获取完全匹配

> ID：11056800
> 
> 赞同：0
> 
> 时间：2012-06-15T19:10:52.597
> 
> 标签：dynamics-ax-2009, x++, microsoft-dynamics, axapta

是否可以在 Dynamics AX 2009 中找到（搜索）精确匹配？

例如，当我在 AOT 中搜索“AddressRelationship”时，我不想在结果中看到 DirPartyAddressRelationship。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:39:54.523

好的，我花了一段时间，但我已经想通了，这**是可能的**。

向查找表单添加断点表明它使用一个调用类`SysUtilScanSource`来在 AX 源代码中查找您的字符串。

在`SysUtilScanSource.do()`该方法`match`中用于查找针对特定源代码的匹配项。你可以在这里阅读更多信息`match`；

[http://msdn.microsoft.com/en-us/library/aa886279(v=ax.10).aspx](http://msdn.microsoft.com/en-us/library/aa886279(v=ax.10).aspx)

该`match`方法允许您使用表达式。

您需要的表达式如下；

**：空间**

> 其中 SPACE 是字符“ ”。将匹配设置为空格、制表符和控制字符，例如 Enter（新行）。

**例如：**

```
match("ab: cd","ab cd"); //returns 1 
match("ab: cd","ab\ncd"); //returns 1 
match("ab: cd","ab\tcd"); //returns 1
match("ab: cd","ab cd"); //returns 0 - only the first space is matched 
```

**因此，在您的示例中，您需要在“包含文本”字段中输入以下字符串；**

```
: AddressRelationship: 
```

请注意，在上面的字符串中，以下位置有空格；

```
:SPACEAddressRelationship:SPACE 
```

*尝试一下。我做到了，它很管用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:20:20.557

当您进行查找时，请查看查找表单窗口末尾的“属性”选项卡。这使您可以根据属性缩小搜索范围。我不相信有一种方法可以使用完全匹配，但您可以使用属性缩小搜索范围。

# iphone - 我的主视图控制器如何知道 Web 服务调用何时完成

> ID：11056802
> 
> 赞同：0
> 
> 时间：2012-06-15T19:11:05.013
> 
> 标签：iphone, ios, web-services, ipad, delegates

嗨，我有一个基于 Web 服务的应用程序，可以与我们的服务器交换数据。因为我有一个专门的班级来做我的工作，所以主视图控制器实际上每次都会调用工人。工作人员自己知道连接何时完成，因为它是一个 NSURLConnectionDelegate。但是，每当工作完成时，我都需要通知主视图控制器。worker 是主视图控制器的代表，因此它知道何时需要开始工作。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:21:18.470

你应该反过来做。

首先将您的工作对象声明为您的主视图控制器的成员（当然，使其成为一个属性），然后从您的主视图控制器中，您可以调用`[self.worker sendRequstToServer]`以发送请求。

其次，在你的主视图控制器中，无论你在哪里初始化你的工作对象，不要忘记把`self = worker.delegate`.

第三，在您的工作人员类中声明一个委托方法，例如`-(void)webServiceCallFinished()`，并调用`[self.delegate webServiceCallFinished]`您的工作人员（如果您使用 NSXMLParer 解析 xml `-connectionDidFinishLoading()`，您可能想要这样做）`-parserDidEndDocument()`

最后，你想将你的主视图控制器声明为你的工作类的委托并实现`-webServiceCallFinished()`。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:56:26.150

你可以通过两种方式做到这一点：

***方法#1：***

用户本地通知。在主类中，通过以下方式将观察者添加到 LocalNotification Center 中。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(jobDone) name:@"WORKERJOBOVER" object:nil]; 
```

并且在工作完成后的工人阶级中，发布通知以触发选择器：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"WORKERJOBOVER" object:nil]; 
```

***方法#2：***

您可以创建工作人员类的协议并在协议中添加一个方法，当您在工作人员中完成工作时可以在委托上调用该方法。

**工人类.h**

```
//WorkerClass.h

@protocol WorkerDelegate

@interface WorkerClass: NSObject

@property (nonatomic, assign) id<WorkerDelegate> delegate

- (void)JobInProcess;
@end

@protocol WorkerDelegate
- (void)MyJobIsDone;
@end 
```

**工人阶级.m**

```
//WorkerClass.m

@implementation WorkerClass
@synthesize delegate = _delegate;

- (void)JobInProcess
{
    //When job over this will fire callback method in main class
    [self.delegate MyJobIsDone];
} 
```

**主类.h**

```
 //MainClass.h
#import WorkerClass.h

@interface MainClass: NSObject <WorkerDelegate>

@end 
```

**主类.m**

```
//MainClass.m

@implementation MainClass

- (void)MyJobIsDone
{
    //Do whatever you like
}
@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:21:06.747

在`viewDidLoad:`您的主视图控制器中，将其设置为通知观察者`[NSNotificationCenter defaultCenter]`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(webServiceContacted:) name:@"webServiceConnectionSuccessful" object:nil]; 
```

然后，当您的数据与服务器成功交换后，在网络完成块中发布通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"webServiceConnectionSuccessful" object:nil]; 
```

`webServiceContacted:`可能看起来像这样：

```
-(void)webServiceContacted:(NSNotification *)note
{
    //do stuff here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:28:45.200

我会从后台工作人员发出通知，您可以从主视图控制器中收听该通知

当您想收听时，在您的视图中添加以下内容。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(operationComplete:) name:@"operationComplete" object:nil]; 
```

在您的后台视图中通知事件已完成。

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"operationComplete" object:nil]; 
```

最后别忘了移除观察者 [[NSNotificationCenter defaultCenter] removeObserver:self];

# python - Python：有没有办法在不使用“全局”的情况下从其他函数访问变量？

> ID：11056807
> 
> 赞同：2
> 
> 时间：2012-06-15T19:11:34.143
> 
> 标签：python, scope

这是我在想的一个例子：

```
def check_args():
    if len(sys.argv) < 2:
        sys.exit('Reason')
    if not os.path.exists(sys.argv[1]):
        sys.exit('ERROR: Folder %s was not found!' % sys.argv[1])
    global path
    path = sys.argv[1] 
```

正如您在 check_args() 成功完成后所说的那样，“路径”变量具有普遍意义 - 您可以在其他函数中将其用作事实上的变量。

所以我在想是否有办法访问“路径”，例如 check_args.path？

在 python v3 中怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:16:19.447

Python 函数是对象。您可以在它们上定义任何您想要的自定义属性：

```
def a():
    a.test = 123

a()
a.test # => 123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:41:13.080

您可以简单地返回值

```
def check_args():
    if len(sys.argv) < 2:
        sys.exit('Reason')
    if not os.path.exists(sys.argv[1]):
        sys.exit('ERROR: Folder %s was not found!' % sys.argv[1])
    path = sys.argv[1]
    return path

my_path = check_args() 
```

或使用时`if __name__ ...`：

```
if __name__ == '__main__':
    my_path = check_args()
    results = do_something(path) 
```

# jquery - 大型商务悬停菜单

> ID：11056808
> 
> 赞同：0
> 
> 时间：2012-06-15T19:11:35.730
> 
> 标签：jquery, jquery-ui, menu, e-commerce, accordion

好的，所以我仅限于如何在大型商业中自定义菜单。这是我到目前为止所拥有的，请记住一些标签是由系统自己生成的。

在手风琴中显示类别菜单的面板的代码如下所示：

```
$('.SideCategoryListClassic').children().children('li')
    .hover(function(){
        $(this).children('ul').children().slideDown()
    },
    function(){
        $(this).children('ul').children().slideUp()
    });
$('a[href*="-main"]').attr('href', '#') 
```

还有一个内联样式表

```
.SideCategoryListClassic ul li ul li {
    display: none;
} 
```

生成菜单的方式超出了我的范围。我添加的其中一件事是 HERF 替换标签，用于禁用主类别上的链接，并且只让它在子类别上工作。

现在菜单功能作为悬停，但我希望它是一个点击功能菜单。我希望该组在单击时扩展，但如果我单击另一个组，我想隐藏前一个组。请记住，我无法修改 UL 的生成方式，也无法为它们分配样式类或 id 标签。您可以在此页面上看到菜单现在的样子：

[http://www.d2industries.mybigcommerce.com/about-us/](http://www.d2industries.mybigcommerce.com/about-us/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:24:24.207

```
$('.SideCategoryListClassic').children().children('li').click(function(){
    $('.SideCategoryListClassic').children().children('li').not(this).children('ul').children().slideUp();
    $(this).children('ul').children().slideToggle()
});​ 
```

单击时用于[`.slideToggle()`](http://api.jquery.com/slideToggle/)切换每个菜单的状态。

第一行选择所有**不是**这个的菜单并将它们向上滑动。第二行切换当前菜单的幻灯片。如果您不希望用户能够通过再次单击来关闭当前打开的菜单，请更改`slideToggle`为`slideUp`.

[演示](http://jsfiddle.net/tyVPs/)

# java - Android DatePickerDialog 参数

> ID：11056810
> 
> 赞同：0
> 
> 时间：2012-06-15T19:11:40.337
> 
> 标签：java, android

我在运行时动态创建按钮，他们的点击事件会打开一个 datepickerdialog。所以像这样：

```
Button btnDate = new Button(this);
btnDate.setText("Date");
btnDate.setTag(new UDAControlItemTag(q.getiQuestionID(),-1,f.getiSectionID(),f.getiGroup(),-1,"Date",""));
btnDate.setOnClickListener(new View.OnClickListener() {                         
  @Override
  public void onClick(View v) {
    Button tempBtn = (Button)v;
    UDAControlItemTag tempQ = (UDAControlItemTag)tempBtn.getTag();
    showDialog(DATE_DIALOG_ID_Question);    
    //tempBtn.setText(Integer.toString(mTempMonth));
    }
}); 
```

然后我有监听器，我可以在其中获取值和内容，但是因为我正在动态创建控件，所以我将每个控件的这些值保存在具有不同属性的 ArrayList 中。我遇到的问题是如何获取我需要的参数，以正确确定单击了哪个按钮，以便将该问题的正确属性放入 ArrayList。

```
private DatePickerDialog.OnDateSetListener mDateSetListenerQuestion =  
   new DatePickerDialog.OnDateSetListener() {  
         public void onDateSet(DatePicker view, int year,  
             int monthOfYear, int dayOfMonth) {  
             mTempYear = year;
             mTempMonth = monthOfYear;
             mTempDay = dayOfMonth;
         }

}; 
```

所以在那里我有对话框的值，但我需要有一个与用户单击的按钮相关联的 QuestionID，以便将值放入所有答案的 ArrayList 中，以获取活动上所有动态控件的所有答案. 我真的很感激任何想法，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:39:49.477

您可以使用自己的实现`DatePickerDialog.OnDateSetListener`接口的类而不是那个侦听器，并且还有一个构造函数，该构造函数`int`采用`QuestionID`. 像这样的东西：

```
public class TheSpecialListener implements
            DatePickerDialog.OnDateSetListener {

        private int id;

        public TheSpecialListener(int id) {
            this.id = id;
        }

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mTempYear = year;
            mTempMonth = monthOfYear;
            mTempDay = dayOfMonth;
            // id is the QuestionID so you now can identify the Button that started the dialog
        }

    }; 
```

现在，当您单击 a 时，您将使用将在方法中使用的 QuestionID`Button`更新一个字段（我不知道您是如何实现的）：`Button``onCreateDialog`

```
private int questionId; 
```

在`Button`听众中：

```
//...
Button tempBtn = (Button)v;
UDAControlItemTag tempQ = (UDAControlItemTag)tempBtn.getTag();
questionId = //here pass the Button's id or whatever
showDialog(DATE_DIALOG_ID_Question); 
```

并在`onCreateDialog`方法中实例化上述特殊侦听器并将保存标识符的 questionId 字段传递给它，因为每次单击按钮时都会更新它：

```
DatePickerDialog spd = new DatePickerDialog(this,
                    new TheSpecialListener(questionId), 2012, 6, 16); 
```

# msdn - vcredist在哪里下载？

> ID：11056812
> 
> 赞同：14
> 
> 时间：2012-06-15T19:11:56.653
> 
> 标签：msdn, vcredist, technet

问这个问题我觉得有点愚蠢，但我希望这对其他人也有帮助。

**背景：我们/我正在使用Visual Studio 2008 SP1 (VC9)**开发一些软件。我们想提供`vcredist`该软件的光盘。

现在，我习惯于向谷歌询问“下载 vcredist 2008 sp1”，通常它会引导我访问以下（也已添加书签）网页：

*   [https://www.microsoft.com/en-us/download/details.aspx?id=5582（32](https://www.microsoft.com/en-us/download/details.aspx?id=5582)位）
*   [https://www.microsoft.com/en-us/download/details.aspx?id=2092（64](https://www.microsoft.com/en-us/download/details.aspx?id=2092)位）

我想我已经从相同的 URL下载了不同的版本（9.0.30729\. **01**和更高版本的 9.0.30729\. **17 ），因为它们可用。**今天，该页面上只有**.17**可用。现在，一位客户投诉并告诉我有一个 9.0.30729。**6161**可用，但我找不到。我能得到的最接近的是 9.0.30729。**5677**：

*   当我在谷歌上搜索那个特定版本时，它把我带到了这个页面： http: [//support.microsoft.com/kb/2538243](http://support.microsoft.com/kb/2538243)这就是说，有一个安全更新可用。
*   链接的安全公告[https://technet.microsoft.com/en-us/security/bulletin/ms11-025](https://technet.microsoft.com/en-us/security/bulletin/ms11-025)列出了受影响的 vcredist 2008 sp1，并作为似乎是 vcredist 2008 更新版本的新链接sp1，虽然名称略有不同，但名称中还带有“mfc”：[https ://www.microsoft.com/en-us/download/details.aspx?id=26368](https://www.microsoft.com/en-us/download/details.aspx?id=26368)
*   文件名、文件大小和版本号表明这些是 vcredist 2008 sp1 的更新版本。这是版本 9.0.30729。**5677**

是否有一个网址可以让我随时获取最新版本？

是否有某种通知系统（电子邮件列表、rss-feed、...）通知我有关新的 vcredist 的信息？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-24T06:09:09.143

您可以在以下位置下载 VC++ 可再发行组件：

[https://support.microsoft.com/en-us/kb/2977003](https://support.microsoft.com/en-us/kb/2977003)

截至目前，最新的有：

*   带有 MFC 安全更新的 Visual Studio 2005 (VC++ 8.0) SP1：`8.0.61001 (8.0.61000 for x86)`
*   带有 MFC 安全更新的 Visual Studio 2008 (VC++ 9.0) SP1：`9.0.30729.6161`
*   Visual Studio 2010 (VC++ 10.0) SP1 w/ MFC 安全更新：`10.0.40219.325`
*   Visual Studio 2012 (VC++ 11.0) 更新 4：`11.0.61030.0`
*   Visual Studio 2013 (VC++ 12.0) 更新 5：`12.0.40660.0`
*   Visual Studio 2015 (VC++ 14.0) 更新 3：`14.0.24215.1`
*   视觉工作室 2017 (VC++ 14.1):`14.16.27012.6`
*   Visual Studio 2019 (VC++ 14.2)：`14.25.28508.3`

**注意：** 2015、2017 和 2019 包共享相同的运行时文件，因此只需要该系列的最新版本。

有关其他版本信息，请参阅：

[https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B](https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B)

# php - 动态 jQuery attr() href

> ID：11056816
> 
> 赞同：0
> 
> 时间：2012-06-15T19:12:11.860
> 
> 标签：php, jquery, href

我有一个图像滑块。每个图像都有自己的链接。滑块是在**PHP**中使用 for 循环生成的。

我想动态地将滑块中的图像链接与我网页上其他地方的链接相关联。

我在 php for 循环中做了这个：

```
$(document).ready(function(){
    $("#ProgrammeImmobilierNeuf")
       .attr("href", "<?php echo URL.'p-'.$picturesSlider[$i]['id_programme_ws'].'/Programme-immobilier-neuf-'.strtolower($urlVille).'/'.rewriteProgramme($picturesSlider[$i]['nom']).'.html'; ?>");
}); 
```

这不会更新链接。

有人能帮助我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:14:41.797

我想你忘`$`了`echo URL`，如果`URL`不是`constant`：

```
..."<?php echo $URL.'p-'.$picturesSl... 
```

# twitter-bootstrap - 我如何将 AngularJS ng-repeat 与 Twitter Bootstrap 的脚手架一起使用？

> ID：11056819
> 
> 赞同：28
> 
> 时间：2012-06-15T19:12:21.757
> 
> 标签：twitter-bootstrap, angularjs

我将如何使用 AngularJS`ng-repeat`来显示以下 HTML（Twitter Bootstrap Scaffolding）？本质上，我需要每第三条记录关闭`</div>`，打印一个`<hr>`，然后打开另一个`<div class="span4">`

```
 <div class="row">
      <div class="span4">
        <h3>
          Project A
        </h3>
      </div>
      <div class="span4">
        <h3>
          Project B
        </h3>
      </div>
      <div class="span4">
        <h3>
          Project C
        </h3>
      </div>
    </div>

    <hr>

    <div class="row">
      <div class="span4">
        <h3>
          Project D
        </h3>
      </div>
      <div class="span4">
        <h3>
          Lab Title
        </h3>
      </div>
      <div class="span4">
        <h3>
          Project E
        </h3>
      </div>
    </div> 
```

我为代码演示创建了一个小提琴。
[http://jsfiddle.net/ADukg/261/](http://jsfiddle.net/ADukg/261/)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-15T21:37:01.103

这里有一个方法：

```
<div ng-controller="MyCtrl">
  <div ng-repeat="project in projects">
    <span ng-if="$index % 3 == 0">
      <hr />
      <div class="row">
        <h3 class="span4" ng-if="projects[$index+0]">{{projects[$index+0]}}</h3>
        <h3 class="span4" ng-if="projects[$index+1]">{{projects[$index+1]}}</h3>
        <h3 class="span4" ng-if="projects[$index+2]">{{projects[$index+2]}}</h3>
      </div>
    </span>
  </div>
</div> 
```

如果您有例如 7 个数据项，这种方式也可以工作：在最后 3 个数据上，它只会显示第 7 项，而不尝试显示不存在的第 8 项和第 9 项。

[http://jsfiddle.net/4LhN9/68/](http://jsfiddle.net/4LhN9/68/)

**编辑**：更新为使用 ng-if & angular 1.2.12

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-07T09:36:57.533

从[更简单的答案](https://stackoverflow.com/a/11058532/1447384)开始。我不喜欢原来的解决方案，因为它产生了空的 dom 元素。这是每行 3 个 div。

```
<div ng-controller="ModulesCtrl">
    <div class="row" ng-repeat="i in fields.range()">
        <div class="span4" ng-repeat="field in fields.slice(i,i+3)">
            <h2>{{field}}</h2>
        </div>
    </div>
</div> 
```

在函数 FieldsCtrl($scope) 中：

```
$scope.fields.range = function() {
    var range = [];
    for( var i = 0; i < $scope.fields.length; i = i + 3 )
        range.push(i);
    return range;
} 
```

如果你知道 fields.length 你可以代替 fields.range() 使用 [0,3,6,9] 等

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-14T10:11:56.040

更优雅的方式是使用视图模型提供分块集合，然后让视图处理它

```
<div ng-controller="Controller">
    Projects <input ng-model="projects"></input>
    <hr/>
    <div ng-repeat="row in rows">
        <div ng-repeat="project in row">
            Projects {{project}}
        </div>
        <hr/>
    </div>
</div>​ 
```

咖啡脚本很简单

```
# Break up an array into even sized chunks.
chunk = (a,s)->
    if a.length == 0
        []
    else               
        ( a[i..i+s-1] for i in [0..a.length - 1 ] by s)

@Controller = ($scope)->
    $scope.projects = "ABCDEF"

    $scope.$watch "projects", ->      
       $scope.rows = chunk $scope.projects.split(""), 3

angular.bootstrap(document, []); 
```

​</p>

[http://jsfiddle.net/ADukg/370/](http://jsfiddle.net/ADukg/370/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-15T10:39:58.120

要将视图逻辑排除在控制器之外并获得更可重用的解决方案，您可以创建一个自定义过滤器，将数组拆分为行组：

```
angular.module('app').filter('group', function() {
    /**
     * splits an array into groups of the given size
     * e.g. ([1, 2, 3, 4, 5], 2) -> [[1, 2], [3, 4], [5]]
     */
    return function(array, groupSize) {
        return _.groupBy(array, function(val, index) {
            return Math.floor(index / groupSize);
        });
    };
}); 
```

在视图中：

```
<div class="row" ng-repeat="group in projects | group:3">
   <div class="span4" ng-repeat="project in group">
      {{project}}
   </div>
</div> 
```

要包含 hr，您可以使用 ng-repeat 起点和终点：

```
<div class="row" ng-repeat-start="group in projects | group:3">
   <div class="span4" ng-repeat="project in group">
      {{project}}
   </div>
</div>
<hr ng-repeat-end /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-01T11:28:25.283

[ng-repeat-start 和 ng-repeat-end 端点](https://docs.angularjs.org/api/ng/directive/ngRepeat#special-repeat-start-and-end-points)似乎是实现此目的的便捷方法：

这导致简单的代码

```
<div ng-controller="MyCtrl">
    <div ng-repeat-start="project in projects">
        <span>
            <div class="row">
                <h3 class="span4">{{project}}</h3>
            </div
        </span>
    </div>
    <hr ng-repeat-end ng-if="($index + 1) % 3 == 0" />
</div> 
```

看到这个[jsfiddle](http://jsfiddle.net/grafmik/c0cu64r6/1/)

# python - 在python中将16位的最高字节转换为带符号的int

> ID：11056821
> 
> 赞同：1
> 
> 时间：2012-06-15T19:12:31.947
> 
> 标签：python, type-conversion, bit-shift

我使用 os.system 运行 make 命令

```
os.system('make -C mydir/project all') 
```

我想看看make是否失败。系统文档声明返回代码的格式与`wait()`

```
Wait for completion of a child process, and return a tuple containing its pid 
and exit status indication: a 16-bit number, whose low byte is the signal number 
that killed the process, and whose high byte is the exit status (if the signal 
number is zero); the high bit of the low byte is set if a core file was produced. 
```

所以如果make（或其他应用程序）返回-1，我必须将0xFFxx（我并不关心被调用的pid）转换为-1。右移后，我得到 0xFF，但我无法将其转换为 -1，它总是打印 255。

那么，在 python 中，如何将 255 转换为 -1，或者如何告诉解释器我的 255 实际上是一个 8 位有符号整数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T19:15:28.100

```
if number > 127:
  number -= 256 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T19:15:47.453

尽管 Ignacio 的答案对于这种情况可能会更好，但从特殊格式的数据中解包字节的一个很好的通用工具是[`struct`](http://docs.python.org/library/struct.html)：

```
>>> val = (255 << 8) + 13
>>> struct.unpack('bb', struct.pack('H', val))
(13, -1) 
```

# heroku - heroku 键：添加错误：“非阻塞套接字操作无法完成”

> ID：11056827
> 
> 赞同：2
> 
> 时间：2012-06-15T19:13:35.357
> 
> 标签：heroku

我是 Ruby on Rails、Git 和 Heroku 的初学者。我正在关注公司代理背后的 Rails 教程。到目前为止，我能够安装 RailsInstaller，它帮助我相当顺利地设置了 Ruby、Rails 和 Git（还有 GitHub）。但我真的被困在部分（http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec:1.4.1），我试图将我的公钥链接到我的新 Heroku 帐户将存储库推送到 Heroku。

我在公司代理后面的 Windows 7 机器上。我已经设置了 HTTP_PROXY env 变量，它正在为我推送到 GitHub 工作。我无法克服以下错误。似乎并没有到抱怨 ssh 公钥和这里关于 heroku 密钥的其他帖子的地步：添加错误有不同的输出。我还没有在 help.heroku.com 找到相关信息。任何见解将不胜感激！

```
c:\Sites\testproj\thirdapp>heroku keys:add
 Enter your Heroku credentials.
 Email: my.email@gmail.com
 Password (typing will be hidden):
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

Error:     A non-blocking socket operation could not be completed immediately. (Excon::Errors::SocketError)
Backtrace: C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/openssl/buffering.rb:53:in `sysread'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/openssl/buffering.rb:53:in `sysread'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/openssl/buffering.rb:53:in `fill_rbuff'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/openssl/buffering.rb:293:in `eof?'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/openssl/buffering.rb:246:in `readline'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/excon-0.14.0/lib/excon/ssl_socket.rb:68:in `initialize'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/excon-0.14.0/lib/excon/connection.rb:330:in `new'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/excon-0.14.0/lib/excon/connection.rb:330:in `socket'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/excon-0.14.0/lib/excon/connection.rb:175:in `request_kernel'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/excon-0.14.0/lib/excon/connection.rb:101:in `request'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-api-0.2.5/lib/heroku/api.rb:60:in `request'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-api-0.2.5/lib/heroku/api/login.rb:9:in `post_login'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-2.27.1/lib/heroku/auth.rb:74:in `api_key'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-2.27.1/lib/heroku/auth.rb:183:in `ask_for_credentials'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-2.27.1/lib/heroku/auth.rb:214:in `ask_for_and_save_credentials'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-2.27.1/lib/heroku/auth.rb:78:in `get_credentials'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-2.27.1/lib/heroku/command/keys.rb:66:in `add'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-2.27.1/lib/heroku/command.rb:176:in `run'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-2.27.1/lib/heroku/cli.rb:10:in `start'
           C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/heroku-2.27.1/bin/heroku:16:in `<top (required)>'
           C:/RailsInstaller/Ruby1.9.3/bin/heroku:19:in `load'
           C:/RailsInstaller/Ruby1.9.3/bin/heroku:19:in `<main>'

Command:   heroku keys:add
Version:   heroku-gem/2.27.1 (i386-mingw32) ruby/1.9.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T06:51:55.653

我也遇到同样的错误。我卸载它并从[Toolbelt](https://toolbelt.heroku.com/)安装最新版本的 Heroku并得到解决....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:01:09.220

类似的问题已在： [https ://github.com/heroku/heroku/issues/441](https://github.com/heroku/heroku/issues/441)

调用“heroku 键：添加”时，我也遇到了同样的错误。不幸的是，在代理后面工作时仍然没有找到任何解决方法。

根据问题，该命令在不在代理后面时有效。

# html - 顶部徽标对齐

> ID：11056832
> 
> 赞同：-5
> 
> 时间：2012-06-15T19:13:51.657
> 
> 标签：html, css

我想在顶部对齐我的徽标但没有这样做

[http://pligg.marsgibson.info](http://pligg.marsgibson.info)

我正在尝试更改 style.css 中的以下内容但失败了

```
#logo {
padding: 40px;
margin-left :-40px; 
```

看我要对齐的截图

![http://i50.tinypic.com/jhxaph.jpg](../Images/0e39cba7fe56d1b49df552e148eb6037.png)

我的风格.css

[pligg.marsgibson.info/templates/wistie/css/style.css](http://pligg.marsgibson.info/templates/wistie/css/style.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:17:58.917

您的`#content`标签有一个`padding`of `10px`，是内容标签内的标志吗？如果是这样，这就解释了空间。

# html - CSS scollbar 可见性

> ID：11056835
> 
> 赞同：0
> 
> 时间：2012-06-15T19:14:06.633
> 
> 标签：html, css

我想在我的 CSS 中添加这些规则

```
身体{
    溢出-x：隐藏；
    溢出-y：隐藏；
}

```

但我希望 y 轴上的滚动条可见但应该禁用。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:21:50.433

编辑：没有容器 div 就更简单了。试试这个：

```
html, body {
    width: 100%;
    height: 100%;
}
html {
    overflow-x: hidden;
    overflow-y: scroll;
}
body {
    overflow: hidden;
} 
```

然后，如果要启用滚动条，请`overflow: hidden;`从正文中删除。

演示：http: [//jsfiddle.net/SKxhP/1/](http://jsfiddle.net/SKxhP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:21:43.020

将您的 html 高度设置为 101%，这将导致滚动条始终显示，从而防止您的内容在滚动条正常出现时跳转。

```
 html{

    height: 101%;

  } 
```

见这里：http: [//jsbin.com/ixuhoj/edit](http://jsbin.com/ixuhoj/edit)

如果我误解了您的需要，请纠正我。

# backbone.js - 骨干路由器和收集问题

> ID：11056836
> 
> 赞同：1
> 
> 时间：2012-06-15T19:14:12.363
> 
> 标签：backbone.js

我有一个集合，我需要在触发路由时访问集合中的模型：

```
App.Houses = Backbone.Collection.extend({
    model: App.House,
    url: API_URL,
})

App.houseCollection = new App.Houses()
App.houseCollection.fetch();

App.HouseDetailRouter = Backbone.Router.extend({
    routes: {
        '': 'main',
        'details/:id': 'details',
    },
    initialize: function() {

    },
    main: function() {
        App.Events.trigger('show_main_view');  
    },
    details: function(id) {
        model = App.houseCollection.get(id);
        console.log(model);
        App.Events.trigger('show_house', model);
    },
}); 
```

结果`console.log(model)`是`undefined`。我认为是这种情况是因为集合还没有完成`fetch()`调用？

我想将模型附加到我正在触发的事件，以便响应事件的视图可以利用它。我可能采取了不好的方法，我不确定。

响应事件的视图之一：

```
App.HouseDetailView = Backbone.View.extend({
    el: '.house-details-area', 
    initialize: function() {
        this.template = _.template($('#house-details-template').html());
        App.Events.on('show_house', this.render, this);
        App.Events.on('show_main_view', this.hide, this);
    },
    events: {
        'click .btn-close': 'hide',
    },
    render: function(model) {
          var html = this.template({model:model.toJSON()});
          $(this.el).html(html);
          $(this.el).show();
    },
    hide: function() {
        $(this.el).hide();
        App.detailsRouter.navigate('/', true);
    }   
}); 
```

* * *

编辑：有点hacky修复：查看详细信息（）

```
App.HouseDetailRouter = Backbone.Router.extend({
    routes: {
        '': 'main',
        'details/:id': 'details',
    },
    initialize: function() {

    },
    main: function() {
        App.Events.trigger('show_main_view');  
    },
    details: function(id) {
        if (App.houseCollection.models.length === 0) {
           // if we are browsing to website.com/#details/:id
           // directly, and the collection has not finished fetch(),
           // we fetch the model.
           model = new App.House();
           model.id = id;
           model.fetch({
               success: function(data) {
                   App.Events.trigger('show_house', data);
               } 
           });
        } else {
            // if we are getting to website.com/#details after browsing 
            // to website.com, the collection is already populated.
            model = App.houseCollection.get(id);            
            App.Events.trigger('show_house', model);
        }
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:06:08.350

由于您既没有使用回调也没有使用事件来知道集合的`fetch`调用何时完成，因此获取集合可能会产生错误，或者您想要的模型未包含在服务器响应中，或者您正在路由到之前`fetch`完成的视图。

至于您的方法，这里有一些杂项提示：

*   最好在视图的构造函数`options`参数中将模型传递给视图。`render()`不接受任何争论，我认为改变这一点是非常规的。
*   总是`this`从`render()`你的观点中返回
*   您可以将您的`this.template = _.template`代码移动到您传递给`extend`. 此代码只需要在每次应用加载时运行一次，而不是针对每个单独的视图
*   现在最简单的可能是在你的`details`路由函数中只实例化一个模型和一个视图，调用`fetch`感兴趣的特定模型，并使用`success`回调来知道何时渲染视图。

# android - DOM解析后在自动完成文本视图中显示数据

> ID：11056838
> 
> 赞同：-1
> 
> 时间：2012-06-15T19:14:29.067
> 
> 标签：android

DOM解析后如何在自动完成文本视图中显示数据。我正在从网络服务获取数据，但我不知道如何在自动完成文本视图中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:50:28.970

[从android 开发者网站](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)获取的代码示例

```
public class CountriesActivity extends Activity {
         protected void onCreate(Bundle icicle) {
             super.onCreate(icicle);
             setContentView(R.layout.countries);

         ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                 android.R.layout.simple_dropdown_item_1line, COUNTRIES);
         AutoCompleteTextView textView = (AutoCompleteTextView)
                 findViewById(R.id.countries_list);
         textView.setAdapter(adapter);
     }

     private static final String[] COUNTRIES = new String[] {
         "Belgium", "France", "Italy", "Germany", "Spain"
     };
 } 
```

简单来说，它类似于列表视图，但在文本顶部或下方添加了一个文本视图。内容是数组列表中的内容。

# wordpress - .htaccess 使用 wordpress 的身份验证文件

> ID：11056839
> 
> 赞同：2
> 
> 时间：2012-06-15T19:14:29.913
> 
> 标签：wordpress, .htaccess, basic-authentication

我正在尝试在安装 Wordpress 的根目录的子目录中使用基本的 .htaccess 身份验证。这个问题和[这个问题](https://stackoverflow.com/questions/1641666/htaccess-rewrite-and-auth-conflict)一样。Wordpress 用于永久链接的根 .htaccess 文件与我在需要身份验证的子目录中的 .htaccess 文件不匹配。

但是，该解决方案不起作用，即使它起作用，我也无法使用该解决方案。这是因为 Wordpress 的 htaccess 生成覆盖了我在该部分中放置的任何内容。

它生成的是：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我想在 RewriteCond 列表中保留的是

```
RewriteCond %{REQUEST_URI} !(^/admin(/.*)?$) 
```

导航到[http://www.example.com/admin](http://www.example.com/admin)应该使用该目录中的 .htaccess 文件来验证用户。例如：

```
AuthName "Admin Area" 
AuthType Basic 
AuthUserFile "/home/.htpasswd"
AuthGroupFile "/home/.htgroups"
require valid-user 
```

导航到[http://www.example.com/anywhereelse](http://www.example.com/anywhereelse)应该重定向到 index.php

事实上，我什至无法让此处显示的 RewriteCond 工作。进入 /admin 目录时它总是只显示 404 页面，除非我`require valid-user`从 admin .htaccess 文件中删除该行。需要注意的一点是，在该 404 页面上，响应仍然包含 WWW-Authenticate 标头。

所以主要问题是：

1.  我怎样才能使这项工作？
2.  为什么它不能按原样工作？为什么我需要排除 /admin 目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:23:56.623

我在[这里](http://www.hotscripts.com/forums/web-servers/55804-conflict-between-rewriterule-authtype-basic.html)找到了解决方案。添加

```
ErrorDocument 401 default 
```

到 Wordpress 编辑部分之外的根 .htaccess 文件似乎已经解决了这个问题。我不确定这是否是最好的选择。如果有更好的解决方案，请随时发布。

# django - Django：如何通过模板获取外键连接的数据？

> ID：11056844
> 
> 赞同：14
> 
> 时间：2012-06-15T19:15:02.357
> 
> 标签：django, templates, foreign-keys, django-related-manager

几周以来，我一直在学习 Python 和 Django。到目前为止，阅读其他用户的问题和答案已经足够了。但是现在我的第一个问题的时刻已经到来。

我会尽力描述我的问题。我的问题是我无法查询或获取我想要的数据。

我想获取由 ForeignKey 关联到 Gallery 的类 Image 的第一个对象的 url，Gallery 由 ForeignKey 关联到类 Entry。

到目前为止的models.py：

```
class BlogEntry(models.Model):
   ...
   title = models.CharField(max_length=100)
   ...

class Gallery(models.Model):
   entry = models.ForeignKey('BlogEntry')

class Image(models.Model):
  gallery = models.ForeignKey('Gallery')
  picture = models.ImageField(upload_to='img') 
```

风景：

```
def view(request):
  return render_to_response('mainview.html', {
    'entryquery': BlogEntry.objects.all(),
    }
) 
```

模板：

```
{% for item in entryquery %}
  <h1>{{ item.title }}</h1>
  <img src="{{ item.WHAT TO ENTER HERE? :) }}" />
{% endfor %} 
```

很清楚我想要什么？有人可以帮助我，并在可能的情况下写一个简短的解释吗？

问候巴斯蒂安

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-15T19:25:35.093

您可以像访问[模板中的其他属性](https://docs.djangoproject.com/en/dev/ref/templates/api/#variables-and-lookups)一样[访问相关成员](https://docs.djangoproject.com/en/dev/ref/models/relations/)，因此您可以执行以下操作：. 但是，在 BlogEntry 上定义一个查找并返回适当图片的方法可能更容易，这样您就可以执行或类似的操作`item.gallery_set.all.0.image_set.all.0.picture.img``item.first_image`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-06T12:34:04.737

```
class BlogEntry(models.Model):
    ...
    title = models.CharField(max_length=100)
    ...

class Gallery(models.Model):
    entry = models.ForeignKey('BlogEntry',related_name="galleries")

class Image(models.Model):
    gallery = models.ForeignKey('Gallery',related_name='images')
    picture = models.ImageField(upload_to='img') 
```

您必须在图库模型和模板视图中的外键中添加*related_name ：*

```
{% for g in blogentry.galleries.all %}
    {{g.name}}
        {%for i in g.images.all %}
            <img src="{{i.picture.url}}">{{i.picture}}</img>
        {% endfor %}
{% endfor %} 
```

# webstorm - WebStorm 是否有类似于 Visual Studio 的 XML IntelliSense 注释的东西？

> ID：11056853
> 
> 赞同：0
> 
> 时间：2012-06-15T19:15:48.193
> 
> 标签：webstorm

[与此](https://stackoverflow.com/questions/7923123/does-aptana-have-anything-similar-to-visual-studios-xml-intellisense-comments)问题相同的问题，但针对 WebStorm (NetBrains) IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:19:32.690

是的，您可以将 jsDoc 与 Webstorm 一起使用。

输入 /** {Enter} 它会为你提供一个 jsDoc 模板。

# java - java.io.File delete() 在 Windows 7 中失败（java 新手）

> ID：11056856
> 
> 赞同：-1
> 
> 时间：2012-06-15T19:16:01.157
> 
> 标签：java, windows, java-io

我是 Java 新手，只是想制作一个简单的实用程序来移动、复制和删除我电脑上的一些 wav 文件，但 java.io.File delete() 失败。有问题的 wav 文件未选中只读（在 Windows 资源管理器中），但 File canWrite() 返回 false & setWritable(true) 失败。我一定是在做一些愚蠢的事情，因为以前似乎没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:19:31.547

您正在使用相对路径，并且您不在您认为的目录中。

在开始之前指定绝对路径或确定当前路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:23:27.313

以管理员身份运行 java 应用程序。然后尝试。

```
file.setWritable(true);
file.delete(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:28:32.193

尝试运行垃圾收集器：

```
File file = new File("test-file.txt");
System.gc()
boolean success = file.delete(); 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html)

# dojo - dojoAttachpoint 和 id 的区别

> ID：11056858
> 
> 赞同：4
> 
> 时间：2012-06-15T19:16:10.923
> 
> 标签：dojo

```
<div dojoType="dojo.Dialog" id="alarmCatDialog" bgColor="#FFFFFF" bgOpacity="0.4" toggle="standard">
<div class='dijitInline'>
       <input type='input' class='dateWidgetInput' dojoAttachPoint='numberOfDateNode' selected="true">
</div> 
```

如何显示我试过的这个对话框`dijit.byId('alarmCatDialog').show();`

上面的代码是一个模板，我`dijit.byId('alarmCatDialog').show()`从 .js 文件中调用。

`dojo.attr(this.numberOfDateNode)`这段代码有效，我得到了数据。但是如果我将 dojoattachpoint 更改为 id 那么我尝试`dijit.byId('numberOfDateNode')`将无法工作；

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T00:39:10.253

您的*numberOfDateNode*是一个普通的 DOM 节点，而不是小部件/dijit，即 javascript 对象扩展`dijit/_Widget`，这就是您无法通过`dijit.byId("numberOfDateNode")`. 改用`dojo.byId("numberOfDateNode")`，你就准备好了。

`dojoAttachPoint`或其 HTML5 有效版本`data-dojo-attach-point`在*dijit*模板中用于*附加*对 DOM 节点或子 dijit 到 dijit javascript 对象的引用，这就是 `dijit.byId('alarmCatDialog').numberOfDateNode`引用您的`<input type='input' class='dateWidgetInput' .../>`.

使用的主要原因`data-dojo-attach-point`是：

*   您可以创建多个*dijit*实例，因此您的模板无法通过 ID 识别节点/dijit，因为您将拥有多个具有相同 ID 的节点/dijit
*   这是一种优雅的声明方式，因此您的代码不会充满`dijit.byId/dojo.byId`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:23:46.903

跟踪dijit.Dialog的*内容*和*模板非常重要。*一旦你设置了对话框的内容，它的标记就会被解析——但不是以某种方式，这样 TemplatedMixin 就会应用于 content-markup-declared-widgets。

要成功实现模板，您将需要类似于以下代码的内容，请注意我已经评论了 attachPoints 的作用。

[这个 SitePen 博客](http://www.sitepen.com/blog/2008/06/24/creating-dojo-widgets-with-inline-templates/)提供了关于这个主题的很好的信息

```
define(
 [
   "dojo/declare",
    "dojo/_base/lang",
    "dijit/_Templated",
   "dijit/_Widget",
   "dijit/Dialog"
 ], function(
   declare,
    lang,
    _Templated,
    _Widget,
   Dialog
 ) {
  return declare("my.Dialog", [Dialog, _Templated], {
      // set any widget (Dialog construct) default parameters here
       toggle: 'standard',
        // render the dijit over a specific template
        // you should be aware, that once this templateString is overloaded,
        // then the one within Dialog is not rendered
      templateString: '<div bgColor="#FFFFFF" bgOpacity="0.4">' +// our domNode reference
                '<div class="dijitInline">' +
                    // setting a dojoAttachPoint makes it referencable from within widget by this attribute's value
                '  <input type="input" class="dateWidgetInput" dojoAttachPoint="numberOfDateNode" selected="true">' +
                '</div>' +
                '</div>',

        constructor: function(args, srcNodeRef) {
            args = args || {} // assert, we must mixin minimum an empty object
            lang.mixin(this, args);
        },
        postCreate: function() {

                    // with most overrides, preferred way is to call super functionality first
                    this.inherited(arguments);

            // here we can manipulate the contents of our widget, 
            // template parser _has run from this point forward
            var input = this.numberOfDateNode;
            // say we want to perform something on the numberOfDateNode, do so

        },
        // say we want to use dojo.Stateful pattern such that a call like
        //   myDialogInstance.set("dateValue", 1234)
        // will automatically set the input.value, do as follows
        _setDateValueAttr: function(val) {
            // NB: USING dojoAttachPoint REFERENCE
            this.numberOfDateNode.value = val;
        },
        // and in turn we must set up the getter
        _getDateValueAttr: function() {
            // NB: USING dojoAttachPoint REFERENCE
            return this.numberOfDateNode.value;
        }

  });

}); 
```

# ios - UITableView 禁用单元格选择之间的突出显示

> ID：11056860
> 
> 赞同：4
> 
> 时间：2012-06-15T19:16:20.657
> 
> 标签：ios, uitableview

在启用选择的情况下使用`UITableView`时，我可以选择一行，并通过突出显示选中它。但是，当我选择第二行时，默认情况下会发生这种情况：

1.  第 1 行已被选中并明显突出显示。
2.  我将手指按在第 2 行。
3.  当我的手指仍然按下时，第 1 行和第 2 行都明显突出显示。
4.  现在松开我的手指会选择第 2 行，并且只有它明显突出显示。

我要做的是在上面的第 3 步中做到这一点，两个单元格不会同时突出显示。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-08T10:00:25.450

在此使用此委托，您可以取消选择单元格。

*   (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T07:32:54.950

按着这些次序

*   在情节提要中选择表格视图
*   在“选择”类型中选择“单选”而不是“多选”（在属性检查器中）

希望这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T07:02:50.863

这有效

```
- (BOOL)tableView:(UITableView *)tableView shouldHighlightRowAtIndexPath:(NSIndexPath *)indexPath{
[self.tableView.delegate tableView:tableView didSelectRowAtIndexPath:indexPath];
return NO; 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T21:10:32.400

好的，我根据讨论编辑了这个答案。

假设您正在继承 UITableViewCell，请在实现中使用此代码：

（例如，CustomTableCell.m）

```
#define MyTableCellHighlightedNotification @"MyTableCellHighlighted" 

- (id)initWithStyle:(UITableViewCellStyle)style 
    reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if(self){
        // Your custom initialization here

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(tableCellHighlighted:)
                                                     name:MyTableCellHighlightedNotification
                                                   object:nil];

    }
}

- (void) dealloc
{
    [[NSNotifcationCenter defaultCenter] removeObserver:self];

    // ...Release ivars...

    [super dealloc]
}

- (void) setHighlighted:(BOOL) highlighted
{
    // Default behaviour (defer to super)
    [super setHighlighted:highlighted];

    if(highlighted == YES){
        // De-highlight all other cells
        [[NSNotificationCenter defaultCenter] postNotificationName:MyTableCellHighlightedNotification
                                                            object:self]

    }
}

- (void)tableCellHighlighted:(NSNotification*) notification
{
    // All cells receive this notification

    if([notifcation object] != self){
        // All cells except the notification sender de-highlight themselves
        [self setHighlighted:NO];
    }
} 
```

# php - $_POST 始终为空，$_GET 工作正常

> ID：11056863
> 
> 赞同：0
> 
> 时间：2012-06-15T19:16:28.503
> 
> 标签：php, post

我有一个返回每个请求的请求参数的函数：

```
 private function GetRequestParams() {
    $method = $_SERVER['REQUEST_METHOD'];
    switch (strtolower($method)) {
        case 'put':
            $this->requestParams = //parse_str(HttpResponse::getRequestBody())
            $this->requestParams = array_map('urldecode', $this->requestParams);
            break;
        case 'post':
            $this->requestParams = $_REQUEST;
            break;
        case 'get':
            $this->requestParams = $_GET;
            break;
        case 'delete':
            $this->requestParams = $_REQUEST;
            break;
        default:
            $this->requestParams = $_REQUEST;
    }
} 
```

但是当我使用 GET 和 POST 调用相同的 url 时，$_POST 参数为空。我使用来自 XAMPP 工具的 WizTools RestClient 和 Apache Server 来调用以下 url： `http://localhost:80/project/?item=1`

对于 GET，请求参数正确包含“项目”，但对于 POST，请求参数为空。

似乎 post 方法被正确检测为以下函数，正确发送到 postDescription() 方法：

`$method = strtolower($_SERVER['REQUEST_METHOD']) . 'Description';`

我找到了将 php.ini post_max_size = 8* *M* * 编辑为 8* *MB* * 的信息，但这对我不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T19:18:11.467

`$_GET`填充有来自 URL 的查询字符串的数据。

`$_POST`填充了来自*发布*消息正文的数据。

如果您发出*post*请求，但在查询字符串中传递数据，则数据将出现在`$_GET`not中`$_POST`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:15:18.110

$_POST 由 HTML 表单填充。如果您有一个表单并使用 method="POST"，那么表单的结果将放在 POST 中。否则，如果您使用表单中的 method="get" 或使用查询字符串（例如，index.php?foo=bar&this=that），那么结果将在 $_GET 中。

但是，使用 $_REQUEST 通常是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:26:48.183

首先，您不应该像某些评论中提到的那样使用 $_REQUEST。

来自[http://php.net/manual/en/reserved.variables.request.php](http://php.net/manual/en/reserved.variables.request.php)

> ```
> Note: 
> The variables in $_REQUEST are provided to the script via the GET, POST,
> and COOKIE input mechanisms and therefore could be modified by the remote user
> and cannot be trusted.
> The presence and order of variables listed in this array is defined according
> to the PHP variables_order configuration directive. 
> ```

正如昆汀在他的回答中已经说过的那样，如果您发出 POST 请求，则必须在正文中提交 POST-Data

来自维基百科[http://en.wikipedia.org/wiki/POST_(HTTP](http://en.wikipedia.org/wiki/POST_(HTTP) )

> 姓名=Jonathan+Doe&年龄=23&公式=a+%2B+b+%3D%3D+13%25%21

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:21:25.593

我不太明白您为什么要从一开始就检查两者，而是`$_GET`检索在 URL 中发送的参数（这就是您拥有它的方式），而`$_POST`检索“发布”到服务器的数据……通常是通过表单某种。

你的最终目标是什么？

# grails - Grails 应用程序在 Websphere 6.1 上抛出 NPE

> ID：11056868
> 
> 赞同：2
> 
> 时间：2012-06-15T19:17:04.947
> 
> 标签：grails, grails-plugin, websphere-6.1

我已将我的 Grails 1.3.7 应用程序部署到 websphere 6.1.0.25。该应用程序抛出 NPE

```
ERROR webapp.WebApp  - [Servlet Error]-[Filter [DeclaredResourcesPluginFilter]: filter is unavailable.]: java.lang.NullPointerException 
```

它不显示图像。似乎它们是相关的，但不确定。

可能相关的事情：

1-这些是我正在使用的一些相关插件

```
 runtime ":resources:1.1.6"
    runtime ":zipped-resources:1.0"
    runtime ":cached-resources:1.0"
    compile ":cache-headers:1.1.5"
    compile ":lesscss-resources:1.3.0" 
```

2- 我已经根据[Grails 部署文档](http://grails.org/Deployment#Websphere%206.1)设置了 Websphere， 这意味着我已将“通用 JVM 参数”设置为“-Xverify:none”并且

com.ibm.ws.classloader.getInputStream.enableIOException 值：true 和

com.ibm.ws.webcontainer.invokeFiltersCompatibility 值：true

我感谢有关如何调试此问题的任何建议。

这里：是完整的堆栈跟踪：

```
[WebContainer : 0] ERROR webapp.WebApp  - [Servlet Error]-[Filter [DeclaredResourcesPluginFilter]: filter is unavailable.]: java.lang.NullPointerException
    at com.ibm.ws.webcontainer.srt.SRTServletResponse.setContentType(SRTServletResponse.java:1141)
    at sun.reflect.GeneratedMethodAccessor635.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:2395)
    at groovy.lang.ExpandoMetaClass.setProperty(ExpandoMetaClass.java:1129)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:3315)
    at org.codehaus.groovy.runtime.InvokerHelper.setProperty(InvokerHelper.java:183)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.setProperty(ScriptBytecodeAdapter.java:483)
    at org.grails.plugin.resource.ResourceProcessor.processModernResource(ResourceProcessor.groovy:293)
    at org.grails.plugin.resource.ResourceProcessor$processModernResource.call(Unknown Source)
    at org.grails.plugin.resource.ProcessingFilter.doFilter(ProcessingFilter.groovy:39)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:837)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:747)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:700)
    at com.ibm.ws.wswebcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:115)
    at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.invokeFilters(DefaultExtensionProcessor.java:849)
    at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:785)
    at com.ibm.ws.wswebcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:113)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3507)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:269)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:815)
    at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1466)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:122)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:267)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture$1.run(AsyncChannelFuture.java:205)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497) 
```

[我在这里](http://jira.grails.org/browse/GPRESOURCES-165)为资源插件添加了这个 JIRA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T03:18:38.810

这是 7.x 及以下版本的 WAS 环境的问题。

当 WAS ( ) 中未设置静态资源的 MIME 类型时，通常会出现此异常`default_host`，因此您看不到图像。如果您正在寻找视图中缺少的 .jpg 或 .png 图像，则必须在服务器中添加相应的 MIME 类型。`WAS Admin -> Environments -> Virtual Host -> default_host -> MIME Types`.

这个问题在 Websphere 7.x 中也一直存在。

# java - NetBeans 制作的 jar 文件不起作用

> ID：11056871
> 
> 赞同：2
> 
> 时间：2012-06-15T19:17:20.063
> 
> 标签：java, netbeans

所以我用 NetBeans 的 swing GUI 制作了这个（非常简单的）程序，然后我点击了 build 来制作一个 jar 文件。当我通过双击运行它时，它告诉我它找不到主类，经过检查，我确定它肯定在那里。但是，当我从命令提示符运行它时，它运行良好。这种奇怪行为的任何容易确定的原因（如果你想要源代码，我可以在这里发布）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T19:58:37.187

NetBeans 中似乎需要的东西是：

*   该项目必须是主项目（通过在项目列表中右键单击它）。
*   您必须在项目属性中设置主类。（右键，属性，运行，主类。）

然后，当您右键单击您的项目并执行“清理和构建”时，将在`dist`子目录中构建一个 jar。

如果这不能解决问题，这里有一个更长的故事......

当你双击一个 jar 文件来运行它时，操作系统就像你从命令行输入这个一样：

```
java -jar filename.jar 
```

（当您说它从命令行为您工作时，这是您正在输入的内容吗？）

此时，Java 可执行文件会在 jar 中查找名为`META-INF/MANIFEST.MF`. 然后在该文件的内容中，它会查找属性的值`Main-Class`. 最后它会在你的 jar 中查找该名称的类并运行它的静态`main(String[])`方法。

因此，如果您的 jar 无法运行，您可以执行以下操作来调试正在发生的事情：

*   在 NetBeans 中清理并重建您的项目。
*   仔细检查您的课程是否确实在 jar 中：
    *   启动命令提示符
    *   `cd`进入`dist`项目的子目录。
    *   使用类似的命令`jar tf filename.jar`列出其中的内容。
*   仔细检查`MANIFEST.MF`文件是否正确：
    *   再次在命令提示符下
    *   `cd`进入`dist`目录。
    *   使用类似的命令`jar xf filename.jar META-INF/MANIFEST.MF`来提取清单。
    *   查看该文件的内容（例如`type META-INF\MANIFEST.MF`）并确保`Main-Class`设置为适当的类。

如果上述所有检查均已完成，则双击该文件*应该可以*工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:18:16.107

您是否将包含项目设置为“主项目”？

# c - mktime 和 timelocal 的区别

> ID：11056873
> 
> 赞同：3
> 
> 时间：2012-06-15T19:17:24.837
> 
> 标签：c, linux, macos, timezone, mktime

这两个功能有什么区别？我的理解是那些应该是相同的：[http](http://www.gnu.org/software/libc/manual/html_node/Broken_002ddown-Time.html) ://www.gnu.org/software/libc/manual/html_node/Broken_002ddown-Time.html 。

我写了这段代码来测试转换（Qt部分仅用于比较）：

```
#include <QCoreApplication>
#include <QDateTime>

int main(int argc, char *argv[])
{
   QCoreApplication a(argc, argv);

   QDateTime datetime(QDate(2012, 3, 25), QTime(5, 15));
   qDebug("Timestamp: %lld.", datetime.toMSecsSinceEpoch()/1000L);

   time_t timestamp;
   tm* timeinfo = localtime(&timestamp);
   timeinfo->tm_hour = 5;
   timeinfo->tm_mday = 25;
   timeinfo->tm_min  = 15;
   timeinfo->tm_mon  = 2;
   timeinfo->tm_year = 112;
   timeinfo->tm_sec  = 0;
   qDebug("Timestamp: %ld.", timelocal(timeinfo));

   return 0;
} 
```

并发现输出是：

```
Timestamp: 1332645300.
Timestamp: 1332645300. 
```

这是我所期望的。然后我替换`timelocal`为`mktime`并发现这是输出：

```
Timestamp: 1332645300.
Timestamp: 1332648900. 
```

似乎增加了一个小时（考虑到我当前的时区是 GMT+2:00 并且我的语言环境设置为意大利）。为什么？两者有什么区别，为什么`mktime`要在我设置的日期上增加 1 小时？

**编辑**：我再次测试，似乎在 Mac OS X（和 iOS）`timelocal`上返回放置在`timeinfo`结构中的相同小时，而`mktime`实际上在返回`time_t`值和结构中都添加了一个小时`tm`。

相反，在 Linux Kubuntu 上，通过这两个函数，我发现`tm`结构和返回值都增加了一个小时。

谁能解释为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T22:08:34.330

OpenBSD 的人[`timelocal`](http://nixdoc.net/man-pages/OpenBSD/man3/timelocal.3.html)说：

> `**timelocal**`是一个不推荐使用的接口，相当于 `**mktime()**`使用负值调用`**tm_isdst**`

的负值`tm_isdst`表示`timelocal`不考虑夏令时 (DST)。似乎`QDateTime`DST也有问题。
[`mktime`](http://linux.die.net/man/3/mktime)另一方面，处理 DST，这可能解释了 OS X 上的 1 小时差异。

由于`timelocal`已弃用，它可能具有正确处理 DST 的更新实施。

# android - 通过 Eclipse 导出在 JAR 中包含选定的源文件

> ID：11056874
> 
> 赞同：2
> 
> 时间：2012-06-15T19:17:27.693
> 
> 标签：android, eclipse, jar

我正在构建一个 SDK，它将通过 JAR 无源分发。一切正常，但我在接口类中使用的描述性参数名称在此过程中丢失了。

我的界面：

```
package com.example;
public interface ExampleInterfaceClass {
    /**
     * Method documentation
     * @param descriptiveParameter a parameter name I want included for anyone implementing this interface from a JAR
     */
    public void DoSomething(int descriptiveParameter);
} 
```

当我使用可用源实现此接口时，“descriptiveParameter”会自动生成为“descriptiveParameter”：

```
public class ExampleImplementor implements ExampleInterfaceClass {
    @Override
    public void DoSomething(int descriptiveParameter) {
        // TODO Auto-generated method stub
    }
} 
```

但是，当我从已编译的 JAR 实现时，参数会自动生成为“arg0”：

```
public class ExampleImplementFromJAR implements ExampleInterfaceClass {
    @Override
    public void DoSomething(int arg0) {
        // TODO Auto-generated method stub
    }
} 
```

通过这样的问题提出了许多解决方案：[Preserving parameter/argument names in compiled java classes](https://stackoverflow.com/questions/939194/preserving-parameter-argument-names-in-compiled-java-classes)，但没有一个解决方案使我能够 1\. 在我的 JAR 中包含描述性参数，以及 2\. 从其他类中隐藏源. 有没有办法通过 eclipse 导出仅在 JAR 文件中包含来自我的接口文件的源代码？如果不是，那么使用源对象子集生成 JAR 的下一个最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:31:46.513

我的猜测是这是不可能的。

我猜的原因是 Android SDK 本身中有几个示例，其中自动填充方法获取名为 arg0、arg1、arg2 等的参数...

我想如果可以在官方 Android SDK 中构建组件时携带描述性参数名称，他们会这样做。

That being said, my theory is entirely based on my own observations while working with Android SDK / Eclipse, I have not read specifically anywhere that it is infact not possible.

# c# - 在 ASP.Net C# 代码中执行 SQL 语句的问题

> ID：11056876
> 
> 赞同：-1
> 
> 时间：2012-06-15T19:17:39.540
> 
> 标签：c#, asp.net, sql

双引号不起作用，因此在直接执行 SQL 语句时，您必须输入“某个值”才能实际进行变量比较。

**问题是现在当我从 ASP.NET 代码执行 SQL 语句时，我似乎没有得到任何读数**......我什至没有收到错误：S....

我已经尝试自己执行 SQL 语句，它确实有效。

```
public static string testExi(string localIncidentNum)
        {

            try
            {
                string query = "SELECT TOP 1 UniqueColID From DBNAME WHERE LocalIncidentNum = @localIncidentNum ORDER BY [version] DESC";

                DataTable dt = new DataTable();
                SqlConnection connection = new SqlConnection(connectionStr);

                SqlCommand command = new SqlCommand(query, connection);
                command.Parameters.AddWithValue("@localIncidentNum", localIncidentNum);

                connection.Open();
                SqlDataAdapter adp = new SqlDataAdapter(command);
                adp.Fill(dt);
                connection.Close();
                command.Dispose();
                connection.Dispose();

                if (dt.Rows.Count != 0)
                {
                    string UniqueColID = dt.Rows[0]["UniqueColID"].ToString();
                    return UniqueColID;
                }
                else
                {
                    return null;
                }

                string some = dt.Rows[0]["UniqueColID"].ToString();
                return some;
            }

            catch (Exception err)
            {
                Global.tmpmsg = " Updating follow up was not successful. " + err.ToString();
                return null;
            }

        } 
```

**如果我在 SELECT 语句中硬编码事件值，它可以工作，但如果我在 .addwithvalue 中硬编码事件值，它就不起作用。**

```
 command.Parameters.AddWithValue("@localIncidentNum", "12-023696"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T19:19:25.577

仔细检查你的 sql 语句：

```
SELECT TOP 1 UniqueColID From WHERE LocalIncidentNum = @localIncidentNum ORDER BY [version] DESC 
```

`From Where`?

**编辑** 为了遵守您的更改，最好在描述您的问题时始终尽可能准确。省略诸如 sql 语句的表名之类的内容非常具有误导性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:51:14.450

也许将数据类型添加到您的命令参数。我相信你没有得到任何东西，因为它可能会在命令上超时。

```
command.Parameters.AddWithValue("@localIncidentNum", localIncidentNum);
command.Parameters[0].SqlDbType = SqlDbType.VarChar; 
```

我在这里发现了一个类似的问题，也使用了 Varchar：

[没有 DBType 的 AddWithValue 导致查询运行缓慢](https://stackoverflow.com/questions/345323/addwithvalue-without-dbtype-causing-queries-to-run-slowly)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T13:03:51.277

我解决了。问题是我（出于某种原因）需要在从 C sharp 文件执行时将表的完整路径放在 sql 代码中的表名之前：

```
SELECT TOP 2 [DB name].[dbo]. [table name] 
```

# php - 如何根据查询中字段的相对位置对表中的列进行排序？

> ID：11056887
> 
> 赞同：1
> 
> 时间：2012-06-15T19:18:41.147
> 
> 标签：php, mysql, database, database-design

我有一个表，它以这种格式存储与帖子相关的数据

描述 wp_postmeta；

```
+------------+---------------------+------+-----+---------+----------------+
| Field      | Type                | Null | Key | Default | Extra          |
+------------+---------------------+------+-----+---------+----------------+
| meta_id    | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| post_id    | bigint(20) unsigned | NO   | MUL | 0       |                |
| meta_key   | varchar(255)        | YES  | MUL | NULL    |                |
| meta_value | longtext            | YES  |     | NULL    |                |
+------------+---------------------+------+-----+---------+----------------+
4 rows in set (0.00 sec) 
```

meta_key 有一个像`'author', 'excerpt', 'download'`. 元值有对应的值。

现在我正在编写一个基于 post_id 查询数据库的 php 脚本。所以我需要按指定的顺序显示上表中的所有元数据。查询是：

```
 $select_post_meta="select meta_value from wp_postmeta where post_id='".$postid."' and (meta_key='author' or meta_key='category' or meta_key = 'excerpt')";

$meta_paper = mysql_query($select_post_meta);

    while(($meta_values = mysql_fetch_array($meta_paper))
            {   echo "<i>'".$meta_values['meta_value']."'</i><br/>";  } 
```

如果元值以与我查询的顺序相同的顺序显示，但它们被定位为第一个描述、类别和作者，那就太好了。有没有其他方法可以查询数据库，以便我可以按第一作者、类别、描述的顺序获取值。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:31:49.363

添加

```
ORDER BY meta_key 
```

到您的查询文本。像这样：

```
$select_post_meta="select meta_value from wp_postmeta where post_id='".$postid."'
and (meta_key='author' or meta_key='category' or meta_key = 'excerpt')
ORDER BY meta_key"; 
```

* * *

我强烈建议您通过避免在 SQL 文本中包含“不安全”字符串来阻止 SQL 注入，例如

```
$select_post_meta = sprintf("select meta_value from wp_postmeta 
where post_id='%s'
and (meta_key='author' or meta_key='category' or meta_key = 'excerpt')
ORDER BY meta_key", mysql_real_escape_string($postid)); 
```

* * *

碰巧您按字母顺序列出了搜索词，这使得 ORDER BY 表达式非常简单。

如果您以其他顺序需要它们，则可以使用不同的表达式。

```
ORDER BY CASE meta_key WHEN 'Author' THEN 1 WHEN 'Category' THEN 2 WHEN 'Excerpt' THEN 3 END 
```

我们还注意到，您的查询可能会为每个键返回任意数量的值（假设我们没有看到 (post_id, meta_key) 的唯一约束。

查询可能会返回零、一个或多个 Author、Category 和 Excerpt 值，而您无法知道哪个是哪个。

我的倾向是将 meta_key 也包含在结果集中。然后我的代码将能够判断一个特定的特定`meta_value`于一个特定的`meta_key`.

# jquery - Checkbox 失去选中状态，并使用 Telerik RadDataPager 单击事件

> ID：11056893
> 
> 赞同：0
> 
> 时间：2012-06-15T19:19:36.100
> 
> 标签：jquery, telerik, jquery-click-event, raddatapager, radlistview

我有一个使用 Telerik RadListView 控件和 Telerik RadDataPager 控件的页面。RadListView 控件包含每个项目的复选框。复选框已使用 jQuery 连接到单击事件（见下文）。

```
$(document).ready(function () {
       //Update the hidden variable with all fieldchoices to be added
        $('#FieldSet1').find("input[type='checkbox']").click(function () {
    //do something

}); 
```

});

但是，当我使用 RadDataPager 单击另一个页面时，复选框会丢失其 onclick 事件和选中状态。

有谁知道如何保持复选框连接到点击事件，以及如何保持复选框处于选中状态？

任何想法将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:26:02.867

一年前我在 RadControls 和几个月前的 Telerik MVC Grid 中遇到了同样的问题。我所做的是将每个检查的 id 存储在全局 javascript 变量中（使用 JSON），并且每次用户更改页面时，只需“重置”用户在事件处理程序上该页面上的任何内容。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:42:28.133

为了让您的活动保持联系，请尝试：

```
$('body').on('click',"#FieldSet1 input[type='checkbox']", function () {
    //do something

}); 
```

要存储您的状态，请查看使用[localstorage](https://github.com/marcuswestin/store.js)并支持序列化的 store.js

# android - 捕捉 toast 事件（从任何应用程序）并获取 toast 消息

> ID：11056900
> 
> 赞同：7
> 
> 时间：2012-06-15T19:19:48.323
> 
> 标签：android, android-4.0-ice-cream-sandwich, toast, accessibility-api

据我了解，这是可能的，从这里 [Detecting toast messages](https://stackoverflow.com/questions/10659734/detecting-toast-messages) 但是我无法使用链接中的代码片段捕获任何事件。

**MyAccessibilityService.java**

```
package com.test.toasts2;

import android.accessibilityservice.AccessibilityService;
import android.accessibilityservice.AccessibilityServiceInfo;
import android.app.Notification;
import android.os.Parcelable;
import android.view.accessibility.AccessibilityEvent;
import android.widget.Toast;

public class MyAccessibilityService extends AccessibilityService {

    @Override
    public void onAccessibilityEvent(AccessibilityEvent event) {
        System.out.println("event catched");
        Toast.makeText(this, "catched " + "!", Toast.LENGTH_SHORT).show();
        if(event.getEventType() != AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED)
            return; // event is not a notification

        String sourcePackageName = (String)event.getPackageName();

        Parcelable parcelable = event.getParcelableData();
        if(parcelable instanceof Notification){
            // Statusbar Notification
        }
        else{
            // something else, e.g. a Toast message
            String log = "Message: "+event.getText().get(0)+" [Source: "+sourcePackageName+"]";
            System.out.println(log);
            // write `log` to file...
        }
    }

                 @Override 
                 public void onInterrupt() {
                  // TODO Auto-generated method stub   
                 }

                 @Override
                 protected void onServiceConnected() {
                  // TODO Auto-generated method stub
                  super.onServiceConnected();
                  AccessibilityServiceInfo info = new AccessibilityServiceInfo();
                  info.feedbackType = AccessibilityServiceInfo.DEFAULT;
                  setServiceInfo(info);
                 }

} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test.toasts2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

  <application>
  <service android:name=".MyAccessibilityService"
      android:label="label">
    <intent-filter>
      <action android:name="android.accessibilityservice.AccessibilityService" />
    </intent-filter>

  </service>
</application>

</manifest> 
```

似乎此服务根本没有启动。我做错了什么？

**我这样做的原因：** 我正在从我的应用程序的股票启动器上安装许多快捷方式。我遇到的问题是这些快捷方式在一个单元格中一个接一个地放置（即使是 Sleep 500 也没有帮助）。所以我正在寻找一种方法来一个一个地安装它们。但是如何知道快捷方式何时成功安装？我只发现 ics 启动器向用户显示的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:58:34.743

TYPE_NOTIFICATION_STATE_CHANGED generally refers to NotificationManager and icons placed in the status bar. Nonetheless, the below code should help shed some light as to the origin of a Toast message. On Android 4.0.4 ICS a Toast has a class of `android.widget.Toast` so `getClassName` should do the trick.

For what its worth, the change seems to have been made in Android 4.0.3 to add and use the following method in `Toast.TN`

```
private void trySendAccessibilityEvent() {
        AccessibilityManager accessibilityManager =
                AccessibilityManager.getInstance(mView.getContext());
        if (!accessibilityManager.isEnabled()) {
            return;
        }
        // treat toasts as notifications since they are used to
        // announce a transient piece of information to the user
        AccessibilityEvent event = AccessibilityEvent.obtain(
                AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED);
        event.setClassName(getClass().getName());
        event.setPackageName(mView.getContext().getPackageName());
        mView.dispatchPopulateAccessibilityEvent(event);
        accessibilityManager.sendAccessibilityEvent(event);
    } 
```

You can see the [`Toast`](http://grepcode.com/file/repo1.maven.org%24maven2@com.google.android%24android@1.5_r3@android%24widget%24Toast.java) class in all versions of Android [here](http://grepcode.com/file/repo1.maven.org%24maven2@com.google.android%24android@1.5_r3@android%24widget%24Toast.java).

```
private final String getEventType(AccessibilityEvent event) {
    switch (event.getEventType()) {
        case AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED:
            return "TYPE_NOTIFICATION_STATE_CHANGED";
        case AccessibilityEvent.TYPE_VIEW_CLICKED:
            return "TYPE_VIEW_CLICKED";
        case AccessibilityEvent.TYPE_VIEW_FOCUSED:
            return "TYPE_VIEW_FOCUSED";
        case AccessibilityEvent.TYPE_VIEW_LONG_CLICKED:
            return "TYPE_VIEW_LONG_CLICKED";
        case AccessibilityEvent.TYPE_VIEW_SELECTED:
            return "TYPE_VIEW_SELECTED";
        case AccessibilityEvent.TYPE_VIEW_SCROLLED:
            return "TYPE_VIEW_SCROLLED";
        case AccessibilityEvent.TYPE_VIEW_HOVER_EXIT:
            return "TYPE_VIEW_HOVER_EXIT";
        case AccessibilityEvent.TYPE_VIEW_HOVER_ENTER:
            return "TYPE_VIEW_HOVER_ENTER";
        case AccessibilityEvent.TYPE_TOUCH_EXPLORATION_GESTURE_START:
            return "TYPE_TOUCH_EXPLORATION_GESTURE_START";
        case AccessibilityEvent.TYPE_TOUCH_EXPLORATION_GESTURE_END:
            return "TYPE_TOUCH_EXPLORATION_GESTURE_END";
        case AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED:
            return "TYPE_WINDOW_STATE_CHANGED";
        case AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED:
            return "TYPE_WINDOW_CONTENT_CHANGED";
        case AccessibilityEvent.TYPE_VIEW_TEXT_SELECTION_CHANGED:
            return "TYPE_VIEW_TEXT_SELECTION_CHANGED";
        case AccessibilityEvent.TYPE_VIEW_TEXT_CHANGED:
            return "TYPE_VIEW_TEXT_CHANGED";
    }

    return "default";
}

private final String getEventText(AccessibilityEvent event) {
    StringBuilder sb = new StringBuilder();
    for (CharSequence s : event.getText()) {
        sb.append(s);
        sb.append('\n');
    }
    return sb.toString();
}

@Override
public void onAccessibilityEvent(AccessibilityEvent event)
{
    Log.v(TAG, String.format(
        "onAccessibilityEvent: [type] %s [class] %s [package] %s [time] 
        %s [fullscreen] %s [text] %s", getEventType(event), event.getClassName(),
        event.getPackageName(), event.getEventTime(), Boolean.toString(
        event.isFullScreen()), getEventText(event)));

    if (android.os.Build.VERSION.SDK_INT >= 14)
        Log.v(TAG, "Window ID: " + Integer.toString(event.getWindowId()) + ".");
}

private void setServiceInfo(int feedbackType)
{
    final AccessibilityServiceInfo info = new AccessibilityServiceInfo();
    // We are interested in all types of accessibility events.
    info.eventTypes = AccessibilityEvent.TYPES_ALL_MASK;
    // We want to provide specific type of feedback.
    info.feedbackType = feedbackType;
    // We want to receive events in a certain interval.
    // info.notificationTimeout = EVENT_NOTIFICATION_TIMEOUT_MILLIS;
    // We want to receive accessibility events only from certain packages.
    // info.packageNames = PACKAGE_NAMES;
    setServiceInfo(info);
}

private boolean isInfrastructureInitialized = false;

@Override
public void onServiceConnected()
{   
    if (isInfrastructureInitialized) return;

    // Claim the events with which to listen to.
    setServiceInfo(AccessibilityServiceInfo.FEEDBACK_ALL_MASK);

    // We are in an initialized state now.
    isInfrastructureInitialized = true;
} 
```

Source: *personal experience*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:19:56.320

首先，您不应该尝试捕捉 Toast，因为这是一个异步调用，它会在屏幕上显示一个 Toast，并且它会根据时间停留在屏幕上，可以离开应用程序并仍然拥有吐司出现。你不应该关心吐司什么时候完成，因为这无关紧要。所有的 Toast 都应该用于为用户提供有关正在进行/完成的特定过程的信息或只是信息**。**它不适合您尝试做的事情。

为什么不直接将内部广播发送到您的应用程序并通过意图过滤器捕获它，然后在接收到该广播时，您应该启动服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:24:34.127

创建一个 Activity 来构建一个意图并使用它来启动你的服务。

像这样的东西将是活动中的代码。

```
Intent i = new Intent(YourActivity.this, MyAccessibilityService.class);
startService(i); 
```

在您的清单中，使活动的意图过滤器在其中包含 MAIN 和 LAUNCHER，以便当用户（或 adb）启动您的应用程序时运行的活动。然后该活动将为您启动服务。

**编辑：**我假设您从链接的帖子中看到了此注释。你不是在 2.2 上尝试这个吗？

> 注意：这对我在 Android 2.2 上不起作用（它似乎没有赶上 Toasts），但它在 Android 4.0 上工作。

# html - 如何将“a href”链接添加到“div”？

> ID：11056901
> 
> 赞同：19
> 
> 时间：2012-06-15T19:19:50.147
> 
> 标签：html, href, add

我需要知道如何向 div 添加一个 href 链接？您是否将 a href 标记放在整个“buttonOne”div 周围？还是应该在“linkedinB”div 周围或内部？

这是我的 HTML：

```
<div id="buttonOne">
  <div id="linkedinB">
    <img src="img/linkedinB.png" width="40" height="40">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T19:28:40.807

你不能用一个标签来包围它吗？

```
 <a href="#"><div id="buttonOne">
        <div id="linkedinB">
            <img src="img/linkedinB.png" width="40" height="40">
        </div>
  </div></a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-21T15:49:14.957

尝试用javascript实现这个：

```
<div id="mydiv" onclick="myhref('http://web.com');" >some stuff </div>
<script type="text/javascript">
    function myhref(web){
      window.location.href = web;}
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T19:21:46.030

在这种情况下，这并不重要，因为两个`div`s 之间没有内容。

任何一个都会让浏览器向下滚动到它。

该`a`元素将如下所示：

```
<a href="mypageName.html#buttonOne">buttonOne</a> 
```

或者：

```
<a href="mypageName.html#linkedinB">linkedinB</a> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-20T09:35:42.920

尝试创建一个名为的类并将`overlay`以下 css 应用于它：

```
a.overlay { width: 100%; height:100%; position: absolute; } 
```

确保它被放置在定位元素中。

现在只需`<a>`在要链接的 div 内放置一个带有该类的标签：

```
<div id="buttonOne">
  <a class="overlay" href="......."></a>
    <div id="linkedinB">
       <img src="img/linkedinB.png" alt="never forget the alt tag" width="40" height="40"/>
    </div>
 </div> 
```

PhilipK 的建议可能有效，但无法验证，因为您不能将块元素 ( `div`) 放置在内联元素 ( `a`) 中。当您的网站未通过验证时，W3C Ninja 就会来找您！

另一个建议是尝试避免内联样式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T19:28:33.903

我会说：

```
 <a href="#"id="buttonOne">
            <div id="linkedinB">
                <img src="img/linkedinB.png" width="40" height="40">
            </div>
      </div> 
```

但是，它仍然是一个链接。如果要将链接更改为按钮，则应将#buttonone 重命名为#buttonone a { your css here }。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-23T05:42:49.580

您的解决方案似乎对我不起作用，我有以下代码。如何将链接放入最后两个 div。

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">

<style>
/* Import */
@import url(https://fonts.googleapis.com/css?family=Quicksand:300,400);
* {
  font-family: "Quicksand", sans-serif; 
  font-weight: bold; 
  text-align: center;  
  text-transform: uppercase; 
  -webkit-transition: all 0.25s ease; 
  -moz-transition: all 0.25s ease; 
  -ms-transition: all 0.25s ease; 
  -o-transition: all 0.025s ease; 
}

/* Colors */

#ora {
  background-color: #e67e22; 
}

#red {
  background-color: #e74c3c; 
}

#orab {
  background-color: white; 
  border: 5px solid #e67e22; 
}

#redb {
  background-color: white; 
  border: 5px solid #e74c3c; 
}
/* End of Colors */

.B {
  width: 240px; 
  height: 55px; 
  margin: auto; 
  line-height: 45px; 
  display: inline-block; 
  box-sizing: border-box; 
  -webkit-box-sizing: border-box; 
  -moz-box-sizing: border-box; 
  -ms-box-sizing: border-box; 
  -o-box-sizing: border-box; 
} 

#orab:hover {
  background-color: #e67e22; 
}

#redb:hover {
  background-color: #e74c3c; 
}
#whib:hover {
  background-color: #ecf0f1; 
}

/* End of Border

.invert:hover {
  -webkit-filter: invert(1);
  -moz-filter: invert(1);
  -ms-filter: invert(1);
  -o-filter: invert(1);
}
</style>
<h1>Flat and Modern Buttons</h1>
<h2>Border Stylin'</h2> 

<div class="B bo" id="orab">See the movies list</div></a>
<div class="B bo" id="redb">Avail a free rental day</div>

</html> 
```

# css - 使用 CSS 覆盖 DIV 中的字体大小

> ID：11056902
> 
> 赞同：8
> 
> 时间：2012-06-15T19:20:02.340
> 
> 标签：css, html, overriding, font-size

在 DIV 中，我放置了一些从数据库加载的文本/html 代码。此文本有时包含字体大小定义（例如：font size="3"）。有没有办法使用 CSS 在这个特定的 DIV 中覆盖这个字体大小。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T19:25:00.007

假设标记类似于以下内容：

```
<div>
    <font size="1">Some text at 'size="1"'</font> and natively-sized text, with more at <font size="26">'size="26".'</font>
</div>​ 
```

然后你可以显式地指示 CSS`inherit`来自`font-size`父元素：

```
div {
    font-size: 1.5em;
}
div font {
    font-size: inherit;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MTLtq/)。

请注意，当然，这`font`是不推荐使用的，因此不应使用（因为对元素的支持可能会在没有通知的情况下停止，和/或实现会在没有警告的情况下更改）。

顺便说一句，虽然`!important`将强制声明覆盖通常的级联样式，但它需要大锤才能破解；并且，如果可以避免（在这种情况下，似乎*可以避免*）它应该是，因为它使以后的样式调试和相关的继承问题变得复杂。

此外，这是治疗您的问题的症状；您真正面临的问题是`font`您的内容/数据库中存在标签。这应该通过删除元素并用适当样式的元素替换它们来纠正，例如`em`，`span`等等......

参考：

*   [`font`元素，在 W3.org](http://www.w3.org/TR/html4/present/graphics.html#edef-FONT)。
*   [`font`MDN 中的元素](https://developer.mozilla.org/en/HTML/Element/font)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T19:27:50.960

使用[CSS !important](http://www.w3.org/TR/CSS21/cascade.html#important-rules)表示法，您告诉浏览器覆盖您定义的任何字体大小`div`：

**从上面的链接中可以看到：**

> 但是，为了平衡，“！important”声明（定界符“！”和关键字“important”跟随声明）优先于普通声明。

**例子**

请参阅此[工作小提琴](http://jsfiddle.net/zuul/4kJY2/)示例！

```
.htmlContents * {font-size:10px!important;}

<div class="htmlContents">my database html content</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:22:50.880

一个想法：给这些文本标签一个 id 或 class，然后使用 JavaScript 查找这些元素并更改它们的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:30:47.593

在插入 div 之前从文本中剥离“字体”标签怎么样？然后只需使用字体大小设置 div 的样式。

# java - Java socket客户端连接和断开问题

> ID：11056913
> 
> 赞同：0
> 
> 时间：2012-06-15T19:21:10.210
> 
> 标签：java, client, serversocket

我做了这个脚本：

```
public class Server {
    ServerSocket serv = null;
    ObjectInputStream in = null;
    ObjectOutputStream out = null;
    Socket conn = null;

    public Server() { 
        setLogger(getClass());
        setupSocketServer();
        listen();
    }

    public void listen() {
        try {
            while (true) {
                conn = serv.accept();
                getLogger().log(new LogRecord(Level.INFO, "Connection established from: " + conn.getInetAddress().getHostAddress()));
                out = new ObjectOutputStream(conn.getOutputStream());
                in = new ObjectInputStream(conn.getInputStream());
            }
        }
        catch (IOException ex) {
            getLogger().log(new LogRecord(Level.SEVERE, "Connection dropped from: " + conn.getInetAddress().getHostAddress()));
        } 
    }

    public void setupSocketServer() {
        try {
            serv = new ServerSocket(Config.PORT_NUMBER, Config.MAX_CONNECTIONS);
            getLogger().log(new LogRecord(Level.INFO, "Starting Server on: " + serv.getInetAddress().getHostAddress() + ":" + serv.getLocalPort()));
        }
        catch (IOException e) {
            getLogger().log(new LogRecord(Level.SEVERE, "Socket can not connect to host address"));
            System.exit(0);
        }
    }

    public static void main(String[] args) {
        new Server();
    }

} 
```

但是每当我打开我的客户端连接，然后再次关闭它并尝试重新打开时，服务器已经关闭了。我希望能够保持无限连接，允许多人连接。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:48:34.317

为您的服务器尝试此代码，它由多个客户端组成，服务器将始终保持监听。

```
public class ServerTest {

    ServerSocket s;

    public void go() {

        try {
            s = new ServerSocket(44457);

            while (true) {

                Socket incoming = s.accept();
                Thread t = new Thread(new MyCon(incoming));
                t.start();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    class MyCon implements Runnable {

        Socket incoming;

        public MyCon(Socket incoming) {

            this.incoming = incoming;
        }

        @Override
        public void run() {

            try {
                PrintWriter pw = new PrintWriter(incoming.getOutputStream(),
                        true);
                InputStreamReader isr = new InputStreamReader(
                        incoming.getInputStream());
                BufferedReader br = new BufferedReader(isr);
                String inp = null;

                boolean isDone = true;

                System.out.println("TYPE : BYE");
                System.out.println();
                while (isDone && ((inp = br.readLine()) != null)) {

                    System.out.println(inp);
                    if (inp.trim().equals("BYE")) {
                        System.out
                                .println("THANKS FOR CONNECTING...Bye for now");
                        isDone = false;
                        s.close();
                    }

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                try {
                    s.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new ServerTest().go();

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:24:38.973

将 try/catch 块移动到“while”循环中。并不是说它会成为一个好的服务器，位应该在客户端断开连接后仍然存在。

# python - python：装饰器名称应该是动作还是描述？

> ID：11056917
> 
> 赞同：7
> 
> 时间：2012-06-15T19:21:20.387
> 
> 标签：python, coding-style, decorator

假设我有一个装饰器，它会导致函数打印出任何异常并在发生异常时返回 None，而不是失败。假设这是一个好主意，那么首选的命名风格是什么？

一种）

```
@ignore_exceptions
def foobar(a, b, c):
    raise ValueError("This function always fails...") 
```

b)

```
@ignores_exceptions
def foobar(a, b, c):
    raise ValueError("This function always fails...") 
```

也就是说：它应该`a)`是一个命令（装饰器*告诉*函数做一些不同的事情）还是`b)`描述（装饰器让程序员知道函数的属性）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T19:26:33.097

我认为活动版本 ( `ignore_exceptions`) 比描述版本 ( `ignores_exceptions`) 更常用，至少在我熟悉的 Python 代码库中是这样。

PEP 8 指南确实有一个关于[命名约定](http://www.python.org/dev/peps/pep-0008/#naming-conventions)的部分，但在这种情况下并没有提供太多帮助。无论如何，代码库的一致性是最重要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:27:36.237

我想说`ignore_exceptions`这里更好，只是基于我在[PythonDecoratorLibrary](http://wiki.python.org/moin/PythonDecoratorLibrary)页面中看到的内容。

那里使用的一些示例装饰器名称是`countcalls`and `dump_args`，与`ignore_exceptions`than更一致`ignores_exceptions`。

一致性确实是选择一个而不是另一个的唯一原因，因为两者都清楚地说明了正在发生的事情。

# java - 在 Java 中使用 for 循环打印嵌套方块

> ID：11056918
> 
> 赞同：3
> 
> 时间：2012-06-15T19:21:20.920
> 
> 标签：java, for-loop

![需要打印的星星图案](../Images/a0953e3d75f08e15050e6daf7fb8847c.png) 问题是创建同心和嵌套的正方形，从给定为 N 的最大正方形的边开始。就像在纸上画一个正方形到另一个正方形一样，通过将边的长度减 4，直到无法再绘制正方形在每个正方形之后（边的 startPos 有 2 个，endPos 有 2 个）；N 是开始的正方形的大小。您必须使用乘法符号（'*'）来绘制边。

上图的比例（看起来更像矩形而不是正方形）可能不准确，但它会让你知道需要做什么......下面的代码是我尝试过的......![这是需要打印的确切图案..](../Images/6bb65e488683ff4607827b05e1da038b.png)

```
public static void main(String[] args)
{
    int N=9;
    int iLo=0;
    int iHi=N-1;
    int jLo=0;
    int jHi=N-1;

    for(int i=0;i<N;i++)
    {
        for(int j=0;j<N;j++)
        {
            if(i==0 || (i==N-1) || (j==0) || (j==N-1))
                System.out.print('*');
            else
            {
                if(i<=N/2)
                {
                    if((i%2==0) && (i>=iLo) && (i<=iHi) && (j>=jLo) && (j<=jHi))
                        System.out.print('*');
                    else
                        if(i==iLo || i==iHi )
                            System.out.print('*');
                        else
                            System.out.print(' ');  
                }
                else
                {
                    if((i%2==0) && (i>=iLo) && (i<=iHi) && (j>=jLo) && (j<=jHi))
                            System.out.print('*');
                        else
                            System.out.print(' ');  
                }

            }

        }
        System.out.print("  i-->"+i+"   iLo-->"+iLo+" iHi-->"+iHi+" jLo-->"+jLo+" jHi-->"+jHi);
        if(i%2>0)
        {
            if(i<=N/2)
            {
                jLo=jLo+2;
                jHi=jHi-2;
                iLo=iLo+1;
                iHi=iHi-1;
            }
            else
            {
                jLo=jLo-2;
                jHi=jHi+2;
                iLo=iLo-1;
                iHi=iHi+1;
            }
        }
        else
        {

        }

        System.out.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:28:40.863

这可以通过使用每次递减 2 的 for 循环 (i -= 2) 或递归地在基本情况下将单个 * 打印到屏幕上来解决，或者根本不打印。正如其他人所发布的那样，除非每个正方形之间有一些空间，否则您将只有一个实心正方形。

编辑：看来您可能不是在另一个正方形上打印一个正方形，而是代替另一个正方形。然而，同样的策略也适用。

EDIT2：您不需要使用带有 i 和 j 的嵌套 for 循环。每个边的长度作为变量 i 的单个 for 循环就足够了。但是，您将需要调整顶点的重复计数。

为什么不尝试类似的东西：

```
// Assumes a cartesian coordinate system, origin at bottom left.
int startingX = 0;
int startingY = 0;
while( length > 0 ){
  printHorizontally(length, startingX, startingY);
  printVertically(length, startingX, startingY);
  startingX += 2;
  startingY += 2;
  length -= 4; 
}

private void printHorizontally(int length, int startingX, int startingY){
  // Prints length *s to the screen in a horizontal line starting at the
  // given points.  Define printVertically similarly.    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:47:53.080

以下代码提供了最简单的递归解决方案——

公共类 SquaresInSquare {

```
private static char[][] arr;

public static void populate(int start,int N)
{
    //System.out.println(start+" "+N);
    if(N < 0 || start > N)
        return;

    for (int i = start; i < N; i++)
    {
        for (int j = start; j < N; j++)
        {
            if(i==start || i==N-1 || j==start || j==N-1)
                arr[i][j]='*';
            else
                arr[i][j]=' ';
        }
    }

    populate(start+2,N-2);
}

public static void print()
{
    for (int i = 0; i < arr.length; i++)
    {
        for (int j = 0; j < arr.length; j++)
        {
            System.out.print(arr[i][j]);
        }
        System.out.println();
    }
}

/**
 * @Method :main is Personal Method Of Class-->SquaresInSquare
 * @returns : void
 * @param args
 */
public static void main(String[] args)
{
    int N=21;
    arr=new char[N][N];
    populate(0,N);
    print();

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T21:47:32.170

**概述**

这个问题适合 Adob​​e，因为它本质上是一种渲染算法：给定一个像素和一组规则，计算该像素的外观。

最有效的方法是提出一个测试，回答“给定大小为 n 的正方形中的位置 (x,y)，是否应该用 标记`*`？”，然后针对每个位置回答该问题。

我们可以通过首先进行一些观察来回答这个问题。

*   注意该算法输出的对称性。如果我们沿着它的诊断线切割正方形，我们就剩下四个三角形象限。在每个象限内，请注意三角形是简单的条纹。
*   垂直或水平条纹易于绘制；只需检查行/列是否与最近的边缘距离均匀，如果是，则对其进行遮蔽。

所以我们将对每个位置进行两次计算：（1）这个位置在哪个象限中，（2）给定这个象限，这个位置的行/列应该加阴影吗？

**示例实现（python）**

```
def getQuadrant(i,j,n):
    # 1 means top quadrant; 2 right; 3 bottom; 4 left
    half_n = float(n-1)/2
    x = float(i) - half_n
    y = float(j) - half_n
    if x > 0:
        if y > 0:
            if x > y:
                return 3
            else:
                return 2
        else:
            if x > -1*y:
                return 3
            else:
                return 4
    else:
        if y > 0:
            if -1*x > y:
                return 1
            else:
                return 2
        else:
            if x < y:
                return 1
            else:
                return 4

def isPixelShaded(x,y,n):
    q = getQuadrant(x,y,n)
    if q == 1:
        return (x % 2) == 0
    elif q == 2:
        return ((n-y-1) % 2) == 0
    elif q == 3:
        return ((n-x-1) % 2) == 0
    else:
        return (y % 2) == 0

def getPixelShade(x,y,n):
    if isPixelShaded(x,y,n):
        return ' * '
    else: 
        return '   '

def printSquare(n):
    for i in range(n):
        print ''.join(map(lambda x: str(getPixelShade(i,x,n)),range(n)))

printSquare(3)
printSquare(6)
printSquare(9) 
```

**输出**

```
 *  *  * 
 *     * 
 *  *  * 
 *  *  *  *  *  * 
 *              * 
 *     *  *     * 
 *     *  *     * 
 *              * 
 *  *  *  *  *  * 
 *  *  *  *  *  *  *  *  * 
 *                       * 
 *     *  *  *  *  *     * 
 *     *           *     * 
 *     *     *     *     * 
 *     *           *     * 
 *     *  *  *  *  *     * 
 *                       * 
 *  *  *  *  *  *  *  *  * 
```

**其他想法**

除了这里采用的渲染方法，我们还可以通过在预分配矩阵中“走出正方形”a 来采用迭代方法。这种方法更容易考虑，但需要更多内存。此外，这个答案中描述的方法的好处是确定给定位置的阴影是阴影，我们不需要知道它的相邻位置（迭代方法会这样做）。这意味着我们可以一次渲染最终渲染的小样本。换句话说，这种方法支持并行性，这总是一个不错的好处。

# mongodb - Mongoose：在模式中定义 select: false 后选择查询中的所有字段（在设计时不知道它们）

> ID：11056920
> 
> 赞同：3
> 
> 时间：2012-06-15T19:21:40.913
> 
> 标签：mongodb, mongoose

我正在使用 Mongoosejs 连接 MongoDB。

考虑以下设计的模式示例：

```
var factSchema= new Schema({
    facts:  { type:[require('./fact')], select:false}
   ,roles: {type: [String], required: true, index: {unique: false}}
   ,c: {type:  {}, default: {}}  //all calculated stuff based on facts
} 
```

其中明确指出，在正常查询“factSchema”时，不会查询实际的“事实”。只有在明确选择“事实”之后，我才能确保包含这些内容。IE：

```
 //factModel is a model derived from factSchema
 factModel.findOne({_id:input.id})
    .select(["facts","roles","c"]).exec(function(err,result){//do something}); 
```

这适用于这种微不足道的情况。但是我已经将 factSchema 子类化（有关如何的信息：[https](https://groups.google.com/forum/?fromgroups#!searchin/mongoose-orm/INHERIT/mongoose-orm/aeqGRRnpFvg/lbfIA54hiwYJ) ://groups.google.com/forum/?fromgroups#!searchin/mongoose-orm/INHERIT/mongoose-orm/aeqGRRnpFvg/lbfIA54hiwYJ ）并且我想查询所有字段一个特定的子类，但它只在运行时知道我正在查询哪个子类。换句话说，我无法明确指定要返回的字段。

我该怎么办？

一个可能的解决方案似乎是（？）我可以通过执行`subclassedSchema.paths`where `subclassedSchema`is a subclass of 来访问模式的所有已定义字段`factSchema`。

这行得通，但我可以相信这在未来的版本中是稳定的吗？有什么更好的、不那么骇人听闻的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T20:23:45.493

2.x 分支中没有更好的方法。Schema.paths 在 3.x 中也没有改变，因此在可预见的将来这样做是安全的。

3.x 具有新的`select`语法，允许简单地调用`factModel.findOne(..).select('+facts').exec(callback)`以实现所需的结果。

# javascript - 具有用户输入的递归函数

> ID：11056926
> 
> 赞同：1
> 
> 时间：2012-06-15T19:22:03.797
> 
> 标签：javascript, recursion

我正在编写一个愚蠢的小脚本来帮助我为我收藏的电影分配评级。我有一系列需要排序的电影标题。我想应用一种类似合并排序的递归算法来按评级对电影进行排序。在每次比较时，我都希望更新文档上的表单。用户将选择 A 或 B - 两个标题中较好的一个 - 然后单击“继续”按钮。它将使用此信息进行排序。在该过程结束时，用户将回答 A 或 B 到生成电影有序列表所需的最小二进制比较问题数。

我的问题：如何让递归算法等待每个步骤的表单输入？使用类似的东西`confirm()`会允许代码在确定输入时阻塞，但显然页面元素不能这样做。我应该涉及一些讨厌的超时功能吗？保持某种全球封闭？理想情况下，我希望将“继续”按钮链接到 continueRecursion() 回调，但我不知道该怎么做。

关于如何攻击这个有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:30:42.850

只需在函数调用之间存储结果，并让用户成为启动例程的人。

所以：

1.  获取数据
2.  现在的选择
3.  根据用户的选择，给出当前选择+旧数据进行排序程序。
4.  将当前数据排序到步骤 1 并再次继续。

您只需要将数据保存在全局中或继续传递它。

# javascript - Ajax 请求是否保证按发送顺序返回？

> ID：11056931
> 
> 赞同：1
> 
> 时间：2012-06-15T19:22:54.750
> 
> 标签：javascript, ajax, asynchronous, tcp, protocols

[这个问题](https://stackoverflow.com/questions/4371277/maintain-order-of-requests-when-making-several-ajax-callbacks)似乎表明 Ajax 请求不能保证按其发送顺序返回。但是，Ajax 使用[TCP 协议](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)，这似乎可以保证数据包将按发送顺序返回：

> 有序数据传输——目标主机根据序列号重新排列

异步 Ajax 请求是否保证按照它们发送的顺序返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:24:18.997

不。

这与 TCP 无关。这是因为请求必须由 HTTP 服务器处理，并且不能保证并行请求将花费相同的时间来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:24:32.493

> 异步 Ajax 请求是否保证按照它们发送的顺序返回？

没有。如果服务器响应第一个请求需要 3 倍的时间怎么办？例子：

*   时间 0：请求 A 发送
*   时间 1：请求 B 发送
*   时间 2：服务器处理请求 A 和 B
*   时间3：服务器处理请求A，向客户端发送响应B
*   时间4：服务器处理请求A
*   时间 5：服务器向客户端发送响应 A

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:26:04.063

我相信你在这里混淆了两个上下文，如果你在“同一”时间触发两个请求，那么在 ajax 中，一个不能保证在另一个之前返回。这与 TCP 无关，它位于 OSI 模型的不同层。TCP 数据包构成流量，并且“重新排序和重新排列”对 http 协议（ajax 是其中的一部分）完全不可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:27:33.377

术语“异步”回答了您自己的问题。但是，在某些情况下，异步请求可能会有效地变为同步。有关更多信息，请参阅[他的答案](https://stackoverflow.com/questions/7323412/processing-large-data-sets-via-ajax-brings-no-speed-benefits/7323490#7323490)。

当您发送请求时，服务器将开始处理该请求。如果接下来有另一个请求，服务器将开始处理它（如果可以的话），依此类推。随着每个请求完成（有或没有输出），您的回调将被触发（如果存在）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T19:28:56.823

与单个 TCP 请求有关的所有数据包都保证按顺序接收。这种排序虽然只适用于单个请求。可以将多个请求发送到不同的主机，并且通常无法保证您从与之交互的主机接收响应的顺序。因此，在发送异步请求时，您实际上是在并行发送多个请求，并且无法保证响应请求的顺序，因为每个请求都独立于所有其他请求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T19:30:40.100

```
Ordered data transfer — the destination host rearranges according to sequence number 
```

You are right... but taking it out of context. AJAX requests are over HTTP, which is in turn over TCP.

Each AJAX request is a different HTTP request, which is in turn over a different TCP connection, therefore they are not rearranged and ordered in the way you think they are.

Since each AJAX HTTP request may take a variable amount of time to be handled, and they are being handled concurrently, there is no guarantee about the order in which they finish.

# class - 深层类继承层次结构——坏主意？

> ID：11056943
> 
> 赞同：9
> 
> 时间：2012-06-15T19:23:55.420
> 
> 标签：class, inheritance, associations, simulation

希望高手能解惑。非常高的概述是我不是编码的初学者，但对 OOP 还是新手。这组消息类是我们正在编写的一个大型模拟应用程序的核心，我不想愚蠢地这样做——这个接口将应用程序切成两半，从定序器到执行器，反之亦然。

我的问题是拥有这么深的继承层次结构是否是一个坏主意（图像尚未充实，最终可能会达到 5 或 6 深）。这与让某些子类与其父类直接关联而不是继承相反。

我读过深继承层次结构不是一个好主意，如果子类继承只是为了拥有父级的数据，那么您应该简单地将父级作为数据包含在子级中，但我很难时间围绕为什么。如果我决定将继承层次结构设为 7 深或类似的东西，将会发生什么坏事？显然，性能受到了一点影响，并且在层次结构的顶部进行更改会在整个应用程序中产生巨大的影响，但除此之外我没有看到任何问题。除此之外，我不太关心性能上的细微差别。

![类层次结构](../Images/dda28e9a66a89ece1228f8e2fc9b0536.png)

（额外的问题：是否有现成的包可以处理这类东西？我们处理了大部分低级物理模拟，但我们将不得不编写排序程序。我只是怀疑我所列出的内容与我之前大约 10,000 名模拟开发人员所做的非常相似。）

（奖励问题 #2：任何同时掌握模拟系统和 OOP 编程的大师，都不会讨厌住在洛杉矶？我们正在招聘。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T19:37:15.607

> 如果一个子类只是为了拥有父类的数据而继承

这是一个坏主意。有这样的理解，您将基类定义为一组（具体）类将遵守的最通用的合同。这通常意味着您的合同是关于*行为*而不是实施的。

> 如果我决定将继承层次结构设为 7 深或类似的东西，将会发生什么坏事？

这里的主要问题是平凡的：

*   脆弱的基类（对基类的更改对于派生类来说是一场噩梦）
*   耦合增加（基类过多会导致紧耦合）
*   封装减弱
*   测试问题（由于这里和那里的多个链接调用，不能仅仅测试叶级覆盖方法以始终正确地重现最终用户行为）
*   维护（来自强耦合）

（你们很多人都想仔细阅读这篇关于[为什么 Ada 不受欢迎的](http://www.adapower.com/adapower1/articles/popularity.html)论文，特别是第 6 条第 6 段。）

> 是否有现成的包可以处理这种东西？

我不确定您在寻找什么，但如果您正在寻找自动层次结构简化器，那么我不知道。此外，如果存在这样的包，它将高度依赖于您选择的语言，而您还没有提及。

请注意，大多数情况下，此类问题可以通过查看聚合或特征或依赖注入等替代方案来解决。这些是设计时问题，通常（IMO）最好在白板上解决，而不是使用编译器和数百万个 LOC。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-21T04:20:45.830

很晚才看到这个问题，但是我对此有很多想法，并且被深深的继承层次所咬。它们不好的一个原因是，当您专门处理许多子类时，您将不可避免地弄错分类。但是，一旦有了类结构，就很难更改，因为这样做会破坏客户端代码。

[我在这里](http://blogs.mathworks.com/developer/2015/03/31/dont-get-in-too-deep/)写了一篇博客。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-04T09:19:51.560

老问题，但软件开发中的活跃问题，想添加一个可能有帮助的意见。

当您使用 DI 接触基类时，无法估计维护开销。这是最近影响我们的 3 级深度继承结构的一个主要缺点。此外，如果您的基础是一个模板，例如，如果您有太多的孩子，而在 3 个级别中只有 1 个派生父级，则预计会违反 SOL(I)(D)。

通常，只是为了访问数据，如果不违反 SOLID，我会选择适当的设计模式或传递数据指针。根据您是阅读还是写作，我也会避免使用 getter 和 setter 来避免[Quasi-Classes](http://www.idinews.com/quasiClass.pdf)。默认子级受到“保护”的情况很少见，我认为这种情况下的结构可能存在设计缺陷。

# javascript - 调整通知 Chrome 的大小

> ID：11056945
> 
> 赞同：0
> 
> 时间：2012-06-15T19:24:08.307
> 
> 标签：javascript, google-chrome-extension, notifications, resize

我可以以编程方式将通知的大小调整为指定的大小吗？我的代码js：

```
 var notification = window.webkitNotifications.createHTMLNotification('http://mypage');
 notification.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:29:49.927

不，高度会调整以适应内容（不确定上限），但宽度是固定的。

# java - 使用指定的 Class-Path 将 WAR 文件部署到 iPlanet

> ID：11056948
> 
> 赞同：1
> 
> 时间：2012-06-15T19:24:14.270
> 
> 标签：java, deployment, manifest, war, iplanet

我开发了一个 Java Web 应用程序并将其部署在 Oracle iPlanet 7 上。目前，我将库依赖项与应用程序一起部署，即在 WEB-INF/lib 中。我想做的是将应用程序部署在一个 WAR 文件中，没有 JAR 文件，并在 MANIFEST.MF 文件中指定库依赖项。

我想我明白我应该做什么。我希望我的 JAR 文件在一个单独的目录中。MANIFEST.MF 文件需要这样一行：

```
Class-Path: lib/jar1.jar lib/jar2.jar 
```

然后，包含 WAR 文件的目录需要如下所示：

```
webapp.war
lib/
    jar1.jar
    jar2.jar 
```

我在使用 iPlanet 7 时遇到的问题是，当我部署 WAR 文件时，iPlanet 会解压缩它并将应用程序放在另一个目录中。我最终得到一个这样的目录：

```
webapp.war
server-name/
    webapp/
        ...
lib/
    jar1.jar
    jar2.jar 
```

有没有办法告诉 iPlanet 不要解压我的 WAR 文件？

# c# - ASP.NET 为一个控件提供多个控件 ID 错误

> ID：11056951
> 
> 赞同：1
> 
> 时间：2012-06-15T19:24:19.743
> 
> 标签：c#, asp.net

我想动态地将控件添加到占位符，如下所示：

```
int fileCount = Convert.ToInt32(lblCount.Text);
    for (int i = 0; i<fileCount ; i++)
    {
        FileUpload fu = new FileUpload();
        if(PlaceHolder1.HasControls())
            PlaceHolder1.Controls.AddAt(i,fu);
        else
            PlaceHolder1.Controls.Add(fu);
        PlaceHolder1.Controls[i].ID = "123456abcdef" + i;
    } 
```

但我得到了错误

> 找到了具有相同 ID '123456abcdef0' 的多个控件。FindControl 要求控件具有唯一的 ID。

为什么？在循环的每次迭代中，只有一个控件应该获得该 ID。

编辑：应该提到我实际上无法测试循环，即使 fileCount 为 1，我也会收到错误消息。

解决方案：当我认为它在页面加载之外时，我从页面加载中的“foreach”循环中调用了这个函数。尽管如此，记住 clear() 方法将消除函数 addat 部分的必要性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:32:47.307

在开始添加之前先做清楚：

```
PlaceHolder1.Controls.Clear(); 
```

您的添加语句可以简化如下：

```
FileUpload fu = new FileUpload();
fu.Id = "123456abcdef" + i;
PlaceHolder1.Controls.Add(fu); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:29:38.353

据我所知，您可以尝试以下方法。

```
int fileCount = Convert.ToInt32(lblCount.Text); 
for (int i = 0; i<fileCount ; i++)     
{         
     FileUpload fu = new FileUpload();
     fu.ID =  "123456abcdef" + i;
     PlaceHolder1.Controls.Add(fu); 
} 
```

希望这可以帮助！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:30:12.767

改成这样：

```
 int fileCount = Convert.ToInt32(lblCount.Text);
    for (int i = 0; i<fileCount ; i++)
    {
        FileUpload fu = new FileUpload();
        fu.ID = string.Format("fu_{0}", i);
        PlaceHolder1.Controls.Add(fu);
    } 
```

# asp.net-mvc - MVC4 Razor - @Html.DisplayFor 未绑定到模型

> ID：11056954
> 
> 赞同：35
> 
> 时间：2012-06-15T19:24:30.060
> 
> 标签：asp.net-mvc, razor

我试图用 MVC4 Razor 找到我的脚，但我遇到了这个简单的问题。

当我使用 @Html.DisplayFor 时，模型总是作为 NULL 发回，但是当我使用 @Html.TextBoxFor 时，这个模型已完全填充，我错过了什么？

提前致谢

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-15T19:34:50.147

这是很多人在 asp.net mvc 框架中忽略的一个常见问题。不仅是 , , 等辅助函数的不同，还`HiddenFor`包括框架如何准确地设置自动收集和验证这些输入。神奇的是 HTML5 的 data-* 属性。当查看生成的输入标签时，您会注意到会有一些额外的属性以 , 的形式出现，并且可能还有一些类型的额外数据属性，例如数字将是。`DisplayFor``TextBoxFor``data-val``data-val-required``data-val-number`

这些数据属性允许 jQuery 扩展`jquery.validate.unobtrusive.js`解析 DOM，然后决定验证哪些字段或生成错误消息。

发布数据的实​​际收集反映在`name`属性中。这应该映射到 c# 或 vb`[HttpPost]`方法中的模型。

`HiddenFor`当您想要提供用户不需要知道的发布数据时使用。

`DisplayFor`当您想要显示记录但不允许对其进行编辑时使用。

`TextBoxFor`当您想要允许用户输入或允许用户编辑字段时使用。

**编辑**

`"the purpose of this view is to enable the user to view the data before submitting it to the database. Any ideas how I can achieve this?"`

`HiddenFor`您可以使用两个和来完成此操作`DisplayFor`。用于`HiddenFor`使值准备好发布，并`DisplayFor`显示这些值。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-15T19:27:36.780

`DisplayFor`不会进行模型绑定。`TextBoxFor`会这样做，因为它会`input`在表单中创建一个元素，并且表单可以在发布时处理它。如果您想在 HttpPost 操作中获取一些数据并且不想使用 TextBoxFor，则可以使用`HiddenFor`HTML 帮助器方法将 pirticulare 模型属性保存在表单内的隐藏变量中。

```
@using(Html.BeginForm())
{
  <p>The Type Name is</p> @Html.DisplayFor(x=>x.TypeName)
  @Html.HiddenFor(x=>x.TypeName)
  <input type="submit" value="Save" />
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-02T04:23:52.930

同时使用`DisplayFor`和`HiddenFor`。`DisplayFor`只是显示文本而不是输入字段，因此不会回发。 `HiddenFor`实际上创造`<input type="hidden" value="xxxx"/>`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T19:27:37.203

`DisplayFor`构建一个 HTML 标签，而不是一个输入。标签不发布到服务器，但输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T19:28:28.323

你的意思是在表单发布期间？如果您使用 DisplayFor，这将创建一个不包含任何表单值的元素。通常，您将它们结合使用来为您的文本框创建标签，然后使用 Html.TextBoxFor 允许用户修改数据元素。

例子：

```
@Html.DisplayFor(x=>x.Item)
@Html.TextBoxFor(x=>x.Item) 
```

将渲染

```
Item <a text input field following> 
```

或者在 HTML

```
<label for="Item">Item</label><input type="Text" id="Item" name="Item"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-20T11:53:27.653

我知道这是一个老问题，但您可以滚动自己的自定义组合显示控件，如下所示。这将呈现模型值，后跟该值的隐藏字段

```
@Html.DisplayExFor(model => Model.ItemCode) 
```

只需使用框架已有的内容

```
public static MvcHtmlString DisplayExFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> ex)
{
    var sb = new StringBuilder();
    sb.Append(htmlHelper.DisplayFor(ex));
    sb.Append(htmlHelper.HiddenFor(ex));

    return MvcHtmlString.Create(sb.ToString());
} 
```

# solr - Solr 数据导入：连接几个逗号分隔的字段

> ID：11056962
> 
> 赞同：0
> 
> 时间：2012-06-15T19:24:56.560
> 
> 标签：solr, dataimporthandler

我正在使用 Solr 制作可搜索的图书目录。我编写了一个查询，它使用 DataImportHandler 获取我感兴趣的所有信息。每本书可能有多种格式，每种格式都有自己的 ISBN、格式名称和价格，以逗号分隔的值表示，如下所示：

```
|  id  |   title   |    isbns     |    prices     |  formats  |
|-------------------------------------------------------------|
|  1   |  A Book   | isbn1,isbn2  | price1,price2 | fmt1,fmt2 |
|  2   |  Another  |    anisbn    |     aprice    |  aformat  |
 ... ... ... 
```

我目前正在使用 RegexTransformer 和 splitBy，以便我可以为分面制作 isbns、价格和格式多值字段。但是，理想情况下，我希望能够单独提取值并将它们存储在索引的另一个字段中。换句话说，对于示例中 ID 为 1 的书，我想将以下字段存储为字符串：

字段 1：“fmt1 (isbn1): price1”

字段 2：“fmt2 (isbn2): price2”

Solr 可以做这种事情吗？我总是可以提取字段并在应用程序端处理它们，但由于这个 Solr 索引将有多个客户端执行查询，我宁愿在构建索引时存储额外的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:07:49.697

这一切都在[DIH wiki](http://wiki.apache.org/solr/DataImportHandler#RegexTransformer)中进行了解释，只需使用`groupNames`param 指定字段名称（组是常规的[正则表达式组](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#cg)）。

**`EDIT:`**

> ***groupNames***：*字段列名称的逗号分隔列表，用于正则表达式包含组并且每个组将保存到不同字段的情况。如果不命名某些组，请在逗号之间留一个空格。*
> 
> 在此示例中，属性“regex”和“sourceColName”是转换器使用的自定义属性。它从结果集中读取字段“full_name”并将其转换为两个新的目标字段“firstName”和“lastName”。因此，即使查询在结果集中仅返回一列“full_name”，solr 文档也会获得两个额外字段“firstName”和“lastName”，它们是“派生”字段。仅当正则表达式匹配时才会创建这些新字段。

# python - 两个基本的 Python 编程问题

> ID：11056964
> 
> 赞同：2
> 
> 时间：2012-06-15T19:25:00.900
> 
> 标签：python

这些问题的基本程度可能会让您感到震惊，但请耐心等待！如果有更好的地方可以问，我会很感激迁移。

我正在看两个 Python 教程，其中之一是“Learn Python the hard way”。我没有条件评估教程的质量，所以我有几个问题。（我才刚刚开始 LPTHW，所以如果答案在 20 次练习之后出现，我深表歉意。）

1.  在 LPTHW 中，到目前为止的练习都是在 Notepad++ 中编码并从命令行执行 txt 文档。在另一个中，它是一个“将命令一个一个地输入 Python”的教程。问题：对于学习者来说，哪个更实用？“两者”是可以接受的答案。

2.  在 LPTHW 中，变量的第一个解释，格式字符命令 %s %d 和 %r 被使用。练习说“搜索网络以了解所有这些”。我进行了一次网络搜索，发现有人说“不要使用那些，使用新的”。问题：LPTHW 是否以这种方式过时了，我应该使用“新的”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:31:51.663

1.  我会说“两者”。当您编写“真正的程序”时，您将在文本文件中编辑它们并从命令行运行它们，但交互式环境是学习、探索和测试的好方法。当我将编码作为检查我的假设的地方时，我保留了一个交互式 python 会话。
2.  您绝对应该学习旧的格式化语法。它基于 C 语言的格式化打印工具，并且许多编程语言都采用了类似的系统，因此了解这一点很重要。学习新东西也没什么坏处，尝试在新旧样式中编写相同的格式化功能是一个很好的练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:30:30.027

这是我的看法：

1.  新学习者一开始可能更喜欢将命令一个一个地输入到 Python 中，因为他们会得到即时反馈并且仅限于小程序。编码到编辑器或 IDE 中适用于更高级的用户。“两者”是最终的、长期的答案。
2.  可能是 LPTHW 是为早期版本的 Python（例如 2.6）编写的。我想我们现在是 3.2。我想说的是，如果您根本不了解 Python，并且只是第一次学习它，那么即使不是最前沿的教程也会对您有所帮助。可能会有一些细节会在这里和那里发生变化，但基本语言仍然很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:32:16.713

1）两者。创建脚本是您大规模使用 Python 所做的事情。使用 Python shell 也可以很好地向您展示，您可以通过命令行使用大量选项进行简单的脚本编写，而无需像使用其他语言那样构建/编译整个程序等。

2）格式改变，但没什么大不了的。许多人仍然使用 Python 2.x，因为 Python3 引入了一些不必要的更改。看看吧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T19:37:08.447

1.  Python repl 非常适合测试内置函数，但是就编写健壮、复杂的程序而言，您必须写入文件。

2.  虽然我们在 Python 3.x，但 Python 2.x 仍然被更广泛地使用。%s 是字符串的占位符，%d 是整数的占位符，%r 是某些 python 命令的占位符。

例如：

```
a = "hello world"
b = "%s"
b%a == "hello world"
a = 10
b = "%d"
b%a == "10"
a = "%r"
a%range(10) == "[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]" #since range(10) is a python function
                                                #which returns the list of numbers 
                                                #from 0 to 10 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T13:05:35.120

过去几个月我一直在通过 LPTHW 工作，目前正在使用 ex50。我的简短回答是：认真对待 Shaw，通过 LPTHW 搞砸你的屁股！您将看到您将同时使用文本编辑器和交互式会话，因此这不是一个真正的问题。Shaw 并不是在开玩笑说“难”，而是因为如果你花几个月的时间，认真对待“额外学分”，你会学到很多东西。

当他说，“去读一些废话”时，是的，这很难。但我很快意识到“去阅读”是一项必要的技能（我想我已经知道了）。另外，允许浏览网页并迷失阅读作业中没有的python内容:)

我的一些提示：

*   先做这本书（比 LPTH 容易得多）：[命令行速成课程](http://cli.learncodethehardway.org/book/)。认真对待他，制作闪存卡。我很幸运，有两台笔记本电脑并排，一台是 Windows 7，一台是 Ubuntu linux。在这一点上，我已经倾向于在 linux 中进行编码，并且我在命令行方面已经足够好了，我实际上想要学习 Vim（对我来说是一个很大的惊喜）

*   如果您可以在 linux 和 windows 之间进行选择，那么最终您可能会更乐意使用 linux。我认为 Windows 支持一切，但大多数帮助都是针对 linux 的。我的目标是同时学习两者，但就像我上面所说的，此时我在 Windows 机器上阅读 LPTHW，而我在 Ubuntu 机器上编码

*   做所有额外的功劳。但是，如果您感到困惑，请不要担心。后来我发现，也许是第二天，也许是下周，我会回过头来，最终了解之前练习的额外功劳。

*   在迄今为止的所有练习中，“练习 46：骨架项目”对我来说是最具变革性的。在书中的那个点附近，我开始陷入困境并感到无能。但我一直在挣扎，在一两个星期（可能工作 10 到 20 个小时）之后，突然“咔嚓”一声，我现在觉得我知道了什么。我建议重复做 3-6 题的“必答测验”问题，直到你可以从记忆中完成所有事情而无需查找任何内容。在 linux 上，您只需使用键盘即可完成所有这些问题，而且我意识到如果您不需要鼠标，事情会变得多快。我想这就是为什么我很想学习 Vim。

*   最后，当您使用 LPTHW 时，如果可能的话，将 python 用于小型项目。这是一个很好的动机，您可以提前阅读以了解诸如安装包之类的事情。我很早就发现，我能够进入 github，找到我需要的代码，并根据我自己的目的对其进行调整。即使其中大部分是神秘的，例如，如果 __name__ = '__main__': 。我不知道这意味着什么，但这并没有阻止我使用 python 并想了解更多。

好的祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T19:30:16.870

Idle 会快一点，或者 Eclipse 的 pydev 插件（也会提供代码完成等），你可以从一个地方编写和运行你的代码，并且过时了，真的取决于你的环境，也youtube 上的新波士顿教程不会出错

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T19:30:36.763

1.  将 Python 代码输入到交互式解释器中是一种很好的测试方式，尤其是在您不想为其创建文件的情况下。查看函数返回的结果并尝试任何方法很有用。但是您编写的任何程序当然都将存储在文件中。两者确实是答案，因为它们都在开发过程中使用，只是用于不同的目的。

2.  格式化字符串的新方法是`"thestring".format(...)"`，`...`各种格式化选项在哪里。这确实是一种新的做事方式，您应该改用它。旧的格式化选项使代码的可读性降低（因为您必须知道其中的缩写`%`），而且编写起来要容易得多`"string with values: {0} and {1}".format(3, 4)`。

# oracle - 根据另一个表中的多个值删除行

> ID：11056976
> 
> 赞同：0
> 
> 时间：2012-06-15T19:26:04.070
> 
> 标签：oracle, oracle11g

此语句返回错误 00920 - 无效的关系运算符。

我确定这是我的语法，但我没有看到它。如果任何代码可以查看它并指出我做对了，我将不胜感激。

谢谢

```
DELETE FROM TABLE15 p

  WHERE (p.item_id, p.product_id) IN

           (SELECT S.item_id, S.product_id )

              FROM TABLE14 S); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:32:44.310

你的括号是狡猾的...

```
DELETE FROM TABLE15 p
  WHERE (p.item_id, p.product_id) IN
           (SELECT S.item_id, S.product_id
              FROM TABLE14 S
                   ); 
```

您需要删除额外的一个。该错误是`in`由于额外的括号导致解析不正确引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:31:20.830

尝试这个：

```
DELETE FROM table15 p
WHERE  ( p.item_id IN (SELECT S.item_id
                       FROM   table14 S) )
        OR (( p.product_id IN (SELECT S.product_id
                               FROM   table14 S) )); 
```

# c++ - Python Ctypes 崩溃调用 C++ 函数的 C 包装器

> ID：11056978
> 
> 赞同：4
> 
> 时间：2012-06-15T19:26:19.853
> 
> 标签：c++, python, c, segmentation-fault, ctypes

我正在尝试使用 Python Ctypes 来连接已发布的（封闭源代码）C++ 库。我（尝试过）编写了一个基本的 C 样式函数包装器来构造 C++ 矢量样式对象并调用 C++ 例程。我还（尝试过）编写了一个基本的 python 脚本来加载共享库。一切正常，除了调用 C++ 例程的行，它产生：

```
*** glibc detected *** python: free(): invalid next size (fast): 0x0000000001e73c00 *** 
```

这是文件，不幸的是我无法共享标题，但如果需要我可以写一些类似的东西......

gaumixmod.cpp：

```
#include "nr3.h"
#include "cholesky.h"
#include "gaumixmod.h"

extern "C" {

  void cGaumixmod(double* D, int Dm, int Dn,  double* M, int Mm, int Mn) {

    MatDoub ddata(Dm,Dn,*D); // construct Matrix (vector) type                       
    MatDoub mmeans(Mm,Mn,*M); // construct Matrix (vector) type                      

    //XXX test numpy array is coming through as C array and we can rw, checks OK
    int i;
    // for(i=0;i<Dn*Dm;++i) {                                               
    //   printf("Address %x : ",(D+i));                                     
    //   printf("was %f \t" , D[i]);                                        
    //   D[i]+=1.0;                                                         
    //   printf("now: %f \n" , D[i]);                                       
    // }                                                                    

    // check that array D was copied to matrix ddata, and we can r/w
    for(i=0;i<Dm*Dn;++i) {
      printf("iter %d Address %x : ",i,ddata[i/Dm][i%Dm]);
      printf("was %f \t" , ddata[i/Dm][i%Dm]);
      ddata[i/Dm][i%Dm]+=1.0;
      printf("now: %f \n" ,ddata[i/Dm][i%Dm]);
    }

    Gaumixmod::Gaumixmod(ddata,mmeans);

    //return data from vector to ctypes array C so we can check data returns to python
    //via numpy array, checks ok
    for(i=0;i<Dm*Dn;++i) {
      D[i] = ddata[i/Dm][i%Dm];
    }

  }

} 
```

goumixmod.py:

```
import platform,ctypes
import numpy as np

# ------------------------------------------------------------------------
# define correct library from platfrom, assuming 64bit for linux machines   
# ------------------------------------------------------------------------  

if platform.system()=='Microsoft':
    raise Exception('MS not supported.')
elif platform.system()=='Darwin':
    libgaumixmod = ctypes.cdll.LoadLibrary("./gaumixmod.so")
elif platform.system()=='Linux':
    libgaumixmod = ctypes.cdll.LoadLibrary("./gaumixmod.so")
else:
    #hope for the best                                                      
    libgaumixmod = ctypes.cdll.LoadLibrary("./gaumixmod.so")

# --------------------------------------------------
# define SafeCall                                                           
#---------------------------------------------------                                  

def SafeCall(ret):
    """pass, code l8r""
    print ret
#---------------------------------------------------  
# define arg types and res types of function                                
# -----------------------------------------------------------------------             
_gaumixmod = libgaumixmod.cGaumixmod
_gaumixmod.restype = ctypes.c_int
_gaumixmod.argtypes = [np.ctypeslib.ndpointer(dtype=np.float64,flags='C_CONTIGUOUS'),
            ctypes.c_int,
            ctypes.c_int,
            np.ctypeslib.ndpointer(dtype=np.float64,flags='C_CONTIGUOUS'),
            ctypes.c_int,
            ctypes.c_int]

def gaumixmod(D,K):
    """Python binding for C++ guassian mixure model code."""

    ret = _gaumixmod(D,D.shape[0],D.shape[1],K,K.shape[0],K.shape[1])
    SafeCall(ret)
    return D,K

D = np.ones((100,100)).astype(np.float64)
K = np.ones((4,1)).astype(np.float64)

print gaumixmod(D,K) 
```

我编译这个爵士乐：

```
g++ -fPIC -c gaumixmod.cpp;
g++ -shared -o gaumixmod.so gaumixmod.o 
```

并运行

```
python gaumixmod.py 
```

我的研究表明此错误类似于 segFault，其中 python 试图访问其范围之外的内存......这是我不明白的部分，因为注释掉 C++ 行 Gaumixmod::Gaumixmod()，一切正常很好，并且该例程应该在 cGaumixmod() 函数中实例化的向量上运行，而不是 python numpy 数组。我对 C++ 真的很陌生，虽然我已经多次将 C 类型用于 C 库。我希望有一些 C++、python 和 ctypes 经验的人可以在这里提供一些见解/指导。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:40:02.400

有一个用于与 C 接口的新库，您可能会看它：

[http://cffi.readthedocs.org/en/latest/index.html](http://cffi.readthedocs.org/en/latest/index.html)

# python - 是否可以引用 Python 中的字典项？

> ID：11056981
> 
> 赞同：1
> 
> 时间：2012-06-15T19:26:31.693
> 
> 标签：python, reference

我有一个函数可以重复索引到具有相同键的字典中。是否可以参考相关项目？

```
def my_function(self, event):
    self.__observers[event] ... #this is get is performed multiple times
    observer_ref = self.__observers[event] #can I make this a reference to the value? 
```

**更新：** 目标是不复制 self.__observers[event] 中的内容。我正在寻找类似于 C++ 的行为，例如

```
int x = 1
int& y = x #reference to y, not a copy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:42:45.433

当您在 Python 中为名称（变量）赋值时，变量只是对该值的引用。

因此，例如说`self.__observers[event]`以空列表开头，以下代码可以正常工作：

```
assert self.__observers[event] == []
observer_ref = self.__observers[event]
observer_ref.append(1)                    # this modifies self.__observers[event]
assert self.__observers[event] == [1] 
```

但是，正如 BrenBarn 所指出的，如果您要分配`observer_ref`一个新值，它根本不会修改`self.__observers[event]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:43:08.450

这实际上取决于您所说的“参考”是什么意思。...而且它还取决于您将如何处理参考。例如。

```
class Test(object):
    def __init__(self):
        self.__observers = {'event1': {'test':'this'}, 'event2': {'test':'that'}}

    def get_observers(self):
        return self.__observers

    def my_function(self, event):
        observer_ref = self.__observers[event]
        return observer_ref

if __name__ == '__main__':
    t = Test()

    my_event = 'event1'  

    print('From class: {}'.format(t.get_observers()[my_event]))
    my_ref = t.my_function(my_event)
    print('From my_function: {}'.format(my_ref))

    my_ref['something'] = 'else'

    print('From my_function after addition: {}'.format(my_ref))
    print('From class after addition: {}'.format(t.get_observers()[my_event]))

    my_ref = 'something else entirely'

    print('From my_function after re-assignment: {}'.format(my_ref))
    print('From class after re-assignment: {}'.format(t.get_observers()[my_event])) 
```

结果是 ：

```
From class: {'test': 'this'}
From my_function: {'test': 'this'}
From my_function after addition: {'test': 'this', 'something': 'else'}
From class after addition: {'test': 'this', 'something': 'else'}
From my_function after re-assignment: something else entirely
From class after re-assignment: {'test': 'this', 'something': 'else'} 
```

基本上，如果您`reference`是某种对象，您可以使用该引用来操作该对象。您只是不能将引用的名称重新分配给其他东西，并将其反映在您从中提取引用的原始对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:29:56.310

当然。你为什么不试试看呢？

但是，正如评论中指出的那样，这取决于您所说的“参考”是什么意思如果您按照您的建议进行操作，分配给您的新变量不会改变字典。

```
>>> d = {'a': 1}
>>> d['a']
1
>>> x = d['a']
>>> x
1
>>> x = 2
>>> d
{u'a': 1} 
```

# jstl - 使用 jstl 打印请求范围的参数

> ID：11056983
> 
> 赞同：0
> 
> 时间：2012-06-15T19:26:33.663
> 
> 标签：jstl, portlet, spring-el

我有2个jsps。jsp1 转到一个 portlet，portlet 重定向到 jsp2。jsp1 有一个触发流程的“完成”按钮。jsp1 还有一些其他按钮。在 jsp1 中，我有：

```
<input type="submit" name="_finish" id="_finish" value="button.finish" /> 
```

在 jsp2 中，我这样做：`<c:out value = "${param._finish}"/>` 但屏幕上没有任何内容。但是，如果我这样做，在 portlet 中：

```
request.getParameter("._finish"), I get a non-null value. 
```

为什么jsp中没有finish按钮的值？如果单击“完成”按钮，我需要在 jsp2 中显示一条消息。
我也试过：

```
<c:forEach items="${requestScope}" var="par">
<c:out value="${par.key} - ${par.value}"/>
</c:forEach> 
```

但是 _finish 没有出现在屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:44:31.117

我想到了。抱歉，添麻烦了。portlet 中发生了重定向，因此原始请求不可用

# wordpress-theming - Wordpress 上不同页面的不同侧边栏

> ID：11056994
> 
> 赞同：0
> 
> 时间：2012-06-15T19:27:54.770
> 
> 标签：wordpress-theming, widget, sidebar

我正在尝试在 WordPress（版本 3.3.2）上设计一个主题，但在让侧边栏在某些页面上显示一组不同的小部件时遇到了一些问题。

我已经尝试了几个在线教程，尤其是这个[http://www.rvoodoo.com/projects/wordpress/wordpress-tip-different-sidebars-on-different-pages/](http://www.rvoodoo.com/projects/wordpress/wordpress-tip-different-sidebars-on-different-pages/)但不幸的是，当我在侧边栏没有变化时移动到不同的页面

我在*functions.php*上注册了两个侧边栏，如下所示，一个我认为是主侧边栏，另一个是自定义侧边栏，我还向这些侧边栏添加了不同的小部件。

```
<?php register_sidebar( //register sidebar
    array(
        'name' => 'Right-side',
        'before_widget' => '<div class="rightwidget">',
        'after_widget' => '</div>',
        'before_title' => '<h3 class="widgettitle">',
        'after_title' => '</h3>',
        ));

        register_sidebar( //register second sidebar
    array(
        'name' => 'Second-right',
        'before_widget' => '<div class="rightwidget">',
        'after_widget' => '</div>',
        'before_title' => '<h3 class="widgettitle">',
        'after_title' => '</h3>',
        ));

?> 
```

之后，我创建了文件*sidebar.php*和*sidebar-second.php*以便能够调用它们。

*边栏.php*

```
<div id="sidebar">
    <?php if (!function_exists('dynamic_sidebar') || !dynamic_sidebar('Right-side')) : ?>
        <h3 class="widget-title">No widget added</h3>
        <p> Please add some widgets</p>

    <?php endif; ?>
    </div><!--ends sidebar--> 
```

*侧边栏-second.php*

```
 <div id="sidebar">
    <?php if (!function_exists('dynamic_sidebar') || !dynamic_sidebar('Second-right')) : ?>
        <h3 class="widget-title">No widget added</h3>
        <p> Please add some widgets</p>

    <?php endif; ?>
    </div><!--ends sidebar--> 
```

然后我添加了`<?php get_sidebar() ; ?>`用以下条件替换我的语句

```
<?php if( is_page('225') ) : ?>
<?php dynamic_sidebar('second'); ?>
<?php else : ?>
<?php get_sidebar() ; ?>
<?php endif ; ?> 
```

然而，只有添加到*sidebar.php*的小部件才会显示在每个页面上。关于我如何改变这一点的任何帮助，或关于我可能做错了什么的指示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:30:58.057

我看起来你正在使用`<?php dynamic_sidebar('second'); ?>`你应该使用的地方`<?php get-sidebar('second'); ?>`

get_sidebar('foo') 所做的是在主题的根目录中查找名为“sidebar-foo.php”的文件并将其包含在内。另一方面，dynamic_sidebar('bar') 查找注册的侧边栏：

```
<?php register_sidebar( array( 'name' => 'bar' ... ) ) ?> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T21:25:22.827

为什么不使用[自定义侧边栏插件](http://wordpress.org/extend/plugins/custom-sidebars/)？

它真的很容易使用，不需要任何编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-27T09:57:41.327

你有两个侧边栏。当您想在特定页面上使用侧边栏第二个文件时，而不是调用

```
<?php get_sidebar('second') ; ?> 
```

尝试

```
<?php get_sidebar('sidebar-second.php') ; ?> 
```

这应该可以解决问题

# java - 如何建模多对多关系

> ID：11056996
> 
> 赞同：2
> 
> 时间：2012-06-15T19:28:09.817
> 
> 标签：java, hibernate, jpa

如何使用 JPA 实现以下关系？

```
table person (
  id int,
  name text
)

table person_home (
    person_id int,
    home_id int,
    type char(1)       -- 'p' = primary, 's' = secondary
)

table home (
    id int,
    address text
) 
```

一个人可以有很多家，一个家可以有很多人住在里面（即多对多关系）。此外，房屋可以是一个人的主要住所，但同时也是另一个人的次要住所。

我不确定如何对这种关系建模，即使数据库模式很清楚。

我曾考虑将映射表 person_home 拆分为 person_primary_home 和 person_secondary_home，但是如果可能的话，我更愿意保留架构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:31:52.043

这个问题在这里被问到并得到了回答：
[How to create a composition primary key which contains a @ManyToOne attribute as an @EmbeddedId in JPA?](https://stackoverflow.com/questions/7195990/how-to-create-a-composite-primary-key-which-contains-a-manytoone-attribute-as-a?lq=1)

你需要四个类：

1.  人.java
2.  主页.java
3.  个人主页.java
4.  PersonH​​omePk.java

您创建的 Person.java 和 Home.java 文件与 PersonH​​ome.java 具有一对多的关系。他们将有 @Id 字段来识别主键。每个都将定义一个 @OneToMany 关系，其中至少有一个 mappedBy 属性映射到 PersonH​​ome 实体中它们各自的字段。即在 Person.java 你可以有类似的东西

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "Person")
private Collection<PersonHome> personHome; 
```

PersonH​​ome.java 将有一个 @EmbeddedId 字段来标识作为其主键的 PersonH​​omePk 实例声明（也就是说，而不是 @Id 列，您将有一个 @EmbeddedId 注释表示连接主键的类的声明表 PersonH​​ome）。任何其他字段都被声明为普通列。PersonH​​ome.java 还将声明两个 ManyToOne 关系，每个关系与人和家庭有关。这些将使用@JoinColumn 注释（确保它们具有属性 insertable=false 和 updatable=false）。数据类型将是 Person 和 Home 类。IE

```
@EmbeddedId
protected PersonHomePk personHomePk;
@Column (name = "type")
private String type; 
@JoinColumn(name = "person_id", referencedColumnName = "person_id", insertable = false, updatable = false)
@ManyToOne(optional = false)
private Person person; 
```

“Home”声明也需要相同的内容。

为什么你只使用一个字符来表示“类型”。我推荐一个 varchar，这样当你不在时维护它的人会更好地理解代码和数据库。“分离”更容易理解“d”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:31:22.367

我相信，如果除了 person_home 表上的关系之外，您还需要元数据，则需要使用三个具有两个一对多关系的对象才能访问所有数据。

您可以通过从 person 表到 home 表建立两个多对一关系，通过 primary_home_id 和 secondary_home_id 来消除这种需求——除非我在这里遗漏了一个要求并且一个人可以有多个主要或次要家.