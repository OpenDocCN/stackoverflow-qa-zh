# StackOverflow 问答 10503000-10503999

# jquery - Pjax Safari 问题

> ID：10503000
> 
> 赞同：2
> 
> 时间：2012-05-08T16:58:13.610
> 
> 标签：jquery, ajax, header, pushstate, pjax

我在使用 pjax 脚本仅加载页面的一部分时遇到问题。它最终在 Chrome 和 Firefox 中有效，但在 ipad 的 safari（最新版本）中无效。当我检查 pjax heroku 演示站点时，脚本工作得很好（所以问题就在我这边）。

这是我正在使用的代码：

```
<?php if($_SERVER["HTTP_X_PJAX"]): ?>
<div id="main">first change</div>
<?php else: ?>
<html>
<head>
<script src="http://pjax.heroku.com/jquery.js"></script>
<script src="http://pjax.heroku.com/jquery.cookie.js"></script>
<script src="http://pjax.heroku.com/jquery.pjax.js"></script>
<script type="text/javascript">
$(function() { $('a').pjax('#main'); });
</script>
</head>
<body>
<?php
$header = "this is first part
<br/> <a href='pjax2.php' data-pjax='main'>GO</a>";
$date = date("Y-m-d H:i:s");
$footer = "this is first part";
echo "$header<br/>$date<br /><div id='main'>first page</div><br />$footer";
?>
</body>
</html>
<?php endif; ?> 
```

这里也是示例链接[http://bluereservations.com/pjax.php](http://bluereservations.com/pjax.php)

如果您使用的是 Chrome 或 Firefox，则脚本仅加载请求的部分，而在 safari 上则加载整个页面。

你有什么想法可能是什么问题？

# c++ - 使用可变参数模板的递归元函数

> ID：10503002
> 
> 赞同：3
> 
> 时间：2012-05-08T16:58:20.803
> 
> 标签：c++, c++11, metaprogramming, variadic-templates

我正在编写一个元函数`replace_type<C, X, Y>`，它应该将`X`复合类型中的所有类型匹配`C`替换为`Y`. 我目前正在努力使其与`C`.

这有效：

```
template replace_type<
    typename C, typename X, typename Y,
    typename First
>
struct replace_type<C(First), X, Y>
{
    typedef typename replace_type<
        C, X, Y
    >::type type(
        typename replace_type<
            First, X, Y
        >::type
    );
};

template replace_type<
    typename C, typename X, typename Y,
    typename First, typename Second
>
struct replace_type<C(First, Second), X, Y>
{
    typedef typename replace_type<
        C, X, Y
    >::type type(
        typename replace_type<
            First, X, Y
        >::type,
        typename replace_type<
            Second, X, Y
        >::type
    );
}; 
```

但这显然是非常有限的。在我的脑海中，我应该在这里使用可变参数模板似乎很明显，但是当我实际尝试应用它时，我很快注意到我不知道如何将它融入这个方案。

我想像这样实现它：

```
template replace_type<
    typename C, typename X, typename Y,
    typename First, typename... Args
>
struct replace_type<C(First, Args...), X, Y>
{
    typedef typename replace_type<
        C, X, Y
    >::type type(
        typename replace_type<
            First, X, Y
        >::type,
        // How to recursively do the same with the rest of the arguments?
    );
}; 
```

这样，我总是可以访问第一个参数以适当地替换它，然后继续下一个，并准备好另一个专门的元函数来处理空函数作为我的递归的终止条件。问题是，如源代码中所述，如何在这种情况下开始递归？

**更新**

最小的例子：

```
#include <type_traits>

namespace type_replace_helper
{
    template <typename, typename, typename>
    struct type_replace_base;
}

template <typename C, typename X, typename Y>
struct type_replace
{
    typedef typename std::conditional<
        std::is_same<C, X>::value,
        Y,
        typename type_replace_helper::type_replace_base<
            C, X, Y
        >::type
    >::type type;
};

namespace type_replace_helper
{
    template <typename C, typename X, typename Y>
    struct type_replace_base
    {
        typedef C type;
    };

    template <typename C, typename X, typename Y>
    struct type_replace_base<C(), X, Y>
    {
        typedef typename type_replace<
            C, X, Y
        >::type type();
    };

    template <
        typename C, typename X, typename Y,
        typename First
    >
    struct type_replace_base<C(First), X, Y>
    {
        typedef typename type_replace<
            C, X, Y
        >::type type(
            typename type_replace<
                First, X, Y
            >::type
        );
    };

    template <
        typename C, typename X, typename Y,
        typename First, typename Second
    >
    struct type_replace_base<C(First, Second), X, Y>
    {
        typedef typename type_replace<
            C, X, Y
        >::type type(
            typename type_replace<
                First, X, Y
            >::type,
            typename type_replace<
                Second, X, Y
            >::type
        );
    };
}

int main()
{
    static_assert(std::is_same<
        type_replace<int(int, int), int, long>::type,
        long(long, long)
    >::value, "int should be replaced by long");
    return 0;
} 
```

**更新 2**

多亏了 Crazy Eddie，我才得以实现我想要的。因为我花了很长时间才理解这个野兽般的答案，所以我认为其他人阅读更详细的解决方案可能会有所帮助。

我实际实现的时间可能最长：问题不在于如何分离函数参数，而是*将*它们转换为替换参数的可变参数列表。因此，这里的主要目标是找到一种方法来正确替换每个参数，并将其存储到另一个单独的参数列表中。Eddy 的解决方案使用该`stack`结构作为包装器来区分两个参数列表，一个被替换，一个带有待办事项。

一旦参数列表被一一替换并存储在`stack`结构中，剩下要做的就是将它们作为列表再次拉出并像这样构造函数：`typedef T type(Params...);`，就是这样。

在我的编码风格中，这显示为：

```
template <typename...>
struct stack {};

// Definition only to specialize for actual stacks
template <
    typename X, typename Y,
    typename Stack, typename... Todo
>
struct list_converter;

// No more arguments to convert, return the gathered stack
template <
    typename X, typename Y,
    typename... Elems
>
struct list_converter<X, Y, stack<Elems...>>
{
    typedef stack<Elems...> type;
};

// Push replaced argument to stack and go to the next argument
template <
    typename X, typename Y,
    typename... Elems,
    typename First, typename... Todo
>
struct list_converter<X, Y, stack<Elems...>, First, Todo...>
{
    typedef typename list_converter<
        X, Y,
        stack<
            typename replace_type<First, X, Y>::type,
            Elems...
        >,
        Todo...
    >::type type;
};

// Definition only again for stack specialization
template <
    typename C, typename X, typename Y,
    typename Stack
>
struct function_builder;

// Pull out argument list from the stack and build a function
template <
    typename C, typename X, typename Y,
    typename... Elems
>
struct function_builder<C, X, Y, stack<Elems...>>
{
    typedef typename replace_type<
        C, X, Y
    >::type type(Elems...);
};

// Specialization for function replacements
// Builds function with replaced return type, and converted
// argument list (recursion starts with empty stack)
template <
    typename C, typename X, typename Y,
    typename... Params
>
struct replace_type<C(Params...), X, Y>
{
    typedef typename function_builder<
        C, X, Y,
        typename list_converter<
            X, Y,
            stack<>,
            Params...
        >::type
    >::type type;
}; 
```

以上代码如有语法错误请见谅；它已经是一个相当大的文件，我试图只提取相关信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:52:04.660

可变参数包的扩展可以处理所谓的模式。因此，您可以对所有内容使用一种部分专业化。

```
template replace_type<
    typename R, typename... Args,
    typename X, typename Y
>
struct replace_type<R(Args...), X, Y>
{
    typedef typename replace_type<
        R, X, Y
    >::type type(
        typename replace_type<
            Args, X, Y
        >::type...
    );
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:26:39.093

```
template < typename ... A >
struct stack { };

template < typename Stack, typename T >
struct push_front;

template < typename T, typename ... A >
struct push_front<stack<A...>,T> {
    typedef stack<T, A ... > type;
};

template < typename Ret, typename Args >
struct build_fun;

template < typename Ret, typename ... A >
struct build_fun<Ret, stack<A...> > {
    typedef Ret(*fptr)(A...);
    typedef decltype(*static_cast<fptr>(0)) type;
};

template < typename Match, typename Rep, typename Target >
struct replace_match { typedef Target type; };

template < typename Match, typename Rep >
struct replace_match<Match, Rep, Match> { typedef Rep type; };

template < typename Match, typename Rep, typename ... Types >
struct replace;

template < typename Match, typename Rep, typename Head, typename ... Tail >
struct replace<Match,Rep,Head,Tail...>
{
    typedef typename replace_match<Match,Rep,Head>::type my_match;

    typedef typename replace<Match, Rep, Tail...>::type next_set;

    typedef typename push_front<next_set, my_match>::type type;
};

template < typename Match, typename Rep >
struct replace<Match,Rep>
{
    typedef stack<> type;
};

template < typename Sig, typename Match, typename Rep>
struct replace_fun_args;

template < typename R, typename Match, typename Rep, typename ... Args >
struct replace_fun_args
{
    typedef typename replace<Match, Rep, Args...>::type arg_stack;
    typedef typename build_fun<R,arg_stack>::type type;
};

#include <iostream>
#include <typeinfo>

int main() {

    replace<int,char,double,unsigned int, int, char*>::type t;

    std::cout << typeid(build_fun<void,decltype(t)>::type).name() << std::endl;
} 
```

可能有一种方法可以只使用包而不是`stack`模板......需要查找如何从类型构建包。

# web-services - 如何在 Web 服务器中部署 CICS 应用程序

> ID：10503006
> 
> 赞同：0
> 
> 时间：2012-05-08T16:58:40.003
> 
> 标签：web-services, cics

我开发了我的第一个基本 cics 应用程序，它是一个考试系统。现在我希望每个人都可以使用它。我不知道这是否可能。任何人都可以指导我或提供任何链接或书籍以在服务器中部署。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:31:17.480

如果您的应用程序位于 CICS 区域中，那么有权访问该区域和您的事务的“每个人”都可以使用它。

[CICS 是一个 Web 应用程序服务器](https://www.ibm.com/docs/en/cics-ts/5.6?topic=configuring-cics-web-support-components)，等等。这些应用程序可以用 Assembler、C、COBOL、Java、PHP、PL/I 或 Rexx 编写。

如果您的应用程序使用 3270 作为其用户界面，并且您希望通过 Web 使其可用，那么您可以使用 CICS Web Support 的一项功能，[专门用于该](https://www.ibm.com/docs/en/cics-ts/5.6?topic=components-cics-web-support-3270-display-applications)功能。

# django - Django 将已保存的文件与模型关联

> ID：10503008
> 
> 赞同：0
> 
> 时间：2012-05-08T16:58:43.517
> 
> 标签：django

我允许用户上传带有块的图像。在不使用 FileField 重新保存文件的情况下从数据库中引用文件的适当方法是什么？我保存如下：

```
def handle_uploaded_file(f):
with open('some/file/name.txt', 'wb+') as destination:
    for chunk in f.chunks():
        destination.write(chunk) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:15:13.490

您应该将块写入 Django File 对象并将其保存到模型的 FileField。

然后该保存的文件将存在于您的`MEDIA_ROOT`目录中，如果需要，您将能够`mymodel.myfile.url`共享该文件的公共 url。

# python - Python 包中的单个类模块

> ID：10503022
> 
> 赞同：2
> 
> 时间：2012-05-08T16:59:34.063
> 
> 标签：python, namespaces

我正在制作一个 python 包，我目前的结构如下：

`application/utils.py`

```
class settings():
  function foo():
    bla bla bla

class debug():
  function bar():
    bla bla bla 
```

然后在其他模块中导入设置和调试类可以如下完成：

```
import application.utils.settings
import application.utils.debug 
```

但是现在，这些类变得非常大，我想将它们放在单独的文件中。

`application/utils/settings.py`

```
class settings():
  function foo():
    bla bla bla 
```

`application/utils/debug.py`

```
class debug():
  function bar():
    bla bla bla 
```

在这种情况下，导入调试和设置类如下：

```
import application.utils.settings.settings
import application.utils.debug.debug 
```

我觉得很不自然。这是正确的方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:06:44.157

你可以写`application/utils/__init__.py`：

```
from application.utils.settings import Settings
from application.utils.debug import Debug 
```

然后你将访问`Settings`和`Debug`课程更短

```
from application.utils import Settings
from application.utils import Debug 
```

不要将您的类和模块命名为相同的名称。阅读[PEP8](http://www.python.org/dev/peps/pep-0008/#naming-conventions)关于命名约定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:06:24.953

`utils/__init__.py`在您的文件中导入您的类并像以前一样导入它们。

# ruby-on-rails - 使用 capistrano 时如何阻止 bundler 在屏幕上显示密码？

> ID：10503023
> 
> 赞同：3
> 
> 时间：2012-05-08T16:59:41.567
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capistrano, bundler

我有一个关于 capistano 和 bundler 的问题。

当我通过 ssh 复制部署我的应用程序时，bundler 会询问我的 root 密码。这很好，因为我正在将我的 gem 安装到系统上的单独目录中。但是，当我输入密码时，它会在我输入时显示在屏幕上。我怎样才能让它停止？

我正在使用 Rails、Bundler、Capistano 的当前稳定版本。系统运行 FreeBSD 9.0、Apache 和 Phusion Passenger。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:22:19.057

我们这样做的方式是使用转发，然后 capistrano 将使用您的 ssh 密钥进入服务器。

```
ssh_options[:username] = 'USERNAME'
ssh_options[:forward_agent] = true 
```

这样，您不必使用密码。您只需在 ~/.ssh/authorized_keys 文件中保存您的密钥，然后配置您的服务器进行转发。一些谷歌搜索应该会提供有关如何在您的操作系统上设置转发的步骤，但如果是 Ubuntu，则[ubuntu ssh 文档](https://help.ubuntu.com/community/SSH/OpenSSH/Configuring)是一个不错的起点

# java - 如何使用 AsyncTask/Android 获取和解析 Geonames XML

> ID：10503029
> 
> 赞同：-2
> 
> 时间：2012-05-08T17:00:14.560
> 
> 标签：java, android, android-asynctask, geonames

我想做的是根据我的 GPS 位置获取包含附近维基百科文章的 Geonames XML 文件，并在我的地图或微调器或其他任何东西上显示文章的链接。

此代码在非 android 应用程序中运行良好：

```
private double lat = 44; //in my app, this would be the actual coordinates
private double lng = 9;

try{
        DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();
        DocumentBuilder builder= factory.newDocumentBuilder();

        URL url = new URL("http://api.geonames.org/findNearbyWikipedia?lat="+lat+"&lng="+lng+"&username=my_username");
        InputStream stream = url.openStream();
        Document xmlDocument = builder.parse(stream);

        NodeList titleNodes= xmlDocument.getElementsByTagName("title");
        NodeList articleURLNodes= xmlDocument.getElementsByTagName("wikipediaUrl");
        for(int i=0; i<titleNodes.getLength(); i++){

        System.out.println("Artikel "+ (i+1)+": "+ titleNodes.item(i).getTextContent() + " " + articleURLNodes.item(i).getTextContent());
        }
        }catch(Exception ex){
        System.out.println(ex.getMessage());
        }

} 
```

它打印所有文章+网址。

现在，当我使用 android 时，我需要使用 AsyncTaks，否则我会收到 NetworkOnMainThread 异常。到目前为止，我还没有真正了解它们是如何工作的以及如何使用它们。

这是我的尝试：

```
private class DownloadXMLTask extends AsyncTask<String, Void, InputStream> {

     String wikiUrl;
     URL url;
     InputStream stream;

     protected InputStream doInBackground(String... urls) {

        try {

            wikiUrl=urls[0];
            url = new URL(wikiUrl);
            InputStream stream = url.openStream();

        }catch(Exception ex){
            System.out.println(ex.getMessage());
            }
        return stream;

     } 
```

我想传递 url 并获取 InputStream 作为回报，以进行如上所示的解析。

但是我如何得到 AsyncTask 的结果呢？

PS这是我的解决方案：

```
private class DownloadXMLTask extends AsyncTask<String, Void, List<NodeList>> {

     String wikiUrl;
     URL url;
     InputStream stream;
     DocumentBuilderFactory factory= DocumentBuilderFactory.newInstance();
     DocumentBuilder builder;
     List<NodeList> liste = new ArrayList<NodeList>();

     protected List<NodeList> doInBackground(String... urls) {

        try {

            wikiUrl=urls[0];
            url = new URL(wikiUrl);
            InputStream stream = url.openStream();
            builder = factory.newDocumentBuilder();
            Document xmlDocument = builder.parse(stream);

            NodeList titleNodes=     xmlDocument.getElementsByTagName("title");
            NodeList articleURLNodes= xmlDocument.getElementsByTagName("wikipediaUrl");

            liste.add(titleNodes);
            liste.add(articleURLNodes);

            return liste;
        }catch(Exception ex){
            System.out.println(ex.getMessage());
            }
        return null;

     }
 } 
```

我返回了一个附有 NodeLists 的列表，我需要进一步处理。

在我的活动中，我可以像这样访问它们：

```
List<NodeList> liste = new DownloadXMLTask().execute(wikiAdresse).get();
NodeList titel = liste.get(0);
NodeList articleURL = liste.get(1);

// just a quick toast to show it works! =)
Toast.makeText(this, titel.item(0).getTextContent()+" "+articleURL.item(0).getTextContent(), Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:08:38.173

这是 AsyncTask 的教程 [http://droidapp.co.uk/?p=177](http://droidapp.co.uk/?p=177)

这是解析 RSS 的一个，但任何像你的代码这样的 XML 都将遵循相同的修改 [http://droidapp.co.uk/?p=166](http://droidapp.co.uk/?p=166)

# c# - 使用泛型进行铸造

> ID：10503031
> 
> 赞同：2
> 
> 时间：2012-05-08T17:00:30.087
> 
> 标签：c#, generics

尝试访问实现类上的接口属性时遇到问题。问题是，我在运行时只有特定的 (Cat) 类型，所以我的应用程序在尝试投射时会中断。

这是我所拥有的：

```
public class Animal {}
public class Cat : Animal {}

public interface IPetSitter {}
public interface IPetSitter<T> IPetSitter where T : Animal {
    T Pet { get; set; }
}

public class Kid { }

public class NeighborhoodKid : Kid, IPetSitter<Animal> {
    Animal Pet { get; set; }
}

// --- Implementation ---

// Kid Timmy is instantiated elsewhere
// Animal type "A" is passed in dynamically

if (Timmy is IPetSitter) {
    ((IPetSitter<A>)Timmy).Pet = new A();
} 
```

如果类型不匹配，此转换将出错。我很想做这样的事情：

```
public interface IPetSitter {
    object Pet { get; set; }
}

public interface IPetSitter<T> : IPetSitter where T : Animal {
    new T Pet { get; set; }
}

// --- Implementation ---

NeighborhoodKid Timmy = new NeighborhoodKid();
((IPetSitter)Timmy).Pet = new Cat(); 
```

但这会强制任何实现 IPetSitter 的东西同时具有 [object Pet] 和 [Cat Pet] 属性。

我会很感激任何想法。谢谢。

**更新：**我最初应该说得更清楚，但有时我会创建一个`Kid`类，有时会创建一个`NeighborhoodKid`类。这就是为什么我需要转换为`IPetSitter<T>`. 并非我创造的所有孩子都会坐着宠物。这听起来令人毛骨悚然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:05:56.180

Timmy 最终被初始化为 NeighborhoodKid。这意味着宠物，对他来说，就是动物。Timmy 是`IPetSitter<Animal>`，您不能将其转换为`IPetSitter<Cat>`。

不过，你可以反过来做，假设 Cat : Animal。

这个：

```
((IPetSitter<Animal>)Timmy).Pet = new Cat(); 
```

实际上工作只是因为 Timmy 真的是`IPetSitter<Animal>`，因为 NeighborhoodKid : `IPetSitter<Animal>`，所以你并没有真正对那个演员做任何事情 - 只是访问宠物财产。

之后的问题是无法访问 Pet 或将 Cat 放入其中 - 将 Timmy 投射到`IPetSitter<Cat>`这就是问题所在。你正在将它贬低为它不是的东西。

您始终可以向上转换，但只能向下转换为初始化对象的内容。

如果您希望 NeighborhoodKid 成为任何类型动物（包括动物本身）的 IPetSitter，您应该这样做：

```
public class NeighborhoodKid<T> : IPetSitter<T> where T : Animal
{
    ...
} 
```

这样，它是通用的，并且将其限制为是动物或从动物派生的东西，无论是直接还是间接。

不过，如果您将其初始化为`new NeighborhoodKid<Animal>()`，您将无法将其视为 (aka cast it to) `IPetSitter<Cat>`，因为它被初始化为`IPetSitter<Animal>`( 因为给 NeighborhoodKid 构造函数的通用 T 参数是 Animal ，并且被传递给IPeSitter 通用参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:08:39.180

问题是你定义了

```
public class NeighborhoodKid : IPetSitter<Animal>
{
    Animal IPetSitter<Animal>.Pet { get; set; }
} 
```

并不是

```
public class NeighborhoodKid : IPetSitter<Cat>
{
    Cat IPetSitter<Animal>.Pet { get; set; }
} 
```

或者

```
public class NeighborhoodKid<T> : IPetSitter<T> where T : Animal
{
    Cat IPetSitter<T>.Pet { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:29:31.143

除了它们在集合中的有用性之外，我并不是真正的泛型粉丝，这就是原因。您正在强制每个 NeighborhoodKid 绑定到一种特定类型的 Animal。如果蒂米可以看猫或狗怎么办？您要为每个实例创建不同的 Timmy 实例吗？

相反，我认为您在实例级别强制执行动物类型。例如（为了简洁起见，我截断了一些类型）：

```
public interface IAnimal {...}

public class Cat : IAnimal {...}

public interface IPetSitter
{
    IAnimal Pet { get; set; }
}

public class Kid : IPetSitter
{
    public Kid (params Type[] allowedPets) {
        _allowedPets = allowedPets;
    }

    readonly IEnumerable<Type> _allowedPets;

    IAnimal _pet;
    public IAnimal Pet 
    {
        get {
            return _pet;
        }
        set {
            if (!_allowedPets.Contains(value.GetType()) {
                throw new InvalidArgumentException("This instance does not support " + value.GetType().Name + ".");
            }
            _pet = value;
        }
    }
} 
```

如果您将强制执行留在实例级别，那么您不一定需要使用具体铸造来设置属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T17:25:47.907

为什么不只是`Timmy.Pet = new Cat();`？只要做到这一点`public`，你就会万事俱备：

```
public class NeighborhoodKid : Kid, IPetSitter<Animal>
{
   public Animal Pet { get; set; }
} 
```

如果您创建一个不继承自的 NeighborhoodKid `IPetSitter`，则 setter 将不可用。

```
public class LazyNeighborhoodKid : Kid
{
   // Nothing here, hes not a Pet Sitter, can access Pet
} 
```

# asp.net - Windows 身份验证模式 - 如何使其不要求提供凭据？

> ID：10503035
> 
> 赞同：0
> 
> 时间：2012-05-08T17:00:41.773
> 
> 标签：asp.net, iis, authentication

我已将我的 ASP.NET 网站配置为使用 windows auth（并禁用 annon auth），并设置了一些授权规则。网站部署在内网上，所有用户都有一个windows身份。

当用户导航到该网站时，会弹出典型的“Windows 安全”窗口，询问用户的身份。我想禁用它，因为用户已经使用域帐户登录。浏览器应提交当前身份，IIS 可以使用它进行身份验证。

有任何想法吗？

注意：我使用的是 IE，并且选中了 Enable Integrated Windows Authentication

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:23:35.327

在我以前见过这种症状的地方，我不得不将网站所在的 URL 明确添加到`Local Intranet`IE 的区域中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:13:17.327

这是在哪个浏览器中发生的？Internet Explorer 有一个选项明确定义浏览器是否尝试自动对用户进行身份验证。

您可以在工具 - Internet 选项 - 高级 - 启用集成 Windows 身份验证中找到它。

# sql-server - 无法在 Linq2Sql 中添加子实体

> ID：10503040
> 
> 赞同：1
> 
> 时间：2012-05-08T17:00:56.433
> 
> 标签：sql-server, linq, linq-to-sql

我有 2 个实体类型买家和买家订单。买家可以包含多个买家订单，买家订单列表可以由用户编辑。当我想添加一些 BuyerOrders 时，我调用方法：

```
private static void CreateOrdersForBuyer(Buyer buyer, int[] selectedLeadTypes)
{
    foreach (var order in selectedLeadTypes.Select(leadTypeId => new BuyerOrder
         {
             Buyer = buyer,
             OfferTypeID = (int) OfferTypes.Referral,
             Price = 1,
             RegistrationDate = DateTime.Now,
             StatusID = (int) BuyerOrderStatus.Pending,
             LeadtypeID = leadTypeId,
             Profit = 1
         }))

    {
        buyer.BuyerOrders.Add(order);
    }
} 
```

然后保存买家：

```
GenericRepository.Instance.Save(buyer); 
```

保存方法：

```
public virtual void Save<T>(T value) where T : class
{
    //LegalLeadsDataContext.Instance = null;
    LegalLeadsDataContext.Instance.GetTable<T>().Attach(value);
    LegalLeadsDataContext.Instance.Refresh(RefreshMode.KeepCurrentValues, value);
    LegalLeadsDataContext.Instance.SubmitChanges();
} 
```

之后，我在数据库中看不到新的 BuyerOrders。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:27:07.643

来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.linq.refreshmode.aspx)

**KeepCurrentValues**：强制 Refresh 方法将原始值与从数据库中检索到的值交换。不修改当前值。

鉴于`KeepChanges`

**KeepChanges**：强制 Refresh 方法保留已更改的当前值，但使用数据库值更新其他值。

此外，Attach 方法使用允许您指定“修改后”的重载。

因此，在您的代码中，您可能需要更改

```
public virtual void Save<T>(T value) where T : class
{
    //LegalLeadsDataContext.Instance = null;
    LegalLeadsDataContext.Instance.GetTable<T>().Attach(value, true);
    LegalLeadsDataContext.Instance.Refresh(RefreshMode.KeepChanges, value);
    LegalLeadsDataContext.Instance.SubmitChanges();
} 
```

# html - 为所有浏览器设计带有背景图像的 HTML 表单

> ID：10503042
> 
> 赞同：1
> 
> 时间：2012-05-08T17:01:04.957
> 
> 标签：html, css, image

我正在创建一个在背景中有图像的 HTML 表单。目前，它仅在某些浏览器中正确排列，而在其他浏览器中仅相差几个像素。

我认为下面的 CSS 会解决我的问题，它有帮助，但它并没有解决问题。

```
input {
width: 105px;    
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */    
-moz-box-sizing: border-box;    /* Firefox, other Gecko */    
box-sizing: border-box;         /* Opera/IE 8+ */ 
} 
```

此外，所有表单输入都是浮动的并带有边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:03:03.487

如果图像是静态大小，您可以考虑将其设置为容器的背景，然后`position:relative;`使用`position:absolute;`with `top:`、和进行定位和调整大小。`left:``right:``bottom:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:03:19.597

```
.searchBox{
  background-image:url('images/magnifying-glass.gif');
  background-repeat:no-repeat;
  padding-left:20px;
} 
```

现在，我们只需将输入标签分配给 CSS 类“searchBox”：

```
<input type="text" name="search" class="searchBox"> 
```

# ruby - 切换到目录时出错：“perl 版本 5.12.3 无法运行 /usr/bin/shasum”

> ID：10503044
> 
> 赞同：0
> 
> 时间：2012-05-08T17:01:09.833
> 
> 标签：ruby, macos, perl, rvm

我安装了 rvm 1.9.3，现在每当我切换到包含 a 的目录时`.rvmrc`，我都会收到一条 perl 错误消息：

```
~/example$ cd .. && cd example

perl version 5.12.3 can't run /usr/bin/shasum.  Try the alternative(s):

/usr/bin/shasum5.10.0 (uses perl 5.10.0)

Run "man perl" for more information about multiple version support in
Mac OS X. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:19:44.063

你可以试试这种肮脏的方法。这种方法将跳过这些检查并直接在二进制目录中使用 shasum

```
$ cd /usr/bin
$ ls shasum*
  shasum shasum5.10.0
$ mv /usr/bin/shasum /usr/bin/your_backup_shasum
$ ln -s shasum5.10.0 shasum 
```

# sql-server - sql server全索引搜索部分词和全词

> ID：10503046
> 
> 赞同：0
> 
> 时间：2012-05-08T17:01:13.107
> 
> 标签：sql-server, full-text-search

我有一张这样的表：
Key SearchTexts
KZ78 Aberdeen American Equity A Acc, KZ78, GB00B0XWN143, ,

我的sql查询是：

```
select * from dbunits.dbo.fxUnitSearch where CONTAINS(searchText, '"Aberdeen American Equity A Acc*"') 
```

但是，它不返回任何数据。如果我这样做：

```
select * from dbunits.dbo.fxUnitSearch where CONTAINS(searchText, '"Aberdeen American Equity A Acc"') 
```

然后它返回。我认为 'xxx*' 将进行部分搜索，这也适用于完全匹配？

我在这里做错了什么？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:13:22.867

您可以使用 FREETEXT 而不是 CONTAINS

```
select * from dbunits.dbo.fxUnitSearch where FREETEXT (searchText, '"Aberdeen American Equity A Acc*"') 
```

# sqlalchemy - 从列表中将列表元素分配给 sqlalchemy 中的数据库实体

> ID：10503051
> 
> 赞同：-1
> 
> 时间：2012-05-08T17:01:30.863
> 
> 标签：sqlalchemy, flask-sqlalchemy

我有一个简单的模型，如下所示，我有一个游戏列表，我希望所有玩家从游戏列表中分配一个且只有一个游戏。我将如何在 sqlalchemy 中做到这一点。截至目前，我正在使用flask sqlalchemy，但问题并不限于flask-sqlalchemy。

```
games = ['soccer', 'hockey', 'baseball', 'cricket', 'basketball']

from flask.ext.sqlalchemy import SQLAlchemy

class Gamer(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    team_name = db.Column(db.String(80))
    game_name = db.Column(db.String(80))
    game = db.Column(db.String(80), i want only games from the list of games) 
```

[在这里](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#setting-arguments-for-widgets)可以找到类似的 django 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:34:05.133

首先，您提到的 django 功能与您列出的模型并不真正*相似。*这样做的原因`Gamer`是一个`model`while`SimpleForm`是一个 UI `form`。

但是，以下是您可以验证的几种方法`model`：

1) 为 创建一个单独的选项卡`Games`，将值添加为行，并创建`N-to-1`从`Gamer`到 的关系`Game`。这是可读的，并将在业务和数据库级别验证您的数据

```
class Game(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80))

class Gamer(db.Model):
    # ...
    game_id = db.Column(db.Integer, ForeignKey('game.id'))
    game = relationship(Game) 
```

2）创建和使用一个[简单的验证器](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#simple-validators)

```
from sqlalchemy.orm import validates
class Gamer(db.Model):
    # ...
    @validates('game')
    def validate_game(self, key, address):
        assert address in games
        return address 
```

* * *

**edit-1：**或者，看看[The Enum Recipe](http://techspot.zzzeek.org/2011/01/14/the-enum-recipe/)。但这又是在模型级别上，而不是 UI 验证。

# c# - 是否有任何独立的 C#/.NET 调试器？

> ID：10503053
> 
> 赞同：9
> 
> 时间：2012-05-08T17:01:38.777
> 
> 标签：c#, .net, debugging

我想知道是否有任何可以在 Visual Studio 外部而不是在 IDE 内部运行的 Visual Studio 质量调试器？如果它是开源的，那就太好了，这样我就可以检查它是如何完成的，但这不是必需的，也不是免费的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:07:25.313

带有 SOS 扩展的 WinDBG

以下有 6 个系列视频，开始使用 WinDBG [http://channel9.msdn.com/Series/-NET-Debugging-Stater-Kit-for-the-Production-Environment](http://channel9.msdn.com/Series/-NET-Debugging-Stater-Kit-for-the-Production-Environment)

WinDBG 对于以下场景也很有用，其中 VS 调试器无效/不可用

1.  挂起
2.  崩溃
3.  死锁
4.  生产环境

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T17:13:41.087

您应该尝试[mdbg.exe](http://msdn.microsoft.com/en-us/library/ms229861.aspx)。

也可以在您机器上的 Windows SDK 目录中找到，例如 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools for VS2010。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T17:03:55.293

它不是完全“独立”的，但[SharpDevelop](http://www.icsharpcode.net/)可能有您正在寻找的东西：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T17:05:41.083

您不只是在寻找[DbgCLR](http://msdn.microsoft.com/en-us/library/7zxbks7z%28v=vs.80%29.aspx)吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T17:06:51.733

您还可以将[GDB](http://www.mono-project.com/Debugging)或[Mono 硬调试器](http://www.mono-project.com/Guide%3aDebugger)与 C#/.Net 代码一起使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T17:05:12.957

风吧

调试托管代码有点痛苦，但可以做到。

# javascript - 使用JS代码在幻灯片中垂直居中图像？

> ID：10503055
> 
> 赞同：0
> 
> 时间：2012-05-08T17:01:42.317
> 
> 标签：javascript, jquery, html, css

我有一个问题，我相信我需要用 javascript 解决，但不知道如何开始，所以希望 javascript 社区的人可以提供帮助。

基本上，以下代码允许我将 10 张图像加载到幻灯片轮播中。但是，这些图像是 600 像素 x 400 像素纵向或 400 像素 x 600 横向。我遇到的问题是横向图像与容器顶部垂直对齐。

我设法通过在我的 CSS 文件 image-P 和 image-L 中创建两个类来解决这个问题

image-L 有一个“padding-top:100px”，它成功地将横向图像垂直对齐在中心。

我想做的是让代码检查哪些图像是横向的，然后创建

```
return '<img src="Images/' + item.url + '" class="image-L" alt="" />'; 
```

和其他任何使用

```
return '<img src="Images/' + item.url + '" class="image-P" alt="" />'; 
```

提前谢谢了。

干杯罗布。

```
<script type="text/javascript">

    var mycarousel_itemList = [
        { url: "Image1.jpg" },
        { url: "Image2.jpg" },
        { url: "Image3.jpg" },
        { url: "Image4.jpg" },
        { url: "Image5.jpg" },
        { url: "Image6.jpg" },
        { url: "Image7.jpg" },
        { url: "Image8.jpg" },
        { url: "Image9.jpg" },
        { url: "Image10.jpg" }
    ];

    function mycarousel_itemLoadCallback(carousel, state) {
        for (var i = carousel.first; i <= carousel.last; i++) {
            if (carousel.has(i)) {
                continue;
            }

            if (i > mycarousel_itemList.length) {
                break;
            }

            carousel.add(i, mycarousel_getItemHTML(mycarousel_itemList[i - 1]));
        }
    };

    /**
    * Item html creation helper.
    */
    function mycarousel_getItemHTML(item) {
        return '<img src="Images/' + item.url + '" class="image-L" alt="" />';
    };

    jQuery(document).ready(function () {
        jQuery('#mycarousel').jcarousel({
            size: mycarousel_itemList.length,
            itemLoadCallback: { onBeforeAnimation: mycarousel_itemLoadCallback }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:03:49.030

您可以尝试使用 Image 类 [2] 将图像加载到 JavaScript [1] 中，并检查图像本身的高度/宽度以确定要应用哪个类，但如果您在加载时这样做会减慢速度。（我不知道浏览器是否会缓存该文件以供您稍后显示它时使用）。

似乎最好在将图像添加到文档/显示后等待并应用样式。

您可能可以使用 jQuery 来获取（浏览器）视图的高度和图像的高度，然后将图像绝对定位为居中。（如果您以后想使用不同的图像尺寸，那会更加灵活）。

1.  [http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317](http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317)
2.  [http://www.w3schools.com/jsref/dom_obj_image.asp](http://www.w3schools.com/jsref/dom_obj_image.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:58:40.727

我的解决方案：

```
 <script type="text/javascript">

    function preloader() {

        // counter     
        var i = 0;

        // create object     
        imageObj = new Image();

        // set image list     
        images = new Array();
        images[0] = "Images/image1.jpg"
        images[1] = "Images/image2.jpg"
        images[2] = "Images/image3.jpg"
        images[3] = "Images/image4.jpg"
        images[4] = "Images/image5.jpg"
        images[5] = "Images/image6.jpg"
        images[6] = "Images/image7.jpg"
        images[7] = "Images/image8.jpg"
        images[8] = "Images/image9.jpg"
        images[9] = "Images/image10.jpg"

        // start preloading     
        for (i = 0; i <= 9; i++) {
            imageObj.src = images[i];
        }
    }   
</script>

<script type="text/javascript">

    var mycarousel_itemList = [
{ url: "Images/Image1.jpg" },
{ url: "Images/Image2.jpg" },
{ url: "Images/Image3.jpg" },
{ url: "Images/Image4.jpg" },
{ url: "Images/Image5.jpg" },
{ url: "Images/Image6.jpg" },
{ url: "Images/Image7.jpg" },
{ url: "Images/Image8.jpg" },
{ url: "Images/Image9.jpg" },
{ url: "Images/Image10.jpg" }
];

    function mycarousel_itemLoadCallback(carousel, state) {
        for (var i = carousel.first; i <= carousel.last; i++) {
            if (carousel.has(i)) {
                continue;
            }

            if (i > mycarousel_itemList.length) {
                break;
            }

            carousel.add(i, mycarousel_getItemHTML(mycarousel_itemList[i - 1]));
        }
    };

    /**
    * Item html creation helper.
    */
    function mycarousel_getItemHTML(item) {
        return '<img src="' + item.url + '" class="image" alt="" />';
    };

    jQuery(document).ready(function () {
        jQuery('#mycarousel').jcarousel({
            size: mycarousel_itemList.length,
            itemLoadCallback: { onBeforeAnimation: mycarousel_itemLoadCallback }
        });
    });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T10:24:45.253

```
<%@ Page Title="" Language="C#" MasterPageFile="~/rwmSite.master" AutoEventWireup="true"
    CodeFile="Portfolio.aspx.cs" Inherits="Portfolio" %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="Server">
    <link href="../Styles/Site.css" rel="stylesheet" type="text/css" />
    <script src="../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.jcarousel.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        var mycarousel_itemList = [
            { url: "Image1.jpg" },
            { url: "Image2.jpg" },
            { url: "Image3.jpg" },
            { url: "Image4.jpg" },
            { url: "Image5.jpg" },
            { url: "Image6.jpg" },
            { url: "Image7.jpg" },
            { url: "Image8.jpg" },
            { url: "Image9.jpg" },
            { url: "Image10.jpg"}];

        function mycarousel_itemLoadCallback(carousel, state) {
            for (var i = carousel.first; i <= carousel.last; i++) {
                if (carousel.has(i)) {
                    continue;
                }

                if (i > mycarousel_itemList.length) {
                    break;
                }

                carousel.add(i, mycarousel_getItemHTML(mycarousel_itemList[i - 1]));
            }
        };

        /**
        * Item html creation helper.
        */
        function mycarousel_getItemHTML(item) {

            var x = new Image(); x.src = item.url;
            while (!x.complete)

                if (x.height <= 400)

                    return '<img src="../Images/' + item.url + '" class="image-L" alt="" />';
                else
                    return '<img src="../Images/' + item.url + '" class="image-P" alt="" />';
        };

        jQuery(document).ready(function () {
            jQuery('#mycarousel').jcarousel({
                size: mycarousel_itemList.length,
                itemLoadCallback: { onBeforeAnimation: mycarousel_itemLoadCallback }
            });
        });
    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
    <div id="wrap" align="center">
        <div class=" jcarousel-skin-tango">
            <div class="jcarousel-container jcarousel-container-horizontal">
                <div class="jcarousel-clip jcarousel-clip-horizontal">
                    <ul id="mycarousel" class="jcarousel-list jcarousel-list-horizontal">
                    </ul>
                </div>
                <div class="jcarousel-prev jcarousel-prev-horizontal">
                </div>
                <div class="jcarousel-next jcarousel-next-horizontal">
                </div>
            </div>
        </div>
    </div>
</asp:Content> 
```

# kml - 通过 KML 关闭国家/地区边界

> ID：10503057
> 
> 赞同：1
> 
> 时间：2012-05-08T17:02:08.510
> 
> 标签：kml, google-earth, google-earth-plugin

Google 地球默认设置为“边界和标签”（即显示国家轮廓）上。我有想要关闭边框的 KMZ/KML 文件。我搜索了描述 KML 的文档，但找不到与图层相关的任何内容。

我还尝试在打开和不打开边框的情况下保存 KMZ 文件，它们是相同的。

有人知道如何通过 KML API 访问图层吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:59:23.183

You can't yet turn on/off layers in Google Earth directly via KML. Currently it's a manual action done by user of Google Earth.

However, there is currently a directive to turn on/off historical imagery, streetview, and sun light modes. [https://developers.google.com/kml/documentation/kmlreference#gxvieweroptions](https://developers.google.com/kml/documentation/kmlreference#gxvieweroptions)

But you can turn the layers on/off easily via the GE API:

To enable a specific layer:

```
 ge.getLayerRoot().enableLayerById(ge.LAYER_NAME, true) 
```

To disable a layer:

```
 ge.getLayerRoot().enableLayerById(ge.LAYER_NAME, false); 
```

Reference: [https://developers.google.com/earth/documentation/layers#layers](https://developers.google.com/earth/documentation/layers#layers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T10:38:07.777

API 没有为 ge.LAYER_BORDERS 中的各个层定义常量，但是如果您查看 KML 文件，每个“文件夹”节点都有一个 ID，因此，正如 JasonM1 所说，您可以为每个想要的层使用 enableLayerById关闭，已打开顶部包含节点（在本例中为 ge.LAYER_BORDERS）。

这是我用来通过 API 清理“边框和标签”层的代码：

```
ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, true);
ge.getLayerRoot().enableLayerById("530286de-c7b3-11dc-938c-dd553d8c9902", false);       // internation borders
ge.getLayerRoot().enableLayerById("cfdff130-394a-11e0-98fa-dd5743f1dfd8", false);       // coastline
ge.getLayerRoot().enableLayerById("533444c6-c7b3-11dc-b02e-dd553d8c9902", false);       // 1st level borders too
ge.getLayerRoot().enableLayerById("534ab67a-c7b3-11dc-a2a7-dd553d8c9902", false);       // 2nd level borders too
ge.getLayerRoot().enableLayerById("e2334aaa-e853-11df-9192-77880e18aa7d", false);       // geographic features 
```

*ps 我现在似乎找不到“borders and labels.kml”文件的位置，但它可能就在某个地方，将继续寻找......*

# php - 为什么 PHP 刷新并不总是有效，页面 1/5 次未正确加载？

> ID：10503059
> 
> 赞同：5
> 
> 时间：2012-05-08T17:02:15.780
> 
> 标签：php, apache

一个大型 php 脚本使用 flush 将生成的 html 的一部分发送到浏览器，同时它正在执行需要 appr 的脚本的较大部分。20 秒。

刷新后正在执行的脚本部分非常大，并且从服务器储备中占用了大量资源（90% cpu）。

5 次页面保持空白（白色），这意味着刷新没有到达发送显示页面正在加载的图像。当程序完成时，页面也保持空白（浏览器指示它仍在加载）并且应该将整个页面发送到浏览器。

显着：当我按下后退按钮时，整个页面会显示（在整个脚本执行后应该已经加载到浏览器中）一秒钟，然后浏览器返回上一页。

所有其他 4 次页面加载良好。php 脚本的输入对于所有 5 次都是相同的。

我的 .htacces 文件中有这些设置：

```
addhandler x-httpd-php5-cgi .php5 
addhandler x-httpd-php5-cgi .php5
addhandler x-httpd-php5-cgi .php5 
Header Set Cache-Control "max-age=0, no-store" 
```

这是将生成的代码刷新到浏览器的语句：

```
print str_pad('',4096)."\n";
ob_flush();
flush(); 
```

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:01:33.220

```
print str_pad('',4096)."\n"; 
```

你注意到你在重复一个空字符串吗？也许你的意思是

```
print str_pad(' ',4096)."\n"; 
```

该声明的目的是因为某些 Web 浏览器在收到一定数量的字节或响应完成之前不会呈现页面，以先到者为准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:06:47.293

你只能提示：`flush()`将它发送到 apache/webserver，它可以缓冲/等待，它使用任意数量的代理发送到网络，这些代理可以缓冲/等待，最终在你的浏览器中结束，它也可以决定缓冲/等待。如果您不想处理所有这些令人头疼的问题，请使用异步方法。Gearman 让它变得非常容易，但当然不是绝对必要的。

# vb.net - 如何在 .net framework 4 中将字符串转换为 base64

> ID：10503061
> 
> 赞同：8
> 
> 时间：2012-05-08T17:02:26.587
> 
> 标签：vb.net, string

因此，我一直在互联网上寻找将常规文本（字符串）转换为 base64 字符串的方法，并找到了许多解决方案。我正在尝试使用：

```
Dim byt As Byte() = System.Text.Encoding.UTF8.GetBytes(TextBox1.Text)
TextBox2.Text = convert.ToBase64String(byt) 
```

但它最终会出现一个错误说

> “ToBase64String”不是“System.Windows.Forms.Timer”的成员。

我该怎么做才能解决这个问题？或者，如果有更好的编码方式，请提供帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-08T17:09:06.077

使用`System.Convert.ToBase64String(byt)`. 否则，计时器将被选为最里面的匹配名称。
[顺便说一句，这不是计时器的最佳名称。]

# wpf - WPF：如何将单个文本框绑定到多个数据源

> ID：10503067
> 
> 赞同：0
> 
> 时间：2012-05-08T17:02:47.757
> 
> 标签：wpf

如何将单个文本框绑定到多个数据源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:20:36.210

使用[多值转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)->[将一个元素绑定到两个源](https://stackoverflow.com/questions/260439/wpf-bind-an-element-to-two-sources)

# windows-phone-7 - 检测 Wp7 上的内存泄漏工具

> ID：10503069
> 
> 赞同：2
> 
> 时间：2012-05-08T17:02:52.973
> 
> 标签：windows-phone-7, memory-leaks, windows-phone

有谁知道在 Windows phone 7.5 平台上检测内存泄漏的好工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:21:57.130

内置的分析工具可能是最好的起点。

选择：调试 > 启动 Windows Phone 性能分析
并选择“内存”选项

这将帮助您查看任何内存峰值和泄漏，并帮助您深入了解原因。

请参阅
[http://msdn.microsoft.com/en-us/library/hh202934(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202934(v=vs.92).aspx)
和
[http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/02/01/ memory-profiling-for-application-performance.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/02/01/memory-profiling-for-application-performance.aspx)
以获取有关使用该工具的更多指导

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T15:35:48.310

我已经开始了一系列关于这个工具使用的博客文章：-

[http://smartmobidevice.blogspot.co.uk/2012/04/windows-phone-performance-analysis-tool.html](http://smartmobidevice.blogspot.co.uk/2012/04/windows-phone-performance-analysis-tool.html)

您可能还会发现以下博客文章很有用：-

[http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/05/10/memory-profiling-the-heap-summary-view.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/05/10/memory-profiling-the-heap-summary-view.aspx)

# gwt - 当 SectionStackSection 中的动画不止一项时，动画在 SectionStack 中不起作用

> ID：10503070
> 
> 赞同：0
> 
> 时间：2012-05-08T17:02:53.313
> 
> 标签：gwt, smartgwt

我使用此代码

```
    SectionStack sectionStack = new SectionStack();
    sectionStack.setVisibilityMode(VisibilityMode.MULTIPLE);
    sectionStack.setWidth100();
    sectionStack.addSection(createGenerallSettingsSection());
    sectionStack.addSection(createIntegrationSettingsSection());
    sectionStack.setAnimateSections(true);

`private SectionStackSection createGenerallSettingsSection() {
    SectionStackSection section = new SectionStackSection("General settings");
    section.setExpanded(true);
    section.setResizeable(false);
    section.setItems(getTimeoutField().view());
    return section;
}

private SectionStackSection createIntegrationSettingsSection() {
    SectionStackSection section = new SectionStackSection("Integration");
    section.setExpanded(true);
    section.setResizeable(false);
    section.setItems(getUrl().view(), getUser().view(), getPassword().view());
    return section;
}` 

然后动画在“常规设置”部分工作，而不在“集成”部分工作。也许有人知道如何解决这个问题？

方法 view() 返回 Canvas 对象。SmartGWT 版本 - 2.5

```

# c++ - 减少 GPU 和 CPU 之间的带宽（发送原始数据或先预计算）

> ID：10503071
> 
> 赞同：2
> 
> 时间：2012-05-08T17:02:54.657
> 
> 标签：c++, gpu, bandwidth, data-transfer, shader

好的，所以我只是想找出减少 GPU 和 CPU 之间带宽的最佳方法。

粒子系统。

我是否应该预先计算 CPU 上的大部分内容并将其发送到 GPU，这包括位置、旋转、速度、alpha 计算和随机数等内容。

或者我应该在着色器中尽可能多地使用几何着色器。

我的问题是，我编写的那种应用程序必须将一些变量发送到着色器，例如，运行时的用户将选择发射器位置和速度以及更多。我不确定如何解决的事情是“如果用户想要一个随机速度并给出一个最小值和最大值来选择随机值，这个随机值是否应该在 CPU 上计算并发送作为 GPU 的单个值，还是应该将最小值和最大值都发送到 GPU 并在 GPU 中使用随机函数生成器来执行此操作？非常感谢有关减少带宽和优化的任何评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T01:56:21.550

> 我是否应该预先计算 CPU 上的大部分内容并将其发送到 GPU，这包括位置、旋转、速度、alpha 计算和随机数等内容。
> 
> 或者我应该在着色器中尽可能多地使用几何着色器。

无法回答。花费过多的 CPU 时间，性能会下降。花费过多的 GPU 时间，性能也会下降。传输太多数据，性能会下降。所以，不要试图猜测（我不知道你在写什么应用程序，你的目标硬件是什么等等。地狱，你甚至没有指定你的目标 api 和平台）测量/配置文件并选择最佳方法。**PROFILE**而不是试图猜测性能。有 AQTime 7 Standard、gprof 和[NVPerfKit](http://developer.nvidia.com/nvidia-perfkit)（以及许多其他工具）。

您的应用程序中是否真的存在性能问题？如果你没有任何性能问题，那么不要做任何事情。你有，比如说每帧一千万个粒子吗？如果没有，也没什么理由担心，因为 7 年前 600mhz cpu 能够轻松处理数千个。另一方面，如果你有动态 3d 环境，并且粒子必须与之交互（反弹），那么在 GPU 上完成这一切将更加困难。

无论如何，对我来说，听起来你不需要优化任何东西，也没有实际需要优化。所以最好的办法是专注于其他一些事情。

但是，无论如何，请确保您使用正确的方式来传输经常更新的“动态”数据。在 directX 中，这意味着使用带有 D3DLOCK_DISCARD|D3DLOCK_NOOVERWRITE 的动态只写顶点缓冲区。对于 OpenGL，这可能意味着使用[具有 DRAW 访问权限的 STREAM 或 DYNAMIC 缓冲区数据](http://www.opengl.org/sdk/docs/man/xhtml/glBufferData.xml)。这应该足以避免重大的性能损失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T01:43:38.123

对此没有唯一的正确答案。以下是一些可以帮助您下​​定决心的事情：

1.  您确定通过总线的数据量高到足以成为问题吗？您可能想要进行数学计算，看看每秒有多少数据与目标硬件上可用的数据。
2.  应用程序是否可能受 CPU 限制或 GPU 限制？如果它已经受 GPU 限制，那么进一步加载它是没有意义的。
3.  粒子系统很容易在 CPU 上实现，并且可以在任何硬件上运行。支持非平凡粒子系统的 GPU 实现将更加复杂，并且仅限于支持所需功能的硬件（例如流输出和提供访问它的 API）。
4.  考虑一种混合方法。您能否将粒子系统拆分为在 GPU 上实现的低复杂度、高带宽粒子系统和在 CPU 上实现的高复杂度、低带宽系统？

综上所述，我想我会从一个 CPU 实现开始，如果证明有必要和可行的话，我会将一些工作转移到 GPU 上。

# python - python 和 py2app mac osx 10.7

> ID：10503072
> 
> 赞同：0
> 
> 时间：2012-05-08T17:02:55.203
> 
> 标签：python, macos, py2app

我想通过 Py2app 创建 .app 应用程序，我通过终端在我的 mac os x lion 上安装了 Py2app 并复制“gtkapp.py”（我使用 PyGTK 的应用程序的名称）和“setup.py”但是当我运行setup.py 得到这个错误：

```
from setuptools import setup 
```

和

```
ImportError: cannot import name setup 
```

什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:09:06.207

确保 py2app 二进制文件在您的路径中。解决此问题的一种简单方法是使用[MacPorts](http://www.macports.org/)安装 py2app。

# ios - 如何过滤iOS中的部分路径？

> ID：10503075
> 
> 赞同：0
> 
> 时间：2012-05-08T17:02:59.790
> 
> 标签：ios, path, explode, filepath

我们发布了一个应用程序，它不是为开发人员发布而保留的。我们的客户发布了应用程序，而不是等待我们为新版本更改后端。现在，这会导致问题开始的本地 CoreData 存储中出现错误信息。

似乎有一个字段保存了 Documents 目录中文件的本地路径，例如：

```
/var/mobile/Applications/9EE88C79-F060-4EE....C0A/Documents/core23/thumb.png 
```

应用程序在本地设备上所在的文件夹在应用程序更新期间发生变化（看起来像！？）。现在我们需要过滤此字段以将之前的路径更改为`/Documents/`应用程序在本地设备上安装的实际路径。

有人有一个方便的解决方案吗？任何帮助表示赞赏。

MadMaxApp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:28:39.133

`-[NSString pathComponents]`返回所有路径组件的数组。在错误的路径字符串上调用它并从结果数组中建立备份。

`-[NSString componentsSeparatedByString:(NSString*)]`如果`@"/"`为分隔符字符串传递，也可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:10:06.067

您不能对这条路径进行硬编码。要获取文档目录路径，请使用以下代码：

```
-(NSString *)documentsDirectoryPath {
      NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
      NSString *documentsDirectoryPath = [paths objectAtIndex:0];
      return documentsDirectoryPath;
} 
```

# xilinx - 通过 Xilinx XPS 创建的嵌入式系统的系统报告

> ID：10503080
> 
> 赞同：0
> 
> 时间：2012-05-08T17:03:15.797
> 
> 标签：xilinx

我正在做阴影检测项目。它使用 Xilinx XPS 工具来创建嵌入式系统。一旦创建了系统，我有什么方法可以检查产生了多少逻辑门以及它们是如何配置的。是否有任何选项可以在 XPS 工具中检索此信息..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:53:53.037

生成的报告文件告诉您使用了多少 LUT 和触发器等。

没有直接等效于实际门，因为每个 LUT 会根据其在设计中的实际功能而有所不同

# assembly - masm 程序生成的 .lst 文件的内容是什么？

> ID：10503081
> 
> 赞同：5
> 
> 时间：2012-05-08T17:03:17.280
> 
> 标签：assembly, masm

在使用 masm .lst 运行汇编语言程序时，会生成文件。
这个 .lst 文件的确切内容是什么？为什么这种转换很重要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T15:20:33.440

作为另一只恐龙，我认为我们应该将 Hans Passant 的评论推广为答案。

> 回到过去，汇编程序员没有非常好的调试器或允许同时调试和查看代码的操作系统。因此，为打印机格式化的列表文件是在对代码进行故障排除时查看内容的好方法。顺便说一句，纸张消耗量是惊人的。– Hans Passant 5 月 8 日 17:28

使用纸和铅笔进行编程是一门失传的艺术。很多人都没有错过。

# database - couchdb 多个数据库

> ID：10503089
> 
> 赞同：10
> 
> 时间：2012-05-08T17:04:02.363
> 
> 标签：database, couchdb

我习惯使用 mysql，但对于我的下一个系列项目，CouchDB (NoSQL) 似乎是要走的路，基本上是为了避免 mysql 中的 EAV 并接受它必须提供的所有很酷的特性。

经过大量调查和阅读文档等，我似乎不太了解一件事。

假设我在我的服务器上托管了三个 Web 应用程序，因此相应地需要三个数据库。例如，一个是带有产品和发票表格的网上商店，一个是带有文章和评论表格的博客，另一个是带有游戏统计表格的基于网络的游戏（显然是简化了）。

因此，我在一个 mysql 安装上托管多个站点，并且我在服务器上运行的每个应用程序都有自己的数据库，其中包含表、字段和内容。

现在，对于 CouchDb，我想做同样的事情。问题似乎是在 CouchDb 中创建数据库，更类似于在 mysql 中创建表。即，我为我的博客创建名为“评论”、“文章”等的数据库，并在其中为每篇文章创建一个文档或为每个评论创建一个文档。

所以我的问题是：如何在一个 CouchDB 安装上将我的数据与多个 Web 应用程序分开？

我认为我在这里做的事情根本上是错误的，但希望你们中的一个人可以帮助我走上正轨。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:46:59.577

在 CouchDB 中，没有明确需要将不相关的数据分离到多个数据库中。如果您正确构建了文档和视图，则查询中只会显示相关数据。

如果您决定将数据分离到单独的数据库中，只需创建一个新数据库即可。

```
$ curl -X PUT http://localhost:5984/somedb
{"ok":true} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-14T17:35:47.180

从我使用 couchdb 的经验来看，将不相关的数据分离到不同的数据库中对于性能**非常重要**，而且也是不费吹灰之力的。视图生成是 couchdb 的一个痛苦部分。每次更新数据库时，都必须重新生成视图（将它们视为传统关系 sql 数据库中的索引）。这涉及迭代*数据库中的**每个*文档。因此，如果您有 200 万个 A 类型的文档，并且您有 300 个 B 类型的文档。并且您需要重新生成查询类型 B 的视图，那么在视图生成期间将执行所有 200 万和 30000 次枚举，它将需要很长时间（它甚至可能会导致读取超时）。

 *因此，在更新视图（如何在 couchdb 中查询，一个明显重要且不可避免的特性）时，拥有多个数据库是不费吹灰之力的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-25T14:48:54.560

@Zombies 关于性能是非常正确的。CouchDB 不适合在单个数据库中处理大量文档。如果您需要执行，比方说，超过 5000 个文档，[MongoDB](https://www.mongodb.org/)将胜过 CouchDB。

CouchDB 中的视图是必不可少的，但很痛苦，用于构建查询的 JavaScript 选项有限（甚至不要考虑文档引用或嵌套对象）。考虑为不同的文档设置多个数据库是一个很好的解决方案。有些人会说这样的话：

> CouchDB 是一个 NoSQL 数据库，因此您不需要对文档进行排序，也不需要使用视图以外的其他方式过滤它们。NoSQL 数据库的核心功能是能够存储无方案文档 [...]

**当您需要**找到性能**和**查询的解决方法时，我发现它非常烦人。如果允许您拆分数据，您不应该介意创建几个数据库来分离您的数据，它仍将位于“*单个 CouchDB 安装*”上。不要忘记 CouchDB 适合**小型数据库**。数据库越小，查询速度越快，性能就越好。

（不知道有没有英文错误，如有请见谅）

* * *

**编辑** 像[ArangoDB](https://www.arangodb.com/)这样的一些公司在他们自己、MongoDB 和 CouchDB 之间进行了比较，这证实了我关于文档数量的说法。这是结果：

[![图形比较](../Images/440bd2fd4b3e56299c23a4ebab5361e7.png)](https://i.stack.imgur.com/WXvG1.png)

他们的网站上有很多其他资源。另一方面，这句话是我个人的经验，我在实习时用我在 Internet 上找到的一个 .PHP 基准测试软件对它们进行了基准测试。结果如下：

[![在此处输入图像描述](../Images/acbcd8f6b7baabfb43a2e3bbb211dc64.png)](https://i.stack.imgur.com/pC8rT.jpg)*

# php - 如果转发了，则更新包含 retweet_count 的 MySQL 行

> ID：10503090
> 
> 赞同：0
> 
> 时间：2012-05-08T17:04:03.140
> 
> 标签：php, mysql, twitter, on-duplicate-key

我一直在使用 Twitter API 和 PHP 使用以下函数将推文记录到 MySQL 数据库中：

```
 function saveTweets($screen_name) {
global $link;

$screen_name = dbEscape(strtolower(trim($screen_name)));
if (!$screen_name) { echo "<p><strong>Error: No screen name declared.</strong></p>\n"; return false; }

$row = dbGetRow("SELECT `id` FROM `twitter` WHERE `screen_name`='$screen_name' ORDER BY `id` DESC LIMIT 1");
$last_id = $row['id'];

$url = "http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=$screen_name&count=1500&include_rts=true" ;
if ($last_id) { $url .= "&since_id=$last_id" ; }
$ch = curl_init($url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);
$xml = curl_exec ($ch);
curl_close ($ch);

$affected = 0;
$twelement = new SimpleXMLElement($xml);
foreach ($twelement->status as $status) {
    $text = dbEscape(trim($status->text));
    $time = strtotime($status->created_at);
    $id = $status->id;
    $retweet_count = $status->retweet_count;
 dbQuery("INSERT INTO `twitter`        (`id`,`screen_name`,`time`,`text`,`hidden`,`retweet_count`) VALUES     ('$id','$screen_name','$time','$text','n','$retweet_count') ON DUPLICATE KEY UPDATE $row[retweet_count] = VALUES('$retweet_count')");
    $affected = $affected + dbAffectedRows();
}

return "<p>".number_format($affected)." new tweets from $screen_name saved.</p>\n" ;
}

 echo saveTweets('Phil');
?> 
```

这一切都可以记录推文，时间和发布者，但是虽然 retweet_count 将在输入时记录 - 所以如果我在写推文时记录它可能是 0 - 我无法得到

```
 ON DUPLICATE KEY UPDATE $row[retweet_count] = VALUES('$retweet_count')"); 
```

以便当我稍后运行查询时，如果推文已被转发，它会更新该行。

retweet_count 的大多数条目都是相同的（0 或 1），所以我不能将 retweet_count 设置为 UNIQUE，尽管主键 - id - 应该是唯一的，而且我还有一个自动递增的列 id - colid - 虽然那不是实际上是从 twitter api 中提取的，因此它可以是唯一的，并且设置为 UNIQUE。

是否有更好的函数来更新已经包含 int 的行？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:20:26.990

你的语法不正确。它应该只是：

```
ON DUPLICATE KEY UPDATE column_name = new_value, ... 
```

那是：

```
ON DUPLICATE KEY UPDATE `retweet_count` = '$retweet_count' 
```

或者，如果您真的*想*使用该[`VALUES()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_values)函数（在您的情况下不是特别有用 - 它仅在使用单个`INSERT`语句插入多行时才有用）：

```
ON DUPLICATE KEY UPDATE `retweet_count` = VALUES(`retweet_count`) 
```

# iphone - Facebook SSO 显示错误的语言

> ID：10503092
> 
> 赞同：2
> 
> 时间：2012-05-08T17:04:12.083
> 
> 标签：iphone, ios, facebook, facebook-graph-api, sharekit

我为视频共享实现了 ShareKit 2.0 fork [https://github.com/ShareKit/ShareKit/pull/212](https://github.com/ShareKit/ShareKit/pull/212)

当用户第一次登录 facebook 时，它会切换到 Facebook，拉取正确的应用程序信息，并且都是英文的，但在右上角，而不是阅读登录的按钮，它显示 Ingia。如果这是 Facebook 问题或 iOS 中的一些奇怪的东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:54:03.850

This appears to be a Facebook issue:

[https://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383](https://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383)

# asp.net-mvc-3 - 使用 MVC 3 按下拉值搜索

> ID：10503097
> 
> 赞同：0
> 
> 时间：2012-05-08T17:04:24.747
> 
> 标签：asp.net-mvc-3, search, drop-down-menu

我正在尝试创建一个搜索功能，允许用户搜索由下拉列表指定的列，我已经能够使搜索工作，但只能通过使用特定列和 contains 方法。任何人都可以帮忙吗？

下面我包含了我的控制器和我的视图，如果您需要任何其他代码，请告诉我。感谢您的时间和帮助！

我几乎肯定这是我必须更改以使用下拉列表而不是特定列进行搜索的代码。

```
if (!String.IsNullOrEmpty(searchString))
            {
                IAMP = IAMP.Where(p => p.PA.ToUpper().Contains(searchString.ToUpper())); 
            } 
```

## 控制器

```
 public class PaController : Controller
    {
        PaEntities db = new PaEntities();

        // Index Method 
        public ViewResult Index(string CurrentField, string sortField, string sortOrder, string currentFilter, string searchString, int? page, string Versions, string VPS, string Directors, string IAMP_SEARCH)
        {
            ViewBag.CurrentOrder = sortOrder = String.IsNullOrEmpty(sortOrder) ? "asc" : sortOrder; // Provides the order to sort
            ViewBag.CurrentField = sortField = String.IsNullOrEmpty(sortField) ? "IAMP_PK" : sortField; // Provides the field to sort

            var IAMP = from p in db.iamp_mapping select p;
            var ISER = from s in db.iamp_search_string select s;

            if (Versions != null && Versions != String.Empty) // Version Dropdown Sort Function     
            {
                IAMP = IAMP.Where(v => v.VERSION.Contains(Versions));
            }

            var VIAMP = from x in db.version_number select x;
            var VPIAMP = from v in db.vp_table select v;
            var DIAMP = from d in db.director_table select d;

            ViewData["SelectedVersion"] = Versions;
            ViewData["Versions"] = new SelectList(VIAMP.Select(x => x.VERSION));
            ViewData["VPS"] = new SelectList(VPIAMP.Select(x => x.VP));
            ViewData["Directors"] = new SelectList(DIAMP.Select(x => x.DIRECTOR));
            ViewData["currentFilter"] = currentFilter;
            ViewData["IAMP_SEARCH"] = IAMP_SEARCH;
            ViewData["IAMP_SEARCH"] = new SelectList(ISER.Select(x => x.IAMP_SEARCH));

            if (Request.HttpMethod == "GET") {

                searchString = currentFilter; //sets the currentFilter equal to Searchstring
                IAMP_SEARCH = sortField;
            }
            else {
                page = 1;                   // defaults to page 1
            }
            ViewBag.CurrentFilter = searchString; // Provides the view with the current filter string

            if (!String.IsNullOrEmpty(searchString))
            {
                IAMP = IAMP.Where(p => p.PA.ToUpper().Contains(searchString.ToUpper())); 
            }

            switch (sortField) {

                default: IAMP = sortOrder == "asc" ? IAMP.OrderBy(p => p.PA) : IAMP.OrderByDescending(p => p.PA); break;
                case "VERSION": IAMP = sortOrder == "asc"? IAMP.OrderBy(p => p.VERSION) : IAMP.OrderByDescending(p => p.VERSION); break;
                case "MAJOR_PROGRAM": IAMP = sortOrder == "asc" ? IAMP.OrderBy(p => p.MAJOR_PROGRAM) : IAMP.OrderByDescending(p => p.MAJOR_PROGRAM); break;
                case "INVESTMENT_AREA": IAMP = sortOrder == "asc" ? IAMP.OrderBy(p => p.INVESTMENT_AREA) : IAMP.OrderByDescending(p => p.INVESTMENT_AREA); break;
                case "VP": IAMP = sortOrder == "asc" ? IAMP.OrderBy(p => p.VP) : IAMP.OrderByDescending(p => p.VP); break;
                case "DIRECTOR": IAMP = sortOrder == "asc" ? IAMP.OrderBy(p => p.DIRECTOR) : IAMP.OrderByDescending(p => p.DIRECTOR); break;
            }

            int pageSize = 15; // number of records shown on page view
            int pageNumber = (page ?? 1); // start page number

            return View(IAMP.ToPagedList(pageNumber, pageSize)); // uses pagedList method to return correct page values
        } 
```

## 看法

```
@model PagedList.IPagedList<DBFirstMVC.Models.iamp_mapping>

@{
    ViewBag.Title = "Index";

}

@using PagedList;

<h2 class="corporate sifr">PA Mapping</h2>

@using (Html.BeginForm())
{
    <p>
        Show Version: @Html.DropDownList("Versions","All")
        <input type = "submit" value = "Go" />
    </p>

}

@using (Html.BeginForm())
{
    <div class="lefty">
        Find by @Html.DropDownList("IAMP_SEARCH","All"): @Html.TextBox("SearchString")
        <input type = "submit" value = "Search" />
    </div>

}

<div class="righty">
    @Html.ActionLink("Add a new PA to the database", "Create")
</div>
<br /><br />

<div>
    <div class="lefty">
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    of @Model.PageCount
    &nbsp;&nbsp;&nbsp;&nbsp;
    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion   })
        @Html.Raw(" ");
        @Html.ActionLink("< Prev", "", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
    }
    else
    {
        @:<<
        @Html.Raw(" ");
        @:< Prev
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Next >", "", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion  })
        @Html.Raw(" ");
        @Html.ActionLink(">>", "", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
    }
    else
    {
        @:Next >
        @Html.Raw(" ")
        @:>>
    }
    </div>
    <div class="righty">
    Showing Records @Model.FirstItemOnPage to @Model.LastItemOnPage from @Model.TotalItemCount
    </div>
</div>

<table>
    <tr>
        <th>
            @Html.ActionLink("PA", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "PA", Versions = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "PA"){ <img src="../../Images/ico_tablesortoffset_asc.gif" alt = "table sort arrow asc"/>}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "PA"){ <img src="../../Images/ico_tablesortoffset_desc.gif" alt = "table sort arrow desc"/>}                                                                                           
        </th>
        <th>        
            @Html.ActionLink("MAJOR PROGRAM", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "MAJOR_PROGRAM", Versions = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "MAJOR_PROGRAM"){ <img src="../../Images/ico_tablesortoffset_asc.gif" alt = "table sort arrow asc" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "MAJOR_PROGRAM"){ <img src="../../Images/ico_tablesortoffset_desc.gif" alt = "table sort arrow desc"/>}           
        </th>
        <th>
            @Html.ActionLink("INVESTMENT AREA", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "INVESTMENT_AREA", Versions = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "INVESTMENT_AREA"){ <img src="../../Images/ico_tablesortoffset_asc.gif" alt = "table sort arrow asc"/>}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "INVESTMENT_AREA"){ <img src="../../Images/ico_tablesortoffset_desc.gif" alt = "table sort arrow desc" />}   
        </th>
        <th>
            @Html.ActionLink("Version", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "VERSION", Versions = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "VERSION"){ <img src="../../Images/ico_tablesortoffset_asc.gif" alt = "table sort arrow asc" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "VERSION"){ <img src="../../Images/ico_tablesortoffset_desc.gif" alt = "table sort arrow desc"/>}   
        </th>
        <th>
            @Html.ActionLink("VP", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "VP", Versions = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "VP"){ <img src="../../Images/ico_tablesortoffset_asc.gif" alt = "table sort arrow asc"/>}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "VP"){ <img src="../../Images/ico_tablesortoffset_desc.gif" alt = "table sort arrow desc"/>}   
        </th>
        <th>
            @Html.ActionLink("DIRECTOR", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "DIRECTOR", Versions = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "DIRECTOR"){ <img src="../../Images/ico_tablesortoffset_asc.gif" alt = "table sort arrow asc"/>}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "DIRECTOR"){ <img src="../../Images/ico_tablesortoffset_desc.gif" alt = "table sort arrow desc"/>}   
        </th>       
        <th></th>
    </tr>
@{
    var row_class = "odd";
}

@foreach (var item in Model) {
     row_class = row_class == "odd"? "even" : "odd";    
    <tr class="@row_class">
        <td>
            @Html.DisplayFor(modelItem => item.PA)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MAJOR_PROGRAM)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.INVESTMENT_AREA)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VERSION)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VP)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DIRECTOR)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.PA}) |

            @Html.ActionLink("Delete", "Delete", new { id = item.PA})
        </td>
    </tr>
}

</table>

<div>
    <div class="lefty">
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    of @Model.PageCount
    &nbsp;&nbsp;&nbsp;&nbsp;
    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink("< Prev", "", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
    }
    else
    {
        @:<<
        @Html.Raw(" ");
        @:< Prev
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Next >", "", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink(">>", "", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
    }
    else
    {
        @:Next >
        @Html.Raw(" ")
        @:>>
    }
    </div>
    <div class="righty">
    Showing Records @Model.FirstItemOnPage to @Model.LastItemOnPage from @Model.TotalItemCount
    </div>
</div>
<br /><br />
<div>
@Html.ActionLink("Download in Excel Format", "PaExcelOutput", new {Versions = ViewBag.SelectedVersion, currentFilter = ViewBag.currentFilter})
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:16:18.127

您可以使用[动态查询](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)，它允许您使用动态列名。

# backbone.js - 在 Backbone 中查看包装器或子视图 - 最佳实践或建议

> ID：10503100
> 
> 赞同：0
> 
> 时间：2012-05-08T17:04:33.903
> 
> 标签：backbone.js

在决定如何构建视图代码时，我试图获得有关最佳实践的建议，而不只是一个具体的答案。在我当前的项目中，我有一个清晰/干净的模型到视图的映射，但所有这些都呈现在一个带有全局导航元素的非常标准的容器中。为了这个问题，请这样描绘：

*   标题
    *   标签
*   牌
    *   卡 1
    *   卡 2
    *   卡 3

您单击标题选项卡并滑入卡片。卡片本身有一个后退按钮，可将其滑出以显示先前显示的卡片。卡片的实际内容由可能映射到模型的另一个视图生成。我想这与 iOS 或 Android 中的常见界面模式并没有太大不同。

无论如何，我想要一个名为“Card”的视图类，它带有一个带有卡片导航的模板，以及每张卡片中的其他内容。然后我想以某种方式将卡片的内容传递给它。

我可以创建一个 Card 类然后扩展它以创建子类（即：子视图）吗？因此，假设我有一个名为 UserModel 的模型和一个名为 UserView 的视图来处理该模型的表单，我想做如下事情：

```
var Card = Backbone.View.extend();
var UserView = Card.extend(); 
```

然后在渲染时得到这个结果，说：

```
<!-- code from Card -->
<div class="card">
    <nav></nav>

    <!-- code from UserView -->
    <div class="user">
        ...
    </div>
    <!-- END code from UserView -->

</div>
<!-- code from Card --> 
```

我意识到一个快速的方法是简单地从我需要包装的每个视图中手动获取卡片模板，等等......但这感觉不对。

那有意义吗？

哦...请记住，我希望这样做的部分优势是我可以与 UserView 实例交互并让它们触发父类中的必要方法。所以...

```
var uv = new UserView();
uv.render() // <- should render the user view with the card wrapped around it. 
```

当然，我不想手动渲染卡片。

你会如何构建它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:13:57.260

由于您专门询问了最佳实践，并且您似乎开始进入骨干网，所以我们首先从一些基础知识开始。

Backbone 具有使用模板引擎定义的视图。默认模板引擎是 underscore.js，但更好的模板引擎是 mustache.js 或更好，但它是更高级别的包装器 handlebar.js（[HandleBarJS 网站](http://handlebarsjs.com/)）。这让您可以将视图和子视图完全按照您在下面描述的方式构建到一个模板中，该模板带有用于填充逻辑的标记，从而使您只需要一个大的渲染事件。

现在你已经有了一个很好的模板来注入你的模型，你仍然想让这个渲染事件执行得很好，所以让我们确保你预编译了你的模板。为了充分理解为什么这是必要的，请阅读这篇文章（[预编译模板的性能优势](http://lostechies.com/derickbailey/2012/04/10/javascript-performance-pre-compiling-and-caching-html-templates/)）。Handlebar.js 有一个预编译模板的方法，所以我不会在这里给出示例。

现在最后一步是建立你的模型。如果您以 JSON 格式构建它，您可以简单地使用模型“执行”您的模板。

```
var context = {title: "My New Post", body: "This is my first post!"}
var html    = template(context); 
```

我已将 Handlebar 用于说明目的，因为模板创建更容易恕我直言，但实际上任何东西都可以使用此模型。

希望这能让你走上正确的道路。

# java - Spring MongoDB 和 Apache Shiro

> ID：10503101
> 
> 赞同：4
> 
> 时间：2012-05-08T17:04:34.730
> 
> 标签：java, spring, spring-mvc, shiro

我正在尝试将 Apache Shiro 与 Spring 和 MongoDB 一起使用。我正在使用自动装配的 Spring Data Repositories。我为 Shiro 创建了自己的自定义领域，它使用 Spring Data 存储库与 Mongo 对话：

```
public class PlatformRealm extends AuthorizingRealm {

    @Autowired(required = true)
    protected UserRepository userRepository = null;

    @Override
    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException {
         ...
    }
} 
```

我看到的问题是 userRepository 没有被自动装配。我在控制台输出中得到以下与 PlatformRealm 相关的行：

```
INFO  org.springframework.web.context.support.XmlWebApplicationContext  - Bean 'platformRealm' of type [class com.resonance.platform.core.security.PlatformRealm] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
```

这是因为 Apache Shiro ShiroFilterFactoryBean。正在发生的是这个 bean 及其所有依赖项在容器启动时立即加载。在解决依赖关系之前，它不会等待我的持久性 bean 被初始化。这会导致存储库引用为空。

以下 bean 配置通过 contextConfigLocation 参数加载：

```
<context-param> 
    <param-name>contextConfigLocation</param-name> 
    <param-value>
        /WEB-INF/web-platform-persistence.xml,
        /WEB-INF/web-platform-services.xml
    </param-value> 
</context-param> 
```

服务 bean 配置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<bean id="userSession"
    class="com.resonance.platform.web.core.services.ShiroUserSessionService" />

<!-- Shiro (Security) -->
<bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
    <property name="securityManager" ref="securityManager" />
    <property name="loginUrl" value="/login" />
    <property name="successUrl" value="/" />
    <!-- The 'filters' property is not necessary since any declared javax.servlet.Filter 
        bean -->
    <!-- defined will be automatically acquired and available via its beanName 
        in chain -->
    <!-- definitions, but you can perform instance overrides or name aliases 
        here if you like: -->
    <!-- <property name="filters"> <util:map> <entry key="anAlias" value-ref="someFilter"/> 
        </util:map> </property> -->
    <property name="filterChainDefinitions">
        <value>
            # some example chain definitions:
            /admin/** = passThruFilter, roles[admin]
            /** = passThruFilter
        </value>
    </property>
</bean>

<bean id="passThruFilter"
    class="org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter" />

<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">
    <!-- Single realm app. If you have multiple realms, use the 'realms' property 
        instead. -->
    <property name="realm" ref="platformRealm" />
    <!-- By default the servlet container sessions will be used. Uncomment 
        this line to use shiro's native sessions (see the JavaDoc for more): -->
    <!-- <property name="sessionMode" value="native"/> -->
</bean>

<bean id="lifecycleBeanPostProcessor" class="org.apache.shiro.spring.LifecycleBeanPostProcessor" />

<bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"
    depends-on="lifecycleBeanPostProcessor" />

<bean class="org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor">
    <property name="securityManager" ref="securityManager" />
</bean>

<!-- Define the Shiro Realm implementation you want to use to connect to 
    your back-end -->
<!-- security datasource: -->
<bean id="platformRealm" class="com.resonance.platform.core.security.PlatformRealm" /> 
```

持久性 bean 配置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:mongo="http://www.springframework.org/schema/data/mongo"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/data/mongo
      http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/util
      http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<mongo:mongo id="mongo" />

<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg ref="mongo" />
    <constructor-arg value="platform" />
    <property name="writeConcern">
        <util:constant static-field="com.mongodb.WriteConcern.SAFE" ></util:constant>
    </property>
</bean>

<mongo:repositories base-package="com.resonance.platform.core.data.repositories" /> 
```

用户存储库：

```
package com.resonance.platform.core.data.repositories;

import org.bson.types.ObjectId;
import org.springframework.data.repository.CrudRepository;

import com.resonance.platform.core.entities.User;

/**
 * A repository used to manage User entities.
 * @author Kyle
 */
public interface UserRepository extends CrudRepository<User, ObjectId> {

    /**
     * Gets a user by the specified login.
     * @param login
     * @return
     */
    User getByLogin(String login);

} 
```

我的问题是，如何正确解决 userRepository 依赖项？我知道 ShiroFilterFactoryBean 必须在其他依赖项之前初始化，但必须有办法解决 userRepository 依赖项。

编辑：添加了用户存储库代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:53:40.750

我遇到了这里描述的同样的问题。我注意到两个弹簧工厂。

1.  来自dispacher-servlet.xml，它加载@Service @Repository 类，因为组件扫描定义在基本包级别，因此我可以将@Autowire Service 类放入Controller。
2.  来自应用程序上下文的@Autowire 类似乎没有标记为@Service，因为它们没有加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T01:41:12.440

我也遇到过这个问题。它与Spring容器中bean初始化的顺序有关。解决方法不是自动装配存储库，而是让您的领域实现 ApplicationContextAware 并直接从上下文中获取所需的 bean。它并不优雅，但它会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T18:06:28.733

如果我理解正确，您应该能够创建一个子类`ShiroFilterFactoryBean`implements `org.springframework.beans.factory.InitializingBean`。然后，`InitializingBean.afterPropertiesSet()`您将添加一些获取`UserRepository`并将其设置到该字段的代码。不是最优雅的解决方案，但这看起来像是一个例外情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-09T12:05:27.390

取自[ShiroFilterFactoryBean-and-a-spring-data-mongodb-realm 的](http://shiro-user.582556.n2.nabble.com/ShiroFilterFactoryBean-and-a-spring-data-mongodb-realm-td7578141.html "Nabble：ShiroFilterFactoryBean-and-a-spring-data-mongodb-realm")具体问题解释：

> 问题是 spring-data-mongodb 需要一个 spring ApplicationEventMulticaster 在它可以使用之前已经被初始化。
> 
> ShiroFilterFactoryBean 是一个 beanPostProcessor，因此，在初始化期间，spring 尝试配置其领域（因此我的领域和基于 mongo 的 spring 数据 userDao）。它失败是因为尚未创建 ApplicationEventMulticaster。

在我尝试了几种解决此问题的建议方法后，例如`InitializingBean`、`ApplicationContextAware`或`BeanPostProcessor`接口（每个都会导致过早调用，因此在初始化我必要的服务/存储库之前），我想出了以下解决方案：

1.  让 spring 创建您的 shiro 上下文，而无需对您的服务/存储库进行任何自动 bean 解析。
2.  让 spring 创建您的服务/存储库上下文，包括 mongodb
3.  创建一个简单的类来处理你的 shiro-service 耦合并在你的 spring 配置中相应地配置它。成功设置 shiro 和服务上下文后，将调用此类。

对（1），某事。像这样：

```
<bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
    <property name="securityManager" ref="securityManager" />
    <property name="filterChainDefinitions">
        <value>
            <!-- Your definitions -->
        </value>
    </property>
</bean>

<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager"
        p:realm-ref="myShiroRealm" />

<bean id="myShiroRealm" class="com.acme.MyShiroRealm" 
    <!--no bean refs here-->
/> 
```

到（2），…… 像这样：

```
<bean id="myService" class="com.acme.MyService"
        c:myRepository-ref="myRepository" />

...

<!-- Ask Spring Data to scan our repositories -->
<mongo:repositories base-package="com.acme.repository.impl.mongodb" /> 
```

至（3）：

```
public class ShiroRealmServiceBridge {
    public static void postInject( MyShiroServerRealm realm, MyService service ) {
        realm.setService( service );
    }
}

<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetClass"><value>com.acme.ShiroRealmServiceBridge</value></property>
    <property name="targetMethod"><value>postInject</value></property>
    <property name="arguments">
    <list>
        <ref bean="myShiroRealm" />
        <ref bean="myService" />
    </list>
</property> 
```

优点：

*   有效xD
*   没有额外的负担/依赖于你的 shiro 东西
*   完成spring配置和设置，初始化后状态一致

坏处：

*   一次性开销设置
*   可能会导致不一致的状态，如果您忘记或碰撞胶水配置，它将在运行时而不是在启动时抱怨

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T13:40:38.847

我不太确定这是否有帮助，但您可以从我这里查看**[这个](https://stackoverflow.com/questions/10783992/spring-and-mongodb-saxparseexception-while-reading-bean-definitions)**问题以获取替代解决方案。

但是，核心问题可能仍然悬而未决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-18T13:30:49.997

ShiroFilterFactoryBean 实现了 BeanPostProcessor，并且由于它依赖于安全管理器以及它自己对数据存储、数据访问对象等的依赖关系。它可能导致大量***Y 类型的 Bean X 不符合被所有人处理的条件BeanPostProcessors***消息。

最糟糕的是，它似乎只是一种查看 Spring 实例化的过滤器实现的方式，以便跟踪并可能将属性注入 AuthorizationFilters。

坦率地说，我不需要仅仅为过滤器跟踪而头疼，所以我创建了一个不包含 BeanPostProcessor 的自定义版本。我现在被迫将过滤器实现手动连接到 bean 的“过滤器”属性，但至少我不必处理该错误以及我的安全管理器和相关 bean 的可疑状态。

# php - php 发送带有 .csv 附件的 html 电子邮件

> ID：10503108
> 
> 赞同：6
> 
> 时间：2012-05-08T17:05:05.930
> 
> 标签：php, csv, html-email, email-attachments

我通过php发送电子邮件没问题。我想附上一个 .csv 文件以及提供的 HTML 电子邮件。我似乎无法找到如何做到这一点。是否有某个 Content-Type 我还必须包含`$headers`在**附件**`Content-Disposition`中？

 **```
$to = 'email@email.com';
$subject = 'A Subject Line';
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$message = "
<html>
<head>
  <title>List of New Price Changes</title>
</head>
<body>";

$message .="HTML table";
$message .="</body></html>";

mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T17:26:04.243

```
 $fileatt_type = "text/csv";
$myfile = "myfile.csv";

        $file_size = filesize($myfile);
        $handle = fopen($myfile, "r");
        $content = fread($handle, $file_size);
        fclose($handle);

        $content = chunk_split(base64_encode($content));

        $message = "<html>
<head>
  <title>List of New Price Changes</title>
</head>
<body><table><tr><td>MAKE</td></tr></table></body></html>";

        $uid = md5(uniqid(time()));

        #$header = "From: ".$from_name." <".$from_mail.">\r\n";
        #$header .= "Reply-To: ".$replyto."\r\n";
        $header .= "MIME-Version: 1.0\r\n";
        $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
        $header .= "This is a multi-part message in MIME format.\r\n";
        $header .= "--".$uid."\r\n";
        $header .= "Content-type:text/html; charset=iso-8859-1\r\n";
        $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
        $header .= $message."\r\n\r\n";
        $header .= "--".$uid."\r\n";
        $header .= "Content-Type: text/csv; name=\"".$myfile."\"\r\n"; // use diff. tyoes here
        $header .= "Content-Transfer-Encoding: base64\r\n";
        $header .= "Content-Disposition: attachment; filename=\"".$myfile."\"\r\n\r\n";
        $header .= $content."\r\n\r\n";
        $header .= "--".$uid."--";

mail($to, $subject, $message, $header); 
```

尝试根据您的情况修改代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:09:23.270

您将 HTTP 标头与邮件混淆了......您可能想要发送[multipart messages](http://rand-mh.sourceforge.net/book/overall/mulmes.html)，但不是重新实现它，而是使用[PHPMailer](http://phpmailer.worxware.com/)之类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-27T09:27:07.800

**这段代码对我有用。你可以试试这个。**

```
<?php
$con = mysqli_connect('localhost', 'username', 'password', 'databasename');
if (!$con)
{
    die("error" . mysqli_connect_error());
}

error_reporting(E_ERROR);
$filename = "adhaar_info";
$sql = mysqli_query($con, "SELECT * FROM adhaar_info order by id desc limit 0,10");
$row = mysqli_fetch_assoc($sql);
$filename2='datas/'.$filename.'.csv';
$fp = fopen($filename2, "w");
$seperator = "";
$comma = "";
foreach ($row as $name => $value){$seperator .= $comma . '' . str_replace('', '""', $name);$comma = ",";}
$seperator .= "\n";
$seperator;
fputs($fp, $seperator);
mysqli_data_seek($sql, 0);
while ($row = mysqli_fetch_assoc($sql))
{
    $seperator = "";
    $comma = "";
    foreach ($row as $name => $value){$seperator .= $comma . '' . str_replace('', '""', $value);$comma = ",";}
    $seperator .= "\n";
    fputs($fp, $seperator);
}

fclose($fp);

$my_file = $filename2;
$path = "datas/";
$from_name = "solomon";
$from_mail = "pss@gmail.com";
$mailto = "pssworkcse@gmail.com";
$subject = "This is a mail with attachment.";
$message = "Hi,\r\n do you got attachment?\r\n\r\Solomon";
$replyto = "pssworkcse@gmail.com";
$file = $my_file;
$file_size = filesize($file);
$handle = fopen($file, "r");
$content = fread($handle, $file_size);
fclose($handle);
$content = chunk_split(base64_encode($content));
$uid = md5(uniqid(time()));
$name = basename($file);
$header = "From: " . $from_name . " <" . $from_mail . ">\r\n";
$header .= "Reply-To: " . $replyto . "\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed; boundary=\"" . $uid . "\"\r\n\r\n";
$header .= "This is a multi-part message in MIME format.\r\n";
$header .= "--" . $uid . "\r\n";
$header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $message . "\r\n\r\n";
$header .= "--" . $uid . "\r\n";
$header .= "Content-Type: application/octet-stream; name=\"" . $filename2 . "\"\r\n"; 
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"" . $filename2 . "\"\r\n\r\n";
$header .= $content . "\r\n\r\n";
$header .= "--" . $uid . "--";
mail($mailto, $subject, "", $header)

?> 
```**

# javascript - 将文件写入磁盘

> ID：10503112
> 
> 赞同：1
> 
> 时间：2012-05-08T17:05:10.767
> 
> 标签：javascript, filesystems

> **可能重复：**
> [是否可以使用 JavaScript 写入文件（在磁盘上）？](https://stackoverflow.com/questions/461791/is-it-possible-to-write-to-a-file-on-a-disk-using-javascript)

是否可以将文件写入文件系统，比如`C:\myfile\myfile.bin`使用 Javascript？

我有这个功能：

```
var data = MyObject.getdata(); // typeof data = "object" 
```

我想将“数据”写入文件以进行调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:07:09.007

不，但您可以在 HTML5 上使用新的本地存储 -

[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

```
localStorage.setItem("bar", Data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:08:08.337

您可以将文件写入文件系统 throw ActiveX，但它仅适用于 Windows 且仅适用于 IE。

# actionscript-3 - Starling MovieClip 帧不适合 2048。一台 MC 有多个 TextureAtlas？

> ID：10503113
> 
> 赞同：3
> 
> 时间：2012-05-08T17:05:12.543
> 
> 标签：actionscript-3, stage3d, starling-framework

我正在制作一款格斗游戏，所以我有巨大的角色精灵（300 像素 X 350 像素）和很多动画帧（每个角色约 150 帧），所以最大 2048 x 2048 纹理大小不适合所有动画帧特点。所以，我需要多个 TextureAtlases，对吧？

如果我在 MovieClip 上切换 TextureAtlases，我是否需要担心代价高昂的 GPU 纹理交换？

要更改动画帧，创建一个管理器来选择帧和图集是否明智？

或者我可以组合 TextureAtlases 以便一个图集存储多个 2048 x 2048 精灵表？

你会如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T18:04:05.000

Daniel Sperl 在 Starling 论坛上的[建议：](http://forum.starling-framework.org/topic/movieclip-frames-dont-fit-into-2048-multiple-textureatlas-for-one-mc?replies=1)

> 如果你的精灵太大了，恐怕你会遇到纹理内存的问题。不幸的是，目前没有简单的解决方法，除了使用“Spriter”（测试版）创建该动画：
> 
> [http://www.kickstarter.com/projects/539087245/spriter](http://www.kickstarter.com/projects/539087245/spriter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:46:01.863

考虑是否可以通过制作骨骼动画来减少动画需求。与其将角色的每一帧直接绘制到纹理中，不如将角色分解为可动画的部分，使用变换定位这些部分，然后在运行时将它们合成到动画帧中。这是一个格斗游戏，所以这应该是可以管理的（大概你只有两个动画角色，加上一些相对便宜的环境效果）。因此，您只需要每个角色的每个独特部分，这将大大减少您的纹理预算（但会增加动画引擎的复杂性）。

您可以查看 DragonBones (http://dragonbones.github.com/getting_started_en.html) 以获取帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:40:28.903

`2048 x 2048`此限制记录在哪里？我从来没有读过这样的东西。我可以在[Starling 1.1 文档](http://doc.starling-framework.org/core/)中找到关于纹理图集大小的唯一内容是：

> 任何 Stage3D 纹理的边长都必须是 2 的幂。Starling 向您隐藏了这个限制，但代价是额外的图形内存。通过使用纹理图集，您可以避免纹理切换和二次幂限制。所有纹理都在一个大的“超级纹理”内，Starling 会注意显示该纹理的正确部分。

假设我没有完全错过这个重要的细节，并且纹理图集没有大小限制，只需在`4096 x 4096`or处创建一个`8192 x 8192`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:21:26.200

嗯 - 我的猜测是使用大于 2048x2048 的纹理会对性能产生影响。而且我会进一步假设在这种大小的纹理之间转换也会导致性能受到影响。您是否考虑过缩小纹理资源并在游戏中放大它们？

# apache - apache重定向正在将查询字符串添加到新的url

> ID：10503118
> 
> 赞同：0
> 
> 时间：2012-05-08T17:05:19.180
> 
> 标签：apache, .htaccess, mod-rewrite, query-string

apache mod rewrite 对我来说很奇怪：我试图将这个重定向 `http://www.website.com/page.php?id=34` 到这个： `http://www.website.com/`

在 htaccess 中使用它：

```
RewriteCond %{QUERY_STRING} ^id=([0-9]*)$
RewriteRule ^page\.php$ "http://www.website.com" [R=301,L] 
```

它工作正常，但它还将查询字符串添加到重定向的 url：

`http://www.website.com/?id=34`

如何从重定向的 url 中删除查询字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:33:33.253

默认情况下，mod_rewrite 不会更改查询字符串，它会保持它们不变并将它们传递给任何新的 URI。要删除它们，您需要以问号结束新 URL。您也不需要引号。这应该有效：

```
RewriteRule ^page\.php$ http://www.website.com? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:10:21.117

我不确定它是否会起作用，但请尝试：

```
RewriteRule ^page\.php "http://www.website.com" [R=301,L] 
```

# msbuild - 如何使用我的 MSBuild 脚本访问 ITaskItem 元数据？

> ID：10503120
> 
> 赞同：0
> 
> 时间：2012-05-08T17:05:22.283
> 
> 标签：msbuild, continuous-integration, build-automation, msbuild-task

我有一个自定义构建任务，它返回 ITaskTem[] 作为构建脚本的输出。我找不到有关如何在我的 MSBuild 脚本中访问这些值的文档/示例。

我的 Execute 方法调用这个返回数组的私有方法。我希望能够遍历输出并获取 TaskItem ItemSpec 和“消息”元数据项。我怎样才能做到这一点？

```
[Output]
    public ITaskItem[] FailedTestsResults { get; set; } 
```

...

```
 private ITaskItem[] GetFailedTests(TestResultsSummary testResultsSummary)
    {          
       IList<TestResult> testList = testResultsSummary.Tests.ToList();
       IEnumerable<TestResult> failedTests = testList.Where(x => !x.Passed);
        IList<ITaskItem> failedTestsTaskItems = new List<ITaskItem>();
        foreach (var failedTest in failedTests)
        {

                //test encountered enexpected error.
                ITaskItem failTestItem = new TaskItem(failedTest.TestName);
                failTestItem.SetMetadata("Message", failedTest.Message);
                failedTestsTaskItems.Add(failTestItem);
        }
        return (ITaskItem[]) failedTestsTaskItems.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:34:29.253

我想到了。可以像这样访问元数据..

```
 <Message Text="Failed: %(FailedTests.Identity) => %(FailedTests.Message)" /> 
```

注意使用 '%' 而不是 '$'。

# c# - 继承类，泛型构造函数有问题

> ID：10503121
> 
> 赞同：3
> 
> 时间：2012-05-08T17:05:23.947
> 
> 标签：c#, generics, inheritance

我有一个半复杂的继承结构，我在覆盖基类上的构造函数时遇到了困难。以下代码可以显示错误：

```
public abstract class MyBaseObject
{
    public MyBaseObject(MyBaseCollection<MyBaseObject> parent)
    {
        this.Parent = parent;
    }

    public MyBaseCollection<MyBaseObject> Parent { get; set; }
}

public abstract class MyBaseCollection<T>
    where T : MyBaseObject
{ }

public class MyRealObject : MyBaseObject
{
    public MyRealObject(MyRealCollection parent)
        : base(parent)
    { }

    public new MyRealCollection Parent { get { return (MyRealCollection)base.Parent; } }
}

public class MyRealCollection : MyBaseCollection<MyRealObject>
{ } 
```

所以，具体来说，我不能覆盖 MyBaseObject 类中的构造函数。尝试传入 MyRealCollection 代替 MyBaseCollection 是不可接受的。如果我摆脱泛型论点，它会起作用；MyRealCollection 代替 MyBaseCollection 被接受。但是我真的需要泛型参数来使我的集合类按照我需要的方式工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:08:47.200

不接受 MyRealCollection 代替 MyBaseCollection，因为它是 的集合`MyRealObject`，而不是`MyBaseObject`。想知道为什么，想象一下 MyBaseObject 的构造函数是否这样做：

```
public MyBaseObject(MyBaseCollection<MyBaseObject> parent)
{
    this.Parent = parent;
    parent.Add(new SomeOtherRealObject());
} 
```

从 的角度来看，这将是完全合法的`MyBaseObject`，但如果您通过了`MyRealCollection`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:12:26.753

我建议你研究逆变和协方差。这里可能是一个好的开始[http://msdn.microsoft.com/en-us/library/dd799517.aspx](http://msdn.microsoft.com/en-us/library/dd799517.aspx)

简而言之，由于某些非常明确的原因，CLR 无法假设您希望它假设的类型继承，这些原因远远高于我的薪酬等级。

但是，如果您稍微使用一下类型层次结构，您就可以这样做。我使用 IEnumerable 来提供帮助。

```
public abstract class MyBaseObject
{
    public MyBaseObject(IEnumerable<MyBaseObject> parent)
    {
        this.Parent = parent;
    }

    public IEnumerable<MyBaseObject> Parent { get; set; }
}

public class MyRealObject : MyBaseObject
{ 
    public MyRealObject(MyRealCollection parent)
        : base(parent)
    { }

    public new MyRealCollection Parent { get { return (MyRealCollection)base.Parent; } }
}

public class MyRealCollection : IEnumerable<MyRealObject>
{ } 
```

# jquery - 我如何使用 jqplot 插件 json 来图形矢量序列化

> ID：10503123
> 
> 赞同：1
> 
> 时间：2012-05-08T17:05:24.573
> 
> 标签：jquery, django, django-models, django-templates, jqplot

大家下午好。我有一个`models.py`包含其他类之一的文件，包括这样的类。

```
class Reportage:
def get_num(self):
    end_date = self.date.end_date
    start_date = self.date.start_date
    duration = time.mktime(end_date.timetuple()) - time.mktime(start_date.timetuple())
    delta_t = duration / 60
    num = []

    for t in range(0,duration,delta_t):
        start = t + start_date
        end = datetime.timedelta(0,t+delta_t) + start_date
        n_num = self.get_num_in_interval(start,end)
        num.append([t, n_num])
    num_json=simplejson.dumps(num)
    return num_json 
```

现在我想使用插件`jqPlot`将数组“num”放在图表上。[网站http://www.jqplot.com](http://www.jqplot.com)上建议的脚本如下：

```
<script type="text/javascript">
        $(document).ready(function(){
        // Our ajax data renderer which here retrieves a text file.
        // it could contact any source and pull data, however.
        // The options argument isn't used in this renderer.
        var ajaxDataRenderer = function(url, plot, options) {
            var ret = null;
            $.ajax({
                // have to use synchronous here, else the function
                // will return before the data is fetched
                async: false,
                url: url,
                dataType:"json",
                success: function(data) {
                    ret = data;
                }
            });
            return ret;
        };

        // The url for our json data
        var jsonurl = "./jsondata.txt";

        // passing in the url string as the jqPlot data argument is a handy
        // shortcut for our renderer.  You could also have used the
        // "dataRendererOptions" option to pass in the url.
        var plot2 = $.jqplot('chart2', jsonurl,{
            title: "AJAX JSON Data Renderer",
            dataRenderer: ajaxDataRenderer,
            dataRendererOptions: {
                unusedOptionalUrl: jsonurl
            }
        });
    });
    </script> 
```

如何使用此脚本在图表上表示矢量“num”？我应该在脚本中更改什么？

# asp.net - 如何使用 GridView 为数据库中的每个字段生成复选框

> ID：10503124
> 
> 赞同：0
> 
> 时间：2012-05-08T17:05:37.927
> 
> 标签：asp.net, vb.net, gridview, checkbox

我对VB编码的了解有限。我现在正在创建一个系统，允许客户选择他们想要的展览活动和展位号，然后预订他们想要租用的日期。

默认情况下，在 GridView 控件中可以添加复选框字段，但它只会为 1 行数据生成 1 个复选框。

正如标题中的状态，我不知道如何为数据库调用 D1、D2、D3、D4、D5、D6 和 D7 中的每个字段生成复选框，默认情况下每个字段的值为 0。现在我希望每个字段都有一个复选框，以允许客户选择他们想要保留的日期并检索他们的检查值以窃取到相应的 D1-D7 字段，检查值会将值更新为 0 到 1。

接下来，我应该如何编码将检查的值存储到数据库中？在 default.aspx 或 default.aspx.vb 中？

或任何其他建议生成复选框而不是使用gridview？

使用 GridView 的默认视图

![在此处输入图像描述](../Images/e47e7c1e4bf706868e42a98981b80a9b.png)

我想要的是

![在此处输入图像描述](../Images/064e785995e967065a1b1a7104716683.png)

我的编码：

```
 <%@ Page Language="VB" MasterPageFile="~/MasterPageMember.master" AutoEventWireup="false" CodeFile="member_view_event_list.aspx.vb" Inherits="member_view_event_list" title="Untitled Page" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">

    <style type="text/css">
        .style8
        {
            width: 46px;
        }
        .style9
        {
        }
        .style10
        {
            width: 86px;
        }
    </style>

    </asp:Content>

<asp:Content ID="ContentPlaceHolder2" runat="server" 
    contentplaceholderid="ContentPlaceHolder2">

    <table width="80%">
        <tr><td class="style10">&nbsp;</td><td class="style8">&nbsp;</td><td>&nbsp;</td></tr>
        <tr><td class="style10">
            <asp:Label ID="Label1" runat="server" Text="Select Event:"></asp:Label>
        </td><td class="style8">
            <asp:DropDownList ID="ddlEventList" runat="server" 
                DataSourceID="SqlDataSourceEvent" DataTextField="eventTitle" 
                DataValueField="eventID" AutoPostBack="True" Width="200">

            </asp:DropDownList>
            <asp:SqlDataSource ID="SqlDataSourceEvent" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
                SelectCommand="SELECT DISTINCT [eventTitle], [eventID] FROM [booth_eventinfo]">
            </asp:SqlDataSource>
        </td><td>
                &nbsp;</td></tr>

        <tr><td class="style10">
            <asp:Label ID="Label2" runat="server" Text="Select Booth:"></asp:Label>
            </td><td class="style8">
            <asp:DropDownList ID="ddlBoothList" runat="server" 
                DataSourceID="SqlDataSourceBooth" DataTextField="boothAlias" 
                DataValueField="boothID" AutoPostBack="True" Width="200">

            </asp:DropDownList>
            <asp:SqlDataSource ID="SqlDataSourceBooth" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
                SelectCommand="SELECT [boothAlias], [boothID] FROM [booth_eventinfo] WHERE ([eventID] = @eventID)">
                <SelectParameters>
                    <asp:ControlParameter ControlID="ddlEventList" Name="eventID" 
                        PropertyName="SelectedValue" Type="Int32" />
                </SelectParameters>
            </asp:SqlDataSource>
            </td><td>
                 </td></tr>

        <tr><td class="style10">
            &nbsp;</td><td class="style8">
                &nbsp;</td><td>
                 &nbsp;</td></tr>

        <tr><td class="style9" colspan="3">

            <asp:GridView ID="GridViewDay" runat="server" AutoGenerateColumns="False" 
                CellPadding="4" DataSourceID="SqlDataSourceDay" ForeColor="#333333" 
                GridLines="None">
                <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
                <Columns>
                    <asp:BoundField DataField="D1" HeaderText="Day1" SortExpression="D1" />
                    <asp:BoundField DataField="D2" HeaderText="Day2" SortExpression="D2" />
                    <asp:BoundField DataField="D3" HeaderText="Day3" SortExpression="D3" />
                    <asp:BoundField DataField="D4" HeaderText="Day4" SortExpression="D4" />
                    <asp:BoundField DataField="D5" HeaderText="Day5" SortExpression="D5" />
                    <asp:BoundField DataField="D6" HeaderText="Day6" SortExpression="D6" />
                    <asp:BoundField DataField="D7" HeaderText="Day7" SortExpression="D7" />
                </Columns>
                <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
                <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                <AlternatingRowStyle BackColor="White" />
            </asp:GridView>
            <asp:SqlDataSource ID="SqlDataSourceDay" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
                SelectCommand="SELECT [D1], [D7], [D6], [D5], [D4], [D3], [D2] FROM [booth_eventinfo] WHERE ([boothID] = @boothID)">
                <SelectParameters>
                    <asp:ControlParameter ControlID="ddlBoothList" Name="boothID" 
                        PropertyName="SelectedValue" Type="Int32" />
                </SelectParameters>
            </asp:SqlDataSource>
            </td></tr>

        <tr><td class="style10">
            &nbsp;</td><td class="style8">
                <asp:CheckBox ID="CheckBox1" runat="server" />
            </td><td>
                &nbsp;</td></tr>

</table>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:43:10.793

对于所需的每个 CheckBox 控件，您需要将“BoundField”更改为“TemplateField”。下面的代码示例向您展示了如何执行此操作。请注意 DataField 值的绑定表达式语法：

```
<asp:TemplateField HeaderText="Day1" SortExpression="D1" HeaderStyle-HorizontalAlign="Center">
  <ItemTemplate>
     <asp:CheckBox ID="CheckBox1" runat="server" Checked='<%# Bind("D1") %>' />
  </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:23:19.857

这可能会帮助你。如果要求仅放置 7 天的复选框，则可以使用 asp:CheckBoxList 而不是使用网格视图。创建列表后，您可以使用 css 对其进行水平样式设置，以使其符合图像中所示的外观。此[链接](http://www.w3schools.com/aspnet/showasp.asp?filename=demo_checkboxlist)提供复选框列表的预览。

对于问题的第二部分，您可以在最终提交时将其保存在 default.aspx.vb 中。

如果您想使用网格视图，则必须添加七个模板列并将其绑定到数据源。

# maven - Maven 分组依赖项而不安装 pom

> ID：10503126
> 
> 赞同：0
> 
> 时间：2012-05-08T17:05:44.840
> 
> 标签：maven, maven-2, module, dependency-management

我有一个 Maven 项目，它有多个配置文件和许多特定于每个配置文件的依赖项。当前清理此问题的解决方案是为每个配置文件创建一个中间依赖项 pom，将依赖项分组在一起，如 3.6.1 中所述：http: [//www.sonatype.com/books/mvnref-book/reference/pom- relationship-sect-pom-best-practice.html](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html) 这些依赖分组 pom 中的每一个都存在于它们自己的 svn 项目中，并作为单独的 jenkins 作业构建和部署。

问题是这些 pom 以及其中的依赖项经常更改和发布，并且变得难以维护。理想情况下，我希望所有的依赖管理都在一个 svn 项目和一个构建下。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:44:18.773

Maven 发布插件做了我们需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:11:44.760

正如 khmarbaise 所写，这将有助于提供更多信息和示例。

但是，只需回答您的实际问题，即如何将所有依赖分组 pom 作为一个项目和一个构建。听起来好像每个模块都是您的“依赖分组 pom”项目之一的[多模块项目](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)将是您正在寻找的。

# objective-c - 设置后 NSString 属性的值不保留

> ID：10503129
> 
> 赞同：0
> 
> 时间：2012-05-08T17:05:49.650
> 
> 标签：objective-c

所以我在 Foo.h 中定义了一个类，在 Foo.m 中实现。然后我有一个名为 FooController.h/m 的控制器，它有多种方法可以将 Foo 与视图接口。

Foo 有多个属性，所以我只会提到三个定义为

```
// Foo.h

    @property (strong, nonatomic) NSString *name;
    @property (strong, nonatomic) NSNumber *level;
    @property (strong, nonatomic) Foo1 *foo1; 
```

如您所见，Foo 具有我在别处定义的类 Foo1 的属性。我没有完成 Foo1 的实现，但基本上它只是一组定义的更多属性。（我没有为 Foo1 定义任何 init 方法。这会是个问题吗？） Foo1 的一个属性，你应该牢记在心的是：

```
// Foo1.h

    @property (strong, nonatomic) NSString*name; 
```

定义了以下 Foo 方法：

```
// Foo.m

    -(id) initWithName:(NSString *)name
                 level:(NSNumber *)level
                  foo1:(Foo1 *)foo1
    {
       self = [super init];
       if (self) {
         _name = name;
         _level = level;
         _foo1 = foo1;
         return self;
       }
       return nil;
    } 
```

FooController 拥有的方法之一称为 makeRandomFoo，它生成通用名称、随机级别和静态定义的 foo1 实例（在大小意义上是静态的）。它的实现如下：

```
// FooController.h

    #import "Foo.h"
    #import "Foo1.h"

    @interface FooController : NSObject

    @property (strong, nonatomic) Foo *foo;

    - (Foo *)makeRandomFoo:(Foo *)foo;

// FooContoller.m

    #import <stdlib.h>

    @implementation FooController

    @synthesize foo = _foo;

    - (Foo *)makeRandomFoo:(Foo *)foo
    {
      NSString *name = @"Random Foo 1";
      NSNumber *level = [NSNumber numberWithInt:(rand() / 100)]; 
      Foo1 *foo1 = [[foo1 alloc] init];
      foo = [[foo alloc] initwithName:name
                              atLevel:level
                             withFoo1:foo1];
      return foo;
    } 
```

然后在我的视图控制器 FooViewController.h/m 上，我创建了一个名为“Make Random Foo”的圆形矩形按钮和三个名为“nameLabel”、“levelLabel”、“foo1Label”的标签

在我展示“Make Random Foo”的方法（实现的底部）之前，我应该只展示我的 vc 的定义和实现：

```
// FooViewController.h

    @class Foo;
    @class FooController;

    @interface FooViewController : UIViewController

    @property (strong, nonatomic) Foo *foo;
    @property (strong, nonatomic) FooController *fooController;
    @property (weak, nonatomic) IBOutlet UILabel *nameLabel;
    @property (weak, nonatomic) IBOutlet UILabel *levelLabel;
    @property (weak, nonatomic) IBOutlet UILabel *foo1Label;

    - (IBAction)randomizeButton;

// FooViewController.m

    - (id)reloadView
    {
       self.nameLabel.text = self.pet.name;
       self.levelLabel.text = [NSString stringWithFormat:@"%@",self.pet.level];
       self.foo1Label.text = self.pet.foo1.name;
       (remember when I told you about a property of foo1 called name?)
    }

    - (IBAction)randomizeButton
    {
      [self.petController makeRandomFoo:self.foo];
      [self reloadView];
    } 
```

因此，当我运行代码并点击随机按钮时，名称和 foo1 标签保持空白，而级别标签显示为 (null)。所有属性都是合成的，但我没有为它们编写和自定义 setter 或 getter。你能帮帮我吗？

我尽量做到描述性强，但如果您有更多问题，请随时提问！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:16:51.323

您没有遵循内存管理规则，因为您将初始化参数直接分配给`[Foo init]`. 您需要改用（合成的）setter 方法：

```
-(id) initWithName:(NSString *)name
                 level:(NSNumber *)level
                  foo1:(Foo1 *)foo1
{
   self = [super init];
   if (self) {
     self.name = name;
     self.level = level;
     self.foo1 = foo1;
   }
   return self;
} 
```

由于您的实施，实例变量没有被保留，因此可能会过早释放。我们现在不想过早的任何事情，对吗？

**编辑**要实现您的 setter 方法（已使用`@property`头文件中的关键字声明），您只需使用`@synthensize`您已经完成的相同方式`FooController`：

```
@implementation Foo

@synthesize name = _name;
@synthesize level = _level;
@synthesize foo1 = _foo1;

-(id) initWithName:(NSString *)name
... etc ...

@end 
```

**编辑 2**：经过多看几眼，您似乎正在`[Foo init...]`使用不同命名的参数调用该方法。您还需要释放`Foo1`对象，因为您已将所有权传递给`Foo`. 同样，通常您需要在`new`创建并返回`Foo`.

试试这个并在最后一行设置一个断点，看看你是否可以检查以下属性`Foo`：

```
- (Foo *)newRandomFoo:(Foo *)foo
{
    NSString *name = @"Random Foo 1";
    NSNumber *level = [NSNumber numberWithInt:(rand() / 100)]; 
    Foo1 *foo1 = [[foo1 alloc] init];
    foo = [[foo alloc] initwithName:name
                              level:level
                               foo1:foo1];
    [foo1 release];
    return foo;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:46:05.327

根据我的猜测，这就是我认为你想做的事情（你似乎在大多数情况下都用“Foo”替换了“Pet”，但不是所有的示例代码，所以很难理解。为什么不只是发布你的真实代码？）

`makeRandomFoo`不应该带参数，所以应该看起来像这样：

```
- (Foo *)makeRandomFoo
    {
      NSString *name = @"Random Foo 1";
      NSNumber *level = [NSNumber numberWithInt:(rand() / 100)]; 
      Foo1 *foo1 = [[Foo1 alloc] init];
      Foo *foo = [[Foo alloc] initwithName:name
                              atLevel:level
                             withFoo1:foo1];
      return foo;
    } 
```

当您从视图控制器调用它时，看起来您实际上想`foo`用“随机”替换视图控制器，所以它应该是：

```
- (IBAction)randomizeButton
    {
      self.foo = [self.petController makeRandomFoo];
      [self reloadView];
    } 
```

最后，除非您在访问器中有默认值，否则根据属性的实现`Foo1`将`name`不包含任何内容，因为您所做的只是分配/初始化它，并且您已经说过您没有覆盖的 init 方法。

# git - 将配置文件存储在文件系统根目录的 git 存储库中是个好主意吗？

> ID：10503140
> 
> 赞同：1
> 
> 时间：2012-05-08T17:06:34.250
> 
> 标签：git, version-control

我的系统管理员在文件系统的根目录放置了一个 git repo 来存储配置文件。这意味着我可以在文件系统中的任何位置添加到那个存储库。这意味着如果我的项目不存在，“git status”不会告诉我没有 repo，因为根目录始终存在。

这对我来说似乎很危险。我错了吗？

对我来说，拥有一个 git repo 是一个隐含的合同，即该目录中的所有内容都在源代码控制中（除了由于 .gitignore 而被忽略的目标文件等）。这是老派的源代码控制思想吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:10:25.170

> 这对我来说似乎很危险。我错了吗？

我认为这是*令人困惑*的，而不是危险的。我们已经在我工作的地方尝试过类似的方法，但最终由于您描述的原因而放弃了它。我们的解决方案是将大部分配置转移到 Puppet 中，因此我们将版本控制应用于配置管理系统，并且通常不会直接对系统进行更改。

系统管理员的一种选择是将`.git`目录放在其他地方，然后`GIT_DIR`在她需要与存储库交互时适当地设置环境变量。例如：

```
GIT_DIR=/etc/sysrepo.git git add /etc/someconfig.conf 
```

这可以解决与将`.git`目录放在文件系统根目录相关的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T00:31:11.707

Im of the school of run the least amount of software as necessary on the server. Running git to manage changes to configuration is not a bad idea, but having the repo sitting on the root of the server is potentially dangerous in terms of hard drive space. Imagine what accidently adding a 5gb database file to the repo and doing a few commits of config files without reading the screen will do to your hard drive space.

The safer route and one I'm currently implementing is find a central location and create a repo there. Create a subfolder for each server and a shell script that can scp the /etc and any other files to and from the server to that folder. Then track them with git from there.

Ive implemented this in a few locations and it worked well. You have the obvious security issues to work out, but they are not impossible to overcome.

# recursion - 如何在特定 TLD 上递归地获取 wget？

> ID：10503147
> 
> 赞同：3
> 
> 时间：2012-05-08T17:06:57.677
> 
> 标签：recursion, dns, wget, tld

是否可以使用 wget 从特定 TLD 递归下载文件？

具体来说，我正在尝试下载[马萨诸塞州法规](http://www.lawlib.state.ma.us/source/mass/cmr/index.html)的全文。法规的实际文本存储在跨多个域的多个文件中——所以我想从[索引页面](http://www.lawlib.state.ma.us/source/mass/cmr/index.html)开始递归下载，但只遵循指向 .gov 和 .us 域的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:53:15.183

[在跨越主机](http://www.gnu.org/software/wget/manual/html_node/Spanning-Hosts.html#Spanning-Hosts)的 wget 文档的帮助下，我能够使用 -H 和 -D 标志来完成这项工作：

```
wget -r -l5 -H -D.us,.gov http://www.lawlib.state.ma.us/source/mass/cmr/index.html 
```

# android - 用相机拍照，但不要保存

> ID：10503148
> 
> 赞同：0
> 
> 时间：2012-05-08T17:06:59.960
> 
> 标签：android, camera, store, send

我想制作一个程序来拍照，对其进行地理标记并将其存储在我的服务器上。

1）有没有办法拍照但不保存？我只想拍照，压缩并发送到我的服务器。我不想将它存储到 SD 卡或内部存储器或任何东西，只是发送它。如果这是不可能的，那么我该如何临时存储并删除它？
2）另外，我如何访问我刚刚拍摄的照片并发送它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:07:06.860

对于您的第一个问题，我认为没有办法不在手机上保存图片。它需要保存在某个地方，而另一个选项，应用程序内存，肯定会为 OOM 错误创造很多机会。

对于您的第二个，您可以像这样创建您的相机意图：

```
Intent takePictureFromCameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
takePictureFromCameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(someFilePathString)));
startActivityForResult(takePictureFromCameraIntent, CAMERA_REQ); 
```

这将导致相机活动拍摄的照片存储在`someFilePathString.`Then 指定的路径中，在您的`onActivityResult`（或任何地方）中，您可以使用：`File myFile = new File(someFilePathString)`访问您的图像以发送到您的服务器。

# c - 我的链接列表程序的改进

> ID：10503149
> 
> 赞同：0
> 
> 时间：2012-05-08T17:07:03.807
> 
> 标签：c

这是一个正在运行的程序

```
#include <stdio.h>
#include <stdlib.h>
struct node {
    int data;
    struct node *next, *prev;
};
struct node *root = NULL;
void push(int);
void pop(void);
struct node *create_node(int);
void travel(void);
int main()
{
    int i, j, choice, count;
    printf("enter choice\n");
    scanf("%d", &choice);
    count = 0;
    while (choice == 1) {
        printf("enter a data element");
        scanf("%d", &j);
        if (count == 0) {
            root = (struct node *)malloc(sizeof(struct node));
            root->next = NULL;
            root->data = j;
        } else
            push(j);
        count++;
        printf("enter choice\n");
        scanf("%d", &choice);
    }
    printf("the link list is \n");
//travel function to be created
    travel();
}

void push(int data)
{
    struct node *t1;
    t1 = root;
    while (t1->next != NULL) {
        t1 = t1->next;
    }
    t1->next = create_node(data);
}

void pop()
{
}

void travel(void)
{
    struct node *t1;
    t1 = root;
    while (t1->next != NULL) {
        printf("%d ", t1->data);
        t1 = t1->next;
    }
    printf("%d ", t1->data);
}

struct node *create_node(int data)
{
    struct node *p = (struct node *)malloc(sizeof(struct node));
    p->data = data;
    p->next = NULL;
    p->prev = NULL;
    return p;
} 
```

上面的程序完全可以工作，我使用了一个全局指针根。我的问题是，如果我不想在这里使用全局指针根，那么我该如何维护该列表，因为每次我都必须在我的推送弹出函数中返回列表的根，还有其他方法可以实现相同的效果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:15:44.223

实现这一点的最简单方法是将指向根节点的指针传递给每个函数：

```
void push(struct node **root, int data) { ... }
void pop(struct node **root) { ... }
void travel(struct node *root) { ... } 
```

因此，在您的 main 函数中，您可以声明一个局部变量来保存根指针：

```
struct node *root = NULL; 
```

然后当你调用时`push`，例如，你传递根指针的地址：

```
push(&root, data); 
```

我强烈建议你修复你的`push`and`travel`函数，使它们对根指针是健壮的`NULL`。这在你之前的问题中讨论过，你应该听从建议。

如果你这样做了，那么你可以摆脱测试`count`为零和相关的特殊情况代码。然后，您将替换它：

```
if (count == 0) {
    root = (struct node *)malloc(sizeof(struct node));
    root->next = NULL;
    root->data = j;
} else
    push(&root, j); 
```

有了这个：

```
push(&root, j); 
```

为了将信息带回家，您的新`push`产品将如下所示：

```
void push(struct node **root, int data)
{
    if (*root == NULL)
        *root = create_node(data);
    else
    {
        struct node *last = *root;
        while (last->next != NULL) {
            last = last->next;
        }
        last->next = create_node(data);
    }
} 
```

您还需要修改`travel`以包括对`root`节点的检查`NULL`。我会把它留给你作为练习。

同时维护头指针和尾指针可能是一种更好的方法，因为它可以避免如此多的列表遍历。

# macos - 从环境变量中删除路径

> ID：10503153
> 
> 赞同：6
> 
> 时间：2012-05-08T17:07:08.520
> 
> 标签：macos, bash

由于错误，我添加了一条我不想使用的路径。
我创建了一个名为 .base_profile 的文件，使用命令 source .base_profile 导出了路径，但我不需要这个路径，如何删除它？

也许标题不太合适，但我没有修改 PATH 变量。
我在 .base_profile 文件中写了这个：

```
export MP=$MP/usr/local/mysql/bin 
```

然后使用source命令。问题是MP变量，不是我想要的，太长了。我想删除它，怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T17:29:11.487

将路径恢复为默认值的方法是`PATH=$(getconf PATH)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T17:17:34.260

做一个

```
echo $PATH 
```

然后用鼠标抓住看起来很有用的部分，并将其附加到：

```
PATH= 
```

因此，例如 - 不在 OSX 系统上：

```
PATH=/home/ramy/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

如果您只在一个终端中获取路径，您也可以打开一个新终端。

如果您将 source-command 添加到一个配置脚本中，则必须在此处将其删除，以永久删除它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T17:18:56.053

修复文件中的错误，并修复环境变量

export PATH=[正确的那个]

# javascript - 通过 jQuery 添加后的类的样式

> ID：10503165
> 
> 赞同：0
> 
> 时间：2012-05-08T17:08:32.527
> 
> 标签：javascript, jquery, html, css

我正在尝试根据是否单击按钮来设置按钮的样式。更准确地说，我有一个按钮，在正常状态和悬停状态下有一些 CSS 样式（不重要），当它被点击时，会添加一个特定的类（在我的例子中`selected`）。

如果该类添加了另一种 CSS 样式，则应该对其应用。好吧，我有 JavaScript（它更像是 jQuery），它将我需要的类添加到按钮和 CSS 样式。但似乎什么都没有发生。

我将粘贴一些代码，以便您可以看到我正在使用什么，但我会将链接粘贴到实际工作的东西。

```
/*
  The jQuery used for adding the class
  I'm using log() to check if anything happens, but only till I make it work 
*/
var iqns = $(this).find('.iqn');

$(iqns).each(function() {

    var iqn = $(this).parent();

    $(iqn).on('click', function() {
        if($(this).hasClass('.selected')) {
            log('Rmoved / Added Class');
            $(this).removeClass('.selected');
            $(this).addClass('.selected');
        } else {
            log('Added Class');
            $(this).addClass('.selected');
        }
    });

});

<!-- A part of the HTML mockup so you can see what's the class I'm looking for -->

<div id="509247" class="product-wrapper">
    <div class="product">
        <div class="description">
            <div class="thumb">
                <i class="icon">
                    <img src="http://0.s3.envato.com/files/5880011/Pool.jpg" alt="Thumb">
                    <span class="preview" data-image-link="http://2.s3.envato.com/files/5880010/Pool.jpg">
                        <img src="assets/gfx/zoom-icon.png" alt="Zoom">
                    </span>
                </i>
            </div>
            <div class="info">
                <div class="sales">
                    <div class="icon">
                        <img src="assets/gfx/sales-icon.png" alt="Sales Icon">
                    </div>
                    <div class="text">
                        <p>2</p>
                    </div>
                </div>
                <div class="rating">
                   <img src="assets/gfx/empty-star.png" alt="Rating">
                   <img src="assets/gfx/empty-star.png" alt="Rating">
                   <img src="assets/gfx/empty-star.png" alt="Rating">
                   <img src="assets/gfx/empty-star.png" alt="Rating">
                   <img src="assets/gfx/empty-star.png" alt="Rating">
                </div>
            </div>
        </div>

        <div class="purchase">
            <div class="info">
                <i class="icon">
                    <i class="iqn"></i>
                    <span class="tooltip">$ 7</span>
                </i>
            </div>
            <div class="proceed">
                <a class="button" href="http://photodune.net/item/pool/509247">Purchase</a>
            </div>
        </div>
    </div>
</div>

/*
  Some of the CSS ( it is actually LESS )
*/

.icon {
    position: relative;
    margin: 0px auto;
    margin-top: 12px;
    margin-left: 12.5px;
    display: block;
    cursor: pointer;
    .dimensions(35px, 35px);
    .background(@noise-monochrome, #323b43, #242a30);
    .border(1px, 1px, 1px, 1px, #242a30);
    .border-radius(25px, 25px, 25px, 25px);
    .shadow-normal-inset(0px 1px 2px rgba(000, 000, 000, 0.5), 1px 1px 1px rgba(255, 255, 255, 0.1) inset);
    .text-format(center, none, none, inherit, none, normal, normal, normal, #ffffff);

    .iqn {
        position: relative;
        margin: 0px auto;
        display: block;
        .dimensions(35px, 35px);
        .background(url(../gfx/price-icon.png), 0px 0px, no-repeat);
    }

    .tooltip {
        position: absolute;
        display: block;
        top: 0px;
        left: 40px;
        pointer-events: none;
        .dimensions(50px, 35px);
        .background(#1f252a);
        .border(1px, 1px, 1px, 1px, #1a1f23);
        .border-radius(5px, 5px, 5px, 5px);
        .font-format(Arial, 16px, normal, bold, normal);
        .text-format(center, none, none, inherit, none, normal, 35px, normal, #03b0f0);
        .opacity(0);
        .transition (all, 0.25s, ease-in-out);
    }

    .tooltip:before {
        position: absolute;
        top: 7.5px;
        left: -10px;
        width: 0;
        height: 0;
        border-top: 10px solid transparent;
        border-bottom: 10px solid transparent;
        border-right: 10px solid #1f252a;
        content: '';
        z-index: 5;
    }

    .tooltip:after {
        position: absolute;
        top: 6.5px;
        left: -11px;
        width: 0;
        height: 0;
        border-top: 11px solid transparent;
        border-bottom: 11px solid transparent;
        border-right: 11px solid #1a1f23;
        content: '';
        z-index: 0;
    }

    &:hover {
        .background(@noise-monochrome, #3c4750, #2c353c);

        .iqn {
            .background(url(../gfx/price-icon.png), 0px -35px, no-repeat);
        }   
    }

    &:hover > .tooltip {
        .opacity(1);
        left: 50px;
        .transition(all, 0.25s, ease-in-out);
    }

    &.selected {
        .background(@noise-monochrome, #2c353c, #3c4750);
        .shadow-normal-inset(0px 1px 2px rgba(000, 000, 000, 0.5) inset, 1px 1px 1px rgba(255, 255, 255, 0.1));

        .iqn {
            .background(url(../gfx/price-icon.png), 0px -35px, no-repeat);
        }

        .tooltip {
            .opacity(1);
            left: 50px;
            .transition(all, 0.25s, ease-in-out);
        }
    }
} 
```

但是我粘贴的内容不会很有帮助，可能链接会有所帮助：[Anchor](http://rolandgroza.com/projects/roland/) ; 导航到商店页面。

如果有人可以帮助我找出问题，我将不胜感激，我不太擅长使用控制台，也许这会对我有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:19:21.373

您不需要设置一个点 ( `.`) 来添加一个新类，删除并且代码应该可以工作。

`$(this).removeClass('selected');`

# python - 如何进一步调试（win7 64bit，py2.7）上的 SendKeysCtypes？

> ID：10503170
> 
> 赞同：2
> 
> 时间：2012-05-08T17:08:46.417
> 
> 标签：python, windows, 64-bit, pywin32, sendkeys

我试图让 SendKeysCtypes 在***py2.7 和 win7 64bit***上工作。 [这是src](https://bitbucket.org/markm/sendkeysctypes)

**问题：**

运行[SendKeysCtypes.py](https://svn.openqa.org/svn/pywinauto/trunk/pywinauto/SendKeysCtypes.py)并没有任何反应。测试应该打开记事本并写一些文本。

问题代码是这样的：

```
def GetInput(self):
    "Build the INPUT structure for the action"
    actions = 1
    # if both up and down
    if self.up and self.down:
        actions = 2

    inputs = (INPUT * actions)()

    vk, scan, flags = self._get_key_info()

    for inp in inputs:
        inp.type = INPUT_KEYBOARD

        inp._.ki.wVk = vk
        inp._.ki.wScan = scan
        inp._.ki.dwFlags |= flags

    # if we are releasing - then let it up
    if self.up:
        inputs[-1]._.ki.dwFlags |= KEYEVENTF_KEYUP

    return inputs

def Run(self):
    "Execute the action"
    inputs = self.GetInput()
    return SendInput(
        len(inputs),
        ctypes.byref(inputs),
        ctypes.sizeof(INPUT)) 
```

上面代码中的 SendInput() 什么都不做。

**其他测试**

*   我尝试了[这个答案](https://stackoverflow.com/questions/1823762/sendkeys-for-python-3-1-on-windows/2004267#2004267)中的代码，它工作正常。但是这段代码还有其他一些问题。

*   根据作者的说法，它[应该与 py3.1 一起使用](http://pywinauto.blogspot.se/2010/04/sendkeysctypes-release-for-some-value.html)

*   [SendInput() 返回 '0'](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)，这意味着“被另一个线程阻塞”

*   调用 ctypes.GetLastError() 会给我们[错误代码 87](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)，这意味着“ERROR_INVALID_PARAMETER”

在这里我们被卡住了，因为我的 Windows 编程非常有限，任何人都可以对此有所了解吗？

**编辑1：**

*   按照“64 位是问题”跟踪，引导我到这个[SO 问题](https://stackoverflow.com/a/6833311/63678)，看看我是否可以转换它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-02T16:32:55.040

您使用的`Structure`和类有两个问题。`Union`我将从[您链接到的代码中](https://bitbucket.org/markm/sendkeysctypes/src/68b60cd364e9d890c097a3927d2e2617e2784dda/SendKeysCtypes.py)复制一个片段，其中一个类作为示例：

```
class KEYBDINPUT(ctypes.Structure):
    "A particular keyboard event"
    _pack_ = 2  # FIXME: don't do this
    _fields_ = [
        # C:/PROGRA~1/MICROS~4/VC98/Include/winuser.h 4292
        ('wVk', WORD),
        ('wScan', WORD),
        ('dwFlags', DWORD),
        ('time', DWORD),
        ('dwExtraInfo', DWORD),  # FIXME: use correct data type
    ] 
```

（我添加了**FIXME**以指出有问题的部分。）

第一个是你正在使用**`_pack_ = 2`**，这**是不正确的**。您根本不应该使用任何`_pack_`对齐说明符。默认值在 32 位和 64 位 Windows 上都可以正常工作。

它`_pack_ = 2`在 32 位 Windows 上工作纯属偶然：代码中使用的所有 2 字节大小的数据类型成对出现，并从已经对齐的边界开始，因此碰巧产生与 4 字节对齐相同的结构。

但是，在 64 位 Windows 下，基本对齐方式是 8 字节，因此如果您使用`_pack_ = 2`或`_pack_ = 4`在那里，结构将不对齐并且大小错误。

第二个问题是**没有`ULONG_PTR`in`ctypes.wintypes`**，这将**是`dwExtraInfo`**. 在 32 位 Windows`ULONG_PTR`下是无符号 32 位整数，而在 64 位 Windows 下是无符号 64 位整数。

关于 Windows 数据类型的[MSDN 文章](https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx)显示了它是如何定义的：

```
#if defined(_WIN64)
 typedef unsigned __int64 ULONG_PTR;
#else
 typedef unsigned long ULONG_PTR;
#endif 
```

因此，使用`DWORD`or `ULONG`for`dwExtraInfo`只能在 32 位 Windows 下工作，否则会产生错误的大小。

虽然使用某些`POINTER`基于数据类型会碰巧产生一个正确对齐和大小的结构，但它在含义和用法上都是错误的，就像`ULONG_PTR`“一个也可以存储（强制转换的）指针的无符号整数”而不是一个实际指针。

仔细查看`wintypes`，您会注意到它`WPARAM`的定义恰好与`ULONG_PTR`预期的完全一样。因此，一种快速而肮脏（但仍然相当稳健）的获取`ULONG_PTR`方式是：

```
from ctypes.wintypes import WPARAM as ULONG_PTR 
```

或者，您可以使用一段受他们启发的代码并自己定义：

```
import ctypes

for ULONG_PTR in [ctypes.c_ulong, ctypes.c_ulonglong]:
    if ctypes.sizeof(ULONG_PTR) == ctypes.sizeof(ctypes.c_void_p):
        break
else:
    raise TypeError("cannot find a suitable type for ULONG_PTR") 
```

有了这些适应，您可以定义如下结构：

```
class MOUSEINPUT(ctypes.Structure):
    _fields_ = [
        ('dw',          LONG),
        ('dy',          LONG),
        ('mouseData',   DWORD),
        ('dwFlags',     DWORD),
        ('time',        DWORD),
        ('dwExtraInfo', ULONG_PTR),
    ]

class KEYBDINPUT(ctypes.Structure):
    _fields_ = [
        ('wVk',         WORD),
        ('wScan',       WORD),
        ('dwFlags',     DWORD),
        ('time',        DWORD),
        ('dwExtraInfo', ULONG_PTR),
    ]

class HARDWAREINPUT(ctypes.Structure):
    _fields_ = [
        ('uMsg',    DWORD),
        ('wParamL', WORD),
        ('wParamH', WORD),
    ]

class _INPUT(ctypes.Union):
    _fields_ = [
        ('mi', MOUSEINPUT),
        ('ki', KEYBDINPUT),
        ('hi', HARDWAREINPUT),
    ]

class INPUT(ctypes.Structure):
    _anonymous_ = ['']
    _fields_ = [
        ('type', DWORD),
        ('', _INPUT),
    ] 
```

# git - 可以让 git 从外部仓库跟踪单个文件吗？

> ID：10503175
> 
> 赞同：5
> 
> 时间：2012-05-08T17:08:49.790
> 
> 标签：git, git-submodules

我知道子模块，但是有一个奇怪的边缘情况，我想避免为外部存储库的代码保留一个单独的目录。

我的研究生论文有一个 LaTeX 项目： [https ://github.com/jklukas/gradthesis](https://github.com/jklukas/gradthesis)

它使用我保存在单独存储库中的样式文件（供其他人轻松使用）： [https ://github.com/jklukas/uwthesis](https://github.com/jklukas/uwthesis)

我可以将 uwthesis 作为子模块包含在内，但 LaTeX 仅在主目录中查找样式文件。在 LaTeX 中有一些 hacky 方法，比如在导入样式文件时给出明确的路径，但这看起来很难看。

目前，我只是`uwthesis.sty`在`gradthesis`回购中保留一份副本。是否可以配置`uwthesis`为远程并能够仅针对这个文件推送更改？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T03:43:52.887

您可以使用正常`git submodule`机制添加子模块：

```
git submodule add git://github.com/jklukas/uwthesis.git uwthesis 
```

然后创建从顶级目录到相应样式文件的符号链接：

```
ln -s uwthesis/uwthesis.sty uwthesis.sty 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T20:21:00.597

如果你的问题只是

> 只为这个文件推送更改

您可以添加所有文件，不包括一个，`.gitignore`像这样：

```
*
!path/to/explicit.file 
```

并清除您的本地回购索引：

```
git rm -r --cached . 
```

然后添加、提交和推送任何你想要的东西。

# html - 谷歌和亚马逊不会在框架中工作？

> ID：10503180
> 
> 赞同：1
> 
> 时间：2012-05-08T17:09:05.220
> 
> 标签：html, frames, frameset

我错过了什么吗？这段代码，我认为很好，但出现了一个空白页面。如果您将其中一个 URL 更改为 facebook.com，也不会加载。谷歌、亚马逊和 Facebook 是否都阻止他们的网站在框架集中显示？（他们为什么不直接破产？）还是我的 HTML 有缺陷？

```
<html>

<head>
  <title>Test</title>
</head>

<FRAMESET ROWS="71, *" FRAMEBORDER=NO FRAMESPACING=0 BORDER=0>
  <FRAME SRC="http://google.com">
  <FRAME SRC="http://www.amazon.com/dp/0307951529?tag=fw-book-20" name='btm'>
</FRAMESET>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:10:49.350

他们正在使用[`x-frame-options`](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header). 如果您查看他们的响应标头，您会看到：

```
 x-frame-options SAMEORIGIN 
```

无论是否启用 JavaScript，这都有效。但是，它确实需要我链接到的 MDN 页面上列出的相对现代的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:27:41.990

我的建议是，找到一种更优雅的方式来完成您想要完成的工作，而无需使用框架。框架是邪恶的，并创造了一些最邪恶的网络应用程序。请不要，让我们帮助您找到更好的方法来解决您试图通过使用框架来解决的任何问题。

我什至支持正确使用的 iFrame，但不支持成名集......

# powershell - 使用通用列表时如何删除所有 在PowerShell中

> ID：10503184
> 
> 赞同：7
> 
> 时间：2012-05-08T17:09:12.450
> 
> 标签：powershell, powershell-2.0

如果我使用这样的通用列表：

```
$foo = New-Object 'system.collections.generic.list[object]'
$foo.Add((New-Object PSObject -Property @{ Name="Foo1"; }))
$foo.Add((New-Object PSObject -Property @{ Name="Foo2"; }))
$foo.Add((New-Object PSObject -Property @{ Name="foo3"; })) 
```

如何应用 RemoveAll() 方法`List<T>`？是否可以使用谓词？例如，如何删除所有以大写“F”开头的项目？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T18:42:05.033

我认为唯一的方法是不使用`System.Predicate`需要委托（对不起，但我真的不知道如何在 powershell 中创建匿名委托）并使用 where-object 子句。

在我的示例中，我将结果重新分配给`$foo`需要再次转换为`list<T>`.

如果结果计数只有一个，为了避免错误，它需要“，”来始终创建一个`array`值

```
[system.collections.generic.list[object]]$foo =  , ( $foo | ? {$_.name  -cnotmatch "^f" }) 
```

**编辑：**

经过一些测试，我发现如何使用 lambda 表达式使用 powershell 脚本块：

```
$foo.removeAll( { param($m)  $m.name.startswith( 'F', $false , $null)  }) 
```

`System.Predicate`这是使用powershell中需要的方法的正确方法

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T08:21:13.130

这是使用脚本块（匿名代表）的另一个选项：

```
$foo.RemoveAll( {$args[0].Name -clike 'F*'} ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-03T20:42:23.400

事实证明，我真的想要 .clear() 方法而不是 RemoveAll。仅当您要删除一组项目而不是列表中的所有项目时，才需要 RemoveAll。

# android - Youtube 意图在浏览器 android 中启动

> ID：10503187
> 
> 赞同：2
> 
> 时间：2012-05-08T17:09:18.463
> 
> 标签：android, android-intent, youtube, gdata

我遵循了有关如何使用 youtube gdata 的教程。使用来自 youtube 的视频和 onclick 填充列表视图。源代码可从该站点获得：http: [//blog.blundell-apps.com/click-item-in-a-listview-to-show-youtube-video/](http://blog.blundell-apps.com/click-item-in-a-listview-to-show-youtube-video/)

在 onclick 上似乎出了点问题。它应该开始视频的 url，但它只进入 webbrowser 和 youtube.com

有人可以看看吗？

编辑：

**现在一切正常。似乎使用 JSON player/default 而不是 player/mobile 正确启动了意图。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:56:25.937

您链接的示例源中选择的 URL 似乎不适合用于此目的。如果您查看 的来源`GetYoutubeUserVideosTask`，您会注意到他们从 JSON 中提取的值是数组中每个对象`url`的`player->default`or值，如果您单击它，它只会加载一个网页。`player->mobile``items`

您可以尝试修改示例以`content`从该 JSON 对象中提取其中一个 url，这应该直接加载视频播放器。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:42:43.390

Youtube 应用程序只能与特殊的 ROM 一起使用。因此，不幸的是，您不能像 Emulator 中使用的那样在 OpenSource-ROM 中运行它们。

# rest - 对 REST 的全栈框架的建议？

> ID：10503192
> 
> 赞同：2
> 
> 时间：2012-05-08T17:09:48.033
> 
> 标签：rest, authentication, frameworks, restful-architecture, paas

我正在寻找一个健壮的 REST 框架，通过启动一个新的纯 REST Web 服务（移动客户端）来消除所有样板代码。是否有一个已经内置了这个的框架，例如，我可以简单地*构建域模型*并使用它运行？我想看看：

*   身份验证和用户模型
*   日志记录
*   基本 CRUD
*   权限（用于模型访问）
*   可扩展性

似乎每个 Web 服务都至少需要上述功能。一定有人在某个地方编写了具有上述功能的良好可重用框架。有任何想法吗？我更喜欢 Node.js、Java 甚至是提供这些功能的 PaaS 服务提供商托管。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:26:51.213

Spring 3 MVC 为 REST 提供了一个非常漂亮且简单的基于注解的框架。请参阅[http://blog.springsource.org/2009/03/08/rest-in-spring-3-mvc/](http://blog.springsource.org/2009/03/08/rest-in-spring-3-mvc/)它可以部署在任何 Java Web 服务器上，如 Jetty 或 Tomcat。

像 XAP 这样的框架提供了 Spring 和 Jetty 的组合解决方案，而且它是为动态扩展而构建的。请参阅[http://www.gigaspaces.com/xap](http://www.gigaspaces.com/xap)。

最后，如果您想在任何云上轻松使用此解决方案，CloudifySource 提供了一个开源项目，其中包括 XAP 功能和 PaaS。见[http://www.cloudifysource.org](http://www.cloudifysource.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:42:44.780

我为此使用**Symfony 1.4**。它是一个 PHP 框架。它免费生成您需要的大部分内容。数据库的东西也很简单，因为 Symfony 使用 ORM 库（你可以选择，但我可以推荐 Doctrine： http: [//www.doctrine-project.org/](http://www.doctrine-project.org/)）。

例如，整个后端站点（管理员）的生成只需运行一个命令。他们有一本很棒的免费电子书。更多信息在这里：http://www.symfony-project.org/。

还有**Symfony 2.X** (http://symfony.com/)，它有很多新特性（例如新的 Doctrine 2.0）。特别是使用捆绑包（插件）[https://github.com/FriendsOfSymfony/FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)是非常容易的 RESTful 服务。

# python - Matlab k-means cosine 将所有内容分配给一个集群

> ID：10503193
> 
> 赞同：1
> 
> 时间：2012-05-08T17:09:48.040
> 
> 标签：python, matlab, numpy, normalization, k-means

我在 L2 归一化特征矩阵上使用带有 'Distance'、'cosine'、'EmptyAction'、'drop' 的 Matlab 常规 kmeans 算法，但我遇到了问题。Matlab 生成的输出只是将每个数据点分配给 cluster `1.00000`，即使 k=20，并且 C 中的所有质心都是`NaN`。有没有人对可能导致这种情况的原因有任何建议？

矩阵的布局为 ([0,1,...,1,0,1],[...],[0,1,...,1,0,1])。`numpy.linalg.norm`在将文件传递给 Matlab 之前，我已经使用 Python 完成了 L2 标准化。这是我运行kmeans的确切方式：

```
m=importdata('matrix.txt');
data=m'; % transpose, because kmeans treats columns as features instead of rows
[L, C]=kmeans(data, 20, 'Distance', 'cosine', 'EmptyAction', 'drop') 
```

这是我的标准化数据集的示例：

```
10.3440804328
12.6885775404
15.5884572681
15.9059737206
17.4355957742
17.0
17.3493515729
17.3205080757
18.6279360102
19.7230829233
21.400934559
22.0
22.5831795813
23.0
24.0416305603
25.2388589282
26.8141753556
22.5388553392
9.2736184955
13.5277492585
15.2970585408 
```

任何帮助或建议将不胜感激。如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:30:33.330

导致它失败的是余弦距离，它适用于 sqEuclidean。我认为余弦距离需要更多信息，否则对您的数据集没有意义。

编辑：我同意你的观点，这里的文档有点含糊……但 Matlab 的 pdist 函数中余弦距离的定义是：“一个减去点之间夹角的余弦（视为向量）。”

我认为，必须包括角度（我假设在下一列中）。但这似乎违背了目的。[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity) 再次编辑：我猜它更可能是包含的意思是“2个向量之间的夹角”。在这种情况下，我认为余弦需要 2 列或更多列来处理。

Also, if your already into python there are some good machine learning tools there as well. Here is [one I have used](http://scikit-learn.org/stable/). There is also [MILK](http://packages.python.org/milk/index.html), but I have never used it myself.

# php - 获取 MySQL 表中的最后一个条目

> ID：10503195
> 
> 赞同：16
> 
> 时间：2012-05-08T17:09:59.680
> 
> 标签：php, mysql

我基本上是在尝试制作一个“目标”栏。目标是通过获取我在 MySQL 表中创建的最后一个条目来确定的。因此，我想获取最后一个条目的 ID。

如何获取表中的最后一个条目，然后从最后一个条目中获取 id？

（使用 PHP）

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-08T17:12:44.227

要获得最大的 id：

```
SELECT MAX(id) FROM mytable 
```

然后获取行：

```
SELECT * FROM mytable WHERE id = ??? 
```

或者，您可以在一个查询中完成所有操作：

```
SELECT * FROM mytable ORDER BY id DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T17:16:32.040

你可以使用`LAST_INSERT_ID()`功能。例子：

```
$sql = "SELECT * FROM mytable WHERE id = LAST_INSERT_ID()"; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-08T17:13:06.783

你可以使用这个查询来获得你想要的结果，这个 sql 查询在这个例子中使用：

```
$sql = "SELECT user_id FROM my_users_table ORDER BY user_id DESC LIMIT 0,1"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T17:12:39.700

如果该字段是自动递增的，那么您可以使用 [LAST_INSERT_ID](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T17:13:47.750

要可靠地执行此操作，您必须在表中包含一些可以检查以确定哪个是最后一个的字段。这可能是您添加记录时的时间戳、不断增加的序列号（尤其是自动递增的序列号）等。

然后，假设它是一个名为“rec_seq”的序列号。你会写这样的东西：

```
select * from my_table
where rec_seq=(select max(rec_seq) from my_table) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-08T17:16:53.533

以相反的顺序从表中选择所有字段并设置限制 0,1 这将为您提供表字段数据的最后结果

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-29T06:42:32.150

获取用户的最新条目

```
'SELECT user_id FROM table_name WHERE user_id = '.$userid.' ORDER BY user_id DESC LIMIT 1'; 
```

# django - 使用通用外键在 Django 中分配每个对象的权限

> ID：10503196
> 
> 赞同：1
> 
> 时间：2012-05-08T17:10:03.773
> 
> 标签：django, generics, permissions

我想要一种将多个用户与 Django 中的帐户相关联的简单方法。我想我找到了一个解决方案，它似乎正在工作。我遇到了一些我现在正在尝试的更复杂的版本。我想知道是否有任何反对意见值得考虑。现在我很高兴它可以工作，但我对 Django 的经验仍然有限，所以欢迎任何反馈。

以下两种型号：

```
class Account(models.Model):

    related_users = generic.GenericRelation('RelatedUser')

    public = models.BooleanField(default=True)

    name = models.CharField(max_length=250)
    slug = models.SlugField(max_length=250)

    # Other fields....

    def __unicode__(self):
        return self.name

    # Get related user-id's and append them into a list
    def get_related_users(self):
        users = self.related_users.all()
        related = []
        for related_user in users:
            related.append(related_user.user_id)
        return related   

class RelatedUser(models.Model):

    content_type = models.ForeignKey(ContentType, related_name="user_relation")
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

    user = models.ForeignKey(User, null=True, blank=True, related_name='user_relation') 
```

然后是我的（部分）观点之一：

```
@login_required                            
def account_edit(request, account_id):
    account = get_object_or_404(Account, pk=account_id)
    users = account.get_related_users()
    if request.user.is_superuser or request.user.id in users:
        form = AccountForm(request.POST or None, instance=account)
        if form.is_valid():
            artist = form.save(commit=False)        
            artist.save()
            return redirect(account_list)
    else:
        return redirect(account_list) 
```

我对几个用户进行了测试，它完成了我想要它做的事情。我只是想知道，这是否足够安全有效地用于生产？（我有一个在家庭服务器上运行的博客，但就我的部署经验而言。）

# c++ - 复制构造函数没有合适的默认构造函数

> ID：10503206
> 
> 赞同：0
> 
> 时间：2012-05-08T17:10:58.150
> 
> 标签：c++, copy-constructor

`copyconstructor`我在为我的`doublependulum`班级创建一个问题时遇到了问题。我在我的`doubelpendulum.h`文件中创建了一个，但它似乎无法在`doublependulum.cpp`. 我不断收到此错误：

> 错误 C2512：“Pendulum”：没有合适的默认构造函数可用

我不明白为什么我必须添加适当的构造函数，或者为什么我定义的构造函数（规则 103-104）不正确。如果是这样，谁能告诉我为什么它是必要的或我的有什么问题？

## 钟摆.h

```
#include<string>
using std::string;
#ifndef pendulum_H
#define pendulum_H

class Pendulum
{
public:
    Pendulum(const double,const double,double,double);
    //check function
    const double check(const double, const string) const;  //used for (L,M)
    // getfuncties
    double getL() const;
    double getM() const;
    double getTheta();
    double getOmega();
    //overload operator
    Pendulum operator+ (Pendulum);
    Pendulum operator*(const double a);
    Pendulum operator=(Pendulum);
    //copy constructor
    Pendulum(const Pendulum&  );
private:
    double L_,M_,Theta_,Omega_;
};
#endif 
```

## 钟摆.cpp

```
#include "pendulum.h"
#include <iostream>
#include <string>
using namespace::std;
//constructor
Pendulum::Pendulum(const double L, const double M, double Theta, double Omega)
         :L_(check(L,"L")),M_(check(M,"M"))
{}
//check functie
const double Pendulum::check(const double d, const string str) const
{
    if (d<0.)
    {
        cout << "ERROR: " << str << " (" << d << ") has to be positive"  << endl;
        exit(EXIT_FAILURE);
    }
    return d;
}
//getfuncties
double Pendulum::getM() const
{
    return M_;
}
double Pendulum::getL() const
{
    return L_;
}
double Pendulum::getTheta() 
{
    return Theta_;
}
double Pendulum::getOmega() 
{
    return Omega_;
}
//overloading operators
 Pendulum Pendulum::operator+ (Pendulum param)
{
return Pendulum(L_, M_, Theta_+param.Theta_, Omega_+param.Omega_);
}

Pendulum Pendulum::  operator* (const double param)
{
return Pendulum(L_, M_, param*Theta_, param*Omega_);
}

Pendulum Pendulum::operator=(Pendulum param)
{
return Pendulum(L_, M_, param.Theta_, param.Omega_);
}
//copy constructor
Pendulum::Pendulum(const Pendulum& Object)
{
*this=Object;
} 
```

## 双摆

```
#ifndef doublependulum_H
#define doublependulum_H
#include "pendulum.h"

class DoublePendulum
{
public:
    //constructor
    DoublePendulum(Pendulum ,Pendulum );    
    //getfuncties
    Pendulum getUp();
    Pendulum getDown();
    //Overload operators
    DoublePendulum operator+ (DoublePendulum);
    DoublePendulum operator*(const double a);
    DoublePendulum &operator=(const DoublePendulum &);
    //copy constructor
    DoublePendulum(const DoublePendulum& );
private:
    Pendulum PendUp;
    Pendulum PendDown;  
};
#endif 
```

## 双摆

```
#include "doublependulum.h"

//constructor
DoublePendulum::DoublePendulum(Pendulum Up,Pendulum Down)
               :PendUp(Up),PendDown(Down)
{}
//getfunctions
Pendulum DoublePendulum::getUp()
{
return PendUp;
}
Pendulum DoublePendulum::getDown()
{
return PendDown;
}
//Overload operators
DoublePendulum DoublePendulum::operator+ (DoublePendulum param)
{
return DoublePendulum(PendUp + param.PendUp,PendDown + param.PendDown);
}

DoublePendulum DoublePendulum::operator* (const double param)
{
return DoublePendulum(PendUp*param,PendDown*param);
}

DoublePendulum& DoublePendulum::operator= (const DoublePendulum& param)
{
return *this; // assign to members of this object
}
//Copy constructor
DoublePendulum::DoublePendulum(const DoublePendulum& Object)
{
*this=Object;
} 
```

## 主文件

```
#include "pendulum.h"
#include "doublependulum.h"
int main()
{return 0;} 
```

一切都会编译，直到我添加规则：143-147 我收到此错误：

```
error C2512: 'Pendulum' : no appropriate default constructor available

error C2512: 'Pendulum' : no appropriate default constructor available 
```

和一个令人担忧的警告

> 生成代码... c:\users\niels\documents\visual studio 2010\projects\examenopdracht\examenopdracht\pendulum.cpp(55): 警告 C4717: 'Pendulum::Pendulum' : 在所有控制路径上递归，函数会导致运行时堆栈溢出

我一直在寻找几个小时，希望有人能向我解释我的构造函数出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:19:47.863

您定义了一个构造函数 Pendulum::Pendulum(const double,const double,double,double) 所以编译器不会定义默认构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:29:06.020

第一个问题是你试图在你的类中默认构造成员和`PendUp`类型`PendDown`，而你的类没有默认构造函数。您可以默认构造一个没有默认构造函数的类。要么为类提供默认构造函数，要么停止尝试在. 哪个是正确的解决方案取决于您的意图。只有你知道你的意图是什么。`Pendulum``DoublePendulum``Pendulum``Pendulum``DoublePendulum`

正如在其他答案中所指出的那样，您的类`Pendulum`没有默认构造函数的原因是，在 C++ 中，一旦您为该类提供*任何*用户定义的构造函数，编译器就会立即停止为该类提供隐式默认构造函数。在您的情况下，您在 class 中显式声明了两个构造函数`Pendulum`，这会自动禁用其默认构造函数。要重新启用它，您必须明确声明它。

* * *

第二个问题根源于类中的复制构造函数和复制赋值运算符的设计`Pendulum`。您将复制构造函数实现为对复制赋值运算符的简单调用。但是，您的复制赋值运算符*按 value*接受其参数。这意味着为了准备参数，必须通过调用复制构造函数来复制构造实际参数。这是你的无限递归。即，为了完成复制构造函数，您必须调用复制分配，但是为了调用复制分配，您必须调用复制构造函数。

首先，您为什么在课堂上进行复制分配以*按值*`Pendulum`接受其论点？事实上，复制赋值运算符的当前实现似乎根本没有任何意义：它没有将任何东西分配给它的左侧。通过 const 引用使您的复制分配接受其参数，并且无限递归问题应该消失。此外，进行复制分配以实际*将*事物分配到其左侧（即对象）。**`*this`**

 **其次，通过调用复制赋值运算符来实现复制构造函数的想法被打破了。赋值期望对象处于完全构造状态，而在构造函数内部，对象尚未构造。一个更好的想法是反过来做：通过使用众所周知的*[复制和交换](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)*习语通过复制构造来实现复制分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T17:19:56.450

这两个函数是相互递归的：

```
Pendulum Pendulum::operator=(Pendulum param)
{
  return Pendulum(L_, M_, param.Theta_, param.Omega_);
}
//copy constructor
Pendulum::Pendulum(const Pendulum& Object)
{
  *this=Object;
} 
```

该行`*this=Object`调用`operator=(Pendulum)`. 但是，为了创建本地变量`param`，调用调用了复制构造函数。然后复制构造函数 inokes`operator=`等。

尝试：

```
Pendulum& Pendulum::operator=(const Pendulum& param) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T17:27:29.717

赋值运算符和复制构造函数存在问题。您的班级似乎不需要这些，因此只需删除它们即可解决问题，并且似乎是最干净的解决方案。**

# javascript - 缩短长目录

> ID：10503207
> 
> 赞同：2
> 
> 时间：2012-05-08T17:10:58.797
> 
> 标签：javascript, html, forms

如何缩短长目录？

我有这个：

`http://localhost/project/moduleMes/message/sentMail.php`

像这样 `sentMail.php`的事情这可能吗？

我对操作目录不是很熟悉，但我的目标是确定`.action`表单的。如果我有一个并且如果我通过它显示`<form id="formMail" action="sentMail.php">`此表单的操作，但我只需要.`alert(document.getElementById('formMail').action);``http://localhost/project/moduleMes/message/sentMail.php``sentMail.php`

我的解决方案是使用`split`并获取最后一个数组，但我想知道是否有正式的方法可以`sentMail.php`单独使用？

还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:16:29.543

```
var str = document.getElementById('formMail').action; // or something else
var script_name = /[^\/].+\.php$/.exec(str)[0]; 
```

更新：更改正则表达式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T23:49:01.057

它很简单：

```
var output = document.getElementById('formMail').action.split(/\/+/).pop(); 
```

这是一个测试各种值的[演示。](http://jsfiddle.net/PgLN9/2/)

如果您使用的是 jQuery：

```
var output = $('#formMail').attr('action').split(/\/+/).pop(); 
```

# service - 在 LAMP 服务器上运行工具作为服务

> ID：10503208
> 
> 赞同：0
> 
> 时间：2012-05-08T17:11:37.733
> 
> 标签：service, lamp

我已经安装并配置了 LAMP 以在我的 Ubuntu 11.10 上运行。现在我需要设置一个在这个 LAMP 服务器上运行的工具。该工具可以通过 jar 文件运行，并且还有一个 shell 脚本可以运行它。脚本内容如下：

```
#Script must be in the same directory as tool.jar
java -Dapple.laf.useScreenMenuBar=true -Xmx900m -jar `dirname $0`/tool.jar $* 
```

我已将工具目录复制到 /var/www/ 文件夹中，但不知道下一步该做什么。具体来说，我需要在我的本地主机页面上添加链接来运行这个工具。期待帮助。

AK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:37:13.830

[http://php.net/manual/en/function.shell-exec.php](http://php.net/manual/en/function.shell-exec.php)

# android - 如何使用多个 ImageView 完成 Android Widget，每个 ImageView 都有多个 onClick 侦听器？

> ID：10503211
> 
> 赞同：0
> 
> 时间：2012-05-08T17:11:39.780
> 
> 标签：android, onclick, widget, android-pendingintent

我是 Android 开发的新手。我在这里遇到问题，希望有人可以帮助我。

在小部件上，假设它有 3 个组件，它们是 ImageViews。

*   我想要的是当用户点击 ImageViewOne 时，PendingIntentOne 将用户带到 ClassOne。
*   而当用户点击 ImageViewTwo 时，PendingIntentTwo 会将用户带到 ClassTwo。
*   而当用户点击 ImageViewThree 时，PendingIntentThree 会将用户带到 ClassThree。

这该怎么做？目前我只能为整个小部件拥有 1 个 PendingIntent。

* * *

没关系，我已经得到了感谢[https://stackoverflow.com/questions/10081818/how-to-make-several-buttons-in-widget-send-broadcast-to-the-same-widget](https://stackoverflow.com/questions/10081818/how-to-make-several-buttons-in-widget-send-broadcast-to-the-same-widget)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:32:26.733

为什么你只有 1 个 pendingIntent ？

```
Intent intentLogo = new Intent(context, MainActivity.class);
Bundle extrasLogo = new Bundle();
intentLogo.putExtras(extrasLogo);
PendingIntent pendingIntent = PendingIntent.getActivity(context, Widget.REQUEST_CODE, intentLogo, Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent pendingIntent2 = PendingIntent.getActivity(context, Widget.REQUEST_CODE, intentLogo, Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent pendingIntent3 = PendingIntent.getActivity(context, Widget.REQUEST_CODE, intentLogo, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

# php - mysql_fetch_array while 循环。它是如何工作的？

> ID：10503216
> 
> 赞同：5
> 
> 时间：2012-05-08T17:11:57.270
> 
> 标签：php, mysql, increment

我已经阅读了关于 php.net 上的功能，但仍然没有回答我的问题。我知道 C 的初学者数量，我刚刚开始使用 php。通常在 C 中，如果您要执行 while 循环，则需要一些条件才能将循环推进到不再有效的点，如下所示：

```
while (x >= 10)  
{ 
    printf("..."; 
    printf("x \n"; 
    x++; 
} 
```

但是，在我用于 pm 消息系统的 php 脚本中，我有一个这样的 while 循环：

```
while($row2 = mysql_fetch_array($query)) 
```

其次是：

```
{ 
  echo "<table border=1>";
  echo "<tr><td>";
  echo "Message #: ";
  echo $row['id'];
  echo "</td></tr>";
  echo "<tr><td>";
  echo "To: ";
  echo $row['to'];
  echo "</td></tr>";
  echo "<tr><td>";
  echo "From: ";
  echo $row['from'];
  echo " ";
  echo "</td></tr>";
  echo "<tr><td>";
  echo "Message: ";
  echo $row['message'];
  echo "</td></tr>";
  echo "</br>";
?>
<form action="<?php echo $_SERVER['PHP_SELF']?>" method="post">
<table border="0">
<tr><td colspan=2></td></tr>
<tr><td></td><td>
<input type="hidden" name="id" maxlength="32" value = "<?php echo $row['id']; ?>">
</td></tr>
<tr><td colspan="2" align="right">
<input type="submit" name="delete" value="Delete PM # <?php echo $row['id']; ?>">
</td>
<td colspan="2" align="right">
<input type="submit" name="reply" value="Reply to <?php echo $row['from']; ?>">
</td></tr>
</table>
<?php } ?> 
```

这到底是如何工作的，从 C 背景来看，它似乎几乎会停留在同一个位置，每次我们通过循环时都从同一个“$query”打印出相同的“array fetch”“row”。 ..

有没有办法可以写这个让我对发生的事情有更好的逻辑理解？就像说：

```
$i=0;
while ($row = ($i+mysql_fetch_array($query)) {
...
...
$i++;} 
```

我知道这可能行不通，但是这个函数如何自我增加？有没有办法在代码中实际显示某种增量的地方编写它？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T17:13:37.030

每次调用`mysql_fetch_array`它都会从查询中提取下一行。该`while`循环一直返回 true 而`mysql_fetch_array`仍然有一些东西要分配给变量`$row2`。一旦它超出行数，它就没有任何东西可以提供变量，并且返回 false。

***ETA：**关于你提到的最后一点，你可以在循环的每次迭代中都有一个变量增量，就像你的例子一样，但这并不是完全必要的。您还可以通过在循环`$var = mysql_num_rows($data)`之前执行类似操作来查看返回了多少行。`while`*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-27T05:06:28.590

也许下面这个函数可以给你一些关于“mysql_fetch_array while loop如何工作的描述？”

```
class test {
    public $plus = -1;
    public $data = array();
    public $return = array();
    function fetcharray(){
        $this->plus++;
        for($i = 0; $i < sizeof($this->data[$this->plus]); $i++){
            $this->return[$i] = $this->data[$this->plus][$i];
        }
        if(sizeof($this->data[$this->plus]) < sizeof($this->data[($this->plus - 1)])){
            for($i = sizeof($this->data[$this->plus]); $i < sizeof($this->data[($this->plus - 1)]); $i++){
                $this->return[$i] = "";
            }
        }
        return ($this->data[$this->plus]) ? $this->return : false;
    }
}
$test = new test();
$test->data = array(
    array("data00","data01","data02","data03","data04","data05"),
    array("data10","data11","data12","data13","data04","data15"),
    array("data20","data21","data22","data23","data24","data25"),
    array("data30","data31","data32","data33","data34","data35"),
    array("data40","data41","data42","data43","data44","data45")
);
while($array = $test->fetcharray()){
    echo $array[0]." = ".$array[1]." = ".$array[2]." = ".$array[3]." = ".$array[4]." = ".$array[5]."<br />\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T17:21:41.337

您可以将其`mysql_fetch_array()`视为类似于文件读取函数，该函数每次将返回一个新行并在它到达末尾时返回 EOF。但不是 EOF，而是`mysql_fetch_array()`返回 FALSE(0)。

在布尔表达式中，PHP 将任何非 0 值评估为 TRUE，因此下面的简单语法循环，每次将行分配给 $row 变量，直到我们到达数据集的末尾：

```
while($row = mysql_fetch_array($query)) {
  // Process row
  ...
} 
```

PHP IDE 实际上会抱怨条件中的赋值，这就是您应该编写相同代码以避免通知的方式：

```
// Get first row, or false if there were no rows
$row = mysql_fetch_array($query);
while ($row) {
  // Process row
  ...
  // Get next row
  $row = mysql_fetch_array($query);
} 
```

也许这个结构看起来更熟悉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T17:32:51.617

mysql_fetch_array() 是一个函数，如果你想从结果执行的查询中获取一行，则必须调用它，因此你可以将其描述为**“mysql_fetch_array — 将结果行获取为关联数组、数值数组或两者”**

场景是这样的：它返回一个与获取的行相对应的数组，并将内部数据指针向前移动。更多说明：

```
$result = mysql_query("SELECT id, name FROM mytable");
$row = mysql_fetch_array($result, MYSQL_NUM); 
```

1) $result 的类型是什么？2) mysql_fetch_array 使用什么类型来工作？

让我来回答这个问题，1) $result 是 mysql_query() 的结果变量，该函数返回类型为**mysql 结果**的结果，该类型只能通过调用 7 个函数来创建：

`mysql_db_query(), mysql_list_dbs(), mysql_list_fields(), mysql_list_processes(), mysql_list_tables(), mysql_query(), mysql_unbuffered_query()`

并且可以被几个函数使用，比如`mysql_fetch_array() and mysql_db_name() and others`

2)函数说明： `array mysql_fetch_array ( resource $result [, int $result_type = MYSQL_BOTH ] )` 见[mysql_fetch_array Doc](http://www.php.net/manual/en/function.get-resource-type.php)

# php - 网站移动后验证码损坏

> ID：10503217
> 
> 赞同：-1
> 
> 时间：2012-05-08T17:12:05.360
> 
> 标签：php, captcha

我最近为我的网站移动了服务器。但是，验证码功能（从 captcha.php 中提取的功能不起作用。我检查了权限，一切似乎都很好，还有什么问题？ [该网站](http://edexec.co.uk/subscribe/)

验证码表格朝向底部。我有一种感觉，我想念一些简单的东西！

验证码.php：

```
<?php
//Start the session so we can store what the security code actually is
session_start();

//Send a generated image to the browser 
create_image(); 
exit(); 

function create_image() 
{ 

    // Set the content-type
    header("Content-type: image/jpg");

    // Create the image
    $im = imagecreatetruecolor(100, 30);

    // Create some colors
    $white = imagecolorallocate($im, 255, 255, 255);
    $grey = imagecolorallocate($im, 128, 128, 128);
    $black = imagecolorallocate($im, 0, 0, 0);
    imagefilledrectangle($im, 0, 0, 399, 29, $white);

    // The text to draw
    $text =  $_SESSION["captcha"];
    // Replace path by your own font path
    $font = 'caviardreams.ttf';

    // Add some shadow to the text
    imagettftext($im, 15, 0, 11, 21, $grey, $font, $text);

    // Add the text
    imagettftext($im, 15, 0, 10, 20, $black, $font, $text);

    // Using imagepng() results in clearer text compared with imagejpeg()
    imagepng($im);
    imagedestroy($im);
} 

?> 
```

这是修复（添加 $font = realpath($font);）：

```
<?php
//Start the session so we can store what the security code actually is
session_start();

//Send a generated image to the browser 
create_image(); 
exit(); 

function create_image() 
{ 

    // Set the content-type
    header("Content-type: image/jpg");

    // Create the image
    $im = imagecreatetruecolor(100, 30);

    // Create some colors
    $white = imagecolorallocate($im, 255, 255, 255);
    $grey = imagecolorallocate($im, 128, 128, 128);
    $black = imagecolorallocate($im, 0, 0, 0);
    imagefilledrectangle($im, 0, 0, 399, 29, $white);

    // The text to draw
    $text =  $_SESSION["captcha"];
    // Replace path by your own font path
    $font = 'caviardreams.ttf';
    $font = realpath($font);

    // Add some shadow to the text
    imagettftext($im, 15, 0, 11, 21, $grey, $font, $text);

    // Add the text
    imagettftext($im, 15, 0, 10, 20, $black, $font, $text);

    // Using imagepng() results in clearer text compared with imagejpeg()
    imagepng($im);
    imagedestroy($im);
} 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:14:11.963

我想它需要 PHP 来安装[GD](http://php.net/manual/en/book.image.php)，但是如果不知道您的服务器在尝试呈现验证码时遇到的错误，就无法判断。检查您的日志。

# python - 元类使类方法成为默认值？

> ID：10503218
> 
> 赞同：4
> 
> 时间：2012-05-08T17:12:07.107
> 
> 标签：python, metaclass, class-method

有没有办法编写一个元类，使得基于这个元类的类中定义的所有方法默认都是类方法（即不需要，例如`@classmethod`装饰等）？

谢谢！

编辑：我对 Python 2.7.3 感兴趣。请原谅遗漏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:24:45.330

当然。真正的问题是你为什么要这样做。我将假设这仅用于教育。实际上，无论这可以用于什么，都可能最好明确地完成（即不使用元类并添加`@classmethod`）。

我知道两个选项：类定义的自定义命名空间和`__new__`. 第一个非常酷，在某些情况下实际上是不可避免的（例如记住方法定义的顺序），但后者更简单、更灵活，不会意外破坏同名的多个赋值，并且在 Python 2 中可用。你的目的，这排除了前者，但我会把它留给所有*可以*使用 Python 3 的人。

要提供自定义命名空间，您必须`__prepare__`在元类中定义并返回类似字典的对象（Ferdinand Beyer 在评论中指出：定义的映射接口`collections`就足够了）。在这种情况下，字典应该重写`__setitem__`以检查值是否为`callable`，如果是，则在`classmethod`存储之前将其包装起来。我非常感谢下面的评论，他们极大地改进了下面的代码。Ferdinand Beyer 注意到这`callable(classmethod(...))`是错误的，并且 agf 指出了与`@classmethod`Python 3 兼容性的不一致之处。

```
import types

# Either this, in a dictionary class instanciated in __prepare__
# Again, Python 3 only
def __setitem__(self, name, value):
    if isinstance(value, types.FunctionType):
        value = classmethod(value)
    super().__setitem__(name, value)

# __prepare__ would be: return AutomaticClassMethodNamespace() or something

# Or this in the metaclass
def __new__(mcls, clsname, bases, ns):
    for name, value in ns.items():
        if isinstance(value, types.FunctionType):
            ns[name] = classmethod(value)
    # Any other metaclass behaviour 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:23:06.640

像这样的东西（2.7）

```
def m(name, bases, dct):
    for k, v in dct.items():
        if type(v) is type(m):
            dct[k] = classmethod(v)
    return type(name, bases, dct)

class A:
    __metaclass__ = m

    def foo(self):
        print self

A.foo() # <class '__main__.A'> 
```

# jquery - 我们如何一次将一个“on”“绑定”到多个选择器？

> ID：10503219
> 
> 赞同：2
> 
> 时间：2012-05-08T17:12:11.940
> 
> 标签：jquery, bind

我想要类似的东西

```
$('#el1').bind({
    click,function(e){
        alert('clicked on el1');
    },
})
$('#el2').bind({
    click,function(e){
        alert('clicked on el2');
    },
}) 
```

使用 'on' 时。我正在寻找类似的东西：

```
$(document).on({
    click:'el1',function(e){
        alert('clicked on el1');
    },
    click:'el2',function(e){
        alert('clicked on el2');
    }
}) 
```

这不起作用。

**[编辑]**
我想我需要更清楚。不同的功能没有共同点。可能这样的事情会做：

```
$(document).on({
    click:'el1',function(e){
        alert('clicked on el1');
    },
    click:'el2',function(e){
        $('body').css('background-color','green');
    }
}) 
```

我目前看到使用`switch case`解决方案最接近我正在寻找的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:43:48.597

如果您的处理程序函数不相关，请不要尝试将它们粉碎成一个。可读性会受到影响。

相反，要清楚并单独附加您的处理程序。

```
$('#el1').click(function() { ... });
$('#el2').click(function() { ... }); 
```

这可以立即识别为两个独立的、不相关的功能。将来，维护和修改此代码会更容易。对您的代码不熟悉的人不必学习古怪的约定；这就是 jQuery 应该如何工作的。

```
$('#el1,#el2').click(function() {
    switch (this.id) {
        case 'el1': ... break;
        case 'el2': ... break;
    }
}); 
```

嗯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:15:12.043

选择器可以在方法调用中设置：

```
$("body").on("click", "#el1, #el2", function(){
alert("clicked on " + $(this).attr("id"));
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T17:15:33.757

您可以组合选择器，或使用通用模式，并`$.on`针对它们使用：

```
$("body").on("click", "[id^='el']", function(){
  switch ( this.id ) {
    case "el1" :
      /* Do el1 stuff */
      break;
    case "el2" :
      /* Do el2 stuff */
  }
}); 
```

演示：http: [//jsbin.com/asoqoz/edit#javascript,html](http://jsbin.com/asoqoz/edit#javascript,html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T17:18:59.607

为元素使用一个类，而不是在所有 DOM 中搜索。

```
<div id="el1" class="someClass"></div>
<div id="el2" class="someClass"></div>

$('.someClass').on('click', function(){
    alert("Clicked on " + this.id);
}); 
```

# java - Java：最有效的字符串操作->从“1-9”中取出“1”

> ID：10503220
> 
> 赞同：2
> 
> 时间：2012-05-08T17:12:13.150
> 
> 标签：java, regex, string

我想用Java从“1-9”中得到“1”或从“125-749”中得到“125”，我该怎么做最简单？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T17:13:30.437

最简单的可能是使用[`String.split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)：

```
str.split("-")[0] 
```

`str`你的字符串在哪里。

如果您想要最快，以下可以在我的盒子上每秒执行约 2 亿次迭代：

```
str.substring(0, str.indexOf('-')) 
```

（在这两种情况下，错误处理都留给读者练习。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:19:22.153

使用 String.split()

```
 str.split("-")[0] 
```

# c# - 一个字符串表：添加一个 int 键，还是不添加？

> ID：10503221
> 
> 赞同：1
> 
> 时间：2012-05-08T17:12:16.883
> 
> 标签：c#, database, code-first

参考以下[问题](https://stackoverflow.com/questions/8201716/ef-code-first-not-generating-table-for-icollectionstring)的答案 1，答案表明最好有一个带有 ID（主键）字段和字符串字段的表，而不仅仅是一个也是主键的字符串字段。

简而言之，我需要存储一个唯一字符串表（每个字符串在表中应该只出现一次）。我对数据库实现知之甚少，所以我希望能得到一些关于哪种方法最好的教育解释（在我的情况下）。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:15:34.040

如果将字符串字段作为主键，则不需要 ID 字段。

在性能方面，整数总是优于字符串。但在你的情况下，这并不重要。

注意：将字符串字段作为主键将确保所有值都是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:41:51.360

如果您的主键必须是 2+ 字段（特别是如果您在其他表中引用此表），则最好有一个 int ID 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:48:26.640

我会添加一个 int/long ID。它使引用更快、更清晰。处理也更容易，特别是如果你有很长的字符串（例如句子）。

# java - 具有类特定属性的最佳解决方案

> ID：10503225
> 
> 赞同：2
> 
> 时间：2012-05-08T17:12:28.803
> 
> 标签：java, oop, polymorphism, composition

我创建了一个实现常用方法的抽象类 A。现在我意识到一个新类必须使用相同的方法但具有不同的属性值。下面是一个快速的总结：

```
public abstract class A implement IUtils {
  protected final String LOGIN_XPATH = "xpathA";

  public String getLoginName() {
    return getXpath(LOGIN_XPATH);
  }
}

public class B extends A {
  private final String LOGIN_XPATH = "xpathB";
} 
```

调用 B.getXpath() 将导致调用超级方法，因此使用“xpathA”。我希望它使用“xpathB”。我考虑在 A 类中使用以下组合：

```
public abstract class A implement IUtils {
  protected IXpaths xpaths = null;

  public A() {
    xpaths = new XPathsClass();
  }  

  public String getLoginName() {
    return getXpath(xpaths.getXpath(StaticString.LOGIN_XPATH));
  }
}

public class StaticString {
  public final String LOGIN_XPATH = "LOGIN_XPATH";
}

public class XPathsClass implements IXpaths {
  private static final Map<String, String> conversionMap = new HashMap<String, String>();

  static {
    conversionMap.put(StaticString.LOGIN_XPATH, "xpathA");
  }

  public String getValue(String query) {
    return conversionMap.get(query);
  }
}

public class XPathsClassB implements IXpaths {
  private static final Map<String, String> conversionMap = new HashMap<String, String>();

  static {
    conversionMap.put(StaticString.LOGIN_XPATH, "xpathB");
  }

  public String getValue(String query) {
    return conversionMap.get(query);
  }
}

public class B extends A {
  public B() {
    super();
    xpaths = new XPathsClassB();
  }
} 
```

这似乎有效，但它使它变得很长并且更难以阅读。有什么更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:19:58.790

是的，我不太喜欢静态在 Java 中跨子类的工作方式。我们有一个争论......我的意思是讨论......关于这个的另一个帖子在这里的某处。

但无论如何，我认为最干净的解决方案是：

```
public abstract class A implement IUtils { 
  public String getXpathValue() {
    return "xpathA";
  }

  public String getLoginName() { 
   return getXpath(getXpathValue()); 
  } 
} 

public class B extends A { 
  public String getXpathValue() {
    return "xpathB";
  }
} 
```

如果每个子类都应该有自己的 Xpath 值，那么将 getXpath 函数放在 A 抽象中。然后，如果您忘记在子类中实现它，您将收到编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:19:17.530

你真的有两个选择：

1.  在基类中有一个变量，并添加一个受保护的 setter 方法，以便子类可以将其设置为新值
2.  根本没有变量，并覆盖每个子类中的方法，以便它返回正确的字符串。

我推荐解决方案 2 - 通过覆盖方法来解决

# sql - 如何在 SQL*Plus 中将参数（值）从函数传递/调用到“选择”stmt？

> ID：10503226
> 
> 赞同：1
> 
> 时间：2012-05-08T17:12:39.037
> 
> 标签：sql, oracle, plsql, toad

我在将创建的函数中的参数传递到“Where”子句中的 SQL*Plus“Select”语句时遇到问题。但是，在这种“Where”子句的情况下，我使用的任何语法似乎都不正确或根本不使用。

这是我创建的函数，它看起来可以编译并运行良好：

```
CREATE OR REPLACE FUNCTION SA_BILL_CNTRL_EXTRNL_FXN(p_client_code      VARCHAR2
                                                   ,p_bill_seq         VARCHAR2
                                                   ,p_bill_control_seq VARCHAR2)
  RETURN VARCHAR2 IS
  v_external_id      VARCHAR2(30);
  v_client_code      VARCHAR2(4) := p_client_code;
  v_bill_seq         NUMBER := to_number(p_bill_seq);
  v_bill_control_seq NUMBER := to_number(p_bill_control_seq);
  v_cnt              NUMBER;
BEGIN
  SELECT COUNT(*)
  INTO v_cnt
  FROM BillControl@SQL_SAREP bc
  WHERE bc."ExternalID" IS NOT NULL
        AND bc."ExternalID" != ''
        AND bc."ClientCode" = p_client_code
        AND bc."BillControlSeq" = v_bill_control_seq
        AND bc."BillSeq" = v_bill_seq;
  IF v_cnt = 1 THEN
    SELECT bc."ExternalID"
    INTO v_external_id
    FROM BillControl@SQL_SAREP bc
    WHERE bc."ExternalID" IS NOT NULL
          AND bc."ExternalID" != ''
          AND bc."ClientCode" = p_client_code
          AND bc."BillControlSeq" = v_bill_control_seq
          AND bc."BillSeq" = v_bill_seq;
  ELSE
    v_external_id := NULL;
  END IF;
  RETURN v_external_id;
END SA_BILL_CNTRL_EXTRNL_FNX;
/ 
```

* * *

此外，当我在函数中使用“IN OUT”参数时，它在运行后失败。

现在，这是我在传递参数时遇到困难的“选择”语句：

```
SELECT NVL(TRIM(eb.CASE_NUM_REEVALUATED), TRIM(eb.CASE_NUM_DUPLICATED)) CaseNumReev
      ,gnc.BILL_CONTROL_SEQ
FROM EPE_Bill eb NETWORK_CROSSWALK gnc
WHERE substr(eb.MIC_BILL_ID, 5, 4) = SA_BILL_CNTRL_EXTRNL_FNX(p_client_code)
      AND gnc.BILL_CONTROL_SEQ = SA_BILL_CNTRL_EXTRNL_FNX(p_bill_seq) 
      AND (to_number(substr(eb.MIC_BILL_ID, 10, 10), '9999999999') = SA_BILL_CNTRL_EXTRNL_FNX(p_bill_control_seq) 
GROUP BY CaseNumReev, gnc.BILL_CONTROL_SEQ; 
```

在过去的两天里，我完全被弄糊涂了。有了这个，如果你能帮助我解决问题，我将不胜感激。

再次感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:34:00.550

试试下面的函数，我也做了一个假设，因为你只传递一个参数，其余的必须是 NULL

```
CREATE OR REPLACE FUNCTION SA_BILL_CNTRL_EXTRNL_FXN(p_client_code IN VARCHAR2 DEFAULT NULL                                               
                                               ,p_bill_seq     IN    VARCHAR2 DEFAULT NULL
                                               ,p_bill_control_seq IN VARCHAR2 DEFAULT NULL)
RETURN VARCHAR2 IS
v_external_id      VARCHAR2(4000);
v_client_code      VARCHAR2(4) := p_client_code;
v_bill_seq         NUMBER := to_number(p_bill_seq);
v_bill_control_seq NUMBER := to_number(p_bill_control_seq);
v_cnt              NUMBER;
BEGIN
     SELECT COUNT(*)
     INTO v_cnt
     FROM BillControl@SQL_SAREP bc
     WHERE bc."ExternalID" IS NOT NULL
     AND bc."ExternalID" != ''
     AND bc."ClientCode" = NVL(p_client_code,bc."ClientCode")
     AND bc."BillControlSeq" = NVL(v_bill_control_seq,bc."BillControlSeq")
     AND bc."BillSeq" = NVL(v_bill_seq,bc."BillSeq");
   IF v_cnt = 1 THEN
      SELECT bc."ExternalID"
      INTO v_external_id
      FROM BillControl@SQL_SAREP bc
      WHERE bc."ExternalID" IS NOT NULL
      AND bc."ExternalID" != ''
      AND bc."ClientCode" = NVL(p_client_code,bc."ClientCode")
      AND bc."BillControlSeq" = NVL(v_bill_control_seq,bc."BillControlSeq")
      AND bc."BillSeq" = NVL(v_bill_seq,bc."BillSeq");
  ELSE
     v_external_id := NULL;
  END IF;
       RETURN v_external_id;
END SA_BILL_CNTRL_EXTRNL_FNX;
/ 
```

你的 SQL 应该是

```
SELECT REC.CaseNumReev,REC.BILL_CONTROL_SEQ FROM
(
 SELECT NVL(TRIM(eb.CASE_NUM_REEVALUATED), TRIM(eb.CASE_NUM_DUPLICATED)) CaseNumReev
  ,gnc.BILL_CONTROL_SEQ AS BILL_CONTROL_SEQ
 FROM EPE_Bill eb ,NETWORK_CROSSWALK gnc
 WHERE substr(eb.MIC_BILL_ID, 5, 4) = SA_BILL_CNTRL_EXTRNL_FNX(p_client_code)
 AND gnc.BILL_CONTROL_SEQ = SA_BILL_CNTRL_EXTRNL_FNX(p_bill_seq) 
 AND (to_number(substr(eb.MIC_BILL_ID, 10, 10), '9999999999')     =SA_BILL_CNTRL_EXTRNL_FNX(p_bill_control_seq))rec    
GROUP BY REC.CaseNumReev,REC.BILL_CONTROL_SEQ 
```

# c# - 在 asp.net 中使用 LinkBut ton 在两个占位符之间导航

> ID：10503229
> 
> 赞同：0
> 
> 时间：2012-05-08T17:12:45.273
> 
> 标签：c#, asp.net, .net

我有一个 aspx contentpage，其中有两个占位符。

```
 <asp:PlaceHolder ID="plh1" runat="server" Visible="false">
 <asp:PlaceHolder ID="plh2" runat="server"> 
```

plh1 在 Page_Load() 上设置为 true，另一个设置为 false。我在 plh1 中有一个 LinkBut​​ton。单击 LinkBut​​ton 时，将使用 plh2 的控件加载相同的 aspx 页面。请让我知道该怎么做，因为我是新手并需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:15:27.003

在链接按钮的点击事件中：

```
plh1.Visible = true;
plh2.Visible = false; 
```

你这样做有问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:32:09.180

就个人而言，我会在面板或 div 中执行此操作。在每个面板中放置适当的控件，并在链接按钮后面的代码中，将每个面板设置为 true 或 false。

如果该按钮旨在在两个面板之间切换，您可以执行类似的操作

```
Panel1.Visible = Panel2.Visible;
Panel2.Visible = !Panel2.Visible 
```

如果您动态添加控件，您将使用 PlaceHolder。我只会建议要添加的控件的数量或类型将根据用户或用户的操作而改变。如果您有要隐藏的控件，直到用户单击按钮然后显示这些控件，并隐藏其他一些控件，则无需动态*添加*控件，只需动态*控制这些控件的显示*即可。这是面板、div 或其他带有静态控件的容器的工作。

# maven - 使用 pom 作为 maven 系统范围依赖

> ID：10503230
> 
> 赞同：0
> 
> 时间：2012-05-08T17:12:48.737
> 
> 标签：maven, maven-2, dependency-management

是否可以将 pom 文件用作 maven 系统范围的依赖项并解决其传递依赖项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:01:56.870

您可以通过使用本地存储库来实现此目的。在你的 POM 中设置：

```
<repositories>
    <repository>
        <id>local-project-repo</id>
        <url>file:${basedir}/lib/repository</url>
    </repository>
</repositories> 
```

然后在 /lib/repository 下重新创建一个 Maven 存储库布局。您可以在此处放置一个 POM 工件，传递依赖关系将得到解决。

当然，您需要将依赖项（在本地 repo 中）与您的项目一起提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:03:15.700

您永远不应该使用系统范围的依赖项，因为它会使您的构建不可转移到其他系统。此外，听起来您喜欢使用 pom 文件进行导入，这可以通过导入范围来实现。详细信息可以在[文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Importing_Dependencies)中找到。

# wpf - WPF：我可以继承 UserControl 但不提供 XAML 吗？

> ID：10503232
> 
> 赞同：2
> 
> 时间：2012-05-08T17:12:54.363
> 
> 标签：wpf, user-controls

我正在扩展一个第 3 方应用程序，它使用看起来像 PRISM 的早期版本来提供可组合性。

我制作了一个视图的原型，它非常简单。为了让我的 UI 插入到第 3 方 UI 中，我的 UserControl 必须实现一个特定的接口（如 IThirdPartyView）。

这很好。但是......现在我想以更生产的方式实现代码。一个关键点是我编写的 UserControls 需要不受污染，所以不要直接依赖于 3rd Party 的东西。如果我们切换到另一个第 3 方，我们不希望在代码中对另一个有依赖关系。

作为 OO 背景，我认为解决方案很简单：将我的 UI 放在一个不依赖于任何第 3 方的单独程序集中。我们称之为 CleanUserControl。然后在第 3 方特定实现中，扩展 CleanUserControl 类，并让该扩展类实现第 3 方特定接口以及扩展我的 CleanUserControl 类，因此类声明类似于：

```
public class SpecificUserControl : CleanUserControl, IThirdPartyView
{
    // Implementation of IThirdPartyView
} 
```

但是...在实践中，我无法实现这一目标。

我设法让它编译，然后在运行时点击它：

```
    组件“CustomerProfile.ThirdParty.View.SecurityView2”没有
    由 URI '/CustomerProfile;component/view/securityview.xaml' 标识的资源

```

实际上，我认为我希望我的扩展只实现背后的代码并从父级继承 xaml，但我不知道这是否可以做到。

我希望我的问题很清楚，我很难解释！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:03:28.927

您不能继承 XAML。这是明确禁止的。您最好的机会是为内容创建一个通用 XAML 模板并将其应用于您的“派生”控件。您可以将模板放置在您想要的任何位置，无论是相同的程序集还是其他。

另一种可能性是实现您的父控件：

*   将您的父控件创建为常规 XAML 控件
*   编译程序集
*   转到 obj 文件夹
*   检查扩展名为 .g.cs 的控件的源代码
*   复制自动生成的代码并重新开始使用纯 C# 创建控件

# php - 在 Windows XP 上从二进制文件下载安装 PHP

> ID：10503236
> 
> 赞同：1
> 
> 时间：2012-05-08T17:13:02.220
> 
> 标签：php, iis, installation, windows-xp

在 Windows XP 上下载并解压“php-5.4.3-Win32-VC9-x86.zip”后，我尝试运行这些文件中的每一个（一次一个），它们都打开了一个 Windows 对话框并且什么都不做。

```
php.exe
php-win.exe
php-cgi.exe 
```

我是否通过运行这些文件错误地安装了 PHP？

==========================

# 更新：2012 年 5 月 8 日下午 4:03

**我发现的最好的教程。虽然我仍然收到以下错误。**

[http://salman-w.blogspot.com/2009/11/installing-php-5-on-iis-with-fastcgi.html](http://salman-w.blogspot.com/2009/11/installing-php-5-on-iis-with-fastcgi.html)

==========================

**导航到页面时出错：**

*CGI 错误 ... 指定的 CGI 应用程序因未返回完整的 HTTP 标头而出现异常。它返回的标题是：*

解决方案似乎涉及添加此代码，但我试图找出在哪里。

```
print "HTTP/1.0 200 OK\n";
print "Content-Type: text/html\n\n\n"; 
```

...我将此代码放在我的 PHP 文件的顶部，错误就消失了。

**这也是一个很好的教程，但是没有使用 FastCGI。**

[http://www.iis-aid.com/articles/how_to_guides/installing_php_5_iis_5_simple_steps](http://www.iis-aid.com/articles/how_to_guides/installing_php_5_iis_5_simple_steps)

===========

***现在我的页面是空白的，但它必须是 Kimai index.php 页面，因为我让 Hello World 应用程序可以正常工作。***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:38:06.617

PHP 的主要使用方法是通过一个模块到 Apache（或任何其他网络服务器，包括 IIS、nginx 和许多其他服务器），无论是直接模块的形式还是通过 CGI。您还可以通过命令行运行 php 脚本。直接执行 php.exe 文件不会产生任何结果。

Apache的简单安装说明：

访问 apachelounge.com

转到下载页面

下载第一件事（httpd-2.4.2-win32.zip）

解压到 C:\Apache24

从同一个站点下载 php5apache2_4.dll-php-5.4-win32.zip

将 php5apache2_4.dll 解压到你的 php 目录中（假设是 C:\php 从这里开始）

将以下代码行添加到 C:\Apache24\conf\httpd.conf 的末尾：

```
LoadModule php5_module "c:/php/php5apache2_4.dll"
AddHandler application/x-httpd-php .php
PHPIniDir "C:/php" 
```

然后以管理员身份运行 cmd 键入以下内容：

```
cd c:\Apache24\bin
httpd.exe -k install 
```

然后运行 ​​apache monitor（在同一个 C:\Apache24\bin 文件夹中找到）并单击 start apache

现在从您的浏览器导航到 localhost，这将显示一条问候消息，将 php 文件放在 C:\Apache24\htdocs 将允许您通过浏览器访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:36:34.607

这些可执行文件用于 Web 服务器。通过执行这些，您正在调用处理 PHP 处理的 PHP 解释器。您需要找到一个自动安装过程的软件包。

根据教程，这些可能会有所帮助（不确定，我只在 IIS 上安装过一次 PHP，那是几年前的事了）。

*   [用于 IIS 的 PHP](http://php.iis.net/)
*   [如何在 IIS 上安装 PHP](http://blogs.iis.net/bills/archive/2006/09/19/How-to-install-PHP-on-IIS7-_2800_RC1_2900_.aspx)
*   [最好的...](http://php.net/manual/en/install.windows.iis.php)

# php - 表连接 SQL/PHP (CRUD)

> ID：10503245
> 
> 赞同：1
> 
> 时间：2012-05-08T17:13:33.850
> 
> 标签：php, mysql, crud, table-relationships

我有两个这样的表：

```
[tblFacilityHrs] id uid title description
[tblFacilityHrsDateTimes] id owner_uid startEventDate endEventDate startTime endTime days recurrence finalDate 
```

它们通过 UID 处于一对多关系中： ![在此处输入图像描述](../Images/95d8feb880eb1aa6d67713adf94281c6.png)

![在此处输入图像描述](../Images/5fb27b6cecad88d175444faacafaade1.png)

我想加入这些表，以便只从 tblFacilityHrsDateTimes 获取 ID 值（这样当我编辑表时，第一个表 tblFacilityHrs 由 UID 编辑，而 tblFacilityHrsDateTimes 由 ID 编辑）。

如何加入表格以便以这种方式对其进行编辑？

像这样的东西：

```
<?php 
include('../config.php'); 
if (isset($_GET['uid']) ) { 
$uid = (int) $_GET['uid'];
$id = (int) $_GET['id'];  
if (isset($_POST['submitted'])) { 
foreach($_POST AS $key => $value) { $_POST[$key] = mysql_real_escape_string($value); } 

//Query for tblFacilityHrs
$sql = "`title` =  '{$_POST['title']}' ,  `description` =  '{$_POST['description']}'   WHERE `uid` = '$uid' "; 
mysql_query($sql) or die(mysql_error()); 

//Query for tblFacilityHrsDateTimes
$sql2 = "`startEventDate` =  '{$_POST['startEventDate']}' ,  `endEventDate` =  '{$_POST['endEventDate']}' ,  `startTime` =  '{$_POST['startTime']}',  `endTime` =  '{$_POST['endTime']}' ,  `days` =  '{$_POST['days']}' ,  `recurrence` =  '{$_POST['recurrence']} ,  `finalDate` =  '{$_POST['finalDate']}' WHERE `id` = '$id' "; 
mysql_query($sql2) or die(mysql_error()); 

echo (mysql_affected_rows()) ? "Edited row.<br />" : "Nothing changed. <br />"; 
echo "<a href='list.php'>Back</a>"; 
} 
$row = mysql_fetch_array (mysql_query("SELECT * FROM `tblFacilityHrs` WHERE `uid` = '$uid'"));
$row2 = mysql_fetch_array(mysql_query("SELECT * FROM `tblFacilityHrsDateTimes` WHERE `id` = '$id'"));
?> 
```

在我的脑海中，我想象表格像这样加入（但它不起作用）：

```
$result = mysql_query("SELECT uid, title, description FROM tblFacilityHrs LEFT JOIN tblFacilityHrsDateTimes ON tblFacilityHrs.uid = tblFacilityHrsDateTimes.owner_uid ORDER BY tblFacilityHrs.description") or trigger_error(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:45:06.120

（*升级到答案*）

您需要从`tblFacilityHrsDateTimes`结果集中选择列：

```
SELECT      uid, title, description, tblFacilityHrsDateTimes.*
FROM        tblFacilityHrs
  LEFT JOIN tblFacilityHrsDateTimes
         ON tblFacilityHrs.uid = tblFacilityHrsDateTimes.owner_uid
ORDER BY    tblFacilityHrs.description 
```

# xcode - UiPageViewController 图片

> ID：10503247
> 
> 赞同：0
> 
> 时间：2012-05-08T17:13:38.437
> 
> 标签：xcode, ios5, uiimageview, uiimage, uipageviewcontroller

您好，我需要在 UIPageViewController 中显示图像，但我有问题

我有一个包含所有图像的 NSMutableArray，但我需要有关如何可视化的帮助

我有这个代码

```
@interface DataViewController : UIViewController

@property (strong, nonatomic) IBOutlet UIImageView *imageView;
@property (strong, nonatomic) UIImage *dataObject;

array = [[NSArray alloc] initWithObjects:
                 [UIImage imageNamed:@"1.png"],
                 [UIImage imageNamed:@"2.png"],
                 [UIImage imageNamed:@"3.png"],
                 nil]; 
```

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:19:38.270

你应该阅读一些关于 `UIPageController`. 他们有很多。以下教程几乎向您展示了您所需要的内容：

[http://www.ioslearner.com/tag/uipageviewcontroller-demo/](http://www.ioslearner.com/tag/uipageviewcontroller-demo/)

如果您有一些更具体的问题，请随时提出。

# qt - 是否可以通过 Qt Webkit 提交 ajax 表单？

> ID：10503249
> 
> 赞同：1
> 
> 时间：2012-05-08T17:13:45.533
> 
> 标签：qt, qtwebkit, qnetworkaccessmanager

我正在开发一个 Qt 应用程序，其中包含一个作为 HTML 页面的 OpenStreetMap 应用程序，并且该页面能够访问数据库——通过提交一个包含查询开始和结束日期的 ajax 表单——以便检索和可视化查询地图。我想将此查询过程从 HTML/Javascript 部分移至 Qt。是否可以通过 Qt Webkit 的 evaluateJavaScript 函数来做到这一点，或者我应该使用 QNetworkAccessManager 吗？我已经尝试了 evaluateJavaScript 方式，但到目前为止，我还无法将我的查询发送到数据库——尽管从显示警报框的 html 文件中调用一些虚拟 js 函数有效——。

# actionscript-3 - 如何在火花组合框flex的右键单击上启用粘贴选项

> ID：10503251
> 
> 赞同：0
> 
> 时间：2012-05-08T17:13:48.767
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4, flex3

我想在右键单击火花组合框时获得粘贴选项以粘贴剪贴板复制的文本。如何在 flex 4 spark 组合框中执行此操作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:55:35.853

得到了解决方案：

1.  将 mouseEnabled 属性设置为 TitleWindow
2.  在 TitleWindow 的 creationComplete 处理程序中，设置`this.skin.enabled = true`

# kohana - 检查 Kohana 中是否存在 Action

> ID：10503253
> 
> 赞同：1
> 
> 时间：2012-05-08T17:13:56.483
> 
> 标签：kohana

我正在为 Kohana 编写一个错误处理程序。有一个控制器`Controller_Errors`（它继承`Controller_Kohana_Errors`），其动作包括`action_404`、`action_403`、`action_500`等。

**路线：**

```
Route::set('errors','errors/<action>', array (
        'action' => '[\d]{3}',
    ))
    ->defaults(array(
        'controller' => 'errors',
    )); 
```

**包括示例 bootstrap.php**

```
try {
    $response = Request::factory()->execute();
} catch (Exception $e) {
    // If we are in development and the error wasn't a 404, show the stack trace.
    // Otherwise, show a nice error.
    if ((Kohana::$environment == KOHANA::DEVELOPMENT) AND ( ! ($e->getCode() == 404 OR $e->getCode() == 403))) {
        throw $e;
    }
    // Log the error
    Kohana::$log->add(Log::ERROR, Kohana_Exception::text($e));

    $error_code = 500;
    if ($e instanceof ReflectionException) {
        $error_code = 404;
    }
    if ($e instanceof HTTP_Exception)
    {
        $error_code = $e->getCode();
    }
    $request = Request::factory('errors/'.$error_code);
    if (*__NOT SURE WHAT GOES HERE__*) {
        $request = Request::factory('errors/500');
    }
    $response = $request->execute();
}

// Send the headers and echo the response
echo $response->send_headers()->body(); 
```

我想让人们扩展我的课程，所以我需要一些方法来检查一个动作是否存在，如果不存在，则更改为显示 500 错误。（参见上面写着的那一行`*__NOT SURE WHAT GOES HERE__*`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:27:04.787

我认为下面的代码会做到这一点：

```
if ($request->status == 404 && $error_code != 404) ... 
```

在这种情况下，您知道 404 不是来自原始请求，因此必须来自加载错误代码的错误页面的 attmpt。

# c# - “基本”语法是什么意思？

> ID：10503255
> 
> 赞同：8
> 
> 时间：2012-05-08T17:13:58.810
> 
> 标签：c#, syntax

有人能告诉我下面的语法是什么意思吗？

```
public ScopeCanvas(Context context, IAttributeSet attrs) : base(context, attrs)
{
} 
```

我的意思是什么`method(argument) : base(argument) {}`？？

PS这是一个类的构造函数。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T17:16:42.873

`:base`语法是派生类型链接到接受指定参数的基类上的构造函数的一种方式。如果省略，编译器将默默尝试绑定到接受 0 个参数的基类构造函数。

```
class Parent {
  protected Parent(int id) { } 
}

class Child1 : Parent {
  internal Child1() { 
    // Doesn't compile.  Parent doesn't have a parameterless constructor and 
    // hence the implicit :base() won't work
  }
}

class Child2 : Parent {
  internal Child2() : base(42) { 
    // Works great
  }
} 
```

还有一种`:this`语法允许链接到具有指定参数列表的相同类型的构造函数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:15:15.787

你的类可能是这样定义的：

```
MyClass : BaseClass 
```

它派生自其他类。 `: base(...)`在您的构造函数上调用基类中适当的构造函数，然后在派生类的构造函数中运行代码。

[这](https://stackoverflow.com/questions/12051/calling-base-constructor-in-c-sharp)是一个相关的问题。

**编辑**

正如**Tilak所指出的，关于**[**base**](http://msdn.microsoft.com/en-us/library/hfw7t1ce.aspx)[关键字](http://msdn.microsoft.com/en-us/library/hfw7t1ce.aspx)的[MSDN 文档](http://msdn.microsoft.com/en-us/library/hfw7t1ce.aspx)**提供了很好的解释。**

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T17:15:51.360

它从传递参数的基类调用构造函数，`context`并且`attrs`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T17:31:33.203

这是一个抽象的重载类构造函数，它允许初始化派生类和基类的参数，并指定是否要使用重载构造函数。 [关联](http://msdn.microsoft.com/en-us/library/k6sa6h87.aspx "关联")

```
public class A
{
    public A()
    { }
    public A(int size)
    { }
};

class B : public A
{
    public B() 
    {// this calls base class constructor A() 
    }
    public B(int size) : base(size)
    { // this calls the overloaded constructor A(size)
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T17:15:36.230

调用基类的命名构造函数。如果未指定 base(argument)，则调用无参数构造函数

[c# 中“base”关键字的真正目的是什么？](https://stackoverflow.com/questions/2644316/what-really-is-the-purpose-of-base-keyword-in-c)

[基本关键字](http://msdn.microsoft.com/en-us/library/hfw7t1ce.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T17:16:27.640

您的类继承自基类，并且当您初始化 ScopeCanvas 类型的对象时，使用 (context, attrs) 的参数列表调用基构造函数

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T17:17:46.740

这意味着此构造函数接受两个参数，并将它们传递给继承对象的构造函数。下面的示例只有一个参数。

```
Public class BaseType
{
    public BaseType(object something)
    {

    }
}

public class MyType : BaseType
{
     public MyType(object context) : base(context)
     {

     } 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-16T10:18:33.110

在上面的例子中，所有人都在谈论**:base**没有人在谈论**base。** 是的 base 用于访问父级的成员，但不仅限于构造函数，我们可以直接使用 base._parentVariable 或 base._parentMethod()。

[根据。例子](http://www.asptricks.net/2015/07/what-is-base-keyword-in-c.html)**

# c++ - std::bind 和 std::thread 总是复制参数的原因是什么？

> ID：10503258
> 
> 赞同：12
> 
> 时间：2012-05-08T17:14:14.420
> 
> 标签：c++, stl, c++11

众所周知，std::bind 和 std::thread 的默认行为是复制（或移动）传递给它的参数，并且要使用引用语义，我们将不得不使用引用包装器。

1.  有谁知道为什么这是一个很好的默认行为？特别是。在具有右值引用和完美转发的 C++11 中，在我看来，仅完美转发参数更有意义。

2.  std::make_shared 虽然并不总是复制/移动，但只是完美地转发提供的参数。为什么这里有两种看似不同的转发参数行为？（总是复制/移动的 std::thread 和 std::bind 与不复制/移动的 std::make_shared ）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T17:44:16.567

`make_shared`转发到*现在*正在调用的构造函数。如果构造函数使用引用调用语义，它将获取引用；如果它确实按值调用，它将制作一个副本。无论哪种方式，这里都没有问题。

`bind`创建对函数的延迟调用，该函数在未来某些未知点被调用，此时本地上下文可能已经消失。如果`bind`使用完美转发，您将不​​得不复制通常通过引用发送且在实际调用时不知道处于活动状态的参数，*将它们存储在某处，并管理该存储*。使用当前的语义`bind`可以为您完成。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T18:07:10.637

对于`std::bind`和`std::thread`，对给定参数的函数调用从调用站点延迟。在这两种情况下，函数何时被调用都是未知的。

在这种情况下直接转发参数需要存储引用。这可能意味着存储对*堆栈*对象的引用。实际执行调用时可能不存在。

哎呀。

Lambda 可以做到这一点，因为您可以根据每次捕获来决定是要通过引用还是值来捕获。使用`std::ref`，您可以通过引用绑定参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T17:20:28.850

最可能的原因很简单，C++ 在默认情况下几乎在所有地方都使用值语义。并且使用引用很容易产生与被引用对象的生命周期有关的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T01:17:53.563

实际上，我确实编写了一个小实用程序来创建延迟调用函子（有点类似`std::bind`，但没有嵌套的绑定表达式/占位符功能）。我的主要动机是这个我发现违反直觉的案例：

```
using pointer_type = std::unique_ptr<int>;
pointer_type source();
void sink(pointer_type p);

pointer_type p = source();

// Either not valid now or later when calling bound()
// auto bound = std::bind(sink, std::move(p));
auto bound = std::bind(
    [](pointer_type& p) { sink(std::move(p)); }
    , std::move(p) );
bound(); 
```

该适配器（将其左值 ref 参数移动到`sink`）的原因是调用包装器 return by`std::bind`总是将绑定的参数作为左值转发。在 C++03 中这不是问题，`boost::bind`因为左值要么绑定到底层 Callable 对象的引用参数，要么通过副本绑定到值参数。在这里不起作用，因为`pointer_type`只能移动。

我得到的见解是，确实有两件事需要考虑：绑定的参数应该如何*存储*，以及它们应该如何*恢复*（即传递给 Callable 对象）。授予您的控制`std::bind`如下：参数以浅层（通过使用`std::ref`）或常规方式（使用`std::decay`完美前向）存储；它们总是被恢复为左值（从拥有的调用包装器继承的 cv 限定符）。除了你可以像我刚刚做的那样用一个小的现场适配器 lambda 表达式绕过后者。

它可以说是大量的控制和大量的表达，而学习相对较少。相比之下，我的实用程序具有如下语义`bind(f, p)`（衰减和存储副本，恢复为左值），`bind(f, ref(p))`（浅层存储，恢复为左值），`bind(f, std::move(p))`（从移动中衰减和存储，恢复为右值），`bind(f, emplace(p))`（从移动中衰减和存储，恢复为左值） . 这感觉就像学习 EDSL。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T17:21:17.173

std::bind 创建一个可调用的，它与 的调用站点分离`std::bind`，因此默认情况下按值捕获所有参数是很有意义的。

一般用例与将函数指针传递给函数而不知道它可能在哪里结束是相同的。

Lambda 为程序员提供了更大的灵活性来决定 lambda 是否会超出捕获参数的范围。

# spring-security - Spring Security 自定义用户授权表

> ID：10503260
> 
> 赞同：5
> 
> 时间：2012-05-08T17:14:24.007
> 
> 标签：spring-security

我正在尝试在我的网络应用程序中使用 Spring Security 3.1。我已经开始关注这个特定的[教程](http://www.mkyong.com/spring-security/spring-security-form-login-using-database/)。

我正在使用此处使用的技术，其中身份验证提供程序是数据源

```
<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"

           users-by-username-query="
              select email,password 
              from usr where email=?" 

           authorities-by-username-query="
              select u.email, ur.authority from usr u, usr_roles ur 
              where u.usr_id = ur.usr_id and u.email =?  " 

        />
    </authentication-provider>
</authentication-manager> 
```

因此，如果您注意到我使用电子邮件作为我的用户名并且我没有启用的列。

这似乎不起作用。

我的登录表单看起来像

```
<form name="f" action="<c:url value="j_spring_security_check" />" method="POST">
    <table>
        <tr>
        <td>User:</td>
        <td><input type="text" name="j_username" value=""></td>
        </tr>
        <tr>
        <td>Password:</td>
        <td><input type="password" name="j_password" />
        </td>
        </tr>
        <tr>
        <td colspan="2">
                <input name="submit" type="submit" value="submit" />
            </td>
        </tr>
        <tr>
        <td colspan="2">
                <input name="reset" type="reset" />
        </td>
        </tr>
    </table>
</form> 
```

请告知如何让这个工作或者我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:35:35.567

我设法自己解决了。我修改了 authentication-manager 配置如下

```
<authentication-manager>
      <authentication-provider>

            <jdbc-user-service data-source-ref="dataSource"

           users-by-username-query="
              select * from (select email as username,password,1 as enabled 
              from usr) where username=?" 

           authorities-by-username-query="
             select * from
            (select u.email username, ur.authority AUTHORITY 
            from usr u, usr_role ur 
              where u.usr_id = ur.usr_id) where  username = ? " 

        />
      </authentication-provider>
    </authentication-manager> 
```

# javascript - 如何使用 JavaScript 倾斜表头上的文本？

> ID：10503261
> 
> 赞同：0
> 
> 时间：2012-05-08T17:14:25.273
> 
> 标签：javascript, jsp, text-formatting

有时我必须建立表格并为表格标题分配不能减少以表示重要值的名称（即“WSS”不起作用的波峰焊台），它的值是一个数字。这些数字的顺序几乎从不超过数百。他们可能很少达到数千，但绝不会达到千分之一或更多。所以，这些表可能看起来很奇怪。

我想知道是否有任何 JavaScript 实现可以将给定的文本逆时针倾斜 90º，因此标题表格单元格会更高而不是更宽。

我很确定我可以生成带有文本的图像，然后将其作为表头的值插入。

可以动态地在jsp上完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:21:04.673

旋转文本可以使用图像（可能动态绘制在 a 上`<canvas>`）或[CSS3 转换](http://www.w3.org/TR/css3-2d-transforms/)属性来完成。图片不能包含可选文本，但它们是在不支持 2D 转换的（旧）浏览器中旋转的唯一可能性。

# asp.net - Telerik radcaptcha - 更改生成新的图像消息

> ID：10503265
> 
> 赞同：1
> 
> 时间：2012-05-08T17:14:51.913
> 
> 标签：asp.net, telerik, captcha

我在我的 asp.net 应用程序中使用 Telerik Radcaptcha 控件。我想要它可以工作，但是有一个小问题。我将 EnableRefreshImage 属性设置为 true，它会创建一个包含文本“生成新图像”的链接，当单击验证码图像更改时，这对于页面的英文版本很好，但我想要其他语言的不同消息。我查看了此控件的文档，但没有看到您可以在哪里设置新图像链接的文本。谁能告诉我这是怎么做到的？

作为参考，这里是控件的标记：

```
<telerik:RadCaptcha ID="fb_Captcha" runat="server" CaptchaTextBoxLabel=""
ProtectionMode="Captcha" CaptchaImage-Height="35" CaptchaImage-Width="100" CaptchaImage-TextLength="5"
ErrorMessage="The code you entered is not valid"  Text="None"  EnableRefreshImage="true" /> 
```

任何建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:14:17.993

刷新链接按钮的文本通过 CaptchaLinkBut​​tonText 属性进行更改。

```
<telerik:RadCaptcha ID="fb_Captcha" runat="server" CaptchaTextBoxLabel=""
ProtectionMode="Captcha" CaptchaImage-Height="35" CaptchaImage-Width="100" CaptchaImage-TextLength="5"
ErrorMessage="The code you entered is not valid"  Text="None"  EnableRefreshImage="true" CaptchaLinkButtonText="Refresh" /> 
```

您还可以使用 css 将文本更改为图像：

```
.rcRefreshImage
{
    padding: 1px;
    height: 30px;
    width: 30px;
    display: block;
    background-repeat: no-repeat;
    background-image: url('../Images/RefreshButton.gif');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:52:20.237

Telerik 维护自己的论坛，我相信他们可以介绍如何使用 radCaptcha 设置全球化和本地化。我会发布一个答案。

# javascript - 如何使用 jquery 选择器获取第三或第四个元素并设置其 id

> ID：10503266
> 
> 赞同：2
> 
> 时间：2012-05-08T17:15:00.747
> 
> 标签：javascript, jquery, jquery-ui

我想获取第三个或第四个元素并设置它的 id。

我找到：

```
$('#menu li:first').attr('id', 'test') 
```

它实际上有效，但我只得到第一个元素。另一方面，我尝试使用以下内容，但它不起作用。

```
$('#menu li').get(0).attr('id', 'test') 
```

有人可以解释如何获得理想的元素吗？（例如 4 或 5）并设置其 id 以及为什么第二组代码不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:17:16.310

您可以使用`eq()`方法：

```
$('#menu li').eq(2).attr('id', 'third') // selects third element
$('#menu li').eq(3).attr('id', 'fourth') // selects fourth element 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T17:16:56.283

尝试使用`.eq`功能。

```
$('#menu li').eq(4).attr(...) 
```

或者

```
$('#menu li:eq(4)').attr(...) 
```

在旁注`.get(0)`中返回一个 DOM 元素而不是 jQuery 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:18:44.060

```
$('#menu li:eq(3)').attr('id', 'id_4');
$('#menu li:eq(4)').attr('id', 'id_5'); 
```

或者

```
$('#menu li').eq(3).attr('id', 'id_4');
$('#menu li').eq(4).attr('id', 'id_5'); 
```

`eq()`或者`:eq()`两者都采用目标元素的参数索引，并且它总是

`targetElementIndex - 1`. 因为它是基于零的。

因此，如果您以第 4 个或第 5 个元素为目标，那么您必须将参数作为 3 和 4。

[演示](http://jsfiddle.net/QStkd/24/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T17:37:00.187

如评论中所述， get() 返回 DOM 元素。

可以在不使用 jquery 的情况下设置元素的 id `attr()`。

```
$('#menu li').get(3).id = 'test'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T17:19:12.913

```
$('#menu') 
```

选择 id 为“menu”的元素。

```
$('#menu li') 
```

或者

```
$('#menu').find('li') 
```

选择它的所有`<li>`后代和

```
$('#menu li').eq(3) 
```

选择第四个（因为它们从零开始标记）。

另请注意

```
$('#menu li')[3] 
```

将获得 HTMLElement 本身，而不是其 jQuery 包装器。

# jquery - 减小表格中的字体大小，使表格适合 div

> ID：10503276
> 
> 赞同：2
> 
> 时间：2012-05-08T17:15:25.007
> 
> 标签：jquery

我有一个固定宽度的 div，它的表格比 div 宽。我想做的是缩小表格文本，使其适合 div。

[根据此页面](https://stackoverflow.com/questions/2124351/set-width-in-percentage-using-jquery)将表格宽度设置为 100% 将宽度设置为百分比不起作用。

以下代码将起作用，但我如何自动化它，即计算 FontSize？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
     <link rel="stylesheet" href=/themes/base/jquery.ui.all.css">
     <script src="/jquery-1.7.1.js"></script>    
    <script src="/ui/jquery.ui.core.js"></script>    
    <script src="/ui/jquery.ui.widget.js"></script>    
    <script src="/ui/jquery.ui.mouse.js"></script>    
<script src="/ui/jquery.ui.resizable.js"></script>    
<style>
  #narrorColumn{
    width: 250px;
  }
</style>

<script type="text/javascript">
 function ShrinkTable(){
var FontSize = 6;

function ShrinkTable(){
   var TabWidth = $("#tbl").width();
   var DivWidth= $("#narrowColumn");
   if (DivWidth <= TabWidth)
    {
      $("#tbl").css('font-size', FontSize);
    }
}

</script>

</head>
<body onLoad="ShrinkTable()" >
<div id = "narrorColumn" >
<table id="tbl" border="10">
<thead>
<tr>
<th>First Column</th>
<th>Second Column</th>
<th>Third Column</th>
<th>Forth Column</th>
</tr>
</thead>
<tbody>
<tr>
<td>Some Random text here</td>
<td>Some Random text here</td>
<td>Some Random text here</td>
<td>Some Random text here</td>
 </tr>
<tr>
<td>Mary Had a little lamb</td>
<td>Mary Had a little lamb</td>
<td>Mary Had a little lamb</td>
<td>Mary Had a little lamb</td>
</tr>
<tr>
<td>Humpty Dumpty sat on a wall</td>
<td>Humpty Dumpty sat on a wall</td>
<td>Humpty Dumpty sat on a wall</td>
<td>Humpty Dumpty sat on a wall</td>
</tr>
<tr>
<td>Hay diddle diddle the kat and the fiddle</td>
<td>Hay diddle diddle the kat and the fiddle</td>
<td>Hay diddle diddle the kat and the fiddle</td>
<td>Hay diddle diddle the kat and the fiddle</td>
</tr>
</tbody>
</table>
</div>
<div> <input type=button value="Make Big" onClick="$('#tbl').makeBig()">
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:07:48.570

我认为上面的代码行不通。它有一些拼写错误。

我不确定这是否会对性能产生很大影响，但我认为您可以尝试减小字体大小，直到表格大小小于表格宽度。

见下面的代码：

```
<div id = "narrorColumn" >
<table id="tbl" border="10">
<thead>
<tr>
<th>First Column</th>
<th>Second Column</th>
<th>Third Column</th>
<th>Forth Column</th>
</tr>
</thead>
<tbody>
<tr>
<td>Some Random text here</td>
<td>Some Random text here</td>
<td>Some Random text here</td>
<td>Some Random text here</td>
 </tr>
<tr>
<td>Mary Had a little lamb</td>
<td>Mary Had a little lamb</td>
<td>Mary Had a little lamb</td>
<td>Mary Had a little lamb</td>
</tr>
<tr>
<td>Humpty Dumpty sat on a wall</td>
<td>Humpty Dumpty sat on a wall</td>
<td>Humpty Dumpty sat on a wall</td>
<td>Humpty Dumpty sat on a wall</td>
</tr>
<tr>
<td>Hay diddle diddle the kat and the fiddle</td>
<td>Hay diddle diddle the kat and the fiddle</td>
<td>Hay diddle diddle the kat and the fiddle</td>
<td>Hay diddle diddle the kat and the fiddle</td>
</tr>
</tbody>
</table>
</div>
<div> <input type=button value="Make Big" onClick="$('#tbl').makeBig()">
</div>​ 
```

CSS

```
#narrorColumn{
    width: 300px; /* You can play around with this width to test it */
    background-color:#ccc;
}

#tbl {
width:100%;
    font-size:55px;
}
​ 
```

javascript

```
function ShrinkTable() {
    var FontSize = parseInt($("#tbl").css('font-size').replace('px', ''),10);
    var TabWidth = $("#tbl").width();
    var DivWidth = $("#narrorColumn");
    /****REMOVED equal sign(=) ****/
    if (parseInt(DivWidth.css('width').replace('px', ''),10) < TabWidth) {
        $("#tbl").css('font-size', FontSize - 4 + 'px'); /* you can change 4 with any number, the smaller is better but it may require more loop */
        //Shrink the font while div width is less than table width
        ShrinkTable();
    }
}

$(document).ready(function() {
    ShrinkTable();
});​ 
```

我希望它能回答你的问题。[在这里](http://jsfiddle.net/v2g86/2/)查看 jsfiddle

# python - 使用 BeautifulSoup 从 Class 中查找 ID

> ID：10503282
> 
> 赞同：0
> 
> 时间：2012-05-08T17:15:38.893
> 
> 标签：python, beautifulsoup

我正在尝试使用 BeautifulSoup 返回要使用 Selenium 单击的单元格的 ID。每次加载页面时 ID 都会更改，因此我试图根据以下类别查找特定单元格：

`<table cellspacing="0" role="presentation" id="x-auto-667" class=" x-btn x-component x-btn-text-icon" style="margin-right: 0px;">`

我尝试了很多变体：soup.find(class=' x-btn x-component x-btn-text-icon')['id']

没有成功。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:40:24.353

你可以试试这个：

```
dict(soup.find('table', {'class' : ' x-btn x-component x-btn-text-icon'}).attrs)['id'] 
```

`class`是关键字，所以不能写`class = ...`. 于是就有了字典。您还需要将属性集合转换为字典以`id`用作键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:39:59.870

根据[BeautifulSoup 文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Searching%20by%20CSS%20class)，有一个搜索 CSS 类的快捷方式：为`attrs`参数传递一个字符串。当然，这样做时你必须给它一个名字，否则字符串会被误解为`name`. 简而言之，您可以使用 找到您的表`soup.find('', 'x-btn x-component x-btn-text-icon')`，并`id`使用：

```
soup.find('', 'x-btn x-component x-btn-text-icon')['id'] 
```

# javascript - 在字符串javascript中获取indexOf char

> ID：10503283
> 
> 赞同：0
> 
> 时间：2012-05-08T17:15:43.653
> 
> 标签：javascript, string, indexof

如何检查字符串中字符的索引？

```
var str = 'alabama';
alert(str.indexOf('a')); 
```

“indexOf”方法似乎只在字符第一次出现时起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:18:24.243

要查找后续的匹配项，您需要将第二个参数提供给`.indexOf`，重复从比找到的最后一次匹配项高的一个开始。

```
String.prototype.allIndexesOf = function(c, n) {
    var indexes = [];
    n = n || 0;
    while ((n = this.indexOf(c, n)) >= 0) {
        indexes.push(n++);
    }
    return indexes;
} 
```

测试：

```
> "alabama".allIndexesOf("a")
[0, 2, 4, 6] 
```

**EDIT**函数更新为允许指定 a `fromIndex`, per `String.indexOf`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:18:07.510

您可以编写自己的函数：

```
function charIndexes(string, char) {
    var i, j, indexes = []; for(i=0,j=string.length;i<j;++i) {
        if(string.charAt(i) === char) {
            indexes.push(i);
        }
    }

    return indexes;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:54:14.250

```
var str = 'alabama',i=0, ci=[];

while((i=str.indexOf('a',i))!=-1)  ci.push(i++);

alert(ci.join(', ')); 
```

# iphone - 如何避免滚动时 UITableViewCell 中的图像被刷新？

> ID：10503286
> 
> 赞同：0
> 
> 时间：2012-05-08T17:15:46.143
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我已经实现了自定义 NSCache 来存储远程下载的图像，这些图像显示在我的`UITableViewCells`. 请注意，图像是异步下载的。

但是，如果我快速上下滚动，即使图像来自本地，我仍然可以看到正在刷新的图像。任何人都可以帮助我了解如何避免令人耳目一新的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:31:25.907

重用 tableView 单元格是一个很好的做法，因此您需要在 更新图像`cellForRowAtIndexPath`，否则图像将被弄乱。

但是，我可以建议一些优化：

*   提高缓存性能以使图像加载更快，

*   在将图像添加到单元格 imageView 时使用标准或自定义标记，`cellForRowAtIndexPath`使用此公式作为哈希指示符将单元格的图像标记值与单元格索引/行号的组合（如部分 * 1000 + 行）进行比较。这应该让您知道您是否真的需要更新显示的图像，并且可能会为您节省一些缓存读取操作，

*   如果加载的图像很大并且您使用调整大小的版本显示在单元格上，请单独存储缩略图 - 这将为您节省可能非常昂贵的调整大小操作，

*   确保重新加载缓存中已经过时的图像，不要过于频繁地执行检查也很重要，因为大量的 HTTP 请求会使应用程序看起来很慢并且会更快地耗尽电池（更不用说状态栏上令人讨厌的活动指示器，因为我希望尽可能少地看到用户）。

希望能帮助到你。

* * *

在你有很多单元格的情况下，它们中的大部分将被重用，而不是创建。如果您要`addSubview`为任何单元格添加按钮，则已重用的单元格将已经添加，标签文本、图像也将被重用。

在这种情况下，您可能需要检查是否需要为现有按钮设置新图像。一种简单的方法是将单元格的部分和行号存储在图像标记（或单元格标记或按钮标记等）处，该公式用于将两个数字存储在单个属性中。**它会让你知道你必须重用的单元格的部分/行号。**

它并不总是有效的，您可以根据自己的拥有和需要找到更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:22:17.003

在 TableView 委托的 cellForRowAtIndexPath 方法中，您需要检查图像是否在缓存中，如果没有，则需要下载它。如果存在，您需要将单元格的图像设置为缓存中的版本。我假设您没有从缓存中提取图像，而是重新下载它。

# javascript - 从文件服务器读取 XML 文件？

> ID：10503287
> 
> 赞同：0
> 
> 时间：2012-05-08T17:15:47.240
> 
> 标签：javascript, html, xml, webserver

我有一个静态 Web 服务器，它的网页需要从文件服务器上的 XML 文件（通过 Javascript）中提取数据。但是，我似乎无法连接到文件服务器。如果我将 XML 文件放在我的 Web 服务器上，它可以正常工作，但放在文件服务器上时就不行了。为了使用 HTTPRequest 读取 XML 文件，XML 文件所在的服务器是否需要是 Web 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:20:39.200

是的，因为您使用的是 XMLHttpRequest，所以 XML 文件需要由 HTTP 协议提供服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:21:11.463

是的，这就是 ajax 跨端脚本安全性。但有解决方案：1-您需要将 xml 包装在 jsonP 包中 2-或调用仅用作代理的本地动态文件（以获取远程文档）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:25:47.407

首先，当您使用 XMLHttpRequest 时，您只能访问相同域、协议和端口上的 URL。

其次，如果您尝试连接的服务器不是 Web 服务器（即不使用 HTTP 提供数据），那么在向其发送 HTTP 请求时您将不会得到有效的响应。

为了让它工作，您需要将 XMLHttpRequests 发送到服务器端程序/脚本，该程序/脚本从文件服务器读取文件并将其返回给浏览器。

# visual-studio-2010 - 又一个 LNK2005 错误“方法已在库中定义...”

> ID：10503288
> 
> 赞同：1
> 
> 时间：2012-05-08T17:15:47.393
> 
> 标签：visual-studio-2010, visual-c++

我将一个 VS2005 项目转换为 VS2010，我是否对转换为 2010 时引入的 LNK2005 错误感到困惑。

```
3> 搜索 C:\Program Files\Microsoft Visual Studio 10.0\VC\atlmfc\lib\nafxcwd.lib：
3>nafxcwd.lib(viewcmn.obj)：错误 LNK2005：“受保护：虚拟结构 AFX_MSGMAP const * __thiscall CListView::GetMessageMap(void)const”(?GetMessageMap@CListView@@MBEPBUAFX_MSGMAP@@XZ)
  已在 uafxcwd.lib(viewcmn.obj) 中定义

```

我已经广泛阅读了各种原因，并验证了所有库在调试\发布和运行时库以及（我相信）CRT 库之前的 MFC 链接方面都是一致的（尽管我没想到这些在转换到 2010 后会改变。）

我怀疑问题是将 Unicode 库与非 Unicode 库链接的项目？输出显示“nafxcwd.lib”中的方法已在“uafxcwd.lib”中定义。如果这真的是问题，那么我不确定为什么在转换到 2010 后引入它，安全的解决方案是什么？我有点不愿意忽略其中一个库，并希望在运行时获得最好的结果。Unicode 库必须保持 Unicode，非 Unicode 库必须保持非 Unicode，2005 年还可以，2010 年不行。

有什么建议么？

# c++ - 调整窗体大小时调整控件大小

> ID：10503292
> 
> 赞同：0
> 
> 时间：2012-05-08T17:16:04.503
> 
> 标签：c++, .net, windows, user-interface

windows gui编程的新手在这里。有没有人知道如何在调整窗体大小时调整窗体中控件的大小。在 wxpython 中，它是用 sizers 完成的，但是在使用 windows visual c++ 开发 guis 时我似乎找不到任何类似的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T17:19:22.757

控件有一个名为“Anchor”的成员。您可以从编辑器中看到它。如果您希望对象在其矩形的所有四个角中保持定位，您可以简单地启用 Anchor 下的所有子属性。

您可以在此处阅读有关该成员的更多信息：[Microsoft.com/Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)。如果你想动态启用控件的属性，你可以简单地使用这个例子：

```
Control.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top |   System.Windows.Forms.AnchorStyles.Bottom) 
        | System.Windows.Forms.AnchorStyles.Left) 
        | System.Windows.Forms.AnchorStyles.Right))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:25:50.023

我设法从 Form1.h 使用

```
Form1->Width = 300;
Form1->Height = 300; 
```

在事件内部（例如，当您单击 button1 时）。更多内容可以在[这里](http://msdn.microsoft.com/en-us/library/ms229606.aspx)阅读。

# button - 带有按钮功能的窗口窗体powershell

> ID：10503295
> 
> 赞同：1
> 
> 时间：2012-05-08T17:16:18.737
> 
> 标签：button, powershell, window

我有这个带有“**事件处理程序**”的功能，但我无法在**$event**中定义操作部分的值，

```
$event=Register-ObjectEvent $Button click -SourceIdentifier $clickV -action {write-host $buttonV } 
```

我有按钮但没有输出，请参见下面的函数参数，

如果我改变我的行：

```
$event=Register-ObjectEvent $Button click -SourceIdentifier $clickV -action {write-host "OK"} 
```

我有按钮和输出

欢迎任何帮助，

* * *

```
Function Button
{
    param(
        [int]$EmplXButton,
        [int]$EmplYButton,
        [innt]$LongButton,
        [int]$LargButton,
        [string]$ButtonName,
        [string]$clickV,
        [int]$ButtonV
    )
    $Button = New-Object System.Windows.Forms.Button
    $Button.Location = New-Object System.Drawing.Size($EmplXButton,$EmplYButton)
    $Button.Size = New-Object System.Drawing.Size($LongButton,$LargButton)
    $Button.Text = $ButtonName
    $event=Register-ObjectEvent $Button click -SourceIdentifier $clickV -action {
        write-host $buttonV ; Unregister-Event $clickV
    }
    $Button.Add_Click({$objForm.Close()})
    $objForm.Controls.Add($Button)
}

Button 20 60 90 23 zero clickV0 0
Button 115 60 90 23 one clickV1 1
Button 210 60 90 23 two clickV2 2
Button 305 60 90 23 three clickV3 3
#>

$objForm.Add_Shown({$objForm.Activate()})
[void] $objForm.ShowDialog() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:17:07.437

嗨，我的论坛也有同样的问题。这就是我所做的，也许你可以改变我的例子。如果您需要我解释任何事情，请告诉我。

***带有按钮的工作论坛并发布到论坛。***

```
#Generated Form Function
function GenerateForm {

#region Import the Assemblies
[reflection.assembly]::loadwithpartialname("System.Windows.Forms") | Out-Null
[reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null
#endregion

#region Generated Form Objects
$MainForum = New-Object System.Windows.Forms.Form
$GetServices = New-Object System.Windows.Forms.Button
$richTextBox1 = New-Object System.Windows.Forms.RichTextBox
$InitialFormWindowState = New-Object System.Windows.Forms.FormWindowState
#endregion Generated Form Objects

#----------------------------------------------
#Generated Event Script Blocks
#----------------------------------------------
#Provide Custom Code for events specified in PrimalForms.

$OnLoadForm_StateCorrection=
{#Correct the initial state of the form to prevent the .Net maximized form issue
    $MainForum.WindowState = $InitialFormWindowState
}

#----------------------------------------------
#region Generated Form Code
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 262
$System_Drawing_Size.Width = 461
$MainForum.ClientSize = $System_Drawing_Size
$MainForum.DataBindings.DefaultDataSourceUpdateMode = 0
$MainForum.Name = "MainForum"
$MainForum.Text = "Demo GUI"

$GetServices.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 13
$System_Drawing_Point.Y = 26
$GetServices.Location = $System_Drawing_Point
$GetServices.Name = "GetServices"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 23
$System_Drawing_Size.Width = 75
$GetServices.Size = $System_Drawing_Size
$GetServices.TabIndex = 1
$GetServices.Text = "GetServices"
$GetServices.UseVisualStyleBackColor = $True
$GetServices.add_Click({ GetServices($GetServices) })
$richTextBox1.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 12
$System_Drawing_Point.Y = 132
$richTextBox1.Location = $System_Drawing_Point
$richTextBox1.Name = "richTextBox1"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 118
$System_Drawing_Size.Width = 437
$richTextBox1.Size = $System_Drawing_Size
$richTextBox1.TabIndex = 0
$richTextBox1.Text = "Results Out Put To This Box"

$MainForum.Controls.Add($richTextBox1)
$MainForum.Controls.Add($GetServices)
#endregion
function GetServices($object)
{
 OutputText
}

function OutputText($object)
{
$service = (Get-Service s*) 
 foreach ($_ in $service)
 {
 $name = $_.Name
 $status = $_.Status
 $richTextBox1.Text = $richTextBox1.Text + $name + "  "  +$status  + "`r"
}
}

#Save the initial state of the form
$InitialFormWindowState = $MainForum.WindowState
#Init the OnLoad event to correct the initial state of the form
$MainForum.add_Load($OnLoadForm_StateCorrection)
#Show the Form
$MainForum.ShowDialog()| Out-Null

} #End Function
#Call the Function
GenerateForm 
```

# c# - 可以像 Java 一样使用 C# 绘图吗？

> ID：10503306
> 
> 赞同：1
> 
> 时间：2012-05-08T17:16:58.400
> 
> 标签：c#

我目前正在阅读 Java 中的算法教科书。我设法将两个必需的库从 java 转换为 c#；但是，第三个涉及设置用于绘图的画布。

使用visual C#，我是使用winforms/WPF来绘制还是可以像java一样设置一个直接的C#？（我实际上不知道它是否直接，因为我不熟悉java并且宁愿不学习java学习算法）

我只是希望能够跟随这本书并完成练习。

使用书籍：C# 2010 和.net 平台和扫网学习c# 这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:19:44.510

如果您只想学习如何绘画，我建议您使用简单的`WindowsForms`应用程序而*不是* `WPF`. 通过这种方式，您将更清楚地了解必须做什么才能在屏幕上绘制某些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:22:58.590

如果您要使用 Java 在画布上绘图，您仍然需要初始化某种 GUI 库（AWT/Swing/等）。您可以通过使用 WinForms 或 WPF 来完成此操作。与 WPF 相比，WinForms 完成此特定任务的复杂性较低。创建一个 WinForms 项目并在您的 Window1 类（或任何主窗口类的名称）中，覆盖 OnPaint 方法，您将能够使用图形上下文直接绘制到窗口。

# android - Textview 行没有正确换行

> ID：10503307
> 
> 赞同：0
> 
> 时间：2012-05-08T17:17:00.323
> 
> 标签：android, android-layout, android-listview, textview

我有一个 ListView，我为每一行创建了一个自定义视图。我的视图由两个要并排显示的文本视图组成。第一个文本视图（idno）有一个背景图像集，我将文本居中。第二个文本视图（材料）的每一行都有可变数量的行。

我遇到的问题是线条在换行之前超出了右侧。似乎它没有考虑第一个 textview 宽度。

这是我的布局文件：

```
<TableLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent">
<TableRow>
    <TextView 
        android:id="@+id/idno"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:gravity="center"
        android:textColor="#000000"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>    
    <TextView 
        android:id="@+id/materials"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:textColor="#0000ff"
        android:textStyle="bold"
        android:textSize="12sp"
        android:maxLines="5"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="10sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
</TableRow> 
```

任何建议或解决方案将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:21:53.727

我建议您使用`LinearLayout`with`orientation="horizontal"`来显示两个 TextView，例如：

```
<LinearLayout
    android:orientation="horizontal">
    <TextView/>
    <TextView/>
</LinearLayout> 
```

# ruby - 将索引转换为坐标

> ID：10503312
> 
> 赞同：2
> 
> 时间：2012-05-08T17:17:15.927
> 
> 标签：ruby, arrays, math, multidimensional-array, coordinates

当我有一个数组（1D、2D、3D 或更多维度）时，我希望能够将索引（来自这个扁平数组）转换为它的坐标。

例如，考虑`*`正方形：

### 3D 数组（[2,3,2] 形状）

```
arr = [ [ [ nil, nil ],
          [ nil, nil ],
          [ nil, nil ] ],
        [ [ "*", nil ],
          [ nil, nil ],
          [ nil, nil ] ] ]

arr.flatten[6]           # => "*"
arr.index2coordinates(6) # => [1,0,0] or [1][0][0] 
```

### 4D 数组（[2,3,1,2] 形状）

```
arr = [ [ [ [ nil, nil ],
            [ nil, "*" ],
            [ nil, nil ] ] ],
        [ [ [ nil, nil ],
            [ nil, nil ],
            [ nil, nil ] ] ] ]

arr.flatten[3]           # => "*"
arr.index2coordinates(3) # => [0,0,1,1] or [0][0][1][1] 
```

### 一维数组（[5] 形状）

```
arr = [ nil, nil, nil, "*", nil ]

arr.flatten[3]           # => "*"
arr.index2coordinates(3) # => [3] 
```

我们怎么能做这样的`Array#index2coordinates`方法？从某种意义上说，这个问题与[Convert vector to integer](https://stackoverflow.com/questions/10392149/convert-vector-to-integer)问题的逆题。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T20:19:56.303

示例，一步一步：

```
# 3D array (of [2,3,2] shape)
arr.flatten[6]           # => "*"
arr.index2coordinates(6) # => [1,0,0] or [1][0][0]

6 % 2              # => 0

(6 / 2) % 3        # (3) % 3 => 0

((6 / 2) / 3) % 2  # ((3) / 3) %2 => 1 % 2 => 1

# 4D array (of [2,1,3,2] shape)    
arr.flatten[3]           # => "*"
arr.index2coordinates(3) # => [0,0,1,1] or [0][0][1][1]

3 % 2                     # => 1

(3 / 2) % 3               # => 1 % 3 => 1

((3 / 2) / 3) % 1         # => 1 % 1 => 0

(((3 / 2) / 3) / 1) % 2   # 0 % 2 => 0 
```

第二个示例的简单代码

```
result = []
index = 3

[2,1,3,2].reverse.each do |dimension|
  result = [index % dimension] + result
  index = (index / dimension)
end

result          # => [0, 0, 1, 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:34:17.250

当您进入每个步骤时，尝试通过构建 n 维索引的结构进行递归搜索，如果/当您找到`*`目标时返回索引：

```
def coord(space, target='*', idx=[])
  found = nil
  space.each_with_index do |x,i|
    found = if x.is_a?(Array)
      coord(x, target, idx + [i])
    elsif x == target
      idx + [i]
    end
    break found if found
  end
  found
end

coord(arr3d) # => [1, 0, 0]
coord(arr4d) # => [0, 0, 1, 1]
coord(arr1d) # => [3]
coord([]) # => nil 
```

# ruby-on-rails - 使用元编程获取特定的 Rails 对象类型？可能吗？

> ID：10503317
> 
> 赞同：1
> 
> 时间：2012-05-08T17:17:34.320
> 
> 标签：ruby-on-rails, activerecord, metaprogramming

所以我有一个与多个模型相关的连接表，并存储适当的 id 和类，如下所示：

```
Statistics
-----------------------------------
|object_type | object_id | value  |
-----------------------------------
| "User"     |     1     |  100   |
-----------------------------------
| "Post"     |     61    |  50    |
----------------------------------- 
```

我希望使用元编程来传递“object_type”并以某种方式使用生成的对象，如下所示：

```
send("User").find(1)        #i.e. User.find(1)
send("Post").find(61)       #     Post.find(61) 
```

除了构造复杂的 if-else 或 case 语句（即 if object_type == "User"...）之外，有什么好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:21:53.553

类以常量命名，因此您可以使用[const_get](http://ruby-doc.info/classes/Module.html#M001257)轻松地将字符串转换为类：

```
self.class.const_get("User").find(1) 
```

或者

```
Object.const_get("User").find(1) 
```

但通常最好使用第一个版本，因为它更接近于您直接引用该类时所获得的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:26:30.880

由于您在 Rails 中，ActiveSupport 通过[http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)为您提供 String#constantize 。这可能是处理它的最“狡猾”的方式。它只是在幕后使用 const_get，但它也有一些逻辑来帮助避免错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:53:09.870

我不确定它是否真的是一个好的解决方案，但 eval 只是有效。也许有一些理由不这样做，不知道

```
eval("User").find(1) 
```

# ruby-on-rails-3 - 如何遍历模型中的访问器？

> ID：10503326
> 
> 赞同：0
> 
> 时间：2012-05-08T17:18:07.807
> 
> 标签：ruby-on-rails-3

是否可以遍历模型中的访问器？

我有一个看起来像的模型：

```
class Account < User
  #Required fields
  attr_accessor :email, :first_name, :last_name, :organizations
end 
```

我得到一个看起来像

```
@name : email
@value : nick@nick.com

@name : first_name
@value : nick 
```

我有一堆看起来像这样的代码：

```
 unless(item.Field["@name"].to_s.match('E-mail').nil?)
    @account_new.email = item.Field["@value"].to_s
  end

  unless(item.Field["@name"].to_s.match('First Name').nil?)
    @account_new.first_name = item.Field["@value"].to_s
  end 
```

这是可怕的代码。我想知道是否可以遍历模型中的访问器并获取访问器的名称并使用它在 JSON 对象中进行模式匹配，然后进行分配？

我尝试使用 .instance_variables.each 做 |variable|

但它似乎并不像我认为的那样工作。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:39:30.347

在 Ruby 中，可以通过发送消息来设置属性：

```
key = item.Field["@name"]
value = item.Field["@value"]
@account_new.send("#{key}=", value) 
```

# c# - 如何在具有多个相同控件的表单上实现接口？

> ID：10503328
> 
> 赞同：1
> 
> 时间：2012-05-08T17:18:10.543
> 
> 标签：c#, events, button, interface

好的，所以我构建了一个处理所见即所得编辑的自定义控件。基本上在 1 个控件上，我有多个所见即所得编辑器的实例。所以一个可能是为了编辑，比方说，一个食谱。另一个可能是该食谱的注释。

我的所见即所得编辑器上有一个按钮，该按钮使用一个界面来对同时包含它们的控件进行回调，所以我知道我的父控件何时单击该按钮。如何找出哪个控件触发了回调？

例子

**主表格**

```
public partial class MyCustomControl: RecipeControl.ISavedButton {

    private void SaveButton_Clicked(){
        //Do Work but how do I find out which control fired this event?
        //Was it RecipeControl1 or RecipeControl2
    }

} 
```

**我的解决方案**

在我的食谱控制上，我这样做了。

```
private void RecipeSaveButton_Clicked(object sender, EventArgs e){
    if (RecipeSaveButtonListener != null) {
        RecipeSaveButtonListener.RecipeSaveButton_Clicked(this, EventArgs.Empty); //This referring to the control, not the button.
    }
} 
```

在我的主要控制上，我这样做了。

```
private void RecipeSaveButton_Clicked(object sender, EventArgs e){
    if (sender == RecipeControl1){ 

    } else if (sender == RecipeControl2) { 

    }
} 
```

我已经实现了这两个答案，并且都非常非常好。对不起，我不能接受他们两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:24:34.470

大多数事件处理程序（如按钮单击）都使用标准界面构建，以告诉您谁执行了该操作。`RecipeControl's`为Button Click 事件获取“事件处理程序”的修改版本：

```
 private void SaveButton_Clicked(object sender, EventArgs e){
        //Do Work but how do I find out which control fired this event?
        RecipeControl ctl = sender as RecipeControl;
    } 
```

因此，当在您的 中单击一个按钮时`RecipeControl`，它应该触发一个事件，例如：

```
this.SaveButtonClick(this, EventArgs.Empty); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:35:40.657

按照设计，所有事件处理程序都接收两个参数：

*   对象发送者：指引发事件的对象
*   EventArgs e：EventArgs 或派生自 EventArgs 的专用类，具体取决于事件类型

通常，不同的事件处理程序附加到单个控件，因此您不必担心发送者。但是，在您的情况下，您似乎对所有控件使用相同的处理程序。在这种情况下，您必须根据发件人做出不同的事情。

为此，您需要检查发件人是否是您感兴趣的人，像这样（我假设按钮名称是 Button1）

```
public ButtonClick(object sender, EventArgs e)
{
    if (sender== RecipeControl1.Button1)
    {
    }
    else if (sender == RecipeControl2.Button1)
    {
    }
} 
```

# antlr - ANTLR Parsing - 忽略输入最后一行的注释

> ID：10503331
> 
> 赞同：1
> 
> 时间：2012-05-08T17:18:20.183
> 
> 标签：antlr, antlr3

我正在使用 Antlr 3.2，但在编写忽略注释行的语法时遇到了麻烦。具体来说，如果注释行是输入的最后一行，后面没有换行符，我会收到错误消息。

我的输入实际上是汇编语言，其中注释以分号开头，然后到行尾。其他所有内容都被解析为命令。

显示问题的我的语法的简化版本是：

```
grammar Test;

options {
    language = Java;
    output = AST;
    ASTLabelType = CommonTree;
}

@header {
    package test;
}

@lexer::header {
    package test;
}

rule
    :   instruction+ EOF!
    ;

instruction
    :   'SET' NEWLINE!*
    ;

COMMENT
    :   ';' .* NEWLINE+ { $channel=HIDDEN; }
    ;

NEWLINE
    :  '\r'? '\n'
    ;

WS
    :   (' ' | '\r' | '\n' | '\t' | '\f')+ { $channel = HIDDEN; }
    ; 
```

如果我使用如下输入：

```
; comment line 1 with blank line after it

SET ; comment after command
; comment line again 
```

解析这句话时出现错误`line 4:11 required (...)+ loop did not match anything at character '<EOF>'`。

如果我在输入的最后一行添加换行符，它可以正常工作，因为换行符与注释剥离相匹配，并且 EOF 在规则末尾匹配。

我怎样才能更好地写这个，以便它忽略最后一行的注释但不给出错误？我不想在原始输入中附加任何内容来破解它，有没有更简洁的方法来阅读评论行？我已经尝试了 NEWLINE|EOF 的各种组合，但没有任何方法可以消除错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:26:10.030

这样的事情应该这样做：

```
COMMENT
    :   ';' ~('\r' | '\n')* { $channel=HIDDEN; }
    ; 
```

如果您希望 a`COMMENT`在末尾可能有换行符，请执行以下操作：

```
COMMENT
    :   ';' ~('\r' | '\n')* NEWLINE? { $channel=HIDDEN; }
    ; 
```

但是，这两个规则`NEWLINE`和`WS`：

```
NEWLINE
    :  '\r'? '\n'
    ;

WS
    :   (' ' | '\r' | '\n' | '\t' | '\f')+ { $channel = HIDDEN; }
    ; 
```

很危险：ANTLR 的工作原理是这样的：它尝试尽可能多地匹配，因此匹配最多的规则“获胜”。如果两个（或更多）规则匹配相同数量的字符，则第一个定义的“获胜”。

换句话说，如果词法分析器看到类似 的输入`"\n"`，`NEWLINE`则创建 a。但是，如果词法分析器看到`" \n"`（一个空格后跟 a `"\n"`），`WS`就会创建一个标记（并放在`HIDDEN`通道上）。

我不确定换行符在您的语言中是否真的*很*重要（它们不是任何汇编语言，AFAIK），所以只需删除`NEWLINE`规则即可。如果它们*很*重要，请从规则中删除字符`\r`和字符。`\n``WS`

# python - qtwebkit 将数据传回 python

> ID：10503333
> 
> 赞同：0
> 
> 时间：2012-05-08T17:18:30.060
> 
> 标签：python, qtwebkit

使用 python qtwebkit，如何从页面中获取数据以在 python 中进行进一步处理？基本上，我想执行一些javascript（在qtwebkit中通过frame.evaluateJavaScript（）很容易），然后将结果字符串返回给python进行进一步处理（这是我卡住的地方）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:21:24.683

发现这个：[http ://www.slideshare.net/tewson/using-qtwebkit-in-pyqt-as-a-n00b](http://www.slideshare.net/tewson/using-qtwebkit-in-pyqt-as-a-n00b)

幻灯片 9 有以下代码：

```
x = QObject()
x.setObjectName("x")
x.setProperty("foo", QVariant(""))
x.setProperty("bar", QVariant(""))
frame.addToJavaScriptWindowObject("x", x)
frame.evaluateJavaScript("x.foo = 'foo';x.bar = 5;")
print x.property("foo").toString()
print x.property("bar").toInt() 
```

效果很好

# iphone - 在 iOS 上同时使用手电筒和相机 - 在后台运行后不起作用

> ID：10503336
> 
> 赞同：1
> 
> 时间：2012-05-08T17:18:58.903
> 
> 标签：iphone, objective-c, ios, ios5

我正在尝试打开相机并将其显示在屏幕上（在我的视野内）并保持手电筒打开。

我遇到的问题是它在我第一次运行应用程序时工作，但是当应用程序进入后台然后前景相机冻结并显示最后一个视图时。

测试我已经完成：

1.  手电筒单独工作。
2.  没有手电筒的相机在前景时工作。

我看到其他一些应用程序也有同样的问题。

有谁知道或可以想到一个解决方案？（如果它可以在 iOS5+ 上运行就足够了）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:29:48.070

在控制相机和手电筒的视图控制器中，将观察者添加到`UIApplicationDidBecomeActiveNotification`.

```
-(void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(becameActive) name:UIApplicationDidBecomeActiveNotification object:nil];
}

-(void)becameActive {
    //this code runs when you resume a suspended application
    //turn the camera torch on here
    //assuming you already have this code
}

-(void)viewDidUnload {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super viewDidUnload];
} 
```

# javascript - 好奇关于脚本标签类型属性的特殊 JavaScript 问题

> ID：10503339
> 
> 赞同：5
> 
> 时间：2012-05-08T17:19:05.613
> 
> 标签：javascript, html

因此，我的团队正在使用 HTML5 Boilerplate，并且网站已接近完成。我想做一个快速的 JavaScript 测试，以确保客户端可以根据需要添加自己的 JavaScript。我知道使用 HTML5 doctype 时不需要 script 标签的 type 属性，但是 JavaScript 警报在使用时甚至不起作用（这让我感到困惑，因为我在使用 type 属性时构建了 HTML5 网站脚本标签。

什么有效：

```
 <script>        
      alert("HELP");        
    </script> 
```

什么不起作用：

```
 <script type="text/javascript">     
      alert("HELP");        
    </script> 
```

谁能解释发生了什么？这确实适用于其他基于 HTML5 的网站...

***在 Ubuntu 12.04 上使用 Firefox 12 测试

多谢你们。

PS 它不会造就或破坏网站，不是很重要，等等。我只是想知道为什么会存在这个问题。

***编辑***

这是一个指向有效的公共托管页面的链接。

[http://illinois.edu/1500/index.html](http://illinois.edu/1500/index.html)

为什么它在我的本地盒子上不起作用（摇头）......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:35:51.860

两个版本都是正确的，应该可以工作。您的代码中存在问题，例如缺少标记，或者您更有可能选中了“防止此页面创建其他对话框”复选框。

用这个替换你的警报并在 Chrome 中试用：

```
<script type="text/javascript">
console.log('HELP');
</script>
<script>
console.log('HELP');
</script> 
```

现在在 Chrome 中运行页面，按 F12 转到控制台，看看是否弹出消息

# asp.net - 如何使用 ASP.NET 服务器端 *DYNAMIC* .json 和 .xml 文件提供客户端 AJAX 脚本？

> ID：10503347
> 
> 赞同：0
> 
> 时间：2012-05-08T17:19:39.763
> 
> 标签：asp.net, xml, ajax, json, dynamic

到目前为止，我了解到，客户端 AJAX 脚本可以从服务器读取**静态**.json 或 .xml 文件，例如[http://www.mydomain.com/all_cities.xml](http://www.mydomain.com/all_cities.xml)。

但我需要根据客户端的用户输入**动态**生成 .json 或 .xml 文件。例如，假设用户从 DropDownList1 中选择了一个州，AJAX 应该用该州的城市填充 DropDownList2；而我不喜欢发送所有城市，然后在客户端过滤所需的城市！

所以，我想知道 ASP.NET 如何处理这个问题，例如，当它看到“http://www.mydomain.com/cities.json?state=9”时，它应该以动态创建的名为 citys 的 json 文件进行响应。 json 其中包含状态#9 的城市？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:33:23.713

有很多方法可以做到这一点 - 基本上，最简单的方法是让任何标准网页（无论是表单、MVC 控制器/动作/等），其行为就像任何普通网页一样，具有用户输入，但不是返回 html，它返回 XML。（通过返回 XML，我的意思是使页面的内容完全是 XML 并添加适当的标题）

您的问题过于宽泛，无法提供更多细节 - 但简单地说，它很容易完成，客户端（在这种情况下为 JavaScript）通常无法区分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:29:46.880

如果要创建 WCF 服务，可以有一个 WebGet，它接受州作为参数并返回该州的城市：

```
[WebGet(UriTemplate = "cities/{state}")]
public List<string> GetCities(string state)
{
    List<string> citiesFromState;
    // Build up a List of cities based on the state sent
    return citiesFromState;
} 
```

在您的应用程序的 web.config 中，设置`automaticFormatSelectionEnabled`为 true 以便 WCF 将查看 HTTP 请求的“接受”标头以确定发送响应的格式（例如 xml 或 json）：

```
<behavior name="webHttpBehavior">
    <webHttp automaticFormatSelectionEnabled="true" helpEnabled="true"/>
</behavior> 
```

这允许 WCF 为您处理序列化。否则，您可以在`WebGet`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:51:44.690

实现这一目标的方法之一是

在客户端：使用 jQuery 并调用方法/服务以返回 JSON。就像是

```
function CallService() {
    $.ajax({
        type: "GET", //HTTP verb
        url: serviceUrl,
        data: "{}", //Data sent to server
        contentType: "application/json; charset=utf-8", // content type sent to server
        dataType: "json", //Expected data format from server e.g. json, xml etc.
        success: OnSuccess
    });
}

function OnSuccess(data) {
    var options = $(".InputDropDown"); //.InputDropDown is class assigned to dropdown
    //don't forget error handling! 
    $.each(data, function (index) {
        var item = data[index];
        options.append($("<option />").val(item.Id).text(item.Name));
    });
} 
```

此方法将在第一次下拉更改时调用

在服务器端：使用返回 JSON 的 Web 服务（或 WCF）方法或页面方法（在您的 Web 应用程序中）。

```
 [WebGet(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = "Countries")]
    List<Country> GetCountries(); 
```

如果您不熟悉 jQuery 等。我强烈建议您阅读此内容。

可以在[LINK-1](http://www.dotnetfunda.com/articles/article454-using-pagemethods-and-json-in-aspnet-ajax.aspx)和[LINK-2中找到使用 PageMethod 和纯 JavaScript 的](http://setiabud.blogspot.com/2008/11/using-pagemethods-json-to-provide-auto.html)**替代方法（没有 WCF）**的示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T18:02:58.180

如果要读取静态内容，默认情况下只能使用 .XML，因为 .JSON 不是 IIS 支持的默认 MIME-TYPE。这是一个关于如何使用 jQuery 的 ajax() 方法将静态 XML 文件读入页面的示例。

静态文件“cities.xml”。

```
<?xml version="1.0" encoding="utf-8" ?>
<cities>
    <city>City A</city>
    <city>City B</city>
    <city>City C</city>
</cities> 
```

用于读取静态 XML 并解析为 JavaScript 数组的 jQuery 代码。

```
$.ajax({
    url: 'cities.xml',
    dataType: 'xml',
    success: function (xml)
    {
        var cities = [];

        $(xml).find('city').each(function ()
        {
            cities[cities.length] = $(this).text();
        });

        // Do something with your array of values here.
    }
}); 
```

# ruby - 使用 Typhoeus 发出请求，某些 URL 始终返回空的“400”响应

> ID：10503352
> 
> 赞同：2
> 
> 时间：2012-05-08T17:19:55.600
> 
> 标签：ruby, http, curl, libcurl, typhoeus

某些 URL 总是返回一个空的 HTTP 400 响应（许多其他 URL 工作正常）。例子：

```
1.9.3p0 :002 > e = Typhoeus::Easy.new

e.url = "http://us.asos.com/NW3/NW3-Highgate-Seersucker-Pinafore-Dress/Prod/pgeproduct.aspx?iid=1988231&cid=8799&sh=0&pge=0&pgesize=20&sort=-1&clr=Navy%252fivory&r=2"

1.9.3p0 :004 > e.perform => 400

1.9.3p0 :005 > y e
--- !ruby/object:Typhoeus::Easy 
curl_return_code: 0
headers: {}

method: :get
response_body: ""
response_header: |
  HTTP/1.1 400 Bad Request
  Content-Type: text/html
  Server: Microsoft-IIS/7.0
  Content-Length: 0
  Vary: Accept-Encoding
  Date: Mon, 07 May 2012 19:35:28 GMT
  Connection: keep-alive

ssl_version: :default
url: http://us.asos.com/NW3/NW3-Highgate-Seersucker-Pinafore-Dress/Prod/pgeproduct.aspx?iid=1988231&cid=8799&sh=0&pge=0&pgesize=20&sort=-1&clr=Navy%252fivory&r=2 => nil 
```

相反，在同一台机器上，几秒钟后它通过命令行 cURL 工作：

```
james@laptop:~/fashism$ curl -I "http://us.asos.com/NW3/NW3-Highgate-Seersucker-Pinafore-Dress/Prod/pgeproduct.aspx?iid=1988231&cid=8799&sh=0&pge=0&pgesize=20&sort=-1&clr=Navy%252fivory&r=2"
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: text/html;charset=utf-8
Server: Microsoft-IIS/7.0
X-AspNet-Version: 2.0.50727
X-RuleEngine-Key: US1.0:ReferrerAnyOrNoneSiteDotUSPreferenceUSOrNone
X-Powered-By: ASP.NET
Date: Mon, 07 May 2012 19:54:03 GMT
Connection: keep-alive
Set-Cookie: AsosExecutionEngine=ExemptionTimeout=05/07/2012 20:14; expires=Tue, 07-May-2013 19:54:02 GMT; path=/
Set-Cookie: ASP.NET_SessionId=sd2hw4yu4l4jwmevc3gyan55; path=/; httponly
Set-Cookie: asos=topcatidHitCount=1; expires=Tue, 07-May-2013 19:54:02 GMT; path=/
Set-Cookie: asos=topcatidHitCount=1&currencyid=1&topcatid=9057&customerguid=b5da62eb44de45eeadd2f36ec90332ca; expires=Tue, 07-May-2013 19:54:02 GMT; path=/
Set-Cookie: asosbasket=basketitemcount=0&basketitemtotalretailprice=0; expires=Mon, 07-May-2012 20:54:02 GMT; path=/
Set-Cookie: stop_mobi=yes; path=/

james@laptop:~/fashism$ 
```

有任何想法吗？非常感谢您的帮助，即使它只是给我一个方向，找到一个解决方案。

非常感谢！

~詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:29:10.743

From my answer on the [Typhoeus github issue](https://github.com/typhoeus/typhoeus/issues/153#issuecomment-5702584):

The server requires a number of request headers to be set.

Try:

```
url = "http://us.asos.com/NW3/NW3-Highgate-Seersucker-Pinafore-Dress/Prod/pgeproduct.aspx?iid=1988231&cid=8799&sh=0&pge=0&pgesize=20&sort=-1&clr=Navy%252fivory&r=2"
header = {"Accept" => "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8", "Cache-Control" => "no-cache", "Pragma" => "no-cache", "User-Agent" => "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19"}
response = Typhoeus::Request.get(url, headers: header, verbose: true, follow_location: true) 
```

# c - 如何将 malloc 用于二维结构数组？（总线错误：10）

> ID：10503373
> 
> 赞同：3
> 
> 时间：2012-05-08T17:21:40.680
> 
> 标签：c, arrays, struct, malloc, bus-error

我正在尝试实现数独求解器。为此，我使用如下所示的结构来表示数独板上的单元格。然后我声明这些结构的 9x9 数组来表示板。

细胞结构：

```
struct cell{
     char value;
     unsigned int possible;
}; 
```

然后，我将一个结构数组声明为：

```
struct cell board[9][9]; 
```

我的问题是，当我尝试在数组中输入一个值时（即 board[2][2].value = getchar();），有时它会起作用，而其他时候我会收到此错误：

```
Bus error: 10 
```

我不太确定这意味着什么...... **“总线错误：10”与分段错误有何不同？**

我正在使用 gcc，只是在 vim 中编辑。我的感觉是，我需要为这个数组动态分配内存。现在，我了解了如何使用 malloc 为二维数组分配内存，如下所示：

```
int ** Array;  
Array = (int**) malloc(x_size*sizeof(int*));  
for (int i = 0; i < x_size; i++)  
    Array[i] = (int*) malloc(y_size*sizeof(int)); 
```

但是我在为二维结构数组实现内存分配部分时遇到了麻烦。

会是这样吗？

```
struct cell** board;
board = (struct cell**) malloc(x_size*sizeof(struct cell**));
for(int i=0; i< x_size; i++)
    board[i] = (struct cell*) malloc(y_size*sizeof(struct cell)); 
```

我担心这个“ sizeof(struct cell) ”没有正确分配它应该的内存量。

任何帮助将不胜感激！我对 C 相当陌生（C++ 是我的母语），我已经大量使用嵌入式 C，但我正在努力更好地掌握整个语言。
详细\深入解释的奖励积分！

谢谢！

**编辑** 好的，所以感谢大家的好建议，我还没有实现任何动态内存分配，但是，根据要求，这里是产生总线错误的代码：

```
 /* only code being used in solver.h*/
 29 /* structure to describe a cell */
 30 struct cell{
 31     int value;
 32     unsigned int possible;
 33 };

   /*solver.c*/
 4 #include <ctype.h>
 5 #include <stdio.h>
 6 #include "solver.h"
 7 
 8 
 9 struct cell board [9][9];
 10 
 11 
 12 int main(){
 13     initialize_board();
 14     print_board();
 15     setup_board();
 16     print_board();
 17 return 0;
 18 }
 19 
 20 void print_board(){
 21     int i=0, j=0;
 22     for(i = 0; i<9; i++){
 23         for(j = 0; j<9; j++)
 24             printf(" %d",board[i][j].value);
 25         printf("\n");
 26     }
 27 }
 28 
 29 void initialize_board(){
 30     int i = 0, j = 0;
 31 
 32     for(i = 0; i<9; i++)
 33         for(j = 0; j<9; j++){
 34             (board[i][j]).value = 0;
 35             (board[i][j]).possible = 0x1FF;
 36         }
 37 }
 38 
 39 void setup_board(){
 40     int row=0, col=0, val = 0;
 41     char another = 'Y';
 42 
 43     printf("Board Initial Setup.\nEnter the row and column number of the value to be entered into the board.");
 44     printf("\nRow and Column indexes start at one, from top left corner.");
 45     while(another == 'Y'){
 46         printf("\nRow: ");
 47         row = getchar();
 48         printf("Column: ");
 49         getchar();
 50         col = getchar();
 51         printf("Value: ");
 52         getchar();
 53         (board[row-1][[col-1]).value = getchar();
 54         printf("Enter another value? (y/n): ");
 55         getchar();
 56         another = toupper(getchar());
 57         getchar();
 58     }
 59 } 
```

如您所见，我已将 value 的数据类型更改为 int 以匹配 getchar() 返回类型。但是我的代码仍然会产生奇怪的运行时错误/结果。例如，在 setup_board 的 while 循环的第一次迭代中，我可以输入 say Row:1, Col:1, Value:5，然后当我输入 'n' 退出时，board 应该在上面打印 5左角，但事实并非如此。调用 initialize_board() 后，打印的矩阵仍处于其状态。

输出：

```
Board Initial Setup.
Enter the row and column number of the value to be entered into the board.
Row and Column indexes start at one, from top left corner.
Row: 1
Column: 1
Value: 4
Enter another value? (y/n): n
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0 
```

另外，如果我输入其他矩阵坐标，那就是当我得到总线错误：输出：

```
Board Initial Setup.
Enter the row and column number of the value to be entered into the board.
Row and Column indexes start at one, from top left corner.
Row: 5
Column: 5
Value: 5
Bus error: 10 
```

任何关于如何清理丑陋的双重 getchar() 业务的建议也将不胜感激。
谢谢大家！

**编辑二号** 问题出在那些 getchar() 的.... 我没有意识到他们返回一个整数 ASCII 码来表示数字而不是实际数字本身。这是我为修复它所做的工作：

```
 47     while(another == 'Y'){
 48         valid=0;
 49         while(!valid){
 50             printf("\nRow: ");
 51             row = getchar() - '0';  /* convert ASCII character code to actual integer value */
 52             getchar();              /*added to remove extra newline character from stdin */
 53             printf("Column: ");
 54             col = getchar() - '0';
 55             getchar();              /*remove \n */
 56             printf("Value: ");
 57             val = getchar() - '0';
 58             getchar();              /*remove \n */
 59             if(val >9 || val<1 || col>9 ||col<1 || row>9 || row<1)
 61                 printf("\nInvalid input, all values must be between 1 and 9, inclusive");
 62             else
 63                 valid = 1;  
 64         }
 65         board[row-1][col-1].value = val;
 66         printf("Enter another value? (y/n): ");
 67         another = toupper(getchar());
 68         getchar();                  /*remove \n */
 69     } 
```

感谢大家的帮助和投入，我将实施你们提出的许多建议，并从这个问题中学到了很多东西！

**编辑三号**

**最后一个问题！**

**虽然我最初的问题已经解决，但是否有人对通过动态分配内存来实现矩阵是否更好有强烈的意见或推理？**

我想，我会保持原样，因为它可以工作，但由于矩阵相当大，动态分配会更好的编程实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:54:55.033

`getchar()`返回一个`int`. 可能返回的值超出了 的范围`char`。 [见 getchar()](http://www.cplusplus.com/reference/clibrary/cstdio/getchar/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:57:42.883

首先，关于成语的一些注释。在 C 中有一个 malloc 数组的习惯用法：

```
Type *ptr;
ptr = malloc (n * sizeof(*ptr)); 
```

`sizeof`运算符不仅可以接收类型，还可以接收具有该类型的变量。请注意前面的星号`ptr`，这意味着我们正在分配大小为 的东西`Type`，而不是`Type*`。无需强制转换返回，因为`void*`可以将指针分配给任何指针。这样，您可以定义一个宏来分配任何数组，如下所示：

```
#define ALLOC(p, n) p = malloc(n * sizeof(*p)) 
```

此外，在分配二维或多维矩阵时，通常一次获取所需的所有内存，如下所示：

```
Type **matrix;
matrix = malloc(row * sizeof(*matrix));
matrix[0] = malloc(row * col * sizeof(*matrix[0]))
for (i=0; i < row; i++){
    matrix[i] = matrix[0] + i*col;
} 
```

这样我们只做两次分配，一次获取行头指针，另一次获取所有需要的内存。之后，我们使所有行头指针指向矩阵中的正确位置，因此我们可以使用常用的成语 as `matrix[i][j]`。有些人还喜欢分配一个向量并使用 访问`matrix[i*col + j]`，但我发现第一个更清楚。

最后，这不是一个解决的问题，但我发现将结构定义为类型更容易，然后不需要一直提醒它*确实是*一个结构

```
typedef struct Cell Cell;
struct Cell{
    ...
};

Cell board[9][9]; 
```

最后，我测试了你的静态单元板，并没有发现奇怪的总线错误。这*可能*是由于 char 填充，但我觉得不太可能。可能是由于getchar引起的吗？它将选择换行符和空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T20:36:21.160

`getchar`返回一个代表一个字符的代码；您必须添加将其转换为数字的代码。例如，考虑以下代码：

```
printf("\nRow: ");
row = getchar();
printf("Column: ");
getchar(); 
```

当用户键入“hehe”而不是`1`程序`1`期望的时候会发生什么？该程序将获取`h`and的 ASCII 代码`e`，将它们分配给`row`and`col`并访问超出范围的数组元素。

实际上，正常输入也会发生同样的情况！用户输入`1`，程序获取 ASCII 码 ( `49`) 并执行一些内存溢出：

```
board[49-1][49-1].value = 53; 
```

要解决此问题，请将字符代码转换为数字：

```
if (row >= '1' && row <= '9')
    row -= '0'; // a common C hack for converting a character-code to a number
else
    printf("Bad input"); // not a proper error handling, just an example

col -= '0'; // 1 line for brevity; you must do the same code as above

value = getchar();
value -= '0'; // same as above

board[row-1][col-1].value = value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T22:24:33.063

在 Q 旁边，据我所知，它已经得到了回答，但是关于您对`malloc`等的评论。

`malloc`*为大小为size*的对象返回指向*未初始化*的新分配空间的指针。

 *您不会收到例如 int 的空间，而是大小为 N 的空间。这就是您可以获取 char 并读取 int 中的字节的原因。

现在在某些方面是*主观*的，也许有点偏离，但试一试。

* * *

强制转换`malloc`是多余的，只会使代码混乱。这就像不是给一个瓶子装水，而是用一个瓶子装满水来装满一瓶水。分配的内存不会*变成*它被强制转换的内存。这是一块内存。时期。在某种程度上，它正在向后看。

int * 指向虚拟内存的特定部分，并根据 int 大小的块来处理该内存。根据具有 4 字节整数的特定系统上的 4 字节序列中的 LSB 优先或最后的字节顺序。

* * *

当谈到宏时，我不建议将宏用于`malloc`. 它使代码难以阅读，并且 grep 等文件操作变得无用/更难。

当遇到宏时，必须检查该宏的作用。一个添加一层容易出错的代码等。当您在 6 个月后或其他人阅读代码时，您将不得不检查该宏的实际作用。如果你读了`malloc`你就*知道*那是做什么的，当你读的时候你`MYMALLOC`就不知道了。

它是最好保持原样的基本构建块。没有收获考虑痛苦。

有时会遇到如下代码：

```
BLAH(k, v);
while (--i)
     BOFF(mak, VED(uu));
if (FOO != k)
      BAR; 
```

现在，要破译你必须阅读通常是晦涩定义的宏，它很快就会变得一团糟。你知道原语和标准函数。***不要隐藏正在发生的事情。***

永远**不要**使用宏更改程序的控制流程。

* * *

当谈到 typedefs 时，我通常讨厌它们。我从来没有 typedef 结构的。

说 ie`struct foo bar;`与`BLAH bar;`. 现在在后者酒吧可以是任何东西。一个函数、一个无符号字符、一个结构、一个指向原语的指针等。随着代码的增长，这成为另一个需要跟踪的东西。前者，using`struct`简洁而简短，任何阅读它的人都知道它是一个结构，而不是一个指针。

总的来说，它通常会更多地混淆代码，然后使其更清晰。***不要隐藏正在发生的事情。***

Typedefs 对函数指针很有用，但是函数指针也应该小心使用。

* * *

也一样`#define`。很少使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T18:08:33.127

我不知道您为什么会收到`Bus 10:`错误消息，它应该可以与静态数组一起正常工作。

但是对于内存的动态分配，`board`您可以使用：

```
cell ** board = (cell **) malloc(x_size * sizeof(cell *));

for (int i = 0; i < Size_X; i++)
{
    board[i] = (cell *) malloc (y_size * sizeof (cell));
} 
```

您还可以将`board`81 分配为一个简单的数组`cell`：

```
cell * board = (cell *) malloc (x_size * y_size (cell)); 
```

我已经在 Windows 下测试了静态分配，它工作正常，就像我用 测试上面一样`malloc`，但是我的编译器设置为 C++，所以上面的代码可能不是 100% 使用纯 C 编译器。

希望能帮助到你。*

# desire2learn - Desire2Learn Valence API 非交互式认证

> ID：10503375
> 
> 赞同：2
> 
> 时间：2012-05-08T17:21:43.853
> 
> 标签：desire2learn

在 Desire2Learn Valence API 中，是否存在用于服务器应用程序的非交互式身份验证流程？Valence 文档似乎假设任何身份验证应用程序都是交互式客户端进程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:49:09.823

我们实际上是通过非交互方式登录网站来实现这一点的。如果您尝试此路线，请确保获取 d2lSecureSessionVal、d2lSessionVal 和登录 cookie，并将它们添加到您的后续请求中。

请求 1：1 > POST http{s}://elearning.test.masked.edu/d2l/lp/auth/login/login.d2l 1 > 内容类型：application/x-www-form-urlencoded userName={您的用户名}&password={您的密码}

回应1：

```
1 < Set-Cookie: LoginKey=; expires=Sat, 01-Jan-2000 05:00:00 GMT; path=/
1 < Set-Cookie: d2lSecureSessionVal=masked; path=/; HttpOnly  <-- grab this
1 < Set-Cookie: Login=true; path=/   <-- grab this
1 < Set-Cookie: d2lSessionVal=masked; path=/   <-- grab this 
```

请注意，在此请求中，目标并不重要 Request 2: 2 > GET http{s}://elearning.test.masked.edu:443/d2l/auth/api/token?x_a=ZNsxGYZuSmasked&x_b=7jkhCKfEmaked&x_target =https%3A%2F%2Fwww.maked.edu 2 > Cookie：d2lSecureSessionVal=masked；d2lSessionVal=屏蔽；登录=真；

它会尝试将您重定向到目标站点。忽略重定向， x_a 是您真正追求的。

回应 2：

```
2 < 302
2 < X-AspNet-Version: 2.0.50727
2 < Date: Tue, 09 Oct 2012 14:03:45 GMT
2 < Content-Length: 248
2 < X-XSS-Protection: 0
2 < Location: http{s}://www.masked.edu?x_a=DxHmasked&x_b=aQVkg-7jkhCKfEmaked&x_c=IfLBcKYFf8masked
2 < Set-Cookie: TS50cdf6=masked; Path=/
2 < Content-Type: text/html; charset=utf-8
2 < X-Powered-By: ASP.NET
2 < Cache-Control: private
2 < 
```

从此响应中获取 x_a 并将其用作您的请求中的 x_b

第一次是一个错误，因为有一个页面显示一个复选框以允许来自特定主机的请求。我们只是抓取了身份验证令牌请求并将其弹出到浏览器中。在选中该框以始终允许后，一切正常。

另请注意，身份验证令牌偶尔会过期。确保您为此编写代码并在它发生时重新进行身份验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T14:56:41.517

我使用 PHP 示例代码中的入门示例代码（在您登录后向您显示浏览器中的用户密钥）来获取我创建的“服务帐户”的密钥。

然后我将它们放入一个 PHP 类中，我可以重用它来建立连接。所以在我的代码中，我可以调用

```
$authcontext = d2l::connect(); 
```

它真的像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T22:04:06.087

这与位于此处的问题有些相关：

[Desire2Learn REST API 与 SOAP 的身份验证方法](https://stackoverflow.com/questions/9946274/authenticaton-method-for-desire2learn-rest-api-vs-soap)

Valence API 确实需要发生交互式身份验证步骤，但是，对于非交互式应用程序，这可以在“安装时”完成。该过程的结果是可以“长时间”使用的密钥。

对于某些版本和服务包级别，这是 30 天，但可以设置为“不过期”。“未过期”是未来的预期默认值，但如果您的实例上仍将其设置为 30 天，您可以提出支持请求以进行更改。

# c++ - 图灵机模拟器

> ID：10503377
> 
> 赞同：-5
> 
> 时间：2012-05-08T17:21:47.223
> 
> 标签：c++, turing-machines, computation-theory

我需要在 C++ 中设计一个图灵机模拟器，它接受一个输入文件，如下所示：

Q:q1,q2,q3,q4
A:0,1
Z:0,1,x
T:q1,0,q2,x,R
T:q1,1,q2,x,R
T:q2,0,q2 ,0,R
...
S:q1
F:q3,q4

其中 Q 是状态，A 是输入值，Z 是磁带字母表，S 是开始状态，F 是接受和拒绝状态。

它需要处理一个输入，其中包含输入数量、输入字符串以及接受或拒绝。

所以如果输入的是：
3
0,#,1,1
1,1
0,1,0

输出将打印出步骤以及它是接受还是拒绝。

我需要创建一个执行算术运算的 TM，一个执行字符串运算的 TM，以及我选择的另一个。

任何有关如何开始的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:48:26.913

尝试这样的事情：

```
#include <iostream>
#include <string.h>
#include <vector>
#include <fstream>
#include <cstdlib>
#include <stdio.h>
#include "tm.h"

using namespace std;

tm::tm(char *fn)
{
    current = "";
    readFile(fn);
}

void tm::readFile(char *fn)
{
    char temp;
    string word = "";
    ifstream indata;
    bool blank = false;
    indata.open(fn); //opens the file
    if(!indata) //error message if the file is unable to be opened
    {   
        cout << "Could not open the specified file \"" << fn << "\"" << endl;
        exit(1);
    }
    indata >> temp;
    while (!indata.eof())
    {
        if (temp == 'Q')
        {
            //cout << "Q" << endl;
            indata >> temp;
            indata >> temp; //skip the :
            while (temp != 'A')
            {
                if (temp != ',') word += temp;
                else
                {
                    QQ.push_back(word);
                    word = "";
                }
                indata >> temp;
            }
            QQ.push_back(word);
            word = "";
        }
        else if (temp == 'A')
        {
            //cout << "A" << endl;
            indata >> temp;
            indata >> temp; //skip the :
            while (temp != 'Z')
            {
                if (temp != ',') word += temp;
                else
                {
                    AA.push_back(word);
                    word = "";
                }
                indata >> temp;
            }
            AA.push_back(word);
            word = "";
        }
        else if (temp == 'Z')
        {
            //cout << "Z" << endl;
            indata >> temp;
            indata >> temp; //skip the :
            while (temp != 'T')
            {
                if (temp != ',') word += temp;
                else
                {
                    ZZ.push_back(word);
                    word = "";
                }
                indata >> temp;
            }
            ZZ.push_back(word);
            word = "";
            for (int i = 0; i < (int)ZZ.size(); i++)
                if (ZZ[i].compare(" ") == 0)
                    blank = true;
            if (blank == false) //no blanks were found in the tape alphabet
                ZZ.push_back(" ");
        }
        else if (temp == 'T')
        {
            //cout << "T" << endl;
            indata >> temp;
            indata >> temp; //skip the :
            bool wasComma = false;
            vector<string> row;
            while (temp != 'T' && temp != 'S')
            {
                if (wasComma && temp == ',') //the last one was a comma
                {
                    row.push_back(" ");
                    wasComma = false;
                }
                else if (temp != ',')
                {
                    word += temp;
                    wasComma = false;
                }
                else
                {
                    row.push_back(word);
                    word = "";
                    wasComma = true;
                }
                indata >> temp;
            }
            row.push_back(word);
            TT.push_back(row);
            word = "";
        }
        else if (temp == 'S')
        {
            //cout << "S" << endl;
            indata >> temp;
            indata >> temp; //skip the :
        while (temp != 'F')
            {
                if (temp != ',') word += temp;
                else
                {
                    SS = word;
                    word = "";
                }
                indata >> temp;
            }
            SS = word;
            word = "";
        }
        else if (temp == 'F')
        {
            //cout << "F" << endl;
            indata >> temp;
            indata >> temp; //skip the :
            while (!indata.eof())
            {
                if (temp != ',')
                    word += temp;
                else
                {
                    FF.push_back(word);
                    word = "";
                }
                indata >> temp;
            }
            FF.push_back(word);
            word = "";
        }
    }   
    indata.close();
    readInput();
    runAll();
    return;
}

void tm::readInput()
{
    int num, k;
    cin >> num;

    string temp;
    getline(cin,temp);
    getline(cin,temp);
    for (int i = 0; i < num; i++) //num is the number of rows of input to the machine
{
        vector<string> row;
        string word = "";
        for(k = 0; k < (int)temp.size(); k++)
        {
            if (temp[k] != ',')
                word += temp[k];
            else if ((int)word.size() > 0)
            {
                row.push_back(word);
                word = "";
            }
            if (k == (int)temp.size() -1 && (int)word.size() > 0)
            {
                row.push_back(word);
                word = "";
            }
    }
        if (k > 0)
            input.push_back(row);
        else //if there is an empty row of input to the machine
        {
            vector<string> row;
            row.push_back("e");
            input.push_back(row);
        }
        getline(cin,temp);
    }

    return;
}

void tm::runAll()
{
    checkForAlphabetBlanks();
    checkTransitions();
    checkStart();
    checkFinal();
    checkDeterministic();
    checkAcceptReject();
    checkInput();

    int currentPosition;
    string currentState, currentSymbol;
    bool found, first = true;
    for (int i = 0; i < (int)input.size(); i++) //for each row of the input
    {
        if (first != true)
            cout << endl;
        first = false;
        currentPosition = 0;
        currentState = SS;
        for (int k = 0; k < 1000; k++) //for each character of input, then up to 1000
        {
            if (k == 0) //the first time
            {
                if (0 < (int)input[i].size()) //we are not past the right of the tape
                    currentSymbol = input[i][0];
                else
                    currentSymbol = " ";
                cout << "()" << SS << "(";
                for (int g = 0; g < (int)input[i].size(); g++)
                {
                    cout << input[i][g];
                    if (g != (int)input[i].size() - 1) //it is not the last input
                        cout << ",";
                    else
                        cout << ")" << endl;
                }
            }
            if (currentState.compare(FF[0]) == 0) //check if we are accept
            {
                cout << "ACCEPT" << endl;
                break;
            }
            else if (currentState.compare(FF[1]) == 0) //check if we are reject
            {
                cout << "REJECT" << endl;
                break;
            }
            found = false;
            for (int g = 0; g < (int)TT.size(); g++)
            {
                if (TT[g][0].compare(currentState) == 0 && TT[g][1].compare(currentSymbol) == 0) //same state and symbol as the transition line
                {
                    found = true;
                    currentState = TT[g][2];
                    input[i][currentPosition] = TT[g][3];
                    if (TT[g][4].compare("R") == 0) currentPosition++;
                    else currentPosition--;
                    //check for out of bounds to the left
                    if (currentPosition < 0) currentPosition = 0;
                    cout << "(";
                    for (int t = 0; t < currentPosition; t++)
                    {
                        cout << input[i][t];
                        if (t != currentPosition - 1) cout << ","; //not the last one
                    }
                    cout << ")" << currentState << "(";
                    for (int t = currentPosition; t < (int)input[i].size(); t++)
                    {
                        cout << input[i][t];
                        if (t != (int)input[i].size() - 1) cout << ","; //not the last one
                    }
                    cout << ")" << endl;
                    if (currentPosition < (int)input[i].size()) currentSymbol = input[i][currentPosition]; //not past the right side of the tape
                    else
                    {
                        currentSymbol = " ";
                        input[i].push_back(" ");
                    }
                    break;
                }
            }
            if (found == true) //a transition was found
            {
                if (currentState.compare(FF[0]) == 0) //check if accept
                {
                    cout << "ACCEPT" << endl;
                    break;
                }
                else if (currentState.compare(FF[1]) == 0) //check if reject
                {
                    cout << "REJECT" << endl;
                    break;
                }
            }
            else
            {
                currentPosition++;
                cout << "(";
                for (int t = 0; t < currentPosition; t++)
                {
                    cout << input[i][t];
                    if (t != currentPosition - 1) cout << ","; //not the last one
                }
                cout << ")" << FF[1] << "(";
                for (int t = currentPosition; t < (int)input[i].size(); t++)
                {
                    cout << input[i][t];
                    if (t != (int)input[i].size() - 1) cout << ","; //not the last one
                }
                cout << ")" << endl;
                cout << "REJECT" << endl;
                break;
            }
            if (k == 999)
                cout << "DID NOT HALT" << endl;
        }
    }

    return;
}

void tm::checkForAlphabetBlanks()
{
    for (int i = 0; i < (int)AA.size(); i++)
    {
        if (AA[i].compare(" ") == 0)
        {
            cout << "The alphabet has a blank space." << endl;
            exit(1);
        }
    }
    return;
}

void tm::checkTransitions()
{
    bool state1, state2, character1, character2;

    for (int i = 0; i < (int)TT.size(); i++)
    {
    //check the direction
        if (TT[i][4].compare("R") != 0 && TT[i][4].compare("L") != 0)
        {
            cout << "The only valid directions are R and L." << endl;
            exit(1);
        }
        //check the states
        state1 = false; state2 = false;
        for (int k = 0; k < (int)QQ.size(); k++)
        {
            if (TT[i][0].compare(QQ[k]) == 0) state1 = true;
            if (TT[i][2].compare(QQ[k]) == 0) state2 = true;
        }
        if (state1 == false)
        {
            cout << "The state " << TT[i][0] << " in transition function number " << i << " is not in the list of states." << endl;
            exit(1);
        }
        if (state2 == false)
        {
            cout << "The state " << TT[i][2] << " in transition function number " << i << " is not in the list of states." << endl;
            exit(1);
        }
        //check the characters
        character1 = false; character2 = false;
        for (int k = 0; k < (int)ZZ.size(); k++)
        {
            if (TT[i][1].compare(ZZ[k]) == 0) character1 = true;
            if (TT[i][3].compare(ZZ[k]) == 0) character2 = true;
        }
        if (character1 == false)
        {
            cout << "The character '" << TT[i][1] << "' in transition function number " << i << " is not in the tape alphabet." << endl;
            exit(1);
        }
        if (character2 == false)
        {
            cout << "The character '" << TT[i][3] << "' in transition function number " << i << " is not in the tape alphabet." << endl;
            exit(1);
        }
}
    return;
}

void tm::checkStart()
{
    bool in = false;
    for (int i = 0; i < (int)QQ.size(); i++)
    {
        if (SS.compare(QQ[i]) == 0) in = true;
    }
    if (in == false)
    {
        cout << "The start state " << SS << " is not in the list of states." << endl;
        exit(1);
    }
}

void tm::checkFinal()
{
    if (FF[0].compare(FF[1]) == 0)
    {
        cout << "The accept and reject states cannot be the same." << endl;
        exit(1);
    }
    bool accept = false, reject = false;
    for (int i = 0; i < (int)QQ.size(); i++)
    {
        if (FF[0].compare(QQ[i]) == 0) accept = true;
        if (FF[1].compare(QQ[i]) == 0) reject = true;
        }
        if (accept == false)
        {
        cout << "The accept state " << FF[0] << " is not in the list of states." << endl;
        exit(1);
    }
    if (reject == false)
    {
        cout << "The reject state " << FF[1] << " is not in the list of states." << endl;
        exit(1);
    }
}

void tm::checkDeterministic()
{
    for (int i = 0; i < (int)TT.size(); i++)
        for (int k = i+1; k < (int)TT.size(); k++)
            if (TT[i][0].compare(TT[k][0]) == 0 && TT[i][1].compare(TT[k][1]) == 0)
            {
            cout << "The machine cannot proceed deterministically, transitions " << i << " and " << k << " are the same." << endl;
            exit(1);
        }
}

void tm::checkAcceptReject()
{
    for (int i = 0; i < (int)TT.size(); i++)
    {
        if (TT[i][0].compare(FF[0]) == 0 || TT[i][0].compare(FF[1]) == 0)
        {
            cout << "The machine cannot transitions from the accept or reject states." << endl;
        }
    }
}

void tm::checkInput()
{
    bool exists;
    for (int i = 0; i < (int)input.size(); i++)
    {
        for (int k = 0; k < (int)input[i].size(); k++)
        {
            exists = false;
            for (int g = 0; g < (int)AA.size(); g++)
            {
                if (input[i][k].compare(AA[g]) == 0) exists = true;
            }
            if (exists == false)
            {
                if (input[i][0].compare("e") != 0) //it is not 'e'
                {
                    cout << "The input character " << input[i][k] << " is not in the input alphabet." << endl;
                    exit(1);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:01:20.870

您可以模仿文件压缩器：给定一串字符并将重复序列压缩为 8 个组（添加更大的组将需要线性数量的更多代码行，添加更多字符将需要指数数量的更多行代码，因为每个字母都需要对每个可能的字母做出反应。）

机器记录磁带的正面，然后一直运行到背面。它“吃掉”角色，将相似的角色放入一个扩大的池中。当达到限制、磁带的末端或达到另一个字符类型时，机器会打印它已经走了多远，然后开始堆积新的字符。

```
Q:q0,q1,q2,Fs,Rs,a1,a1z,a2,a2z,a3,a3z,a4,a4z,a5,a5z,a6,a6z,a7,a7z,b1,b1y,b2,b2y,b3,b3y,b4,b4y,b5,b5y,b6,b6y,b7,b7y
A:a,b
Z: ,a,a2,a3,a4,a5,a6,a7,a8,b,b2,b3,b4,b5,b6,b7,b8,y,z 
T:q0,a,q1,y,R
T:q0,b,q1,z,R   
T:q1,a,q1,a,R
T:q1,b,q1,b,R
T:q1, ,q2, ,L    
T:q2,a,a1, ,L
T:q2,b,b1, ,L
T:q2,y,Fs,a,R
T:q2,z,Fs,b,R  
T:a1,a,a2, ,L
T:a1,b,b1,a,L
T:a1,y,Fs,a2,R
T:a1,z,a1z,b,R
T:a1z, ,Fs,a,R    
T:b1,b,b2, ,L
T:b1,a,a1,b,L
T:b1,z,Fs,b2,R
T:b1,y,b1y,a,R
T:b1y, ,Fs,b,R    
T:a2,a,a3, ,L
T:a2,b,b1,a2,L
T:a2,y,Fs,a3,R
T:a2,z,a2z,b,R
T:a2z, ,Fs,a2,R    
T:b2,b,b3, ,L
T:b2,a,a1,b2,L
T:b2,z,Fs,b3,R
T:b2,y,b2y,a,R
T:b2y, ,Fs,b2,R   
T:a3,a,a4, ,L
T:a3,b,b1,a3,L
T:a3,y,Fs,a4,R
T:a3,z,a3z,b,R
T:a3z, ,Fs,a3,R   
T:b3,b,b4, ,L
T:b3,a,a1,b3,L
T:b3,z,Fs,b4,R
T:b3,y,b3y,a,R
T:b3y, ,Fs,b3,R   
T:a4,a,a5, ,L
T:a4,b,b1,a4,L
T:a4,y,Fs,a5,R
T:a4,z,a4z,b,R
T:a4z, ,Fs,a4,R 
T:b4,b,b5, ,L
T:b4,a,a1,b4,L
T:b4,z,Fs,b5,R
T:b4,y,b4y,a,R
T:b4y, ,Fs,b4,R  
T:a5,a,a6, ,L
T:a5,b,b1,a5,L
T:a5,y,Fs,a6,R
T:a5,z,a5z,b,R
T:a5z, ,Fs,a5,R   
T:b5,b,b6, ,L
T:b5,a,a1,b5,L
T:b5,z,Fs,b6,R
T:b5,y,b5y,a,R
T:b5y, ,Fs,b5,R    
T:a6,a,a7, ,L
T:a6,b,b1,a6,L
T:a6,y,Fs,a7,R
T:a6,z,a6z,b,R
T:a6z, ,Fs,a7,R   
T:b6,b,b7, ,L
T:b6,a,a1,b6,L
T:b6,z,Fs,b7,R
T:b6,y,b6y,a,R
T:b6y, ,Fs,b7,R
T:a7,a,q2,a8,L
T:a7,b,b1,a7,L
T:a7,y,Fs,a8,R
T:a7,z,a7z,b,R
T:a7z, ,Fs,a7,R
T:b7,b,q2,b8,L
T:b7,a,a1,b8,L
T:b7,z,Fs,b8,R
T:b7,y,b7y,a,R
T:b7y, ,Fs,b7,R

S:q0
F:Fs,Rs 
```

您可以模仿 RNA 碱基对的读取来创建细胞生物学中的氨基酸。用户给出一个完全由 a、c、g 和 u 组成的字符串。机器读取这条线，直到它读取起始密码子“a,u,g”，此时它开始将 RNA 翻译成氨基酸。它会一直执行此操作，直到到达字符串的末尾或到达终止密码子（“UAA”、“UGA”、“UAG”）。如果它到达一个终止密码子，它将继续沿着字符串向下，直到它读取另一个起始密码子或字符串终止。读取任何氨基酸序列都会导致接受，并且不需要到达终止密码子（如生物学）。但是，没有起始密码子的字符串将导致拒绝语句。

第一个示例演示了几个字符延迟，一个起始密码子，然后是氨基酸，直到一个终止密码子，然后是更多未使用的字符，然后是完成。第二个示例演示了起始密码子、中间密码子、终止密码子、填充符、另一个起始密码子和直到字符串完成的密码子。第三个示例演示了无起始密码子和 REJECT 状态。

```
Q:q0,q1,q2,q3,q4,q5,q6,Fs,Rs,s1,s2,u,c,a,g,uu,ua,ug,ca,au,aa,ag,ga
A:u,c,a,g,u
Z: ,u,c,a,g,ala,arg,asn,asp,cys,gln,glu,gly,his,ile,leu,lem,lys,met,phe,pro,ser,thr,trp,tyr,val,stop

T:q0,u,q0, ,R
T:q0,c,q0, ,R
T:q0,g,q0, ,R
T:q0,a,q1, ,R

T:q1,c,q0, ,R
T:q1,g,q0, ,R
T:q1,a,q0, ,R
T:q1,u,q2, ,R

T:q2,u,q0, ,R
T:q2,c,q0, ,R
T:q2,a,q0, ,R
T:q2,g,q3,met,R

T:q4,u,q4, ,R
T:q4,c,q4, ,R
T:q4,g,q4, ,R
T:q4,a,q5, ,R
T:q4, ,Fs, ,R

T:q5,c,q4, ,R
T:q5,g,q4, ,R
T:q5,a,q4, ,R
T:q5,u,q6, ,R
T:q5, ,Fs, ,R

T:q6,u,q4, ,R
T:q6,c,q4, ,R
T:q6,a,q4, ,R
T:q6,g,q3,met,R
T:q6, ,Fs, ,R

T:s1,u,q3, ,R
T:s1,c,q3, ,R
T:s1,a,q3, ,R
T:s1,g,q3, ,R
T:s1, ,s2, ,L

T:s2,ala,Fs, ,R
T:s2,arg,Fs, ,R
T:s2,gly,Fs, ,R
T:s2,leu,Fs, ,R
T:s2,pro,Fs, ,R
T:s2,ser,Fs, ,R
T:s2,thr,Fs, ,R
T:s2,val,Fs, ,R

T:q3,u,u, ,R
T:q3,c,c, ,R
T:q3,a,a, ,R
T:q3,g,g, ,R
T:q3, ,Fs, ,R

T:u,u,uu, ,R
T:u,c,s1,ser,R
T:u,a,ua, ,R
T:u,g,ug, ,R
T:u, ,Fs, ,R

T:uu,u,q3,phe,R
T:uu,c,q3,phe,R
T:uu,a,q3,leu,R
T:uu,g,q3,leu,R
T:uu, ,Fs, ,R

T:ua,u,q3,tyr,R
T:ua,c,q3,tyr,R
T:ua,a,q4,stop,R
T:ua,g,q4,stop,R
T:ua, ,Fs, ,R

T:ug,u,q3,cys,R
T:ug,c,q3,cys,R
T:ug,a,q4,stop,R
T:ug,g,q3,trp,R
T:ug, ,Fs, ,R

T:c,u,s1,leu,R
T:c,c,s1,pro,R
T:c,a,ca, ,R
T:c,g,s1,arg,R
T:c, ,Fs, ,R

T:ca,u,q3,his,R
T:ca,c,q3,his,R
T:ca,a,q3,gln,R
T:ca,g,q3,gln,R
T:ca, ,Fs, ,R

T:a,u,au, ,R
T:a,c,s1,thr,R
T:a,a,aa, ,R
T:a,g,ag, ,R
T:a, ,Fs, ,R

T:au,u,q3,ile,R
T:au,c,q3,ile,R
T:au,a,q3,ile,R
T:au,g,q3,met,R
T:au, ,Fs, ,R

T:aa,u,q3,asn,R
T:aa,c,q3,asn,R
T:aa,a,q3,lys,R
T:aa,g,q3,lys,R
T:aa, ,Fs, ,R

T:ag,u,q3,ser,R
T:ag,c,q3,ser,R
T:ag,a,q3,arg,R
T:ag,g,q3,arg,R
T:ag, ,Fs, ,R

T:g,u,s1,val,R
T:g,c,s1,ala,R
T:g,a,ga, ,R
T:g,g,s1,gly,R
T:g, ,Fs, ,R

T:ga,u,q3,asp,R
T:ga,c,q3,asp,R
T:ga,a,q3,glu,R
T:ga,g,q3,glu,R
T:ga, ,Fs, ,R

S:q0
F:Fs,Rs 
```

# python - 将 JSON 对象传递给带有请求的 url

> ID：10503383
> 
> 赞同：6
> 
> 时间：2012-05-08T17:21:56.083
> 
> 标签：python, urllib2, freebase

所以，我想使用 Kenneth 的优秀[请求模块](https://github.com/kennethreitz/requests/)。在尝试使用[Freebase API](http://wiki.freebase.com/wiki/API)时偶然发现了这个问题。

基本上，他们的 API 是这样的：

```
https://www.googleapis.com/freebase/v1/mqlread?query=... 
```

作为一个查询，他们需要一个 JSON 对象，这里会[返回一个包含他们的国家和酒精百分比的葡萄酒列表](http://www.freebase.com/queryeditor?q=%5B%7B%22country%22%3Anull%2C%22name%22%3Anull%2C%22percentage_alcohol%22%3Anull%2C%22percentage_alcohol%3E%22%3A0%2C%22type%22%3A%22%2Ffood%2Fwine%22%7D%5D)：

```
[{
  "country":       null,
  "name":          null,
  "percentage_alcohol": null,
  "percentage_alcohol>": 0,
  "type":          "/food/wine"
}]​ 
```

当然，在将它传递给 URL 之前，我们必须摆脱它，所以实际的查询将如下所示：

```
 fullurl = 'https://www.googleapis.com/freebase/v1/mqlread?query=%5B%7B%22percentage_alcohol%3E%22%3A+0%2C+%22country%22%3A+null%2C+%22type%22%3A+%22%2Ffood%2Fwine%22%2C+%22name%22%3A+null%2C+%22percentage_alcohol%22%3A+null%7D%5D' 
```

现在，

```
r = requests.get(fullurl)
print r.status_code
>>> 400 
```

因为该网站声称它无法解析查询。

```
r2 = urllib2.urlopen(fullurl)
print r2.getcode()
>>> 200 
```

没问题，我得到了适当的回报。有趣的是，

```
# This is the url of our requests.get request
print urllib2.urlopen(r.url).getcode() 
>>> 200 
```

为什么？我是否使用了错误的模块？或者它是一个错误`requests`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T17:35:04.050

这个对我有用。这是我所做的：

```
>>> params = [{"country": None,
...            "name": None,
...            "percentage_alcohol": None,
...            "percentage_alcohol>": 0,
...            "type": "/food/wine"
...          }]
>>> import json
>>> params_json = json.dumps(params)

>>> import requests
>>> url = "https://www.googleapis.com/freebase/v1/mqlread?query=%s"
>>> r = requests.get(url % params_json)
>>> r.status_code
200

>>> content_json = json.loads(r.content)
>>> import pprint
>>> pprint.pprint(content_json)
{u'result': [{u'country': u'New Zealand',
              u'name': u'2003 Cloudy Bay Sauvignon Blanc',
              u'percentage_alcohol': 13.5,
              u'type': u'/food/wine'},
             {u'country': u'France',
              u'name': u'G.H. Mumm Cordon Rouge Brut',
              u'percentage_alcohol': 12.0,
              u'type': u'/food/wine'},
.... 
```

为简洁起见，我切断了其余部分。有 100 个结果。`requests.__version__ == '0.10.6'`

# java - 使用检票口更新文本区域

> ID：10503388
> 
> 赞同：2
> 
> 时间：2012-05-08T17:22:27.780
> 
> 标签：java, ajax, textarea, wicket

我正在尝试使用 apache wicket 创建类似于只读控制台窗口的东西。本质上，用户提交表单以启动服务器端操作。然后可以在页面上跟踪作业输出。

我目前正在显示输出，如下所示：

```
public class ConsoleExample extends WebPage {

protected boolean refreshing;
private String output = "";

public void setOutput(String newOutput) {
    synchronized (this) {
        output = newOutput;
    }
}

public void appendOutput(String added) {
    synchronized (this) {
        this.output = output+added;
    }
}

public ConsoleExample() {

    Form<ConsoleExample> form = new Form<ConsoleExample>("mainform");
    add(form);
        final TextArea<String> outputArea = new TextArea<String>("output",
            new PropertyModel<String>(this, "output"));
    outputArea.setOutputMarkupId(true);
    // A timer event to add the outputArea to the target, triggering the refresh
    outputArea.add(new AbstractAjaxTimerBehavior(Duration.ONE_SECOND){
        private static final long serialVersionUID = 1L;
        @Override
        protected void onTimer(AjaxRequestTarget target) {
            synchronized (this) {
                if(refreshing ){
                    target.focusComponent(null);
                    target.addComponent(getComponent());
                }
            }
        }

    });

    add(outputArea);

    form.add(new AjaxSubmitLink("run") {
        private static final long serialVersionUID = 1L;

        @Override
        public void onSubmit(final AjaxRequestTarget target, Form<?> form) {
            setOutput("");
            new Thread(new Runnable() {
                @Override
                public void run() {
                    try {
                        refreshing = true;
                        ProcessBuilder pb = new ProcessBuilder(Collections.singletonList("execute"));
                        pb.redirectErrorStream(true);
                        String line;
                        BufferedReader br = new BufferedReader(new InputStreamReader(pb.start().getInputStream()));
                        while ((line = br.readLine()) != null) {
                            appendOutput("\n" + line);
                        }
                    } catch (IOException e) {
                        //...
                    } finally {
                        //...
                        refreshing = false;
                    }
                }
            }).start();
        }
    });
} 
```

该解决方案的问题在于，每次 AjaxTimerBehaviorRuns 刷新都会重置文本区域属性，即光标位置和滚动位置。因此，随着输出的增加，用户无法跟踪输出，因为 textarea 每秒都会跳回开始。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:25:24.103

A posible easy to implement approach is to add a hidden `TextField` that you update throw AJAX with a `AjaxTimerBehavior` and then calls a JavaScript function (using `AjaxRequestTarget.appendJavaScript()`) that synchronizes the value of the hidden `TextField` with your `<textarea>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:35:49.620

Partial Solution Following on from jordeu's suggestion of using the appendJavaScript() function I am just adding a bit of javascript to append the new text:

```
protected void onTimer(AjaxRequestTarget target) {
    synchronized (this) {
        if(refreshing ){
            if(update != null){
                target.appendJavascript("var obj=document.getElementById(\"output\");var txt=document.createTextNode(\""+update+"\");obj.appendChild(txt)");
                update = null;
            }
        }
    }
} 
```

Where the `update` field is any new text since the last update.

This solves the scroll issue but any user selection is still reset. Also it doesn't seem like a "nice" solution to me.

Any further suggestions of how to improve are welcome.

# java - 用于排列数字列表的 Java 代码

> ID：10503392
> 
> 赞同：8
> 
> 时间：2012-05-08T17:22:53.417
> 
> 标签：java, algorithm, optimization, permutation

我编写了一个程序来查找给定项目列表的所有可能排列。这恰恰意味着我的程序打印了 r=0 到 n 的所有可能的 P(n,r) 值

下面是代码：

 `````
package com.algorithm;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collection;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class Permutations<T> {
    public static void main(String args[]) {
        Permutations<Integer> obj = new Permutations<Integer>();
        Collection<Integer> input = new ArrayList<Integer>();
        input.add(1);
        input.add(2);
        input.add(3);

        Collection<List<Integer>> output = obj.permute(input);
        int k = 0;
        Set<List<Integer>> pnr = null;
        for (int i = 0; i <= input.size(); i++) {
            pnr = new HashSet<List<Integer>>();
            for(List<Integer> integers : output){
            pnr.add(integers.subList(i, integers.size()));
            }
            k = input.size()- i;
            System.out.println("P("+input.size()+","+k+") :"+ 
            "Count ("+pnr.size()+") :- "+pnr);
        }
    }
    public Collection<List<T>> permute(Collection<T> input) {
        Collection<List<T>> output = new ArrayList<List<T>>();
        if (input.isEmpty()) {
            output.add(new ArrayList<T>());
            return output;
        }
        List<T> list = new ArrayList<T>(input);
        T head = list.get(0);
        List<T> rest = list.subList(1, list.size());
        for (List<T> permutations : permute(rest)) {
            List<List<T>> subLists = new ArrayList<List<T>>();
            for (int i = 0; i <= permutations.size(); i++) {
                List<T> subList = new ArrayList<T>();
                subList.addAll(permutations);
                subList.add(i, head);
                subLists.add(subList);
            }
            output.addAll(subLists);
        }
        return output;
    }
} 
````  `**输出**

```
P(3,3) : Count (6) :- [[1, 2, 3], [2, 3, 1], [3, 2, 1], [3, 1, 2], [2, 1, 3], [1, 3, 2]]
P(3,2) : Count (6) :- [[3, 1], [2, 1], [3, 2], [1, 3], [2, 3], [1, 2]]
P(3,1) : Count (3) :- [[3], [1], [2]]
P(3,0) : Count (1) :- [[]] 
```

我的问题是，当我增加输入列表中的数字时。运行时间增加，输入列表中有 11 个数字后，程序几乎死掉。运行大约需要 2 GB 内存。

我在一台有 8GB RAM 和 i5 处理器的机器上运行它，所以速度和空间不是问题。

如果有人可以帮助我编写更有效的代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-08T17:44:00.163

如果你不存储它——如果你只是迭代它——然后考虑使用堆算法（[http://www.cut-the-knot.org/do_you_know/AllPerm.shtml](http://www.cut-the-knot.org/do_you_know/AllPerm.shtml)上的#3 ）——或者，只是为了让你的生活更轻松，使用 Guava's [`Collections2.permutations`](https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Collections2.java)，它实际上并没有构建整个排列列表——它会在运行中遍历它们。（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T17:37:39.720

如果您想要 15 个或更多元素的所有排列，请将它们写入磁盘或数据库或其他东西，因为它们不适合内存。编辑：[Steinhaus-Johnson-Trotter 算法](http://en.wikipedia.org/wiki/Steinhaus%E2%80%93Johnson%E2%80%93Trotter_algorithm)。这可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-15T14:25:23.583

Google (Guava) 的 Java 库为此提供了一个实用方法：[Collections2#permutations(Collection)](https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Collections2.java)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T17:34:36.797

您确实意识到您正在生成非常大的列表，并且运行时间会随着列表长度的增加而增加。你确定给你带来麻烦的清单应该有多长吗？

可能对某些人有所帮助的一件事是在找到每个排列时打印它，而不是将它们全部收集到一个列表中然后打印它们。当然，如果重点是实际存储整个列表，而不仅仅是打印它们，那将无济于事。``

# android - Android：如何在我的应用程序中使用谷歌地图实现预缓存功能？

> ID：10503399
> 
> 赞同：0
> 
> 时间：2012-05-08T17:23:20.403
> 
> 标签：android, google-maps

在我的应用程序中，我需要在 android 手机中实现预缓存功能，例如原生 Google 地图应用程序。当我从一个点导航到另一个点时，我的应用程序中已经有了地图，它开始在我的应用程序中加载我想要的地图，我可以存储地图如果一个特定的城市不是整个世界，因为它太大了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:27:22.150

您不能使用本机 MapView （[服务条款](https://developers.google.com/maps/documentation/android/maps-api-signup)）执行此操作。看看[OSM](http://code.google.com/p/osmdroid/)！

# php - 存储在数据库中的 PHP Ico-Image 未显示在浏览器中

> ID：10503401
> 
> 赞同：0
> 
> 时间：2012-05-08T17:23:35.197
> 
> 标签：php, image, ico

我想从网站读取 .ico-Images，将信息存储到数据库中，然后在全球网站上显示图像。

我设法将字符串中的图像保存到数据库中。在网站上显示图像的步骤是我的问题。

阅读内容：

```
$data=file_get_contents("http://www.google.com/favicon.ico");
$data = base64_encode($data); 
```

在网站上的单个 div 中显示该图像的正确方法是什么？

菲斯普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:33:03.520

您基本上需要告诉您的脚本将内容输出为 ico 类型。

```
<?php 
//Getting your image
$data=file_get_contents("http://www.google.com/favicon.ico");
$data = base64_encode($data);  

//If your storing in the db then you do the query ect togo get the data string

//Then echo out like this
header('Content-Type: image/vnd.microsoft.icon');
echo base64_decode($data);
?> 
```

请记住，在设置标题之前您不能输出任何内容，因此您可能需要一个单独的脚本来获取文件并输出

`<img src="get_ico.php?id=1"/>`

然后在`get_ico.php`

```
<?php 
//Connect db ect

//Query db for $_GET['id']

//Then echo out like this
header('Content-Type: image/vnd.microsoft.icon');
echo base64_decode($row['image_data']);
?> 
```

# mvcmailer - MVCMailer 的问题

> ID：10503404
> 
> 赞同：2
> 
> 时间：2012-05-08T17:23:41.520
> 
> 标签：mvcmailer

不确定其他人是否遇到过这个问题，但我正在尝试使用 MVCMailer 发送电子邮件。我能够安装它并更新 T4Scaffolding 包，没有任何问题。

我有一个正在创建报告的 aspx 页面，我希望将该报告附加到电子邮件中。但是，当我转身并在 UserMailers 类中调用我的 SendReport 方法时，它会在 PopulateBody 调用中引发错误，指出 routeData 为空

这是我的代码

```
public class UserMailer : MailerBase, IUserMailer
{
    /// <summary>
    /// Email Reports using this method
    /// </summary>
    /// <param name="toAddress">The address to send to.</param>
    /// <param name="viewName">The name of the view.</param>
    /// <returns>The mail message</returns>
    public MailMessage SendReport(string toAddress, string viewName)
    {
        var message = new MailMessage { Subject = "Report Mail" };
        message.To.Add(toAddress);

        ViewBag.Name = "Testing-123";

        this.PopulateBody(mailMessage: message, viewName: "SendReport");

        return message;
    }
} 
```

我得到的错误是“值不能为空。参数名称：routeData”

我在网上查看过，没有发现与此问题相关的任何内容或遇到此问题的任何人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:19:16.997

它被称为**Mvc** Mailer 是有原因的。您不能在普通的 asp.net (.aspx) 项目中使用它，只能在 MVC 项目中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T01:50:00.560

正如 Filip 所说，它不能在 ASP.NET ASPX 页面的代码隐藏中使用，因为没有`ControllerContext`/ `RequestContext`。

对我来说最简单的方法是创建一个控制器操作，然后使用`WebClient`它从 ASPX 页面发出一个 http 请求。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        WebClient wc = new WebClient();

        var sendEmailUrl = "https://" + Request.Url.Host + 
                           Page.ResolveUrl("~/email/SendGenericEmail") + 
                           "?emailAddress=email@example.com" + "&template=Template1";

        wc.DownloadData(sendEmailUrl);
    } 
```

然后我有一个简单的控制器

```
public class EmailController : Controller
{
    public ActionResult SendGenericEmail(string emailAddress, string template)
    {
        // send email
        GenericMailer mailer = new GenericMailer();

        switch (template)
        {
            case "Template1":

                var email = mailer.GenericEmail(emailAddress, "Email Subject");
                email.Send(mailer.SmtpClient);
                break;

            default:
                throw new ApplicationException("Template " + template + " not handled");
        }

        return new ContentResult()
        {
            Content = DateTime.Now.ToString()
        };
    }
} 
```

当然还有很多问题，比如安全、协议（控制器无法访问原始页面）、错误处理——但如果你发现自己卡住了，这可以工作。

# c# - 文本框上的 AcceptsReturn 无法正常运行

> ID：10503405
> 
> 赞同：4
> 
> 时间：2012-05-08T17:23:56.427
> 
> 标签：c#, .net, winforms

我在设置为多行的表单上有一个简单的搜索字段（据我所知，这是更改文本框高度的唯一方法），并且标志 AcceptsReturn 设置为 false。

但是，当我在该控件中按 Enter 键时，它并没有按应有的方式激活默认按钮，而是输入了一个返回字符。

现在，我还尝试使用 KeyPress 事件来检查是否已按下 Enter 键来激活搜索按钮单击功能，希望它会覆盖此返回行为 - 但它没有。现在它只是运行搜索并插入一个返回字符。

我正在运行 Visual Studio 2010（虽然这个问题在我转换之前似乎也存在于 2008 年）和 C# .NET 2.0。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:35:51.427

我看到已经发布了一个答案，其中提到了 AcceptButton 属性，但我想我会更清楚地*说明为什么*这是必要的：quoth [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.acceptsreturn.aspx)，在 AcceptsReturn 上，“如果表单没有默认按钮，则 ENTER 键将始终无论此属性的值如何，都在控件中创建新的一行文本。” （我只是在一个虚拟表单上进行了尝试——通过“默认按钮”，它们实际上是指表单的 AcceptButton 属性。使用一组，AcceptsReturn 的值会有所不同；没有一组，它就没有效果。）

至于 KeyPress，虽然在这种情况下这显然不是最好的方法，但我过去不得不使用类似的技巧 - 你是否记得在你自己处理事件的情况下将 e.Handled 设置为 true ？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:32:01.877

该表单有一个名为*AcceptButton*的属性。那是指向您调用*默认按钮*的按钮吗？

我刚刚写了一个小测试，它似乎对我有用。

# asp.net - asp.net 中的 Gridview 分页样式

> ID：10503406
> 
> 赞同：1
> 
> 时间：2012-05-08T17:23:59.620
> 
> 标签：asp.net, gridview, pagination, styling

我有一个gridview，需要一个特定的分页样式，对于分页，这是我需要的输出，谁能告诉我如何实现这一点： ![gridview中的自定义分页设计](../Images/886aeb5f329b821c18e38b557aff0ffd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:33:52.957

在 GridView 属性中，有一个称为 PaggerSettings。在这个里面你有 FirstPageImageUrl、LastPageImageUrl 等等。在此字段中，您应该放置具有所需角落和背景的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:00:45.583

## **`PagerPosition Enumeration - TopAndBottom`**

此属性将同时显示寻呼机**`Top and Bottom`**

## `MARK UP`

```
<PagerTemplate>
    <asp:LinkButton ID="LinkButton1" runat="server" 
                CommandName="Page" CommandArgument="First">First</asp:LinkButton>
    <asp:Label ID="pmore" runat="server" Text="..."></asp:Label>
    <asp:LinkButton ID="LinkButton2" runat="server" 
                CommandName="Page" CommandArgument="Prev">Pre</asp:LinkButton>
    <asp:LinkButton ID="p0" runat="server" >LinkButton</asp:LinkButton>
    <asp:LinkButton ID="p1" runat="server" >LinkButton</asp:LinkButton>
    <asp:LinkButton ID="p2" runat="server" >LinkButton</asp:LinkButton>
    <asp:Label ID="CurrentPage" runat="server" Text="Label"></asp:Label>
    <asp:LinkButton ID="p4" runat="server" >LinkButton</asp:LinkButton>
    <asp:LinkButton ID="p5" runat="server" >LinkButton</asp:LinkButton>
    <asp:LinkButton ID="p6" runat="server" >LinkButton</asp:LinkButton>
    <asp:LinkButton ID="LinkButton3" runat="server" 
                CommandName="Page" CommandArgument="Next">Next</asp:LinkButton>
    <asp:Label ID="nmore" runat="server" Text="..."></asp:Label>
    <asp:LinkButton ID="LinkButton4" runat="server" 
                CommandName="Page" CommandArgument="Last">Last</asp:LinkButton>
</PagerTemplate> 
```

* * *

## `Code Behind`

```
protected void GridView1_DataBound(object sender, EventArgs e)
{
    GridViewRow gvr = GridView1.BottomPagerRow;
    Label lb1 = (Label)gvr.Cells[0].FindControl("CurrentPage");
    lb1.Text = Convert.ToString(GridView1.PageIndex+1);
    int[] page = new int[7];
    page[0] = GridView1.PageIndex - 2;
    page[1] = GridView1.PageIndex - 1;
    page[2] = GridView1.PageIndex;
    page[3] = GridView1.PageIndex + 1;
    page[4] = GridView1.PageIndex + 2;
    page[5] = GridView1.PageIndex + 3;
    page[6] = GridView1.PageIndex + 4;
    for (int i = 0; i < 7; i++)
    {
        if (i != 3)
        {
            if (page[i] < 1 || page[i] > GridView1.PageCount )
            {
                LinkButton lb = (LinkButton)gvr.Cells[0].FindControl("p" + Convert.ToString(i));
                lb.Visible = false;
            }
            else
            {
                LinkButton lb = (LinkButton)gvr.Cells[0].FindControl("p" + Convert.ToString(i));
                lb.Text = Convert.ToString(page[i]);

                lb.CommandName = "PageNo";
                lb.CommandArgument = lb.Text;

            } 
        }
    }
    if (GridView1.PageIndex == 0)
    {
        LinkButton lb = (LinkButton)gvr.Cells[0].FindControl("LinkButton1");
        lb.Visible = false;
        lb = (LinkButton)gvr.Cells[0].FindControl("LinkButton2");
        lb.Visible = false;

    }
    if (GridView1.PageIndex == GridView1.PageCount - 1)
    {
        LinkButton lb = (LinkButton)gvr.Cells[0].FindControl("LinkButton3");
        lb.Visible = false;
        lb = (LinkButton)gvr.Cells[0].FindControl("LinkButton4");
        lb.Visible = false;

    }
    if (GridView1.PageIndex > GridView1.PageCount - 5)
    {
        Label lbmore = (Label)gvr.Cells[0].FindControl("nmore");
        lbmore.Visible = false;
    }
    if (GridView1.PageIndex < 4)
    {
        Label lbmore = (Label)gvr.Cells[0].FindControl("pmore");
        lbmore.Visible = false;
    }

}

void lb_Command(object sender, CommandEventArgs e)
{
    GridView1.PageIndex = Convert.ToInt32(e.CommandArgument) - 1;
}

protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.Pager)
    {
        GridViewRow gvr = e.Row;
        LinkButton lb = (LinkButton)gvr.Cells[0].FindControl("p0");
        lb.Command += new CommandEventHandler(lb_Command);
        lb = (LinkButton)gvr.Cells[0].FindControl("p1");
        lb.Command += new CommandEventHandler(lb_Command);
        lb = (LinkButton)gvr.Cells[0].FindControl("p2");
        lb.Command += new CommandEventHandler(lb_Command);
        lb = (LinkButton)gvr.Cells[0].FindControl("p4");
        lb.Command += new CommandEventHandler(lb_Command);
        lb = (LinkButton)gvr.Cells[0].FindControl("p5");
        lb.Command += new CommandEventHandler(lb_Command);
        lb = (LinkButton)gvr.Cells[0].FindControl("p6");
        lb.Command += new CommandEventHandler(lb_Command);
    }
} 
```

[参考](http://forums.asp.net/t/1235573.aspx)

# xpages - 使用托管 Bean 的架构问题？

> ID：10503407
> 
> 赞同：2
> 
> 时间：2012-05-08T17:24:01.810
> 
> 标签：xpages

比方说，如果我有一个应用程序，我一直在其中保留所有 XPage，但大多数 XPage 不一定彼此相关。如果我在 faces-config 文件中为其中一些 XPage 定义了几个 bean，那么对不使用任何这些托管 bean 的其他 XPage 的内存和性能有什么影响？他们不是为这个应用程序中的所有 XPage 实例化并保存在内存中（即使是空的）吗？

如果是这样，那么最好的做法是将使用托管 bean（并可能共享它们）的相关 XPage 保留在他们自己的 NSF 中，而不是为站点的所有 XPage 单独存储？

霍华德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T22:19:25.770

托管 bean 仅在 EL/SSJS 中引用时才被构造。它的范围定义了它何时被丢弃。

因此，从性能的角度来看，faces-config 中定义了多少个 bean 并不重要。

但是，您必须考虑的是方法的性能。尤其是 setter/getter，每个请求通常会调用更多次。还要避免请求范围 bean 的构造函数中的任何过多代码。也适用于内存需求 - 尽量不要在 bean 中保留大量数据（数组、映射......）。

我建议将 XPage 拆分为更多数据库。原因不同于 bean 性能 - 应用程序逻辑。最好将相关功能放在一起（在单个 NSF 中）并与其他功能分开（不要将它们全部混合在同一个地方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:46:25.087

这实际上取决于您用于将它们保存在内存中的范围，您将它们用于什么等等等等。

# ios - 如何像菱形一样重塑 UIView

> ID：10503410
> 
> 赞同：0
> 
> 时间：2012-05-08T17:24:26.113
> 
> 标签：ios, uiview

我正在尝试将 UIView 添加到立方体的每一侧，就像这张图片中的那样：

[http://upload.wikimedia.org/wikipedia/commons/0/02/Face_colored_cube.png](http://upload.wikimedia.org/wikipedia/commons/0/02/Face_colored_cube.png)

由于 UIViews 是矩形的，因此很难实现我正在尝试的内容。我现在所做的只是旋转视图，但这还不够。

实现这一目标的正确方法是什么？有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:32:39.340

您需要进行透视图转换。

[看看这个教程](http://watchingapple.com/2008/04/core-animation-3d-perspective/)

[您还可以查看 Brad Larson 的这个答案](https://stackoverflow.com/a/353611/312312)

# c# - 是否会有用于 asp.net 网络表单的 SPA 模板？

> ID：10503418
> 
> 赞同：1
> 
> 时间：2012-05-08T17:24:51.917
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4

我知道`MVC4`会有一个`Single Page Application template`。有关 Web 表单的任何信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:29:19.897

VS11 beta 中还没有引入这样的模板，所以如果微软在 RTM 中包含一个，我会感到惊讶。当然可能是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:36:17.607

页面底部有一个名为“Hot Towelette SPA”@http://www.johnpapa.net/spa/ 的模板[。](http://www.johnpapa.net/spa/)

我还没有玩过它，但从它的描述中可以看出：“Hot Towel 也作为 NuGet 包提供，您可以将其添加到 ASP.NET 应用程序（不需要 MVC）”

不要混合它；Towel 用于 MVC，Towelette 用于非 MVC。

希望能帮助到你。

# javascript - 参考和原始原型值

> ID：10503422
> 
> 赞同：0
> 
> 时间：2012-05-08T17:25:22.867
> 
> 标签：javascript, javascript-objects

我不明白为什么数组在两个实例之间共享而原始类型不是。有人可以解释一下吗？

```
MyObject = function() {};
MyObject.prototype = {anArray : [],aString : ''};
var c1 = new MyObject();
c1.aString = 'a';
c1.anArray.push('a');
var c2 = new MyObject();
console.log(c2.aString);
console.log(c2.anArray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:32:56.353

字符串是不可变的，数组是可变的。您要替换字符串，但要*修改*数组。

如果您*覆盖*数组而不是修改它，您将在数组和字符串之间获得相同的行为。

```
MyObject = function() {};
MyObject.prototype = {anArray : [],aString : ''};

var c1 = new MyObject();
c1.aString = 'a';
c1.anArray = []
c1.anArray.push('a');

var c2 = new MyObject();
console.log(c2.aString); // ''
console.log(c2.anArray); // [] 
```

`prototype`因此，如果您计划允许所有实例观察对其的更改，那么将对象或数组放在上面才有意义。否则，直接放在实例上即可。

```
MyObject = function() {
    this.anArray = [];
};
MyObject.prototype = {aString : ''}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:29:03.140

当你分配

```
c1.aString = 'a' 
```

您**没有**分配给`aString`原型中的字段。一个名为的新字段`aString`直接在`c1`对象中创建，并将该字段隐藏`aString`在原型中。

同时，当你打电话

```
c1.anArray.push('a'); 
```

in中没有`anArray`字段`c1`，因此您引用的是`anArray`in 原型。你可以通过这样做来测试它

```
c1.anArray = new Array(); 
```

并注意在`anArray`中创建了一个新属性，而不是在原型中`c1`干扰。`anArray`在这种情况下，

```
console.log(c1.anArray);
console.log(c2.anArray); 
```

会有不同的结果，`c2`仍然会引用`anArray`in 原型。

如果直接在对象和原型中（甚至在原型链中）存在同名的字段，并且您请求该字段的值，则解释器首先直接查看对象，然后才向上查找原型链，直到它在某处找到该字段。

然而，如果你给一个字段赋值，它总是直接在对象中完成，而不是在它的原型中。

# tomcat - 自定义动态错误 404 页面 - guice / tomcat

> ID：10503423
> 
> 赞同：4
> 
> 时间：2012-05-08T17:25:27.253
> 
> 标签：tomcat, error-handling, tomcat7, guice-servlet, guice-3

我正在 tomcat 7 服务器上使用 guice 3.0 创建一个 Web 应用程序。

我设法使用静态文件来自定义错误 404 页面，但现在我需要使用 servlet 自定义错误 404 页面。

因此，在我的 web.xml 中，我添加了这些行：

```
<error-page>
    <error-code>404</error-code>
    <location>/error</location>
</error-page> 
```

在我的模块配置中

```
 serve("/error").with(ErrorServlet.class); 
```

如果我直接从浏览器访问 /error 页面，它就可以工作。但是如果我自愿要求一个不存在的页面，我有一个空白页面。浏览器已收到 404 状态但没有内容。此外，我已经向 servlet 添加了日志跟踪，而且似乎它甚至没有被调用。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:40:53.877

好的，我忘记了 guice 可以作为过滤器，所以不要忘记将此行添加到您的 web.xml

```
<dispatcher>ERROR</dispatcher> 
```

# delphi - 围绕位图调整画布大小？

> ID：10503428
> 
> 赞同：5
> 
> 时间：2012-05-08T17:25:54.737
> 
> 标签：delphi, delphi-xe

**取下面的图像，我将用于以下示例：**

未更改的尺寸目前是`96 x 71`

![在此处输入图像描述](../Images/bbcbddab709f97652460e4eb6e19dbbc.png)

假设我想将画布调整为`115 x 80`- 生成的图像应该是：

![在此处输入图像描述](../Images/1e3e44235af169071d5a21e46f86b371.png)

最后，如果我将其调整为比原始画布更小的尺寸，例如`45 x 45`输出将如下所示：

![在此处输入图像描述](../Images/342be40ec020b6ae7e23f6ddbdf22fe2.png)

**这是我到目前为止所尝试的：**

```
procedure ResizeBitmapCanvas(Bitmap: TBitmap; H, W: Integer);
var
  Bmp: TBitmap;
  Source, Dest: TRect;
begin
  Bmp := TBitmap.Create;
  try
    Source := Rect(0, 0, Bitmap.Width, Bitmap.Height);
    Dest := Source;
    Dest.Offset(Bitmap.Width div 2, Bitmap.Height div 2);
    Bitmap.SetSize(W, H);
    Bmp.Assign(Bitmap);
    Bmp.Canvas.FillRect(Source);
    Bmp.Canvas.CopyRect(Dest, Bitmap.Canvas, Source);
    Bitmap.Assign(Bmp);
  finally
    Bmp.Free;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ResizeBitmapCanvas(Image1.Picture.Bitmap, 110, 110);
end; 
```

如果您在加载到 TImage 的位图上尝试上述操作，则实际位图不会居中，但是画布确实会改变大小。

我为图像设置的属性是：

```
Image1.AutoSize := True;
Image1.Center   := True;
Image1.Stretch  := False; 
```

我认为这可能是`Dest.Offset(Bitmap.Width div 2, Bitmap.Height div 2);`需要查看的线来计算正确的中心位置？

该代码已根据 David Heffernan 最近回答的问题进行了略微修改/修改。

**如何调整围绕位图的画布大小，但不拉伸位图？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:32:18.550

我认为这就是你要找的：

```
procedure ResizeBitmapCanvas(Bitmap: TBitmap; H, W: Integer; BackColor: TColor);
var
  Bmp: TBitmap;
  Source, Dest: TRect;
  Xshift, Yshift: Integer;
begin
  Xshift := (Bitmap.Width-W) div 2;
  Yshift := (Bitmap.Height-H) div 2;

  Source.Left := Max(0, Xshift);
  Source.Top := Max(0, Yshift);
  Source.Width := Min(W, Bitmap.Width);
  Source.Height := Min(H, Bitmap.Height);

  Dest.Left := Max(0, -Xshift);
  Dest.Top := Max(0, -Yshift);
  Dest.Width := Source.Width;
  Dest.Height := Source.Height;

  Bmp := TBitmap.Create;
  try
    Bmp.SetSize(W, H);
    Bmp.Canvas.Brush.Style := bsSolid;
    Bmp.Canvas.Brush.Color := BackColor;
    Bmp.Canvas.FillRect(Rect(0, 0, W, H));
    Bmp.Canvas.CopyRect(Dest, Bitmap.Canvas, Source);
    Bitmap.Assign(Bmp);
  finally
    Bmp.Free;
  end;
end; 
```

我不记得 XE 是否支持设置`Width`和`Height`用于`TRect`. 如果没有，则将代码更改为

```
Source.Right := Source.Left + Min(W, Bitmap.Width); 
```

等等。

# algorithm - 如何学习阅读带有希腊符号的公式？

> ID：10503431
> 
> 赞同：-3
> 
> 时间：2012-05-08T17:26:05.443
> 
> 标签：algorithm, math

我想可能是因为我不知道谷歌的关键字，但我找不到任何关于如何阅读你在维基百科上看到的公式的资源，例如： [Erlang Distribution](http://en.wikipedia.org/wiki/Erlang_distribution)

我搜索过数学世界和计算机科学世界。感觉就像假设我们应该凭空理解它。初学者的课程似乎很少。

到目前为止，我知道 sigma 是如何工作的。用作半衰期标志的倒置形状称为 lambda。但它到底想表达什么？？为什么函数中有分号等等。。

如果有这方面的书，我会立即购买。这可能是非常基本的东西，但我从来没有理论数学经验，甚至不知道去哪里找。

有谁知道这个主题叫什么，用谷歌搜索什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:32:18.950

带有此符号的公式通常是统计或概率符号。希腊字母（如θ、β）通常用于表示未知参数（种群参数）。

用于数学、科学和工程的希腊字母， [您可以在此处找到信息](http://en.wikipedia.org/wiki/Greek_letters_used_in_mathematics,_science,_and_engineering)

概率和统计中的符号在 [这里](http://en.wikipedia.org/wiki/Notation_in_probability_and_statistics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:28:55.723

在此处查看资源列表：[http ://en.wikipedia.org/wiki/Greek_alphabet](http://en.wikipedia.org/wiki/Greek_alphabet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:29:59.380

我会说你最好的选择仍然是在谷歌（或其他搜索引擎，不管你的船）中搜索你想要学习的特定公式。有时，一个符号可能在不同的公式中以不同的含义使用。

无论如何，这里有一个很好的资源[可以](http://www.rapidtables.com/math/symbols/Basic_Math_Symbols.htm)解释很多数学符号，而不仅仅是希腊符号。

您可能会[在这里](http://www.math.ucdavis.edu/~anne/WQ2007/mat67-Common_Math_Symbols.pdf)和[这里](http://www.emathzone.com/tutorials/math-results-and-formulas/math-symbols.html)感兴趣的一些链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T18:35:42.130

我认为 alt.: \scriptstyle \theta \;=\; 中的冒号 \frac{1}{\lambda} > 0\, scale (real) in the box in Wikipedia 只是说有一个替代定义，在其中您指定 theta 而不是 lambda，并且在该定义中所谓的 theta 是另一个定义中 lambda 的倒数。

我曾经向一位比我好得多的数学家抱怨说，我对带有一些奇怪希腊字母的公式感到困惑，因为我无法用我的笔迹辨认它们（这对于拉丁字母来说已经够糟糕了）。他说他认识的很多人都只是简单地说“让 x 变得有趣-花体字”并用明智的字母重写。我真希望我能想到这一点。

一般来说，奇怪字母表中的字母表现得非常像明智的字母，至少在你所指的那种东西上。它是作为一种类型检查完成的——通常从某种特定的外语中提取的所有字母都以某种方式相关——例如所有参数。不幸的是，这在您引用的维基百科示例中并不完全成立，其中两个希腊字母代表函数 - 一个绝对是 Gamma 函数。我怀疑另一个是[http://en.wikipedia.org/wiki/Digamma_function](http://en.wikipedia.org/wiki/Digamma_function)，但我不太确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T19:16:37.737

首先，找到一个希腊字母（大写和小写）来引用，这样你至少可以通过它的名字来调用 lambda。没有人一开始就自动知道各种希腊字符是什么，甚至希腊人也不知道。

其次，阅读实际文章，通常要么定义字符（因为 lambda 恰好在您引用的维基百科页面中），要么是标准命名法（在这种情况下，您通过查找有关该函数的基本文章来做正确的事情有问题——我一直这样做*，*所以不要难过。）或者，作为第三种选择，这是一篇蹩脚的论文。有时会发生。不过，这有点痛苦，因为您不能只对 PDF 中的 lambda 字符进行文本搜索。

（如果我错了，有人教育我......）

第三，尝试找出哪些不熟悉的符号是变量（如 lambda），哪些是运算符（如 sigma，它是助手）。有时会导致真正麻烦的是运算符。变量只是某物的名称，但运算符具有更多含义、更多规则和更多语法。哪些符号是运算符也并不总是很明显。

最后，特别是对于计算机科学，一本关于离散数学的优秀入门书（大学新生/大二水平）有望处理大多数基本符号和运算符，至少让您脚踏实地。如今，您的孩子和您的新奇互联网可能能够从 Udacity、Edx、Course RA 或可汗学院获得类似的东西。

基本上，这是一项艰巨的工作，尤其是你自己，但你已经在做大部分正确的事情。

# linux - 是否应该使用“&”指定 linux cron 作业以指示在后台运行？

> ID：10503433
> 
> 赞同：83
> 
> 时间：2012-05-08T17:26:10.943
> 
> 标签：linux, cron

在 crontab 文件中，是否应使用尾随“&”指定命令，或者该命令无论如何都会在后台运行？

我有：

```
*/20 * * * * /home/me/monitor/check.sh /home/me/monitor/check.properties  >> /home/me/monitor/check.log 2>&1 & 
```

我在不同的地方看到了这个问题的矛盾答案。有人说不需要放一个“&”，其他人说没有 & 号 cron 等待命令的输出，即使所有输出都被重定向。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-08T17:27:47.800

cron 运行的每个作业都会在后台自动运行，因此不需要`&`

也看到[这个](https://help.ubuntu.com/community/CronHowto)。

# c - 为什么将int转换为char时没有溢出警告

> ID：10503434
> 
> 赞同：1
> 
> 时间：2012-05-08T17:26:22.900
> 
> 标签：c, visual-c++

```
int i=9999;  

char c=i; 
```

不给出溢出警告，而

```
char c=9999; 
```

给，

> 警告 C4305 将截断从 int 初始化为 char

为什么转换为时没有溢出`int`警告`char`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T17:28:07.873

使用 /W4 编译时会收到[警告 C4244](http://msdn.microsoft.com/en-us/library/th7a07tz(v=vs.110).aspx)（您应该**始终**这样做）。

> 警告 C4244：“正在初始化”：从“ `int`”转换为“ `char`”，可能丢失数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T18:15:21.927

*任何*代码构造是否产生警告取决于编译器的聪明程度及其作者的选择。

```
char c=9999; 
```

`9999`是一个常数表达式。编译器可以通过分析没有附加上下文的声明来确定它将溢出。（大概 plain`char`是有符号的；如果它是无符号的，则转换是明确定义的——但编译器仍然可以选择警告它。）

```
int i=9999;  

char c=i; 
```

这具有相同的语义，但要让编译器对 的初始化发出警告，它必须在分析该声明时`c`知道`i`具有值`9999`（或至少是在 的范围之外的值）。`char`假设您改为写道：

```
int i = 9999;
i = 42;
char c = i; 
```

那么显然没有必要或适当的警告。

正如[James McNellis 的回答](https://stackoverflow.com/a/10503469/827263)所表明的那样，一个足够聪明的编译器*可以*警告任何一种情况，如果它对程序执行期间将发生的事情进行额外的分析。对于某些编译器，它有助于启用优化，因为优化代码（不破坏代码）所需的分析也可以揭示这种潜在的运行时错误。

我会注意到这是对您提出的问题的回答：为什么没有警告。您接受的答案是*隐含*的问题：“我*想要*在这里发出警告；我该如何启用它？”。我没有抱怨，只是观察。

# seo - 如果我在 SEO 的 # 标记之后有一些文本，这有什么不同吗？

> ID：10503436
> 
> 赞同：0
> 
> 时间：2012-05-08T17:26:35.880
> 
> 标签：seo

我正在制作这样的网址`/project/show/1`。如您所见`1`，是ID。

如果我将在这样的哈希标签之后添加项目名称，`/project/show/1#New Project`或者它不会对 seo 产生任何影响，会有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:01:28.220

搜索引擎蜘蛛通常[会忽略散列片段](http://googlewebmastercentral.blogspot.com/2007/11/spiders-view-of-web-20.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:06:38.493

请记住，搜索引擎蜘蛛会考虑 url 的复杂性——越简单越好，因为它应该是用户友好的。这就是为什么例如 MVC 3 (.NET) 默认情况下对 SEO 友好（或者至少与经典的 ASP.NET 相比，它更容易实现）。

# asp.net-mvc-3 - MVC3 中的富文本区域

> ID：10503438
> 
> 赞同：4
> 
> 时间：2012-05-08T17:26:39.203
> 
> 标签：asp.net-mvc-3, richtextbox

我们在 MVC3 中是否有任何 Rich Textbox/Textarea 选项，或者我们是否需要使用 jquery RichTextbox 插件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:31:05.780

ASP.NET MVC 与 Rich TextArea 无关。您将需要 JavaScript/jQuery。我会推荐使用[jHtmlArea](http://jhtmlarea.codeplex.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T17:29:55.780

你需要使用插件。ASP.NET MVC 是一个服务器端框架，允许您吐出 HTML。在 HTML 中你有`<textarea>`标签。这就是 ASP.NET MVC 框架角色结束的地方。如果你想用这个 textarea 标签做更多的事情，你需要客户端脚本 => 所以继续选择你最喜欢的 WYSIWYG 编辑器。他们有很多。

# jquery - 滑块动画运行不流畅 FF12

> ID：10503439
> 
> 赞同：0
> 
> 时间：2012-05-08T17:26:41.183
> 
> 标签：jquery, animation

在最新的 chrome 中，我看到动画运行流畅，但在 Firefox 中，动画看起来非常糟糕。

这是我的源代码，可能是某些原因导致它加载较慢：

```
jQuery.fn.Slider = function(Options) {
    var Settings = {
        Width: 900,
        Height: 400,
        Speed: 400
    }
    var SliderSettings = $.extend(Settings, Options);
    var View = $('.slider_view');
    var Images = View.children();
    var CurrentImage;
    var LeftButton;
    var RightButton;
    var Animation = false;

    var Controls = $(this).append('<div class="controls"></div>');

    var NumOfImages = Images.size();

    if (NumOfImages > 1) {
        Controls.append('<div class="slider_leftBtn"></div><div class="slider_rightBtn"></div>');
        LeftButton = $('.slider_leftBtn');
        RightButton = $('.slider_rightBtn');
        LeftButton.hide();
        CurrentImage = 0;
    }

    $(RightButton).click(function() {
        if (!Animation) {
            Animation = true;
            View.animate({ 'left': (parseInt(View.css('left')) - SliderSettings.Width) + 'px' }, SliderSettings.Speed, function() { Animation = false; });
            LeftButton.fadeIn();
            if (++CurrentImage + 1 == NumOfImages)
                RightButton.fadeOut();
        }
    });

    $(LeftButton).click(function() {
        if (!Animation) {
            Animation = true;
            View.animate({ 'left': (parseInt(View.css('left')) + SliderSettings.Width) + 'px' }, SliderSettings.Speed, function() { Animation = false; });
            RightButton.fadeIn();
            if (--CurrentImage == 0)
                LeftButton.fadeOut();
        }
    });
}; 
```

我的代码中是否有任何动作可以导致 FF 以这种方式制作动画？

这是我写的一个小滑块，没什么特别的。

**更新：**

下一个设置会导致 FF 运行缓慢：

```
box-shadow: 0px 0px 60px 20px #000; 
```

我怎样才能保持这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:32:16.563

您可以尝试使用 -moz-transform:translate(x,y) 它是硬件加速的。

# sql-server - 无法重新部署应用程序 - XAResource.start

> ID：10503441
> 
> 赞同：0
> 
> 时间：2012-05-08T17:26:57.793
> 
> 标签：sql-server, jakarta-ee, glassfish-3, xa

我遇到了一个奇怪的问题，它减缓了我的应用程序的开发。每次我尝试在 glassfish 3.1.1 上重新部署 Web 应用程序时，都会收到以下异常：

```
[#|2012-05-08T14:07:36.169-0300|SEVERE|glassfish3.1.1|javax.enterprise.resource.resourceadapter.com.sun.enterprise.resource|_ThreadID=23;_ThreadName=Thread-2;|RAR5031:System Exception
java.lang.NullPointerException
at com.microsoft.sqlserver.jdbc.TDSWriter.writeBytes(IOBuffer.java:2126)
at com.microsoft.sqlserver.jdbc.TDSWriter.writeBytes(IOBuffer.java:2116)
at com.microsoft.sqlserver.jdbc.TDSWriter.preparePacket(IOBuffer.java:1934)
at com.microsoft.sqlserver.jdbc.TDSWriter.startMessage(IOBuffer.java:1987)
at com.microsoft.sqlserver.jdbc.TDSCommand.startRequest(IOBuffer.java:4943)
at com.microsoft.sqlserver.jdbc.SQLServerConnection$1ConnectionCommand.doExecute(SQLServerConnection.java:1440)
at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectionCommand(SQLServerConnection.java:1446)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.setAutoCommit(SQLServerConnection.java:1594)
at com.sun.gjc.spi.LocalTransactionImpl.begin(LocalTransactionImpl.java:88)
at com.sun.enterprise.resource.ConnectorXAResource.getResourceHandle(ConnectorXAResource.java:250)
at com.sun.enterprise.resource.ConnectorXAResource.start(ConnectorXAResource.java:136)
at com.sun.enterprise.transaction.JavaEETransactionManagerSimplified.enlistResource(JavaEETransactionManagerSimplified.java:375)
at com.sun.enterprise.resource.rm.SystemResourceManagerImpl.enlistResource(SystemResourceManagerImpl.java:103)
at com.sun.enterprise.resource.pool.PoolManagerImpl.getResource(PoolManagerImpl.java:208)
at com.sun.enterprise.connectors.ConnectionManagerImpl.getResource(ConnectionManagerImpl.java:338)
at com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:301)
at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:190)
at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:165)
at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:160)
at com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:113)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:126)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:94)
at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
at org.eclipse.persistence.internal.databaseaccess.DatasourceAccessor.connectInternal(DatasourceAccessor.java:330)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.connectInternal(DatabaseAccessor.java:291)
at org.eclipse.persistence.internal.databaseaccess.DatasourceAccessor.connect(DatasourceAccessor.java:418)
at org.eclipse.persistence.sessions.server.ConnectionPool.buildConnection(ConnectionPool.java:167)
at org.eclipse.persistence.sessions.server.ExternalConnectionPool.startUp(ExternalConnectionPool.java:130)
at org.eclipse.persistence.sessions.server.ServerSession.connect(ServerSession.java:489)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:627)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:233)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:394)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:185)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:242)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:230)
at com.sun.enterprise.container.common.impl.EntityManagerFactoryWrapper.createEntityManager(EntityManagerFactoryWrapper.java:110)
at com.hrgi.persistencia.dao.BaseDao.getEntityManager(BaseDao.java:20)
at com.hrgi.persistencia.venda.dao.VisaoUltimoNumeroPrevendaDao.recuperarTodos(VisaoUltimoNumeroPrevendaDao.java:25)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy194.recuperarTodos(Unknown Source)
at com.hrgi.persistencia.venda.geradores.GeradorCodigoPreVenda.recuperarUltimoCodigo(GeradorCodigoPreVenda.java:21)
at com.hrgi.persistencia.venda.geradores.GeradorCodigoPreVenda.<init>(GeradorCodigoPreVenda.java:17)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:108)
at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1002)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:906)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:484)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2000)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1651)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:294)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:462)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:382)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1064)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1244)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:459)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:209)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:238)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662)|#]
[#|2012-05-08T14:07:36.173-0300|SEVERE|glassfish3.1.1|javax.enterprise.resource.resourceadapter.com.sun.enterprise.resource|_ThreadID=23;_ThreadName=Thread-2;|RAR5031:System Exception
com.sun.appserv.connectors.internal.api.PoolingException: java.lang.NullPointerException
at com.sun.enterprise.resource.ConnectorXAResource.getResourceHandle(ConnectorXAResource.java:255)
at com.sun.enterprise.resource.ConnectorXAResource.start(ConnectorXAResource.java:136)
at com.sun.enterprise.transaction.JavaEETransactionManagerSimplified.enlistResource(JavaEETransactionManagerSimplified.java:375)
at com.sun.enterprise.resource.rm.SystemResourceManagerImpl.enlistResource(SystemResourceManagerImpl.java:103)
at com.sun.enterprise.resource.pool.PoolManagerImpl.getResource(PoolManagerImpl.java:208)
at com.sun.enterprise.connectors.ConnectionManagerImpl.getResource(ConnectionManagerImpl.java:338)
at com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:301)
at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:190)
at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:165)
at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:160)
at com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:113)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:126)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:94)
at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
at org.eclipse.persistence.internal.databaseaccess.DatasourceAccessor.connectInternal(DatasourceAccessor.java:330)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.connectInternal(DatabaseAccessor.java:291)
at org.eclipse.persistence.internal.databaseaccess.DatasourceAccessor.connect(DatasourceAccessor.java:418)
at org.eclipse.persistence.sessions.server.ConnectionPool.buildConnection(ConnectionPool.java:167)
at org.eclipse.persistence.sessions.server.ExternalConnectionPool.startUp(ExternalConnectionPool.java:130)
at org.eclipse.persistence.sessions.server.ServerSession.connect(ServerSession.java:489)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:627)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:233)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:394)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:185)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:242)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:230)
at com.sun.enterprise.container.common.impl.EntityManagerFactoryWrapper.createEntityManager(EntityManagerFactoryWrapper.java:110)
at com.hrgi.persistencia.dao.BaseDao.getEntityManager(BaseDao.java:20)
at com.hrgi.persistencia.venda.dao.VisaoUltimoNumeroPrevendaDao.recuperarTodos(VisaoUltimoNumeroPrevendaDao.java:25)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy194.recuperarTodos(Unknown Source)
at com.hrgi.persistencia.venda.geradores.GeradorCodigoPreVenda.recuperarUltimoCodigo(GeradorCodigoPreVenda.java:21)
at com.hrgi.persistencia.venda.geradores.GeradorCodigoPreVenda.<init>(GeradorCodigoPreVenda.java:17)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:108)
at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1002)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:906)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:484)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2000)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1651)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:294)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:462)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:382)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1064)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1244)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:459)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:209)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:238)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
at com.microsoft.sqlserver.jdbc.TDSWriter.writeBytes(IOBuffer.java:2126)
at com.microsoft.sqlserver.jdbc.TDSWriter.writeBytes(IOBuffer.java:2116)
at com.microsoft.sqlserver.jdbc.TDSWriter.preparePacket(IOBuffer.java:1934)
at com.microsoft.sqlserver.jdbc.TDSWriter.startMessage(IOBuffer.java:1987)
at com.microsoft.sqlserver.jdbc.TDSCommand.startRequest(IOBuffer.java:4943)
at com.microsoft.sqlserver.jdbc.SQLServerConnection$1ConnectionCommand.doExecute(SQLServerConnection.java:1440)
at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectionCommand(SQLServerConnection.java:1446)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.setAutoCommit(SQLServerConnection.java:1594)
at com.sun.gjc.spi.LocalTransactionImpl.begin(LocalTransactionImpl.java:88)
at com.sun.enterprise.resource.ConnectorXAResource.getResourceHandle(ConnectorXAResource.java:250)
... 105 more|#]
.
.
.
[#|2012-05-08T14:07:38.078-0300|SEVERE|glassfish3.1.1|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=23;_ThreadName=Thread-2;|Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'geradorCodigoPreVenda' defined in ServletContext resource [/WEB-INF/spring/modulo_venda/appContext-preVenda.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.hrgi.persistencia.venda.geradores.GeradorCodigoPreVenda]: Constructor threw exception; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: Error in allocating a connection. Cause: java.lang.RuntimeException: Got exception during XAResource.start:Error Code: 0|#] 
```

看了这个日志，我才明白这是数据库连接问题。有人可以帮助我了解发生了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:33:30.250

通过将 persistence.xml 从 JTA 更改为 RESOURCE_LOCAL 解决

# grep - hexdump 输出中从 A 到 B 的“Grep-ing”

> ID：10503443
> 
> 赞同：0
> 
> 时间：2012-05-08T17:27:03.167
> 
> 标签：grep, hexdump

情况如下：我必须在字符串 A 和字符串 B 之间的字节的输出中找到。`hexdump`hexdump 的结构类似于：

```
-random bytes
-A + useful bytes + B
-random bytes
-A + useful bytes + B
-random bytes 
```

现在，问题是： - 是否可以 grep “从 A 到 B”？我在手册页或互联网上没有看到类似的内容。我知道我可以手动完成，但我需要编写脚本。- 是否可以在没有行号的情况下显示 hexdump 输出？这似乎很合理，但我还没有找到方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:59:31.413

您可以使用类似 Perl 的[环视断言](http://www.regular-expressions.info/lookaround.html)来匹配 A 和 B 之间的所有内容，不包括 A 和 B：

```
$ echo 'TEST test A foo bar B test' | grep -oP '(?<=A).*(?=B)'
 foo bar 
```

但是，考虑到[迈克尔的回答](https://stackoverflow.com/a/10503751/1258041)，您必须将`hexdump`输出转换为单个字符串才能使用`grep`. 您可以在途中去掉“行号”：

```
hexdump filename | sed -r 's/\S{5,}//g' | tr '\n' ' ' 
```

或更好

```
hexdump filename | cut -d ' ' -f 2- | tr '\n' ' ' 
```

现在一切都在一条线上，所以`grep`必须是懒惰的，而不是贪婪的：

```
$ echo 'TEST test A foo bar B test A bar foo B test' | grep -oP '(?<=A).*?(?=B)'
 foo bar 
 bar foo 
```

但迈克尔有一点，也许你应该使用更高级的东西，至少如果你需要不止一次这样做。

PS如果您可以在比赛中包括A和B，那就做

```
$ echo 'TEST test A foo bar B test A bar foo B test' | grep -oP 'A.*?B'
A foo bar B
A bar foo B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:48:28.820

`grep`该*程序*一次只能在一行上运行；您将无法让它在十六进制转储上智能地工作。

我的建议：使用 perl 或 ruby​​ 或您最喜欢的脚本语言中的正则表达式功能，对字符串的原始二进制数据进行 grep。红宝石中的这个例子：

```
ARGF.read.force_encoding("BINARY").scan(/STR1(.*?)STR2/); 
```

这将生成一个数组，其中包含 STR1 和 STR2 出现之间的所有二进制字符串。从那里你可以运行每一个`hexdump(1)`。

# magento - Magento - 如何将分层导航添加到高级搜索？

> ID：10503447
> 
> 赞同：8
> 
> 时间：2012-05-08T17:27:07.907
> 
> 标签：magento, magento-1.7

如何将分层导航添加到高级搜索结果页面？

Magento 1.7 版。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-02T02:17:45.017

下面的补丁将在高级搜索结果中显示分层导航，并且可以与分层导航一起正常工作。分层导航和搜索结果基于两个单独的产品集合显示，一个由**catalogsearch/Model/Layer.php**创建，另一个由**catalogsearch/Model/Advanced.php**创建。所以我们需要重写这两个模型的一些功能，以使分层导航在高级搜索中工作。

1- 在您的 local.xml 中**catalogsearch_advanced_result**标签下添加。

```
 <reference name="left">
      <block type="catalogsearch/layer" name="catalogsearch.leftnav" after="currency" template="catalog/layer/view.phtml"/>
 </reference> 
```

**覆盖 catalogsearch/model/Layer.php 的 prepareProductCollection**函数

```
public function prepareProductCollection($collection){

    if(Mage::helper('catalogsearch')->getQuery()->getQueryText())//for normal search we get the value from query string q=searchtext
        return parent::prepareProductCollection($collection);
    else{

        $collection->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes());
        /**
         * make sure you cross check the $_REQUEST with $attributes
         */
        $attributes = Mage::getSingleton('catalog/product')->getAttributes();

        Mage::log(print_r($_REQUEST,1));
        foreach($attributes as $attribute){
            $attribute_code = $attribute->getAttributeCode();
            //Mage::log("--->>". $attribute_code);
            if($attribute_code == "price")//since i am not using price attribute
                continue;

            if (empty($_REQUEST[$attribute_code])){
                //Mage::log("nothing found--> $attribute_code");
                continue;
            }
            if(!empty($_REQUEST[$attribute_code]) && is_array($_REQUEST[$attribute_code]))
                $collection->addAttributeToFilter($attribute_code, array('in' => $_REQUEST[$attribute_code]));
            else
            if(!empty($_REQUEST[$attribute_code]))
                $collection->addAttributeToFilter($attribute_code, array('like' => "%" . $_REQUEST[$attribute_code] . "%"));
        }

        $collection->setStore(Mage::app()->getStore())
        ->addMinimalPrice()
        ->addFinalPrice()
        ->addTaxPercents()
        ->addStoreFilter()
        ->addUrlRewrite();

        //Mage::log($collection->getSelect()->__toString());

        Mage::getSingleton('catalogsearch/advanced')->prepareProductCollection($collection);    
        Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($collection);
        Mage::getSingleton('catalog/product_visibility')->addVisibleInSearchFilterToCollection($collection);
    }

    return $this;
} 
```

**覆盖catalogsearch/model/Advanced.php的getProductCollection、getSearchCriterias**函数

```
public function getProductCollection(){

    if (is_null($this->_productCollection)) {
        $this->_productCollection = Mage::getResourceModel('catalogsearch/advanced_collection')
            ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
            ->addMinimalPrice()
            ->addStoreFilter();
            Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($this->_productCollection);
            Mage::getSingleton('catalog/product_visibility')->addVisibleInSearchFilterToCollection($this->_productCollection);

        if(isset($_GET['cat']) && is_numeric($_GET['cat'])) 
            $this->_productCollection->addCategoryFilter(Mage::getModel('catalog/category')->load($_GET['cat']),true);
    }
    return $this->_productCollection;
}

public function getSearchCriterias()
{
    $search = parent::getSearchCriterias();
    /* display category filtering criteria */
    if(isset($_GET['cat']) && is_numeric($_GET['cat'])) {
        $category = Mage::getModel('catalog/category')->load($_GET['cat']);
        $search[] = array('name'=>'Category','value'=>$category->getName());
    }
    return $search;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T11:41:41.813

对此没有快速的解决方案。标准搜索和高级搜索使用两种不同的搜索方法。

如果您比较其中的布局，`catalogsearch.xml`您会发现`catalogsearch_advanced_result`该块`catalogsearch/layer`不包括在内。如果您从`catalogsearch_result_index`根模板复制块定义并将其更改为`3columns.phtml`各种错误，则会引发各种错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:23:45.890

在我的 1.6.2 中，分层导航在将 0（零）设置为
系统 -> 配置 -> 目录 -> 目录搜索 -> 如果搜索结果小于时应用分层导航后出现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-06T00:52:42.063

`catalogsearch.xml`只需在搜索结果**左侧**区域提前添加以下行就可以帮助我在我的 EE 网站上看到它，但是我没有在 CE 版本中检查它。

```
<block type="catalogsearch/layer" name="catalogsearch.leftnav" before="-" template="catalog/layer/view.phtml"/> 
```

所以我的整个左侧区域在 xml 文件的高级搜索区域中看起来像这样：

```
<reference name="left">
       <block type="catalog/navigation" name="hello.leftnav" as="hello.leftnav" template="catalog/navigation/hello_left_nav-search.phtml" />
        <block type="catalog/layer_view" name="catalog.leftnav" before="-" template="catalog/layer/view.phtml"/>
    </reference> 
```

希望它可以帮助别人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T01:03:02.910

这个[链接](http://www.magentocommerce.com/knowledge-base/entry/layered-navigation)到 Magento 网站应该会有所帮助。您需要从目录创建属性。然后查看前端属性下的设置（目录>属性）。

# sql - 如何阻止删除查询中的坏行

> ID：10503452
> 
> 赞同：0
> 
> 时间：2012-05-08T17:27:21.217
> 
> 标签：sql, tsql, stored-procedures

我有一个查询，将一年前的行从一个表移动到一个相同的“存档”表。

有时，无效日期被输入到`dateprocessed`列中（用于评估该行是否超过一年），并且查询出错。我想基本上“筛选”坏行——即`where not isdate(dateprocessed)`不等于 1——以便查询不会尝试归档它们。

我对如何做到这一点有一些想法，但希望以最简单的方式做到这一点。如果我在存储过程中将好的数据选择到临时表中，然后将其与实时表内部连接，然后从实时输出运行删除以存档 - 它将从基础实时表中删除还是从新连接表中删除？

有一个更好的方法吗？谢谢您的帮助。我是一个玩 DBA 的 .NET 程序员，但我真的很想正确地做到这一点。

`dateprocessed`以下是在某些列值无效时出错的查询：

```
delete from live 
output deleted.* into archive 
where isdate(dateprocessed) = 1 
  and cast (dateprocessed as datetime) < dateadd(year, -1, getdate()) 
  and not exists (select * from archive where live.id = archive.id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:58:49.480

如果您是 .NET 人员，您可以将所有数据记录下来并执行 DateTime.TryParse。更好的是，只需执行一次即可填充真实的 DateTime 列。不解析的日期可以分配固定日期或空值。还有一些日期字符串，.NET 将解析 SQL 不会（例如 2010 年 11 月）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:24:18.623

最简单的做法是：

*   在临时表中选择正确的记录
*   您需要复制到临时表中的字段之一应该是唯一标识符，例如“ID”列
*   在临时表中做任何额外的处理
*   从临时表存档到存档表
*   使用“ID”列从带有临时表连接的实时表中删除。这将确保不犯任何错误。

# php - php domdocument xml在<>&中出现问题

> ID：10503454
> 
> 赞同：1
> 
> 时间：2012-05-08T17:27:23.457
> 
> 标签：php, xml

我正在尝试解析这个 XML：

```
<data>
<item field="abcdef '<>&" row="another text" />
</data> 
```

我应该得到getAttribute('field') 的**abcdef '<>&和 getAttribute('row') 的****另一个文本**。但如果我的数据包含 <>& 等 XML 解析不正确。我怎样才能正确解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:32:43.437

它是格式错误的 XML。您需要编码`'<>&`为`&apos;&lt;&gt;&amp;`. 这就是格式良好的 XML 的样子：

```
<data>
<item field="abcdef &apos;&lt;&gt;&amp;" row="another text" />
</data> 
```

您需要先整理 XML，然后才能使用 XML 解析器对其进行解析。

# c - 任何用 C 编写的 SPICE 库/API？

> ID：10503455
> 
> 赞同：2
> 
> 时间：2012-05-08T17:27:23.923
> 
> 标签：c, api

我正在寻找一些用 C 语言编写的 SPICE（电子电路模拟器）的实现，可以用作库。

我找到了一些用于 Python和[Java](https://stackoverflow.com/questions/5438757/any-good-java-spice-library-api)[的 SPICE 克隆](http://www.thedigitalmachine.net/eispice.html)，但不是 C 的。

到目前为止，我正在使用[ngspice](http://ngspice.sourceforge.net/)。它是 SPICE3 的非常好的克隆，它是用 C 编写的，它有[非常好的文档](http://ngspice.sourceforge.net/docs/ngspice-manual.pdf)。是否可以将其用作库（因此我可以将其编译为共享库并在我的 C 项目中使用）？我从源代码编译了 ngspice，但结果是 CLI 接口。有什么选项可以将其编译到共享库中吗？

但我对任何其他 SPICE 克隆都很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-18T07:12:37.627

ngspice now（2013 年中）现在可以选择构建为共享库或 dll 以链接到您的应用程序 - 它记录在 2013 年 6 月手册的第 19 章（不是 ngspice-25 版本中的手册）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T19:45:30.087

“Unix 方式”将按原样使用 CLI 程序并使用“系统”标准库调用来执行二进制文件（或 fork/exec）。比您尝试提出的工作要少得多，并且您将要调用外部应用程序的数量，进行系统调用的开销可以忽略不计。

# android - Android 自定义 ListView - 如何防止 ListView 适配器在滚动时自动刷新（更新）

> ID：10503459
> 
> 赞同：3
> 
> 时间：2012-05-08T17:27:36.393
> 
> 标签：android, listview

我想在 LIstView 滚动时停止 listview 自动更新（刷新）的事情。

或者

如何在滚动时将新适配器分配给相同的 ListView？

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:51:22.303

尝试将 number 设置为 Tag view.setTag(number) 并在 OnItemClickListener 中获取它：

```
listView.setOnItemClickListener(new OnItemClickListener() {         
    @Override
    public void onItemClick(AdapterView<?> arg0, View view,
                            int position, long arg3) {
        if (position > 0 && position < mProducts.alternatives.size() + 1){
        int number = (Integer)view.getTag();
        }
    }
}); 
```

# sql - 在 Interbase 子查询中正确使用别名

> ID：10503461
> 
> 赞同：0
> 
> 时间：2012-05-08T17:27:41.260
> 
> 标签：sql, alias, interbase

我对新创建的别名 ABONO 和 CARGO 有疑问。ALIASES（用于结果的列名）和 SQL 查询工作正常，直到我尝试计算“ABONO-CARGO AS AJUSTE”=> Interbase 给出它不知道“ABONO”列的错误。

动态 SQL 错误 SQL 错误代码 = -206 列未知 ABONO

怎么了？

```
SELECT M."MOV_CUENTA",
       (SELECT SUM(MM."MOV_MONTO") 
          FROM "movimientos" MM
         WHERE MM."MOV_TIPOMOV" = 'A' AND MM."MOV_CUENTA" = CS."ID_CUENTAMUN"
         GROUP BY MM."MOV_CUENTA"
       ) AS ABONO,
       (SELECT SUM(XM."MOV_MONTO")
          FROM "movimientos" XM
         WHERE XM."MOV_TIPOMOV" = 'C' AND XM."MOV_CUENTA" = CS."ID_CUENTAMUN"
         GROUP BY XM."MOV_CUENTA"
       ) AS CARGO,
       ABONO-CARGO AS AJUSTE
  FROM "cuentasSaldo" CS
 INNER JOIN "movimientos" M ON (CS."ID_CUENTAMUN" = M."MOV_CUENTA")
 INNER JOIN "ajustes" AA ON (M."ID_AJUSTE" = AA."ID_AJUSTE")
 INNER JOIN "documentos" DD ON (AA."ID_DOCUMENTO" = DD."ID_DOCUMENTO")
 WHERE M."ID_AJUSTE" IN
           (SELECT A."ID_AJUSTE"
              FROM "ajustes" A
             WHERE A."ID_DOCUMENTO" IN
                     (SELECT D."ID_DOCUMENTO"
                        FROM "documentos" D
                       WHERE D."ID_EMPRESA" = 1 AND D."DOC_EDITABLE" = 1
                     )
           )
ORDER BY M."ID_AJUSTE", M."MOV_CUENTA" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:42:24.803

简而言之，在许多 SQL DBMS 中，选择列表中给出的列别名不能在查询的其他地方使用，甚至在选择列表的其他部分也不能使用。

您要么必须在报告工具中进行计算，要么重复两个查询以获取值（即使使用复制粘贴，写起来也很痛苦——这只是拥有一个好的报告工具的另一个理由）。

```
SELECT M."MOV_CUENTA",
       (SELECT SUM(MM."MOV_MONTO") 
          FROM "movimientos" MM
         WHERE MM."MOV_TIPOMOV" = 'A' AND MM."MOV_CUENTA" = CS."ID_CUENTAMUN"
         GROUP BY MM."MOV_CUENTA"
       ) AS ABONO,
       (SELECT SUM(XM."MOV_MONTO")
          FROM "movimientos" XM
         WHERE XM."MOV_TIPOMOV" = 'C' AND XM."MOV_CUENTA" = CS."ID_CUENTAMUN"
         GROUP BY XM."MOV_CUENTA"
       ) AS CARGO,
       ((SELECT SUM(MM."MOV_MONTO") 
          FROM "movimientos" MM
         WHERE MM."MOV_TIPOMOV" = 'A' AND MM."MOV_CUENTA" = CS."ID_CUENTAMUN"
         GROUP BY MM."MOV_CUENTA"
       ) -
       (SELECT SUM(XM."MOV_MONTO")
          FROM "movimientos" XM
         WHERE XM."MOV_TIPOMOV" = 'C' AND XM."MOV_CUENTA" = CS."ID_CUENTAMUN"
         GROUP BY XM."MOV_CUENTA"
       )) AS AJUSTE
  FROM "cuentasSaldo" CS
 INNER JOIN "movimientos" M ON (CS."ID_CUENTAMUN" = M."MOV_CUENTA")
 INNER JOIN "ajustes" AA ON (M."ID_AJUSTE" = AA."ID_AJUSTE")
 INNER JOIN "documentos" DD ON (AA."ID_DOCUMENTO" = DD."ID_DOCUMENTO")
 WHERE M."ID_AJUSTE" IN
           (SELECT A."ID_AJUSTE"
              FROM "ajustes" A
             WHERE A."ID_DOCUMENTO" IN
                     (SELECT D."ID_DOCUMENTO"
                        FROM "documentos" D
                       WHERE D."ID_EMPRESA" = 1 AND D."DOC_EDITABLE" = 1
                     )
           )
ORDER BY M."ID_AJUSTE", M."MOV_CUENTA" 
```

`-`在这些表达中很容易失去那种孤独。

另一种方法是：

```
SELECT "MOV_CUENTA", ABONO, CARGO, (ABONO - CARGO) AS AJUSTE
  FROM (SELECT M."ID_AJUSTE",
               M."MOV_CUENTA",
               (SELECT SUM(MM."MOV_MONTO") 
                  FROM "movimientos" MM
                 WHERE MM."MOV_TIPOMOV" = 'A' AND MM."MOV_CUENTA" = CS."ID_CUENTAMUN"
                 GROUP BY MM."MOV_CUENTA"
               ) AS ABONO,
               (SELECT SUM(XM."MOV_MONTO")
                  FROM "movimientos" XM
                 WHERE XM."MOV_TIPOMOV" = 'C' AND XM."MOV_CUENTA" = CS."ID_CUENTAMUN"
                 GROUP BY XM."MOV_CUENTA"
               ) AS CARGO
          FROM "cuentasSaldo" CS
         INNER JOIN "movimientos" M ON (CS."ID_CUENTAMUN" = M."MOV_CUENTA")
         INNER JOIN "ajustes" AA ON (M."ID_AJUSTE" = AA."ID_AJUSTE")
         INNER JOIN "documentos" DD ON (AA."ID_DOCUMENTO" = DD."ID_DOCUMENTO")
         WHERE M."ID_AJUSTE" IN
                   (SELECT A."ID_AJUSTE"
                      FROM "ajustes" A
                     WHERE A."ID_DOCUMENTO" IN
                             (SELECT D."ID_DOCUMENTO"
                                FROM "documentos" D
                               WHERE D."ID_EMPRESA" = 1 AND D."DOC_EDITABLE" = 1
                             )
                   )
       ) AS X
ORDER BY "ID_AJUSTE", "MOV_CUENTA" 
```

我认为您也应该选择 ID_AJUSTE，但这是您的决定。我也不确定您是否真的需要所有这些分隔标识符，但我基本上没有触及它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:42:28.123

您应该在表“cuentasSaldo”（CS）中有一个字段 ABONO，并且您有一个别名为 ABONO 的子查询。所以你有两个同名的“对象”。我建议您尝试以以下格式调用字段：query.field。第 6 行中的示例：而不是：`ABONO-CARGO AS AJUSTE` 使用：`CS.ABONO-CARGO AS AJUSTE`。

# asp.net - ContentPlaceHolderID 添加到我的所有字段 ID。如何控制它们？

> ID：10503466
> 
> 赞同：1
> 
> 时间：2012-05-08T17:27:54.770
> 
> 标签：asp.net, .net

我有使用重复代码的 aspx 页面。所以我把它们放在一个主文件中，并在所有其他文件中引用它。我在所有其他包含母版页的页面中都使用过，

```
<asp:Content ID="Step1Content" ContentPlaceHolderID="MainContent" Runat="Server"> 
```

我的问题现在是所有字段 id 都有 ContentPlaceHolderID_fieldName 的后缀，因此我的 javascript 不起作用。

```
<input id='chkRaces_1' type='checkbox' runat='server' onclick="enableShow50();" /><label for='chkRaces_1'>American Indian or Alaska Native</label><br /> 
```

当我调试时，它看起来像，

```
<input id="MainContent_chkRaces_1" type="checkbox" onclick="enableShow50(<%# Eval(chkRaces_1.ClientID) %>);" name="ctl00$MainContent$chkRaces_1"> 
```

而我使用 id='chkRaces_1' 引用的 Javascript 失败了。我想用标签 n 替换所有输入，但我得到错误。“type HtmlInputCheckBox”与“ListItem”不兼容。所以我也必须改变我不想改变的课程。

我还能做些什么来以最小的改变 aspx 来达到同样的效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:34:23.440

您可以使用[ClientIDMode](http://msdn.microsoft.com/en-us/library/dd410598.aspx)，但请记住，它仅在 .NET 4.0 及更高版本中可用。

```
<asp:Label ID="SelectedSport" runat="server" ClientIDMode="Static">
</asp:Label> 
```

或者在 JavaScript 中：

```
var userLabel = document.getElementById('<%=SelectedSport.ClientID%>'); 
```

如果您尝试在 javascript 中访问控件，那么使用 .ClientID 可能是您最好的选择，因为它不需要更改 aspx 页面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:33:57.633

要不将容器的 ID 附加到控件的 ID，请设置控件的 ClientIDMode="Static" 属性。

```
<input id='chkRaces_1' type='checkbox' ClientIDMode="Static" runat='server' onclick="enableShow50();" />< 
```

# .net - 覆盖使用游标的存储过程返回的行数

> ID：10503467
> 
> 赞同：1
> 
> 时间：2012-05-08T17:27:57.160
> 
> 标签：.net, ado.net, sql-server-2012, rowcount, nocount

我有一个简化为以下代码的存储过程：

```
SET NOCOUNT ON

DECLARE @count INT
DECLARE @temp TABLE
INSERT INTO @temp
SELECT @count = count(*) FROM @temp

DECLARE [cursor] FOR SELECT id FROM @temp
OPEN [cursor] FETCH NEXT FROM [cursor] INTO @id WHILE @@fetch_status = 0
BEGIN
    exec anoterStoredProc @id
FETCH NEXT FROM [cursor] INTO @id
END
CLOSE [cursor]
DEALLOCATE [cursor]

SET NOCOUNT OFF

RETURN @count 
```

但`ExecuteNonQuery()`仍然返回 -1！

我可以使用`select @count`但`ExecuteScalar()`想了解为什么我的代码不起作用。

似乎`NOCOUNT OFF`不会重置服务器行为，并且`NOCOUNT ON`仍然在原地。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:35:19.197

首先，不要乱用 SET ROWCOUNT - 这会做一些非常危险的事情（如果使用不当）。

返回值实际上是通过添加一个带有 ReturnValue 的“方向”的参数来处理的。或者，选择值，并使用 ExecuteScalar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:35:59.473

`SET ROWCOUNT xx`用于限制所有后续查询返回的行数。它不会用于返回标量值。

`RETURN xx`用于向调用过程的进程返回一个整数值。一般这是用来表示成功（零）或失败（不是零，大概是错误号）。对于特定值，您可能会发现输出参数更方便。

[添加]`SET NOCOUNT`是一个斜命令。关闭时，为每个查询运行（选择、更新、插入、删除）返回信息；打开时，它不是。（因此，将其设置在您所做的地方不会有任何效果。）问题是，此信息不是返回值、参数值或数据集，而是其他东西（它是一个数字吗？一个字符串？我我不确定）。从我听说过的所有事情来看，使用它很痛苦，这就是为什么我总是用`SET NOCOUNT on`.

在这两种情况下，我都没有看到 @count 是在哪里定义或赋值的。

# c - cannot find dll vs2010 c

> ID：10503470
> 
> 赞同：0
> 
> 时间：2012-05-08T17:28:25.723
> 
> 标签：c, visual-studio-2010, dll

I have a managed exe calling a managed dll, both written in c, and compiled using vs2010 c++.

When I run the program I get error that program can't start because the dll is missing from my computer. In the linker, under Linker->Input->Additional dependencies I have added the folder containing the dll lib. Also, in the Linker->General section I have listed the folder under Additional include libraries.

I am clueless...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:31:31.797

The problem is that the dll was not in the same dir as where the .exe was being executed. However, since I didn't want to manually copy the dll each time, and since it was being used by other .exes, the better solution was to add a post-build event.

One more important note: Afraid of getting nicked with another -1 for asking a bad question, I spent a couple of hours coming up with the magic potion/incantations needed to do such a post-build copy. Here it is. Note the use of the macros, the /Y, and especially the quotes around the whole mess of each pathname.

```
xcopy /Y "$(SolutionDir)x64\Release\mcDll.dll" "$(SolutionDir)stream\x64\Release" 
```

# php - POST 变量未正确传递给操作

> ID：10503471
> 
> 赞同：1
> 
> 时间：2012-05-08T17:28:34.373
> 
> 标签：php, html, forms

我正在处理一个包含多个`<form>`标签的页面。有问题的表格之一看起来像：

```
<form name="frm6910" action="ind_profile.php?ind_id=" method="POST">
  <input type="hidden" name="action" value="update">
  <input type="hidden" name="auto_change" value="1"> 
```

但是，当我转到`var_dump()` POST 中的变量时`ind_profile.php`，我的数组是空的。我不确定如何就这个问题提供更多见解，但我正在寻找有关 POST 变量可能无法正确传递的可能性。

`<form>`一页中有多个标签会导致错误地传递值吗？

根据要求，这是一个评估 POST 变量之一的代码片段：

```
ob_start()
require('crm_common.php'); 

var_dump($_POST);

switch(@$_POST['action']) { 
case 'update': 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:39:01.703

正如评论中所解释的，在输出缓冲区 (ob_start()) 被刷新或关闭之前，不会发送任何内容。有关输出缓冲的详细信息，请参阅[手册](http://php.net/manual/en/function.ob-start.php)。

* * *

多种形式应该不是问题。

我注意到你启动了一个输出缓冲区。您是获取内容还是之后将其清除？试着做

```
echo "<pre>";
print_r($_POST); 
```

作为文件中的第一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:30:41.037

您是从特定的提交按钮发布的吗？

```
if(isset($_POST['nameOfSubmitButtom'])){
  var_dump();
} 
```

# c++ - 以 STL 样式创建类的模板化方法

> ID：10503472
> 
> 赞同：0
> 
> 时间：2012-05-08T17:28:36.720
> 
> 标签：c++, stl

好的，所以我们知道 STL 中的函数，例如

```
std::fill(boolContainer.begin(), boolContainer.end(), false); 
```

我正在使用一个也适用于容器的方法来开发一个类，并且我意识到我也可以像上面的示例中那样对其进行模板化。非模板化版本是这样的：

```
class SomeClass {
public:
    // ...
    int containerMethod(std::vector<int> &v);
    // ...  
private:
    // ...
}; 
```

我的目标是将其更改为：

```
class SomeClass {
public:
    // ...
    template <class InputIterator>
    int containerMethod(const InputIterator &begin, const InputIterator &end);
    // ...  
private:
    // ...
}; 
```

但是我在制定实施细节时遇到了麻烦：

```
template <class Iter> int SomeClass::containerMethod
(const Iter &begin, const Iter&end) {
    // Here I need to instantiate an iterator for the container.
    Iter iter;
    for (iter = begin; iter != end; ++iter) {
        // This does not seem to work.
    }
    return 0;
} 
```

所以问题是如何根据方法的模板化参数正确实例化模板化迭代器？请注意，我只需要一个输入迭代器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:38:38.100

你的测试用例不完整，所以我得请教一下我的水晶球。

您已将模板定义放在源代码文件中，而它本应放在头文件中。

参见：[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

# forms - Wordpress + Gravity Form + 自定义帖子类型 + Flickr 集成

> ID：10503473
> 
> 赞同：0
> 
> 时间：2012-05-08T17:28:37.777
> 
> 标签：forms, wordpress, flickr, custom-post-type, gravity

我需要在这种情况下找到解决方案。我正在尝试实现让用户使用文件上传或粘贴照片的 Flickr（或 Picasa）链接（不是用户的集合或画廊或收藏夹）发布图片的能力。发布的这些图片/链接中的每一个都将成为我页面上自定义帖子类型下的帖子。我正在使用重力形式 + 自定义帖子类型。

有谁知道集成 Flickr 部分的路径？用户可以在哪里粘贴 Flickr 照片页面的链接，我们将处理获取图片 url，例如中等尺寸格式，并将其作为帖子的特色图片？在用户将 Flickr 链接粘贴到文本字段后立即显示图片（或缩略图）会很好。

我一直在寻找和思考，但还没有找到理想的解决方案。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:56:39.113

在这里您可以找到如何将带有 Gravity Forms 的图片上传到 Dropbox

[http://www.gravityhelp.com/forums/topic/questions-about-the-file-image-uploader](http://www.gravityhelp.com/forums/topic/questions-about-the-file-image-uploader)

从 Dropbox，您可以使用此[http://beta.wappwolf.com/](http://beta.wappwolf.com/)将您的照片发送到其他地方

也许不是最短的方法，但它应该可以工作:)

# groovy - IntelliJ 无法识别 groovy 字符串

> ID：10503483
> 
> 赞同：4
> 
> 时间：2012-05-08T17:29:18.963
> 
> 标签：groovy, intellij-idea, gradle

我在 windows-7 上使用 IDEA - 11.1.1 和 gradle - gradle-1.0-milestone-9 （我也尝试过发布候选版本 3）（如果这很重要） 导入 gradle 项目后，IDEA 抱怨 String 对象。我想我错过了一些关于 grrovy 配置的东西。我还将 - main 和 test 文件夹分别标记为 Sources 和 Test Resources。我错过了什么明显的东西吗？

![在此处输入图像描述](../Images/de90a2e49d67bbda0ad9e0dead763086.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T07:11:47.493

很可能在 IDEA 中没有正确设置 JDK。去`File -> Project Structure -> Project`检查/修复`Project SDK`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:53:46.903

尝试检查您的项目和模块 sdk。

在您的模块上选择 F4 或右键单击“打开模块设置”检查您的 SDK 和 Moduel SDK

我相信这会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:00:18.123

检查您的 IDEA 项目设置并查看您的 JDK 是否配置正确。

我建议你使用`gradle idea plugin`来创建你的 IDEA 项目文件，而不是使用将现有 gradle 项目导入 IDEA 的功能，因为根据我的经验，它给我带来了麻烦。此外，通过 gradle 添加新 jar 并通过 gradle 更新您的 IDEA 项目文件似乎更加一致。

我上传了一个`build.gradle`要点，这可能会给你一个好的开始： [https ://gist.github.com/1580234](https://gist.github.com/1580234)

它包含一些解释性评论。

问候，

简

# xml - 无法调试 XSD

> ID：10503485
> 
> 赞同：0
> 
> 时间：2012-05-08T17:29:41.777
> 
> 标签：xml, xsd

这是我的 XSD。我无法理解为什么我不断收到此错误：

> CDIER0202E: 加载 XML 模式时遇到内部致命 DOM 错误=:urn|library|Test123247_1|resource|SmallCase.xsd:urn|library|Test123247_1|resource|SmallCase.xsd:urn|library|Test123247_1|resource|SmallCase.xsd:3 ：35：322：元素“xsd：element”的前缀“xsd”未绑定..

这是编辑后的新 XSD：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:scotiaXML="http://xml.scotia.com"  targetNamespace="http://xml.scotia.com" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.0">
<!-- Begin Level 1 =============================================-->
<xsd:element name="OTC_Matching" type="temp"/>
<xsd:complexType name="temp" mixed="false">
    <xsd:sequence>
        <xsd:choice>
            <xsd:element ref="PostTrade"/>
        </xsd:choice>
    </xsd:sequence>
</xsd:complexType>
<!-- End Level 1 =============================================-->
<xsd:element name="PostTrade" type="PostTradeTransaction"/>
<xsd:complexType name="PostTradeTransaction" abstract="true">
    <xsd:sequence>
        <xsd:choice>
            <xsd:element name="elem1" type="xsd:string"/>
        </xsd:choice>
    </xsd:sequence>
</xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:35:14.813

您的第一个问题是您没有将命名空间 xsd 分配给任何东西。你为什么使用 xs 和 xsd ？我认为您想在任何地方都用 xs 替换 xsd 。

第二个问题是您没有提供关闭标签。

第三个问题是您没有表明 PostTrade 与 OTC_Matching 处于序列中。

你能提供一个你想用这个模式验证的示例 xml 吗？

这更进一步并给了我错误：

```
D:\downloads>\bin\xmllint.exe --schema y.xsd x1.xml
<?xml version="1.0"?>
<OTC_Matching xmlns="http://xml.scotia.com">
<PostTrade>
<elem1/>
</PostTrade>
</OTC_Matching>
x1.xml:2: element PostTrade: Schemas validity error : Element '{http://xml.scoti
a.com}PostTrade': The type definition is abstract.
x1.xml fails to validate 
```

有了这个

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:scotiaXML="http://xml.scotia.com" targetNamespace="http://xml.scotia.com" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.0">
  <!-- Begin Level 1 =============================================-->
  <xs:element name="OTC_Matching">
    <xs:complexType mixed="false">
      <xs:sequence>
        <xs:choice>
          <xs:element name="PostTrade" type="scotiaXML:PostTradeTransaction"/>
        </xs:choice>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <!-- End Level 1 =============================================-->
  <xs:complexType name="PostTradeTransaction" abstract="true">
    <xs:sequence>
      <xs:choice>
        <xs:element name="elem1" type="xs:string"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:08:36.377

正确的 xsd 是：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="foo" version="1.0" >
<!-- Begin Level 1 =============================================-->
<xsd:element name="OTC_Matching">
    <xsd:complexType mixed="false">
        <xsd:sequence>
            <xsd:choice>
                <xsd:element ref="PostTrade" xmlns="foo"/>
            </xsd:choice>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>
<!-- End Level 1 =============================================-->
<xsd:element name="PostTrade" type="PostTradeTransaction" xmlns="foo"/>
<xsd:complexType name="PostTradeTransaction" abstract="true" xmlns="foo">
    <xsd:sequence>
        <xsd:choice>
            <xsd:element ref="PostTrade" xmlns="foo"/>
        </xsd:choice>
    </xsd:sequence>
</xsd:complexType> 
```

# mobile - 移动开发中的轮播

> ID：10503488
> 
> 赞同：0
> 
> 时间：2012-05-08T17:29:50.180
> 
> 标签：mobile, jquery-mobile, sencha-architect

我们使用 Visual Studio 2010 创建了一个 ASP.NET MVC 4.0 (Beta) 网站。标准浏览器和移动设备将使用（或查看）该网站。

因此，我们决定使用 MVC 4.0 中提供的新 .mobile.cshtml 页面。我们基本上复制/粘贴了所有视图并相应地重命名它们（其中包含 .mobile）。我们现在已经准备好开始围绕 .mobile 视图展开游戏了……</p>

考虑到我过去没有移动开发经验，我很想知道一些事情。例如，我正在尝试创建一个简单的旋转木马，它会轻轻滑动，一旦到达最后一张图像，它将从第一个图像重新开始。

我正在寻找一个简单的例子，此外，我一直在看/阅读关于 Sencha Architect（我决定下载它，只是意识到它是某种用于开发移动应用程序的 IDE……如果我'我错了）。

为了正确开始，任何人都可以解释（或澄清）为什么我应该使用 Sencha Architect 之类的东西与使用带有 jQ​​uery Mobile 的 Visual Studio 之间的区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:23:04.007

sencha 建筑师确实是正确的。像你自己一样，我很困惑，但它被设计为与 Visual Studio 一起工作，我真的很难理解，因为 senchas 以独特的方式创建界面组件。这并不意味着您不能以与 jquery mobile 相同的方式将 sencha touch 与 mvc 一起使用。您可以像现在一样在 mvc 中编写页面，并使用 sencha 中的 applyto 方法将 sencha 小部件附加到它

至于 sencha touch 与 jquery mobile 的争论，我想这取决于你

# iphone - 获取 EXC_BAD_ACCESS_CODE，目标 C

> ID：10503491
> 
> 赞同：0
> 
> 时间：2012-05-08T17:29:57.853
> 
> 标签：iphone, exc-bad-access

我正在做的是

```
    //ClassB.h
    @property (strong, nonatomic) NSString *name;
```

和

```
//ClassA.h
 @interface ClassA：NSObject
 +(ClassA*)methodA:(NSData*)data;
 -(id)initWithData:(NSData*) 数据；

    @property (nonatomic, strong) NSMutableArray *arr;
    @property (nonatomic, strong) RXMLElement *rxmlRoot;

    @结尾

    //ClassA.m
    @实现类A
    @synthesize arr;
    @synthesize rxmlRoot;

    +(ClassA*)methodA:(NSData*)data {
        返回 [[ClassA alloc] initWithData:data];
    }

    -(id)initWithData:(NSData*)data {
        self = [超级初始化];
        如果（自我）{
            arr = [NSMutableArray 数组];
            rxmlRoot = [RXMLElement elementFromXMLData:data];

             /*****edit : 刚刚添加以使代码清晰*****/  
            NSString *node = @"players.player";
            [rxmlRoot 迭代：节点与：^（RXMLElement *e）{
                 ClassB *classB = [[[ClassB alloc] init] autorelease];
                 [classB setName：[e属性：@“name”]]；

                 // 将 ClassB 添加到 arr
                 [arr addObject:classB];
            }];

        }
        回归自我；
    }
    @结尾

```

所以现在我有**ClassA**对象，其**arr**包含**ClassB**

**问题**：稍后，当我尝试访问 ClassB 的特定属性时

```
((ClassB*)[classA.arr objectAtIndex:0]).name 
```

我在上面的行得到**EXC_BAD_ACCESS** ..

请就这个问题以及如何纠正错误给我建议。欢迎任何意见在这里

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:36:52.503

这条线

```
[arr addObject:ClassB] 
```

没有意义。您打算将 ClassB 的*实例*放入该数组还是类本身（即`[ClassB class]`）？大概您必须打算在其中放置一个 ClassB 的实例，否则稍后尝试访问其属性（例如`firstName`）将毫无意义。此外，您的 ClassB 是否甚至具有`firstName`属性，因为您向我们展示的 ClassB 界面仅提到了一个`name`属性。

**更新：**

由于您使用手动内存管理，因此您需要使用便利构造函数*保留*在初始化程序中创建的对象（arr、rxmlRoot），这些构造函数返回自动释放的对象。例如，代码应该是

```
arr = [[NSMutableArray array] retain]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:33:53.507

问题中的代码已经发生了很大变化，所以我之前的回答现在没有意义，我已经删除了它。给定修改后的代码，首先要做的是记录发生了什么。

```
NSLog(@"classA: %@", classA);
NSLog(@"classA.arr: %@", classA.arr);

((ClassB*)[classA.arr objectAtIndex:0]).name 
```

如果它在第一个日志语句中爆炸，事情就非常糟糕。但至少你知道 classA 指向的东西已经烂了，你可以从那里开始工作。

通过在行前设置断点并进行检查，您可以在调试器中实现相同的目的。假设您得到一个 EXC_BAD_ACCESS，其中一个指针指向一个狡猾的对象，例如一个已被释放的对象。看起来好像您正在使用 ARC（因为您的财产很强大），这应该有助于管理内存 - 但话又说回来，您在那里有一个自动释放，所以可能没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:55:27.930

发布您的 ClassB.m 。您是否正在制作@synthesize 名称？

还要为 arr 制作 Alloc。

这行是错误的：

```
((ClassB*)[classA.arr objectAtIndex:0]).firstName 
```

您的字符串称为 name ，而不是 firstName。它应该是 ：

```
((ClassB*)[classA.arr objectAtIndex:0]).name 
```

# android - 请帮助我了解如何从 logcat 检测程序中的错误

> ID：10503496
> 
> 赞同：0
> 
> 时间：2012-05-08T17:30:15.193
> 
> 标签：android, logcat

我的应用程序已停止在模拟器上运行“不幸的是”。我有 logcat，但是我不明白如何解决这些错误。请帮我。提前致谢。这是日志猫

```
05-07 14:34:01.302: E/AndroidRuntime(713): FATAL EXCEPTION: main
05-07 14:34:01.302: E/AndroidRuntime(713): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.calc/my.calc.CalcActivity}: java.lang.NullPointerException
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.os.Looper.loop(Looper.java:137)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-07 14:34:01.302: E/AndroidRuntime(713):  at java.lang.reflect.Method.invokeNative(Native Method)
05-07 14:34:01.302: E/AndroidRuntime(713):  at java.lang.reflect.Method.invoke(Method.java:511)
05-07 14:34:01.302: E/AndroidRuntime(713):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-07 14:34:01.302: E/AndroidRuntime(713):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-07 14:34:01.302: E/AndroidRuntime(713):  at dalvik.system.NativeStart.main(Native Method)
05-07 14:34:01.302: E/AndroidRuntime(713): Caused by: java.lang.NullPointerException
05-07 14:34:01.302: E/AndroidRuntime(713):  at my.calc.CalcActivity.onCreate(CalcActivity.java:30)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.app.Activity.performCreate(Activity.java:4465)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-07 14:34:01.302: E/AndroidRuntime(713):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-07 14:34:01.302: E/AndroidRuntime(713):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T17:31:31.040

```
 Caused by: java.lang.NullPointerException 
```

上面的行表示您有空指针异常，下面的行表示行号（CalcActivity.java:30）。

```
05-07 14:34:01.302: E/AndroidRuntime(713):  at my.calc.CalcActivity.onCreate(CalcActivity.java:30) 
```

希望您可能忘记在 oncreate() 中使用 setContentView 并使用 xml 文件组件。

**更新：：：**

```
adapter = new ArrayAdapter<CharSequence>(CalcActivity.this,android.R.layout.simple_spinner_dropdown_item, your_array_list_of_charsequence); 
```

尝试在前面添加上面的行 `adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:15:36.847

只是为了解释所有这些“at”的含义......它被称为堆栈跟踪，是一种让您确定出现问题时应用程序正在做什么的方法。假设您有以下伪代码

文件1：

```
1 define function MyFunction(SomeParam)
2     Throw an exception here
3 end definition 
```

文件2：

```
1 DoSomething()
2 DoSomethingElse()
3 Call MyFunction
4 DoSomething() 
```

您会在堆栈跟踪中看到类似于

```
Exception Thrown
at File1 Line 2
at File2 Line 3 
```

这告诉您，`MyFunction`当`File1`从`File2`.

显然，在一个真实的程序中，很多函数调用了很多其他函数，所以堆栈跟踪可能会更长一些——但原理是一样的。

使用框架时要注意的另一件事是，在您自己没有编写的代码中可能会引发异常。这要么意味着您使用错误的框架或框架有错误。99%的时间是因为你用错了

如果是框架异常，请跟踪堆栈跟踪，直到找到您编写的调用框架的代码。这很可能是问题所在。

希望这有助于澄清你所看到的

# c# - 在动态变化的标签中获取匹配的文本

> ID：10503501
> 
> 赞同：-1
> 
> 时间：2012-05-08T17:30:39.553
> 
> 标签：c#, c#-4.0

我有一个字符串，其中标签中的 href 和 text 的值是动态变化的。

例如我的文字是这样的

```
-5></span>
</span>
                    <a class=header-3 href=/mercedes-benz/190-class/1993/consumer-reviews/e-bay-find.html?style=2286&sub=&reviewId=202661771>DYNAMIC changing text</a> 
```

我希望只取 href 的值，即在这种情况下

`/mercedes-benz/190-class/1993/consumer-reviews/e-bay-find.html?style=2286&sub=&reviewId=202661771`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:56:02.943

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);
var links =doc.DocumentNode
              .Descendants("a")
              .Select(n => n.Attributes["href"].Value).ToArray(); 
```

# javascript - Knockout.JS 映射返回一个空数组？

> ID：10503507
> 
> 赞同：0
> 
> 时间：2012-05-08T17:31:14.683
> 
> 标签：javascript, json, knockout.js

最后一天我一直在为此挠头。希望有人能阐明一下。我有一个简单的 javascript 对象——数据—— JSON.stringify(data) 像这样返回它；

```
{
    "dataList": [
        {
            "Id": 0,
            "Name": "0",
        },
        {
            "Id": 1,
            "Name": "1",
        }
    ]
} 
```

我还有一个非常简单的淘汰视图模型；

```
var viewModel = {
            dataList: ko.observableArray([])
        }; 
```

然后我根据文档站点进行简单的 knockout.JS 映射调用；

```
ko.mapping.fromJS(data, viewModel); 
```

我希望我的 viewModel 现在有一个 dataList 成员（确实如此），它是一个 2 数组（不是！）。相反，我得到一个空数组。我在这里的映射中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:41:39.430

您不需要在 viewModel 对象上定义属性；映射插件将为您创建它们。只需像这样声明 viewModel ：

```
var viewModel = ko.mapping.fromJS(data); 
```

[http://jsfiddle.net/vqaVT/](http://jsfiddle.net/vqaVT/)

`ko.mapping.fromJS(data, viewModel)`当您需要使用来自服务器的更新数据*更新*您的 viewModel时，您只需要进行另一个调用。

# windows-8 - 没有数据源时如何给出“Empty ListView Message”

> ID：10503510
> 
> 赞同：6
> 
> 时间：2012-05-08T17:31:24.140
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winjs

我的应用程序有一个带有 GridLayout 的 ListView。我现在正在尝试将 ListView 组引入我的应用程序。比如说，数据源通常有 Group1、Group2 和 Group3。无论是否有元素，我都想一直显示所有 3 个组。当组中没有元素时，我想在组标题下显示“空组”消息。

我认为`WinRT`处理它的默认方法是不显示空组，这在许多情况下都很有意义。为此，我知道在没有数据的情况下，我也许可以在列表视图中添加一个虚拟项目，但这有点不合时宜。

那么，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-25T19:04:09.640

只需将您的 ListView 绑定到 Group 对象的集合（其中 Group 是您定义的类，Group1、Group2 和 Group3 就是这样的 Group 对象）。

除了 Group 级别的属性（例如 Title），让 Group 包含 Item 对象的集合。

在 ListView 的数据模板中，使用另一个 ListView 来显示每个 Group 的 Item 元素。

不过要小心，GridViews 的嵌套会导致嵌套的 ScrollViewers。您可能希望通过更改其控件模板从内部 GridView 中删除 ScrollViewer。

# c - 将 char 数组的一部分复制到新的 char 数组中失败

> ID：10503512
> 
> 赞同：0
> 
> 时间：2012-05-08T17:31:30.993
> 
> 标签：c, pointers, arrays

我想将 char 数组的一部分复制到一个新数组中

```
void match(char* probe, char* pattern)
char* matchText;
//the char-array probe in this example is at least 12 characters long
//I'm only writing numbers in the strncopy-command to make it easier to understand
strncpy (matchText, probe + 5, 5 ); 
```

运行后，调试器会因错误而退出。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:32:50.587

您需要为 分配内存`matchText`，您所拥有的只是一个指针。
它必须有足够的内存分配使用`malloc`（因为它是一个指针）来保存被复制到它的字符串，或者你得到的是**Undefined Behavior**。

# silverlight - XAML 中的文件夹/文件接口，正确的控制选择？

> ID：10503518
> 
> 赞同：0
> 
> 时间：2012-05-08T17:31:46.423
> 
> 标签：silverlight, xaml, mvvm, drag-and-drop, treeview

这是我想要实现的界面：

![在此处输入图像描述](../Images/232cceee6a149c505fc4b83e5ca61469.png)

基本上，这是 1 级深度结构，文件夹和文件夹内的文件。您看到的屏幕截图是我尝试在内部`ItemsControl`和`ListBox`内部执行此操作`ItemsControl`

我需要的东西：

1.  文件夹不可选择。没有互动，只是展示他们。
2.  一次只能“选择”一个文件
3.  文件可以从一个文件夹拖放到另一个文件夹
4.  一切都在 MVVM 中完成

现在以我的方式 - 因此多个 ListBoxes 专注于多个不好的元素。

我还不知道如何实现拖放。

我正在考虑`TreeView`控制，但不确定它是如何工作的。

我正在寻找有关如何实现这种情况的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:40:19.697

一`TreeView`、两种`TreeViewItems`样式“FolderLevelStyle”和“FileLevelStyle”。从 Blend 中提取它们的默认样式。

在“FolderLevelStyle”中，删除所有触发器`IsMouseOver`和`IsSelected`属性。此外，设置`ItemContainerStyle`为“FileLevelStyle”。

这将为您提供第 1 点和第 2 点。

[在“FolderLevelStyle”中] 您还可以在控件模板中设置`IsExpanded`并`True`折叠`ToggleButton`（包括删除影响该按钮的所有触发器） - 这将不允许用户“关闭”文件夹。

关于拖放，有几种方法。[从这里](http://msdn.microsoft.com/en-us/library/ms742859.aspx)开始。了解如何将其集成到 MVVM 架构中。我倾向于创建将在文件项`Behavior`的根面板上设置的（或附加行为） 。`DataTemplate`

# .net - .Net 有更好的源 TTS 包吗？

> ID：10503519
> 
> 赞同：2
> 
> 时间：2012-05-08T17:31:51.867
> 
> 标签：.net, speech, text-to-speech, speech-synthesis

我需要在我的 C#.Net 应用程序中实现文本转语音 (TTS) 系统。现在我使用的是 C# .Net TTS 包（System.Speech.Synthesis），它应该与 Windows 中的扬声器相同。但我发现这个 TTS 听起来很奇怪。所以我想问一下TTS系统有没有其他的选择可以说得更自然流畅。最好是免费的，因为我不做商业项目。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:06:26.457

有一个[内置的](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.aspx).NET 类可以做到这一点。它比[espeak](http://espeak.sourceforge.net/)流畅得多。我最幸运的是 IBM 的[viavoice](http://www-01.ibm.com/software/pervasive/viavoice.html)，但我认为它不再是免费的了。有免费的[节日 tts](http://www.cstr.ed.ac.uk/projects/festival/)，但我无法在我的桌面应用程序中使用它。

这`System.Speech`是我的感受，它在易用性和语音质量之间取得了最佳平衡。Viavoice 听起来更好，但我们必须将 dll 编译到命令行应用程序中，以将其集成为单独的进程以使其运行。espeak 提供了一个内置的命令行应用程序，您可以在后台运行它。

# android - android的非洲语言支持

> ID：10503520
> 
> 赞同：0
> 
> 时间：2012-05-08T17:31:54.780
> 
> 标签：android

我想创建一个支持“**非洲人**”语言的 android 应用程序，它是**南非**的区域语言。我的问题是：

Android OS 是否支持非洲语言？我们如何为此使用 Locale 类[比如 new Locale("en") 用于英语]？什么是值文件夹名称 [如英文的 values-en]。如果同一个帖子有任何其他方法必须建议。

如果有人对问题帖子有任何想法，将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:57:45.717

它被称为南非荷兰语。

它使用拉丁文字，所以你不会有任何问题。

语言代码是 af 或 afr，具体取决于 ISO。

[http://www.loc.gov/standards/iso639-2/php/code_list.php](http://www.loc.gov/standards/iso639-2/php/code_list.php)

# jquery - 如何使用 Jquery 更改链接的 href？

> ID：10503521
> 
> 赞同：0
> 
> 时间：2012-05-08T17:31:58.950
> 
> 标签：jquery, regex, variables, hyperlink, replace

我想**更改**链接的 URL。

这是代码

```
<div id="content">
  ...
  <a href="/mbs/articleVC.php?mbsC=freebbs&mbsIdx=822907&cpage=10">link</a>
  <a href="/mbs/articleVC.php?mbsC=freebbs&mbsIdx=822908&cpage=11">link</a>
  <a href="/mbs/articleV.php?mbsC=freebbs&mbsIdx=802894&cpage=&mbsW=search&select=stt&opt=1&keyword=keyword1">link</a>
  <a href="/mbs/articleV.php?mbsC=freebbs&mbsIdx=802895&cpage=&mbsW=search&select=stt&opt=1&keyword=keyword2">link</a>
  ...
</div> 
```

用。。。来代替：

```
<div id="content">
  ...
  <a href="/mbs/articleV.php?mbsC=freebbs&mbsIdx=822907&cpage=10">link</a>
  <a href="/mbs/articleV.php?mbsC=freebbs&mbsIdx=822908&cpage=11">link</a>
  <a href="/mbs/articleV.php?mbsC=freebbs&mbsIdx=802894&cpage=&mbsW=search&select=stt&opt=1&keyword=keyword">link</a>
  <a href="/mbs/articleV.php?mbsC=freebbs&mbsIdx=802895&cpage=&mbsW=search&select=stt&opt=1&keyword=keyword2">link</a>
  ...
</div> 
```

页面上有很多链接。
如何使用 jQuery 将“文章**VC** .php”替换为“文章**V** .php”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:35:30.650

***第一个更好更快***

```
$('#content a').attr('href', function(index, Oldhref) {
  return Oldhref.replace(/articleVC/ ,'articleV')
}); 
```

或者

```
$('#content a').each(function() {
  $(this).attr('href', $(this).attr('href').replace(/articleVC/ ,'articleV'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:40:48.580

你可以试试：

```
$('#content a[href*="articleVC.php"]').each(function() {
    href = $(this).attr('href').replace('articleVC.php' ,'articleV.php');
    $(this).attr('href', href);
});​​ 
```

[在这里测试](http://jsfiddle.net/LAS9B/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:40:54.687

```
$('a', '#content').each(function() {
    this.href = this.href.replace('articleVC', 'articleV');
});​ 
```

如果由于某种原因更快更好:-)

```
var elms = document.getElementsByTagName('a');
for (i=0; i<elms.length; i++) {
    elms[i].href = elms[i].href.replace('articleVC', 'articleV');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T17:36:44.667

您可以使用：

```
$('#content a').each(function() {
    $(this).attr('href', $(this).attr('href').replace('articleVC.php','articleV.php'));
}); 
```

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T17:38:21.157

```
$('a').each(function() {
    $(this).attr('href', $(this).attr('href').replace('articleVC.php', 'articleV.php'));
}); 
```

您可以使用该`each`函数遍历所有匹配的`<a>`元素，为每个元素通过调用获取“href”属性`attr('href')`，使用`replace`方法`String`获取替换的字符串，然后将其再次分配给“href”属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T17:47:02.967

您可以使用正则表达式来实现这一点。

使用 jQuery: ( [jsfiddle](http://jsfiddle.net/VLAJD/) )

```
$('#content a').each(function() {
    this.href = this.href.replace(/articleVC\.php/, 'articleV.php');
}); 
```

在香草 JavaScript 中：（[jsfiddle](http://jsfiddle.net/BR69J/2/)）

```
var links = document.getElementById('content').children;
for(l in links) {
    links[l].href = links[l].href.replace(/articleVC\.php/, 'articleV.php');
}; 
```

# c - C const - 如果 const 是右值（即不存储在内存中），指向 const 的指针如何可能？

> ID：10503524
> 
> 赞同：2
> 
> 时间：2012-05-08T17:32:14.380
> 
> 标签：c

基于对[标准注释的更正](http://webcache.googleusercontent.com/search?q=cache%3aYMcKTZq2wrQJ%3awww.lysator.liu.se/c/schildt.html%20http://www.lysator.liu.se/c/schildt.html&cd=1&hl=en&ct=clnk&gl=us)。

> 3.14 对象是驻留在物理内存地址的变量或常量。
> 
> *   在 C 中，常量不驻留在内存中（某些字符串文字除外），因此不是对象。

对我来说，一个 const 不会有一个实际的内存位置（可能除了字符串文字）并且它取决于编译器，它很可能会用文字值替换对它的所有引用，这对我来说是有意义的。话虽如此，以下怎么可能？

```
const int * foo; 
```

这声明了一个指向 a 的指针`const int`。但是，常量没有地址，那么这到底是什么意思呢？您不能拥有指向仅在编译时存在的文字值的指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T17:43:51.590

变量`const`不是*常数*。*常量*是文字值或由文字值组成的表达式，例如`3+5/2.4`. 这样的常量确实不驻留在内存中，编译器将文字插入到适当的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:56:46.093

在您的示例中，`foo`它不是一个*常量*，而是一个*const 限定的对象*：

> **6.7.3 类型限定符**
> 
> **语法**
> 
> 1      *type-qualifier* : ... 3 与限定类型相关的属性仅对左值表达式有意义。^(114)) ... 114) 实现可以放置不在只读存储区域中的对象。此外，如果从未使用过此类对象的地址，则实现不需要为此类对象分配存储空间。
> `        const
>         restrict
>         volatile`
> 
>  ^(`const``volatile`)

# fortran - 如何在 Compaq Visual Fortran 6.5 中导入或调用大数据

> ID：10503528
> 
> 赞同：0
> 
> 时间：2012-05-08T15:26:45.337
> 
> 标签：fortran

我有问题如何将非常大的矩阵导入 fortran 6.5。例如，我的 .for 文件矩阵非常大 120 MB，矩阵以表格形式给出

```
 A(1,1)=691627.009959795*x(1)**2 - 3428.41117804251*x(1)*x(2) -
 # 156.91392014999*x(2)**2 + 428391.21915942*x(1)*x(3) - 953.4687530
 #88931*x(2)*x(3) + 66317.7918091961*x(3)**2 + 159956.172489745*x(1)
 #*x(4) - 427.609460294073*x(2)*x(4) + 49548.6129072796*x(3)*x(4) + 
 #9246.97185672321615*x(4)**2 - 34020.3929685886*x(1)*x(5) + 23.9104
 #515534*x(2)*x(5) - 10515.7437145023*x(3)*x(5) - 3939.86670772623

  A(1,2)=433427.009959795*x(1)**2 - 3444.41117804251*x(1)*x(2) -
 # 144.91392014999*x(2)**2 + 455391.21915942*x(1)*x(3) - 955.4687530
 #58931*x(2)*x(3) + 66317.7918091961*x(3)**2 + 159956.172489745*x(1)
 #*x(4) - 457.609460294073*x(2)*x(4) + 49548.6129072796*x(3)*x(4) + 
 #3246.97182321615*x(4)**2 - 14020.3929685886*x(1)*x(5) + 23.9104019
 #515534*x(2)*x(5) - 14515.7437145023*x(3)*x(5) - 3669.86670772623
 ... 
```

由于矩阵非常大，我可以将 1 MB 矩阵的一小部分复制/粘贴到 fortran 表中，所以在这种情况下，我必须在 120 个部分上分配 120MB 并复制/粘贴到 fortran 表中，并对所有部分求和。如何以这种完整形式从 fortran 调用或导入矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:55:22.230

看起来您正在采用一种选择不当的方法来解决这个问题。正如您在其中一条评论中所说，您正在 matlab 中生成这些方程，然后从那里将这些方程导出到 fortran 代码 - 大概是因为 matlab 中的（可能重复）评估太慢了。

更好的方法是让 matlab 生成系数，并以某种可移植形式将它们保存到磁盘，例如[hdf5](http://www.hdfgroup.org/HDF5/)（matlab 和 fortran 可以读取和写入的快速可移植二进制格式）。然后编写一些 fortran 代码将系数导入到一些数组中，并使用这些数组来计算所需的矩阵元素。

# delphi - 将 TObject.AfterConstruction 重定向到其他过程的问题

> ID：10503531
> 
> 赞同：5
> 
> 时间：2012-05-08T17:32:23.597
> 
> 标签：delphi, delphi-xe

我正在尝试使用下面的代码将 TObject.AfterConstruction 重定向到另一个过程，但一段时间后，很多异常开始引发。注意：我使用这种重定向到许多其他解决方案。

```
unit Unit109;

interface

uses
  Windows;

implementation

uses
  SyncObjs, SysUtils;

type
  PJump = ^TJump;
  TJump = packed record
    OpCode: Byte;
    Distance: Pointer;
  end;

  TObjectHack = class(TObject)
  public
    procedure AfterConstruction;
  end;

function GetMethodAddress(AStub: Pointer): Pointer;
const
  CALL_OPCODE = $E8;
begin
  if PBYTE(AStub)^ = CALL_OPCODE then
  begin
    Inc(Integer(AStub));
    Result := Pointer(Integer(AStub) + SizeOf(Pointer) + PInteger(AStub)^);
  end
  else
    Result := nil;
end;

procedure AddressPatch(const ASource, ADestination: Pointer);
const
  JMP_OPCODE = $E9;
  SIZE = SizeOf(TJump);
var
  NewJump: PJump;
  OldProtect: Cardinal;
begin
  if VirtualProtect(ASource, SIZE, PAGE_EXECUTE_READWRITE, OldProtect) then
  begin
    NewJump := PJump(ASource);
    NewJump.OpCode := JMP_OPCODE;
    NewJump.Distance := Pointer(Integer(ADestination) - Integer(ASource) - 5);

    FlushInstructionCache(GetCurrentProcess, ASource, SizeOf(TJump));
    VirtualProtect(ASource, SIZE, OldProtect, @OldProtect);
  end;
end;

procedure OldAfterConstruction;
asm
  call TObject.AfterConstruction;
end;

{ TCriticalSectionHack }
procedure TObjectHack.AfterConstruction;
begin
end;

initialization
  AddressPatch(GetMethodAddress(@OldAfterConstruction), @TObjectHack.AfterConstruction);

end. 
```

也许 AfterConstruction 存储在 VMT (vmtAfterConstruction = -28) 中并且必须以其他方式更改？喜欢：

```
PatchCodeDWORD(PDWORD(Integer(Self) + vmtAfterConstruction), DWORD(@TObjectHack.AfterConstruction));

procedure PatchCodeDWORD(ACode: PDWORD; AValue: DWORD);
var
  LRestoreProtection, LIgnore: DWORD;
begin
  if VirtualProtect(ACode, SizeOf(ACode^), PAGE_EXECUTE_READWRITE, LRestoreProtection) then
  begin
    ACode^ := AValue;
    VirtualProtect(ACode, SizeOf(ACode^), LRestoreProtection, LIgnore);
    FlushInstructionCache(GetCurrentProcess, ACode, SizeOf(ACode^));
  end;
end; 
```

两种方法都试了，都没有成功，有大神帮忙吗？

如果有人想了解这种方法：

*   [http://hallvards.blogspot.com.br/2007/05/hack17-virtual-class-variables-part-i.html](http://hallvards.blogspot.com.br/2007/05/hack17-virtual-class-variables-part-i.html)
*   [http://hallvards.blogspot.com.br/2006/03/hack-8-explicit-vmt-calls.html](http://hallvards.blogspot.com.br/2006/03/hack-8-explicit-vmt-calls.html)
*   [http://hallvards.blogspot.com.br/2007/03/hack14-chang-class-of-object-at-run.html](http://hallvards.blogspot.com.br/2007/03/hack14-changing-class-of-object-at-run.html)

Tks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T22:49:45.677

已编辑 - 现在正在努力增加和减少项目的数量。要使其正常工作，只需将该单元作为 dpr 的第一个单元。现在，我将优化一些方法并将我想要的输出放在这里。（我不会重新编辑帖子，没有必要）但是如果您想使用，请随意测试和报告错误。如果您想测试，我放了一个**简单的输出，程序***SaveInstancesToFile*，它会在您的应用程序路径中创建一个 test.txt 文件，其中包含计数器的输出。

```
unit ObjectCounter;

  {  Develop by rodrigofrezino@gmail.com
     Stackoverflow: http://stackoverflow.com/users/225010/saci
     Please, any bug let me know}

interface

  procedure SaveInstancesToFile;

implementation

uses
  Windows, SysUtils, Classes, TypInfo;

type

  PClassVars = ^TClassVars;
  TClassVars = class(TObject)
  private
    class var ListClassVars: TList;
  public
    InstanceCount: integer;
    BaseClassName: string;
    constructor Create;

    class procedure SaveToDisk;
  end;

  PJump = ^TJump;
  TJump = packed record
    OpCode: Byte;
    Distance: Pointer;
  end;

  TObjectHack = class(TObject)
  private
    class procedure SetClassVars(AClassVars: TClassVars);
    class function GetClassVars: TClassVars;

    procedure IncCounter;
    procedure DecCounter;
    procedure OldFreeInstace;
  public
    class function InitInstance(Instance: Pointer): TObject;
  end;

var
  FOldFreeInstance: Pointer;

procedure SaveInstancesToFile;
begin
  TClassVars.SaveToDisk;
end;

function GetMethodAddress(AStub: Pointer): Pointer;
const
  CALL_OPCODE = $E8;
begin
  if PBYTE(AStub)^ = CALL_OPCODE then
  begin
    Inc(Integer(AStub));
    Result := Pointer(Integer(AStub) + SizeOf(Pointer) + PInteger(AStub)^);
  end
  else
    Result := nil;
end;

procedure AddressPatch(const ASource, ADestination: Pointer);
const
  JMP_OPCODE = $E9;
  SIZE = SizeOf(TJump);
var
  NewJump: PJump;
  OldProtect: Cardinal;
begin
  if VirtualProtect(ASource, SIZE, PAGE_EXECUTE_READWRITE, OldProtect) then
  begin
    NewJump := PJump(ASource);
    NewJump.OpCode := JMP_OPCODE;
    NewJump.Distance := Pointer(Integer(ADestination) - Integer(ASource) - 5);

    FlushInstructionCache(GetCurrentProcess, ASource, SizeOf(TJump));
    VirtualProtect(ASource, SIZE, OldProtect, @OldProtect);
  end;
end;

procedure PatchCodeDWORD(ACode: PDWORD; AValue: DWORD);
var
  LRestoreProtection, LIgnore: DWORD;
begin
  if VirtualProtect(ACode, SizeOf(ACode^), PAGE_EXECUTE_READWRITE, LRestoreProtection) then
  begin
    ACode^ := AValue;
    VirtualProtect(ACode, SizeOf(ACode^), LRestoreProtection, LIgnore);
    FlushInstructionCache(GetCurrentProcess, ACode, SizeOf(ACode^));
  end;
end;

procedure OldAfterConstruction;
asm
  call TObject.InitInstance;
end;

{ TCriticalSectionHack }
procedure TObjectHack.DecCounter;
begin
  if (Self.ClassType <> TClassVars) then
    Dec(GetClassVars.InstanceCount);
  OldFreeInstace;
end;

class function TObjectHack.GetClassVars: TClassVars;
begin
  Result := PClassVars(Integer(Self) + vmtAutoTable)^;
end;

class procedure TObjectHack.SetClassVars(AClassVars: TClassVars);
begin
  AClassVars.BaseClassName := Self.ClassName;
  PatchCodeDWORD(PDWORD(Integer(Self) + vmtAutoTable), DWORD(AClassVars));
end;

procedure RegisterClassVarsSupport(const Classes: array of TObjectHack);
var
  LClass: TObjectHack;
  LRestoreProtection: DWORD;
  LIgnore: DWORD;
  LVMT: Pointer;
begin
  for LClass in Classes do
    if LClass.GetClassVars = nil then
    begin
      LClass.SetClassVars(TClassVars.Create);

      //Change de mvt to object mvt
      LVMT := PPointer(Integer(TObject) + vmtFreeInstance)^;
      if VirtualProtect(LVMT, SizeOf(LVMT^), PAGE_EXECUTE_READWRITE, LRestoreProtection) then
      begin
        LVMT :=  @TObjectHack.DecCounter;
        VirtualProtect(LVMT, SizeOf(LVMT^), LRestoreProtection, LIgnore);
        FlushInstructionCache(GetCurrentProcess, LVMT, SizeOf(LVMT^));
      end;
    end
    else
      raise Exception.CreateFmt('Class %s has automated section or duplicated registration.', [LClass.ClassName]);
end;

procedure TObjectHack.IncCounter;
begin
  if (Self.ClassType = TClassVars) then
    Exit;

  if GetClassVars = nil then
    RegisterClassVarsSupport(Self);

  Inc(GetClassVars.InstanceCount);
end;

class function TObjectHack.InitInstance(Instance: Pointer): TObject;
asm
        PUSH    EBX
        PUSH    ESI
        PUSH    EDI
        MOV     EBX,EAX
        MOV     EDI,EDX
        STOSD
        MOV     ECX,[EBX].vmtInstanceSize
        XOR     EAX,EAX
        PUSH    ECX
        SHR     ECX,2
        DEC     ECX
        REP     STOSD
        POP     ECX
        AND     ECX,3
        REP     STOSB
        MOV     EAX,EDX
        MOV     EDX,ESP
@@0:    MOV     ECX,[EBX].vmtIntfTable
        TEST    ECX,ECX
        JE      @@1
        PUSH    ECX
@@1:    MOV     EBX,[EBX].vmtParent
        TEST    EBX,EBX
        JE      @@2
        MOV     EBX,[EBX]
        JMP     @@0
@@2:    CMP     ESP,EDX
        JE      @@5
@@3:    POP     EBX
        MOV     ECX,[EBX].TInterfaceTable.EntryCount
        ADD     EBX,4
@@4:    MOV     ESI,[EBX].TInterfaceEntry.VTable
        TEST    ESI,ESI
        JE      @@4a
        MOV     EDI,[EBX].TInterfaceEntry.IOffset
        MOV     [EAX+EDI],ESI
@@4a:   ADD     EBX,TYPE TInterfaceEntry
        DEC     ECX
        JNE     @@4
        CMP     ESP,EDX
        JNE     @@3
@@5:    MOV     EBX,EAX
        CALL    TObjectHack.IncCounter
        MOV     EAX,EBX
        POP     EDI
        POP     ESI
        POP     EBX
end;

procedure TObjectHack.OldFreeInstace;
asm
  call FOldFreeInstance;
end;

procedure InitFreeInstance;
begin
  FOldFreeInstance := PPointer(Integer(TObject) + vmtFreeInstance)^;
end;

{ TClassVars }

constructor TClassVars.Create;
begin
  ListClassVars.Add(Self);
end;

class procedure TClassVars.SaveToDisk;
var
  LStringList: TStringList;
  i: Integer;
begin                               
  LStringList := TStringList.Create;
  try
    LStringList.Add('CLASS | NUMBER OF INSTANCES');
    for i := 0 to ListClassVars.Count -1 do
      LStringList.Add(TClassVars(ListClassVars.Items[I]).BaseClassName + '|' + IntToStr(TClassVars(ListClassVars.Items[I]).InstanceCount));

    LStringList.SaveToFile(ExtractFilePath(ParamStr(0)) + 'test.txt');
  finally
    FreeAndNil(LStringList);
  end;
end;

initialization
  TClassVars.ListClassVars := TList.Create;
  InitFreeInstance;
  AddressPatch(GetMethodAddress(@OldAfterConstruction), @TObjectHack.InitInstance);

end. 
```

# javascript - 用javascript细分和隔离时间

> ID：10503535
> 
> 赞同：0
> 
> 时间：2012-05-08T17:32:36.213
> 
> 标签：javascript, algorithm, math, time, datejs

我正在为豪华轿车服务制作一个网站，该网站应该为您事先要求的服务提供价格。

常规服务是每分钟 1 美元。但是，从午夜到早上 8 点的所有时间都被视为溢价，费用为 2 美元。

现在，这里是复杂的部分。我需要确定客户在正常时间和保费上支付了多少时间，以便产生价格。

例如。如果服务是从晚上 9 点到凌晨 2 点，客户按 1 美元/分钟支付 3 小时，按 2 美元/分钟支付 2 小时。

如何获得晚上 9 点和凌晨 2 点，并转换为 180 分钟 + 120 分钟？

顺便说一句，我将篡改与[http://code.google.com/p/datejs/](http://code.google.com/p/datejs/)捆绑在一起。但它只是行不通。有没有一种聪明的“数学”方式来做到这一点？

谢谢你们的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:52:37.873

因此，优质时间似乎全部在上午，而非全部在下午，所以只需从 12 中减去他们给出的下午时间，在您的示例中为 12-9，您得到 3 小时，然后将上午的任何时间添加到 0，再次您的示例 0+2，当然是 2 小时。然后乘以 60 得到分钟。一旦您将每个金额乘以所收取的金额，然后将它们加在一起。我会让 am/pm 成为一个切换开关，将每个变量设置为 true/false。

代码可能如下所示：

```
//start_time and end_time are objects that have 2 properties, am/pm
//which is a bool and time which is a int
function calc_time(start_time,end_time){
   var normal_pay;
   var premium_pay;
   if(start_time.pm == true){
     normal_pay = 12 - start_time.time;
     normal_pay = normal_pay * 60;
   } else{
     normal_pay = 0 + start_time.time;
     normal_pay = normal_pay * 60 * 2; //this is premium time the whole night was premium pay
   }

   if(end_time.am == true){
     premium_pay = 0 + end_time.time;
     premium_pay = premium_pay * 60 * 2;
   } else {
     premium_pay = 12 - end_time.time;
     premium_pay = premium_pay * 60; //this is normal time the whole night was normal pay
   }

   return premium_pay + normal_pay;
} 
```

这并不能解决你仍然需要考虑的所有问题，比如分钟，比如他们想在凌晨 3:25 结束，但这并不难。

# codeigniter - CodeIgniter 文件上传黑洞

> ID：10503537
> 
> 赞同：0
> 
> 时间：2012-05-08T17:32:39.537
> 
> 标签：codeigniter, file-upload

我正在尝试以正常方式在 CodeIgniter 2.0.2 中上传单个文件。该`do_upload()`函数返回true，但目录中没有文件出现。目录权限似乎没问题（在运行下面代码中未显示的其他诊断之后），因此文件没有出现在上传目录中是没有意义的。这是控制器和视图代码，直接改编自 CI 文档。

控制器：

```
function do_upload_sql(){
    // create directory
    if (! is_dir(BACKUP_DIR)) {
        mkdir(BACKUP_DIR, 0777);
    }
    // or if it exists and has restricted file permissions, change them
    elseif(fileperms(BACKUP_DIR)!=0777){
        chmod(BACKUP_DIR, 0777);
    }

    $config['upload_path'] = BACKUP_DIR;
    $config['allowed_types'] = 'backup'; // an SQL backup file type
    $config['overwrite'] = TRUE;
    $this->load->library('upload', $config);
    //$this->upload->initialize($config);  //redundant, so commenting out
    if ( ! $this->upload->do_upload())
    {
        $data['action'] = 'c_backup_restore/do_upload_sql';
        $tab_error = array('error' => $this->upload->display_errors());
        $data['error'] = $tab_error['error'];
        $this->load->view('common/header');
        $this->load->view('v_upload_sql', $data);
    }
    else
    {
        echo "success"; // yes it's getting here, but i get no file!
        $data = array('upload_data' => $this->upload->data());
        $file_upload = $data["upload_data"];
        $this->restore_backup($file_upload); // go do something useful with the file
    }
} 
```

看法：

```
<p>Select the backup file</p>
<div class="not_success"><?php echo $error;?></div>
<?php echo form_open_multipart($action);?>
<input type="file" name="userfile" size="30" />
<input type="submit" value="Upload" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:04:04.030

我使用[xDebug profiler](http://xdebug.org/docs/profiler)发现了这个错误。事实证明，`chdir(path)`更下游的原生 php 函数是问题所在。@qwertzman 指向[CI 中路径](http://www.cecilieokada.com/blog/xampp/path-problems-with-codeigniter-on-windows/)的链接可能有助于确定发生挂断的确切原因。

# jquery - jQuery 只循环当前 div

> ID：10503546
> 
> 赞同：0
> 
> 时间：2012-05-08T17:33:13.753
> 
> 标签：jquery, jquery-plugins, jquery-cycle

这是代码：http: [//jsfiddle.net/KTHWd/](http://jsfiddle.net/KTHWd/)

所以基本上所有的div都有相同的类，当我悬停在它上面时，我只想循环当前的div，当我悬停时，当前循环所有的div。

```
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'none',
        speed:    100,
        timeout:  100            
    });

    $('.slideshow').cycle('stop');
});

$(".slideshow").hover(
    function () {
        $(document).ready(function() {
            $('.slideshow').cycle({
                fx: 'none',
                speed:    100,
                timeout:  100            
            });
        });
    },

    function () {
        $('.slideshow').cycle('stop');
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:36:27.023

在悬停事件中，仅在 $(this) 上设置幻灯片。看[小提琴](http://jsfiddle.net/KTHWd/1/)

# windows-phone-7 - 多点触控（不是手势！）在 Windows Phone 设备上不起作用？

> ID：10503548
> 
> 赞同：0
> 
> 时间：2012-05-08T17:33:18.700
> 
> 标签：windows-phone-7, controls, slider, multi-touch, sametime

我读过一些关于它的东西，标准控件（按钮等）不支持多点触控，一次只能使用一个控件。我需要同时使用两个滑块或拖放，除此之外，知道如何做到这一点吗？我实际上必须创建0？如何使用 Touch.FrameReported？它同样适用于 DeltaManipulation？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:18:23.887

手机上的控件有焦点的概念。一次只能有一个控件具有焦点。有些控件支持多点触控交互，有些则不支持。不可能同时与多个控件交互。

如果您需要允许用户同时操作多个控件，则必须创建自己的新控件来模仿这种行为。

# asp.net-mvc-3 - ASP.NET MVC 3 上的移动访问者的动态布局？

> ID：10503554
> 
> 赞同：2
> 
> 时间：2012-05-08T17:33:43.763
> 
> 标签：asp.net-mvc-3, mobile, viewengine, wurfl

我想根据用户是否从移动设备访问网站来动态更改布局。我有几个关于这个主题的问题。

1.  一旦确定布局，但在呈现视图之前，我想更改布局。也就是说，是否有一些我可以使用的钩子，我可以将任何可能存在的嵌套布局更改`layout.cshtml`为“递归”。`layout.mobile.cshtml`

    覆盖`RazorViewEngine`的`CreateView`方法是否足够？它需要一个`masterPath`参数，所以也许我可以实现一个自定义`RazorViewEngine`并覆盖这个方法，对吧？

2.  第二个问题是关于移动浏览器检测。我不太关心特定设备。我只想将桌面与移动设备区分开来。`WURFL`在这种情况下是否有必要？

    检查是不是`Request.Browser.ScreenPixelsWidth`很`ScreenPixelsHeigth`可笑？（因为大多数我要改变的是使用与否`jQuery.mobile`，它是数据属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:35:33.420

此功能内置于 ASP.NET MVC 4 中，因此您可以开箱即用。

Scott Hansleman[在博客](http://www.hanselman.com/blog/NuGetPackageOfTheWeek10NewMobileViewEnginesForASPNETMVC3SpeccompatibleWithASPNETMVC4.aspx)中介绍了如何在 ASP.NET MVC 3 中实现相同功能并为升级做好准备，因为他建议的 NuGet 与 ASP.NET MVC 4 规范兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T01:12:50.890

如果可以，请使用 Darin Dimitrov 指出的 ASP MVC 4。它开箱即用地支持这一点。

如果您卡在 MVC 3 上，以下是我们在产品中的做法：

1) 安装 WURFL

2) 实现一个调用 WURFL 并解析设备能力的 HttpCapabilitiesProvider；东西解决了结果。一定要添加一个名为 isMobileBrowser 的属性（wurfl 公开了这个）

3) 告诉 .NET 使用您的功能提供程序而不是默认的 HttpCapabilitiesBase.BrowserCapabilitiesProvider = new YourBrowserCapabilitiesProvider(_wurflManager);

4）创建一个CustomViewEngine（继承RazorViewEngine）。覆盖 FindPartialView 和 FindView。这些应该查看 controllerContext.RequestContext.HttpContext.Request.Browser.Capabilities["isMobileBrowser"] 并映射到适当的名称，例如 myView.cshtml.mobile。您需要同时解析 viewName 和 masterName。

4.1) 还在CustomViewEngine的FindPartialView & FindView中，搜索搜索~/Views/{0}/{1}和~/Views/Shared/{0}/{1}，其中{0}是控制器（controllerContext.RouteData.GetRequiredString( "controller")) 和 {1} 是您的映射视图名称

4.2) Return return new ViewEngineResult(CreateView(controllerContext, viewPath, masterPath), this);

# ios - iOS CCCrypt kCCDecrypt 使用 kCCAlgorithmAES128

> ID：10503556
> 
> 赞同：2
> 
> 时间：2012-05-08T17:33:50.040
> 
> 标签：ios, commoncrypto

这是代码：

```
- (NSData *) doCipher: (NSData *) plainData key: (NSData *) symmetricKey context:   (CCOperation) encryptOrDecrypt padding: (CCOptions *) pkcs7
{
// Initialization vector; dummy in this case 0's.
uint8_t iv[kChosenCipherBlockSize];
bzero((void *) iv, (size_t) sizeof(iv));

// We don't want to toss padding on if we don't need to
if (encryptOrDecrypt == kCCEncrypt)
{
    if (*pkcs7 != kCCOptionECBMode)
    {
        if ((plainData.length  % kChosenCipherBlockSize) == 0)
            *pkcs7 = 0x0000;
        else
            *pkcs7 = kCCOptionPKCS7Padding;
    }
}
else if (encryptOrDecrypt == kCCDecrypt)
{
    *pkcs7 = 0x0000;
}
else
{
    DLog(@"Invalid CCOperation parameter [%d] for cipher context.", *pkcs7);
    return nil;
}

// Actually perform the encryption or decryption.
NSMutableData *dataOut  = [NSMutableData dataWithLength: plainData.length + kChosenCipherBlockSize];
size_t movedBytes       = 0;

CCCryptorStatus ccStatus = CCCrypt(encryptOrDecrypt,
        kCCAlgorithmAES128,
        *pkcs7,
        symmetricKey.bytes,
        kChosenCipherKeySize,
        iv,
        [plainData bytes],
        [plainData length],
        [dataOut mutableBytes],
        [dataOut length],
        &movedBytes
);

if (ccStatus == noErr)
{
    dataOut.length = movedBytes;
}
else
{
    DLog(@"Problem with encipherment ccStatus == %d", ccStatus);
    return nil;
}

return dataOut;
} 
```

当我在 kCCDecrypt 上使用 kCCOptionPKCS7Padding 时，有时我会收到错误代码 4304。我尝试在 kCCDecrypt 时不使用填充，如此处所述[还有其他人在使用 iOS 5 加密时遇到问题吗？](https://stackoverflow.com/questions/8175947/anyone-else-having-trouble-with-ios-5-encryption) 我没有得到错误。但有时 kCCDecrypt 后的数据长度与 kCCEncrypt 前的原始数据长度不同。我认为这是因为原始数据长度没有乘以编码块大小。

其他人有这个烦恼吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:40:01.930

你不能只是扔掉填充物。留下填充，一切都会好起来的。

另请参阅：[使用 SecKeyWrapper 中断加密 16 字节的 UTF8 (ccStatus == -4304)](https://stackoverflow.com/questions/5884119/encrypting-16-bytes-of-utf8-with-seckeywrapper-breaks-ccstatus-4304)

# python - “文档”对象没有属性“get_uri”

> ID：10503560
> 
> 赞同：0
> 
> 时间：2012-05-08T17:33:55.810
> 
> 标签：python, gedit, gnome-3

我正在努力将一些 Gedit 2 插件移植到 Gedit 3 中，但我遇到了错误，不知`'Document' object has no attribute 'get_uri'`道出了什么问题。对于它的价值，插件的 Gedit 2 版本有效。

```
def view_result(self, widget):
    # Get the selection object
    tree_selection = self.results_list.get_selection()

    # Get the model and iterator for the row selected
    (model, iterator) = tree_selection.get_selected()

    if (iterator):
        # Get the absolute path of the file
        absolute_path = model.get_value(iterator, 3)

        # Get the line number
        line_number = int(model.get_value(iterator, 2)) - 1

        # Get all open tabs
        documents = self.window.get_documents()

        # Loop through the tabs until we find which one matches the file
        # If we don't find it, we'll create it in a new tab afterwards.
        for each in documents:

# This is the line throwing the error:
            if (each.get_uri().replace("file://", "") == absolute_path):
                     # This sets the active tab to "each"
                (self.window.set_active_tab
                    (Gedit.tab_get_from_document(each)))
                each.goto_line(line_number)

                # Get the bounds of the document
                (start, end) = each.get_bounds()

                self.window.get_active_view().scroll_to_iter(end, 0.0)

                x = each.get_iter_at_line_offset(line_number, 0)
                self.window.get_active_view().scroll_to_iter(x, 0.0)

                return

        # If we got this far, then we didn't find the file open in a tab.
        # Thus, we'll want to go ahead and open it...
        self.window.create_tab_from_uri("file://" + absolute_path,
            self.encoding, int(model.get_value(iterator, 2)), False, True) 
```

此外，我的文件中有以下导入行：

```
from gi.repository import Gtk, Gio, GObject, Gedit
import os 
```

我已经尝试在我已经拥有的 Gedit 3 插件中查找类似的行，以查看是否有更改，但是它们具有相同类型的代码，并且搜索 Google 和 StackOverflow 都没有给我任何我可以使用的东西。我是 Python 的新手，这样做是为了学习它，所以我可能会遗漏一些完全明显的东西，但它是什么？

**编辑** `print each, type(each), dir(each)`产生以下内容：

```
<Document object at 0x20ea3c0 (GeditDocument at 0x21d2030)>
<class 'gi.repository.Gedit.Document'> 
['__class__', '__copy__', '__deepcopy__', '__delattr__', '__dict__', '__doc__', '__eq__', '__format__', '__gdoc__', '__ge__', '__getattribute__', '__grefcount__', '__gt__', '__gtype__', '__hash__', '__info__', '__init__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '_get_or_create_tag_table', 'add_mark', 'add_selection_clipboard', 'apply_tag', 'apply_tag_by_name', 'backspace', 'backward_iter_to_source_mark', 'begin_not_undoable_action', 'begin_user_action', 'buffer', 'can_redo', 'can_undo', 'chain', 'connect', 'connect_after', 'connect_object', 'connect_object_after', 'copy_clipboard', 'create_child_anchor', 'create_mark', 'create_source_mark', 'create_tag', 'cut_clipboard', 'delete', 'delete_interactive', 'delete_mark', 'delete_mark_by_name', 'delete_selection', 'deserialize', 'deserialize_get_can_create_tags', 'deserialize_set_can_create_tags', 'disconnect', 'disconnect_by_func', 'do_apply_tag', 'do_begin_user_action', 'do_bracket_matched', 'do_changed', 'do_cursor_moved', 'do_delete_range', 'do_end_user_action', 'do_insert_child_anchor', 'do_insert_pixbuf', 'do_insert_text', 'do_load', 'do_loaded', 'do_loading', 'do_mark_deleted', 'do_mark_set', 'do_modified_changed', 'do_paste_done', 'do_redo', 'do_remove_tag', 'do_save', 'do_saved', 'do_saving', 'do_search_highlight_updated', 'do_undo', 'emit', 'emit_stop_by_name', 'end_not_undoable_action', 'end_user_action', 'ensure_highlight', 'error_quark', 'forward_iter_to_source_mark', 'freeze_notify', 'get_bounds', 'get_can_search_again', 'get_char_count', 'get_compression_type', 'get_content_type', 'get_context_classes_at_iter', 'get_copy_target_list', 'get_data', 'get_deleted', 'get_deserialize_formats', 'get_enable_search_highlighting', 'get_encoding', 'get_end_iter', 'get_has_selection', 'get_highlight_matching_brackets', 'get_highlight_syntax', 'get_insert', 'get_iter_at_child_anchor', 'get_iter_at_line', 'get_iter_at_line_index', 'get_iter_at_line_offset', 'get_iter_at_mark', 'get_iter_at_offset', 'get_language', 'get_line_count', 'get_location', 'get_mark', 'get_max_undo_levels', 'get_metadata', 'get_mime_type', 'get_modified', 'get_newline_type', 'get_paste_target_list', 'get_properties', 'get_property', 'get_readonly', 'get_search_text', 'get_selection_bound', 'get_selection_bounds', 'get_serialize_formats', 'get_short_name_for_display', 'get_slice', 'get_source_marks_at_iter', 'get_source_marks_at_line', 'get_start_iter', 'get_style_scheme', 'get_tag_table', 'get_text', 'get_undo_manager', 'get_uri_for_display', 'goto_line', 'goto_line_offset', 'handler_block', 'handler_block_by_func', 'handler_disconnect', 'handler_is_connected', 'handler_unblock', 'handler_unblock_by_func', 'insert', 'insert_at_cursor', 'insert_child_anchor', 'insert_interactive', 'insert_interactive_at_cursor', 'insert_pixbuf', 'insert_range', 'insert_range_interactive', 'insert_with_tags', 'insert_with_tags_by_name', 'is_local', 'is_untitled', 'is_untouched', 'iter_backward_to_context_class_toggle', 'iter_forward_to_context_class_toggle', 'iter_has_context_class', 'load', 'load_cancel', 'load_stream', 'move_mark', 'move_mark_by_name', 'new', 'new_with_language', 'notify', 'parent_instance', 'paste_clipboard', 'place_cursor', 'priv', 'props', 'redo', 'register_deserialize_format', 'register_deserialize_tagset', 'register_serialize_format', 'register_serialize_tagset', 'remove_all_tags', 'remove_selection_clipboard', 'remove_source_marks', 'remove_tag', 'remove_tag_by_name', 'replace_all', 'save', 'save_as', 'search_backward', 'search_forward', 'select_range', 'serialize', 'set_content_type', 'set_data', 'set_enable_search_highlighting', 'set_highlight_matching_brackets', 'set_highlight_syntax', 'set_language', 'set_location', 'set_max_undo_levels', 'set_modified', 'set_properties', 'set_property', 'set_search_text', 'set_short_name_for_display', 'set_style_scheme', 'set_text', 'set_undo_manager', 'stop_emission', 'thaw_notify', 'undo', 'unregister_deserialize_format', 'unregister_serialize_format', 'weak_ref'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:25:28.500

正如我所怀疑的那样，这很简单。他们更改`Gedit.Document.get_uri()`为`Gedit.Document.get_location()`或`Gedit.Document.get_uri_for_display()`（取决于您的目的）。

对于其他可能在查找 Gedit 文档时遇到问题的人，他们在这里 - [http://developer.gnome.org/gedit/](http://developer.gnome.org/gedit/)

# .net - 如何根据来自转换器的数据对 WPF 数据网格进行排序？

> ID：10503564
> 
> 赞同：2
> 
> 时间：2012-05-08T17:34:13.790
> 
> 标签：.net, wpf

**问题：如何在数据来自转换器的列上对数据网格进行排序？**

我有一个类似于以下的视图模型：

```
public class MyViewModel
{
    public string Name { get; set; }
    public IEnumerable<string> Aliases { get; set; }
} 
```

此外，我有一个自定义转换器，可以`IEnumerable<string>`将`string`.

我的 DataGrid 类似于：

```
<DataGrid ItemsSource="...">
    <DataGrid.Columns>
        <DataGridTextColumn Width="10" Header="..." Binding="{Binding Path=Name}" />
        <DataGridTextColumn Width="10" Header="..." Binding="{Binding Path=Aliases, Converter={StaticResource myConverter}}" />
     ... 
```

到现在为止还挺好。它按预期显示。问题在于排序。

按名称排序时，一切都很好。当按数据来自转换器的列进行排序时，我得到一个 .NET 异常：

> 添加的 SortDescriptions 无效。可能的解决方案是将 Column 上的 CanUserSort 设置为 false，或者使用 Column 上的 SortMemberPath 属性，或者处理 DataGrid 上的 Sorting 事件。

有一个解决方案建议修改视图模型以具有类似于以下内容的属性：

```
public class AliasesMapping
{
    public IEnumerable<string> Raw { get; set; }
    public string Converted { get; set; }
} 
```

但是......我想知道是否有更好或更标准的方法来解决这个问题。感觉就像在这个解决方案中，UI 限制正在渗入 View Model 层。

更新：这是转换器

```
[ValueConversion(typeof(IEnumerable<string>), typeof(string))]
public class AliasFormatConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string converted = string.Empty;
        var val = value as IEnumerable<string>;

        if (val != null)
        {
            var list = new List<string>(val);
            list.Sort();

            converted = string.Join(",", list);
        }

        return converted;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:33:30.837

这未经测试，但无法格式化评论

```
SortMemberPath="FirstString"

Public string FirtString { get { return Aliases[0]; } } 
```

`public string Converted { get; set; }`与您想要摆脱的并没有太大的不同，因此对您来说可能没有太大的价值。我只是说那是我会尝试的。

# c# - 无法弄清楚如何检查生物识别是否存在

> ID：10503565
> 
> 赞同：2
> 
> 时间：2012-05-08T17:34:14.650
> 
> 标签：c#, pinvoke, guid, device, wmi-query

在工作中，我们制作自己的平板电脑。有些平板电脑具有指纹生物识别技术，有些则没有。有时技术人员会忘记将其插入。我还没有找到一种方法来检查该设备（或任何相关设备）是否存在。

我的第一种方法是将 GUID 用于生物识别，即`{53D29EF7-377C-4D14-864B-EB3A85769359`}。我会在注册表中搜索`hklm\system\currontcontrolset\control\class`并检查该键是否存在。

这不起作用，因为即使您从未安装过生物识别，Windows 7 似乎也存在该密钥。它在 XP 中工作，但我刚刚在一个曾经有生物特征的设备上再次尝试，但我把它拿出来了，那个钥匙仍然存在。

这个问题最难的部分是我必须使用 Windows 7、7 嵌入式、xp 和 xp 嵌入式。

下一个想法是使用 WMI，但我找不到要调用的正确类来检查它是否存在。

然后我找到了一个`biometric.dll`，但它只适用于 Windows 7。

有时，找到问题的通用解决方案并不总是那么容易。我正在用 C# 做这个项目，但我愿意将它转换成任何语言。

关于我应该开始寻找的任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:09:30.177

在 Joshua Drake 的帮助下，他给了我一个关于如何解决我的问题的很棒的链接，这些是我的结果：

我要发布的代码有点特殊，因为它会查找特定的 GUID，并且**只**查找第一个。我从有关如何禁用设备的文章中对其进行了改编，尽管此代码不会禁用任何它只是检查存在的东西。

```
 public static bool IsDevicePresent(string guid)
    {
        var info = IntPtr.Zero;
        var NullGuid = new Guid(guid);
        try
        {
            info = SetupDiGetClassDevsW(ref NullGuid,null,IntPtr.Zero,DIGCF_PRESENT);
            CheckError("SetupDiGetClassDevs");
            var devdata = new SP_DEVINFO_DATA();
            devdata.cbSize = (UInt32)Marshal.SizeOf(devdata);
            // Get first device matching device criterion.
            SetupDiEnumDeviceInfo(info,0,out devdata);
            // if no items match filter, throw
            if (Marshal.GetLastWin32Error() == ERROR_NO_MORE_ITEMS)
                CheckError("No device found matching filter.", 0xcffff);
            CheckError("SetupDiEnumDeviceInfo");
        }
        catch
        {
            return false;
        }
        finally
        {
            if (info != IntPtr.Zero)
                SetupDiDestroyDeviceInfoList(info);
        }
        return true;
    }

    private static void CheckError(string message, int lasterror = -1)
    {
        int code = lasterror == -1 ? Marshal.GetLastWin32Error() : lasterror;
        if (code != 0)
            throw new ApplicationException(String.Format("Error disabling hardware device (Code {0}): {1}",code, message));
    } 

    [DllImport("setupapi.dll", SetLastError = true)]
    private static extern IntPtr SetupDiGetClassDevsW([In] ref Guid ClassGuid,[MarshalAs(UnmanagedType.LPWStr)]string Enumerator,IntPtr parent,UInt32 flags);

    [DllImport("setupapi.dll", SetLastError = true)]
    private static extern bool SetupDiDestroyDeviceInfoList(IntPtr handle);

    [DllImport("setupapi.dll", SetLastError = true)]
    private static extern bool SetupDiEnumDeviceInfo(IntPtr deviceInfoSet,UInt32 memberIndex,[Out] out SP_DEVINFO_DATA deviceInfoData);  
    //used to find device info from device manager
    [StructLayout(LayoutKind.Sequential)]
    private struct SP_DEVINFO_DATA
    {
        public UInt32 cbSize;
        public Guid classGuid;
        public UInt32 devInst;
        public IntPtr reserved;
    } 
    private const uint DIGCF_PRESENT = 2;
    private const uint ERROR_INVALID_DATA = 13;
    private const uint ERROR_NO_MORE_ITEMS = 259;
    private const uint ERROR_ELEMENT_NOT_FOUND = 1168; 
```

这是一个简单的单元测试，以证明它适用于第一台设备

```
 [Test]
    public void TestDevicePresent()
    {
        var bluetoothClassGuid = "e0cbf06c-cd8b-4647-bb8a-263b43f0f974";
        var biometricClassGuid = "53D29EF7-377C-4D14-864B-EB3A85769359";
        var cdromdrivClassGiud = "4d36e965-e325-11ce-bfc1-08002be10318";
        Assert.False(Native.IsDevicePresent(bluetoothClassGuid));
        Assert.False(Native.IsDevicePresent(biometricClassGuid));
        Assert.True(Native.IsDevicePresent(cdromdrivClassGiud));
    } 
```

# php - PHP表单未发布到Mysql数据库

> ID：10503566
> 
> 赞同：-3
> 
> 时间：2012-05-08T17:34:17.920
> 
> 标签：php, mysql, lamp

我对 PHP 和 SQL 脚本很陌生，所以这可能是一个我无法弄清楚的简单修复。我有一个名为 InventoryControl 的数据库，其下有一个资产表。出于测试目的，以便我可以解决 PHP 和 SQL，我有一个非常简单的网页，只有一个表单：

```
<form action="insertasset.php" method="post">
Asset Tag: <input type="text" name="assettag" />
<input type="submit" />
</form> 
```

在提交时，它将加载这个 php 脚本：

```
<?php
echo "PHP TEST!";
echo $_POST["assettag"];
$con=mysql_connect("localhost","sampleuser","samplepass");
if (!$con)
  {
  echo "CONNECTION FAILED!";
  die('Could not connect: ' . mysql_error());
  }
echo "I succeeded!";
mysql_select_db("InventoryControl", $con);

$sql="INSERT INTO assets (asset_tag, manufacturer, model, type, location, decomissioned, employee_owner, computer_name, price, day, month, yea$
VALUES
('$_POST[assettag]', asdf, asdf, asdf, 0, 0, asdf, asdf, 0, 0, 0, 0)";
echo "Posted!";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  echo "I didn't work";
  }
echo "1 record added";

mysql_close($con);

?> 
```

我在其中添加了多行 echo 用于测试以查看故障发生的位置，但我遇到的问题是我从运行 PHP 脚本得到的唯一响应是“PHP TEST！” 然后是我刚刚从之前的表格中发布的信息。所以，我知道它正在加载 PHP 脚本，并且它正在从表单中发布数据，但我似乎无法将它放入表中。据我所知，该表对要填充的列没有任何要求（我使用非常基本的参数设置它，asset_tag 是主键，否则它只是保存数据的列）。如果有人可以给新手一些帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:44:51.580

如果您使用 mysql_query() 函数，请像这样使用它：

```
mysql_query("...") or die(mysql_error()); 
```

这样你就会看到错误。

当涉及到您的问题时，您需要在 INSERT INTO 语句中单引号您的值。

但您也可以单引号列名。有时列名可以是特殊关键字，如“order”。

如果将其与 mysql_error() 一起使用，您可以更清楚地看到错误详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T00:51:52.427

```
$asset=$_POST['assettag'];
$sql="INSERT INTO assets VALUES ('".$asset."', 'asdf', 'asdf', 'asdf', 0, 0, 'asdf', 'asdf', 0, 0, 0, 0)";
echo "Posted!";
if (!mysql_query($sql))
{
 die('Error: ' . mysql_error());
 echo "I didn't work";
} 
```

# less - 使用 mixins 使用 LESS css 分配变量

> ID：10503568
> 
> 赞同：2
> 
> 时间：2012-05-08T17:34:30.867
> 
> 标签：less

***是否可以使用较少的***css基于另一个变量分配一个变量？

伪代码：

```
@userpick = red; /* this changes based on user pick */

@color1 = red;
@color2 = blue;

if( @userpick == @color1)
  @systempick = @color2
else( @userpick == @color2)
  @systempick = @color1 
```

我希望能够`@systempick`用作颜色值而不是 CSS 样式。例如：

```
border: 5px dashed @systempick; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-11T20:39:42.710

## 不使用 mixin，但可以解决您的需求

如果将`@userpick`存储为字符串，则可以使用它来访问基于它的另一个变量名（变量变量），如下所示：

**较少的**

```
@userpick: "blue"; /* this changes based on user pick, saved as a string */
@setopposite: "@{userpick}-opp";

//set opposing values
@red-opp: blue;
@blue-opp: red;

@systempick: @@setopposite;

.test {
  color: @systempick;
} 
```

**CSS 输出**（注意如何`blue`输出`#ff0000`，即`red`）

```
/* this changes based on user pick */
.test {
  color: #ff0000;
} 
```

由于您正在处理颜色，因此`@userpick`需要将其保存为字符串，否则，LESS 将自动为其分配一个十六进制值而不是颜色名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:19:16.147

我能够得到我需要的东西，但是这可能不适用于 Less 的 PHP 端口。这有点棘手，因为您只能分配一次变量。关于变量的范围也有一些限制。我还在使用 HSV（色调、饱和度、值）比较颜色值

```
.set_colors(#F00, #00F, #F00); /* pass red, blue and user pick */

.set_colors(@c1, @c2, @u) when (hue(@c1) = hue(@u)) and  (saturation(@c1) = saturation(@u)) and  (lightness(@c1) = lightness(@u)){
    @color1 = @c1;
    @color2 = @c2;
    @userpick = @c1;
    @systempick = @c2;
} 
.set_colors(@c1, @c2, @u) when (hue(@c2) = hue(@u)) and  (saturation(@c2) = saturation(@u)) and  (lightness(@c2) = lightness(@u)){
    @color1 = @c1;
    @color2 = @c2;
    @userpick = @c2;
    @systempick = @c1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:18:13.790

您可以在 mixins 中使用警卫来更改使用的颜色，例如

```
.a when (@userpick = @color1) {
  color: @color2;
}

.a when (@userpick = @color2) {
  color: @color1;
} 
```

您可能会遇到代码重复，但这是获得 if 语句的唯一方法。

其他方法是可能的（例如，如果使用less.js 则使用内联javascript，如果使用dotless，则使用函数插件）但可能有点hacky。

# java - 同时使用两个网络摄像头

> ID：10503572
> 
> 赞同：1
> 
> 时间：2012-05-08T17:35:00.257
> 
> 标签：java, webcam, jmf

我正在尝试使用 JMF 同时获取两个网络摄像头图像。这可能吗？

我得到了地址`vfw://0`，我认为这是默认的网络摄像头，但是如果我将 0 更改为 1，则没有任何反应。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:30:37.793

您必须在不同的初始化过程中为不同的摄像机构建媒体定位器。然后启动每个数据源或播放器。

请注意 vfw://1 用于电视捕获，而不是您的想法。所以在第一个媒体定位器中传递 vfw://0 （代表默认网络摄像头）。在第二个媒体定位器中，传递连接的 USB 摄像头的名称。

# github - github v3 api 创建评论失败

> ID：10503585
> 
> 赞同：0
> 
> 时间：2012-05-08T17:36:16.407
> 
> 标签：github, github-api

我正在尝试使用 Github 的 api 创建评论，但它失败了，我正在寻找调试技巧。

我正在使用 api 文档中列出的 url，它正确地返回了 GET 请求的评论列表。当我尝试执行 POST 请求时，我收到 404 响应。我正在使用来自带有 cors 的浏览器的 Ajax 请求，并且在“授权”标头字段中有一个 OAuth 令牌。

网址如下所示：

```
https://api.github.com/repos/username/repo/commits/sha/comments 
```

帖子正文如下所示：

```
{"body":"hello!","commit_id":"same_as_sha_in_url","line":79,"path":"path/to/file.js","position":2} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:39:07.813

我会回答我自己的问题。这显然是因为我的 OAuth 范围是只读的。将“public_repo”和“repo”添加到我的 OAuth 范围可以解决问题。

# java - 写入 TCP Netty ChannelGroup 中除一个之外的所有内容

> ID：10503586
> 
> 赞同：1
> 
> 时间：2012-05-08T17:36:17.200
> 
> 标签：java, tcp, netty, multicast

我有一个基于 TCP 的 Netty 应用程序，其中有多个需要相互通信的客户端。我将所有 Channel 引用存储在 ChannelGroup 中。

虽然我知道我可以通过调用 ChannelGroup.write 向 ChannelGroup 中的每个客户端写入数据，但是除了其中一个通道之外，写入所有通道的有效方法是什么，例如：

'A','B','C'一起在一个Channel Group中，'A'需要发送给'B'和'C'，'B'需要发送给'A'和'C'等等。最好的方法是什么？以下是我想到的一些选项，但我们将不胜感激：

1.  只需遍历 Group 并单独写入通道（在这种情况下不要使用 ChannelGroup.write）

2.  反复“重新制作/克隆” ChannelGroup，使其仅包含要写入的通道。然后我会在修改后的组上调用 ChannelGroup.write，然后将该组恢复为完整组。

3.  写入所有通道，但实现一些处理程序逻辑以丢弃（在编码或下游处理程序上）并且如果消息来自排除的通道，则不写入消息。

就设计权衡而言，消息尽可能快地发送，ChannelGroups 相对较小，<20 个通道，每个消息的大小约为 1kb（500 字节 - 2kb）。此外，如果不同的逻辑对本地主机反馈效果更好，那么在这种情况下，许多连接与服务器位于同一主机上，我们将不胜感激。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:26:03.360

我不会做#2。据我所知，写入频道组并没有固有的性能优势。如果您查看[DefaultChannelGroup](http://netty.io/docs/stable/xref/org/jboss/netty/channel/group/DefaultChannelGroup.html)的代码，它会简单地遍历已注册的通道，发出写入并收集期货：

```
public ChannelGroupFuture write(Object message) {
         Map<Integer, ChannelFuture> futures =
             new LinkedHashMap<Integer, ChannelFuture>(size());
         if (message instanceof ChannelBuffer) {
             ChannelBuffer buf = (ChannelBuffer) message;
             for (Channel c: nonServerChannels.values()) {
                 futures.put(c.getId(), c.write(buf.duplicate()));
             }
         } else {
             for (Channel c: nonServerChannels.values()) {
                 futures.put(c.getId(), c.write(message));
             }
         }
         return new DefaultChannelGroupFuture(this, futures);
     } 
```

....虽然您确实获得了多路复用未来的好处，但如果您关心完成回调，这很有用。

我也不会做#3，因为你只是给下游处理程序更多的工作要做，丢弃你一开始就费心写的数据。

所以我要么：

1.  实施选项#1
2.  扩展 DefaultChannelGroup 并添加一个足够聪明的 write 方法来跳过相关通道。将频道添加到组时，您可能需要提供更多元数据。

# wordpress - 主要内容标题的 HTML5 语义标记

> ID：10503596
> 
> 赞同：1
> 
> 时间：2012-05-08T17:37:02.080
> 
> 标签：wordpress, html

我再次向你寻求帮助，Stack Overflow。这次我很难理解 HTML5 关于我网站主要内容标题的语义。下面是两个例子，我应该使用哪一个？也许我应该走一条完全不同的路？

**编辑**：我混淆了代码示例！

## 示例 1

使用此代码，我得到如下大纲：

1.  分类： foo
2.  博文#1
3.  博文#2

哪一个看起来不正确，因为博客文章是在该类别下发布的？

```
<header id="header">
    <h1>My awesome website!</h1>
    <!-- Primary navigation and such -->
</header>
<div id="content">
    <section id="title">
        <h1>Category: foo</h1>
        <p>Some content</p>
    </section>
    <article>
        <h1>Blog post #1</h1>
        <p>Some content</p>
    </article>
    <article>
        <h1>Blog post #2</h1>
        <p>Some content</p>
    </article>
</div> 
```

## 示例 2

使用此代码，我得到如下大纲：

1.  分类： foo
    1.  博文#1
    2.  博文#2

这对我来说似乎是正确的，但[HTML5 Doctor](http://html5doctor.com/the-section-element/)说它`<section>`不应该用作主要/主要内容包装器。

另外，如果我要使用此示例，如果主要内容没有自然标题（例如显示所有帖子的索引页面） ，我是否会`<section id="content>`与 a 进行交换？`<div id="content">`

```
<header id="header">
    <h1>My awesome website!</h1>
    <!-- Primary navigation and such -->
</header>
<section id="content">
    <header id="title">
        <h1>Category: foo</h1>
        <p>Some content</p>
    </header>
    <article>
        <h1>Blog post #1</h1>
        <p>Some content</p>
    </article>
    <article>
        <h1>Blog post #2</h1>
        <p>Some content</p>
    </article>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:14:29.380

这可能会对您有所帮助：http: [//visitmix.com/writings/article-vs-section-weve-finally-gone-mad](http://visitmix.com/writings/article-vs-section-weve-finally-gone-mad)

看起来你想要

```
<section id="content">
    <h1>Category: foo</h1>
    <p>Some content</p>
  <article>
    <h1>Blog post #1</h1>
    <p>Some content</p>
  </article>
  <article>
    <h1>Blog post #2</h1>
    <p>Some content</p>
  </article>
</section> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:02:11.533

尝试以老式方式使用 h1-h6 标签。

```
<h1>My awesome website!</h1>

<section> 

    <h2>Category: foo</h2>
    <p>Some content</p>

    <article>
        <h3>Blog post #1</h3>
        <p>Some content</p>
    </article>

   <article>
       <h3>Blog post #2</h3>
       <p>Some content</p>
   </article>
</section>

<section>  
    <h2>Category: bar</h2>
    <p>some content</p>

    <article>
        <h3>Blog post #3</h3>
        <p>Some content</p>
    </article>

    <article>
       <h3>Blog post #4</h3>
       <p>Some content</p>
    </article>
</section> 
```

这类似于[HTML5Doctor 自己](http://html5doctor.com/the-article-element/)的`<section>`包含`<article>`s 的示例。

从技术上讲，您可以用 , 替换`<h2>`and`<h3>`标记`<h1>`，这同样有效。使用 h1-h6 的优点是保持与旧用户代理（尤其是屏幕阅读器）的向后兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:20:43.520

我会像@Patrick McElhaney 所做的那样标记页面——`SECTION`每个类别都有一个。我刚刚添加了另一个名为“内容”的包装器，以允许对子内容元素进行分组。这反映了您的原始布局。

```
<header id="header">
    <h1>My awesome website!</h1>
    <!-- Primary navigation and such -->
</header>

<section id="content">
    <section class="category" id="catFoo">
        <hgroup id="title">
            <h2>Category: Foo</h2>
            <p>Category Description</p>
        </hgroup>
        <article>
            <h3>Blog post #Foo1</h3>
            <p>Some content</p>
        </article>
        <article>
            <h3>Blog post #Foo2</h3>
            <p>Some content</p>
        </article>
    </section>

    <section class="category" id="catBar">
        <hgroup id="title">
            <h2>Category: Bar</h2>
            <p>Category Description</p>
        </hgroup>
        <article>
            <h3>Blog post #Bar1</h3>
            <p>Some content</p>
        </article>
    </section>
</section> 
```

# html - CSS居中幻灯片图像

> ID：10503600
> 
> 赞同：1
> 
> 时间：2012-05-08T17:37:27.007
> 
> 标签：html, css, alignment, slideshow, centering

我在水平居中幻灯片图像时遇到问题，以便它们在所有屏幕尺寸/分辨率上居中。

HTML 看起来像这样

```
<div id='banner'>
    <div class='slides_container'>
        <div>
            <a href='#'><img src='images/banner.png'></a>
        </div>
        <div>
            <a href='#'><img src='images/banner2.png'></a>
        </div>
    </div>
</div> 
```

与此匹配的 CSS 是：

```
#banner {
    width:100%;
    margin-bottom:50px;
}

.slides_container {
    width:100%;
    height:500px;
}

.slides_container div {
    width:1100px;
    height:500px;
    text-align:center;
} 
```

我真的很难让图像在所有屏幕尺寸上居中，因为填充和边距不起作用我需要一种不同的方法！

任何答复都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:48:11.920

通常他们`margin:0 auto;`用来处理这个问题。`text-align`不会对你有好处`div`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:55:56.160

添加`.slides_container img`和`margin:0 auto`

```
#banner { width:100%; margin-bottom:50px; }

.slides_container {
    width:100%;
    height:500px;
}

.slides_container div, .slides_container img {
    width:1100px;
    height:500px;
    text-align:center;
    margin:0 auto; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:20:34.700

您应该确保`.slides_container div`在其父级中居中，即

```
.slides_container div { 
  margin: 0px auto; // center
  width:1100px; 
  height:500px; 
  text-align:center; 
} 
```

如果这不起作用，您需要确保父容器的宽度为页面的 100%。

如果父级不是页面的 100% 宽度，则父级还需要具有此属性：

```
.slides_container {
    margin: 0px auto;
} 
```

如果这不起作用，那么您需要确保其父级是页面的 100% 宽度。

希望这可以帮助。

# 编辑

我在FireBug中看了一眼，马上就发现slide容器设置为3800px宽，而里面的div没有设置宽度。如果将幻灯片容器内的 div 设置为 100% 宽度，它将导致它变为 3800px 宽，这样就不起作用了。

根据您使用的脚本的性质，它使用绝对定位的 div 来工作。所以`margin: 0px auto`不会在这里工作。

解决方案是一些 javascript 来运行 onload，并在窗口调整大小时，将保存图像的 div 设置为浏览器窗口的宽度，以及 text-align: center。例如，因为我有 1280px 宽的显示器，所以这为我将图像居中：

```
.slides_control div {
    width: 1280px;
    text-align: center;
} 
```

# wpf - 关于文本框的问题

> ID：10503601
> 
> 赞同：0
> 
> 时间：2012-05-08T17:37:30.797
> 
> 标签：wpf, data-binding

我有两个绑定到同一个属性的文本框。一个文本框用于原始文本，第二个文本框用于新文本。我遇到的问题是，当第一个文本框的文本被提交时，它会返回原始文本。但是当我输入第二个文本框来更新名称时，这会自动覆盖第一个文本框文本中的内容。我只是想知道是否有办法阻止它，所以我将显示原始文本和新文本。

```
 <TextBox Name="txtOriginalName" 
             HorizontalAlignment="Right" VerticalAlignment="Top" 
             Width="524" Height="auto" TextWrapping="Wrap"  
             AcceptsReturn="True" HorizontalScrollBarVisibility="Auto" 
             Text="{Binding Path=Person.Name}"/>

   <TextBox Name="txtNewName" 
            HorizontalAlignment="Right" VerticalAlignment="Top" 
            Width="524" Height="auto" TextWrapping="Wrap" AcceptsReturn="True" 
            HorizontalScrollBarVisibility="Auto" 
            Text="{Binding Path=Person.Name}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:47:47.943

尝试`Text="{Binding Path=Person.Name, Mode=OneTime}"`txtOriginalName，然后txtOriginalName将被初始化为Person.Name中的值，但稍后Person.Name更改时不会更新。

这是一个有用的装订[备忘单](http://www.nbdtech.com/Free/WpfBinding.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:58:47.460

理想情况下，您有一个 PersonViewModel，它具有单独的 OriginalName 和 NewName 属性，并带有一些触发条件来确定基础 Person.Name 何时更新。如果某些名称条目无效，这还允许您放置 UI 级别的验证逻辑（带有关联的反馈）。您实质上是将更新名称的过程（使用新/原始名称的概念）与包含名称的过程分离。前者可以处于名称正在变化的状态，而后者只是有一个名称。

# mercurial - 重命名 Mercurial 中的已提交分支

> ID：10503602
> 
> 赞同：8
> 
> 时间：2012-05-08T17:37:33.037
> 
> 标签：mercurial, branch

Mercurial - 在创建分支并提交到（本地和中央存储库中）后完成重命名分支的步骤是什么。

例如，我创建了一个名为 Zelda 的分支，然后提交并推送到中央存储库。我现在想将分支的名称更改为 Triforce。

有没有一个扩展可以做到这一点？除了任何扩展解决方案之外，还有什么长的路要走？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T01:01:47.050

简短的回答是**否定**的。

长答案是，Mercurial 分支是附加到变更集的*名称。*如果您有多个变更集提交到分支*zelda*并被放弃（即，推送到中央仓库），那么您无法在不重新创建这些变更集的情况下重命名该分支，这意味着重写历史。

即使您在 repo 和中央 repo 中都剥离了这些变更集，然后将它们重新创建为属于*triforce*分支，并再次推送“重命名”分支，您的所有协作者最终都会拥有两个变更集副本, 一套在 zelda 分支上, 另一套在*分支*triforce*上*。

 *所以是的，你应该做的在[https://stackoverflow.com/a/7245187/67988](https://stackoverflow.com/a/7245187/67988)中有描述。从那里引用，调整为您的分支名称，即*zelda*是要关闭的旧分支，而*triforce*是要创建的新分支。

```
hg update zelda
hg commit --close-branch -m "mgmt: Close branch zelda"
hg branch triforce
hg commit -m "mgmt: Create branch triforce"
hg push --new-branch 
```

**PS**如果还没有其他人从中央回购中撤出，您可以尝试从那里剥离*zelda 。*或者，如果您可以访问所有其他开发人员的 PC（假设是受控环境），并且真的想走一条非常危险的道路，您可以从所有 repos 中删除这个分支。这绝对不是好的做法，只能作为最后的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:56:47.320

[mutable-branches 扩展](http://mercurial.selenic.com/wiki/MutableBranches)可以给人一种重命名分支的错觉。*

# jquery - jcarousel 打开项目加载而不是点击

> ID：10503605
> 
> 赞同：0
> 
> 时间：2012-05-08T17:37:37.933
> 
> 标签：jquery, jcarousel

我只希望这个 jcarousel 在加载“li img”时打开链接，而不是点击唱片页面。我是一名学习 jQuery 的设计师。请跟我走轻松。这是我的第一个问题。:)

```
$(function () {
    /**
     * build the carousel for the Albums
     */
    $('#mp_albums').jcarousel({
        scroll: 1,
        wrap: 'both',
    }).children('li').bind('click', function () {
        //when clicking on an Album, display its info, and hide the current one
        var $this = $(this);
        $('#mp_content_wrapper').find('.mp_content:visible').hide();

        $('#mp_content_wrapper').find('.mp_content:nth-child(' + parseInt($this.index() + 1) + ')').fadeIn(1000);

    });

}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:39:03.440

我使用[这个 jCarousel 页面](http://sorgalla.com/projects/jcarousel/examples/static_callbacks.html)作为查找适当回调的参考。看起来你想要 itemVisibleInCallback。这应该让你开始。如果您有任何问题/疑问，请告诉我，我们可以编辑我的答案。

```
$(function () {
    /**
     * build the carousel for the Albums
     */
    $('#mp_albums').jcarousel({
        scroll: 1,
        wrap: 'both',
        itemVisibleInCallback: {
            onAfterAnimation: openInfo
        }
    });

    function openInfo(carousel, item, idx, state){
        //when clicking on an Album, display its info, and hide the current one
        var $this = $(item);
        $('#mp_content_wrapper').find('.mp_content:visible').hide();

        $('#mp_content_wrapper').find('.mp_content:nth-child(' +    parseInt($this.index() + 1) + ')').fadeIn(1000);
    }
}); 
```

# jquery - 在页面加载时滚动到 Div 的底部（jQuery）

> ID：10503606
> 
> 赞同：259
> 
> 时间：2012-05-08T17:37:39.740
> 
> 标签：jquery, html

我的页面上有一个 div：

```
<div id='div1' style='overflow:scroll;overflow-x:hidden;max-height:200px;'></div> 
```

如何使 div 滚动到 div 的底部？不是页面，只是 DIV。

* * *

## 回答 #1

> 赞同：680
> 
> 时间：2012-07-18T22:40:21.170

这里的其他解决方案实际上不适用于具有大量内容的 div——它“最大化”向下滚动到 div 的高度（而不是 div*内容*的高度）。所以它们会起作用，除非你的内容是 div 高度的两倍以上。

这是正确的版本：

```
$('#div1').scrollTop($('#div1')[0].scrollHeight); 
```

或 jQuery 1.6+ 版本：

```
var d = $('#div1');
d.scrollTop(d.prop("scrollHeight")); 
```

或动画：

```
$("#div1").animate({ scrollTop: $('#div1').prop("scrollHeight")}, 1000); 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2014-01-25T17:35:19.243

我在这里看到的所有答案，包括当前“接受”的答案，实际上都是错误的，因为它们设置了：

```
scrollTop = scrollHeight 
```

而正确的方法是设置：

```
scrollTop = scrollHeight - clientHeight 
```

换句话说：

```
$('#div1').scrollTop($('#div1')[0].scrollHeight - $('#div1')[0].clientHeight); 
```

或动画：

```
$("#div1").animate({
  scrollTop: $('#div1')[0].scrollHeight - $('#div1')[0].clientHeight
}, 1000); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-08T17:44:22.883

更新：请参阅[Mike Todd 的解决方案](https://stackoverflow.com/a/11551414/1065525)以获得完整的答案。

* * *

```
$("#div1").animate({ scrollTop: $('#div1').height()}, 1000); 
```

如果你想让它动画化（超过 1000 毫秒）。

```
$('#div1').scrollTop($('#div1').height()) 
```

如果你想要它瞬间。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-05-08T17:40:38.410

```
$(window).load(function() {
  $("html, body").animate({ scrollTop: $(document).height() }, 1000);
}); 
```

这会抓取页面的高度并在窗口加载后向下滚动。页面准备好后，将其更改`1000`为您需要更快/更慢执行的任何操作。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-01-06T19:44:02.557

这些都不适合我，我在一个类似于 Facebook Messenger 的网络应用程序中有一个消息系统，并希望消息出现在 div 的底部。

这是一种享受，基本的 Javascript。

```
window.onload=function () {
     var objDiv = document.getElementById("MyDivElement");
     objDiv.scrollTop = objDiv.scrollHeight;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-05-08T17:41:38.007

试试这个：

```
$('#div1').scrollTop( $('#div1').height() ) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-07-05T03:46:01.047

以下将起作用。请注意`[0]`和`scrollHeight`

```
$("#myDiv").animate({ scrollTop: $("#myDiv")[0].scrollHeight }, 1000); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-11-26T05:32:45.247

将窗口滚动到目标 div 的底部。

```
function scrollToBottom(id){
  div_height = $("#"+id).height();
  div_offset = $("#"+id).offset().top;
  window_height = $(window).height();
  $('html,body').animate({
    scrollTop: div_offset-window_height+div_height
  },'slow');
}

scrollToBottom('call_div_id'); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-05-18T16:05:16.353

用于 jquery 中的动画（版本 > 2.0）

```
var d = $('#div1');
d.animate({ scrollTop: d.prop('scrollHeight') }, 1000); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-01-08T16:22:18.867

我正在尝试迁移到 Vue 的遗留代码库中工作。

在我的特定情况下（包含在引导模式中的可滚动 div），v-if 显示了新内容，我希望页面向下滚动到该内容。为了让这个行为起作用，我不得不等待 vue 完成重新渲染，然后使用 jQuery 滚动到模态框的底部。

所以...

```
this.$nextTick(function() {
    $('#thing')[0].scrollTop = $('#thing')[0].scrollHeight;
}) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-12-29T09:36:42.487

您可以使用下面的代码在页面加载时滚动到 div 的底部。

```
$(document).ready(function(){
  $('div').scrollTop($('div').scrollHeight);
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-09T17:28:46.930

您可以使用 scrollTop 检查 scrollHeight 和 clientHeight 以滚动到 div 的底部，如下面的代码。

```
$('#div').scroll(function (event) {
  if ((parseInt($('#div')[0].scrollHeight) - parseInt(this.clientHeight)) == parseInt($('#div').scrollTop())) 
  {
    console.log("this is scroll bottom of div");
  }

});
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-02-18T05:40:00.060

当页面加载时，滚动是最大值。

这是用户发送消息时的消息框，然后始终向下显示最新聊天，因此滚动值始终为最大值。

```
$('#message').scrollTop($('#message')[0].scrollHeight); 
```

[看图片](http://prntscr.com/r3v53p)

# android - 在Android中更改意图后保留菜单？

> ID：10503610
> 
> 赞同：0
> 
> 时间：2012-05-08T17:38:06.637
> 
> 标签：android, android-intent, menu

所以，我在一个有菜单的活动中，在同一个活动中，我转到另一个类中定义的意图（图表），我希望能够在新意图中显示相同的菜单（不是活动）..有没有可能的方法来做到这一点？

这是我的代码的快照：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu2, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case R.id.fatgraph:

        FatActivity line = new FatActivity();
        Intent lineIntent = line.getIntent(StatsActivity.this);
        startActivity(lineIntent); 
```

这是创建的意图：

```
public class FatActivity {

int[] colors = new int[] { Color.rgb(46, 139, 87),
        Color.rgb(25, 25, 112), 
        Color.rgb(127, 121, 127) };

public Intent getIntent(Context context) {

    XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    renderer.setColor(R.color.LimeGreen);
    mrenderer.addSeriesRenderer(renderer);
    mrenderer.setChartTitle("Fat expenditure");
    mrenderer.setChartTitleTextSize(20);
    mrenderer.setXTitle("sessions");
    mrenderer.setLegendTextSize(20);
    mrenderer.setYTitle("Fat in grams");
    renderer.setColor(colors[1]);
    mrenderer.setYAxisMax(120);
    mrenderer.setYAxisMin(0);
    mrenderer.setZoomEnabled(false);
    mrenderer.setShowGrid(true);
    mrenderer.setLabelsTextSize(25);

    DatabaseAdapter dba = new DatabaseAdapter(context);
    dba.open();

    Intent intent = ChartFactory.getLineChartIntent(context,
            dba.getFatDataset(), mrenderer, "line graph");
    dba.close();

    return intent;

} 
```

}

# php - 在 phpMyAdmin 中创建只读用户

> ID：10503614
> 
> 赞同：7
> 
> 时间：2012-05-08T17:38:48.523
> 
> 标签：php, mysql, phpmyadmin

我正在尝试创建一个只能从数据库读取的用户。这是 phpMyAdmin 上的用户创建屏幕。对于第一组 ( `Data`)，我想我只需要`SELECT`. 但我不确定第二组和第三组（`Structure`和`Administration`）。一些选项`Event` `Trigger` `Execute`有点令人困惑。我需要那些只读用户吗？我究竟需要启用/禁用什么？

![在此处输入图像描述](../Images/67e0127a9ea9beea330cca51e3043c26.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T17:43:55.600

如果用户只能读取数据库，则不应授予他们“结构”或“管理”下列出的**任何权限。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T17:48:12.327

第一部分只是关于管理表的数据，您只需要`SELECT`拥有只读用户的权限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T17:43:43.813

禁用“结构”和“管理”中的所有内容。赋予一个人对表/数据库的只读权限，同时让他们能够完全破坏同一个表/数据库是没有意义的。

# wix - 如何指定自定义操作仅在 Windows 安装程序中从特定版本升级运行？

> ID：10503617
> 
> 赞同：1
> 
> 时间：2012-05-08T17:39:11.357
> 
> 标签：wix, windows-installer

有没有办法检查 Windows 安装程序正在升级的产品版本，例如，指定的自定义操作仅在从某些版本升级时运行？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:28:09.620

是的，您可以创建一个文件搜索来检查特定版本并设置您可以在自定义操作条件中使用的属性。请参阅[http://wix.sourceforge.net/manual-wix3/check_the_version_number.htm](http://wix.sourceforge.net/manual-wix3/check_the_version_number.htm)以获得很好的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:56:55.550

您需要使用自定义公共属性定义升级规则，这里有更多详细信息：[如何实现 WiX 安装程序升级？](https://stackoverflow.com/questions/114165/how-to-implement-wix-installer-upgrade) 然后使用此属性创建所需的条件。

# java -

> ID：10503618
> 
> 赞同：2
> 
> 时间：2012-05-08T17:39:11.660
> 
> 标签：java, android

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T17:41:33.487

`List`是一个接口，所以你不能实例化它（调用`new List()`），因为它没有具体的实现。为简单起见，请使用[现有实现](http://docs.oracle.com/javase/tutorial/collections/implementations/index.html)之一，例如：

```
List<Data> dat = new ArrayList<Data>(); 
```

然后你可以像这样使用它：

```
Data data = new Data();
//initialise data here
dat.add(data); 
```

您可能会从阅读[Java 集合教程中](http://docs.oracle.com/javase/tutorial/collections/index.html)受益。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:50:49.277

```
List<Data> lsData = new ArrayList<Data>();

for(int i=0;i<5;i++)
{
    Data d = new Data();
    d.fname="fname";
    d.lname="lname";
    lsData.add(d);
} 
```

你的数据类（总是做一个 Bean 类来管理数据）

```
public class Data
{
  public Data()
  {
  }
  public String fname,lname;
} 
```

您还可以获取特定位置的数据

```
String fname = lsData.get(2).fname;
String lname = lsData.get(2).lname; 
```

# c# - BackgroundUploader 抛出 COMException: ERROR_INTERNET_LOGIN_FAILURE

> ID：10503621
> 
> 赞同：0
> 
> 时间：2012-05-08T17:39:29.710
> 
> 标签：c#, windows-8, windows-runtime, .net-4.5

我尝试上传一张图片（由 FileOpenPicker 选择），但它不起作用。

我的代码：

```
var openpicker = new FileOpenPicker();
openpicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
openpicker.FileTypeFilter.Add(".jpg");
openpicker.FileTypeFilter.Add(".png");
var file = await openpicker.PickSingleFileAsync();

var uploader = new Windows.Networking.BackgroundTransfer.BackgroundUploader();

PasswordCredential pw = new PasswordCredential();
pw.Password = "mypw";
pw.UserName = "user";

uploader.ServerCredential = pw;

uploader.Method = "POST";
var uri = new Uri("ftp://myaddress/Directory/");

var str = await file.OpenAsync(Windows.Storage.FileAccessMode.Read);
await uploader.SetSourceStreamAsync(str);
uploader.SetRequestHeader("Filename", "image2.jpg");
var upload = uploader.CreateUpload(uri);

var result = (await upload.StartAsync()).GetResponseInformation().StatusCode; 
```

我在最后一行得到以下异常：

> System.Runtime.InteropServices.COMException (0x80072EEF)：来自 HRESULT 的异常：
> System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess（任务任务）
> 处的 0x80072EEF System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotificat‌​ion（任务任务）

0x80072EEF 是 ERROR_INTERNET_LOGIN_FAILURE：

> “连接和登录 FTP 服务器的请求失败。”

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T15:59:40.003

我有同样的问题。尽管这个问题有点老了，但我在寻找答案时被引导到这里。

我发现[这里](http://blog.thomaslebrun.net/2012/08/windows-8-how-to-download-files-from-ftp/#.UY0XqrVT4RY)描述的内容对我有用。基本上，BackgroundDownloader 在设置其 ServerCredentials 时似乎失败了......

# xml - 如何使用 VBscript 处理位于一个文件中的多行 xml 代码行

> ID：10503623
> 
> 赞同：-1
> 
> 时间：2012-05-08T17:39:34.980
> 
> 标签：xml, vbscript

所以基本上我的xml文件有多行xml代码，即

```
 <?xml version="1.0" encoding="UTF-8"?> <Stuff>... </stuff>
   <?xml version="1.0" encoding="UTF-8"?> <Stuff>... </stuff>
   ...
  <?xml version="1.0" encoding="UTF-8"?> <Stuff>... </stuff> 
```

而我想要做的是改变我的 vbscript 可以在这些代码行之一上运行以在它们上运行，我将如何去做呢？

编辑：我正在更改节点的值，并在所有代码行中统一更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:19:53.653

您的第一个问题是访问该文件。由于 VBScript/FileSystemObject 不支持 UTF-8 读/写，您可能必须使用 ADODB.Stream。如果每一行都包含一个格式正确/有效的 XML 文档 -`<Stuff> ... </stuff>`只是一个错字 - 您必须使用 .LoadXml 将字符串/行提供给 Msxml2.DOMDocument。然后您可能可以应用您的“更改节点”代码。

添加：

显示方法的概念证明代码：

```
 Dim sIFSpec : sIFSpec = goFS.GetAbsolutePathName("..\data\01.xml")
  Dim sOFSpec : sOFSpec = goFS.GetAbsolutePathName("..\data\01-1.xml")
  Dim oXD     : Set oXD = CreateObject("Msxml2.DOMDocument")
  Dim sXPath  : sXPath  = "/stuff/name"
  Dim aLines  : aLines = Split(readAllFromFileUTF8(sIFSpec), vbCrLf)
  WScript.Echo Join(aLines, vbCrLf)
  Dim nLine, sLine, ndFnd
  For nLine = 0 To UBound(aLines)
      sLine = aLines(nLine)
      If "" <> sLine Then
         oXD.LoadXml sLine
         Set ndFnd = oXD.selectSingleNode( sXPath )
         If ndFnd Is Nothing Then
            WScript.Echo "|", sXPath, "| not found"
         Else
            WScript.Echo "found   |" & ndFnd.text & "|"
            ndFnd.text = "Ekkehard Hörner"
            aLines(nLine) = Replace(oXD.xml, vbCrLf, "")
         End If
      End If
  Next
  writeAllToFileUTF8 sOFSpec, Join(aLines, vbCrLf)
  WScript.Echo Join(aLines, vbCrLf) 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?> <stuff><num>1</num><name>Hörner</name></stuff>
<?xml version="1.0" encoding="UTF-8"?> <stuff><num>2</num><name>Hörner</name></stuff>
<?xml version="1.0" encoding="UTF-8"?> <stuff><num>3</num><name>Hörner</name></stuff>

found   |Hörner|
found   |Hörner|
found   |Hörner|

<?xml version="1.0"?><stuff><num>1</num><name>Ekkehard Hörner</name></stuff>
<?xml version="1.0"?><stuff><num>2</num><name>Ekkehard Hörner</name></stuff>
<?xml version="1.0"?><stuff><num>3</num><name>Ekkehard Hörner</name></stuff> 
```

Function`readAllFromFileUTF8`和 Sub 留作`writeAllToFileUTF8`练习。

# data-access-layer - DAL 设计：处理对数据库中 2 个或更多表的访问？

> ID：10503624
> 
> 赞同：0
> 
> 时间：2012-05-08T17:39:42.847
> 
> 标签：data-access-layer

我目前正在开发 php，但这个问题应该与语言无关。

对于 DB 访问，我一直听到人们提倡“每个表一个类”的做法，所以我想知道在哪里放置同时访问 2 个或更多表的访问方法（例如，使用 JOIN）。我可以想到3种方法来解决这个问题：

1.  为 2 个表的组合创建一个单独的类
2.  将访问方法放在两个表的类中
3.  让 BLL 分别调用每个 db 类并编写自定义逻辑以获得您需要的内容（即在 SQL 之外进行连接）

最佳做法是什么，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:04:33.583

在您的三个选项中，1 个是最好的。只要里面没有太多的业务逻辑。请注意，“太多”是主观的。另一种选择是创建一个组合这两个表的数据库视图。然后，您为此创建一个类，就好像它是一个表一样。

# javascript - 如何使用 MSFT AJAX 库客户端（Sys 命名空间）获取希伯来日历中显示的日期？

> ID：10503627
> 
> 赞同：3
> 
> 时间：2012-05-08T17:39:49.303
> 
> 标签：javascript, calendar

我想显示带有文化“he-IL”和希伯来日历的日期，但我没有成功。我得到以下信息：

预期： יום שלישי ט"ז אייר תשע"ב

实际： יום שלישי 08 שבט 2012

只有一部分日期被正确显示，任何想法为什么会发生这种情况？这是一个使用 C# 的示例（它正确显示日期）和另一个使用 Javascript 的示例（它没有正确显示日期）：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent" >
<script type="text/javascript">
    function foo() {
        var d = new Date();
        var p = document.getElementById("txtHebrewDateJS");
        p.value = d.localeFormat(Sys.CultureInfo.CurrentCulture.dateTimeFormat.LongDatePattern);
    }
</script>
<asp:Label runat="server" Text="Hebrew calendar, culture he-IL, using code behind" />
<asp:TextBox runat="server" ID="txtHebrewDate" />
<br />
<asp:Label ID="Label1" runat="server" Text="Hebrew calendar, culture he-IL, using asp net ajax" />
<asp:TextBox runat="server" ClientIDMode="Static" ID="txtHebrewDateJS"  />
<br />
<asp:Button runat="server" Text="load hebrew date" onclientclick="foo();" /> 
```

后面的代码：

```
using System;
using System.Globalization;
using System.Threading;

public partial class _Default : System.Web.UI.Page {
    protected void Page_Load(object sender, EventArgs e) {
        txtHebrewDate.Text = DateTime.Now.ToString(Thread.CurrentThread.CurrentCulture.DateTimeFormat.LongDatePattern);
    }

    protected override void InitializeCulture() { 
        var c = new System.Globalization.CultureInfo("he-IL"); 
        c.DateTimeFormat.Calendar = new HebrewCalendar(); 
        Thread.CurrentThread.CurrentCulture = c; 
        Thread.CurrentThread.CurrentUICulture = c; 
        base.InitializeCulture(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-31T02:06:23.593

```
public string HebrewDate(string dateString)
  {
   DateTime date = DateTime.Parse(dateString);             

   var ci = CultureInfo.CreateSpecificCulture("he-IL");
   ci.DateTimeFormat.Calendar = new HebrewCalendar();
   return date.ToString("D", ci);
  } 
```

如果您不想显示星期几，您可以更改行：

```
return date.ToString("D", ci); 
```

进入：

```
return date.ToString("d", ci); 
```

来源：[Shimmy 对 C# 和 iOS 编程博客的评论](http://csharpprogramming.blogspot.co.il/2005/03/c-hebrew-date.html)

# javascript - Javascript函数没有在“小提琴”中被调用

> ID：10503631
> 
> 赞同：7
> 
> 时间：2012-05-08T17:40:03.877
> 
> 标签：javascript, jsfiddle

我做了这个简短的小提琴：http: [//jsfiddle.net/NZnN2/](http://jsfiddle.net/NZnN2/)。为什么单击按钮时没有弹出警报？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T17:41:24.683

因为您的 JavaScript 代码位于`onload`处理程序中，这意味着`display_message`它不是全局的，因此 HTML 无法访问。

由于您选择了`onLoad`，您的 JavaScript 将像这样注入到页面中：

```
window.addEvent('load', function() {
    function display_message(){
        alert("woohoo!");
    }
}); 
```

如您所见，`display_message`只能在该匿名函数内部访问。要使示例工作，请更改`onLoad`为`no wrap (head)`或`no wrap (body)`（在页面左侧）。

工作示例：http: [//jsfiddle.net/NZnN2/8/](http://jsfiddle.net/NZnN2/8/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:48:15.567

代替

```
function display_message() {
    alert('woohoo!');
} 
```

做

```
display_message = function () {
    alert('woohoo!');
} 
```

# eclipse - aptana 编写代码时负载很重

> ID：10503636
> 
> 赞同：1
> 
> 时间：2012-05-08T17:40:28.833
> 
> 标签：eclipse, aptana, cpu-usage

Aptana 非常慢，并且在我的电脑（Core2Quad，8gb 内存）上的 CPU 使用率很高。

启动时，我需要几分钟才能“使用”它。它在构建工作区和索引 php 上挂了很长时间。（最多 5 分钟或更长时间）

我正在使用 ~70k LOC 项目和 SVN（.svn 文件夹）。

但主要问题是，当我编写代码时，aptana 挂起。

例如：

```
 public function test ( 
```

- 短暂的思考，它挂起（也许代码荧光笔/失败检查有问题？）

我已经使用“-vmargs -Xmx1024m -Xms512m”启动 Aptana，它使用 ~300-400MB RAM。但是 CPU 使用率平均占我四核的 15-20% ..

任何人都有解决方案的想法，即。设置选项左右，以解决该性能问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:56:56.113

尝试创建一个新的工作区。可能您的 Aptana 配置已损坏。

要创建新工作区：

1.  文件->切换工作区->其他
2.  选择一个新路径，例如：C:\Users\myname\My Documents\Aptana Studio 3 Workspace2
3.  重新开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:22:15.377

我不确定您正在使用的版本是什么，但您也可以按照 preview.appcelerator.com 的说明更新到最新版本。

性能改进一直在进行。此外，检查您的错误日志（通过帮助菜单）。可能还有其他事情可以暗示这个问题。

# android - 是否有为网络应用指定主屏幕图标的 Android 标准？

> ID：10503638
> 
> 赞同：0
> 
> 时间：2012-05-08T17:40:44.110
> 
> 标签：android, web-applications

Apple 定义了与 rel="apple-touch-icon[-precomposed]" 链接的 57x57 像素图像。我很难弄清楚是否有任何适用于 Android 生态系统的标准等效项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:46:43.030

是的，它是：

[http://developer.android.com/guide/practices/ui_guidelines/icon_design.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)

[http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)

# batch-file - 批处理：在文本文件中重新排序数字

> ID：10503642
> 
> 赞同：2
> 
> 时间：2012-05-08T17:41:06.137
> 
> 标签：batch-file, text-manipulation, number-manipulation

我有一个包含菜单和命令列表的 .txt 文件。我想要做的是逐步运行这个 .txt 文件的每一行，检查数字，然后从以前的值增加它。因此，这是该文件的示例部分：

```
menu1=do something
cmd1=cd \\somewhere
menu2=do something
cmd2=cd \\somewhere
menu3=do something
cmd3=cd \\somewhere
menu1=do something
cmd1=cd \\somewhere
menu2=do something
cmd2=cd \\somewhere
menu3=do something
cmd3=cd \\somewhere 
```

请注意菜单编号如何从 1 计数到 3，然后在中途再次恢复为 1。

不幸的是，他们需要像下面这样继续增加。

```
menu1=do something
cmd1=cd \\somewhere
menu2=do something
cmd2=cd \\somewhere
menu3=do something
cmd3=cd \\somewhere
menu4=do something
cmd4=cd \\somewhere
menu5=do something
cmd5=cd \\somewhere
menu6=do something
cmd6=cd \\somewhere 
```

有没有办法使用批处理文件来实现这一点？我对此并不陌生，但解析字符串、获取数字、将其与变量进行比较，然后替换它被证明是困难的。你能指出我正确的方向吗？谢谢你。

# 解决方案

```
setlocal DisableDelayedExpansion

set menuNr=1
(
  for /F "tokens=1,2* delims==" %%a in (MyFile.txt) do (
    set "prefix=%%a"
    set "rest=%%b"
    call :processLine
  ) 
)
move /y temp.txt MyFile.txt
exit /b

:processLine
setlocal EnableDelayedExpansion

if "!prefix:~0,4!"=="menu" (
  set "prefix=menu!menuNr!"
)
if "!prefix:~0,3!"=="cmd" (
  set "prefix=cmd!menuNr!"
  set /a menuNr+=1
)

echo !prefix!=!rest! >> temp.txt
(
endlocal
set "menuNr=%menuNr%"
exit /b
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T18:01:21.743

第一步是批量读取文件，不会无意中修改内容。
这可以通过延迟切换技术来完成。

然后可以检查每一行是否以“menu”或“cmd”开头，并创建相应的菜单条目。
在每个“cmd”条目后递增菜单编号。

```
setlocal DisableDelayedExpansion

set menuNr=1
(
  for /F "tokens=1,2* delims==" %%a in (myMenu.txt) do (
    set "prefix=%%a"
    set "rest=%%b"
    call :processLine
  )
) > temp.txt
exit /b

:processLine
setlocal EnableDelayedExpansion

if "!prefix:~0,4!"=="menu" (
  set "prefix=menu!menuNr!"
)
if "!prefix:~0,3!"=="cmd" (
  set "prefix=cmd!menuNr!"
  set /a menuNr+=1
)

echo !prefix!=!rest!
(
endlocal
set "menuNr=%menuNr%"
exit /b
) 
```

# perl - Perl 单线 if else 逻辑

> ID：10503643
> 
> 赞同：8
> 
> 时间：2012-05-08T17:41:07.927
> 
> 标签：perl

我正在评估某些变量是否与预期值匹配。变量由某个程序在内存中设置，其值可以通过自定义程序从 shell 访问。

我将 shell 命令的输出传送到 awk 以获取我想要的特定字段，然后我想通过 perl 运行它以查看它是否与预期值匹配。例如，

```
ysgrp autostart | awk -F\: '{print $1}' | perl -e 'print {"True"} else {print "False"} if /on/' 
```

但是，我从 perl 收到关于“} else”附近编译错误的投诉。如何处理 perl 单行中的 if/then/else 逻辑？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T17:45:01.857

您不能`else`在后缀条件中使用条件。您可以像这样使用三元条件运算符：

```
perl -e 'print /on/ ? "True" : "False"' 
```

或者使用这样的显式块：

```
perl -e 'if ( /on/ ) { print "True" } else { print "False" }' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:48:34.177

这部分：

```
awk -F\: '{print $1}' | perl -e 'print {"True"} else {print "False"} if /on/' 
```

可以在 perl 中处理（如果我没记错 awk）：

```
perl -F/:/ -lane 'print $F[0] =~ /on/ ? "True" : "False"' 
```

注意`-n`开关的使用，没有它你的 perl 单行器将无法工作。还要注意这个`-l`开关，它会在你的打印中添加一个换行符，这是我假设你想要的。否则，您的输出将类似于：

```
TrueTrueTrueFalseTrueFalse 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:43:14.703

一个没有，除非使用三元`?:`运算符；`foo if bar`语法不支持`else`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T17:44:52.717

你可以这样做：

```
 ... | perl -ne 'print /on/ ? "True" : "False"' 
```

但请不要！你最好这样做：

```
... | grep -qF on && echo True || echo False 
```

# c# - String.Format() - 重新传递参数但添加更多参数

> ID：10503644
> 
> 赞同：6
> 
> 时间：2012-05-08T17:41:14.510
> 
> 标签：c#, .net, string-formatting, params-keyword

我想做这样的事情：

```
public string GetMessage(params object otherValues[]) {
    return String.Format(this.Message, this.FirstValue, otherValues);
} 
```

所以，我想重新传递一个参数数组，`String.Format()`但添加一个新参数。

最好的方法是什么，知道我们可以“重建”一个新的对象数组，这似乎并不好。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T17:45:44.243

```
public string GetMessage(params object[] otherValues)
{
    return String.Format(this.Message, new[] { this.FirstValue }.Concat(otherValues).ToArray<object>());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:43:04.727

您可以使用[`Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx)and[`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)扩展方法：

```
public string GetMessage(params object[] otherValues) 
{
    var values = new[] { this.FirstName }.Concat(otherValues).ToArray();
    return String.Format(this.Message, values);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:58:32.347

如果`other`参数通常很少，我会使用现有的重载：

```
public string GetMessage(params object[] otherValues) {
    if (otherValues == null) return string.Format(this.Message, this.FirstValue);

    switch (otherValues.Length)
    {
        case 0:
            return string.Format(this.Message, this.FirstValue);
        case 1:
            return string.Format(this.Message, this.FirstValue, otherValues[0]);
        case 2:
            return string.Format(this.Message, this.FirstValue, otherValues[0], otherValues[1]);
        default:
            return string.Format(this.Message, new[] { this.FirstValue }.Concat(otherValues).ToArray()); 
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T19:30:32.880

# 预处理消息

如果您不想在每个*GetMessage(...)*调用中创建一个新数组，您可以在开始时**将*FirstValue***插入*Message中***一次**。然后*GetMessage(...)*只使用*string.Format(...)的**otherValues*参数。

 **Message*属性在设置 FirstValue 后初始化一次，*例如*在构造函数或 init 方法中，如下所示：

```
void InitMessage()
{
    Message = String.Format(Message, FirstValue, "{0}", "{1}", "{2}", "{3}", "{4}");
} 
```

*InitMessage*方法用 FirstValue 初始化 Message 中的第一个索引，用*“* *{* index }”初始化其余索引，即“{0}”、“{1}”、“{2}”、...（允许有比消息索引更多的元素）。 *`params`*

 *现在*GetMessage*可以调用*String.Format*而无需像这样的任何数组操作：

```
public string GetMessage(params object[] otherValues)
{
  return String.Format(Message, otherValues);
} 
```

## 例子：

假设以下属性值：
`this.Message = "First value is '{0}'. Other values are '{1}' and '{2}'."`和`this.FirstValue = "blue"`。

*InitMessage*将*Message*更改为：
`"First value is 'blue'. Other values are '{0}' and '{1}'."`。

*GetMessage*调用
`GetMessage("green", "red")`

结果
`"First value is 'blue'. Other values are 'green' and 'red'."`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T07:04:10.183

如果您真的无法为数组创建另一个结构，另一种混乱的方法是使用 RegEx 破解您的格式。

```
private string FormatEval(Match m)
{
    int val = -1;
    string formatted = m.Value;
    if (int.TryParse(m.Groups["index"].Value, out val))
        formatted = val == 0 ? this.FirstValue : "{" + (val - 1).ToString() + "}";
    return formatted;
}

public string GetMessage(params object[] otherValues)
{
    string format = Regex.Replace(this.Message, @"\{(?<index>\d+)\}", FormatEval);
    return string.Format(format, otherValues);
} 
```

基本上只需解析格式化标记（{0}、{1}）等的格式字符串，并减少它们的索引。如果令牌最初是 {0}，请将其替换为 this.FirstName 字符串。

本质上，这是在手动执行 String.Format 的第一步，然后将生成的字符串传递给 REAL String.Format 方法以完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T10:58:08.550

# 传递离散元素

为了避免在everey *GetMessage*调用中创建数组，您可以通过其离散元素传递*otherValues ：*

```
public string GetMessage(params object[] otherValues)
{
  return String.Format(Message,
                       FirstValue,
                       GetOrDefault(otherValues, 0),
                       GetOrDefault(otherValues, 1),
                       GetOrDefault(otherValues, 2),
                       GetOrDefault(otherValues, 3),
                       GetOrDefault(otherValues, 4));
}

private object GetOrDefault(object[] otherValues, int index)
{
  if (otherValues == null)
    return null;

  if (index < otherValues.Length)
    return otherValues[index];

  return null;
} 
```**

# actionscript-3 - AS3 - 从类访问根目录中的变量

> ID：10503650
> 
> 赞同：0
> 
> 时间：2012-05-08T17:41:40.550
> 
> 标签：actionscript-3, class

如何从类中访问根时间轴中的变量？我需要从中读取值的根时间轴中有一个名为**myblocks的变量。**

这是相关的类部分：

```
package myclasses
{

public final class Bcoder extends EventDispatcher
    {

private function getBlocks():void
        {

            for (var i:int = _getNumBlocks; i--; ){
            // how to get the myblocks value from here?

            }} 
```

这是来自根时间线：（ActionScript 位于关键帧中）

```
 import myclasses.Bcoder;
var myblocks:Number=20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:31:18.483

这完全是胡说八道，而且是非常糟糕的做法。你应该避免这种编码方式！！！

这真的不是 OOP，让我想到糟糕的 AS1 /2 和 3 组合！！！

但是，如果您在 Document 属性中没有将类定义为主类，则这是可能的。

例如：在文件夹“com”中，ObjectOnStage.as 类：

```
package com {
    import flash.display.Stage;
    import flash.display.Sprite;
    import flash.events.Event;
    public class ObjectOnStage extends Sprite{

    public function ObjectOnStage() {
                this.addEventListener(Event.ADDED_TO_STAGE,onAddedToStage,false,0,false);
                this.addEventListener(Event.ACTIVATED,onActivate,false,0,false);
    }
    public function onAddedToStage(e:Event):void{
                    // will output null for both
            trace("\n       added " + e.target + "\n");
            trace(e.target.parent["nonSense"]);
            trace(e.target.parent["nonsense"]);
        }
    public function onActivate(e:Event):void{
                    // will output the values.
            trace("\n       added " + e.target + "\n");
            trace(e.target.parent["nonSense"]);
            trace(e.target.parent["nonsense"]);
        }
    }

} 
```

在时间轴的第一帧：

```
import com.ObjectOnStage;
var nonSense:int = 1;
var nonsense:String = "This is a nonsense";
var oos:ObjectOnStage = new ObjectOnStage();
this.addChild(oos); 
```

你最好改变整个剧本！

Adobe 应该消除在时间轴上编写脚本的可能性，因为导出设置设置为 AS3，并且严格模式应始终设置为严格模式开启。也欢迎私人构造函数，以允许使用

```
MyClass.getInstance(); 
```

这将允许类似：

```
package com {
public class MyMainObject {
    private static var instanceOfMainObject;
    private function MyMainObject(args:Vector.<String>){
                    // or MyMainObject(...args)
        trace("new Instance of MyMainObject created with " + args.toString());
    }
    public static function main(args:Vector.<String>):void{
        instanceOfMainObject = MyMainObject.getInstance(args);
        trace("arguments.length = " + args.length);
        for(var i:int = 0 ; i < args.length ; i++){
            trace( i + " = " + args[i]);
        }
    }
    public static function getInstance(args:Vector.<String>):MyMainObject{
        var instance:MyMainObject = new MyMainObject(args);
        return instance;
        }
    }
} 
```

现在，此代码引发错误：

```
1153: A constructor can only be declared public. 
```

也许这将是 AS4 中的情况？？？

如果我通过您的评论理解它，您必须将声明变量的 DisplayObjectContainer 作为参数传递给类。

示例：在 MyClass.as

```
 package com {
    import flash.display.DisplayObjectContainer;
    import flash.events.EventDispatcher;
    public class MyClass extends EventDispatcher{
        public function MyClass(doc:DisplayObjectContainer) {
            trace(doc["nonSense"]);
            trace(doc["nonsense"]);
            // but this is again not OOP even if you use the "class" KEYWORD.
        }
    }
} 
```

在时间线上：var nonSense:int = 1; var nonsense:String = "这是胡说八道"; var mclss:MyClass = new MyClass(this);

关于 EventDispatcher，您还可以[在此处阅读我对 EventDispatcher 的回答](https://stackoverflow.com/questions/10485526/in-actionscript-3-0-can-you-use-addeventlistener-for-one-class-to-react-to-the/10496558#10496558)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:03:02.617

我想你可能想看看这个：[http ://www.kirupa.com/forum/showthread.php?349086-AS3-Question-Accessing-a-main-timeline-variable-from-a-class](http://www.kirupa.com/forum/showthread.php?349086-AS3-Question-Accessing-a-main-timeline-variable-from-a-class)

此外，我想提一下，您应该使用时间线编码或使用文档类，优先使用后者，因为此选项是 AS3 的优势，将使您的代码更加结构化。

# mysql - django 的 phpmyadmin 替代方案

> ID：10503653
> 
> 赞同：-1
> 
> 时间：2012-05-08T17:41:46.350
> 
> 标签：mysql, django, phpmyadmin

当我开始一个新的 Django 项目时，我总是最终安装了一堆我不经常使用的 PHP 相关的东西，但这是 phpMyAdmin 工作所必需的（*我认为*）。我对 phpMyAdmin 没有任何抱怨，但是当我在几台 PC 上工作时，我想知道是否有一些东西可以轻松地让我的数据库（顺便说一下，MySQL）保持同步。

有没有人知道这样的事情？跨平台软件（Linux、Windows）将是理想的，但我对替代品持开放态度。

此外，使用 Django 设置 MySQL 数据库的绝对最低要求是多少？`sudo apt-get install mysql-server`和`sudo apt-get install python-mysqldb`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:04:07.843

同步被称为数据库的复制。查看[此链接](http://dev.mysql.com/doc/refman/5.0/en/replication.html)以获取更多信息。

# html - 使用 CSS 更改导航菜单中的背景颜色

> ID：10503657
> 
> 赞同：0
> 
> 时间：2012-05-08T17:41:52.013
> 
> 标签：html, css, web

我需要更改此[CSS](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css)文件指定的导航菜单的背景颜色（在此[Jquery 示例](http://docs.jquery.com/UI/Tabs#Example)中使用）。我不知道这条线在哪里。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:58:04.410

如果我理解正确，您需要更改的类称为***'.ui-widget-header'***，它看起来像这样：

```
.ui-widget-header
{
    border: 1px solid #aaaaaa;
    background: #cccccc url(images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x;
    color: #222222;
    font-weight: bold;
} 
```

只需在任何编辑器中打开您的 CSS 文件，使用 Find 功能（*通常是 CTRL + F*）并查找***'.ui-widget-header'*。**如果您有基本的 CSS 知识，则可以更改背景颜色和图像。如果没有，请寻求帮助。

正如**@drinchev**所说，将来如果您需要找到特定元素，只需将鼠标悬停在它上面并使用“检查元素”，假设您使用的是较新版本的 Mozilla Firefox 或 Google Chrome。如果您使用的是 Internet Explorer，请按 F12 并在所需项目上使用“*选择元素”指针。*

您还可以使用这些开发人员工具动态更改值，以查看如果您真正进行更改会是什么样子。

PS：请记住，我重新格式化了 CSS，因为它被放在了一行中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:05:26.220

使用 chrome 上的检查元素或 Firefox 的 Firebug。点击元素获取所有css样式及其父样式。通过双击直接更改值并检查一次结果。

# java - FacebookCredits - 添加信用以测试用户

> ID：10503665
> 
> 赞同：0
> 
> 时间：2012-05-08T17:42:34.540
> 
> 标签：java, facebook-credits, restfb

[我正在寻找除此处](https://stackoverflow.com/questions/4980463/how-to-add-facebook-credits-to-test-user)所述的答案之外的另一个答案。我想在我的应用程序中看到“已转移”的学分。Insights 但要与测试用户交易，以确保回调没有错误。恐怕无法做到，但是如果有人有其他选择，那也可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:18:45.193

您唯一的选择是使用测试人员，并接受他们的交易不会出现在支付报告中的事实，或者使用真实信用和真实货币

# python - 获取 OrderedDict 的前 100 个元素

> ID：10503666
> 
> 赞同：8
> 
> 时间：2012-05-08T17:42:36.540
> 
> 标签：python, python-3.x

`preresult`是一个`OrderedDict()`。

我想在其中保存前 100 个元素。或者保留`preresult`但删除除前 100 个元素之外的所有内容。

结构是这样的

```
stats = {'a':   {'email1':4, 'email2':3}, 
         'the': {'email1':2, 'email3':4},
         'or':  {'email1':2, 'email3':1}} 
```

islice 能用吗？我的告诉`itertool.islice`没有`items`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T17:44:54.447

这是一个简单的解决方案，使用`itertools`：

```
>>> import collections
>>> from itertools import islice
>>> preresult = collections.OrderedDict(zip(range(200), range(200)))
>>> list(islice(preresult, 100))[-10:]
[90, 91, 92, 93, 94, 95, 96, 97, 98, 99] 
```

这仅返回键。如果您想要项目，请使用`iteritems`（或仅`items`在 Python 3 中）：

```
>>> list(islice(preresult.iteritems(), 100))[-10:]
[(90, 90), (91, 91), (92, 92), (93, 93), (94, 94), (95, 95), (96, 96), (97, 97), (98, 98), (99, 99)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-11T19:11:19.187

您可以对 OrderedDict 的键进行切片并复制它。

```
from collections import OrderedDict

a = OrderedDict()
for i in xrange(10):
    a[i] = i*i

b = OrderedDict()
for i in a.keys()[0:5]:
    b[i] = a[i] 
```

b 是 a 的切片版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-20T03:19:37.130

```
for k, v in list(od.items())[:100]:
   pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-20T03:52:02.293

我们不能将列表转换为带有键和值的字典，然后根据需要滑动它，然后将其放回orderedDict吗？

这就是我的做法。

```
from collections import OrderedDict

#defined an OrderedDict()

stats = OrderedDict()

#loading the ordered list with 100 keys
for i in range(100):
    stats[str(i)] = {'email'+str(i):i,'email'+str(i+1):i+1}

#Then slicing the first 20 elements from the OrderedDict
#I first convert it to a list, then slide, then put it back as an OrderedDict

st = OrderedDict(list(stats.items())[:20])

print  (stats)

print (st) 
```

其输出如下。我将第一个项目减少到 10 个项目，并将其切成前 5 个项目：

```
OrderedDict([('0', {'email0': 0, 'email1': 1}), ('1', {'email1': 1, 'email2': 2}), ('2', {'email2': 2, 'email3': 3}), ('3', {'email3': 3, 'email4': 4}), ('4', {'email4': 4, 'email5': 5}), ('5', {'email5': 5, 'email6': 6}), ('6', {'email6': 6, 'email7': 7}), ('7', {'email7': 7, 'email8': 8}), ('8', {'email8': 8, 'email9': 9}), ('9', {'email9': 9, 'email10': 10})])

OrderedDict([('0', {'email0': 0, 'email1': 1}), ('1', {'email1': 1, 'email2': 2}), ('2', {'email2': 2, 'email3': 3}), ('3', {'email3': 3, 'email4': 4}), ('4', {'email4': 4, 'email5': 5})]) 
```

我做了一个 print (dict(st)) 来得到这个：

```
{'0': {'email0': 0, 'email1': 1}, '1': {'email1': 1, 'email2': 2}, '2': {'email2': 2, 'email3': 3}, '3': {'email3': 3, 'email4': 4}, '4': {'email4': 4, 'email5': 5}} 
```

# android - Android中的MultiLine EditText，光标从顶部开始

> ID：10503668
> 
> 赞同：60
> 
> 时间：2012-05-08T17:42:37.697
> 
> 标签：android, android-layout, android-edittext

我知道这似乎是一个已经回答了数千次的问题，但我还没有找到任何适合我的东西。

我在Android上有一个MultiLine EditText，它通过“播放”权重（1）和高度（0dip）来适应视图大小。我正在使用重力“顶部”，但它从中间开始。

我猜这个问题与重量有关。这是代码（父级是LinearLayout）：

```
 <EditText
        android:id="@+id/txtContacto"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_gravity="top"
        android:inputType="textMultiLine" 
        android:weight="1">
    </EditText> 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-05-08T17:43:35.227

```
<EditText
        android:id="@+id/txtContacto"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:gravity="top"
        android:inputType="textMultiLine" 
        android:weight="1">
    </EditText> 
```

试试上面的代码..其中布局重力设置edittext和重力设置edittext的内容。

# c# - 使用 SQL 地理数据类型确定共线？

> ID：10503671
> 
> 赞同：0
> 
> 时间：2012-05-08T17:42:50.060
> 
> 标签：c#, mapping, gis

我正在使用一些 SQL 地理列在数据库中存储一些行。然后我将这些线转换为 long\lat 线并绘制在地图上。如果它们占据相同的空间，我需要将线条调整为更粗。我很好奇是否有人知道使用 SQL Geography 类型或任何其他方法检测线条是否共线的方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:48:50.893

在线条周围创建一个薄缓冲区，然后取缓冲区的交点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:49:08.797

我不是一个地图专家，但你不应该能够检查线段的起点和终点吗？如果你得到两条具有相同起点和终点的线段，那么你就有了共线性，之后你就可以实现任何你想要的时髦逻辑。

# php - strftime() 函数显示不正确的时间

> ID：10503673
> 
> 赞同：1
> 
> 时间：2012-05-08T17:43:03.400
> 
> 标签：php, function

php 中的`strftime()`函数未在我的系统上显示正确的时间。我在 xampp 上运行 php。它在我的 PC 时钟上大约 11 点，但是`strftime()`当我执行以下代码时，该函数返回 19：-

```
echo 'Time is - '.strftime('%H'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:45:09.907

您可以通过在顶部执行 ini_set 来更改服务器时区：

`ini_set( 'date.timezone', 'Europe/Berlin' );`

如果您使用的是托管帐户，则服务器可能与您所处的时区不同。即使您在本地运行某些东西，我通常也会发现它的设置不同。

[http://us3.php.net/timezones](http://us3.php.net/timezones)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:46:08.023

也许在 php.ini 中设置了错误的时区：http: [//www.dedyisn.net/linux/how-to-setting-default-time-zone-in-apache-webserver-for-php/](http://www.dedyisn.net/linux/how-to-setting-default-time-zone-in-apache-webserver-for-php/)

日期（“H”）；也给出错误的时间？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:48:07.257

您还可以通过在每个请求上运行以下行来设置默认时区。如果将其放入项目的 config.php 或 header.php 文件中，则可以轻松实现此目的。

```
date_default_timezone_set ( string $timezone_identifier ) 
```

来源： http: [//php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

时区名称：[http ://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

# debugging - 使用 ARM 半主机

> ID：10503680
> 
> 赞同：2
> 
> 时间：2012-05-08T17:43:28.203
> 
> 标签：debugging, arm, mqx

我已将 Freescale Kinetis MQX BSP 配置为使用带有 IAR IDE 和 J-Link 调试器的“iodebug：”半主机设备。该文本中的配置“有效”出现在 IDE 控制台窗口中。输出不稳定且缓慢 - 输出 16x64 文本块可能需要 5 秒。在输出操作期间，CPU 似乎长时间停止，即。具有严格时间要求的操作会陷入困境。

这是半主机的典型性能，还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-02T04:49:21.207

1) 选项 -> 常规选项 -> 库选项 -> 启用缓冲终端输出。没有这个，主机被迫一次发送一个字节。

2) 选项 -> 常规选项 -> 库配置启用 Semihosted。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T18:22:11.513

半主机使用调试陷阱（带有幻数的 SVC/BKPT）与调试器通信。我不知道 IAR 是如何实现它的，但是如果它每个字符使用一个陷阱，那么您引用的数字就不足为奇了，尤其是考虑到 USB 协议的延迟。

# php - 同时重定向到 App Store 和另一个页面

> ID：10503681
> 
> 赞同：0
> 
> 时间：2012-05-08T17:43:28.303
> 
> 标签：php, javascript, redirect, http-headers, app-store

完成在线注册过程后，我想检查用户是否使用 iPhone，在这种情况下，请选择打开 App Store 以下载该应用程序。到目前为止，这是我编写的代码：

1.  在 PHP 中，检查`$_SERVER['HTTP_USER_AGENT']`是否存在子字符串“iPhone”。
2.  如果是这样，输出 JavaScript 代码，在重定向到欢迎页面之前，提供使用确认框进入 App Store 的可能性。
3.  重定向到在 JavaScript 中使用`itms-apps://itunes.apple.com/url-to-my-app`。`window.location = ...`

这行得通。但是，当用户再次打开 Safari 时，我重定向的页面仍然打开。在我的情况下，这没有任何意义。*无论*用户是否选择打开 App Store，我都想重定向到欢迎页面。如果我尝试`window.location`在第一行下方写另一行来执行第二次重定向，Safari 会简单地跳过指向 App Store 的链接。

我考虑过从隐藏的 iframe 重定向，在第二个重定向上放置某种计时器，尝试 JavaScript 和 HTTP 标头重定向的不同组合等等。不过，到目前为止，我所想到的解决方案似乎都不是真正可靠的。如果我希望它在浏览器和版本之间正常工作，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:00:15.797

这样做的唯一方法是使用欢迎页面本身来执行 iTunes 重定向。

# codeigniter - Codeigniter 中的 insert_id() 是否在查询失败时返回 false？

> ID：10503691
> 
> 赞同：3
> 
> 时间：2012-05-08T17:43:57.100
> 
> 标签：codeigniter

插入失败后 insert_id() 会返回什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T18:10:09.790

我认为这取决于您使用的驱动程序。在mysql的情况下，函数定义是：

```
/**
* Insert ID
*
* @access   public
* @return   integer
*/
function insert_id()
{
    return @mysql_insert_id($this->conn_id);
} 
```

现在阅读`mysql_insert_id`：

> mysql_insert_id (PHP 4, PHP 5) 获取上一次查询生成的ID
> 
> 参数：
> 资源 $link_identifier [可选]
> 
> 返回：
> 类型：int
> 
> 描述：上一个查询成功时为 AUTO_INCREMENT 列生成的 ID，如果上一个查询没有生成 AUTO_INCREMENT 值，则为 0，如果没有建立 MySQL 连接，则为 false。

1.- 所以它可以返回一个 ID，0（零）或 false。
2.- 当你要求 a`failed insert`它应该返回 0（零）。

* * *

请注意，有一个`at sign (@)`错误运算符将忽略`mysql_insert_id`PHP 函数返回的任何错误消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:57:38.313

如果您查看数据库驱动程序本身，每个版本的`insert_id`实现方式都不同，具体取决于底层数据库。例如，[MySQL`insert_id`函数](https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/drivers/mysql/mysql_driver.php)只是 的包装器[`mysql_insert_id`](http://php.net/manual/en/function.mysql-insert-id.php)，它返回：

> 上一个查询成功时为 AUTO_INCREMENT 列生成的 ID，如果上一个查询没有生成 AUTO_INCREMENT 值，则为 0，如果没有建立 MySQL 连接，则为 FALSE。

另一方面，[postgres 函数](https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/drivers/postgre/postgre_driver.php)显式返回一个 ID（尽管我认为如果查询本身失败可能会引发异常）：

```
 $query = $this->query($sql);
    $query = $query->row();
    return (int) $query->ins_id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:47:43.490

大多数 codeigniter 函数如果没有值可以返回 false。我的意思是它不会返回 insert_id ，因为由于错误而没有提供 insert_id 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T17:50:59.870

它仅在执行数据库插入时返回 id。

如果成功，它将通过先前的查询生成 AUTO_INCREMENT 列。如果失败，则返回 0 如果没有建立 MySQL 连接，则返回 FALSE。

# jquery - Jquery：如何通过单击对象值来获取父标签？

> ID：10503694
> 
> 赞同：-1
> 
> 时间：2012-05-08T17:44:22.280
> 
> 标签：jquery

有什么方法可以通过单击存储的对象来获取父键？请查看我的 html 和代码：

HTML：

```
<ul id="one">
    <li>0</li>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<ul id="two">
    <li>0</li>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul> 
```

我的代码：以及我想要的：

```
function makeIt(params){
           params.grandParent1.parent1.sector.click(function(){
                console.log(sectorName,parentName,grandParentName) // how can i get this call, simply how can i fetch the key of values?

                // i expected is : sectorName : sector, parentName:parent1,grandParentName:grandParent1...like this
            })
        }
        $(document).ready(function(){
            params = {
                grandParent1:{
                    parent1:{sector:$('#one').find('li')}
                },
                 grandParent2:{
                    parent2:{sector:$('#two').find('li')}
                 }
            }

            makeIt(params);
        }) 
```

这可能吗？有什么好的方法来完成这件事吗？

这是小提琴：http: [//jsfiddle.net/SUG6h/2/](http://jsfiddle.net/SUG6h/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:54:44.360

我想你在里面寻找这样的东西`makeit()`：

```
sectorname = Object.keys(this); 
parentname = Object.keys(this.parent); 
grandparentname = Object.keys(this.parent.parent); 
```

[有关 Object.keys 的更多信息](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys "有关 Object.keys 的更多信息")

正如 Rick 在下面指出的，IE8 不支持这 - 因此您还可以使用 for..in 语句来循环访问对象的键来获取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:10:46.137

你可以自己遍历DOM，找到父节点。

[https://developer.mozilla.org/en/DOM/Node.parentNode](https://developer.mozilla.org/en/DOM/Node.parentNode)

如果您已经在使用 jQuery 进行 DOM 操作，那么您确实应该保持某种一致性。

# java - 带有 JSON 的 Spring 3.1 REST：不起作用

> ID：10503698
> 
> 赞同：5
> 
> 时间：2012-05-08T17:44:44.757
> 
> 标签：java, json, spring, rest, tomcat

一旦我将我的测试应用程序移动到一个生产（？）应用程序并开始在 Tomcat 上进行测试，我基于 Spring 3.1 的 REST 服务就停止了工作。虽然显示了默认的 index.jsp，但我的应用程序 (http://myhost:myport/test-webapp/myrestservice) 无法访问，并且我得到请求的资源 (/test-webapp/myrestservice) 不可用。

这是我所做的：

控制器：

```
package com.test.webapp.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.test.webap.entity.Account;

@Controller
@RequestMapping("/myrestservice")
public class AccountController{

@RequestMapping(method = RequestMethod.GET, produces="application/json")
@ResponseBody
public Account getEntity() {
            // ... <simplified>
    return new Account(//...);
}
} 
```

调度 Servlet 配置：

```
package com.test.webapp.web;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration;

import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.context.ContextLoaderListener;
import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.servlet.DispatcherServlet;   
import com.test.webapp.config.AppConfig;

public class AppInit implements WebApplicationInitializer {

    private static final String DISPATCHER_SERVLET_NAME = "dispatcher";

    public void onStartup(ServletContext container) throws ServletException {
        // Create the dispatcher servlet's Spring application context
        AnnotationConfigWebApplicationContext dispatcherContext = new AnnotationConfigWebApplicationContext();
        dispatcherContext.register(AppConfig.class);

        // Manage the lifecycle of the root application context
        container.addListener(new ContextLoaderListener(dispatcherContext));

        // Register and map the dispatcher servlet
        ServletRegistration.Dynamic dispatcher = container.addServlet(
                DISPATCHER_SERVLET_NAME, new DispatcherServlet(dispatcherContext));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");

    }
} 
```

配置类：

```
package com.test.webapp.config;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration
@ComponentScan( basePackages = {"com.test.webapp.controller"})
public class AppConfig{
    // Nothing here. Once I start using the beans, I will put them here
} 
```

而且，web.xml 没有太多内容：

```
<!DOCTYPE web-app PUBLIC
"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
"http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
  <display-name>Test Web App</display-name>
</web-app> 
```

在我的项目中，除此之外别无他法。我错过了什么吗？旧项目更像是记录传入的 JSON 请求等（现在已被删除）正在工作，但我不再拥有它了 :( 所以，很多新手忧郁。请在这里帮助我。非常感谢！ ！

**更新** 问题已解决。检查答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:09:03.067

您在生产环境中使用的是什么版本的 Tomcat？看起来您需要 Tomcat 7 才能获得支持 WebApplicationInitializer 所需的 Servlet 3.0 规范实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T05:13:43.383

问题解决了。我觉得这是一个 Servlet 容器 3.0 问题，可能是我的 Tomcat 7 配置中的某些东西搞砸了。但是，我做了一些小的改动，`web.xml`现在它工作正常：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    metadata-complete="false">

    <display-name>Test Web App</display-name>
</web-app> 
```

显然，我必须通过属性**metadata-complete="false"明确告诉 Tomcat 扫描 ServletContainerInitializer 的实现，而不是所有内容都在 web.xml 中**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:47:44.857

您是否尝试过进入 Tomcat 管理器并查看已部署的内容？它应该显示已部署应用程序的列表。我想路径已经改变了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T18:25:09.283

由于您是 Spring 新手，我建议您看看我之前的回答：

[请求的资源 (/) 不可用](https://stackoverflow.com/questions/10264291/the-requested-resource-is-not-available/10264415#10264415)

# javascript - 原型继承和“this”的价值

> ID：10503699
> 
> 赞同：2
> 
> 时间：2012-05-08T17:44:49.863
> 
> 标签：javascript, this, prototypal-inheritance

我正在构建一个包含多个“模块”的应用程序。每个模块都需要一组类似的基本功能，因此我创建了一个基本模块，每个模块都将通过原型继承从该基本模块中继承。基本模块上的一些函数名称很长，并且由于这些函数经常使用，我想在每个模块中分配较短的名称，但这会导致将“this”的值设置为等于 DOMWindow 的问题。

请看下面的代码：

```
var SAMPLEAPP = SAMPLEAPP || {};

//This is a base module that I want all other modules to inherit from
SAMPLEAPP.Module = function(){

};

SAMPLEAPP.Module.prototype.someLongFunctionName = function(){
    console.log(this);
};

//This is a module that inherits from the base module
SAMPLEAPP.RouterModule= function(){
    var shortName = this.someLongFunctionName;

    //This correctly logs 'SAMPLEAPP.RouterModule', but I would rather not type 
    //out this long function name each time I need to use the function
    this.someLongFunctionName();

    //However, this code logs 'DOMWindow' when I would expect the value of 'this' 
    //to be the same as the direct call to this.someLongFunctionName
    shortName();
};

SAMPLEAPP.RouterModule.prototype = new SAMPLEAPP.Module();

new SAMPLEAPP.RouterModule(); 
```

我的问题：如何修改代码以便调用 shortName() 记录 SAMPLEAPP.RouterModule？如果可能的话，我宁愿改变模块的定义方式而不是实际调用 shortName（即 shortname.call(this)，违背了为 someLongFunctionName 创建别名的目的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:52:30.157

正如其他人所提到的，您可以使用`call`or `apply`（两者都可以，区别只是参数如何传递给函数）。

或者，您可以使用 ES5[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)方法，该方法将上下文绑定到函数（在这种情况下，上下文将为`this`）：

```
var shortName = this.someLongFunctionName.bind(this); 
```

`shortName`然后，您可以像往常一样调用：

```
shortName(); 
```

这是一个[工作示例](http://jsfiddle.net/f3fT8/)。这是 MDN 文章中最相关的部分：

> bind() 函数创建一个新函数（绑定函数），其函数主体（ECMAScript 5 术语中的内部 Call 属性）与正在调用它的函数（绑定函数的目标函数）相同，并且 this 值绑定到bind() 的第一个参数，不能被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:50:06.703

您可以使用 call / apply 函数将“this”上下文传递给方法调用。在您的情况下，它可以是

```
shortName.apply(this); 
```

或者

```
shortName.call(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:53:40.697

另一种解决方案是使用绑定函数将新上下文绑定到函数。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

```
var shortName = this.someLongFunctionName.bind(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T17:50:00.527

您可以将呼叫更改`shortName();`为`shortName.call(this);`。

这是javascript有点技巧。是基于上下文的。

# php - 想要使用 Doctrine 在子 SELECT 上运行 COUNT

> ID：10503711
> 
> 赞同：1
> 
> 时间：2012-05-08T17:45:36.210
> 
> 标签：php, mysql, doctrine, doctrine-orm

我想用 Doctrine 计算子选择返回的行数。我的子选择是：

```
SELECT e FROM \comments\Entities\Event e 
WHERE e.type = 'addComment'
HAVING TIMESTAMPDIFF(MINUTE, e.commentedOnPublished, e.created) < 60) 
```

在 SQL 中，我将通过以下方式实现预期的结果：

```
SELECT COUNT(*) FROM (
    SELECT e.* FROM square_events as e 
    WHERE e.type = 'addComment' 
    HAVING TIMESTAMPDIFF(minute, e.commentedOnPublished, e.created) < 60
) temp 
```

有谁知道如何用 Doctrine 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:23:31.013

我确定我已经尝试过这个和一千个其他解决方案，无论如何，在我们的一个系统人员指出我是个白痴之后，这就是我最终得到的结果！

```
SELECT COUNT(e) as eventCount FROM comments\Entities\Event e 
WHERE e.type = 'addComment'
AND TIMESTAMPDIFF(MINUTE, e.commentedOnPublished, e.created) < 60 
```

那些日子中的一天...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:28:36.303

我看不出想要子选择的原因。以下应该可以正常工作：

```
$query = $em->createQuery("
    SELECT COUNT(e.id) FROM \comments\Entities\Event e 
    WHERE e.type = 'addComment'
    HAVING TIMESTAMPDIFF(MINUTE, e.commentedOnPublished, e.created) < 60)"
);

$count = $query->getSingleScalarResult(); 
```

# java - 处理数组中的空对象

> ID：10503712
> 
> 赞同：1
> 
> 时间：2012-05-08T17:45:37.427
> 
> 标签：java, arrays

我有一个包含 18 个对象的数组，该数组被分配有 25 个对象（其余 7 个对象为空，以备将来使用）。我正在编写一个打印出所有非空对象的程序，但我正在运行 a`NullPointerException`并且我无法弄清楚如何绕过它。

当我尝试这个时，程序崩溃`Exception in thread "main" java.lang.NullPointerException`：

```
 for(int x = 0; x < inArray.length; x++)
        {
            if(inArray[x].getFirstName() != null)//Here we make sure a specific value is not null
            {
                writer.write(inArray[x].toString());
                writer.newLine();
            }
        } 
```

当我尝试这个时，程序运行，但仍然打印空值：

```
 for(int x = 0; x < inArray.length; x++)
        {
            if(inArray[x] != null)//Here we make sure the whole object is not null
            {
                writer.write(inArray[x].toString());
                writer.newLine();
            }
        } 
```

谁能指出我处理数组中空对象的正确方向？感谢所有帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T17:49:08.817

你的支票应该是：

```
if(inArray[x] != null && inArray[x].getFirstName() != null) 
```

# sql-server-2008 - jTDS 错误地报告结果集元数据中的数据类型信息（对于 DATE 列，报告 NVARCHAR）

> ID：10503715
> 
> 赞同：2
> 
> 时间：2012-05-08T17:46:00.357
> 
> 标签：sql-server-2008, jdbc, jtds, database-metadata

目前，针对 Microsoft SQL Server 2008 的 jTDS JDBC 驱动程序 (1.2.5) 似乎错误地将 DATE 列的数据类型报告为 NVARCHAR。

对于早期版本的 jTDS 和 SQL Server（2005、2000），它的行为可能相同

*   是否有任何解决方法不需要切换到不同的驱动程序（例如 Microsoft 自己的驱动程序）或修补 jTDS 驱动程序？

*   此外，我想避免必须对数据字典（INFORMATION_SCHEMA.COLUMNS 视图等）执行查询以查找数据类型信息（并可能交叉引用“ **exec sp_datatype_info** ”的输出以检索 SQL数据类型）

快速浏览 jTDS 突出的错误并不能说明这是否会被修复。

这个问题的答案：[JDBC - JTDS bug ? 对于日期和时间（x）类型的列，](https://stackoverflow.com/questions/7885459/jdbc-jtds-bug-for-columns-of-type-date-and-timex)似乎表明这在 SQL Server 2005 中不会发生。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:07:49.550

我找到了有条件的解决方案

`metaData.getColumnType(columnNumber) == 12`

如果满足此条件，则执行查询

`SELECT System_Type_Id FROM Sys.Columns WHERE Name = [column name] AND Object_Id = (SELECT Object_Id FROM Sys.Tables WHERE Name = [table name])`

因为`smalldatetime`它会回来`58`

因为`datetime`它会回来`61`。

# linq - 实体框架多对多连接查询

> ID：10503719
> 
> 赞同：1
> 
> 时间：2012-05-08T17:46:23.360
> 
> 标签：linq, entity-framework

我有一个标准的社交网络范式，其中一个用户有一组也是用户的朋友。

我首先使用实体​​框架代码，我的朋友关系定义如下：

```
modelBuilder.Entity<User>()
.HasMany(u => u.Friends)
.WithMany()
.Map(m =>
    {
        m.ToTable("Friendships");
        m.MapLeftKey("UserId");
        m.MapRightKey("FriendId");
    }); 
```

我想要做的是搜索我的用户表返回所有用户，并指示每个返回的用户是否是当前用户的朋友。为了清楚起见，我想返回是朋友的用户和不是朋友的用户，还要返回一个布尔值，指示每个用户是否是朋友。我知道如何在 TSQL 中做到这一点，它是一个基本的左外连接。

我已经看到了如何在 LINQ 中进行左连接的示例，但是我看到的所有示例都连接到映射类型。我的友谊列没有映射类型。

如何在 EntityFramework 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:08:19.817

```
var list = context.Users
    .Where(u => u.Age >= 20) // sample condition, if you want ALL remove the line
    .Select(u => new
    {
        User = u,
        FriendOfCurrentUser = u.Friends.Any(f => f.UserId == currentUserId)
    })
    .ToList(); 
```

结果是包含用户和布尔友谊指标的匿名对象列表。您还可以创建一个辅助类`UserWithFriendship`并将其投影到它（`Select(u => new UserWithFriendship { ... }`）而不是匿名类型。

# android - android imageview长按和常规按

> ID：10503728
> 
> 赞同：6
> 
> 时间：2012-05-08T17:47:06.033
> 
> 标签：android, imageview, contextmenu

我有一个图像视图，我需要长按（用于上下文菜单）和常规按工作。我可以让一个或另一个工作，但不能同时工作。我错过了什么？下面的代码仅适用于普通印刷机。我一触摸屏幕，它就开始执行 onTouch 代码。

```
 ImageView image = (ImageView)findViewById(R.id.visible_image);
 image.setLongClickable(true);
 image.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent ev) {
        switch (ev.getAction()) {
         case MotionEvent.ACTION_DOWN:
            // disable the screen taps for 500ms
            DecodeActionDownEvent(v, ev, bm2);
         case MotionEvent.ACTION_MOVE:
         case MotionEvent.ACTION_UP:
     }
        return true;
    }
 });
 registerForContextMenu(image); 
```

...

```
 @Override
 public void onCreateContextMenu(ContextMenu menu, View v,
     ContextMenuInfo menuInfo) {
    menu.setHeaderTitle("Edit");
    ArrayList<String> menuItems = new ArrayList<String>();
    menuItems.add("Edit page settings");
    menuItems.add("Edit page objects");
    menuItems.add("Edit this object");
    for (int i = 0; i<menuItems.size(); i++) {
        menu.add(Menu.NONE, i, i, menuItems.get(i));
    }
 } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T17:49:14.753

您可以尝试这样做：

```
ImageView imageView = (ImageView) findViewById(R.id.ImageView);
imageView.setOnLongClickListener(new OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
                    //your stuff
        return true;
    }
});
imageView.setOnClickListener(new OnClickListener() {
    @Override
    public boolean onClick(View v) {
        //your stuff
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-19T21:13:00.720

经过大量观察和试验，这是我发现实现这种行为的最佳解决方案：

```
//Define these variables at the beginning of your Activity or Fragment:
private long then;
private int longClickDuration = 5000; //for long click to trigger after 5 seconds

...

ImageView imageView = (ImageView) findViewById(R.id.visible_image);
imageView.setOnTouchListener(new OnTouchListener() {
      @Override
      public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
          then = (long) System.currentTimeMillis();
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
          if ((System.currentTimeMillis() - then) > longClickDuration) {
            /* Implement long click behavior here */
            System.out.println("Long Click has happened!");
            return false;
          } else {
            /* Implement short click behavior here or do nothing */
            System.out.println("Short Click has happened...");
            return true;
          }
        }
        return true;
      }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T18:30:00.293

要获取 x 和 y 坐标，请设置触摸侦听器

```
 ImageView.setOnTouchListener(new View.OnTouchListener()
      {
        public boolean onTouch(View v, MotionEvent event)
        {
           //And u can get x and y values like:

           x = event.getX(); 
           y = event.getY() ;
        }
      } 
```

# php - 删除带有特定后缀 PHP 通配符的 url 链接

> ID：10503729
> 
> 赞同：-1
> 
> 时间：2012-05-08T17:47:21.637
> 
> 标签：php, url, hyperlink, wildcard

需要复制和粘贴大量文本，并且充满

`<a href="default.asp?contentID=XXX">xxx</a>`

寻找一种方法来删除路径为“deafult.asp?.......”的所有链接

确切地说，我正在使用 PHP wordpress。

....让我澄清一下，我想删除看起来像这样的链接

`<a href="default.asp?contentID=123">example text</a>`

在保留“示例文本”的同时，我试图删除链接并留下文本。所以删除`<a>`标签和标签内的所有东西，同时留下“示例文本”。但是我不想删除`<a>`我页面上的每个标签。只是链接到`deafult.asp?contentID=somenumber`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:02:58.727

preg_replace 是你的朋友。例如，以下实现了您想要的。

```
$str = "hello <a href='default.asp?contentID=123'>example text</a> bye <a href='/check/default.asp?contentID=456'>example text 2</a>";

$str2 = preg_replace("/<a.*?default.*?>(.*?)<\/a>/","$1",$str); 
```

我敢肯定有人可以建议一个更好的正则表达式，但它可以完成工作。

# ruby-on-rails-3 - Dreamhost：无法启动 Ruby (Rack) 应用程序

> ID：10503730
> 
> 赞同：0
> 
> 时间：2012-05-08T17:47:35.367
> 
> 标签：ruby-on-rails-3, passenger, dreamhost

在过去的两天里，我一直在使用 [http://jackassofalltrades.org/2012/02/updating-to-a-newer-rails-on-dreamhost][1]/ 指令解决这个问题。我查看了其他 ruby​​ on rails 和 dreamhost 问题和说明，但它们似乎已经过时了。例如 2010 年等。此外，我确实知道 heroku 很容易部署，但在我的小项目中继续运行很昂贵。所以这是我的问题。

1.  通过浏览器访问我的网站时，无法启动 Ruby (Rack) 应用程序 - 混合了两个 Ruby 版本：Ruby 1.8 和 1.9。

2.  我不确定当我退出终端时 gemset rails_michaelcollins_com 是否仍然为真，因为每次我登录时，“rvm gemset list”中都缺少指向特定 gemset 的箭头。

3.  Rails 控制台错误消息指出“找不到 JavaScript 运行时”，尽管根据 rails.michaelcollins.com 文件夹中的“bundle show”我有 Execjs 1.3.1。

提前谢谢你

* * *

```
Error mesage: Ruby (Rack) application could not be started
Application root: /home/miccol2/rails.michaelcollins.com 
```

* * *

```
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/setup.rb  10  in `exit'
/usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/setup.rb  10  
/usr/lib/ruby/1.8/rubygems/custom_require.rb    36  in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb    36  in `require'
/home/miccol2/rails.michaelcollins.com/config/boot.rb   6   
/usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `require'
/home/miccol2/rails.michaelcollins.com/config/application.rb    1   
/usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `require'
/home/miccol2/rails.michaelcollins.com/config/environment.rb    2   
/usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `require' config.ru  3   
/usr/lib/ruby/gems/1.8/gems/rack-1.2.1/lib/rack/builder.rb 46 in `instance_eval'
/usr/lib/ruby/gems/1.8/gems/rack-1.2.1/lib/rack/builder.rb 46 in `initialize'
config.ru 1 in `new'
config.ru 
```

* * *

```
[oslo]$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
[oslo]$ which ruby
/home/miccol2/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
[oslo]$ rails -v
Rails 3.2.3
[oslo]$ which rails
/home/miccol2/.rvm/gems/ruby-1.9.3-p194/bin/rails
[oslo]$ rvm -v

rvm 1.13.4 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

[oslo]$ rvm gemset list

gemsets for ruby-1.9.3-p194 (found in /home/miccol2/.rvm/gems/ruby-1.9.3-p194)
   global
   rails_michaelcollins_com

[oslo]$ rvm gemset use rails_michaelcollins_com
Using ruby-1.9.3-p194 with gemset rails_michaelcollins_com
[oslo]$ rvm gemset list

gemsets for ruby-1.9.3-p194 (found in /home/miccol2/.rvm/gems/ruby-1.9.3-p194)
   global
=> rails_michaelcollins_com

[oslo]$ 
```

* * *

```
[oslo]$ rails console
    /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/execjs-1.3.1/lib/execjs/runtimes.rb:50:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/execjs-1.3.1/lib/execjs.rb:5:in `<module:ExecJS>'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/execjs-1.3.1/lib/execjs.rb:4:in `<top (required)>'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `block in require'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
            from /home/miccol2/rails.michaelcollins.com/config/application.rb:7:in `<top (required)>'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/railties-3.2.3/lib/rails/commands.rb:39:in `require'
            from /home/miccol2/.rvm/gems/ruby-1.9.3-p194@rails_michaelcollins_com/gems/railties-3.2.3/lib/rails/commands.rb:39:in `<top (required)>'
            from script/rails:6:in `require'
            from script/rails:6:in `<main>'
    [oslo]$ 
```

* * *

```
[oslo]$ bundle show
Gems included by the bundle:
  * actionmailer (3.2.3)
  * actionpack (3.2.3)
  * activemodel (3.2.3)
  * activerecord (3.2.3)
  * activeresource (3.2.3)
  * activesupport (3.2.3)
  * arel (3.0.2)
  * builder (3.0.0)
  * bundler (1.1.3)
  * coffee-rails (3.2.2)
  * coffee-script (2.2.0)
  * coffee-script-source (1.3.1)
  * erubis (2.7.0)
  * execjs (1.3.1)
  * hike (1.2.1)
  * i18n (0.6.0)
  * journey (1.0.3)
  * jquery-rails (2.0.2)
  * json (1.7.1)
  * mail (2.4.4)
  * mime-types (1.18)
  * multi_json (1.3.4)
  * mysql2 (0.3.11)
  * polyglot (0.3.3)
  * rack (1.4.1)
  * rack-cache (1.2)
  * rack-ssl (1.3.2)
  * rack-test (0.6.1)
  * rails (3.2.3)
  * railties (3.2.3)
  * rake (0.9.2.2)
  * rdoc (3.12)
  * sass (3.1.17)
  * sass-rails (3.2.5)
  * sprockets (2.1.3)
  * thor (0.14.6)
  * tilt (1.3.3)
  * treetop (1.4.10)
  * tzinfo (0.3.33)
  * uglifier (1.2.4)
[oslo]$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:55:39.520

看起来`execjs`找不到它是运行时 JS 服务器。

有关更多信息，请参阅此：

```
https://github.com/sstephenson/execjs 
```

你需要那个宝石吗？如果是这样，您将需要安装运行时 JS 服务器。一种广泛使用的方法是[https://github.com/cowboyd/therubyracer](https://github.com/cowboyd/therubyracer)。

要安装该运行时 JS 服务器，请将此行添加到您的 Gemfile：

```
gem "therubyracer", :require => 'v8' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:42:09.357

您已捆绑`execjs`，但找不到 Javascript 运行时，例如`node.js`.

如果你真的需要`execjs`，那就安装吧`node.js`。

此外，在启动 Rails 之前，请确保您的 PATH 环境变量包含 Javascript 运行时安装的路径。

# android - 用于多个设备的 Android JNI 架构目标

> ID：10503731
> 
> 赞同：1
> 
> 时间：2012-05-08T17:47:41.387
> 
> 标签：android, ffmpeg, java-native-interface

在 Android 中使用 JNI 时，是否需要编译 C 代码以符合所有不同类型的 ARM 架构？例如，如果我为 armeabi 编译 ffmpeg，我可以在所有 Android 设备上使用它，还是需要将它编译到不同的目标，例如 armeabi-v7a？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:52:19.607

有

```
APP_ABI := armeabi armeabi-v7a x86 
```

在您的 Application.mk 中将创建 3 个与您的 apk 文件捆绑在一起的 .so 文件。这应该涵盖所有相关的 android 设备。我们的开发人员不需要额外的工作。

至于您的问题：如果您为 armeabi 编译，您的应用程序将适用于 armeabi 和 armeabi-v7a。那是因为后者是 armeabi 的扩展。您可以在 ndk.dir/docs/CPU-ARCH-ABIS.html 中找到详细说明。

# c++ - 在 x86 中增加一个整数原子吗？

> ID：10503737
> 
> 赞同：17
> 
> 时间：2012-05-08T17:48:08.663
> 
> 标签：c++, c, gcc, x86, x86-64

在多核 x86 机器上，假设在 core1 上执行的线程增加了一个整数变量`a`，同时 core 2 上的线程也增加了它。假设 的初始值为`a`0，那么它会一直`2`到最后吗？或者它可能有其他价值？假设它`a`被声明为`volatile`并且我们没有使用原子变量（例如 C++ 的 atomic<> 和 gcc 中的内置原子操作）。

如果在这种情况下 的值`a`确实总是 2，那是否意味着`long int`x86-64 中的 a 也将具有相同的属性，即`a`最终总是为 2？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-08T17:53:37.747

X86 上的增量内存机器指令只有在您将其与**LOCK**前缀一起使用时才是原子的。

**C 和 C++ 中的x++**没有原子行为。如果您执行解锁增量，由于处理器正在读取和写入 X 的竞争，如果两个单独的处理器尝试增量，您最终可能只会看到一个增量或两者都被看到（第二个处理器可能已经读取了初始值，增量它，并在第一个写回结果后将其写回）。

我相信 C++11 提供了原子增量，并且大多数供应商编译器都有一种惯用的方式来导致某些内置整数类型（通常是 int 和 long）的原子增量；请参阅您的编译器参考手册。

如果你想增加一个“大值”（比如一个多精度整数），你需要使用一些标准的锁定机制，比如信号量。

请注意，您也需要担心 atomic *reads*。在 x86 上，读取 32 或 64 位值恰好是原子的，如果它是 64 位字对齐的。“大价值”并非如此。再次，您将需要一些标准锁。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T17:57:00.570

这是一个证明它在特定实现（gcc）中不是原子的，如您所见（？），gcc生成的代码

1.  将值从内存加载到寄存器
2.  增加寄存器的内容
3.  将寄存器保存回内存。

这远非原子性的。

```
$ cat t.c
volatile int a;

void func(void)
{
    a++;
}
[19:51:52 0 ~] $ gcc -O2 -c t.c
[19:51:55 0 ~] $ objdump -d t.o

t.o:     file format elf32-i386

Disassembly of section .text:

00000000 <func>:
   0:   a1 00 00 00 00          mov    0x0,%eax
   5:   83 c0 01                add    $0x1,%eax
   8:   a3 00 00 00 00          mov    %eax,0x0
   d:   c3                      ret 
```

不要被指令`0x0`中的愚弄了`mov`，那里有 4 个字节的空间，链接器会在链接`a`此目标文件时为那里填写结果内存地址。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-08T17:57:15.257

由于没有人回答您的实际问题，而是向您展示如何以一种始终有效的方式进行操作：

线程 1 加载值为 0

线程 2 加载值为 0

线程 1 递增存储 1

线程 2 递增其本地寄存器副本的值并存储 1。

正如您所看到的，最终结果是一个等于 1 而不是 2 的值。最后并不总是 2。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-08T17:55:15.623

不能保证。您可以使用该`lock xadd`指令来实现相同的效果，或者使用 C++ `std::atomic`，或者使用`#pragma omp atomic`，或者已经编写的任何数量的其他并发解决方案，以节省您重新发明轮子的麻烦。

# php - 如何强制 apache 使用不同的 IP 从远程主机获取数据

> ID：10503744
> 
> 赞同：0
> 
> 时间：2012-05-08T17:48:17.070
> 
> 标签：php, apache, ip, vps

我已经在 VPS 上安装了 apache2。我的 VSP 有两个有效的 IP 地址。我在我的服务器上使用rapidleech 从一些共享站点（例如rapidshare）下载一些文件。
我的问题是这些站点中的大多数都是 IP 敏感的（我的意思是它们不允许通过单个 IP 并行访问），所以我想使用我的两个 VSP IP 同时访问服务器并并行下载两个文件！在向下载服务器发送请求（通过 PHP 脚本）时，如何配置 apache 服务器以使用不同的 IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:55:10.217

由于我怀疑您正在使用 cURL 进行数据传输，请查看

```
curl_setopt($curlresource , CURLOPT_INTERFACE , '111.222.333.444'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:49:22.463

这不是配置 apache 的问题，而是配置路由的问题。你如何做到这一点取决于你的平台。

# c++ - 字符串中的子序列号

> ID：10503745
> 
> 赞同：0
> 
> 时间：2012-05-08T17:48:17.010
> 
> 标签：c++, algorithm

我在一个包含 10 个项目的数组中获得最长的连续递增数字

```
int list[] = {2,3,8,9,10,11,12,2,6,8};
int start_pos = 0;
int lenght=0; // lenght of the sub-~consetuve
for (int a =0; a <=9; a++ )
{

    if ((list[a]+1) == (list[a+1])) {
        // continue just the string;
        lenght++;
    } else {
        start_pos = a;
    }
}
cout << lenght  << " and start in " << start_pos;
getchar(); 
```

但它不起作用，它应该返回 length & start_pos （ 3 和 lenght 4 ），因为最长的增加是从 9 , 10 , 11 , 12 但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:36:10.633

我自己做的：

```
#include <iostream>

using namespace std;
bool cons(int list[] , int iv) { bool ret=true; for (int a=0; a<=iv; a++) { if (list[a] != list[a+1]-1) ret=false; } return ret; }

void main() {
int str[10] = {12,13,15,16,17,18,20,21};
int longest=0;
int pos=0;
for (int lenght=1; lenght <= 9; lenght++) {
    int li[10];
    for (int seek=0; seek <= 9; seek++) {
        for (int kor=0; kor <= lenght-1; kor ++ ) {
            li[kor] = str[seek+kor];
        }
        if (cons(li , lenght-2)) {
            longest = lenght;
            pos=seek;
        } 
    }
}

for (int b=pos; b <= pos+longest-1; b++) cout << str[b] << " - "; cout << "it is the end!" << endl; getchar();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:02:09.497

简单的想法：序列的起点、终点和长度。

运行循环 i

序列将在当前数字（在索引 i 处）小于下一个数字 1 => 起点集 = i 时开始

当条件高于 false => 获取终点 => 获取长度 = 结束 -start（使更多变量称为 max 以比较长度）=> 结果可能是最大值，重置起点，终点 = 0 序列结束时再次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:55:18.847

假设您实际上是指*subsequence*，只需猜测您的序列开始的数字，然后运行线性扫描。如果您的意思是子字符串，那就更容易了 --- 作为练习留给 OP。

线性扫描是这样的：

```
char next = <guessed digit>;
int len = 0;
char *ptr = <pointer to input string>;
while (*ptr) {
  if ((*ptr) == next) {
    next = next + 1;
    if (next > '9') next = '0';
    len++;
  }
  ptr++;
} 
```

现在用一个设置为从“0”到“9”的所有数字的循环包装它，你就完成了，选择一个长度最长的。

# java - 如何在 Java 中使用 args 新建一个类？

> ID：10503748
> 
> 赞同：3
> 
> 时间：2012-05-08T17:48:23.117
> 
> 标签：java, constructor

```
public class Test{
    public void Test(String name){};
    public static void main()
    {
        Test t=new Test("right");
    }
} 
```

上面的代码在编译时有错误，谁能告诉我如何在Java中使用带有arg的构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:50:24.857

没有带参数的构造函数：

```
public void Test(String name){}; //method with Test name
public Test(String name){}; //constructor 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T17:49:56.193

正确的版本如下

```
public class Test{
    public Test(String name){};
    public static void main(String args [])
    {
        Test t=new Test("right");
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T17:50:02.443

[构造函数没有返回类型。](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)改变

```
public void Test(String name){}; 
```

至

```
public Test(String name){}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T17:50:18.420

`public static void main()`应该是`public static void main(String[] somethingulike)` 你应该遵循的默认值

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T17:50:52.030

您的错误在于您如何定义构造函数。构造函数没有返回类型。

```
public class Test{
    public Test(String name){};
    public static void main()
    {
        Test t=new Test("right");
    }
} 
```

除此之外，你得到它！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T17:49:58.413

```
public class Test{
    private String name;
    public Test(String name){ this.name = name; };
    public static void main(String [] args)
    {
        for (String arg : args) {
            Test t=new Test(arg);
        }

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T17:57:41.573

构造函数也`methods`没有`return`类型（void 或其他返回类型）。由于您定义类似于构造函数但具有返回类型，编译器认为它是一种方法并且它不会为此抱怨，但是当您尝试使用参数构造函数实例化类时它失败了，因为它无法找到构造函数那种类型的。如果没有定义显式构造函数，java 编译器将自动使用默认构造函数，即无参数构造函数。此外，您的主要方法应该具有`String[] args`as 参数。

# excel - 关于 Excel 中的自动筛选

> ID：10503766
> 
> 赞同：0
> 
> 时间：2012-05-08T17:49:38.390
> 
> 标签：excel

我有两列的表。团队名称和 % win 。有没有办法可以使用自动筛选或筛选列出赢得超过 20% 的球队？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:50:42.257

是的。突出显示您的表格，打开自动过滤器，并将条件设置为赢百分比列的赢百分比“大于”20%。

# php - 选择查询仅获取第一行

> ID：10503768
> 
> 赞同：1
> 
> 时间：2012-05-08T17:49:43.973
> 
> 标签：php, mysql

$pKeyArray 只打印满足 WHERE 子句的数据库中的第一行，为什么不显示满足 WHERE 子句的所有行，我不想把它放在任何循环中，我只需要一个 P_Key 的数组所有行。

```
$getPKey = "SELECT P_Key FROM likersTable WHERE executed=0";
$PKeyDetails = mysqli_query($dbConnect,$getPKey)
                or die('Some error in post id');
$pKeyArray = mysqli_fetch_array($PKeyDetails);
print_r($pKeyArray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:52:42.643

您需要`mysqli_fetch_array()`为每一行调用。

```
while ($pKeyArray = mysqli_fetch_array($PKeyDetails)) {
    print_r($pKeyArray);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:52:42.053

使用[`mysqli_fetch_all`](http://us3.php.net/mysqli_fetch_all)：

```
$array = mysqli_fetch_all( $PKeyDetails); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:53:01.333

您必须使用循环，因为`mysqli_fetch_*()`函数每次调用仅返回一行。

使用此代码：

```
$getPKey = "SELECT P_Key FROM likersTable WHERE executed=0";
$PKeyDetails = mysqli_query($dbConnect,$getPKey)
                or die('Some error in post id');

while ($row=mysqli_fetch_array($PKeyDetails))
{
  // Do something with $row
} 
```

或使用[`mysqli_fetch_all()`](http://php.net/mysqli_fetch_all)：

```
$result = mysqli_fetch_all($PKeyDetails, MYSQLI_ASSOC); // or use MYSQLI_NUM 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T17:53:01.390

```
while($pKeyArray = mysqli_fetch_array($PKeyDetails)) {
    print_r($pKeyArray);
} 
```

# spring - Spring 3.0 RmiProxyFactoryBean：如何在运行时更改 serviceUrl？

> ID：10503769
> 
> 赞同：4
> 
> 时间：2012-05-08T17:49:45.877
> 
> 标签：spring, javabeans, rmi

我有一个这样的bean定义：

```
 <bean id="myService" class="org.springframework.remoting.rmi.RmiProxyFactoryBean">
    <property name="serviceInterface" value="org.myapp.MyService"/>
    <property name="serviceUrl" value="rmi://localhost:1099/myService"/>
</bean> 
```

我以这种方式检索服务 bean：

```
 ApplicationContext context = new ClassPathXmlApplicationContext("classpath:rmi-client-config.xml");
    MyService myService = context.getBean("myService", MyService.class); 
```

当然，它返回一个“MyService”实例，而不是 RmiProxyFactoryBean。

那么如何使用上面的 xml 定义而不是手动实例化 RmiProxyFactoryBean 来更改“serviceUrl”参数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:55:40.843

要获取`FactoryBean`实例而不是工厂创建的 bean，请使用`BeanFactory.FACTORY_BEAN_PREFIX`. IE

`RmiProxyFactoryBean rpfb = (RmiProxyFactoryBean) contex.getBean("&myService");`

# ios - ScrollView 或 TableView 作为水平表格视图的单元格

> ID：10503773
> 
> 赞同：2
> 
> 时间：2012-05-08T17:50:01.183
> 
> 标签：ios, gridview, scrollview, tableview, cell

我的目标是一种水平表格视图，其中每个单元格（现在让我们看看列）也是一个滚动区域。

Apple 不鼓励您在表格视图单元格内使用滚动视图，但是由于我的表格视图将被旋转，我认为它可以解决。

有没有人尝试过这个，如果是这样，你会推荐我建议如何做到这一点，或者你会建议使用某种自定义视图/网格框架吗？

快速涂鸦的想法：

![在此处输入图像描述](../Images/0b218c230f796da338dd373709b6ef0d.png)

# objective-c - 检查排队的 GCD 块？

> ID：10503776
> 
> 赞同：7
> 
> 时间：2012-05-08T17:50:07.750
> 
> 标签：objective-c, grand-central-dispatch

假设我有一个串行调度队列，我将几个操作排入队列。我已经读到，一旦操作被调度，我就无法取消操作。是否有可能至少查看我已分派的 GCD 块是否可以决定是否要分派另一个块？

例如，我将操作 A 分派到队列中，但在我的应用程序决定将另一个操作 A 加入队列后不久，因此现在有 2 个这样的操作排队。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:32:00.653

正如凯文巴拉德所说，你需要详细说明你到底想要做什么。您可以做的一件事是设置一个标志，例如`valid_`，然后您可以通过执行以下操作有效地取消队列中除当前项目之外的所有项目：

```
dispatch_async(queue, ^{
  if (valid_) {
    // perform your task here
  }
}); 
```

然后，每当您想“取消”队列时，只需将您的`valid_`标志设置为`NO`.

不过，请再次提供有关您要做什么的更多信息，我可以给您更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:49:40.827

由于 NSOperation 现在构建在 GCD 之上，您现在可以使用*addOperationWithBlock:*将您的块放在 NSOperationQueue 上，然后您可以调用NSOperationQueue 上的*操作*来获取未完成操作的 NSArray。

问题在于，这是两个以上的操作并且不是原子的，因此您的操作完全有可能在您获取*操作*数组并查看它是否包含在其中之间完成。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)

但是，NSOperation 有一个先决条件 API，因此您可以将另一个操作排入队列，该操作仅在您的第一个 NSOperation 完成时才会运行，并使用它来跟踪何时应该再次尝试将您的第一个 NSOperation 排入队列。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591)

# php - SimpleXMLElement 在馈送 FO XML 时不提供整个对象？

> ID：10503779
> 
> 赞同：0
> 
> 时间：2012-05-08T17:50:17.350
> 
> 标签：php, xml, simplexml, xsl-fo

我无法理解为什么当我将此 XML 转换为 SimpleXMLElement 以用于 XPath 时，我只得到如下所示的对象。我已经从头到尾验证了 XML，一切都很好。那么，什么给了？提前致谢。

```
$xml = new DOMDocument;
$xml->load($xml_output);
$xsl = new DOMDocument;
$xsl->load($xslt_template);
$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl); // attach the xsl rules

$fo_formatted = $proc->transformToXML($xml);
print_r($fo_formatted); // Results in:

  <?xml version="1.0" encoding="utf-8"?> <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xf="http://www.ecrion.com/xf/1.0" xmlns:xc="http://www.ecrion.com/2008/xc" xmlns:xfd="http://www.ecrion.com/xfd/1.0" xmlns:svg="http://www.w3.org/2000/svg" xmlns:msxsl="urn:schemas-microsoft-com:xslt" font-family="Times" font-size="12pt"> <fo:layout-master-set><fo:simple-page-master master-name="Letter Page" page-width="8.500in" page-height="11.000in"><fo:region-body region-name="xsl-region-body" margin="0.700in"/><fo:region-before region-name="xsl-region-before" display-align="after" extent="0.700in"/><fo:region-after region-name="xsl-region-after" display-align="before" extent="0.700in"/><fo:region-start region-name="xsl-region-start" extent="0.700in"/> <fo:region-end region-name="xsl-region-end" extent="0.700in"/> </fo:simple-page-master></fo:layout-master-set> <fo:page-sequence master-reference="Letter Page"> <fo:static-content flow-name="xsl-region-after"><fo:block>  </fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before"><fo:block> <fo:inline>Rob</fo:inline> <fo:inline>Shafar</fo:inline>< /fo:block></fo:static-content><fo:static-content flow-name="xsl-region-end"> <fo:block> </fo:block></fo:static-content> <fo:static-content flow-name="xsl-region-start"><fo:block>  </fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"> <fo:block> </fo:block><fo:block/><fo:block break-before="page">  </fo:block><fo:block> </fo:block></fo:flow></fo:page-sequence></fo:root>

$fo_formatted = new SimpleXMLElement( $fo_formatted );
print_r($fo_formatted); // Results in:

SimpleXMLElement Object
(
     [@attributes] => Array
         (
             [font-family] => Times
             [font-size] => 12pt
         )

) 
```

# android - GZIPInputStream 抛出未知格式（幻数 213c）

> ID：10503782
> 
> 赞同：4
> 
> 时间：2012-05-08T17:50:37.390
> 
> 标签：android, gzip, httpconnection, gzipinputstream

当我使用 GZIPInputStream 压缩从 Internet 获取的字节时，程序运行错误如下：

```
05-08 17:37:02.465: W/System.err(744): java.io.IOException: unknown format (magic number 213c)
05-08 17:37:02.465: W/System.err(744):  at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:84)
05-08 17:37:02.465: W/System.err(744):  at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:64)
05-08 17:37:02.475: W/System.err(744):  at com.Android.Sample.TestActivity.onCreate(TestActivity.java:54)
05-08 17:37:02.475: W/System.err(744):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-08 17:37:02.475: W/System.err(744):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-08 17:37:02.475: W/System.err(744):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-08 17:37:02.475: W/System.err(744):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-08 17:37:02.475: W/System.err(744):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-08 17:37:02.475: W/System.err(744):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 17:37:02.475: W/System.err(744):  at android.os.Looper.loop(Looper.java:123)
05-08 17:37:02.475: W/System.err(744):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-08 17:37:02.475: W/System.err(744):  at java.lang.reflect.Method.invokeNative(Native Method)
05-08 17:37:02.475: W/System.err(744):  at java.lang.reflect.Method.invoke(Method.java:507)
05-08 17:37:02.475: W/System.err(744):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-08 17:37:02.475: W/System.err(744):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-08 17:37:02.486: W/System.err(744):  at dalvik.system.NativeStart.main(Native Method) 
```

我的代码如下：

```
HttpGet request = new HttpGet("http://www.google.com");
HttpResponse response = new DefaultHttpClient().execute(request);
HttpEntity entity = response.getEntity();
InputStream stream = entity.getContent();
InputStream zippedStream = new GZIPInputStream(stream);
InputStreamReader reader = new InputStreamReader(zippedStream);
BufferedReader buffer = new BufferedReader(reader); 
```

如果我只是使用

```
InputStreamReader reader = new InputStreamReader(stream); 
```

不要压缩流，它会好的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-18T17:24:42.287

您必须在接收输入流之前检查**Content-Encoding 。**如果响应以 GZIP 编码，请使用[GZIPInputStream](http://developer.android.com/reference/java/util/zip/GZIPInputStream.html)。这是我在[API 调用](https://github.com/petrnohejl/Android-Templates-And-Utilities/tree/master/Src-APICall/java/client)中使用的解决方案。

```
InputStream responseStream = null;
...
// receive response
String encoding = connection.getHeaderField("Content-Encoding");
boolean gzipped = encoding!=null && encoding.toLowerCase().contains("gzip");
try
{
    InputStream inputStream = connection.getInputStream();
    if(gzipped) responseStream = new BufferedInputStream(new GZIPInputStream(inputStream));
    else responseStream = new BufferedInputStream(inputStream);
}
catch(FileNotFoundException e)
{
    // error stream
    InputStream errorStream = connection.getErrorStream();
    if(gzipped) responseStream = new BufferedInputStream(new GZIPInputStream(errorStream));
    else responseStream = new BufferedInputStream(errorStream);
}
...
// TODO: close stream 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T03:01:33.250

Are you sure what you are getting is compressed? If you are getting 'unknown format' it most certainly isn't. You should check response headers and enable GZIP accordingly.

# r - 插入符号：将 LOOCV 与 rpart 一起使用时出错

> ID：10503784
> 
> 赞同：7
> 
> 时间：2012-05-08T17:50:42.080
> 
> 标签：r

我正在尝试使用 R caret 模块进行模型生成，并且我想使用一些交叉验证功能。我发现唯一可以与之一起使用的交叉验证功能`rpart`是`LOOCV`（留下一个交叉验证）。

以下代码引发错误：

```
library(cart)
data(trees)
formula=Volume~Girth+Height
train(formula, data=trees,  method='rpart') 
```

> 警告消息：在nominalTrainWorkflow（dat = trainData，info = trainInfo，method = method，：重新采样的性能测量中缺少值。

这个错误是什么意思，我该如何让它消失？我在互联网上搜索，没有一次点击此错误消息。我将错误追溯到`rpart`模型生成。它以某种方式输出此错误消息，所有其他模式生成方法都可以正常工作！

如果我使用一切正常`LOOCV`。

我将警告追溯到[workflows.R](http://r-forge.r-project.org/scm/viewvc.php/pkg/caret/R/workflows.R?view=markup&root=caret)文件，但我不明白为什么会抛出此警告。

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8    
 [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] parallel  stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
 [1] earth_3.2-3           plotrix_3.4           plotmo_1.3-1         
 [4] leaps_2.9             doMC_1.2.5            multicore_0.1-7      
 [7] iterators_1.0.6       forecast_3.20         RcppArmadillo_0.3.0.2
[10] Rcpp_0.9.10           fracdiff_1.4-1        tseries_0.10-28      
[13] zoo_1.7-7             quadprog_1.5-4        caret_5.15-023       
[16] foreach_1.4.0         cluster_1.14.2        reshape_0.8.4        
[19] plyr_1.7.1            lattice_0.20-6        mda_0.4-2            
[22] class_7.3-3           rpart_3.1-52          data.table_1.8.0     

loaded via a namespace (and not attached):
[1] codetools_0.2-8 compiler_2.15.0 grid_2.15.0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T17:20:45.550

使用 R Mailinglist 和`caret`作者的帮助，我找到了以下解决方案：

如果由于某种原因生成的模型是恒定的，则会发生错误。在这种情况下，常数意味着对于所有输入值，模型总是产生相同的值。在这种情况下，R^2 的计算将失败。R^2 由插入符号默认计算。由于插入符号不使用 R^2 值进行模型选择，您可以跳过此错误。

剩下两个问题：

*   如果模型是常数，我不清楚为什么 R^2 计算会失败。`caret`如果模型预测中没有至少两个不同的值，则代码显式失败。我用没有这些限制的自写计算替换了 R^2 计算。
*   为什么 rpart 有时会生成常量模型的问题仍然悬而未决。尤其是为什么它只为除 LOOCV 之外的其他交叉验证生成常量模型。

简而言之：您可以忽略警告，如果需要，编写自己的 R^2 来修复警告。

# java - 为什么在 Java 中使用 toString 后十六进制表示 89 不能正确打印为 ‰？

> ID：10503790
> 
> 赞同：1
> 
> 时间：2012-05-08T17:51:00.577
> 
> 标签：java, string, hex, tostring, xor

在执行 XOR 并将十六进制转换为字符串之后，我期望十六进制值“89”显示为“‰”，但 Eclipse 显示的是“？”。调试时，字符实际上是空白的。为什么？

1.  我有字符串“r”，我将其转换为十六进制 =>“72”。
2.  然后我用“FB”（û）=>“89”对“72”进行异或。
3.  然后我使用这个函数将“89”转换为字符串：

    ```
    public static String HexToString(String hex){
      StringBuilder sb = new StringBuilder();
      StringBuilder temp = new StringBuilder();

      for( int i=0; i<hex.length()-1; i+=2 ){

          //grab the hex in pairs
          String output = hex.substring(i, (i + 2));

          //convert hex to decimal
          int decimal = Integer.parseInt(output, 16);

          //convert the decimal to character
          sb.append((char)decimal);

          temp.append(decimal);
      }
      System.out.println("Decimal : " + temp.toString());

      return sb.toString();
      } 
    ```

将结果打印到控制台后，我看到“？” 代替 ”‰”。怎么了？

编辑：这是显示十进制值和（字符）十进制调试值的屏幕截图。 ![(char)十进制](../Images/b31d42cfba4ffb15187723e4dc710962.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T18:05:22.447

# ios - 您如何确定 XCode 使用的构建选项，以便您可以将它们与 xcodebuild 一起使用？

> ID：10503793
> 
> 赞同：1
> 
> 时间：2012-05-08T17:51:03.023
> 
> 标签：ios, xcode

我想用 xcodebuild 构建我的 iOS 项目，但要做到这一点，我需要弄清楚当我在 XCode 中构建和运行时 XCode 用来构建我的项目的所有标志和选项。

如何找出构建过程中使用的编译标志和此类 XCode，以便找出等效的 xcodebuild 命令？当我在我的项目中包含像 RestKit 这样的外部库时，我对让它工作特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:01:50.770

您需要做的就是告诉`xcodebuild`目标和配置；其他所有内容都包含在与配置相关的项目中。

请参阅[手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode3build.1.html)。

# java - 安装 7BEE（java 构建工具）

> ID：10503797
> 
> 赞同：0
> 
> 时间：2012-05-08T17:51:13.957
> 
> 标签：java, compilation

有人可以帮我安装 7BEE 吗？ [7bee](http://www.softpedia.com/get/Programming/Coding-languages-Compilers/7Bee.shtml) 我快疯了……

它说只导航到部署文件夹并输入安装。但随后它要求指定安装目录。无论我输入什么，我都无法让该死的东西工作。它最后说安装成功，但是当我输入：bee时，什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:32:50.480

您需要点击的安装文件是一个批处理文件（install.bat）。当你双击它的名字运行它时，无论失败还是成功，它都会自动运行并在结束时关闭。因此，要查看所有消息，1- 从开始菜单 (win7) 以管理员身份运行 cmd 2- 移动到您复制 7bee 文件的文件夹（即 d:>cd 7bee\deploy）。3- 运行 install.bat（在 d:\7bee\deploy> 前面输入 install）。安装开始，它要求您提供安装 7bee 的地址。4- 按回车键或输入您想要的文件夹，例如 d:\7bee，然后按回车键。然后它会要求提供 java home 地址。5- 输入 c:\program files\java\jdk1.7.0 （对我来说，对你来说可能会有所不同），仅此而已。安装成功后，它会提示您“安装成功” Don'

# oracle - 如何在不创建新表（临时或其他）的情况下更新/插入表

> ID：10503798
> 
> 赞同：2
> 
> 时间：2012-05-08T17:51:15.080
> 
> 标签：oracle, upsert

背景：我的团队有一个更新聚合表的 etl 作业。每行包含特定日期的数据，但该行可以并且将在行日期之后更新（这意味着任何行都可以包含来自多个作业的数据）。这个 ETL 作业上周错过了一天的一些数据，现在我需要回填它。

问题：我有丢失的数据，我打算将这些数据转储到一个临时表中，然后将它与 agg 表合并。这样我就可以处理 ETL 作业是否已经包含该数据的行（更新）或者是否需要添加新行（插入），但是我没有足够的权限来创建临时表，而且我d 宁愿不让 DBA 参与进来。

问题：我能否在不创建临时表的情况下执行插入/更新行为（顺便说一下，这是 Oracle SQL）。

编辑：数据来自 tsv 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:44:34.630

为什么要避免涉及 DBA？DBA 应该对数据库中发生的事情有充分的了解，因为他们最终要对数据库中的数据状况负责。所以你不应该和他们玩鬼鬼祟祟的突击队。

由于您有一个缺少数据的文件，因此将其呈现给数据库的最简单方法是使用[外部表](http://docs.oracle.com/cd/B14117_01/server.101/b10825/et_concepts.htm)。这需要创建表，可能还需要创建目录对象。您将需要 DBA 的帮助来完成此任务。

避免创建数据库对象的唯一方法是将 TSV 文件转换为一系列 DML 语句。支持正则表达式和/或记录宏的 IDE 在这里将证明是无价的。我喜欢[文本板](http://www.textpad.com/)；其他编辑器可用。

在 Oracle 中执行 upserts 的 DML 语句是[MERGE 语句](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)。您需要注意的一件事是新近度。您丢失的数据来自上周。如果存在一行，则它可能已*在中间期间*添加或修改。您必须编写 MERGE 语句，这样它就不会用较旧的数据覆盖较新的数据。希望您的表具有有用的元数据列，例如 DATE_CREATED 和 LAST_UPDATED。

# c# - 如何在 C# 中清除矩形的填充？

> ID：10503800
> 
> 赞同：2
> 
> 时间：2012-05-08T17:51:24.037
> 
> 标签：c#, graphics, drawing, gdi

如何清除矩形的填充？我只想保留边界。

```
g.FillRectangle(Brushes.Transparent, x, y, w, h); 
```

没有用，带 alpha 的 aRGB 也没有，我想删除填充，所以只剩下边框了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:54:43.657

所以你想要的是

```
g.DrawRectangle(Pens.Black,x,y,w,h); 
```

我认为

编辑：由于 OP 要求的变化，这并不完全是他想要的答案，尽管它不是不正确的，因此我选择暂时将其留在这里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-10T11:59:03.990

设置剪辑清除后，您必须为图形设置新剪辑，然后将剪辑恢复正常。

```
g.SetClip(new Rectangle(x,y,w,h), CombineMode.Replace);
g.Clear(Color.Transparent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T18:26:59.017

好的，所以您正在使用选择工具，您可能想首先告诉我们。

创建一个新的窗体应用程序。

在表单事件中使用 mousedown、mouseup 和 mousemove

```
public Point MouseXY = new Point(0, 0);

private void Form1_MouseDown(object sender, MouseEventArgs e)
    {
        MouseXY = e.Location;
    }

    private void Form1_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            int width = e.Location.X - MouseXY.X;
            int height = e.Location.Y-MouseXY.Y;
            this.Refresh();
            CreateGraphics().DrawRectangle(Pens.Blue, new Rectangle(MouseXY, new Size(width,height)));

        }
    }

    private void Form1_MouseUp(object sender, MouseEventArgs e)
    {
        this.Refresh();
    } 
```

这段代码并不完美，我也不假装它是完美的。这将做的是绘制一个蓝色矩形，从您单击的位置开始并跟随鼠标。它不会绘制负矩形，您必须确定您的鼠标当前是在起点的左侧还是上方，然后相应地绘制矩形，但我认为您可以自己弄清楚。矩形也不是持久的，尽管我不相信你会想要它。

# forms - 如何检查表单域是否使用 capybara 正确预填？

> ID：10503802
> 
> 赞同：159
> 
> 时间：2012-05-08T17:51:44.257
> 
> 标签：forms, rspec, capybara

我有一个带有适当标签的字段，我可以毫无问题地用 capybara 填写：

```
fill_in 'Your name', with: 'John' 
```

我想在填写之前检查它的值，但无法弄清楚。

如果我在`fill_in`以下行之后添加：

```
find_field('Your name').should have_content('John') 
```

该测试失败，尽管之前的填充工作正如我通过保存页面验证的那样。

我错过了什么？

* * *

## 回答 #1

> 赞同：340
> 
> 时间：2013-05-16T10:11:50.597

另一个漂亮的解决方案是：

```
page.should have_field('Your name', with: 'John') 
```

或者

```
expect(page).to have_field('Your name', with: 'John') 
```

分别。

另请参阅[参考资料](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_field%3F-instance_method)。

*注意*：对于禁用的输入，您需要添加 option `disabled: true`。

* * *

## 回答 #2

> 赞同：189
> 
> 时间：2012-05-08T17:58:42.277

您可以使用*xpath 查询*来检查是否存在`input`具有特定值的元素（例如“John”）：

```
expect(page).to have_xpath("//input[@value='John']") 
```

有关详细信息，请参阅[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)。

对于也许更漂亮的方式：

```
expect(find_field('Your name').value).to eq 'John' 
```

编辑：现在我可能会使用 have_selector

```
expect(page).to have_selector("input[value='John']") 
```

如果你正在使用页面对象模式（你应该是！）

```
class MyPage < SitePrism::Page
  element :my_field, "input#my_id"

  def has_secret_value?(value)
    my_field.value == value
  end
end

my_page = MyPage.new

expect(my_page).to have_secret_value "foo" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-21T21:47:11.630

如果您特别想测试占位符，请使用：

```
page.should have_field("some_field_name", placeholder: "Some Placeholder") 
```

或者：

```
expect(page).to have_field("some_field_name", placeholder: "Some Placeholder") 
```

如果要测试用户输入的值：

```
page.should have_field("some_field_name", with: "Some Entered Value") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-27T20:54:14.523

如果该字段是 id 为“some_field”的隐藏字段，那么您可以使用

```
expect(find("input#somefield", :visible => false).value).to eq 'John' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-15T09:49:24.053

我想知道如何做一些稍微不同的事情：我想测​​试该字段是否有*一些*价值（同时利用[Capybara 重新测试匹配器直到匹配的能力](https://github.com/teamcapybara/capybara#asynchronous-javascript-ajax-and-friends)）。事实证明，可以使用“过滤器块”来执行此操作：

```
expect(page).to have_field("field_name") { |field|
  field.value.present?
} 
```

# c# - 由于 API 函数，C# XAML GUI 冻结

> ID：10503812
> 
> 赞同：0
> 
> 时间：2012-05-08T17:52:40.360
> 
> 标签：c#, api, user-interface, stockquotes

我有一个程序通过 API 向我推送股票报价。该程序还有一个用 XAML 制作的前端，它在程序运行时冻结（即处理 API 发送给我的信息）。我已经尝试使用 Dispatcher.Invoke 和/或 BackgroundWorker 并且已经阅读了大量线程，但无法将其解冻。也许我只是做错了什么。我在这里附上了相关的代码。希望有人能帮忙。

```
 private void QuoteUpdate(QuoteInfo info)
    {
        BackgroundWorker bwQuoteUpdate = new BackgroundWorker();
        bwQuoteUpdate = new BackgroundWorker();
        bwQuoteUpdate.WorkerSupportsCancellation = true;

        bwQuoteUpdate.DoWork += bwQuoteUpdate_DoWork;            
        bwQuoteUpdate.RunWorkerAsync(info);         
    }

    private void bwQuoteUpdate_DoWork(object sender, DoWorkEventArgs e)
    {
        try
        {
            Dispatcher.Invoke(DispatcherPriority.Normal, new ThreadStart(() =>
            {
                QuoteInfo info = e.Argument as QuoteInfo;
                //logical functions and work are here

            }));
        }
        catch (Exception ex)
        {
            System.Windows.Forms.MessageBox.Show("Error in QuoteUpdate: " + ex.Message, "Exception Thrown");
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:04:23.257

尽管您创建 a`BackgroundWorker`的目的是在后台线程上执行长时间运行的任务，但您仍在将所有处理分派回 UI 线程。

```
private void bwQuoteUpdate_DoWork(object sender, DoWorkEventArgs e)
{
    // Code here runs on background thread.

    Dispatcher.Invoke(DispatcherPriority.Normal, new ThreadStart(() =>
    {
        // Code here runs on UI thread.
    }));
} 
```

您需要做的是*首先*在后台线程上执行计算，但不要更新任何 UI 组件；相反，将所有结果存储在局部变量中。然后，一旦完成，使用 将`Dispatcher.Invoke`控制分派回 UI 线程，并使用存储在本地变量中的结果来更新 UI。

例如：

```
private void bwQuoteUpdate_DoWork(object sender, DoWorkEventArgs e)
{
    // Code here runs on background thread.
    QuoteInfo info = e.Argument as QuoteInfo;
    string result = PerformLongRunningProcessing(info);

    Dispatcher.Invoke(DispatcherPriority.Normal, new ThreadStart(() =>
    {
        // Code here runs on UI thread.
        this.resultTextBox.Text = result;
    }));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:04:40.487

是的，你做错了什么。计算应该单独在线程中完成，只添加**UI 更改**应该在`Dispatcher.Invoke`.

如果您通过 DataBinding 使用`INotifyPropertyChange`，则完全放弃`Dispatcher.Invoke`，因为对 UI 线程的更改是自动完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T20:45:01.503

尝试

```
Dispatcher.BeginInvoke(...) 
```

# r - 如何计算月均值？

> ID：10503813
> 
> 赞同：0
> 
> 时间：2012-05-08T17:52:40.297
> 
> 标签：r, weather

我有这样的每日天气预报。**我想要的是计算最高、最低和观测温度的月平均值，然后绘制这三条线**。我已经像这样转换日期格式：

```
Date = as.POSIXlt(Weather2011$Date, format = "%m/%d/%Y")  
Year = as.numeric(format(Date, format = "%Y"))
Month = as.numeric(format(Date, format = "%m"))
Week = as.numeric(format(Date, format = "%U"))
Weekday = as.numeric(format(Date, format = "%w")) 
```

`Weather2011`看起来像这样：

```
Date      Max.Temp  Min.Temp  Temp  Date        Year   Month  Week  Weekday
6/3/2010  87        63        63    2010-06-03  2010   6      22    4
6/4/2010  83        63        73    2010-06-04  2010   6      22    5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T18:59:24.383

我发现 tapply 效果很好。前任。

```
x <- seq(from=as.Date("2000-01-01"), to=as.Date("2004-12-31"), by="day")
y <- sin(seq(from=0, to=2*pi*5,length.out=length(x)))+rnorm(length(x))
yyyymm <- paste(format(as.POSIXlt(x), format="%Y-%m"), "01", sep="-")
MEAN <- tapply(y, yyyymm, mean)
MAX <- tapply(y, yyyymm, max)
MIN <- tapply(y, yyyymm, min)
#plots
x11()
par(mfcol=c(1,2))
plot(x,y, ylim=range(MEAN, MAX, MIN), ylab="", xlab="")
plot(as.POSIXlt(names(MEAN)), MEAN, t="l", ylim=range(MEAN, MAX, MIN), ylab="", xlab="")
lines(as.POSIXlt(names(MEAN)), MAX, lty=2)
lines(as.POSIXlt(names(MEAN)), MIN, lty=2) 
```

![在此处输入图像描述](../Images/19f62381be320f26fd07d1813c3696d8.png)

# machine-learning - 使用基于规则的方法而不是适当的算法进行二进制分类

> ID：10503816
> 
> 赞同：3
> 
> 时间：2012-05-08T17:52:50.697
> 
> 标签：machine-learning, rules, classification, bayesian

问题陈述有点像这样：

> 给定一个网站，我们必须将其分类为两个预定义的类别之一（比如它是否是电子商务网站？）

我们已经使用多种预处理技术（停用词删除、词干提取等）和适当的特征尝试了朴素贝叶斯算法。

我们希望将准确度提高到 90 或更接近，但我们无法从这种方法中获得。

这里的问题是，在手动评估准确性时，我们会在网页上寻找一些标识符（例如结帐按钮、商店/购物、贝宝等），这些标识符有时会在我们的算法中被遗漏。

我们在想，如果我们对这些标识符太确定，为什么不创建一个`rule based classifier`我们将根据一组规则（将根据某些优先级编写）对页面进行分类的位置。

例如，如果它包含商店/购物并且有结帐按钮，那么它就是一个电子商务页面。以及许多按优先级顺序排列的类似规则。

根据一些规则，我们也会访问网站的其他页面（目前，我们只访问主页，这也是精度不高的一个原因）。

基于规则的方法我们将面临哪些潜在问题？还是对我们的用例更好？

`FOIL, AQ`用复杂的算法（例如等）创建这些规则是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:26:59.947

```
The issue here is, while evaluating the accuracy manually, we look for a few identifiers on web page (e.g. Checkout button, Shop/Shopping,paypal and many more) which are sometimes missed in our algorithms. 
```

那么为什么不在分类方案中包含这些信息呢？在 html 中找到付款/结帐按钮并不难，因此这些功能的存在绝对应该是功能。一个好的分类器依赖于两件事——好的数据和好的特征。确保你有两个！

如果你必须做一个基于规则的分类器，那么或多或少地把它想象成一个决策树。如果你使用的是函数式编程语言，这很容易做到——基本上只是递归，直到你到达一个端点，此时你会得到一个分类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:44:50.070

***决策树***算法可以获取您的数据并返回用于预测未标记实例的规则集*。*

实际上，决策树实际上只是一个*递归下降分区器，由一组规则组成*，其中每个规则位于树中的一个节点上，并将该规则应用于未标记的数据实例，将该实例发送到左叉或右叉。

许多决策树实现显式生成规则集，但这不是必需的，因为规则（规则是什么以及该规则在决策流中的位置）很容易通过查看表示训练有素的决策树分类器。

特别是，每个规则只是对特定特征（数据列或字段）中特定值的布尔测试。

例如，假设每个数据行中的一个特征描述了**Application Cache**的类型；进一步假设这个特性有三个可能的值，*memcache*、*redis*和*custom*。那么规则可能是应用缓存 | memcache，还是*这个数据实例有基于redis的Application Cache？*

从决策树中提取的规则是**布尔值**——真或假。按照惯例，False 由左边缘表示（或链接到下面的子节点和该父节点的左侧）；True 由右侧边缘表示。

因此，一个新的（未标记的）数据行从根节点开始，然后根据根节点处的规则被回答为 True 还是 False 向下发送到右侧或左侧。应用下一个规则（至少在树层次结构中的级别），直到数据实例到达最低级别（没有规则的节点或叶节点）。

一旦数据点被过滤到一个叶节点，那么它本质上就被分类了，因为每个叶节点都有一个与之关联的训练数据实例的分布（例如，25% 好 | 75% 坏，如果好和坏是类标签）。这种经验分布（在理想情况下由只有一个类标签的数据实例组成）确定了未知数据实例的估计类标签。

免费和开源库***[Orange](http://orange.biolab.si/)***有一个[决策树模块](http://orange.biolab.si/doc/widgets/_static/Classify/ClassificationTree.htm)（特定 ML 技术的实现在 Orange 中称为“小部件”），这似乎是 C4.5 的可靠实现，这可能是使用最广泛的也许是最好的决策树实现。

一个 O'Reilly 站点有一个[关于决策树构造和使用的教程，包括](http://onlamp.com/pub/a/python/2006/02/09/ai_decision_trees.html)**Python**中工作决策树模块的源代码。

# vbscript - 如何使用 VBScript 将命令提示符输出到日志文件

> ID：10503823
> 
> 赞同：1
> 
> 时间：2012-05-08T17:53:10.823
> 
> 标签：vbscript

我不是程序员，所以我不想过分激怒这个论坛里的好人。我的问题是我想使用 VBScript 远程登录到 Linux 设备，发出**DF**命令并将所有响应输出到我可以稍后解析的日志文件。我最初找到了一种成功 Telnet 的方法，但我一直在尝试关于文本文件输出要求但没有成功。下面的代码当然不起作用，但我想知道我是否接近正确的方法？

```
Dim WshShell, oExec  
Set WshShell = CreateObject("WScript.Shell")  
Set oExec = WshShell.Exec("cmd /c dir")

WshShell.run"cmd" '*** open command window ***  
WScript.Sleep 250  

WshShell.SendKeys("{Enter}")  
WshShell.SendKeys"telnet 10.13.2.2"  
WshShell.SendKeys("{Enter}")  
WScript.Sleep 2000  

WshShell.SendKeys"root"  
WshShell.SendKeys("{Enter}")  
WScript.Sleep 1500  

WshShell.SendKeys"password"  
WshShell.SendKeys("{Enter}")  
WScript.Sleep 1500  

Set objFSO  = CreateObject("Scripting.FileSystemObject")  
Set objLogFile = objFSO.OpenTextFile("C:\VBSmemSize.txt", 2, True)  

WshShell.SendKeys"df /mnt/cf"  
WshShell.SendKeys("{Enter}")  
Do  
  strFromProc = oExec.Stdout.Readline()  
  WScript.Echo strFromProc  
Loop While Not objLogFile.StdOut.atEndOfStream 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:08:50.637

您可以捕获来自外部命令的输出，但不能像使用 sendkeys 那样同时与它们交互。这是一个有效的例子

```
Function ExecPing(strTarget)
  Set objShell = CreateObject("WScript.Shell")
  Set objExec = objShell.Exec("ping -n 2 -w 1000 " & strTarget)
  strPingResults = LCase(objExec.StdOut.ReadAll)
  If InStr(strPingResults, "antwoord van") Then '"reply from" in E
    WScript.Echo VbCrLf & strTarget & " responded to ping."
    ExecPing = True
  Else
    WScript.Echo VbCrLf & strTarget & " did not respond to ping."
    ExecPing = False
  End If
End Function

ExecPing pcname 
```

# c# - 如何在 C# 中过滤掉文件夹的名称？

> ID：10503826
> 
> 赞同：0
> 
> 时间：2012-05-08T17:53:22.207
> 
> 标签：c#, .net, string, filter, directory

我有代码搜索目录并挑选出所有文件夹，但我只希望它挑选出以数据开头的文件夹。我该怎么做？

下面是我通过目录的代码：

```
 string[] filePaths = Directory.GetDirectories(defaultPath).Where(Data => !Data.EndsWith(".")).ToArray(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T17:56:25.053

无需使用 LINQ；[`GetDirectories`](http://msdn.microsoft.com/en-us/library/6ff71z1w.aspx)支持搜索模式，并且可能会明显更快，因为过滤可能由文件系统完成，*然后*在 .NET 中枚举结果。

```
string[] filePaths = Directory.GetDirectories(defaultPath, "Data*"); 
```

请注意，这`*`是一个匹配零个或多个字符的通配符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:56:32.380

如果“以数据开头”，您只是表示文件夹名称以“数据”开头，这将起作用

```
string[] filePaths = Directory.GetDirectories(defaultPath)
    .Where(s => s.StartsWith("Data") && !s.EndsWith(".")).ToArray(); 
```

# clearcase - 移动标签后的错误版本 (ClearCase)

> ID：10503827
> 
> 赞同：2
> 
> 时间：2012-05-08T17:53:22.273
> 
> 标签：clearcase, clearcase-ucm

我今天早上对一个流进行了基线化，但是有人对他们不希望包含在基线中的几个文件进行了更改。

我使用版本树将标签从最新版本移动到以前的版本。（首先，这是错的吗？）

然后我将该基线交付给另一个项目的流。它工作正常，所有正确版本的文件都过来了。但是，现在查看的文件是版本 22，并且有一个我看不到的版本 23。（我希望看到较新的版本，即使我不希望它包含在基线中。）有没有办法让视图显示文件的最新版本？

注意：我尝试创建一个新基线，但 ClearCase 在基线中包含了版本 22 而不是版本 23...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:02:10.727

当基线没有引用正确的内容时，正确的做法是：

*   修复该内容（在“cleartool rmname”中删除您不想看到的文件，签出/签入您要修复的文件，创建*新*版本）
*   创建一个新基线（您可以使用相同的名称或“标题”：ClearCase 将根据该名称生成不同的基线 id `BLNAME.xxxx`：：请参阅“ [Clearcase UCM 中完整基线和增量基线有什么区别？](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca/9696988#9696988) ”）

移动标签不是推荐的解决方案（如果该标签链接到基线，实际上应该是不可能的）

然后，您将该新基线交付给您想要的任何其他流。
但是，如果源 Stream 有一些新版本，那么您将需要创建*另一个*基线，包括所述新版本，并交付该新基线，以便您的目标项目查看和引用它。

# c# - 如何从表单在 asp.net C# 中创建用户生成的页面

> ID：10503830
> 
> 赞同：0
> 
> 时间：2012-05-08T17:53:28.340
> 
> 标签：c#

我是 asp.net C# 的新手。如何创建一个表单，用户可以在其中填写几个文本字段（例如页面名称），然后在提交时创建一个新页面。然后他们将能够从选择框中选择页面并转到它以添加内容。

我不知道如何实现这一点，我不需要完整的 CMS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:01:01.113

您可以创建表单以将值输入到 sql 表中。因此，例如，您将有一个标题文本框、一个内容文本框，然后是一个按钮。在您的按钮操作中，您将把该数据输入到表格中。然后你可以创建一个导航，例如 - 为了保持它非常简单 - 从表名中选择所有标题。您将拥有这些标题作为您的页面。因此，单击标题后，您将有一个脚本来显示详细信息。这是关于如何创建页面的非常简单的概述。既然您说您是新手，我建议您阅读一些教程。我强烈推荐复数视线[http://www.pluralsight-training.net/microsoft/](http://www.pluralsight-training.net/microsoft/)

希望这可以帮助！

# delphi - SMTP Indy 组件安全性和身份验证属性有什么作用？

> ID：10503833
> 
> 赞同：6
> 
> 时间：2012-05-08T17:53:42.257
> 
> 标签：delphi, smtp, indy

我正在使用 indy 组件在 delphi 应用程序中实现电子邮件。我专门使用 TidSMTP 组件。我需要有效地支持所有主要的电子邮件服务器。我使用 Mozilla Thunderbird 作为我的电子邮件客户端，并将 smtp 属性与 TidSMTP 组件中的属性进行比较。我试图找到描述 TidSMTP 属性之间关系的文档，但无法弄清楚。

有人可以解释这些比较以及它们的作用：

*   在 Thunderbird 中：连接安全：（无，STARTTLS，SSL/TLS）。
*   在 TidSMTP.UseTLS (utNoTLSSupport, utUseImplicitTLS, utUseRequireTLS, utUseExplicitTLS)

*   在 Thunderbird 中：身份验证方法：（无身份验证、普通密码、加密密码、Kerberos/GSSAPI、NTLM）

*   在 TidSMTP 中（用户名、密码，使用 useAuthentication 方法）

我还看到了其他 TidSMTP 属性：UseEhlo、UseVerp、UseNagle。我需要使用这些吗？他们在做什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T19:55:35.793

使用`STARTTLS`时，服务器的侦听端口在连接时最初是未加密的。当客户端连接时，它可以向`STARTTLS`服务器发送一个可选命令，如果服务器支持它，则在那个时候动态执行 SSL/TLS 握手。这允许旧的非 SSL/TLS 客户端继续连接到同一端口，同时允许启用 SSL/TLS 的较新客户端使用 SSL/TLS（如果服务器上可用）。这对应`UseTLS=utUseExplicitTLS`于 Indy。您需要设置`UseEHLO`为 True 才能使用`UseTLS=utUseExplicitTLS`，因为`EHLO`命令是如何`TIdSMTP`发现服务器是否支持该`STARTTLS`命令的。

使用`SSL/TLS`代替时`STARTTLS`，服务器的侦听端口始终使用加密，并且客户端必须在连接后立即启动 SSL/TLS 握手，然后才能交换任何其他数据。这对应`UseTLS=utUseImplicitTLS`于 Indy。没有`STARTTLS`使用命令。

对于身份验证，`TIdSMTP`有两个选项 - 由原始 SMTP 规范定义的旧（和不安全）`AUTH LOGIN`命令，以及基于 SASL 的散列/加密算法（Kerberos、GSSAPI、NTLM 等作为 SASL 算法实现）的 SMTP 扩展。

要使用 SASL，请设置`TIdSMTP.AuthType`为`satSASL`然后填写`TIdSMTP.SASLMechanisms`集合以指向`TIdSASL`您希望在应用程序中支持的算法的单独派生组件。Indy 具有用于`DIGEST-MD5`, `CRAM-MD5`, `CRAM-SHA1`, `NTLM`(experimental), `ANONYMOUS`, `EXTERNAL`, `OTP`, `PLAIN`, `SKEY`, 和`LOGIN`(SASL wrapper for `AUTH LOGIN`) 的本机 SASL 组件。如果您需要其他算法（例如 Kerberos 或 GS​​SAPI），则必须编写自己的`TIdSASL`衍生组件。对于使用用户名/密码的算法，这些值必须分配给一个单独的`TIdUserPassProvider`组件，然后再分配给 SASL 组件（`TIdSMTP.UserName`和`TIdSMTP.Password`属性不与 SASL 一起使用）。您支持的 SASL 算法越多，您能够支持的服务器数量就越多。

对于仍然支持 的服务器，`AUTH LOGIN`可以通过设置`TIdSMTP.AuthType`为`satDefault`（如果服务器支持但未在响应命令时报告它，则可以选择设置`TIdSMTP.ValidateAuthLoginCapability`为 False ）然后填写and属性，或者通过将组件包含在收藏。`AUTH LOGIN``EHLO``TIdSMTP.UserName``TIdSMTP.Password``TIdSASLLogin``TIdSMTP.SASLMechanisms`

`UseVerp`和`UseNagle`安全无关。 `VERP`是一个 SMTP 扩展，用于检测由于无法投递错误而导致的退回电子邮件。Nagle 是一种用于优化网络数据包的网络算法。

# javascript - 在 JavaScript 中解析 XML，尝试通过类名获取元素

> ID：10503834
> 
> 赞同：2
> 
> 时间：2012-05-08T17:53:42.980
> 
> 标签：javascript, xml, domparser

我正在尝试使用 JavaScript 解析一个大型 XML 文件。网上看了一下，好像最简单的入手方式就是使用浏览器的DOM解析器。这行得通，我可以通过 ID 获取元素。我还可以获得这些元素的“类”属性，它会返回我所期望的。但是，我似乎无法按类获取元素。

在最新的 Chrome 中尝试了以下内容：

```
xmlString = '<?xml version="1.0"?>';
xmlString = xmlString + '<example class="test" id="example">content</example>'

parser = new DOMParser();
xmlDoc = parser.parseFromString(xmlString,"text/xml");

xmlDoc.getElementById("example");    
      // returns the example element (good)

xmlDoc.getElementById("example").getAttribute("class");
      // returns "test" (good)

xmlDoc.getElementsByClassName("test");
      // returns [] (bad) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:09:17.150

这应该得到给定类的所有元素，假设标签名称是一致的。

```
var elements = xmlDoc.getElementsByTagName('Example');
var classArray = [];
for(var i=0;i<elements.length;i++){
    if(elements[i].className=="test"){
        classArray.push(elements[i])
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:02:42.100

您可以使用 JQuery 通过使用类选择器来解析 XML 文件。 [http://jquery.com](http://jquery.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T00:47:00.157

将解析器类型更新为 HTML 而不是 XML 应该可以工作。

```
parser = new DOMParser();
xmlDoc = parser.parseFromString(xmlString,"text/html") 
```

# asp.net-mvc - SPA 淘汰赛 JS 过滤器

> ID：10503837
> 
> 赞同：1
> 
> 时间：2012-05-08T17:53:47.567
> 
> 标签：asp.net-mvc, knockout.js, single-page-application

我使用 ADO.Net 作为数据源开发了 MVC 4 单页应用程序。尝试按 ID 过滤视图，尝试了会话变量，但没有任何运气。这是查看代码：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/BloodPressuresViewModel.js")"></script>
<script type="text/javascript">
    $(function () {
        upshot.metadata(@(Html.Metadata<KOTest2.Controllers.DALController>()));

        var viewModel = new MyApp.BloodPressuresViewModel({
            serviceUrl: "@Url.Content("~/api/DAL")"
        });
        ko.applyBindings(viewModel);
    });
</script> 
```

hee 是 Javascript 文件中的 calss 代码：

```
.....
  var entityType = "BloodPressure:#KOTest2.Models";
    MyApp.BloodPressure = function (data) {
        var self = this;

        // Underlying data
        self.ID = ko.observable(data.ID);
        self.PHN = ko.observable(data.PHN);
        self.Day = ko.observable(data.Day);
        self.Systolic = ko.observable(data.Systolic);
        self.Diastolic = ko.observable(data.Diastolic);
        self.HeartRate = ko.observable(data.HeartRate);
        upshot.addEntityProperties(self, entityType);
    }
..... 
```

我认为最好的解决方案是使用 ViewBag 将 ID 从控制器传递给视图。知道我该怎么做！！

由于我不是经验丰富的程序员，是否可以过滤（foreach）

```
 <tbody data-bind="foreach: bloodPressures"> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:16:04.053

我不确定我是否了解您如何访问数据库（在服务器上，对吗？）进行过滤，但您可以执行以下操作：

```
<table data-bind="foreach: rows">
    <tr>
        <td>id: <span data-bind="text: ID"></span></td>
        <td>PHN: <span data-bind="text: PHN"></span></td>
        ....
    </tr>
</table> 
```

在你的 javascript 中

```
function viewModel() {
    var self = this;
    this.loggedIn = ko.observable(false);
    this.rows = ko.observableArray([]);

    // return an array of objects to display to the user
    function getDataFromServer() {

         return ...;
    }

    ko.computed(function() {
        if (this.loggedIn())
            this.rows(getDataFromServer());
    },this);

    ...
} 
```

但是，您进行身份验证，成功后执行`this.loggedIn(true)`，这将导致计算函数触发从服务器的拉取和 ; 的设置`this.rows()`。这反过来将更新显示。

# c# - sqlite c#在as3上生成打开

> ID：10503838
> 
> 赞同：0
> 
> 时间：2012-05-08T17:53:56.920
> 
> 标签：c#, actionscript-3, sqlite

我有一个由 C# 代码生成的数据库，当我创建它时，我使用我使用的连接字符串

```
new SQLiteConnection("Data Source=" + dbPath + ";Version=3;New=False;Compress=True;Password=1234"); 
```

数据库已成功创建，但是当我将其下载到计算机并尝试在 adobe air 上读取时，我似乎无法打开数据库。将密码传递给连接的唯一方法是通过 bytearray 传递它，但我无法正确处理。

我的 as3 代码是这样的：

```
_connection = new SQLConnection();
_connection.addEventListener(SQLEvent.OPEN, onDatabaseOpen);
_connection.addEventListener(SQLEvent.CLOSE, onDatabaseClose);
_connection.addEventListener(SQLErrorEvent.ERROR, onDatabaseError);

var ba:ByteArray = new ByteArray();
ba.writeMultiByte("1234","unicode");
_connection.open(_mydatabaseFile,SQLMode.READ,false,1024,ba); 
```

由于字节数组的长度，它总是会出错。

编辑：我忘了提一下，如果我没有在连接上输入密码，我可以只使用 _connection.open(_mydatabaseFile) 打开数据库而不会出现问题

提前感谢亚历克斯

# java - Runtime.Freememory() 在两个连续调用之间返回变量值，当在它们之间初始化数组时？

> ID：10503839
> 
> 赞同：4
> 
> 时间：2012-05-08T17:54:05.513
> 
> 标签：java, memory-management, runtime

为什么我得到以下代码的变量输出：

```
Runtime rt = Runtime.getRuntime();
long x,y;
x = rt.freeMemory();
char z[] = new char[Index];
y = rt.freeMemory();

System.out.println("Difference = " + (x-y)) 
```

对于较小的索引值（<10000），输出为零，但对于 >=100000 的值，值为 200016。对于每个零添加，它变为 2000016。

这怎么可能。[已编辑]我的目标是在内存中找到数据对象的大小（在代码中使用 - 就像这里我使用了索引大小的 Char z[]）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:54:35.503

您的假设似乎是，如果您有 n 字节的空闲内存并分配 m 字节，那么之后您将拥有 nm 字节的空闲内存。

这是一个合理的假设，但在存在异步垃圾收集器的情况下是错误的，它们会或不会按照他们认为合适的方式进行内存压缩。

即使你花费数年时间研究某个 JVM 的行为并积累了深厚的智慧和知识，可以让你预测分配对 freeMemory() 结果的影响，但当你切换到另一个 JVM 或只更新您当前的。

因此，相信我们长辈，并将`Runtime.freeMemory()`其视为一种有趣的随机数生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:01:56.860

我写`System.gc()` 了，你可以看到区别。

```
 Runtime rt = Runtime.getRuntime();
    long x,y;
    System.gc();
    x = rt.freeMemory();
    char z[] = new char[1000];
    y = rt.freeMemory();

    System.out.println("X = " + (x));
    System.out.println("Y = " + (y));
    System.out.println("Difference = " + (x-y)); 
```

**输出**

```
X = 16179672
Y = 16085904
Difference = 93768 
```

# android - 如何在 Android 设备上获取所有视频

> ID：10503840
> 
> 赞同：4
> 
> 时间：2012-05-08T17:54:07.560
> 
> 标签：android

如何获取可以在安装了我的应用程序的 Android 设备上找到的所有视频及其路径的列表？

编辑：我正在尝试制作一个简单的视频播放器，因此想法是显示设备上可以找到的所有视频并在列表项单击时播放。唯一的问题是我不知道如何获取有关视频的信息，所以如果有人可以帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-07T20:12:10.707

如果有人仍在寻找答案，请尝试此方法。此方法将返回所有媒体的路径列表。

```
public ArrayList<String> getAllMedia() {
    HashSet<String> videoItemHashSet = new HashSet<>();
    String[] projection = { MediaStore.Video.VideoColumns.DATA ,MediaStore.Video.Media.DISPLAY_NAME};
    Cursor cursor = getContext().getContentResolver().query(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, projection, null, null, null);
    try {
        cursor.moveToFirst();
        do{
            videoItemHashSet.add((cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA))));
        }while(cursor.moveToNext());

        cursor.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    ArrayList<String> downloadedList = new ArrayList<>(videoItemHashSet);
    return downloadedList;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:16:18.083

```
String[] projection = { MediaStore.Video.Media._ID};
Cursor cursor = new CursorLoader(contexts, MediaStore.Video.Media.EXTERNAL_CONTENT_URI, projection, 
            null, // Return all rows
            null, null).loadInBackground(); 
```

有了光标后，您可以对其进行迭代并使用视频 ID 获取所有视频。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-18T12:04:07.973

试试下面的代码。

```
private void getVideoList() {
    Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
    String[] projection = {MediaStore.Video.VideoColumns.DATA};
    Cursor cursor = getContentResolver().query(uri, projection, null, null, null);
    ArrayList<String> pathArrList = new ArrayList<>();
    if (cursor != null) {
        while (cursor.moveToNext()) {
            pathArrList.add(cursor.getString(0));
        }
        cursor.close();
    }
    Log.e("all path",pathArrList.toString());
} 
```

# nmap - nmap，速度分割范围？

> ID：10503842
> 
> 赞同：0
> 
> 时间：2012-05-08T17:54:26.433
> 
> 标签：nmap

在单个 8GB 机器上，nmap 会以与 xxxx/8 范围拆分为 256 xxxx/16 的相同速率完成 xxxx/8 扫描吗？

`Adding an additional sentience to get past the "quality standards" error.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:13:37.730

除非您不想扫描该网络的某个部分，否则将 /8 网络拆分几乎没有意义。

正如 bonsaiviking 所说，nmap 是网络受限的，并且将网络范围拆分以利用其并行特性。Nmap 不断监控扫描的性能，以影响它发送数据包的速率。

要直接控制扫描速率，请使用

--最小速率；--最大速率。

# php - 在 CGridView 的 htmlOptions 中添加表达式

> ID：10503849
> 
> 赞同：2
> 
> 时间：2012-05-08T17:54:57.870
> 
> 标签：php, yii, yii-components

我正在尝试使用数组中的值设置 htmlOptions，该数组用作 CGridView 组件的 DataProvider（它是 CArrayDataProvider）。其中有一个标志，可以是 0 或 1（0 表示字体粗细：正常，1 表示粗体）

```
'htmlOptions'=>array('style'=>'$data["flag"] == 1 ? font-weight: bold; : font-weight: normal;'), 
```

它不起作用，所以我尝试直接在 DataProvider 中设置样式（返回字体粗细：粗体；或字体粗细：正常；）：

```
'htmlOptions'=>array('style'=>'$data["style"]'), 
```

但输出是：

```
<td style="$data["style]">Value</td> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T17:59:51.683

您不能`$data`在`htmlOptions`. 您必须扩展`CDataColumn`.

有关如何执行此操作的信息，请参阅[本文。](http://www.yiiframework.com/wiki/314/cgridview-use-special-variable-data-in-the-htmloptions-of-a-column-i-e-evaluate-htmloptions-attribute/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T21:47:50.890

Yii v1.1.13 现在在 CGridView 中内置了这个功能： [http ://www.yiiframework.com/doc/api/1.1/CGridView#rowHtmlOptionsExpression-detail](http://www.yiiframework.com/doc/api/1.1/CGridView#rowHtmlOptionsExpression-detail)

您可以使用 $data 作为模型，使用 $row 作为行号来评估字符串中的 htmlOptions 数组。由于语法有点奇怪，我将展示一个示例：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $dataProvider,
    'columns' => array(       
        'columns' => array(     
            array(
               'name'=>'Column Name 1',
               "value"=>'$data->colVal',
            ),                      
               'name'=>'Column Name 2',
               "value"=>'$data->colExpression()',
            ),
            "modelAttributeUsingNameLabel",
        ),
     "rowHtmlOptionsExpression"=>'array(
                          "onclick"=>
                             "window.location = \'.$this->url.\'"
                  )')
 ); 
```

请注意，htmlOptions 的 php 数组位于字符串中。这很奇怪，但它就是这样工作的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-02T18:20:14.220

htmlOptions 无权访问 $data。所以你可以试试这个

```
'value' => '($data["flag"] == 1 ? "<b>$data->your_value</b> ":"$data->your_value")', 
```

# javascript - ZeroClipBoard : 选项卡中的多个剪贴板

> ID：10503853
> 
> 赞同：1
> 
> 时间：2012-05-08T17:55:18.413
> 
> 标签：javascript, jquery, zeroclipboard

我正在尝试在选项卡中添加零剪贴板，其中每个选项卡框都包含自己的剪贴板。当我将文本字段和按钮放在选项卡框外时它工作正常，但当我将它们放在选项卡中时它不起作用。

请检查下面我到目前为止所做的链接。

**注意：**（flash 影片剪辑没有出现在 jsfiddle 中，但它出现并重新定位在我的本地副本中）

[演示链接](http://jsfiddle.net/EUvLj/1/)

# sitecore - 更改 Sitecore 媒体库中上传文件的模板

> ID：10503857
> 
> 赞同：3
> 
> 时间：2012-05-08T17:55:31.717
> 
> 标签：sitecore, sitecore-media-library

我对此进行了一些研究，但不确定我是否了解需要解决以下问题的所有部分。

如果他们上传到某个文件夹，我的客户需要使用特殊模板而不是媒体库中自动检测到的媒体模板。该模板具有特殊字段。该模板还可以容纳不同类型的文件（PDF、供应商特定格式、可执行文件）。

出于开发目的，我们目前正在上传文件，然后进行模板切换，但真正需要的是首先将该文件上传到该模板类型。我想知道是否有办法挂钩上传过程以确保在媒体库中的某个路径下使用特殊模板？如果是这样，我应该从哪里开始？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T22:47:39.587

我们最近不得不做类似的事情。与 techphoria414 一样，我将利用上传保存管道。然后，为了使其更通用和可重用，使用 Sitecore 的配置解析功能将所有内容连接到您的处理程序。这就是我们最终的结果。

具有所需“处理”方法的主类：

```
public class ChangeTemplate
{
    public string Name { get; set; }
    public string Path { get; set; }
    public List<ChangedMediaTemplate> Templates { get; set; }

    public ChangeTemplate()
    {
        Templates = new List<ChangedMediaTemplate>();
    }

    public void Process(UploadArgs args)
    {
        var db = Sitecore.Context.ContentDatabase;

        var uploadPath = db.GetItem(args.Folder).Paths.ContentPath;
        if (!uploadPath.StartsWith(Path))
        {
            // Not uploading to designated folder
            return;
        }

        foreach (var item in args.UploadedItems)
        {
            // Need to change template for this item?
            var changedTemplate = Templates.Where(t => t.Old.Equals(item.Template.FullName)).FirstOrDefault();
            if (changedTemplate != null)
            {
                var newTemplate = db.Templates[changedTemplate.New];
                try
                {
                    item.ChangeTemplate(newTemplate);
                }
                catch (Exception e)
                {
                    Log.Error("Unable to change {0} template on upload of {1} to {2}.".FormatWith(Name, item.Name, uploadPath), e, this);
                }
            }
        }
    }
} 
```

辅修班：

```
public class ChangedMediaTemplate
{
    public string Old { get; set; }
    public string New { get; set; }
} 
```

然后是配置：

```
<processors>
    <uiUpload>
      <processor patch:after="*[@type='Sitecore.Pipelines.Upload.Save, Sitecore.Kernel']" mode="on" type="Foo.Project.SitecoreX.Pipelines.Upload.ChangeTemplate, Foo.Project.Classes">
        <Name>Product Images</Name>
        <Path>/sitecore/media library/Images/Foo/products</Path>
        <Templates hint="list">
          <Template type="Foo.Project.SitecoreX.Pipelines.Upload.ChangedMediaTemplate, Foo.Project.Classes">
            <Old>System/Media/Unversioned/Image</Old>
            <New>User Defined/Foo/Product/Image/Unversioned/Product Image</New>
          </Template>
          <Template type="Foo.Project.SitecoreX.Pipelines.Upload.ChangedMediaTemplate, Foo.Project.Classes">
            <Old>System/Media/Unversioned/Jpeg</Old>
            <New>User Defined/Foo/Product/Image/Unversioned/Product Jpeg</New>
          </Template>
          <Template type="Foo.Project.SitecoreX.Pipelines.Upload.ChangedMediaTemplate, Foo.Project.Classes">
            <Old>System/Media/Versioned/Image</Old>
            <New>User Defined/Foo/Product/Image/Versioned/Product Image</New>
          </Template>
          <Template type="Foo.Project.SitecoreX.Pipelines.Upload.ChangedMediaTemplate, Foo.Project.Classes">
            <Old>System/Media/Versioned/Jpeg</Old>
            <New>User Defined/Foo/Product/Image/Versioned/Product Jpeg</New>
          </Template>
        </Templates>
      </processor>
    </uiUpload>
</processors> 
```

修改或添加新的模板规则变得像根据需要编辑配置一样简单。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:37:30.900

不幸的是，据我所知，无法覆盖 Sitecore.Resources.Media.MediaCreator(handels mediaitem creation)。因此，唯一（简单）的方法是更改​​整个媒体库的模板。

否则，我认为您需要对 sheerUI 进行自己的更改 - 但我不推荐它。无论如何.. Sitecore 创建的媒体项在 web.config 下定义

```
<mediaLibrary>
    <mediaTypes>
         <mediaType name="Any" extensions="*">...</mediaType>
         <mediaType name="Windows Bitmap image" extensions="bmp">...</mediaType>
          ....
    </mediaTypes>
</mediaLibrary> 
```

您可以更改的每个媒体项都有一个版本/取消版本模板。

如果您想研究 SheerUI，我建议您从这里开始：http: [//learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/10/My-First-Sitecore-XAML-Application.aspx](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/10/My-First-Sitecore-XAML-Application.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T19:27:27.530

我会使用 item:saving 处理程序。如果项目是媒体项目，并且在配置的文件夹中，那么您可以更改其模板。与 item:saving 一样，在方法的早期插入一些检查，如果您确定该项目无关紧要，则快速退出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-10T12:55:42.610

我想在上面*的 ambrauer*答案中添加一些内容。这是一个很好的解决方案，但在生产中使用之前应该对代码进行调整。

以下行：

```
var uploadPath = db.GetItem(args.Folder).Paths.ContentPath; 
```

应改为：

```
if (args.Folder == null) return;
var uploadFolderItem = db.GetItem(args.Folder);
if (uploadFolderItem == null) return;
var uploadPath = uploadFolderItem.Paths.ContentPath; 
```

原因是没有对*args.Folder*进行空检查，Sitecore 安装向导中的包上传工具会中断。

这对像我们这样的开发人员来说并不重要，但是如果一些管理员没有对站点的完全访问权限，他们会将此工具作为其工作流程的一部分。

# javascript - 使用 .change(handler) 时如何在 JQuery 中正确绑定和取消绑定？

> ID：10503859
> 
> 赞同：0
> 
> 时间：2012-05-08T17:55:41.637
> 
> 标签：javascript, jquery, jquery-selectors

我试图在 jsfiddle 中重新创建我的问题：

[http://jsfiddle.net/erU5J/72/](http://jsfiddle.net/erU5J/72/)

我有一个文本区域：

![在此处输入图像描述](../Images/79f1e3d4eca1e097a3cfe74a87101273.png)

单击它时，它会垂直向下扩展约 7 行。在帮助实现这一点的同一方法中，我还有一些代码可以让 textarea 在输入或删除文本时自动调整大小。

无论如何，如您所见，我有一个相机图标，当单击它时，用户可以立即选择一张照片，该照片将出现在文本区域下方。

如果我选择照片而不单击 textarea 来展开它，然后单击 textarea 来展开它，按住输入 textarea 作品的自动调整大小.. 基本上每次 textarea 展开时将照片向下推。

如果我先展开 textarea 然后选择一张照片，然后按住在 textarea 中输入，则 textarea 的自动调整大小不起作用，而是显示滚动条。如果我单击关闭 textarea（照片中未显示 X 按钮），然后单击 textarea 以再次展开/打开它，然后按住输入 textarea 的自动调整大小再次工作。

似乎 .change() 似乎并不关心我所做的任何绑定。

**这是我的图像选择代码：**

```
 $(function() {

    $('div.microposts').on('click', 'li#addImage > span', function() {

        var form = $(this).parents('form#new_micropost'),
            fileField = form.find('input#micropost_image');

            fileField.trigger('click');
    });

});

$(function() {

    $('input#micropost_image').change(function (evt){ //.off() make sautoresize work

                    var image = evt.target.files[0],
                        form = $(this).parents('form#new_micropost'),
                        imagePreviewBox = form.find('div.imagePreview'),
                        reader = new FileReader();

                            reader.onload = function(evt) {
                                var resultdata = evt.target.result,
                                    img = new Image();

                                    img.src = evt.target.result;
                                    imagePreviewBox.show().prepend(img);

                            };

                        reader.readAsDataURL(image);    

    });
}); 
```

**下面是 textarea 的代码：**

```
$(function() {

    $("div.microposts").on("focus", "textarea#micropostBox", function() {

        var micropostForm = $(this).parent();
            micropostBox = micropostForm.find('textarea#micropostBox'),
            micropostButton = micropostForm.find("input#micropostButton"),
            xButton = micropostForm.find("div.xButton"),
            removeAutosizeStyle = function() { 
                micropostForm.parents('html').find('textarea.autosizejs').remove(); 
            };

                removeAutosizeStyle();

                micropostBox.prop('rows', 7);
                    micropostForm.find('div#micropostOptions').removeClass('micropostExtraOptions');
                    micropostForm.find('div#postOptions').show();
                    $.trim(micropostBox.val()) == '' ? 
                        micropostButton.addClass("disabledMicropostButton").show() 

                        :

                        micropostButton.prop('disabled', false);

                             micropostBox.hide()
                                .removeClass("micropost_content")
                                .addClass("micropost_content_expanded").show().autosize();  

                                    xButton.show();
                                        micropostButton.prop('disabled', true);

        micropostBox.off().on("keypress input change", function () {

                      micropostButton.prop({ disabled: !$.trim($(this).val()) != ''});

                          $.trim($(this).val()) != '' ?
                            micropostButton
                                .removeClass("disabledMicropostButton")
                                .addClass("activeMicropostButton") 

                                :

                            micropostButton
                                .removeClass("activeMicropostButton")
                                .addClass("disabledMicropostButton");

                    });

                    xButton.on('click', function() {

                        micropostBox.removeClass("micropost_content_expanded").addClass("micropost_content");
                        micropostForm.find('div#micropostOptions').addClass('micropostExtraOptions');
                        micropostBox.val("");
                        micropostForm.find('div#postOptions').hide();
                        xButton.hide();
                        micropostButton.hide();
                        micropostBox.removeAttr('style');
                        micropostBox.prop('rows', 0);
                        micropostForm.find('.imagePreview > img').remove();
                        micropostForm.find('.imagePreview').hide();
                        removeAutosizeStyle();
                    });

    });

}); 
```

如果我的代码看起来很乱，我深表歉意。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:22:43.433

`change`每次单击时都附加处理程序`li#addImage > span`。您应该在事件处理`change`程序之外设置处理程序。`click`

```
$(function() {
    $('div.microposts').on('click', 'li#addImage > span', function() {
        var form = $(this).parents('form#new_micropost'),
            fileField = form.find('input#micropost_image');
        fileField.trigger('click');
    });

    $('input#micropost_image').on('change', function(evt) {
        var image = evt.target.files[0]; //[0] first entry of file selected
        if (!image.type.match("image.*")) {
            alert('not an image');
            return;
        }
        var reader = new FileReader();
        reader.onload = function(evt) {
            var resultdata = evt.target.result;
            var img = new Image();
            img.src = evt.target.result;
            $(evt.target).parents('form#new_micropost').find('div.imagePreview').show().prepend(img);
        }
        reader.readAsDataURL(image);
    });
});​ 
```

那应该可以解决图像出现 10 次的问题。如果没有看到代码，我无法评论自动调整。在后一种情况下，它似乎会调整到 260px 的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:43:40.700

在这里和那里挖掘我的代码后，我发现问题来自我正在使用的自动大小插件。

当我在正在查看我的网站的浏览器中打开和关闭开发人员工具时，会出现滚动条问题。所以这是页面调整大小的问题。

我玩弄文本区域，这完全没问题，但是一旦我打开或关闭开发人员工具，我就会遇到同样的滚动条问题。

# java - BTM 作为 Tomcat 7 中的事务管理器？

> ID：10503862
> 
> 赞同：0
> 
> 时间：2012-05-08T17:55:46.777
> 
> 标签：java, tomcat, tomcat7, jta

是否有在 Tomcat 7 中配置 Bitronix 事务管理器 (BTM) 的文档？BTM 甚至与 Tomcat 7 兼容吗？

我找到了有关[如何在 Tomcat 6.x 中使用 BTM 作为事务管理器的](http://docs.codehaus.org/display/BTM/Tomcat2x)文档，但我没有找到任何适用于 Tomcat 7 的文档。Tomcat 7 的程序是否已更改？

Tomcat 6 文档指定 btm-tomcat55-lifecycle-2.1.0.jar，我想知道是否有更新的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:58:47.920

我没有看到任何不适用于 Tomcat 7 的内容。唯一有点奇怪的是对“您必须将数据源配置放在 Tomcat 的 conf/resources.properties 文件中”的引用。这不是现在，也从来不是 Tomcat 配置文件。我怀疑这是一个 BTM 配置文件。

# jquery - 我应该用什么对象调用这个 jQuery 方法？

> ID：10503863
> 
> 赞同：0
> 
> 时间：2012-05-08T17:55:48.063
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我在设置可拖动对象时遇到了一些麻烦。我想我想在阻力开始后重新计算遏制。

我之前问过[这](https://stackoverflow.com/questions/10500784/jquery-ui-draggable-containment-rectangle-within-parent-how-to-do-it-programma) [两个](https://stackoverflow.com/questions/10498837/jquery-ui-draggable-containment-parentrectangle)问题。

我想我找到了[答案](http://jsapi.info/jqueryui/1.8.18/jQuery.ui.draggable.prototype._setContainment)。这是我要执行的代码行：

```
o.containment = this.helper[0].parentNode; 
```

唯一的问题是我不知道应该调用这个方法，它不是可拖动项目本身，我试过了。

# java - RAD 中用于 JUnit-JMockit 测试的 java.lang.StackOverflowError

> ID：10503865
> 
> 赞同：2
> 
> 时间：2012-05-08T17:55:54.180
> 
> 标签：java, junit, rad, jmockit, stack-overflow

在运行使用 JMockit 模拟的 JUnit 测试时，我们在 RAD 中收到来自少数开发人员机器的以下错误。测试在其他机器和我们的持续集成服务器上运行良好。任何关于要注意什么的指针？

我们通过添加所需的 VM 参数来运行 - `-javaagent:../<project_lib_dir>/jmockit.jar`

```
java.lang.StackOverflowError
at java.lang.ThreadLocal$ThreadLocalMap.access$000(ThreadLocal.java:248)
at java.lang.ThreadLocal.get(ThreadLocal.java:149)
at mockit.internal.state.TestRun$1.set(TestRun.java:61)
at mockit.internal.state.TestRun$1.set(TestRun.java:54)
at java.lang.ThreadLocal.get(ThreadLocal.java:156)
at mockit.internal.state.TestRun$1.set(TestRun.java:61)
at mockit.internal.state.TestRun$1.set(TestRun.java:54)
at mockit.internal.state.TestRun.enterNoMockingZone(TestRun.java:168)
at mockit.internal.expectations.mocking.SharedFieldTypeRedefinitions.redefineTypesForTestClass(SharedFieldTypeRedefinitions.java:49)
at mockit.integration.TestRunnerDecorator.handleMockFieldsForWholeTestClass(TestRunnerDecorator.java:127)
at mockit.integration.TestRunnerDecorator.updateTestClassState(TestRunnerDecorator.java:46)
at mockit.integration.junit4.internal.BlockJUnit4ClassRunnerDecorator.invokeExplosively(BlockJUnit4ClassRunnerDecorator.java:68)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)` 
```

# mysql - Mysql join 为小型解决方案集生成巨大的结果表

> ID：10503867
> 
> 赞同：0
> 
> 时间：2012-05-08T17:55:59.093
> 
> 标签：mysql, join

我有两个表，我试图选择这些表之间的公共字段完全匹配的行，但是事实证明很难编写查询。这是一个简化版本：

表格如下所示（简化）：

```
T1：
  id、姓名、sn

T2：
  id，位置，sn

```

我试图仅在 t1.sn=t2.sn 的情况下将 t1.name 和 t2.loc 放在一起。sn 字段在两者中都是唯一的，因此表之间最多只有 1 条记录匹配。在 t1 中，所有记录都有一个 sn 字段值，但是在 t2 中，大约 30% 的记录的 sn 为 NULL。因此，我期望连接产生的行数比 t1 少一些。

我将如何加入？

谢谢。

样本数据：

```
t1：
+---+--------+-------+-----+
| 编号| 姓名 | 锡 | ... |
+---+--------+-------+-----+
| 1 | 东西1 | 12345 | |
| 2 | 东西2 | 10000 | |
| 3 | 事情3 | 33445 | |
| 4 | 东西4 | 99223 | |
+---+--------+-------+-----+

T2：
+----+--------+--------+-----+
| 编号 | 位置 | 锡 | ... |
+----+--------+--------+-----+
| 90 | 这里 | 12345 | |
| 92 | 那里| 空 | |
| 96 | 附近 | 33445 | |
| 99 | 远| 99223 | |
+----+--------+--------+-----+

结果：
+--------+-------+--------+
| 姓名 | 位置 | 锡 |
+--------+-------+--------+
| 东西1 | 这里 | 12345 |
| 事情3 | 附近 | 33445 |
| 东西4 | 远| 99223 |
+--------+-------+--------+

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:59:33.273

```
SELECT
  t1.name AS name,
  t2.loc AS loc,
  t1.sn AS sn
FROM t1
INNER JOIN t2 ON t1.sn=t2.sn 
```

# image - 图像未显示在时间线上，可在 linter 中使用

> ID：10503868
> 
> 赞同：1
> 
> 时间：2012-05-08T17:56:02.940
> 
> 标签：image, facebook-graph-api, facebook-timeline

`og:image`我已经使用带有类似链接的标签设置了一个指定图像的页面。

如果我在 linter 中输入页面 URL，图像会在我的测试和实时站点上正确显示。

但是，在测试站点上，如果我喜欢该页面，则图像会显示在我的时间轴中。但是，在实时站点上，我的时间轴中没有显示任何图像。

除了 URL 的第一部分之外，测试和实时之间没有其他区别。有什么我应该看的东西来帮助理解为什么会这样吗？

# ios - iOS 启用横幅忙碌微调器？

> ID：10503870
> 
> 赞同：1
> 
> 时间：2012-05-08T17:56:09.980
> 
> 标签：ios, multithreading

有没有办法明确启用横幅忙碌微调器？我有一个线程执行一些 HTTPS 请求，并想向用户表明后台仍在发生某些事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:58:09.553

您是在谈论[网络活动指标](http://oleb.net/blog/2009/09/managing-the-network-activity-indicator/)吗？

# forms - CommandButton 的操作 URL 取决于表单内容

> ID：10503875
> 
> 赞同：0
> 
> 时间：2012-05-08T17:56:36.797
> 
> 标签：forms, jsf, redirect, primefaces, managed-bean

我正在为我的网络应用程序做一个简单的搜索引擎，但我遇到了一个问题。

我`search.xhtml`通过获取参数来工作，因此`search.xhtml?key=lol`将返回“lol”的结果。

我需要做的是我的搜索命令按钮将重定向 do `search.xhtml?key=INPUT TEXT CONTENT`。

这是我的简单代码：

```
<div id="searchBox">
        <pou:panel id="searchPanel">                
            <h:form>
                <h:inputText id="searchInput" value="#{dispensaRicercaBean.query}" size="99" maxlength="99"/> <pou:commandButton icon="ui-icon-search" action="ricerca?faces-redirect=true"/>
                <pou:watermark value="Search" for="searchInput"/>
            </h:form>                
        </pou:panel>            
    </div> 
```

在哪里和我`dispensaRicercaBean`的`@RequestScoped`结果页面加载数据调用`executeQuery(#{request.getParameter('key'))`（一个粗略的例子，实际上有一些差异）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:24:10.187

使用纯 HTML`<form>`

```
<form action="ricera.xhtml">
    <h:inputText id="key" size="99" maxlength="99" />
    <pou:watermark value="Search" for="key" />
    <pou:button icon="ui-icon-search" onclick="submit(); return;" />
</form> 
```

# java - 在java中获取方法或构造函数参数的注释对象

> ID：10503877
> 
> 赞同：1
> 
> 时间：2012-05-08T17:56:47.043
> 
> 标签：java, reflection, parameters, annotations

我正在使用 Scannotation 扫描类文件并获取该类的任何元素上存在的所有带有注释的类。使用反射，我已经能够找出方法中参数的所有注释，但我需要这些注释的对象，以便我以后可以获取它的参数（或者你怎么称呼它）。

这是我代码的一小部分，它将返回我想要的注释，但我无法使用它们。

```
 public Set<Class> getParametersAnnotatedBy(Class<? extends Annotation> annotation) {
        for (String s : annotated) { 
        //annotated is set containing names of annotated classes
                    clazz = Class.forName(s); 
                    for (Method m : clazz.getDeclaredMethods()) {
                        int i = 0;
                        Class[] params = m.getParameterTypes();
                        for (Annotation[] ann : m.getParameterAnnotations()) {
                            for (Annotation a : ann) {
                                if (annotation.getClass().isInstance(a.getClass())) {
                                    parameters.add(a.getClass());
                                    //here i add annotation to a set
                                }
                            }
                        }
                    }
                }
            } 
```

我知道我可以使用它，如果我知道注释，就像这样：

```
@Retention(RetentionPolicy.RUNTIME)
public @interface MyAnnotation {
    public String name();
    public int count();
}
// ... some code to get annotations
MyAnnotation ann = (MyAnnotation) someAnnotation;
System.out.println(ann.name());
System.out.println(ann.count()); 
```

但到目前为止，我无法使用反射来做到这一点......我非常感谢任何指示，在此先感谢。PS.：有什么方法可以获取参数对象，例如字段的字段、方法的方法等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:03:52.523

你需要使用`a.annotationType`. 当您在注释上调用 getClass 时，您实际上是在获取它的[Proxy Class](http://docs.oracle.com/javase/1.3/docs/guide/reflection/proxy.html)。要获得真正的课程，您需要调用`annotationType`而不是`getClass`.

```
if (annotation.getClass() == a.annotationType()) {
            parameters.add(a.annotationType());
            // here i add annotation to a set
        } 
```

# php - 比较页面内容

> ID：10503878
> 
> 赞同：0
> 
> 时间：2012-05-08T17:56:55.647
> 
> 标签：php, email

我需要在页面发生变化时向我发送电子邮件的脚本。这是我的代码，但它不能正常工作。我怎样才能做到这一点才能正常工作？

```
$new_page = file_get_contents('http://www.google.com');

$new_page_in = mysql_real_escape_string($new_page);
mysql_query("UPDATE new SET text='$new_page_in' WHERE id='1'") or die (mysql_error());

$sql1 = mysql_query("SELECT text FROM new WHERE id='1'") or die (mysql_error());
list($new_out) = mysql_fetch_row($sql1);

$sql2 = mysql_query("SELECT text FROM old WHERE id='1'") or die (mysql_error());
list($old_out) = mysql_fetch_row($sql2);    

if($new_out != $old_out)
{
    $new_page = file_get_contents('http://www.google.com');
    $new_page_in = mysql_real_escape_string($new_page);
    mysql_query("UPDATE old SET text='$new_page_in' WHERE id='1'") or die (mysql_error());
    echo "Text is diferent.";
            //send email
}
else
{
    echo "Text isn't diferent";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:22:00.997

尝试使用比较

```
strcmp($new_out, $old_out) == 0 
```

测试它们是否相同。

另外我建议将页面内容的哈希值存储在数据库中，而不是整个字符串。所以存储

```
hash('md5', $new_page) 
```

`$new_page`如果您想查看是否有任何更改，请在数据库中而不是比较哈希值。如果需要，也可以存储内容，但不要比较内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:22:23.167

我会建议在存储 htmlcontent 时添加`htmlentities`并在存储之前删除所有空格......你可以参考[这个链接](https://stackoverflow.com/questions/2368539/php-replacing-multiple-spaces-with-a-single-space)让正则表达式做同样的事情......

您还可以使用[levenshtein](http://php.net/manual/en/function.levenshtein.php)或[类似文本](http://php.net/manual/en/function.similar-text.php)之类的字符串算法来检查匹配百分比并保持一些阈值可能 95% 几乎相同

# iphone - 以相同的方法更新 UILabel 两次

> ID：10503885
> 
> 赞同：2
> 
> 时间：2012-05-08T17:57:40.227
> 
> 标签：iphone, objective-c, xcode, ipad, uilabel

我在一次操作中两次更新 UILabel 时遇到了一些麻烦。基本上，用户点击播放按钮来听到声音。在播放声音时，UILabel 中出现“message 1”。声音播放完毕后，“Message 2”会出现在同一标签中。当我运行它时，标签直接转到“消息 2”。

。H

```
@interface ViewController : UIViewController
<AVAudioRecorderDelegate, AVAudioPlayerDelegate>
{
AVAudioPlayer *audioPlayer;
UIButton *playButton;
UILabel *answerLabel;

}
@property (nonatomic, retain) IBOutlet UIButton *playButton;
@property (nonatomic, retain) IBOutlet UILabel *answerLabel;
-(IBAction) play;
@end 
```

.m

```
-(IBAction) play
{    
        int length = [audioPlayer duration];
        [audioPlayer play];
        answerLabel.text = @"Message 1";
        [NSThread sleepForTimeInterval:length];
        answerLabel.text = @"Message 2";   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T18:05:11.253

我看到你实现了`AVAudioPlayerDelegate`协议，所以我假设在某些时候你将播放器的委托设置为`self`

如果是这种情况，请将您的播放方法更改为以下内容：

```
-(IBAction) play
{    
    [audioPlayer play];
    answerLabel.text = @"Message 1";
} 
```

然后实现这个方法：

```
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    answerLabel.text = @"Message 2";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T18:00:34.900

UI 线程的更新仅在 UI 线程被解除阻塞时发生，当它休眠时它仍然被阻塞，因此第一个标签永远不会出现。

你可以做的是：

```
answerLabel.text = @"Message 1";
[answerLabel performSelector:@selector(setText:) withObject:@"Message 2" afterDelay:length]; 
```

# php - PHP 5.3.6 SoapClient::__doRequest()：SSL：连接由对等方重置

> ID：10503886
> 
> 赞同：5
> 
> 时间：2012-05-08T17:57:40.343
> 
> 标签：php, web-services, soap, soap-client

我正在使用 php 5.3.6 中的 .net Web 服务。我正在使用 SoapClient 类建立连接。它继续失败，并出现“ **SoapClient::__doRequest(): SSL: Connection reset by peer** ”和“ **SoapFault Object ( [message:protected] => Error Fetching http headers** ”。

这仅发生在方法/操作中。如果我使用 $response = $objClient->__getFunctions(); 它工作正常，我得到的答复没有问题。

```
$objClient = new SoapClient("http://sample.idws.syndication.kbb.com/3.0/VehicleInformationService.svc?wsdl", array('trace' => 1, 'username' => 'xxxxxxx', 'password' => 'xxxxxxx', 'soap_version' => SOAP_1_2, 'exceptions' => true )); 
```

PHP：启用了 ssl soap 的 php 5.3.6。
操作系统：Ubuntu 11.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-05T12:35:35.450

在过去的几个月里，我一直面临着类似的问题。毕竟问题出在我使用非 wsdl 模式时 [http://php.net/manual/en/soapclient.soapclient.php](http://php.net/manual/en/soapclient.soapclient.php) 偶尔远程服务器不会响应 wsdl 位置的请求。

初始非wsdl模式

```
 $soapx = new SoapClient(null,
            array(
        "trace" => true,
        'cache_wsdl' => WSDL_CACHE_NONE,
        'location' => 'http://remote_wsdl_url',
        'uri' => 'http://necessary_uri',
        'use' => SOAP_LITERAL,
        'style' => SOAP_DOCUMENT,)); 
```

转向wsdl模式

```
 $soapx = new SoapClient('http://remote_wsdl_url_turned_to_local',
            array(
        "trace" => true,
        'cache_wsdl' => WSDL_CACHE_NONE,)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T10:46:56.733

SOAP 服务器端似乎有问题。用于调试 SOAP 的最佳在线客户端是[soapclient](http://soapclient.com/) ，您可以尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-01T19:17:29.113

由于同样的问题，我最近遇到了这个问题。对我们来说，问题在于所使用的 SSL 协议。我们不得不强制使用 TLS 1.1，一切都开始嗡嗡作响。我们这里的关键工作组件是“crypto_method”。

```
$wsdl = 'PATH/TO/WSDL';
$url = 'http://URL_TO_SOAP_SERVICE';
$cert = 'PATH/TO/CLIENT/CERT';

$context = stream_context_create([
    'ssl' => [
        'crypto_method' =>  STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT,
        'verify_peer' => true,
        'verify_peer_name' => true,
        'allow_self_signed' => false,
        'cafile' => '/path/to/cafile.selfsigned'
    ]
]);

$params = [
    'location' => $url,
    'local_cert' => $cert,
    'trace' => true,
    'exceptions' => true,
    'verifypeer' => true,
    'verifyhost' => true,
    'allow_self_signed' => false,
    'connection_timeout' => 180,
    'keep_alive' => false,
    'stream_context' => $context
];

$client = new SoapClient($wsdl, $params); 
```

# c# - 当我从子门户访问 ashx 时，为什么 DNN 会终止我的身份验证 cookie？

> ID：10503890
> 
> 赞同：4
> 
> 时间：2012-05-08T17:57:56.247
> 
> 标签：c#, cookies, dotnetnuke, ashx

我看到一个非常奇怪的问题，只发生在非管理用户身上。

当用户登录并访问一个页面时，他们将退出系统。页面完成加载，就像他们已登录一样，但一旦他们尝试任何其他操作（包括刷新浏览器页面），他们就会被视为未登录并显示登录提示。

打开提琴手，我可以看到来自服务器的响应之一包含以下内容：

> 响应发送了 71 字节的 Cookie 数据： Set-Cookie: portalaliasid=; expires=1982 年 5 月 8 日星期六 17:26:06 GMT；路径=/; HttpOnly
> 
> 响应发送了 69 字节的 Cookie 数据：Set-Cookie:portalroles=; expires=1982 年 5 月 8 日星期六 17:26:06 GMT；路径=/; HttpOnly
> 
> 响应发送了 69 字节的 Cookie 数据：Set-Cookie: .DOTNETNUKE=; expires=1999 年 10 月 12 日星期二 04:00:00 GMT；路径=/; HttpOnly
> 
> 响应发送 27 字节的 Cookie 数据：Set-Cookie:language=; 路径=/; HttpOnly
> 
> 响应发送了 33 字节的 Cookie 数据：Set-Cookie: authentication=; 路径=/; HttpOnly

当我访问我的自定义 ashx 网络调用时，这似乎总是发生。进行此调用的代码是以下 javascript：

```
$('#lstStates').empty();
var selectedRegions = $('select[id*=lbxRegions]').val();

// Get the list of states for the selected regions
$.ajax({
    url: '/DesktopModules/MyModule/ashx/GetStatesForRegions.ashx',
    data: { regions: selectedRegions },
    dataType: 'json',
    success: function (data) {
        if (IsArray(data)) {
            for (var state in data) {
                $('#lstStates').append('<option>' + data[state] + '</option>');
            }
        }
    }
}); 
```

ashx 中的代码是

```
public class GetStatesForRegions : IHttpHandler
{
    public bool IsReusable { get { return false; } }

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";

        // Get the list of region ids from the GET request
        string[] ids;
        string regionsArray = context.Request["regions[]"] ?? string.Empty;
        ids = regionsArray.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);

        using (var dbContext = new MyDataContext())
        {
            string[] states;

            var query = dbContext.Schools.Where(x => x.PodRegionId != null);

            if (ids != null && ids.Length > 0)
                query = query.Where(x => ids.Contains(x.PodRegionId.ToString()));

            states = query.Select(x => x.xosAddress.State)
                          .Distinct()
                          .OrderBy(x => x)
                          .ToArray();

            context.Response.Write(JsonConvert.SerializeObject(states));
            context.Response.End();
        }
    }
} 
```

为什么这会清除我的相关 cookie 并注销非管理员用户？

* * *

**编辑**：更神秘的是，当您以非管理员身份访问 ashx 时，DNN 似乎返回 302 HTTP 响应，再次将您重定向到相同的 url。该 302 响应包含 cookie 清除数据。它第二次访问 ashx（由于重定向）返回正确的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T19:38:44.640

这是因为用户仅在子门户中定义，但对 ASHX 的请求发生在父门户中（从 DNN 的角度来看）。当 DNN 收到请求时，它会看到您已“切换门户”，不再具有有效身份，并删除您的身份验证信息。超级用户不会发生这种情况，因为他们在两个门户网站上*都*拥有有效身份。

要解决此问题，您需要使用门户 ID 将查询字符串参数添加到您的请求中。这让 DNN 消除了请求的歧义并保持您的身份验证完好无损：

```
$.ajax({
    url: '/DesktopModules/MyModule/ashx/GetStatesForRegions.ashx?portalId=' + <%:PortalId%>,
    ....
}); 
```

# javascript - jQuery定位元素几个级别

> ID：10503894
> 
> 赞同：1
> 
> 时间：2012-05-08T17:58:07.737
> 
> 标签：javascript, jquery, forms, tree

我正在尝试使用以下内容查找输入字段：

```
parent = $(this).parent().parent().$('input[type="text"]').attr('id'); 
```

但是，每当运行时，我的脚本似乎都会崩溃。`<ul>`基本上，我有一个使用's 和's嵌套的输入字段树`<li>`，并且我正在尝试访问 $(this) 的父输入字段。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:59:35.703

您的语句的语法非常错误 =D

听起来您正在寻找以下`find`功能：

```
$(this).parent().parent().find('input[type="text"]').attr('id') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T18:00:27.967

您可能缺少该`find`功能：

```
parent = $(this).parent().parent().find('input[type="text"]').attr('id'); 
```

也许这可以简化您的代码：

```
parent = $(this).closest('li').find('input[type="text"]').attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T18:00:11.343

`$(this).parent().parent().$('input[type="text"]').attr('id');`无效

一种可能的解决方案可能是

```
$(this).parent().parent().find('input[type="text"]').attr('id'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T18:05:34.473

```
parent = $(this).parents('#parentElementID').find('input[type="text"]')[0].id; 
```

其中#parentElementID 是目标输入的最近父级。

# html - DIV 换行，即使使用“display: inline-block”

> ID：10503900
> 
> 赞同：2
> 
> 时间：2012-05-08T17:58:41.980
> 
> 标签：html, css

我有一些设置了“显示：内联块”的 div（多列页面）。这不应该阻止它们包装吗？我希望它们并排：

```
div.LabelColumn
{
    display: inline-block;
    padding: 10px 0 0 40px;
    vertical-align: top;
}

div.DataColumn
{
    display: inline-block;
    padding: 10px 0 0 5px;
    vertical-align: top;
} 
```

为了澄清，我希望 DIV 并排 - 即显示为列。我希望他们每个人都占用他们需要的空间。它们中的每一个，使用我想要显示的内容，应该只占用大约 100 像素，所以很容易有足够的空间来并排显示几列。第一列有标签，第二列有数据，第三列有标签，第四列有数据。

为了提供更高级别的页面视图，我有一个向左浮动的 div。在它的右边，我想要多列数据。顺便说一句，这在 Chrome 中有效，但在 IE 中无效。

如果可能的话，我希望宽度自动调整为与 DIV 中的文本一样宽。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T18:12:01.817

删除内联块，使用浮动，分配宽度和填充边距。[这是演示](http://jsfiddle.net/WhrjL/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T18:02:30.583

使用`inline-block`不会阻止元素换行。事实上，当应用于`div`元素时，它会做相反的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T18:07:07.013

使用`float`. 欲了解更多信息：[http ://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T18:03:34.563

如果您希望它们全部并排，则它们的包含元素需要有足够的宽度才能允许。您可以通过应用空格来防止换行导致元素中断：nowrap;，但这可能会产生其他影响，具体取决于您构建标记的方式。

# android - Android 应用程序可以自行升级吗？

> ID：10503906
> 
> 赞同：2
> 
> 时间：2012-05-08T17:59:02.567
> 
> 标签：android, system

是否可以在 Android 中从自身更新应用程序？有问题的应用程序是系统应用程序，因此我可以执行特权命令。另请注意，我不想向用户显示任何通知，因此一切都应该在后台运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-14T10:17:23.390

一个应用程序更新自己实际上很容易，困难的部分是在没有向用户提示的情况下进行更新。该应用程序需要下载 APK，然后将其发送到*PackageManager* API 进行安装。然后Android会提出安装提示。有一个库来处理该部分：

*   [https://gitlab.com/fdroid/update-channels](https://gitlab.com/fdroid/update-channels)

至于提示，应用程序需要特权访问。如果设备已获得 root 权限，则应用程序可以请求 root 访问权限。该应用程序也可以作为“priv-app”刷新，以便它具有特权访问权限。或者你可以像 F-Droid 那样做：将[特权扩展](https://gitlab.com/fdroid/privileged-extension)刷成“priv-app”，然后让你的应用向特权扩展发送安装/卸载请求。

否则，您需要下载二进制代码，并动态加载它，就像@yusuf-x 说的那样。请注意，Google 正在努力在每个新版本的 Android 中实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:21:28.653

使用 Java ClassLoader 动态加载被推送或下拉的代码。– Yusuf X 刚刚编辑。我在 Android 上将其用于此目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T08:32:23.113

Fdroid 是一个开源应用程序存储库。他们的客户端应用程序可以从 fdroid 存储库安装/更新/删除应用程序，包括它自己。

在此处查看客户端应用程序的安装程序部分的代码： [https ://gitlab.com/fdroid/fdroidclient/tree/master/app/src/main/java/org/fdroid/fdroid/installer](https://gitlab.com/fdroid/fdroidclient/tree/master/app/src/main/java/org/fdroid/fdroid/installer)

# erlang - Cassandra thrift Erlang 插入

> ID：10503907
> 
> 赞同：5
> 
> 时间：2012-05-08T17:59:06.377
> 
> 标签：erlang, cassandra, thrift

我目前正试图用 Erlang 来了解 Cassandra/thrift ......

我有一个名为“mq”的列族（如在消息队列中）......

我希望每个用户有一行（带有 user_id），每条消息都是一个新列，其中时间戳为名称，消息为值。

这是我在 Cassandra-cli 中所做的事情：

```
create keyspace my_keyspace;
use my_keyspace;
create column family mq with comparator=UTF8Type and key_validation_class=UTF8Type;

%% Adding to user_id (00000001) the message "Hello World!" 
set mq['00000001']['1336499385041308'] = 'Hello Wold'; 
```

一切都适用于 Cassandra-cli

但是，当我尝试从 Erlang 插入时，我遇到了一些问题：

```
1>rr(cassandra_types).
2>{ok, C}=thrift_client_util:new("localhost", 9160, cassandra_thrift,[{framed, true}]).
3>thrift_client:call(C, 'set_keyspace', ["peeem"]).
4>thrift_client:call(C,'insert',["00000001",
                     #columnPath{column_family="mq"},
                     #column{name="1336499385041308", value="Hello World!"},
                     1
                     ]
                   ). 
```

这是错误：

```
{error,{bad_args,insert,
              ["00000001",
               #columnPath{column_family = "mq",super_column = undefined,
                           column = undefined},
               #column{name = "1336499385041308",value = "Hello World!",
                       timestamp = undefined,ttl = undefined},1]}}} 
```

任何帮助，将不胜感激...

**编辑 1：**

我发现它应该是（因为它适用于其他人）：

```
thrift_client:call(C,'insert', ["00000001", #columnParent{column_family="mq"}, #column{name="123456",value="Hello World!"}, 2]). 
```

这是相关的错误消息：

```
** exception error: no match of right hand side value {{protocol,thrift_binary_protocol,
                                                                 {binary_protocol,{transport,thrift_framed_transport,
                                                                                             {framed_transport,{transport,thrift_socket_transport,
                                                                                                                          {data,#Port<0.730>,infinity}},
                                                                                                               [],[]}},
                                                                                  true,true}},
                                                       {error,closed}}
     in function  thrift_client:send_function_call/3 (src/thrift_client.erl, line 83)
     in call from thrift_client:call/3 (src/thrift_client.erl, line 40) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:23:49.783

好的，我发现了问题所在，或者问题是正确的......

这是我的代码，用于连接和插入...

```
rr(cassandra_types).
{ok, C}=thrift_client_util:new("localhost", 9160, cassandra_thrift,[{framed, true}]).
{C1, _} = thrift_client:call(C, 'set_keyspace', ["my_keyspace"]).
thrift_client:call(C1,'insert', ["00000001", #columnParent{column_family="mq"}, #column{name="1234567",value="Hello World !", timestamp=0}, 2]). 
```

事实上，我们应该将“set_keyspace”返回的新的 thrift_client 插入......显然，对于通过 thrift 完成的每个调用，都会生成一个新的 thrift_client 并且应该使用它。

此外，我们应该使用 columnParent 而不是 columnPath （不知道为什么，它只是工作）。#column 中的时间戳是强制性的...

我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:30:15.827

我建议查看[https://github.com/ostinelli/erlcassa](https://github.com/ostinelli/erlcassa)而不是重新发明 Thrift-wrestling 轮子。

# c# - 如何从我的应用程序在用户默认浏览器中启动 URL？

> ID：10503909
> 
> 赞同：37
> 
> 时间：2012-05-08T17:59:13.627
> 
> 标签：c#, browser, desktop-application

如何在我的桌面应用程序中有一个按钮，该按钮会导致用户的默认浏览器启动并显示应用程序逻辑提供的 URL。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-08T18:00:06.793

```
 Process.Start("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-08T18:33:01.433

Process.Start([your url]) 确实是答案，除了非常小众的情况。然而，为了完整起见，我会提到我们不久前遇到了这样一个小众案例：如果你试图打开一个“file:\”url（在我们的例子中，显示我们的 webhelp 的本地安装副本），在从 shell 启动时，url 的参数被抛出。

我们相当老套的解决方案，除非你遇到“正确”解决方案的问题，否则我不推荐它，看起来像这样：

在按钮的点击处理程序中：

```
string browserPath = GetBrowserPath();
if (browserPath == string.Empty)
    browserPath = "iexplore";
Process process = new Process();
process.StartInfo = new ProcessStartInfo(browserPath);
process.StartInfo.Arguments = "\"" + [whatever url you're trying to open] + "\"";
process.Start(); 
```

除非 Process.Start([your url]) 不符合您的预期，否则您不应使用的丑陋功能：

```
private static string GetBrowserPath()
{
    string browser = string.Empty;
    RegistryKey key = null;

    try
    {
        // try location of default browser path in XP
        key = Registry.ClassesRoot.OpenSubKey(@"HTTP\shell\open\command", false);

        // try location of default browser path in Vista
        if (key == null)
        {
            key = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http", false); ;
        }

        if (key != null)
        {
            //trim off quotes
            browser = key.GetValue(null).ToString().ToLower().Replace("\"", "");
            if (!browser.EndsWith("exe"))
            {
                //get rid of everything after the ".exe"
                browser = browser.Substring(0, browser.LastIndexOf(".exe") + 4);
            }

            key.Close();
        }
    }
    catch
    {
        return string.Empty;
    }

    return browser;
} 
```

# c++ - 通过http加载文件

> ID：10503910
> 
> 赞同：1
> 
> 时间：2012-05-08T17:59:13.907
> 
> 标签：c++, file, qt, http

我是 QT 新手，遇到了以下问题。

下载返回一个空文件：

```
QFile file("book.gif"); 
QHttp http; 
if (file.open(QIODevice::WriteOnly))
{ 
    http.setHost("www.geocities.com"); 
    http.get("/mslerm/images/qtbook.gif", &file); 
    http.close(); 
    file.close(); 
} 
```

但是，如果在关闭 http 呼叫消息框之前 - 一切正常：

```
QFile file("book.gif"); 
QHttp http; 
if (file.open(QIODevice::WriteOnly))
{ 
    http.setHost("www.geocities.com"); 
    http.get("/mslerm/images/qtbook.gif", &file);
    QMessageBox msgBox;
    msgBox.setText(http.errorString());
    msgBox.exec();
    http.close(); 
    file.close(); 
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T18:11:27.323

问题是**get()**方法是非阻塞的，如文档本身所述： [Qhttp.get](http://doc.qt.nokia.com/4.7/qhttp.html#get)

一种方法是将**QHttp::dataReadProgress** *信号*与您开发的*插槽*连接起来，您可以在其中处理从 QHttp 对象接收到的数据。还要记住，现在不推荐使用 QHttp 和 QFtp 类，建议使用的类是：

[QNetworkAccessManager](http://doc.qt.nokia.com/4.7/qnetworkaccessmanager.html)
[QNetworkRequest](http://doc.qt.nokia.com/4.7/qnetworkrequest.html)
[QNetworkReply](http://doc.qt.nokia.com/4.7/qnetworkreply.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T18:04:22.567

您应该将一些回调连接到 QHttp 完成信号并在那里关闭文件处理程序。当您创建一个消息框时，从它弹出到关闭它的时间可能足以让下载结束，然后您正确关闭文件处理程序。关键是 QMessageDialog::exec 方法是同步的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T22:43:10.700

消息框在其 exec() 中旋转一个事件循环，并允许 QHttp 的异步处理发生。事件循环必须有机会在开始传输和期待任何结果之间运行。

理想情况下，您应该在连接到`requestFinished(...)`QHttp 信号的插槽中开始传输并处理结果。传输开始后，您的代码必须返回到事件循环。

作为一个快速破解，您可以调用`QCoreApplication::processEvents(QEventLoop::AllEvents, time)`，其中 time 是您希望 http 传输花费的最大毫秒数。这将被认为是不良风格并产生负面影响。一方面，可以重新输入开始传输的代码——例如，如果您在按钮单击槽中启动传输，并且用户在传输完成之前再次单击它。

你应该采用异步的、基于事件的编程风格，你有一个请求/响应函数链：请求函数启动可能需要时间的事情，响应函数处理结果。这听起来可能很乏味，但它是生成响应式应用程序的唯一方法。这样的代码通常驻留在 QObject 中，如果所有处理都是通过处理事件*或*通过信号/槽连接（但不是直接调用槽！）完成的，它可以很容易地移动到另一个线程以进一步提高性能并减少混合谱系的 GUI 线程暂停的影响。

# php - PHP和MySql生成KML

> ID：10503915
> 
> 赞同：1
> 
> 时间：2012-05-08T17:59:50.607
> 
> 标签：php, mysql, kml, html-entities

我正在尝试使用本文从 PHP 制作动态 KML [，](https://developers.google.com/kml/articles/phpmysqlkml)但我已经有了多边形的值，其中一些是多多边形。我决定将这些值放在数据库中，所以我只需要查询它们并将其放在 kml 中，但是当尝试使用它时，它会返回：

```
&lt;Polygon&gt;&lt;extrude&gt;1&lt;/extrude&gt;     &lt;tessellate&gt;1&lt;/tessellate&gt;&lt;outerBoundaryIs&gt;&lt;LinearRing&gt;
&lt;coordinates&gt; 
```

代替：

```
<Polygon>
<extrude>1<extrude>
<tessallete>.... etc 
```

这是我试图放置这些信息的方式：

```
$multiGeometryNode = $dom->createElement('MultiGeometry', htmlspecialchars($row['kml'])); 
```

有任何想法吗？顺便说一句，如果我使用 echo 来显示 htmlspecialchars($row['kml']) 它可以工作，但是当我尝试在 createElement 中使用它时它不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:52:12.947

看来我误读了你在做什么。

尝试

```
$multiGeometryNode = $dom->createElement('MultiGeometry', $row['kml']); 
```

代替

```
$multiGeometryNode = $dom->createElement('MultiGeometry', htmlspecialchars($row['kml'])); 
```

该[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)函数转义所有 html 字符。因此，您的`<`标志正在变成`&lt;`，但是它们`<`在浏览器中的呈现方式。

# java - foreach 循环导致空白条目？

> ID：10503919
> 
> 赞同：2
> 
> 时间：2012-05-08T17:59:57.127
> 
> 标签：java, jstl

我有这段代码，它`ArrayList<String> towns = new ArrayList<String>();`使用 JSTL 进行迭代，但即使 ArrayList 没有显示任何空白条目，我也会不断获得交替的空白条目（每第二行），所以我不确定发生了什么。

```
<c:if test="${!empty towns }">
    <select id="town">
        <c:forEach items="${towns}" varStatus="loop">
            <option value="${towns[loop.index]}">${towns[loop.index]}<option>
        </c:forEach>
    </select>
</c:if> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T18:06:50.767

它应该`</option>`在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:03:16.890

试试这个：

```
<c:if test="${!empty towns}">
    <select id="town">
        <c:forEach var="t" items="${towns}">
            <option value="${t}">${t}<option>
        </c:forEach>
    </select>
</c:if> 
```

# actionscript-3 - Flex：spark DataGrid在dataProvider中显示当前值以外的值

> ID：10503925
> 
> 赞同：0
> 
> 时间：2012-05-08T18:00:16.477
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我在屏幕上有 2 个 flex 数据网格。用户可以从任一数据网格中选择一个或多个行并将它们移动到另一个数据网格。进入应用程序时，下方表格为空。例如：

```
Item    Color   Price
--------------------
item57  red    $5.55
item62  blue   $5.29
item808 green  $2.21

Row  Item    Color   Price
--------------------------- 
```

请注意，有一列对底部数据网格上的行进行编号（仅）。

例如，当我进入应用程序并从顶部到底部网格移动 3 行时，行号很好（它们显示第 1、2 和 3 行）。例如：

```
Item    Color   Price
--------------------

Row  Item    Color   Price
---------------------------
1    item57  red    $5.55
2    item62  blue   $5.29
3    item808 green  $2.21 
```

例如，如果我将底部网格中的第 1 行移回顶部...

```
Item    Color   Price
--------------------
item57  red    $5.55

Row  Item    Color   Price
---------------------------
1    item62  blue   $5.29
2    item808 green  $2.21 
```

然后再次回到底部网格......

```
Item    Color   Price
--------------------

Row  Item    Color   Price
---------------------------
1    item62  blue   $5.29
2    item808 green  $2.21
1    item57  red    $5.55 
```

行号应该显示 3，因为它插入到列表末尾的底部网格中，但是当它这样做时，它会显示（旧）行号值 1。

当我调试并查看 dataprovider = _myData 时，我看到有`rowNumber`问题的行的值（对于上面的 item57）等于 3（应该如此）。但是，它在下部数据网格中显示为 1。

**dataprovider 值与 DataGrid 中显示的值有何不同？**

[我还可以调试和查看`gridLower`列信息，它还显示了有`rowNumber`问题的数据的正确值 3。]

较低的数据网格类似于以下内容（尽管我使用的是自定义 itemRenderer，此处为简单起见将其删除）：

```
[Bindable]
private var _myData:ListCollectionView=new ListCollectionView(new ArrayList());
...
<s:DataGrid dataProvider="{_myData}">
    <s:columns>
        <fx:Array>
            <s:GridColumn id="gridLower" headerText="myHeader" dataField="rowNumber"/>  
            ... 
```

将上表的行添加到下表的函数是：

```
private function addRow():void {    
    var selectedIndices:Object=gridUpper.grid.selectedIndices;
    for (var i:int=selectedIndices.length-1;i>=0;i--) {
        var item:Object=_upperTableData.removeItemAt(selectedIndices[i]);
        item.rowNumber=_myData.length+1;
        _myData.list.addItem(item);
    } 
    // I tried adding "_myData.refresh();" here and it had no effect
    // I tried adding "ListCollectionView(gridLower.dataProvider).refresh();" and it had no effect
    // I tried adding "grid2.dataProvider.refresh();" here but it had no effect
} 
```

更新 1：如果我重新排序下表中的任何列，则会出现正确的值。我似乎正在观察此链接中报告的内容： [http](http://www.barneyb.com/barneyblog/2007/06/23/another-flex-weirdnessgotcha/) ://www.barneyb.com/barneyblog/2007/06/23/another-flex-weirdnessgotcha/ 虽然还没有找到解决方案。`addRow()`请参阅上面我的功能中的尝试。我在正确的轨道上吗？

更新 2：虽然重新排序手动更正了较低网格中的数据，但我还没有找到一种以编程方式执行此操作的方法。我尝试插入：

```
_myData.sort=null;
var complete:Boolean=_myData.refresh(); 
```

就在上述`addRow()`功能结束之前，但它并没有解决我的问题。调试时，`complete`为真，但下方网格仍显示陈旧数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:09:26.897

新答案:) 如果有帮助，我将删除旧答案。

我还没有使用过 Spark DataGrid，期待它的行为像一个列表。

在此 DataGrid 方法的源代码中的一些评论中发现了这一点：

```
public function invalidateCell(rowIndex:int, columnIndex:int):void 
```

您可以通过为另一个值传递 -1 来使整个行/列无效。在下面文档的引用中，您还可以使用 dataProvider.itemUpdated()

> 如果指定的单元格可见，则重新显示。如果 variableRowHeight=true，那么这样做可能会导致相应行的高度发生变化。如果 columnIndex 为 -1，则整行无效。同样，如果 rowIndex 为 -1，则整个列无效。
> 
> 当 rowIndex 处的数据提供程序项的任何方面发生更改时，应调用此方法，这可能会对指定单元格的显示方式产生一些影响。调用此方法类似于调用 dataProvider.itemUpdated() 方法，该方法建议 Grid 应重新显示所有显示指定项目的行。使用此方法可能相对有效，因为它将更改范围缩小到单个单元格。

现在我终于知道集合（ArrayCollection、ListCollectionView）上的 itemUpdated() 方法实际上可以在哪里使用！

[编辑]

给你的网格一个 id：

```
<s:DataGrid id="lowerDataGrid" dataProvider="{_myData}"> 
```

然后您应该能够`addRow()`在更新集合后在您的方法中执行此操作：

```
lowerDataGrid.invalidateCell(item.rowNmber -1, 1); // assuming rowNumbers are 0 based 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T15:48:03.497

就我而言，在包含网格作为元素的主类中，每当我想强制刷新所有单元格时：

```
 gridsDataProvider.addItemAt(new Object(), 0);
    gridsDataProvider.removeItemAt(0); 
```

但是我的 GridItemRenderer 需要迎合数据的变化。所以我创建了一个 updateDisplay 方法：

```
 private function updateDisplay() : void {
            if (transWindow != null) {
                if (data == transWindow.total) {
                    if (field != "vat" && field != "total") {
                        textInput.visible = false;
                    } else {
                        line.visible = true;
                        textInput.enabled = false;
                        textInput.setStyle("fontWeight", "bold");
                        textInput.setStyle("fontSize", 14);
                    }
                } else {
                    line.visible = false;
                    textInput.visible = true;
                    textInput.enabled = true;
                    textInput.setStyle("fontWeight", "normal");
                    textInput.setStyle("fontSize", 12);
                }
            }
        } 
```

这个方法是从 creationComplete 处理程序调用的......

```
 protected function init(event:FlexEvent):void
        {
            getTransWindow(event.target.automationOwner);
            updateDisplay();
        } 
```

...以及 GridItemRenderer 的数据设置器

```
 override public function set data(v:Object):void {
            super.data = v;
            if (v == null) {
                textInput.text = "";
                return;
            }
            var value : * = v[field];
            if (value == null || value == undefined) {
                textInput.text = "";
                return;
            }
            if (value is Number)
                textInput.text = Number(value).toFixed(2);
            else
                textInput.text = ""+value;
            updateDisplay();
        } 
```

我的渲染器的 mxml 主体非常简单：

```
<s:Line id="line" width="100%" visible="false" yFrom="1" yTo="1">
    <s:stroke>
        <s:SolidColorStroke color="0" weight="0"/>
    </s:stroke>
</s:Line>
<s:TextInput id="textInput" y="2" restrict="0123456789." width="100%" height="100%" minWidth="10" borderVisible="false" textAlign="right"/> 
```

哦，如果您想知道，getTransWindow 方法只是一种检索包含网格的主调用类的方法：

```
private function getTransWindow(par : *) : void {
            if (transWindow != null)
                return;
            transWindow = par;
            while (!(transWindow is TransactionWindow)) {
                transWindow = transWindow.parent;
            }
        } 
```

希望这可以节省一些时间

问候克里斯托

# javascript - javascript中正则表达式的非常奇怪的结果

> ID：10503931
> 
> 赞同：3
> 
> 时间：2012-05-08T18:00:31.933
> 
> 标签：javascript, regex

我在正则表达式方面不是很好，但是发生了不合逻辑的事情：
我用这个小提琴验证了正则表达式的语法：http: [//jsfiddle.net/BcQfQ/2/](http://jsfiddle.net/BcQfQ/2/)然后将其替换`\d`为另一个正则表达式以检查来自这里的网址：http: [//daringfireball.net/2010/07/improved_regex_for_matching_urls](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)它不起作用：http: [//jsfiddle.net/bNHQs/2/](http://jsfiddle.net/bNHQs/2/)。最奇怪的是，当您复制正则表达式并将其粘贴到文本框中（然后在代码中编写 textbox.value）时，一切都很好：http: [//jsfiddle.net/6uAQG/2/](http://jsfiddle.net/6uAQG/2/)。

不工作的正则表达式的代码：

```
var reg=/\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/;
var str="2";
if(str.match(reg))alert("test:true");
else alert("test:false"); 
```

如何在代码中编写正则表达式以使其正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T18:05:38.343

您必须使用反斜杠转义分隔符（“/”）。分隔符标记表达式的开始和结束。只有在用反斜杠转义时才能使用斜杠。以下表达式应该有效：

```
var reg=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/; 
```

# oracle - 直接路径插入 Oracle

> ID：10503932
> 
> 赞同：2
> 
> 时间：2012-05-08T18:00:32.377
> 
> 标签：oracle, oracle11gr2

我正在阅读`Direct-Path INSERT`oracle 文档[Loading Tables](http://docs.oracle.com/cd/E11882_01/server.112/e10595/tables004.htm#InsertDMLErrorLogging)

写的是：在`direct-path INSERT`操作过程中，数据库`appends`在表中现有数据之后插入数据。数据直接写入数据文件，绕过缓冲区缓存。表中的可用空间不被重复使用，并且`referential integrity constraints are ignored`. 直接路径 INSERT 的性能明显优于传统插入。

谁能解释一下，参照完整性约束是如何被忽略的，根据我的理解，它会将数据加载到表中而忽略 .`referential constraint`并且在插入后它将检查参照约束。

如果是这样，如果我这样使用。

```
 FORALL i IN v_temp.first..v_temp.last save exceptions
  INSERT /*+ APPEND_VALUES */ INTO orderdata 
  VALUES(v_temp(i).id,v_temp(i).name);
 COMMIT;

Will this will gave me correct index ,in case of any exceptions and how ?. 
```

很抱歉一次问了这么多问题，但它们是相互关联的。

1.  如何忽略参照约束
2.  什么是上表中的可用空间
3.  如果出现任何异常，它将如何给出正确的索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:02:13.010

第一个问题应该是（我想要/需要使用直接路径插入吗？），第二个问题应该是“我的查询是否使用了直接路径插入？”

如果您需要参照完整性检查，则不要使用直接路径插入。

如果您不希望表被以独占方式锁定以进行修改，则不要使用直接路径插入。

如果您通过删除删除数据并仅使用此代码插入，则不要使用直接路径插入。

关于是否使用直接路径插入的一种快速简便的检查方法是在提交插入之前立即从表中选择一行。如果成功，则不使用直接路径插入——如果是因为必须在会话读取表之前提交更改，您将收到一条错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T04:57:48.133

在该语句中**没有**忽略参照完整性。

有关解释和示例，请参阅[此 AskTom 线程：](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1211797200346279484#2096268200346987629)

> 在旧文档中似乎忽略的是.... insert /*+ append */ 将忽略附加提示并在表具有引用完整性或触发器时使用常规路径加载

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T18:44:17.243

空闲空间是一个它不会重用通过删除在表中释放的空间，而标准插入会。

我看不到任何地方说它将在操作后进行参照完整性检查。我怀疑你必须自己做。

erm 什么索引？

编辑插入。

索引作为要插入的第 3 行，我相信不一定与表有任何关系，除非插入中的索引恰好是表的键。

检查它是否保持参照完整性？将“不良”记录放入例如带有不存在的 customerid 的订单中。

可用空间。假设您有一个带有 int 主键的 nchar(2) 表，例如

```
1 AA
2 AB
3 AC 
```

所以在你的索引键上

```
1 points to 0
2 points to 4 (unicode one char = two bytes)
3 points to 8 
```

现在您使用键 2 删除记录，现在您有了

```
1 points to 0
3 points to 8 
```

如果你做一个正常的插入，它会重用你得到的可用空间

```
1 points to 0
3 points to 8
4 points to 4 
```

但是，这种直接插入的东西通过不重复使用空间来节省时间，因此您可以获得

```
1 points to 0
3 points to 8
4 points to 12 
```

顺便说一下，出于说明目的非常简化的场景......

# emacs - Emacs ediff、外来字符集和文本文件编码

> ID：10503937
> 
> 赞同：4
> 
> 时间：2012-05-08T18:00:51.213
> 
> 标签：emacs, encoding

每当我在文本文件中使用除拉丁语之外的字符集（例如混合西里尔文和拉丁文）时，我通常选择 utf-16 进行编码。这样我可以在 OS X 下使用 emacs 或 TextEdit 编辑文件。

但是随后 emacs 中的 ediff 停止工作。它只说“二进制文件这个和那个不同”。

可以使 ediff 以某种方式处理包含外来字符的文本文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T19:30:54.417

自定义变量`ediff-diff-options`并添加选项`--text`。

```
(setq ediff-diff-options "--text") 
```

### 编辑：

Ediff 调用外部程序 GNU 实用程序`diff`来计算差异；但是，`diff`不理解 unicode，并将 unicode 编码文件视为二进制文件。选项“--text”只是强制它将输入文件视为文本文件。请参阅 GNU Diffutils 手册：[比较和合并文件](http://www.gnu.org/software/diffutils/manual/html_node/index.html)；特别是[1.7 二进制文件和强制文本比较](http://www.gnu.org/software/diffutils/manual/html_node/Binary.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:08:39.657

我强烈建议您使用 utf-8 而不是 utf-16。utf-8 是大多数 Unix 世界的标准编码，包括 Mac OS X，它不会遇到这些问题。

# java - 游戏的主菜单

> ID：10503938
> 
> 赞同：1
> 
> 时间：2012-05-08T18:00:51.647
> 
> 标签：java, swing

我是一个尝试创建游戏的初学者。游戏是空的，我没有开始写。

我的问题：当我单击开始按钮时，我想在同一帧中开始游戏，但是当我单击开始时，使用此代码，程序会打开带有菜单的另一个帧，并且在原始帧中将删除面板.

我怎样才能做这个简单的菜单？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.File;
import panelimage.Image;

public class Project0 extends JFrame{
private static final long serialVersionUID = 1L;
private Game JPanelGame;
private Image MainMenu = new Image(new File("src/img/menu_background.jpg"));
JButton start = new JButton("START GAME"), exit = new JButton ("LEAVE GAME");

public Project0() {

    super();

    initFrame();
    initMenu();

    this.addKeyListener(new KeyAdapter() {

        public void keyPressed(KeyEvent evt) {
            JPanelGame.keyPressed(evt);
        }

        public void keyReleased(KeyEvent evt) {
            JPanelGame.keyReleased(evt);
        }            
    });

}

private void initFrame() {

    setResizable(false);
    setBounds(new Rectangle(400, 400, 600, 400));
    MainMenu.setLayout(new BorderLayout()); 
}

private void initMenu() {

    initButtons();

    MainMenu.setLayout(null);       
    MainMenu.add(start);
    MainMenu.add(exit);

    add(MainMenu);      
    setContentPane(MainMenu);

    setTitle("Project0");

}

private void initButtons() {

    start.addActionListener(new ActionListener() {  

        public void actionPerformed(ActionEvent e){

            JPanelGame = new Game();

            remove(MainMenu);

            add(JPanelGame, BorderLayout.CENTER);
            setContentPane(JPanelGame);

            invalidate(); validate();

            SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    Project0 Game = new Project0();
                    Game.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    Game.setVisible(true);
                }
            });
        }
    });      

    start.setLocation(225,100);
    start.setSize(150,50);

    exit.addActionListener(new ActionListener() {   

        public void actionPerformed(ActionEvent e){

            System.exit(0);
        }
    });

    exit.setLocation(225,200);
    exit.setSize(150,50);       

}

public static void main(String[] args) {    
    Project0 Game = new Project0();
    Game.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Game.setVisible(true);

} 
```

}

这个框架将开始

```
import java.awt.*;
import java.awt.event.KeyEvent;
import javax.swing.*;

import java.io.File;
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;

import highscores.*;

public class Game extends JPanel implements Runnable {

private static final long serialVersionUID = 1L;    

Thread game;
BufferedImage background;
HighscoreManager scores = new HighscoreManager();

public Game(){

    super(true);
    try{
        background = ImageIO.read(new File(""));
    }catch(Exception e) {}

    game=new Thread(this);
    game.start();
}

public void paintComponent(Graphics graphic2d){

    setOpaque(false);       
    super.paintComponent(graphic2d);      

    graphic2d.drawImage(background, 0, 0, null);
}   

public void keyPressed(KeyEvent e) {

    int key = e.getKeyCode();

    if (key == KeyEvent.VK_LEFT) {

    }

    if (key == KeyEvent.VK_RIGHT) {

    }

    if (key == KeyEvent.VK_UP) {

    }

    if (key == KeyEvent.VK_DOWN) {

    }

    if (key == KeyEvent.VK_A) {

    }

    if (key == KeyEvent.VK_D) {

    }

    if (key == KeyEvent.VK_W) {

    }

    if (key == KeyEvent.VK_S) {

    }
}

public void keyReleased(KeyEvent e) {

    int key = e.getKeyCode();

    if (key == KeyEvent.VK_LEFT) {

    }

    if (key == KeyEvent.VK_RIGHT) {

    }

    if (key == KeyEvent.VK_UP) {

    }

    if (key == KeyEvent.VK_DOWN) {

    }

    if (key == KeyEvent.VK_A) {

    }

    if (key == KeyEvent.VK_D) {

    }

    if (key == KeyEvent.VK_W) {

    }

    if (key == KeyEvent.VK_S) {

    }
}

public void run(){

        try {Thread.sleep(50);}catch(InterruptedException ex){}     
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:47:56.467

我看到两个选项，具体取决于您的需要。或者您只需从框架中删除所有组件并添加新内容。但是这样做，你会失去你的“菜单框架”。另一种选择（IMO 是两者中最好的）是选择 a `CardLayout`，其中一张卡是您的菜单，另一张是您的游戏。然后“开始”按钮将简单地从“菜单卡”切换到“游戏卡”（如果需要，开始游戏）。在您的游戏中，您可以有一个按钮/键/... 做相反的事情（从游戏卡切换到菜单卡）

我正在查看您的代码，但我放弃了（当然因为@orzechowskid 已经指出了您需要调整的内容）。如果您要在此站点上发布更多代码，请提供一些提示：

1.  阅读[SSCCE.org](http://sscce.org)网站并尝试按照那里的说明发布代码
2.  遵循[Java 命名约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)（例如，类以大写字母开头，变量以小写字母开头）
3.  不要为您自己的类指定与标准 JDK 类相同的名称。使不熟悉您的代码（但可能相当熟悉 JDK 类）的人很难阅读代码。例如，我花了一些时间才意识到你有自己的课程，与课程`panelimage.Image`无关`java.awt.Image`

然后根据我对您的代码所看到的一些与 Swing 相关的提示：

1.  学习如何使用`LayoutManager`s 并摆脱`null`布局。布局管理器的[视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)可能是一个很好的起点
2.  Swing 旨在与 KeyBindings 一起使用，而不是与 KeyListeners 一起使用。看[教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)
3.  小心使用并结合 Swing UI`Thread.sleep`运行多个s。`Thread`确保您了解[Swing 线程规则](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:39:26.073

当您`SwingUtilities.invokeLater()`在按钮的动作侦听器中调用时，您正在创建第二个`Project0`对象。并且无论何时创建`Project0`，都会在屏幕上绘制一个 JFrame，其中包含一个主菜单。删除对的调用`SwingUtilities.invokeLater()`，您应该只剩下一个框架。

# html - HTML5 使用 replaceState 更改 url 子域

> ID：10503946
> 
> 赞同：0
> 
> 时间：2012-05-08T18:01:39.143
> 
> 标签：html, firefox, firebug

我在这样的域中有一个应用程序[http://www.example.com/](http://www.example.com/)，但我需要将状态替换为子域，如[http://test.example.com/](http://test.example.com/)。

我正在尝试使用这样的 replaceState 来做到这一点：

`history.replaceState({}, '', 'http://test.example.com/')`

但在 Firebug 中，我遇到了一个错误：

`Error: Security error`

我知道这可能违反了**Same Origin Policy**。有没有办法在不重新加载页面的情况下设置子域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:24:58.537

不，您不能在不重新加载页面的情况下更改页面的来源，因为它会违反同源策略。

# magento - Magento 导出 - 图库字段始终为空白

> ID：10503948
> 
> 赞同：0
> 
> 时间：2012-05-08T18:01:40.243
> 
> 标签：magento, export, gallery, image-gallery

我正在尝试导出名为“gallery”的图片库字段，理想情况下，它应该在图库中有一个逗号分隔的图片列表。该字段是 magento 中的标准字段。

当我从 Magento 管理站点导出时，该字段始终为空白。它在我的一个网站上运行良好，但另外 2 个完全空白。

有效的网站与其他网站之间的唯一区别是网站上有两家商店有效。

我检查了数据库，发现“catalog_product_entity_media_gallery_value”中有一些缺失的记录，所以我根据catalog_product_entity_media_gallery 中的记录添加了这些记录。在那之后，这个领域仍然没有出口。

让这个字段导出需要什么特别的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:40:50.890

问题解决了。事实证明，自定义导出模块未启用。

（我生命中的四个小时我不会回来。）

# ruby-on-rails-3 - 向视图添加表单会给我一个路由问题

> ID：10503951
> 
> 赞同：0
> 
> 时间：2012-05-08T18:01:54.643
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的 Rails 应用程序中有 3 个控制器/模型：辣椒事件链接

## 辣椒模型

```
has_many :events 
```

## 事件模型

```
belongs_to :pepper

has_many :links 
```

## 链接模型

```
belongs_to :event 
```

## 路由文件

```
Peps::Application.routes.draw do

  resources :events do
    resources :links
  end

  resources :peppers do
    resources :events
  end

  resources :links

  resources :events

  resources :peppers
end 
```

## 看法

```
<p id="notice"><%= notice %></p>

<%= form_for([@pepper, @pepper.events.build]) do |f| %>

  <p>Titolo : <%= f.text_field :title %></p>
  <p>Note: <%= f.text_area :note %></p>
  <p><%= f.submit "Aggiungi evento" %></p>
<% end %>

<p>
  <b>Title:</b>
  <%= @pepper.title %>
</p>

<p>
  <b>Note:</b>
  <%= @pepper.note %>
</p>

<hr>

<% for event in @events %>
    <h3><%= event.title %></h3>
    <p><%= event.note %></p>

    <ul>
        <% for link in event.links %>
            <li><%= link.url %></li>
        <% end %>
    </ul>

    <%= link_to 'Cancella evento', link, confirm: 'Are you sure?', method: :delete %>
<% end %>

<%= link_to 'Edit', edit_pepper_path(@pepper) %> |
<%= link_to 'Back', peppers_path %> 
```

这个视图工作得很好，没有出现错误。

`<ul>`但是如果我在元素之后添加这个表单

```
<%= form_for([event, event.links.build]) do |f| %>
            <p><%= f.text_field :url %></p>
            <p><%= f.submit "Aggiungi link" %></p>
<% end %> 
```

我收到这个错误

```
No route matches {:controller=>"links", :format=>nil, :event_id=>#<Event id: nil, title: nil, note: nil, created_at: nil, updated_at: nil, pepper_id: 4>} 
```

这个错误是为了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:11:53.637

如果没有看到您的控制器代码，我无法确定这一点，但我怀疑问题在于`@events`Rails 关系而不是正确的数组。在你的控制器中，如果你有类似的东西：

```
@events = @pepper.events 
```

您需要将其更改为：

```
@events = @pepper.events.all 
```

强制@events 解析为一个具体的数组。否则，迭代`@events`将包括您为第一个表单构建的空事件：

```
<%= form_for([@pepper, @pepper.events.build]) do |f| %> 
```

如果这不能解决您的问题，请发布此视图的相关控制器代码。

# haskell - 新类型 Int -> CInt 编组器

> ID：10503953
> 
> 赞同：1
> 
> 时间：2012-05-08T18:01:57.130
> 
> 标签：haskell, types

我正在将 FFI 写入 pdflib。Pdflib C API 有许多函数可以将各种句柄（文档、页面、图像、字体）作为纯整数（而不是指针）返回和/或获取。

为了确保我不会不小心将错误的参数传递给函数，我以以下形式创建了一堆新类型：

```
newtype PdiDoc = PdiDoc Int
newtype PdiPage = PdiPage Int
newtype PdfImage = PdfImage Int
newtype PdfFont = PdfFont Int 
```

现在我需要为这些类型提供一个编组器。

```
image2c (PdfImage i) = fromIntegral i
font2c (PdfFont f) = fromIntegral f
pdipage2c (PdiPage i) = fromIntegral i 
```

如您所见，编组器完全相同，只是针对不同的类型。

所以我的问题是，是否有某种类型的魔法，SYB vodoo 技巧，我可以使用只有一个函数来编组所有这些类型，还是我必须一次又一次地为不同的新类型编写相同的函数？

编辑：我接受了唐的回答，因为它解决了我的问题。

我打开了

```
GeneralizedNewtypeDeriving 
```

添加

```
deriving (Eq, Ord, Num, Enum, Real, Integral) 
```

到我的每个新类型，现在我可以使用标准 fromIntegral 来编组所有这些。

Nathan Howell 的回答也是正确的，我赞成。但不幸的是，他的解决方案意味着放弃像我正在使用的 c2hs 这样的 FFI 预处理器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T18:15:39.537

GHC 的 FFI 扩展允许使用包装 FFI 原语的新类型。您可以更改导入的函数签名以使用新类型，并且（希望）避免手动解包它们。

```
{-# LANGUAGE ForeignFunctionInterface #-}

module Main where

newtype Foo = Foo Int

foreign import ccall someCall :: Foo -> IO Foo

main :: IO ()
main = do
  Foo x <- someCall (Foo 1)
  print x 
```

或者，新的 GHC 泛型功能（自 7.2.1 起可用）允许对新类型进行泛型解包和重新打包：

```
{-# LANGUAGE DeriveGeneric #-}
{-# LANGUAGE ForeignFunctionInterface #-}
{-# LANGUAGE TypeFamilies #-}

module Main where

import GHC.Generics

-- use a regular newtype
newtype Foo1 = Foo1 Int deriving (Generic, Show)

-- or with record syntax
newtype Foo2 = Foo2{foo2 :: Int} deriving (Generic, Show)

unpack :: (Generic a, Rep a ~ D1 dc (C1 cc (S1 sc (K1 R kc)))) => a -> kc
unpack = unK1 . unM1 . unM1 . unM1 . from

pack :: (Generic a, Rep a ~ D1 dc (C1 cc (S1 sc (K1 R kc)))) => kc -> a
pack = to . M1 . M1 . M1 . K1

-- the C import uses Ints
foreign import ccall "someCall" c'someCall :: Int -> IO Int

-- and the typed wrapper packs/unpacks to FFI primitives
someCall :: Foo1 -> IO Foo2
someCall = fmap pack . c'someCall . unpack

main :: IO ()
main = do
  Foo2 x <- someCall (Foo1 1)
  print x 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T18:15:10.853

您可以使用 为您的类型派生“Num” `GeneralizedNewtypeDeriving`，这有助于您使用文字和运算符。

对于编组，我会使用 FFI 预处理，例如 hsc2hs，它可以自动包装和展开新类型。

[RWH](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CGsQFjAC&url=http://book.realworldhaskell.org/read/interfacing-with-c-the-ffi.html&ei=8WKpT4SfHOL66QGZmtHTBA&usg=AFQjCNEfLoZ8PvE22rE8OgvHw_Itu_1sUQ&sig2=TGVeesQ85mRQC9lcDMfOMg)的一个例子：

![在此处输入图像描述](../Images/2abd2601e5974008e696cafb816af309.png)

# php - Magento 1.4.1.1 目录价格规则不适用

> ID：10503954
> 
> 赞同：0
> 
> 时间：2012-05-08T18:01:58.783
> 
> 标签：php, magento, cron

我安装了 Magento 1.4.1.1，它为不同的用户组使用目录价格规则。

不幸的是，这些规则在 2-3 天后不再适用。

我已经完成了以下修复，如下所述： http: [//mandagreen.com/fixing-catalog-price-rules-cart-issue-in-magento-1-4-1-0/](http://mandagreen.com/fixing-catalog-price-rules-cart-issue-in-magento-1-4-1-0/)

这阻止了规则出现在目录中。

更改第 105 行：

app/code/local/Mage/CatalogRule/Model/Observer.php

至：

```
 $gId = $product->getCustomerGroupId(); 
```

这有助于在具有特定客户组的用户登录时显示规则。

但是，该规则不会持续应用超过 2-3 天。除非我进入管理员，否则请转到目录价格规则并单击“全部应用”

我还在我的服务器上设置了 cron 作业：

```
cron.sh
cron.php
indexer.php 
```

如何创建 Cron 作业以专门应用所有目录价格规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:10:24.607

首先，你永远不应该编辑核心代码。

如果您的规则没有得到应用，那么 cron-y 就会发生一些事情。目录价格规则需要 Cron，因此请确保其设置正确，如下所示：

```
*/5 * * * * /absolute/path/to/bin/php -f /absolute/path/to/magento/cron.php 
```

如果这不能解决您的问题，我想您可以编写一个模块来经常 cron 一些额外的代码，但如果正确启用了 cron，您不应该这样做。

如果您确实想走这条路，那么 Magento 中的 crons 非常简单

创建一个模块。如果您不知道该怎么做，请[从这里开始](http://alanstorm.com/category/magento)并逐步完成。

然后，创建一个观察者文件：{{namespace}}/{{modulename}}/Model/Observer.php

在那个文件里面：

```
<?php

class <namespace>_<modulename>_Model_Observer {

  public function functionName() {
      // apply catalog price rules code here
  }

} 
```

在模块的 etc/config.xml 中：

```
<config>
  ...
  <crontab>
    <jobs>
      <unique_cron_job_name>
        <schedule><cron_expr>* * * * *</cron_expr></schedule>
        <run><model>{{modulename}}/observer::functionName</model></run>
      </unique_cron_job_name>
    </jobs>
  </crontab>
  ...
</config> 
```

# java - 从 RGB 中创建颜色提供了不同于原始 RGB 的另一种颜色

> ID：10503955
> 
> 赞同：1
> 
> 时间：2012-05-08T18:02:02.760
> 
> 标签：java, transparency, rgb, bufferedimage, color-space

我需要从像素的 RGB 颜色中创建一个 Color 对象（读取 PNG 文件的 BufferedImage 对象，BufferedImage 颜色空间是 BufferedImage.TYPE_4BYTE_ABGR）。但是在某些颜色上存在问题，请参阅下面的代码和输出。我想这是某种色彩空间问题，但我不知道如何解决）：感谢您的任何提示！

```
// imagine some great loop for x,y around the following code
int color = myImage.getRGB(x, y);

Color c = new Color(myImage.getRGB(x, y));

if(c.getRGB() != color)
    System.out.println("fail " + color + " vs " + c.getRGB()); 
```

输出：

```
fail -116782582 vs -16119286
fail 0 vs -16777216
fail 117440511 vs -1
fail -1090519040 vs -16777216
fail 1488435127 vs -4737097
fail -1090453247 vs -16711423 
```

还有更多。如果有帮助：例如透明度变黑。我猜新的 Color 对象使用的是 BufferedImage 以外的另一个色彩空间，但我不知道如何为新的 Color 对象设置色彩空间？还是 RGB 信息不足以重新创建颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:57:45.303

我认为问题在于您正在丢弃颜色中的 alpha 信息。我认为您需要执行以下操作：

```
int color = myImage.getRGB(x, y);
ColorModel model = myImage.getColorModel();
Color c = new Color(color, model.hasAlpha()); 
```

# php - Windows 7 中的 PHP Cronjob

> ID：10503956
> 
> 赞同：0
> 
> 时间：2012-05-08T18:02:03.673
> 
> 标签：php

Hye alls ..这是我的cronjob将执行的代码..

```
$query = "UPDATE program SET status_penilaian = 1  WHERE tarikh_buka = CURDATE()";
$hasil = mysql_query($query); 
```

问题是.. 如何在任务计划中设置 cronjob 这个 php 文件？

我正在使用 PHP 版本 5.2.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:10:57.107

你自己研究过吗？

您可以通过创建[事件直接在 MySQL 中执行此操作](http://www.sitepoint.com/how-to-create-mysql-events/)

或者

使用[PyCron](http://www.kalab.com/freeware/pycron/pycron.htm)，在 Windows 中使用它取得了一些成功

或者

[谷歌](http://www.google.co.uk/search?client=safari&rls=en&q=mysql%20cron%20query&ie=UTF-8&oe=UTF-8&redir_esc=&ei=6mCpT_aJA5CN4gSgh90d#hl=en&client=safari&rls=en&sclient=psy-ab&q=mysql%20cron%20query%20windows&oq=mysql%20cron%20query%20windows&aq=f&aqi=&aql=&gs_l=serp.3...1652.2653.0.2709.8.6.0.0.0.0.0.0..0.0...0.0.TOo7qJ4Jhos&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=1c47a8cd7926411e&biw=1920&bih=1018)的第一个列表是这样的：

[http://lists.mysql.com/eventum-users/1342](http://lists.mysql.com/eventum-users/1342)

> 1.  使用 Windows 计划任务。（没那么好）
>     
>     
> 2.  使用基于 Web 的服务：[http://www.cronjobs.org](http://www.cronjobs.org)（好的，但是任何超过 13 分钟的时间，你都必须付费 - 很少，但它确实有效）
>     
>     
>     
>     ```
>      b. http://www.webcron.org (ok but limited to running cron jobs at hourly intervals as the minimum) 
>     ```
>     
>     
> 3.  Visualcron (http://www.visualcron.com/) GUI windows app - 好的，但我发现很难让它正常工作。支持不存在 - 从未收到我的查询的电子邮件。你可能会有更好的运气。
>     
>     
> 4.  CRONw - (http://cronw.sourceforge.net/ & [http://sourceforge.net/projects/cronw/](http://sourceforge.net/projects/cronw/) ) 非常好 - 像 Unix 上的 cron 作业一样工作和配置。尚无 Windows 安装程序，但将在 v2.1 中发布。需要安装 PERL（推荐安装 ActiveStates Perl）。

# android - Android 中 System.loadLibrary() 是如何加载共享库的？

> ID：10503960
> 
> 赞同：0
> 
> 时间：2012-05-08T18:02:12.863
> 
> 标签：android, shared-libraries, dlopen, android-hardware

System.loadLibrary("library-name") 如何在 android.Does 它调用

libhardware.so 的 dlopen() 的 hw_get_module() 或通过链接器加载的方法？Rgds，软软的

# java - 将完整日期（日期和小时）字符串解析为日期会导致异常

> ID：10503961
> 
> 赞同：1
> 
> 时间：2012-05-08T18:02:18.327
> 
> 标签：java, parsing, date

我正在从 SQLITE 数据库获取日期，例如：2012-05-07 20:59:45

尝试执行此代码，但失败

```
DateFormat formatter = new SimpleDateFormat("dd-MMM-yy");
Date date = formatter.parse("2012-05-07 20:59:45"); 
```

那我该怎么做呢？也试过`SimpleDateFormat("dd-MMM-yy HH:mm:ss")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T18:05:47.740

你试过`SimpleDateFormat("yyyy-MM-dd HH:mm:ss")`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:12:05.343

你尝试如下，

```
DateFormat formatter = new SimpleDateFormat("yyy-MM-dd HH:mm:ss");
Date date = formatter.parse("2012-05-07 20:59:45"); 
```

# actionscript-3 - AS3 对象在 1.5 - 2 分钟后莫名消失

> ID：10503962
> 
> 赞同：0
> 
> 时间：2012-05-08T18:02:20.380
> 
> 标签：actionscript-3

我是 as3 的新手，但我一直在学习。我正在创建一个带有文本字段输入的容器，以便用户可以创建一个“帖子”。当动画从舞台中移除时会触发此事件，它在完成后会自动执行。

然而，大约 1.5-2 分钟后，容器莫名其妙地消失了。这是一个问题，因为用户很可能希望花费 2 分钟以上的时间来发帖。我一生都无法弄清楚为什么会发生这种情况，这可能是垃圾收集问题吗？

非常感谢您的任何帮助，谢谢，

担

```
var titleText:Title = new Title();
var titleInput:TextField = new TextField();

var categoryText:Category = new Category();
var categoryInput:TextField = new TextField();

var postText:Text = new Text();
var postInput:TextField = new TextField();

//setup text formats to be used
var postCreationTextFormat:TextFormat = new TextFormat();

postCreationTextFormat.font = "arial";
postCreationTextFormat.size = 20;
postCreationTextFormat.align = "left";
postCreationTextFormat.leftMargin = 2;

//Fade In Post Creation Box after Seed to Bud Animation.
seedToBud.addEventListener(Event.REMOVED_FROM_STAGE, createPostInput);

//Some variables to declare for the createPostInput function.
var postCreationContainer:PostCreationContainer = new PostCreationContainer;
var contentWindow:ContentWindow = new ContentWindow;
var postCreationInputBoxes:PostCreationInputBoxes = new PostCreationInputBoxes;
var thumb:Thumb = new Thumb;
var track:Track = new Track;
var scrollDownArrow:ScrollDownArrow = new ScrollDownArrow;
var scrollUpArrow:ScrollUpArrow = new ScrollUpArrow;

function createPostInput(event:Event)
{
    addChild(postCreationContainer);    
    postCreationContainer.x = 230;
    postCreationContainer.y = 400;

    postCreationContainer.addChild(track);
    track.x = 428;
    track.y = 25;

    postCreationContainer.addChild(thumb);
    thumb.x = 418;
    thumb.y = 25;

    postCreationContainer.addChild(scrollDownArrow);
    scrollDownArrow.x = 418;
    scrollDownArrow.y = 269;

    postCreationContainer.addChild(scrollUpArrow);
    scrollUpArrow.x = 418;
    scrollUpArrow.y = 6;

    postCreationContainer.addChild(contentWindow);
    contentWindow.x = 6;
    contentWindow.y = 6;

    postCreationContainer.addChild(postCreationInputBoxes);
    postCreationInputBoxes.x = 6;
    postCreationInputBoxes.y = 6;

    postCreationContainer.alpha = 0;
    postCreationContainer.addEventListener(Event.ENTER_FRAME, fadeInCreatePostInput);

    postCreationInputBoxes.addChild(titleText);
    titleText.x = 0;
    titleText.y = 0;

    postCreationInputBoxes.addChild(titleInput);

    postCreationInputBoxes.addChild(categoryText);
    categoryText.x = 0;
    categoryText.y = 60;

    postCreationInputBoxes.addChild(categoryInput);

    postCreationInputBoxes.addChild(postText);
    postText.x = 0;
    postText.y = 124;

    postCreationInputBoxes.addChild(postInput); 

    titleInput.defaultTextFormat = postCreationTextFormat;
    titleInput.type = "input";
    titleInput.multiline = false;
    titleInput.wordWrap = false;
    titleInput.maxChars = 150;
    titleInput.border = true;
    titleInput.width = 403;
    titleInput.height = 30;
    titleInput.x = 0;
    titleInput.y = 32;
    titleInput.background = true;
    titleInput.backgroundColor = 0xFFFFFF;

    categoryInput.defaultTextFormat = postCreationTextFormat;
    categoryInput.type = "input";
    categoryInput.multiline = false;
    categoryInput.wordWrap = false;
    categoryInput.maxChars = 150;
    categoryInput.border = true;
    categoryInput.width = 403;
    categoryInput.height = 30;
    categoryInput.x = 0;
    categoryInput.y = 96;
    categoryInput.background = true;
    categoryInput.backgroundColor = 0xFFFFFF;

    postInput.defaultTextFormat = postCreationTextFormat;
    postInput.type = "input";
    postInput.multiline = true;
    postInput.wordWrap = true;
    postInput.maxChars = 500;
    postInput.border = true;
    postInput.width = 403;
    postInput.height = 361.5;
    postInput.x = 0;
    postInput.y = 156;
    postInput.background = true;
    postInput.backgroundColor = 0xFFFFFF;

    stage.focus = titleInput;
    seedToBud.removeEventListener(Event.REMOVED_FROM_STAGE, createPostInput);
}

function fadeInCreatePostInput(event:Event):void
{
    postCreationContainer.alpha += 0.05;
    if (postCreationContainer.alpha == 1)
    {
        postCreationContainer.removeEventListener(Event.ENTER_FRAME, fadeInCreatePostInput);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:59:22.787

您是否知道您的 alpha 增量器没有舍入问题？我会检查 alpha 的整数值，而不是真正的浮点值。或者，对一些小的 FUZZ 值进行模糊比较（alpha >= 1-FUZZ && alpha <= 1+FUZZ）。

# math - 在 3D 空间中存储方向的快速有效的方法？

> ID：10503963
> 
> 赞同：2
> 
> 时间：2012-05-08T18:02:22.830
> 
> 标签：math, opengl, 3d, rotation, orientation

我最初使用 3 个表示对象原点、前向和向上方向的向量将对象原点和方向存储在 3D 空间中。

为了应用到模型视图矩阵堆栈的正确变换，我使用这三个向量组成仿射变换矩阵。

平移是微不足道的，但是通过构建正确的旋转矩阵（取决于旋转的角度和轴）并将其应用于这 3 个向量来应用旋转。

我将这种方法用于大量对象，并且旋转/仿射矩阵的组合导致了性能瓶颈。

我想知道是否有更明智/有效的方式来存储方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T19:26:30.333

> 我最初使用 3 个表示对象原点、前向和向上方向的向量将对象原点和方向存储在 3D 空间中。

或者换句话说：您正在存储一个 3×3 矩阵。OpenGL 使用的矩阵是一样的，虽然它们是 4×4，但唯一的区别是，元素 4,4 总是 1，元素 0...3,4 都是 0，并且第一列 0,0...3 是 forward 和 up 的叉积，通常称为*right*。

这实际上是在 3D 空间中表示对象放置的最简洁和直接可访问的方式。您可以通过执行单个矩阵乘法来应用任何类型的转换。

另一种方法是使用**四元数**和偏移向量。但是，如果您希望您的对象是可翻译的，则必须将四元数转换为矩阵（或者您可以为转换层次结构链接许多平移/旋转配对，但使用矩阵实际上会导致更少的开销）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T18:04:23.613

除了内存，是什么阻止您存储整个 4x4 仿射矩阵？

更好的是，ISTR 表示，如果数组被标准化，底行*通常是* `[0, 0, 0, 1]`这样，您只需要存储前三行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T21:34:01.903

四元数可能是存储方向的最自然/最有效的方式（它在所有方面都应该比前向/向上向量更好）。四元数需要存储 4 个值，需要 10 次乘法和 15 次加法才能[转换为 3x3 旋转矩阵](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation#Conversion_to_and_from_the_matrix_representation)——不需要除法或超越函数。

如果您特别需要空间，您可能只能使用 3 个值，因为您可以从其余三个稳健地生成单位四元数的第一个元素。这将需要额外的 3 次乘法、3 次加法和一个平方根（这也有点棘手，因为您需要确保第一个元素是非负的......）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T15:11:00.457

在当前 GPGPU 上，四元数转换可能比 Matrix 更快，其中对全局内存的访问比对本地内存的访问要慢得多。根据[此表](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation#Results)，您计算了两倍，但需要获取不到一半的内存。

渲染将顶点着色器制服存储为本地内存，这里唯一合理的是使用矩阵。

# java - 如何以正确的方式打印对象内容？

> ID：10503964
> 
> 赞同：13
> 
> 时间：2012-05-08T18:02:29.873
> 
> 标签：java, object, tostring

我有一个`ArrayList`包含一些`User`类的对象。当我打印这些对象时，我得到了：

> [用户@18fd984，用户@18fd984]

如何以正确的方式打印这些对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T18:03:27.200

覆盖`toString`类中的方法以生成您喜欢的输出，而不是 Java 自动生成的默认值。例子：

```
public class User {
   private String name;
   ...
   @Override
   public String toString() {
       return name;
   }
} 
```

对于复杂的对象，[Apache Commons Lang](http://commons.apache.org/lang/)提供了一些方便的方法，如果你已经在你的项目中使用了这个依赖：

```
@Override
public String toString() {
   return ToStringBuilder.reflectionToString(this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:20:00.463

查看类中`print(Object obj)`方法的源代码`PrintSteam`：

```
public void print(Object obj)
{
    write(String.valueOf(obj));
} 
```

和`valueOf(Object obj)`类`String`：

```
public static String valueOf(Object obj)
{
    return (obj == null) ? "null" : obj.toString();
} 
```

如您所见，`obj.toString()`被调用，并且正如@Guido García 所说，`toString()`您需要覆盖方法。

`toString()`类中方法的默认实现`Object`如下：

```
public String toString()
{
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

# java - 从 SourceForge 下载给了我 .class 文件而不是 .java

> ID：10503969
> 
> 赞同：0
> 
> 时间：2012-05-08T18:02:47.290
> 
> 标签：java, sourceforge

我承认，当谈到 sourceforge 时，我是菜鸟。我正在尝试获取[http://jspellchecker.svn.sourceforge.net/viewvc/jspellchecker/trunk/的 java 文件](http://jspellchecker.svn.sourceforge.net/viewvc/jspellchecker/trunk/)

不幸的是，当我下载 tarball 时，它不包含任何`.java`文件，它们都是`.class`.

如何获取 .java 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:08:22.327

检查这个文件夹：http: [//jspellchecker.svn.sourceforge.net/viewvc/jspellchecker/trunk/tinymce-spellchecker/src/org/tinymce/spellchecker/](http://jspellchecker.svn.sourceforge.net/viewvc/jspellchecker/trunk/tinymce-spellchecker/src/org/tinymce/spellchecker/)

![在此处输入图像描述](../Images/96ddeaf98d6d9709699366ce6dc6e824.png)

# c# - 空闲时隐藏鼠标系统范围，显示移动，来自 C# 应用程序

> ID：10503978
> 
> 赞同：2
> 
> 时间：2012-05-08T18:03:22.450
> 
> 标签：c#, winforms, mouse, hook, mouse-cursor

我正在尝试开发一个应用程序，该应用程序在运行时会在 5 秒不活动后将鼠标光标隐藏在屏幕上的任何位置，即使我的应用程序不在前台也是如此。然后，一旦鼠标再次移动，鼠标应该立即重新出现。

我一直在阅读很多关于低级鼠标钩子的内容，但似乎无法理解委托和回调，对我来说，这会使代码更难阅读。

以下是我在解决方案方面一直在研究的一些事情：

[空闲时间后隐藏鼠标光标](https://stackoverflow.com/questions/744980/hide-mouse-cursor-after-an-idle-time)

[http://blogs.msdn.com/b/toub/archive/2006/05/03/589468.aspx](http://blogs.msdn.com/b/toub/archive/2006/05/03/589468.aspx) [http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks -in-C](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

我似乎最接近这个： [http ://weblogs.asp.net/jdanforth/archive/2011/03/19/detecting-idle-time-with-global-mouse-and-keyboard-hooks-in- wpf.aspx](http://weblogs.asp.net/jdanforth/archive/2011/03/19/detecting-idle-time-with-global-mouse-and-keyboard-hooks-in-wpf.aspx)

我的问题似乎是，如果我在主窗体上设置了一个计时器 5 秒，那么是的，如果鼠标处于非活动状态，那么鼠标会在 5 秒后消失，但鼠标重新出现也需要 5 秒！解决方案是否只是拥有两个单独的计时器和单独的事件？

非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T18:22:47.733

在表单上添加`MouseMove`事件处理程序，然后调用处理程序。`Cursor.Show()``MouseMove`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:10:51.227

您不必创建 2 个不同的计时器。我会使用相同的计时器，但有一个私有成员变量来跟踪光标是否隐藏。隐藏它后，您可以将计时器重置为更短（例如 500 毫秒）并继续跟踪它以重新打开它。

你可以试试这个：

```
private Timer t;
void OnLoad(object sender, EventArgs e)
{
    t = new Timer();
    t.Interval = 5000;
    t.Tick += new EventHandler(t_Tick);
}

private bool _hidden = false;

void t_Tick(object sender, EventArgs e)
{
    if(!_hidden)
    {
         Cursor.Hide();
         t.Interval = 500;
    }
    else
    {
         if(--some parameter---)
              Cursor.Show();
    }
} 
```

# jinja2 - 检查 Jinja2 中的数组是否为空

> ID：10503981
> 
> 赞同：59
> 
> 时间：2012-05-08T18:03:28.480
> 
> 标签：jinja2

我需要检查变量`texts`是否在`index.html`.

如果变量已定义且不为空，那么我应该渲染循环。否则，我想显示错误消息`{{error}}`。

基本上这在 PHP

```
if (isset($texts) && !empty($texts)) {
    for () { ... }
}
else {
    print $error;
} 
```

**索引.html**

```
{% for text in texts %} 
    <div>{{error}}</div>
    <div class="post">
        <div class="post-title">{{text.subject}}</div>
        <pre class="post-content">{{text.content}}</pre>
    </div>
{% endfor %} 
```

这个在 jinja2 里怎么说？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-07-25T17:19:26.403

我认为你最好的选择是结合定义（）检查以及通​​过[长度（）函数查看](http://jinja.pocoo.org/docs/dev/templates/#length)[数组](https://stackoverflow.com/questions/1465249/jinja2-get-lengths-of-list)的长度：

```
{% if texts is defined and texts|length > 0 %}
    ...
{% endif %} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2015-05-05T20:15:29.867

要测试是否存在（“已定义”？），请使用`is defined`.

要测试当前列表是否为空，请使用列表本身作为条件。

虽然它似乎不适用于您的示例，但*如果您需要循环以外的其他内容*，这种形式的空虚检查很有用。

一个人为的例子可能是

```
{% if (texts is defined) and texts %}
    The first text is {{ texts[0] }}
{% else %}
    Error!
{% endif %} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-05-08T18:06:34.723

查看 Jinja2 的文档：http `defined()`: [//jinja.pocoo.org/docs/templates/#defined](http://jinja.pocoo.org/docs/templates/#defined)

```
{% if variable is defined %}
    value of variable: {{ variable }}
{% else %}
    variable is not defined
{% endif %} 
```

够清楚吗？在您的情况下，它可能如下所示：

```
{% if texts is defined %}
    {% for text in texts %} 
        <div>{{ error }}</div>
        <div class="post">
            <div class="post-title">{{ text.subject }}</div>
            <pre class="post-content">{{ text.content }}</pre>
        </div>
    {% endfor %}
{% else %}
    Error!
{% endif %} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-04-07T14:34:30.010

如[文档中所述](http://jinja.pocoo.org/docs/2.9/templates/#for)，您还可以编写：

```
{% for text in texts %}
    <div class="post">
        <div class="post-title">{{text.subject}}</div>
        <pre class="post-content">{{text.content}}</pre>
    </div>
{% else %}
    <div>{{ error }}</div>
{% endfor %} 
```

它处理`texts`未定义的情况和`texts`为空的情况。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-08-10T22:16:27.880

这是一个简洁而简单的解决方案，对我来说效果很好！

```
{% if texts is defined and texts[0] is defined %}
    ...
{% endif %} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-09T23:42:40.143

有`texts`可能可以定义但包含一个空字符串的列表元素；例如：

```
texts = [''] 
```

在这种情况下，测试 if `texts`is defined 将产生一个真实的结果，因此您应该测试第一个元素：

```
{% if texts[0] != '' %}
    ..code here..
{% endif %} 
```

您可能还想将它与`|length`过滤器结合使用，以确保它只有一个元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-22T05:34:17.860

这对我的 Django 应用程序中的用例有用：

我需要将查询集作为上下文传递给 html 模板并仅在查询集具有值时才显示块

查询集：

```
events = Event.objects.filter(schedule_end__gte=date.today()).order_by('-created_at') 
```

传递上下文字典如下：

```
{ "events" : events } 
```

HTML 模板

```
{% if events %}
  <h3>Upcoming Events</h3>
  <ul>
    {% for event in events %}
    <li><h4>{{ event.title }}</h4></li>
    {% endfor %}
  </ul>
{% endif %} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-03T10:27:27.720

这对我有用（但我确保返回一个空数组 [] 而不是 None 如果它是空的）

```
{% if array  %}

   <table class="table">
       ...
   </table>

{% endif %} 
```

# css - 在 div 中将元素居中

> ID：10503987
> 
> 赞同：0
> 
> 时间：2012-05-08T18:03:54.693
> 
> 标签：css

我正在尝试将通知消息集中在一个 div 中，我尝试过`top:50%`但它不起作用。我试图放入一些我不喜欢该方法的填充。你可以在这里看到小提琴：http: [//jsfiddle.net/VPdmT /](http://jsfiddle.net/VPdmT/)

```
.message > .inner { 
    padding:22px 0 0 40px; 
    top:50%;
    margin:0 0 22px;
    background-repeat:no-repeat;
    background-position:0 17px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:05:39.067

顶部 CSS 规则只能应用于位置不是静态的元素。因为您没有声明绝对或相对，所以 top 被忽略。

**编辑：**在真正的答案上，这样做：

```
.message { display: table; width: 100%; }
.message>.inner { display: table-cell; vertical-align: middle; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:09:00.337

```
.message > .inner {
    padding: 0;
    background-repeat: no-repeat;
    background-position:0 17px;
    display: table-cell;
   vertical-align: middle;
}
.message.success {
    color:#0e6200;
    background-color:#d8ffcc;
    border-color:#b3f39f !important;
    display: table;
} 
```

重要的部分是带显示的 div`table-cell`必须在带`table`显示的 div 内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T18:07:22.087

```
.message > .inner { 
    padding:22px 0 0 40px; 
    vertical-align:middle;
    display:table-cell;
    margin:0 0 22px;
    background-repeat:no-repeat;
    background-position:0 17px;
} 
```

# php - while循环一一检查值

> ID：10503989
> 
> 赞同：0
> 
> 时间：2012-05-08T18:04:05.173
> 
> 标签：php, foreach, while-loop

不确定如何正确命名这个问题，所以如果需要，请随时编辑。

我每个月有 12 个盒子，每个盒子显示： 1 - 一条消息，如“已售出”或“可用”，具体取决于来自数据库的信息。2 - 月份和年份的名称，如果月份比当前月份大，则年份将增加一。

来自数据库的信息有几个由 | 分隔的值。符号，要检查的相关符号是 las 符号，$row['custom'] 的示例值为： 93 | 晚餐 | 新港 | 8 月 - 2012 年

我的问题是我需要用它们的“状态”更新每个框，并且使用当前脚本只有数据库上的 las 条目用于更新框，所以如果我知道有两个或多个框应该显示消息“已售出”，只有最新的是更新的。

如何修改以下脚本以逐个更新框？问题是我查询数据库的方式还是其他方式？

提前感谢您的任何帮助或建议。

仅为 12 个月中的 2 个月编写代码，以缩短时间

```
<?php
$month = date("m"); // Current month
$year = date("Y"); // Current year
$next = strtotime(date("d-m-Y", strtotime($now)) . "+1 year");
$nextyear = date("Y", $next); // Next year

// Check if this month is gone or not, if gone replace current year with next year
$january = "01";
$february = "02";

if ($month > $january) { 
  $jan = 'January - ' . $nextyear; } else { $jan = 'January - ' . $year;}

if ($month > $february) { 
  $feb = 'February - ' . $nextyear; } else { $feb = 'January - ' . $year;}

//Get info from Database

$query = "SELECT `custom` FROM `payments` WHERE `status` = 'Pending' OR `status` = 'Completed'"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)) {
  $check_custom = explode(" | ", $row['custom']);
  $month_sold = $check_custom[3];
}

// Check if month is sold or not
if ($month_sold == $jan) { $jan_status = 'Sold';} else { $jan_status = 'Available';}
if ($month_sold == $feb) { $feb_status = 'Sold';} else { $feb_status = 'Available';}

//Output the months and their status
?>

<div class="month">
  <div class="mname"><?php echo $jan;?></div>
  <div class="<?php echo $jan_status;?>">
    <?php echo $jan_status;?>
  </div>
  <?php if($jan_status == 'Available') { 
      echo 'This month is ' . $jan_status . '.';
    } else { 
      echo 'This month has been ' . $jan_status . '.';} ?>
</div>

<div class="month">
  <div class="mname"><?php echo $feb;?></div>
  <div class="<?php echo $feb_status;?>">
    <?php echo $feb_status;?>
  </div>
  <?php if($feb_status == 'Available') { 
      echo 'This month is ' . $feb_status . '.';
    } else { 
      echo 'This month has been ' . $feb_status . '.';} ?>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T18:39:42.147

您放错了 while 的右括号并将 `$jan_status='Available' 从 while 循环内部移动到它的正上方；这是修改后的代码

```
 <?php
    $month = date("m"); // Current month
    $year = date("Y"); // Current year
    $next = strtotime(date("d-m-Y", strtotime($now)) . "+1 year");
    $nextyear = date("Y", $next); // Next year

    // Check if this month is gone or not, if gone replace current year with next year
    $january = "01";
    $february = "02";

    if ($month > $january) { 
      $jan = 'January - ' . $nextyear; } else { $jan = 'January - ' . $year;}

    if ($month > $february) { 
      $feb = 'February - ' . $nextyear; } else { $feb = 'January - ' . $year;}

    //Get info from Database

    $query = "SELECT `custom` FROM `payments` WHERE `status` = 'Pending' OR `status` = 'Completed'"; 
    $result = mysql_query($query) or die(mysql_error());
$jan_status = 'Available';
$feb_status = 'Available';
    while($row = mysql_fetch_array($result)) {
      $check_custom = explode(" | ", $row['custom']);
      $month_sold = $check_custom[3];

    // Check if month is sold or not
    if ($month_sold == $jan) { $jan_status = 'Sold';} 
    if ($month_sold == $feb) { $feb_status = 'Sold';}
    }//th closing bracket should be here;
    //Output the months and their status
    ?>

    <div class="month">
      <div class="mname"><?php echo $jan;?></div>
      <div class="<?php echo $jan_status;?>">
        <?php echo $jan_status;?>
      </div>
      <?php if($jan_status == 'Available') { 
          echo 'This month is ' . $jan_status . '.';
        } else { 
          echo 'This month has been ' . $jan_status . '.';} ?>
    </div>

    <div class="month">
      <div class="mname"><?php echo $feb;?></div>
      <div class="<?php echo $feb_status;?>">
        <?php echo $feb_status;?>
      </div>
      <?php if($feb_status == 'Available') { 
          echo 'This month is ' . $feb_status . '.';
        } else { 
          echo 'This month has been ' . $feb_status . '.';} ?>
    </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T18:38:14.817

每次运行时`$row = mysql_fetch_array()`，它都会将 $row 的内容替换为数据库中的下一行。查看 while 循环：它将值分配给 $check_custom 和 $month_sold，但在用新值覆盖它们之前不对它们做任何事情。您需要移动所有代码以解析数据库输出并在循环*内生成给定月份的信息。*然后输出或保存该月要显示的信息，然后再继续下一个。

您可以做很多事情来使您的代码更简单、更易于维护。例如，我会为月份创建一个数组并对其进行迭代，而不是为每个月创建一组单独的变量和单独的输出代码。此外，您现在对自定义列所做的是使用数据库表中的一个字段来存储另一个小表。这会产生很多问题——如果你把数据分成多列，你可以只查询适当的月份和年份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T18:39:17.957

将您的状态检查移到循环中，以便它对数据库中的每一行进行操作。否则，您只会引用最后一次调用返回的行`mysql_fetch_array`。不过，我建议使用`switch`语句来提高可读性。

```
while($row = mysql_fetch_array($result)) {
    $check_custom = explode(" | ", $row['custom']);
    $month_sold = $check_custom[3];

    // Check if month is sold or not
    if ($month_sold == $jan) { $jan_status = 'Sold';}
    else { $jan_status = 'Available';}

    if ($month_sold == $feb) { $feb_status = 'Sold';}
    else { $feb_status = 'Available';}
} 
```

# html - Symfony2 HTML5 整数输入和验证器

> ID：10503992
> 
> 赞同：1
> 
> 时间：2012-05-08T18:04:10.240
> 
> 标签：html, validation, symfony, integer

我正在使用 symfony2 并且我有一个输入字段，我需要人们在其中输入数字，但我在验证时遇到了问题。

我正在使用以下代码验证该字段：

```
$metadata->addPropertyConstraint('Identification', new NotBlank(array('message' => 'Write something in identification field, cannot be blank.')));
$metadata->addPropertyConstraint('Identification', new Type(array('message' => 'You must write a number', 'type' => 'integer'))); 
$metadata->addPropertyConstraint('Identification', new MinLength(array('message' => '5 digits, minimun', 'limit' => 5))); 
```

首先，如何删除字段旁边出现的箭头？（HTML5 功能）。我根本不喜欢它们，用户必须在输入字段中输入的数字大于 500000，所以我很确定他们不会使用这个烦人的 - 在这种情况下 - 箭头。

我尝试在 MyEntity* *Type* *.php 文件中添加单词“text”以使该字段显示为没有箭头

```
->add('identification','text') 
```

我就是这样工作的，但是如果我这样做，那么无论我是否在写一个数字（它不应该显示任何错误），它总是会出现验证错误“你必须写一个数字”。

我想要的是一个输入字段，用户可以在其中写一个数字，我想验证它。

我应该只使用 REGEX 验证来表明我只想要数字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T09:20:41.490

```
$metadata->addPropertyConstraint('Identification', new Type(array('message' => 'You must write a number', 'type' => 'digit'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:12:09.193

验证 Symfony2 形式的整数的最简单方法是添加最小约束。这样输入被转换为整数并被验证。

```
/**
 * @Assert\Min(limit = 0)
 */
private $myVar; 
```

# android - Android - 即使按下后退按钮，程序仍驻留在内存中

> ID：10503997
> 
> 赞同：-1
> 
> 时间：2012-05-08T18:04:29.793
> 
> 标签：android, memory

在我的 Android 项目中，我有 2 个活动。一个是`MyProject`，另一个是`MyProjectOutput`。

在`MyProject`中，有一个 button( `btnProcess`)，它会做一些处理并使用以下代码启动第二个活动：

```
 btnProcess.setEnabled(false);
    // does some network access in an AsyncTask and fetches some stuff, and store some data in the variable 'my_extra_content'
    //...

    Intent i = new Intent(this, MyProjectOutput.class);
    i.putExtra("extracontent", my_extra_content);
    startActivityForResult(i,1); 
```

在第二个活动中，它有一个返回主活动的按钮（软件返回按钮）。代码是：

```
 final Button btnBack = (Button) findViewById(R.id.btnBack);
    btnBack.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            //when Back button is pressed, it is cancelled
            setResult(Activity.RESULT_CANCELED);
            finish();
        }
    }); 
```

在主要活动中，我使用它来重新启用按钮：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    btnProcess.setEnabled(true);

} 
```

我的程序在模拟器（AVD）中运行良好。我已经把这个送给了我的一个拥有 Android 设备的朋友。经过测试，他说工作正常，但是当从主活动按下后退按钮（硬件按钮）时，程序没有终止。还在记忆中！但是当我在 AVD 中测试时，当我从主活动中按下硬件返回按钮时，它会显示手机的主屏幕！

我正在使用诺基亚设备（准确地说是 5230）。而且我知道当我们按下“结束”按钮时，一些程序可能仍然驻留在内存中，我必须通过任务管理器手动关闭它。

所以，我对这个问题有点困惑！在使用两项活动时，我有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:09:40.953

它不应该终止。这方面有很多文章和问题。Android 自己决定何时从内存中删除活动。这是基于手机的硬件规格、内存利用率和其他因素。因此，按 End/Back*可能会*也*可能不会*将应用程序留在内存中。在流行的 Android 上使用任务杀手是一个非常糟糕的主意。