# StackOverflow 问答 12024000-12024999

# java - Activity A 调用 B 和 B 调用 C，需要 C 向 A 发送数据

> ID：12024000
> 
> 赞同：0
> 
> 时间：2012-08-19T03:31:34.987
> 
> 标签：java, android, android-activity

我有一个主要活动调用另一个（第二个）活动“VennDiagram”

```
Intent intent = new Intent(getApplicationContext(), VennDiagram.class);
startActivityForResult(intent, 200); 
```

进行一些计算后的第二个活动称为第三个活动“ImageMapTest ....”活动

```
Intent i = new Intent(getApplicationContext(), ImageMapTestActivity.class);
i.putExtras(sendBundle);
startActivity(i);
//finish(); 
```

现在我需要帮助将 arrayList 从第三个活动返回到第一个？？！！

```
 Intent in = new Intent(getApplicationContext(), AndroidClientActivity.class);
 in.putExtra("songList", playList);
 setResult(200, in);
 finish(); 
```

在我的第一个活动中，我确实有一个意图监听器，如下所示，但只是第三个活动不会将它发送回它

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
   super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == 100 || resultCode == 200)
     {
           } 
```

PS我确实读过一些类似的帖子，但它们不是我想要的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T03:35:33.283

您应该能够将 B 从 C 收到的结果发送回 A。

```
protected void onActivityResult(int requestCode,int resultCode, Intent data) {
 super.onActivityResult(requestCode, data);

 setResult(resultCode,resultData);

 finish();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:36:31.590

完成 C 并将您的数组返回给 B，然后当您返回 B 时完成并将结果返回给 A。

# java - 通过screencap捕获屏幕时出现0字节文件

> ID：12024006
> 
> 赞同：9
> 
> 时间：2012-08-19T03:32:27.797
> 
> 标签：java, android, screenshot

我无法捕获未植根手机的屏幕。

我在我的电脑上试过这个命令：

```
adb shell /system/bin/screencap -p /sdcard/out.png 
```

这很好用。

但是，每当我尝试在我的应用程序中使用此命令时，如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

            String[] str ={"/system/bin/screencap","-p","/sdcard/out.png"};

            try {  
                Process ps = Runtime.getRuntime().exec(str); 
                try { 
                    ps.waitFor(); 
                } catch (InterruptedException e) { 
                    e.printStackTrace(); 
                }  
            } catch (IOException e) { 
                Toast.makeText(this, ""+e, Toast.LENGTH_LONG).show(); }

} 
```

我总是得到 0 字节的 out.png。我认为源代码没有错误，但我无法理解为什么会出现这种错误。

请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T23:05:50.557

在 logcat 中搜索类似的东西

> 权限失败：android.permission.READ_FRAME_BUFFER from uid=10113 pid=2934 113 PermissionCache D 检查 android.permission.READ_FRAME_BUFFER for uid=10113 => denied (294 us) 113 SurfaceFlinger E Permission Denial: can't read framebuffer pid=2934, uid=10113

如果您收到该错误，则表示权限问题。

即使您添加了 READ_FRAME_BUFFER 权限，它仍然无法正常工作。通常，这意味着应用程序没有读取帧缓冲区的权限，必须使用系统证书编译或使用 su 获得 root 权限。

# objective-c - 这个看起来像多维数组的东西实际上是什么意思？

> ID：12024007
> 
> 赞同：0
> 
> 时间：2012-08-19T03:32:43.710
> 
> 标签：objective-c

```
@interface Foo {
    Bar *bar[12][8][2];
} 
```

我想知道这意味着什么以及它在幕后实际上在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:38:27.157

`Bar`毫不奇怪——它是一个指向s的多维指针数组。

在 MRC 中，引用计数是手动管理的。

在 ARC 中，它们是为您管理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T03:48:26.690

bar 它是一个包含 12 个元素的数组。每个元素是一个包含 8 个元素的数组，每个元素是一个包含 2 个指向“Bar”对象的指针的数组。

# vhdl - vhdl 代码包装器

> ID：12024008
> 
> 赞同：0
> 
> 时间：2012-08-19T03:32:52.633
> 
> 标签：vhdl

我正在尝试实现一个 VHDL 项目，但在正确连接不同组件时遇到问题。我只是想确保我正确地做到了这一点。下面的代码只是包装器（到目前为止，这就是问题所在）。如果我将输入和输出正确连接到每个组件，请告诉我。

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

entity SodaWrapper is
    Port ( PB1 : in  STD_LOGIC;
           PB2 : in  STD_LOGIC;
           PB3 : in  STD_LOGIC;
           PB4 : in  STD_LOGIC;
           clk_50m : in  STD_LOGIC;
              LED1 : out  STD_LOGIC;
           LED2 : out  STD_LOGIC;
           LED3 : out  STD_LOGIC;
           LED4 : out  STD_LOGIC;
           seven_seg1 : out  STD_LOGIC_VECTOR(7 downto 0);
           seven_seg2 : out  STD_LOGIC_VECTOR(7 downto 0));
end SodaWrapper;

architecture Behavioral of SodaWrapper is
--Define debounce components
component debounce
    port (clk : in STD_LOGIC;
            reset : in STD_LOGIC;
            sw : in STD_LOGIC;
            db_level: out STD_LOGIC;
            db_tick: out STD_LOGIC);
    end component;
    for all : debounce use entity work.debounce(debounce);

--define clock
component Clock_Divider
     port(
         clk : in STD_LOGIC;
         clockbus : out STD_LOGIC_VECTOR(26 downto 0)
         );
     end component;
     for all : Clock_Divider use entity work.Clock_Divider(Clock_Divider);

COMPONENT SodaMachine_Moore
    PORT(
         CLK : IN  std_logic;
         Reset : IN  std_logic;
         Nickel : IN  std_logic;
         Dime : IN  std_logic;
         Quarter : IN  std_logic;
         Dispense : OUT  std_logic;
         ReturnNickel : OUT  std_logic;
         ReturnDime : OUT  std_logic;
         ReturnTwoDimes : OUT  std_logic;
            change1 : OUT std_logic_vector(3 downto 0);
            change2 : OUT std_logic_vector(3 downto 0)
        );
    END COMPONENT;

--Define sseg_converter components   
component hex_to_sseg
    port( dp : in STD_LOGIC;
            hex : in STD_LOGIC_VECTOR(3 downto 0);
            sseg : out STD_LOGIC_VECTOR(7 downto 0));
    end component;

--create wire for FSM to sseg converter 
signal hexconvertones : STD_LOGIC_VECTOR(3 downto 0);
signal hexconverttens : STD_LOGIC_VECTOR(3 downto 0);

--create wires for output of debouncers
signal db_tick_n : STD_LOGIC;
signal db_tick_d : STD_LOGIC;
signal db_tick_q : STD_LOGIC;

signal IQ_n : STD_LOGIC;
signal IQ_d : STD_LOGIC;
signal IQ_q : STD_LOGIC;

--wire up clock
signal clockingbus : STD_LOGIC_VECTOR(26 downto 0);
begin
-- Setup the clock
  clock1 : Clock_divider port map (
            clk => clk_50m,
            clockbus => clockingbus  
            );

-- Link debounce to FSM
  debounce_n : debounce port map (
            clk => clockingbus(0),
            reset => PB4,
            sw => PB1,
            db_tick => db_tick_n
            );
  debounce_d : debounce port map (
            clk => clockingbus(0),
            reset => PB4,
            sw => PB2,
            db_tick => db_tick_d
            );
  debounce_q : debounce port map (
            clk => clockingbus(0),
            reset => PB4,
            sw => PB3,
            db_tick => db_tick_q
            );

--invert values of db_tick since logic value of button pressed is 0 and vice versa
  IQ_n <= not(db_tick_n);
  IQ_d <= not(db_tick_d);
  IQ_q <= not(db_tick_q);

-- Link components to main FSM
  main : SodaMachine_Moore PORT MAP (
          CLK => clockingbus(0),
          Reset => PB4,
          Nickel => IQ_n,
          Dime => IQ_d,
          Quarter => IQ_q,
          Dispense => LED1,
          ReturnNickel => LED2,
          ReturnDime => LED3,
          ReturnTwoDimes => LED4,
             change1 => hexconvertones,
             change2 => hexconverttens
        );

--Link seven segment display to FSM
  change_ones : hex_to_sseg port map('0', hexconvertones, seven_seg1);
  change_tens : hex_to_sseg port map('0', hexconverttens, seven_seg2);

end Behavioral; 
```

# ios - 卡尔代表问题

> ID：12024011
> 
> 赞同：0
> 
> 时间：2012-08-19T03:33:06.663
> 
> 标签：ios, delegates, calendar

我认为正确设置 KalViewController 的委托 - 复制 Holiday 和 NativeCal 演示 - 但我一定不是因为当我单击日期单元格时出现以下错误：

```
-[UINavigationButton didSelectDate:]: unrecognized selector sent to instance 
```

当我在 All Exceptions 上设置断点时，我看到它在 KalGridView.m 这个函数中引发了一个异常：

```
- (void)setSelectedTile:(KalTileView *)tile
{
  if (selectedTile != tile) {
    selectedTile.selected = NO;
    selectedTile = [tile retain];
    tile.selected = YES;
    [delegate didSelectDate:tile.date]; // exception raised here
  }
} 
```

这是我设置委托的代码（几乎从演示代码中复制）：

```
- (void) viewDidLoad 
{
    KalViewController *calendar = [[KalViewController alloc] init];
    calendar.delegate = self;
    [[self.view viewWithTag:1] addSubview:calendar.view];
....} 
```

该错误是有道理的，因为我将委托设置为我自己的 ViewController，它没有实现 didSelectDate。另一方面，在 KalViewController 的委托中设置的 Holiday 和 NativeCal 类也没有，它们都是类型

```
NSObject <UIApplicationDelegate, UITableViewDelegate> 
```

谢谢一堆..我不仅仅是触摸卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:14:51.397

这是少数应该保留委托的情况之一，因为它正在被释放和替换。覆盖`-setDelegate:`并保留您的委托。

# java - TicTacToe 使用二维数组

> ID：12024014
> 
> 赞同：0
> 
> 时间：2012-08-19T03:35:06.487
> 
> 标签：java, arrays

我正在尝试创建一个执行井字游戏的程序。我已经完成了所有方法的创建，我只需要创建驱动程序。在创建驱动程序之前，我尝试只打印电路板和一个字符，但我认为我的方法不正确。这是我的错误的样子：

```
java.lang.ArrayIndexOutOfBoundsException: 3
at TicTacToeBoard.move(TicTacToeBoard.java:75)
at TicTacToe.main(TicTacToe.java:24)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:271) 
```

这是我的两个程序：

这是我似乎无法完成的驱动程序。最后要显示的是模板，以便您了解每个程序的工作原理。

```
class TicTacToe
{
 public static void main(String [] args)
 { 
  //System.out.println("Welcome! Tic-Tac-Toe is a two player game.");
  //System.out.println("Enter player one's name: ");

  TicTacToeBoard game = new TicTacToeBoard();
  System.out.println(game.toString());

  //int count = 0;

  game.move('x', 1, 3); 
  // game.move('o', 1, 1);

  /* while (game.gameWon() !true || count != 9)
     {
      System.out.print(game.move()); 
      System.out.print(game.isEmpty()); 
      }*/   
     }
    } 
```

这是所有方法的所在......

```
class TicTacToeBoard
{
 private char [][] board = new char[3][3];
 String b;

 // This a new constructor that creates a tic-tac-toe board
 public TicTacToeBoard()
 {
  for (int rows = 0; rows < board.length; rows++)// creates rows
  {
   for (int columns = 0; columns <board[rows].length;columns++)// creates columns
   {
    //System.out.println("| ");
     board[rows][columns] = ' ';
    //System.out.println(" |\n" );
    }
   }
 }

  // creates a string form of the tic-tac-toe board and allows the user
  // to access it during the game.
  public String toString()
  {
   String b = "";

   // creates a vertical bar at the beginning and the end of each row
   for (int rows = 0; rows < board.length; rows++)
   {
     b += "| ";
     // adds a space for each row and column character in tic-tac-toe board.
     for (int columns = 0; columns < board[rows].length; columns++)
     {
      b += board[rows][columns] + " ";  
      }
       b += "|\n";// prints a | space space space | and breaks off to create two new lines.
      }
       return b; // prints the tic-tac-toe board to be accessed by the user.
     }

String move(char x, int rows, int columns)
{ 
 String b = "";

 // creates a vertical bar at the beginning and the end of each row
 for (int r = 0; r < board.length; r++)
 {
   b += "| ";

  for (int c = 0; c < board[r].length; c++)
  {
   b += board[r][c] + " ";  //prints 3 spaces on each line. 
    // prints string character from user input if row and column not equal to zero 
   if (board[rows - 1][columns - 1] >= 0 && board[rows - 1][columns - 1] <= 2 )
   {
    board[rows - 1][columns - 1] = x;// prints character in the specified index from user input 
    b += board[rows - 1][columns - 1];// prints out the board and the new character in specified space.
     } 
      else if (board[rows - 1][columns - 1] < 0)   // makes user pick another choice
      return "ILLEGAL MOVE, TRY AGAIN!"; 
      // adds a space for each row and column character in tic-tac-toe board.
     }
      b += "|\n";// prints a | space space space | and breaks off to create two new lines.
    }  
     return b; // prints the tic-tac-toe board to be accessed by the user.

   }

  // checks if a space character is empty
  void isEmpty(char x, int row, int col)
  {
   if (board [row - 1][col - 1] == ' ')
    board[row - 1][col - 1] = x;
   else // makes user pick another row and column if space character is not empty
   System.out.println("ILLEGAL CHOICE, PICK AGAIN!");
   }
  // checks if game is won   
 public boolean gameWon(int row, int col)
 {  
  if ((board[2][0] == board[1][1]) && (board[2][0] == board[0][2]))
   return true;
  else if ((board[2][0] != board[1][1]) && (board[2][0] != board[0][2]))
   return false;   

  if ((board[2][2] == board[1][1])&& (board[2][2] == board[0][0]))
   return true;
  else if ((board[2][2] != board[1][1])&& (board[2][2] != board[0][0]))
   return false;   

  if ((board[0][0] == board[1][0]) && (board[0][0] == board[2][0]))
   return true;
  else if ((board[0][0] != board[1][0]) && (board[0][0] != board[2][0]))
   return false;        

  if ((board[0][1] == board[1][1]) && (board[0][1] == board[2][1]))
   return true;
  else if ((board[0][1] != board[1][1]) && (board[0][1] != board[2][1]))
   return false;        

  if ((board[0][2] == board[1][2]) && (board[0][2] == board[2][2]))
   return true;
  else if ((board[0][2] != board[1][2]) && (board[0][2] != board[2][2]))
   return false;   

  if ((board[0][0] == board[0][1]) && (board[0][0] == board[0][2]))
   return true;
  else if ((board[0][0] != board[0][1]) && (board[0][0] != board[0][2]))
   return false;   

  if ((board[1][0] == board[1][1]) && (board[1][0] == board[1][2]))
   return true;
  else if ((board[1][0] != board[1][1]) && (board[1][0] != board[1][2]))
   return false;     

  if ((board[2][0] == board[2][1]) && (board[2][0] == board[2][2]))
   return true;
  else 
   return false;
 }
} 
```

这是整个事情的模板！！！！！！！

```
class TicTacToe
{
  public static void main (String [] args)
  {
       TicTacToeBoard b = new TicTacToeBoard();

       while (game not over)
       {
            swtich player
            increment turn counter

            until user enters a valid move    
            {
                  prompt for move
             }

            make move
            b.makeMove (player, row, col);

            print board    
            System.out.println(b);
       }

       print outcome
  }
 }

 class TicTacToeBoard
 {
   private char [][] board = ...;

   public TicTacToeBoard()
   {
      initialize board with spaces
    }

   public void makeMove (char c, int row, int col)
   {
        store symbol in specified position
    }

   public boolean isEmpty(int row, int col)
   {
        return true if square is unfilled
    }

   public boolean gameWon()
   {
        check board for a win
    }

   public String toString ()
   {
        return String representation of board
    }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T03:39:54.080

编程语言对错误是无情的，并迫使我们严格和关心。

您的代码对我们来说很难阅读，因此我们和您都很难调试，从到处都是缩进开始，但也有粗心的错误，尤其是这个：

```
for (int r = 0; r < board.length; rows++) 
```

你知道这里有什么问题吗？`r`与 不同`rows`，您不能将一个用作循环的索引，然后再递增另一个。您在循环内使用*这两个变量。*代码中还有其他几个粗心的错误。

我建议您重新开始，但要更加小心您的代码，尤其要小心缩进。如果您没有正确排列花括号，您将看不到一个代码块何时结束而另一个代码块何时开始（我们也不会！）。

哦，下一次，请让我们知道您的代码的哪些行导致了您的错误。如果我们不必猜测这些信息，那么为您提供帮助会容易得多。

**编辑**
您的新代码缩进更好一些，但仍然关闭。这就是你所拥有的：

```
String move(char x, int rows, int columns)
{ 
 String b = "";

 // creates a vertical bar at the beginning and the end of each row
 for (int r = 0; r < board.length; r++)
 {
   b += "| ";

  for (int c = 0; c < board[r].length; c++)
  {     
   b += board[rows][columns] + " "; 
```

这就是我推荐的：

```
String move(char x, int rows, int columns) {
  String b = "";

  // creates a vertical bar at the beginning and the end of each row
  for (int r = 0; r < board.length; r++) {
     b += "| ";

     for (int c = 0; c < board[r].length; c++) {

        // let's check to see what the variables hold!
        System.out.printf("rows: %d, columns %d, r: %d, c: %d%n", rows, columns, r, c); 
        b += board[rows][columns] + " "; // **** the offending line **** 
```

更重要的是，请注意 printf 语句的结果，紧随其后的是异常：

```
rows: 1, columns 3, r: 0, c: 0
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3 
```

所以这里是列变量，它保存值 3 并导致你的数组爆炸。您需要回溯以查看如何调用此方法以及为什么将 3 传递到列参数中。

**编辑 2**
在重新查看您的最新帖子时，您仍在对移动方法进行硬编码以接受 3 作为列参数：

```
game.move('x', 1, 3); 
```

首先要解决这个问题。该参数**不能**为 3。

# c - gstreamer gst_element_seek 在 mpeg2ts 上非常慢

> ID：12024019
> 
> 赞同：1
> 
> 时间：2012-08-19T03:36:11.613
> 
> 标签：c, gstreamer

到目前为止，这是我在玩的时候想出的：

```
case GDK_Up:
{

    gint64 pos_ns, dur_ns, seek_ns;
    GstFormat format;

    format = GST_FORMAT_TIME;

    gst_element_query_duration(pipeline,&format,&dur_ns);
    gst_element_query_position(pipeline,&format,&pos_ns);
    g_print ("Time: %" GST_TIME_FORMAT " / %" GST_TIME_FORMAT "\n", GST_TIME_ARGS (pos_ns), GST_TIME_ARGS (dur_ns));

    seek_ns = pos_ns + 60*GST_SECOND;

    if (!gst_element_seek (pipeline, 1.0, GST_FORMAT_TIME, GST_SEEK_FLAG_FLUSH | GST_SEEK_FLAG_KEY_UNIT,
             GST_SEEK_TYPE_SET, seek_ns,
             GST_SEEK_TYPE_NONE, GST_CLOCK_TIME_NONE)) 
    {

        g_print ("Seek failed!\n");

    }

}

break; 
```

这是我的管道：

```
pipeline = gst_parse_launch("filesrc location=filename.mpg ! decodebin name=decoder decoder. ! queue ! audioconvert ! alsasink decoder. ! deinterlace ! ffmpegcolorspace ! glimagesink",&error); 
```

第一次搜索大约需要 3 秒，到第 5 次或第 6 次搜索需要 15 到 20 秒才能从新位置开始播放。我知道我一定做错了什么，但我无法从文档中弄清楚那是什么。

是我构建管道的方式吗？我意识到我在这里走了一些捷径。

是媒体文件的类型吗？(mpeg2ts) 是媒体文件的长度吗？（4个小时）

文档说：

应用程序在管道上发出搜索，并且在搜索调用返回后立即播放新媒体。

那么是什么让 seek 调用返回需要这么长时间呢？

任何帮助将不胜感激。

**更新：**

这是调试级别为 2 的调试日志：

```
(fullscreen02:4554): GLib-GObject-WARNING **: g_object_set_property: property `device-name' of object class `GstAlsaSink' is not writable
0:00:01.137170699  4554       0x9d9500 WARN             mpegtsdemux gstmpegtsdemux.c:754:gst_mpegts_demux_fill_stream: AC3 stream type found but no corresponding descriptor to differentiate between AC3 and EAC3\. Assuming plain AC3.
0:00:01.179042694  4554       0x9d9500 WARN             mpegtsdemux gstmpegtsdemux.c:754:gst_mpegts_demux_fill_stream: AC3 stream type found but no corresponding descriptor to differentiate between AC3 and EAC3\. Assuming plain AC3.
0:00:01.188213891  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:01.188464979  4554 0x7ff9d80270e0 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
No accelerated IMDCT transform found
0:00:01.211118745  4554 0x7ff9d8023c40 WARN                    alsa gstalsa.c:124:gst_alsa_detect_formats:<alsasink0> skipping non-int format
No accelerated IMDCT transform found
0:00:01.237512648  4554 0x7ff9d8023c40 WARN            audioconvert gstaudioconvert.c:832:gst_audio_convert_fixate_channels:<audioconvert0> downstream caps contain no channel layout
0:00:01.239176189  4554       0x9dabd0 WARN            audioconvert gstaudioconvert.c:832:gst_audio_convert_fixate_channels:<audioconvert0> downstream caps contain no channel layout
0:00:01.273765960  4554 0x7ff9d8023c40 WARN            audioconvert gstaudioconvert.c:832:gst_audio_convert_fixate_channels:<audioconvert0> downstream caps contain no channel layout
Got prepare-xwindow-id msg
0:00:01.326878070  4554       0x6068b0 WARN                 default xoverlay.c:354:gst_x_overlay_set_xwindow_id:<glimagesink0> Using deprecated gst_x_overlay_set_xwindow_id()
0:00:01.326931302  4554       0x6068b0 WARN                 default xoverlay.c:390:gst_x_overlay_set_window_handle:<glimagesink0> Calling deprecated set_xwindow_id() method
0:00:01.337897164  4554 0x7ff9cc002cd0 WARN                     bin gstbin.c:2380:gst_bin_do_latency_func:<pipeline0> did not really configure latency of 0:00:00.000000000
0:00:02.042181425  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:03.016673305  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:04.489319920  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:05.961069736  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
Counter: 0:00:05.930250000 / 3:37:14.178723991  (this is when a 60 sec seek forward was initiated)
0:00:07.300999850  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:07.317269896  4554 0x7ff9cc005cd0 WARN                     bin gstbin.c:2380:gst_bin_do_latency_func:<pipeline0> did not really configure latency of 0:00:00.000000000
0:00:07.641986233  4554       0x9d9500 WARN               decodebin gstdecodebin.c:1485:queue_filled_cb:<decoder> Queue is bigger than 20Mbytes, something else is going wrong
0:00:11.059481122  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:11.474393831  4554       0x9d9500 WARN               decodebin gstdecodebin.c:1485:queue_filled_cb:<decoder> Queue is bigger than 20Mbytes, something else is going wrong
previous line repeated 55 times
0:00:12.532097973  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:12.538414925  4554       0x9d9500 WARN               decodebin gstdecodebin.c:1485:queue_filled_cb:<decoder> Queue is bigger than 20Mbytes, something else is going wrong
previous line repeated 26 times
Counter: 0:02:05.745916667 / 3:37:14.178723991 (this is when a 60 sec seek forward was initiated)
0:00:13.113363951  4554 0x7ff9cc002c80 WARN                     bin gstbin.c:2380:gst_bin_do_latency_func:<pipeline0> did not really configure latency of 0:00:00.000000000
0:00:13.116343604  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:13.472504323  4554       0x9d9500 WARN               decodebin gstdecodebin.c:1485:queue_filled_cb:<decoder> Queue is bigger than 20Mbytes, something else is going wrong
previous line repeated 9 times
0:00:25.545042104  4554 0x7ff9d8023c40 WARN             mpegtsdemux gstmpegtsdemux.c:2865:gst_mpegts_demux_src_pad_query:<mpegtsdemux0> unsupported query format or no bitrate yet to approximate duration from bytes
0:00:25.580215323  4554       0x9d9500 WARN               decodebin gstdecodebin.c:1485:queue_filled_cb:<decoder> Queue is bigger than 20Mbytes, something else is going wrong
previous line repeated 43 times 
```

我目前正在查找其中一些警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:07:57.170

您的管道看起来不错。对 mpegts 元素进行了很多优化。您的 gstreamer 安装是否最新。如果您的安装是最新的，您可以运行诸如 oprofile 之类的分析器来查看是否有热点。您还可以检查 gstreamer 调试日志以查看是否有关于该文件的任何投诉。

# json - 如何使用 CoffeeScript 而不是 JSON？对于配置文件等

> ID：12024020
> 
> 赞同：11
> 
> 时间：2012-08-19T03:36:28.990
> 
> 标签：json, node.js, coffeescript

JSON 确实很难用于本地配置文件，因为它不支持注释或函数，并且需要非常冗长的语法（逗号，总是`"`用于键）。使其非常容易出错，或者在需要功能的情况下无法使用。

现在我知道我可以这样做：

```
require('coffee-script')
config = require('config.coffee') 
```

但是，这需要我在`module.exports = {the data}`里面做`config.coffee`不太理想的事情。甚至允许诸如`require`暴露之类的东西，如果我们不信任它们，可能会使配置文件不安全。

有没有人找到一种方法来读取咖啡脚本配置文件，但要保证它们的安全？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T03:36:28.990

`sandbox`事实证明，CoffeeScript 通过将参数设置为`true`通过调用来支持内置的安全部分`eval`。例如

```
# Prepare
fsUtil = require('fs')
coffee = require('coffee-script')

# Read
dataStr = fsUtil.readFileSync('path').toString()
data = coffee.eval(dataStr, {sandbox:true}) 
```

上面的代码将读入文件数据，然后在沙盒模式下使用咖啡脚本对其进行评估。

我为此创建了一个很好的包装器，称为[CSON](https://github.com/bevry/cson) ，它通过 require支持`coffee`和文件，通过上述机制支持文件，通过典型机制支持文件- 以及将值字符串化回咖啡脚本符号。使用它，以下 API 被公开：`js``cson``json``JSON.parse`

```
# Include CSON
CSON = require('cson')

# Parse a file path
CSON.parseFile 'data.cson', (err,obj) ->  # async
result = CSON.parseFile('data.cson')  # sync

# Parse a string
CSON.parse src, (err,obj) ->  # async
result = CSON.parseSync(src)  # sync

# Stringify an object to CSON
CSON.stringify data, (err,str) ->  # async
result = CSON.stringifySync(obj)  # sync 
```

# matlab - 如何计算特定行中的元素数？

> ID：12024023
> 
> 赞同：-1
> 
> 时间：2012-08-19T03:36:36.300
> 
> 标签：matlab

> **可能重复：**
> [计算给定范围内矩阵中的值的数量](https://stackoverflow.com/questions/12016236/count-number-of-values-in-matrix-within-given-range)

我有以下矩阵

```
A=[ 1 2 3 4 5 6 7;
    3 4 5 6 8 9 1;
    3 4 2 5 6 7 8] 
```

如何找出第一行中有多少元素，它们的值在范围内`>2 & <6`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:53:24.117

您需要使用向量化计算来考虑矩阵。（在这里使用 find 不是一个好的解决方案，因为它没有被矢量化以在行上独立操作。）

首先，如果您在 MATLAB 中尝试测试 A > 2 会发生什么？试试看！

```
A=[ 1 2 3 4 5 6 7;
    3 4 5 6 8 9 1;
    3 4 2 5 6 7 8];

>> A > 2
ans =
     0     0     1     1     1     1     1
     1     1     1     1     1     1     0
     1     1     0     1     1     1     1 
```

MATLAB 生成一个逻辑数组，当 A 的元素大于 2 时为真。类似地，如果我们键入 A < 6，我们会得到另一个逻辑数组。

```
>> A < 6
ans =
     1     1     1     1     1     0     0
     1     1     1     0     0     0     1
     1     1     1     1     0     0     0 
```

如果我们将这两个操作组合成一个表达式会怎样？

```
>> (A > 2) & (A < 6)
ans =
     0     0     1     1     1     0     0
     1     1     1     0     0     0     0
     1     1     0     1     0     0     0 
```

好的，所以这个数组告诉我们两个子表达式在哪里都为真。请注意，我们可以使用 sum 和其他算术运算对逻辑数组进行操作。

```
>> sum((A > 2) & (A < 6),2)
ans =
     3
     3
     3 
```

所以上面的表达式计算了每一行满足你目标的元素的数量，它会非常快。学习使用 MATLAB，因为它应该被使用。你的代码会变得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T03:45:45.783

如果我很好理解您对**account**的含义，如果您想要`find`满足您的条件的元素：

```
B = A(1,:)
find(B > 2 & B < 6) 
```

或在一行中：

```
find(A(1,:) > 2 & A(1,:) < 6) 
```

您还必须知道，它`find`为您提供了满足给定逻辑表达式的数组的***索引***，而不是实际元素。

# objective-c - 为什么不能同时分配和调用一个块？

> ID：12024024
> 
> 赞同：3
> 
> 时间：2012-08-19T03:36:37.503
> 
> 标签：objective-c, objective-c-blocks

以下代码编译：

```
^{}(); 
```

这编译：

```
void (^x)();
(x = ^{})(); 
```

但这不会：

```
(void (^x)() = ^{})(); 
```

我得到的错误是`Expected ')'`. 这是llvm的错误还是什么？它完全阻止了我假装 Objective-C 是 JavaScript。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T05:13:08.427

这在类 C 语言中是没有意义的。要了解原因，让我们从头开始构建语句。

首先，我们将您的工作声明用于`x`：

```
void (^x)(); 
```

现在让我们在同一个语句中初始化它：

```
void (^x)() = ^{}; 
```

到目前为止一切顺利 -`x`已使用正确的块进行初始化。所以让我们现在调用`x`。但是会`()`去哪里呢？自然，我们需要将`()`立即放在块值表达式之后。但是，在 C 中，声明是语句，而不是表达式，所以

```
(void (^x)() = ^{})(); 
```

没有意义。唯一`()`可以去的地方是在`^{}`：

```
void (^x)() = ^{}(); 
```

但是`^{}()`有类型`void`，没有类型`void (^)()`。

总结一下：你不能同时声明一个块变量并调用它。您必须声明并初始化变量，然后调用它

```
void (^x)() = ^{};
x(); 
```

或声明它然后分配并调用它

```
void (^x)();
(x = ^{})(); 
```

或者只是分开所有三个：

```
void (^x)();
x = ^{};
x(); 
```

作为一个总结性的想法，假设同时声明和调用块是可取的。如果我们决定允许类似 的代码`(void (^x)() = ^{})();`，那么为了保持一致性，我们还必须允许类似`++(void x = 4);`or的代码`(void x = 1) + (void y = 2);`。我希望你会同意这些在 C 中看起来很奇怪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T08:48:46.657

作为一个类比，考虑：

这编译：

```
if (42) { } 
```

这编译：

```
int x;
if (x = 42) { } 
```

但这不会：

```
if (int x = 42) { } 
```

# css - 多个元素的css列表

> ID：12024029
> 
> 赞同：1
> 
> 时间：2012-08-19T03:37:51.853
> 
> 标签：css, list

我有一个页面，我想为不同的元素使用不同`<ul>`的`<li>`设置，但我不确定如何。

在示例“A”中，缩进/项目符号无法正常工作，但图像缩进是：

> ![在此处输入图像描述](../Images/b298668e2a56a486d0821cceffe83fc1.png)

布局“A”的 CSS 在这里：

```
ul.list{
    margin-left: 20px;
    padding: 0px 20px 0px 0px;
    color:#fff;
} 
```

在示例“B”中，缩进/项目符号工作正常，但图像缩进是。

> ![在此处输入图像描述](../Images/3057663fa0e0e3c2baf76794d6462d87.png)

布局“B”的 CSS 在这里：

```
ul.list{
    margin-left: 20px;
    padding: 0px 20px 0px 0px;
    color:#fff;
}
ul {
    text-indent:0px; 
    padding-left:15px;
} 
```

我想为文本内容设置与图形内容不同的 CSS 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:53:23.960

特异性是你的朋友。如果您有两个想要不同样式的元素，则需要单独定位它们。最简单的方法是使用 id。

# html - 如何创建 Facebook 状态箭头文本框？

> ID：12024032
> 
> 赞同：4
> 
> 时间：2012-08-19T03:38:26.050
> 
> 标签：html, css, textbox, css-shapes

我怎样才能得到一个弯曲的文本框，比如只有 html 和 css 的 Facebook 状态文本框？

![注意文本框上的曲线](../Images/8bf76ca2841d71f373637c0c90d9abea.png)

任何人都可以说明我如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:12:49.590

我的跨浏览器，Facebook 样式文本框的纯 CSS 版本：

![在此处输入图像描述](../Images/b5e02c48ec2818b5860084f4713a3b5a.png)

* * *

如何

我已经`:before`在内部容器 div 上使用（具有 7px 折叠边框，三个透明，一个白色）来创建一个三角形，其中边框相交，然后我将它放在具有绝对定位的文本框上方（覆盖文本框的边框以“附加“它的三角形）。

根据[这个问题](https://stackoverflow.com/questions/12956228/weird-dark-border-after-css-arrow-in-firefox)，`rgba`应该使用代替`transparent`以防止Firefox放置不需要的边框；

然后，为了以跨浏览器的方式为边框着色，我曾经`:after`放置一个相同的三角形，大小相同，颜色与文本框的边框*相似*（*），仅比白色三角形高 1px（在顶部位置） .

此时，我使用`z-index`属性将灰色三角形放置在白色三角形下方，这样只有 1px 的“主体”（底部边框）可见。

这为箭头创建了灰色边框。

(*) 我选择的颜色比文本框的边框颜色深一点，因为混合两个三角形会产生“增亮”效果。使用#888 而不是#bbb，结果是可以接受的，并且比使用原始颜色本身更类似于原始颜色。

这是注释代码和演示：

* * *

演示

[http://jsfiddle.net/syTDv/](http://jsfiddle.net/syTDv/)

* * *

HTML

```
<div id="fbContainer">
   <div class="facebookTriangle">  
      <input type="text" id="facebookTextbox" value="some text"/>
   </div>
</div> 
```

CSS

```
body {
    padding: 30px;
}

/* With this container you can put the textbox anywhere on the page,
 without disturbing the triangles's absolute positioning */
#fbContainer{
  position: relative;
}

/* some adjustments to make the textbox more pretty */
#facebookTextbox{   
   border: 1px solid #bbb !important;
   padding: 5px;
   color: gray;
   font-size: 1em;
   width: 200px;
}

/* block element needed to apply :before and :after */
.facebookTriangle{
  height: 30px;
  padding-top: 10px;
}

/* white triangle */
/* collapsing borders (because of the empty content) 
   creates four triangles, three transparents and one coloured, 
   the bottom one */    
.facebookTriangle:before {
  content: '';
  border-style: solid;
  border-width: 7px;
  border-color: rgba(255,255,255,0) rgba(255,255,255,0) 
                white rgba(255,255,255,0);
  top: -3px;
  position: absolute;
  left: 7px;
  z-index: 2; /* stay in front */
}

/* gray triangle */
/* used as border for white triangle */
.facebookTriangle:after {
  content: '';
  border-style: solid;
  border-width: 7px;
  border-color: rgba(255,255,255,0) rgba(255,255,255,0) 
                #888 rgba(255,255,255,0);  
  top: -4px;
  position: absolute;
  left: 7px;
  z-index: 1; /* stay behind */
} 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:48:58.197

相当多的可能性：

我更喜欢的是获得一个适合您需要的三角形图像，然后通过 css 将其放在输入字段上方。

您可以修复它，为输入字段提供类 triangled_input，将其设置为相对。并赋予三角形图像绝对属性。更改偏移量，直到它位于您想要的位置。

例如

```
<style>
.triangled_input{
position: relative;
}

.triangle{
position: absolute;
top: -10px;
left: 10px;
}
</style>

<input class="triangled_input" />
<img src="your_triangle.gif" class="triangle" alt="" /> 
```

当然，您必须调整三角形的偏移量以满足您的需要。

# hadoop - 如何清除hadoop fifo队列？

> ID：12024034
> 
> 赞同：2
> 
> 时间：2012-08-19T03:38:30.343
> 
> 标签：hadoop, cloudera

我已经建立了一个伪分布式模式集群设置。FIFO 调度程序以某种方式卡在两者之间，因此我通过 cron 调度了很多工作。现在，当我重新启动 YARN 资源管理器时，它会在一段时间后卡住，并且作业不断堆积。

有没有办法可以清除整个队列。或者，是不是我对 hadoop 调度的完整理解存在缺陷。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T17:52:54.233

如果你试图杀死队列中的所有作业，你可以使用这个 shell 脚本：

```
$HADOOP_HOME/bin/hadoop job -list | awk ' { system("$HADOOP_HOME/bin/hadoop job -kill " $1) } ' 
```

# php - AJAX PHP 和 Sessions 奇怪的行为

> ID：12024035
> 
> 赞同：0
> 
> 时间：2012-08-19T03:38:31.830
> 
> 标签：php, jquery, ajax, session

我在网上阅读了很多解决方案，但没有一个真正适合我。所以回到 Stackoverflow：

问题如下：我的会话被创建，它通过页面传递，如果通过 AJAX 上传图片或更改信息，它通常仍在运行。但是有时，这不是我可以重现的东西-它只是在上传图片后立即更改会话 ID-我只是在上传脚本上获得了一个新的会话 ID-这意味着如果我通过页面浏览它是旧 ID，但图片当然不会被保存，因为它是一个新的 session_id - 更有趣的是，这个对于图片上传将保持不变，直到它被销毁！所以实际上我将有 2 个 session_id 用于同一个会话。

我越来越不耐烦了，所以如果有人对我有线索，那就太好了。当然 session_start 在每个页面的顶部执行；）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:37:12.163

几周以来，我犯了很多不必要的错误。哦，当然，代码没有任何问题...错误在我这边，因为我忘记了 Flash 没有通过任何东西，如果没有告诉。

当我使用 swfuploader 库时，哦，我想你可以想象剩下的。

如果使用 Flash，请不要忘记传递您的会话 ID！

# git - 应用变基的第一个差异如何产生冲突？

> ID：12024036
> 
> 赞同：0
> 
> 时间：2012-08-19T03:38:54.973
> 
> 标签：git, version-control, rebase, git-rebase

我有一个本地分支 A，它从我经常变基的 origin/master 分支，然后是从我经常变基的 A 分支的本地分支 B。

当我变基 B 时，它说

```
First, rewinding head to replay your work on top of it... 
```

然后它说：

```
Applying: <message-for-A's-first-commit>
Using index info to reconstruct a base tree... 
```

然后我遇到了冲突。冲突发生在第一个 A 提交中存在的文件和 A 上最近一次提交中存在的文件之间。

我不明白这里发生了什么。应用第一个补丁怎么会发生冲突？为什么它“应用”实际上应该只是 HEAD 提交（或者那个标准？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:46:36.017

很有可能是因为你已经重新设置了 A 的基础，所以现在它正试图解决 A 中的提交（因此在 B 中，因为 B 基于 A）和相同的提交之间的冲突现在在 A 但由于已重新设置基准而具有不同的 SHA。

从另一个分支下面重新建立一个分支通常被认为是一个坏主意 - 你不应该重新建立你已经分支的分支。

# c# - 我们如何定义字符串常量而不是数组

> ID：12024040
> 
> 赞同：3
> 
> 时间：2012-08-19T03:39:42.877
> 
> 标签：c#, arrays, string, constants, immutability

在 C# 中，您可以定义 a `const string`，但不能像数组一样定义数组`objects`。据我了解，字符串**实际上是** `object`s，因为它们是按值传递的引用对象，就像数组一样。

那么我们如何做到这一点：

```
const string NewLine = "\r\n"; 
```

但不是这个：

```
const byte[] AesSwapBytes = new byte[] { ... }; 
```

是不是因为我们不能更改字符串（`NewLine[0] = '\n'`）上的单个字符，但可以更改数组（`arr[0] = i`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:27:01.263

能不能做变量与它是对象还是结构体无关。创建变量所需的`const`是赋值的右手大小必须是编译时文字。只有少数类型具有编译时文字。 `string`是一个，就像`int`,`double`和其他数字类型一样。正如另一个答案中提到的，`null`是编译时文字，所以如果你真的想要你可以分配任何可为空的类型`const`并为其分配 null （并不是说它真的很有用）。如果 C# 要添加导致数组的编译时文字（除了 null），那么您可以创建一个有意义的`const`数组。在那之前，你会被困在使用其他一些机制来做你想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:45:15.090

[根据this MSDN post](http://blogs.msdn.com/b/csharpfaq/archive/2004/12/03/how-do-i-create-a-constant-that-is-an-array.aspx)，可以在C#中定义一个`readonly`数组。C# 特别不允许您将数组声明为，`constant`因为赋值表达式不是常量。

`public readonly string[] Titles = { "German", "Spanish", "Corrects", "Wrongs" };`

但是，第一条评论详细说明这无论如何都是无用的，因为

> 您不能重新分配数组，但可以替换单个值。

[有关堆栈溢出的更多信息，请点击此处](https://stackoverflow.com/a/5142378/451590)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T03:48:37.997

`const`实际上，只要初始化器是编译时常量，您就可以使用关键字声明数组常量。

```
const byte[] Nothing = null; 
```

作为一般规则，对于引用类型，只有`null`一个编译时常量。

.NET 做了一个特殊的例外，也允许字符串文字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T03:58:47.693

声明为数组的问题`readonly`在于，即使该字段是只读的（您不能使其引用另一个数组），数组本身的内容也可以更改。

如果您需要一个无法更改内容的“不可变数组”，答案是：**不要使用数组**。*数组是可变*的，您对此无能为力。

一种可能的解决方法是使用只读集合：

```
static readonly IList<byte> AesSwapBytes =
    new ReadOnlyCollection<byte>(new byte[] { ... }); 
```

如果需要将其用作数组，只需`ToArray`在其上调用扩展方法即可。它将返回一个包含数据副本的数组，而不是原始数组；所以如果你修改 的结果`ToArray`，它不会影响原来的集合。

# android - 使用唤醒锁 Android

> ID：12024042
> 
> 赞同：0
> 
> 时间：2012-08-19T03:40:16.347
> 
> 标签：android, android-alarms, wakelock

我每 5 分钟检查一次位置数据。我在每五分钟调用一次的服务中实现了这一点。在主要活动中，我有两个按钮来启动/停止警报。这是实施锁的最佳场所吗..

```
 startService.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            // add a notification when the BG service is started..

            Intent myIntent = new Intent(ContextActivity.this, MyAlarmService.class);
            pendingIntent = PendingIntent.getService(ContextActivity.this, 0, myIntent, 0);

                        AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

                        Calendar calendar = Calendar.getInstance();
                        calendar.setTimeInMillis(System.currentTimeMillis());
                        calendar.add(Calendar.SECOND, 10);
                       // alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);
                        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 1000 * 60 * 5, pendingIntent);

               Toast.makeText(ContextActivity.this, "Start Alarm", Toast.LENGTH_LONG).show();
               System.out.println("Alarm started");
        }

    });

    stopService.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
               alarmManager.cancel(pendingIntent);

                        // Tell the user about what we did.
                        Toast.makeText(ContextActivity.this, "Cancel!", Toast.LENGTH_LONG).show();
                        System.out.println("Stop alarm");
        }
    }); 
```

是否可以在启动时获取锁并在停止时释放锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:34:19.967

你不应该为此需要唤醒锁。

您已经在使用`alarmManager.setRepeating(AlarmManager.RTC_WAKEUP...`which 作为文档状态：

> System.currentTimeMillis() 中的闹钟时间（UTC 挂钟时间），它会在设备关闭时唤醒设备。

因此，当它触发时，您的闹钟已经为您唤醒了设备。如果您觉得您的服务在设备重新进入睡眠状态之前无法完成其工作，那么您应该获取服务内部的唤醒锁并在完成工作后释放它。

# javascript - 用于教育目的的基于网络的动画库

> ID：12024046
> 
> 赞同：0
> 
> 时间：2012-08-19T03:42:31.723
> 
> 标签：javascript, animation

我正在考虑创建一些基于 Web 的动画来表示 OS、算法、编程中的一些 CS 概念......直到现在我想到使用 Javascript。寻找一些关于此的建议。

还有其他好的选择吗？可用于此特定目的的好的库是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:29:11.993

如果你正在寻找一个显示动画数据的 javascript 库，你可以试试[d3](http://d3js.org/)，它有一些很棒的特性。

如果您正在寻找一种干净的方式来绘制可以在浏览器中查看的动画，您可能会查看[processing](http://processing.org/) ? 它更面向动画和显示，而且您可以使用[`processing.js`](http://processingjs.org/)它在任何（现代？）浏览器中运行它。

# amazon-web-services - Amazon EC2 扩展和上传临时文件夹

> ID：12024047
> 
> 赞同：2
> 
> 时间：2012-08-19T03:42:41.697
> 
> 标签：amazon-web-services, scalability, temporary-directory

我在一个亚马逊实例中有一个基于 php 的应用程序，用于上传和转码音频文件。此应用程序首先上传文件，然后对其进行转码，最后将其放入一个 s3 存储桶中。目前，应用程序通过监视临时文件夹中的文件大小，根据重复的 ajax 请求显示文件上传和转码的进度。

我一直在想，明天用户是否会急于使用我的服务，而我需要在 AWS 中以任何可能的方式扩展我的服务。

A: 我的上传和转码技术会怎样？

B：如果我添加更多实例，是否意味着我在不同物理位置的不同临时转换文件夹中有不同的文件？

C：如果我想通过 ajax 从[http://www.example.com/filesize](http://www.example.com/filesize)获取文件大小直到完成过程，我需要拥有每个 ec2 实例的真实地址（我的意思是 ip、dns）还是全部实例文件夹（或文件夹）？

D：当我们缩放临时文件夹会发生什么时，除了它们的灯堆栈之外的所有实例都定位到主实例的一个根文件夹是否正确？

我有一些关于其他托管技术扩展的基本信息，但在亚马逊这些问题在我脑海中。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:52:23.420

如果不了解更多有关您的应用程序架构的信息，很难回答您的问题，但鉴于您使用的是临时文件，这里有一个猜测：

1.  你的扩展能力完全取决于你的架构，当然还有足够深的钱包来支付。

2.  是的。如果您在单个机器上生成临时文件，它们将不会按照您当前描述的方式存储在共享位置。

3.  是的。您需要一些方法来了解文件的存储位置。您可能可以通过 ELB 粘性策略解决此问题（即通过 ELB 的流量被路由到相同的实例），但它们有点麻烦，不一定能解决您的问题。

4.  不太清楚这里的问题是什么。

听起来您还处于应用程序的早期阶段，[因此请看一下本教程](http://aws.amazon.com/articles/Amazon-SQS/1602)和[本教程](http://aws.amazon.com/articles/Amazon-SQS/1404)。第一个描述了基于 Amazon SQS 构建的缩略图服务，第二个描述了视频处理服务。它们将帮助您在设计时考虑到最佳 AWS 实践，并帮助您避免许多您现在担心的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:26:43.087

您可以绕过缩放和会话粘性的一种方法是让转码使用当前进度更新数据库。任何返回的用户都会检查数据库以查看其上传进度。由于进度存储在一个地方，因此无需跟踪转码发生的位置。

然而，就像克里斯托弗说的那样，我们对你的申请一无所知，我们提供的任何建议都是从外向内看的，我们不知道你最容易做的事情是什么. 这似乎是一个非常简单的解决方案，但我可能会遗漏一些东西，因为我对您的应用程序或架构一无所知。

# drop-down-menu - 将下拉 css 导航栏向右对齐

> ID：12024048
> 
> 赞同：1
> 
> 时间：2012-08-19T03:42:58.977
> 
> 标签：drop-down-menu, html-lists, navigationbar, right-align

基本上，我页面上的导航栏与页面右侧对齐，左侧有徽标。因此，当最右侧项目的下拉菜单出现时，它会从页面的右侧漂移并且看起来很乱。特别是因为它使用 aplha 背景。

无论如何，这是我目前的代码..

HTML：

```
 <ul class="Nav2">
        <li>
        <a href="">Category 1</a>
          <ul>
            <li><a href="">Item 1</a></li>
            <li><a href="">Item 2</a></li>
          </ul>
      </li>
        <li>
        <a href="">Category 2</a>
          <ul>
            <li><a href="">Item 1</a></li>
            <li><a href="">Item 2</a></li>
          </ul>
      </li>
        <li>
        <a href="">Category 3</a>
          <ul>
            <li><a href="">Item 1</a></li>
            <li><a href="">Item 2</a></li>
          </ul>
      </li>
        <li>
        <a href="">Category 4</a>
          <ul>
            <li><a href="">Item 1</a></li>
            <li><a href="">Item 2</a></li>
          </ul>
      </li>
        <li>
        <a href="">Category 5</a>
          <ul>
            <li><a href="">Item 1</a></li>
            <li><a href="">Item 2</a></li>
          </ul>
      </li>
    </ul> 
```

CSS：

```
ul.Nav2 {
  list-style-type:none;
  margin:0 auto;
  padding:0;
  overflow:hidden;
  width:auto;
}

ul.Nav2 li {
  float:right;
}

ul.Nav2 li a {
  font-family:"Orator Std";
  font-size:16px;
  color:#000;
  display:block;
  width:auto;
  height:20px;
  line-height:20px;
  border-left:1px Solid rgba(0,0,0,255);
  background-color:#CCC;
  text-align:center;
  text-decoration:none;
  opacity:0.6;
  padding:0px 10px;
  -webkit-transition:all 0.2s ease-in-out;
  -moz-transition:all 0.2s ease-in-out;
  -ms-transition:all 0.2s ease-in-out;
  -o-transition:all 0.2s ease-in-out;
  transition:all 0.2s ease-in-out;
}

ul.Nav2 li a:hover {
  opacity:1;
}

ul.Nav2 ul {
  list-style:none;
  position:absolute;
  left:-9999px;
  text-align:right;
}

ul.Nav2 ul li {
  padding-top:1px;
  float:none;
}

ul.Nav2 ul a {
  white-space:nowrap;
}

ul.Nav2 li:hover ul {
  left:inherit;
}

ul.Nav2 li:hover a {
  background:#FFF;
  text-decoration:none;
}

ul.Nav2 li:hover ul a { 
  text-decoration:none;
}

ul.Nav2 li:hover ul li a:hover {
  background:#FFF;
} 
```

基本上这就是我想要的样子......

```
Category 1  Category 2  Category 3  Category 4  Category 5
    Item 1      Item 1      Item 1      Item 1      Item 1
    Item 2      Item 2      Item 2      Item 2      Item 2 
```

而不是...

```
Category 1  Category 2  Category 3  Category 4  Category 5
  Item 1      Item 1      Item 1      Item 1      Item 1
  Item 2      Item 2      Item 2      Item 2      Item 2 
```

（它实际上被稍微推到了右边，但没有以 parent 为中心`<ul> <li>`）

由于要存储在导航栏中的文本之间的宽度范围很大，因此必须将宽度设置为自动。有些大约100px，有些接近300px

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:11:06.503

这是固定的CSS。已删除和添加的样式已注释。

```
ul.Nav2 {
  list-style-type:none;
  margin:0 auto;
  padding:0;
  overflow:hidden;
  width:auto;
}

ul.Nav2>li {
  float:right;
}

ul.Nav2 li a {
  font-family:"Orator Std";
  font-size:16px;
  color:#000;
  display:block;
  width:auto;
  height:20px;
  line-height:20px;
  border-left:1px Solid rgba(0,0,0,255);
  background-color:#CCC;
/*removed
  text-align:center;
*/
  text-decoration:none;
  opacity:0.6;
  padding:0px 10px;
  ;
  ;
  ;
  -o-transition:all 0.2s ease-in-out;
  transition:all 0.2s ease-in-out;
}

ul.Nav2 li a:hover {
  opacity:1;
}

ul.Nav2 ul {
  list-style:none;
  position:absolute;
  left:-9999px;
  text-align:right;
  float:right
  /*added*/
  display:block;
  padding:0;
  min-width:9.3ex;
}

ul.Nav2 ul li {
  padding-top:1px;
  float:none;
}

ul.Nav2 ul a {
  white-space:nowrap;
}

ul.Nav2 li:hover ul {
  left:inherit;
}

ul.Nav2 li:hover a {
  background:#FFF;
  text-decoration:none;
}

ul.Nav2 li:hover ul a { 
  text-decoration:none;
}

ul.Nav2 li:hover ul li a:hover {
  background:#FFF;
} 
```

编辑：根据新限制更新 CSS。

# ios - 为不同状态的 UISegmentedControl 设置图像？

> ID：12024050
> 
> 赞同：7
> 
> 时间：2012-08-19T03:43:34.930
> 
> 标签：ios, ios5, uiimage, uisegmentedcontrol

我的`UISegmentedControl`XIB 中有一个有四个段的。我的设计师和我自己决定为默认状态设置某些图像，为选定状态设置其他图像。对于两种状态，每个段都有不同的图像。似乎我可以很容易地为每个段设置图像，但不能为每个状态设置图像。如何为每个段设置两种状态的图像（即 4 个段的 8 个图像）。

我想到了一种方法，但它没有使用它`UISegmentedControl`本身。我可以将控件不透明度设置为 0，在其后面有一个所有按钮都处于默认状态的图像，然后在每个段的顶部有四个不同的图像。当用户选择一个片段时，与该片段对应的图像将变得可见，而所有其他图像将被隐藏。看来我可能只需要使用这个解决方案，但有谁知道使用标准`UISegmentedControl`做我需要的简单方法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T09:38:27.917

不幸的是`UISegmentedControl`，它本身不支持这样的设置。`setImage:forSegmentAtIndex:`但是您可以在每次用户切换控件时自行借助方法适当地更改分段图像

# java - 为什么我似乎无法在我的 OnClick 方法中访问我的标题变量

> ID：12024052
> 
> 赞同：1
> 
> 时间：2012-08-19T03:44:13.177
> 
> 标签：java, android

我正在构建一个应用程序，它将在数组中搜索两个或多个字符串并返回与这两个字符串相关的一些信息。我需要在我的 OnClick 中访问名为 title 的变量。这是我的代码：

```
package com.rottenapi.applogictest;

import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray; 

import org.json.JSONObject;

import android.os.Bundle;
 import android.app.Activity;
import android.util.Log;
 import android.view.Menu;

import android.widget.EditText;
import android.widget.Button;
import android.view.View;

public class Main extends Activity {

private static String url = "http://api.rottentomatoes.com/api/public/v1.0/movies/770672123/cast.json?apikey=3p9ehnhzbxwpbd6mk8fncf67";
private static String TAG_CAST = "cast";
private static String TAG_LINKS = "links";
private static String TAG_NAME = "name";

public static String TAG_REL = "rel";
private static String TAG_TITLE = "Title";

EditText enterName;
EditText enterNameTwo;
EditText result;

Button findMovie;

String searchOne;
String searchTwo;
public String title;

List<String> castMembers = new ArrayList<String>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainlayout);

    JSONArray cast = null;

    JSONArray rel = null;

    JSONArray links = null;

    final JSONParser jParser = new JSONParser();

    final JSONObject jSon = jParser.getJSONFromUrl(url);

    enterName = (EditText) findViewById(R.id.enterName);
    enterNameTwo = (EditText) findViewById(R.id.enterNameTwo);
    result = (EditText) findViewById(R.id.result);

    searchOne = enterName.getText().toString();
    searchTwo = enterNameTwo.getText().toString();

    try{
        cast = jSon.getJSONArray(TAG_CAST);

        for(int i=0; i < cast.length(); i++){
            JSONObject c = cast.getJSONObject(i);

            String name = c.getString(TAG_NAME);

            castMembers.add(name);
        }

        if (castMembers.contains(searchOne) && castMembers.contains(searchTwo)){
            links = jSon.getJSONArray(TAG_LINKS);
            for(int i=0; i < links.length(); i++){
                JSONObject d = links.getJSONObject(i);

                String movieInfoLink = d.getString(TAG_REL);

                JSONObject jSonMovie = jParser.getJSONFromUrl(movieInfoLink);

                rel = jSonMovie.getJSONArray(TAG_REL);

            }for(int i =0; i < rel.length(); i++){

                JSONObject e = rel.getJSONObject(i);

                title = e.getString(TAG_TITLE);

            }
            findMovie.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Log.d("Result contents", title);
                    result.setText(title);
                }
            });

        }

        }
        catch(Exception e){
            Log.e("Error", e.toString());
        }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.mainlayout, menu);
    return true;
} 
```

当我运行此应用程序时，应用程序会显示在模拟器中，但是在单击按钮后什么也没有发生，logcat 中也不会打印任何错误。我的结果内容日志也不会在日志中打印出来。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:51:39.650

`Button findMovie`不称为通过`findViewById()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:05:58.640

这是因为您尚未将您`Button findMovie`的布局链接`id`到`Button`. 您需要做的只是将以下行添加到您的代码中，它将起作用：

```
findMovie = (Button) findViewById(R.id.findMovieButton); 
```

希望这可以帮助..

# ruby-on-rails - 使用活动记录对象数组来限制数据库搜索查询

> ID：12024059
> 
> 赞同：0
> 
> 时间：2012-08-19T03:45:26.540
> 
> 标签：ruby-on-rails

假设我有一个列在数组@businesses 中的业务对象列表

我想查找在@businesses 中列出的所有企业工作的员工名单。

看来我不能只做`Employee.where(:business_id=>@businesses)`

有没有办法做上面**不涉及代码之类的**

```
@businesses.each do |business|
  business.employees
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:55:09.027

也许是这样的：

```
Employee.find(:all, :conditions => { :business_id => @businesses.map(&:id) }) 
```

或者

```
Employee.where(:business_id => @businesses.map(&:id)) 
```

# macos - Google Chrome 无法使用 AppleScript 打开 URL

> ID：12024065
> 
> 赞同：1
> 
> 时间：2012-08-19T03:46:30.760
> 
> 标签：macos, google-chrome, editor, applescript

我设置的是一个 AppleScript，它通过几个选项询问您要打开哪个网站，为了简单起见，我只列出了一个选项，谷歌。这是当前代码：

```
if the_button = "Google" then
    site = "http://www.google.com"
    tell application "Google Chrome"
        launch
        tell window 1
            make new tab with properties {URL:site}
            repeat while loading of active tab
                delay 0.1
            end repeat
        end tell
        activate
    end tell 
```

它会在 Google Chrome 中打开一个新标签，但不会在 URL 栏中放置任何内容或重新加载/加载或任何内容。我试过这个：[Script Safari 5.1 to open a tab](https://stackoverflow.com/questions/6941630/script-safari-5-1-to-open-a-tab)但是，没有任何效果。我正在使用 Mac OS X Lion 10.7.4 和 Google Chrome 版本 21.0.1180.79。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:43:06.603

它适用于我，但不适用于 Chrome 没有打开的窗口或所有窗口都已最小化时。在这些情况下，您可以添加一个`reopen`命令来打开一个新的默认窗口或取消最小化一个窗口。

```
set site to "http://www.google.com"
tell application "Google Chrome"
    reopen
    activate
    tell window 1
        make new tab with properties {URL:site}
    end tell
end tell 
```

另一种选择可能是使用类似`do shell script "open " & quoted form of "http://google.com" & " -a Google\ Chrome"`. 它通常更接近浏览器的默认行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T06:51:13.983

你不能这样做吗？

```
tell application "Google Chrome"
    activate
    set theSite to "http://www.google.com/"
    open location theSite
end tell 
```

“打开位置”命令是标准添加的一部分，适用于所有 Mac 应用程序。这是在任何 Mac 应用程序中打开网站的默认方式。您可能会注意到 Safari 的 AppleScript 字典甚至不包含打开网站的方法——它只是使用标准的“打开位置”命令，您可以在 Standard Additions 字典中找到该命令。

# objective-c - UIAlertView EXC_BAD_ACCESS 错误

> ID：12024069
> 
> 赞同：0
> 
> 时间：2012-08-19T03:47:10.717
> 
> 标签：objective-c, uialertview, exc-bad-access, uiactionsheet

我无法弄清楚为什么我在操作表方法的下面一行中不断收到 EXC_BAD_ACCESS 错误：

```
[[UIApplication sharedApplication]openURL:[NSURL URLWithString:numberFinal]]; 
```

我添加了我的代码，但我只是不明白为什么它被过度发布。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    number = [[results objectAtIndex:indexPath.row]objectForKey:@"phone"];

    number = [number stringByReplacingOccurrencesOfString:@"-" withString:@""];
    numberFinal = [NSString stringWithFormat:@"tel:%@",number];
    //tel:1234567890
    NSLog(@"NUMBER:%@",numberFinal);

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    UIAlertView *alert2 = [[[UIAlertView alloc]initWithTitle:@"Call" message:@"Call This Person?" delegate:self cancelButtonTitle:@"NO" otherButtonTitles:@"YES", nil]autorelease];
    alert2.tag = kAlertViewTwo;

    [alert2 show];
   // [alert2 release];

}
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    // the user clicked one of the OK/Cancel buttons
    if(actionSheet.tag == kAlertViewOne) {
        if (buttonIndex == 0)
        {
        }else{
        }
    }
    else if(actionSheet.tag == kAlertViewTwo) {
        if (buttonIndex == 0)
        {
            //ok button clicked - close alert  
        }
        else
        {
            [[UIApplication sharedApplication]openURL:[NSURL URLWithString:numberFinal]];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:58:08.880

尝试在该行之前执行 NSLog 并打印**numberFinal**以查看它是否分配好。

确保您的课程是 UIAlertView 代表

在另一个函数中尝试相同的代码行，看看它是否会导致相同的问题。这可能是因为您正在从 UIAlertView 单击事件中访问 sharedApplication。

希望有帮助:)

# java - Java 内存模型中具有数据竞争的正确同步程序示例

> ID：12024070
> 
> 赞同：9
> 
> 时间：2012-08-19T03:47:12.523
> 
> 标签：java, memory-model, jls

在[*JLS 中，第 17.4.5 节。Happens-before Order*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)，它说

> 当且仅当所有顺序一致的执行都没有数据竞争时，程序才能正确同步。

根据[*是否正确同步的程序仍然允许数据竞争？（第一部分）*](https://stackoverflow.com/questions/12006730/does-a-correctly-synchronized-program-still-allow-data-racepart-i/12008258#12008258)中的讨论，我们得到以下结论：

> 程序可以正确同步并具有数据竞争。

两个结论的结合意味着它必须存在这样一个例子：

> 程序的所有顺序一致执行都是无数据竞争的，但此类程序的正常执行（除顺序一致执行之外的执行）包含数据竞争。

经过深思熟虑，我仍然找不到这样的代码示例。那你呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T06:32:03.030

“一个程序可以正确同步并有数据竞争”是不正确的。assylias 在该讨论*中的示例未正确同步*。从更高级别的功能角度来看，它是*正确*的——它包含的数据竞争并不表现为错误。这是一场所谓的“良性”数据竞赛，但在讨论 JLS 定义时这无关紧要。

保证顺序一致执行不包含数据竞争的程序在任何执行中都不包含数据竞争，无论是否顺序一致。正如 JLS 所说，

> 这对程序员来说是一个极其有力的保证。程序员不需要推理重新排序来确定他们的代码包含数据竞争。因此，在确定他们的代码是否正确同步时，他们不需要考虑重新排序。一旦确定代码正确同步，程序员就不必担心重新排序会影响他或她的代码。

*所以请注意，出于对程序员的礼貌，*正确同步程序的定义被缩小为仅顺序一致的执行，这给了他强有力的保证，即顺序一致的执行是他或她唯一需要推理的执行以及所有其他执行。将自动获得相同的保证。

## 更新

JMM 使用的术语很容易迷失方向，而细微的误解会导致后来的深刻误解。因此，请牢记这些：

*   执行***只是***一组线程间操作。它没有*先验*顺序。特别是，它**没有时间顺序**。

这是一个违反直觉的定义，所以我们必须小心：每次我们说*执行*时，我们必须确保想象**一袋动作**，而不是一串动作。每当我们定义一个*偏序*时，我们应该想象**有几个袋子排成一列**。

*   ***程序***包含执行动作的指令。每个这样的指令可以执行零次或多次，为特定执行贡献零次或多次不同的动作；
*   执行*可能有也可能没有*执行***顺序***，这是所有动作的*总顺序；*
*   如果所有共享变量都是易失的，那么您将获得顺序***一致的执行。***这种执行总是有一定的执行顺序；
*   ***顺序不一致***的执行是您对程序的实际执行：涉及非易失性变量，编译器重新排序读取和写入，有缓存，线程本地存储等。
*   ***同步顺序****是执行完成的所有同步操作*的总顺序。就执行本身而言，它仍然是部分顺序，因为并非所有动作都是同步动作；最值得注意的是，非易失性变量的读取和写入。每次执行，无论是否顺序一致，都有明确的同步顺序；
*   同样，***happens-before***顺序是为程序的特定执行定义的，并且是作为与程序顺序的同步顺序的传递闭包派生的。

有趣的是，如果您的所有共享变量都是 volatile 的，那么*同步顺序*将变为总顺序，因此符合*执行顺序*的定义。通过这种方式，我们从不同的角度得出结论，这样的程序的所有执行都将是*顺序一致*的。

我已经深入挖掘了数据竞赛定义中 JLS 错误的根源：

“当一个程序包含两个冲突的访问（第 17.4.1 节），这些访问没有按照*发生前的*关系排序时，就可以说它包含数据竞争。”

首先，不是*程序*包含数据竞争，而是*程序执行*。如果我们回顾一下定义 Java 内存模型的[原始论文](http://rsim.cs.illinois.edu/Pubs/popl05.pdf)，我们会看到这一点得到纠正：

“如果两个访问*x*和*y*来自不同的线程，它们会在程序执行中形成数据竞争，它们会发生冲突，并且它们不是按*发生前*排序的。”

然而，这仍然给我们留下了对被定义为数据竞争的 volatile vars 的操作。考虑以下*发生前*图：

```
Thread W        w1 ----> w2
                |
                 \
Thread R     r0 ----> r1 
```

*r1*观察到写入*w1*。它之前是另一个读取*r0*，写入之后是另一个*w2*。*现在请注意，在r0*和*w1*或*w2*之间没有路径；同样在*r1*和*w2*之间。所有这些都是定义上的数据竞争的例子。

然而，更深入地挖掘，我[在 memoryModel 邮件列表中找到了这篇文章](http://www.cs.umd.edu/%7Epugh/java/memoryModel/archive/2483.html)。它说“数据竞争应该被定义为对*非易失性*变量的冲突操作，这些变量不是按发生前排序的”。只有这样添加才能关闭漏洞，但这仍然没有进入官方 JLS 版本。

# php - PHP 表单发布到自身

> ID：12024071
> 
> 赞同：3
> 
> 时间：2012-08-19T03:47:16.650
> 
> 标签：php, html, forms

我一直在尝试将表单中包含的一些信息发布给自己。但我不明白为什么它不起作用。当我从 HTML 页面发布数据时它可以工作，但是当我将信息发布到自身时它不起作用。

继承人的代码：

```
 $country =  isset($_POST['country']) ? $_POST['country'] : 'Belize';
$number_of_guests = isset($_POST['number_of_guests']) ? $_POST['number_of_guests'] : 2;
$from =  isset($_POST['price_range_from']) ? $_POST['price_range_from'] : 200;
$to =  isset($_POST['price_range_to']) ? $_POST['price_range_to'] : 2000; 
```

当我从 HTML 表单发布信息时，它工作正常，但在提交给自身时，所有变量都包含“on”的值。我不知道我遗漏了什么或未能正确实施。

这是 HTML 表单代码：

```
<form action="find_results.php" method = "post">
    <strong>Select the Country</strong><br />
    <input id = 'c1' type= "radio" name= "country" checked/> Mexico <br />
    <input id = 'c2' type= "radio" name= "country" /> Belize <br />
    <input id = 'c3' type = "radio" name= "country" />Jamaica <br />
    <input id = 'c4' type = "radio" name= "country" />Thailand <br />
    <input id = 'c5' type = "radio" name= "country" />Turks & Caicos 
    <hr />

    <strong>Number of Guests</strong><br />
    <input id = 'n1' type= "radio" name= "number_of_guests" /> 2
    <input id = 'n2' type= "radio" name= "number_of_guests" /> 4
    <input id = 'n3' type= "radio" name= "number_of_guests" /> 6        
    <input id = 'n4' type= "radio" name= "number_of_guests" /> 8
    <input id = 'n5' type= "radio" name= "number_of_guests" /> 10+
    <hr />

    <strong>Price Range(From)</strong><br />
    <input id = 'from1' type= "radio" name= "price_range_from" /> 200
    <input id = 'from2' type= "radio" name= "price_range_from" /> 300
    <input id = 'from3' type= "radio" name= "price_range_from" /> 400
    <input id = 'from4' type= "radio" name= "price_range_from" /> 500
    <input id = 'from5' type= "radio" name= "price_range_from" /> 600 or More 
    <hr />

    <strong>Price Range(Upto)</strong><br />
    <input id = 'to1' type= "radio" name= "price_range_to" /> 500
    <input id = 'to2' type= "radio" name= "price_range_to" /> 600
    <input id = 'to3' type= "radio" name= "price_range_to" /> 700
    <input id = 'to4' type= "radio" name= "price_range_to" /> 800
    <input id = 'to5' type= "radio" name= "price_range_to" /> 900 or More
    <br />

    <input type="submit" value="Submit" name='submit' />
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T03:50:36.343

您没有在表单中设置任何值。指向另一个页面时这是如何工作*的*？

```
<input id = 'c1' type= "radio" name= "country" checked value='mexico' /> 
```

您确实需要`value='something'`在表单中设置 a 以便传递正确的数据。您可能在传递表单元素时将它们设置为“打开”，但其中没有任何信息`value`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:02:13.810

同意 Fluffeh 的观点。您的特定标签的“值”被转发到您的 PHP 代码。没有这些值，您将无法获得所需的结果。

```
<input id = 'c1' type= "radio" value="Mexico" name= "country" checked="checked" /> Mexico <br />
<input id = 'c2' type= "radio" value="Belize" name= "country" /> Belize <br /> 
```

在 PHP 中，这些值将被设置为国家。

# c# - MongoDB + C# 驱动程序 + 查询元素数组，其中每个数组元素包含要查询的子文档

> ID：12024087
> 
> 赞同：7
> 
> 时间：2012-08-19T03:52:49.523
> 
> 标签：c#, mongodb

我正在使用官方 MongoDB C# 驱动程序的 1.5.0.4566 版本。我正在使用 Mongo 2.06 版。

这是我的文档结构的样子（省略了本次讨论不需要的字段）：

```
{ "Parents" : 
   [ 
     {
     "CreatedOn": ISODate("2012-07-28T15:30:06.623Z"),
     "Title": "Simple Title",
     "Children": [   
                  { "StatusId": 1, "Active" : true, SubChild : { "ExpiresOn": ISODate("2012-07-28T15:30:06.623Z")}},
                  { "StatusId": 1, "Active" : true, SubChild : { "ExpiresOn": ISODate("2012-08-28T15:30:06.623Z")}}
                 ]
     },
     {
     "CreatedOn": ISODate("2012-07-28T15:30:06.623Z"),
     "Title": "Another Simple Title",
     "Children": [   
                  { "StatusId": 1, "Active" : true, SubChild : { "ExpiresOn": ISODate("2012-07-28T15:30:06.623Z")}},
                  { "StatusId": 1, "Active" : true, SubChild : { "ExpiresOn": ISODate("2012-08-28T15:30:06.623Z")}}
                 ]
     }
   ]
} 
```

如果我想查询 StatusId 等于 1 并且 Active 为 true 的孩子，我可以使用 ElemMatch。

```
Query.ElemMatch("Children", Query.And(Query.EQ("StatusId", 1),Query.EQ("Active",true))); 
```

当我需要在查询中包含 SubChild 元素时，我无法开始工作。

```
Query.ElemMatch("Children", Query.And(Query.EQ("StatusId",1), Query.EQ("Active",true),Query.LT("SubChild.ExpiresOn",DateTime.UtcNow))); 
```

当我尝试在查询中包含 SubChild.ExpiresOn 字段时，查询不返回任何值。我尝试了不同的方法来构建这个查询，但是当我包含 SubChild.ExpiredOn 字段时，总是得到零个文档。

我错过了什么？

谢谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T04:47:18.193

试试这个

```
Query.ElemMatch("Children", Query.And(Query.EQ("StatusId",1), Query.EQ("Active",true),Query.LT("SubChild.ExpiresOn",DateTime.UtcNow))); 
```

想知道为什么这个查询神奇地起作用吗？就是这样（`StatusId`vs `StatusID`）。JavaScript 区分大小写。

您可以通过使用强类型 Linq 查询来消除此问题，例如：

```
from x in collection.AsQueryable()
where x.Children.Any(child => 
    child.StatusId == 1 
    && child.Active 
    && child.SubChild.ExpiresOn < DateTime.UtcNow)
select x 
```

# iphone - NSPredicate 使用 Contains 比较整数

> ID：12024090
> 
> 赞同：9
> 
> 时间：2012-08-19T03:54:00.940
> 
> 标签：iphone, objective-c, nspredicate

我正在使用 NSPredicate 使用 UISearchBar 在列表中搜索数字，它适用于字符串但不适用于整数

我正在使用以下谓词

```
predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"%@ contains[c]  %d", @"number", [searchBar.text intValue]]];
[objectArray filterUsingPredicate:predicate];
[tableview reloadData]; 
```

例如，如果我键入 1，那么必须列出数组中的所有元素，我已经尝试过 == 如果尝试任何解决方法，它只适用于确切的数字？

现在，如果我使用此方法“不能在集合中使用 in/contains 运算符”，我会收到错误消息

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-19T04:34:48.940

我认为这个谓词应该适合你：

```
predicate = [NSPredicate predicateWithFormat:@"self.number.stringValue CONTAINS %@",searchBar.text]; 
```

考虑到这一点，我不确定为什么 self.number.stringValue 有效，但是当我测试它时它确实有效（self.number 是一个 int）。不知道为什么我可以将 stringValue 发送到 int？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T04:26:07.703

谓词可能很难使用，所以也许另一种方法对你有用：

```
NSInteger index = 0;
while (index < objectArray.count)
{
    NSString *currentString = [objectArray objectAtIndex:index];
    if ([currentString rangeOfString:searchBar.text].length == 0)
    {
        [objectArray removeObjectAtIndex:index];
        continue;
    }
    index++;
} 
```

在这里，您的数组中不包含您的 searchBar 文本的任何字符串都将被删除。

# ruby - 如何使用 irb Ruby 解释器来测试/调试我的 .rb 文件？

> ID：12024092
> 
> 赞同：0
> 
> 时间：2012-08-19T03:54:32.953
> 
> 标签：ruby, debugging, interpreter, prompt, irb

如何使用 irb Ruby 解释器来测试/调试我的`.rb`文件？我想加载一个`.rb`文件，让它运行，然后在它结束后返回到 irb 提示符，这样我就可以操纵我的脚本构建的变量。

我尝试了`load`、`require`和`irb -r`，但它们都没有按我的意愿工作。执行后，当程序终止时，我得到一个 irb 提示，但所有变量都无法访问。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:54:02.450

不确定您到底想做什么，但听起来您可能想改用“pry”gem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:33:39.883

1.  安装`pry`gem 参见： http: [//pryrepl.org](http://pryrepl.org)
2.  在程序开始时需要“撬”。
3.  放在`binding.pry`程序的末尾（或您要开始交互式会话的位置）
4.  运行你的程序。

使用 pry 您将在范围内拥有所有变量。

更多信息请参见上面的链接，以及此处：

[http://banisterfiend.wordpress.com/2011/01/27/turning-irb-on-its-head-with-pry/](http://banisterfiend.wordpress.com/2011/01/27/turning-irb-on-its-head-with-pry/)

和：

[https://github.com/pry/pry/wiki/Runtime-invocation](https://github.com/pry/pry/wiki/Runtime-invocation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:33:24.663

在您希望 irb 开始的地方添加以下代码

```
require 'irb'
IRB.start(__FILE__) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T04:16:10.647

如果您想要的变量是局部变量，我认为没有办法可以从另一个文件访问它们。

如果您只想要不同文件上的整个代码的返回值，您可以`eval`在主代码中获取该文件的全部内容并访问返回值。`eval`您可以通过将它们放在要编辑的文件末尾的数组或散列中来访问多个值。

# java - Java 空块作用域

> ID：12024095
> 
> 赞同：9
> 
> 时间：2012-08-19T03:55:42.353
> 
> 标签：java

我想知道使用空块的目的是什么。例如，

```
 static{
        int x = 5;
    }

    public static void main (String [] args){

          int i = 10;

          {
               int j = 0 ;
               System.out.println(x);  // compiler error : can't find x ?? why ??
               System.out.println(i);  // this is fine
          }
          System.out.println(j); //compiler error :  can't find j

    } 
```

有人能解释一下吗

1.  在什么情况下我们想使用空块。
2.  那个空块内的所有变量是否还在继续`stack`？
3.  为什么无法访问`static variable x`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T04:03:59.757

1.  您在帖子中显示的块不是空块，它是一个静态初始化程序。它用于为您的类的静态变量提供非平凡的初始化
2.  您在初始化期间使用的局部变量在堆栈中，除了您从堆中分配的对象
3.  您无法访问静态变量`x`，因为您没有声明它。`x`相反，您在静态初始化程序中声明了一个局部变量。

如果您想创建`x`一个静态变量，然后在静态初始化块中对其进行初始化，请执行以下操作：

```
private static int x;
static {
    x = 5;
} 
```

在像这样的简单情况下，简单的初始化语法效果最好：

```
private static int x = 5; 
```

初始化块保留用于更复杂的工作，例如，当您需要使用循环初始化结构时：

```
private static List<List<String>> x = new ArrayList<List<String>>();
static {
    for (int i = 0 ; i != 10 ; i++) {
        x.add(new ArrayList<String>(20));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T03:59:25.713

1.  匿名代码块仅对限制变量范围有用；他们没有任何真正的目的。
2.  是的，但范围仅限于该块内。
3.  x 的范围仅限于静态初始化块，因为它是在方法内声明的（静态上下文在方法内部），而不是在类的静态范围内。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T04:01:44.337

静态块对于初始化静态成员很有用，因为它们在类初始化时运行。

```
static final Map<K, V> MY_MAP = ...;

static {
  MY_MAP.put(...);
  ...
} 
```

* * *

> 该空块内的所有变量是否仍在堆栈中？

在静态块中声明的变量是局部变量，而不是类的静态成员。正如@veer 指出的那样，它是否进入堆栈是一个VM 实现细节。

* * *

> 为什么不能`main`访问静态变量`x`？

因为它是一个局部变量，只存在于`static`初始化程序的持续时间内。

# jquery - getJSON 不等待我的 WCF REST 服务

> ID：12024096
> 
> 赞同：1
> 
> 时间：2012-08-19T03:55:54.017
> 
> 标签：jquery, asp.net, wcf, rest

我的 WCF REST 服务工作正常，getJSON() 和 autocomplete() 也可以工作 - 但是调用 WCF 服务的结果为空，除非我在 Firebug 中设置了调试点。*如果我不设置调试点，getJSON 方法有时*只会返回 JSON 。

似乎 getJSON 方法不会等待我的 WCF 服务的响应——这可能需要一两秒钟。在我的 jQuery 中放置一个调试点会导致脚本“暂停”，而 WCF 有时间返回 JSON：

```
// Changing the selected item of the DropDownList will submit a different clientId
// to the WCF service. The result is used for the autocomplete()

$(document).ready(function () {
    var availableTags = "";
    $('#<%=ddlClients.ClientID %>').change(function () {
        var selectedClientId = $('#<%=ddlClients.ClientID %> option:selected').val();

        if (selectedClientId != -1) {
            //$.ajaxSetup({ async: false });
            $.getJSON("People.svc/getpeople", { ClientId: selectedClientId }, function (json) {
                availableTags = json;
            });
            //$.ajaxSetup({ async: true });

            $('#tbSearch').autocomplete({
                source: availableTags,
                minLength: 2
            });
        }
    });
}); 
```

我想出的唯一方法是在调用 getJSON（我在上面注释掉）时禁用异步回发，但我觉得这是一个 hack。

考虑到 WCF REST 服务和 jQuery/Ajax 的普遍性，我敢打赌还有另一种解决方案——或者以正确的方式禁用异步回发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:04:53.427

您尝试使用`availableTags`之前分配的，当您的请求完成时将调用成功函数，getJSON调用之后的代码将立即执行。Ti 使用成功回调返回的数据我建议您将代码放在回调本身中。

```
$(document).ready(function () {
    var availableTags = "";
    $('#<%=ddlClients.ClientID %>').change(function () {
        var selectedClientId = $('#<%=ddlClients.ClientID %> option:selected').val();

        if (selectedClientId != -1) {
            //$.ajaxSetup({ async: false });
            $.getJSON("People.svc/getpeople", { ClientId: selectedClientId }, function (json) {
                availableTags = json;
                $('#tbSearch').autocomplete({
                    source: availableTags,
                    minLength: 2
                });
            });
            //$.ajaxSetup({ async: true });

        }
    });
}); 
```

# character-encoding - 垃圾字符列表，如 â€™

> ID：12024097
> 
> 赞同：6
> 
> 时间：2012-08-19T03:56:41.283
> 
> 标签：character-encoding, rets

我正在使用 librets 从我的 RETS 服务器中检索数据。不知何故，librets 编码方法不起作用，我在输出中收到了一些奇怪的字符。我注意到像'''这样的字符被替换为€™。我无法找到 librets 的修复程序，所以我决定在下载数据后用实际值替换这些垃圾字符。我需要的是此类垃圾字符串及其等效字符的列表。我搜索了这个但没有找到任何资源。谁能指出这些垃圾字母的列表及其实际值或可以生成此类字母的一段代码。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T06:48:15.863

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T02:02:03.490

Question reminder:

> "...I noticed characters like '’' is replaced with â€™... i decided to replace such garbage characeters with actual values after downloading data. What I need is a list of such garbage string and their equivalent characters."

Strictly dealing with this part:

> "What I need is a list of such garbage string and their equivalent characters."

Using php, you can generate these characters and their equivalence. Working with all 1,111,998 Unicode points or 109,449 Utf8 symbols is impractical. You may use the ASCII range in the following loop between &#128 and &#258 or another range that is more relevant to your context.

```
<?php
  for ($i=128; $i<258; $i++)
    $tmp1 .= "<tr><td>".htmlentities("&#$i;")."</td><td>".html_entity_decode("&#".$i.";",ENT_NOQUOTES,"utf-8")."</td><td>&#".$i.";</td></tr>";

  echo "<table border=1>
    <tr><td>&#</td><td>&quot;Garbage&quot;</td><td>symbol</td></tr>";
    echo $tmp1;
  echo "</table>";
?> 
```

From experience, in an ASCII context, most "garbage" symbols originate in the range &#128 to &#257 + (seldom) &#8129 to &#8246.

In order for the "garbage" symbols to display, the html page charset must be set to iso-1 or whichever other charset that caused the problem in the first place. They will not show if the charset is set to utf-8.

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

.

> "i decided to replace such garbage characeters with actual values after downloading data"

You CANNOT undo the "garbage" with php utf8_decode(), which would actually create more "garbage" on already "garbage". But, you may use the simple and fast search and replace php str_replace() function.

First, generate 2 arrays for each set of "garbage" symbols you wish to replace. The first array is the Search term:

```
<?php
  //ISO 8859-1 (Latin-1) special chars are found in the range 128 to 257
  $tmp1 = "\$SearchArr = array(";
  for ($i=128; $i<258; $i++)
    $tmp1 .= "\"".html_entity_decode("&#".$i.";",ENT_NOQUOTES,"utf-8")."\", ";
  $tmp1 = substr($tmp1,0,strlen($tmp1)-2);//erases last comma
  $tmp1 .= ");";
  $tmp1 = htmlentities($tmp1,ENT_NOQUOTES,"utf-8");
?> 
```

The second array is the replace term:

```
<?php
  //Adapt for your relevant range.
  $tmp2 = "\$ReplaceArr = array(\n";
  for ($i=128; $i<258; $i++)
    $tmp2 .= "\"&#".$i.";\", ";
  $tmp2 = substr($tmp2,0,strlen($tmp2)-2);//erases last comma
  $tmp2 .= ");";

  echo $tmp1."\n<br><br>\n";
  echo $tmp2."\n";
?> 
```

Now, you've got 2 arrays that you can copy and paste to use and reuse to clean any of your infected strings like this:

```
$InfectedString = str_replace($SearchArr,$ReplaceArr,$InfectedString); 
```

Note: utf8_decode() is of no help for cleaning up "garbage" symbols. But, it can be used to prevent further contamination. Alternatively a mb_ function can be useful.

# r - data.table 中 j 参数的返回类型

> ID：12024098
> 
> 赞同：1
> 
> 时间：2012-08-19T03:56:42.327
> 
> 标签：r, data.table, apply

我一直在使用`data.table`一些计算，想知道`j`参数的可能返回类型是什么，以便它正确地堆叠我的输出？我知道`data.frame`是可以接受的，所以`list`也必须如此？我的函数为每个返回多行多列`id`。所以想象一下：

```
dtb <- data.table(id=rep(1:5,20), a=1:100, b=sample(1:100, 100), c=sample(1:100, 100))
f <- function(dt) { return(c(dt$a+1, dt$b+1, dt$c+1))}
dtb[,f(.SD), by=id] 
```

这显然不能正常工作。这样做：

```
dtb <- data.table(id=rep(1:5,20), a=1:100, b=sample(1:100, 100), c=sample(1:100, 100))
f <- function(dt) { return(data.frame(a=dt$a+1, b=dt$b+1, c=dt$c+1))}
dtb[,f(.SD), by=id] 
```

构建这些`data.frame`s 似乎是一种非常低效的做事方式。有什么建议？`by`必须使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T23:42:11.920

您对`j`组件的处理方法不是`data.table`母语

值得一读[data.table wiki](http://rwiki.sciviews.org/doku.php?id=packages:cran:data.table) on do's and don't about data.table 语法（使用`data.frame`是**可怕的！**，就性能而言）。

您也可以参考 [这个问题](https://stackoverflow.com/questions/11872499/create-an-expression-from-a-function-for-data-table-to-eval)，也许您会开始了解使用`j`和`list`工作原理。

*   您正在传递将在 data.table （或其分组子集）中评估的表达式列表
*   这些是*未评估*的表达式，并且（当前）该函数`[`依赖于观察`list`在正确的环境中正确评估这些（`data.table`或`.SD`，组子集）

这个电话会起作用

```
 dtb[,list(a = a+1, b = b + 1, c = c+1), by = id] 
```

这也一样（传递一个未评估的表达式，它恰好是对`list(...)`

```
library(plyr) # for as.quoted
my_list <- as.quoted(paste('list(',paste(letters[1:3], '=', letters[1:3], '+1',collapse= ','),')'))[[1]]
my_list
## list(a = a + 1, b = b + 1, c = c + 1)
dtb[,eval(my_list), by = id] 
```

还可以将调用 与`lapply(.SD, a_function)`结合起来`.SDcols`。该`.SDcols`参数允许您传递希望对函数进行评估的列名字符串，因此这将起作用

```
dtb[, lapply(.SD,base::'+',1),by= id, .SDcols = c('a','b','c')] 
```

或者

```
dtb[,lapply(.SD, .Primitive('+'),1), by= id, .SDcols = c('a','b','c')] 
```

请注意，我调用了`base::'+'`or`.Primitive('+')`而不是`'+'`，因为 data.table 无法`'+'`作为函数找到

# 基准测试

对这些解决方案进行基准测试

```
benchmark(
  lstdt=dtb[ , flst(.SD), by=id], 
  dfdt=dtb[ , fdf(.SD), by=id], 
  lapplySD = dtb[, lapply(.SD,base::'+',1),by= id, .SDcols = c('a','b','c')],
  lapplySD2 = dtb[, lapply(.SD,.Primitive('+'),1),by= id, .SDcols = c('a','b','c')]
  just_list = dtb[,list(a = a+1,b=b+1,c=c+1),b=id],
  eval_mylist = dtb[,eval(my_list),b=id],
  replications=10^2

##             test replications elapsed relative user.self 
##  2        dfdt          100    0.36 4.000000      0.34       
##  6 eval_mylist          100    0.09 1.000000      0.10       
##  5   just_list          100    0.11 1.222222      0.10        
##  3    lapplySD          100    0.14 1.555556      0.14  
##  4   lapplySD2          100    0.11      1.1      0.11  
##  1       lstdt          100    0.18 2.000000      0.17 
```

*   未评估的表达式（通过表达式列表）是禁食，这与 Matthew Dowle 在[上一个问题中的观点一致](https://stackoverflow.com/questions/11872499/create-an-expression-from-a-function-for-data-table-to-eval)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T06:20:40.660

当你写这篇文章时，`c(dt$a+1, dt$b+1, dt$c+1)`你*应该*期望一个向量（加上组 id 列。试试这个：

```
dtb <- data.table(id=rep(1:5,20), a=1:100, b=sample(1:100, 100), c=sample(1:100, 100))
f <- function(dt) { return(list(dt$a+1, dt$b+1, dt$c+1))}
dtb[,f(.SD), by=id] 
```

EDIT2（我之前的编辑中有一个错误，我只在发布完整代码时才注意到）。关于“更便宜”的问题：这是一个基准测试，显示列表构造“更便宜”：

```
flst <- function(dt) { return(list(dt$a+1, dt$b+1, dt$c+1))}
fdf <- function(dt) { return(data.frame(dt$a+1, dt$b+1, dt$c+1))}
require(rbenchmark)
 benchmark(
    lstdt=dtb[ , flst(.SD), by=id], 
    dfdt=dtb[ , fdf(.SD), by=id], 
    replications=10^2
    )
   test replications elapsed relative user.self sys.self user.child sys.child
2  dfdt          100   0.466  2.89441     0.457    0.010          0         0
1 lstdt          100   0.161  1.00000     0.159    0.003          0         0 
```

# ruby - 将字符串转换为正则表达式字符串

> ID：12024102
> 
> 赞同：0
> 
> 时间：2012-08-19T03:57:51.103
> 
> 标签：ruby, regex

如何将字符串转换为正则表达式字符串，正确转义所有正则表达式特定字符？我正在使用插值来构建正则表达式字符串，以允许用户自定义正则表达式而无需接触代码（或期望他们知道正则表达式）

例子

```
custom_text = "Hello"    
my_regex = /#{custom_text}:\s*(\d+)/i 
```

当我的代码使用它时，这会导致以下正则表达式

```
/Hello:\s*(\d+)/i 
```

这允许用户提供语言本地化，而不必担心弄清楚我的正则表达式在哪里使用、它是如何使用的，或者如果他们更改了某些内容是否会破坏脚本。

但是，如果他们想包含句点或问号之类的东西`Hello?`，我可能需要先将它们转义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T04:07:47.237

使用[`Regexp.escape`](https://ruby-doc.org/core/Regexp.html#method-c-escape)：

```
my_regex = /#{Regexp.escape(custom_text)}:\s*(\d+)/i 
```

例如：

```
>> puts /#{Regexp.escape('Hello?')}/.inspect
/Hello\?/ 
```

# php - 通过函数传递一个数组

> ID：12024104
> 
> 赞同：0
> 
> 时间：2012-08-19T03:58:05.660
> 
> 标签：php, mysql, html, arrays

我的网站以在线分类广告为特色，由 PHP 和 MySQL 编程。以下代码让管理员可以使用复选框工具删除多条记录。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" >   
  <table>
    <td><? echo $rows['CountryName']; ?></td>
    <td><input name="delete_items[]" type="checkbox" value="<?php echo $rows['id']; ?>" /></td>
  </table>
  <input type="submit" name="deleteSelected" value="Submit" >
</form>

<?php
if(isset($_POST['deleteSelected'])) {
$delete_items = join(', ', $_POST["delete_items"]);  
$query = "DELETE FROM $table_name WHERE id IN ($deleted_items)";    
$result = mysql_query($query);    
header("Location: admin.php"); }
?> 
```

当我按下提交按钮而不选中复选框（所有复选框都未选中）时，我收到以下错误消息（如果选中任何复选框，脚本运行良好，没有任何错误消息）：

警告：join() [function.join]：第 87 行 C:\xampp\htdocs\admin_listing.php 中传递的参数无效

我已经尝试了该`implode`功能而不是 using `join`，但我仍然收到一条错误消息。也许我没有正确地通过函数传递数组，但我找不到上述解决方案。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:47:14.410

谢谢大家帮忙，我通过添加一行代码找到了一个简单的解决方案，如下：

```
<?php 
if(isset($_POST['deleteSelected'])) { 
  if(isset($_POST["delete_items"][0])) {
    $delete_items = join(', ', $_POST["delete_items"]);   
    $query = "DELETE FROM $table_name WHERE id IN ($delete_items)";     
    $result = mysql_query($query);     
    header("Location: admin.php"); 
  }
 } 
?> 
```

希望它可以帮助别人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:01:21.780

看起来您正在将数据库中的*所有*记录显示到表单中的单个输入中。

正如您所尝试的那样，该代码可能会很好地工作`implode()`，但是您需要在表单的显示中使用循环以使用选项正确生成它。

像这样的东西：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" >   
    <table>
    <?php
    while($row=$databaseResult) //however you are getting the data out of the database.
    {
        echo "<tr><td>".$rows['CountryName']."</td><td><input name='delete_items[]' type='checkbox' value=".$rows['id']."/></td></tr>";
    }
    ?>
    </table>
    <input type="submit" name="deleteSelected" value="Submit" >
</form> 
```

# php - 自动更新 RSS Feed 到数据库

> ID：12024108
> 
> 赞同：-1
> 
> 时间：2012-08-19T03:59:18.927
> 
> 标签：php, rss

我正在寻找自动更新到数据库的RSS提要的代码。假设即使网站管理员一两天没有登录他的系统，它也需要更新并能够查看。怎么做?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T04:10:08.983

设置一个cronjob！- 如果您有自己的服务器，请查看 google 以了解如何根据您的配置进行操作。

除此之外，还有一些免费的 cronjob 提供者只是谷歌的 cronjob。

您设置执行时间和间隔 - 机器人触发然后您的网络服务器上的文件。当然，您的网络服务器上的文件应该被编码以在没有登录等情况下完成这项工作。

因此，一个适合您目的的简单 php 文件就可以了。

# c++ - 如何从二进制数据创建 QIcon？

> ID：12024112
> 
> 赞同：2
> 
> 时间：2012-08-19T04:00:05.470
> 
> 标签：c++, image, qt, jpeg

我有一个存储一些图像的自定义文件格式。我在程序运行期间将这些图像加载到内存中。图像以二进制格式加载（即与它们出现在磁盘上的方式相同）。我知道图像的格式（几乎都是 jpeg）。问题是我不知道宽度/高度，但我想显示图像而不将它们写入磁盘上的某个临时文件。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:10:20.420

您可以使用实际大小获取 qIcon 的大小

[http://qt-project.org/doc/qt-5.0/qicon.html#actualSize](http://qt-project.org/doc/qt-5.0/qicon.html#actualSize)

您不必将任何内容写入磁盘，只需将二进制文件读入 QIcon 之类的文件，这样您就可以使用 QTs 方法获取图像的宽度和高度。您只需要将数据放入其中一种 QT 数据结构中。

查看 QImage 和 QPixmap，我认为它们有读取二进制文件的方法。或者您可以在此处查看此 SO 帖子：[来自无符号字符缓冲区的 QImage (jpg 格式)](https://stackoverflow.com/questions/8474510/qimage-from-unsigned-char-buffer-jpg-format)

# visual-studio - 在 *.csproj 文件中不适用于 VS2012

> ID：12024114
> 
> 赞同：2
> 
> 时间：2012-08-19T04:01:12.137
> 
> 标签：visual-studio, unit-testing, visual-studio-2012

VS2012 附带以下 CodedUI Dll。我所做的只是将它们复制到一个单独的文件夹并从那里引用它们。我检查了 *.csproj 文件，它的正确信息如下。但是在 VS2012 属性窗口中，我检查了参考路径，它们仍然解析了默认位置，如 "D:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v4.0\Microsoft.VisualStudio.QualityTools .CodedUITestFramework.dll"

仅适用于以下 DLL 之一，即“Microsoft.VisualStudio.QualityTools.UnitTestFramework”。但是我看不出这个 DLL 的引用方式与其他 DLL 的引用方式有什么不同。

WTF这是怎么回事？

我看到其他人报告了一个关于 VS 2012 程序集绑定的错误。（http://social.msdn.microsoft.com/Forums/en/vsunittest/thread/ba271f86-ed33-49a5-9b52-99980e88d198）

但我使用的是RTM版本！

```
<Reference Include="Microsoft.VisualStudio.QualityTools.CodedUITestFramework, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
   <SpecificVersion>False</SpecificVersion>
   <HintPath>..\..\Microsoft.VisualStudio.QualityTools.CodedUITestFramework.dll</HintPath>
 </Reference>
 <Reference Include="Microsoft.VisualStudio.QualityTools.UnitTestFramework, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
   <SpecificVersion>False</SpecificVersion>
   <HintPath>..\..\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll</HintPath>
 </Reference>
 <Reference Include="Microsoft.VisualStudio.TestTools.UITest.Common, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
   <SpecificVersion>False</SpecificVersion>
   <HintPath>..\..\Microsoft.VisualStudio.TestTools.UITest.Common.dll</HintPath>
 </Reference>
 <Reference Include="Microsoft.VisualStudio.TestTools.UITest.Extension, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
   <SpecificVersion>False</SpecificVersion>
   <HintPath>..\..\Microsoft.VisualStudio.TestTools.UITest.Extension.dll</HintPath>
 </Reference>
 <Reference Include="Microsoft.VisualStudio.TestTools.UITesting, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
   <SpecificVersion>False</SpecificVersion>
   <HintPath>..\..\Microsoft.VisualStudio.TestTools.UITesting.dll</HintPath>
 </Reference> 
```

已向 MS Connect 提交票证： [https ://connect.microsoft.com/VisualStudio/feedback/details/758647/hintpath-in-csproj-file-doesnt-work-for-vs2012](https://connect.microsoft.com/VisualStudio/feedback/details/758647/hintpath-in-csproj-file-doesnt-work-for-vs2012)

# asp.net - 用于 ASP.NET（网站）的 windows 8 样式 API

> ID：12024126
> 
> 赞同：-1
> 
> 时间：2012-08-19T04:02:46.510
> 
> 标签：asp.net

我听说微软已经为 ASP.NET 发布了一个 Windows 8 风格（以前称为 Metro）API 有人知道吗？这叫什么？从哪里得到它？不幸的是，我没有关于该 API 的任何链接。我试过寻找它，但没有得到任何运气。我找到了一些 JQuery API，但我问的是微软自己做的那个。有没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T22:18:07.867

> 我希望有一种简单的方法可以创建“地铁外观”而无需重新发明任何轮子（如果已经有 API）

这不称为 API，通常称为主题：一组样式表和图像。

我认为您正在寻找[Metro UI CSS](http://metroui.org.ua/)。但这与微软关系不大。

# php - 数数 来自另一个页面的元素

> ID：12024129
> 
> 赞同：4
> 
> 时间：2012-08-19T04:03:32.640
> 
> 标签：php, wordpress

我有两个页面，页面 A 和页面 B。页面 A 将包含未知数量的无序列表元素。我无法控制有多少列表元素。

在页面 B 上，我想使用 PHP 从页面 A 中获取 li 的数量并显示该数字。这个想法是页面 A 将保存用户收藏的 Wordpress 帖子链接，而页面 B 将显示该数量的收藏夹。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:10:28.573

**[使用PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)**从另一个页面解析 html 。[下载](http://sourceforge.net/projects/simplehtmldom/files/latest/download?source=files)并包含到您的脚本中：

```
include('simple_html_dom.php');
$html = file_get_html('http://example.com/yourpage.php');
$licount = count($html->find('li')); // Here it is 
```

好的。看起来OP不需要使用服务器端代码。为此使用 javascript（不要忘记包含 jQuery）：

```
$(document).ready(function(){
    $.get("/favorites", function(data){
        $("#favorites").html($("li", $(data)).length)
    })
}) 
```

这将用/favorites 文件`#favorites`中的 s 数替换元素的内容`li`

# ruby - 如何使用 MiniTest::Mock 测试方法是否被调用

> ID：12024133
> 
> 赞同：4
> 
> 时间：2012-08-19T04:04:05.373
> 
> 标签：ruby, testing, mocking, minitest

我想测试当我将 Foo 模块包含到类中并调用“bar”时是否调用了一个方法，在这种情况下为“puts”。

```
require 'minitest/autorun'

module Foo
  def bar
    puts 'bar'
  end
end

class FooTest < MiniTest::Unit::TestCase
  def setup
    @class = Class.new do
      extend Foo
    end
  end

  def test_if_bar_method_calls_puts
    mock = MiniTest::Mock.new
    mock.expect(:puts, nil, ['bar'])
    @class.bar
    assert mock.verify
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-24T15:08:01.500

你可以这样做：

```
 def test_if_bar_method_calls_puts
    mock = MiniTest::Mock.new
    mock.expect(:puts, nil, ['bar'])
    @class.stub :puts, -> (arg) { mock.puts arg } do
      @class.bar
    end
    assert mock.verify
  end 
```

# javascript - 使用 Google Feeds API 在 jquery mobile 中使用“tap”自动生成提要列表

> ID：12024136
> 
> 赞同：1
> 
> 时间：2012-08-19T04:05:44.450
> 
> 标签：javascript, jquery, api, feed, tap

我在生成由列表项上的点击事件触发的提要项目列表（使用 Google Feeds API）时遇到问题。我可以在页面加载时调用该函数，效果很好。但是，当我尝试在“点击”事件上调用该函数时，如果生成一个空白页。

这是我要触发事件的列表项（我在其上调用“tap”事件）：

```
<li id="welstech" class="listFeeds">
        <a href="#">
         <img src="_images/welstech-logo-db.jpg" alt="WELSTech" />       
         <h2>WELSTech Podcast</h2>
         <p>Discussions about Tech & Ministry</p>
        </a>
       </li> 
```

这是我放在 html 页面底部的脚本：

```
 <script type="text/javascript>
    $(document).on('tap', '.listFeeds', function() {
    listAudioPosts("http://feeds.feedburner.com/welstech");
});
    </script> 
```

这是它调用的函数：

```
function listAudioPosts(feedurl){
    google.load("feeds", "1");
console.log("I'm still going 1");
    function initialize() {
console.log("I'm still going 2");
      var feed = new google.feeds.Feed(feedurl);
      feed.setNumEntries(10)
      var output = '<ul data-role="listview" data-split-icon="info">';
      var name = "welstech";
      feed.load(function(result) {
          if (!result.error) { 
              for (var i = 0; i < result.feed.entries.length; i++) {
                  var entry = result.feed.entries[i];
                  var mediaGroups = result.feed.entries[i].mediaGroups[0].contents[0];
                  var stripContentSnippet = entry.contentSnippet.replace(/[^a-zA-Z 0-9.:-]+/g,'');
                  var stripaContentSnippet = stripContentSnippet.replace('lt--pagingfilter--gt','');
                  output += '<li>';
                  output += '<a href="#">';
                  output += '<h2>' + entry.title + '</h2>';
                  output += '<p>' + stripaContentSnippet + '</p>';
                  output += '</a>';
                  output += '</li>';
                } // loop through all the feeds and create li elements
            } // end of if statement
            output += '</ul>';
            $("#testtouchoutput").html(output).trigger('refresh');
            $.mobile.changePage("#test");
        }); // end feed.load (function(result)
    } // end initialize function
    google.setOnLoadCallback(initialize);   
} 
```

我知道该函数有效，因为我可以在页面加载时使用我的 html 页面底部的此脚本调用它，见下文。我也知道该函数可以到达子函数initialize（），因为我可以看到该子函数之前的console.log输出，但不是它之后的输出：

```
<script type="text/javascript">
    listAudioPosts("http://feeds.feedburner.com/welstech");
</script> 
```

所以主页加载的第二个，函数运行并且页面刷新到我想要生成的列表......除了我想在“点击”事件上生成它。

我是一个相当新的 jquery 程序员，所以我确信这很明显。我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:11:04.990

您没有关闭.on，请尝试以下操作：

```
<script type="text/javascript>
    $(document).ready(function() {
        var timeTouched;
        $('.listFeeds').bind('touchstart', function() {
            timeTouched = new Date().getTime();
        }
        $('.listFeeds').bind('touchend', function() {
            if (new Date().getTime() - timeTouched < 200) { // Ended touch within 200 milliseconds, counts as a tap
                listAudioPosts("http://feeds.feedburner.com/welstech");
            }
        });
    });
</script> 
```

确保如果您的脚本位于定义 .listFeeds 元素的任何位置之上，则包含 $(document).ready() 部分，否则它将无法将事件绑定到该元素。

更新：点击似乎不是一个事件，更新了一个潜在的解决方案。

更新 2：尝试使用 .bind 而不是 .on。

# java - Android中的滑动标签

> ID：12024139
> 
> 赞同：0
> 
> 时间：2012-08-19T04:06:54.117
> 
> 标签：java, android, android-tabhost, android-actionbar, actionbarsherlock

我想要一个与 2.x 及更高版本兼容的滑动选项卡菜单。我希望它可以与 ActionBarSherlock 一起使用，以便它在不同设备上看起来不会有所不同。似乎有很多不同的方式来拥有选项卡和寻呼机，但 ABS 在 2.3 设备上运行的“ABS: Fragments”应用程序中显示“选项卡和寻呼机”的方式默认为旧样式的选项卡。我的 2.3 手机上有一些应用程序在有标签时会滑动，它们看起来像 ICS。对此有什么想法吗？

标签： [图片在这里](http://jgilfelt.github.com/android-actionbarstylegenerator/#name=example&compat=holo&theme=light&actionbarstyle=solid&backColor=E4E4E4,100&secondaryColor=D6D6D6,100&tertiaryColor=F2F2F2,100&accentColor=33B5E5,100)

# python - 如何从 wrap 定义实例方法

> ID：12024145
> 
> 赞同：0
> 
> 时间：2012-08-19T04:08:10.177
> 
> 标签：python, django

我在一个 django 网站上工作，想定义一些实例方法，如下所示。

```
Class Auth(models.Model):
    def wrap_has_perm(self, perm):
        def wrap():
            if self.is_staff and self.has_perm(perm):
                return True
            else:
                return False
    can_add_order = wrap_has_perm('finance.normal')

    can_review_order = wrap_has_perm('finance.review')

    is_leader = wrap_has_perm('finance.leader')

    is_finance = wrap_has_perm('finance.finance') 
```

我想使用`can_add_order`, `can_review_order`, `is_leader`,`is_finance`作为 django 管理站点的 list_display 元素。但是现在这些实例方法是非法的。（TypeError: wrap_has_perm() 正好需要 2 个参数（1 个给定））

我怎样才能实现这些方法？

如果我使用部分：

```
def staff_has_perm(self, perm):
        return self.is_staff and self.has_perm(perm)

    can_add_order = partial(staff_has_perm, perm='finance.normal')
    can_review_order = partial(staff_has_perm, perm='finance.review')
    is_leader = partial(staff_has_perm, perm='finance.leader')
    is_finance = partial(staff_has_perm, perm='finance.finance') 
```

它引发（*** TypeError：staff_has_perm() 正好需要 2 个参数（1 个给定））；我应该传递`self`给以及如何传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:10:45.723

移动`self`to`wrap()`的定义：

```
def wrap_has_perm(perm):
    def wrap(self): 
```

但是，一种更 Pythonic 的方法可能是使用`functools.partial`：

```
from functools import partial

class Auth(models.Model):
    def has_perm(self, perm):
        # ...

    can_add_order = partial(has_perm, perm='finance.normal')

    can_review_order = partial(has_perm, perm='finance.review')

    is_leader = partial(has_perm, perm='finance.leader')

    is_finance = partial(has_perm, perm='finance.finance') 
```

# iphone - 如何删除 iOS 应用程序附带的敏感信息

> ID：12024148
> 
> 赞同：1
> 
> 时间：2012-08-19T04:08:55.057
> 
> 标签：iphone, ios, xcode, build

我是一名新的 iOS 开发人员，正在开发一个带有装扮项目的应用程序，该项目没有典型的编译选项，如调试、发布、分发。所以我必须自己配置xcode的编译选项。这给我带来了一些困难。

该项目的源代码非常敏感，因为应用程序的竞争对手会对源代码信息感兴趣。要删除与源代码信息有关的信息，我需要帮助来配置 xode 的编译选项。例如，我可以通过使用仪器分析这个应用程序来找到函数的名称，即使我设置了关闭 xcode 的“生成调试符号”的选项，我也不知道如何删除它。

如何删除与源代码有关的整体信息？任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:19:55.703

看起来你正在尝试[混淆](https://en.wikipedia.org/wiki/Obfuscated_code)你的代码。看看[这个](https://stackoverflow.com/questions/6249148/how-to-encrypt-or-obfuscate-objective-c-code)关于混淆 Objective-C 代码的问题。混淆的问题在于，如果有人真的想要，可以将其反转，所以它可能比它的价值更麻烦。

# windows - 如何杀死除当前正在运行的批处理文件之外的所有批处理文件

> ID：12024149
> 
> 赞同：4
> 
> 时间：2012-08-19T04:09:14.243
> 
> 标签：windows, batch-file

您如何运行一个批处理文件，它会杀死当前正在运行的所有其他 cmd.exe，除了正在执行 task kill 命令的那个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T05:39:44.977

结合这两个线程：

1.  [如何从通过用户名和图像名过滤的命令行获取 PID](https://stackoverflow.com/questions/8435952/how-to-get-pid-from-command-line-filtered-by-username-and-imagename)
2.  [如何从 Windows 中的命令提示符获取自己的进程 pid](https://serverfault.com/questions/126502/how-to-get-own-process-pid-from-the-command-prompt-in-windows)

`akillfile.cmd`您可以在一个简单的 cmd 文件 ( )中写下这样的内容

```
title=dontkillme
FOR /F "tokens=2 delims= " %%A IN ('TASKLIST /FI ^"WINDOWTITLE eq dontkillme^" /NH') DO SET tid=%%A
echo %tid%
taskkill /F /IM cmd.exe /FI ^"PID ne %tid%^" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T05:27:58.893

复制 cmd.exe，将其重命名为 a.exe，然后在批处理文件中使用此命令： start a.exe /k taskkill /f /im cmd.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T20:13:41.710

这对我有用，添加到 .bat 的最开始，它会杀死所有先前启动的自身实例，然后立即使自己容易被同一个 .bat 文件的后续调用杀死：

```
title NewlyLaunchedThing
taskkill /F /IM cmd.exe /FI "WINDOWTITLE ne NewlyLaunchedThing"
title Thing

...do everything else 
```

请注意，显然，“title”是一个关键字，它设置了一个名为“WINDOWTITLE”的变量。

此外，“=”（等号）显然对于分配标题/WINDOWTITLE 是可选的。意思是，这也有效，并且为了清楚起见可能是首选：

```
title = newTitle 
```

# python - 解析python平面和嵌套列表/元组

> ID：12024151
> 
> 赞同：0
> 
> 时间：2012-08-19T04:10:00.747
> 
> 标签：python, list, parsing, tuples

我正在尝试解析表单的元组：

```
a=(1,2) 
```

或者

```
b=((1,2), (3,4)...) 
```

对于 a 的情况，代码将是：

```
x, y = a 
```

和 b 将是：

```
for element in b:
    x, y = element 
```

有没有一种快速而干净的方式来接受这两种形式？这是在 MIDI 接收回调中（x 是指向要运行的函数的指针，y 是要传递给灯光的强度数据）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:17:29.287

```
# If your input is in in_seq...
if hasattr(in_seq[0], "__iter__"):
    # b case
else:
    # a case 
```

这基本上检查输入序列的第一个元素是否是可迭代的。如果是，那么这是您的第二种情况（因为元组是可迭代的），如果不是，那么这是您的第一种情况。

如果您确定输入将是元组，那么您可以改用它：

```
if isinstance(in_seq[0], tuple):
    # b case
else:
    # a case 
```

根据您想要做什么，您对“a”情况的处理可能很简单，就像将单个元组捆绑在一个更大的元组中，然后在其上调用与“b”情况相同的代码，例如..

```
b_case = (a_case,) 
```

* * *

编辑：正如评论中指出的，更好的版本可能是......

```
from collections import Iterable
if isinstance(in_seq[0], Iterable):
    # ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T04:17:10.970

正确的方法是：

```
a = ((1,2),) # note the difference
b = ((1,2), (3,4), ...)

for pointer, intensity in a:
   pass # here you do what you want 
```

# c - C struct 字段赋值覆盖另一个字段

> ID：12024157
> 
> 赞同：1
> 
> 时间：2012-08-19T04:10:40.720
> 
> 标签：c, struct, field, variable-assignment

我正在编写一个梦幻足球选秀程序来取乐。

我遇到了一个奇怪的问题。我为一个`struct`字段分配了一个值，这种情况发生了，但它也将该值分配给`struct`. `printf`为凌乱的调试语句道歉。

我显然不了解有关`struct`现场分配的内容。

代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define TRUE 1

int QB_count = 0;
int RB_count = 0;
int WR_count = 0;
int TE_count = 0; 
int DEF_count = 0;

struct Player { 
    char *name;
    char *position;
    int age;
    int bye_week;
};

int get_name (struct Player *drafted) {
    char name[20];
    fputs("Enter Player Name: ", stdout);
    fflush(stdout);
    if (fgets(name, sizeof name, stdin) != NULL){
        char *newline = strchr(name, '\n');
        if (newline != NULL){
            *newline = '\0';
        }
        drafted->name = name;
        printf("You've drafted: %s\n", drafted->name);
    }
    return 0;
}

int get_position(struct Player *drafted){
    char position[20];
    int depth;
    char *nametemp = drafted->name;
    printf("nametemp: %s\n", nametemp);
    fputs("Enter Player Position in 'QB/RB/WR/TE/DEF' format: ", stdout);
        fflush(stdout);
        if (fgets(position, sizeof position, stdin) != NULL){
                char *newline = strchr(position, '\n');
                if (newline != NULL){
                        *newline = '\0';
                }
                drafted->position = position;

        if (strcmp(position, "QB") == 0){
            QB_count++;
            depth = QB_count;

        } else if (strcmp(position, "RB") == 0){
                        RB_count++;
                        depth = RB_count;

                } else if (strcmp(position, "WR") == 0){
                WR_count++;
                        depth = WR_count;

                } else if (strcmp(position, "TE") == 0){
                        TE_count++;
                        depth = TE_count;

                } else if (strcmp(position, "DEF") == 0){
                        DEF_count++;
                        depth = DEF_count;

                } else {
            printf("Please re-enter position information using the format 'QB' or 'qb'\n");
            get_position(drafted);
            return 0;
        }
        drafted->name = nametemp;
        printf("NAME: %s\n", drafted->name);
        printf("You've drafted %s at: %s%d\n", drafted->name, drafted->position, depth);
        }
        return 0;

}

int get_age (struct Player *drafted){
    return 0;
}

int get_bye_week (struct Player *drafted){
    return 0;
}

int main (){ 
    int stop = 0;
    char text[20];
    while (TRUE){
        struct Player drafted;
        printf("Welcome to the 2012 Draft Day Program\n");
        get_name (&drafted);
        printf("NAME_MAIN: %s\n", drafted.name);
        get_position(&drafted);
        printf("You've drafted %s at: %s\n", drafted.name, drafted.position);
        get_age(&drafted);
        get_bye_week(&drafted);
        fputs("Would you like to draft another player?\n" 
            "Enter '1' for no, '0' for yes\n", stdout);
        fflush(stdout);
        if(fgets(text, sizeof text, stdin)){
            int number;
            if (sscanf(text, "%d", &number) == 1){
                if (number == 1){
                    printf("Draft Ended!\n");
                    break;
                }       
            }
        }
    }
    return 0;
} 
```

结果输出是：

```
Welcome to the 2012 Draft Day Program
Enter Player Name: Aaron Rodgers
You've drafted: Aaron Rodgers
NAME_MAIN: Aaron Rodgers
nametemp: Aaron Rodgers
Enter Player Position in 'QB/RB/WR/TE/DEF' format: QB
NAME: QB
You've drafted QB at: QB1
You've drafted QB at: QB
Would you like to draft another player?
Enter '1' for no, '0' for yes
1
Draft Ended! 
```

为什么会`drafted.name`变成“QB”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T04:14:49.360

在您的`get_name`函数中，您分配给堆栈变量的`name`字段。`struct Player``name`

在这一行：

```
drafted->name = name; 
```

`name`在函数中声明，因此它的范围仅限*于*该函数。一旦`get_name`返回，变量就会超出范围，并尝试使用该内存调用未定义的行为。

您需要为`drafted->name`using分配空间，而不是使用简单的分配`malloc`，并使用 use`strncpy`来制作名称的副本。如果`strdup`可用，您可以使用它来分配空间并一步完成复制。或者，您可以在读取名称之前分配空间`drafted->name`，并使用它来代替`name`变量。

作为最后一个选项，如果您假设名称的最大长度 - 您当前的代码允许名称的字符串长度为`19`- 您可以简单地为每个声明一个该大小的数组`struct Player`：

```
struct Player
{ 
    char name[NAME_MAXLEN]; 
```

您在函数中的`position`字段存在相同的问题。`get_position`

# node.js - 直接调用绑定到导出对象的函数

> ID：12024159
> 
> 赞同：0
> 
> 时间：2012-08-19T04:10:54.637
> 
> 标签：node.js

我正在阅读[集群包](https://github.com/LearnBoost/cluster)`cluster.js`的文件，这部分让我感到困惑：

```
fs.readdirSync(__dirname + '/plugins').forEach(function(plugin){
  plugin = plugin.replace('.js', '');
  exports.__defineGetter__(plugin, function(){
    return require('./plugins/' + plugin);
  });
}); 
```

我知道您可以将对象或函数绑定到`exports`对象以将它们公开给不同的文件，但似乎它正在调用已绑定到对象的函数。但是，我一直认为您需要以`require`这种方式访问​​文件和访问功能。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:22:39.810

这是插件[延迟加载的实现。](http://en.wikipedia.org/wiki/Lazy_loading)只有在第一次使用他的名字访问模块属性后，插件才会被加载。`__defineGetter__`是 ECMAScript 标准中未提供的“语法糖”。它将对象的属性绑定到查找该属性时要调用的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:40:11.403

如果一个模块设置`exports`为单个函数而不是任意对象，那么结果`require`将是一个可以直接调用的函数引用（注意，函数实际上是一种对象，因此可以具有属性，也可以是职能）。

不过，这不是这里发生的事情。在执行您显示的代码时，`__defineGetter__`已经定义了一个名为的函数并将其附加到`exports`. 在这里，它只是作为一个方法被调用`exports`（大概是因为作者觉得没有必要为它创建一个冗余的本地名称）。

即沿线某处有类似的东西

```
exports.__defineGetter__ = function(propname, getter) {
...
} 
```

由于它没有本地名称，因此调用它的唯一方法是通过`exports`.

Obviously the purpose of the code here is to allow you to call `cluster.nameOfPlugin.method(...)` without having to manually `require` each plugin, while not requiring all the possible plugins to be preloaded; instead only the ones you actually use get loaded.

# php - PHP表数据输出不保留结构

> ID：12024161
> 
> 赞同：0
> 
> 时间：2012-08-19T04:12:02.353
> 
> 标签：php, mysql, sql, html-table, formatting

我有一个 mySQL 数据库，我正在使用 PHP 来抓取它并将其显示在 HTML 表中。它是这样设置的：

```
<table>
 <tr>
  <td>Title 1</td>
  <td>Title 2</td>
 </tr>

<?php

$i=0;
while ($i < $num) {

$col1=mysql_result($result,$i,"col1");
$col2=mysql_result($result,$i,"col2");

?>

 <tr>
  <td><?php echo $col1; ?></td>
  <td><?php echo $col2; ?></td>
 </tr>
</table>

<?php

  $i++;
  echo '<br />';
  }

?> 
```

问题：对于它提取的第一组数据，列与标题对齐。但是对于之后的每一个重复行，列都由一个空格分隔，并且不与它们的标题对齐。它看起来像这样：

```
Title 1       Title 2

col1          col2

col1 col2
col1 col2 
```

对不起，如果措辞令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:14:53.413

您正在关闭循环内的表格，尝试拉出`</table>`循环的外部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:14:38.750

您正在关闭循环内的表格。完成后需要关闭它。

```
<table>
 <tr>
  <td>Title 1</td>
  <td>Title 2</td>
 </tr>

<?php
    $i=0;
    while ($i < $num) 
    {
        $col1=mysql_result($result,$i,"col1");
        $col2=mysql_result($result,$i,"col2");
        ?>
         <tr>
          <td><?php echo $col1; ?></td>
          <td><?php echo $col2; ?></td>
         </tr>
        <?php
        $i++;
        echo '<br />';
    }
?>
</table> 
```

为了更加清楚，第一行按您的预期工作，因为您还没有关闭表格。

鉴于其他表格信息是在*没有*打开`<table>`标签的情况下发布的，您会认为它根本不会显示 -*但*现在大多数浏览器都会尝试即时更正 HTML，所以某些事情（比如打开时缺少表格标签) 显示就好像它前面有一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:14:41.023

将`</table>`移到最后一个 PHP 块之后。当您只想循环并创建新行时，您会反复关闭表格。保存表格的关闭，直到您完成 while 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T04:36:09.657

正如其他人所提到的。你的桌子在你的循环内关闭。我将所有 PHP 代码放在一起以避免与循环混淆。

```
 <table>
    <tr>
     <td>Title 1</td>
     <td>Title 2</td>
    </tr>

   <?php

   $num = $mysql_result->num_rows;
   for($i = 0; $i < $num; $i++) {
    $row = $mysql_result->fetch_assoc();
    echo '<tr>\n';
    echo '<td>'.$row['col1'].'</td>\n';
    echo '<td>'.$row['col2'].'</td>\n';
    echo '</tr>\n';
    echo '<br />';
   }
   ?>

   </table> 
```

# android - 如何宣传我的安卓应用程序？

> ID：12024162
> 
> 赞同：0
> 
> 时间：2012-08-19T04:12:09.217
> 
> 标签：android, ads, google-play

在 Android 开发者控制台中，只有我的免费应用程序才有“广告应用程序”参考。如何为销售的 Android 应用做广告？最好的广告地点在哪里？这个怎么运作？我应该总是在应用程序中插入一些代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:14:09.543

## Google I/O 2012：Google Play：面向开发者的营销 101：

[https://developers.google.com/live/shows/ahNzfmdvb2dsZS1kZXZlbG9wZXJzcg4LEgVFdmVudBibttMCDA/](https://developers.google.com/live/shows/ahNzfmdvb2dsZS1kZXZlbG9wZXJzcg4LEgVFdmVudBibttMCDA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:22:50.457

此外，如果您有其他应用程序（即，如果您使用 AdMob），请查看内部广告并[点击进行点击](http://tapfortap.com)

# qt - 从子元素更新 QMainWindow 父元素

> ID：12024163
> 
> 赞同：1
> 
> 时间：2012-08-19T04:12:33.410
> 
> 标签：qt

我定义了两个QMainWindows（A和B），并且B是从A初始化的。换句话说，B是A的孩子。
我需要根据B中的用户输入来更新A的元素，那么方法是什么从子窗口更新父窗口中的元素，因为显然我们无法跨窗口更新元素。

一个简单的示例，例如根据 B 中的输入在 A 中设置标签会很棒。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-19T04:20:33.560

使用信号和插槽来执行此操作，在您实例化任一 QMainWindows 之前将它们连接起来。

通常我会在主类中初始化所有窗口，以便设置信号和插槽。

//----- 更多信息在这里----//

当你创建一个新的 QWindow 项目时，你会得到一个 mainwindow.cpp 类，你需要做的是创建一个看起来相同的 childWindow.cpp 类，那么你的 main 函数如下所示：

```
 int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    ChildWindow child;
    connect(&w, SIGNAL(labelChanged),
            &child, SLOT(updateLabelChange));
    w.show();

    return a.exec();
} 
```

然后，您可以使用信号和插槽来控制它们。要记住的重要一点是您应该为每个窗口编写一个新类，因此您的子窗口应该有自己的类。希望有帮助。

# regex - O(n) 时间 O(1) 使用括号模式进行空间子字符串搜索

> ID：12024165
> 
> 赞同：1
> 
> 时间：2012-08-19T04:14:27.640
> 
> 标签：regex, language-agnostic, pattern-matching, substring

对于固定子字符串搜索，恰好有两种已知算法具有 O(n) 运行时间和 O(1) 工作空间：SMOA 和 Two-Way（参见[http://www-igm.univ-mlv.fr/~lecroq/字符串/](http://www-igm.univ-mlv.fr/~lecroq/string/) )。它们都依赖于对字母表进行排序或强加排序。

假设我不想搜索固定的子字符串，而是希望能够搜索用括号表达式表示的一组子字符串中的任何一个，例如

```
 [abc]d 
```

将匹配“ad”、“bd”或“cd”。假设字母表是有限的，任何括号的长度都是有界的，因此在时间或空间要求中任何形式为“括号长度”的项都是 O(1)。

有没有办法在 O(n) 时间内执行搜索（`n`要搜索的字符串的长度在哪里，即“干草堆”）和 O(1) 工作空间？

除非解决方案涉及以某种方式使用字母顺序对括号集进行排序，否则该问题的任何解决方案都将为 O(n)/O(1) 中的固定子字符串搜索问题提供新的解决方案，而无需排序要求，因此似乎不太可能存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:28:20.210

我肯定错过了什么。从您的链接页面中，蛮力方法是 O(n)。看起来你可以很容易地写出你正在寻找的东西：

```
1\.  Pattern is P with index p indicating which element of the pattern we are on.
2\.  String is S with index s indicating which element of the string we are on.
3\.  if S[s] matches P[p], increment both indicies and repeat until you complete the Pattern.
4\.  If S[s] doesn't match P[p], set p=0 and increment p. 
```

那将是 O(n) 并满足您的要求。

# c++ - 为什么cin提取运算符会导致段错误？

> ID：12024183
> 
> 赞同：3
> 
> 时间：2012-08-19T04:19:14.180
> 
> 标签：c++, segmentation-fault

```
#include <iostream>

using namespace std;

int main() {
    char * c;
    cin >> c;
    return 0;
} 
```

我正在尝试从长度未知的用户那里获取 C 字符串行。我知道如果我声明`c`为`char c[80]`而不是`char * c`then 它不会导致段错误。

但是，如果我不想将用户限制为`80 - 1`字符怎么办？我可以使用一个非常大的数字，但这只会浪费空间。

我也很想知道为什么上述程序会导致段错误。据我了解，`cin`提取运算符 ( `>>`) 知道`NULL`终止 C 字符串。究竟是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T04:21:34.753

程序段错误，因为指针`c`未初始化。在将数据读入缓冲区之前，您需要为缓冲区分配内存：

```
char * c = new char[80];
cin >> c;
cout << c << endl;
delete[] c; // Now you need to delete the memory that you have allocated. 
```

为避免将输入限制为`N`字符，请使用字符串。它们会根据您的需要动态调整大小：

```
string c;
cin >> c;
cout << c;
// You do not need to manage string's memory - it is done automatically 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T04:21:55.603

当您仅使用`char *c;`. 变量声明创建了一个`char`未初始化的指针。然后，您使用`cin`将字符串读入该空间。`c`可以指向*任何东西*，而且无论如何都会指向不属于你的记忆。

在尝试从`cin`.

如果您不想假设对字符串长度的限制，您可以循环和`realloc`更多空间，直到输入被完全读取，但如前所述，如果您使用`std::string`而不是 C 字符串，那么这将为您处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:22:38.957

那是因为您没有为字符串分配内存。

# android - Android 动画 canvas.drawLine

> ID：12024184
> 
> 赞同：0
> 
> 时间：2012-08-19T04:19:18.403
> 
> 标签：android, animation, android-canvas

我试图在`DrawView`which extends上画几条线`SurfaceView`。在我的`onDraw`方法中，我遍历一个浮点数组列表并画线。

```
@Override
public void onDraw(final Canvas canvas) {

    synchronized (lines) {
        super.onDraw(canvas);
        for (float[] l : lines) {
            paint.setAntiAlias(true);
            canvas.drawLines(l, paint);
        }

    }
} 
```

我想为每一行设置动画。`ViewAnimator`即使它只是 Honeycomb 及更高版本，我也尝试过使用，但要么我不明白如何使用它，要么它不适合与`canvas.drawLine()`. 我试过使用`paint.setPathEffect`，但它似乎根本不起作用。任何人都知道如何做到这一点？我只希望每条线花费大约 1 秒钟的时间来绘制一个接一个。

# php - PDO bindparams exec() 或使用 execute() 获取受影响的行

> ID：12024195
> 
> 赞同：2
> 
> 时间：2012-08-19T04:22:08.573
> 
> 标签：php, sql, pdo, sqlbindparameter

我有一个关于 PDO::exec() 和 bindparams 的问题。

exec($sql) 返回受影响的行数。但是你可以像prepare->bindParams()->execute()一样将参数绑定到exec()？

如果答案是否定的，您可以通过 prepare->bindParams()->execute() 中的任何技巧获得受影响的行？（我理解执行只返回真/假）

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:35:37.510

执行后，您可以从[PDOStatement 对象](http://www.php.net/manual/ru/class.pdostatement.php)中获取受影响的行：

```
$statement = $pdo->prepare($query);
$statement->bindParam(':param1', $value1);
$result = $statement->execute();
$affectedRows = $statement->rowCount(); 
```

# php - 尝试循环访问 MySQL 查询的结果时收到不推荐使用的评论错误

> ID：12024205
> 
> 赞同：1
> 
> 时间：2012-08-19T04:25:13.273
> 
> 标签：php, mysql, arrays, loops, deprecated

我正在尝试通过 PHP 循环遍历 MySQL 查询的结果。我的代码如下。

```
$list = mysql_fetch_array(mysql_query("SELECT * FROM proxies"));

for($i = 0; $i < 2000; $i++) {

  echo $list['address'];

} 
```

这将导致：“PHP 已弃用：以 '#' 开头的注释在 /etc/php5/cli/conf.d/ming.ini 的第 1 行中的第 0 行的未知中已弃用”。然而，当我尝试这个...

```
$list = mysql_fetch_array(mysql_query("SELECT * FROM proxies"));

for($i = 0; $i < 2000; $i++) {

  echo $list['id'];

} 
```

有用。那么数据库列一定有问题吗？此外，我进入`/etc/php5/cli/conf.d/ming.ini`并将`#`评论更改为`//`并重试运行我的脚本。它没有显示任何结果，也没有给出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:47:15.397

发现这个...

[http://www.howtoforge.com/debian-squeeze-apache2-php5-php-deprecated-comments-starting-with-are-deprecated-in-etc-php5-apache2-conf.d-ming.ini-on](http://www.howtoforge.com/debian-squeeze-apache2-php5-php-deprecated-comments-starting-with-are-deprecated-in-etc-php5-apache2-conf.d-ming.ini-on)

和这个....

[http://pravams.com/2011/08/18/php-deprecated-comments-starting-with-are-deprecated/](http://pravams.com/2011/08/18/php-deprecated-comments-starting-with-are-deprecated/)

尝试删除评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:42:25.477

更改`#`从此开始的所有评论：

```
# comment here 
```

至`//`：

```
// comment here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:43:05.673

快速说明：您的代码已弃用 mysql* 代码。

您需要进入 /etc/php5/cli/conf.d/ming.ini 并将那些 # 更改为 ; 我刚刚读到的一篇文章是这么说的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T05:43:18.360

注释问题不在你的代码问题中，在 php.ini 或 ming.ini 中使用；代替 ＃

# objective-c - SegmentControl 的标题在使用 UIAppearance 进行自定义后扭曲

> ID：12024207
> 
> 赞同：1
> 
> 时间：2012-08-19T04:25:58.513
> 
> 标签：objective-c, ios, ios5, custom-controls, uisegmentedcontrol

自定义后，文字位置歪了。。

![在此处输入图像描述](../Images/288ad329226c3c049095220df7a8a9e2.png)

用于自定义的代码：

```
+ (void)customiseSegmentControl {
UIImage *selectedImage = [[UIImage imageNamed:@"SegmentSelected.png"]
                    stretchableImageWithLeftCapWidth:5 topCapHeight:1];
UIImage *unselectedImage = [[UIImage imageNamed:@"SegmentUnselected.png"]
                    stretchableImageWithLeftCapWidth:5 topCapHeight:1];

[[UISegmentedControl appearance] setBackgroundImage:selectedImage forState:(UIControlStateSelected|UIControlStateHighlighted) barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setBackgroundImage:unselectedImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:15:35.090

[http://idevrecipes.com/2010/12/11/custom-segmented-controls/](http://idevrecipes.com/2010/12/11/custom-segmented-controls/)

检查此链接..和代码

```
NSArray *segmentTextContent = [NSArray arrayWithObjects:@"First",@"Second",@"Third",@"Forth", nil];
segmentedControl = [[UISegmentedControl alloc] initWithItems:segmentTextContent];
segmentedControl.frame = CGRectMake(2, 5, 316, 35);

[segmentedControl addTarget:self action:@selector(segmentAction)forControlEvents:UIControlEventValueChanged];
segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
segmentedControl.enabled = true;
segmentedControl.selectedSegmentIndex = 0;

// cutomize the font size inside segmentedControl
for (id segment in [segmentedControl subviews]) 
{
 for (id label in [segment subviews]) 
 {
    if ([label isKindOfClass:[UILabel class]])
    {
        [label setTextAlignment:UITextAlignmentCenter];
        [label setFont:[UIFont boldSystemFontOfSize:11]];
        //[label setTextColor:[UIColor greenColor]];
    }
 }           
} 
```

# java - 运营商 ！对于参数类型未定义布尔值

> ID：12024219
> 
> 赞同：1
> 
> 时间：2012-08-19T04:28:14.183
> 
> 标签：java, jsp, precompile

我正在尝试预编译我的 jsp，但出现以下错误。我不确定为什么会收到此错误。据我所知，从 JDK 1.5 开始，自动装箱会发生，这应该不是问题。我们使用 Jboss 4.1 的 Jasper，任何关于为什么会发生这种情况的见解都会对我们有所帮助。我只想确认两点。

1.  如果我们使用jdk > 1.5，那么这个问题是否会发生？
2.  我们如何验证我们正在使用的 jasper 版本？
3.  Japser 是否会在路径中使用 jdk 来编译 JSP？

同样有趣的事实是，当我们尝试预编译 JSP 时，就会发生这种情况。当我们在没有预编译的情况下进行部署时，该功能运行良好。这意味着 Jboss 能够毫无问题地进行编译，只是预编译失败了。

我对这个错误没有任何线索，请帮忙。

例外

> /opt/app/build//precompile/motor/testing/org/apache/jsp/presultblock/reading/readingdriver_jsp.java（第 116 行）[javac] Boolean isTest = false; [javac] ^^^^^ [javac] Type mismatch: cannot convert from boolean to Boolean [javac] ---------- [javac] 2\. /opt/app/build//precompile/中的错误motor/testing/org/apache/jsp/presultblock/reading/readingdriver_jsp.java（第 257 行）[javac] isTest = true; [javac] ^^^^ [javac] 类型不匹配：无法从布尔值转换为布尔值 [javac] ---------- [javac] 3\. /opt/app/build//precompile/motor 中的错误/testing/org/apache/jsp/presultblock/reading/readingdriver_jsp.java （在第 414 行） [javac] if(!isTest){ [javac] ^^^^^^^ [javac] 运算符！未定义参数类型 Boolean [javac] ---------- [javac] 3 个问题（3 个错误）

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:54:38.220

显然，您的 JBoss 4.1 使用的是 < 1.5 的 JDK。检查您的安装。

# php - 使用 php 和 JIRA SOAP API 为问题添加评论

> ID：12024224
> 
> 赞同：0
> 
> 时间：2012-08-19T04:29:38.990
> 
> 标签：php, jira

如何使用 PHP 和 Jura 的 SOAP API 向 JIRA 问题添加评论？我有连接并对其进行了测试以检索现有问题，一切运行良好，但是当我尝试 addComment 方法时，它返回：

> 致命错误：未捕获的 SoapFault 异常：[soapenv:Server.userException] org.xml.sax.SAXException: Bad types (class java.util.HashMap -> class com.atlassian.jira.rpc.soap.beans.RemoteComment) in / home/a7348186/public_html/jira.php:46 堆栈跟踪：
> #0 /home/a7348186/public_html/jira.php(46): SoapClient->__call('addComment', Array)
> #1 /home/a7348186/public_html/ jira.php(46): SoapClient->addComment('16VGN3ohoo', 'NTP->29', Array)
> #2 {main} 在第 46 行的 /home/a7348186/public_html/jira.php 中抛出

这是我的代码：

```
<?php
$emailplain = $_REQUEST['plain'];
$emailsubject = $_REQUEST['subject'];
$inputkey = $_REQUEST['key'];
$inputsumm = $_REQUEST['summ'];
$client = new SoapClient(NULL,
    array(
        "location" => "https://server.com/rpc/soap/jirasoapservice-v2?wsdl",
        "uri"      => "urn:xmethods-delayed-quotes",
        "style"    => SOAP_RPC,
        "use"      => SOAP_ENCODED
        ));
$token = $client->login("user", "pass");
$issueId = $inputkey;
$issue = $client->getIssue($token, $issueId);
echo("assignee:".$issue->assignee);
echo(" created:".$issue->created);
echo(" summary:".$issue->summary);
echo(" issueid:".$issue->key);
print $inputsumm;
$stringsummary = $issue->summary;

$string = $issue->summary;
$emailsubjectregexp = preg_replace('/[a-zA-Z]+/', '', $inputsumm);
$stringsumm = ('summary ~ "' . $emailsubjectregexp . '"');
$jqlstring = $stringsumm;

$searchjql = $client->getIssuesFromJqlSearch($token, $jqlstring, 100);
function printArray ($array, $devolver = false) {
    $stringa = '<pre>' . print_r($array, true) . '</pre>';
    if ($devolver) return $stringa;
    else echo $stringa;
}
printArray($searchjql);
print_r ($searchjql);
$key = $searchjql[0]->key;
echo $key;
$client->addComment($token, $key, array('body' => 'your comment'));
?> 
```

如果您注意到，最后一行包含执行我想要的代码，但没有运气。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:33:37.783

更改创建 Soap 客户端对象的方式，更改：

```
$client = new SoapClient(NULL,
    array(
        "location" => "https://server.com/rpc/soap/jirasoapservice-v2?wsdl",
        "uri"      => "urn:xmethods-delayed-quotes",
        "style"    => SOAP_RPC,
        "use"      => SOAP_ENCODED
        )); 
```

至：

```
$client = new SoapClient("https://jira.watchitoo.com/rpc/soap/jirasoapservice-v2?wsdl"); 
```

这应该有效。

完整添加评论代码：

```
$issueKey = "key-123";
$username= "JiraUser";
$password= "JiraPassword";
$jiraAddress = "https://your.jira.com/rpc/soap/jirasoapservice-v2?wsdl";
$myComment = "your comment";

$soapClient = new SoapClient($jiraAddress);
$token = $soapClient->login($username, $password);
$soapClient->addComment($token, $issueKey, array('body' => $myComment)); 
```

# c# - 如何生成列表 从 SQL 查询？

> ID：12024226
> 
> 赞同：26
> 
> 时间：2012-08-19T04:29:54.273
> 
> 标签：c#, sql, list, visual-studio-2005, dbcommand

如果我有一个`DbCommand`定义来执行类似的东西：

```
SELECT Column1 FROM Table1 
```

生成`List<String>`返回记录的最佳方法是什么？

没有 Linq 等，因为我使用的是 VS2005。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-19T04:34:49.563

我想这就是你要找的。

```
List<String> columnData = new List<String>();

using(SqlConnection connection = new SqlConnection("conn_string"))
{
    connection.Open();
    string query = "SELECT Column1 FROM Table1";
    using(SqlCommand command = new SqlCommand(query, connection))
    {
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                columnData.Add(reader.GetString(0));
            }         
        }
    }
} 
```

未经测试，但这应该可以正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T04:35:48.390

遍历项目并添加到集合中。您可以使用该[`Add`](http://msdn.microsoft.com/en-us/library/3wcytfd1)方法

```
List<string>items=new List<string>();
using (var con= new SqlConnection("yourConnectionStringHere")
{
    string qry="SELECT Column1 FROM Table1";
    var cmd= new SqlCommand(qry, con);
    cmd.CommandType = CommandType.Text;
    con.Open();
    using (SqlDataReader objReader = cmd.ExecuteReader())
    {
        if (objReader.HasRows)
        {              
            while (objReader.Read())
            {
              //I would also check for DB.Null here before reading the value.
               string item= objReader.GetString(objReader.GetOrdinal("Column1"));
               items.Add(item);                  
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-27T08:08:20.163

或嵌套列表（好的，OP 是针对单列的，这是针对多列的..）：

```
 //Base list is a list of fields, ie a data record
        //Enclosing list is then a list of those records, ie the Result set
        List<List<String>> ResultSet = new List<List<String>>();

        using (SqlConnection connection =
            new SqlConnection(connectionString))
        {
            // Create the Command and Parameter objects.
            SqlCommand command = new SqlCommand(qString, connection);

            // Create and execute the DataReader..
            connection.Open();
            SqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                var rec = new List<string>();
                for (int i = 0; i <= reader.FieldCount-1; i++) //The mathematical formula for reading the next fields must be <=
                {                      
                    rec.Add(reader.GetString(i));
                }
                ResultSet.Add(rec);

            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T19:15:48.840

其中返回的数据是一个字符串；您可以转换为不同的数据类型：

```
(from DataRow row in dataTable.Rows select row["columnName"].ToString()).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-04T14:26:36.253

如果您想查询所有列

```
List<Users> list_users = new List<Users>();
MySqlConnection cn = new MySqlConnection("connection");
MySqlCommand cm = new MySqlCommand("select * from users",cn);
try
{
    cn.Open();
    MySqlDataReader dr = cm.ExecuteReader();
    while (dr.Read())
    {
        list_users.Add(new Users(dr));
    }
}
catch { /* error */ }
finally { cn.Close(); } 
```

用户的构造函数将执行所有“dr.GetString(i)”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-03T11:12:17.630

此版本与@Dave Martin 的目的相同，但它更干净，可以获取所有列，并且如果您不想将其放在电子邮件、视图等上，则易于操作数据。

```
List<string> ResultSet = new List<string>();
using (SqlConnection connection = DBUtils.GetDBConnection())
{
    connection.Open();
    string query = "SELECT * FROM DATABASE";
    using (SqlCommand command = new SqlCommand(query, connection))
    {
        using (SqlDataReader reader = command.ExecuteReader())
        {
             while (reader.Read())
             {
                  var rec = new List<string>();
                  for (int i = 0; i <= reader.FieldCount - 1; i++)
                  {
                       rec.Add(reader.GetString(i));
                  }
                  string combined = string.Join("|", rec);
                  ResultSet.Add(combined);
             }
        }
    }
} 
```

# c++ - std::char_traits::assign() 的目的是什么？

> ID：12024228
> 
> 赞同：14
> 
> 时间：2012-08-19T04:30:54.007
> 
> 标签：c++, char, char-traits

```
void assign(char_type& to, char_type from); 
```

为什么你不能只使用赋值运算符而不是使用[这个函数](http://en.cppreference.com/w/cpp/string/char_traits/assign)？这是干什么用的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T05:29:46.423

每次使用 std::string 时，您实际上都会使用此函数 :)。std::string 实际上是 std::basic_string 的 typedef，定义为：

```
template< 
    class CharT, 
    class Traits = std::char_traits<CharT>, 
    class Allocator = std::allocator<CharT>
> class basic_string; 
```

（见此[）](http://en.cppreference.com/w/cpp/string/basic_string "这个")。请特别注意 Traits 模板参数。如果您愿意，Traits 模板参数允许您自定义字符串类行为的某些属性。这些属性之一是您进行分配时会发生什么。

这是一个示例用法。它将强制分配为小写。

```
#include <string>
#include <iostream>
#include <cctype>

struct ci_char_traits : public std::char_traits<char> {
    static void assign(char& r, const char& a)
    {
        r = std::tolower(a);
    }

    static char* assign(char* p, std::size_t count, char a)
    {
        for (std::size_t i = 0; i < count; ++i)
        {
            p[i] = std::tolower(a);
        }
    }
};

typedef std::basic_string<char, ci_char_traits> ci_string;

std::ostream& operator<<(std::ostream& os, const ci_string& str) {
    return os.write(str.data(), str.size());
}

int main()
{
    ci_string s1 = "Hello";

    // This will become a lower-case 'o'
    s1.push_back('O');

    // Will replace 'He' with lower-case 'a'
    s1.replace(s1.begin(), s1.begin()+2, 1, 'A');

    std::cout << s1 << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T05:05:29.137

这是因为字符特征是产生标准类（如字符串）变体的一种方式，而原始类型的运算符实际上可能不是您想要的。

例如，考虑一个存储不区分大小写字符串的类；您可能会`assign()`以一种为大写字母及其小写版本存储相同内容的方式实现。（就此而言，其他字符特征操作（例如相等）也必须被覆盖。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-12T22:52:15.693

您可以编写自己的字符类，并定义其`operator=`. 但是，您可能会发现使用基本字符类型（如`char`、`wchar_t`、或. 此类非类类型不允许您重载其运算符，因此提供了一种自定义一小组常见操作的方法（如其他答案中所建议的，例如，这可能允许不区分大小写的字符操作）。`char16_t``char32_t``char8_t``char_traits`

```
template < 
  class CharT, 
  class Traits = std::char_traits<CharT>, 
  class Allocator = std::allocator<CharT>
> class basic_string; 
```

`std::basic_string`是一个很好的例子；第二个模板参数`Traits`允许访问此类自定义。还要考虑第三个模板参数 ，`Allocator`它允许用户`std::basic_string`自定义它如何在内部分配内存。这可能会导致类似的问题：为什么不直接使用`operator new`？

不太重要，但也要注意 C++20 引入了第二个重载`std::char_traits<CharT>::assign`：

```
static constexpr char_type* assign(char_type* p, std::size_t count, char_type a); 
```

# mysql - Delphi Mysql Stored Procedure Single Quote Trouble

> ID：12024230
> 
> 赞同：1
> 
> 时间：2012-08-19T04:31:24.497
> 
> 标签：mysql, delphi, stored-procedures

I have Delphi application with mydac stored procedure component which takes an utf8 encoded xml file's content as string parameter. It works with navicat and other db managment programs when I put this xml content copy-paste from file to procedure like

```
CALL sp_saveit('<xml>garry&#39;s<otherdata> data data....</xml>); 
```

But when I try to call it from delphi it throws error

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CALL sp_saveit('<?xml version=\"1.0\" encoding="UTF-8"?><Main><Detail z') at line 1 
```

*Am following those steps:*

1.  delphi finds and reads file contents into a TStringStream with LoadfromFile `MyStream.LoadFromFile(Sp_xmlfile);`
2.  then am passing contents to stored procedure `T_ContentsSP.ParamByName('XmlFile').AsWideString := MyStream.DataString;`

Also I've tried to compress this data with delphi's zlib and send as blob, I've tried to change `&#39;` with ' but result was same.

How can I send a long string with single and double quotes inside as parameter for sp with delphi?

p.s : sorry for my english.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:56:06.613

From your post, I see that you tried to use a constant value (`I put this xml content copy-paste`) and a parameter (`T_ContentsSP.ParamByName('XmlFile')`). Also, try to show error text for the command you are used, and not for a different command.

When you are using parameters you does not need to do any special preparation. Data access components have transparently send parameter values to a DBMS. If they have tracing output, then check the trace, what library is sending to a DBMS. Parameter usage is always prefered agains literal usage !

When you are using a constant, then you should ([more](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)):

*   double each single quote inside of the constant and prepend it by '\'. So, a `'` will become `\''`.
*   double quotes rather not need a special handling.
*   probably disable macros handling, because '&' may be a macro specifier in the data access library.

# java - 哪个Java版本可以做机器人？

> ID：12024231
> 
> 赞同：0
> 
> 时间：2012-08-19T04:31:32.137
> 
> 标签：java

哪个版本的 JAVA 可以为移动硬件做机器人动作？
比如开关门，做机器人，关电。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:42:55.647

理论上，任何版本。实际上，这取决于您打算如何与硬件交互。

# c# - C# RabbitMQ 客户端线程安全

> ID：12024241
> 
> 赞同：16
> 
> 时间：2012-08-19T04:35:25.877
> 
> 标签：c#, multithreading, thread-safety, rabbitmq

```
ConnectionFactory factory = new ConnectionFactory {HostName = "localhost"};

using (IConnection connection = factory.CreateConnection())
using (IModel channel = connection.CreateModel())
{
    channel.QueueDeclare("hello", false, false, false, null);
    for (int i = 0; i < 100000; i++)
    {
        MemoryStream stream = new MemoryStream();

        var user = new User 
                       {
                           Id = i
                       };

        Serializer.Serialize(stream, user);

        channel.BasicPublish("", "hello", null, stream.ToArray());

    }

} 
```

我有上面的代码，我对线程安全很好奇。

我不确定，但我想`ConnectionFactory`是线程安全的。但是`IConnection`线程安全吗？我应该为每个请求创建一个连接吗？还是一个单一的持久连接？那么通道（`IModel`）呢？

另外，我应该将连接存储为 ThreadLocal 吗？或者我应该为每个请求创建一个连接？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-09T09:59:17.967

IConnection 是线程安全的，而 IModel 不是。通常，您应该努力在应用程序的整个生命周期内保持连接打开。如果您的消费者需要打开连接才能接收消息，则尤其如此。由于网络或代理故障，检测中断连接并从中恢复非常重要。我建议阅读 Videla 和 Williams 的“RabbitMQ in Action”，尤其是第 6 章“编写在失败中幸存的代码”。

现在换一个无耻的插件。我是[EasyNetQ](http://easynetq.com)的作者，它是 RabbitMQ 的高级 .NET API。它为您完成所有连接管理，如果网络或代理中断，它将自动重新连接并重建您的所有订阅者。它还提供开箱即用的集群和故障转移支持。试试看。

# javascript - 如何在 javascript 中创建这个简单的警报？

> ID：12024245
> 
> 赞同：0
> 
> 时间：2012-08-19T04:35:55.303
> 
> 标签：javascript, html, dreamweaver

我正在 Dreamweaver 中使用 HTML 和 JavaScript 创建一个简单的网站。在我的主页上，我想显示一个警报（每当我的主页加载时），上面写着“你好，你是第 12 号访客。欢迎来到我的网站！”。我希望这个访客号码在 home.html 的每个页面加载时都发生变化。

我基本上想要访客没有。存储在cookie中并增加编号。每次页面刷新时在 cookie 中加 1。

如何创建这样的警报？请帮忙。谢谢。

另外，我想知道我是否添加了此功能，它是网页上动态内容的示例，还是您必须创建数据库连接以及所有这些都是为了创建动态内容。这种创建 cookie 的想法不也是动态内容的一个例子吗？

编辑-1

我只想要那个。页面被访问了多少次。我是初学者，希望一切都很简单。我只想知道如何存储号码。cookie 中的访问次数，然后从该 cookie 中检索该值并将其显示在页面加载的警报中。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T04:42:13.390

如果您想存储访问者的数量，您需要使用后端脚本框架（PHP、Ruby、Rails、Python 等）将您的页面收到的访问次数存储在数据库中。显示实际数字的javascript很简单，用`alert('message');`

如果您只想要特定用户访问的次数，基于他们的本地信息，这里有一个简单的解决方案：

```
if (localStorage.numVisits)
    numVisits = localStorage.numVisits;
else
    numVisits = 0;

alert("Welcome, you have visited " + numVisits + " times before.");    

localStorage.numVisits++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T04:37:31.107

为此，您需要创建表格，并且每次会话开始时，您都需要在表格中增加 +1 并提醒访客编号。

表一样

```
 id : no
   -------
   1  : 3
   2  : 5 
```

和按摩一样

```
echo "
        <script type=\"text/javascript\">
        alert(\"Hello, you are visitor no. {$row["no"]}. Welcome to my site!\");
        </script>
    "; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T04:42:25.750

Cookie 始终是客户端的！你不能那样做。完成您正在寻找的最简单的方法是编写一个简单的 php 计数器，它从文件中读取一个数字 - 添加一个并在查看您的页面后立即将其写回。

查看谷歌以获取有关“计数器”的示例。

实际上，没有办法计算您拥有或拥有的所有访问者的客户端 - 客户端无法知道您的服务器被访问了 x 次；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-19T04:52:27.363

为了让您非常简单（不使用数据库），您可以将数字存储在服​​务器中的 .txt 文件中，并使用简单的脚本语言（如 PHP）将其以隐藏字段发送到客户端。每次 PHP 页面运行时，它都必须获取当前数字并增加它。像这样的东西：

```
$myFile = "counter.txt";
$fh = fopen($myFile, 'r');
$count = fgets($fh);
$count++;
fclose($fh);

$fh = fopen($myFile, 'w');
fwrite($fh, $count); // write the incremented counter
fclose($fh);

echo "<input type='hidden' id='counter' value='$count'>"; 
```

然后，您必须从 javascript（客户端）获取此计数器值并向用户发出警报。

```
var visitCount = document.getElementById('counter');
alert("Hello, you are visitor no. "+visitCount+". Welcome to my site!"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T04:42:26.873

您不能在 cookie 中保存全局页面查看次数。cookie 存储在一个用户的浏览器中，并且仅对该浏览器是本地的。所有 cookie 都可以显示在该单个浏览器中发生的页面浏览量。

所有查看者的页面查看计数必须在服务器级别完成，然后在请求页面时将信息放入页面。有一些免费的方法可以使用免费服务级别的服务（如[StatCounter](http://statcounter.com/) ）将页面查看计数放入页面。

或者，您必须在为页面提供服务的自己的服务器中实现一个计数器（计数可能存储在持久数据库中），然后在每次请求时将当前计数插入页面。对于页数信息，使用像 Statcounter 这样的服务可能是最简单的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-19T04:42:30.897

Cookie 不会在不同的访问者之间持久存在。要为每位访客提供访客编号，您需要在服务器上存储一些内容。如果您无法访问服务器端功能，请使用访客计数器 - [https://www.google.com/#hl=en&q=visitor+counter](https://www.google.com/#hl=en&q=visitor+counter)

# vim - 如何有选择地应用语法高亮

> ID：12024256
> 
> 赞同：1
> 
> 时间：2012-08-19T04:39:21.837
> 
> 标签：vim, vim-syntax-highlighting

我正在用 Vim 编写教程/书籍，我想关闭一段文本（本书的普通文本）的语法突出显示，并为代码示例重新激活它。

我已经用谷歌搜索了无止境，但我找不到一个简单的解决方案。我错过了什么吗？或者这在 Vim 中无法实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T04:59:54.793

你可以为你的书创建一个语法文件。

例如，您可以创建一个脚本：`~/.vim/syntax/tutor.vim`

```
"
" tutor.vim -- syntax file for my book/tutor
"
syn include @PY $VIMRUNTIME/syntax/python.vim
syn region pyBlock start="{{{" end="}}}" contains=@PY 
```

* * *

这是一个示例文件：

```
# File: intro.txt
# Date: 2012-08-19

blah, blah ...
So, I will show you some code:
{{{
    def hello():
        print "world"
}}}

# vim: set syn=tutor : 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T07:08:23.360

我为此编写了[SyntaxRange 插件](http://www.vim.org/scripts/script.php?script_id=4168)（我的主要用例是使用“diff”语法突出显示电子邮件中的补丁）。使用它，您可以`:[range]SyntaxIgnore`或`:[range]SyntaxInclude {filetype}`缓冲区的某些部分，或者，当部分以某些标记开始和结束时，定义动态部分以适应行数的变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T04:56:48.957

一边倒地思考……

在 Vim 中使用重组文本或 markdown 之类的东西并在 github 上渲染怎么样？这为您提供免费的版本管理。你可以有代码块。

# android - Android SDK 示例错误

> ID：12024259
> 
> 赞同：3
> 
> 时间：2012-08-19T04:40:19.497
> 
> 标签：android, sdk, sample

出于某种原因，Google 随 SDK 提供的示例总是有错误。在这种情况下，我似乎无法弄清楚是什么原因造成的。我试图从现有源创建一个新项目并导入 wifidirect 示例（android-sdk/samples/15/wifidirect）。现在，我一直在新课程中遇到问题。在示例中，它试图覆盖一个新的 view.OnClickListeners onCreate 方法，但它说它需要覆盖一个超类方法并且我应该删除覆盖符号。我也在其他一些课程中得到了这个。整个项目似乎都被窃听了。其他人有这个问题或已经能够弄清楚问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:43:16.787

我试过了，项目`WifiDirect`没有问题。请将您的 Java 环境设置为 1.6，而不是 1.5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T04:58:44.843

选择您的项目，按`ALT+Enter`OR`Right Click`并`Properties`在“属性”窗口中选择`Java Compiler`选项卡，然后选择`Enable The Java Specification`您可以更改 Java 版本的位置并更改为`1.6`如果是`1.6`则更改为`1.5`并按确定，然后再次更改为`1.6`确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T23:42:48.870

您可能需要安装正确版本的 API。

打开 SDK 管理器并安装缺少的所需 API 版本。

如果需要，重新打开开发环境、Eclipse 并更新 Android 开发。

然后清理项目，如果需要，重新构建示例项目。

更新这些后，错误应该会消失。

代码中仍然可能存在错误。

# javascript - 将 ExtJS 代理 AJAX 响应映射到模型

> ID：12024261
> 
> 赞同：0
> 
> 时间：2012-08-19T04:40:23.303
> 
> 标签：javascript, json, model-view-controller, web-applications, extjs

## 更新：

*这是我的阅读器/商店 -**不知道要向阅读器添加什么来完成这项工作***

```
Ext.define('YT.store.Videos', {
  extend: 'Ext.data.Store',
  model: 'YT.model.Video',
  autoLoad: true,
  proxy: {
    type: 'ajax',
    url: 'https://gdata.youtube.com/feeds/api/videos',
    reader: {
            type: 'json',
            root: 'feed',
            record: 'entry',
            successProperty: 'success'
     },
    listeners: {
      exception: function(store, response, app){
        console.log('exception...');
        console.log(response);
      }
    }
  }
}); 
```

* * *

**这是我的模型：**

```
Ext.define('YT.model.Video', {
  extend: 'Ext.data.Model',
  autoLoad: true,
  fields: [
    'title',
    'published',
    'content'
  ]
}); 
```

**这是一个示例响应：**

```
{
  version: '1.0',
  encoding: 'UTF-8',
  feed: {
    junk: 'blahblahblahblah',
    entry: [
      title: {
        $t: 'title'
      },
      content: {
        encoding: 'flash/application',
        src: 'http://youtube.com/watch?q=someCatVideo'
      },
      published: {
        $t: '12-28-2012'
      }
    ]
  }
} 
```

我不确定如何调和这两者。

**我试过了...**

```
Ext.define('YT.model.Video', {
  extend: 'Ext.data.Model',
  autoLoad: true,
  fields: [
    {name: 'title', mapping: 'title.$t'},
    {name: 'published', mapping: 'published.$t'},
    {name: 'content', mapping: 'content.src'}
  ]
}); 
```

## 奖金：

绝对寻找有关如何调试这些技术的实现的提示，我对 JavaScript MVC 相当陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:59:11.357

您在映射的正确轨道上，但您还需要定义一个阅读器，您可以在其中指定[您的记录](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json-property-root)在您返回的 JSON 中的位置 - 有关好的示例，请参阅官方文档。顺便说一句，谁认为 $t 是映射键的好主意？

**编辑**：编辑后，这里是您的工作代码：http: [//jsfiddle.net/dbrin/mSJg3/](http://jsfiddle.net/dbrin/mSJg3/)

至于调试：您的问题的关键是清楚地看到来自服务的有效负载（我使用 FireBug 检查返回的 JSON 对象）。然后通过映射属性映射您的模型类以适合 JSON 对象，最后调整 JSON 阅读器以使其知道如何导航您的 JSON 有效负载（请参阅我的代码示例）。一旦您的异常侦听器不再触发（再次参见代码示例），这意味着您将数据放入存储中。为了实际查看数据，我使用了 Illuminations firebug 插件来检查数据存储。我只看过一张唱片。有没有搞错？我观察到 id 属性被设置为一些时髦的 URL。这是默认情况下发生的，因为我没有在模型上指定 id 属性。我求助于将 idProperty 拆分为 undefined 来解决这种奇怪的行为（参见模型代码）。

我使用 jsfiddle 快速迭代更改并运行以查看阅读器中的错误。一旦我没有更多错误，我就让 jsfiddle 向我展示我刚刚构建的应用程序，这样我就可以通过使用 show/light url 来使用 Illuminations 插件：http: [//jsfiddle.net/dbrin/mSJg3/show/light/](http://jsfiddle.net/dbrin/mSJg3/show/light/)

# cordova - Xcode 4.1.1 使用 Phonegap 2.0.0 和 BarcodeScanner 插件崩溃

> ID：12024262
> 
> 赞同：1
> 
> 时间：2012-08-19T04:41:15.327
> 
> 标签：cordova, phonegap-plugins, llvm-gcc

在 Xcode 中“将文件添加到项目 ...”时，无论是 .mm 还是 .cpp，Xcode 都会暂停然后崩溃。

我安装了 Xcode 4.4.1 并正确设置了 Phonegap 2.0.0。我正在使用此主存储库中的 Phonegap BarcodeScanner 插件：

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)

我通过 Xcode -> (Target Build) -> Build Settings -> Build Options -> Compiler for C/C++/Objective-C将编译器从 Apple LLVM 4.0 更改为**LLVM GCC 4.2 。**

还正确添加了以下框架：

*   AVFoundation.framework
*   AssetsLibrary.framework
*   CoreVideo.framework
*   libiconv.dylib

BarcodeScanner 需要 4 个文件才能正常工作：

*   条码扫描器.js
*   CDVBarcodeScanner.mm
*   zxing-all-in-one.cpp
*   zxing-all-in-one.h

将“zxing-all-in-one.h”文件添加到我的插件文件夹并将“barcodescanner.js”添加到 www/ 目录后，一切都很好。只有在添加 .mm 或 .cpp 文件时 Xcode 才会崩溃。

我有另一台运行 Phonegap 1.7.0 和 Xcode 4.4 的 MacBook Pro，条形码扫描仪工作正常。Phonegap 2.0.0 发生了什么崩溃？我查看了常见问题解答和 README 文档，但找不到任何有用的东西。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:28:46.670

听起来像是您特定版本的 Xcode 中的错误。

在 Xcode 4.3.2 中对我来说非常好用。尝试下载旧版本的 Xcode 或最新的测试版。

# visual-studio-2010 - 当我使用 git 时，应该忽略作为 Visual Studio 项目一部分的 pdsyncu 和 pdsync 文件吗？

> ID：12024263
> 
> 赞同：0
> 
> 时间：2012-08-19T04:41:17.567
> 
> 标签：visual-studio-2010, visual-studio, git, version-control

此文件不包含在以前的问题中，例如

[将 Visual Studio 与 Git 结合使用时要忽略的文件](https://stackoverflow.com/questions/1677113/files-to-ignore-when-using-visual-studio-with-git)

和

[.gitignore 用于 Visual Studio 项目和解决方案](https://stackoverflow.com/questions/2143956/gitignore-for-visual-studio-projects-and-solutions)

但我不知道这些文件是否应该被忽略，有人对此有保证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:20:32.047

源代码是唯一应该提交的东西。您不希望将任何人工制品提交到您的存储库。确保您的工作流程不带有任何错误的假设。配置文件是另一回事。您想跟踪它们，但希望它们在不同的克隆上有所不同（尤其是连接字符串），具体取决于它们的环境（例如，CI 服务器与开发人员的机器）。对于这些情况，请考虑编写脚本或涂抹/清理脚本（progit.org/book 中的 git 属性章节）。

# javascript - 尝试学习 JavaScript，但我的页面没有任何效果

> ID：12024264
> 
> 赞同：0
> 
> 时间：2012-08-19T04:41:50.883
> 
> 标签：javascript

目标：

一个按钮，显示带有“Hello world！”的警报。以及一些无线电按钮在选择第三个按钮时显示警告。

的HTML：

```
<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title>hello world</title>
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="">
</head>
<body>
    <div id="main">
        <p>text</p>
        <a href="#">link</a>
        <button>button</button>
        <form>
            <fieldset>
                <legend>Legend</legend>
                    <label for="radio1">Option 1</label>
                        <input type="radio" name="radio-buttons" value="option-1" id="radio1"/>
                    <label for="radio2">Option 2</label>
                        <input type="radio" name="radio-buttons" value="option-2" id="radio2"/>
                    <label for="radio3">Option 3</label>
                        <input type="radio" name="radio-buttons" value="option-3" id="radio3"/>
                        <p id="warn">No, pick another one.</p>
            </fieldset>
        </form>
    </div>
    <script type="text/javascript" src="script.js"></script>
</body>
</html> 
```

CSS：

这大部分真的不重要。重要的是 #warn 应该只在选择第三个选项时显示。

```
a,
button {
    display: block;
    margin-bottom: 1em;
}

fieldset {
    width: 245px;
    height: 75px;
    background: #dfe;
    position: relative;
}

legend {
    background: white;
}

#warn {
    display: none;
    background: #d33;
    color: #fff;
    font-family: helvetica;
    padding: 10px 15px 10px;
    margin: 0 -12px;
    position: absolute;
    top: 52px;
    width: 239px;
} 
```

JavaScript：

我认为问题出在我的事件处理程序中，但我不确定。顺便说一句，是的，我知道这里有一些无关紧要的东西；就像我说的那样，我只是在胡闹。

```
// variables
var p        = document.getElementsByTagName("p");
var a        = document.getElementsByTagName("a");
var button   = document.getElementsByTagName("button");
var fieldset = document.getElementsByTagName("fieldset");

var radio1   = document.getElementById("radio1");
var radio2   = document.getElementById("radio2");
var radio3   = document.getElementById("radio3");

var warn     = document.getElementById("warn");

// functions
function prepareEventHandlers() {

    button.onclick = function() {
        alert("Hello world!")
    };

    radio3.onfocus = function() {
        warn.setAttribute("display","inherit")
    }
}

// window onload
window.onload = function() {
    prepareEventHandlers();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T04:46:34.527

注意函数的名称：

```
document.getElementsByTagName()
                // ^ That's an "s", so the function
                //   returns an array of elements. 
```

`button.onclick`不起作用，因为`button`是一组按钮（我会命名它`buttons`），所以你必须迭代：

```
for (var i = 0; i < button.length; i++) {
  button[i].onclick = ...
} 
```

由于您只有一个按钮，我只会给它一个`id`并使用它`document.getElementById()`来获取单个按钮并附加`onclick`处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T04:48:14.663

首先，像这样去按钮，

```
var button   = document.getElementsByTagName("button")[0]; 
```

`getElementsByTagName`返回匹配元素的数组...

对于单选按钮试试这个

`display`是一个`CSS`属性。用作不会隐藏或显示内容`display`。您必须使用属性`HTML attribute`访问属性。像，`CSS``style`

```
radio3.onclick = function() {
        warn.style.display = "inherit";
    } 
```

# javascript - 分别使用哪个？

> ID：12024265
> 
> 赞同：0
> 
> 时间：2012-08-19T04:41:55.257
> 
> 标签：javascript, jquery

我的理解是，以下两种用法都做同样的事情。一个比另一个更受欢迎吗？我的目标是用返回的数据创建一个表。谢谢

```
$.get('getList.php',
function (data)
{
    $.each(data, function(i, value) {console.log(value);})
    $(data).each(function(){console.log(this);});
    for(var i=0; i<data.length; i++) {console.log(data[i]);}
    for (i in data) {console.log(data[i]);}
},'json'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T04:45:18.817

鉴于这`data`将是一个 JS 对象而不是 DOM 元素，您应该使用：

```
$.each(data, ... 
```

因为`$.each()`旨在作为任何对象或数组的通用迭代器。

该`$(data).each(...`语法旨在遍历 jQuery 对象中包含的 DOM 元素。如果您创建一个包含但不是数组的 jQuery 对象，我想您会发现它`data`会运行一次迭代，返回整个对象，而不是每个属性一次迭代。如果是一个数组，它将遍历元素，但这并不是真正的预期用途。`data``$(data).each(...``data`

如果不是数组，则使用`for (i in data)`很好`data`（如果它是数组，则应该使用标准`for`循环而不是 a `for..in`），但是由于无论如何您都在使用 jQuery，`$.each()`除非存在性能问题，否则您最好坚持使用。

# c# - 在 Xbox360 上测试游戏？

> ID：12024266
> 
> 赞同：0
> 
> 时间：2012-08-19T04:42:10.383
> 
> 标签：c#, xna-4.0

我即将将我从一种语言制作的游戏转换为 XNA。我是否必须向 Microsoft 付费才能在我的 Xbox360 上进行测试？我不打算将其上传到市场。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:48:20.217

是的，需要付费会员才能在 Xbox 360 控制台上调试/测试 XNA 游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:18:03.647

您需要付费订阅才能将游戏部署到您的 Xbox。

除非你是学生，在这种情况下你可以注册一个学生帐户，这是免费的一年订阅（我相信你不能在市场上发布它）。

游戏应该可以在 PC 和 XBox 上运行，但硬件会有所不同，并且某些 XBOX Live 功能（例如头像）不会显示在 PC 调试中。

# ninject - 在 Ninject 中绑定泛型接口

> ID：12024277
> 
> 赞同：2
> 
> 时间：2012-08-19T04:43:43.687
> 
> 标签：ninject

因此，我已经挖了很长时间才找到答案，但没有运气。

我究竟做错了什么？

Ninject 使用以下消息引发异常：

```
Error activating IModelRepository{User}

No matching bindings are available, and the type is not self-bindable. 
```

这是我的代码：

我有一个通用接口：

```
public interface IModelRepository<T> where T: IModel
{
    //interface stuff here
} 
```

具体类是：

```
public UserRepository : IModelRepository<User>
{
    public UserRepository(IDocumentStore documentStore, string databaseName)
    {
        //constructor code here
    }
} 
```

Ninject 模块 Load():

```
public override void Load()
{
    string databaseName = Properties.Settings.Default.DefaultDatabaseName;

    Bind<IModelRepository<User>>()
        .To<UserRepository>()
        .WithConstructorArgument("documentStore", Kernel.Get<IDocumentStore>())
        .WithConstructorArgument("databaseName", databaseName);
} 
```

Ninject 实例化（这是发生异常的地方）：

```
Kernel = new Ninject.StandardKernel(new DIModules.ModelRepositoryModule()
                                   ,new DIModules.DocumentStoreModule()); 
```

这是完整的堆栈跟踪：

```
at Ninject.KernelBase.Resolve(IRequest request) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 359
at Ninject.ResolutionExtensions.GetResolutionIterator(IResolutionRoot root, Type service, Func`2 constraint, IEnumerable`1 parameters, Boolean isOptional, Boolean isUnique) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 263
at Ninject.ResolutionExtensions.Get[T](IResolutionRoot root, IParameter[] parameters) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 37
at xl.view.DIModules.DataStoreModule.Load() in c:\Users\Michael\Google Drive\Projects\Windows\xl\xl.view\DIModules\DataStoreModule.cs:line 18
at Ninject.Modules.NinjectModule.OnLoad(IKernel kernel) in c:\Projects\Ninject\ninject\src\Ninject\Modules\NinjectModule.cs:line 85
at Ninject.KernelBase.Load(IEnumerable`1 m) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 217
at Ninject.KernelBase..ctor(IComponentContainer components, INinjectSettings settings, INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 100
at Ninject.KernelBase..ctor(INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 57
at Ninject.StandardKernel..ctor(INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\StandardKernel.cs:line 46
at xl.view.Program.InitializeApplication() in c:\Projects\Windows\xl\xl.view\Program.cs:line 53
at xl.view.Program.Main() in c:\Windows\xl\xl.view\Program.cs:line 28 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T05:48:13.373

尝试更改模块的顺序，似乎顺序很重要，因为在绑定它们之前`IModelRepository<User>`不知道：`IModel``User`

```
Kernel = new Ninject.StandardKernel(
    new DIModules.DocumentStoreModule(),
    new DIModules.ModelRepositoryModule()); 
```

这对我很有效，这里是完整的示例： http: [//pastebin.com/2TjBqAwc](http://pastebin.com/2TjBqAwc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:19:01.047

```
 .WithConstructorArgument("documentStore", Kernel.Get<IDocumentStore>()) 
```

您可能希望将其更改为. 您调用它的方式是在模块期间创建对象- 这不应该是 casse - Moduel方法应该只是填充。**`ctx=>`** `Kernel.Get<IDocumentStore>()``Load()``Load()``Bind()`

此外，手头没有开发环境，但很确定应该有一种方法让默认配置负责将该 ctor 参数绑定到任何 DI 将解决的问题。

（如果以上都没有意义，你肯定需要提供比你更完整的堆栈跟踪）

# vb.net - 使用 vb.net 确定 Excel 文件是否仍处于打开状态

> ID：12024278
> 
> 赞同：0
> 
> 时间：2012-08-19T04:44:30.517
> 
> 标签：vb.net, excel

有没有办法确定 excel 文件是否在 vb.net 中打开？当我用我的程序打开某个文件并在关闭表单之前关闭excel文件时，我的表单根本不会关闭。任何形式的见解都会有所帮助，谢谢。

这控制表单上的关闭按钮

```
Private Sub Form_FormClosing(ByVal sender As System.Object, _
            ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing

    If (fileOpen = False) Then
        e.Cancel = False
    Else
        xlWorkbook.Save()
        xlApp.Quit()
    End If

End Sub 
```

所以我把它改成了这个，它出于某种原因工作

```
 Private Sub Form_FormClosing(ByVal sender As System.Object, _
         ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing

    If (fileOpen = False Or fileOpen = True) Then
        e.Cancel = False
    Else
        xlWorkbook.Save()
        xlApp.Quit()
    End If

End Sub 
```

当文件被选择并在 excel 中打开时，“fileOpen”设置为 True。我认为它不会被放回 False 除非它在 ​​Excel 关闭时自动执行？

# android - OpenGL ES Android 图像问题

> ID：12024279
> 
> 赞同：0
> 
> 时间：2012-08-19T04:44:46.680
> 
> 标签：android, opengl-es

我使用 OpenGL ES 为 Android 创建了一个 2d 游戏。我的图像在某些设备上如下图所示。可能是什么问题？

图像失真：

![在此处输入图像描述](../Images/646a99ef18fd50dde7f495e9ed4bbce7.png)

# casperjs - casperjs click() 一个表单元素来提交，等待，在下一页运行查询？

> ID：12024280
> 
> 赞同：17
> 
> 时间：2012-08-19T04:45:01.190
> 
> 标签：casperjs

我想点击一个提交按钮，等待下一页加载，然后在第二页上获取 html。我开始，然后运行，但 then 步骤仍然在第一页上运行。有任何想法吗？

```
var casper = require('casper').create();
var site = 'http://www.example.com';
var data = {}; 

casper.start(site, function() {
     this.evaluate(function() {
        $('input[type="submit"]:first').click();
    }); 
});

casper.then(function() {
    data.body = this.evaluate(function() {
        var rows = $('#content table:first tbody tr');
        var listings = rows.eq(3).text();
        var count = rows.eq(4).text();
        return {
            listings: listings,
            count: count
        };  
    }); 
});

casper.run(function() {
    this.echo(data.body.listings);
    this.exit();            
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T12:20:06.297

这只能部分解决您的问题，但您可以使用 waitFor 确认您已进入第二页。例如：

```
this.waitFor(function check() {
    return (this.getCurrentUrl() === PAGE_2_URL);
},
function then() { // step to execute when check() is ok
    this.echo('Navigated to page 2', 'INFO');
},
function timeout() { // step to execute if check has failed
    this.echo('Failed to navigate to page 2', 'ERROR');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-10T20:11:22.627

使用 waitForResource 来等待页面加载完成是个好主意，请参阅此处的[文档文档](http://docs.casperjs.org/en/latest/modules/casper.html#waitforresource)

例子：

```
casper.waitForResource(function checkAuth(validcredentials) {
                    return validcredentials;
                }, function onReceived() {
                    if (authTitle !== this.getTitle()) {
                        this.log('Autenticação realizada com sucesso, aguarde...');
                    } else { 
                        // this.capture('pic3.png');
                        this.log('Usuario ou senha invalidos!', 'ERROR');
                        this.die('User or password invalids!', 1); }
                }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T22:17:39.050

双击有类似的问题。确保实际触发了 click 事件。我怀疑这是在相同内容中运行下一步的原因。

# git - gitk 中的远程仓库

> ID：12024283
> 
> 赞同：3
> 
> 时间：2012-08-19T04:45:27.923
> 
> 标签：git

我正在尝试从[本教程](http://www.vogella.com/articles/Git/article.html)中以非常基本的水平学习 Git 。

我能够为我的项目创建一个本地存储库，添加文件并提交到它，将存储库克隆到远程存储库（使用`--bare`），然后将我的项目的更改推送到远程存储库。到现在为止还挺好。

现在，当我这样做时`gitk --all`，我可以正确地看到我的本地 git 历史记录，但它没有显示远程存储库。这是[我用来理解 gitk 的页面](http://lostechies.com/joshuaflanagan/2010/09/03/use-gitk-to-understand-git/)。

当我将远程存储库克隆到另一个目录中的新 Git 存储库时，我的所有文件都可用。所以远程存储库似乎工作正常。

应该在 gitk 中看到远程存储库吗？我不明白什么？如何获得远程存储库的视觉效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T04:50:43.277

尝试运行`git fetch`以更新远程存储库的本地“视图”，然后`gitk --all`再次运行。这应该会导致远程参考的标签也显示出来。

（请注意，这假设您已将远程存储库作为命名远程添加到本地存储库中。如果没有，您将无法使用 gitk 来查看远程指针。）

# git - 丢弃所有头部更改并在合并冲突上应用 FETCH_HEAD

> ID：12024284
> 
> 赞同：1
> 
> 时间：2012-08-19T04:45:47.727
> 
> 标签：git

我做了一个`git pull origin master`，大约有 50 个文件有冲突，是否可以在所有有冲突的文件`FETCH_HEAD`上自动应用部分并丢弃部分`HEAD`？

```
<<<<<<< HEAD
    | does not have to be set. If it isn't we'll try our best to guess the URL
=======
    | does not have to be set. If it isn't, we'll try our best to guess the URL
>>>>>>> FETCH_HEAD 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T04:48:07.120

是的。利用...

```
git checkout --theirs . 
```

...对当前目录中或之下的所有文件执行此操作。

# jquery - 允许在 jquery 中重复事件

> ID：12024285
> 
> 赞同：0
> 
> 时间：2012-08-19T04:45:49.893
> 
> 标签：jquery

我有一些在屏幕上提交操作的 jQuery 代码。但是，一旦事件结束，我就无法重复该动作。我尝试将`.live()`和附加`.on()`到代码上，但它不起作用。我不知道应该将哪个事件处理程序附加到选择器才能使其正常工作。代码如下。

```
$(document).ready(function() {
 $('#form1').hover(function(){
    $('#button1').css("display", "block");
    $(this).fadeIn(500);
    },
   function(){
    $('#button1').css("display", "none");
    $(this).fadeOut(500);}     
    );

<form action="" id="form1" method="post">
<textarea id="inputbox1"  name="what_i_do"></textarea>
<input type="submit" id="button1" value="Edit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:54:06.207

当鼠标离开时，您会淡出表单`$(this).fadeOut(500);`，使其不可见，然后就无法再次将鼠标移到它上面。你需要重新考虑你想要做什么。

为了让一个对象接收鼠标事件，它不可能是`display: none`对象在`fadeOut()`.

您可以将不透明度设置为零，使其不可见，但在页面中保留它的空间并且它仍然可以获取鼠标事件：

```
$('#form1').hover(function() {
    $('#button1').show();
    $(this).animate({opacity: 1}, 500);
},
function() {
    $('#button1').hide();
    $(this).animate({opacity: 0}, 500);
}); 
```

我还将按钮上的操作更改为`.hide()`，`.show()`因为它们是您正在执行的操作的快捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T04:54:45.270

一旦使用 .fadeOut() 隐藏元素，就无法再触发悬停事件，因为元素本身是 display:none，它无法神奇地知道元素应该在哪里。

不要使用 .fadeOut，而是使用 .css('opacity', '0')，并使用 css3 创建动画。

Javascript：

```
$(document).ready(function() {
 $('#form1').hover(function(){
    $(this).css('opacity', '1');
    },
   function(){
    $(this).css('opacity', '0');
   });
}); 
```

CSS：

```
form {
   -webkit-transition: all 500ms ease-in-out;
   -moz-transition: all 500ms ease-in-out;  
   -o-transition: all 500ms ease-in-out;  
}​ 
```

这是一个 jsfiddle 示例：http: [//jsfiddle.net/F2taJ/](http://jsfiddle.net/F2taJ/)

# c++ - 使用 __attribute__aligned() 或 alignas() 对齐对象数组？

> ID：12024286
> 
> 赞同：4
> 
> 时间：2012-08-19T04:46:08.930
> 
> 标签：c++, caching, compiler-optimization, memory-alignment

快速提问伙计们......这些代码尖刺是否具有相同的对齐方式？

```
struct sse_t {
     float sse_data[4];
};

// the array "cacheline" will be aligned to 64-byte boundary
struct sse_t alignas(64) cacheline[1000000]; 
```

或者

```
// every object of type sse_t will be aligned to 64-byte boundary
struct sse_t {
     float sse_data[4];
} __attribute((aligned(64)));

struct sse_t cacheline[1000000]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T05:12:26.027

> 这些代码尖晶石是否具有相同的对齐方式？

不完全的。你的两个例子实际上是非常不同的。

在您的第一个示例中，您将获得一个对象数组`sse_t`。一个`sse_t`对象只保证 4 字节对齐。但由于整个数组对齐到 64 字节，每个`sse_t`对象都将正确对齐以进行 SSE 访问。

在您的第二个示例中，您强制每个`sse_t`对象对齐到 64 字节。但是每个`sse_t`对象只有 16 个字节。所以数组将大 4 倍。`sse_t`（您将在每个对象的末尾有 48 个字节的填充）。

* * *

```
struct objA {
     float sse_data[4];
};
struct objB {
     float sse_data[4];
} __attribute((aligned(64)));

int main(){
    cout << sizeof(objA) << endl;
    cout << sizeof(objB) << endl;
} 
```

输出：

```
16
64 
```

我很确定第二种情况**不是**你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-16T16:26:44.967

但是为什么要对齐到 64 字节呢？ [http://ideone.com/JNEIBR](http://ideone.com/JNEIBR)

```
#include <iostream>
using namespace std;

struct sse_t1 {
     float sse_data[4];
};

// the array "cacheline" will be aligned to 64-byte boundary
struct sse_t1 alignas(64) cacheline1[1000000];

// every object of type sse_t will be aligned to 64-byte boundary
struct sse_t2 {
     float sse_data[4];
} __attribute((aligned(64)));

struct sse_t2 cacheline2[1000000];

int main() {
    cout << "sizeof(sse_t1) = " << sizeof(sse_t1) << endl;
    cout << "sizeof(sse_t2) = " << sizeof(sse_t2) << endl;  

    cout << "array cacheline1 " << (((size_t)(cacheline1) % 64 == 0)?"aligned to 64":"not aligned to 64") << endl;
    cout << "array cacheline2 " << (((size_t)(cacheline2) % 64 == 0)?"aligned to 64":"not aligned to 64") << endl;    

    cout << "cacheline1[0] - cacheline1[1] = " << (size_t)&(cacheline1[1]) - (size_t)&(cacheline1[0]) << endl;
    cout << "cacheline2[0] - cacheline2[1] = " << (size_t)&(cacheline2[1]) - (size_t)&(cacheline2[0]) << endl;  

    return 0;
} 
```

输出：

```
sizeof(sse_t1) = 16
sizeof(sse_t2) = 64
array cacheline1 aligned to 64
array cacheline2 aligned to 64
cacheline1[0] - cacheline1[1] = 16
cacheline2[0] - cacheline2[1] = 64 
```

# ruby - data_mapper、attr_accessor 和序列化只序列化属性而不是 attr_accessor 属性

> ID：12024298
> 
> 赞同：2
> 
> 时间：2012-08-19T04:48:52.187
> 
> 标签：ruby, sinatra, ruby-datamapper, attr-accessor

我正在使用 data_mapper/sinatra 并尝试使用 attr_accessor 创建一些属性。以下示例代码：

```
require 'json'
class Person
  include DataMapper::Resource

  property :id,          Serial
  property :first_name,  String
  attr_accessor  :last_name
end

ps = Person.new
ps.first_name = "Mike"
ps.last_name = "Smith"
p ps.to_json 
```

产生这个输出：

```
"{\"id\":null,\"first_name\":\"Mike\"}" 
```

显然，我希望它同时给我名字和姓氏属性。关于如何让它以人们期望的方式工作的任何想法，以便我的 json 具有所有属性？

另外，请随时解释为什么我的期望（我会得到所有属性）是不正确的。我猜一些内部属性列表没有添加 attr_accessor 实例变量或其他东西。但即便如此，为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:34:08.530

Datamapper 有它自己的序列化库，它为任何 Datamapper 资源[`dm-serializer`](https://github.com/datamapper/dm-serializer)提供方法。`to_json`如果您`require 'data_mapper'`在代码中需要 Datamapper，则您正在使用需要 dm-serializer 作为其一部分的meta [`data_mapper`-gem](https://github.com/datamapper/data_mapper)[设置](https://github.com/datamapper/data_mapper/blob/4d565b51d46f736b7092598a5a3d8a6d5361f572/lib/data_mapper.rb#L7)。

提供的`to_json`方法`dm-serializer`仅序列化对象的 Datamapper 属性（即您使用 指定的那些`property`），而不是“普通”属性（您使用 定义的`attr_accessor`）。这就是为什么你得到`id`但`first_name`不是`last_name`。

为了避免使用`dm-serializer`，您需要明确要求您需要的那些库，而不是依赖`data_mapper`. 你至少需要`dm-core`，也许还有其他人。

“普通”库在对象的默认调用`json`中不包含任何属性，它只是使用 objects方法。所以在这种情况下，如果你用 替换，你会得到类似的东西。`to_json``to_s``require 'data_mapper'``require 'dm-core'``"\"#<Person:0x000001013a0320>\""`

要创建您自己的对象的 json 表示，您需要创建自己的`to_json`方法。一个简单的例子是在 json 中硬编码你想要的属性：

```
def to_json
  {:id => id, :first_name => first_name, :last_name => last_name}.to_json
end 
```

您可以创建一个查看对象属性和属性的方法，并从中创建适当的 json，而不是通过这种方式对其进行硬编码。

请注意，如果您创建自己的`to_json`方法，您仍然可以调用`require 'data_mapper'`，您`to_json`将替换`dm-serializer`. 实际上`dm-serializer`还添加了一个[`as_json`方法](https://github.com/datamapper/dm-serializer/blob/v1.2.0/lib/dm-serializer/to_json.rb#L18)，您可以使用它来创建组合`to_json`方法，例如：

```
def to_json
  as_json.merge({:last_name => last_name}).to_json
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:08:36.153

感谢马特，我做了一些挖掘并找到了 dm-serializer 的 to_json 方法的 :method 参数。他们的 to_json 方法相当不错，基本上只是 as_json 辅助方法的包装器，所以我通过添加几行来覆盖它：

```
 if options[:include_attributes]
    options[:methods] = [] if options[:methods].nil?
    options[:methods].concat(model.attributes).uniq!
  end 
```

完成的方法覆盖如下所示：

```
module DataMapper
  module Serializer

    def to_json(*args)
      options = args.first
      options = {} unless options.kind_of?(Hash)

      if options[:include_attributes]
        options[:methods] = [] if options[:methods].nil?
        options[:methods].concat(model.attributes).uniq!
      end

      result = as_json(options)

      # default to making JSON
      if options.fetch(:to_json, true)
        MultiJson.dump(result)
      else
        result
      end
    end

  end
end 
```

这与我添加到与我的模型一起使用的基本模块中的属性方法一起使用。相关部分如下：

```
module Base

  def self.included(base)
    base.extend(ClassMethods)
  end

  module ClassMethods

    def attr_accessor(*vars)
      @attributes ||= []
      @attributes.concat vars
      super(*vars)
    end

    def attributes
      @attributes || []
    end
  end

  def attributes
    self.class.attributes
  end

end 
```

现在我原来的例子：

```
require 'json'
class Person
  include DataMapper::Resource
  include Base

  property :id,          Serial
  property :first_name,  String
  attr_accessor  :last_name
end

ps = Person.new
ps.first_name = "Mike"
ps.last_name = "Smith"
p ps.to_json :include_attributes => true 
```

使用新的选项参数按预期工作。

为了有选择地获得我想要的属性而不必做额外的工作，我可以做的就是将属性名称传递给 :methods 参数。

```
p ps.to_json :methods => [:last_name] 
```

或者，因为我已经`Base`上课了：

```
p ps.to_json :methods => Person.attributes 
```

现在我只需要弄清楚我想如何支持集合。

# node.js - 运行 Meteor 捆绑包的 Raspberry Pi 引发调用堆栈异常

> ID：12024301
> 
> 赞同：1
> 
> 时间：2012-08-19T04:49:45.137
> 
> 标签：node.js, mongodb, meteor, raspberry-pi, mlab

我已经在 Raspberry Pi 上安装了 Node.js，并尝试在其上运行 Meteor.js 排行榜示例。我已将其捆绑并复制到 Pi。我已经设置了我的 MONGO_URL 和 npm 安装的 Fiber（经过一些麻烦）。当我尝试运行时：

```
$ node main.js 
```

我得到一个`Maximum call stack size exceeded`例外。

```
 /home/pi/bundle/server/server.js:143
  }).run();
  ^
  RangeError: Maximum call stack size exceeded 
```

我运行命令`--trace`并得到了这个：

```
 /home/pi/bundle/server/server.js:143
  1: GetLineNumber+56(this=0x4e92928d <JS Object>, 0x26693f79 <JSMessageObject>) {
  2:  ScriptLocationFromPosition+64(this=0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636, 0x4e9080a1 <true>) {
  3:   ScriptLineFromPosition+60(this=0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636) {
  4:    ScriptLineCount+40(this=0x26693f25 <a Script value = 0x4e953839 <Script>>) {
  4:    } -> 151
  4:    SUB+48(this=151, 1) {
  4:    } -> 150
  4:    ADD+52(this=0, 150) {
  4:    } -> 150
  4:    SAR+48(this=150, 1) {
  4:    } -> 75
  4:    ADD+52(this=75, 1) {
  4:    } -> 76
  4:    SUB+48(this=146, 1) {
  4:    } -> 145
  4:    SUB+48(this=146, 1) {
  4:    } -> 145
  3:   } -> 142
  3:   SUB+48(this=142, 1) {
  3:   } -> 141
  3:   ADD+52(this=4630, 1) {
  3:   } -> 4631
  3:   SUB+48(this=4642, 1) {
  3:   } -> 4641
  3:   charAt+48(this=0x3735a0cd <Very long string[4703]>, 4641) {
  3:   } -> 0x37324625 <String[1]: ;>
  3:   SUB+48(this=4636, 4631) {
  3:   } -> 5
  3:   ADD+52(this=142, 0) {
  3:   } -> 142
  3:   new SourceLocation+40(this=0x26694b99 <a SourceLocation>, 0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636, 142, 5, 4631, 4642) {
  3:   } -> 0x4e908091 <undefined>
  2:  } -> 0x26694b99 <a SourceLocation>
  2:  ADD+52(this=142, 1) {
  2:  } -> 143
  1: } -> 143
  /home/pi/bundle/server/server.js:143
  1: GetSourceLine+56(this=0x4e92928d <JS Object>, 0x26693f79 <JSMessageObject>) {
  2:  ScriptLocationFromPosition+64(this=0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636, 0x4e9080a1 <true>) {
  3:   ScriptLineFromPosition+60(this=0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636) {
  4:    ScriptLineCount+40(this=0x26693f25 <a Script value = 0x4e953839 <Script>>) {
  4:    } -> 151
  3:   } -> 142
  3:   charAt+48(this=0x3735a0cd <Very long string[4703]>, 4641) {
  3:   } -> 0x37324625 <String[1]: ;>
  3:   new SourceLocation+40(this=0x26694ce5 <a SourceLocation>, 0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636, 142, 5, 4631, 4642) {
  3:   } -> 0x4e908091 <undefined>
  2:  } -> 0x26694ce5 <a SourceLocation>
  2:  SourceLocationRestrict+60(this=0x26694ce5 <a SourceLocation>, 0x4e908091 <undefined>, 0x4e908091 <undefined>) {
  3:   SUB+48(this=78, 10) {
  3:   } -> 68
  3:   SUB+48(this=4642, 4631) {
  3:   } -> 11
  2:  } -> 0x4e908091 <undefined>
  2:  SourceLocationSourceText+40(this=0x26694ce5 <a SourceLocation>) {
  3:   substring+64(this=0x3735a0cd <Very long string[4703]>, 4631, 4642) {
  3:   } -> 0x26694d29 <String[11]:   }).run();>
  2:  } -> 0x26694d29 <String[11]:   }).run();>
  1: } -> 0x26694d29 <String[11]:   }).run();>
 }).run();
  1: GetPositionInLine+56(this=0x4e92928d <JS Object>, 0x26693f79 <JSMessageObject>) {
  2:  ScriptLocationFromPosition+64(this=0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636, 0x4e9080b1 <false>) {
  3:   ScriptLineFromPosition+60(this=0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636) {
  4:    ScriptLineCount+40(this=0x26693f25 <a Script value = 0x4e953839 <Script>>) {
  4:    } -> 151
  3:   } -> 142
  3:   charAt+48(this=0x3735a0cd <Very long string[4703]>, 4641) {
  3:   } -> 0x37324625 <String[1]: ;>
  3:   new SourceLocation+40(this=0x26694d71 <a SourceLocation>, 0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636, 142, 5, 4631, 4642) {
  3:   } -> 0x4e908091 <undefined>
  2:  } -> 0x26694d71 <a SourceLocation>
  2:  SourceLocationRestrict+60(this=0x26694d71 <a SourceLocation>, 0x4e908091 <undefined>, 0x4e908091 <undefined>) {
  2:  } -> 0x4e908091 <undefined>
  2:  SUB+48(this=4636, 4631) {
  2:  } -> 5
  1: } -> 5
  1: GetPositionInLine+56(this=0x4e92928d <JS Object>, 0x26693f79 <JSMessageObject>) {
  2:  ScriptLocationFromPosition+64(this=0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636, 0x4e9080b1 <false>) {
  3:   ScriptLineFromPosition+60(this=0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636) {
  4:    ScriptLineCount+40(this=0x26693f25 <a Script value = 0x4e953839 <Script>>) {
  4:    } -> 151
  3:   } -> 142
  3:   charAt+48(this=0x3735a0cd <Very long string[4703]>, 4641) {
  3:   } -> 0x37324625 <String[1]: ;>
  3:   new SourceLocation+40(this=0x26694e7d <a SourceLocation>, 0x26693f25 <a Script value = 0x4e953839 <Script>>, 4636, 142, 5, 4631, 4642) {
  3:   } -> 0x4e908091 <undefined>
  2:  } -> 0x26694e7d <a SourceLocation>
  2:  SourceLocationRestrict+60(this=0x26694e7d <a SourceLocation>, 0x4e908091 <undefined>, 0x4e908091 <undefined>) {
  2:  } -> 0x4e908091 <undefined>
  1: } -> 5
  ^
  1: ToString+40(this=0x4e92928d <JS Object>, 0x4e908091 <undefined>) {
  1: } -> 0x373080bd <String[9]: undefined>
  1: getter+40(this=0x26693e85 <a RangeError>) {
  2:  +40(this=0x4e908091 <undefined>, 0x4e96824d <a RangeError>) {
  3:   FormatMessage+72(this=0x4e908091 <undefined>, 0x26694ed5 <JSMessageObject>) {
  4:    ADD+52(this=0, 1) {
  4:    } -> 1
  4:    ADD+52(this=1, 0) {
  4:    } -> 1
  4:    ADD+52(this=0, 2) {
  4:    } -> 2
  4:    FormatString+64(this=0x4e908091 <undefined>, 0x2669611d <JS array[1]>, 0x26694ed5 <JSMessageObject>) {
  5:     ADD+52(this=0x373082e5 <String[0]: >, 0x59c1f9cd <String[32]: Maximum call stack size exceeded>) {
  5:     } -> 0x59c1f9cd <String[32]: Maximum call stack size exceeded>
  5:     ADD+52(this=1, 0) {
  5:     } -> 1
  4:    } -> 0x59c1f9cd <String[32]: Maximum call stack size exceeded>
  3:   } -> 0x59c1f9cd <String[32]: Maximum call stack size exceeded>
  2:  } -> 0x59c1f9cd <String[32]: Maximum call stack size exceeded>
  1: } -> 0x59c1f9cd <String[32]: Maximum call stack size exceeded>
  RangeError:    1: getter+40(this=0x26693e85 <a RangeError>) {
  1: } -> 0x59c1f9cd <String[32]: Maximum call stack size exceeded>
  Maximum call stack size exceeded 
```

我可以跟踪此问题的最后一个位置是在文件中：

`app/packages/mongo-livedata/mongo_driver.js`

在第 10 行左右：

`var MongoDB = __meteor_bootstrap__.require('mongodb');`

我安装了最新的 npm (1.1.50) 并在全球范围内安装了 npm mongodb。我指的是 mongolab.com 上托管的 mongodb。我创建了一个简单的测试来连接和插入一些记录。它使用与我尝试用于 Meteor 的完全相同的 url，并且按预期工作：

```
var connect = require('mongodb').connect;
var url = 'mongodb://<user>:<password>@<cloud_id>.mongolab.com:<port>/<database>';
connect(url, function(err, db) {
    db.collection('test', function(err, collection) {
       // Insert 3 records
        for(var i = 0; i < 3; i++) {
          collection.insert({'a':i});
        }
    });
}); 
```

我不太了解跟踪消息，但似乎`FormatString`调用是触发异常的原因。有什么建议么？

### 更新：

我对此进行了更多调试，并将问题与加载此处显示为的特定 mongodb 模块隔离开来`filename`。从单步执行一段时间后，该模块似乎递归地包含了它自己。

```
break in module.js:311
Watchers:
  0: path = ...
  1: parent = ...
  2: filename = "/home/pi/bundle/server/node_modules/mongodb/lib/mongodb/connection/repl_set.js"

 308   var hadException = true;
 309 
 310   try {
 311     module.load(filename);
 312     hadException = false;
 313   } finally {
 314     if (hadException) {
 315       delete Module._cache[filename];
 316     }
 317   }
debug> 
< RangeError: Maximum call stack size exceeded
program terminated 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:42:40.917

不幸的是，我认为 MongoDB 目前不支持 ARM 架构，请参阅[https://jira.mongodb.org/browse/SERVER-1811](https://jira.mongodb.org/browse/SERVER-1811)

但是，您可以在另一台机器上运行 Mongo 并让驱动程序连接到该机器，或者如果您真的希望它在您的树莓派上运行，您可以尝试[非官方构建](http://elsmorian.com/post/24395639198/building-mongodb-on-raspberry-pi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T12:09:07.573

事实上，正如 Wilfred Knievel 所指出的，MongoDB 目前不支持 ARM 架构。我已经提供了 MongoDB 的（非官方）二进制文件，因此您不需要重新编译它们（因为这是一个相当长/棘手的过程）。这些二进制文件以及示例程序（C 语言）[可在此处获得](https://github.com/brice-morin/ArduPi/tree/master/mongodb-rpi/linux-test)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T00:44:23.587

不确定您现在是否在我们的流星万向叉

[https://github.com/4commerce-technologies-AG/meteor](https://github.com/4commerce-technologies-AG/meteor)

但我们在那里讨论了一些问题。还有一些关于fibers和mongo的错误。请查看（已关闭）问题并查看 bintray 上的预构建二进制文件，网址为

[https://bintray.com/4commerce-technologies-ag/meteor-universal/arm-dev-bundles/1.3.3.1/view#files/arm_dev_bundles](https://bintray.com/4commerce-technologies-ag/meteor-universal/arm-dev-bundles/1.3.3.1/view#files/arm_dev_bundles)

您也可以使用节点和 mongo tgz 来启动服务。

希望对汤姆有所帮助

# mysql - 如果查询有 1 行，则返回一个值，否则返回另一个值

> ID：12024303
> 
> 赞同：1
> 
> 时间：2012-08-19T04:50:04.963
> 
> 标签：mysql, sql

我使用类似这样的 mySQL 查询来获取我需要的有关照片的一些信息：

```
SELECT
users.first_name,
users.last_name,
photos.filename,
photos.YEAR,
photos.description,
themes.name AS theme_name

FROM
`photos`,
`users`,
`themes`

WHERE
users.facebook_id = photos.author AND
themes.id = photos.theme AND
photos.id = 35

LIMIT 1; 
```

如果以下查询正好有 1 行，我想用这个查询“选择”一条数据，“书签”，它的值为 TRUE：

```
SELECT * FROM bookmarks WHERE photo_id = 35 and facebook_id = 19484; 
```

否则“书签”的值为 FALSE。

这可以在单个查询中完成吗？

**编辑**- 我稍微改变了 Tadman 的解决方案。在这里，完美运行！

```
SELECT
users.first_name,
users.last_name,
photos.filename,
photos.YEAR,
photos.description,
themes.name AS theme_name,
bookmarks.id AS bookmark 

FROM
`photos`,
`users`,
`themes`

LEFT JOIN bookmarks ON bookmarks.photo_id = 35 AND bookmarks.facebook_id = 19484

WHERE
users.facebook_id = photos.author AND
themes.id = photos.theme AND
photos.id = 35

LIMIT 1; 
```

此解决方案不会将“书签”设置为 TRUE 或 FALSE，但我可以使用 NULL 与非 NULL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:12:44.960

如果存在，您可以对此进行操作`LEFT JOIN`以将书签拉入。理想情况下，每个用户最多每张照片只有一个书签，或者您可能有重复的行，每个书签一个：

```
SELECT
  ...,
  bookmarks.photo_id
FROM photos, users, themes
LEFT JOIN bookmarks ON bookmarks.photo_id=? AND photos.facebook_id=users.facebook_id
WHERE
  ...
LIMIT 1 
```

这`LEFT JOIN`是一个可选连接，即它可能成功也可能不成功，如果失败，它将关联的列保留为`NULL`. 您可以检查是否`bookmarks.photo_id`已定义，如果是，则有一个书签。

这里代表您指定`?`的条件的占位符。`photos.id`希望您为此查询使用占位符和[正确的 SQL 转义。](http://bobby-tables.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T05:21:02.453

```
SELECT
users.first_name,
users.last_name,
photos.filename,
photos.YEAR,
photos.description,
themes.name AS theme_name

FROM
`photos`,
`users`,
`themes`,
case (SELECT count(*) 
    FROM bookmarks 
    WHERE photo_id = photos.id 
    and facebook_id = users.facebook_id 
    group by photo_id, facebook_id
) when 0 then false
else 0
end case
WHERE
users.facebook_id = photos.author AND
themes.id = photos.theme AND
photos.id = 35
LIMIT 1; 
```

注意1：将包含拼写错误和东西。把它们当作练习

注意2：如果子选择返回大数字，它可能会成为性能问题，因为它会选择所有书签。这可以通过使用另一个带有限制子句的子选择而不是 group by 来调整。

注意 3：Tadmans 解决方案在当前形式下可能更快，但如果你想松开`limit 1`他的版本会破坏的部分，而这个应该仍然有效。

# c++ - C++11：可变参数模板函数参数的数量？

> ID：12024304
> 
> 赞同：98
> 
> 时间：2012-08-19T04:50:36.993
> 
> 标签：c++, c++11, variadic-templates, variadic-functions

如何计算可变参数模板函数的参数数量？

IE：

```
template<typename... T>
void f(const T&... t)
{
    int n = number_of_args(t);

    ...
} 
```

在上面实施的最佳方法是什么`number_of_args`？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-08-19T05:00:46.423

写这个：

```
const std::size_t n = sizeof...(T); //you may use `constexpr` instead of `const` 
```

请注意，这`n`是一个常量表达式（即在编译时已知），这意味着您可以在需要常量表达式的地方使用它，例如：

```
std::array<int,   n>  a; //array of  n elements
std::array<int, 2*n>  b; //array of (2*n) elements

auto middle = std::get<n/2>(tupleInstance); 
```

* * *

请注意，如果您想计算打包类型的聚合大小（而不是包中的类型*数量*），那么您必须执行以下操作：

```
template<std::size_t ...>
struct add_all : std::integral_constant< std::size_t,0 > {};

template<std::size_t X, std::size_t ... Xs>
struct add_all<X,Xs...> : 
  std::integral_constant< std::size_t, X + add_all<Xs...>::value > {}; 
```

然后这样做：

```
constexpr auto size = add_all< sizeof(T)... >::value; 
```

[在 C++17（及更高版本）中，使用折叠](https://en.cppreference.com/w/cpp/language/fold)表达式计算类型大小的总和要简单得多：

```
constexpr auto size = (sizeof(T) + ...); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-26T12:04:16.690

```
#include <iostream>

template<typename ...Args>
struct SomeStruct
{
    static const int size = sizeof...(Args);
};

template<typename... T>
void f(const T&... t)
{
    // this is first way to get the number of arguments
    constexpr auto size = sizeof...(T);
    std::cout<<size <<std::endl;
}

int main ()
{
    f("Raje", 2, 4, "ASH");
    // this is 2nd way to get the number of arguments
    std::cout<<SomeStruct<int, std::string>::size<<std::endl;
    return 0;
} 
```

# asp.net - 如何在 aspx 引擎中获取 Html.DropDownListFor 的选定值？

> ID：12024308
> 
> 赞同：2
> 
> 时间：2012-08-19T04:51:33.993
> 
> 标签：asp.net, asp.net-mvc-3, html.dropdownlistfor

在 Html（我没有使用）中

```
<select>
<option value="B">Bubblegum</option>
</select> 
```

在（来自控制器）Aspx 中

```
[HttpGet]
public ActionResult ViewMethod()
{
//Populate DropDownList
Treats = new List<KeyValuePair<string, string>>();
Treats.Add(new KeyValuePair<string, string>("Bubblegum", "B"));
ViewData["treats"] = new SelectList(Treats, "Value", "Key", SelectedTreat);
return View();
}
[HttpPost]
public ActionResult GeneratedContent(SomeModel model)
{
List<HalloweenTreats> ChewingGums = StoredProc(model.SelectedTreat);
return PartialView(ChewingGums);
} 
```

然后在视图中：

```
<% using (Ajax.BeginForm("ViewMethod", "ControllerName", new AjaxOptions { UpdateTargetId = "DisplayValues" })) { %>

<%: Html.DropDownListFor(x => x.SelectedTreat, ViewData["treats"] as SelectList)%>
<input type = 'submit' name = 'submit' value = 'generate' />
<div id="DisplayValues"></div>
<% } %>
<%: Ajax.ActionLink("Generate", "RequestReportSummary", "Report", new { model = Model }, new AjaxOptions { UpdateTargetId = "GeneratedReport" })%> 
```

如何在 aspx 引擎中获取 Html.DropDownListFor 的选定值“B”，以便我将其作为字符串发送到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:39:29.850

您发布到的控制器操作可以将您的模型作为参数：

```
[HttpPost]
public ActionResult ViewMethod(SomeModel model)
{
    // model.SelectedTreat will contain the selected value here
} 
```

# java - Axis2 SocketTimeoutException：读取超时

> ID：12024312
> 
> 赞同：0
> 
> 时间：2012-08-19T04:53:30.763
> 
> 标签：java, axis2, wsdl2java

我正在尝试构建一个 SOAP 客户端来访问国家气象服务 NDFD SOAP 服务。我正在使用 Axis2 1.6.2 和 wsdl2java 生成的代码。

每次我尝试检索数据时，都会收到一条 AxisFault 说读取超时。我试图将超时时间增加到 500 秒，但所做的只是让它等待更长的时间，然后再给出相同的错误。

```
Exception in thread "main" org.apache.axis2.AxisFault: [was class java.net.SocketTimeoutException] Read timed out
at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
at gov.weather.graphical.xml.dwmlgen.wsdl.ndfdxml_wsdl.NdfdXMLStub.fromOM(NdfdXMLStub.java:26499)
at gov.weather.graphical.xml.dwmlgen.wsdl.ndfdxml_wsdl.NdfdXMLStub.nDFDgen(NdfdXMLStub.java:595)
at he.andrew.ndfd.NDFDData.getData(NDFDData.java:47)
at he.andrew.ndfd.NDFDData.main(NDFDData.java:25)
Caused by: java.lang.RuntimeException: [was class java.net.SocketTimeoutException] Read timed out
at com.ctc.wstx.util.ExceptionUtil.throwRuntimeException(ExceptionUtil.java:18)
at com.ctc.wstx.sr.StreamScanner.throwLazyError(StreamScanner.java:731)
at com.ctc.wstx.sr.BasicStreamReader.safeFinishToken(BasicStreamReader.java:3657)
at com.ctc.wstx.sr.BasicStreamReader.getText(BasicStreamReader.java:809)
at com.ctc.wstx.sr.BasicStreamReader.getElementText(BasicStreamReader.java:679)
at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.getElementText(XMLStreamReaderWrapper.java:100)
at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.getElementText(XMLStreamReaderWrapper.java:100)
at org.apache.axiom.om.impl.llom.SwitchingWrapper.getElementText(SwitchingWrapper.java:936)
at javax.xml.stream.util.StreamReaderDelegate.getElementText(Unknown Source)
at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.getElementText(XMLStreamReaderWrapper.java:100)
at org.apache.axiom.util.stax.debug.XMLStreamReaderValidator.getElementText(XMLStreamReaderValidator.java:75)
at gov.weather.graphical.xml.dwmlgen.wsdl.ndfdxml_wsdl.NdfdXMLStub$NDFDgenResponse$Factory.parse(NdfdXMLStub.java:5612)
at gov.weather.graphical.xml.dwmlgen.wsdl.ndfdxml_wsdl.NdfdXMLStub.fromOM(NdfdXMLStub.java:26353)
... 3 more
Caused by: java.net.SocketTimeoutException: Read timed out
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at java.io.BufferedInputStream.read1(Unknown Source)
at java.io.BufferedInputStream.read(Unknown Source)
at org.apache.commons.httpclient.WireLogInputStream.read(WireLogInputStream.java:69)
at org.apache.commons.httpclient.ChunkedInputStream.read(ChunkedInputStream.java:182)
at java.io.FilterInputStream.read(Unknown Source)
at org.apache.commons.httpclient.AutoCloseInputStream.read(AutoCloseInputStream.java:108)
at java.io.FilterInputStream.read(Unknown Source)
... more not included 
```

该错误似乎与此处的错误相同：[Exception in thread "main" org.apache.axis2.AxisFault: Read timed out](https://stackoverflow.com/questions/7412254/exception-in-thread-main-org-apache-axis2-axisfault-read-timed-out)。但是，我不太了解对该问题的任何答复。

最后一点。为了避免“411 错误：需要长度”，我不得不关闭 Chunked 选项。我不确定这是否相关。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T18:40:08.290

我在一个项目中遇到了这个错误，根本原因是代理服务器设置。我不得不修改代理以允许与我尝试访问的服务进行通信。我的代码作为使用自己代理的自定义应用程序的一部分运行。所以这也可能是值得尝试的。

# javascript - 不重复图像的随机图像旋转

> ID：12024313
> 
> 赞同：0
> 
> 时间：2012-08-19T04:53:36.363
> 
> 标签：javascript, random, rotator

我正在修改一个图像旋转器，它也从 UL 中随机选择图像。我的目标是让所有 LI 都被选中而不重复。我的方法是在 .show 类完成后添加 .remove 类，然后在随机数学变量中，不选择 .remove 类。

我在使用以下代码时遇到的一个小问题是，有时 .show 类不会应用于 LI，并且它会在没有图像的情况下经历该循环。最终，所有图像都显示，然后接收“删除”类，并且没有重复，但我希望始终有一个 li.show 所以没有空白。

我的 JS 知识非常少，所以如果这种方法看起来不对，我欢迎替代方案，但似乎我忽略了一些简单的东西。

谢谢。

```
function theRotator() {
    $('div#box1.rotator li').css({
        opacity: 0.0
    });
    $('div#box1.rotator li:first').css({
        opacity: 1.0
    });
    setInterval('rotate()', 25000);

}

function rotate() {
    var current = ($('div#box1.rotator li.show') ? $('div#box1.rotator li.show') : $('div#box1.rotator li:first'));

    if (current.length == 0) current = $('div#box1.rotator li:first');

    var next = ((current.next().length) ? ((current.next().hasClass('show')) ? $('div#box1.rotator li:first') : current.next()) : $('div#box1.rotator li:first'));

    //Un-comment the 3 lines below to get the images in random order
    var sibs = current.siblings();
    var rndNum = Math.floor(Math.random() * sibs.length);
    var next = $(sibs[rndNum]).not('.remove'); //HERE I ADDED: .not('.remove')
    next.css({
        opacity: 0.0
    }).addClass('show').animate({
        opacity: 1.0
    }, 10000);

    //Hide the current image
    current.animate({
        opacity: 0.0
    }, 10000).removeClass('show').addClass('remove'); //AND HERE I ADD THE REMOVE CLASS AFTER SHOW...
}; 
```

HTML的示例结构：

```
<div id="box1" class="rotator">
    <ul>
        <li class="show">
            <img src="images/006.jpg" />
        </li>
        <li>
            <img src="images/014.jpg" />
        </li>
        <li>
            <img src="images/019.jpg" />
        </li>
    </ul>
</div> 
```

# android - Android 内容提供程序相同的 URI 不匹配

> ID：12024315
> 
> 赞同：1
> 
> 时间：2012-08-19T04:53:55.387
> 
> 标签：android, uri, android-contentprovider

我在这里误解了什么吗？我正在尝试在 Android 中实现 ContentProvider，但由于某种原因，调用 URI 不匹配。在我的 ContentProvider 中，我定义了以下内容：

```
private static final int GET_COURSES = 100;
public static final Uri COURSES_URI = Uri.withAppendedPath(CONTENT_URI, CourseTable.NAME);
private static final UriMatcher matcher = new UriMatcher(UriMatcher.NO_MATCH);
static 
{
    matcher.addURI(AUTHORITY, COURSES_URI.toString(), GET_COURSES);
} 
```

然后，在我的查询调用中：

```
public Cursor query(Uri uri, ...)
{
    int type = matcher.match(uri);
    .
    . 
```

在这里，类型始终为 -1 ...在调试窗口中，我查看了传入的 uri 和 COURSES_URI 并且字符串表示形式相同...

有什么建议么？

谢谢

更新：

我使用以下方法调用内容提供者：

```
new CursorLoader(this, CoursesProvider.COURSES_URI, null, null, null, null); 
```

...这让我难以置信...刚刚得到 uri.equals(COURSES_URI) == true，所以 UriMatcher 中的某些内容一定是不正确的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T02:01:24.720

问题解决了...最初的问题是 COURSES_URI 还包含 AUTHORITY 路径：

```
private static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/" + DBManager.DB_NAME);
private static final Uri COURSES_URI = Uri.withAppendedPath(CONTENT_URI, CourseTable.NAME); 
```

在该`matcher.AddURI(authority,path,code)`方法中，路径的权限部分应该被删除。

这可以使用`COURSES_URI.getPath().substring(1)`（删除 getPath() 返回的前导 '/' 的子字符串）来获得

# android - 如何对 Android 设备屏幕进行视频捕获？

> ID：12024319
> 
> 赞同：2
> 
> 时间：2012-08-19T04:54:41.900
> 
> 标签：android, screen, share, capture

我想知道是否有任何应用程序或方法可以视频捕获 Android 设备的屏幕。也有任何软件可以与 PC 共享 Android 设备的屏幕。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T04:57:03.387

Screencast 将为您完成这项工作。它需要您的 Android 设备的视频捕获。：

自由的

[截屏视频录像机演示](https://play.google.com/store/apps/details?id=com.ms.screencastfree)

有薪酬的

[截屏录像机](https://play.google.com/store/apps/details?id=com.ms.screencast)

# node.js - 单个引导组件上的 LESS 编译错误

> ID：12024323
> 
> 赞同：1
> 
> 时间：2012-08-19T04:55:57.200
> 
> 标签：node.js, twitter-bootstrap, less, server-side

我有点困惑。我正在尝试将 Node.js 与 lessc 一起使用来编译我的应用程序，其中包括引导程序的一部分。我希望能够为我需要的东西挑选一些零碎的引导程序，因为我不会全部使用它。当我导入时，`bootstrap.less`一切都完美编译。但是如果我只导入`reset.less`或者`buttons.less`我得到：`TypeError: Cannot call method 'charAt' of undefined`. 这里发生了什么？

**我的文件夹设置**

```
less/
    application.less
    bootstrap/
        bootstrap.less
        reset.less
        buttons.less
        etc... 
```

**应用程序.less**

当我有时，一切都编译得很好`@import 'bootstrap/bootstrap'` 我得到了上面的错误`@import 'bootstrap/reset'`

我也尝试将 .less 添加到文件名的末尾，结果相同。我在网上发现少版本 1.3.0 应该可以解决这个问题，但那是我正在使用的版本。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:38:53.230

组件依赖于`variables.less`和`mixins.less`。`reset.less`在编译任何组件（甚至只是，因为它使用 mixins）时，您都需要包含它们。

# c - “编程珍珠”：珍珠串

> ID：12024325
> 
> 赞同：1
> 
> 时间：2012-08-19T04:56:29.907
> 
> 标签：c, casting, qsort, markov

在 15.3 栏，作者介绍了如何从输入文档中随机生成文本。作者还给出了[源代码](http://www.cs.bell-labs.com/cm/cs/pearls/markov.c)。

```
qsort(word, nword, sizeof(word[0]), sortcmp);
int sortcmp(char **p, char **q)
{   return wordncmp(*p, *q);
} 
```

我一直对源代码中的上述几行感到困惑。[qsort](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)的最后一个参数是：

```
int comparator ( const void * elem1, const void * elem2 ). 
```

但是 sortcmp 的定义不同。实际上，源代码无法在我的 VS2010 中编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:45:20.200

似乎这段代码最初是用更宽容（或不太符合标准）的编译器编译的。这个想法似乎是`void *`比较器函数的规范参数被解释为`char **`，`wordncmp()`它是最长长度的字典比较的实现`n`，可以应用于它们。

按预期声明函数（即采用两个`const void *`参数）并使类型转换显式似乎可以解决问题（使用 GCC 4.7.0 测试）：

```
int sortcmp(const void *p, const void *q) {
  return wordncmp(*(const char **)p, *(const char **)q);
} 
```

我还必须修改`wordncmp()`函数的声明：

```
int wordncmp(const char *p, const char* q)
{
  /*.. Definition unchanged.. */
} 
```

# c++ - C ++鼠标阅读非常不活跃

> ID：12024328
> 
> 赞同：-1
> 
> 时间：2012-08-19T04:57:20.953
> 
> 标签：c++, dll, mouse

直截了当，我正在开发一个 dll，它只是读取鼠标坐标并将它们转换为旋转，然后转换为一些坐标，用于 fps 风格的相机。

问题是鼠标阅读器非常不敏感，如果我缓慢移动鼠标，它不会记录任何内容，但如果我移动它非常快，它会记录更改。

现在代码：

主文件

```
#define DLL_EXPORT
#define BOOST_THREAD_USE_DLL

#include "DLL\Viewport.h"
#include "MouseReader.h"
#include <boost\thread\thread.hpp>
#include <assert.h>

using namespace std;

#define PHI 3.141592653589

MouseListenerObject MouseListener;
double clax, clay, claz;
double Altitude, Azimuth;

bool IsActive;

static void CalcCLA_XYZ();
void FPSThread();

boost::thread *fpsstylethread;

void ViewportManagerObject::StartFPSStyle()
{
    IsActive = true;
    fpsstylethread = new boost::thread(&FPSThread);

    assert(fpsstylethread->joinable());
}

void ViewportManagerObject::StopFPSStyle()
{
    IsActive = false;
    fpsstylethread->detach();
}

void FPSThread()
{
    while(IsActive == true)
    {
        CalcCLA_XYZ();
    }
}

vector<double> ViewportManagerObject::ReturnCLA_XYZ()
{
    vector<double> returnval;
    returnval.insert(returnval.begin(), clax);
    returnval.insert(returnval.begin()+1, clay);
    returnval.insert(returnval.begin()+2, claz);

    return returnval;
}

void CalcCLA_XYZ()
{
    MouseListener.ReadMouse();

    vector<int> MouseCoordChange = MouseListener.Change;

    bool hasoperated = false;
    if (Azimuth + (MouseCoordChange[0] / 20) > 360)
    {
        Azimuth = (Azimuth + (MouseCoordChange[0] / 20)) - 360;
        hasoperated = true;
    }

    if (Azimuth + (MouseCoordChange[0] / 20) < 0)
    {
        Azimuth = (Azimuth + (MouseCoordChange[0] / 20)) + 360;
        hasoperated = true;
    }

    if (hasoperated == false)
    {
        Azimuth += (MouseCoordChange[0] / 20);
    }

    if (!((Altitude - (MouseCoordChange[1] / 20)) > 160) && !((Altitude - (MouseCoordChange[1] / 20)) < 5))
    {
        Altitude -= (MouseCoordChange[1] / 20);
    }

    clax = 1 * cos((Altitude/360)*(2*PHI)) * cos((Azimuth/360)*(2*PHI));
    clay = 1 * sin((Altitude/360)*(2*PHI));
    claz = 1 * cos((Altitude/360)*(2*PHI)) * sin((Azimuth/360)*(2*PHI));
} 
```

鼠标阅读器.h

```
#ifndef MR_H
#define MR_H

#include <Windows.h>
#include <vector>

using namespace std;

class MouseListenerObject
{
    int newposx;
    int newposy;

    int oldposx;
    int oldposy;

    bool first;

public: vector<int> Change;

public: MouseListenerObject()
    {
        first = true;
    }

public: void ReadMouse()
    {
        POINT MousePoint;
        GetCursorPos(&MousePoint);

        if (first != false)
        {
            oldposx = MousePoint.x;
            oldposy = MousePoint.y;

            first = false;

            vector<int> nullvector;
            nullvector.insert(nullvector.begin(), 0);
            nullvector.insert(nullvector.begin() + 1, 0);
            Change = nullvector;

            return;
        }

        oldposx = newposx; // Lets make the previous values old...
        oldposy = newposy;

        newposx = MousePoint.x; // Update the new ones.
        newposy = MousePoint.y;

        int changex, changey; // Calc. the change and put it in a vector.

        changex = newposx - oldposx;
        changey = newposy - oldposy;

        vector<int> returnval;
        returnval.insert(returnval.begin(), changex);
        returnval.insert(returnval.begin() + 1, changey);

        Change = returnval;
    }
};

#endif 
```

视口.h

```
#ifndef CVP_H
#define CVP_H

#include <vector>
using namespace std;

#if defined DLL_EXPORT
    #define DECLDIR __declspec(dllexport)
#else
    #define DECLDIR __declspec(dllimport)
#endif

class ViewportManagerObject
{
    public:DECLDIR void StartFPSStyle();

    public:DECLDIR void StopFPSStyle();

    public:DECLDIR vector<double> ReturnCLA_XYZ();
};

#endif 
```

很抱歉这篇文章没有提供更多信息，但我的时间很短。

请问各位大佬有没有。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:39:31.527

在`CalcCLA_XYZ()`你除以`MouseCoordChange`20 时，这是我认为的问题。首先将所有替换`20`为`MOUSE_SENSITIVITY`和`# define`它作为一个较小的数字。`1`从;开始看看它是如何响应的 您也可能希望将其转换为 double 或 float 以使其成为浮点除法以防止截断小数部分，因为现在`MouseCoordChange[0]/20`是整数除法。您也可以定义`MOUSE_SENSITIVITY`为`1.0`使其成为浮点除法。

# java - Java / TCP 流量类

> ID：12024335
> 
> 赞同：5
> 
> 时间：2012-08-19T04:59:48.693
> 
> 标签：java, sockets, tcp

好吧，我注意到在 Java 和其他语言中可能有一个类似于 Socket 的选项

```
setTrafficClass(int tc) 
```

我知道我正在使用的应用程序的流量类别为 24，但是尽管谷歌搜索我找不到这些类别对应的列表，也找不到有效类别的列表。

请赐教。md_5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T05:12:28.950

根据 的[规范`Socket.setTrafficClass`](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setTrafficClass%28int%29)，我们看到：

> 对于 Internet 协议 v4，该值由一个 组成`integer`，其中的最低有效 8 位表示套接字发送的 IP 数据包中 TOS 八位字节的值。RFC 1349 定义 TOS 值如下：
> 
> *   `IPTOS_LOWCOST`( `0x02`)
> *   `IPTOS_RELIABILITY`( `0x04`)
> *   `IPTOS_THROUGHPUT`( `0x08`)
> *   `IPTOS_LOWDELAY`( `0x10`)
> 
> 最后一个低位总是被忽略，因为它对应于 MBZ（必须为零）位。

`24`是`0x18`ie `0x10 | 0x08`，它对应于`IPTOS_THROUGHPUT`并被`IPTOS_LOWDELAY`设置。

如您所见，TOS 仅作为*提示*；它要求高吞吐量、低延迟的路由......可能会或可能不会被服务！

您可以 在此处阅读[RFC 1349](http://tools.ietf.org/rfc/rfc1349.txt)和[相关的 Wikipedia 文章中有关](http://en.wikipedia.org/wiki/Type_of_service)*服务类型的*更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T05:12:27.960

[Javadocs](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Socket.html#setTrafficClass%28int%29)有一些细节。本质上，您正在设置数据包的[TOS](https://en.wikipedia.org/wiki/Type_of_service)（服务类型）标头。路由网络可以选择使用它作为关于如何处理数据包的建议（或者它可能完全忽略它）。许多网络实际上并没有对这个领域做任何有意义的事情，所以我不会依赖它的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T05:17:50.583

流量等级最终是您和最近的路由器之间的问题。该领域经历了几次突变。它在 IPv4 和 IPv6 之间也有所不同。IPv4 的第一个定义在 RFC 791-5 中给出；这在[RFC 1349中进行了修订，并在](http://www.ietf.org/rfc/rfc1349.txt)[RFC 2474](http://www.ietf.org/rfc/rfc2474.txt)中完全重新定义为“差异化服务”。自从我在 2003 年左右为我的书研究它以来，整个业务很可能已经再次修改。对于 IPv6，请参阅 RFC 2460。Javadoc 中关于`IPTOS_*`值的内容是指 RFC 1349，并且在编写时已经过时了几年。

# rpc - Thrift 发布订阅

> ID：12024343
> 
> 赞同：6
> 
> 时间：2012-08-19T05:02:14.070
> 
> 标签：rpc, publish-subscribe, thrift

我正在将 Thrift 评估为 rpc 框架。我希望能够用 thrift 进行发布/订阅逻辑，并且想知道如何做到这一点。

一些不同的答案可能会有所帮助：

1.  有没有一种规范的方式来使用 Thrift 发布/订阅？
2.  有没有办法流式传输调用结果（类似于 zerorpc 流式传输）？
3.  你怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T04:03:21.300

我已经完成了自己的研究，看起来与节俭一样，您应该序列化并在某种类型的消息队列（如 zeromq 或 redis）上执行 pub sub。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:45:12.887

你看过DDS吗？数据分发服务是通过主题进行发布/订阅通信的完整标准。

# iphone - iOS 将 TableView 固定到底部，就像消息应用程序一样

> ID：12024344
> 
> 赞同：4
> 
> 时间：2012-08-19T05:02:21.073
> 
> 标签：iphone, ios, scroll, tableview

所以这完全超出了我的（专业知识？）领域，所以我想我会问它，看看是否有更有经验的人能给我一个是或否的答案。

所以，我正在使用 Appcelerator Titanium 来构建一个有很多 tableviews 的应用程序。我正在寻找构建它，以便一些 tableViews 从底部开始，我可以向上滚动而不是向下滚动来启动，这与 iPhone 上的“消息”应用程序完全相同。

它的工作方式是加载内容，并自动加载固定在底部的表格视图，然后您可以向上滚动以查看较旧的帖子。

除了创建表格视图，加载数据，然后将其滚动到底部（显然有捕捉）之外，我找不到在 appcelerator 中执行此操作的方法。我可以隐藏 tableview，滚动到底部，然后显示 tableview，但同样......不理想。

现在的问题......**是否可以使用标准的 iOS SDK（不是 appcelerator）来设置一个表格来固定到底部而不是顶部？**如果没有，我将不得不以某种方式找到解决方法。如果是的话，如果可能的话，我想尝试将它构建成钛模块......

无论如何，谢谢！希望这对你们中的一些人来说是一个简单的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T05:11:14.470

实际上，这真的很琐碎。像这样的东西会很好用：

```
-(void)viewDidLoad {
   //place this at the bottom of your viewDidLoad method, or in any method that initially reloads the table
    NSIndexPath* ipath = [NSIndexPath indexPathForRow: myArray.count-1 inSection: 0];
    [tableView scrollToRowAtIndexPath: ipath atScrollPosition: UITableViewScrollPositionBottom animated: NO]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T04:45:42.840

我尝试在 viewDidLoad 中滚动，但是在视图控制器出现后，我可以看到视图中表格的开头出现。

我找到了初始滚动的更好位置。

```
- (void) viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];

    NSInteger lastSectionIndex = MAX(0, [self.chatTableView numberOfSections] - 1);
    NSInteger lastRowIndex = MAX(0, [self.chatTableView numberOfRowsInSection:lastSectionIndex] - 1);
    NSIndexPath *lastIndexPath = [NSIndexPath indexPathForRow:lastRowIndex inSection:lastSectionIndex];
   [self.chatTableView scrollToRowAtIndexPath:lastIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:NO];
} 
```

# git - “不是 git 存储库：”尝试将 RestKit 添加到我的存储库时出错

> ID：12024345
> 
> 赞同：2
> 
> 时间：2012-08-19T05:02:40.583
> 
> 标签：git, github, git-submodules

我正在尝试在我的项目中使用 git。

我（过去）将 RestKit 克隆到我的项目中以供使用（我认为这是一个子模块，但我不确定。现在一切正常，我 99% 的文件都被跟踪并推送到 Github。

当我尝试将 RestKit/ 添加到我的存储库时，我收到此错误：

> shanis-imac:shannoga-English-Club shannoga$ git add RestKit/ 致命：不是 git 存储库：/Users/shannoga/github/shannoga-English-Club/.git/modules/RestKit

现在我可以猜测我不适合推送休息套件，而是以某种方式将其与我的存储库相关联？

1.  我对吗？
2.  错误是什么意思
3.  这样做的方法是什么？

谢谢， 沙尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:17:33.070

如果[ResKit](https://github.com/RestKit/RestKit)已经在你[当前的 GitHub 项目](https://github.com/shannoga/Beffective)中声明为子模块，你不应该直接克隆/添加它（不`git add`应该参与）。

在[Git Tools - Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)之后，您应该：

```
git submodule init
git submodule update 
```

这将从该项目中获取所有数据并检查您的超级项目中列出的适当提交。

您的主要项目的一个`git clone --recursive`将为您包括此步骤：请参阅“[我如何`git clone --recursive`重新创建子模块的遥控器和分支？](https://stackoverflow.com/questions/10666085/how-do-i-get-git-clone-recursive-to-recreate-submodules-remotes-and-branche/11451714#11451714) ”，并且不要忘记，如最后一个 SO 问题中所述，子模块已签出一个[分离的 HEAD 模式](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)。

# java - 处理后如何删除 PrimeFaces UploadedFile 临时文件？

> ID：12024348
> 
> 赞同：7
> 
> 时间：2012-08-19T05:05:47.623
> 
> 标签：java, jsf, primefaces

PrimeFaces UploadedFile 只公开 InputStream，而不是文件本身。处理流后如何删除它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T12:22:11.167

PrimeFaces 为此使用了 Apache Commons FileUpload。它将文件创建为临时文件，因此如果在 Java 垃圾收集器运行时没有打开或引用该文件，则该文件将*被自动删除。*`File``InputStream`

因此，如果您可以绝对确保关闭`InputStream`后处理（在`finally`块中！），那么您无需担心清理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-25T04:45:25.323

在您重新启动服务器之前，它将删除一些文件但不是所有文件。我正在使用 JBoss 2.4.3 并在 Servlet 2.4 中添加了对 JSF 2.0 的支持。[请在此处](https://stackoverflow.com/q/19534610/185022)阅读有关我的其他问题的完整详细信息

那么您需要编写自己的过滤器在 Apache 网站上阅读有关[FileCleaningTracker的更多信息。](http://commons.apache.org/proper/commons-fileupload/using.html#Resource_cleanup)

**第1步：**

`org.primefaces.webapp.filter.FileUploadFilter`使用并覆盖以下方法扩展您的类

```
@Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {
        HttpServletRequest httpServletRequest = (HttpServletRequest) request;
        boolean isMultipart = ServletFileUpload.isMultipartContent(httpServletRequest);
        if (isMultipart) {
            if (logger.isLoggable(Level.FINE))
                logger.fine("Parsing file upload request");

            FileCleaningTracker fileCleaningTracker = FileCleanerCleanup.getFileCleaningTracker(ContextConfigServlet.SERVLET_CONTEXT);
            DiskFileItemFactory diskFileItemFactory = new DiskFileItemFactory();
            diskFileItemFactory.setFileCleaningTracker(fileCleaningTracker);

            if (thresholdSize != null)
                diskFileItemFactory.setSizeThreshold(Integer.valueOf(thresholdSize).intValue());
            if (uploadDir != null)
                diskFileItemFactory.setRepository(new File(uploadDir));

            ServletFileUpload servletFileUpload = new ServletFileUpload(diskFileItemFactory);
            MultipartRequest multipartRequest = new MultipartRequest(httpServletRequest, servletFileUpload);

            if (logger.isLoggable(Level.FINE))
                logger.fine("File upload request parsed succesfully, continuing with filter chain with a wrapped multipart request");

            filterChain.doFilter(multipartRequest, response);

        } else {
            filterChain.doFilter(request, response);
        }

    } 
```

**我有一个 Servlet，它在初始化上下文并从那里获取 ServletContext 时被调用，你可以像 request.getSession.getServletContext 一样做......请验证这个**

**第2步：**

转到您的 web.xml 并在参数中添加您的过滤器

```
<filter-class>com.sf.server.filter.FileUploadFilter_</filter-class> 
```

现在全部完成，它将删除所有临时文件。

# java - 无法实例化活动 ComponentInfo Android 错误

> ID：12024352
> 
> 赞同：1
> 
> 时间：2012-08-19T05:06:44.503
> 
> 标签：java, android, android-mapview

当我使用这个 XML 文件时。我的以下 Java 代码工作正常。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"> 

     <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

当我开始使用这个 XML 文件时，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:apiKey="0s_fADEBtq0-j_teQ1j-yaoDAivoHHtwN81rJ-g"
        android:clickable="true"
        android:state_enabled="true" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="164dp"
            android:layout_height="142dp"
            android:layout_weight="0.33" >
        </ListView>
    </LinearLayout>

</LinearLayout> 
```

这样在 Android 屏幕的上半部分，我可以显示`Google Map`，在下半部分，我可以显示带有图像的 ListView。但是每当我使用这个 XML 文件时，它就会开始给我一个异常，例如-

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.weatheractivity/com.example.weatheractivity.MainActivity}: java.lang.ClassNotFoundException: com.example.weatheractivity.MainActivity 
```

以下是Java代码：-

```
public class MainActivity extends MapActivity {

    private ListView listView1;
    private MapView mapView;
    private MapController mapController;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Weather weather_data[] = new Weather[]
                                             {
                new Weather(R.drawable.ic_launcher, "Cloudy"),
                new Weather(R.drawable.ic_launcher, "Showers"),
                new Weather(R.drawable.ic_launcher, "Snow"),
                new Weather(R.drawable.ic_launcher, "Storm"),
                new Weather(R.drawable.ic_launcher, "Sunny")
                                             };

        WeatherAdapter adapter = new WeatherAdapter(this, 
                R.layout.listview_item_row, weather_data);

        mapView = (MapView) findViewById(R.id.mapView);
        // enable Street view by default
        mapView.setStreetView(true);

        mapView.setBuiltInZoomControls(true);

        mapController = mapView.getController();
        mapController.setZoom(15);

        listView1 = (ListView)findViewById(R.id.listView1);

        View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
        listView1.addHeaderView(header);

        listView1.setAdapter(adapter);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:28:36.063

因为地图库不是标准 Android 库的一部分，所以您必须在 Android Manifest 中声明它。打开 AndroidManifest.xml 文件并将以下内容添加为元素的子元素：

```
<uses-library android:name="com.google.android.maps"/> 
```

[https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

# python - 我可以在 Python 中同时打印一个函数并将其设置为一个变量吗？

> ID：12024356
> 
> 赞同：0
> 
> 时间：2012-08-19T05:07:37.677
> 
> 标签：python, function, dictionary, python-2.7

我想知道是否可以运行以下代码，同时将结果值捕获到变量中。代码如下：

```
def nodupchoice():
    # For loop that creates a list named keys. It grabs 3 random keys from the dictionary word_drills
    keys = [x for x in random.sample(word_drills, 3)]
    # User is presented with a question. A value from the previous randomly selected keys is selected as the 'question'
    print "Question: ", word_drills[random.choice(keys)]
    # Set the variables key1, key2, & key3 to the 3 keys in the list 'keys'
    key1, key2, key3 = keys[0], keys[1], keys[2]
    # User is presented with 3 choices.
    print "\n\n(a)%s   (b)%s   (c)%s" % (key1, key2, key3)
    selection = raw_input("> ")
    print selection
    print correctvalue 
```

代码行是**print "Question: ", word_drills[random.choice(keys)]**。我想把这个结果放在一个变量中并运行一个 if/else 语句来查看答案是否正确。再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T05:12:42.250

呃，是吗？只需将其分配给一个变量：

```
question = word_drills[random.choice(keys)]
print question 
```

现在该变量`question`稍后仍然可用。

# javascript - 在流星中，我怎样才能获得底层 sockjs 服务器的句柄？

> ID：12024357
> 
> 赞同：1
> 
> 时间：2012-08-19T05:07:42.380
> 
> 标签：javascript, meteor

我想访问流星用来进行实时更新的 sockjs api。Meteor 发出类似的东西`http://localhost:3000/sockjs/348/zfjta7hy/xhr`，我想利用 sockjs api 来绕过流星中的 pub/sub 内容，如下所示：

```
var sock = new SockJS('http://localhost:3000/sockjs/dynamically_created_by_meteor'); 
```

然后简单`sock`的用来做一些超出meteor实时更新范围的协同工作。我还没有深入研究代码来看到这一点，但我想知道是否有人知道我如何在流星中获取 sockjs url 句柄？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:27:55.580

在通过 firebug 挖掘并检查`Meteor`对象后，我发现了这个，它提供了`SockJS`Meteor 0.3.9 的 url

```
Meteor.default_connection.stream.socket._transport.poll.recv_url 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:14:37.260

我在这里回答了一个类似的问题，解决方案并不完美，但它有效：[发布任意数据并自动更新 HTML](https://stackoverflow.com/questions/12148287/publish-arbitrary-data-and-automatically-update-html/12189475#12189475)

# python - 将“字符串”作为原始二进制文件写入文件 Python

> ID：12024358
> 
> 赞同：1
> 
> 时间：2012-08-19T05:07:51.383
> 
> 标签：python, binary, save

我正在尝试编写一系列用于测试的文件，这些文件是我从头开始构建的。数据负载构建器的输出是字符串类型，我正在努力将字符串直接写入文件。

有效负载构建器仅使用十六进制值，并且只是为每次迭代添加一个字节。

我尝试过的“写入”函数要么落在字符串的写入上，要么为字符串编写 ASCII 码，而不是字符串本身......

我想以一系列文件结束 - 文件名与数据有效负载相同（例如文件 ff.txt 包含字节 0xff

```
def doMakeData(counter):
    dataPayload = "%X" %counter
    if len(dataPayload)%2==1:
        dataPayload = str('0') + str(dataPayload)
    fileName = path+str(dataPayload)+".txt"
    return dataPayload, fileName

def doFilenameMaker(counter):
    counter += 1
    return counter

def saveFile(dataPayload, fileName):
    # with open(fileName, "w") as text_file:
          # text_file.write("%s"%dataPayload)  #this just writes the ASCII for the string
    f = file(fileName, 'wb')
    dataPayload.write(f) #this also writes the ASCII for the string
    f.close()
    return

if __name__ == "__main__":
    path = "C:\Users\me\Desktop\output\\"
    counter = 0
    iterator = 100
    while counter < iterator:
        counter = doFilenameMaker(counter)
        dataPayload, fileName = doMakeData(counter)
        print type(dataPayload)
        saveFile(dataPayload, fileName) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T05:31:01.540

要仅写入一个字节，请使用`chr(n)`获取包含 integer 的字节`n`。

您的代码可以简化为：

```
import os
path = r'C:\Users\me\Desktop\output'
for counter in xrange(100):
    with open(os.path.join(path,'{:02x}.txt'.format(counter)),'wb') as f:
        f.write(chr(counter)) 
```

注意路径使用原始字符串。如果字符串中有 '\r' 或 '\n' ，它们将被视为回车或换行，而不使用原始字符串。

`f.write`是写入文件的方法。 `chr(counter)`生成字节。确保也以二进制模式写入`'wb'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T05:10:34.980

```
dataPayload.write(f) # this fails "AttributeError: 'str' object has no attribute 'write' 
```

当然可以。你不写字符串；你写入文件：

```
f.write(dataPayload) 
```

也就是说，`write()`是文件对象的方法，而不是字符串对象的方法。

你在它上面的注释掉的代码中是正确的；不知道你为什么在这里切换它......

# performance - 字段类型在 MongoDB 索引中是否重要？

> ID：12024362
> 
> 赞同：18
> 
> 时间：2012-08-19T05:08:58.800
> 
> 标签：performance, mongodb, types, indexing, field

以下是 MongoDB 中文档结构的两个示例。

```
{  
 UserId: "123",  
 UserName: "Usain Bolt"  
}

{  
 UserId: NumberLong(123),  
 UserName: "Usain Bolt"  
} 
```

如果我要在 上创建索引`UserID`，上述两个示例之间的查找查询性能会有所不同吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T05:27:04.040

我对此事没有具体准确的答案，但这是我的理解：

[索引](http://www.mongodb.org/display/DOCS/Indexes)

> 索引字段可以是任何类型，包括（嵌入式）文档

无论类型如何，索引很可能都经过哈希处理，以便能够以相同的方式进行索引。如果对不同类型有特定的注意事项，标准的 mongodb 文档会做出这种区分。

[此处对类似问题](https://stackoverflow.com/a/8995422/496445)的答案是指来自 mongodb 的代码示例，这表明索引比较在类型方面几乎相同，但性能可能与索引大小有关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T21:33:40.000

当涉及到索引时，关于字符串与数字要注意的一点是，通常可以很好地理解排序中数字的顺序。但是，当您使用字符串时，将使用[Lexicographical Order](http://en.wikipedia.org/wiki/Lexicographical_order)，因此您需要注意其中的差异。

另外，为了跟进jdi提到的大小角度，字符串可以任意长，当然可以控制，一个long，它将被存储为BSON双精度类型总是[8字节](http://bsonspec.org/#/specification)。

# c - 使用 WININET API 处理 GZIP 压缩

> ID：12024363
> 
> 赞同：3
> 
> 时间：2012-08-19T05:09:16.110
> 
> 标签：c, winapi, com, ole, wininet

我的服务器向我发送一个使用 GZIP 压缩压缩的 JSON 数据流。

当我在普通的 IE 浏览器上请求这些数据时，我得到了数据，当我提到要打开的应用程序时，浏览器会自动解压缩该数据流并向我显示我的 JSON 数据。

我的 C 应用程序正在使用 COM/OLE 来嵌入 IE 浏览器实例，并且我正在使用 WININET 进行 GET/POST 操作所以在这里我将数据压缩。

由于它的 IE 浏览器功能在默认 IE 浏览器的情况下自动解压缩 GZIP 数据如何在我的 C 应用程序中通过 WININET 自动解密数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T07:02:32.617

从 Vista 开始，`INTERNET_OPTION_HTTP_DECODING`flag 在 WinInet 中启用 gzip 解码：

[INTERNET_OPTION_HTTP_解码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385328%28v=vs.85%29.aspx)：

> 使 WinINet 能够为 gzip 和 deflate 编码方案执行解码。有关详细信息，请参阅[内容编码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383955%28v=vs.85%29.aspx)。
> 
> 当解码失败时，应用程序有两个选择：它可以删除 Accept-Encoding 标头并重新发送请求，或者可以将请求上的 INTERNET_OPTION_HTTP_DECODING 选项设置为 false 然后重新发送请求。如果解码选项设置为 false，则应用程序必须检查 Content-Encoding 标头并在应用程序级别执行任何解码。

[在早期版本的 Windows 中，您必须自己解压缩（使用例如http://zlib.net/](http://zlib.net/)也相当容易）

# c++ - ERROR_NOT_ENOUGH_MEMORY 使用 WritePrivateProfileString 写入 INI 时出错，在 200k 次调用后

> ID：12024365
> 
> 赞同：0
> 
> 时间：2012-08-19T05:09:50.447
> 
> 标签：c++, packet, ini

我正在使用 C++ 制作简单的 dll 数据包嗅探器，它将连接到应用程序，并将接收到的数据包写入 INI 文件。不幸的是，在 20-30 分钟后，它使主要应用程序崩溃了。

当收到数据包时，`receivedPacket()`将被调用。20 多分钟后，*WriteCount*值约为 150,000-200,000.. 并开始出现 C++ 运行时错误/崩溃，`GetLastError()`我得到的代码是 0x8，即**ERROR_NOT_ENOUGH_MEMORY**，`WritePrivateProfileStringA()`返回**0**

```
void writeToINI(LPCSTR iSec,LPCSTR iKey,int iVal){
    sprintf(inival, _T("%d"), iVal);
    WritePrivateProfileStringA(iSec,iKey,inival,iniloc);

//sprintf(strc, _T("%d \n"), WriteCount);
//WriteConsole(GetStdHandle(STD_OUTPUT_HANDLE), strc, strlen(strc), 0, 0);

    WriteCount++;

}

void receivedPacket(char *packet,WORD size){
    switch ( packet[2] )
    {
    case 0x30:
        // Size : 0x5F
        ID = *(signed char*)&packet[0x10];
        X = *(signed short*)&packet[0x20];
        Y = *(signed short*)&packet[0x22];
        Z = *(signed short*)&packet[0x24];

        sprintf(inisec, _T("PACKET_%d"), (ID+1));

        writeToINI(inisec,"id",ID);
        writeToINI(inisec,"x",X);
        writeToINI(inisec,"y",Y);
        writeToINI(inisec,"z",Z);
     }

     [.....OTHER CASES.....]

} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:08:59.730

`WritePrivateProfileString()`并且`GetPrivateProfileString()`非常慢（由于每次调用都解析 INI 文件），您可以：

*   使用现有的解析[库](https://stackoverflow.com/a/12636/1569168)之一，但我不确定内存效率也不支持顺序写入。
*   编写您自己的顺序 INI 编写器：
    1.  读取文件（或仅部分，部分，如果它太大）
    2.  查找部分和键（如果未找到，则在文件末尾创建新部分，或查找插入位置，如果要排序部分），保存键和下一个键的文件位置
    3.  改变价值
    4.  保存（原始文件的开头到键的位置+实际更改的键+原始文件中下一个键的位置到文件的末尾）（如果在末尾创建了新部分，您可以简单地将新部分附加到原始文件）（如果数据包重写经常使用相同的 ID，您可以在每个键后添加填充空格，大以保存所需类型的任何值（例如：更改`X=1---\n`为`X=100-\n`（更改`-`为空格），因此您的键大小恒定，您只能[更新文件的一部分](https://stackoverflow.com/a/793485/1569168)））
*   数据库，例如[MySQL](http://www.mysql.com/)
*   编写二进制文件（最快的解决方案）并使程序读取值或转换为文本

小记：我用`GetPrivateProfileString()`几年前读取设置文件（大小约1KB），读取形式HDD：50ms，从U盘读取：1000ms！，更改后（1.读取文件到内存2.运行我自己的解析器）它在 HDD 和 USB 上都在 1ms 内运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:34:22.343

谢谢大家的回复，但看起来问题不是来自`WritePrivateProfileStringA()`。

我只需要`malloc()`为 Hook 添加额外的尺寸。

:)

# python - Python networkx 在图中绘制覆盖子组

> ID：12024367
> 
> 赞同：0
> 
> 时间：2012-08-19T05:10:13.503
> 
> 标签：python, graph, overlay, networkx, subgraph

我想知道是否可以使用 python 和可能的 networkx 创建一个图形，覆盖具有不同颜色的子图？这些子图是节点集群。可以在以下位置找到此类图表的示例：

[http://www.barabasilab.com/pubs/CCNR-ALB_Publications/200904-10_PLoSCompBio-HumanPhenotypes/200904-10_PLoSCompBio-Fig2sm.png](http://www.barabasilab.com/pubs/CCNR-ALB_Publications/200904-10_PLoSCompBio-HumanPhenotypes/200904-10_PLoSCompBio-Fig2sm.png)

# php - 检查子元素是否存在于 div 列表中，并基于该元素将类添加到另一个元素

> ID：12024372
> 
> 赞同：0
> 
> 时间：2012-08-19T05:12:11.980
> 
> 标签：php, javascript, jquery, html

想知道是否有人可以帮助我解决这个问题，我有一个清单；基本上我希望jQuery检查每个带有“bullet-btn”类的div中是否有一个子元素有一个类“icon-thumbs-up”，如果是这样的话，在同一个div中找到另一个带有“badge”类的元素并改变它的颜色.

基本上我拥有脚本的方式不是过滤所有列表，而是选择所有带有“icon-thumbs-up”类的元素有什么想法吗？

这是我的html

```
<ul class="content-box">
<li>
    <div class="bullet-btn">
    <h1>Hamburger</h1>
    <span class="counter badge">389</span>
    <span class="icon-thumbs-up"></span>
    </div>
    <div class="bullet-btn">
    <h1>Sirloin</h1>
    <span class="counter badge">389</span>
    <span class="icon-thumbs-down"></span>
    </div>
    <a href="#">View All Trending Topics...</a> 
</li>
<li>
    <div class="bullet-btn">
    <h1>Brett</h1>
    <span class="counter badge">389</span>
    <span class="icon-thumbs-down"></span>
    </div>
    <div class="bullet-btn">
    <h1>Jenny</h1>
    <span class="counter badge">389</span>
    <span class="icon-thumbs-up"></span>
    </div>
    <a href="#">View All Trending Topics...</a> 
</li>
<li>
    <div class="bullet-btn">
    <h1>Lighting</h1>
    <span class="counter badge">389</span>
    <span class="icon-thumbs-up"></span>
    </div>
    <div class="bullet-btn">
    <h1>Music</h1>
    <span class="counter badge">389</span>
    <span class="icon-thumbs-down"></span>
    </div>
    <a href="#">View All Trending Topics...</a> 
</li>
</ul> 
```

这是我的 jQuery

```
 if ($('div.bullet-btn').children('.icon-thumbs-down').length > 0) {
    $(this).find(".badge").css({'color':'red'});
} else {
    $(this).find(".badge").css({'color':'white'});
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T05:16:30.503

```
$('.bullet-btn').each(function() {
    var color = $('.icon-thumbs-down', this).length ? 'red' : 'white';
    $('.badge', this).css('color', color);
}); 
```

这是小提琴：http: [//jsfiddle.net/PSSWc/](http://jsfiddle.net/PSSWc/)

# java - JSF 2.0中数据表中同一列中的不同组件

> ID：12024382
> 
> 赞同：0
> 
> 时间：2012-08-19T05:13:14.743
> 
> 标签：java, jsf

是否可以使用 JSF 2.0 在数据表的单个列中包含不同类型的组件？

我的要求是根据`label`列值，`value`列将有一个输入文本或相应的选择列表。

目前我正在尝试通过支持 bean 来做到这一点。我在. `label`_ `value`_`type of component``arraylist`

当我在数据表中迭代此列表时，如何检查类型并根据结果创建输入或选择列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T07:25:37.653

将`rendered`属性与测试一起使用，该测试使用您用来区分输入和选择列表的任何内容。

例如

```
<h:dataTable value="#{yourBacking.yourList} var="item">
    <h:column>
        <h:inputText value="#{item.value}" rendered="#{item.type == 'input'}" />
        <h:selectOneMenu value="#{item.value}" rendered="#{item.type == 'selectlist'}">
            <f:selectItems value="#{item.values}" />
        </h:selectOneMenu>
    </h:column>
</h:dataTable> 
```

# android - 单击按钮后，弹出窗口输入数据？

> ID：12024384
> 
> 赞同：1
> 
> 时间：2012-08-19T05:13:59.553
> 
> 标签：android, eclipse, popup

我有一个按钮，当我按下它时，我希望弹出一个较小的窗口（到您仍然可以看到前一个屏幕的地方，就像一个盒子里面的盒子）。在那个较小的弹出框内，我希望能够让用户输入几件事，当他们点击 OK 时，它会关闭弹出窗口并重新添加数据。

我该怎么做呢？我会创建另一个活动还是一个对话框？我尝试创建另一个活动，但无法弄清楚如何缩放大小以使其更小。

```
 public void newUserInput(View view){

    } 
```

是按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:57:24.973

声明弹出窗口和 popupView 以及布局充气器。

```
private PopupWindow pw;
private View popupView;
private LayoutInflater inflater; 
```

在 oncreate 方法中，为要显示为弹出窗口的布局充气。

```
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
popupView = inflater.inflate(R.layout.popup_layout, null, false); 
```

这将是您的 onclick 方法。

```
public void newUserInput(View view){
    pw.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
    pw.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
    pw.setOutsideTouchable(false);
    pw.setContentView(popupView);

    // Use any one method - showAtLocation or showAsDropDown to show the popup  
    pw.showAtLocation(parent, gravity, x, y);
    pw.showAsDropDown(anchor, xoff, yoff)

} 
```

# objective-c - 如何使场景转换将值传递给目标类的初始化程序？

> ID：12024387
> 
> 赞同：0
> 
> 时间：2012-08-19T05:14:54.067
> 
> 标签：objective-c, cocos2d-iphone

所以，我对如何用 cocos2d 实现以下行为有点困惑：

想象一下，用户在“关卡选择”场景中......他们选择了他们想要开始的适当关卡，然后点击开始......这将启动：

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[Game scene] withColor:ccBLACK]]; 
```

--- 但是.. 我应该如何向 Game 提供有关用户选择的级别的信息？我正在查看 cocos 代码，但没有看到任何允许为类声明带有参数的自定义 init 方法。所以我只是好奇解决这个问题的常规方法是什么？

为了非常清楚，我想要类似的东西：

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[Game scene] performSelector:@selector(initWithLevel) withObject:userLevel withColor:ccBLACK]]; 
```

然后它将调用游戏的 initWithLevel: 而不是默认的 init 方法（它显示为 +node 调用）......有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:30:41.030

将 @property 添加到您的 Game 类中，该类采用用户选择的级别。我假设它是一个简单的整数。然后用场景类方法初始化Game类，设置属性，在转场中使用。

**不**把多行塞进一条真的很有帮助。这样，这些可能性就开始在你面前跳跃：

```
// initialize your game class
Game* scene = [Game scene];
scene.userSelectedLevel = 10;

// or alternatively:
[scene setUserSelectedLevel:10];

// then transition
CCTransitionScene* transi = [CCTransitionFade transitionWithDuration:1.0 
                                                               scene:scene
                                                           withColor:ccBLACK]
[[CCDirector sharedDirector] replaceScene:transi]; 
```

您还可以更改 Game 类的场景方法以将此参数作为输入，但坦率地说，仅使用属性更容易：

```
+(id) sceneWithLevelNumber:(int)levelNumber
{
    // assign level number to Game instance here
}

// call it like this:
[Game sceneWithLevelNumber:10] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:03:12.117

理想情况下，我们使用主类的一个静态/单个实例......现在创建 MyGame 类来维护游戏特定数据，如 - 分数、级别......您可以在屏幕的任何位置访问这个类......主菜单、级别选择、游戏屏幕。 .

在 MyGame.h 文件中

```
@interface MyGame : NSObject
{
    int mLevel;
}
@property(nonatomic,assign) int         level;
+ (MyGame *)sharedGameObject;
@end 
```

在 MyGame.m 文件中

```
static MyGame *gGame = nil;

@implementation MyGame
  @synthesize level = mLevel;

+(MyGame*)sharedGameObject
{
    if(!gGame)
    {
        gGame = [[MyGame alloc] init];
    }
    return gGame;
}

@end 
```

//在级别选择屏幕中

```
[MyGame sharedGameObject].level = 5;//selected level 
```

//在游戏画面中，

```
int level = [MyGame sharedGameObject].level ; 
```

# artificial-intelligence - AI - 状态中包含的内容

> ID：12024390
> 
> 赞同：1
> 
> 时间：2012-08-19T05:15:55.147
> 
> 标签：artificial-intelligence

我正在学习我的第一门人工智能课程，我必须在作业中定义一些问题（还没有解决它们，只是提供一个定义）。所以我必须定义[布尔可满足性问题](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem) ：

1.  什么是状态？
2.  初始状态是什么？
3.  什么是最终状态？
4.  运营商有哪些？

我的问题是：公式应该成为状态的一部分吗？

到目前为止的考虑：

*   运算符不会改变它，它在计算过程中是恒定的，所以它不是。
*   如果我确实包含它，理论上搜索空间会变得更大，因为可能有更多状态，但实际上公式无法更改，所以我得到一个大状态和一个不对应的分支因子。
*   它从一个执行到下一个执行不同，所以它应该是状态的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:43:52.913

## 这只是给未来读者的注释-不是答案

Vic Smith 是对的，另一种看待这一事实的方式，`in theory there are more states`但实际上不是（我的第二个点），只是将其视为单独的束缚空间。例如，对于公式`X or Y`，有一个束缚空间，对于`not X and Y`另一个束缚空间，它们在表示中没有公共节点。

所以它可以从一个执行到另一个执行不同，但仍然具有相同的“可达”状态和相同的分支因子。并且每次执行都有不同的开始状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:44:13.063

在进行这样的搜索时，您只需要真正考虑问题的不同部分是一种状态，尽管我会说在这种情况下它真的归结为您如何定义问题。

算法的给定运行的搜索空间取决于输入公式，但之后是固定的，即您正在搜索 n 长度位向量的空间，其中 n 是公式中的变量数。所以公式不是状态的一部分，因为它不会变化。

相反的说法是，您正在更大的公式向量对空间中搜索，但是由于您不能将公式作为问题的一部分进行更改，因此这并没有真正增加搜索空间的大小。所以我不会声称“如果我确实包含它，理论上搜索空间会变得更大”。不是，可达状态是一样的，分支是一样的，需要探索来解决问题的空间是一样的。

鉴于此，我的回答是该公式不是状态的一部分，而是定义了状态空间的性质。因此，您的四个问题的答案都将在某种程度上在功能上取决于公式，但状态仅取决于公式的长度。

希望这是有道理的！

# javascript - 如何关闭子窗口？

> ID：12024393
> 
> 赞同：2
> 
> 时间：2012-08-19T05:16:40.980
> 
> 标签：javascript

我想在我的子页面上提供一个按钮，该按钮将从子页面本身关闭子页面。更糟糕的是，我没有编写子页面——它是使用框架编写的。到目前为止，我已经在子页面中尝试过这段代码：

```
Window.opener.location= '/parent page.html';
Window.close(); 
```

而且，在体内：

```
<a href="JavaScript:if(confirm('close window?')) window.close()">close</a> 
```

帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T06:39:05.130

由于您插入的链接位于 iframe 内，请使用`window.top.close()`而不是`window.close()`. `window.top`将引用您创建的子窗口。

您的超链接的 HTML 将是

```
<a href="javascript: if(confirm('close window')) {window.top.opener.location ='/auctioneer notes 8_22_12.html';window.top.close();}">close window</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T17:33:07.753

这是作弊，但是通过刷新父窗口，子窗口会关闭。不是很优雅，但它有效。

```
<form METHOD=post><p align=right><input TYPE="button" VALUE="Close This Window"onClick="window.parent.location.reload();"></p></form> 
```

# android - 搜索给定城市名称中的所有地点

> ID：12024394
> 
> 赞同：5
> 
> 时间：2012-08-19T05:16:43.640
> 
> 标签：android, google-maps, google-places-api

现在我正在使用 Google Places API 来获取特定城市的餐厅列表，查询如下

> [https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Sydney&sensor=true&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Sydney&sensor=true&key=AddYourOwnKeyHere)

但是这里的问题是我们只能有 20 个结果，并且**`next_page_token`**在响应的帮助下，我们可以再次获取 20 个结果，这样我们只能有 60 个结果。

> [在 Google Places API 页面上提及](https://developers.google.com/places/documentation/#PlaceSearchResponses)
> 
> 可返回的最大结果数为 60

**那么有没有其他真实的方式来获取所有餐厅的详细信息。**

仅供参考：我正在 android 应用程序中实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T18:27:06.793

通过在给定坐标集的半径范围内进行搜索（您不能仅按城市名称搜索）。最大搜索半径为 50 公里。如果该区域的结果超过 60 个，您可以缩小搜索范围，然后[将查询拆分为多个调用](https://gist.github.com/flibbertigibbet/7956133)。不过，我不确定让用户一次在移动设备上获取这么多数据是否合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T05:35:37.847

您可以使用不同的位置 API，例如 MapQuest 或 Bing 的吗？据我所知，MapQuest 对社区许可（开放数据）没有交易限制。除了您在查询中施加的结果之外，我认为返回的结果数量没有限制。

# python - 没有名为 Image 的模块

> ID：12024397
> 
> 赞同：37
> 
> 时间：2012-08-19T05:17:49.780
> 
> 标签：python, image, python-imaging-library, django-grappelli

对不起我的语法，我不会说英语。在我设置了文件浏览器、tinymce 和 grappelli 之后，我收到了这个错误：`No module named Image`

```
try:
    from PIL import Image
except ImportError:
    import Image 
```

我把它设置为，`PIL`但它并没有解决问题。我的平台窗口

如果我想要： pip install PIL

```
`c:\Users\Kim\BitNami DjangoStack projects\homex8>pip install PIL
Downloading/unpacking PIL
  Running setup.py egg_info for package PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py

Installing collected packages: PIL
  Running setup.py install for PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py
    building '_imaging' extension
    error: Unable to find vcvarsall.bat` 
```

我不明白那是什么意思

解决了问题。用easy_install重新安装PIL，还有更多动作，这里是[细节](https://mail.python.org/pipermail/image-sig/2010-August/006480.html)。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-08-23T11:54:14.527

您缺少 PIL（Python 图像库和图像包）。要安装我使用的 PIL

```
 pip install pillow 
```

对于运行 Mac OSX 10.6.8 的机器，我下载了 Imaging 软件包并从源代码安装它。 [http://effbot.org/downloads/Imaging-1.1.6.tar.gz](http://effbot.org/downloads/Imaging-1.1.6.tar.gz)和 cd 进入下载目录。然后运行这些：

```
 $ gunzip Imaging-1.1.6.tar.gz
    $ tar xvf Imaging-1.1.6.tar
    $ cd Imaging-1.1.6
    $ python setup.py install 
```

或者，如果您在 Mac 中安装了 PIP

```
 pip install http://effbot.org/downloads/Imaging-1.1.6.tar.gz 
```

那么你可以使用：

```
from PIL import Image 
```

在你的 python 代码中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-19T05:48:59.257

您是否设置了 PIL 模块？[关联](http://www.pythonware.com/products/pil/)

您可以尝试在您的计算机上重新安装它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-22T12:35:12.187

你可以这样查询：

```
pip install image 
```

我已经安装了枕头，但仍然收到您提到的错误。但是在我执行上述命令后，错误消失了。我的程序运行良好。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-02T06:40:45.310

它更改为 :`from PIL.Image import core as image` 用于新版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-28T21:08:34.820

问题：

```
~$ simple-image-reducer

Traceback (most recent call last):

  File "/usr/bin/simple-image-reducer", line 28, in <module>
    import Image

**ImportError: No module named Image** 
```

原因：

图片！=图片

**解决方案**：

1）确保它可用

```
python -m pip install  Image 
```

2）它在哪里可用？

```
sudo find ~ -name image -type d 
```

-->> 目录 /home/MyHomeDir/.local/lib/python2.7/site-packages/image ->> OK

3）通过链接让 simple-image-reducer 理解：

```
ln -s ~/.local/lib/python2.7/site-packages/image
~/.local/lib/python2.7/site-packages/Image 
```

4) 再次调用`simple-image-reducer` 。作品：-）

# django - 不使用 djangoforms 的 auto_now=True 会导致 GAE 崩溃？

> ID：12024400
> 
> 赞同：0
> 
> 时间：2012-08-19T05:18:14.347
> 
> 标签：django, google-app-engine

这是我第一次用 djangoforms 而不是直接使用 Django 来玩 Google App Engine。我不明白为什么 db.DateTimeProperty() 会发生这种情况。

从 google.appengine.ext 导入日期时间导入数据库

```
class BoringOldEvent(db.Model):
    """Models an individual Event that someone creates"""
    creator = db.StringProperty()
    date_created = db.DateTimeProperty(auto_now_add=True)
    start_date_time = db.DateTimeProperty() 
```

`start_date_time = db.DateTimeProperty()` **如果没有**就会崩溃`auto_now_add=True`。

我敢肯定有一个很好的理由，但我现在只能摸不着头脑，因为用户肯定希望在某个时候输入日期时间......

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/Users/mw/Documents/yayimin/main.py", line 8, in <module>
    import events.views
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/Users/mw/Documents/yayimin/events/views.py", line 13, in <module>
    class EventForm(djangoforms.ModelForm):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/djangoforms.py", line 772, in __new__
    form_field = prop.get_form_field()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/djangoforms.py", line 353, in get_form_field
    return super(DateTimeProperty, self).get_form_field(**defaults)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/djangoforms.py", line 200, in get_form_field
    return form_class(**defaults)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/forms/fields.py", line 394, in __init__
    super(DateTimeField, self).__init__(*args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/forms/fields.py", line 99, in __init__
    widget = widget()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/forms/widgets.py", line 414, in __init__
    self.format = formats.get_format('DATETIME_INPUT_FORMATS')[0]
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/utils/formats.py", line 67, in get_format
    if use_l10n or (use_l10n is None and settings.USE_L10N):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/utils/functional.py", line 276, in __getattr__
    self._setup()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined.
INFO     2012-08-19 05:07:06,936 dev_appserver.py:2952] "GET /create/ HTTP/1.1" 500 - 
```

超级骗子提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:04:54.297

这取决于您使用的是 Python 2.5 还是 2.7。如果您使用的是 2.7，则需要`DJANGO_SETTINGS_MODULE`在您的`app.yaml`：

```
env_variables:
  DJANGO_SETTINGS_MODULE: 'myapp.settings' 
```

请参阅[Django 注释](https://developers.google.com/appengine/docs/python/tools/libraries27#django)。

# android - 如何确定Android应用程序库中的图像何时被长按？

> ID：12024402
> 
> 赞同：0
> 
> 时间：2012-08-19T05:18:54.903
> 
> 标签：android, image, gallery

我正在编写一个图像应用程序，我需要确定何时长按图像并对图像进行一些处理？我不知道如何听长按图库中的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:30:01.430

假设您使用的是 ImageView 等视图，您可以使用[setOnLongClickListener()](https://developer.android.com/reference/android/view/View.html#setOnLongClickListener%28android.view.View.OnLongClickListener%29)并将其传递给[OnLongClickListener](https://developer.android.com/reference/android/view/View.OnLongClickListener.html)来处理您的图像。

# symfony - symfony2 在哪里存储它拥有的默认服务？

> ID：12024404
> 
> 赞同：1
> 
> 时间：2012-08-19T05:20:55.607
> 
> 标签：symfony

Symfony 有一些默认服务，例如

```
 $this->get("session") 
```

等等..服务在哪里定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:56:19.597

该服务在 Symfony2 中定义：

```
Symfony\Component\HttpFoundation\Session\Session; 
```

并运行此命令并查看 symfony2 所有服务：

```
 php app/console container:debug 
```

# c# - 如何将图像旋转任意角度？

> ID：12024406
> 
> 赞同：14
> 
> 时间：2012-08-19T05:21:00.880
> 
> 标签：c#

我有动画 gif，我正在使用一个类来解析其中的图像（帧）。课程是：

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.Collections.Generic;
using System.IO;

public class AnimatedGif
{
    private List<AnimatedGifFrame> mImages = new List<AnimatedGifFrame>();
    public AnimatedGif(string path)
    {
        Image img = Image.FromFile(path);
        int frames = img.GetFrameCount(FrameDimension.Time);
        if (frames <= 1) throw new ArgumentException("Image not animated");
        byte[] times = img.GetPropertyItem(0x5100).Value;
        int frame = 0;
        for (; ; )
        {
            int dur = BitConverter.ToInt32(times, 4 * frame);
            mImages.Add(new AnimatedGifFrame(new Bitmap(img), dur));
            if (++frame >= frames) break;
            img.SelectActiveFrame(FrameDimension.Time, frame);
        }
        img.Dispose();
    }
    public List<AnimatedGifFrame> Images { get { return mImages; } }
}

public class AnimatedGifFrame
{
    private int mDuration;
    private Image mImage;
    internal AnimatedGifFrame(Image img, int duration)
    {
        mImage = img; mDuration = duration;
    }
    public Image Image { get { return mImage; } }
    public int Duration { get { return mDuration; } }
} 
```

现在在form1中，我在这种情况下循环帧4，我想将动画旋转任意角度。现在它每旋转 45 或 90 度。我想为动画添加更多帧（图像），所以如果我将旋转设置为 31 或 10 度，我会看到动画旋转 10 度。

这是 Form1 中的代码，效果不好。我正在使用一个我尚未测试的旋转功能，如果它有任何工作。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace AnimatedGifEditor
{
    public partial class Form1 : Form
    {
        Image myImage;
        AnimatedGif myGif;
        Bitmap bitmap;

        public Form1()
        {
            InitializeComponent();

            myImage = Image.FromFile(@"D:\fananimation.gif");
            myGif = new AnimatedGif(@"D:\fananimation.gif");
            for (int i = 0; i < myGif.Images.Count; i++)
            {
                pictureBox1.Image = myGif.Images[3].Image;
                bitmap = new Bitmap(pictureBox1.Image);
                rotateImage(bitmap, 76);
                pictureBox1.Image = bitmap;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

private Bitmap RotateImg(Bitmap bmp, float angle, Color bkColor)
    {
        int w = bmp.Width;
        int h = bmp.Height;
        bmp.PixelFormat pf = default(bmp.PixelFormat);
        if (bkColor == Color.Transparent)
        {
            pf = bmp.Format32bppArgb;
        }
        else
        {
            pf = bmp.PixelFormat;
        }

        Bitmap tempImg = new Bitmap(w, h, pf);
        Graphics g = Graphics.FromImage(tempImg);
        g.Clear(bkColor);
        g.DrawImageUnscaled(bmp, 1, 1);
        g.Dispose();

        GraphicsPath path = new GraphicsPath();
        path.AddRectangle(new RectangleF(0f, 0f, w, h));
        Matrix mtrx = new Matrix();
        //Using System.Drawing.Drawing2D.Matrix class 
        mtrx.Rotate(angle);
        RectangleF rct = path.GetBounds(mtrx);
        Bitmap newImg = new Bitmap(Convert.ToInt32(rct.Width), Convert.ToInt32(rct.Height), pf);
        g = Graphics.FromImage(newImg);
        g.Clear(bkColor);
        g.TranslateTransform(-rct.X, -rct.Y);
        g.RotateTransform(angle);
        g.InterpolationMode = InterpolationMode.HighQualityBilinear;
        g.DrawImageUnscaled(tempImg, 0, 0);
        g.Dispose();
        tempImg.Dispose();
        return newImg;
    }
    }
} 
```

我用于测试的动画 gif 可以在这里找到：

[![在此处输入图像描述](../Images/5cb56ea19fb9e67892cc3295cf6ffc66.png)](https://i.stack.imgur.com/Atj8j.gif)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-19T10:47:40.283

我不明白你的问题是什么，但我认为你的代码可以改进。我认为您不需要直接使用`Matrix`该类。有一些功能可以为您工作。事实上，您唯一需要的是：将旋转点设置为中心，旋转图形并在其上绘制，使用`Graphics`类的一些函数。因此，要旋转图像，您可以使用以下简单代码：

```
private Bitmap RotateImage(Bitmap bmp, float angle) {
     Bitmap rotatedImage = new Bitmap(bmp.Width, bmp.Height);
     rotatedImage.SetResolution(bmp.HorizontalResolution, bmp.VerticalResolution);

     using (Graphics g = Graphics.FromImage(rotatedImage)) {
        // Set the rotation point to the center in the matrix
        g.TranslateTransform(bmp.Width / 2, bmp.Height / 2);
        // Rotate
        g.RotateTransform(angle);
        // Restore rotation point in the matrix
        g.TranslateTransform(- bmp.Width / 2, - bmp.Height / 2);
        // Draw the image on the bitmap
        g.DrawImage(bmp, new Point(0, 0));
     }

     return rotatedImage;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-08-17T09:58:52.867

根据之前的答案，我创建了不会剪切图像的代码（其他示例对我不起作用）

```
 private Bitmap RotateImage(Bitmap bmp, float angle)
    {
        float height = bmp.Height;
        float width = bmp.Width;
        int hypotenuse = System.Convert.ToInt32(System.Math.Floor(Math.Sqrt(height * height + width * width)));
        Bitmap rotatedImage = new Bitmap(hypotenuse, hypotenuse);
        using (Graphics g = Graphics.FromImage(rotatedImage))
        {
            g.TranslateTransform((float)rotatedImage.Width / 2, (float)rotatedImage.Height / 2); //set the rotation point as the center into the matrix
            g.RotateTransform(angle); //rotate
            g.TranslateTransform(-(float)rotatedImage.Width / 2, -(float)rotatedImage.Height / 2); //restore rotation point into the matrix
            g.DrawImage(bmp, (hypotenuse - width) / 2, (hypotenuse - height) / 2, width, height);
        }
        return rotatedImage;
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-05T17:06:21.267

我自己尝试了@Omar 的答案并意识到，原始图像在两侧被切割......我已经重写了它，因此它将图像调整为新尺寸：

```
private static Bitmap RotateImage(Bitmap bmp, float angle)
{
    float alpha = angle;

    //edit: negative angle +360
    while(alpha <0) alpha +=360;

    float gamma = 90;
    float beta = 180 - angle - gamma;

    float c1 = bmp.Height;
    float a1 = (float)(c1 * Math.Sin(alpha * Math.PI / 180) / Math.Sin(gamma * Math.PI / 180));
    float b1 = (float)(c1 * Math.Sin(beta * Math.PI / 180) / Math.Sin(gamma * Math.PI / 180));

    float c2 = bmp.Width;
    float a2 = (float)(c2 * Math.Sin(alpha * Math.PI / 180) / Math.Sin(gamma * Math.PI / 180));
    float b2 = (float)(c2 * Math.Sin(beta * Math.PI / 180) / Math.Sin(gamma * Math.PI / 180));

    int width = Convert.ToInt32(b2 + a1);
    int height = Convert.ToInt32(b1 + a2);

    Bitmap rotatedImage = new Bitmap(width, height);
    using (Graphics g = Graphics.FromImage(rotatedImage))
    {
        g.TranslateTransform(rotatedImage.Width / 2, rotatedImage.Height / 2); //set the rotation point as the center into the matrix
        g.RotateTransform(angle); //rotate
        g.TranslateTransform(-rotatedImage.Width / 2, -rotatedImage.Height / 2); //restore rotation point into the matrix
        g.DrawImage(bmp, new Point((width - bmp.Width) / 2, (height - bmp.Height) / 2)); //draw the image on the new bitmap
    }
    return rotatedImage;
} 
```

[![30 度半径处的尺寸变化](../Images/b458aa1b7b4986dd6eca515176babe7b.png)](https://i.stack.imgur.com/TQ3Tz.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-19T06:37:15.447

你试过旋转翻转吗？

```
public partial class Form1 : Form
{
    Image myImage;
    AnimatedGif myGif;
    Bitmap bitmap;
    public Form1()
    {
        InitializeComponent();
        myImage = Image.FromFile(@"D:\fananimation.gif");
        bitmap = new Bitmap(myImage);
        bitmap.RotateFlip(System.Drawing.RotateFlipType.Rotate90FlipNone);
        this.pictureBox1.Image = bitmap;
    }

} 
```

[来源](http://code.google.com/p/nepaliocr/source/browse/trunk/FormMainWindow.h?spec=svn112&r=112)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T11:15:57.850

我在VB中使用这个函数：

```
 Public Function RotateImage(ByRef image As Image, ByVal angle As Single) As Drawing.Bitmap
    If image Is Nothing Then
        Throw New ArgumentNullException("image")
    End If

    Dim pi2 As Single = Math.PI / 2.0
    Dim oldWidth As Single = image.Width
    Dim oldHeight As Single = image.Height

    Dim theta As Single = angle * Math.PI / 180.0
    Dim locked_theta As Single = theta

    If locked_theta < 0.0 Then locked_theta += 2 * Math.PI

    Dim newWidth, newHeight As Single
    Dim nWidth, nHeight As Integer

    Dim adjacentTop, oppositeTop As Single
    Dim adjacentBottom, oppositeBottom As Single

    If (locked_theta >= 0.0 And locked_theta < pi2) Or _
    (locked_theta >= Math.PI And locked_theta < (Math.PI + pi2)) Then
        adjacentTop = Math.Abs(Math.Cos(locked_theta)) * oldWidth
        oppositeTop = Math.Abs(Math.Sin(locked_theta)) * oldWidth

        adjacentBottom = Math.Abs(Math.Cos(locked_theta)) * oldHeight
        oppositeBottom = Math.Abs(Math.Sin(locked_theta)) * oldHeight
    Else
        adjacentTop = Math.Abs(Math.Sin(locked_theta)) * oldHeight
        oppositeTop = Math.Abs(Math.Cos(locked_theta)) * oldHeight

        adjacentBottom = Math.Abs(Math.Sin(locked_theta)) * oldWidth
        oppositeBottom = Math.Abs(Math.Cos(locked_theta)) * oldWidth
    End If

    newWidth = adjacentTop + oppositeBottom
    newHeight = adjacentBottom + oppositeTop

    nWidth = Int(Math.Ceiling(newWidth))
    nHeight = Int(Math.Ceiling(newHeight))

    Dim rotatedBmp As New Drawing.Bitmap(nWidth, nHeight)

    Dim g As Graphics = Graphics.FromImage(rotatedBmp)

    Dim points(2) As Point

    If (locked_theta >= 0.0 And locked_theta < pi2) Then

        points(0) = New Point(Int(oppositeBottom), 0)
        points(1) = New Point(nWidth, Int(oppositeTop))
        points(2) = New Point(0, Int(adjacentBottom))

    ElseIf locked_theta >= pi2 And locked_theta < Math.PI Then

        points(0) = New Point(nWidth, Int(oppositeTop))
        points(1) = New Point(Int(adjacentTop), nHeight)
        points(2) = New Point(Int(oppositeBottom), 0)

    ElseIf locked_theta >= Math.PI And locked_theta < (Math.PI + pi2) Then

        points(0) = New Point(Int(adjacentTop), nHeight)
        points(1) = New Point(0, Int(adjacentBottom))
        points(2) = New Point(nWidth, Int(oppositeTop))

    Else

        points(0) = New Point(0, Int(adjacentBottom))
        points(1) = New Point(Int(oppositeBottom), 0)
        points(2) = New Point(Int(adjacentTop), nHeight)
    End If

    g.DrawImage(image, points)

    g.Dispose()
    image.Dispose()

    Return rotatedBmp

End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-29T16:59:57.090

根据 Timo 的代码，我做了一些改进，通过改进，可以成功地给出负角（最高 -360）作为参数

```
private static Bitmap RotateImage(Bitmap bmp, float angle) 
    {
        float alpha = angle;

        //edit: negative angle +360
        while (alpha < 0) alpha += 360;

        float gamma = 90;
        float beta = 180 - angle - gamma;

        float c1 = bmp.Height;
        float a1 = Math.Abs((float)(c1 * Math.Sin(alpha * Math.PI / 180)));
        float b1 = Math.Abs((float)(c1 * Math.Sin(beta * Math.PI / 180)));

        float c2 = bmp.Width;
        float a2 = Math.Abs((float)(c2 * Math.Sin(alpha * Math.PI / 180)));
        float b2 = Math.Abs((float)(c2 * Math.Sin(beta * Math.PI / 180)));

        int width = Convert.ToInt32(b2 + a1);
        int height = Convert.ToInt32(b1 + a2);

        Bitmap rotatedImage = new Bitmap(width, height);
        using (Graphics g = Graphics.FromImage(rotatedImage))
        {
            g.TranslateTransform(rotatedImage.Width / 2, rotatedImage.Height / 2); //set the rotation point as the center into the matrix
            g.RotateTransform(angle); //rotate
            g.TranslateTransform(-rotatedImage.Width / 2, -rotatedImage.Height / 2); //restore rotation point into the matrix
            g.DrawImage(bmp, new Point((width - bmp.Width) / 2, (height - bmp.Height) / 2)); //draw the image on the new bitmap
        }
        return rotatedImage;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-09T00:41:52.270

我检查了答案，他们都至少存在以下问题之一：

*   裁剪/不正确的居中
*   不必要的保证金
*   某些角度范围的错误
*   不必要的复杂计算/代码

该解决方案可以处理任何角度（正、负、超过 360° 等）。没有裁剪或过多的边距。也没有内存泄漏。

```
public Bitmap RotateBitmap(Bitmap bmp, float angle)
{
    double radianAngle = angle / 180.0 * Math.PI;
    double cosA = Math.Abs(Math.Cos(radianAngle));
    double sinA = Math.Abs(Math.Sin(radianAngle));

    int newWidth = (int)(cosA * bmp.Width + sinA * bmp.Height);
    int newHeight = (int)(cosA * bmp.Height + sinA * bmp.Width);

    var rotatedBitmap = new Bitmap(newWidth, newHeight);
    rotatedBitmap.SetResolution(bmp.HorizontalResolution, bmp.VerticalResolution);

    using (Graphics g = Graphics.FromImage(rotatedBitmap))
    {
        g.TranslateTransform(rotatedBitmap.Width / 2, rotatedBitmap.Height / 2);
        g.RotateTransform(angle);
        g.TranslateTransform(-bmp.Width / 2, -bmp.Height / 2);
        g.DrawImage(bmp, new Point(0, 0));
    }

    bmp.Dispose();//Remove if you want to keep oryginal bitmap

    return rotatedBitmap;
} 
```

# c - C语言中的幻数

> ID：12024408
> 
> 赞同：1
> 
> 时间：2012-08-19T05:21:08.757
> 
> 标签：c, magic-numbers

我想用一个幻数作为常数来检查内存块是否被违反，是否有一种“反向检查”的方法可以将签名恢复为十六进制格式`MAGIC_32BIT`

```
 #define MAGIC_32BIT 0x77A5844CU
 int signature = (int)MAGIC_32BIT; 
```

另外，我想使用一个更有创意的幻数，关于生成它们的任何想法或要遵循的规则？没有冒犯，但我听说过微软的`0xB16B00B5`，并希望我的更人性化“可读”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:37:58.580

我意识到这个回复可能无法回答您的问题，但我仍然希望它可能会有所帮助。

您的“幻数”实际上应该取决于您的应用程序以及您想要检测或预期的内存损坏类型。

我见过用 0xEE 初始化任务的整个堆栈的操作系统——这个值既容易识别又不太可能被大多数人使用。此方法可用于通过计算 0xEE 字节来估计未使用的堆栈空间量。是否完美——不；但它很快，（相当）便宜且易于操作。这样做的好处之一是您有时可以轻松识别哪些字节正在损坏（例如，如果您在 0xEE 字节的海洋中有几个非 0xEE 字节）。基本思想应该可以转移到其他领域。

你可以走自定义路线，每个数据结构都有一个唯一的幻数——比如 CRC。它更昂贵，但在检测数据结构是否已损坏方面会更好。它不会告诉您它在何处/如何/何时损坏，而只会告诉您是否损坏。不幸的是，这会使您的人类可读请求失败。

如果您的内存块足够大，则可以利用 MMU 并通过默认禁用对它们的写入来保护您的内存块，并且仅在您需要进行更改时启用它们。这种方法会产生一些写入性能损失，但它可以帮助检测何时、何地以及由谁发生损坏。这完全消除了幻数。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T05:48:04.770

是的，我找到了答案，直接检查宏，cegfault 的 wiki 评论显示 int 变量是可互换的，无需使用强制转换。

```
#define MAGIC_NUM 0x8BADF00D
#define CHECK_SIG(A) (A == MAGIC_NUM) 
```

# shell - 如何让段落包含shell脚本中的关键词？

> ID：12024410
> 
> 赞同：3
> 
> 时间：2012-08-19T05:22:38.630
> 
> 标签：shell, awk, grep, cut

我想得到包含关键词的整个段落。

例如，以下是输出`"ifconfig -a"`

```
bond0     Link encap:Ethernet  HWaddr 00:11:3F:C1:47:98  
          inet6 addr: fe80::211:3fff:fec1:4798/64 Scope:Link
          UP BROADCAST RUNNING MASTER MULTICAST  MTU:1500  Metric:1
          RX packets:1881856 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1059020 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:2618747813 (2.4 GiB)  TX bytes:182058226 (173.6 MiB)

bond0:oam Link encap:Ethernet  HWaddr 00:11:3F:C1:47:98  
          inet addr:135.2.156.97  Bcast:135.2.156.111  Mask:255.255.255.240
          UP BROADCAST RUNNING MASTER MULTICAST  MTU:1500  Metric:1

bond0:oamA Link encap:Ethernet  HWaddr 00:11:3F:C1:47:98  
          inet addr:135.2.156.103  Bcast:135.2.156.111  Mask:255.255.255.240
          UP BROADCAST RUNNING MASTER MULTICAST  MTU:1500  Metric:1 
```

我想以粗体提取段落。即该段落包含`"bond0:oamA"` 我知道的关键词如果我使用grep，只有该行

```
bond0:oamA Link encap:Ethernet  HWaddr 00:11:3F:C1:47:98 
```

会得到。但我想提取整个段落包含的关键词。

有没有办法得到这一段？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T05:33:05.847

试试这个命令：

```
ifconfig -a | awk -vRS='' '$1~/bond0:oamA/' 
```

`RS`什么时候`null`，awk 将文件解析为多行记录。

# python - 过滤 BeautifulSoup

> ID：12024415
> 
> 赞同：1
> 
> 时间：2012-08-19T05:25:00.547
> 
> 标签：python, beautifulsoup

我正在尝试从另一个网页获取大学及其网站的列表。

我已经得到输入以显示我想要的每一行的 HTML，但我正在尝试进一步格式化文本。我只希望显示大学名称和指向该大学的链接。有任何想法吗？

这是我的代码：

```
url = "http://www.arizona.edu/colleges"
page = urllib2.urlopen(url)
soup = BeautifulSoup(page.read())
universities = soup.findAll('span', {'class' : 'field-content'})
for eachuniversity in universities:
   print eachuniversity 
```

这是我得到的一个例子`eachuniversity`：

```
<div class="views-field-title">
  <span class="field-content">
    <a href="/colleges/college-agriculture-life-sciences">
    <h3>College of Agriculture &amp; Life Sciences</h3>
    </a>
  </span>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T06:26:13.090

以下将为您提供所需的内容。[BeautifulSoup 文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)（[版本 4 文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)）中很容易获得用于执行此操作的信息。

```
for uni in universities:
    link = uni.find("a")
    college_name = link.text
    web_page = link["href"] 
```

对于第一个大学（你的例子）：

```
>>> print web_page
"/colleges/college-agriculture-life-sciences"
>>> print college_name
College of Agriculture &amp; Life Sciences 
```

我将把处理相对/绝对链接和特殊 HTML 字符作为练习留给你。

* * *

### 这是如何工作的

从您[最近的问题](https://stackoverflow.com/questions/12024679/how-can-i-use-beautifulsoup-to-search-for-p-tags-inside-of-certain-spans)中，我了解到您在从`uni`对象中提取标签时遇到问题。您的`universities`变量是`Tag`对象的集合，每个对象都是可用于访问其子对象的类字典对象。尝试阅读[“Navigating the Parse Tree”](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Navigating%20the%20Parse%20Tree)，以更好地了解如何使用 BeautifulSoup 进行解析。

# javascript - 图像翻转脚本未按预期工作

> ID：12024419
> 
> 赞同：0
> 
> 时间：2012-08-19T05:25:21.317
> 
> 标签：javascript, html, dreamweaver

这就是我在 HTML 页面中调用 JavaScript 函数的方式：-

```
<script type="text/javascript" src="imagerollover.js"></script>

</script>
<script type="text/javascript">
//Following function should be called at the end of the page:
imagerollover();
</script>
</head>

<body>
.
.
. 
```

这是我的 imagerollover.js:-

```
function imagerollover(){

    var allimages=document.getElementsByTagName("img")
    var preloadimages=[]
    for (var i=0; i<allimages.length; i++){
        if (allimages[i].getAttribute("data-over")){ //if image carries "data-over" attribute
            preloadimages.push(new Image()) //preload "over" image
            preloadimages[preloadimages.length-1].src=allimages[i].getAttribute("data-over")
            allimages[i].onmouseover=function(){
                this.src=this.getAttribute("data-over")
            }
            allimages[i].onmouseout=function(){
                this.src=this.getAttribute("data-out")
            }
        } //end if
    } //end for loop
}

//Usage: Call following function at the end of the page:
//imagerollover() 
```

图片标签：

```
<img src="knitting1.jpg" 
data-over="knitting2.jpg" 
data-out="knitting1.jpg" 
alt="Logo" width="400px" height="90" align="middle" /> 
```

此外，我网站的根文件夹中存在 knitting1.jpg 和 knitting2.jpg 图像。我不知道出了什么问题。

一开始我在 imagerollover.js 文件中放置了一个警报。它被调用，但没有显示任何翻转效果。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:28:28.917

您需要运行此 onload - 当您执行该函数时，您的图像标签尚不可用于脚本 - 您实际上并没有遵循脚本的说明，该说明应该放在页面末尾或我的建议中负载

```
<head>
<script type="text/javascript" src="imagerollover.js"></script>

</script>
<script type="text/javascript">
window.onload=function() 
  //Following function should be called at the end of the page OR on window.onload!
  imagerollover();
}
</script>
</head> 
```

# java - 如何充分利用多个处理器？

> ID：12024420
> 
> 赞同：2
> 
> 时间：2012-08-19T05:26:11.233
> 
> 标签：java, multithreading, web-crawler, multiprocessing

我正在使用 Java 的具有 32 个虚拟处理器的服务器上进行网络爬取。我怎样才能充分利用这些处理器？我已经看到了一些关于多线程编程的建议，但我想知道如何确保所有处理器都被利用，因为我们也可以在单处理器机器上进行多线程编程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T05:37:36.817

对此没有简单的答案......除了确保使用所有处理器的方法是正确使用多*线程*。（注意：这是一个循环答案！）

基本上，有效使用多个处理器的方法是：

*   确保有可以并行完成的工作，并且
*   减少/消除强制一个线程等待而另一个线程做某事的争用点。

当您进行简单计算时，这已经足够困难了。对于网络爬虫，您会遇到线程竞争网络和（可能）删除服务器带宽的额外问题，并且它们通常会尝试将其结果放入共享数据结构或数据库中。

这就是在这个一般性级别上可以说的所有内容......

* * *

正如@veer 正确指出的那样，您不能“确保”它。

* * *

> ...但是使用大量线程肯定会在墙上时间上更快，因为所有可悲的网络延迟都将并行发生...

实际上，如果过度使用，线程负载会因为争用而*降低吞吐量。*仅仅在问题上投入大量线程并不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:37:40.797

处理器管理是通过您使用的虚拟机（即 JVM）以本机方式实现的。如果您使用 Java Hotspot VM，您可以在这里查看[Java Hotspot VM Options来优化您的机器。](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)如果您使用的是第三方 VM，那么您的提供商可能会帮助您根据您的要求对其进行调整。

设计中的应用性能实际上取决于您。如果您想监控线程和内存使用情况以优化您的应用程序，您可以使用迄今为止可用的任何 VM 监控工具。Java 虚拟机 (JVM) 具有内置工具，使您能够使用 JMX 监视和管理它。有关详细信息，您可以[使用 JMX 检查平台监控和管理](http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html)。对于第三方虚拟机，我猜你必须联系供应商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T06:03:52.527

计算机或程序的速度取决于其处理链中最慢的环节。仅仅增加 CPU 容量并不能确保性能达到峰值。撇开缓存大小、RAM 等其他问题不谈，关于如何利用所有处理器的问题，有两种基本方法：

[1] 使用 Jit/just-in-time 编译器/解释器技术，例如 Java/.NET。我对 java 了解不多，但 .NET 抖动绝对是为了利用机器上所有可用的处理器而设计的。事实上，这个特性使得 jitter 在其他静态语言编译器（如 C/C++）中脱颖而出，因为 jitter “知道”它位于 32 个处理器上，它比程序更能利用它们在任何其他机器上静态编译。（前提是你已经为它写了一个健壮的多线程代码！）

[2] C/C++ 编程。这是经典的方法。如果您在具有 32 个 CPU 的同一台机器上编译您的代码，并在您的程序中采取适当的措施，例如内存管理、处理指针等，那么 C/C++ 程序将是最佳的，并且会比其 CLR/JVM 执行得更好对应物（因为它在没有垃圾收集器或 VM 的额外开销的情况下运行）。

但请记住，在 .NET/Java 中编写健壮的代码比在 C/C++ 中容易得多。因此，如果您不是“铁杆”程序员，我建议您采用前一种方法。还要记住要小心处理多个线程，例如当多个线程尝试更改相同的变量时锁定变量。但是，如果变量出现意外行为，过度锁定可能会使您的代码挂起。

# c++ - C++：使用带有用户输入的参数？

> ID：12024421
> 
> 赞同：-1
> 
> 时间：2012-08-19T05:26:57.090
> 
> 标签：c++, parameters

我刚开始使用 c++，只是在玩一些前几天学到的东西，而我编写的这个程序除了试图弄清楚如何在用户输入中使用可返回参数之外没有真正的目的。当我尝试编译这个时，整个事情就变得疯狂了。它出什么问题了？

这是我写的代码：

```
 #include <iostream>

// defining the Parameters of Add and Multply

 int add(int a, int b)
 {
 return a + b;
 }
 int multiply(int c, int d)
 {
 return c * d;
 }

 int main ()
{
using namespace std;

// user defines vairables

int x;
int y;
int w;
int z;

cout << "enter x value now:" << endl;
cin >> x >> endl;
cout << "enter y value now" << endl;
cin >> y >> endl;
cout << "enter w value now" << endl;
cin >> w >> endl;
cout << "enter z value now" << endl;`
cin >> z >> endl;

//computation of variables

cout << "computing x and y factors" << add(x, y) << endl;
cout << "computing w and z cordinates" << multiply(w, z) << endl;
cout << " " << endl;
cout << "final answer is:  " << add(x, y) + multiply(w, z) << endl;

cin.clear();
cin.ignore(255, '\n');
cin.get();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T05:29:39.237

首先：由于您要询问编译错误，因此您应该发布您遇到的确切编译错误。

你的问题在于这样的陈述：

```
cin >> z >> endl; 
```

应该：

```
cin >> z; 
```

您只需将输入的输入变量读入一个变量，使用`cin`您没有向流中插入任何内容。`endl`在流中插入换行符。

除了第 32 行有一个杂散的``，您需要将其删除。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:10:50.663

是的，显然该程序很好......正如Als提到的那样，只是一个愚蠢的小错误。让我再解释一下。 **endl**是用于在屏幕上输出新行的字符。当您通过**cin**进行输入时，您不能同时打印某些内容。cin 是标准输入流，而不是输出流。如果你想打印**endl**，你可以这样做。

cout << x << endl ;`

# ruby - 了解 Ruby 的基本管理实用程序？

> ID：12024424
> 
> 赞同：2
> 
> 时间：2012-08-19T05:27:04.840
> 
> 标签：ruby, rubygems, gem, rvm

我是 Ruby 和 RVM 的新手，但通过遵循一个简单的教程，我已经成功地在我的系统上进行了设置。在教程中，命令如

```
gem install rails
which gem
bundle install 
```

都使用了，没有过多解释Ruby管理生态。我的困惑是所有这些实用程序来自哪里？我只安装了 ruby​​ 1.9.3 和 rvm，但不知何故，“gem”、“which”和“bundle”是我路径中的可执行程序。他们究竟是如何到达那里的，我在哪里可以阅读他们所采取的论点以及我可能尚未发现的类似实用程序。他们没有手册页。

最后，我相信 rvm 类似于 Python 中的 virtualenv 而 gem 类似于 pip？

感谢您的帮助开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:22:22.943

在 Ruby 1.9 中，Rubygems 包管理器包含在标准 Ruby 中，这就是它的`gem`来源。更多信息`gem -h`或和[http://guides.rubygems.org/](http://guides.rubygems.org/)。

`which`是 unixoid 系统中的标准实用程序，与 Ruby 无关（`man 1 which`详细信息）。

`bundle`来自[Bundler](http://gembundler.com/)，它是管理应用程序依赖项的常用 gem。您通常必须手动安装它，除非 RVM 现在这样做。`bundle -h`有更多信息给你。

# scheme - 这个方案/script-fu/gimp 代码中的错误是什么？

> ID：12024429
> 
> 赞同：2
> 
> 时间：2012-08-19T05:28:10.903
> 
> 标签：scheme, gimp, script-fu

我收到以下错误：

错误：gimp-layer-new 的参数 1 的类型无效

但据我所知，当我运行该函数时，“图像”仍在范围内，并且应该设置为 gimp-image-new 的返回值，这是正确的类型。我想要的只是一个愚蠢的小动画 gif，它已经到了可以更快地手动执行这些操作的地步。

```
(begin
 (let*
      (
           (image (gimp-image-new 512 384 1))
           (counter 0)
      )

      (while (< counter 30)
           (let*
                (
                     (layer (gimp-layer-new image 512 384 2 (string-append (string-append "frame " (number->string counter)) " (33ms)") 100 0) )
                )

                (gimp-image-add-layer image layer -1)
                (plugin-in-rgb-noise 0 image layer 0 1 0.37 0)
                (plugin-in-rgb-noise 0 image layer 0 1 0.37 0)
                (gimp-brightness-contrast layer 0 -42)
                (plugin-in-rgb-noise 0 image layer 0 1 0.37 0)
                (plug-in-deinterlace 0 image layer 1)
           )
           (set! counter (+ counter 1))
      )
      (gimp-display-new image)
 )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:59:39.893

试试这个：

```
(begin
  (let* ((image (car (gimp-image-new 512 384 1))) ; here was the problem
         (counter 0))    
    (while (< counter 30)
           (let* ((layer
                   (gimp-layer-new
                    image 512 384 2
                    (string-append "frame " (number->string counter) " (33ms)")
                    100 0)))
             (gimp-image-add-layer image layer -1)
             (plugin-in-rgb-noise 0 image layer 0 1 0.37 0)
             (plugin-in-rgb-noise 0 image layer 0 1 0.37 0)
             (gimp-brightness-contrast layer 0 -42)
             (plugin-in-rgb-noise 0 image layer 0 1 0.37 0)
             (plug-in-deinterlace 0 image layer 1))
           (set! counter (+ counter 1)))
    (gimp-display-new image))) 
```

我冒昧地正确缩进了您的代码并简化了`string-append`表达式，但本质上问题是您必须根据[本页](http://www.gimp.org/tutorials/Basic_Scheme/)第 6 节中的示例获取`car`返回的值的。这将解决报告中的问题。`gimp-image-new``Error: Invalid type for argument 1 to gimp-layer-new`

# javascript - 茉莉间谍未定义

> ID：12024430
> 
> 赞同：3
> 
> 时间：2012-08-19T05:28:22.980
> 
> 标签：javascript, coffeescript, jasmine, jasmine-jquery

当我运行我的茉莉花规格时，我收到以下错误：

```
Error: Expected a spy, but got undefined. 
```

我的咖啡脚本代码：

```
 describe "setupForm", ->
    beforeEach ->
      spyOn(Subscription.prototype, 'runSimulation')

    it "calls subscription.runSimulation when form is submitted with number", ->
      Subscription.prototype.runSimulation()
      expect(Subscription.prototype.runSimulation()).toHaveBeenCalled() 
```

我已经将我的错误代码简化为上面的调试代码，但我无法弄清楚为什么当我明确地将它称为我的测试时，它会说从未调用过间谍。我正在其他地方测试该方法，所以我认为错误必须与我使用 Jasmine Spy 的方式有关。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T08:12:47.520

取下`()`结尾`Subscription.prototype.runSimulation()`：

```
 expect(Subscription.prototype.runSimulation).toHaveBeenCalled() 
```

# c# - RavenDB 自定义序列化器和反序列化器

> ID：12024431
> 
> 赞同：2
> 
> 时间：2012-08-19T05:28:23.500
> 
> 标签：c#, serialization, json.net, ravendb, document-database

我在 RavenDB 中序列化/反序列化时遇到了一些问题。我存储数据没有问题，但在查询文档时遇到问题。

我有一个相当复杂的 Account 类，它是从 Entity Framework v4.3 POCO 生成器生成的：

```
[Serializable]
public class Account
{
public Guid Id { get; set; }
public string Name { get; set; }
public DateTime CreatedDate { get; set; }
public List<Product> ProductsOwned { get; set; }
public bool IsActive { get; set; }
public Nullable<DateTime> DOB { get; set; }
public Address HomeAddress { get; set; }

// shortened for brevity
} 
```

当我查询我的对象并将它们作为列表返回时，我得到一个 .NET 反射错误“对象与目标类型不匹配”。

```
var results = (from account in mySession.Query<Account>()
               where account.IsActive == true
               select account).ToList<Account>(); // this is where error occurs 
```

我认为这可能是因为当我保存它时，我还有其他嵌套类和可空值也被序列化，但我发现我可以创建一个名为 AccountWrapper 的“包装器”类，如下所示：

```
public class AccountWrapper
{
     public Guid Id { get; set; }
     public string SerializedText { get; set; }

} 
```

在这里，我将手动使用 JSON.NET（是的，与 RavenDB Buid 960 一起提供的相同的 .dll）来填充 SerializedText 字段，然后将其存储到 RavenDB。这个过程会奏效！我会从 RavenDB 中获取 AccountWrapper 对象，然后手动反序列化 SerializedText 的内容。这让我相信默认（反）序列化过程可能存在问题。

所以我的问题是，有没有一种方法可以在存储/加载文档时手动覆盖 RavenDB 上的序列化/反序列化功能？如果是这样，有人可以告诉我一个如何做到这一点的干净例子吗？然后我可以让它使用标准`JsonConverter.Serialize()`作为 JSON.NET 的一部分

显然，使用 AccountWrapper 是一个坏主意，因为我无法索引需要查询的“真实”数据。

（下面的异常的完整堆栈跟踪）

```
 System.Reflection.TargetException: Object does not match target type.  at System.Reflection.RuntimeMethodInfo.CheckConsistency(Object target)
   at System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
   at Newtonsoft.Json.Serialization.JsonContract.InvokeOnDeserialized(Object o, StreamingContext context) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonContract.cs:line 172
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateList(IWrappedCollection wrappedList, JsonReader reader, String reference, JsonArrayContract contract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 774
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.<>c__DisplayClass1.<CreateAndPopulateList>b__0(IList l, Boolean isTemporaryListReference) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 744
   at Newtonsoft.Json.Utilities.CollectionUtils.CreateAndPopulateList(Type listType, Action`2 populateList) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Utilities\CollectionUtils.cs:line 233
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateAndPopulateList(JsonReader reader, String reference, JsonArrayContract contract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 732
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateList(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue, String reference) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 495
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 238
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueProperty(JsonReader reader, JsonProperty property, JsonConverter propertyConverter, Object target, Boolean gottenCurrentValue, Object currentValue) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 213
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.SetPropertyValue(JsonProperty property, JsonConverter propertyConverter, JsonReader reader, Object target) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 617
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, String id) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 1203
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateAndPopulateObject(JsonReader reader, JsonObjectContract contract, String id) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 956
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 433
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 236
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueNonProperty(JsonReader reader, Type objectType, JsonContract contract, JsonConverter converter) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 221
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 117
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\JsonSerializer.cs:line 421
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\JsonSerializer.cs:line 413
   at Raven.Client.Connection.JsonExtensions.Deserialize(RavenJObject self, Type type, DocumentConvention convention) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\JsonExtensions.cs:line 30
   at Raven.Client.Document.InMemoryDocumentSessionOperations.ConvertToEntity[T](String id, RavenJObject documentFound, RavenJObject metadata) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs:line 416
   at Raven.Client.Document.InMemoryDocumentSessionOperations.TrackEntity[T](String key, RavenJObject document, RavenJObject metadata) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs:line 340
   at Raven.Client.Document.SessionOperations.QueryOperation.Deserialize[T](RavenJObject result) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\SessionOperations\QueryOperation.cs:line 130
   at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Raven.Client.Document.SessionOperations.QueryOperation.Complete[T]() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\SessionOperations\QueryOperation.cs:line 114
   at Raven.Client.Document.AbstractDocumentQuery`2.GetEnumerator() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\AbstractDocumentQuery.cs:line 616
   at Raven.Client.Linq.RavenQueryInspector`1.GetEnumerator() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryInspector.cs:line 98
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:14:23.067

这应该可行，您能否提供更多详细信息，失败的测试用例会很棒。

无论如何，您可以使用以下方法进行自定义：

```
documentStore.Conventions.CustomizeSerializer 
```

# c++ - 嵌套变体的简洁初始化语法？

> ID：12024434
> 
> 赞同：2
> 
> 时间：2012-08-19T05:28:33.243
> 
> 标签：c++, casting, initialization, variant

我正在使用一个小型 C++ JSON 库来帮助提高我生疏的 C++ 技能，但我无法理解初始化列表的某些行为。

该库的核心是一个变体类（名为“var”），它存储任何各种 JSON 数据类型（null、boolean、number、string、object、array）。

目标是`var`尽可能接近 JavaScript 变量，因此会发生大量运算符重载。原始数据类型很容易处理......

```
var fee = "something";
var fie = 123.45;
var foe = false; 
```

问题在于对象（地图）和数组（向量）。

为了获得接近 JavaScript 对象和数组文字语法的东西，我使用了初始化列表。它看起来像这样：

```
// in my headers
typedef var object[][2];
typedef var array[]; 

// in user code
var foo = (array){ 1, "b", true };
var bar = (object){ { "name", "Bob" }, { "age", 42 } }; 
```

这效果很好。问题来自嵌套列表。

```
var foo = (array){ 1, "b", (array){ 3.1, 3.2 } }; 
```

出于某种原因，我的变体类将嵌套的“数组”解释为布尔值，给出：

```
[1, "b", true] 
```

代替：

```
[1, "b", [3.1, 3.2]] 
```

如果我将内部列表显式转换为 var，它会起作用：

```
var foo = (array){ 1, "b", (var)(array){ 3.1, 3.2 } }; 
```

为什么在将内部列表转换为数组后必须将其显式转换为 var，以及如何绕过这个额外的转换？据我所知，无论如何它都应该隐式地将数组转换为我的 var 类，因为它使用的是 var 数组的构造函数：

```
template <size_t length>
var(const var(&start)[length]) {
  // internal stuff
  init();
  setFromArray(vector<var>(start, start + length));
} 
```

似乎如果没有显式转换为 var，初始化列表在从数组转换为 var 的过程中会以某种方式转换为其他东西。我试图了解为什么会发生这种情况，以及如何避免它。

* * *

这是完整来源[的要点](https://gist.github.com/3392320)。让我知道是否应该添加与该问题相关的任何内容。

* * *

**更新**

显然`(foo){1, "two"}`并没有实际投射初始化列表；它是一个完整的表达式，称为[复合文字](http://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html#Compound-Literals)。似乎它只在 C 中可用，尽管 g++ 不会抱怨，除非你给它`-pedantic`。

看起来我的选择是：

*   找到另一种官方支持的简洁初始化语法。
*   使用复合文字并希望它们在其他编译器中工作。
*   放弃对 C++ < 11 的支持并使用 initializer_list。
*   不要提供简洁的初始化语法。

第一个选项的任何帮助都是我目前正在寻找的答案。

宏是另一种最后的选择，我已经写了一些可以完成这项工作，但我不想使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:26:20.437

您需要使用 Boost 已经提供给您的设施。

```
typedef boost::optional<boost::make_recursive_variant<
    float, int, bool, //.. etc
    std::unordered_map<std::string, boost::optional<boost::recursive_variant_>>,
    std::vector<boost::recursive_variant_>
> JSONType; 
```

他们可以轻松定义递归变体类型。

# c# - 从文本框中读取输入值，从文本文件中获取数据并显示结果

> ID：12024437
> 
> 赞同：0
> 
> 时间：2012-08-19T05:29:37.353
> 
> 标签：c#

我需要帮助来搜索文本文件。我已经设法将输入值存储到带有`":"`分隔符的文本文件中。

我的结果文本框就像

```
friend1:126457890
friend2:123487012
Friend3:798461598 
```

现在我想搜索文本文件并显示结果`labels/textbox(read only)`

这是我要搜索的代码

```
 private void btn_search_search_Click(object sender, EventArgs e)
 {
        try
        {
            if (string.IsNullOrEmpty(txt_search.Text))
            {
                lbl_search_error.Text = "Please Enter name to search";
            }
            else
            {
                StreamReader sr = new StreamReader(@"path.txt");

                string line;
                string searchkey = txt_search.Text;
                sr.ReadToEnd();

                while ((line = sr.ReadLine()) != null)
                {

                    if (line.Contains(searchkey))
                        break;
                }
                sr.Close();

                string[] data = line.Split(':');
                txt_result_name.Text = data[0];
                txt_result_phno.Text = data[1];
            }
        }
        catch (Exception ex)
        {
            lbl_search_error.Text = ex.Message;
        }
} 
```

但我明白了

> *你调用的对象是空的*

我试图保持断点和 chk，错误在这一行

```
string[] data = line.Split(':'); 
```

请帮忙解决

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T05:40:20.670

删除行 sr.ReadToEnd();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T06:01:54.287

让我给你一个使用正则表达式的不同方法：

```
 private void btn_search_search_Click(object sender, EventArgs e)
    {
        StreamReader sr = new StreamReader("Some file");
        string line = sr.ReadLine();
        string name="";
        string number="";
        while (line != null)
        {
            var m = Regex.Match(line, @"([\w]+):([\d]+)<br>");
            if (m.Success)
            {
                name = m.Groups[1].Value; 
                number = m.Groups[2].Value;   // use this name and number variables as per your need
                line = sr.ReadLine();
            }

            else
            {
                line = sr.ReadLine();
            }
        }
    } 
```

这是解决问题的一种方法。如果您有任何问题，请提出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T05:34:41.573

您收到此错误是因为 的值`line`在`null`：`string[] data = line.Split(':');`

取一个名为的字符串变量，并在 while 循环中`temp`分配`line`to的值。`temp`稍后使用此变量代替`line`. 这样做：

```
 private void btn_search_search_Click(object sender, EventArgs e)
    {
        try
        {
            if (string.IsNullOrEmpty(txt_search.Text))
            {
                lbl_search_error.Text = "Please Enter name to search";
            }
            else
            {

                StreamReader sr = new StreamReader(@"path.txt");

                string line;
                string searchkey = txt_search.Text;
                sr.ReadToEnd();

                string temp;
                while ((line = sr.ReadLine()) != null)
                {
                   if (line.Contains(searchkey))
                   {
                      temp = line;
                      break;
                   }
                }
                sr.Close();

                string[] data = temp.Split(':');
                txt_result_name.Text = data[0];
                txt_result_phno.Text = data[1];
            }
        }
        catch (Exception ex)
        {
            lbl_search_error.Text = ex.Message;
        }
    } 
```

# ruby - 如何将名称/值对存储在 Ruby 文件中，其中值也可以是多行文本？

> ID：12024442
> 
> 赞同：0
> 
> 时间：2012-08-19T05:31:24.683
> 
> 标签：ruby, file, hash, name-value

如何使用 Ruby 将名称/值对（也称为哈希）存储在其中值也可以是多行文本的文件中？当然我想用最简单的方式编码。我之前在 Windows 中看到过这样的文本文件：

```
[name]
Dr. Hash Mark

[biografy]
Bla bla bla
bla bla bla
bla bla bla

[works]
The big red one (1923)
The little black zero (1926) 
```

Ruby 是否有任何库或 gem 来处理此类文件？也许我可以使用 XML 和 XMLSimple gem：

```
<man>
 <name>Dr. Hash Mark</name>
 <biografy>
  Bla bla bla
  bla bla bla
  bla bla bla
 </biografy>
 <works>
  The big red one (1923)
  The little black zero (1926)
 </works>
</man> 
```

它们都对我有好处，但我还需要一个方便的应用程序来用数据填充一堆这种文本文件，我不知道使用哪个应用程序来生成这样的文本文件，这些文件以后可以用 Ruby 读取. 我想到了一个关系数据库应用程序——但我不确定——我可以在其中定义我的数据结构（名称、简历、作品），然后我得到文本字段来填充数据，然后将数据保存在给定的文本文件中的格式。任何人都可以帮助我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:43:57.873

YAML 是一个不错的选择，它在 stdlib 中有一个库，它是人类可读/可编辑的，它被广泛使用（例如 Rails 中的设置文件），它支持多行字符串：

```
require 'yaml'

filename = 'hash.yaml'
original_hash = {'a' => 'b', 'c' => "d\ne"}
File.write filename, YAML.dump(original_hash)

puts "FILE LOOKS LIKE: #{File.read filename}"
puts "-" * 10

resulting_hash = YAML.load File.read(filename)
puts "READ BACK IN: #{resulting_hash.inspect}"

puts "ARE THEY THE SAME? #{original_hash == resulting_hash}" 
```

# git - 为什么 git clean -dfX 在 .gitignore 中不删除 lib 文件？

> ID：12024443
> 
> 赞同：2
> 
> 时间：2012-08-19T05:31:29.810
> 
> 标签：git, static-libraries

我确定 *.lib 在 .gitignore

```
cat .gitignore | grep lib
*.lib

$ ls lib
TLib.lib  TLib_d.lib

$ git status
# On branch master
nothing to commit (working directory clean)

$ git clean -dfX

$ ls lib
TLib.lib  TLib_d.lib     // the issue is here... 
```

为什么这些 .lib 文件没有被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:43:34.067

一旦遇到不在索引中的目录，Git 就会停止搜索文件。但在上面的例子中，我们告诉 git 搜索所有匹配忽略模式的文件。因此，最好进入所有目录和搜索文件。

这也将匹配`git ls-files`行为。鉴于：

```
$ tree
.
├── foo.o
└── lib
    ├── TLib_d.lib
    └── TLib.lib

1 directory, 3 files

$ cat .gitignore
*.lib 
```

运行以下命令。

```
$ git ls-files -o
foo.o
lib/TLib.lib
lib/TLib_d.lib

$ git ls-files -o -i --exclude-standard
lib/TLib.lib
lib/TLib_d.lib

$ git clean -n
Would remove foo.o
Would not remove lib/

$ git clean -nd
Would remove foo.o
Would remove lib/

$ git clean -nX 
```

最后一个命令不打印任何文件。但如果它这样做会很好：

```
$ git clean -nX
Would not remove foo.o
Would not remove lib/
Would remove lib/TLib.lib
Would remove lib/TLib_d.lib 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T05:53:12.483

只有当目录中没有 git 跟踪的任何内容时，我才会得到这种行为。

如果它总是没有 git 跟踪的任何内容，并且您希望目录将目录添加到`.gitignore`文件中。

如果您希望目录保留但其内容保留，那么您需要在目录中添加一个由 git 跟踪的空文件。通常的选择是一个空`.gitignore`文件。

# android - Actionscript 3：控制 Android 中的物理后退按钮

> ID：12024445
> 
> 赞同：2
> 
> 时间：2012-08-19T05:32:24.400
> 
> 标签：android, actionscript-3, flash, air

我正在使用 Flash CS5 中的 ActionScript 3.0 为 Android 开发一个简单的应用程序，我想知道是否有办法映射 Android 手机的物理后退按钮来告诉我的动画转到第一帧。

我把那篇帖子加红了：[禁用手机的后退按钮（AIR for Android /ActionScript 3）](https://stackoverflow.com/questions/6482673/disabling-the-phones-back-button-air-for-android-actionscript-3)

所以也许有可能？如果是，如何。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-25T00:27:28.837

//首先注册按键监听

```
NativeApplication.nativeApplication.addEventListener(KeyboardEvent.KEY_DOWN, handleKeys, false, 0, true); 
```

//然后听返回键

```
private function handleKeys(event:KeyboardEvent):void
        {
            if( event.keyCode == Keyboard.BACK ) {
                logDebug("=>handleKeys.");
                NativeApplication.nativeApplication.exit();
            }
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T08:09:26.240

您是否尝试过覆盖 onKeyUp 方法？

```
@Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_BACK) {
            // Do your stuff
        }
        return false;
    } 
```

# ios - IOS - 未调用 Facebook SDK fbDidLogin - 初始化视图控制器。

> ID：12024446
> 
> 赞同：1
> 
> 时间：2012-08-19T05:32:26.137
> 
> 标签：ios, facebook, sdk

我一步一步地按照 Facebook 的 Facebook SDK 教程进行操作。除了调用 fbDidLogin 之外，我的所有工作都正常......授权过程运行良好。我被告知要做：

```
 - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
          return [[controller facebook] handleOpenURL:url];
     } 
```

从[fbDidLogin 未调用](https://stackoverflow.com/questions/4244609/fbdidlogin-not-called)

问题是我不确定如何分配初始化我的视图控制器。这是我的 .h 应用程序委托：

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"

@interface fb2AppDelegate : UIResponder  <UIApplicationDelegate, FBSessionDelegate> {

    Facebook *facebook; 
    UIViewController *fb2ViewController;
}

@property (strong, nonatomic) UIWindow *window;
@property (strong,nonatomic) Facebook *facebook; 
@property (nonatomic, strong) UIViewController *fb2ViewController;

@end 
```

还有他们 ：

```
#import "fb2AppDelegate.h"

@implementation fb2AppDelegate
@synthesize window = _window;
@synthesize facebook;
@synthesize fb2ViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.fb2ViewController = [[UIViewController alloc] init];

    facebook = [[Facebook alloc] initWithAppId:@"key_here" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    } 

    return YES;
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [[fb2ViewController facebook] handleOpenURL:url];
}

- (void)fbDidLogin {

    NSLog(@"fbdidlogin"); 

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"key_here", @"app_id",
                                   @"http://developers.facebook.com/docs/reference/dialogs/", @"link",
                                   @"http://fbrell.com/f8.jpg", @"picture",
                                   @"Facebook Dialogs", @"name",
                                   @"Reference Documentation", @"caption",
                                   @"Using Dialogs to interact with users.", @"description",
                                   nil];

    [facebook dialog:@"feed" andParams:params andDelegate:self];

} 
```

至于视图控制器......我没有在其中放入任何代码。

我收到的错误是：

“UIViewController”没有可见的@interface 声明选择器“Facebook”

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:12:13.553

好的，您需要执行以下操作：

```
[facebook handleOpenURL:url]. 
```

您当前正在`facebook`用作选择器而不是对象。

另外..您需要设置`facebook.sessionDelegate = self`，以便`fbDidLogin`可以调用委托方法。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T05:59:25.780

问题是运行时认为您的 UIViewController 具有类方法 +facebook，而实际上，这是使用其他问题的答案的示例单例（我可能会添加混淆）。您需要将其发送到 Facebook*对象*的实例并从那里调用您的代码。

```
 - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
      return [facebook handleOpenURL:url];
 } 
```

还要记住，为了调用委托方法，您的对象实际上必须是委托。因此，请设置`facebook.sessionDelegate = self`并遵守标头中的协议，`<FBSessionDelegate>`以使编译器警告静音。

# php - PHP 的 decode64 的行为与 Ruby 的 decode64 奇怪的不同

> ID：12024455
> 
> 赞同：1
> 
> 时间：2012-08-19T05:34:42.253
> 
> 标签：php, ruby

红宝石的

`Base64.decode64('OVUP/PZrLzoZpaeQga/TpK9xeJAOuTTbUzm9NplDuhSUMkklPtDeDQDgidUEIX+ijxe80EI').length`

返回 51。

PHP的

`strlen(base64_decode('OVUP/PZrLzoZpaeQga/TpK9xeJAOuTTbUzm9NplDuhSUMkklPtDeDQDgidUEIX+ijxe80EI'))`

返回 53。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T05:56:18.513

用 Ruby 解码得到：

```
"9U\x0F\xFC\xF6k/:\x19\xA5\xA7\x90\x81\xAF\xD3\xA4\xAFqx\x90\x0E\xB94\xDBS9\xBD6\x99C\xBA\x14\x942I%>\xD0\xDE\r\x00\xE0\x89\xD5\x04!\x7F\xA2\x8F\x17\xBC" 
```

如果您在 PHP 中看到额外的字符，可能是因为它的编码不完全正确。对其进行解码和重新编码会产生不同的字符串：

```
"OVUP/PZrLzoZpaeQga/TpK9xeJAOuTTbUzm9NplDuhSUMkklPtDeDQDgidUE\nIX+ijxe8\n" 
```

当它可能不应该时，这与您的原始版本略有不同，并且解码为相同的东西。

该`0EI`部分可能不完整并被 Ruby 解码器拒绝。

# linux - linux：如何通过脚本工具（文件）记录所有操作以保存在日志文件中

> ID：12024456
> 
> 赞同：-1
> 
> 时间：2012-08-19T05:35:01.373
> 
> 标签：linux, bash, shell, unix

linux：如何通过脚本工具（文件）记录所有操作以保存在日志文件中

嗨，大家好，

1）我希望记录我写的脚本文件，其中包括所有内容（例如，某些功能可能包括删除文件，（rm -rf $file）应该包含要删除的文件和日志文件中的文件名）这意味着脚本文件执行的所有内容。

2）如果1）问题得到解决，我可以输出可读的格式吗？

谢谢各位，希望能得到大家的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:45:38.267

我可以想到两种选择：

*   用于`echo`记录您认为对`stdout`或重要的特定命令`stderr`：

    ```
    echo "rm -rf $f"
    rm -rf "$f" 
    ```

    对于输出到`stderr`：

    ```
    echo "rm -rf $f" >&2
    rm -rf "$f" 
    ```

    不幸的是，这种方法应用起来会变得非常乏味，因为它必须手动完成。当命令参数包含空格时也会出现问题；为了能够可靠地区分和区分，引用输出需要做*很多*工作。`"a" "b"``"a b"`

*   [`-x`在启用/`xtrace`选项](http://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin)的情况下运行 bash 。从手册：

    > -X
    > 
    > 打印简单命令的踪迹，用于命令、case 命令、选择命令以及命令及其参数或相关单词列表的算术运算（在它们展开之后和执行之前）。PS4 变量的值被扩展，结果值在命令及其扩展参数之前打印。

    要使用，您可以使用`set -x`和`set +x`启用/禁用脚本特定部分的选项，或者只需在`bash`命令行中输入：

    ```
    bash -o xtrace script.sh 
    ```

    要`xtrace`在子shell 中递归使用，请查看[这个问题](https://stackoverflow.com/q/4325444/507519)。

    这种替代方法的一个缺点是输出*非常*冗长，并且不如来自显式消息的可读性`echo`- 它主要适用于调试脚本，而不是在正常操作下进行日志记录。

# python - 缓存耗时操作的结果

> ID：12024457
> 
> 赞同：0
> 
> 时间：2012-08-19T05:35:08.277
> 
> 标签：python, database, hash, shelve

我有一个程序（[PatchDock](http://bioinfo3d.cs.tau.ac.il/PatchDock/)），它从参数文件中获取输入，并生成一个输出文件。运行这个程序很费时间，我想缓存过去运行的结果，这样我就不需要两次运行相同的参数。

我能够将输入和输出文件解析为适当的数据结构。例如，输入文件被解析为类似字典的对象。输入键都是字符串，值是原始数据类型（整数、字符串和浮点数）。

### 我的方法

我的第一个想法是使用输入文件的 md5 哈希作为[`shelve`](http://docs.python.org/library/shelve.html)数据库中的键。但是，这无法捕获具有完全相同输入的缓存文件，但输入文件中存在一些细微差别（注释、间距、参数顺序等）。

散列解析的参数对我来说似乎是最好的方法。但我能想到的从字典中获取唯一哈希的唯一方法是对排序的字符串表示进行哈希处理。

### 问题

散列参数字典的字符串表示似乎是实现我的最终目标的一种迂回方式 - 将唯一输入值键入到指定输出。有没有更直接的方法来实现这个缓存系统？

理想情况下，我希望在 Python 中实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T05:40:15.677

对已解析输入的排序表示进行散列处理实际上是最直接的方法，也是有意义的方法。你的直觉是正确的。

基本上，您正在对输入进行规范化（通过对其进行解析和排序），然后使用它来构造一个哈希键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T11:08:10.043

散列似乎是一种非常可行的方法，但自己这样做似乎有点过头了。为什么不使用输入元组作为字典的键？您不必自己担心散列和可能的冲突。您所要做的就是确定关键字参数的顺序（并根据您的要求为未设置的关键字添加一个标志对象）。

[`functools.lru_cache`](http://docs.python.org/dev/library/functools.html#functools.lru_cache)如果您使用的是 Python 3.2+，您也可能会发现它很有用。这是一个装饰器，它将为装饰函数的最后 n 次调用启用缓存。如果您使用的是旧版本，则有[此功能](http://code.activestate.com/recipes/578078-py26-and-py30-backport-of-python-33s-lru-cache/)的反向移植。

似乎还有一个具有类似目标的项目，称为[FileDict](http://erezsh.wordpress.com/2009/05/24/filedict-a-persistent-dictionary-in-python/)，可能值得一看。

# jquery - 将数组放入jquery函数

> ID：12024458
> 
> 赞同：0
> 
> 时间：2012-08-19T05:35:10.490
> 
> 标签：jquery

我正在尝试通过 jQuery 函数发送一个数组，并让它为数组中的每个单词设置动画。

```
var foo = [];

foo[0]= "test1";
foo[1]= "test2";
foo[2]= "test3";

$(document).ready(function(){

  $(".ansy").click(function(){ 

    $.each(foo,function(){

      $('.message').animate({'opacity': 0}, 2000, function () {
        $(this).text("enter text or variable here");
      }).animate({'opacity': 1}, 2000);

    });
  }); 

}); 
```

我正在使用从stackoverflow上另一个地方获得的代码块，当我将“在此处输入文本或变量”替换为我想要但无法通过数组的任何文本时，该代码块可以工作。我一直在尝试使用 $.each 函数，但我无法让它工作。这个想法是让一个字符串淡入然后淡出，然后让数组中的下一个字符串淡入，依此类推，直到它到达数组的末尾。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:46:43.053

首先，将语言结构包装`array`在一个 jQuery 对象中，以便获得 jQuery 对象的方法：

`$(foo)`

然后`.each`在你的新 jQuery 上使用`array`：

`$(foo).each(function(`

确保您的函数正在传递`index`和`value`参数：

`$(foo).each(function( i, v ){});`

然后做你的动画：

```
$( foo ).each(function( i, v ){
    $('.message')
        .animate({
            'opacity': 0
            },
            2000,
            function(){
                $(this).text(v);
            }
        )
        .animate({
            'opacity': 1
            },
            2000
        );
}); 
```

注意我用作`v`文本值。

被警告，`.text()`做`.html()`不同的事情。人们通常想要`.html()`，除非他们有一个非常具体的理由来使用`.text()`. 请记住这一点，以防您遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T05:40:35.687

这可能是您正在寻找的：

```
var foo = [];

    foo[0]= "test1";
    foo[1]= "test2";
    foo[2]= "test3";

    $(document).ready(function(){

         $.each(foo,function(){
            var temp = this;
            $('.message').animate({'opacity': 0}, 2000, function () {
            $(this).text(temp);
           }).animate({'opacity': 1}, 2000);
    }); 

    });​ 
```

和[小提琴](http://jsfiddle.net/yaQkg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T08:16:15.413

[**工作演示**](http://jsfiddle.net/mAQy3/)

```
var foo = ["test1", "test2", "test3"]; //add them all to array at same time

$(document).ready( function() {

    $(".ansy").click( function() {

        $.each(foo, function(index, value) {

            $('.message').animate({'opacity': 0}, 2000, function () {

                $(this).text( value );

            }).animate({'opacity': 1}, 2000);
        });
    }); 
}); 
```

有关其用法的详细信息，请参阅[jQuery 的文档。`$.each()`](http://api.jquery.com/jQuery.each/)

# c++ - C++ 错误：“类”之前的预期初始化程序

> ID：12024462
> 
> 赞同：2
> 
> 时间：2012-08-19T05:36:39.973
> 
> 标签：c++

当我编译我正在处理的程序时，我得到：

> “类”之前的预期初始化程序

我的`Class.h`文件中的错误。我在互联网上查找了错误消息，但找不到确切的错误，虽然类似的错误似乎是由缺少分号引起的，但我不明白为什么我需要一个。这是错误指向的代码，在它之前我没有其他函数或类。

```
class Account
{
    public:
    double dAccountBalance;

    double dAccountChange(double dChange);
}; 
```

在`Class.cpp`文件`double dAccountChange(double dChange)`中定义了函数。我不认为这是错误的来源，但这是代码；

```
double Account::dAccountChange(double dChange)
{
    dAccountBalance += dChange;

    return 0.0;
} 
```

当我将 Class.h 中的代码更改为如下所示时，

```
;
class Account
{
    public:
    double dAccountBalance;

    double dAccountChange(double dChange);
}; 
```

它不会生成错误消息，但我无法弄清楚为什么我需要在它之前使用分号，因为它之前的唯一代码是以下预处理器行。

```
#ifndef CLASS_H_INCLUDED
#define CLASS_H_INCLUDED 
```

关于为什么会产生错误的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T05:54:33.973

*最有可能的是，在您之前* 包含的头文件中`class.h`，您将拥有如下内容：

```
class xyzzy {
    int plugh;
} 
```

*没有*结束分号。这将使您的代码序列：

```
class xyzzy {
    int plugh;
}
class Account
{
    public:
    double dAccountBalance;

    double dAccountChange(double dChange);
}; 
```

这显然是无效的。在第一行之前插入一个分号`class.h`将修复它，但它显然是放置它的错误位置（因为这意味着您紧随其后包含的*每个*头文件都需要一个起始分号 - 而且，它是定义的一部分第一个标题，应该在那里）。

现在这可能不是确切的代码序列，但它会非常相似，根本原因将是*前一个*标题中缺少一段文本。

您应该返回并将其放入*较早的*包含文件中。

例如，考虑：

```
include1.h:
    class xyzzy {
        int plugh;
    }
include2.h:
    class twisty {
        int little_passages;
    };
main.cpp:
    #include "include1.h"
    #include "include2.h"
    int main (void) {
        return 0;
    } 
```

编译它会产生：

```
include2.h:3: error: multiple types in one declaration 
```

但是将分号放在末尾`include1.h`（或开头`include2.h`虽然我们已经确定这不是一个好主意）将解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T05:43:01.853

问题出在*其他*标头之一中，即您在 #include 之前的标头之一`class.h`。

如果您向我们展示主`cpp`文件的顶部，它可能会提供线索。

# ruby-on-rails - 我得到了未定义的方法“user_path”

> ID：12024463
> 
> 赞同：0
> 
> 时间：2012-08-19T05:37:19.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara, factory-bot

这通过：

```
describe "log page" do
#let(:user) { FactoryGirl.create(:user) }
#let!(:m1) { FactoryGirl.create(:status_update, user: user ) }
#let!(:m2) { FactoryGirl.create(:status_update, user: user ) }

before { visit user_path(user) }

#it { should have_selector('h1', text: user.email) }
#it { should have_selector('title', text: user.email) }

#describe "logs" do
#  it { should have_content(m1.weight) }
#  it { should have_content(m2.weight) }
#  it { should have_content(user.status_updates.count) }
#end
end 
```

当我取消注释其他所有内容时，它会失败。

为什么会这样？！我一直在拔头发试图弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T07:51:12.057

乍一看，您似乎错过了一个主题。尝试添加：

```
subject { page } 
```

在`it`块之前。

# python - 通过 django storages boto s3 将二进制数据保存到模型上的文件中

> ID：12024465
> 
> 赞同：9
> 
> 时间：2012-08-19T05:37:45.573
> 
> 标签：python, django, amazon-s3, django-storage

我正在从 echosign API 中提取一个 pdf，它为我提供了文件的字节数。

我正在尝试获取这些字节并将它们保存到 boto s3 支持的 FileField 中。我运气不太好。

这是我得到的最接近的，但它在保存“扬声器”时出错，并且 pdf 虽然写入 S3，但似乎已损坏。

这`speaker`是我的模型的一个实例，fileData 是从 echosign api 返回的“字节”字符串

```
afile = speaker.the_file = S3BotoStorageFile(filename, "wb", S3BotoStorage())
afile.write(fileData)
afile.close()
speaker.save() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T06:20:05.733

我更近了！

```
 content = ContentFile(fileData)
    speaker.profile_file.save(filename, content)
    speaker.save() 
```

原来 FileField 已经是一个 S3BotoStorage，你可以通过像这样传递原始数据来创建一个新文件。我不知道如何使它成为二进制（我假设它不是）。尽管其中有大量数据，但我的文件不断损坏。

这里的参考是来自 echosign 的响应： [https ://secure.echosign.com/static/apiv14/sampleXml/getDocuments-response.xml](https://secure.echosign.com/static/apiv14/sampleXml/getDocuments-response.xml)

我本质上是在抓取字节并将其传递给`ContentFile`as `fileData`。也许我需要base64解码。要去试试！

# 更新

那行得通！

在我找出答案之前，我似乎必须在这里问这个问题。叹。所以最终的代码看起来像这样：

```
content = ContentFile(base64.b64decode(fileData))
speaker.profile_file.save(filename, content)
speaker.save() 
```

# if-statement - SCSS 中是否有不等于 ( !== ) 语句？

> ID：12024467
> 
> 赞同：13
> 
> 时间：2012-08-19T05:39:09.173
> 
> 标签：if-statement, sass

如果传递了值，如何添加其他样式？或者有什么办法吗？

```
@mixin link($color, $color-hover:false){
 color: $color;
 @if $color-hover !== false {
  &:hover { color: $color-hover; }
 }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T05:54:32.020

`!=`不适合你吗？我想你正在尝试使用`!==`. 即双“=”而不是单个“=”前缀为“！”。对于 SCSS，所有类型都支持相等运算符（==、!=）。

# php - 在非对象上调用成员函数 get()

> ID：12024468
> 
> 赞同：0
> 
> 时间：2012-08-19T05:39:10.997
> 
> 标签：php, codeigniter

我正在使用 Codeigniter 框架，但出现以下错误，

> 在第 11 行的 site_model.php 中调用非对象的成员函数 get()

这是带有 get() 的行。test 是我的数据库中我的表的名称。我究竟做错了什么？

```
<?php
    class Site extends CI_Controller 
    {
        function index()
        {
            $this->load->model('site_model');
            $data['records']= $this->site_model->getAll();
            $this->load->view('home',$data);
        }
    }

?>

<?php

    class Site_model extends CI_Model 
    {

        function getAll()
        {
            $q = $this->db->get('test');
            if($q->num_rows > 0 )
            {
                foreach ($q ->result() as $row )
                {
                    $data[] = $row ;
                }
            }
        return $data;
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T05:44:39.467

我最好的猜测是你没有设置你的**数据库**：

> 加载模型时，它不会自动连接到您的数据库。

请参阅此处的指南：[https ://www.codeigniter.com/user_guide/general/models.html#connecting-to-your-database](https://www.codeigniter.com/user_guide/general/models.html#connecting-to-your-database)

# wpf - 未处理的异常在被捕获后仍然会导致应用程序崩溃

> ID：12024470
> 
> 赞同：3
> 
> 时间：2012-08-19T05:39:36.053
> 
> 标签：wpf, visual-studio-2010, c#-4.0, exception-handling, unhandled-exception

我有一个 WPF 应用程序，它由多个具有表单、类、基类等的项目组成。

由于代码库很大，我想确保如果确实发生异常，我可以捕获它，通知用户并让应用程序继续运行而不会崩溃。我理解这样做的利弊。

在应用程序的 App.xaml.cs 中，我有：

```
private void OnApplicationStartup(object sender, StartupEventArgs e)
{
    Application.Current.DispatcherUnhandledException += CurrentOnDispatcherUnhandledException;
    AppDomain.CurrentDomain.UnhandledException += CurrentDomainOnUnhandledException;
    Dispatcher.UnhandledException += DispatcherOnUnhandledException;
    UI.Views.Windows.MainWindow.Show();
}

private void DispatcherOnUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs dispatcherUnhandledExceptionEventArgs)
{
    MessageBox.Show("TEST 3");
}

private void CurrentDomainOnUnhandledException(object sender, UnhandledExceptionEventArgs unhandledExceptionEventArgs)
{
    MessageBox.Show("TEST 2");
}

private void CurrentOnDispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs dispatcherUnhandledExceptionEventArgs)
{
    MessageBox.Show("TEST 1");
} 
```

如果在显示这些消息框的任何地方发生异常，这很好，那么问题就在它显示应用程序仍然崩溃的消息之后。如果我在调试中运行应用程序，Visual Studio 将跳转到发生异常的地方，如果我继续，它将转到消息框。

我认为问题与此有关，但我不确定。有没有办法像我上面那样捕捉异常但同时又不会让应用程序崩溃？

谢谢你

**编辑** 进入 UnhandledException 部分的异常将是大多数公园的 NullReference、NotSupported 或数据库异常。如果像 Stack Overflow 一样出现“严重”异常，我会简单地通知用户并终止应用程序。不过，我仍然需要找到一种方法来阻止应用程序因非严重异常而崩溃。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T06:10:21.930

我认为你需要设置

```
dispatcherUnhandledExceptionEventArgs.Handled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T05:52:31.023

您的应用程序捕获了什么样的异常？除非您设置 HandleProcessCorruptedStateExceptionsAttribute 属性，否则对更改状态的异常使用 UnhandledException 将不起作用。

```
From MSDN documentation:
AppDomain.UnhandledException Event 
```

从 .NET Framework 4 开始，不会针对破坏进程状态的异常（例如堆栈溢出或访问冲突）引发此事件，除非事件处理程序是安全关键的并且具有 HandleProcessCorruptedStateExceptionsAttribute 属性。

[http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

# c# - 如何生成列表 来自嵌套对象？

> ID：12024472
> 
> 赞同：-2
> 
> 时间：2012-08-19T05:39:45.427
> 
> 标签：c#, list, visual-studio-2005, nested-class

我有以下嵌套类：

```
class Report
{
    List<ReportItem> list;
}

class ReportItem
{
    public string str1;
    public string str2;
} 
```

在不向上述类添加任何新方法的情况下，如果我有`Report r`，如何生成包含`List<String>`在中的所有`str1`字符串`r.list`？

没有 Linq，因为我使用的是 VS2005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:45:36.813

根据 .NET 版本，您可以使用`Array.ConvertAll`函数来翻译元素，如下所示：

```
new List<string>(Array.ConvertAll(list.ToArray(), delegate(Report item){ return item.str1; })); 
```

虽然有点凌乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T05:48:40.497

```
List<string> resultList = new List<string>();
foreach (ReportItem ri in r.list) { resultList.Add(ri.str1); } 
```

# php - php : 显示从浏览器收到的标头

> ID：12024479
> 
> 赞同：4
> 
> 时间：2012-08-19T05:41:21.887
> 
> 标签：php

因此，当浏览器向服务器发出 HTTP 请求时，它的形式是一些标头（get/post、cookie、主机、用户代理等）。有没有办法可以在 php 脚本中读取和显示它们？是的，$_GET、$_POST 和 $_COOKIE 都在那里。我正在寻找标题信息的其余部分。例如[http://pgl.yoyo.org/http/browser-headers.php](http://pgl.yoyo.org/http/browser-headers.php)谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T05:46:16.123

[get_headers()](http://php.net/manual/en/function.get-headers.php)函数是您正在寻找的。如引述

> [get_headers](http://php.net/manual/en/function.get-headers.php) — 获取服务器为响应 HTTP 请求而发送的所有标头

简单的例子：

```
$url = 'http://www.example.com';   
print_r(get_headers($url)); 
```

输出服务器发送的所有信息：

> 大批 （
> 
> ```
> [0] => HTTP/1.1 200 OK
> [1] => Date: Sat, 29 May 2004 12:28:13 GMT
> [2] => Server: Apache/1.3.27 (Unix)  (Red-Hat/Linux)
> [3] => Last-Modified: Wed, 08 Jan 2003 23:11:55 GMT
> [4] => ETag: "3f80f-1b6-3e1cb03b"
> [5] => Accept-Ranges: bytes
> [6] => Content-Length: 438
> [7] => Connection: close
> [8] => Content-Type: text/html ) 
> ```

* * *

### 更新

要接收浏览器发送的信息，可以从[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)超级全局变量中访问它们。例如，以下代码段提供了所有浏览器相关信息。

```
echo $_SERVER['HTTP_USER_AGENT']; 
```

相似地，

*   `REQUEST_METHOD`: 给出 HTTP 请求方法，例如 GET、HEAD、Put、Post
*   `HTTP_HOST`: 给出主机信息
*   `HTTP_COOKIE`：提供有关 Cookie 标头的原始信息^([[来源]](http://www.php.net/manual/en/reserved.variables.server.php#98408))

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T10:06:05.470

我最喜欢的：http: [//php.net/manual/en/function.apache-request-headers.php](http://php.net/manual/en/function.apache-request-headers.php)

> 从当前请求中获取所有 HTTP 请求标头。

```
<?php
    $headers = apache_request_headers();

    foreach ($headers as $header => $value) {
        echo "$header: $value <br />\n";
    }
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T05:42:56.380

您可以使用`$_GET['requestName']`, `$_POST['requestName']`（或`$_REQUEST['requestName']`获取 GET 或 POST）来获取这些。

Cookie 是通过`$_COOKIE['varName']`. 您可能还想调查一下`$_SESSION[]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T05:43:29.010

是的。查看 $_POST、$_GET 和 $_COOKIE 超全局变量。它们是包含标题信息的数组。
[http://www.tizag.com/phpT/postget.php](http://www.tizag.com/phpT/postget.php)

# javascript - 如何在 addEventListener 中将参数传递给函数？

> ID：12024483
> 
> 赞同：66
> 
> 时间：2012-08-19T05:42:32.930
> 
> 标签：javascript, html, dom-events

以传统方式添加事件监听器：

```
function getComboA(sel) {
    var value = sel.options[sel.selectedIndex].value;  
}

<select id="comboA" onchange="getComboA(this)">
<option value="">Select combo</option>
<option value="Value1">Text1</option>
<option value="Value2">Text2</option>
<option value="Value3">Text3</option>
</select> 
```

但我想适应这种`addEventListener`方式：

```
productLineSelect.addEventListener('change',getSelection(this),false);

function getSelection(sel){
    var value = sel.options[sel.selectedIndex].value;
    alert(value);
} 
```

它不起作用，因为我不能将任何参数`getSelection()`作为方法中的第二个参数传递`addEventListener`？据我所知，我只能使用不带括号的函数名。

任何想法？

顺便说一句，请看[我之前](https://stackoverflow.com/q/12015540/456218)关于`console.log`在 Safari 6.0 Developer Inspector 中不起作用的问题，我无法在控制台中写入任何输出，这令人沮丧。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-08-19T05:45:16.970

不需要传入任何东西。用于的函数`addEventListener`将自动`this`绑定到当前元素。只需`this`在您的功能中使用：

```
productLineSelect.addEventListener('change', getSelection, false);

function getSelection() {
    var value = this.options[this.selectedIndex].value;
    alert(value);
} 
```

这是小提琴：http: [//jsfiddle.net/dJ4Wm/](http://jsfiddle.net/dJ4Wm/)

* * *

如果您想将任意数据传递给函数，请将其包装在您自己的匿名函数调用中：

```
productLineSelect.addEventListener('change', function() {
    foo('bar');
}, false);

function foo(message) {
    alert(message);
} 
```

这是小提琴：http: [//jsfiddle.net/t4Gun/](http://jsfiddle.net/t4Gun/)

* * *

如果要`this`手动设置的值，可以使用[方法`call`调用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)函数：

```
var self = this;
productLineSelect.addEventListener('change', function() {
    getSelection.call(self);
    // This'll set the `this` value inside of `getSelection` to `self`
}, false);

function getSelection() {
    var value = this.options[this.selectedIndex].value;
    alert(value);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-12T22:29:39.060

在您的 JS 代码的第一行：

```
select.addEventListener('change', getSelection(this), false); 
```

您通过放置在函数引用后面来**调用 getSelection 。**`(this)`这很可能不是您想要的，因为您现在将该调用的返回值传递给 addEventListener，而不是对实际函数本身的引用。

* * *

在由值调用的函数`addEventListener`中 for`this`将自动设置为侦听器所附加的对象，`productLineSelect`在这种情况下。

如果这是您想要的，您可以只传递函数引用，并且`this`在此示例中将在`select`addEventListener 的调用中：

```
select.addEventListener('change', getSelection, false); 
```

如果这*不是*您想要的，您最好[`bind`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind)将此值传递给您传递给的函数`addEventListener`：

```
var thisArg = { custom: 'object' };
select.addEventListener('change', getSelection.bind(thisArg), false); 
```

该`.bind`部分也是一个调用，但这个调用只返回我们正在调用的同一个函数，该函数范围内`bind`的值**固定**为，有效地覆盖了 this 绑定的动态性质。`this`**`thisArg`**

 *** * *

要解决您的实际问题：*“如何将参数传递给 addEventListener 中的函数？”*

您将不得不使用额外的函数定义：

```
var globalVar = 'global';

productLineSelect.addEventListener('change', function(event) {
    var localVar = 'local';
    getSelection(event, this, globalVar, localVar);
}, false); 
```

现在我们将事件对象、`this`对 addEventListener 回调内部值的引用、在该回调内部定义和初始化的变量以及来自整个 addEventListener 调用外部的变量传递给您自己的`getSelection`函数。

* * *

我们也可能再次将我们选择的对象`this`放在外部回调中：

```
var thisArg = { custom: 'object' };
var globalVar = 'global';

productLineSelect.addEventListener('change', function(event) {
    var localVar = 'local';
    getSelection(event, this, globalVar, localVar);
}.bind(thisArg), false); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-19T06:04:32.977

使用时`addEventListener`，`this`会自动绑定。因此，如果您想要引用安装事件处理程序的元素，只需`this`在您的函数中使用：

```
productLineSelect.addEventListener('change',getSelection,false);

function getSelection(){
    var value = sel.options[this.selectedIndex].value;
    alert(value);
} 
```

如果你想从你调用的上下文中传入一些其他参数`addEventListener`，你可以使用一个闭包，像这样：

```
productLineSelect.addEventListener('change', function(){ 
    // pass in `this` (the element), and someOtherVar
    getSelection(this, someOtherVar); 
},false);

function getSelection(sel, someOtherVar){
    var value = sel.options[sel.selectedIndex].value;
    alert(value);
    alert(someOtherVar);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-19T06:01:25.777

如果`this`您想要的值只是您将事件处理程序绑定到的对象，那么`addEventListener()`已经为您完成了。当你这样做时：

```
productLineSelect.addEventListener('change', getSelection, false); 
```

该`getSelection`函数将已被调用并`this`设置为事件处理程序绑定到的对象。它还将传递一个表示事件对象的参数，该对象具有有关事件的各种对象信息。

```
function getSelection(event) {
    // this will be set to the object that the event handler was bound to
    // event is all the detailed information about the event
} 
```

* * *

如果所需的`this`值是您将事件处理程序绑定到的对象之外的其他值，您可以这样做：

```
var self = this;
productLineSelect.addEventListener('change',function() {
    getSelection(self)
},false); 
```

通过解释：

1.  您将 的值保存`this`到其他事件处理程序中的局部变量中。
2.  然后创建一个匿名函数来传递 addEventListener。
3.  在那个匿名函数中，你调用你的实际函数并将保存的值传递给它`this`。**

# php - Google Drive HTTP 上传“未找到”问题 PHP

> ID：12024484
> 
> 赞同：0
> 
> 时间：2012-08-19T05:42:39.857
> 
> 标签：php, file, upload, google-drive-api

我正在尝试使用 http 标头和 CURL 帖子将文件上传到谷歌驱动器，并且我从谷歌错误返回“未找到”。我认为这是因为我通过 CURL 上传文件的方式，因为我从来没有做过。这是我的代码：

```
$file = file_get_contents("./ima.jpg");
$length = strlen($file);
test($file,$length);

function test($file,$length){
$url2="https://www.googleapis.com/upload/drive/v2/filesuploadType=media";
$header = array(
"Content-Type: image/jpeg",
"Content-Length:$length ",
"Authorization: Bearer $token",
);

$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,$url2);
curl_setopt($ch,CURLOPT_FOLLOWLOCATION,false);
curl_setopt ($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch,CURLOPT_POST,true);
curl_setopt($ch,CURLOPT_POSTFIELDS,$file);
$data2 = curl_exec($ch);
echo $data2;
curl_close($ch);
} 
```

令牌设置在变量令牌中，它是一个有效令牌，因为它适用于来自谷歌驱动器的列表文件，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:56:41.223

`uploadType`是 URL 的参数，需要使用 分隔`?`，这意味着在您的情况下，URL 很可能是；

```
$url2="https://www.googleapis.com/upload/drive/v2/files?uploadType=media"; 
```

有关更详细的文档，请参见[此处](https://developers.google.com/drive/manage-uploads)。

# android - 使用对话框主题时，ActionBarSherlock 不显示 ActionItems

> ID：12024488
> 
> 赞同：1
> 
> 时间：2012-08-19T05:43:29.373
> 
> 标签：android, dialog, themes, android-actionbar, actionbarsherlock

我正在尝试使用新的 ActionBar 范例更新我的应用程序。不过，我想保持向后兼容性，因为我最大的用户群仍在 Gingerbread 上。

为此，我正在尝试将[ActionBarSherlock](http://actionbarsherlock.com/)集成到我的应用程序中。

我的应用程序设计为使用对话框主题，因此当我集成 ABS 时，我尝试在我的**AndroidManifest.xml**中使用相应的对话框主题：

`<application android:theme="@style/Theme.Sherlock.Dialog" >`

我的 ActionItems 不会出现，只是作为老式菜单项出现（这意味着它们在我的平板电脑上完全无法访问）。查看 ABS 下载中的示例，我决定尝试更改我的应用程序并删除`.Dialog`限定符，将我的**AndroidManifest.xml**更改为：

`<application android:theme="@style/Theme.Sherlock" >`

一旦我这样做了，菜单项就会从菜单移动到 ActionBar，这是我期望并希望它们出现的地方。`.Dialog`因此，在默认条件下，使用主题时似乎未启用 ActionItems 。

有什么方法可以启用此行为，以便菜单项在仍使用对话框主题的同时按预期显示在 ActionBar 中？

# sharepoint - 限制在页面上添加的 WebPart 数量 - 对于特定用户

> ID：12024489
> 
> 赞同：0
> 
> 时间：2012-08-19T05:43:36.583
> 
> 标签：sharepoint

我有一个包含两组“Creators”“Admins”的 SharePoint 网站。

当我们编辑共享点页面并转到“插入”选项卡时，我们将看到以下选项 1\. 插入 webpart，2\. 上传文件

我想限制“创作者”上传文件，他们最多可以插入 2 个 webpart。管理员没有限制。

SP2010可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:49:27.767

一种方法是，您应该能够将事件连接到“插入 Webpart”按钮。如果它不包含在 SharePoint 中，请使用您自己的 javascript 或类似的东西。

另一种方法是，您可以计算页面加载时可用 Web 部件的数量。如果有人添加了超过允许的最大值，只需删除最新的。

你可以用这样的东西来计算它们

```
ClientContext oClientContext = new ClientContext("http://server/site");
File oFile = oClientContext.Web.GetFileByServerRelativeUrl("Default.aspx");
LimitedWebPartManager limitedWebPartManager = oFile.GetLimitedWebPartManager(PersonalizationScope.Shared);

oClientContext.Load(limitedWebPartManager.WebParts,
    wps => wps.Include(
    wp => wp.WebPart.Title));

oClientContext.ExecuteQuery();

if (limitedWebPartManager.WebParts.Count >= 2)
{
    // Max amount of webparts...
} 
```

删除

```
WebPartDefinition webPartDefinition = limitedWebPartManager.WebParts[2]; // Third web part
webPartDefinition.DeleteWebPart();
oClientContext.ExecuteQuery(); 
```

# jsp - 在 JSP 中关闭浏览器时销毁会话

> ID：12024493
> 
> 赞同：0
> 
> 时间：2012-08-19T05:44:23.897
> 
> 标签：jsp, browser

我创建了一个 JSP WebApplication。会话用于一些在关闭浏览器后需要销毁的功能。当我在我的浏览器（Mozilla）中测试它时，会话不会破坏 . 请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:20:53.687

您可以创建一个服务或 jsp，您可以在其中使会话无效（销毁）。

```
request.getSession().invalidate() 
```

您可以通过 javascript 在浏览器窗口关闭事件中向此服务发送调用，例如

```
//  window.onclose is Not available with Firefox 2 or Safari
window.onclose = function(event){
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","<your-service-url>",false);
    xmlhttp.send();
} 
```

# php - 如何使用 PHP 为文件创建下载链接？

> ID：12024494
> 
> 赞同：-1
> 
> 时间：2012-08-19T05:44:28.703
> 
> 标签：php, mysql, download

在我的求职门户项目中，我将求职者数据存储在 MySQL 数据库中。我已将他们上传的简历存储在上传文件夹中。我可以通过分页为雇主检索求职者的数据。我想在分页结果中使用他的数据创建每个求职者的下载简历链接。如何在分页中的每个搜索结果中添加上传文件夹中简历文件的下载简历链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:57:33.927

如果我理解了这个问题，这很容易。由于您在上传文件夹中有简历文件。只需从数据库中选择文件名并将其存储在一个变量`$filename`中，比如

```
$filename = $row['cv_filename']; // supposing $row contains the field of database 
```

然后，在锚点中使用文件夹名称前缀作为指向该文件的链接。

```
$prefix = "uploads/resume";
echo "<a href='$prefix/$filename'>Download CV </a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T07:06:39.107

在这里找到解决方案：[http ://www.ssdtutorials.com/tutorials/title/download-file-with-php.html](http://www.ssdtutorials.com/tutorials/title/download-file-with-php.html)

由于我要下载的文件是与每个求职者的数据动态关联的。我使用 while 循环从数据库中检索文件名。

```
 $result = mysql_query($query);
    while($row = mysql_fetch_row($result))
    {
        $filename = $row[0];
        echo "<p><a href='download.php?file=$filename'> Download Resume </a></p>";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T05:51:27.600

```
header("Content-type: $type");
header("Content-length: $size");
header("Content-Disposition: attachment; filename=$name");
header("Content-Description: PHP Generated Data");
echo $data; 
```

阅读完整示例@ [http://onlamp.com/pub/a/php/2000/09/15/php_mysql.html?page=3](http://onlamp.com/pub/a/php/2000/09/15/php_mysql.html?page=3)

# php - 在使用 Android 中的 PHP 将数据发布到 MySQL 时需要帮助

> ID：12024497
> 
> 赞同：0
> 
> 时间：2012-08-19T05:45:15.457
> 
> 标签：php, android, mysql, database

我正在开发一个示例 android 应用程序，它有两个 EditTexts 和一个“保存”按钮。它从 EditTexts 获取数据并使用 PHP 将其发布到 MySQL 服务器。代码很糟糕。

我的 onClick 方法来保存数据

```
 public void saveMy(View v)
{
    name=e1.getText().toString();
    no=e2.getText().toString();
    try {
            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://10.0.2.2/GujaratiApp/myPHP.php");

            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                    postParameters.add(new BasicNameValuePair("Name",name));
            postParameters.add(new BasicNameValuePair("No",no));
            httppost.setEntity(new UrlEncodedFormEntity(postParameters));

            HttpResponse response = httpclient.execute(httppost);
            Log.i("postData", response.getStatusLine().toString());
        }
    catch(Exception ex)
    {
        Log.e("log_tag", "Error:  "+ex.toString());
    }  

} 
```

PHP代码是：

```
<?php 
mysql_connect("localhost","root","") or die(mysql_error());
mysql_select_db("newDB");
$name =   $_POST['Name'];
$no = $_POST['No'] ;

$query_add="INSERT INTO  myData (`name` ,`no` ) VALUES ('.$name','.$no')";

$query_exec=mysql_query($query_add) or die(mysql_error()); 

mysql_close(); 
```

?>

当我单击“保存”按钮时，LogCat 中有一条消息表明 HTTP/1.1 200 OK。当我在 MySQL 监视器中触发查询时，它会在表中添加一行，但添加的行不显示任何内容。见下图：![在此处输入图像描述](../Images/972888f2b744d71bc69ae4019a5a8627.png)

我不知道出了什么问题..请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:59:29.430

请对 mySQL 中的列添加空检查，使字段成为必填项。

```
ALTER TABLE myData Modify name varchar(xyz) NOT NULL;
ALTER TABLE myData Modify no varchar(abc) NOT NULL; 
```

之后请检查您是否收到响应状态 200。这将验证服务上是否正确接收了 post 参数。如果没有，那么您可以尝试通过将这些参数附加到 URL 来通过 URL 本身传递这些参数。

```
httpclient = new DefaultHttpClient();
httppost = new HttpPost("http://10.0.2.2/GujaratiApp/myPHP.php?name=" + name + "&no=" + no);
HttpResponse response = httpclient.execute(httppost); 
```

如果

```
UrlEncodedFormEntity(postParameters) 
```

不管用。

# objective-c - scanf 没有在我的循环中等待输入？

> ID：12024503
> 
> 赞同：1
> 
> 时间：2012-08-19T05:46:33.043
> 
> 标签：objective-c, c, scanf, foundation

我是 Objective-C 的新手，这确实是我的第一个交互式程序。我已经学习了大约2周了。

所以，我的问题是：通常我注意到当您`scanf`连续有多个 ' 时，它们每个都在等待输入 - 但是在这种情况下，我要求提供帐户所有者姓名和余额 - 它会触发这两个`NSLog`函数而不是等待对于第一个输入。

这是我的主要内容：

```
int main(int argc, char* argV[]) {
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    bank *columbiaBank = [[bank alloc] init];

    int iteration = 0;
    while (true) {
        int selection = 0;
        NSLog(@"\n1\. Add Account \n2\. Remove Account \n3\. Modify Account \nWhat would you like to do?:");
        scanf("%i", &selection);

        if (selection == 1) {

            NSLog(@"\nEnter account owner:");
            char accountOwner;
            scanf("%c", &accountOwner);

            NSLog(@"\nEnter opening balance:");
            float openingBalance;
            scanf("%f", &openingBalance);

            // create and add new account
            bankAccount *newAccount = [[bankAccount alloc] initWithProps:[NSString stringWithFormat:@"%c", accountOwner] :[NSString stringWithFormat:@"%i", iteration] :openingBalance];
            [columbiaBank addAccount:newAccount];
            [newAccount release];
            NSLog(@"\nAccount successfully added!");

       } else if (selection == 2) {

            NSLog(@"\nEnter account id:");
            int accountId;
            scanf("%i", &accountId);
            // remove account
            [columbiaBank removeAccount:[NSString stringWithFormat:@"%i", accountId]];
            NSLog(@"\nAccount successfully removed!");

        } else if (selection == 3) {

            NSLog(@"\nThe bank currently has %i accounts.", columbiaBank.totalAccounts);
            NSLog(@"\nThe bank's current balance from all accounts is $%f", columbiaBank.totalBankBalance);
            NSLog(@"\n-- Output of all account info --");
            [columbiaBank printAccounts];

        } else {

            NSLog(@"You did not enter a valid action.");

        }
        iteration++;
    }

    [columbiaBank release];
    [pool drain];
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:30:27.913

其他用户已经说了一切。scanf 会在缓冲区中自动插入一个新行“\n”，然后传递给下一个 scanf。这是因为任何未写入的数据都会写入下一个流中。

我想补充一点，您可以使用它`fflush`来清除流缓冲区，在这种情况下您要使用

```
scanf("%i", &selection);
fflush(stdin) 
```

`stdin`在每个`scanf`.

**编辑：**我不知道，但正如@Peter Kowalski 所说，应避免将 fflush(stdin) 用于输入流，因为它对输入流具有未定义的行为。

[Cprograming.com FAQ > 为什么 fflush(stdin) 是错误的。](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1052863818&id=1043284351)

但似乎没有保证在 C 中刷新输入流的方法。

[Cprograming.com FAQ > 刷新输入流](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1044873249&id=1043284392)

我知道在 C++ 中，标准方法是使用`cin.ignore()`after`cin >> selection`但我不知道如何在 C 中做到这一点。也许一些更有经验的用户可以对`fflush(stdin)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T05:48:59.683

大概您希望帐户所有者名称不只是一个字符，但您只读取其中的一个字符`scanf`。如果您尝试在此处输入多个字符，第`scanf`一个字符将读取第一个字符，并且由于输入缓冲区中有更多字符，因此下一个`scanf`将尝试立即读取而不等待您的数字输入。如果您**只**使用单个字符作为所有者名称，那么您需要使用输入缓冲区中的换行符。

如果您想读取字符串作为帐户所有者名称，则需要为多个字符分配空间，并使用`%s`而不是`%c`作为`scanf`格式字符串。还记得检查返回值`scanf`。该函数将返回成功扫描的项目数，如果没有扫描任何项目，则返回 0，通常是由于输入无效，或者 return `EOF`。

```
char accountOwner[26];

// ...

// note that you can specify a width (max length) for a string using scanf
scanfReturn = scanf("%25s", accountOwner); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T18:55:07.710

*[注意：如果您打算使用 Objective-C，您可能希望使用来自 Cocoa 的输入转换方法，而不是混合使用 Cocoa ( `NSLog`) 和 stdio ( `scanf`)。但这并不能回答您的问题...]

在解析整数、浮点数甚至字符串时，会`scanf`跳过空格 - 例如空格、制表符、*行尾*等 - 并且每个输入行都至少以行尾结束（可能是回车、换行或两者都取决于系统）。这意味着在读取您的第一个整数之后，至少在输入中仍然存在行尾，并且尝试读取字符将返回它 - 因此无需等待输入。要丢弃剩余的、未使用的输入，您可以使用`fpurge`. 例如：

```
#include <stdio.h>

int main(int argc, char* argV[])
{
    int selection = 0;
    fputs("\n1\. Add Account \n2\. Remove Account \n3\. Modify Account \nWhat would you like to do?: ", stdout);
    scanf("%i", &selection);

    if (selection == 1)
    {

        fputs("\nEnter account owner: ", stdout);
        fpurge(stdin); // skip any input left in the buffer as %c takes the very next character and does not skip whitespace
        char accountOwner;
        scanf("%c", &accountOwner);

        fputs("\nEnter opening balance: ", stdout);
        float openingBalance;
        scanf("%f", &openingBalance);

        printf("%c - %f\n", accountOwner, openingBalance);
    }
} 
```

请注意，读取字符串会跳过空格，因此如果您的帐户所有者是字符串，则不需要`fpurge`.

# sql - 从 Bill 表向我的客户表添加了 FK，无法将数据添加到 fk 列

> ID：12024507
> 
> 赞同：2
> 
> 时间：2012-08-19T05:47:11.827
> 
> 标签：sql, oracle10g, foreign-keys

[外键未填充主键值](https://stackoverflow.com/questions/9046879/foreign-key-not-populating-with-primary-key-values)

我在该网站上进行了很多搜索，但是对于为数据库编写代码我还是比较陌生。我阅读了一些类似上面列出的主题，但我无法利用其中的信息来解决我的问题。我有两个表，客户和计费。客户表如下：

```
SQL> SELECT * FROM CUSTOMER;

CUST_ID                   NAME            BILL_NUM
-------------------- ------------------- ----------
432                  MICHAEL MAYS  
433                  VILMA PACULAN    
434                  RUBY PUKE   
435                  ROWENA JOHNSON    
436                  MAGIC JOHNSON    
437                  DARTH VADER    
438                  OBI WAN   
439                  YODA    
440                  STEWIE GRIFFIN
441                  EVIL MONKEY    
442                  HARRY POTTER 
```

账单表：

```
SQL> SELECT * FROM BILL
  2  ;

  BILL_NUM      TOTAL
---------- ----------
      1000        5.5
      1001        7.4
      1002       12.5
      1003      14.56
      1004      25.36
      1005      66.66
      1006      99.97
      1007      56.67
      1008       5.23
      1009      87.25
      1010      36.17 
```

正如您在客户表中看到的，FK Bill_Num 为空。我需要知道如何将数据插入列中，以匹配 PK 数据？我正在使用 oracle 10g SQLPlus。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:09:55.247

如果您查看当前的数据设置，则没有可以链接这两个表的公共列（隐式或显式）。因此，无法自动链接表。

您需要以下形式的事务表：CUST_ID | Bill_NUM（多对多）

或者正如 Graeme 所说，将 CUST_ID 放在 Bill 表上，因为现在您的多对一关系将与预期相反。

[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization) - 一个开始规范化数据库的好地方

# msbuild - Web 部署 - 使用相对路径进行本地文件系统部署

> ID：12024512
> 
> 赞同：25
> 
> 时间：2012-08-19T05:47:49.870
> 
> 标签：msbuild, msdeploy, webdeploy

我想使用 Web Deploy 来运行自定义部署设置。

由于我希望在许多不同的环境（团队成员本地计算机、4 个不同的构建服务器）上运行时能够正常工作，因此我想部署到相对的本地路径。

我想做的是：

*   部署到本地*相对*路径
*   让构建后的步骤做神奇的事情......

但是，当我输入要部署到的本地文件路径时：“..\Deploy_Production”

web deploy 抱怨这个：

```
2>Connecting to ..\Deploy_Live...
2>Unable to create the Web site '../Deploy_Live'.  The URL http://:0 is invalid. 
```

就好像 Web deploy 认为相对文件路径是一个网站 URL。改用“..\”对我的事业没有帮助。

如何让 WebDeploy 部署到本地*相对*路径？

**编辑1：**

我曾尝试在构建之前使用 ConvertToAbsolutePath 任务，但无济于事：

```
 <PropertyGroup>
    <WebPublishMethod>FileSystem</WebPublishMethod>
    <SiteUrlToLaunchAfterPublish>http://mywebsite.com</SiteUrlToLaunchAfterPublish>
    <publishUrl>..\Deploy_Production</publishUrl>
    <DeleteExistingFiles>False</DeleteExistingFiles>
  </PropertyGroup>

  <Target Name="BeforeBuild">
    <ConvertToAbsolutePath Paths="$(publishUrl)">
      <Output TaskParameter="AbsolutePaths" PropertyName="publishUrl" />
    </ConvertToAbsolutePath>
  </Target> 
```

**编辑2：** 以上工作，但*仅*当针对*解决方案*文件而不是*项目*文件运行命令行构建时

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-19T18:44:33.797

我们这里有一个错误，当使用文件系统发布时，您必须提供完整路径。我们实际上在本周早些时候发现了这个错误。它将在我们的下一次更新中修复。在这种情况下，当传递相对路径时，它会错误地认为它是 IIS 路径。

作为一种解决方法，您可以编辑 .pubxml 以使 publishUrl 成为完整路径。幸运的是，您可以使用 MSBuild 属性，以便在团队方案中工作。这是您应该做的，编辑您的 .pubxml 文件并将 的值更新为`publishUrl`以下值。

```
<publishUrl>$(MSBuildThisFileDirectory)..\..\..\Deploy_Production</publishUrl> 
```

此路径将相对于 .pubxml 文件本身。我已经验证这在命令行和发布对话框中都有效。如果您对此有任何问题，请告诉我，但修复程序有望在几个月内发布 [当然不能保证 :) ]。

# python - pylons mongoengine 类型对象 'Section' 没有属性 _data

> ID：12024515
> 
> 赞同：1
> 
> 时间：2012-08-19T05:48:16.293
> 
> 标签：python, mongodb, pylons, mongoengine

在我定义的模型中：

`section.py`：

```
class Section(Document):
    section_name = StringField(required = True) 
```

并且，也在模型中：

`admin_interface.py`：

```
class AdminInterface(DynamicDocument):
    registered_model = ListField() 
```

然后，在控制器中：

`__init__.py`：

```
from helloworld.model.section import Section
from helloworld.model.admin_interface import AdminInterface

model = [
    Section
]

instance = AdminInterface(registered_model = model)
instance.save() 
```

我收到一个错误：

```
AttributeError: type object 'Section' has no attribute '_data' 
```

有没有什么办法解决这一问题？我真的不知道该怎么办。我想保存 Section 对象，以便稍后我可以使用`AdminInterface`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:10:37.950

您需要使用实例启动模型或稍后在代码中`Section`附加实例。`Section`您不能只提供一个类作为其不可保存的。

# directshow - 如何调用 ICaptureGraphBuilder2->RenderStream 两次？

> ID：12024522
> 
> 赞同：0
> 
> 时间：2012-08-19T05:49:36.703
> 
> 标签：directshow

我在 msdn [RenderStream](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318240%28v=vs.85%29.aspx)中读到我们可以`RenderStream`多次调用来制作长过滤器链。我有以下过滤器链：

```
Capture Filter -> Sample Grabber -> Transformation Filter -> Video Mixing Renderer9 
```

我正在尝试以`RenderStream`编程方式做同样的事情。

```
pBuid->RenderStream(&PIN_CATEGORY_CAPTURE,&MEDIATYPE_Video,pCap,pSampleGrabber,pTransformFilter);

pBuid->RenderStream(NULL,NULL,pTransformFilter,NULL,pVMRender); 
```

但是，上面的代码不起作用。执行后，首先`RenderStream`显示控制台窗口（win32）并且什么都不做。请帮助我如何渲染`Capture->Sample Grabber->Transform Filter->Renderer`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:19:03.800

解决了这个问题：@CPlusSharp，你是对的，这是媒体类型问题。我为 AM_MEDIATYPE 设置了正确的媒体类型。感谢大家的帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:07:35.320

`Pin_Category_preview`如果您正在使用，则需要使用`videoRenderer`. 尝试以下操作：

```
pBuid->RenderStream(&PIN_CATEGORY_CAPTURE,&MEDIATYPE_Video,pCap,pSampleGrabber,pTransformFilter);

pBuid->RenderStream(&PIN_CATEGORY_PREVIEW,&MEDIATYPE_Video,pCap,null,null); //the preview pin automatically connects to the renderer. 
```

# android - Android-从 ListAcitivity 调用特定方法，该方法调用 TabActivity 的 1 中的方法而不会丢失 TabHost

> ID：12024526
> 
> 赞同：0
> 
> 时间：2012-08-19T05:51:35.563
> 
> 标签：android, android-intent, android-tabhost, android-mediaplayer, android-tabactivity

## 从 ListActivity 调用特定方法，该方法调用父（TabActivity）之一中的方法，而不会丢失 TabHost 布局

我在 TabHost 1.PlayingActivity 2.AlbumActivity 中有两个活动

通过单击 AlbumActivty 中的按钮将跳转到 LIstActivity -> 通过单击 ListActivity 中的项目，我想跳回到其中的方法之一 - PlayingActivity w/o Losing Tab Layout。

我可以通过使用这些调用 Activity n 特定方法来完成任务

# ListActivity 点击 Item 调用 PlayingActivity 中的特定方法

```
Class SongList extends ListActivty
{
  public void onCreate(Bundle savedInstanceState)
   {
     //implemented list adapter-ls
      listadapter. . . .

      ls.setOnItemClickListener(New View.onItemClickListener)
        {
         public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) 
             {
                    int songIndex=position; 
        Intent i=new Intent(getApplicationContext(),AlbumActivity.class);
            i.putExtra("methodName", "myMethod");
            i.putExtra("index", songIndex);
            startActivity(i);
              }
        }
    }

} 
```

# 在 TabHost 下托管 PlayingActivity 和 AblumActivity 的 MainActivity

```
public class MainActivity extends TabActivity {

 private static final String NOW_PLAYING = "Playing";
    private static final String ALBUM = "Album";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();

        // Playing Tab
        TabSpec PlayingSpec = tabHost.newTabSpec(NOW_PLAYING);
        // Tab Icon
        PlayingSpec.setIndicator(NOW_PLAYING, getResources().getDrawable(R.drawable.icon_now_playing));
       Intent PlayingIntent = new Intent(this, PlayingActivity.class);
        // Tab Content
        PlayingSpec.setContent(PlayingIntent);

        // Album Tab
        TabSpec AlbumSpec = tabHost.newTabSpec(ALBUM);
        AlbumSpec.setIndicator(ALBUM, getResources().getDrawable(R.drawable.icon_music));
        Intent AlbumIntent = new Intent(this, AlbumActivity.class);
        AlbumSpec.setContent(AlbumIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(PlayingSpec); // Adding Playing tab
        tabHost.addTab(AlbumSpec); // Adding Album tab
} 
```

}

# 在 PlayingActivity 中调用特定方法（playSong()）

```
class PlayingActivity extends Activity
{
   public void onCreate(Bundle savedInstanceState)
   {
    }
   protected void onNewIntent(Intent intent) {
   super.onNewIntent(intent);
   String index=intent.getStringExtra("index");
   if(intent.getStringExtra("methodName").equals("myMethod")){
      playSong(Integer.parseInt(index));
   }
}
   private void playSong(int i)
   { 
   }
} 
```

# 现在 Catch iz 我可以以某种方式调用 PlayingActivity 中的特定方法，但是 TabHost 下的 Playing Activity 失去了它的 TabLayout

# 有什么办法可以让我们从 TabLayout 中保存 Playing Activity 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:01:59.773

刚发现。一点点逻辑节省了我的时间。

添加

```
finish(); 
```

在活动内部会完成我所有的工作。

# django - 当您在 django 中更改模型中的字段时

> ID：12024529
> 
> 赞同：0
> 
> 时间：2012-08-19T05:53:29.260
> 
> 标签：django

在您最初创建模型并且想要更改模型中的字段之后。如果你 syncdb ，它会回复 no fixtures found，意思是说模型没有识别出变化。解决此问题的一种方法是删除数据库并重新创建数据库，但您会丢失所有数据。还有其他更好的解决方案吗？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:57:30.747

使用[南](http://south.aeracode.org/)来帮助您进行模型更改。它将自动检测模型的任何更改并生成适当的脚本来更新数据库模式。

# javascript - Javascript无效（0）不起作用

> ID：12024533
> 
> 赞同：0
> 
> 时间：2012-08-19T05:55:11.927
> 
> 标签：javascript

我正在创建一个聊天站点，并且我想创建一个 JavaScript 超链接，使发送按钮无法进行聊天。所以在我的聊天中，我可以通过 [url=http://www.site.com]text[/url] 创建超链接。但是 javascript 仍然适用于它们。代码是：`javascript:document.getElementById("sendbutton").disabled = true; void(0)`。所以我在我的地址栏中测试了这段代码，它成功地执行了命令并且它改变了页面。但是当我把它放在我的超链接上并单击它时，它会加载一个空白的白色页面，上面有“禁用”这个词。我做错了什么？为什么 void(0) 命令在我的地址栏中有效，但在放入超链接时无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:03:05.183

要防止锚标记执行其默认操作（更改文档位置），您必须取消其`onclick`事件，如下所示：

```
<a href="..." onclick="return false;">do it</a> 
```

这样，无论`href`锚是什么，它都不会重定向页面。

但是，它也会取消您已经拥有的任何 JavaScript 代码，`href`因此您需要在`onclick`事件本身中执行所有这些代码：

```
<a href="#" onclick="document.getElementById('sendbutton').disabled = true; void(0); return false;">do it</a> 
```

[现场测试用例](http://jsfiddle.net/qnCKW/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:00:07.353

您可以使用**jQuery**单击回调来完成此操作。

```
$("#sendbutton").click(function(event) {
  event.preventDefault(); // Should stop the page reloading.
} 
```

请注意，通过`false`从这个回调返回相当于调用`preventDefault()`和`stopPropogation()`

# ruby-on-rails - Rspec 错误：没有路由匹配：show、：update、：create、：index（所有操作）

> ID：12024535
> 
> 赞同：0
> 
> 时间：2012-08-19T05:55:44.703
> 
> 标签：ruby-on-rails, ruby, rspec

在我的 rspec 测试中，我遇到了一个我认为其他队友都没有的问题。每次调用 :show、:create、:update（所有操作）都会出现以下错误：

```
Failure/Error: get :index ActionController::RoutingError: No route matches [GET] "/index". 
```

注意：用任何被调用的动作替换“索引”。

我该如何调试呢？我是否遗漏了使这些方法在我的规范中可用的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T01:40:43.713

我已经解决了这个问题。我在我的应用程序中发现有人覆盖了控制器规范工作方式的默认行为。这个问题非常笼统，为什么控制器操作方法在控制器规范中不可用。答案确实是它们应该在您的控制器规范中可用，除非您以某种方式覆盖了该功能。

# mysql - MySQL 集群 - 分布感知查询和存储过程是冲突的想法吗？

> ID：12024536
> 
> 赞同：0
> 
> 时间：2012-08-19T05:55:45.753
> 
> 标签：mysql, stored-procedures, cluster-computing

存储过程和分布感知查询对于 MySQL Cluster 性能都很重要。

*   存储过程用于减少从客户端软件到 MySQL 服务器的查询传输次数。我们使用一次过程调用来运行许多查询。
*   分布感知查询用于减少不必要节点上不必要的表扫描。

据我所知，存储过程适用于每个节点。恐怕当我使用存储过程时意味着我不能利用分布感知查询。当我使用分布感知查询时，意味着我不能使用存储过程。

真的吗？

任何想法都可以同时利用存储过程和分布感知查询以获得更好的性能。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:02:28.207

存储过程和分布感知查询是相互独立的。如果查询是分布感知的，它也将是分布感知在存储过程中运行的。如果查询主键，则查询是分布感知的。如果单个事务中有多个查询，则该事务的第一个查询将决定该事务将使用哪个数据节点。事务内的所有查询都将转到同一个分区。

但是，我不确定您为什么认为存储过程会给您带来巨大的性能优势。

伯恩德

# ruby - 包括两个具有相同方法名称的 Ruby mixin

> ID：12024537
> 
> 赞同：3
> 
> 时间：2012-08-19T05:55:53.697
> 
> 标签：ruby, mixins

这是怎么回事：

```
module Sounds
  def dog
    "bark"
  end
end

module Noises
  def dog
    "woof"
  end
end

class Animals
  include Sounds
  include Noises
end

x = Animals.new
x.dog # Returns "woof", as I expected

class Animals
  include Sounds
end

x.dog # Still returns "woof" for some reason -- shouldn't it be bark?

y = Animals.new
y.dog # Also returns "woof" for some reason -- shouldn't it be bark? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:58:54.440

一旦你包含了一个模块，我不确定它是否会再次被包含。它可能会被列为已包含，因此忽略重复操作。

如果您需要这样做，这确实很奇怪，您可能需要通过制作一个包含目标模块的模块（甚至是临时模块）来伪造 Ruby，然后包含该模块。

# assembly - 汇编/机器代码中相等的分支

> ID：12024543
> 
> 赞同：2
> 
> 时间：2012-08-19T05:57:35.750
> 
> 标签：assembly, branch, mips, machine-code

使用有什么区别：

```
c.eq.s    $1, $2
bc1t      L2 
```

并使用：

```
beq $1, $2, L2 
```

如果他们做同样的事情，为什么有两种分支方式？如果它们不同，那么它们各自的好处是什么？

谢谢

编辑：我不知道“c.eq.s”是协处理器特定的。为了与第二组代码保持一致，我只写了 $1, $2 而不是 $f1, $f2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T06:08:35.607

`bc1t`如果数学协处理器条件位 1 为真，则指令简单地分支。如果两个寄存器相等，就是这种情况。如果值相等，则它相当于简单地分支`beq`，但*前提*是寄存器在两种情况下实际上都是相同的寄存器。

使用 MIPS 浮点协处理器，寄存器应该`$f1/$f2`在`c.eq.s`指令中，这样两条指令就不会等价。除了在常规寄存器和协处理器之间移动数据的指令外，我*从未*见过`$1/$2`浮点指令中的使用。

我认为以两步方式进行浮点条件分支的*唯一方法。*国家`IDT MIPS Microprocessor Family Software Reference Manual`：

> FP 测试和分支指令是分开的。一条测试指令比较两个 FP 值并相应地设置 FPA 条件位（FP 状态寄存器中的 C）；分支指令根据该位是否设置进行分支。

# java - 通过传递 Activity 实例化自定义适配器

> ID：12024551
> 
> 赞同：0
> 
> 时间：2012-08-19T06:00:56.807
> 
> 标签：java, android

我正在尝试调用`LazyAdapter`构造函数来设置`ListView`. 我总是看到`red line`有人`new LazyAdapter(this, mStrings);`要求解决这个问题。我不确定我应该在此处添加什么来代替它，以便它可以开始工作。当我尝试用`getApplicationContext`then 替换它时，我总是得到错误`ClassCastException`。有什么想法我需要添加的`this`吗？

```
@Override
protected void onPostExecute(ArrayList<User> response) {

    if (response!=null) {
           adapter=new LazyAdapter(this, mStrings);
           listView.setAdapter(adapter);
    }

for(User user : response){
 //Doing Some Stuff Here    

}

} 
```

`LazyAdapter`构造函数是这样的-

```
public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    } 
```

**更新：-**

我的 LazyAdapter 完整代码-

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private String[] data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("item "+position);
        imageLoader.DisplayImage(data[position], image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:17:59.940

问题是您正在初始化方法`Adapter`内部`AsyncTask`，因此在初始化时间`this`点指向`AsyncTask`实例。如果`AsyncTask`是 an 的内部类`Activity`，那么您可以简单地更改`this`为`Activity.this`，否则您需要将 an 传递`Activity`给`AsyncTask`构造函数并使用它来初始化您的`Adapter`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:06:29.550

发生这种情况是因为`this`编辑器无法识别该变量。尝试使用`getBaseContext()`.

```
adapter=new LazyAdapter(getBaseContext(), mStrings); 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T06:18:52.193

当您调用 AsyncTask 时，创建 AsyncTask 的构造函数并将您的活动引用（this）传递给`AsyncTask`这样的：

```
AsyncTaskClass obj = AsyncTaskClass(this); 
```

构造函数：

```
public AsyncTaskClass(Context context) {
          mContext = context;
} 
```

`onPostExecute()`并在您的 AsynTask中使用此构造函数。

# jquery - jQuery 发送 HTML 接收 JSON

> ID：12024552
> 
> 赞同：-1
> 
> 时间：2012-08-19T06:01:06.807
> 
> 标签：jquery

将 jquery 与 php 一起使用时，是否可以将数据以 HTML 格式发送但以 json 格式接收数据？在我的情况下，我将表单数据作为 HTML 发送，因为 json 只能处理字母数字数据。如果表单包含错误，则返回一个错误消息数组，我会将其附加到错误消息 div 中，如果没有，则重定向用户。是否有可能做到这一点？我应该指定什么数据类型，我应该使用 json_encode 返回数组

```
$("#sform").submit(function() {
    $.ajax({
        type: "POST",
        data: $(#sform).serialize(),
        cache: false,
        //What data type to sepcify here? Data goes as HTML but returns as json
        url: "user_verify.php",
        success: function(data) {
            //Print the php arrays data here to errormessage divs
        }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:05:53.093

使用`dataType : 'json'`如果您`json`从`php`

```
$("#sform").submit(function() {
    $.ajax({
        type: "POST",
        data: $(this).serialize(),
        cache: false,
        //What data type to sepcify here? Data goes as HTML but returns as json
        url: "user_verify.php",
        success: function(data) {
            //Print the php arrays data here to errormessage divs
        },
        dataType:'json'
    });
    return false;
}); 
```

PS：在您的问题`i'm sending form data as HTML`中，但您使用的是`.serialize()`API，这意味着您正在以字符串形式发送数据编码。所以你没有发送任何 HTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:09:21.433

要告诉服务器您期望返回的数据类型，请使用以下`dataType`参数：

```
$("#sform").submit(function() {
    $.ajax({
        type: "POST",
        data: $(#sform).serialize(),
        cache: false,
        dataType: 'json',
        url: "user_verify.php",
        success: function(data) {
            //Print the php arrays data here to errormessage divs
        }
    });
    return false;
}); 
```

If you don't specify `dataType` then `$.ajax` will try to guess the type based on the header sent back from the server.

In your case, you can also add this to your php page:

```
header('Content-type: application/json'); 
```

and as you stated, return your data with `json_encode()`.

If you don't to `POST` data, you can also check out the `getJSON()` method: [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

note: using `dataType` AND setting the `content-type` to `application/json` may be redundant, but it can add clarity.

# python - 如果行包含特定字符串，则定义 CSV 文件的行

> ID：12024553
> 
> 赞同：2
> 
> 时间：2012-08-19T06:01:20.410
> 
> 标签：python, csv

我已经学习 Python 两周了，在 Python 中读写 CSV 文件时，我想知道一些事情。

我使用`def`代码进行输出：

```
def csv(filename):
  f = open(filename, 'rU') 
  lines = []
  for line in f:
    lines.append(line.rstrip('\n').split(','))
f.close()
return lines 
```

上述代码的结果如下所示：

> [['一种'， ''， ''， ''， ''， '']，
> 
> ['b', '', '', '', '', ''],
> 
> ['C'， ''， ''， ''， ''， '']，
> 
> ['d', '', '', '', '', ''],
> 
> ['e', '', '', '', '', ''],
> 
> ['F'， ''， ''， ''， ''， '']，
> 
> ['G'， ''， ''， ''， ''， '']]

假设我想更改包含的第一行的值`'a'`。

我可以使用哪些代码来定义包含的行`a`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T06:09:00.137

首先，使用[内置的 csv parser](http://docs.python.org/library/csv.html)。

此代码将定义一个包含'a'的行的python列表：

```
import csv
rows = csv.reader(open('yourfile.csv', 'rb'), delimiter=' ', quotechar='|')
arows = [row for row in rows if 'a' in row] 
```

# xcode - Cocoa 绑定 + 过滤谓词 + 自动重新排列内容 = 崩溃

> ID：12024556
> 
> 赞同：1
> 
> 时间：2012-08-19T06:01:31.800
> 
> 标签：xcode, cocoa, nspredicate, cocoa-bindings, key-value-observing

我遇到了一个问题，其中一些简单的 Cocoa 绑定正在更改附加到具有自动重新排列内容集的 ArrayController 的提取谓词。

我的数据模型有三个类（我们称它们为 A、B 和 C）。它以严格的层次结构排列，其中一个class_A的实例拥有一个或多个class_B的实例，每个实例拥有一个或多个class_C的实例；并且类 B 和 C 的每个实例都有对其父级的弱引用。例如：

```
@interface Class_A
@property (strong) NSArray *collection_of_b;
@property BOOL foo;
@end

@interface Class_B
@property (weak) Class_A class_A;
@property (strong) NSArray *collection_of_c;
@property (weak) SomeOtherClass bar;
@end

@interface Class_C
@property (weak) Class_B class_B;
@property (weak) SomeOtherClass baz;
@end 
```

我在一个大的主从视图中显示了这个层次结构。有一个包含所有 class_A 实例列表的第一个表视图；选择后，第二个表格视图会显示 class_B 实例的列表；再次选择后，第三个表格视图会显示 class_C 实例的列表。

在每个列表下方，有一组字段绑定到所选的 class_A、class_B 或 class_C 实例的各种属性（如 foo、bar 和 baz）。这些字段要么使用严格符合 KVO 的访问器来修改类成员，要么我只是将字段直接绑定到选择成员。（例如，class_A.foo 绑定到一组表示“是”和“否”的单选按钮。）所有这些似乎都运行良好。

现在，这是踢球者。在同一个窗口的另一部分，我展示了一个具有一些属性的 class_C 实例的过滤列表。为了呈现过滤后的列表，我使用了一个过滤谓词来指定一些标准，例如“(class_B.bar == some value) OR (class_B.class_A.foo == YES)”。过滤工作完美......直到我通过绑定字段更改 foo 或 bar 的值，当我的应用程序立即崩溃并显示以下消息：

“无法从 <Class_B instance> 中删除键路径“bar”的观察者，很可能是因为键“bar”的值已更改而未发送适当的 KVO 通知。请检查 Class_B 类的 KVO 合规性。”

我已将问题缩小到 ArrayController 的自动重新排列内容设置。当我关闭它时，当实例的过滤属性发生变化时，表格不会自动调整内容，但它也不会崩溃。当然，我可以手动触发重新排列，但这是一个不雅的解决方案。

一些搜索显示 2009 年 cocoa-dev 线程报告了与自动排列内容完全相同的行为作为错误：

[https://groups.google.com/forum/?hl=en&fromgroups#!topic/cocoa-dev/SpXF0__B4dE](https://groups.google.com/forum/?hl=en&fromgroups#!topic/cocoa-dev/SpXF0__B4dE)

不过，不确定可以做些什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T05:41:21.023

我猜你的问题的根源在这里：

```
@property (weak) SomeOtherClass bar;

@property (weak) Class_B class_B; 
```

当这些对象被释放时，它们的实例变量被运行时设置为 nil，但不会发出 KVO 通知。

尝试将这些更改为`strong`属性并查看是否可以解决问题。

在这篇博文中有一些[关于这种情况的很好但复杂的解释](http://www.mikeabdullah.net/weak-properties-kvo-compliance.html)。

# exception - 在 Grails 中设置违反唯一约束的消息

> ID：12024557
> 
> 赞同：2
> 
> 时间：2012-08-19T06:01:52.673
> 
> 标签：exception, grails, unique, message, grails-orm

在圣杯中，

当违反特定的“唯一”约束时，我想设置出现的异常消息。

那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T15:36:17.943

用于每个约束的消息代码列在该约束的参考页面中，例如 [http://grails.org/doc/latest/ref/Constraints/unique.html](http://grails.org/doc/latest/ref/Constraints/unique.html)。从那里看起来你需要的代码是

```
com.project.ModelName.fieldName.unique=blah 
```

您需要用适当的值替换 com.project.ModelName.fileName

感谢[http://grails.1312388.n4.nabble.com/Custom-error-message-in-message-properties-td3335696.html](http://grails.1312388.n4.nabble.com/Custom-error-message-in-message-properties-td3335696.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-06T22:55:11.593

只是为了更新给定的答案，上面甚至文档似乎都建议：

此约束影响模式生成。

> 错误代码：className.propertyName.unique

但在我的应用程序中情况并非如此，也许 grails 3 中的情况发生了变化。我尝试了一个令人厌烦的变化，但仍然没有成功返回默认值。

对于其他面临这个问题的人来说，解决方案真的很简单。

找到返回响应的默认条目：

就我而言，我有两个条目：

```
##default.not.unique.message=Property [{0}] of class [{1}] with value [{2}] must be unique
##default.not.unique.message={0} must be unique 
```

通过在行首添加哈希将它们都注释掉，并尝试再次保存记录。这次在我的 Web 界面上，我看到了实际的字段名称，而不是默认的 grails 消息。

> unique.com.xxx.users.PhotosBean.imageSHa

我在messages.properties中添加了这个键的条目，发现一切运行良好。

还要注意它挂在子类而不是实际类上，也许在我的情况下它过于复杂。

在这些情况下的技巧是注释掉返回值的默认条目，然后在返回实际约束时重新启用。

# php - 数组/数据更改

> ID：12024567
> 
> 赞同：1
> 
> 时间：2012-08-19T06:03:52.273
> 
> 标签：php, arrays, function, explode, dynamic-arrays

我正在开发一个部落网站：piratesofpopulous.comli.com/ 这是一个游戏的部落网站，我想获取部落成员的游戏历史并显示在他们的个人资料页面上，您可以在这里查看：

[http://piratesofpopulous.comli.com/user.php?username=Waleed](http://piratesofpopulous.comli.com/user.php?username=Waleed)

该页面没有为用户发布，我仍在努力。问题是我使用了explode方法来爆炸这个页面：[http](http://www.popre.net/game.php?u=38456) ://www.popre.net/game.php?u=38456 。然后使用保存游戏的数组，即$expl[596]。

我正在使用这段代码：

```
//Breaking the URL
$url = "$profile_link"; <-- This profile link will be driven from the database, Its saved when user is registered.
parse_str( parse_url( $url, PHP_URL_QUERY), $params);

//After Breaking putting the value of u in function
function gameStats($u)
{
$result = file_get_contents('http://popre.net/game.php?u='. $u . '');
$expl = explode('"',$result);

echo"<br>Level: $expl[580]<br>";
echo"Players: $expl[596]<br><br>";
echo"Result: $expl[584]<br><br>";
echo"Points: $expl[586]<br><br>";
}
gameStats( $params['u']); 
```

**我打破了网址，因为用户使用这样的网址注册，即：www.popre.net/user.php?u=38456 <-- 链接包含 user.php?u=someid**

**但是游戏保存在 game.php 而不是 user.php 即：`www.popre.net/game.php?u=38456` <-- game.php/u=same_user_id**

我打破了 url 以从他们的个人资料链接中获取“u”的值，然后将其放入 game.php 以获取数组，然后显示选择性数组......

您可以通过以下方式查看所有数组：

```
print_r($expl); 
```

但问题是，在几分钟内，例如爆炸数组 $expl[596] 更改为包含其他数据的其他内容，即 $expl[580]，但再过几分钟它又变回 $expl[596]。然后正确显示数据和游戏。您可以在此处查看我显示这些内容的页面：http: [//piratesofpopulous.comli.com/user.php](http://piratesofpopulous.comli.com/user.php?username=Waleed) ?username=Waleed 我仍在努力。

那么，有没有什么办法可以得到完美的数组编号所以数据永久显示而不显示任何其他数据呢？

或者如果数组发生更改，还有其他任何有效的方法？

还是别的什么？

任何帮助都会对我有好处......

编辑：

我这样做是为了获取地图（游戏关卡）、玩家、结果和积分。但经过一段时间后，爆炸数组即：Player $expl[600]; 更改为 $expl[596]，它一直在变化，但有时它会回到 $expl[600]。在它不断变化的同时，是否仍然可以从中获取数据？

这是我正在使用的代码：

```
 $url = "$profile_link"; <-- You can use this profile link http://popre.net/user.php?u=38456
            parse_str( parse_url( $url, PHP_URL_QUERY), $params);
            function gameStats($u)
            {
            $result = file_get_contents('http://popre.net/game.php?u='. $u . '');
            $expl = explode('"',$result);

            echo"<div id='games'>";
            echo"<h3>Game 1</h3>";
            echo"<div class='data'>Level:    $expl[584]</div><br>";
            echo"<div class='data'>Player:   $expl[600]</div><br><br>";
            echo"<div class='data'>Result:   $expl[588]</div><br><br>";
            echo"<div class='data'>Points:   $expl[590]</div><br><br></b>";
            echo"</div>";

            }
            gameStats( $params['u']); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:13:41.417

您需要使用[preg_match_all()](http://php.net/manual/en/function.preg-match-all.php)。

例如：对于所有脚本

```
$url = "www.popre.net/user.php?u=38456";
parse_str( parse_url( $url, PHP_URL_QUERY), $params);

function gameStats($u){
    $result = file_get_contents('http://popre.net/game.php?u='. $u . '');
    $return = array();
    $pattern = "\<td rowspan=\"2\" class=\"gamelevel\">\<span><a href=\"(.*)\">(.*)<\/a><\/span>\n(.*)<a href=\"(.*)\">(.*)<\/a><\/td>\n(.*)<td class=\"gamepointsresult dgame(.*)\">(.*)<\/td>(.*)<td class=\"gamepoints\">(.*)<\/td><td class=\"gamepoints\">(.*)<\/td><td class=\"gamepoints\">(.*)<\/td>\n(.*)<tr class=\"(one|two)\"><td colspan=\"4\" class=\"gameplayerssmall\">(.*)vs.(.*)<\/td>\<\/tr>";
    $match = preg_match_all('/'.$pattern.'/', $result, $matches);

    /* level */      foreach($matches[2] as $num => $one){ $return[$num]['level'] = $one; }
    /* map */        foreach($matches[5] as $num => $one){ $return[$num]['map'] = $one; }
    /* result */     foreach($matches[8] as $num => $one){ $return[$num]['result'] = $one; }
    /* points */     foreach($matches[10] as $num => $one){ $return[$num]['points'] = strip_tags($one); }
    /* mu */         foreach($matches[11] as $num => $one){ $return[$num]['mu'] = strip_tags($one); }
    /* sigma */      foreach($matches[12] as $num => $one){ $return[$num]['sigma'] = strip_tags($one); }
    /* player1 */    foreach($matches[15] as $num => $one){ $return[$num]['player1'] = strip_tags($one); }
    /* player2 */    foreach($matches[16] as $num => $one){ $return[$num]['player2'] = strip_tags($one); }

    return $return;
}

$gameInfo = gameStats($params['u']);

echo "<table border='1'>
        <tr>
            <td>NO</td><td>LEVEL</td><td>MAP</td><td>RESULT</td><td>POINTS</td><td>MU</td><td>SIGMA</td><td>Player 1</td><td>Player 2</td>
        </tr>\n";

foreach($gameInfo as $num => $one){
    echo "<tr>
        <td>".($num+1)."</td><td>".$one['level']."</td><td>".$one['map']."</td><td>".$one['result']."</td><td>".$one['points']."</td><td>".$one['mu']."</td><td>".$one['sigma']."</td><td>".$one['player1']."</td><td>".$one['player2']."</td>
    </tr>\n";
}

echo "</table>"; 
```

您将获得其中的所有结果，`array`其他结果相同，然后组合数组，因为所有结果在每个数组中都具有相同数量的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:19:07.953

只需将 echo 的值更改为 > $#echo_$expl_Levelname < 如果您使用的是 Joomla 或 JavaScript...它肯定会工作...在下面回复

# java - 并发访问 Map 中的 List

> ID：12024578
> 
> 赞同：0
> 
> 时间：2012-08-19T06:06:00.850
> 
> 标签：java, list, concurrency, map

我已经编写了一个任务侦听器模型作为下面的代码，是否可以对其进行任何优化或错误修复（如果有），尤其是列表和地图访问？在这个模型中，创建一个 Map 来保存多个 List，其中包含一些用户的监听器，每个 List 的大小大多在 1000 左右。这里有两点： 1\. 为了性能，使用 HashMap 还是 ConcurrentHashMap？2.这是否比复制 List 并在多线程访问上迭代复制的 List 更好的方法？

```
public class TaskActionManager {

    private static final Map<String, List<TaskActionListener>> listenersMap = new ConcurrentHashMap<String, List<TaskActionListener>>();
    private static final ExecutorService executor = Executors
            .newCachedThreadPool();
    private static ReentrantLock lock = new ReentrantLock();

    public static final void addListener(TaskActionListener listener,
            TaskActionType type) {
        // type is an enum
        String key = type.name();

        List<TaskActionListener> list = listenersMap.get(key);
        lock.lock();
        try {
            // Mostly the list is not null
            if (list == null) {
                list = listenersMap.get(key);
                if (list == null) {
                    list = new ArrayList<TaskActionListener>();
                    listenersMap.put(key, list);
                }
            }
            list.add(listener);
        } finally {
            lock.unlock();
        }
    }

    public static final void removeListener(TaskActionListener listener,
            TaskActionType type) {
        List<TaskActionListener> list = listenersMap.get(type.name());
        if (list == null)
            return;

        lock.lock();
        try {
            list.remove(listener);
        } finally {
            lock.unlock();
        }
    }

    public static final void fireAction(final TaskAction action) {
        executor.execute(new Runnable() {
            @Override
            public void run() {
                List<TaskActionListener> list = listenersMap.get(action
                        .getType().name());
                if (list == null)
                    return;

                // Make a copy
                List<TaskActionListener> copy = null;
                lock.lock();
                try {
                    copy = new ArrayList<TaskActionListener>(list.size());
                    Collections.copy(list, copy);
                } finally {
                    lock.unlock();
                }

                // Iterate the copy
                if (copy != null) {
                    for (TaskActionListener listener : copy) {
                        try {
                            listener.fireAction(action);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:06:36.870

> 为了性能，使用 HashMap 还是 ConcurrentHashMap？

显然，ConcurrentHashMap 是 HashMap 的并发版本。所以答案无疑是 ConcurrentHashMap。它使用起来更简单，也更高效，因为你不需要锁定它，因为它是线程安全的。

> 这是比复制列表并在多线程访问上迭代复制的列表更好的方法吗？

ConcurrentHashMap 是线程安全的，因此您无需复制即可进行迭代。如果您不介意在迭代列表时（通过另一个线程）更改列表，我不明白您为什么应该在这里，那么这就是要走的路。

有关详细信息，请参阅：http: [//docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)

**笔记：**

1.  迭代器被设计为一次只能由一个线程使用。
2.  与 Hashtable 类似，但与 HashMap 不同，此类不允许将 null 用作键或值。

# html - 相对定位不起作用

> ID：12024579
> 
> 赞同：1
> 
> 时间：2012-08-19T06:06:01.730
> 
> 标签：html, css, css-position

我有一个网站，我试图将一个 div 浮动到它的父 div 内垂直居中。我使用的代码基本上是这样的；

```
#box_to_be_floated_vertically {
    position:relative;
    top:50%;
} 
```

看起来它应该工作，但它没有？

对于我的示例，请看这里：[http](http://www.dronnoc.com/temp/index.php)
://www.dronnoc.com/temp/index.php 如果您看这里，它是浮动在侧边栏一侧的 div，带有 ID `#handle`。我也尝试过使用`#sidebar > #handle`，但这没有任何区别。

有什么想法或解决方案吗？我已经为此苦苦挣扎了好几天。

**编辑**

我想指出，在我的示例站点中，如果我在`top`属性中物理地输入一个像素高度，它就可以正常工作。问题出在我尝试使用百分比时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:33:19.600

用这个：

```
#box_to_be_floated_vertically {
    position: absolute;
    top: 50%;
    margin-top: -XXpx;
    } 
```

`XX`- 元素的高度除以 2

容器必须有`position:relative;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:18:28.160

你可以试试**[死亡中心](http://www.wpdfd.com/editorial/thebox/deadcentre4.html)**

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T06:26:17.733

以我锻炼的百分比试试这个。

```
 #handle {
    position: absolute;
    top: 70%;
    } 
```

# c# - 如何确定 DataGridCheckBoxColumn 中的行是否在 DataGrid 中被选中？

> ID：12024581
> 
> 赞同：0
> 
> 时间：2012-08-19T06:06:11.050
> 
> 标签：c#, .net, wpf

如果我在 DataGrid 中有一个 DataGridCheckBoxColumn（而不是使用数据网格的多选模式），我如何跟踪或发现哪些行已被检查？

DataGrid 中是否有合适的属性来枚举每一行并检查列？DataGrid.ItemsSource 将为我提供基础集合 - 我希望能够自己获取网格行项目中的列

如果我响应 CheckBox 的 Click 事件，我将如何确定该 CheckBox 属于基础集合中哪个项目的哪一行？

```
<DataGrid x:Name="dgPlayers" AutoGenerateColumns="False" Height="450" CanUserAddRows="False" AlternationCount="2" AlternatingRowBackground="WhiteSmoke" GridLinesVisibility="None">
                <DataGrid.Columns>
                    <DataGridCheckBoxColumn></DataGridCheckBoxColumn>
                    <DataGridTextColumn Header="First Name" Binding="{Binding Path=FirstName}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Last Name" Binding="{Binding Path=LastName}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Position" Binding="{Binding Path=PositionCode, Converter={StaticResource NFLPositionGrouper}}"></DataGridTextColumn>
                    <DataGridTextColumn Header="College" Binding="{Binding Path=CollegeName}"></DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid> 
```

如您所见，我没有将 DataGridCheckBoxColumn 绑定到任何属性 - 我的目的是使用它进行选择（是的，我知道，DataGrid 已经内置了多项选择......这纯粹是一个学术练习）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:19:31.553

你可以试试这样的

```
 foreach (GridViewRow row in yourgrid.Rows)
    {
        Access the CheckBox
        CheckBox cb = (CheckBox)row.FindControl("youcheckboxid");
        if (cb != null && cb.Checked==true)
        {

          //you should now know the row where the checkbox was cheked 
         }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:59:14.753

虽然我无法弄清楚如何枚举每个 DataGridRow，就像您可以并且可能能够通过 .Rows 集合在 ASP.NET 中做的那样，但我意识到这无论如何都不是一个好主意，而且微软可能是故意的省略了这个属性。

这是因为 DataGrid 与许多其他列表控件一样使用 UI 虚拟化，这意味着无论如何它只会为 VISIBLE 行生成 DataGridRow 项 - 如果您可以枚举每一行，这将破坏此功能的目的并不必要地消耗内存。

正如许多人所提到的（我并不反对），最终最好的方法是按照 MS 的意图使用网格，这是一种面向对象的方式，绑定到可以直接访问它的底层对象。

但是，我确实找到了一些接近我想要的东西，这确实让我可以访问实际的 DataGridRow 对象：

```
myDataGridInstance.ItemContainerGenerator.ContainerFromItem() 
```

或者

```
myDataGridInstance.ItemContainerGenerator.ContainerFromIndex() 
```

这两种方法都会为您提供与指定集合对象相对应的 DataGridRow，之后您可以剖析和导航它的可视化树和属性（例如，它自己的 DataContext 将是集合项实例），就像您期望的任何其他普通元素一样

我发现跟踪所有 CheckBox 刻度的另一种方法是通过 Control.Tag 属性关联底层对象绑定 - 我会将其设置为 {Binding} ，它只是将它绑定到底层集合对象本身，而不是特定属性...在 CheckBox 的事件处理程序中，我可以手动跟踪已选中/未选中的项目列表。

绝对不是一个聪明的方法 - 但这是可能的，这就是我一直在寻找的 - 话虽如此，我现在将回到 MS 打算让我们做的事情:)

# javascript - 延迟点击时淡入/淡出内容

> ID：12024583
> 
> 赞同：0
> 
> 时间：2012-08-19T06:06:22.380
> 
> 标签：javascript, fadein, fade, tumblr, fadeout

在我正在构建的[Tumblr](http://phillypraxis.tumblr.com/)主题中，我已经设法在背景淡入后不久将帖子淡入，仅使用 CSS。但是，我认为帖子淡入但只是眨眼看起来很奇怪。我发现 Javascript 可以处理淡入淡出的帖子，但背景淡入必然会延迟一点。我希望在背景淡入之后发生帖子的 javascript 淡入，但我似乎无法有效地延迟该动画：

```
<script type="text/javascript">
$(document).ready(function() {

$(".posts").css("display", "none");

$(".posts").fadeIn(1000);

$("a").click(function(event){
    event.preventDefault();
    linkLocation = this.href;
    $(".posts").fadeOut(1000, redirectPage);     
});

function redirectPage() {
    window.location = linkLocation;
}
});
</script> 
```

我将如何将淡入延迟 x 秒？

更新（2012 年 8 月 19 日）：我仍然没有弄清楚如何将 Javascript 动画延迟超过 1 秒，但我发现只允许 CSS 处理淡入效果很好。我什至没有删除淡入淡出的 javascript 命令。我猜CSS只是覆盖了它。至少从表面上看，它有效地解决了我的问题。

# c# - C#在html标签中抓取文本

> ID：12024585
> 
> 赞同：-1
> 
> 时间：2012-08-19T06:07:04.487
> 
> 标签：c#, html, tags

好的，我有兴趣尝试在这些标签之间找到文本：

```
<font color="#00006b">Aa Megami-sama (OAV 2011)</font> 
```

而且我有一个名称在相同标签中的列表，我想抓住它们并将它们放入动态数组列表中。

我曾尝试使用 HTMLAgilityPack 来执行此操作，但是当我运行我的程序时会发生这种情况： ![在此处输入图像描述](../Images/728d11758850dd6aaf133d19fa19b7bd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T06:20:40.647

LoadHtml() 方法将 HTML 作为输入，而不是 URL。您需要自己获取 HTML。

例如：

```
 using (var webclient = new WebClient())
        {
            var html = webclient.DownloadString("http://www.animenewsnetwork.com/encyclopedia/anime.php?list=A");

            HtmlDocument doc = new HtmlDocument();
            doc.LoadHtml(html);
            var node = doc.DocumentNode.SelectSingleNode("//font");
            Console.WriteLine(node.InnerText);
            Console.ReadKey();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:11:39.310

你`SelectSingleNode()`的返回`null`值。所以你需要对最后一行做一个“空检查”。这样做：

```
if(node != null)
{
   Messagebox.Show(node.InnerText);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T06:38:04.457

首先，通过这种方式使用LoadHtml方法获取html文件数据。

```
var webclient = new WebClient();
HTMLAgilityPack.HtmlDocument doc = new HTMLAgilityPack.HtmlDocument();
doc.LoadHtml(webClient.DownloadString(@"http://www.animenewsnetwork.com/encyclopedia/anime.php?list=A")); 
```

[现在，](https://stackoverflow.com/questions/4767318/htmlagilitypack-webget-load-gives-error-object-reference-not-set-to-an-instance)由于可能的元数据字符集可能无效，有时这可能无法正常工作。在这种情况下，您可以在那里使用答案，解决方法是手动读取响应（通过`HttpWebRequest`和`HttpWebResponse`）。

* * *

接下来，您可能需要检测和处理其他解析错误（包括上述错误）（如果有的话），如此处[所述](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)：

```
 if (doc.ParseErrors!=null && doc.ParseErrors.Count>0)
   {
       // Handle any parse errors as required
   }
   else
   {
        if (doc.DocumentNode != null)
        {
            HtmlNode fontNode = doc.DocumentNode.SelectSingleNode("//font");
            if (fontNode != null)
            {
                // Do something with fontNode
                MessageBox.Show(fontNode.InnerText);
            }
        }
    } 
```

# jquery - 高度更改后，我的 jQuery 对话框正下方的灰色边框

> ID：12024587
> 
> 赞同：0
> 
> 时间：2012-08-19T06:07:24.200
> 
> 标签：jquery, jquery-dialog

当我可以像这样删除一行时，我有一个 jQuery UI 对话框：

![在此处输入图像描述](../Images/92d1089b8c818983890e71d0e49f62dd.png)

在我的对话框 UI 上删除该行时，我会在对话框下方看到一种灰色边框，如下所示：

![在此处输入图像描述](../Images/4b86b73cd7dfd5a1174bd7ca12e3fe2a.png)

如果我将鼠标悬停在页面上，这个灰色边框会消失，但我更喜欢通过代码立即完成。

我想我需要重新绘制或刷新对话框。

知道怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:25:48.333

当您删除该行对话框内容时，您需要再次设置高度。以下是根据我的理解编写的脚本并相应地使用它。

```
$(document).ready(function(){
    var box = $("#example").dialog();

    $("row").click(function(){
       //existing stuff to delete row.

       box.dialog("option", "height", $("#example").height());

    });

}); 
```

希望这能解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:34:47.667

我终于自己找到了解决方案。

```
$('#modal-dialog').toggleClass("hovered"); 
```

在对话框的高度改变后调用此代码。

# javascript - node.js instanceof 和 cleartextStream

> ID：12024588
> 
> 赞同：1
> 
> 时间：2012-08-19T06:07:29.877
> 
> 标签：javascript, node.js

我正在尝试验证我的原型的两个参数是否是我期望它们的实例。我需要知道 cleartextStream 是否是 node.js 文档调用[tls.cleartextStream](http://nodejs.org/api/tls.html#tls_class_tls_cleartextstream)的实例，以及 manager 是否是我在另一个文件中定义的原型的实例。

```
var tls = require('tls'),
    clientManager = require('./client_manager');

var Client = function (cleartextStream, manager) {
    /*
     * Both arguments must be proper instances of the expected classes.
     */
    if (!(cleartextStream instanceof tls.cleartextStream) || !(manager instanceof clientManager))
        throw (...) 
```

直到现在一切都“好”。执行该位时，我得到：

```
if (!(cleartextStream instanceof tls.cleartextStream) || !(manager instanceof
TypeError: Expecting a function in instanceof check, but got #<CleartextStream> 
```

并且，对于经理部分：

```
if (!(cleartextStream instanceof tls) || !(manager instanceof clientManager))
TypeError: Expecting a function in instanceof check, but got [object Object] 
```

那么，**我将如何检查这些实例呢？**

编辑：阅读[这篇文章后](https://stackoverflow.com/questions/6021245/what-does-this-instanceof-error-message-mean)，我发现对象实际上是构造函数的实例，因此将我的代码修改为

```
if (!(cleartextStream instanceof tls) || !(manager instanceof clientManager.constructor)) 
```

实际上解决了第二个问题。尽管如此，第一个仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:22:12.520

tls 不会导出这些类供您检查，所以我看不到一种真正干净的方法。

您可以做的一件事是检查对象的原型是否是您所期望的。

```
target_proto = new tls.createSecurePair().cleartext.__proto__
if (target_proto !== clearTextStream.proto)
  throw(....) 
```

需要注意的一件事是，这仅在您和该对象的创建者引用相同版本的模块（例如，使用相同的路径导入等）时才有效，因此**proto**对象将比较为相等.

# actionscript-3 - NetStream.Seek.Complete -?

> ID：12024590
> 
> 赞同：2
> 
> 时间：2012-08-19T06:08:26.130
> 
> 标签：actionscript-3, flash, actionscript, netstream, seek

最近我一直在玩 NetStream（再次......），我发现了一个我以前没有观察到的奇怪的事情 - 现在在 NetStream.Seek.Notify 另一个事件触发之后：NetStream.Seek.Complete。有人知道这是什么时候添加的，以及它对于渐进式流媒体是否可靠？我似乎在参考文献中找不到任何关于它的信息... :-/ 谢谢！

# qt - qtextedit 更改字体

> ID：12024596
> 
> 赞同：0
> 
> 时间：2012-08-19T06:09:38.453
> 
> 标签：qt, qtextedit

我在我的项目中使用 QTextEdit

当用户单击按钮时，我想更改文本编辑区域的字体。为此，我正在使用 QTextEdit::setCurrentFont() 函数。但是，为了改变字体，用户必须首先在文本编辑区域中选择一些文本。整个textedit的字体只有在选择一些文本然后更改字体后才会更改。

有什么方法可以避免必须选择文本来更改字体？即使用户没有选择任何文本，我也希望字体发生变化。

我也试过这个。。但是，没用。。

```
QTextCharFormat Format = cursor->charFormat()
Format.setFontWeight(QFont::Bold);
cursor->setCharFormat(Format); 
```

谢谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-21T22:17:17.930

我解决了这个问题..实际上问题出现了，因为我将光标设置到`textedit`每个关键事件的区域末尾，以便在光标不可见时调出滚动条..滚动条没有自动出现，因为 Qt调整`QTexEdit`区域大小。因此我不得不以这种方式调出滚动条..

现在，问题解决了，因为我将`QTexEdit`区域设置为固定大小.. :)

# ios - 在 iOS 上检测盗版应用程序 - 导致服务器成本的吸血鬼

> ID：12024599
> 
> 赞同：6
> 
> 时间：2012-08-19T06:10:44.583
> 
> 标签：ios, copy-protection, piracy

我知道如何检测你的 iOS 应用是否被盗版的问题已经出现了几十次，普遍的共识是：

1.  不值得玩那个猫捉老鼠的游戏
2.  盗版您的应用程序的人很可能无论如何都不会购买它
3.  使用您的应用程序的人，无论是否付费，几乎都是一种广告形式，因此可以在某种程度上提供帮助

但是，如果盗版者（借用谷歌的一个术语）**吸血鬼**——盗版你的应用程序并实际上让你花钱的人，因为你的应用程序非常依赖于服务器端？是否有推荐的方法来检测是否有人在没有付费的情况下使用您的应用程序？Apple 是否为付费应用程序本身（不是应用程序内购买）提供任何收据验证？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-19T06:32:43.173

有很多复杂的方法可以做到这一点。但是，它们需要很长时间才能实施，而且效果不是很好。他们会阻止那些只运行 Crackulous 并且对破解应用程序的实际过程一无所知的人，但熟练的破解者可以轻松绕过它们。最好的解决方案是不实施任何形式的复制保护，而是花时间改进您的应用程序，而不是促进合法销售，因为目前没有任何可靠的方法来阻止盗版。

此外，有些人会建议阻止越狱设备，但这[很容易被击败](http://lifehacker.com/5864300/xcon-unblocks-iphone-apps-with-jailbreak-detection)，并且会阻止出于正当理由（而且有很多）越狱的人使用您的应用程序。

# javascript - Javascript 不是从外部链接加载的

> ID：12024600
> 
> 赞同：0
> 
> 时间：2012-08-19T06:11:02.327
> 
> 标签：javascript, jquery, html

我删除了所有 javascript 并将其放在外部链接中：

```
<script type="text/javascrpt" src="javascript/FooterJavascript.js"></script> 
```

当我访问该网站并单击链接时..所有的 javascript 都在那里。

该文件具有不同的功能和事件..例如悬停效果..它的开头是这样的：

```
 $(document).ready(function(){ 
```

为什么没有加载该文件内的悬停效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T06:13:07.307

```
<script type="text/javascrpt" src="javascript/FooterJavascript.js">
                    ^^^^^^^^
                  here is the error 
```

一定是

```
<script type="text/javascript" src="javascript/FooterJavascript.js"> 
```

**编辑：**

在neatbean中看到

如果错误，则脚本正文中的背景颜色不同

![在此处输入图像描述](../Images/a9bea28623897a2ef4f552455f30dc35.png)

现在当脚本标签正确时会发生什么......是的，现在不同的背景颜色表明一切正常

![在此处输入图像描述](../Images/c38701685ef0982c582859403fdda8ff.png)

# apache-camel - Apache Camel - 连接到 Gtalk

> ID：12024602
> 
> 赞同：1
> 
> 时间：2012-08-19T06:11:28.827
> 
> 标签：apache-camel, google-talk

我尝试使用 apache camel 使用 gtalk 帐户发送即时消息。

我使用了 apache camel xmpp 组件。我能够连接到我的 jabber 帐户并成功发送消息。对于 jabber 帐户，我使用以下网址

xmpp://abc@jabber.org/praveen@gmail.com?password=secret"

这会从我的 abc jabber 帐户向 praveen gmail 帐户发送一条消息。但是当我尝试从我的 gmail 帐户发送消息时，它会失败并出现以下异常

xmpp://talk.google.com:5222/abc@jabber.org?serviceName=gmail.com&user=praveen&password=secret

```
Caused by: SASL authentication PLAIN failed: invalid-authzid: 
at org.jivesoftware.smack.SASLAuthentication.authenticate(SASLAuthentication.java:337)
at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:203)
at org.apache.camel.component.xmpp.XmppEndpoint.createConnection(XmppEndpoint.java:169)
at org.apache.camel.component.xmpp.XmppPrivateChatProducer.doStart(XmppPrivateChatProducer.java:105)
at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
at org.apache.camel.util.ServiceHelper.startService(ServiceHelper.java:62)
at org.apache.camel.impl.ProducerCache.doGetProducer(ProducerCache.java:387)
... 7 more 
```

当我对此进行一些研究时，我发现 Google 不支持 SASL。所以我需要设置

```
setSASLAuthenticationEnabled(false); 
```

在 org.jivesoftware.smack.ConnectionConfiguration 上让它工作。但是我在骆驼文档中找不到任何参数来设置这个参数。

有没有人成功做到这一点？如果是的话，你能给我一些关于这个的信息吗？

谢谢，帕拉尼维尔拉詹 B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:57:13.200

查看源代码，目前的实现似乎没有办法做到这一点。

```
if (port > 0) {
        if (getServiceName() == null) {
            connection = new XMPPConnection(new ConnectionConfiguration(host, port));
        } else {
            connection = new XMPPConnection(new ConnectionConfiguration(host, port, serviceName));
        }
    } else {
        connection = new XMPPConnection(host);
    } 
```

将此功能添加到 XMPP 组件应该不难（在这种情况下，您可能需要为此添加补丁，因此它可能会进入骆驼的未来版本），或者您可以从 XmppEndpoint 类派生并覆盖创建连接方法。您可能需要覆盖 XMPP 组件中的一些其他类，以确保使用您的自定义端点而不是原始端点。

# java - 堆大小不断增长，但 jstat S0 和 S1 一直在清理

> ID：12024605
> 
> 赞同：0
> 
> 时间：2012-08-19T06:12:50.407
> 
> 标签：java

我们正在对 centos 上的应用程序进行内存测试。我们注意到，top 显示内存不断增长，我们怀疑这是由于 JVM 需要额外空间。此外，在应用程序代码中，我们最后有这几行。我们注意到这也表明使用的内存和堆大小也在不断增长，最初是几十兆字节，现在是几百兆字节的值。

```
Runtime runtime = Runtime.getRuntime();
long memory = runtime.totalMemory() - runtime.freeMemory();
System.out.println("\n\nUsed memory is bytes: " + memory);
//Print the jvm heap size.
long heapSize = runtime.totalMemory();
System.out.println("\n\nHeap Size = " + heapSize); 
```

另一方面，我们使用此命令 /usr/java/jdk1.7.0_03/bin/jstat -gcutil 22805 并注意到一段时间后 S0 和 S1 都被清除为零？这种解释是否给出了一些内存问题的迹象，或者这是 java 的正常行为？

下面是我们代码的骨架。从语句 6 开始，我有一个很大的 while 循环，然后在其中我得到了更多的查询，这可能是罪魁祸首吗？

```
try{

         try{ //inner try for each complete message read from the socket connection

//lots of inner queries run based on some logics of if else etc

//sample query of opening and closing both statement and resultsets.

Statement stmt1 = null;
stmt1 = dbconn.createStatement();
String selectQuery1  = "Select query";
ResultSet rs1 = stmt1 .executeQuery(selectQuery1);
while(rs1.next()) {
//process here

}
try{
  if (rs1 != null ){
        rs1.close();
  }
  if (stmt1!= null ){
        stmt1.close()
  }
}
catch(SQLException ex){
  ex.printStackTrace(System.out);
}

          Statement stmt6 = null;
          stmt6 = dbconn.createStatement(); 

String selectQuery3 = "Select query....";
ResultSet rs3 = stmt6.executeQuery(selectQuery3);

          while(rs3.next()) {
              var1= rs3.getInt("value1");
    var2 = rs3.getString("value2");
    if(var2.equals("POINT"){
                  Statement stmt7 = null;
                  stmt7 = dbconn.createStatement();
        String selectQuery4= "select query ... ";
        ResultSet rs4 = stmt7.executeQuery(selectQuery4);
        if(rs4.next()){
    Statement stmt8 = null;
                        stmt8 = dbconn.createStatement();
                        if(lastID>0){

                             String updateQuery2 = "update query .......";
                             count = stmt8.executeUpdate(updateQuery2);
                             String insertQuery2 = "insert query .....";
                             count = stmt8.executeUpdate(insertQuery2);
                             String selectLast1 = "SELECT last_insert_id()";
         ResultSet rs5 = stmt8.executeQuery(selectLast1);
         if(rs5.next()){
                 gFAlertIDOut=rs5.getInt(1);
         gFOutID = lGFID;
         } 
                             String insertQuery3 = "insert query .....";
                             count = stmt8.executeUpdate(insertQuery3);
                             String selectLast2 = "SELECT last_insert_id()";
         rs5 = stmt8.executeQuery(selectLast2);
         if(rs5.next()){
                 gFAlertIDIn=rs5.getInt(1);
         gFIntID = lGFID;
         } 
                             try{
                       if (rs5 != null ){
                           rs5.close();
                      }
                      if (stmt8!= null ){
                         stmt8.close();
                      }
                  }
                  catch(SQLException ex){
                   ex.printStackTrace(System.out);
                  }   

                        }
                        else{

                       }                                 
                  }
                  try{
            if (rs4 != null ){
                rs4.close();
        }
        if (stmt7!= null ){
               stmt7.close();
        }
       }
       catch(SQLException ex){
          ex.printStackTrace(System.out);
       }   

              }
              else{
                  Statement stmt7 = null;
                  stmt7 = dbconn.createStatement();
        String selectQuery4= "select query ... ";
        ResultSet rs4 = stmt7.executeQuery(selectQuery4);
        if(rs4.next()){

                  }

                  try{
            if (rs4 != null ){
                rs4.close();
        }
        if (stmt7!= null ){
               stmt7.close();
        }
       }
       catch(SQLException ex){
          ex.printStackTrace(System.out);
       }   

              }

          }
          try{
    if (rs3 != null ){
       rs3.close();
    }
    if (stmt6!= null ){
       stmt6.close();
    }
}
catch(SQLException ex){
      ex.printStackTrace(System.out);
 }   

dbconn.commit();
}
catch (SQLException ex) { 
  try {    
    dbconn.rollback();  
  } 
  catch (Exception rollback){    
    rollback.printStackTrace(System.out);
  } 
}
catch (Exception e){
 try{    
        dbconn.rollback();  
  } 
  catch (Exception rollback) {    
    rollback.printStackTrace(System.out);
  }
}
     }
     catch (SocketTimeoutException ex){ 
           ex.printStackTrace();
     }  
     catch (IOException ex) { 
           ex.printStackTrace();
     }  
     catch (Exception ex){  
                    ex.printStackTrace(System.out);
     }      
     finally{
        try {
    if ( dbconn != null ){ 
       dbconn.close();
                        }
        }
        catch(SQLException ex){
                    ex.printStackTrace();
        }
        try{ 
              if ( writer1 != null ){
        writer1.close();
    }

        }
        catch(IOException ex){
           ex.printStackTrace(System.out);
        }

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:16:17.680

听起来您的应用程序存在内存泄漏。当执行一个不需要更多内存的进程时，Java 的内存使用量以恒定速率增加是不正常的。

# php - Mysql 和 onbeforeunload

> ID：12024606
> 
> 赞同：0
> 
> 时间：2012-08-19T06:12:58.050
> 
> 标签：php, javascript, mysql, ajax, onbeforeunload

嗨，当用户在我的网站上离开页面时，我试图删除 mysql 数据库中的一行，但由于某种原因它无法正常工作。我知道 onbeforeunload 有效，因为如果我删除其中的所有内容并放入 alert("test"); 警报显示。这不能做吗？我的代码在下面谢谢你的帮助

**Javascript**

```
<script type="text/javascript">
window.onbeforeunload = function(){ 
    var id = document.reset.id.value;
    $.ajax({
        url: "Resetter.php",
        type: "GET",
        data: {'id':id},
        success: function (response) {
            alert(response);
        }
    });
}
</script> 
```

**PHP**

```
<?PHP
    $id = $_GET['id'];
    $link = mysql_connect('localhost', 'root', 'root');
    mysql_select_db("Colleges");
    $delete = mysql_query("DELETE FROM `Table` WHERE `ID`='" . $id . "'");
    mysql_close();
    die();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T06:24:57.963

由于您正在关闭页面，因此您正在关闭与服务器的连接，因此它不会等待您的 Ajax 调用完成。这不是`onbeforeunload`工作方式。它只是客户端。另请注意，`onbeforeunload`根据我的经验，这可能有点挑剔，并不能说明用户可以离开您的页面的所有方式。

要完成您想要的，您必须设置某种**[long polling](http://en.wikipedia.org/wiki/Push_technology#Long_polling)**。这是在服务器端使用 PHP 的示例：http: [//blog.perplexedlabs.com/2009/05/04/php-jquery-ajax-javascript-long-polling/](http://blog.perplexedlabs.com/2009/05/04/php-jquery-ajax-javascript-long-polling/)

您还可以使用[Node.js](http://nodejs.org/)之类的东西来监听页面的连接和断开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:18:11.437

您没有`echo`从您的任何内容中获取任何信息，因此未显示回调函数中`PHP`的警报... :)`$.ajax`

尝试

```
<?PHP
    $id = $_GET['id'];
    $link = mysql_connect('localhost', 'root', 'root');
    mysql_select_db("Colleges");
    $delete = mysql_query("DELETE FROM `Table` WHERE `ID`='" . $id . "'");
    mysql_close();
    if($delete) {
        echo "Done";
    } else {
        echo "Not Done";
    }
?> 
```

# android - 带半径的Android纬度经度

> ID：12024610
> 
> 赞同：0
> 
> 时间：2012-08-19T06:13:36.890
> 
> 标签：android, sqlite, latitude-longitude

我有一个应用程序，用户可以在其中标记家庭、办公室等位置。这些位置的纬度和经度数据存储在 sqlite DB 中。我定期检查用户的当前位置。我想检查用户当前位置是否落在标记位置的半径内。

例如，用户家的坐标是 (a,b) 如何查找当前坐标 (m,n) 是否落在家的 0.5 公里半径内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T06:21:29.693

您可以使用`Location.distanceTo()`or`Location.distanceBetween()`方法测量两个位置之间的距离。如果计算出的距离小于 500m，则在规定的半径范围内。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T10:19:21.873

对于两个坐标之间的距离测量，您可以在此处找到解决方案：

[计算两个地理位置之间的距离](https://stackoverflow.com/questions/8049612/calculating-distance-between-two-geographic-locations/8050255#8050255)

您还可以进行数据库查询以按距离对记录进行排序： http: [//forums.phpfreaks.com/index.php?topic=175951.0](http://forums.phpfreaks.com/index.php?topic=175951.0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T10:01:36.553

或者，老式的方法：半径 = sqrt( (ma)^2 + (nb)^2 ) 假设平坦的地球模型。一旦你的距离非常大，这个公式就不再适用

# android - ViewFlipper 导致动画出现空指针异常

> ID：12024619
> 
> 赞同：0
> 
> 时间：2012-08-19T06:15:35.520
> 
> 标签：android, viewflipper

我正在制作一个计算器应用程序，它当然有很多按钮，特别是在我的情况下是 imagebuttons。该应用程序适用于 2.3，但会导致 4.0 出现问题。问题是我的 ViewFlipper 显示下一个视图时出现 NullPointerException。

```
phhistbnt.setOnClickListener(new View.OnClickListener() 
{
    @Override
    public void onClick(View v) 
    {
    try
    {
        vib.vibrate(30);

        if(animChoice == 0)
            vf1.showNext(); // issue here and most likely the rest of them
        else if(animChoice == 1)
        {
            vf1.setOutAnimation(topUp);
            vf1.showNext();
            vf1.setInAnimation(Fl);
        }
        else if(animChoice == 2)
        {
            vf1.setOutAnimation(fadeOut2);
            vf1.showNext();
            vf1.setInAnimation(hy);
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
}
}); 
```

这是LogCat：

```
08-18 21:55:29.301: W/System.err(6141): java.lang.NullPointerException
08-18 21:55:29.301: W/System.err(6141):     at
f7Calc.com.KidzCalcActivity$12.onClick(CalcActivity.java:751)    
08-18 21:55:29.301: W/System.err(6141): at 
android.view.View.performClick(View.java:3549)
08-18 21:55:29.301: W/System.err(6141): at      
android.view.View$PerformClick.run(View.java:14393)
08-18 21:55:29.311: W/System.err(6141):     at     
android.os.Handler.handleCallback(Handler.java:605)
08-18 21:55:29.311: W/System.err(6141):     at  
android.os.Handler.dispatchMessage(Handler.java:92)
08-18 21:55:29.311: W/System.err(6141):     at android.os.Looper.loop(Looper.java:154)
08-18 21:55:29.311: W/System.err(6141):     at  
android.app.ActivityThread.main(ActivityThread.java:4945)
08-18 21:55:29.311: W/System.err(6141):     at   
java.lang.reflect.Method.invokeNative(Native Method)
08-18 21:55:29.311: W/System.err(6141):     at  
java.lang.reflect.Method.invoke(Method.java:511)
08-18 21:55:29.311: W/System.err(6141):     at   
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-18 21:55:29.311: W/System.err(6141):     at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-18 21:55:29.311: W/System.err(6141):     at dalvik.system.NativeStart.main(Native   
Method) 
```

在模拟器中，Logcat 会显示：

```
08-18 22:19:25.144: I/Choreographer(1290): Skipped 67 frames!  The application may be   
doing too much work on its main thread. 
```

但它继续照常工作。我已经开始使用 AsyncTask 但我不确定如何使用它。请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:02:00.643

我在保罗的帮助下弄清楚了。在升级到 ICE 4.0.x 之前，我不得不在代码中为具有 960x540 分辨率的屏幕尺寸调整按钮的大小，因为该屏幕尺寸没有布局。显然，当我将手机升级到 ICE (Evo 3D) 时，ICE 使用 960x540 的 layout-sw360dp 布局，而不是什么都没有。将其添加到布局列表并输入活动所需的更正 ID 后，walla 就可以工作了。

# c# - 如果选择的值为空，如何让我的 Linq 选择返回值？

> ID：12024621
> 
> 赞同：5
> 
> 时间：2012-08-19T06:15:45.443
> 
> 标签：c#, linq

我有以下代码：

```
 [DisplayName("Created")]
    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")]
    public DateTime? Created { get; set; }

    [DisplayName("Modified By")]
    public string ModifiedBy { get; set; }

    [DisplayName("Modified")]
    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")]
    public DateTime? Modified { get; set; }

        from d in data
        select new Content.Grid
        {
            PartitionKey = d.PartitionKey,
            RowKey = d.RowKey,
            Order = d.Order,
            Title = d.Title,e
            Created = d.Created,
            CreatedBy = d.CreatedBy,
            Modified = d.Modified,
            ModifiedBy = d.ModifiedBy
        }; 
```

`d.Created`、`d.CreatedBy`和有可能为空 `d.Modified`。`d.ModifiedBy`

我怎样才能做到这一点，如果它们为空，那么 select 返回`n/a`and`CreatedBy`并返回and的`ModifiedBy`日期？`January, 1, 2012``Created``Modified`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T06:17:32.217

您可以使用[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)( `??`) 为可空值类型或引用类型提供默认值：

```
from d in data
select new Content.Grid
{
    PartitionKey = d.PartitionKey,
    RowKey = d.RowKey,
    Order = d.Order,
    Title = d.Title,e
    Created = d.Created ?? new DateTime(2012,1,1),
    CreatedBy = d.CreatedBy ?? "n/a",
    Modified = d.Modified ?? new DateTime(2012,1,1),
    ModifiedBy = d.ModifiedBy ?? "n/a"
}; 
```

# android - Android 网络共享服务器

> ID：12024623
> 
> 赞同：0
> 
> 时间：2012-08-19T06:16:00.543
> 
> 标签：android, wifi, tethering

我正在寻找一种在有人连接到我的热点时显示网页的方法

.有没有办法我可以实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:19:57.007

不确定Android访问限制是什么，但假设您的应用程序具有网络读/写/绑定权限，最简单的做法是简单嵌入Jetty并让它在指定端口上启动服务器，例如：[http：/ /wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)

编辑：在进一步阅读您的问题后，您将需要阻止所有其他网络流量，直到客户端接受了上面的强制门户。

希望我有所帮助

md_5

# javascript - 绑定谷歌在文本框上自动完成而不实例化谷歌地图

> ID：12024629
> 
> 赞同：20
> 
> 时间：2012-08-19T06:17:36.007
> 
> 标签：javascript, jquery, google-maps, google-places

我正在尝试在我的网站上添加 Google 地方信息自动填充功能。我在不使用实例化谷歌地图的情况下将我的搜索文本框与自动完成绑定时遇到问题。我想要做的是，我想在我的搜索字段中使用自动完成作为文本建议。但遗憾的是，我看到的所有教程都使用了 autcomplete 和谷歌地图。有没有办法解决？

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-02-03T07:37:18.377

伙计们，您可以使用以下代码。

```
 <!DOCTYPE html>
    <html>
      <head>
        <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
        <script>
            var autocomplete;
            function initialize() {
              autocomplete = new google.maps.places.Autocomplete(
                  /** @type {HTMLInputElement} */(document.getElementById('autocomplete')),
                  { types: ['geocode'] });
              google.maps.event.addListener(autocomplete, 'place_changed', function() {
              });
            }
        </script>
      </head>
      <body onload="initialize()">
        <div id="locationField">
          <input id="autocomplete" placeholder="Enter your address" onFocus="geolocate()" type="text"></input>
        </div>
      </body>
    </html> 
```

编辑：谷歌地图现在需要一个[API 密钥](https://stackoverflow.com/questions/37991340/error-google-maps-api-error-missingkeymaperror)才能工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-19T14:54:57.527

这是一个相当古老的线程，但谷歌现在需要一个 API 用于他们所有基于地图的服务，我觉得代码示例可以简化一点。

内部 head 元素（使用您的输入元素 id 属性更新代码）：

```
<script type="text/javascript">
  function initAutocomplete() {
    // Create the autocomplete object, restricting the search to geographical
    // location types.
    autocomplete = new google.maps.places.Autocomplete(
        /** @type {!HTMLInputElement} */(document.getElementById('YOUR_INPUT_ELEMENT_ID')),
        {types: ['geocode']});

    // When the user selects an address from the dropdown, populate the address
    // fields in the form.
    autocomplete.addListener('place_changed', fillInAddress);
  }

  function fillInAddress() {
    // Get the place details from the autocomplete object.
    var place = autocomplete.getPlace();

  }
    </script> 
```

在您的页面内确认您有一个带有与上述脚本匹配的 ID 属性的文本输入：

```
<input type="text" id="YOUR_INPUT_ELEMENT_ID" /> 
```

在你的 body 标签结束之前添加这个脚本（用你自己的 API 密钥更新）：

```
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initAutocomplete" async defer></script> 
```

其他注意事项：

*   [这是在此处](https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete-addressform)找到的原始帮助/示例文章的略微修改版本
*   您需要 Google Places API Web 服务的有效 API 密钥并从[Google Developer Console启用 Google Maps Javascript API](https://console.developers.google.com)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-21T12:42:37.713

只需将 Secretkey 替换为您的 api 密钥即可。

```
<head>
  <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
  <script src="https://maps.googleapis.com/maps/api/js?key=Secretkey&libraries=places" async defer></script>
  <script>
    var autocomplete;
    function initialize() {
      autocomplete = new google.maps.places.Autocomplete(
        /** @type {HTMLInputElement} */
        (document.getElementById('autocomplete')),
        { types: ['geocode'] }
      );
      google.maps.event.addListener(autocomplete, 'place_changed', function() {});
    }
  </script>
</head>

<div id="locationField">
  <input id="autocomplete" name="location" placeholder="Enter your address" onFocus="geolocate()" type="text"></input>
</div> 
```

获取您的 api 密钥[https://developers.google.com/maps/documentation/javascript/get-api-key](https://developers.google.com/maps/documentation/javascript/get-api-key)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-29T20:57:33.280

请参阅此 Google Geo Dev 博客文章：http: [//googlegeodevelopers.blogspot.com/2012/05/faster-address-entry-with-google-places.html](http://googlegeodevelopers.blogspot.com/2012/05/faster-address-entry-with-google-places.html)

它具有相关方法的链接，包括`Autocomplete.getPlace()`

它还指出，“您可以在任何应用程序中自由使用自动完成功能，即使您没有显示地图。我们只要求您在没有地图的情况下使用自动完成功能时在文本字段下显示“由 Google 提供支持”徽标”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-10T07:57:24.640

```
function initialize()
    {
        var input = document.getElementById('location');
        var autocomplete = new google.maps.places.Autocomplete(
                /** @type {HTMLInputElement} */(input),
                {
                    types: ['(cities)'],
                });
        google.maps.event.addListener(autocomplete, 'place_changed', function() {
            var place = autocomplete.getPlace();
            if (!place.geometry) {
                return;
            }
            //document.getElementById('fLat').value = place.geometry.location.lat();
            //document.getElementById('fLong').value = place.geometry.location.lng();

            var address = '';
            if (place.address_components)
            {
                address = [
                    (place.address_components[0] && place.address_components[0].short_name || ''),
                    (place.address_components[1] && place.address_components[1].short_name || ''),
                    (place.address_components[2] && place.address_components[2].short_name || '')
                ].join(' ');
            }
            LoadEventCategory();
            LoadYelpData();
        });
    }

    google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-29T12:31:08.567

也试试这个

```
<script>
  google.maps.event.addDomListener(window, 'load', initialize);
    function initialize() {
      var input = document.getElementById('autocomplete_search');
      var autocomplete = new google.maps.places.Autocomplete(input);
      autocomplete.addListener('place_changed', function () {
      var place = autocomplete.getPlace();
      // place variable will have all the information you are looking for.
      $('#lat').val(place.geometry['location'].lat());
      $('#long').val(place.geometry['location'].lng());
    });
  }
</script> 
```

[此处提供完整示例](https://www.tutsmake.com/google-places-autocomplete-fill-input-example-without-showing-map/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-09T07:12:06.947

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<style type="text/css">
    body
    {
        font-family: Arial;
        font-size: 10pt;
    }
</style>
</head>
<body>
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=PLZ_ADD_YOUR_GOOGLE_API_KEY_HERE&sensor=false&libraries=places"></script>
<script type="text/javascript">
    google.maps.event.addDomListener(window, 'load', function () {
        var places = new google.maps.places.Autocomplete(document.getElementById('txtPlaces'));
        google.maps.event.addListener(places, 'place_changed', function () {
            var place = places.getPlace();
            var address = place.formatted_address;
            var latitude = place.geometry.location.lat();
            var longitude = place.geometry.location.lng();
            var mesg = "Address: " + address;
            mesg += "\nLatitude: " + latitude;
            mesg += "\nLongitude: " + longitude;
            alert(mesg);
        });
    });
</script>
<span>Location:</span>
<input type="text" id="txtPlaces" style="width: 250px" placeholder="Enter a location" />
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-07-12T03:43:15.640

您可以使用以下代码，只需将 key 替换为您的 gmaps 密钥

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Places Search Box</title>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #description {
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
      }

      #infowindow-content .title {
        font-weight: bold;
      }

      #infowindow-content {
        display: none;
      }

      #map #infowindow-content {
        display: inline;
      }

      .pac-card {
        margin: 10px 10px 0 0;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        background-color: #fff;
        font-family: Roboto;
      }

      #pac-container {
        padding-bottom: 12px;
        margin-right: 12px;
      }

      .pac-controls {
        display: inline-block;
        padding: 5px 11px;
      }

      .pac-controls label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }

      #pac-input {
        background-color: #fff;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        margin-left: 12px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 400px;
      }

      #pac-input:focus {
        border-color: #4d90fe;
      }

      #title {
        color: #fff;
        background-color: #4d90fe;
        font-size: 25px;
        font-weight: 500;
        padding: 6px 12px;
      }
      #target {
        width: 345px;
      }
    </style>
  </head>
  <body>
    <input id="pac-input" class="controls" type="text" placeholder="Search Box">
    <div id="map" style="height: 200px;width: 200px"></div>
    <script>
      // This example adds a search box to a map, using the Google Place Autocomplete
      // feature. People can enter geographical searches. The search box will return a
      // pick list containing a mix of places and predicted search terms.

      // This example requires the Places library. Include the libraries=places
      // parameter when you first load the API. For example:
      // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">

      function initAutocomplete() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -33.8688, lng: 151.2195},
          zoom: 13,
          mapTypeId: 'roadmap'
        });

        // Create the search box and link it to the UI element.
        var input = document.getElementById('pac-input');
        var searchBox = new google.maps.places.SearchBox(input);
        map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

        // Bias the SearchBox results towards current map's viewport.
        map.addListener('bounds_changed', function() {
          searchBox.setBounds(map.getBounds());
        });

        var markers = [];
        // Listen for the event fired when the user selects a prediction and retrieve
        // more details for that place.
        searchBox.addListener('places_changed', function() {
          var places = searchBox.getPlaces();

          if (places.length == 0) {
            return;
          }

          // Clear out the old markers.
          markers.forEach(function(marker) {
            marker.setMap(null);
          });
          markers = [];

          // For each place, get the icon, name and location.
          var bounds = new google.maps.LatLngBounds();
          places.forEach(function(place) {
            if (!place.geometry) {
              console.log("Returned place contains no geometry");
              return;
            }
            var icon = {
              url: place.icon,
              size: new google.maps.Size(71, 71),
              origin: new google.maps.Point(0, 0),
              anchor: new google.maps.Point(17, 34),
              scaledSize: new google.maps.Size(25, 25)
            };

            // Create a marker for each place.
            markers.push(new google.maps.Marker({
              map: map,
              icon: icon,
              title: place.name,
              position: place.geometry.location
            }));

            if (place.geometry.viewport) {
              // Only geocodes have viewport.
              bounds.union(place.geometry.viewport);
            } else {
              bounds.extend(place.geometry.location);
            }
          });
          map.fitBounds(bounds);
        });
      }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=your key&libraries=places&callback=initAutocomplete"
         async defer></script>
  </body>
</html> 
```

谢谢，

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2016-01-20T08:33:35.967

```
 <div class="col-sm-4">
                                    <span class="input input--hoshi">
                                        <input class="input__field input__field--hoshi" id="taddress" type="text"  placeholder="" onmouseover="notnull2(this)" onblur="validtaddr(this); validateaddr2(this);" >
                                        <label class="input__label input__label--hoshi input__label--hoshi-color-2" for="dateto">
                                            <span class="input__label-content input__label-content--hoshi">To</span>
                                        </label>
                                    </span>
                                    <div id="taddress-error" style="color:red"></div>
                                    <script>

                                        function validtaddr() {
                                            if (IsplaceChange == false)
                                            {

                                                if ($("#taddress").val != "") {

                                                    $("#taddress-error").html(" ");
                                                }

                                                $("#taddress").val(null)
                                               //  $("#faddress-error").html("please Enter valid location");

                                            }

                                        };

                                    </script>
                                                                    <script>
                                        var autocomplete;
                                        function initialize1() {
                                          autocomplete = new google.maps.places.Autocomplete(
                                              (document.getElementById('taddress')),
                                              { types: ['geocode'] });
                                          google.maps.event.addListener(autocomplete, 'place_changed', function() {
                                          });
                                        }
                                                                    </script>
                                                                    <script>
                                                var IsplaceChange = false;
                                                $(document).ready(function () {
                                                    var input = document.getElementById('taddress');
                                                    var autocomplete = new google.maps.places.Autocomplete(input, { types: ['(cities)'] });

                                                    google.maps.event.addListener(autocomplete, 'place_changed', function () {
                                                        var place = autocomplete.getPlace();

                                                        IsplaceChange = true;
                                                    });

                                                    $("#taddress").keydown(function () {
                                                        IsplaceChange = false;
                                                    });

                                                });
                                    </script>
                                    <script>

                                        $("#taddress").keyup(function () {
                                            var a = $("#taddress").val();
                                        if (a.match(/^[ t`~!@@#$%^&*()_|+\-=?;:'"<>\{\}\[\]\\\/]+/gi)) {

                                            $("#taddress-error").html("White space & special char are not allow");
                                            $("#taddress").val(null);
                                            //document.form1.text1.focus();
                                            return false;
                                        }
                                        else {

                                            $("#taddress-error").html("");
                                            //document.form1.text1.focus();
                                            return true;
                                        }

                                    });
                                    </script>

                                    <script>

                                            function validateaddr2() {
                                                if ($("#taddress").val() == "")
                                                {
                                                    $("#taddress-error").html("Please enter valid location");
                                                    return false;
                                                }
                                                else {
                                                    $("#taddress-error").html("");
                                                }
                                            }
                                            function notnull2() {
                                                if ($("#taddress").val != "") {

                                                    $("#taddress-error").html(" ");
                                                }
                                                else {
                                                    $("#taddress-error").html(" Please enter valid location");
                                                }
                                            }
                                    </script>
                                </div> 
```

# ruby - ||= ruby 的目的是什么？

> ID：12024637
> 
> 赞同：-1
> 
> 时间：2012-08-19T06:18:53.580
> 
> 标签：ruby

> **可能重复：**
> [||=（或等于）在 Ruby 中是什么意思？](https://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby)
> [RoR：“用户 ||= User.new”的含义](https://stackoverflow.com/questions/11958708/ror-meaning-of-user-user-new)

我看到它在[这个 Railscast](http://railscasts.com/episodes/241-simple-omniauth)中使用：

```
@current_user ||= User.find(session[:user_id]) if session[:user_id] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:29:12.830

在Ruby中，我们可以编写如下代码来操作自己。

```
x += 1
```

这同样意味着

```
x = x + 1
```

在初始化过程中，我们希望仅在变量为 nil 或不存在时才为其设置初始值。

例如，

```
一个 = 一个 || 初始值
```

首先，评估左侧条件。如果 a 被评估为 false，则评估正确的条件并为 a 分配 initial_value。

而且，我们可以重写

```
一个 = 一个 || 初始值
```

如下

```
一个 ||= 初始值
```

# c# - 如何确定一个 List 中的哪些项目不在另一个 List 中？

> ID：12024638
> 
> 赞同：0
> 
> 时间：2012-08-19T06:18:58.317
> 
> 标签：c#, list, visual-studio-2005, set

如果我有：

```
List<String> list1  AND  List<String> list2 
```

生成`List<String>`包含不在其中的项目`list1`的最佳方法是`list2`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:19:59.910

您可以使用 linQ 来完成，更多关于[这里除外](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

```
var res = list1.Except(list2); 
```

在没有 linQ 的情况下执行此操作

```
List<string> listExcept = new List<string>();
foreach(string list1Item in list1)
{
   if(!list2.Contains(list1Item))
      listExcept.Add(list1Item);
}   
//here listExcept will contain all the elements present in list1 and not present in list2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T06:48:34.793

如果你真的只有 .NET 2.0 的 BCL 和 C# 2 的语言特性，那么你就不能使用扩展方法、LINQ`HashSet<>`和类似的东西。你可能会说：

```
List<string> resultList = new List<string>();
foreach (string s in list1)
{
  if (!list2.Contains(s))
    resultList.Add(s);
} 
```

它不会表现得太好。如果这很重要，也许首先创建一个`Dictionary<,>`基于`list2`.

# linux - cabal-install 安装失败

> ID：12024639
> 
> 赞同：4
> 
> 时间：2012-08-19T06:19:16.920
> 
> 标签：linux, haskell, cabal, xmonad

我正在尝试安装 xmonad。因此，首先，我使用以下命令安装 ghc 编译器：

```
zypper ar http://download.opensuse.org/repositories/devel:/languages:/haskell/openSUSE_12.1/devel:languages:haskell.repo  
zypper in ghc 
```

之后，我尝试使用以下命令安装 cabal-install-0.14.0：

```
wget http://hackage.haskell.org/packages/archive/cabal-install/0.14.0/cabal-install-0.14.0.tar.gz
tar zxfv cabal-install-0.10.2.tar.gz
cd cabal-install-0.10.2
sh bootstrap.sh 
```

但是当我运行最后一个命令时，它得到了错误：

```
Setup: The program hsc2hs is required but it could not be found

Error during cabal-install bootstrap:
Building the network package failed. 
```

显然，我需要 hsc2hs 程序，并且可以在目录“/usr/lib/ghc-7.4.2/hsc2hs”中看到它，所以我在 PATH 中添加了这个目录。但它仍然不起作用。

有没有人可以给我一些建议？谢谢。

PS：我的操作系统是 openSUSE 12.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T20:23:18.400

一些想法：

1.  我相信有一个名为 haskell-platform 的 zypper 包。如果您安装它，它将`cabal-install`为您安装和配置以及其他一些工具。它可能会为您解决 hs2sc 问题。

2.  xmonad 有 zypper 包吗？如果是这样，我建议您使用它而不是尝试直接使用 cabal。

基本上有三种在 Linux 上安装 Haskell 的主要方法。

选项 1（推荐给大多数用户）：使用你的 linux 发行版的包管理器来安装东西，而不是直接使用 cabal 命令。如果您的发行版上还没有您想要的软件包，请申请。这种方法是最安全的，因为所有的依赖关系都已经为你整理好了。缺点是您通常不会拥有最新版本。您仍然可以将该`cabal`命令用于*您*开发的任何包。

选项 2：使用你的包管理器安装 ghc 和 haskell-platform，但之后使用 cabal 命令安装任何 haskell-y 的东西。您仍将使用包管理器来安装无法使用 cabal 安装的东西（例如，非 Haskell 的东西）。如果你这样做，你可以避免很多 cabal 地狱，永远不要以 root 身份运行 cabal（或者，配置 cabal-install 以以 root 身份安装*所有东西*），并且永远不要让你的包管理器做任何可以使用 cabal 完成的事情。这种方法的主要缺点是您可能必须自己处理一些库依赖项。

选项 3：手动安装 ghc（以及可选的 Haskell 平台），并使用 cabal-install（`cabal`命令）安装您需要的所有其他东西。如果你真的想保持在一切的前沿，并且你不介意手动安装东西，这是一个可行的选择。

# ruby-on-rails - 无法让客户端omniauth 和Facebook 在真实站点上工作

> ID：12024640
> 
> 赞同：0
> 
> 时间：2012-08-19T06:19:23.123
> 
> 标签：ruby-on-rails, facebook, heroku, omniauth

嘿，所以我似乎无法让 Facebook、OmniAuth、Rails 和 Heroku 一起玩。在本地一切正常。

**问题**

怎么了？当我点击登录时，它根本不做任何事情。在 Firebug 上，它在本地显示一个 Facebook Oauth 请求被触发，但在真实站点上没有发生这样的请求。相反，我在控制台中收到了消息`FB.login() called before FB.init()`。

当我更改 Facebook 上的 url 并尝试在本地登录时，我从 Facebook 收到一条错误消息，这意味着发生了请求。所以，我认为这个问题与证书有关。

这并没有解决它：[omniauth with facebook not working on production](https://stackoverflow.com/questions/5978184/omniauth-with-facebook-not-working-on-production)，虽然我不知道要输入什么权限。我不使用任何扩展的 fb 图表权限，它在本地工作而没有指定任何权限（参见下面的初始化程序）。

**我的设置**

在 Facebook 上的“选择您的应用程序如何与 Facebook 集成”下，我`Website with Facebook login`选择了“站点 URL”，我选择了工作`http://0.0.0.0:3000`或不工作`http://mysite.tld`。

这是我的 omniath.rb 初始化程序

```
OmniAuth.config.logger = Rails.logger

Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_SECRET'], { 
    client_options: { ssl: { 
        ca_file: '/usr/lib/ssl/certs/ca-certificates.crt',
        ca_path: "/etc/ssl/certs"
    }}
  }
end 
```

此外，我正在使用带有掩码的自定义域名，仅供参考，以防出现问题。同样，我不这么认为，因为我会得到一个错误屏幕而不是什么都没有，但以防万一。

谢谢，我真的很期待您提出的任何提示或故障排除！一旦我开始工作，我计划在博客上写一篇关于设置所有这些的教程，因为它是一场噩梦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:24:19.583

问题是我拼错了一个变量。代码很好...

感谢@Ashitaka 为我提供的双重帮助！

# c++ - 放置外部虚拟表

> ID：12024642
> 
> 赞同：5
> 
> 时间：2012-08-19T06:19:32.797
> 
> 标签：c++, visual-c++, gcc, compilation, vtable

来自[大型 C++ 软件设计](https://rads.stackoverflow.com/amzn/click/com/0201633620)(Lakos)，第 652 页：

> 问题是，“编译器会将给定类的虚拟表定义存放在哪个唯一的翻译单元中？”。CFRONT（和许多其他 C++ 实现）采用的技巧是将外部虚拟表放置在翻译单元中，该翻译单元定义了出现在类中的第一个词法上的非内联函数（如果存在的话）。

最常用的编译器（GCC 和 Visual C++）仍然是这种情况吗？还是曾经？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T10:27:36.517

GCC 碰巧记录了它的行为如问题中所述（[http://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html](http://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html)）：

> 虚拟表
> 
> C++ 虚函数在大多数编译器中使用查找表（称为 vtable）来实现。vtable 包含指向类提供的虚函数的指针，并且类的每个对象都包含指向其 vtable（或 vtable，在某些多重继承情况下）的指针。如果该类声明了任何非内联、非纯虚函数，则选择第一个作为该类的“关键方法”，并且 vtable 仅在定义关键方法的翻译单元中发出。
> 
> 注意：如果选择的键方法后来被定义为内联，则 vtable 仍将在定义它的每个翻译单元中发出。确保任何内联虚拟都在类主体中声明为内联，即使它们没有在那里定义。

然而，即使在多个目标文件中可能存在多个 vtable 的情况下（如果“关键方法”被证明是内联的，则可能发生这种情况），编译器会尽可能安排忽略重复项，但重复项可能会结束如果目标不支持 COMDAT，则在最终二进制文件中使用空格：

> 在 GNU/Linux 或 Solaris 2 等 ELF 系统或 Microsoft Windows 上与 GNU ld 版本 2.8 或更高版本一起使用时，这些结构的重复副本将在链接时被丢弃。这称为 COMDAT 支持。
> 
> 在不支持 COMDAT 但支持弱符号的目标上，GCC 将使用它们。这样一个副本将覆盖所有其他副本，但未使用的副本仍将占用可执行文件中的空间。
> 
> 对于不支持 COMDAT 或弱符号的目标，大多数具有模糊链接的实体将作为本地符号发出，以避免来自链接器的重复定义错误。然而，内联中的局部静态不会发生这种情况，因为拥有多个副本几乎肯定会破坏事情。

FWIW，GCC 似乎使用以`__ZTV`vtable 开头的符号。

就 MSVC 而言，VC++10 的一些经验测试（我不认为 MS 记录了这种行为）表明 VC 似乎并未尝试将 vtable 限制为单个目标文件。由于 Microsoft 知道它可以依赖支持 COMDAT 部分的链接器，并且构造函数是唯一直接使用 vtable 的函数（我相信所有其他 vtable 使用都是通过对象指针间接使用的），看起来 VC 只是放置了实例化构造函数的任何对象文件中的 vtable。对于使用编译器生成的 ctor 的类，它可以是构造该类型对象的任何地方。

# c - int *a[5] 是 5 个指针的数组还是指向大小为 5 的数组的指针？

> ID：12024645
> 
> 赞同：1
> 
> 时间：2012-08-19T06:19:54.810
> 
> 标签：c, arrays, pointers

```
int *a[5]; 
```

这是一个由 5 个指针组成的数组还是一个指向大小为 5 的数组的指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T06:23:56.787

为了将来参考，请使用[cdecl.org](http://cdecl.org/)。

输入`int *a[5]`，输出是...

> 将 a 声明为指向 int 的指针的数组 5

因此，`a`是一个 5 的数组`int *`。:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T06:24:00.690

它是一个由 5 个指针组成的数组`int`。

您可能会发现[左右规则](http://ieng9.ucsd.edu/~cs30x/rt_lt.rule.html)很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T06:24:21.547

那是一个指针数组。那是因为`int *`is 一个类型，不像大多数人得到的印象是 type is`int`和 name is `*a`。

# c - 将结构添加到C中的char数组

> ID：12024652
> 
> 赞同：2
> 
> 时间：2012-08-19T06:21:20.370
> 
> 标签：c, arrays, struct

我有一个 C 程序，它接收一个 64 字节的 char 数组（通过 USB 传递）。根据第一个字节（指示命令类型），我想在 char 数组上“强加”一个结构以使代码更清晰。

例如，如果命令代码是 10，我会期望类似：

```
struct
{
    uint8_t commandNumber;
    uint16_t xPos;
    uint16_t yPos;
    int32_t identificationNumber;
 } commandTen; 
```

因此，我想将我的 char packet[64] 'onto' commandTen 转换，然后使用以下内容访问字段：

```
localVar = commandTenPacket->xPos; 
```

如何在 C 中实现这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T07:40:46.310

首先，正如其他人所说，您必须确保您`struct`没有填充。你的编译器可能有一个扩展，`#pragma pack`或者这样。

`struct`为您的每个用例定义 a ，而不是您的示例中的变量。

然后定义一个`union`

```
typedef union overlay overlay;

union overlay {
 uint8_t raw[64];
 struct type10 command10;
 struct type42 command42;
}; 
```

现在创建该类型的缓冲区

```
overlay buffer; 
```

将“原始”部分提供给接收数据的函数：`getit(buffer.raw)`. 进而

```
switch (buffer.raw[0]) {
 case 10: {
   // use buffer.command10
   break;
 }
 case 42: {
   // use buffer.command42
 }
} 
```

C 标准保证了这一点可以正常工作，因为您将所有内容都阅读为`uint8_t`AKA `unsigned char`。事实上，`union`s 的主要用例就是这种“类型惩罚”。具有不同类型 IPv4、IPv6 等地址的整个网络层以类似的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T07:43:52.450

不要投。采用`memcpy`

```
char packet[64];
...

assert(sizeof commandTen <= sizeof packet);
memcpy(&commandTen, packet, sizeof commandTen); 
```

这假设大小和内存布局正确匹配（基于演员的解决方案将使用相同的假设）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T07:41:03.393

有一种使用指针的方法。让我试着这样解释：

```
struct commandX {
   int x;
};
struct commandMessage {
   char[8] msg;
};

char* message = (char*) malloc(sizeof(char)*9); // this will allow us a struct 
                                                // size of 8 bytes, since the
                                                // first byte will store the
                                                // information on how to inter-
                                                // the memory (or you do it in
                                                // a different way).
// 1\. determine your offset
//    in this case, it would be the length of the command on how to interpret.
//    basically, it has to be the count of bytes from the
//    beginning of your message to the start of your struct
int offset = sizeof(char) * 1;
// 2\. read the command (that would be: message[0])
// 3\. now get rid of the type information, so that you can address every byte
void* temp = (void*) message;
// 4.1 if it is commandX:
struct commandX *x_temp = (struct commandX*) (temp+offset);
    // use x_temp->x
// 4.2 if it is commandMessage:
struct commandMessage *msg_temp = (struct commandMessage*) (temp+offset)
   // use msg_temp->msg 
```

# jsp - JSP中是否有类似isset的功能？

> ID：12024655
> 
> 赞同：5
> 
> 时间：2012-08-19T06:21:35.533
> 
> 标签：jsp, variables, undefined

我想知道我们是否可以使用 JSP 的内置函数检查 JSP 中的所有变量`undefined`和变量？`null`

我知道我可以构建一个函数来做到这一点，但我需要一个懒惰的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T13:47:03.917

```
<c:if test="${name == null}">variable name is undefined</c:if> 
```

对于测试，您可以使用以下方法定义和取消定义变量：

```
<c:set var="name" value="Petra"/>
<c:set var="name" value="${null}"/> 
```

要声明您正在使用核心 JSTL 标记，请将其添加到页面顶部：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T14:07:26.427

在 JSP中**没有用于检查这一点的内置函数**，所以我想你必须制作一个，如果你接受`null`.

如果不是书呆子，那么`null`这是一个超载的术语，它可能意味着以下任何一种一般用法：

1.  实际上是`null`字符串，它可以抛出`NullPointerException`.
2.  `""`, 可能称为 null 的空字符串。
3.  `"null"`
4.  一个真正的`null`数组。:-)
5.  一个空数组。
6.  一个只有`null`对象的数组...

因此，您可以构建一种方法来包含这些或其他您可以想到的空检查或仅基本原始未修饰空检查的情况。

在Java中我想没有`undefined`变量这样的东西，因为它是一种[静态类型的语言](https://stackoverflow.com/a/2696369/468763)，编译器会捕获任何这些所谓的`undefined`错误:-)

在 PHP 中（因为我认为你从那里获取了这个函数）你有这些东西，因为它是一种脚本语言，而不是像 Java 这样的静态类型语言。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T11:51:40.340

您可以使用以下代码段，而不是检查`null`：

```
<c:if test="${not name}">variable name is undefined</c:if> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T04:54:25.400

用于检查变量是否发送或不使用以下功能

request.getParameterMap().containsKey("变量")

```
if(request.getParameterMap().containsKey("name"))
{
     out.print(request.getParameter("name"));
} 
```

# python - 同名应用程序时Django导入错误

> ID：12024656
> 
> 赞同：0
> 
> 时间：2012-08-19T06:21:39.617
> 
> 标签：python, django, import, importerror

我的 django 项目的结构是：

```
project
    book (an app)
        __init__.py
        views.py
        models.py
        urls.py
        ...
    api (an app)
        __init__.py
        problem.py
        book (another app for REST API)
            __init__.py
            views.py
            urls.py
            ... 
```

当我尝试在 api/problem.py 中“from book.models import *”时，django 说“ImportError: No module named models”。我认为这是因为它尝试导入不存在的“api/book/models.py”。如何从根文件夹导入模块？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:23:59.680

我的解决方案是清理项目结构，`api.book`而`book.api`不是这样。

例如，将您的项目结构为：

```
project
    book (an app)
        views.py
        models.py
        urls.py
        api (another app for REST API)
            views.py
            urls.py
            ...
        ...
    api (an app)
        __init__.py
        problem.py
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:08:43.090

如果你极度绝望，你可以试试这个。

```
from django.contrib.contenttypes.models import ContentType
model_ct = ContentType.objects.get(app_label="book", model="some_model_you_gonna_import")
target_model = model_ct.model_class() 
```

通过这样做，您可以获得您可能需要的课程。（使用 target_model 作为您要导入的模型）

顺便说一句，我试过这个。应该管用。:p

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T10:18:31.277

您可以尝试相对导入，参考[PEP 328](http://www.python.org/dev/peps/pep-0328/)

```
# in api.problem.py
from ..book.models import something 
```

不推荐这种风格，但如果重构包结构和名称很困难，它会有所帮助。

# c# - CookieContainer 混淆

> ID：12024657
> 
> 赞同：5
> 
> 时间：2012-08-19T06:21:51.637
> 
> 标签：c#, session, httpwebrequest, cookiecontainer

据我了解，CookieContainer通过HttpWebRequests持久化cookie的基本用法如下：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
CookieContainer cookies = new CookieContainer();
request.CookieContainer = cookies;
using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
  // Do stuff with response
} 
```

然后：

```
request = (HttpWebRequest)WebRequest.Create(new url);
request.CookieContainer = cookies;
etc... 
```

但我无法理解这个过程背后的逻辑。变量 cookies 在初始化后似乎没有在任何地方重新分配。第一个 WebResponse 中的 cookie 究竟是如何进入第二个 WebRequest 的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T06:39:49.720

这是因为当您从网站检索响应时，它会自动填充您用于请求的 cookie 容器。您可以通过查看响应前后存在哪些 cookie 来测试这一点：

```
//Build the request
Uri site = new Uri("http://www.google.com");
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(site);
CookieContainer cookies = new CookieContainer();
request.CookieContainer = cookies;

//Print out the number of cookies before the response (of course it will be blank)
Console.WriteLine(cookies.GetCookieHeader(site));

//Get the response and print out the cookies again
using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    Console.WriteLine(cookies.GetCookieHeader(site));
}

Console.ReadKey(); 
```

# java - 安卓的样式editText

> ID：12024662
> 
> 赞同：3
> 
> 时间：2012-08-19T06:22:56.957
> 
> 标签：java, android

我在手机上运行 Android 2.3 并注意到很多应用程序使用 ICS 编辑文本字段，例如 square up 和 tumblr。有谁知道他们是如何实现这一目标的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-19T07:53:39.607

您可以将自定义样式应用于您的编辑文本。

方法如下：
- 在您的 drawables 文件夹中创建一个 xml 文件 (edit_text_holo_dark.xml)
- 将此 xml 代码放入创建的文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_window_focused="false" android:state_enabled="true" android:drawable="@drawable/textfield_default_holo_dark" />
<item android:state_window_focused="false" android:state_enabled="false" android:drawable="@drawable/textfield_disabled_holo_dark" />
<item android:state_enabled="true" android:state_focused="true" android:drawable="@drawable/textfield_activated_holo_dark" />
<item android:state_enabled="true" android:state_activated="true" android:drawable="@drawable/textfield_focused_holo_dark" />
<item android:state_enabled="true" android:drawable="@drawable/textfield_default_holo_dark" />
<item android:state_focused="true" android:drawable="@drawable/textfield_disabled_focused_holo_dark" />
<item android:drawable="@drawable/textfield_disabled_holo_dark" />
</selector> 
```

*   将上述 xml 中提到的可绘制对象从平台文件夹（平台 android-15）复制到项目的可绘制文件夹。

*   在您的 values 文件夹中创建一个 styles.xml 文件并放置以下代码：

    ```
    <style name="EditTextHoloDark" parent="android:style/Widget.EditText">
        <item name="android:background">@drawable/edit_text_holo_dark</item>
        <item name="android:textColor">#ffffff</item>
    </style> 
    ```

*   最后在您的布局文件中，将 style 属性添加到 edittext：

    style="@style/EditTextHoloDark"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T06:34:18.303

[请阅读此内容可能对您有所帮助](https://github.com/ChristopheVersieux/HoloEverywhere) `//Dead`

上面的链接现在无效，[你可以看看这个](https://github.com/Prototik/HoloEverywhere)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T06:29:29.947

他们很可能已将新平台上的资源复制到他们的应用程序中。因此，您需要将与编辑文本相关的文件复制到您的应用程序中，并将这些文件应用到您的编辑框。做起来应该没那么难。

# javascript - 无法从 jquery 内部的外部文件调用特定内容

> ID：12024663
> 
> 赞同：0
> 
> 时间：2012-08-19T06:23:13.313
> 
> 标签：javascript, jquery, ajax, html

我无法在 DIV 容器中使用 jquery 加载位于外部 html 文件中的特定内容：/

请访问链接：[http](http://www.flyingcowproduction.com/123) ://www.flyingcowproduction.com/123 ，以便通过按主菜单的任何按钮更好地了解我遇到的问题。每个按钮都应该显示分配给它的内容，但是 load.php 文件中的全部内容都显示在容器中

有谁知道问题是什么？我还提供了菜单代码、javascript 和加载器页面的链接（查看源代码）。

菜单：

```
<ul id="menu">

        <li><a href="home" class="openContentLink"><img src="img/menu/logo.png" alt="Platinum Limo Services" /></a>
        <li><a id="services1" href="#Services" class="services openContentLink"></a></li>
        <li><a id="rates1" href="#Rates" class="rates openContentLink"></a></li>
        <li><a id="reservations1" href="#Reservations" class="reservations openContentLink"></a></li>
        <li><a id="fleet1" href="#Fleet" class="fleet openContentLink"></a></li>

</ul> 
```

JAVASCRIPT：

```
function loadPostUsingAjax(section) {
loading('on');

var loadStr = "load.php" + section;

$('#singleContentInside').load(loadStr, function(){

    loading('off');

    $("#services1").click(function() {
        loadPostUsingAjax("#services")
    });
    $("#services2").click(function() {
        loadPostUsingAjax("#services")
    });
    $("#rates1").click(function() {
        loadPostUsingAjax("#rates")
    });
    $("#rates2").click(function() {
        loadPostUsingAjax("#rates")
    });
    $("#reservations1").click(function() {
        loadPostUsingAjax("#reservations")
    });
    $("#reservations2").click(function() {
        loadPostUsingAjax("#reservations")
    });
    $("#fleet1").click(function() {
        loadPostUsingAjax("#fleets")        
    });
    $("#fleet2").click(function() {
        loadPostUsingAjax("#fleets")        
    });

}); 
```

}

装载机：

[http://www.flyingcowproduction.com/123/load.php](http://www.flyingcowproduction.com/123/load.php)

十亿提前感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:36:30.420

如果要加载特定内容，则需要加载整个页面，您需要在 url 之后放置一个选择器，但您需要在它们之间留一个空格，而您却缺少该空格`var loadStr = "load.php " + section;`。我会重新考虑在`.load()`回调中添加处理程序。

我也在控制台中看到

`Uncaught ReferenceError: showArea is not defined PageNavigation.js:312`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:20:15.147

您可以链接到同一页面的某个位置，如下所述：http: [//www.w3schools.com/html/tryit.asp?filename=tryhtml_link_locations](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_link_locations)

所以如果你有一些问题，你可以尝试这种方式。在同一页面提供链接并调用该点击或关联您的标签点击功能以触发它。

# android - ListFragment 中的自定义行元素在滚动后显示不正确

> ID：12024665
> 
> 赞同：1
> 
> 时间：2012-08-19T06:23:26.017
> 
> 标签：android, android-listview, android-listfragment

我有一个`ListFragment`包含`Earthquake`使用自定义填充的对象列表`ArrayAdapter`。每个元素要么被“突出显示”，要么取决于地震的震级是否高于某个值。问题是滚动后，“突出显示”的行颜色将应用于其他行。我怀疑这与`ListView`. 我怎样才能防止这种情况发生？

这是`getView`我的`EarthquakeArrayAdapter`课的方法：

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.row, parent, false);
    }

    Earthquake quake = mQuakes.get(position);
    if (quake != null) {
        TextView itemView = (TextView) convertView.findViewById(R.id.magnitude);
        if (itemView != null) {
            itemView.setText(quake.getFormattedMagnitude());
            if (quake.getRoundedMagnitude() >= mMinHighlight)
                itemView.setTextColor(Color.RED);
        }
    // Set other views in the layout, no problems here...
    }
    return convertView;
} 
```

这是我的`row.xml`布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
       android:id="@+id/magnitude"
       style="@style/ListFont.Magnitude" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/date"
            style="@style/ListFont.NonMagnitude"
            android:gravity="center_horizontal|top"
            android:textSize="18sp" />
        <TextView
            android:id="@+id/location"
            style="@style/ListFont.NonMagnitude"
            android:gravity="center_horizontal|bottom"
            android:textSize="14sp" />
    </LinearLayout>

</LinearLayout> 
```

我已经在小部件上观看了[这个](http://www.youtube.com/watch?v=wDBM6wVEO70)视频`ListView`，我正在考虑做亚当鲍威尔最后建议的事情 - 动态填充和扩展 a`LinearLayout`内部`ScrollView`并简单地使用它。我的数据目前介于 0 到 30 个项目之间（我尚未对此进行测试，因此不知道性能差异可能是什么）。但是，这些界限可能并不总是保持不变——所以如果可以的话，我想解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:30:55.717

如果通过突出显示您的意思是在幅度上设置颜色，`TextView`那么如果幅度不是所需的，您只需还原任何更改：

```
if (quake.getRoundedMagnitude() >= mMinHighlight) {
     itemView.setTextColor(Color.RED);
} else {
     itemView.setTextColor(/*the default color*/);
} 
```

# jquery - 如何解决此重叠悬停问题

> ID：12024666
> 
> 赞同：-1
> 
> 时间：2012-08-19T06:23:29.427
> 
> 标签：jquery

我需要设置一个悬停按钮，可以在悬停时显示弹出图像，并在悬停时删除弹出图像。我的问题是，当我悬停按钮时，弹出图像会弹出并覆盖按钮，因此即使光标仍在按钮上，它也会触发悬停事件并删除弹出图像。我该如何解决这个问题？

```
 $('.test').hover(function(){           
            imageId=$(this).next().attr('id');
            $('#div-' + imageId).show(150);
        },function (){
            $('#div-' + imageId).hide(150);
        }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:31:17.400

我想弹出图像并没有完全覆盖缩略图（或者这将是微不足道的：只需在弹出图像上触发 mouselave 事件）。然后这是气泡和菜单的常见问题。如果弹出窗口包含其他鼠标悬停敏感区域，您也会遇到类似的问题。

您可以在拇指和弹出窗口上注册 mouseleave 事件，并在收到事件时检查鼠标是否仍在目标上。

您可以使用此功能：

```
// event is an event (usually the mouseleave)
// o is a jquery object
bubbling.eventIsOver = function(event, o) {
    if ((!o) || o==null) return false;
    var pos = o.offset();
    var ex = event.pageX;
    var ey = event.pageY;
    if (
        ex>=pos.left
        && ex<=pos.left+o.width()
        && ey>=pos.top
        && ey<=pos.top+o.height()
    ) {
        return true;
    }
    return false;
}; 
```

如果它返回 true，则鼠标仍悬停在弹出图像或缩略图上，因此不应关闭弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T06:33:04.890

正如 Skarky672 在他的评论中所说，您可以设置`mouseleave`要调用`mouseleave`图像本身的函数的路线，因为您已经在此之前在变量中设置了图像 ID，所以这将非常简单。

你的代码看起来像这样。

```
//When hovering over the button the image pops up.
$('.test').bind('mouseenter',function(){           
            imageId=$(this).next().attr('id');
            $('#div-' + imageId).show(150);
        });
//When the mouse leaves that same image that came up, it closes the image.
$('#div-' + imageId).bind('mouseleave',function (){
            $(this).hide(150);
        }); 
```

或者，您可以简单地从按钮偏移弹出图像，这样按钮就不会被覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T06:37:32.310

我认为问题不在于您的 JavaScript，而在于您的 CSS。考虑在你的 CSS 中设置`padding`和`margin`确保它不会隐藏按钮。如果图像设置`overflow: hidden`为出现在某些元素（如`<div>`.

希望这可以帮助。

# java - 如何从类路径加载属性文件？

> ID：12024672
> 
> 赞同：49
> 
> 时间：2012-08-19T06:24:10.710
> 
> 标签：java

`getResourceAsStream()`是`java.lang.Class`类的方法。此方法在类路径中找到具有给定名称的资源。实际上这个方法委托给这个对象的类加载器。在此示例中，`PropUtil`对象的类加载器。但在委托之前，使用以下算法从给定的资源名称构造绝对资源名称。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-24T06:04:17.173

如果您使用静态方法并从类路径文件夹加载属性文件，那么您可以使用以下代码：

```
//load a properties file from class path, inside static method
Properties prop = new Properties();
prop.load(Classname.class.getClassLoader().getResourceAsStream("foo.properties")); 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-08-19T06:30:34.523

```
final Properties properties = new Properties();
try (final InputStream stream =
           this.getClass().getResourceAsStream("foo.properties")) {
    properties.load(stream);
    /* or properties.loadFromXML(...) */
} 
```

# ios - 获取CGPath总长度

> ID：12024674
> 
> 赞同：14
> 
> 时间：2012-08-19T06:24:45.857
> 
> 标签：ios, uibezierpath, cgpath

我有许多 UIBezierPath，我正在使用 CALyerAnimation @"StrokeStart" 和 @"strokeEnd" 制作动画。

我希望动画对所有路径都具有相同的速度，所以我想我可以使用路径的长度：

> 距离/时间=速度

有没有办法计算路径“长度”？

谢谢

沙尼

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T07:37:57.260

虽然您可以通过数值积分来计算贝塞尔路径的长度，但通过将路径划分为线性段可以更容易地完成。如果片段足够小，则近似误差应该可以忽略不计，尤其是您只是想对其进行动画处理。

我将向您展示四边形曲线的功能，但您也可以轻松地合并三次曲线的解决方案：

```
- (float) bezierCurveLengthFromStartPoint: (CGPoint) start toEndPoint: (CGPoint) end withControlPoint: (CGPoint) control
{
    const int kSubdivisions = 50;
    const float step = 1.0f/(float)kSubdivisions;

    float totalLength = 0.0f;
    CGPoint prevPoint = start;

    // starting from i = 1, since for i = 0 calulated point is equal to start point
    for (int i = 1; i <= kSubdivisions; i++)
    {
        float t = i*step;

        float x = (1.0 - t)*(1.0 - t)*start.x + 2.0*(1.0 - t)*t*control.x + t*t*end.x;
        float y = (1.0 - t)*(1.0 - t)*start.y + 2.0*(1.0 - t)*t*control.y + t*t*end.y;

        CGPoint diff = CGPointMake(x - prevPoint.x, y - prevPoint.y);

        totalLength += sqrtf(diff.x*diff.x + diff.y*diff.y); // Pythagorean

        prevPoint = CGPointMake(x, y);
    }

    return totalLength;
} 
```

**编辑**

如果您无权访问路径控制点（例如您使用弧创建路径），您始终可以使用`CGPathApply`以下函数访问底层贝塞尔曲线：

```
- (void) testPath
{
    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:CGPointZero];
    [path addQuadCurveToPoint:CGPointMake(1, 1) controlPoint:CGPointMake(-2, 2)];

    CGPathRef p = path.CGPath;

    CGPathApply(p, nil, pathFunction);
}

void pathFunction(void *info, const CGPathElement *element)
{
    if (element->type == kCGPathElementAddQuadCurveToPoint)
    {
        CGPoint p;
        p = element->points[0]; // control point
        NSLog(@"%lg %lg", p.x, p.y);

        p = element->points[1]; // end point
        NSLog(@"%lg %lg", p.x, p.y);
    }
    // check other cases as well!
} 
```

请注意，它不提供路径的起点，但您可以轻松跟踪它。

# opengl - glTexImage2D 无效的枚举数

> ID：12024682
> 
> 赞同：2
> 
> 时间：2012-08-19T06:26:14.307
> 
> 标签：opengl

任何想法为什么以下代码会导致`glGetError()`在加载 OpenGL 3.3 核心配置文件时返回 1280 或无效枚举？

```
GLuint texture = 0;
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D, texture);

glTexImage2D(GL_TEXTURE_2D, 0,
    GL_RGB,
    textureImage.Width(), textureImage.Height(), 0,
    GL_RGB, GL_UNSIGNED_BYTE,
    textureImage.Bytes()
); 
```

如果我不加载核心配置文件，它工作正常，实际上，如果我使用 AMD 的 gDebugger 查看纹理的内容，除了错误代码之外它似乎没有失败。纹理是 256 x 256 png，我使用 stb_image.c 加载到 ram 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:53:18.463

`glewInit()`实际上导致选择了核心配置文件的无效枚举。

# responsive-design - 响应式设计：浮动块

> ID：12024691
> 
> 赞同：0
> 
> 时间：2012-08-19T06:29:03.740
> 
> 标签：responsive-design, media-queries, dynamic-columns

我很好奇如何做我见过的特定效果......

[http://hype.co.uk](http://hype.co.uk)

这就是他们如何获得第三个较小的列（调整浏览器的大小，直到它弹出第三个细列）......这对我来说很有趣的原因是因为你会认为它在它自己的列 div 中但是当你缩小小块下降到 2 列，回流到主浮动 div 列表中。

所以我的问题......在一定大小下，它如何将较小的块元素拉到自己的列中？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T06:37:01.607

查看他们的 css（朝向底部），您会发现他们正在使用`media queries`. 这就是您“响应”用户更改浏览器宽度的方式。对于这样的事情，他们可能只是清除浮动元素或任何其他数量的东西。我建议你看看这个：[http ://www.html5rocks.com/en/mobile/responsivedesign/](http://www.html5rocks.com/en/mobile/responsivedesign/)

这是一个让您入门的基本示例。调整页面大小以查看正在更改的浮动 div：

CSS：

```
#pagewrap {
    padding: 5px;
    width: 960px;
    margin: 20px auto;
}

#content {
    width: 290px;
    float: left;
    padding: 5px 15px;
}

#middle {
    width: 294px;
    float: left;
    padding: 5px 15px;
    margin: 0px 5px 5px 5px;
}

#sidebar {
    width: 270px;
    padding: 5px 15px;
    float: left;
}

/* for 700px or less */
@media screen and (max-width: 600px) {

    #content {
        width: auto;
        float: none;
    }

    #middle {
        width: auto;
        float: none;
        margin-left: 0px;
    }

    #sidebar {
        width: auto;
        float: none;
    }

} 
```

HTML：

```
<div id="pagewrap">
<div id="content">
    CONTENT
</div>
<div id="middle">
    MIDDLE
</div>
<div id="sidebar">
    SIDEBAR
</div>
</div> 
```

# php - 如何使用数据库类或类似 MVC 模式连接到 PHP 中的多个数据库？

> ID：12024699
> 
> 赞同：-1
> 
> 时间：2012-08-19T06:30:49.473
> 
> 标签：php, mysql, cakephp, database-connection

我希望我的应用程序同时连接到多个数据库。这是我当前的数据库配置：

```
'database_config' => array(
'db1' =>array( 
    'host_name' => 'localhost',
    'username'  => 'root',
    'password'  => '',
    'dbname'    => 'database1',
    'dbprefix'  => '',
    'dbtype'    => 'mysql'

)
,'db2' => array(
    'host_name' => 'localhost',
    'username'  => 'root',
    'password'  => '',
    'dbname'    => 'test',
    'dbprefix'  => '',
    'dbtype'    => 'mysql'

)  
); 
```

现在我包含这个文件，如果多个数据库连接在配置文件中作为数组给出，我想连接数据库，否则连接到 db 配置文件中给出的第一个数据库。

我编写了自己的编码结构。与 codeigniter、cakephp 或 yii 框架样式相同，我想一次连接多个数据库，并希望访问配置文件中给出的同名数据库。

如果有多个配置，我尝试循环，但是在连接后如果我想访问数据库，那么它会显示错误，因为我想访问并从中选择数据的表仅在第一个数据库中可用，但在第二个数据库中不存在。所以如果有人用oops风格对此有更好的解决方案，请给我解决方案。这会很有帮助。

感谢和问候， Sanjay Dey

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:41:20.893

根据我在 codeigniter 的经验，我们使用此配置来定义数据库并连接到我们想要的每个数据库

```
$active_group = "forum";
$active_record = TRUE;

$db['forum']['hostname'] = "xxxxx";
$db['forum']['username'] = "xxxxx";
$db['forum']['password'] = "xxxxx";
$db['forum']['database'] = "xxxxx";
$db['forum']['dbdriver'] = "mysql";
$db['forum']['dbprefix'] = "";
$db['forum']['pconnect'] = TRUE;
$db['forum']['db_debug'] = TRUE;
$db['forum']['cache_on'] = FALSE;
$db['forum']['cachedir'] = "";
$db['forum']['char_set'] = "utf8";
$db['forum']['dbcollat'] = "utf8_general_ci";

/* TEST SITE */
$active_group = "default";
$active_record = TRUE;

$db['default']['hostname'] = "xxxxx";
$db['default']['username'] = "xxxxx";
$db['default']['password'] = "xxxxx";
$db['default']['database'] = "xxxxx";
$db['default']['dbdriver'] = "mysql";
$db['default']['dbprefix'] = "";
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = "";
$db['default']['char_set'] = "utf8";
$db['default']['dbcollat'] = "utf8_general_ci"; 
```

**您的活动数据库将是您最后定义的数据库。**

当我们需要它时

```
$this->db_forum = $this->CI->load->database('forum', TRUE); 
```

使用 $this->db 访问 dbase 1，使用 $this->db_forum 访问 dbase 2（或者任何你叫它的名字）。

# c - 为什么用gcc和std=c99编译时找不到getaddrinfo

> ID：12024703
> 
> 赞同：18
> 
> 时间：2012-08-19T06:31:08.887
> 
> 标签：c, gcc, posix

我有以下我试图编译的代码。当我尝试使用 std=c99 时，它失败并出现有关“struct addrinfo 类型的隐式声明”和“函数 getaddrinfo 的隐式声明”的警告。它适用于 std=gnu99。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>

int fails(const char *host, const char *port, struct addrinfo *hints)
{
        int rc;
        struct addrinfo *results;

        // can't find this function??
        rc = getaddrinfo(host, port, hints, &results);

        // free memory in this important application
        freeaddrinfo(results);

        return rc;
} 
```

我用来编译的命令是：

```
gcc -c -o fail.o -Wall -Werror -std=c99 -save-temps fail.c
gcc -c -o fail.o -Wall -Werror -std=gnu99 -save-temps fail.c 
```

查看 fail.i （预处理的标头），我发现编译器是正确的：这些类型尚未在拉入的标头中声明。

所以我去看了标题，注意到getaddrinfo被一个保护#ifdef __USE_POSIX包围，这显然是用c99编译时没有声明的。

我如何告诉 gcc 我想使用 c99 和 POSIX？如果我决定稍后切换编译器（例如 Clang 或 icc），我真的不想使用 gnu99。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-19T07:20:44.493

仅仅因为`getaddrinfo`（POSIX.1g 扩展）不是标准 c99 的一部分：

[http://www.schweikhardt.net/identifiers.html](http://www.schweikhardt.net/identifiers.html)

留在`-std=gnu99`或`-D_POSIX_C_SOURCE=200112L`

# c++ - 为什么 C++ 允许我将 const char 分配给 const char *？！

> ID：12024706
> 
> 赞同：71
> 
> 时间：2012-08-19T06:31:41.907
> 
> 标签：c++, implicit-conversion, type-safety

令我惊讶的是，它编译为：

```
const char* c_str()
{
    static const char nullchar = '\0';
    return nullchar;
} 
```

它在我的代码中引入了一个错误。谢天谢地，我抓住了它。

这是 C++ 故意的，还是编译器错误？主动忽略数据类型是否有原因？
它在 Visual C++ 2010 和[GCC](http://ideone.com/Crhv2)中工作，但我不明白为什么它应该工作，因为明显的数据类型不匹配。（`static`也没有必要。）

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-19T07:04:21.250

正如您所定义的，它`nullchar`是一个值为 0 的整数常量表达式。

C++03 标准将空指针常量定义为：“空指针常量是整数类型的整数常量表达式 (5.19) 右值，其计算结果为零。” 长话短说，你`nullchar`是一个空指针常量，这意味着它可以被隐式转换并分配给基本上任何指针。

请注意，所有这些元素都是隐式转换工作所必需的。例如，如果您使用了`'\1'`而不是`'\0'`，或者您*没有*指定`const`限定符 for `nullchar`，您将不会获得隐式转换——您的赋值将失败。

包含这种转换是有意的，但众所周知是不可取的。0 作为一个空指针常量是从 C 继承的。我很确定 Bjarne 和 C++ 标准委员会的其他大多数成员（以及一般 C++ 社区的大多数成员）都非常喜欢删除这个特定的隐式转换，但是这样做会破坏与许多 C 代码的兼容性（可能接近全部）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-19T07:02:47.480

这是一个古老的历史：它可以追溯到 C。

C中没有`null`关键字。C 中的空指针常量是：

*   一个值为 0 的整型常量表达式，例如`0`, `0L`, `'\0'`（记住这`char`是一个整型），`(2-4/2)`
*   这样的表达式转换为`void*`, like `(void*)0`, `(void*)0L`, `(void*)'\0'`,`(void*)(2-4/2)`

`NULL` **宏**（不是关键字！）扩展为这样的空指针常量。

在第一个 C++ 设计中，只允许整数常量表达式作为空指针常量。最近`std::nullptr_t`被添加到 C++ 中。

在 C++ 中，但不是在 C 中，`const`用整型常量表达式初始化的整型变量是整型常量表达式：

```
const int c = 3;
int i;

switch(i) {
case c: // valid C++
// but invalid C!
} 
```

所以`const char`用表达式初始化的`'\0'`是一个空指针常量：

```
int zero() { return 0; }

void foo() {
    const char k0 = '\0',
               k1 = 1,
               c = zero();
    int *pi;

    pi = k0; // OK (constant expression, value 0)
    pi = k1; // error (value 1)
    pi = c; // error (not a constant expression)
} 
```

你认为这不是健全的语言设计吗？

* * *

更新以包括 C99 标准的相关部分...根据 §6.6.6...

> 整数*常量表达式*应具有整数类型，并且只能具有整数常量、枚举常量、字符常量、**`sizeof`** 结果为整数常量的表达式和作为强制转换的直接操作数的浮点常量的操作数。整数常量表达式中的强制转换运算符只能将算术类型转换为整数类型，但作为运算**`sizeof`** 符操作数的一部分除外。

**对纯 C++ 程序员的一些说明：**

*   C 使用术语“常量”来表示 C++ 程序员所知道的“字面量”。
*   在 C++ 中，`sizeof`始终是编译时间常数；但是 C 有可变长度数组，所以`sizeof`有时*不是*编译时间常数。

然后，我们看到 §6.3.2.3.3 状态......

> 值为 0 的整数常量表达式，或转换为 type 的此类表达式 **`void *`**称为*空指针常量*。如果将空指针常量转换为指针类型，则生成的指针（称为*空指针*）保证与指向任何对象或函数的指针不相等。

* * *

要了解此功能的历史，请参阅[C99 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)中相同的镜像部分......

§6.6.6

> 整数*常量表达式*应具有整数类型，并且只能具有整数常量、枚举常量、字符常量、**`sizeof`**结果为整数常量的表达式和作为强制转换的直接操作数的浮点常量的操作数。整数常量表达式中的强制转换运算符只能将算术类型转换为整数类型，但作为运算**`sizeof`**符操作数的一部分除外。

§6.3.2.3.3

> 值为 0 的整数常量表达式，或转换为 type 的此类表达式 **`void *`**称为*空指针常量*。如果将空指针常量转换为指针类型，则生成的指针（称为*空指针*）保证与指向任何对象或函数的指针不相等。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-19T06:34:43.527

`nullchar`是一个（编译时）常量表达式，值为 0。因此，隐式转换为空指针是公平的游戏。

更详细地说：我在这里引用了[1996 年的标准草案](http://www.csci.csusb.edu/dick/c++std/cd2/index.html)。

`char`是一个整数类型。 `nullchar`是 const，所以它是一个（编译时）整数常量表达式，根据第 5.19.1 节：

> 5.19 常量表达式 [expr.const]
> 
> 1 在几个地方，C++ 需要计算为整数或枚举常量的表达式……一个整数常量表达式可能涉及……常量变量……

此外，`nullchar`根据第 4.10.1 节，计算结果为 0，允许将其隐式转换为指针：

> 4.10 指针转换 [conv.ptr]
> 
> 1 整数类型的整数常量表达式 ( *expr.const* ) 右值（称为空指针常量）可以转换为指针类型。

也许允许“为什么”这样做的一个直观原因（就在我的脑海中）是没有指定指针宽度，因此允许从任何大小的整数常量表达式转换为空指针。

* * *

更新了（较新的）C++03 标准的相关部分...根据 §5.19.1...

> 一个*整数常量表达式*只能包含字面量 (2.13)、枚举数、`const`变量或整数或枚举类型的静态数据成员，这些成员使用常量表达式 (8.5)、整数或枚举类型的非类型模板参数和`sizeof`表达式进行初始化。

然后，我们查看§4.10.1 ...

> *空指针常量*是整数类型的整数常量表达式 (5.19) 右值，其计算结果为零。空指针常量可以转换为指针类型；结果是该类型的*空指针*值，并且可以与指向对象的指针或指向函数类型的指针的所有其他值区分开来。相同类型的两个空指针值应比较相等。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-08-19T07:05:52.723

它编译的原因与编译的原因相同

```
const char *p = 0; // OK

const int i = 0;
double *q = i; // OK

const short s = 0;
long *r = s; // OK 
```

右边的表达式有 and 类型`int`，`short`而被初始化的对象是一个指针。这让你感到惊讶吗？

在 C++ 语言（以及 C）中，具有值的整型常量表达式 (ICE)`0`具有特殊状态（尽管 ICE 在 C 和 C++ 中的定义不同）。它们有资格作为*空指针常量*。当它们在指针上下文中使用时，它们被隐式转换为适当类型的空指针。

type`char`是一个整型，`int`和这个上下文没有太大区别，所以一个`const char`由 初始化的对象`0`在 C++ 中也是一个空指针常量（但在 C 中不是）。

BTW，`bool`C++ 中的 type 也是整数类型，这意味着`const bool`初始化的对象`false`也是空指针常量

```
const bool b = false;
float *t = b; // OK 
```

* * *

后来针对 C++11 的缺陷报告更改了空指针常量的定义。更正后，空指针常量只能是“值为零的整数文字或 std::nullptr_t 类型的纯右值”。上述指针初始化在更正后在 C++11 中不再是格式良好的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-19T07:09:40.950

它没有忽略数据类型。这不是一个错误。它利用了你放在那里的 const 并看到它的值实际上是一个整数 0 （char 是一个整数类型）。

整数 0 是一个有效的（根据定义）空指针常量，可以转换为指针类型（成为空指针）。

你想要空指针的原因是有一些指针值“指向无处”并且可以检查（即你可以将空指针与整数0进行比较，你会得到真实的回报）。

如果你去掉 const，你会得到一个错误。如果你把 double 放在那里（与许多其他非整数类型一样；我猜例外只是可以转换为 const char* [通过转换运算符的重载]的类型），你会得到一个错误（即使 w/o常量）。等等。

整个事情是，在这种情况下，您的实现看到您正在返回一个空 ptr 常量；您可以将其转换为指针类型。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-19T07:49:13.617

似乎这个问题的很多真正答案都在评论中结束了。总结一下：

*   C++ 标准允许`const`将整数类型的变量视为“整数常量表达式”。为什么？很可能绕过 C 只允许宏和枚举代替整型常量表达式的问题。

*   （至少）追溯到 C89，值为 0 的整型常量表达式可以隐式转换为（任何类型的）空指针。这在 C 代码中经常使用，其中`NULL`经常`#define`'d as `(void*)0`。

*   回到 K&R，文字值`0`已用于表示空指针。这个约定到处都在使用，代码如下：

    ```
    if ((ptr=malloc(...)) {...} else {/* error */} 
    ```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-19T06:38:29.593

有一个自动铸造。如果你很好地运行这个程序：

```
#include <stdio.h>
const char* c_str()
{
    static const char nullchar = '\0';
    return nullchar;
}

int main()
{
    printf("%d" , sizeof(c_str()));
    return 0;
} 
```

我的电脑上的输出是 4 -> 指针的大小。

编译器自动转换。注意，至少 gcc 会发出警告（我不知道 VS）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-19T06:40:34.430

我认为这可能是空字符在类型之间很常见的事实。您正在做的是在返回空字符时设置一个空指针。如果使用任何其他字符，这将失败，因为您没有将字符的地址传递给指针，而是将字符的值传递给指针。Null 是一个有效的指针和字符值，因此可以将空字符设置为指针。

简而言之，任何类型都可以使用 null 来设置空值，无论它是数组、指针还是变量。

# javascript - 保存当前用户的关系

> ID：12024711
> 
> 赞同：0
> 
> 时间：2012-08-19T06:32:19.870
> 
> 标签：javascript, backbone.js, parse-platform

设置关系后`Uncaught TypeError: Cannot set property 'success' of undefined`尝试获取。`Parse.User.current().save()`它在抱怨 - 有什么想法我可能在这里做错了吗？

```
1 flagRead: function() {
2   // Mark as READ
3   var user = Parse.User.current();
4   var relation = user.relation("read");
5   relation.add(this.model);
6   user.save();
7   console.log("Marked as read");
8 }, 
```

# r - MacVim 中的文件类型特定映射（使用 vundle）

> ID：12024719
> 
> 赞同：1
> 
> 时间：2012-08-19T06:33:29.213
> 
> 标签：r, vim

我希望在编辑文件 时映射`<D-1>`到。`<-``R`

我最初编辑`~/.vim/bundle/Vim-R-plugin/ftdetect/r.vim`并添加了：

```
inoremap <D-1> <space><-<space> 
```

但是，当我编辑所有类型的文件时它是可用的——我测试过`.py`和我的`.vimrc`.

为什么会出现这种情况？

为了解决这个问题，我补充说：

```
autocmd FileType r inoremap <D-1> <space><-<space> 
```

到我的`.vimrc`. 现在当我最初打开 mvim 时地图不存在，但是一旦我打开一个`*.r`文件，我的所有其他文件都存在该映射。

为了测试发生了什么，我补充说：

```
autocmd FileType python inoremap <D-1> <space>==<space> 
```

发现当我没有加载任何类型的文件时，`<D-1>`都没有映射；当我加载一个`*.r`文件时，这`<D-1>`给了我`<-`（根据需要）在`*.r`文件中，以及在*所有*其他文件中——当我下次打开一个`*.py`文件时，它在*所有*`<D-1>`文件中产生——包括在文件中。 `==`*`*.r`*

 *通过实验，我发现我最近打开的任何文件类型都会定义映射。当编辑多个文件类型时，这是不受欢迎的行为。

这个问题的*最佳实践*解决方案是什么？

我使用 MacVim 并使用 vundle 管理我的包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:16:32.763

正如 sylvain.joyeux 在他的回答中提到的那样，您应该使用 'ftplugin' 目录进行映射。但这不会解决映射问题。`<D-1>`映射可用于所有缓冲区的原因是您为所有缓冲区定义它（全局）。如果要将映射限制到某个特定缓冲区，则应使用命令`<buffer>`的特殊参数`:map`。所以你的映射命令应该是这样的：

```
inoremap <buffer> <D-1> <space><-<space> 
```

详情请参阅`:help :map-<buffer>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:47:57.350

ftdetect 目录用于保存注册文件自动检测命令的文件，即通常的形式

```
au BufNewFile,BufRead *.antlr setf antlr 
```

ftplugin 目录是您要查找的目录。但是，我不确定在此处添加 r.vim 是否不会覆盖任何全局可用的 R 插件（如果有，我不确定）*

# javascript - 在 jQuery Mobile 中加载 JXSGraph

> ID：12024720
> 
> 赞同：0
> 
> 时间：2012-08-19T06:33:39.027
> 
> 标签：javascript, jquery, mobile, jquery-mobile

我正在使用 JSXGraph (http://jsxgraph.uni-bayreuth.de/wp/) 使用 jQuery Mobile 在我的网站上绘制图表

我在处理 jQuery Mobile 的 AJAX 链接时遇到了一些麻烦，默认情况下，链接会自动作为 AJAX 链接执行，但这会导致 JSXGraph 出现一些问题，导致出现空框

我目前的解决方案是将 data-ajax="false" 添加到链接

```
<a href="page.html" data-ajax="false">Page</a> 
```

我正在使用以下代码进行绘图：

```
$('.type-interior').live('pageshow', function () {
    var b = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-5, 2, 5, -2], axis:true});
    var p1 = b.create('point',[-1,1], {name:'A',size:4});
    var p2 = b.create('point',[2,-1], {name:'B',size:4});
}); 
```

还有其他解决方案吗？喜欢在页面加载后完全禁用 AJAX 链接或重新加载 JSXGraph？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:33:00.910

如果你想在 jQuery mobile 中使用 JSXGraph，你需要注意以下几点：

*   将 pageshow 事件附加到页面 div（数据角色设置为“页面”的那个）。
*   使用 ajax 链接时，将 JSXGraph-JavaScript 包含在 div 中，并将 data-role 设置为“page”。
*   如果您不使用 ajax 链接，则可以将 JSXGraph JavaScript 放在页面上的任何位置，但您仍然需要使用 pageshow 事件来包含板初始化。这是由于 jQuery 移动 CSS 最初隐藏了导致所有子 div 的高度和宽度为 0 的所有页面。在页面显示之后，它是可见的，并且 JSXGraph 可以提取用于放置图形的正确 div 高度和宽度。

您可能会发现这段文档[http://jquerymobile.com/demos/1.0a2/#docs/pages/docs-navmodel.html](http://jquerymobile.com/demos/1.0a2/#docs/pages/docs-navmodel.html)对有关 jQuery mobile 导航模型的更多信息很感兴趣。

这个简约示例适用于 jQuery mobile 1.0.1：

```
<!-- main.html -->

<!-- head: include jquery, jquery mobile & jsxgraph -->
<!-- body -->
<div data-role="page" data-theme="c" id="main">
  <div data-role="content" id="maincontent">
    <a href="page.html" data-ajax="true">Test</a>
  </div>
</div>

<!-- page.html -->

<!-- head: include jquery, jquery mobile & jsxgraph in case of ajax=false -->
<!-- body -->
<div data-role="page" class="ctest" id="test">
  <div data-role="content" id="testcontent">
    <div id="jxgbox" class="jxgbox" style="width: 100px; height: 100px;"></div>
  </div>
  <script type="text/javascript">
    // or #test instead of .ctest
    $('.ctest').live('pageshow', function () {
      var b = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-5, 2, 5, -2]});
      var p1 = b.create('point',[-1,1], {name:'A',size:4});
      var p2 = b.create('point',[2,-1], {name:'B',size:4});
    });
  </script>
</div> 
```

# asp.net - DotNetOpenAuth new OpenIdRelyingParty().GetResponse() 为空？

> ID：12024721
> 
> 赞同：0
> 
> 时间：2012-08-19T06:34:14.080
> 
> 标签：asp.net, asp.net-mvc, openid, dotnetopenauth

我正在使用本教程： http: [//www.dotnetopenauth.net/developers/help/programmatic-openid-relying-party/](http://www.dotnetopenauth.net/developers/help/programmatic-openid-relying-party/)

我的 GetResponse() 调用总是返回 null，我还在 web.config 中将 localhost 添加到了我的白名单中。我觉得我做的一切都是正确的，并且无法在线找到解决方案。在调试时我查看 openid 对象。我有 2 个发现服务的计数..

我通过 JS 点击调用下面的方法。

```
[HttpPost]
        public void PingOpenID()
        {
            var openid = new OpenIdRelyingParty();
            IAuthenticationResponse response = openid.GetResponse();

            if (response != null)
            {
                switch (response.Status)
                {
                    case AuthenticationStatus.Authenticated:
                        FormsAuthentication.RedirectFromLoginPage(
                            response.ClaimedIdentifier, false);
                        break;
                    case AuthenticationStatus.Canceled:
                        ModelState.AddModelError("loginIdentifier",
                            "Login was cancelled at the provider");
                        break;
                    case AuthenticationStatus.Failed:
                        ModelState.AddModelError("loginIdentifier",
                            "Login failed using the provided OpenID identifier");
                        break;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:52:19.217

您的问题提到您从“JS 点击”调用此方法。这不是 OpenID 的工作方式。OpenID 响应消息来自*提供者*，通过重定向到*RP*，而不是浏览器上运行的某些 JS。 `GetResponse()`可能返回 null 因为您的 JS 正在向 RP 发送一个空的 POST 并且其中不包含 OpenID 有效负载。

请注意，在某些特殊情况下，浏览器上的 RP 的 javascript 确实将 OpenID 响应“转发”到 RP 服务器，但这是非常先进的，不太可能是您试图从您的问题听起来完成的事情。

# android - 没有可用的 AdMob 广告时显示自定义图片

> ID：12024727
> 
> 赞同：0
> 
> 时间：2012-08-19T06:36:10.663
> 
> 标签：android, admob, ads

当无法加载广告时，我无法在 AdMob 广告上显示图片。例如，当用户没有互联网连接时，就会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:36:10.663

我找到了我的问题的以下答案：

[http://googleadsdeveloper.blogspot.de/2012/06/show-custom-image-when-no-admob-ad-is.html](http://googleadsdeveloper.blogspot.de/2012/06/show-custom-image-when-no-admob-ad-is.html)

该链接基本上描述了如果广告无法加载以使用以下方法显示您自己的图像，您可以做出反应：

```
...

@Override
public void onFailedToReceiveAd(Ad ad, ErrorCode code)
{
    adView.setVisibility(View.GONE);
    customView.setVisibility(View.VISIBLE);

... 
```

我希望它对其他人有用。

# r - 在 R 中输出多个图（用于动画）

> ID：12024737
> 
> 赞同：3
> 
> 时间：2012-08-19T06:38:01.013
> 
> 标签：r, animation, plot, bayesian

为了帮助我理解贝叶斯更新，我一直在使用来自 bayesianbiologist 的[代码](http://bayesianbiologist.com/2011/09/10/visualizing-bayesian-updating/)。由于我必须学习如何创建动画情节，我认为创建更新的动画情节将是一个有趣的练习。事实证明，这比预期的要艰难。从[Rob Hyndman 的博客中](http://robjhyndman.com/researchtips/animations/)获取灵感，我尝试创建以下内容：

```
library(animation)
setwd("~/Dropbox/PriorUpdating") #set working directory

## Simulate Bayesian Binomial updating

sim_bayes<-function(p=0.5,N=10,y_lim=15,prior_a=1,prior_b=1)
{
   print(paste("The prior expectation of p is ",prior_a/(prior_a+prior_b)))
   success<-0
   curve(dbeta(x,prior_a,prior_b),xlim=c(0,1),ylim=c(0,y_lim),xlab='p',ylab='Posterior Density',lty=2)
   legend('topright',legend=c('Prior','Updated Posteriors','Final Posterior'),lty=c(2,1,1),col=c('black','black','red'))

  for(i in 1:N)
     {

        if(runif(1,0,1)<=p) success<-success+1 #this is where we see if there is a "success"

      curve(dbeta(x,success+prior_a,(i-success)+prior_b),add=TRUE) #plot updated
      }
curve(dbeta(x,success+prior_a,(i-success)+prior_b),add=TRUE,col='red',lwd=1.5) #plot final posterior
}

oopt = ani.options(interval = 0)
saveMovie(sim_bayes(p=0.6,N=90,prior_a=1,prior_b=1),interval=0.1,width=580,height=400)
ani.options(oopt) 
```

然而，这只产生了最终的情节。所以我想我会尝试输出绘图的所有 PDF。

```
library(animation)
setwd("~/Dropbox/PriorUpdating") #set working directory

## Simulate Bayesian Binomial updating

sim_bayes<-function(p=0.5,N=10,y_lim=15,prior_a=1,prior_b=1)
{
  print(paste("The prior expectation of p is ",prior_a/(prior_a+prior_b)))
  success<-0

  curve(dbeta(x,prior_a,prior_b),xlim=c(0,1),ylim=c(0,y_lim),xlab='p',ylab='Posterior Density',lty=2)
  legend('topright',legend=c('Prior','Updated Posteriors','Final Posterior'),lty=c(2,1,1),col=c('black','black','red'))

  for(i in 1:N)
  {
    pdf(paste("posterior",i,".pdf",sep=""),height=4,width=6.5)

    if(runif(1,0,1)<=p) success<-success+1 #this is where we see if there is a "success"

    curve(dbeta(x,success+prior_a,(i-success)+prior_b),add=TRUE) #plot updated

    #print(paste(success,"successes and ",i-success," failures"))
    dev.off()
  }
  pdf(paste("posterior_final",".pdf",sep=""),height=4,width=6.5)
  curve(dbeta(x,success+prior_a,(i-success)+prior_b),add=TRUE,col='red',lwd=1.5) #plot final posterior
  dev.off()
} 
```

但是，这给了我以下错误

```
Error in plot.xy(xy.coords(x, y), type = type, ...) : 
  plot.new has not been called yet 
```

我尝试在某些点插入 plot.new() ，但我认为这与图的附加性质相冲突。

有没有人知道如何使这些方法中的一种或两种正常工作？虽然这对我来说是一个玩具示例，但我需要绘制一些更有趣的动画，其中了解如何为情节设置动画将是有用/必要的。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:37:23.737

就像 MatthewK 说的，你打错了电话`pdf`。但是，这应该可以让您启动并运行：

```
sim_bayes <- function(p=0.5, N=10, y_lim=15, prior_a=1, prior_b=1) {
    success <- 0
    for (i in 1:N) {
        pdf(paste("posterior",i,".pdf",sep=""), height=4, width=6.5)

        if (runif(1,0,1) <= p)
            success<-success + 1

        # Start a new plot.
        curve(dbeta(x,prior_a,prior_b), lty=2,
              xlim=c(0,1), ylim=c(0,y_lim), xlab='p', ylab='Posterior Density')
        # Update plot.
        curve(dbeta(x,success+prior_a, (i-success) + prior_b), add=TRUE)

        legend('topright',
               legend=c('Prior','Updated Posteriors','Final Posterior'),
               lty=c(2,1,1), col=c('black','black','red'))

        dev.off()
    }
}

# `x` had no visible binding in your implementation, so I took the following
# from the `dbeta` documentation example.
x <- seq(0, 1, length=21)
sim_bayes() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T08:44:05.280

你只在这里制作一个情节。如果你使用`add=TRUE`你添加到当前的情节，而不是制作一个新的情节。因此删除应该有效：

```
sim_bayes<-function(p=0.5,N=10,y_lim=15,prior_a=1,prior_b=1)
{
   print(paste("The prior expectation of p is ",prior_a/(prior_a+prior_b)))
   success<-0
   curve(dbeta(x,prior_a,prior_b),xlim=c(0,1),ylim=c(0,y_lim),xlab='p',ylab='Posterior Density',lty=2)
   legend('topright',legend=c('Prior','Updated Posteriors','Final Posterior'),lty=c(2,1,1),col=c('black','black','red'))

  for(i in 1:N)
     {

        if(runif(1,0,1)<=p) success<-success+1 #this is where we see if there is a "success"

      curve(dbeta(x,success+prior_a,(i-success)+prior_b)) #plot updated
      }
curve(dbeta(x,success+prior_a,(i-success)+prior_b),col='red',lwd=1.5) #plot final posterior
} 
```

测试：

```
sim_bayes(p=0.6,N=90,prior_a=1,prior_b=1) 
```

给出多个图

# assembly - 在 MIPS 汇编中，“addi”可以对协处理器寄存器进行操作吗？

> ID：12024739
> 
> 赞同：1
> 
> 时间：2012-08-19T06:38:16.257
> 
> 标签：assembly, mips, machine-code

首先，我是一个学习汇编/机器代码的初学者，所以如果我问的很明显，请原谅我。

我正在阅读一些代码并遇到了一个代码片段，其中代码将“1.0”放入浮点协处理器寄存器中。

代码是

```
addi       $t5, $0, 1
mtc1       $t5, $f2
cvt.s.w    $f0, $f2       # 1.0 in $f0 
```

我的第一个问题是：

为什么必须先将“1”放入“$t5”，然后再将其传输到协处理器？做起来不是更容易吗

```
addi       $f2, $0, 1 
```

甚至

```
addi       $f2, $0, 1.0 
```

我的第二个问题是：

对于这行代码

```
 cvt.s.w    $f0, $f2       # 1.0 in $f0 
```

两个寄存器有必要不同吗？或者它们都可以是 $f2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:13:08.370

指令对其规范中列出的寄存器类型进行操作，如果您想知道阅读它。

```
格式：ADDI rt、rs、立即 MIPS32
目的：
将常量添加到 32 位整数。如果发生溢出，则陷阱。
说明： rt ← rs + 立即数
将 16 位有符号立即数添加到 GPR rs 中的 32 位值以产生 32 位结果。
• 如果加法导致 32 位 2 的补码算术溢出，则目标寄存器不会被修改并且
发生整数溢出异常。
• 如果加法没有溢出，则将 32 位结果放入 GPR rt。
限制：
没有任何
手术：
temp ← (GPR[rs]31||GPR[rs]31..0) + sign_extend(立即)
如果 temp32 ¹ temp31 那么
信号异常（整数溢出）
别的
GPR[rt] ← 温度
万一
例外：
整数溢出
编程笔记：
ADDIU 执行相同的算术运算，但不捕获溢出。
```

所以 no`addi`不能对协处理器寄存器进行操作

```
格式：CVT.SD fd、fs MIPS32
CVT.SW fd, fs MIPS32
CVT.SL fd, fs MIPS64
MIPS32 第 2 版
目的：
将 FP 或定点值转换为单个 FP
说明： fd ← convert_and_round(fs)
FPR fs 中的值，格式为 fmt，被转换为单浮点格式的值，并根据
FCSR 中的当前舍入模式。结果放在 FPR fd 中。
限制：
字段 fs 和 fd 必须指定有效的 FPR——fs 用于类型 fmt，fd 用于单浮点。如果它们无效，则
结果是不可预测的。
操作数必须是格式为 fmt 的值；如果不是，则结果为 UNPREDICTABLE 并且操作数的值
FPR 变得不可预测。
对于 CVT.SL，如果处理器在 16 个 FP 寄存器中执行，则该指令的结果是 UNPREDICTABLE
模式。
手术：
StoreFPR(fd, S, ConvertFmt(ValueFPR(fs, fmt), fmt, S))
例外：
协处理器不可用，保留指令
浮点异常：
无效操作、未实现的操作、不精确、上溢、下溢
```

它并不是说 fd 和 fs 必须不同，所以除非关于源和目标寄存器的其他规则不能相同，否则您可以使用一个。

# java - Android获取在EditText中输入的文本

> ID：12024741
> 
> 赞同：0
> 
> 时间：2012-08-19T06:38:48.513
> 
> 标签：java, android, android-edittext

我有一个editText，如何获取用户输入的文本？

例如，这是我的editText

```
<EditText
   android:id="@+id/editText3"
   android:layout_width="match_parent"
   android:layout_height="wrap_content" 
   android:maxLength="10">
</EditText> 
```

并且用户在我的下一个活动中输入了嗨，如果用户在下一个活动中输入了嗨，我该怎么做 Hello.. 等如果用户输入了你的下一个活动，它显示我很好？

我用什么？它与数据库有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T06:44:34.493

首先，选取当前活动中的文本，即视图承载`EditText`组件的活动。

```
EditText txt = (EditText)findViewById(R.id.editText3);
String input = txt.getText().toString(); 
```

现在，将其添加为额外数据并调用您的新活动。

```
Intent i = new Intent(getApplicationContext(), NewActivity.class);
i.putExtra("input",input);
startActivity(i); 
```

在`NewActivity`里面`onCreate()`：

```
Intent i = getIntent();
String input = i.getStringExtra("input"); 
```

而且，瞧，您在新活动中输入了文本。

要将其设置为新的`TextView`：

```
TextView txtView = (TextView)findViewById(R.id.yourTextView);
txtView.setText(input); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T06:46:40.543

最简单的方法是使用`Intent`'s`getExtra()`和`putExtra()`方法，进行简单`String`比较并返回结果。

这里有一些可以帮助您入门的内容：[如何从 Android 上的意图中获取额外数据？](https://stackoverflow.com/questions/4233873/how-to-get-extra-data-from-intent-in-android)以及[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java).

但是从您所写的内容来看，您似乎正在尝试制作一个聊天应用程序，其中您的应用程序响应用户输入的消息。为此，我建议您使用[AIML](http://en.wikipedia.org/wiki/AIML)。这是一个很长的镜头，但值得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T08:11:03.713

假设您的班级名称是：`Main`

首先声明一个静态公共字符串：

```
public static String myText; 
```

现在，在您的 OnCreate 方法类型中：

```
EditText et = (EditText) findViewById(R.id.editText3); 
```

最后，在您的 OnClick 方法类型中：

```
myText = getText().toString();
Intent x = new Intent(getApplicationContext(), NewActivity.class);
startActivity(x); 
```

现在，在您的下一个活动中，您只能使用以下方式访问字符串：

```
Main.myText 
```

举个例子：

```
TextView txt =(TextView) findViewById(R.id.textviewid);
txt.setText(Main.myText); 
```

# jquery-mobile - 只有第一次尝试动态创建对话框有效，所有以下尝试只是重复相同的结果

> ID：12024746
> 
> 赞同：0
> 
> 时间：2012-08-19T06:39:30.127
> 
> 标签：jquery-mobile

我有一个总是可以很好地动态创建页面的函数。但是，如果我添加，它就会出现问题

```
`data-rel="dialog"` 
```

到目标 URL。症状是我第一次可以成功生成动态对话框，而我以下生成不同对话框的尝试不再起作用，并且会重复以显示第一次对话框。在调查中，我发现

```
`$page.children(":jqmData(role=content)")` 
```

从第二次开始返回 null。有谁知道为什么以及如何解决？

请参阅此处的示例，[http://jsfiddle.net/RtYuP/10/](http://jsfiddle.net/RtYuP/10/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:32:11.860

该问题已通过更改解决

```
$page.children(":jqmData(role=content)") 
```

至

```
$page.find(":jqmData(role=content)") 
```

因为对话框增强后，内容容器不再是原始 div 的直接子级。

# c#-4.0 - 输入不是有效的 Base-64 字符串，因为它包含非 base 64 字符

> ID：12024747
> 
> 赞同：1
> 
> 时间：2012-08-19T06:39:38.827
> 
> 标签：c#-4.0

自过去 2-3 天以来，我一直在努力寻找以下异常的解决方案：

```
The input is not a valid Base-64 string as it contains a non-base 64 character,
more than two padding characters, or a non-white space character among the
padding characters. 
```

我搜索了类似的问题并找到了答案，但没有一个对我有用。这是我要转换的数据：

```
{\"Package\":[{\"Faq\":[{\"FaqId\":1,\"AppId\":65,\"Title\":\"Test1\",
 \"Description\":\"Test1\",\"IsRemoved\":false,\"AddDate\":1344969000,
 \"LastUpdated\":1344969000},{\"FaqId\":2,\"AppId\":65,\"Title\":\"Test2\",
 \"Description\":\"Test2\",\"IsRemoved\":false,\"AddDate\":1344969000,
 \"LastUpdated\":1344969000}]}\r\n]}\r\n" 
```

现在我无法识别哪些是非基数 64 字符。如果有哪些是那些？以及如何删除它们？

我用来解析字符串的 c# 代码行：

```
data.Data = Convert.FromBase64String(data.Data.ToString()); 
```

`data.Data`包含上述数据。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T06:42:59.350

你正在尝试错误的方式。FromBase64String 转换 FROM Base64（即采用 Base64 编码的字符串并将其转换为原始字符串），而不是 TO Base64（采用普通字符串并转换为 base64 编码）。由于您提供该方法的字符串不是 base64 编码的，因此它退出了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:31:49.033

```
data.Data = Convert.FromBase64String(data.Data.ToString());
// NOTE: The packager has some different behavior because it GZIPs the output.
// service cleanup, logging, and outgoing response. NOTE: the ORDER of this is important.
WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.OK;
WebOperationContext.Current.OutgoingResponse.Headers.Add("Content-Encoding", "gzip");
WebOperationContext.Current.OutgoingResponse.ContentType = "application/json";
WebOperationContext.Current.OutgoingResponse.Headers.Add("Content-Disposition", "attachment; filename=package.json");

ThreadPool.QueueUserWorkItem(delegate
{
    man.Save("Package served.");
});

return new MemoryStream((byte[])data.Data); 
```

这是我的代码。现在，如果删除 base64 转换并反序列化 json，则它无法保存 json 文件。它会抛出无法保存json文件，无法读取源代码的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T06:52:06.350

如果 "{\"Package\":[{\"Faq\":[{\"FaqId\":1,\"AppId\":65,\"Title\":\"Test1\",\"Description \":\"Test1\",\"IsRemoved\":false,\"AddDate\":1344969000,\"LastUpdated\":1344969000},{\"FaqId\":2,\"AppId\":65 ,\"Title\":\"Test2\",\"Description\":\"Test2\",\"IsRemoved\":false,\"AddDate\":1344969000,\"LastUpdated\":1344969000}] }\r\n]}\r\n" 是您要转换的字符串，那么它实际上不是基于 64 位的有效输入。您可以在此处创建转换版本[http://base64converter.com/](http://base64converter.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T15:28:48.503

您在这里拥有的是 JSON，而不是 BASE64。使用 JSON 反序列化器，例如[JSON.NET](http://json.net/)。

# javascript - IE 未将表单提交到新的弹出窗口

> ID：12024752
> 
> 赞同：0
> 
> 时间：2012-08-19T06:41:31.223
> 
> 标签：javascript, forms, internet-explorer

我有一个带有 iframe 的页面。

iframe 包含一个 gridex 网格，用于侦听双击事件。

双击时会发生这种情况：

```
function OpenOrderInfo(grid, x, y)
{   

    if(window.event != null)
    {
        var r = window.event.srcElement;
        while(r != null && r.tagName != "TR")
            r = r.parentElement;

       if(r == null || r.className == "")
        {   
            return;
        }
    }
    if(grid != null)
    {
        var row = grid.getSelectedItems().getSelectedItemInIndex(0).getRow();
        if(row != null && row.getRowType() == "Record")
        {
            document.getElementById('hdnSelectedIndex').value = row.getPosition();
            var UID =row.getCellByColumnKey("UID").getValue();
            var OrderNum = row.getCellByColumnKey("PurchaseOrderNumber").getValue();
            var CustomerID = row.getCellByColumnKey("CustomerSiteID").getValue();
            var ReadFlag = row.getCellByColumnKey("ReadFlag").originalImage;
            var VendorID = row.getCellByColumnKey("VendorSiteID").getValue();
            var IsHistoricalPO = row.getCellByColumnKey("IsHistoricalPO").getValue();

            var randNum = new Date().getTime();
            window.open('', 'OrderInfoWin' + randNum, 'channelmode=no,directories=yes,fullscreen=no,height=670,location=no,menubar=no,resizable=yes,width=860,scrollbars=yes,status=yes,titlebar=no,top=5');

            var myform = document.createElement('form');
            myform.action = "OrderInfo.aspx";
            myform.method = "post";
            myform.target = "OrderInfoWin" + randNum;
            myform.style.display = "none";

            var myinp1 = document.createElement('input');
            myinp1.id="myinp1";
            myinp1.name="UID"; 
            myinp1.type="hidden";
            myinp1.value="";

            var myinp2 = document.createElement('input');
            myinp2.id="myinp2";
            myinp2.name="OrderNum"; 
            myinp2.type="hidden";
            myinp2.value="";

            var myinp3 = document.createElement('input');
            myinp3.id="myinp3";
            myinp3.name="CustomerID"; 
            myinp3.type="hidden";
            myinp3.value="";

            var myinp4 = document.createElement('input');
            myinp4.id="myinp4";
            myinp4.name="ReadFlag"; 
            myinp4.type="hidden";
            myinp4.value="";

            var myinp5 = document.createElement('input');
            myinp5.id="myinp5";
            myinp5.name="VendorID"; 
            myinp5.type="hidden";
            myinp5.value="";

            var myinp6 = document.createElement('input');
            myinp6.id = "myinp6";
            myinp6.name = "IsHistoricalPO";
            myinp6.type = "hidden";
            myinp6.value = "";

            myform.appendChild(myinp1);
            myform.appendChild(myinp2);
            myform.appendChild(myinp3);
            myform.appendChild(myinp4);
            myform.appendChild(myinp5);
            myform.appendChild(myinp6);

            document.body.appendChild(myform); 
            document.getElementById('myinp1').value=UID;
            document.getElementById('myinp2').value= OrderNum;
            document.getElementById('myinp3').value=CustomerID;
            document.getElementById('myinp4').value=ReadFlag;
            document.getElementById('myinp5').value=VendorID;
            document.getElementById('myinp6').value = IsHistoricalPO;

            myform.submit();
            document.body.removeChild(myform);        
        }
    }          
} 
```

此方法打开一个弹出窗口并将表单提交到其中。

应出现订单信息。

由于某些未知原因，我有时会收到此页面：

![在此处输入图像描述](../Images/e6e237c29b662c80fe60f63d932ae462.png)

依次转到此页面：

![在此处输入图像描述](../Images/990f3998ea00afc55bfe3c96d9de898e.png)

我已经调试了该方法，似乎我正在提交部分，但之后没有任何反应。

我已经使用提琴手尝试查看是否正在发出请求，并且似乎没有请求离开浏览器。

该过程正在创建一个临时表单，将其目标设置为一个新的弹出窗口并提交它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:05:08.267

据我记得正确，Internet Explorer 需要将表单附加到文档（DOM 的一部分）才能提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:31:27.700

我发现了我的问题，我在页面后台进行了另一个进程，该进程使用 ajax 报告站点用户的分析数据。

由于某种原因，此过程导致浏览器在几次打开和关闭窗口后卡住，一定是有未处理的 ajax 请求问题。

禁用它后，我再也没有看到这个问题。

谢谢

# android - 教程1上的Opencv Android Eclipse速度比教程2差，为什么？？？？？？/

> ID：12024753
> 
> 赞同：0
> 
> 时间：2012-08-19T06:41:42.230
> 
> 标签：android, eclipse, performance, opencv

我将非常感谢帮助我理解为什么在为 android 执行 opencv 教程 2 时相机的响应速度似乎要好得多，然后为 opencv 教程 1 执行。我已经在 eclipse 中设置了 opencv 环境，并在摩托罗拉平板电脑上发布了教程。

我在 Eclipse 中开发了自己的 android 应用程序，我发现捕获/显示图像的速度似乎比执行 tutorial2 时看到的要慢得多。我还注意到教程 1 和我的应用程序一样慢，并且执行速度比教程 2 慢得多

我在教程 2 代码中包含了我自己的应用程序代码，速度非常好。我重命名了教程 2，应用程序仍然很快我重命名了包，速度下降到我原来的 android 应用程序中的速度。有谁知道为什么？谢谢你看这个。这些教程包含在 opencv.2.4.2-android-sdk.zip 中的示例中。我正在使用[http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html文档中提到的 opencv 准备使用 android 库](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:40:09.610

看起来教程 0 和 1 是针对模拟器的，这可能意味着他们正在使用不同的相机实现。

```
Running OpenCV Samples
"Also I want to note that only Tutorial 0 - Android Camera and Tutorial 1 - Add OpenCV samples are
able to run on Emulator from the Android SDK. Other samples are using OpenCV Native Camera which
does not work with emulator." 
```

恐怕我还没有自己运行教程，所以没有太大帮助。

# python - Windows 上的 Django 错误“no module named follow”，这是什么原因造成的？

> ID：12024756
> 
> 赞同：1
> 
> 时间：2012-08-19T06:43:33.140
> 
> 标签：python, django, windows, python-imaging-library, windows-7-x64

我正在尝试使用 Win7x64 和 python 2.7 和 Django 1.4/1.3 运行一个朋友发给我的项目

我的朋友有类似的设置，所以它应该可以工作，但它没有。起初我以为是因为我使用的是 1.4 而不是像他那样使用 1.3，但不是同样的奇怪错误

“错误：没有名为跟随的模块”零结果在谷歌......

是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:52:53.553

您的项目是否使用[django-follow 之](https://github.com/caffeinehit/django-follow)类的东西？

签`INSTALLED_APPS`入`settings.py`并获取`urls.py`表明这一点的提示。让您的朋友`pip freeze`在他们的项目文件夹中执行 a 并将输出发送给您，或者`requirements.txt`从输出中生成一个`pip freeze`将显示所有项目依赖项的输出。

如果`django-follow`是唯一缺少的东西，那么您可以使用`pip install django-follow`. 否则，您还应该安装其他依赖项。

# ssis - 如何在 FTP 和远程服务器之间传输文件夹？SSIS

> ID：12024758
> 
> 赞同：0
> 
> 时间：2012-08-19T06:43:39.787
> 
> 标签：ssis

我想从 FTP 获取一个 zip 文件夹，并将其放入 ip ...110 的服务器中进行处理。另一方面，该软件包位于带有 ip 的服务器上。. .210 我应该如何进行这些转移。现在我只是给 Zip 文件夹，然后把它放在我的本地计算机上，并处理文件。

程序必须在服务器 210 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:41:48.900

您可以使用 a`file system task`来传输文件。在目标服务器 (210) 上设置网络驱动器，以访问源服务器 (110) 上的 zip 文件。然后你可以在`file system task`as中使用它`source connection`。

最后，您可以在处理 zip 文件之前使用此包，作为处理作业的一个步骤，或设置自己的作业。

# iphone - 使用 Facebook 进行身份验证后关闭模式 UIView

> ID：12024759
> 
> 赞同：1
> 
> 时间：2012-08-19T06:44:16.927
> 
> 标签：iphone, ios, facebook

我的应用程序显示了一个带有按钮的模态 UIView，以允许用户通过 Facebook 进行身份验证。在用户切换到 Facebook 应用程序，通过身份验证，然后被发送回我的应用程序后，我希望这个模式视图自动关闭。

如何告诉用户已成功通过身份验证，然后关闭控制器？

我猜我应该对通知中心做点什么，但我不确定是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:49:10.573

在你`appDelegate`这样做：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [[yourViewController facebook] handleOpenURL:url];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:18:20.560

在应用程序委托的这种方法中使用通知中心后，我终于得到了这个。当我们得到一个有效的会话时，它会向模态视图发送一个通知，告诉它关闭。

```
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // We have a valid session
                NSLog(@"User session found");
                NSDictionary *extraInfo = [NSDictionary dictionaryWithObject:@"FBLoginStatus" forKey:@"FBLogin"];
                NSNotification *note = [NSNotification notificationWithName:@"FBLoginNote" object:self userInfo:extraInfo];
                [[NSNotificationCenter defaultCenter] postNotification:note];
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
        break;
        default:
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T06:53:12.400

假设您的意思是您正在呈现一个模态`UIViewController`，它可以通过以下方式被解雇。

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

[UIViewController 类参考](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T06:57:21.953

假设您使用的是最后一个 Facebook SDK，您需要做的就是在操作成功完成后实现解除。这是通过将代码放在“`-(void)fbDidLogin`委托方法中来完成的。

# xml - 如何使用 xslt 将命名空间 xmlns:xyz 添加到 xml 文档？

> ID：12024763
> 
> 赞同：1
> 
> 时间：2012-08-19T06:45:43.043
> 
> 标签：xml, xslt

我有一些 XML：

```
<Root>
 <Name>Eding</Name>
 <Roll>15</Roll>
 <xyz:Address>25, Brigton,SA</xyz:Address>
</Root> 
```

此 xml 无效，因为`xyz`未定义命名空间。所以，我想使用 xslt 在根目录中添加命名空间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:49:12.940

XSLT 只会将命名空间格式良好的 XML 作为输入。因此，如果您的输入不是名称空间格式正确的，则无法使用 XSLT 解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T23:46:19.517

解决此问题的一种方法是使用[外部（已解析）通用实体](http://www.w3.org/TR/REC-xml/#sec-external-ent)。

**您可以使用声明`xyz`命名空间前缀的 XML 文档“包装”无效的 XML 文件，然后使用外部实体包含文件的内容。**然后转换文件以删除包装的内容并产生所需的输出。

对于此示例，您的示例文件称为`fragment.xml`. 我定义了一个指向文件的外部实体，然后在`wrapper`元素内部引用它。该`wrapper`元素`xyz`定义了命名空间前缀：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE wrapper [
<!ENTITY otherFile SYSTEM "fragment.xml">
]>
<wrapper xmlns:xyz="http://stackoverflow.com/questions/12024763/how-can-i-add-a-namespace-xmlnsxyz-to-an-xml-document-using-xslt">
&otherFile;
</wrapper> 
```

**当被任何 XML 解析器解析时，文档将被“视为”为：**

```
<wrapper xmlns:xyz="http://stackoverflow.com/questions/12024763/how-can-i-add-a-namespace-xmlnsxyz-to-an-xml-document-using-xslt">
<Root>
    <Name>Eding</Name>
    <Roll>15</Roll>
    <xyz:Address>25, Brigton,SA</xyz:Address>
</Root>
</wrapper> 
```

**然后，使用带有模板的修改后的[身份转换](http://en.wikipedia.org/wiki/Identity_transform)来删除`wrapper`元素：**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    version="1.0">

    <!--identity template to copy all content forward by default -->
    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <!--remove the "wrapper" element, then process the rest of the content -->
    <xsl:template match="/wrapper">
        <xsl:apply-templates/>
    </xsl:template>

</xsl:stylesheet> 
```

**产生以下输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<Root xmlns:xyz="http://stackoverflow.com/questions/12024763/how-can-i-add-a-namespace-xmlnsxyz-to-an-xml-document-using-xslt">
    <Name>Eding</Name>
    <Roll>15</Roll>
    <xyz:Address>25, Brigton,SA</xyz:Address>
</Root> 
```

# javascript - 从浏览器访问相机

> ID：12024770
> 
> 赞同：49
> 
> 时间：2012-08-19T06:47:39.203
> 
> 标签：javascript, camera

是否可以从浏览器访问相机（Apple 内置）？

最佳解决方案是客户端 javascript。希望避免使用 Java 或 Flash。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-19T06:51:21.337

HTML5 规范确实允许访问网络摄像头，但最后我检查了一下，它还远未最终确定，并且浏览器支持非常非常少。

这是一个帮助您入门的链接：http: [//www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

如果您希望它跨浏览器工作，您可能必须使用 Flash。

[W3草案](http://dev.w3.org/2009/dap/camera/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-08-04T01:26:08.987

自 2017 年起，[WebKit 宣布在 Safari 上支持 WebRTC](https://webkit.org/blog/7726/announcing-webrtc-and-media-capture/)

现在您可以使用`video`标准的 javascript WebRTC访问它们

例如

```
var video = document.createElement('video');
video.setAttribute('playsinline', '');
video.setAttribute('autoplay', '');
video.setAttribute('muted', '');
video.style.width = '200px';
video.style.height = '200px';

/* Setting up the constraint */
var facingMode = "user"; // Can be 'user' or 'environment' to access back or front camera (NEAT!)
var constraints = {
  audio: false,
  video: {
   facingMode: facingMode
  }
};

/* Stream it to video element */
navigator.mediaDevices.getUserMedia(constraints).then(function success(stream) {
  video.srcObject = stream;
}); 
```

玩一玩吧。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-08T16:23:22.360

Danny Markov 有一个非常酷的解决方案。它使用 navigator.getUserMedia 方法并且应该在现代浏览器中工作。我已经用 Firefox 和 Chrome 成功地测试了它。IE 没有工作：

这是一个演示：

[https://tutorialzine.github.io/pwa-photobooth/](https://tutorialzine.github.io/pwa-photobooth/)

链接到 Danny Markovs 描述页面：

[http://tutorialzine.com/2016/09/everything-you-should-know-about-progressive-web-apps/](http://tutorialzine.com/2016/09/everything-you-should-know-about-progressive-web-apps/)

链接到 GitHub：

[https://github.com/tutorialzine/pwa-photobooth/](https://github.com/tutorialzine/pwa-photobooth/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-19T06:53:29.393

可以使用 HTML5。

[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-19T06:57:02.057

您可以为此使用 HTML5：

```
<video autoplay></video>
<script>
  var onFailSoHard = function(e) {
    console.log('Reeeejected!', e);
  };

  // Not showing vendor prefixes.
  navigator.getUserMedia({video: true, audio: true}, function(localMediaStream) {
    var video = document.querySelector('video');
    video.src = window.URL.createObjectURL(localMediaStream);

    // Note: onloadedmetadata doesn't fire in Chrome when using it with getUserMedia.
    // See crbug.com/110938.
    video.onloadedmetadata = function(e) {
      // Ready to go. Do some stuff.
    };
  }, onFailSoHard);
</script> 
```

[资源](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-19T06:59:52.370

**[视频教程：使用 HTML5 和 appMobi API 访问相机](http://gothtml5.com/2011/12/09/video-tutorial-accessing-camera-html5-appmobi-api/)**将对您有所帮助。

也可以试试这个`getUserMedia`方法（Opera 12支持）

![在此处输入图像描述](../Images/23f644ff591375a1159959e95d35ed1d.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-25T18:22:34.263

是的，可以从浏览器访问相机，以下是对我有用的代码

```
<html><head>
</head><body>
    <video src="" ></video>
    <br />
<button id='flipCamera'>Flip</button>
</body>
<script>
  var front = false;
var video = document.querySelector('video');
  document.getElementById('flipCamera').onclick = function() { front = !front; };
  var constraints = { video: { facingMode: (front? "user" : "environment"), width: 640, height: 480  } };
  navigator.mediaDevices.getUserMedia(constraints)
  .then(function(mediaStream) {
    video.srcObject = mediaStream;
    video.onloadedmetadata = function(e) {
    video.play();
};
})
.catch(function(err) { console.log(err.name + ": " + err.message); })
</script></html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-31T14:54:20.397

**简单的JAVASCRIPT香草**

```
var video = document.querySelector("#videoElement");

if (navigator.mediaDevices.getUserMedia) {
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(function (stream) {
            video.srcObject = stream;
        })
        .catch(function (err0r) {
            console.log("Something went wrong!");
        });
}
```

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="stuff, to, help, search, engines, not" name="keywords">
<meta content="What this page is about." name="description">
<meta content="Display Webcam Stream" name="title">
<title>Display Webcam Stream</title>
<style>
  #container{
   align-self: center;
   margin-left: 350px;
   align-items: center;
   justify-content: center;
position: relative;
    width: 1000px;
    height: 1000px;
       background-color: black;
       padding: 3px;
  }
  #videoElement{
    transform: rotate(90deg);
   align-self: center;
   height: 50a0px;
   left: 20;
   width: 700px;
   position:absolute;
   padding: 1px;
   top: 120px;
  }
</style>
</head>

<body>
<div id="container">
    <video autoplay="true" id="videoElement">
    </video>
</div>
<script src="index.js">

</script>
</body>
</html>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-09T19:30:03.190

```
 <style type="text/css">
        #container {
            margin: 0px auto;
            width: 500px;
            height: 375px;
            border: 10px #333 solid;
        }

        #videoElement {
          width: 500px;
          height: 375px;
          background-color: #777;
        }
    </style>    
<div id="container">
            <video autoplay="true" id="videoElement"></video>
        </div>
        <script type="text/javascript">
          var video = document.querySelector("#videoElement");
          navigator.getUserMedia = navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;

          if(navigator.getUserMedia) {
            navigator.getUserMedia({video:true}, handleVideo, videoError);
          }

          function handleVideo(stream) {
            video.srcObject=stream;
            video.play();
          }

          function videoError(e) {

          }
        </script> 
```

# jquery - 用于移动设备的 jQuery .select()？

> ID：12024773
> 
> 赞同：1
> 
> 时间：2012-08-19T06:47:58.940
> 
> 标签：jquery, mobile

> **可能重复：**
> [使用 jQuery 选择焦点上的文本在 iPhone iPad 浏览器中不起作用](https://stackoverflow.com/questions/9924506/selecting-text-on-focus-using-jquery-not-working-in-iphone-ipad-browsers)

jQuery.select() 方法选择输入字段中的所有文本，用户可以轻松复制/粘贴。

```
$('#linkModal input').live("click", function(){
  $(this).select();
}); 
```

简单的。

但是，这会在移动设备上中断，特别是 iPhone 上的移动 Safari。可能是因为它是一个只读字段，但无论哪种方式，我都希望用户选择它以便复制/粘贴。

形式：

```
<input type="text disabled" readonly="true" value="user needs to copy/past" /> 
```

# iphone - 对于通过我的 iphone 应用程序中的滑块控件以编程方式设置的 iphone 亮度

> ID：12024779
> 
> 赞同：0
> 
> 时间：2012-08-19T06:49:45.537
> 
> 标签：iphone, ios, xcode, api

> **可能重复：**
> [有没有办法以编程方式调整屏幕亮度？](https://stackoverflow.com/questions/3779667/is-there-a-way-of-adjusting-the-screen-brightness-programmatically)

我是新来的人，这是我在这个论坛上的第一个问题。我研究了很多次，但我无法得到这个问题的正确答案。

我想在我的应用程序中放置一个滑块，用于 iphone 和 ipad，这两个滑块都可以调整 iphone 的亮度。意思是增加和减少iphone的亮度。

那么如何以编程方式实现这一点。我只是想知道它是否可能以及如何。

给我指导，因为我是新来的。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T07:21:11.683

参考以下代码。

```
- (void)viewDidLoad
{
    UISlider *slider = [[UISlider alloc] initWithFrame:CGRectMake(0,0,300,40)];
    [slider addTarget:self action:@selector(sliderHandler:) forControlEvents:UIControlEventValueChanged];
    slider.minimumValue = 0.f;
    slider.maximumValue = 1.0f;
    slider.value = [[UIScreen mainScreen] brightness];
    [[self view]addSubview:slider];

    [super viewDidLoad];
}

- (void)sliderHandler:(UISlider *)sender
{
    //NSLog(@"value:%f", sender.value);
    [[UIScreen mainScreen] setBrightness:sender.value];
} 
```

# java - Java API 类如何做这些特定的事情？

> ID：12024781
> 
> 赞同：1
> 
> 时间：2012-08-19T06:49:50.297
> 
> 标签：java, api

我对java很陌生，自从我开始学习它以来，我一直在想：java API的类和包做了很多有用的事情，从创建窗口到写入文件。但一开始，API 类只使用语言来完成它们所做的任何事情。

我知道使用该语言，您可以将数据存储在变量中、执行逻辑、创建方法、对象和类等等。但要完成所有“好事”，您需要使用 API 类。但是他们怎么能用语言做这么酷的事情呢？java内置的代码是否指定了如何创建窗口或写入文件？以及如何使用代码向外部事物（例如电机）输出信息？

似乎内置的代码无法处理 API 本身可以完成的所有事情，但 API 是用 java 编写的，因此使用原始语言来完成它所做的事情。

我想我已经表达了我的观点，但这一切如何运作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T06:54:30.653

如果您检查各种 java 类的源代码（例如，在[docjar](http://www.docjar.com/)上），您最终会注意到一些方法声明以开头`native`和未提供实现（检查[Thread](http://www.docjar.com/html/api/java/lang/Thread.java.html)类）。这就是将控制权传递给一些底层平台特定代码的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T06:55:04.160

Java 运行时库原生支持许多“很酷的东西”，但是为了高性能访问窗口、文件系统和其他操作系统原生资源，Java 提供了一种称为 Java 原生接口 (JNI) 的机制，它从 JVM 桥接到低级，平台特定的库。

从 Java 的角度来看，桥越过的路标将是`native`装饰方法声明的关键字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T06:56:58.887

API 类旨在为您提供一个干净的 API 进行编程。想想`List`。

然后是履行合同部分的类，例如`ArrayList`和`LinkedList`，它们都是列表，但具有不同的特征。

需要操作系统帮助的事情，比如写入文件或在屏幕上绘图，都是为了符合操作系统提供的 API 而编写的。这通常取决于平台，由本机代码（通常用 C 编写）调用。Swing - 默认的 Java GUI - 完全用 Java 编写，在操作系统提供的矩形内工作。

在使用带有 JDK 的现代 IDE 时，您始终可以导航到运行时库中的类，并查看它们实际上是如何*做到*的。它通常比你想象的要简单得多。

# logging - analytics.logEvent() 不起作用

> ID：12024783
> 
> 赞同：0
> 
> 时间：2012-08-19T06:51:17.693
> 
> 标签：logging, lua, coronasdk

我想将日志添加到我的应用程序。这是我的代码：

```
local analytics = require "analytics"
analytics.init("X6YPFYT6NPJYF5xxxxxx")
analytics.logEvent("Game is started!") 
```

我在设备上运行它，但在 flurry.com 网站上看不到任何数据或会话。我在这里想念什么？有人尝试使用电晕“分析”模块吗？

还有什么其他方法可以添加日志 ob Corona SDK（我只熟悉发送 tcp-packets 和输出重定向到 xCode 控制台）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:39:41.570

我在 Corona 论坛上收到了一个答案：它只能在设备上运行，并且需要一天的时间才能在网站上看到分析结果。

# django - 点云 django mongo 502

> ID：12024788
> 
> 赞同：1
> 
> 时间：2012-08-19T06:52:26.787
> 
> 标签：django, mongodb, dotcloud

我从[https://github.com/jpetazzo/django-and-mongodb-on-dotcloud获得了一个 django 应用程序](https://github.com/jpetazzo/django-and-mongodb-on-dotcloud)

但应用程序收到 502 - 应用程序无响应错误。

在部署应用程序时，waitfordb 和 manage 会引发身份验证错误。我 sshed 并单独运行这些脚本都运行良好，但服务器仍然抛出 502 错误。

有人可以指点一下。我需要使用 mongodb 设置一个基于 django 的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T11:41:49.323

`nginx.conf`最近对 python 服务的主文件进行了更改（错误修复） 。最初它声明了一个像这样的 nginx 位置块。

```
location /static { root /home/dotcloud/data ; } 
```

这打破了东西，所以它被改为这个。

```
location /static/ { root /home/dotcloud/data ; } 
```

`/static/`当这种情况发生时，任何在自己的文件中声明了自己的位置块的人`nginx.conf`都会导致 nginx 错误，并且不会启动。您可以通过 ssh 进入您的服务来确认这是您的问题。

```
dotcloud ssh <application.service> 
```

然后查看你的 nginx 日志文件`/var/log/nginx/`。

解决此问题的最简单方法是`/static/`从文件中删除您的位置块`nginx.conf`，然后重新推送您的应用程序。

您在上面提到的存储库尚未修复。

# jquery - 我需要一个不随页面加载的 gmail 聊天框

> ID：12024789
> 
> 赞同：-2
> 
> 时间：2012-08-19T06:52:42.600
> 
> 标签：jquery, chat

我非常感谢您回答我问题的方式，我还有一个问题。在此先感谢您的时间。

我计划在页面的某处放置一个框，并且不应该与我的网站页面一起加载。只有当我关闭网站时才应该关闭它，类似于 gmail 中的聊天框。加载其他页面时，右下角的聊天框保持不变。请给我一些指导。

我以谷歌为例。我应该从哪里开始。我最初的计划是在底部制作一个 div 并对其进行 z-index 以使其浮动在右下角的页面上。但是当我点击另一个链接时，页面加载了我在底部固定的 div 正在加载。那么你能帮帮我吗？

我想在我的网站上添加一个无线电类型的 div，而他们在浏览页面时不会受到干扰。我正在使用流媒体服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:03:05.210

谷歌等正在做的是，当您单击链接而不是更改页面时，他们只是在后台从服务器加载新内容，然后用新内容替换当前页面的内容（除了当然是聊天窗口）。像这样，感觉就像您正在导航到另一个页面，但实际上您只是在交换当前页面的内容。

有很多技术可以使用户“不可见”。通常，这称为 AJAX。阅读它！

祝你好运！

# django - Django：在基于类的视图中更正 select_related

> ID：12024792
> 
> 赞同：0
> 
> 时间：2012-08-19T06:53:16.193
> 
> 标签：django, django-models, foreign-keys, django-class-based-views, django-select-related

嗨 Stackoverflow 人，

我在 Django 中遇到了一个与 select_related 查询有关的奇怪问题。我已经安装了[django-cities 应用程序](https://github.com/coderholic/django-cities)，它列出了大量城市的地理信息。在我的项目模型中，我为 city 元素创建了一个外键，以将位置存储在我的**models.py 中**。

```
from cities.models import City 
class Project(models.Model): 
   ...
   city = models.ForeignKey(City, blank = True, null = True) 
```

由于可能的城市数量众多，我在**基于类的视图**中创建了一个查询，该查询在创建项目对象时选择相关的城市字段。

```
from django.views.generic.edit import CreateView, UpdateView, DeleteView
from project.models import Project
class ProjectCreate(CreateView):
    queryset = Project.objects.select_related('city__country', 'city__region').all()
    template_name = 'solution/solution_create_form.html' 
```

但是，当我请求 ProjectCreate 类时，**Django 仍然从数据库中提取无数外键**。记录器显示无限数量的以下请求。

> ...调试（0.000）选择“cities_region”。“id”，“cities_region”。“name”，“cities_region”。“slug”，“cities_region”。“name_std”，“cities_region”。“code”，“cities_region” "."country_id" FROM "cities_region" WHERE "cities_region"."id" = 3861887 ; args=(3861887,) DEBUG (0.000) SELECT "cities_country"."id", "cities_country"."name", "cities_country"."slug", "cities_country"."code", "cities_country"."population" , "cities_country"."continent", "cities_country"."tld" FROM "cities_country" WHERE "cities_country"."id" = 3865483 ;

**执行 ProjectCreate 类时如何强制选择相关方法？**

感谢您的帮助和建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:11:23.450

没有任何测试，您是否尝试过覆盖`get_queryset`方法而不是使用`queryset`属性？至少你会更加灵活地使用异常捕获和其他技术。

# iphone - 如何使用 PhoneGap 在 iPhone 应用程序中添加 UITableview？

> ID：12024802
> 
> 赞同：1
> 
> 时间：2012-08-19T06:55:47.707
> 
> 标签：iphone, ios, uitableview, cordova

使用 PhoneGap 开发 iPhone 应用程序非常新。我已经在 Google 中搜索使用 PhoneGap 框架在 iPhone 应用程序中添加 UITableView。我有`downloaded and installed PhoneGap`。我想做一个`simple iPhone app using UITableView in PhoneGap iPhone apps`. 我参考了下面的链接来通过 PhoneGap 开发一个简单的 iphone 应用程序，

> [http://taitems.github.com/iOS-Inspired-jQuery-Mobile-Theme/](http://taitems.github.com/iOS-Inspired-jQuery-Mobile-Theme/)

我已经为`tableview and having in HTML format`. 我不知道如何使用 PhoneGap 在 iPhone 应用程序中使用和显示 tableview。你能帮我在 iPhone 应用程序中使用 PhoneGap 使用 UITableView 吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T01:30:46.393

您是否查看过 PhoneGap.com 上的“入门”指南？有关如何设置 PhoneGap iOS 应用程序的详细说明：http: [//docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

您不需要使用目标 c 使用 uitableview。您只需要创建您的 HTML 界面（div 或表格等）。Phonegap 利用 Web 视图将您的 HTML 呈现为移动应用程序界面。不需要客观的 c 编码。

# c# - 是否存在从类描述实例化类的工具？

> ID：12024807
> 
> 赞同：1
> 
> 时间：2012-08-19T06:57:17.060
> 
> 标签：c#, visual-studio-2010

有时我想手动设置一个对象。我的一些类相当复杂，可能有 14 个或更多变量。VS2010 或其他地方是否有可以将类描述转换为构造对象的工具？

我知道这可能没有意义，因此请采用以下简化示例：

```
internal class MyObject
{
    internal string Description { get; set; }
    internal int Stock { get; set; }
    internal int DaysSinceLastCount { get; set; }
    internal double TotalValue { get; set; }
    internal bool IsUpToDate { get; set; }

    internal bool IsUnableToBeSet
    {
        get { return Stock==5; }
    }
} 
```

现在，通常，如果我想以手动方式构建它来进行测试，我会做这样的事情：

```
 MyObject myObject = new MyObject
        {
            Description = "my description",
            Stock = 7,
            DaysSinceLastCount = 10,
            TotalValue = 1000.10,
            IsUpToDate= true;
        }; 
```

我的问题是，对于大型课程，我发现自己花了很多时间输入它们 - 有没有更简单的方法？是否有一些尚未发现的 Visual Studio 功能知道如何自动创建对象。当我输入“MyObject myObject = new ...”时，智能感知似乎不太好。我正在考虑复制粘贴，然后再重新设置以提供帮助，但我想我会在走这条路之前先问一下。

```
 EDIT: resex \{.*?\} and replace with =, to help build may be an option 
```

有一些 SO 主题需要构建构造函数，但我不确定是否有太多人执行上述操作。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:20:04.023

因此，您需要使用任何随机数据测试类。为什么不使用带有 bool 参数的构造函数。

```
internal class MyObject
    {
        internal string Description { get; set; }
        internal int Stock { get; set; }
        internal int DaysSinceLastCount { get; set; }
        internal double TotalValue { get; set; }
        internal bool IsUpToDate { get; set; }
        internal bool IsUnableToBeSet
        {
            get { return Stock==5; }
        }
        public MyObject(bool isTest)
        {
             if(isTest==true)
             {
            Description=this.GetHashCode().ToString();
            Stock=new Random().Next();
            DaysSinceLastCount=new Random().Next();
            TotalValue=new Random().Next();
            IsUpToDate=true;
         }
             else
             //do nothing
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:22:11.873

您可以使用代码片段。但是，您必须手动编写一次。例如，使用下面的代码片段，我可以通过键入以下内容来创建一个新对象：

someobject [标签] [标签]

例如，将代码段放入

..\Documents\Visual Studio 2010\代码片段\Visual C#\我的代码片段

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <Title>
        New Object
      </Title>
      <Shortcut>someobject</Shortcut>
    </Header>
    <Snippet>
      <Declarations>
        <Literal>
          <ID>InstanceName</ID>
          <ToolTip>Name of the instance</ToolTip>
          <Default>myObject</Default>
          <Type>System.String</Type>
        </Literal>
        <Literal>
          <ID>Name</ID>
          <ToolTip>Name property</ToolTip>
          <Default>Name</Default>
          <Type>System.String</Type>
        </Literal>
        <Literal>
          <ID>Value</ID>
          <ToolTip>Value property</ToolTip>
          <Default>Value</Default>
          <Type>System.String</Type>
        </Literal>
      </Declarations>
      <Code Language="CSharp">
        <![CDATA[var $InstanceName$ = new MyObject
            {
                Name = "$Name$",
                Value = "$Value$"
            };]]>
      </Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:48:08.960

当您有 LARGE 类时，我想这样做的唯一方法是复制该类，然后查找并替换花括号内的信息，`\{.*?\}`并替换为`= , \n\r`（在 NotePad++ 中），如评论中所述。然后我手动替换`internal string`or `internal int`etc 并填写我的值。它既不理想也不优雅，但我已经接受了没有工具可以做到这一点的事实。

如果我像这样格式化我的课程会有所帮助：

```
 internal class MyObject
    {
      internal string Description { get; set; }
      internal int Stock { get; set; }
      internal int DaysSinceLastCount { get; set; }
      internal double TotalValue { get; set; }
      internal bool IsUpToDate { get; set; }
      internal bool IsUnableToBeSet    {        get { return Stock==5; }    }

     } 
```

因为这有助于正则表达式获取最后一个 {} ，即使我必须删除它，因为没有 set 。

同样，请记住，这是为大型课程设计的 - 而不是上面的课程！
如果有人能想到更好的方法，我很乐意重新分配答案！

[编辑] = VS2012 之前，您应该使用“{.@}”进行上述搜索。[看到这个问题](https://stackoverflow.com/questions/13019786/how-do-i-activate-regex-search-in-visual-studio-2010)

# c# - Web服务中基于用户的缓存

> ID：12024809
> 
> 赞同：0
> 
> 时间：2012-08-19T06:57:35.250
> 
> 标签：c#, asp.net, web-services, caching

我想使用 C# 在 ASP.net 的 web 服务中缓存数据集。此外，数据集属于不同的用户。即每个用户将有一个不同的缓存，该缓存将在一段时间后过期。

任何人都可以为此提出一个很好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:30:47.917

缓存是特定于应用程序的。但是如果你想存储用户特定的缓存，你可以在其中包含用户会话 ID 键。它可能会消耗大量内存（取决于用户数量），因此应仔细考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:25:23.110

您可以使用 ASP.NET 会话状态来存储数据。它为每个用户保存并在一段时间后过期（您可以配置）。

这是一篇小文章，解释了在您的服务中实现会话所需的操作：

[http://msdn.microsoft.com/en-us/library/aa480509.aspx](http://msdn.microsoft.com/en-us/library/aa480509.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T07:23:21.280

您可以使用特定于用户的键来缓存数据。例如：`__username__data`哪里`username`会有所不同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-19T07:28:21.737

你可以在这里找到答案 [如何将数据表存储在缓存中以重用它？](https://stackoverflow.com/questions/6831665/how-to-store-datatable-in-cache-to-reuse-it)

在您的情况下，选择“密钥”作为用户的唯一属性（例如，用户 ID、用户名或电子邮件）

# java - 如何在 Android 应用程序中从 WordPress 博客中检索帖子？

> ID：12024811
> 
> 赞同：15
> 
> 时间：2012-08-19T06:58:46.223
> 
> 标签：java, android, xml, wordpress

我正在尝试开发一个 Android 应用程序来浏览我拥有的由 Wordpress 提供支持的博客。我试图弄清楚如何从博客中检索帖子和其他信息以显示在应用程序中。我已经看遍了，但我完全迷失了方向。这是完全可以用 Java/XML 完成的吗？如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T10:32:34.977

是的，这是可以做到的。

一种方法是使用 xml-rpc api。Wordpress 博客有一个 xml-rpc api（您需要在 Wordpress 博客的“设置 - 写作”下启用它）。您还需要在博客上创建一个用户，您至少授予该用户读取权限，并在您的应用程序中包含该用户的凭据。从那时起，您可以对您的 Wordpress 博客进行 xml-rpc 调用。

如果可以选择使用此 xml-rpc api，请查看此 Java 库：[http ://code.google.com/p/wordpress-java/](http://code.google.com/p/wordpress-java/)

你可以像这样使用这个库来获取博客文章：

```
String username = args[0];
String password = args[1];
String xmlRpcUrl = args[2];
Wordpress wp = new Wordpress(username, password, xmlRpcUrl);
List<Page> recentPosts = wp.getRecentPosts(10); 
```

此外，官方的 Wordpress Android 应用程序是开源的。获取它的说明位于：[http](http://android.wordpress.org/development/) ://android.wordpress.org/development/ 您可以使用此源代码作为起点并根据您的需要进行调整。

请注意，只有当您拥有具有读取权限的用户时，您才能使用 xml-rpc api。如果您没有具有读取权限的用户的凭据，则无法使用 xml-rpc api 获取帖子。获取 rss 提要并使用一些 java lib 解析 rss 提要可能是您最好的选择（查看[http://www.vogella.com/articles/RSSFeed/article.html](http://www.vogella.com/articles/RSSFeed/article.html)以了解如何使用 Java 阅读 rss 提要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-05T15:33:46.277

正如*Integrating Stuff*所说，'net.bican:jwordpress:0.6.4' 是您所需要的。尽管如此，他给出的例子现在已经被弃用了。不再有 getRecentPosts(int) 而是 getPosts(FilterPost)。

所以现在正确的代码是：

```
String username = args[0];
String password = args[1];
String xmlRpcUrl = args[2];
Wordpress wp = new Wordpress(username, password, xmlRpcUrl);
FilterPost filter = new FilterPost() ;
filter.setNumber(10);
List<Post> recentPosts = wp.getPosts(filter); 
```

要了解更多信息，请查看示例： [https ://github.com/canbican/wordpress-java/blob/bb4b60a008ee6d280aedd9174df4a657bff683ac/src/net/bican/wordpress/example/Main.java](https://github.com/canbican/wordpress-java/blob/bb4b60a008ee6d280aedd9174df4a657bff683ac/src/net/bican/wordpress/example/Main.java)

此外，如果您使用的是 Gradle，请检查您可能面临的依赖关系问题： [https ://github.com/canbican/wordpress-java/issues/54](https://github.com/canbican/wordpress-java/issues/54)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T11:37:23.207

还有一种替代方法，而且效果很好，

您可以在 word press 中安装 json 插件，您可以通过请求 url 来检索所有帖子...并在您的 android 视图中解析响应 json 将正常工作。

# android - 注册短信接收来自活动的意图

> ID：12024813
> 
> 赞同：3
> 
> 时间：2012-08-19T06:59:17.893
> 
> 标签：android, android-intent, android-activity, sms, broadcastreceiver

我有一个专用于我的活动课程的接收器。我想为我的接收者注册 intent `"android.provider.Telephony.SMS_RECEIVED"`。我可以从清单文件中这样做，但不能从我的活动中这样做。注册接收器的活动代码：

```
IntentFilter filter = new IntentFilter("android.provider.Telephony.SMS_RECEIVED");

registerReceiver(receiver, filter); 
```

收货人代码：

```
 private BroadcastReceiver receiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {

               //some action

            }
        }; 
```

请告诉是否可以这样做，如果可以，那么如何。

# python - 混合numpy矩阵和数组的危险

> ID：12024820
> 
> 赞同：12
> 
> 时间：2012-08-19T07:00:41.240
> 
> 标签：python, arrays, matrix, numpy

我正在研究的科学/工程应用程序有很多线性代数矩阵乘法，因此我使用 Numpy 矩阵。但是，python 中有许多函数可以互换地接受矩阵或数组类型。不错，不是吗？嗯，不是真的。让我用一个例子来说明这个问题：

```
from scipy.linalg import expm
from numpy import matrix

# Setup input variable as matrix
A = matrix([[ 0, -1.0,  0,  0],
            [ 0,  0,  0,  1.0],
            [ 0,  0,  0,  0],
            [ 0,  0,  1.0,  0]])

# Do some computation with that input
B = expm(A)

b1 = B[0:2, 2:4]
b2 = B[2:4, 2:4].T

# Compute and Print the desired output
print "The innocent but wrong answer:"
print b2 * b1

print "The answer I should get:"
print matrix(b2) * matrix(b1) 
```

运行时你得到：

```
The innocent but wrong answer:
[[-0.16666667 -0.5       ]
 [ 0\.          1\.        ]]
The answer I should get, since I expected everything to still be matrices:
[[ 0.33333333  0.5       ]
 [ 0.5         1\.        ]] 
```

关于如何避免这种混淆的任何提示或建议？在 matrix() 调用中继续包装变量以确保它们仍然是矩阵真的很麻烦。这方面似乎没有标准，因此可能会导致难以检测的错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-19T07:34:08.593

我倾向于使用`array`而不是`matrix`in`numpy`有几个原因：

1.  `matrix`严格来说是二维的，而你可以有`numpy` `array`任何维度的。
2.  除了一些差异之外，对于 Matlab 用户来说`array`，`matrix`操作几乎[可以互换。](http://www.scipy.org/NumPy_for_Matlab_Users)
3.  如果您`array`始终使用，那么您将使用`numpy.dot()`（或在 Python 3.5 中使用新的`@`二元运算符）进行矩阵乘法。这将防止不确定`*`代码中实际执行的操作的问题。当你遇到乘法错误时，你可以更容易地找到问题，因为你可以确定你正在尝试执行哪种乘法。

所以我建议你尽量坚持`numpy.array`，但也要记住和之间的`array`区别`matrix`。

最后，我发现`numpy/scipy`在[bpython](http://bpython-interpreter.org)上工作很愉快。`numpy/scipy`自动提示可以帮助您以比不断查阅文档更快的速度了解您尝试使用的功能的属性。

**编辑：**`array` vs 之间的区别`matrix`也许在这里得到最好的回答：[**'array' 还是 'matrix'？我应该使用哪个？**](http://www.scipy.org/NumPy_for_Matlab_Users#head-e9a492daa18afcd86e84e07cd2824a9b1b651935)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T11:04:10.870

混合矩阵和常规 ndarray 确实很棘手，而且通常不值得麻烦。我会支持其他海报，并建议您坚持使用数组。

不过，在您的特定示例中，问题来自`expm`. 根据文档，它需要一个正则`ndarray`作为参数并输出一个 ndarray。如果要将输出转换回`matrix`，可以使用：

```
B = matrix(expm(A)) 
```

或者

```
B = expm(A).view(matrix) 
```

现在，`B`是一个矩阵，切片`B`本身就是矩阵，并且您的乘法将按预期工作。

因此，建议始终检查函数输出的类型。

# python - Cython setup.py 安装已编译的扩展

> ID：12024825
> 
> 赞同：0
> 
> 时间：2012-08-19T07:01:48.680
> 
> 标签：python, cython, distutils

您如何编写 setup.py 来在任意位置编译 .pyx 文件并将编译后的代码安装在另一个任意位置？例如`dirA/spam.pyx`到`build/dirB/spam.so`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:59:42.037

根据[distutils 文档](http://docs.python.org/install/index.html#install-index)，您可以使用命令行选项在任意位置构建任何已编译的 python 模块`--build-base`，例如：

```
python setup.py build --build-base=/build/dirB 
```

如果要保留默认构建目录，但要安装到自定义位置，则应使用选项`--user` `--home`、`--prefix`、或`--exec-prefix``--install-base``--install-platbase`

最后，如果您只想要`.so`当前目录中的文件，请使用该选项`--inplace`

# c - 如何从 xml 模式（xsd）的复杂类型中获取常规 exp？

> ID：12024826
> 
> 赞同：-2
> 
> 时间：2012-08-19T07:01:50.640
> 
> 标签：c, xml, regex, xsd

如何从 xml 模式中获取常规 exp？我们知道 xml 模式有明确的正则表达式。但是如何实现呢？（例如，编写一个程序来获得常规的 exp）。

只考虑 complexType。例如：在 xsd 中，我们有：

```
<xs:element name="letter">
  <xs:complexType mixed="true">
    <xs:sequence>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="orderid" type="xs:positiveInteger"/>
      <xs:element name="shipdate" type="xs:date"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

或者：

```
<xs:complexType name="lettertype" mixed="true">
  <xs:sequence>
    <xs:element name="name" type="xs:string"/>
    <xs:element name="orderid" type="xs:positiveInteger"/>
    <xs:element name="shipdate" type="xs:date"/>
  </xs:sequence>
</xs:complexType> 
```

查找序列的意思是“，”，所以结果是“letter (name,orderid,shipdate)” 结果是name regex。

另一个例子：（如果 xsd 有这个：）

```
<xs:complexType name="request">
<xs:all>
  <xs:element name="url" type="xs:string"/>
  <xs:element name="component" type="xs:string"/>
  <xs:element name="action" type="xs:string" minOccurs="0"/>
  <xs:element name="params" type="varList" minOccurs="0"/>
  <xs:element name="session" type="varList" minOccurs="0"/>
  <xs:element name="cgi-data" type="varList" minOccurs="0"/>
</xs:all> 
```

表示 complexType 的名称是“request”。。。。表示。。。的关系是“all”（如果我们用&表示“all”） all是“&”，所以结果是“request url&component&action¶ms&session&cgi-data”

有没有人可以帮我编写一个程序来实现这个功能？或者告诉我一个算法？

我编写了一个程序，但它太错误了，而且逻辑错误。这是我的程序：

```
#include<stdio.h> 
#include<string.h>
#include <stdlib.h>
#include<io.h> 
#define MatchMaxLen 69500
void process(char *result,char *str,char *str2,FILE* fp1)
{
if(strstr(str2,"complexType>")) fgets(str2,3000,fp1);
        //strcat(str,   str2);
    char c[5],*pem;
    int m=0;   if(!strstr(str2,"xs:sequence")&&!strstr(str2,"xs:choice")&&!strstr(str2,"xs:all")) return;
    if(strstr(str,"element name=\""))
        {
            pem=strstr(str,"element name=\"")+strlen("element name=\"");

            while(*pem!='\"')*result++=*pem++;//put element name in purec

            *result++=' ';
        }   
    if(strstr(str2,"xs:sequence")) {*result++='(';c[m++]=',';}
    if(strstr(str2,"xs:choice")) {*result++='(';c[m++]='|';}
    if(strstr(str2,"all")) {*result++='(';c[m++]='&';}
    fgets(str2,3000,fp1);
    while(!(strstr(str2,"sequence>")||strstr(str2,"choice>")||strstr(str2,"all>")))
        {
            if(str2,"complexType>") process(result,str,str2,fp1);
    if(strstr(str2,"element name=\""))
    {
    pem=strstr(str2,"element name=\"");
    pem=pem+strlen("element name=\"");
    }
    if(strstr(str2,"element ref=\""))
    {
    pem=strstr(str2,"element ref=\"");
    pem=pem+strlen("element ref=\"");
    }
    while(*pem!='\"') *result++=*pem++;

    char *pmax,*pmin;
    pmin=strstr(str2,"minOccurs=\"");
    pmin=pmin+strlen("minOccurs=\"");
    pmax=strstr(str2,"maxOccurs=\"");
    pmax=pmax+strlen("maxOccurs=\"");
    if(strstr(str2,"minOccurs")&&strstr(str2,"maxOccurs"))
    {
        if(*pmax=='1'&&*pmin=='0')
        {
        *result++=')';
        *result++='?';
        }
    if(*pmax=='u'&&*pmin=='0')
        {   
        *result++=')';
        *result++='*';
        }
    if(*pmax=='u' && *pmin=='1')
        {
        *result++=')';
        *result++='+';
        }
    *result++=c[m-1];
    }

    fgets(str2,3000,fp1);}
    m--;
}

void main()
{
char type[100][20];
char name[100][20];
char res[3000];
char *result=res;
int flag=0;
char *str, *str2,*psp;
char destfname[20];
char *path="E:\\study\\research\\summer\\program\\*.xsd";/*use this when needed in future extension.Well, been used currently*/
char path1[]="E:\\study\\research\\summer\\program\\";
int len;
FILE *fp1,*fp2; 
char string[MatchMaxLen];
char string2[3000];
struct _finddata_t   ffblk;
long done= _findfirst(path,&ffblk);  
do{ /*sprintf(filename,"dtd%d.dtd",i); 
In the future if the filename is not regular or we don't know the exact numbersome day, 
you may need function like _findnext,_findfirst.Well, currently being used*/
strcat(path1,ffblk.name);
if ((fp1=fopen(path1,"r"))==NULL)
{ /* read source file*/
        printf("cannot open file\n");
        exit(0);
}
sprintf(destfname,"IncludeNamexsdRe%s.txt",ffblk.name);
if((fp2=fopen(destfname,"w"))==NULL)
{ /* destination file*/
        printf("cannot open file\n"); 
        exit(0);
}   
char *pem;
int j(0);
int i(0);
while (fgets(string,MatchMaxLen,fp1))
{//first while's purpose is to create the map of name and type      
str=string;
if(!strstr(str,"element name")) continue;// the thing u need to process
i++;
pem=strstr(str,"element name");
pem=pem+strlen("element name=")+1;//pem: pointer of the element name
while(*pem!='\"')//while not the end point """
{
name[i][j++]=*pem++;//put the element name to the name[][]
}
name[i][j]='\0';
if(!(psp=strstr(string,"type="))) continue;
memccpy(type[i],psp+6,'\"',22); 
}
rewind(fp1);//normal process, here we go
char purecomplex[20];
char *purec=purecomplex;
char ctype[20];
char *cotype=ctype;
while (fgets(string,MatchMaxLen,fp1))
{   
        if( strlen( string ) == 0 ) 
            continue;
    str=string;
    if (str == NULL) 
        continue; 
    if( strlen( string ) == 1 ) continue;   
    //printf("%s",string);

    str2=string2;
    if(strstr(str,"<!--")) 
    {
        while(!strstr(str,"-->"))
        {
        fgets(str2,3000,fp1);
        strcat(str, str2);
    //delete useless char
    //printf("%s\n",str2); 
        }
    continue;
    }
    if(!(pem=strstr(str,"element name=\""))&&!strstr(str,"complexType name=")) continue;

    /*while(match(str))
    {*/
        fgets(str2,3000,fp1);
        if(strstr(str2,"annotation>"))
        {
            do{ fgets(str2,3000,fp1);}while(!strstr(str2,"</xs:annotation>"));
            fgets(str2,3000,fp1);
        }

        if(strstr(str,"complexType name=\""))
        {
            char* pt;
            pt=strstr(str,"complexType name=\"")+strlen("complexType name=\"");
    //if(strstr(str,"element name=\"")) pt=strstr(str,"element name=\"")+strlen("element name=\"");

            while(*pt!='"') *result++=*pt++;//if has complextype name, put it in cotype

            *result++=' ';
        }
        process(result,str,str2,fp1);
    }//}
    *result='\0';
    fputs(res,fp2 );
    //fputc('\n',fp2 );

    //printf("%s\n",ffblk.name);
    printf("2===%s\n",string);
    fclose(fp1);
    fclose(fp2);
}while(!_findnext(done,&ffblk));

_findclose(done);         

} 
```

有没有人可以帮我编写一个程序来实现这个功能？或者告诉我一个算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:20:50.187

由于实际上每个 XSD 内容模型都可以转换为 QNames 上的正则表达式，并且出于文档目的或更方便地推理复杂类型的目的，人们可能希望展示此 XSD，因此这个问题并不像堂吉诃德式或离题。一些受访者似乎倾向于怀疑。至少，不一定是堂吉诃德式的或离谱的。

但是，如果您提供更多关于您为什么要这样做以及您希望对结果做什么的背景知识，那么热情地帮助您解决这个问题会更容易。如果您想根据模式验证文档，那么通常最好使用现成的验证器。（编写自己的验证器而不是使用现成的工具总是很有趣，但是任何能够编写自己的 XSD 验证器的人都不需要帮助将 XSD 内容模型转换为类似正则表达式的符号，所以我推断那不是您的目标。）

但是足够的警告。如果您真的想这样做，无论出于何种原因，使用合适的面向 XML 的语言（如 XSLT），该任务在概念上是微不足道的。我附加了一个 XSLT 程序来说明一般方法；它在简单的情况下可以正常工作（据我测试过），但它忽略了使用真实模式所需的所有簿记和繁琐的细节。它不尝试处理复杂类型扩展、多命名空间模式文档或为另一个复杂类型本地元素定义的复杂类型。和您的示例一样，它从被翻译的复杂类型或封闭元素声明中获取命名正则表达式的名称，这意味着如果模式具有具有相同本地名称的类型和元素，它将遇到麻烦。

```
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                >

  <xsl:output method="text"/>

  <!--* Ignore anything that looks complicated *-->
  <xsl:template match="xsd:attribute 
                       | xsd:attributeGroup
                       | xsd:group
                       | xsd:schema/xsd:element[@type]
                       | xsd:notation
                       | xsd:annotation
                       "/>

  <!--* Ignore text nodes (otherwise the output will be
      * inundated with whitespace) *-->
  <xsl:template match="text()"/>

  <!--* Top-level elements with local complex types; those
      * we want to handle.
      *-->
  <xsl:template match = "xsd:schema/xsd:element[xsd:complexType]">
    <xsl:apply-templates/>
  </xsl:template>

  <!--* Aha!  A complex type whose content model we want to turn 
      * into a regular expression 
      *-->
  <xsl:template match = "xsd:element/xsd:complexType
                         [xsd:sequence | xsd:choice | xsd:all]">
    <!--* write out the name for the named regex *-->
    <xsl:value-of select="concat('&#xA;&#xA;',
                          @name, parent::xsd:element/@name, 
                          ' ')"/>
    <!--* write out the regex *-->
    <xsl:apply-templates/>
  </xsl:template>

  <!--* Simple recursive case:  we encounter a model group. *-->
  <xsl:template match = "xsd:sequence|xsd:choice|xsd:all">
    <!--* Parenthesize the group and handle its children. *-->
    <xsl:text>(</xsl:text>
    <xsl:apply-templates/>
    <xsl:text>)</xsl:text>

    <!--* Append *, ?, +, or {min, max}. *-->
    <xsl:call-template name="occurrence-indicator"/>

    <!--* If our parent has further children, 
        * append the appropriate connector. *-->
    <xsl:call-template name="connector"/>
  </xsl:template>

  <!--* An element in a content model. *-->
  <xsl:template match = "xsd:element[ancestor::xsd:complexType]">
    <!--* Write out the element's name.  We're lazy so 
        * we don't bother with a QName for a local element.
        * Also, we don't recur. *-->
    <xsl:value-of select="concat(@ref, @name)"/>

    <!--* Handle occurrence indicator and connect
        * just as for groups. *-->
    <xsl:call-template name="occurrence-indicator"/>
    <xsl:call-template name="connector"/>
  </xsl:template>

  <!--* Emit the appropriate occurrence indicator for
      * a group or element.
      * Use {min,max}, {min,}, or {n} notation for 
      * non-standard occurrence counts.
      *-->
  <xsl:template name="occurrence-indicator">
    <xsl:choose>
      <xsl:when test="(@minOccurs='1' or not(@minOccurs)) 
                      and 
                      (@maxOccurs='1' or not(@maxOccurs))">
        <xsl:text></xsl:text>
      </xsl:when>
      <xsl:when test="@minOccurs='0' 
                      and 
                      (@maxOccurs='1' or not(@maxOccurs))">
        <xsl:text>?</xsl:text>
      </xsl:when>
      <xsl:when test="@minOccurs='0' and @maxOccurs='unbounded'">
        <xsl:text>*</xsl:text>
      </xsl:when>
      <xsl:when test="(@minOccurs='1' or not(@minOccurs)) 
                      and 
                      @maxOccurs='unbounded'">
        <xsl:text>+</xsl:text>
      </xsl:when>
      <xsl:when test="@minOccurs=@maxOccurs">
        <xsl:value-of select="concat('{', @minOccurs,'}')"/>
      </xsl:when>
      <xsl:when test="@maxOccurs='unbounded'">
        <xsl:value-of select="concat('{', @minOccurs,',}')"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="concat('{', 
                              @minOccurs,
                              ',',
                              @maxOccurs,
                              '}')"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template name="connector">
    <!--* Emit the appropriate connector, if we need one. *-->
    <xsl:if test="following-sibling::*[self::xsd:sequence 
                  | self::xsd:choice 
                  | self::xsd:all 
                  | self::xsd:element]">
      <xsl:choose>
        <xsl:when test="parent::xsd:sequence">
          <xsl:text>, </xsl:text>
        </xsl:when>
        <xsl:when test="parent::xsd:choice">
          <xsl:text> | </xsl:text>
        </xsl:when>
        <xsl:when test="parent::xsd:all">
          <xsl:text> &amp; </xsl:text>
        </xsl:when>
      </xsl:choose>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

如果由于某种原因您不能或不会处理 XSLT 中的问题，那么您必须记住的是，您只需要对树进行正常的深度优先遍历（特别是模式文档规范中的 XML 树）内容模型），在适当的时间发出适当的括号和运算符。

*   在每个元素上，发出适当的 QName。
*   在每个组上，发出一个左括号，处理孩子，然后发出一个右括号。
*   在每个表达式（无论是元素还是组）之后，发出一个出现指示符：*、+、?、空字符串或计数运算符，如`{4}`、`{2,}`或`{0,4}`。
*   在任何两个兄弟表达式之间（即在每个具有右兄弟的表达式之后），发出一个适当的连接符：逗号、与号或或-bar。

我希望这有帮助。

# meteor - meteorJs 如何处理大数据集的同步？

> ID：12024827
> 
> 赞同：2
> 
> 时间：2012-08-19T07:01:55.490
> 
> 标签：meteor

我想知道meteorJs如何管理大数据集的同步。

假设我们绑定了 find 查询的结果，它返回一个 1000 到 10.000 条记录之间的变量数，每个记录有 10 个字段，find 查询一直根据用户的输入而变化，并且每次都会给出新的数据集！它有点极端，但它会帮助我理解。

那么流星怎么同步这个呢？它会一次发送它们吗（等待数据加载=> UI 反应性的延迟=> 对用户体验不太好）？或者将它们分成块并发送它们，用户会看到信息逐渐出现？

如果我们可以控制流量，你能指导一下吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:25:48.460

每个文档都在其自己的 DDP 消息中发送。DDP 是 Meteor 的数据协议，目前作为传输层位于 sockjs 之上。当用户第一次打开 Meteor 网页时，服务器会向他们发送他们订阅的所有数据。

稍后，随着数据的更新，Meteor 服务器会准确计算客户端知道哪些信息发生了变化，并且只发送不同部分的更新。

为了控制应用程序中的延迟，从项目中删除自动发布非常重要，并仔细决定将发布给客户端的游标，以便每个客户端只需要接收 Web 浏览器可能需要在下一分钟左右。

随着这一切的发生，客户端在收到每组更改后立即重新渲染。如果你想控制它，你可以设置一个控制渲染的会话变量，你可以从每个订阅的 onComplete 回调中设置它。

# java - java.util.concurrent 多线程

> ID：12024832
> 
> 赞同：0
> 
> 时间：2012-08-19T07:02:39.647
> 
> 标签：java, executorservice, future, java.util.concurrent, callable

我最近开始搞乱 java.util.concurrent，我希望有人能指出我的代码中的缺陷或坏习惯。

程序运行直到超时，然后输出所有已完成的任务。

*   在这种情况下我应该使用 ArrayList 吗？
*   是否有更适合此任务的类，它可能更线程安全。
*   任何建设性的批评都会有所帮助。

主班

```
public class ConcurrentPackageTests {

private final ExecutorService executor;

    public ConcurrentPackageTests() {
    executor = Executors.newFixedThreadPool(2);
    this.testCallable(4);
}

private void testCallable(int nInstances) {

    long startTime = System.currentTimeMillis();

    List<Future<Integer>>      futures = null;
    List<Integer>              results = null;
    ArrayList<exCallable>      callables = new ArrayList<exCallable>(nInstances);

    for (int id = 0; id < nInstances; id++) {callables.add(id, new exCallable(id,5));}  

    //get a list of the futures, monitor the futures outcome.
    try { futures = executor.invokeAll(callables, 5, TimeUnit.SECONDS);}
    catch (Exception e) { System.out.println("TIMED OUT");}

    executor.shutdown();    //Stop accepting tasks.

    System.out.println();

    results = getFValues(futures);  //gets all completed tasks
    printOutValues(results, startTime);

}

/**
 * get all integer values that terminated successfully.
 * @param e
 * @return Integer List of results
 */
private List<Integer> getFValues(List<Future<Integer>> e){
    final ArrayList<Integer> list = new ArrayList<Integer>(e.size());
    for (Future<Integer> f : e) {
        if(!f.isCancelled()){
            try {  list.add(f.get(1, TimeUnit.SECONDS));}
            catch (Exception e1) { System.out.println("Err");}      
        }
    }
    list.trimToSize();
    return list;
}

private void printOutValues(List<Integer> results, long startTime){
    for (Integer integer : results) {
        System.out.println("Result: " + integer);
    }   System.out.println("Time: "+ ( System.currentTimeMillis() - startTime ));
} 
```

可调用

```
public class exCallable implements Callable<Integer>{

private int n;
int result = 1;
final int ID;

public int getResult() {
    return result;
}

public exCallable(int ID, int pN) {
    this.ID = ID;
    this.n = new Random().nextInt(pN)+ 1;
}

@Override
public Integer call() throws Exception{

    for (int i = 0; i < n; i++) {
        result *= 2;
        Thread.sleep(500);  //Simulate work.
    }

    System.out.println("Computation<" + ID + ">2^"+n+"="+result);
    return result;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:00:37.340

*   在这种情况下我应该使用 ArrayList 吗？

执行器对这个集合所做的所有事情都是遍历它并将它们添加到自己的队列中。因此，几乎任何集合都应该这样做（如果您有数千个任务并使用迭代成本非常高的集合，那么这可能是一个问题，但这是一种非常罕见的情况！）。

*   是否有更适合此任务的类，它可能更线程安全。

我认为您选择的课程/方法很好。想不出更适合的班级。没有真正的“更多线程安全”的类。东西要么是线程安全的，要么不是线程安全的。最多有一些类使编写线程安全程序更容易。在这种情况下，我认为您将使用合适的抽象级别。

*   任何建设性的批评都会有所帮助。

（1）您应该避免像害虫这样的成员字段，并尽可能使用局部变量。在这种情况下，您可以创建`result`一个局部变量，所以您应该这样做。当您必须使用成员字段时，您应该非常努力地使它们不可变。在这种情况下，通过将它们都设置为最终字段，两者`ID`和都可以是不可变的。`n`

(2) 为每个任务创建一个新`Random`对象是 IMO 的一个很好的决定。如果你喜欢，你可以使用这个常见的优化：

```
ThreadLocal<Random> rng = new ThreadLocal<Random>(){
    @Override
    protected Random init(){
        return new Random();
    }
}; 
// afterwards...
Random r = rng.get(); 
```

万一`Random`您可能不会获得很多，但是当涉及昂贵的对象（例如 JAXB 解析器）时，这种优化可能非常有效。

# eclipse-rcp - 在 Eclipse 帮助中搜索 RCP 未返回任何结果

> ID：12024834
> 
> 赞同：3
> 
> 时间：2012-08-19T07:02:48.937
> 
> 标签：eclipse-rcp, eclipse-plugin

我有一个 RCP 应用程序，在菜单上启用了帮助。我能够成功地提出我创建的帮助。但是，当我输入搜索词时，没有返回任何结果。

启用从 Eclipse 帮助引擎搜索我的帮助内容需要什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:38:27.707

解决方法是使用帮助内容更新插件的版本号以重建索引。我依赖 .qualifier 但这不足以触发重建索引。更新版本后，搜索会返回所有新内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:33:11.953

您可以使用一个小的 RCP 示例检查问题是否仍然存在，如本[Vogel 的教程中所述](http://www.vogella.com/articles/EclipseRCPHelpSystem/article.html)

![帮助页面](../Images/0a67a8d6fb276e41e273a865f2f2e51c.png)

所需的插件是：

*   org.eclipse.help.ui
*   org.eclipse.help.webapp
*   org.eclipse.equinox.http.jetty

确保您的帮助内容格式正确（不像[错误 324854](https://bugs.eclipse.org/bugs/show_bug.cgi?id=324854)中的那样），并且没有与 webapp 的外部交互（如防火墙/防病毒），它将为您查询帮助搜索的结果。

# url - 如何从 URL 中隐藏 div ID

> ID：12024838
> 
> 赞同：2
> 
> 时间：2012-08-19T07:03:56.597
> 
> 标签：url, html, url-rewriting, hide

我需要知道一种隐藏或停止从 url 自动添加 div id 的方法。例如：- 当我单击指向内联部门“联系人”的链接时，我在浏览器中的网址显示[http://mysite.com/index.php#contact](http://mysite.com/index.php#contact)

相反，我希望它仅显示为[http://mysite.com/index.php](http://mysite.com/index.php)，即使我单击该链接也是如此。我希望我把问题说清楚了。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:32:03.553

片段标识符完全由客户端处理，它永远不会传递给服务器，因此您不能使用 URL 重写来隐藏它。

您的选择是：

*   链接到文档本身而不是特定元素。
*   上面加上添加 JavaScript，因此页面的*任何*访问者都将滚动到该 div
*   将 div 移到页面顶部
*   忍受它。它不能泄露任何秘密信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:08:10.727

假设您的 HTML 如下所示：

```
<a href="http://mysite.com/index.php#contact">Contact</a> 
```

将其更改为

```
<a href="http://mysite.com/index.php">Contact</a> 
```

如果锚标记是由某些 JS 框架设置的，您需要找出导致此问题的库或 JS 代码并将其禁用。

# java - 更改 JRadioButtonMenuItem 的选定点颜色

> ID：12024840
> 
> 赞同：5
> 
> 时间：2012-08-19T07:04:23.087
> 
> 标签：java, swing, radio-button, menuitem

我正在开发我的个人 Java 聊天客户端，它的一个功能是设置用户状态（可用、不可见、忙碌）。为了使其用户友好，我将这些状态放入`JMenu`with 中`JRadioButtonMenuItem`。

问题是我希望每个状态`RadioButton`都有自己的单选点颜色（或点图标）。例如：

*   [绿点] 可用
*   [红点] 忙
*   [灰点] 不可见。

我想`JRadioButtonMenuItem`用三种不同的自定义扩展`RadioButtonMenuItem`，但不明白`JRadioButtonMenuItem`是怎么画的。

谁能帮我解决这个问题？

**编辑 1**
感谢您提出与和方法`Icon`一起使用的建议。 但是，由于我的问题是关于更改无线电点，您能否帮我隐藏无线电点？`setIcon()``setSelectedIcon()`
`RadioButton`

**编辑 2**
这是我的应用程序的当前屏幕截图。
![MyIM 菜单栏截图](../Images/b073ad5ebf655d83a0e41c62b200e65a.png)
正如你所看到的，在那之前的那个点在`RadioButtonMenuItem`某种程度上是荒谬的废话。这就是为什么我想摆脱点，或将其更改为我的自定义图标:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T07:09:15.577

单选按钮的点由 UI 委托为每个外观呈现。你可以提供你自己的[`BasicRadioButtonUI`](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/basic/BasicRadioButtonUI.html)，但努力不是微不足道的。作为替代方案，实现接口，如此[处](https://stackoverflow.com/a/3072979/230513)`Icon`所示。`ColorIcon`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T07:27:20.570

我建议你使用 Swing Components 的 Icon 属性。这是为 JRadioButtonMenuItem 设置图标的示例。每当状态发生变化时，使用 seticon 方法来更改图标。使用图标代替颜色

这是一个示例[http://www.java2s.com/Code/Java/Swing-JFC/Anexampleofradiobuttonmenuitemsinaction.htm](http://www.java2s.com/Code/Java/Swing-JFC/Anexampleofradiobuttonmenuitemsinaction.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T18:31:49.243

我的想法是，JRadioButtonMenuItem 的行为很好，只是它的绘画有点傻。但我不想扩展它或覆盖油漆或任何那些恶作剧。所以我得出结论，只是偷它的行为，把它的画留在后面。

你会注意到`ButtonGroup`接受`AbstractButton`s，所以我喜欢地牢猎人的解决方案：使用常规`JMenuItem`s。我会附加它，窃取`JToggleButton`'s`ButtonModel`并发送一个`ItemListener`将进行图像交换的文件（如 Ramesh John 建议的那样）。

```
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.AbstractButton;
import javax.swing.ButtonGroup;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JToggleButton;

public class TestRadioCustomIcon {

    public static void main(String[] args){
        new TestRadioCustomIcon().go();
    }

    private void go(){
        JFrame frame = new JFrame("Foo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JMenuBar jmb = new JMenuBar();
        JMenu menu = new JMenu("Menu");

        JMenuItem i1 = makeFauxRadioMenuItem("Item 1");
        JMenuItem i2= makeFauxRadioMenuItem("Item 2");
        JMenuItem i3= makeFauxRadioMenuItem("Item 3");
        i1.setSelected(true);

        ButtonGroup bg = new ButtonGroup();
        bg.add(i1);
        bg.add(i2);
        bg.add(i3);

        menu.add(i1);
        menu.add(i2);
        menu.add(i3);
        jmb.add(menu);
        frame.add(jmb);
        frame.pack();
        frame.setVisible(true);
    }

    private ImageIcon selected = loadImage("C:\\path\\to\\image1.bmp");
    private ImageIcon deselected = loadImage("C:\\path\\to\\image2.bmp");
    private ItemListener il = new ItemListener(){
        @Override
        public void itemStateChanged(ItemEvent e){
            AbstractButton ab = (AbstractButton) e.getSource();
            switch(e.getStateChange()){
                case ItemEvent.SELECTED:
                    ab.setIcon(selected);
                    break;
                case ItemEvent.DESELECTED:
                    ab.setIcon(deselected);
                    break;
            }
        }
    }

    private ImageIcon loadImage(String filePath){
        try{
            BufferedImage bi = ImageIO.read(new File(filePath));
            return new ImageIcon(bi);
        } catch (IOException e){
            //sad day
            return null;
        }
    }

    private JMenuItem makeFauxRadioMenuItem(String label){
        JMenuItem item = new JMenuItem(label);
        //Make it think it's a RadioButton
        item.setModel(new JToggleButton.ToggleButtonModel());
        //When selection changes occur, swap icons
        item.addItemListener(il);
        //Assume deselected
        item.setIcon(deselected);
        return item;
    }
} 
```

这适用于任何旧图标，而不仅仅是更改按钮的颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-29T13:55:29.800

添加一个新类以`RadioButtonMenuItem`通过扩展来自定义`JRadioButtonMenuItem`.

通过实现 Icon 接口添加内部类以更新状态 Icon。覆盖所有`paintIcon()`方法用当前状态图标更新方法。

通过传递状态图标调用超类。

```
super(theMenuText, new StatusIcon(theStudyIcon, getUserStatus(UserId))); 
```

添加侦听器以获取最新事件以使用`setIcon()`方法更新图标。

# jquery - 如何在jquery中动态排序列表项？

> ID：12024841
> 
> 赞同：1
> 
> 时间：2012-08-19T07:04:30.763
> 
> 标签：jquery, list, listview, sorting

我的问题与我在 Stack Overflow 上发现的许多其他问题非常相似，但并不完全相同。

我的简单列表如下：

```
<div id="preview" style="border: 1px solid #000;">

    <ul>
        <li style="list-style: none; display: none;" id="list1" class="ui-state-default">
            <input type="radio" name="answer" id="answer1" value="a" />
            <label for="answer1" id="displayAnswer1"></label>
        </li>

        <li style="list-style: none; display: none;" id="list2" class="ui-state-default">
            <input type="radio" name="answer" id="answer2" value="b" />
            <label for="answer2" id="displayAnswer2"></label>
        </li>

         <li style="list-style: none; display: none;" id="list3" class="ui-state-default">
            <input type="radio" name="answer" id="answer3" value="c" />
            <label for="answer3" id="displayAnswer3"></label>
        </li>
    </ul>
</div> 
```

在变量named`'id'`中，值可能是随机顺序，
例如：id的第一个值可能是3，那么有`list3`id的li必须在列表视图的第一个位置，那么id的值可能是2，然后有`list2`id的li必须进来列表视图的第二个位置，那么最后 id 值可能是 1，那么具有`list1`id 的 li 必须位于列表视图的第三个位置。

我搜索了很多，但所有这些都是按字母顺序或其他类似的值排序的，它们并没有解决我的问题。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T07:27:50.470

```
​var ids = [3, 1, 2];

var items = $("#preview li").remove();
$.each(ids, function(index, id) {
    $(items).filter("li[id='list" + ids[index] + "']")
        .appendTo($("#preview ul"));
}); 
```

请参阅[jsFiddle](http://jsfiddle.net/QsxPX/4/)。

​</p>

# seo - 搜索引擎是否会因使用不正确的顶级域而受到惩罚？

> ID：12024845
> 
> 赞同：-2
> 
> 时间：2012-08-19T07:05:01.940
> 
> 标签：seo

我正在建立一个以 .me 结尾的网站，尽管它与黑山无关。

搜索引擎会因此重罚我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:30:20.403

绝对不。有很多网站使用 .me 域，与黑山无关，并且包含对全球受众有用的信息。这也适用于 .co.uk 和 .de 以及许多其他域名。

搜索引擎知道这一点，因此在其排名算法中假设 TLD 会指示该特定区域的本地化内容是愚蠢的。

# mysql - 加入4个mysql表的方法

> ID：12024847
> 
> 赞同：2
> 
> 时间：2012-08-19T07:05:21.120
> 
> 标签：mysql, join

在 MySQL 中加入 4 个表以检索数据。

我需要加入 4 个表格的最佳方式：

**1\. 用户**

```
ID        NAME
1          me
2          you 
3          her 
```

**2.文章**

```
ID   USER_ID   ARTICLE
1       1         etc
2       1         etc
3       2         third 
```

**3.文章_评论**

```
ID    ARTICLE_ID    COMMENT    
1        1            etc
2        1            etc
3        3            etc 
```

**4.文章要点**

```
ID ARTICLE_ID   POINTS
1      1         100  
2      1         200
3      2          50 
4      2          10 
```

我需要一种方法来加入他们以检索：

```
ARTICLE | USERNAME | TOTAL COMMENTS PER ARTICLE | TOTAL POINTS PER ARTICLE 
```

例如：对于第 1 条：`etc | me | 2 | 350`
对于 2 ：`etc | you | 0 | 60`等等所有的一条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:33:25.653

```
SELECT
    Articles.ID,
    Articles.USER_ID,
    Articles.ARTICLE,
    Users.NAME,
    COUNT(Article_comments.ID) AS `num_comments`,
    SUM(Article_points.POINTS) AS `points`
FROM
    Articles
INNER JOIN
    Users
ON
    Articles.USER_ID = Users.ID
LEFT OUTER JOIN
    Article_comments
ON
    Article_comments.ARTICLE_ID = Articles.ID
LEFT OUTER JOIN
    Article_points
ON
    Article_points.ARTICLE_ID = Articles.ID
GROUP BY
    Articles.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:50:15.623

这也是我所做的，但不适用于有更多评论和点的记录。对于EX上面的询问，第1条将返回：

ID USER_ID ARTICLE NAME num_comments points 1 1 etc me 4 600

# python - Python 中 Selenium Webdriver 测试失败时的自动截图

> ID：12024848
> 
> 赞同：30
> 
> 时间：2012-08-19T07:05:50.070
> 
> 标签：python, selenium, webdriver, screenshot

如果我的 webdriver 测试失败（任何异常或断言错误），我想自动捕获屏幕截图。我正在使用 Python unittest 和 Selenium Webdriver。有没有人有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-19T13:12:01.320

在 Firefox 中做一些 webdriver 的东西......将任何异常的屏幕截图保存到过时的图像文件中：

```
from datetime import datetime
from selenium import webdriver

browser = webdriver.Firefox()

try:
    # do some webdriver stuff here
except Exception as e:
    print e
    now = datetime.now().strftime('%Y-%m-%d_%H-%M-%S')
    browser.get_screenshot_as_file('screenshot-%s.png' % now) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-16T19:42:03.547

另一种方法是将以下内容添加到您的`tearDown`方法中：

```
if sys.exc_info()[0]:
    test_method_name = self._testMethodName
    self.driver.save_screenshot("Screenshots/%s.png" % test_method_name) 
```

这将假设一个像这样的测试类：

```
class SeleniumTest(unittest2.TestCase):
    ...

    def tearDown(self):
        if sys.exc_info()[0]:
            test_method_name = self._testMethodName
            self.driver.save_screenshot("Screenshots/%s.png" % test_method_name)
        super(SeleniumTest, self).tearDown()

    def test_1(self):
        ...

    def test_2(self):
        ... 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-03-15T15:33:14.870

供未来参考/这里的人是一个在 Python3 中工作的解决方案，它既适用于异常，也适用于失败的断言。

（基于[https://stackoverflow.com/a/23176373/9427691](https://stackoverflow.com/a/23176373/9427691)）

```
#!/usr/bin/env python

"""
An Example code to show the set-up with screen-shot on exception.
"""

import unittest
from selenium import webdriver

class TestDemo(unittest.TestCase):
    """An Example test Case, to show off the set-up of a screen-shot on exception."""

    def setUp(self):
        """Set up the Firefox Browser and the Tear Down."""
        self.driver = webdriver.Firefox()
        self.driver.delete_all_cookies()
        # NOTE: In addCleanup, the first in, is executed last.
        self.addCleanup(self.driver.quit)
        self.addCleanup(self.screen_shot)
        self.driver.implicitly_wait(5)

    def screen_shot(self):
        """Take a Screen-shot of the drive homepage, when it Failed."""
        for method, error in self._outcome.errors:
            if error:
                self.driver.get_screenshot_as_file("screenshot" + self.id() + ".png")

    def test_demo(self):
        """A test case that fails because of missing element."""
        self.driver.get("http://www.google.com")
        self.driver.find_element_by_css_selector("div.that-does-not-exist")

    def test_demo2(self):
        """A test case that fails because assert."""
        self.driver.get("https://stackoverflow.com")
        self.assertEqual(True, False)

if __name__ == '__main__':
    unittest.main(verbosity=2) 
```

这

> self._outcome.errors

仅限 Python3，因此适用于 Python2

> self._outcomeForDoCleanups.errors

反而。

对于那些只想要异常屏幕截图的人。你应该看看这个链接：[http ://blog.likewise.org/2015/01/automatically-capture-browser-screenshots-after-failed-python-ghostdriver-tests/](http://blog.likewise.org/2015/01/automatically-capture-browser-screenshots-after-failed-python-ghostdriver-tests/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-29T16:50:31.480

这是一个使用装饰器的解决方案，该装饰器将类上的每个方法包装起来，该类`test_`以包装器开头，如果方法引发和异常，该包装器会截取屏幕截图。用于告诉装饰器`browser_attr`如何获取网络浏览器（驱动程序）。

```
from functools import partialmethod

def sreenshotOnFail(browser_attr='browser'):
    def decorator(cls):
        def with_screen_shot(self, fn, *args, **kwargs):
            """Take a Screen-shot of the drive page, when a function fails."""
            try:
                return fn(self, *args, **kwargs)
            except Exception:
                # This will only be reached if the test fails
                browser = getattr(self, browser_attr)
                filename = 'screenshot-%s.png' % fn.__name__
                browser.get_screenshot_as_file(filename)
                print('Screenshot saved as %s' % filename)
                raise

        for attr, fn in cls.__dict__.items():
            if attr[:5] == 'test_' and callable(fn):
                setattr(cls, attr, partialmethod(with_screen_shot, fn))

        return cls
    return decorator

@sreenshotOnFail()
class TestDemo(unittest.TestCase):
    def setUp(self):
        """Set up the Firefox Browser and the Tear Down."""
        self.browser = webdriver.Firefox()

    def test_demo2(self):
        """A test case that fails because assert."""
        self.driver.get("https://stackoverflow.com")
        self.assertEqual(True, False) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-12T08:40:05.923

您可以开始探索`self._outcome.errors[1]`在哪里可以找到有关错误的信息。
即下面的代码仅适用于断言错误

```
 def tearDown(self):
        if self._outcome.errors[1][1] and hasattr(self._outcome.errors[1][1][1], 'actual'):
            self.driver.save_screenshot(self._testMethodName + '.png') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-08T08:47:05.003

```
try:
   page2.fill_up_company_info()
except Exception as e:
   with pytest.raises(WebDriverException):
            pytest.fail( f"{e} for error message",       
allure.attach(self.driver.get_screenshot_as_png(),name="screenshot",attachment_type=AttachmentType.PNG)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-05T18:19:44.107

对于我的类中的 Django 2.2.2（使用 unittest）进行硒测试，它继承自 StaticLiveServerTestCase，我已经覆盖了 _feedErrorsToResult 方法。此外，这种方法提供了一种棘手的方法来了解被调用方法的名称，以便进行方便的屏幕截图调查。

```
@classmethod
def _feedErrorsToResult(cls, result, errors):
    """
    Overriding private method at %library root%/Lib/unittest/case.py
    so you can take screenshot with any failed test and find name of the method
    """
    if SELENIUM_TAKE_SCREENSHOTS:
        for test, exc_info in errors:
            if exc_info is not None:
                now = datetime.now().strftime('%y-%m-%d_%H-%M-%S')
                test_name = exc_info[2].tb_frame.f_locals["test_case"]._testMethodName
                # noinspection PyUnresolvedReferences
                cls.selenium.get_screenshot_as_file('%s/%s-%s-%s.png' % (SELENIUM_SCREENSHOTS_PATH, cls.__name__, test_name, now))
    # noinspection PyUnresolvedReferences
    super()._feedErrorsToResult(cls, result, errors) 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-04-04T03:10:54.943

对我来说帮助这个解决方案：

```
def teardown_method(self, method):
    """Driver elimination"""
    if sys.exc_info():
        allure.attach('screenshot', self.driver.get_screenshot_as_png(), type=AttachmentType.PNG)
    self.driver.quit()
    pass 
```

# jquery - jQuery 无法处理附加内容

> ID：12024852
> 
> 赞同：0
> 
> 时间：2012-08-19T07:06:15.290
> 
> 标签：jquery, dom, append

在 jQuery 中，我如何加载生成的 HTML 并对它进行一些操作？

首先：从另一个页面加载我的 HTML：

```
$.post("my_page.php?operation=show_data&session=<?php echo SESSION_UUID;?>", 
        function(data){
            $("#data-table").empty().append();
        }
    ); 
```

现在，我不能执行以下操作：

```
//the .preview-table is in the appended HTML
$(".preview-table").dataTable( {}); // this is a plugin jQuery plugin 
```

是的，我读过我可以使用 .live() 但它只适用于事件......

如何将插件正确加载到选择器？

**数据表插件：[http ://datatables.net/](http://datatables.net/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T07:09:58.090

```
$.post("my_page.php?operation=show_data&session=<?php echo SESSION_UUID;?>", 
        function(data){
            $("#data-table").empty().append(data);

            // now that the elements have been replaced,
            // re-initialise plugin
            $(".preview-table").dataTable(options);
        }
    ); 
```

# tcl - TCL中的阶乘

> ID：12024853
> 
> 赞同：0
> 
> 时间：2012-08-19T07:06:20.790
> 
> 标签：tcl

由于我是 TCL 的新手，所以需要一些帮助。

需要为任何给定数字（假设为 10）的阶乘、平方根、平方、立方和立方根编写程序。不使用键，例如：sqrt。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:23:35.210

这些操作中的大部分都可以通过`**`操作符完成：

```
set x 7
set square [expr { $x ** 2 }]
set square_root [expr { $x ** (1.0 / 2) }]
set cube [expr { $x ** 3 }]
set cube_root [expr { $x ** (1.0 / 3) }] 
```

可以通过[多种方式](http://rosettacode.org/wiki/Factorial#Tcl)计算阶乘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T05:23:51.633

阶乘的递归实现：

```
proc fac {n} {
    if { $n == 0 } {
        return 1
    } else {
        return [expr {$n*[fac [expr {$n-1}]]}]
    }
} 
```

还有一个迭代版本：

```
proc fac {n} {
    set result 1
    for { set i 1 } { $i <= $n } { incr i } {
        set result [expr {$result * $i}]
    }
    return $result
} 
```

# android - 如何在 Android 中以睡眠模式运行服务

> ID：12024856
> 
> 赞同：1
> 
> 时间：2012-08-19T07:06:52.090
> 
> 标签：android

我写了一个安卓服务，它每 5 分钟搜索一次 GPS。我在服务中使用了一个计时器。但是当手机处于睡眠模式时，此计时器不会运行。

手机处于睡眠模式时不能运行服务吗？我怎样才能克服这个问题？请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:04:47.573

`Service`我建议您不要使用 a ，而是看一下该`AlarmManager`课程。根据您要实现的目标，这可能是更好的方法。使用`AlarmManager`您可以安排要在给定时间点执行的任务（一段代码）。当您设置闹钟时，您可以将其设置为`RTC_WAKEUP`在设备处于睡眠状态时将其唤醒并运行与闹钟相关的代码的模式。

在这里查看更多详细信息：http: [//developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

# c++ - 将 boost::asio io_service 用于具有周期性任务的线程池？

> ID：12024857
> 
> 赞同：0
> 
> 时间：2012-08-19T07:06:54.503
> 
> 标签：c++, boost, threadpool, boost-asio

我找到了使用 boost 创建线程池的方法：http: [//think-async.com/Asio/Recipes](http://think-async.com/Asio/Recipes)。我让它运行并且它有效。但是，我有任务发生，比如说，所有 50 毫秒。

现在，一种解决方案是占用一个线程，每 50 毫秒将此类任务添加到线程池，即添加到 io_service。如果没有额外的线程，我真的无法想到如何做到这一点。有人可以试试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:45:35.510

一种方法是使用`deadline timer`（参见[http://www.boost.org/doc/libs/release/doc/html/boost_asio/tutorial/tuttimer2.html](http://www.boost.org/doc/libs/release/doc/html/boost_asio/tutorial/tuttimer2.html)）。

但是，这取决于您的`io_service`. 例如，如果您将相对较快的功能安排到`io_service`，那么您绝对应该使用`deadline_timer`. 但是，如果您安排非常长的任务并要求此周期性超时处理程序或多或少地以相等的间隔执行，您有两种可能性：

1.  提供足够的线程（多个线程可以同时调用`io_service::run()`方法，与链接中的示例完全相同）

2.  在专用线程中处理您的计时器

# ios - 更改 UITableView 中的 UINavigationBar 高度

> ID：12024858
> 
> 赞同：0
> 
> 时间：2012-08-19T07:07:32.130
> 
> 标签：ios, uitableview, uinavigationcontroller

我正在尝试更改我的 NavigationController 中 UINavigationBar 的高度，该高度位于我的表格视图应用程序中的 UITableViewController 之前。我通过在 TableViewController 的 ViewDidLoad 中使用以下代码成功地做到了这一点：

```
self.navigationController.navigationBar.frame = 
    CGRectMake(0.0, 0.0, 320.0, 100.0); 
```

现在的问题是表格没有向下移动，而是被新扩展的导航栏覆盖——至少是它的第一行。

![看起来像这样](../Images/dbce536ada208f0e9099197223e4b8fe.png)

有什么想法可以将表格的顶部向下重新定位，还是我没有正确调整导航栏的大小？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:01:08.480

您可以将`.prompt`导航栏的设置为 @" " ...不是最优雅的解决方案，也不是很灵活，但它可以工作

# android - expandableListView android标题背景

> ID：12024865
> 
> 赞同：1
> 
> 时间：2012-08-19T07:09:17.767
> 
> 标签：android, expandablelistview

只是想知道如何在扩展时更改可扩展列表视图中标题的背景（标题）。

我不想以编程方式进行，而是更多地使用选择器或任何 XML 属性。

所以问题：有没有办法知道何时扩展标题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:17:20.280

只是像这样为我的标题设置一个drawable

```
android:background="@drawable/expandable_list_headers" 
```

然后创建一个自定义可绘制对象来更改背景，如下所示：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:drawable="@color/LightBlue" android:state_pressed="true"/>
<!-- pressed -->
<item android:drawable="@color/LightBlue" android:state_focused="true"/>
<!-- focused -->
<item android:drawable="@color/LightBlue" android:state_selected="true"/>
<!-- selected -->
<item android:drawable="@color/LightBlue" android:state_expanded="true"/>

<item android:drawable="@color/White" android:state_expanded="false"/>
<item android:drawable="@color/White"/>
<!-- default --> 
```

# cordova - PhoneGap 刷新 div

> ID：12024866
> 
> 赞同：1
> 
> 时间：2012-08-19T07:09:33.193
> 
> 标签：cordova

嗨，我在上面的电话间隙中有代码。当我将列表附加到一个 div 中时。当我将该附加列表放入 id 时，我的滑块不会刷新。有没有人知道如何解决这个问题滑块是动态的。未修复。

```
<script>
    document.addEventListener("deviceready",getValue, false);

    function getValue() {
        var id = 0;
        var querystring = location.search.replace( '?', '' ).split( '&' );
        for ( var i=0; i < querystring.length; i++ ) {
            var name = querystring[i].split('=')[0];
            var value = querystring[i].split('=')[1];

            if(name == 'id') {
                var FoodID = value;
            }
        }

        var datastring ='&ID='+FoodID;
        alert(datastring);

        $.ajax({
            type:'POST',
            url:SITE_URL+'profile_foodprefs_settings.php',
            data:datastring,
            success:function(msg) {
                var data = $.parseJSON(msg);
                var rs = data.result;
                var j=0;
                for(j=0;j<rs.length;j++) {
                    var Name = rs[j].Name;
                    var ID = rs[j].ID;
                    var SelectID = rs[j].SelectID;

                    $("#toggleswitch"+ID+" option[value="+SelectID+"]").attr('selected','selected');
                    $("#food_detail").append('<div class="list_detbk" style="height: 65px!important;"><div class="top_toggle2"><div class="list_hdtxt"><label class="top_header2" style="padding-left: 12px;"><br />'+Name+'</label></div><div class="tglpos1"><select onclick="exclued_food('+ID+');"  name="toggleswitch1" id="toggleswitch'+ID+'" data-theme="a" data-role="slider" class="slider_refresh"><option value="0">No</option><option value="1">Yes</option></select></div></div></div>');
                }
            }
        });
    }
</script>
<body>
    <div data-role="page" id="profile_foodprefs_settings">
        <div data-theme="a" data-role="header" data-position="fixed">
            <h3>
                Proteins
            </h3>
            <a data-role="button" onclick="navigator.app.backHistory();" data-rel="back" data-theme="b">
                Cancel
            </a>
            <a data-role="button" data-theme="c" onclick="save_food_prefrences();" class="corner5" style="margin-top: -1px;">
                Save
            </a>
        </div>    
        <div style="float:left;margin:30px 0 15px 23px;">*Low-Fat Protein</div>
        <div class="hdtxt_rt">Include?</div>
        <div class="clear"></div>            
        <div id="content_refresh" data-role="content">
            <fieldset data-role="controlgroup" id="food_detail" style="margin-top:-10px;">
            </fieldset>
        </div>
    </div>
</body> 
```

# php - 如何更改文件 mime 类型以绕过 php shell 上传？

> ID：12024869
> 
> 赞同：-9
> 
> 时间：2012-08-19T07:10:34.190
> 
> 标签：php, linux, security, shell

我正在测试我的朋友网站。它只允许在上传脚本中上传 jpeg。检查是这样完成的，运行以下脚本

```
file --mime-type --brief filename 
```

仅当这使 image/jpeg 允许上传时。我怎样才能上传一个php？基本上我需要欺骗这种 mime 类型？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T07:30:26.673

我没有给你一个可行的解决方案，而只是一个提示：JPEG 格式由不同的部分组成，有些是必需的，有些是可选的。在这些可选部分中，一些允许存储任意数据。

如果您设法更改现有 JPEG 图像的这样一部分或添加一个并将您的 PHP 代码放入其中，您将拥有一个嵌入 PHP 代码的 JPEG 图像，该图像应该被识别为正确的 JPEG 图像。然后，您所要做的就是调用该代码。

# php - 在为 Joomla 1.5.26 修复 Virtuemart 1.1.9 的 Flex2 运输模块中的错误时出现 PHP 范围问题

> ID：12024870
> 
> 赞同：1
> 
> 时间：2012-08-19T07:10:35.663
> 
> 标签：php, joomla, scope, virtuemart, shipping

**背景**

当前免费的 Flex2 运输模块存在一个错误，该错误会导致对运输金额的税收计算不正确。该错误导致所有计算中都使用国内税率，即使货物是国际的。另外，我正在尝试扩展模块的功能。

在目前的形式中，Flex2 允许为国内和国际销售独立设置运费。但是，税率可能仅为每个变体的特定值（即国内的一种税率，国际的一种税率）。

我的祖国（加拿大）要求在国内市场适用不同的税率，具体取决于我要运送到哪个省份。我敢肯定还有其他国家/司法管辖区有类似的要求。我已经能够成功更改管理屏幕以允许设置一个指标，该指标允许基于 VirtueMart TAX_MODE 值的可变税率（根据商店位置、买家位置或欧盟区域选择不同的税率） ）。

**问题 - 在没有参数的情况下将信息从“A”类传递到“B”类**

结账时出现问题。VirtueMart 的结账模块包含在文件 ps_checkout.php 中。函数“calc_order_shipping”以以下代码片段开头：

`function calc_order_shipping( &$d ) {`

 ````
 $auth = $_SESSION['auth'];

    $shipping_total = $this->_SHIPPING->get_rate( $d );
    $shipping_taxrate = $this->_SHIPPING->get_tax_rate(); 
````  `这是“核心”VirtueMart 系统的一部分，所以我不想修改它。

第一个函数调用从数组“$d”中提取运费总额（即在结帐过程开始时执行的税收计算的结果）。第二行旨在检索用于进行此计算的税率。所有运输模块的当前实现是返回静态税率。正如你所看到的，数组“$d”没有被传递给第二个函数，所以我没有足够的信息来确定客户是外国的还是国内的（这个信息可以从送货地址信息中得出，即$d 数组的一部分）。

不幸的是，在我要求 Flex2 可变税率之前，每个国内/国际区域只允许一个税率 - 这是在配置运输模块期间手动设置的。因此，价值“改变”是不可能的。可以（过去）从运输模块的静态配置文件中简单地提取税率。但是，对于我新需要的功能，我可能需要在结帐期间更改税率（基于购物者可能选择默认地址以外的送货地址的可能性）。

**“B级”的详细信息**

这两个函数都驻留在同一个源代码文件中：flex2.php，在类 flex2 中。

为了完整起见，这里是这两个函数的代码：

`function get_rate( &$d ) {`

 ````
 $shipping_rate_id = $d["shipping_rate_id"];
    $is_arr = explode("|", urldecode(urldecode($shipping_rate_id)) );
    $order_shipping = (float)$is_arr[3];

    return $order_shipping;

}

function get_tax_rate() {

    /** Read current Configuration ***/
    require_once(CLASSPATH ."shipping/".__CLASS__.".cfg.php");

    if( intval(FLEX2_TAX_CLASS)== 0 ) {
        return( 0 );
    }
    else {
        require_once( CLASSPATH. "ps_tax.php" );
        $tax_rate = ps_tax::get_taxrate_by_id( intval(FLEX2_TAX_CLASS) );
        return $tax_rate;
    }
} 
````  `Flex2 中的“bug”（不是本题的主题）在于参数“FLEX2_TAX_CLASS”仅与国内运输相关。国际运输的相应参数“FLEX2_TAX_CLASS **_I ”未在任何地方引用。**为了确定是使用国内版本还是国际版本的变量，我必须检查存储在 $d 数组中的送货地址。

**要克服的挑战 - 也就是这篇文章的原因**

所以，这是我的问题...

有什么方法可以定义对 $d 的引用，其具有相对于类的全局范围；然后修改“get_rate”函数，以便将其 $d 输入数组的副本存储在这个类范围的引用变量中，以便可以在“get_tax_rate”函数中引用？如果可能的话，定义类范围变量的正确语法是什么，将 &$d 的值分配给该变量，以及从“get_tax_rate”函数访问新创建的变量的正确语法是什么？

我之前研究过一些关于 PHP 变量作用域的通用问题，并找到了一些似乎是正确的答案，但我不敢在没有得到更具体建议的情况下尝试它们，因为我找到的答案没有解决函数“x”的特定要求*从不同类中的函数*“通过引用”接收变量，并创建一种允许函数“y”也通过引用从同一数组中检索（和更新）信息的方式。

这是我在这个论坛上的第一个问题，我想尽可能具体地提出我的要求。感谢您的任何帮助。

PS 一旦我解决了这个问题，我将把“增强的”Flex2 运输模块作为非商业附件提交给 Joomla/Virtuemart 社区。我希望 Flex2 组件的原作者能够继续支持它，因为我对 PHP 的了解并没有达到应有的水平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:00:17.397

我还没有找到所提出的技术问题的答案，但我发现了解决业务问题的可行解决方法。

VirtueMart 中的 php_checkout 模块执行许多函数，其中一些（如上面的两个函数）调用来自不同类的函数。

我在 php_checkout.php 文件中发现了一个代码片段，它显示了一些承诺。如下图供参考：

 `````
 // Export the order_id so the checkout complete page can get it
    $d["order_id"] = $order_id;

    /*
     * Let the shipping module know which shipping method
     * was selected.  This way it can save any information
     * it might need later to print a shipping label.
     */
    if( is_callable( array($this->_SHIPPING, 'save_rate_info') )) {
        $this->_SHIPPING->save_rate_info($d);
    } 
````  `显然，ps_checkout.php*可能*包含对运输模块中函数“save_rate_info”的调用。目前，“flex2.php”文件中不存在此代码。但是，如果要添加它，我将有机会使用我想要传递给结帐模块的信息来更新“$d”数组，而无需直接在“get_tax_rate”函数中进行。

我仍然希望收到我最初提出的技术问题的答案，但我希望这项工作可以帮助那些在将可变税率应用于运费方面遇到类似问题的人。````

# javascript - javascript等待子窗口中 的新页面加载

> ID：12024872
> 
> 赞同：1
> 
> 时间：2012-08-19T07:10:38.183
> 
> 标签：javascript, oauth

我正在使用 javascript 进行 oAuth。为此，我打开一个带有授权 url 的新窗口，然后在这个新窗口中用户进行身份验证，并且该窗口加载了具有 access_token 的页面。

现在我想从原始窗口访问这个令牌。所以基本上我想等到用户授权并且在打开的窗口中加载新页面（带有 access_token），然后访问它。如何做到这一点

```
authWin=window.open('https://login.salesforce.com/services/oauth2/authorize?   response_type=token&client_id=3MVG9Y6d_Btp4xp4VNFwdCLxJdMbnQrg44lVcvrLG5Qjp3serQQunkCgdS1bYXMSYDQhiSWazvF_J7oVZ9dBw&redirect_uri=sfdc://success','','width=500,height=300');

//code which is not working
while(true){
    var uri = authWin.document.URL;
    if(uri.indexOf('AuthorizationPage')!=-1){
       alert('now I can get access_token');
       break;
    }
 }
 //I know while(true) locks the system,but please provide alternative for this 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-23T08:22:49.117

您可以使用 setInterval() 执行此操作

```
var timerId = setInterval(function () {

            if (typeof(authWin.opener) === 'object') { //if user closed authWin stop awaiting auth
                try {
                    var tokenUri = authWin.location.pathname; //this throwing a error while user not on the same domain(see "same origin policy"), we catch exception and processing like awaiting user back
                    clearInterval(timerId); //when user get back after remote auth on our domain we again have access to authWin properties

                    var token = tokenUri.replace(/\/#access_token=(.+?)&.+/, '$1'); //parsing token from uri
                    authService.saveAuthToken(token);
                    authWin.close();

                    //do something ...
                }
                catch (err) {
                    console.log('waiting for user back');
                }
            }
            else {
                clearInterval(timerId);
            }

        }, 2000); 
```

# java - 如何从 JSP 中的 jar 文件中调用方法？

> ID：12024875
> 
> 赞同：2
> 
> 时间：2012-08-19T07:11:03.753
> 
> 标签：java, jsp

我有 Java 程序，因为我有数据库连接，并且很少调用方法来运行 SQL 查询。我使用 Apache ANT 为该 java 文件生成了 jar 文件。现在我在我的 JSP 中导入了那个 jar 文件。现在如何`executeQuery(String sql)`从该 Java 文件中存在的该 jar 文件调用方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T02:59:59.680

为了`.jars`在您的 web 应用程序中使用 external，这些`JARs`必须放在`WEB-INF/lib`文件夹下，并且您要调用一个方法 -`executeQuery(String sql)`在`XXXXX`类中定义。

如果该类型`XXXX`是`public`并且

1.  `XXXX.executeQuery(param)`方法 executeQuery(String sql) 是 public static 然后通过语法调用该方法；
2.  如果它是一个`public`实例方法，则创建一个`XXXX`类型的对象并调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T07:47:22.253

为什么要导入一个单独的 jar 文件来执行这个你应该使用

[**SQL 标记库**](http://www.roseindia.net/jstl/insert-data-SqlJstlTag.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:31:09.813

首先将您的外部 .jar 放入应用程序的 lib 文件夹（**WEB-INF/lib**），然后您只需使用 jsp 的导入标记导入要使用的 jar 文件的类或包。

```
<%@ page import="yourPackage.ClassName" %> 
```

现在您可以像在简单的 java 程序中一样简单地在该类的对象上调用您的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T07:18:50.950

您不应该在 JSP（表示层）中这样做，但如果您真的想要，您必须在 JSP 中使用以下行导入类/类：

```
<%@ page import="package1.myClass1,package2.myClass2,....,packageN.myClassN" %> 
```

# widget - Linkedin Like Box 小部件与面孔？

> ID：12024877
> 
> 赞同：0
> 
> 时间：2012-08-19T07:11:28.180
> 
> 标签：widget, linkedin

我搜索 Linkedin Like Box。它应该类似于 FB like box。我的意思是分享按钮+面孔。但我找不到这个小部件或代码。

您是否有带有面孔的 Linkedin 共享小部件（如框）的示例，或者这是我的错觉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:33:29.017

LinkedIn 没有预先构建的“喜欢”框 -[这些都是可用的插件](https://developer.linkedin.com/plugins)。您需要使用[LinkedIn API](https://developer.linkedin.com/rest)并从头开始构建一个。

# node.js - 使用 node.js 监控更改（在数据库中）

> ID：12024885
> 
> 赞同：3
> 
> 时间：2012-08-19T07:14:05.347
> 
> 标签：node.js

首先，我必须声明，这更像是一个“策略”或“算法”之类的问题，我不确定它是否符合这里的规则。如果这是在错误的地方，请原谅我，如果是，请让我知道我应该在哪里提问。没必要敌对。

我也完成了我的研究（阅读诸如[Node.js - Monitoring a database for changes](https://stackoverflow.com/questions/6145826/node-js-monitoring-a-database-for-changes) or [Invoking a PHP script from a MySQL trigger](https://stackoverflow.com/questions/1467369/invoking-a-php-script-from-a-mysql-trigger/1467405#1467405)之类的问题），但找不到真正满意的答案，所以......

我的场景：我在一个储备拍卖网站工作。产品的价格设置为 100 美元，在拍卖期间（5 分钟到 10 分钟），价格将随机下降（多次）至随机数量。这些随机的数量和时间其实都是卖家一开始就预设好的。

会有很多买家/观察者，我们需要在价格下跌时用实时价格更新他们。我一直在考虑不同的选择： 1\. 我可以使用 node.js 来查看某些文件（每个产品都会有一个文件，其中只包含该产品的当前价格，我们将简单地使用 cron 来更新这些文件？） 2或者，既然我们事先已经知道价格何时会发生变化，我们可以为每个产品设置一个“计时器”，在特定时间唤醒并通知所有观看它的用户？

我认为也可能有一些更好的方法，这就是为什么我想在这里发布它，希望有人已经做过类似的事情可以对我有所启发*_*

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:06:23.880

这是一个什么样的数据库？如果是 CouchDB，您可以查看[_changes 提要](http://guide.couchdb.org/draft/notifications.html)并准确了解更改的时间。如果这些买家使用网络浏览器，他们将更容易与此提要同步。

如果它是另一种没有更改提要的数据库，则应使用 Pub/Sub 并在更新价格后立即发布到渠道。然后您在另一端收听，如果买家在网页上，您可以使用 WebSocket 更新他们的视图。Trello 的基础设施或多或少是这样的（Redis 用于 Pub/Sub，然后它们在订阅中挂钩 Web 套接字以将更新带到网页）。

我认为这些是实时进行的唯一方法。监听事件。每 x 毫秒检查一次是否有变化（又名轮询）不是实时的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:29:18.247

最简单的方法是提前获取这些日期并在页面加载时将它们发送给客户端，然后在客户端设置计时器。如果您对安全性要求严格，则可以只发送时间，并让客户端仅在即将显示价格时才获取价格。如果两者都不是，您可以定期轮询服务器，或者，如果您可以将数据推送到客户端，我会使用服务器上的计时器方法。

# c# - NumericUpDown 允许用户键入大于最大值的数字

> ID：12024886
> 
> 赞同：6
> 
> 时间：2012-08-19T07:14:12.470
> 
> 标签：c#, textbox, max, minimum, numericupdown

我的班级中有一个*NumericUpDown*变量。*最小值*和最大值*设置*如下：

```
myNumericUpDown.Maximum = 9999;
myNumericUpDown.Minimum = 0; 
```

这可以防止旋转框超过 9999 或低于 0。

我遇到的问题是，当用户在文本框中键入时，他们可以键入任何大于或小于的任意数字*Maximum或**Minimum*。

*NumericUpDown*类中是否有一个属性可以控制文本框的最小值和最大值？还是我必须编写一个回调程序来检查这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T08:13:36.367

如果您在表单设计视图的属性窗格中设置属性，它将为您处理。如果用户输入 12000 并且您的最大值为 9999，则一旦控件失去焦点，控件就会下降到最大值 9999。它与负值相同。一旦控件失去焦点，它将自动变为 0。

如果您不希望用户能够输入超过 4 位数字，那么您可以只观看 KeyDown 事件。

```
 /// <summary>
    /// Checks for only up to 4 digits and no negatives
    /// in a Numeric Up/Down box
    /// </summary>
    private void numericUpDown1_KeyDown(object sender, KeyEventArgs e)
    {
        if (!(e.KeyData == Keys.Back || e.KeyData == Keys.Delete))
            if (numericUpDown1.Text.Length >= 4 || e.KeyValue == 109)
            {
                e.SuppressKeyPress = true;
                e.Handled = true;
            }
    } 
```

# machine-learning - 乘法滤波器或更标准的加法加权

> ID：12024888
> 
> 赞同：2
> 
> 时间：2012-08-19T07:14:49.070
> 
> 标签：machine-learning, artificial-intelligence, perceptron, weighted-average

我有几个功能可以投票决定某个数据项是否值得向我的用户展示。您可以将它们中的每一个视为 0 到 1 之间的数字，其中 1 表示它很好，0 表示不值得向我的用户展示。我刚刚做了一件非常标准的事情，即为每个属性选择一个权重并执行一个加权求和来确定一个单一的指标来做出决定（很像一个单一的感知单元）。

但是，有时不同的属性会相互压倒并产生不好的结果。我认为基本问题是真正的最优函数是相当非线性的，当然，这些加权和给出的唯一规则根据定义是线性的。为了解决这个问题，在加权和中被“压倒”的特征之一上，我用它来乘以整个单个指标。这使得这个重要的特性可以充当“看门人”——如果这个特性太低，它就可以阻止数据流出。

为了通过执行标准加权和来达到类似的效果，我必须使该特征的权重如此之高，以至于其他特征基本上没有发言权......基本上它回到了最佳规则的非线性，因为这个功能在某些范围内可能非常重要，但在其他范围内则不然。

我想知道关于使用一个特征来乘以这样的整个结果的知识是什么？加权和是最常用的东西（除了简单性）是否有特定的原因？

PS。一旦我有更多的数据，我可能会使用标准的机器学习技术来实际学习规则，但现在我正在对样本数据集进行手动训练。我现在要追求简单，同时仍在努力使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:14:27.087

你的问题真的很好。

你提到的是一个重要的问题。从理论和实践的角度来看都很重要：我应该如何使用我的功能来获得最佳结果？

让我举个例子，因为词性标注文档的来源是没有用的，因为无论文章来自（文章来源）[华尔街日报](http://www.wsj.com)还是来自[连线](http://www.wired.com)，大多数词的使用方式都是相同的。因此，像文章来源这样的功能对于使用你的术语来说是“过度强大的”。但有时你会得到一个像“监视器”这样的词，如果你知道它出现在哪里，你几乎就知道如何标记它（如果它来自 WSJ：动词，如果它来自连线：名词）。

乍一看，文档来源特征并不是一个有用的特征，但它是我们试图标记的单词的一个有用的元特征。在领域适应的行话中，它表征了领域。

对于此类问题，您要查看的一些关键字是：

*   [特征和元特征](http://jmlr.csail.mit.edu/proceedings/papers/v2/krupka07a/krupka07a.pdf)，
*   [领域适应](http://www.cs.utah.edu/~hal/docs/daume07easyadapt.pdf)，和
*   [迁移学习](http://web.engr.oregonstate.edu/~tadepall/mlrg/A%20Survey%20on%20Transfer%20Learning.pdf)

另一个有用的信息是线性分类器在捕捉这些交互方面特别糟糕，你甚至将其描述为非线性。如果可能的话，您至少应该使用二次或 RBF 或更复杂的东西，至少有希望捕获它。

# c# - 线程从一个按钮成功，但从另一个按钮不成功

> ID：12024891
> 
> 赞同：0
> 
> 时间：2012-08-19T07:15:17.687
> 
> 标签：c#, sql, multithreading, sqlite

我正在编写一个 C# 数据库程序，我想在其中实现一些线程。我在表单上有按钮，在该按钮中我启动了一个线程，它将数据从表单保存到数据库。

它工作得很好。线程代码：

```
T1 = new Thread((ThreadStart)delegate
{
   UlozHlasovanie();               
}); 
```

方法代码：

```
private void UlozHlasovanie()
    {
        string insert="insert into hlasovanie values (null, (select max(id) from VZ), '"+otazka+"')";
        var sql=new SQLiteCommand(insert,spoj);
        sql.ExecuteNonQuery();

        foreach (DataGridViewRow row in dataGridView2.Rows)//*
        {
            switch (row.Cells["rozhodnutie"].Value.ToString())
            {
                case "Za":
                    insert = "insert into hlasovanierec values (null, " + row.Cells["IDPODDET"].Value + " , (select max(id) from VZ), (select max(id) from hlasovanie), 1)"; 
                    break;
                case "Proti":
                    insert = "insert into hlasovanierec values (null, " + row.Cells["IDPODDET"].Value + " , (select max(id) from VZ), (select max(id) from hlasovanie), 2)"; 
                    break;
                case "Zdrzal sa":
                    insert = "insert into hlasovanierec values (null, " + row.Cells["IDPODDET"].Value + " , (select max(id) from vZ), (select max(id) from hlasovanie), 3)"; 
                    break;
            }                
            sql=new SQLiteCommand(insert,spoj);
            sql.ExecuteNonQuery();
        }              
    } 
```

现在的问题。当我从一个按钮调用它时，它可以完美运行。但是当我从另一个按钮（仍然在同一个表单上）调用它时，它会抛出这个（在 asterix 语句上）：

> *你调用的对象是空的。*

为什么它可以从一个按钮工作而不能从另一个按钮工作？以及如何使它从两个按钮都起作用？感谢您的任何回答

编辑：

调用有效的线程

```
private void button1_Click(object sender, EventArgs e)
    {
        T1 = new Thread((ThreadStart)delegate
        {
            UlozHlasovanie();               
        });

        switch (krok)
        {
            case 1:
                ...
                break;

            case 2:
               ...              
                break;

        ...

            case 5:
                panel1.Visible = false;
                panel2.Visible = false;
                panel3.Visible = false;
                panel4.Visible = false;
                panel5.Visible = false;
                panel6.Visible = false;
                panel7.Visible = true;

                T1.Name = "sd";
                T1.Start();
                //while (!T1.IsAlive); 

                panel1.Visible = false;
                panel2.Visible = false;
                panel3.Visible = false;
                panel4.Visible = false;
                panel5.Visible = false;
                panel6.Visible = true;
                panel7.Visible = false;

                button1.Visible = false;
                break;

        } 
```

非工作电话：

```
private void button11_Click(object sender, EventArgs e)
    {
        T1 = new Thread((ThreadStart)delegate
        {
            UlozHlasovanie();
        });
        T1.Name = "asd";
        T1.Start();
        //while (!T1.IsAlive);

        krok = 4;
        panel1.Visible = false;
        panel2.Visible = false;
        panel3.Visible = false;
        panel4.Visible = true;
        panel5.Visible = false;
        panel6.Visible = false;
        richTextBox1.Text = "";
        foreach (DataGridViewRow row in dataGridView2.Rows)
        {
            row.Cells["rozhodnutie"].Value = null;
        }
    } 
```

异常详情：

> System.NullReferenceException 未处理
> Message="对象引用未设置为对象的实例。"
> Source="urbar"
> StackTrace:
> at allin.noveVZ.UlozHlasovanie() in C:\Documents and Settings\ondro\My Documents\Dropbox\urbar\noveVZ.cs:line 485
> at allin.noveVZ.b__9() in C:\ Documents and Settings\ondro\My Documents\Dropbox\urbar\noveVZ.cs:line 506
> at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
> at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
> at System.Threading.ThreadHelper.ThreadStart()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:21:43.697

正如在评论中写LB，datagridview的列是空的。那是我的错误（下面的代码），我通过线程代码将比 ui-thread 代码执行得更快。添加while语句将处理这个问题，我在线程运行时加载了gif。

```
private void button11_Click(object sender, EventArgs e)
{
    T1 = new Thread((ThreadStart)delegate
    {
        UlozHlasovanie();
    });
    T1.Name = "asd";
    T1.Start();
    while (T1.IsAlive) { Application.DoEvents(); }
    krok = 4;
    panel1.Visible = false;
    panel2.Visible = false;
    panel3.Visible = false;
    panel4.Visible = true;
    panel5.Visible = false;
    panel6.Visible = false;
    richTextBox1.Text = "";
    foreach (DataGridViewRow row in dataGridView2.Rows)
    {
        row.Cells["rozhodnutie"].Value = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T07:25:37.847

您正在从另一个线程访问 UI，这是不允许的，尽管我见过它随机工作的情况。您可以通过调用 获取线程中的网格数据`Invoke`，但为了简单起见，您应该考虑在启动线程之前获取网格数据，并且只在线程中执行 sql 命令，这通常需要更多时间。

# c# - MS Access 2007 字符串条件表达式中的数据类型不匹配

> ID：12024898
> 
> 赞同：1
> 
> 时间：2012-08-19T07:17:09.933
> 
> 标签：c#, winforms, oledb

我在名为 shortNotes 的 Access 07 表中有三个名为 fileName、rowNo 和 rowText 的字段。当我运行这个插入查询时，它工作得很好：

thisCommand.CommandText = "插入shortNotes值('" + fName + "'," + rNo + ",'" + richTextBox2.Text +" |"+rNo+ "')";

但是当我添加参数时，它开始抛出这个错误：“标准表达式中的数据类型不匹配”

这是代码：

```
 dbCon = new OleDbConnection(MyconnectionString);
        dbCon.Open();
        thisCommand = new OleDbCommand();
        thisCommand.Connection = dbCon;

        thisCommand.Parameters.Add("@rowtext", OleDbType.BSTR);
        thisCommand.Parameters.Add("@file", OleDbType.BSTR);
        thisCommand.Parameters.Add("@rno", OleDbType.Integer);

        thisCommand.Parameters["@rowtext"].Value = richTextBox2.Text + " |" + rNo;

        thisCommand.Parameters["@file"].Value = fName;

        thisCommand.Parameters["@rno"].Value = rNo;

        thisCommand.CommandText = "insert into shortNotes values(@file,@rno,@rowtext)";
        thisCommand.ExecuteNonQuery();//Error 
```

这里file是memo，rno是number，rowtext是access 07中的memo数据类型。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:45:59.503

问题是 OleDb 不使用命名参数。

“OLE DB.NET Framework 数据提供程序使用标有问号 (?) 而不是命名参数的位置参数。”

[http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx)

检查那里的例子..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:50:01.853

猜测一下，这可能与您的列长度有关吗？您已将类型指定为字符串（以及备忘录）而不是长度 - 尝试使用采用可选参数作为长度的重载（[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa325932%28v=vs.71%29)）。例如，如果您的 Access 备注字段长度为 255 个字符：

```
thisCommand.Parameters.Add("@rowtext", OleDbType.BSTR, 255);
thisCommand.Parameters.Add("@file", OleDbType.BSTR, 255); 
```

我担心的是没有这个，它可能会假设您的参数长度只有 1 个字符长，因此当您尝试将值设置为比这更长的值时会跌倒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T16:23:17.723

Access 数据库中的这些列是什么数据类型？您是否尝试过使用 VarChar 而不是 BSTR，或者甚至只是将 Variant 用于全面的数据类型？

# android - 如何在android中获取图形视图？

> ID：12024900
> 
> 赞同：1
> 
> 时间：2012-08-19T07:17:33.070
> 
> 标签：android, plugins, graph, jar

我正在开发一个应用程序，我需要在线性图视图中表示一组值。我不知道如何在 android 的图形视图中显示一组值。是否有任何插件可以创建这些图形视图。

谁能建议我从哪里开始在 android 的图形视图中显示一组值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T08:25:33.187

[GraphView](http://www.jjoe64.com/p/graphview-library.html)可能对您有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:09:50.417

我已经成功地使用[AndroidPlot](http://androidplot.com/wiki/Home)实时生成了多条线的折线图。

# python - 记录进程停止的时间

> ID：12024902
> 
> 赞同：1
> 
> 时间：2012-08-19T07:18:00.143
> 
> 标签：python, linux, unix, time, timestamp

我已经开始处理几个文件。我记下了处理开始的（时钟）时间。完成时间太长，我想睡觉，但我想记下处理停止的时间。我不想要一个非常精确的时间读数，时钟时间对我来说还可以。是否有任何工具、命令或小脚本可以帮助我实现这一目标。

谢谢你的帮助。

我在 ubuntu 12.04 机器上运行一个处理多个文件的可执行文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:14:49.023

您可以使用[`psutil`模块](https://code.google.com/p/psutil/wiki/Documentation#Classes)（跨平台）了解新进程和已运行进程的进程何时完成。基于时的解决方案可能会提供更好的精度`sleep()`：

```
#!/usr/bin/env python
"""Print the finish time for a process specified by <pid>.

Usage:
    process-finish-time <pid>
"""
import sys
from datetime import datetime
from psutil import NoSuchProcess, Process # pip install psutil

try:
    pid = int(sys.argv[1])
except (IndexError, ValueError):
    sys.exit(__doc__)

try:
    p = Process(pid) # OR use `psutil.Popen()` to start a new process
except NoSuchProcess as e:
    sys.exit(e)

name = None
while p.is_running():
    name = p.name
    p.wait() # block until the process ends
print("Process (%s) finished at %s UTC" % (name, datetime.utcnow())) 
```

如果你想在进程运行时做某事，你可以传递`timeout`给。`p.wait()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T07:40:12.153

你可以使用这个小小的 python 脚本

```
import datetime
import subprocess
import time
import sys

p = subprocess.Popen(sys.argv[1:])

while p.poll() is None:
    time.sleep(1)

sys.stderr.write("Process finished at %s\n" % datetime.datetime.now()) 
```

例子：

```
/tmp/watcher.py sleep 10
Process finished at 2012-08-19 10:38:11.233989 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T07:26:42.003

时间命令可能会帮助你

**格式**

```
$> time <command> 
```

**例如**：如果它是一个 bash 脚本

```
$> time sh Test.sh 
```

**输出**

```
real    0m0.004s
user    0m0.001s
sys     0m0.002s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T22:11:06.207

最后我能够编写一个帮助我的python脚本。重要的要求是，即使进程已经启动，我也应该能够知道时间（进程停止的时间）。我希望以下脚本可以帮助遇到此问题的其他人。

```
import datetime
import commands
import time
import sys 

def main(argv):
  if len(argv) < 2:
    sys.stderr.write("Usage: %s <action>" % (argv[0],))
    return 1
  output = commands.getoutput("ps -e")
  while argv[1] in output:
    output = commands.getoutput("ps -e")
    print argv[1], " running", datetime.datetime.now() 
    #it should be set depending upon the precision a user wants.
    time.sleep(5)
  sys.stderr.write("Process finished at %s\n" % datetime.datetime.now())

if __name__ == "__main__":
  sys.exit(main(sys.argv)) 
```

# java - 如何声明不同类型的HashMap？

> ID：12024905
> 
> 赞同：5
> 
> 时间：2012-08-19T07:18:11.033
> 
> 标签：java, types, hashmap, declaration

我有一个函数，声明如下：

```
public synchronized void update(HashMap<String, Comparable> data) 
```

数据包含字符串和整数，但 Comparable 会发出警告

```
Comparable is a raw type. References to generic type Comparable<T> should be 
 parameterized 
```

由于我没有过多地发现警告，问题是，是否有正确的方法，我不想压制警告。

预先感谢！马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T07:23:13.293

这应该让编译器满意：

```
public synchronized void update(HashMap<String, Comparable<Object>> data) 
```

`Object``String`是和中最具体的超类型`Integer`。您的代码也有改进的空间。首先依赖`Map`接口，而不是具体`HashMap`实现。其次，如果您真的不需要该`Comparable`功能，只需使用`Map<String, Object>`. 最后但并非最不重要的一点是，避免多类型集合并更喜欢强类型。

“ *[...]data 包含字符串和 ints[...]* ” - 如果它只是从`String`to的映射`Integer`：

```
public synchronized void update(HashMap<String, Integer> data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:27:27.210

首先，你不应该坚持`HashMap`在你的签名。为什么不只是一个`Map`？其次，您应该允许 map 值类型是任何*实现* `Comparable`. 第三，`Comparable`可以使用无界通配符对自身进行参数化：

```
void update(Map<String, ? extends Comparable<?>> data) 
```

现在您可以使用或中`HashMap<String, Integer>`的任何一个来调用它。`TreeMap<String, String>``SortedMap<String, Comparable<?>>`

# android - Android 自定义 Expandablelistview 不触发 onChildClick

> ID：12024907
> 
> 赞同：5
> 
> 时间：2012-08-19T07:18:59.060
> 
> 标签：android

我是android编程的初学者。我已经从[http://shenhengbin.wordpress.com](http://shenhengbin.wordpress.com)下载了代码并且工作正常，但唯一的问题是不会触发 onChildClick。

这是主要活动

```
public class MenuCategory extends Activity {
        private ExpandableListView mExpandableListView;
        private List<GroupEntity> mGroupCollection;
        ExpandableListAdapter adapter;

        @Override
        public void onCreate(Bundle savedInstanceStater) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.menucategory);

            prepareResource();
            initPage();

        }

        private void prepareResource() {
            String data = null;
            FileInputStream fIn = null;
            InputStreamReader isr = null;
            String response = null;
            String getParam = "?get=menuCategory";
            try{
                fIn = openFileInput("fromfile.dat");
                isr = new InputStreamReader(fIn);
                int size = fIn.available(); 
                char[] inputBuffer = new char[size];
                isr.read(inputBuffer);
                data = new String(inputBuffer);
                isr.close();
                fIn.close();
                String[] dataSep = data.split("#");
                String Hs = dataSep[0];

                try {
                    response = CustomHttpClient.executeHttpGet(Hs+getParam);
                    String res = response.toString(); 
                    if(response.length()!=0){
                        mGroupCollection = new ArrayList<GroupEntity>();
                        JSONObject jsonObject = null;
                        JSONArray eventArray = new JSONArray(res);
                        for (int i = 0; i < eventArray.length(); i++) {
                            jsonObject = eventArray.getJSONObject(i);
                            GroupEntity ge = new GroupEntity();
                            ge.Name = jsonObject.getString("Cat");

                            JSONArray abc  = jsonObject.getJSONArray("SubCat");
                            for (int j=0; j<abc.length(); j++){
                                GroupItemEntity gi = ge.new GroupItemEntity();
                                gi.Name = abc.getString(j);
                                ge.GroupItemCollection.add(gi);
                            }
                            mGroupCollection.add(ge);   
                        }
                    }
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }catch(IOException e){
                e.printStackTrace(System.err);
            }
        }

        private void initPage() {
            mExpandableListView = (ExpandableListView) findViewById(R.id.expandableListView);
            adapter = new ExpandableListAdapter(this,mExpandableListView, mGroupCollection);
            mExpandableListView.setAdapter(adapter);
            registerForContextMenu(mExpandableListView);
        }
        public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
            String string = "Child Click";
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(getApplicationContext(), string, duration);
            toast.show();
            return false;
        }
    } 
```

这是自定义 BaseExpandableListAdapter

```
public class ExpandableListAdapter extends BaseExpandableListAdapter {

    private Context mContext;
    private ExpandableListView mExpandableListView;
    private List<GroupEntity> mGroupCollection;
    private int[] groupStatus;
    private int lastExpandedGroupPosition;

    public ExpandableListAdapter(Context pContext,
            ExpandableListView pExpandableListView,
            List<GroupEntity> pGroupCollection) {
        mContext = pContext;
        mGroupCollection = pGroupCollection;
        mExpandableListView = pExpandableListView;
        groupStatus = new int[mGroupCollection.size()];

        setListEvent();
    }

    private void setListEvent() {

        mExpandableListView
                .setOnGroupExpandListener(new OnGroupExpandListener() {

                    public void onGroupExpand(int arg0) {
                        // TODO Auto-generated method stub
                        groupStatus[arg0] = 1;
                        lastExpandedGroupPosition = arg0;
                    }
                });

        mExpandableListView
                .setOnGroupCollapseListener(new OnGroupCollapseListener() {

                    public void onGroupCollapse(int arg0) {
                        // TODO Auto-generated method stub
                        groupStatus[arg0] = 0;
                    }
                });
    }

    public String getChild(int arg0, int arg1) {
        // TODO Auto-generated method stub
        return mGroupCollection.get(arg0).GroupItemCollection.get(arg1).Name;
    }

    public long getChildId(int arg0, int arg1) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getChildView(int arg0, int arg1, boolean arg2, View arg3,
            ViewGroup arg4) {
        // TODO Auto-generated method stub

        ChildHolder childHolder;
        if (arg3 == null) {
            arg3 = LayoutInflater.from(mContext).inflate(
                    R.layout.list_group_item, null);

            childHolder = new ChildHolder();

            childHolder.title = (TextView) arg3.findViewById(R.id.item_title);
            arg3.setTag(childHolder);
        }else {
            childHolder = (ChildHolder) arg3.getTag();
        }

        childHolder.title.setText(mGroupCollection.get(arg0).GroupItemCollection.get(arg1).Name);
        return arg3;
    }

    public int getChildrenCount(int arg0) {
        // TODO Auto-generated method stub
        return mGroupCollection.get(arg0).GroupItemCollection.size();
    }

    public Object getGroup(int arg0) {
        // TODO Auto-generated method stub
        return mGroupCollection.get(arg0);
    }

    public int getGroupCount() {
        // TODO Auto-generated method stub
        return mGroupCollection.size();
    }

    public long getGroupId(int arg0) {
        // TODO Auto-generated method stub
        return arg0;
    }

    public View getGroupView(int arg0, boolean arg1, View arg2, ViewGroup arg3) {
        // TODO Auto-generated method stub
        GroupHolder groupHolder;
        if (arg2 == null) {
            arg2 = LayoutInflater.from(mContext).inflate(R.layout.list_group,
                    null);
            groupHolder = new GroupHolder();
            groupHolder.img = (ImageView) arg2.findViewById(R.id.tag_img);
            groupHolder.title = (TextView) arg2.findViewById(R.id.group_title);
            arg2.setTag(groupHolder);
        } else {
            groupHolder = (GroupHolder) arg2.getTag();
        }
        if (groupStatus[arg0] == 0) {
            groupHolder.img.setImageResource(R.drawable.group_down);
        } else {
            groupHolder.img.setImageResource(R.drawable.group_up);
        }
        groupHolder.title.setText(mGroupCollection.get(arg0).Name);

        return arg2;
    }

    class GroupHolder {
        ImageView img;
        TextView title;
    }

    class ChildHolder {
        TextView title;
    }

    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return true;
    }

    public boolean isChildSelectable(int arg0, int arg1) {
        // TODO Auto-generated method stub
        return true;
    }

    @Override
    public void onGroupExpanded(int groupPosition){
        //collapse the old expanded group, if not the same
        //as new group to expand
        if(groupPosition != lastExpandedGroupPosition){
            mExpandableListView.collapseGroup(lastExpandedGroupPosition);
        }

        super.onGroupExpanded(groupPosition);           
        lastExpandedGroupPosition = groupPosition;
    }
} 
```

项目组布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/group_header_bg"
    android:gravity="center_vertical" >

    <ImageView
        android:id="@+id/tag_img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="10dip"
        android:src="@drawable/group_down"
        android:focusable="false"
         />

    <TextView
        android:id="@+id/group_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="10dip"
        android:text=""
        android:textColor="#57810f"
        android:textSize="18dip"
        android:textStyle="bold"
        android:focusable="false"
         />

</RelativeLayout> 
```

这是项目子布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:baselineAligned="false"
    android:paddingTop="5dip" >

    <LinearLayout
        android:id="@+id/groupItem"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@drawable/play_group_item"
        android:clickable="true" >

        <TextView
            android:id="@+id/item_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="15dip"
            android:layout_marginLeft="15dip"
            android:text="sample"
            android:textColor="#FFF38585"
            android:textSize="20sp"
            android:focusable="false"
             />

    </LinearLayout>

</LinearLayout> 
```

请帮我

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T09:10:48.010

在适配器中，您有一个名为 isChildSelectable() 的方法，女巫返回 false，这就是问题所在。将返回值更改为 true 以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-18T17:00:52.803

我遇到了这个问题，onChildClick 没有被触发。

我发现了这条评论：

> 解决了，问题是如果你在childview上有几个textview，focusable属性必须是false（我不知道为什么）在视图中添加android：descendantFocusability="blocksDescendants"解决了这个问题

在[Android ExpandableListView 和 onChildClick 上不起作用](https://stackoverflow.com/q/19555364/3050951)

所以添加`android:descendantFocusability="blocksDescendants"`childView 对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T04:30:04.150

我知道这是旧线程，但如果有人来这里寻找答案，这是给他们的。当我将[本教程用于可扩展列表视图](http://shenhengbin.wordpress.com/2012/03/25/android-practice-custom-expandablelistview-sample-2/)以制作可点击的子项时，我发现了同样的问题，只需转到“主组项布局”（在我的代码中为 list_group_item）并使 linearlayout 和 textview 可点击且 facusable 为假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T08:35:24.500

要为子点击设置监听器，您可以在`initPage`方法（不是`onCreate()`）中这样做：

```
mExpandableListView = (ExpandableListView) findViewById(R.id.expandableListView);
            adapter = new ExpandableListAdapter(this,mExpandableListView, mGroupCollection);
            mExpandableListView.setAdapter(adapter);
registerForContextMenu(mExpandableListView);
mExpandableListView.setOnChildClickListener(new OnChildClickListener() {

            @Override
            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                String string = "Child Click";
                int duration = Toast.LENGTH_SHORT;
                Toast toast = Toast.makeText(getApplicationContext(), string,
                        duration);
                toast.show();
                return false;
            }
        }); 
```

# ruby-on-rails - NoMethodError：未定义的方法“调用”

> ID：12024908
> 
> 赞同：5
> 
> 时间：2012-08-19T07:19:08.417
> 
> 标签：ruby-on-rails, ruby, rspec

运行以下测试套件时：

```
require 'spec_helper'

describe User do
  before { @user = User.(name: "Example User", email: "user@example.com" }

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
end 
```

我收到此错误：

```
Failure/Error: before { @user = User.(name: "Example User", email: "user@example.com") }
NoMethodError:
  undefined method `call' for #<Class:0x007fdfd5dd8008>
  # ./spec/models/user_spec.rb:15:in `block (2 levels) in <top (required)>' 
```

创建用户在控制台中工作得很好，它响应方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T07:24:32.583

你有一个语法错误：

```
before { @user = User.(name: "Example User", email: "user@example.com" } 
```

和左括号`.`之间应该没有。`User`你也缺少右括号。尝试：

```
before { @user = User.new(name: "Example User", email: "user@example.com") } 
```

如果您想知道具体的错误消息，在较新的 Ruby 版本中的`.()`工作方式如下`call`：

```
l = lambda { |x| x * x }
#=> #<Proc:0x007fe5d3907188@(pry):39 (lambda)>
l.call(3)
#=> 9
l.(3)
#=> 9 
```

# javascript - 语法错误 Jquery Rails（分号？）

> ID：12024935
> 
> 赞同：0
> 
> 时间：2012-08-19T07:24:48.283
> 
> 标签：javascript, ruby-on-rails, jquery, ruby-on-rails-3.2

这是我在加载页面时包含的代码：

```
<script type="text/javascript">
function test() {
    $.get('/login', function(data){
        alert("test");
        $('#flash_content').html("hi");
        }, 'script');}

    function test2(){
    var jqxhr = $.get("/login", function(data) {
            $('#flash_content').html(data);}, 'script')
            .success(function() { alert("second success"); })
            .error(function(request, status,error) { alert(error); })
            .complete(function() { alert("complete"); });}

    $(document).ready(function() {
    $("#login").click(function(event){
     event.preventDefault(); // Prevent link from following its href
    test2();
    });});
    </script> 
```

当我调用 test2() 时，我可以在我的 rails 服务器日志中看到它呈现了它应该呈现的视图，并且在 firebug 中我看到我的 ajax get 响应确实是我想要覆盖到页面上的表单，但是什么也没有页面实际上发生了变化。我已经用字符串“hi”替换了“Data”，这确实被放入了页面中。如您所见，弹出一个警报并告诉我：

```
SyntaxError: missing ; before statement 
```

这是我用于登录的控制器方法：

```
@user = User.new
respond_to do |format|
    format.html { }
    format.js  {render :layout => false }
    format.xml  { head :ok }
  end 
```

以及应该呈现的视图：

```
 <%= form_tag user_sessions_path, :method => :post do  %>
  <div class="field">
    <%= label_tag :username %><br />
    <%= text_field_tag :username %>
  </div>
  <div class="field">
    <%= label_tag :password %><br />
    <%= password_field_tag :password %></br>
    Remember me : <%= check_box_tag :remember %>
  </div>

  <div class="actions">
    <%= submit_tag "Login" %>
  </div>
<% end %> 
```

我已经在这几个小时了，所以也许我没有看到明显的东西:(谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:48:03.253

你告诉 jquery 返回的是 javascript （最后一个参数`$.get`）。这告诉 jquery，当它得到你的响应时，它应该评估它。

但是，您的响应是 html - 尝试将其评估为 javascript 没有意义。您应该忽略该参数（让 jquery 猜测）或将其设置为“html”。

Rails 仍会将该`format.js`块用于 xhr 请求，尽管我相信您需要将它放在`format.html`版本之前。

# python - 使用python替换csv中的值

> ID：12024944
> 
> 赞同：0
> 
> 时间：2012-08-19T07:26:19.987
> 
> 标签：python, csv

```
def update(all_marks, stud_num, mark, column, result):
    lines = [l for l in all_marks]

    for row in all_marks:
        if stud_num in row:
            lines[rows][column] = mark 
```

从这里开始，我尝试使用`lines[rows][column] = mark`.

它应该用标记替换现有值。但是定义行有问题。任何人都知道如何修复？谢谢。

编辑：这是来自 all_marks 的数据示例：

> [['一种'， ''， ''， ''， ''， '']，
> 
> ['b', '', '', '', '', ''],
> 
> ['C'， ''， ''， ''， ''， '']，
> 
> ['d', '', '', '', '', ''],
> 
> ['e', '', '', '', '', ''],
> 
> ['F'， ''， ''， ''， ''， '']，
> 
> ['G'， ''， ''， ''， ''， '']]

我在这里要做的是用标记替换''中的值。

例如， def update(all_marks, 'a', '10', 2, True): 将返回

> [['a', '', '10', '', '', ''],
> 
> ['b', '', '', '', '', ''],
> 
> ['C'， ''， ''， ''， ''， '']，
> 
> ['d', '', '', '', '', ''],
> 
> ['e', '', '', '', '', ''],
> 
> ['F'， ''， ''， ''， ''， '']，
> 
> ['G'， ''， ''， ''， ''， '']]

感谢您帮助新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:20:22.153

这是您的函数的修改版本，它将按预期返回输出：

```
def update(all_marks, stud_num, mark, column):
    for i in range(len(all_marks)):
        if stud_num in all_marks[i]:
            all_marks[i][column] = mark
    return all_marks 
```

以下是它的工作原理：

```
>>> marks
[['a', '', '', '', '', ''], ['b', '', '', '', '', ''], ['c', '', '', '', '', ''], ['d', '', '', '', '', ''], ['e', '', '', '', '', ''], ['f', '', '', '', '', ''], ['g', '', '', '', '', '']]

>>> update(marks,'a','10',2)
[['a', '', '10', '', '', ''], ['b', '', '', '', '', ''], ['c', '', '', '', '', ''], ['d', '', '', '', '', ''], ['e', '', '', '', '', ''], ['f', '', '', '', '', ''], ['g', '', '', '', '', '']] 
```

注意`marks`现在修改

```
>>> marks
[['a', '', '10', '', '', ''], ['b', '', '', '', '', ''], ['c', '', '', '', '', ''], ['d', '', '', '', '', ''], ['e', '', '', '', '', ''], ['f', '', '', '', '', ''], ['g', '', '', '', '', '']] 
```

如果您想更改它，以便 update 仅返回修改后数据的副本，请按以下方式更改函数：

```
def update(all_marks, stud_num, mark, column):
    tmp = all_marks
    for i in range(len(tmp)):
        if stud_num in tmp[i]:
            tmp[i][column] = mark
    return tmp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T10:21:50.830

这是工作代码：

```
def update(all_marks, stud_num, mark, column, result):
    lines = [l for l in all_marks]
    for row in range(len(all_marks)):
        if all_marks[row][0] == stud_num:
            lines[row][column] = mark 
```

以下是解释：

```
for row in range(len(all_marks)): 
```

=> 你不想遍历列表对象（例如 ['a','','','','','']）而是遍历*列表索引*

```
if stud_num == all_marks[row][0]: 
```

=> 这是只检查行的第一个字符，而不是*任何*字符。

```
lines[row][column] = mark 
```

=> 这里的错字，应该是*row*而不是*rows*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T10:54:31.803

在行索引上循环不如在行本身上循环那么有效。一种更pythonic的方式是

```
def update2(all_marks,stud_num,mark,column):
    for row in all_marks:
        if stud_num in row:
            row[column] = mark
    return all_marks 
```

# c# - SqlCommand 参数化 SQL 错误：必须声明标量变量“@ObjectType”

> ID：12024949
> 
> 赞同：0
> 
> 时间：2012-08-19T07:27:23.447
> 
> 标签：c#, sql-server

我收到此错误：

> *必须声明标量变量“@ObjectType”。*

知道为什么吗？如果我硬编码值，则查询有效。

```
public static DataSet GetDatabaseObjectHistory(string objectType, 
                                               string schemaName, 
                                               string objectName, 
                                               string msConnectionString)
{
   using (SqlConnection sqlConnection = new SqlConnection()
                        {
                           ConnectionString = msConnectionString
                        })
   {
      sqlConnection.Open();

      using (DataSet ds = new DataSet())
      {
          #region sqlGetSchemaObjects
          const string sql = @"SELECT
                                           RowId
                                          ,EventTime
                                          ,LoginName
                                          ,UserName
                                          ,DatabaseName
                                          ,SchemaName
                                          ,ObjectName
                                          ,ObjectType
                                          ,DDLCommand
                                        FROM
                                           Audit_Log
                                        WHERE
                                            Audit_Log.ObjectType = @ObjectType AND
                                            Audit_Log.SchemaName = @SchemaName AND
                                            Audit_Log.ObjectName = @ObjectName";
          #endregion

          SqlCommand sqlCommand = new SqlCommand(sql, sqlConnection);
          sqlCommand.CommandType = CommandType.Text;

          sqlCommand.Parameters.AddWithValue("@ObjectType", objectType);
          sqlCommand.Parameters.AddWithValue("@SchemaName", schemaName);
          sqlCommand.Parameters.AddWithValue("@ObjectName", objectName);

          using (SqlDataAdapter sqlDataAdapter = new SqlDataAdapter(sql, sqlConnection))
          {
              sqlDataAdapter.Fill(ds, sql);
          }

          ds.Tables[0].TableName = "Object History";
          return ds;
      }
   }
   return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:36:47.177

尝试以下操作：

```
public static DataSet GetDatabaseObjectHistory(
    string objectType,
    string schemaName,
    string objectName,
    string msConnectionString
)
{
    const string sql = 
        @"SELECT
              RowId,
              EventTime,
              LoginName,
              UserName,
              DatabaseName,
              SchemaName,
              ObjectName,
              ObjectType,
              DDLCommand
          FROM
              Audit_Log
          WHERE
              Audit_Log.ObjectType = @ObjectType AND
              Audit_Log.SchemaName = @SchemaName AND
              Audit_Log.ObjectName = @ObjectName
        ";

    using (SqlConnection con = new SqlConnection(msConnectionString))
    using (SqlCommand cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = sql;

        cmd.Parameters.AddWithValue("@ObjectType", objectType);
        cmd.Parameters.AddWithValue("@SchemaName", schemaName);
        cmd.Parameters.AddWithValue("@ObjectName", objectName);

        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        {
            DataSet ds = new DataSet();
            da.Fill(ds);
            ds.Tables[0].TableName = "Object History";
            return ds;
        }
    }
} 
```

# c++ - 制作一个生成新 .exe 的程序

> ID：12024951
> 
> 赞同：-3
> 
> 时间：2012-08-19T07:27:44.657
> 
> 标签：c++, visual-studio-2010, exe

有谁知道是否可以让一个程序（用 C++ 编写）生成一个 .exe 文件？例如，假设用户想要生成一个执行 Web 浏览器的 .exe。在程序中，他/她从一组复选框中单击 Firefox、IE 或 Chrome，然后按生成。现在的想法是，这个新生成的 exe 文件现在将在用户每次启动生成的 exe 时启动选定的 Web 浏览器。

该程序计划在 VS 2010 中编写为 Windows 应用程序。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:33:45.040

最简单的解决方案可能是拥有一个已经编译的可执行文件，但要使用您想要空运行的实际程序的名称。然后修补文件以放置要运行的程序的正确路径。

但是就像我在评论中所说的那样，如果您只想启动另一个程序，那么创建一个快捷方式会容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T08:01:34.503

通常，生成可执行文件的程序称为编译器。您可以让您的“主”程序简单地更改准备好的源文件并编译它们。但是，这在很大程度上取决于您的应用场景。您的用户是否安装了 c++ 编译器？哪一个？它在哪里生活？

# wpf - WPF在画布上显示图像的问题

> ID：12024952
> 
> 赞同：0
> 
> 时间：2012-08-19T07:27:45.500
> 
> 标签：wpf, image

我有一个画布，我在上面动态添加了一些形状。我现在想`Image`在画布上添加一个。

一切正常，如果我添加`Image`，`Canvas`但是当我尝试添加时`Image`，`Canvas`图像没有显示。也许它隐藏在绘制的 Shapes 后面`Canvas`。

我的问题是如何`Image`将`Canvas`.

这就是我添加图像的方式：

```
string strUri2 = String.Format(@"pack://application:,,,/MyFirstWPF;component/Images/tt.jpg");
image1.Source = new BitmapImage(new Uri(strUri2)); 
```

注意-> 画布上的形状是在添加图像之前添加的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:08:54.163

你可以通过两种方式做到这一点：

*   更改 的 Z-Index`Image`以将其置于 Z-Order 的前面`Canvas`
*   使用允许与元素`Canvas`重叠的容器（例如 a ）`Image``Grid`

如果您对 Canvas 使用 Z-Index 方法，那么要正确执行此操作，您必须关注 Canvas 上其他元素的 Z-Index ....因为您必须选择大于其他一切。

您可以猜测，然后选择一个您认为其他元素永远无法到达的大 Z-Index，或者您可以扫描 Canvas 的子级并找到使用的最高 Z-Index，这样您就可以始终设置一个更高的……这样您就可以确保将图像“带到前面”。

*   [WPF中的BringToFront](https://stackoverflow.com/questions/5666754/bringtofront-in-wpf)

* * *

（这可能与您说“Out of Canvas”时使用的相同）

还有另一种方法，这意味着您不必明确地使用 Z-Indexes，只需使用 Grid 并将 Canvas 和 Image 指定为子项...它们将占据同一个单元格，因此彼此重叠...作为最后一个孩子的图像将具有最大的隐含 Z-Index。

```
<Grid>
    <Canvas x:Name="mycanvas"/>
    <Image x:Name="image1/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:14:07.113

只需使用

```
myCanvas.Children.Insert(0,image1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T07:41:33.270

您可以将`z-index`图像设置为高于其他形状，以将其置于其他形状之上 -`Canvas.SetZIndex(image1, (int)5);`

请参阅这些链接以了解有关 z-index 的更多信息 - [Controlling z-order](http://blogs.msdn.com/b/wpfsdk/archive/2006/06/13/controlling-zorder-using-the-zindex-property.aspx "控制 z 顺序") , [Z-Index of Canvas](http://www.wpftutorials.com/2011/03/wpf-canvas.html "画布的 Z 索引")

# c# - 检测属性变化

> ID：12024955
> 
> 赞同：0
> 
> 时间：2012-08-19T07:28:28.173
> 
> 标签：c#

有没有一种方法可以检测属性值是否已更改，但在对象初始化时未更改？

```
public string Foo
{
    set
    {
        // Register property has changed
        // but not on initialization
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:33:37.193

如果您有一个支持字段，那么您可以在初始化时设置该字段，然后设置属性。

```
private string foo;

public Bar()
{
    foo = "default"; // initialize without calling setter
}

public string Foo
{
    set
    {
        foo = value;
        // setter registers that property has changed
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T07:36:31.263

你可以这样做：

```
public class Bar
{
    private bool _initializing;

    private string _foo;
    public string Foo
    {
        set
        {
            _foo = value;
            if(!_initializing)
                NotifyOnPropertyChange();
        }
    }

    public Bar()
    {
        _initializing = true;
        Foo = "bar";
        _initializing = false;
    }
} 
```

或者只是跳过 _initializing 部分并直接设置 _foo 而不是使用 setter。

# c - C - 为什么 myfunc 和 &myfunc 都是函数指针？

> ID：12024956
> 
> 赞同：1
> 
> 时间：2012-08-19T07:28:32.580
> 
> 标签：c, function, pointers

> **可能重复：**
> [为什么所有这些疯狂的函数指针定义都有效？到底发生了什么？](https://stackoverflow.com/questions/6893285/why-do-all-these-crazy-function-pointer-definitions-all-work-what-is-really-goi)

有什么特别的原因吗？在大多数情况下，&mypointer 应该给出指针本身的地址，对吗？

# c# - 从一组图像中创建视频

> ID：12024958
> 
> 赞同：7
> 
> 时间：2012-08-19T07:29:28.073
> 
> 标签：c#, image, video, avi

我一直在寻找使用 C# 代码从图像创建视频（.avi 文件）的时间，

有没有维护视频创建的库？我一直在查看 AviFileWriter 库，但该库似乎太固定了，因为我需要添加一些过渡和其他元素。

那么如何使用 C# 来满足我的需求呢？我不在乎编码是否复杂。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T08:42:20.570

这里是具有主要 AVI 功能的 ac# 项目 [http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

这里使用 VideoStream 从 bmp 文件创建视频制作帧

```
 //load the first image
Bitmap bitmap = (Bitmap)Image.FromFile(txtFileNames.Lines[0]);
//create a new AVI file
AviManager aviManager = 
    new AviManager(@"..\..\testdata\new.avi", false);
//add a new video stream and one frame to the new file
VideoStream aviStream = 
    aviManager.AddVideoStream(true, 2, bitmap);

Bitmap bitmap;
int count = 0;
for(int n=1; n<txtFileNames.Lines.Length; n++){
    if(txtFileNames.Lines[n].Trim().Length > 0){
        bitmap = 
           (Bitmap)Bitmap.FromFile(txtFileNames.Lines[n]);
        aviStream.AddFrame(bitmap);
        bitmap.Dispose();
        count++;
    }
}
aviManager.Close(); 
```

# java - Java 数组输入

> ID：12024959
> 
> 赞同：0
> 
> 时间：2012-08-19T07:29:28.867
> 
> 标签：java, arrays

好的，我对java有点陌生，但是我在google上搜索了创建方法并得到了混合结果，所以我对如何实现这一点有点困惑。基本上我有一个数组可以存储20个唯一的帐号，不少于没有更多的。除了存储帐号之外，我还会为用户提供存储账户余额的选项（钱，是的，你猜对了，这是银行账户的家庭作业）

所以我面临的问题是，对于程序运行时的过程，如果用户决定添加 15 个帐户，我想知道如何将随后的 accno 条目放入下一个空闲数组索引。并且在将帐户数量限制为 20 后，还会触发一条消息说无法添加更多帐户

```
public static void addAccount()
{

    int i=0;
    String accno, input;
    double accbal;
    Scanner sc = new Scanner(System.in);
    String[] accnums = new String[20];
    System.out.print("Enter the account number:");
    accno = sc.nextLine();

    if(accno.length() != 9) //the accno shld not be more than 9.
    {
        System.out.println("Wrong accnum");
    }
    else
    {
       //THis is the part i am not sure how to put the code tks.
    }

    input= accnums[1];
   System.out.println("The value:"+input);//this is just for me to display / test
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:32:20.723

为什么不使用哈希图而不是数组？创建一个具有特征化属性的 Account 类。然后创建一个 AccountManager 类作为 Singleton (http://it.wikipedia.org/wiki/Singleton)。在 ACcountManager 中添加一个 hashmap 私有属性和一些您将使用的方法来添加和获取通过密钥索引的帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:50:19.140

最简单的（虽然不是最有效的，但我认为这不是问题）可以循环并查找 a `null`，并将其放在第一个`null`值中：

```
int j;
for (j = 0; j < accnums.length; j++)
  if (accnums[j] == null) break;
if (j==accnums.length)  {
  // error msg, the array is already full
} else { 
  //insert element into index j
} 
```

# email - 向 Gmail 发送电子邮件：禁用重复内容的引用

> ID：12024962
> 
> 赞同：2
> 
> 时间：2012-08-19T07:30:44.417
> 
> 标签：email, gmail, html-email

假设您向用户发送电子邮件，这些电子邮件通常具有相同的主题，并且电子邮件中的某些内容是相同的。好吧，Gmail 喜欢在这些场景中获取相同的内容，并将文本变为紫色并在可能的情况下折叠它。有没有办法告诉（或欺骗）Gmail 不要这样做？最好不要更改主题（即在主题行中添加唯一的 id）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:59:20.677

您可能会在多次测试时看到这一点，并且电子邮件会一个接一个地累积（因为它具有相同的主题）。您必须删除这些电子邮件，然后单独测试（一次一封电子邮件）以获得它的实际外观。有点乏味，但有效:)

# qt - 无法将 Qt 控制台应用程序与 Openscengrapgh 链接

> ID：12024964
> 
> 赞同：0
> 
> 时间：2012-08-19T07:31:12.533
> 
> 标签：qt, opengl, openscenegraph

我已经成功地将 Openscenegraph 与 Visual Studio 2008 集成。作为示例给出的示例“cessna.osg”在 VS2008 中作为控制台程序运行良好。但是当我尝试在 Qt 中运行与控制台相同的代码时，它会出现错误。我在 windows7 64 位上使用带有 Qt 选项的 VS2008 编译器使用 CMAKE 构建了 Openscenegraph 3.0。在 Qt 中，我使用的是 QT 4.7.4 Desktop-MSVC2008 (QtSDK) 版本。我的 Qt .pro 文件看起来像这样......

```
QT       += core
QT       -= gui

TARGET = OSGTEST (name of the console project)
CONFIG   += console
CONFIG   -= app_bundle
TEMPLATE = app
SOURCES += main.cpp

INCLUDEPATH +=C:\OPENSCENEGRAPH\INCLUDE\

LIBS +=C:\OPENSCENEGRAPH\LIB\
-lOpenThreadsd\
-losgd\
-losgDBd\
-losgUtild\
-losgViewerd\ 
```

我正在使用相同的库并在 VS2008 IDE 中包含文件路径，如上所述。

main.cpp 文件看起来像 dis...（与 VS2008 IDE 中的相同）

```
#include <osgDB/ReadFile>
#include <osgViewer/Viewer>

int main()
{
    osg::ref_ptr<osg::Node> root = osgDB::readNodeFile("cessna.osg");
    osgViewer::Viewer viewer;
    viewer.setSceneData( root.get() );
    return viewer.run();
} 
```

我得到的错误是......

```
error: LNK1104: cannot open file 'C:\OPENSCENEGRAPH\LIB.obj' 
```

指导我，以便我可以将应用程序作为控制台运行。或者有没有其他方法可以在 Qt 控制台上运行 Openscenegraph 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T22:37:10.737

评论是正确的，你想要：

> LIBS +=-LC:\OPENSCENEGRAPH\LIB\ -lOpenThreadsd -losgd ...

-L 告诉 qmake 以下参数是搜索库的文件夹，而不是库本身。

# django - Django FileField with upload_to 在运行时确定 - 无法访问相关的用户属性

> ID：12024971
> 
> 赞同：1
> 
> 时间：2012-08-19T07:32:30.337
> 
> 标签：django, django-celery

在与此问题几乎相同的设置中：[Django FileField with upload_to 在运行时确定](https://stackoverflow.com/questions/1190697/django-filefield-with-upload-to-determined-at-runtime)

```
class Speaker(models.Model):
    user = models.OneToOneField(User, related_name='speaker')
    middle_name = models.CharField('Middle Name', max_length=40)
    profile_file = models.FileField(upload_to=profile_filename, blank=True, null=True)

def profile_filename(instance, filename):
    speaker = instance
    return "%s.%s.%s.%s.pdf" % (speaker.user.first_name, speaker.official_middle_initial, speaker.user.last_name, "profile") 
```

我收到一个错误：`AttributeError: 'User' object has no attribute 'first_name'`

这是一个早已保存的对象，并且肯定有一个用户，其值在应用程序的其他任何地方都使用。`Speaker`是用户的配置文件类。我觉得我在这里遇到了一个错误，不是吗？

## 额外细节

这里有一些额外的细节。这发生在芹菜任务中，所以也许这是一个重要因素。我将用户传递给 celery 任务。它使用`get_profile`扬声器对象获取与其关联的配置文件对象。我在扬声器对象上保存了一个文件，这就是我们所在的位置。

当我列出用户对象上的字段时，它们似乎在那里：

```
[2012-08-19 11:52:40,819: WARNING/PoolWorker-5] ['date_joined', 'email', 'first_name', 'groups', 'id', 'is_active', 'is_staff', 'is_superuser', 'last_login', 'last_name', 'logentry', 'password', 'speaker', 'user_permissions', 'username', 'userpasswordresetrequired'] 
```

这是回溯：

```
[2012-08-19 11:52:40,834: ERROR/MainProcess] Task myapp.tasks.retrieveDocument[a4beb536-76a4-48ea-aaf9-9ca0668f9331] raised exception: 'User' object has no attribute 'first_name'
Traceback (most recent call last):
  File "/Users/bobspryn/lohi/Remedy/remedyenv/lib/python2.7/site-packages/celery/task/trace.py", line 212, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/Users/bobspryn/lohi/Remedy/myapp/tasks.py", line 24, in retrieveDocument
    afile.save(filename, content)
  File "/Users/bobspryn/lohi/Remedy/remedyenv/lib/python2.7/site-packages/django/db/models/fields/files.py", line 85, in save
    name = self.field.generate_filename(self.instance, name)
  File "/Users/bobspryn/lohi/Remedy/myapp/models.py", line 37, in w9_filename
    return "%s.%s.%s.%s.pdf" % (speaker.user.first_name, speaker.official_middle_initial, speaker.official_last_name, DOCUMENT_W9)
AttributeError: 'User' object has no attribute 'first_name' 
```

### 更新

它似乎确实与它在芹菜内被执行有关。奇怪的。

### 更新

添加任务代码。

```
@task()
def retrieveDocument(user, documentKey, documentType):
    echosign = EchoSign(user=user)
    fileData = echosign.getDocumentWithKey(documentKey)
    if not fileData:
        logger.error('Error retrieving document', exc_info=True)
    else:
        speaker = user.get_profile()
        filename = "%s.%s.%s.pdf" % (user.first_name, user.last_name, documentType)
        if documentType == DOCUMENT_TEST:
            afile = speaker.test_file
        elif documentType == DOCUMENT_PROFILE:
            afile = speaker.profile_file

        content = ContentFile(fileData)
        afile.save(filename, content)
        speaker.save() 
```

# java - 在 Java 中将 replaceAll 与包含特殊字符的字符串一起使用

> ID：12024972
> 
> 赞同：1
> 
> 时间：2012-08-19T07:32:43.033
> 
> 标签：java, special-characters, replaceall

基本上，这就是我想要做的是：

```
String s = "to+go+la";

s.replaceAll("to+go", ""); 
```

应该返回`"+la"`

我知道如果我只是替换 + 符号，我会使用`\\+`，但我不确定嵌入符号时该怎么做。将它们从两者中删除是最好的答案吗？这将适用于我的目的，但它似乎是一个管道胶带的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T07:37:40.857

> ...但这似乎是一个胶带的答案。

这似乎是一个“胶带”的答案，因为您还没有了解为什么`\+`在仅替换“+”字符时需要使用。

答案是“+”是一个正则表达式元字符。它的意思是“在此之前的字符或组可能出现一次或多次”。

* * *

如果您想`"to+go"`被视为文字字符串（而不是正则表达式），那么执行此操作的一种方法是“正则表达式引用”它；例如

```
s.replaceAll(Pattern.quote("to+go"), ""); 
```

另一方面，如果`+`字符完全不相关，那么删除它们也可以工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T07:51:00.310

这个怎么样：

```
 String input = "to+go+la";
  String result = input.replaceAll("to\\+go","");
  System.out.println(result); 
```

为什么这是一个糟糕的模式？您所说的嵌入式是这样的吗？

```
 String input = "to+++go+la"; 
```

如果是这样，那么唯一会改变的是模式：

```
 String result = input.replaceAll("to(\\+)+go",""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T10:54:58.870

您的案例不需要正则表达式，因此使用它是不合适的。它既慢又麻烦。使用简单明了`replace`的代替，`replaceAll`你不需要逃避任何事情：

```
String s = "to+go+la".replace("to+go", ""); 
```

# jquery - jQuery：从 noscript 标签中提取文本

> ID：12024973
> 
> 赞同：1
> 
> 时间：2012-08-19T07:33:12.140
> 
> 标签：jquery

我有这个标记：

```
<div id="child1">
    <noscript>
        <h1>heading of Tab 1</h1>
    </noscript>
    <p>lorem Ipsum</p>
</div> 
```

我正在尝试提取有关`h1`标签内`noscript`标签的信息：

```
var noscript_tag = $(this).find('noscript');
var h1_tag = $(noscript_tag[0]).find('h1');
console.log($(h1_tag[0])); 
```

但我得到以下输出：

```
[] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:37:44.857

```
$('noscript').text() 
```

在 Chrome 中工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T07:42:48.467

使用`noscript`内部文本创建一个 DOM 元素（`h1`在本例中）并获取所需的文本。像这样的东西：

```
$($("noscript").text()).filter("h1").text();​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T07:48:12.167

尝试以下

```
<script>
function getVal() {
var nos = document.getElementsByTagName("noscript")[0]; 

var nosHtml = nos.textContent||nos.innerHTML; 

if ( nosHtml )
{
  var temp = document.createElement("h1");
  temp.innerHTML = nosHtml;

  document.body.appendChild(temp);
  var ex = document.getElementById("header");
  document.body.removeChild(temp);

  alert(ex.innerHTML);
}
}
</script>
<body onload="getVal();">
<div id="child1">
                <noscript>
                    <h1 id="header">heading of Tab 1</h1>
                </noscript>
                <p>lorem Ipsum</p>
</div>
<input type="button" onclick="getVal();" value="Get" />
</body> 
```

# php - 在 php 中显示来自 json 的 utf-8 字符

> ID：12024975
> 
> 赞同：0
> 
> 时间：2012-08-19T07:33:27.450
> 
> 标签：php, json, utf-8, yql

我使用的是公共api，YQL，特别是它返回一个json，并且在这个josn中有一个字段是汉字。通过直接调用这个 api url，我可以在浏览器中查看 json，它确实以 json 形式在浏览器中显示中文字符（这意味着它被正确解码并且我想是可读的）

现在，在php中，我通过curl调用这个相同的api url（它应该返回与我直接在浏览器中调用它相同的json）

```
$session = curl_init($yql_query_url);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$yql_json = curl_exec($session); 
```

我通过php以以下格式打印返回的json

```
print_r($yql_json . "\n\n");
print_r(utf8_decode($yql_json) . "\n\n"); 
```

它分别返回以下内容，

```
{"query":{"count":2,"created":"2012-08-19T07:24:51Z","lang":"en-US","results":{"h1":{"class":"entry-title","content":"åº·ç†™ä¾†äº† 2012-06-21 å¥³å­ç†è²¡ä¾¿æ˜¯å¾·?!"}}}}

{"query":{"count":2,"created":"2012-08-19T07:24:51Z","lang":"en-US","results":{"h1":{"class":"entry-title","content":"???? 2012-06-21 ????????!"}}}} 
```

如您所见，中文字符不显示（在“内容”之后）

我的目标是最终获取内容字段（中文字符）并插入数据库，但显然上面的示例似乎不是正确的中文值插入或 utf-8 编码

基本上我还要问的是，我怎样才能在上面的打印语句中显示中文字符，因为如果我能做到这一点，这意味着我有正确的 utf-8 编码插入数据库。

请帮忙

我想我的问题是：1.哪个打印语句有正确的信息让我插入数据库？

编辑：

答案之一建议我应该插入 utf8_decode 版本（上面有 ?? 和 !! 的那个）

我用下面的代码做到了

```
$sql = "UPDATE myTable SET title='" . utf8_decode($yql_json_php["query"]["results"["h1"["content"]) . "' WHERE id='4'";
mysql_query("set names 'utf8'");
$result = mysql_query($sql); 
```

我刷新了我的页面，但它仍然显示为?? 和 ！！

我通过sequel pro应用程序将汉字直接粘贴到表格中，我可以在我的网页上显示数据

所以它与我拥有的UPDATE sql有关......数据库似乎不知道它是utf8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:43:43.153

尝试使用

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

或者

```
<?php header("Content-type: text/html; charset=utf-8");?> 
```

可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:46:52.463

我遇到了类似的问题。基本上你得到了汉字。但是，当您打印它或将其存储在数据库中时，它们可能会显示为“?????” . 当你再次检索它并在浏览器中显示它时，你可以看到汉字。摆脱“？？？” 在数据库中，您必须在数据库 url 中定义 characterEncoding 并将 character_set_result 和其他一些设置为 utf8。同时，如果您调试您的应用程序并在 watch 上查看 content 的值，您实际上会看到中文字符。让我知道这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T07:54:07.617

1.  $yql_json = iconv(in_charset, 'utf-8', $yql_json);

2.  header("内容类型: text/html; charset=utf-8");

3.  网页视图编码 -> utf-8

# c# - 我可以重构我的 linq 选择吗？

> ID：12024978
> 
> 赞同：1
> 
> 时间：2012-08-19T07:33:40.870
> 
> 标签：c#, linq

我有以下内容：

```
 var data1 = contentRepository.GetPk(pk);
        var data2 = from d in data1
                    select new Content.RowKeyTitle {
                        RowKey = d.RowKey,
                        Title = d.Title,
                        Notes = d.Notes
                    };
        return (data2); 
```

有没有办法可以将 data1 和 data2 组合成一个表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T07:35:50.723

直接用`GetPk`方法吗？那你根本不需要`data1`。

```
var data = from d in contentRepository.GetPk(pk)
           select new Content.RowKeyTitle
           {
               RowKey = d.RowKey,
               Title = d.Title,
               Notes = d.Notes
           };
return data; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T07:37:01.743

使用 lambda 表达式而不是理解语法

```
return contentRepository.GetPk(pk).Select(d => new Content.RowKeyTitle {
                    RowKey = d.RowKey,
                    Title = d.Title,
                    Notes = d.Notes
                }); 
```

# javascript - jQuery悬停在堆叠的元素上（带有'tipsy'）

> ID：12024982
> 
> 赞同：1
> 
> 时间：2012-08-19T07:34:13.663
> 
> 标签：javascript, jquery, popup, hover, tooltip

我目前正在使用 jquery 的[Tipsy](http://onehackoranother.com/projects/jquery/tipsy/)插件来显示轻量级工具提示。效果很好，适用于非嵌套元素。

可以说我有：

```
<span>
    abc
    <span>def</span>
    ghi
</span> 
```

我在每个跨度标签上都有一个悬停事件，当我尝试将鼠标悬停在内部跨度标签上时，我得到了奇怪的结果。我只希望它显示实际悬停的元素。没有其他的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T11:28:56.433

Tipsy 被设计成一个开箱即用的简单插件。尽管有一些可配置的设置，但它们可能无法涵盖所有​​用例。
但是，它确实提供了一个 api ( `$(el).tipsy(methodName)`)，这使它在某种程度上具有可扩展性。通过使用它的 api，您可以根据自己的规则
强制执行行为（例如 a ）。`show/hide`

这是我编写此解决方法的方法：

```
$('span')
    // init tipsy
    .tipsy({
        title : function(){
            return $(this).data('tipsy-title');
        }        
    })
   // overwrite the triggering logic
   .on('mousemove', function(e){
       // prevent the event from bubbling up
       e.stopPropagation();

       // force a hide on other targeted elements (suchas the span parent)
       $('span').not(this).tipsy('hide');

       // force a show on this element (such as thespan parent)
       $(this).tipsy('show');
    });​ 
```

[您可以通过单击这个 fiddle](http://jsfiddle.net/gion_13/XgbkQ/)来查看上面的代码。

**更新**
我已经更新了代码以适应您的 html 标记：

```
var $tips = $('.backref_hover')
       .tipsy()
       .on('mousemove', function(e){
           // prevent the event from bubbling up
           e.stopPropagation();

           // force a hide on other targeted elements (such as the span parent)
           $tips.not(this).trigger('mouseleave');

           // force a show on this element (such as thespan parent)
           $(this).tipsy('show');
        });​ 
```

这是在线演示[。](http://jsfiddle.net/gion_13/XgbkQ/4/)

**更新 #2** 这是一个适用于动态添加跨度的演示：

```
$('.backref_hover').tipsy({live:true});

$('body').on('mousemove', '.backref_hover', function(e){
   // prevent the event from bubbling up
   e.stopPropagation();
   e.stopImmediatePropagation();

   // force a hide on other targeted elements (such as the span parent)
   $('.backref_hover').not(this).trigger('mouseleave');

   // force a show on this element (such as thespan parent)
   $(this).tipsy('show');
}); 
```

@Lindrian：我在评论中所说的只是（取自[jQuery 文档](http://api.jquery.com/live/)）：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。

这个例子说明了如何使用`on`委托事件而不是`live`.
也可以在[这里](http://jsfiddle.net/gion_13/XgbkQ/5/)看到行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:03:01.177

如果您控制 html，如何标记`span`您想要工具提示的特定内容？你可以这样做`class`：

```
<span>
    [unknown number of spans]
    <span class="use-tooltip" title="Backreference x: y">def</span>
    [unknown number of close spans]
</span> 
```

你的插件调用将是：

```
$('.use-tooltip').tipsy(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:50:12.030

我使用了一段时间的 gion_13s 解决方案。但事实证明，对较大数据集的浏览器/cpu 要求很高。根据他的代码，我想出了一个更好的解决方案：

```
 $('body').on('mousemove', '.backref_hover', function(e){
    // prevent the event from bubbling up
    e.stopPropagation();
    e.stopImmediatePropagation();

    // force a hide on other targeted elements (such as the span parent)
    $(this).parent().children('.backref_hover').not(this).trigger('mouseleave');

    // force a show on this element (such as thespan parent)
    $(this).tipsy('show');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T08:23:55.823

据我了解您的问题，您可以通过修改 Tipsy 插件来解决此问题。您可以将自己的自定义选项添加到参数（例如`hideParentTip: true`），即：

```
$('span span').tipsy({hideParentTip: true}); 
```

然后你需要修改插件本身。就行了`153`，你需要在后面加上下一个代码`function enter() {`，即：

```
function enter() {
    if (options.hideParentTip) $(this).parent().trigger(eventOut); 
```

希望有帮助。让我知道如果它不会

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T18:10:20.100

嘿，你可以试试这样的..

```
$(function(){   
    $('body').children('span').tipsy( 
    });​ 
```

看看它是否有效.. 我认为它会选择所有 span 标签留下它的 children 。

# mysql - TIMEDIFF 的格式结果以天：小时：分钟：秒为单位

> ID：12024989
> 
> 赞同：1
> 
> 时间：2012-08-19T07:35:14.990
> 
> 标签：mysql, sql, datetime-format

> **可能重复：**
> [MySQL 将 timediff 输出转换为日、时、分、秒格式](https://stackoverflow.com/questions/5279079/mysql-convert-timediff-output-to-day-hour-minute-second-format)

我有一个简单的查询，它计算两个日期时间之间的时间差，如下所示：

```
 SELECT TIMEDIFF( '2012-08-19 08:25:13', '2012-07-19 18:05:52' ); 
```

> 输出：734:19:21

输出以小时：分钟：秒为单位。但是我希望输出格式为：

> 天：小时：分钟：秒

如何格式化输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T08:51:52.787

```
SELECT CONCAT(
   FLOOR(HOUR(TIMEDIFF('2012-08-05 09:56', '2012-08-02 11:20')) / 24), ' days, ',
   MOD(HOUR(TIMEDIFF('2012-08-05 09:56', '2012-08-02 11:20')), 24), ' hours, ',
   MINUTE(TIMEDIFF('2012-08-05 09:56', '2012-08-02 11:20')), ' minutes, ',
   SECOND(TIMEDIFF('2012-08-05 09:56', '2012-08-02 11:20')), ' seconds')
AS TimeDiff 
```

[看到这个小提琴](http://sqlfiddle.com/#!2/cfab1/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:59:59.370

```
SELECT date_format(from_unixtime(unix_timestamp('2012-08-19 08:25:13' ) -
unix_timestamp('2012-07-19 18:05:52' )), '%d.%m.%Y %H:%i:%s'); 
```

# html - d3地理地图溢出

> ID：12024991
> 
> 赞同：1
> 
> 时间：2012-08-19T07:35:37.347
> 
> 标签：html, d3.js, scaling, geo

我尝试在 div 中显示我的地图 - 但我希望此地图仅限于 div 大小 - 现在，它也忽略了 w、h 值和 vis css 设置。

设置 svg 的高度和宽度是否有意义？当我把投影的比例放大时，它总是比组织大。svg。

```
var w = 200;
var h = 300;

// this will attach a svg-element with the class "map" to "mydiv"
var map = d3.select("#mydiv").append("svg:svg")
    .attr("width", w)
    .attr("height", h)
    .attr("class", "map"); 

var projection = d3.geo.albers()
    .origin([10.5,51])
    .scale(2000)
    .translate([100, 150]);

var path = d3.geo.path().projection(projection);

d3.json('germany.json', function(json) {
    map.selectAll('path')
        .data(json.features)
        .enter().append('path').attr('d', path);
}); 
```

和我的CSS：

```
#vis {
    overflow: hidden;
    width: 350px;
    height: 220px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T23:27:57.073

基本上有两种方法可以缩放 D3 地图：

*   缩放投影。

*   将地图放在一个`g`元素中并在该元素上设置一个变换。这也具有缩放笔画宽度的烦人副作用，因此您可能需要在元素上设置缩放`stroke-width`样式。`g`

在这两种情况下，您都在缩放地图，而与容器元素没有直接关系。我认为没有办法自动缩放到容器 - 我认为您需要通过 JS 获取容器的宽度（这里我使用 jQuery，但也有纯 JS 选项），然后设置比例因子因此：

```
var containerWidth = $('#myDiv').width(),
    baseWidth = 1000,
    baseStrokeWidth = 1,
    scaleFactor = containerWidth/baseWidth;

// now use scaleFactor in a transform or projection scale, e.g.:
d3.select('g.mapContainer')
    .attr("transform", "scale(" + scaleFactor + ")")
    // and invert the scale to keep a constant stroke width:
    .style("stroke-width", baseStrokeWidth / scaleFactor + "px"); 
```

如果您的容器大小会发生变化，您还需要设置一个`window.onresize`处理程序来重新计算比例并更新转换。这是使用转换`g`属性而不是投影比例的一个原因 - 要处理窗口大小调整，您不必重新投影整个地图，只需向上或向下缩放现有路径，这是一种更快的操作。

# mysql - 检查 mysql 字段数据中的某个字符，并将其替换为另一个字符

> ID：12024995
> 
> 赞同：2
> 
> 时间：2012-08-19T07:36:00.903
> 
> 标签：mysql

要更新的行数太多了。所以我想：

1) 用“_”替换每个带有“”的字段名，

2) 用“*”替换每个带有“\'”的字段名，

3) 用“*”替换每个带有“\”的字段名。

是否可以仅使用 mysql 来完成，这样我就不必循环并使用 PHP 手动更新每个 mysql 行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:38:05.357

```
UPDATE tablename SET somecol = REPLACE(somecol, ' ', '_');
UPDATE tablename SET somecol = REPLACE(somecol, '\'', '*');
UPDATE tablename SET somecol = REPLACE(somecol, '"', '*'); 
```

[http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)