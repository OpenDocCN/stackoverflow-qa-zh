# StackOverflow 问答 000931000-000931999

# asp.net-mvc - ASP.Net MVC 和复制 div 中的自 AJAX 更新部分视图/控制器

> ID：931001
> 
> 赞同：11
> 
> 时间：2009-05-31T01:13:13.860
> 
> 标签：asp.net-mvc, ajax, partial-views

我在 MVC 中有一个部分视图，类似于：

```
<div id="comments">
    ...
</div> 
```

在该 div 中有一个表单，它使用 AJAX 调用控制器并返回相同的局部视图。问题是调用视图的结果替换了div的内容，而不是整个div，我最终得到：

```
<div id="comments">
    <div id="comments">
        ...
    </div>
</div> 
```

凭借我在 ASP.Net MVC 和 AJAX 方面的一周经验，我能想到的唯一解决方案是将 div 放在局部视图之外，并使局部视图仅包含内部部分，但随后表单将引用外部的 id查看表单所在的位置，打破了我留在那里的小封装。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-12-14T10:21:36.873

.NET MVC 3 附带的不显眼的 Ajax 库使用基于 jQuery.ajax 的四个回调的回调。但是，Ajax.BeginForm 方法中的 InsertionMode = InsertionMode.Replace*不会*导致调用 jQuery 的 replaceWith。相反， .html(data) 用于替换目标元素的*内容*（而不是元素本身）。

我在我的博客上描述了这个问题的解决方案：http: [//buildingwebapps.blogspot.com/2011/11/jquerys-replacewith-and-using-it-to.html](http://buildingwebapps.blogspot.com/2011/11/jquerys-replacewith-and-using-it-to.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-31T22:49:32.740

使用

```
AjaxOptions { UpdateTargetId = "myDiv", InsertionMode = InsertionMode.Replace } 
```

正如 tvanfosson 所说，应该替换 '#myDiv' 元素的全部内容。您的问题是“#myDiv”在哪里。这是一个例子：

```
<div id="myDiv">
    <% Html.RenderPartial("MyPartialView"); %>
</div> 
```

其中 MyPartialView 是：

```
<div id="comments">
    <% using (Ajax.BeginForm(new AjaxOptions() { UpdateTargetId = "myDiv", InsertionMode = InsertionMode.Replace } )) {%>        
    ...
    <input type="submit" value="Submit comment" />
    <% } %>
</div> 
```

如果在局部视图中包含 '#myDiv' div，它将在收到响应后立即呈现（连同它的内容），然后它的内容将被替换为相同局部视图的响应（包括它自己的' #myDiv' div），这就是为什么你总是以 2 个嵌套的 div 结尾。

您应该始终为局部视图使用容器，然后将 UpdateTargetId 设置为容器 ID。

**编辑：**我更新了代码以代表您在问题中描述的确切情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-31T01:23:20.987

您使用的是 AjaxHelper.Form 还是 jQuery。如果您使用的是 jQuery，您是否尝试过使用[replaceWith()](http://docs.jquery.com/Manipulation/replaceWith#content)？使用 AjaxHelper 你在使用`AjaxOptions { InsertionMode = InsertionMode.Replace }`吗？我认为使用任何一种方法都可以将整个 DIV 替换为部分视图的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-28T17:20:56.200

我在 Asp.Net MVC 5 中遇到了同样的问题。

我不希望 PartialView 知道它可能包含在哪个 div 中，所以我不接受这种解决方法。

然后，我注意到其他关于 ReplaceWith 的答案并找到了简单的解决方案：

```
InsertionMode = InsertionMode.ReplaceWith 
```

现在，mvc 部分视图可以完全用 ajax 助手替换自己，而无需对自身外部的名称有任何依赖。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-31T10:24:15.527

您也应该尝试使用 jQuery（来自我对[MS MVC 表单 AJAXifying 技术](https://stackoverflow.com/questions/930074/ms-mvc-form-ajaxifying-techniques)的回答）：

```
<script type="text/javascript">
    $(document).ready(function() {
        ajaxify($('div#comments'));
    });

    function ajaxify(divWithForm) {
        var form = $('form', divWithForm);
        $(':submit', form).click(function (event) {
            event.preventDefault();
            $.post(form.attr('action'), form.serialize(),
                function(data, status) {
                    if(status == 'success') {
                        var newDivWithForm = $(data);
                        ajaxify(newDivWithForm);
                        divWithForm.after(newDivWithForm).remove();
                    }
                }
            );
        });
    }
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T11:20:42.310

你解决了问题吗？我有同样的问题，但我发现了这个：

[http://buildingwebapps.blogspot.ro/2011/11/jquerys-replacewith-and-using-it-to.html](http://buildingwebapps.blogspot.ro/2011/11/jquerys-replacewith-and-using-it-to.html)

我希望它对你有帮助。

# java-me - 如何在 Java ME 中调用和保存联系人？

> ID：931009
> 
> 赞同：1
> 
> 时间：2009-05-31T01:17:43.820
> 
> 标签：java-me, save, call, contacts, midp

我正在使用 j2me 做一个程序，程序中的最后一个窗口有一个包含地点名称、编号和位置的表单。

我想知道：

1.  如果有什么方法可以拨打出现在窗口中的号码？

2.  是否有任何方法可以保存联系人中的信息（姓名和号码）？

任何教程或示例都应用了此功能 << 因为我搜索了很多，但没有找到有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T07:22:47.507

您可以使用 midlet.platformRequest("tel:[telephone number]") 拨打电话。至于访问手机中的联系人或将联系人保存到手机的通讯录中，您的手机需要 JSR 75 API 功能，并且您可能还需要签署构建

# e-commerce - 销售物品和跟踪库存的最简单方法

> ID：931010
> 
> 赞同：0
> 
> 时间：2009-05-31T01:17:45.380
> 
> 标签：e-commerce, paypal, payment, inventory

在我的网站上，我出售独特的物品。我已经对其进行了编程，以便在销售页面上，用户可以选择任意数量的这些商品，并计算成本。关键是这些物品我只有一件。所以我需要购物车系统不允许付款通过，除非它可用。

我一直在寻找一个好的快速/简单/便宜的解决方案，但找不到。我不指望这个网站能赚很多钱（交易几块钱），所以我不想需要ssl证书。

我知道不需要 ssl 证书的唯一方法是使用 paypal 或 google checkout。但是，我认为没有办法使用这些服务并让 paypal 的服务器运行脚本来检查网站上有多少可用服务。有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-23T14:36:46.237

如果您使用 PayPal 网站付款标准（使用购物车而不是“立即购买”按钮），那么您可以使用 IPN 或 PDT（请参阅[此处](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/library_documentation#wps)的 paypal 文档）让 PayPal 回电给您并告知付款状态。

然后，工作流程是在将商品添加到购物车时将状态设置为已保留，然后等待 IPN/PDT 调用返回付款状态，并将商品标记为已售出。

您仍然需要检查并重置任何已保留超过 2 小时的项目。（您可以在向用户提供页面之前执行此操作，以便他们拥有最新的可用性，并且您不需要 cron 作业或长时间运行的进程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-09T13:49:40.560

如果您能提供更多关于您如何实施您的购物卡的信息，其他人会更容易提供帮助！如果您正在使用任何电子商务解决方案，那么它应该已经存在于跟踪库存部分中。但是，如果您已经手动实现了购物车，为什么不在让您的客户结帐之前先添加一点检查库存状态的代码呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T01:28:19.823

我想了更多，我认为问题是一旦用户进入贝宝支付屏幕，我就无法控制。我想我可以做一些事情，比如他们点击立即购买链接，一个 php 脚本将其更新为已售出，然后他们转到贝宝屏幕，但他们可能不会继续购买......

# jquery - jQuery验证错误放置和删除元素？

> ID：931013
> 
> 赞同：4
> 
> 时间：2009-05-31T01:18:20.590
> 
> 标签：jquery, jquery-plugins, validation, jquery-validate

好的，我已经尝试了一些东西，但我被困在这里......

这是我正在使用的 HTML：

```
<div class="required">
<label for="paysys_idworldpay" class="labelRadio">
<input type="radio" value="worldpay" name="paysys_id" id="paysys_idworldpay" class="inputRadio"/>
<b>WorldPay</b></label>
<label for="paysys_idoffline" class="labelRadio">
<input type="radio" value="offline" name="paysys_id" id="paysys_idoffline" class="inputRadio"/>
<b>Paypal</b></label></div>

<div class="required">
<label for="email">Email Address</label>
<input type="text" value="" name="email" class="required email inputText" id="email" /></div> 
```

这是我在此表单的 validate() 函数中获得的代码：

```
 errorElement: 'p',
errorClass: 'error',
errorPlacement: function(error, element) {
    error.insertBefore(element.prev());
    element.parent().addClass('error');
},
success: function(label){
    label.removeClass('error');
    label.parent().removeClass('error');
} 
```

现在，这对于上述表单中的“电子邮件”之类的字段来说效果很好（它插入一个段落并为其分配一个 class="error" 并在包装 div 的类中添加“error”）......但是对于单选按钮它的工作方式不同——它将“错误”类添加到周围的标签中，它甚至不插入带有错误类的段落。为什么？

我在这里错过了什么/做错了什么？

另外，我如何实际删除“成功”部分中添加的段落？就像现在一样，它只是从其类属性中删除了“错误”，并且在输入字段中输入的每个字母都会添加另一个空段落，如下所示：

```
<p generated="true" class=""/> 
```

所以我最终在每个字段的每个 div 中都有一堆那些（取决于输入了多少个字符）......再次，我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T06:21:37.170

如果您发布完整的验证功能以及它是如何连接到您的表单的，那将会有所帮助。

不过，我认为可以指出几点：

您的单选按钮包含在其标签内，而您的电子邮件输入则位于其标签旁边。您的代码指定：

```
 error.insertBefore(element.prev()); 
```

这意味着它将在 <input> 元素的前一个邻居之前插入错误 DIV。您的单选按钮没有前面的邻居，它在标签元素中是单独的。您应该将代码更改为：

```
error.prependTo(element.parents("div.required")).addClass("errorMsg"); 
```

其次，要在成功验证时删除 <P> 标记，您需要调用 remove() 函数：

```
error.remove(); // assuming "error" is the &lt;P&gt; tag. 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T01:40:31.763

您是否尝试过使用[FireBug](http://getfirebug.com/)进行调试？在您使用它时，请使用 DOM 检查器来确保树结构符合您的期望。

# macos - 无法让 Firefox 打开 Ack 的输出

> ID：931036
> 
> 赞同：0
> 
> 时间：2009-05-31T01:35:26.627
> 
> 标签：macos, firefox, ack

我的目标是列出我在笔记中使用 NB 一词的行。

**伪代码**

```
open -a Firefox `ack -a NB` 
```

但是，我无法让 Firefox 理解来自终端的参数。Ack 的输出是一个文本文件，所以它应该以某种方式重定向到 Firefox。

我跑不成功

```
open "http://`ack -a NB`" 
```

我进入 Firefox 的地址栏

```
http://[1/;32mACK-grep/.todo%1B%5B0m:3:%20%20%20%20%20%20%20%20to%20find%20%1B%5B30;43mNB%1B%5B0ms%20use%20ack%20-a%20%1B%5B30;43mNB%1B%5B0m%1B%5B0m%1B%5BK%0A%1B%5B1;32mAPI/.todo%1B%5B0m:5:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%1B%5B0m%1B%5BK%0A%1B%5B1;32mAWK/.todo%1B%5B0m:5:%20%20%20%20%20%20%20%20%20%20%20%20Changing%20the%20field%20separator.%20%1B%5B30;43mNB%1B%5B0m%20do%20non%20confuse%20the%20field%20separator%20to%20small%20f%20i.e.%20-f%20for%20the%20name%20of%20a%20script%20file%1B%5B0m%1B%5BK%0A%1B%5B1;32mBg-disown/.todo%1B%5B0m:12:%1B%5B30;43mNB%1B%5B0m%20disowning%20is%20a%20one%20way%20street.%20There%20is%20no%20way%20to%20reattach%20as%20with%20screen.%1B%5B0m%1B%5BK%0A%1B%5B1;32mC-C++/Getting-started/.todo%1B%5B0m:6:%1B%5B30;43mNB%1B%5B0m%20endl%20indicates%20line%20output.%1B%5B0m%1B%5BK%0A%1B%5B1;32mC-C++/Getting-started/.todo%1B%5B0m:38:%1B%5B30;43mNB%1B%5B0m%20stdexcept%20allows%20standard%20exceptions%1B%5B0m%1B%5BK%0A%1B%5B1;32mC-C++/Getting-started/.todo%1B%5B0m:45:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20ensure%20that%20the%20user%27s%20given%20value%20is%20not%20eg%20string%20when%20the%20program%20wants%20a%20figure%1B%5B0m%1B%5BK%0A%1B%5B1;32mC-C++/Getting-started/.todo%1B%5B0m:63:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20&amp;num%20is%20same%20as%20num&amp;%1B%5B0m%1B%5BK%0A%1B%5B1;32mC-C++/Special-facts/.todo%1B%5B0m:3:%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20**in%20C++:%20http://stackoverflow.com/questions/644981/what-is-in-c/644989%23644989%1B%5B0m%1B%5BK%0A%1B%5B1;32mCompilers/3goals/.todo%1B%5B0m:6:%1B%5B30;43mNB%1B%5B0m%20parsing%20alone%20solves%20most%20of%20the%20compiler%20related%20problems%1B%5B0m%1B%5BK%0A%1B%5B1;32mCompilers/3goals/.todo%1B%5B0m:12:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%1B%5B0m%1B%5BK%0A%1B%5B1;32mDjango/.todo%1B%5B0m:10:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20Pinar%1B%5B0m%1B%5BK%0A%1B%5B1;32mDjango/Django-admin.py/.todo%1B%5B0m:9:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20install%20the%20tab%20completion%1B%5B0m%1B%5BK%0A%1B%5B1;32mDjango/GettingStarted/Basics-manage.py-startapp/.todo%1B%5B0m:7:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20__init__.py%20is%20also%20created%1B%5B0m%1B%5BK%0A%1B%5B1;32mDjango/GettingStarted/tempaltetags/.todo%1B%5B0m:11:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20tests%1B%5B0m%1B%5BK%0A%1B%5B1;32mED-SED/SED/Flags/.todo%1B%5B0m:5:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20combine%20statements%1B%5B0m%1B%5BK%0A%1B%5B1;32mED-SED/SED/Getting-started/.todo%1B%5B0m:26:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20swaps%20the%20words%1B%5B0m%1B%5BK%0A%1B%5B1;32mED-SED/SED/Getting-started/.todo%1B%5B0m:35:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20the%20use%20of%20%5C1,%20which%20takes%20the%201st%20match%1B%5B0m%1B%5BK%0A%1B%5B1;32mED-SED/SED/Getting-started/.todo%1B%5B0m:41:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20add%20brackets%20around%20each%20matches%1B%5B0m%1B%5BK%0A%1B%5B1;32mED-SED/SED/Getting-started/.todo%1B%5B0m:51:%20%20%20%20%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20remove%20duplicates%1B%5B0m%1B%5BK%0A%1B%5B1;32mED-SED/SED/Matches/.todo%1B%5B0m:3:%20%20%20%20%20%20%20%20%1B%5B30;43mNB%1B%5B0m%20sed%20-ie%20%27s/SO/so%27%20app.yaml%1B%5B0m%1B%5BK%0A%1B%5B1;32mEmacs/.todo%1B%5B0m:21:%1B%5B30;43mNB%1B%5B0m%20same%20commands%20as%20in%20terminal%1B%5B0m%1B%5BK%0ABinary%20file%20Emacs/keybindings/emacs-keywords.png%20matches%0A%1B%5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T01:41:32.323

Firefox 在其命令行上获取 URL；打开需要文件。ack 的标准输出不是 URL（或文件）。相反，您需要将 ack 的输出写入文件，并让 firefox 打开该文件。

```
ack-grep -a NB > ~/ack-out.txt
open -a Firefox ~/ack-out.txt 
```

我不确定您为什么*要这样做*，但这应该可以。请注意，您可能不会以这种方式获得颜色。ack 不写 HTML AFAIK。

# sql-server - 在 SQL Server 2005 中使用全文搜索的“听起来很像”、“你是说那个”功能

> ID：931046
> 
> 赞同：3
> 
> 时间：2009-05-31T01:40:53.667
> 
> 标签：sql-server, full-text-search, soundex

我已经使用 CONTAINSTABLE 关键字在 SQL Server 2005 数据库上实现了全文搜索。我想知道如果原始查询没有产生任何结果，是否有办法添加“听起来像”或谷歌的“你的意思是那个”功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T02:23:36.607

SQL Server 的 soundex 非常有限且令人沮丧，我真的建议你看看 Lucene.net [http://incubator.apache.org/lucene.net/](http://incubator.apache.org/lucene.net/)。Lucene 是一个高性能、全功能的文本搜索引擎库，在 .NET 项目中也很容易使用。如果您的应用程序需要一个严肃的搜索引擎，请使用 Lucene。

[从http://lucene.apache.org/java/docs/features.html](http://lucene.apache.org/java/docs/features.html)检索到的一些特性：

*   排名搜索，最佳结果
*   返回第一个许多强大的查询
*   类型：短语查询、通配符
*   查询、邻近查询、范围
*   查询和更多领域的搜索（例如，标题、作者、内容）
*   ate-range 搜索按任何排序
*   字段多索引搜索
*   合并的结果允许同时
*   更新和搜索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T01:59:30.507

SQL Server 具有[SOUNDEX](http://msdn.microsoft.com/en-us/library/ms187384.aspx)和[DIFFERENCE函数](http://msdn.microsoft.com/en-us/library/ms188753.aspx)

这个相关的 SO 答案可能很有用：[如何使 sql 搜索查询更强大？](https://stackoverflow.com/questions/679998/how-to-make-a-sql-search-query-more-powerful)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T02:42:12.043

如果您希望能够做到这一点，您需要规范化原始文本和查询。简单的示例，如果您希望能够搜索 SOUNDEX 类型的值，则需要对查询字符串和要查询的原始原始数据进行 SOUNDEX。您无法即时有效地处理查询空间，因此您可以在创建索引期间对其进行规范化。

从技术上讲，您只需要规范化实际索引，而不是数据，但由于您的数据可能是您的索引，因此需要对其进行规范化。

这与单词的“词干”、删除复数等相同的过程。

# interrupt-handling - 如果在第一个中断操作完成之前引发另一个中断会发生什么？

> ID：931057
> 
> 赞同：8
> 
> 时间：2009-05-31T01:49:45.893
> 
> 标签：interrupt-handling

这个问题来自中断处理主题。

假设正在处理一个中断。如果在第一个中断操作完成之前引发另一个中断会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T03:20:58.910

以下内容仅适用于 x86 架构，但其他架构可能会遵循相同的模式：

有一个称为`IF`（中断标志）的处理器标志，它控制硬件中断是否可以被处理，或者必须被搁置。当 IF = 0 时，中断将被推迟，直到重新启用标志（NMI 除外，即不可屏蔽中断，它旨在作为无法阻止的“仅紧​​急”中断）。

在`IF`调用中断服务程序之前，处理器会自动清除它。这对于防止中断调用变得失控是必要的。请注意，中断服务代码本身无法自行执行此操作，因为如果`IF`在进入例程之前未禁用，则可能在服务代码有时间执行甚至一条指令之前发生更多中断。然后，中断的“消防水带”将立即导致（在所有事情中）堆栈溢出。

因此，回答您的直接问题：通常，当第二个硬件中断发生在第一个硬件中断正在服务时，该中断将被搁置，直到第一个中断完成。

像往常一样，整个故事有点复杂。英特尔网站上的[英特尔架构软件开发人员手册](http://developer.intel.com/design/pentium/manuals/24319001.pdf "手动的")从第 10-4 页开始提供了更完整的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T01:54:09.630

这取决于系统。通常，如果新中断的优先级高于第一个中断，则会对其进行响应，挂起第一个中断的处理程序。当其处理程序完成时，原始中断处理程序将恢复。最后，假设不再有中断，原始处理程序完成并恢复正常服务。有时，恢复的进程会是被中断的进程；有时，它将不再是最符合条件的流程，而其他流程将恢复。

类似地，如果原始中断的第二个或后续实例在第一个处理程序完成之前发生，或者如果发生较低或同等优先级的中断，它将一直保持到第一个处理程序完成。在恢复正常处理之前，内核会检查本应处理但被阻止的未完成中断。

中断处理程序可能会阻止其他中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T01:53:03.673

好吧，如果在第一个中断之后没有禁用中断，那么第二个将导致您的中断服务程序再次被调用。您必须确保中断被禁用以避免这种明显不受欢迎的行为。

所以，如果你的中断服务程序正在做它的事情，然后另一个中断发生了，就好像你在做其他事情一样：相应的中断程序将被调用。

在 Intel 架构上，“cli”指令将禁用中断，而“sti”将再次启用它们。

# php - 棘手的 PHP/Mysql 日期计算

> ID：931059
> 
> 赞同：0
> 
> 时间：2009-05-31T01:51:53.550
> 
> 标签：php, mysql

我有一个日期，例如`2009-06-30`（2009 年 6 月 30 日）。我想计算一个出现在第一个日期之前或之后 2 个月和 3 天的日期。或者，3 个月、6 天、之前或之后等。我该怎么做？有没有简单的方法使用`DATE_SUB()`或`DATE_ADD()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T01:56:25.210

`DATE_ADD(whatever, INTERVAL 2 MONTH) + INTERVAL 3 DAY`例如（只是为了显示您可以在 MySQL 中用于此任务的两种语法变体）将给出一个 2 个月零 3 天之后的日期`whatever`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T01:57:09.077

[Zend_Date](http://framework.zend.com/manual/en/zend.date.html)非常适合这种事情。Zend_Date 是 Zend_Framework 的一部分，您可以只使用 Zend_Date 部分，不必使用框架的整个部分。

您可以在日期中添加几天或几个月，它会为您处理所有复杂性。它比我在 PHP 中找到的任何其他方法都容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T02:01:54.637

您应该能够使用[DateTime:sub](http://ca.php.net/manual/en/datetime.sub.php)。要获得 3 个月零 6 天的日期，您应该能够使用：

```
date_sub($myDate,"P3M6D"); 
```

# c# - NHibernate 中的映射表枚举

> ID：931075
> 
> 赞同：0
> 
> 时间：2009-05-31T02:00:44.703
> 
> 标签：c#, .net, nhibernate, domain-driven-design, orm

我目前正在构建一个基于旧数据库的新应用程序。在应用程序中，有许多具有以下格式的“列表”表：

```
table listLanguages
{
    PrimaryId bigint;
    Item varchar(30);
} 
```

...有一些像这样的示例条目：

```
PrimaryId Item
1         English
2         French
3         Spanish
... 
```

它们用于填充 Web 表单中的下拉列表，例如编辑客户详细信息。当它们保存在客户记录中时，使用的是完整的字符串值，而不是 ID。我必须保持这种行为。

我的问题是：使用 NHibernate 在我的域模型中映射这些的最佳方法是什么？

我无法更改数据库的结构，并且有很多列表（我会说大约 40 个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T02:06:35.923

我通常使用代码生成从相关的数据库表中创建 C# 枚举：

```
public enum Language
{
    NoneSpecified = 0,
    English       = 1,
    French        = 2,
    Spanish       = 3,
    ... 
} 
```

查看 Visual Studio 2005 及更高版本中内置的 T4 模板代码生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T03:38:33.017

这是我在一个项目中所做的：我为这些表创建了一个基类，并为从该基类继承的每个表创建了一个子类，然后我为每个表创建了单独的映射文件。

虽然我认为可以有一些更复杂的解决方案，比如使用 IInterceptor 来拦截负载行为或使用配置类在运行时添加一些映射文件，但这些都是一些选项。

# time - 正确的 ISO 8601 格式

> ID：931081
> 
> 赞同：2
> 
> 时间：2009-05-31T02:02:39.783
> 
> 标签：time, timezone, iso8601

我正在为 Ruby 库重构一些代码。此代码包括一个日期解析器。其中一项测试是解析这个字符串 "2008-02-20T8:05:00-010:00" ，它应该是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)。

前面的代码实际上会输出：“Wed Feb 20 18:05:00 UTC 2008”。我的新代码输出：“Wed Feb 20 16:05:00 UTC 2008”。

我的问题是：哪一个是正确的？

`Time.parse`在 Ruby 中给出了第二个。但同样，我想 100% 确定之前的代码和测试有问题。

哪一个是对的？（也许通过用另一种语言的库来解析字符串？-我只知道 Ruby。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T02:15:13.300

正确的 UTC 时间是 1805。时间组指示区域 -10 中的 0805，因此要获得 UTC，请将 10 添加到给定时间。因此是 1805。因为 1805 小于 2400，所以是同一天。

如果您的代码给出 1605，那么您几乎可以肯定将时区错误地设置为 -8 区，恰好是太平洋标准时间。

* * *

啊哈，看起来你的输入格式搞砸了。观察：

```
irb(main):003:0> Time.parse("2008-02-20T8:05:00-010:00") 
=> Wed Feb 20 08:05:00 -0700 2008 
```

我恰好在 -7 区，所以它适合我的语言环境。但

```
irb(main):004:0> t=Time.parse("2008-02-20T8:05:00-010:00")
=> Wed Feb 20 08:05:00 -0700 2008
irb(main):005:0> t
=> Wed Feb 20 08:05:00 -0700 2008
irb(main):006:0> t.getutc
=> Wed Feb 20 15:05:00 UTC 2008 
```

我得到了一个意想不到的结果。现在观察：

```
irb(main):007:0> t=Time.parse("2008-02-20T8:05:00-10:00")
=> Wed Feb 20 11:05:00 -0700 2008
irb(main):008:0> t.getutc
=> Wed Feb 20 18:05:00 UTC 2008 
```

有*预期*的结果。看到不同？第一个示例与第二个示例：

```
irb(main):004:0> t=Time.parse("2008-02-20T8:05:00-010:00")
irb(main):007:0> t=Time.parse("2008-02-20T8:05:00-10:00") 
```

我取出了虚假的额外 0（*我*当然也没有注意到），嗖嗖，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-06T01:37:35.240

我知道这已经很老了，但我只是遇到了它。

我敢打赌，某处的某些东西被解释`010`为值为 8的*八进制*`Time.parse()`数。也许这是实现中的一个错误？

# svn - SVN 将 drupal 结帐到另一个站点

> ID：931083
> 
> 赞同：0
> 
> 时间：2009-05-31T02:05:10.730
> 
> 标签：svn, drupal, installation, svn-checkout

我正在尝试 svn checkout 到 treeoil.com 的 public_html 目录（该站点实际上并未命名为 treeoil.com），但我的仓库位于我的其他站点之一（landonwinters.com）上。当我尝试进行此结帐时：

```
svn checkout file:///home/landonwinters/svn/treeoil/trunk . 
```

但我收到一条错误消息：

```
svn: Unable to open an ra_local session to URL
svn: Unable to open repository 'file:///home/landonwinters/svn/treeoil/trunk'
svn: Can't open file '/home/landonwinters/svn/treeoil/trunk/format': Permission denied 
```

我有两个帐户的用户名和密码...

请帮忙 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T04:52:45.617

我认为您的结帐网址不正确。当 svn 服务器位于同一台机器的本地时，您使用“文件”，而不是如果它完全在另一台机器上。也许像`svn checkout http://landonwinters.com/svn/treeoil/trunk` 什么？

# iphone - 到 Imageshack 的 HTTP POST

> ID：931088
> 
> 赞同：0
> 
> 时间：2009-05-31T02:06:49.527
> 
> 标签：iphone, cocoa-touch, imageshack

我目前正在通过 HTTP POST 将图像上传到我的服务器。使用下面的代码一切正常。

```
NSString *UDID = md5([UIDevice currentDevice].uniqueIdentifier);
NSString *filename = [NSString stringWithFormat:@"%@-%@", UDID, [NSDate date]];
NSString *urlString = @"http://taptation.com/stationary_data/index.php";
request= [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];
NSMutableData *postbody = [NSMutableData data];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.jpg\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[NSData dataWithData:imageData]];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:postbody];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(returnString); 
```

但是，当我尝试将其转换为使用 Image Shacks XML API 时，它不会返回任何内容。ImageShack 的说明如下。

> 通过 POST 将以下变量发送到 imageshack。我们/index.php
> 
> 上传文件; （图像）xml =“是”；（指定 XML 的返回）cookie；（注册码，可选）

有谁知道我应该从这里去哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T08:03:42.750

您可能需要考虑使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest)，因为它会为您构建一个表单数据发布主体，并且可以减少很多麻烦，并且可以从磁盘流式传输请求主体，因此您在上传大图像时可以节省内存。

一个快速的谷歌发现[了这个](http://reg.imageshack.us/content.php?page=developerpublic)，这似乎表明你应该发布到 /upload_api.php 而不是 /index.php。

这样的事情可能是一个好的开始：

```
ASIFormDataRequest *request = [[[ASIFormDataRequest alloc] initWithUrl:[NSURL URLWithString:@"http://www.imageshack.us/upload_api.php"]] autorelease];
[request setFile:@"/path/to/file" forKey:@"fileupload"];
[request setPostValue:@"yes" forKey:@"xml"];
[request setPostValue:@"blahblah" forKey:@"cookie"];
//It looks as though you probably need these too
[request setPostValue:@"me@somewhere.com" forKey:@"email"];
[request setPostValue:@"blah" forKey:@"key"];
[request start];
if ([request error]) {
    NSLog(@"%@",[request error]);
} else {
    NSLog([request responseString]); // The xml that got sent back
} 
```

警告：未经测试！

我使用了同步请求，因为您使用了，但您几乎可以肯定应该使用异步请求（带有 ASIHTTPRequest 的队列）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-02-16T01:31:14.570

花了我一段时间，但你需要使用 ASIHTTPREQUEST！

```
- (void)uploadToImageShack {
NSAutoreleasePool *paul = [[NSAutoreleasePool alloc] init];
UIImage *tempImage = self.selectedimage;
ASIFormDataRequest *request = [[[ASIFormDataRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.imageshack.us/upload_api.php"]] autorelease];
NSData *imageData = UIImagePNGRepresentation(tempImage);
[request setFile:imageData withFileName:@"image" andContentType:@"image/png" forKey:@"fileupload"];
[request setPostValue:@"yes" forKey:@"xml"];
[request setPostValue:@"3ZQ7C09K708fce677d9cadee04811cfcbdf63361" forKey:@"key"];
[request setUseCookiePersistence:NO];
[request startSynchronous];
NSError *error = [request error];
if (error) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alert show];
    [alert release];
}
else if (!error) {
    if ([request responseString]) {
        parser = [[NSXMLParser alloc] initWithData:[[NSData alloc] initWithData:[request responseData]]];
        [parser setDelegate:self];
        [parser parse];
    }
}   
[paul drain];
} 
```

# python - 在 Python 中反转字符串

> ID：931092
> 
> 赞同：1527
> 
> 时间：2009-05-31T02:10:10.377
> 
> 标签：python, string

`reverse`Python 的`str`对象没有内置函数。实现此方法的最佳方法是什么？

如果提供非常简洁的答案，请详细说明其效率。例如，`str`对象是否转换为不同的对象等。

* * *

## 回答 #1

> 赞同：2909
> 
> 时间：2009-05-31T02:11:46.380

怎么样：

```
>>> 'hello world'[::-1]
'dlrow olleh' 
```

这是[扩展切片](http://docs.python.org/2/whatsnew/2.3.html#extended-slices)语法。它的工作原理是`[begin:end:step]`- 通过离开开始和结束并指定 -1 的步骤，它反转一个字符串。

* * *

## 回答 #2

> 赞同：290
> 
> 时间：2009-05-31T02:13:54.927

@Paolo`s[::-1]`最快；一种较慢的方法（可能更具可读性，但这值得商榷）是`''.join(reversed(s))`.

* * *

## 回答 #3

> 赞同：272
> 
> 时间：2015-01-08T15:32:55.983

> # 为字符串实现反向函数的最佳方法是什么？

我自己对这个问题的经验是学术性的。但是，如果您是寻求快速答案的专业人士，请使用以下步骤的切片`-1`：

```
>>> 'a string'[::-1]
'gnirts a' 
```

或者更具可读性（但由于方法名称查找以及在给定迭代器时 join 形成列表这一事实，速度较慢）`str.join`，：

```
>>> ''.join(reversed('a string'))
'gnirts a' 
```

或者为了可读性和可重用性，将切片放在一个函数中

```
def reversed_string(a_string):
    return a_string[::-1] 
```

进而：

```
>>> reversed_string('a_string')
'gnirts_a' 
```

## 更长的解释

如果您对学术展览感兴趣，请继续阅读。

> Python 的 str 对象中没有内置的 reverse 函数。

以下是您应该了解的有关 Python 字符串的几件事：

1.  在 Python 中，**字符串是不可变的**。更改字符串不会修改字符串。它创造了一个新的。

2.  字符串是可切片的。切片字符串会给你一个新的字符串，从字符串中的一个点向后或向前，到另一个点，按给定的增量。它们采用切片符号或下标中的切片对象：

    ```
    string[subscript] 
    ```

下标通过在大括号中包含冒号来创建切片：

```
 string[start:stop:step] 
```

要在大括号之外创建切片，您需要创建切片对象：

```
 slice_obj = slice(start, stop, step)
    string[slice_obj] 
```

## 一种可读的方法：

虽然`''.join(reversed('foo'))`可读，但它需要在另一个被调用函数上调用字符串方法 , `str.join`，这可能相对较慢。让我们把它放在一个函数中——我们会回到它：

```
def reverse_string_readable_answer(string):
    return ''.join(reversed(string)) 
```

## 最高效的方法：

使用反向切片要快得多：

```
'foo'[::-1] 
```

但是，对于不熟悉切片或原作者意图的人来说，我们如何才能使其更具可读性和可理解性呢？让我们在下标符号之外创建一个切片对象，给它一个描述性的名称，然后将它传递给下标符号。

```
start = stop = None
step = -1
reverse_slice = slice(start, stop, step)
'foo'[reverse_slice] 
```

## 实现为函数

要将其实际实现为一个函数，我认为它在语义上已经足够清晰，只需使用一个描述性的名称：

```
def reversed_string(a_string):
    return a_string[::-1] 
```

用法很简单：

```
reversed_string('foo') 
```

## 你的老师可能想要什么：

如果您有讲师，他们可能希望您从一个空字符串开始，然后从旧字符串构建一个新字符串。您可以使用 while 循环使用纯语法和文字来执行此操作：

```
def reverse_a_string_slowly(a_string):
    new_string = ''
    index = len(a_string)
    while index:
        index -= 1                    # index = index - 1
        new_string += a_string[index] # new_string = new_string + character
    return new_string 
```

这在理论上很糟糕，因为请记住，**字符串是不可变的**- 所以每次看起来你正在将一个字符附加到你的`new_string`，它理论上每次都创建一个新字符串！但是，CPython 知道如何在某些情况下对此进行优化，这种简单的情况就是其中之一。

## 最佳实践

理论上更好的方法是将您的子字符串收集在一个列表中，然后再加入它们：

```
def reverse_a_string_more_slowly(a_string):
    new_strings = []
    index = len(a_string)
    while index:
        index -= 1                       
        new_strings.append(a_string[index])
    return ''.join(new_strings) 
```

但是，正如我们将在下面的 CPython 时序中看到的那样，这实际上需要更长的时间，因为 CPython 可以优化字符串连接。

## 计时

以下是时间安排：

```
>>> a_string = 'amanaplanacanalpanama' * 10
>>> min(timeit.repeat(lambda: reverse_string_readable_answer(a_string)))
10.38789987564087
>>> min(timeit.repeat(lambda: reversed_string(a_string)))
0.6622700691223145
>>> min(timeit.repeat(lambda: reverse_a_string_slowly(a_string)))
25.756799936294556
>>> min(timeit.repeat(lambda: reverse_a_string_more_slowly(a_string)))
38.73570013046265 
```

CPython 优化了字符串连接，而其他实现[可能不会](https://www.python.org/dev/peps/pep-0008/#programming-recommendations)：

> ...不要依赖 CPython 对 a += b 或 a = a + b 形式的语句的就地字符串连接的有效实现。即使在 CPython 中，这种优化也是脆弱的（它只适用于某些类型），并且在不使用引用计数的实现中根本不存在。在库的性能敏感部分，应该使用 ''.join() 形式。这将确保连接在各种实现中以线性时间发生。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2015-10-31T22:24:14.817

## 快速回答 (TL;DR)

### 例子

```
### example01 -------------------
mystring  =   'coup_ate_grouping'
backwards =   mystring[::-1]
print(backwards)

### ... or even ...
mystring  =   'coup_ate_grouping'[::-1]
print(mystring)

### result01 -------------------
'''
gnipuorg_eta_puoc
''' 
```

## 详细解答

### 背景

提供此答案是为了解决@odigity 的以下问题：

> 哇。起初我对 Paolo 提出的解决方案感到震惊，但这让我在阅读第一条评论时感到恐惧：“这非常pythonic。干得好！” 我很不安，以至于这样一个聪明的社区认为对如此基本的事情使用这种神秘的方法是个好主意。为什么不只是 s.reverse()？

### 问题

*   **语境**
    *   Python 2.x
    *   Python 3.x
*   **设想：**
    *   开发人员想要转换一个字符串
    *   转换是反转所有字符的顺序

### 解决方案

*   [example01 使用扩展切片表示法](https://docs.python.org/2/whatsnew/2.3.html?highlight=extended%20slice#extended-slices)产生所需的结果。

### 陷阱

*   开发人员可能期望类似`string.reverse()`
*   新开发人员可能无法阅读本机惯用（又名“ [pythonic ”）解决方案](https://stackoverflow.com/a/25011492/42223)
*   开发人员可能会尝试实现他或她自己的版本`string.reverse()`以避免切片符号。
*   在某些情况下，切片符号的输出可能违反直觉：
    *   参见例如example02
        *   `print 'coup_ate_grouping'[-4:] ## => 'ping'`
        *   相比
        *   `print 'coup_ate_grouping'[-4:-1] ## => 'pin'`
        *   相比
        *   `print 'coup_ate_grouping'[-1] ## => 'g'`
    *   索引的不同结果`[-1]`可能会让一些开发人员失望

### 基本原理

Python 有一个特殊情况需要注意：字符串是[可迭代](https://docs.python.org/2/glossary.html#term-iterable)的类型。

排除一种方法的一个理由`string.reverse()`是鼓励 Python 开发人员利用这种特殊情况的力量。

简而言之，这意味着字符串中的每个单独字符都可以作为元素顺序排列的一部分轻松操作，就像其他编程语言中的数组一样。

要了解其工作原理，查看 example02 可以提供一个很好的概述。

### Example02

```
### example02 -------------------
## start (with positive integers)
print 'coup_ate_grouping'[0]  ## => 'c'
print 'coup_ate_grouping'[1]  ## => 'o' 
print 'coup_ate_grouping'[2]  ## => 'u' 

## start (with negative integers)
print 'coup_ate_grouping'[-1]  ## => 'g'
print 'coup_ate_grouping'[-2]  ## => 'n' 
print 'coup_ate_grouping'[-3]  ## => 'i' 

## start:end 
print 'coup_ate_grouping'[0:4]    ## => 'coup'    
print 'coup_ate_grouping'[4:8]    ## => '_ate'    
print 'coup_ate_grouping'[8:12]   ## => '_gro'    

## start:end 
print 'coup_ate_grouping'[-4:]    ## => 'ping' (counter-intuitive)
print 'coup_ate_grouping'[-4:-1]  ## => 'pin'
print 'coup_ate_grouping'[-4:-2]  ## => 'pi'
print 'coup_ate_grouping'[-4:-3]  ## => 'p'
print 'coup_ate_grouping'[-4:-4]  ## => ''
print 'coup_ate_grouping'[0:-1]   ## => 'coup_ate_groupin'
print 'coup_ate_grouping'[0:]     ## => 'coup_ate_grouping' (counter-intuitive)

## start:end:step (or start:end:stride)
print 'coup_ate_grouping'[-1::1]  ## => 'g'   
print 'coup_ate_grouping'[-1::-1] ## => 'gnipuorg_eta_puoc'

## combinations
print 'coup_ate_grouping'[-1::-1][-4:] ## => 'puoc' 
```

### 结论

对于一些不想花太多时间学习这门语言的采用者和开发人员来说，与理解切片符号如何在 python 中工作相关的[认知负担确实可能太大了。](https://en.wikipedia.org/wiki/Cognitive_load)

然而，一旦理解了基本原理，这种方法相对于固定字符串操作方法的强大功能可能会非常有利。

对于那些不这样认为的人，还有其他方法，例如 lambda 函数、迭代器或简单的一次性函数声明。

如果需要，开发人员可以实现自己的 string.reverse() 方法，但是最好了解 Python 的这一方面背后的基本原理。

### 也可以看看

*   [替代简单方法](https://stackoverflow.com/a/6238928/42223)
*   [替代简单方法](https://stackoverflow.com/a/766291/42223)
*   [切片符号的替代解释](https://stackoverflow.com/questions/509211/explain-pythons-slice-notation)

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2019-05-23T20:48:49.367

这个答案有点长，包含 3 个部分：现有解决方案的**基准**，**为什么这里的大多数解决方案都是错误的**，**我的解决方案**。

仅当忽略 Unicode 修饰符/字素簇时，现有答案才是正确的。我稍后会处理这个问题，但首先看看一些反转算法的速度：

[![在此处输入图像描述](https://i.stack.imgur.com/JiAue.png)](https://i.stack.imgur.com/JiAue.png)

```
list_comprehension  : min:   0.6μs, mean:   0.6μs, max:    2.2μs
reverse_func        : min:   1.9μs, mean:   2.0μs, max:    7.9μs
reverse_reduce      : min:   5.7μs, mean:   5.9μs, max:   10.2μs
reverse_loop        : min:   3.0μs, mean:   3.1μs, max:    6.8μs 
```

[![在此处输入图像描述](https://i.stack.imgur.com/ZxVY0.png)](https://i.stack.imgur.com/ZxVY0.png)

```
list_comprehension  : min:   4.2μs, mean:   4.5μs, max:   31.7μs
reverse_func        : min:  75.4μs, mean:  76.6μs, max:  109.5μs
reverse_reduce      : min: 749.2μs, mean: 882.4μs, max: 2310.4μs
reverse_loop        : min: 469.7μs, mean: 577.2μs, max: 1227.6μs 
```

您可以看到列表理解 ( `reversed = string[::-1]`) 的时间在所有情况下都是迄今为止最低的（即使在修正了我的错字之后）。

## 字符串反转

如果你真的想在常识中反转一个字符串，那就更复杂了。例如，取以下字符串（[棕色手指向左](https://emojipedia.org/white-left-pointing-backhand-index-type-5/)，[黄色手指向上](https://emojipedia.org/white-up-pointing-backhand-index/)）。那是两个字素，但是 3 个 unicode 代码点。另外一个是[皮肤修饰剂](https://emojipedia.org/modifiers/)。

```
example = "" 
```

但是如果你用任何给定的方法反转它，你会得到[棕色的手指向上](https://emojipedia.org/white-up-pointing-backhand-index-type-5/)，[黄色的手指向左](https://emojipedia.org/white-left-pointing-backhand-index/)。这样做的原因是“棕色”颜色修饰符仍在中间，并应用于它之前的任何内容。所以我们有

*   U：手指向上
*   M：棕调剂
*   L：手指向左

和

```
original: LMU                    
reversed: UML (above solutions)  ☝
reversed: ULM (correct reversal) 
```

[Unicode Grapheme Clusters](http://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries)比修饰符代码点要复杂一些。幸运的是，有一个用于处理[字素](https://grapheme.readthedocs.io/en/latest/grapheme.html)的库：

```
>>> import grapheme
>>> g = grapheme.graphemes("")
>>> list(g)
['', ''] 
```

因此正确的答案是

```
def reverse_graphemes(string):
    g = list(grapheme.graphemes(string))
    return ''.join(g[::-1]) 
```

这也是迄今为止最慢的：

```
list_comprehension  : min:    0.5μs, mean:    0.5μs, max:    2.1μs
reverse_func        : min:   68.9μs, mean:   70.3μs, max:  111.4μs
reverse_reduce      : min:  742.7μs, mean:  810.1μs, max: 1821.9μs
reverse_loop        : min:  513.7μs, mean:  552.6μs, max: 1125.8μs
reverse_graphemes   : min: 3882.4μs, mean: 4130.9μs, max: 6416.2μs 
```

## 编码

```
#!/usr/bin/env python

import numpy as np
import random
import timeit
from functools import reduce
random.seed(0)

def main():
    longstring = ''.join(random.choices("ABCDEFGHIJKLM", k=2000))
    functions = [(list_comprehension, 'list_comprehension', longstring),
                 (reverse_func, 'reverse_func', longstring),
                 (reverse_reduce, 'reverse_reduce', longstring),
                 (reverse_loop, 'reverse_loop', longstring)
                 ]
    duration_list = {}
    for func, name, params in functions:
        durations = timeit.repeat(lambda: func(params), repeat=100, number=3)
        duration_list[name] = list(np.array(durations) * 1000)
        print('{func:<20}: '
              'min: {min:5.1f}μs, mean: {mean:5.1f}μs, max: {max:6.1f}μs'
              .format(func=name,
                      min=min(durations) * 10**6,
                      mean=np.mean(durations) * 10**6,
                      max=max(durations) * 10**6,
                      ))
        create_boxplot('Reversing a string of length {}'.format(len(longstring)),
                       duration_list)

def list_comprehension(string):
    return string[::-1]

def reverse_func(string):
    return ''.join(reversed(string))

def reverse_reduce(string):
    return reduce(lambda x, y: y + x, string)

def reverse_loop(string):
    reversed_str = ""
    for i in string:
        reversed_str = i + reversed_str
    return reversed_str

def create_boxplot(title, duration_list, showfliers=False):
    import seaborn as sns
    import matplotlib.pyplot as plt
    import operator
    plt.figure(num=None, figsize=(8, 4), dpi=300,
               facecolor='w', edgecolor='k')
    sns.set(style="whitegrid")
    sorted_keys, sorted_vals = zip(*sorted(duration_list.items(),
                                           key=operator.itemgetter(1)))
    flierprops = dict(markerfacecolor='0.75', markersize=1,
                      linestyle='none')
    ax = sns.boxplot(data=sorted_vals, width=.3, orient='h',
                     flierprops=flierprops,
                     showfliers=showfliers)
    ax.set(xlabel="Time in ms", ylabel="")
    plt.yticks(plt.yticks()[0], sorted_keys)
    ax.set_title(title)
    plt.tight_layout()
    plt.savefig("output-string.png")

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-05-20T22:24:58.170

### 1\. 使用切片符号

```
def rev_string(s): 
    return s[::-1] 
```

### 2\. 使用 reversed() 函数

```
def rev_string(s): 
    return ''.join(reversed(s)) 
```

### 3.使用递归

```
def rev_string(s): 
    if len(s) == 1:
        return s

    return s[-1] + rev_string(s[:-1]) 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2016-04-01T07:49:28.150

一个不那么令人困惑的看待它的方式是：

```
string = 'happy'
print(string) 
```

> '快乐的'

```
string_reversed = string[-1::-1]
print(string_reversed) 
```

> 'yppah'

在英语中 [-1::-1] 读作：

> “从-1开始，一路走，走-1步”

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-12-10T12:57:22.823

在不使用 reversed() 或 [::-1] 的情况下在 python 中反转字符串

```
def reverse(test):
    n = len(test)
    x=""
    for i in range(n-1,-1,-1):
        x += test[i]
    return x 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-09-25T11:46:15.997

这也是一个有趣的方式：

```
def reverse_words_1(s):
    rev = ''
    for i in range(len(s)):
        j = ~i  # equivalent to j = -(i + 1)
        rev += s[j]
    return rev 
```

或类似的：

```
def reverse_words_2(s):
    rev = ''
    for i in reversed(range(len(s)):
        rev += s[i]
    return rev 
```

使用支持 .reverse() 的 bytearray 的另一种更“异国情调”的方式

```
b = bytearray('Reverse this!', 'UTF-8')
b.reverse()
b.decode('UTF-8')` 
```

将产生：

```
'!siht esreveR' 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-06-26T04:25:59.573

```
def reverse(input):
    return reduce(lambda x,y : y+x, input) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-05-04T17:02:51.103

这是一个不花哨的：

```
def reverse(text):
    r_text = ''
    index = len(text) - 1

    while index >= 0:
        r_text += text[index] #string canbe concatenated
        index -= 1

    return r_text

print reverse("hello, world!") 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-12-21T16:36:53.733

# Python中有多种反转字符串的方法

### 切片方法

```
string = "python"
rev_string = string[::-1]
print(rev_string) 
```

### 使用反转功能

```
string = "python"
rev= reversed(string) 
rev_string = "".join(rev) 
print(rev_string) 
```

### 使用递归

```
string = "python"
def reverse(string):
  if len(string)==0:
    return string
  else:
    return reverse(string[1:])+string[0]
print(reverse(string)) 
```

### 使用 for 循环

```
string = "python"
rev_string =""
for s in string:
  rev_string = s+ rev_string
print(rev_string) 
```

### 使用 while 循环

```
string = "python"
rev_str =""
length = len(string)-1
while length >=0:
  rev_str += string[length]
  length -= 1
print(rev_str) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-12-10T18:23:16.663

```
def reverse_string(string):
    length = len(string)
    temp = ''
    for i in range(length):
        temp += string[length - i - 1]
    return temp

print(reverse_string('foo')) #prints "oof" 
```

这通过遍历一个字符串并将其值以相反的顺序分配给另一个字符串来工作。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-12-29T00:42:56.033

```
original = "string"

rev_index = original[::-1]
rev_func = list(reversed(list(original))) #nsfw

print(original)
print(rev_index)
print(''.join(rev_func)) 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-06-07T05:51:40.650

**以编程方式解决这个问题进行面试**

```
def reverse_a_string(string: str) -> str:
    """
    This method is used to reverse a string.
    Args:
        string: a string to reverse

    Returns: a reversed string
    """
    if type(string) != str:
        raise TypeError("{0} This not a string, Please provide a string!".format(type(string)))
    string_place_holder = ""
    start = 0
    end = len(string) - 1
    if end >= 1:
        while start <= end:
            string_place_holder = string_place_holder + string[end]
            end -= 1
        return string_place_holder
    else:
        return string

a = "hello world"
rev = reverse_a_string(a)
print(rev) 
```

**输出：**

```
dlrow olleh 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-07-04T16:42:34.647

```
 a=input()
 print(a[::-1]) 
```

上面的代码接收来自用户的输入，并通过添加 [::-1] 打印一个等于输入反向的输出。

**输出：**

```
>>> Happy 
>>> yppaH 
```

但是当涉及到句子的情况下，查看下面的代码输出：

```
>>> Have a happy day
>>> yad yppah a evaH 
```

但是，如果您只想反转字符串的字符而不是字符串的序列，请尝试以下操作：

```
a=input().split() #Splits the input on the basis of space (" ")
for b in a: #declares that var (b) is any value in the list (a)
    print(b[::-1], end=" ") #End declares to print the character in its quotes (" ") without a new line. 
```

> 在上面第 2 行的代码中，我说 ** 变量 b 是列表 (a) 中的任何值** 我说 var a 是一个列表，因为当您在输入中使用 split 时，输入的变量变成了一个列表. **还要记住在 int(input()) 的情况下不能使用 split**

**输出：**

```
>>> Have a happy day
>>> evaH a yppah yad 
```

> 如果我们不在上面的**代码**中添加 end(" ") ，那么它将打印如下：

```
>>> Have a happy day
>>> evaH
>>> a
>>> yppah
>>> yad 
```

> 下面是一个理解 end() 的例子：

**代码：**

```
for i in range(1,6):
     print(i) #Without end() 
```

**输出：**

```
>>> 1
>>> 2
>>> 3
>>> 4
>>> 5 
```

> 现在用 end() 编码：

```
for i in range(1,6):
    print(i, end=" || ") 
```

**输出：**

```
>>> 1 || 2 || 3 || 4 || 5 || 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-12-29T13:23:57.900

这是一个没有`[::-1]`或`reversed`的（用于学习目的）：

```
def reverse(text):
    new_string = []
    n = len(text)
    while (n > 0):
        new_string.append(text[n-1])
        n -= 1
    return ''.join(new_string)
print reverse("abcd") 
```

您可以`+=`用来连接字符串，但`join()`速度更快。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-01-13T14:21:21.060

递归方法：

```
def reverse(s): return s[0] if len(s)==1 else s[len(s)-1] + reverse(s[0:len(s)-1]) 
```

例子：

```
print(reverse("Hello!"))    #!olleH 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-04-16T20:38:18.403

以下是我们如何使用 for 循环反转字符串：

```
string = "hello,world"
for i in range(-1,-len(string)-1,-1):
    print (string[i], end=(" ")) 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-06-22T20:52:00.890

有很多方法可以反转字符串，但我也创建了另一种只是为了好玩。我认为这种方法并没有那么糟糕。

```
def reverse(_str):
    list_char = list(_str) # Create a hypothetical list. because string is immutable

    for i in range(len(list_char)/2): # just t(n/2) to reverse a big string
        list_char[i], list_char[-i - 1] = list_char[-i - 1], list_char[i]

    return ''.join(list_char)

print(reverse("Ehsan")) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-09-12T02:39:37.987

或者你可以做类似的事情？

```
>>> a = 'hello world'
>>> ''.join(a[len(a) - i - 1] for i in range(len(a)))
'dlrow olleh'
>>> 
```

使用生成器表达式和字符串索引。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-11-08T00:12:26.340

我不喜欢这种`.join()`技术。面试官不喜欢这种`[::-1]`技术，所以我想出了这个。

```
_list = [12, 34, 5, 6, 7, 8, 98, 44, 25]

for count, x in enumerate(_list, start=1):
    print(_list[len(_list) - count]) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-02-08T19:32:03.323

`my_str = "hello`

快速选项：`my_str[::-1]`

慢速选项：`"".join(reversed(my_str))`

* * *

## 回答 #24

> 赞同：-6
> 
> 时间：2016-02-03T10:40:43.070

当然，在 Python 中你可以做非常花哨的单行代码。:)
这是一个简单、全面的解决方案，可以在任何编程语言中使用。

```
def reverse_string(phrase):
    reversed = ""
    length = len(phrase)
    for i in range(length):
        reversed += phrase[length-1-i]
    return reversed

phrase = raw_input("Provide a string: ")
print reverse_string(phrase) 
```

* * *

## 回答 #25

> 赞同：-6
> 
> 时间：2016-03-24T18:28:53.587

```
s = 'hello'
ln = len(s)
i = 1
while True:
    rev = s[ln-i]
    print rev,
    i = i + 1
    if i == ln + 1 :
        break 
```

**输出 ：**

```
o l l e h 
```

* * *

## 回答 #26

> 赞同：-8
> 
> 时间：2016-07-19T17:32:45.320

您可以将 reversed 函数与列表综合使用。但我不明白为什么这个方法在 python 3 中被淘汰了，是不必要的。

```
string = [ char for char in reversed(string)] 
```

# c++ - 如何让我的程序监视 C++ 中的文件修改？

> ID：931093
> 
> 赞同：83
> 
> 时间：2009-05-31T02:10:17.820
> 
> 标签：c++, file-io, filesystems, monitoring, fsevents

有很多程序，例如 Visual Studio，可以检测外部程序何时修改文件，然后在用户需要时重新加载文件。有没有一种相对简单的方法可以在 C++ 中做这种事情（不一定必须独立于平台）？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2009-05-31T03:10:24.390

根据平台的不同，有几种方法可以做到这一点。我会从以下选项中进行选择：

## 跨平台

奇趣科技的 Qt 有一个名为[QFileSystemWatcher](http://doc.qt.io/qt-5/qfilesystemwatcher.html)的对象，它允许您监视文件和目录。我确信还有其他跨平台框架也可以为您提供这种功能，但是根据我的经验，这个框架运行得相当好。

## 视窗 (Win32)

有一个名为[FindFirstChangeNotification](http://msdn.microsoft.com/en-us/library/aa364417%28VS.85%29.aspx)的 Win32 api可以完成这项工作。有一篇不错的文章，其中一个用于 api 的小型包装类名为[How to get annotification if change occur in a specified directory](http://www.codeproject.com/KB/files/DirCheck.aspx)这将帮助您入门。

## Windows（.NET 框架）

如果您可以在 .NET Framework 中使用 C++/CLI，那么 [System.IO.FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28VS.80%29.aspx#Mtps_DropDownFilterText)是您的选择。Microsoft 有一篇关于 [如何](http://msdn.microsoft.com/en-us/library/chzww271.aspx)使用此类监视文件系统更改的好文章。

## 操作系统

[FSEvents](http://developer.apple.com/documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005289-CH1-DontLinkElementID_15) API 是 OS X 10.5的新功能，功能非常齐全。

## Linux

正如亚历克斯在他的回答中提到的那样使用[inotify 。](http://en.wikipedia.org/wiki/Inotify)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-05-31T02:16:48.570

如果您不需要独立于平台，Linux 上的一种方法可能比“轮询”（定期检查）的机器负载更少`inotify`，请参阅[http://en.wikipedia.org/wiki/Inotify](http://en.wikipedia.org/wiki/Inotify)和例如，它的许多链接。对于 Windows，请参阅[http://msdn.microsoft.com/en-us/library/aa365261(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa365261(VS.85).aspx)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-04-07T11:05:38.760

[SimpleFileWatcher](https://github.com/apetrone/simplefilewatcher)可能是您正在寻找的。但当然它是一种外部依赖——也许这对你来说是没有选择的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-31T02:13:57.780

当然，就像 VC++ 一样。当您打开文件时，您会获得上次修改时间，并在打开文件时定期检查它。如果 last_mod_time > saved_mod_time，它发生了。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-03-04T10:15:23.793

WinCE 的工作示例

```
void FileInfoHelper::WatchFileChanges( TCHAR *ptcFileBaseDir, TCHAR *ptcFileName ){
static int iCount = 0;
DWORD dwWaitStatus; 
HANDLE dwChangeHandles; 

if( ! ptcFileBaseDir || ! ptcFileName ) return;

wstring wszFileNameToWatch = ptcFileName;

dwChangeHandles = FindFirstChangeNotification(
    ptcFileBaseDir,
    FALSE,
    FILE_NOTIFY_CHANGE_FILE_NAME |
    FILE_NOTIFY_CHANGE_DIR_NAME |
    FILE_NOTIFY_CHANGE_ATTRIBUTES |
    FILE_NOTIFY_CHANGE_SIZE |
    FILE_NOTIFY_CHANGE_LAST_WRITE |
    FILE_NOTIFY_CHANGE_LAST_ACCESS |
    FILE_NOTIFY_CHANGE_CREATION |
    FILE_NOTIFY_CHANGE_SECURITY |
    FILE_NOTIFY_CHANGE_CEGETINFO
    );

if (dwChangeHandles == INVALID_HANDLE_VALUE) 
{
    printf("\n ERROR: FindFirstChangeNotification function failed [%d].\n", GetLastError());
    return;
}

while (TRUE) 
{ 
    // Wait for notification.
    printf("\n\n[%d] Waiting for notification...\n", iCount);
    iCount++;

    dwWaitStatus = WaitForSingleObject(dwChangeHandles, INFINITE); 
    switch (dwWaitStatus) 
    { 
        case WAIT_OBJECT_0: 

            printf( "Change detected\n" );

            DWORD iBytesReturned, iBytesAvaible;
            if( CeGetFileNotificationInfo( dwChangeHandles, 0, NULL, 0, &iBytesReturned, &iBytesAvaible) != 0 ) 
            {
                std::vector< BYTE > vecBuffer( iBytesAvaible );

                if( CeGetFileNotificationInfo( dwChangeHandles, 0, &vecBuffer.front(), vecBuffer.size(), &iBytesReturned, &iBytesAvaible) != 0 ) {
                    BYTE* p_bCurrent = &vecBuffer.front();
                    PFILE_NOTIFY_INFORMATION info = NULL;

                    do {
                        info = reinterpret_cast<PFILE_NOTIFY_INFORMATION>( p_bCurrent );
                        p_bCurrent += info->NextEntryOffset;

                        if( wszFileNameToWatch.compare( info->FileName ) == 0 )
                        {
                            wcout << "\n\t[" << info->FileName << "]: 0x" << ::hex << info->Action;

                            switch(info->Action) {
                                case FILE_ACTION_ADDED:
                                    break;
                                case FILE_ACTION_MODIFIED:
                                    break;
                                case FILE_ACTION_REMOVED:
                                    break;
                                case FILE_ACTION_RENAMED_NEW_NAME:
                                    break;
                                case FILE_ACTION_RENAMED_OLD_NAME:
                                    break;
                            }
                        }
                    }while (info->NextEntryOffset != 0);
                }
            }

            if ( FindNextChangeNotification( dwChangeHandles ) == FALSE )
            {
                printf("\n ERROR: FindNextChangeNotification function failed [%d].\n", GetLastError());
                return;
            }

            break; 

        case WAIT_TIMEOUT:
            printf("\nNo changes in the timeout period.\n");
            break;

        default: 
            printf("\n ERROR: Unhandled dwWaitStatus [%d].\n", GetLastError());
            return;
            break;
    }
}

FindCloseChangeNotification( dwChangeHandles );
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-11T09:41:49.950

为 libuv 添加一个答案（尽管它是用 C 编写的），它支持 Windows 和 Linux 以及系统特定的 API：

> Linux 上的 inotify，Darwin 上的 FSEvents，BSD 上的 kqueue，Windows 上的 ReadDirectoryChangesW，Solaris 上的事件端口，Cygwin 上不支持

你可以在[这里](http://docs.libuv.org/en/latest/guide/filesystem.html)查看文档，注意文档中说的通知相关的 API 不是很一致。

# tortoisesvn - TortoiseGit，TortoiseBzr，TortoiseHg。从 TortoiseSVN 切换是否足够可靠？

> ID：931105
> 
> 赞同：26
> 
> 时间：2009-05-31T02:21:27.907
> 
> 标签：tortoisesvn, tortoisehg, tortoisegit, tortoisebzr

我想尝试一个分布式修订控制系统。我使用几台 Windows PC、几台带 Linux 的 PC 和一台 Mac。在 Windows 上，我想使用 Tortoise。

除了 TortoiseSVN 之外的任何 Tortoise 有什么好处吗？直到最近，对它们的打击一直是它们速度慢且有缺陷，但似乎有一种新的推动力来让它们变得稳固。

我宁愿不必尝试所有三个。有人最近转行并有很好的经验吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-31T04:12:03.430

我个人对 TortoiseHg 有很好的体验。它还安装了 hg 命令行系统，因此如果需要（或者如果您更喜欢在命令行上进行版本控制），您可以进入该系统。界面中有一些怪癖，但总的来说它非常可靠（如果您使用修订图视图，它看起来很棒）。Mercurial 的 Subversion 导入也很棒。

您甚至可以使用 Mercurial 的 hg-git 扩展来处理 Git 存储库，正如 CAD 专家所提到的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2010-01-17T22:55:22.220

我建议 TortoiseHg。如果您熟悉 TortoiseSVN，您可以立即使用它。

你想在 Windows 上使用它吗？

截至今天，在我看来，TortoiseHg 比 TortoiseSVN 更好。而且它仍然改进得非常快（我从 0.4 版开始使用它，当前是 0.9.2 和 Mercurial 1.4.2）。例如，一个不错的功能：只需在 IDE 中进行大量重构，而不关心重命名。然后在上下文菜单中选择“猜测重命名”功能并玩得开心。没有更多的历史记录，因为您使用了您最喜欢的重命名工具而不是“svn move”。

安装非常简单：下载并安装 TortoiseHg，然后重启一次。现在您也拥有了当前版本的命令行 Mercurial 和 SVN 转换工具。无非就是这个单一的包裹。

你想在 Linux 上使用它吗？

“sudo apt-get install mercurial”是您使用命令行 Mercurial 所需要的（在基于 Debian 的系统上），但此版本可能不是最新版本。我知道，有适用于 Ubuntu 的 PPA 存储库，也可能适用于 Debian。所以更新你的 APT 源列表，导入密钥，你就可以安装 TortoiseHg 了，它与 Gnome 的集成非常好。

对不起，但我不知道如何在 Mac 上安装。

无论如何，DVCS 往往很有用。它往往更有趣，无论你是在做一个单独的黑客场景还是在一个庞大的团队中工作。另外：通过克隆+推+拉，您还可以获得集成、快速和智能的备份。

但是，也有一些缺点需要考虑：

1) 如果你在 Windows 和任何 *nix 系统之间共享你的工作，你应该只使用 ASCII 字符作为文件名。Mercurial、Bazaar 或 Git 都不会像 Subversion 那样进行编码转换（参见[CharacterEncodingOnWindows](https://www.mercurial-scm.org/wiki/CharacterEncodingOnWindows)）。在使用 UTF-8 的任何操作系统和另一个操作系统之间切换时，任何法语口音或德语变音符号都会破坏您的工作。

2）你不应该使用很多大的二进制文件。Mercurial 不是为此目的而设计的，我认为 Bazaar 或 Git 在这方面不会更有趣。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-31T03:38:37.027

我使用 TortoiseGit 已经有一段时间了。虽然 git 在 Windows 上的性能确实会受到影响，但在大多数情况下它是完全可以接受的。在你提到的三个中，在我看来，Git 无疑拥有最精致的“乌龟”。如果您习惯使用 TortoiseSVN，那么过渡到 Git 应该会非常顺利，因为 TortoiseGit 基于 TortoiseSVN 代码库并重用了它的许多 UI 和设计原则。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-31T03:31:08.123

考虑到您的设置，当您只使用几台本地计算机时，似乎没有必要使用分布式版本控制。如果您已经在运行功能 SVN 服务器，则尤其如此。分布式版本控制往往在具有大量分支和合并的大型项目中更有用，因为分布式 VCS 倾向于重视高质量的合并。

也就是说，谷歌选择了 Mercurial (Hg) 作为他们对谷歌代码的分布式版本控制。大多数推理都与速度、灵活性和易用性有关。当然，在我看来，Hg 命令集看起来比 Git 命令集友好得多，而且它往往与较旧的 SVN 存储库配合得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-01-12T10:27:44.557

我真的只是想对关于 TortoiseHG 的建议添加评论，但评论已关闭，

如何在 linux 上添加 ppa 存储库（将 oneiric 替换为您的版本）：

1.  将以下条目添加到包管理器：

    ```
    deb http://ppa.launchpad.net/tortoisehg-ppa/releases/ubuntu oneiric main 
    deb-src http://ppa.launchpad.net/tortoisehg-ppa/releases/ubuntu oneiric main 
    ```

2.  将以下条目添加到包管理器：

    ```
    deb http://ppa.launchpad.net/mercurial-ppa/releases/ubuntu oneiric main 
    deb-src http://ppa.launchpad.net/mercurial-ppa/releases/ubuntu oneiric main 
    ```

    重要提示：由于当前的 TortoiseHg 版本通常需要比 Ubuntu 本身提供的更新版本的 Mercurial，因此您还需要添加此 PPA。

3.  要将 APT 配置为信任此存储库的签名密钥，请运行：

    ```
    sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key 323293EE 
    ```

4.  如果您安装了旧版本，则需要先将其删除。

    ```
    sudo apt-get --purge remove mercurial
    sudo apt-get --purge remove tortoisehg 
    ```

5.  步

    ```
    sudo apt-get install mercurial
    sudo apt-get install tortoisehg 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-31T03:05:31.827

您是否正在考虑切换到其他 VCS？因为切换到 TortoiseGit/Bzr/Hg 您将无法访问 SVN 存储库。我正在通过 TortoiseGit 使用 GIT，但它建立在 TortoiseSVN 之上并且具有类似的性能。

如果您只是在寻找使用 SVN 的替代方案，您应该看看[RapidSVN](http://rapidsvn.tigris.org/)。它仍然很好并且比 Tortoise 快得多，它也可以在 Mac 和 Linux 上运行。

希望这可以帮助！

**发表评论 编辑**

你应该考虑 Git。它是现代分布式 VCS，变得非常快速和灵活，它拥有一个非常庞大和强大的社区。许多大型项目都在使用 Git，例如 Linux（内核）和 Ruby On Rails。

有关 Git 的更多信息：[http](http://git-scm.com/) ://git-scm.com/，http : [//whygitisbetterthanx.com/](http://whygitisbetterthanx.com/)

# .net - 更新或版本控制 Web 服务的策略？

> ID：931109
> 
> 赞同：21
> 
> 时间：2009-05-31T02:23:00.337
> 
> 标签：.net, web-services, deployment

我很想听听有关如何处理不同版本的 Web 服务的最佳实践。

澄清一下，如果您将一些 Web 方法公开为 Web 服务，那么您想添加一个特性/功能，从而更改这些方法调用的签名，您如何以不破坏所有的方式处理它您目前调用该服务的客户有多少？

您是否在不同的 URL 上部署服务？

您是否在方法名称本身中添加了一个版本（MyMethod、MyMethodv2 等 - 呃..）

您是否将版本作为方法调用的一部分与参数列表一起传递？

有谁知道 Google 或 Amazon 如何使用其广泛的 Web 服务库来处理这种情况？

**编辑：**到目前为止，我在[Oracle 的这篇文章](http://www.oracle.com/technetwork/articles/web-services-versioning-094384.html)中找到了一些很好的信息。此外，关于一些 Java 细节的[博客条目](http://www.gridshore.nl/blog/index.php?/archives/68-Web-service-versioning-in-the-java-world.html)也很有用。我仍然很好奇看到其他一些方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-31T12:01:29.620

对 Web 服务进行版本控制的典型方法是让客户端指定所需的版本。您可以允许简单的约束，例如“>2.0”、“<1.5”或“=1.1”。自然，您希望尽量减少支持的版本数量，以保持您的理智。如果客户端未指定版本，则假定为最新版本。

提供版本的技术各不相同。有些人提倡使用 URL，有些人鼓励使用标头，有些人可能会将其作为 api 调用的参数。不过，几乎没有人会更改方法的名称。这相当于 OSGi 链接谈到的“包”或“命名空间”版本。这将使升级变得非常困难，并且比对实际服务的任何更改更能阻碍人们升级。

它还取决于您访问 Web 服务的方式。如果您使用的是 REST，那么保持 URL 的干净并使用标头是最有意义的（如果需要，将其作为查询参数将其破解是微不足道的）。如果您使用的是 SOAP/XMLRPC/whatever-RPC，那么将它放在 URL 中通常就可以了。

> **编辑 5/2011** FWIW，虽然我不同意，但[Apigee 的博客建议将版本放在 URL 中](http://blog.apigee.com/detail/api_restful_design_question_verisioning_number_in_the_url/)。

客户端如何指定版本通常非常简单。更复杂的是如何同时运行所有版本。大多数语言没有办法将同一个库/模块/类/函数的多个版本加载到同一个运行时环境中（无论是 VM、进程还是您拥有的）。您提供的 OSGi 链接是 Java 允许这样做的解决方案。

在实践中，OSGi 在大多数情况下都是多余的。将不推荐使用的请求代理到另一个服务器或进程通常更容易。

但是，对服务进行“版本化”的最佳方式是在它们中构建可扩展性和灵活性，以便它们保持向前和向后兼容。这并不意味着所有版本都必须相互兼容，但连续的版本应该相互兼容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-31T03:33:20.600

我可以告诉你，创建 doAPIFunction、doAPIFunctionV2 和 doAPIFunctionV3 等的解决方案在我工作的地方只会让人头疼。除此之外，缺乏清晰描述的函数名称意味着各种疯狂。

您需要明确的 API 函数名称，如果 api 正在更改，目标将是尝试以尽可能向后兼容的方式进行更改。我建议对您的入口点进行版本控制，以便每个入口点都支持稳定的 API，并且如果有充分的理由更改语义，example.org/api-1.0/ 中的 doFunction 可能与 example.org/api-2.0 不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T04:11:28.517

我不确定我是否正确理解了您的问题。但是我的2美分。如果方法的签名像另一个新参数一样发生变化，那么为什么不能将其设为可选？但是，如果更改了现有参数数据类型，则它不适用。

如果完全错误，请投反对票。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T05:05:46.130

几年前，当您可以拥有相同的 Web 服务方法名称和不同的参数时，它曾经更简单。:)

一旦你编写了一个 web 服务，你就与客户签订了一份合同，这就是你将支持的。

对于较旧的方法，我建议记录以查看它们是否正在使用以及由谁使用，以查看是否可以让它们更新。

除此之外，您最好只编写一个新方法，因此您可能有几个相似的函数名称，它们因版本而异。

传入版本号的问题是您必须确保客户端始终传入一个有效的数字，如果您生成存根将起作用，但如果您不这样做，那么这是非常脆弱的。

在名称中加上版本号似乎对我来说效果最好，因为它可以清楚地表明什么是旧的，并且您可以使用 AOP 更轻松地记录旧版本的 web 服务方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-31T07:58:51.857

缓解这种情况的一种方法是通过合同和固定接口进行编码。您永远无法真正*更改*函数签名，但是您可以重载它们。考虑 .NET API。它弃用了一些方法，但它们继续工作，因为围绕它们编码的程序可能会中断。服务的新版本可能会在不同的 URI (v2.webservice.com) 上公开，以提供新的路线图，并且需要继续支持 v1。

# jquery - jQuery切换动画

> ID：931113
> 
> 赞同：28
> 
> 时间：2009-05-31T02:25:24.560
> 
> 标签：jquery, animation, toggle

我有这个 jQuery：

```
$(document).ready(function()
{
   $("#panel").hide();

   $('.login').toggle(
   function()
   {
      $('#panel').animate({
      height: "150", 
      padding:"20px 0",
      backgroundColor:'#000000',
      opacity:.8
}, 500);
   },
   function()
   {
      $('#panel').animate({
      height: "0", 
      padding:"0px 0",
      opacity:.2
      }, 500);
   });
}); 
```

这工作正常，但我需要稍微扩展功能。我还想与#panel div 同步地操作另一个div 的属性。我尝试添加另外两个与辅助 div 相关的功能，但我只是得到了一个 4 相切换……哈哈！原谅我的无知！

多谢你们！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-05-31T02:32:38.973

```
$('.login').toggle(
    function(){
        $('#panel').animate({
            height: "150", 
            padding:"20px 0",
            backgroundColor:'#000000',
            opacity:.8
        }, 500);
        $('#otherdiv').animate({
            //otherdiv properties here
        }, 500);
    },
    function(){
        $('#panel').animate({
            height: "0", 
            padding:"0px 0",
            opacity:.2
        }, 500);     
        $('#otherdiv').animate({
            //otherdiv properties here
        }, 500);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-02-17T19:28:41.707

我不认为在切换功能中添加双重功能适用于注册的点击事件（除非我遗漏了什么）

例如：

```
$('.btnName').click(function() {
 top.$('#panel').toggle(function() {
   $(this).animate({ 
     // style change
   }, 500);
   },
   function() {
   $(this).animate({ 
     // style change back
   }, 500);
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-29T08:23:11.807

使用 jquery 中的 toggle() 或 slideToggle：

[切换](https://api.jquery.com/slidetoggle/)

```
 $( "#clickme" ).click(function() {
      $( "#book" ).slideToggle( "slow", function() {
        // Animation complete.
      });
    });

 <div id="clickme">
      Click here
    </div>
    <img id="book" src="book.png" alt="" width="100" height="123"> 
```

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2012-04-26T04:23:17.287

```
onmouseover="$('.play-detail').stop().animate({'height': '84px'},'300');" 

onmouseout="$('.play-detail').stop().animate({'height': '44px'},'300');" 
```

只需放置两个停止点——一个 onmouseover 和一个 onmouseout。

# newline - .Net 资源文件 (App_GlobalResources) 中的回车/换行

> ID：931114
> 
> 赞同：102
> 
> 时间：2009-05-31T02:25:29.333
> 
> 标签：newline, line-breaks, resx, resource-files

我在一个`App_GlobalResources.resx`文件中保存了几个文本。

文本必须是多行的，我需要让它们包含换行符。但是，当我阅读内容时，所有换行符都消失了（`\r\n`被打印出来，而不是作为`CRLF 10 13`控制字符）。

我知道我可以通过`\r\n`在阅读内容时将（或其他任何事情）重新替换回 CRLF 来解决这个问题，但我想知道为什么这些明确以文本为目标的 resx 文件会忽略控制字符——而 CRLF 有点重要- 如果有人知道是否有设置或其他东西可以使其自然工作。

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2009-05-31T06:49:26.083

我使用 VB.NET Express Edition 对此进行了测试。

在资源编辑器中（您可以在其中指定资源的名称和字符串内容）将字符串内容以`Shift`+分隔`Enter`。

假设您要输入

```
hello  
world 
```

键入“hello”，然后是`Shift`+`Enter`和“world”。

如果您查看 Resources.Resx 文件（这是一个 xml 文件），您可以看到它创建了一个具有属性的节点`xml:space="preserve"`。

**第二个选项**

此外，您可以手动编辑 Resources.resx 并将内容修改为 CDATA 部分下。

假设您有名为“example”的字符串。在 Resources.resx 中搜索它并将内容更改为在其中包含 CDATA 部分，而不是具有简单值。

例如

```
<data name="example">
<![CDATA[
hello
world
1
2   3
4
]]>  </data> 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2009-08-18T10:08:27.380

使用`Shift`+`Enter`插入新行。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-28T11:24:28.563

## 使用 resx 设计器界面时

*   如果您实际上是在 resx 文件中输入文本，那么您将使用

    `Shift`+`Enter`

    如其他答案所述。

*   如果您在 resx 中粘贴文本 - Visual Studio 将以与现有格式相同的格式粘贴文本（包括换行符/多行）。

## 打开 XML 格式的 resx 文件时

（使用查找和替换找到 resx 文件。当您从“查找结果”面板单击文件时，VS 将以 XML 格式打开 resx 文件）

在这里，您可以根据需要添加文本（在值标签中），格式将被保留。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-08-01T18:45:53.107

好吧，在我的情况下起作用的是使用这样的`<br>`标签：

```
A text with a line break <br> and this goes in the second line. 
```

这里有一个包含更多信息的帖子：[在 resx 资源文件中放置换行符](http://scottstoecker.wordpress.com/2012/05/31/putting-a-line-break-in-an-resx-resource-file/)

如果您碰巧使用带有 ASP.NET MVC 的 Razor 视图引擎，您需要使用：

```
@Html.Raw(ResourceFile.ResourceString) 
```

以便将其打印`<br>`为 HTML。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-17T18:23:02.137

可以使用**文本编辑器**`*.resx`编辑文件以添加换行符。

 **您甚至可以在 Visual Studio 中执行此操作：

*   右键单击资源文件
*   点击进入`Open with ...`
*   选择`XML (Text) Editor with Encoding`
*   点击`OK`
*   再次单击`OK`进行编码选择（自动检测）
*   搜索文本的名称（键）（例如“MY_TEXT”）
*   `<value>`编辑标签内的文本。对于换行符，只需按下`Enter`. 注意：删除换行后的前导空格。否则它们也会被插入。

使用 Visual Studio 2017 进行测试。

**例子：**

```
 <data name="MY_TEXT" xml:space="preserve">
    <value>Line 1
Line 2
Line 3</value>
  </data> 
```

# c# - 问题：无法加载视图状态

> ID：931116
> 
> 赞同：2
> 
> 时间：2009-05-31T02:26:59.750
> 
> 标签：c#, .net, asp.net, linq, web-services

我正在为我的大学项目制作一个网站。该项目是从 Web 服务获取一切的网站。有人可以告诉我发生了什么，以及我如何解决它吗？

在我的一个页面上，我有 ListView 控件来显示产品项目，而 Pager 在同一页面上。在第一次页面呈现正常并显示所有内容。当我单击 Pager 上的 nextPage 时，它​​的重新加载页面但不显示第二页，而是显示相同的数据，如果我再推一次，那么我开始了：

```
Failed to load viewstate.  The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request.  For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request. 
```

我的产品页面很简单：

```
<asp:ListView ID="lv_ProductList" runat="server" DataKeyNames="product_id">
        <LayoutTemplate>
            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
            <br />
            <br />
            <asp:DataPager ID="pageTopics" runat="server" PageSize="8" PagedControlID="lv_ProductList" >
                <Fields>
                    <asp:NextPreviousPagerField ShowFirstPageButton="false" ShowPreviousPageButton="true" ShowNextPageButton="false" ButtonCssClass="span" />
                    <asp:NumericPagerField />
                    <asp:NextPreviousPagerField ShowFirstPageButton="false" ShowPreviousPageButton="false" ShowNextPageButton="true" ShowLastPageButton="false" />
                </Fields>
           </asp:DataPager>
        </LayoutTemplate>
        <ItemTemplate>
            <div class="item">
                <img src="images/pic_1.jpg" width="91" height="105" alt="iPod" class="left" />
                <h3><a href="http://www.justwebtemplates.com"><%# Eval("product_name") %></a></h3>
                <p><%# Eval("product_desc").ToString().Substring(0,90) + "..." %> </p>
                <div><a href="http://www.freewebsitetemplates.com" class="details">details</a> <a href="http://www.freewebsitetemplates.com" class="addtocart">add to cart</a></div>
                <div class="divider"></div>
            </div>
        </ItemTemplate>
        <EmptyDataTemplate>No products found</EmptyDataTemplate>
        <EmptyItemTemplate>No products found</EmptyItemTemplate>
    </asp:ListView> 
```

在我后面的代码中：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            getProductsList();
        }
    }

    public void getProductsList()
    {
        Store.Service myProducts = new Store.Service();
        var products = myProducts.getProductList();

        lv_ProductList.DataSource = products;
        lv_ProductList.DataBind();
    } 
```

并在网络服务上：

```
[WebMethod]
    public List<ws_product> getProductList()
    {
        using (DataClassesDataContext myProducts = new DataClassesDataContext())
        {

            var productList = from p in myProducts.ws_products
                              select p;

            return productList.ToList();
        } 
```

}

有人可以告诉发生了什么事吗？此外，如果我在 ListView 之外使用 Pager，那么我不会收到错误，但是如果我单击 nextpage 链接，它会显示相同的数据集。

我如何解决它 ？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-01-13T08:09:27.590

在您的代码后面添加：

```
protected void lds_Selecting(object sender, LinqDataSourceSelectEventArgs args)
{
        Store.Service myProducts = new Store.Service();  
        args.Result  = myProducts.getProductList();     
} 
```

将 asp:LinqDataSource 添加到页面：

```
 <asp:LinqDataSource ID="lds" runat="server" OnSelecting="lds_Selecting" />

    <asp:ListView ID="lv_ProductList" runat="server" 
DataKeyNames="product_id"   DataSourceID="lds">   
            <LayoutTemplate>   
                <asp:PlaceHolder ID="itemPlaceholder" runat="server" />   
                <br />   
                <br />   
                <asp:DataPager ID="pageTopics" runat="server" PageSize="8" PagedControlID="lv_ProductList" >   
                    <Fields>   
                        <asp:NextPreviousPagerField ShowFirstPageButton="false" ShowPreviousPageButton="true" ShowNextPageButton="false" ButtonCssClass="span" />   
                        <asp:NumericPagerField />   
                        <asp:NextPreviousPagerField ShowFirstPageButton="false" ShowPreviousPageButton="false" ShowNextPageButton="true" ShowLastPageButton="false" />   
                    </Fields>   
               </asp:DataPager>   
            </LayoutTemplate>   
            <ItemTemplate>   
                <div class="item">   
                    <img src="images/pic_1.jpg" width="91" height="105" alt="iPod" class="left" />   
                    <h3><a href="http://www.justwebtemplates.com"><%# Eval("product_name") %></a></h3>   
                    <p><%# Eval("product_desc").ToString().Substring(0,90) + "..." %> </p>   
                    <div><a href="http://www.freewebsitetemplates.com" class="details">details</a> <a href="http://www.freewebsitetemplates.com" class="addtocart">add to cart</a></div>   
                    <div class="divider"></div>   
                </div>   
            </ItemTemplate>   
            <EmptyDataTemplate>No products found</EmptyDataTemplate>   
            <EmptyItemTemplate>No products found</EmptyItemTemplate>   
        </asp:ListView> 
```

这应该有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T04:47:53.657

这不完全是我的专业领域，但我或许能够提供一些概念性的指导。

尽管您在页面上放置了分页器控件，但尚未在代码隐藏或服务中实现分页。

您的服务将需要接受索引和长度参数，因此浏览器可以说“我现在在第 20 项上，我一次在看 10 项，所以现在转到数据库并发回第 30-39 项。”

您的服务必须实际支持分页。或者，您可以一次将所有项目加载到页面中并使用类似 jQuery 的库进行“虚拟”分页，而不是回发，但我想这超出了您学校项目的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T06:14:25.857

杰，谢谢你的帮助。

在墙上折断了一段时间后，我最终为我的 ListView 构建了自定义寻呼机。现在一切正常。

# netbeans - 如何关闭netbeans欢迎屏幕？

> ID：931118
> 
> 赞同：39
> 
> 时间：2009-05-31T02:27:45.163
> 
> 标签：netbeans

每当我启动 Netbeans 时显示的屏幕非常烦人，在数百个选项中我找不到关闭它的选项？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-05-31T02:44:34.863

要禁用欢迎屏幕，您只需取消选中底部的“启动时显示”框。

![在此处输入图像描述](https://i.stack.imgur.com/qlzfy.png)

（如果我误解了您并且您询问的是启动画面，您可以通过[传递 -nosplash 参数](http://markmail.org/message/iblqiipmvwvytrvo)来禁用它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-26T10:00:10.837

对于 4k 屏幕的用户来说，这可能会很复杂，但可以在“盲”模式下完成，方法是使用 TAB 按钮跳转菜单并使用 ENTER 取消选中该框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-12T08:34:15.263

如另一个答案（[https://stackoverflow.com/a/35648606/1277576](https://stackoverflow.com/a/35648606/1277576)）所述，在高分辨率屏幕上无法看到该复选框（它完全不可见）。

我找到的解决方案是在 Netbeans 启动时指定一个小字体大小（使用`--fontsize 14`作为参数），禁用复选框，然后恢复我一直使用的大小，就我而言`--fontsize 20`。

# visual-c++ - 在 GCC 中调用使用 Visual C++ 编译的 DLL 时的堆栈问题

> ID：931121
> 
> 赞同：0
> 
> 时间：2009-05-31T02:30:33.863
> 
> 标签：visual-c++, dll, gcc, stack

我正在尝试从我的程序中调用使用（我相信）Visual C++ 编译的 DLL 中的一些函数，该程序是使用 GCC 编译的。

为了调用 DLL 中的函数，我对 DLL 执行 LoadLibrary()，然后执行 GetProcAddress() 来获取特定函数的地址，然后调用该函数。此函数返回指向要调用的 DLL 中函数的指针列表。

好吧，当我尝试调用这些函数时，它们无法正常工作。我通过调试器运行我的程序，看起来 DLL 库函数正在寻找 ebp+8 处传递的参数之一，即使 GCC 已将其放在 ebp-24 处。

它看起来绝对像一个堆栈问题。更重要的是，当调用 DLL 函数的 GCC 程序函数返回时，我的程序崩溃了——所以堆栈发生了一些奇怪的事情。有谁知道我需要做什么才能解决这个问题？我无法访问 DLL 代码。

另外：我尝试将 __cdecl 和 __stdcall 放在程序源文件中的 DLL 函数定义之前，但这没有任何改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T02:50:06.443

看起来像一个调用约定问题。确保将调用约定标签放在正确的位置。使用 GCC，它应该如下所示：

```
typedef int (__stdcall *MyFunctionType)(int arg1, const char *arg2);
MyFunctionType myFunction = (MyFunctionType)GetProcAddress(myModule, "MyFunction");
// check for errors...
int x = myFunction(3, "hello, world!"); 
```

**[编辑]**

看起来您的问题与调用约定无关（尽管正确使用它们*很*重要）。你在滥用`BSTR`s - a`BSTR`不是一个简单的*指针*`char*`。它是一个指向 Unicode 字符串 ( `wchar_t*`) 的指针，此外，在字符串的第一个字符之前隐藏了一个 4 字节长度的前缀。有关完整详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms221069.aspx)。所以，调用`SetLicense()`应该是这样的：

```
BSTR User = SysAllocString(L"");  // Not sure if you can use the same object here,
BSTR Key = SysAllocString(L"");   // that depends on if SetLicense() modifies its
                                  // arguments; using separate objects to be safe
// check for errors, although it's pretty unlikely
(textCapLib.sdk)->lpVtbl->SetLicense((textCapLib.sdk), User, Key);
SysFreeString(User);  // Hopefully the SDK doesn't hang on to pointers to these
SysFreeString(Key);   // strings; if it does, you may have to wait until later to
                      // free them 
```

# .net - CPP/CLI 程序集和 CS/VB 程序集有什么区别？

> ID：931125
> 
> 赞同：1
> 
> 时间：2009-05-31T02:32:22.440
> 
> 标签：.net, c++-cli

我确实知道一些“基本”差异，但我心中仍有一些问题：

*   它们在运行时的性能有何不同？//这个我真的很想知道。
*   为什么不能使用 C++/CLI 构建 MSIL 程序集？
*   MSIL/CIL 程序集的 PE 代码（不是 .NET 的 PEKind）是什么？（C++/CLI 程序集与非托管二进制文件具有相同的 PE 代码，对吗？）

任何进一步的知识/答案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T03:26:15.480

C++/CLI 程序集可以包含本机代码，它有*可能*比托管代码具有更高的性能。但是，本机代码和托管代码之间的转换（通常在调用本机类或本机 API 调用时）涉及一些自动生成的编组和装箱，这确实会占用一些周期。

至于你的第二个问题，你可以。看看[/clr:pure](http://msdn.microsoft.com/en-us/library/k8d11d4s(VS.80).aspx)。

托管和混合模式程序集都是 DLL，但它们具有扩展的[.NET 元数据](http://en.wikipedia.org/wiki/Portable_Executable#.NET.2C_metadata.2C_and_the_PE_format)。纯 MSIL 程序集只是没有本机接口（尝试`dumpbin /exports C:\Windows\Microsoft.NET\Framework\v3.5\Microsoft.Build.Tasks.v3.5.dll`，然后`ildasm`是同一个文件）。

# c# - 删除抛出“删除的对象将被级联重新保存”

> ID：931129
> 
> 赞同：6
> 
> 时间：2009-05-31T02:34:55.087
> 
> 标签：c#, nhibernate, nhibernate-mapping, cascade

我有以下模型：

```
<class name="Person" table="Person" optimistic-lock="version">
  <id name="Id" type="Int32" unsaved-value="0">
    <generator class="native" />
  </id>
  <!-- plus some properties here -->
</class>

<class name="Event" table="Event" optimistic-lock="version">
  <id name="Id" type="Int32" unsaved-value="0">
    <generator class="native" />
  </id>
  <!-- plus some properties here -->
</class>

<class name="PersonEventRegistration" table="PersonEventRegistration" optimistic-lock="version">
  <id name="Id" type="Int32" unsaved-value="0">
    <generator class="native" />
  </id>
  <property name="IsComplete" type="Boolean" not-null="true" />
  <property name="RegistrationDate" type="DateTime" not-null="true" />
  <many-to-one name="Person" class="Person" column="PersonId" foreign-key="FK_PersonEvent_PersonId" cascade="all-delete-orphan" />
  <many-to-one name="Event" class="Event" column="EventId" foreign-key="FK_PersonEvent_EventId" cascade="all-delete-orphan" />
</class> 
```

在 Person 和 Event 中都没有指向 PersonEventRegistration 的属性。

当我尝试从 PersonEventRegistration 中删除条目时，出现以下错误：

```
"deleted object would be re-saved by cascade" 
```

问题是，我没有将此对象存储在任何其他集合中 - 删除代码如下所示：

```
public bool UnregisterFromEvent(Person person, Event entry)
{
    var registrationEntry = this.session
        .CreateCriteria<PersonEventRegistration>()
        .Add(Restrictions.Eq("Person", person))
        .Add(Restrictions.Eq("Event", entry))
        .Add(Restrictions.Eq("IsComplete", false))
        .UniqueResult<PersonEventRegistration>();

    bool result = false;
    if (null != registrationEntry)
    {
        using (ITransaction tx = this.session.BeginTransaction())
        {
            this.session.Delete(registrationEntry);
            tx.Commit();
            result = true;
        }
    }
    return result;
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T14:05:05.090

据我所知，`cascade="all-delete-orphan"`属于集合映射元素，而不是`many-to-one`. 您尚未显示映射的其他两个部分，因此我不能肯定地说，但这可能（可能）是问题所在。

我认为`Person`应该看起来像：

```
<!-- other properties -->
<set name="Events" inverse="true" cascade="all-delete-orphan">
    <key column="Person_id" />
    <one-to-many class="PersonEventRegistration" />
</set> 
```

`Event`：

```
<!-- similar mapping for Event --> 
```

`PersonEventRegistration`：

```
<!-- other properties -->
<many-to-one name="Person" class="Person" column="PersonId" foreign-key="FK_PersonEvent_PersonId" cascade="delete" <!-- or many ="all" ? --> /> 
```

实际上，以上可能是相互冲突的级联（这可能是您所拥有的）。所以说真的，我的回答是两件事：

1.  `cascade="all-delete-orphan"`上没有任何意义`many-to-one`。
2.  确保您已经真正考虑过如何与您的实体合作以及它们应该如何级联操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-21T14:19:09.413

尝试在删除中取消引用 Person 和 Event：

```
 public bool UnregisterFromEvent(Person person, Event entry)
    {
        var registrationEntry = this.session
            .CreateCriteria<PersonEventRegistration>()
            .Add(Restrictions.Eq("Person", person))
            .Add(Restrictions.Eq("Event", entry))
            .Add(Restrictions.Eq("IsComplete", false))
            .UniqueResult<PersonEventRegistration>();

        bool result = false;
        if (null != registrationEntry)
        {
            using (ITransaction tx = this.session.BeginTransaction())
            {
                registrationEntry.Person = null;
                registrationEntry.Event = null;
                this.session.Delete(registrationEntry);
                tx.Commit();
                result = true;
            }
        }
        return result;
    } 
```

另外，我不知道您可以对对象添加限制，我会使用别名和 ID 来编写它。

```
 .Add(Restrictions.Eq("Person", person))
            .Add(Restrictions.Eq("Event", entry)) 
```

# javascript - 如何使用 jscript 断言过滤 Elmah 1.1 RC 中的异常类型？

> ID：931130
> 
> 赞同：2
> 
> 时间：2009-05-31T02:35:54.867
> 
> 标签：javascript, exception, filter, elmah

第一个针对 404 的绑定有效，因此我正确设置了 ErrorFilterModule，但 jscript 部分似乎根本不起作用。HttpRequestValidationException 仍在报告邮件中发送。

```
<errorFilter>
  <test>
    <equal binding="HttpStatusCode" value="404" type="Int32" />
    <jscript>
      <![CDATA[
            // @assembly mscorlib
            // @assembly System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
            // @import System.IO
            // @import System.Web

            HttpStatusCode == 404
            || BaseException instanceof FileNotFoundException 
            || BaseException instanceof HttpRequestValidationException
            || BaseException instanceof HttpException
            /* Using RegExp below (see http://msdn.microsoft.com/en-us/library/h6e2eb7w.aspx) */
            || Context.Request.UserAgent.match(/crawler/i)
            || Context.Request.ServerVariables['REMOTE_ADDR'] == '127.0.0.1' // IPv4 only
            ]]>
    </jscript>
  </test>
</errorFilter> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-04T23:42:23.097

当您有多个条件时，如您在示例中的方式（`<equal>`then `<jscript>`），您需要告诉 ELMAH 对它们进行 AND 或 OR。解决方案是使用`<and>`or `<or>`，具体取决于您希望如何在逻辑上组合条件。下面，我对两者进行了 OR-ed，因此条件可能适用：

```
<errorFilter>
  <test>
    <or>
        <equal binding="HttpStatusCode" value="404" type="Int32" />
        <jscript>
          <expression><![CDATA[
                // @assembly mscorlib
                // @assembly System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
                // @import System.IO
                // @import System.Web

                HttpStatusCode == 404
                || BaseException instanceof FileNotFoundException 
                || BaseException instanceof HttpRequestValidationException
                || BaseException instanceof HttpException
                /* Using RegExp below (see http://msdn.microsoft.com/en-us/library/h6e2eb7w.aspx) */
                || Context.Request.UserAgent.match(/crawler/i)
                || Context.Request.ServerVariables['REMOTE_ADDR'] == '127.0.0.1' // IPv4 only
          ]]></expression>
        </jscript>
    </or>
  </test>
</errorFilter> 
```

当您直接有多个条件`<test>`而没有逻辑（`<and>`或`<or>`）组合时，则仅使用第一个条件，这就是您的条件`<jscript>`被忽略的原因。

# title - 你告诉别人你的职业是什么？

> ID：931146
> 
> 赞同：2
> 
> 时间：2009-05-31T02:54:39.180
> 
> 标签：title

我的技术头衔是技术人员，和你们大多数人一样，我以设计/编写代码为生。当有人问我以什么为生时，我永远无法决定要回答什么？

软件开发人员？软件工程师？[内核] 程序员？电脑科学家？

这些似乎都有各种不好的内涵。我想我最喜欢软件工程师，但不幸的是，这个词已经被实际上不编码的人所采用。我犯了参加“软件工程”课程的错误，并意识到我绝对不想与专业的人交往。

可能这太主观了，所以请随意使用社区 wiki 或其他什么，但我认为这是一个有效的问题，我想听听其他人的决定和他们的推理。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-31T03:11:09.677

通常是“软件开发人员”。这似乎是程序员和工程师之间的一个很好的妥协。在工作中，我是一名“开发人员”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-31T04:11:01.903

典型对话：

* * *

他们：那你靠什么谋生？

我：我是一个 PMDRDG，或者是一个自大狂妄自大的自大狂。

他们：再来？

我：我写代码。

他们：哦，真的那么什么样的——

我：我要杀了蜥蜴王！

他们：[慢慢后退]

我：上帝，我喜欢星期一。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-31T02:57:14.463

对于程序员...代码猴子

对于懂电脑的普通人...程序员

对于那些知道存在某种计算机的人...计算机专家

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-31T03:01:52.877

我问一个人他是不是程序员，他看起来很震惊。“我是一名软件工程师，”他坚持说。“哦，”我说，“我是个程序员。”

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-31T03:06:50.467

“软件开发人员”。在加拿大，“工程师”是一个很[麻烦的词](http://en.wikipedia.org/wiki/Controversies_over_the_term_Engineer#Canada)，所以我尽量避免这样称呼自己。我更喜欢“开发人员”而不是“程序员”，因为我所做的不仅仅是“程序”：我收集需求、设计、测试、文档等。

此外，最近我一直自称是一名“技术顾问”，因为我想从软件创建扩展到更高级别的工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-31T03:28:06.803

“电脑玩意”似乎满足了大多数人。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-31T03:31:16.580

“架构师”通常会确保很少有后续问题。奇怪的是，从来没有人问过我关于建筑物的问题。但是，我已经准备好“你去过智利圣地亚哥吗？” 如果他们这样做。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-31T03:46:10.630

我总是说，“你知道互联网吗？我知道的。”

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-31T04:23:03.233

我整天坐在一个盒子里敲键，钱出现在银行里。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-31T05:07:12.757

[软件四面](http://www.dilbert.com/strips/comic/2008-03-04/)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-31T09:06:11.643

有一次，我试图在一次聚会上快速解决这个问题，在我面前无言地摆动我的手指，手掌朝下，在键盘上打字的经典默剧。

我的对话者面无表情：“哦，那么你按摩侏儒的头部？”

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-31T03:34:36.290

我的正式头衔是废话 - 分析师，因为在我们公司，IT 是主要的事情，他们懒得为所有级别创建头衔。所以我们公司的每个入门级别都是分析师，下一个晋升是高级分析师。但是当有人问我的专业人士时，我主要是软件开发人员，因为这就是我想要被称为的 :)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-31T03:41:39.553

程序员 +1

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-05-31T04:06:08.110

“网站。”

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-31T02:56:23.590

我说“程序员”——我的护照也是。我的头衔是“计算机科学家”，我的工作实际上更多是关于脚本和业务问题，但重点应该是切入问题的核心。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-05-31T02:58:52.010

《程序员》感觉不错。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-05-31T03:02:33.500

在工作中，我只是 IT 的一部分（这很烦人，因为人们认为我关心他们的 RSA 令牌不起作用，或者我实际上可以重置他们的密码，甚至告诉他们密码是什么。）

在部门内，我是一名程序员。

我的职位描述是技术开发经理（所以这使我成为技术负责人，本质上，兼任经理职责）。

工作之余，这完全取决于我在与谁交谈，但通常我是一名软件工程师，因为这就是我的学位。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-05-31T03:04:23.293

好吧，从技术上讲，我仍然是一名学生，但除此之外，我倾向于称自己为程序员。我没有工程学位，所以我不会乱用“软件工程师”的头衔。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-05-31T04:24:02.077

代码苦工。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-05-31T04:31:31.597

程序员、Web 程序员、开发人员...

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-05-31T15:04:59.733

我和恐龙一起工作。

自去年五次以来，我在 OpenVMS 上使用 Cobol 和 FMS 进行编程。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-05-31T03:56:33.163

这取决于谁在问。IIRC，Jon Bentley（以“Programming Pearls”闻名）在他的纳税申报表上写下“计算机程序员”；我愿意。如果有人从公司外面问，那要看谁，但答案可能是“计算机程序员”或“跳槽计算机程序员”——在公司内部，我的职位是高级技术人员；有时，当我需要说服客户讨论安全问题是合适的时，我最终会使用“架构师”（甚至偶尔会使用“安全架构师”）。但是“计算机程序员”仍然是我的首选头衔。

职称通胀在该行业十分猖獗。我不更多地使用架构师的一个原因是因为我所在的团队中有太多的“架构师”——这足以引起巴别塔的混乱。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-05-31T04:00:57.470

通常我会告诉人们我对计算机进行编程或开发软件。FWIW，目前我的头衔是“高级软件工程师”。这些年来，我在开发软件的工作中拥有过各种头衔：“程序员”、“程序员/分析师”、“工程师（软件）”、“中级软件工程师”、“高级技术人员” （在末尾附加 I、II 或 III），最后是我现在所拥有的。当我在大学期间晚上从事“计算机操作员”工作时，我还编写了一个小程序。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-05-31T04:04:23.040

我认为这真的取决于我在和谁说话。

对于具有技术背景的人：“我是软件开发人员”

平均而言，乔：“我是一名（计算机）程序员。”

虽然该领域许多工作的官方头衔是“软件工程师”，但它实际上完全是关于上下文，让你正在与之交谈的人对你所做的事情有一个很好的了解。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-05-31T03:06:24.273

“我用电脑工作。”

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-05-31T05:13:12.017

我用机器工作

...然后看到人们试图闻你身上是否有油脂

# postgresql - PostgreSQL 无法识别 STRAIGHT_JOIN

> ID：931148
> 
> 赞同：2
> 
> 时间：2009-05-31T02:56:27.133
> 
> 标签：postgresql

```
SELECT  STRAIGHT_JOIN s.*, date_part('epoch', s.date) AS unixdate, 
  date_part('epoch', s.expire) as expireunix, u.username, u.fullname, 
  u.photo, u.email, t.topic, t.imageurl  
FROM stories s, users u, topics t WHERE (s.uid = u.uid) AND (s.tid = t.tid) 
```

它说：

```
ERROR: syntax error at or near "s"
SQL state: 42601
Character: 23 
```

我正在加入，但它给了我这个错误。如果我删除`STRAIGHT_JOIN`它执行的关键字没有任何问题。但是有什么负面的东西可以删除吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T04:43:29.823

把它放在外面。 `STRAIGHT_JOIN`是一个 MySQL 增强功能，它的工作方式类似`INNER JOIN`但`STRAIGHT_JOIN`强制首先读取左表。这是一种覆盖 MySQL 优化器的方法，当优化器做出糟糕的决定重新排序表时。

所有这些都与 PostgreSQL 无关。不仅`STRAIGHT_JOIN`语法关键字是 MySQL 特有的，它影响优化器内部的功能也是如此。每个品牌的数据库都有自己的优化器实现，每个品牌都有自己的特质。

您还可以使用标准 SQL-92 JOIN 语法来代替过时的逗号样式连接。以下是我将如何编写此查询：

```
SELECT s.*, DATE_PART('epoch', s.date) AS unixdate, 
  DATE_PART('epoch', s.expire) AS expireunix, u.username, 
  u.fullname, u.photo, u.email, t.topic, t.imageurl 
FROM stories s 
  INNER JOIN users u ON (s.uid = u.uid)
  INNER JOIN topics t ON (s.tid = t.tid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T12:37:17.737

`STRAIGHT_JOIN``JOIN`是在 中强制执行顺序的提示`MySQL`。

`PostgreSQL`开发人员不喜欢提示，这就是`PostgreSQL`缺少此功能的原因。

如果您不知道/关心`JOIN`订单是什么，只需省略此关键字：

```
SELECT  s.*, date_part('epoch', s.date) AS unixdate, 
        date_part('epoch', s.expire) as expireunix, u.username, u.fullname, 
        u.photo, u.email, t.topic, t.imageurl  
FROM    stories s, users u, topics t
WHERE   s.uid = u.uid
        AND s.tid = t.tid 
```

`MySQL`不实现`JOIN`除 , 之外的任何方法`NESTED LOOPS`，但是实现了`PostgreSQL`。

`JOIN`order 没有意义`MERGE JOIN`，也不能强制`PostgreSQL`for `HASH JOIN`。

您可以使某些列不可分割，如果优化器选择，这将强制`PostgreSQL`使用预期`JOIN`的顺序`NESTED LOOPS`：

```
SELECT  s.*, date_part('epoch', s.date) AS unixdate, 
        date_part('epoch', s.expire) as expireunix, u.username, u.fullname, 
        u.photo, u.email, t.topic, t.imageurl  
FROM    stories s, users u, topics t
WHERE   s.uid = (u.uid + 1) - 1
        AND t.tid = (s.tid + 1) - 1 
```

这将强制`JOIN`排序以防`NESTED LOOPS`优化器选择。

要强制`NESTED LOOPS`，摆脱或查询中的等值连接：

```
SELECT  s.*, date_part('epoch', s.date) AS unixdate, 
        date_part('epoch', s.expire) as expireunix, u.username, u.fullname, 
        u.photo, u.email, t.topic, t.imageurl  
FROM    stories s, users u, topics t
WHERE   s.uid > u.uid - 1
        AND s.uid < u.uid + 1
        AND t.tid > s.tid - 1
        AND t.tid < s.tid + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T03:02:34.733

STRAIGHT_JOIN 是 mysql 的增强，通过 pgsql，你指的是 postgres 数据库吗？如果是这样，您应该查看 SQL 标准操作。postgres 手册列出了他们每个操作的标准合规级别。很高兴知道您是否要在 dbmses 之间移动。

看看 www.postgresql.org/docs/8.3/static/tutorial-join.html

# c++-cli - 编译为 x64 的 C++/CLI 项目中定义的 _WIN64 在哪里？

> ID：931150
> 
> 赞同：2
> 
> 时间：2009-05-31T02:57:45.820
> 
> 标签：c++-cli, win64

它似乎是在我创建的每个项目中自动添加并为 x64 编译的，但在选择 x64 配置时，它甚至没有出现在项目的 Configuration Properties/(C/C++)/Preprocessor 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-31T03:42:42.173

_WIN64 由 Visual Studio 自动定义。请参阅[预定义宏](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)列表。

# sql - 在 Rails 中分组和计数

> ID：931174
> 
> 赞同：4
> 
> 时间：2009-05-31T03:17:33.017
> 
> 标签：sql, ruby-on-rails, activerecord

我有这段代码，我得到一个空对象。

```
@results = PollRoles.find(
            :all, 
            :select => 'option_id, count(*) count', 
            :group => 'option_id', 
            :conditions => ["poll_id = ?", @poll.id]) 
```

这是编写查询的正确方法吗？我想要一个具有选项 id 的记录集合以及在 PollRoles 模型中找到该选项 id 的次数。

**编辑：**这就是我迭代结果的方式：

```
<% @results.each do |result| %>
            <% @option = Option.find_by_id(result.option_id) %>
            <%= @option.question %> <%= result.count %>
        <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T03:21:53.150

你想使用[这个函数](http://api.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html#M002130)来做这样的事情
`PollRoles.count(:all, :group => 'option_id')`应该返回一个哈希映射，每个都有`option_id`与之匹配的记录数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T03:57:57.920

你会得到什么：

PollRoles.find(:all,:conditions=>["poll_id = ?",@poll.id]).collect{|p| p.option_id}

# wpf - WPF 垂直菜单 - 在左侧显示第一个子菜单

> ID：931177
> 
> 赞同：0
> 
> 时间：2009-05-31T03:20:09.440
> 
> 标签：wpf, menu

我目前正在尝试使 WPF 菜单垂直呈现。我使用了以下代码：

```
<Menu.ItemsPanel>
    <ItemsPanelTemplate>
        <VirtualizingStackPanel Orientation="Vertical"/>
    </ItemsPanelTemplate>
</Menu.ItemsPanel> 
```

没关系，但我希望子菜单显示在每个根菜单项的左侧。关于如何做的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:44:00.433

您应该使用样式和模板方法来创建新的 MenuItem 模板。有关样式和模板的详细信息，请参阅有关[样式和模板的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms745683.aspx)

可以在 Expression Blend 中轻松地为 MenuItem 创建或修改模板，请参阅此 MSDN 文章[创建或修改模板](http://msdn.microsoft.com/en-us/library/cc294908%28v=expression.30%29.aspx)

子菜单项的位置的默认设置是在根菜单项的右侧，除了其子菜单项是下拉菜单的 TopLevelHeader 菜单项。如果您想将TopLevelHeader MenuItem 也设置在右侧，您只需创建默认MenuItem 的新模板并修改TopLevelHeader MenuItem 的设置。在混合中，您只需在模板的 XAML 代码部分中将“ResourceId”修改为“SubmenuHeaderTemplateKey”。

```
 <Trigger Property="Role" Value="TopLevelHeader">
                <Setter Property="Padding" Value="7,2,8,3"/>
                <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=TopLevelHeaderTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
    </Trigger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T17:06:22.603

您应该调整**MenutItem**控件的模板。如果您没有此控件模板的任何示例，您可以使用 blend 的功能“编辑模板 -> 编辑副本...”创建一个。在那里，您必须找到一个**Popup**控件并将其**Placement 属性**更改为您想要的任何内容。此弹出窗口是托管子项的位置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-01-16T12:26:45.357

```
<Menu>
    <Menu.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Vertical"/>
        </ItemsPanelTemplate>
    </Menu.ItemsPanel>
</Menu> 
```

我希望这可能会有所帮助

# asp.net - 发送 SMS 文本消息

> ID：931186
> 
> 赞同：2
> 
> 时间：2009-05-31T03:27:01.157
> 
> 标签：asp.net, mobile, sms

如何从我的手机发送 SMS 文本消息并在我的 asp.net 网站上接收和处理？我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-04T14:55:22.863

这真的取决于你想用你的应用程序实现什么。

要获得更强大的解决方案，您需要使用 SMS 网关提供程序。我会推荐像 Clickatell [http://www.clickatell.com/products/two_way.php](http://www.clickatell.com/products/two_way.php)这样的人。它们有一个简单的 API，您可以与之集成以通过您的应用程序发送和接收消息。

这里的缺点是您需要支付设置费用以及租用用于接收消息的虚拟手机号码。

# html - 为什么这个 Yahoo Pipe 不输出项目？

> ID：931187
> 
> 赞同：0
> 
> 时间：2009-05-31T03:27:47.740
> 
> 标签：html, rss, yahoo-pipes

我有一个[雅虎！](http://pipes.yahoo.com/mrclay/crockford_blog)尝试将[HTML 页面转换为 RSS 的](http://profiles.yahoo.com/blog/GSBHPXZFNRM2QRAP3PXNGFMFVU)[管道](http://pipes.yahoo.com/mrclay/crockford_blog)，但生成的[提要](http://pipes.yahoo.com/pipes/pipe.run?_id=yqqmj3xN3hGsftD__w6H4A&_render=rss)不包含任何项目。对于每个条目，我解析了这些元素：

*   链接（固定链接）
*   标题（HTML 标题）
*   描述（HTML 条目）
*   guid（固定链接的一部分）

各种教程使我添加了这些：

*   dc:creator（“道格”）
*   y:id.value（永久链接）
*   y:published（带有从“3 天前”等文本生成的日期属性）

如果您[编辑源](http://pipes.yahoo.com/pipes/pipe.edit?_id=yqqmj3xN3hGsftD__w6H4A)并突出显示管道输出，调试器将显示 5 个条目，这些元素/属性完好无损。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T07:03:34.247

这很烦人！通过稍微调整它以在“循环”操作符框中执行“发出结果”，我设法获得了一个包含 5 个项目的提要，但由于某种原因它只包含 item.guid。

[根据http://feedvalidator.org](http://feedvalidator.org)，您的提要是有效的（考虑到没有元素，这并不难）。

我尝试删除您的一些组件，但我的更改没有帮助。

顺便说一句，他们杀死 Yahoo360 博客以支持无源 Yahoo Profile 博客的疯狂疯子。哦，我也喜欢道格拉斯·克罗克福德。:-)

# c++ - 如何使用具有默认值的参数制作函数原型？

> ID：931195
> 
> 赞同：8
> 
> 时间：2009-05-31T03:34:09.273
> 
> 标签：c++

A 有一个原型的函数：

```
void arryprnt(int[], string, int, string, string); 
```

以及以下定义：

```
void arryprnt(int[] a, string intro, int len, string sep=", ", string end=".") {
// stuff
} 
```

我这样称呼它：

```
arryprnt(jimmy, "PSEUDOJIMMY: ", 15); 
```

...当我调用 arryprnt 时，我收到一个编译器错误，说我使用的参数太少，基于原型所说的。“好吧，”我在想，“编译器不知道 arryprnt 的某些参数有默认值。我只是将参数从定义中复制到原型中。” 我确实做到了，但是，我得到一个编译器错误，告诉我我正在调用带有*太多*参数的 arryprnt！我可以明确指定所有参数，但是有没有办法在不指定所有参数的情况下调用它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-31T03:43:01.957

您应该将默认参数放在原型中，而不是像这样的定义：

```
void arryprnt(int[] a, string intro, int len, string sep=", ", string end="."); 
```

并在没有它们的情况下进行定义：

```
void arryprnt(int[] a, string intro, int len, string sep, string end) {
    // ...
} 
```

顺便说一句：另一方面。**通过const reference**传递大于 int 的对象被认为是一种好的做法。虽然这并不适用于**所有**情况，但它适用于大多数情况并避免不必要地复制内容。例如：

```
void func(const std::string &s) {
    // do some read-only operation with s.
}

func("hello world"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-04T14:06:52.070

不确定这是否仍然相关，但下面的代码工作正常。

原型：

```
void arryprnt(int[], string, int, string = ", ", string=". "); 
```

定义：

```
void arryprnt(int a[], string intro, int len, string sep, string endd)
//stuff 
```

当函数有默认参数时，最好在原型中声明它们，而不是在函数定义中。下面的代码不起作用，

原型：

```
void arryprnt(int[], string, int, string = ", ", string=". "); 
```

定义：

```
void arryprnt(int a[], string intro, int len, string sep = ", ", string endd = ". ")
//stuff 
```

# linux - 如何在不同的 X11 会话中打开窗口？

> ID：931198
> 
> 赞同：0
> 
> 时间：2009-05-31T03:35:55.107
> 
> 标签：linux, x11, remote-desktop

仅限 linux：我想为我的应用程序打开两个窗口，一个在计算机的主屏幕上，一个在只能由远程桌面访问的虚拟 X11 会话上。一些 X11 专家可以告诉我这是如何完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T03:50:15.593

我对这个问题有点不清楚，但这是一个假设的设置：

我坐在我的电脑上（我们称之为根会话），我有一个外壳。在这种情况下，有一个值为“127.0.0.1:0.0”的环境变量 DISPLAY。

第二个会话开始。您需要知道这台机器上的显示变量是什么。如果它也在本地主机上，它可能类似于“127.0.0.1:1.0”。如果您在另一台主机上执行“echo $DISPLAY”，它会告诉您这一点。如果它报告“：1.0”或没有“127.0.0.1”的东西，那没关系。如果未指定地址，则隐含 localhost。

接下来，在返回根会话之前，您需要运行“xhost”以允许其他源在此主机上显示窗口。（免责声明：我要告诉您的操作非常不安全，因此如果您在不安全的网络上，您可能需要阅读 xhost 的手册页）。在另一个显示器上的 xterm 中键入“xhost +”。此命令（特别是“+”选项）允许任何主机在此显示器上弹出窗口。

那么你所要做的就是回到你的根会话shell并（我假设bash）运行“export DISPLAY =“127.0.0.1:1.0”。然后运行“xterm”，它应该会在另一个窗口中弹出窗口会议。

我希望这有帮助。

如果其中任何一个不清楚，您可以搜索“X windows DISPLAY variable”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T03:50:28.323

这取决于您正在编程的级别——如果您直接调用 Xlib，我想您知道第一个参数`XCreateWindow`是 a `Display *`，当然这就是您告诉 X11 在哪里创建窗口的方式。 [http://tronche.com/gui/x/xlib/window/XCreateWindow.html](http://tronche.com/gui/x/xlib/window/XCreateWindow.html)了解详细信息，以防万一。

如果您使用的是其他语言/框架/等，那么如果您提到它们是哪些语言会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T03:50:40.430

您需要像这样设置*DISPLAY*环境变量：

```
DISPLAY=host:0.0 
```

有关详细信息，请参阅[X 联机帮助页](http://www.xfree86.org/current/X.7.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-02T18:51:00.793

[此功能](http://tronche.com/gui/x/xlib/display/opening.html)的 [编程接口似乎被调用`$DISPLAY``xlib``XOpenDisplay()`](http://tronche.com/gui/x/xlib/display/opening.html)。您需要管理两个（或更多）`Display`对象。

各种更高级别的接口工具包（qt，...）有可能提供更抽象的接口。这将为您节省相当大的痛苦。

祝你好运。

# javascript - 是否有用于文本字段的 jQuery 自动增长插件？

> ID：931207
> 
> 赞同：68
> 
> 时间：2009-05-31T03:45:19.367
> 
> 标签：javascript, jquery, scripting

我找到了各种用于自动增长*textarea*的插件，但没有找到输入文本字段。有人知道是否存在吗？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2009-05-31T09:05:39.897

这是一个插件，可以满足您的需求：

**编辑**：我已经按照 Mathias 的评论修复了插件。:)

在此处查看演示：http: **[//jsfiddle.net/rRHzY](http://jsfiddle.net/rRHzY)**

插件：

```
(function($){

    $.fn.autoGrowInput = function(o) {

        o = $.extend({
            maxWidth: 1000,
            minWidth: 0,
            comfortZone: 70
        }, o);

        this.filter('input:text').each(function(){

            var minWidth = o.minWidth || $(this).width(),
                val = '',
                input = $(this),
                testSubject = $('<tester/>').css({
                    position: 'absolute',
                    top: -9999,
                    left: -9999,
                    width: 'auto',
                    fontSize: input.css('fontSize'),
                    fontFamily: input.css('fontFamily'),
                    fontWeight: input.css('fontWeight'),
                    letterSpacing: input.css('letterSpacing'),
                    whiteSpace: 'nowrap'
                }),
                check = function() {

                    if (val === (val = input.val())) {return;}

                    // Enter new content into testSubject
                    var escaped = val.replace(/&/g, '&amp;').replace(/\s/g,'&nbsp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                    testSubject.html(escaped);

                    // Calculate new width + whether to change
                    var testerWidth = testSubject.width(),
                        newWidth = (testerWidth + o.comfortZone) >= minWidth ? testerWidth + o.comfortZone : minWidth,
                        currentWidth = input.width(),
                        isValidWidthChange = (newWidth < currentWidth && newWidth >= minWidth)
                                             || (newWidth > minWidth && newWidth < o.maxWidth);

                    // Animate width
                    if (isValidWidthChange) {
                        input.width(newWidth);
                    }

                };

            testSubject.insertAfter(input);

            $(this).bind('keyup keydown blur update', check);

        });

        return this;

    };

})(jQuery); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-13T23:10:50.493

我在 GitHub 上有一个 jQuery 插件：[https ://github.com/MartinF/jQuery.Autosize.Input](https://github.com/MartinF/jQuery.Autosize.Input)

它使用与詹姆斯回答相同的方法，但在评论中提到了一些变化。

你可以在这里看到一个活生生的例子：http: [//jsfiddle.net/mJMpw/6/](http://jsfiddle.net/mJMpw/6/)

例子：

```
<input type="text" value="" placeholder="Autosize" data-autosize-input='{ "space": 40 }' />

input[type="data-autosize-input"] {
  width: 90px;
  min-width: 90px;
  max-width: 300px;
  transition: width 0.25s;    
} 
```

如果您想要一个好的效果，您只需使用 css 设置最小/最大宽度并在宽度上使用过渡。

您可以将到末尾的空间/距离指定为输入元素上 data-autosize-input 属性的 json 表示法中的值。

当然你也可以使用 jQuery 来初始化它

```
$("selector").autosizeInput(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-09-20T13:29:05.793

很好的插件，谢谢！不过，我更改了两件在我的项目中似乎效果更好的东西。

1.  我将 TESTER 标记更改为 DIV，以避免“意外调用方法或属性访问”。在 IE8 中（即使您的演示确实在 IE8 中工作。使用自定义 HTML 标记是否有特殊原因？
2.  在代码末尾附近的绑定语句之后，我添加了对 check() 的调用，以便在加载页面后立即调整文本框的大小，以防文本框在启动时已经包含内容。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-11-13T17:01:48.990

只是想分享对 James 伟大插件的一个小改进。将此代码添加到 tester 元素的 CSS 声明中以说明文本缩进：

```
textIndent: 0 
```

没有它，在某些情况下，tester 元素可能会无意中从其他地方继承文本缩进，从而丢弃输入的大小。

与 JP 一样，我也想从一开始就将输入的大小调整为正确的大小，我所做的只是略有不同，通过将“trigger('keyup')”链接到 autoGrowInput 方法调用，例如：

```
$('#contact_form').autoGrowInput({comfortZone: 7, minWidth: 10, maxWidth: 200}).trigger('keyup'); 
```

作为旁注，我注册这个网站纯粹是为了评论詹姆斯的解决方案，我有点恼火地发现我不能，因为我没有足够的声誉点来开始。抱歉，如果我遗漏了什么，但这似乎意味着我必须发表这是对主要问题的评论，而不是更恰当地对詹姆斯的解决方案发表评论。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-11-15T09:36:11.207

我也换了

```
$(this).bind('keyup keydown blur update', check) 
```

到

```
$(this).bind('keyup blur update', check).bind('keydown', function() {
    setTimeout(check);
}); 
```

为了在浏览器重新渲染后立即调整字段大小。它将使该领域摆脱一些喋喋不休。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-21T13:02:03.300

我为文本类型的输入创建了一个插件，它重新创建了这种行为。它还有一些其他独特的功能。您可以查看[示例](http://static.jortech.com.ve/easyText/jQuery/demo/)并查看插件的[文档](http://ajorquera.github.io/jQuery-EasyText/)。@james 回答在将大文本粘贴到输入时存在一些问题。为了解决这个问题，我对他的代码做了一些修改。这是一个[演示](http://jsfiddle.net/ajorquera/p3YU6/embedded/result/)，用于此示例。

```
(function($){        
    $.fn.autoGrowInput = function(o) {

        o = $.extend({
            maxWidth: 200,
            minWidth: 1,
            comfortZone: 1,
          width: 1
        }, o);

        this.filter('input:text').each(function(){

            var minWidth = o.minWidth || $(this).width(),
                maxWidth = o.maxWidth,
                val = '',
                input = $(this),
                testSubject = $('<tester/>').css({
                    position: 'absolute',
                    top: -9999,
                    left: -9999,
                    width: 'auto',
                    fontSize: input.css('fontSize'),
                    fontFamily: input.css('fontFamily'),
                    fontWeight: input.css('fontWeight'),
                    letterSpacing: input.css('letterSpacing'),
                    whiteSpace: 'nowrap'
                }),
                check = function() {

                    if (val === (val = input.val())) {return;}

                    // Enter new content into testSubject
                    var escaped = val.replace(/&/g, '&amp;').replace(/\s/g,'&nbsp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                    testSubject.html(escaped);

                    // Calculate new width + whether to change
                    var testerWidth = testSubject.width(),
                    newWidth = testerWidth + o.comfortZone,
                    currentWidth = input.width();

                   if (testerWidth < minWidth) {
                       newWidth = minWidth;
                   } else if (testerWidth > maxWidth) {
                       newWidth = maxWidth;
                   } 

                   input.width(newWidth + o.comfortZone);  
            };

            testSubject.insertAfter(input);

            $(this).bind('input', check);

        });

        return this;

    };

})(jQuery); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-31T08:33:11.333

如果您希望文本框在其中的字符串超出其宽度时增长，也许这样的东西对您有用......它检测文本框的大小属性。如果字符串的长度超过该属性，它会将文本框扩展到 keyup 上字符串的长度。

在下面的脚本中，“#test”是一个文本框 ID。

```
<script language="javascript" type="text/javascript">
$(document).ready(function(){
    $("#test").keyup(function(){
        if($("#test").attr("size") < $("#test").val().length){
            size = $("#test").val().length;
            $("#test").attr("size",size);
        }
    })
});
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-01-24T16:42:00.633

IE 溢出很有趣：可见被非常重视。您可以通过在输入元素上应用溢出：可见来实现此效果。不确定现代浏览器是否存在任何类似的 CSS 技巧。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-13T07:53:24.367

很棒的插件詹姆斯！谢谢。我确实添加了 JP 最后的检查建议，虽然非常有效。

此外，我还添加了一些更改。如果更改的宽度超过 maxWidth，我想将输入的大小设置为最大大小，所以我添加了：

```
else if (widthexceeds){
    input.width(o.maxWidth);
} 
```

在 if 检查 isValidWidthChange 下方`widthexceeds = newWidth > o.maxWidth`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-28T21:27:53.753

我为我自己的项目创建了一个插件`input-autogrow`来解决这个问题。这个插件最初是基于 James 的回答，但在很多方面都得到了改进。

[https://github.com/westonganger/input-autogrow](https://github.com/westonganger/input-autogrow)

`input-autogrow`是一个用于自动增长输入的插件。这个插件与其他插件不同，因为大多数情况下都是针对 textarea 标签，而这个库是针对输入标签的。需要 DOM 库，例如 jQuery、Zepto 或任何支持 $.fn 插件的库。

以下是一些使用示例。

```
/* Makes elements readonly if they already have the readonly attribute */
$('input.autogrow').inputAutogrow();

/* Manually trigger update */
$('input.autogrow').trigger('autogrow');
/* or */
$('input.autogrow').trigger('change');

/* Custom Options */
$('input.autogrow').inputAutogrow({maxWidth: 500, minWidth: 25, trailingSpace: 10});

/* Remove autogrow from input */
$('input.autogrow').inputAutogrow('destroy'); 
```

# stored-procedures - SubSonic：检索存储过程 OUT 参数的值

> ID：931209
> 
> 赞同：2
> 
> 时间：2009-05-31T03:47:33.173
> 
> 标签：stored-procedures, subsonic, out-parameters

我喜欢你的工具。我一直在使用它，但是今天我遇到了一个问题......

我编写了一个通过 OUT 参数返回一些值的存储过程，但 SubSonic 似乎没有生成存储过程方法的输出参数。例如，对于这样的 SPI：

> CREATE PROC dbo.MyProc @param1 int, @param2 int out, @param3 varchar(150) out

它生成签名

> SPs.MyProc(int?param1, int?param2, string param3

我希望它会产生这个

> SPs.MyProc(int?param1, out int?param2, out string param3)
> 
> 好吧，考虑到该方法实际上只是配置了 SP 而没有实际执行它，我希望 Subsonic 会生成这个
> 
> SPs.MyProc(int?param1, ref int?param2, ref string param3)

你们如何解决这个问题？Subsonic 已经有类似的东西了，我只是错过了它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T07:33:05.963

[SOURCE](http://mkchampaneri.wordpress.com/2008/01/09/access-output-parameters-of-stored-procedure-using-subsonic/) 您可以使用 StoredProcedure.OutputValues 访问 SubSonic 中 SP 的 OuPut 参数；

以下是访问 SP 的 OutPut 参数的代码块，这里我起诉了 SP “UspTestOutPut”：

```
StoredProcedure s = SPs.UspTestOutPut(”10″, “15″);
s.Execute();
s.OutputValues.ForEach(delegate(object objOutput)
{
    Response.Write(”OutPutValues=”+objOutput.ToString());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T07:55:17.713

您必须将 SP 实例化为对象然后运行它 - 然后它将 OUTPUT 参数作为属性传递给您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-28T09:07:09.687

似乎 OutputParameters 的使用不能与 .GetReader() 结合使用，而只能与 .Execute() 结合使用。

我无法结合使用 OUTPUT 参数从数据库中检索记录。

例如，我有一个从数据库返回时事通讯列表的存储过程，但我想使用 SQL Server 2005 的分页功能。所以我提供了我想查看的 pageSize 和实际页面。在同一过程中，我想计算可用页面的数量并使用输出变量返回。

我不让它工作。具有 OutputParameters 的列表中有 1 项，但值始终为 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-26T19:13:43.990

我正在使用 subsonic 和 Sqlserver 2005 服务器。对于分页功能，我将 currentpage 和 pagesize 作为输入参数传递。要获取记录总数，我使用 @TotalCount int OUTPUT 参数变量。

在 StoresPrecedure 中，我这样使用：

Select * from TestTable where PageSize=@PageSize and CurrentPage = @CurrentPage -- 获取当前页面记录。

设置@Query =“插入.....”

执行 sp_executesql @Query

SET @TotalCount = @@Rowcount -- 受插入语句影响的记录总数

在我的 C#.net - subsonic 类文件中，我使用 GetDataSet() 来获取结果 DataSet 和 OutputValues[0] 来从输出参数中获取值。

```
 DataSet results = sp.GetDataSet(); // current page records

      int totalCnt = Convert.ToInt32(sp.OutputValues[0].ToString()); // total number of
                                                             //records from outputparameter 
```

# python - 调试一些 Python 代码

> ID：931211
> 
> 赞同：0
> 
> 时间：2009-05-31T03:47:57.370
> 
> 标签：python, debugging

编辑：您可以在这里获得完整的源代码：[http://pastebin.com/m26693](http://pastebin.com/m26693)

再次编辑：我在 pastebin 页面中添加了一些亮点。[http://pastebin.com/m10f8d239](http://pastebin.com/m10f8d239)

我可能会后悔问这么长的问题，但我被这个错误难住了，我可以使用一些指导。您将不得不运行此代码（编辑：不再。我无法包含所有代码 - 它已被截断）以帮助真正了解正在发生的事情，除非您是上帝或其他人，然后一定要在不运行它的情况下弄清楚它。其实我有点希望我能解释得足够好，这样就没有必要了，如果我没有做到这一点，我深表歉意。

首先，我会给你一些输出。（编辑：下面有新的输出）

```
argc 1 [<__main__.RESULT instance at 0x94f91ec>]
(<__main__.RESULT instance at 0x9371f8c>, <__main__.RESULT instance at 0x94f91ec>)
None
bar
internal error: unknown result type 0
argc 1 [<__main__.RESULT instance at 0x94f92ac>]
(<__main__.RESULT instance at 0x94f91ac>, <__main__.RESULT instance at 0x94f92ac>)
None
bar
internal error: unknown result type 0
argc 1 [<__main__.RESULT instance at 0x94f91ec>]
(<__main__.RESULT instance at 0x94f91ec>,)
String: 'bar' 
```

我们在输出中有 3 个部门。请注意，argc 始终为 1。在打印时，已经构建了一个参数列表以传递给插件（插件只是表达式解释器中的命令。大部分代码是表达式解释器。） argc 之后的单个 RESULT 实例表示是参数列表。下一行是到达被调用的 Python 方法后的参数列表。请注意，此时它有两个参数。这两个中的第一个是垃圾。第二个是我想要的。但是，正如您在以“argc 1”开头的行中看到的那样，参数列表始终为 1 RESULT 宽。哪里来的异端争论？

就像我说的，输出中有 3 个部门。第一个部门本身就是一个类。第二类是子类。第三部分根本不是类/实例。输出我预期的唯一部门是第三部门。请注意，它在调用之前和调用内部都有 1 个参数成员，最后一行是预期的输出。它只是回显/返回参数“bar”。

我应该注意变量参数列表的任何特性吗？我的意思是：

```
def foo(result, *argv):
    print argv[0] 
```

我真的认为这个错误与此有关，因为这似乎是垃圾的来源——在调用和方法中的执行到达之间。

编辑：好的，所以他们限制了这些问题的大小。:) 我会尽力展示发生了什么。这是 EvalTree 的相关部分。请注意，此代码中只有 2 个部门。我弄乱了另一个文件并删除了它。

```
def EvalTree(self, Root):
    type = -1
    number = 0.0
    freeme = 0

    if Root.Token == T_NUMBER or Root.Token == T_STRING:
        return 0

    elif Root.Token == T_VARIABLE:
        self.CopyResult(Root.Result, Root.Variable.value)
        return 0

    elif Root.Token == T_FUNCTION:
        argc = Root.Children
        param = resizeList([], argc, RESULT)
        print "argc", argc
        for i in range(argc):
            self.EvalTree(Root.Child[i])
            param[i] = Root.Child[i].Result

        self.DelResult(Root.Result)
        Root.Function.func(Root.Result, *param) # I should have never ever programmed Lua ever.
        return 0 
```

这是插件的类。

```
class Foo:
    def __init__(self, visitor):
        visitor.AddFunction("foo", -1, self.foo)
    def foo(self, result, *argv):
        print argv 
```

这就是全部执行的地方。

```
if __name__ == "__main__":
    evaluator = Evaluator()

    expression = "foo2('bar')"
    #expression = "uptime('test')"
    evaluator.SetVariableString("test", "Foo")
    def func(self, result, *arg1):
        print arg1
        evaluator.SetResult(result, R_STRING, evaluator.R2S(arg1[0]))

    evaluator.AddFunction('foo2', -1, func)

    result = RESULT(0, 0, 0, None)
    tree = evaluator.Compile(expression)
    if tree != -1:
        evaluator.Eval(tree, result)
        if result.type == R_NUMBER:
            print "Number: %g" % (evaluator.R2N(result))
        elif result.type == R_STRING:
            print "String: '%s'" % (result.string) #(evaluator.R2S(result))
        elif result.type == (R_NUMBER | R_STRING):
            print "String: '%s' Number: (%g)" % (evaluator.R2S(result), evaluator.R2N(result))
        else:
            print "internal error: unknown result type %d" % (result.type)

    expression = "foo('test')"
        result = RESULT(0, 0, 0, None)
        tree = evaluator.Compile(expression)
        if tree != -1:
                evaluator.Eval(tree, result)
                if result.type == R_NUMBER:
                        print "Number: %g" % (evaluator.R2N(result))
                elif result.type == R_STRING:
                        print "String: '%s'" % (result.string) #(evaluator.R2S(result))
                elif result.type == (R_NUMBER | R_STRING):
                        print "String: '%s' Number: (%g)" % (evaluator.R2S(result), evaluator.R2N(result))
                else:
                        print "internal error: unknown result type %d" % (result.type) 
```

这是新的输出：

```
argc 1
(<__main__.RESULT instance at 0x9ffcf4c>,)
String: 'bar'
argc 1
(<__main__.RESULT instance at 0xa0030cc>, <__main__.RESULT instance at 0xa0030ec>)
internal error: unknown result type 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T04:03:28.967

您的代码似乎被截断了，所以我无法查看它。

但是，鉴于您只能在类中定义的方法上获得额外的参数，它可能是`self`变量吗？Python 类上的每个方法都`self`作为第一个参数接收，如果不考虑它，就会出错。

换句话说，应该这样：

```
def foo(result, *argv):
    print argv[0] 
```

实际上是这样的：

```
def foo(self, result, *argv):
    print argv[0] 
```

如果是这样，那么传统上持有的值`self`将被分配给`result`，并且您的结果值将位于 argv 的第一个位置。

如果不是这样，您将需要提供更多代码。至少，实际运行测试的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T05:34:33.690

在 Foo 类中，当你打电话时

```
 def __init__(self, visitor):
        visitor.AddFunction("foo", -1, self.foo) 
```

...您正在添加所谓的“绑定”方法参数（即`self.foo`）。它就像一个已经指定了 self 参数的函数。原因是，当您调用 self.foo(bar, baz) 时，您没有在参数列表中再次指定“self”。如果你打电话

```
 def __init__(self, visitor):
        visitor.AddFunction("foo", -1, Foo.foo) 
```

...你会得到与你的自由功能相同的结果。但是，我认为这不是您想要的。此外，EvalTree 将它自己`self`作为第一个参数传递给函数。我认为您可能想要的是像这样声明 foo ：

```
 class Foo:
    def __init__(self, visitor):
        visitor.AddFunction("foo", -1, self.foo)
    def foo(self, tree, result, *argv):
        print argv 
```

# ruby-on-rails - 路由检查

> ID：931212
> 
> 赞同：0
> 
> 时间：2009-05-31T03:48:37.857
> 
> 标签：ruby-on-rails

有没有办法让给定路径的子路径？

我的意思是给定以下路线：

```
map.resources :users do |user|
  user.resources :articles
  ...
end 
```

如果我给出 path = "users/1"，有没有办法获得路线 users/1/edit、users/1/articles、users/1/articles/new ？

提前致谢。-萨蒂诺斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T22:50:41.367

这样做有一个 rake 任务，

```
rake routes | grep "users" 
```

从 nix 机器上做不到

如果您想在 Rails 应用程序中做一些聪明的事情，可能值得在 rails / railties 下检查源代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T11:34:26.930

是的，路线定义非常容易访问。以下代码应该为您提供特定控制器的路由列表：

```
rts = ActionController::Routing::Routes.routes.reject do |rt|
  rt.defaults[:controller] != "users" || !rt.significant_keys.index(:id)
end 
```

您可以在控制台中运行以下代码以查看路由：

```
rts = ActionController::Routing::Routes.routes.reject do |rt|
  rt.defaults[:controller] != "users" || !rt.significant_keys.index(:id)
end; nil
rts.each do |rt|
  puts "Route: #{rt.segments}"
end; nil 
```

这些段实际上也被分解成一个数组，这意味着应该很容易进一步过滤列表以仅需要用户 ID 的路由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T10:25:26.803

我不确定你到底在问什么，但这些是我认为的路由资源：

[从外到内的 Rails 路由](http://guides.rubyonrails.org/routing.html)

[Ruby on Rails 路由揭秘](http://www.computerworld.com/action/article.do?command=viewArticleBasic&articleId=9060861)

# c++ - 用于清理矢量破坏的模板 - 如何？

> ID：931225
> 
> 赞同：1
> 
> 时间：2009-05-31T04:00:55.627
> 
> 标签：c++, templates

我正在尝试实现一个模板，该模板将允许创建从 vector<> 派生的类，以便在删除时删除向量的元素。下面的代码片段代表了这样做的尝试：

```
include <vector>

using namespace std;

template <class P>
class TidyVector : public vector<P> {
 public:
  ~TidyVector() {
    while (vector<P>::size()) {
      P pi = vector<P>::back();
      vector<P>::pop_back();
      delete pi;
    }
  }
}

TidyVector<int*> i; 
```

尝试使用 g++ -c try.cc 编译它会导致以下错误消息：

```
try.cc:1: error: expected constructor, destructor, or type conversion before '<' token
try.cc:6: error: expected template-name before '<' token
try.cc:6: error: expected `{' before '<' token
try.cc:6: error: expected unqualified-id before '<' token
try.cc:17: error: aggregate 'TidyVector<int*> i' has incomplete type and cannot be defined 
```

发生了什么事 - 为什么这不起作用？或者，也许，问一个更合适的问题：处理这种情况的标准方法是什么（删除时自动清理向量）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T05:50:47.357

已经有一个类可以做到这一点：[Boost 的 ptr_vector](http://www.boost.org/doc/libs/1_39_0/libs/ptr_container/doc/ptr_vector.html)。我建议检查一下，看看他们是如何做到的。简短的回答：他们不使用继承，他们使用组合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-31T04:11:40.327

我假设应该是#include <vector>。所以这是一个错误。

其次，您应该避免从向量继承，它没有虚拟析构函数，因此您的类很容易转换为标准向量并且您的析构函数无法运行。

（哦，你在课堂结束时留下了分号）

第三，您是否考虑过只做 vector< boost::shared_ptr< some_class >> ？

澄清一下为什么 shared_ptr 方法更好：你的班级现在只在一个实例中清理东西；如果班级被破坏时它们仍然存在。但是假设你有一个包含 10 个元素的 TidyVector foo，然后有人这样做：

```
foo[5] = new int; // Memory leak! 
```

或者

```
foo.resize(0); // Memory leak! 
```

或者

```
foo.erase(foo.begin()); // Memory leak! 
```

名单还在继续

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T04:11:50.513

阅读编译器错误消息：对于初学者，#include 中缺少“#”。

在您的析构函数中，您无需指定`vector<P>::`- 您是从向量派生的，因此无需限定即可调用其方法，例如 size() 等。

该向量将清理自己的存储空间，因此您无需对其调用 pop_back()。尝试

```
for (iterator i = begin(); i != end; ++i)
    delete *i; 
```

您无需手动执行此操作，而是在向量中冷保存一个智能指针，例如 shared_ptr，然后将为您删除元素，而无需派生类。

关于从标准库容器派生是否是一个好主意有不同的意见，在此处搜索将指向有关该问题的几个讨论。

# iphone - NSFetchRequest - 它可以返回一个属性数组吗？

> ID：931230
> 
> 赞同：0
> 
> 时间：2009-05-31T04:04:03.133
> 
> 标签：iphone, sqlite, core-data

除非我错过了文档中的某些内容，否则我看不到是否可以执行 an`NSFetchRequest`以便它返回对象属性的数组，而不是对象本身。

例如，我有：

```
@interface SaleDate {
NSDate *open;
NSDate *close;
Sale *sale;
} 
```

我想查询类似`close >= $today`. 但是，这给了我一个 SaleDate 数组，而我真正想要的是一个不同的 Sale 数组。我将它与 a 一起使用`NSFetchedResultsController`，因此需要它来处理 Sale 对象。

顺便说一句，在使用二进制存储时，我还有另一个（首选）查询在工作——正是 SQLite 存储让我费尽心思去寻找一个替代但等效的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-30T21:35:24.727

iPhone OS 2.x 和 Mac OS X 10.5 没有此功能。

请参阅 iPhone OS 3.0 的 NSFetchRequest 文档。

特别是，你想看看

```
-setResultType:
-setReturnsDistinctResults:
-setPropertiesToFetch: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-25T17:46:11.743

如果您有一个 SaleDate 数组并想要一个 Sale 数组，只需编写：

```
NSArray *arrayOfSale = [arrayOfSaleDate valueForKeyPath:"@sale"]; 
```

这假定 SaleDate 对于“销售”成员是 KVC 兼容的。如果 SaleDate 是一个托管对象，而“sale”是一个建模属性，那么情况已经如此。

# perl - 为什么我的 Perl 程序在 fork 后没有收获子进程？

> ID：931234
> 
> 赞同：4
> 
> 时间：2009-05-31T04:07:49.717
> 
> 标签：perl, ipc, fork, zombie-process

我一直在尝试使用 Perl 编写一个简单的 ping 扫描仪供内部使用。由于它扫描 24 位 CIDR 网络，因此如果它在单个线程中运行，则该脚本需要很长时间才能运行。我曾尝试添加 fork 功能来加快进程，但我的[第一次尝试](http://pastebin.com/fc457b0b)几乎花费了相同的时间，因为在任何给定时间只有一个子进程处于活动状态。

[我在perlipc](http://perldoc.perl.org/perlipc.html)文档和[Perl Cookbook](http://oreilly.com/catalog/9780596003135/)中阅读了子进程，并提出了第二个版本：

```
##Install the CHLD SIG handler
$SIG{CHLD} = \&REAPER;
sub REAPER {
    my $childPID;
    while (( $childPID = waitpid(-1, WNOHANG)) > 0) {
        print "$childPID exited\n";
    }
    $SIG{CHLD} = \&REAPER;
}

my $kidpid;
for (1 .. 254) {
    my $currIP = join ".", (@ipSubset[0,1,2], $_);

    die "Could not fork()\n" unless defined ($kidpid = fork);
    if ($kidpid) {
        #Parent process
        #Does nothing
    } 
    else {
        #Child process
        my $pingConn = Net::Ping->new();    #TCP
        say "$currIP up" if $pingConn->ping($currIP);
        $pingConn->close(); 

        #Nothing else to do
        exit;
    }
}

say "Finished scanning $ipRange/24"; 
```

当我扫描我的内部网络时，输出是：

```
$perl pingrng2.pl 192.168.1.1
192.168.1.2 up
5380 exited
192.168.1.102 up
192.168.1.100 up
5478 exited
5480 exited
Finished scanning 192.168.1.1/24 
```

从结果中可以看出，成功扫描的线程打印“up”消息，干净地退出并被父进程收割。同时，其他 251 个线程悬空连接到 '/sbin/init'，这可以从快速的 'ps -ef' 列表中看出。如果我在退出语句之前的子处理块中添加一个'print "Child: $currIPending\n"'，我会在我的 perl 脚本退出“之后”从终端上的剩余 251 个进程中获得输出。

这里发生了什么？我认为 $SIG{CHLD} 子例程与 waitpid 循环相结合将获得所有子进程并确保系统中没有僵尸/悬空进程。

同时，我还希望能够在任何给定时间运行特定数量的子进程，例如，'n' 个子进程同时运行，每当一个退出父进程时，如果需要，则启动另一个子进程但没有更多在任何特定时刻都比'n'个孩子。这可能吗？如果是，我可以得到一些伪代码来帮助指导我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-31T04:16:00.267

看起来您的父进程在孩子之前完成（因此永远没有机会收获他们）。试试这个：

```
#!/usr/bin/perl

use 5.010;
use strict;
use warnings;

use Net::Ping;

my @ipSubset = (192, 168, 10);

my $i = 0;
my @pids;
for my $octet (1 .. 254) {
    my $currIP = join ".", @ipSubset[0 .. 2], $octet;

    die "Could not fork()\n" unless defined (my $pid = fork);

    #parent saves chlidren's pids and loops again
    if ($pid) {
        push @pids, $pid;
        next;
    } 

    #child process
    my $pingConn = Net::Ping->new;
    say "$currIP up" if $pingConn->ping($currIP);
    $pingConn->close(); 
    exit;
}

#wait on the children
for my $pid (@pids) {
    waitpid $pid, 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-31T22:50:45.920

看看[Parallel::ForkManager](http://search.cpan.org/perldoc?Parallel::ForkManager)。它会为您处理所有这些小细节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-31T04:26:59.410

当线程调用 ping() 时，它会一直尝试 ping IP，直到它设置响应。要解决此问题，请尝试在 ping() 中包含超时作为第二个参数。现在看起来，那些剩余的线程正在继续 ping 以获取响应，直到他们得到一个响应。

至于拥有一组 N 个线程，为什么不将 0-255 分成块，例如有两个线程，一个从 0-127 到一个从 128-255 ？为简单起见，我会为您的线程数使用 2 的倍数。

# algorithm - 确保不再看到已查看的项目

> ID：931247
> 
> 赞同：0
> 
> 时间：2009-05-31T04:19:12.920
> 
> 标签：algorithm, google-app-engine

对于我正在尝试解决的问题，我有一个可能的解决方案，但为了安全起见，我想在这里运行它。挑战在于确保在考试应用程序中完成某些测试问题的用户在后续测试中不会再次遇到这些问题。

我没有使用 SQL 数据库，它允许我使用左连接、子查询、临时表等。我正在使用 Google App Engine 的数据存储区，并希望在单个 HTTP 请求和单个线程中获得我需要的信息，最好在一秒钟内获得。

假设有 100,000 个特定类型的词汇问题（例如，同义词）。该应用程序将从题库中为考试的给定部分选择 30 个问题。这就是我想做的事情：

*   当第一个问题被创建时，在池中为其分配一个随机整数位置。
*   在个人第一次考试时，随机选择一个数字，然后选择前100个问题，按位置排序，其位置大于该数字。跟踪数字作为问题窗口的下限以及作为整个池的起始位置。跟踪结果集中最后一个问题的（最大）位置作为新窗口的上限。
*   从窗口中随机选择30个问题，然后将它们作为部分。存储剩余的 70 个问题，以供以后在考试中使用，也可能在后续考试中使用。
*   随着用户浏览其他部分（例如练习），并且当前窗口中的剩余问题列表已耗尽，请从池中选择位置大于先前存储的上限的接下来的 100 个问题。将旧的上限设为新的下限并找到新窗口的上限。
*   当查询返回少于 100 个问题时，绕回位置 0 并继续直到遇到原始起点（任何人都不太可能遍历整个池，但务必确定）。

随机分配职位的主要原因是为了抵消问题编写方式变化的影响，例如，较早编写的问题与较晚的经验相比，经验较少。

应用程序会为一个问题分配一个位置，而不检查该位置是否唯一。如果有足够多的问题，[生日悖论](http://en.wikipedia.org/wiki/Birthday_paradox)表明重复职位将变得越来越普遍。我的想法是偶尔重复不会有什么坏处，而且这比确保给定位置是唯一的更简单，这可能需要重试以及随之而来的相关网络成本。没有重复的问题比确保向用户显示一系列问题中的每个问题更为重要。

有一个更好的方法吗？不担心重复位置可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T15:38:02.670

使用 0 到 1 之间的浮点数而不是整数。它有一个很好的域，它不会随着你拥有的实体数量而改变，并且双打有一个 52 位尾数，这给了我们大约 2^26 个对象，然后我们就可以预料到碰撞；远远超过你正在处理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-08T19:51:38.497

我认为您不需要从 100 个问题库中“随机选择 30 个”。开始时随机选择 100 个 - 如果您选择前 30 个，这些将已经是随机的。您的代码会更简单，随机性也不会减少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-08T20:27:04.433

将物品按某种顺序排列，并给每个物品一个编号。为用户维护一个从零开始的计数器。为每个用户生成一个随机（ish）密钥。选择一个函数，它将 0...N 范围内的整数和 0...N 范围内的另一个整数的组合映射到另一个整数，这样对于键外的任何值，整数之间的映射都是双射的。当您需要一个项目时，获取计数器的值，将它与键一起放入函数中，然后使用该数字索引到项目列表中。增加计数器。

您需要为每个用户存储的只是密钥和计数器，并且您可以保证不会重复任何项目。它基本上是一种即时构建巨大排列的方式。

问题当然是选择功能！

一个简单的方法是`f(counter, key) = (counter + key) mod N`，虽然这可行，但它根本不会随机化物品，所以每个人都会以相同的顺序获得物品，只是从不同的地方开始。如果 N + 1 是素数，您可以使用 F(counter, key) = (((counter + 1) * (key + 1)) mod (N + 1)) - 1，这会很好。如果范围是 0...2^64，您可以使用任何具有 64 位块的块密码，这将提供出色的随机化。但尚不清楚您是否可以将其调整为较小的尺寸。

我会稍微挖掘一下，看看我是否能想出一个通用的功能。这是我自己遇到的一个问题，如果最终能得到一个好的答案，那就太好了。如果我发现任何东西，我会编辑这个答案。

编辑：好的，我们开始吧！[我从我在 sci.crypt 上开始的一个线程](http://groups.google.co.uk/group/sci.crypt/browse_thread/thread/82361c94e5490eb7)中获得了关键想法，特别是从一个全能的 usenet 英雄 Paul Rubin 那里得到了关键的想法。

策略稍有改变。将您的项目放在一个列表中，以便可以通过索引访问它们。选择一个数字 B，这样 2^B >= N - 任何值都可以，但你真的想要最小的一个（即 N-1 的以 2 为底的对数的上限）。然后我们将 2^B 称为 M。设置一个从 0 到 M-1 的计数器，并为每个用户设置一个密钥，该密钥可以是任意字节字符串 - 随机整数可能是最简单的。在整数 0 ... M-1 的集合上设置魔法函数，它是一个双射，也就是一个排列（见下文！）。当你想要一个item的时候，取counter的值，把counter加1，然后通过Magic Function把原来的值放进去，得到一个index；如果索引大于N-1，则将其丢弃，并重复该过程。重复直到你得到一个小于 N 的索引。有时，你'

顺便说一句，计算以 2 为底的对数的上限很容易：

```
int lb(int x) {
    int lb = 0;
    while (x > 0) {
        ++lb;
        x >>= 1;
    }
    return lb;
} 
```

好的，魔术函数，它将一个从 0 ... M-1 的数字映射到另一个这样的数字。我在上面提到了分组密码，这就是我们要使用的。除了我们的块是 B 位长，它是可变的并且比正常的 64 位或 128 位要小。因此，我们需要一种适用于可变大小的小块的密码。所以我们要自己编写一个可变大小的轻度不平衡[Feistel 密码](http://en.wikipedia.org/wiki/Feistel_cipher)。简单的！

要进行 Feistel 密码，您需要：

*   数字 B_L 和 B_R 使得 B_L + B_R = B。在平衡的 Feistel 密码中，B_L = B_R，所以 B 必须是偶数；我们将使用 B_L = B/2 和 B_R = B - B_L，即类似于平衡网络，但当 B 为奇数时，B_R 稍大。
*   多轮，称为C；我们将用 i 计算轮数，从 0 到 C-1。我被告知 4 和 10 是绝对最小值，所以为了安全起见，让我们选择 12。
*   一个key schedule，也就是每一轮的一个key，每个都叫K_i，都是从上面提到的主密钥i衍生而来的。您可以在每一轮中使用相同的密钥；正确的密码可以通过某种方式从主密钥生成子密钥。我建议只是将整数连接到主密钥。
*   一个称为 F 的轮函数，它接受一个 B_R 位子块和一个轮密钥，并产生一个 B_L 位子块；在这些限制范围内，它绝对可以是任何东西。这是 Feistel 密码的核心。对我们来说，最好的选择就是使用已经存在的加密哈希函数，因为这既简单又可靠。SHA-1 是当前的最爱。我们将向它提供轮密钥，然后是输入子块，计算哈希，然后从一端（不管是哪一个）获取 B_L 位作为我们的输出。

Feistel 密码的工作原理如下：

1.  取一个 B 位输入字
2.  对于 i 从 0 到 C-1：
    1.  将单词拆分为左右子块 L 和 R，分别具有 B_L 和 B_R 位
    2.  将 R 和 K_i 通过轮函数 F 产生一个加密值 X
    3.  将 X 添加到 L，丢弃任何从最高位溢出的进位位
    4.  以错误的方式重新组合 L 和 R，使 R 在左侧，L 在右侧，形成 B 的新值

B 的最终值是加密值，是密码的输出。解密它非常简单 - 反向执行上述操作 - 但由于我们不需要解密，所以不用担心。

所以你去。维护一个计数器（和一个密钥，以及 M 的值），用一个小密码加密它的值，并将结果用作索引。鉴于密码是一种排列，很容易证明这将永远不会重复，这应该会让您的客户满意。更好的是，鉴于密码的加密特性，您还可以声称学生将无法预测接下来会出现哪个问题（这可能并不重要，但听起来很酷）。

所有这一切都比仅仅增加一个计数器并按顺序给他们项目要复杂一些，但这并不难。你可以用一百行 java 来完成。好吧，[我可以用一百行 java 来](https://bitbucket.org/twic/hastypuddingtrick)完成——我不了解你！:)

顺便说一句，这将适用于不断增长的项目池，前提是你总是在最后添加项目，尽管它永远不会选择编号高于 M 的项目。但在许多情况下，这会给你一些增长空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-06T17:14:08.273

这是一种需要考虑的方法。没有大量的时间来编写和编辑它，因此对于后续的任何问题，请提前道歉。使用您的 100K 问题创建一个模型，以便您可以使用键名（例如 question_000001、question_0000002 等）访问它们。当学生注册时，使用三个 TextProperties 创建他/她的记录。创建记录后，生成一组 1-100K 的随机数字并将其序列化为分隔文本字符串。第二个字符串是记录尚未被任务队列处理的已回答问题。第三个字符串用于 TQ 处理后的已回答问题。

当用户登录时，发送待回答字符串的前 N ​​个字段（N=超过足够的问题来服务任何类型的会话），加上整个已回答的问题字符串。在客户端，将它们分成一系列要问的问题，以及一系列回答的问题。如果问题在哈希中，请跳过它。当用户处理这些问题时，每个问题都通过对您的在线处理程序的简单 get_by_id 调用得到服务。回答每个问题后，客户端将其发送到 GAE，您可以在其中将问题编号附加到最近回答问题的文本字段中，并设置一个布尔值来标记以供以后的 TQ 处理。大约一天一次，运行一个任务队列进程，通过拆分要询问的问题文本字段并删除自上次更新以来回答的所有问题，来检查和更新记录。

请注意，您可以仅使用两个文本字段跳过很多内容，并在发布答案时进行更新。但是，我倾向于总是尽可能少地使用在线处理程序，并将事情推送到 TQ。

没有计数器（通过获取拆分 GAE 文本字段的长度始终可用），没有查询（TQ 布尔标志查询除外）。没有复杂性。有很多方法可以提高效率：传输的数据量。等等

希望我有更多的时间来确保这 100% 符合您的需求，但必须离开。所以我给你留下一个“HTH”-stevep

# python - 覆盖不显示 virtualenv 中的执行行

> ID：931248
> 
> 赞同：2
> 
> 时间：2009-05-31T04:20:41.517
> 
> 标签：python, macos, code-coverage, virtualenv, nosetests

我有一个项目，我正在尝试运行有覆盖范围的鼻子测试。我在 virtualenv 中运行。当我跑

```
$ python setup.py nosetests 
```

测试运行良好，但覆盖率并未显示任何代码已执行（覆盖率均为 0%）。

```
名称 Stmts Exec 封面缺失
-------------------------------------------------- ----------------
package.module1 60 0 0% 3-106
package.module2 32 0 0% 3-93
包.模块3 55 0 0% 8-74
package.module4 38 0 0% 3-125
package.module5 107 0 0% 8-123
包.模块6 1 0 0% 1
包.module7 41 0 0% 3-143
包.module8 150 0 0% 7-281
package.module9 158 0 0% 3-338
-------------------------------------------------- ----------------
总计 642 0 0%   
-------------------------------------------------- --------------------
在 0.099 秒内运行 15 次测试

```

覆盖版本 3.0b3、Darwin 内核版本 9.7.0、Mac OS X 10.5.7、setuptools 0.6c9、nose 0.11.1、Python 2.5.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T15:19:34.273

这将需要一些来回。我怎样才能看到你的代码？

为什么你来 stackoverflow 寻求答案而不是向开发人员（即我）？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T23:51:31.500

尝试...

```
easy_install "coverage==2.85" 
```

我遇到了同样的问题，这解决了我的问题，并按预期给了我光荣的报道报告。

# javascript - AJAX 自动保存功能

> ID：931252
> 
> 赞同：30
> 
> 时间：2009-05-31T04:22:26.743
> 
> 标签：javascript, ajax, synchronize

实现自动保存功能的最佳 javascript 库、插件或库扩展是什么？

具体需要是能够“保存”数据网格。想想 gmail 和 Google 文档的自动保存。

如果它已经被发明，我不想重新发明轮子。我正在寻找神奇的 autoSave() 函数的现有实现。

自动保存：推送到保存到持久存储（通常是数据库）的服务器代码。服务器代码框架超出了这个问题的范围。

请注意，我不是在寻找 Ajax 库，而是更高级别的库/框架：与表单本身交互。

[daemach 在 jQuery @ http://daemach.blogspot.de/2007/03/autosave-jquery-plugin.html](http://daemach.blogspot.de/2007/03/autosave-jquery-plugin.html) [script host down]之上引入了一个实现。我不相信它符合轻量级和精心设计的标准。

**标准**

*   稳定、轻便、设计精良
*   保存 onChange 和/或 onBlur
*   不比给定的毫秒数更频繁地保存
*   处理同时发生的多个更新
*   如果自上次保存后未发生任何更改，则不保存
*   每个输入类保存到不同的 url

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-05-31T04:43:15.503

自动保存应该很容易实现，您可以使用 jquery 或 mootools 等主要框架之一。您需要做的就是在用户编辑应该自动保存的内容后使用 window.setTimeout()，并让该超时调用 javascript 框架标准 AJAX 内容。

例如（使用 jquery）：

```
var autosaveOn = false;
function myAutosavedTextbox_onTextChanged()
{
    if (!autosaveOn)
    {
        autosaveOn = true;

        $('#myAutosavedTextbox').everyTime("300000", function(){
             $.ajax({
                 type: "POST",
                 url: "autosavecallbackurl",
                 data: "id=1",
                 success: function(msg) {
                     $('#autosavenotify').text(msg);
                 }
             });
        }); //closing tag
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-05-05T16:26:29.923

我知道这个问题很老，但我想包括一个我最喜欢的代码。我在这里找到它：http: [//codetunnel.io/how-to-implement-autosave-in-your-web-app/](http://codetunnel.io/how-to-implement-autosave-in-your-web-app/)

这是代码：

```
var $status = $('#status'),
    $commentBox = $('#commentBox'),
    timeoutId;

$commentBox.keypress(function () { // or keyup to detect backspaces
    $status.attr('class', 'pending').text('changes pending');

    // If a timer was already started, clear it.
    if (timeoutId) clearTimeout(timeoutId);

    // Set timer that will save comment when it fires.
    timeoutId = setTimeout(function () {
        // Make ajax call to save data.
        $status.attr('class', 'saved').text('changes saved');
    }, 750);
}); 
```

它会在用户停止写入超过 750 毫秒后保存。

它还有一个状态，让用户知道更改是否已保存

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-31T04:48:58.693

您可以通过使用超时在设定的时间保存，但是，更好的方法可能是只使用某种 onchange 事件处理程序，以便在更改数据时，如果您没有在设定的时间内保存，那么保存，但是，不要在每次击键时保存。

因此，在调用 ajax 函数之前，您需要查看上次保存的时间。

这将使您能够仅在需要时以预定的速率进行保存。因此，如果您想每 5 分钟保存一次，那么无论进行了哪些更改，如果在 5 分钟窗口内进行了更改，您将保存。

进行 ajax 调用是微不足道的，但 jQuery 可以简化它。不幸的是，要得到你想要的，就我所见，你只需要实现你自己的功能。很难以一般方式进行，因为如果仅更改某些字段，则不同的人可能想要保存。所以，仅仅因为我点击一个选择框可能不会导致保存功能，但可能会改变文本框中的某些内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T18:49:57.867

对于 cookie 中表单字段的简单自动保存，我使用了这个很棒的插件[http://rikrikrik.com/jquery/autosave/](http://rikrikrik.com/jquery/autosave/) 它不会将数据发送到服务器，但如果你没有找到更好的东西，升级它会更容易功能上比从头开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-31T04:37:12.170

我建议你使用 jQuery。当然，“保存”部分仍然必须在后端完成，但是 jQuery 使提交 AJAX 请求变得轻而易举。

如果您有 ASP.NET 后端，您可以简单地调用 WebMethod 并以指定的时间间隔提交关联的字符串（文本框的内容等）：

```
[WebMethod]
public void AutoSave(String autoSaveContent)
{
 // Save
} 
```

调用此方法的 jQuery 请求将是：

```
$.ajax({  
type: "POST",  
contentType: "application/json; charset=utf-8",  
url: "AutoSaveService.asmx/AutoSave", 
data: "{textBoxToAutosaveText}",  
dataType: "json"
}); 
```

就这样。[您可以在http://jquery.com/](http://jquery.com/)找到 jQuery 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-31T04:40:37.720

如果您正在寻找简单和轻量级，我认为您可以获得的最轻量级是使用 JavaScript 的内置`setTimeout()`函数。将它与您选择的 AJAX 框架结合使用，一切顺利。

```
function autoSave()
{
  $.get(URL, DATA); // Use any AJAX code here for the actual autosaving. This is lightweight jQuery.
  setTimeout("autoSave()", 60000); // Autosaves every minute.
}
autoSave(); // Initiate the auto-saving. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-31T04:50:40.063

[synchronize](http://code.google.com/p/antonytrupe/wiki/synchronize)是一个[jquery 插件](http://plugins.jquery.com/project/synchronize)，它向您的 html 页面添加功能，以定期自动将用户输入发送回服务器。（[源代码](http://antonytrupe.googlecode.com/files/jquery.synchronize.js)）

JavaScript 和 HTML 示例：

```
<script>
  $("input").synchronize();
</script>

<input type="text" value="initial_value" 
       class="{url:'/entity.cfc?method=updateDescription',data:{ID1:'1',ID2:'2'}}" /> 
```

默认延迟 1s 后产生的 ajax 请求：

```
http://localhost/entity.cfc?method=updateDescription&value=update_value&preVal=initial_value&ID1=1&ID2=2 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-01T04:05:04.613

你不是只需要一个每 x 秒触发一次的计时器吗？回调函数将对表单服务器执行 AJAX 回发，并添加“autosave=true”字段。只需在服务器上处理此回发即可。

# visual-studio-2008 - Team Foundation Server 2008 刷新问题

> ID：931253
> 
> 赞同：1
> 
> 时间：2009-05-31T04:22:49.783
> 
> 标签：visual-studio-2008, tfs

我已经更改了 vnc 中的区域/迭代，并在 Web 访问中添加了工作项。当我在家中从 VS2008 访问 TFS 时，它显示同一查询的 0 个结果，并且迭代仅在下拉列表中显示一项，区域显示旧项。

我难住了！如何“清理缓存”或刷新？即使我已经断开/重新连接并刷新了所有内容！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T08:45:58.860

您可以通过在客户端计算机上从 VS 命令提示符运行以下命令来使所有客户端的缓存无效：

```
witfields rebuildcache /s:MyTfsServer 
```

此外，您可以通过删除以下内容来清除本地缓存：

`%UserProfile%\Local\Microsoft\Team Foundation\2.0\Cache`

# reverse-engineering - 如何在内存中找到代表 Minesweeper 排雷布局的数据结构？

> ID：931257
> 
> 赞同：94
> 
> 时间：2009-05-31T04:24:38.083
> 
> 标签：reverse-engineering, windbg, ida, minesweeper, memory-editing

我正在尝试使用 Minesweeper 作为示例应用程序来学习逆向工程。我在一个简单的 WinDbg 命令上找到了这篇[MSDN 文章](http://blogs.msdn.com/debuggingtoolbox/archive/2007/03/28/windbg-script-playing-with-minesweeper.aspx)，该命令显示了所有地雷，但它很旧，没有详细解释，也不是我想要的。

我有[IDA Pro 反汇编](http://www.hex-rays.com/idapro/)器和[WinDbg 调试器](http://www.microsoft.com/whdc/devtools/debugging/installx86.Mspx)，并且我已经将 winmine.exe 加载到它们中。有人可以为这些程序中的任何一个提供一些实用技巧，以查找代表雷场的数据结构的位置吗？

在WinDbg中我可以设置断点，但是我很难想象在什么点设置断点以及在什么内存位置。同样，当我在 IDA Pro 中查看静态代码时，我什至不确定从哪里开始找到代表雷区的函数或数据结构。

Stackoverflow 上是否有任何逆向工程师可以为我指明正确的方向？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2009-07-24T12:39:34.777

## 第 1 部分，共 3 部分

如果你对逆向工程很认真——忘掉培训师和作弊引擎吧。

好的逆向工程师首先应该了解操作系统、核心API函数、程序的一般结构（什么是运行循环、windows结构、事件处理例程）、文件格式（PE）。Petzold 的经典著作《Programming Windows》可以提供帮助（www.amazon.com/exec/obidos/ISBN=157231995X）以及在线 MSDN。

首先，您应该考虑在哪里可以调用雷区初始化例程。我想到了以下几点：

*   当你启动游戏时
*   当你点击开心的脸
*   当你点击 Game->New 或按 F2
*   当你改变关卡难度时

我决定查看 F2 加速器命令。

要查找加速器处理代码，您需要查找窗口消息处理过程 (WndProc)。它可以通过 CreateWindowEx 和 RegisterClass 调用来追踪。

读书：

*   CreateWindowEx [http://msdn.microsoft.com/en-us/library/ms632680%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms632680%28VS.85%29.aspx)
*   RegisterClass [http://msdn.microsoft.com/en-us/library/ms633586%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms633586%28VS.85%29.aspx)
*   Petzold 的第 3 章“窗口和消息”

打开 IDA，Imports 窗口，找到“CreateWindow*”，跳转到它并使用“Jump xref to operand (X)”命令查看它的调用位置。应该只有一个电话。

现在在上面查找RegisterClass 函数和它的参数WndClass.lpfnWndProc。在我的例子中，我已经命名了函数 mainWndProc。

```
.text:0100225D                 mov     [ebp+WndClass.lpfnWndProc], offset mainWndProc
.text:01002264                 mov     [ebp+WndClass.cbClsExtra], edi
.text:01002267                 mov     [ebp+WndClass.cbWndExtra], edi
.text:0100226A                 mov     [ebp+WndClass.hInstance], ecx
.text:0100226D                 mov     [ebp+WndClass.hIcon], eax

.text:01002292                 call    ds:RegisterClassW 
```

在函数名称上按 Enter（使用“N”将其重命名为更好的名称）

现在看看

```
.text:01001BCF                 mov     edx, [ebp+Msg] 
```

这是消息 id，在按下 F2 按钮的情况下应该包含 WM_COMMAND 值。您将找到它与 111h 相比的位置。这可以通过在 IDA 中跟踪 edx 或通过在 WinDbg 中[设置条件断点](http://msdn.microsoft.com/en-us/library/cc267482.aspx)并在游戏中按 F2 来完成。

无论哪种方式都会导致类似

```
.text:01001D5B                 sub     eax, 111h
.text:01001D60                 jz      short loc_1001DBC 
```

右键单击 111h 并使用“符号常量”->“使用标准符号常量”，输入 WM_ 并回车。你现在应该有

```
.text:01001D5B                 sub     eax, WM_COMMAND
.text:01001D60                 jz      short loc_1001DBC 
```

这是找出消息 id 值的简单方法。

要了解加速器处理，请查看：

*   [使用键盘加速器](http://msdn.microsoft.com/en-us/library/ms646337%28VS.85%29.aspx#wm_command)
*   资源黑客 ( [http://angusj.com/resourcehacker/](http://angusj.com/resourcehacker/) )

对于一个单一的答案，这是相当多的文字。如果你有兴趣，我可以再写几篇文章。长话短说雷区存储为字节数组 [24x36]，0x0F 表示未使用字节（播放较小的字段），0x10 - 空字段，0x80 - 我的。

## 第 2 部分，共 3 部分

好的，让我们继续使用 F2 按钮。

根据按下 F2 按钮时[使用键盘加速器wndProc 函数](http://msdn.microsoft.com/en-us/library/ms646337%28VS.85%29.aspx#wm_command)

> ... 接收 WM_COMMAND 或 WM_SYSCOMMAND 消息。wParam 参数的低位字包含加速器的标识符。

好了，我们已经找到WM_COMMAND在哪里处理了，但是如何确定对应的wParam参数值呢？这就是[资源黑客](http://angusj.com/resourcehacker/)发挥作用的地方。用二进制文件喂它，它会向你展示一切。就像我的加速器表一样。

[替代文字 http://files.getdropbox.com/u/1478671/2009-07-29_161532.jpg](http://files.getdropbox.com/u/1478671/2009-07-29_161532.jpg)

您可以在这里看到，F2 按钮对应于 wParam 中的 510。

现在让我们回到处理 WM_COMMAND 的代码。它将 wParam 与不同的常数进行比较。

```
.text:01001DBC HandleWM_COMMAND:                       ; CODE XREF: mainWndProc+197j
.text:01001DBC                 movzx   eax, word ptr [ebp+wParam]
.text:01001DC0                 mov     ecx, 210h
.text:01001DC5                 cmp     eax, ecx
.text:01001DC7                 jg      loc_1001EDC
.text:01001DC7
.text:01001DCD                 jz      loc_1001ED2
.text:01001DCD
.text:01001DD3                 cmp     eax, 1FEh
.text:01001DD8                 jz      loc_1001EC8 
```

使用上下文菜单或“H”键盘快捷键显示十进制值，您可以看到我们的跳转

```
.text:01001DBC HandleWM_COMMAND:                       ; CODE XREF: mainWndProc+197j
.text:01001DBC                 movzx   eax, word ptr [ebp+wParam]
.text:01001DC0                 mov     ecx, 528
.text:01001DC5                 cmp     eax, ecx
.text:01001DC7                 jg      loc_1001EDC
.text:01001DC7
.text:01001DCD                 jz      loc_1001ED2
.text:01001DCD
.text:01001DD3                 cmp     eax, 510
.text:01001DD8                 jz      loc_1001EC8 ; here is our jump 
```

它导致代码块调用一些 proc 并退出 wndProc。

```
.text:01001EC8 loc_1001EC8:                            ; CODE XREF: mainWndProc+20Fj
.text:01001EC8                 call    sub_100367A     ; startNewGame ?
.text:01001EC8
.text:01001ECD                 jmp     callDefAndExit  ; default 
```

那是启动新游戏的功能吗？在最后一部分中找出答案！敬请关注。

## 第 3 部分，共 3 部分

让我们看一下该函数的第一部分

```
.text:0100367A sub_100367A     proc near               ; CODE XREF: sub_100140C+CAp
.text:0100367A                                         ; sub_1001B49+33j ...
.text:0100367A                 mov     eax, dword_10056AC
.text:0100367F                 mov     ecx, uValue
.text:01003685                 push    ebx
.text:01003686                 push    esi
.text:01003687                 push    edi
.text:01003688                 xor     edi, edi
.text:0100368A                 cmp     eax, dword_1005334
.text:01003690                 mov     dword_1005164, edi
.text:01003696                 jnz     short loc_10036A4
.text:01003696
.text:01003698                 cmp     ecx, dword_1005338
.text:0100369E                 jnz     short loc_10036A4 
```

有两个值（dword_10056AC，uValue）读入寄存器 eax 和 ecx，并与另外两个值（dword_1005164，dword_1005338）进行比较。

使用 WinDBG ('bp 01003696'; on break 'p eax; p ecx') 查看实际值——它们对我来说似乎是雷区尺寸。使用自定义雷区大小显示第一对是新维度和第二个当前维度。让我们设置新名称。

```
.text:0100367A startNewGame    proc near               ; CODE XREF: handleButtonPress+CAp
.text:0100367A                                         ; sub_1001B49+33j ...
.text:0100367A                 mov     eax, newMineFieldWidth
.text:0100367F                 mov     ecx, newMineFieldHeight
.text:01003685                 push    ebx
.text:01003686                 push    esi
.text:01003687                 push    edi
.text:01003688                 xor     edi, edi
.text:0100368A                 cmp     eax, currentMineFieldWidth
.text:01003690                 mov     dword_1005164, edi
.text:01003696                 jnz     short loc_10036A4
.text:01003696
.text:01003698                 cmp     ecx, currentMineFieldHeight
.text:0100369E                 jnz     short loc_10036A4 
```

稍后新值覆盖当前值并调用子程序

```
.text:010036A7                 mov     currentMineFieldWidth, eax
.text:010036AC                 mov     currentMineFieldHeight, ecx
.text:010036B2                 call    sub_1002ED5 
```

当我看到它

```
.text:01002ED5 sub_1002ED5     proc near               ; CODE XREF: sub_1002B14:loc_1002B1Ep
.text:01002ED5                                         ; sub_100367A+38p
.text:01002ED5                 mov     eax, 360h
.text:01002ED5
.text:01002EDA
.text:01002EDA loc_1002EDA:                            ; CODE XREF: sub_1002ED5+Dj
.text:01002EDA                 dec     eax
.text:01002EDB                 mov     byte ptr dword_1005340[eax], 0Fh
.text:01002EE2                 jnz     short loc_1002EDA 
```

我完全确定我找到了雷区阵列。使用 0xF 初始化 360h 字节长度数组 (dword_1005340 ) 的周期原因。

为什么 360h = 864？下面有一些提示，该行占用 32 个字节，并且 864 可以除以 32，因此数组可以容纳 27*32 个单元格（尽管 UI 允许最大 24*30 字段，但数组周围有一个字节填充用于边框）。

以下代码生成雷区顶部和底部边界（0x10 字节）。我希望你能在混乱中看到循环迭代；）我不得不用纸和笔

```
.text:01002EE4                 mov     ecx, currentMineFieldWidth
.text:01002EEA                 mov     edx, currentMineFieldHeight
.text:01002EF0                 lea     eax, [ecx+2]
.text:01002EF3                 test    eax, eax
.text:01002EF5                 push    esi
.text:01002EF6                 jz      short loc_1002F11    ; 
.text:01002EF6
.text:01002EF8                 mov     esi, edx
.text:01002EFA                 shl     esi, 5
.text:01002EFD                 lea     esi, dword_1005360[esi]
.text:01002EFD
.text:01002F03 draws top and bottom borders
.text:01002F03 
.text:01002F03 loc_1002F03:                            ; CODE XREF: sub_1002ED5+3Aj
.text:01002F03                 dec     eax
.text:01002F04                 mov     byte ptr MineField?[eax], 10h ; top border
.text:01002F0B                 mov     byte ptr [esi+eax], 10h       ; bottom border
.text:01002F0F                 jnz     short loc_1002F03
.text:01002F0F
.text:01002F11
.text:01002F11 loc_1002F11:                            ; CODE XREF: sub_1002ED5+21j
.text:01002F11                 lea     esi, [edx+2]
.text:01002F14                 test    esi, esi
.text:01002F16                 jz      short loc_1002F39 
```

其余子程序绘制左右边界

```
.text:01002F18                 mov     eax, esi
.text:01002F1A                 shl     eax, 5
.text:01002F1D                 lea     edx, MineField?[eax]
.text:01002F23                 lea     eax, (MineField?+1)[eax+ecx]
.text:01002F23
.text:01002F2A
.text:01002F2A loc_1002F2A:                            ; CODE XREF: sub_1002ED5+62j
.text:01002F2A                 sub     edx, 20h
.text:01002F2D                 sub     eax, 20h
.text:01002F30                 dec     esi
.text:01002F31                 mov     byte ptr [edx], 10h
.text:01002F34                 mov     byte ptr [eax], 10h
.text:01002F37                 jnz     short loc_1002F2A
.text:01002F37
.text:01002F39
.text:01002F39 loc_1002F39:                            ; CODE XREF: sub_1002ED5+41j
.text:01002F39                 pop     esi
.text:01002F3A                 retn 
```

巧妙地使用 WinDBG 命令可以为您提供酷炫的雷区转储（自定义大小 9x9）。检查边界！

```
0:000> db /c 20 01005340 L360
01005340  10 10 10 10 10 10 10 10-10 10 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
01005360  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
01005380  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
010053a0  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
010053c0  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
010053e0  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
01005400  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
01005420  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
01005440  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
01005460  10 0f 0f 0f 0f 0f 0f 0f-0f 0f 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
01005480  10 10 10 10 10 10 10 10-10 10 10 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
010054a0  0f 0f 0f 0f 0f 0f 0f 0f-0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
010054c0  0f 0f 0f 0f 0f 0f 0f 0f-0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................
010054e0  0f 0f 0f 0f 0f 0f 0f 0f-0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f 0f  ................................ 
```

嗯，看来我需要另一个帖子才能结束这个话题

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-07-21T16:27:47.390

看起来您正在尝试反汇编源代码，但您需要做的是查看正在运行的程序的内存空间。十六进制编辑器[HxD](http://mh-nexus.de/en/hxd/)有一个功能可以让您做到这一点。

[![http://www.freeimagehosting.net/uploads/fcc1991162.png](https://i.stack.imgur.com/aFVjt.png)](https://i.stack.imgur.com/aFVjt.png)

进入内存空间后，只需在乱搞板子的同时拍摄内存快照即可。区分哪些变化与哪些不变。当您认为您已经掌握了数据结构在十六进制内存中的位置时，请尝试在内存中对其进行编辑，并查看电路板是否因此而改变。

您想要的过程与为视频游戏构建“培训师”没有什么不同。这些通常基于找到诸如健康和弹药之类的值在内存中的位置并动态更改它们。您也许可以找到一些关于如何构建游戏培训师的好教程。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-07-07T11:02:04.780

查看此代码项目文章，它比您提到的博客文章更深入一些。

[http://www.codeproject.com/KB/trace/minememoryreader.aspx](http://www.codeproject.com/KB/trace/minememoryreader.aspx)

## 编辑

这篇文章虽然不是直接关于扫雷，但为您提供了使用 WinDbg 搜索内存的良好分步指南：

[http://www.codingthewheel.com/archives/extracting-hidden-text-with-windbg](http://www.codingthewheel.com/archives/extracting-hidden-text-with-windbg)

## 编辑 2

同样，这与扫雷无关，但它确实让我对我的内存调试有了一些思考，这里有很多教程：

[http://memoryhacking.com/forums/index.php](http://memoryhacking.com/forums/index.php)

另外，下载[CheatEngine](http://www.cheatengine.org/)（由 Nick D. 提到）并完成它附带的教程。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-31T06:09:09.580

> “在 WinDbg 中我可以设置断点，但我很难想象在什么点设置断点以及在什么内存位置。同样，当我在 IDA Pro 中查看静态代码时，我什至不知道从哪里开始找到代表雷区的函数或数据结构。”

确切地！

好吧，您可以寻找诸如 random() 之类的例程，这些例程将在构建 mines 表期间被调用。这[本书](https://rads.stackoverflow.com/amzn/click/com/0764574817)在我尝试逆向工程时帮助了我很多。:)

一般来说，设置断点的好地方是调用消息框、调用播放声音、计时器和其他 win32 API 例程。

顺便说一句，我现在正在用[OllyDbg](http://www.ollydbg.de/)扫描扫雷。

**更新：** [nemo](https://stackoverflow.com/questions/931257/how-can-i-find-the-data-structure-that-represents-mine-layout-of-minesweeper-in-memory#1160282)提醒了我一个很棒的工具， Eric "Dark Byte" Heijnen 的[作弊引擎](http://en.wikipedia.org/wiki/Cheat_Engine)。

作弊引擎 (CE) 是查看和修改其他进程内存空间的绝佳工具。除了*基本*功能之外，CE 还具有更多特殊功能，例如查看进程的反汇编内存并将代码注入其他进程。

（该项目的*真正*价值在于您可以下载源代码-Delphi-并查看这些机制是如何实现的-我多年前就这样做了：o）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-07-22T02:51:43.960

可以在[Uninformed](http://uninformed.org/?v=all&a=7)找到一篇关于这个主题的非常好的文章。它非常详细地介绍了逆向扫雷（作为对逆向工程 Win32 应用程序的介绍），并且是一个非常棒的资源。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-31T04:32:44.653

这个网站可能更有帮助：

[http://www.subversity.net/reversing/hacking-minesweeper](http://www.subversity.net/reversing/hacking-minesweeper)

这样做的一般方法是：

1.  以某种方式获取源代码。
2.  拆解，希望剩下的符号能帮到你。
3.  猜测数据类型并尝试操作它并使用内存扫描器来限制可能性。

**回应赏金**

好吧，在第二次阅读时，您似乎想要一份关于如何使用 WinDBG 等调试器的指南，而不是如何逆向工程的常见问题。我已经向您展示了告诉您需要搜索的值的网站，所以问题是，您如何搜索它？

我在此示例中使用记事本，因为我没有安装扫雷。但想法是一样的。

![替代文字](https://imgur.com/UixmP.png)

你输入

```
s <options> <memory start> <memory end> <pattern> 
```

按“?”，然后按“s”查看帮助。

找到所需的内存模式后，您可以按 alt+5 调出内存查看器以获得良好的显示效果。

![替代文字](https://imgur.com/dZknN.png)

WinDBG 需要一些时间来适应，但它与任何其他调试器一样好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-21T04:51:14.933

在调试器中开始跟踪的一个好点是鼠标悬停。所以找到主窗口过程（我认为像 spyxx 这样的工具可以检查窗口属性，事件处理程序地址就是其中之一）。闯入它并找到它处理鼠标事件的位置 - 如果您可以在汇编程序中识别它，将会有一个开关（查看 windows.h 中鼠标向上的 WM_XXX 值）。

在此处放置一个断点并开始介入。在您释放鼠标按钮和屏幕更新之间的某个时间点，受害者将访问您正在寻找的数据结构。

要有耐心，试着确定在任何给定时间正在做什么，但不要费心去深入研究你怀疑对你当前目标不感兴趣的代码。可能需要在调试器中运行几次才能确定它。

了解正常的 win32 应用程序工作流程也有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-07-21T23:57:21.147

地雷可能会存储在某种二维数组中。这意味着它要么是一个指针数组，要么是一个 C 风格的布尔数组。

每当表单接收到鼠标向上事件时，都会引用此数据结构。索引将使用鼠标坐标计算，可能使用整数除法。这意味着您可能应该寻找一条`cmp`或类似的指令，其中一个操作数是使用偏移量计算的`x`，其中`x`是涉及整数除法的计算结果。然后偏移量将是指向数据结构开头的指针。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-22T02:46:23.517

假设关于地雷的信息至少在内存中连续排列（即，它是一个二维数组或数组数组）是相当合理的。因此，我会尝试在同一行中打开几个相邻的单元格，在进行过程中进行内存转储，然后对它们进行比较并查找同一内存区域中的任何重复更改（即第一步更改了 1 个字节，下一步字节在下一步更改为完全相同的值等）。

也有可能它是一个打包的位数组（每个地雷 3 位应该足以记录所有可能的状态 - 关闭/打开、地雷/非地雷、标记/非标记），所以我也会注意这一点（这些模式也将是可重复的，但更难发现）。但它不是一个方便处理的结构，而且我不认为内存使用是 Minesweeper 的瓶颈，所以不太可能使用这种东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-22T21:32:05.670

虽然严格来说不是“逆向工程师的工具”，更像是一个玩具，即使是像我这样的白痴也可以使用，请查看[Cheat Engine](http://www.cheatengine.org/)。它可以很容易地跟踪内存的哪些部分已更改，何时更改，甚至可以通过指针跟踪更改的内存部分（尽管您可能不需要）。包括一个很好的交互式教程。

# c# - 交换文件中的字节

> ID：931262
> 
> 赞同：1
> 
> 时间：2009-05-31T04:27:35.183
> 
> 标签：c#, audio

我正在读取一个原始音频文件（CD 轨道翻录），进行字节交换，然后写回一个 wav 文件。

我有正确处理字节的例程，但只处理大约一半的文件。我是 VB.NET 开发人员，而不是真正的 C# 开发人员，并且此代码无法正确转换为 VB.NET（它会出现溢出错误）。

它不是真正的“交换”，而是计算/修剪。 **(短)((缓冲区[i + 1] * 256) + 缓冲区[i])**

我相信它只写了一半的样本，但我不知道如何修复！

```
 public static short[] SwapBytesArray(string fileName)
    {
        byte[] buffer = System.IO.File.ReadAllBytes(fileName);
        long fileLength = buffer.LongLength;
        if ((fileLength & 1) == 1)
        {
            throw new ArgumentException("File length must be an even number of bytes");
        }
        System.Collections.Generic.List<short> sList = new System.Collections.Generic.List<short>();

        for (long i = 0; i < fileLength - 1; i += 2)
        {
            byte tmp = buffer[i];
            sList.Add((short)((buffer[i + 1] * 256) + buffer[i]));
            //buffer[i + 1] = tmp;
        }
        return sList.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T04:52:21.933

如果文件的大小大于最大整数，那么您将溢出索引变量（索引应该是长的，因为 num 是长的）。大概您使用 buffer.LongLength 而不是 buffer.Length 因为您的数据已知更大，所以无论如何都可能出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T04:53:12.277

为什么要返回一个数组`short`？

如果您要写回文件，那么`byte[]`数组不是更好的选择吗？

IE

```
public static byte[] SwapBytes(string fileName)
{ 
    byte[] buffer = System.IO.File.ReadAllBytes(fileName);

    long fileLength = buffer.LongLength;

    if ((fileLength & 1) == 1)
    {
        throw new ArgumentException("File length must be an even number of bytes");
    }

    for (long i = 0; i < fileLength  - 1 ; i +=2 )
    {
        byte tmp = buffer[i];
        buffer[i] = buffer[i + 1];
        buffer[i + 1] = tmp;
    }

    return buffer;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T04:55:56.110

这似乎非常浪费内存。您将整个文件作为字节序列读取，然后将其复制到`short[]`数组中。当您返回该数组时，您甚至可以再次复制它。

您的实际问题可能在于您在此函数返回（而不是字节）时写出短裤的方式。我认为我们需要查看该代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T05:17:16.537

我认为流式传输方法会更有效且不易出错。.NET 对流有很好的支持，因此应该可以使用以下内容：

```
public void SwapBytesStreamed(Stream inputStream, Stream outputStream)
{
    byte[] bytePair = new byte[2];
    long offset = 0;
    while (offset < inputStream.Length)
    {
        int bytesRead = inputStream.Read(bytePair, 0, 2);
        if (bytesRead == 0) break;

        if (bytesRead == 2)
        {
            outputStream.WriteByte(bytePair[1]);
        }
        outputStream.WriteByte(bytePair[0]);

        offset += bytesRead;
    }
} 
```

然后像下面这样使用它：

```
public Stream SwapBytesInFile(string filename)
{
    Stream inputStream = File.Open(filename, FileMode.Open);
    MemoryStream outputStream = new MemoryStream();

    SwapBytesStreamed(inputStream, outputStream);
} 
```

# sql - 在 SQL 中扩展表

> ID：931263
> 
> 赞同：0
> 
> 时间：2009-05-31T04:29:16.743
> 
> 标签：sql

如何向表中添加列：

```
create table table1 (id integer primary key, field1 text) 
```

? 该列将是`field2 text`，并且该列中现有行的值应该是`value`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T04:31:45.293

那将是 SQL 语法：

```
ALTER TABLE table_name ADD column_name datatype 
```

在您的情况下，您将查看：

```
alter table table1 add field2 text
update table1 set field2 = 'value' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T04:31:48.727

对于 MySQL：

```
ALTER TABLE table1 ADD field2 text;
UPDATE table1 SET field2='value'; 
```

# cocoa - 枚举 OS X 上安装的浏览器

> ID：931264
> 
> 赞同：7
> 
> 时间：2009-05-31T04:30:22.003
> 
> 标签：cocoa, macos

如何从本地应用程序枚举 OS X 系统上安装的浏览器。我想建立一些像挑剔但不同的东西（长篇大论）。但是，我想枚举系统上所有已安装的浏览器。

在 Windows 上，我可以在默认程序注册表中查看已安装的浏览器，但是，我认为 OS X 上没有类似的概念。我是否必须手动搜索所有捆绑包及其 info.plist 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-31T04:39:05.710

使用`LSCopyAllHandlersForURLScheme(CFSTR("http"))`or `LSCopyAllRoleHandlersForContentType(CFSTR("public.html"), kLSRolesViewer)`，或两者的[集合](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html#//apple_ref/occ/clm/NSSet/setWithArray:) [交集](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableSet_Class/Reference/NSMutableSet.html#//apple_ref/occ/instm/NSMutableSet/intersectSet:)。

这两个函数返回捆绑标识符；您可以使用`LSFindApplicationForInfo`它的捆绑标识符来查找应用程序磁盘上的首选实例。

（不要忘记遵循[Core Foundation 内存管理规则](http://developer.apple.com/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)。）

编辑：在对此答案的评论中，smorgan 建议`LSCopyAllHandlersForURLScheme(CFSTR("https"))`（即 http **s**）作为第一个电话的替代方案。这是一个很好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T18:49:03.010

检查此列表

```
NSArray* apps = (NSArray*)CFBridgingRelease(LSCopyAllHandlersForURLScheme(CFSTR("https"))) ;
NSLog(@"%@", apps); 
```

这是默认的：

```
NSString* defaultBundleId = (__bridge NSString*)LSCopyDefaultHandlerForURLScheme(CFSTR("https"));
NSLog(@"default is %@", defaultBundleId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-02T06:34:42.497

[LSCopyAllHandlersForURLScheme](https://developer.apple.com/documentation/coreservices/1443240-lscopyallhandlersforurlscheme)已在 10.15 中弃用

您可以改用[LSCopyApplicationURLsForURL](https://developer.apple.com/documentation/coreservices/1445148-lscopyapplicationurlsforurl)

```
LSCopyApplicationURLsForURL(URL(string: "https:")! as CFURL, .all)?.takeRetainedValue() as? [URL] 
```

另请注意，与 LSCopyAllHandlersForURLScheme 不同，LSCopyApplicationURLsForURL 返回 Applications 的文件路径的 URL。

然后您可以使用`Bundle(url: fileURL)!.bundleIdentifier`来提取 bundleID

要提取应用程序名称，您可以使用

```
Bundle(url: fileURL)!.infoDictionary?["CFBundleDisplayName"] 
```

如果`CFBundleDisplayName`返回 nil 则`CFBundleName`可以使用

# apache-flex - 将数据从进度事件移动到另一个类

> ID：931290
> 
> 赞同：0
> 
> 时间：2009-05-31T04:46:21.100
> 
> 标签：apache-flex, flash, actionscript-3, class

在 Flex 中，如果我有一个加载器类（即 XMLLoader）和一个文档类（document.as），并且在 document.as 中我正在实例化 XMLLoader

```
var ldr:XMLLoader = new XMLLoader(url); 
```

...并且在 document.as 类上，我有一个文本框，我希望通过使用 URLLoaders 进度事件不断更新该 XMLLoader 的进度。意思是，该框将以字节为单位显示它正在接收的负载

我不确定如何不断地将数据推出事件并将其添加到另一个类。例如：

```
myLstnr.addEventListener(ProgressEvent.PROGRESS, getProgress);

private function getProgress():void
{
    // as progress updates, move it to document.as class's textbox
{ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T04:56:47.310

您的事件处理程序 (getProcess) 必须接受 ProgressEvent 作为参数。从中，您可以获得所需的信息。当你这样做时，只需将它写到你想要的文本字段中，例如

```
document.textfield.text = event.bytesLoaded; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T15:49:20.370

您可以从 getProgress() 内部将事件分派给其他类。[创建自定义事件](http://livedocs.adobe.com/flex/3/html/help.html?content=createevents_1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T16:06:28.650

您将需要重新调度 ProgressEvent。您可以使用自定义事件来存储您的事件对象。例如：

```
private function getProgress(event:ProgressEvent):void {
    dispatchEvent(new CustomObjectDataEvent(event, 'progress'));
} 
```

其中 CustomObjectDataEvent 是您创建的自定义事件类，它将对象（ProgressEvent）存储在您的自定义事件对象中。这是存储此对象的自定义事件的示例实现：

```
package events
{
    import flash.events.Event;

    public class CustomObjectDataEvent extends Event
    {
        public var objectData:Object;

        public function CustomObjectDataEvent(objectData:Object, type:String, bubbles:Boolean=false) {
            super(type, bubbles);
            this.objectData = objectData;
        }

        public override function clone():Event {
            return new CustomObjectDataEvent(objectData, type, bubbles);
        }
    }
} 
```

查看：[http](http://livedocs.adobe.com/flex/3/html/createevents_3.html) ://livedocs.adobe.com/flex/3/html/createevents_3.html ，了解有关调度自定义事件的更多信息。

# c# - sqlite 如何使用另一个选择的结果进行选择？

> ID：931291
> 
> 赞同：1
> 
> 时间：2009-05-31T04:47:25.967
> 
> 标签：c#, sqlite

在 SQLite 中使用 C# 我想做

```
SELECT * FROM media WHERE mediaId= for each
  SELECT mediaId FROM fav WHERE userId=1 ORDER BY indx DESC LIMIT 0, 100 
```

语法显然不正确。我不知道如何在另一个中使用一个 select 语句中的参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T05:33:21.463

您的无效语法的最直接翻译：

```
SELECT * FROM media WHERE mediaId IN
  (SELECT mediaId FROM fav WHERE userId=1)
ORDER BY indx DESC LIMIT 0, 100 
```

更好的风格（也许更快，但我没有测量：

```
SELECT media.* FROM media
JOIN fav USING (mediaId)
WHERE fav.userId=1 
ORDER BY media.indx DESC LIMIT 0, 100 
```

这两种都是标准 SQL，顺便说一句，尤其是第二种形式在几乎任何关系数据库实现上都可以很好地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T04:50:58.067

你需要有 join 语句：

```
SELECT * FROM fav 
WHERE fav.userId=1
LEFT JOIN media 
ON media.mediaId=fav.mediaID
ORDER BY indx DESC LIMIT 0, 100 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-31T04:52:47.987

您需要一条 SQL 连接语句。这将是标准的 T-SQL，而不是特定于 SQLite。

你会做这样的事情：

SELECT m.* FROM media AS m JOIN fav AS f ON m.mediaId = f.mediaID WHERE f.userId = 1

您可以在此基础上添加您的订购要求。

# c++ - 在 iPhone 项目中链接 C++ 源代码

> ID：931293
> 
> 赞同：2
> 
> 时间：2009-05-31T04:48:35.980
> 
> 标签：c++, iphone, linker

我在我的 iPhone 项目中添加了一个扩展名为 .cpp 的 cpp 文件，但在链接时出现错误，例如：

> operator new[](unsigned long)"，引用自：
> 
> ___gxx_personality_sj0"，引用自：

我想只要我用 .cpp 或 .mm 命名 cpp 文件就可以了，我需要添加一些链接器标志吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-31T05:17:35.210

在项目浏览器中选择文件，然后按`cmd-i`调出相关文件的信息窗口。将文件类型设置为`sourcecode.cpp.cpp`应该这样做。

或者右键单击您的项目，添加新文件，选择 C++ 源代码，然后复制并粘贴内容。

根据构建日志，尝试添加以下链接器标志：

```
-cclib -lstdc++ 
```

[这可能是因为`gcc`用于链接，而不是`g++`](http://osdir.com/ml/programming.swig/2004-10/msg00118.html).

# c++ - 哪个更具可读性（C++ = ）

> ID：931301
> 
> 赞同：1
> 
> 时间：2009-05-31T04:51:43.353
> 
> 标签：c++, c

```
int valueToWrite = 0xFFFFFFFF;
static char buffer2[256];
int* writePosition = (int* ) &buffer2[5];
*writePosition = valueToWrite;

//OR
* ((int*) &buffer2[10] ) = valueToWrite; 
```

现在，我问你们觉得哪一个更具可读性。涉及临时变量的两步技术还是一步技术？

不用担心优化，它们都针对同一事物进行优化，正如您在此处看到的那样。告诉我哪一个更适合你。

```
or  DWORD PTR ?buffer2@?1??main@@9@4PADA+5, -1
or  DWORD PTR ?buffer2@?1??main@@9@4PADA+10, -1 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-31T04:57:52.613

```
int* writePosition = (int* ) &buffer2[5] 
```

或者

```
*((int*) &buffer2[10] ) = valueToWrite; 
```

两者都是不正确的，因为在某些平台上访问未对齐的值 (+5 +10) 可能会花费数百个 CPU 周期，而在某些平台上（如旧 ARM）会导致非法操作。

正确的方法是：

```
memcpy( buffer+5, &valueToWrite, sizeof(valueToWrite)); 
```

而且它更具可读性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-31T05:13:39.193

一旦你将它封装在一个类中，你使用哪种技术并不重要。方法名称将提供代码正在做什么的描述。因此，在大多数情况下，您不必深入研究实际的 impl。看看发生了什么。

```
class Buffer
{
    char buffer2[256];
public:
    void write(int pos, int value) { 
       int* writePosition = (int*) &buffer2[pos];
       *writePosition = value;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-31T05:01:05.480

如果我被迫选择，我会说 1。但是，我会注意到所呈现的代码与任何一种方式都非常 C；我会回避任何一个并重新检查问题。这是一个更简单的 C++-y

```
const char * begin = static_cast<char*>(static_cast<void*>(&valueToWrite));
std::copy(begin, begin+sizeof(int), &buffer2[5]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-31T04:57:05.313

第一个示例更具可读性，纯粹是因为您的大脑不必破译地球上的指针操作。

这将减少开发人员第一次查看代码需要了解实际情况的时间。以我的经验，这与减少引入新错误的可能性大致相关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-31T04:56:12.723

我发现第二个更短的更容易阅读。

但是，我怀疑这取决于您是否是可以轻松“获取”指针的人。

不过，从 char* 到 int* 的类型转换有点尴尬。我认为有充分的理由需要这样做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-31T04:58:39.650

注意——由于对齐问题，此代码可能无法正常工作！为什么不直接使用`memset`？

```
#include <string.h>
memset(buffer2+10, 0xFF, 4); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-31T05:06:00.730

如果您有能力将自己绑定到单个编译器（或围绕兼容性问题进行预处理器破解），您可以使用打包结构选项来获取您正在编写的值的符号名称。例如，在 GCC 上：

```
struct __attribute__ ((__packed__)) packed_struct
{
  char stuff_before[5]
  int some_value;
}

/* .... */

static char buffer2[256];
struct packed_struct *ps = buffer2;
ps->some_value = valueToWrite; 
```

这有很多优点：

*   如果您正确命名字段，您的代码会更清楚地反映您在做什么。
*   由于编译器知道您所在的平台是否支持有效的非对齐访问，因此它可以自动在原生非对齐访问或不支持非对齐访问的平台上的适当解决方法之间进行选择。

但同样，它的主要缺点是没有任何标准化的语法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-09T08:41:21.950

最易读的将是任何一种变体，并添加了关于您在那里所做的事情的评论。

话虽如此，我鄙视仅仅为了在几行之后一次性使用而引入的变量。在维护领域完成我的大部分工作，将几十个变量名推到我的脸上，这些都是很糟糕的努力，而不必写解释性的评论让我感到紧张。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-09T08:55:18.537

确实：

```
* ((int*) &buffer2[10] ) = valueToWrite; 
```

我不是通过一个步骤而是几个步骤来解析它，这就是它更具可读性的原因：我将所有步骤都放在一行中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-18T00:20:11.057

从可读性的角度来看，您的代码的行为应该是清晰的，但“清晰”并不是我描述这些替代方案中的任何一个的方式。事实上，它们与“清晰”相反，因为它们是*不可移植的*。

除了对齐问题，还有整数表示（大小因系统而异，符号表示、字节顺序和填充也一样）。因此，您的代码在系统之间的行为是*不稳定*的。

如果你想*清楚*你的算法应该做什么，你应该*明确地将每个字节放到正确的位置*。例如：

```
void serialise_uint_lsb(unsigned char *destination, unsigned source) {
    destination[0] = source & 0xff; source >>= 8;
    destination[1] = source & 0xff; source >>= 8;
    assert(source == 0);
}

void deserialise_uint_lsb(unsigned *destination, unsigned char *source) {
    *destination = 0;
    *destination <<= 8; *destination += source[1];
    *destination <<= 8; *destination += source[0];
} 
```

序列化和反序列化是程序员的惯用概念......`*printf`并且`*scanf`是序列化/反序列化的形式，例如，除了它习惯性地灌输到你的脑海中*，最重要的（十进制）数字首先出现*......这是你的代码的问题；你的代码没有告诉你的系统整数的方向，有多少字节等等......坏消息。

使用序列化/反序列化功能。程序员最能理解这一点。

# visual-studio - Visual Studio 是否具有 Emacs 寄存器之类的功能？

> ID：931311
> 
> 赞同：4
> 
> 时间：2009-05-31T04:56:05.457
> 
> 标签：visual-studio, emacs, editor

寄存器是我经常使用的 emacs 的一个特性。对于那些不熟悉的人，您可以突出显示一些文本，然后让 emacs 将其放入编号寄存器 (0-9) 中。然后，随着您的进行，您可以要求 emacs 将给定寄存器中的文本插入到您的代码中。

基本上我可以即时保存一大块文本，然后稍后将其插入缓冲区。当会话终止时，寄存器的内容也终止。

问题是，Visual Studio 有类似的功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T05:13:40.050

Ctrl-shift-V 将允许您循环浏览您复制或剪切的最后几件事。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T05:22:39.447

您还可以将文本拖到工具箱上，然后再将其拖回。然后，当然还有代码片段、宏等。

# c# - Sharepoint 用户最喜欢的文档

> ID：931315
> 
> 赞同：0
> 
> 时间：2009-05-31T04:56:48.183
> 
> 标签：c#, sharepoint, document-library

我们的 Sharepoint 站点用作一种文档库，用户可以浏览但不能编辑添加的任何文档。真正有用的是，如果用户能够单独将文档标记为他们的“最爱”，然后在某个地方有一个列表，以便他们可以回去查看它。是否有允许这样做的“功能”或自定义扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T05:06:55.737

在文档库中，他们打开文档的上下文菜单并执行“添加到我的链接”，它将显示在他们的 MySite 的链接列表中。他们可以创建一个类别“最喜欢的文档”。

您确实需要 MOSS 来实现此功能，而不仅仅是 WSS。

# c# - .NET Web 服务 - 主机名解析不正确

> ID：931316
> 
> 赞同：0
> 
> 时间：2009-05-31T04:56:58.573
> 
> 标签：c#, .net, asp.net, web-services, asmx

**重复：**这是完全相同的问题，来自完全相同的人，与[Issue with Incorrect URLs in the WSDL of a .NET Web Service](https://stackoverflow.com/questions/928021/issue-with-incorrect-urls-in-the-wsdl-of-a-net-web-service)一样，并且具有完全相同的答案。让我们关闭它并将其与另一个合并。

* * *

我们在客户端的服务器上安装了一个 ASP.NET 网站。该站点有一个 Web 服务，其中包含几个 Web 方法，这些方法由 Flash 对象调用以显示新闻提要。如果您浏览到他们的网站（例如：www.domain.com），一切正常，除了闪存。

问题是当我们浏览到 .asmx 时，标头显示主机是其网络内部的子域 (internal.domain.com)。显然，当从网络外部浏览时，这不会解析为任何公共 IP。这会导致 Flash 失败，因为 Flash 对象嵌入在页面中，因此正在客户端运行。

我检查了有问题的服务器上的计算机名称，它甚至与“internal.domain.com”不匹配——这是完全不同的东西。它从哪里得到这些信息。它不是来自 IIS，因为我们没有设置主机头，并且站点的 IP 设置为（全部未分配）。

我们要么需要强制 Web 服务针对特定主机运行，要么需要更改服务器上的某些内容，以便它解析为有效的面向公众的主机名。非常感谢任何和所有帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T05:09:09.760

当被 .NET 使用时，Web 服务主机名通常在 web.config 中配置。当它们被闪存消耗时，您可能需要查看闪存文件。（我的猜测是它仍然是为某种 SIT 环境配置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T05:29:29.360

我不确定这件事的细节，但我看到了这个关于 WCF 的投诉。答案与在 IIS 中设置主机头有关。

将主机名传递给 ASP.NET 或 WCF 的是 IIS，并在配置时传递主机标头。如果未配置，那么我想它不会将该标头作为“主机名”发送，即使客户端在请求中设置了该标头。

# c# - 在 ListView 中禁用多选复选框功能？

> ID：931321
> 
> 赞同：3
> 
> 时间：2009-05-31T04:58:52.987
> 
> 标签：c#, .net, wpf, winforms, listview

我想禁用 ListView 中复选框的多选功能。我怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-31T05:23:17.950

将选择模式 (SelectionMode) 设置为 SelectionMode.Single。

```
listView1.SelectionMode = System.Windows.Controls.SelectionMode.Single; 
```

干杯。

# c# - .Net 中是否有内置的扑克牌库？

> ID：931322
> 
> 赞同：5
> 
> 时间：2009-05-31T05:00:00.693
> 
> 标签：c#, .net

.Net/Windows 中是否有一些内置的 Card 图形库？
有什么方法可以利用 Windows 附带的各种纸牌游戏所使用的纸牌图形？它们看起来非常漂亮，如果有一些内置功能会很酷。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-31T06:19:58.343

其实有，有点。它不是内置的，但可以从 Microsoft 免费下载。有一对 .Net 项目模板，一个用于 C#，一个用于 VB。两者都包括一组卡片正面和卡片背面图像。C# 在这里：

[http://msdn.microsoft.com/en-us/vcsharp/aa336742.aspx](http://msdn.microsoft.com/en-us/vcsharp/aa336742.aspx)

VB 在这里：

[http://visualstudiogallery.msdn.microsoft.com/en-us/a4747c87-2ad2-4004-99bb-2a2f5f043edd](http://visualstudiogallery.msdn.microsoft.com/en-us/a4747c87-2ad2-4004-99bb-2a2f5f043edd)

（注：已编辑以修复 C# 链接 --RBarryYoung，2009 年 5 月 31 日下午 3 点）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-12-06T08:27:41.203

有点晚了，但是..我正在使用这个[http://deckofcards.codeplex.com/](http://deckofcards.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T05:03:32.247

我认为框架中没有内置任何内容。:) 但是，我确实在 Codeplex找到了一些[可能对您有所帮助的东西。](http://www.codeplex.com/playingcards)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T05:21:41.007

我曾经从 Microsoft Solitaire 获取旧卡片 dll 文件并尝试让它在 .Net 中工作。这是可能的，但真的不值得麻烦。我不确定我说的是不是[这个](http://www.catch22.net/tuts/cards)。我不认为我是。我记得有一次最终得到一个 .rc 或 .res 文件，并且花了太多时间来弄清楚如何让它在 C# 中工作。这不好玩。

卡 dll 的版本不止一个，具体取决于操作系统等。找到一个免费的卡片图形库并使用它要简单得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-31T06:14:36.497

我相信有一个 Visual Studio 模板项目可以满足您的需求。几年前肯定有，但我不知道它是否仍在维护。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-12-31T16:34:55.277

我正在开发一个作为一种爱好：[https ://github.com/jamesharpe/James-Games](https://github.com/jamestharpe/James-Games)

# python - 在指定的分离度范围内结交朋友

> ID：931323
> 
> 赞同：8
> 
> 时间：2009-05-31T05:00:20.927
> 
> 标签：python, recursion

全部。我是一个非常非常新的程序员。目前我选择的语言是 Python，我觉得我对它的感觉还不错。我现在才开始学习递归。（顺便说一句，如果有人可以推荐一个很好的指南，请告诉我！）大家都知道，这个问题非常初级，我发布的代码非常非常错误。

无论如何，我正在尝试编写一个函数，它可以让所有朋友都在指定的程度内。如果我通过它0作为学位，我只想要我自己。如果我通过它 1，我想要我和我所有的朋友。2、我想要我，我的朋友，以及他们所有的朋友，等等。

我已经尝试了很多不同的方法来做到这一点，但都没有奏效。我试图想象它在理论上应该如何工作，但我也无法完全理解，因为我在这方面缺乏经验。也许这里的好心人可以向我展示此代码失败的所有方式，然后解释如何正确执行和/或推荐有关该主题的良好指南。开始：

```
 def getFriends(self,degree,friendList):
        if degree == 0:
            friendList.append(self)
            return friendList
        else:
            friendList = friendList.append(self)
            for each in self.friends:
                each.getFriends(degree-1,friendList) 
```

它不起作用，而且我知道我做过愚蠢、愚蠢的事情。有人请打我一巴掌，并指出我正确的方向！

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-31T05:13:07.417

```
friendList = friendList.append(self) 
```

这无条件地设置`friendList`为`None`，因为这是任何列表`append`方法的不变返回值——所以，首先解决*这个*奇怪的问题......！-)

一旦你解决了这个问题，你仍然需要修复这个函数，以便它总是以`return`某些东西结尾——“从结尾掉下来”返回`None`。例如：

```
def getFriends(self,degree, friendList):
    if degree == 0:
        friendList.append(self)
        return friendList
    else:
        friendList.append(self)
        for each in self.friends:
            each.getFriends(degree-1, friendList)
        return friendList 
```

可以并且显然应该对其进行重构以消除重复（DRY，不要重复自己，是编程的核心......）：

```
def getFriends(self,degree, friendList):
    friendList.append(self)
    if degree > 0:
        for each in self.friends:
            each.getFriends(degree-1, friendList)
    return friendList 
```

PS：那个（`alist=alist.append(...)`问题）**正是**我在 2002 年与我的妻子 Anna 重新取得联系的方式（多年前我们一直不是很甜心的朋友，但彼此失去了联系）——她开始学习 Python，使用正是这个错误的结构，不明白为什么它会失败——环顾 Python 社区，看到并认出了我的名字，给我发邮件询问...不到两年后，我们结婚了，不久之后她成为了第一个Python 软件基金会的女性成员，也是我在“Python Cookbook”第二版的合著者。所以，当然，对于这个特定的 Python 错误，我有一个令人难以置信的最佳位置......;-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T05:10:55.157

您可以将friendList.append(self) 移动到if 之前的行 - 在这两种情况下都需要它。您也不需要将结果分配给好友列表 - 这是一个错误。

在您的算法中，您可能会添加两次相同的人 - 如果 A 是 B 的朋友，B 是 A 的朋友。因此，您需要保留一组您已经处理过的朋友。在处理之前，请检查此设置，如果此人已被处理，则不要执行任何操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T05:13:54.433

你的认识正确吗？方法的主体应该相对于它的定义缩进

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T05:38:54.883

子句中没有`return`声明。`else`所以如果`degree != 0`，这个方法总是会返回`None`。您想将每个递归`getFriends`调用的结果附加到您的`friendList`，然后返回`friendList`。

顺便说一句，如果你想让这个算法更快，有一些成熟的方法可以通过图形算法或矩阵操作来做到这一点。例如，如果你用邻接矩阵 表示友谊关系`A`，并且你想找到彼此分离度数以内的所有人`n`，你可以计算`B=A^n`。如果`B[i][j] > 0`, 那么`i`和`j`是在`n`彼此分离的度数内。[使用NumPy 之](http://numpy.scipy.org/)类的包可以轻松实现矩阵乘法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-31T07:30:32.177

（对不起，我不能评论亚历克斯的回答......*但是*）

我真的不喜欢 getFriends 返回一个从未使用过的值的想法。它确实有效，但看起来有点有趣；）另外，第一次调用 getFriends 将是 self.getFriends(degree, []) 令人困惑：当获取朋友列表时，为什么要作为参数传递一个空列表，对吧？

为了清楚起见，我认为我更喜欢这个稍微不同的版本，使用 _getFriends 辅助函数：

```
def getFriends(self, degree):
    friendList = []
    self._getFriends(degree, friendList)
    return friendList

def _getFriends(self, degree, friendList):
    friendList.append(self)
    if degree:
        for friend in self.friends:
            friend._getFriends(degree-1, friendList) 
```

# collaboration - 如何回应您不同意的合作者

> ID：931324
> 
> 赞同：-1
> 
> 时间：2009-05-31T05:00:38.740
> 
> 标签：collaboration

严格来说，另一个人和我正在一个网站上合作。最近，她提议对每个页面上包含的几张图片进行更改。我个人认为一开始没有必要，但她觉得有，所以我很不情愿地同意看看她能想出什么。

就在最近，她向我展示了她的所作所为，我**真的**不喜欢它——它看起来很草率，而且或多或少是我可以在几分钟或更短的时间内自己完成的事情。此外，颜色甚至与网站的其余部分都不匹配，并且在风格上与我所做的所有其他已完成、批准和发布的工作相反。

这是我的第一个这种性质的合作项目，我不知道如何反应或做什么。任何帮助，将不胜感激。

笔记：尽管我已经为此做了大部分工作，但没有什么能让我“权力”来否决她的决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T06:04:21.587

首先，我建议你感谢她的工作。这表明你尊重她的时间和努力。

其次，说一些不是你想要的东西。提及您不喜欢的具体事物（例如它与网站上的其他颜色不匹配）。

如果你有时间，你可能会想出一些东西给她看，以更好地展示你想要什么。尽量避免与此相关。

准备好让你的合作者失望或不高兴。如果您的伴侣的感情受到伤害，请准备好退后一步，甚至道歉。

表明（并支持）愿意共同努力寻找合适的东西。

最重要的是，保持尊重并专注于你正在做的工作。

是的，这一切都很容易说出来，看起来像是常识，但并不总是那么容易做到……而且当我处于硬币的任何一边时，这对我来说似乎并不常见。：-（ 祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T05:07:16.830

我想起了乔尔的[冰山秘密](http://www.joelonsoftware.com/articles/fog0000000356.html)文章。你在一个网站上工作，所以这不太适用。和你一起工作的人可能是技术人员，所以它更不相关。

然而，Joel 所说的这种变化毫无意义的观点仍然具有相关性。你自己说看起来只需要几分钟。这是您会向客户展示并让他们决定的事情，因为改变任何一种方式都不需要付出任何努力。

# java - JBoss 上的 Javascript 源文件有错误的内容类型/mime 类型？

> ID：931329
> 
> 赞同：2
> 
> 时间：2009-05-31T05:02:28.210
> 
> 标签：java, javascript, jsp, jakarta-ee, jboss

我正在编写一个 JSP 应用程序并将其部署到 JBoss 5.0。当我尝试检索我的 CSS 或 Javascript 文件时，JBoss 返回文件的错误内容类型，因此 Firefox 拒绝执行其中提供的代码。这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                             http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">

   <display-name>TestServlet</display-name>

   <servlet>
      <servlet-name>TestServlet</servlet-name>
      <servlet-class>org.example.TestServlet</servlet-class>
      <load-on-startup>1</load-on-startup>
   </servlet>
   <servlet-mapping>
      <servlet-name>TestServlet</servlet-name>
      <url-pattern>/engine/*</url-pattern>
   </servlet-mapping>

   <welcome-file-list>
      <welcome-file>
         /login.jsp
      </welcome-file>
   </welcome-file-list>
   <jsp-config>
      <jsp-property-group>
         <display-name>TestServlet</display-name>
         <url-pattern>/*</url-pattern>
         <el-ignored>false</el-ignored>
         <scripting-invalid>false</scripting-invalid>
         <is-xml>false</is-xml>
         <trim-directive-whitespaces>true</trim-directive-whitespaces>
      </jsp-property-group>
   </jsp-config>

   <mime-mapping>
      <extension>css</extension>
      <mime-type>text/css</mime-type>
   </mime-mapping>
   <mime-mapping>
      <extension>js</extension>
      <mime-type>text/javascript</mime-type>
   </mime-mapping>
</web-app> 
```

使用 lynx 测试文件下载，我得到以下信息：

主机> lynx [http://devbox:8080/TestServlet/js/main.js -head](http://devbox:8080/TestServlet/js/main.js) -dump

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
X-Powered-By: Servlet 2.5; JBoss-5.0/JBossWeb-2.1
Set-Cookie: JSESSIONID=EA6FFF63B00F0B8C0C44F7A79BD368CF; Path=/jclaim
Content-Type: text/html;charset=ISO-8859-1
Content-Length: 1778
Date: Sun, 24 May 2009 17:53:31 GMT
Connection: close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T05:05:59.000

我通过更改以下内容找到了答案：

```
 <jsp-property-group>
     <display-name>TestServlet</display-name>
     <url-pattern>/*</url-pattern> 
```

改为：

```
 <jsp-property-group>
     <display-name>TestServlet</display-name>
     <url-pattern>*.jsp</url-pattern> 
```

作为 JSP 的初学者，我不确定我从哪个教程中选择了前面的示例，但它并没有带来多少挫败感。

lynx 命令现在会导致：

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
X-Powered-By: Servlet 2.5; JBoss-5.0/JBossWeb-2.1
Accept-Ranges: bytes
ETag: W/"11038-1243181792000"
Last-Modified: Sun, 24 May 2009 16:16:32 GMT
Content-Type: text/javascript
Content-Length: 11038
Date: Sun, 24 May 2009 17:57:07 GMT
Connection: close 
```

这也适用于 CSS。

# git - 使用 git 跟踪其他人的项目

> ID：931344
> 
> 赞同：3
> 
> 时间：2009-05-31T05:06:16.847
> 
> 标签：git, version-control

假设项目 A 使用 git 作为其 SCM。我克隆他们的 repo 进行更改以满足我的需要，之后我仍然可以从他们的 repo 中提取更新并保留我的更改吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T05:46:16.413

在 git 中执行此操作的一个真正好的方法是“重新设置”您的更改。这样做的作用是，它不是将“他们的”回购中的更新合并到您的更改中，而是回退（撤消）您的所有更改，将它们的更改放入您的分支（所以一切都是好的和线性的），然后“重播”您的更改在他们之上。

这导致您的更改基本上始终是您所关注的存储库之上的一系列“补丁”（而不是在您返回历史记录时让您的更改与它们的更改交错）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-31T05:42:31.180

我倾向于为我的更改构建一个分支，并定期在上游代码之上重新设置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T05:12:16.653

是的。冲突的更改将被合并，这基本上是一个好的[DVCS](http://en.wikipedia.org/wiki/Distributed_Version_Control_System)的重点。

# php - 在 Symfony 中，如何将呈现的模板内容检索为动作中的变量？

> ID：931359
> 
> 赞同：0
> 
> 时间：2009-05-31T05:14:02.827
> 
> 标签：php, templates, symfony1, action

我想在我的 Symfony 操作中设置一个变量，以保存该操作的渲染模板数据。我正在返回一些带有动作的 JSON 内容，我想将动作输出的内容存储到 JSON 中并将其返回。

```
public function executeAjaxPriceAdditionCreate(sfWebRequest $request)
{
    $this->form = new ProductPriceAdditionAjaxForm();

    $json['success'] = $this->processAjaxPriceAdditionForm($request, $this->form);
    $this->setTemplate('ajaxPriceAdditionNew');
    $json['content'] = ???; // THIS IS WHERE THE RENDERED TEMPLATE CONTENT SHOULD GO.

            $this->getResponse()->setHttpHeader('Content-Type','application/json; charset=utf-8');
    return $this->renderText(json_encode($json));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T17:08:53.940

如果您将模板命名为部分模板，则可以使用

```
$json['content] = $this->getPartial('ajaxPriceAdditionNew'); 
```

请参阅[getPartial API](http://www.symfony-project.org/api/1_2/sfAction#method_getpartial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T16:23:52.023

我最终做的是使用闪存而不是尝试发送 JSON。AJAX 内容的模板尝试检测顶部的 flash，如果是，则执行“成功”方法（关闭模态弹出框）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-17T21:51:09.920

```
exit($this->getPartial('ajaxPriceAdditionNew'));

// apps/frontend/modules/community/templates/_ajaxPriceAdditionNew.php 
```

# gtk - 在D中，如何传递一个空字符串？（对 gtkD）

> ID：931360
> 
> 赞同：5
> 
> 时间：2009-05-31T05:14:16.087
> 
> 标签：gtk, d, string, gtkd

将 D1 与火卫一搭配使用

我有一个文本输入字段，实例`gtk.Entry.Entry`，

调用`setText("")`引发运行时错误

```
Gtk-CRITICAL **: gtk_entry_set_text: assertion `text != NULL' failed 
```

为什么？这似乎是D的问题，我试过这个：

```
string empty = "";
assert (empty != null);
my_entry.setText(empty) 
```

程序因断言失败而终止。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T05:33:02.413

我认为 D 并没有真正区分“空字符串”和“空字符串”。一个便宜的解决方法是 setText(" ")。

[编辑] 没关系。这是 gtkD 中的一个错误。在trunk/src/glib/Str.d（感谢wm4找到它）中，将第147行更改为返回“”；（删除 .dup）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-31T23:19:33.460

你应该写 assert(empty !is null) 而不是 assert(empty != null)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T05:38:52.980

我用过`"\0"`，好像还可以

我不知道是否有任何不可见字符进入文本字段，但这是基于假设 C 中的空字符串只是`\0`

# c# - C# 和 ADO.NET 实体中的存储库创建问题

> ID：931370
> 
> 赞同：1
> 
> 时间：2009-05-31T05:21:07.170
> 
> 标签：c#, asp.net-mvc, ado.net, entities

我在下班后的晚上构建这个应用程序，并且已经为这个设计问题苦苦挣扎了一两个星期。

我正在构建一个程序，它有 44 种不同类型的条目，并且需要能够创建自定义类型。

因为用户可能会更改特定类型条目中的字段和/或定义自己的字段，所以我为每种类型的条目生成实体类的第一种方法似乎不可行。如果用户更改任何字段或他们的架构版本（当然需要验证），那么我的课程不会真正反映这一点。

即使不允许用户更改字段，我也要确保数据架构更改不会对当前数据造成问题。

为了构建一个能够完成所有这些的模式，我做了以下工作：

**类型**

*   ID
*   数据类型

**场地**

*   id 字段名

*   fieldDataType（通过外键链接到 dtype）

**数据存储**

**类型** ol>id int

**条目**

好吧，该模式非常非规范化但难以在 ASP.NET MVC 中使用。

我对它的第二次破解涉及创建一个具有类型属性的类来存储条目碰巧是哪种数据类型。

**域级** 公共类条目的自定义类 { public List dataList = new List();

```
 public entry(int id)
    {
        kleraDataContext s = new kleraDataContext();
        var dataSet = s.dataStores.Where(c => c.citationID == id);
        foreach (dataStore y in dataSet)
        {
            dataBlob tempd = new dataBlob();

            //We get the data type id
            var temp = s.fields.Where(c => c.id == y.fieldID).First();

            //Get the fieldname and store the data type id for later
            tempd.fieldname = temp.fieldName;
            tempd.dataType = temp.dtype.dataType;

            switch (tempd.dataType)
            {
                case "String":
                    tempd.dString = y.dataString;
                    break;
                case "Text":
                    tempd.dString = y.dataText;
                    break;
                default:
                    //Nothing
                    break;
            }

            this.dataList.Add(tempd);
        }
    }
}

    public class dataBlob
    {
        private string _dString;
        private DateTime _dDate;
        private int _dInt;
        private double _dDouble;
        private object _data;
        private string _fieldname;
        private string _dataType;

       public string dataType
        {
            get
            {
                return _dataType;
            }
            set
            {
                _dataType = value;
            }

        }

        public object data
        {
            get
            {
                return _data;
            }
        }

        public string dString
        {
            get
            {
                return _dString;
            }
            set
            {
                _dString = value;
                _data = value;
            }

        }

        public string fieldname
        {
            get
            {
                return _fieldname;
            }
            set
            {
                _fieldname = value;
            }
        }

        public DateTime dDate
        {
            get
            {
                return _dDate;
            }
            set
            {
                _dDate = value;
                _data = value;
            }

        }

        public double dDouble
        {
            get
            {
                return _dDouble;

            }
            set
            {
                _dDouble = value;
                _data = value;
            }

        }

        public int dInt
        {
            get
            {
                return _dInt;

            }
            set
            {
                _dInt = value;
                _data = value;
            }

        }
    }
} 
```

请注意这方面的几个问题。

1.  无论物理结构中的字段类型如何，我都无法获得足够通用的属性来存储数据。理想情况下，数据的访问器将只检索碰巧的数据类型。
2.  我仍然没有足够好的方法来为 ASP.NET MVC 的视图提供足够连贯的模型，以便演示代码不必进行解析。理想情况下，视图将只获得一个包含字段列表及其相应数据的对象。
3.  与#2 相关，我似乎无法找到一种适当的方式来持久化更改。可以编写查询并让它将字段返回到视图。因为每个字段都不是强类型访问器，所以我不确定如何将更改从视图持久化到模型。天真地，我想过在隐藏的跨度中插入一个键，并在控制器中使用 Dictionary 对象来映射编辑/创建。

想法？

罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T05:41:03.773

虽然我不确定你的最终目标，但我可能有一个选择。您需要一个高度动态的“实体”，它允许您的用户创建自己的数据结构。像 C# 这样的命令式语言不适合这样的事情......即使使用动态语言，我认为您也可能会遇到一些困难。然而，XML 是一种以特别的、运行时可创建的方式表示动态数据结构的极好方式。

如果您使用的是 SQL Server，我建议您创建一个更简单的类型，如下所示，并将其存储在一个表中，其中一个列使用“xml”数据类型：

```
public class DynamicEntity
{
    public int ID { get; set; }
    public string TypeName { get; set; }
    public XDocument DynamicContent { get; set; }
} 
```

上述实体可以存储在下表中：

```
CREATE TABLE DynamicEntity
(
    ID int IDENTITY(1,1) NOT NULL,
    NAME varchar(50) NOT NULL,
    DynamicContent xml NULL
) 
```

鉴于 SQL Server 的 xml 功能，您仍然可以查询该 xml 列中的数据。不仅如此，如果您希望您的用户自定义结构根据架构进行验证，您还可以将该架构放入数据库中并针对该架构“键入”您的 xml 列。在 SQL Server 中使用 XML 列确实有一些注意事项，但它可能是解决您原本复杂的问题的简单解决方案。

# delphi - 在 Delphi 2009 上安装最新版本的 Indy 10

> ID：931371
> 
> 赞同：5
> 
> 时间：2009-05-31T05:21:27.437
> 
> 标签：delphi, delphi-2009, indy

是否有在 Delphi 2009 中更新 Indy 10 组件的分步指南？

我已阅读[卸载线程](https://stackoverflow.com/questions/486210/what-is-the-proper-way-to-update-delphi-2009s-default-installation-of-indy-10)并拥有最新版本 (IndyTiburon.zip)。但是似乎没有安装说明。

如果您已完成此操作，请分享详细信息。

编辑：我已经设法通过弄乱 dclIndyProtocols120 和 dclIndyCore120 中的“requires”部分来安装软件包。

基本上从“requires”部分中删除了所有 Indy 包依赖项，只使用库路径解决问题。将 ..\Lib\Core、..\Lib\System 和 ..\Lib\Protocols 添加到 Lib 路径。必须将 dclIndyProtocols120 保留在 dclIndyCore120 的要求中，因为没有它就无法安装。

所有 3 个软件包都已编译（包括 IndySystem120），现在似乎工作正常。

这对于 D2009 用户来说应该更容易。我必须更新以解决 Indy 中的 SMTP 错误（[请参阅链接](https://stackoverflow.com/questions/92196/why-does-my-d2009-exe-produce-emails-with-attachments-named-attnnnnn-dat)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-07-09T12:46:54.870

在[这个问题](https://stackoverflow.com/questions/3204601/step-by-step-upgrade-of-indy-10-in-delphi-2009)上有一个更令人满意的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T07:17:28.880

对于 D2009 之前的所有版本，您可以使用 Fulldx.bat 脚本重新编译包，然后只需打开 BPL 文件（例如 Indy-10.5.5\D6\dclIndyCore60.bpl 和 Indy-10.5.5\D6\dclIndyProtocols60。 bpl) 在 Delphi 2009 IDE 包对话框中。现在有了 Delphi 2009，FullD12.bat 就在那里，但它什么也没做。

我的简单解决方案是仅在运行时创建 Indy 组件。我将 Indy Tiburon 核心、系统和协议添加到项目搜索路径，并使用 Apache Ant 和构建脚本来运行编译器以进行最终构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T10:09:08.800

一个 IIRC 需要按此顺序编译系统核心和协议。

此外，一个包是一个.BPL 和一个.DCP。因此，在正常情况下，您可能必须将 .bpl 和 .dcp 复制到该目录。.BPL 是程序需要运行的东西，但是要编译使用 .BPL（静态）的东西，您还需要 .dcp。

但这对 Indy caseafaik 不起作用，因为它还需要包含文件，因此您需要将它们的所有路径添加到库路径中。

IIRC是Delphi（至少我知道的版本）在安装时不会将目录添加到路径中，并且必须始终手动将路径添加到带有.dcp或.dcu的目录。

（与 Lazarus 不同，它从已安装的包中构建目录列表。但部分原因可能是还没有类似 .dcp 的东西的修复，并且通常更面向源）

请注意，我没有 D2009，它只是一般手动 Indy 编译的经验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-18T14:20:08.053

对于 10 年后的任何人来说，这可能是一个简单的方法......（在 Delphi XE5 下测试）：

1.  [从https://indy.fulgan.com/ZIP/](https://indy.fulgan.com/ZIP/)下载最新版本。

2.  将 ZIP 存档解压缩到您选择的文件夹中（我在 Documents 下创建了一个文件夹“Delphi Lib”）。

3.  从您的 Delphi 安装中删除所有 Indy`.dcu`文件（`Indy[...].dcu`和`Id[...].dcu`）（例如：（`C:\Program Files (x86)\Embarcadero\RAD Studio\12.0`最后一个文件夹名称可能因您的安装而异））
4.  打开 Delphi 并转到*Tools -> Options*。进入“库”列表并添加新下载的 Indy 的以下文件夹：`/lib/Core/`、`/lib/System`、`/lib/Protocols`。

与往常一样：**在删除任何内容之前帮助自己并进行备份。**您不想重新安装完整的 Delphi，因为您丢弃了您应该保留的文件...

# .net - .NET 3.0 SP1 安装程序是否也安装 .NET 2.0 和 3.0？

> ID：931380
> 
> 赞同：0
> 
> 时间：2009-05-31T05:28:21.047
> 
> 标签：.net, .net-2.0, .net-3.0

.NET 3.0“包装”了.NET 2.0，所以如果我开始使用干净的 Windows Server 2003 环境，.NET 3.0 SP1 安装程序是否也会安装 .NET 2.0 和 3.0？.NET 2.0 SP1 怎么样？假设我还不想安装 .NET 3.5 SP1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T05:40:36.720

您只需安装 .NET 3.5 SP1，您将获得 .NET 2.0 SP1 和 SP2，以及 .NET 3.0 SP1 和 SP2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T05:40:07.503

.NET 3.0 安装程序确实安装了 .NET 2.0 - 区别仅在于库；.NET 3.0 下的运行时仍然是 v2，尽管有一些小的补丁。

.NET 3.5 下的运行时仍然是 v2 - .NET 3.5 中的所有新东西都是编译器魔法和一些时髦的库的混合。

FWIW，.NET*运行时*的下一个版本将是 4.0 - 不会有 v3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T05:34:38.043

如果您的意思是[Microsoft .NET Framework 3.0 Service Pack 1](http://www.microsoft.com/downloads/details.aspx?FamilyID=EC2CA85D-B255-4425-9E65-1E88A0BDB72A&displaylang=en)，我不这么认为。但是，它应该或多或少地向后兼容。

# model-view-controller - ASP.NET MVC：使用 SendAsync (System.Net.Mail) 发送电子邮件

> ID：931385
> 
> 赞同：5
> 
> 时间：2009-05-31T05:32:51.073
> 
> 标签：model-view-controller, asynchronous, sendasync

**MVC**中有什么方法可以让 System.Net.Mail SendAsync 工作，而不是阻止 Send 方法？

我尝试使用它，但遇到“开始异步操作的页面必须具有 Async 属性”错误，我显然无法解决（或者我可以吗？）因为没有带有 @Page 指令的 ASPX 页面，我可以添加异步属性。

非常感谢您的帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-13T01:17:22.470

如果您使用第三方服务（例如 gmail）来发送您的电子邮件并依赖，`SendEmail`或者`SendAsync`您可能希望设置自己的 SMTP 服务器，然后该服务器将中继到 gmail。好处是它`SendEmail`会更快地返回，并且您可能会忘记整个异步操作。

这样，如果 gmail 出于任何原因拒绝您，该电子邮件仍将位于您的本地队列中。

这是获得可靠的电子邮件发送设置的一种快速而肮脏的方法。

[Instructions (not personally tested, but i did this years ago*)](http://www.codingbliss.com/cb/?p=38) or [see this for Windows 7](https://serverfault.com/questions/64753/smtp-server-on-windows-7)

*of course I only remembered i did this after spending a long time converting over to async :-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T05:39:33.633

看起来您想要[对 ASP.NET MVC 的异步支持](http://code.msdn.microsoft.com/AsyncMvc)。另请参阅“[为异步操作扩展 ASP.NET MVC](http://weblogs.asp.net/jeffreyzhao/archive/2009/01/30/extend-asp-net-mvc-for-asynchronous-action.aspx) ”。

[这个 SO question](https://stackoverflow.com/questions/275545/does-asp-net-mvc-framework-support-asynchronous-page-execution)也是相关的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-10T02:35:15.530

您可能需要考虑将电子邮件放入数据库表中，然后有一个通过处理队列发送电子邮件的守护进程。

```
a) if youre not sending billions of emails you can have a log of what you sent
b) you can resend if something fails. 
```

取决于这些电子邮件的重要性，但如果从业务角度来看它们很重要并且不能丢失，那么您应该使用这种方法。

# netbeans - 如何将战争包部署/导入到 Netbeans

> ID：931401
> 
> 赞同：6
> 
> 时间：2009-05-31T05:45:01.360
> 
> 标签：netbeans, import, package, deployment, war

我查看了 netbeans 6.5.1 中的帮助文档，但找不到任何明确解释如何部署/导入 war 包的内容。

我知道在 Eclipse 中，只需在 Project Explorer 中单击鼠标右键 >> 选择 IMPORT >> WAR FILE。

但是，我仍然无法为 Netbeans 找到解决方案。

谢谢你，乔丹

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-31T14:22:23.663

贴在别处，我想我也可以在这里发帖。

经过一番谷歌搜索后，我找到了解决方案，步骤如下：

（在 NetBeans 8.0 中使用 apache 的 ode.war 进行了测试）

1.  解压战争文件
2.  在解压后的文件夹中，会看到WEB-INF/、META-INF/等，在解压后的文件夹中创建一个名为web的子文件夹。
3.  将其他所有内容放入网络（现在它们将是 web/WEB-INF/、web/js/、...）
4.  转到 netbeans，**新项目 -> java web ->**具有现有源的web 应用程序
5.  几乎只需一直按下一步。瞧，完成了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-04T16:50:47.143

我假设您的 Web 项目还没有 ant 或 maven 项目？如果您这样做了，您只需导入一个 maven 项目或创建一个 Web 自由格式应用程序并将其连接到您的 ant 脚本。

我将解压缩war文件，使用netbeans中的现有源创建一个新的Web应用程序，并使用向导连接所有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-07T09:39:47.353

1.  将战争项目导入eclipse。
2.  然后将eclipse项目导入netbeans

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T08:29:26.577

如果手边没有eclipse，把war文件放到`webapps`Tomcat文件夹下，进入Tomcat`bin`文件夹，运行`startup`. Tomcat 会自动为你解压 war 文件。现在转到`webapps`文件夹，您会在那里找到另一个文件夹，与您的战争同名。

我找不到将战争直接导入 Netbeans 的选项（*奇怪。也许有人可以创建此功能并将其作为补丁提交给 Netbeans*）。提取到 Tomcat 文件夹中的文件夹可以用作 Netbeans 项目。建议先将其复制到其他文件夹。通过 导入`File > New Project > Web application with existing sources`。

Eclipse 可以选择导出战争并包含源代码，因此源文件也有可能在战争中。

# c++ - C/C++ USB 驱动事件

> ID：931405
> 
> 赞同：3
> 
> 时间：2009-05-31T05:48:03.650
> 
> 标签：c++, c, windows, winapi, usb

关于 Windows 平台，我是否可以通过这些事件来判断我们何时插入了 USB 驱动器或任何类型的便携式媒体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T05:52:20.113

如果不先注册，您将不会收到此类通知。使用[RegisterDeviceNotification](http://msdn.microsoft.com/en-us/library/aa363431.aspx) () 来做到这一点。

在您注册您的窗口以接收此类通知后，处理[WM_DEVICECHANGE](http://msdn.microsoft.com/en-us/library/aa363480(VS.85).aspx)消息。

# c# - 一次格式化 Visual Studio 项目中的所有文件

> ID：931406
> 
> 赞同：64
> 
> 时间：2009-05-31T05:48:10.183
> 
> 标签：c#, visual-studio, visual-studio-2005, formatting

我有兴趣一次性格式化 Visual Studio（2005 版）项目中的所有文件。

**目前，有一种方法可以通过执行Edit->Advanced->Format Document 之**类的操作来格式化单个文档。但是，我看不到一个命令可以一次格式化项目的所有文件。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-11-10T12:12:36.123

[格式化所有文件](https://marketplace.visualstudio.com/items?itemName=munyabe.FormatAllFiles)扩展名对我有用。什么都不做，安装点击即可！

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-31T05:59:34.203

[Tim Abell 在他的博客](http://timwise.blogspot.com/2009/01/format-all-document-in-visual-studio.html)上写了一个宏来做到这一点：

> 这是我今天拼凑的一个方便的 Visual Studio 宏脚本。它对列出的文件类型的每个文档运行“编辑、格式化文档”。
> 
> 您必须密切关注它，因为它是交互式的，并且有时会弹出一条消息并等待答案。
> 
> [您可以在https://github.com/timabell/vs-formatter-macro](https://github.com/timabell/vs-formatter-macro)获取 vb 文件 更多信息在[https://github.com/timabell/vs-formatter-macro/wiki](https://github.com/timabell/vs-formatter-macro/wiki)

原始代码可在博客文章中找到。请注意，这比上面 github 上可用的版本旧。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-07-21T11:29:34.430

请注意，从 Visual Studio 2015 开始，以下解决方案本身不起作用。您还需要应用 Marcus Mangelsdorf 的答案。然后，此脚本适用于 Visual Studio 2015 和 2017。

* * *

Phil Haack 概述了一个很好的过程——[添加一个可重用的脚本来缩进项目](http://haacked.com/archive/2011/05/22/an-obsessive-compulsive-guide-to-source-code-formatting.aspx/)。

# 打开版本的 NuGet 配置文件

1.  打开包管理器；
2.  键入`$profile`以查看 NuGet 配置文件的位置；
3.  `mkdir –force (split-path $profile)`如果不存在，请键入以创建配置文件的文件夹；
4.  使用命令编辑配置文件`notepad $profile`。

# 将可重用方法添加到 NuGet 配置文件

`Format-Document`Phil 使用了他在[https://gist.github.com/davidfowl/984358](https://gist.github.com/davidfowl/984358)找到的davidfowl 的方法：

```
# Function to format all documents based on https://gist.github.com/984353
function Format-Document {
    param(
        [parameter(ValueFromPipelineByPropertyName = $true)]
        [string[]]$ProjectName
    )
    Process {
        $ProjectName | %{ 
                        Recurse-Project -ProjectName $_ -Action { param($item)
                        if($item.Type -eq 'Folder' -or !$item.Language) {
                            return
                        }

                        $window = $item.ProjectItem.Open('{7651A701-06E5-11D1-8EBD-00A0C90F26EA}')
                        if ($window) {
                            Write-Host "Processing `"$($item.ProjectItem.Name)`""
                            [System.Threading.Thread]::Sleep(100)
                            $window.Activate()
                            $Item.ProjectItem.Document.DTE.ExecuteCommand('Edit.FormatDocument')
                            $Item.ProjectItem.Document.DTE.ExecuteCommand('Edit.RemoveAndSort')
                            $window.Close(1)
                        }
                    }
        }
    }
}

function Recurse-Project {
    param(
        [parameter(ValueFromPipelineByPropertyName = $true)]
        [string[]]$ProjectName,
        [parameter(Mandatory = $true)]$Action
    )
    Process {
        # Convert project item guid into friendly name
        function Get-Type($kind) {
            switch($kind) {
                '{6BB5F8EE-4483-11D3-8BCF-00C04F8EC28C}' { 'File' }
                '{6BB5F8EF-4483-11D3-8BCF-00C04F8EC28C}' { 'Folder' }
                default { $kind }
            }
        }

        # Convert language guid to friendly name
        function Get-Language($item) {
            if(!$item.FileCodeModel) {
                return $null
            }

            $kind = $item.FileCodeModel.Language
            switch($kind) {
                '{B5E9BD34-6D3E-4B5D-925E-8A43B79820B4}' { 'C#' }
                '{B5E9BD33-6D3E-4B5D-925E-8A43B79820B4}' { 'VB' }
                default { $kind }
            }
        }

        # Walk over all project items running the action on each
        function Recurse-ProjectItems($projectItems, $action) {
            $projectItems | %{
                $obj = New-Object PSObject -Property @{
                    ProjectItem = $_
                    Type = Get-Type $_.Kind
                    Language = Get-Language $_
                }

                & $action $obj

                if($_.ProjectItems) {
                    Recurse-ProjectItems $_.ProjectItems $action
                }
            }
        }

        if($ProjectName) {
            $p = Get-Project $ProjectName
        }
        else {
            $p = Get-Project
        }

        $p | %{ Recurse-ProjectItems $_.ProjectItems $Action } 
    }
}

# Statement completion for project names
Register-TabExpansion 'Recurse-Project' @{
    ProjectName = { Get-Project -All | Select -ExpandProperty Name }
} 
```

# 重新打开 Visual Studio 以使用命令

重新打开 Visual Studio 时，该命令可用。

只需从 NuGet 包管理器控制台运行它：`Format-Document`这将重新格式化所选项目的所有文件。
要应用于整个解决方案，请使用 command`Get-Project -All | Format-Document`列出项目，然后为每个项目调用重新格式化命令。

正如作者所说：

> 有了这个，您现在可以尽情享受您的强迫症并运行 Format-Document 命令来清理您的整个解决方案。我刚刚对 <Project> 运行它，现在可以成为我一直想成为的空白纳粹。

10/10，将再次运行。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-08-24T13:36:32.097

# Visual Studio 2015 需要额外的步骤

[ANeves 发布的 Phil Haack 的解决方案](https://stackoverflow.com/a/31537809/2822719)非常完美，但由于某种原因，在**Visual Studio 2015**`$item.FileCodeModel.Language`中总是返回 null，从而跳过所有文件并且实际上什么都不做。**`Format-Document`**

 **要（*hackily*）解决此限制，您可以替换该`Get-Language`功能：

```
# Convert language guid to friendly name
function Get-Language($item) {
    if(!$item.FileCodeModel) {
        return $null
    }

    $kind = $item.FileCodeModel.Language
    switch($kind) {
        '{B5E9BD34-6D3E-4B5D-925E-8A43B79820B4}' { 'C#' }
        '{B5E9BD33-6D3E-4B5D-925E-8A43B79820B4}' { 'VB' }
        default { $kind }
    }
} 
```

使用文件扩展名而不是语言 GUID 的以下变体：

```
# Convert file extension to friendly language name
function Get-Language($item) {
   if(!$item.FileCodeModel) {
       return $null
   }

   $filename = $item.Name
   $ext = $filename.substring($filename.lastindexof('.'),
                              ($filename.length - $filename.lastindexof('.')))
   switch($ext) {
       '.cs' { 'C#' }
       '.vb' { 'VB' }
       # If you want to prevent re-formatting files that are not VB or C# source files 
       # (e.g. XML files in your project etc.), replace the following line with 
       # "default { $null }" (thanks to HHenn for this suggestion!)
       default { $ext }
   }            
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2020-04-28T10:36:57.503

如果有人仍然对这个问题感兴趣，Visual Studio 2019 通过一个名为[Code Cleanup](https://docs.microsoft.com/en-us/visualstudio/ide/whats-new-visual-studio-2019?view=vs-2019#code-cleanup)的功能带来了这个功能！

只需运行代码清理即可获得解决方案！

您还可以创建多个干净的配置文件并定义在每个配置文件中发生的操作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-11-11T02:38:58.043

有一种使用`dotnet`CLI 格式化 Visual Studio 项目中所有文件的新方法：

1.  通过运行以下命令安装[dotnet 格式：](https://github.com/dotnet/format/)
    `dotnet tool install -g dotnet-format`
2.  `ProjectFile.csproj`使用以下命令行运行它，替换为项目文件的路径：
    `dotnet format ProjectFile.csproj`

# php - PHP中的stdClass是什么？

> ID：931407
> 
> 赞同：1131
> 
> 时间：2009-05-31T05:49:01.493
> 
> 标签：php, stdclass

请定义是什么`stdClass`。

* * *

## 回答 #1

> 赞同：1150
> 
> 时间：2009-06-14T11:13:47.650

`stdClass`只是一个通用的“空”类，在将其他类型转换为对象时使用。尽管其他两个答案说了什么，但`stdClass`它**不是**PHP 中对象的基类。这可以很容易地证明：

```
class Foo{}
$foo = new Foo();
echo ($foo instanceof stdClass)?'Y':'N';
// outputs 'N' 
```

我不相信 PHP 中有基本对象的概念

* * *

## 回答 #2

> 赞同：840
> 
> 时间：2009-05-31T05:55:50.387

`stdClass`是 PHP 的通用空类，有点像`Object`Java 或`object`Python 中的（**编辑：**但实际上并未用作通用基类；感谢*@Ciaran* [指出这一点](https://stackoverflow.com/a/992654/911182)）。

它对匿名对象、动态属性等很有用。

考虑 StdClass 的一种简单方法是替代关联数组。请参阅下面的示例，该示例显示了如何`json_decode()`获取 StdClass 实例或关联数组。同样但未在此示例中显示，`SoapClient::__soapCall`返回一个 StdClass 实例。

```
<?php
//Example with StdClass
$json = '{ "foo": "bar", "number": 42 }';
$stdInstance = json_decode($json);
echo $stdInstance->foo . PHP_EOL; //"bar"
echo $stdInstance->number . PHP_EOL; //42
//Example with associative array
$array = json_decode($json, true);
echo $array['foo'] . PHP_EOL; //"bar"
echo $array['number'] . PHP_EOL; //42 
```

有关更多示例，请参阅[PHP 和 StdClass 中的动态属性。](http://krisjordan.com/dynamic-properties-in-php-with-stdclass)

* * *

## 回答 #3

> 赞同：109
> 
> 时间：2012-12-08T09:20:36.580

stdClass 是另一个很棒的 PHP 特性。您可以创建一个匿名 PHP 类。让我们看一个例子。

```
$page=new stdClass();
$page->name='Home';
$page->status=1; 
```

现在认为您有另一个类将使用页面对象进行初始化并基于它执行。

```
<?php
class PageShow {

    public $currentpage;

    public function __construct($pageobj)
    {
        $this->currentpage = $pageobj;
    }

    public function show()
    {
        echo $this->currentpage->name;
        $state = ($this->currentpage->status == 1) ? 'Active' : 'Inactive';
        echo 'This is ' . $state . ' page';
    }
} 
```

现在您必须使用 Page 对象创建一个新的 PageShow 对象。

这里不需要为此编写新的类模板，您可以简单地使用 stdClass 动态创建一个类。

```
 $pageview=new PageShow($page);
    $pageview->show(); 
```

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2011-10-11T19:11:39.137

另外值得注意的是，`stdClass`对象也可以从使用中创建`json_decode()`。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2015-04-06T14:21:10.580

使用***stdClass***您可以创建一个具有自己属性的新对象。考虑以下将用户详细信息表示为关联数组的示例。

```
$array_user = array();
$array_user["name"] = "smith john";
$array_user["username"] = "smith";
$array_user["id"] = "1002";
$array_user["email"] = "smith@nomail.com"; 
```

如果您需要表示与对象属性相同的细节，您可以使用***stdClass***如下。

```
$obj_user = new stdClass;
$obj_user->name = "smith john";
$obj_user->username = "smith";
$obj_user->id = "1002";
$obj_user->email = "smith@nomail.com"; 
```

如果您是 Joomla 开发人员，请参阅[Joomla 文档中的此示例以](https://docs.joomla.org/Inserting,_Updating_and_Removing_data_using_JDatabase)进一步了解。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2010-05-19T13:47:28.867

同样地，

```
$myNewObj->setNewVar = 'newVal'; 
```

产生一个 stdClass 对象 - 自动转换

我今天通过拼写错误发现了这一点：

```
$GLOBASLS['myObj']->myPropertyObj->myProperty = 'myVal'; 
```

凉爽的！

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2016-03-05T10:04:20.307

# stdClass 不是匿名类或匿名对象

此处的答案包括`stdClass`作为匿名类甚至匿名对象的表达式。这不是真的。

`stdClass`只是一个常规的预定义类。您可以使用`instanceof`operator 或 function进行检查`get_class`。这里没有什么特别的。PHP 在将其他值转换为对象时使用此类。

在程序员使用的许多情况下，`stdClass`数组是更好的选择，因为有用的功能以及这个用例代表数据结构而不是真实对象的事实。

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2020-01-24T18:07:33.747

我们有**stdClass**的原因是因为在PHP中没有办法区分普通数组和关联数组（就像在Javascript中你有`{}`对象和`[]`数组来区分它们）。

所以这会给空对象带来问题。以此为例。

PHP：

```
$a = [1, 2, 3]; // this is an array
$b = ['one' => 1, 'two' => 2]; // this is an associate array (aka hash)
$c = ['a' => $a, 'b' => $b]; // this is also an associate array (aka hash) 
```

假设您要对变量 $c 进行 JSON 编码

```
echo json_encode($c);
// outputs => {'a': [1,2,3], 'b': {one: 1, two: 2}} 
```

现在假设您删除了所有键以`$b`使其为空。由于`$b`现在是空的（您删除了所有键还记得吗？），如果您查看它，它看起来`[]`可以是数组或对象。

因此，如果您再次执行 json_encode，则输出会有所不同

```
echo json_encode($c);
// outputs => {'a': [1,2,3], 'b': []} 
```

这是一个问题，因为我们知道`b`它应该是一个关联数组，但 PHP（或任何类似 json_encode 的函数）却不是。

所以 stdClass 来救援。再次举同样的例子

```
$a = [1, 2, 3]; // this is an array
$b = (object) ['one' => 1, 'two' => 2]; // this makes it an stdClass
$c = ['a' => $a, 'b' => $b]; // this is also an associate array (aka hash) 
```

因此，现在即使您从中删除所有键`$b`并将其设为空，因为它是一个 stdClass 也没关系，当您对其进行 json_encode 编码时，您将得到以下信息：

```
echo json_encode($c);
// outputs => {'a': [1,2,3], 'b': {}} 
```

这也是为什么默认返回stdClass`json_encode`的原因。`json_decode`

```
 $c = json_decode('{"a": [1,2,3], "b": {}}', true); //true to deocde as array
 // $c is now ['a' => [1,2,3], 'b' => []] in PHP
 // if you json_encode($c) again your data is now corrupted 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2018-01-11T11:35:34.887

还值得注意的是，通过使用 Casting，您实际上不需要像 @Bandula 给出的答案那样创建对象。相反，您可以简单地将数组转换为对象并返回 stdClass。例如：

```
$array = array(
    'Property1'=>'hello',
    'Property2'=>'world',
    'Property3'=>'again',
);

$obj = (object) $array;
echo $obj->Property3; 
```

`Output: again`

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2013-03-23T15:02:33.697

实际上我尝试创建空的 stdClass 并将速度与空类进行比较。

```
class emp{} 
```

然后继续创建 1000 个 stdClasses 和 emps ......空类在大约 1100 微秒内完成，而 stdClasses 花费了 1700 微秒。所以我想如果你想用对象来存储数据，最好创建自己的虚拟类来存储数据（数组在写入和读取方面都快得多）。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2017-04-23T03:52:31.970

# 正在使用的 stdClass 对象

stdClass 允许您创建匿名类，并且通过对象转换，您还可以访问 OOP 样式的关联数组的键。就像您将访问常规对象属性一样。

### 例子

```
class Example {

  private $options;

  public function __construct(Array $setup)
  {
    // casting Array to stdClass object
    $this->options = (object) $setup;

    // access stdClass object in oop style - here transform data in OOP style using some custom method or something...
    echo $this->options->{'name'}; // ->{'key'}
    echo $this->options->surname;  // ->key
  }

}

$ob1 = new Example(["name" => "John", "surname" => "Doe"]); 
```

会回声

> 约翰·多伊

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2016-06-19T14:42:23.257

php.net 手册有一些用户提供的关于 stdClass 是什么的可靠解释和示例，我特别喜欢这个[http://php.net/manual/en/language.oop5.basic.php#92123](http://php.net/manual/en/language.oop5.basic.php#92123) , [https:// stackoverflow.com/a/1434375/2352773](https://stackoverflow.com/a/1434375/2352773)。

> stdClass 是默认的 PHP 对象。stdClass 没有属性、方法或父级。它不支持魔术方法，也不实现任何接口。
> 
> 当您将标量或数组转换为 Object 时，您将获得 stdClass 的一个实例。您可以在需要通用对象实例时使用 stdClass。
> 
> stdClass 不是基类！PHP 类不会自动从任何类继承。所有类都是独立的，除非它们明确扩展另一个类。PHP 在这方面不同于许多面向对象的语言。
> 
> 您可以定义一个扩展 stdClass 的类，但您不会得到任何好处，因为 stdClass 什么都不做。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2015-10-14T10:02:57.167

如果您想快速创建一个新对象来保存有关一本书的一些数据。你会做这样的事情：

```
$book = new stdClass;
$book->title = "Harry Potter and the Prisoner of Azkaban";
$book->author = "J. K. Rowling";
$book->publisher = "Arthur A. Levine Books";
$book->amazon_link = "http://www.amazon.com/dp/0439136369/"; 
```

请查看网站 - [http://www.webmaster-source.com/2009/08/20/php-stdclass-storing-data-object-instead-array/](http://www.webmaster-source.com/2009/08/20/php-stdclass-storing-data-object-instead-array/)了解更多详情。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2017-09-29T12:38:49.507

[stdclass](/questions/tagged/stdclass "显示标记为“stdclass”的问题")是一种当必须将某些数据放入类中时[php](/questions/tagged/php "显示标记为“php”的问题")避免停止解释脚本的方法，但不幸的是，该类没有定义

例子 ：

```
 return $statement->fetchAll(PDO::FETCH_CLASS  , 'Tasks'); 
```

在这里，数据将被放入预定义的 'Tasks' 中。但是，如果我们这样编写代码：

```
 return $statement->fetchAll(PDO::FETCH_CLASS ); 
```

然后[php](/questions/tagged/php "显示标记为“php”的问题")会将结果放入[stdclass](/questions/tagged/stdclass "显示标记为“stdclass”的问题")。

简单的[php](/questions/tagged/php "显示标记为“php”的问题")说：看，我们有一个很好的 KIDS[Objects] Here 但没有父母。所以，我们会将它们送到婴儿托儿所[stdclass](/questions/tagged/stdclass "显示标记为“stdclass”的问题") :)

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-03-13T10:48:21.680

请记住，2 个空的 stdClass 并不严格相等。这在编写嘲讽期望时非常重要。

```
php > $a = new stdClass();
php > $b = new stdClass();
php > var_dump($a === $b);
bool(false)
php > var_dump($a == $b);
bool(true)
php > var_dump($a);
object(stdClass)#1 (0) {
}
php > var_dump($b);
object(stdClass)#2 (0) {
}
php > 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-08-11T21:34:23.697

stClass 是 php 自己创建的空类，应该只供 php 使用，因为它不仅仅是一个“空”类，如果需要使用 stdClass，php 使用 stdClass 将数组转换为对象样式，我推荐两个更好的选择: 1- 使用数组（比类快得多） 2- 创建自己的空类并使用它

```
//example 1
$data=array('k1'=>'v1' , 'k2'=>'v2',....);

//example 2
//creating an empty class is faster than instances an stdClass
class data={}
$data=new data();
$data->k1='v1';
$data->k2='v2'; 
```

是什么让人们考虑使用对象样式而不是数组样式？？？

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-01-28T07:35:13.667

您还可以使用`object`将数组转换为您选择的对象：

```
Class Example
{
   public $name;
   public $age;
} 
```

现在要创建一个类型的对象`Example`并对其进行初始化，您可以执行以下任一操作：

```
$example = new Example();
$example->name = "some name";
$example->age = 22; 
```

或者

```
$example = new Example();
$example = (object) ['name' => "some name", 'age' => 22]; 
```

第二种方法最适用于初始化具有许多属性的对象。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-12-07T08:02:40.957

`stdClass`在 PHP 中是经典的泛型类。它没有内置的属性或方法。基本上，它用于转换类型，创建具有动态属性的对象等。如果您有 javascript 背景，您可以确定为

```
$o = new \stdClass(); 
```

相当于

```
const o = {}; 
```

它创建空对象，稍后由程序控制流填充。

# asp.net - 如何在 ASP.NET 中引用 ConnectionString？

> ID：931415
> 
> 赞同：1
> 
> 时间：2009-05-31T05:54:55.460
> 
> 标签：asp.net

我有一个 web 项目和一个包含常量的类的单独项目，我正在考虑添加一个连接字符串。存储它的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T06:05:51.210

将一个名为 ConnectionStrings 的部分添加到您的 web.config 文件中，作为该元素的子`<configuration>`元素。一个示例可能如下所示：

```
<connectionStrings>
    <add name="MyConnectionString" 
         connectionString="Server=myserver;Database=mydatabase;Uid=username;Pwd=password;"/>
</connectionStrings> 
```

在您的代码中，使用 ConfigurationManager 访问您的连接字符串。例如，

```
string connStr = System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionString"].ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-25T23:44:37.730

将其添加到设置文件中。在 Visual Studio 中，转到我的项目 -> 设置并将其添加为（连接字符串）。您可以通过以下方式访问它：C# - properties.settings.default...; VB - 我的.Settings...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T06:03:31.323

我建议不要将连接字符串存储在硬编码常量中。这有很多问题，其中最重要的是您实际上无法为不同的环境“配置”连接字符串。硬编码使得在一个环境中针对与生产环境不同的数据库测试代码变得非常困难，而无需重新编译代码。硬编码配置也存在安全问题，尤其是连接字符串。

我建议阅读以下文章...它应该为您提供有关以标准 .NET 方式存储连接字符串的良好基础：

[连接字符串和配置文件 (ADO.NET)](http://msdn.microsoft.com/en-us/library/ms254494.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T06:04:33.037

将其放入项目的设置文件中。设置文件被合并到 .config 文件中 - 您会获得一个自动为您构建的类，其中包含设置文件中内容的访问器。

# php - 是否有与 PHP 函数 htmlspecialchars() 等效的 Python？

> ID：931423
> 
> 赞同：20
> 
> 时间：2009-05-31T05:58:44.657
> 
> 标签：php, python, html-entities, htmlspecialchars

Python 中是否有与 PHP 函数 htmlspecialchars() 类似或等效的函数？到目前为止，我发现的最接近的是 htmlentitydefs.entitydefs()。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-31T06:12:45.097

我知道的最接近的事情是[cgi.escape](http://docs.python.org/library/cgi.html#cgi.escape)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-03-25T04:32:22.133

```
from django.utils.html import escape
print escape('<div class="q">Q & A</div>') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-01T17:48:11.757

在@garlon4 答案的基础上，您可以定义自己的`htmlspecialchars(s)`：

```
def htmlspecialchars(text):
    return (
        text.replace("&", "&amp;").
        replace('"', "&quot;").
        replace("<", "&lt;").
        replace(">", "&gt;")
    ) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-03-30T15:59:40.797

我认为最简单的方法就是使用替换：

```
text.replace("&", "&amp;").replace('"', "&quot;").replace("<", "&lt;").replace(">", "&gt;") 
```

PHP 只使用 htmlspecialchars 转义这四个实体。请注意，如果您在 PHP 中设置了 ENT_QUOTES，则需要将引号替换为 ' 而不是“。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-31T06:31:53.530

您可能想要[xml.sax.saxutils.escape](http://docs.python.org/library/xml.sax.utils.html#xml.sax.saxutils.escape)：

```
from xml.sax.saxutils import escape
escape(unsafe, {'"':'&quot;'}) # ENT_COMPAT
escape(unsafe, {'"':'&quot;', '\'':'&#039;'}) # ENT_QUOTES
escape(unsafe) # ENT_NOQUOTES 
```

看看[xml.sax.saxutils.quoteattr](http://docs.python.org/library/xml.sax.utils.html#xml.sax.saxutils.quoteattr)，它可能对你更有用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-31T08:27:17.790

该`html.entities`模块（`htmlentitydefs`适用于 python 2.x）包含一个字典`codepoint2name`，它应该可以满足您的需要。

```
>>> import html.entities
>>> html.entities.codepoint2name[ord("&")]
'amp'
>>> html.entities.codepoint2name[ord('"')]
'quot' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-11T07:03:59.897

只需要对五个字符进行转义，因此可以使用一个简单的单行函数：

```
def htmlspecialchars(content):
    return content.replace("&", "&amp;").replace('"', "&quot;").replace("'", "&#039;").replace("<", "&lt;").replace(">", "&gt;") 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-31T06:11:00.810

如果您使用的是 django 1.0，那么您的模板变量将已经被编码并准备好显示。如果您不希望全局打开它，也可以使用 `safe`运算符。`{{ var|safe }}`

# c# - 表单树视图中节点类型和上下文操作可扩展性的最佳方法

> ID：931435
> 
> 赞同：1
> 
> 时间：2009-05-31T06:08:19.427
> 
> 标签：c#, forms, treeview, mef, extensibility

我正在为 Visual Studio 2008 开发一个 Visual Studio 加载项，它显示一个树形视图，提供服务器产品中内容的视图。服务器产品包含不同类型的节点，每个节点都有自己类型的上下文菜单（右键菜单）。

对于新类型的节点和连接到节点的操作，我目前只添加代码两个我的项目。我想断开我的节点类型和节点上可用的操作，以便我可以使用插件模型将节点和条目添加到上下文菜单中。MEF 可能是一个不错的候选人。有没有人对如何以简单直接的方式实现这一点有一个好主意，这样尤其是插件开发人员不必做很多工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T00:00:16.967

我将提供一个公共库，您的代码和插件库都链接到该库（称为合同依赖项）。在那里，为节点类型定义一个接口，例如 INodeType。另外，考虑在那里实现一个 AbstractNodeType ，它实现了 INodeType 并提供了一些有用的属性，插件作者可以在他们的构造函数中设置这些属性。

INodeType 的属性之一是返回 Windows 窗体上下文菜单的 ContextMenu 属性。

在您的代码中创建一个属性：

```
[Import("NodeTypes", typeof(INodeType))]
public IEnumerable<INodeType> extensionNodeTypes { get; set; } 
```

你可以在你写完之后列举出来。

在插件代码中，他们会声明类似这样的新节点类型（可能无法编译）：

```
[Export("NodeTypes", typeof(INodeType))]
public class SomeNodeType : AbstractNodeType
{
    public SomeNodeType()
    {
        this.ContextMenu = base.BuildContextMenu(/* ... */);
        /* etc. */
    }
    /* ... other custom logic ... */
} 
```

我希望我没有弄乱语法，但这是一般的想法。

# database - oracle 10g xe 安装在 ubuntu 上。登录和创建数据库的问题

> ID：931441
> 
> 赞同：1
> 
> 时间：2009-05-31T06:10:55.303
> 
> 标签：database, oracle, ubuntu, installation

目标：在 ubuntu 上安装 oracle 10g xe。遵循的方法：www.oracle.com/technology/tech/linux/install/xe-on-kubuntu.html 问题：安装进行得很好，有一点它要求我输入系统帐户的密码，我给了它可以说'安全密码'那个。现在，我有两个问题：

1.  我想创建一个数据库。bin 目录中有一个 createdb 脚本，但每次我运行它时，它都会说：

必须设置 ORACLE_HOME 并且 $ORACLE_HOME/dbs 必须是可写的

所以我设置了 ORACLE_HOME 但我仍然遇到问题。我认为由于 dbs 目录中的所有文件都归“oracle”用户和 dba 组所有，所以我将 su 到 oracle 并运行该命令。原来 'securepassword' 对 oracle 用户不起作用。Oracle 安装创建了一个名为“oracle”的用户，但给了它一些我不知道的密码。这个密码是什么？

我还尝试将当前用户添加到 dba 组并再次尝试。也没有工作

2.  当我从 bin 目录运行 ./sqlplus 时，我尝试以 sys\'securepassword' 身份登录。没用！试过系统\'securepassword'。也没有工作。

system/'securepassword' 唯一起作用的地方是进入 apex Web 界面。有人可以告诉我 oracle 用户的默认密码以及如何登录 sqlplus 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-04-16T00:20:56.820

在 linux 终端中，输入：

```
/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/config/scripts/sqlplus.sh 
```

它应该带您进入 SQLPlus 命令行。要连接，请键入：

```
connect sys as dba 
```

然后在出现提示时填写您的密码。完毕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T09:12:42.300

我能想到三个原因

```
sqlplus sys\'securepassword' 
```

不会工作：

1.  您正在使用反斜杠。请改用正斜杠。
2.  不要在密码周围加上引号。
3.  如果连接 as `SYS`，则需要添加`as sysdba`as ，否则会收到以下错误消息：

```
错误：
ORA-28009: 作为 SYS 的连接应该是 SYSDBA 或 SYSOPER

```

因此，假设这是和`securepassword`的密码，以下两行都应该有效：`SYS``SYSTEM`

```
sqlplus sys/securepassword as sysdba
sqlplus system/securepassword 
```

在 Oracle 中，“基于操作系统的身份验证”意味着如果您的 Ubuntu 用户帐户是该`dba`组的成员，那么您可以`SYS`通过键入无密码登录

```
sqlplus / as sysdba 
```

在 shell 窗口中。如果您忘记`SYS`密码并需要重置密码，这将非常方便。

顺便说一句，我在我的 openSUSE 机器上安装 Oracle 10g XE 时遇到了一个完全不明显的问题。我需要跑步

```
chown oracle /var/tmp/.oracle 
```

以 root 身份清除阻止数据库启动的权限错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T06:14:43.500

您可以使用基于操作系统的身份验证以 sys 身份登录吗？那么你应该能够设置密码等 sqlplus / as sysdba 吗？

重新阅读问题后，听起来您正在尝试查找操作系统用户“oracle”的密码？如果您以 root 身份安装该软件，您应该能够使用 passwd 实用程序为用户“oracle”设置新密码。

# c# - 尝试开发一种新的扩展方法

> ID：931444
> 
> 赞同：0
> 
> 时间：2009-05-31T06:12:17.373
> 
> 标签：c#, linq, entity-framework, linq-to-entities, lambda

我正在使用实体框架并开发了这个扩展方法：

```
public static IQueryable<TResult> Like<TResult>(this IQueryable<TResult> query, Expression<Func<TResult, string>> field, string value) 
{
    var expression = Expression.Lambda<Func<TResult, bool>>(
        Expression.Call(field.Body, typeof(string).GetMethod("Contains"),
        Expression.Constant(value)), field.Parameters);

    return query.Where(expression);
} 
```

如果我像这样使用它，则此代码可以正常工作：

```
var result = from e in context.es.Like(r => r.Field, "xxx")
             select e 
```

现在我需要以编程方式调用这个扩展方法：

```
public static IQueryable<TSource> SearchInText<TSource>(this IQueryable<TSource> source, string textToFind)
{
    // Collect fields
    PropertyInfo[] propertiesInfo = source.ElementType.GetProperties();
    List<string> fields = new List<string>();
    foreach (PropertyInfo propertyInfo in propertiesInfo)
    {
        if (
            (propertyInfo.PropertyType == typeof(string)) ||
            (propertyInfo.PropertyType == typeof(int)) ||
            (propertyInfo.PropertyType == typeof(long)) ||
            (propertyInfo.PropertyType == typeof(byte)) ||
            (propertyInfo.PropertyType == typeof(short))
            )
        {
            fields.Add(propertyInfo.Name);
        }
    }

    ParameterExpression parameter = Expression.Parameter(typeof(TSource), source.ElementType.Name);
    Expression expression = Expression.Lambda(Expression.Property(parameter, typeof(TSource).GetProperty(fields[0])), parameter);
    Expression<Func<TSource, string>> field = Expression.Lambda<Func<TSource, string>>(expression, parameter);

    return source.Like(field, textToFind);
} 
```

现在这段代码不起作用！我需要了解如何声明 Like 扩展方法的“字段”。

```
Expression<Func<TSource, string>> field = Expression.Lambda<Func<TSource, string>>(expression, parameter); 
```

在运行时我收到此错误： Impossibile utilizzare un'espressione di Tipo 'System.Func`2[TestMdf.Equipment,System.String]' per un tipo restituito 'System.String'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T07:49:18.757

我假设你的第二个代码片段只是一个截断的例子——如果你真的这样做了，那么结果将是不可预测的，因为你正在使用反射返回的第一个属性，它可以在你的程序运行之间改变。

如果您说“这有效”，然后是对发生的事情的描述，然后是“这不起作用”，然后是如何判断它不起作用的描述，您会得到更好的答案（编译器错误？运行时错误? 异常信息？）

首先，您知道[Dynamic Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)吗？它允许您将关于如何构建查询的决策延迟到运行时，并且可以为您解决许多问题。

但假设这是一个学习练习......

您的`Like`扩展方法采用一个表达式（调用者通常应该将其写为 lambda，因为这就是这些事情的全部意义所在）。该表达式将从查询结果集中转换“记录”并返回一个字符串值（可能是从存储在记录中的数据中选择它）。该方法还接受一个值字符串。

但它随后（手动）构造了自己的谓词，该谓词调用lambda`Contains`主体上的方法。`field`

我想这应该可行，因为那个 lambda 的结果是一个字符串。但是，我不明白你为什么要这样做。有什么问题：

```
var result = from e in context.es
             where e.Field.Contains("xxx"))
             select e 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T12:43:52.467

现在我找到了解决问题的部分方法：

```
public static IQueryable<TSource> SearchInText<TSource>(this IQueryable<TSource> source, string textToFind)
{
    // Collect fields
    PropertyInfo[] propertiesInfo = source.ElementType.GetProperties();
    List<string> fields = new List<string>();
    foreach (PropertyInfo propertyInfo in propertiesInfo)
    {
        if (
            (propertyInfo.PropertyType == typeof(string)) ||
            (propertyInfo.PropertyType == typeof(int)) ||
            (propertyInfo.PropertyType == typeof(long)) ||
            (propertyInfo.PropertyType == typeof(byte)) ||
            (propertyInfo.PropertyType == typeof(short))
            )
        {
            fields.Add(propertyInfo.Name);
        }
    }

    ParameterExpression parameter = Expression.Parameter(typeof(TSource),     source.ElementType.Name);

    var property = typeof(TSource).GetProperty(fields[0]);
    var propertyAccess = Expression.MakeMemberAccess(parameter, property);
        var constantValue = Expression.Constant(textToFind);
    var equality = Expression.Call(Expression.Call(Expression.Property(parameter,     property), "ToUpper", null, null), typeof(string).GetMethod("Contains", new Type[] { typeof(string) }), Expression.Constant(textToFind.ToUpper()));

    return source.Where(Expression.Lambda<Func<TSource, bool>>(equality, parameter));
} 
```

现在下一步是连接所有字段列表：

```
" " + fields[0] + " " + ... fields[n] 
```

一些想法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T18:32:18.237

这是我的第一个版本：

```
public static IQueryable<TSource> SearchInText<TSource>(this IQueryable<TSource> source, string textToFind)
{
    if (textToFind.Trim() == "")
    {
        return source;
    }
    string[] textToFindList = textToFind.Replace("'", "''").Split(' ');

    // Collect fields
    PropertyInfo[] propertiesInfo = source.ElementType.GetProperties();
    List<string> fieldList = new List<string>();
    foreach (PropertyInfo propertyInfo in propertiesInfo)
    {
        if (
            (propertyInfo.PropertyType == typeof(string)) ||
            (propertyInfo.PropertyType == typeof(int)) ||
            (propertyInfo.PropertyType == typeof(long)) ||
            (propertyInfo.PropertyType == typeof(byte)) ||
            (propertyInfo.PropertyType == typeof(short))
            )
        {
            fieldList.Add(propertyInfo.Name);
        }
    }

    ParameterExpression parameter = Expression.Parameter(typeof(TSource), source.ElementType.Name);
    MethodInfo concatMethod = typeof(String).GetMethod("Concat", new Type[] { typeof(string), typeof(string) });

    var spaceExpression = Expression.Constant(" ");
    var concatenatedField = BinaryExpression.Add(spaceExpression, Expression.MakeMemberAccess(parameter, typeof(TSource).GetProperty(fieldList[0])), concatMethod);

    for (int i = 1; i < fieldList.Count; i++)
    {
        concatenatedField = BinaryExpression.Add(concatenatedField, spaceExpression, concatMethod);
        concatenatedField = BinaryExpression.Add(concatenatedField, Expression.MakeMemberAccess(parameter, typeof(TSource).GetProperty(fieldList[i])), concatMethod);
    }

    concatenatedField = BinaryExpression.Add(concatenatedField, spaceExpression, concatMethod);
    var fieldsExpression = Expression.Call(concatenatedField, "ToUpper", null, null);

    var clauseExpression = Expression.Call(
        fieldsExpression, typeof(string).GetMethod("Contains", new Type[] { typeof(string) }),
        Expression.Constant(textToFindList[0].ToUpper())
        );

    if (textToFindList.Length == 1)
    {
       return source.Where(Expression.Lambda<Func<TSource, bool>>(clauseExpression, parameter));
    }

    BinaryExpression expression = Expression.And(Expression.Call(
            fieldsExpression, typeof(string).GetMethod("Contains", new Type[] { typeof(string) }),
            Expression.Constant(textToFindList[1].ToUpper())
            ), clauseExpression);
    for (int i = 2; i < textToFindList.Length; i++)
    {
        expression = Expression.And(Expression.Call(
            fieldsExpression, typeof(string).GetMethod("Contains", new Type[] { typeof(string) }),
            Expression.Constant(textToFindList[i].ToUpper())
            ), expression);
    }

    return source.Where(Expression.Lambda<Func<TSource, bool>>(expression, parameter));

} 
```

我将修改以管理一些规则，例如“短语”+ 和 - 运算符。

# .net - 将控制台应用程序转换为服务？

> ID：931450
> 
> 赞同：8
> 
> 时间：2009-05-31T06:15:33.887
> 
> 标签：.net, windows-services

我正在寻找具有优势/劣势的不同方法来将我们长期使用的控制台应用程序转换为 Windows 服务。我们为 ActiveMQ 使用称为 java 服务包装器的东西，我相信人们告诉我你可以用它包装任何东西。这并不是说你应该用它包裹任何东西。我们遇到了这个设置的问题。

控制台应用程序是一个 .NET 控制台应用程序，默认情况下会将大量信息记录到控制台，尽管这是可配置的。

有什么推荐吗？

我们是否应该在 Visual Studio 中将其重建为服务？使用包装器？哪一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-31T09:23:16.757

我很想创建一个空的 Windows 服务项目，然后只获取处理服务的部分；它不是很多 - 一些参考资料和`Main`. 实际上，您可以让现有的控制台*同时*作为服务*和*控制台工作- 通过检查参数`Main`并使用（例如）“-console”开关，或者我相信你可以检查`Environment.UserInteractive`.

如果它处于“控制台”模式，请像现在一样运行您的代码；如果它处于服务模式，请运行您从模板项目中获取的代码。

有关信息，您*还*可以使用与该服务的安装程序/卸载程序相同的 exe 工作！我使用“-install”/“-uninstall”开关来做到这一点。例如，[请参见此处](http://groups.google.co.uk/group/microsoft.public.dotnet.languages.csharp/browse_thread/thread/4d45e9ea5471cba4)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T07:30:14.830

[Vici WinService](http://viciproject.com/wiki/projects/winservice/home)会将控制台应用程序转变为自安装的 Windows 服务。它是开源的，您可以下载源代码。即使您不想使用该库，您仍然可以从中获得一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T06:56:35.243

一些想法：

[使用 VS 2005 创建 windows 服务](http://www.csharp-examples.net/create-windows-service/)

[安装 .Net 服务](http://www.csharp-examples.net/install-net-service/)

几年前我写了一组基于 Perl 的可执行文件 (theads) 等，这似乎与你的要求相似......

要记住的一些事情：

*   确实有调试开关（当事情真的出错时你应该有一个）
*   输出到控制台和文件（例如尝试 log4net）
*   考虑未来的正则表达式解析来构建您的日志记录
*   如果有一些不依赖的进程，学习如何杀死它们，停止并重新启动它们。
*   如果有一些不依赖的进程尝试与它们通信

这是一个使用 log4net 输出到数据库、文件和控制台的小型控制台示例

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using log4net;
    using log4net.Config;
    using NUnit.Framework;

    namespace ExampleConsoleApplication
    {
        [TestFixture]
        class TestClass
        {

        //private static readonly ILog logger =
        //     LogManager.GetLogger ( typeof ( TestClass ) );

        private static readonly log4net.ILog logger = log4net.LogManager.GetLogger ( System.Reflection.MethodBase.GetCurrentMethod ().DeclaringType );

            static void Main ( string[] args )
            {

                Console.WriteLine ( " START " );
                #region LoggerUsage
                DOMConfigurator.Configure (); //tis configures the logger 
                logger.Debug ( "Here is a debug log." );
                logger.Info ( "... and an Info log." );
                logger.Warn ( "... and a warning." );
                logger.Error ( "... and an error." );
                logger.Fatal ( "... and a fatal error." );

                #endregion LoggerUsage
                TestClass objTestClass = new TestClass();
                objTestClass.TestMethodNameOK ();
                objTestClass.TestMethodNameNOK ();

                Console.WriteLine ( " END HIT A KEY TO EXIT " );
                Console.ReadLine ();
                } //eof method 

            [SetUp]
            protected void SetUp ()
            {
                //Add Here the Initialization of the objects 
            }
            [Test ( Description = "Add here the description of this test method " )]
            protected void TestMethodNameOK ()
            { 
                //build ok use case scenario here - e.g. no exception should be raced '
                //Vegetable newCarrot = pool.GetItemByPropertyValue<Vegetable> ( "WriongByPurpose", "Orange" );
                //Assert.IsInstanceOfType ( typeof ( Vegetable ), newCarrot );
                //Assert.AreSame ( newCarrot, carrot );
                //logger.Info ( " I got the newCarrot which is " + newCarrot.Color );

            } //eof method 

            [Test ( Description = "Add here the description of this test method " )]
            protected void TestMethodNameNOK ()         //e.g. the one that should raze Exception
            {
                //build ok use case scenario here - e.g. no exception should be raced '
                //Vegetable newCarrot = pool.GetItemByPropertyValue<Vegetable> ( "WriongByPurpose", "Orange" );
                //Assert.IsInstanceOfType ( typeof ( Vegetable ), newCarrot );
                //Assert.AreSame ( newCarrot, carrot );
                //logger.Info ( " I got the newCarrot which is " + newCarrot.Color );

            } //eof method 

        } //eof class 

    } //eof namespace 

    #region TheAppConfig
//    <?xml version="1.0" encoding="utf-8" ?>
//<configuration>
//  <configSections>
//    <section name="log4net"
//         type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
//  </configSections>

//  <log4net>
//    <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
//      <param name="File" value="Program.log" />
//      <param name="AppendToFile" value="true" />
//      <layout type="log4net.Layout.PatternLayout">
//        <!--<param name="Header" value="======================================" />
//        <param name="Footer" value="======================================" />-->
//        <param name="ConversionPattern" value="%d [%t] %-5p - %m%n" />
//      </layout>
//    </appender>

//    <appender name="ColoredConsoleAppender" type="log4net.Appender.ColoredConsoleAppender">
//      <mapping>
//        <level value="ERROR" />
//        <foreColor value="Red" />
//      </mapping>
//      <mapping>
//        <level value="DEBUG" />
//        <foreColor value="HighIntensity" />
//      </mapping>
//      <mapping>
//        <level value="INFO" />
//        <foreColor value="Green" />
//      </mapping>
//      <mapping>
//        <level value="WARN" />
//        <foreColor value="Yellow" />
//      </mapping>
//      <mapping>
//        <level value="FATAL" />
//        <foreColor value="White" />
//        <backColor value="Red" />
//      </mapping>

//      <layout type="log4net.Layout.PatternLayout">
//        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
//      </layout>
//    </appender>

//    <appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
//      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.2.10.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
//      <connectionString value="data source=ysg;initial catalog=DBGA_DEV;integrated security=true;persist security info=True;" />
//      <commandText value="INSERT INTO [DBGA_DEV].[ga].[tb_Data_Log] ([Date],[Thread],[Level],[Logger],[Message]) VALUES (@log_date, @thread, @log_level, @logger, @message)" />

//      <parameter>
//        <parameterName value="@log_date" />
//        <dbType value="DateTime" />
//        <layout type="log4net.Layout.PatternLayout" value="%date{yyyy'.'MM'.'dd HH':'mm':'ss'.'fff}" />
//      </parameter>
//      <parameter>
//        <parameterName value="@thread" />
//        <dbType value="String" />
//        <size value="255" />
//        <layout type="log4net.Layout.PatternLayout" value="%thread" />
//      </parameter>
//      <parameter>
//        <parameterName value="@domainName" />
//        <dbType value="String" />
//        <size value="255" />
//        <layout type="log4net.Layout.PatternLayout" value="%user" />
//      </parameter>
//      <parameter>
//        <parameterName value="@log_level" />
//        <dbType value="String" />
//        <size value="50" />
//        <layout type="log4net.Layout.PatternLayout" value="%level" />
//      </parameter>
//      <parameter>
//        <parameterName value="@logger" />
//        <dbType value="String" />
//        <size value="255" />
//        <layout type="log4net.Layout.PatternLayout" value="%logger" />
//      </parameter>
//      <parameter>
//        <parameterName value="@message" />
//        <dbType value="String" />
//        <size value="4000" />
//        <layout type="log4net.Layout.PatternLayout" value="%message" />
//      </parameter>
//    </appender>
//    <root>
//      <level value="ALL" />
//      <appender-ref ref="LogFileAppender" />
//      <appender-ref ref="AdoNetAppender" />
//      <appender-ref ref="ColoredConsoleAppender" />
//    </root>
//  </log4net>
//</configuration>
    #endregion TheAppconfig

    //this is the xml added replace here your log4net and Nunit paths
    //<Reference Include="log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821, processorArchitecture=MSIL">
    //  <SpecificVersion>False</SpecificVersion>
    //  <HintPath>..\..\..\Log4Net\log4net-1.2.10\bin\net\2.0\release\log4net.dll</HintPath>
    //</Reference>
    //<Reference Include="nunit.framework, Version=2.4.8.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77, processorArchitecture=MSIL" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T09:18:42.960

您的长期使用场景是什么？Windows 服务可能就足够了……但是 Windows Server 2008/IIS7 提供了一些有趣的新方法来通过 Windows 激活服务托管和激活“服务”。Windows 服务将始终运行，并且可能需要一些特殊编码。使用 WAS，您可以将主机编写为普通的 WCF 服务，并在请求进入时按需激活它，并在不使用时将其停用。还存在其他选项...例如 MSMQ 托管和实例化等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-10-07T22:14:21.200

我遇到了同样的问题，我最终编写了自己的包装器，它只适用于最简单的情况，但它确实有好处。您可以在此处找到该工具：[http](http://runasservice.com) ://runasservice.com 。一些好处包括您可以将应用程序编码为控制台应用程序，该应用程序易于在 IDE 中测试和运行。设置服务涉及一个简单的命令，因此您不必编辑您的应用程序。您还可以使用不同的名称多次安装服务，如果您想使用不同的参数运行每个服务，您可能需要这样做。

就像我说的，尽管它只涵盖了最简单的场景，即本质上已经是服务的应用程序。那就是它们连续运行。我敢肯定，还有很多其他服务可以为您提供更多选择。

我个人认为转换控制台应用程序并不是特别困难，但测试起来可能很麻烦。最后，尽管这取决于您想要多少控制。如果它对贵公司来说是一项非常重要的服务，那么我会说转换它。

# c++ - 依赖注入的 C++ 方式 - 模板还是虚拟方法？

> ID：931456
> 
> 赞同：8
> 
> 时间：2009-05-31T06:20:40.230
> 
> 标签：c++, templates, dependency-injection, inline

我想知道使用依赖注入的 C++ 方式是什么？那是使用模板还是多态类？考虑以下代码，

```
class AbstractReader
{
public:
  virtual void Read() = 0;
};

class XMLReader : public AbstractReader
{
public:
  void Read()  { std::cout << "Reading with a XML reader" << std::endl; }
};

class TextFileReader : public AbstractReader
{
public:
  void Read()  { std::cout << "Reading with a Text file reader" << std::endl; }
};

class Parser
{
public:
  Parser(AbstractReader* p_reader) : reader(p_reader) { }
  void StartParsing() { reader->Read();
    // other parsing logic
  }
private:
  AbstractReader* reader;
};

template<class T>
class GenericParser
{
public:
  GenericParser(T* p_reader) : reader(p_reader) { }

  void StartParsing()
  {
    reader->Read();
  }
private:
  T* reader;
}; 
```

1 - 哪种方法最好？*通用*解析器还是*解析器*？我知道如果是*GenericParser*，可以删除继承。

2 - 如果模板是要走的路，可以将所有代码写在头文件中吗？我见过许多使用模板的类将所有代码写入头文件而不是 .h/.cpp 组合。这样做有什么问题吗，比如内联等？

有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-31T07:07:17.903

根据您希望如何构建代码或头文件，您没有自由选择。答案取决于您的应用程序的要求。

**这取决于耦合是否可以在编译时确定或必须延迟到运行时**。

如果组件及其依赖项之间的耦合是在编译时永久确定的，则可以使用模板。然后编译器将能够执行内联。

但是，如果需要在运行时决定耦合（例如，用户选择哪个其他组件将提供依赖项，可能通过配置文件），那么您不能为此使用模板，您必须使用运行时多态机制。如果是这样，您的选择包括虚函数、函数指针或`std::function`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-31T06:56:50.000

如果我在编译时知道阅读器的类型，我个人更喜欢使用模板解决方案，因为我觉得这里没有运行时决定，因此多态性将没有用。就在头文件中编写模板而言，您必须这样做以避免出现链接器错误。这是因为如果您在 cpp 中编写模板方法，编译器将无法实例化模板类，因此链接器会出错。尽管存在一些变通方法，但大多数模板代码都编写在头文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-31T06:38:40.690

至于1.“最好”是相对的。两种方法都有其优点和缺点。模板提供了原始速度，但不可避免地会内联更多代码（产生更多耦合），并且错误消息难以阅读。继承速度较慢并使对象更大，但它不需要内联（耦合较少）。它还具有相对更好的错误消息。

对于小型库来说，耦合的问题不大，模板可能是一个不错的选择。但是，随着库的复杂性增加，您需要转向耦合度较低的方法。如果您不确定您的库会增长到多大，或者不需要模板提供的速度（或者不想处理错误消息），请使用继承。

我对 2 的回答是 1 的后续。一些消费者模板需要内联，因此需要将代码放在标题中。这是一个耦合问题。内联增加了组件之间的耦合，并可能大大增加编译时间；避免它，除非您想要速度并确保您的库保持较小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T07:00:42.533

**通用解析器还是解析器？**

取决于代码的其余部分，通用解析器的问题是您要注入的类也必须是模板。
但是还有第三种更通用的方式...... boost::function 和 boost::lambda。您只需要一个`function`正确的（从类用户的角度来看）返回类型和参数。`boost::function< void ()> reader = bind( &TextFile::read, reader );` 现在用户类独立于阅读器类，不必是模板。

> ```
> class User
> {
> const boost::function< void ()>& reader;
> 
> public:
>     void setReader( const boost::function< void ()>& reader ) 
>     : reader(reader) {
>     }
> }; 
> ```

* * *

**将所有代码写入头文件而不是 .h/.cpp 组合。**

这就是所谓的分离模型，只有一种编译器支持它（Comeau 编译器）。开始阅读[“出口”限制第 1 部分](http://www.gotw.ca/publications/mill23-x.htm)和 [“出口”限制第 2 部分](http://www.ddj.com/showArticle.jhtml?articleID=184401584)

* * *

@CiscoIPPhone 评论：*通用解析器的问题是您要注入的类也必须是模板。*

```
template<class T>
class GenericParser
{
public:
    GenericParser(T* p_reader) : reader(p_reader) { }

    void StartParsing()
    {
        reader->Read();
    }
private:
    T* reader;
};

// Now you have a GeniricParser Interface but your Parser is only usable for 
// TextFileReader 
class Parser
{
public:
    Parser( GenericParser<TextFileReader> p_reader) : reader(p_reader) { }
    void StartParsing() { 
        reader->Read();
    }
private:
    GenericParser<RealParser> reader;
};

//Solution is to make Parser also a template class
template<class T>
class Parser
{
public:
    Parser( GenericParser<T> p_reader) : reader(p_reader) { }
    void StartParsing() { 
        reader->Read();
    }
private:
    GenericParser<T> reader;
}; 
```

# iphone - 导航栏上超过 1 个 rightBarButtonItem

> ID：931457
> 
> 赞同：24
> 
> 时间：2009-05-31T06:20:42.880
> 
> 标签：iphone, navigation

我想在导航栏上有两个 rightBarButtonItems。一个用于编辑，另一个用于添加。

显然我不能使用 Interface Builder 来实现它。

有人知道如何以编程方式进行吗？谢谢！

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-02-04T19:25:31.237

这现在包含在 iOS 5 中，称为 rightBarButtonItems，注意复数

这是来自[苹果文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationItem_Class/Reference/UINavigationItem.html)的文本：

> rightBarButtonItems
> 
> 当接收者是顶部导航项时，一组自定义栏按钮项显示在导航栏的右侧。
> 
> @property(非原子，复制) NSArray *rightBarButtonItems
> 
> 讨论
> 
> 该数组可以包含 0 个或多个条形按钮项以显示在导航栏的右侧。项目按照它们在数组中出现的顺序从右到左显示。因此，数组中的第一项是最右边的项，其他项被添加到前一项的左侧。
> 
> 如果没有足够的空间来显示数组中的所有项目，则不会显示与标题视图（如果存在）或栏左侧按钮重叠的项目
> 。
> 
> 也可以使用 rightBarButtonItem 属性设置数组中的第一项。
> 
> 在 UINavigationBar.h 中声明

以下是我在导航栏右侧实现搜索图标和编辑图标的方法：

```
UIBarButtonItem *searchButton         = [[UIBarButtonItem alloc]
                                         initWithBarButtonSystemItem:UIBarButtonSystemItemSearch
                                         target:self
                                         action:@selector(searchItem:)];

UIBarButtonItem *editButton          = [[UIBarButtonItem alloc] 
                                         initWithBarButtonSystemItem:UIBarButtonSystemItemEdit
                                         target:self action:@selector(editItem:)];

self.navigationItem.rightBarButtonItems =
[NSArray arrayWithObjects:editButton, searchButton, nil]; 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2009-09-01T13:38:53.910

下面是一个如何添加两个按钮作为 rightbarbutton 的示例。下面的代码创建了一个包含向上和向下箭头按钮的分段控件，然后将其添加为导航右栏按钮的自定义视图：

```
UISegmentedControl* segmentedControl = [[UISegmentedControl alloc] initWithItems:[NSArray array]];
    [segmentedControl setMomentary:YES];
    [segmentedControl insertSegmentWithImage:[UIImage imageNamed:@"icon-triangle-up.png"] atIndex:0 animated:NO];
    [segmentedControl insertSegmentWithImage:[UIImage imageNamed:@"icon-triangle-down.png"] atIndex:1 animated:NO];
    segmentedControl.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
    [segmentedControl addTarget:self action:@selector(segmentedAction:) forControlEvents:UIControlEventValueChanged];

    UIBarButtonItem * segmentBarItem = [[UIBarButtonItem alloc] initWithCustomView: segmentedControl];
    self.navigationItem.rightBarButtonItem = segmentBarItem; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-31T21:50:25.233

我的建议是不要将添加功能实现为导航栏中的按钮。我假设您正在处理下面项目的表格视图，因此处理此用户交互的一种方法是将“添加新项目”选项显示为表格视图中的最后一个条目。当用户通过实现以下委托方法点击导航栏中的编辑按钮时，这可以通过编程方式淡入：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];
    [self.tableView beginUpdates];
    [self.tableView setEditing:editing animated:YES];

    if (editing)
    {
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[objects count] inSection:0];
        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];           
    }
    else
    {
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[objects count] inSection:0];     
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];           
    }
    [self.tableView endUpdates];
} 
```

然后，您需要确保通过使用以下方法增加行数来计算额外的行：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    if (tableView.editing)
        return ([objects count] + 1);
    else
        return [objects count];     
} 
```

然后在其左侧显示绿色加号，与正常的删除编辑样式相反：

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)aTableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if (self.editing == NO || !indexPath) return UITableViewCellEditingStyleNone;
    if (indexPath.row >= [objects count]) 
        return UITableViewCellEditingStyleInsert;
    else
        return UITableViewCellEditingStyleDelete;

    return UITableViewCellEditingStyleNone;
} 
```

当然，您需要在 cellForRowAtIndexPath: 实现中为其提供名称并处理其行选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-18T16:00:38.737

如果有人路过，这里是快速的答案：

```
let barButton_array: [UIBarButtonItem] = [Button1, Button2]
navigationItem.setRightBarButtonItems(barButton_array, animated: false) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-09-04T08:00:08.017

这是非常简单的两行答案：

第 1 步：为自定义视图创建一个笔尖，包含您想要的任何内容

第 2 步：将 nib 作为自定义视图添加到工具栏：

```
NSArray *subviewArray = [[NSBundle mainBundle] loadNibNamed:@"TwoButtonView" owner:self options:nil];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:[subviewArray objectAtIndex:0]]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-31T07:59:55.473

导航栏是 UIView，因此您可以简单地创建一个规则 UIButton 并将其作为子视图添加到导航栏。

设置相对于导航栏的框架。如果您希望它看起来与内置按钮完全一样，您可能必须自己生成图形，因为它们不会暴露给 SDK AFAIK。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-08-26T15:59:53.773

如果您想拥有两个单独的按钮，`rightBarButtonItem`您可以通过向`UIToolbar`右侧栏项目添加自定义视图来实现：

```
/*************************************************
       CREAT TWO RIGHT BAR BUTTON ITEMS
   *************************************************/
    // create a toolbar to have two buttons in the right
    UIToolbar* customToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 90, 44.01)];

    // create the array to hold the buttons, which then gets added to the toolbar
    NSMutableArray* rightBarButtonArray = [[NSMutableArray alloc] initWithCapacity:2];

    //Add the info button to the array
    UIButton* infoViewButton = [[UIButton buttonWithType:UIButtonTypeInfoLight] retain];
    [infoViewButton addTarget:self action:@selector(showInfoView) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *infoItem =  [[UIBarButtonItem alloc] initWithCustomView:infoViewButton];
    [rightBarButtonArray addObject:infoItem];
    [infoItem release];

    //Add the Done Button to the array
    UIBarButtonItem *bbi;
    bbi = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone 
                                                        target:self 
                                                        action:@selector(create:)];

    [rightBarButtonArray addObject:bbi];
    [bbi release];

    //add the array to the custom toolbar
    [customToolbar setItems:rightBarButtonArray animated:NO];
    [rightBarButtonArray release];

    // and finally add the custom toolbar as custom view to the right bar item
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:customToolbar];
    [customToolbar release]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-28T07:26:57.553

您可以从 Interface Builder 中执行此操作。我在我的应用程序中所做的 - 只是在导航栏的左侧项目上添加了 UIView 并在此视图中放置了 3 个按钮并连接了它们的操作。您可以按照此在左/右导航项中添加多个按钮。

参考：[子笔尖中的工具栏项目](https://stackoverflow.com/questions/1703781/toolbar-items-in-sub-nib)

![在此处输入图像描述](https://i.stack.imgur.com/3xF9b.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-02-27T08:44:31.183

显示**独立按钮**（而不是分段控制按钮）：

```
// create a toolbar to have two buttons in the right
UIToolbar* tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 133, 44.01)];

// create the array to hold the buttons, which then gets added to the toolbar
NSMutableArray* buttons = [[NSMutableArray alloc] initWithCapacity:3];

// create a standard "add" button
UIBarButtonItem* bi = [[UIBarButtonItem alloc]
initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:NULL];
bi.style = UIBarButtonItemStyleBordered;
[buttons addObject:bi];

// create a spacer
bi = [[UIBarButtonItem alloc]
initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
[buttons addObject:bi];

// create a standard "refresh" button
bi = [[UIBarButtonItem alloc]
initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(refresh:)];
bi.style = UIBarButtonItemStyleBordered;
[buttons addObject:bi];

// stick the buttons in the toolbar
[tools setItems:buttons animated:NO];

// and put the toolbar in the nav bar
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:tools]; 
```

# design-patterns - 我应该如何重构这个设计

> ID：931459
> 
> 赞同：3
> 
> 时间：2009-05-31T06:21:09.620
> 
> 标签：design-patterns, oop, interface

我应该如何重构这个设计？

```
class Service : IChargeable, IExtendable<br />
{

}

interface IChargeable
{
decimal? ChargeableAmount { 
    get; 
    }
}

interface IExtendable
{
bool IsExtendable { 
    get; 
    }
}

class DayService : Service { } 
class NightService : Service { } 
class TwentFourService : Service { } 
```

问题是这些服务的收费标准不同，具体取决于它们是否可扩展或取决于它们的类型。
如果服务延长，将按应收费金额的百分比收取费用。服务费为 ChargeableAmount * 季节性费率，每项服务不同。

我不想将费率存储在服务类或任何派生类中。为每个返回 SeasonalRate 的 ServiceType 创建一个具有方法的 SeasonalRate 提供程序是否是个好主意？
问题是季节性费率可能会发生变化并且经常发生变化，我们对更改服务类别持谨慎态度。我们还希望对 SeasonalRates 类中的服务类具有可维护的依赖关系。
为每个 ServiceClass（一种访问者）实现一个带有重载的 SeasonalRates 类是一个好主意吗？所有 SeasonalRates 类都必须为所有 ServiceType 实现方法会不会是个问题？
**SeasonalRate 类应该实现什么接口，因为还会有其他类计算费率，例如 DiscountRate、ZipCodeRate 等？**
如果添加更多的 ServiceType 类，是否很难维护所有访客的更改？

**编辑：所有费率因服务类型而异。例如，日间和夜间服务的 SeasonalRates 不同**

与使用标准访问者模式相比，Jeff Meatball Yang 建议的方法有哪些优点/缺点，如下所示：

```
interface IVisitable
{
    Accept(IVisitor visitor);
}
interface IVisitor
{
    Visit(IVisitable visitable);
}
interface IRate
{
    Rate { get; }
}

class Service : IVisitable
{
    public virtual Accept(IVisitor visitor);
}
class Visitor : IVisitor
{
    public virtual Visit(IVisitable visitable) { }
    public virtual Visit(DayService visitable) { }
    public virtual Visit(NightService visitable) { }
}
class RateVisitor : Visitor, IRateVisitor
{
    decimal? _Rate;

    override Visit(IVisitable visitable) { };
    override Visit(DayService visitable) { // Logic Goes here, sets the _Rate Variable };
    // Overrides for other services

    public virtual Rate 
    {
        return this._Rate;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T06:52:13.333

看来您正在寻找策略模式：几种计算方法？只需使用一个通用接口，并在具体对象中实现不同的行为。

关于什么：

```
class Service : IChargeable, IExtendable
{

}

interface IChargeable {  
    decimal? ChargeableAmount { get; }  
}

interface IExtendable {  
    bool IsExtendable { get; }  
}

class RatedService: Service {  
    RateStrategy strategy;  
}

interface RateStrategy {  
    decimal SeasonalRate { get; }  
}

class DiscountRate: RateStrategy {}  
class ZipCodeRate: RateStrategy {}  

class DayService : RatedService { }  
class NightService : RatedService { }  
class TwentFourService : RatedService { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T06:56:48.893

这是一个有趣的问题。我想反思一下这个设计的目标，如果我错了，你可以纠正我。

根据您的描述，一项服务似乎可以有多个费率。服务实例与以下实例中的一个（或多个？）相关：

> SeasonalRate、DiscountRate、ZipCodeRate 等

我还收集到有一个访问者对象这样的东西，它与一个或多个服务有关：

> DayService、NightService、TwentyFourService 等

**我相信这里的任务是根据正在执行的服务的属性和适用的费率正确地向访客收费？**

可视化关系应该有助于您理解必要的接口。似乎所有 Rates 都必须实现一个所有 Services 都可以调用的接口。

```
public interface IRate { 
  decimal GetRate(Service s);
} 
```

这允许费率根据服务决定返回值应该是什么。现在重要的是所有服务都实现接口（IChargeable、IExtendable 等），以便做出决定所需的所有数据对每个 Rate 对象都可用。

这是我在想的一个例子：

```
public interface IThumbnail {
  string ThumbnailFile { get; }
  int ThumbnailSize { get; }
  Image GetThumbnail();
}
public interface IThumbnailProvider { 
  Image GetThumbnail(Service s);
}

public class Thumbnail : IThumbnailProvider { 
    public Image GetThumbnail(Service s) { 
       if(s.ThumbnailFile != null) {
           // get the image
       }
    }
}

public interface ISeasonal {
  SeasonType Season { get; }
}

public class SeasonalRate : IRate {
  public decimal GetRate(Service s) { 
    if(s.Season != SeasonType.None) {
       // return seasonal rate based on s.Season
    } else {
       // throw an exception or do something else
    }
}

public abstract class Service : IChargeable, IExtendable, ISeasonal, IThumbnail { 
  // default implementation for ISeasonal
  protected SeasonType _season = SeasonType.None;
  public SeasonType Season { get { return _season; } }

  // default implementation for IThumbnail
  protected string _thumbFile = null;
  protected int _thumbSize = 32;
  public string ThumbnailFile { get { return _thumbFile; } }
  public int ThumbnailSize { get { return _thumbnailSize; } }
  public Image GetThumbnail() {
     return null; // 
  } 
}

public class DayService : Service { 
  private IRate _confirmedRate;
  private IThumbnailProvider _fileServer;
  public decimal GetRate() { return confirmedRate.GetRate(this); }
  public Image GetThumbnail() { return fileServer.GetThumbnail(); }

  // constructor
  public DayService(IThumbnailProvider fileServer, IRate confirmedRate) { 
        this._season = SeasonType.Day; 
        this._filename = "sunny.jpg"; 
        this._fileServer = fileServer;
        this._confirmedRate = confirmedRate;
  }
} 
```

这使您的 Rate 对象可以根据您的需要进行更改，但减少了每个 Service 所需的更改，因为您的业务变量应该在 Service 基类中定义得很好并且相对不变。

例如，您的 NightService 可能没有缩略图，因此它不需要显式实现 GetThumbnail 函数。它只是继承了 Service 的默认实现。

# scala - 如何在 Scala 中转换变量？

> ID：931463
> 
> 赞同：201
> 
> 时间：2009-05-31T06:26:08.797
> 
> 标签：scala

给定一个 type 的变量`Graphics`，如何`Graphics2D`在 Scala 中将其转换为？

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2009-05-31T15:21:16.673

首选技术是使用模式匹配。这使您可以优雅地处理所讨论的值*不是*给定类型的情况：

```
g match {
  case g2: Graphics2D => g2
  case _ => throw new ClassCastException
} 
```

该块复制了该`asInstanceOf[Graphics2D]`方法的语义，但具有更大的灵活性。例如，您可以为各种类型提供不同的分支，同时有效地执行多个条件转换。最后，您实际上并不*需要*在包罗万象的区域中抛出异常，您也可以返回`null`（或者最好是`None`），或者您可以输入一些没有`Graphics2D`.

简而言之，这确实是要走的路。它在语法上比 大一点`asInstanceOf`，但增加的灵活性几乎总是值得的。

* * *

## 回答 #2

> 赞同：227
> 
> 时间：2009-05-31T06:26:51.823

```
g.asInstanceOf[Graphics2D]; 
```

# .net - 如何以有限的权限动态编译和执行 C# 代码？

> ID：931464
> 
> 赞同：1
> 
> 时间：2009-05-31T06:26:50.030
> 
> 标签：.net, permissions

将代码保存到 temp 文件夹，使用 csc.exe 编译并动态加载程序集对我来说并不难，但是如何才能以有限的权限执行代码呢？

例如，我怎样才能禁止代码...

*   创建新线程。
*   做任何 I/O 操作。
*   授予更高的权限。
*   收集系统信息。
*   执行死循环（嗯，这与安全无关）。
*   使用过多的内存。
*   任何其他危险的事情...

欢迎任何信息（博客/文章/论文/手册...）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T06:36:05.253

您可能需要将程序集加载到您创建的不同 AppDomain 中，并为其提供您希望它拥有的权限。通常，加载到默认 AppDomain 的程序集将具有委派给该 AppDomain 的权限。通过创建另一个 AppDomain，您将完全控制 AppDomain 被授予的权限，这些权限会向下传播到加载到其中的程序集。

然而，需要注意的是，对加载到另一个 AppDomain 中的代码的调用需要进行编组，这会在一定程度上影响性能。

以下文章应该可以帮助您入门：

[http://blogs.msdn.com/shawnfa/archive/2004/10/25/247379.aspx](http://blogs.msdn.com/shawnfa/archive/2004/10/25/247379.aspx)

[http://blogs.msdn.com/shawnfa/archive/2004/10/22/246549.aspx](http://blogs.msdn.com/shawnfa/archive/2004/10/22/246549.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T08:14:50.560

有两种看待这个的方法；第一种是通过`AppDomain`单独的信任，jrista 对此给出了很好的回答。第二个是：不要编译任意/用户代码；-p 根据场景，您可能能够构建一个仅访问您乐于公开的功能的 DSL，然后编译*它*。我已经多次成功地使用了这种方法。这创建了一个非常受控的沙箱——唯一需要注意的是无限循环之类的东西，但如果你*真的*需要，即使是这样也可以修复。

所以我想真正的问题是：输入*必须*是 C# 吗？还是只是为了方便？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T09:15:51.450

IMO，开始是创建一个来宾用户帐户来运行该进程。然后执行其他步骤。

# cocoa - NSArray 到核心数据项

> ID：931466
> 
> 赞同：0
> 
> 时间：2009-05-31T06:27:03.460
> 
> 标签：cocoa, core-data, nsarray

我有一个方法可以读取 xml 文件并将 xml 节点存储在名为 *nodes 的 NSArray 中的某个 XPath 路径中。我想要做的是获取数组中的每个项目并将其添加到一个名为 Category 的核心数据实体，其属性为“name”。

我尝试了许多不同的方法来创建实体，但我不确定有效地做到这一点的正确方法。这是用于创建 NSArray 的代码，关于如何实现它的任何想法？（忽略 NSError，我将在最终版本中修复此问题）

```
- (IBAction)readCategories:(id)sender 
```

{

```
NSString *xmlString = [resultView string];

NSData *xmlData = [xmlString dataUsingEncoding: NSASCIIStringEncoding];

NSXMLDocument *xmlDoc = [[NSXMLDocument alloc] initWithData:xmlData options:nil error:nil];

//XPath

NSError *err=nil;

NSArray *nodes = [xmlDoc nodesForXPath:@"//member[name='description']/value/string" error:&err]; 
```

}

编辑 - 我的循环代码

```
NSArray *nodes = [xmlDoc nodesForXPath:@"//member[name='description']/value/string" error:&err];
int arrayCount = [nodes count];
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSXMLElement *categoryEl;
NSString *new = [catArrayController newObject];
int i;
for (i = 0; i < arrayCount; i++)
{
    [categoryEl = [nodes objectAtIndex:i]];
    [new setValue:[categoryEl stringValue] forKey:@"name"];
    [catArrayController addObject:new];
}
[pool release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T14:28:20.143

我是这样写的：

```
for (NSXMLElement *categoryElement in nodes) {
    NSManagedObject *newObject = [catArrayController newObject];
    [newObject setValue:[categoryElement stringValue] forKey:@"name"];
    [catArrayController addObject:newObject];
    [newObject release];
} 
```

首先，我使用的是 Objective-C 2.0 for-each 语法。这比使用索引变量更简单。我消除了`i`和`arrayCount`。

接下来，我拿出了你的`NSAutoreleasePool`. 循环中的所有对象都不会自动释放，因此它没有效果。（该`newObject`方法返回一个保留对象，按照惯例，它是`new`名称中带有单词的方法）这也是我`newObject`将其添加到数组控制器后释放的原因。由于我不会再在此方法中使用它，因此我需要释放它。

此外，您已将`new`（我将其重命名为`newObject`）定义为`NSString`. Core Data 对象始终`NSManagedObject`是`NSManagedObject`.

你的行`[categoryEl = [nodes objectAtIndex:i]]`不会编译。这是因为括号语法用于向对象发送消息。这是一个赋值语句，所以这里不需要括号语法。（这一行也不再需要，因为我已经将循环更改为使用 for-each 语法）但是，为了将来参考，`categoryEl = [nodes objectAtIndex:i];`它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T06:58:28.687

你有什么问题？除了循环遍历数组、为每个条目创建一个新的托管对象并设置正确的属性之外，它不应该有更多的东西。您可以使用 NSEntityDescription 的`-insertNewObjectForEntityForName:inManagedObjectContext:`方法创建托管对象。

# javascript - XMLHttpRequest.open，它适用于远程网站吗？

> ID：931468
> 
> 赞同：1
> 
> 时间：2009-05-31T06:29:33.253
> 
> 标签：javascript

我对此有点困惑。

XMLHttpRequest 是在远程 URL 上工作还是必须是本地文件？网络上的信息似乎混杂在一起。

根据 w3.org：XMLHttpRequest*对象可以被脚本用来通过 HTTP 以编程方式连接到它们的原始服务器。*

但我已经看到它用于访问非本地网页（在 vista 小工具中，例如用于 rss 提要）而不使用代理......

请赐教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T06:36:38.573

这取决于环境。如果您在常规网页上运行 JavaScript，XMLHttpRequest 将无法连接到任何其他站点。（这就是 w3.org 所说的，并且浏览器确实实现了这个限制。）但是，在某些情况下（例如 Vista 小工具和 Greasemonkey），可以通过 AJAX 请求连接到任何站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-03-19T05:15:02.793

在标准网页上，您不能但是在具有授权权限的应用程序中，您可以使用权限“http://*”设置的 chrome 扩展程序。在我看来，这对普通网页来说是一个愚蠢的限制，任何可以使用 iframe 完成的损坏/伤害都可以使用 iframe 完成，并且浏览器拒绝禁用它们（我认为早就应该这样做了）。

# javascript - 在 Javascript 中捕获表单提交的事件是什么？

> ID：931470
> 
> 赞同：10
> 
> 时间：2009-05-31T06:31:02.610
> 
> 标签：javascript, validation, dom-events

这里有几个问题：

*   我想知道我在表单提交时使用什么事件来执行一些 Javascript（进行一些验证）？
*   完成验证后，我该如何提交 Javascript 表单？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-31T06:38:26.793

假设您有一个名为 的表单`myForm`：

```
var form = document.getElementById('myForm'); 
```

要捕获提交：

```
try {
    form.addEventListener("submit", someFunction, false);
} catch(e) {
    form.attachEvent("onsubmit", someFunction); //Internet Explorer 8-
} 
```

注意：如果你想阻止表单提交，你将`someFunction`return false。

提交表格：

```
form.submit(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-31T06:58:40.603

您可以使用`addEventListener(event, callback)`，但 Internet Explorer 从未正确支持它。

IE`attachEvent(event, callback)`改为使用。

我强烈建议使用预构建的 addEvent 函数（那里有很多可用的）或 jQuery、Prototype、Mootools 等库，因为它们都内置了出色的事件处理函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-31T06:47:08.117

如果您使用 jquery，它有一个很好的内置表单提交事件挂钩，可以让生活变得非常轻松。查看以下内容：

[http://docs.jquery.com/Events/submit](http://docs.jquery.com/Events/submit)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-31T06:48:40.983

1) 您在寻找[OnSubmit](http://www.w3schools.com/jsref/jsref_onsubmit.asp)事件吗？

2) 您可以在 onsubmit 事件上调用 validate() 之类的函数，如果验证失败则返回 false。如果返回 false，则从 onsubmit 函数返回 false。

可能像，

```
<form name="test" OnSubmit = "return Submit()">

function Submit()
{
return Validate()
}

function Validate()
{
//Validation code goes here
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-12T02:19:40.207

我查看了 Serhiy 对 Sasha 帖子的评论。Serhiy 提供的 JsFiddle 示例很有趣，我想写一个描述 Serhiy 提到的行为的答案：

假设您有一个名为 的表单`myForm`：

```
var form = document.getElementById('myForm'); 
```

要在使用提交按钮 (<input type='submit' >) 时捕获提交：

```
try {
    form.addEventListener("submit", validationFunction, false);
} catch(e) {
    form.attachEvent("onsubmit", validationFunction); //Internet Explorer 8-
} 
```

注意：如果你想阻止表单提交，你将`validationFunction`return false。

通过 javascript 提交表单：

```
form.submit(); 
```

注意：如果您使用 <input type="button" onclick="form.submit()" />，则不会调用使用 attachEvent 添加的 onsubmit 事件处理程序。因此，您应该使用类似的东西：

<input type="button" onclick="if (validationfunction()) form.submit();" />

或者，如果您有一个按钮：

您可以添加 javascript 以附加到按钮的单击事件。var btnValidateAndSubmit = document.getElementById("btnValidateAndSubmit");

```
try {
    btnValidateAndSubmit .addEventListener("click", validationAndSubmitFunction, false);
} catch(e) {
    btnValidateAndSubmit .attachEvent("onclick", validationAndSubmitFunction); //Internet Explorer 8-
} 
```

最后，假设您正在处理用于编辑列表项的 SharePoint Web 表单，并且您希望将自定义验证添加到 Web 表单。您可以将以下 javascript 添加到 Web 表单，以将自定义验证添加到 OK 按钮的 onclick。

```
var oElements = document.getElementsByTagName("input");
for  (var i=0; i< oElements.length; i++)
{
   var elementName = oElements[i].getAttribute("Title");
   var elementType = oElements[i].getAttribute("type");
   var elementValue = oElements[i].value;

   if (elementType=="button" && elementValue=="OK") 
   {
    var okbutton = oElements[i];

   // alert("typeof okbutton.onclick = "+typeof okbutton.onclick);
    if (typeof okbutton.onclick == "function")
    {
        var previousfunction = okbutton.onclick;

        okbutton.onclick = function()
        {
            if (validateForm())
            {
                previousfunction();
            }
        };

    }
    else
    {
        var aspnetForm = document.getElementById("aspnetForm");
        aspnetForm.attachEvent("onsubmit",validateForm);

         okbutton.onclick = function()
        {
            if (validateForm())
            {
                aspnetForm.submit();
            }
        };
    }

    }
} 
```

# delphi - 替换连接的数据包

> ID：931471
> 
> 赞同：-1
> 
> 时间：2009-05-31T06:31:17.070
> 
> 标签：delphi, connection, replace, packet, packets

如何替换连接数据包中的字符串？我用德尔福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T07:52:52.883

[在这个主题](http://forum.madshi.net/viewtopic.php?t=90&postdays=0&postorder=asc&start=0&sid=a3319628d969c61c2e981314d7743f92)中搜索appsniff（带有源代码），它挂钩了各种winsock函数并输出正在进行的和传入的数据包。在 hooker 函数中，您可以在将数据包传递给真正的 winsock 函数之前更改数据包。但这是一项非常复杂的任务，它很容易使应用程序崩溃并产生 BSOD。

# javascript - 新手：设置断点后 JavaScript 停止执行

> ID：931472
> 
> 赞同：1
> 
> 时间：2009-05-31T06:31:28.867
> 
> 标签：javascript, ajax

在一个 HTML 页面中，我有一个访问服务器的 JavaScript 函数 checkUpdates()。我用这条线让这个函数每 5 秒运行一次：

```
window.setInterval("checkUpdates()", 5 * 1000); 
```

在 Firebug 中，我在 checkUpdates() 函数中放置了一个断点。但是，在代码执行在此断点处停止后，按“继续”*有时*不会执行任何操作。我页面上的所有 JavaScript 似乎都已停止。

这与上面的代码行有关系吗？当我处于断点时，每 5 秒执行一次 checkUpdates() 的循环是否会暂停，还是会继续在后台运行？我想知道是否等待超过 5 秒间隔按“继续”是导致事情中断的原因。

旁注：总的来说，我是 Javascript 和事件驱动编程的新手，所以我对一些范例仍然有些模糊，例如代码是顺序执行还是并发执行。任何有关阅读材料的指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T07:41:11.300

当我处于断点时，每 5 秒执行一次 checkUpdates() 的循环是否会暂停，还是会继续在后台运行？

是的，它确实**停止**了一切！

但很快你点击“继续”或“播放”它会恢复并继续在同一个地方中断（我猜你是在**checkUpdates**方法中中断。

使用[Firebug](http://www.getFirebug.com)来跟踪这一点，它非常容易使用。

我刚刚制作了一个简单的 HTML 文件，因此您可以看到它正在运行

[这里还有一个截屏视频](http://www.balexandre.com/temp/showFlash.aspx?swf=2009-05-31_0936_soAnswer.swf&w=1000&h=620)。

代码： http: [//jsbin.com/izazu](http://jsbin.com/izazu) <-- 请记住，您可以在 url 前面添加 /edit 进行编辑**。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T06:37:49.913

> 当我处于断点时，每 5 秒执行一次 checkUpdates() 的循环是否会暂停，还是会继续在后台运行？

我猜它会继续运行。

> 我想知道是否等待超过 5 秒间隔按“继续”是导致事情中断的原因。

这是我的第一个猜测。测试很容易 - 尝试将时间间隔设置为 500 秒。

# iphone - 导航视图控制器问题

> ID：931473
> 
> 赞同：1
> 
> 时间：2009-05-31T06:31:36.103
> 
> 标签：iphone, navigation, controller

以下是我要实现的内容：

1.  我的应用程序的主屏幕是 UITableView。表格视图中的每一行都是一个类别，当您单击该行中的详细信息披露按钮时，您可以在类别详细信息视图中看到该类别下的一堆项目。

2.  现在在主屏幕中，我单击导航栏中的“+”按钮来创建一个新类别。（新类别将成为表格视图中的新行）。然后该应用程序将我带到“添加类别”视图。（我使用了presentModalViewController）

3.  在“添加类别”视图中，我设置了一些内容，然后单击“保存”按钮以关闭“添加类别”视图。（我用了dismissModalViewControllerAnimated）

4.  通常在我点击“保存”按钮后，应用程序会带我回到主视图，我会在表格中看到一个新行。

5.  但这不是我想要的，我想要的是 - 在我点击“保存”按钮后，“添加类别”视图将被关闭但不会返回到主视图。相反，我将看到新创建的类别的详细信息，以便我可以继续在此类别下添加项目。结果就像“我返回主视图，然后单击新创建的行（类别）的详细信息披露按钮”。

6.  有谁知道如何实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T07:19:54.087

如果您使用`presentModalViewController`和它对应的`dismissModalViewControllerAnimated`，那么您将返回到您发出初始`presentModalViewController`消息的视图控制器。

相反，您可能希望将负责添加新类别的视图控制器推入堆栈，完成后，您只需将负责显示该类别所有项目的视图控制器推入堆栈。因此，您应该使用

```
- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T19:05:07.390

您可以通过将一个屏幕与另一个屏幕进行一点分离来做到这一点：

- 为您的类别创建模式对话框创建自定义委托和协议。像这样简单的东西：

```
@protocol CategoryCreationProtocol
- (void) categoryAddDone:(NSString *)category;
- (void) categoryAddCancelled;
@end
...

@interface CategoryCreationDialog : UIViewController {
...
    id<NSObject, CategoryCreationProtocol> categoryDelegate;
}

@property (assign) id< CategoryCreationProtocol, NSObject> categoryDelegate; 
```

- 当用户点击“保存”按钮时，在模式对话框中，关闭视图控制器后，调用委托方法：

```
if (categoryDelegate && [categoryDelegate 
        respondsToSelector:@selector(categoryAddDone:)])
            [categoryDelegate categoryAddDone:newCategory]; 
```

`Cancel`此外，按钮也有类似的东西。

- 您的主控制器实现该`categoryAddDone`方法并将自己设置`categoryDelegate`为模态对话框。

- 在运行时，当用户点击时，`Save`会调用委托方法，以便通知您的主视图发生了某些事情，并且它可以将正确的视图推送到位，甚至跳转到正确的类别。

- 在您的情况下，一旦类别创建完成，主视图控制器就会收到通知，因此它可以释放类别创建对话框并将类别详细视图推送到堆栈中。用户看到模态对话框消失并直接滑入详细视图。

- 一般来说，使用委托/协议来推送导航控制器和模式对话框是一种非常方便的模式，可以制作解耦和可重用的视图。通过这种方式，它们可以从不同的地方调用。为了使其保持一致，您可能还希望`show`在每个模态对话框和调用者可以调用的推送视图控制器上都有一个方法。这样，就有了一种一致的进入方式和一种一致的方式来通知用户已完成它。

# c++ - 查找函数名称并计算其 LOC

> ID：931476
> 
> 赞同：4
> 
> 时间：2009-05-31T06:34:16.363
> 
> 标签：c++, string

所以你知道了，这是我被分配的一个项目。我不是在寻找代码中的答案，而是寻找一个方向。

我被告知要做的是浏览一个文件并计算实际的代码行数，同时记录函数名称和函数的各个代码行。我遇到的问题是在从文件中读取以确定该行是否是函数的开头时确定一种方式。

到目前为止，我只能想到可能有一个数据类型（int，double，char等）的字符串数组，在行中搜索然后搜索括号，然后搜索没有分号的情况（所以我知道这不仅仅是函数的声明）。

所以我的问题是，我应该这样做吗，还是有其他方法可以推荐？

我将计算的代码将使用 C++。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-31T06:44:28.060

想到了三种方法。

1.  使用正则表达式。这与您的想法非常相似。寻找看起来像函数定义的行。这是相当快的事情，但可能会在很多方面出错。

    ```
    char *s = "int main() {" 
    ```

    不是函数定义，但肯定看起来像一个。

    ```
    char
    * /* eh? */
    s
    (
    int /* comment? // */ a
    )
    // hello, world /* of confusion
    { 
    ```

    是一个函数定义，但看起来不像一个。

    好：写得很快，即使遇到语法错误也能工作；坏：很容易在看起来像（或看起来不像）“正常”情况的事情上失火。

    变体：首先通过例如 GNU 缩进运行代码。这将解决一些（但不是全部）失火问题。

2.  使用适当的词法分析器和解析器。这是一种更彻底的方法，但您可能能够重用开源词法分析器/解析器（例如，来自 gcc）。

    好：将 100% 准确（永远不会失火）。坏：缺少一个分号，它会产生错误。

3.  看看你的编译器是否有一些可能有帮助的调试输出。这是 (2) 的变体，但使用编译器的词法分析器/解析器而不是您自己的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-31T06:47:09.207

您的想法可以在 99%（或更多）的情况下发挥作用。只有真正的 C++ 编译器才能做到 100%，在这种情况下，我将在调试模式下编译 ( `g++ -S prog.cpp`)，并从程序集输出的调试信息 () 中获取函数名和行号`prog.s`。

我对 99% 解决方案的想法：

*   忽略注释和字符串。
*   记录您忽略预处理器指令 ( `#include`, `#define`, `#if`)。
*   顶层`{`和之间的任何内容`}`都是函数体，除了`typedef`, `class`, `struct`,`union`和.`namespace``enum`
*   如果你有`class`,`struct`或`union`，你应该在里面寻找方法体。
*   函数名有时很难找到，例如在`long(*)(char) f(int);`.
*   确保您的解析器使用模板函数和模板类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-31T06:47:47.413

对于记录函数名称，我使用[PCRE](http://www.pcre.org/)和正则表达式

```
"(?<=[\\s:~])(\\w+)\\s*\\([\\w\\s,<>\\[\\].=&':/*]*?\\)\\s*(const)?\\s*{" 
```

然后过滤掉“if”、“while”、“do”、“for”、“switch”等名称。请注意，函数名称是 (\w+)，第 1 组。
当然，这不是一个完美的解决方案，而是一个很好的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-31T06:50:10.060

找到一个不错的 SLOC 计数程序，例如[SLOCCounter](http://www.dwheeler.com/sloccount/)。您不仅可以计算 SLOC，而且还可以比较结果。（更新：这是一个[很长的列表](http://www.chris-lott.org/resources/cmetrics/)。）

有趣的是，C/C++ 程序中非注释分号的数量是一个不错的 SLOC 计数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-31T06:50:19.013

我觉得手动进行解析将是一项相当艰巨的任务。我可能会使用现有的工具，例如[RSM](http://msquaredtechnologies.com/)将输出重定向到 csv 文件（假设您在 Windows 上），然后解析 csv 文件以收集所需的信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-31T07:34:55.977

编写一个shell脚本来做到这一点怎么样？也许是一个 AWK 程序。

# .net - Msbuild新手需要入门

> ID：931478
> 
> 赞同：5
> 
> 时间：2009-05-31T06:36:35.437
> 
> 标签：.net, msbuild, release-management, build-management

我们在工作中维护一个用 vb/c# .net 开发的中型 windows 应用程序。现在这个应用程序的构建和部署过程仍然是手动的。我决心使用我现在还不知道的 MSBuild 使这个过程自动化。

我们的应用程序有一个简单的构建结构，一组项目已经分为四个解决方案（.sln），只需要按顺序构建四个 sln。然后将一个项目（这是要构建的最后一个 sln 的一部分）发布到一个目录。这就对了。一个简单的过程已经花费了 30 分钟的手动构建时间，我很确定这可以在至少 1/4 的时间内使用 msbuild 完成而无需手动干预。

我所有的目标都设置得很好，我开始在网上寻找 MSBuild 资源来完成我的流程，但可能会环顾许多事情让我感到困惑。对于我的简单场景，需要一个关于如何开始以及从哪里开始的指针或一个很好的解释。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T06:59:50.367

这听起来像是一个非常容易编写的脚本。即使是批处理文件也可以：

```
msbuild \path\to\first.sln /p:Configuration=Release
msbuild \path\to\second.sln /p:Configuration=Release
msbuild \path\to\third.sln /p:Configuration=Release
msbuild \path\to\fourth.sln /p:Configuration=Release
调用部署
```

当然，最好有一个运行的服务器，比如[CruiseControl.NET](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET)，它提供了一个进入构建状态和历史记录的 Web 界面。

在 MS Build 中，调用者有两个主要控制点：目标及其属性。Target 是要编译的内容、资源、编译、部署等。 Properties 控制如何构建 Target。

您可以使用**Configuration**属性控制配置（见上文）。如果您打开 *.*proj 文件，您会注意到`PropertyGroup`元素。这些可以通过命令行使用`/p`arg 进行设置。

以下是两个 args 的规格：

```
/target:<targets>  Build these targets in this project. Use a semicolon or a
                 comma to separate multiple targets, or specify each
                 target separately. (Short form: /t)
                 Example:
                   /target:Resources;Compile

/property:<n>=<v>  Set or override these project-level properties. <n> is
                 the property name, and <v> is the property value. Use a
                 semicolon or a comma to separate multiple properties, or
                 specify each property separately. (Short form: /p)
                 Example:
                   /property:WarningLevel=2;OutDir=bin\Debug\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T07:10:01.470

[这是一个很好的指南](http://dotnet.org.za/cjlotz/archive/2008/01/15/continuous-integration-from-theory-to-practice-2nd-edition.aspx)，其中包含有关 MSBuild、持续集成和 CuriseControl.NET 的大量重要信息。绝对是一个很好的起点。

# ocaml - ocaml 中的 {X with value}

> ID：931496
> 
> 赞同：30
> 
> 时间：2009-05-31T06:47:56.663
> 
> 标签：ocaml

[我在Yacfe 示例](http://aryx.kicks-ass.org/~pad/software/project-yacfe/simple_zero_to_null.ml.html)中看到了以下函数调用：

```
 Visitor_c.vk_program { Visitor_c.default_visitor_c with
    Visitor_c.kexpr = (fun (k, bigf) exp -> 
      match Ast_c.unwrap_expr exp with
      | Binary(e1, Logical (Eq), (((Constant(Int("0")) as _e2),_t),ii)) -> 

          (match Ast_c.get_onlytype_expr e1 with 
          | Some (qu, (Pointer _,_ii)) -> 

              let idzero = Common.tuple_of_list1 ii in
              idzero.cocci_tag := 
                Ast_cocci.MINUS (Ast_cocci.NoPos, [[null_addon]]), [];

          | _ -> k exp
          )
      | _ -> k exp
    );
  } ast; 
```

我可以看到一个函数调用，记录初始化为第一个参数，`ast`第二个参数。

我不熟悉的是表单的语法：

```
{Visitor_c.default_visitor_c with Visitor_c.kexpr = some_value;} 
```

这是什么意思？我知道一个记录可以初始化为`{name=value;name=value;...}`，但我不熟悉`{X with name=value}`，你能告诉我它是什么意思吗？

[除了以下内容，我在Ocaml 手册](http://caml.inria.fr/pub/docs/manual-ocaml/manual010.html#toc42)中找不到任何关于合法记录值初始化的内容：

> 6.2.3 记录
> 
> 记录值是标记的值元组。写入的记录值 { field1 = v1; ……；fieldn = vn } 将值 vi 与记录字段 fieldi 相关联，因为 i = 1 … n。当前实现支持多达 222 - 1 个字段（4194303 个字段）的记录。

如果在您的回答中包含对 OCaml 手册中相关部分的参考，我会很高兴。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-05-31T07:38:16.267

这有时被称为“记录更新”或“功能更新”或类似的东西。它评估为与 X 相同类型的新记录，并且其字段初始化为与 X 中的相同，除了“with”之后列出的那些，它们被初始化为那些给定的值。

它对于不可变的记录很有用，作为一种方便的方式来获取这样的记录并更改其中的一两件事（在命令式语言中，您通常会更改字段），而不必列出所有未更改的字段.

它在 OCaml 手册[第 6.7.3 节](http://caml.inria.fr/pub/docs/manual-ocaml/expr.html#htoc69)中进行了描述，向下滚动到“记录”，第二段。

对于熟悉 Haskell 的人，OCaml 语法

```
{ expr with field1 = expr1 ; ... ;  fieldn = exprn } 
```

与 Haskell 语法相同

```
expr { field1 = expr1 , ... ,  fieldn = exprn } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-02-16T20:57:19.423

为了更正之前的回复，新记录并不总是与旧记录属于同一类型。例如，你可以有这样的东西：

```
type 'a t = {
  id : int;
  value : 'a;
}
let old_t = { id = 3; value = "foo" }
let new_t = { old_t with value = 3 } 
```

结果，`old_t`is 属于 type `string t`，而`new_t`is 属于 type `int t`。

# c# - 用 c++ 或 c# 玩游戏？

> ID：931502
> 
> 赞同：14
> 
> 时间：2009-05-31T06:50:39.997
> 
> 标签：c#, c++

编写游戏项目的最佳语言是什么，为什么？

为什么游戏编程世界被c++主宰？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-31T06:58:47.967

这是一个很难回答的问题。在大多数情况下，C++ 是一种“更好”的游戏编程语言，因为它可以让您直接控制内存管理，从而有更多选项来微调性能。再加上 C++ 的历史比 C# 长，这导致了它目前在游戏行业中的主导地位。

然而，这些天来，随着 .NET 平台和 C# 变得如此成熟，很难将其排除在游戏编程领域的强大竞争者之外。我认为在不久的将来尤其如此，因为 .NET 4.0 和 C# 4.0 将带来一个全新的多线程和并发编程时代，这可能会为其平台带来一些巨大的性能提升。随着多核 CPU 席卷桌面计算世界，而大规模核 CPU 仅落后于 .NET/C# 4.0 一小步，我认为使用 .NET 和 C# 4.0 开发多线程应用程序的便利性将使 C++ 获得一席之地。钱。

最后，这将完全取决于您认为您需要对内存管理进行多少控制，以及这种控制是否值得在大型并行游戏领域付出努力。如果您需要这种控制，并且认为您可以处理用 C++ 编写高度并行游戏的工作，那么您可能会从中有所收获。否则，我会说 C# 4.0 会是更好的选择。

* * *

## 2011 年更新：

可能应该指出的是，从我最初写这篇文章的两年后，Silverlight 游戏，尤其是 Windows Phone 7 上的 Silverlight，已经成为一个大型且快速增长的平台，在这个平台上开发游戏，通常是非常先进的游戏。自 2010 年 11 月该平台首次推出以来，WP7 上的游戏已经呈爆炸式增长，并且已经 WP7 为其开发的游戏数量超过了竞争平台。鉴于移动设备的普及和在其上玩游戏的流行，我认为这有力地表明了 C# 作为一种游戏开发语言的力量和能力。相当多的 WP7 游戏是完全 3D 图形密集型游戏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-31T08:06:02.247

对于商业/更大的游戏项目，**C++**可能是最好的选择。但是，如果您正在考虑制作较小的独立类型游戏，那么没有什么能阻止您使用**C#**甚至**Java**。

我用 C++ 做了几个小游戏，一个用 C# 使用[XNA 框架](http://en.wikipedia.org/wiki/Microsoft_XNA)，主要是为了好奇。目前我正在使用 Java 和[LWJGL](http://www.lwjgl.org)（*轻量级 Java 游戏库*）开发平台游戏。你猜怎么着？它工作得非常好，而且我几乎免费获得跨平台兼容性！我使用 Java 开始这个项目的原因是想看看我是否可以使用 Java 而不是我通常使用的 C++ 创建一个不错的 OpenGL 加速游戏。到目前为止，它对我来说非常好用，我真的很惊讶。=) 老实说，我已经对 C++ 感到有些厌倦了，目前使用 Java 编码对我来说效率更高（非常感谢[Eclipse](http://www.eclipse.org) IDE！）。

因此，对于较小的游戏，您绝对可以使用 Java 或 C# 取得成功，无需为 C++ 操心，除非您正在做的事情需要 100% 的可能性能。XNA 可能是最容易上手的选择，尽管就我自己而言，我很可能不会再次使用它，因为它基本上只是 Windows（加上 Xbox 360）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-31T06:53:33.830

游戏是您可以运行的一些硬件密集型应用程序。人们用 C++ 编写游戏是为了提高性能，尽管现在有一些游戏是用 C# 编写的。

这个问题之前有人问过，查看以下帖子了解更多详情： [C#/.NET 作为新标准游戏开发平台的可行性？](https://stackoverflow.com/questions/356068/viability-of-c-net-as-the-new-standard-game-dev-platform) [https://stackoverflow.com/questions/19642/suggested-gaming-platform-to-learn-direct-xc-open-gl-or-xna](https://stackoverflow.com/questions/19642/suggested-gaming-platform-to-learn-direct-x-c-open-gl-or-xna)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-31T06:59:46.577

让游戏开发者从汇编语言转向 C 花了数年时间，然后又花了更多年时间让整个行业转向 C++。原因总是一样的……“C 会太慢”，“对象会太慢”。对代码（引擎、以前的游戏等）和 C++ 行业人才的巨大投资。这需要很长时间才能改变——就像过去一样。总有一天，游戏将以托管代码开发，但这需要一些时间。

同时，还有[为 .NET 编写的 C# 引擎](http://axiomengine.sourceforge.net/mediawiki-1.13.2/index.php/Main_Page)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-31T11:54:21.147

我想你会发现，当你创建自己的游戏时，CPU 瓶颈（语言选择对你有任何影响的唯一方面）是你最不需要担心的事情。更容易被 GPU 阻塞。见鬼，今天最少有 2 个内核，如果你能达到 100% 的 CPU 使用率，我会觉得令人印象深刻，因为这需要一个完美的工作负载划分来利用 CPU 的 2 个或 4 个内核。

一般来说，运行游戏（大概是用 C++ 编写的）对我来说太常见了，以至于看到它最多使用我的 CPU 的 50%-60%。然后，您能否真正谈论您使用的语言的瓶颈，或者使用的算法的瓶颈，这些瓶颈不允许您在超过 1 个 CPU 内核上进行扩展？因此，即使在遇到单核限制的情况下，仍然有可能（理论上）通过优化算法来使性能翻倍，然后才能真正说自己受到语言的限制。

随着 8 核、16 核和 32 核的出现，这只会在未来增加。你*真的*不想拥有一款只能使用 32 个核心中的一个的游戏。

业界没有使用 C# 的真正原因是：对于在 C++ 代码上投入大量资金的游戏工作室来说，没有理由转向 C#。不仅是他们的代码，而且他们的开发人员已经非常擅长 C++，所以为了“易用性”而切换到 C# 是很奇怪的，而这实际上意味着要克服许多新的挑战以及重写现有代码需要大量资金。毕竟，您获得了仅在 PC（支持 Mono for Linux）和 Xbox 360 上支持的新代码。没有 PS3，没有 Wii。所以你只是为了一点点收益而限制了自己。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-31T06:56:10.407

如果你使用 C++，你有一个更大的代码库，尽管这对于大多数游戏来说都无关紧要（除了 3D 游戏或需要像物理引擎这样的库的游戏）。C# 可能更容易编写，具体取决于您对它有多少经验（或者您对 C++ 的经验有多少）。

还可以考虑使用某种游戏创建工具，例如 XNA Game Studio 或类似工具，它们通常可以为您提供各种常规帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-31T09:33:27.377

“性能”是一条红鲱鱼。是的，游戏几乎是大多数消费者会运行的最苛刻的应用程序。但是，大部分繁重的工作都可以通过专用硬件完成，这将在一周中的任何一天击败任何语言的软件解决方案。Flash 游戏的普及应该足以证明，在大多数情况下，我们有性能需要消耗（现在我们有了一些不错的实现，我想我们很快就会看到游戏也出现在 Javascript 中）。

我认为只是许多其他语言被标榜为以业务为中心、学术或统计，而开发人员总体上并没有真正觉得有必要挑战这些假设。

# php - 如何在 Adob e AIR 应用程序中通过 JavaScript 将 XML 数据发布到 URL？

> ID：931509
> 
> 赞同：1
> 
> 时间：2009-05-31T06:55:53.170
> 
> 标签：php, javascript, xml, air

我正在编写一个应用程序，它从 URL 下载 XML 字符串并将`POST`其发送到另一个 URL（设置为处理传入的“ `XML`”字段）。我的第一部分是正确的 - 它下载 XML，我可以`alert()`做到这一点，但我无法弄清楚如何将`POST`这些数据传输到服务器。

```
function pull() {
    var myLoader = new air.URLLoader();
    var myRequest = new air.URLRequest('http://something/something.xml');
    myLoader.addEventListener(air.Event.COMPLETE, pulled);
    myLoader.load(myRequest);
}

function pulled(evt) {
    if (evt.target.bytesTotal>0) {
        // alerting shows the full string just fine
        alert(evt.target.data);

        var myLoader = new air.URLLoader();
        var myRequest = new air.URLRequest('http://someplace/push.php');
        myRequest.method = air.URLRequestMethod.POST;
        // myVars = new air.URLVariables("xml="+evt.target.data); // 
        // alert(evt.target.data.toUpperCase());
        myRequest.data = "xml="+evt.target.data; // myVars;
        myLoader.dataFormat = air.URLLoaderDataFormat.TEXT;
        myLoader.addEventListener(air.Event.COMPLETE, pushed);
        myLoader.load(myRequest);
    }
} 
```

我将第二台服务器 PHP作为变量`echo`的内容`xml`，但我无法获得 XML 字符串的确切内容。我正在用`myRequest.data`和/或`dataFormat`位做一些事情。

有人能解决这个问题吗？我知道这可能是一件简单的事情，但我现在无能为力。

这是我的第一个 AIR 应用程序。

另一个相关的问题（或子问题）是......

```
alert(evt.target.data);               // shows an alert box with the XML
alert(typeof evt.target.data);        // shows String
alert(evt.target.data.toUpperCase()); // shows the xml converted to upper case
alert(encodeURI(evt.target.data));    // shows up blank.
alert(escape(evt.target.data));       // shows up blank. 
```

为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T11:47:49.507

该错误似乎是您将参数分配给“数据”的方式...使用 URLVariables。

```
var params:URLVariables = new URLVariables();
params.[name of parameter] = [value]; 
```

--- 就像你的例子中的 params.xml = (YOUR XML) ...

```
// uses the dynamic object to add the 'xml' property to 'params' at runtime.
params.xml = evt.target.data 
```

然后将您的 request.data 更改为 request.data = params;

-- URLVariables 是动态的 - 所以你可以添加我上面描述的属性。

对于一个基本示例 - 比我在这里的更完整：http: [//livedocs.adobe.com/flex/3/html/help.html ?content=data_access_2.html](http://livedocs.adobe.com/flex/3/html/help.html?content=data_access_2.html)

# asp.net-mvc - MVC：如何处理具有许多子实体的实体？

> ID：931521
> 
> 赞同：9
> 
> 时间：2009-05-31T07:03:02.797
> 
> 标签：asp.net-mvc

在 ASP.NET MVC 的当前示例中，我看到了非常基本的实体，带有简单的 CRUD 方法。
但我不确定如何处理更高级的模型。让我举个例子吧：

我们有一个车库网站。车库有：

*   库存与`carparts`
*   `Employees`
*   `Customers`
*   `Cars`包括所有在/曾经在车库里的汽车

现在让我们来看看`car`，汽车可能有一个在`employees`汽车上工作的集合（派生自原始`employee`类，添加了一些将他绑定到汽车的额外道具），一个`carparts`已被替换的集合（也是派生的，例如添加SerialNr 和`ReplacementDate`prop) ，当然还有`customer`拥有汽车的客户的道具。

现在`rest`我想看到以下内容：

```
/cars/423 [get]                  //show car # 423
/cars/423/edit [get]             //shows the edit form (ajax enabled, so also shows the other props)
/cars/423/carparts [get]          //gets the carparts inside the car
/cars/423/carparts/32/edit [post] //updates that specific carpart inside the specific car
/cars/423/employees [get]         //gets the employees who worked on the car
/inventory [get]
/inventory/1234/edit [get]        //gets the update form for carpart with ID 1234                   
/employees [get]                  //gets all the employees in the company 
```

那么我将如何构建我的控制器呢？我应该为 中的子元素添加所有这些 CRUD 方法`CarsController`吗？是不是因为有几十种方法，所以控制器很胖（这个模型过于简化，汽车的父子关系更多）？或者我应该创建一个`EmployeesInCar`控制器（似乎很糟糕）......非常感谢。

**编辑：**
首先，这个例子只是假设的，只是一个例子。
如果我遵循这个建议，我将有一个`CarController`只处理汽车的。而我的 PartsController 只会处理 Parts。但是我们有两组`Part`s，一组是通用的（用于库存）；我们有一个`Part`inside a car，它源自一般的，但添加了 和 等`SerialNumber`属性`ReplacementDate`。
所以我的 Parts 控制器变得非常胖，例如让我们调用实体：GeneralPart（库存中）和 SpecificPart（派生类，具有额外的属性）

```
Index -> Returns all GeneralParts in inventory.
IndexByCar(int id) -> Return all SpecificParts by Car.
etc. etc. 
```

因为每个动作都处理一般部分或特定部分。对于员工也是如此，我们有基本的员工类和一个具有额外属性的特定类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T07:10:20.783

如果您希望使用示例中提供的各种路径，那么听起来您应该学习如何在 .NET 3.5 中使用路由引擎。您应该能够使用所需的各种 url，但您需要创建几个自定义路由，并且可能需要一个自定义路由处理程序来完成它。.NET 3.5 中的路由引擎非常灵活，并不是专门为 MVC 设计的……它实际上非常通用，可以提供非常广泛的、可能无限范围的 url 重写。

我住的地方有点晚了，所以我试图写的例子还没有形成。:P 可以说，自定义路由处理程序和一些新的路由映射应该可以让您到达您需要的地方。

编辑：这可能会有所帮助：

[http://codingcockerel.co.uk/2008/05/26/custom-routing-for-asp-net-mvc/](http://codingcockerel.co.uk/2008/05/26/custom-routing-for-asp-net-mvc/)

编辑 2：我之前省略了控制器。路由只是让您能够使用所需的各种 URL。这是一件好事……您提出的 URL 类型将长期提供更好的 SEO 体验。至于组织你的控制器，我建议保持简单：

```
/Controllers/CarsController.cs
/Controllers/PartsController.cs
/Controllers/EmployeesController.cs
/Controllers/InventoryController.cs 
```

您的路由将匹配您的 url 模式，并将它们转换为到您的控制器的正确路由，获取 ID 并将它们与您的操作参数匹配。

编辑 3：

所以，既然我更全面地理解了你的问题，我希望我能更好地回答它。一般来说，我认为控制器应该与您的实体 1:1 映射。如果您有一个 GeneralPart，那么您应该有一个专用于管理通用部件的控制器。如果您有 CarPart，那么您应该有一个专用于管理汽车零件的控制器。如果 CarParts 是 GeneralParts，并且在某些情况下它们的行为类似于 GeneralParts，那么最好将这些管理方面放在 GeneralPartsController 上，除非该管理处理 CarPart 的任何特殊属性......在这种情况下，管理应该被委派到 CarPartsController。多态性如何在控制器组织中发挥作用是一种优雅的方式，以及“是”关系如何允许您重用控制器来管理多种类型。

老实说，您有一个相当复杂的场景，我在使用 ASP.NET MVC 时没有直接遇到过。我尽量避免这种情况，因为它们会引发像这样的复杂问题，而这些问题的答案往往是主观的。最终，您应该以一种对它们的使用方式、它们如何映射到您的实体以及它们如何组织您有兴趣公开的行为具有逻辑意义的方式来组织您的控制器。有时，将所有控制器映射到单个实体是不合逻辑的。有时您需要一个“复合”控制器来处理同时对多个实体或实体图进行操作的操作。在这些情况下，最好让控制器专门针对那些特定的行为群体，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T07:44:50.387

您的设计最初应该关注实体。你有`car`和。为其中的每一个编写一个控制器。这将为您提供基本路线：`employees``inventory`

*   `/cars/{action}/{id}`
*   `/employees/{action}/{id}`
*   `/inventory/{action}/{id}`

从这里您应该能够使用具有以下结构的[自定义路由约束编写新路由：](http://nayyeri.net/blog/custom-route-constraint-in-asp-net-mvc/)

```
/cars/{id}/part/{id}/ 
```

这也比`/cars/{id}/carpart/{id}`因为 car in 这个词`carpart`是多余的要好一些。`/car/.../part/`表示该零件用于汽车。

尽早为 URI 设计考虑这些问题非常重要，因为稍后更改 URI 设计会破坏搜索引擎索引、书签和链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T13:17:56.377

您的“CarPart”实体（CarPartModel 类）可以处于“库存”状态（StockCarPartModel 类：CarPartModel）或“替换”状态（ReplacedCarPartModel 类：CarPartModel）。然后：

*   GET 到 /carpart/index 应该返回所有实体 (CarPartModel)
*   GET 到 /carpart/replaced 应该返回更换的零件 (ReplacedCarPartModel)
*   GET 到 /carpart/bycar/{id} 应该返回与特定汽车相关的零件 (ReplacedCarPartModel)
*   GET 到 /carpart/inventory 应该返回库存零件 (StockCarPartModel)

这一切都由“默认”路由处理，并且在您的 CarPartController 中您有操作：

```
public ActionResult Index() { ... }
public ActionResult Replaced() { ... }
public ActionResult ByCar(string carId) { ... }
public ActionResult Inventory() { ... } 
```

我认为您的控制器并不胖。控制器处理模型继承是正常的。主要的复杂性在于您的 ViewModels 和 Views

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T07:45:56.717

您不需要在控制器中进行太多事情。
将控制器视为一个类，它决定了用户想要什么以及最终应该看到什么。

借助您在 Global.asax 文件中定义的路由，用户想要什么由 ASP.NET MVC 引擎自动为您确定。然后控制器应该根据他/她的请求决定用户应该看到什么视图。

因此，对于您的应用程序，事情会是这样的：

全球.asax

```
routes.MapRoute("Cars", "cars/{id}/{action}",
    new { controller = "Cars", action = "Details", id = "" } );
//This route should give you the URLs you listed on your question 
```

汽车控制器.cs

```
public class CarsController : Controller {

    //this action will be called for URLs like "/cars/423"
    //or /cars/423/details
    public ActionResult Details(int id) {
         //You would most likely have a service or business logic layer
         //which handles talking to your DAL and returning the objects 
         //that are needed for presentation and likes
         Car car = SomeClass.GetCar(id);
         if (car == null) {
             //if there's no car with the ID specified in the URL
             //then show a view explaining that
             return View("CarNotFound");
         }
         //if there's a car with that ID then return a view that
         //takes Car as its model and shows details about it
         return View(car);
    }

    //this action will be called for URLs like /cars/423/edit
    [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult Edit(int id) {
        //again get the car, show an edit form if it's available for editing
    }

    //this action will be called for URLs like /cars/423/edit too
    //but only when the request verb is POST
    [AcceptVerbs(HttpVerbs.Post), ActionName("Edit")]
    public ActionResult Save(int id) {
        //save the changes on the car, again using your business logic layer
        //you don't need the actual implementation of saving the car here
        //then either show a confirmation message with a view, 
        //saying the car was saved or redirect the user to the 
        //Details action with the id of the car they just edited
    }

} 
```

所以基本上这就是你为这样的应用程序设置控制器的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-05T12:21:27.580

我建议对 ASP .NET MVC 使用 Restful Routing：

[https://github.com/stevehodgkiss/restful-routing](https://github.com/stevehodgkiss/restful-routing)

# winapi - 如何在没有监控线程或进程的情况下使用 C++ 快速获取目录是否已更改？

> ID：931525
> 
> 赞同：3
> 
> 时间：2009-05-31T07:05:24.820
> 
> 标签：winapi, directory

更改包括添加或删除目录中的文件，或更改其子目录。是否有任何 Windows API 可以进行这样的更改？我没有线程或进程来监视文件系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T08:02:27.793

*   [FindFirstChangeNotification](http://msdn.microsoft.com/en-us/library/aa364417(VS.85).aspx)
*   [读取目录更改W](http://msdn.microsoft.com/en-us/library/aa365465(VS.85).aspx)

也看看这个[问题](https://stackoverflow.com/questions/56682/how-to-see-if-a-subfile-of-a-directory-has-changed)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T07:28:45.427

我会尝试[CDirectoryChangeWatcher](http://www.codeproject.com/KB/files/directorychangewatcher.aspx)，它将 Windows ReadDirectoryChangesW 功能包装起来，因此更易于使用。

# c# - C# - 为什么要实现标准异常构造函数？

> ID：931533
> 
> 赞同：40
> 
> 时间：2009-05-31T07:10:31.890
> 
> 标签：c#, exception, coding-style

来自 MSDN，代码分析警告 CA1032：

```
异常类型必须实现以下构造函数：
```

*   公共新异常（）
*   公共新异常（字符串）
*   公共新异常（字符串，异常）
*   受保护的或私有的 NewException(SerializationInfo, StreamingContext)

我了解序列化构造函数背后的目的，但“要求”其他人背后的理由是什么？为什么我不应该只定义对使用我的异常有意义的构造函数？如果我不想在不传递消息的情况下抛出 MyException 怎么办——为什么要定义无参数构造函数？如果我希望 MyException 有一个 int 属性并且我只想要初始化该属性的构造函数怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-31T07:14:50.430

这是一个警告，而不是要求。这基本上[是最小意外原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)。提供所有 4 项使习惯于“常规”C# 异常的人更容易使用您的异常。如果您有充分的理由忽略该指南，请这样做。但它会破坏某些使用场景，并使您的类不那么直观。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-31T07:29:24.567

你已经得到了一些很好的答案。我只想补充一点，提供这些额外的构造函数并不一定需要大量编码。由于它们已经在基类中实现，您可以简单地让那个来完成工作：

```
public class MyCustomException : Exception
{
    public MyCustomException() : base() { }
    public MyCustomException(string message) : base(message) { }
    public MyCustomException(string message, Exception innerException) : base(message, innerException) { }
    // and so on...
} 
```

因此，您只需要实现异常行为与基类行为不同的代码。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-31T07:16:42.940

无参数和序列化构造函数由需要在域之间移动异常的通用“异常路由”代码使用（例如，通过互联网在服务和客户端之间移动）。

一个接受另一个`Exception`是这样就可以通过该`InnerException`属性链接所有异常。

最后，还有一个接受消息字符串的方法，这有助于合理一致地使用异常。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-31T08:09:50.430

实现标准异常构造函数允许人们以一种标准的、熟悉的方式使用您的异常，该方式内置于所有现有的 .NET 异常中。前三个可以是可选的，如果由于某种原因您不希望使用其中一个（尽管您为什么希望我无法理解。）但是，最后一个是反序列化构造函数，如果您愿意如果您的异常在任何类型的分布式环境（.NET Remoting、ASP.NET Web 服务、WCF 等）中得到支持，那么它就非常重要。

如果没有反序列化构造函数和 [Serializable] 属性，您的异常将无法在分布式环境中运行，并且可能会导致其他问题。鉴于此，以及精通 C# 开发人员的熟悉程度，最好至少实现 4 个标准异常构造函数，并使用 [Serializable] 标记您的异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T00:41:11.737

为什么？因为。（因为从其他答案来看，异常路由需要无参数构造函数。）

我在同一个地方，我不想在没有我的错误代码参数的情况下意外构造一个异常。所以这就是我所做的：

```
public class MyException : ArgumentException
{
    [Obsolete("Use a constructor that takes an ErrorCode instead")]
    public MyException() { }

    [Obsolete("Use a constructor that takes an ErrorCode instead")]
    public MyException(string message) : base(message) { }

    [Obsolete("Use a constructor that takes an ErrorCode instead")]
    public MyException(string message, Exception innerException) : base(message, innerException) { }

    public MyException(ErrorCode errorCode, string message) : base(message) { /* use error code */ }

    public MyException(ErrorCode errorCode, string message, Exception innerException) : base(message, innerException) { /* use error code */ }

    protected MyException(SerializationInfo info, StreamingContext context) : base(info, context)
    {
        if (info != null)
        {
            // error code stuff
        }
    }

    public override void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        base.GetObjectData(info, context);
        if (info != null)
        {
            // error code stuff
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-31T07:14:40.370

好吧，接受内部异常的构造函数对于使自定义异常正确可用是非常必要的。没有它，如果有人发现了您的异常，他们将无法触发更具描述性或适当的异常，同时保留您的原始异常（以及它携带的信息，例如堆栈跟踪。）

# java - 如何从 Java 程序启动完全独立的进程？

> ID：931536
> 
> 赞同：58
> 
> 时间：2009-05-31T07:15:01.727
> 
> 标签：java, exec, external-process

我正在开发一个用 Java 编写的程序，*对于某些操作*，它使用用户配置的命令行启动外部程序。目前它使用`Runtime.exec()`并且不保留`Process`引用（启动的程序是文本编辑器或存档实用程序，因此不需要系统输入/输出/错误流）。

但这有一个小问题，因为当 Java 程序退出时，它并没有真正退出，直到所有启动的程序都退出。

如果启动的程序完全独立于启动它们的 JVM，我会非常喜欢它。

目标操作系统有多种，Windows、Linux 和 Mac 是最少的，但任何带有 JVM 的 GUI 系统都是真正需要的（因此实际命令行的用户可配置性）。

有谁知道如何使启动的程序完全独立于JVM执行？

* * *

**编辑以回应评论**

启动代码如下。代码可能会启动位于特定行和列的编辑器，也可能会启动存档查看器。配置的命令行中引用的值被视为 ECMA-262 编码，并被解码并剥离引号以形成所需的 exec 参数。

发射发生在 EDT。

```
static Throwable launch(String cmd, File fil, int lin, int col) throws Throwable {
    String frs[][]={
        { "$FILE$"  ,fil.getAbsolutePath().replace('\\','/') },
        { "$LINE$"  ,(lin>0 ? Integer.toString(lin) : "") },
        { "$COLUMN$",(col>0 ? Integer.toString(col) : "") },
        };
    String[] arr; // array of parsed tokens (exec(cmd) does not handle quoted values)

    cmd=TextUtil.replace(cmd,frs,true,"$$","$");
    arr=(String[])ArrayUtil.removeNulls(TextUtil.stringComponents(cmd,' ',-1,true,true,true));
    for(int xa=0; xa<arr.length; xa++) {
        if(TextUtil.isQuoted(arr[xa],true)) {
            arr[xa]=TextDecode.ecma262(TextUtil.stripQuotes(arr[xa]));
            }
        }
    log.println("Launching: "+cmd);
    Runtime.getRuntime().exec(arr);
    return null;
    } 
```

* * *

这似乎仅在从我的 IDE 启动程序时才会发生。我要结束这个问题，因为这个问题只存在于我的开发环境中；**这在生产中不是问题**。从答案之一中的测试程序，以及我进行的进一步测试，我很满意这不是任何平台上程序的任何用户都会看到的问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-31T07:44:25.630

您的流程之间存在父子关系，您必须打破它。对于 Windows，您可以尝试：

```
Runtime.getRuntime().exec("cmd /c start editor.exe"); 
```

对于 Linux，该进程似乎是独立运行的，不需要 nohup。我用`gvim`,`midori`和试过了`acroread`。

```
import java.io.IOException;
public class Exec {
    public static void main(String[] args) {
        try {
            Runtime.getRuntime().exec("/usr/bin/acroread");
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println("Finished");
    }
} 
```

[我认为用Runtime.exec](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)以独立于平台的方式是不可能的。

对于 POSIX 兼容系统：

```
 Runtime.getRuntime().exec(new String[]{"/bin/sh", "-c", "your command"}).waitFor(); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-13T12:36:31.267

我有一些观察可以帮助其他面临类似问题的人。

当您使用 Runtime.getRuntime().exec() 然后忽略返回的 java.lang.Process 句柄时（就像原始海报中的代码一样），启动的进程可能会挂起。

我在 Windows 环境中遇到过这个问题，并将问题追溯到 stdout 和 stderr 流。如果启动的应用程序正在写入这些流，并且这些流的缓冲区已填满，则启动的应用程序在尝试写入流时可能会出现挂起。解决方案是：

1.  捕获进程句柄并不断清空流 - 但如果您想在启动进程后立即终止 java 应用程序，那么这不是一个可行的解决方案
2.  执行进程调用`cmd /c <<process>>`（这仅适用于 Windows 环境）。
3.  *使用 ' command > nul 2>&1* '为进程命令添加后缀并将 stdout 和 stderr 流重定向到 nul

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2009-05-31T08:47:09.030

如果您发布重现问题所需的最少代码的测试部分，这可能会有所帮助。我在 Windows 和 Linux 系统上测试了以下代码。

```
public class Main {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws Exception {
        Runtime.getRuntime().exec(args[0]);
    }
} 
```

并在 Linux 上进行了以下测试：

```
java -jar JustForTesting.jar /home/monceaux/Desktop/__TMP/test.sh 
```

其中 test.sh 看起来像：

```
#!/bin/bash
ping -i 20 localhost 
```

以及Linux上的这个：

```
java -jar JustForTesting.jar gedit 
```

并在 Windows 上进行了测试：

```
java -jar JustForTesting.jar notepad.exe 
```

所有这些都启动了他们想要的程序，但 Java 应用程序退出没有问题。据报告，我有以下版本的 Sun JVM `java -version`：

*   视窗：1.6.0_13-b03
*   Linux：1.6.0_10-b33

我还没有机会在我的 Mac 上进行测试。也许在您的项目中与其他代码发生了一些可能不清楚的交互。您可能想试试这个测试应用程序，看看结果如何。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T07:21:33.273

您想在后台启动程序，并将其与父程序分开。我会考虑[nohup(1)](http://docs.sun.com/app/docs/doc/801-6680-01/6i11qc0i8?l=en&a=view)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-31T07:47:18.760

我怀疑这需要一个实际的进程分支。基本上，你想要的 C 等价物是：

```
pid_t id = fork();
if(id == 0)
  system(command_line); 
```

问题是你不能在纯 Java 中做一个 fork() 。我会做的是：

```
Thread t = new Thread(new Runnable()
{
    public void run()
    {
      try
      {
          Runtime.getRuntime().exec(command);
      }
      catch(IOException e)
      {           
          // Handle error.
          e.printStackTrace();
      }
    }
});
t.start(); 
```

这样 JVM 仍然不会退出，但没有 GUI，只剩下有限的内存占用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-26T11:24:28.787

我尝试了这里提到的一切，但没有成功。即使使用 cmd /c start 和重定向流 tu nul，主父 Java 进程也无法退出，直到子线程退出。

对我来说只有一个可靠的解决方案是：

```
try {
    Runtime.getRuntime().exec("psexec -i cmd /c start cmd.cmd");
}
catch (Exception e) {
    // handle it
} 
```

我知道这还不清楚，但是 SysInternals 的这个小实用程序非常有用且经过验证。[这](https://docs.microsoft.com/en-us/sysinternals/downloads/psexec)是链接。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-31T07:59:45.707

我能想到的一种方法是使用 Runtime.addShutdownHook 注册一个杀死所有进程的线程（当然，您需要在某处保留进程对象）。

仅当 JVM 退出时才调用关闭挂钩，因此它应该可以正常工作。

有点小技巧，但很有效。

# jquery - 切换在 IE 中不起作用

> ID：931542
> 
> 赞同：0
> 
> 时间：2009-05-31T07:21:04.740
> 
> 标签：jquery

我在我的网站上使用此代码：

```
var panel = $('.couch-hide');
    var originalPos = panel.css("right");
    panel.toggle(function() {$(this).animate({right:0},1000, 'easeOutBounce');},function(){$(this).animate({right:originalPos},1000);}

); 
```

在 FF 中它可以完美运行，但在 IE 中，它不会在点击时弹出。此外，由于我使用 CSS 权利，它显示水平滚动条，但在 FF 中它没有。关于我可以做些什么来解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T09:33:21.167

好吧，我在 Opera、Firefox 和 IE6/8 中的工作方式相同。

使用下面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>sandbox</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="jquery.easing.js"></script>
  <script type="text/javascript">
    $(function(){
      var panel = $('.couch-hide');
      var originalPos = panel.css("right");
      panel.toggle(
        function(){$(this).animate({right:0}, 1000, 'easeOutBounce');},
        function(){$(this).animate({right:originalPos}, 1000);}
      );
    });
  </script>
  <style type="text/css">
    .couch-hide {
      position: absolute;
      right: 100px;
    }
  </style>
</head>
<body>
  <div class="couch-hide">Click me!</div>
</body>
</html> 
```

文本在屏幕右边缘反弹，然后飞回。

虽然使用[切换](http://docs.jquery.com/Effects/toggle)来做到这一点似乎很奇怪。至少文档没有提到当你为它提供两个函数时会发生什么。或者这是 jquery.easing.js 添加的行为？不熟悉那个。

如果您也提供了 HTML 和 CSS，那将会很有帮助。

# css - CSS 布局工具包

> ID：931545
> 
> 赞同：3
> 
> 时间：2009-05-31T07:23:52.223
> 
> 标签：css, layout

你更喜欢什么用于初始页面布局的 CSS 工具包？是否有解决方案：

1.  测试跨浏览器兼容性；
    *   出色的可扩展性（小项目的小源代码，仅在必要时添加新代码）；
    *   干净易读的源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T07:30:09.167

当您说“工具包”时，我假设您的意思是 CSS 框架。

我使用过 Blueprint 和 960 Grid System，它们都运行良好。它们都是可定制的，并且在某种程度上都是模块化的。

总的来说，我发现从与每个人的合作中学习并查看我喜欢和不喜欢的东西很有用，但我发现没有一个适合我的通用框架解决方案。我已经创建了自己的基本重置和样式集，我将其用作所有网站的起点，然后从那里进行自定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T22:17:31.993

最好的工具包是没有工具包。我保留了一些模板（一个两栏页面模板、一个侧边栏模板等），并使用我认为合适的那些以及片段。

我的建议：自己做。我们都有自己喜欢的字体、大小和距离，只有您知道它们是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T07:29:18.890

有两个广泛采用的选项：[960](http://960.gs)和[blueprint](http://www.blueprintcss.org/)。两者都依赖于基于[网格的布局](http://csswizardry.com/typogridphy/)系统。这极大地提高了您设计的灵活性。

我不确定 960 但蓝图还包括[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)。即使您决定不使用 CSS 框架，这也是您应该使用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T22:05:39.243

通过 CSS 框架测试跨浏览器兼容性可能很困难，因为浏览器兼容性由标记和 CSS 以及在一定程度上由视觉设计组成（网页必须在每个浏览器中*看起来*都正确，因为标记和样式表本身没有要测试的功能）。

样式表可以像您希望的那样正确，但是如果标记不好并且不适合视觉设计，则兼容性问题会再次被破坏。

无论如何，一个完整的 CSS 框架只能提供非常基本的样式，因为这完全取决于您希望您的设计看起来如何。

# ruby - Ruby 中的 RDF 状态

> ID：931548
> 
> 赞同：16
> 
> 时间：2009-05-31T07:26:35.977
> 
> 标签：ruby, rdf, redland

我想知道 Ruby 目前对语义 Web 技术的支持。有没有好的 RDF 选项？最后一次调查似乎是在 2007 年左右（[http://paul-classic.stadig.name/2007/10/26/the-state-of-rdf-support-in-ruby-2007/](http://paul-classic.stadig.name/2007/10/26/the-state-of-rdf-support-in-ruby-2007/)）。Redland 的 RDF 包装器是获得 RDF 支持的最佳方式吗？在那篇陈旧的文章中提到的所有其他项目似乎都不受支持或被丢弃。如果要从事与语义网络有关的项目，Ruby 可能是一个糟糕的选择吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-07-25T11:49:18.327

嘿，Iaalto，我是你提到的调查文章的作者。我一直在考虑做一个新的调查。

自从我进行最初的调查以来，发生了一些变化，但变化不大。这里有几点需要考虑：

1.  ActiveRDF 似乎已经走上了成为 JRuby 特定库的道路。他们的一些适配器仅适用于 Java 库。不一定是问题，但需要注意的事情。
2.  Reddy 只有一个基于内存的图表。同样，不一定是问题。我不会因此而打折 Reddy（过早的优化），但我也不会梦想存储数十亿个三元组。
3.  我最近为 Redland 发现了一组新的 Ruby 绑定，称为[RedLeaf](http://www.deveiate.org/projects/Redleaf)。不确定它有多成熟，但看起来迈克尔已经研究了大约一年。直到最近我才听说它，因为它是离网的（没有 RubyForge 或 GitHub 项目）。
4.  我在 GitHub 上创建了一个名为 RubyRDF (github.com/pjstadig/rubyrdf/tree/master) 的项目。它没有大量文档，但主要是功能性的。它有一个支持事务的芝麻兼容适配器。我仍然对未来的方向有一些想法，并使其功能更加完整，但没有太多的动力去努力。我欢迎任何贡献。

**底线：**如果 JRuby 对你来说不是问题，那么选择 ActiveRDF，它是最完整和最成熟的。如果基于内存的图不是问题，那么下一个最成熟的可能是 Reddy。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-08-06T00:39:14.987

我个人选择了[RDF.rb](http://rdf.rubyforge.org/)，因为他们的网站有很好的文档，并且很容易开始使用博客教程。

ActiveRDF 似乎是一个更大的项目——但他们的 wiki 已关闭（实际上主页链接到 archive.com 上的 wiki 副本）——所有示例都在讨论 SPARQL 查询。

这是一个简单的三重查找示例，为愚蠢的语法道歉，因为这是我的第一个 Ruby 脚本：

```
require 'rubygems'
require 'rdf'
require 'rdf/raptor'

scufl2 = RDF::Vocabulary.new("http://ns.taverna.org.uk/2010/scufl2/ontology/")
dc = RDF::Vocabulary.new("http://purl.org/dc/elements/1.1/")

graph = RDF::Graph.load("../resources/workflows/example.ttl")
graph.query([nil, scufl2.workflow, nil]) do |bundle,p,workflow|
  graph.query([workflow, scufl2.name, nil]) do |wf,p,workflow_name|
    # Should just be one
    print workflow_name
  end
end 
```

不幸的是，像许多 Ruby 和 Python 依赖项一样，这也需要一些二进制文件才能读取 Turtle 或 RDF/XML。不过，“aptitude install raptor-utils”解决了这个问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-12-21T14:17:15.643

我刚刚写了[一篇关于 Ruby 和 RDF 的新调查文章](http://www.randomhacks.net/articles/2010/12/20/the-state-of-ruby-rdf-and-rails-3)。我的一些结论是：

*   [围绕RDF.rb](http://rdf.rubyforge.org/)有大量的活动，其中包含超过分数的数据库适配器、序列化/反序列化插件以及与其他库的接口。大多数最近的对象映射器也是建立在 RDF.rb 之上的。
*   流行的 Redland RDF 库具有[Ruby 绑定](http://librdf.org/docs/ruby.html)，并且得到积极维护。
*   [ActiveRDF](http://activerdf.org/)是 RDF 的首要对象映射器，但它似乎不再被积极维护。
*   目前唯一最近活跃的对象映射器似乎是[Spira](http://github.com/datagraph/spira)。
*   目前还没有一个对象映射器利用[ActiveModel](http://rubyonrails.org/screencasts/rails3/active-relation-active-model)。这将非常巧妙，因为它将在 RDF 和 Rails 之间提供更深层次的集成。

RDF.rb 和 Spira 的作者也有一些有趣的后续评论。[尤其是 Ben Lavender，对如何将RDF 巧妙地映射到 Ruby 对象上](http://blog.datagraph.org/2010/05/spira)进行了很多思考。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-31T15:51:28.503

我是[Redland](http://librdf.org/)的作者，但我自己不使用 Ruby。ruby 绑定可能仍然有效（它们在上一个版本中通过了单元测试），但可能需要对任何新的 ruby​​ 语言更改有所了解。

我认为纯 Ruby 用户已经尝试过[Active RDF](http://www.activerdf.org/)，它比您建议的其他东西更新，但专注于 Rails。

否则，我建议在 Semantic Web Interest Group IRC 频道上询问 - irc.freenode.net 上的#swig

**编辑：**如果你环顾四周， 还有 Reddy [http://github.com/tommorris/reddy/tree/master](http://github.com/tommorris/reddy/tree/master)和 github 上的其他 ruby​​ rdf 代码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-05-12T05:48:56.477

查看 RDF.rb [http://rdf.rubyforge.org/](http://rdf.rubyforge.org/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-12-17T21:02:47.107

AllegroGraph (RDF DB) 有一个 Ruby 客户端 - [https://github.com/phifty/agraph](https://github.com/phifty/agraph)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-08-27T07:49:16.447

有一个 Ruby Sesame 库：http: [//github.com/tillsc/ruby-sesame](http://github.com/tillsc/ruby-sesame)

Sesame 是两个最流行的 Java RDF 框架之一。我们（Ontotext）开发了一个名为 OWLIM 的三重存储 + 内置推理引擎。我们提供了一个名为 SwiftOWLIM 的免费版本。

我们的一些用户通过上面的 Ruby Sesame 库将它与 Ruby 一起使用。

# java - Java：如何使用 Quicksilver 对 Java API 文档进行编目？

> ID：931550
> 
> 赞同：3
> 
> 时间：2009-05-31T07:28:35.410
> 
> 标签：java, macos, quicksilver

这个是为 Mac 上的 Java 程序员准备的。

如何使用[Quicksilver](http://blacktree.com/?quicksilver)对 Java API 文档进行编目？如果您可以通过几个按键来查找 API 文档，那不是很好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T07:29:46.767

[在本地下载 Java API 文档](http://java.sun.com/javase/downloads/index.jsp)。

然后按照[Indexing Java SDK Docs with QuickSilver](http://www.entropy.ch/blog/Developer/?permalink=Indexing-Java-SDK-Docs-with-QuickSilver.html)中的说明进行操作。

> [将]“allclasses-frame.html”文件添加到目录中的新[“J2SE”]组中，并将“包含内容”选项设置为“HTML链接”。QuickSilver 将解析 HTML 文件，并且由于该文件包含指向所有课程页面的一长串链接，因此索引中的结果正是我想要的。正如您在屏幕截图中看到的，它选择了大约 3200 个类。 [（来源：][[entropy.ch](http://www.entropy.ch/images/blog/2006-09-27-quicksilver-catalog.png)][）][![替代文字](https://i.stack.imgur.com/7ZqG2.png)](https://i.stack.imgur.com/7ZqG2.png)

# matrix - 哪一个更快/更稳定：反转矩阵或求解三个具有多个右手边的线性方程组？

> ID：931553
> 
> 赞同：0
> 
> 时间：2009-05-31T07:29:07.627
> 
> 标签：matrix, big-o, inversion, linear-equation

我在每一轮递归中求解两个方程：

X = A - inv(B) * Y * inv(B)，X = X + A' * inv(B) * A，

我这样解决问题：

C = inv(B) *Y <=> BC = Y，求解 C. D = C* inv(B) <=> DB = C <=> B'D' = C'，求解 D'

E = inv(B)*A <=> BE = A，求解 E。

所有矩阵都会随着时间而变化，所以我必须在每次递归时再次执行此操作（或反转）。N 通常约为 1-10，可能更多，但通常是这样的。B 是正定的，所以我可以在因式分解中使用 cholesky，然后求解多个右手边的方程。

这比仅仅反转 B 然后用它进行矩阵乘法要慢得多还是快得多？一个反演与求解三个线性方程组（还有另一个方程）加上一些转置。我认为它至少在数值上比反转更稳定？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T00:22:12.207

首先，让我们假设你所有的矩阵都是 nx n 阶的。然后可以在 O(n^3/6) 操作中完成 cholesky 分解（对于较大的 n 值）。

求解 B*c(i) = y(i) 或 L*L'*c(i) = y(i) (Cholesky) 是 2*O(n^2/2) 或 O(n^2)，但是求解 BC=Y 就是求解这些方程中的 n 个（因为 Y 是 nxn），所以我们总共有 O(n^3)。

求解 D' 显然与此类似，所以另一个 O(n^3)。

将 D' 转换为 D 大约是 O(n^2)，但没有计算，只是交换数据（除了对角线元素当然是相同的）。

在第二个公式中求解 BE = A 中的 E 是再次反向替换 Cholesky 分解，所以 O(n^3)

A' * E 是 n^2 * (n mult and n-1 add) 这是 O(2*n^3 - n^2)

这总计为： O(n^3/6) + 3*O(n^3) + O(n^2) + O(2*n^3 - n^2) ~ O(31*n^3 /6) ~ O(5*n^3) （对于较大的 n 值）

请注意，我没有计算矩阵加法/减法，但这不相关，因为如果我们决定反转 B，它们将是相同的。出于同样的原因，我也跳过了 A 到 A'。

好的，那么反转矩阵的成本是多少？那么我们要求解矩阵方程：

B * inv(B) = I，这与求解 B * x(i) = e(i) for i=1..n 相同，其中 e(i) 是 I 中的基本单位向量。这通常是通过使用高斯消元将系统转换为三角形形式来完成，这需要大约 O(n^3/3) 次操作。当进行三角剖分时，需要 O(n^2/2) 次操作来解决它（向后替换）。但这必须做 n 次，这给了我们总共 O(n^4/3) + O(n^3/2) 次操作，所以你可以看到我们已经在边缘了。

但是，在知道 B 的 cholesky 分解为 O(n^3) 时计算 inv(B) （因为求解 L*L'*inv(B) = I 与求解 BE=A 相同）

所以我们有： O(n^3/6) (B的cholesky) + O(n^3) (用cholesky计算inv(B)) + 4*O(2n^3-n^2) (四个矩阵乘法）~ O(9*n^3) 好一点，但更糟。

所以我建议你保持目前的方法。但是您必须记住，这是针对较大的 n 值。除非 n 是 100+，否则我认为这并不重要。

# iphone - 是否可以将 OpenGL ES 渲染视图放在 UIView 上，而 UIView 就像 OpenGL ES 是具有透明度的 PNG 一样闪耀？

> ID：931564
> 
> 赞同：1
> 
> 时间：2009-05-31T07:33:43.170
> 
> 标签：iphone, cocoa-touch, uikit, opengl-es

我对此一无所知，但如果这是可能的（例如 Flash），那将非常酷。

我有一个基于视图的应用程序，我可能需要一些 OpenGL ES 功能，但不想拥有全屏 OpenGL ES。我只是在某些小区域需要它来绘制小图表和其他可能很难用核心图形完成的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T18:11:11.920

**是的，这是可能的，但我强烈建议不要这样做**。

[Apple 技术说明 TN2230：针对 iPhone OS 优化 OpenGL ES](http://developer.apple.com/iphone/library/technotes/tn2008/tn2230.html)涵盖了所有注意事项。

[这份涵盖最佳实践的 Apple 文档](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/GraphicsandDrawing/GraphicsandDrawing.html#//apple_ref/doc/uid/TP40007072-CH10-SW18)有助于了解更多的注意事项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T08:15:36.097

是的，

您应该能够通过 Quartz Core 使用层来实现这一点（请参阅 CALayer 类文档）。实际上，您可以拥有层级结构。基本上，您将每个 UIView 关联到不同的层，然后将这些层一起渲染，提供一个单一的复合层。此外，您还可以将变换和动画应用于图层。

您需要导入 QuartzCore 标头并执行类似的操作

```
#import <QuartzCore/QuartzCore.h>
UIView *myView = [[UIView alloc] initWithFrame...
UIView *openGLView = [UIView alloc] initWithFrame...

CaLayer *myViewLayer = myView.layer;
[myViewLayer addSubLayer: openGLView.layer]; 
```

然后，当 myView 出现在屏幕上时，所有子图层合并在一起并呈现在屏幕上。发生的情况是每个视图都呈现其层，而 myViewLayer 被呈现合并两个层。

您可以拥有任意数量的图层。您可以使用 CALayer 方法创建任意层次结构

– addSublayer: – removeFromSuperlayer
– insertSublayer:atIndex:
– insertSublayer:below:
– insertSublayer:above:
– replaceSublayer:with:

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-28T14:43:11.400

这种“技术”工作得很好而且很常见，因为 UIKit 就是为这种事情而设计的，它也可以以其他方式工作（OpenGL 在后台或前台或任何组合中）。只记得关闭不透明标志。

但是，我不确定是否将 GL 渲染到正在激活动画的 CALayer；它可能只是在动画期间不会更新。=) 玩得开心！

# winforms - Ironpython 中 Windows 窗体的不同样式

> ID：931580
> 
> 赞同：0
> 
> 时间：2009-05-31T07:44:26.080
> 
> 标签：winforms, ironpython

我想改变 Ironpython windows 窗体的外观，是否可以改变窗体的样式，例如让它更像 Mac？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T08:17:52.193

作为界面设计师，尽可能多地使用标准的窗口控件是很重要的。您的应用程序看起来越像用户习惯的微软应用程序，他们就会越快适应它。

一个很好的例子是 iTunes 和 Safari 在 Windows 中的外观。我的建议是让它与窗户的外观保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T08:52:59.890

请参阅[Windows 窗体中的图形和绘图](http://msdn.microsoft.com/en-us/library/a36fascx.aspx)，或[自定义控件的绘制和渲染](http://msdn.microsoft.com/en-us/library/kxys6ytf.aspx)。 `WinForms`提供挂钩来更改其控件的外观，或者您可以创建自己的。

如果可能，请考虑将您的应用程序更改为[`WPF`](http://msdn.microsoft.com/en-us/library/ms750441.aspx)，其中样式和行为的分离是设计的核心部分。

一个简单的例子，[使用 XamlReader 的 WPF GUI](http://www.ironpython.info/index.php/WPF_GUI_using_XamlReader)，展示了 IronPython 如何使用`WPF`.

# sql - SQL GROUP_CONCAT + SUM + AVG

> ID：931594
> 
> 赞同：0
> 
> 时间：2009-05-31T07:54:47.963
> 
> 标签：sql, mysql, sum, group-concat, average

```
SELECT *,
       Group_concat(rating) AS rating_total,
       Sum(rating_total)    AS rating_sum,
       Avg(rating_sum)      AS rating_avg
FROM   ratings
GROUP  BY pid 
```

由于某种原因，总和和平均值不执行....你如何使这个语句起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T08:00:49.090

由于 SQL 编译查询的方式（我假设 MySQL，因为您使用的是 GROUP_CONCAT），您不能在 order by 子句之前引用别名列名。SUM 和 AVG 函数*不是程序性的*。它们是并行完成的。这意味着他们不能依赖。

其次， GROUP_CONCAT 返回一个字符串，而不是一个数字。你希望如何 SUM/AVG 呢？只是 SUM 和 AVG 本身的评级列。

现在，鉴于此，您可以这样做：

```
SELECT
    pid,
    GROUP_CONCAT(rating) AS rating_total,
    SUM(rating) as rating_sum,
    AVG(rating) as rating_avg
FROM
    rating
GROUP BY
    pid 
```

这应该可以为您提供所需的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T08:01:16.437

GROUP_CONCAT 返回一个字符串，连接所有选定的值。然后，您尝试对该字符串求和，然后您尝试获得总和的平均值。

我认为您需要对表中的值使用 SUM 和 AVG，而不是连接的结果。

# .net - 如何在 ListView 中添加图像作为子项？

> ID：931597
> 
> 赞同：0
> 
> 时间：2009-05-31T07:55:51.237
> 
> 标签：.net, windows-mobile

我目前正在开发一个标准的 Windows 移动应用程序。要求我们使用 ListView，但子项中有图像。

我们需要一个 3 列和 3 行的列表视图。我想在表单上显示 9 个图标。

如何在 ListView 中添加图像作为子项？

我可以使用图片框，但我没有任何事件可以从一个图像导航到另一个图像。

我该如何处理？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T09:20:41.020

不支持将图像作为子项添加到 ListView 中。如果您知道总会有 3x3 的图像，为什么要使用 ListView？您可以简单地在窗体上布置 9 个 PictureBox 控件并将图标加载到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T21:51:05.620

在标准 ListView 中执行此操作的唯一方法是使用所有者绘图。

将`OwnerDraw`ListView 的属性设置为`true`，处理`DrawColumnHeader`和`DrawItem`事件并设置`e.Handled`为`true`，并处理`DrawSubItem`事件并绘制正确的图像。

**编辑：.Net Compact Framework 不支持所有者绘图，因此无法使用此技术。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T12:06:38.293

[这篇](http://www.codeproject.com/KB/list/bk_custlistview.aspx)文章可能值得一看。虽然它是为完整的 .NET Framework 编写的，但它也可能适用于 Compact Framework（我自己没有测试过，但Win CE 似乎支持[NMCUSTOMDRAW ）。](http://msdn.microsoft.com/en-us/library/aa931603.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-15T12:57:08.607

[http://bytes.com/topic/visual-basic-net/answers/481668-listview-subitems-image-index](http://bytes.com/topic/visual-basic-net/answers/481668-listview-subitems-image-index) 阅读这篇文章，它会对你有所帮助。

# web-services - 第一次从 ASP.NET Web 服务打印时 Excel 挂起

> ID：931615
> 
> 赞同：1
> 
> 时间：2009-05-31T08:03:52.750
> 
> 标签：web-services, excel, printing, asmx, com-interop

我们在 ASP.NET 网络服务中使用 Excel 将 SpreatSheetML 转换为 XLS。此外，如果用户选中了正确的复选框，我们会生成一个使用 Excel 打印电子表格的线程。

最近，我们在一个新环境中部署了应用程序，然后我们开始遇到问题：第一次尝试打印时，Excel 似乎挂在服务器上 - 即对`PrintOut`工作簿上的方法的调用永远不会返回。

但是，如果我们以应用程序池身份登录服务器并打开 Excel，向打印机发送一些内容，然后再次关闭它，则打印将从那时开始工作！

我怀疑 Excel 正在显示`invisible dialog`- 症状与我们之前的症状相同，当时 Excel 似乎停滞在 Excel 打开时出现的“无法使用对象链接和嵌入”对话框上。

我知道使用服务器端办公自动化不好，但这是一个很难更改的遗留应用程序，所以请不要只建议我重新设计我们的解决方案。

有没有人有过这种行为的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-10T18:39:18.300

好吧，似乎没有人遇到过这个问题。

真正奇怪的是，我的夜间工作（普通的 .NET .exe）完全能够打印 - 只有我的 Web 服务有这个问题。

所以我通过做我早就应该做的事情解决了这个问题：我用[Topshelf](http://code.google.com/p/topshelf/)创建了一个简单的 Windows 服务，它响应一些 MSMQ 消息并进行打印，然后我的 Web 服务可以通过消息队列订购打印输出。

各方面都好很多！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-08T08:50:38.773

我在使用 Microsoft Excel、Word 和 PowerPoint 通过 Web 服务中的互操作将 Office 文档打印为 PDF 格式时遇到了无穷无尽的问题（性能不佳、进程挂起、进程崩溃等）。我也遇到过我怀疑是由于不可见的对话框引起的问题（可能文件已损坏，已设置只读建议，文件受密码保护，或其他）。

I know there are tools available that don't use Office, but they are very expensive. My solution was to switch to automating OpenOffice. OpenOffice seems to be much more stable, and I've left hanging processes and the like behind.

So, while I suppose I am saying "don't automate Microsoft Office", I'm not suggesting that you abandon automation altogether; just that I've had *much* more success automating OpenOffice than Microsoft Office.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T05:09:21.897

[SpreadsheetGear for .NET](http://www.spreadsheetgear.com/)可以读取 xls 或 xlsx 工作簿，并且可以打印到默认打印机而不显示任何对话框（请参阅 WorkbookView.Print() 方法）。

[您可以在此处](https://www.spreadsheetgear.com/downloads/register.aspx)下载评估。

免责声明：我拥有 SpreadsheetGear LLC

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-08-04T22:11:56.383

像许多人一样，我*见过*这种行为。它是由在服务器中使用 Office API 引起的，尤其是多线程 ASP.NET 应用程序。

但是，您已经说过您不想知道不射击自己的脚，所以没什么可说的。你似乎被早先愚蠢的后​​果所困。

* * *

好的，如果你听说过*这个*，请阻止我：

一个男人在 StackOverflow 上提问。他说，“所以，当我从服务内部自动化 Office 应用程序时，就会发生不好的事情”。所以，John Saunders 说，“所以，不要从服务内部自动化 Office 应用程序。从桌面应用程序内部自动化它，就像微软打算做的那样。”

当收到需要 Excel 的请求时，您应该创建一个运行 Windows 窗体应用程序的进程。应用程序可能必须在没有窗口的情况下启动，或者您可能需要在*[远程桌面](http://msdn.microsoft.com/en-us/library/bb892075%28VS.85%29.aspx)*连接的上下文中启动它。在任何情况下，要执行的任务都可以作为命令行参数传递，或者程序可以托管 WCF 服务以将命令发送给它。

这个程序可以像 Excel 期望被调用一样调用 Excel。它甚至可以处理多个 Excel 命令（一次一个）。但是，如果它挂起，则可以终止该进程并启动另一个进程。

我从来没有尝试过这个，但听起来它比试图让 Office 自动化做一些它不打算做的事情更好。

# c# - 论坛的 LINQ 查询

> ID：931617
> 
> 赞同：3
> 
> 时间：2009-05-31T08:06:08.020
> 
> 标签：c#, sql, linq, entity-framework, linq-to-entities

我正在编写这个论坛，因为我是 LINQ 的新手，所以当用户点击主页时我遇到了这个问题。我想要一个显示论坛列表的表格，如下所示：

```
Forum  --- Topics (count) --- Posts (count) --- LastPostUserId --- LastPostTime 
```

我有以下 SQL 表：

```
Forums:
ForumId (int32),
Title (string),
Description (string)

ForumThreads:
ThreadId (int32),
ForumId (int32),
UserId (guid),
Subject (string),
Views (int32),
CreateDate (DateTime)

ForumPosts:
PostId (int32),
ThreadId (int32),
UserId (guid),
Post (string),
CreateDate (datetime) 
```

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T08:29:00.377

```
from forum in forums
from posts in db.ForumPosts.Where(p => p.Thread.ForumId.Equals(forum.ForumId))
select new
{
Forum = forum.Title, 
Topics = forum.ForumThreads.Count(),
Posts = posts.Count(),
LastPostBy = posts.OrderByDescending(p => p.CreateDate).FirstOrDefault(p => p.UserId),
LastPostTime= posts.Max(p => p.CreateDate))
} 
```

当然未经测试，但尝试从这里开始并检查它执行的 SQL 查询，并让我知道它是否需要优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T14:45:23.207

如果您使用成员资格并且不想在 dbml 中包含 aspnet_Users，则用于显示用户名：

```
...
LastPostUserId = posts.OrderByDescending(p=>p.PostId).Take(1).Select(p=> Membership.GetUser(p.UserId))
... 
```

使您发布的示例更好一点的另一个更改是在帖子变量中添加 orderbydescending：然后您可以从 select 子句中删除 4 次重复的 OrderByDescending：

```
from forum in Forums
let posts = ForumPosts.Where(p => p.ForumThreads.ForumId.Equals(forum.ForumId)).OrderByDescending(p=>p.PostId)
select new
{
    Forum = forum.Title,
    Description = forum.Description,
    Topics = forum.ForumThreads.Count(),
    Posts = posts.Count(),
    LastPostId = posts.Take(1).Select(p=>p.PostId),
    LastPostThreadId = posts.Take(1).Select(p=>p.ThreadId),
    LastPostUserId = posts.Take(1).Select(p=>p.UserId),
    LastPostTime = posts.Take(1).Select(p=>p.CreateDate)
} 
```

甚至更清洁：

```
from forum in Forums
let posts = ForumPosts.Where(p => p.ForumThreads.ForumId.Equals(forum.ForumId))
let lastPost = posts.OrderByDescending(p=>p.PostId).Take(1)
select new
{
    Forum = forum.Title,
    Description = forum.Description,
    Topics = forum.ForumThreads.Count(),
    Posts = posts.Count(),
    LastPostId = lastPost.PostId,
    LastPostThreadId = lastPost.ThreadId,
    LastPostUserId = lastPost.UserId,
    LastPostUserName = Membership.GetUser(lastPost.UserId),
    LastPostTime = lastPost.CreateDate
} 
```

当没有最后的帖子时测试此代码，我认为如果 Take(1) 为空，它可能会引发错误..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T14:13:52.613

这几乎可以解决问题（尽管它会生成一些可怕的 SQL ;-)...）

```
from forum in Forums
let posts = ForumPosts.Where(p => p.ForumThreads.ForumId.Equals(forum.ForumId))
select new
{
    Forum = forum.Title,
    Description = forum.Description,
    Topics = forum.ForumThreads.Count(),
    Posts = posts.Count(),
    LastPostId = posts.OrderByDescending(p=>p.PostId).Take(1).Select(p=>p.PostId),
    LastPostThreadId = posts.OrderByDescending(p=>p.PostId).Take(1).Select(p=>p.ThreadId),
    LastPostUserId = posts.OrderByDescending(p=>p.PostId).Take(1).Select(p=>p.UserId),
    LastPostTime = posts.OrderByDescending(p=>p.PostId).Take(1).Select(p=>p.CreateDate)
} 
```

最后一件事 - 我有一个从 SQL 表 'ForumPosts' 到 'Aspnet_Users' 的关系，我想将列 Aspnet_Users.UserName 显示为 LastPostUserName ...怎么办？您将如何优化整个查询？

# xml - 如何在 XML 模式中创建必须按顺序排列的可选项目序列？

> ID：931622
> 
> 赞同：5
> 
> 时间：2009-05-31T08:13:00.203
> 
> 标签：xml, schema, xsd, sequence

我想要做的是在 XML 模式中创建一个序列元素，以便内容必须按顺序排列，但可能并非全部都存在。例如，架构将是这样的：

```
<xs:element name="rods" maxOccurs="1" minOccurs="1">
 <xs:complexType>
  <xs:sequence>
   <xs:element name="green" type="xs:positiveInteger" />
   <xs:element name="white" type="xs:positiveInteger" />
   <xs:element name="blue" type="xs:positiveInteger" />
   <xs:element name="yellow" type="xs:positiveInteger" />
   <xs:element name="red" type="xs:positiveInteger" />
   <xs:element name="tan" type="xs:positiveInteger" />
   <xs:element name="gray" type="xs:positiveInteger" />
   <xs:element name="black" type="xs:positiveInteger" />
  </xs:sequence>
 </xs:complexType>
</xs:element> 
```

并允许这样的 XML：

```
<rods>
 <green>142</green>
 <white>34</white>
 <gray>65</gray>
</rods> 
```

MSDN对此有这样的说法：

> 下面的示例显示了一个元素 (zooAnimals)，它可以在序列元素中包含零个或多个以下元素，大象、熊、长颈鹿。
> 
> ```
> <xs:element name="zooAnimals">
>       <xs:complexType>
>             <xs:sequence minOccurs="0" maxOccurs="unbounded">
>                <xs:element name="elephant"/>
>                <xs:element name="bear"/>
>                <xs:element name="giraffe"/>
>             </xs:sequence>
>       </xs:complexType>
> </xs:element> 
> ```

W3Schools 也提出了同样的建议。但是，Visual Studio 和在线验证服务都不喜欢所建议的内容。

这是我目前所拥有的：

```
<xs:element name="rods" maxOccurs="1" minOccurs="1">
 <xs:complexType>
  <xs:sequence minOccurs="0" maxOccurs="1">
   <xs:element name="green" type="xs:positiveInteger" />
   <xs:element name="white" type="xs:positiveInteger" />
   <xs:element name="blue" type="xs:positiveInteger" />
   <xs:element name="yellow" type="xs:positiveInteger" />
   <xs:element name="red" type="xs:positiveInteger" />
   <xs:element name="tan" type="xs:positiveInteger" />
   <xs:element name="gray" type="xs:positiveInteger" />
   <xs:element name="black" type="xs:positiveInteger" />
  </xs:sequence>
 </xs:complexType>
</xs:element> 
```

这是 XML：

```
<rods>
 <green>142</green>
 <white>34</white>
 <gray>65</gray>
</rods> 
```

Visual Studio 2005 声称“灰色”是无效的，“蓝色”是预期的，所以很明显它想要所有的孩子

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-31T12:24:12.960

```
<xs:element name="rods">
    <xs:complexType>
        <xs:sequence>
                <xs:element minOccurs="0" name="green" type="xs:positiveInteger" />
                <xs:element minOccurs="0" name="white" type="xs:positiveInteger" />
                <xs:element minOccurs="0" name="blue" type="xs:positiveInteger" />
                <xs:element minOccurs="0" name="yellow" type="xs:positiveInteger" />
                <xs:element minOccurs="0" name="red" type="xs:positiveInteger" />
                <xs:element minOccurs="0" name="tan" type="xs:positiveInteger" />
                <xs:element minOccurs="0" name="gray" type="xs:positiveInteger" />
                <xs:element minOccurs="0" name="black" type="xs:positiveInteger" />
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

# .net - 如何使用自动生成的标识密钥更新数据集父子表？

> ID：931630
> 
> 赞同：6
> 
> 时间：2009-05-31T08:18:04.953
> 
> 标签：.net, vb.net, ado.net, dataset

我在我的 VB 应用程序中使用 ADO.NET 数据集。我有一个带有一个父表和许多子表的类型化数据集。我想在将数据插入父表时生成标识键，然后使用相同的键（作为 Foregin 键）更新所有子表中的数据。

最后，我想更新数据库（SQL Server08）中的数据集。

好吧，上述事情可以通过首先直接在数据库中插入父表，获取标识列然后用于子表来实现。

但我想将此作为一种自动操作（如 LINQ to SQL 处理数据上下文中的主键和外键。）

我在处理父表和子表的自动生成列的数据集中有可能吗？

谢谢，

ABB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-07-18T13:03:02.557

我认为这应该更明显，并且应该无需任何调整即可工作。但是，这仍然很容易。

解决方案有两个部分：

1.  在子表和父表之间创建`DataRelation`并将其设置为更新时级联。这样，每当父 ID 更改时，所有子代都会更新。

    ```
    Dim rel = ds.Relations.Add(parentTab.Columns("Id"), childTab.Columns("ParentId"))
    rel.ChildKeyConstraint.UpdateRule = Rule.Cascade 
    ```

2.  数据集插入和更新命令是双向的：如果绑定了任何输出参数或返回了任何数据行，它们将用于更新导致更新的数据集行。

    这对于这个特定问题最有用：将自动生成的列返回到应用程序。除了身份之外，这可能是例如时间戳列。但身份是最有用的。

    我们需要做的就是设置插入命令以返回身份。有几种方法可以做到这一点，例如：

    a) 使用带有输出参数的存储过程。这是“真实”数据库中最便携的方式。

    b) 使用多个 SQL 语句，最后一个返回插入的行。这是特定于 SQL Server 的 AFAIK，但最简单的是：

    ```
    insert into Parent (Col1, Col2, ...) values (@Col1, @Col2, ...);
    select * from Parent where Id = SCOPE_IDENTITY(); 
    ```

设置完成后，您需要做的就是创建具有`Id`唯一（在单个数据集中）但在数据库中不可能的 s 的父行。负数通常是一个不错的选择。然后，当您将数据集更改保存到数据库时，所有新的父行都`Id`将从数据库中获取 real s。

* * *

注意：如果您碰巧使用没有多语句支持且没有存储过程（例如 Access）的数据库，则需要`RowUpdated`在父表适配器中的事件上设置事件处理程序。在 hanler 中，您需要通过`select @@IDENTITY`命令获取身份。

* * *

一些链接：

*   [MSDN：检索身份或自动编号值 (ADO.NET)](http://msdn.microsoft.com/en-us/library/ks9f57t0.aspx)
*   [MSDN：管理@@IDENTITY 危机](http://msdn.microsoft.com/en-us/library/ms971502)
*   [将身份或自动编号值检索到数据集中](http://www.akadia.com/services/dotnet_autoincrement.html)
*   [C# 学习：更新数据集中的标识列](http://csharplearnings.blogspot.com/2008/08/updating-identity-columns-in-dataset.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T22:08:43.397

有几点需要指出。

1.  是的，您肯定需要为两个表分配关系。您可以从 xsd 编辑器检查（双击您的 xsd 文件）。默认情况下，关系设置为“仅关系”，没有任何“更新规则”。通过进入“编辑关系”并选择“仅外键约束”或“两者~~~”来编辑此关系。并且需要将“更新规则”设置为级联！“删除规则”由您决定。

2.  现在，当您为新的子表行使用新的父表行的 ID (AutoIncrement) 作为外键时，您必须先将父行添加到表中，然后再使用新的父行的 ID。

3.  只要您使用 tableadapter 为父表调用 Update，关联的子表的新行将自动具有正确的 parentID。

我的简单代码片段：

```
'--- Make Parent Row
Dim drOrder as TOrderRow = myDS.TOder.NewTOrderRow
drOrder.SomeValue = "SomeValue"
myDS.TOrder.AddTOrderRow(drOrder) '===> THIS SHOULD BE DONE BEFORE CHILD ROWS

'--- Now Add Child Rows!!! there are multiple ways to add a row into tables....
myDS.TOrderDetail.AddTOrderDetailRow(drOrder, "detailValue1")
myDS.TOrderDetail.AddTOrderDetailRow(drOrder, "detailvalue2")
'....
'....

'--- Update Parent table first
myTableAdapterTOrder.Update(myDS.TOrder)
'--- As soon as you run this Update above for parent, the new parent row's AutoID(-1)
'--- will become real number given by SQL server. And also new rows in child table will
'--- have the updated parentID

'--- Now update child table
myTableAdapterTOrderDetail.Update(myDS.TOrderDetail) 
```

我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-24T18:20:40.363

如果您不想使用数据集，但又不想将 id 分配给孩子并获取 id 以便您可以更新模型： [https ://danielwertheim.wordpress.com/2010/10/24/c-batch-身份插入/](https://danielwertheim.wordpress.com/2010/10/24/c-batch-identity-inserts/)

# sql - 将数据输入任务分配给多个并发 Web 应用用户

> ID：931643
> 
> 赞同：0
> 
> 时间：2009-05-31T08:30:55.300
> 
> 标签：sql, concurrency, locking

我试图想出一种有效的方法来让一群人完成一系列数据输入任务。以前我们只有一个人这样做，所以这不是问题。后端是 RDBMS，前端是 Web 应用程序。

目前我们做这样的事情：

要分配记录以进行编辑：

```
SELECT * FROM records WHERE in_edit_queue LIMIT 1; 
```

然后，

保存对先前分配的记录的更改：

```
UPDATE records SET ..., in_edit_queue = false
  WHERE id = ? AND in_edit_queue = true; 
```

这意味着可以为两个用户分配相同的记录进行编辑，我们支持第一个提交的用户，在随后的提交中静默失败，例如：

1.  用户 A 加载记录 321 进行编辑
2.  用户 B 加载记录 321 进行编辑
3.  用户 B 提交更改（它们保存在数据库中）
4.  用户 A 提交更改（未保存在数据库中）

（注意：我们可以信任所有用户提交可接受的数据，因此我们无需保留来自第二个的数据`UPDATE`。）

这种方法的问题是，当用户同时开始并以大致相同的速度进行编辑时，他们通常会更新相同的记录，但只有其中一条记录被保存。换句话说，浪费了大量的工时。我可以通过选择随机行在一定程度上缓解这种情况，但我更喜欢更有保证的东西。

所以这就是我的想法......

有一张桌子叫：`locked_records (record_id integer, locked_until timestamp)`

```
-- Assign a record for editing:
-- Same as before but also make sure the
-- record is not listed in locked_records...
SELECT * FROM records
  WHERE in_edit_queue AND id NOT IN (
    SELECT record_id FROM locked_records
    WHERE locked_until > now() )
  LIMIT 1;

-- ..and effectively remove it from
-- the queue for the next 5 minutes
INSERT INTO locked_records (record_id, locked_until)
  VALUES (?, now() + 300); 
```

然后：

```
UPDATE records SET ..., in_edit_queue = false
  WHERE id = ? AND in_edit_queue = true;
DELETE FROM locked_records WHERE record_id = ?; 
```

一个典型的编辑大约需要 30 秒到 1 分钟，队列中的 5 分钟应该是一个不错的时间。如果结果证明是有利的，我还可以在网络应用程序上使用 XHR 不断更新锁。

任何人都可以对此提出想法吗？听起来像是一种很好的做事方式？听起来像一个可怕的方式？以前做过这个？我很想听听一些反馈。

谢谢！Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T08:53:09.577

RDBMS 的内部锁列表怎么样？将 SELECT 语句更改为 SELECT FOR UPDATE 是一种选择吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T10:52:12.490

另一个想法：这些记录有两个额外的列：assigned_to 和 completed。

当有人想编辑记录时，请执行以下操作

```
update records set assigned_to = ? # assigning to 'me'
where assigned_to is null
and completed = false
limit 1 # only assign one record at a time 
```

然后，要恢复该行：

```
select ...
from records
where assigned_to = ? # assigned to 'me'
and completed = false 
```

完成后，您将完成设置为“真”。

您可以有一个额外的时间戳列，用于记录何时分配给某人，然后在上面的更新语句中的 where 子句的“assigned_to is null”部分添加一个 OR 替代项，在该部分中，您需要一定的授权才能分配给有效。

# c# - .Net 属性网格。有没有办法让 Grid 以不同的方式操作对象

> ID：931644
> 
> 赞同：1
> 
> 时间：2009-05-31T08:31:19.123
> 
> 标签：c#, .net, vb.net, properties, propertygrid

据我了解，属性网格被赋予一个对象，它可以通过使用反射提取其属性来操作该对象。

我的问题是我有一组在运行时确定的参数，因此我不能静态地组合一个具有属性的类来表示这个集合。

我有两个想法来解决这个问题，但两者都很复杂并且可能会花费大量时间，事实上我会说在我的时间限制下它们不实用。一种是使用 Reflection Emit 来动态定义一个类，另一种是动态构建一个 C# 源文件，然后使用 CodeDom 编译它。

属性网格可以以不同的方式表现（除了使用反射提取对象的属性）可以解决我的问题吗？

如果没有，您知道可以为我完成这项工作的任何其他控件吗？

我想说，我从一开始就使用属性网格的原因是它能够为常见类型提供非常好的数据检索 UI。对于颜色，您会自动获得一个调色板，对于 dataTime，您会自动获得一个漂亮的日历。如果可能的话，我想自动获得这些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T08:34:50.347

是的，`PropertyGrid`可以显示除了编译时属性以外的东西，通过使用任何*，*`TypeConverter`或`ICustomTypeDescriptor`提供`TypeDescriptionProvider`运行时伪属性。你能举例说明你的参数是什么样的吗？我应该能够提供一个例子......

* * *

`string`这是一个基于[较早回复](https://stackoverflow.com/questions/882214/data-binding-dynamic-data/882246#882246)（相关但不同）的基本示例（一切都是，等等）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;
class PropertyBagPropertyDescriptor : PropertyDescriptor {
    public PropertyBagPropertyDescriptor(string name) : base(name, null) { }
    public override object GetValue(object component) {
        return ((PropertyBag)component)[Name];
    }
    public override void SetValue(object component, object value) {
        ((PropertyBag)component)[Name] = (string)value;
    }
    public override void ResetValue(object component) {
        ((PropertyBag)component)[Name] = null;
    }
    public override bool CanResetValue(object component) {
        return true;
    }
    public override bool ShouldSerializeValue(object component)
    { // *** this controls whether it appears bold or not; you could compare
      // *** to a default value, or the last saved value...
        return ((PropertyBag)component)[Name] != null;
    }
    public override Type PropertyType {
        get { return typeof(string); }
    }
    public override bool IsReadOnly {
        get { return false; }
    }
    public override Type ComponentType {
        get { return typeof(PropertyBag); }
    }
}
[TypeConverter(typeof(PropertyBagConverter))]
class PropertyBag {
    public string[] GetKeys() {
        string[] keys = new string[values.Keys.Count];
        values.Keys.CopyTo(keys, 0);
        Array.Sort(keys);
        return keys;
    }
    private readonly Dictionary<string, string> values
        = new Dictionary<string, string>();
    public string this[string key] {
        get {
            string value;
            values.TryGetValue(key, out value);
            return value;
        }
        set {
            if (value == null) values.Remove(key);
            else values[key] = value;
        }
    }
}
// has the job of (among other things) providing properties to the PropertyGrid
class PropertyBagConverter : TypeConverter {
    public override bool GetPropertiesSupported(ITypeDescriptorContext context) {
        return true; // are we providing custom properties from here?
    }
    public override PropertyDescriptorCollection GetProperties(ITypeDescriptorContext context, object value, System.Attribute[] attributes) {
        // get the pseudo-properties
        PropertyBag bag = (PropertyBag)value;
        string[] keys = bag.GetKeys();
        PropertyDescriptor[] props = Array.ConvertAll(
            keys, key => new PropertyBagPropertyDescriptor(key));
        return new PropertyDescriptorCollection(props, true);
    }
}

static class Program {
    [STAThread]
    static void Main() { // demo form app
        PropertyBag bag = new PropertyBag();
        bag["abc"] = "def";
        bag["ghi"] = "jkl";
        bag["mno"] = "pqr";
        Application.EnableVisualStyles();
        Application.Run(
            new Form {
                Controls = { new PropertyGrid {
                    Dock = DockStyle.Fill,
                    SelectedObject = bag
                }}
            });
    }
} 
```

# c# - 如何封装具有类属性的列表？

> ID：931649
> 
> 赞同：0
> 
> 时间：2009-05-31T08:33:24.453
> 
> 标签：c#, .net, asp.net, generics

如何封装以下代码（我需要重构）

```
 public class mycollection
{
        private DateTime tarih;
        private int sira;
        private int visitingcount;

        public DateTime TARIH { get { return tarih; } set { tarih = value; } }
        public int SIRA { get { return sira; } set { sira = value; } }
        public int VISITINGCOUNT { get { return visitingcount; } set { visitingcount = value; } }
}
```

**我在下面使用了这个类**

```
DataRow[] rows = dsChart.Tables[0].Select("TARIH>='" + DateGap1 + "' and TARIH<='" + DateGap2 + "'");

                                list = new List<mycollection>();
                                foreach (DataRow dr in rows)
                                {
                                    mycollection mycol = new mycollection();
                                    mycol.TARIH = Convert.ToDateTime(dr["TARIH"].ToString());
                                    mycol.SIRA = Convert.ToInt32(dr["SIRA"].ToString());
                                    mycol.VISITINGCOUNT = Convert.ToInt32(dr["VISITINGCOUNT"].ToString());
                                    list.Add(mycol);
                                }
```

**我需要这样：**

```
 public static void LoadDepartman(string departmanName)
        {
            List<StuffDepartman> li = new List<StuffDepartman>();
            GetDepartman departman = new GetDepartman();
            DataSet ds = departman.GetDepartmanA(departmanName);
            foreach (DataRow dr in ds.Tables[0].Rows)
            {
                li.Add(new StuffDepartman
                {
                    Name = dr["Name"].ToString(),
                    SurName = dr["SurName"].ToString(),
                    Address = dr["Address"].ToString(),
                    Phone = dr["Phone"].ToString(),
                    DepartmanName = dr["DepartmanName"].ToString(),
                    Salary =int.Parse( dr["Salary"].ToString()),
                    Married = dr["Married"].ToString()
                }
                );
            }
            HttpContext.Current.Session["Stuffs"] = li;

        }
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T08:58:20.487

（我不完全理解前两个示例与第三个示例的关系......它们似乎没有任何共同点）

那么目前的中断是什么？我能看到的最大问题是（IIRC）要*可靠地*与`Session`（具有不同的后端实现）一起使用，该项目必须是可序列化的（var `BinaryFormatter`），但这可能就像`mycollection`用`[Serializable]`.

对于 info`mycollection`是一个令人困惑的名称，它是一个**row entity**，而不是实际的集合 - 如果你有 C# 3.0，你可以使用自动实现的属性来简化一些事情：

```
[Serializable]
public class SomeSensibleName
{
    public DateTime Tarih {get;set;}
    public int Sira {get;set;}
    public int VisitCount {get;set;}
} 
```

然而; 目前尚不清楚（从您的代码中）这是否会改变任何事情。请你能澄清一下目前正在发生的事情吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T12:01:19.723

如果我理解正确，这就是您正在寻找的重构：

```
DataRow[] rows = dsChart.Tables[0].Select("TARIH >='" + DateGap1 + "' and TARIH <='" + DateGap2 + "'");
List<mycollection> list = new List<mycollection>();
foreach (DataRow dr in rows)
{
    list.Add(new mycollection
    {   
      TARIH = Convert.ToDateTime(dr["TARIH"].ToString());
      SIRA = Convert.ToInt32(dr["SIRA"].ToString());
      VISITINGCOUNT = Convert.ToInt32(dr["VISITINGCOUNT"].ToString());
    });
} 
```

请记住，要使其正常工作，您需要运行 .NET Framework 3.x (VS2008)。

# java - 有哪些策略可以对调度程序进行单元测试？

> ID：931650
> 
> 赞同：14
> 
> 时间：2009-05-31T08:34:29.723
> 
> 标签：java, multithreading, unit-testing

这篇文章一开始是“单元测试多线程代码中有哪些常见模式？”，但我发现一些关于 SO 的[其他](https://stackoverflow.com/questions/12159/how-should-i-unit-test-threaded-code) [讨论](https://stackoverflow.com/questions/352695/best-way-to-run-multi-threaded-nunit-tests)普遍同意“It is Hard (TM)”和“It Depends (TM)”。所以我认为缩小问题的范围会更有用。

***背景***：我们正在实现一个简单的调度程序，它为您提供了一种在启动和停止作业时注册回调的方法，当然还可以配置调度频率。目前，我们正在围绕 java.util.Timer 制作一个轻量级包装器。

***方面***：

*   `addJob(jobSchedule, jobArgs,jobListener)`我还没有找到一种方法来仅依赖公共接口（例如，`removeJob(jobId)`）来测试这个调度程序。

*   我如何根据指定的时间表调用作业这一事实？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-31T09:03:29.010

您可以使用**记录器对象**来记录调度程序的每个单元测试中的顺序、时间和其他有用的东西。测试很简单：

1.  创建一个**记录器对象**
2.  配置计划
3.  执行单元测试
4.  检查记录器对象是否与时间表“兼容”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-02T15:27:28.280

还要记住的一件事是，您不需要测试 Timer 是否有效。您可以编写 Timer 的模拟版本（通过扩展类或使用[EasyMock](http://easymock.org/Links.html)）来简单地检查您是否正确调用它，甚至可能替换足够多以至于您根本不需要线程。在这种情况下，如果您的作业侦听器有足够的回调来跟踪调度程序，那么这可能比需要的工作更多。

另一件要记住的重要事情是，在测试调度程序时，使用跟踪调度程序如何工作的自定义作业；在测试计划作业时，直接调用回调而不是通过调度程序。您可能有一个更高级别的集成测试，可以同时检查两者，具体取决于系统。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-31T10:35:44.097

这样的调度程序可能会表现出许多故障模式，并且每种故障模式很可能都需要自己的测试用例。这些测试用例可能非常不同，因此“视情况而定”。

对于在 Java 中测试并发软件的一般情况，我推荐 JavaOne 2007 中的这个演示文稿：[测试并发软件](http://developers.sun.com/learning/javaoneonline/j1sessn.jsp?sessn=TS-2220&yr=2007&track=5)。

为了测试调度程序必须准确地按照他们的时间表执行作业，我会创建时间本身的抽象。我在我的一个项目中做过类似的事情，我有一个时间或时钟界面。默认实现将是毫秒时间，但在测试期间，我将使用 TickTime 切换它。此实现将允许我的单元测试控制时间提前以及提前多少。

这样，您可以编写一个测试，其中一个作业被安排为每 10 个滴答运行一次。然后您的测试只是推进滴答计数器并检查以确保作业以正确的滴答运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-02T18:32:42.723

测试并发代码的几种方法。

*   在负载下多次运行相同的代码，一些错误只是偶尔出现，但如果重复执行，就会始终如一地出现。
*   将不同线程/作业的结果存储在诸如 BlockingQueue 之类的集合中。这将允许您检查当前线程中的结果并及时完成（没有丑陋的任意睡眠语句）

如果您发现测试并发性很困难，请考虑重构您的对象/组件以使其更易于测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-06T13:22:35.530

如果调度程序委托给`Executor`或`ExecutorService`运行任务，您可以使用依赖注入来删除对类型的直接依赖`Executor`，并[使用简单的单线程`Executor`](https://stackoverflow.com/questions/53169939/executor-suitable-for-non-thread-safe-code)来测试调度程序的大部分功能，*而无需*真正多线程的复杂性代码。一旦你调试了这些测试，你就可以继续进行更难但现在数量大大减少的线程安全测试任务。

# c++ - 错误“致命错误 C1034：windows.h：未设置包含路径”

> ID：931652
> 
> 赞同：36
> 
> 时间：2009-05-31T08:34:59.897
> 
> 标签：c++, visual-studio

操作系统 Windows Vista Ultimate

我正在尝试运行一个名为*minimum.c*的程序。当我在命令行键入时：

```
C:\Users\nathan\Desktop>cl minimum.c
Microsoft (R) 32 位 C/C++ 优化编译器版本 14.00.50727.762 用于 80x86

版权所有 (C) 微软公司。版权所有。

最小的.c
minimum.c(5) : 致命错误 C1034: windows.h: 没有包含路径集

```

我已经设置了所有路径：

```
C:\用户\内森\桌面>路径
PATH=C:\Program Files (x86)\Microsoft Visual Studio 8\VC\bin;C:\Windows\system3
;C:\Windows;C:\Windows\System32\Wbem;C:\Program Files (x86)\ATI Technologies\AT
.ACE\Core-Static;C:\Program Files\Intel\DMIX;c:\Program Files (x86)\Microsoft S
L Server\100\Tools\Binn\;c:\Program Files (x86)\Microsoft SQL Server\100\DTS\Bi
n\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files (x86)\Java\jdk1.
.0_13\bin;C:\Program Files (x86)\Autodesk\Backburner\;C:\Program Files (x86)\Co
mon Files\Autodesk Shared\;C:\Program Files (x86)\Microsoft DirectX SDK（3 月
009)\Include;C:\Users\nathan\Desktop\glut-3.7.6-bin\glut-3.7.6-bin;C:\Program F
文件 (x86)\Microsoft Visual Studio 8\Common7\IDE;C:\Program Files (x86)\Microsof
 Visual Studio 8\VC\PlatformSDK\Include;C:\Program Files (x86)\Microsoft Visual
Studio 8\VC\PlatformSDK\Include\gl

```

我已经确保*windows.h*在目录中。我也在设置路径。它在`C:\Program Files (x86)\Microsoft Visual Studio 8\VC\PlatformSDK\Include`。

我有 Visual Studio 2005。

我已经用尽了所有的可能性。有任何想法吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-05-31T08:49:35.263

您还可以在命令之前从目录（位于您的路径中）运行*vcvars32.bat*文件。`C:\Program Files\Microsoft Visual Studio 8\VC\bin``cl`

像这样：

```
C:\Users\nathan\Desktop>vcvars32
C:\Users\nathan\Desktop>cl minimal.c 
```

*vcvars32*调用`C:\Program Files\Microsoft Visual Studio 8\Common7\Tools\vsvars32.bat`设置编译和链接所需的环境。

环境变量是`INCLUDE`、`LIB`和`PATH`。

编译器在编译过程中在 INCLUDE 路径中查找头文件，在链接过程中从 LIB 路径中获取库。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-05-08T21:12:41.347

对我来说，使用 Visual Studio 2017，

```
"C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\Tools\vsdevcmd.bat" 
```

是编译前使用的命令`cl`。

[这](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line)是文档。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-31T08:39:27.077

启动命令行时，是否运行了 Visual Studio 安装程序附带的命令行快捷方式？这将为您设置正确的环境变量，以便编译正常工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-31T15:40:27.753

您已将 INCLUDE 路径添加到 PATH 环境变量中。按照其他人的建议使用 vcvars32.bat。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-17T04:02:30.033

在您的项目文件夹中，打开一个 PowerShell 窗口并运行：

```
cmd /c 'call "C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\VC\Auxiliary\Build\vcvars64.bat" && cl minimal.c ' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-11-14T22:52:12.683

您的路径变量可能太长。`PATH`Windows 在环境变量中不能超过 1023 个字符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-28T20:28:34.863

我遇到了同样的问题

```
致命错误 C1034：stdio.h：未设置包含路径

```

运行`C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build>vcvars64.bat`cmd/batch 脚本后会得到

```
致命错误 C1083：无法打开包含文件：'stdio.h'：没有这样的文件或目录

```

错误信息。从[这里](https://stackoverflow.com/a/54653035/4999991)，以及该页面上的其他帖子，我怀疑`Windows 10 SDK`必须安装该软件包。`vcvars64.bat`从上面提到的路径安装并运行脚本后，问题就解决了。

**PS**正如[这里](https://code.visualstudio.com/docs/cpp/config-msvc)所解释的，作为手动查找和运行上述 cmd/batch 脚本的替代方法，您可以只执行`![Windows Key](https://i.stack.imgur.com/B8Zit.png)`+`Q`并搜索`Developer Command Prompt for ...`，在我的情况下是`Developer Command Prompt for VS 2022`.

# perl - 如何进行匹配根目录中单个文件的 Catalyst 操作？

> ID：931653
> 
> 赞同：0
> 
> 时间：2009-05-31T08:37:43.383
> 
> 标签：perl, catalyst

我无法创建与根目录中的单个文件匹配的 Catalyst 操作。我想匹配如下所示的 URL：

```
http://foo:3000/about.html 
```

我在根控制器中编写了以下操作：

```
sub static :Path :Args(1)
{
    my ($self, $c, $file) = @_;
    …
} 
```

但动作不匹配，Catalyst`default`改为运行动作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-01T08:49:31.700

Catalyst subversion 中的 rev 10406 是针对您的问题的失败测试，​​我们可以确认这是一个错误。这已经永远被破坏了，不幸的是没有人给我们一个错误报告或“官方”之前发现它：/

本周我将尝试修复（或让其他人修复它），一旦完成，我们将发布 5.80005，因为在主干中已经准备好足够的其他修复，值得这样做。

感谢所有引起核心团队关注的人，singingfish++

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T00:20:16.350

好的，这似乎是某种向后兼容性错误。以下工作（只需`handle_404`在控制器中的其他操作之前声明该操作：

```
package TestApp::Controller::Root;

use strict;
use warnings;
use parent 'Catalyst::Controller';

__PACKAGE__->config->{namespace} = '';

sub handle_404 :Path {
    my ( $self, $c ) = @_;
    $c->response->body( 'Page not found' );
    $c->response->status(404);
}

sub anaction :Path : Args(1) {
    my ($self, $c, $arg) = @_;
    $c->res->body($arg);
}

sub end : ActionClass('RenderView') {}

1; 
```

然后运行测试脚本：

```
$ CATALYST_DEBUG=0 script/testapp_test.pl /foo
foo 
```

# design-patterns - 服务层与辅助对象？

> ID：931656
> 
> 赞同：4
> 
> 时间：2009-05-31T08:41:30.380
> 
> 标签：design-patterns

我想听听您对具体案例的意见。这是关于服务层与辅助对象的——我不是在寻找理想主义的模式，而只是很好地理解我亲爱的编程同事对此的看法：

在我当前的应用程序中，我有一个完整的域模型（Linq to Sql，非常轻量级的存储库，然后使用跨 IQueryable<> 的扩展方法来根据业务需求进行过滤/排序/排序），然后是一个包含基于分组的服务的服务层职责，例如 IRegistrationService（注册用户，检查登录名的可用性等）

现在警告。我还有一些“助手”类，它们可以做加密之类的事情，而且我还在该目录中填充了其他不可分组的元素（例如自定义枚举等）

我现在需要创建一个新类，它将为我的应用程序处理自定义链接的生成，这仅比 String.Format 具有不同的对象并考虑到它们的属性。内部运作无关紧要。但是，我很难实例化某种“LinkService”，现在它会做到这一点——我觉得当我完成后，我最终会得到 100 个服务（以及它们的接口 + 实现）。

同时，我不想在我的“Helpers”命名空间/目录（例如 LinkManager）中创建一些松散的类和其他东西的混合。

该怎么办？你们把仍然有点业务层级别的东西放在哪里，但同时你如何限制业务/服务层中的项目数量？您将所有这些小助手类放在哪里，例如简化和管理会话访问的中间对象（我假设您希望拥有这种强类型 - 至少我这样做）？

让我知道你的想法？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T08:54:04.380

对我来说，使用正确的工具来完成工作是关键。如果您需要某种工具来生成链接，这基本上是实体属性到格式化字符串的映射，那么请编写一个工具来执行此操作。它不一定是服务......相反，为类似的东西提供完整的服务可能是矫枉过正。但是，我不会将其归为您的一般“帮手”。听起来这是有特定目的和意图的东西，背后有特定的行为。因此，将其放在适合该行为的位置……即使那是一个新项目。

我尽量不在我的应用程序中有一大堆“通用”代码。一切都有目的并实现特定的行为。有时，这种目的和行为是高度可重用的，但我仍然尝试在逻辑上组织我的领域的那些可重用元素。从高层次来看，我看到我的大部分应用程序分为以下几类：

1.  客户
2.  API/服务
3.  领域
4.  数据访问（可选）
5.  框架

很多这种可重用的功能都属于框架和领域之间的一个下层区域。它的一部分可能作为一些基类和/或接口以及框架中的支持类型存在，另一半是具体的实现，驻留在我的域中。有时看起来很奇怪，但以这种方式组织它可以帮助我保持我的域尽可能干净（专注于业务问题），同时仍然允许我将常见和可重用的概念抽象为较低级别的“框架”类型。

# javascript - javascript继承

> ID：931660
> 
> 赞同：8
> 
> 时间：2009-05-31T08:44:58.440
> 
> 标签：javascript, inheritance

我知道有很多类似的问题对此有很多很好的答案。我试图查看经典的继承方法或那些闭包方法等。不知何故，我认为它们或多或少对我来说是“hack”方法，因为它并不是 javascript 的设计目的。（如果我错了，欢迎任何人纠正我）。好的，只要它有效，我就可以满足经典的继承模式，例如：

```
PARENTClass = function (basevar) { do something here; };
PARENTClass.prototype = { a: b, c: d}; // prototype is auto gen 

// Inheritance goes here
CHILDClass = function (childvar) { do something; };
CHILDClass.prototype = new PARENTClass(*1); // Actual inheritance to the prototype statement
// Instance
CHILDInstance = new CHILDClass(whatever); 
```

以上是我理解的JS的继承。但是我不知道如何实现的一种情况是，如果我想在创建对象期间（即在构造函数中）进行一些初始化，并且可以立即使用新对象....我对问题的说明可能不会说得太清楚了，所以让我用下面的 C# Psuedo 来解释我想要做什么：

```
class PARENT {
    public PARENT (basevar) { ... }
}
class CHILD : PARENT {
    public CHILD (basevar) : PARENT (basevar) // constructor of child, and call parent constructor during construct.
    { ... }
} 
```

出于某种原因（如 init.UI 元素），将它们放在构造函数中似乎是最好的方法。任何人都知道我该怎么做。

PS：在*1中，我不知道应该放什么。PS2：上述情况我DID发现jquery.inherit库可以做到，不知道不使用库能不能实现。PS3：或者我的理解是错误的。由于 javascript 并非旨在模仿 OOP（这就是我称之为 hack 的原因），因此实现这一点的“正确”逻辑是什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-31T09:24:29.250

这不是*黑客攻击*。JavaScript 是一种原型语言，由[Wikipedia](http://en.wikipedia.org/wiki/Prototype-based_programming)定义为：

> ..classes 不存在，行为重用（在基于类的语言中称为继承）是通过克隆作为原型的现有对象的过程来执行的。

正如它所说，JavaScript 中不使用类。您创建的每个对象都是 JavaScript 的后代`Object`；JavaScript 中的所有对象都具有该`prototype`对象，并且您从对象的原型对象创建“继承”方法和属性的所有对象实例。查看 MDC[原型](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/prototype)对象参考以获取更多信息。

至此，当您拨打该线路时：

```
CHILDClass.prototype = new PARENTClass(); 
```

这允许`CHILDClass`对象从对象向其原型对象添加方法和属性`PARENTClass`，这产生了类似于基于类的语言中存在的继承思想的效果。由于该`prototype`对象影响该对象创建的每个实例，这允许父对象的方法和属性出现在您的子对象的每个实例中。

如果要在子类的构造函数中调用父类的构造函数，则使用 JavaScript`call`函数；这允许您在子类的构造函数的上下文中调用父类的构造函数，因此将子类中的新原型属性设置为它们在父类中设置的内容。

您也不需要在您指定的地方放置任何东西`*1`，因为该行仅用于将方法和属性添加到子类的原型对象；但是，请记住，它调用了父类的构造函数，因此如果有任何对父类构造函数的操作至关重要的参数，您应该检查这些参数是否存在，以避免 JavaScript 错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-31T09:01:27.423

您可以像这样在子类构造函数中手动调用父构造函数：

```
CHILDClass = function (basevar) {
  PARENTClass.call(this, basevar);
  // do something;
}; 
```

这里的技巧是使用`call`方法，它允许您在不同对象的上下文中调用方法。有关详细信息，请参阅[文档。`call`](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/call)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T11:27:16.303

JavaScript 没有对继承层次结构的内置支持，因为类型扩展应该通过聚合来完成，即如果要在实例之间共享属性，则将所需的功能直接添加到对象本身或其原型中。

尽管如此，JS 足够强大，可以实现其他形式的对象构造，包括经典继承。

给定一个[克隆函数](http://mercurial.intuxication.org/hg/js-hacks/raw-file/tip/clone.js)——这足以添加“真正的”原型继承，而不是 JavaScript 的混蛋——你的示例可以这样实现：

```
function ParentClass(baseVar) {
    // do stuff
}

// don't overwrite the prototype object if you want to keep `constructor`
// see http://joost.zeekat.nl/constructors-considered-mildly-confusing.html
ParentClass.prototype.a = 'b';
ParentClass.prototype.c = 'd';

function ChildClass(childVar) {
    // call the super constructor
    ParentClass.call(this, childVar);
}

// don't inherit from a ParentClass instance, but the actual prototype
ChildClass.prototype = clone(ParentClass.prototype);
ChildClass.prototype.e = 'f'; 
```

也可以为基于类的继承添加一些语法糖——我自己的实现[可以在这里找到](http://mercurial.intuxication.org/hg/js-hacks/raw-file/tip/class.js)。

然后上面的示例将读取

```
var ParentClass = Class.extend({
    constructor: function(baseVar) {
        // do stuff
    },
    a: 'b',
    c: 'd'
});

var ChildClass = ParentClass.extend({
    e: 'f'
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-30T19:27:09.843

我有一个轻量级 javascript OOP 包装器，它提供“类类”继承，您可以在其中覆盖基本方法或调用基本构造函数或成员。

你定义你的类是这样的：

```
//Define the 'Cat' class
function Cat(catType, firstName, lastName)
{
    //Call the 'Animal' constructor.
    Cat.$baseNew.call(this, firstName, lastName);

    this.catType = catType;
}
//Extend Animal, and Register the 'Cat' type.
Cat.extend(Animal, { type: 'Cat' }, {
    hello: function(text)
    {
        return "meaoow: " + text;
    },
    getFullName: function()
    {
        //Call the base 'Animal' getFullName method.
        return this.catType + ": " + Cat.$base.getFullName.call(this);
    }
})

//It has a built-in type system that lets you do stuff like:

var cat = new Cat("ginger", "kitty", "kat");
Cat.getType()                     // "Cat"
cat.getBaseTypesAndSelf()         // ["Cat","Animal","Class"]
cat.getType()                     // "Cat"
cat.isTypeOf(Animal.getType())    // "True"

var dynamicCat = Class.createNew("Cat", ["tab","fat","cat"])
dynamicCat.getBaseTypesAndSelf()  // ["Cat","Animal","Class"]
dynamicCat.getFullName()          // tab: fat cat 
```

源代码位于：[Class.js](http://code.google.com/p/ajaxstack/source/browse/trunk/release/latest/Class.js)

我在我的博客文章中也有更多关于[javascript 中的 OOP 的详细信息](http://www.servicestack.net/mythz_blog/?p=3)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-29T04:59:03.340

只是想我会提到您要使用的经典模式的一些问题：

1.  超类上的引用变量将在所有实例上作为本质上的静态可用。例如，如果您在 super 中有 var arr = [1,2,3] 并执行 instance_1.arr.push(4) instance_2.arr.push(5) 所有这些实例都将“看到”更改。
2.  所以你解决了 1\. 使用 Zakas 称为“构造函数窃取”的 Ayman 解决方案，但现在你调用构造函数两次：一次用于原型，一次用于构造函数窃取。解决方案 - 为您的原型使用像 inheritPrototype 这样的帮助器（我在这篇文章中展示了它的整个实现：[inheritPrototype 方法](https://stackoverflow.com/questions/892467/javascript-inheritance)FWIW，这基本上来自 Zakas 的书的第 181 页和一些 Crockford 研究的组合。

3.  没有隐私（但话又说回来，你需要使用像持久对象模式这样的东西来获得这个，这可能不是你想要的）

4.  对象定义被“悬空”：解决方案 - 放置一个 if 语句检查您的原型的任何函数，然后使用原型文字定义原型。

**我在 github 上运行了所有这些的示例！！！**

对我来说，真正深入了解两者同样是一个挑战：Zakas 和 Crockford 关于对象创建和继承的书籍。我还需要尝试一些不同的 JavaScript TDD 框架。所以我决定写一篇关于 TDD 框架和 JavaScript 对象创建和继承的文章。它有运行代码和 jspec 测试！这是链接：* [我的 GitHub 开源论文/书籍](http://github.com/roblevintennis/Testing-and-Debugging-JavaScript)

# java - 如何扩展 Quartz 调度器？

> ID：931662
> 
> 赞同：11
> 
> 时间：2009-05-31T08:46:55.363
> 
> 标签：java, scalability, scheduling, quartz-scheduler, scaling

我计划使用[Quartz 调度](http://www.quartz-scheduler.org/)器，因为我阅读了很多关于它的好意见。

我的问题如下：在任何给定时间，系统中都会有数千个触发器。大多数触发器只会触发一个事件并死亡。此外，很可能我将不得不在分配后取消许多作业（基于新输入）。

Quartz可以扩展到这个吗？推荐哪个 JobStore？我计划在 mysql 上使用 JDBC 之一。

**附加信息**：我的工作将发送电子邮件或通过 HTTP 发布数据到其他服务（通过 WAN）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-31T09:03:02.257

常见问题解答中有一些提示和建议：

[Quartz 可以运行多少个作业？](https://github.com/quartz-scheduler/quartz/blob/master/docs/faq.adoc#miscellaneous-questions)

摘自答案：

> 所以我只想说，有分期的 Quartz 管理着数十万个作业和触发器，也就是说，在任何给定的时间执行几十个作业——甚至没有使用 Quartz 的负载平衡功能.

Quartz 用户论坛也有一些讨论，有在类似条件下使用过 Quartz 的开发者的经验报告。

*   [可扩展性和性能](http://forums.opensymphony.com/thread.jspa?messageID=660460)- Jim Nichols 正在运行数千个集群作业，并通过电子邮件自愿提供更多信息
*   [石英性能](https://groups.google.com/forum/#!forum/quartz-scheduler)- Stey Baptiste 每天运行 200 万个作业，每秒 10 个作业

**2015-01-12 更新：**不幸的是，上面列表中的链接在论坛移动时损坏了，我无法找到新的工作链接。无论如何，我都会留下链接，以防他们帮助从archive.org或其他地方挖掘信息。Quartz 官方论坛现在是[Google Groups 上的quartz-scheduler](https://groups.google.com/forum/#!forum/quartz-scheduler)。

# oop - 为什么文件和目录没有单独的命名空间？

> ID：931672
> 
> 赞同：1
> 
> 时间：2009-05-31T08:53:26.427
> 
> 标签：oop, namespaces, theory, naming, filenames

文件和目录可以有不同的命名空间，但仍然可以用来标识特定的文件，因为同名的文件和目录可以通过不同的事物来区分。

原始字段和引用字段也可以具有不同的名称空间（在 Java 中），因为如果原始字段和引用字段具有相同的名称，则可以通过不同种类的事物来识别它们。

像这样在其他地方使用单独的名称空间。例如，在 Java 中，您可以拥有一个方法`exampleName()`和一个字段`exampleName`，尽管它们具有相同的名称，但它们是通过不同种类的事物来区分的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T09:04:50.570

首先，这个问题是特定于语言的。在纯 OOP 语言中，原子元素和复合元素之间没有区别。一切都是对象。出于类似的原因，在纯函数式语言中，您不能将函数和变量命名相同。

其次，如果您有多态操作，则无法判断您引用的是哪个变量。例如，由于多态操作，您不能为文件和目录使用不同的命名空间，例如

```
cp foo bar 
```

cp 适用于文件和目录，如果您有不同的名称空间，则无法说出您的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T09:05:48.710

我不相信这是个好主意。我想原因涉及文件系统代码的性能和简单性。如果目录列表必须走 2 或 3 或更多不同的路径，具体取决于您认为应该拥有多少不同的命名空间，这可能会使代码复杂化。

此外，考虑可能出现的最终用户混淆。目前，我们通过使用文件扩展名在文件系统中提供了一种命名空间。您可以让 file.txt 和 file.dll 和 file.exe 都存在于同一目录中。当这些文件同时存在时会发生什么是一个值得关注的问题 - 这是病毒编写者使用某种社会工程形式让您点击错误文件的一种方法。想象一下，如果您也可以将目录与同名文件混淆？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T13:19:23.160

目录和文件不一定如此不同。它们都是父目录中的条目，只是带有一个标志来指示条目是否是目录。您可以打开一个目录并像读取文件一样读取它，只是可以对其进行某些其他操作-符号链接的工作方式相同。（此描述偏向于 Unix 文件系统视图，但我认为 DOS/Windows 视图的工作方式大致相同）。在任何目录中，都有一组成员名称，并且文件系统强制执行唯一性约束，即目录只能有一个具有给定名称的成员。

考虑 Java 方法名称与字段名称的比较——回到 C 语言中，您不能拥有同名的全局函数和全局变量，因为目标文件中的所有符号都在一个命名空间中。但是你可以使用 C++，因为函数“void foo()”被映射到损坏的符号名称（“foo__vv”或其他东西）。所以与其说它们有一个单独的命名空间，不如说对于字段“foo”和方法“foo()”来说，进入命名空间的键是不同的。鉴于您无法获得键冲突，它们看起来像是单独的命名空间，但它真的是这样实现的吗？

# php - 分离 php 和 html... 为什么？

> ID：931677
> 
> 赞同：5
> 
> 时间：2009-05-31T08:56:47.183
> 
> 标签：php, html, formatting

所以我在各种网站、页面上看到了一些评论，以及我提出的关于分离 php 和 html 的问题。

我认为这意味着这样做：

```
<?php

myPhpStuff();

?>

<html>

<?php

morePhpStuff();

?> 
```

而不是：

```
<?php

    doPhpStuff();

    echo '<html>';

    ?> 
```

但为什么这很重要？这样做真的很重要还是一种偏好？

* * *

此外，当我开始使用 PHP 时，似乎在 while 循环中中断 PHP 之类的操作会导致错误。也许这不再是真的，或者从来都不是。

* * *

我用这个概念做了一个小例子，但对我来说它看起来很乱：

```
<?php

$cookies = 100;
while($cookies > 0)
{
    $cookies = $cookies -1;
?>
    <b>Fatty has </b><?php echo $cookies; ?> <b>cookies left.</b><br>

<?php

} 

?> 
```

是否有在 PHP 中包含 HTML 更好的情况？

```
<?php

$cookies = 100;
while($cookies > 0)
{
    $cookies = $cookies -1;

    echo'<b>Fatty has </b> '.$cookies.' <b>cookies left.</b><br>';
} 

?> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-31T09:08:46.147

当人们谈论分离 PHP 和 HTML 时，他们可能指的是将网站的表示与用于生成它的代码分离的做法。

例如，假设您有一个 DVD 出租网站，并且在主页上显示了可用 DVD 的列表。您需要做几件事：从数据库中获取 DVD 数据，提取和/或格式化该数据，并可能混合来自多个表的一些数据。将其格式化为输出，将 DVD 数据与 HTML 相结合以创建用户将在浏览器中看到的网页。

将 HTML 生成与其余代码分开是一种很好的做法，这意味着您可以轻松更改 HTML 输出（表示），而无需更改业务逻辑（数据的读取和操作）。反之亦然，您可以更改您的逻辑，甚至您的数据库，而无需更改您的 HTML。

一种常见的模式称为[MVC（模型视图控制器）](http://en.wikipedia.org/wiki/Model-view-controller)。您可能还想查看 Smarty 库——它是一个广泛使用的 PHP 库，用于分离表示和逻辑。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-31T10:30:41.037

让我们清楚什么不是分离

*   你从 php 模式切换到 html 模式
*   您使用 print 或 echo 语句写出 html 代码
*   你在 html 文件中使用小的 php snipplets

如果你这样做，根本没有分离，无论你是从 php 转义到 html 块还是以其他方式将 php 代码放入 html。

看看一个好的模板引擎，手册的“为什么使用....”部分有很多理由。我建议 www.smarty.net 特别是[http://www.smarty.net/whyuse.php](http://www.smarty.net/whyuse.php)

**现在它会回答你所有的问题。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-31T09:16:03.730

在项目中将应用程序逻辑与表示逻辑分开是非常重要的。好处包括：

*   **可读性**：如果不混合 PHP 和 HTML，您的代码将更容易阅读。此外，如果 HTML 在 PHP 字符串中存储和转义，可能会变得难以阅读。
*   **可重用性**：如果您在 PHP 代码中对 HTML 字符串进行硬编码，则该代码将非常适合您的项目，并且无法在以后的项目中重用您的代码。另一方面，如果您编写一次只执行一项任务的小函数，并将 HTML 放入单独的模板文件中，那么在未来的项目中重用您的代码将是可能的，并且会容易得多。
*   **在团队**中工作：如果您在一个包含开发人员和设计人员的团队中工作，那么分离应用程序逻辑和演示模板将对双方都有利。开发人员将能够在应用程序上工作而不必担心演示，而设计人员（他们不一定会非常了解 PHP）将能够创建和更新模板而不会弄乱 PHP 代码。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-31T09:26:49.900

对于包含大量 HTML 的页面，将 PHP 代码嵌入到页面中可能会更容易。这是 PHP 背后的最初意图之一。无论如何，当您开发具有大量逻辑、不同类型的连接、数据操作的应用程序时……如果您只想将它​​们嵌入显示给用户的相同页面中，那么您的 PHP 代码就会变得过于复杂。然后开始维护的故事。您将如何更改代码中的某些内容、修复错误、添加新功能？

最好的方法是将不同文件（甚至目录）中的逻辑（大部分代码是 PHP）与页面文件（其中大部分代码是 HTML、XML、CSV ......）分开。

多年来，这一直是开发人员关注的问题，并且有一些建议可以处理这些一般性问题，称为设计模式。

由于不是每个人都有经验，并且可以将这些设计模式应用到他的应用程序中，一些有经验的开发人员创建了框架，这将帮助其他开发人员使用该框架所掌握的所有知识和经验。

当您查看 toady 最常用的 PHP 框架时，您会看到所有这些框架都将代码放入特殊目录中的 PHP 类中，进行配置，并且……在这些文件中，您都看不到一行 HTML。但是有用于向用户显示结果的特殊文件，它们有很多 HTML，因此您可以将 PHP 值嵌入到这些 HTML 页面中以向用户显示。但请记住，这些值不是在同一页面上计算的，它们是许多其他 PHP 代码的结果，这些代码写在其他没有 HTML 的 PHP 文件中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-31T09:33:17.093

我发现最好将应用程序逻辑与视图文件分开（使用带有 MVC 的 CodeIgniter 框架做得很好），因为它使代码看起来相对整洁且易于理解。我还发现，将两者分开会减少 PHP 错误的余地，如果 HTML 元素与 PHP 分开，则可能出错的 PHP 数量会更少。

最终，我认为这取决于偏好，但我认为分离具有以下优点：

*   更整洁的代码
*   误差幅度较小
*   易于解释
*   更容易更改 HTML 元素
*   更容易更改应用程序逻辑
*   更快的加载（HTML 不是从 Parser->Browser 直接进入浏览器）

然而，一些缺点可能是：

*   它仅适用于 PHP5（我相信，可能是错误的，如果需要，请纠正）
*   它可能不是人们习惯的
*   如果做得不正确（没有缩进等，但是这对任何东西都是一样的）

但正如你所看到的，利大于弊。尽量不要将两者混为一谈，一些分离和一些整合——这可能会让你自己和其他与你一起工作的开发人员感到困惑。

我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-31T09:05:23.377

第一种方法的好处（分离PHP和HTML）：

*   你不需要转义字符

*   代码编辑器也可以突出/缩进标记。

*   它可以说更容易阅读

*   与第二种方法相比，这种方法没有缺点。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-31T09:06:49.240

功能上：它们都可以工作，所以最终它是一种偏好。

但是，您可能会认为注释也是一种偏好，您的代码将在没有注释的情况下编译和运行完全相同。然而，大多数人会同意注释对于编写和维护好的代码是必不可少的。我认为这是一个类似的主题。从长远来看，如果两者分开，它将更容易阅读和维护代码。

那么重要吗？我会说是的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-31T09:04:47.760

我开始：第一个你可以在所见即所得编辑器中打开，仍然可以看到一些标记，这可能更容易维护。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-31T09:08:56.863

它说你在 echo '' 中输入的内容首先由编程语言处理，然后发送到浏览器，但如果你直接在没有 php 的情况下放入 html 代码，该代码将加载更快，因为不涉及编程。

正如上面所说的第二个原因是您应该将“大型编程代码”与 html 代码分开存储，并且在 html 代码中只需调用一些调用来打印结果，例如“echo $variable”。或者使用 Smarty 之类的模板引擎（就像我一样）。

最好的问候，亚历山德鲁。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-31T09:30:56.990

哎哟!

您问题中的所有示例都完全无法阅读。我会说，您自己和那些可能会阅读您的代码并使用某种模板引擎的人（例如[Smarty](http://www.smarty.net/) ）这样做。它非常易于设置和使用，它将您的代码与演示分开。它不需要您将所有内容都放在类中，它只是确保您的逻辑在*一个*文件和演示文稿中 - 在*另一个*文件中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-31T09:04:50.710

我不知道如何在 php 但在 asp.net 中分离具有以下优点。1\. 分离代码易于理解和开发 2\. 设计者可以同时使用 html 开发者可以编写代码

# javascript - 可以看到访问者使用 javascript 在网站上移动鼠标的位置吗？

> ID：931683
> 
> 赞同：0
> 
> 时间：2009-05-31T09:01:43.663
> 
> 标签：javascript

我知道有些网站可以检测鼠标在网站屏幕上的移动位置，然后显示该访问的电影。比如robotreplay或clicktale。

他们是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T09:10:39.120

使用`onmousemove`事件处理程序来捕获鼠标移动。比您可以读取鼠标光标的 x 和 y 坐标：

```
window.onmousemove = function(e) {
    document.documentElement.innerHTML = e.x + ":" + e.y;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T09:04:10.553

[鼠标移动](http://www.w3schools.com/jsref/jsref_onmousemove.asp)事件。

# jquery - 使用 JQuery Validate Plugin 验证具有相同名称的多个表单字段

> ID：931687
> 
> 赞同：51
> 
> 时间：2009-05-31T09:03:32.320
> 
> 标签：jquery, validation, jquery-validate

我有一个动态生成的表单，其中包含具有相同名称的输入字段（例如：“map”）。我没有更改字段名称或生成唯一字段名称的选项，因为表单处理程序代码 (Perl/CGI) 旨在处理输入值数组（在本例中`@map`）。

在这种情况下，如何使用 JQuery [Validate Plugin来验证表单？](http://docs.jquery.com/Plugins/Validation "验证")具体来说，我希望提交数组的一个元素具有某个固定值。我目前正在使用一个自定义事件处理程序，它创建一个 JSON 对象，`serializeArray()`然后遍历它以确保满足条件。但是由于我在应用程序的其余部分中使用了验证插件，我想知道是否也可以在这里使用相同的插件来处理这种情况。

感谢您的关注。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-31T12:55:31.817

而不是更改源文件 jquery.validation 您可以简单地覆盖您需要仅在需要它的页面中编辑的功能。

一个例子是：

```
$.validator.prototype.checkForm = function() {
    //overriden in a specific page
    this.prepareForm();
    for (var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++) {
        if (this.findByName(elements[i].name).length !== undefined && this.findByName(elements[i].name).length > 1) {
            for (var cnt = 0; cnt < this.findByName(elements[i].name).length; cnt++) {
                this.check(this.findByName(elements[i].name)[cnt]);
            }
        } else {
            this.check(elements[i]);
        }
    }
    return this.valid();
}; 
```

这可能不是最好的解决方案，但至少它避免了编辑源文件，这些文件可以在以后发布新版本时被替换。您覆盖的函数可能会或可能不会中断的地方。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2010-11-09T17:11:59.333

我知道旧线程，但我在寻找解决同一问题的方法时遇到了它。

此处发布了一个更优雅的解决方案： [http ://web-funda.blogspot.com/2009/05/jquery-validation-for-array-of-input.html](http://web-funda.blogspot.com/2009/05/jquery-validation-for-array-of-input.html)

您只需编辑 jquery.validate.js 并将 checkForm 更改为

```
 checkForm: function() {
    this.prepareForm();
    for ( var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++ ) {
        if (this.findByName( elements[i].name ).length != undefined && this.findByName( elements[i].name ).length > 1) {
            for (var cnt = 0; cnt < this.findByName( elements[i].name ).length; cnt++) {
                    this.check( this.findByName( elements[i].name )[cnt] );
            }
        } else {
            this.check( elements[i] );
        }
    }
    return this.valid();
} 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2009-08-06T02:12:48.863

当我最终尝试在多个字段上进行验证的最简单的方法时，我花了一些时间搜索和尝试不同的东西。每个字段及其克隆共享每个集合唯一的类。我只是用该类遍历输入并像往常一样添加我的验证规则。我希望这可能对其他人有所帮助。

```
 $("#submit").click(function(){
    $("input.years").each(function(){
        $(this).rules("add", {
            required: true,
            messages: {
                required: "Specify the years you worked"
            }
        } );            
    });

    $("input.employerName").each(function(){
        $(this).rules("add", {
            required: true,
            messages: {
                required: "Specify the employer name"
            }
        } );            
    }); 

    $("input.employerPhone").each(function(){
        $(this).rules("add", {
            required: true,
            minlength: 10,
            messages: {
                required: "Specify the employer phone number",
                minlength: "Not long enough"
            }
        } );            
    }); 

    $("input.position").each(function(){
        $(this).rules("add", {
            required: true,
            messages: {
                required: "Specify your position"
            }
        } );            
    });             

    $("input.referenceName").each(function(){
        $(this).rules("add", {
            required: true,
            messages: {
                required: "Specify the reference name"
            }
        } );            
    });         

    $("input.referencePhone").each(function(){
        $(this).rules("add", {
            required: true,
            minlength: 10,
            messages: {
                required: "Specify your reference phone number",
                minlength: "Not long enough"
            }
        } );            
    });

// Now do your normal validation here, but don't assign rules/messages for the fields we just set them for

}); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-06-01T04:47:03.283

我刚刚从插件作者 Jörn Zaefferer 的一封邮件中了解到，除了单选按钮和复选框之外，验证要求字段名称是唯一的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-03-31T15:17:50.140

Jason 的回答可以解决问题，但我不想在我执行此操作的每个表单上添加额外的点击事件。

就我而言，我让验证插件认为以“[]”结尾的名称不同，即使它们可能具有相同的字段名。为此，我在 jquery.validate.js 加载后重写了这两个内部方法。

```
$.validator.prototype.elements= function() {
var validator = this,
    rulesCache = {};

// select all valid inputs inside the form (no submit or reset buttons)
// workaround $Query([]).add until http://dev.jquery.com/ticket/2114 is solved
return $([]).add(this.currentForm.elements)
.filter(":input")
.not(":submit, :reset, :image, [disabled]")
.not( this.settings.ignore )
.filter(function() {
    !this.name && validator.settings.debug && window.console && console.error( "%o has no name assigned", this);

    // select only the first element for each name (EXCEPT elements that end in []), and only those with rules specified
    if ( (!this.name.match(/\[\]/gi) && this.name in rulesCache) || !validator.objectLength($(this).rules()) )
        return false;

    rulesCache[this.name] = true;
    return true;
});
};

$.validator.prototype.idOrName = function(element) {

// Special edit to get fields that end with [], since there are several [] we want to disambiguate them
// Make an id on the fly if the element doesnt have one
if(element.name.match(/\[\]/gi)) {
    if(element.id){
        return element.id;
    } else {
        var unique_id = new Date().getTime();

        element.id = new Date().getTime();

        return element.id;
    }
}

return this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name);
}; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-10-19T20:05:25.710

只需使用输入的未使用属性来存储原始名称，然后只需重命名并附加索引即可：

```
function addMultiInputNamingRules(form, field, rules){    
    $(form).find(field).each(function(index){
    $(this).attr('alt', $(this).attr('name'));
    $(this).attr('name', $(this).attr('name')+'-'+index);
    $(this).rules('add', rules);
}); 
```

}

```
function removeMultiInputNamingRules(form, field){    
    $(form).find(field).each(function(index){
    $(this).attr('name', $(this).attr('alt'));
    $(this).removeAttr('alt');
}); 
```

}

然后在你设置你的验证器之后：

```
addMultiInputNamingRules('#form-id', 'input[name="multifield[]"]', { required:true }); 
```

当你完成验证后，像这样恢复：

```
removeMultiInputNamingRules('#form-id', 'input[alt="multifield[]"]'); 
```

- 希望这可以帮助！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-06-28T19:29:32.660

我正在使用“jQuery 验证插件 1.7”。

为什么多个“$(:input)”共享同名元素没有被验证的问题

是 $.validator.element 方法：

```
elements: function() {
        var validator = this,
            rulesCache = {};

        // select all valid inputs inside the form (no submit or reset buttons)
        // workaround $Query([]).add until http://dev.jquery.com/ticket/2114 is solved
        return $([]).add(this.currentForm.elements)
        .filter(":input")
        .not(":submit, :reset, :image, [disabled]")
        .not( this.settings.ignore )
        .filter(function() {
            !this.name && validator.settings.debug && window.console && console.error( "%o has no name assigned", this);

            // select only the first element for each name, and only those with rules specified
            if ( this.name in rulesCache || !validator.objectLength($(this).rules()) )
                return false;

            rulesCache[this.name] = true;
            return true;
        });
    }, 
```

条件

if ( this.name in rulesCache ||.....

评估共享相同名称的第二个和下一个元素 true....

解决方案将具有以下条件：

(this.id || this.name) 在 rulesCache

对不起，JS 清教徒，(this.id || this.name) 不是 100%...

当然，

rulesCache[this.name] = true;

行也必须适当更改。

所以 $.validator.prototype.elements 方法将是：

```
$(function () {
if ($.validator) {
    //fix: when several input elements shares the same name, but has different id-ies....
    $.validator.prototype.elements = function () {

        var validator = this,
            rulesCache = {};

        // select all valid inputs inside the form (no submit or reset buttons)
        // workaround $Query([]).add until http://dev.jquery.com/ticket/2114 is solved
        return $([]).add(this.currentForm.elements)
        .filter(":input")
        .not(":submit, :reset, :image, [disabled]")
        .not(this.settings.ignore)
        .filter(function () {
            var elementIdentification = this.id || this.name;

            !elementIdentification && validator.settings.debug && window.console && console.error("%o has no id nor name assigned", this);

            // select only the first element for each name, and only those with rules specified
            if (elementIdentification in rulesCache || !validator.objectLength($(this).rules()))
                return false;

            rulesCache[elementIdentification] = true;
            return true;
        });
    };
} 
```

});

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-01-17T16:12:26.337

这是我的做法。比以前提出的方法更容易一些：

```
function validateTab(tab) {
    var valid = true;
    $(tab).find('input').each(function (index, elem) {
        var isElemValid = $("#registrationForm").validate().element(elem);
        if (isElemValid != null) { //this covers elements that have no validation rule
            valid = valid & isElemValid;
        }
    });

    return valid;
} 
```

就我而言，我有一个向导（有 3 个步骤），结果证明它更加复杂，因为我不想一次验证所有字段。我基本上将组件放在选项卡中，如果第一个选项卡有效，我会移至下一个选项卡，直到到达最后一个，然后提交所有数据。因此，`tab`那里的参数是实际的选项卡元素（即 a `div`）。然后，我将所有输入元素子元素循环到我的选项卡并检查它们的有效性。

其他都是标准的。

* * *

为了完整起见，这里是其余代码：表单提交的完成方式以及我的验证器的外观：

```
<a href="javascript:moveToNextTab(1)" class="button next">Submit</a> 
```

这里的 js 函数调用：

```
function moveToNextTab(currentTab) {
    var tabs = document.getElementsByClassName("tab");
    //loop through tabs and validate the current one.
    //If valid, hide current tab and make next one visible.
} 
```

我正在使用这些验证规则（我在 JQuery.ready 上创建）：

```
$("#registrationForm").validate({
    rules: {
        birthdate: {
            required: true,
            date: true
        },
        name: "required",
        surname: "required",
        address: "required",
        postalCode: "required",
        city: "required",
        country: "required",
        email: {
            required: true,
            email: true
        }
    }
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-10-19T11:57:20.800

也许我错过了这一点，但由于验证器不适用于多个名称（尝试......失败！）我更改了我的表单以动态更改名称，设置规则，然后在提交时取消设置名称。

两种方法（忽略 wlog 的东西，它只是输出到控制台）：

```
// convert the field names into generated ones to allow fields with the same names 
// to be validated individually. The original names are stored as data against the
// elements, ready to be replaced. The name is replaced with
// "multivalidate-<name>-<id>", e.g. original => 'multivalidate-original-1'

function setGeneratedNamesWithValidationRules(form, fields, rules) {

    var length = fields.length;

    for (var i=0; i < length; ++i ){
        var name = fields[i];

        var idCounter = 0;  
        // we match either the already converted generator names or the original
        $("form [name^='multivalidate-" + name + "'], form [name='" + name + "']").each(function() {
            // identify the real name, either from the stored value, or the actual name attribute
            var realName = $(this).data('realName');
            if (realName == undefined) {
                realName = $(this).attr("name");
                $(this).data('realName', realName);
            }

            wlog("Name: " + realName + " (actual: " + $(this).attr("name") + "), val: " + $(this).val() + ". Rules: " + rules[realName]);
            $(this).attr("name", "multivalidate-" + realName + "-" + idCounter);
            if (rules[realName]) {
                $(this).rules("add", rules[realName]);
            }
            idCounter++;
        });
    }
}

function revertGeneratedNames(form, fields) {

    var length = fields.length;

    for (var i=0; i < length; ++i ){
        var name = fields[i];
        wlog("look for fields names [" + name + "]");

        $("form [name^='multivalidate-" + name + "']").each(function() {
            var realName = $(this).data('realName');
            if (realName == undefined) {
                wlog("Error: field named [" + $(this).attr("name") + "] does not have a stored real name");
            } else {
                wlog("Convert [" + $(this).attr("name") + "] back to [" + realName + "]");
                $(this).attr("name", realName);
            }
        });
    }
} 
```

在表单加载时，每当我动态添加另一行时，我都会调用 set 方法，例如

```
setGeneratedNamesWithValidationRules($("#my-dynamic-form"), ['amounts'], { 'amounts': 'required'} ); 
```

这会更改名称以允许单独验证。

在 submitHandler: thingumy 验证后我调用了revert，即

```
revertGeneratedNames(form, ['amounts']); 
```

在发布数据之前将名称切换回原始名称。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-04-05T10:00:05.657

对我来说，通过禁用调试很容易解决这个问题

```
 $("#_form").validate({
    debug:false,
    //debug: true,
    ...
    }); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2011-09-19T07:15:14.170

有一个简单的解决方案：

```
$(document).ready(function() {
   $(".form").each(function() {
      $(this).validate({
         ...
         ,errorContainer: $(".status_mess",this) // use "this" as reference to that instance of form.
         ...
      });
   });
}); 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2009-06-02T15:50:13.710

我认为您误解了 HTML 表单的工作原理。每个表单元素都需要有一个唯一的名称，除了允许您为一个数据字段选择一个/多个选项的多个复选框和按钮。

在您的情况下，不仅 JQuery 验证，而且服务器端表单验证器也会失败，因为它无法将输入分配给数据字段。假设，您希望用户输入姓名、姓氏、电子邮件地址、传真（可选）并且您的所有输入字段都有`name="map"`

然后您将在提交时收到这些列表：

```
map = ['Joe','Doe','joe.doeAThotmail.com','++22 20182238'] //All fields completed
map = ['Joe','Doe','joe.doeAThotmail.com'] //OK, all mandatory fields completed 
map = ['Doe', 'joe.doeAThotmail.com','++22 20182238']//user forgot prename, should yield error 
```

您会发现无法可靠地验证此表单。

我建议重新访问您的 perl 表单处理程序的文档，或者如果您自己编写它，则对其进行调整。

# svn - Rar 命令 - 忽略某些文件夹

> ID：931694
> 
> 赞同：2
> 
> 时间：2009-05-31T09:05:24.577
> 
> 标签：svn, rar

我想 rar 一个文件夹，但排除某些文件夹和它们下面的所有文件 - .svn 文件夹。

如何使用 rar 控制台命令 (rar.exe) 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T09:12:45.327

你试过 -x.svn*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-10-05T17:13:48.940

我尝试了以下方法，它对我有用：

```
RAR a -ehs -x*\.svn\* -r 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-31T16:14:09.013

```
dir .svn /b /s > files.lst
rar (rest of command) -x@files.lst 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-01T13:08:23.287

你可以做一个 svn 导出，然后你一开始就不会有 .svn 文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-15T07:53:13.097

**最终的工作版本，涉及*三个步骤*：**

```
(1) dir /b /s /a .sv? > svn.lst 
(2) rar.exe a -r [archive name] . -xsvn.lst -x@svn.lst 
(3) del svn.lst 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-09T10:46:53.727

您必须包含完全限定的路径及其子结构。路径必须是规范的。

```
popdir %mypath%\.svn
set _=%cd%
pushdir

rar a -x%_% -x%_%\* myarchive 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-01T03:45:09.263

**使用批处理文件：**

```
1) dir /b /s /a .sv? > svn.lst
2) for /f \"tokens=* delims=\" %%i in ('dir /s /b /a:d *svn') do (dir /b /s /q \"%i\") >> svn.lst
3) rar a -x@svn.lst myarchive [files....] 
```

这三行必须在 .bat 文件中。

# python - 在 Python 中的列表对象上替换 __str__ 方法

> ID：931699
> 
> 赞同：14
> 
> 时间：2009-05-31T09:06:52.670
> 
> 标签：python

这似乎应该很简单：

我想要一个`list`像任何其他的一样`list`，除了它有不同的`.__str__`方法。

1.  尝试设置`object.__str__ = foo`会导致只读错误
2.  尝试子类化`list`意味着您需要某种方法将现有的转换`list`为子类的实例。这需要手动复制所有属性（一个巨大的痛苦），或者以某种方式自动复制它们，我不知道该怎么做。
3.  尝试在`list`对象周围编写包装器意味着我必须想办法将所有消息发送到被包装的对象`.__str__`，除非我用自己的方法处理。不知道该怎么做。

非常感谢任何替代方案或解决方案#2 或#3。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-31T10:37:55.530

此解决方案无需包装器即可工作。如果您通过添加加入两个列表，则可以使用。任何修改列表本身的操作都将按预期工作。只有返回列表副本的函数，如：sorted、reveresed 才会返回本地 python 列表，这很好。另一方面， sort 和 reverse 对列表本身进行操作并将保留类型。

```
class myList(list):
    def __new__(cls, data=None):
        obj = super(myList, cls).__new__(cls, data)
        return obj

    def __str__(self):
        return 'myList(%s)' % list(self)

    def __add__(self, other):
        return myList(list(self) + list(other))

>>> l = myList(range(5))
>>> print l
myList([0, 1, 2, 3, 4])
>>> print l + [1, 2]
myList([0, 1, 2, 3, 4, 1, 2])
>>> l.sort()
>>> print l
myList([0, 1, 2, 3, 4]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-31T11:12:55.567

如果您想覆盖`__str__`其他容器（例如`tuple`），您可以利用多重继承：

```
class PrettyStr(object):
    def __str__(self):
        ret = ''

        if isinstance(self, (list, tuple)):
            ret = ''.join(str(elem) for elem in self)
        else:
            pass  # handle other types here

        return ret

class MyList(PrettyStr, list):
    pass

class MyTuple(PrettyStr, tuple):
    pass

if __name__ == "__main__":
    print MyList([1, 2, 3, 4])
    print MyTuple((1, 2, 3, 4)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-31T09:11:36.700

您可以扩展列表类并覆盖它：

```
class myList(list):
  def __str__(self):
    # do something
    return "something" 
```

编辑：删除了建议在列表对象上动态替换的答案的不正确部分`__str__`，这在 Python 列表的实现中是不允许的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-31T09:34:16.890

我是一名 Java 程序员，但我认为这就是你想要的（用 python 2.6 测试）：

```
>>> class myList(list):
...   def __str__(self):
...     return "aaa"
...
>>> def myListWrapper(list):
...   return myList(list)
...
>>> a = [1, 2, 3]
>>> type(a)
<type 'list'>
>>> b = myListWrapper(a)
>>> type(b)
<class '__main__.myList'>
>>> print(a)
[1, 2, 3]
>>> print(b)
aaa 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-31T13:38:16.850

```
class MyList(list):
     def __str__(self):
             return "foo"

str(MyList([1, 2, 3])) 
```

“富”

```
str(MyList(list([1, 2, 3]))) 
```

“富”

我之前的评论作为答案。如您所见，MyList 在其构造函数中接受任何序列。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-31T09:50:52.177

这就提出了一个问题：为什么要覆盖 __str__ 方法？

创建一个类来封装你的对象不是更好吗？

```
class MyContainer(object):
    def __init__(self, list):
        self.containedList = list

    def __str__(self):
        print('All hail Python') 
```

这样您就不必担心转换对象、复制属性或其他任何事情。（顺便说一句，MyList(longlist) 有多贵？它是智能副本，还是愚蠢的“让我们从可迭代对象重新创建列表对象？”）

如果在某些时候，做你想做的事情看起来很复杂，这可能意味着你做错了：p

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-31T09:41:34.207

包装清单怎么样？

```
>>> class StrList(object):
    def __init__(self, data=None):
        self._data = data or []
    def __str__(self):
        return "StrList!"
    def __getattr__(self, attr):
        if attr == "_data":
            return self.__dict__[attr]
        return getattr(self._data, attr)
    def __setattr__(self, key, val):
        if key == "_data":
            self.__dict__[key] = val
        else:
            setattr(self._data, key, val)
    def __getitem__(self, index):
        return self._data[index]
    def __setitem__(self, index, value):
        self._data[index] = value

>>> l = StrList(range(3))
>>> print l
StrList!
>>> l[0]
0
>>> for x in l:
    print x

0
1
2
>>> l[0] = "spam"
>>> l.append("egg")
>>> print list(l)
['spam', 1, 2, 'egg']
>>> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-01-17T04:53:28.433

```
Ex = ["a", 2, 4] #our_list
Ex(-1) = "xuxu_beleza" #the_name_of_your_list(index) = new_item 
Print(Ex) 
["a", 2, "xuxu_beleza"] #our_new_list

**list[index] = new_item** 
```

# c++ - 一次从套接字读取 1 个字节与读取大块

> ID：931713
> 
> 赞同：6
> 
> 时间：2009-05-31T09:16:24.367
> 
> 标签：c++, c, sockets, cgi

一次从套接字读取 1 个字节与从大块读取之间有什么区别 - 在性能方面？

我有一个 C++ 应用程序需要从 Web 服务器中提取页面并逐行解析接收到的页面。目前，我一次读取 1 个字节，直到遇到 CRLF 或达到最大 1024 个字节。

如果读取大块（例如一次 1024 字节）在性能方面要好得多，那么关于如何实现我目前拥有的相同行为的任何想法（即能够一次存储和处理 1 个 html 行 - 直到CRLF 没有消耗后续字节）？

编辑：

我负担不起太大的缓冲区。由于该应用程序用于嵌入式设备，因此我的代码预算非常紧张。我更喜欢只保留一个固定大小的缓冲区，最好一次保留一个 html 行。这使我的解析和其他处理变得容易，因为每当我尝试访问缓冲区进行解析时，我可以假设我正在处理一个完整的 html 行。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T09:28:26.653

我不能对 C++ 发表评论，但在其他平台上——是的，这会产生*很大*的不同；特别是代码需要做的开关量，以及它需要担心流的异步性质等的次数。

但真正的考验当然是对其进行剖析。**为什么不编写一个使用这两种方法在任意文件中搅动的基本应用程序，并针对一些典型文件对其进行测试……如果**代码是 IO 绑定的，效果通常令人吃惊。如果文件很小并且您的应用程序运行时大部分时间都用于*处理*内存中的数据，那么您可能不会注意到任何差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-31T10:02:54.133

如果您是直接从套接字读取，而不是从可以缓冲的中间高级表示中读取，那么毫无疑问，最好完全读取 1024 个字节，将它们放在 RAM 中的缓冲区中，然后解析 RAM 中的数据。

为什么？在套接字上读取是一个系统调用，它会在每次读取时导致上下文切换，这很昂贵。阅读有关它的更多信息：[IBM 技术库：提升套接字性能](http://www.ibm.com/developerworks/linux/library/l-hisock.html#N100AF)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T09:26:27.110

首先也是最简单的：

```
cin.getline(buffer,1024); 
```

其次，通常所有的IO都是缓冲的，所以你不需要太担心

第三，CGI 进程启动通常比输入处理成本高得多（除非它是大文件）......所以你可能不会考虑它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T09:26:56.263

天，

一次处理一个字节对性能的重大影响之一是您的上下文一遍又一遍地从用户时间进入系统时间。结束了。根本没有效率。

抓取一个大块，通常达到 MTU 大小，效率明显更高。

为什么不将内容扫描到向量中并遍历该向量以寻找 \n 以将您的输入分成 Web 输入行？

高温高压

干杯，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-31T09:29:46.837

您不是一次从套接字读取一个字节，而是一次从 C/C++ I/O 系统读取一个字节，如果您使用 CGI，它已经缓冲了来自套接字的所有输入。缓冲 I/O 的全部意义在于以一种方便程序员处理的方式使数据可供程序员使用，因此，如果您想一次处理一个字节，请继续。

**编辑：**经过反思，您的问题尚不清楚您是在实现 CGI 还是只是在使用它。您可以通过发布一个代码片段来澄清这一点，该代码片段指示您当前如何读取该单个字节。

如果您直接读取套接字，那么您应该简单地将对 GET 的整个响应读取到缓冲区中，然后对其进行处理。这具有许多优点，包括性能和易于编码。

如果你被限制在一个小缓冲区，那么使用经典的缓冲算法，如：

```
getbyte:
   if buffer is empty
      fill buffer
      set buffer pointer to start of buffer
   end
   get byte at buffer pointer
   increment pointer 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-31T15:33:52.017

您可以使用 fdopen() 函数打开套接字文件描述符。然后你有缓冲的 IO，所以你可以在那个描述符上调用 fgets() 或类似的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-31T12:11:37.913

操作系统级别没有区别，无论如何都会缓冲数据。但是，您的应用程序必须执行更多代码来一次“读取”一个字节。

# entity-framework - 实体框架和封装

> ID：931714
> 
> 赞同：1
> 
> 时间：2009-05-31T09:17:54.207
> 
> 标签：entity-framework, oop

我想实验性地应用我读过一次的封装方面，其中实体对象包括其属性的域，例如，对于它的 CostCentre 属性，它包含有效成本中心的列表。这样，当我打开一个扩展的编辑表单时，我只需要传递一个扩展对象，我通常在初始化表单时访问一个 CostCentre 对象。

这也适用于我有一个绑定到网格 (telerik RadGrid) 的扩展列表，并且我在网格上处理一个编辑命令。我想创建一个编辑表单并将其传递给 Extension 对象，现在我将编辑表单传递给 ExtensionID 并在表单中创建我的对象。

我在这里实际上要问的是有关以这种方式执行此操作的指导，或者是实现类似于我在此处描述的内容的“正确”方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-12T22:48:27.573

这将取决于您的数据源。如果您要从数据库中检索成本中心列表，那将是一种方法。如果它是预定值的简短列表（例如是/否/也许是），那么属性属性可能会起作用。如果它需要在每个环境中进行更多的可配置，那么 IoC 或 Provider 模式将是最佳选择。

我认为您的问题类似于我们在以前的项目中所做的自定义临时搜索页面。我们用包含一些预先确定的指向查找值方法及其关系的“指针”的属性来装饰我们的实体类和属性。然后我们创建了一个自定义 UI 控件（如您在帖子中描述的编辑页面），它使用这些属性通过动态生成 LINQ 表达式来生成下拉和自动完成文本框列表，然后在运行时基于无论用户在做什么。

这基本上是通过三个移动部分完成的：A）数据访问对象上的属性 B）中间层编译和生成动态 LINQ 表达式的“属性外观”方法和 C）调用我们中间层的自定义 UI 控件服务方式。

有时像这样的计划会适得其反，但在我们的案例中效果很好。用属性装饰我们的对象，然后创建一个单一的逻辑路径给了我们足够的能力来做我们需要做的事情，同时最大限度地减少所需的代码量，并完全消除任何样板。但是，这种方法不是很可配置。通过将这些属性编译到代码中，我们将应用程序与数据源紧密耦合。在这个特定的项目上，这没什么大不了的，因为它是客户的内部系统，并且符合项目时间表。但是，在使用 Provider 模式实现逻辑的“真实产品”或使用 Castle Projects IoC 之类的东西时，我们将获得相同的功能和更多的可配置性。这样做的缺点是有更多的管理，

# json - 如何显示 JSON 构造的 HashMap？

> ID：931718
> 
> 赞同：1
> 
> 时间：2009-05-31T09:19:24.050
> 
> 标签：json, struts2

我知道我可以通过使用显示 ArrayList

```
for(i=0;i<data.list.length;i++){
    html += data.list[i] +"<br />";
} 
```

为了显示 AarryList 对象，我对 HashMap 对象进行了同样的尝试，但它根本不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T09:31:34.837

A`HashMap`在序列化为 JSON 时转换为对象。您可以使用以下方法迭代键/值：

```
for (i in data.map) {
  html += data.map[i] + "<br />";
} 
```

# javascript - 检查此网络优化报告 - 我该如何解决？

> ID：931722
> 
> 赞同：0
> 
> 时间：2009-05-31T09:22:58.723
> 
> 标签：javascript, css, optimization, image

[大家好，我在http://www.websiteoptimization.com/services/analyze/](http://www.websiteoptimization.com/services/analyze/)上运行了分析器，我遇到了一些最突出的问题，如下所示：

* * *

*TOTAL_OBJECTS - 警告！此页面上的对象总数为 93，其数量将主导网页延迟。考虑将其减少到更合理的数字。每页超过 20 个对象，处理实际对象的开销（描述时间和等待时间）占整个页面延迟的 80% 以上。有关对象开销如何支配网页延迟的更多详细信息，请参见图 II-3：显示对象开销主导网页延迟的延迟组件的相对分布。组合、优化和优化您的外部对象。用 CSS 翻转替换图形翻转以加快显示速度并最大限度地减少 HTTP 请求。考虑使用 CSS 精灵来帮助整合装饰性图像。使用 CSS 技术，例如彩色背景、边框、或间距而不是图形技术可以减少 HTTP 请求。用 CSS 文本标头替换图形文本标头，以进一步减少 HTTP 请求。最后，考虑通过使用不同的主机名或 CDN 来优化并行下载，以减少对象开销。*

*TOTAL_IMAGES - 警告！此页面上的图像总数为 85 ，请考虑将其减少到更合理的数量。建议组合、替换和优化您的图形。用 CSS 翻转菜单替换图形翻转菜单，以加快显示速度并最大限度地减少 HTTP 请求。考虑使用 CSS 精灵来帮助整合装饰性图像。使用彩色背景、边框或间距等 CSS 技术而不是图形技术来减少 HTTP 请求。用 CSS 文本标头替换图形文本标头，以进一步减少 HTTP 请求。最后，考虑通过使用不同的主机名来优化并行下载以减少对象开销。*

* * *

问题是提到的 85 张图片都在我的 css 文件中引用 - 我不确定如何降低这个数字 - 但是我确实需要在我的网站中的某个时间点所有这些文件。

任何进一步优化这一点的想法。

另外，即使在最大压缩之后，我的 javascript 文件也高达 150K - 我已经没有减少开销的想法，并且可以起诉一些提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T09:43:34.780

您可以将[CSS Sprites](http://www.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)用于图像（例如菜单翻转或图标）。这有两个好处：

*   多个页面共有的精灵图像允许浏览器缓存精灵图像，从而减少您网站其他页面上的后续下载。
*   精灵图像通过减少服务器发送和接收的请求数量来减少服务器负载，因为许多图像可以组合成一个更大的图像。

您说您的 JavaScript 被压缩到最大 - 但是，您的页面是否需要所有这些？还是可以分成几页？此外，您的脚本中是否有一些不必要的或可以减少的部分，例如通过对您通常在脚本中执行的任务使用包装函数。一个简单的例子是使用 Prototype-esque`$`函数代替`document.getElementById`，如果多次调用它可以显着减少 JavaScript 的大小。

此外，正如报告所建议的那样，如果可以的话，请使用样式文本而不是表示样式文本的图像（当然这并非适用于所有情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T11:50:52.980

还要看看你的图像是什么。我看到的一个常见的事情是用于导航的不同背景图像 - 一个图像说“家”，另一个说“关于我们”，等等。

您可以将它们组合成一个空白背景图像并将文本写在上面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T12:10:31.707

关于您的 JS 文件，您可以删除发布版本上的回车符、“缩小”（将所有内部变量和方法更改为 1 或 2 个字符的名称）和/或 gzip 它。JQuery 使用这些技术；生产版本为 19K，而开发版本为 120K - 节省了 80% 以上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T09:27:54.140

你可以将你的 CSS 文件分割成不同的文件，以便获得不那么多的图像。javascript 文件也是如此。你真的需要每页都有 150K 的 javascript 吗？将其重构为不同的文件并仅包含您需要的内容。

# php - php的简单SMTP电子邮件验证功能？另外，值得吗？

> ID：931725
> 
> 赞同：5
> 
> 时间：2009-05-31T09:26:10.027
> 
> 标签：php, email

有没有人有一个很好的功能来通过 PHP 中的 SMTP 验证电子邮件地址？另外，值得吗？它会减慢我的服务器速度吗？

--> 编辑：我指的是这样的东西：

[http://onwebdevelopment.blogspot.com/2008/08/php-email-address-validation-through.html](http://onwebdevelopment.blogspot.com/2008/08/php-email-address-validation-through.html)

这是为了补充对电子邮件地址语法的验证。

不过它看起来很复杂，我希望有一种更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T09:53:25.480

如果要检查域中是否有邮件交换器，可以使用以下内容：

```
/*checks if email is well formed and optionally the existence of a MX at that domain*/
function checkEmail($email, $domainCheck = false)
{
    if (preg_match('/^[a-zA-Z0-9\._-]+\@(\[?)[a-zA-Z0-9\-\.]+'.
                   '\.([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/', $email)) {
        if ($domainCheck && function_exists('checkdnsrr')) {
            list (, $domain)  = explode('@', $email);
            if (checkdnsrr($domain, 'MX') || checkdnsrr($domain, 'A')) {
                return true;
            }
            return false;
        }
        return true;
    }
    return false;
} 
```

用法：

```
$validated = checkEmail('foo@gmail.com', true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T11:55:13.487

这就是我相信你正在寻找的东西。它使用 SMTP 服务器进行验证。它显示了 PHP 代码。[http://www.webdigi.co.uk/blog/2009/how-to-check-if-an-email-address-exists-without-sending-an-email/](http://www.webdigi.co.uk/blog/2009/how-to-check-if-an-email-address-exists-without-sending-an-email/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T10:13:06.640

[这是一个这样的代码](http://cvs.drupal.org/viewvc.py/drupal/contributions/modules/email_verify/email_verify.inc.php?view=markup)，取自 drupal 模块[email_verify](http://drupal.org/project/email_verify)。那里有几个 Drupal 特定的调用，但它不应该花费很多时间来为一个通用的 PHP 函数清理它：

另请注意，某些 Web 主机会阻止传出端口 25，因为它主要由垃圾邮件发送者使用。如果您的主机正在练习这样的块，您将无法使用这种形式的验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-15T11:14:49.887

欢迎您使用我的免费 PHP 函数`is_email()`来验证地址。它在[这里](http://isemail.info)可用。

它将确保地址完全符合 RFC 5321。它还可以选择检查域是否实际存在。

您不应该依赖验证器来告诉您用户的电子邮件地址是否确实存在：一些 ISP 向其用户提供不合规的地址，特别是在不使用拉丁字母的国家/地区。更多关于电子邮件验证的文章在这里：http: [//isemail.info/about](http://isemail.info/about)。

# sql - 使用 Django ORM 根据最大 值获取单个子行

> ID：931730
> 
> 赞同：3
> 
> 时间：2009-05-31T09:27:45.217
> 
> 标签：sql, django, inner-join, django-orm

我有一个模型“市场”，它与另一个模型“合同”有一对多的关系：

```
class Market(models.Model):
    name = ...
    ...

class Contract(models.Model):
    name= ...
    market = models.ForeignKey(Market, ...)
    current_price = ... 
```

我想获取 Market 对象以及每个合约的最高价格。这就是我通过原始 SQL 执行此操作的方式：

```
SELECT M.id as market_id, M.name as market_name, C.name as contract_name, C.price 
as price from pm_core_market M INNER JOIN
    (SELECT market_id, id, name, MAX(current_price) as price 
        FROM pm_core_contract GROUP BY market_id) AS C
ON M.id = C.market_id 
```

有没有办法在不使用 SQL 的情况下实现这一点？如果有，在性能方面应该首选哪一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-31T10:00:35.917

Django 1.1（目前为测试版）为数据库 API 添加了[聚合](http://docs.djangoproject.com/en/dev/topics/db/aggregation/)支持。您的查询可以这样完成：

```
from django.db.models import Max, F

Contract.objects.annotate(max_price=Max('market__contract__current_price')).filter(current_price=F('max_price')).select_related() 
```

这会生成以下 SQL 查询：

```
SELECT contract.id, contract.name, contract.market_id, contract.current_price, MAX(T3.current_price) AS max_price, market.id, market.name
FROM contract LEFT OUTER JOIN market ON (contract.market_id = market.id) LEFT OUTER JOIN contract T3 ON (market.id = T3.market_id)
GROUP BY contract.id, contract.name, contract.market_id, contract.current_price, market.id, market.name
HAVING contract.current_price =  MAX(T3.current_price) 
```

API 使用额外的连接而不是子查询（就像您的查询一样）。很难判断哪个查询更快，尤其是在不了解数据库系统的情况下。我建议你做一些基准测试并做出决定。

# html - 使用不是一个好习惯吗？

> ID：931733
> 
> 赞同：1
> 
> 时间：2009-05-31T09:28:56.447
> 
> 标签：html, webbrowser-control

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-31T09:48:44.583

在我看来，用户应该始终控制链接是否在新窗口中打开 - 如果他们像我一样有许多标签，那么无尽的新窗口链接就会一团糟。

您似乎要问的是为什么当标签更新内容时浏览器停留在原始页面，它很简单，它将它视为另一个网页，说您有一个实时更新的页面，您的浏览器不会切换到那个当它看到你在另一个页面上时——它知道你可能正在阅读一篇文章、观看视频等。

实现不同的选项卡/窗口已更新所需要的只是一点点意识。对于窗口，它们通常会在当前内容上打开，但是由于选项卡位于一个窗口中，因此这是不可能的，因为它保持关闭状态，但已更新。

编辑：针对标题...我认为这比每次都打开全新的东西更好，但感觉应该是用户选择是加载单个新标签还是留在同一个标​​签中。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T20:53:08.077

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T10:02:16.553

链接行为一般应留给用户控制。在某些情况下，可以考虑`target="_blank"`（尤其是现在 Firefox 至少有一个“应在以下位置打开新页面：新选项卡”选项），但将所有链接设置为在同一个新窗口中打开是不好的.

例如，我*讨厌*等待页面加载，所以我会阅读一个页面，中间单击我感兴趣的每个链接，这会将它们排列在一系列新选项卡中。五个有趣的链接变成了五个选项卡，每个选项卡都在我阅读第一篇文章时在后台加载，因此无需等待。但是，如果您在同一个窗口/选项卡中打开所有五个，那么当我调用下一个时，每个都会消失，而且我不仅必须“选择一个，等待它加载，阅读它，然后返回到原来的文章，重复”，但是，如果我没有注意到正在发生的事情，那么我还需要返回并再次浏览原始页面以重新找到丢失文档的链接（或者，更有可能的是，只是说“不值得我花时间”，而永远不要阅读它们）。

将新打开的标签强制放在前面有一个类似的问题：我在新标签中打开它是因为我希望它在我继续阅读原始文档时在后台加载。不要颠覆我的意图。出于某种原因，我清除了“当我打开一个新选项卡时，立即切换到它”复选框。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T20:29:37.173

是的，这些网站正在使用 target。好。我无法想象在哪种情况下使用 target 属性可能有用。但也许有一个。我没有遇到过。

看，总是切换到另一个选项卡可以解决您描述的问题，但它会产生其他问题。最大的问题是切换到另一个选项卡可能会让人感到意外。总的来说，可用性永远不会让用户感到惊讶。顺便说一句，我非常喜欢《别让我思考》这本书。

# sorting - 树数据结构

> ID：931734
> 
> 赞同：0
> 
> 时间：2009-05-31T09:29:16.400
> 
> 标签：sorting, tree, binary-tree

我试图理解什么是排序树，二叉树和 avl 和 and ......我仍然不确定，是什么让排序树排序？在排序的树中搜索和在未排序的树中搜索之间的复杂性（Big-Oh）是多少？希望您能够帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T09:53:00.627

## 二叉树

存在两种主要类型的二叉树，平衡的和不平衡的。平衡树旨在尽可能保持树的高度（高度 = 根与最远的子节点之间的节点数量）。平衡树有几种类型的算法，其中最著名的两种是 AVL- 和 RedBlack-trees。AVL 和 RedBlack 树上的插入/删除/搜索操作的复杂性是***O(log n)***或**更好**- 这是重要的部分。其他自平衡算法是 AA-、Splay- 和 Scapegoat-tree。

平衡树获得了平衡的属性（和名称），因为在树上的每次删除或插入操作之后，算法都会对树进行内省以确保它仍然是平衡的，如果不是，它将尝试修复这个问题（完成不同的算法）通过在树中旋转节点。

正常（或不平衡）二叉树不会修改其结构以保持自身平衡，并且通常会加班，变得非常低效（特别是如果按顺序插入值）。但是，如果性能没有问题并且您主要想要一个排序的数据结构，那么他们可能会这样做。在不平衡树上插入/删除/搜索操作的复杂性范围从 O(1)（最好的情况 - 如果你想要根）到 O(n)（最坏的情况，如果你按顺序插入所有节点并想要最大的节点)

存在另一种称为随机二叉树的变体，它使用某种随机化来确保树不会变得完全不平衡（与链表相同）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T09:37:56.400

二叉搜索树是一种“树”结构，其中每个节点都有两个子节点。
左节点都具有小于其父节点的属性，而右节点都大于其父节点。

二叉树的有趣之处在于，当树正确排序时，我们可以在 O(log n) 中搜索一个值。例如，在 LinkedList 中进行相同的搜索将为我们提供 O(n) 的搜索速度。

学习数据结构的最好方法是花一天时间搜索和阅读维基百科文章。
这可能会让你开始
[http://en.wikipedia.org/wiki/Binary_search_tree](http://en.wikipedia.org/wiki/Binary_search_tree)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T09:33:55.393

谷歌搜索以下内容：

```
site:stackoverflow.com binary trees 
```

获取 SO 问题列表，这些问题将回答您的几个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T09:36:40.287

如果树结构没有以某种方式排序，那么使用树结构并没有多大意义——如果您计划在树中搜索一个节点并且它是未排序的，那么您将不得不遍历整个树（在））。如果你有一棵以某种方式排序的树，那么只需要遍历树的一个分支（通常为 O(log n)）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-31T09:37:02.500

在二叉树中，右叶总是比头小，左叶总是大，所以你可以在 O(log(n)) 中搜索排序树，如果 key 小于你只需要向右走如果 bgger 向左移动

# delphi - 使用 Delphi CGI 上传文件

> ID：931739
> 
> 赞同：1
> 
> 时间：2009-05-31T09:31:04.930
> 
> 标签：delphi, cgi

谁能给出一个如何使用 Delphi CGI 上传文件的工作示例。

我已经用谷歌搜索了，但到目前为止还没有任何运气。

这是我一直在尝试的，但我遇到了访问冲突。

```
procedure TWebModule1.WebModule1WebActionItem1Action(Sender: TObject;
  Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);
var
  lFileName   : string;
  lFileStream : TFileStream;
begin
  lFileName   := Request.Files[0].FileName;
  lFileStream := TFileStream.Create(lFileName, fmCreate);
  try
    lFileStream.CopyFrom(Request.Files[0].Stream, Request.Files[0].Stream.Size);
  finally
    lFileStream.Free;
  end;
end; 
```

# .net-3.5 - 处理从一个图标到另一个图标的导航。？

> ID：931752
> 
> 赞同：0
> 
> 时间：2009-05-31T09:37:23.047
> 
> 标签：.net-3.5, windows-mobile

我目前正在开发一个标准的 Windows 移动应用程序。我正在创建 3 列和 3 行。我想在表单上显示 9 个图标。但是哪个事件用于处理从一个图标导航到另一个图标。？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T15:33:12.173

你不说这些行和列是什么。自定义控件？他们每个人都是独立的控制者？还有什么？如果它们都是单独的控件，那么它们将具有您可以使用的 GotFocus 和 LostFocus 事件。

# language-agnostic - 每个递归都可以转换成迭代吗？

> ID：931762
> 
> 赞同：214
> 
> 时间：2009-05-31T09:48:04.583
> 
> 标签：language-agnostic, recursion, iteration

一个[reddit 线程](http://www.reddit.com/r/programming/comments/8oh88/effectively_walking_trees_and_graphs_in_python/c09xm45)提出了一个明显有趣的问题：

> 尾递归函数可以很容易地转换为迭代函数。其他的，可以通过使用显式堆栈进行转换。*每个*递归都可以转化为迭代吗？

帖子中的（反？）示例是一对：

```
(define (num-ways x y)
  (case ((= x 0) 1)
        ((= y 0) 1)
        (num-ways2 x y) ))

(define (num-ways2 x y)
  (+ (num-ways (- x 1) y)
     (num-ways x (- y 1)) 
```

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2009-06-01T08:32:02.673

你总能把递归函数变成迭代函数吗？是的，绝对是，如果有记忆的话，Church-Turing 论文就证明了这一点。通俗地说，它指出可以通过递归函数计算的内容可以通过迭代模型（例如图灵机）计算，反之亦然。论文并没有准确地告诉你如何进行转换，但它确实说这绝对是可能的。

在许多情况下，转换递归函数很容易。Knuth 在“计算机编程的艺术”中提供了几种技术。通常，递归计算的事物可以通过完全不同的方法在更少的时间和空间内进行计算。典型的例子是斐波那契数列或数列。你肯定在你的学位计划中遇到过这个问题。

在这枚硬币的另一面，我们当然可以想象一个编程系统如此先进，以至于将公式的递归定义视为记忆先前结果的邀请，从而提供速度优势，而无需麻烦告诉计算机确切的步骤遵循具有递归定义的公式的计算。Dijkstra 几乎可以肯定地想象过这样一个系统。他花了很长时间试图将实现与编程语言的语义分开。再说一次，他的非确定性和多处理编程语言在实践中的专业程序员之上。

归根结底，许多函数以递归形式更易于理解、阅读和编写。除非有令人信服的理由，否则您可能不应该（手动）将这些函数转换为显式迭代算法。您的计算机将正确处理该作业。

我可以看到一个令人信服的理由。假设您有一个使用超高级语言的原型系统，例如 [*穿上石棉内衣*] Scheme、Lisp、Haskell、OCaml、Perl 或 Pascal。假设条件是您需要用 C 或 Java 实现。（也许这是政治问题。）然后你当然可以递归地编写一些函数，但如果按字面意思翻译，它们会炸毁你的运行时系统。例如，无限尾递归在 Scheme 中是可能的，但同样的习惯用法会给现有的 C 环境带来问题。另一个例子是使用词法嵌套函数和静态作用域，Pascal 支持但 C 不支持。

在这种情况下，您可能会尝试克服对原始语言的政治阻力。你可能会发现自己重新实现 Lisp 很糟糕，就像 Greenspun（面面相觑）的第十条定律一样。或者您可能会找到一种完全不同的解决方案。但无论如何，肯定有办法的。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2009-11-02T17:08:19.567

> 是否总是可以为每个递归函数编写一个非递归形式？

是的。一个简单的形式证明是证明[μ 递归](http://en.wikipedia.org/wiki/%CE%9C-recursive_function)和非递归演算（如 GOTO）都是图灵完备的。由于所有图灵完备演算在表达能力上是严格等价的，所有递归函数都可以通过非递归图灵完备演算来实现。

不幸的是，我无法在网上找到一个好的、正式的 GOTO 定义，所以这里有一个：

[GOTO 程序是在寄存器机器](https://en.wikipedia.org/wiki/Register_machine)上执行的一系列命令*P*，使得*P*是以下之一：

 **   `HALT`, 停止执行
*   `*r* = *r* + 1`哪里`*r*`有寄存器
*   `*r* = *r* – 1`哪里`*r*`有寄存器
*   `GOTO *x*``*x*`标签在哪里
*   `IF *r* ≠ 0 GOTO *x*``*r*`任何寄存器在哪里，`*x*`是一个标签
*   一个标签，后跟上述任何命令。

但是，递归函数和非递归函数之间的转换并不总是微不足道的（除非通过手动重新实现调用堆栈）。

有关详细信息，请参阅[此答案](https://stackoverflow.com/a/1662489/1968)。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2009-05-31T10:10:09.000

递归在实际的解释器或编译器中被实现为堆栈或类似的结构。因此，您当然可以将递归函数转换为迭代函数，**因为它总是这样做的（如果是自动的）**。您将只是临时复制编译器的工作，并且可能以一种非常丑陋和低效的方式。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-05-31T10:01:12.467

基本上是的，本质上你最终要做的是将方法调用（隐式地将状态推送到堆栈上）替换为显式堆栈推送，以记住“先前调用”已经到达的位置，然后执行“调用方法”反而。

我想通过基本上模拟方法调用，循环、堆栈和状态机的组合可以用于所有场景。这是否会“更好”（更快，或者在某种意义上更有效）通常很难说。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-03-23T16:17:25.167

*   递归函数执行流程可以表示为一棵树。

*   相同的逻辑可以通过循环来完成，循环使用数据结构遍历该树。

*   深度优先遍历可以使用栈完成，广度优先遍历可以使用队列完成。

所以，答案是：是的。为什么：[https](https://stackoverflow.com/a/531721/2128327) ://stackoverflow.com/a/531721/2128327 。

> 任何递归都可以在一个循环中完成吗？是的，因为
> 
> 图灵机通过执行一个循环来完成它所做的一切：
> 
> 1.  获取指令，
> 2.  评价一下，
> 3.  转到 1。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2009-05-31T09:52:49.207

是的，显式使用堆栈（但递归更容易阅读，恕我直言）。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-11-02T16:52:51.087

是的，总是可以编写非递归版本。简单的解决方案是使用堆栈数据结构并模拟递归执行。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-07-08T07:47:50.427

原则上，总是可以删除递归并用迭代替换它，这种语言对于数据结构和调用堆栈都具有无限状态。这是 Church-Turing 命题的一个基本结论。

给定一种实际的编程语言，答案并不那么明显。问题是很可能有一种语言可以在程序中分配的内存量是有限的，但可以使用的调用堆栈的数量是无限的（32位C，其中堆栈变量的地址不可访问）。在这种情况下，递归更强大只是因为它有更多的内存可以使用；没有足够的显式可分配内存来模拟调用堆栈。有关这方面的详细讨论，请参阅[此讨论](http://lambda-the-ultimate.org/node/3470 "Lambda the Ultimate：最强大的终止语义？")。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-05-21T11:10:17.273

所有可计算函数都可以由图灵机计算，因此递归系统和图灵机（迭代系统）是等价的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-31T11:23:35.437

有时替换递归比这容易得多。递归曾经是 1990 年代 CS 中流行的东西，所以从那时起，很多普通开发人员认为如果你用递归解决问题，这是一个更好的解决方案。所以他们会使用递归而不是向后循环以反转顺序，或者类似的愚蠢的事情。所以有时删除递归是一种简单的“呃，这很明显”类型的练习。

现在这不是一个问题，因为时尚已经转向其他技术。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-01-25T14:41:49.220

> 可以将任何递归算法转换为非递归算法，但通常逻辑要复杂得多，这样做需要使用堆栈。事实上，递归本身使用了一个栈：函数栈。

更多详情：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-31T10:01:20.890

消除递归是一个复杂的问题，在明确定义的情况下是可行的。

以下情况很容易：

*   尾递归
*   [直接线性递归](http://en.wikipedia.org/wiki/Recursion_(computer_science)#Direct_and_indirect_recursion)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-31T10:17:10.220

除了显式堆栈之外，将递归转换为迭代的另一种模式是使用蹦床。

在这里，函数要么返回最终结果，要么返回本来会执行的函数调用的闭包。然后，启动（蹦床）函数继续调用返回的闭包，直到达到最终结果。

这种方法适用于相互递归的函数，但恐怕它只适用于尾调用。

[http://en.wikipedia.org/wiki/Trampoline_（计算机）](http://en.wikipedia.org/wiki/Trampoline_(computers))

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-11-02T16:52:23.150

我会说是的 - 函数调用只不过是 goto 和堆栈操作（粗略地说）。您需要做的就是模仿在调用函数时构建的堆栈，并执行类似于 goto 的操作（您可以使用没有明确包含 this 关键字的语言来模仿 goto）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-11-02T17:05:41.530

查看 wikipedia 上的以下条目，您可以将它们作为起点来找到您问题的完整答案。

*   [计算机科学中的递归](http://en.wikipedia.org/wiki/Recursion#Recursion_in_computer_science)
*   [递归关系](http://en.wikipedia.org/wiki/Recurrence_relation)

下面的一段可能会给你一些关于从哪里开始的提示：

> 求解递推关系意味着获得[封闭形式的解](http://en.wikipedia.org/wiki/Closed-form_solution)：n 的非递推函数。

也看看[这个条目](http://en.wikipedia.org/wiki/Closed-form_solution)的最后一段。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-07-29T19:49:24.887

递归只是在堆栈上调用相同的函数，一旦函数消失，它就会从堆栈中删除。因此，人们总是可以使用显式堆栈来管理使用迭代对同一操作的调用。 **所以，是的，所有递归代码都可以转换为迭代。**

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2010-05-06T10:59:37.037

tazzego，递归意味着无论你喜欢与否，一个函数都会调用它自己。当人们谈论是否可以在没有递归的情况下完成某事时，他们的意思是，您不能说“不，那不是真的，因为我不同意递归的定义”作为有效陈述。

考虑到这一点，你说的其他一切都是胡说八道。您说的唯一另一件事不是胡说八道，那就是您无法想象没有调用堆栈的编程。这是几十年来一直在做的事情，直到使用调用堆栈变得流行。旧版本的 FORTRAN 缺少调用堆栈，它们工作得很好。

顺便说一句，存在仅将递归（例如 SML）实现为循环方式的图灵完备语言。也存在图灵完备的语言，它们仅将迭代作为一种循环方式来实现（例如 FORTRAN IV）。Church-Turing 论文证明，在仅递归语言中任何可能的事情都可以在非递归语言中完成，反之亦然，因为它们都具有图灵完备性。

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2009-05-31T10:43:56.033

这是一个迭代算法：

```
def howmany(x,y)
  a = {}
  for n in (0..x+y)
    for m in (0..n)
      a[[m,n-m]] = if m==0 or n-m==0 then 1 else a[[m-1,n-m]] + a[[m,n-m-1]] end
    end
  end
  return a[[x,y]]
end 
```

# asp.net - ASP.NET 处理 Excel 工作表

> ID：931782
> 
> 赞同：0
> 
> 时间：2009-05-31T10:03:04.320
> 
> 标签：asp.net, excel

我需要制作一个 Excel 工作表工作簿（添加工作表/添加数据/**隐藏列**/**使用密码保护单元格**/更改字段内容/等）

我应该使用微软提供的 COM 对象吗（但我认为它们在 asp.NET 中使用时几乎没有问题）

或者是否有一个好的（商业或免费）库/插件可用于进行此类活动。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T11:37:56.577

尝试 Spread Sheet Gear 第三方组件

[http://www.spreadsheetgear.com/](http://www.spreadsheetgear.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T11:08:23.580

我发现最简单的方法是使用[Excel XML 格式](http://en.wikipedia.org/wiki/Microsoft_Office_XML_formats)。这样您就可以像编辑任何其他 XML 文件一样编辑 Excel 工作表。要查看 Excel 如何隐藏列或使用密码保护它们，请手动执行这些操作并查看 Excel 如何将它们保存为 XML。编写代码轻而易举，它坚如磐石，而且速度很快。

操作本机 Excel 文件更加困难：您可以将 COM 对象与[主要互操作程序集](http://www.microsoft.com/downloads/details.aspx?familyid=3c9a983a-ac14-4125-8ba0-d36d67e0f4ad)一起使用。根据我的经验，这很难做到正确。在最好的情况下，Excel 会留下自己的旧副本，您可以通过计划的每晚服务器重置来缓解这种情况。在最坏的情况下，Excel 将随机挂起，使您的网站无响应。

使用本机 Excel 文件的另一种方法是[Visual Studio Tools for Office](http://en.wikipedia.org/wiki/Visual_Studio_Tools_for_Office)。它肯定比 COM 互操作更容易使用，并且在 Visual Basic 中效果最好：

```
Application.Workbooks.Open("Workbook.xls") 
```

C# 缺少可选参数，打开工作簿就成了一个坏笑话：

```
Application.Workbooks.Open(@"Workbook.xls",
    missing, missing, missing, missing, missing, missing, missing,
    missing, missing, missing, missing, missing,missing, missing); 
```

我没有深入研究 VSTO，因为 XML 操作对我来说非常有效。也许其他人可以评论它在 ASP.NET 网站中的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T11:50:02.530

使用[SpreadsheetGear](http://www.SpreadsheetGear.com)，您可以完全访问 Excel 文档和所有宏功能，包括保护和取消保护单元格、列等的能力。除了 WinForms 之外，我们拥有您所描述的相同内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T22:34:18.913

我们使用了 COM 对象，我不能推荐它。最大的问题是对象永远不会被释放......

我们现在使用 Gembox 软件中的组件。用了两年了，还行，比上面说的便宜一点，在这里看到之前不知道。

# .net - ASP.NET CheckBox 状态和 PostBack

> ID：931785
> 
> 赞同：4
> 
> 时间：2009-05-31T10:05:43.020
> 
> 标签：.net, asp.net, checkbox, postback

我有一个简单的任务 - 在复选框状态更改时更改页面链接 - 但我是 ASP.NET 新手并且遇到了一些麻烦。

我可以使用 HtmlControl 和 JavaScript 做同样的事情：

```
<script type="text/javascript" language="javascript">
  function checkbox_onChanged(checked) {
    if (checked) {
      document.location = '?type=request_in&show=all';
    }
    else {
      document.location = '?type=request_in&show=unapproved';
    }
  }

  function checkbox_onLoad(checkbox) {
    checkbox.checked = true;
  }
</script>

<form action="" method="get">
<input type="checkbox" name="checkbox"
  onload="checkbox_onLoad(this)"
  onchange="checkbox_onChanged(this.checked)" />Show all
</form> 
```

但我想对用户隐藏它。所以我这样做：

```
<asp:CheckBox runat="server" ID="check" 
  OnCheckedChanged="check_CheckedChanged"
  AutoPostBack="True" Text="Show all" />

protected void check_CheckedChanged(object sender, EventArgs e)
{
  Response.Redirect(String.Format("{0}?type=request_in&show={1}", Request.Path, 
  checkViewRequestIn.Checked ? "all" : "unapproved"));
}

protected void Page_Load(object sender, EventArgs e)
{
  var show = Request["show"];
  if (!String.IsNullOrEmpty(show) && String.Equals(show, "all"))
  {
    checkViewRequestIn.Checked = true;
  }
} 
```

但似乎负载检查状态更改再次引发事件，并且复选框始终被选中！

Ans another question - 有没有其他方法可以重定向到同一页面而不给出它的文件名？我的意思是像在 JavaScript 中一样 - 只提供需要的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T10:26:36.300

您可以从 ASP.NET 复选框调用客户端“checkbox_onChanged”，只需从 Page_Load 添加“onchange”，例如：

```
protected void Page_Load(object sender, EventArgs e)
{
   check.Attributes["onchange"] = "checkbox_onChanged(this.checked)";
} 
```

查看源代码，您将看到 HTML 中发生了什么。

# javascript - 文本区域中的快捷方式

> ID：931786
> 
> 赞同：2
> 
> 时间：2009-05-31T10:05:45.627
> 
> 标签：javascript, html, javascript-events

我正在尝试编写一个文本编辑器。

我需要：

*   能够理解选择了哪些文本，以便快捷方式可以在文本的正确部分工作，就像在这个编辑器中一样，如果我在文本中间选择一个单词然后按 Ctrl+B
*   能够在按下某些键时捕捉到 Ctrl+B 和 TAB

任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T13:59:56.963

看看[对 WMD 编辑器进行逆向工程](https://blog.stackoverflow.com/2008/12/reverse-engineering-the-wmd-editor/)。那是 SO 上使用的编辑器，支持您所指的内容。调用将当前文本选择增加为**粗体**的函数`doBorI()`。在源中搜索它。

至于捕捉键盘事件，[这个页面](http://www.quirksmode.org/js/events_properties.html)有一个很好的入门知识，包括检测哪个键被按下。

不确定您的具体问题到底是什么，但希望这些都是好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T10:35:22.710

我建议看看现有的编辑之一，看看他们是如何处理这个问题的。

我最近开始使用：[JWysiwyg](http://code.google.com/p/jwysiwyg/)，它的优点是代码库非常简洁，因此更容易破译。

# java - 使用存储的 session_key (infinite session / offline_access) 创建 facebook rest 客户端

> ID：931793
> 
> 赞同：0
> 
> 时间：2009-05-31T10:11:31.870
> 
> 标签：java, facebook

在我的 facebook 应用程序中，我想出了如何通过获取用户的 offline_access 权限来获取 session_key。（使用 Facebook Java API）但是，我找不到：我如何在以后使用此密钥创建 IFacebookRestClient？当然，只要我自己的应用程序的会话持续存在，客户端就会存储在其中 - 但我不知道如何从该密钥获取另一个会话中的一个。

也许我只是错过了api的一部分......非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T10:22:03.113

好吧，也许它就像将它传递给构造函数一样简单？

```
public FacebookJsonRestClient(String apiKey, String secret, String sessionKey) 
```

这么看……

# asp.net - 新 Web 应用程序上的 403

> ID：931803
> 
> 赞同：0
> 
> 时间：2009-05-31T10:24:56.647
> 
> 标签：asp.net, iis, http-status-code-403

我刚刚在我的机器上安装了 IIS 并尝试创建一个简单的默认页面站点。在创建项目时，VS 说它无法配置服务器，我应该手动配置。我打开 IIS 并“创建”了站点并给它起了一个名字我还更改了安全选项卡以允许匿名访问，并将 asp.net 版本更改为 2.0

当我尝试浏览该网站时，我得到 403

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T10:33:42.683

403 表示“禁止”，请参见[此处](http://en.wikipedia.org/wiki/HTTP_403)，但这可能有不同的原因......

也许您的服务器上没有启用 ASP.NET？
有关更多信息，请参阅[此](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/44f16c37-f727-4244-9813-2289e13dadba.mspx?mfr=true)...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T13:01:00.983

文件夹在我的文档中吗？尝试将其移到那里，您的用户配置文件中的内容不一定可供 IIS 访问。

# c# - 计算“饼段”和“子区域”区域的边界点

> ID：931807
> 
> 赞同：3
> 
> 时间：2009-05-31T10:26:05.537
> 
> 标签：c#, math, gdi+, pie-chart

**背景**：

我最近在玩 GDI+ 来绘制一个“圆盘”，显示 360 度的全面颜色变化。（我挖出了一些 HSL 到 RGB 代码来循环遍历 HSL(1,1,1) -> HSL(360,1,1)）

关于圆盘，我首先用上面的方法画了一个完整的实心圆，然后在中心上方画了一个灰色的第二个圆，给出以下内容

![替代文字](https://i206.photobucket.com/albums/bb284/cambo1982/disc.jpg)

所以这一切都很好......但我意识到 GDI+ 通过这种`FillPie`方法将我们与这里发生的许多棘手的匹配隔离开来。此外，`FillPie`要求您为饼图提供一个边界矩形，而不是半径长度。它还进行完整的段填充，并且不允许您仅指定该段的一部分。

**问题：**

任何人都可以指出一些数学函数的方向或给出任何解释我需要什么论坛来计算以下“绿色填充区域”的面积和绘图点：

```
Point `c` - an x,y co-ordinate
Angle `A` - an angle from horizontal
Angle `B  - an angle from horizontal where `B` - `A` == the sweep angle
Length `r` - a distance from `c`
Length `r2` - a distance from `c` where `r2` - `r` == the `height` of the segment to be filled. 
```

![替代文字](https://i206.photobucket.com/albums/bb284/cambo1982/FillPie.jpg)

数学资源的链接很好，但我快速搜索了一下 Wolfram Math，可以找到我想要的东西。此外，如果有某种方法可以生成可以作为 a 传递`Point[]`给 Graphics.FillPolygon 的边界 (x,y) 坐标序列，那也很酷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T10:46:57.990

面积是外圆盘部分和内圆盘部分的差异。圆盘部分的面积与角度扫描成正比：

```
area = (b-a)*((r+r2)^2-r^2)/2 
```

`a`并且`b`必须以弧度表示。因为`b-a = 2*Pi`,`area = Pi*(r+r2)^2 - Pi*r^2`是外圆盘和内圆盘的面积之差。

您可以使用在内/外圆上生成点

```
x = cx + r * cos(t)     /     x = cx + (r+r2) * cos(t)
y = cy + r * sin(t)     /     y = cy + (r+r2) * sin(t) 
```

`t`从`a`到不等`b`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T10:34:26.533

希望这可以帮助。第二部分提供了一种计算圆扇形面积的方法

[http://www.wikihow.com/Calculate-the-Area-of-a-Circle](http://www.wikihow.com/Calculate-the-Area-of-a-Circle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T10:36:22.380

一段圆的面积只是圆弧的角度（以弧度为单位）乘以半径。所以绿色圆圈的面积显然是：

```
(B-A) * r2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T11:20:44.337

你需要画线（这个伪代码）：

```
for aa from A to B
  set color to required color // you could use aa in an equation with HSL to get something like your sample
  x1=r*cos(aa)+x
  y1=r*sin(aa)+y
  x2=r1*cos(aa)+x
  y2=r1*sin(aa)+y
  draw line between (x1,y1) and (x2,y2) 
```

对于足够小的角度增量和足够小的半径，这应该没问题。

您正在寻找的点是每个角度 aa 的 (x1,y1) 和 (x2,y2)

# c++ - std::string 比较（检查字符串是否以另一个字符串开头）

> ID：931827
> 
> 赞同：90
> 
> 时间：2009-05-31T10:44:14.503
> 
> 标签：c++, string, stl, compare

我需要检查 std:string 是否以“xyz”开头。如何在不搜索整个字符串或使用 substr() 创建临时字符串的情况下做到这一点。

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2009-05-31T11:23:32.737

我会使用比较方法：

```
std::string s("xyzblahblah");
std::string t("xyz")

if (s.compare(0, t.length(), t) == 0)
{
// ok
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-15T15:55:49.580

一种可能更符合标准库精神的方法是定义您自己的 begin_with 算法。

```
#include <algorithm>
using namespace std;

template<class TContainer>
bool begins_with(const TContainer& input, const TContainer& match)
{
    return input.size() >= match.size()
        && equal(match.begin(), match.end(), input.begin());
} 
```

这为客户端代码提供了一个更简单的接口，并且与大多数标准库容器兼容。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-31T10:54:49.130

查看 Boost 的[String Algo](http://www.boost.org/doc/libs/1_39_0/doc/html/string_algo.html)库，它有许多有用的函数，例如 starts_with、istart_with（不区分大小写）等。如果您只想在项目中使用部分 boost 库，则可以使用 bcp 实用程序复制只需要文件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-04T14:12:37.123

似乎 std::string::starts_with 在 C++20 内部，同时可以使用 std::string::find

```
std::string s1("xyzblahblah");
std::string s2("xyz")

if (s1.find(s2) == 0)
{
   // ok, s1 starts with s2
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-31T10:51:31.587

我觉得我没有完全理解你的问题。看起来它应该是微不足道的：

```
s[0]=='x' && s[1]=='y' && s[2]=='z' 
```

这只查看（最多）前三个字符。在编译时未知的字符串的泛化将要求您用循环替换上面的内容：

```
// look for t at the start of s
for (int i=0; i<s.length(); i++)
{
  if (s[i]!=t[i])
    return false;
} 
```

# php - mysql查询手动工作，但从代码运行时不返回结果

> ID：931829
> 
> 赞同：2
> 
> 时间：2009-05-31T10:45:56.463
> 
> 标签：php, mysql, select, sql-like

我使用带有“Like”的非常简单的查询来按名称查找产品

```
SELECT p_pid, p_name, p_cat
FROM products
WHERE p_sid=346 AND p_name LIKE 'product name here in utf-8 encoding, can be various languages'
LIMIT 1 
```

当我从具有有效产品名称的代码运行此查询时，我没有得到任何结果。如果我将查询（由 php 回显到浏览器）复制并在 mysql 查询浏览器中手动运行，我会得到结果。知道我哪里错了吗？

笔记：

1.查询没有错误。就是没有结果。2\. 我正在使用 ezsql 库 3\. 代码运行良好，并在代码的同一范围内成功执行了与数据库的其他 SELECT。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T10:51:15.737

似乎是编码的问题。

尝试运行此查询：

```
SELECT HEX(CAST('product name here in utf-8 encoding, can be various languages' AS BINARY)) 
```

在查询浏览器中`ezSQL`和在查询浏览器中比较结果。

这将为您提供`MySQL`真正从您的客户端获取并用于比较的二进制流。

如果您在`ezSQL`属性中设置了错误的连接编码，则字符串可能会被破坏（例如，问号而不是`UTF`符号）。

在这种情况下，比较当然会失败。

**更新：**

尝试强制不区分大小写的排序规则：

```
SELECT  *
FROM    table
WHERE   field LIKE 'product name here in utf-8 encoding, can be various languages' COLLATE UTF8_GENERAL_CI 
```

另外，您能否同时发布您的字符串和字段中包含的数据的二进制转储？

```
SELECT  p_pid, p_name, p_cat,
        HEX(CAST(p_name AS BINARY)),
        HEX(CAST('product name here in utf-8 encoding, can be various languages' AS BINARY))
FROM    products
WHERE   p_pid = @pid_of_product_that_should_match_but_it_doesnt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T12:44:39.500

手动和自动运行脚本的机器、数据库和用户是否相同？一个可能正在访问测试服务器，而另一个访问生产服务器（例如。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T11:10:01.190

可能是编码错误，没有通过代码发送正确的信息，所以它正在搜索某些东西，因此没有错误，但不是它要搜索的内容。手动扫描你的代码，重新做一些代码，看看你是否发现了任何可能有问题的地方。

如果它确实是一个编码错误，PHP 的片段可能会有所帮助。

希望这可以帮助。

# php - php模式是否脱离php

> ID：931840
> 
> 赞同：2
> 
> 时间：2009-05-31T10:54:45.730
> 
> 标签：php, html

我问了另一个关于 HTML 和 PHP 分离的问题，因为我在教程和示例页面上看到了对它的引用，但我发现 HTML 和 PHP 的分离与人们实际评论的不同，我认为这是 PHP 模式。

这是否打破了PHP。应该做吗？那很重要么？

回显我的 HTML 输出是否只是一个偏好问题，还是我应该打破它来显示它？

例子：

```
<?php

echo '<html'>;

?> 
```

对比

```
<?php

dostuff();

?>

<html>

<?

morestuff();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T11:06:13.007

我假设“爆发”是指：

```
<?php foo(); ?>
test
<?php bar(); ?> 
```

与

```
<?php
    foo();
    echo("test");
    bar();
?> 
```

嗯，第一个解决方案的一个优点是您的布局在 HTML 编辑器中仍然或多或少具有可读性。此外，它分离布局和逻辑，至少比其他变体更多。它可能也比第二个选项稍微快一些，因为不需要解析和回显字符串。另一方面，拥有大量单独的 PHP 块可能真的很难阅读，因为语义相关的东西会突然分裂。当然，您也可以将这两种方法结合起来。

我认为这里的底线是，一旦您需要进行如此多的格式化和回显，以至于您的程序逻辑变得非常模糊，您应该考虑使用“真正的”模板引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T11:14:00.543

我认为这取决于情况。

您想向浏览器回显多少行？这些行是否包含 $variable 值？$数组值？你循环通过数据集吗？等等等等

对我来说，大多数时候只是呼应这些台词更可靠。

```
<?php
   if ( check($something) ) {
      echo "Some variable is: $something<br/>\n";
   } else {
      echo "Some variable is something else!<br/>\n";
   } 
?> 
```

可以比以下更具可读性：

```
<?php
   if ( check($something) ) {
?>
Some variable is: <?php echo $something; ?><br/>
<?php
   } else {
?>
Some variable is something else!<br/>
<?php
   } 
?> 
```

并且使用一些 IDE（例如[stackoverflow.com](http://stackoverflow.com) syntaxhighlighting），它甚至可以更具可读性：

```
<?php
   if ( check($something) ) {
      echo 'Some variable is: '.$something."<br/>\n";
   } else {
      echo "Some variable is something else!<br/>\n";
   } 
?> 
```

**总结：**
PHP 为您提供了许多将内容发送到客户端的选项。
“最佳方法”不同于个案。

选择*最具可读性/可维护性*的方法并*始终如一地使用它。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T11:01:24.093

如果通过爆发你的意思是这样的事情：

```
<?php
     if($somecondition) {
?>
<!-- Some HTML -->
<?php
     } 
?> 
```

那么是的，在大多数情况下，突破更好，因为它更具可读性（许多 IDES 突出显示 HTML 语法，如果在 echo() 编辑时它带有字符串，则不能这样做）

# sql - mySQL 字段下面有一条虚线。？

> ID：931842
> 
> 赞同：4
> 
> 时间：2009-05-31T10:54:53.543
> 
> 标签：sql, mysql, phpmyadmin

谁能解释一下虚线代表什么我正在使用phpmyadmin

领域是

名称 类型 NULL 默认

经度浮点数 0.001
纬度浮点数 0.001

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T11:12:46.770

来自[http://psych.ucsc.edu/AScils/phpmyadmin/Documentation.html](http://psych.ucsc.edu/AScils/phpmyadmin/Documentation.html)

> $cfg['ShowBrowseComments'] boolean $cfg['ShowPropertyComments'] boolean 通过将相应的变量设置为 TRUE，您可以在浏览或属性显示中启用列注释的显示。在浏览模式下，评论显示在标题内。在属性模式下，注释在字段名称下方使用 CSS 格式的虚线显示。注释显示为该字段的工具提示。

所以...看起来该字段附加了注释

编辑：您可以使用以下方法阅读评论：

```
SHOW FULL COLUMS FROM tbl_name LIKE 'col_name'; 
```

（来源：[http](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html) ://dev.mysql.com/doc/refman/5.0/en/show-columns.html ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T05:01:25.753

我认为这意味着您为该字段定义了一个注释，这是 PhpMyAdmin 礼貌的方式来表明您可以将鼠标“悬停”在它上面并阅读它。请享用

# json - Delicious API - 给定网站的所有书签？

> ID：931843
> 
> 赞同：0
> 
> 时间：2009-05-31T10:58:30.603
> 
> 标签：json, api, rss, bookmarks, delicious-api

有没有办法让我获得我网站上的 URL 列表，这些 URL 已被人们在 nice.com 网站上添加了书签？他们的文档似乎没有提及通配符搜索或除单个 URL 之外的任何内容。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T17:44:42.667

Delicious.com 提供用于查询有关 URL 的信息的[提要，但该函数仅接受您要查找的 URL 的 md5 哈希值。](http://delicious.com/help/feeds)看起来不可能通过当前公开的公共 API 使用通配符搜索执行单个查询。一个技巧是创建您网站的有效 URL 列表，然后为每个 URL 查询 Delicious，记住[1 秒的请求间延迟](http://delicious.com/help/api)以及其他限制。

# tfs - 关于在 TFS 中搁置/取消搁置的问题

> ID：931844
> 
> 赞同：2
> 
> 时间：2009-05-31T10:59:13.317
> 
> 标签：tfs, shelving

当您在 TFS 中搁置/取消搁置项目时，它是私有的吗？也就是说，其他人可以看到我搁置甚至取消搁置的内容吗？

如果是公开的，是否可以将其设为私有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T11:22:59.977

货架集是公开的。据我所知，您不能将它们设为私有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T21:26:01.350

您可能想检查一下这在 VS2010 中是否发生了变化。

# c# - 在 RhinoMocks 中模拟一个返回密封类的方法

> ID：931845
> 
> 赞同：17
> 
> 时间：2009-05-31T11:01:22.550
> 
> 标签：c#, mocking, rhino-mocks, stub, sealed

运行此代码：

```
_foo = MockRepository.GenerateStub<IBar>();
_foo.Stub(x => x.Foo()).Return("sdf"); 
```

什么时候

```
public interface IBar
{
   string Foo();
}

public class Bar : IBar
{
   public string Foo()
   {
      throw new NotImplementedException();
   }
} 
```

throws NotSupportedException - “无法创建密封类的模拟”。我理解为什么你不能模拟一个密封类（尽管 TypeMock 中有解决方案），但是模拟一个返回密封类（字符串）的类有什么问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-01-10T01:43:26.963

Rhino Mocks 似乎正在捕获并处理此异常。如果您已启用异常作为断点，则只能在 VS.NET 调试器中看到它。看来您可以安全地继续运行这个异常断点，并且一切都按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T03:23:36.007

当您没有在 Tools->Options->Debugging->General 下启用“仅我的代码”并且您有 CLR 异常，在 Debug->Exceptions 下选择了“Thrown”时，就会发生这种情况。修复它的最简单方法是在工具->选项->调试->常规下启用“只是我的代码”。

![在此处输入图像描述](https://i.stack.imgur.com/sYdqr.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-20T06:12:46.283

您的代码工作正常。您可能有一些其他未显示的代码导致问题。在此处发布您的整个单元测试，我们将为您诊断问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-11-28T12:03:58.703

我有同样的问题，我猜它必须是一些 VS Studio 调试设置或 rhino 模拟的访问权限不足。我很确定这不是导致这种情况的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-16T13:12:25.617

我第二点 - 这不是代码的问题。这是VS调试设置。

我在调试下面的代码时遇到了同样的异常，同时尝试将 Arg.Is.Anything 作为参数发送到存根。

```
mockPermissionManager.Stub(item => item.HasAccess(Arg<string>.Is.Anything)).Return(true); 
```

处理异常并且代码/模拟按预期工作，只需执行 F5

# database-design - 数据库设计，单个字段中的多个属性

> ID：931847
> 
> 赞同：0
> 
> 时间：2009-05-31T11:02:02.733
> 
> 标签：database-design

是否为 ER 模型中的每个属性使用一个数据库列被认为是最佳实践？

我对遗留代码进行维护，我看到很多多个属性，以及挤入单个数据库列的业务逻辑，我想知道是否有任何好的理由这样做。

示例是使用整数值的前缀，例如客户 ID，其中前两位数字表示客户状态，后面的数字表示客户的实际 ID。因此将两个属性存储在一个字段中。另一个示例是对已结束业务的客户使用负客户 ID：s，因此还存储有关客户是否活跃的信息。等等等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T11:19:31.373

在一个列中存储多条信息违反了第一范式，因此在关系数据库中被认为是非常糟糕的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T11:07:45.047

你所拥有的听起来像是在 The Daily WTF 中的一个新条目的应用程序，而不是一个明智的数据库设计。在考虑这样的事情之前，请阅读数据库规范化，并避免让自己头疼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T11:10:42.903

在一列中存储多个字段时会出现许多问题。例如，假设您需要更新这样的列，首先您使用“ab”作为客户状态，然后决定将其更新为“cd”。当多个字段存储在一列中时，这将变得非常混乱。

您应该查看 Database Normalization 以更好地理解这一点。 [http://en.wikipedia.org/wiki/1NF](http://en.wikipedia.org/wiki/1NF)

# python - py2exe - 连接到套接字时生成的可执行文件冻结

> ID：931851
> 
> 赞同：1
> 
> 时间：2009-05-31T11:08:16.217
> 
> 标签：python, py2exe

请原谅我的无知，因为我仍然是编码的初学者。

我正在尝试使用 py2exe 将我编写的 python 脚本转换为 Windows 可执行程序。但是，尽管我能够成功转换脚本，但可执行文件似乎并没有完全发挥作用。

经过多次调试，我已经隔离了原因，下面的代码似乎是问题所在

```
host = str(raw_input('Enter Host IP Address: ')) 
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect((host, 5000)) 
```

当脚本从 Pydev 本身执行并且脚本能够正常运行时，不会出现此问题。作为控制台应用程序的 Windows 可执行文件在尝试连接到另一台主机时会*挂起。*

这是一个已知问题还是我做错了什么？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T12:00:44.037

可以输入IP地址吗？阅读[该线程](http://www.mail-archive.com/pygame-users@seul.org/msg04830.html)似乎 py2exe 需要一个特殊的*windows*参数来启动控制台。否则， raw_input 会尝试从标准输入中读取数据，然后因为找不到任何内容而挂起/崩溃。

鉴于线程的年龄，我检查了[py2exe doc](http://www.py2exe.org/index.cgi/ListOfOptions)：您可能想尝试将脚本放在*控制台*属性中。

我真的认为该行为与 raw_input 有关，并且它**不是**由套接字操作引起的。

# dependency-injection - MVP - 依赖注入和模型

> ID：931853
> 
> 赞同：4
> 
> 时间：2009-05-31T11:09:17.977
> 
> 标签：dependency-injection, mvp

给定一个 View 使用一个 Presenter，并且在 Presenter 中你有一个模型。

你如何将模型注入到演示者中？如果我要在 View 级别注入它，那么您将回到原点，业务逻辑在视图中 - 也就是视图不应该知道它的模型。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-05T04:21:14.463

您必须指的是被动视图模式。在监督控制器模式中，视图确实与模型通信以进行同步。

对于被动视图，您是正确的。您通常会在 Main 函数或可以从 Main 调用的配置类中执行此操作。由于没有指定语言，我用 C# 编写了示例。

```
static void Main(string[] args)
{
    Model model = new Model();
    View view = new View();
    Presenter presenter = new Presenter(view, model);
}

public Presenter(IView view, IModel model)
{
    this.View = view;
    this.View.Presenter = this;
    this.Model = model;
} 
```

当然，这是一个严重的过度简化。在现实世界的应用程序中，演示者将依赖于抽象模型的域对象，您可能会使用 IoC 容器来处理配置。一些 IoC 容器甚至可以处理构造函数参数中的循环依赖关系，从而无需属性注入。

# asp.net - 如何堆叠未知数量的 ASP.NET 中继器？

> ID：931863
> 
> 赞同：0
> 
> 时间：2009-05-31T11:16:25.140
> 
> 标签：asp.net, repeater, menu

我正在构建一个弹出菜单，客户希望它能够根据层次结构不断弹出。

例如，第一个窗格是选项列表。当它们悬停时，另一个窗格应在其旁边弹出下一级选项，依此类推，直到达到最后一级选项。

我可以处理所有的 javascript 和东西，但我想不出一种方法来不断地将转发器嵌入转发器中。我知道我可以通过将中继器放入另一个中继器来完成一次，但那时我将只有两层。

我需要能够为每一层选项持续嵌入中继器，或者使用不同的控件通过类似的技术来实现这一点。

任何帮助都很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T11:55:44.577

您将无法在标记中构建它。您必须在代码中动态添加控件，方法是为每个级别构建中继器并将其添加到前一个中继器的模板中。它需要对每个选择的选项进行完整的回发，因为嵌套的中继器可能具有不同的深度，具体取决于选择的选项。

不过，使用 AJAX 和 javascript 在所有客户端执行此操作可能会更好。选择选项时，请从Ajax请求中触发，以查看该选项是否具有子选项。如果是（返回它们），则使用 javascript 动态构建新的选项控件并将其添加到页面中。选择不同的选项时，您将从包含先前所选选项子选项中的DOM中删除元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T12:13:35.430

如果您可以以`MenuItem`对象列表的形式获取菜单，每个对象都有一个（有时是空的）子项目列表（我的意思是`List<MenuItem>`这里......我们将使用这个集合作为数据源一个子中继器，所以它需要实现`IEnumerable<T>`) 作为一个属性`MenuItem.SubItems`，你可能会使用一个`UserControl`循环出一个菜单级别的 a ，并在下一个菜单级别调用它自己。

在`UserControl`你会有这样的事情：

```
<li><a href='<%= this.MenuItem.Url %>'><%= this.MenuItem.LinkText %></a></li>
<asp:Repeater ID="UCRepeater" runat="server">
    <HeaderTemplate>
        <ul>
    <ItemTemplate>
        <menu:MenuItem ID="MenuItemUC" runat="server" />
    </ItemTemplate>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

`UserControl`中的是`ItemTemplate`相同的，因此对于每个项目模板，将呈现相同的内容。

下面是这个用户控件的代码，这就是神奇的地方：

```
public partial class MenuItemUserControl : UserControl
{
    // A property we'll use as the data source
    public MenuItem MenuItem { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        // If the current menu item has sub items, we bind the repeater to them
        // And by the way, there is no use doing this on every postback. First 
        // page load is good enough...
        if(!Page.IsPostBack) {
        {
            if(MenuItem.SubItems.Count > 0)
            {
                UCRepeater.DataSource = MenuItem.SubItems;
                UCRepeater.DataBind();
            }
        }
    }
    protected void UCRepeater_OnItemDataBound(object sender, 
                RepeaterDataBoundEventArgs e)
    {
        // Every time an Item is bound to the repeater, we take the current
        // item which will be contained in e.DataItem, and set it as the 
        // MenuItem on the UserControl

        // We only want to do this for the <ItemTemplate> and
        // <AlternatingItemTemplate>
        if(e.Item.ItemType == ListItemType.Item || 
            e.Item.ItemType == ListItemType.AlternatingItem)
        {
            var uc = (MenuItemUserControl)e.Item.FindControl("MenuItemUC");
            if(uc != null)
            {
                // This is the magic. Abrakadabra!
                uc.MenuItem = (MenuItem)e.DataItem;
            }
        }

    }
} 
```

所以为了让它工作，唯一缺少的是一个很好的方法，可以将数据作为`MenuItem`s 的分层列表取出。我将把这个留给您的数据访问层（使用 LINQ to SQL 或实体框架会很便宜...;)）

免责声明：此代码按原样提供，我是在脑海中写下的。我没有测试过它，但我认为它会起作用——如果它不起作用，它至少可以让你知道如何解决这个问题。如果您有问题，请在评论中发布它们，我会尽力提供帮助 - 但这里没有成功的承诺。只是愿意帮忙！=)

# c# - 经常性事件和 Outlook 导出

> ID：931864
> 
> 赞同：1
> 
> 时间：2009-05-31T11:16:51.333
> 
> 标签：c#, asp.net, sql-server

我的网站上有一个日历，我需要添加经常性事件和 Outlook 导出。

处理经常性事件的最佳方法是什么？(mssql + C#)

如何将多个事件导出到 Outlook 2003？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T18:45:55.650

好吧，我能想到的最简单的方法是使用嵌入式 Google 日历，它已经支持嵌入式事件并导出到 Outlook。

至于实现它的“最佳方式”，最好遵循[iCalendar 标准](https://www.rfc-editor.org/rfc/rfc2445)，因为它受到包括 Outlook 在内的许多应用程序的支持。希望仔细研究一下，如果您愿意，可以更好地了解如何实现它，但我坚信，如果已经有免费的可扩展解决方案，最好使用它并对其进行程序扩展以满足您的需求。

# javascript - 声明 JavaScript 数组时，“Array()”和“[]”有什么区别？

> ID：931872
> 
> 赞同：921
> 
> 时间：2009-05-31T11:23:32.597
> 
> 标签：javascript, arrays, declaration

像这样声明数组的真正区别是什么：

```
var myArray = new Array(); 
```

和

```
var myArray = []; 
```

* * *

## 回答 #1

> 赞同：1038
> 
> 时间：2009-05-31T11:25:01.970

有区别，但在该示例中没有区别。

使用更详细的方法：`new Array()`在参数中确实有一个额外的选项：如果您将一个数字传递给构造函数，您将得到一个该长度的数组：

```
x = new Array(5);
alert(x.length); // 5 
```

为了说明创建数组的不同方法：

```
var a = [],            // these are the same
    b = new Array(),   // a and b are arrays with length 0

    c = ['foo', 'bar'],           // these are the same
    d = new Array('foo', 'bar'),  // c and d are arrays with 2 strings

    // these are different:
    e = [3]             // e.length == 1, e[0] == 3
    f = new Array(3),   // f.length == 3, f[0] == undefined

; 
```

另一个区别是，使用时`new Array()`您可以设置数组的大小，这会影响堆栈大小。如果您遇到堆栈溢出（[Array.push 与 Array.unshift 的性能](https://stackoverflow.com/q/44031591/930998)），这可能很有用，这是当数组大小超过堆栈大小时发生的情况，并且必须重新创建它。因此，根据用例，实际上可以提高使用时的性能，`new Array()`因为您可以防止发生溢出。

[正如在这个答案](https://stackoverflow.com/a/44471705/930998)中指出的那样，实际上`new Array(5)`不会将五个`undefined`项目添加到数组中。它只是为五个项目增加了空间。请注意，使用`Array`这种方式会使计算变得难以依赖`array.length`。

* * *

## 回答 #2

> 赞同：799
> 
> 时间：2009-08-13T19:00:16.127

使用隐式数组和数组构造函数创建数组之间的区别是微妙但重要的。

当您使用创建数组时

```
var a = []; 
```

你告诉解释器创建一个新的运行时数组。根本不需要额外的处理。完毕。

如果您使用：

```
var a = new Array(); 
```

你是在告诉解释器，我想调用构造函数 " `Array`" 并生成一个对象。然后它通过你的执行上下文查找要调用的构造函数，并调用它，创建你的数组。

你可能会想“好吧，这根本不重要。它们是一样的！”。不幸的是，你不能保证。

举个例子：

```
function Array() {
    this.is = 'SPARTA';
}

var a = new Array();
var b = [];

alert(a.is);  // => 'SPARTA'
alert(b.is);  // => undefined
a.push('Woa'); // => TypeError: a.push is not a function
b.push('Woa'); // => 1 (OK) 
```

在上面的示例中，第一次调用会如您所愿地提醒“SPARTA”。第二个不会。你最终会看到未定义的。您还会注意到 b 包含所有本机 Array 对象函数，例如`push`，而另一个不包含。

虽然您可能期望会发生这种情况，但它只是说明了`[]`与`new Array()`.

`[]`如果你知道你只想要一个数组，最好只使用它。我也不建议四处走动并重新定义数组...

* * *

## 回答 #3

> 赞同：122
> 
> 时间：2017-06-10T09:26:13.127

有一个重要的区别尚未提及。

由此：

```
new Array(2).length           // 2
new Array(2)[0] === undefined // true
new Array(2)[1] === undefined // true 
```

您可能认为`new Array(2)`等同于`[undefined, undefined]`，**但事实并非如此！**

让我们尝试`map()`：

```
[undefined, undefined].map(e => 1)  // [1, 1]
new Array(2).map(e => 1)            // "(2) [undefined × 2]" in Chrome 
```

看？语义完全不同！那为什么呢？

根据 ES6 Spec 22.1.1.2，工作`Array(len)`只是创建一个新数组，其属性`length`设置为参数，仅此而已，这意味着这个新创建的数组`len`中没有任何**真正的元素。**

Function `map()`，根据规范 22.1.3.15 将首先检查`HasProperty`然后调用回调，但事实证明：

```
new Array(2).hasOwnProperty(0) // false
[undefined, undefined].hasOwnProperty(0) // true 
```

**这就是为什么您不能期望任何迭代函数在从`new Array(len)`**.

顺便说一句，Safari 和 Firefox 对这种情况有更好的“打印”：

```
// Safari
new Array(2)             // [](2)
new Array(2).map(e => 1) // [](2) 
[undefined, undefined]   // [undefined, undefined] (2) 

// Firefox
new Array(2)             // Array [ <2 empty slots> ]
new Array(2).map(e => 1) // Array [ <2 empty slots> ]
[undefined, undefined]   // Array [ undefined, undefined ] 
```

我已经向 Chromium 提交了一个问题，并要求他们修复这个令人困惑的打印： [https ://bugs.chromium.org/p/chromium/issues/detail?id=732021](https://bugs.chromium.org/p/chromium/issues/detail?id=732021)

更新：它已经修复了。Chrome 现在打印为：

```
new Array(2)             // (2) [empty × 2] 
```

* * *

## 回答 #4

> 赞同：55
> 
> 时间：2010-06-28T12:35:02.810

奇怪的是，`new Array(size)`它几乎比 Chrome 快 2 倍`[]`，在 FF 和 IE 中几乎相同（通过创建和填充数组来衡量）。仅当您知道数组的大致大小时才重要。如果您添加的项目多于您给定的长度，则性能提升将丢失。

更准确地说：`Array(`是一种不分配内存的快速常数时间操作，而`[]`它是一种设置类型和值的线性时间操作。

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2009-05-31T16:29:12.540

有关更多信息，[以下页面](http://yuiblog.com/blog/2006/11/13/javascript-we-hardly-new-ya/)描述了为什么您永远不需要使用`new Array()`

> 你永远不需要`new Object()`在 JavaScript 中使用。请改用对象文字`{}` 。同样，不要使用`new Array()`，而是使用数组文字`[]` 。JavaScript 中的数组与 Java 中的数组完全不同，使用类似 Java 的语法会让您感到困惑。
> 
> 请勿使用`new Number`、`new String`或 `new Boolean`。这些形式产生不必要的对象包装。只需使用简单的文字代替。

另请查看评论 - 该`new Array(length)`表单没有任何有用的目的（至少在今天的 JavaScript 实现中）。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-07-27T22:56:40.750

为了更好地理解`[]`和`new Array()`：

```
> []
  []
> new Array()
  []
> [] == []
  false
> [] === []
  false
> new Array() == new Array()
  false
> new Array() === new Array()
  false
> typeof ([])
  "object"
> typeof (new Array())
  "object"
> [] === new Array()
  false
> [] == new Array()
  false 
```

以上结果来自 Windows 7 上的 Google Chrome 控制台。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-05-31T11:53:26.343

第一个是默认的对象构造函数调用。如果需要，您可以使用它的参数。

```
var array = new Array(5); //initialize with default length 5 
```

第二个使您能够创建非空数组：

```
var array = [1, 2, 3]; // this array will contain numbers 1, 2, 3. 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-05-06T16:52:20.330

我可以从这个基于 Fredrik 的好示例的示例开始以更具体的方式进行解释。

```
var test1 = [];
test1.push("value");
test1.push("value2");

var test2 = new Array();
test2.push("value");
test2.push("value2");

alert(test1);
alert(test2);
alert(test1 == test2);
alert(test1.value == test2.value); 
```

我刚刚向数组添加了另一个值，并发出了四个警报：第一个和第二个是给我们存储在每个数组中的值，以确保这些值。他们将返回相同的！现在尝试第三个，它返回false，那是因为

> JS 将**test1**视为**VARIABLE ，数据类型为 array**，将**test2**视为**OBJECT ，具有 array 的功能，**此处略有不同。

第一个区别是当我们调用 test1 时，它不假思索地调用了一个变量，它只返回存储在这个变量中的值，而不管它的数据类型！但是，当我们调用 test2 时，它会调用*Array()*函数，然后它将我们的*“Pushed”*值存储在它的*“Value”*属性中，当我们警告 test2 时也会发生同样的情况，它会返回数组对象的*“Value”*属性。

因此，当我们检查 test1 是否等于 test2 时，它们当然永远不会返回 true，一个是函数，另一个是变量（具有数组类型），即使它们具有相同的值！

为了确定这一点，请尝试第 4 个警报，并添加 .value；它会返回真。在这种情况下，我们告诉 JS “不管容器的类型，无论是函数还是变量，请比较每个容器中存储的值，并告诉我们你看到了什么！” 这正是发生的事情。

我希望我清楚地表达了背后的想法，并为我糟糕的英语感到抱歉。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-03-13T18:59:23.507

初始化没有任何长度的数组时没有区别。所以`var a = []`&`var b = new Array()`是一样的。

但是如果你用长度初始化数组`var b = new Array(1);`，它会将数组对象的长度设置为1。所以它相当于 `var b = []; b.length=1;`。

每当您执行 array_object.push 时，这都会有问题，它会在最后一个元素之后添加项目并增加长度。

```
var b = new Array(1);
b.push("hello world");
console.log(b.length); // print 2 
```

对比

```
var v = [];
a.push("hello world");
console.log(b.length); // print 1 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-08-31T17:06:07.527

第一个是默认的对象构造函数调用。主要用于动态值。

```
var array = new Array(length); //initialize with default length 
```

创建静态值时使用第二个数组

```
var array = [red, green, blue, yellow, white]; // this array will contain values. 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-12-10T15:49:58.467

这不仅仅是表面上看到的。大多数其他答案都是正确的，**但**也..

## `new Array(n)`

*   允许引擎为`n`元素重新分配空间
*   针对阵列**创建进行了优化**
*   创建的数组被标记为**稀疏**，它的数组操作性能最低，这是因为每个索引访问都必须检查边界，查看值是否存在并**遍历原型链**
*   如果数组被标记为稀疏，则无法返回（至少在 V8 中），它在其生命周期内总是会变慢，即使您在 1 毫秒或 2 小时后用内容（打包数组）填充它，也没关系

### `[1, 2, 3] || []`

*   创建的数组被标记为**打包**（除非您使用`delete`或`[1,,3]`语法）
*   针对数组**操作**（`for ..`、、、`forEach`等`map`）进行了优化
*   随着阵列的增长，引擎需要重新分配空间

> 对于较旧的浏览器版本/浏览器，情况*可能*并非如此。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-06-14T15:14:08.907

好吧，与某些功能的`var x = new Array()`不同之`var x = []`处不同，我将仅解释其中最有用的两个（在我看来）。

在我开始解释差异之前，我将首先设定一个基础；当我们使用`x = []`定义一个数据类型为 Array 的新变量时，它继承了属于数组原型的所有方法，这与扩展类非常相似（但不完全是）。但是，当我们使用`x = new Array()`它时，它会初始化分配给变量的数组原型的克隆`x`。

现在让我们看看有什么区别

**第一个区别**是使用`new Array(x)`where`x`是一个整数，初始化一个`x`未定义值的数组，例如`new Array(16)`将初始化一个包含 16 个项的数组，所有这些项都是未定义的。当您异步填充预定义长度的数组时，这非常有用。例如（再次:)）假设您正在获得 100 个竞争对手的结果，并且您从远程系统或数据库异步接收它们，那么您需要在收到后根据排名在数组中分配它们每个结果。在这种非常罕见的情况下，您将执行类似的操作`myArray[result.rank - 1] = result.name`，因此排名 1 将设置为索引 0，依此类推。

**第二个区别**是使用`new Array()`你已经知道的，实例化一个全新的数组原型克隆并将它分配给你的变量，这允许你做一些魔法（不推荐顺便说一句）。这个神奇之处在于您可以覆盖遗留数组方法的特定方法。因此，例如，您可以将`Array.push`方法设置为将新值推送到数组的开头而不是结尾，您还可以将新方法（这更好）添加到 Array Prototype 的这个特定克隆中。这将允许您使用自己添加的方法在整个项目中定义更复杂的数组类型并将其用作类。

最后一件事，如果您来自极少数（我真正喜欢的）关心应用程序的处理开销和内存消耗的人，那么您永远`new Array()`不会不顾一切地使用它:)。

我希望这已经对野兽进行了足够的解释`new Array()`:)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-03-06T09:23:59.890

使用方式的区别

```
var arr = new Array(size); 
```

或者

```
arr = [];
arr.length = size; 
```

正如在这个问题中讨论得足够多。

我想补充一下速度问题——**目前**最快的方式`google chrome`是第二种。

但请注意，这些事情往往会随着更新而发生很大变化。此外，不同浏览器之间的运行时间也会有所不同。

例如 - 我提到的第二个选项，在 200 万 [ops/second] 上运行`chrome`，但如果你尝试一下，`mozilla dev.`你会得到惊人的 2300 万更高的速度。

无论如何，我建议你每隔一段时间在不同的浏览器（和机器）上检查一下，使用[这样的网站](http://jsperf.com/create-an-array-of-initial-size/2)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-12-27T06:14:40.560

据我所知，你可以找到像code1这样的切片（或Array的其他功能）**。code2****显示**你的*Array*和他的*实例*：

**代码1：**

```
[].slice; // find slice here
var arr = new Array();
arr.slice // find slice here
Array.prototype.slice // find slice here 
```

**代码2：**

```
[].__proto__ == Array.prototype; // true
var arr = new Array();
arr.__proto__ == Array.prototype; // true 
```

**结论：**

正如你所看到的`[]`并`new Array()`创建了一个新的 Array 实例。它们都从`Array.prototype`

它们只是 Array 的不同实例。所以这解释了原因 `[] != []`

:)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-05-26T16:23:26.820

没有什么大的区别，它们基本上做同样的事情，但以不同的方式做，但请继续阅读，看看 W3C 的这个声明：

```
var cars = ["Saab", "Volvo","BMW"]; 
```

和

```
var cars = new Array("Saab", "Volvo", "BMW"); 
```

> 上面的两个例子完全一样。无需使用 new Array()。
> 为了简单、可读性和执行速度，使用第一个（数组文字方法）。

但同时，使用`new Array`被认为是不好的做法的语法创建新数组：

> **避免使用新的 Array()**
> 
> 无需使用 JavaScript 的内置数组构造函数 new Array()。
> 请改用 []。
> 这两个不同的语句都创建了一个名为 points 的新空数组：

```
var points = new Array();         // Bad
var points = [];                  // Good 
```

> 这两个不同的语句都创建了一个包含 6 个数字的新数组：

```
var points = new Array(40, 100, 1, 5, 25, 10); // Bad    
var points = [40, 100, 1, 5, 25, 10];          // Good 
```

> **new**关键字只会使代码复杂化。它还会产生一些意想不到的结果：

```
var points = new Array(40, 100);  // Creates an array with two elements (40 and 100) 
```

> 如果我删除其中一个元素怎么办？

```
var points = new Array(40);       // Creates an array with 40 undefined elements !!!!! 
```

所以基本上不被认为是最佳实践，那里也有一个小区别，你可以`new Array(length)`像这样传递长度，这也是不推荐的方式。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-09-19T15:26:46.293

我使用 [] 导致了一种奇怪的行为。

我们有模型“类”，其中字段初始化为某个值。例如：

```
require([
  "dojo/_base/declare",
  "dijit/_WidgetBase",
], function(declare, parser, ready, _WidgetBase){

   declare("MyWidget", [_WidgetBase], {
     field1: [],
     field2: "",
     function1: function(),
     function2: function()
   });    
}); 
```

我发现当字段被初始化时，`[]`它会被所有模型对象共享。对其中一项进行更改会影响所有其他项。

用 初始化它们不会发生这种情况`new Array()`。对象的初始化相同（`{}`vs new `Object()`）

TBH 我不确定我们使用的框架是否有问题（[Dojo](https://dojotoolkit.org/)）

* * *

## 回答 #17

> 赞同：-4
> 
> 时间：2015-09-24T00:08:47.830

我发现这两种结构之间的一个区别让我很难受。

假设我有：

```
function MyClass(){
  this.property1=[];
  this.property2=new Array();
};
var MyObject1=new MyClass();
var MyObject2=new MyClass(); 
```

在现实生活中，如果我这样做：

```
MyObject1.property1.push('a');
MyObject1.property2.push('b');
MyObject2.property1.push('c');
MyObject2.property2.push('d'); 
```

我最终得到的是：

```
MyObject1.property1=['a','c']
MyObject1.property2=['b']
MyObject2.property1=['a','c']
MyObject2.property2=['d'] 
```

我不知道语言规范说应该发生什么，但是如果我希望我的两个对象在我的对象中具有唯一的属性数组，我必须使用`new Array()`.

* * *

## 回答 #18

> 赞同：-4
> 
> 时间：2015-11-19T16:20:37.193

使用 Array 构造函数创建一个具有所需长度的新数组并使用未定义填充每个索引，分配给变量的数组将创建您为其提供信息的索引。

# fluent-nhibernate - Fluent Nhibernate Order-By on Collection

> ID：931879
> 
> 赞同：2
> 
> 时间：2009-05-31T11:30:25.110
> 
> 标签：fluent-nhibernate

如果我有一个在 Fluent NHibernate 中映射的集合，并且我想对该集合应用订单，我该怎么做？

例如：

```
HasMany(x => x.PastDates)
            .AsBag().Cascade
            .SaveUpdate()
            .KeyColumnNames.Add("EventId")
            .Where(e => e.DateFrom < DateTime.Now.Date)
            .Inverse(); 
```

我正在寻找与 HBM 文件中的 order-by 属性等价的属性。

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2010-04-23T16:51:24.700

Fluent NHibernate 现在有一个 OrderBy 方法，您可以使用它：

```
HasMany(x => x.PastDates)
        .AsBag().Cascade
        .SaveUpdate()
        .KeyColumnNames.Add("EventId")
        .Where(e => e.DateFrom < DateTime.Now.Date)
        .Inverse()
        .OrderBy("ColumnName DESC"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-31T14:14:59.460

FluentNHibernate API 中似乎没有“order-by”属性。我看不出它有什么[问题](http://fluentnhibernate.org/issues)，所以这可能是一个有意识的遗漏。您应该可以使用 SetAttribute 添加它，但[该用户](http://groups.google.com/group/fluent-nhibernate/browse_thread/thread/718d1daebc830597/17e44d0efb7a63dd?lnk=gst&q=%22order-by%22#17e44d0efb7a63dd)无法使其正常工作。

```
HasMany(x => x.PastDates)
        .AsBag().Cascade
        .SaveUpdate()
        .KeyColumnNames.Add("EventId")
        .Where(e => e.DateFrom < DateTime.Now.Date)
        .Inverse()
        .SetAttribute("order-by", "column_name"); 
```

请注意，设置 order-by可能会更改NHibernate 使用[的集合类型；](https://www.hibernate.org/359.html)但是这不适用于包包。

# git - 如何将 git 补丁从一个存储库应用到另一个存储库？

> ID：931882
> 
> 赞同：89
> 
> 时间：2009-05-31T11:32:37.603
> 
> 标签：git, patch, git-submodules, git-patch

我有两个存储库，一个是库的主存储库，另一个是使用该库的项目。

如果我对从属项目中的 进行修复，我想要一种简单的方法将该补丁应用回上游。

该文件的位置在每个存储库中都不同。

*   主要回购：***`www.playdar.org/static/playdar.js`***
*   项目：***`playlick.com/lib/playdar.js`***

我尝试`git format-patch -- lib/playdar.js`在 playlick 项目上使用，然后`git am`在主 playdar repo 上使用，但补丁文件中的不同文件位置引发了错误。

有没有一种简单的方法可以将补丁从给定文件上的给定提交应用到其他地方的另一个任意文件？

对于奖励积分，如果您要应用补丁的文件不在 git 存储库中怎么办？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-06-29T14:43:36.807

如果手动编辑补丁文件是不可能的或不可行的，这可以使用标准选项（在 和 GNU 中可用`git apply`）`git format-patch`来完成`patch`。

1.  `-p<n>`从补丁中的路径中删除`n`前导目录。

2.  在处理之后`-p`，在应用之前添加到`--directory=<root>`补丁`root`中的每个路径。

### 例子

因此，对于您的示例，要获取最初打开的补丁`static/playdar.js`并将其应用于`lib/playdar.js`，您将运行：

```
$ cat patch_file | git am     \ 
          -p1                 \ # remove 1 leading directory ('static/')
         --directory='lib/'     # prepend 'lib/' 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-05-31T12:53:01.060

生成的补丁`git format-patch`只是一个文本文件——您可以编辑差异标头，以便它修改不同的路径。

因此，例如它会产生这样的东西：

```
diff --git a/lib/playdar.js b/lib/playdar.js
index 1234567..89abcde
-- a/lib/playdar.js
++ b/lib/playdar.js 
```

您所要做的就是更改`lib/playdar.js`为`static/playdar.js`然后运行补丁`git am"`

对于没有`git`--- 但在这种情况下不使用 等选项运行`format-patch`以`-M`生成`-C`重命名补丁的人，该补丁应该可以被标准 GNU 补丁实用程序读取，因为对它们的支持并不普遍。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-31T11:48:17.947

假设这两个项目都是 git 项目，听起来[子模块](http://git-scm.com/docs/git-submodule)非常适合您。这允许一个 git 项目动态链接到另一个 git 项目，本质上是在另一个 git 存储库中烘焙一个 git 存储库，两者都有自己不同的生命。

换句话说，将“main repo”添加为“project”中的子模块。每当您在“主仓库”中提交/推送新内容时，您只需`git pull`将它们返回“项目”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-31T12:01:06.360

完成[Henrik 的回答](https://stackoverflow.com/questions/931882/how-to-apply-a-git-patch-from-one-repository-to-another/931895#931895)，并获得奖励积分

> 如果要应用补丁的文件不在 git 存储库中怎么办？

如果您有权访问来自 git 存储库的补丁的候选文件的目录，则可以首先将该目录/文件树转换为 git 存储库本身！（' `git init`'：一个 git 存储库毕竟只是根目录中的一个 .git）。
然后，您将该 repo 设置为您的主项目的子模块。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-11T14:56:09.080

使用该`--relative`选项`format-patch`可以改进抽象（隐藏有关生成补丁的存储库的不相关详细信息）。

```
[repository-with-changes]
git format-patch --relative=(path-to-library) (base-commit-for-patch) ## 'HEAD~1' 
```

我发现`--3way`应用补丁时需要该选项（以避免`does not exist in index`错误）——您的里程可能会有所不同。`--directory=(...)`仅当您的目标路径不是存储库的根目录时，才可能需要使用。

```
[repository-to-update]
git am --3way --directory=(path-to-library) (patch-file) 
```

* * *

*   `format-patch`自“base”以来，每次提交到当前分支都会创建一个补丁文件。

*   [在某些情况下](https://stackoverflow.com/q/16309053/86967)`--relative`似乎缺少该选项的文档，但它似乎仍然可以工作（从 2.7.4 版开始）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-29T06:25:34.353

您可以添加一个新的遥控器并从中提取。[有细节的文章。](http://blog.joshsoftware.com/2010/04/30/diff-patch-and-different-git-repositories/)

```
$ cd <path-to-repoB>
$ git remote add repoA <git-URL-for-repoA>
$ git pull repoA 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-03T09:29:25.853

您可以暂时删除（重命名）主存储库。

```
cd to/main/project
mv .git .git_
cd to/sub/project
git apply patchname
cd -
mv .git_ .git 
```

# objective-c - 如何使用 NSHost 获取外部 IP 地址？

> ID：931889
> 
> 赞同：2
> 
> 时间：2009-05-31T11:45:33.223
> 
> 标签：objective-c, cocoa

我正在尝试查找我的外部 IP 地址，但我只能在 NAT 后面找到本地 IP 地址。

```
NSArray *addresses = [[NSHost currentHost] addresses]; 
```

有没有办法打印出公共地址？使用 NSHost 是个好主意吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-31T14:13:53.597

获取公共 IP 可能并不总是可靠的方法，但 OS X 中的 DNSService API 将使用 UPnP 和/或 NAT 端口映射协议来获取公共 IP（以及其他内容）。说明如何使用 C API 的代码会有点大（50-60 行），但这里有一些 Apple 示例代码实现了一个很好的 ObjC 包装器，甚至提供了一对直接返回的函数公共 IP 地址的 UInt32 和 NSString 表示。

相关代码本身[位于此处](http://developer.apple.com/samplecode/PortMapper/listing3.html)，但您最好只下载 zip 文件并将 PortMapper.h 和 PortMapper.m 包含在您的项目中并直接使用它们。那么你需要做的就是：

```
NSString * publicAddressString = [PortMapper findPublicAddress]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T12:53:23.243

如果您有机会查看大型组织的网络拓扑图，请这样做。这很有启发性。NAT、防火墙和所有其他“黑魔法”的全部意义在于允许网络在您不知情的情况下管理地址（包括保护您）。

只有三种方法能够可靠地（这里是相对概念）获取服务器的面向外部的 IP 地址。

首先是自己作为网络大神（并确保在询问时将他们称为大神，这将有助于您获取信息）。有时（并非总是），它是 IP 地址高位字节的简单映射，同时保留低位字节。有时它更复杂，但仍然遵循您可以使用的规则。请记住，这些规则可以随时更改。

第二个是在您的网络之外有一个可以查询的框，它反过来可以让您知道您的 IP 地址。

第三种是专门连接到外部 DNS 服务器（不是您的公司服务器）以检索信息。

当然，您应该质疑是否*需要*知道您的外部 IP 地址。DNS 的全部意义在于避免过分担心 IP 地址，而只需通过域名引用机器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-31T12:02:43.657

没有可靠的方法来获取您的公共 IP。根据您的网络拓扑，您可能无法依赖传出地址，原因有很多：IP 地址池、动态路由、多层 NAT、代理服务器等。

# c++ - 什么是更有效的 switch case 或 std::map

> ID：931890
> 
> 赞同：34
> 
> 时间：2009-05-31T11:46:41.617
> 
> 标签：c++, parsing, tokenize

我正在考虑这里的标记器。
每个标记在解析器中调用不同的函数。
什么更有效：

*   std::functions/boost::functions 的映射
*   一个开关盒

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-31T12:20:15.387

我建议阅读[switch() 与查找表？](http://discuss.joelonsoftware.com/default.asp?joel.3.21194.19)来自 Joel 的软件。特别是，这个回应很有趣：

> “人们浪费时间试图优化最不重要的事情的典型例子。”
> 
> 是和不是。在 VM 中，您通常会调用微小的函数，而每个函数都做的很少。伤害你的不是调用/返回，因为每个函数的序言和清理例程通常占执行时间的很大一部分。这已经被研究死了，特别是那些已经实现线程解释器的人。

在虚拟机中，存储要调用的计算地址的查找表通常比交换机更受欢迎。（直接线程，或“标签作为值”。直接调用存储在查找表中的标签地址）这是因为它允许在某些条件下减少[分支预测错误](http://en.wikipedia.org/wiki/Branch_misprediction)，这在长流水线 CPU 中非常昂贵（它强制刷新管道）。但是，它使代码的可移植性降低。

这个问题已经在 VM 社区中进行了广泛的讨论，如果您想了解更多信息，我建议您查找该领域的学术论文。Ertl & Gregg 在 2001 年就这个主题写了一篇很棒的文章，[The Behavior of *Efficient* Virtual Machine Interpreters on Modern Architectures](http://ctho.ath.cx/toread/interpreters/ertl-europar01.pdf)

但如前所述，我很确定这些细节与*您的*代码无关。这些都是小细节，你不应该过分关注它。Python 解释器使用开关，因为他们认为它使代码更具可读性。你为什么不选择你最舒服的用法呢？性能影响会很小，你现在最好关注代码的可读性；）

**编辑**：如果重要的话，使用哈希表*总是*比查找表慢。对于查找表，您使用枚举类型作为“键”，并使用单个间接跳转检索值。这是一个单一的装配操作。O(1)。哈希表查找首先需要计算哈希，然后检索值，这要昂贵得多。

使用存储函数地址的数组，并使用枚举的值进行访问是好的。但是使用哈希表来做同样的事情会增加一个重要的开销

总结一下，我们有：

*   成本（哈希表）>>成本（direct_lookup_table）
*   cost(direct_lookup_table) ~= cost(switch) 如果您的编译器将开关转换为查找表。
*   cost(switch) >> cost(direct_lookup_table) (O(N) vs O(1)) 如果您的编译器不转换开关并使用条件，但我想不出任何编译器会这样做。
*   但是内联直接线程使代码的可读性降低。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-31T11:56:13.717

Visual Studio 2008 附带的 STL Map 将为您提供每个函数调用的 O(log(n))，因为它在下面隐藏了一个树结构。使用现代编译器（取决于实现），switch 语句将为您提供 O(1) ，编译器将其转换为某种查找表。所以一般来说，切换速度更快。

**但是**，请考虑以下事实：

map 和 switch 的区别在于： map 可以动态构建，而 switch 不能。Map 可以包含任意类型作为键，而 switch 仅限于 c++ 原始类型（char、int、enum 等）。

顺便说一句，您可以使用散列映射来实现接近 O(1) 的调度（虽然，取决于散列表的实现，在最坏的情况下有时可能是 O(n)）。即使 ， switch 仍然会更快。

**编辑**

*我写以下内容只是为了好玩和讨论的问题*

我可以为您建议一个很好的优化，但这取决于您的语言的性质以及您是否可以预期您的语言将被如何使用。

编写代码时：您将令牌分为两组，一组将是非常常用的，另一组将是低常用的。您还可以对频繁使用的令牌进行排序。对于频繁使用的标记，您编写一个 if-else 系列，使用频率最高的首先出现。对于低常用的，你写一个switch语句。

这个想法是使用 CPU 分支预测来避免另一个级别的间接性（假设 if 语句中的条件检查几乎没有成本）。在大多数情况下，CPU 会选择正确的分支而无需任何间接级别。但是很少有分支会去错误的地方。根据您语言的性质，统计上它可能会提供更好的性能。

**编辑**：由于下面的一些评论，改变了这句话告诉编译器总是将开关转换为 LUT。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-31T11:59:48.687

你对“高效”的定义是什么？如果您的意思是更快，那么您可能应该分析一些测试代码以获得明确的答案。但是，如果您追求灵活且易于扩展的代码，那么请帮自己一个忙并使用 map 方法。其他一切都只是过早的优化......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-31T12:08:05.753

就像 yossi1981 说的那样，可以优化开关以使用快速查找表，但不能保证，每个编译器都有其他算法来确定是否将开关实现为连续的 if 或快速查找表，或者两者的组合。

要获得快速切换，您的值应符合以下规则：它们应该是连续的，例如 0、1、2、3、4。您可以省略一些值，但像 0、1、2、34、43 这样的值极不可能被优化。

真正的问题是：您的应用程序中的性能是否如此重要？从文件中动态加载其值的映射不会比跨越多页代码的巨大语句更具可读性和可维护性吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-31T12:02:42.380

你没有说你的令牌是什么类型。如果它们不是整数，则您别无选择 - 开关仅适用于整数类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-31T12:12:26.807

C++ 标准没有说明其要求的性能，只是说功能应该在那里。

除非您说明您正在谈论哪种*实现*，否则这些关于哪个更好、更快或更有效的问题是没有意义的。例如，某个 JavaScript 实现的某个版本中的字符串处理非常糟糕，但您不能将其推断为相关标准的一个特性。

我什至会说，无论实现如何都无关紧要，因为`switch`and提供的功能`std::map`是不同的（尽管有重叠）。

在我看来，这些微优化几乎是不必要的。

# c# - .NET 中的反向排序字典

> ID：931891
> 
> 赞同：49
> 
> 时间：2009-05-31T11:47:24.343
> 
> 标签：c#, .net, dictionary, iteration, reverse

有什么方法可以通过 c# 中的 SortedDictionary 向后（反向）迭代？

或者有没有办法以降序定义 SortedDictionary ？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-05-31T12:08:21.977

SortedDictionary 本身不支持向后迭代，但您有多种可能达到相同的效果。

1.  使用`.Reverse`-Method (Linq)。（这将不得不预先计算整个字典输出，但这是最简单的解决方案）

    ```
    var Rand = new Random();

    var Dict = new SortedDictionary<int, string>();

    for (int i = 1; i <= 10; ++i) {
        var newItem = Rand.Next(1, 100);
        Dict.Add(newItem, (newItem * newItem).ToString());
    }

    foreach (var x in Dict.Reverse()) {
        Console.WriteLine("{0} -> {1}", x.Key, x.Value);
    } 
    ```

2.  使字典按降序排序。

    ```
    class DescendingComparer<T> : IComparer<T> where T : IComparable<T> {
        public int Compare(T x, T y) {
            return y.CompareTo(x);
        }
    }

    // ...

    var Dict = new SortedDictionary<int, string>(new DescendingComparer<int>()); 
    ```

3.  改为使用`SortedList<TKey, TValue>`。性能不如字典的（O（n）而不是O（logn）），但是您可以像数组一样随机访问元素。当您使用通用 IDictionary-Interface 时，您不必更改其余代码。

编辑 :: 迭代 SortedLists

您只需按索引访问元素！

```
var Rand = new Random();

var Dict = new SortedList<int, string>();

for (int i = 1; i <= 10; ++i) {
    var newItem = Rand.Next(1, 100);
    Dict.Add(newItem, (newItem * newItem).ToString());
}

// Reverse for loop (forr + tab)
for (int i = Dict.Count - 1; i >= 0; --i) {
    Console.WriteLine("{0} -> {1}", Dict.Keys[i], Dict.Values[i]);
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-31T12:09:11.867

以相反的顺序定义 SortedDictionary 的最简单方法是为其提供一个`IComparer<TKey>`以与正常相反的顺序排序的方法。

[以下是MiscUtil](http://pobox.com/~skeet/csharp/miscutil)中的一些代码，可能会让您更轻松：

```
using System.Collections.Generic;

namespace MiscUtil.Collections
{
    /// <summary>
    /// Implementation of IComparer{T} based on another one;
    /// this simply reverses the original comparison.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    public sealed class ReverseComparer<T> : IComparer<T>
    {
        readonly IComparer<T> originalComparer;

        /// <summary>
        /// Returns the original comparer; this can be useful
        /// to avoid multiple reversals.
        /// </summary>
        public IComparer<T> OriginalComparer
        {
            get { return originalComparer; }
        }

        /// <summary>
        /// Creates a new reversing comparer.
        /// </summary>
        /// <param name="original">The original comparer to 
        /// use for comparisons.</param>
        public ReverseComparer(IComparer<T> original)
        {
            if (original == null)
            { 
                throw new ArgumentNullException("original");
            }
            this.originalComparer = original;
        }

        /// <summary>
        /// Returns the result of comparing the specified
        /// values using the original
        /// comparer, but reversing the order of comparison.
        /// </summary>
        public int Compare(T x, T y)
        {
            return originalComparer.Compare(y, x);
        }
    }
} 
```

然后你会使用：

```
var dict = new SortedDictionary<string, int>
     (new ReverseComparer<string>(StringComparer.InvariantCulture)); 
```

（或您使用的任何类型）。

如果您只想在一个方向上迭代，这将比事后反转排序更有效。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2011-12-02T19:53:03.447

如果您将数值作为键处理，还有一种非常简单的方法，即在创建字典时简单地否定它们。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-02-05T12:38:50.440

**简单地在一行中**创建一个反向排序的字典。

```
var dict = new SortedDictionary<int, int>(Comparer<int>.Create((x, y) => y.CompareTo(x))); 
```

有一种方法可以创建`IComparer<T>`using `System.Collections.Generic.Comparer<T>`。只需将`IComparision<T>`委托传递给其`Create`方法即可构建`IComparer<T>`.

```
var dict = new SortedDictionary<int, TValue>(
    Comparer<int>.Create(
        delegate(int x, int y)
        {
            return y.CompareTo(x);
        }
    )
); 
```

您可以使用**lambda 表达式**/**本地函数**/**方法**来替换委托，如果它们的意义是`(TKey, TKey) => int`.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-05-31T12:12:01.987

如果您使用的是 .NET 3.5，则可以使用 OrderByDescending 扩展方法：

```
 var dictionary = new SortedDictionary<int, string>();
        dictionary.Add(1, "One");
        dictionary.Add(3, "Three");
        dictionary.Add(2, "Two");
        dictionary.Add(4, "Four");

        var q = dictionary.OrderByDescending(kvp => kvp.Key);
        foreach (var item in q)
        {
            Console.WriteLine(item.Key + " , " + item.Value);
        } 
```

# ruby-on-rails - Rails，以另一种方式从视图中调用同一控制器的操作？

> ID：931893
> 
> 赞同：0
> 
> 时间：2009-05-31T11:47:49.927
> 
> 标签：ruby-on-rails

我正在开发一个应该有游戏的应用程序，当单击游戏时，它会转到 game.prestart 并显示说明和其他内容。我在那里写道：

```
 link_to "Play", :controller => "games", :action => "wait" 
```

wait 将等待其他玩家，然后重定向到“播放”动作

这里有两个问题：

1.- 这不是休息，但我不知道怎么做

2.- 如果我添加 :method =>:get ，上面的代码将给出“无后操作等待”或类似的东西，我将得到一个无路由匹配。我有“等待”方法和已经创建的视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T18:03:18.190

> 除了默认方法之外，您还可以在 RESTful 路由中添加方法。查看第 3.3 节，在此处添加更多 RESTful 操作。

其实你真正想要的是3.11

似乎您需要定义其他成员路由，这样您就可以使用以下方法生成路径：

```
wait_game_path(@game) 
```

要生成成员路线，您需要将您的路线.rb 中的 map.resources :games 行修改为：

```
map.resources :games, :member => {:wait => :get} 
```

这将为@game 的每个实例添加一个新的等待操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T12:03:19.240

您可以这样做：

1.  调用动作游戏。
2.  搜索标记为待处理的会话。
3.  如果找到会话，则将当前会话和找到的会话放入某个包装类并通知找到的会话该游戏已接受（推送包装类对象 ID）。
4.  如果未找到会话，则将会话标记为播放器挂起并将用户重定向到“等待页面”。在“等待页面”上安排 ajax 调用，如果游戏被其他会话接受，它将跟踪会话状态。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T12:53:59.250

除了默认方法之外，您还可以在 RESTful 路由中添加方法。查看第 3.3 节，在[此处](http://guides.rubyonrails.org/routing.html)添加更多 RESTful 操作。

# php - 使用 Zend Framework 制作的项目中的变音符号问题

> ID：931904
> 
> 赞同：0
> 
> 时间：2009-05-31T11:51:30.390
> 
> 标签：php, linux, apache, zend-framework, diacritics

在测试我们的 Web 应用程序时发现了一个有趣的问题。

我在 localhost (Windows) 和在线测试服务器 (Linux) 上有应用程序。两者都连接到同一个数据库（在 Linux 服务器上）。当我尝试通过位于 Linux 服务器上的应用程序中的表单编辑一个文本字段时，它会从结果中裁剪变音符号并将其保存到数据库中。但是当我尝试相同的操作时，在 locahost (Windows) 上使用相同的代码时，它会在我编写时保存带有变音符号的整个文本。

我尝试检查 PHP 配置，但两台机器上的配置完全相同。

有谁知道我应该在哪里寻找应该导致什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T13:19:14.253

听起来您的 Windows 机器上的 MySql 实例上的一个或多个字符设置未设置为 UTF8，请尝试执行以下查询：

```
show variables like '%character%' 
```

您的输出将是 character_encoding 相关的服务器变量，在我的数据库输出上执行：

```
character_set_client        utf8
character_set_connection    utf8
character_set_database    utf8
character_set_filesystem    binary
character_set_results      utf8
character_set_server        utf8
character_set_system        utf8
character_sets_dir        /usr/share/mysql/charsets/ 
```

我最好的猜测是其中一个或多个设置为**latin1**

此外，您可能想要检查排序规则，即执行此

```
show variables like '%collation%' 
```

你会得到类似的东西：

```
collation_connection    utf8_general_ci
collation_database    utf8_general_ci
collation_server        utf8_general_ci 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T11:56:23.687

两台服务器是否以相同的编码提供页面？

在Firefox中，访问页面，右键单击并“查看页面信息”。将有一个编码条目。要使这些正确传输，您需要 UTF-8 或类似的编码。

之后，检查您的数据库设置。您需要将 MySQL 连接设置为使用 UTF8，并且您的表和列也应设置为 utf8。

您可以通过在连接后发出以下查询来设置 mysql 连接字符集：

```
SET NAMES 'utf8' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-24T09:25:50.970

发现在该字段上使用一个过滤器的问题，该过滤器在不同系统上的作用不同。

# jquery - ajax 和 jquery 有什么区别，哪个更好？

> ID：931908
> 
> 赞同：115
> 
> 时间：2009-05-31T11:54:09.243
> 
> 标签：jquery, ajax

我对使用 ajax 或 jquery 感到困惑，所以我想知道有什么区别以及哪一个更好，例如性能和复杂性。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2009-05-31T11:59:03.667

[AJAX](http://en.wikipedia.org/wiki/Ajax_(programming))是一种从网页到服务器执行[XMLHttpRequest （带外 Http 请求）并发送/检索要在网页上使用的数据的技术。](http://en.wikipedia.org/wiki/XMLHttpRequest)AJAX 代表异步 Javascript 和 XML。它使用 javascript 来构造 XMLHttpRequest，通常在各种浏览器上使用不同的技术。

[jQuery](http://en.wikipedia.org/wiki/Jquery) ( [website](http://jquery.com) ) 是一个 javascript 框架，它通过构建许多可用于搜索和与 DOM 交互的高级功能来更轻松地使用 DOM。jQuery 的部分功能实现了执行 AJAX 请求的高级接口。jQuery 抽象地实现了这个接口，使开发人员在发出请求时免受多浏览器支持的复杂性。

* * *

## 回答 #2

> 赞同：192
> 
> 时间：2009-05-31T12:00:19.823

在 StackOverflow 上，按下投票按钮是 AJAX，而输入您的问题或答案并看到它出现在它下方的实时预览窗口中是 JavaScript (JQuery)。

这意味着 AJAX 和 Javascript 之间的区别在于 AJAX 允许您与服务器通信而无需刷新页面（即转到新页面），而 JavaScript (JQuery) 允许您在页面上嵌入逻辑和行为。当然，使用这种逻辑，您也可以创建 AJAX。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2009-05-31T14:08:36.820

一个更简单的英文解释：jQuery 使 AJAX 和其他 JavaScript 任务变得更加容易。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2009-05-31T11:56:52.173

[Ajax](http://en.wikipedia.org/wiki/Ajax_(programming))是一种技术/范例，而 jquery 是一个库（除了其他不错的功能外，它还提供了一个方便的 ajax 包装器）-因此您无法比较它们。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-05-31T11:57:22.373

这真的不是“非此即彼”的情况。AJAX 代表**A** synchronous **J** avaScript和**X ML，而 JQuery 是****一个**JavaScript 库，可以消除编写常见 JavaScript 例程的痛苦。

 **这是事物（jQuery）和进程（AJAX）之间的区别。比较它们就像比较苹果和橙子。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2009-05-31T12:26:24.390

[AJAX](http://en.wikipedia.org/wiki/Ajax_(programming))是一种在浏览器和服务器之间发送信息而无需刷新页面的方式。可以使用或不使用像[jQuery](http://en.wikipedia.org/wiki/Jquery)这样的库来完成。

图书馆更容易。

[这是 AJAX 开发中常用的 JavaScript 库/框架的列表。](http://en.wikipedia.org/wiki/List_of_Ajax_frameworks#JavaScript)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-05-31T12:05:33.043

他们没有可比性。

Ajax（异步 Javascript 和 XML）是 javascript 的子集。Ajax 是客户端浏览器与服务器通信（例如：从数据库中检索数据）而无需执行页面刷新的方式。

jQuery 是一个标准化跨浏览器的 javascript 差异的 javascript 库。jQuery 包含一些 ajax 函数。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-31T11:58:42.700

Ajax 是一种使用 Javascript 与服务器端通信而无需重新加载页面的方式。jQuery 将 ajax 用于它的许多功能，但它只不过是一个提供更简单功能的库。

使用 jQuery，您不必考虑创建 xml 对象等，一切都为您完成，但使用直接的 javascript ajax，您需要对 ajax 调用的每一步进行编程。

# jquery - ASP.NET MVC，jquery ajax，真正简单的历史

> ID：931910
> 
> 赞同：1
> 
> 时间：2009-05-31T11:54:39.680
> 
> 标签：jquery, asp.net-mvc, back-button

我正在开发一个 mvc 应用程序，该应用程序使用 jquery 来实现使用 jquery.load 和/或 jquery.ajax 动态加载页面内容。但是当用户在这类应用程序中使用返回按钮时，用户的结果往往是出乎意料的。我看过谷歌的 RSH 之类的文章声称可以解决这个问题，但我不确定如何使其与 ASP.NET MVC 框架结合 jquery 一起工作。

有没有人有关于如何在使用 jquery 的 ASP.NET MVC 应用程序中实现 Real Simply History（如谷歌的 RSH，jquery 可能也有插件）的示例或解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T12:18:35.967

[在 ASP.Net 学习站点](http://www.asp.net/learn/mvc/#MVC_SampleApp)上有一个非常好的（我的意思是**非常**）教程，它会引导您从头开始构建应用程序，并对其进行重构以使用一些不错的设计模式、基本单元测试和 TDD。

在[最后一次迭代](http://www.asp.net/learn/mvc/tutorial-32-cs.aspx)中，他们添加了 AJAX 功能，包括使用 jQuery 加载部分页面以及使用 Microsoft AJAX 库创建浏览器历史记录点。[看看吧](http://www.asp.net/learn/mvc/tutorial-32-cs.aspx)！

# c# - 如何使鼠标或将 MouseMove 事件路由到父级的控件“透明”？

> ID：931911
> 
> 赞同：2
> 
> 时间：2009-05-31T11:54:45.560
> 
> 标签：c#, winforms, controls, mouse

我想创建一个纸牌游戏。我使用 mousemove 事件通过窗口拖动卡片。问题是如果我将鼠标移到另一张卡片上，它会卡住，因为鼠标光标下方的卡片会获取鼠标事件，因此不会触发窗口的 MouseMove 事件。

这就是我所做的：

```
 private void RommeeGUI_MouseMove(object sender, MouseEventArgs e)
 {
      if (handkarte != null)
      {
                handkarte.Location = this.PointToClient(Cursor.Position);
      }
 } 
```

我尝试了以下方法，但没有区别：

```
SetStyle(ControlStyles.UserMouse,true);
SetStyle(ControlStyles.EnableNotifyMessage, true); 
```

我正在寻找一种方法来实现应用程序全局事件处理程序或一种方法来实现所谓的事件冒泡。至少我想让鼠标忽略某些控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T12:15:08.343

为此，您需要跟踪代码中的一些内容：

1.  按下鼠标按钮时鼠标指向哪张卡片；这是您要移动的卡片（使用 MouseDown 事件）
2.  移动鼠标时移动卡片
3.  释放鼠标按钮时停止移动卡片（使用 MouseUp 事件）

为了只是在控件周围移动，不需要实际捕获鼠标。

一个简单的例子（使用面板控件作为“卡片”）：

```
Panel _currentlyMovingCard = null;
Point _moveOrigin = Point.Empty;
private void Card_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        _currentlyMovingCard = (Panel)sender;
        _moveOrigin = e.Location;
    }
}

private void Card_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left && _currentlyMovingCard != null)
    {
        // move the _currentlyMovingCard control
        _currentlyMovingCard.Location = new Point(
            _currentlyMovingCard.Left - _moveOrigin.X + e.X,
            _currentlyMovingCard.Top - _moveOrigin.Y + e.Y);
    }
}

private void Card_MouseUp(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left && _currentlyMovingCard != null)
    {
        _currentlyMovingCard = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-09T05:14:25.173

您可以做的是将 MouseDown 事件发送到您要调用的 event.function。

假设您在“卡片”上有一个“标签”，但您不想“通过”它：

```
private void Label_MouseDown( object sender, MouseEventArgs)
{
   // Send this event down the line!
   Card_MouseDown(sender, e); // Call the card's MouseDown event function
} 
```

现在调用了适当的事件函数，即使单击了令人讨厌的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T11:59:07.363

通常你会这样做，在捕获鼠标之前，看看其他人是否有它......

# authentication - Magento 中的统一客户和管理员帐户

> ID：931922
> 
> 赞同：0
> 
> 时间：2009-05-31T11:58:11.170
> 
> 标签：authentication, magento, admin

无论如何将客户会话传递给管理员，反之亦然？例如...如果我想统一一些客户和管理员帐户怎么办（对于一些非常特殊的用户=）

用例：通过链接将用户从客户仪表板重定向到管理仪表板。假设用户名和密码已经同步。

我一直在对此进行试验，方法是在客户控制器中创建一个管理会话（从 adminhtml/Controller/Action.php 和 adminhtml/controllers/IndexController.php 中提取代码）。然后我将请求重新路由到 adminhtml 控制器。

一旦请求被路由，我创建并填充数据的单例管理员/会话似乎不会持续存在......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T03:27:58.287

我只尝试将用户从drupal 登录到magento 前端。但这就是我在客户和管理员之间共享会话的方式。

看看下面的类

```
/app/code/core/model/customer/model/session.php

//this retrieves the logged in customer
Mage::getSingleton('customer/session')->getUSer()

/app/code/core/model/admin/model/session.php

//this retrieves the logged in admin user
Mage::getSingleton('admin/session')->getUser() 
```

创建新客户时，您应该使用 save() 方法为该用户创建一个管理员帐户

```
/app/code/core/model/admin/model/user.php
Mage::getSingleton('admin/user')->save() 
```

之后，当您想将客户登录到管理员时，只需致电

```
/app/code/core/model/admin/model/session.php
Mage::getSingleton('admin/user')->login() 
```

希望这会让你走上正确的道路:)

# sql-server - vs2008 在 ssms2008 更新后失去与数据库的连接

> ID：931931
> 
> 赞同：0
> 
> 时间：2009-05-31T12:01:06.907
> 
> 标签：sql-server, visual-studio, sql-server-2008

这是我的设置：

在 Vista 上运行的 Sql server 2008 标准 - VMware 运行一台装有 VS2008 的 XP 机器。

如果我在 sql server management studio 的主机中打开一个 SQL 数据库并对数据库进行结构更改然后返回到 Visual Studio，我的 Visual Studio 已经失去了与数据库的连接（说发生了网络错误） - 刷新确实不行。关闭 VS 并重新打开可以解决问题。

有没有其他人注意到这一点，或者我应该研究的设置中是否有问题？

我可以毫无问题地查询数据库、添加数据、删除数据 - 只有当我更改结构（例如关系）或添加删除列等时。

谢谢，

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T13:48:55.130

这可能是服务器故障问题。

我在 VMware 中遇到了类似的网络共享/SQL 安全问题（尽管我的问题是在 OS/X 上融合。）问题似乎是网络掉线并失去连接。就我而言，我总是能够解决客户端上的 dhcp release/renew 问题。

我向 VMWare 提出了支持电话；基本的回应是检查您的 vmware 是否已更新，然后确保您在客户端上安装了正确版本的 vmware 工具。当这不起作用时，他们让我在虚拟机和主机上更改为完整的 dhcp，而不是固定 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T12:34:32.597

我不知道您的问题是否与[我](https://stackoverflow.com/questions/483273/server-explorer-unavailable-vs2008pro)的相同，但如果是，您可以通过[重置 Visual Studio 中的一些设置来](https://stackoverflow.com/questions/929615/reset-vs-2008-toolbars/929634#929634)解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T12:21:52.090

我建议不要将数据库作为文件附加，而是使用 SQL Server management studio express 将它们附加到本地计算机。您可以使用以下连接字符串：

```
connectionString="Data Source=(local)\sqlexpress;Initial Catalog=dbname;Integrated Security=SSPI;" 
```

这将允许您在 Visual Studio 以及 SQL Management Studio 中使用数据库......

**编辑**连接字符串用于 SQL Express，如果您正在运行 SQL Server 2008，则必须更改它（我相信将数据源更改为您的机器名/IP）

# objective-c - 如何在不引用类的情况下在 Objective C 中调用 +class 方法？

> ID：931937
> 
> 赞同：10
> 
> 时间：2009-05-31T12:07:24.037
> 
> 标签：objective-c, metaprogramming, class-method

我有一系列“策略”对象，我认为这些对象可以方便地实现为一组策略类的类方法。我为此指定了一个协议，并创建了要遵守的类（如下所示）

```
@protocol Counter   
+(NSInteger) countFor: (Model *)model;
@end

@interface CurrentListCounter : NSObject <Counter> 
+(NSInteger) countFor: (Model *)model;
@end 
```

然后我有一个符合这个协议的类的数组（就像 CurrentListCounter 一样）

```
+(NSArray *) availableCounters {
return [[[NSArray alloc] initWithObjects: [CurrentListCounter class], [AllListsCounter class], nil] autorelease];
} 
```

请注意我如何使用对象之类的类（这可能是我的问题 - 在 Smalltalk 中，类是像其他所有东西一样的对象 - 我不确定它们是否在 Objective-C 中？）

我的确切问题是，当我从数组中取出一个策略对象时，我想调用该方法：

```
id<Counter> counter = [[MyModel availableCounters] objectAtIndex: self.index];
return [counter countFor: self]; 
```

我在返回语句上收到警告 - 它说 -countFor: not found in protocol （因此它假设它是我想调用类方法的实例方法）。然而，由于我的数组中的对象是类的实例，它们现在就像实例方法（或者在概念上它们应该是）。

有没有调用类方法的神奇方法？或者这只是一个坏主意，我应该只创建我的策略对象的实例（而不是使用类方法）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-01T09:10:01.660

这

```
id <Counter> counter = [[Model availableCounters] objectAtIndex:0];
return ( [counter countFor: nil] ); 
```

应该

```
Class <Counter> counter = [[Model availableCounters] objectAtIndex:0];
return ( [counter countFor: nil] ); 
```

首先，您有一个符合`<Counter>`. 在第二个中，您有一个符合`<Counter>`. 编译器警告是正确的，因为符合的实例`<Counter>`不响应`countFor:`，只有类才响应。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-31T12:28:27.193

Objective-C 中的类确实像实例一样工作——主要的潜在区别是保留计数对它们没有任何作用。但是，您在 -availableCounters 数组中存储的不是实例（`id`类型），而是具有`Class`. 因此，使用上面指定的 -availableCounters 定义，您需要的是：

```
Class counterClass = [[MyModel availableCounters] objectAtIndex: self.index];
return ( [counterClass countFor: self] ); 
```

但是，如果您使用实例而不是类，它可能在语义上会更好。在这种情况下，您可以执行以下操作：

```
@protocol Counter
- (NSUInteger) countFor: (Model *) model;
@end

@interface CurrentListCounter : NSObject<Counter>
@end

@interface SomeOtherCounter : NSObject<Counter>
@end 
```

然后您的模型类可以实现以下内容：

```
static NSArray * globalCounterList = nil;

+ (void) initialize
{
    if ( self != [Model class] )
        return;

    globalCounterList = [[NSArray alloc] initWithObjects: [[[CurrentListCounter alloc] init] autorelease], [[[SomeOtherCounter alloc] init] autorelease], nil];
}

+ (NSArray *) availableCounters
{
    return ( globalCounterList );
} 
```

那么您对它的使用将与您在上面指定的完全一样：

```
id<Counter> counter = [[Model availableCounters] objectAtIndex: self.index];
return ( [counter countFor: self] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T12:25:36.920

事实证明它实际上正在工作并且警告不正确。

所以问题仍然在于它是否合理（如果它们不需要任何状态，则使用类方法）？

以及如何最好地处理警告（我喜欢免费运行警告）？

我唯一的解决方法是拥有第二个协议（与第一个协议基本相同，但在实例端声明它）：

```
@protocol CounterInstance
-(NSInteger) countFor: (Model *)model;
@end 
```

在我访问计数器的地方使用它来代替（欺骗编译器）：

```
id<CounterInstance> counter = [[MyModel availableCounters] objectAtIndex: self.index];
return [counter countFor: self]; 
```

它有点尴尬，但确实有效。对他人的观点感兴趣吗？

# gwt - 减少 GWT 自定义小部件的详细程度

> ID：931940
> 
> 赞同：5
> 
> 时间：2009-05-31T12:08:25.987
> 
> 标签：gwt

我当前的自定义小部件流程如下：

1.  创建我的小部件类 - 扩展 Composite；
2.  为这个小部件创建一个监听器接口；
3.  创建一个监听器集合接口——widget的私有内部类；
4.  在小部件上创建 add/removeListener 方法；
5.  在小部件内部，触发侦听器上的事件。

我的侦听器触发细粒度事件，例如`onEntityDisplayRequested(Entity entity)`，所以我不能使用普通侦听器。

虽然这实现了小部件的低耦合并允许重用，但它非常冗长。有没有更好的方法来处理自定义小部件的设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T12:11:54.793

您不需要为每个新小部件使用单独的侦听器接口。例如， [ClickListener](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/ClickListener.html)被各种不同的小部件类使用。显然，一些自定义小部件将需要新的侦听器类型，但这不应该是自动的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-12T12:23:11.400

我认为 Java 前段时间遇到了同样的问题，解决方案是设置 PropertyChange 事件。它们附带 - PropertyEvent，包含源、属性名称和旧+新值 - PropertyChangeListener - PropertyChangeSupport，您可以将事件触发以及注册和注销侦听器委托给它。

您失去了一些特异性（事件与其名称作为字符串匹配），但您仍然可以触发细粒度事件并获得一些外部类支持。

我没有在 GWT 中广泛使用它，所以我不能评论效率方面。

# jquery - Flexigrid - 添加带有链接的列

> ID：931944
> 
> 赞同：3
> 
> 时间：2009-05-31T12:10:38.993
> 
> 标签：jquery, flexigrid

我正在使用 Flexigrid 来显示分页数据，并且效果很好。现在我需要添加所有行的链接（“编辑”、“查看”、“删除”），老实说，我不知道如何继续它。有什么东西可以开箱即用吗？

基本思想是为这 3 个链接添加一个带有小图标的附加列，而不是顶部的工具栏。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-31T12:29:10.423

我已经弄清楚了:)

诀窍是简单地将链接直接放在脚本返回的数据中。例如，这将创建一个第一列包含相关链接的行：

```
List<Object> rows = new List<Object>();
foreach (var item in results) {
rows.Add(new { 
    id = item.ID,
    cell = new string[] { 
        String.Format("<a href='/Account/View/{0}'>view</a>&nbsp;<a href='/Account/Edit/{0}'>edit</a>", item.ID), 
        item.Name, 
        item.Phone 
    }
}
var result = new { page = page, total = rowcount, rows = rows };
return Json(result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-11-13T17:38:16.470

我不喜欢构建网格数据的“演示者”注入标记的事实。我添加了这个在“onSuccess”事件上运行的小扩展。它将默认列表示形式转换为链接。

```
(function ($) {
    $.fn.flexLinkColumn = function (colIndex, url) {
        if (colIndex === undefined || url === undefined)
            throw "flexLinkColumn requires colIndex and url";

        if ($(this).closest('div.flexigrid').length === 0)
            throw "flexiLinkColumn only operates on flexilink grids.";

        $(this).find('tr').each(function (index, tr) {
            var rowId = $(tr).attr('id');
            var itemId = rowId.substring(3);
            var itemUrl = url + (itemId ? "/" + itemId : "");

            var div = $(tr).find('td').eq(colIndex).find('div');
            var text = $(div).text();
            $(div).html('<a href="' + itemUrl + '">' + text + '</a>');
        });
    }
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-22T10:20:51.743

对于导轨：

添加如下

```
return_data[:rows] = @countries.collect{|l| { :id => l.id, :cell=>[ 
'%a :href=>'javascript:void(0);'#{l.client_cont_person}', // normal html link

l.completed_on,l.created_by,l.project_id,l.status
]}} 
```

# windows - 从 Web 应用程序访问客户端设备的最佳方式

> ID：931949
> 
> 赞同：0
> 
> 时间：2009-05-31T12:12:58.817
> 
> 标签：windows, internet-explorer, activex

我需要为 Intranet Web 应用程序提供对各种扫描仪和打印机的支持。基本上，用户需要能够使用他的网络摄像头或相机拍照，使用他的扫描仪扫描并通过他的打印机打印。因为这是一个 Intranet 应用程序，所以兼容性不是问题。我可以确保用户安装了所有驱动程序。但是客户端坚持应用程序应该嵌入浏览器中，而不是在本机窗口中运行。所有客户端机器都是Windows PC，但客户端可以灵活选择浏览器。

我正在考虑编写一个 ActiveX 控件。但是我不确定我是否在使用一些 90 年代的技术，因为可能有更好的技术可用。因此，我还有什么可以看的吗？如果我必须编写 ActiveX，你能指出我从一个好的示例应用程序开始吗？我对 C 很满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T12:30:27.893

您可以在 Html 文件上使用 .htc 扩展名。这将网站置于不同的沙箱中，允许对客户端功能进行更多访问（例如，执行连接到打印机或扫描仪的命令行软件......）

# facebook - 我应该从哪里开始使用 facebook 应用程序？

> ID：931951
> 
> 赞同：1
> 
> 时间：2009-05-31T12:14:10.110
> 
> 标签：facebook

我正在考虑开发一个相当简单的 facebook 应用程序，我已经在 access 中对数据库进行了建模。我有可用的网络空间和 mySQL 数据库，但我想知道是否有人可以向我指出任何关于 facebook 开发的指南？不久前我进行了搜索，但它们似乎都已经过时了。有人知道我应该从哪里开始吗？我不想真正分享我的想法，但它是针对特定产品集的评级系统。我以前没有做过太多的 PHP，只编辑了我的 wordpress 模板，而且我确实知道足够多的 SQL，我希望如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T12:23:53.210

使用以下链接在 facebook 上创建和配置您的应用程序：http: [//www.facebook.com/developers/](http://www.facebook.com/developers/)

以下链接将帮助您与 facebook 平台集成我在 facebook 开发者平台上有一个应用程序，以下链接帮助我集成和使用 facebook API：

[http://wiki.developers.facebook.com/index.php/API](http://wiki.developers.facebook.com/index.php/API)

[http://wiki.developers.facebook.com/index.php/C](http://wiki.developers.facebook.com/index.php/C)

[http://devtacular.com/articles/bkonrad/how-to-use-the-facebook-developer-toolkit-20/](http://devtacular.com/articles/bkonrad/how-to-use-the-facebook-developer-toolkit-20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T12:15:17.610

您可能会从这里找到一些好的资源：[Facebook 编程上的好资源](https://stackoverflow.com/questions/454051/good-resources-on-facebook-programming)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-07T20:45:04.673

我强烈推荐你买...

[http://pragprog.com/titles/mmfacer/developing-facebook-platform-applications-with-rails](http://pragprog.com/titles/mmfacer/developing-facebook-platform-applications-with-rails)

当您可以通过这本书找到几乎所有可以做的事情时，无需阅读一堆小教程。不过，使用 iframe 构建 facebook 应用程序似乎缺乏。

# embedded-linux - 如何使用 OpenEmbedded 生成的图像

> ID：931956
> 
> 赞同：1
> 
> 时间：2009-05-31T12:15:59.823
> 
> 标签：embedded-linux

我安装了 openembedded 并尝试为 Zaurus SL-6000 “Tosa”构建几个图像，基本上是 helloworld-image 和 console-image。最后我得到了一个 angstrom-dev/deploy/glibc/images/tosa 目录，其中包含这样的文件（从我在其他地方发布的论坛帖子中略有删减）：

Angstrom-helloworld-image-glibc-ipk-2009.X-test-20090529-tosa-installkit.tgz

Angstrom-helloworld-image-glibc-ipk-2009.X-test-20090529-tosa.rootfs.jffs2

Angstrom-helloworld-image-glibc-ipk-2009.X-test-20090529-tosa.rootfs.tar.bz2

Angstrom-helloworld-image-glibc-ipk-2009.X-test-20090529-tosa.rootfs.tar.gz

helloworld-image-tosa.tar.bz2

helloworld-image-tosa.tar.gz

initramfs-kexecboot-image-tosa.cpio.gz

initramfs-kexecboot-image-tosa.jffs2

initramfs-kexecboot-image-tosa.tar.bz2

initramfs-kexecboot-image-tosa.tar.gz

模块-2.6.29-r0-tosa.tgz

更新程序.sh.tosa

zImage-2.6.29-r0-tosa.bin

zImage-kexecboot-2.6.24-r0-tosa.bin

zImage-kexecboot-tosa.bin

zImage-tosa.bin

我不知道所有这些做什么或如何正确安装它们。我所做的尝试是使用维护菜单的选项 4（根据前面的说明指定）闪烁 zImage.bin 和 initrd.bin 的各种组合。闪烁通常可以正常工作，但是当它启动时，它会加载一个找不到任何可启动设备的引导加载程序。凭直觉，我尝试将其中一个 tar.gz 映像解压缩到 ext2 格式的 SD 卡中，并尝试使用插入的 SD 卡进行引导，但它被引导加载程序检测到。启动它有点工作，但它很快退出到引导加载程序（我认为这只是我解压缩的图像的问题）。

我的问题是：

所有这些文件类型的正确用法是什么，即 .jffs2 文件是否应该重命名为 initrd.bin 并包含在刷新过程中？我应该如何处理 bz2 和 gz 文件？它们仅用于解压到外部媒体吗？

如何安装到内部闪存？它曾经与稳定的 Angstrom 2007-12 构建和指令一起使用。

是否有更新版本的 updater.sh（那个不是由 oe 构建的，我自己添加的，是从其他地方获取的）？我问的原因是，当尝试刷新 zImage-2.6.29-r0-tosa.bin 时，它在更新程序期间失败，并出现文件太大的错误。该内核大约为 1.3mb，而其他内核为 1.2mb。这是 SL-6000 本身的限制吗？我以为它有 32mb 的内部存储器。

* * *

不幸的是，我在网上找到的可用文档都没有谈到安装这些文件。我确实在“Angstrom 手册”中找到了一个小条目，其中讨论了它们是什么，但没有讨论如何使用它们，因为它们都是特定于设备的。不幸的是，tosa 文档只讨论了从 installkit 复制文件和从维护菜单刷新设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-05T12:02:48.590

好的，OE论坛上的“蚂蚁”能够回答我的问题^^只是将答案记录在这里以供后代使用。

installkit-tosa.tar.gz，包含 updater.sh 和 zImage（kexecboot-kernel）。这个 kexecboot-kernel 可以并且很可能与机器启动后您在 rootfs 上的内核不同。在格式化的卡上解压安装包，然后按照设备的刷写程序进行操作。

关于还有各种 image-rootfs.tar.gz、.bz2 和 .jffs2 文件。这些是将由 kexecboot 引导的根文件系统。tar.gz 或 .bz2 档案应解压到 ext2（或可能是 ext3）格式的 SD 或 CF 卡上。它会在启动时被 kexecboot 检测到并出现在 kexecboot 菜单中。

如果您想要一个 nand 中的 rootfs（内部安装），请将 your-image-rootfs.jffs2 重命名为 initrd.bin 并使用 updater.sh（然后是闪存）将其复制到卡上。

# unix - 如何将 / 放入文件名？

> ID：931957
> 
> 赞同：2
> 
> 时间：2009-05-31T12:16:16.110
> 
> 标签：unix

如何将 / 放入文件名（即 / 不分隔路径的组成部分）？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-31T12:17:09.073

你没有。UNIX 文件名中不允许使用斜杠。

# c# - 与 Vista 类似的 WinForms 控件，左侧有一个紧凑的颜色条，右侧有更多的图标和文本

> ID：931960
> 
> 赞同：0
> 
> 时间：2009-05-31T12:18:40.210
> 
> 标签：c#, winforms, open-source, user-controls, controls

是否有任何 Winforms 控件的开源实现，例如 Windows 更新窗口中的“没有可用的重要更新”或显示其他状态的控件？它看起来像一个带有紧密垂直颜色条的带边框的条 - 绿色或红色，具体取决于显示的信息，一个大图标和更右侧的几行文本。至少它叫什么名字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T07:17:30.827

我不知道有一个，但自己实施应该只需要几分钟。

您可以创建一个从 Control 派生的新类，并使用 LinearGradientBrush 绘制条形图。剩下的只是创建标签和图像，放置它们并连接属性。

如果您自己不习惯这样做，我建议您无论如何都要学习如何操作，并将此控件用作一种不错的、相对简单的学习方式。将来当您无疑会再次遇到此问题时，它将有很大帮助。GDI+ 绘画和创建自定义控件是任何 WinForms 开发人员都应该知道的技能。

# asp.net-mvc - ASP.NET MVC 和 StructureMap 存在问题

> ID：931963
> 
> 赞同：2
> 
> 时间：2009-05-31T12:20:51.907
> 
> 标签：asp.net-mvc, structuremap, http-status-code-404

我的机器上的 StructureMap 工作正常。一切都很好......直到我请求一个不存在的资源。我得到一个 500 错误，而不是 404。

例如。[http://localhost:6969/lkfhklsfhskdfksdf](http://localhost:6969/lkfhklsfhskdfksdf)

检查网络，我被告知要[修复我的结构图控制器类](http://www.thegrubbsian.com/2009/03/13/aspnet-mvc-structuremap-and-the-404)。做到了，很高兴！我现在得到-*原始默认404黄屏页面*-。好的，这比我的 500 错误页面要好。

但是，我希望它转到我的自定义 404 页面 :( 如果我在合法控制器上调用错误操作，我会得到我的自定义 404 页面。

在我的 global.asax 中，我有我的自定义路由，然后是默认路由，最后是 404 路由：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Post", action = "Index", id = "" } // Parameter defaults
    );

// Invalid/Unknown route.
routes.MapRoute(
    "404-ResourceNotFound",
    "{*url}",
    new { controller = "StaticContent", action = "ResourceNotFound" }
    ); 
```

这是我的结构图控制器代码：

```
public class StructureMapControllerFactory: DefaultControllerFactory {
    protected override IController GetControllerInstance(Type controllerType) {
        if (controllerType != null) {
            return ObjectFactory.GetInstance(controllerType) as Controller;
        return base.GetControllerInstance(controllerType);
    }
} 
```

有任何想法吗？有什么方法可以让结构映射控制器工厂重新回到`global.asax`路由列表中？还是我做了一些非常糟糕的事情，需要修复一些其他的东西。

干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T05:25:49.913

嗯......似乎这可能是一个例外。就像 MVC 旨在通过异常处理 404 错误的方式一样。

这是我的代码：

```
public class StructureMapControllerFactory : DefaultControllerFactory
{
    protected override IController GetControllerInstance(Type controllerType)
    {
        IController result = null;
        try
        {
            result = ObjectFactory.GetInstance(controllerType) as Controller;
        }
        catch (StructureMapException)
        {
            System.Diagnostics.Debug.WriteLine(ObjectFactory.WhatDoIHave());
            throw;
        }

        return result;
    }
} 
```

..您甚至可能已经拥有并更改了它。如果没有，请尝试一下，看看是否有区别。我不怀疑会有。

也许只是尝试闯入该覆盖并查看引发了哪些异常。

（旁注：奇怪的是，我总是在你的问题上绊倒克罗姆。你在做什么？）

**编辑：**我尝试了装束请求并得到了同样的例外。所以我像你一样更新了我的课程。

我的新课：

```
public class StructureMapControllerFactory : DefaultControllerFactory
{
    protected override IController GetControllerInstance(Type controllerType)
    {
        if (controllerType == null)
            return base.GetControllerInstance(controllerType);

        IController result = null;
        try
        {
            result = ObjectFactory.GetInstance(controllerType) as Controller;
        }
        catch (StructureMapException)
        {
            System.Diagnostics.Debug.WriteLine(ObjectFactory.WhatDoIHave());
            throw;
        }

        return result;
    }
} 
```

..这似乎给了我应有的404 ..但我从来没有得到开发中的自定义错误页面（本地）..我必须等到我发布之前我得到那些。您是否习惯于在 dev 中看到自定义错误页面？

# c# - TextReader/StreamReader 中是否有“转到行”选项？

> ID：931976
> 
> 赞同：9
> 
> 时间：2009-05-31T12:30:18.827
> 
> 标签：c#, .net, text

我有一个包含 25k 行的巨大文本文件。在该文本文件中，每一行都以“1 \t (linenumber)”开头

例子：

```
1   1   ITEM_ETC_GOLD_01    골드(소)   xxx xxx xxx_TT_DESC 0   0   3   3   5   0   180000  3   0   1   0   0   255 1   1   0   0   0   0   0   0   0   0   0   0   -1  0   -1  0   -1  0   -1  0   -1  0   0   0   0   0   0   0   100 0   0   0   xxx item\etc\drop_ch_money_small.bsr    xxx xxx xxx 0   2   0   0   1   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0   0   0   0   0   0   0   0   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1   표현할 골드의 양(param1이상) -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx 0   0
1   2   ITEM_ETC_GOLD_02    골드(중)   xxx xxx xxx_TT_DESC 0   0   3   3   5   0   180000  3   0   1   0   0   255 1   1   0   0   0   0   0   0   0   0   0   0   -1  0   -1  0   -1  0   -1  0   -1  0   0   0   0   0   0   0   100 0   0   0   xxx item\etc\drop_ch_money_normal.bsr   xxx xxx xxx 0   2   0   0   1   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0   0   0   0   0   0   0   0   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1000    표현할 골드의 양(param1이상) -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx 0   0
1   3   ITEM_ETC_GOLD_03    골드(대)   xxx xxx xxx_TT_DESC 0   0   3   3   5   0   180000  3   0   1   0   0   255 1   1   0   0   0   0   0   0   0   0   0   0   -1  0   -1  0   -1  0   -1  0   -1  0   0   0   0   0   0   0   100 0   0   0   xxx item\etc\drop_ch_money_large.bsr    xxx xxx xxx 0   2   0   0   1   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0   0   0   0   0   0   0   0   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 10000   표현할 골드의 양(param1이상) -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx 0   0
1   4   ITEM_ETC_HP_POTION_01   HP 회복 약초    xxx SN_ITEM_ETC_HP_POTION_01    SN_ITEM_ETC_HP_POTION_01_TT_DESC    0   0   3   3   1   1   180000  3   0   1   1   1   255 3   1   0   0   1   0   60  0   0   0   1   21  -1  0   -1  0   -1  0   -1  0   -1  0   0   0   0   0   0   0   100 0   0   0   xxx item\etc\drop_ch_bag.bsr    item\etc\hp_potion_01.ddj   xxx xxx 50  2   0   0   1   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0   0   0   0   0   0   0   0   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 120 HP회복양   0   HP회복양(%)    0   MP회복양   0   MP회복양(%)    -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx 0   0
1   5   ITEM_ETC_HP_POTION_02   HP 회복약 (소)  xxx SN_ITEM_ETC_HP_POTION_02    SN_ITEM_ETC_HP_POTION_02_TT_DESC    0   0   3   3   1   1   180000  3   0   1   1   1   255 3   1   0   0   1   0   110 0   0   0   2   39  -1  0   -1  0   -1  0   -1  0   -1  0   0   0   0   0   0   0   100 0   0   0   xxx item\etc\drop_ch_bag.bsr    item\etc\hp_potion_02.ddj   xxx xxx 50  2   0   0   2   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0   0   0   0   0   0   0   0   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 220 HP회복양   0   HP회복양(%)    0   MP회복양   0   MP회복양(%)    -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx 0   0
1   6   ITEM_ETC_HP_POTION_03   HP 회복약 (중)  xxx SN_ITEM_ETC_HP_POTION_03    SN_ITEM_ETC_HP_POTION_03_TT_DESC    0   0   3   3   1   1   180000  3   0   1   1   1   255 3   1   0   0   1   0   200 0   0   0   4   70  -1  0   -1  0   -1  0   -1  0   -1  0   0   0   0   0   0   0   100 0   0   0   xxx item\etc\drop_ch_bag.bsr    item\etc\hp_potion_03.ddj   xxx xxx 50  2   0   0   3   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0   0   0   0   0   0   0   0   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 370 HP회복양   0   HP회복양(%)    0   MP회복양   0   MP회복양(%)    -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx 0   0
1   7   ITEM_ETC_HP_POTION_04   HP 회복약 (대)  xxx SN_ITEM_ETC_HP_POTION_04    SN_ITEM_ETC_HP_POTION_04_TT_DESC    0   0   3   3   1   1   180000  3   0   1   1   1   255 3   1   0   0   1   0   400 0   0   0   7   140 -1  0   -1  0   -1  0   -1  0   -1  0   0   0   0   0   0   0   100 0   0   0   xxx item\etc\drop_ch_bag.bsr    item\etc\hp_potion_04.ddj   xxx xxx 50  2   0   0   4   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0   0   0   0   0   0   0   0   0   0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 570 HP회복양   0   HP회복양(%)    0   MP회복양   0   MP회복양(%)    -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx -1  xxx 0   0 
```

问题：我如何直接读取，例如第5行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-31T12:37:44.540

您可以使用我的`LineReader`类（[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)中的类或[此处的简单版本](http://csharpindepth.com/ViewNote.aspx?NoteID=113)）来实现`IEnumerable<string>`然后使用 LINQ：

```
string line5 = new LineReader(file).Skip(4).First(); 
```

诚然，这假定 .NET 3.5。否则，打开一个`TextReader`（例如用`File.OpenText`）并调用`ReadLine()`四次以跳过您不想要的行，然后再次阅读第五行。

除非您确切知道每行中有多少字节，否则没有办法“捷径”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-31T12:39:41.010

如果您正在处理固定宽度的数据格式（即您知道所有行的长度相同），您可以将长度乘以所需的行号并使用 Stream.Seek 找到第 n 行的起点.

如果行不是固定长度，则需要找到正确数量的换行符，直到您位于所需行的开头。使用 StreamReader.ReadLine 最容易做到这一点。（您可以使用扩展方法使文件成为 IEnumerable<string> ，正如 Jon Skeet 所建议的那样 - 这将使您获得更好的语法，但在幕后您将使用 ReadLine）。

如果性能是一个问题，使用 Stream.Read 方法手动扫描文件中的 <CR><LF> 字节序列可能（稍微）更有效。我还没有测试过；但是StreamReader显然需要做一些工作来从字节序列中构造一个字符串——如果你不关心第一行，这个工作可以省去，所以理论上你应该可以做出一个性能更好的扫描方法. 然而，这对你来说会做更多的工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-31T12:58:30.317

除非每一行都是固定宽度并且您使用的是固定宽度编码（即不是 UTF-8 - 这是现在最常见的编码之一），否则您不能直接跳转到文本文件中的一行。

唯一的方法是读取行并丢弃您不想要的行。

或者，您可以在文件顶部（或在外部文件中）放置一个索引，告诉它（例如）第 1000 行从字节偏移 [x] 开始，第 2000 行从字节偏移 [y] 开始等等。然后使用`.Position`或移动到最近的索引点，然后向前走`.Seek()`。`FileStream`

假设最简单的方法（无索引），Jon 示例中的代码应该可以正常工作。如果你不想要 LINQ，你可以在 .NET 2.0 + C# 2.0 中敲出类似的东西：

```
// to read multiple lines in a block
public static IEnumerable<string> ReadLines(
        string path, int lineIndex, int count) {
    if (string.IsNullOrEmpty(path)) throw new ArgumentNullException("path");
    if (lineIndex < 0) throw new ArgumentOutOfRangeException("lineIndex");
    if (count < 0) throw new ArgumentOutOfRangeException("count");
    using (StreamReader reader = File.OpenText(path)) {
        string line;
        while (count > 0 && (line = reader.ReadLine()) != null) {
            if (lineIndex > 0) {
                lineIndex--; // skip
                continue;
            }
            count--;
            yield return line;
        }
    }
}
// to read a single line
public static string ReadLine(string path, int lineIndex) {
    foreach (string line in ReadLines(path, lineIndex, 1)) {
        return line;
    }
    throw new IndexOutOfRangeException();
} 
```

如果您需要测试线的值（而不仅仅是线索引），那么这也很容易做到；只需调整迭代器块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T13:08:17.067

如果您要从文件中查找许多不同的行（但不是全部），那么您可能会从构建索引中获得一些好处。使用已经在这里的任何建议，但是随着您的进行，为您已经找到的任何行建立一个字节偏移数组，这样您就可以避免每次从头开始重新扫描文件。

**附录：**
如果您只需要偶尔的“随机”行，还有另一种方法可以快速完成，但代价是更复杂的搜索（如果乔恩的答案足够快，为了简单起见，我肯定会坚持下去）。

您可以进行“二分查找”，只需从文件的中间开始查找序列“1”，您找到的第一个匹配项将使您知道找到的行号；然后根据您要查找的行相对于您不断递归拆分的找到的数字的位置。

为了获得额外的性能，您还可以假设行的长度大致相同，并让算法“猜测”您要查找的行相对于文件中总行数的大致位置，然后从从那里开始。如果您不想对文件的长度做出假设，您甚至可以通过先将其分成两半并使用它首先找到的行号作为文件中有多少行的近似值来使其自质为整个。

绝对不是微不足道的实现，但是如果您在具有大量行的文件中进行大量随机访问，则可能会在性能提升方面得到回报。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-31T15:59:16.240

如果您需要能够使用在后台执行 ReadLine() 的函数跳转到第 24,000 行，将会有点慢。

如果行号很高，您可能想要对文件中的行可能在哪里进行某种有根据的猜测，然后从那里开始读取。这样就可以到达第 24,567 行，您不必先阅读 24,566 行。你可以跳到中间的某个地方，根据 /t 后面的数字找出你所在的行，然后从那里开始计数。

不久前，我与一位开发人员一起工作，他必须在 RDBMS 很常见之前构建一个数据库。他对您的问题的解决方案与我刚刚写的类似，但在他的情况下，他将地图保存在单独的文件中。该地图可以将每一百行映射到其在文档中的位置。像这样的地图可以非常快速地加载，这可能会增加阅读时间。当时他的系统对于只读数据非常快速和高效，但对于读/写数据不是很好。（每次换线都得换整张图，效率不高）

# mysql - MySQL 5.4 有多稳定

> ID：931978
> 
> 赞同：1
> 
> 时间：2009-05-31T12:30:44.443
> 
> 标签：mysql

我刚刚发现了[MySql 5.4](http://dev.mysql.com/doc/mysql-5.4-features/en/index.html) –

*   这个版本有多稳定？

*   我在哪里可以找到有关此版本的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T13:10:34.630

MySQL 5.4 是一个预览/测试版本，是 Oracle 下的第一个版本。作为测试版本不打算在生产站上使用。

他们说 5.4 中最重要的变化是引入了[MySQL Optimizer](http://forge.mysql.com/wiki/How_does_the_MySQL_Optimizer_work)，它使一些查询的运行速度提高了 90%。

Oracle 希望更频繁地发布 MySQL，对社区想法更加开放，并使用更多社区代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T13:14:03.310

5.4 是正式的预览版，因此尚未正式推荐用于生产。但是，我确实知道有不少大型网站在生产中使用它，这要归功于性能的巨大提升。

至于更多信息：

[http://dev.mysql.com/doc/mysql-5.4-features/en/index.html](http://dev.mysql.com/doc/mysql-5.4-features/en/index.html)

[http://dev.mysql.com/doc/refman/5.4/en/news-5-4-0.html](http://dev.mysql.com/doc/refman/5.4/en/news-5-4-0.html)

[http://dev.mysql.com/tech-resources/articles/mysql-54.html](http://dev.mysql.com/tech-resources/articles/mysql-54.html)

# php - 网页标题

> ID：931979
> 
> 赞同：0
> 
> 时间：2009-05-31T12:31:47.500
> 
> 标签：php

在我的网站中，我有主要网址，例如

h**p://www.sy-stu.com/stu/music.php

该页面的标题是叙利亚学生...音乐中心

但是当我进入子页面时，例如

h**p://www.sy-stu.com/stu/music.php?module=MusicServer&page=browse&ViewType=Albums&Artistid=305

标题仍然相同，我如何修改它以显示其他内容，但在主页中保留原始页面标题。

所以我的目标是在主页面中保留旧标题并在子页面中更改标题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T12:35:15.247

您必须编写标题，例如：

```
<head>
  <title><?php getTitle(); ?></title>
</head> 
```

这将知道它在哪里并产生正确的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T12:34:24.250

**更新**

我访问过你的网站，发现你有一个定制的 CMS。CMS 可能使用模块，因此我认为输出 html 的“标题”部分是在 music.php 之外的另一个文件中生成的。

**您必须查找包含生成 <head> 和 <title> 标记的代码的文件。**这个文件可以位于任何地方，我们不可能知道开发者在哪里找到他的文件。无论如何，在此文件中，您将能够看到代码如何“接收”有关需要打印的标题的信息。**在 music.php 文件中查找此代码的用法。**

有关艺术家的信息在 music.php 文件中的某处可用。您必须以某种方式将该信息传递给“提供”标题或标题信息的代码，以便您首先必须找到文件中的代码......

请理解，您的问题很难用这个小信息正确回答，也许更糟糕（没有冒犯）这个小经历。

老答案：

```
<head>
  <title>Syrian Students Music Center <? echo $subTitle ?></title>
</head> 
```

# asp.net - ASP.NET jQuery Ajax 发布表单

> ID：931988
> 
> 赞同：0
> 
> 时间：2009-05-31T12:38:09.903
> 
> 标签：asp.net, jquery

我似乎无法让 jQuery.ajax() 函数发回我的任何 asp.net 生成的表单控件。

我在服务器端设置了一个断点并且没有任何值。

有没有办法解决这个问题，还是我必须建立一个我想要发回的清单？

另一个问题稍微跑题了，但看起来虽然 jQuery 是一个很棒的 JS 库，但它似乎与 .net 集成得不太好。

有没有人放弃 jQuery 来执行服务器端交互而只使用 ms ajax 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-31T12:52:07.287

这样做的原因是因为 asp.net webforms 不使用普通帖子（即带有输入/提交按钮）。如果您看一下它们是如何发布的，就会发现一些 javascript 处理程序最终会调用 asp.net 写入名为 __doPostBack 的页面的内置函数。

查看其他可能为您提供额外线索的 stackoverflow 答案： [Jquery asp.net Button Click Event via ajax](https://stackoverflow.com/questions/855747/jquery-asp-net-button-click-event-via-ajax/855833#855833)

对于你的第二个问题，一旦你解决了一些问题，jQuery 就是一个很棒的库，它在网络和书籍中都有大量的支持和参考资料。坚持下去，你不会后悔的:-)

# php - 重写规则不起作用

> ID：931991
> 
> 赞同：1
> 
> 时间：2009-05-31T12:42:51.533
> 
> 标签：php, apache, zend-framework, .htaccess

我已经通过 akrabat.com/zend-framework-tutorial/ 完成了 Zend Framework 的第一步。Demo-App 工作正常，但 CSS。我认为我的重写规则是错误的。所有hrefs看起来像：

*   /~cm/zf-tutorial/public/index.php/index/edit/id/1
*   /~cm/zf-tutorial/public/index.php/css/site.css

.htaccess 是：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteBase /
RewriteRule !\.(js|ico|txt|gif|jpg|png|css)$ index.php 
```

有人可以给我一个提示如何改变它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-31T12:59:53.497

我认为重写规则看起来不错。它几乎是 ZF 附带的。你如何包含你的样式表？你把它们放在哪里，index.php 等在哪里？

假设您将应用程序的文档根定义为*/htdocs/zf-tutorial/public*，并且您的样式表位于*/htdocs/zf-tutorial/public/css*中，那么您必须记住样式包含为*/css/网站.css*。

此外，您的 href 不应包含 index.php，Apache 重写规则会处理这一点。您的 href 应如下所示：

*   */index/edit/id/1*
*   */css/site.css*
*   */控制器/动作/参数列表*

# python - Python中不准确的对数

> ID：931995
> 
> 赞同：15
> 
> 时间：2009-05-31T12:48:26.187
> 
> 标签：python, math, floating-point

我每天在公司使用 Python 2.4。我使用了标准数学库中的通用对数函数“log”，当我输入 log(2**31, 2) 时，它返回 31.000000000000004，这让我觉得有点奇怪。

我用 2 的其他幂做了同样的事情，而且效果很好。我跑了'log10（2**31）/ log10（2）'，我得到了31.0

我尝试在 Python 3.0.1 中运行相同的原始函数，假设它已在更高级的版本中修复。

为什么会这样？Python中的数学函数是否可能存在一些不准确之处？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-05-31T12:55:01.087

这在计算机算术中是可以预料的。它遵循特定规则，例如[IEEE 754](http://en.wikipedia.org/wiki/IEEE_754)，这可能与您在学校学到的数学不匹配。

如果这*真的很*重要，请使用 Python 的[十进制类型](http://docs.python.org/library/decimal.html)。

例子：

```
from decimal import Decimal, Context
ctx = Context(prec=20)
two = Decimal(2)
ctx.divide(ctx.power(two, Decimal(31)).ln(ctx), two.ln(ctx)) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-31T14:08:16.510

你应该阅读“每个计算机科学家应该知道的关于浮点运算的知识”。

[http://docs.sun.com/source/806-3568/ncg_goldberg.html](http://docs.sun.com/source/806-3568/ncg_goldberg.html)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-05-31T12:58:09.223

*始终*假设浮点运算中会有一些错误，并在考虑该错误的情况下检查是否相等（例如 0.00001% 之类的百分比值或 0.00000000001 之类的固定值）。这种不准确性是给定的，因为并非所有十进制数都可以用固定位数精度的二进制表示。

如果 Python 使用 IEEE754，那么您的特殊情况就不是其中之一，因为 31 应该很容易用单精度表示。但是，它可能会在计算 log [2] 2 ^(31)所需的众多步骤之一中失去精度，这仅仅是因为它没有代码来检测特殊情况，例如 2 的直接幂。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-31T13:01:06.613

浮点运算从来都不是精确的。对于语言/硬件基础架构，它们返回具有可接受的相对误差的结果。

一般来说，假设浮点运算是精确的是完全错误的，尤其是单精度。维基百科浮点文章中的[“准确性问题”部分:)](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-31T19:09:17.210

IEEE 双浮点数具有[52 位精度](http://www.johndcook.com/blog/2009/04/06/anatomy-of-a-floating-point-number/)。由于 10^15 < 2^52 < 10^16，双精度数的有效数字在 15 到 16 之间。结果 31.000000000000004 对 16 位数字是正确的，因此与您预期的一样好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-31T13:04:49.273

这很正常。我希望 log10 比 log(x, y) 更准确，因为它确切地知道对数的底是什么，也可能有一些硬件支持计算以 10 为底的对数。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-05T15:10:44.037

> 浮动不精确

我不赞成这个论点，因为在大多数平台上（使用底层的 IEEE 754 浮点）都精确地表示了 2 的确切幂。

因此，如果我们真的想要 2 的精确幂的 log2 是精确的，我们可以。
我将在 Squeak Smalltalk 中进行演示，因为在该语言中更改基本系统很容易，但语言并不重要，浮点计算是通用的，Python 对象模型与 Smalltalk 相差不远。

对于以 n 为底的日志，在 Number 中定义了 log: 函数，它天真地使用了 Neperian 对数`ln`：

```
log: aNumber 
    "Answer the log base aNumber of the receiver."
    ^self ln / aNumber ln 
```

`self ln`（取接收器的 neperian 对数），`aNumber ln`并且`/`是三个操作将结果四舍五入到最接近的浮点数，并且这些舍入误差可以累积......所以天真的实现会受到你观察到的舍入误差的影响，我猜 Python 实现log函数的区别不大。

```
((2 raisedTo: 31) log: 2) = 31.000000000000004 
```

但是，如果我像这样更改定义：

```
log: aNumber 
    "Answer the log base aNumber of the receiver."
    aNumber = 2 ifTrue: [^self log2].
    ^self ln / aNumber ln 
```

在 Number 类中提供一个通用 log2：

```
log2
    "Answer the base-2 log of the receiver."
    ^self asFloat log2 
```

以及 Float 类中的这种改进：

```
log2
    "Answer the base 2 logarithm of the receiver.
    Care to answer exact result for exact power of two."
    ^self significand ln / Ln2 + self exponent asFloat 
```

其中`Ln2`是一个常数（2 ln），然后我有效地得到了一个精确的 log2，因为这个数字的有效数字 = 1.0（包括 Squeak 指数/有效数字定义的次正规），并且`1.0 ln = 0.0`。

实现非常简单，在 Python 中（可能在 VM 中）应该可以毫无困难地进行翻译；运行时成本非常便宜，所以这只是我们认为此功能是否重要的​​问题。

正如我一直说的那样，浮点运算结果被舍入到最接近（或任何舍入方向）的可表示值这一事实并不是浪费 ulp 的许可。精确性是有代价的，无论是在运行时代价还是实现复杂性方面，所以它是权衡驱动的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-31T19:53:56.963

鉴于 IEEE-754 算术精确到极限，python 中数字的`repr`esentation ( `float.__repr__`) 尝试在转换回来时返回尽可能接近真实值的数字字符串。无论如何，如果您`print`编辑结果，您不会注意到：

```
>>> from math import log
>>> log(2**31,2)
31.000000000000004
>>> print log(2**31,2)
31.0 
```

`print`将其参数转换为字符串（在这种情况下，通过`float.__str__`方法），通过显示更少的数字来满足不准确性：

```
>>> log(1000000,2)
19.931568569324174
>>> print log(1000000,2)
19.9315685693
>>> 1.0/10
0.10000000000000001
>>> print 1.0/10
0.1 
```

通常无用的答案非常有用，实际上:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-10T09:29:21.697

如果您想计算数字“n”中“k”的最高幂。那么下面的代码可能会有所帮助：

```
import math
answer = math.ceil(math.log(n,k))
while k**answer>n:
    answer-=1 
```

**注意：**你不应该使用 'if' 而不是 'while'，因为这在某些情况下会产生错误的结果，例如 n=2**51-1 和 k=2。在这个例子中，“if”的答案是 51，而“while”的答案是 50，这是正确的。*******